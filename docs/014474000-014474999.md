# StackOverflow 问答 14474000-14474999

# javascript - Webrick 使用 jquery ajax 期望哈希（得到数组）

> ID：14474000
> 
> 赞同：0
> 
> 时间：2013-01-23T06:51:57.790
> 
> 标签：javascript, jquery, ruby-on-rails

我正在使用 Handsontable jquery 插件来更改数据网格中的单元格。Handsontable 以数组形式发送数据，如下所示：

```
var change = [['Z', null, 'X']] 
```

然后我使用 ajax 将此数据传递给服务器：

```
$.ajax({
  url: "/incomes",
  dataType: "text",
  type: "POST",
  data: { data: change },
}); 
```

问题是，使用空值 ajax 将忽略此值并更改数组，如下所示：

```
change[0][0]    Z
change[0][1]    
change[0][2]    X 
```

因为数组中的这个值为空，Webrick 会抛出以下错误： `Internal Server Error` `expected Hash (got Array) for param 0`

我真的希望避免循环遍历数据（在实际示例中有多个数组）并更改任何这些空值。有没有更简单的方法来确保数据可以发送到服务器而不会出错？

**HTML 错误：**

# 内部服务器错误

参数“0”的预期哈希（得到数组）

* * *

WEBrick/1.3.1 (Ruby/1.9.3/2012-11-10) 在 localhost:3000

**终端错误：**

```
ERROR TypeError: expected Hash (got Array) for param `0'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/utils.rb:127:in `normalize_params'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/utils.rb:128:in `normalize_params'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/utils.rb:96:in `block in parse_nested_query'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/utils.rb:93:in `each'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/utils.rb:93:in `parse_nested_query'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/request.rb:332:in `parse_query'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/request.rb:209:in `POST'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/methodoverride.rb:26:in `method_override'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/methodoverride.rb:14:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/runtime.rb:17:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/lock.rb:15:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/static.rb:62:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/engine.rb:479:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application.rb:223:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/content_length.rb:14:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/rack/log_tailer.rb:17:in `call'
    /home/g/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.4/lib/rack/handler/webrick.rb:59:in `service'
    /home/g/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
    /home/g/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
    /home/g/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:16:29.567

这是在黑暗中的尝试，但您可以尝试使用 JSON 或其他内容类型进行 POST：

```
$.ajax({
  url: "/incomes",
  dataType: "text",
  type: "POST",
  data: JSON.stringify({ data: change }),
  contentType: 'application/json'
}); 
```

我建议将此作为解决方案，因为 JSON 格式可以比默认的 x-www-form-urlencoded 格式更自然地表示空值和嵌套数组（IMO）。

**这是如何工作的**

`JSON.stringify`将确保您的数据被序列化为 JSON。使用这样的`contentType`设置将导致 HTTP 请求中的 Content-Type 标头为“application/json”。Rails 以此为线索将传入的 POST 正文解释为 JSON。

# version-control - VSS 6 获取最新版本窗口不显示

> ID：14474003
> 
> 赞同：1
> 
> 时间：2013-01-23T06:52:14.537
> 
> 标签：version-control, visual-sourcesafe

不幸的是，我们公司正在使用 VSS6！

当我想获取最新版本时，此弹出窗口不显示，我需要此窗口来检查递归选项。从今天开始我就有这个问题。
谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:33:26.363

您可能无意中勾选了不显示对话框的选项。尝试在单击获取最新版本的同时**按住 Shift键。**这应该会强制出现对话框。

然后，您可以取消选中“仅在按下 Shift 键时显示此对话框”复选框，以确保您不必每次都按住 Shift。

# android - Google Maps Geolocation api：未配置访问权限

> ID：14474005
> 
> 赞同：6
> 
> 时间：2013-01-23T06:52:33.390
> 
> 标签：android, geolocation, google-maps-android-api-2

我正在尝试在 Android 上使用 google geolocation api。我确定我有适用于 android 的有效 apikey 并且我已启用计费。但是，服务器返回

域：usageLimits reson：访问未配置代码：403

谁能解决这个问题？PS：我没有对谷歌地图开发的企业支持。我的代码在下面列出

```
JSONObject holder = new JSONObject();  
JSONArray cellarray = new JSONArray();  
JSONArray wifiarray = new JSONArray();
JSONObject cell = new JSONObject();
JSONObject wifi1 = new JSONObject();
JSONObject wifi2 = new JSONObject();
try {
    cell.put("cellId", cid);
    cell.put("locationAreaCode", lac); 
    cell.put("mobileCountryCode", mcc);  
    cell.put("mobileNetworkCode", mnc);
    cell.put("age", 0);
    cell.put("signalStrength", -95);
    cellarray.put(cell);

    wifi1.put("macAddress", "01:23:45:67:89:AB");
    wifi1.put("signalStrength", 8);
    wifi1.put("age", 0);
    wifi1.put("signalToNoiseRatio", -65);
    wifi1.put("channel", 8);
    wifiarray.put(wifi1);

    wifi2.put("macAddress", "01:23:45:67:89:AC");
    wifi2.put("signalStrength", 4);
    wifi2.put("age", 0);
    wifiarray.put(wifi2);

    holder.put("homeMobileCountryCode", mcc);
    holder.put("homeMobileNetworkCode", mnc);
    holder.put("radioType", "gsm");
    holder.put("carrier", "T-Mobile");
    holder.put("cellTowers", cellarray);
    holder.put("wifiAccessPoints", wifiarray);

} catch (JSONException e) {  
    e.printStackTrace();  
}
DefaultHttpClient client = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("https://www.googleapis.com/geolocation/v1/geolocate?key="+API_key);
StringEntity stringEntity = null;  

try {  
    stringEntity = new StringEntity(holder.toString());  
    stringEntity.setContentType("application/json");

    Log.v("zf",stringEntity.getContentType().toString());

} catch (UnsupportedEncodingException e) {  
    e.printStackTrace();  
}

httpPost.setEntity(stringEntity);  
HttpResponse httpResponse = null;  
try {
    httpResponse = client.execute(httpPost);  
} catch (ClientProtocolException e) {  
    e.printStackTrace();  
} catch (IOException e) {  
    e.printStackTrace();  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:02:29.930

可能的原因 #1：将传感器值添加到您的 url，它不是可选的！

可能的原因 #2：您是否在 API 控制台中启用了 Geolocation 服务？

可能的原因 #3：您是否在 API 控制台中设置了账单信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T00:06:07.313

当您阅读字符串响应时，错误的原因就很清楚了：

```
"code": 403,
"message": "There is a per-IP or per-Referer restriction configured on your API key and the request does not match these restrictions. Please use the Google Developers Console to update your API key configuration if request from this IP or referer should be allowed." 
```

转到开发者控制台并在凭据下将您的应用程序添加到“限制对您的 Android 应用程序的使用”下。

# c# - 为什么即使我的类型实现了 IDisposable，Using 语句也会出错？

> ID：14474009
> 
> 赞同：9
> 
> 时间：2013-01-23T06:52:41.150
> 
> 标签：c#, entity-framework, unit-testing

在我的`DataAccess`项目中，我有代码：

```
using (TandAEntities dataContext = new TandAEntities())
{
    // Some code
} 
```

这没有错误并且工作正常。

但是在我的单元测试项目中，我有相同的代码，但是编译器给出了错误；using 语句中使用的类型必须可以隐式转换为`'System.IDisposable'`

我通过按检查了定义`F12`，它确实实现`IDisposable`了，并且有一个 dispose 方法。

我可能遗漏了一些参考资料吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T06:56:05.260

最有可能的答案是链接的重复缺失`using System.Data.Linq`。

其他选项：您在某处有过时的 DLL（即安装在 GAC 中）。

如果您无法通过环顾四周并检查 GAC 轻松找到陈旧的 DLL - 将代码更改为使用此类型但编译和调试测试的代码。检查 Debug->Windows->Modules 以了解实际使用的这种类型的程序集的位置。

# image - SilverStripe 3：选择单个图像 UploadField

> ID：14474010
> 
> 赞同：1
> 
> 时间：2013-01-23T06:52:49.343
> 
> 标签：image, silverstripe

我在具有 has_one 关系的数据对象中有一个图像字段。我已经设定

`$imageField->setConfig('allowedMaxFileNumber', 1);`

问题是我可以选择多个字段。但是，单击“保存”按钮时只有一个正在保存。

由于通过“来自计算机”或“来自文件”的多个图像选择，用户有一个印象，他可以上传多个文件。[http://i.imgur.com/gVoNtsL.png](http://i.imgur.com/gVoNtsL.png)

如何禁用 UploadField 的多个图像选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:26:19.533

这是一个已知的错误： http: [//open.silverstripe.org/ticket/8145](http://open.silverstripe.org/ticket/8145)。现在，我建议您使用 setDescription() 方法来告知您的用户只允许选择一个文件。

# jquery - 如果字段是由wordpress中的插件添加的，如何为标签提供id？

> ID：14474013
> 
> 赞同：0
> 
> 时间：2013-01-23T06:52:57.010
> 
> 标签：jquery, wordpress

我已经通过在 wordpress 中使用插件添加了一个自定义字段，但现在我想使用 jQuery 来显示/隐藏该自定义字段。我能够隐藏该字段，因为我知道该字段的 ID，但我也想隐藏该字段的标签，但我不知道该标签的 ID。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:07:09.557

您知道该字段的 id，因此如果您具有类似的 html 结构，请使用以下内容

```
<label id="customlabel">....</label>
<input type="text" id="customtext" />

$("#customtext").prev().find('#customlabel').hide(); 
```

# sql - 生成查询的问题

> ID：14474017
> 
> 赞同：1
> 
> 时间：2013-01-23T06:53:37.300
> 
> 标签：sql

我有两张桌子`cdr`和`cdr_01`

```
////Cdr////
id calling_no called_no call_date duration
1 9899767876 0112356788 01-jan-2012 160
2 9999758743 0244356788 01-jan-2012 191

////cdr_01/////
id calling_no called_no call_date duration
1 9999758743 0244356788 01-jan-2012 190
2 9899767876 0112356788 01-jan-2012 163 
```

我希望通过匹配每列而不是 id 来匹配两个表的输出，并且如果持续时间的差异为 -1, 0 , 1 ，那么将忽略要显示的其余部分。

输出 ：

```
calling_no called_no call_date duration
9899767876 0112356788 01-jan-2012 163 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:20:33.100

```
SELECT c1.calling_no, 
       c1.called_no, 
       c1.call_date, duration =
       CASE
           WHEN c.duration > c1.duration THEN c.duration ELSE c1.duration
       END
  FROM cdr AS c INNER JOIN cdr1 AS c1 ON 
       c.calling_no = c1.calling_no AND 
       c.called_no = c1.called_no AND
       c.call_date = c1.call_date
 WHERE (SIGN(c.duration - c1.duration) * (c.duration - c1.duration)) > 1 
```

**编辑：**更新查询考虑到`cdr.duration`可能是>`cdr1.duration`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:22:07.917

这是可以得到你想要的结果的代码：

```
SELECT  
    c.calling_no ,  
    c.called_no ,
    c.call_date ,
    c.duration
FROM Cdr c
    JOIN Cdr_01 c1
    ON c.calling_no = c1.calling_no 
       AND c.called_no = c1.called_no 
       AND c.calle_date = c1.call_date
WHERE  (c.duration - c1.duration) NOT IN (-1, 0, 1) 
```

# python - 缺少斜杠的 URL 在 CherryPy 中不会被重定向

> ID：14474018
> 
> 赞同：0
> 
> 时间：2013-01-23T06:53:39.727
> 
> 标签：python, cherrypy, static-files, trailing-slash

我在 CherryPy 处理静态文件时遇到了困难。问题与处理 URL 的尾部斜杠有关。有时会添加缺少的斜线，有时则不会：行为是不可预测的。我确信那里潜伏着一个错误。当我添加或删除一些静态文件时，该错误似乎出现了。看起来可能有一个未初始化的变量在处理斜杠的函数中创建了一个未确定的状态。我已经整理了一个显示问题的最小应用程序（至少在我的机器中）。我在 Ubuntu 12.10 下使用 CherryPy 3.2.2。

```
import cherrypy

class Root(object): pass

conf = {
    '/':{
    'tools.staticdir.on': True,
    'tools.staticdir.dir': '/home/bob/www',
    'tools.staticdir.index': 'index.htm',
    'tools.staticdir.debug': True,
    },
}

cherrypy.tree.mount(Root(), '/', config=conf)
cherrypy.engine.start()
cherrypy.engine.block() 
```

我的实验性静态文件夹（/home/bob/www）的结构非常简单：

```
/home/bob/www/index.htm         <-- This file is just <html><body>Hello</body></html>
/home/bob/www/dir/index.htm     <-- This files includes a <img src="picture.jpg"> tag in it
/home/bob/www/dir/picture.jpg   <-- Any picture will do 
```

如果我浏览**localhost:8080/dir/**，结果页面会显示图像。
如果我浏览**localhost:8080/dir**，结果页面不会*显示*图像。

任何帮助，将不胜感激。也许我没有正确配置应用程序，因为我是 CherryPy 的新手。

谢谢，
鲍勃

PS我已经阅读了stackoverflow.com/questions/10276060，它有类似的问题，但使用了Routes。我不使用路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:47:51.020

临时解决方案

此处显示的临时解决方案需要对其中一个 CherryPy 源文件进行小补丁。我要感谢告诉我这件事的 Felix Bonkoski。我做了一些谷歌搜索，并在 bitbucket.org/cherrypy/cherrypy/issue/895/ 上找到了对它的引用。

以下是说明：

找到并编辑文件 static.py（在我的 Ubuntu 机器中，它位于 /usr/local/lib/python2.7/dist-packages/cherrypy/lib/static.py）。在函数 staticdir() 中，找到下面的行。它们位于该功能的末尾。

```
 if handled:
    request.is_index = filename[-1] in (r"\/")   <--- Line in question 
```

编辑有问题的行，使其看起来像这样：

```
 if handled:
    request.is_index = True 
```

并保存文件。

此时我重新启动了计算机，CherryPy 现在可以正常工作了，我认为它应该可以工作。

# templates - 我如何在 cakephp 中实现多模板

> ID：14474023
> 
> 赞同：2
> 
> 时间：2013-01-23T06:53:55.120
> 
> 标签：templates, cakephp

我使用 CakePHP 框架，我想在我的项目中有多个模板。
有没有办法在 CakePHP 中实现多个模板？

例如，管理员可以在后端选择第一个或第二个模板，用户可以使用相同的模板。（就像在 Joomla 后端中一样）。如果有什么办法，我该如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:42:34.720

只是给你关于如何做到这一点的基本想法。

在 app_controller 中尝试下面的代码。

```
<?php
class AppController extends Controller
{
    var $components = array( 'Auth','Session', 'RequestHandler','Email','Gzip.Gzip','SwiftMailer');

    var $helpers = array( 'Javascript', 'Form', 'Html', 'Session','Time','Custom','Paginator','Text' );

    function beforeFilter()
    {
        if(isset($this->params['admin']) && $this->params['admin'] == 1)
        {
            $this->layout = "admin";
        }
        else
        {
            $this->layout = "default";
        }       
    }
?>
```

在扩展 app_controller 的其他控制器文件中，您必须具有如下代码。

```
<?php
class OtherController extends Controller
{
    var public $uses = array('ModelName');

    function beforeFilter()
    {
        parent::beforeFilter();
    }
?>
```

**您还可以覆盖`$this->layout`每个控制器操作。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:44:31.487

您可以在中创建不同的模板`View/layouts`

`template_1.ctp`,`template_2.ctp`有不同的风格

并创建包含现有模板之一或在;中`default.ctp`设置的布局。`$this->layout = 'template_1';``AppController`

```
<?php
    //default.ctp
    $loadTemplate = 'template_1.ctp';//value from database or config file?
    include_once($loadTemplate);
?> 
```

或者您可以根据[文档使用主题](http://book.cakephp.org/2.0/en/views/themes.html)

# c# - 在 VSTO excel 插件中将数据表填充到 excel 表中

> ID：14474027
> 
> 赞同：0
> 
> 时间：2013-01-23T06:54:12.170
> 
> 标签：c#, visual-studio-2010, excel, vsto

我正在 Visual Studio 2010 中创建一个 excel 插件。
我需要在带有名称摘要的新工作表中显示可用数据。

```
DataTable dt = FillDataTable();          
Excel.Worksheet dtasheet = new Excel.Worksheet();
dtasheet.Name = "Summary"; 
```

`Application_WorkbookBeforeSave`我在事件中尝试了这段代码。
设置名称后，调试模式关闭并显示 Excel 工作表。
这里有什么问题？？

# iphone - 如何知道我们的应用程序是否是从 iOS 设备安装的？

> ID：14474033
> 
> 赞同：-2
> 
> 时间：2013-01-23T06:54:41.907
> 
> 标签：iphone, ios

> **可能重复：**
> [如何在 iOS 中卸载我们的应用程序时收到通知](https://stackoverflow.com/questions/10781203/how-to-get-notified-when-our-app-is-uninstalled-in-ios)

*   当应用程序将或确实卸载时，让我知道任何处理它的方法。

*   应用程序恢复时的任何**设置，如果卸载则通知或警告****“确定要卸载应用程序？”** 带有选项 YES-NO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T06:59:17.573

**1)**。当应用程序将或确实卸载时，让我知道任何处理它的方法。

不，没有这样的方法。

**2)**。应用程序恢复时的任何设置，如果卸载则通知或警告“确定要卸载应用程序？” 带有选项 YES-NO。

iOS 总是要求用户确定他们想要删除应用程序或取消的天气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:59:10.463

此功能已经存在于 iOS 设备中。每当您继续卸载应用程序时。首先，当您卸载应用程序时，它只是删除它。当用户删除任何应用程序设备时，会使用“删除”和“取消”选项发出警报“您要删除此应用程序”。您不必为此编写任何特定代码。

有一种方法可以让您了解用户何时要删除您的应用程序。那就是您需要实现推送通知，当您尝试推送到已卸载的实例时，Apple 服务器会通知您。除此之外，没有办法检测到它。

# git - 你如何在 ubuntu 10 中打开 crontab？

> ID：14474035
> 
> 赞同：0
> 
> 时间：2013-01-23T06:54:43.607
> 
> 标签：git, crontab, ubuntu-10.04

我“不小心”设置了一个 crontab 来向我和其他几个人发送提醒电子邮件，现在我无法关闭它。

我从编写 crontab 的计算机上删除了文件，但在此之前，我已将其提交到 git 服务器，其他几个学生也将其下载到他们的计算机上。

现在，我们已经尝试了一切来解决这个问题，但我们失败了，甚至关闭了所有计算机（服务器除外），但没有任何效果。

如果您能提供帮助，我将非常高兴。而且，如果您能回答 crontab 是否可以工作，即使它位于单独服务器上的 git 存储库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:56:26.860

```
sudo crontab -u [your_user] -e 
```

并删除您的 cron 或评论它。

# facebook - 查明 Facebook 选项卡应用程序是由机器人调用还是由用户调用

> ID：14474040
> 
> 赞同：2
> 
> 时间：2013-01-23T06:55:11.090
> 
> 标签：facebook, google-app-engine, http-headers, facebook-apps, bots

Facebook Canvas 或 Tab App 是供 Facebook 用户手动调用的。我在短时间内看到大量对应用程序的调用（在不到 2 或 3 秒内大约 20 到 40 个），这使我相信这些是对应用程序的“机器人”触发调用。

有没有办法查明机器人（爬虫等）是否正在调用应用程序？

我假设 Google App Engine 用于托管该应用程序。

（对不起一个行人的问题 - 我是新手）。

谢谢。

# javascript - Oracle Apex javascript 问题

> ID：14474041
> 
> 赞同：0
> 
> 时间：2013-01-23T06:55:14.317
> 
> 标签：javascript, oracle-apex, tabular-form

我正在使用下面的方法为表单`javascript`中的单元格设置值。`tabular`

```
<script type="text/javascript">
function eventListener(pThis)
{

$('input[name="f04"]').change(function(){

var that = this;
var vRow = "f10_"+pThis.id.substr(pThis.id.indexOf('_')+1);

$.post("wwv_flow.show", 
       {p_request      : "APPLICATION_PROCESS=GET_AMOUNT",
        p_flow_id      : $v("pFlowId"),
        p_flow_step_id : $v("pFlowStepId"),
        p_instance     : $v("pInstance"),
        x01            : $(this).val()
        },
        function(data){ 
              $('input[id="f10_0002"]').val(data);
        },
        "text"
      );
});

}
</script> 
```

我需要使用 value in`var vRow`而不是`f10_0002`in `$('input[id="f10_0002"]').val(data);`。

我试过`$('input[id=vRow]').val(data);`和`$('input[id='"'+vRow+'"']').val(data);`

但不起作用。javascript 在这些情况下不起作用。但`$('input[id="f10_0002"]').val(data);`有效。

`var vRow`我怎么能为此使用价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:00:13.970

尝试：

```
$('input[id="' + vRow + '"]').val(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:19:29.717

虽然使用选择器`input[id=value]`在技术上是正确的（因为 jQuery 属性选择器），但这不是必需的。主要原因是因为您按 ID 定位元素。`document.getElementById`Javascript 有一个特别快的特殊方法，当您指定按 ID 选择时，我确信 jQuery 会在内部使用 ( )。要触发按 ID 选择元素，可以使用`#`选择器字符串开头的字符。由于您也尝试使用变量的值，因此您可以连接`"#"`and `vRow`，例如：

```
$("#" + vRow).val(data); 
```

`#`相当于通过 ID 匹配元素。如果您查看 jQuery 选择器页面 ( [http://api.jquery.com/category/selectors](http://api.jquery.com/category/selectors) )，您会看到有几个特殊字符可以帮助选择元素。正如我所说，`#`是用于 ID...`.`是用于类等。因此，与其让 jQuery 解析字符串“input[id=value]”并进行大量额外处理，您可以通过简单地帮助 jQuery 更有效地完成它使用`#`.

# java - 使用 Java 小程序选择 Web 用户的打印机

> ID：14474046
> 
> 赞同：-1
> 
> 时间：2013-01-23T06:55:34.933
> 
> 标签：java, html, printing, applet, awt

我一直在寻找一种解决方案来从 java 小程序（以及更多）更改默认打印机，但没有成功。

我需要的是使用 javascript 的 print() 方法进行打印，该方法仅在默认打印机中打印，因此，在此之前，将默认打印机更改为目标打印机。

这可能吗？是否有任何图书馆可以做类似“setDefaultPrinter”或类似的事情？

注意：我正在尝试打印 HTML 页面，在用户在浏览器中看到它时呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:59:16.297

引自[In Java 如何更改或设置默认打印机](https://stackoverflow.com/questions/11787662/in-java-how-do-i-change-or-set-a-default-printer)

试试这个

```
PrinterJob pjob = PrinterJob.getPrinterJob();
        PageFormat pf = pjob.defaultPage();
        pjob.setPrintable(null, pf);

        if (pjob.printDialog()) {
          pjob.print();
        } 
```

# sql - 如何在 DB2 中将 VARCHAR 转换为 TIMESTAMP

> ID：14474049
> 
> 赞同：2
> 
> 时间：2013-01-23T06:55:57.357
> 
> 标签：sql, database, db2

我在 BD2 表中有一个 varchar 值，如下格式

```
121226145503+0530 
```

我想将此 varchar 值转换为时间戳格式，如下所示

```
2012/12/26 14:55:03 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:17:31.623

在 DB2 9.7 中，您还可以使用 TO_DATE 函数：

```
date(to_date(column_with_date,'DD-MM-YYYY HH:MI:SS')) 
```

此外，您可以使用该`TRANSLATE`功能

```
select 
   date(translate('DD/MM/YYYY',column-with-the-date,'xyz...'))
from
   table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T01:41:06.150

```
with d (cwd) as                                              
 (values( cast( '121226145503+0530' as varchar(20))))        
select cwd as vc_input                                       
 ,  to_date(cwd, 'YYMMDDHH24MISS'      )        as ts_from_vc
 ,  varchar_format  ( to_date(cwd, 'YYMMDDHH24MISS')         
                    , 'YYYY/MM/DD HH24:MI:SS' ) as vc_from_ts
from d                                                       
; -- output from above query follows, as likeness of a report:
....+....1....+....2....+....3....+....4....+....5....+....6....+....
VC_INPUT              TS_FROM_VC                  VC_FROM_TS         
121226145503+0530     2012-12-26-14.55.03.000000  2012/12/26 14:55:03
********  End of data  ******** 
```

# php - Url 不适用于 Zend 中的静态页面控制器和路由器

> ID：14474051
> 
> 赞同：0
> 
> 时间：2013-01-23T06:56:01.820
> 
> 标签：php, zend-framework

我正在使用 Zend 框架做 web 应用程序。我正在使用的库是 1.12

在项目中，我有两个模块，即默认和管理

默认模块有一些静态页面，我已经设置了路由器。在路由器中我设置了控制器和动作，请参考下面的代码。

在引导文件中，

```
 protected function _initModules() {

        $defaultstaticRoute = new Zend_Controller_Router_Route(
                                '/:staticpage',
                                array('module' => 'default',
                                    'controller' => 'index',
                                    'action' => 'displaystatic',
                                    'staticpage' => '([a-z0-9]+-)*[a-z0-9]+'  
                                    ),                 
                                array(
                                   'staticpage' => '([a-z0-9]+-)*[a-z0-9]+'                 
                                )
                            );

            $router->addRoute('defaultstatic', $defaultstaticRoute);
    } 
```

在控制器中，

```
class IndexController extends Zend_Controller_Action
{
    public function init()
    {

    }

    public function indexAction()
    {

    }

    public function displaystaticAction()
    {       
        //get the file name from the url
       $page = $this->getRequest()->getParam('staticpage');

        //render the view
       $this->render($page);

     }
} 
```

`http://myproject/index`如果 url 是这样的，上面的代码可以正常工作 `http://myproject/aboutus`

但是，如果 url 没有页面名称，比如

```
http://myproject/ 
```

然后它将我重定向到 404 not found 页面，而它必须显示索引页面。

我已经跟踪了这个问题，我发现它出现在索引控制器的 init() 方法中，并且在它进入 404 之后。

我的代码有什么问题？

**编辑：**
上述问题由 Tim Fountain 给出的解决方案解决，但我发现另一个问题并没有通过上述技巧解决。下面是代码，

在引导文件中：

```
 $servicesstaticRoute = new Zend_Controller_Router_Route(
    'services/:pagename',
    array('module' => 'default',
            'controller' => 'services',
            'action' => 'displayservices',
            'pagename' => 'index'    
        ),                 
        array(
           'pagename' => '([a-z0-9]+-)*[a-z0-9]+'                 
        )
    );
$router->addRoute('servicesstatic', $servicesstaticRoute); 
```

对于上面的代码**http://myproject/services/index**有效但**http://myproject/services/**无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:17:58.020

路由中的第一个数组提供默认值。如果要`http://myproject/`渲染静态页面'index'，则需要`staticpage`将此数组中的值更改为'index'：

```
$defaultstaticRoute = new Zend_Controller_Router_Route(
                            '/:staticpage',
                            array('module' => 'default',
                                'controller' => 'index',
                                'action' => 'displaystatic',
                                'staticpage' => 'index'  
                                ),                 
                            array(
                               'staticpage' => '([a-z0-9]+-)*[a-z0-9]+'                 
                            )
                        ); 
```

这样，如果`staticpage`URL 中不存在，它将被赋予值“索引”。

如果您希望改为呈现控制器的 index 操作，只需删除 staticpage 的默认值，您的路由将不再匹配此请求。

# azure - Azure 附加订阅

> ID：14474055
> 
> 赞同：1
> 
> 时间：2013-01-23T06:56:05.523
> 
> 标签：azure

再会，

请问，如果我订阅 Azure 时只包含虚拟机和带宽怎么办？

*   未来是否可以添加/订阅其他服务，如存储、CDN 等？
*   是否可以升级带宽？例如，我订阅了 300GB 的带宽，然后将其升级到 500GN？

*   对于想要购买虚拟机的电子商务网站，除了虚拟机和带宽之外，我还应该订阅什么？

非常感激您的帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:34:01.763

Windows Azure 提供了几个订阅[选项](http://www.windowsazure.com/en-us/pricing/purchase-options/)

*   *即用即付*- 非常灵活的选项，没有前期成本，也没有承诺期
*   *6 / 12 个月的合同*（给你折扣） - 时间承诺合同（一些有预付费用）

![Azure 优惠](../Images/d50600cd0c058a3e5fd8d3065cd56eb3.png)

Azure 费用分为几种类型：

*   按使用小时收费 - 云服务（包括云网站）和虚拟机
*   按使用的千兆字节收费 - 例如 Azure 存储、SQL 数据库、带宽、内容交付网络 (CDN)
*   某些服务也按交易收费。

所有定价详细信息都可以在[Azure 计算器](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)中找到。

> *   未来是否可以添加/订阅其他服务，如存储、CDN 等？

是的。这些服务（即存储或 CDN）的费用将添加到您在提供这些服务时选择的订阅中。您可以有几种不同的订阅（例如，一种用于所有存储费用，一种用于 Azure SQL 等）

![订阅示例](../Images/76cf6ad733d3961101facbea04fe56a7.png)

> 是否可以升级带宽？例如，我订阅了 300GB 的带宽，然后将其升级到 500GB？

您无需执行任何操作（即升级）即可使用更多带宽。所有费用都将添加到您的订阅中。如果您有一些预付计划，您需要检查有关[折扣](http://www.windowsazure.com/en-us/pricing/purchase-options/)等的计划详细信息。对于*即用即付*计划，请访问[Azure Calculator](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)。

> 对于想要购买虚拟机的电子商务网站，除了虚拟机和带宽之外，我还应该订阅什么？

您只需要预配额外的 VM，这些 VM 将添加到您的订阅中。如上所述，对于预付费计划，您需要查看有关[折扣](http://www.windowsazure.com/en-us/pricing/purchase-options/)等的计划详细信息。对于现收现*付*计划，请访问[Azure Calculator](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)。

我建议仔细阅读[购买 Windows Azure，最多可节省 32% 的](http://www.windowsazure.com/en-us/pricing/purchase-options/)页面。由于价格（包括折扣）和计划发生变化，因此无法提供此答案的所有详细信息。所以今天准确的东西明天可能就过时了。

我希望这会有所帮助。

# ieee-754 - 分数浮点数

> ID：14474061
> 
> 赞同：0
> 
> 时间：2013-01-23T06:56:41.510
> 
> 标签：ieee-754

确定 IEEE-754 64 位浮点数中重要位置的最有效方法是什么？

例如：

56.7899 --> 4 0.005 --> 3 -56.1 --> 1 768.0 --> 0 56.56000 --> 2

我目前的解决方案是将浮点数转换为字符串表示形式，以确定余数的 strlen ，但这似乎非常低效。

编辑：我在 float64 实例上的六个位置应用了一个 round() 来摆脱像 45.00000000000096 这样的极端情况

我只对其余部分感兴趣。

# iphone - 使用 IOS SDK 是否可以在另一个通话正在进行时（在后台）检测来电？

> ID：14474065
> 
> 赞同：2
> 
> 时间：2013-01-23T06:56:58.637
> 
> 标签：iphone, ios, background-process, core-telephony

我知道我们可以使用框架（使用）获取`call state`信息。如果呼叫已经在进行中，是否可以检测到新的来电，另一件事是可以在后台应用程序中跟踪来电。`CoreTelephony``CTCallCenter`

[在 iOS4 中检测通话状态](https://stackoverflow.com/questions/3319805/detecting-call-state-in-ios4)

[iOS中检测来电的后台应用程序](https://stackoverflow.com/questions/10891503/background-app-in-ios-that-detects-incoming-phone-calls)

从上面的链接中，我认为不可能在中运行应用程序`background`。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:48:53.767

当前的sdk似乎不可能。

# actionscript-3 - 从 ActionScript 3 中的事件返回值

> ID：14474066
> 
> 赞同：0
> 
> 时间：2013-01-23T06:57:02.413
> 
> 标签：actionscript-3, events, event-handling, logic, return

我最近一直在从事一个 ActionScript 3 纸牌游戏项目，我遇到了事件处理程序的问题，我发现这有点复杂。我将尝试解释它：

轮流打牌的玩家数量不定。在他们这样做之后，他们将轮到他们右边的玩家。

```
function Round(table:Table, lead:Player)/*Table is the list of players. 
Lead is the person that starts the round*/
{
    private var query:int = 0;
    private var roundEnd:Boolean = false;
    private var currentplater:Player = lead;

    while(roundEnd == false)
    {
        query = currentPlayer.hasTurn();/*I'll explain this one later. It's 
        the problematic one*/

        //Game stuff happens.

        currentPlayer = currentPlayer.nextPlayer;/*Once the turn is over,
        it gets assigned to the next player*/
        if(currentPlayer.nextPlayer == lead)
        {
            roundEnd = true;//Everyone has played
        }
    }
} 
```

正如那里评论的那样，复杂的是`hasTurn`. 该函数必须从 Player 类激活并触发玩家处理事件并返回整数值的权限。

```
public function hasTurn():int
{
    for each(var cards:Card in hand)
    {
        cards.addEventListener(MouseEvent.CLICK, playCard);
    }
} 
```

在那之后

```
public function playCard(theCard:Card)
{
    for each(var cards:Card in hand)
    {
        cards.removeEventListener(MouseEvent.CLICK, playCard);
    }

    //More game stuff happens. Not currently relevant.

} 
```

我在这里所做的是允许玩家手中的每张牌都被打出，然后在其中一张牌被打出时取消这些权限，但我永远不会返回值`Round`，更重要的是，我无法让下一个玩家打出以后玩。我已经在脑海中多次解决这个问题，但似乎无法找到`hasTurn`返回值或结束其执行的方法，以便`Round`代码可以继续工作。我是否以错误的方式处理这个问题的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:16:59.953

这是我的 2 美分。

你应该怎么做才能正确处理这个问题。有一个类来管理你的玩家，比如 TurnManager。TurnManager 是一个有两个玩家数组的类。一个是全局玩家数组，另一个是用来轮流然后从这个数组中移除玩家。一旦这个数组为空，这意味着每个玩家都轮到了这一轮，它应该使用全局数组重新填充自己。

```
public class TurnManager{

    private Array _allPlayers;
    private Array _currentPlayers;

    public void TurnManager(Array players){
        _allPlayers = players;

        foreach(Player player in _allPlayers){
            player.endTurnFunction = this.OnRoundFinished;
        }

        RefillPlayerArray();
        Init();
    }

    public void Init(){
        ActTurn();
    }

    public void ActTurn(){
        if(_currentPlayers.length > 0){
            /*Round isnt finished*/
            Player _currentPlayer = _currentPlayers[0];
            _currentPlayer.PromptForTurnActions();
        } else {
            /*Round is finished*/
            OnRoundFinished();
            RefillPlayerArray();
            /*Restarting round*/
            _currentPlayer.PromptForTurnActions();
        }
    }

    public void RefillPlayerArray(){
        //copy all players from _allPlayer and add them to _currentPlayer
        //make sure to empty _currentPlayer First
    }

    public void OnRoundFinished(){
        //this is called when the round is finished.
    }

    public void PlayerFinishedTurn(Player player){
        ActTurn();
    }
} 
```

在开始时，当 TurnManager 创建自己时，它应该循环遍历所有玩家，以便在他们的回合结束时为他们提供调用函数，以便 TurnManager 可以继续。

就您的卡问题而言。TurnManager 处理转弯、命令和提示玩家采取行动。您还应该有一个处理玩家卡片的 CardManager。当玩家点击手中的卡片时，它将转到 CardManager 并被要求玩家。然后 CardManager 可以要求您的 GUI 播放动画等等。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:44:16.590

如评论中所述：

*   为游戏动作制作进入帧循环

例如，当用户在其他游戏设置中点击播放时：

```
addEventListener(Event.ENTER_FRAME, gameLoop, false, 0, true);

protected function gameLoop(e:Event):void
{
    //here the code for game
} 
```

您可以为卡上的 clicikn 注册单个事件，例如通过在卡的容器上注册

```
cardsHolder.addEventListener(MouseEvent.CLICK, playCard, false, 0, true);

protected function playCard(e:MouseEvent):void
{
    if(e.target is Card)
    {
    //we have clicked on a Card not on another object
    var playedCard:Card = e.target as Card;
    //do whatever with playedCard needs to be done - you can set a flag
    //that it was clicked and next turn is allowed for example
    }
} 
```

处理完点击事件后，您就可以更换播放器了

我认为这是您可以遵循的算法：

1.  开始游戏 - 洗牌，选择第一个玩家
2.  让玩家与卡片互动
3.  评估它——这通常取决于玩家进行有效移动的纸牌游戏类型
4.  检查完成游戏 - 如果玩家实际上赢了
5.  未完成然后下一个玩家

此致

# 3d - 3D 非弹性碰撞，其中穿透超出时间步长之间的对象边界

> ID：14474067
> 
> 赞同：0
> 
> 时间：2013-01-23T06:57:09.393
> 
> 标签：3d, collision

所以 2 个圆之间的碰撞检测很容易用 d < (r1 + r2) 之类的简单条件覆盖，但是如果对象在 2 个时间步长内相互穿过会发生什么？

我想编写一个程序，在一个初始速度和加速度不为 0 的球池中移动一个圆柱体。如果厚度使计算过于复杂，那么我可以考虑具有无限厚度的极硬线细线

碰撞问题图解，未按比例绘制 [http://i.imgur.com/An1GJxI.png](http://i.imgur.com/An1GJxI.png)

圆柱体直立并与 z 轴对齐。它的底座以恒定的速度在一个任意方向上滑动，因此无论它从碰撞中获得多大的力，它的路径都不会改变。球在随机运动中移动，它们自己的碰撞是单独计算的，这里不关心。

我想使用惩罚碰撞响应，但我无法确定穿透深度。如果有更简单的非弹性碰撞响应，我也可以尝试。

因为它是数值解，所以每个时间步的位置是谨慎的。如果速度没有被限制，可能会出现以下问题：

对于单个时间步，球和圆柱体都在移动，如果它们的速度足够快，球将从 Tn 直接穿过圆柱体到 Tn+1，并且不通过简单距离测试 d < (r1 + r2 )

如果球和球体相互穿过，如果发生附图中的问题，我应该如何使用一阶近似找到撞击点？检查它们是否碰撞的正确条件是什么？应该如何计算惩罚力以反映正确的碰撞？

惩罚力应该如何计算？我对计算适当的穿透力和适当的碰撞力法线也有些困惑。

# php - Extjs 树未在父节点上显示文本也无法加载子节点

> ID：14474069
> 
> 赞同：2
> 
> 时间：2013-01-23T06:57:16.640
> 
> 标签：php, mysql, extjs, extjs4

我正在使用 php/mysql 数据加载树面板。但是当我单击加载树子节点时，它也没有显示父节点的名称。它获取记录并在控制台中显示 json 响应，但无法在树中加载子节点。

**父节点的 Json 响应：**

```
[{"0":"1","id":"1","1":"Settings","name":"Settings","leaf":false,"cls":"folder"},{"0":"2","id":"2","1":"Data","name":"Data","leaf":false,"cls":"folder"},{"0":"3","id":"3","1":"Reports","name":"Reports","leaf":false,"cls":"folder"},{"0":"4","id":"4","1":"Campaigns","name":"Campaigns","leaf":false,"cls":"folder"}] 
```

**子节点的Json响应**

```
[{"0":"1","id":"1","1":"Home","text":"Home","leaf":false,"cls":"folder"},{"0":"2","id":"2","1":"Log out","text":"Log out","leaf":false,"cls":"folder"},{"0":"47","id":"47","1":"Campaign Reports","text":"Campaign Reports","leaf":false,"cls":"folder"},{"0":"49","id":"49","1":"Supplier Stats","text":"Supplier Stats","leaf":false,"cls":"folder"},{"0":"50","id":"50","1":"Label Piechart","text":"Label Piechart","leaf":false,"cls":"folder"},{"0":"51","id":"51","1":"Country Piechart","text":"Country Piechart","leaf":false,"cls":"folder"},{"0":"52","id":"52","1":"Supplier Piechart","text":"Supplier Piechart","leaf":false,"cls":"folder"},{"0":"53","id":"53","1":"Over All piechart","text":"Over All piechart","leaf":false,"cls":"folder"}] 
```

.js 文件：

```
var store = Ext.create('Ext.data.TreeStore', {
    autoLoad : true,
    root: {
        id : 'root_node',
        expanded: true
    },
    proxy: {
        type: 'ajax',
        url: 'tree-dataa.php'
    }
});

// Go ahead and create the TreePanel now so that we can use it below
 var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    region:'north',
    split: true,
    height: 360,
    minSize: 150,
    rootVisible: true,
    autoScroll: true,
    store: store
    }); 
```

PHP 文件：tree-dataa.php

```
<?php
    mysql_connect("localhost", "root", "");
    mysql_select_db("newslettercms_db");        
    $data = array();
    $q = "";
    $department = $_REQUEST['node'];

        if ($department == 'root_node') {
            $q =mysql_query("SELECT `id`,`name` FROM `cms_roles`");
        }else {
            $qq =mysql_query("SELECT right_ids FROM `cms_roles` WHERE id = '". $department ."'");
            while($ar=mysql_fetch_array($qq))
                {   
                    $q = mysql_query("SELECT `id`,`text` FROM cms_rights where id IN (".$ar['right_ids'].")");                                      
                }    
        }
        while($arr=mysql_fetch_array($q))
        {
            if ($department != 'myCompany') {
                $arr['leaf']     = false;
                $arr['cls']     = 'folder';

            }
            else {
                //$arr['leaf'] = true;
                //$arr['cls'] = 'file';
            }

            $data[] = $arr;
        }
        echo json_encode($data);
?> 
```

# java - 如何在java中使用wget

> ID：14474074
> 
> 赞同：0
> 
> 时间：2013-01-23T06:57:39.700
> 
> 标签：java, html, download

我尝试了两种方法来加载这个 html 页面： http: [//www.compare-cellphones.org/Apple-iPhone-5-vs-Apple-iPhone-4S](http://www.compare-cellphones.org/Apple-iPhone-5-vs-Apple-iPhone-4S)

1.使用 openStream() 2.使用 Connection.get()

这两种方法都适用于获取其他站点的 HTML 页面，但不适用于上述站点。我也在尝试使用 wget ..

需要使用 java 下载此 HTML 页面的任何帮助。工作代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:22:16.400

您可以在此处查看我的 Curl 示例以获取想法：

[如何使用带有用户名和密码的 couchdb4j api 连接到 couchdb 数据库？](https://stackoverflow.com/questions/6567320/how-to-connect-to-couchdb-database-using-couchdb4j-api-with-username-and-passwor/14241612#14241612)

问题是关于 CouchDB，但答案并非如此。

# gwt-celltable - 如何在 GWT 中为 Datagrid 的每个单元格提供工具提示

> ID：14474079
> 
> 赞同：1
> 
> 时间：2013-01-23T06:57:55.307
> 
> 标签：gwt-celltable, gwt-2.5

我有一个 Datagrid，我需要在工具提示中显示每个单元格的值。

如果我使用的是 celltable，那么我可以通过以下方式轻松设置每个单元格的标题。

```
cellTable.addCellPreviewHandler(new Handler<GWTEvent>() {
  @Override
  public void onCellPreview(CellPreviewEvent<GWTEvent> event) {
    if ("click".equals(event.getNativeEvent().getType())) {
    GWTEvent data1 = event.getValue();
    fireEvent(new ClassicViewWidgetClickEvent(eventsList.get(i).getMessageId()));
    }
    if ("mouseover".equals(event.getNativeEvent().getType())) {
      Element cellElement = event.getNativeEvent().getEventTarget().cast();
      cellElement.setTitle("Bod Message");
    }
  }
} 
```

如果**我为 Datagrid 编写了相同的逻辑，它只**适用于**点击**事件。**mouseover**事件未触发。为什么它不为 Datagrid 开火？实际上我的主要问题是如何为数据网格中的每个单元格设置图块？你还有其他选择吗？请回复。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-27T14:06:16.483

对于工具提示，创建一个内部类：

```
public class MyTooltip extends PopupPanel {
    /**
     * @param html
     *            is to pass tip information.
     */
    @Inject
    public MyTooltip(final HTMLPanel html) {
        super(true);
        setWidget(html);
    }
} 
```

并在鼠标悬停/单击单元格时执行以下操作，

```
 final HTMLPanel html = new HTMLPanel("");
    html.getElement().setAttribute("style","padding: 10px;"); // set some style
    html.add(new Label("hello!")); // add widgets
    MyTooltip tooltip = new MyTooltip();
    tooltip.setWidget(html);
tooltip.setPopupPosition(event.getClientX() + 10,event.getClientY() + 10);
    tooltip.show(); 
```

# java - 枚举关键字的使用和枚举关键字背后的.class的生成

> ID：14474080
> 
> 赞同：0
> 
> 时间：2013-01-23T06:58:04.243
> 
> 标签：java

在这个问题中，我很困惑如何生成所有这些.class 类是`A$Enum$1,A$Enum$2,A$Enum,A$Enum,A`请解释它背后的概念，我打开了.class 文件，其中我不明白`A$Enum$2,A$Enum$1` 类代码请解释我的概念这是什么`.string`意思

```
class A
{
    enum Enum
    {
       Q1,Q2,Q3{

       },
       Q4 {

       },
       Q5;
    }
    enum Enum1
    {}
} 
```

A$Enum$1.class 代码

```
class .String extends .String
{

    .String(String s, int i)
    {
        super(s, i, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:50:43.273

总共创建了 6 个类。

```
A$Enum$1 //Inner class created for Q3  
A$Enum$2 //Inner class created for Q4 
A$Enum    //Enum, the enum defined within A
A$Enum1   //Enum1, the enum defined within A
A$1      //Not sure
A        //Class A 
```

这是反编译的代码`A$Enum$1`

```
Compiled from "A.java"
final class A$Enum$1 extends A$Enum{
    A$Enum$1(java.lang.String, int);
} 
```

相同的反汇编代码。

```
 33:  invokespecial   #14; //Method A$Enum$1."<init>":(Ljava/lang/String;I)V  
   36:  putstatic       #15; //Field Q3:LA$Enum;  
   39:  new     #16; //class A$Enum$2 
```

# c# - 从另一个应用程序（outlook 插件）f 在一个应用程序（c# windows 应用程序）中打开表单

> ID：14474081
> 
> 赞同：0
> 
> 时间：2013-01-23T06:58:05.813
> 
> 标签：c#

让我把场景的需求...

1.我们的windows应用程序正在运行，假设它有Form1，Form2这样的表单...... 2.从Outlook-Plugin（自定义插件）中我们想在已经运行的windows应用程序中打开Form1的某些特定操作...... .

正如我们从 System. 诊断我们可以知道系统的活动进程。有了这个，我能够找到运行 Windows 应用程序的进程，但不确定如何在该应用程序中打开新表单....帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:05:31.623

您可以在主窗体中添加一个按钮，该按钮打开`Form1`并使用 WinAPI 模拟单击​​它。

```
[DllImport("user32.dll", EntryPoint="FindWindowExW",  SetLastError=true,
    CharSet=CharSet.Unicode)]

public static extern IntPtr FindWindowEx( IntPtr Ph,IntPtr Ch,
    IntPtr Ph1,
    String lpWindowName);

System.IntPtr hwnd = FindWindowEx(IntPtr.Zero,IntPtr.Zero,IntPtr.Zero,"Form1");
    System.IntPtr ptrChild = GetWindow(this.Handle, GW_CHILD) ;
    while(!ptrChild.Equals(IntPtr.Zero))
    {
        if(ptrChild == FindWindowEx(hwnd,IntPtr.Zero,IntPtr.Zero,"button2"))
        {
            SendMessage(ptrChild, WM_LBUTTONDOWN, 0, IntPtr.Zero); 
            SendMessage(ptrChild, WM_LBUTTONUP, 0, IntPtr.Zero); 
            SendMessage(ptrChild, BM_SETSTATE,1 , IntPtr.Zero);
            break;
        }
        else
        {
            ptrChild = GetWindow(ptrChild, GW_HWNDNEXT) ;
        }
    } 
```

有关`FindWindowEx`方法的信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms633500 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633500(v=vs.85).aspx)

# signalr - 在两个负载平衡 Web 服务器上部署 SignalR

> ID：14474084
> 
> 赞同：2
> 
> 时间：2013-01-23T06:58:19.167
> 
> 标签：signalr, web-farm

我想在我的网络应用程序中支持实时更新功能，我发现 SignalR 很棒。这很容易也很有趣。但是当要部署到生产服务器时，它让我停滞不前。

目前，我们的 Web 应用程序在两个负载平衡的 Web 服务器 (IIS) 上运行。因此，要启动 SignalR，我们必须支持服务总线。

使用 Redis，我看不到任何可用于生产的 Windows 实现。由于某些公司政策，我们无法使用 Windows Azure。使用新的 Windows Server 服务总线，我阅读并看到它只支持具有 1 或 3 个服务器的场。

那么，有什么可供我选择的选项吗？SignalR 的功能给我留下了深刻的印象，并希望在我们的网络应用程序中看到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-16T13:28:12.580

如果您可以切换到 SignalR 2.0，那么您可以下载 NuGet 包**Microsoft.AspNet.SignalR.SqlServer**，它将为您处理负载平衡。有关简单的设置说明，请参阅[SignalR Scaleout with SQL Server](http://www.asp.net/signalr/overview/signalr-20/performance-and-scaling/scaleout-with-sql-server)。

只要您的应用程序连接到 SQL 的帐户具有创建模式和表的权限，您端就没有 SQL 设置，除了提供连接字符串。该包会为您创建负载平衡表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T23:28:58.053

计划在不久的将来实施基于 SQL Server 的传输。

您可能还想尝试基于第三方[RabbitMQ 的传输](https://github.com/mdevilliers/SignalR.RabbitMq)。

[RabbitMQ](http://www.rabbitmq.com/)的性能可能足以满足您的需求并支持集群。

# ios - 如何在ios中为音频添加缓冲百分比

> ID：14474085
> 
> 赞同：0
> 
> 时间：2013-01-23T06:58:19.893
> 
> 标签：ios, mpmovieplayercontroller, buffering

您好我正在通过访问 Web 服务在 ios 中创建无线电应用程序。

`

```
NSURL *mediaURL = [NSURL URLWithString:urlString];

    mp = [[MPMoviePlayerController alloc] initWithContentURL:mediaURL];

    [mp prepareToPlay]; 
```

`

这是我从 Web 服务获取音频的方式。现在我想在播放此音频之前添加缓冲百分比。完成到 100% 后，音频应该播放。我怎样才能做到这一点。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:19:53.657

在后台加载它...使用 performSelectorInBackgroundMethod

# drupal - 在 Drupal 7 中集成现有应用程序

> ID：14474087
> 
> 赞同：0
> 
> 时间：2013-01-23T06:58:45.283
> 
> 标签：drupal

我在drupal中有一个完全开发的应用程序。我需要在我的本地环境中设置它。我已经下载了所有需要的 drupal 配置，包括数据库、wamp 服务器

有没有办法将现有应用程序与 drupal 集成。

此外，我们是否需要 IDE 才能在 Drupal 中运行应用程序。

在哪里托管数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:45:51.197

下载 wamp 服务器并安装在 www 文件夹之后，默认创建在 c 文件夹中。将您的drupal应用程序放在www文件夹和wamp服务器phpmyadmin中，将您的数据库放入其中，以便在导入选项用于导入数据库后创建新数据库。在站点/所有/默认/setting.php在线编号220中设置数据库名称和密码。之后在浏览器 loalhost/您的 drupal 站点名称中。

# python - 通过熊猫的时间序列

> ID：14474093
> 
> 赞同：2
> 
> 时间：2013-01-23T06:59:11.530
> 
> 标签：python, pandas

数据：

```
date,                                             price1

2001/11/01 00:00:01am,                              10

2001/11/02 00:00:02am,                              20

2001/11/03 00:00:03am,                              15

2001/11/04 00:00:04am,                              30 
```

使用 pandas 数据框（df），我们可以通过以下方式获取第一列的值：

```
df.price1 
```

如果我们想度过那些日子，你能做什么？

```
df.date 
```

不管用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:12:14.427

```
In [36]: rng = date_range('1/1/2011', periods=5, freq='H')

In [37]: df = DataFrame({'price':[1,2,3,4,5]},index = rng)

In [38]: df
Out[38]: 
                     price
2011-01-01 00:00:00      1
2011-01-01 01:00:00      2
2011-01-01 02:00:00      3
2011-01-01 03:00:00      4
2011-01-01 04:00:00      5

In [39]: df.index
Out[39]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2011-01-01 00:00:00, ..., 2011-01-01 04:00:00]
Length: 5, Freq: H, Timezone: None

In [40]: df.index.values
Out[40]: 
array([1970-01-15 104:00:00, 1970-01-15 105:00:00, 1970-01-15 106:00:00,
       1970-01-15 107:00:00, 1970-01-15 108:00:00], dtype=datetime64[ns]) 
```

# solr - Solr：使用 debugQuery=true 比较结果文档

> ID：14474099
> 
> 赞同：2
> 
> 时间：2013-01-23T06:59:18.153
> 
> 标签：solr

我正在尝试比较我的查询结果的文档说明。我正在尝试比较粘贴在下面并在搜索结果中以相同顺序出现的两个特定文档（按分数 desc 排序）：

```
**document 1:**

<str name="26a5d1a2-59d8-4bea-950a-0b49d4fe4319">
0.0031454414 = (MATCH) sum of:
  0.00309655 = (MATCH) product of:
    0.04644825 = (MATCH) sum of:
      0.04644825 = (MATCH) sum of:
        0.04644825 = (MATCH) weight(arr1_searchable_cast_members:drew knight^36.36364 in 6613), product of:
          0.008620962 = queryWeight(arr1_searchable_cast_members:drew knight^36.36364), product of:
            36.36364 = boost
            10.775654 = idf(docFreq=1, maxDocs=35200)
            2.2001117E-5 = queryNorm
          5.387827 = (MATCH) fieldWeight(arr1_searchable_cast_members:drew knight in 6613), product of:
            1.0 = tf(termFreq(arr1_searchable_cast_members:drew knight)=1)
            10.775654 = idf(docFreq=1, maxDocs=35200)
            0.5 = fieldNorm(field=arr1_searchable_cast_members, doc=6613)
    0.06666667 = coord(1/15)
  4.889137E-5 = (MATCH) product of:
    4.4002233E-4 = (MATCH) sum of:
      1.6500837E-4 = (MATCH) product of:
        3.3001674E-4 = (MATCH) sum of:
          3.3001674E-4 = (MATCH) ConstantScore(arr_searchable_cast_members:knight arr_searchable_cast_members:knightley arr_searchable_cast_members:knightly), product of:
            1.0 = boost
            3.3001674E-4 = queryNorm
        0.5 = coord(1/2)
      2.7501397E-4 = (MATCH) product of:
        5.5002794E-4 = (MATCH) sum of:
          5.5002794E-4 = (MATCH) ConstantScore(arr_searchable_cast_members:knight arr_searchable_cast_members:knightley arr_searchable_cast_members:knightly), product of:
            1.0 = boost
            5.5002794E-4 = queryNorm
        0.5 = coord(1/2)
    0.11111111 = coord(2/18)
</str>

**document 2 (having less info)**:

<str name="ebf2334c-3f88-4918-8f36-c44532a773e1">
0.0010389417 = (MATCH) product of:
  0.0020778833 = (MATCH) sum of:
    0.0020778833 = (MATCH) product of:
      0.01870095 = (MATCH) sum of:
        0.009900503 = (MATCH) product of:
          0.019801006 = (MATCH) sum of:
            0.019801006 = (MATCH) ConstantScore(vz_searchable_name:knight vz_searchable_name:knights), product of:
              1.0 = boost
              0.019801006 = queryNorm
          0.5 = coord(1/2)
        0.008800447 = (MATCH) product of:
          0.017600894 = (MATCH) sum of:
            0.017600894 = (MATCH) ConstantScore(vz_searchable_name:knight vz_searchable_name:knights), product of:
              1.0 = boost
              0.017600894 = queryNorm
          0.5 = coord(1/2)
      0.11111111 = coord(2/18)
  0.5 = coord(1/2)
</str> 
```

谁能建议我如何比较这两个让我了解他们在搜索结果中的相关顺序？

此外，查询包含一组字段，这些字段具有根据要求指定的适当权重（提升值）。对于上面提到的 document2 对应的产品，使用的特定搜索字段包含特殊字符 (&)。这是两个文档的详细结构不同的原因吗？

请帮忙。

问候

# wpf - 带有数据模板 wpf 的 InitializeComponent()

> ID：14474101
> 
> 赞同：0
> 
> 时间：2013-01-23T06:59:25.353
> 
> 标签：wpf, datatemplate

使用数据模板时 InitializeComponent()（用于在 wpf 中创建控件）如何工作。每次绑定对象更改时都会创建视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:39:58.570

我不认为每次绑定更改时都会重新生成视图。它只是更新与更新有关的集合和视图（控件）。否则会消耗大量资源。

# css - 无法让跨度正确显示为块？

> ID：14474108
> 
> 赞同：0
> 
> 时间：2013-01-23T06:59:52.500
> 
> 标签：css, block, html

我试图让我的跨度在溢出时开始新的一行；这似乎很微不足道，但我似乎无法让它发挥作用。

我知道它默认是内联的，所以我试图将它设置为阻止。我已经尝试过更改 css 显示，以及`clear: both`在任何外部 css 影响它的情况下应用，但我仍然无法让它正确显示。我做了一个小提琴来展示我的问题：http: [//jsfiddle.net/QUpPn/](http://jsfiddle.net/QUpPn/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:01:57.330

这不是**span**的问题。使用**自动换行：break-word；**为了这。像这样写：

```
#test {
    background-color: #ccc;
    width: 100px;
    display: block;
    clear: both;
    word-wrap:break-word;
} 
```

检查这个[http://jsfiddle.net/QUpPn/1/](http://jsfiddle.net/QUpPn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:03:38.143

只需添加`word-wrap:break-word;`到您的`#test`课程中即可。

您还可以使用它`text-align:justify;`来使文​​本更好地查看。

**[jsFiddle 现场演示](http://jsfiddle.net/BlackSRC/QUpPn/2/)**

# ruby - Ruby 安装失败，因为下载位置的路径有空格并且 cd 失败

> ID：14474112
> 
> 赞同：0
> 
> 时间：2013-01-23T07:00:02.860
> 
> 标签：ruby, installation, space

安装 Ruby 时，我收到一个错误，因为它试图 cd 进入一个以 Macintosh 之后的空格开头`/Volumes/Macintosh HD/Users/...`并失败的路径。如何将位置更改为没有空格的位置或以其他方式解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:15:27.803

通常路径周围的引号是帮助，或者是空格前的反斜杠。

“/卷/Macintosh HD/用户/...”

或者

```
/Volumes/Macintosh\ HD/Users/... 
```

# richfaces - rich:tab 应用 CSS ontableave

> ID：14474114
> 
> 赞同：2
> 
> 时间：2013-01-23T07:00:09.847
> 
> 标签：richfaces, jsf-1.2

谁能告诉我如何在离开当前选项卡时更改选项卡标题颜色。

似乎已经有一个可用的属性“ontableave”，但我不确定如何在 ontableave 属性上调用 css。

我正在使用 Richfaces 3.3 和 JSF 1.2

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:26:19.223

在任何 DOM 元素上，您都有该`setAttribute`方法。因此，您所要做的就是使用 获取对 RF 选项卡的引用 `#{rich:component('yourTabId')}`。所以把它们放在一起，你可以拥有

```
 ontableave= "#{rich:component('yourTabId').setAttribute('style','color:red')}" 
```

或者您可以在原始 JavaScript 中完成所有操作（以防 RF 人员像 PF 组件一样禁用其组件上的方法），您将拥有一个函数

```
<script>

    function changeColor() {
        this.style.color = '#cc0000';
     }

</script> 
```

然后调用函数`ontableave`

# alfresco - 如何在 Alfresco 中使用基于 SOAP 的 Web 服务

> ID：14474115
> 
> 赞同：0
> 
> 时间：2013-01-23T07:00:12.660
> 
> 标签：alfresco

我需要在露天使用soap web服务并在dashlet上呈现数据，所以我请求大家分享如果你有任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:21:57.370

一种替代方法是在 Alfresco Share 中编写一个 java 支持的 webscript，让这个 webscript 使用 SOAP webservice，然后将结果输出到您的 dashlet。（我假设您要使用的 SOAP 网络服务不是 Alfresco 提供的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:27:58.603

Another possibility (in addition to a java-backed webscript like @billerby said) is to create a service and add it to Alfresco's service registry. If you expose that service as a root-scoped object, you might use it in javascript-backed webscripts, too. And if you make the service with nicely parametrised methods and all, you could reuse it on different SOAP calls without recompiling for each small change, but just changing the js webscript controller.

# mobiscroll - Mobiscroll 自定义滚轮前导 0 需要单个数字

> ID：14474120
> 
> 赞同：0
> 
> 时间：2013-01-23T07:00:31.947
> 
> 标签：mobiscroll

我正在使用 mobiscroll 2.0 并制作 2 个自定义轮子，一个具有数字 0 到 23，另一个具有数字 0 到 99 我希望从 0 到 9 的单个数字应该在它们前面有一个前导 0。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:44:26.460

试试这个演示：

```
http://jsfiddle.net/S5p6j/1/ 
```

您必须定义自定义轮子。

```
<input ID="mobiscroll" />
$(function(){
    var whl1 = {'0':'0',
                '1':'1', 
                '2':'3',
                '4':'4', 
                '5':'5'              
                };

    var whl2 = {'11':'11',
                '12':'12', 
                '13':'13',
                '14':'14', 
                '15':'15'};

    var wheel = [{},{}];

    wheel[0]['Wheel1'] = whl1;
    wheel[1]['Wheel2'] = whl2;

    $('#mobiscroll').scroller({
        wheels: wheel
    });    
}); 
```

# configuration - 应用程序配置不允许给定 URL

> ID：14474122
> 
> 赞同：62
> 
> 时间：2013-01-23T07:00:39.297
> 
> 标签：configuration, facebook-javascript-sdk, facebook-social-plugins

我在我的html页面中使用了这个......

```
<script>     
window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'xxxxxxxxxxxxxx', // App ID from the App Dashboard
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here
};

// Load the SDK's source Asynchronously
// Note that the debug version is being actively developed and might 
// contain some type checks that are overly strict. 
// Please report such bugs using the bugs tool.
(function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false));

 function shareOnFb(action, msg){
    FB.ui({ 
        method: action, 
        message: msg
    });
 }
</script> 
```

当我每次尝试调用任何 FB 方法时，它都会在我的控制台中显示

> 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

这是我的 fb 应用程序设置.. 我需要在这里更改一些东西吗，我暂时在本地运行我的网站，所以我尝试添加

> localhost/OfferDrive/ 到此页面上的应用程序域，但它说错误，它不是一个有效的域

![FB 应用程序设置](../Images/b62c20ddba836fc00f13df0e1712cdb7.png)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-23T07:06:32.600

您需要**使用 Facebook 登录的值填充网站**的值*`http://localhost/OfferDrive/`*，以允许 Facebook 验证来自 JavaScript SDK 的请求来自正确的位置

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-04-23T01:30:45.957

更新 Anvesh Saxena 的答案（正确但已过时，因为 FB App 界面已更改）：

在您的 FB 应用程序配置中，您需要添加一个带有您网站 URL 集的网站平台。然后您可以将我设置的应用程序域添加到我们网站的基本域（例如，对于类似 的 URL `http://www.mycoolwebsite.com`，只需使用`mycoolwebsite.com`）。

![新的 FB 设置截图](../Images/e36dd36e2d4474edbbe9130e3c30248d.png)

**重要提示：**为了使其正常工作，您需要使用应用 URL 的子域进行本地开发。您可以通过修改开发计算机上的主机文件以使用您网站不存在的子域（例如`local.mycoolwebsite.com`. 如果您不熟悉如何执行此操作，只需为您的平台（例如 mac/windows）谷歌“编辑主机文件”。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-10-20T01:51:20.063

设置 -> 高级，将 url 添加到“有效的 OAuth 重定向 URI”。这对我有用。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-02-25T11:29:42.080

*   转到[Facebook 的开发者仪表板](http://developer.facebook.com)
*   单击`My Apps`并从下拉列表中选择您的应用程序。
    （如果您尚未创建任何应用程序，请选择“添加新应用程序”以创建新应用程序）。
*   转到`App Setting > Basic Tab`然后单击底部的“添加平台”。
*   选择“网站”并添加要登录的网站`Site URL`（例如`mywebsite.com`）
*   如果您在本地进行测试，您甚至可以只提供应用程序的 localhost URL。
    例如。`http://localhost:8080/myfbsampleapp`
*   保存更改，您现在可以从以下位置访问 Facebook 信息`http://localhost:8080/myfbsampleapp`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-22T14:51:11.613

对 munsellj 的更新的更新..

我只需将 localhost:3000 添加到“网站 URL”选项并将“应用程序域”框留空即可在开发中工作。正如 munsellj 提到的，请确保您已添加网站平台。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-26T16:59:38.110

1.  从位于左上角的应用名称的菜单项中，创建一个测试应用。
2.  在新测试应用程序的设置部分：将“ [http://localhost:3000](http://localhost:3000) ”添加到网站 url，并将“localhost”添加到应用程序域。
3.  使用新的 Facebook APP ID 更新您的应用
4.  使用 Facebook sdk v2.2 或您应用中的任何最新版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-14T17:24:24.013

注意，*localhost*是 FB 允许的特殊字符串。如果您没有在 localhost 下配置调试环境，那么据我所知，您必须将其推到该名称下。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-18T07:04:13.877

有时旧的 javascript sdk 会发生此错误。如果您在本地保存 javascript 文件。更新它。我更喜欢一直从 facebook 服务器加载它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-01T01:01:42.637

其他答案中缺少的是如何允许 localhost（或 0.0.0.0 或其他）作为 oauth 回调 url。这是解释。 [如何将 localhost:3000 添加到 Facebook 应用程序进行开发](https://stackoverflow.com/questions/20910576/how-can-i-add-localhost3000-to-facebook-app-for-development)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-23T04:42:01.413

发生这种情况的另一个原因是如果您发送了错误的 appId。如果您有一个开发应用程序和一个生产应用程序，这可能会在早期开发中发生。如果您为 dev 硬编码 appId 并推送到 prod，这将显示出来。

# jquery - 筛选方法不适用于 IIS7、Windows Server 2008 R2 上托管的应用程序

> ID：14474127
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:01:14.610
> 
> 标签：jquery

这是我正在使用的示例代码。这里的目的是从`strs`.

```
var strs = ["val1", "val2", "val3"];
var filteredValues = strs.filter(function(s) { return s; }); 
```

1) 如果应用程序托管在 Windows server 2008 R2、IIS7 上

*   对于 IE 9/10 版本，它会抛出“对象不支持属性或方法‘过滤器’”
*   它适用于 Firefox 和 chrome

2) 如果应用程序托管在 Windows 8、IIS 8 上

*   该代码适用于 IE 9/10、Firefox 和 chrome

为了使此代码正常工作，托管环境如何重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:32:41.053

刚弄明白，希望对大家有帮助

它与客户端在 IE 10 浏览器上使用 IE7 文档模式的文档模式有关。我必须在 web.config 中添加以下内容以确保客户端使用标准文档模式。

```
<httpProtocol allowKeepAlive="true">
   <customHeaders>
      <add name="X-UA-Compatible" value="IE=edge" />
   </customHeaders>
</httpProtocol> 
```

# msxml - Paradox / ObjectPal 和 Microsoft XML Services (MSXML)：调用某些方法时崩溃

> ID：14474130
> 
> 赞同：0
> 
> 时间：2013-01-23T07:01:43.420
> 
> 标签：msxml, paradox

我使用 Microsoft XML Core Services (MSXML) 来解析和创建带有 Paradox 11.0.0.676 的 XML 文档。

当我调用 oleAuto 对象的某些方法时，Paradox 在到达 endMethod 语句时崩溃（代码在按钮的 pushButton 事件中）。这使我得出结论，问题可能是 oleAuto 变量的“释放”。所以我已经把变量声明放到了表单中。如果我调试代码，GPF 不再出现在按钮的 endMethod 中，但在退出程序时仍然会出现。所以我可能是对的，问题在于释放变量。OLE 对象的显式 close() 命令不能解决问题。有人有想法吗？我真的需要 MSXML 工作 :-( 其他 MSXML 方法工作得很好，比如通过 XPath 搜索 XML 文件以查找特定元素等。。

这里是代码和 xml 文件。该代码根据 xml 模式验证 xml 文件的节点。（代码和 xml 文件来自 microsoft msxml 参考，稍作改动并应用于 objectpal）：

**验证节点.xml**

```
<?xml version="1.0"?>
<x:books xmlns:x="urn:books">
   <book id="bk001">
      <author>Hightower, Kim</author>
      <title>The First Book</title>
      <genre>Fiction</genre>
      <price>44.95</price>
      <pub_date>2000-10-01</pub_date>
      <review>An amazing story of nothing.</review>
   </book>

   <book id="bk003">
      <author>Nagata, Suanne</author>
      <title>Becoming Somebody</title>
      <genre>Biography</genre>
      <review>A masterpiece of the fine art of gossiping.</review>
   </book>
</x:books> 
```

**验证节点.xsd**

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="urn:books"
            xmlns:bks="urn:books">

  <xsd:element name="books" type="bks:BooksForm"/>

  <xsd:complexType name="BooksForm">
    <xsd:sequence>
      <xsd:element name="book"
                  type="bks:BookForm"
                  minOccurs="0"
                  maxOccurs="unbounded"/>
      </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="BookForm">
    <xsd:sequence>
      <xsd:element name="author"   type="xsd:string"/>
      <xsd:element name="title"    type="xsd:string"/>
      <xsd:element name="genre"    type="xsd:string"/>
      <xsd:element name="price"    type="xsd:float" />
      <xsd:element name="pub_date" type="xsd:date" />
      <xsd:element name="review"   type="xsd:string"/>
    </xsd:sequence>
    <xsd:attribute name="id"   type="xsd:string"/>
  </xsd:complexType>
</xsd:schema> 
```

**ObjectPal-Code**：Paradox-Form，上面只有一个按钮，这是 pushButton 事件的代码（快速和脏代码:-)）。代码按其应有的方式工作：元素显示在一个消息框中，该消息框告诉您有关该元素无效的原因的详细信息。如果我调试代码，Paradox 在到达 endMethod 语句时会崩溃。操作系统是 Windows 7 64 位，Paradox 是版本 11.0.0.676。

```
method pushButton(var eventInfo Event)
var
 xd, xs, er, nlist, node        oleAuto
 err                            oleAuto
endVar
 if NOT xd.open("Msxml2.DOMDocument.6.0") then
  msgStop("Error", "Error")
  return
 endIf
 if NOT xs.open("Msxml2.XMLSchemaCache.6.0") then
  msgStop("Error", "Error")
  return
 endIf
 xs.add("urn:books", "C:\\LZE\\MSXML\\validateNode.xsd")
 try
  xd^schemas = xs
  xd^async = false
  xd^validateOnParse = false
  xd^load("C:\\LZE\\MSXML\\validateNode.xml")
  err = xd^validate()

  nList = xd^selectNodes("//book")
  node = nList^item(1)
  msgInfo("", node.xml)
  err = xd^validateNode(node)
  msgInfo("", err.reason)

 onFail
  msgStop("!!!", "!!!")
 endTry
 try
  if xd.isAssigned() then
   xd.close()
  endIf
  if xs.isAssigned() then
   xs.close()
  endIf
  if nList.isAssigned() then
   nList.close()
  endIf
  if err.isAssigned() then
   err.close()
  endIf
         onFail
  msgStop("!!!", "!!!")
 endTry 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:48:56.220

我只是想给你一个我遇到的问题的简短摘要以及它的修复/解决方法，因为它可能有助于解决其他 activex 和一般保护故障问题：

当调用 activex 对象的某些方法（我的假设是，指针可能是问题）时，悖论崩溃，通常带有一般保护错误。在大多数情况下，这发生在到达 endmethod-statement 之前。这让我想到了问题可能是变量的“取消引用”。paradox / windows 无法清除它们，或者试图访问内存的某些空间，这被 windows 拒绝。按钮的 pusubutton-event 中的以下代码就是一个很好的例子：

```
method pushButton(var eventInfo Event)
var
    oXD, oXMLElement    oleAuto
endVar

    if NOT oXD.open("Msxml2.DOMDocument.6.0") then
        msgStop("Error", "cant create object")
        return
    endIf

    oXMLElement = oXD.createElement("someElement")
                msgInfo("", oXMLElement.xml)
    oXD.appendChild(oXMLElement)

endMethod 
```

第一次按下按钮时，会显示消息框，显示创建的 xml 元素。如果您现在从运行模式切换到编辑模式，运行表单并再次按下按钮，悖论崩溃：oleauto 变量 oXMLElement 仍在内存中。我花了很多时间寻找解决这个问题的方法，我终于找到了一个解决方法：在方法结束之前，让 oleauto 变量引用另一个对象，进度条，例如：

```
if NOT oXMLElement.open("MSComctlLib.ProgCtrl.2") then
    msgStop("Error", "cant create object")
    return
endIf 
```

至少这对我有用，使用 paradox 11，在 win xp 和 win 7 上测试。欢迎对此发表任何评论。:-)

# postgresql - 在 psql 中自定义寻呼机

> ID：14474138
> 
> 赞同：38
> 
> 时间：2013-01-23T07:02:04.313
> 
> 标签：postgresql, command-line, psql, pager

当我`psql`在交互模式下使用 PostgreSQL 的命令行工具时，它会将数据列为分页输出。

但是，因为我`psql`在可以自己处理长输出的终端应用程序中使用，所以我宁愿获得整个输出而不用烦人的`--more--`行进行分页。

有什么方法可以自定义分页行为`psql`吗？我试图`LESS`在周围的 shell 环境中设置为`cat`，但这无济于事。

有什么建议么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-23T07:43:22.860

来自[精美`psql`手册](http://www.postgresql.org/docs/current/static/app-psql.html)：

> `\pset option [ value ]`
> [...]
> `pager`
> 控制使用寻呼程序进行查询和 psql 帮助输出。如果设置了环境变量 `PAGER`，则输出将通过管道传送到指定的程序。否则，将使用与平台相关的默认值（例如`more`）。
> 
> 当该`pager`选项关闭时，不使用寻呼程序。当 pager 选项打开时，在适当的时候使用 pager

所以你可以从`psql`提示中这样说：

```
psql> \pset pager off 
```

关闭寻呼机。如果您希望它始终适用，您可以添加`\pset pager off`到您的`~/.psqlrc`文件中。

您还可以`\?`从`psql`提示中使用来快速了解您可以使用的特殊命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-27T18:40:32.963

为了完整起见，我们可能会提到一次性或用作您的脚本之一中的设置...（正如“mu”所提到的，请参阅 psql --help （手册））

作为脚本中的命令

> psql --pset=pager-off -c " `<sqlCommand>`" `<databaseName>`

从你的命令行

> psql --pset=pager=off `<databaseName>`

这仅对单个命令有效，因此在脚本中最有用。

您可以使用此方法代替在 psql 实用程序中进行临时更改或通过 init 文件 (~/.psqlrc) 进行永久设置。

# r - 将ggplot2条形图保存为pdf时的空白文件（Windows 7）

> ID：14474139
> 
> 赞同：2
> 
> 时间：2013-01-23T07:02:07.817
> 
> 标签：r, ggplot2

> **可能重复：**
> [在循环中打印和保存 PDF](https://stackoverflow.com/questions/9745675/plotting-and-saving-pdfs-in-a-loop)

新手问题。我的制表符分隔输入数据如下所示：

```
x y
1 50
2 25
3 60
4 25
5 90
6 100 
```

这是我的代码文件“code.R”：

```
data <- read.table("input",header=T,sep="\t")
pdf("output.pdf")
ggplot (data,aes(x=x,y=y) + geom_bar(stat="identity")
dev.off() 
```

我使用以下命令运行代码，但没有收到任何错误消息：

```
source("code.R") 
```

该代码生成“output.pdf”文件，但它是空白的（当我想打开它时出错）。

当我在我的 R 终端中手动输入上述代码的第一行和第二行时，图形在图形设备中看起来是正确的。

当我在文件中写入以下行并运行文件时，什么也没有发生（没有错误，没有图形设备窗口）

```
data <- read.table("input",header=T,sep="\t")
ggplot (data,aes(x=x,y=y)) + geom_bar(stat="identity") 
```

输入文件和代码文件的行尾都是 windows 格式。我也尝试过`data <- as.data.frame(read.table(...))`，但没有任何改变。我真的不明白我的代码有什么问题......

任何建议和解释都会很棒！谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:09:48.310

您的 ggplot 调用缺少右括号。

这一行：

```
ggplot (data,aes(x=x,y=y) + geom_bar(stat="identity") 
```

应该：

```
ggplot (data,aes(x=x,y=y)) + geom_bar(stat="identity") 
```

或者您可以尝试 ggsave() 而不是 pdf() dev.off() ，如下所示：

```
ggplot (data,aes(x=x,y=y)) + geom_bar(stat="identity")
ggsave("output.pdf") 
```

不要混用这两种方法。

# cordova - javascript CCV 库背后的算法

> ID：14474140
> 
> 赞同：3
> 
> 时间：2013-01-23T07:02:10.250
> 
> 标签：cordova, phonegap-plugins

我正在使用 phonegap 和 javascript CCV 人脸检测库开发人脸检测应用程序。我需要知道 CCV 人脸检测库背后的算法名称，以便进一步开发。

# objective-c - Xcode 4.5 - OS X Cocoa 应用程序 - 基本 Web 视图：打开时加载 Google

> ID：14474142
> 
> 赞同：3
> 
> 时间：2013-01-23T07:02:32.277
> 
> 标签：objective-c, xcode, cocoa, xcode4.5

我正在尝试创建一个非常基本的 OS X Cocoa 应用程序，当它打开时会加载[http://www.google.com](http://www.google.com)。尽可能基本（没有后退或前进按钮等）。

我对 Xcode 4.5 几乎没有经验，也找不到任何关于 OS X Cocoa 应用程序和 Xcode 4.5 的 web 视图的教程。我能够找到一个教程并为 iOS 网络视图创建一个网络视图。我把我学到的东西拿走了，但没有走得很远。

这是我到目前为止所做的：

*   在 Xcode 4.5.2 中创建新的 OS X Cocoa 应用程序
*   向 Window 对象添加了 WebView 对象

基于 iOS 网络视图教程，我假设我需要做的就是添加几行代码，它应该可以工作吗？

这是我在 iOS 网页视图 (ViewController.m) 中使用的代码：

```
NSURL *myURL = [NSURL URLWithString:@"http://www.google.com"];

NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];

[myWebView loadRequest:myRequest]; 
```

任何帮助将非常感激。我整晚都被困在这上面。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T08:35:03.820

添加`WebView`到主窗口后，您需要确保已将 添加`WebKit.framework`到项目的链接框架和库中，否则会出现链接错误。

。H：

```
@class WebView;

@interface MDAppDelegate : NSObject <NSApplicationDelegate>

@property (weak) IBOutlet WebView *webView;
@property (assign) IBOutlet NSWindow *window;

@end 
```

假设您在上面的代码中为类似名称创建了一个`IBOutlet`，`WebView`您`webView`可以使用下面的代码加载一个 URL：

米：

```
@implementation MDAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSURLRequest *request = [NSURLRequest requestWithURL:
                 [NSURL URLWithString:@"https://www.google.com/"]];
    [self.webView.mainFrame loadRequest:request];
}

@end 
```

示例 GitHub 项目：[https ://github.com/NSGod/WebViewFiagler](https://github.com/NSGod/WebViewFinagler)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T07:06:02.523

将`self`关键字添加到下一行

```
[myWebView loadRequest:myRequest]; 
```

像这样

```
[self.myWebView loadRequest:myRequest]; 
```

尝试以下代码，它对我有用，刚刚测试过

> > 1) 创建新项目
> > 2) 选择 V​​iewController ，转到 xcode 菜单
> > Editor->Embed in->Navigation controller
> > 3) 在 ViewController.h 中声明 myWebView 属性

在 ViewController.m 中编写以下代码

```
 self.myWebView = [[UIWebView alloc] initWithFrame:self.view.bounds]; 
   self.myWebView.scalesPageToFit = YES;
   [self.view addSubview:self.myWebView];
   NSURL *myURL = [NSURL URLWithString:@"http://www.google.com"];
   NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];
   [self.myWebView loadRequest:myRequest]; 
```

# xml - 如何使用 xslt 根据每条记录中的另一个元素值获取唯一（不同）元素值

> ID：14474144
> 
> 赞同：1
> 
> 时间：2013-01-23T07:02:33.863
> 
> 标签：xml, xslt, xslt-grouping

我需要根据每条记录中的另一个元素值获取一个元素值。

如果 RECORD_TYPE='ERROR' 那么我必须为 ERRORS:ERROR_DESC 下的所有记录打印所有不同（唯一）的 ERROR_DESC 值

每个错误描述都应打印在新行中。

```
<root>
<SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
    </SellOutRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 2:location id is invalid</ERROR_DESC>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>HA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutRecord>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SO:transaction currency is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 2:location id is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SI:transaction document id is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 5:SI:transaction currency is null or invalid</ERROR_DESC>
        <RECORD_NO>5</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <InventoryRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:product id is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
        <PRODUCT_NUMBER>331184-B21</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0S1</PRODUCT_OPTION>
        <PRODUCT_LINE>R8</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </InventoryRecord>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellOutRecord>
    <SellOutRecord>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>7</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellOutRecord>
    <SellInRecord>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>7</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellInRecord>
</root> 
```

预期输出为：

```
<root>
<ERROR>record 1:location id is invalid</ERROR>
<ERROR>record 2:location id is invalid</ERROR>
<ERROR>record 3:SO:transaction currency is invalid</ERROR>
<ERROR>record 3:SI:transaction document id is invalid</ERROR>
<ERROR>record 5:SI:transaction currency is null or invalid</ERROR>
<ERROR>record 6:product id is invalid</ERROR>
<ERROR>record 6:SO:invoiced net amount is invalid</ERROR>
</root> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:25:21.703

我相信这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <!-- A key for the ERROR_DESC of all items that have an error -->
  <xsl:key name="error" match="root/*[RECORD_TYPE = 'ERROR']/ERROR_DESC" use="."/>

  <xsl:template match="root">
    <root>
      <!-- Use Muenchian grouping to apply templates to distinct ERROR_DESCs -->
      <xsl:apply-templates
        select="*/ERROR_DESC[generate-id(.) = generate-id(key('error', .)[1])]" />
    </root>
  </xsl:template>

  <!-- A template to handle ERROR_DESCs -->
  <xsl:template match="ERROR_DESC">
    <ERROR>
      <xsl:value-of select="."/>
    </ERROR>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:39:52.313

**I. 一个纯粹的“推式”XSLT 1.0 解决方案：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kErrDescByVal" match="*[RECORD_TYPE='ERROR']/ERROR_DESC"
          use="normalize-space()"/>

 <xsl:template match="/*">
     <root>
       <xsl:apply-templates select="node()|@*"/>
     </root>
 </xsl:template>

 <xsl:template match="*/*/*" priority="-1"/>

 <xsl:template match=
 "ERROR_DESC[generate-id() = generate-id(key('kErrDescByVal',normalize-space())[1])]">
  <ERROR><xsl:apply-templates/></ERROR>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
    </SellOutRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>LA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 2:location id is invalid</ERROR_DESC>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>HA</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutRecord>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SO:transaction currency is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 2:location id is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 3:SI:transaction document id is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <SalesInRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 5:SI:transaction currency is null or invalid</ERROR_DESC>
        <RECORD_NO>5</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SalesInRecord>
    <InventoryRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:product id is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
        <PRODUCT_NUMBER>331184-B21</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0S1</PRODUCT_OPTION>
        <PRODUCT_LINE>R8</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </InventoryRecord>
    <SellOutRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>record 6:SO:invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutRecord>
    <SellOutRecord>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>7</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellOutRecord>
    <SellInRecord>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>7</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
        <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
        <PRODUCT_LINE>J3</PRODUCT_LINE>
        <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
    </SellInRecord>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <ERROR>record 1:location id is invalid</ERROR>
   <ERROR>record 2:location id is invalid</ERROR>
   <ERROR>record 3:SO:transaction currency is invalid</ERROR>
   <ERROR>record 3:SI:transaction document id is invalid</ERROR>
   <ERROR>record 5:SI:transaction currency is null or invalid</ERROR>
   <ERROR>record 6:product id is invalid</ERROR>
   <ERROR>record 6:SO:invoiced net amount is invalid</ERROR>
</root> 
```

**说明**：

1.  使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

2.  用于**[`normalize-space()`](http://www.w3.org/TR/xpath/#function-normalize-space)**将两个仅在空白处不同的字符串视为相等。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kErrDescByVal" match="*[RECORD_TYPE='ERROR']/ERROR_DESC"
          use="normalize-space()"/>

 <xsl:template match="/*">
     <root>
       <xsl:for-each-group select="*[RECORD_TYPE='ERROR']/ERROR_DESC"
                           group-by="normalize-space()">
       <ERROR><xsl:apply-templates/></ERROR>
     </xsl:for-each-group>
     </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<root>
   <ERROR>record 1:location id is invalid</ERROR>
   <ERROR>record 2:location id is invalid</ERROR>
   <ERROR>record 3:SO:transaction currency is invalid</ERROR>
   <ERROR>record 3:SI:transaction document id is invalid</ERROR>
   <ERROR>record 5:SI:transaction currency is null or invalid</ERROR>
   <ERROR>record 6:product id is invalid</ERROR>
   <ERROR>record 6:SO:invoiced net amount is invalid</ERROR>
</root> 
```

**说明**：

**[`<xsl:for-each-group>`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)**使用带有`group-by`属性的 XSLT 2.0 指令。

# android - 第二个按钮的url需要两次点击才能返回？

> ID：14474145
> 
> 赞同：1
> 
> 时间：2013-01-23T07:02:49.220
> 
> 标签：android, android-layout, android-intent

我的应用程序有两个按钮，每个按钮打开不同的网页。每个按钮都引用一个 onClick 事件和仅在 URL 中不同的 Intent。主要和 webview 活动如下。但是，第二个按钮需要单击两次才能返回主视图。我怎样才能解决这个问题？

```
public class MainActivity extends Activity {

private Button button;
private Button button1;

public void onCreate(Bundle savedInstanceState) {
    final Context context = this;

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button = (Button) findViewById(R.id.buttonUrl);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, WebViewActivity.class);
            intent.putExtra("google.com", "http://www.google.com");
            startActivity(intent);
        }
    });

    button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, WebViewActivity.class);             
            intent.putExtra("yahoo.com", "http://www.yahoo.com");
            startActivity(intent);
        }
    });
    }

} 
```

**WebviewActivity**

```
public class WebViewActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);

    Bundle extras = getIntent().getExtras();
    if (extras != null){
        String googleUrl = extras.getString("google.com");
        String yahooUrl = extras.getString("yahoo.com");
    if (googleUrl != null)
        webView.loadUrl("http://www.google.com");
    else if (yahooUrl != null)
        webView.loadUrl("http://www.yahoo.com");
    }
    }
}

main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
    android:id="@+id/buttonUrl"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Go to http://www.google.com" />
    <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Go to http://www.yahoo.com" />

</LinearLayout>

webview.xml

<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:08:45.107

第二个 url 可能会重定向到[http://google.com](http://google.com) -> [http://google.com/en/](http://google.com/en/)之类的地方。然而，这将需要两次快速点击。因为在第一次点击后，它会再次重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:10:29.210

你可以发布你的xml吗？为什么有两个 OnClickListener ？您的班级可以实现一个 OnClickListener 并根据您可以区分的资源 ID。您也可以启动一个线程来启动活动而不是阻塞。

# java - 从列表中删除值

> ID：14474154
> 
> 赞同：0
> 
> 时间：2013-01-23T07:03:31.650
> 
> 标签：java

我有一个查询我有这样的地图

```
 Map ppvValidatedinfo = new HashMap<String, List<String>>(); 
```

它包含这样的值

```
 1  22 23 24 25 
```

所以 1 是键（患者 id），值（scriptinfo）是 22,23,24,25

现在我从后端获取这个值，如下所示

```
String ScriptInfo = ((IItemPluRx)item).getScriptInfo(); 
```

> 现在假设脚本信息的值为 24

我想知道在列表中的值部分的地图中是否包含 24，如果包含，那么我想将其从列表中删除，请告知如何实现它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:05:42.417

```
ppvValidatedinfo.get("1").remove("24"); 
```

它假设 ppvValidatedinfo 是通用的

```
 Map<String, List<String>> ppvValidatedinfo = new HashMap<String, List<String>>(); 
```

否则

```
((List)ppvValidatedinfo.get("1")).remove("24"); 
```

请注意，如果键不在地图中，它可能会抛出 NullPointerException，可以将其更正为

```
List<String> list = ppvValidatedinfo.get(key);
if (list != null){
   list.remove(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:08:03.123

您需要遍历 HashMap，取出 List 对象，然后遍历它，如果找到搜索值，则删除具有相应键的 HashMap 条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:10:58.307

你可以简单地做到这一点。从 [删除](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove%28java.lang.Object%29)

> 从此列表中删除第一次出现的指定元素（如果存在）。如果列表不包含该元素，则它不变。更正式地说，删除具有最低索引 i 的元素，使得 (o==null ? get(i)==null : o.equals(get(i))) （如果存在这样的元素）。如果此列表包含指定元素（或等效地，如果此列表因调用而更改），则返回 true。

```
List<String> value =  ppvValidatedinfo.get("1");
if(value != null){
   boolean deleted = value.remove("24");
} 
```

# api - LinkedIn REST API：资源“搜索人员”的限制达到 100k 中的 409

> ID：14474157
> 
> 赞同：4
> 
> 时间：2013-01-23T07:03:37.137
> 
> 标签：api, rest, limit, linkedin, throttling

我有一个程序可以按姓名搜索 LinkedIn 成员，用于学术研究。

我有一个 LinkedIn 开发人员帐户，该帐户应该每天对相关的“搜索人员”资源进行 10 万次调用，但只有 400 次以上（请参阅下面的统计数据），API 调用会引发异常，说“调用此资源的限制限制到达了”。

在我的限制如此之高的情况下，这怎么可能？

--

来自他们网站的 LinkedIn 统计数据：

从 2013 年 1 月 23 日午夜 UTC 开始到现在的 API 使用报告

资源：搜索人员

用法：呼叫计数：409 允许：100000

状态：正常（绿色勾号）

限制成员：1（搜索人员的限制成员列表：Idb_YiFpOs）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:23:11.013

总申请上限是100K，没错。但也有用户限制和开发人员限制，开发人员的限制是每 24 小时 400 次调用，这就是你被限制的原因。

[https://developer.linkedin.com/documents/throttle-limits](https://developer.linkedin.com/documents/throttle-limits)，查看“人物搜索”部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-07T06:41:04.803

已经有一段时间了，但统计数据表明人们仍在关注这个，我正在试验 LinkedIn API，可以提供更多细节。

典型的节流阀表示为最大值（例如 100K）和每个用户令牌数（例如 500）。这些数字加在一起意味着您每天最多可以调用 100,000 次 API，但即使作为开发人员，单个用户令牌也意味着每天最多 500 次。因此，这意味着您需要 200 个用户才能达到全部配额。

我遇到了这个问题，在设置应用程序的开头并获得一些用户之后，我可以确认允许的*总*通话次数更多。[删除了关于 LinkedIn API 中可能是意外后门的讨论。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-04T20:01:23.430

分享到linkedin

***油门限制***

**油门类型每日通话限制 (UTC)**

申请上限 = 25,000

每个用户 = 25

每个开发者 = 100

# dynamic-programming - 硬币变化的变化

> ID：14474162
> 
> 赞同：0
> 
> 时间：2013-01-23T07:03:50.823
> 
> 标签：dynamic-programming, coin-change

所以典型的硬币找零问题要求你弄清楚你是否可以使用无限的面额硬币 x1、x2、...、xn 来换取价值 v，但我想知道你如何才能弄清楚每个硬币最多使用一次同样的问题？

对于最初的问题，我知道您可以遍历值的前缀并查看是否可以为 v-x_i 进行更改，但是当它被限制为每个面额最多一个硬币时，我不知所措。

有什么建议可以让我开始吗？我可能在想你也可以迭代面额的前缀。虽然不确定...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:46:41.960

对于硬币找零问题，您可以使用前向或后向递归。在你的声明中，你使用了向后。这里我给出一个forward方法，它可以轻松解决UNLIMITED版本和AT-MOST-ONCE版本

假设 f 是一维布尔数组。f[i] 表示你是否可以对值 i 进行更改。最初，f[0]=true，其他等于 false。

无限版本：

```
for (int i=1;i<=n;i++)
    for (int j=0;j<v;j++)
        if (f[j])
            f[j+x[i]]=true; 
```

最多一次版本：

```
for (int i=1;i<=n;i++)
    for (int j=v-1;j>=0;j--)
        if (f[j])
            f[j+x[i]]=true; 
```

唯一的区别是循环 j 的顺序。

一个帮助你理解的例子：

假设只有一种硬币的价格为 2。即 x[1]=2。v=10

在第一个算法之后，你可以得到 f[0]=f[2]=f[4]=f[6]=f[8]=f[10]=true。

但是对于第二种算法，你只能得到 f[0]=f[2]=true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-03T21:35:47.630

这个问题可以使用动态规划来解决。

我个人觉得画一张表来帮助推导算法很有用。下面是面额为 5、10、2、1 和总价值 V 的硬币的棕褐色示例表。

[![帮助表](../Images/ab26493364630740201435307fd3fd34.png)](https://i.stack.imgur.com/cZCBM.jpg)

首先，如果 v = 0，我们为所有 i 初始化表为 True（对于零值，更改总是正确的）

`For i: 0-> n D(v,0) = true`

然后我们逐行（从左到右）逐列（从上到下）遍历表

`For v: 1-> V For i: 0-> n`

可以观察到，我们能够在两种情况下给出值 v 和硬币 xi 的变化：

*   我们能够为价值 v - xi 和前一个硬币 x(i-1) 提供零钱

`D(v,i) = true if D(v-xi, i-1) = true`

这种情况的示例包括硬币 xi=5（第二列）和 v=5 或硬币 xi=1（最后一列）和 v=6

*   我们能够为以前的硬币和相同的价值提供零钱。（如果值为 5 并且我们已经有一个硬币 5，那么我们之后有多少硬币并不重要 - 我们已经给了一个完整的零钱。）

`D(v,i) = true if D(v, i-1) = true`

这种情况的例子是第 5 行。

在上述情况均不适用的情况下，我们不能给予全额更改并且`D(v,i)`是错误的。最终的解决方案是与总值V和索引n对应的表格元素。

总结一下：

```
 For i: 0-> n D(v,0) = true

  For v: 1-> V
    For i: 0-> n

    D(v,i)= D(v, i-1) V D(v-xi, i-1 )
    else D(v,i) = false;

  return D(V, n) 
```

链接到 repl 中的完全编码解决方案：[https ://repl.it/@majakudlicka/CoinChangeVariation](https://repl.it/@majakudlicka/CoinChangeVariation)

# html - 带有 mp4 的 Jplayer 视频不适用于 Opera / FF / IE 中的 Flash 回退

> ID：14474163
> 
> 赞同：1
> 
> 时间：2013-01-23T07:03:53.400
> 
> 标签：html, flash, video, jplayer

我的网站上的视频有这个问题，你可以在这个链接中看到：http: [//video.resursecrestine.ro/predici/103445/nastere-din-nou-credinta-dragoste-in-aceasta-ordine](http://video.resursecrestine.ro/predici/103445/nastere-din-nou-credinta-dragoste-in-aceasta-ordine)

它在 Chrome 中运行良好，但在任何其他浏览器中都没有。我知道 Chrome 对 mp4 具有原生 HTML5 支持，但其他浏览器应该回退到 flash 而他们没有。

下面是我正在使用的代码：

```
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function(){

        $("#jquery_jplayer_1").jPlayer({
            ready: function () {
                $(this).jPlayer("setMedia", {
                    m4v: "http://www.resursecrestine.ro/download/41293"
                });
            },
            swfPath: "js",
            supplied: "m4v",
            size: {
                width: "580px",
                height: "360px",
                cssClass: "jp-video-360p"
            }
        });
    });
    //]]>
</script>
<div id="jp_container_1" class="jp-video jp-video-360p">
    <div class="jp-type-single">
        <div id="jquery_jplayer_1" class="jp-jplayer"></div>
        <div class="jp-gui">
            <div class="jp-video-play">
                <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
            </div>
            <div class="jp-interface">
                <div class="jp-progress">
                    <div class="jp-seek-bar">
                        <div class="jp-play-bar"></div>
                    </div>
                </div>
                <div class="jp-current-time"></div>
                <div class="jp-duration"></div>
                <div class="jp-controls-holder">
                    <ul class="jp-controls">
                        <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                        <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                        <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                        <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                        <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                        <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                    </ul>
                    <div class="jp-volume-bar">
                        <div class="jp-volume-bar-value"></div>
                    </div>
                    <ul class="jp-toggles">
                        <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
                        <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
                        <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                        <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="jp-no-solution">
            <span>Update Required</span>
            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
        </div>
    </div>
</div> 
```

你能请教吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:52:52.347

看起来您的服务器正在发送具有`text/plain`MIME 类型的视频，而不是`video/mp4`. 根据[jPlayer 开发人员指南](http://www.jplayer.org/latest/developer-guide/#jPlayer-server-response)，这是仅影响 Firefox 和 Opera 的问题的常见原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:15:17.350

我在使用 flash 解决方案时遇到了类似的问题。确保您的元数据位于视频的开头。为此，您可以使用此免费工具：

[http://rndware.info/products/metadata-mover.html](http://rndware.info/products/metadata-mover.html)

# xml - 通过 XSLT 将 XML 转换为另一个 XML

> ID：14474164
> 
> 赞同：4
> 
> 时间：2013-01-23T07:03:54.477
> 
> 标签：xml, xslt

我有一个如下的 XML 文件，我想将它转换成另一个 XML 文件。

```
<body>
  <outline text="A">
    <outline text="Abelson, Harold" author="Harold Abelson" title="Struktur und Interpretation von Computerprogrammen. Eine Informatik-Einführung" publisher="Springer Verlag" isbn="3540520430" year="1991"/>
    <outline text="Abrahams, Paul W." author="Paul W. Abrahams" title="Tex for the Impatient" publisher="Addison-Wesley Pub Co" isbn="0201513757" year="2000"/>
  </outline>
  <outline text="B">
    <outline text="Bach, Fred" author="Fred Bach" title="UNIX Handbuch zur Programmentwicklung" publisher="Hanser Fachbuchverlag" isbn="3446151036"/>
    <outline text="Bach, Maurice J." author="Maurice J. Bach" title="Design of the UNIX Operating System" publisher="Prentice Hall PTR" isbn="0132017997" year="1986"/>
  </outline>
</body> 
```

这是我要转换为的 XML 格式

```
<list>
    <books text="A">
        <book>
            <text>Abelson, Harold</text>
            <author>Harold Abelson</author>
            <title>Struktur und Interpretation von Computerprogrammen. Eine
                Informatik-Einführung</title>
            <publisher>Springer Verlag</publisher>
            <isbn>3540520430</isbn>
            <year>1991</year>
        </book>
        <book>
            <text>Abrahams, Paul W.</text>
            <author>Paul W. Abrahams</author>
            <title>Tex for the Impatient</title>
            <publisher>Addison-Wesley Pub Co</publisher>
            <isbn>0201513757</isbn>
            <year>2000</year>
        </book>

    </books>
    <books text="B">
        <book>
            <text>Bach, Fred</text>
            <author>Fred Bach</author>
            <title>UNIX Handbuch zur Programmentwicklung</title>
            <publisher>Hanser Fachbuchverlag</publisher>
            <isbn>3446151036</isbn>
            <year />
        </book> 
```

这是我的代码

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" method="xml"/>
    <xsl:template match="body">
        <list> <xsl:apply-templates select="outline"/> </list>
    </xsl:template>

    <xsl:template match="outline">
    <books text= "{@text}">
        <book><xsl:apply-templates select="outline"/> 
        <text><xsl:value-of select="@text" /></text>
        <author><xsl:value-of select="@author" /></author>
        <title><xsl:value-of select="@title" /></title>
        <publisher><xsl:value-of select="@publisher" /></publisher>
        <isbn><xsl:value-of select="@isbn" /></isbn>
        <year><xsl:value-of select="@year" /></year>
        </book>
    </books>
    </xsl:template>

</xsl:stylesheet> 
```

这是我的代码的输出。

```
<list>
    <books text="A">
        <book>
            <books text="Abelson, Harold">
                <book>
                    <text>Abelson, Harold</text>
                    <author>Harold Abelson</author>
                    <title>Struktur und Interpretation von Computerprogrammen. Eine
                        Informatik-Einführung</title>
                    <publisher>Springer Verlag</publisher>
                    <isbn>3540520430</isbn>
                    <year>1991</year>
                </book>
            </books> 
```

我的输出中有两个额外的元素

```
<books text="Abelson, Harold">
                <book> 
```

据我所知，这可能是由这行代码引起的。我尝试了几种不同的方法，但没有奏效

```
<xsl:template match="outline">
        <books text= "{@text}"> 
```

附加问题：如果原始 XML 文件包含标题。如何消除头部和标题。我当前的代码在新的 XML 文件中生成“tmp”。

```
<opml version="1.0">
  <head>
    <title>tmp</title>
    <expansionState></expansionState>
  </head>
  <body>
      <outline text="A">
      <outline text="Abelson, Harold" author="H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:10:53.107

您在正确的轨道上，但您需要两个`outline`模板 - 一个用于 top level `outline`，一个用于 child `outlines`。

请`outline`用以下三个替换您的模板：

```
 <xsl:template match="head" />

  <xsl:template match="outline">
    <books text="{@text}">
      <xsl:apply-templates select="outline" />
    </books>
  </xsl:template>

  <xsl:template match="outline/outline">
    <book>
      <text>
        <xsl:value-of select="@text" />
      </text>
      <author>
        <xsl:value-of select="@author" />
      </author>
      <title>
        <xsl:value-of select="@title" />
      </title>
      <publisher>
        <xsl:value-of select="@publisher" />
      </publisher>
      <isbn>
        <xsl:value-of select="@isbn" />
      </isbn>
      <year>
        <xsl:value-of select="@year" />
      </year>
    </book>
  </xsl:template> 
```

如果可以安全地假设源文档的属性名称将匹配输出文档中元素的名称，您可以将第二个模板替换为以下两个更短、更精简的模板：

```
 <xsl:template match="outline/outline">
    <book>
      <xsl:apply-templates select="@text" />
      <xsl:apply-templates select="@author" />
      <xsl:apply-templates select="@title" />
      <xsl:apply-templates select="@publisher" />
      <xsl:apply-templates select="@isbn" />
      <xsl:apply-templates select="@year" />
    </book>
  </xsl:template>

  <xsl:template match="outline/outline/@*">
    <xsl:element name="{name()}">
       <xsl:value-of select="." />
    </xsl:element>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T08:55:34.617

这是一个稍微更加面向推送的解决方案，它不太依赖于手动将元素从源 XML 拉到结果 XML 中。特别要注意最后一个模板。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <list>
      <xsl:apply-templates />
    </list>
  </xsl:template>

  <xsl:template match="outline[outline]">
    <books text="{@text}">
      <xsl:apply-templates />
    </books>
  </xsl:template>

  <xsl:template match="outline[not(*)]">
    <book>
      <xsl:apply-templates select="@*" />
    </book>
  </xsl:template>

  <xsl:template match="outline[not(*)]/@*">
    <xsl:element name="{name()}">
      <xsl:value-of select="." />
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的源 XML：**

```
<body>
  <outline text="A">
    <outline text="Abelson, Harold" author="Harold Abelson" title="Struktur und Interpretation von Computerprogrammen. Eine Informatik-Einführung" publisher="Springer Verlag" isbn="3540520430" year="1991"/>
    <outline text="Abrahams, Paul W." author="Paul W. Abrahams" title="Tex for the Impatient" publisher="Addison-Wesley Pub Co" isbn="0201513757" year="2000"/>
  </outline>
  <outline text="B">
    <outline text="Bach, Fred" author="Fred Bach" title="UNIX Handbuch zur Programmentwicklung" publisher="Hanser Fachbuchverlag" isbn="3446151036"/>
    <outline text="Bach, Maurice J." author="Maurice J. Bach" title="Design of the UNIX Operating System" publisher="Prentice Hall PTR" isbn="0132017997" year="1986"/>
  </outline>
</body> 
```

**...产生了想要的结果：**

```
<list>
  <books text="A">
    <book>
      <text>Abelson, Harold</text>
      <author>Harold Abelson</author>
      <title>Struktur und Interpretation von Computerprogrammen.
        Eine Informatik-Einführung</title>
      <publisher>Springer Verlag</publisher>
      <isbn>3540520430</isbn>
      <year>1991</year>
    </book>
    <book>
      <text>Abrahams, Paul W.</text>
      <author>Paul W. Abrahams</author>
      <title>Tex for the Impatient</title>
      <publisher>Addison-Wesley Pub Co</publisher>
      <isbn>0201513757</isbn>
      <year>2000</year>
    </book>
  </books>
  <books text="B">
    <book>
      <text>Bach, Fred</text>
      <author>Fred Bach</author>
      <title>UNIX Handbuch zur Programmentwicklung</title>
      <publisher>Hanser Fachbuchverlag</publisher>
      <isbn>3446151036</isbn>
    </book>
    <book>
      <text>Bach, Maurice J.</text>
      <author>Maurice J. Bach</author>
      <title>Design of the UNIX Operating System</title>
      <publisher>Prentice Hall PTR</publisher>
      <isbn>0132017997</isbn>
      <year>1986</year>
    </book>
  </books>
</list> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T12:58:11.740

**一个更短、更完整的解决方案：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*"><list><xsl:apply-templates/></list></xsl:template>

 <xsl:template match="outline">
    <books text="{@text}">
      <xsl:apply-templates/>
    </books>
  </xsl:template>

  <xsl:template match="outline/outline">
    <book><xsl:apply-templates select="@*"/></book>
  </xsl:template>

  <xsl:template match="outline/outline/@*">
      <xsl:element name="{name()}">
        <xsl:value-of select="." />
      </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<body>
  <outline text="A">
    <outline text="Abelson, Harold" author="Harold Abelson" title="Struktur und Interpretation von Computerprogrammen. Eine Informatik-Einführung" publisher="Springer Verlag" isbn="3540520430" year="1991"/>
    <outline text="Abrahams, Paul W." author="Paul W. Abrahams" title="Tex for the Impatient" publisher="Addison-Wesley Pub Co" isbn="0201513757" year="2000"/>
  </outline>
  <outline text="B">
    <outline text="Bach, Fred" author="Fred Bach" title="UNIX Handbuch zur Programmentwicklung" publisher="Hanser Fachbuchverlag" isbn="3446151036"/>
    <outline text="Bach, Maurice J." author="Maurice J. Bach" title="Design of the UNIX Operating System" publisher="Prentice Hall PTR" isbn="0132017997" year="1986"/>
  </outline>
</body> 
```

**产生了想要的正确结果：**

```
<list>
 <books text="A">
   <book>
      <text>Abelson, Harold</text>
      <author>Harold Abelson</author>
      <title>Struktur und Interpretation von Computerprogrammen. Eine Informatik-Einführung</title>
      <publisher>Springer Verlag</publisher>
      <isbn>3540520430</isbn>
      <year>1991</year>
   </book>
   <book>
      <text>Abrahams, Paul W.</text>
      <author>Paul W. Abrahams</author>
      <title>Tex for the Impatient</title>
      <publisher>Addison-Wesley Pub Co</publisher>
      <isbn>0201513757</isbn>
      <year>2000</year>
   </book>
 </books>
 <books text="B">
   <book>
      <text>Bach, Fred</text>
      <author>Fred Bach</author>
      <title>UNIX Handbuch zur Programmentwicklung</title>
      <publisher>Hanser Fachbuchverlag</publisher>
      <isbn>3446151036</isbn>
   </book>
   <book>
      <text>Bach, Maurice J.</text>
      <author>Maurice J. Bach</author>
      <title>Design of the UNIX Operating System</title>
      <publisher>Prentice Hall PTR</publisher>
      <isbn>0132017997</isbn>
      <year>1986</year>
   </book>
 </books>
<list> 
```

**说明**：

1.  正确使用模板和匹配模式。

2.  正确使用**[`<xsl:element>`](http://www.w3.org/TR/xslt#section-Creating-Elements-with-xsl%3aelement)**

* * *

**二、如果需要生成元素的特定顺序（因为无法保证源属性的顺序），请使用以下轻微修改**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*"><list><xsl:apply-templates/></list></xsl:template>

 <xsl:template match="outline">
    <books text="{@text}">
      <xsl:apply-templates/>
    </books>
  </xsl:template>

  <xsl:template match="outline/outline">
    <book>
      <xsl:apply-templates select="@*">
        <xsl:sort data-type="number" select=
          string-length(substring-before('text|author|title|publisher|isbn|year',name()))"/>
      </xsl:apply-templates></book>
  </xsl:template>

  <xsl:template match="outline/outline/@*">
      <xsl:element name="{name()}">
        <xsl:value-of select="." />
      </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

# c# - 以编程方式绑定 GridViewComboBoxColumn 数据源

> ID：14474166
> 
> 赞同：2
> 
> 时间：2013-01-23T07:04:17.567
> 
> 标签：c#, winforms, telerik, radgridview, gridviewcolumn

在我使用公司控制权的`WinForms`应用程序中。 `C#``RadGridView``Telerik`

此 RadGridView 的列之一是类型`GridViewComboBoxColumn`。我想`DataSource`在运行时填充此列，然后设置 ComboBox ( `DataSource`, `DisplayMember`, `ValueMember`) 的三个重要属性。

*我怎样才能以编程方式做到这一点？*

我试过了

```
DataGridViewComboBoxColumn comboIBAN = 
    rgvCheques.Columns["clmnIBAN"] as DataGridViewComboBoxColumn; 
```

但最终出现以下错误

![错误信息](../Images/ae6ab6afece5b8aceabb44f43ab0bae6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T04:14:58.013

感谢大家的努力和回答，所有的答案都是关于在网格中添加一列，我正在寻找的是指向（检索）当前列并更改其属性，例如`DataSource`最重要的一个。

我最终想出的解决方案写在下面，也许它有助于其他人寻找这样的答案：

```
((GridViewComboBoxColumn)rgvCheques.Columns["IBAN"]).DataSource = 
    lstBankAccounts.Items; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:10:11.547

GridViewComboBoxColumn 在下拉列表中显示一组预定义的候选文本值。此列类型通常用于提供对一组相对静态值的查找。

要使用 GridViewComboBoxColumn[**选中这个**](http://www.telerik.com/help/winforms/gridview-columns-gridviewcomboboxcolumn.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:11:11.993

看一下这个

```
GridViewComboBoxColumn CustomColumn= new GridViewComboBoxColumn();
CustomColumn.Name = "CustomColumn";
CustomColumn.HeaderText = "MyHeader";
CustomColumn.DataSource = this.MyBindingSource;
CustomColumn.ValueMember = "CustomID";
CustomColumn.DisplayMember = "CustomName";
CustomColumn.FieldName = "CustomID";
CustomColumn.Width = 200;
this.radGridView1.Columns.Add(CustomColumn); 
```

希望这可以帮助

# python - 在 python 三元条件的任一侧使用语句

> ID：14474168
> 
> 赞同：11
> 
> 时间：2013-01-23T07:04:26.520
> 
> 标签：python, syntax, ternary

为什么禁止在 python 三元条件的任一侧使用语句？我看不出以下一些幼稚的语法示例可能模棱两可或损坏的任何明显原因 - 但我确信必须有充分的理由来禁止它！

```
>>> x, y = 0, 0
>>> (x += 1) if random.choice([0, 1]) else (y += 1)
        ^
SyntaxError: invalid syntax

>>> (x if random.choice([0, 1]) else y) += 1
SyntaxError: can't assign to conditional expression

>>> print 'hello world' if random.choice([0, 1]) else raise StandardError()
  File "<stdin>", line 1
    print 'hello world' if random.choice([0, 1]) else raise StandardError()
                                                          ^
SyntaxError: invalid syntax 
```

你能举一个例子，允许在三元组中使用语句可能是危险的或定义不明确的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T07:13:59.863

表达式被`eval`引用，语句被`exec`引用。这是完全不同的东西。

Python 开发人员已决定严格区分表达式和语句。这将使您“提前失败”，而不是最终出现难以调试的错误。

在其他语言中，例如 C(++)，您可以执行以下操作

```
if (i=15) {...} 
```

但你也可以

```
if (i==15) {...} 
```

在第一个示例中，您将 15 分配给变量，然后由 评估`i`这个新值。`i``if`

更糟糕的是递增/递减运算符。和有什么区别

```
if (i--) {...} 
```

和

```
if (--i) {...} 
```

?

对于第一个示例，计算 的值`i`，然后递增。对于第二个例子，顺序是相反的，所以如果`i`是`1`之前，结果是不同的。

在 Python 中，由于在其他语言中收集到此类概念的经验，语法禁止此类事情。

我不太确定这是否完全回答了您的问题，但我希望我至少可以对 pythonic 方法有所了解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T07:43:58.033

^(这与条件表达式1)无关。Python 程序由语句组成。大多数语句的大部分部分都是表达式。表达式只包含其他表达式。

`y += 1`是一个语句，并且不允许在需要表达式的地方使用。三元条件作为一个整体是一个表达式，它的三个部分中的每一个都是表达式。没有理由允许`(x += 1) if random.choice([0, 1]) else (y += 1)`以下任何怪物：

```
x = (y += 1)
def foo(x=(x += 1)):
    print x
print [x += 1, x *= 10] 
```

表达式是可以评估为某个值的事物；陈述是没有价值的东西。如果您允许语句作为条件表达式的“当为真”或“当为假”操作数，那么为什么不允许任何表达式中的任何语句呢？毕竟，它会使语法复杂化到特殊情况，因此条件表达式是唯一可以包含语句的表达式。

```
x = y + pass
[return True, import sys] 
```

这些都没有任何意义。也不是`(x += 1) if random.choice([0, 1]) else (y += 1)`，因为条件表达式的全部意义在于成为**表达式**。所以它会更真实地出现在声明中，例如：

```
z = (x += 1) if random.choice([0, 1]) else (y += 1) 
```

您可以想象规则的“值”`x += 1`是`x`（在添加 1 之前或之后）的值，就像 C 一样。但这使语言变得更加复杂。这仍然不能解决以下问题：

```
z = pass if (import sys) else (while False: print 17) 
```

的价值是`pass`多少？的`import sys`？一个while循环？

为了完成这项工作，您必须将“语句”作为存在于 Python 语法中的一类事物分离为“表达式语句”和“普通语句”，或者发明一些关于某些类型语句的值的任意规则是。大概两者兼而有之。

一个简单的事实是，如果您尝试将其编写为单个语句：

```
(x += 1) if random.choice([0, 1]) else (y += 1) 
```

然后 Python 已经有了表达这个想法的语法，它是这样的：

```
if random.choice([0, 1]):
    x += 1
else:
    y += 1 
```

无需为将语句作为表达式组件的语言（和可读性）引入复杂性，这样您就可以`if`通过将语句编写为条件表达式（其值被忽略）来混淆语句。

* * *

¹如果必须，可以将其称为“三元条件”，但“三元”或“三元运算符”简直是愚蠢的。它有 3 个操作数并不是最重要的。这就像调用`+`“二元运算符”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:51:28.660

### 第一种语法

您的第一个语法实际上是一个传统的`if` [语句](http://docs.python.org/2/tutorial/controlflow.html#if-statements)，您尝试将其写在一行中，条件和第一个操作相反。以这种方式使用单行结构是矫枉过正的，而且丑陋且不可读。Python 不是 C。

### 第二种语法

您的第二种语法不起作用，因为 Python 的条件表达式结果是 an `rvalue`， not [`lvalue`](http://msdn.microsoft.com/en-us/library/bkbs2cds.aspx)（链接谈到 C 和 Microsoft，但它只是一个通用术语，出现在每种语言中）。`rvalue`是一个表达式，它可能只出现在赋值的右边。`lvalue`但是，可能出现在右侧或左侧。当`lvalue`位于右侧时，它的*值*仅用于评估左侧的任何内容。当`lvalue`位于左侧时，其*地址*用于存储右侧表达式求值后的值。

在 Python 中，一切都是引用，并且`lvalue`允许更改引用*指向的*内容，但`rvalue`不允许更改。

例子：

```
a = 5 # here a is lvalue
b = a + 1 # here a is rvalue and b is lvalue 
```

-only 表达式的另一个示例`rvalue`是常量。从口译员的角度来看，您的第二次尝试看起来就像

```
42 = 42 + 1 # WHAT THE HECK!? 
```

### 为什么

至于*为什么*决定让条件表达式没有语句（哎呀，看起来我们已经找到原因了！）：正如[PEP 308](http://www.python.org/dev/peps/pep-0308/)所述，最初引入条件表达式是为了使用而不是容易出错的`x and y or z`布尔表达式，后者由于[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)评估，工作相同。

如果 Python 要在条件中允许像你这样的[语句](http://docs.python.org/2/reference/simple_stmts.html#simple-statements)，那么它必须允许，例如，`raise`. 在单行中填充大量逻辑被认为是一种糟糕的 Python 代码风格（正如我上面所说的）。

看这个

```
result = some_long_name / some_other_name if some_other_name != 0 else raise ZeroDivisionError 
```

一开始它看起来像一个表达式，但它的行为就像一个语句，甚至引发异常！:( 记住 Python 建议在 79 个字符处删除行，你甚至不会看到`raise`多窗口并排视图。

* * *

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-23T07:10:26.847

你用的是什么版本的python？至少在 python 2.4 中不支持此语法。以下在 python 3.3 上对我有用。在旁注中，删除括号：

```
import random
x,y=0,0
x += 1 if random.choice([0,1]) else (y +1) 
```

# android - 在android中解析后URL不起作用

> ID：14474172
> 
> 赞同：0
> 
> 时间：2013-01-23T07:04:31.653
> 
> 标签：android, parsing

下面是我解析链接标签的网址

[http://www.mobileapp.pcmac.org/mobile/xml/sisapp.asp?sid=353&pn=news2](http://www.mobileapp.pcmac.org/mobile/xml/sisapp.asp?sid=353&pn=news2)

在这个网址中，数据是

```
 <item>

      **<link>http://www.mcpss.com?PN=&apos;News2&apos;&amp;SubP=&apos;DNewsStory&apos;&amp;gn=&amp;NewsID=17662&amp;ShowNav=&amp;StoryGroup=Current</link>**
    </item> 
```

我正在从上面的数据中解析链接标签。但是当我尝试将该值放在下面的代码中时，它会抛出以下异常： **HTTP error fetching URL**

```
try {
           String website=list.get(0);
           Document doc = Jsoup.connect(website).get();
           Elements el=doc.getElementsByClass("header");
           Elements atr= doc.select("p span");
           String ss="";
           for(Element s:atr)
               ss+=s.text();
                String text=el.text();
                t1.setText(text);
                t2.setText(ss);
     } catch (Exception e) {
log.d("Error",e.getMessage());

              } 
```

如果我对该链接值进行硬编码，则它工作正常。我需要一些帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:09:49.567

尝试将字符实体转换为其标准形式。

```
&apos; becomes `'`
&amp;  becomes `&` 
```

见[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)

# sql - Firebird 不按列显示重复的行

> ID：14474173
> 
> 赞同：1
> 
> 时间：2013-01-23T07:04:37.560
> 
> 标签：sql, select, firebird

我有一个包含以下数据的表：

```
- DATEURM     IDV    UNID
- 2013-02-02  15259  W0L0TGF0572 
- 2013-02-02  15259  W0L0TGF0572
- 2013-02-02  15674  ZFA18503158 
- 2013-02-02  16157  ZFA18503158
- 2013-02-02  16157  ZFA18503158
- ... 
```

我使用此查询从中选择数据：

```
SELECT * FROM TBL order_date WHERE DATEURM BETWEEN DATE 'today'+10 AND DATE 'today'+40 order by DATEURM asc ROWS 50 
```

我想要的是不要得到 UNID 列的重复行，结果类似于：

```
- DATEURM  IDV UNID
- 2013-02-02  15259  W0L0TGF0572 
- 2013-02-02  16157  ZFA18503158
- ... 
```

我玩了 DISTINCT 和 GROUP BY，但几个小时后没有得到任何好的结果:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:40:44.013

从您的评论中，您说现在您想要每个 unid 一行，并且您不介意获得哪些其他值，所以试试这个：

```
SELECT unid, min(dateurm) dateurm, min(idv) idv 
  FROM order_date
 WHERE DATEURM BETWEEN current_date + 10 AND current_date + 40
 group by unid
 order by 2 
```

在我得到的相同数据上：

```
UNID        DATEURM             IDV
=========== ========== ============ 
W0L0TGF0572 2013-02-02        15259
ZFA18503158 2013-02-02        15674

SQL> 
```

# sql - Oracle SQL：查找唯一组合并按字母顺序排列

> ID：14474179
> 
> 赞同：1
> 
> 时间：2013-01-23T07:05:13.727
> 
> 标签：sql, oracle

我有如下数据：（列 Name1 和 Name2）作为另一个查询的结果。

名称 1 名称 2

AB

文学学士

然而，任何这样的配对实际上都应该被认为只是一个，并且应该只报告为 AB （ A 在 B 之前，按字母顺序排序）

我如何在 Oracle / PlSQL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:18:39.220

你可以这样做：

```
SELECT DISTINCT Name1, Name2
FROM (
      SELECT Name1, Name2 FROM t WHERE Name1 <= Name2
      UNION ALL
      SELECT Name2, Name1 FROM t WHERE Name1 > Name2
     ); 
```

哪个应该有效并且非常简单，但不如以下有效：

```
SELECT DISTINCT
       CASE WHEN Name1 <= Name2 THEN Name1 ELSE Name2 END AS Name1
      ,CASE WHEN Name1 <= Name2 THEN Name2 ELSE Name1 END AS Name2
FROM t; 
```

要不就：

```
SELECT DISTINCT
       LEAST(Name1, Name2) AS Name1
      ,GREATEST(Name1, Name2) AS Name2
FROM t; 
```

我没有在这些查询中考虑 NULL。如果列可以为空，则必须修改 <= 比较以将这些考虑在内。

# zend-framework - Zend Lucene 搜索 - 非法字符问题

> ID：14474180
> 
> 赞同：0
> 
> 时间：2013-01-23T07:05:21.997
> 
> 标签：zend-framework, lucene, special-characters

如何修复此错误？

```
A PHP Error was encountered
Severity: Notice
Message: iconv() [function.iconv]: Detected an illegal character in input string
Filename: Common/Utf8.php
Line Number: 77

A PHP Error was encountered
Severity: Notice
Message: iconv() [function.iconv]: Detected an illegal character in input string
Filename: Lucene/Field.php
Line Number: 222 
```

这些是我输入的字符。

```
ŸeÈ╬fý↔5ƒ1 
```

我尝试保存到 lucene 字段中。

附言

使用此代码处理输入

```
htmlentities($input, ENT_COMPAT, 'UTF-8'); 
```

我正在使用 PHP 5.2.17 和 Zend Framework 1.12.0

# jquery - JQuery datepicker不将值输出到gridview

> ID：14474182
> 
> 赞同：0
> 
> 时间：2013-01-23T07:05:47.277
> 
> 标签：jquery, asp.net, .net, datepicker

我有一个 JQuery Datepicker 正确绑定（我觉得如此）到 gridview。它工作正常，并在网格的所有文本框和每一行上完美显示。

问题是它只将值输出到第一行。

因此，当我单击网格的第 10 行时，会在第 10 行弹出一个 DatePicker，但是当我选择一个日期时，该日期仅填充在网格的第一行中。

无论我选择哪一行，它总是只将值输出到第一行。

任何帮助将不胜感激。

我试图通过文本框 ID 和类名来附加 DatePicker，但没有成功。

谢谢阿舒托什

```
 $("#txtGivenDate").datepicker({ dateFormat: "dd/mm/yy", max: '0', changeYear: true,         changeMonth: true }); 
```

网格标记如下：

```
 <asp:TemplateField HeaderText="Given Date" ControlStyle-Width="90%" HeaderStyle-Width="9%">
                <ItemTemplate>
                    <asp:TextBox ID="txtGivenDate" runat="server" Text='<%#Bind("GivenDate")%>' BorderStyle="None"
                        CssClass="youpi"></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField> 
```

尝试了所有可能的解决方案

1.  使用类名而不是 ID
2.  使用 ID 识别文本框的名称
3.  在文本框声明中使用 ClientIDMode=Static
4.  将 JS 从后面的代码附加到 gridview 的 RowCreated 事件上。

似乎没有一个工作。

谢谢阿舒托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:10:49.273

我建议您将`$('#'+yourControl.ClientID).datepicker(...);`初始化程序附加到 GridView`RowDataBound`事件中的 StringBuilder，然后在网格事件中将所有行都绑定数据后将 StringBuilder 注册为启动脚本`DataBound`。

**编辑：**您也可以尝试使用类名。例如：`$('.youpi').datepicker();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:34:08.393

我想我找到了答案。

问题出在 ClientIDMode 上。

我们需要将文本框的 ClientIDMode 设置为“AutoID”。

设置这个效果很好，问题得到了解决。

谢谢大家。

# html - Firefox 将背景图片显示为黑色

> ID：14474184
> 
> 赞同：1
> 
> 时间：2013-01-23T07:05:57.500
> 
> 标签：html, css

我为整个页面制作了背景图片。其他浏览器没问题，但在 Firefox 中，背景图像没有显示，而是整个背景都是黑色的。这是我的CSS：

```
html { 
    background: url(../images/bglogin.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../images/bglogin.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src=../'images/bglogin.jpg', sizingMethod='scale')";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:18:09.463

用这个

```
html { 
     background-image:url('images/bglogin.jpg');
     background-repeat:no-repeat;
     background-attachment:fixed;
     background-position:center; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../images/bglogin.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src=../'images/bglogin.jpg', sizingMethod='scale')";
} 
```

# python - 将序列号分配给列表中的字典

> ID：14474186
> 
> 赞同：1
> 
> 时间：2013-01-23T07:06:01.760
> 
> 标签：python, django

我写了一个这样的 django 查询。

```
stud_record = Student.objects.filter() 
```

因此 stud_record 是一个查询集。

现在我想做的是，我想计算 stud_record 的总数，然后除以 5。

例如：我有 20 条记录`stud_record`。除以 5 后，我得到 4 个。所以现在我想将前四名学生排名为 1，然后将 5-8 名学生作为排名 2....16-20 名学生作为排名 5。这个排名将插入到相同的`stud_record`位置并将发送到模板页。

我们该怎么做。

目前我得到这样的结构

```
[{'name': u'mark', 'roll': 71}, 
 {'name': u'robin', 'roll': 42}, 
 {'name': u'julien', 'roll': 39}] 
```

划分并插入排名后，它应该看起来像

```
[[{'name': u'mark', 'roll': 71, 'rank': 1}, 
  {'name': u'robin', 'roll': 42, 'rank': 1},] 
 [{'name': u'julien', 'roll': 39, 'rank': 2}]] 
```

现在我在我的 stud_record 中得到 185 个结果。除以 185/5 后，我得到 37。现在我想给排名 1 到 1-37 的学生，然后排名 2 到 38-75 的学生......像这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:14:59.697

尝试使用 Len(stud_record)。这将为您提供该查询集的学生人数。然后使用除法和模数来获得您想要的学生范围。抱歉，我目前使用的笔记本电脑没有安装 Python 程序，我无法为您提供明确的解决方案。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:18:43.680

你在你想要什么的问题上自相矛盾。您想要的示例代码有一个学生列表，每个学生都有一个等级。但是您*说*您想为子列表中的所有学生分配相同的排名。那是两种不同的东西。

要为列表中的每条记录提供订单号，请执行以下操作：

```
for rank, student in enumerate(student_list):
    student['rank'] = rank 
```

要为子列表中的所有记录赋予相同的排名，您可以这样做：

```
for rank, student_list in enumerate(all_students):
    for student in student_list:
        student['rank'] = rank 
```

但是，当您将主列表拆分为子列表时，这最后一件事肯定更容易，甚至完全微不足道，而不是之后。

对您创建的每个子列表执行此操作。

也不要将其插入 stud_record，而是将结果添加到上下文中。在基于类的视图中，您可以这样做：

```
def get_context_data(self, **kwargs):
    # Call the base implementation first to get a context
    context = super(KlassDetailView, self).get_context_data(**kwargs)
    # Add data to the context:
    stud_record = Student.objects.filter()
    context['stud_ranks'] = calculate_ranks(stud_record)
    return context 
```

现在您在模板中有可用的“stud_ranks”变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:58:49.120

我会这样

```
iter=0
for item in sorted(stud_record, key=lambda x:x['roll']):
    item['rank'] = math.floor(iter / 5) + 1)
    iter+=1 
```

您按“滚动”对项目进行排序，并分配一个“排名”字段，以观察五个箱中的重新分区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:07:22.490

首先将等级添加到您的 dicts 中，然后使用以下命令对它们进行分组`itertools.groupby`：

```
from itertools import groupby

lst = [{} for _ in range(21)]  # simple testlist

def rank_it(lst,n):
    for index,d in enumerate(lst):
        rank = index/(len(lst)/n)+1
        d['rank'] = rank if rank < n else n

rank_it(lst,5)  #  add ranks
[list(g) for _,g in groupby(lst, lambda x: x['rank'])]  #group by rank 
```

*出去：*

```
[[{'rank': 1}, {'rank': 1}, {'rank': 1}, {'rank': 1}],
 [{'rank': 2}, {'rank': 2}, {'rank': 2}, {'rank': 2}],
 [{'rank': 3}, {'rank': 3}, {'rank': 3}, {'rank': 3}],
 [{'rank': 4}, {'rank': 4}, {'rank': 4}, {'rank': 4}],
 [{'rank': 5}, {'rank': 5}, {'rank': 5}, {'rank': 5}, {'rank': 5}]] 
```

*注意！此解决方案需要对列表进行排序，如果不是，请添加 `lst.sort(key=lambda x: x['roll'],reverse=True`：）*

# java - Java如何在外部类的实例中访问另一个类的实例的属性？

> ID：14474188
> 
> 赞同：0
> 
> 时间：2013-01-23T07:06:13.837
> 
> 标签：java, class, instance

我可能会使用不正确的术语，请提前道歉。我需要从位于外部类实例中的另一个类的实例访问属性。将有两个 Outer 类实例，我需要分别为每个实例存储和处理属性“desiredProperty”。注意：所有班级都不一样。Inner1 和 Inner2 不是同一个类！这是一个简单的例子。

文件 1：

```
public class Outer{

public Inner1 inner1 = new Inner1();
public Inner2 inner2 = new Inner2();

} 
```

文件 2：

```
public class Inner1 {

int desiredProperty=1;

} 
```

文件 3：

```
public class Inner2{

public int getDesiredProperty(){

//How can I here access the property DesiredProperty from Inner1?

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:10:26.260

Inner2 类需要有 Inner1 的实例属性

```
public class Inner2{

private Inner1 inner1;

public Inner2(Inner1 inner1){
   this.inner1 = inner1;
}

public int getDesiredProperty(){
    return inner1.getDesiredProperty();    
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:12:47.477

首先在 Inner1 类中创建一个 setter getter 函数，这样您就可以获取/设置 Inner1 上的值

```
public class Inner1 {

int desiredProperty=1;
public int getDesiredProperty()
{
    return this.desiredProperty;
}

public void setDesiredProperty(int val)
{
    this.desiredProperty = val;
}

} 
```

在 Inner2 类中

```
public class Inner2{

public int getDesiredProperty(){

//How can I here access the property DesiredProperty from Inner1?
Inner1 inner1 = new Inner1();
return inner1.getDesiredProperty(); //value from Inner1
}

} 
```

# c# - 分组后创建分组的gridview并绑定Observable集合数据但没有INotifyProperty更改影响网格？

> ID：14474193
> 
> 赞同：0
> 
> 时间：2013-01-23T07:06:46.687
> 
> 标签：c#, .net, gridview, windows-8, inotifypropertychanged

我正在尝试在 Windows 8 应用程序中创建一个分组的 gridview 我有一个名为 book 的类，我在我的 ViewModel 类中为该页面创建了它的 ObservableCollection。但是当我尝试在我的 XAML 代码绑定文件上对数据进行分组和绑定时，我需要对数据进行分组，然后绑定不会发生 INotifyProperty 的影响。请建议我如何在我的大众汽车中实现这一目标？

下面的代码：

XAML 背后的代码：

```
 protected override void LoadState(Object navigationParameter,
                                               Dictionary<String, Object> pageState)
        {
            MainViewModel booksList = new MainViewModel();
            var teamGroups = booksList.BooksDetail.GroupBy(team => team.BookCategory)
                                           .OrderBy(team => team.Key.ToString());

            this.groupedItemsViewSource.Source = teamGroups;
        } 
```

查看模型类：

```
 #region BooksDetail Collection
        /// <summary>
        /// The <see cref="BooksDetail" /> BooksDetail
        /// </summary>
        public const string BooksDetailPropertyName = "BooksDetail";

        private ObservableCollection<Book> _booksDetailProperty = new ObservableCollection<Book>();

        /// <summary>
        /// Gets the BooksDetail property.
        /// TODO Update documentation:
        /// Changes to that property's value raise the PropertyChanged event. 
        /// This property's value is broadcasted by the Messenger's default instance when it changes.
        /// </summary>
        public ObservableCollection<Book> BooksDetail
        {
            get
            {
                return _booksDetailProperty;
            }

            set
            {
                if (_booksDetailProperty == value)
                {
                    return;
                }

                _booksDetailProperty = value;

                // Update bindings, no broadcast
                RaisePropertyChanged(BooksDetailPropertyName);
            }
        }
        #endregion

  public void GetBooksDetail()
        {

                try
                {
                    // Check if the code is in Design Mode or Running Mode
                    if (ViewModelBase.IsInDesignModeStatic)
                    {
                        // Created the object of main model class
                        DesignMainModel mainModel = new DesignMainModel();

                        // Call method to get list of books detail
                        this.BooksDetail = mainModel.GetBooksDetailData();
                    }
                    else
                    {
                        // Check for internet connectivity 
                        if (Utility.IsInternetAvailable())
                        {
                            //TODO: Write the logic to to implement in Running Mode
                            // Created the object of main model class
                            DesignMainModel mainModel = new DesignMainModel();

                            // Call method to get list of books detail
                            this.BooksDetail = mainModel.GetBooksDetailData();

                            // Group by data on Book Category
                            this.GroupByBookDetailsOnCategory();
                        }
                        else
                        {
                            // Display Error Message for No internet Connection available
                            util.ShowUserMessage(App.GeneralMessageResource.GetString("InternetConnectionErrorMessage"), App.GeneralMessageResource.GetString("InternetConnectionErrorCategory"));
                        }
                    }

                }
                catch (Exception ex)
                {
                    // Display the error
                    util.ShowUserMessage(ex.Message, App.GeneralMessageResource.GetString("GeneralErrorTitle"));
                }
            }
        } 
```

书籍类：

```
 #region BookCategory Property
        /// <summary>
        /// The <see cref="BookCategory" /> property's name.
        /// </summary>
        public const string BookCategoryPropertyName = "BookCategory";

        /// <summary>
        /// The _book category property
        /// </summary>
        private string _bookCategoryProperty = string.Empty;

        /// <summary>
        /// Gets the BookCategory property.
        /// TODO Update documentation:
        /// Changes to that property's value raise the PropertyChanged event. 
        /// This property's value is broadcasted by the Messenger's default instance when it changes.
        /// </summary>
        public string BookCategory
        {
            get
            {
                return _bookCategoryProperty;
            }

            set
            {
                if (_bookCategoryProperty == value)
                {
                    return;
                }

                _bookCategoryProperty = value;

                // Update bindings, no broadcast
                RaisePropertyChanged(BookCategoryPropertyName);
            }
        }
        #endregion 
```

根据输入进行更改：我创建了一个 ObservableCollection 的元组。但是现在当我将它绑定到 CollectionViewSource 时，不会填充任何列表。请参考下面的代码：让我知道我在哪里犯了错误：

XAML：

```
<GridView Grid.Row="1" Margin="5,0,0,0" Grid.Column="1"
         x:Name="itemGridView"
         SelectionMode="Multiple"
         ItemTemplate="{StaticResource CategoryLists}"
         ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
           ItemContainerStyle="{StaticResource CategoryListsStyle}">
    <GridView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid>
                                <StackPanel Orientation="Horizontal" Margin="15,0,0,0">
                                    <TextBlock Text="{Binding Key}" Margin="0,-5,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" FontFamily="Segoe UI Regular" Foreground="#00bfff" FontSize="27"/>
                                    <!--<TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>-->
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid Orientation="Vertical" Margin="10,-1,35,0"/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </GridView.GroupStyle>

</Grid> 
```

属性：#region BooksDetailGrouped Collection /// /// 属性的名称。/// public const string BooksDetailGroupedPropertyName = "BooksDetailGrouped";

```
 /// <summary>
        /// The _books detail grouped property
        /// </summary>
        private ObservableCollection<Tuple<string, ObservableCollection<Book>>> _booksDetailGroupedProperty = new ObservableCollection<Tuple<string, ObservableCollection<Book>>>();

        /// <summary>
        /// Gets the BooksDetailGrouped property.
        /// TODO Update documentation:
        /// Changes to that property's value raise the PropertyChanged event. 
        /// This property's value is broadcasted by the Messenger's default instance when it changes.
        /// </summary>
        public ObservableCollection<Tuple<string, ObservableCollection<Book>>> BooksDetailGrouped
        {
            get
            {
                return _booksDetailGroupedProperty;
            }

            set
            {
                if (_booksDetailGroupedProperty == value)
                {
                    return;
                }

                _booksDetailGroupedProperty = value;

                // Update bindings, no broadcast
                RaisePropertyChanged(BooksDetailGroupedPropertyName);
            }
        }
        #endregion 
```

分组方法：

```
// Grouping the data
            var booksGroup = this.BooksDetail.GroupBy(books => books.BookCategory)
                                            .OrderBy(books => books.Key.ToString());

            // Convert grouped data to ObservableCollection<Tuple<string, ObservableCollection<Book>>>
            this.BooksDetailGrouped = new ObservableCollection<Tuple<string, ObservableCollection<Book>>>(
            booksGroup.Select(x => Tuple.Create(x.Key,
                                            new ObservableCollection<Book>(x)))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:32:29.330

您根本没有绑定到网格的可观察集合。

在这一行

```
var teamGroups = booksList.BooksDetail.GroupBy(team => team.BookCategory)
                                       .OrderBy(team => team.Key.ToString()); 
```

您创建一个 linq 语句来包装您的可观察集合并公开`IOrderedEnumerable`您绑定到视图的集合。而且这个接口显然不会转发来自您的集合和属性的更改事件。

要解决这个问题，您需要保留已经排序和分组的`BooksDetails`（或视图模型中的任何其他属性）并将其直接绑定到 xaml 中。`ObservableCollection`以这种方式设置源：

```
this.groupedItemsViewSource.Source = booksList.BooksDetail; 
```

`BooksDetail`属性更改时，将不允许网格自行重新创建。

* * *

```
var observableCollection = new ObservableCollection<Tuple<Key, ObservableCollection<Book>>>(
          teamGroups.Select(x=>Tuple.Create(x.Key, 
                                            new ObservableCollection<Book>(x)))); 
```

如果您想创建第二个属性，请注意在添加、删除或更改类别时必须同步它们。

# javascript - JS中子域之间的“跨域资源共享策略”？

> ID：14474194
> 
> 赞同：0
> 
> 时间：2013-01-23T07:06:49.013
> 
> 标签：javascript, cross-domain, tumblr, policy, getimagedata

我有一个包含`canvas`脚本的 Tumblr 主题。
跨域资源共享策略不允许`context.getImageData()`工作。脚本位于**user.tumblr.com**，
图像位于**static.tumblr.com**。

有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:42:16.147

[document.domain](https://developer.mozilla.org/en-US/docs/DOM/document.domain)将成为您的朋友。

我没有仔细研究过画布安全模型，但如果它遵循 Javascript 的其余部分，设置

```
document.domain = tumblr.com 
```

可能有帮助。

（谷歌搜索 document.domain 画布可能会导致更多。）

# java - 在android中顺序合并2个音频文件？

> ID：14474195
> 
> 赞同：4
> 
> 时间：2013-01-23T07:06:51.603
> 
> 标签：java, android

如何在android平台中将两个音频文件合并为一个文件。也就是说，如果我有两个音频文件，即 A 和 B。请给我代码来创建一个新的音频文件 C，该文件由 B 在 A 之后附加。是否需要将音频文件转换为字节/短数组？？ ..

我确实喜欢这个，但它只播放第一个文件。

```
 File firstFile=new File("/mnt/sdcard/Android/data/Dictation/Audio/Dict136.3gp");

            File secondFile=new File("/mnt/sdcard/Android/data/Dictation/Audio/Dict139.3gp");

            System.out.println("1 file:::::"+firstFile+"\n 2nd file::"+secondFile);

           FileInputStream fistream1;
        try {
            fistream1 = new FileInputStream(firstFile);
            FileInputStream fistream2 = new FileInputStream(secondFile);//second source file

            SequenceInputStream sistream = new SequenceInputStream(fistream1, fistream2);
            FileOutputStream fostream = new FileOutputStream("/mnt/sdcard/Android/data/Dictation/Audio/merged.3gp");//destinationfile

            int temp;

            while( ( temp = sistream.read() ) != -1)
            {
                System.out.print( (char) temp ); // to print at DOS prompt
                fostream.write(temp);   // to write to file
            }

            filePath="/mnt/sdcard/Android/data/Dictation/Audio/merged.3gp";
            playAudio(filePath);

            fostream.close();
            fistream1.close();
            fistream2.close(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-05T21:40:18.697

要组合 3gp 或 mp4 容器中的音频文件，您应该能够使用[https://github.com/sannies/mp4parser](https://github.com/sannies/mp4parser) 查看示例： [https ://github.com/sannies/mp4parser/blob/master/示例/src/main/java/com/googlecode/mp4parser/AppendExample.java](https://github.com/sannies/mp4parser/blob/master/examples/src/main/java/com/googlecode/mp4parser/AppendExample.java)

获取 mp4parser jar（通过 maventral）并执行以下操作：

```
 File firstFile=new File("/mnt/sdcard/Android/data/Dictation/Audio/Dict136.3gp");
        File secondFile=new File("/mnt/sdcard/Android/data/Dictation/Audio/Dict139.3gp");

        Movie movieA = MovieCreator.build(firstFile);
        Movie movieB = MovieCreator.build(secondFile);
        final Movie finalMovie = new Movie();

        List<Track> audioTracks = new ArrayList<>();
        for (Movie movie : new Movie[] { movieA, movieB}) {
            for (Track track : movie.getTracks()) {
                if (track.getHandler().equals("soun")) {
                    audioTracks.add(track);
                }
            }
        }
        finalMovie.addTrack(new AppendTrack(audioTracks.toArray(new Track[audioTracks.size()])));

        final Container container = new DefaultMp4Builder().build(finalMovie);
        File mergedFile = new File("/mnt/sdcard/Android/data/Dictation/Audio/merged.3gp");
        final FileOutputStream fos = new FileOutputStream(mergedFile);
        FileChannel fc = new RandomAccessFile(mergedFile, "rw").getChannel();
        container.writeContainer(fc);
        fc.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:22:23.983

您可以尝试使用`File Input/output Stream` 它。要读取字节数组中的任何文件，请使用

```
byte[] buffer = new byte[FILE_SIZE_HERE];
FileInputStream fs = new FileInputStream(file);
int bytesRead = 0;
bytesRead = fs.read(buffer, 0, FILE_SIZE_HERE); 
```

这里`buffer`包含你文件的字节数组。这样就可以得到两个文件的字节数组。现在在第二步中，当您获取 bot 文件的字节数组时，您需要将两个字节数组复制到一个数组中，然后您可以使用它将此（第三个新数组）写入一个新文件

```
FileOutputStream fout = new FileOutputStream(tempFile, true);
fout.write(data);
fout.close(); 
```

`data`合并两个数组后新的第三个数组在哪里

**编辑：** [看看这个如何组合两个数组](https://stackoverflow.com/questions/5683486/how-to-combine-two-byte-arrays)

希望这会帮助你。

# php - php 中的会话 register_globals 警告

> ID：14474198
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:07:04.703
> 
> 标签：php

> **可能重复：**
> [使用全局变量作为数据源的 PHP 会话副作用警告](https://stackoverflow.com/questions/175091/php-session-side-effect-warning-with-global-variables-as-a-source-of-data)

我通过 PHP 从 Ajax 获得响应。我收到此错误：

> **PHP 警告：** 未知：您的脚本可能依赖于在 PHP 4.2.3 之前存在的会话副作用。请注意，除非启用了 register_globals，否则会话扩展不会将全局变量视为数据源。您可以通过分别在第 0 行的未知中将 session.bug_compat_42 或 session.bug_compat_warn 设置为 off 来禁用此功能和此警告

我该如何解决？

我的 PHP 脚本是

```
<?php

    include("include/config.inc.php");

    $name = $_POST['loginname'];
    $phone = $_POST['logintelephone'];

    // To protect MySQL injection
    $name = stripslashes($name);
    $phone = stripslashes($phone);
    $name = mysql_real_escape_string($name);
    $phone = mysql_real_escape_string($phone);

    $query  = mysql_query("select * from chatapp_users where name = '$name' and phone_no  = '$phone'");
    // Mysql_num_row is counting table row
    $count=mysql_num_rows($query);
    // If result matched $myusername and $mypassword, table row must be 1 row
    if($count > 0){
        $result = mysql_fetch_array($query);
        session_start();
        $_SESSION['currentuser'] = $name;
        $_SESSION['currentuserid'] = $result['user_id'];
        $_SESSION['phone'] = $result['phone'];
        echo 1;
    }else {
        echo 2;
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:00:43.480

还有两个解决方案：

*   将您的代码放入函数中。

    函数中的变量不在`global`全局命名空间中（除非您使用语句），因此不会显示此错误。

*   不要使用与（使用的）会话索引同名的变量。在这种情况下，重命名`$phone`或`$_SESSION['phone']`

[在这个答案](https://stackoverflow.com/a/2262847/1244588)中还有关于这个警告的其他（令人不安的）细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:03:44.113

您可以在 php.ini 中设置“session.bug_compat_warn = off”。这应该关闭该警告。

另一种解决方案是将 PHP 更新到高于 4.2.3 的版本。

# java - 对字母进行排序

> ID：14474202
> 
> 赞同：0
> 
> 时间：2013-01-23T07:07:21.870
> 
> 标签：java

我用 Java 设计了一个程序，用于从给定的字符串中检索小写字母。现在我想要按排序顺序。如何按排序顺序获得输出？

这是我的代码：

```
public class Smallalpha{

   public static void main(String []args){

      String s= "Hi aM hErE";
      int len =s.length();
      System.out.println("The lenth is "+len);
      for(int i=0;i<=len-1;i++){
        if(Character.isLowerCase(s.charAt(i)))
        {

                char alpha = s.charAt(i);
            System.out.print(alpha+" ");                
        }
      }

   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:20:57.293

在我现在删除的第一个答案中误解了你的问题。这是你可以写的，让程序做你想做的事：

```
String s = "Hi aM hErE";
char[] chars = s.toCharArray(); // get the characters
Arrays.sort(chars);             // sort them
for (char c : chars) {          // print them, if they are lowercase
    if (Character.isLowerCase(c)) {
        System.out.print(c + " ");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:09:22.597

您可以为此使用[Arrays.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28char%5B%5D%29)静态方法。打电话

```
String wors = "One two three";
String[] array = words.split(" ");
Arrays.sort(array); 
```

或者

```
char[] array = words.toCharArray();
Arrays.sort(array); 
```

取决于你的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:33:12.780

```
public static void main(String[] args) {

    String s = "Hi aM hErE";
    int len = s.length();
    System.out.println("The lenth is " + len);
    ArrayList<Character> alpha = new ArrayList<Character>();
    for (int i = 0; i <= len - 1; i++) {
        if (Character.isLowerCase(s.charAt(i))) {
            alpha.add(s.charAt(i));
        }
    }
    Collections.sort(alpha);
    System.out.println(alpha);

} 
```

尝试这个。

# javascript - 是否有 lua 等效于 javascript 的 apply()？

> ID：14474206
> 
> 赞同：13
> 
> 时间：2013-01-23T07:07:49.653
> 
> 标签：javascript, lua

在 Lua 中，是否有相当于 Javascript 的 apply() 函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T07:16:47.347

尝试使用`()`和`unpack`

```
function sayhello(name, message)
    print("hello " .. name .. ". " .. message)
end

func1 = sayhello
args1 = {"test", "how are you"}
func1(unpack(args1)) 
```

# extjs - 如何以 extjs Json Store 的格式将 json 数据发送到服务器

> ID：14474209
> 
> 赞同：2
> 
> 时间：2013-01-23T07:08:04.607
> 
> 标签：extjs, extjs4.1, jsonstore

我有一个应用程序，它会在页面加载时获得如下所示的 json 响应。

```
{
{"level2List":[{id:'id1', name:'sample'},....]},
{"level3List":[{id:'id1', name:'sample'},....]},
{"level4List":[{id:'id1', name:'sample'},....]}} 
```

所以我将所有记录都放在根元素中，如“level2List”、“level3List”、level4List 等。通过使用这些记录，我正在创建一个可编辑的网格。当用户编辑任何记录时，我正在调用 store.sync 方法。然后它仅将已编辑记录的 json 发送到后端服务器。喜欢

```
[{id:'id1', name:'sample'},....] 
```

但是我需要以与页面加载相同的格式发送 json 数据。我的意思是我需要发送已编辑的记录及其所属的根元素。

任何帮助将不胜感激。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:06:00.733

假设您的模型实例知道它们属于哪些“根元素”，您可以通过创建自定义编写器来实现这一点。例如，如果您扩展 Ext.data.writer.Json，并在其中创建自己的 writeRecords() 方法，则可以动态定义要发送的根。

```
writeRecords: function(request, data) {
    var root = this.root; // HERE IS WHERE YOU COULD DEFINE YOUR ROOT
    if (this.allowSingle && data.length == 1) {
        // convert to single object format
        data = data[0];
    }
    if (this.encode) {
        if (root) {
        // sending as a param, need to encode
            request.params[root] = Ext.encode(data);
        } else {
            //<debug>
            Ext.Error.raise('Must specify a root when using encode');
            //</debug>
        }
    } else {
        // send as jsonData
        request.jsonData = request.jsonData || {};
        if (root) {
            request.jsonData[root] = data;
        } else {
            request.jsonData = data;
        }
    }
    return request;
} 
```

您只需要在代理上使用自定义编写器。

# mysql - 跟踪MySql中数据的修改

> ID：14474211
> 
> 赞同：1
> 
> 时间：2013-01-23T07:08:17.477
> 
> 标签：mysql

我需要访问远程应用程序的数据库。并每天跟踪数据的修改。此外，所有表都没有时间戳字段，我也不允许使用触发器。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:19:07.197

通常表有一个主键，就像一个索引。定期运行脚本（每天），例如

*   查询`show tables`以列出所有表
*   按字母顺序对表格进行排序
*   运行类似的算法

    ```
    file = "yyyy-mm-dd-"  // todays file
    for table in ListOfTables
    {
      echo TABLE table >> file
      query('SELECT * FROM table ORDER BY PRIMARY KEY') >> file
    } 
    ```

*   在今天的文件和昨天的文件之间做一个`diff`（linux）以获得更改列表。

# ruby-on-rails - 由于 Sqlite3，部署 RoR 应用程序失败（已经尝试过其他帖子）

> ID：14474213
> 
> 赞同：1
> 
> 时间：2013-01-23T07:08:22.127
> 
> 标签：ruby-on-rails, heroku, sqlite

我无法将我的 Ruby on Rails 应用程序推送到 Heroku，因为它一直在尝试安装 sqlite3，而 Heroku 只使用 Postgresql。我已按照这些帖子的说明进行操作：

[使用 Sqlite3 将 RoR 应用程序部署到 Heroku 失败](https://stackoverflow.com/questions/3897431/deploying-ror-app-to-heroku-with-sqlite3-fails)

[无法推送到 heroku - sqlite3.h 丢失](https://stackoverflow.com/questions/10989183/cant-push-to-heroku-sqlite3-h-is-missing)

将我的 sqlite3 gem 设置为仅在开发和测试组中使用，并确保其他 gem 不依赖它，并确保我事先进行了 git commit。它仍然给我同样的“sqlite3.h is missing”错误。我注意到的一件事是，当我运行“gem dependency”命令时，我发现了一些在开发阶段依赖于 sqlite3 的 gem，我认为这没问题，但也许不是。我找不到这些宝石的安装位置。他们是：

Gem 在 2.3.3 上充当可标记

Gem client_side_validations-3.2.1

宝石 cucumber-rails-1.3.0

宝石工厂_女孩-4.1.0

Gem fixture_builder-0.3.4

宝石 kaminari-0.14.1

宝石 orm_adapter-0.4.0

每个都列出了诸如“sqlite3（> = 0，开发）”之类的内容作为依赖项。有人有想法么？

- 编辑 -

这是我的宝石文件：

```
source 'https://rubygems.org'
gem 'rails', '3.2.11'
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
#group :development, :test do
#   gem 'sqlite3'
#end
group :production do
  gem 'thin'
  gem 'pg'
end
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
#gem 'devise'
# #gem 'omniauth'
gem 'omniauth-facebook' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T20:38:03.697

我想到了。我在与主人不同的分支上工作，但在推动主人。一旦我改变它就可以了。感谢大家的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T07:14:24.143

试试这个，在你的开发和测试中使用 sqlite3，但在生产中使用 pg

```
group :development, :test do
    gem 'sqlite3'
end

group :production do
        gem 'thin'
    gem 'pg'
end 
```

# php - 从 localhost 更新远程服务器文件夹权限

> ID：14474215
> 
> 赞同：0
> 
> 时间：2013-01-23T07:08:41.863
> 
> 标签：php, permissions

```
<?php

$source_dir = "pimg";

$move1 = "1.png";
$target1 = "apple/boy/cat/d'!og";

$move2 = "2.png";
$target2 = "a/b";

if($moved = move_image($move1,$source_dir,$target1) ) {

    echo "<br> moved image = ".$moved;
}

if($moved = move_image($move2,$source_dir,$target2) ) {

    echo "<br> moved image = ".$moved;
}

function move_image($image, $source_dir, $target_dir) {

    $target_dir_arr = explode('/',$target_dir);

    $base_dir = $_SERVER['DOCUMENT_ROOT'];

    $path = $base_dir;

    foreach($target_dir_arr as $value) {

        if(file_exists($path.'/'.$value)) {

            $path.='/'.$value;

            //echo "<br>".$path." exist";

        }
        else {

            //echo "<br>".$path." does not exist. ";

            if(mkdir($path.'/'.$value)) {

                //echo " $value created under $path ";

                $path.='/'.$value;

            }
            else {

                echo " $value can not create under $path ";

                return;
            }            
        }
    }

    // move image ///////////////////////////////////

    if(!empty($path)) {

        if(file_exists($source_dir.'/'.$image)) {

            if(copy($source_dir.'/'.$image, $path.'/'.$image)) {

                //echo "<br>$image moved under $path";  

                unlink($source_dir.'/'.$image);

                return $path.'/'.$image;

            }
            else {

                echo "<br>$image move failed under $path";  

                return; 
            }
        }
        else {

            echo "<br> source file $source_dir/$image does not exists. ";               
            return ;
        }
    }   
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:11:44.453

为什么不能用[`chmod()`](http://php.net/manual/en/function.chmod.php)？

```
<?php
// Read and write for owner, nothing for everybody else
chmod("/somedir/somefile", 0600);

// Read and write for owner, read for everybody else
chmod("/somedir/somefile", 0644);

// Everything for owner, read and execute for others
chmod("/somedir/somefile", 0755);

// Everything for owner, read and execute for owner's group
chmod("/somedir/somefile", 0750);
?> 
```

# php - 赋值失败的 PHP 类变量声明

> ID：14474216
> 
> 赞同：2
> 
> 时间：2013-01-23T07:08:42.733
> 
> 标签：php, class, variables

我对 PHP 类很陌生，我目前正在设置几个类变量，如下所示。.time() 函数失败 - 下面的第三行。如果我删除 .time() 它可以工作。

```
class session {

  private $variable;
  private $cookieExpiry = time() + 15811200;      // Cookie Expire

  function __construct() { 
```

您是否不允许使用默认的 php 函数设置这样的变量？

有没有办法做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T07:10:51.660

这些属性是一个蓝图，必须独立于运行时环境。您可以将它们设置为文字值，但不能进行这样的函数调用。在构造函数中设置初始属性：

```
class session {

  private $variable;
  private $cookieExpiry;

  function __construct() {
      $this->cookieExpiry = time() + 15811200; // Cookie Expire
  }
} 
```

# javascript - 如何验证文本框中的日期，在哪个日历上实现？

> ID：14474219
> 
> 赞同：1
> 
> 时间：2013-01-23T07:08:46.457
> 
> 标签：javascript, jquery, .net, asp.net-mvc, calendar

我已经实现了一个`jquery calender`在 asp.net 上的`textbox`控件。当我点击`textbox`它时会显示弹出日历，`date`可以从中选择一个。

现在，问题是我必须**验证所选日期不能是过去的日期**。
今天的日期和大于今天的日期** 有效。

我曾经`javascript`在`textbox`.

**我使用了下面的代码：**

```
$("#ctl00_ContentPlaceHolder1_txtEventDate").datepicker(); 
```

我在各种网站上搜索了很多，但没有得到任何想法。

**注意：**我已经在母版页的头部声明了脚本，日历控件在内容页面上，我不想重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:59:03.700

您只需要`minDate`在 jquery 中使用选项

```
<input type="text" id="datep" name="datpicker"/>

<script>
$(document).ready(function(){
    $("#datep").datepicker({
        minDate: 0
    });
});
</script> 
```

检查这个[小提琴](http://jsfiddle.net/8tDb4/)

# android - 为什么无法从网页获得响应？安卓

> ID：14474221
> 
> 赞同：0
> 
> 时间：2013-01-23T07:09:06.773
> 
> 标签：android

我对 Java/Android 很陌生，我有一个代码来获取网页的响应。我有这样的代码，但由于某种原因，`BufferedReader`'s`in.readLine()`总是返回空值。

```
URL url = new URL(endPoint);
connection = (HttpURLConnection) url.openConnection();

connection.setConnectTimeout(connectionTimeout);
connection.setReadTimeout(readTimeout);
connection.setRequestMethod("POST");
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
connection.setRequestProperty("Content-Length", "" + Integer.toString(encodedParams.getBytes().length));
connection.setRequestProperty("Content-Language", "en-US");
connection.setUseCaches(false);
connection.setDoInput(true);
connection.setDoOutput(true);

// Setup the POST payload
DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
wr.writeBytes(encodedParams);
wr.flush();
wr.close();

// Read the response
InputStream inputStream = connection.getInputStream();
BufferedReader in = new BufferedReader(new InputStreamReader(inputStream, "UTF-8")); 
```

不知道我在哪里犯了错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:26:20.480

服务器是否返回休息。我认为您可以在浏览器中模拟请求并查看返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:20:46.707

我可以看到您的代码中正在建立连接，但我没有看到它正在连接。尝试添加

连接.连接（）；

在您尝试获取流之前。

# android - UTF-8 未在 webview android 中编码 html

> ID：14474223
> 
> 赞同：5
> 
> 时间：2013-01-23T07:09:18.750
> 
> 标签：android, encoding

我正在使用以下代码对我的资产文件夹中的 html 文件进行编码。我在这里浏览了各种链接，但没有成功。这是我的一段代码。

```
 WebSettings settings = myWebVeiw.getSettings();
    //settings.setJavaScriptEnabled(true);
    //myWebVeiw.getSettings().setJavaScriptEnabled(true);
    settings.setDefaultTextEncodingName("utf-8");
    //settings.setDefaultTextEncodingName("ISO-8859-1");

    myWebVeiw.loadUrl("file:///android_asset/"+totaldays+".html"); 
```

虽然它适用于其他字符，但它无法编码 - 因为它在 Web 视图上打印相同。请建议我该怎么做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T22:41:37.940

您需要将 WebSettings 默认文本编码设置为 utf-8。并在将 html 标头字符集强制为 utf-8 之后。示例：

```
String htmlText = "<html> your page here </html>";
WebView web = (WebView) findViewById(R.id.webview); // get your webview from the layout
WebSettings settings = web.getSettings();
settings.setDefaultTextEncodingName("utf-8");
web.loadData(htmlText, "text/html; charset=utf-8", "utf-8"); 
```

这适用于我在 android 2.2.1、4.0.4 和 4.1.2 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:16:03.500

你能试着检查一下：

```
myWebVeiw.loadDataWithBaseURL("file:///android_asset/"+totaldays+".html", null, "text/html", "utf-8",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:17:41.887

对webView不太熟悉。但是浏览器解析一个html字符集编码如下： 1.first charset .so请检查totaldays.html `<meta http-equiv="Content-Type" content="text/html; charset=utf-8">` 2.根据内容。

# python - 将 linux sha512 阴影转换为十六进制

> ID：14474224
> 
> 赞同：2
> 
> 时间：2013-01-23T07:09:21.463
> 
> 标签：python, linux, encryption, hash, sha512

我试图了解 linux 影子字符串格式，并将字符串转换为一般的十六进制格式，就像 MD5 通常的表示方式一样。

我在这里遵循定义 [http://www.akkadia.org/drepper/SHA-crypt.txt](http://www.akkadia.org/drepper/SHA-crypt.txt)

如上所述，最后一步（步骤 22）是特殊的 base-64 编码，具有重新排序的字节。

我写了一个python脚本（我的第一个python程序）来解码base64然后把它放回原来的顺序。

但**问题是**，结果与通常的 SHA1 哈希值不同。

例如，带有盐“456”的密码“123”（不带引号）将产生一个影子字符串

> $6$456$yTSeWYNbvZDCsuZIN.Qdeg.0DxY5N1XddpO7qgFqjnZOqpy5QXIeMM7pdQYWIgu6Y3pSh5eYqJ21fqrlrjhJe/

使用我的程序，它会生成

> A922F952190B1ED9ADD9EFEDA918472364A10CABDBE79D7B5EA52A4FA6691B6A7648D429AB7BED45C7F7FE9938B8C0084F3025365C1FDC968A145192767D566A

但是 123456 和 456123 的 SHA512 哈希是

> BA3253876AED6BC22D4A6FF53D8406C6AD864195ED144AB5C87621B6C233B548BAEAE6956DF346EC8C17F5EA10F35EE3CBC514797ED7DDD3145464E2A0BAB413
> 
> CA3D1DDE02C4B15D2E95521E259C5E08AAEA8FEAA722BA14014605249EFE3F248DB3D98AA7C4ACCBE887E1B40573D7EBA71017C5DF029C16C8D6F06B0FFDA310

它们都与我的结果不同。那么，我对阴影生成方法有什么理解错误吗？还是我的代码有问题？

我的python代码（输入应该是base64代码，即影子字符串的最后一个“$”之后的字符串）：

```
#!/usr/bin/python
# filename: conv.py
import sys
b64s = "./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
bm = ( \
        (0,21,42), \
        (22,43,1), \
        (44,2,23), \
        (3,24,45), \
        (25,46,4), \
        (47,5,26), \
        (6,27,48), \
        (28,49,7), \
        (50,8,29), \
        (9,30,51), \
        (31,52,10), \
        (53,11,32), \
        (12,33,54), \
        (34,55,13), \
        (56,14,35), \
        (15,36,57), \
        (37,58,16), \
        (59,17,38), \
        (18,39,60), \
        (40,61,19), \
        (62,20,41), \
        ('*','*',63))

sd_str = raw_input('Enter a Shadow String: ')
ba = [0]*64
ba_org = [0]*64
for i in range (0,21):
        byte24 = 0
        for j in range(0,4):
                byte24 += (b64s.find(sd_str[i*4+j]) << (j*6))

        for j in range(0,3):
                ba[bm[i][2-j]] = ((byte24>>(j*8))&0x0000FF)

byte24 = b64s.find(sd_str[84]) + (b64s.find(sd_str[85])<<6)
ba[63] = byte24        #last byte
for i in range (0,64):
        sys.stdout.write('%02X' % ba[i])

sys.stdout.write('\n')
sys.stdout.flush() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:24:02.183

您缺少的最重要的事情是影子文件中的密码哈希是迭代的。密码的哈希值`123`不是`sha(password + salt)`，而是`sha(sha(sha(sha(password + salt) + salt) + salt)...)`，默认嵌套 5000 级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:27:21.197

“sha256_crypt”算法不仅仅是一个 SHA256 哈希 - 它是一个相当复杂的结构，它恰好使用 SHA256 作为加密原语，因此得名。

rounds 值不仅需要 SHA256 函数的多个组合，它甚至不是`sha256(sha256(...))`，而是一个更复杂的循环，预先有许多额外的设置步骤......其目标是使其更适合密码散列比简单`sha256()`。也就是说，编码为 base64 之前的转置和自定义 base64 编码并没有真正增加任何安全性，它只是让实现起来更加痛苦。

我建议阅读 Akkdia.org 文档的其余部分，该文档准确描述了影子哈希的计算方式。或者，您可以查看[Passlib](https://code.google.com/p/passlib/source/browse/passlib/handlers/sha2_crypt.py?name=1.5.3)项目源代码中的 sha2_crypt.py，它显示了您需要实现的内容 - 查找`raw_sha256_crypt()`函数，这是正确的起点，尽管内容位于`raw_sha_crypt()`. 请注意，我将您链接到 v1.5.3 源代码，因为[最新版本](https://code.google.com/p/passlib/source/browse/passlib/handlers/sha2_crypt.py?name=1.6.1)（虽然速度更快）也有点难以理解。

# sublimetext2 - 如何告诉 JSLint 不要在单行 if 语句中要求 {

> ID：14474227
> 
> 赞同：15
> 
> 时间：2013-01-23T07:09:41.577
> 
> 标签：sublimetext2, jslint, jslint4java

现在我有以下代码：

```
if (c > last) break; 
```

和 jslint 抱怨

```
jslint:crud.js:69:19:Expected '{' and instead saw 'break'. 
```

有几种方法可以克服它：

```
if (c > last) { break; } 
```

或者

```
if (c > last) { 
  break; 
} 
```

但是当 if 语句在同一行时，我希望 jslint 不要抱怨。

有没有办法配置它？

顺便说一句：我正在使用 sublime text 和 sublime-jslint 插件，配置如下：

```
{
    // Path to the jslint jar.
    // Leave blank to use bundled jar.
    "jslint_jar": "",

    // Options pass to jslint.
    "jslint_options": "--indent 2 --white --maxerr 10000 --nomen --browser --plusplus --es5",

    // Ignore errors, regex.
    "ignore_errors":
    [
        "Combine this with the previous 'var' statement.",
        "It is not necessary to initialize"
    ],

    // run jslint on save.
    "run_on_save": false,

    // debug flag.
    "debug": false
} 
```

知道如何配置它吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T07:52:38.640

不幸的是，JSLint 没有提供一个配置选项来告诉它容忍这种情况。在 JSLint 看来，最好总是在条件语句或迭代语句后加上块语句，即使该块只包含一条语句。

如果您切换到[JSHint](http://jshint.com/)，它的可配置性要高得多，您可以使用该`curly`选项：

```
/*jshint curly: false */ 
```

这将 JSHint 配置为允许没有花括号的单个语句，**无论它是否与前面的条件语句或迭代语句在同一行。**

如果你的 Sublime 插件只支持 JSLint，我强烈推荐[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)，这是我使用的。它同时支持 JSLint 和 JSHint。

# openlayers - 如何在地图上制作水平工具栏？

> ID：14474232
> 
> 赞同：0
> 
> 时间：2013-01-23T07:10:01.013
> 
> 标签：openlayers

我想将 OpenLayers.Control.Button 放入水平工具栏（OpenLayers.Control.Panel），但现在按钮为垂直样式。请参阅以下 jsfiddle：

[http://jsfiddle.net/K2WaA/68/](http://jsfiddle.net/K2WaA/68/)

先感谢您！这是代码：

HTML：

```
<div id="mapdiv"></div> 
```

Javascript：

```
var options = {
    numZoomLevels: 2,
    controls: [new OpenLayers.Control.Navigation(),
               new OpenLayers.Control.PanZoomBar()]
};

map = new OpenLayers.Map("mapdiv", options);

    var panel_type2 = new OpenLayers.Control.Panel({displayClass: 'Panel2'});
    map.addControl(panel_type2);

    var _aBtn2 = new OpenLayers.Control.Button({displayClass: 'first', 
                                                type: OpenLayers.Control.TYPE_TOOL, 
                                                eventListeners: {
                                                    'activate': function(){alert('[First] Control of OpenLayers.Control.TYPE_TOGGLE type is activated')},
                                                    'deactivate': function(){alert('[First] Control of OpenLayers.Control.TYPE_TOGGLE type is deactivated')}
                                                }});
    panel_type2.addControls([_aBtn2]);

    var _aBtn3 = new OpenLayers.Control.Button({displayClass: 'second', 
                                                type: OpenLayers.Control.TYPE_TOOL, 
                                                eventListeners: {
                                                    'activate': function(){alert('[Second] Control of OpenLayers.Control.TYPE_TOGGLE type is activated')},
                                                    'deactivate': function(){alert('[Second] Control of OpenLayers.Control.TYPE_TOGGLE type is deactivated')}
                                                }});
    panel_type2.addControls([_aBtn3]);

map.addLayer(new OpenLayers.Layer('', {
    isBaseLayer: true,
    maxExtent: new OpenLayers.Bounds(-200, -200, 200, 200)
}));
var buildingLayer = new OpenLayers.Layer.Vector("Buildings", {
    maxExtent: new OpenLayers.Bounds(-200, -200, 200, 200),
    strategies: [new OpenLayers.Strategy.Cluster({
        autoActivate: true,
        distance: 100
    })]
});

map.addLayer(buildingLayer);
buildingLayer.addFeatures([new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(-50.126, 36.755))]);
map.zoomToMaxExtent(); 
```

CSS

```
#mapdiv {
    width: 400px;
    height: 400px;
    border: 1px solid #dddddd;
}

.Panel2 {
    width: 150px;
    height: 20px;
    cursor: pointer;
    left: 50px;
    background-color: #bbbbbb;
}

.firstItemInactive,.secondItemInactive {
    background: #ff0000;
    border: 2px solid #075f67;
    width: 18px;
    height: 18px;
}

.firstItemActive, .secondItemActive {
    background: #00ff00;
    border: 2px solid #dddddd;
    width: 18px;
    height: 18px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:37:58.517

添加浮动：左；

```
.firstItemInactive,.secondItemInactive {
    background: #ff0000;
    border: 2px solid #075f67;
    width: 18px;
    height: 18px;
    float:left;
}

.firstItemActive, .secondItemActive {
    background: #00ff00;
    border: 2px solid #dddddd;
    width: 18px;
    height: 18px;
    float:left;
} 
```

# vb.net - 如何在新标签页浏览器中打开可点击的链接

> ID：14474233
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:10:03.653
> 
> 标签：vb.net, browser, webbrowser-control, tabcontrol

我有一个带有 Tabcontrol 的表单，它有 2 个标签页.... tabpage1 和 tabpage2。

*   Tabpage1 有 webbrowser1，tabpage2 有 webbrowser2。
*   webbrowser1 导航到一个 URL，例如 yahoo.com。
*   当我单击 yahoo.com 中的任何链接时，我希望在 tabpage2-webbrowser2 中打开该链接。

我是 vb.net 的新手，所以请让它简单而不复杂，这是给学校的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:18:05.087

**1.总是取消NewWindow事件**

**2.Catch所有链接点击**

一切都[**在这里**](https://stackoverflow.com/questions/701746/how-to-force-webbrowser-component-to-always-open-web-page-in-the-same-window)解释。

但是代码是用 C# 编写的。您需要使用 VB.NET 进行检查。

# mysql - 关联表的 mySQL 查询，其中 ID 为空

> ID：14474237
> 
> 赞同：2
> 
> 时间：2013-01-23T07:10:11.407
> 
> 标签：mysql, sql, select, join

假设我有一个包含许多评论的帖子表（并且评论属于用户）。

如何显示特定用户未发表评论的所有帖子？

假设我的数据库中有一个 ID 为 124 的用户；

```
select * from posts p left join comments c on p.id = c.post_id 
where c.id is null or c.user_id <> 124 
```

但这似乎不对..如果帖子没有评论怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:12:15.870

您应该检查`user_id`from 表`post`而不是表`comments`，因为有些表`user_id`上还没有任何记录`comments`。

```
SELECT  p.* 
FROM    posts p
        LEFT JOIN comments c
            ON p.id = c.post_id AND c.user_id = 124
WHERE   c.post_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:12:58.897

```
select * from posts p left join comments c 
on p.id = c.post_id 
where c.post_id is null and p.user_id = 124; 
```

编辑：

请试试这个：

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/5bd3f/4)

```
select * from posts p
where p.pid not in ( select c.pid
from comments c
where c.uid = 111)
;

| PID | PNAME |
---------------
|   3 |    p3 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:20:17.377

使用 null 作为您的问题的 id 是不好的做法我会使用这样的东西

```
select * from post p1 where not exists 
      (select 1 from comment c1 where c1.post_id = p1.id)
union
select * from post p2 where exists 
       (select 1 from comment c1 where c1.post_id = p1.id and c2.user_id <> 124) 
```

# android - ANR keyDispatchingTimedOut

> ID：14474238
> 
> 赞同：4
> 
> 时间：2013-01-23T07:10:18.013
> 
> 标签：android, multithreading

当我开始我的活动时，我收到一个 ANR 错误。我不知道如何修复，我认为这个错误是由于事件。

这是错误：

```
 01-23 12:29:29.594: E/ActivityManager(147): ANR in com.vxoom.qit.login (com.vxoom.qit.login/.UpdateTokenList)
01-23 12:29:29.594: E/ActivityManager(147): Reason: keyDispatchingTimedOut
01-23 12:29:29.594: E/ActivityManager(147): Load: 2.36 / 2.14 / 2.09
01-23 12:29:29.594: E/ActivityManager(147): CPU usage from 24818ms to 0ms ago with 99% awake:
01-23 12:29:29.594: E/ActivityManager(147):   3.3% 3575/com.vxoom.qit.login: 2.9% user + 0.3% kernel / faults: 939 minor
01-23 12:29:29.594: E/ActivityManager(147):   2% 3/ksoftirqd/0: 0% user + 2% kernel
01-23 12:29:29.594: E/ActivityManager(147):   0.6% 477/RTKTHREAD: 0% user + 0.6% kernel
01-23 12:29:29.594: E/ActivityManager(147):   0.3% 214/com.android.systemui: 0.2% user + 0% kernel / faults: 10 minor
01-23 12:29:29.594: E/ActivityManager(147):   0.2% 147/system_server: 0.2% user + 0% kernel / faults: 23 minor
01-23 12:29:29.594: E/ActivityManager(147):   0.1% 85/surfaceflinger: 0% user + 0% kernel
01-23 12:29:29.594: E/ActivityManager(147):   0% 133/adbd: 0% user + 0% kernel
01-23 12:29:29.594: E/ActivityManager(147):   0% 2611/kworker/u:0: 0% user + 0% kernel
01-23 12:29:29.594: E/ActivityManager(147):   0% 3450/kworker/u:1: 0% user + 0% kernel
01-23 12:29:29.594: E/ActivityManager(147): 7.4% TOTAL: 3.5% user + 3.5% kernel + 0.2% softirq
01-23 12:29:29.594: E/ActivityManager(147): CPU usage from 354ms to 868ms later:
01-23 12:29:29.594: E/ActivityManager(147):   2.7% 477/RTKTHREAD: 0% user + 2.7% kernel
01-23 12:29:29.594: E/ActivityManager(147):   1.2% 3/ksoftirqd/0: 0% user + 1.2% kernel
01-23 12:29:29.594: E/ActivityManager(147):   1.9% 147/system_server: 0% user + 1.9% kernel
01-23 12:29:29.594: E/ActivityManager(147):     1.9% 179/InputDispatcher: 0% user + 1.9% kernel
01-23 12:29:29.594: E/ActivityManager(147): 7.6% TOTAL: 0% user + 7.6% kernel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:50:07.723

不，这很可能是你的错。由于 UI 线程中正在执行某些操作，因此无法调度触摸事件。这就是引发异常的原因。

在手机设置中打开**开发者选项**并启用**严格模式**（可能命名不同），它将帮助您在主线程中找到长时间运行的操作。

触发 ANR 的原因：http:
[//developer.android.com/training/articles/perf-anr.html](http://developer.android.com/training/articles/perf-anr.html)

# jquery - jQuery悬停附加不起作用

> ID：14474246
> 
> 赞同：0
> 
> 时间：2013-01-23T07:10:41.160
> 
> 标签：jquery, jquery-ui, jquery-selectors

我有一个 jquery 图像滚动器，当到达最后一个时会`<li>`附加第一个`<li>`，依此类推。但是当我使用hover而不是onclick时，下面的代码不起作用

```
 jQuery("#gallery-next").click(function () {
     next_scroll();
 });

 function next_scroll() {
     if (jQuery("#gallery").position().left > stopPosition && !jQuery("#gallery").is(":animated")) {
         jQuery("#gallery").animate({
             left: "-=" + imageWidth + "px"
         });
     }
     if (jQuery("#gallery").position().left == stopPosition) {
         $("#gallery > li:first").appendTo("#gallery").fadeIn('slow');
         return false;
     }
 } 
```

我应该怎么做才能使鼠标输入/悬停工作而不是单击功能。我在这个论坛上看到了其他非常相似的解决方案，但我无法使用这些解决方案。所以请用代码回答。这会很有帮助。 这是提前检查[小提琴的链接谢谢](http://jsfiddle.net/rogerblake/e4npa/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:35:00.670

如果我理解这个问题，你需要改变这个：

```
jQuery("#gallery-next").click(function () {
    next_scroll();
}); 
```

对于这个：

```
var timer = 0;
jQuery("#gallery-next").
mouseover(function () {
     //Call next_scroll() every two seconds
     timer = setInterval(next_scroll, 2000);})
.mouseout(function(){
     timer = clearInterval(timer);
}); 
```

**更新：**不是，对混乱`setInterval()`感到`setTimeOut()`抱歉，检查[更新的小提琴](http://jsfiddle.net/e4npa/3/)

# iphone - 自动更改为下一个 ViewController

> ID：14474248
> 
> 赞同：0
> 
> 时间：2013-01-23T07:10:48.083
> 
> 标签：iphone, ios, objective-c, xcode, ipad

**以下情况。**

在情节提要中，我有两个 ViewController。**ViewController_1**和**ViewController_2**。当第一个**ViewController_1**打开并且 viewdidload void 确实加载时，如何在一段时间后（*我可以调整）自动移动到下一个***ViewController_2**而无需任何用户干预？我正在为我的方法使用这个自我调用：

 *```
 [self performSelector:@selector(toNewViewController:) withObject:nil 
afterDelay:timeInSeconds]; 
```

但我不确定，如何用视图控制器编写方法来查看控制器转换。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:20:15.620

在 Storyboard 中从第一个视图到第二个视图创建一个 segue（从一个视图到另一个视图的箭头）。

然后你需要调用你的`toNewViewController`方法：

```
[self performSegueWithIdentifier:@"nameOfYourSegue" sender:self]; 
```

此调用将执行从您的第一个视图到您的第二个视图的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:24:53.773

首先你必须创建一个函数来展示你的第二个视图控制器。

```
[NSTimer scheduledTimerWithTimeInterval:certainTime target:self selector:@selector(presentnextView) userInfo:nil repeats:NO];

-(void)presentnextView
{
    ViewController *secondView=[[ViewController alloc] init];
    [self presentViewController:secondView animated:YES completion:nil];
    [secondView release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:35:32.387

您可能还需要它来拦截控制器传输并设置目标视图控制器：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
        if ([[segue identifier] isEqualToString:@"nameOfYourSegue"]) {
                /* In my case its navigation controller, for you it may be different */
                UINavigationController *navi = [segue destinationViewController];
                ComposeViewController *compose = [navi.viewControllers objectAtIndex:0];
                compose->delegate = self;
                compose.login = self.login;
                compose.name = self.name;
        }
} 
```*

# jquery - JQuery - 新创建元素的上下文菜单

> ID：14474252
> 
> 赞同：0
> 
> 时间：2013-01-23T07:10:56.667
> 
> 标签：jquery, contextmenu

我正在使用[JQuery 上下文菜单插件](http://labs.abeautifulsite.net/archived/jquery-contextMenu/demo/)。

文件准备好后，我`contextMenu`有`img`元素

```
$(document).ready(function(){
    $('img').contextMenu({
        menu: 'photoMenu'
    },function(action, el, pos) {
        //some function

    });
}); 
```

我要动态添加`img`元素：

```
$img = $('<img />'); 
```

如何绑定`contextMenu`新创建的`img`元素。应该和上面一样吧？我应该创建一个函数调用它吗？或者还有其他简单的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:12:22.530

目前，您正在附加您`contextMenu`的文档就绪功能。您应该在创建`contextMenu`图像后创建。

所以只需将您的代码更新为

```
$img = $('<img />');

$img.contextMenu({
        menu: 'photoMenu'
    },function(action, el, pos) {
        //some function

    }); 
```

**注意：**您必须确保`contextMenu`在创建图像对象后创建。

# php - 在另一个单词之后获取字符串中的下一个单词

> ID：14474253
> 
> 赞同：2
> 
> 时间：2013-01-23T07:10:56.667
> 
> 标签：php

我正在尝试在 PHP 活动系统中获取元内容，问题是它提供的内容为

> admin 写了一篇新帖子，FIRE 2 天，2 小时前

所以在这里我想得到“火”这个词，但因为它是标题，所以它是动态的，所以我能做的就是找到帖子这个词，因为它很常见，所以我可以在`post,`if之后得到下一个`post,`词当下。谁能建议我如何做到这一点？假设我们还有一个这样的内容

> 管理员在 2 天 3 小时前发布了更新

它没有，`post,`所以它会被避免。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T07:36:02.380

使用正则表达式

```
$string="admin wrote a new post, FIRE 2 days, 2 hours ago";
$result=preg_split('/post,/',$string);
if(count($result)>1){
$result_split=explode(' ',$result[1]);
print_r($result_split[1]);
} 
```

这个输出 FIRE

[现场演示](http://codepad.viper-7.com/GSLTiU)

另一种方式

```
$string="admin wrote a new post, FIRE 2 days, 2 hours ago";
$result=preg_match_all('/(?<=(post,))(\s\w*)/',$string,$matches);
print_r($matches[0]); 
```

[现场演示](http://codepad.viper-7.com/WMORqy)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T07:48:33.323

只需使用explode()方法，定位单词post的位置，提取下一个单词。

```
$pizza  = "piece1 piece2 piece3 piece4 piece5 piece6";
$pieces = explode(" ", $pizza);

foreach( $pieces as $key => $value )
{
if($pieces[$key] == 'post' )
{
echo $pieces[$key+1];
break;
}
} 
```

或者，专家方法：

```
echo $pieces[array_search('post', $pieces)+1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:55:58.577

为此使用正则表达式。

```
$string="admin wrote a new post, FIRE 2 days, 2 hours ago";
preg_match('/(?<=post, )\S+/i', $string, $match);
echo $match[0]; 
```

希望这对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T07:46:33.720

*   拆分字符串并放入数组
*   获取“帖子”的索引
*   获取位置 index+1 的数组的值

# java - 列表问题的 Java 参考？

> ID：14474254
> 
> 赞同：0
> 
> 时间：2013-01-23T07:10:58.167
> 
> 标签：java, list

我有一个类`A`，其中包含：

```
List aList = new ArrayList();

aList .add("1");
aList .add("2");
aList .add("3"); 
```

现在类**A.java**包含另一个类**B.java**的引用，而类**B.java** 包含另一个带有 get() 和 set() 方法的列表。

```
List bList; 
```

在**A.java**类中，我正在创建**B.java**类的对象并调用 bList 的**setmethod**并将**A.java**列表提供给该方法。

```
B b = new B();
b.setBList(aList); 
```

但是如果**aList**改变了**bList**的值也会改变。我如何创建一个列表，即使更改 main* *(aList)* * 列表引用列表也不会改变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T07:13:22.040

您需要制作所谓的防御性副本：

```
b.setBList(new ArrayList(aList)); 
```

请注意，这仅复制列表本身，而不是其中的对象。因此，如果有人在列表的第一个对象上调用变异方法，这些更改仍然对 B 可见（在您的示例中显然不是问题，因为字符串是不可变的）。

# php - 提出设计问题的解决方案

> ID：14474256
> 
> 赞同：0
> 
> 时间：2013-01-23T07:11:04.367
> 
> 标签：php, design-patterns

我有一堂课说照片和代码

```
class photo  
{  
    public function __construct($UserWhosePhotoToBeGetObj)  
    {    
       $this->UserWhosePhotoToBeGetObj = $UserWhosePhotoToBeGetObj  
    }  
}

public function getPhoto()  
{  
   // some complex logic and query to get detail of photo of user.  
} 
```

现在的问题是，当我想获取多个用户的照片时，如果我在循环中调用这个类，那么将触发许多查询，如果我创建类`photoArr`，那么我需要在两个类中编写复杂的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:16:47.927

也许，您可以将基于用户的查询逻辑捆绑在一个函数中，并在多个用户的情况下一次又一次地调用该函数。我想不出避免收集多个用户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T16:29:35.747

“照片”听起来像一个数据类。数据类不应包含获取事物的逻辑。在构造函数中传入“获取照片的用户”似乎也是相当错误的。

这样的逻辑可能应该放在具有当前 getPhoto 逻辑的 PhotoFetcher 类中。例如 getPhotoForUser( 用户 $userForWhichToGetPhoto )。它还可以支持批量获取。

# opengl - 如何使用 Qt5 在 OpenGL 中启用多重采样（抗锯齿）？

> ID：14474259
> 
> 赞同：7
> 
> 时间：2013-01-23T07:11:15.653
> 
> 标签：opengl, qt5, multisampling

创建窗口时如何启用多重采样？我应该如何初始化 OpenGL 以匹配？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T07:11:15.653

我花了一段时间才弄清楚这个。

诀窍是`QSurfaceFormat`在你`QWindow`的构造函数中使用 a ，如下所示：

```
setSurfaceType(QWindow::OpenGLSurface);
QSurfaceFormat format;
format.setSamples(4);    // Set the number of samples used for multisampling
setFormat(format);       // Note we set the format on the window...
create();                // Create the window

context = new QOpenGLContext(this);
context->setFormat(format);    // ...and set the format on the context too
context->create(); 
```

稍后，在初始化 OpenGL 时：

```
glEnable(GL_MULTISAMPLE);    // This seems to be the default given the configuration above, but just in case that's not universal... 
```

# c# - 以编程方式在 Datagrid 模板 c# 中添加图像

> ID：14474262
> 
> 赞同：5
> 
> 时间：2013-01-23T07:11:47.127
> 
> 标签：c#, binding, code-behind, datagridtemplatecolumn

以下 xaml 代码将“图像”与 datagrid 模板列绑定。

```
 <DataGridTemplateColumn Header="">

       <DataGridTemplateColumn.CellTemplate>

           <DataTemplate>

                <Image Source="{Binding Path=Image}" Height="16" Width="16" VerticalAlignment="Top" />

             </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>

   The same thing need to be done in codebehind (c# code)  

       DataGridTemplateColumn im = new DataGridTemplateColumn();
       im.Header = "";
       Binding items1 = new Binding(); 
```

这就是我尝试过的......如何将datagridtemplate列绑定到图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T08:09:49.913

这是以编程方式添加 DataGridTemplateColumn 的代码。

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/df77a277-91d4-41f1-a42a-0fa02a443ff4](http://social.msdn.microsoft.com/Forums/en/wpf/thread/df77a277-91d4-41f1-a42a-0fa02a443ff4)

```
DataGridTemplateColumn imgColumn = new DataGridTemplateColumn();
imgColumn.Header = "Image";

FrameworkElementFactory imageFactory = new FrameworkElementFactory(typeof(Image));
imageFactory.SetBinding(Image.SourceProperty, new Binding("ImgPath"));

DataTemplate dataTemplate = new DataTemplate();
dataTemplate.VisualTree = imageFactory;

imgColumn.CellTemplate = dataTemplate;

DGImages.Columns.Add(imgColumn); 
```

我还添加了我创建的示例应用程序的源代码。希望能帮助到你。

MainWindow.xaml 文件

```
<Window x:Class="StackOverflow.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">
<Grid>
<DataGrid Name="DGImages" AutoGenerateColumns="False">
<DataGrid.Columns>
<DataGridTextColumn Header="Image Desc" Binding="{Binding ImgDesc}"></DataGridTextColumn>
</DataGrid.Columns>
</DataGrid>
</Grid>
</Window> 
```

MainWindow.xaml.cs 文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;

namespace StackOverflow
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
private ObservableCollection<SampleClass> imgList = null;

public MainWindow()
{
InitializeComponent();
imgList = new ObservableCollection<SampleClass>();
imgList.Add(new SampleClass() { ImgDesc = "First Image", ImgPath = @"/Images/MyImage.jpg" });

DataGridTemplateColumn imgColumn = new DataGridTemplateColumn();
imgColumn.Header = "Image";

FrameworkElementFactory imageFactory = new FrameworkElementFactory(typeof(Image));
imageFactory.SetBinding(Image.SourceProperty, new Binding("ImgPath"));

DataTemplate dataTemplate = new DataTemplate();
dataTemplate.VisualTree = imageFactory;

imgColumn.CellTemplate = dataTemplate;

DGImages.Columns.Add(imgColumn);

this.DGImages.ItemsSource = imgList;
}
}
} 
```

SampleClass.cs 文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace StackOverflow
{
public class SampleClass : INotifyPropertyChanged
{
private string _ImgDesc;

public string ImgDesc
{
get { return _ImgDesc; }
set
{
_ImgDesc = value;
OnPropertyChanged("ImgDesc");
}
}

private string _ImgPath;

public string ImgPath
{
get { return _ImgPath; }
set
{
_ImgPath = value;
OnPropertyChanged("ImgPath");
}
}

public event PropertyChangedEventHandler PropertyChanged;

public void OnPropertyChanged(string propertyName)
{
if (PropertyChanged != null)
{
PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
}
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:32:50.257

你可以尝试更改为

```
<DataGridTemplateColumn Header="Image"> 
```

和

```
<Image Source="{Binding Image}" /> maybe this one 2 
```

# php - 在将多个或批量插入查询更改为 PDO 时需要帮助

> ID：14474265
> 
> 赞同：1
> 
> 时间：2013-01-23T07:12:02.470
> 
> 标签：php, javascript, mysql, pdo

我在此链接中问了一个问题[Is-there-a-better-way-to-process-a-300-000-line-text-file-data-and-insert-it-into-a-mysql-database](https://stackoverflow.com/questions/14453922/is-there-a-better-way-to-process-a-300-000-line-text-file-data-and-insert-it-int)和发布了我的代码。

现在我想将查询更改为 PDO，但在更改 InsertData 函数中的查询时遇到了困难。我是 PDO 的新手，所以有人可以帮助我吗？不知道如何处理执行批量插入的插入语句。

我在想的是一个一个地插入它，但是当我为了提高性能效率而发布这个问题时，它是否有效？

```
//function for DB writing in table data
function InsertData($rec, &$errorDataCnt, &$sql, $y, $i, $x, &$dCnt)
{

    $dDate = (!isset($rec[0]) ? 0 : (trim($rec[0]) == "" ? 0 : trim($rec[0]))); 
    $dTime = (!isset($rec[1]) ? 0 : (trim($rec[1]) == "" ? 0 : trim($rec[1]))); 
    $address = (!isset($rec[2]) ? 0 : (trim($rec[2]) == "" ? 0 : trim($rec[2]))); 
    $co2SV = (!isset($rec[3]) ? 0 : (trim($rec[3]) == "" ? 0 : trim($rec[3]))); 
    $co2PV = (!isset($rec[4]) ? 0 : (trim($rec[4]) == "" ? 0 : trim($rec[4]))); 
    $tempSV = (!isset($rec[5]) ? 0 : (trim($rec[5]) == "" ? 0 : trim($rec[5]))); 
    $tempPV = (!isset($rec[6]) ? 0 : (trim($rec[6]) == "" ? 0 : trim($rec[6]))); 
    $rhSV = (!isset($rec[7]) ? 0 : (trim($rec[7]) == "" ? 0 : trim($rec[7]))); 
    $rhPV = (!isset($rec[8]) ? 0 : (trim($rec[8]) == "" ? 0 : trim($rec[8]))); 

        /* include('connect.php'); */
        set_time_limit(36000);
        ini_set('max_execution_time','43200');
        $e_results = mysql_query("SELECT ID FROM tbl_reading WHERE (READING_DATE = '".date("Y-m-d",strtotime($dDate))."' AND READING_TIME = '".date("H:i:s",strtotime($dTime))."') AND READING_ADDRESS = $address LIMIT 1"); 
        if(mysql_num_rows($e_results) <= 0 ){
          if (!($dDate == 0 || $dTime == 0 || $address == 0) ) {
            if ($y == 0){
                $sql = "INSERT INTO tbl_reading (READING_DATE, READING_TIME, READING_ADDRESS, CO2_SET_VALUE, CO2_PROCESS_VALUE, TEMP_SET_VALUE, TEMP_PROCESS_VALUE, RH_SET_VALUE, RH_PROCESS_VALUE) VALUES ('".date("Y/m/d",strtotime($dDate))."','".date("H:i:s",strtotime($dTime))."', ". mysql_real_escape_string($address).",". mysql_real_escape_string($co2SV).",". mysql_real_escape_string($co2PV).",". mysql_real_escape_string($tempSV).",". mysql_real_escape_string($tempPV).",". mysql_real_escape_string($rhSV).",". mysql_real_escape_string($rhPV).")";
            }
            else {
                $sql .= ", ('".date("Y/m/d",strtotime($dDate))."','".date("H:i:s",strtotime($dTime))."', ". mysql_real_escape_string($address).",". mysql_real_escape_string($co2SV).",". mysql_real_escape_string($co2PV).",". mysql_real_escape_string($tempSV).",". mysql_real_escape_string($tempPV).",". mysql_real_escape_string($rhSV).",". mysql_real_escape_string($rhPV).")";

            }
           }
          }

            if(($x + 1) == $i){
                //echo ($x + 1)." = ".$i."<br>";
                if (substr($sql, 0, 1) == ",")
                    $sql = "INSERT INTO tbl_reading (READING_DATE, READING_TIME, READING_ADDRESS, CO2_SET_VALUE, CO2_PROCESS_VALUE, TEMP_SET_VALUE, TEMP_PROCESS_VALUE, RH_SET_VALUE, RH_PROCESS_VALUE) VALUES".substr($sql, 1);
                //echo $sql."<br>";
                set_time_limit(36000);
                try {

                    $result = mysql_query($sql) ;
                    $dCnt = mysql_affected_rows();
                    if( $dCnt  == 0)
                    {
                        $errorDataCnt = $errorDataCnt + 1;
                    }
                }
                catch (Exception $e)
                {
                    $conn->query("INSERT INTO tbl_log (LOG_DATE, DETAILS) VALUES ( NOW(), '".$e->getMessage()."' )");
                }
                //mysql_free_result($result);
            }

    unset($dDate); 
    unset($dTime); 
    unset($address); 
    unset($co2SV); 
    unset($co2PV); 
    unset($tempSV); 
    unset($tempPV); 
    unset($rhSV); 
    unset($rhPV);  

}

//function for looping into the records per line
function loop($data)
{
    $errorDataCnt = 0; $sql = ""; $exist = 0;
    $i = count( $data); $x = 0; $y = 0; $tmpAdd = ""; $cnt = 0; $t = 0; $dCnt = 0; 

    ini_set('max_execution_time','43200');
    while($x < $i) 
    {
        $rec = explode(",", $data[$x]); 
        InsertData($rec, $errorDataCnt, $sql, $y, $i, $x, $dCnt);
        $x++; 
        $y++;
        unset($rec);
    }

        $errFetch = ($i - $dCnt);
    if($errorDataCnt > 0)
        $conn->query("INSERT INTO tbl_log (LOG_DATE, DETAILS) VALUES ( NOW(), 'Error inserting $errFetch records. Check if there is a NULL or empty value or if it is the correct data type.' )");
    if($dCnt > 0)
        $conn->query("INSERT INTO tbl_log (LOG_DATE, DETAILS) VALUES ( NOW(), 'Saved $dCnt of $i records into the database. Total $exist records already existing in the database.' )");

}

// functions in looping records and passing into $contents variable
function DataLoop($file)
{
    ini_set("auto_detect_line_endings", true);
    set_time_limit(36000);
    ini_set('max_execution_time','43200');
    $contents = ''; $j = 0;
    if ($handle = fopen($file,"rb")){
        while (!feof($handle)) {
            $rdata = fgets($handle, 3359232);//filesize($file));
            //$rdata = fread($handle, filesize($file));
            if(trim($rdata) != "" || $rdata === FALSE){
                if (feof($handle)) break;
                else {
                $contents .= $rdata;
                $j = $j + 1; }}
        }   
        fclose($handle);
        $data = explode("\n", $contents);
        unset($contents);
        unset($rdata);
    }
    /* echo count($contents)." ".count($data); */
    /* $query = "SELECT MAX(`ID`) AS `max` FROM `tbl_reading`";
    $result = mysql_query($query) or die(mysql_error());
    $row = mysql_fetch_assoc($result);
    $max = $row['max']; */
    /* $res =   mysql_fetch_assoc(mysql_query("SELECT COUNT(*) as total FROM tbl_reading")) or die(mysql_error());
    echo "<script>alert('".$res['total']."')</script>"; */
    $p = 0;
    ini_set('memory_limit','512M');
    if($j != 0)
    {
        foreach(array_chunk($data, ceil(count($data)/200)) as $rec_data){
            loop($rec_data);
            $p++;
        }
    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:30:47.490

你可以使用`PDO::prepare`它。[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

它是为这样的事情而设计的，应该更快一些（实际上并不是从经验中谈起）。只需用一些样本数据来衡量它。

```
$data = array(
     array(
         ':key1' => 'value1',
         ':key2' => 'value2',
     ),
     array(
         ':key1' => 'value3',
         ':key2' => 'value4',
     ),
);

$sql = 'INSERT INTO data_table (key1, key1) VALUES (:key1, key2);';
$stmt = $dbh->prepare($sql);
foreach($data AS $dataset) {
    $stmt->execute($dataset);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:54:55.397

这不是您运行查询（PDO、mysql、批量插入或其他）的方式，而是 InnoDB 引擎使插入速度太慢。
在开始插入之前，您需要做一些准备。
至于特定的插入语法 - 这是无关紧要的。

在插入之前设置此选项

```
innodb_flush_log_at_trx_commit=0 
```

或将您的所有插入都放入一个事务中。
无论您选择什么语法或驱动程序，它都会非常快

# ruby - EventMachine how to write keyboard handler reacting on keypress

> ID：14474266
> 
> 赞同：3
> 
> 时间：2013-01-23T07:12:06.747
> 
> 标签：ruby, eventmachine

I use EventMachine LineText2 protocol and I would like to fire `receive_line` method everytime I press a character on my keyboard and not just when I enter a new line. Is there a way to change that default behaviour?

```
class KeyboardHandler < EM::Connection
  include EM::Protocols::LineText2

  def initialize(q)
    @queue = q
  end

  def receive_line(data)
    @queue.push(data)
  end
end

EM.run {
  q = EM::Queue.new

  callback = Proc.new do |line|
    # puts on every keypress not on "\n"
    puts line
    q.pop(&callback)
  end
  q.pop(&callback)

  EM.open_keyboard(KeyboardHandler, q)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:42:48.243

If you want to receive unbuffered input from the terminal, you should turn off canonical-mode on standard input. (I also turn off echo to make the screen easier to read.) Add this before your code calls `#open_keyboard` or within your handler initializer:

```
require 'termios'
# ...
attributes = Termios.tcgetattr($stdin).dup
attributes.lflag &= ~Termios::ECHO # Optional.
attributes.lflag &= ~Termios::ICANON
Termios::tcsetattr($stdin, Termios::TCSANOW, attributes) 
```

For example:

```
require 'termios'
require 'eventmachine'

module UnbufferedKeyboardHandler
  def receive_data(buffer)
    puts ">>> #{buffer}"
  end
end

EM.run do
  attributes = Termios.tcgetattr($stdin).dup
  attributes.lflag &= ~Termios::ECHO
  attributes.lflag &= ~Termios::ICANON
  Termios::tcsetattr($stdin, Termios::TCSANOW, attributes)

  EM.open_keyboard(UnbufferedKeyboardHandler)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-02T15:17:31.560

Here's an update for Ruby 2.0+. In Ruby 2.0 we have `io/console`, which makes handling raw keyboard much easier, and it's cross-platform.

Here's a working example that reacts to raw keyboard events using `io/console`:

```
require 'io/console'
require 'eventmachine'

module KB
  def receive_data(key)
    puts "GOT: #{key}\r"

    # CTRL-C will not work in raw mode, so we need another way to exit.    
    EM::stop if key == 'q'
  end
end

begin
  EM.run {
    # Put console in raw mode (no echo, no line buffering).
    IO.console.raw!
    EM.open_keyboard(KB)
  }
ensure
  # Ensure cooked, otherwise console will be unusable after exit.
  IO.console.cooked!
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:09:19.177

I've not used EventMachine before, but [this page on the EventMachine wiki](http://eventmachine.rubyforge.org/docs/KEYBOARD.html) seems to indicate that you should not use the `LineText2` protocol as it sounds like you don't want buffered lines.

They give this example:

```
module MyKeyboardHandler
  def receive_data(keystrokes)
    puts "I received the following data from the keyboard: #{keystrokes}"
  end
end

EM.run {
  EM.open_keyboard(MyKeyboardHandler)
} 
```

Does that give you what you want?

# java - 测试一个数字是否是另一个数字的倍数

> ID：14474267
> 
> 赞同：-2
> 
> 时间：2013-01-23T07:12:06.930
> 
> 标签：java, methods, boolean

我的课本上有一个问题说：

**编写一个方法multiple，以两个整数作为参数，如果第一个整数能被第二个整数整除（即除法后没有余数），则返回true；否则，该方法应返回 false。将此方法合并到一个应用程序中，使用户能够输入值来测试该方法。**

我写了这段代码，但它不起作用：

```
public class project1 {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        int a, b;
        System.out.println("enter the first number");
        a = input.nextInt();

        System.out.println("enter the first number");
        b = input.nextInt();
    }

    public static boolean multiple(int g, int c) {

        int g, c;

        if (g % c = 0) {
            return true;
        } else {
            return false;

        };
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:13:26.060

```
//int g, c;
^^ 
```

删除此行..

* * *

```
if (g%c==0){
        ^ 
```

您需要`==`用于检查相等性。

* * *

您实际上也可以执行以下操作来减少几行..

```
public static boolean multiple(int g, int c) {
    return g%c == 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:14:28.917

你的方法错误太多。它实际上应该是这样的：

```
public static boolean multiple(int g, int c) {
    return g % c == 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:17:52.623

首先，您不需要在函数中再次声明**（** 这是一个错误）。其次，您根本没有调用该函数，您只是实现了它。就像其他人回答的那样，您需要拥有而不是.`g``c``multiple``==``=`

```
public static void main(String[] args) {
    Scanner input = new Scanner (System.in);
    int a,b;
    System.out.println("enter the first number");
    a=input.nextInt(); 

    System.out.println("enter the first number");
    b=input.nextInt();

    boolean result = multiple(a,b);
    System.out.println(result);
}

public static boolean multiple (int g,int c){
    if (g%c==0){
        return true;
    }
    else
    {
        return false;
    }
} 
```

请注意，您可以有一个较短的版本，`multiple`其中只有一行：`return g%c==0;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T07:16:43.493

除了 = 问题之外，您还要两次声明变量。尝试这个：

```
public static boolean multiple(int g, int c) {
    return g % c == 0;
} 
```

# ios - NSURLRequest 错误：“[CoreData 长度]：无法识别的选择器发送到实例”

> ID：14474268
> 
> 赞同：0
> 
> 时间：2013-01-23T07:12:08.327
> 
> 标签：ios, xcode, nsurlrequest, nsfetchrequest

我有一个链接，我正在另一个视图的 QR 码扫描仪中扫描该链接，然后将其保存到 Core Data。我保存它的实体称为“条形码”，属性为“数字”。您将在一分钟内看到的获取结果是来自 QR 码扫描的正确 url。我只是收到一个错误，就像我在标题中列出的错误一样。它的字面意思是这样的：`-[BarCode length]: unrecognized selector sent to instance 0x210645e0`。

我有我正在执行的这个块，它也会引发错误：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"BarCode"];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"number" ascending:NO];
request.sortDescriptors = @[sortDescriptor];

NSError *error = nil;
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
NSString *currentURL = [[self.managedObjectContext executeFetchRequest:request error:&error] objectAtIndex:indexPath.row];
if (error) {
    NSLog(@"error fetching data %@ %@", error, error.userInfo);
}

[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:currentURL]]]; 
```

我知道从转换到`NSArray`转换`NSString`会导致错误，因为它是“无法识别的”。但是我做了一些研究，发现错误中的“lenght”属性与`NSURLRequest`s 类中的某些东西有关，但我对这个类是全新的，所以我不知道我需要如何重写这个堵塞。

我试着搜索了一下，但我找不到涉及 a`NSFetchRequest`和 a的示例`NSURLRequest`。

我真的希望有人会对这里有所了解。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:25:30.750

您`currentURL`将持有`NSManagedObject`子类的实例，而不是`NSString`. 您缺少几行代码：

```
MyManagedObject *myManagedObject = [[self.managedObjectContext executeFetchRequest:request error:&error] objectAtIndex:indexPath.row];
// This is what you are missing:
NSString *currentURL = myManagedObject.someStringAttribute;
if (error) {
    NSLog(@"error fetching data %@ %@", error, error.userInfo);
}

[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:currentURL]]]; 
```

您收到错误`-[BarCode length]: unrecognized selector sent to instance 0x210645e0`是因为`[NSURL URLWithString:currentURL]`假设 currentURL 是一个字符串，并`NSURL`尝试进行一些字符串验证。

# java - Java Web 应用程序的推送通知

> ID：14474273
> 
> 赞同：19
> 
> 时间：2013-01-23T07:12:18.200
> 
> 标签：java, jsp, spring-mvc, push-notification

目前我正在开发一个使用 Spring 3.1 和 Hibernate 4 的网络应用程序。

根据要求，我想在 JSP 页面上实现像 Facebook 那样的推送通知。如果您有任何建议，请同时列出兼容的浏览器及其版本。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-03T16:09:45.703

如果您可以升级到或正在使用 JDK 7，我建议使用 Vert.x [Vertx.io](http://vertx.io/)，在客户端使用 Sockjs。Vert.x 有一个完整的 sockjs 服务器实现，我会尝试提出一种实现方式，其余的请查看 Docs

服务器实现可能是这样的

```
 Vertx vertx = Vertx.newVertx();
    EventBus eventBus = vertx.eventBus()
    HttpServer server = vertx.createHttpServer();
    JsonArray permitted = new JsonArray();
    permitted.add(new JsonObject());
    SockJSServer sockJSServer = new DefaultSockJSServer(vertx, server);
    sockJSServer.bridge(new JsonObject().putString("prefix", "/pusher"), permitted, permitted);
    server.listen(<some port>); 
```

在客户端注册一个处理程序，如文档加载

```
 function () {
if (!eb) {
  eb = new vertx.EventBus("http://<your_host>:<your_port>/pusher");

  eb.onopen = function() {
   console.log("connected")
  };

  eb.onclose = function() {
    console.log("Not connected");
    eb = null;
  };
} 
```

}

然后，您可以将处理程序注册到任何地址 - 这里的地址可以是任何地址，假设它是“AwesomeNotifications”

```
function subscribe(address) {
if (eb) {
  eb.registerHandler(address, function(msg, replyTo) {
  console.log("Reply recieved")
          });

}
} 
```

完成所有设置后，您现在可以使用我们之前创建的事件总线将任何数据从服务器推送到该地址。

```
eventBus.publish("AwesomeNotifications", new JsonObject(<some hashmap to serialize>)) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-23T07:22:40.210

您可以使用 HTMl5 服务器发送选项。在这里您可以了解更多详情

**服务器发送选项：**

[http://www.w3schools.com/html/html5_serversentevents.asp](http://www.w3schools.com/html/html5_serversentevents.asp)

**用于服务器发送的 Java servelt：**

[Java servlet 和服务器发送事件](https://stackoverflow.com/questions/6466713/java-servlet-and-server-sent-events)

**教程 ：**

[http://peaktechie.blogspot.in/2012/04/small-tutorial-on-html5-server-sent.html](http://peaktechie.blogspot.in/2012/04/small-tutorial-on-html5-server-sent.html)

**HTML5 支持的浏览器：**

[http://fmbip.com/litmus](http://fmbip.com/litmus)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-05T08:51:19.127

我最近一直在研究这个。基于事件的方法非常适合构建单页 Web 应用程序，但也可以用于多页 Web 应用程序。

有多种方法可以做到这一点：

*   [ActiveMQ AJAX](https://activemq.apache.org/ajax.html) - 直接从浏览器中的 javascript 发布和订阅 JMS 事件。这是非常基本的，比其他方法少花哨，但由于它很简单，如果你 a) 已经使用 activemq，b) 像没有太多抽象层，可能是一个很好的基础
*   [Atmosphere](https://github.com/Atmosphere/atmosphere/wiki) - 基于事件的框架，可以根据当前使用的网络服务器和浏览器自动检测最佳通信机制。一个相当不错的框架，它支持各种[浏览器和网络服务器，甚至低至 IE6](https://github.com/Atmosphere/atmosphere/wiki/Supported-WebServers-and-Browsers)。还有[一些将 Atmosphere 与 spring MVC 和 Spring Integration 结合使用](https://github.com/ghillert/spring-atmosphere-samples)的示例。
*   [Cometd](http://cometd.org/) - 基于 jetty/hightide 的 Bayeux 协议（自动协商最佳连接类型）的实现。Jetty 是第一个支持延续的 Java 网络服务器，现在是最新的 Servlet 规范的一部分。Cometd 使用 Jetty 并用 JS 客户端库将其包装起来，以便自动检测到浏览器的最佳连接机制。
*   [Vert.x](http://vertx.io/) - 您可以在其上构建的基于事件的服务器平台。最近 Vert.x 的作者离开 VMware 时，引起了一些争议，但 VMware 保留了该项目。现在看起来版本 2 将从 Eclipse 基金会发布。看起来很有前途，但水平很低。不是你刚刚插入现有的 java web 应用程序的那种东西。
*   [HTML5 EventSource](http://www.html5rocks.com/en/tutorials/eventsource/basics/) - 向浏览器发送事件的基于标准的方式。没有将事件发送回服务器的机制。这很有趣，但鉴于您需要为 IE6、IE7 和 IE8 实现回退，目前它可能不是您的最佳选择。

最后，我认为对于作者的问题，集成到[spring-mvc](/questions/tagged/spring-mvc "显示标记为“spring-mvc”的问题")项目中，Atmosphere 显然是最合适的。

编辑：错别字

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-23T16:58:32.740

我使用[Atmosphere](https://github.com/Atmosphere/atmosphere)来做到这一点。如果浏览器支持，它会使用 WebSockets，如果不支持，它会很好地回退到轮询。他们还有一个不错的 jQuery 插件，让生活变得简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T08:49:04.247

我建议您使用[Long Polling](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery) aka `Comet`。我用它来向客户端抛出随机数。你也可以参考[这个](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T09:42:01.043

我们长期以来一直使用 XMPP 来支持推送通知，但是维护一个[Ejabber](http://www.ejabberd.im/)服务器（或其他）非常困难。

此外，实际上我们已经转移到具有客户端和服务器实现的[socket.io](http://socket.io/)，但是您必须维护 nodejs 服务器并开始使用 js。

我还在一个项目中测试了[faye](http://faye.jcoglan.com/)，并且非常适合 Ruby 环境。

但最后，我认为更好的解决方案是使用一个可以嵌入到服务器（java）中的库而忘记其他技术，我认为[Atmosphere](https://github.com/Atmosphere/atmosphere)也是一个很好的客户端和服务器解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T09:07:18.550

我的建议是使用基于发布-订阅的[MQTT](http://mqtt.org/software)中间件或 XMPP 协议。如果您计划发送小块消息，那么使用 MQTT 将是最合适的，因为它是最轻量级的方式。它有很多客户端库，包括 javascript，并且非常易于开发和管理。

# php - 从固定目录上传php文件

> ID：14474278
> 
> 赞同：1
> 
> 时间：2013-01-23T07:12:39.503
> 
> 标签：php, html

我希望用户必须从他/她的`C`驱动器上传文件，他们不能从其他驱动器上传文件。

我的上传代码在这里。

```
<form action="upload.php" method="post" enctype="multipart/form-data">
File: <input type="file" name="filename" />
<input type="submit" value="Upload" />
</form> 
```

和

```
$file_name = $_FILES['fupload']['name'];

$file_type = $_FILES['fupload']['type'];

print "Path: ".$_FILES['fupload']['tmp_name']."<br />";

print "Name: $file_name <br />";

print "Size: ".$_FILES['fupload']['size']."<br />";

print "Type: $file_type <br />";

if(copy($_FILES['fupload']['tmp_name'], "$file_name"))
{
    print "Upload Success";
}
else
{
    print "Error occur";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:16:43.093

无法强制用户从特定驱动器上传文件。

查看 php.net 中的此链接：[**$_FILES**](http://php.net/manual/en/reserved.variables.files.php)

您可以了解有关上传文件的所有信息：

```
 [name] => 400.png // file name
 [type] => image/png // file type
 [tmp_name] => /tmp/php5Wx0aJ // file temp name
 [error] => 0 // file uploading error
 [size] => 15726 // file size 
```

对于 JavaScript，你可以看到这个问题：[**Javascript: Listing File and Folder Structure**](https://stackoverflow.com/questions/10774377/javascript-listing-file-and-folder-structure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:25:31.440

如果你能得到文件的绝对路径，你就可以做你想做的事。如果你能得到文件的绝对路径，如果路径不是“C:\”，你可以做一个简单的相等性测试。

但是出于安全目的，内置的输入类型文件不会给您任何提示。

如果您可以制作自己的上传表单，那么您可以，但使用输入类型文件是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:12:34.690

您可以编写/使用在客户端处理上传的 Java Applet。在那里您可以检查实际的文件路径。但是，如果用户只是在上传文件之前将文件复制到 C:，那将无济于事。我认为尝试这个没有任何意义。

仅使用 HTML/JavaScript/PHP 是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:11:35.237

```
This is only possible IE.

<head>
    <script type="text/javascript">
        function CheckAndSubmit () {
            var uploadForm = document.getElementById ("uploadForm");
            var uploadFile = document.getElementById ("uploadFile");
            var fileinfo = document.getElementById ("fileloc");

            if (uploadFile.value.length == 0) {
                alert ("Please specify the path to the file to upload!");
                return;
            }
            //alert(document.uploadForm.uploadFile.value);

            fileinfo.value=uploadFile.value;

            uploadForm.submit ();
        }
    </script>
</head>
<body>
    <?php
        //if(isset($_POST['uploadFile']))
            print_r($_POST);
    ?>
    <form id="uploadForm" name="uploadForm" method="post" enctype="multipart/form-data" action="">
        Select a file: <input type="file" name="uploadFile" id="uploadFile" size="25" />
        <input type="hidden" id="fileloc" name="fileloc" value="" />
        <br /><br />
        <input type="button" value="Upload" onclick="CheckAndSubmit ()"/>
    </form>
</body> 
```

如果未显示完整路径>> 1\. 打开 Internet Explorer 互联网选项>安全>自定义级别> 2\. 然后在上传时启用包含本地目录文件路径....

享受...

# c# - Visual Studio 中项目类型的预处理器符号

> ID：14474279
> 
> 赞同：0
> 
> 时间：2013-01-23T07:12:41.187
> 
> 标签：c#, visual-studio, compilation, symbols

是否有任何预定义的预处理器符号来查找 VS2010 中的当前项目类型，我可以使用它来有条件地编译一段代码？目前，我通过在项目属性中定义自己的条件编译符号来实现它，但想知道是否有一个内置符号（就像 DEBUG 和 TRACE）可以用来做同样的事情。例如：

```
#if(WIN_FORMS_PROJECT)
    System.Windows.Forms.MessageBox.Show("WINFORMS");
#else
    Console.WriteLine("CONSOLE"); 
```

目前，我已经在 WinForms 项目的符号中定义了自己的符号 WIN_FORMS_PROJECT，但想知道是否有它和其他项目类型的内置符号。

# java - 通过 java 代码执行 Modeller 软件的 script.py

> ID：14474284
> 
> 赞同：0
> 
> 时间：2013-01-23T07:12:55.800
> 
> 标签：java, python, bioinformatics

脚本文件

```
# Homology modeling by the automodel class
from modeller import *              # Load standard Modeller classes
from modeller.automodel import *    # Load the automodel class

log.verbose()    # request ver`enter code here`bose output
env = environ()  # create a new MODELLER environment to build this model in

# directories for input atom files
env.io.atom_files_directory = './:../atom_files'

a = automodel(env,
alnfile  = 'align.ali',     # alignment filename
knowns   = '1GJZ',              # codes of the templates
sequence = 'target')              # code of the target

a.starting_model= 1       
a.ending_model= 10           # index of the first model
# (determines how many models to calculate)
a.make()                            # do the actual homology modeling 
```

代码

```
import java.io.*;

public class Demo 
{

        public static void main(String args[])
        {

        try 
        {
Runtime r = Runtime.getRuntime();
Process p = r.exec("cmd /c \"C:/model2/script.py\"");
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line = "";
while ((line = br.readLine()) != null) {
    System.out.println(line);
}
} 
catch (Exception e) 
{
e.printStackTrace();
}
        }
    } 
```

输出

```
 MODELLER 9.10, 2011/09/28, r8346

 PROTEIN STRUCTURE MODELLING BY SATISFACTION OF SPATIAL RESTRAINTS

                 Copyright(c) 1989-2011 Andrej Sali
                        All Rights Reserved

                         Written by A. Sali
                           with help from
       B. Webb, M.S. Madhusudhan, M-Y. Shen, M.A. Marti-Renom,
            N. Eswar, F. Alber, M. Topf, B. Oliva, A. Fiser,
                R. Sanchez, B. Yerkovich, A. Badretdinov,
                  F. Melo, J.P. Overington, E. Feyfant
             University of California, San Francisco, USA
                Rockefeller University, New York, USA
                  Harvard University, Cambridge, USA
               Imperial Cancer Research Fund, London, UK
          Birkbeck College, University of London, London, UK 
```

错误

```
iodataW> Setting io.atomfilesdirectory to a colon-delimited string is deprecated, as it is not robust on Windows systems. Set it to a list of directories instead. For example: env.io.atomfilesdirectory = ['./', '../atomfiles'] openf__E> Cannot open file align.ali: No such file or directory; 
```

正如我们在输出部分看到的那样，这段代码正在访问建模程序，一旦它开始执行，它就会给出错误**align.ali not found**正如我们在错误部分中看到的那样。它作为独立`script.py`文件运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:36.473

它看起来像一个路径问题。您是否尝试`align.ali`在 python 脚本中使用绝对路径？

# php - 我的饼干在哪里？

> ID：14474287
> 
> 赞同：0
> 
> 时间：2013-01-23T07:13:00.530
> 
> 标签：php, cookies

我在 login.php 中有这段代码

```
if ( $sth->execute() ) {
    $row = $sth->fetch(PDO::FETCH_ASSOC);
    if ( $row ) {
        var_dump($row); // See below
        $_SESSION['login'] = $row['login'];
        setcookie('login', $row['login'], time() * 7 * 24 * 60 * 60);
        if ( $row['right'] == ACCESS_ADMIN ) {
            echo "true"; // true
            $_SESSION['right'] = ACCESS_ADMIN;
            setcookie('right', $row['login'], time() * 7 * 24 * 60 * 60);
        }
    }
}

var_dump($row) - array(3) 
{ 
    ["login"]=> string(6) "phplox"
    ["password"]=> string(32) "827ccb0eea8a706c4c34a16891f84e7b"
    ["right"]=> string(5) "admin" 
} ?>
<br> 
```

好的没问题。转到 index.php。

```
<?php var_dump($_COOKIE) ?> `// array(1) { ["PHPSESSID"]=> string(26) "o05mr9luc2ok8ieadss4v9mhg0" }` 
```

但如果

```
<?php var_dump($_SESSION) ?> // 
```

结果是：

```
array(3) 
{
    ["request_token"]=> string(32) "335f1dcd4283889f0f2fe602cfa36d71"
    ["login"]=> string(6) "phplox" ["right"]=> string(5) "admin" 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:20:45.790

在设置 cookie 之前，您不能发送任何输出。Cookie 是通过 HTTP 标头发送的，因此必须在将任何输出发送到浏览器之前发送它们。在这里，你回显了一些东西，然后尝试设置 cookie：

```
 echo "true"; // <--- REMOVE THIS
            $_SESSION['right'] = ACCESS_ADMIN;
            setcookie('right', $row['login'], time() + (7 * 24 * 60 * 60)); // add to the time, don't multiply time() 
```

您还可以检查 的返回值，如果输出已发送`setcookie()`，则返回布尔值。`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:23:38.477

这：

```
time() * 7 * 24 * 60 * 60 
```

溢出，所以它环绕`int`值并创建一个引用过去的值，因此浏览器不会创建 cookie。将其更改为：

```
time() + 7 * 24 * 60 * 60 
```

此外，正如 MrCode 所说，除非您使用`ob_start()`.

希望这可以帮助

# html5-canvas - 如何在画布中生成自定义矢量图形？

> ID：14474290
> 
> 赞同：0
> 
> 时间：2013-01-23T07:13:20.230
> 
> 标签：html5-canvas

我想创建一个显示矢量曲线的自定义参数函数，如贝塞尔曲线。由于它是参数化的，我无法评估每个像素上的曲线。如何显示这样的曲线？

这是我尝试创建不规则的贝塞尔曲线（宽度变化）。它是一系列不同半径的圆。

```
CanvasRenderingContext2D.prototype.bezierInk = function(x0, y0, x1, y1, x2, y2, x3, y3, size, steps, random = 1.0) {
  for (var i = 0; i <= 1; i += 1 / steps) {
    var radius = size * (1 - random * Math.random());
    var x = x0 * (1 - i) * (1 - i) * (1 - i) + 3 * x1 * i *(1 - i) * (1 - i) + 3 * x2 * i * i * (1 - i) + x3 * i * i * i; // Bézier
    var y = y0 * (1 - i) * (1 - i) * (1 - i) + 3 * y1 * i *(1 - i) * (1 - i) + 3 * y2 * i * i * (1 - i) + y3 * i * i * i; // Bézier
    this.moveTo(x + radius, y);
    this.arc(x, y, radius, 0, 2 * Math.PI);
  }
  this.fill();
  this.moveTo(x3, y3);
} 
```

我有两个问题：

*   由于该函数是参数化的，因此圆圈不会均匀地放置在曲线上。
*   必须设置该`steps`参数以定义圆彼此之间的距离。

示例： http: [//jsfiddle.net/Scagj/](http://jsfiddle.net/Scagj/)（尝试更改`steps`、try`10`和的值`1000`）。

如何显示正常的贝塞尔曲线？我认为它不是逐像素的……</p>

# java - Java的轻量级工作流引擎

> ID：14474294
> 
> 赞同：40
> 
> 时间：2013-01-23T07:13:29.027
> 
> 标签：java, workflow, jbpm, activiti

是编写一个新的工作流引擎还是使用现有的 BPM 引擎更好：jBPM 5、Activiti 5？

我的应用程序是基于 Web 的应用程序，性能很重要。我怀疑与编写简单的工作流引擎相比，使用 jBPM/Activiti 是否会带来性能开销。

如果我进行自我实现，我会错过工作流程的可视化。为了性能，它可以交易。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-12T09:42:54.237

我同意那些已经在这里发布回复的人，或者他们的部分回复：P，但是在我目前工作的公司中，我们遇到了类似的挑战，我冒昧地根据我们的经验发表了我的意见。

我们需要迁移在生产相关应用程序中使用 jBPM 工作流引擎的应用程序，并且由于在维护应用程序方面存在不少挑战，我们决定看看市场上是否有更好的选择。我们来到了已经提到的列表：

*   [Activiti](http://www.activiti.org)（计划通过原型进行尝试）
*   [Bonita](http://www.bonitasoft.com)（计划通过原型进行尝试）
*   [jBPM](http://www.jboss.org/jbpm/)（由于过去的经验而被取消资格）

我们决定不再使用 jBPM，因为我们对它的最初体验并不是最好的，除此之外，每个新版本的发布都破坏了向后兼容性。

最后，我们使用的解决方案是开发一个轻量级的工作流引擎，基于具有活动和流程作为抽象的注释。它或多或少是一台状态机来完成它的工作。

在讨论工作流引擎时值得一提的另一点是它们依赖于支持数据库的事实——我有使用过的两个工作流引擎（[SAG webMethods](http://www.softwareag.com/corporate/products/wm/default.asp)和[jPBM](http://www.jboss.org/jbpm/)）就是这种情况——根据我的经验，这有点有点开销，尤其是在版本之间的迁移期间。

所以，我想说，使用工作流引擎只适用于真正从中受益的应用程序，并且应用程序的大部分工作流都围绕工作流本身旋转，否则会有更好的工具来完成这项工作：

*   向导（[Spring Web Flow](http://projects.spring.io/spring-webflow/)）
*   自建[状态机](http://en.wikipedia.org/wiki/Finite-state_machine)

关于状态机，我遇到了[这个](https://stackoverflow.com/questions/25581176/java-enum-based-state-machine-fsm-passing-in-events)响应，其中包含相当完整的状态机 Java 框架集合。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-09-14T14:34:07.637

Activiti、Bonita 或 jBPM 等基于 Java 的工作流引擎支持广泛的 BPMN 2.0 规范。因此，您可以以图形方式对流程进行建模。此外，其中一些引擎具有模拟功能，如 Activiti（使用 Activiti Crystalball）。如果您自己对流程进行编码，那么当您需要更改流程时，您就不会那么灵活了。因此，我还建议使用基于 Java 的 BPM 引擎。

我对基于 BPMN 2.0 的开源引擎进行了研究。以下是与我们的具体用例相关的关键点：

**1\. 博尼塔：**

Bonita 采用零编码方法，这意味着它们提供了一个易于使用的 IDE 来构建您的流程，而无需编码。为此，Bonita 提出了连接器的概念。例如，如果您想使用 Web 服务，它们会为您提供图形向导。缺点是您必须手动编写纯 XML SOAP 信封并将其复制到图形文本框中。这种方法的问题在于，您只能实现 Bonita 预期的用例。如果你想集成一个 Bonita 没有为其开发连接器的系统，你必须自己编写这样的连接器，这是非常痛苦的。例如，Bonita 提供了一个 SOAP 连接器来使用 SOAP Web 服务。此连接器仅适用于 SOAP 1.2，但不适用于 SOAP 1.1 ([http://community.bonitasoft.com/answers/consume-soap-11-webservices-bonita-secure-web-service-connector](http://community.bonitasoft.com/answers/consume-soap-11-webservices-bonita-secure-web-service-connector)）。如果您有一个带有 SOAP 1.1 的遗留应用程序，那么您无法轻松地将这个系统集成到您的流程中。数据库也是如此。专用数据库版本只有几个数据库连接器。如果您的版本与连接器不匹配，则必须自己编写代码。

此外，Bonita 在免费社区版中不支持 LDAP 或 Active Directory Sync，这对于生产环境来说是一个相当不错的选择。另一件需要考虑的事情是，Bonita 是根据 GPL / LGPL 许可证获得许可的，当您想将 Bonita 集成到另一个企业应用程序中时，这可能会导致问题。此外，社区支持非常薄弱。有几个帖子已超过 2 年，这些帖子仍未得到答复。

另一个重要的事情是业务-IT-对齐。建模流程是 IT 和业务分析师参与其中的协作学科。这就是为什么您需要为两个用户组提供足够的工具（例如，为开发人员提供的 Eclipse 插件和为业务人员提供的易于使用的 Web 建模器）。Bonita 只提供 Bonita Studio，需要安装在你的机器上。这个IDE技术性很强，不适合商业用户。因此，很难与 Bonita 实现 Business-IT-Alignment。

Bonita 是一个 BPM 工具，用于非常琐碎和简单的流程。由于零编码方法，学习曲线非常低，您可以非常快速地开始建模。您需要较少的编程技能，并且无需编码即可实现您的流程。但是一旦您的流程变得非常复杂，由于缺乏灵活性，Bonita 可能不是最佳解决方案。您只能实现 Bonita 预期的用例。

**2\. jBPM：**

jBPM 是一个非常强大的开源 BPM 引擎，它有很多特性。Web 建模器甚至支持一些 van der Aalst 工作流模式的预制模型 (workflowpatterns.com)。Business-IT-Alignment 是可以实现的，因为 jBPM 提供了 Eclipse 集成以及基于 Web 的建模器。有点棘手的是，据我所知，您只能在 Web 建模器中定义表单，而不能在 Eclipse 插件中定义。总而言之，jBPM 是在公司中使用的不错选择。我们最引人注目的是可扩展性。jBPM 基于规则引擎 Drools。这导致整个流程实例在数据库中作为 BLOBS 持久化。当您考虑搜索和可扩展性时，这是一个重要的展示因素。

此外，由于复杂性，学习曲线非常高。jBPM 不像 BPMN-Standard 建议的那样提供服务任务。相反，您必须定义自己的 Java 服务任务，并且必须在引擎中手动注册它们，这会导致编程非常低级。

**3.活动：**

最后，我们选择了 Activiti，因为这是一个非常易于使用的基于框架的引擎。它提供了一个 Eclipse 插件以及一个现代的 AngularJS Web-Modeler。这样，您就可以实现Business-IT-Alignment。REST-API 由 Spring Security 保护，这意味着您可以使用单点登录功能非常轻松地扩展引擎。由于 Apache 许可证 2.0，没有 copyleft，这意味着您在使用和可扩展性方面完全免费，这在生产环境中非常重要。

此外，BPMN-coverage 非常好。并非所有 BPMN 元素都已实现，但我不知道有任何引擎可以做到这一点。

Activiti Explorer 是一个演示前端，它演示了 Activiti API 的使用。由于此前端基于 VAADIN，因此可以非常轻松地进行扩展。社区非常活跃，这意味着如果您有任何问题，可以非常快速地获得帮助。

Activiti 为外部表单技术提供了良好的集成点，这对于生产使用非常重要。所有候选人的形式技术都​​非常严格。因此，将 XForms 之类的标准表单技术与 Engine 结合使用是有意义的。甚至这样更复杂的事情也可以通过 formKey-Attribute 来实现。

Activiti 不遵循零编码方法，这意味着如果您想编排服务，您将需要一些编码。但即使是与 SOAP 服务的通信也可以通过使用 Java 服务任务和 Apache CXF 来实现。编码工作量很低。

我希望我的关键点可以帮助您做出决定。需要明确的是，这不是 Activiti 的广告。正确的产品选择取决于具体的用例。我只想指出我们项目中最重要的几点

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-23T12:36:27.663

这真的取决于你的要求。首先，看看你是否真的需要一个工作流引擎（[这个](https://stackoverflow.com/questions/2353564/what-problems-have-you-solved-using-a-workflow-engine)或其他来源）。除非你真的需要它，否则你应该避免它。

如果你真的需要提供工作流引擎的东西，我会选择一个已经构建好的。使用 jbpm 或 activiti 的人在构建工作流引擎方面比你有更多的经验，所以它可能已经被调整以提高性能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-05T21:02:05.400

我最近开源了 Piper ( [https://github.com/creactiviti/piper](https://github.com/creactiviti/piper) ) 一个分布式的、非常轻量级的、基于 Spring 的工作流引擎。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-23T02:58:39.060

我想添加我的评论。当你选择了一个现成的引擎，比如jBPM、Activity等（有很多），那么你必须花一些时间学习系统本身，这可能不是一件容易的事。特别是当您只需要自动化一小段代码时。

然后，当出现问题时，您必须处理供应商的支持，这并不像您想象的那么快。甚至支付一些咨询费用。

最后，一个最重要的原因，你必须在引擎的生态系统中发展。尽管供应商倾向于说他们的系统可以灵活地集成到任何系统中，但情况可能并非如此。最终，您最终会重新编写应用程序以匹配 BPM 生态系统。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-29T22:05:09.503

问题是当您要求使用工作流引擎时，您真正想要实现什么。

您希望通过使用工作流引擎实现的总体目标是在运行时更灵活地更改业务逻辑。建模部分肯定是这里最重要的部分之一。BPMN 2.0 是该领域的事实标准，所有讨论的引擎都支持该标准。

第二个目标是以描述*“当……时应该发生什么”*问题的方式来控制业务流程。这部分与您在项目中面临的业务需求有很大关系。

一些工作流引擎（[Activity](http://www.activiti.org/)，[JBPM](http://www.jbpm.org/)）可以帮助您通过“编码”您的流程来满足此要求。这意味着您以某种方式对*“何时应该发生什么”*范式进行建模，您可以在其中决定在各种情况下工作流引擎应执行代码的哪一部分（例如任务或事件）。关于这个概念的讨论很多。开发人员自然会问，这可能连自己都不能实现。（实际上并不像乍一看那么容易）

其他一些工作流引擎（[Imixs-Workflow](http://www.imixs.org)、[Bonita](http://www.bonitasoft.com/)）可以帮助您以更加以用户为中心的方式回答*“当......时应该发生什么”的*要求。这是以人为中心的业务流程管理领域，它通过面向任务的工作流引擎支持人的技能和活动。重点更多地放在组织内部的任务和流程的分配上。工作流引擎可帮助您将任务分配给特定用户或用户组，并保护、记录和监控长期运行的业务流程。也许这些是您并不想自己实现的东西。

所以我的建议是，不要把需要单独考虑的东西混在一起，因为工作流程涵盖了非常广泛的领域。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-25T16:08:21.320

是的，在我看来，你没有理由自己写。大多数开源 BPM/工作流框架都非常灵活，您只需要学习基础知识。如果您选择 jBPM，您将获得的不仅仅是一个简单的工作流引擎，因此这取决于您要构建什么。

干杯

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-27T18:29:15.433

我建议您使用开箱即用的解决方案。鉴于工作流引擎的开发需要大量的资源和时间，现成的引擎是更好的选择。看看[工作流引擎](https://workflowengine.io/)。它是一个轻量级组件，使您能够将任何复杂性的自定义可执行工作流添加到任何 Java 解决方案中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-05T16:34:35.117

CamundaBPM 是一种选择。你可以在这里查看： [https ://camunda.com/](https://camunda.com/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-25T07:56:57.490

我在工作中也必须这样做。我入围了 Activiti、Camunda 和 jBPM，因为它们是业内最强大的开源工作流引擎之一，可以处理复杂的企业流程。它们都受 Apache 许可条款的约束。

Activiti 是从 jBPM 分支出来的，而 Camunda 是从 Activiti 分支出来的。

在建模器方面，Activiti 和 jBPM 有基于 Web 的建模器，而 Camunda 有一个桌面建模器。Activiti 和 jBPM 也提供 Eclipse 插件，而 Camunda 没有。Activiti 和 Camunda 的建模者使用 BPMN.IO 工具包。如果您需要在您的 web 应用程序中嵌入工作流模型，您可以查看以下链接

*   [https://github.com/zeebe-io/zeebe-modeler/issues/127#issuecomment-541720686](https://github.com/zeebe-io/zeebe-modeler/issues/127#issuecomment-541720686)
*   [https://docs.camunda.org/manual/latest/user-guide/process-engine/process-diagram-api/](https://docs.camunda.org/manual/latest/user-guide/process-engine/process-diagram-api/)
*   [https://bpmn.io/toolkit/bpmn-js/walkthrough/#viewer-pre-packaged](https://bpmn.io/toolkit/bpmn-js/walkthrough/#viewer-pre-packaged)

如果你想要 spring 支持，你最好的选择是 Camunda，因为 Activiti 在他们的文档中提到他们的 Spring 支持是实验性的，而 jBPM 不提供原生 spring 支持

在开发者友好性方面，Activiti 和 Camunda 拥有良好的文档和活跃的社区来帮助您入门。我发现 Camunda 的文档真的很有帮助。但是，我听说 jBPM 的文档没有帮助，而且很难集成。

在性能方面，Camunda 超过了 Activiti 和 jBPM。有科学证据表明，Camunda BPMN 引擎的性能优于 Activiti 引擎。Camunda BPM 7 的性能比 JBoss jBPM 6 好 10 倍。因此，从性能角度来看，Camunda 是最佳选择。

Camunda 提供了比 Activiti 更高的 BPMN 覆盖（几乎完整的 BPMN 覆盖）。与 Activiti 和 jBPM 不同，Camunda 有一个健壮的持久层并提供高级死锁预防。而在使用 Activiti 时，进程内实例事务在高并发下仍然会死锁。

Camunda BPM 7 的战略目标是“开发人员友好”，而 JBoss jBPM 6 则致力于“零代码 BPM”的理想。Camunda BPM 7 提供了 JBoss jBPM 6 所缺少的创新、强大的功能，例如 CMMN、驾驶舱和容器支持。

由于 Camunda 的性能优于这两种替代方案并且具有很高的可用性，我推荐 Camunda。

我通过这些网站获取信息，您可以访问它们

*   [http://www.bpm-guide.de/2016/10/19/5-reasons-to-switch-from-activiti-to-camunda/](http://www.bpm-guide.de/2016/10/19/5-reasons-to-switch-from-activiti-to-camunda/)
*   [https://camunda.com/blog/2016/10/camunda-engine-since-activiti-fork/](https://camunda.com/blog/2016/10/camunda-engine-since-activiti-fork/)
*   [https://www.javatpoint.com/jbpm-vs-activiti](https://www.javatpoint.com/jbpm-vs-activiti)
*   [https://assets.ctfassets.net/vpidbgnakfvf/1U7qZ7K1mMe2KC2yc6SKS4/baae9bf532175576​​38bee90ebba13442/Camunda_vs_JBoss_jBPM_EN.pdf](https://assets.ctfassets.net/vpidbgnakfvf/1U7qZ7K1mMe2KC2yc6SKS4/baae9bf53217557638bee90ebba13442/Camunda_vs_JBoss_jBPM_EN.pdf)
*   [https://medium.com/capital-one-tech/comparing-and-contrasting-open-source-bpm-projects-196833f23391](https://medium.com/capital-one-tech/comparing-and-contrasting-open-source-bpm-projects-196833f23391)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-22T14:25:39.937

你可以看看@Apache Ant 来构建一个工作流引擎。它更加健壮，并且是一个纯状态机，已经内置了大部分所需的需求。

除此之外，您还可以在 Java/Groovy/JS 语言中嵌入不同的动态代码/脚本，因此它非常强大。它还允许任务扩展。

它周围有相当多的工具，或者如果需要 IDE，您可以在它之上构建。

更新：Spring 状态机也可用，重量相对轻且不臃肿：[https ://projects.spring.io/spring-statemachine/](https://projects.spring.io/spring-statemachine/)

# java - 为什么 finalize() 不会像 java 中的构造函数那样自动调用其父 finalize()？

> ID：14474295
> 
> 赞同：1
> 
> 时间：2013-01-23T07:13:38.700
> 
> 标签：java, jdk1.6, finalizer

我已经重写了该`finalize()`方法以在重新声明对象的内存空间的同时做一些工作。但是有人说我必须`finalize()`在重写该方法中调用`finalize()`父级。但是*构造函数*会自动调用它与方法不同的*超类构造函数。*`finalize()`

你能告诉我一些关于这...？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T07:15:46.183

它在[Java 语言规范 #12.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.6-400)（强调我的）中是这样定义的：

> 在 Object 类中声明的 finalize 方法不执行任何操作。Object 类声明了 finalize 方法这一事实意味着任何类的 finalize 方法总是可以调用其超类的 finalize 方法。应该始终这样做，除非程序员的意图是取消超类中终结器的操作。（**与构造函数不同，终结器不会自动调用超类的终结器；这样的调用必须显式编码。**）

# c# - wmi 和网络驱动器

> ID：14474296
> 
> 赞同：0
> 
> 时间：2013-01-23T07:13:40.563
> 
> 标签：c#, permissions, wmi, wmi-service

我有一个使用 WMI 在远程机器上做事的应用程序。其中一件事是运行一个脚本，该脚本将输出写入高清文件。

如果我选择将输出保存在远程机器的本地驱动器上 - 一切正常。但是，如果我尝试将它们保存在网络驱动器上，即使是我拥有完全权限的驱动器 - 它也会失败。

在打破我的头之后，我想出了我认为的问题所在。WMI 服务是否可能必须对网络驱动器具有权限才能执行此类操作？如果是这样，关于如何做到这一点的任何想法？

# winforms - 跨表单使用变量

> ID：14474297
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:13:47.080
> 
> 标签：winforms, variables

我有一个字符串变量 SuppCode，我在 Form1 中分配了它。我想在 Form2 的 Switch 语句中使用这个变量。我试过使用`public string SuppCode;`，但我仍然`The name 'Switch' does not exist in the current context error`在开关中得到一个。我需要更改哪些内容才能使用 SuppCode Form2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:28:26.947

Form1 是 Form2 的所有者吗？我的意思是，你使用 instanceOfForm2.Show(instanceOfForm1); 或 instanceOfForm2.ShowDialog(instanceOfForm1); 显示Form2？如果是，你可以这样做：

```
 string s = ((Form1)this.Owner).SuppCode; 
```

从 Form2 访问您的变量

**编辑：** 您的表单在使用方法显示时已设置所有者：

```
Form1 form1 = new Form1();
Form2 form2 = new Form2()
form2.Show(form1);
//or
form2.ShowDialog(form1); 
```

然后 form2 将 Owner 属性设置为 form1。

您还可以在 Form2 中创建自己的属性来引用您的 form1。

```
class Form2
{
  public Form1 MyFormRef{get;set;}

  public Form2(){/*...*/}
  // or:
  public Form2(Form1 formref)
  {
     this.MyFormRef = formref;
  }

  private string getSuppCode()
  {
    if(this.MyFormRef!=null)return this.MyFormRef.SuppCode;
    else return null;
  }
} 
```

利用：

```
Form1 form1 = new Form1();
Form2 form2 = new Form2();
form2.MyFormRef = form1; 
```

或者：

```
Form1 form1 = new Form1();
Form2 form2 = new Form2(form1); 
```

# java - 如何编写递归方法来检查这种情况？

> ID：14474298
> 
> 赞同：1
> 
> 时间：2013-01-23T07:13:55.127
> 
> 标签：java, recursion

这是我的场景。我有以下对象；

```
public class MyTemplate{

private MyTemplate[]childTemplates;
} 
```

现在在同一个类中，我有一个数组来保存同一个对象的子元素，在这种情况下是一个模板。我需要的是能够遍历每个元素和这些元素中的元素，因为这可以像一个树结构。目前我想不出一种方法可以覆盖元素中的每个子元素。

感谢是否有人可以指导我正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T07:16:19.773

像这样？

```
public class MyTemplate
{
  private MyTemplate[] childTemplates;

  void iterate()
  {
    // do something with this
    for (MyTemplate template: childTemplates)
      template.iterate();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:27:17.547

尝试这个：

```
public traverse() {
    if(children == null || children.size == 0) {
        return;
    }
    for(i = 0; i < children.size; i++) {
       children[i].doSomething();
       children[i].traverse();
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:24:27.710

您还可以对每个模板执行一个过程：

```
public class MyTemplate
{
  private MyTemplate[] childTemplates;

  void iterate()
  {
    preProcess();
    for (MyTemplate template: childTemplates)
      template.iterate();
    postProcess();
  }

  void preProcess()
  {
    // do something before iterating through the children
  }

  void postProcess()
  {
    // do something afterwards
  }

} 
```

# php - 使用 XPath 处理多个 XML 文件

> ID：14474304
> 
> 赞同：-2
> 
> 时间：2013-01-23T07:14:58.357
> 
> 标签：php, mysql, xml

我想使用方法将多个 XML 文件中的多个节点值插入 MySQL `xpath`。代码如下：

```
<?php 
$path="fs/";
$con = mysql_connect("localhost","sufi","1234"); 
if (!$con) { 
    die('Could not connect: ' . mysql_error()); 
} 
mysql_select_db("test", $con);
if ( $handle = opendir($path) ) { 
     $files = array(); 
     while ( ($file = readdir($handle)) !== false ) { 
           $files[] = $file; 
     } 
     sort($files); 
     foreach ( $files as $file ) {
         $xml = simplexml_load_file("$file"); 
         $products[0] = (string)current($xml->xpath("/sioct:BoardPost/sioc:content"));
         $products[1] = (string)current($xml->xpath("/sioct:BoardPost/dcterms:created")); 
         $products[2] = (string)current($xml->xpath("/sioct:BoardPost/@rdfabout"));
         extract($products); 
         mysql_query("INSERT INTO forum (txt_content,txt_date,txt_about) 
                      VALUES ( '".mysql_escape_string($products[0])."',
                               '".mysql_escape_string($products[1])."',
                               '".mysql_escape_string($products[2])."')" ); 
     } 
} 
?> 
```

但这给了我以下错误：

> 警告：simplexml_load_file(.) [function.simplexml-load-file]：未能打开流：第 22 行 C:\wamp\www\readfiles.php 中的权限被拒绝，警告：simplexml_load_file() [function.simplexml-load-文件]：I/O 警告：未能加载外部实体“。” 在第 22 行的 C:\wamp\www\readfiles.php 中，致命错误：在第 23 行的 C:\wamp\www\readfiles.php 中的非对象上调用成员函数 xpath()。

请提出一些方法来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:23:16.887

`readdir()`也返回“。” 和“..”，这是错误消息试图在那里告诉你的内容：

> 警告：simplexml_load_file(.) [function.simplexml-load-file]：未能打开流：第 22 行 C:\wamp\www\readfiles.php 中的权限被拒绝，警告：simplexml_load_file() [function.simplexml-load-文件]：I/O 警告：**未能加载外部实体“。”** 在第 22 行的 C:\wamp\www\readfiles.php 中，致命错误：在第 23 行的 C:\wamp\www\readfiles.php 中的非对象上调用成员函数 xpath()

您可以`glob`改用：

```
foreach(glob($path . "/*.xml") as $file) 
```

# c# - 使用 Bouncy Castle 加密和存储私钥+公钥

> ID：14474308
> 
> 赞同：2
> 
> 时间：2013-01-23T07:15:07.450
> 
> 标签：c#, cryptography, bouncycastle, private-key

我使用 ECKeyPairGenerator 创建了一个 AsymmetricCipherKeyPair，并希望存储私钥和公​​钥。

我找到了以下类和方法来存档它：

```
PrivateKeyFactory.EncryptKey(...)  
EncryptedPrivateKeyInfoFactory.CreateEncryptedPrivateKeyInfo(...) 
```

推荐使用的 API 是什么？

但是应该使用什么算法呢？我测试了“BCObjectIdentifiers.bc_pbe_sha1_pkcs12_aes128_cbc”并得到一个异常“尝试使用非 PBE 算法和 PBE EncryptedPrivateKeyInfo 生成”

我还测试了“PBEWITHSHAAND128BITAES-CBC-BC”，它需要很长时间才能完成。

那么有没有推荐的方法来使用 Bouncy Castle C# 存储（并稍后读入）私钥和公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:33:23.033

你走在正确的轨道上，那些是正确的课程。然而，BC 在基于 AES 的 PBE 加密算法的绑定中存在错误，我刚刚在 CVS 中修复了这些错误。

# php - 如何使用javascript在codeigniter中定位/重定向控制器文件的路径？

> ID：14474311
> 
> 赞同：0
> 
> 时间：2013-01-23T07:15:23.910
> 
> 标签：php, javascript, codeigniter

如何在 codeigniter 中使用重定向控制器文件`javascript`？在这种情况下，我想在弹出窗口中打开一个文件。

这是我的代码：

```
<script>
window.open(
    '<?php echo $this->config->base_url()."contorllers/welcome_pop"?>',
    '', 
    'width=700, height=100, toolbar=0, menubar=0, location=0, 
     status=1, scrollbars=no, resizable=no, left=200, top=200');
</script> 
```

文件名是：

```
controllers/welcome_pop.php 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:25:04.323

你为什么不尝试只调用 url 呢？

```
<script>
window.open(
'/index.php/controller/<function>',
'', 
'width=700, height=100, toolbar=0, menubar=0, location=0, 
 status=1, scrollbars=no, resizable=no, left=200, top=200');
</script> 
```

这是加载welcome_pop 视图的函数（可能是索引）

# android - 如何实现这样的布局

> ID：14474316
> 
> 赞同：0
> 
> 时间：2013-01-23T07:15:49.520
> 
> 标签：android, button, spinner

嘿，大家都是安卓新手

我试图得到这样的布局![图片](../Images/62f2b7c7ae23f92f6c60dfc25bb9cbf4.png)

但我有一些困惑

1.  默认情况下，大于号在 Spinner 中不可用，为此我还尝试了一个按钮并将其背景颜色设置为黄色，但我们只能为 Button 定义一次 android:background，而不是如何定义黄色和大于图像但是在signle android:background 语句中？？？？？？
2.  默认情况下可用的 Seekbar 看起来不像我正在寻找的那个我怎样才能得到我正在寻找的那个？？？？？？

非常感谢这方面的任何帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:26:58.223

您可以使用

```
android:background 
```

对于颜色和

```
android:drawableRight 
```

对于图像:) 如果您希望滑块与您想要的相同，那么您必须为滑块和滑块的手柄使用图像。这需要付出巨大的努力。无论如何，如果您想要一个类似 Iphone 的 UI，然后研究并继续。我最好的祝福：）

# javascript - Backbone.js 将对象从 this 转换为 that 并使用每个 throw 错误调用

> ID：14474317
> 
> 赞同：0
> 
> 时间：2013-01-23T07:16:00.097
> 
> 标签：javascript, backbone.js, backbone-views

在我的主干函数中，我为我创建了一个命名空间，因为`var taskListPhraseI = {};`在使用这个命名空间时，我的所有函数都被分配了。

当我从集合类中获取集合时，使用我传递给的每个函数`renderBoard`，在每个都不会知道`this`这一点上的关键字时，我使用了一个声明为该关键字并分配给它的变量，使用`that`我正在调用该函数，但将`render function`错误抛出为

```
TypeError: that.renderBoard is not a function
[Break On This Error]   

that.renderBoard(item) 
```

但我确实有 renderBoard 功能。任何给我一个线索来解决这个问题？

我的部分代码：

```
 taskListPhraseI.allView = Backbone.View.extend({
    el:$('.boardHolder'),
    initialize:function(){
      this.collection = new taskListPhraseI.collection();
      this.collection.fetch({success:this.render});
    },
    render:function(data){
      var that = this;
      _.each(data.models, function(item){
          that.renderBoard(item) // throw the error..
      },this);
    },
    renderBoard:function(item){
      console.log('item'); // i am not getting the call here...
    }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:20:08.237

尝试替换`this.collection.fetch({success:this.render});`为`this.collection.fetch({success:_.bind(this.render, this)});`.

您正在传递`this.render`没有上下文的函数，这可以通过[`bind`](http://underscorejs.org/#bind)下划线库来修复。

# jpa - 没有可用的事务性 EntityManager

> ID：14474319
> 
> 赞同：5
> 
> 时间：2013-01-23T07:16:04.540
> 
> 标签：jpa, spring-transactions, spring-test

我是 jpa 和 spring 世界的新手，我目前正在对一个简单的方法进行一些单元测试，但只有当我在单元测试模式下运行我的测试类时才会收到此错误消息：

```
java.lang.IllegalStateException: No transactional EntityManager available
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:223)
at $Proxy19.unwrap(Unknown Source)
at com.gemstone.integration.PersonDao.getPersonByUserNamePassword(PersonDao.java:59)
at com.gemstone.integration.PersonDaoTest.getPersonByUserNamePassword_Exist(PersonDaoTest.java:37)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

但是，当我运行我的项目时，代码工作正常，它可以正确检索数据（不在单元测试模式下）。

请在下面找到我的单元测试将基于的方法：

```
@PersistenceContext
private EntityManager entityManager;
@SuppressWarnings("unchecked")
public boolean getPersonByUserNamePassword(String firsName, String password) {

    String hql = "from Person p where p.firstName = :firsName and p.password =:password";
    Session mysession = entityManager.unwrap(Session.class);

    Query query = mysession.createQuery(hql);
    query.setParameter("firsName", firsName);
    query.setParameter("password", password);
    List<Person> results = query.list();

    if (results != null && results.size() > 0) {

        return true;
    }
    return false;

} 
```

我的单元测试如下：

```
@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class })
@RunWith(SpringJUnit4ClassRunner.class)

@ContextConfiguration(locations = { "classpath:/Intcontext.xml" })

public class PersonDaoTest {

    @Autowired
    PersonDao personDao;

    @Transactional
    @Test
    public void getPersonByUserNamePassword_Exist() {

        String firsName = "Andy";
        String password = "123";

        boolean isUserExists = personDao.getPersonByUserNamePassword(firsName,
                password);

        Assert.assertTrue(isUserExists);
    }

} 
```

有什么想法为什么我会收到 No transactional EntityManager available 错误吗？:(

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:32:36.153

通过声明

```
@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class }) 
```

您完全（尽管是无意的）*禁用*了对测试管理事务的支持。原因是您`TransactionalTestExecutionListener`从声明的侦听器列表中省略了。

但是请注意，`TransactionalTestExecutionListener`默认情况下它是透明地声明的。`@TestExecutionListeners`因此，当您从测试类中删除您的声明时，`TransactionalTestExecutionListener`它会再次启用。

您当然可以[在此处的 Spring 参考手册中](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#testcontext-tx)找到详细信息。

问候，

Sam（Spring TestContext 框架的作者；））

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T07:53:54.200

I think EntityManager is null.Try Like this,may be it work

```
private EntityManager entityManager = null;

@PersistenceContext
public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T17:45:53.213

当我尝试使用 IntelliJ 进行单元测试时，我遇到了类似的问题，即使它`cli`使用`maven-surefire-plugin`

事实证明，IntelliJ 构建使用的是 javac 编译器，即使它在 pox.xml 中指定使用 ajc 编译器，在[IDEA-135483处报告了 IntelliJ 的错误](https://youtrack.jetbrains.com/issue/IDEA-135483)

这使得`@Transactional`不工作，给你`No transactional EntityManager available`

如果这是您的情况，您需要更改 java 编译器以在项目结构中使用而不是`ajc`使用`javac``post-compile weave mode`

# c# - 通过 Linq 订购

> ID：14474320
> 
> 赞同：2
> 
> 时间：2013-01-23T07:16:08.033
> 
> 标签：c#, linq, one-to-many

我与两个实体有一对多关系：

```
Order:
int OrderId 
string OrderNumber
...

OrderItem:
int ItemId
int sequence
decimal Quantity
... 
```

一个`Order`有多个`OrderItems`，我想编写一个 Linq，它返回所有订单及其项目，项目按序列字段排序。如何编写查询，例如以下查询？

```
Order myOrder = db.Orders.Include("OrderItems").Include("sequence").FirstOrDefault(x => x.OrderId == 3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:27:53.707

```
var result = from a in Order 
             join b in OrderItems
                on a.Id equals b.OrderId
             order by b.sequence
             select new
             {     
                 a.Id,
                 b.sequence,
                 ...
             }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T07:30:37.797

```
var temp = db.Orders.Include("OrderItems").Select(q => q.OrderItems.OrderBy(p => 
                     p.sequence)).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:51:26.927

如果不将结果投影到新类型中，您将无法做到这一点。

```
var myOrder= db.Orders.Include("OrderItems")
             .Where(x => x.OrderId == 3)  
             .Select(o => new {
                 order = o,
                 orderItems = o.OrderItems.OrderBy(i => i.sequence)
             }).FirstOrDefault();

// Usage
myOrder.order; // Order

myOrder.order.OrderItems; // OrderItems
myorder.orderItems;  // OrderItems alternative 
```

虽然将其投影到新对象中并不理想，但根据[这篇博客文章](http://blogs.msdn.com/b/alexj/archive/2009/02/25/tip-1-sorting-relationships-in-entity-framework.aspx)，有一个很好的副作用，现在`order.OrderItems`您的匿名对象也将被正确排序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T07:19:40.390

```
var Orders = db.Orders.Include(a => a.OrderItems)
.OrderBy(a => a.OrderItems.sequence).ToList() 
```

我建议使用 lambdas 来避免查询中的魔术字符串。

# multiprocessing - 如何通过android中的多个进程访问数据库/内容提供者。？

> ID：14474321
> 
> 赞同：4
> 
> 时间：2013-01-23T07:16:18.893
> 
> 标签：multiprocessing, android-contentprovider

首先感谢您调查我的问题，我在使用多个进程访问 android ContentProviders 时遇到问题。

问题是这样的，我创建了一个 ContentProvider 类来创建数据库。现在对于这个数据库，我正在使用第一个进程编写一些东西，这个是同步进程，第二件事，我有第二个进程，它将同时从该 ContentProvider 读取数据。在第一个过程完成之前，我无法停止第二个过程，因为在放入 ContentProvider 之前我需要一些数据。，

如何克服这个，需要一些帮助......再次感谢。

# c - C中的静态堆栈操作

> ID：14474323
> 
> 赞同：0
> 
> 时间：2013-01-23T07:16:25.563
> 
> 标签：c, stack

我正在尝试使用 C 中的数组在堆栈上执行所有操作（推送、弹出、窥视、更新、显示）。当我在调用`show()`我需要的所有函数后最后调用 at 时，它工作正常。但是，每当我`show()`在任何操作之前打电话时，它都没有给我适当的结果。我正在使用以下代码：

```
int main()
{
    push(1);
    push(2);
    push(3);
    push(4);
    push(6);
    pop();
    push(5);
    show();//line 8
    //push(7);//line 9
    //pop();
    //peep();
    //update();
    //show();//line 13
    return;
}

void push(int num){//insert an item

    if(top==MAXSIZE-1)
    {
        printf("Overflow condition");
        return;
    }
    top++;
    stack[top]=num;
    //return;
}

void pop()//delete a item from top
{

    int num;
    if(top==-1)
    {
        printf("Underflow condition");
        return;
    }
    num=stack[top];
    top--;
    //return;
}

void show()//display elements
{

    if(top==-1){
        printf("Underflow");
        return;
    }
    while(top!=-1){
        printf("%d\n",stack[top--]);
    }
    //return;
}

void peep()//extract information
{

    int loc,num;
    printf("enter location:\n");
    scanf("%d",&loc);
    if(top-loc+1 < 0)
    {
        printf("No item at the given location\n");
        return;
    }
    else{
        num=stack[top-loc+1];
        printf("\nItem at location %d is %d",loc,num);
    }
}

void update(){//update information

    int loc,item;
    printf("enter new item:");
    scanf("%d",&item);
    printf("enter location:");
    scanf("%d",&loc);
    if(top-loc+1 < 0)
    {
        printf("No item at the given location\n");
        return;
    }
    else{
        stack[top-loc+1]=item;
        printf("\nItem inserted");
    }
} 
```

在这里调用后`show()`，top 将在第 8 行指向 -1(empty)，因此之后将产生以下后果：

*   `push()`将插入位置 1 而不是顶部。
*   `pop()`将显示下溢情况。
*   `peep()`如果条件，更新将进入。

那么如何在调用后将顶部设置为堆栈中的顶部元素`show()`？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:21:33.527

您的 show 功能的一个问题是，它还试图弹出所有数据。你不应该`top--`在你的表演功能中做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T07:24:28.273

您的`show()`方法修改了`top`指针，这是错误的：

```
void show()//display elements
{

    if(top==-1){
        printf("Underflow");
        return;
    }
    while(top!=-1){
        printf("%d\n",stack[top--]); // <--- here 'top--' will modify the top pointer
    }
    //return;
} 
```

您可以像这样更改`show()`方法：

```
void show()//display elements
{

    if(top==-1){
        printf("Underflow");
        return;
    }
    int i = top; // introducing a new variable to iterate through the stack
    while(i!=-1){
        printf("%d\n",stack[i--]); // now 'i' is modified
    }
    //return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T05:17:26.317

//WAP 使用 C 执行堆栈操作-- 1\. Push, 2.pop, 3.peep, 4.change, 5.top-of-stack, 6.is-empty, 7.is-full, 8.display

```
#include<stdlib.h>

#include<stdio.h>

#define max_size 5

int stack[max_size],top=-1,i,x;
    /*------ Function Prototype------------*/
void push();
void pop();
void peep();
void display();
void top_stack();
void change();
void is_empty();
   /*-------------------------------------*/

  int main()
  {
    int choice;

    do{

        printf("\n\n--------STACK OPERATIONS-----------\n");
        printf("1.Push\n");
        printf("2.Pop\n");
        printf("3.Peep\n");
        printf("4.Display\n");
        printf("5.Change\n");
        printf("6.TOP\n");
        printf("7.exit\n");
        printf("-----------------------");
        printf("\nEnter your choice:\t");
        scanf("%d",&choice);

        switch(choice)
       {
        case 1:    push();
                   break;
        case 2:    pop();
                   break;
        case 3:    peep();
                   break;
        case 4:    display();
                   break;
        case 5:    change();
                   break;
        case 6:    top_stack();
                   break;
        case 7:    exit(0);
                   break;
        default:    printf("\nInvalid choice:\n");
                   break;
        }

     }while(choice!=7);
      return 0;
    }

    void push() //Inserting element in to the stack
    {
      int item;
       if(top==(max_size-1))
        {
            printf("\nStack Overflow:");
        }
       else
        {
          printf("Enter the element to be inserted:\t");
          scanf("%d",&item);
          top=top+1;
          stack[top]=item;
         }
     }

     void pop()      //deleting an element from the stack
    {
      int item;
       if(top==-1)
       {
         printf("Stack Underflow:");
       }
       else
       {
         item=stack[top];
         top=top-1;
         printf("\nThe poped element: %d\t",item);
       }
    }

    void peep()
    {            
       printf("enter the i th element");
       scanf("%d",&i);
       if(top-i+1<0)
       {
         printf("\nStack is empty:");
       }
       else
       {
         printf("The topmost element of the stack is %d",stack[top-i+1]);
       }
    }

    void display()
     {
      int i;
        if(top==-1)
        {
         printf("\nStack is Empty:");
        }
        else
       {
        printf("\nThe stack elements are:\n" );
         for(i=top;i>=0;i--)
         {
          printf("%d\n",stack[i]);
          }
        }
     }

    void change()
    {
      printf("enter the i th element");
      scanf("%d",&i);
        if(top-i+1<0)
        {
         printf("\nStack is empty:");
        }
        else
        {
         printf("enter the element to be changed\n");
         scanf("%d",&x);

         stack[top-i+1]=x ;
         printf("The topmost element of the stack is %d",stack[top-i+1]);
        }

    }
    void top_stack()
    {
    int t;
    t=stack[top];
    printf("The Topmost element of stack is =%d",t);

    } 
```

# c# - 在 DevExpress Ribbon Control 中合并 Ribbon Group

> ID：14474331
> 
> 赞同：0
> 
> 时间：2013-01-23T07:17:04.400
> 
> 标签：c#, winforms, devexpress, ribbon

我正在使用 C#、VS 2010 和 DevExpress v10。我正在制作功能区表单，我想在其中合并两个功能区页面组。
我的代码如下：

```
RibbonControl RibbonControl = new RibbonControl();
RibbonPage page1 = new RibbonPage("Home");
RibbonPageGroup group1 = new RibbonPageGroup("File");
RibbonPageGroup group2 = new RibbonPageGroup("new");
this.Controls.Add(RibbonControl);

BarButtonItem itempanel = RibbonControl.Items.CreateButton("Open...");
group1.ItemLinks.AddRange(new BarItem[] { itempanel });
page1.Groups.Add(group1);
page1.Groups.Add(group2);
RibbonControl.Pages.Add(page1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:53:10.117

我不太清楚你想要合并什么，因为[功能区合并](http://help.devexpress.com/#WindowsForms/CustomDocument3451)不能在功能区页面组上执行，而不是在不同的功能区控件本身上执行。

如果您正在谈论构建功能区页面组布局，我建议您查看以下“操作方法”文章：[如何：在代码中创建 RibbonControl](http://help.devexpress.com/#WindowsForms/CustomDocument2513)

如果您正在谈论功能区合并，请查看[如何：合并功能区控件](http://help.devexpress.com/#WindowsForms/CustomDocument7349)一文。

在其他情况下，请直接联系[DevExpress 支持](http://www.devexpress.com/Support/Center)。

# git - git pull - 如何取消删除本地文件

> ID：14474332
> 
> 赞同：2
> 
> 时间：2013-01-23T07:17:07.213
> 
> 标签：git

如何从 git pull 中取消删除/恢复本地文件？

设想：

1.  我的文件夹中有本地文件
2.  我做 git init
3.  “git pull https://..”来自服务器
4.  删除所有本地文件

我可以取回已删除的文件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:50:57.480

如果丢失的文件从未暂存或提交，则无法使用 git 恢复它们。此时，您唯一能做的就是尝试使用为您的操作系统编写的第三方取消删除实用程序来恢复它们。

（在我的测试中，git 不会删除 a 处的本地文件`git pull`，但此时*如何*删除文件与问题无关，仅与 git 不删除用户数据的声誉有关。）

# machine-learning - 较长的文本（例如文章内容）还是较短的文本（例如文章标题）更适合分类？

> ID：14474333
> 
> 赞同：0
> 
> 时间：2013-01-23T07:17:14.843
> 
> 标签：machine-learning

我目前正在做一个收集和分类新闻文章的项目，我只对收集的所有文章的一小部分（例如与体育相关的新闻）感兴趣。

我是机器学习和文本分类的新手。我应该根据标题或实际内容对文章进行分类吗？人们通常可以通过查看标题来判断新闻文章是否相关。因此，我想知道标题而不是内容是否会在自动文本分类中提供相似或更好的准确性？

出现这个问题的原因是，如果程序在找到链接时首先分析标题，而不是从 url 中检索每个页面然后分析内容，那么整体性能会提高很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:33:34.077

标题不太可能提供足够的信息来对文章进行分类。但是，您可以分析标题，如果您有足够的信心获得准确的分类，则可以对其进行分类，否则请查看内容。

采取类似的东西`Manchester in trouble`。如果您不知道那`Manchester`是一支运动队，那么这篇文章可能是经济或政治的，也可能是少数其他类别之一。我怀疑很多标题只能由人们轻松分类，因为他们熟悉与该类别相关的专有名词，并且可能很难获得适当的训练数据来训练代理做好这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:35:28.050

没有一般的答案。很大程度上取决于您要使用的算法。我建议您只从一个标题开始，并尝试从中挤出最大的收益。如果您仍然无法达到所需的质量 - 尝试将文本添加到组合中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:32:59.470

如果我们谈论的是文章的标题，那么当然，很短的文本更不利于分类，因为它包含的信息较少。但是你可以结合文章标题和文章内容的分析。这可以使您的准确性略有提高。

# android - 如何通过请求向android中的Web服务发送JSON对象

> ID：14474338
> 
> 赞同：0
> 
> 时间：2013-01-23T07:17:39.190
> 
> 标签：android

我想将 JSON 对象作为请求传递给下面提到的 Web 服务。

```
Result:{
 "email":"xxxxxxx",
 "password":"xxxxxx",
 "Marks":[
  {
   "mark1":"50",
   "mark2":"70"
  }
],
"firstname":"xxxx",
"lastname":"xxxxx"
} 
```

我的代码：...

```
HttpPost httppost = new HttpPost("My Url");
    httppost.setEntity(new StringEntity(**message**.toString(), "UTF-8")); 
```

这里的**消息**应该有上述格式的 json 对象。我怎样才能格式化 JSON 对象？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:26:55.183

如果您在 android 端实现上述 json 对象时遇到问题，那么您可以像下面这样构造它，

```
JSONObject message = new JSONObject();

JSONObject mParams = new JSONObject();
mParams.put("email", "xxxx");
mParams.put("password", "xxx");

JSONArray markArray = new JSONArray(); 
JSONObject markObj = new JSONObject();
markObj.put("mark1", "50");
markObj.put("mark2", "70");
markArray.put(markObj);

mParams.put("Marks", markArray);

mParams.put("FirstName", "xxxx");
mParams.put("lastname", "xxxx");

message.put("Result",mParams); 
```

现在在你的代码中

```
 HttpPost httppost = new HttpPost("My Url");
    httppost.setEntity(new StringEntity(**message**.toString(), "UTF-8")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:24:27.040

您可以像字符串一样发送它：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("json", message.toString()));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

和

```
$data = json_decode($json); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:37:47.450

首先，您上面提到的 JSON 是**INVALID**。

现在，

> 这里的消息应该有上述格式的 json 对象。我怎样才能格式化 JSON 对象？

=> 有两种方法可以做到这一点：

**1) 使用 JSONObject 或 JSONArray 类创建请求结构，例如：**

JSONObject objRequest = new JSONObject(); objRequest.putString("email","xxxx"); objRequest.putString("密码","xxxx");

在 HttpPost 对象中设置实体时，将其转换为字符串值。

**2）不好的方法，简单地用转义序列生成一个字符串值，比如：**

```
String strRequest = "{\"email\":\"xxxxxxx\",\"password\":\"xxxxxx\"}"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T07:32:27.913

这可能会对您有所帮助..使用 GSON 库。GSON 是一个用于解析 JSON 资源的 Google 库。关于编组，它基本上意味着一种将数据结构（如 OOP 语言中的对象）转换为 JSON 的方法......[例如](http://ajaxian.com/archives/jsonmarshaller-java-15-marshalling)：

```
// Java object
class Book {
  private String title;
  private String isbn;
  private Set<author> authors;
}

@Entity
class Author {
  private String firstName;
  private String lastName;
} 
```

到...

```
{title:   "Vocation Createurs",
 isbn:    "2829302680",
 authors: [{firstName: "Barbara", lastName: "Polla"},
           {firstName: "Pascal",  lastName: "Perez"}]} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T15:59:39.370

您还可以使用现有的库，如 android-json-rpc

# networking - 如何与不同子网中的主机通信

> ID：14474346
> 
> 赞同：1
> 
> 时间：2013-01-23T07:18:24.713
> 
> 标签：networking, subnet

我们有两个子网路由器 1

```
192.168.2.1
255.255.254.0 
```

路由器 2

```
192.168.1.1
255.255.255.0

 Modem >> switch 
        >> router1 wan port  >> from lan port to switch >> Different computers
        >> router2 wan port  >> from lan port to switch >> Different computers 
```

请注意两个路由器的两个不同的静态公共 IP（同一子网）。

我想知道如何从路由器 1 访问主机到路由器 2 中的主机，反之亦然。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:44:59.520

使用单个路由器：

```
Modem >> router >> switch >> lan1 >> computers in lan1
                          >> lan2 >> computers in lan2 
```

您甚至不需要正式的两个 LAN，因为在这种情况下，PC 不需要特殊的路由规则即可到达所有本地系统。

您使用两个地址集：192.168.1.xxx 和 192.168.2.xxx 以及 /23 甚至 /16 的网络掩码，没有区别。通过这种方式，所有 PC 都知道他们可以简单地将包裹发送到 192.168 内的所有东西......而对于外面的包裹，他们需要通过路由器路由这些包裹的规则。LAN侧两个区域之间的包路由由交换机自动完成。这就是构建交换机的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:39:03.950

*这是假设您**必须**将它们保留为两个单独的子网的情况下如何执行此操作的说明！*

也就是说，您必须在其他路由器的防火墙中为每个 IP 地址设置访问权限，然后指定它将连接到哪个内部系统。

**注意：**这样做是安全的，因为您有两个*静态*IP 地址！使用动态 IP确实没有一种简单、*安全*的方法可以做到这一点。

在这种情况下，路由器 1 必须授予对路由器 2 的公共 IP 地址的访问权限，反之亦然。你如何做到这一点完全取决于路由器的品牌和型号。

路由器将知道如何相互路由，因为它们将使用公共 IP。

因此，数据路径将是：System1 (subnet1)->Router1->Internet->Router2->System2

由于不同的路由器让您以不同的方式指定地址，因此请确保您知道您的路由器希望您如何输入地址或地址范围。

然而，这还不够。因为您在每个子网上有多个系统，都共​​享相同的公共 IP 地址，所以您还必须指定哪些入站流量流向哪个子网主机。

也就是说，您从上述数据路径中的 System1 开始。数据从Router1 传回Router2。Router2 如何知道将它发送到哪里？它只有一个外部 IP 地址。

同样，对于不同的路由器，有不同的方法可以做到这一点。在某些情况下，您可以指定将某些端口上的数据发送到某些系统。（转发端口）

以 Telnet 为例（你**不应该**！Telnet 不安全。它只是很容易用作示例）...

您想从 System1（子网 1）到 System3（子网 2）。

在 Router1 上，您指定端口 23（Telnet 端口）上的传入数据应发送到 System1。在 Router2 上，您将所有端口 23 数据发送到 System3。

然而，端口转发有些限制，因为在上面的设置中，*只有*System1 和 System3 可以接收 Telnet 数据。

另一种常见的方法是将来自特定 IP 的所有数据发送到子网上的一个特定系统。这对您不起作用，因为您在*每个*子网上都有多个系统！

我希望这不是**太**不具体！（或者太杂乱无章！:-)）我试图尽可能地不具体，但这使得解释事情变得困难！不幸的是，由于每个公司的路由器使用不同的接口，我无法准确地知道您需要做什么！

让我们知道您的路由器是什么。那么我可能会更具体。

但是，与此同时，请在您的路由器中查找以下部分：1) 其他路由器的数据，以及 2) 指定哪些数据进入子网上的哪个系统！

我希望这有帮助！

# java - 编程文档

> ID：14474354
> 
> 赞同：1
> 
> 时间：2013-01-23T07:18:55.477
> 
> 标签：java, file, path

我一直在阅读文档时遇到问题，例如我只是在研究 java 的文件路径，所以我这样：“ 使用示例：

```
Path file = ...
BasicFileAttributes attrs = Files.readAttributes(file, BasicFileAttributes.class); 
```

" //http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributes.html

什么是 ..... ？？？:| 我知道我不是专家，但完整编码的示例代码会很好，或者是因为我还没有达到那个水平......

我试过测试它..甚至没有运行:(

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:50:02.977

API 文档旨在为您提供有关特定类的详细信息，并作为返回的参考。它的目的不是为您提供概念如何组合在一起的解释。So`...`代表在特定用例中可能有意义的任何代码的占位符。对于一般概述，Oracle 提供了一组出色的[教程](http://docs.oracle.com/javase/tutorial/)。

如果你想看到更大的图景，我可以推荐一本很棒的书[Thinking in Java](https://rads.stackoverflow.com/amzn/click/com/0131872486)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:22:30.730

... 被称为*省略号*，表示某些内容已被遗漏。在这种情况下，它是对 Path 构造函数的调用，为其余代码准备好路径。

他们这样做是因为他们不想用无关的东西使示例混乱。

如果您想要完全编码的示例，Java Almanac 有很好的示例，尽管有些过时。

[http://www.amazon.com/The-Java%C2%BF-Developers-Almanac-Volume/dp/0201752808](https://rads.stackoverflow.com/amzn/click/com/0201752808)

# sql - 带有 if 语句的 PLSQL 触发器

> ID：14474355
> 
> 赞同：1
> 
> 时间：2013-01-23T07:18:56.747
> 
> 标签：sql, plsql, triggers, sql-update

我对 PL SQL 很陌生，我正在尝试编写一个触发器，它会在表 A 中的字段更新时触发，然后去更新表 B 中的字段。

第二个表可能没有任何相关记录，或者它可能有很多行（在这种情况下，我需要更新所有行）。

根据表 A 中更新的值（称为 HNCMA.AGREEMENT_EOI.STATUS），我想影响表 B 中更新的值（称为 LMD.LM_ACTIVITY_.ACTIVITY_STATUS_CODE）。

这是我到目前为止所得到的，但我收到了这个错误：

PLS-00103：在预期以下之一时遇到符号“=”：:=.(@%;

任何帮助将非常感激！！！！

谢谢

* * *

```
CREATE OR REPLACE TRIGGER TR_UPDATE_STATUS

AFTER UPDATE OF STATUS ON HNCMA.AGREEMENTS_EOI
FOR EACH ROW 

DECLARE

VarStatus Varchar(10);
VarStatusCode Int;

BEGIN

if :new.Status = 'Proposed' then VarStatus = 2 else
if :new.Status = 'Recommended' then VarStatus = 5 else
if :new.Status = 'Funded' then VarStatus = 5 else
if :new.Status = 'Completed' then VarStatus = 6 else
if :new.Status = 'Withdrawn' then VarStatus = 34 
end if

UPDATE
(SELECT LMD.LM_ACTIVITY.ACTIVITY_STATUS_CODE
FROM (HNCMA.AGREEMENTS_EOI INNER JOIN HNCMA.PROJECT ON HNCMA.AGREEMENTS_EOI.PROJECTID = HNCMA.PROJECT.PROJECTID) INNER JOIN (LMD.LM_POLYGON_PROJECT_REL INNER JOIN LMD.LM_ACTIVITY ON LMD.LM_POLYGON_PROJECT_REL.LMID = LMD.LM_ACTIVITY.LMID) ON HNCMA.AGREEMENTS_EOI.CASENO = LMD.LM_POLYGON_PROJECT_REL.LOCAL_PROJECT_NAME
WHERE (((HNCMA.PROJECT.CATCHMENT)='Murray') AND ((HNCMA.AGREEMENTS_EOI.CASENO)= :old.CASENO ));) s
Set s.ACTIVITY_STATUS_CODE = varstatuscode

End; 
```

***更新********

感谢@heaps 的帮助。我已经修改了我的代码以包含 CASE 函数并修复了我的格式错误。这是我到目前为止所得到的（当我取出更新语句时它可以工作），但我现在收到“SQL 命令未正确结束”错误......

帮助！？！

创建或替换触发器 TR_UPDATE_LMDB_STATUS1

```
AFTER UPDATE OF STATUS ON HNCMA.AGREEMENTS_EOI
FOR EACH ROW 

DECLARE

VarStatus Varchar(50);
VarStatusCode Int;

BEGIN

VarStatus := :new.status;

CASE varstatus

WHEN 'Proposed' THEN VarstatusCode := 2;
WHEN 'Recommended' THEN VarStatusCode := 5;
WHEN 'Funded' THEN VarStatusCode := 5;
WHEN 'Completed' THEN VarStatusCode := 6;
WHEN 'Withdrawn' THEN VarStatusCode := 34;

END CASE;

UPDATE LMD.LM_ACTIVITY
SET ACTIVITY_STATUS_CODE = VarStatusCode
FROM (HNCMA.AGREEMENTS_EOI INNER JOIN HNCMA.PROJECT ON HNCMA.AGREEMENTS_EOI.PROJECTID = HNCMA.PROJECT.PROJECTID) INNER JOIN (LMD.LM_POLYGON_PROJECT_REL INNER JOIN LMD.LM_ACTIVITY ON LMD.LM_POLYGON_PROJECT_REL.LMID = LMD.LM_ACTIVITY.LMID) ON HNCMA.AGREEMENTS_EOI.CASENO = LMD.LM_POLYGON_PROJECT_REL.LOCAL_PROJECT_NAME
WHERE (((HNCMA.PROJECT.CATCHMENT)='Murray') AND ((HNCMA.AGREEMENTS_EOI.CASENO)= :old.CASENO )) ;

End; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:22:03.753

将 varstatus=2 替换为 if`Varstatus:=2` 并在末尾加上分号，`;` 然后重试

**编辑**..为您更新的问题>>

该错误`SQL command not properly ended`是因为您应该使用`UPDATE`命令进行检查

似乎`FROM`更新中的问题子句，因为我认为最好尝试使用 `UPDATE... WHERE EXISTS..` or`MERGE`命令，oracle 不支持 UPDATE 中的 FROM 子句，您可以将其用作查询

# mysql - 返回图像上喜欢和不喜欢的计数

> ID：14474357
> 
> 赞同：3
> 
> 时间：2013-01-23T07:19:14.413
> 
> 标签：mysql, sql, sql-server, tsql

我有表包含`img_id`和`likes`列。例子：

```
 1  1
 1  1
 1  0
 2  0
 2  0
 3  1 
```

所以当运行这个查询时：

```
select img_id, count(likes)
from my_table
where likes = 1
group by img_id 
```

结果如下：

```
1  2
3  1 
```

当我跑步时：

```
select img_id, count(likes)
from my_table
where likes = 0
group by img_id 
```

结果是：

```
1 1
2 2 
```

我的问题是：

我如何在 query1 img_id 2 = 0 中返回，我的意思是 img_id = 2 在查询 2 中也没有喜欢 img_id = 3 没有不喜欢所以我需要返回 3 -> 0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T07:22:29.890

在 MySQL 和 SQL Server 中，

```
SELECT  img_id,
        SUM(CASE WHEN likes = 1 THEN 1 ELSE 0 END) totalLikes,
        SUM(CASE WHEN likes = 0 THEN 1 ELSE 0 END) totalDisLikes
FROM    tableName
GROUP   BY img_ID 
```

或者只是在 MySQL 中，

```
SELECT  img_id,
        SUM(likes = 1) totalLikes,
        SUM(likes = 0) totalDisLikes
FROM    tableName
GROUP   BY img_ID 
```

*   [SQLFiddle 演示（*两者*）](http://www.sqlfiddle.com/#!2/c4c49/2)

# java - 嵌套类（静态内部）生命周期/范围

> ID：14474362
> 
> 赞同：1
> 
> 时间：2013-01-23T07:19:31.760
> 
> 标签：java, nested-class

我声明了一个静态内部类，我在外部类的方法中创建了一个新实例。但是，我得到的结果表明在我的方法中每次都使用相同的 Inner 类实例。下面的例子，

```
public class Outer{

   public method m(){
      Inner n = new Inner();  //Creating local instance of Nested class
      n.something();
   }

   public static class Inner{
       Map<K,V> cache = new Map<K,V>();

       void something(){
          //use and update cache;
       }
   }
}

public Test{
   public static void main(String a[]){
     Outer o = new Outer();
      o.m();
      o.m();  //cache was still available
   }
} 
```

有人可以帮助解释为什么没有创建内部类的两个实例吗？
另外，如果我`static`从内部类中删除，这种行为会改变吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-23T07:32:32.640

`static` `inner`每个外部封闭类实例只能实例化一次类。由于您只有一个`Outer o = new Outer();`外部实例 `o.m();`，因此将调用内部类的相同实例。像这样创建两个实例

```
Outer o = new Outer();
o.m();
Outer o1 = new Outer();
o1.m();  // will create new instance of inner 
```

关于`static`关键词

嵌套类可以是：静态和非静态。声明为静态的嵌套类是静态嵌套类。非静态嵌套类称为内部类。

静态嵌套类没有对嵌套实例的引用，因此静态嵌套类无法访问其嵌套类的实例的非静态方法。

# android - 如何处理从android中的数据库获取的不同dpi版本的图像？从数据库或资源中读取图像更好吗？

> ID：14474363
> 
> 赞同：2
> 
> 时间：2013-01-23T07:19:35.957
> 
> 标签：android, image, sqlite, resources

我正在开发在某些时候显示图像的应用程序。我注意到在资源中，各种分辨率的应用程序图标版本很少。由于我将图像存储在数据库中，我想知道将图像的几个版本以不同的分辨率保存对我来说是否更好。原因很明显，应用程序速度，内存使用，唯一的缺点是由于数据更多，应用程序大小更大. 获取图像不是问题，我只是不知道何时知道图像的哪个版本以及如何确定它？或者也许只是保留一些更大的图像尺寸并让系统处理调整大小，因为它对设备没有太大压力？

另一件事是我将图像保存在数据库中，我想知道将这些图像保存在数据库中是否更有效的磁盘空间/cpu/内存使用/速度，或者仅将它们的名称保存在那里，将图像作为资源保存在 dpi 文件夹中对应于它们的大小?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:00:58.327

如果您没有太多图像，我强烈建议您使用资源文件夹中的自动资源加载。至于什么构成“太多图像” - 这真的取决于你。我个人认为，如果您可以在 APK 大小限制（50MB）内容纳所有图像，那么您应该这样做。

您还询问了哪些尺寸的图像应该针对哪些屏幕尺寸。为此，您应该仔细阅读[Support Multiple Screen Sizes](http://developer.android.com/guide/practices/screens_support.html)文档。具体来说，[支持的屏幕尺寸范围](http://developer.android.com/guide/practices/screens_support.html#range)部分将提供有关您可以定位的像素密度的指导。请记住，您不是目标屏幕尺寸 - 您的目标是屏幕密度。

正如您所指出的，您也可以只上传您拥有的最高分辨率图像，并让系统处理它。这是可能的，但会导致您的应用在低密度屏幕上的加载速度比它需要的慢一些。

我无法评论您的数据库方法，因为我对您的实现没有任何细节，但如果它是一个远程数据库，您必须从互联网上获取图像，那么我肯定会建议将您的图像放入资源文件。通过 Internet 获取这些资源的速度很慢，并且会浪费用户宝贵的带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:04:10.977

最简单的做法是制作一张高分辨率图像并按比例缩小。Android 的 ImageView 可以为您做到这一点。

另一方面，这将导致低端设备的性能问题。如果您的目标是该组，那么您应该拥有图像的预缩放版本并渲染适当的版本。以下代码可能会对您有所帮助：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
switch(metrics.densityDpi){
    case DisplayMetrics.DENSITY_LOW:
            break;
    case DisplayMetrics.DENSITY_MEDIUM:
            break;
    case DisplayMetrics.DENSITY_HIGH:
            break;
    case DisplayMetrics.DENSITY_XHIGH:
            break;
} 
```

就个人而言，我不会将图像保存在数据库中，而是会为每个密度创建资源。

# java - Android，org.simpleframework.xml 持久性异常，元素 'foo' 已被使用

> ID：14474368
> 
> 赞同：13
> 
> 时间：2013-01-23T07:19:54.520
> 
> 标签：java, android, xml, simple-framework

我正在使用 org.simpleframework.xml 来处理 android 应用程序的一些 xml 任务，并且遇到了以下我无法弄清楚的错误。

```
org.simpleframework.xml.core.PersistenceException: Element 'album' is already used with @org.simpleframework.xml.ElementList(inline=false, name=album, entry=, data=false, empty=true, required=true, type=void) on field 'albums' private java.util.List us.blah.sonar.xsd.simple.AlbumList.albums at line 5
at org.simpleframework.xml.core.Variable$Adapter.read(Variable.java:484)
at org.simpleframework.xml.core.Composite.readVariable(Composite.java:613)
at org.simpleframework.xml.core.Composite.readInstance(Composite.java:573) 
```

这是我试图解组的 XML 示例：

```
<albumList> 
    <album id="3985" parent="3301" title="Bob Dylan - The Reissue Series Sampler" album="Bob Dylan - The Reissue Series Sampler" artist="48 - Masked and Anonymous [BSO] (2003)" isDir="true" created="2011-12-09T11:52:12"/> 
    <album id="3986" parent="3301" title="Soundtrack - Masked & Anonymous" album="Soundtrack - Masked & Anonymous" artist="48 - Masked and Anonymous [BSO] (2003)" isDir="true" coverArt="3986" created="2011-12-09T11:52:13"/> 
    <album id="10542" parent="145" title="A Perfect Circle" album="Acoustica" artist="A Perfect Circle" isDir="true" created="2011-12-09T12:01:52"/> 
</albumList> 
```

以下是我创建和注释的**POJO ：**

```
@Root
public class AlbumList {

    @ElementList(name="album")
    private List<Child> albums;

    public List<Child> getAlbums() {
        return albums;
    }

}

public class Child {
    @Attribute
    private String id;

    @Attribute(required=false)
    private String parent;

    @Attribute
    private boolean isDir;

    @Attribute
    private String title;

    @Attribute(required=false)
    private String album;

    @Attribute(required=false)
    private String artist;

    @Attribute(required=false)
    private int track;

    @Attribute(required=false)
    private int year;

    @Attribute(required=false)
    private String genre;

    @Attribute(required=false)
    private String coverArt;

    @Attribute(required=false)
    private long size;

    @Attribute(required=false)
    private String contentType;

    @Attribute(required=false)
    private String suffix;

    @Attribute(required=false)
    private String transcodedContentType;

    @Attribute(required=false)
    private String transcodedSuffix;

    @Attribute(required=false)
    private int duration;

    @Attribute(required=false)
    private int bitRate;

    @Attribute(required=false)
    private String path;

    @Attribute(required=false)
    private boolean isVideo;

    @Attribute(required=false)
    private String userRating;

    @Attribute(required=false)
    private double averageRating;

    @Attribute(required=false)
    private int discNumber;

    @Attribute(required=false)
    private Date created;

    @Attribute(required=false)
    private Date starred;

    @Attribute(required=false)
    private String albumId;

    @Attribute(required=false)
    private String artistId;

    @Attribute(required=false)
    private MediaType type;
} 
```

任何人都可以指导我如何解决问题，或者这个错误消息到底意味着什么？是不是因为 XML 元素被命名为专辑并且有一个属性也被命名为专辑？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-23T07:51:52.603

尝试以`AlbumList`这种方式注释您的课程：

```
@Root
public class AlbumList {
    @ElementList(entry="album", inline=true)
    private List<Child> albums;

    public List<Child> getAlbums() {
        return albums;
    }
} 
```

# android - E/BluetoothAdapter(883)：蓝牙绑定器为空

> ID：14474370
> 
> 赞同：5
> 
> 时间：2013-01-23T07:19:55.320
> 
> 标签：android

**解答**：[如何在安卓模拟器中使用蓝牙？](https://stackoverflow.com/questions/2175076/how-to-use-bluetooth-in-android-emulator)

我试图启用禁用蓝牙设备。出于这个原因，我写了下面的代码，但它给出了错误，它也在下面。

```
if ( bluetoothAdmin == null ) {

    return ;
}
if ( bluetooth . isEnabled()){
    bluetooth . disable ();
}
else {
    bluetooth . enable();
} 
```

在创建

```
BLuetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter() ; 
```

在清单中

```
<uses-permission
    android:name="android.permission.BLUETOOTH" 
/>
<uses-permission
    android:name="android.permission.BLUETOOTH_ADMIN" 
/> 
```

错误 ：

```
01-23 07:18:53.167: E/BluetoothAdapter(883): Bluetooth binder is null 
```

堆栈的一半：

```
01-23 07:36:55.624: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
01-23 07:37:16.954: E/ActivityThread(642): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d51230 that was originally bound here
01-23 07:37:16.954: E/ActivityThread(642): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d51230 that was originally bound here
01-23 07:37:16.954: E/ActivityThread(642):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-23 07:37:16.954: E/ActivityThread(642):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-23 07:37:16.954: E/ActivityThread(642):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-23 07:37:16.954: E/ActivityThread(642):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-23 07:37:16.954: E/ActivityThread(642):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:11    6)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
01-23 07:37:16.954: E/ActivityThread(642):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
01-23 07:37:16.954: E/ActivityThread(642):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-23 07:37:16.954: E/ActivityThread(642):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-23 07:37:16.954: E/ActivityThread(642):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-23 07:37:16.954: E/ActivityThread(642):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-23 07:37:16.954: E/ActivityThread(642):  at java.lang.Thread.run(Thread.java:856)
01-23 07:37:16.964: E/StrictMode(642): null
01-23 07:37:16.964: E/StrictMode(642): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d51230 that was originally bound here 
```

我在安卓模拟器上测试

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-09T07:29:14.590

The emulator doesnt support bluetooth as mentioned in the sdk's docs. You have to check this in real device..

And you got error Bluetooth binder is null. it means emulator does not have bluetooth capability.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-04T07:21:11.210

Android 模拟器不支持蓝牙。这就是您收到错误的原因。您可以使用连接到计算机/笔记本电脑的智能手机来测试您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:13:57.890

由于您的帖子中缺少信息，我假设您的课程扩展了服务，因为这一行：

```
android.app.ServiceConnectionLeaked: Service 
```

在您的`onStop`方法中，请解除服务与您的活动的绑定。

```
unbindService(whatever_your_service_object_are); 
```

如果这是完全错误的答案，请发布更多代码，以及类声明等。

# c# - dll 类无法在 app_code 文件夹文件中访问

> ID：14474372
> 
> 赞同：2
> 
> 时间：2013-01-23T07:19:58.617
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/0f06924501bff2b503ea492cc88d001c.png) 我在我的项目中使用 asp.net(3.5) 有一层名为 app_code 包含项目的业务逻辑

在这个项目中，我添加了一个名为*Microsoft.ApplicationBlocks.Data的参考文件*

当我在*default.aspx.cs文件中包含命名空间时，它可以正常工作，但是当我处理**app_code*文件夹中的业务逻辑类文件时，我会显示编译时错误。

我没有找到任何解决方案
请给出解决方案....

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:33:20.510

在您的文件中添加对该 dll 的引用，例如`using <dllname>`

# android - IInterface 是如何使用的？

> ID：14474373
> 
> 赞同：0
> 
> 时间：2013-01-23T07:19:58.730
> 
> 标签：android

最近，我在看一些在实现 Java 反射概念的过程中使用 IInterface 的代码。在这部分代码中，IInterface 类的对象被用于调用 Remote api 的方法。

我在这里有点困惑，如何使用通用 IInterface 类的对象来调用远程 API 的方法（我不知道远程 API 类是如何编写的）。

因此，我担心在这种情况下如何使用 IInterface 或 IBinder。

有人可以解释为什么要使用 IInterface 吗？虽然我搜索了它，但我无法获得足够的信息。

在此先感谢，如果有任何错误，请忽略。

西瓦·库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:35:26.940

它是关于 Android 接口定义语言 (AIDL) 的，它用于远程服务通信或 IPC（进程间通信），如果你知道 java rmi 概念，它基本上以这种方式工作，我的意思是远程进程通信，在 android 中，如果你有服务它正在远程运行，并且您想在那时与该服务进行通信，它会出现在图片中。

有关aidl 的更多信息，您可以在此处找到 [Android AIDL](http://developer.android.com/guide/components/aidl.html)

# sql - 删除前面和附加文本的 SQL 查询

> ID：14474374
> 
> 赞同：0
> 
> 时间：2013-01-23T07:20:01.653
> 
> 标签：sql, sql-injection

我正在构建一个查询以通过向用户输入的数据附加一些附加信息来对数据库运行，如下所示：

```
SELECT * FROM vBranch  WHERE (((BranchIsActive = 'Yes' AND BranchIsValid = 
'Yes') AND BranchIsInternational = 'Yes' AND 1=2) AND 
vBranch.BranchSecurityGroup=1). 
```

这部分：

```
SELECT * FROM vBranch WHERE (( 
```

由我附加，

这部分：

```
(BranchIsActive = 'Yes' AND BranchIsValid = 'Yes') AND BranchIsInternational 
= 'Yes' 
```

是用户输入的值

这部分：

```
AND 1=2) AND vBranch.BranchSecurityGroup=1) 
```

也是由我附加的。

我的疑问是用户是否可以编写任何不包括我在用户输入数据之前和之后附加的字符串的查询，并且只执行用户针对数据库输入的数据？可能吗？需要注意的一点是，除了“select”语句之外，我也限制了很少的 DML 和 DDL 语句，因为我正在构建一个“select”语句来对数据库执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:51:30.467

SQL 语句前面有什么并不重要。只要您将 sql 作为动态语句执行，它就是 SWeko 已经指出的 SQL 注入的高候选。您可以自己尝试一下。创建一个名为“DeleteMe”的表。然后在您的文本框中输入以下内容`1=1));DROP TABLE DeleteMe;--`：然后检查您的数据库并查看 DeleteMe 表已消失。

此外，虽然这不能回答您的问题，但我担心您查询中的“1=2”。它几乎肯定不会产生任何结果，希望这只是一个“不好的例子”。

# sqlite - servlet 中的 sqlite 数据库连接

> ID：14474381
> 
> 赞同：1
> 
> 时间：2013-01-23T07:20:20.657
> 
> 标签：sqlite, servlets, jdbc

我正在`jdbc`用 Servlet 编写代码，但出现错误

```
java.lang.ClassNotFoundException: org.sqlite.JDBC 
```

我已经包含了一个`sqlitejdbc-v056.jar`文件仍然出现错误。

如果我在单独的 java 文件中编写相同的代码并将其作为 java 应用程序运行，它可以正常工作，但不能在服务器上运行

ps-我正在使用 Weblogic 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:09:14.267

我找到了解决问题的方法。我们必须在工作区的 WEB-INF 文件夹中的 lib 文件夹中添加 .jar 文件 - “Workspace/WebContent/WEB-INF/lib/”

我们还需要将它包含在 Eclipse 的“插件”文件夹中。-“日食/插件/”

# interface - 致命错误：在第 51 行的 C:\xampp\htdocs\book_sel\library\Zend\Mvc\Application.php 中找不到接口“Zend\Mvc\ApplicationInterface”

> ID：14474382
> 
> 赞同：2
> 
> 时间：2013-01-23T07:20:21.373
> 
> 标签：interface, zend-framework2

我正在使用zend framework 2和`xampp`php服务器，但是在运行我的索引文件时出现如下错误：

> 致命错误：在第 51 行的 C:\xampp\htdocs\book_sel\library\Zend\Mvc\Application.php 中找不到接口“Zend\Mvc\ApplicationInterface”

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:18:05.613

使用 composer 安装应用程序绝对是最好的，如下所述：

[https://github.com/zendframework/ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)

这将为您解决任何自动加载问题。

一个例子：

```
cd my/project/dir
git clone git://github.com/zendframework/ZendSkeletonApplication.git
cd ZendSkeletonApplication
php composer.phar install 
```

# ios - 关于 Interface Builder 组件发布

> ID：14474383
> 
> 赞同：1
> 
> 时间：2013-01-23T07:20:25.300
> 
> 标签：ios, interface-builder, xib

如果我的 XIB 上有一些对象，如 UILabel、UIImageView 等
但我没有使用任何 IBOutlet 来连接它们，
我会引用这些对象，如下所示

```
UILabel *label =  (UILabel *)[[self.view subviews] objectAtIndex:x];
UIImageView *imageView =  (UIImageView *)[[self.view subviews] objectAtIndex:x]; 
```

我需要释放这些对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:27:59.370

如果您不保留此对象，则不必释放它们。您只需释放您创建的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:26:42.343

您应该释放您创建的所有对象。这是个好习惯。

否则你会得到内存问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:28:27.907

不，如果你不调用它，那么你就不必释放它。

但是，您的方法非常糟糕。是否有任何原因阻止您创建 IBOutlet 连接？即使使用`viewWithTag:`也会做得更好。因为如果你在 nib 中添加一个新视图，很可能会弄乱顺序，你必须更改每个硬编码的索引值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T07:48:59.660

除非您自己分配、初始化、保留、复制对象，否则不应释放它。

# c# - 文件不存在异常-favicon.ico

> ID：14474391
> 
> 赞同：0
> 
> 时间：2013-01-23T07:20:58.100
> 
> 标签：c#, asp.net, .net

我有一个`Global.asax`在处理程序中包含日志记录代码的文件`Application_Error`。我需要以这样一种方式对其进行自定义，即如果在查找`favicon.ico`文件时发生异常，则不会到达 Application_Error 处理程序。当 favicon.ico 出现异常时，我们如何绕过 Application_Error 的命中？

> 例外：文件不存在。

```
Url: http://localhost:14658/favicon.ico 
```

注意：解决方案中没有 favicon.ico 参考

注意：我使用 Internet Explorer 作为浏览器

**代码**

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception occuredException = Server.GetLastError().GetBaseException();

        string connectionString = ConfigurationManager.ConnectionStrings[UIConstants.PayrollSQLConnection].ConnectionString;
        ExceptionBL exceptionBL = new ExceptionBL(connectionString);

        string location = Request.Url.ToString();

        exceptionBL.SubmitException(occuredException.Message, location);

    } 
```

**参考**：

1.  [Application_Error 被多次调用](https://stackoverflow.com/questions/6909248/application-error-getting-called-numerous-times)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:30:35.390

如果异常是 a`FileNotFoundException`那么类似于

```
 var fnf = theException as FileNotFoundException;
 if (fnf && fnf.FileName == '...')
     return; 
```

但是，您需要先发布`Exception`详细信息，然后我才能给出具体的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:42:07.437

我认为您可以在您的项目（IIS）中添加**favicon.ico**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T07:55:52.560

1) 在您的 web.UI 项目中添加 favicon.ico。2) 如果您使用的是 asp.net MVC。通过添加忽略路由：

```
 var routes = RouteTable.Routes;
 routes.IgnoreRoute("favicon.ico"); 
```

# javascript - 把正则表达式“。” 在文本框的按键上

> ID：14474392
> 
> 赞同：2
> 
> 时间：2013-01-23T07:20:58.290
> 
> 标签：javascript, regex, events, keypress

嗨，我有一个按键的 Javascript 代码，我想在其中放置“。” 和文本框中的数字。我可以输入数字但不能输入“。”。我有 Javascript 和 HTMl 以及 Fiddle 链接。任何人都可以帮助我吗？

```
<script>
    var aa_zChar = new Array(' ');
    var aa_maxphonelength = 8;
    var aa_phonevalue1;
    var aa_phonevalue2;
    var aa_cursorposition;
    function aa_ParseForNumber1(object){
      aa_phonevalue1 = aa_ParseChar(object.value, aa_zChar);
    }
    function a_ParseForNumber2(object){
      aa_phonevalue2 = aa_ParseChar(object.value, aa_zChar);
    }
    function aa_up(object,e) { 
      if(e){ 
        e = e 
      } else {
        e = window.event 
      } 
      if(e.which){ 
        var keycode = e.which 
      } else {
        var keycode = e.keyCode 
      }
      aa_ParseForNumber1(object)

        aa_ValidatePhone(object)

    }
    function aa_down(object,e) { 
      if(e){ 
        e = e 
      } else {
        e = window.event 
      } 
      if(e.which){ 
        var keycode = e.which 
      } else {
        var keycode = e.keyCode 
      }
      aa_ParseForNumber2(object)
    } 

    function aa_ValidatePhone(object){
      var p = aa_phonevalue1
      p = p.replace(/[^\d]*/gi,"") 
        object.value=p

    }

    function aa_ParseChar(sStr, sChar)
    {
      if (sChar.length == null) 
      {
        aa_zChar = new Array(sChar);
      }
        else aa_zChar = sChar;
      for (i=0; i<aa_zChar.length; i++)
      {
        sNewStr = "";
        var iStart = 0;
        var iEnd = sStr.indexOf(sChar[i]);
        while (iEnd != -1)
        {
          sNewStr += sStr.substring(iStart, iEnd);
          iStart = iEnd + 1;
          iEnd = sStr.indexOf(sChar[i], iStart);
        }
        sNewStr += sStr.substring(sStr.lastIndexOf(sChar[i]) + 1, sStr.length);
        sStr = sNewStr;
      }
      return sNewStr;
    }
    </script> 
```

HTML

```
<input name="name" type="text" maxlength="100" id="name" value="" onKeyDown="aa_down(this,event);" onKeyUp="aa_up(this,event);" /> 
```

[http://jsfiddle.net/4emDC/2/](http://jsfiddle.net/4emDC/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:39:55.723

差不多好了。您只需要更改正则表达式，使其与`.`数字一起接受。正确的正则表达式之一是`/[^\d.]/gi`

# javascript - 有什么方法可以通过 PHP 或 Javascript 确定无线连接或电缆连接？

> ID：14474393
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:21:17.830
> 
> 标签：javascript, wireless

在网站上，我想知道访问者是使用无线还是有线连接。有什么办法吗？

我想这样做的原因是在用户使用无线时提供地理定位服务，这比使用有线更准确。当它是有线连接时，我根本不想提供这项服务，因为位置是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:23:51.067

```
<form action="conType.php">
I am visiting via  ...<br />
<input type="radio" name="conType" value="wireless" /> Wireless<br />
<input type="radio" name="conType" value="cable" /> Cable
<input type="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:25:27.477

不，这应该是不可能的。有关浏览器和 JavaScript 安全性的详细信息，请参见此处：

[http://en.wikipedia.org/wiki/JavaScript#Security](http://en.wikipedia.org/wiki/JavaScript#Security)

# r - 是否可以在 ggplot 中创建 3 个系列（2 行和 1 个点）多面图？

> ID：14474394
> 
> 赞同：1
> 
> 时间：2013-01-23T07:21:27.893
> 
> 标签：r, ggplot2

我正在尝试编写一个我用 R 中的基本图形包编写的代码到 ggplot。

我使用基本图形包得到的图形如下：

![包含六个图表的示例图像](../Images/f5239885313a8c0d7ebc7c7a11b7f45c.png)

我想知道这种类型的图表是否可以在 ggplot2 中创建。我认为我们可以通过使用面板来创建这种图表，但我想知道是否可以对这种情节使用分面。我遇到的主要困难是最大值和最小值有共同的长度，而观察到的数据不是连续的数据，并且间隔是完全不同的。

为这种类型的图安排数据的任何想法都会非常有帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T00:46:05.897

贾巴巴，

从您的评论中，您提到您希望`geom_point`在`.`图例中包含 。这是一个尚未实现以直接使用的功能`ggplot2`（如果我是对的）。`@Aniko`但是，[**这篇文章**](https://stackoverflow.com/questions/2253179/using-ggplot2-how-can-i-represent-a-dot-and-a-line-in-the-legend)中给出了一个修复/解决方法。它有点棘手但很棒！而且效果很好。这是我尝试过的一个版本。希望这是你所期望的。

```
# bind both your data.frames
df <- rbind(tempcal, tempobs)

p <- ggplot(data = df, aes(x = time, y = data, colour = group1, 
                 linetype = group1, shape = group1))
p <- p + geom_line() + geom_point()
p <- p + scale_shape_manual("", values=c(NA, NA, 19))
p <- p + scale_linetype_manual("", values=c(1,1,0))
p <- p + scale_colour_manual("", values=c("#F0E442", "#0072B2", "#D55E00"))
p <- p + facet_wrap(~ id, ncol = 1)
p 
```

这个想法是首先创建一个在美学部分中设置了所有*必要*属性的图，绘制你想要的图，然后稍后使用`scale_._manual`. 例如，您可以按in`unset`排列。同样，您可以使用in为线条点。在这里，前两个值是 for ，最后一个是 for 。因此，我们设置为前两个 for和并设置为for 。`0``scale_linetype_manual``unset``NA``scale_shape_manual``group1=maximum and minimum``observed``NA``maximum``minimum``0``linetype``observed`

这是情节：

![在此处输入图像描述](../Images/56373c2871b409af1482bdfa2bf46ab2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:00:41.517

**找到的解决方案：** 感谢 Arun 和 Andrie

以防万一有人需要解决这类问题。

我使用的代码如下：

```
library(ggplot2)
tempcal <-  read.csv("temp data ggplot.csv",header=T, sep=",")
tempobs <- read.csv("temp data observed ggplot.csv",header=T, sep=",")
p <- ggplot(tempcal,aes(x=time,y=data))+geom_line(aes(x=time,y=data,color=group1))+geom_point(data=tempobs,aes(x=time,y=data,colour=group1))+facet_wrap(~id)
p 
```

使用的数据集是[https://www.dropbox.com/s/95sdo0n3gvk71o7/temp%20data%20observed%20ggplot.csv](https://www.dropbox.com/s/95sdo0n3gvk71o7/temp%20data%20observed%20ggplot.csv)

[https://www.dropbox.com/s/4opftofvvsueh5c/temp%20data%20ggplot.csv](https://www.dropbox.com/s/4opftofvvsueh5c/temp%20data%20ggplot.csv)

得到的地块如下：

![在此处输入图像描述](../Images/9419df401c561c70fd9acfc9bb7d905c.png)

贾巴巴

# android - 在android中使用私有api有什么缺点？

> ID：14474396
> 
> 赞同：1
> 
> 时间：2013-01-23T07:21:33.990
> 
> 标签：android

谁能告诉我在android中使用私有api的缺点是什么。我知道有一些方法可以访问私有 api，一种方法是使用反射，另一种方法是从手机中提取 android.jar 并提取其 .dex 文件，然后为我的应用程序创建一个自定义 android.jar，以便它包含 com.jar。 android.internal 包。但是我想知道 google 的 android 团队为开发人员隐藏这些 api 的原因，以及如果开发人员在他们的应用程序中使用这些私有 api 是否可靠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:29:14.927

由于 API 是私有的，Google 可以在需要时更改 API。只要它们自己不需要，就不会考虑向后兼容性。因此，使用私有 API 是有风险的。来自 Google 的更改会破坏您的应用程序。

# pdf - 从编写不当的 LaTeX 源中索引 PDF

> ID：14474405
> 
> 赞同：1
> 
> 时间：2013-01-23T07:22:23.010
> 
> 标签：pdf, latex

我注意到一些 PDF 文件存在这个问题，这些文件源自 LaTeX 源（我假设，来自所使用的页面布局/设计和字体）。

所以今天我在看这样的文章，无法复制有意义的文本，也无法进行文本搜索，当然也无法对文档进行索引。这是一个随机示例： http: [//www.vincent-net.com/luc/papers/00informatica_particle.pdf](http://www.vincent-net.com/luc/papers/00informatica_granul.pdf)

是否有一些程序，我可以使这种文件可以访问。我想到的唯一一件事就是光栅化文档，然后进行 OCR 保存，但这感觉很愚蠢。

# select - 描述选择查询

> ID：14474407
> 
> 赞同：1
> 
> 时间：2013-01-23T07:22:24.507
> 
> 标签：select, describe

DESCRIBE（或 SHOW COLUMNS）除了表格之外似乎不起作用。

我希望能够检索 DESCRIBE 的等价物`<table>`，但是对于任意复杂的`SELECT`查询。

例如，我想说：

> `DESCRIBE (arbitrary SELECT statement) AS`表2

`SELECT`语句可能包含 JOIN 等的位置

在最简单的情况下

```
 DESCRIBE (SELECT * from table1) as table2 
```

应该产生相同的结果

```
 DESCRIBE table1 
```

是否有一些 SQL 可以用来获取它，或者类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:53:46.390

I'm assuming you are working with MySQL (Although this should work anyway). As of version 5.0.1, the DESCRIBE statement also works for views ([http://dev.mysql.com/doc/refman/5.0/en/describe.html](http://dev.mysql.com/doc/refman/5.0/en/describe.html)). Therefore, what you need to do is save your SELECT query as a view and execute a describe on the view:

```
CREATE VIEW myview AS SELECT qty, price, qty*price AS value FROM mytable;
DESCRIBE myview 
```

# ssas - 在 MDX 中交叉加入多个度量值组

> ID：14474410
> 
> 赞同：1
> 
> 时间：2013-01-23T07:22:31.773
> 
> 标签：ssas, mdx, cross-join

我有两个维度和一个度量值组：[Time].[Day]、[Scenario].[Scenario] 和包含两个度量值的度量值组，[Measures].[CleanPrice] 和 [Measures].[DirtyPrice]

我从以下结果开始，效果很好：

```
 01-01-2011  01-01-2012
Base  CleanPrice      100         100
Base  DirtyPrice      100         100
Up1%  CleanPrice      101         101
Up1%  DirtyPrice      101         101 
```

我*真正*想要生成的是一个计算成员来显示度量，以及当前场景和基本场景之间的增量。

所需的**结果**应如下所示：

```
 01-01-2011  01-01-2012
Base  CleanPrice  Value    100         100
Base  CleanPrice  Delta    0           0
Base  DirtyPrice  Value    100         100
Base  DirtyPrice  Delta    0           0
Up1%  CleanPrice  Value    101         101
Up1%  CleanPrice  Delta    1           1
Up1%  DirtyPrice  Value    101         101
Up1%  DirtyPrice  Delta    1           1 
```

我尝试过这样的事情，但不可能交叉加入度量值组：

```
WITH MEMBER [Value] as [Measures].CurrentMember
MEMBER [Delta] as [Measures].CurrentMember - ([Scenario].[Scenario].&[0], [Measures].CurrentMember)
SELECT NON EMPTY 
{ [Time].[Day].&[2011-01-01T00:00:00], [Time].[Day].&[2012-01-01T00:00:00] }
ON COLUMNS,
{ [Scenario].[Scenario].&[0], [Scenario].[Scenario].&[1] }  * 
{ [Measures].[CleanPrice], [Measures].[DirtyPrice] } *
{ [Value], [Delta] }
ON ROWS
FROM Results 
```

我创建了两个计算成员，[Value] 简单地作为当前度量，而 [Delta] 采用当前度量，并获得该度量与基本方案的差异。

我想交叉加入具有干净价格和脏价格的度量值组，以及两个计算成员的度量值组，但这是不可能的。

有没有办法产生预期的结果？我想避免创建度量 [CleanPrice Delta] 和 [DirtyPrice Delta]，因为我实际上有很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:05:15.477

一种方法是创建一个新维度，例如，`[Metric]`有两个成员，`[Value]`并且`[Delta]`. 然后按照以下几行将 MDX 写入计算脚本：

```
SCOPE ([Metric].[Delta], [Scenario].[Scenario].[Scenario]);
    this =   ([Metric].[Value], [Scenario].[Scenario].currentmember)
           - ([Metric].[Value], [Scenario].[Scenario].&[0]);
END SCOPE; 
```

然后，这将自动适用于链接到`[Scenario]`维度的所有度量。

# payment - osCommerce：经常性付款

> ID：14474419
> 
> 赞同：0
> 
> 时间：2013-01-23T07:23:41.957
> 
> 标签：payment, oscommerce, recurring-billing

我在网上搜索了很多，试图获得一些用于定期付款的模块，但没有成功。谁能知道如何将定期付款集成或实施到 osCommerce 产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:49:10.103

如果您使用贝宝，您可以使用[贝宝定期计费模块（在](http://addons.oscommerce.com/info/6917)[https://www.paypal.com/pdn-recurring](https://www.paypal.com/pdn-recurring)中配置您的帐户以进行定期付款）

# iphone - iPad Retina 登陆页面大小 - 2MB

> ID：14474432
> 
> 赞同：1
> 
> 时间：2013-01-23T07:24:55.137
> 
> 标签：iphone, ios, xcode

ipad 视网膜（即 1536 x 2048）的登录页面约为 2MB。Apple 似乎强制要求使用 PNG 作为登录页面。是否可以减小此文件大小？（我的着陆页已经很简单了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:33:17.123

实际上，图像的字节大小不仅取决于分辨率，还取决于位深度。例如 100x100 PNG 16bit/24bit

如果你觉得它不会影响图像质量，你可以减少 png 的位深度，如果你发现图像质量在降低位深度时变得不可接受，那么你的图像并不是那么简单。

您还可以使用颜色/渐变代替图像，以便完全删除图像

您还可以使用平铺图像（如果适合您），并且可以在资源中保留一个小图像。

看...你有很多选择我的朋友..!!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T07:44:14.577

我正在使用 ImageOptim 来减少我所有的图像。工作得很好而且速度很快。只需下载、打开并将文件夹或所有图像拖放到界面上即可。

[http://imageoptim.com/](http://imageoptim.com/)

甚至还有一个案例研究，说明该工具可用于缩小 iOS 应用程序的效果：

[http://imageoptim.com/tweetbot.html](http://imageoptim.com/tweetbot.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T07:31:25.380

使用[图像优化器](http://tools.dynamicdrive.com/imageoptimizer/)。您可以在线优化图像。

# php - 会话过期后 Magento 设置默认商店视图

> ID：14474435
> 
> 赞同：0
> 
> 时间：2013-01-23T07:25:07.110
> 
> 标签：php, javascript, magento, magento-1.7

会话过期后如何以编程方式设置或重定向用户？在登录时，用户被重定向到指定的商店视图。此商店视图仅适用于登录用户。当会话过期时，我会将用户重定向到默认商店视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:01:28.847

我修改了 Core/Model/App.php _checkCookieStore 方法

```
protected function _checkCookieStore($type)
    {
        if (!$this->getCookie()->get()) {
            return $this;
        }

        $session = Mage::getSingleton('customer/session', array('name'=>'frontend'));
        if (!$session->isLoggedIn()) {
            unset($_COOKIE['store']);
        }
        $store = $this->getCookie()->get(Mage_Core_Model_Store::COOKIE_NAME);
        if ($store && isset($this->_stores[$store])
            && $this->_stores[$store]->getId()
            && $this->_stores[$store]->getIsActive()) {
            if ($type == 'website'
                && $this->_stores[$store]->getWebsiteId() == $this->_stores[$this->_currentStore]->getWebsiteId()) {
                $this->_currentStore = $store;
            }
            if ($type == 'group'
                && $this->_stores[$store]->getGroupId() == $this->_stores[$this->_currentStore]->getGroupId()) {
                $this->_currentStore = $store;
            }
            if ($type == 'store') {
                $this->_currentStore = $store;
            }
        }
        return $this;
    } 
```

如果会话未登录，我会取消设置商店 cookie。

# python - django-autocomplete-light 简单用法

> ID：14474441
> 
> 赞同：18
> 
> 时间：2013-01-23T07:25:31.230
> 
> 标签：python, django, autocomplete, django-autocomplete-light

我正在尝试了解如何将[django-autocomplete-light](https://github.com/yourlabs/django-autocomplete-light)用于现有项目。对于 django 来说，这似乎是一个很好的自动完成解决方案，我已经在使用普通的 ModelChoiceFields。

所以，假设我有一个名为 MyModel 的模型，它有一个 id 和一个名称。我想知道的是创建表单小部件的最简单方法，它可以为我提供相同的功能

```
mymodel = forms.ModelChoiceField（必需=True，queryset=ships.models.Authority.objects.all()，） 

```

所以我可以将该小部件添加到我想要的任何表单中，以便在不使用 select.t 的情况下选择 MyModel 的实例

有什么需要的步骤？我已经将 'autocomplete_light' 添加到 INSTALLED_APPS 和

```
url(r'autocomplete/', include('autocomplete_light.urls')), 
```

到 urls.py 和

```
import autocomplete_light
autocomplete_light.autodiscover() 
```

前

```
admin.autodiscover() 
```

但是我对下一步该怎么做感到困惑:(

请不要在我已经彻底阅读过的文档中指出我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T12:16:17.557

## 选择小部件是 ModelChoiceField 的默认小部件

此表单字段未指定小部件，因此[默认情况下应使用选择小部件](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)：

```
mymodel = forms.ModelChoiceField(
                required=True,
                queryset=ships.models.Authority.objects.all(),
          ) 
```

这就是您看到选择字段而不是自动完成的原因。

您是否阅读[过有关使用小部件的 django 文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)？

## 改用 autocomplete_light.ChoiceWidget

您所要做的就是[指定小部件](http://django-autocomplete-light.readthedocs.org/en/latest/forms.html#widget-in-action)：

```
mymodel = forms.ModelChoiceField(
            required=True,
            queryset=ships.models.Authority.objects.all(),
            widget=autocomplete_light.ChoiceWidget('AutocompleteName')
          ) 
```

如果您不知道自动完成的名称是什么，请以员工身份登录并打开`http://yoursite/autocomplete/`.

确保您已正确加载 jquery 并且 autocomplete-light 的静态文件也已加载！

## 备择方案

FTR：另一种方法是可能的，使用`autocomplete_light.modelform_factory`诸如[或之类的](http://django-autocomplete-light.readthedocs.org/en/latest/quick.html#quick-form-integration)[快捷方式`autocomplete_light.modelform_factory``autocomplete_light.get_widgets_dict`](http://django-autocomplete-light.readthedocs.org/en/latest/quick.html#quick-form-integration)。[API 文档](http://django-autocomplete-light.readthedocs.org/en/latest/forms.html#id1)是可以通过的，但它并不优于[阅读源代码](https://github.com/yourlabs/django-autocomplete-light/blob/master/autocomplete_light/forms.py)。

总而言之，**如果您使用的是 ModelForm** ，我认为最简单的方法是使用 get_widgets_dict 快捷方式。

## 隐藏的文档

您可能没有找到说明书，因为它是[docs_rewrite](https://django-autocomplete-light.readthedocs.org/en/docs_rewrite/cookbook.html#high-level-basics)分支中正在进行的工作，但“高级基础知识”的第二部分提供了几个使用小部件的示例。

我知道文档有问题，因此 docs_rewrite 分支。现在我专注于改进移动支持。

# api - 每页指定项目

> ID：14474443
> 
> 赞同：0
> 
> 时间：2013-01-23T07:25:33.107
> 
> 标签：api, limit, picasa

我正在尝试查询 Picasa 网络相册以提取相册/照片数据（显然！）但最初我只需要提取前 4 张照片。有没有办法限制特定字段或指定每页的项目？

我已经用 Facebook 的 Graph API 完成了类似的事情，但是我无法为 Picasa 找到类似的东西。我能找到的唯一与限制响应相关的项目是指定哪些字段，但与行数无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:10:30.897

使用 max-results 参数。请参阅此处的文档。 [https://developers.google.com/picasa-web/docs/2.0/reference#Parameters](https://developers.google.com/picasa-web/docs/2.0/reference#Parameters)

# iphone - 从 iphone 的通讯录中导入特定的联系方式

> ID：14474446
> 
> 赞同：0
> 
> 时间：2013-01-23T07:25:53.897
> 
> 标签：iphone, xcode, addressbookui

在我的应用程序中，我使用 addressbookui 导入联系人详细信息。如果电子邮件或手机号码为空，我的应用程序会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:45:26.573

对于电子邮件，试试这个：

```
 ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);

    if(ABMultiValueGetCount(eMail) > 0) 
 {
      NSString *personEmail =  (NSString *)ABMultiValueCopyValueAtIndex(eMail, 0);
  } 
```

# rpm - 如何准备文件列表以从 RPM 规范文件构建 rpm

> ID：14474447
> 
> 赞同：1
> 
> 时间：2013-01-23T07:26:00.623
> 
> 标签：rpm, rpm-spec

我正在一个大模块中工作，我们从单个 vob 构建多个 RPM。每个模块都有一个单独的规范文件，每个模块所需的文件列表在 RPM SPEC 文件中指定。

我不能盲目地构建一个包含所有模块库的 tar，其大小为 7 GB（但是，无论如何，对于任何特定模块，我需要 10000 个文件中的 30 个）。

我需要构建所需文件的 tar，该文件在每个 SPEC 的 %files 部分下指定。

是否可以在构建 .tar 之前从 SPEC grep %files 部分**（在构建 RPM 之前）**

我试过了 ：

```
 rpm -ql --specfile module1.spec
   (contains no files)

   rpm -ql --queryformat '%{NAME}: %{FILENAMES}\n' --specfile module1.spec
   Module1: (none)
   (contains no files) 
```

但我的 %file 部分包含大约 30 个文件。

我的计划是从 SPEC 中提取文件，准备文件列表，通过`tar -cvf module1.tar -T module_file_list_1`并包含在 SPEC 中`SOURCE : /dir_1/module1.tar`

# html - 我可以更改 Font Awesome 图标颜色的颜色吗？

> ID：14474452
> 
> 赞同：313
> 
> 时间：2013-01-23T07:26:39.513
> 
> 标签：html, css, colors, icons, font-awesome

`<a>`出于某种原因，我必须将我的图标包装在标签中。
有没有办法将字体真棒图标的颜色更改为黑色？
还是只要它包裹在`<a>`标签中就不可能？字体真棒应该是字体而不是图像，对吧？

![在此处输入图像描述](../Images/272f537d3b6ea360a8f5e80e5a05b632.png)

```
<a href="/users/edit"><i class="icon-cog"></i> Edit profile</a> 
```

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2013-01-23T07:31:53.493

这对我有用：

```
.icon-cog {
  color: black;
} 
```

**对于4.7.0**以上的 Font Awesome 版本，它看起来是这样的：

```
.fa-cog {
  color: black;
} 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-12-01T19:27:04.193

HTML：

```
 <i class="icon-cog blackiconcolor"> 
```

CSS：

```
 .blackiconcolor {color:black;} 
```

您还可以为按钮图标添加额外的类...

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2013-03-11T19:06:27.090

您可以在样式属性中指定颜色：

```
<a href="/users/edit"><i class="icon-cog" style="color:black"></i> Edit profile</a> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-02-23T02:57:33.960

要更改整个项目的字体真棒图标颜色，请在您的 css 中使用它

```
.fa {
  color : red;
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-03-25T06:13:44.017

尝试这个：

```
<i class="icon-cog text-red">
<i class="icon-cog text-blue">
<i class="icon-cog text-yellow"> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-09-08T16:10:23.013

如果您不想更改 CSS 文件，这对我有用。在 HTML 中，使用颜色添加样式：

```
<i class="fa fa-cog" style="color:#fff;"></i> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-09-06T15:37:33.583

要在那种按钮中只点击齿轮图标，您可以给按钮一个类，并仅在按钮内部设置图标的颜色。

HTML：

```
<a class="my-nice-button" href="/users/edit">
    <i class="icon-cog"></i>
    Edit profile
</a> 
```

CSS：

```
.my-nice-button>i { color: black; } 
```

这将使作为按钮的直接后代的任何图标变为黑色。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-08-09T08:11:12.113

> 有没有办法将字体真棒图标的颜色更改为黑色？

就在这里。见剪断波纹管

```
<!-- Assuming that you don't have, this needs to be in your HTML file (usually the header) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Here is what you need to use -->
<a href="/users/edit" class="fa fa-cog" style="color:black"> Edit Profile</a>
```

> 字体真棒应该是字体而不是图像，对吧？

是的，它是一种字体。因此，您可以将其缩放到任何大小而不会降低质量。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-03-27T06:05:54.867

参考@ClarkeyBoy 的答案，如果使用最新版本的`Font-Awesome`图标或使用`fa`类，下面的代码可以正常工作

```
.fa.icon-white {
    color: white;
} 
```

然后，添加`icon-white`到现有类

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-03-29T17:08:17.557

对我来说，唯一有效的是内联 css + 覆盖

```
<i class="fas fa-ellipsis-v fa-2x" style="color:red !important"></i> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-28T18:41:39.167

只需提供任何您想要的文本样式，例如：D HTML：

```
<a href="javascript:;" class="fa fa-trash" style="color:#d9534f;">
   <span style="color:black;">Text Name</span>
</a> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-23T05:30:20.860

您可以使用引导类更改 Font Awesome 的图标颜色

利用

```
text-color 
```

例子

```
text-white 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-07-15T01:13:21.190

```
.fa-search{
    color:#fff;
 } 
```

你用css编写代码，它会将颜色更改为白色或你想要的任何颜色，你指定它

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-09-14T20:03:44.187

在同一行中编写此代码，这会更改图标颜色：

```
<li class="fa fa-id-card-o" style="color:white" aria-hidden="true"> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-06-13T18:18:25.470

您可以通过使用**property****更改其前景色**来更改fontawesome 图标的颜色。以下是示例：**`css` `color`**

```
<i class="fa fa-cog" style="color:white"> 
```

* * *

这也支持svgs

```
<style>
.fa-cog{
color:white;
}
</style> 
```

* * *

```
<style>
.parent svg, .parent i{
color:white
}
</style>

<div class="parent">
  <i class="fa fa-cog" style="color:white">
</div> 
```

* * *

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-09-16T06:20:56.537

只要给它任何你想要的风格

```
style="color: white;font-size: 20px;" 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-08-09T08:25:43.620

使用**color**属性更改目标元素的颜色，如下所示：

```
.icon-cog { // selector of your element
    color: black;
} 
```

或者在最新版本的**font-awesome**中，您可以选择*填充*或*不填充图标*

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-09-05T12:06:32.730

如果要更改特定图标的颜色，可以使用以下内容：

```
.fa-stop {
    color:red;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-12-21T10:43:01.460

更改字体真棒图标的颜色可能有点棘手。更简单的方法是在 font-awesome 定义的类中添加你自己的类名，如下所示：

.

并在您的 CSS 中定位您的**custom_defined__class_name**以将颜色更改为您喜欢的任何颜色。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-06-02T04:04:43.433

在vs code之类的打开svg文件

换行

path fill="gray" 到你想要的任何颜色！就我而言，我将其更改为灰色！

* * *

## 回答 #21

> 赞同：-8
> 
> 时间：2013-01-23T07:44:55.907

HTML：

```
<i class="icon-cog blackiconcolor"> 
```

CSS：

```
 .blackiconcolor {color:black;} 
```

使用类将为您提供一个免费的绑定属性，您可以将其应用于您需要的任何标签。

# extjs - 在 extjs 中显示复杂的聚合数据结构

> ID：14474455
> 
> 赞同：1
> 
> 时间：2013-01-23T07:26:52.423
> 
> 标签：extjs, extjs4

我有一些复杂的数据结构，正在寻找一种以用户友好的方式呈现它们的方法：

数据结构：

```
A hasMany B 
B hasMany C (columns: C1, C2)
B hasMany D (columns: D1, D2, D3, D4) 
```

所以理想情况下，最终显示应该如下所示，其中前两个级别（A 和 B）是可扩展的树节点，而叶子（C 和 D）是不同的网格。

（文档中的[TreeGrid 示例](http://docs.sencha.com/ext-js/4-1/#!/example/tree/treegrid.html)看起来很相似，但叶子都有相同的列，这与我的用例不同。）

有更好的解决方案吗？

```
-A
  -B1
    -C (grid)
      C1    C2 (Header)
      c11   c12
      c21   c22
    -D (grid)
      D1    D2    D3    D4 (Header)
      d11   d12   d13   d14
      d21   d22   d23   d24
      d31   d32   d33   d34
  -B2
    -C (grid)
      C1    C2 (Header)
      c11   c12
      c21   c22
    -D (grid)
      D1    D2    D3    D4 (Header)
      d11   d12   d13   d14
      d21   d22   d23   d24
      d31   d32   d33   d34
  -B3
  .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:27:43.340

恐怕做不到 - 你正试图吃掉蛋糕并让它完整......你不能要求单个网格组件为每种记录类型提供不同的列。

如果您的显示涉及每条记录的不同列数，则应考虑使用`treegrid`.

如果我是你，我会在东面板上有一棵包含 As 和 B 的树；当用户点击一个 B 节点时，中心窗格上存在的两个网格将显示相关记录。

# twitter - 黑莓 10 推特集成

> ID：14474457
> 
> 赞同：1
> 
> 时间：2013-01-23T07:26:56.023
> 
> 标签：twitter, blackberry-10

我想将 Twitter 集成到我的 BlackBerry 10 应用程序中，以便我可以发布、获取、收藏和转发来自 Twitter 的消息。原生黑莓。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:13:07.370

目前，BB10 平台为[核心 Twitter 应用程序提供了内置的调用请求](https://developer.blackberry.com/cascades/documentation/device_platform/invocation/twitter.html)，但是，这些请求的功能非常有限——您只能分享具有不同 URI 的内容，而不能获取、收藏、转发消息等。

如果有另一个应用程序可以处理这些类型的请求，您可以根据需要使用未绑定（或绑定）请求，但为了做到这一点，您必须知道`Action`属性（以及`TargetID`在绑定调用的情况下）值。

这是一个解释调用发送机制以及绑定和未绑定请求的链接 - [https://developer.blackberry.com/cascades/documentation/device_platform/invocation/sending_invocation.html](https://developer.blackberry.com/cascades/documentation/device_platform/invocation/sending_invocation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:16:12.457

尝试在 github 上搜索 - 那里有几个示例 twitter 项目： [Github 搜索结果](https://github.com/search?q=twitter%20blackberry%2010&type=Repositories&ref=simplesearch)

例如：[BB10 示例 Twitter 应用程序](https://github.com/kylefowler/twitter-bb10)

# c++ - 获取VS C++项目的版本号

> ID：14474460
> 
> 赞同：1
> 
> 时间：2013-01-23T07:27:03.047
> 
> 标签：c++, visual-studio-2008, version

> **可能重复：**
> [如何从 Visual C++ 中的版本资源中读取](https://stackoverflow.com/questions/316626/how-do-i-read-from-a-version-resource-in-visual-c)

我在我的 C++ Visual Studio 项目中添加了一个资源“版本”，现在我想在我的代码中读回这个值！

这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:03:25.337

这是我在[Project: Merge](http://www.projectmerge.com)中的做法：

```
std::wstring ReadProcessVersion( const std::wstring& filename )
{
    char        buffer[ 8192 ];
    wchar_t*    version;
    UINT        size;

    if( GetFileVersionInfo( filename.c_str(), NULL, sizeof( buffer ), buffer ))
    {
        if( VerQueryValue( buffer, L"\\StringFileInfo\\080904B0\\FileVersion", reinterpret_cast< void** >( &version ), &size ))
        {
            return version;
        }
    }
    return L"";
} 
```

如果我没记错的话，资源标识符`080904B0`是依赖于语言环境的。（我只有英语。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:33:34.013

您使用函数[FindResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648042%28v=vs.85%29.aspx)访问资源并使用函数[LoadResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)访问它。在第二种情况下，您还将获得一个完整的示例来访问和更新资源。

# image - 在 Facebook Notification php 中显示另一个图像而不是应用图像

> ID：14474461
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:27:02.720
> 
> 标签：image, facebook-graph-api, notifications

我正在使用 Facebook api 发送通知，我的通知代码工作正常，但我需要显示另一个图像而不是应用图像。

如果有人早些时候这样做，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:52:14.487

您不能在通知中使用任何其他图像（假设您正在谈论`Notification API`）。通知中仅显示应用程序图标。

# jquery - 彩盒未正确调整大小

> ID：14474462
> 
> 赞同：0
> 
> 时间：2013-01-23T07:27:13.897
> 
> 标签：jquery, colorbox

我只是在颜色框中显示一张图像。

![在此处输入图像描述](../Images/79c60e55842757a79ecfed847477d954.png)

正如您在此处看到的，我什至注意为图像设置高度/宽度。但是彩盒包装没有设置正确的高度，它使用了错误的高度（20px）。

那是怎么回事？

它只发生在某些用户身上，我自己不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:36:59.510

`innerHeight`在初始化颜色框时尝试设置一个值：

```
$(element).colorbox({
    innerHeight: 529
}); 
```

# amazon-web-services - 与亚马逊 AWS 合作的最佳设置

> ID：14474465
> 
> 赞同：3
> 
> 时间：2013-01-23T07:27:30.010
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2

我有一个网站，它从不同的社交媒体服务获取备份，然后将数据存储在服务器上，然后显示在我的网站上。内容包括视频、图像和文本数据。

目前我正在使用带有 RDS 和 EBS 的 EC2 实例。数据存储在 EBS 卷中，但随着数据量足够大，超过 1 TB，而且还在增加。每次我的 EBS 卷被填满时，我都会附加另一个卷。

然后我将 S3 添加到我的设置中。Cron 作业在 S3 上运行和存储数据，EC2 实例显示来自 S3 的数据。为此，我正在使用 PHP SDK。

我面临的问题是 S3 在我当前的设置中非常慢。请建议我的设置是否良好，或者我需要对我的设置进行一些更改，以及如何加速 S3。或者我应该选择其他方式来设置。EC2 实例是运行 CentOS 的大型预留实例。

我听过一些关于将 S3 存储桶作为卷安装到 Ec2的[S3fs 。](http://code.google.com/p/s3fs/)这是一个不错的选择吗，因为当我将 S3 Bucket 安装到 Ec2 实例时，传输速率非常慢。

我是 AWS 的新手。我的用户不直接从 S3 访问文件，而是通过我在 EC2 实例上运行的网站访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:58:54.463

RDS 是存储元数据的不错选择，例如标签、评论和其他有关多媒体文件的相关信息。S3 适合存储静态内容，例如视频、音频和图片。我认为您使用 RDS 和 S3 的方法已经足够好了。

EBS 支持的实例有利于持久性。如果您将元数据存储在 RDS 上，将静态内容存储在 S3 上，那么您应该使用 EBS 支持的 EC2 实例的唯一原因是您现在有一些未版本化的配置文件。如果不是这种情况，假设您的配置已检查到版本控制中并且每次都可以按需提取新实例，那么您可能希望放弃 EBS 卷以支持临时存储。这可能会给您带来一些性能提升，但没什么大不了的。

关于您对 S3 延迟的担忧，是的，S3 很慢。虽然您的所有写入都可能直接发生在 S3 上，但我强烈建议您为 S3 存储桶设置[Amazon CloudFront](http://aws.amazon.com/cloudfront/#functionality)，并让您的网站使用来自 CloudFront 的多媒体内容。CloudFront 是一个内容交付网络 (CDN)，可与磁盘卷（EBS 支持或临时）以及 S3 一起使用。设置它不会超过几分钟。[CloudFront 还支持RTMP](http://en.wikipedia.org/wiki/Real_Time_Messaging_Protocol)上的流媒体文件。您可能需要像[GPAC这样的库](http://gpac.wp.mines-telecom.fr/)用于提示多媒体文件以使它们可以流式传输（如果尚未完成）。然后，您可能需要考虑为流式传输的视频/音频文件创建一个分发版，并为图像、Javascript、样式表和其他文本文件创建另一个分发版。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:12:42.760

为了更快地从我使用的 Amazon S3 获取和上传文件，请`batch()` [在此处找到](http://www.chrisjhill.co.uk/article/amazon-s3-batch-uploading-upload-stream)。

您还可以使用[cloudfront](http://aws.amazon.com/cloudfront/)更快地获取文件。我认为 9gag 也使用 cloudfront ..

# sql - 计算存储过程返回的行数

> ID：14474469
> 
> 赞同：21
> 
> 时间：2013-01-23T07:27:49.037
> 
> 标签：sql, sql-server-2008

如何计算存储过程以最快方式返回的行数。存储过程返回大约 100K 到 1M 记录的行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T07:32:30.953

选择[`@@rowcount`](http://technet.microsoft.com/en-us/library/ms187316.aspx)：

```
SELECT @@ROWCOUNT; 
```

执行存储过程后。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T07:31:55.143

您可以定义输出变量：

```
create procedure x
    (@p1 int output)
as
    select @p1 = count(*) 
    from Table 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-15T07:54:49.923

答案是 use[`@@ROWCOUNT`](https://docs.microsoft.com/en-us/sql/t-sql/functions/rowcount-transact-sql?view=sql-server-ver15)仍然有效，但我不建议`EXEC`在[现有 answer](https://stackoverflow.com/a/14474517/5070879)之后直接运行。

`SELECT`语句并不总是最后一个语句是存储过程，或者您可能有多个`SELECT`语句：

设想：

```
CREATE PROCEDURE p
AS
BEGIN
  CREATE TABLE #t(i INT);
  INSERT INTO #t(i) VALUES (1),(2);
  SELECT i FROM #t;
  DROP TABLE IF EXISTS t;
END

EXEC p;
-- i
-- 1
-- 2

SELECT @@ROWCOUNT;
-- 0 instead of 2 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=562a2d29822d7ff87bc877fcb5b9ff6e)**

* * *

一种方法是使用输出参数（与存储过程结果集一样多）：

```
CREATE PROCEDURE p(@cnt INT OUT)
AS
BEGIN
  CREATE TABLE #t(i INT);
  INSERT INTO #t(i) VALUES (1),(2);
  SELECT i FROM #t;
  SET @cnt = @@ROWCOUNT;  -- immediately after SELECT
  DROP TABLE IF EXISTS t;
END

DECLARE @i INT;
EXEC p2 @cnt = @i OUT;
SELECT @i;
-- 2 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=3daa2581b83d586c96ae4f2f04d2d038)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-07T12:25:33.320

```
Create procedure procedurename
AS
Begin

    Select * from Table --if you want where condition write here

End

Exec Procedurename

Select @@rowcount 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-17T10:29:28.510

我有一个类似的任务，但有一个限制，我不能改变 SP 来获得计数。因此：

```
sp_configure 'show advanced options', 1;  
reconfigure;
go

sp_configure 'ad hoc distributed queries', 1;  
reconfigure;  
go

select count(*) from 
    openrowset('SQLOLEDB','Data Source=localhost;Trusted_Connection=yes;
    Integrated Security=SSPI','exec DBNAME..SPName') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-05T15:32:32.277

获得相同结果的另一种方法

```
CREATE PROCEDURE NOMBRE_PROCEDIMIENTO
   as
BEGIN
   if EXISTS (SELECT * from NOMBRE_TABLA WHERE CONDITIONS HERE)
     BEGIN
       SELECT @@ROWCOUNT
     END
END 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-07T17:50:26.773

到目前为止，唯一对我有用的是：

一种。暂时修改存储过程以将结果数据集转储到表中。如果更改存储过程不是一个选项，则将 Alter Procedure 替换为 Declare 并删除结尾，如果不是可选的，则提供参数值并作为将数据集转储到表中的查询执行。

湾。编写表格并使用 SSMS 删除它。

C。使用脚本在查询中创建一个虚拟表，并使用 Insert into 和 exec 存储过程来填充它。

d。计算记录。

# xcode - 在 Xcode 上学习 OpenGL

> ID：14474478
> 
> 赞同：0
> 
> 时间：2013-01-23T07:28:47.180
> 
> 标签：xcode, opengl, graphics

您如何在 Xcode 上的 OpenGL 中编码而不进入应用程序模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:39:33.480

请记住，Mac OS X 仅支持最高 3.2 的 OpenGL，因此您只能使用 GLSL 1.3 版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:37:37.423

看看[iOS 上的 OpenGL ES 2.0 对象拾取](https://stackoverflow.com/questions/6774197/opengl-es-2-0-object-picking-on-ios/)

它有一些信息和 gl 设置示例。从苹果示例中获取 gl 模板仍然会很好。

# java - 每次用户玩游戏时如何随机化问题

> ID：14474479
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:28:59.030
> 
> 标签：java, android

我正在尝试创建一个问答游戏，该游戏将在活动结束时显示用户在活动中的得分。我有 50 个问题，但每次用户玩游戏时只会显示 10 个问题。我遇到了麻烦，因为 a 无法保存用户的分数。

以下是我的*java*代码，假设`Q1.java`并且`Q2.java`是我的*java*类。`Whoami.java`是用户开始测验的代码，`score.java`也是显示分数的地方。请帮帮我！提前致谢！

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_question1);

    TextView q1 = (TextView) findViewById(R.id.q1);
    q1.setText("I am an amphibian who has undergone metamorphosis. I have slippery skin, and spend most of my time in or near water. I breathe with lungs now, but when I was a tadpole I had gills.");
}

@Override
public void onClick(View arg0) 
{
    // TODO Auto-generated method stub
    int cnt = 0;

    final Animation animScale = AnimationUtils.loadAnimation(this, R.animator.anim_scale);
    final Animation animAlpha = AnimationUtils.loadAnimation(this, R.animator.anim_alphas);

    Button btn1 = (Button) findViewById(R.id.btnopt1_a);
    Button btn2 = (Button) findViewById(R.id.btnopt1_b);
    Button btn3 = (Button) findViewById(R.id.btnopt1_c);

    ImageView img1 = (ImageView) findViewById(R.id.imageView1);
    ImageView img2 = (ImageView) findViewById(R.id.imageView2);
    ImageView img3 = (ImageView) findViewById(R.id.imageView3);

    img1.setOnClickListener(new ImageView.OnClickListener()
    {
            @Override
            public void onClick(View arg0) {
                arg0.startAnimation(animScale);
            }});

    img2.setOnClickListener(new ImageView.OnClickListener()
    {
            @Override
            public void onClick(View arg0) {
                arg0.startAnimation(animAlpha);
            }});

    img3.setOnClickListener(new ImageView.OnClickListener()
    {
            @Override
            public void onClick(View arg0) {
                arg0.startAnimation(animAlpha);
            }});

    if(btn1.isClickable())      
    {
        img1.startAnimation(animScale);
        cnt++;  
        Intent i = new Intent(this,Q2.class);
        i.putExtra("score",cnt);
        startActivity(i);
    }

    else if (btn2.isClickable())
    {
        img2.startAnimation(animAlpha);
    }

    else if (btn3.isClickable())
    {
        img3.startAnimation(animAlpha);
    }
}
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }
} 
```

那么这是我的另一个类名 Q2.java

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_question2);

    TextView q2 = (TextView) findViewById(R.id.q2);
    q2.setText("I am a bird that has wings, but does not fly. I spend most of my time in the water. I am known to live in colder regions like Antarctica.");
}

@Override
public void onClick(View arg0) 
{
    // TODO Auto-generated method stub
    int cnt = 0;

    final Animation animScale = AnimationUtils.loadAnimation(this, R.animator.anim_scale);
    final Animation animAlpha = AnimationUtils.loadAnimation(this, R.animator.anim_alphas);

    Button btn1 = (Button) findViewById(R.id.btnopt2_a);
    Button btn2 = (Button) findViewById(R.id.btnopt2_b);
    Button btn3 = (Button) findViewById(R.id.btnopt2_c);

    ImageView img1 = (ImageView) findViewById(R.id.imageView1);
    ImageView img2 = (ImageView) findViewById(R.id.imageView2);
    ImageView img3 = (ImageView) findViewById(R.id.imageView3);

    img1.setOnClickListener(new ImageView.OnClickListener()
    {
            @Override
            public void onClick(View arg0) {
                arg0.startAnimation(animScale);
            }});

    img2.setOnClickListener(new ImageView.OnClickListener()
    {
            @Override
            public void onClick(View arg0) {
                arg0.startAnimation(animAlpha);
            }});

    img3.setOnClickListener(new ImageView.OnClickListener()
    {
            @Override
            public void onClick(View arg0) {
                arg0.startAnimation(animAlpha);
            }});

    if(btn1.isClickable())      
    {
        img1.startAnimation(animScale);
        cnt++;  
        Intent i = new Intent(this,Q3.class);
        i.putExtra("score",cnt);
        startActivity(i);
    }

    else if (btn2.isClickable())
    {
        img2.startAnimation(animAlpha);
    }

    else if (btn3.isClickable())
    {
        img3.startAnimation(animAlpha);
    }
}
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }
} 
```

这是我的 Score.java

```
 @Override
    public void onCreate(Bundle savedInstanceState) 
 {
     try
     {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_score);

        Intent intent = getIntent();
        int score = intent.getIntExtra("score",0);

        Button btnok = (Button)findViewById(R.id.btnok);
        btnok.setOnClickListener(this);

        TextView txtscore = (TextView) findViewById(R.id.txtscore);
        txtscore.setText("Your score is : " + score +"/10");
     }
     catch(Exception e)
     {
         try {
            throw e;
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
     }
 }

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) 
    {

case R.id.btnok:
     Intent i = new Intent (this,MainMenu.class);
     startActivity(i);       
default:
     break;
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
} 
```

}

最后是我的 Whoami.java 类

```
public class Whoami extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.activity_whoami);

 Button bplay =(Button) findViewById(R.id.bplay);
 bplay.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Random random = new Random(); 

        switch(random.nextInt(50)) 
        { 

           case 0:
            Intent newActivity1 = new Intent(Whoami.this,Q1.class);     
            startActivity (newActivity1);
           break;
           case 1:
            Intent newActivity2 = new Intent(Whoami.this,Q2.class);     
            startActivity(newActivity2);
           break;
           case 2:
            Intent newActivity3 = new Intent(Whoami.this,Q3.class);     
            startActivity(newActivity3);
           break;
           case 3:
            Intent newActivity4 = new Intent(Whoami.this,Q4.class);     
            startActivity(newActivity4);
           break;
           case 4:
            Intent newActivity5 = new Intent(Whoami.this,Q5.class);     
            startActivity(newActivity5);
            break;
           case 5:
            Intent newActivity6 = new Intent(Whoami.this,Q6.class);     
            startActivity(newActivity6);
            break;
           case 6:
            Intent newActivity7 = new Intent(Whoami.this,Q7.class);     
            startActivity(newActivity7);
            break;
           case 7:
            Intent newActivity8 = new Intent(Whoami.this,Q8.class);     
            startActivity(newActivity8);
            break;
           case 8:
            Intent newActivity9 = new Intent(Whoami.this,Q9.class);     
            startActivity(newActivity9);
            break;
           case 9:
            Intent newActivity10 = new Intent(Whoami.this,Q10.class);     
            startActivity(newActivity10);
            break;
           case 10:
             Intent newActivity11 = new Intent(Whoami.this,Q11.class);     
             startActivity(newActivity11);
             break;
           case 11:
             Intent newActivity12 = new Intent(Whoami.this,Q12.class);     
             startActivity(newActivity12);
             break;
           case 12:
             Intent newActivity13 = new Intent(Whoami.this,Q13.class);     
             startActivity(newActivity13);
             break;
           case 13:
               Intent newActivity14 = new Intent(Whoami.this,Q14.class);
               startActivity(newActivity14);
               break;
           case 14:
               Intent newActivity15 = new Intent(Whoami.this,Q15.class);
               startActivity(newActivity15);
               break;
           case 15:
               Intent newActivity16 = new Intent(Whoami.this,Q16.class);
               startActivity(newActivity16);
               break;
           case 16:
               Intent newActivity17 = new Intent(Whoami.this,Q17.class);     
               startActivity (newActivity17);
               break;
           case 17:
               Intent newActivity18 = new Intent(Whoami.this,Q18.class);     
               startActivity(newActivity18);
               break;
           case 18:
               Intent newActivity19 = new Intent(Whoami.this,Q19.class);     
               startActivity(newActivity19);
               break;
           case 19:
               Intent newActivity20 = new Intent(Whoami.this,Q20.class);     
               startActivity(newActivity20);
               break;
           case 20:
               Intent newActivity21 = new Intent(Whoami.this,Q21.class);     
               startActivity(newActivity21);
               break;
           case 21:
               Intent newActivity22 = new Intent(Whoami.this,Q22.class);     
               startActivity(newActivity22);
               break;
           case 22:
               Intent newActivity23 = new Intent(Whoami.this,Q23.class);     
               startActivity(newActivity23);
               break;
           case 23:
               Intent newActivity24 = new Intent(Whoami.this,Q24.class);     
               startActivity(newActivity24);
               break;
           case 24:
               Intent newActivity25 = new Intent(Whoami.this,Q25.class);     
               startActivity(newActivity25);
               break;
           case 25:
               Intent newActivity26 = new Intent(Whoami.this,Q26.class);     
               startActivity(newActivity26);
               break;
           case 26:
                Intent newActivity27 = new Intent(Whoami.this,Q27.class);     
                startActivity(newActivity27);
                break;
           case 27:
                Intent newActivity28 = new Intent(Whoami.this,Q28.class);     
                startActivity(newActivity28);
                break;
           case 28:
                Intent newActivity29 = new Intent(Whoami.this,Q29.class);     
                startActivity(newActivity29);
                break;
           case 29:
                  Intent newActivity30 = new Intent(Whoami.this,Q30.class);
                  startActivity(newActivity30);
                  break;
           case 30:
                  Intent newActivity31 = new Intent(Whoami.this,Q31.class);
                  startActivity(newActivity31);
                  break;
           case 31:
                  Intent newActivity32 = new Intent(Whoami.this,Q32.class);
                  startActivity(newActivity32);
                  break;
           case 32:
                  Intent newActivity33 = new Intent(Whoami.this,Q33.class);     
                  startActivity(newActivity33);
                  break;
           case 33:
                  Intent newActivity34 = new Intent(Whoami.this,Q34.class);     
                  startActivity(newActivity34);
                  break;
           case 34:
                  Intent newActivity35 = new Intent(Whoami.this,Q35.class);     
                  startActivity(newActivity35);
                  break;
           case 35:
                  Intent newActivity36 = new Intent(Whoami.this,Q36.class);     
                  startActivity(newActivity36);
                  break;
           case 36:
                  Intent newActivity37 = new Intent(Whoami.this,Q37.class);     
                  startActivity(newActivity37);
                  break;
           case 37:
                  Intent newActivity38 = new Intent(Whoami.this,Q38.class);     
                  startActivity(newActivity38);
                  break;
           case 38:
                  Intent newActivity39 = new Intent(Whoami.this,Q39.class);     
                  startActivity(newActivity39);
                  break;
           case 39:
                  Intent newActivity40 = new Intent(Whoami.this,Q40.class);     
                  startActivity(newActivity40);
                  break;
           case 40:
                  Intent newActivity41 = new Intent(Whoami.this,Q41.class);     
                  startActivity(newActivity41);
                  break;
           case 41:
                   Intent newActivity42 = new Intent(Whoami.this,Q42.class);     
                   startActivity(newActivity42);
                   break;
           case 42:
                   Intent newActivity43 = new Intent(Whoami.this,Q43.class);     
                   startActivity(newActivity43);
                   break;
           case 43:
                   Intent newActivity44 = new Intent(Whoami.this,Q44.class);     
                   startActivity(newActivity44);
                   break;
           case 44:
                   Intent newActivity45 = new Intent(Whoami.this,Q45.class);
                   startActivity(newActivity45);
                   break;
           case 45:
                   Intent newActivity46 = new Intent(Whoami.this,Q46.class);
                   startActivity(newActivity46);
                   break;
           case 46:
                   Intent newActivity47 = new Intent(Whoami.this,Q47.class);
                   startActivity(newActivity47);
                   break;
           case 47:
                   Intent newActivity48 = new Intent(Whoami.this,Q48.class);     
                   startActivity (newActivity48);
                   break;
           case 48:
                   Intent newActivity49 = new Intent(Whoami.this,Q49.class);     
                   startActivity(newActivity49);
                   break;
           case 49:
                   Intent newActivity50 = new Intent(Whoami.this,Q50.class);     
                   startActivity(newActivity50);
                   break;

        }
    }
    });
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:12:12.710

随之创建一个 QuestionActivity 类和 xml 布局。将问题作为字符串传递给 Activity 通过

```
intentInstance.putExtra("question", yourRandomQuestion); 
```

并使用从 QuestionActivity 类中获取传递的值

```
Intent intent = getIntent();
String question = intent.getStringExtra("question"); 
```

然后将问题放入 TextView。

希望能帮助到你：）

# perl - 在 CSV 中搜索值

> ID：14474483
> 
> 赞同：-3
> 
> 时间：2013-01-23T07:29:24.607
> 
> 标签：perl, unix

我有 csv 文件和一个值。我想搜索这个值是否存在于 CSV 中。能否请您帮忙并告诉哪些代码可用于打开 CSV 文件，然后查找值是否在 CSV 中可用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:34:57.950

```
perl -lne 'if(/"your_value"/){print;exit}' your_csv_file 
```

你为什么不简单地使用 grep 一个命令行这样的：

```
grep 'your_value' your_csv_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:55:43.353

如果你可以安装 CPAN 模块，试试这个：[DBD::CSV](http://search.cpan.org/perldoc?DBD%3a%3aCSV)，你可以像处理关系数据库一样处理你的文件，通过 DBI 的 SQL 接口查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:45:00.187

如果您可以将您的价值放在正则表达式中，我认为这应该可行：

```
perl -p -e 'unless (m/,valueToSearchAsRegex,/) {$_=""}' filename 
```

它将打印文件文件名中具有该值的所有*行*。

否则，如果您想在使用 Text::CSV 的 perl 程序中执行此操作，您可以尝试：

```
my $csv = Text::CSV->new();
open my $io, "<", $file or die "$file: $!";
my $found = 0;
while (my $row = $csv->getline ($io)) {
    my @fields = @$row;
    for my $field (@fields) {
        if ($field =~ m/valueToSearchAsRegex/) {
            $found = 1;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:22:43.823

我认为这就是你想要的：

```
#!/usr/bin/perl -w
use strict;

my $value = 'val6';
my @array = <DATA>;

foreach my $a (@array)
{
    my @array2 = split (/,/, $a);
    foreach my $b (@array2)
    {
        if ( $b eq $value )
        {
            print "Given Value is available in hte CSV\n";
        }
    }
}

__DATA__
val1,val2,val3,val4
val5,val6,val7,val7 
```

**输出**：

```
Given Value is available in hte CSV 
```

如果您的 csv 文件很大，请确保不要将 csv 读入数组。改用带有 while 循环的文件句柄。

这是另一个镜头`grep`

```
#!/usr/bin/perl -w
use strict;

my $value = 'val5';
my @array = <DATA>;

my $out = grep { /$value/ } @array;
if ($out)
{
    print "Given value is present in the CSV\n";
}
else
{
    print "Given value is not present in the CSV\n";
}

__DATA__
val1,val2,val3,val4
val5,val6,val7,val7 
```

**输出：**

```
Given value is present in the CSV 
```

# jsf-2 - JSF 核心标签：setPropertyActionListener vs 属性 vs 参数

> ID：14474484
> 
> 赞同：13
> 
> 时间：2013-01-23T07:29:26.903
> 
> 标签：jsf-2

`setPropertyActionListener`vs `attribute`vs 和有什么不一样`param`？

什么时候使用`setPropertyActionListener`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T08:01:48.960

**1\. f:setPropertyActionListener:**

使用此标签，您可以直接在您的支持 bean 中设置属性。例子：

xhtml:

```
<h:commandButton action="page.xhtml" value="OK">
  <f:setPropertyActionListener target="#{myBean.name}" value="myname"/>
</h:commandButton> 
```

后备豆：

```
@ManagedBean
@SessionScoped
public class MyBean{

    public String name;

    public void setName(String name) {
        this.name= name;
    }

} 
```

这会将`name`支持 bean 的属性设置为值**myname**。

**2\. f:参数：**

这个标签简单地设置了请求参数。例子：

xhtml:

```
<h:commandButton action="page.xhtml">
    <f:param name="myparam" value="myvalue" />
</h:commandButton> 
```

因此您可以在支持 bean 中获取此参数：

```
FacesContext.getExternalContext().getRequestParameterMap().get("myparam") 
```

**3\. f：属性：**

使用此标记，您可以传递属性，以便您可以从支持 bean 的动作侦听器方法中获取该属性。

xhtml:

```
<h:commandButton action="page.xhtml" actionListener="#{myBean.doSomething}"> 
    <f:attribute name="myattribute" value="myvalue" />
</h:commandButton> 
```

因此您可以从动作侦听器方法中获取此属性：

```
public void doSomething(ActionEvent event){
    String myattr = (String)event.getComponent().getAttributes().get("myattribute");
} 
```

`f:setPropertyActionListener`每当您想设置支持 bean 的属性时，您都应该使用它。如果要将参数传递给支持 bean，请考虑`f:param`和`f:attribute`. 此外，重要的是要知道 with `f:param`you 可以传递`String`值，而 with `f:attribute`you 可以传递对象。

# c# - MVC 3 Web 应用程序的 IIS 7.5 中不显示索引页面

> ID：14474485
> 
> 赞同：0
> 
> 时间：2013-01-23T07:29:29.463
> 
> 标签：c#, iis, iis-7.5

我有一个带有 IIS 7.5 的服务器和一个 MVC 3 中的 Web 应用程序。

当我尝试获取网站的索引/主页时，我看到 IIS 的欢迎页面而不是我的应用程序 [http://1.bp.blogspot.com/_bCYQxIvMQ2U/TRqMgglKvsI/AAAAAAAAAdk/oh6-o5YpTnE/s320/welcome.png](http://1.bp.blogspot.com/_bCYQxIvMQ2U/TRqMgglKvsI/AAAAAAAAAdk/oh6-o5YpTnE/s320/welcome.png)

问题仅发生在索引/主页上，因为我能够获取其他页面。

你能指出我正确的方向吗？谢谢

在我的 Global.asax

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

} 
```

在 web.config

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:37:28.930

在 wwwroot 目录中为您的应用程序创建目录并将所有文件放在那里。在 IIS 管理器中配置应用程序并在浏览器中键入：

```
http://localhost/YOUR_APP_NAME/ 
```

检索您的应用程序的主页。或者简单地使用 iis 管理器树中应用程序上下文菜单中的“浏览”菜单项。

# google-maps - 指定具有由纬度和经度坐标指定的边界/视口的谷歌地图静态图像

> ID：14474486
> 
> 赞同：0
> 
> 时间：2013-01-23T07:29:41.443
> 
> 标签：google-maps, google-static-maps

我正在尝试从 Google Static Maps API 请求图像，其地图边界由一对纬度和经度坐标指定。我试过以两个坐标的中心为中心，但似乎没有任何参数可以使用静态 API 执行此操作。有谁知道如何做到这一点？

注意：这是一个桌面应用程序，我*没有*使用 Javascript API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:17:45.173

问题是您不能将请求基于地图的角落，因为 1.**缩放级别是离散值**和 2.**像素表示的纬度量随 latitude 变化**。因此，要显示 2 度，您需要在赤道附近有一个给定的地图高度，在两极附近需要一个不同的高度（更大）。您是否愿意显示不同高度的地图以始终适合 2 度？

如果是这样，您可以使用[**我另**](https://stackoverflow.com/questions/12507274/how-to-get-bounds-of-a-google-static-map/12511820#12511820)一篇文章中的 MercatorProjection 对象，并使用以下函数来计算必要的地图大小：

```
<script src="MercatorProjection.js"></script>

function getMapSize(center,zoom){
    var proj = new MercatorProjection();
    var scale = Math.pow(2,zoom);
    var centerPx = proj.fromLatLngToPoint(center);
    var SW = new google.maps.LatLng(center.lat()-1,center.lng()-1);
    var southzWestPx = proj.fromLatLngToPoint(SW);
    var NE = new google.maps.LatLng(center.lat()+1,center.lng()+1);
    var northEastPx = proj.fromLatLngToPoint(NE);

// Then you can calculate the necessary width and height of the map:
    var mapWidth = Math.round((northEastPx.x - southzWestPx.x) * scale);
    var mapHeight = Math.round((southzWestPx.y - northEastPx.y) * scale); 
} 
```

使用 center = new google.maps.LatLng(49.141404, -121.960988) 和 zoom = 7 你会发现你需要一张 (W x H) 182 x 278 像素的地图才能显示 2 x 2 度。

# azure - Azure 中的 CDN 和带宽是否相同？

> ID：14474489
> 
> 赞同：0
> 
> 时间：2013-01-23T07:29:49.310
> 
> 标签：azure

我只是想确认一下 Azure 中的 CDN 和带宽是否相同？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:04:49.993

不，CDN 和带宽是完全不同的概念。CDN 代表 Content Delivery Network，它允许您从离应用程序用户最近的服务器提供 Blob 存储内容。更多关于 CDN 的信息：[http](http://en.wikipedia.org/wiki/Content_delivery_network) ://en.wikipedia.org/wiki/Content_delivery_network 。带宽是传输的数据量（通常以字节为单位）。

# arrays - 在Struts 2中将字符串数组作为静态参数传递

> ID：14474492
> 
> 赞同：4
> 
> 时间：2013-01-23T07:30:00.463
> 
> 标签：arrays, string, parameters, static, struts2

`String`我想以可以传递静态参数数组的方式声明一个动作。我尝试了以下代码：

```
<action name="saveRecord" class="saveRecordAction">
        <result name="success" type="tiles">tiles:saveRecordSuccess</result>
        <param name="names">name1</param>
        <param name="names">name2</param>
        <param name="names">name3</param>
    </action> 
```

我的动作课上有一个二传手：

```
public void setNames(String[] name){
    mNames = name;
} 
```

但我只收到一个名字，它是最后一个，`"name3"`

我想要的可能吗？如果是，正确的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:39:43.923

struts 静态参数的工作方式类似于 MAP。名称为 KEY，值为 VALUE。您可以通过以逗号分隔的形式发送值来满足您的要求，您可以将其拆分，以便您可以将数组放在那里。

```
<param name="names">name1,name2,name3</param> 
```

[有关静态参数的更多信息](http://struts.apache.org/2.0.11.1/docs/how-do-we-access-static-parameters-from-an-action.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:14:17.330

AFAIK 静态参数被转换为字符串，这就是为什么各种拦截器（例如`FileUploadInterceptor`）使用静态方法转换`commaDelimitedStringToSet`为. 您可以在 setter 中为您的属性调用此方法。`TextParseUtil``String``Set<String>`

```
public void setNames(String name) {
    mNames = TextParseUtil.commaDelimitedStringToSet(name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:42:05.060

试试这个

```
 <action name="saveRecord" class="saveRecordAction">
            <result name="success" type="tiles">tiles:saveRecordSuccess</result>
            <param name="names" value="new java.lang.String[]{'name1', 'name2', 'name3'}"></param>

</action> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:23:52.120

[`staticParams`拦截器](https://struts.apache.org/core-developers/static-parameters-interceptor.html)通过操作配置处理的静态参数，其中参数定义为`Map<String,String>`.

为了在动作配置中正确使用静态参数，您应该包含对拦截器的引用`staticParams`或使用`defaultStack`.

```
<interceptor-ref name="staticParams">
      <param name="parse">true</param>
      <param name="overwrite">false</param>    
</interceptor-ref> 
```

您还包括`setParams(Map<String,String> params)`在拦截器的操作中设置参数的值。在您的情况下使用不同的键`name1, name2, name3`来检索地图的值。您还可以尝试`overwrite`静态参数的属性（未记录），以不使用相同的键覆盖值。

可以看action config中使用静态参数的例子：[Configure static parameter for Action class](http://www.mkyong.com/struts2/struts-2-configure-static-parameter-for-action-class/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-05T12:11:37.070

尝试使用名称 [] 代替名称

```
 <action name="saveRecord" class="saveRecordAction">
            <result name="success" type="tiles">tiles:saveRecordSuccess</result>
            <param name="names[]">name1</param>
            <param name="names[]">name2</param>
            <param name="names[]">name3</param>
        </action> 
```

# facebook - 在用户新闻源中显示的页面墙上的帖子没有“通过” "

> ID：14474495
> 
> 赞同：0
> 
> 时间：2013-01-23T07:30:22.753
> 
> 标签：facebook, facebook-graph-api, facebook-page, feed

使用显示在用户新闻源中的图形 api 在页面墙上发布的帖子没有“通过”。您可以在此处查看 axample [http://www.insidefacebook.com/2012/11/12/new-link-shows-users-more-page-posts-and-friend-activity-in-news-feed/](http://www.insidefacebook.com/2012/11/12/new-link-shows-users-more-page-posts-and-friend-activity-in-news-feed/)。是否可以查看哪个应用程序将此帖子共享到页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:02:28.993

实际上，您可以使用 Graph API 找出创建帖子的应用程序。尽管 Michael 正确指出Facebook 在帖子显示上删除了**via-标签。**

![创建该帖子的应用程序](../Images/250d22036b4a81148114d1807aa4b40c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:32:13.960

Facebook 最近删除了应用程序在页面上发布的帖子的“via”属性。我很确定没有办法从外部判断帖子是否是通过应用程序发布的，尤其是哪个应用程序。

比较 Graph API 所公开的帖子截图（这是我们通过[http://www.swat.io在](http://www.swat.io)[http://fb.com/diesocialisten](http://fb.com/diesocialisten)上发布的帖子）

帖子：[https ://www.facebook.com/129842310398883/posts/350825491682109](https://www.facebook.com/129842310398883/posts/350825491682109)

这里没有使用过的应用程序的提示：

![在此处输入图像描述](../Images/b5fade264c67e1af89307609c328bd2e.png)

Anvesh 是对的：您实际上可以获得“应用程序”字段，但您必须查询提要本身（/diesocialisten/feed），而不是特定的帖子。酷，不知道！

# c# - 如何找到 BindingList 的父级？

> ID：14474503
> 
> 赞同：0
> 
> 时间：2013-01-23T07:30:57.823
> 
> 标签：c#, wpf

我的模型如下。

```
public class FItem
    {
        public FItem()
        {
            FSubsystems = new BindingList<FSubsystem>();            
        }

        public int RecordId { get; set; }
        public string ItemName { get; set; }

        public BindingList<FSubsystem> FSubsystems { get; set; }

    }

    public class FSubsystem
    {
        public int SubSystemID { get; set; }
        public string ItemName { get; set; }
        public int YearID { get; set; }
    } 
```

代码 ：

```
FItems = new ObservableCollection<MarketRecord.FItem>();
FItems.CollectionChanged += OnUiCollectionChanged;

        private void OnUiCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action == NotifyCollectionChangedAction.Add)
            {
                var addedItem = e.NewItems[0] as MarketRecord.FItem;
                if (addedItem != null)
                {
                    addedItem.PropertyChanged += OnColumnModified;

                    if (addedItem.RecordId == 0)
                        modifedItems.Add(addedItem);

                    addedItem.FSubsystems.ListChanged += OnColumnModified;

                }
            }
        }

private void OnColumnModified(object sender, EventArgs e)
     {
        if (sender.GetType().Name == "FItem")
        {
            MarketRecord.FItem modifiedItem = (sender as MarketRecord.FItem);
            if (!modifedItems.Contains(modifiedItem))
                modifedItems.Add(modifiedItem);
        }
        else
        {
            // add parent of the binding list (i.e fitem object ) add it to             modifedItems

// Find parent here 
        }

     } 
```

正如我的代码告诉我需要在 OnColumnModified 的 else 子句中找到绑定列表的父项。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:35:48.253

您当前构建代码的方式实际上是不可能的。

您可以借助匿名方法实现此目的：

```
addedItem.FSubsystems.ListChanged += (s, e) => OnColumnModified(addedItem, e); 
```

这将注册一个匿名方法作为`ListChanged`. 引发该事件时，它会丢弃`sender`事件的参数，而是传入`addedItem`您的`FItem`实例。

您可以通过更改为以下内容来稍微提高此代码的类型安全性`OnColumnModified`：

```
private void OnColumnModified(MarketRecord.FItem modifieditem)
{
    if(!modifiedItems.Contains(modifiedItem))
        modifiedItems.Add(modifiedItem);
} 
```

事件注册现在看起来像这样：

```
addedItem.PropertyChanged += (s, e) => OnColumnModified(addedItem);

addedItem.FSubsystems.ListChanged += (s, e) => OnColumnModified(addedItem); 
```

# ruby-on-rails - $.AJAX 用于在 Rails 中创建多个记录

> ID：14474505
> 
> 赞同：2
> 
> 时间：2013-01-23T07:31:15.010
> 
> 标签：ruby-on-rails, ajax, post

我正在使用 Ruby on Rails，并且我有一个可以通过 AJAX 创建帖子的按钮，使用以下命令：

```
$.ajax({
      beforeSend: function(xhr) {
        xhr.setRequestHeader(
            'X-CSRF-Token', 
            $('meta[name="csrf-token"]').attr('content'))},
      url: "/posts/",
      type: "POST",
      data: {
        post: {
          title: "Cheese",
          content: "Cake",
        }
      }
    }); 
```

例如，如何格式化数据以一次创建多个帖子

```
posts = [
{
    title: "Cheese",
    content: "Cake"
},
{
    title: "Key Lime",
    content: "Pie"
}
] 
```

所以我可以用一个 POST 插入多个对象？

我有一个标题和内容列表。我可能必须用这些构造一个 JSON 对象吗？

不管这是否是好的 Rails 实践，我该怎么做？另外，我可以在哪里寻找如何格式化此类 HTTP 请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:57:10.487

您的 jQuery 调用不会有太大变化：

```
$.ajax({
  beforeSend: function(xhr) {
    xhr.setRequestHeader(
        'X-CSRF-Token', 
        $('meta[name="csrf-token"]').attr('content'))},
  url: "/posts/",
  type: "POST",
  contentType: "application/json",
  data: JSON.stringify({
    posts: [
      {
        title: "Cheese",
        content: "Cake",
      },
      {
        title: "Key Lime",
        content: "Pie"
      }
    ]          
  })
}); 
```

在您的 Rails 操作中，您将能够通过`params[:posts]`.

```
class ThingsController < ApplicationController
  def batch_create
    params[:posts].each do |post|
      Post.create post
    end
  end
end 
```

**解释**

使用`JSON.stringify`会使您的数据序列化为 JSON。设置`contentType`为`application/json`将“Content-Type：'application/json'”标头添加到您的 POST。这将提示 Rails 将您的 POST 解释为 JSON。

# mysql - MySQL 错误 #1064 - 我尝试了很多选项

> ID：14474508
> 
> 赞同：1
> 
> 时间：2013-01-23T07:31:44.917
> 
> 标签：mysql, sql, phpmyadmin

我尝试通过选择 phpmyadmin 中的选项在表格末尾添加一列，但它引发了错误。我复制了查询并通过删除引号并删除所有参数来尝试使用 SQL 选项，但它仍然给出错误 -

我试过 -

```
ALTER TABLE `signup_event` ADD `payment_category` VARCHAR( 30 ) UNSIGNED NULL
    DEFAULT NULL AFTER `trans_status`;

ALTER TABLE signup_event ADD payment_category VARCHAR( 30 ) UNSIGNED NULL
    DEFAULT NULL AFTER trans_status;

ALTER TABLE signup_event ADD payment_category VARCHAR( 30 ) UNSIGNED NULL
    DEFAULT NULL AFTER trans_status

ALTER TABLE signup_event ADD payment_category VARCHAR( 30 ) UNSIGNED
    DEFAULT NULL AFTER trans_status; 
```

像这样很多次...

在这种情况下如何添加列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:33:58.463

您已`UNSIGNED`在 varchar 上定义。`UNSIGNED`只能用于数字。

```
ALTER TABLE signup_event 
    ADD payment_category VARCHAR(30)  
    DEFAULT NULL AFTER trans_status; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/828ce/1)

# c# - 如何使用另一个表单上的打开文件对话框更改表单的背景图像

> ID：14474511
> 
> 赞同：0
> 
> 时间：2013-01-23T07:31:58.920
> 
> 标签：c#, winforms, openfiledialog

我有一个疑问。我有一个启动表单，这是我项目的第一个表单，我想在该表单关闭后更改该表单的背景图像。例如，我的软件启动和启动表单之后，在设置中我有一个功能来更改启动表单的背景图像。表单关闭时可以更改背景图片吗？（因为当用户输入设置表单时，我的启动表单已关闭）。

我已经编写了这个代码表单来更改背景图像，但我不知道如何在启动表单打开时更改表单图像，它应该打开从打开文件对话框更改图像。

我的代码是：

```
var FD = new System.Windows.Forms.OpenFileDialog();
            FD.Filter = "jpeg files|*.jpg";
            if (FD.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                string fileToOpen = FD.FileName;

                System.IO.FileInfo File = new System.IO.FileInfo(FD.FileName);
                BackgroundImage = Image.FromFile(FD.FileName); 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:38:11.147

您从某处加载初始图像，然后只需将该图像替换为用户使用 OpenFileDialog 选择的图像，然后在下次显示初始图像时加载新图像。

* * *

编辑：进一步解释

一个解决方案的例子。将图像存储在与应用程序相同的文件夹中（例如：“splash.png”），然后您可以在 Splash Form Load 事件中加载它。现在，当用户想用打开的文件对话框替换设置中的图像时，您只需将所选文件复制到应用程序的文件夹（Application.StartupPath 应该为您提供应用程序文件夹的路径）并覆盖旧的启动画面。 png （也许您可以在覆盖或其他内容之前重命名旧的），然后下次加载应用程序时，这就是 Splash 表单将加载的图像。

这是一个可以改进的简单解决方案，但作为第一次尝试，它应该会产生您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:38:59.257

好的，试试下面

您已经为启动画面设置了背景图像

```
eg : it location was  c:\sam.jpeg 
```

现在在表单关闭事件上尝试以下代码

```
System.IO.File.Delete(@"C:\Sam.jpeg");
Image.FromFile(FD.FileName).Save(@"C:\Sam.jpeg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

现在它删除旧文件并将新图像设置为旧名称...

在重新加载时，它会显示新的背景图像...

# java - Java字符串实习，有什么保证？

> ID：14474513
> 
> 赞同：10
> 
> 时间：2013-01-23T07:32:27.910
> 
> 标签：java, string, string-interning

问题归结为这段代码：

```
// setup
String str1 = "some string";
String str2 = new String(str1);
assert str1.equals(str2);
assert str1 != str2;
String str3 = str2.intern();

// question cases
boolean case1 = str1 == "some string";
boolean case2 = str1 == str3; 
```

Java 标准是否对和的值提供任何*保证*？当然，链接到 Java 规范的相关部分会很好。`case1``case2`

是的，我查看了 SO 找到的所有“类似问题”，但没有发现重复项，因为我发现没有人以这种方式回答了这个问题。不，这不是关于通过替换来“优化”字符串比较的错误`equals`想法`==`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T07:43:51.103

这是您的 JLS 报价，[第 3.10.5 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.10.5)：

> 每个字符串文字都是对 String 类（第 4.3.3 节）实例（第 4.3.1 节、第 12.5 节）的引用（第 4.3 节）。字符串对象有一个常量值。字符串字面量——或者更一般地，作为常量表达式值的字符串（第 15.28 节）——是“内部的”，以便使用 String.intern 方法共享唯一的实例。
> 
> 因此，由编译单元（§7.3）组成的测试程序：

```
package testPackage;
class Test {
        public static void main(String[] args) {
                String hello = "Hello", lo = "lo";
                System.out.print((hello == "Hello") + " ");
                System.out.print((Other.hello == hello) + " ");
                System.out.print((other.Other.hello == hello) + " ");
                System.out.print((hello == ("Hel"+"lo")) + " ");
                System.out.print((hello == ("Hel"+lo)) + " ");
                System.out.println(hello == ("Hel"+lo).intern());
        }
}

class Other { static String hello = "Hello"; } 
```

> 和编译单元：

```
package other;

public class Other { static String hello = "Hello"; } 
```

> 产生输出： true true true true false true
> 
> 这个例子说明了六点：
> 
> 同一包 (§7) 中同一类 (§8) 中的文字字符串表示对同一 String 对象 (§4.3.1) 的引用。
> 
> 同一包中不同类中的文字字符串表示对同一 String 对象的引用。
> 
> 不同包中不同类中的文字字符串同样表示对同一 String 对象的引用。
> 
> 由常量表达式（第 15.28 节）计算的字符串在编译时计算，然后将其视为文字。
> 
> 在运行时通过连接计算的字符串是新创建的，因此是不同的。显式实习计算字符串的结果是与任何具有相同内容的预先存在的文字字符串相同的字符串。

结合实习生的[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)，您有足够的信息来推断您的两个案例都将返回 true。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T07:42:11.670

我认为 String.intern API 提供了足够的信息

一个字符串池，最初是空的，由 String 类私下维护。

当调用 intern 方法时，如果池中已经包含一个等于该 String 对象的字符串，由 equals(Object) 方法确定，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。

由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。

所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在 Java™ 语言规范的第 3.10.5 节中定义。

# groovy - groovy.lang.MissingPropertyException：没有这样的属性：类的getTestCaseByName：

> ID：14474520
> 
> 赞同：1
> 
> 时间：2013-01-23T07:32:48.543
> 
> 标签：groovy, soapui

有人遇到过这个问题吗？有什么解决办法吗？

要从测试用例**会话**运行**步骤**InvalidLoginAttempt，我尝试了以下脚本

 **```
testRunner.testCase.testSuite.getTestCaseByName("Session").runTestStepByName("InvalidLoginAttempt") 
```

它在扔

groovy.lang.MissingMethodException：没有方法签名：com.eviware.soapui.impl.wsdl.testcase.WsdlTestCase.runTestStepByName() 适用于参数类型：(java.lang.String) 值：**[InvalidLoginAttempt]**可能的解决方案：getTestStepByName (java.lang.String), getTestStepByName(java.lang.String) 在第 4 行出错

所以尝试改变

```
testRunner.testCase.testSuite.getTestCaseByName("Session").runTestStepByName["InvalidLoginAttempt"] 
```

低于错误。

groovy.lang.MissingPropertyException：没有这样的属性：类的runTestCaseByName：com.eviware.soapui.impl.wsdl.WsdlTestSuite 行错误：4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:45:56.343

在下面尝试并成功了..:)

```
def r = testRunner.testCase.testSuite.getTestCaseByName("Session").getTestStepByName("InvalidLoginAttempt").run(testRunner, context); 
```**

# java - 为什么 Java Servlet response.Redirect 导致浏览器将请求的 HTML 解析为 URL

> ID：14474525
> 
> 赞同：3
> 
> 时间：2013-01-23T07:33:02.950
> 
> 标签：java, servlets, session-state, response.redirect

我试图在 Java servlet 发布请求结束时发送响应重定向：

```
session.setAttribute("token", token);
String redirectUrl = response.encodeRedirectURL(MYSITE_URL + "extras.html");
response.sendRedirect(redirectUrl) 
```

单步执行代码 redirectUrl 等同于`"http://localhost:8080/mysite/extras.html"`. 然而，浏览器正在尝试请求以下 url，对于观察者来说，这实际上是我请求的文档的 html。

```
http://localhost:8080/mysite/%3C!DOCTYPE%20html%3E%20%3Chtml%3E%20%20%20%20%20%3Chead%3E%20%20%20%20%20%20%20%20%20%3Ctitle%3EBet%20Ya%20Friends%3C/title%3E%20%20%20%20%20%20%20%20%20%3Cmeta%20name=%22viewport%22%20content=%22width=device-width,%20initial-scale=1%22%3E%20%20%20%20%20%20%20%20%20%3Clink%20rel=%22stylesheet%22%20href=%22http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css%22%20/%3E%20%20%20%20%20%20%20%20%3Cscript%20src=%22http://code.jquery.com/jquery-1.8.2.min.js%22%3E%3C/script%3E%20%20%20%20%20%20%20%20%3Cscript%20src=%22http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js%22%3E%3C/script%3E%20%20%20%20%3C/head%3E%20%20%20%20%20%3Cbody%3E%20%20%20%20%20%20%20%20%20%3Cdiv%20data-role=%22page%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20data-role=%22header%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%3EBet%20Ya%20Friends%3C/h1%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%3C!--%20/header%20--%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%20data-role=%22listview%22%20data-inset=%22true%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Cdiv%3EView%20Friends%3C/div%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22ui-li-count%22%3E6%3C/span%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ECanary%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ECat%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EDog%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EGerbil%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EIguana%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EMouse%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Cdiv%3EMake%20A%20Bet%3C/div%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20class=%22ui-li-count%22%3E6%3C/p%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EChicken%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ECow%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EDuck%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EHorse%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EPig%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ESheep%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Cdiv%3EBet%20History%3C/div%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20class=%22ui-li-count%22%3E18%3C/p%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EAardvark%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EAlligator%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EAnt%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EBear%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EBeaver%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ECougar%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EDingo%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EEagle%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EElephant%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EFerret%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EFrog%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EGiraffe%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ELion%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EMonkey%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EPanda%20bear%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EPolar%20bear%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3ETiger%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%3E%3Ca%20href=%22index.html%22%3EZebra%3C/a%3E%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%20%20%20%20%20%20%20%20%3C/div%3E%3C!--%20/page%20--%3E%3C!--%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22#%22%20onclick=%22getUserFriends%28%29;%22%3EGet%20friends%3C/a%3E%3Cbr%3E%20%20%20%20%20%20%20%20%20%3Cdiv%20id=%22user-friends%22%3E%3C/div%3E%20%20%20%20%20%20%20%20%20%3Cscript%3E%20%20%20%20%20%20%20%20%20function%20getUserFriends%28%29%20{%20%20%20%20%20%20%20%20%20%20%20FB.api%28%27/me/friends&fields=name,picture%27,%20function%28response%29%20{%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28%27Got%20friends:%20%27,%20response%29;%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28!response.error%29%20{%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20markup%20=%20%27%27;%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20friends%20=%20response.data;%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i=0;%20i%20%3C%20friends.length%20&&%20i%20%3C%2025;%20i++%29%20{%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20friend%20=%20friends[i];%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20markup%20+=%20%27%3Cimg%20src=%22%27%20+%20friend.picture%20+%20%27%22%3E%20%27%20+%20friend.name%20+%20%27%3Cbr%3E%27;%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20}%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27user-friends%27%29.innerHTML%20=%20markup;%20%20%20%20%20%20%20%20%20%20%20%20%20}%20%20%20%20%20%20%20%20%20%20%20}%29;%20%20%20%20%20%20%20%20%20}%20%20%20%20%20%20%20%20%20%3C/script%3E--%3E%20%20%20%20%3C/body%3E%3C/html%3E 
```

我的问题是，为什么？为什么请求的是实际的 html 文档而不是 url？为什么 encodeURL 没有在 URL 中编码会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:54:04.770

您提到 MYSITE_URL 是

> `"localhost:8080/mysite/"`

. 这可能是问题所在。一开始它缺少http。您可以将 MYSITE_URL 修改为

> `"http://localhost:8080/mysite/"`

然后试试？

# linker - Qt5 Osx 链接器错误

> ID：14474529
> 
> 赞同：1
> 
> 时间：2013-01-23T07:33:18.553
> 
> 标签：linker, qt5, libs

在来自 qmake 生成的 Makefile 的此链接器命令之后，我收到以下错误。

```
clang++ -headerpad_max_install_names -mmacosx-version-min=10.6 -o bin/Clock tmp/clock.o tmp/config.o tmp/main.o tmp/qrc_resources.o tmp/moc_clock.o   -L/Users/foo/Qt5.0.0/5.0.0/clang_64/lib -lQt5Widgets -lQt5Gui -lQt5Core -framework OpenGL -framework AGL 
```

错误：

```
ld: library not found for -lQt5Widgets 
```

我可以确认该库不存在该拼写。然而，还有一个 QtWidgets.la 也有一个 QtWidgets.framework 目录，它有一个 QtWidgets。

在 lib 目录中，所有文件都没有 Qt5 前缀，是否有某种方法可以更改 Qt，因此它不会查找它等。

我知道我可以重命名并移动它们，但这是一项让所有库都具有 Qt5 前缀的大工作。

# iphone - ios5 中未使用 xcode 4.2 添加 AdSupport 框架

> ID：14474532
> 
> 赞同：0
> 
> 时间：2013-01-23T07:33:26.490
> 
> 标签：iphone, xcode4.5

我将 FacebookSDK 与 ios6 和 Xcode4.5 集成到我的应用程序中。但是当我在以前版本的 XCode（Xcode 4.2 和 ios5）中运行应用程序时，我无法链接 Social.Framework 和 AdSupport.Framework 。它们丢失并且我在 Build Phases 下找不到它。通过 Google 发现它们在 ios5 中不存在。但是当我将这些框架设为可选时。我已将它们设为可选。但这对我不起作用。而且我找不到任何对此的周转解决方案。

我怎样才能让它在 xcode4.2 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:38:10.677

iOS 开始支持 Facebook API，它是 Social.Framework 包含在 iOS 6 中。它在早期版本的 Facebook 中不可用。您不会在 XCode 4.2 中获得适用于 iOS facebook api 的框架。

编辑 ：

在这种情况下，您需要做的是，保留您已经完成的框架可选。在调用函数之前检查 Facebook 类是否存在。如果确实如此，则表示用户使用的是 iOS 6 或更高版本，然后是 iOS 6。如果这不意味着用户使用的是低于 iOS 6 的 iOS 版本。为了提供反向兼容性，您必须实现 Facebook API。

# asp.net-mvc-4 - 如何使用 Html.Helper 创建锚点 href

> ID：14474535
> 
> 赞同：3
> 
> 时间：2013-01-23T07:33:39.770
> 
> 标签：asp.net-mvc-4, anchor, html-helper

> **可能重复：**
> [如何在 Asp.Net MVC 循环中呈现纯 HTML 链接？](https://stackoverflow.com/questions/1624697/how-to-render-plain-html-links-in-asp-net-mvc-loop)

我想创造这样的东西

```
<A href="#section2">Section Two</A> 
```

使用 ASP.Net MVC 的 Html.Helper。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:41:05.880

您可以为此添加自己的助手：

```
public static class HtmlHelpers
{
    public static string SectionLink(this HtmlHelper html, string URL, string display)
    {
        return String.Format("<a href=\"{0}\">{1}</a>", URL, display);
    }
} 
```

你像这样使用它：

```
@Html.SectionLink(section.Anchor, section.Name) 
```

# css - Sublime Text 2 - SASS Build - '[Errno 2] 没有这样的文件或目录'

> ID：14474536
> 
> 赞同：1
> 
> 时间：2013-01-23T07:33:40.527
> 
> 标签：css, sass, sublimetext2

我在 Mac OS X (10.7.2) 上使用 Sublime Text 2 (2.0.1, build 2217)。

我已经安装了[SASS Build](https://github.com/jaumefontal/SASS-Build-SublimeText2)包，但是每次我尝试构建 SASS 文件时，我都会收到以下错误：

> [Errno 2] 没有这样的文件或目录

我的路径似乎是正确的，并且直接复制 cmd 并将其粘贴到终端中，我真的很困惑为什么它在 ST2 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T01:24:19.697

这种情况很可能是由于机器上安装了不同的 Ruby 版本而发生的。例如，我在 Mac OS X 上默认安装了 1.8.7，后来我使用 rvm 为多用户环境安装了 1.9.3（即进入 /usr/local/rvm）

我在 rvm 中设置了当前版本，但 GEM_HOME 仍然指向 1.8.7 中的宝石

我发现的唯一直接而愚蠢的解决方案 - 破解 Sublime Text 2 的环境变量。这可以通过在文件夹中创建具有任何名称的 .py 文件来完成：

```
~/Library/Application Support/Sublime Text 2/Packages/User/ 
```

在 Rob Dodson 的博客文章中查看更多信息： [http ://robdodson.me/blog/2012/05/14/hacking-the-path-variable-in-sublime-text/](http://robdodson.me/blog/2012/05/14/hacking-the-path-variable-in-sublime-text/)

对我有用的示例 .py：

```
import os

LOCAL = '/usr/local/bin:/usr/local/sbin:'
RVM = '/usr/local/rvm/bin:'
RVMGEMS = '/usr/local/rvm/gems/ruby-1.9.3-p392/bin:'
GEMHOME = '/usr/local/rvm/gems/ruby-1.9.3-p392'

# Sublime's default path is
# /usr/bin:/bin:/usr/sbin:/sbin
os.environ['PATH'] += ':'
os.environ['PATH'] += LOCAL
os.environ['PATH'] += RVM
os.environ['PATH'] += RVMGEMS

os.environ['GEM_HOME'] = GEMHOME

print 'PATH = ' + os.environ['PATH'] 
```

# c# - 如何获取xml中多个子节点的值？

> ID：14474538
> 
> 赞同：0
> 
> 时间：2013-01-23T07:33:50.080
> 
> 标签：c#, asp.net

1.  xml代码：

    ```
     <Report>
          <ChartData>
            <ListName>area</ListName>
            <ViewName>Selecte List</ViewName>
            <YAxisFields>
              <YAxisField>
                <Name>Scheduled Start Date/Time</Name>
                <DataType>DateTime</DataType>
                <Category>Year</Category>
              </YAxisField>
            </YAxisFields>
            <XAxisFields>
              <XAxisField>
                <Name>Release Type</Name>
                <DataType>String</DataType>
                <Category>
                </Category>
              </XAxisField>
            </XAxisFields>
          </ChartConfig>
       </Report> 
    ```

2.  我使用下面的代码获得了子节点列表名和视图名的值，

    ```
     XmlDocument doc = new XmlDocument();
        doc.Load("XmlFileName"); 
        XmlNodeList node = doc.SelectNodes("Report/ChartData"); 
        foreach (XmlNode xn in node) 
        { xn["ListName"].InnerXml = chartname; 
        xn["ViewName"].InnerXml = SelectedList; 
        **xn["YAxisFields/YAxisField"].InnerXml = yaxisfield; //not working, need to get the value for this xml node,need help in this line dono how to proceed**
        doc.Save("XmlFilename"); 
        } 
    ```

3.  首先我尝试使用这样的代码而不是上面的代码，在此我需要创建对象数量以便获取每个节点的值所以我尝试通过为 xmlnodelist 创建对象然后我使用 foreach 循环来获取每个节点的值但是在此无法获得 YAxisFields/YAxisField 的值，因为它还具有作为 YAxisFields 的父节点和作为 YAxisField 的子节点，因此只有为 xmlnode 创建对象数量的方法，或者有没有其他方法可以做到这一点？

    ```
     XmlDocument doc = new XmlDocument();
        doc.Load("XmlFileName");
        XmlNode Listnode = doc.SelectSingleNode("Report/ChartData/ListName"); 
        XmlNode Viewnode = doc.SelectSingleNode("Report/ChartData/ViewName");
                if (Listnode != null)
                {
                    Listnode.InnerXml = chartname;
                    Viewnode.InnerXml = SelectedList; ;
                    doc.Save("XmlFileName"); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:47:55.057

使用 Linq to XML XDocument，如下所示：

```
doc.Root.Descendants("ChartData").ToList().ForEach(node =>
                {
                    node.Element("ListName").Value = chartname;
                    node.Element("ViewName").Value = SelectedList;
                }); 
```

# php - PHP FTP 下载不复制

> ID：14474543
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:34:09.050
> 
> 标签：php, ftp, download

我尝试了一些代码来使用 FTP 下载文件，但文件没有在计算机客户端中发送。此代码只是从服务器计算机的另一个文件夹中复制文件。你能告诉我解决方案吗？这是我的代码：

```
<?php
//FTP File Download
$file_name      = 'myfile.xml';
$destination    = '/download/'.$file_name;
$ftp_user_name  = 'chelsea';
$ftp_user_pass  = 'drogba';
$ftp_server = '192.168.1.1';
$conn_id    = ftp_connect($ftp_server);
$login_result   = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

ftp_nb_get($conn_id, $destination, $file_name, FTP_BINARY);
ftp_close($conn_id);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:16:17.773

确保 Ftp 服务器允许获取文件服务器到服务器，如果不允许，则不能使用此功能。

并测试这段代码

```
<?php

// define some variables
$local_file = '<save-file-as>';
$server_file = '<server-file-name>';
$server_directory='/';
$ftp_user_name='<ftp-user>';
$ftp_user_pass='<ftp-pass>';
$ftp_server='<ftp-host-name>';
// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

/* uncomment if you need to change directories*/
if (ftp_chdir($conn_id, $server_directory)) {
    echo "Current directory is now: " . ftp_pwd($conn_id) . "\n";
} else { 
    echo "Couldn't change directory\n";
}

// try to download $server_file and save to $local_file
if (ftp_get($conn_id, $local_file, $server_file, FTP_BINARY)) {
   echo "Successfully written to $local_file\n";
} else {
   echo "There was a problem\n";
}

// close the connection
ftp_close($conn_id);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:48:48.823

脚本将文件从第二台服务器下载到运行脚本的服务器后，您可以将其发送到客户端，并附上`readfile`相应的标头（请参阅此处：[用于下载文件 php](https://stackoverflow.com/questions/13513420/headers-used-to-download-file-php)的标头）

当然，它会通过 HTTP 发送，因为对 PHP 脚本的请求是 HTTP 请求，您不能即时更改协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:21:31.850

尝试使用 curl 从 ftp 下载文件

```
$curl = curl_init();
$file = fopen("myfile.xml", 'w');
curl_setopt($curl, CURLOPT_URL, "ftp://ftp.yourdomain.com/myfile.xml"); #input
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FILE, $file); #output
curl_setopt($curl, CURLOPT_USERPWD, "$_FTP[username]:$_FTP[password]");
curl_exec($curl);
curl_close($curl);
fclose($file); 
```

[PHP：从 ftp 服务器下载任何文件到硬盘？](https://stackoverflow.com/questions/3278553/php-download-any-file-from-ftp-server-to-harddrive?answertab=oldest#tab-top)

# performance - 按广度优先顺序列出目录的所有内容会导致效率低下

> ID：14474545
> 
> 赞同：4
> 
> 时间：2013-01-23T07:34:28.633
> 
> 标签：performance, loops, haskell, io, lazy-evaluation

我编写了一个 Haskell 模块来按广度优先顺序列出目录的所有内容。下面是源代码。

```
module DirElements (dirElem) where

import System.Directory (getDirectoryContents, doesDirectoryExist)
import System.FilePath ((</>))

dirElem :: FilePath -> IO [[FilePath]]
dirElem dirPath = iterateM (not.null) (concatMapM getDirectoryContents') [dirPath] >>= return.tail

getDirectoryContents' :: FilePath -> IO [FilePath]
getDirectoryContents' dirPath = do
  isDir <- do doesDirectoryExist dirPath
  if isDir then dirContent else return [] where
    dirContent = do
      contents <- getDirectoryContents dirPath
      return.(map (dirPath</>)).tail.tail $ contents

iterateM :: (Monad m) => (a -> Bool) -> (a -> m a) -> a -> m [a]
iterateM fb f x = do --Notice: Due to the the implementation of >>=, iterateM can't be writen like iterate which gives a infinite list and have type of iterateM :: (Monad m) => (a -> Bool) -> (a -> m a) -> a -> m [a]
  if fb x
    then do
      tail <- do {fx <- f x; iterateM fb f fx}
      return (x:tail)
    else return []

concatMapM :: Monad m => (a -> m[b]) -> [a] -> m[b]
concatMapM f list = mapM f list >>= return.concat 
```

它工作正常，但在大目录上执行时，它会“暂停”一会儿，并弹出所有结果。

经过研究，我发现这是同一个问题，`sequence $ map return [1..]::[[Int]]`请参阅[Why the Haskell sequence function can't be lazy or why recursive monadic functions can't be lazy](https://stackoverflow.com/questions/14494648/why-the-haskell-sequence-function-cant-be-lazy-or-why-recursive-monadic-function)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T08:05:05.833

这每隔一段时间就会出现一次，答案最终是使用类似库的迭代器。最近最常被推荐的是[代理](http://hackage.haskell.org/package/pipes)库。

*   [Haskell中目录的流式递归下降](https://stackoverflow.com/questions/14259229/streaming-recursive-descent-of-a-directory-in-haskell/14261710#14261710)
*   较旧的管道解决方案已过时且不可迭代，如解决方案[广度优先遍历目录树并不懒惰](https://stackoverflow.com/questions/12610810/breadth-first-traversal-of-directory-tree-is-not-lazy)

我以前见过 Conduit 解决方案和一些优雅的单子解决方案，但我现在找不到它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T08:21:30.750

首先，这与严格无关。像许多 monad 一样，IO 实际上在其 monadic 操作中是非严格的。这与惰性 I/O 与急切 I/O 有关。

问题是您首先进行目录遍历，然后处理结果。您可以通过使用协程交错来改善这一点。一种简单的方法是使目录遍历将回调作为参数：

```
getDirectoryContents' :: (MonadIO m) => (FilePath -> m a) -> FilePath -> m ()
getDirectoryContents' k fp = {- ... -} 
```

这是最简单且最不灵活的解决方案。更灵活的解决方案是实际实现协程。您可以使用[free](http://hackage.haskell.org/package/free)、[monad-coroutine](http://hackage.haskell.org/package/monad-coroutine)或[operation](http://hackage.haskell.org/package/operational)来滚动您自己的协程 monad ，或者您可以使用许多流式抽象中的一种，例如[管道](http://hackage.haskell.org/package/conduit)、[枚举](http://hackage.haskell.org/package/enumerator)器或[管道](http://hackage.haskell.org/package/pipes)，最后一个是我个人对像这样的简单案例的个人建议。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-23T16:34:20.823

我修改了 Davorak 链接到的旧答案以使用新`pipes`库。

它用于`StateP`保留未遍历目录的队列，以便可以进行广度优先遍历。为了方便，它`MaybeP`用于退出循环。

```
import Control.Monad
import Control.Proxy
import Control.Proxy.Trans.Maybe
import Control.Proxy.Trans.State as S
import Data.Sequence hiding (filter)
import System.FilePath.Posix
import System.Directory

getUsefulContents :: FilePath -> IO [FilePath]
getUsefulContents path
  = fmap (filter (`notElem` [".", ".."])) $ getDirectoryContents path

traverseTree
    :: (Proxy p)
    => FilePath
    -> () -> Producer (MaybeP (StateP (Seq FilePath) p)) FilePath IO r
traverseTree path () = do
    liftP $ S.modify (|> path)
    forever $ do
        x <- liftP $ S.gets viewl
        case x of
            EmptyL    -> mzero
            file :< s -> do
                liftP $ S.put s
                respond file
                p <- lift $ doesDirectoryExist file
                when p $ do
                    names <- lift $ getUsefulContents file
                    let namesfull = map (file </>) names
                    liftP $ forM_ namesfull $ \name ->
                        S.modify (|> name) 
```

这定义了一个广度优先的惰性文件生产者。如果将它连接到打印阶段，它将在遍历树时打印出文件：

```
main = runProxy $ evalStateK empty $ runMaybeK $
    traverseTree "/tmp" >-> putStrLnD 
```

懒惰意味着如果你只需要 3 个文件，它只会遍历树尽可能多地生成三个文件，然后它会停止：

```
 main = runProxy $ evalStateK empty $ runMaybeK $
        traverseTree "/tmp" >-> takeB_ 3 >-> putStrLnD 
```

如果您想了解有关该[`pipes`库](http://hackage.haskell.org/package/pipes)的更多信息，那么我建议您阅读[该教程](http://hackage.haskell.org/packages/archive/pipes/3.1.0/doc/html/Control-Proxy-Tutorial.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T19:27:39.730

每个人都在告诉您使用迭代器或管道等，这是当前流行的方法。但是还有另一种经典的方法来做到这一点！只需使用`unsafeInterleaveIO`from `System.IO.Unsafe`。类型的所有功能`IO a -> IO a`都是修改 IO 操作，以便它仅在需要值 thunk 时才实际执行 IO，这正是您所要求的。您可以使用它轻松地编写`iterateM`具有所需语义的 an。

像这样的例子是`unsafeInterleaveIO`闪耀的地方。

但是，我敢肯定，您已经注意到名称中的“不安全” - 还有其他示例，您希望直接控制文件句柄和资源使用等，这`unsafeInterleaveIO`确实是坏消息，甚至可能引入违反参考透明度。

（有关更多讨论，请参阅此答案：[UnsafeInterleaveIO 何时不安全？](https://stackoverflow.com/questions/13263692/when-is-unsafeinterleaveio-unsafe)）

但同样，在这样的情况下，我认为这`unsafeInterleaveIO`是明显、正确和直接的结果。

# android - Android：OnClick 无法正常工作

> ID：14474548
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:34:45.937
> 
> 标签：android

在我的应用程序中，我有一个弹出菜单，当我单击菜单项时它会收集 gps 位置，问题是当我双击菜单时它会触发两次但我只执行 onclick 不确定我在哪里做错了

```
LinearLayout popupmain = (LinearLayout) view
                .findViewById(R.id.popupmain);
        ImageView popupImage = (ImageView) view.findViewById(R.id.popupimg);
        TextView popupName = (TextView) view.findViewById(R.id.popupname);

        popupImage.setImageResource(popUpMenu.getImageResource());
        popupName.setText(popUpMenu.getMenuName());
        popupName.setTag(popUpMenu);
        popupmain.setTag(popUpMenu);
        popupName.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                doAction(v, activity);

            }
        });

        popupmain.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                doAction(v, activity);

            }
        }); 

        return view;
    }

    public void doAction(View v, Activity activity) {

            Context myContext = v.getContext();
            PopUpMenu popUpMenu = (PopUpMenu) v.getTag();
            String result = popUpMenu.getMenuName();
            if (result != null
                    && result.equalsIgnoreCase(myContext.getResources().getString(
                            R.string.savecurrentlocation))) {
                getLocation();  
        }
        private void getLocation() {
                manager = (LocationManager) parentActivity
                        .getSystemService(Context.LOCATION_SERVICE);
                listener = new ManageLocation();
                listener.setSucessCallBack(this, "setLocation");
                listener.setFailureCallBack(this, "setNoLocation");
                manager.requestLocationUpdates(
                        new Utils().getCurrentPlaceLocationProvider(manager), 0, 0,
                        listener);

            } 
```

任何帮助表示赞赏。

我的弹出主 xml 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/popupmain"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dp">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingLeft="5dp" >

        <ImageView
            android:id="@+id/popupimage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/popupname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="8dp"
            android:text="@string/default_date"
            android:textColor="#000000"
            android:textSize="15dp"
            android:typeface="serif" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:45:49.537

我怀疑 popName 和 popImage 在您的活动或片段 XML 中的 popMain 上。

如果他们在这个布局上，这是很正常的行为。

因为 Layout 路由在处理它之后事件它的子节点。

删除这段代码

```
 popupmain.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                doAction(v, activity);

            }
        }); 
```

或者像这样添加控制逻辑（我不知道你的主要想法）

```
 popupName.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
            if(popupMainOpened)
                doAction(v, activity);

            }
        });

        popupmain.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

            if(!popupMainOpened)
                doAction(v, activity);

            }
        }); 
```

或通过扩展 LinearLayout 并覆盖 onTouchEvent [http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent) )来实现您的 LinearLayout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:39:32.253

将您的“popUpMenu”实例保留为私有类成员，并在调用“doAction()”之前检查它是否已经显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:29:16.077

请注意，这是未经测试的代码。我只是在记事本里打出来的。我不确定它是否会按*原样*工作，但应该可以帮助您理解其背后的逻辑。当然，格式有点偏离。必要时进行调整。

```
public class YourAdapter extends BaseAdapter {

boolean runningAction = false;  // DECLARE AS A GLOBAL INSTANCE

    // IN YOUR GETVIEW()

    LinearLayout popupmain = (LinearLayout) view.findViewById(R.id.popupmain);
    ImageView popupImage = (ImageView) view.findViewById(R.id.popupimg);
    TextView popupName = (TextView) view.findViewById(R.id.popupname);

    popupImage.setImageResource(popUpMenu.getImageResource());
    popupName.setText(popUpMenu.getMenuName());

    // I AM SKIPPING THE REST

    popupmain.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (runningAction == false) {
            doAction(v, activity);
        } else {
                // DO NOTHING OR SHOW A TOAST THAT A FUNCTION IS IN PROGRESS
        }
        }
    });

    return view;
}

    // THE doAction()
    public void doAction(View v, Activity activity) {

        // TOGGLE THE boolean flag runningAction
        runningAction = true;

        Context myContext = v.getContext();
        PopUpMenu popUpMenu = (PopUpMenu) v.getTag();
        String result = popUpMenu.getMenuName();
        if (result != null
                    && result.equalsIgnoreCase(myContext.getResources().getString(
                            R.string.savecurrentlocation))) {
            getLocation();  
        }

    // THE getLocation()
    private void getLocation() {
        manager = (LocationManager) parentActivity
                        .getSystemService(Context.LOCATION_SERVICE);
        listener = new ManageLocation();
        listener.setSucessCallBack(this, "setLocation");
        listener.setFailureCallBack(this, "setNoLocation");
        manager.requestLocationUpdates(
                        new Utils().getCurrentPlaceLocationProvider(manager), 0, 0,
                        listener);

        // TOGGLE THE boolean flag runningAction TO PREPARE FOR NEXT LOCATION UPDATE
        runningAction = false;

     }
} 
```

另外，请注意，我只将 ClickListener 设置`popupmain LinearLayout`为`popupName TextView`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:01:54.780

简单的 v.setEnabled(false); 解决了我的问题

```
 popupName.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                     popupName.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                v.setEnabled(false);
                performAction(v, activity);

            }
        }); 

        popupmain.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                v.setEnabled(false);
                performAction(v, activity);

            }
        }); 
                    performAction(v, activity);

                }
            }); 

            popupmain.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    v.setEnabled(false);
                    performAction(v, activity);

                }
            }); 
```

# javascript - 如何删除html表和数据库中的特定行

> ID：14474550
> 
> 赞同：0
> 
> 时间：2013-01-23T07:34:55.077
> 
> 标签：javascript, html, jsp

我用 html 写了一个表格，它由 6 列组成，第 6 列作为删除按钮。行将动态更新。

现在我的第一个问题是当我们单击行删除按钮时如何删除行，甚至在数据库中也是如此。

第二个问题是，每行都有复选框，表格顶部有一个 delete1 按钮。如果我检查了表中的某些行并单击 delete1 按钮，则必须在数据库中删除这些记录。

如何才能做到这一点。

下面是我的jsp代码。

```
<INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')"/><br>
<table id="dataTable" border="15" >
<tr><th colspan="6" align="center">Data</th></tr>
    <tr>
        <td><b></b></td>   
        <td><b>Institution Name</b></td>
        <td><b>Location</b></td>
        <td><b>Status</b></td>
        <td><b>Edit</b></td>
        <td><b>Delete</b></td>
    </tr>
<%
    Session ses=new Configuration().configure().buildSessionFactory().openSession();
    Transaction tx=ses.beginTransaction();
    Query q1=ses.createQuery("from RegisterPojo as rp");
    List<Enumeration> l= q1.list();
    for(int i=0; i<l.size();++i) {
        RegisterPojo rp=(RegisterPojo)l.get(i);
        System.out.println(rp.getInstName());
        System.out.println(rp.getInstName());
%>      
        <tr>
        <td><input type="checkbox" value="<%= rp.getNo()%>"></td>
        <td><%= rp.getInstName()%></td>
        <td><%= rp.getLocation()%></td>
        <td><%= rp.getStatus()%></td>
        <td><a href="register.jsp">Edit</a></td> 
        <td><INPUT type="button" value="Delete"/></td>
        </tr>
<%
    }
%>
</table> 
```

注意：我在 stackoverflow 甚至其他一些网站上都看到过这类问题，但它们与我的情况不符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:41:50.950

尝试以下网站上的教程：

[http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/](http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/)

至于从数据库中添加或删除内容，我想您会想要 table.rows[n].innerHTML 或 table.rows[n].innerText 并使用数据库中的选择和删除查询。

如果将一个特定列用作数据库中的键，则可以使用 table.rows[n].cells[key].innerHTML 或 table.rows[n].cells[key].innerText 来获取该单元格的值然后用它做你的查询。

# angularjs - 如何使用 ng-model 格式化日期？

> ID：14474555
> 
> 赞同：96
> 
> 时间：2013-01-23T07:35:17.640
> 
> 标签：angularjs

我有一个输入定义为

```
<input class="datepicker" type="text" ng-model="clientForm.birthDate" /> 
```

被操纵以显示在页面的其他位置：

```
<tr>
    <th>Birth Date</th>
    <td>{{client.birthDate|date:'mediumDate'}}</td>
</tr> 
```

当页面加载时，出生日期的格式很好，类似于`Dec 22, 2009`. 但是，当我查看我`<input>`的内部时，它显示为`Tue Dec 22 2009 00:00:00 GMT-0800 (Pacific Standard Time)`我猜是 JS 如何将`Date`对象呈现为字符串。

首先，我如何告诉 Angular 以`<input>`类似的形式显示日期`12/22/2009`？我似乎无法`|filters`在`ng-model`属性内应用。

其次，一旦我编辑日期，即使将其保留为原始格式，我的其他文本（在 内`<td>`）似乎`|date`不再应用过滤器；它突然改变格式以匹配输入文本框的格式。`|date`每次模型更改时如何让它应用过滤器？

* * *

相关问题：

*   [如何让我的指令仅在 onchange 时触发？](https://stackoverflow.com/q/14494026/65387)
*   [如何访问指令中的参数？](https://stackoverflow.com/q/14494095/65387)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-23T09:02:47.487

使用表单的自定义验证[http://docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)演示：[http ://plnkr.co/edit/NzeauIDVHlgeb6qF75hX?p=preview](http://plnkr.co/edit/NzeauIDVHlgeb6qF75hX?p=preview)

**使用格式化程序和解析器以及[MomentJS 的](http://momentjs.com/)指令）**

```
angModule.directive('moDateInput', function ($window) {
    return {
        require:'^ngModel',
        restrict:'A',
        link:function (scope, elm, attrs, ctrl) {
            var moment = $window.moment;
            var dateFormat = attrs.moDateInput;
            attrs.$observe('moDateInput', function (newValue) {
                if (dateFormat == newValue || !ctrl.$modelValue) return;
                dateFormat = newValue;
                ctrl.$modelValue = new Date(ctrl.$setViewValue);
            });

            ctrl.$formatters.unshift(function (modelValue) {
                if (!dateFormat || !modelValue) return "";
                var retVal = moment(modelValue).format(dateFormat);
                return retVal;
            });

            ctrl.$parsers.unshift(function (viewValue) {
                var date = moment(viewValue, dateFormat);
                return (date && date.isValid() && date.year() > 1950 ) ? date.toDate() : "";
            });
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-04-15T10:01:07.000

这是非常方便的指令[angular-datetime](https://github.com/eight04/angular-datetime)。你可以像这样使用它：

```
<input type="text" datetime="yyyy-MM-dd HH:mm:ss" ng-model="myDate"> 
```

它还为您的输入添加掩码并执行验证。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-19T19:00:26.247

我创建了一个简单的指令，使标准`input[type="date"]`表单元素能够与 AngularJS ~1.2.16 一起正常工作。

看这里： [https ://github.com/betsol/angular-input-date](https://github.com/betsol/angular-input-date)

这是演示：http: [//jsfiddle.net/F2LcY/1/](http://jsfiddle.net/F2LcY/1/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-12T19:20:21.957

由于您使用 datepicker 作为类，我假设您使用的是 Jquery datepicker 或类似的东西。

有一种方法可以完全不使用 moment.js 来做你想做的事情，纯粹使用 datepicker 和 angularjs 指令。

我在这个[Fiddle中给出了一个例子](http://jsfiddle.net/FhrHc/1/)

这里的小提琴摘录：

1.  Datepicker 有不同的格式和 angularjs 的格式不同，需要找到合适的匹配，以便在控件中预先选择日期，并且在绑定 ng-model 的同时也填充到输入字段中。下面的格式等价于`'mediumDate'`AngularJS 的格式。

    ```
    $(element).find(".datepicker")
              .datepicker({
                 dateFormat: 'M d, yy'
              }); 
    ```

2.  日期输入指令需要有一个临时字符串变量来表示日期的人类可读形式。

3.  刷新页面的不同部分应该通过事件发生，例如`$broadcast`和`$on`。

4.  在 ng-model 中也可以使用过滤器以人类可读的形式表示日期，但需要使用临时模型变量。

    ```
    $scope.dateValString = $filter('date')($scope.dateVal, 'mediumDate'); 
    ```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-14T15:29:45.773

我正在使用 jquery datepicker 来选择日期。我的指令读取日期并将其转换为 json 日期格式（以毫秒为单位）存储在`ng-model`数据中，同时显示格式化的日期。如果 ng-model 具有 json 日期（以毫秒为单位），我的格式化程序以我的格式显示为 jquery datepicker。

html代码：

```
<input type="text" jqdatepicker  ng-model="course.launchDate" required readonly /> 
```

角度指令：

```
myModule.directive('jqdatepicker', function ($filter) {
    return {
        restrict: 'A',
        require: 'ngModel',
         link: function (scope, element, attrs, ngModelCtrl) {
            element.datepicker({
                dateFormat: 'dd/mm/yy',
                onSelect: function (date) {   
                    var ar=date.split("/");
                    date=new Date(ar[2]+"-"+ar[1]+"-"+ar[0]);
                    ngModelCtrl.$setViewValue(date.getTime());            
                    scope.$apply();
                }
            });
            ngModelCtrl.$formatters.unshift(function(v) {
            return $filter('date')(v,'dd/MM/yyyy'); 
            });

        }
    };
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-06-18T11:26:01.177

我使用以下指令，这让我和大多数用户都非常高兴！它使用 moment 进行解析和格式化。它看起来有点像前面提到的 SunnyShah 的那个。

```
angular.module('app.directives')

.directive('appDatetime', function ($window) {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function (scope, element, attrs, ngModel) {
            var moment = $window.moment;

            ngModel.$formatters.push(formatter);
            ngModel.$parsers.push(parser);

            element.on('change', function (e) {
                var element = e.target;
                element.value = formatter(ngModel.$modelValue);
            });

            function parser(value) {
                var m = moment(value);
                var valid = m.isValid();
                ngModel.$setValidity('datetime', valid);
                if (valid) return m.valueOf();
                else return value;
            }

            function formatter(value) {
                var m = moment(value);
                var valid = m.isValid();
                if (valid) return m.format("LLLL");
                else return value;

            }

        } //link
    };

}); //appDatetime 
```

在我的表格中，我这样使用它：

```
<label>begin: <input type="text" ng-model="doc.begin" app-datetime required /></label>
<label>end: <input type="text" ng-model="doc.end" app-datetime required /></label> 
```

这会将时间戳（自 1970 年以来的毫秒数）绑定到`doc.begin`和`doc.end`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-12T11:41:59.840

对于任何感兴趣的人，在 Angular2+ 中：

```
<input type="text" placeholder="My Date" [ngModel]="myDate | date: 'longDate'"> 
```

[使用DatePipe](https://angular.io/api/common/DatePipe) Angular中的过滤器类型。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-06-30T16:39:28.647

我更喜欢让服务器不加修改地返回日期，并让 javascript 进行视图按摩。我的 API 从 SQL Server 返回“MM/DD/YYYY hh:mm:ss”。

**资源**

```
angular.module('myApp').factory('myResource',
    function($resource) {
        return $resource('api/myRestEndpoint/', null,
        {
            'GET': { method: 'GET' },
            'QUERY': { method: 'GET', isArray: true },
            'POST': { method: 'POST' },
            'PUT': { method: 'PUT' },
            'DELETE': { method: 'DELETE' }
        });
    }
); 
```

**控制器**

```
var getHttpJson = function () {
    return myResource.GET().$promise.then(
        function (response) {

            if (response.myDateExample) {
                response.myDateExample = $filter('date')(new Date(response.myDateExample), 'M/d/yyyy');
            };

            $scope.myModel= response;
        },
        function (response) {
            console.log(response.data);
        }
    );
}; 
```

**myDate 验证指令**

```
angular.module('myApp').directive('myDate',
    function($window) {
        return {
            require: 'ngModel',
            link: function(scope, element, attrs, ngModel) {

                var moment = $window.moment;

                var acceptableFormats = ['M/D/YYYY', 'M-D-YYYY'];

                function isDate(value) {

                    var m = moment(value, acceptableFormats, true);

                    var isValid = m.isValid();

                    //console.log(value);
                    //console.log(isValid);

                    return isValid;

                };

                ngModel.$parsers.push(function(value) {

                    if (!value || value.length === 0) {
                         return value;
                    };

                    if (isDate(value)) {
                        ngModel.$setValidity('myDate', true);
                    } else {
                        ngModel.$setValidity('myDate', false);
                    }

                    return value;

                });

            }
        }
    }
); 
```

**HTML**

```
<div class="form-group">
    <label for="myDateExample">My Date Example</label>
    <input id="myDateExample"
           name="myDateExample"
           class="form-control"
           required=""
           my-date
           maxlength="50"
           ng-model="myModel.myDateExample"
           type="text" />
    <div ng-messages="myForm.myDateExample.$error" ng-if="myForm.$submitted || myForm.myDateExample.$touched" class="errors">
        <div ng-messages-include="template/validation/messages.html"></div>
    </div>
</div> 
```

**模板/验证/messages.html**

```
<div ng-message="required">Required Field</div>
<div ng-message="number">Must be a number</div>
<div ng-message="email">Must be a valid email address</div>
<div ng-message="minlength">The data entered is too short</div>
<div ng-message="maxlength">The data entered is too long</div>
<div ng-message="myDate">Must be a valid date</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-05T13:29:05.790

**Angularjs ui bootstrap** 你可以使用 angularjs ui bootstrap，它还提供日期验证

```
<input type="text"  class="form-control" 
datepicker-popup="{{format}}" ng-model="dt" is-open="opened" 
min-date="minDate" max-date="'2015-06-22'"  datepickeroptions="dateOptions"
date-disabled="disabled(date, mode)" ng-required="true"> 
```

在控制器中可以指定任何你想要显示日期的格式 datefilter

$scope.formats = ['dd-MMMM-yyyy', 'yyyy/MM/dd', 'dd.MM.yyyy', 'shortDate'];

# php - jQuery自动完成填充表单如何连接到mysql

> ID：14474562
> 
> 赞同：0
> 
> 时间：2013-01-23T07:35:40.717
> 
> 标签：php, mysql

jQuery自动完成填充表单如何连接到mysql

此代码显示数组结果，我想连接 mysql 数据库如何连接到 mysql 请帮我解决这个问题

自动完成.htm

```
<link rel="stylesheet" href="http://static.jquery.com/ui/css/base2.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){
    var ac_config = {
        source: "/ajax/demo_cities.php",
        select: function(event, ui){
            $("#city").val(ui.item.city);
            $("#state").val(ui.item.state);
            $("#zip").val(ui.item.zip);
        },
        minLength:1
    };
    $("#city").autocomplete(ac_config);
});
</script>
<form action="#" method="post">
     <p><label for="city">City</label><br />
         <input type="text" name="city" id="city" value="" /></p>
     <p><label for="state">State</label><br />
         <input type="text" name="state" id="state" value="" /></p>
     <p><label for="zip">Zip</label><br />
         <input type="text" name="zip" id="zip" value="" /></p>
</form> 
```

demo_cities.php

```
<?php

// Data could be pulled from a DB or other source
$cities = array(
    array('city'=>'New York', state=>'NY', zip=>'10001'),
    array('city'=>'Los Angeles', state=>'CA', zip=>'90001'),
    array('city'=>'Chicago', state=>'IL', zip=>'60601'),
    array('city'=>'Houston', state=>'TX', zip=>'77001'),
    array('city'=>'Phoenix', state=>'AZ', zip=>'85001'),
    array('city'=>'Philadelphia', state=>'PA', zip=>'19019'),
    array('city'=>'San Antonio', state=>'TX', zip=>'78201'),
    array('city'=>'Dallas', state=>'TX', zip=>'75201'),
    array('city'=>'San Diego', state=>'CA', zip=>'92101'),
    array('city'=>'San Jose', state=>'CA', zip=>'95101'),
    array('city'=>'Detroit', state=>'MI', zip=>'48201'),
    array('city'=>'San Francisco', state=>'CA', zip=>'94101'),
    array('city'=>'Jacksonville', state=>'FL', zip=>'32099'),
    array('city'=>'Indianapolis', state=>'IN', zip=>'46201'),
    array('city'=>'Austin', state=>'TX', zip=>'73301'),
    array('city'=>'Columbus', state=>'OH', zip=>'43085'),
    array('city'=>'Fort Worth', state=>'TX', zip=>'76101'),
    array('city'=>'Charlotte', state=>'NC', zip=>'28201'),
    array('city'=>'Memphis', state=>'TN', zip=>'37501'),
    array('city'=>'Baltimore', state=>'MD', zip=>'21201'),
);  

// Cleaning up the term
$term = trim(strip_tags($_GET['term']));

// Rudimentary search
$matches = array();
foreach($cities as $city){
    if(stripos($city['city'], $term) !== false){
        // Add the necessary "value" and "label" fields and append to result set
        $city['value'] = $city['city'];
        $city['label'] = "{$city['city']}, {$city['state']} {$city['zip']}";
        $matches[] = $city;
    }
}

// Truncate, encode and return the results
$matches = array_slice($matches, 0, 5);
print json_encode($matches); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:52:26.563

如果我正确理解您的问题，您只想从该数组中获得相同的结果，但从您的 php 代码中的数据库中获得。如果是这样，您可以使用这些方面的东西...

```
<?php
$conn = mysql_connect('host', 'user', 'pass'); //You want to replace that with your connection details, though it should be in a class so you aren't reconnecting every page call
if(!$conn) {
    echo json_encode(array('success' => false, 'reason' => 'Could not connect'));
    exit;
}
@mysql_select_db('dbname'); // replace with your database name
$term = trim(strip_tags($_REQUEST['term']));
$sql = "SELECT `city`, `state`, `zip` FROM tablename WHERE city LIKE '".$term."%'";
$results = mysql_query($sql);
if($results) {
    while($row = mysql_fetch_assoc($results)) {
        $matches[] = array('city' => $row['city'], 'label' => "{$row['city']}, {$row['state']}, {$row['zip']}"; //honestly not sure what thats about but you had it so im adding it
    }
    $matches = array_slice($matches, 0, 5); // again not sure about this, but you have it so here it is
} else {
    $matches = array('success' => false, 'reason' => 'no matches found');
}
echo json_encode($matches);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:50:16.087

要使用 PHP 连接到 MySQL 数据库，您可以使用以下两种方法之一：MySQL 或 MySQLi。

**编辑：**连接到数据库并返回一个数组后，您可以使用当前代码为自动完成查询准备数据。

MySQL 示例：

```
<?php

     // Connect to server and select database
     $conn = $mysql_connect('HOST', 'USER', 'PASS');
     $db   = $mysql_select_db('DATABASE');

     // To retrieve data from database:
     $query = "SELECT column_name FROM table_name"; // Your query
     $result = mysql_query($query);

     if($result) {
          if(mysql_num_rows($result) != 0 {

               while($row = mysql_fetch_assoc($result)) {
                    echo $row[column_name];
               }
          } else {
               echo "Your query returned 0 rows.";
     } else {
          echo "Your query is invalid.<br />MySQL error " . $mysql_error();
     }
?> 
```

MySQLi：

```
<?php

     $mysqli = new mysqli('HOST', 'USER', 'PASS', 'DATABASE');

     $query = "SELECT column_name FROM table_name WHERE column_name = ?";
     $result = $mysqli->query($query);
     while($row = $result->fetch_array()) {
          $rows[] = $row;
     }
?> 
```

检索数据的快速和简单的方法。我建议使用 if/else 语句进行错误检查，以帮助您解决问题并提醒最终用户出现问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-07T13:51:45.303

将第 13 行中的代码更改为：

```
$matches[] = array('city' => $row['city'], 'label' => "{$row['city']}, {$row['state']}, {$row['zip']}" 
```

# java - 虚拟主机站点上的 Java Applet 错误

> ID：14474564
> 
> 赞同：1
> 
> 时间：2013-01-23T07:35:52.620
> 
> 标签：java, html, applet, classnotfoundexception, japplet

当我将小程序文件上传到我的网站时，我在尝试运行它时遇到问题。它不断给我错误，但在我的计算机上运行良好。我正在使用 NetBeans 来创建我的 Applet，并且我使用了该`<Applet>`标记，因为我记得使用它并且它有效。但是 NetBeans 确实声明了一条警告消息，指出该`<Applet>`标记已被弃用并建议使用`<Object>`.

现在这对我来说有点困难，因为我不知道如何将`<Object>`标签用于小程序。我肯定在网上搜索过答案。每个都提供了不同的方式来为 Applet 声明它，但它们都不起作用。每次我尝试在线说明的不同方法时，NetBeans 都会不断返回警告/错误消息。

所以我的问题是：如何正确使用`<Object>`Java Applet 的标签？

经过大量搜索，我找到了一个没有返回值但甚至没有在我的计算机上加载 Applet 的示例。示例如下： java 代码：

```
<object data="VirtualArmory.jar" type="application/x-java-applet"></object> 
```

我尝试了 .jar 和 .class 并且输出仍然相同。Java 插件一直在加载。

**编辑：**

这是我使用`<Applet>`标签时遇到的错误。但是在使用时没有得到任何`developJava.js`。

```
java.lang.ClassNotFoundException: VirtualArmory
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这就是我尝试 developJava.js 命令的方式。对不起，因为这是我第一次看到和使用这个命令，我往往会犯很多错误。

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
var attributes = {
  codebase:'http://morganaprime.webs.com/',
    code:'VirtualArmory.class',
    archive:'VirtualArmory.jar',
    width:710, 
    height:540
};
var parameters = {gunSize:16};
var version = '1.6';
deployJava.runApplet(attributes, parameters, version);
</script> 
```

我正在随机尝试尽我所能来完成这项工作！这是我的测试网站的链接。 [网站在这里](http://morganaprime.webs.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:39:56.710

> 所以我的问题是：如何正确使用`<Object>`Java Applet 的标签？

正确答案是“不要使用它”（或`applet`元素）。而是将嵌入小程序的责任委托给[`deployJava.js`](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit). 它可能看起来像这样。

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
var attributes = {
    codebase:'http://morganaprime.webs.com/',
    code:'net.mp.eoncalculator.VirtualArmory',
    archive:'VirtualArmory.jar',
    width:710, 
    height:540
};
var parameters = {gunSize:16};
var version = '1.6';
deployJava.runApplet(attributes, parameters, version);
</script> 
```

> 但是 NetBeans 确实声明了一条警告消息，指出该`<Applet>`标记已被弃用。

仅从 HTML 4.01（很久以前）开始！

## 更新 - 工作示例

![屏幕上的小程序](../Images/137ff91d0e8781574911b335f387885e.png)

```
<html>
<body>
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
var attributes = {
    codebase:'http://morganaprime.webs.com/',
    code:'net.mp.eoncalculator.VirtualArmory',
    archive:'VirtualArmory.jar',
    width:1000,
    height:700
};
var parameters = {gunSize:16};
var version = '1.6';
deployJava.runApplet(attributes, parameters, version);
</script>
</body>
</html> 
```

# jquery - 如何让这个 jQuery 动画代码永远循环？

> ID：14474566
> 
> 赞同：4
> 
> 时间：2013-01-23T07:36:03.650
> 
> 标签：jquery, loops, jquery-animate, slider, infinite-loop

我正在尝试在滑块上创建一个文本动画循环...我尝试循环但它没有用..你能告诉我如何永远循环这个脚本..谢谢

```
<script>
$(document).ready(function() {
    $("#header").hide();
    var headerOne='I';
    var headerTwo='Am'; 
    var headerThree='So';
    var headerFour='Cool';
        $("#header").html(headerOne);
    $("#header").fadeIn(1000);
    $('#header').delay(1000).fadeOut(1000,function(){
    $(this).html(headerTwo).fadeIn(1000);
     $('#header').delay(1000).fadeOut(1000,function(){
     $(this).html(headerThree).fadeIn(1000);
     $('#header').delay(1000).fadeOut(1000,function(){
     $(this).html(headerFour).fadeIn(1000).delay(1000).fadeOut(1000);       
      });
        });
    });

});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T07:51:31.117

如果您稍微清理一下代码。你可以意识到这`setInterval`不是必需的。只需使用最后一个回调来重复动画。

```
$(function () {
    var $header = $("#header");
    var header = ['I', 'Am', 'So', 'Cool'];
    var position = -1;

    !function loop() {
        position = (position + 1) % header.length;
        $header
            .html(header[position])
            .fadeIn(1000)
            .delay(1000)
            .fadeOut(1000, loop);
    }();
}); 
```

[看这里。](http://jsfiddle.net/M9S8P/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:45:01.617

您可以使用递归，最后一个`fadeOut`将在完成时执行重复功能。

```
function repeat() {
    $("#header").hide();
    var headerOne='I';
    var headerTwo='Am'; 
    var headerThree='So';
    var headerFour='Cool';
    $("#header").html(headerOne);
    $("#header").fadeIn(1000);
    $('#header').delay(1000).fadeOut(1000,function() {
        $(this).html(headerTwo).fadeIn(1000);
        $('#header').delay(1000).fadeOut(1000,function() {
            $(this).html(headerThree).fadeIn(1000);
            $('#header').delay(1000).fadeOut(1000,function() {
                $(this).html(headerFour).fadeIn(1000).delay(1000).
                    fadeOut(1000, repeat); 
            });
        });
    });
}

$(document).ready(function() {
    repeat();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T07:52:55.063

创建一个递归和自执行函数并将其用作最终回调：

ps 冒昧地清理了你的代码。

```
$(function () {
    (function repeat() {
        var header = $("#header"),
            headerOne = 'I',
            headerTwo = 'Am',
            headerThree = 'So',
            headerFour = 'Cool';

        header.text(headerOne)
            .fadeIn(1000)
            .delay(1000)
            .fadeOut(1000, function () {
            header.text(headerTwo)
                .fadeIn(1000)
                .delay(1000)
                .fadeOut(1000, function () {
                header.text(headerThree)
                    .fadeIn(1000)
                    .delay(1000).fadeOut(1000, function () {
                    header.text(headerFour)
                        .fadeIn(1000)
                        .delay(1000)
                        .fadeOut(1000, repeat);
                });
            });
        });
    })();
}); 
```

# c - C：如何从输入中读取括号内未知数量的整数？

> ID：14474569
> 
> 赞同：-3
> 
> 时间：2013-01-23T07:36:12.823
> 
> 标签：c

在一对括号中读取未知数量的整数时，这很麻烦。

例如：

```
(1, 2, 3) 
```

但我们不知道有多少整数。

与其将它们完全作为一个字符串来阅读，任何人都可以有任何其他想法来解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:40:11.767

从发布的问题中您真正想要什么非常不清楚。但是，如果您正在谈论函数的可变长度参数，那么：查看C 中的[可变参数。](http://www.cprogramming.com/tutorial/lesson17.html)

如果您正在谈论阅读未知数。来自输入缓冲区的整数，那么您必须创建自己的函数来逐个字符地读取，解析数字、括号和逗号的输入：执行此操作的基本解析器如下（注意，它未经测试并且可能包含错误) - 理解并相应地修改它。您可以阅读任何号码。这个程序的整数。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

typedef enum { START, OPAREN, CPAREN, COMMA, DIGIT, EOF_S,UNKNOWN }Token;
int c;
unsigned char state = 0;
int numbers[100];

Token getToken(FILE *f)
{
   while(isspace(c = fgetc(f)));
   if(c == EOF) return EOF_S;
   if(c == '(') return OPAREN;
   if(c == ',') return COMMA;
   if(c == ')') return CPAREN;
   if(isdigit(c)) return DIGIT;
   return UNKNOWN;
}

int getNumber(FILE *f)
{
   int returnNumber = 0;
   Token tok = START;
   while(tok != DIGIT){ 
     tok = getToken(f);
     if(tok == UNKNOWN){ state = 1; return 0x0FFFFFFF;}
     if(tok == EOF_S) { state = 2; return 0x0FFFFFFF;} 
   } 
   if(tok == DIGIT){
      while(tok == DIGIT){
         returnNumber = returnNumber * 10 + (c - '0');
         tok =getToken(f);
      }
   }
   return returnNumber;
}

int getNumbers(FILE *f, int *numbers_0)
{
   int number;
   int no_counter = 0;
   while(((number = getNumber(f)) != 0x0FFFFFFF) && (state == 0)){
      numbers_0[no_counter++] = number;
   }
   return no_counter; //returns no. of numbers between ( and ), separated by ','
}

int main(int argc, char *argv[])
{
   int no, i;
   no = getNumbers(stdin,numbers);
   if(no > 100) no = 100;
   for(i = 0; i < no; i++){
     printf("%d\n",numbers[i]);
   }
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:06:29.573

我希望你正在寻找一个带有可变参数的函数实现，下面的代码片段会对你有所帮助。

```
int add(int *total, int count, ...)
{
   int i = 0;
   va_list numbers;
   va_start(numbers, count);
   for (i = 0; i < count; i++)
   {
       *total += va_arg(numbers, int);
   } 
   va_end(numbers);
} 
```

你可以像这样调用这个函数

```
...
int result = 0;
add(&result, 3, 10, 20, 30);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:51:38.067

这里经过一个简单的C代码来做

```
#include <stdio.h>

int main(int argc, char **argv)
{
    int x; char c='\0';

    scanf("%*[(]");

    while (c != ')' && scanf("%d %c", &x, &c)==2){

        if (c!=',' && c != ')') {
            printf ("format error in the input\n");
            break;
        }
        printf("Number: %d\n", x);
    }
} 
```

如果您的输入流按照上述代码中的说明`stdin`使用`scanf`

如果您的输入流是`file`然后使用`fscanf`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T07:51:49.967

如果您只需要阅读（并立即处理），您可以

1.  读取字符 C 直到 C=='('

2.  如果它是空格/制表符/CR/LF，则读取 char C 继续步骤 2 否则步骤 3

3.  if C==')' 阅读列表结束

4.  因此，如果您在这里 c 是一个数字，那么您可以取回 char（使用 ungetc(C,stdin) ）并将所有数字重新读取为整数。在这里您可以根据需要使用 intger 进行操作。继续2。

如果列表在 algo enogh 之上的语法正确，则添加 where read C test on EOF 和 step 4 test on alpha。

我认为你可以在没有 goto 的情况下使用 C 重写算法。

# r - 如何在R中的data.frame中提取子序列的最后日期？

> ID：14474575
> 
> 赞同：2
> 
> 时间：2013-01-23T07:36:30.833
> 
> 标签：r, date, dataframe, subset

我在以下数据集上苦苦挣扎了一段时间：

```
 id   date       var1 var2     
1   7031 2008-12-01  27  1
2   7031 2009-01-05   6  0
3   7031 2009-02-02   0  3
4   7031 2008-11-01   1  4
5   7500 2009-07-11  30  0
6   7500 2009-10-01   8  0
7   7500 2010-01-01   0  0
8   7041 2009-06-20  26  0
9   7041 2009-08-01   0  0
10  0277 2009-01-01   3  0 
```

我想为每个 id 输出具有非零变量的最后日期。这些用户的时间序列长度不同。我希望像这样的输出：

```
id   last_date
7031 2009-02-02
7500 2009-10-01
7041 2009-06-20
0277 2009-01-01 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:58:52.483

首先，对您的数据进行子集化，然后使用`aggregate()`：

这是您的示例数据：

```
x <- read.table(header = TRUE, stringsAsFactors=FALSE, text = "
                id   date       var1 var2     
                1   '7031' 2008-12-01  27  1
                2   '7031' 2009-01-05   6  0
                3   '7031' 2009-02-02   0  3
                4   '7031' 2008-11-01   1  4
                5   '7500' 2009-07-11  30  0
                6   '7500' 2009-10-01   8  0
                7   '7500' 2010-01-01   0  0
                8   '7041' 2009-06-20  26  0
                9   '7041' 2009-08-01   0  0
                10  '0277' 2009-01-01   3  0") 
```

确保您的“日期”变量值由实际日期而不是字符表示。

```
x$date <- as.Date(x$date) 
```

子集：

```
x2 <- with(x, x[!(var1 == 0 & var2 == 0), ]) 
```

总计的：

```
aggregate(date ~ id, x2, max)
#     id       date
# 1  277 2009-01-01
# 2 7031 2009-02-02
# 3 7041 2009-06-20
# 4 7500 2009-10-01 
```

如果您不想创建子集数据的新对象，还可以使用：`aggregate(date ~ id, x[!(x$var1 == 0 & x$var2 == 0), ], max)`

# c - 从控制台应用程序调用 .DLL 函数时遇到问题

> ID：14474576
> 
> 赞同：0
> 
> 时间：2013-01-23T07:36:31.603
> 
> 标签：c, dll, import

我真的需要你的帮助，因为我在将一个 .DLL 函数集成到我的控制台应用程序中时遇到了很多问题。这个 .DLL 包括获取 2 个字符（字符 a 和字符 b）（输入）并将它们添加到一个字符中。例如： Char A=H Char B=I Output=HI 但这是问题所在。当我编译控制台应用程序并运行它时，它说没有检测到该函数。这是我的问题..为什么地狱没有即使在 .def 文件中我列出了 LIBRARY 和唯一导出的函数，它也能找到函数吗？请帮助我。 **这是 .DLL 源**

```
 #include "stdafx.h"
    char concatenazione(char a,char b)
    {
    return a+b;
    }

**THIS IS THE .DEF FILE OF THE .DLL**

    LIBRARY Concatenazione
    EXPORTS
    concatenazione @1

**And this is the dllmain.cpp**

#include "stdafx.h"

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}
**This is the Console Application partial source(For now it just includes the functions import part)**

#include <iostream>
#include <windows.h> 
#include <stdio.h> 

typedef int (__cdecl *MYPROC)(LPWSTR); 

int main( void ) 
{ 
    HINSTANCE hinstLib; 
    MYPROC ProcAdd; 
    BOOL fFreeResult, fRunTimeLinkSuccess = FALSE; 

    // Get a handle to the DLL module.

    hinstLib = LoadLibrary(TEXT("C:\\ConcatenazioneDiAyoub.dll")); 

    // If the handle is valid, try to get the function address.

    if (hinstLib != NULL) 
    { 
        ProcAdd = (MYPROC) GetProcAddress(hinstLib, "concatenazione"); 

        // If the function address is valid, call the function.

        if (NULL != ProcAdd) 
        {
            fRunTimeLinkSuccess = TRUE;
            (ProcAdd) (L"Message sent to the DLL function\n"); 
        }
        // Free the DLL module.

        fFreeResult = FreeLibrary(hinstLib); 
    } 

    // If unable to call the DLL function, use an alternative.
    if (! fRunTimeLinkSuccess) 
        printf("Message printed from executable\n"); 

    return 0;

}
**The Console Applications runs fine but the output is "Message printed from executable".This means that the function hasn't been detected.** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:53:36.137

Ok, I looked at what you have above and wondered where in your code you import the dll. I'm kind of new at this myself, so I found [this article](http://msdn.microsoft.com/en-gb/magazine/cc301501.aspx) on how to do it.

If I understand correctly, in your console application you need to have a line like (assuming the name of your dll is "your.dll":

```
[DllImport("your.Dll")] 
```

by the way, welcome to Stack Overflow, I noticed it is your first day! CHEERS!

# bash - 在 bash shell 中搜索

> ID：14474578
> 
> 赞同：1
> 
> 时间：2013-01-23T07:36:40.210
> 
> 标签：bash, shell

我有一个文本文件。

文本文件中的信息是

```
Book1:Author1:10.50:50:5
Book2:Author2:4.50:30:10 
```

第一个是书名，第二个是作者名，第三个是价格，第四个是数量，第五个是销量。

目前我有这组代码

```
function search_book
{
    read -p $'Title: ' Title
    read -p $'Author: ' Author
    if grep -Fq "${Title}:${Author}" BookDB.txt
    then
        record=grep -c "${Title}:${Author}" BookDB.txt
        echo "Found '" $record "' record(s)"
    else
        echo "Book not found"
    fi
} 
```

对于 $record，我正在尝试计算找到的行数。我是否为它做了正确的事情，因为当我运行此代码时，它只显示错误命令 -c。

当我这样做时

```
echo "Found"
grep -c "${Title}" BookDB.txt
echo "record(s)" 
```

它有效，但输出是

```
Found
1
record(s) 
```

我希望他们在一起

我是否也可以将 grep -i 添加到 grep -Fq 以便将所有内容变成小写字母以便更好地搜索？

假设我要搜索 Book1 和 Author1，如果我输入“ok”作为标题，输入“uth”作为作者，是否有任何 % 命令添加到标题以在标题和作者中间进行搜索？

预期的输出也预计是..

```
Found 1 record(s)

Book1,Author1,$10.50,50,5. 
```

有什么地方可以将 : 分隔符更改为 , 吗？还要在第三列加$是大米？

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:47:04.447

更改`record=grep -c "${Title}:${Author}" BookDB.txt`为`record=$(grep -c "${Title}:${Author}" BookDB.txt)`将修复错误。`record=$(cmd)`意味着将命令的输出分配给`cmd`变量`record`。没有它，shell 将解释为由环境变量设置 (record=grep) 前置`record=grep -c ...`的命令。`-c`

顺便说一句，由于您的数据库格式是面向列的文本数据，`awk`因此应该是一个更好的工具。示例代码：

```
function search_book
{
    read -p $'Title: ' Title
    read -p $'Author: ' Author
    awk -F: '{if ($1 == "'"$Title"'" && $2 ~ "'"$Author"'") {count+=1; output=output "\n" $0} } 
    END {
        if (count > 0) {print "found", count, "record(s)\n", output}
        else {print "Book not found";}}'  BookDB.txt
} 
```

如您所见，使用 awk 可以更轻松地更改分隔符（例如`awk -F,`，用于逗号分隔符），并且还使程序更加健壮（例如，它将匹配字符串限制为前两个字段）。如果您只需要模糊匹配而不是精确匹配，则可以更改`==`为`~`条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:55:11.737

“未命名的命令 -c”错误可以通过将赋值的右侧部分括在反引号或“$()”中来避免，例如：

```
record=`grep -ic "${Title}:${Author}" BookDB.txt`
record=$(grep -ic "${Title}:${Author}" BookDB.txt) 
```

此外，此片段显示 -i 非常好。但是，请注意，两个 grep 命令应该使用相同的标志列表（第二个中缺少 -F） - 当然，-q 除外。

无论如何，执行两次 grep 可能不是最好的方法。关于什么...

```
record=`grep -ic "${Title}:${Author}" BookDB.txt 2>/dev/null`
if [ ! -z "$record" ]; then ... 
```

... 或类似的东西？

顺便说一句：如果省略 -F，则允许用户使用正则表达式进行操作。这不仅会提供通配符，还会提供更复杂模式的可能性。您还可以对脚本应用一个选项来决定是否使用 -F ..

最后但同样重要的是：要修改行，以更改分隔符或操作列，您至少可以查看手册页或 awk(1) 或 cut(1)。虽然我认为这里更适合使用更复杂的语言，例如 perl(1) 或 python(1)，尤其是当脚本要扩展更多功能时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:00:56.847

添加到上面的答案（这开始是评论，但它增长了......）：

这种`$()`形式是首选： - 它允许嵌套， - 它简化了很多的使用`"`and `'`（可以说，嵌套的每个“级别”都在它们的级别上看到它们）。很难处理`as using nested quotes and single-quotes becomes a nightmare of`` 并且`\\...`取决于“子shell的级别”，它们将被解释为......

例如：（尝试只 grep 一次）

```
export results="$(grep -i "${Title}:${Author}" BookDB.txt)" ; 
export nbresults=$(echo "${results}" | wc -l) ; 
printf "Found %8s record(s)\n" "nbresults" ; 
echo "$nbresults" ; 
```

或者，如果太多结果无法放入变量中：

```
export tmpresults="/tmp/results.$$"
grep -i "${Title}:${Author}" BookDB.txt > "${tmpresults}" 
export nbresults=$(wc -l "${tmpresults}") ; 
printf "Found %8s record(s)\n" "nbresults" ; 
cat "${tmpresults}" ; 
rm -f "${tmpresults}" ; 
```

注意：我使用`"`了很多（除了`wc -l`一行）来说明有时可能需要它（不是在上述所有情况下！）来保留空格、换行符等（我故意将它用于 nbresults，以便它只包含行数，而不是前面的空格）。

# java - 使用 Htmlunit，按钮 click() 不起作用；

> ID：14474580
> 
> 赞同：0
> 
> 时间：2013-01-23T07:36:45.333
> 
> 标签：java, javascript, login, htmlunit

大家好 :) 我是 HtmlUnit (Java) 的新手。这是我第一次使用 HtmlUnit 的东西。我在登录网页时遇到了一些问题。

该网站的部分来源如下。

```
 <table>
        <tr>
            <td colspan="2">
                <div class="AlignRight">
                    <div class="Button" id="loginButton">
                        <div class="Left">&nbsp;</div>
                        <div class="Middle"><a href="javascript:submitForm(document.getElementById('localLogin'), 'submit');"><strong>log-in</strong></a></div>
                        <div class="Right">&nbsp;</div>
                    </div>
                </div>
            </td>
        </tr>
    </table> 
```

我写的代码的某些部分在下面，加上我设置了“webClient.setJavaScriptEnabled(true);” 已经。

```
HtmlPage page = (HtmlPage) webClient.getPage("https://************");
            HtmlForm form = page.getFormByName("login");
        HtmlElement button = form.getElementById("loginButton");

                    // Enter login and passwd
                    form.getInputByName("username").setValueAttribute("******");
                    form.getInputByName("password").setValueAttribute("******");
                    page = (HtmlPage) button.click();
                            System.out.println(page.getUrl());
                    System.out.println("Success"); 
```

所以..运行代码后，应该像单击按钮后一样更改url，但我看不出有任何区别。运行没有错误，但我看不到更改后的 Url..

有什么问题吗 ？..请给我一些建议T_T！先谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:35:39.500

您可以尝试手动执行 javascript：

```
 page.executeJavaScript("javascript:submitForm(document.getElementById('localLogin'), 'submit');"); 
```

# jquery - 如何在handsontable中获得td

> ID：14474588
> 
> 赞同：0
> 
> 时间：2013-01-23T07:37:09.913
> 
> 标签：jquery, html, css, handsontable

我有一个像下面这样的handsontable

```
var $container = $("#example1");
$container.handsontable({
  //data: data1,
  rowHeaders:true,
  colHeaders: ["<input type='checkbox' name='selectall' class='headchecker' checked='checked'>", "Com", "Form", "Size", "Grade", "Brand", "Fineness", "Serial", "Gross", "Net", "Fine Oz", "Original Weight","selectall"],
  cols:13,
  minSpareRows: 100

});

<div id="example1" class="dataTable" style="width: 1170px; height: 450px; overflow: scroll;"></div> 
```

我可以访问

```
<style>
    ${"#example1"} table th{font-size:90%; font-weight:bold;}--Column Header
    ${"#example1"} table th:first-child{text-align:left;width:20px;}--rowHeader
    ${"#example1"} table th:first-child+th{width:3%;text-align:left;}--first column header
    ${"#example1"} table th:first-child+th+th+th+th+th+th+th+th+th+th+th+th+th{display:none;}--last column Header
    ${"#example1"} table tr:first-child{font-weight:bold;}--first row
</style> 
```

但我无法访问

```
 ${"#example1"} table tr td:first-child{font-weight:bold;}--first column 
```

这个怎么做...？handsontable的结构是什么样的

```
<table><thead><th><td></td></th></thead><tbody><tr><td></td></tr></tbody> 
```

告诉我handsontable的正确结构......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T23:51:38.517

尝试改变：

```
 ${"#example1"} table tr td:first-child{font-weight:bold;}--first column 
```

为了这：

```
 ${"#example1"} table tr td:first-of-type{font-weight:bold;}--first column 
```

的第一个孩子`tr`是`th`如果您设置了 rowHeaders

**编辑：** 另外......你为什么使用：

```
 ${"#example1"} table th:first-child+th+th+th+th+th+th+th+th+th+th+th+th+th{display:none;}--last column Header 
```

代替 ：

```
${"#example1"} table th:last-child{display:none;}--last column Header 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:28:08.473

# 命名法

*   缩进表示关闭（所以我不必用结束标签弄乱轮廓）
*   Splats (...) 表示在指定级别无限重复
*   点后缀表示`handsontable`应用的类名

# 示意图 (v 0.8.3)

```
table
  colgroup
    col
  thead
    tr
      th
        div.relative
          span.colHeader
      th...
  tbody
    tr
      td... 
```

# odbc - 在不创建 ODBC DSN 的情况下读取 Pervasive Database 9

> ID：14474589
> 
> 赞同：0
> 
> 时间：2013-01-23T07:37:11.777
> 
> 标签：odbc, pervasive, btrieve

我正在用 C# (.NET 4.0) 编写一个应用程序，它必须与另一个更旧的应用程序集成。部分要求是我的程序必须从三个 Btrieve 文件中读取数据。我可以假设这些 Btrieve 数据文件已经存在于安装我的程序的计算机上，并且我还可以假设 Pervasive PSQL V9 也将安装并且关系和事务服务程序正在运行。

我有相关的 DDF 文件，我可以将它们安装为我的应用程序的一部分。它们的创建方式我必须将它们放在 Btrieve 数据文件所在的不同目录中。（它们必须是数据文件所在目录的子目录）。

我刚开始时对 Pervasive 或 Btrieve 一无所知，但经过一些实验后，我已经到了可以使用 32 位 ODBC 管理工具创建 DSN 并且可以使用ODBC ADO 连接器。到目前为止一切都很好。

我的问题是，是否可以从我的 .NET 程序中读取这些文件，而无需在机器上创建 ODBC DSN？换句话说，是否可以在 ODBC 连接字符串中指定 *.DAT 文件所在的目录和 *.DDF 文件所在的目录？

我不致力于使用 ODBC，我很乐意使用 OLEDB 或任何其他允许我使用 .NET 从这些文件中可靠读取的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:41:56.770

虽然无 DSN 连接允许您在没有 DSN 的情况下进行连接，但您仍然需要数据库名称。可以使用[DTI](http://docs.pervasive.com/products/database/psqlv11/wwhelp/wwhimpl/js/html/wwhelp.htm#href=dti/dtiguide.1.2.html#12677)或[DTO 动态](http://docs.pervasive.com/products/database/psqlv11/wwhelp/wwhimpl/js/html/wwhelp.htm#href=dto/dtointro.1.2.html#107797)创建普遍数据库名称。使用 C#，我建议使用 DTO。
如果无法创建数据库名称，则可以使用 OLEDB。`Data Source`它支持在连接字符串的参数中使用路径，如 OLEDB 文档的[远程连接](http://docs.pervasive.com/products/database/psqlv11/wwhelp/wwhimpl/js/html/wwhelp.htm#href=oledb/adotasks.2.3.html#77608)部分所述。

还有一点需要注意的是，确保将 .NET 程序编译为 x86 而不是 AnyCPU。Pervasive OLEDB 提供程序只有 32 位。如果您在编译为 AnyCPU 的 64 位操作系统上安装您的应用程序，它将寻找 64 位提供程序并失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:06:45.183

您应该搜索 DSN-less 连接。不是将 DSN=mydsn 传递给 connect 方法（其中 mydsn 是您设置的 DSN），而是传递 DRIVER=xxx（其中 xxx 是驱动程序的名称）以及它需要将其定向到文件的任何其他属性。有许多站点包含不同 ODBC 驱动程序的连接字符串列表，因此如果您找不到 ODBC 驱动程序的文档，则一定会列出 Pervasive。另一种替代方法是查看注册表中的 DSN，您将在其中找到需要指定的属性的名称。

# liferay-6 - Liferay 6.1保存用户时如何加密密码？

> ID：14474593
> 
> 赞同：0
> 
> 时间：2013-01-23T07:37:43.907
> 
> 标签：liferay-6, liferay-ide

我正在尝试使用 Liferay 的用户实体通过编写代码来添加用户。密码未加密，因此登录失败。代码粘贴在下面。

```
 int countOfUsr = UserLocalServiceUtil.getUsersCount();
    User user = UserLocalServiceUtil.createUser(countOfUsr + 1);
    Date date = new Date();
    user.setCompanyId(countOfUsr + 1);
    user.setCreateDate(date);
    user.setModifiedDate(date);
    user.setDefaultUser(false);
    user.setContactId(countOfUsr + 1);
    user.setPasswordEncrypted(true);
    user.setAgreedToTermsOfUse(true);
    user.setPassword("123");
    user.setPasswordReset(false);
    user.setPasswordModifiedDate(date);
    user.setReminderQueryQuestion("what-is-your-father's-middle-name");
    user.setReminderQueryAnswer("daddad");
    user.setGraceLoginCount(0);
    user.setScreenName("shibu");
    user.setFirstName("SHIBU");
    user.setEmailAddress("shibu@liferay.com");
    user.setFacebookId(0);
    user.setOpenId("");
    user.setPortraitId(0);
    user.setLanguageId("en_US");
    user.setTimeZoneId("GMT");
    UserLocalServiceUtil.addUser(user); 
```

1.  如何修改代码以正确保存用户？
2.  pssword加密该怎么做？
3.  如何为 user.setDigest(arg) 赋值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:32:27.997

指定加密算法以加密`portal-ext.properties`文件中的密码。

例如，

`passwords.encryption.algorithm=SHA` //查看portal.properties中的不同算法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:42:15.393

我认为你应该使用`UserLocalServiceUtil.addUser(whole bunch of arguments)`而不是`UserLocalServiceUtil.addUser(User)`. 它会做你想做的事：创建你的用户并加密密码。

方法签名是：

```
public User addUser(
        long creatorUserId, long companyId, boolean autoPassword,
        String password1, String password2, boolean autoScreenName,
        String screenName, String emailAddress, long facebookId,
        String openId, Locale locale, String firstName, String middleName,
        String lastName, int prefixId, int suffixId, boolean male,
        int birthdayMonth, int birthdayDay, int birthdayYear,
        String jobTitle, long[] groupIds, long[] organizationIds,
        long[] roleIds, long[] userGroupIds, boolean sendEmail,
        ServiceContext serviceContext)
    throws PortalException, SystemException 
```

注意：如果您的密码不验证密码策略，它会抛出一个`UserPasswordException`

# iphone - 在 Iphone 应用程序中发表评论

> ID：14474598
> 
> 赞同：1
> 
> 时间：2013-01-23T07:38:04.197
> 
> 标签：iphone, ios, objective-c, uitextfield

在我的 UITextField 中，当我输入 @ 时，我可以显示一个包含数组值的弹出窗口。

但是现在我的客户需要做一些修改。如果用户输入@，弹出窗口不应该出现，但是当他在@后面输入任何字母时，所有以该字母开头的朋友名字都应该弹出。例如：- 如果用户键入 @p - 弹出窗口将带有所有以字母 P 开头的朋友姓名。

如何做到这一点，我尝试了一些但无法实现（加载视图时我在数组中获取朋友列表）现在我正在使用

```
- (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    if([string isEqualToString:@"@"]) {
        s=1;
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
        [frndsView setCenter:CGPointMake(frndsView.center.x, frndsView.center.y-310)];
        [UIView commitAnimations];
        [commentField resignFirstResponder];
     }
     return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:41:57.417

你的意思是自动完成。检查[本教程](http://www.raywenderlich.com/336/how-to-auto-complete-with-custom-values)。

# c# - 如何验证作为哈希值存储在数据库中的密码？

> ID：14474604
> 
> 赞同：4
> 
> 时间：2013-01-23T07:38:26.607
> 
> 标签：c#, asp.net

我想以加密形式存储密码。我用过sha256。我的代码如下

```
public static string ComputeHash(string plainText)
    {
        int minSaltSize = 4;
        int maxSaltSize = 8;

        Random random = new Random();
        int saltSize = random.Next(minSaltSize, maxSaltSize);

        byte[] saltBytes = new byte[saltSize];
        RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
        rng.GetNonZeroBytes(saltBytes);

        byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);
        byte[] plainTextWithSaltBytes = new byte[plainTextBytes.Length + saltBytes.Length];

        for (int i = 0; i < plainTextBytes.Length; i++)
            plainTextWithSaltBytes[i] = plainTextBytes[i];

        for (int i = 0; i < saltBytes.Length; i++)
            plainTextWithSaltBytes[plainTextBytes.Length + i] = saltBytes[i];

        HashAlgorithm hash = new SHA256Managed();
        byte[] hashBytes = hash.ComputeHash(plainTextWithSaltBytes);
        byte[] hashWithSaltBytes = new byte[hashBytes.Length + saltBytes.Length];

        for (int i = 0; i < hashBytes.Length; i++)
            hashWithSaltBytes[i] = hashBytes[i];

        for (int i = 0; i < saltBytes.Length; i++)
            hashWithSaltBytes[hashBytes.Length + i] = saltBytes[i];

        string hashValue = Convert.ToBase64String(hashWithSaltBytes);
        return hashValue;
    } 
```

现在当用户登录我想验证这个密码我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T07:42:43.960

从用户那里获取纯文本密码，使用相同的算法对其进行散列，并将新生成的散列与存储在数据库中的散列进行比较。如果两个哈希值相同，则用户输入了正确的密码。

### 更新

您每次都使用新鲜的随机盐，从而导致不同的哈希值。只需在您的数据库中创建一个包含所用盐的新列，然后使用这一列。

将盐与哈希一起保存不是*安全问题。*如果直接使用盐，盐只会禁止将预先计算的彩虹表简单地用于单个哈希算法。它没有提供关于使用的真实密码的任何线索，也没有关于盐如何与纯文本密码（前置、附加、交织......）组合的任何线索，因此它可以安全地存储在下一个到生成的哈希。

# php - 大 sql 查询 - 最佳实践

> ID：14474609
> 
> 赞同：2
> 
> 时间：2013-01-23T07:38:36.373
> 
> 标签：php, mysql, session

我的 php 脚本将用户 ID 列表保存在 SESSION ARRAY 变量中，以便在该页面上创建 html 链接。

当我们单击该 html 链接时，另一个`PHP`脚本应在 html 表中显示该用户 ID 的所有用户信息。

我需要你知道为此创建`SELECT`查询的最佳实践

```
1) SELECT * from `users` WHERE  
`user_id` = '$array_valuer1' OR 
`user_id` = '$array_valuer2' OR 
`user_id` = '$array_valuer3' OR 
`user_id` = '$array_valuer4' OR 
`user_id` = '$array_valuer5' OR 
`user_id` = '$array_valuer6' OR 
----
----
`user_id` = '$array_valuern';

2) select all user --> SELECT * from `users`
   then using php script display only the userid in the SESSION array and skip other userid 
```

哪个是最佳实践？SESSION 数组是临时的，我不想保存在数据库中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:44:36.000

如果您在会话中存储少量用户 ID，则可以。但如果数量很大，请不要将它们存储在 SESSION 中。最好使用查询来获取它们。

关于查询，您可以使用以下表格。

```
$q = "SELECT * from `users` WHERE `user_id` IN ('".implode("','", $array)."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:47:50.970

shiplu.mokadd.im 答案很好，但使用 PDO 更好：

```
$db = new PDO("...");
$statement = $db->prepare("SELECT * from `users` WHERE `user_id` IN (':list')");
$statement->execute(array(':list' => implode("','", $array)));
$row = $statement->fetch(); 
```

# actionscript-3 - 在 Flex 中上传照片，设置 URLRequest

> ID：14474611
> 
> 赞同：0
> 
> 时间：2013-01-23T07:38:53.097
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

在我的 Flex 应用程序中为本地系统上传图片。

实际上我`FileReference`在这个类中使用类，`load()`它只在`FP-10`.

所以我正在使用另一种方式，`upload()`但这种方法采用`URLRequest`对象。

```
 private const FILE_UPLOAD_URL:String
fileRef.upload(new URLRequest(FILE_UPLOAD_URL)); 
```

所以问题是如何在本地系统中获取文件 url..

给我这个帮助很多的例子..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:52:28.543

试试这个：

```
public class Uploader{
    private var fileReference:FileReference;
    private static const FILE_UPLOAD_URL:String = "http://somewebsite.com/images/..."

    public function Uploader()
    {
        fileReference = new FileReference();
        fileReference.addEventListener(Event.SELECT, onFileSelect);
    }   

    //Call this method to start browsing on local filesystem
    private function doUpload():void
    {
        fileReference.browse();
    }

    //After selecting a file you can now upload it 
    private function onFileSelect():void
    {
        fileReference.upload(new URLRequest(FILE_UPLOAD_URL));
    }

} 
```

可以在[此处找到完整的工作示例](http://blog.flexexamples.com/2007/09/21/uploading-files-in-flex-using-the-filereference-class/)

还要确保查看有关此问题的[Livedocs](http://livedocs.adobe.com/flex/3/html/help.html?content=17_Networking_and_communications_7.html)

干杯

# mysql - mySQL 'NOT IN' 到 vfp 等效值

> ID：14474614
> 
> 赞同：3
> 
> 时间：2013-01-23T07:39:01.783
> 
> 标签：mysql, foxpro, visual-foxpro

我想知道什么 VFP9 相当于 mySQL 'NOT IN'。

给你确切的目的。我有两个表，我想显示 table1 中没有在 table2 中出现的所有数字。

```
TABLE1
 1
 2
 3
 4
 5
 6
 7
 8
 9
 10

TABLE 2
 2
 3
 4
 8
 9

RESULT:
 1
 5
 6
 7
 10 
```

我编写了 mySQL 代码：

```
SELECT * FROM table1 WHERE table1.row1 NOT IN (SELECT row2 FROM table2) 
```

现在这段代码无法在 vfp9 中运行，似乎它无法识别`NOT`或者我的代码存在缺陷。任何的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:46:35.843

请尝试`LEFT JOIN`：

```
SELECT t1.*
FROM table1 AS t1
LEFT JOIN table2 AS t2 ON t1.row1 = t2.row2
WHERE t1.row1 IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:51:19.763

试试这个：

```
SELECT * FROM Table1 Right JOIN table2 on Table1.row1 = Table2.row2 WHERE Table1.row1 is not null 
```

我相信你的 Table1 和 Table2 是一个游标，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T02:54:52.390

Tamar 的评论是正确的。尝试运行以下代码：

```
CREATE CURSOR table1 (row1 i)
CREATE CURSOR table2 (row2 i)
SELECT table1
FOR x=1 TO 10
    APPEND BLANK
    replace row1 WITH x
ENDFOR
SELECT table2
APPEND BLANK
replace row2 WITH 2
APPEND BLANK
replace row2 WITH 3
APPEND BLANK
replace row2 WITH 4
APPEND BLANK
replace row2 WITH 8
APPEND BLANK
replace row2 WITH 9
SELECT * FROM table1 WHERE table1.row1 NOT IN (SELECT row2 FROM table2) 
```

它工作正常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T07:32:24.140

我创建了与您完全相同的值的 Table1 和 Table2。
我已经执行 `SELECT * FROM table1 WHERE table1.row1 NOT IN (SELECT row2 FROM table2)`
结果是1 5 6 7 10。
代码是对的，结果也是。

# android - 旋转设备时背景图像未正确平铺

> ID：14474615
> 
> 赞同：1
> 
> 时间：2013-01-23T07:39:07.877
> 
> 标签：android, image, background, scrollview, tile

当设备旋转时，我无法在重复平铺模式下保持背景。当我旋转设备时，背景会从重复的图块变为拉伸的图像。

背景是可绘制的 XML (bg.xml)。此 XML 有一个位图，它是一个小的 PNG 文件，平铺模式设置为重复。

```
<?xml version="1.0" encoding="utf-8"?>
    <bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/bgimg"
        android:tileMode="repeat" /> 
```

现在一个片段膨胀了一个特定的布局。此布局有一个 ScrollView。此 ScrollView 将背景设置为上述 bg.xml 文件。布局文件如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainRoot"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_marginLeft="8dip"
        android:layout_marginRight="8dip"
        android:layout_weight="1"
        android:background="@drawable/bg" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            text views
            buttons
            etc

        </LinearLayout>
    </ScrollView>
    </LinearLayout> 
```

如果片段首先以横向或纵向模式显示，则背景图像将按预期平铺。但是，在显示片段的同时旋转设备后，背景图像就会拉伸并且不再平铺。

我有一个活动（不是片段），它在其主要的 LinearLayout （而不是 ScrollView）中使用相同的背景，并且此活动工作正常。

我没有任何代码来处理背景图像，只有 XML 文件。

如果我在 Eclipse 中预览片段，然后旋转，它的行为正常。

布局文件位于“布局”文件夹中。我没有“布局土地”的文件夹。

我测试的设备是带有 Android 2.2 的三星 Galaxy (GT-I9000)（我还没有在其他设备上测试过）。

# c# - 用于将形状文件转换为 kmz 文件的 ASP .NET 代码

> ID：14474617
> 
> 赞同：3
> 
> 时间：2013-01-23T07:39:25.607
> 
> 标签：c#, javascript, .net, shape, kmz

是否有任何用于将形状文件转换为 kmz 文件的 ASP .NET 代码。请给我一个解决方案。我已经搜索了很多。但没有找到任何解决方案。请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T13:37:45.217

这是一个用于转换为 KML 的 C# 项目，可以作为一个有用的起点。 [http://www.reimers.dk/files/esri-shapefile-to-kml](http://www.reimers.dk/files/esri-shapefile-to-kml)

更多细节：[http ://www.reimers.dk/jacob-reimers-blog/esri-shapefile-to-kml-converter](http://www.reimers.dk/jacob-reimers-blog/esri-shapefile-to-kml-converter)

您应该能够使用 .NET 的 System.IO.Compression API 将生成的 KML 转换为 KMZ。KMZ 格式详细信息：

[https://developers.google.com/kml/documentation/kmzarchives](https://developers.google.com/kml/documentation/kmzarchives)

[http://www.codeproject.com/Questions/394726/Converting-kml-to-kmz](http://www.codeproject.com/Questions/394726/Converting-kml-to-kmz)

# jquery - Fancybox 不能与 jQuery 2 一起使用，因为前者使用 $.browser.msie

> ID：14474620
> 
> 赞同：0
> 
> 时间：2013-01-23T07:39:45.640
> 
> 标签：jquery, fancybox

> **可能重复：**
> [Fancybox 不适用于 jQuery v1.9.0 [ f.browser 未定义 / 无法读取属性 'msie' ]](https://stackoverflow.com/questions/14344289/fancybox-doesnt-work-with-jquery-v1-9-0-f-browser-is-undefined-cannot-read)

我正在尝试为新的静态网站切换到 jQuery 2 beta。
我也在使用[fancybox2](http://www.fancyapps.com/fancybox/)，但问题是它`$.browser.msie`在很多地方都使用。
是否有检测浏览器的替代方法？

# java - Java中的弹球

> ID：14474625
> 
> 赞同：-4
> 
> 时间：2013-01-23T07:40:04.527
> 
> 标签：java, eclipse, applet, japplet

实际上我有一个我认为它是完整的代码，但我不知道如何在 Eclipse 上运行它......

那是java上的弹球游戏，我想从这段代码中练习：

> [http://www.cs.cityu.edu.hk/~cssamk/pinball/index.html](http://www.cs.cityu.edu.hk/~cssamk/pinball/index.html)

在所有类中，它都显示此错误：

```
**Selection Doesn't contain an applet...** 
```

我应该怎么做才能运行它？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:57:09.743

```
<APPLET CODE="PinBallGame.class" WIDTH=556 HEIGHT=530>
    <PARA NAME="HIT_SOUND" VALUE="sounds/floor.au"> 
</APPLET> 
```

结合[japplet](/questions/tagged/japplet "显示标记为“japplet”的问题")标签的小程序元素让我认为该类的类声明必须是：

```
public class PinBallGame extends JApplet //.. 
```

然而，在类列表中搜索“PinBallGame.java”显示没有命中。IE 无论该代码代表什么，它都不是小程序的完整示例。

> ..想从这段代码中练习：

鉴于缺乏完整、可行的示例，该代码是一个糟糕的学习基础示例。

更重要的是，在框架中开发和部署自由浮动桌面应用程序要容易得多（`JFrame`）。

# visual-c++ - 谁拥有 _bstr_t::wchar_t*、_bstr_t::char* 运算符返回的字符串？

> ID：14474629
> 
> 赞同：2
> 
> 时间：2013-01-23T07:40:13.747
> 
> 标签：visual-c++, memory-management, com, memory-leaks, bstr

`_bstr_t::wchar_t*, _bstr_t::char*` [运算符](http://msdn.microsoft.com/en-us/library/btdzb8eb.aspx)返回不同类型的字符串。

我需要`delete`还是`free`他们？使用哪个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:10:25.573

在使用调试器逐步实现之后，我的结论是不需要手动`delete`/`free`返回的字符串。返回字符串的生命周期由`_bstr_t`内部管理。

请参阅实现中的以下片段：

```
// Extract a const char_t*
//
inline _bstr_t::operator const char*() const throw(_com_error)
{
    return (m_Data != NULL) ? m_Data->GetString() : NULL;
}

inline const char* _bstr_t::Data_t::GetString() const throw(_com_error)
{
    if (m_str == NULL) {
        m_str = _com_util::ConvertBSTRToString(m_wstr);

        if (m_str == NULL && m_wstr != NULL) {
            _com_issue_error(E_OUTOFMEMORY);
        }
    }

    return m_str;
}

inline void _bstr_t::Data_t::_Free() throw()
{
    if (m_wstr != NULL) {
        ::SysFreeString(m_wstr);
    }

    if (m_str != NULL) {
        delete [] m_str;
    }
} 
```

`_bstr_t`如下使用 unnamed 也是可以的，因为`_bstr_t`实例在构造函数完成***后被***`CString`销毁。

```
CString abc((LPCTSTR)_bstr_t(OLESTR("ABC")));
AfxMessageBox(abc); 
```

# java - 在Java Web应用程序中，如何根据数据库值反映饼图？

> ID：14474630
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:40:16.523
> 
> 标签：java

在我的 java web 应用程序中，我想根据数据库值动态反映饼图，并在此基础上给我一些方法？这是通过 STRUTS 2.0 或 JSP、SERVLET 实现的更好方法。提前致谢.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:08:15.220

您需要生成图表的东西，例如[JFreeChart](http://www.jfree.org/jfreechart/)（在服务器上）或[Flot](http://www.flotcharts.org/)（在浏览器中）。

询问是否应该使用“Struts 2 或 JSP,Servlet”并没有真正的意义——这与你如何生成图表无关——使用你认为合适的任何服务器端技术。

# java - 如何在java中成功创建PDF417条码图像时在android中转换它

> ID：14474633
> 
> 赞同：0
> 
> 时间：2013-01-23T07:40:42.610
> 
> 标签：java, android, barcode

我在java类上写了这段代码..

```
public void getImageBarcode(String data,String path)
{
     PDF417 barcode = new PDF417();
     barcode.setProcessTilde(true);
     barcode.setData(data);

     barcode.setEcl(PDF417.ECL_2);
     // 3 - 90
     barcode.setRowCount(40);
     // 1 - 30
     barcode.setColumnCount(8);
     barcode.setDataMode(PDF417.MODE_AUTO);

     barcode.setUOM(0);
     barcode.setX(2);
     barcode.setBarRatio(3);
     barcode.setLeftMargin(10);
     barcode.setRightMargin(10);
     barcode.setTopMargin(10);
     barcode.setBottomMargin(10);
     barcode.setResolution(72);
     barcode.setRotate(0);

     try {
        barcode.renderBarcode(path);
     } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     }
} 
```

我将在按钮单击时在我的 android 活动中调用此方法..

```
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    String binarydata="12345678 abcdefgh 12345678 abcdefgh 12345678 abcdefgh 12345678";
    String pathimage="E://pdf417e.gif";
    barcode b= new barcode();
    b.getImageBarcode(binarydata,pathimage); 
```

但是当我点击按钮时，我得到一个错误..当我试图在指定的路径中创建图像时......

我得到了致命的异常错误..

当我在 java 应用程序中只运行 java 类函数时，它会工作，但在 android 应用程序中我得到一个错误......

我已经把所有的库文件也...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:23:39.440

在 Android 中，您无法将文件写入您想要的任何位置，而且它使用 Unix 表示法，因此`E://pdf417e.gif`无效。用于`ContextWrapper.getFilesDir()`获取您的应用程序的私有工作文件夹，如此[处](https://stackoverflow.com/questions/4739374/android-get-applications-home-data-directory)所述，还可以阅读可能的[数据存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。

# iphone - 程序内存警告 ios

> ID：14474635
> 
> 赞同：4
> 
> 时间：2013-01-23T07:40:44.057
> 
> 标签：iphone, ios, objective-c, memory-management

我想在内存不足的情况下测试我的应用程序。以前我的方法是运行

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:[UIApplication sharedApplication] selector:@selector(_performMemoryWarning) userInfo:nil repeats:YES]; 
```

但它不再起作用了。通过工作，我的意思是没有调用*didReceiveMemoryWarning 。*我也试过：

```
 [[NSNotificationCenter defaultCenter] postNotificationName:UIApplicationDidReceiveMemoryWarningNotification object: [UIApplication sharedApplication]]; 
 [[NSNotificationCenter defaultCenter] postNotificationName:UIApplicationDidReceiveMemoryWarningNotification object: nil];
 [[UIApplication sharedApplication] _performMemoryWarning]; 
```

但上述方法似乎都不起作用。

任何想法，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:46:56.583

看看这篇文章 [有没有办法手动向 iPhone 设备发送内存警告？](https://stackoverflow.com/questions/8410901/is-there-a-way-to-send-memory-warning-to-iphone-device-manually)

以编程方式发送：`CFNotificationCenterPostNotification(CFNotificationCenterGetDarwinNotifyCenter(), (CFStringRef)@"UISimulatedMemoryWarningNotification", NULL, NULL, true);`

在模拟器中：

硬件 -> 模拟内存警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:15:31.630

测试内存警告代码的一种简单方法是构建到模拟器并单击

> 硬件 ==> 模拟内存警告

# asp.net - 使用 WCF 服务将大文件上传到 Windows azure 存储时出错

> ID：14474636
> 
> 赞同：0
> 
> 时间：2013-01-23T07:40:44.497
> 
> 标签：asp.net, wcf, file-upload, azure

我有一个示例 Web 应用程序，我通过它使用 WCF 服务，该服务旨在将大容量 [高达 50mb] 文件上传到 azure 存储，我收到错误说远程服务器返回了意外响应：（413）请求实体太大.

这是我的示例 Wcf 服务代码：接口 [IService1.cs]

```
namespace FileService
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        void UploadFile(Stream inputstream);

    }

} 
```

服务1.svc

```
public class Service1 : IService1
        {
           public void UploadFile(Stream inputstream)
            {

                CloudStorageAccount storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));

                // Create the blob client.
                CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

                // Retrieve reference to a previously created container.
                CloudBlobContainer container = blobClient.GetContainerReference("images");

                // Retrieve reference to a blob named "myblob".
                CloudBlockBlob blockBlob = container.GetBlockBlobReference("testfile");

                 blockBlob.UploadFromStream(inputstream);
            }
        } 
```

使用 wcf 服务的 Test.aspx 页面

```
protected void Button1_Click(object sender, EventArgs e)
    {
        ServiceReference1.IService1 clientUpload = new ServiceReference1.Service1Client();
        clientUpload.UploadFile(FileUpload1.FileContent);
    } 
```

wcf 中的 web.config 文件

```
 <?xml version="1.0"?>
<configuration>
  <configSections>
  </configSections>
  <!--  To collect diagnostic traces, uncomment the section below or merge with existing system.diagnostics section.
        To persist the traces to storage, update the DiagnosticsConnectionString setting with your storage credentials.
        To avoid performance degradation, remember to disable tracing on production deployments.
  <system.diagnostics>     
    <sharedListeners>
      <add name="AzureLocalStorage" type="FileService.AzureLocalStorageTraceListener, FileService"/>
    </sharedListeners>
    <sources>
      <source name="System.ServiceModel" switchValue="Verbose, ActivityTracing">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
    </sources> 
   </system.diagnostics> -->
  <system.diagnostics>
    <trace>
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IService1"   maxReceivedMessageSize="2147483647"  maxBufferSize="2147483647" transferMode="Streamed" >
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <security mode="None">
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
    -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

Web 应用程序中的 web.config 文件

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2097150"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IService1" maxReceivedMessageSize="2147483647"  />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:50980/Service1.svc" binding="basicHttpBinding"
        bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
        name="BasicHttpBinding_IService1" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:48:59.393

在您的 web.config 中检查您正在使用的绑定，并在传输部分中添加 maxReceivedMessageSize。

例如，如果您使用的是 httpTransport。

```
<httpTransport maxReceivedMessageSize="2147483647"/> 
```

# ios - RestKit vs AFNetworking

> ID：14474639
> 
> 赞同：10
> 
> 时间：2013-01-23T07:41:04.617
> 
> 标签：ios, restkit, afnetworking

我是 RestKit 的新手。有兴趣了解两者之间的区别以及在哪种情况下更好使用。

# selenium - 从詹金斯远程运行 Selenium 测试时出现编译错误

> ID：14474642
> 
> 赞同：1
> 
> 时间：2013-01-23T07:41:12.297
> 
> 标签：selenium, junit, ssh, jenkins, working-remotely

我正在尝试通过 Jenkins 从远程机器运行 selenium 测试（Jenkins 以 root 身份运行）。我可以通过终端通过 SSH 完美地运行测试，但是当我尝试从 Jenkins 运行测试时，我收到下面提到的错误：

```
Started by user anonymous
Building in workspace [workspace path]
SSH: Connecting from host [host-name]
SSH: Connecting with configuration [ruser name] ...
SSH: EXEC: STDOUT/STDERR from command [command to run] ...
Test Location:          [location]
Test started at:             2013-01-21T16:36:44
Test in Progress...
...starting events generation
SalesforceHome.java:3: error: package com.thoughtworks.selenium does not exist
import com.thoughtworks.selenium.*;
^
SalesforceHome.java:4: error: package org.junit does not exist
import org.junit.After;
                ^
SalesforceHome.java:5: error: package org.junit does not exist
import org.junit.Before;
                ^
SalesforceHome.java:6: error: package org.junit does not exist
import org.junit.Test;
                ^
SalesforceHome.java:7: error: package org.openqa.selenium does not exist
import org.openqa.selenium.WebDriver;
                          ^
SalesforceHome.java:8: error: package org.openqa.selenium does not exist
import org.openqa.selenium.WebDriverBackedSelenium;
                          ^
SalesforceHome.java:9: error: package org.openqa.selenium.chrome does not exist
import org.openqa.selenium.chrome.ChromeDriver;
                                 ^
SalesforceHome.java:10: error: package org.openqa.selenium.firefox does not exist
import org.openqa.selenium.firefox.FirefoxDriver;
                                  ^
SalesforceHome.java:11: error: package org.openqa.selenium.firefox does not exist
import org.openqa.selenium.firefox.FirefoxProfile;
                                  ^
SalesforceHome.java:12: error: package org.openqa.selenium.remote does not exist
import org.openqa.selenium.remote.DesiredCapabilities;
                                 ^
SalesforceHome.java:13: error: package org.openqa.selenium.remote does not exist
import org.openqa.selenium.remote.RemoteWebDriver;
                                 ^
SalesforceHome.java:20: error: package org.apache.log4j does not exist
import org.apache.log4j.Logger;
                       ^
SalesforceHome.java:21: error: package org.apache.log4j.xml does not exist
import org.apache.log4j.xml.DOMConfigurator;
                           ^
SalesforceHome.java:22: error: package org.apache.log4j does not exist
import org.apache.log4j.*;
^
SalesforceHome.java:23: error: package org.apache.log4j does not exist
import org.apache.log4j.FileAppender;
                       ^
SalesforceHome.java:24: error: package org.apache.log4j does not exist
import org.apache.log4j.RollingFileAppender;
                       ^
SalesforceHome.java:26: error: cannot find symbol
public class SalesforceHome extends SeleneseTestBase{
                                    ^
  symbol: class SeleneseTestBase
SalesforceHome.java:27: error: cannot find symbol
Logger logger;
^
  symbol:   class Logger
  location: class SalesforceHome
SalesforceHome.java:28: error: cannot find symbol
    @Before
     ^
  symbol:   class Before
  location: class SalesforceHome
SalesforceHome.java:64: error: cannot find symbol
    @Test
     ^
  symbol:   class Test
  location: class SalesforceHome
SalesforceHome.java:87: error: cannot find symbol
    @After
     ^
  symbol:   class After
  location: class SalesforceHome
SalesforceHome.java:31: error: cannot find symbol
         logger = Logger.getLogger(this.getClass().getName());
                                       ^
  symbol: method getClass()
SalesforceHome.java:31: error: cannot find symbol
         logger = Logger.getLogger(this.getClass().getName());
                  ^
  symbol:   variable Logger
  location: class SalesforceHome
SalesforceHome.java:32: error: cannot find symbol
        DOMConfigurator.configure("log4j.xml");
        ^
  symbol:   variable DOMConfigurator
  location: class SalesforceHome
SalesforceHome.java:51: error: cannot find symbol
          WebDriver driver = conf.setConf(BName);
          ^
  symbol:   class WebDriver
  location: class SalesforceHome
SalesforceHome.java:51: error: cannot access WebDriver
          WebDriver driver = conf.setConf(BName);
                                         ^
  class file for org.openqa.selenium.WebDriver not found
SalesforceHome.java:54: error: cannot find symbol
                  if (driver instanceof RemoteWebDriver) 
                                        ^
  symbol:   class RemoteWebDriver
  location: class SalesforceHome
SalesforceHome.java:56: error: cannot find symbol
                  ((RemoteWebDriver) driver).setLogLevel(Level.OFF);
                    ^
  symbol:   class RemoteWebDriver
  location: class SalesforceHome
SalesforceHome.java:61: error: cannot find symbol
          selenium = new WebDriverBackedSelenium(driver, baseUrl);
          ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:61: error: cannot find symbol
          selenium = new WebDriverBackedSelenium(driver, baseUrl);
                         ^
  symbol:   class WebDriverBackedSelenium
  location: class SalesforceHome
SalesforceHome.java:67: error: cannot find symbol
selenium.setTimeout("1000000");
^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:68: error: cannot find symbol
                selenium.open("/");
                ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:71: error: cannot find symbol
        selenium.type("id=", "");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:72: error: cannot find symbol
        selenium.type("id=", "");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:73: error: cannot find symbol
        selenium.click("id=");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:75: error: cannot find symbol
        selenium.waitForPageToLoad("150000");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:76: error: cannot find symbol
        selenium.click("link=");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:78: error: cannot find symbol
        selenium.waitForPageToLoad("150000");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:79: error: cannot find symbol
        selenium.type("id=", "");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:80: error: cannot find symbol
        selenium.click("id=");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:82: error: cannot find symbol
        selenium.waitForPageToLoad("150000");
        ^
  symbol:   variable selenium
  location: class SalesforceHome
SalesforceHome.java:89: error: cannot find symbol
        selenium.stop();
        ^
  symbol:   variable selenium
  location: class SalesforceHome
42 errors
Error: Could not find or load main class org.junit.runner.JUnitCore
SSH: Disconnecting configuration [machine name] ...
ERROR: Exception when publishing, exception message [Exec timed out or was interrupted after 4,067 ms]
[workspace] $ /bin/sh -xe /tmp/hudson1293805758975477494.sh 
```

请指导我做错了什么。由于我是所有这些方面的新手，请详细说明我必须进行哪些更改以及在哪里进行更改的解决方案。在此先感谢=）

# ajax - 联系表格 7 与 qtranslate

> ID：14474643
> 
> 赞同：4
> 
> 时间：2013-01-23T07:41:15.090
> 
> 标签：ajax, wordpress, contact-form-7, qtranslate

我正在将**qTranslate**用于双语 Wordpress。我遇到的一个问题是**Contact Form 7**联系页面。我需要阿拉伯语文本作为 Contact 7 表单中的选项，仅当用户以阿拉伯语查看网站时。

可以说我有以下内容：

```
[radio paymethod "VISA" "MASTERCARD" "AMEX"] 
```

我需要在阿拉伯语模式下以阿拉伯语显示这些值。还需要获取其他语言的错误/成功消息（即：切换语言时）。

我尝试更改`settings.php`插件。它是

```
 return (string) $wpcf7_request_uri;```
and now is
```php
    $lang = "&lang=" . qtrans_getLanguage();
    return ((string) $wpcf7_request_uri) . $lang; 
```

它将我的网址更改为：`http://example.com/contact-us/&lang=ar#wpcf7-f289-t1-o1`并导致 404。

qTranslate 有三个语言配置。

1.  请求参数
2.  预路径模式（将 /en/ 放在前面）
3.  en.yoursite.com。我正在使用 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:59:19.287

我找到了解决方案。

可以`locale`在开头使用 a 创建联系表格。我联系了插件作者，他[指向了这个页面](http://contactform7.com/contact-form-in-your-language/)

我还`settings.php`对联系表 7 进行了如下更改：

```
 function wpcf7_get_request_uri() {
       global $wpcf7_request_uri;
       if (($GLOBALS['q_config']['hide_default_language'] == 1) AND ($GLOBALS['q_config']['default_language'] != $GLOBALS['q_config']['language']))
        return ((string) '/' . $GLOBALS['q_config']['language'] . $wpcf7_request_uri);
    } 
```

# jquery - 未使用 knockout.js 填充 html 表

> ID：14474645
> 
> 赞同：0
> 
> 时间：2013-01-23T07:41:28.040
> 
> 标签：jquery, asp.net-mvc-3, knockout.js

我有一个 Web 应用程序，我正在尝试使用 knockout.js 填充我的 html 表，但我的表仍然是空的。我的数据是通过 ajax 调用的。jQuery 和 Knockout.js 都被引用到我的页面。这是代码；

**HTML**

```
 <table id="payment_schedule">
            <thead>
                <tr class="tableHeader">
                    <th width="50px">
                        Index
                    </th>
                    <th width="50px">
                        Due Date
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-bind="foreach: paymentSchedules">
                    <td data-bind="text: Index"></td>
                    <td data-bind="text: Month"></td>
                </tr>
            </tbody>
        </table> 
```

**JavaScript 函数**

```
 function GetComputation() {
        $.ajax({
        url: '/UnitSearch/CalculateMortgage',
        cache: false,
        dataType: 'json',
        success: function (data) {
                viewModel.paymentSchedules(data.PaymentSchedules);
        }
    });
}
var data = [];
var viewModel = {
    paymentSchedules: ko.observableArray(data)
};
ko.applyBindings(viewModel); 
```

**从ajax返回的数据**

![在此处输入图像描述](../Images/d08b05c481ae9576d00fd565fa3584da.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:56:06.650

您的代码应该可以正常工作。您尚未显示调用`GetComputation`函数的位置，但这是一个完整的工作示例。

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
}

public class UnitSearchController : Controller
{
    public ActionResult CalculateMortgage()
    {
        var data = new 
        {
            PaymentSchedules = new[] 
            {
                new { Index = "Reservation Fee", Month = "23-Jan-13" },
                new { Index = "Reservation Fee", Month = "25-Jan-13" },
            }
        };
        return Json(data, JsonRequestBehavior.AllowGet);
    }
} 
```

索引视图 ( `~/Views/Home/Index.cshtml`)：

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <table id="payment_schedule">
        <thead>
            <tr class="tableHeader">
                <th>Index</th>
                <th>Due Date</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: paymentSchedules">
            <tr>
                <td data-bind="text: Index"></td>
                <td data-bind="text: Month"></td>
            </tr>
        </tbody>
    </table>

    <script type="text/javascript" src="@Url.Content("~/scripts/jquery-1.7.1.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/scripts/knockout-2.1.0.js")"></script>
    <script type="text/javascript">
        var data = [];
        var viewModel = {
            paymentSchedules: ko.observableArray(data)
        };
        ko.applyBindings(viewModel);

        function GetComputation() {
            $.ajax({
                url: '/UnitSearch/CalculateMortgage',
                cache: false,
                success: function (data) {
                    viewModel.paymentSchedules(data.PaymentSchedules);
                }
            });
        }

        // I am calling the GetComputation function immediately in this example
        // to populate the table with data but you could call it whenever you want
        GetComputation();
    </script>
</body>
</html> 
```

在此示例中，我`GetComputation`立即调用，但您可以调整代码并随时调用它。另请注意，我已在元素`data-bind="foreach: paymentSchedules"`上应用了`<tbody>`而不是`<tr>`元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T07:55:52.000

没有测试过，但你可以尝试将数据绑定移动 `data-bind="foreach: paymentSchedules"`到 tbody 而不是 tr 吗？

foreach 淘汰赛文档也是如此。参考[http://knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)

# ios - 十六进制 - 什么编码？

> ID：14474648
> 
> 赞同：0
> 
> 时间：2013-01-23T07:41:38.397
> 
> 标签：ios, encoding, hex

我有以下十六进制：

```
1002d903 864793dd 00000000 00000000 
```

我需要使用这个十六进制的编码来将其转换为 IP 地址吗？

UTF-8 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:17:27.217

如果这是一个 IP 地址，则它必须是 IPv6 地址；这需要 16 个字节。大概应该是`1002:d903:8647:93dd:0000:0000:0000:0000`，可以简写为`1002:d903:8647:93dd::`。

您获得这些十六进制数字的来源可能不是显示原始十六进制*字节*，而是显示 little-endian 32 位*字*，在这种情况下，表示的 IP 地址将是`03d9:0210:dd93:4786::`。

然而，这些可能性实际上都不在 IPv6 地址空间的分配部分中。一个属于 RFC-1888 定义的`03d9`“截断的 NSAPA”空间，但它在 2004 年被弃用，似乎从未在实践中使用过。

您有多确定您拥有的十六进制字符串编码了任何类型的 IP 地址？是什么让你确信这一点？

# php - 取消输出缓冲

> ID：14474652
> 
> 赞同：0
> 
> 时间：2013-01-23T07:41:59.313
> 
> 标签：php, .htaccess, output-buffering, login-script

我的登录脚本是这样的，通常包含在登录表单的顶部：

```
<?php
if(isset($_POST['login']))
{
    require_once("dbconfig.php");
    $email=$_POST["username"];
    $password=$_POST["password"];
    $password=md5("$pass");
    $msg="";
    if ($email==""){
        $msg=$msg."You didn't enter your Username.<br/>";
        $fstatus= "NOTOK";}
        if ($pass==""){
            $msg=$msg."You didn't enter your Password.";
            $fstatus= "NOTOK";}
            if($fstatus=="NOTOK"){ 
                echo "<div class=error>$msg</div>";
            }
            else{
                $logincheck=mysql_query("SELECT id FROM users WHERE username='$email' AND password='$password' limit 1");
                if(mysql_num_rows($logincheck)==0)
                {
                    echo "<div class=error>Invalid login: wrong username or password.</div>";
                }
                else
                {
                    $_SESSION['XYZ']= TRUE;
                    header("Location:member-page.php");
                }
            }
        }
    }
}
?> 
```

为了使重定向起作用，我通常使用`htaccess`带有指令 PHP_FLAG output_buffering 的文件。但这在某些服务器上不起作用。我知道可以取消 htaccess 文件，如何重新编写登录脚本以使重定向工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:46:10.220

你可以放...

```
<?php
    ob_start(); 
```

作为文件中的第一件事（并确保在 PHP 代码之前没有其他内容）。这将[打开输出缓冲](http://php.net/manual/en/function.ob-start.php)，而不需要 .htaccess 文件。

# ios - IOS - 旋转Mpmovieplayer

> ID：14474654
> 
> 赞同：1
> 
> 时间：2013-01-23T07:42:06.993
> 
> 标签：ios, objective-c, mpmovieplayer

我正在使用`MPMoviePlayerController`，`UITabbarcontroller`但我不知道为什么它不自动旋转

这是我的代码：

```
NSURL *url = [NSURL URLWithString: [dt objectForKey:@"TrailerPath"]];

moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

    moviePlayer.shouldAutoplay = YES;  
    moviePlayer.view.frame = [[UIScreen mainScreen] applicationFrame];
    moviePlayer.view.transform = CGAffineTransformMakeRotation(1.57079633);
    moviePlayer.view.bounds = CGRectMake(0.0, 0.0, 480, 320);        
[[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(moviePlayBackDidFinish:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                                   object:moviePlayer];
[moviePlayer prepareToPlay];
moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
moviePlayer.shouldAutoplay = YES;
[self.view addSubview:moviePlayer.view];
[moviePlayer setFullscreen:YES animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:24:18.037

您是否在项目设置中为您的项目设置了支持的界面方向？

**编辑：**您可以在此处设置支持的界面方向：![在此处输入图像描述](../Images/d70bacb4f90b5c341d3f33a8e51db838.png)

# mule - 在 Mule 中通过文件端点监视所有子文件夹

> ID：14474657
> 
> 赞同：2
> 
> 时间：2013-01-23T07:42:19.207
> 
> 标签：mule

如果我们在 Mule 3.3.1 中使用文件端点，是否有可能监视（轮询）文件夹中的所有子文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:16:43.210

有趣的是，不，我不这么认为（尽管这样做可能有良好的性能原因）。

我猜您必须扩展和更改`FileConnector`'`createReceiver()`方法才能使这成为可能。

干杯，

# php - 使用 jquery ajax post 提交表单输入数组

> ID：14474658
> 
> 赞同：3
> 
> 时间：2013-01-23T07:42:19.347
> 
> 标签：php, jquery, ajax, input, multidimensional-array

好的，我想通过 jquery ajax 提交表单。所有输入都在一个数组中，并且是多维的。

它是一种使用数组键作为问题 ID 的动态形式。子键用于对问题集中的问题进行分组。

```
<form name="testing" id="testing" method="post">
    <label>Question 1?</label> 
    <input type="text" name="data[14][1]" id="" class="" value=""><br>
    <label>Question 2?</label> 
    <input type="text" name="data[16][1]" id="" class="" value=""><br>
    <label>Question 1?</label> 
    <input type="text" name="data[14][2]" id="" class="" value=""><br>
    <label>Question 2?</label> 
    <input type="text" name="data[16][2]" id="" class="" value=""><br>
    <label>Question 3?</label> 
    <select name="data[19]" id="" class="">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select><br>
    <input type="submit" value="Submit">
</form> 
```

这就是我的示例 html。这是我的示例 jquery：

```
$("#testing").submit(function() { 
           var data = $('input[name^="data\\["]').serializeArray();
                $.ajax({ 
                 type: "POST",
                 url:  "upload.php",
                 data: {internalform: "submit", data: data},
                 dataType : "text",

           success: function(returndata){
            if(returndata == "no") 
             { return false;
             } else {
               alert("clicked 1 " + returndata);
                }
                 } 
                 });    
            return false;
            }); 
```

问题是我把它作为返回数组：

```
Array
(
    [0] => Array
        (
            [name] => data[14]
            [value] => sd
        )

    [1] => Array
        (
            [name] => data[16]
            [value] => s
        )

) 
```

但我想要一个这样的数组：

```
Array ( [14] => ddd [16] => ddd [19] => 4 ) 
```

我确定它很简单，但我错过了一些东西。我知道它为什么这样做，但我无法按照我想要/需要的方式得到它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:00:22.210

试试下面的代码片段，我还没有测试过，但它可能应该可以工作。

`var data = $('input[name^="data\\["]').serializeArray();`用下面的代码片段替换部分

```
var data = {};
$.each($('input[name^="data\\["]')​.serializeArray()​, function() {
    data[this.name] = this.value;
})​; 
```

试试这个，它将解决前面的数据问题

我已经解决了这个

```
var data = {};
$.each($('select[name^="data\\["] , input[name^="data\\["]').serializeArray(), function() {
   var vv = this.name.replace(/data/, '' ).replace(/(\[[0-9]\])$/,'');
   data[vv] = this.value;           
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:59:26.463

我不知道如何在 jquery 中执行此操作，但您可以在 php 中转换该数组

```
$result = array();
foreach($array as $item) {
   $index = intval(preg_replace("/data\[([0-9]*)\]/", '\1' $item['name']));
   $result[$index] = $item['value'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:25:29.477

尝试这个

```
var data = {}; 
$('input[name^="data\\["]').serializeArray().map(function(n){
    var name = n['name'].replace(/data\[([0-9]*)\]\[(.*)\]/, '$1');
    data[name] = n['value'];
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-23T16:47:24.107

```
var data = {};
$.each($('input[name^="data\\["]')​.serializeArray()​, function() {
    data[this.name] = this.value;
})​; 
```

给出控制台错误>>

> Uncaught SyntaxError: missing ) 在参数列表之后

# cmake - CMake：如何有一个复制文件的目标

> ID：14474659
> 
> 赞同：14
> 
> 时间：2013-01-23T07:42:20.470
> 
> 标签：cmake

每次编译后，我使用以下命令将配置文件复制到构建目录中。

```
# Gather list of all .xml and .conf files in "/config"
file(GLOB ConfigFiles ${CMAKE_SOURCE_DIR}/config/*.xml
                      ${CMAKE_SOURCE_DIR}/config/*.conf)

foreach(ConfigFile ${ConfigFiles})
  add_custom_command(TARGET MyTarget PRE_BUILD
                     COMMAND ${CMAKE_COMMAND} -E
                         copy ${ConfigFile} $<TARGET_FILE_DIR:MyTarget>)
endforeach() 
```

每次编译项目时都会触发此操作。是否可以在 CMakeLists.txt 中创建一个目标来复制文件而无需编译任何东西？像“制作副本”之类的东西。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T08:07:46.813

您应该能够添加一个名为的新自定义目标`copy`并将其作为自定义命令的目标：

```
file(GLOB ConfigFiles ${CMAKE_SOURCE_DIR}/config/*.xml
                      ${CMAKE_SOURCE_DIR}/config/*.conf)

add_custom_target(copy)
foreach(ConfigFile ${ConfigFiles})
  add_custom_command(TARGET copy PRE_BUILD
                     COMMAND ${CMAKE_COMMAND} -E
                         copy ${ConfigFile} $<TARGET_FILE_DIR:MyTarget>)
endforeach() 
```

现在自定义命令只有在你构建时才会执行`copy`。

如果您想将此`copy`目标保留为的依赖项，`MyTarget`以便您可以仅复制文件或在 build`MyTarget`时复制它们，则需要打破循环依赖项。（`MyTarget`取决于`copy`，但`copy`取决于`MyTarget`获取复制到目录的位置）。

为此，您可以采用获取目标输出目录的老式方法：

```
add_custom_target(copy)
get_target_property(MyTargetLocation MyTarget LOCATION)
get_filename_component(MyTargetDir ${MyTargetLocation} PATH)
foreach(ConfigFile ${ConfigFiles})
  add_custom_command(TARGET copy PRE_BUILD
                     COMMAND ${CMAKE_COMMAND} -E
                         copy ${ConfigFile} ${MyTargetDir})
endforeach()
add_dependencies(MyTarget copy) 
```

# rest - 如何在 RESTful 服务设计中正确支持记录的部分创建？

> ID：14474660
> 
> 赞同：2
> 
> 时间：2013-01-23T07:42:33.933
> 
> 标签：rest

我正在设计一个安静的服务来支持一个现有的向导，它允许用户提交一个新资源（让我们称之为`customer`），但是是分段的。

此向导在用户提交时对每个页面进行验证，但仅对用户正在提交的页面进行验证。只有当用户选择提交客户进行最终处理时，它才会对整个对象进行完整的验证。

为了简化向导，并允许我们在添加更多字段时在维护版本中调整 UI，我们没有将向导的结构编码到资源中。客户不会按照向导呈现数据的方式“汇总”。

以资源的命名子文档不一定分层显示在该资源的完整文档中（或至少以不同的方式）的方式设计 RESTful 服务是否很奇怪？

假设我的向导页面是：

*   联系信息
*   食物偏好
*   恐惧清单

然后这是一个示例客户对象：

```
// Note that the wizard page groupings don't show up explicitly
{
    customer: {
        firstName: "Pilsner",
        lastName: "Dopplebock",
        emailAddress: "nextguest@hotelcalifornia.com",
        addressLine1: "123 Fleece Place",
        addressLine2: ""
        town: "Ibinjad",
        region: "North Dakota",
        postalCode: "12123",
        homePhoneNumber: "2123234124",
        faxPhoneNumber: null,
        meatPreference: "well-done",
        allergies: "shellfish",
        fears: [
            "banshees",
            "baths",
            "sleeveless shirts"
        ]
    }
} 
```

假设我的资源基本 URL 是：

```
http://www.somewhere.com/customers
http://www.somewhere.com/customers/{id} 
```

创建以下宁静的 URL/方法会是奇怪的还是错误的，即使它们`customer`实际上并没有按照它们暗示的方式进行细分？

```
http://www.somewhere.com/customers/contactinformation (POST)
http://www.somewhere.com/customers/{id}/contactinformation (POST, or PUT for update? maybe GET)
http://www.somewhere.com/customers/{id}/foodpreference (POST, or PUT for update?, maybe GET)
http://www.somewhere.com/customers/{id}/fears (POST to add a single item?, maybe PUT for a batch?, maybe GET) 
```

如果我一次没有全部资源，我曾考虑使用备用向导 URL，但在我看来，这似乎不适合以资源为导向：

```
http://www.somewhere.com/customerwizard/submitcontactinformation (POST)
http://www.somewhere.com/customerwizard/{customer-id}/submitcontactinformation
http://www.somewhere.com/customerwizard/{customer-id}/submitfoodpreference
http://www.somewhere.com/customerwizard/{customer-id}/fears 
```

`count`（可能是第二个问题，虽然是相关的）：拥有一个不一定出现在主集合上的集合风格资源的子属性是否很奇怪？我想这样做以支持分页视图...

```
http://www.somewhere.com/customers/count (GET) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:26:46.243

我不认为这个问题与引用的问题重复。您不是要求对现有资源执行部分更新，而是要求服务器验证“部分”资源（我认为这本身就是整个资源，而不是您以后通常会呈现给用户的资源）。

在这种情况下，REST 不一定是正确的选择。REST 旨在优化对潜在分布式受众多次访问的静态或半静态资源的读取访问。为了提供帮助，您能否回答以下问题：

1.  您是否想在初始请求-响应通信完成后获取验证结果？
2.  您是否曾两次提交相同的数据（来自不同用户或来自同一用户）？
3.  如果是这样，响应是否总是相同的，即验证算法是确定性的吗？
4.  是否可以将所有这些未加密且公开可见的数据发送给其他人？

如果您对所有这些回答都是*肯定*的，那么 REST 非常适合。如果您对这三个问题都回答“*否*”，那么 REST 就不合适了。喜忧参半的回答有些混淆了决定。

如果我处于你的位置，并且没有更多数据，我会首先将其实现为 HTTPS 上的 RPC 接口，直到我了解数据缓存和安全要求是什么，所以我会知道系统的哪些部分会受益于缓存（仅在最终用户的机器上或作为未加密传输的公共资源，并且可由中间人缓存。

有一个很棒的资源，称为[基于 HTTP 的 API 的分类，](https://web.archive.org/web/20150311092658/http://nordsc.com/ext/classification_of_http_based_apis.html)它可能有助于确定 REST 是否真的是您想要在 API 设计中遵循的路径。请记住，选择替代设计并没有什么“错误”，这是一种权衡。根据各自的优点和缺点做出明智的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:40:18.447

URL之类`/customers/{id}/contactinformation`的并不陌生。您可能想问自己的一个问题是，在写入时将 Customer 实体分解为单独的片段是否有意义这一事实是否也意味着在读取时单独提供它们可能会更好。它肯定会使任何 HTTP 缓存更加明智。例如，如果您 PUT 到实体片段然后 GET 父级，则随后对片段的 PUT 只会使片段无效，然后父级可能会提供陈旧的数据。获取一个较小的父实体（它具有指向每个实体片段的链接）然后获取每个片段更简单，在这种情况下，对片段的 PUT 会正确提示后续 GET 检索新副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-19T00:02:31.967

与 Nicholas Shanks 相比，我认为类似向导的系统符合 REST 背后的理念。在网络上看到这样的交互概念并不少见，即通常应用于结帐页面，在一个页面上输入客户信息，在下一页输入送货地址，在第三页输入您的付款数据，然后是确认页面，确认将触发实际订单。

Jim Webber[指出](https://www.youtube.com/watch?v=aQVSzMV8DWc&t=191s)，在 REST 架构中，您主要实现域应用程序协议（客户端将遍历的状态机，如果您愿意的话），客户端将跟随他们获取服务器提供的所有信息，通过链接或类似于 HTML 表单的类似表单的表示。这个概念被概括为 HATEOAS。

因此，上面提到的 REST 架构中的结帐系统可能如下所示：将商品放入购物篮后，服务器会为您提供附加链接，这些链接带有一些链接关系（伪 HAL 表示）：

```
{
    ...,
    "_links": {
        "self": {
            "href": "https://..."
        },
        "create-form": {
            "href": "https://shop.acme.com/checkout-wizard-p1"
        },
        "https://acme.com/rel/checkout": {
            "href": "https://shop.acme.com/checkout-wizard-p1"
        },
        ...
    }
} 
```

URI 本身在这里不是相关的东西，因为 URI 的拼写在 REST 架构中并不重要，只要它符合[RFC 3986 (URI)](https://www.rfc-editor.org/rfc/rfc3986)中概述的规则。为简单起见，它也可能以 UUID 而不是`checkout-wizard-p1`此处给出的名称结束。相反，重点是此处给出的链接关系名称，即`create-form`符合在[IANA](https://www.iana.org/assignments/link-relations/link-relations.xhtml)注册的标准化链接关系和自定义链接关系，`https://acme.com/rel/checkout`它遵循[Web 链接 (RFC 5988)](https://www.rfc-editor.org/rfc/rfc5988#section-4.2)概述的扩展机制。引入这种间接方式允许服务器用其他形式替换实际的目标 URI，客户端仍然能够完成他们的任务。

不幸的是，与`Link`RFC 5988 定义的标头不同，它可以在同一个 URI 上定义多个关系名称（参见[示例](https://www.rfc-editor.org/rfc/rfc5988#section-5.5)；`Link: <.../checkout-wizard-p1>; rel="create-form https://acme.com/rel/checkout"`），HAL JSON 仅允许为每个 URI AFAIK 定义一个链接关系名称。

对于任意客户端，链接关系名称只是任意字符串。此外，Web 链接扩展机制不必从一开始就指向人类可读的文档，尽管稍后可能会通过更新或插件添加对此类关系名称的支持。这里的重点是，了解某个链接关系名称的客户端可以采取相应的行动，并使用 URI 来向它发送请求。链接关系可以根据规则引擎来使用，该规则引擎在满足某些条件时触发伴随的 URI，即某个客户端状态的可用性和指向同一 URI 的链接关系的存在，如本例中给定的链接-关系名称。

在请求用于`create-form`或`https://acme.com/rel/checkout`关系的 URI 的内容时，服务器可能会返回一个[HAL-FORMS](https://rwcbook.github.io/hal-forms/)表示，允许客户端输入所需的客户信息：

```
{
  "_links": {
    "self": {
        "href": "https://shop.acme.com/checkout-wizard-p1"
    },
    "_templates": {
        "default": {
            "contentType": "application/x-www-form-urlencoded",
            "key": "default",
            "method": "POST",
            "properties": [
                { 
                    "name": "firstName",
                    "prompt": "First Name",
                    "readOnly": false,
                    "regex": "^[A-Z][a-z]{1,24}$",
                    "required": true,
                    "templated": false,
                    "value": "",
                    "maxLength": 25,
                    "minLength": 2,
                    "placeholder": "Your first name",
                    "type": "text"
                },
                ...
            ],
            "target": "https://shop.acme.com/tmp/ea2b3fb1-c640-40e2-b16a-f7433dee6ba2",
            "title": "Checkout Wizard - Customer Information"
        }
    }
  }
} 
```

与传统的[HTML 表单](https://www.w3.org/TR/html52/sec-forms.html)类似，[HAL-FORMS](https://rwcbook.github.io/hal-forms/)会在发送请求之前向客户端介绍要发送请求的目标 URI、要使用的 HTTP 操作以及将请求编组到的媒体类型。与 HTML 相比，HAL-FORMS 在这里默认为`application/json`而不是`application/x-www-form-urlencoded`. 令人惊讶的是，HAL-FORMS 仅支持这两种媒体类型。

资源支持的整体结构也通过`properties`属性中包含的元素来教授。与 HTML 表单一样，可以定义呈现输入的类型，可以是`text`, `hidden`, `textarea`, `search`, `tel`, `url`, `email`, `password`, `date`, `month`, `week`, `time`, `datetime-local`,`number`或. 通过可选元素 UI 控件，例如（多选）选项、复选框和单选按钮也可以表示。`range``color``options`

一旦客户端输入其数据并将其发送到服务器，服务器就可以简单地响应下一个 HAL-FORMS 表示，要求进一步输入，例如送货地址等。在这里，交互设计师可能倾向于`https://shop.acme.com/tmp/ea2b3fb1-c640-40e2-b16a-f7433dee6ba2`通过使用 直接更新临时资源（即在这种情况下）`PUT`，与 HTML 表单相比，HAL-FORMS 支持，尽管这也需要传递所有以前的数据，这使得向导或多或少……多余。下一种方法是使用`PATCH`as HTTP 操作对临时资源执行部分更新，尽管 HAL-FORMS 目前仅支持`application/json`和`application/x-www-form-urlencoded`无法通知服务器有关将临时资源转换为所需结果的（隐式）指令，就像您对[application/json-patch+json](https://www.rfc-editor.org/rfc/rfc6902)或[application/merge-patch+json](https://www.rfc-editor.org/rfc/rfc7386)所做的那样。

因此，我更愿意坚持在`POST`这里为每个向导页面创建新的临时资源。通过支持隐藏属性传递所有先前传输的属性将很容易成为可能，尽管不是传递所有数据，只需提供临时资源的 URI 作为隐藏属性就足够了。然后，最后一步可以将这些临时资源中的信息“合并”到一个内聚状态，对受影响的临时资源执行清理，并将信息呈现给用户以进行最后确认，在这种情况下，实际资源被创建。

虽然通过 获得的实际表单资源`GET`是可缓存的，但临时资源并不是因为它们仅通过不安全的操作进行操作，这无论如何都会使（中间）缓存中的存储表示无效。在此基础上缓存表单资源并不是一个坏主意，因为不会一直引入资源的新属性，因此缓存可以减少将该表示从服务器传输到客户端的开销。如果对表单进行了更新，则对该资源的更新，即通过`PUT`或上传新版本`PATCH`，将自动使该资源和具有新版本的服务器客户端的任何存储表示无效，第一次绕过缓存，直到响应已添加到缓存中。

虽然 Nicholas 提到只有在他的所有 4 点都可以回答“是”的情况下才应该使用 REST，其中一些点（例如文档加密）更多地针对传输通道（即通过 HTTP 或 HTTPS 的 TLS 或协商的媒体类型）而不是 REST 架构提出的交互概念，在我的意义上，REST 应该旨在以防您的服务应该持续多年，支持过多的不同客户端并支持未来的发展，例如在资源上引入新字段在路上，而不必担心破坏客户。

长话短说，通过 HATEOAS 设计类似向导的交互确实很有意义，尤其是当使用类似表单的表示来教客户端将数据发送到哪里、使用什么 HTTP 方法以及以哪种表示格式发送数据时。表单还有助于向客户介绍资源具有的受支持属性。使用的棘手部分是如何组合通过向导的不同页面提供的数据并将其呈现给客户端。虽然`PUT`一`PATCH`开始可能很有吸引力，但从狭隘的角度看，由于媒体类型或 HTTP 操作本身的限制，它们可能并不理想。

# search - 如何编写两个 solr 查询第二个查询结果基于第一个查询？

> ID：14474661
> 
> 赞同：1
> 
> 时间：2013-01-23T07:42:33.977
> 
> 标签：search, solr, solrj

我想写`one solr query`它基本上需要两个 solr 查询。第二个查询结果依赖于第一个查询。

假设在第一个查询中我正在`Locality`处理特定数据。如果结果为零，我想根据子 Locality 数据进行分面。

# java - 一个类如何在构造函数的同时构建它的其他实例

> ID：14474668
> 
> 赞同：0
> 
> 时间：2013-01-23T07:43:25.533
> 
> 标签：java, stack-overflow

我想创建一个坐标类，当我实例化这个类时，它会自动构建它的6个相邻坐标，但是，当我这样做时，我总是遇到stackoverflow问题，我没有很好的方法来解决它。这是我的错误代码，您可以很容易地看到问题，构造函数本身包含自己。所以我想知道如何解决这个问题

```
public class Coordinate {

    private final int x;
    private final int y;
    private final Coordinate[] periperal;

    /**
     * The default constructor for Coordinate class that
     * sets up the coordinate to the given integers.
     * 
     * @param x value of x coordinate
     * @param y value of y coordinate
     */

    public Coordinate(){
        final Coordinate adjacent1 = new Coordinate(x, y + 1);
        final Coordinate adjacent2 = new Coordinate(x, y - 1);
            final Coordinate adjacent3 = new Coordinate(x - 1, y + 1);
        final Coordinate adjacent4 = new Coordinate(x - 1, y);
        final Coordinate adjacent5 = new Coordinate(x + 1, y);
        final Coordinate adjacent6 = new Coordinate(x + 1, y - 1);
        Coordinate[] list = {adjacent1, adjacent1, adjacent1, adjacent1, adjacent1, adjacent1};
        periperal = list;
    } 
```

我知道为什么我错了，但我不知道如何解决它。有人可以帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:45:45.250

构造函数中的第一行递归且无条件地创建另一个实例。实际上，这是一个调用自身的方法。

你需要一些条件来阻止这种递归永远进行（或者更确切地说，直到你用完堆栈）。

为整个（无限）坐标系中的每个坐标创建一个实例将不起作用。你确定你需要邻居坐标吗？我猜，如果/如果真的需要它们，它们可以在稍后即时计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:51:46.490

@Thilo 解释了您的代码有什么问题（+1）。我想建议你一个解决方案。您实际上想要创建`Coordinate`包含 6 个其他实例的`Coordinate`. 您不能从同一个构造函数调用构造函数：它会产生无限递归。

所以这里是解决方案：

1.  创建接受假参数的私有构造函数（只是为了区分它和“真实”构造函数）。从“真实”构造函数中调用它。这将防止无限递归。
2.  使构造函数包受到保护。从构造函数中删除调用构造函数的代码。创建创建所有实例并将辅助实例设置为主实例的工厂（或工厂方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:58:39.670

与其在构造函​​数中设置相邻坐标，不如将其移到一个名为 newInstance() 的静态方法中，并使构造函数私有：

```
public class Coordinate {

    private final int x;
    private final int y;
    private Coordinate[] periperal;

    /**
     * The default constructor for Coordinate class that
     * sets up the coordinate to the given integers.
     * 
     * @param x value of x coordinate
     * @param y value of y coordinate
     */

    public static Coordinate newInstance(int x, int y){
        final Coordinate instance = new Coordinate(x, y);
        final Coordinate adjacent1 = new Coordinate(x, y + 1);
        final Coordinate adjacent2 = new Coordinate(x, y - 1);
        final Coordinate adjacent3 = new Coordinate(x - 1, y + 1);
        final Coordinate adjacent4 = new Coordinate(x - 1, y);
        final Coordinate adjacent5 = new Coordinate(x + 1, y);
        final Coordinate adjacent6 = new Coordinate(x + 1, y - 1);
        Coordinate[] list = {adjacent1, adjacent2, adjacent3, adjacent4, adjacent5, adjacent6};
        instance.setPeriperal(list);
        return instance;
    }

    private Coordinate(int x, int y) {
        this.x = x;
        this.y = y;
    }

    private void setPeriperal(Coordinate[] periperal) {
        this.periperal = periperal;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:11:23.120

你做错事了。正如其他人所说，您正在覆盖无限区域，不仅如此，您还无限次地创建每个坐标 (x,y) 创建 (x,y+1) 并且相对于自身创建 (x,y-1) 即第一个。

为了防止这些问题，您需要限制区域（创建坐标时，您需要minX，maxX，minY，maxY并测试坐标是否在外面，在这种情况下不要创建它）。为了防止递归创建相同的坐标，您需要存储已经创建的某个位置，当您需要坐标时，查看那里，如果找不到，创建并记住它。这样每个坐标只会被创建一次。

更好的方法是首先为整个板创建坐标并将它们存储在数组中（其中（x，y）被转换为 x*width+y，因此您可以使用一维数组。它们添加连接。

但即使这样也没有必要。您可以在需要时使用实际坐标并计算邻居。这样，您将用更多的计算来换取大量未使用的内存（并且 java 存储小对象的效率低下，这对许多长寿命的小对象造成了伤害，并且检索它们可能比重新计算成本更高）。但无论如何，过早优化是万恶之源。所以首先让它工作，只有当它太慢时，让它更快。

另一种情况是，如果您需要无限可能（但在每个实际情况下都受实际使用的限制）板。在这种情况下，您需要一些懒惰的方法并避免存储您不需要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:56:21.770

替代解决方案：不要在构造函数中创建相邻的 Coordinate 对象。在创建第一个点的任何地方创建它们，然后使用 setter 方法设置相邻坐标。

# encryption - BlowFish 加密/解密问题（JBoss 加密）

> ID：14474669
> 
> 赞同：2
> 
> 时间：2013-01-23T07:43:48.513
> 
> 标签：encryption, jboss, blowfish, password-encryption, initialization-vector

这是我在使用 BlowFish 加密/解密时遇到的问题。

以下代码用于测试 BlowFish 加密/解密

```
// Code below omits comments for Brevity

import javax.crypto.*;
import javax.crypto.spec.SecretKeySpec;

import java.math.BigInteger;

public class JBoss {

    public static void main(String[] args) throws Exception {

        if ((args.length != 2)
                || !(args[0].equals("-e") | args[0].equals("-d"))) {
            System.out
                    .println("Usage:\n\tjava JBoss <-e|-d> <encrypted_password>");
            return;
        }

        String mode = args[0];

        byte[] kbytes = "jaas is the way".getBytes();
        SecretKeySpec key = new SecretKeySpec(kbytes, "Blowfish");
        Cipher cipher = Cipher.getInstance("Blowfish");

        String out = null;

        if (mode.equals("-e")) {
            String secret = args[1];
            cipher.init(Cipher.ENCRYPT_MODE, key);
            byte[] encoding = cipher.doFinal(secret.getBytes());
            out = new BigInteger(encoding).toString(16);
        } else {
            BigInteger secret = new BigInteger(args[1], 16);
            cipher.init(Cipher.DECRYPT_MODE, key);
            byte[] encoding = cipher.doFinal(secret.toByteArray());
            out = new String(encoding);
        }
        System.out.println(out);
    }
} 
```

现在，如果我尝试加密字符串

> u7mzqw2

我得到的价值为

> -7ccb7ff0c2858a

如果我尝试**解密**

> -7ccb7ff0c2858a

我得到如下错误：

```
 java JBoss -d -7ccb7ff0c2858a
Exception in thread "main" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher
        at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
        at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
        at com.sun.crypto.provider.BlowfishCipher.engineDoFinal(DashoA13*..)
        at javax.crypto.Cipher.doFinal(DashoA13*..)
        at JBoss.main(JBoss.java:41) 
```

完整代码在[这里](https://raw.github.com/usefulfor/usefulfor/master/security/JBoss.java)

如果我没记错的话，它与 7 个字符长度的原始值或非 /8=0 加密值无关，如下所示

> java JBoss -e qwerty
> 
> > -40e961f375c2eee6
> 
> java JBoss -d -40e961f375c2eee6
> 
> > qwerty

我错过了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:26:22.023

这是我的观察：我稍微修改了代码，添加了一些带有单个字节和相应十六进制值的sop。

**输入：** asdfda

16::10

60::3c

105::69

57::39

-60::-3c

110::6e

19::13

-52::-34

编码值：103c6939c46e13cc

如您所见，左侧的项目是字节，右侧是具有基数 16 值的单个大整数，底部是编码值。你可能会看到一个大的模式匹配。除了带有 -tive 的值。像 -60 对应值 -3c ，但与 1 字节 consersion 一样，该值变为 c4 （见 yourslef ）。

现在我测试了加密为 u7mzqw2 的值，让我们看看会发生什么。

**输入：** u7mzqw2

-1::-1

-125::-7d

52::34

-128::-80

15::f

61::3d

122::7a

118::76

编码值：-7ccb7ff0c2858a

现在你看到模式匹配了，现在你不会了，为什么不呢？让我们看看，-1 的十六进制应该是 -1 吗？？？？，不，它是 0XFF，现在我们可以用 Byte 表示 0xFF 吗？不，我们不能。读自己[的字节和-1](https://stackoverflow.com/questions/10430820/is-byte-not-signed-twos-complement)

更新：让我困惑的是这些编码是如何评估的？还在找，帮我鉴定一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:54:50.203

试试这个，

```
public static void main(String[] args) throws Exception {
     // generate key
     KeyGenerator keyGen = KeyGenerator.getInstance("Blowfish");
     SecretKey secretKey = keyGen.generateKey();
     // get Cipher and init it for encryption
     Cipher cipher = Cipher.getInstance("Blowfish/CBC/PKCS5Padding");
     cipher.init(Cipher.ENCRYPT_MODE, secretKey);
     String data="u7mzqw2";

     // encrypt data
     byte[] cipherText = cipher.doFinal(data.getBytes());
     // get the initialization vector from the cipher
     byte[] ivBytes = cipher.getIV();
     IvParameterSpec iv = new IvParameterSpec(ivBytes);

     byte[] keyBytes = secretKey.getEncoded();
     // create a SecretKeySpec from key material
     SecretKeySpec secretKeySpec = new SecretKeySpec(keyBytes, "Blowfish");
     // get Cipher and init it for encryption
     cipher = Cipher.getInstance("Blowfish/CBC/PKCS5Padding");
     cipher.init(Cipher.DECRYPT_MODE, secretKeySpec, iv);
     byte[] plainText = cipher.doFinal(cipherText);
     System.out.println(new String(plainText));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T09:26:59.257

如果我们查看 secret.toByteArray() 中的以下代码行，则给出长度为 7 字节的数组，这应该是问题的原因。

```
byte[] encoding = cipher.doFinal(secret.toByteArray()); //During decoding logic 
```

问题似乎在于[BlowfishCipher](http://www.docjar.com/docs/api/com/sun/crypto/provider/BlowfishCipher.html)和 CipherCore 的实现。

```
public BlowfishCipher()
{
        core = new CipherCore(new BlowfishCrypt(),
                              BlowfishConstants.BLOWFISH_BLOCK_SIZE);
} 
```

[http://www.docjar.com/html/api/com/sun/crypto/provider/BlowfishConstants.java.html](http://www.docjar.com/html/api/com/sun/crypto/provider/BlowfishConstants.java.html)

我们正在使用 BlowfishConstants.BLOWFISH_BLOCK_SIZE = 8; // 字节数

[http://hg.openjdk.java.net/jdk6/jdk6/jdk/raw-file/2d585507a41b/src/share/classes/com/sun/crypto/provider/CipherCore.java](http://hg.openjdk.java.net/jdk6/jdk6/jdk/raw-file/2d585507a41b/src/share/classes/com/sun/crypto/provider/CipherCore.java)

```
if ((paddingLen > 0) && (paddingLen != blockSize) &&
            (padding != null) && decrypting) {
            throw new IllegalBlockSizeException
                ("Input length must be multiple of " + blockSize +
                 "when decrypting with padded cipher");
        } 
```

# javascript - 来自资源的角度 ng-repeat 复选框并设置为选中

> ID：14474671
> 
> 赞同：4
> 
> 时间：2013-01-23T07:43:55.310
> 
> 标签：javascript, angularjs

我的控制器中有资源，并用 ng-repeat 填充复选框，我在控制器中知道要检查的下一件事

代码看起来像..

```
$scope.data = resource.query();

var arr_to_be_checked = [1,3,5]; 
```

在其他控制器中我使用这个..

```
$scope.data = [ { Type: 1, checked: true, Title: 'Item A'},
                { Type: 2, checked: false, Title: 'Item B'}]; 
```

并且工作正常，但我需要将其应用于资源和 ng-repeat，因为我需要更灵活

我找到任何解决方案，但没有意义。请问你能帮帮我吗？

**我的问题是：我如何使用“checked:true”“覆盖”资源中的对象或将任何复选框设置为选中状态。**

非常感谢您的帮助或任何想法
祝您有美好的一天

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T09:41:52.823

```
<ul>
  <li ng-repeat="item in data">
    <input type="checkbox" ng-checked="item.checked"> {{item.Title}}
  </li>
</ul>
<button ng-click="checkItems()">Do</button> 
```

.

```
$scope.checkItems = function () {
  var i;
  for (i = 0; i < arr_to_be_checked.length; i++) {
    data[arr_to_be_checked[i]].checked = true;
  } 
}; 
```

PS：请在您的命名约定上保持一致，javascript 使用`camelCase`命名约定，没有下划线。只有构造函数被命名`PascalCase`

相关 API 文档：
[ng-click](http://docs.angularjs.org/api/ng.directive:ngClick)
[ng-checked](http://docs.angularjs.org/api/ng.directive:ngChecked)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-16T23:19:10.040

另一种解决方案：

```
<div ng-controller="MainCtrl">
  <label ng-repeat="(color,enabled) in colors">
      <input type="checkbox" ng-model="colors[color]" /> {{color}} 
  </label>
  <p>colors: {{colors}}</p>

<script>
  var app = angular.module('plunker', []);

  app.controller('MainCtrl', function($scope){
      $scope.colors = {Blue: true, Orange: true};
  }); 
```

[http://plnkr.co/edit/U4VD61?p=preview](http://plnkr.co/edit/U4VD61?p=preview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T17:37:48.830

**解决方案我从****fastreload**

中查看解决方案并像这样修改..

 **```
var arr_checked_items = [1,2,5] // this checkboxes will be set as checked

<ul>
  <li ng-repeat="item in data">
    <input type="checkbox" ng-checked="checkItem(item.id)"> {{item.Title}}
  </li>
</ul> 
```

.

```
$scope.checkItem = function (id) {
   var checked = false;
   for(var i=0; i<= arr_to_be_checked.length; i++) {
      if(id == arr_to_be_checked[i]) {
         checked = true;
      }
    }
    return checked;
}; 
```

它的工作完美！在没有任何点击按钮的情况下加载**

# xna - Kinect 空深度和颜色框架

> ID：14474674
> 
> 赞同：3
> 
> 时间：2013-01-23T07:43:58.530
> 
> 标签：xna, null, frame, kinect

我正在使用`XNA Framework 4.0`and开发游戏`Kinect 1.6 SDK`。我的代码使用颜色、深度和骨架数据，所以我使用的是`AllFramesReady`事件。

当我运行游戏并检测到有人时，由`AllFramesReady`事件触发的函数会提取人的图像和骨骼数据并设置我的`Player`类的属性。

问题是，这段代码过去可以完美运行。但是即使我没有对我的代码进行任何更改，它现在也无法正常工作。我在其他电脑上试了一下，效果很好。但是相同的代码在我的计算机上不起作用。

当我调试时，我看到`DepthFrameEventReadyArgs`并`ColorFrameEventReadyArgs`调用了一个成员`isInvalid`并将它们设置为 true。因此，当我使用：

`DepthImageFrame depthVideoFrame = mainFrame.OpenDepthImageFrame();`

...我得到一个 null `depthVideoFrame`。同样适用于彩色框架。

这是我初始化 Kinect 的地方（在`Initialize`）：

```
if (KinectSensor.KinectSensors.Count > 0)
            {
                kinect = KinectSensor.KinectSensors[0];

                EnableColorStream(kinect);
                EnableDepthStream(kinect);
                EnableSkeletonStream(kinect);

                kinect.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(kinect_AllFramesReady);
                kinect.Start();
            } 
```

启用方法：

```
void EnableColorStream(KinectSensor ks)
        {
            ks.ColorStream.Enable(ColorFormat);
            colorWidth = ks.ColorStream.FrameWidth;
            colorHeight = ks.ColorStream.FrameHeight;
            colorVideo = new Texture2D(graphics.GraphicsDevice, ks.ColorStream.FrameWidth, ks.ColorStream.FrameHeight);
        }

        void EnableDepthStream(KinectSensor ks)
        {
            ks.DepthStream.Enable(DepthFormat);
            depthWidth = ks.DepthStream.FrameWidth;
            depthHeight = ks.DepthStream.FrameHeight;
            depthVideo = new Texture2D(graphics.GraphicsDevice, ks.DepthStream.FrameWidth, ks.DepthStream.FrameHeight);
        }

        void EnableSkeletonStream(KinectSensor ks)
        {
            TransformSmoothParameters tsp = new TransformSmoothParameters();
            tsp.Smoothing = 0f;
            tsp.Correction = 0.1f;
            tsp.Prediction = 0.1f;
            tsp.JitterRadius = 0.1f;
            tsp.MaxDeviationRadius = 0.1f;
            ks.SkeletonStream.Enable(tsp);
        } 
```

在`kinect_AllFramesReady`我使用类似的东西：

```
using (ColorImageFrame colorVideoFrame = imageFrames.OpenColorImageFrame())
{
   ...
}
using (SkeletonFrame skeletonFrame = imageFrames.OpenSkeletonFrame())
{
   ...
}
using (DepthImageFrame depthVideoFrame = imageFrames.OpenDepthImageFrame())
{
   ...
} 
```

当我调试时，我看到值是`colorVideoFrame`，因为member 设置为。当我使用深度和颜色数据运行其他程序时，它们运行正常，但只有这个不工作。我目前没有想法。谢谢你的帮助。`depthVideoFrame``null``isInvalid``true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:23:53.427

也许你可以试试这个。正如其中一位评论者所建议的那样，您可能会收到此错误，因为您只调用过 AllFramesReady。您可能需要分别在 SkeletonFrame、ColorFrame 和 DepthFrameReady 事件处理程序中调用它。前任。

```
void DepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
{
 DepthImageFrame imageFrame = e.OpenDepthImageFrame();
 if (imageFrame != null)
 {
   // Do your business here
 }
} 
```

我选择这个答案的原因是因为 Kinect for Windows SDK 文档指出“新 ColorImageFrame 对象中的一帧颜色数据，如果数据不再可用，则为 NULL”。并且由于您的机器的设置可能与您的代码所使用的其他机器不同，因此 K4WSDK 或您的编译器的任何变化都可能极大地改变您的程序在编译后的运行方式。

至于为什么这不起作用，它可能是您机器上的编译器问题。您是否检查过您在 VS 中具有相同版本的编译器？是同一个版本的VS吗？另外，您是否检查过您的计算机上是否存在所有适当的库和包含？如果您真的想确定根本原因，您可以逐步检查工作机器并与您自己的机器进行比较。

# java - JBoss-AS7 @TransactionTimeout：缺少 Maven 依赖项

> ID：14474676
> 
> 赞同：2
> 
> 时间：2013-01-23T07:44:09.053
> 
> 标签：java, maven, transactions, jboss7.x

我正在使用*JBoss AS 7.1.1.Final "Brontes"*并在 -Bean 中遇到一个长时间运行的方法调用，该调用在`@Stateless`5 分钟后被取消：

```
[com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA012117:
                        TransactionReaper::check timeout 
```

搜索这个问题我找到了一些答案[Jboss 7.1 ejb 2.1 custom transaction timeout configuration](https://stackoverflow.com/questions/13015280/jboss-7-1-ejb-2-1-custom-transaction-timeout-configuration/13028767#13028767)和 wikis [JBoss-AS7 reference guide](https://docs.jboss.org/author/display/AS7/EJB+3+Reference+Guide)或[JBoss Wiki](https://community.jboss.org/wiki/TransactionTimeout)。

答案似乎很简单：用`@TransactionTimeout` **But**注释方法：这个类在我的类路径中不可用！我有一个具有 EAR 结构的 Maven 项目，并且该`ejb`模块具有以下相关依赖项，我在几个大量使用 EJB3 的项目中使用了这些依赖项：

*   `org.jboss.spec.javax.ejb:jboss-ejb-api_3.1_spec`（假如）
*   `javax.enterprise:cdi-api`（假如）
*   `org.hibernate.javax.persistence:hibernate-jpa-2.0-api`（假如）
*   `org.hibernate:hibernate-validator`（假如）

缺少哪个依赖项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T21:52:58.887

试试这个；花了一些非常认真的搜索来挖掘它，但它似乎应该可以工作：

```
<dependency>
    <groupId>org.jboss.ejb3</groupId>
    <artifactId>jboss-ejb3-ext-api</artifactId>
    <version>2.0.0</version>
    <scope>provided</scope>
</dependency> 
```

GitHub：

*   [https://github.com/jbossejb3/jboss-ejb3-ext-api](https://github.com/jbossejb3/jboss-ejb3-ext-api)
*   [https://github.com/jbossejb3/jboss-ejb3-ext-api/blob/master/src/main/java/org/jboss/ejb3/annotation/TransactionTimeout.java](https://github.com/jbossejb3/jboss-ejb3-ext-api/blob/master/src/main/java/org/jboss/ejb3/annotation/TransactionTimeout.java)

我认为 Petr 发现的那个是较旧的（最初用于 JBoss 4.2.x）；正如 Thor 提到的，它不包含 unit 参数，并且可能不适用于 AS7。

对更新[JBAS7 EJB 参考指南](https://docs.jboss.org/author/display/AS71/EJB+3+Reference+Guide)的人的谦虚建议；也许可以包括 @TransactionTimeout 的 Maven 详细信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:49:02.343

你试过了吗

```
jboss-annotations-ejb3 
```

它应该与这个一起工作

# php - ftp url 的正则表达式

> ID：14474677
> 
> 赞同：1
> 
> 时间：2013-01-23T07:44:13.733
> 
> 标签：php, ftp

如何有一个匹配 ftp url 格式的正则表达式

```
ftp://user:name@server 
```

我有上述格式的数据，需要运行 preg_match 以确保我只返回上述格式的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:45:44.170

不要为此使用正则表达式。只需使用本机[parse_url](http://php.net/parse_url)函数。

```
function check_ftp_url($url){
    $p = parse_url($url);
    return isset($p['scheme'])&& !strcasecmp($p['scheme'], 'ftp')
           &&isset($p['host'])
            &&isset($p['user'])&&isset($p['pass']);
} 
```

## 优点

1.  写的时间更短
2.  您无需在正则表达式上投入数小时即可找到正则表达式解决方案。
3.  这是检查网址的正确方法

## 缺点

1.  你需要写比正则表达式更多的字符

# php - PHP foreach 类别和项目

> ID：14474684
> 
> 赞同：1
> 
> 时间：2013-01-23T07:44:53.257
> 
> 标签：php, mysql, codeigniter, loops, foreach

我遇到这样的 MySQL 查询情况：

*   类别 1 - 项目 1
*   类别 1 - 项目 2
*   类别 1 - 项目 3
*   类别 2 - 项目 3
*   类别 2 - 项目 4
*   类别 2 - 项目 5
*   类别 2 - 项目 1
*   类别 3 - 项目 4
*   类别 3 - 项目 10
*   类别 X - 项目 X 或项目（1,2,3.... 现有）

如何在 PHP 中按类别分组？

数据库方案：

![方案](../Images/1a483222d2530624c47b6d42f8548390.png)

MySQL查询：

```
$query = "SELECT cat.category_name, ch.channel_name 
FROM `type_categ` tc , `categories` cat , `channels` ch
WHERE cat.category_id = tc.category_id AND ch.channel_id = tc.channel_id
ORDER BY cat.category_name ASC" 
```

输出：

```
var_dump($category)
array(x) { 
    [0]=> array(2) { 
            ["category_name"]=> string(8) "Category1" 
                ["channel_name"]=> string(15) "Item1" 
            } 
    [1]=> array(2) { 
            ["category_name"]=> string(8) "Category1" 
                ["channel_name"]=> string(17) "Item2" 
            } 
    [2]=> array(2) { 
            ["category_name"]=> string(8) "Category1" 
                ["channel_name"]=> string(10) "Otem 5" 
            } 
                  ... ...
    [x]=> array(2) { 
            ["category_name"]=> string(8) "Category x" 
                ["channel_name"]=> string(10) "Item x" 
            } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:07:28.293

您可以只迭代创建所需格式的数组的数据。
可能是这样的（[工作示例在这里](http://codepad.org/HtvviQuC)）；

```
<?php
$raw_data = array(
   array('category_name' => 'Category1', 'channel_name' => 'Item 1'),
   array('category_name' => 'Category3', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category1', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category3', 'channel_name' => 'Item 1'),
   array('category_name' => 'Category2', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category2', 'channel_name' => 'Item 1')
);

$sorted = array();

foreach ($raw_data as $k => $v) {
   if(!array_key_exists($v['category_name'], $sorted )) {
      $sorted[$v['category_name']] = array();
   }
   $sorted[$v['category_name']][] = $v['channel_name'];
   sort($sorted[$v['category_name']]);
}
ksort($sorted);
print_r($sorted);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:13:11.730

使用 foreach 并将其分配给一个新数组。

```
 $newOptions = array();
  $i=1;
    foreach ($category as $option) {
      $cname = $option['category_name'];
      $itemname = $option['channel_name'];

      $newOptions[$cname][$i] = $itemname;
$i++;
    } 
```

# c++ - 带有 imbue 的 wifstream，语言环境会产生 valgrind 错误

> ID：14474691
> 
> 赞同：1
> 
> 时间：2013-01-23T07:45:31.023
> 
> 标签：c++, locale, ubuntu-12.04, wifstream

我使用 ngrams 实现了一个语言检测器，到目前为止一切正常。为了检测一堆语言，在实际检测开始之前，我的检测器需要读取的每种支持的语言都有一组语言相关的 ngrams 文件。

为了读取这些文件，我像这样设置系统默认语言环境（在我的 ubuntu 机器上是 en_US.UTF-8）。这些代码片段在我的`language_identifier`构造函数中：

```
std::locale def_lc(""); // --- line 37 (see valgrind)
const utf8_codecvt_t &utf8_codecvt = std::use_facet<utf8_codecvt_t>(def_lc);
std::locale utf8_locale(def_lc, &utf8_codecvt); 
```

在打开流之前，我通过 imbue 设置语言环境：

```
wifstream is;
is.open(filename.c_str(), ios::in);
is.imbue(utf8_locale);
if (is.is_open()) {
   // ... 
} 
```

执行我的检测器，valgrind 给我以下输出：

```
==21669== Memcheck, a memory error detector
==21669== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==21669== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==21669== Command: ./language_identifier
==21669== 
==21669== Invalid read of size 8
==21669==    at 0x56E5E08: wcscmp (wcscmp.S:479)
==21669==    by 0x4EA2113: std::moneypunct<wchar_t, false>::~moneypunct() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4EA2198: std::moneypunct<wchar_t, false>::~moneypunct() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E96A79: std::locale::_Impl::~_Impl() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E96C4C: std::locale::~locale() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x40429E: language_identifier::language_identifier() (language_identifier.cpp:137)
==21669==    by 0x409802: Singleton<language_identifier>::instance() (Singleton.h:29)
==21669==    by 0x4050C1: main (language_identifier.cpp:270)
==21669==  Address 0x5a07248 is 0 bytes after a block of size 8 alloc'd
==21669==    at 0x4C2AC27: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==21669==    by 0x4EA1DED: std::moneypunct<wchar_t, false>::_M_initialize_moneypunct(__locale_struct*, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E9911E: std::locale::_Impl::_Impl(char const*, unsigned long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E9965E: std::locale::locale(char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x403C36: language_identifier::language_identifier() (language_identifier.cpp:37)
==21669==    by 0x409802: Singleton<language_identifier>::instance() (Singleton.h:29)
==21669==    by 0x4050C1: main (language_identifier.cpp:270)
==21669== 
==21669== Invalid read of size 8
==21669==    at 0x56E5E08: wcscmp (wcscmp.S:479)
==21669==    by 0x4EA2003: std::moneypunct<wchar_t, true>::~moneypunct() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4EA2088: std::moneypunct<wchar_t, true>::~moneypunct() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E96A79: std::locale::_Impl::~_Impl() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E96C4C: std::locale::~locale() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x40429E: language_identifier::language_identifier() (language_identifier.cpp:137)
==21669==    by 0x409802: Singleton<language_identifier>::instance() (Singleton.h:29)
==21669==    by 0x4050C1: main (language_identifier.cpp:270)
==21669==  Address 0x5a07478 is 0 bytes after a block of size 8 alloc'd
==21669==    at 0x4C2AC27: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==21669==    by 0x4EA17FD: std::moneypunct<wchar_t, true>::_M_initialize_moneypunct(__locale_struct*, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E9916B: std::locale::_Impl::_Impl(char const*, unsigned long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x4E9965E: std::locale::locale(char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==21669==    by 0x403C36: language_identifier::language_identifier() (language_identifier.cpp:37)
==21669==    by 0x409802: Singleton<language_identifier>::instance() (Singleton.h:29)
==21669==    by 0x4050C1: main (language_identifier.cpp:270)
==21669== 

--- lang is en

--- lang is zh

--- lang is de

--- lang is ja

--- lang is ja

--- lang is zh

--- lang is zh

--- T1: lang is de

--- T2: lang is de
==21669== 
==21669== HEAP SUMMARY:
==21669==     in use at exit: 0 bytes in 0 blocks
==21669==   total heap usage: 366,286 allocs, 366,286 frees, 17,016,689 bytes allocated
==21669== 
==21669== All heap blocks were freed -- no leaks are possible
==21669== 
==21669== For counts of detected and suppressed errors, rerun with: -v
==21669== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 2 from 2) 
```

我不完全记得也没有机会检查，但在我的 ubuntu 10.04 LTS 机器上我没有上述 valgrind 错误，但我可能弄错了。

我也可以用这个简单的程序重现这个：

```
#include <iostream>
#include <locale>

int main (int argc, char **argv) {
    try {
        std::locale * l1 = new std::locale("de_DE.UTF-8");
        delete l1;

        std::locale l2("de_DE.UTF-8");

    } catch(...) {
        return 0;
    }
    return 0;
}; 
```

有人知道这里发生了什么吗？我错过了什么吗？

代码基于 ubuntu 12.04LTS，使用 gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)

```
$ /lib/x86_64-linux-gnu/libc.so.6
GNU C Library (Ubuntu EGLIBC 2.15-0ubuntu10.3) stable release version 2.15, by Roland McGrath et al.
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.
Compiled by GNU CC version 4.6.3.
Compiled on a Linux 3.2.30 system on 2012-10-05.
Available extensions:
    crypt add-on version 2.1 by Michael Glad and others
    GNU Libidn by Simon Josefsson
    Native POSIX Threads Library by Ulrich Drepper et al
    BIND-8.2.3-T5B
libc ABIs: UNIQUE IFUNC 
```

感谢您的提示！

# c++ - constexpr 函数，返回模板化函数实例的地址

> ID：14474692
> 
> 赞同：3
> 
> 时间：2013-01-23T07:45:30.803
> 
> 标签：c++, c++11, clang

考虑以下示例：

```
#include <utility>
#include <iostream>

struct bar
{
    void baz() { std::cout << "bar::baz" << std::endl; }
};

template <typename Signature>
struct function_traits;

template <typename ReturnType, typename Class, typename ...ArgumentTypes>
struct function_traits<ReturnType (Class::*)(ArgumentTypes...)>
{
    typedef ReturnType (Class::*Signature)(ArgumentTypes...);
    typedef ReturnType (*FuncPtr)(void const *ip, ArgumentTypes&& ...);

    template <Signature mf>
    static ReturnType wrapper(void const *p, ArgumentTypes&& ...args)
    {
        Class* instance = const_cast<Class*>(static_cast<Class const *>(p));
        return (instance->*mf)(std::forward<ArgumentTypes>(args)...);
    }
};

template <typename Type>
constexpr auto wrap(Type p) -> typename function_traits<Type>::FuncPtr
{
    return &(function_traits<Type>::template wrapper<p>); // ERROR: Address of overloaded function 'wrapper' does not match required type 'void (const void *)'
}

int main()
{
    auto v = wrap(&bar::baz);
} 
```

我已经用 Xcode 4.5.2 - Apple clang 版本 4.1 (tags/Apple/clang-421.11.66) (基于 LLVM 3.1svn) 对其进行了测试
我想要太多吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:36:20.610

参数声明

```
constexpr auto wrap(Type p) 
```

与模板名称不兼容

```
template wrapper<p> 
```

即使在`constexpr`函数中，参数也不能用作常量表达式。

通常这个错误表现为试图`constexpr`根据参数的值调整函数的返回类型，但这有点微妙，因为类型表达式是值计算的一部分，值总是具有相同的类型。

根本问题是模板被要求执行运行时工作。您可以决定在运行时使用什么 PTMF 来调用它。

`constexpr`从不限制可以传递给函数的参数。（即，只能使用常量参数调用函数。）它只会使函数成为在需要常量的上下文中使用的候选者。

# .htaccess - htaccess 重定向我的整个网站，除了 1 个文件

> ID：14474694
> 
> 赞同：1
> 
> 时间：2013-01-23T07:45:35.603
> 
> 标签：.htaccess, redirect

我正在尝试将我的整个站点（包括所有子目录）重定向到 www.mysite.com/index.html 文件。

我环顾四周，发现您使用 .htaccess 来执行此操作，并且只需要一些帮助来在调用 index.html 时停止重定向。

到目前为止，我的 .htaccess 文件看起来像这样：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !=/index.html
Redirect 301 / http://www.MySiteHere.com/index.html 
```

所以上面所做的是将我网站上的所有内容重定向到我想要做的 index.html ，但它会继续请求 index.html 文件。因此，当请求 index.html 文件时，我需要一些帮助来阻止 .htaccess 文件运行。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:05:05.880

您在这里混合了来自 2 个不同模块的指令。`RewriteCond`是 mod_rewrite 的一部分，它只应用于下一个紧随其后的`RewriteRule`指令。该`Redirect`指令是 mod_alias 的一部分，它被应用在 URL 文件映射管道中完全不同的位置。看起来您只想坚持使用 mod_rewrite：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !^/index.html$
RewriteRule ^ http://www.MySiteHere.com/index.html [L,R=301] 
```

# iphone - 在 UINavigationController 中释放视图控制器

> ID：14474696
> 
> 赞同：1
> 
> 时间：2013-01-23T07:45:44.123
> 
> 标签：iphone, ios

如何释放 UINavigationController 中的所有视图控制器，而不释放 UINavigationController 对象本身。

我的情况是，我有一个带有一组视图控制器的导航控制器。在某些情况下，我想为可用的导航控制器设置一个新的视图控制器作为 rootViewController。所以我使用了

**"[navigationcontrollerObj initWithRootViewController:viewController]";** 方法。

它工作正常，我的新视图层次结构设置正确。但我的问题是，以前推送的视图控制器没有被释放。

这就是我之前推送视图控制器的方式

**[navigationcontrollerObj pushViewController:viewControllerObj]; viewControllerObj 释放];**

任何帮助请......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:46:50.367

如果你的意思是弹出到 rootviewcontroller，你可以试试这个：

```
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

如果您没有在其他任何地方保留它，这也会释放所有视图控制器。确保你在推送后释放了所有的视图控制器。完成此操作后，您可以将任何视图控制器设置为 rootviewcontroller。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:43:07.610

```
[self.navigationController popToRootViewControllerAnimated:NO]; will pop all other view controller
- (void)setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated // use this function to change the root view controller 
```

# entity-framework - 如何自定义 EF 5 T4 模型和上下文生成模板的生成？

> ID：14474702
> 
> 赞同：0
> 
> 时间：2013-01-23T07:46:15.700
> 
> 标签：entity-framework, entity-framework-5, t4

每次我将 EDMX 模型或 DB first 数据模型添加到我的项目时，EF 都会生成两个 T4 模板，一个用于生成域模型，一个用于生成 DbContext。然后我必须在生成所有类之前修改这些模板。如何修改这两个T4模板的生成，而不是这些模板本身输出的模块？

示例：在生成**Sample.edmx**数据库第一个数据模型后，在**Sample.edmx**下我们找到一个名为**Sample.Context.tt**的文件。该文件包含以下行：

```
const string inputFile = @"Sample.edmx"; 
```

我需要这个字符串是`@"..\..\Sample.Repository\Data\Sample.edmx"`. 现在，每次我生成一个新的数据模型时，我都必须打开**Sample.Context.tt**并更改这行代码。我想找到生成该行的内容并对其进行修改，因此每次都会生成 edmx 的正确路径。

# primefaces - PrimeFaces：传递参数 在网络逻辑

> ID：14474704
> 
> 赞同：0
> 
> 时间：2013-01-23T07:46:27.573
> 
> 标签：primefaces, jsp-tags

我想知道如何在weblogic中传递参数？

这不支持并得到错误
5:03:39,735 ERROR JSFExceptionHandler [[ACTIVE] ExecuteThread: '15' for queue: 'weblogic.kernel.Default (self-tuning)'] :121 - j_id1->"Encountered"( " 在第 1 行第 28 列。期待以下之一："}" ... "." ... "[" ... ">" ... "gt" ... "<" ..." lt" ... ">=" ... "ge" ... "<=" ... "le" ... "==" ... "eq" ... "!=" .. . “ne” ... “&&” ... “和” ... “||” ... “或” ... “*" ... "+" ... "-" ... "?" ... "/" ... "div" ... "%" ... "mod" ... " com.sun .el.parser.ParseException：在第 1 行第 28 列遇到“（”。期待以下之一：“}”...“。”...“[”...“>”...“gt” ... "<" ... "lt" ... >=" ... "ge" ... "<=" ... "le" ... "==" ... "eq " ... "!=" ... "ne" ... "&&" ... "and" ... "||" ... "or" ..."* " ... "+" ...“-” ...“？” ...“/”...“div”...“%”...“mod”...

```
at com.sun.el.parser.ELParser.generateParseException(Unknown Source)
at com.sun.el.parser.ELParser.jj_consume_token(Unknown Source)
at com.sun.el.parser.ELParser.DeferredExpression(Unknown Source)
at com.sun.el.parser.ELParser.CompositeExpression(Unknown Source)
at com.sun.el.lang.ExpressionBuilder.createNodeInternal(Unknown Source)
at com.sun.el.lang.ExpressionBuilder.build(Unknown Source)
at com.sun.el.lang.ExpressionBuilder.createMethodExpression(Unknown Source)
at com.sun.el.ExpressionFactoryImpl.createMethodExpression(Unknown Source)
at com.sun.faces.facelets.tag.TagAttributeImpl.getMethodExpression(TagAttributeImpl.java:219)
at com.sun.faces.facelets.tag.jsf.ActionSourceRule$ActionListenerMapper2.applyMetadata(ActionSourceRule.java:133)
at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:77)
at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:125)
at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:96)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:345)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:146)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:99)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:174)
at com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:392)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:363)
at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:104)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at com.sun.faces.facelets.tag.jsf.core.ViewHandler.apply(ViewHandler.java:156)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:89)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:79)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:304)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:363)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:342)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:196)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:151)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:89)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:79)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:148)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:734)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:96)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:176) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:15:03.953

您的代码似乎有一些奇怪的字符...（例如，如果您将其复制粘贴到记事本 ++ 中，您可以看到这一点）

试试这个：

```
<p:dataTable var="item" value="#{userMainAction.listAcsCountryEBean}" id="tblUserList"> 
    <p:ajax event="rowEdit" listener="#{userMainAction.doEditUser}" />
    <p:column headerText="#{message.label_userlist_country}">
        <h:outputText value="#{item.usrAcsCtryCd}" />
    </p:column>
    <p:column headerText="#{message.label_userlist_UTCOffset}">
        <h:outputText value="#{item.usrAcsUtcTime}"/>
    </p:column>
    <p:column headerText="Edit">
        <p:commandButton id="cmduserEdit" icon="ui-icon" actionListner="#{userMainAction.doEditUser(item)}"/>
    </p:column>
    <p:rowEditor />
</p:dataTable> 
```

# jsp - JSP中MVC中的控制器

> ID：14474707
> 
> 赞同：2
> 
> 时间：2013-01-23T07:46:35.827
> 
> 标签：jsp, model-view-controller, controller

我正在使用 MVC 模式在 JSP 中尝试一个项目。

在在线教程中，它有一个 servlet 作为控制器，**在其 doPost() 方法中**：

*   从模型访问数据
*   把它放在请求范围内，最后
*   重定向到视图（JSP 页面）

然后，JSP 页面访问在请求范围中添加的参数，并以所需的布局显示该对象的内容。

**Q1：** 但是在这种方法中，每个视图会有一个控制器，我的意思是每个 JSP 都会有一个 servlet。这是好习惯吗？或者我应该为多个视图设置一个控制器，并让视图通过标头向控制器发送命令值，控制器将使用该控制器来决定通过模型访问什么以及接下来生成什么视图。

**Q2：** servlet 是实现 Controller 的标准方式吗？构建控制器还有哪些其他选择？更常用的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:31:29.823

这是我早期进入 Java EE 时的同一个问题 ;-)

似乎您已经将控制器的概念直接映射到 servlet，这在您的示例项目中可能是正确的。但是对于一个更现实的项目来说，这几乎是不真实和可维护的。所以对于我下面的回答，请记住，控制器和 servlet 是两个不同的概念，我打算先回答你的第二个问题。

Q2：

由于servlet映射必须在web.xml中硬编码，这很麻烦（我的意思是，你更喜欢写Java代码而不是XML的东西，对吧？），现在主流的MVC框架（struts、Spring MVC等）都采取了类似的方式单个“调度程序”servlet 实践。

这个 servlet 引导框架，加载您的自定义控制器，然后您的整个应用程序就可以运行了。这个 dispatcher servlet 负责根据不同的请求路径、查询参数，找到正确的控制器。

Q1：

对于每个视图一个控制器，或一个控制器到多个视图，没有单一的最佳实践。我的建议是只要你能保持你的代码干净和一致，选择适合你项目的任何策略。毕竟，这是组织代码的一种体验。

控制器和视图是两个不同的层来分离关注的问题，对吧？

顺便说一句，我强烈建议你选择主流 MVC 框架的设计文档，我认为他们可以更好地解释你的困惑。

外部参考：

[http://www.jpalace.org/docs/articles/mvc/mvc.html](http://www.jpalace.org/docs/articles/mvc/mvc.html) 这是一篇关于实现调度 servlet 的好文章。它实际上使用 MVC 设计模式构建了一个非常小但完整的框架。 [http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html)上面的图表很好地解释了调度程序 servlet 在框架中的作用。

# c# - 按客户端屏幕大小调整网格大小

> ID：14474716
> 
> 赞同：0
> 
> 时间：2013-01-23T07:47:18.417
> 
> 标签：c#, asp.net, datagrid, client, screen

我想在页面加载时按客户端屏幕大小设置数据网格的大小。有没有办法在服务器端的页面加载或其他页面事件中获得这个大小？

我使用`Request.Browser.ScreenPixelsWidth`，`Request.Browser.ScreenPixelsHeight`但这些尺寸是不正确的。这些尺寸始终为 640 * 480。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:46:22.013

`Request.Browser.ScreenPixelsWidth`并且`Request.Browser.ScreenPixelsHeight`不能在服务器端提供客户端屏幕分辨率。

最好的方法是使用 javascript-

```
<%if (!this.IsPostBack)
{%>
<script language="javascript" type="text/javascript">
var rowURL = window.location.href;
var screenWidth = window.screen.availWidth;
if (rowURL.indexOf("screen_width") == -1)
window.location.href = window.location.href + "?screen_width=" + screenWidth;
</script>
<%}%> 
```

在页面的“body”标签中使用此脚本。它只是将“screen_width”参数附加到查询字符串并刷新页面。通过这种方式，您可以从查询字符串中获取服务器端的“screen_width”的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:20:51.030

您可以使用 Javascript 来获取视口的宽度和高度。然后通过隐藏的表单输入或 ajax 将值传回。

```
var width = $(window).width();
var height = $(window).height(); 
```

首先，添加这些隐藏的表单输入来存储宽度和高度，直到回发。

```
<asp:HiddenField ID="width" runat="server" />
<asp:HiddenField ID="height" runat="server" /> 
```

接下来我们要获取窗口（视口）的宽度和高度。JQuery 对此有两种方法，恰当地命名为 width() 和 height()。

将以下代码添加到 head 元素内的 .aspx 文件中。

```
<script type="text/javascript">
$(document).ready(function() {

    $("#width").val() = $(window).width();
    $("#height").val() = $(window).height();    

});
</script> 
```

这将导致浏览器窗口的宽度和高度在回发时可用。只需像这样访问隐藏的表单输入：

```
var TheBrowserWidth = width.Value;
var TheBrowserHeight = height.Value; 
```

我希望它可能对你有所帮助......

# sql - 架构比较 Visual Studio 2012

> ID：14474723
> 
> 赞同：3
> 
> 时间：2013-01-23T07:48:02.890
> 
> 标签：sql, sql-server, visual-studio-2012

当我使用 Visual Studio 2012 的 Sql Schema Compare 运行比较和更新时，我得到“无法删除对象 'dbo.Countries'，因为它被 FOREIGN KEY 约束引用。执行批处理时出错。”

现在我理解了这个错误，我可以手动修复它。但是，当它创建脚本帐户时，Schema Compare 不应该在它尝试删除表之前删除[约束吗？

如果我们只需要修复 Visual Studio 未能解决的问题，那么这个功能的意义何在？我错过了一个设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T09:39:03.660

我发现数据库比较中有一些默认设置是出于保护目的，但大多数都可以在模式比较选项中被覆盖。

看看那里，看看这是否有助于为您将来进行的任何修改解决这个问题。

# php - 如何处理表单中的多个提交？

> ID：14474726
> 
> 赞同：2
> 
> 时间：2013-01-23T07:48:21.597
> 
> 标签：php, html, forms

我正在尝试将两个提交按钮放入一个表单中，一个按钮将更新记录，另一个按钮将删除它。

```
<form>
   <input type="submit" value="UPDATE"/>
   <input type="submit" value="DELETE/>
</form> 
```

这些应该如何在php中处理？最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:55:17.790

您只需添加一个名称：

```
<form>
   <input type="submit" name="action" value="UPDATE"/>
   <input type="submit" name="action" value="DELETE"/>
</form> 
```

并使用`$_GET['action']`or `$_POST['action']`（取决于您是否使用`get`or`post`表示形式）。

```
if($_POST['action'] == 'DELETE'){
   //.....
} elseif($_POST['action'] == 'UPDATE'){
   //.....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:52:23.690

Javascript 应该做这些工作。例如：

```
<script>
function update() {
//what you want to do
}

function del() {
}
</script>

...    

<input type="submit" value="UPDATE" onclick="update();"/>
<input type="submit" value="DELETE  onclick="del();"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:37:29.187

没有问题：在您的 php 代码中，只需检查单击了哪个按钮并处理逻辑，例如：如果用户单击 DELETE，则 UPDATE 的值为 null，此外，如果用户单击 UPDATE，则 DELETE 的值将为 null ，现在，考虑你的真实 from 看起来像这样：

```
<form action="update-delete.php" method="POST">
   <input type="text" name="visibleid" value="<?php echo $id; ?>" disabled="disabled">
   <input type=hidden" name="hiddenid" value="<?php echo $id; ?">
   <!-- other fields will be here -->
   <input type="submit" name="update" value="UPDATE"/>
   <input type="submit" name="delete" value="DELETE"/>
</form> 
```

注意：我为该行（记录）使用了 2 个字段作为 mysql id，一个用于向用户显示，一个用于在更新和删除行时需要它的唯一标识。

现在，PHP 文件如下所示： 我使用 $_POST 因为表单方法设置为 POST，如果您不设置此属性或使用 GET 代替，则必须使用 $_GET ($update = $_GET['update'] )

```
//use $action for identifying button type
$action = '';
if($update == 'UPDATE'){
 $action = 'update';
}
elseif($delete == 'DELETE'){
 $action = 'delete'
}else{
 $action = 'unknown';
}

//now lets start your logic
if($action == 'update'){
 $query = " UPDATE TABLE `tablename` SET `col1` = '$col1' WHERE `id` = '$id' ";
}
elseif($action == 'delete'){
 $query = " DELETE FROM `tablename` WHERE `id` = '$id'";
}
else{
 //echo "";
}
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T07:56:24.607

使用`JS`：

```
<form id="theForm" action="foo.php">
...
<input type="submit" value="UPDATE" id="first"/>
   <input type="submit" value="DELETE" id="second"/>    
</form>​

$(document).ready(function() {
    $("#theForm input").click(function(e) {
        e.preventDefault();
        if(e.target.id == 'first') {
            $("#theForm").attr("action", "updatePage.php");
        } else {
            $("#theForm").attr("action", "deletePage.php");
        }
        alert($("#theForm").attr("action"));
        $("#theForm").submit(); 
    });
​});​ 
```

阅读有关[JQuery的更多信息](http://jquery.com/)

我建议您使用`JS`它，但如果您只想使用 PHP，请参考 Mihai Iorga 的回答。

希望它会帮助你。

# jquery - 将复选框添加到 jqplot 折线图的图例

> ID：14474727
> 
> 赞同：1
> 
> 时间：2013-01-23T07:48:29.440
> 
> 标签：jquery, graph, plot, jqplot, legend

我一直在使用 jqplot 在我目前正在工作的站点中绘制折线图。我喜欢它让我可以选择通过单击图例中的系列名称来切换系列。但是，我的问题是，用户不知道他们可以单击系列名称来切换系列并不断询问如何操作。

如何在系列名称旁边添加一个复选框以及可单击的系列名称，以便用户知道可以单击它以显示/隐藏图表中的一条线？我一直在寻找一段时间，但未能找到解决方案。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T23:14:02.360

我制作了一个向图例添加复选框的功能。然后，它为复选框提供了显示/隐藏每个系列趋势线的功能。然后它将说明添加到图例的底部。如果其他人正在寻找如何做到这一点，这里是：

```
function addTrendLineButtons() {
    $legend = $("table.jqplot-table-legend", $chartCanvas);
    $legendRows = $("tbody tr.jqplot-table-legend", $legend);

    $legendRows.each(function(idx) {
        $checkbox = $('<input />', {
            type: 'checkbox',
            checked: $jqPlot.options.series[idx].trendline.show
        });
        $checkbox.appendTo($(this));
        $checkbox.change(function() {
            $jqPlot.options.series[idx].trendline.show = $(this).is(":checked");
            $jqPlot.replot($jqPlot.options);
            addTrendLineButtons();
        });
    });

    $instructions = $('<tfoot><tr><td colspan=3>Check box to<br />show trendline</td></tr></tfoot>');
    $instructions.css('text-align', 'right');
    $instructions.appendTo($legend);
} 
```

注意：您必须已经为每个系列显式创建了趋势线对象，而不仅仅是在 seriesDefaults 对象中。

# php - 如何使用jQuery获取所有选中复选框的值

> ID：14474729
> 
> 赞同：8
> 
> 时间：2013-01-23T07:48:39.213
> 
> 标签：php, jquery, ajax, checkbox

我不知道如何传递复选框的选定值。任何帮助或建议都会对我有很大帮助。

到目前为止，这是我的代码，我一直在传递复选框的值

### `index.php`

```
<table>
<?php
foreach($response as $item){
    echo '<tr><td><input type="checkbox" value="' .$item['id']. '"></td><td>' . $item['name'] . '</td></tr>';
}
?>
</table>
<button type="button" class="btnadd">AddSelected</button>
<script type="text/javascript">
    $(function() {
        $('.btnadd').click(function() {
            $.ajax({
                url: 'process.php',
                type: 'post',
                data: {  }, // what should I put here to pass the value of checked checkboxes
                success: function(data) {}
            });
        });
    });
</script> 
```

### `process.php`

```
<?php
$array_ids = $_POST['ids']; // this will retrieve the id's
?> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T07:53:29.250

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T07:55:48.533

使用此功能：

```
 function checkboxValues() {         
     var allVals = [];
     $(':checkbox').each(function() {
       allVals.push($(this).val());
     });
     return allVals; // process the array as you wish in the function so it returns what you need serverside
  } 
```

您的 ajax 调用将如下所示：

```
$.ajax({
    url: 'process.php',
    type: 'post',
    data: { checkboxValues() }, 
    success:function(data){         } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T08:02:26.000

你可以在你的 ajax 调用之前使用这样的东西：

```
var ids=[]; 
$('input[type=checkbox]:checked').each(function(){
    ids.push($(this).val());
}); 
```

但强烈建议将您的复选框包装在某个 div 中，并在您的 jquery 选择器中表示它。因为以当前方式，您可以选择页面上的一些其他复选框并将其发送到服务器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T08:05:46.660

将您的复选框包装在一个`<form>`标签中，并使用 PHP 数组表示法命名您的复选框：

```
<form id="form1">
<input type="checkbox" name="item[]" value="1">
<input type="checkbox" name="item[]" value="2">
<input type="checkbox" name="item[]" value="3">
</form> 
```

用途[`jQuery.serialize()`](http://api.jquery.com/serialize/)：

```
 $(function () {
     $('.btnadd').click(function () {
         $.ajax({
             url: 'process.php',
             type: 'post',
             data: $("#form1").serialize(),
             success: function (data) {}
         });
     });
 }); 
```

在服务器端，`$_POST["item"]`将是一个仅包含检查值的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T10:08:57.110

获取复选框列表标签文本

```
<span> 
    <input type="checkbox" name="mycheckbox[id][]" value="0" /> 
    <label for="mycheckboxid_0">Test0</label> 
    <input type="checkbox" name="mycheckbox[id][]" value="1" /> 
    <label for="mycheckboxid_1">Test1</label> 
</span>

var chkbox = document.getElementsByName('mycheckbox[id][]');
    var vals = "";
    for (var i=0, n=chkbox .length;i<n;i++) {
        if (chkbox [i].checked) 
        {
            var label = "mycheckboxid_"+i;
            vals += " "+$('label[for="'+label+'"]').html();
        }
    }
alert(vals); // output test1 test2 
```

希望它对你有用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-09T04:18:43.727

请尝试这样的html：

```
<td><?php echo "<input type='checkbox' name='chkimportsikep' class='form-control' value={$TABLE_NAME} checked>" ?></td> 
```

阿贾克斯/ jquery：

```
$(document).ready(function(){
//handle test button click
$("button#importSikep").click(function(){
    var checkValues = $('input[name=chkimportsikep]:checked').map(function()
    {
        return $(this).val();
    }).get();

    alert(checkValues);
    $('#loading-indicator-runsikep').show();
    $.ajax({
        type:"POST",
        url:"runsikepimport.php", // your php page action
        data:{ chkimportsikep: checkValues }, // 
        cache:false,
        success: function(result){
            $('#loading-indicator-runsikep').hide();
            alert(result);
            $('.modal.in').modal('hide');
            $("#description-status-sikep").load(location.href + " #description-status-sikep");  
            //location.reload(true);
        }
    });
    return false;
}); 
```

});

PHP 动作：

```
 // don't need array variable, but your using $_POST
if(!empty($_POST['chkimportsikep'])) {
            foreach($_POST['chkimportsikep'] as $table_name) {
             // do something 
            }
} 
```

# php - 为什么我应该（不）对命名空间使用“use”关键字

> ID：14474731
> 
> 赞同：9
> 
> 时间：2013-01-23T07:48:41.657
> 
> 标签：php, namespaces

我已经使用 PHP 5.3 一年多了，我总是做一些我不确定是否正确的事情：每当我使用当前上下文命名空间之外的类时，使用`use`关键字：

```
use Another\Class 
```

所以在代码中我可以直接写：

```
$object = new Class(); 
```

这很好，但我经常在我的文件开头有很多`use`指令，而且维护起来不太好（如果我不使用这个类，我不太可能删除`use`指令）。

每次使用此类时，我也可以编写整个命名空间：

```
$object = new \Another\Class(); 
```

所以我想知道两件事：

*   不使用`use`关键字有什么缺点（除了你每次都必须编写整个命名空间），比如你不能做的事情？
*   使用它有什么缺点吗？（因为它以某种方式导入了类，它的性能是否会稍微低一些）？

**编辑** 只是为了澄清：我知道干净的代码比小的性能调整更重要，我只是想知道计算机何时工作，我喜欢感受努力:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T08:01:53.860

*不*使用的一大缺点`use`是每次都需要输入全名。

*使用*它的一大缺点是可能与已定义的类发生名称冲突。我不确定 PHP 是如何处理这个问题的，但无论哪种方式，您最终都会遇到一些额外的麻烦。优点是您实际上不必使用相同的名称……但是，缺点是您的类与文件名不对应。

不过，在我们甚至更多地了解这种性能 BS 之前： **如果您关心别名的性能成本*，*那您就错了。** 不要担心“更快”的语法。时期。您、您的用户以及手持秒表强迫点击“重新加载”的那个人不会注意到差异。 *曾经。* 有更好的东西需要优化，这是假设你已经达到了你需要的程度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T08:01:33.770

我想到的第一件事是使用别名的能力，例如：

```
use My\Full\Classname as Another; 
```

源码[php手册](http://php.net/manual/en/language.namespaces.importing.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:03:47.743

命名空间与 PHP < 5.3 不向后兼容，如果遇到兼容性问题，则必须删除所有 case`namespace`和语句。`use`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T06:58:43.267

我使用带有 PDT 的 Eclipse 和 Eclipse 完成语法的能力，无论是使用 use 还是使用完整的命名空间，都使它变得容易。

就个人而言，我大部分时间都使用“使用”（当您使用类名的自动完成时 Eclipse 会自动创建），因为在代码上使用了更清晰的语法。

我也使用 ClassLoader，我的项目使用文件夹的顺序与命名空间相同，因此我的类加载器直接加载每个类。我不需要任何“包含”指令。

我总是使用类（有 fex 例外），即使对于普通代码，我通常使用静态代码（没有实例），因为它使 Eclipse 很容易识别每个类、方法、变量和关联类型。

所以我的代码是很多文件，没有全局变量，并且类上的模块分开，所以类名冲突很少见。在这少数情况下，Eclipse 很容易检测到哪里，我使用完整的语法或缩写（手动，我使用命名空间的别名，所以我使用“namespace_alias\classname”语法，这样更简洁但不碰撞）。

使用使用相同结构的命名空间和文件以及以这种方式搜索的类加载器（并在 include_path 目录中添加所有路径）在大型项目中非常有效。

例如... \Example\Name\Space\Myclass 搜索为

对于每个listoffolders（项目的根目录+所有在include_path中，除了“。”）在开始文件夹->文件夹（示例）->文件夹（名称）->文件夹（空格）->文件（Myclass.inc或Myclass.php或 Myclass.php5) endfor

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-13T19:37:05.083

在使用`use`关键字之前，关键字的使用不会触发类的导入（自动加载）（根据[https://stackoverflow.com/a/35755296/5189780](https://stackoverflow.com/a/35755296/5189780)中的回答）

因此，它不应该影响性能。

其他参数（例如在 php 5.3 下运行）更多地与决定是否使用*命名空间*有关。由于 PHP 还没有提供将类封装在命名空间中的真正可能性（限制访问），因此使用它只会有助于获得更清晰的代码并解决命名冲突。如果不使用`use`关键字，您将无法真正从命名空间中受益。

根据php文档：

> 在 PHP 世界中，命名空间旨在解决库和应用程序的作者在创建可重用代码元素（如类或函数）时遇到的两个问题：
> 
> 1.  您创建的代码与内部 PHP 类/函数/常量或第三方类/函数/常量之间的名称冲突。能够为 Extra_Long_Names 起别名（或缩短）旨在缓解第一个问题，提高源代码的可读性。
>     
>     
> 2.  如果您使用命名空间，请使用`use`关键字导入它们，这将使代码更加清晰和有条理。

# wcf - WCF 枚举问题：不能“或”枚举值

> ID：14474734
> 
> 赞同：4
> 
> 时间：2013-01-23T07:48:49.283
> 
> 标签：wcf, enums

我使用枚举作为标志并想要“或”它，但总是遇到错误：

枚举值“3”对“Common.EventType”类型无效，无法序列化。如果类型具有 DataContractAttribute 属性，请确保存在必要的枚举值并使用 EnumMemberAttribute 属性进行标记

代码：

```
[DataContract]
public enum EventType
{
    [EnumMember]
    Event1 = 1,
    [EnumMember]
    Event2 = 2,
    [EnumMember]
    Event3 = 4,
    [EnumMember]
    AllEvents = Event1 | Event2 | Event3
} 
```

MyContractClient 代理 = new MyContractClient(context);

proxy.Subscribe( **EventType.Event1 | EventType.Event2** );

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:28:51.713

您需要添加 [Flags] 属性以通过 WCF 发送标志。

[数据协定中的枚举类型](http://msdn.microsoft.com/en-us/library/aa347875.aspx)

```
[DataContract][Flags]
public enum EventType
{
  [EnumMember]
  Event1 = 1,
  [EnumMember]
  Event2 = 2,
  [EnumMember]
  Event3 = 4,
  [EnumMember]
  AllEvents = Event1 | Event2 | Event3
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T01:38:32.803

当我遇到这个问题时：

```
... and cannot be serialized. Ensure that the necessary enum values are present 
and are marked with EnumMemberAttribute attribute if the type has 
DataContractAttribute attribute 
```

我发现我不小心将 WCF 代理上的枚举作为**int**而不是实际的枚举值发送。

就我而言

```
bad: request.MyEnum = 1
good: request.MyEnum = MyActualEnum.Number1 
```

# ms-office - MsgWaitForMultipleObjects 返回 Office 2013 64 位版本的错误

> ID：14474740
> 
> 赞同：0
> 
> 时间：2013-01-23T07:48:59.753
> 
> 标签：ms-office, add-in, office-addins, office-2013

我的公司有一个可以在 Office 2007 和 2010 上正常运行的 Office 加载项。现在微软有了新的Office 2013，我们需要在Office 2013（32位和64位）中测试插件。

大多数功能工作正常，但不知何故，有一个使用 MsgWaitForMultipleObjects() 的函数在 Office 2013 64 位版本中无法正常工作，它在 32 位 Office 2013 上工作正常。下面是我的代码，它在一个功能：

```
Dim lReturn As Integer

  Do While True

     'Wait on event
     lReturn = MsgWaitForMultipleObjects(1, handle, 0, timeout, QS_ALLEVENTS)

     Select Case lReturn

        Case -1

           'Call failed
           Err.Raise(vbObjectError, "WaitWithEvents", "MsgWaitForMultipleObjects Failed")

        Case STATUS_TIMEOUT

           'Timed out
           WaitWithEvents = STATUS_TIMEOUT
           Exit Function

        Case 1

           'Event needs to be processed
           Application.DoEvents()

        Case Else

           'Event has been signaled
           WaitWithEvents = 0
           Exit Function

     End Select
  Loop 
```

大多数情况下，MsgWaitForMultipleObjects() 将返回 -1，Office 应用程序将崩溃/挂起。我是 MsgWaitForMultipleObjects() 的新手，曾尝试在这里和那里更改代码，但仍然无法解决问题。

MsgWaitForMultipleObjects() 是否在 64 位版本的 Office 2013 中运行良好？还是需要专门针对 64 位 Office 进行一些修改？还是我需要以不同的方式注册 DLL？加载项项目设置为任何 cpu。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:59:22.627

我找到了解决方案，问题出在 MsgWaitForMultipleObjects() 的声明中。以前我是这样声明的：

```
Private Declare Function MsgWaitForMultipleObjects Lib "user32" (ByVal nCount As Integer, ByRef pHandles As Integer, ByVal fWaitAll As Integer, ByVal dwMilliseconds As Integer, ByVal dwWakeMask As Integer) As Integer 
```

解决方案是：

```
Private Declare Function MsgWaitForMultipleObjects Lib "user32" (ByVal nCount As Integer, ByRef pHandles As IntPtr, ByVal fWaitAll As Boolean, ByVal dwMilliseconds As UInteger, ByVal dwWakeMask As Integer) As Integer 
```

# android-intent - 使用 Intent 标志 FLAG_ACTIVITY_SINGLE_TOP 导航回之前的活动后，AutocompleteTextView 不可编辑

> ID：14474743
> 
> 赞同：2
> 
> 时间：2013-01-23T07:49:15.943
> 
> 标签：android-intent, android-widget, android-tabhost, autocompletetextview, intentfilter

我有一个带有 5 个标签的标签活动。每个选项卡都有多个活动。当我导航回上一个活动时，finishFromChild(Activity child) 函数调用了我使用 Intent 标志 Intent.FLAG_ACTIVITY_SINGLE_TOP 的地方。

我的问题是在返回上一个活动后创建的，因为我以前的活动是一个带有自动完成文本视图的地图活动，在返回后自动完成文本视图变得不可编辑，并且在单击此自动完成文本视图后键盘不显示，直到我在长按后选择其文本。

请帮助我提前致谢

```
**here is my  code for finishFromChild(Activity child)**
@Override
public void finishFromChild(Activity child) {
 LocalActivityManager manager = getLocalActivityManager();
  int index = mIdList.size()-1;
  Log.d("in finish from child<>>>>>>>>>>>>>", ""+index+"");
  if (index < 1) {
      finish();
      return;
  }

  manager.destroyActivity(mIdList.get(index), true);
  mIdList.remove(index); index--;
  String lastId = mIdList.get(index);
  Intent lastIntent = manager.getActivity(lastId).getIntent();
  Window newWindow = manager.startActivity(lastId, lastIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP));
  setContentView(newWindow.getDecorView()); 
```

}

```
**and Here is my Code for AutocompleteTextView**
try {
        TenLifeDataSource dataSource = new TenLifeDataSource(this);
        mSearchedCitymList = dataSource.getAllCityBySearchString();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    findViewById(R.id.headerLogoImageView).setOnClickListener(
            new InfoButtonListener(this));

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, mSearchedCitymList);
    Log.d("check it", "i m in editor");
    mSearchAutoCompleteText = (AutoCompleteTextView) findViewById(R.id.searchBox);
    mSearchAutoCompleteText.setImeOptions(EditorInfo.IME_ACTION_DONE);
    // mSearchEditText.setOnEditorActionListener(mEditorActionListener);
    mSearchAutoCompleteText
            .setOnEditorActionListener(mEditorActionListener);

    mSearchAutoCompleteText.setAdapter(adapter);
    mSearchAutoCompleteText
            .setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {

                    InputMethodManager inputManager = (InputMethodManager) getApplicationContext()
                            .getSystemService(Context.INPUT_METHOD_SERVICE);
                    inputManager.toggleSoftInput(0, 0);
                    mSearchAutoCompleteText.dismissDropDown();

                    /*
                     * if (!TextUtils.isEmpty(v.getText())) {
                     * mLastSearchedString = v.getText().toString();
                     * showSearchResults(); //return true; }
                     */
                    mLastSearchedString = mSearchAutoCompleteText.getText()
                            .toString();
                    // //Log.d("test adderess here", mLastSearchedString);
                    // mLastSearchedString = v.getText().toString();
                    if (mLastSearchedString.length() > 0) {
                        // Log.d("center",
                        // ""+mLastSearchedString.length()+"");
                        getlocationinfo(mLastSearchedString);
                    }

                    // if(menuItems.size() <= 0)
                    // showSearchResults(mLastSearchedType);
                    // updateSuppliers(mLastSearchedType);

                    // showSearchResults();

                }
            }); 
```

# android - 以编程方式在Android的FrameLayout中设置前景色

> ID：14474745
> 
> 赞同：12
> 
> 时间：2013-01-23T07:49:23.590
> 
> 标签：android, colors, foreground

我想以编程方式在 FrameLayout 中设置前景色（而不是在 XML 属性中）。我有颜色代码`RGB`

如何将颜色转换为可绘制：

```
frm.setForeground(Drawable); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-23T07:55:55.387

您可以`Drawable`从颜色创建：

```
final int color = 0xFFFF0000;
final Drawable drawable = new ColorDrawable(color); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-10T08:30:33.587

从颜色创建`Drawable`使用`ContextCompat`

```
int color = R.color.black_trans_60;
frm.setForeground(new ColorDrawable(ContextCompat.getColor(mContext, color))); 
```

使用`ContextCompat`新 API 中的直接颜色而不是直接`ColorDrawable`颜色`ColorDrawable(@ColorInt int color)`

# iphone - 如何在父视图中限制 UIPanGestureRecognizer

> ID：14474746
> 
> 赞同：0
> 
> 时间：2013-01-23T07:49:28.347
> 
> 标签：iphone, ios, uigesturerecognizer, uipangesturerecognizer

嗨，我`UIPanGestureRecognizer`在我的项目中使用过。我用下面的代码来处理`UIPanGestureRecognizer`

```
- (void)handlePan:(UIPanGestureRecognizer *)recognizer {

      CGPoint translation = [recognizer translationInView:self];
      CGFloat newX = MIN(recognizer.view.frame.origin.x + translation.x, self.frame.size.width - recognizer.view.frame.size.width);
      CGRect newFrame = CGRectMake( newX,recognizer.view.frame.origin.y, recognizer.view.frame.size.width, recognizer.view.frame.size.height);
      recognizer.view.frame = newFrame;
      [recognizer setTranslation:CGPointZero inView:self];
} 
```

![在此处输入图像描述](../Images/f41fecc0829323896f82788663339246.png)

我的项目中有两个视图，一个是父视图（红色视图），另一个是子视图（绿色视图）。我的要求是我需要在父视图中平移子视图。我的`handlePan`方法工作正常，但唯一的问题是它允许平移超出左侧的限制。它在右侧工作得很好。我需要更改代码请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:55:25.480

你应该检查[UIGestureRecognizerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html)

`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`当您不希望手势识别器接收到触摸事件时，实现并返回 NO。

> 此方法在 touchesBegan:withEvent: 之前调用，在手势识别器上调用新触摸。

# java - 执行 net use 命令

> ID：14474747
> 
> 赞同：0
> 
> 时间：2013-01-23T07:49:29.610
> 
> 标签：java, process, batch-file, runtime.exec

我需要执行一个写入批处理文件的 net use 命令来启用驱动器。批处理文件如下：

```
net use * /delete /Y
net use l: \\<windows drive name> /user:<domain>\<username> <password> 
```

上面的批处理文件为我启用了一个驱动器，它显示为 L: drive to me。我需要通过java代码执行这个批处理文件，然后将一些文件写入这个驱动器。

我正在使用下面的代码来执行这个批处理文件：

```
String[] array = { "cmd", "/C", "start", "C:/file.bat" };
Runtime.getRuntime().exec(array); 
```

问题是当我尝试访问驱动器以写入文件时，它给了我一个找不到路径的异常。有时它运行，有时它不运行。

朋友们可以帮我了解问题出在哪里。我正在执行什么错误的步骤。如果我不清楚我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:11:09.470

> 有时它运行，有时它不运行。

这看起来像一个竞争条件。[`Runtime.exec()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)在单独的进程中执行您的命令，而调用应用程序继续运行。然后，当您尝试访问文件时，未定义批处理文件是否已经完成。

`Runtime.exec()`返回一个`Process`对象，您可以使用该对象与子进程进行通信。在您的情况下，等待该过程完成就足够了：

```
Process p = Runtime.getRuntime().exec(array);
p.waitFor();

// Now, your batch file should be completed and you can continue
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:11:24.527

我怀疑当它到达实际的命令外壳时，Windows 不喜欢“/”。也许尝试“\”代替？外部流程执行有点棘手——你可能想看看[Apache Commons Exec 项目](http://commons.apache.org/exec/)来帮助你。

# javascript - 在页面刷新之前暂停 javascript

> ID：14474749
> 
> 赞同：0
> 
> 时间：2013-01-23T07:49:32.963
> 
> 标签：javascript, asp.net, settimeout, onbeforeunload

我只是 Javascript 的新手，但我有一些严重的问题，我在不同的来源上搜索了很多小时，所以我决定发布这个问题。

在刷新或关闭 asp.net 页面之前如何停止/暂停 javascript？这是代码：

```
<script type="text/javascript">

    window.onbeforeunload = confirmExit;

    function confirmExit() {

        var connection = new Ext.data.Connection({
            defaultHeaders: {
                'Content-Type': 'application/json'
            }
        });
        connection.request({
            url: 'services/vault/deletewfinstace/'
        });
        refresh();
        //alert("Helloo");
    }

    function refresh() {
        setTimeout(function () { window.location.reload() }, 6000);
    }

</script> 
```

在这段代码中，我在事件上调用了一个 javascript 函数：window.onbeforeunload，并尝试在函数完成其工作后放置一个 setTimeout()，但页面仍会刷新或关闭，而没有正确完成函数的内容。当我在函数末尾使用 alert() 时，函数内部的内容将成功执行，但这对用户来说有点烦人。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:53:18.853

我想那`connection.request`是异步的。当您发送请求时，JS 运行器将空闲，导致窗口重新加载。如果您希望浏览器在重新加载之前等待，请尝试使请求同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:53:04.930

创建一个同步 Ajax 请求，这将锁定浏览器，直到服务器响应。

# sql - sql where子句中的列顺序

> ID：14474750
> 
> 赞同：2
> 
> 时间：2013-01-23T07:49:44.687
> 
> 标签：sql, performance, oracle, query-optimization

全部

1.  sql where 子句中的列顺序有什么有效的问题吗？我搜索了网络，然后发现了一些建议，首先说的是加入，然后是其他过滤器。例如，

    ```
    select t1.a, t2.b 
    from table1 t1, table2 t2 
    where t1.a = t2.a and t1 > 1 and t2 > 2; 
    ```

如果我换`t1 > 1`到前面有什么问题`t1.a = t2.a`吗？

1.  我想知道存在子句中的列顺序。例如，

    ```
    select t1.a, t2.b 
    from table1, table2 t2 
    where t1.a = t2.a 
      and not exists (select 1 from table3 t3 where t1.a = t3.a and t1.b = t3.b) 
    ```

如果我更改为 有任何影响，我会受伤`t1.b = t3.b`吗`t3.b = t1.b`？列顺序很关键吗？

1.  任何人都可以解释 sql select 执行步骤，并提供一些有用的教程链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:23:10.867

*大多数时候*人们说 WHERE 子句中谓词的顺序不会影响性能是正确的。然而，我们经常对系统中的数据了解更多，尤其是它的分布和偏斜，而不是优化器从其统计数据中得出的结论。在这种情况下，向优化器提供我们所能提供的最佳信息对我们来说很重要。

这是一个从我上周遇到的真实情况中抽象出来的示例（我现在没有时间运行测试用例，但我稍后会）。

情况：三张桌子，一个父母和两个孩子。任务是通过在其子项中查找非唯一行来选择父项中的唯一行。所有表都有数百万行。

我的第一次尝试是这样的：

```
select parent.*
from   child1
       , child2
       , parent
where child1.col_a = 'whatever'
and child2.col_n = 9999
and child1.parent_id = child2.parent_id
and parent.id = child2.parent_id 
```

该查询返回了正确的结果集，但性能很差。解释计划显示查询正在离开 CHILD2。这是错误的，因为 CHILD1 上的过滤器更具选择性。所以我重新编写了这样的查询：

```
select parent.*
from   child1
       , child2
       , parent
where child1.col_a = 'whatever'
and child2.col_n = 9999
and child2.parent_id = child1.parent_id
and parent.id = child1.parent_id 
```

现在查询驱动了 CHILD1，性能提高了一个数量级以上。这不会一直发生，但我说摆弄 WHERE 子句仍然是一种有效的调优技术。

CBO 是一款非常智能的软件。尽管如此，我们不能只是向它扔一个杂乱无章的 WHERE 子句，并期望它每次都能产生最好的解释计划。查询越复杂（复杂性由连接数定义），我们以有意义的方式组织 WHERE 子句就越重要。它不会造成任何伤害，它可能只会带来一些好处。

* * *

顺便说一句，那些说 ANSI 连接语法不会再次影响性能的人*在大多数情况下都是正确的*。有时它确实会导致优化器产生较差的执行计划。 [了解更多](http://jonathanlewis.wordpress.com/2010/12/03/ansi-argh/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T07:54:52.283

要摆脱这种情况，请使用显式 ANSI SQL-92 语法，并使用`JOIN`关键字：

```
select t1.a, t2.b 
from table1 t1
inner join table2 t2 on t1.a = t2.a
where  t1 > 1 and t2 > 2; 
```

这样，您将不再有`WHERE`子句中的连接条件，您可以轻松添加更多条件。

对于您的第二个查询，您可以使用`OUTER JOIN`：

```
select t1.a, t2.b 
from table1
inner join table2 t2 on t1.a = t2.a
LEFT JOIN table3 t3 on t1.a = t3.a and t1.b = t3.b
where t3.a IS NULL; 
```

我知道这并没有回答您的问题，但是这种旧的连接语法是 where 子句中条件模糊的问题。不推荐，所以尽量避免：

*   [**要改掉的坏习惯：使用老式的 JOIN。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)

*   [**要改掉的坏习惯：使用表别名，如 (a, b, c) 或 (t1, t2, t3)。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-table-aliases-like-a-b-c-or-t1-t2-t3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:17:18.590

where 子句中的顺序并不重要。ANSI JOIN 语法提高了可读性，但不影响性能。为了证明这一点：

```
create table t1 (a number, x number);
create table t2 (a number, b number);
insert into t1 (a, x) select level, mod(level,100) from dual connect by level <= 100000;
insert into t2 (a, b) select level, mod(level,10)  from dual connect by level <= 100000;
exec dbms_stats.gather_table_stats(user,'t1');
exec dbms_stats.gather_table_stats(user,'t2');
set autotrace trace explain 
```

所有四个查询

```
select t1.a, t2.b from t1, t2 where t1.a=t2.b and t1.x > 5 and t2.b > 5;
select t1.a, t2.b from t1, t2 where t1.a=t2.b and t2.b > 5 and t1.x > 5;
select t1.a, t2.b from t1, t2 where t1.x > 5 and t2.b > 5 and t1.a=t2.b;
select t1.a, t2.b from t1 join t2 on t1.a=t2.b where t1.x > 5 and t2.b > 5; 
```

产生完全相同的查询计划

```
Plan hash value: 282751716
---------------------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      | 44444 |   434K|    88   (7)| 00:00:02 |
|*  1 |  HASH JOIN         |      | 44444 |   434K|    88   (7)| 00:00:02 |
|*  2 |   TABLE ACCESS FULL| T2   | 44444 |   130K|    42   (5)| 00:00:01 |
|*  3 |   TABLE ACCESS FULL| T1   | 94946 |   649K|    44   (5)| 00:00:01 |
---------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - access("T1"."A"="T2"."B")
   2 - filter("T2"."B">5)
   3 - filter("T1"."X">5 AND "T1"."A">5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:01:56.747

在基于成本的优化器 (CBO) 下，where 子句中谓词的顺序并不重要，因为 CBO 会很乐意按照它认为合适的方式重新排列谓词（除非您在其中提示告诉 oracle 不要这样做这个）。

对于基于规则的优化器来说，确实应该注意谓词的顺序，但希望您不是在仍然使用 RBO 的非常旧的 Oracle 版本上。

# c# - 是什么原因导致“抛出'System.OutOfMemoryException'类型的异常。”对于此代码？

> ID：14474751
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:49:50.210
> 
> 标签：c#, .net, memory, linked-list

```
class Node
{
    public Node next;
    public int data;

    public Node(int d)
    {
        this.data = d;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Node n1 = new Node(10);
        Node n2 = null;

        Node root = n1;

        int count = 1;

        while (count < Int32.MaxValue -1)
        {
            n2 = new Node(count); //Exception
            n1.next = n2;

            n1 = n2;
            count++;

         } 
```

}

当系统内存达到 3 of 16GB 时发生异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:26:50.050

正如其他评论者所说，Int32.MaxValue 是一个很大的数字（大约 24 亿），每个 Node 至少需要 8 个字节的标头 - 所有 .NET 对象都有这个 - 再加上四个用于 Node 引用，再加上另外四个用于 int （在 32 位系统上；在 x64 上，这些数字分别变为 16、8 和 4）。相乘，这意味着这个程序试图在 Node 对象中分配类似 36GB 的内存，这足以解释为什么你不能在 16GB 系统上运行它。

然而，在 32 位 Windows 上，在您到达那一步之前，您将遇到进程地址空间的问题。（你会在其他 32 位操作系统上遇到类似的情况，因为它在很大程度上是底层硬件的产物。）在 32 位 Windows 上，每个进程获得 4GB，其中内核需要 2GB ，并且进程本身获得 2GB。您可以通过将操作系统设置更改为 1GB 内核，进程为 3GB 来配置它。

后一个限制就是为什么您在用完所有 16GB 物理 RAM 之前就遇到 OutOfMemoryException 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:54:56.853

Int32.MaxValue 是一个大数字，您正在创建节点的新实例乘以该数字。这很可能会压倒您可用的内存量或操作系统允许进程拥有的内存量。

# iphone - 谷歌云端硬盘 SDK 和 iOS 5.1

> ID：14474753
> 
> 赞同：4
> 
> 时间：2013-01-23T07:50:01.220
> 
> 标签：iphone, ios, xcode, ipad, google-drive-api

SDK 与 iOS 5 兼容还是仅与 iOS 6 兼容？

Google 示例和 iOS 6（模拟器和设备）一切正常，但 Xcode 在 iOS 5.1（模拟器和设备）中返回运行时错误。

我正在使用 Xcode 4.5.2。

**我已经检查了 iOS 部署目标。它设置在 5.1 上。**

谷歌示例：[https ://developers.google.com/drive/quickstart-ios](https://developers.google.com/drive/quickstart-ios)

返回运行时错误：

```
dyld: lazy symbol binding failed: Symbol not found: _objc_setProperty_nonatomic_copy
 Referenced from: /Users/Borongaj/Library/Application Support/iPhone Simulator/5.1/Applications/FC5B32F0-C5E6-4054-BE81-4F52054AC911/Tests Google Drive.app/Tests Google Drive
Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Foundation

dyld: Symbol not found: _objc_setProperty_nonatomic_copy
Referenced from: /Users/Borongaj/Library/Application Support/iPhone Simulator/5.1/Applications/FC5B32F0-C5E6-4054-BE81-4F52054AC911/Tests Google Drive.app/Tests Google Drive
Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Foundation 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T15:58:15.670

我找到了解决方案。

谷歌文档省略了一些重要的事情：

1.  观看 Google 视频**而不是**阅读 Google 教程（文本），因为某些拖放操作会破坏 Xcode 构建偏好

2.  **在 Project > Build Phases > Compile Sources 中添加 GTLDrive_Sources.m**

3.  将 GTL 项目 iOS 部署目标选项切换到 5.1（或其他任何版本）。

通过这三个步骤，您可以避免一些无聊的错误消息。

**即使是谷歌工程师在视频中也会遇到同样的错误！**:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T16:00:10.730

我在 Xcode 6.1.1 上将 iOS 开发目标设置为**5.1.1**以解决此问题。

# github - 在创建新的开源项目时，我应该分享整个提交历史吗？

> ID：14474755
> 
> 赞同：1
> 
> 时间：2013-01-23T07:50:02.960
> 
> 标签：github, open-source, collaboration

我有几个项目想在我的[GitHub Account](http://omederos.github.com/)中分享，我一直想知道什么是好的做法：

我应该推送整个 repo（包含**所有提交**历史，从第一个提交历史开始），还是**在那一刻开始公开**提交是一个好主意（并且在我第一次分享我的项目时只有一个提交）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:58:56.360

这取决于。如果您的原始提交写得很好并且版本控制得很好，我认为最好上传它。另一方面，如果您只是将其用作练习并且版本一团糟，您可能只想自己保留它。

# c# - 字符串比较中的逻辑或运算符？

> ID：14474756
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:50:05.203
> 
> 标签：c#

为什么这种比较会失败？如何比较 csharp 中的交替字符串？

```
Static void Main(string[] args)
    {
        string varFoo = "cat";

        if (varFoo != "cat" || varFoo!="duck")
            Console.WriteLine("You can enter.");
        else
            Console.WriteLine("Not allowed.");

        Console.ReadLine();
    } 
```

只是想要一些东西

```
If(Either cat or a Duck)
    // You're not allowed
else
   // you are welcomed. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T07:53:02.693

如果我理解您的评论，则允许使用“猫”（我想也允许使用“鸭”）。

```
if (varFoo == "cat" || varFoo=="duck") 
```

使用您的最后一次编辑（猫和鸭无法进入）。

```
if (varFoo != "cat" && varFoo !="duck") 
```

这意味着 : if `varFoo == "cat"`: 断言将失败（左边部分被评估，因为它是假的，右边部分没有被评估 => false）。

if `varFoo == "duck"`: 断言将失败（左边部分被评估，它是真的，然后右边部分被评估，它是 false => false）

这只是布尔生活方式：

```
true or false => true
true or true => true
true and false => false
false and true => false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T07:53:21.193

无论实际值是多少，您的条件之一始终为真。你可能想要一个不同的比较。

Considering the updated question, you'd be looking for the expression `varFoo != "cat" && varFoo != "duck"`, as you obviously confused `&&` (both conditions have to be true) and `||` (either condition have to be true).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T08:01:20.347

From your comment

> Q: in what way does it fail? – dutzu
> 
> A: The cat is allowed ._.

i assume that you want to keap away cats **and** ducks.

You condition fails because of the [Logical OR Operator `||`](http://msdn.microsoft.com/en-us/library/f355wky8.aspx). The second condition gets evaluated because `"cat" != "cat"` returns false but `"cat" != "duck"` returns true. That's why cats are also allowed to enter.

You probably want to stop both from entering with

```
if (varFoo != "cat" && varFoo != "duck")
    Console.WriteLine("You can enter.");
else
    Console.WriteLine("Not allowed."); 
```

**Update** You last edit supports my opinion:

> Just wanted something as

```
If(Either cat or a Duck)
    // You're not allowed 
```

Understand it differently: You define an action, this is to prevent some animals from entering. You want to apply this action on `cats` **and** `ducks`. You need an `AND` instead of an `OR`. (see above code)

Another approach which does the same is to define a collection of forbidden animals and use `Contains`:

```
IEnumerable<string> forbiddenAnimals = new List<string>(){ "cat", "duck" };
if(forbiddenAnimals.Contains(varFoo))
    // You're not allowed
else
    // you are welcomed 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T07:55:03.430

```
if (varFoo != "cat" || varFoo!="duck") 
```

translation:

varFoo is not equal to `cat` OR varFoo is not equal to `duck`. Since varFoo is not `duck`; it returns true.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T07:59:04.450

You probably want this:

```
if (varfoo != "cat" && varfoo != "duck")
  //You can enter. 
```

With the || it will always fail, on all strings.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T07:59:22.463

`if(varFoo != "cat" || varFoo != "duck")` so `if( false || true )` false or true == true. it doesn't fail.

# css - 关于当用户的屏幕分辨率大于 960 像素时保持我的流畅布局相同

> ID：14474761
> 
> 赞同：0
> 
> 时间：2013-01-23T07:50:32.093
> 
> 标签：css, responsive-design, media-queries

您好，我使用的是流体布局网格系统或响应式网页设计。

我喜欢如何通过媒体查询设置所有内容的大小以降低分辨率，但这是我的问题。

我希望用户无论屏幕分辨率有多大，宽度都为 960 像素，因此在 iPhone 上查看的用户将获得较小的版本，但具有 1000x621 或更高版本的用户保持不变，因此标题 h1 不会滚动。

任何帮助将不胜感激，

谢谢

这是我拥有的CSS

```
 @media only screen and (min-width: 769px){

.gridContainer {
width: 89.0217%;
padding-left: 0.4891%;
padding-right: 0.4891%;
margin: 0 auto;
}

#header {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;

 }

 #header h1 {
text-align:right;
 }

#top_menu {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;
}
#content {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;
}
#content {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;
}

 #bottom_menu {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;
}

#featured_menu {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block;
}

 #footer {
clear: both;
float: left;
margin-left: 0;
width: 100%;
display: block; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:00:27.093

只需使用媒体查询，例如：

```
@media (min-width: 1000px){ 

#header h1 {
 /* blah blah ... */
}

} 
```

因此，只有视口宽度大于 1000px 的用户才会在括号中包含 css 类。您可以使用最小宽度或最大宽度。

参考：[http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# jasper-reports - 打印多份报告

> ID：14474767
> 
> 赞同：0
> 
> 时间：2013-01-23T07:51:11.480
> 
> 标签：jasper-reports

我有带有标题带的 MainReport 和一些详细带的子报告。

例如，我想用不同的页脚打印 3 次。

如何管理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:07:35.087

您可以在报表中使用带有页脚和页眉的报表组。

您只需转到 Ireport 并添加带有页脚和页眉的报表组，然后在每个页脚和页眉中复制相同的报表或图表和页眉，您可以在其中为每个副本添加额外的文本。

# android - BasicHttpParams 无法按预期工作

> ID：14474771
> 
> 赞同：0
> 
> 时间：2013-01-23T07:51:22.617
> 
> 标签：android, http, parameters

我对 android 很陌生，使用`BasicHttpParams`.

我希望以这种格式点击这个网址`http://10.0.2.2:8080/test/j_spring_security_check?j_password=something&j_username=anbto&ajax=true&`

这应该是一个`POST`电话。`baseUrl`is和`http://10.0.2.2:8080/test/j_spring_security_check`params 我有一个`Map<String,String>`which 值是`[j_password:something, j_username:something, ajax:true]`

我有这样的代码：

```
 for(String param : params.keySet()) {
        httpParams.setParameter(param, params.get(param));
    } 
```

`httpParams`a在哪里`BasicHttpParams`，当我打电话时，`post.setParams(httpParams);`我会得到页面的全部响应。

实际上，我应该只得到 JSON 作为响应（因为我将`ajax`param 设置为`true`）：

```
 {"error":"Sorry, we were not able to find a user with that username and password."} 
```

但事实并非如此。

但是当我更改`baseUrl`to`http://10.0.2.2:8080/test/j_spring_security_check?j_password=something&j_username=anbto&ajax=true&`并跳过设置 params 时，我得到 JSON 响应。

不知道我在哪里犯了错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T13:04:24.010

我想你误会了，[这里](https://stackoverflow.com/questions/2938502/sending-post-data-in-android)有一个很好的答案，如何在 android 中发送 HttpPost

# ios - 通过 Xcode 从 iPhone/iPad 设置区域获取邮件地址

> ID：14474779
> 
> 赞同：0
> 
> 时间：2013-01-23T07:51:41.977
> 
> 标签：ios, email-address

我正在尝试使用目标 c 从 iPhone/iPad 设置区域获取电子邮件 ID 和其他详细信息到我的代码。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T10:59:12.957

您无法在设置中获取默认电子邮件，它将仅由 mfmailcomposeviewcontroller 处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:59:29.190

据我了解您的问题，您希望从用户那里获取个人数据。为此，您需要调用 AdressBook API：

[地址簿 API 文档](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:26:43.373

这是工作示例。它将所有电子邮件和全名加载到传递的数组中。以您需要的方式定制此代码，例如，您可以找到一些特定的联系人并从中获取所有信息。

```
- (NSMutableArray *)loadContactsFromAB:(NSMutableArray *)contacts
{
        ABAddressBookRef addressBook = ABAddressBookCreate();
        CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
        CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

        for (int i = 0 ; i < nPeople ; i++ ) {
                ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);
                NSString *firstName = ABRecordCopyValue(person, kABPersonFirstNameProperty);
                NSString *lastName = ABRecordCopyValue(person, kABPersonLastNameProperty);

                NSString *fullName;

                if (firstName && lastName) {
                        fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];
                } else {
                        if (firstName) {
                                fullName = [NSString stringWithString:firstName];
                        } else if (lastName) {
                                fullName = [NSString stringWithString:lastName];
                        } else {
                                continue;
                        }
                }

                NSString *email = nil;
                ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);

                if (emails) {
                        NSArray *emailAddresses = [(NSArray *)ABMultiValueCopyArrayOfAllValues(emails) autorelease];
                        if (emailAddresses && [emailAddresses count] > 0)
                                email = [emailAddresses objectAtIndex:0];
                        CFRelease(emails);
                }
                if (email) {
                        NSDictionary *contact = [NSDictionary
                                                 dictionaryWithObjectsAndKeys:fullName, @"name",
                                                 email, @"email", nil];
                        [self addContact:contacts contact:contact];
                }
                if (firstName)
                        CFRelease(firstName);
                if (lastName)
                        CFRelease(lastName);
        }

        CFRelease(allPeople);
        CFRelease(addressBook);
        return contacts;
} 
```

# html - 如何在我的网站上使用 gstreamer 命令显示？

> ID：14474784
> 
> 赞同：0
> 
> 时间：2013-01-23T07:51:58.033
> 
> 标签：html, real-time, webcam, gstreamer

**来自网络摄像头的 UDP 流（通过网络流）** gst-launch v4l2src device=/dev/video0 ！'视频/x-raw-yuv，宽度=640，高度=480'！x264enc pass=qual quantizer=20 tune=zerolatency ！rtph264pay！udpsink 主机=127.0.0.1 端口=1234

**从网络摄像头接收的 UDP 流（通过网络接收）** gst-launch udpsrc port=1234 ！“应用程序/x-rtp，有效载荷=127”！rtph264depay！ffdec_h264 ！xvimagesink 同步=假

我 [使用 gstreamer over UDP 从“热情极客”网络摄像头流式传输中获得了这个命令](https://stackoverflow.com/questions/7669240/webcam-streaming-using-gstreamer-over-udp)

**我的问题是？**

我想使用上面的这些命令在我的网站上显示实时流媒体。我该怎么做？您有任何想法，任何解决方案或示例，就像 html 代码之类的吗？

谢谢你的帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:54:49.350

您需要一个流服务器来执行此操作，而不仅仅是一些管道。

您可以使用的一台服务器是[Flumotion](http://www.flumotion.net "颤动")

# android - RelativeLayout、GestureOverlayView 和 SurfaceView 使用哪个 Widget？

> ID：14474785
> 
> 赞同：1
> 
> 时间：2013-01-23T07:52:05.460
> 
> 标签：android, bitmap, android-relativelayout, surfaceview

![应用截图](../Images/157af6bd72f5036f265839976217b7df.png)

查看附件截图

需要处理的3件事，

1.  T 恤 - ImageView/Bitmap
2.  TShirt 内的图片（来自相机/画廊）-ImageView/Bitmap（在这里我成功地获得了 Image Pinch 缩放拖动等）
3.  带有外部字体的 T 恤文本 - 转换为位图（这里我已经成功地使用 Freetype 使用外部字体并获得图像捏缩放拖动等）

需要保存三者的内容并取回resume或者restart activity

这里的按钮 - 样式（在单独的左视图中）、工具（在单独的右视图中）、照片（新视图）、文本、颜色、添加到购物车以及所有这些都将显示在 Z 轴 T 恤的叠加层上。

第一个想法：如果我们使用相对布局，我们将无法保存 Tshirt 的当前状态。

第二个想法：如果我们使用 SurfaceView、SurfaceHolder.Callback 并开发为游戏类型，并且使用线程在每个活动中引起注意是可能的。但我对使用 SurfaceView Thread 感到震惊。

第三个想法：如果我们可以为工作区和按钮提供 2 个单独的视图，那么我们可以使所有视图无效并将受 ontouch 影响的视图放在前面。但是保存工作区的问题。

第四个想法：如果我们可以在工作区视图中使用相同的 2 个单独的视图概念如果我们使用 GestureOverlayview 并仅通过 addView 概念将位图带入此视图，因为手势覆盖视图就像框架布局一样，这是可以实现的。在这里，我们可以在单独的类中拥有这个视图，如果我们需要恢复或重新启动活动以重新设计，我们可以使用构造函数获取保存的 T 恤设计的参数。因此，我将在我的购物车中有一个设计列表，只需单击一下即可重新设计，其中 Activity 或保存的实例应恢复或重新启动到此编辑状态。

我正在尝试是否有人可以解决。如果您有任何其他方法可以从您的角度实现，请帮助我单独了解上下文，以便我可以努力并实现。

# c++ - 如何创建包含不同图层的pdf文件

> ID：14474786
> 
> 赞同：3
> 
> 时间：2013-01-23T07:52:13.883
> 
> 标签：c++, pdf, layer

我的意思是使用 ac 或 c++ lib。操纵。以前我使用cairo lib，成功创建pdf文件，但没有图层。现在我想创建具有多个图层的 pdf 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:47:15.030

您可以创建（也阅读和编辑）PDF 图层（也知道可选内容组），如[PDFLayers](http://www.pdftron.com/pdfnet/samplecode.html#PDFLayers)示例中所示，该示例也包含在[PDFNet SDK](http://www.pdftron.com/pdfnet/downloads.html)中。

以下是相关代码：

```
 PDFNet.Initialize();
    PDFDoc doc;

    // Create three layers...
    OCG::Group image_layer = CreateLayer(doc, "Image Layer");
    OCG::Group text_layer = CreateLayer(doc, "Text Layer");
    OCG::Group vector_layer = CreateLayer(doc, "Vector Layer");

    // Start a new page ------------------------------------
    Page page = doc.PageCreate();

    ElementBuilder builder; // ElementBuilder is used to build new Element objects
    ElementWriter writer;   // ElementWriter is used to write Elements to the page  
    writer.Begin(page);     // Begin writing to the page

    // Add new content to the page and associate it with one of the layers.
    Element element = builder.CreateForm(CreateGroup1(doc, image_layer.GetSDFObj()));
    writer.WriteElement(element);

    element = builder.CreateForm(CreateGroup2(doc, vector_layer.GetSDFObj()));
    writer.WriteElement(element);

    // Add the text layer to the page...
    if (false)  // set to true to enable 'ocmd' example.
    {
        // A bit more advanced example of how to create an OCMD text layer that 
        // is visible only if text, image and path layers are all 'ON'.
        // An example of how to set 'Visibility Policy' in OCMD.
        Obj ocgs = doc.CreateIndirectArray();
        ocgs.PushBack(image_layer.GetSDFObj());
        ocgs.PushBack(vector_layer.GetSDFObj());
        ocgs.PushBack(text_layer.GetSDFObj());
        OCG::OCMD text_ocmd = OCG::OCMD::Create(doc, ocgs, OCG::OCMD::e_AllOn);
        element = builder.CreateForm(CreateGroup3(doc, text_ocmd.GetSDFObj()));
    }
    else {
        element = builder.CreateForm(CreateGroup3(doc, text_layer.GetSDFObj()));
    }
    writer.WriteElement(element);

    // Add some content to the page that does not belong to any layer...
    // In this case this is a rectangle representing the page border.
    element = builder.CreateRect(0, 0, page.GetPageWidth(), page.GetPageHeight());
    element.SetPathFill(false);
    element.SetPathStroke(true);
    element.GetGState().SetLineWidth(40);
    writer.WriteElement(element);

    writer.End();  // save changes to the current page
    doc.PagePushBack(page);

    // Set the default viewing preference to display 'Layer' tab.
    PDFDocViewPrefs prefs = doc.GetViewPrefs();
    prefs.SetPageMode(PDFDocViewPrefs::e_UseOC);

    doc.Save("my.pdf", SDFDoc::e_linearized, 0); 
```

注意：我是 PDFNet 开发人员。

# eclipse-plugin - Eclipse 中的黑莓插件

> ID：14474792
> 
> 赞同：0
> 
> 时间：2013-01-23T07:52:31.883
> 
> 标签：eclipse-plugin, blackberry-eclipse-plugin, blackberry-10, blackberry-android

我想将我的 .apk 转换为黑莓应用程序世界的 bar 文件。通过谷歌，我发现我必须为 eclipse 安装 2 个插件。

[http://www.blackberry.com/developers/jar/win/java](http://www.blackberry.com/developers/jar/win/java)

和别的

[https://bdsc.webapps.blackberry.com/android/downloads/eclipseplugin/beta/](https://bdsc.webapps.blackberry.com/android/downloads/eclipseplugin/beta/)

通过安装![通过安装插件，它应该显示黑莓工具](../Images/df932514c59b561fa6fae9477828e099.png)

![以及它应该显示黑莓和黑莓插件的首选项。它只显示黑莓插件](../Images/9c53d5d9b6619990a87ecf5a8e1e7130.png)

我的东西插件已经改变了他们的 url.plz 帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:10:10.150

“BlackBerry Java”插件适用于针对 BB7 及以下设备的开发。它根本与Android无关。

要在 Playbook 或 BB10 上运行 Android 应用程序，您需要来自此站点的插件：http: [//developer.blackberry.com/android/](http://developer.blackberry.com/android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T13:36:50.277

1) 要将 Android 应用程序转换为 BB 10 平台，您必须先安装 API 10（必须安装）

2) 在 Eclipse 中，转到 Help->Install new software->Add 然后使用以下 URL [http://developer.blackberry.com/android/downloads/eclipseplugin/](http://developer.blackberry.com/android/downloads/eclipseplugin/)

3）下载插件和你知道的其余部分。

# c# - 错误：使用 Matlab .NET 构建器时，“下标索引必须是实数正整数或逻辑数”

> ID：14474797
> 
> 赞同：3
> 
> 时间：2013-01-23T07:52:57.503
> 
> 标签：c#, .net, matlab, matlab-compiler

我正在使用 matlab NE builder 编译我从 C# 调用的 dll 文件。matlab代码在matlab中确认可以工作，但是从c#调用时出现以下错误：

> MWArray.dll 中发生了“System.Exception”类型的未处理异常
> 
> 附加信息：
> 
> ... MWMCR::EvaluateFunction 错误 ... 下标索引必须是实数正整数或逻辑数。=> KalmanFilter.m 第 108 行出错。

有问题的行如下：

```
plot(data(:, 1), data(:, 2)); 
```

我已经确认，当到达该行时，变量数据的大小为 n x 4，n > 50，为什么该语句应该是有意义的。

有人有这方面的经验吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:36:42.027

据我所知，当您将变量命名为函数名称或 MatLAB 函数（保留名称）时，就会出现此问题。确保这没有发生。

# html - css水平导航bug

> ID：14474802
> 
> 赞同：0
> 
> 时间：2013-01-23T07:53:11.933
> 
> 标签：html, css, navigation

我在样式化我的 CSS 导航栏时遇到问题。最后一个列表项被放到第二行，这对网站来说真的很糟糕。有人可以查看我的代码并发现我做错了什么吗？提前致谢。

**HTML：**

```
 <div id="HorizNav">
    <ul>
      <li><a href="#" id="horiznav-first">Home</a></li>
      <li><a href="#">Services</a></li>
      <li><a href="#">Contact</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#" id="horiznav-last">Social Media</a></li>
    </ul>
  </div> 
```

**CSS：**

```
#HorizNav ul {
  float: right;
  text-Align: left;
  width: 465px;
  height: 50px;

  background: #ff0000;
  color: #fff;
  font-size: 12px;

}

#HorizNav ul li { float: left; }

#HorizNav ul li a {
  display: block;
  text-decoration: none;
  background: #aa00ff;
  color: #fff;

  width: 92px;
  height: 20px; /* height minus padding-top */

  padding-top: 30px;
  padding-left: 10px;

  border-right: 1px solid #fff;
}

#HorizNav ul li a:hover {
  background: #fff;
  color: #aa00ff;
}

#HorizNav ul li a#horiznav-last { none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:26:47.267

在您的 CSS 中更改此规则

```
#HorizNav ul {
  float: right;
  text-align: left;
  width: 515px;
  height: 50px;

  background: #ff0000;
  color: #fff;
  font-size: 12px;

} 
```

演示 [http://jsfiddle.net/n5B5W/6/](http://jsfiddle.net/n5B5W/6/)

# mysql - Access denied for user 'ODBC'@'localhost'(using password:NO)

> ID：14474808
> 
> 赞同：0
> 
> 时间：2013-01-23T07:53:49.657
> 
> 标签：mysql

I get the following error message when I use the "mysqladmin version" command.

MYSQLADMIN: connect to server 'localhost' failed
error: 'Access denied for user 'ODBC'@'localhost'(using password:NO)'

How can I connect to server 'localhost'?

# objective-c - NSMutableData 到 const uint8

> ID：14474809
> 
> 赞同：0
> 
> 时间：2013-01-23T07:53:53.343
> 
> 标签：objective-c

我有奇怪的问题

服务器发送功能

```
-(void) writeToServer:(const uint8_t *) buf {
    NSLog(@"sending buf %s with lenght %zd", buf, strlen((char*)buf));
    [oStream write:buf maxLength:strlen((char*)buf)]; 
     // NSOutputStream *oStream
} 
```

`buf`是

```
NSLog(@"converted %@ length %d", encrypted, [encrypted length]);
// encrypted is NSMutableData
return (const uint8_t*)[encrypted bytes]; 
```

输出

```
 converted <4b010000 00000006 00000000 00000f20 30303031 4e50> length 22
 sending buf K with lenght 2 
```

我需要 buf 保持不变.. 具有相同的原始字节和适当的长度，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:58:48.580

直接传入`NSData`对象：

```
-(void)writeToServer:(NSData *)data
{
    NSLog(@"sending with length %lu", (unsigned long)[data length]);
    [oStream write:[data bytes] maxLength:[data length]]; 
} 
```

# php - 如何在 PHP 中安全地维护持久的 SSH 连接？

> ID：14474810
> 
> 赞同：4
> 
> 时间：2013-01-23T07:53:53.493
> 
> 标签：php, security, ssh

我目前正在开发一个使用主从模型的 VPS 面板。一台主服务器运行一个用 PHP 编写的面板，并通过 SSH 管理多个从服务器。从服务器通过受限帐户访问，该帐户可以 sudo 执行特定的服务器管理相关命令，并且所有交互都记录在帐户本身无权访问的目录中。

我目前正在使用 PHP-SSH2，但是这种方法存在一些问题：

*   退出代码不能可靠地返回，因此所有命令都必须在包装脚本中执行，该脚本将标准输出、标准错误和退出代码打包成 JSON 对象并通过标准输出返回。该脚本必须存在于每个从服务器上。
*   PHP-SSH2 库不知道“自定义连接超时”的概念，这意味着我必须在尝试使用 PHP-SSH2 连接之前使用 fsockopen 探测服务器 - 如果我不这样做，则可能无法访问服务器将页面加载延迟一分钟或更长时间。由于下一个问题，这更加糟糕。
*   持久连接是不可能的。这会在面板中导致绝对荒谬的页面加载时间，尤其是结合上一个超时问题。

现在，我主要尝试解决最后一个问题。

我遇到过几种可能的解决方案，但它们都存在某种问题：

*   使用 PHPSecLib，一个纯 PHP SSH 实现，并将所有 fsockopen 调用替换为 pfsockopen 调用。这将使连接持久化，但它比我想要的更hacker，并且PHP中持久套接字的安全含义尚不清楚。
*   设置从主服务器到每个从服务器的持久 SSH 隧道，并在每个从服务器上运行一个简单的守护程序（绑定到 localhost），该守护程序运行它被告知的任何内容。这是一个问题，有两个原因。首先，它介绍了从属服务器上需要一个守护进程，这是我宁愿避免的。第二个问题是，如果有人要破坏从服务器上的受限帐户，他们仍然可以通过连接到“命令守护程序”来运行某些系统命令，即使他们无法从自己的 shell 访问这些命令。这是个问题。
*   在代表面板管理与从属服务器的持久 SSH 连接的主服务器上运行一个守护进程。这将涉及用 Python 编写一个 SSH 客户端（这是我熟悉的唯一合适的语言），并且可能归结为使用 paramiko。由于 paramiko 的文档很差，这不是一个非常有吸引力的选择，甚至可能导致安全问题，因为我并不完全清楚paramiko*应该*如何使用这些东西。

以下不是一个选项：

*   为面板本身切换到不同的语言。我正在用 PHP 编写面板，因为这是我最熟悉的语言，而且我知道我可能会遇到的怪癖和潜在问题。用我不熟悉的语言编写这样一个面向公众的重要项目将是一个坏主意。
*   将 Twisted 用于第三个“可能的解决方案”。Twisted 是一个非常庞大且复杂的依赖项，文档似乎比 paramiko 的文档还要糟糕。
*   在从属服务器上运行 HTTPd 或其他非 SSH 面向公众的守护进程。

在实践中，当必须联系多个服务器进行页面加载时，我看到有时超过一分钟的页面加载时间。这对于 VPS 面板来说显然是不可接受的。

我的目标是有某种实现来避免使用 PHP-SSH2 时引入的连接开销。以安全的方式做到这一点的最佳方法是什么，同时在从属服务器上引入最少的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:33:22.563

您可以使用 autossh，并使用 autossh 创建反向（前向）隧道。然后让您的 php 应用程序与那些反向 ssh 端口对话。如果 ssh 连接失败，autossh 将继续尝试重新创建连接。您的 php 应用程序将无法连接到反向隧道，甚至不会超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:35:31.123

选项 3 怎么样，但也用 PHP 编写守护程序？这就是我在自己的类似项目中尝试的路线。

您可以使用 FIFO 文件而不是套接字与其通信。

# html - Drag & Drop functionality of jquery/html5 is not supported in windows phone

> ID：14474812
> 
> 赞同：1
> 
> 时间：2013-01-23T07:53:59.990
> 
> 标签：html, jquery-ui, windows-phone-7

Drag & Drop functionality of jquery/html5 is not supported in windows phone. How to make it run?

`aria-grabbed` & `aria-dropeffect` property would be helpful for this.
If no. What is solution for this problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:38:33.923

还有一些其他基本功能不在 Windows Phone 中运行。例如，

就像评论提到的那样，它还不支持。如果有办法运行这些东西，那么它就不会不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:15:13.100

我认为这是由于 IE9/WP7 上缺少 mousemove 事件。作为一种**可能的解决方法**，我建议尝试[PhoneGap](http://phonegap.com)，因为它使用特殊的本机代理添加了此功能。看看这个视频

[http://www.youtube.com/watch?v=4CPaCgHQNrc](http://www.youtube.com/watch?v=4CPaCgHQNrc)

PS。在 WP8 上这应该可以工作，因为 IE10/WP8 支持全套鼠标事件

# c++ - C 在运行时警告一个问题？

> ID：14474813
> 
> 赞同：-1
> 
> 时间：2013-01-23T07:54:05.297
> 
> 标签：c++, c, visual-studio-2010, 64-bit

使用 VS 2003 构建的用于生成 32 位二进制文​​件的代码在构建时没有发出任何警告。

相同的代码，没有一个单一的代码更改，编译和链接使用 Visual Studio 2010 编译器成功生成 64 位二进制但具有以下警告列表。

所以，我的问题是，下面列表中的任何警告是否在运行时引起关注？

```
pcd.c(248) : warning C4996: 'getenv': This function or variable may be unsafe. Consider using _dupenv_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

pcd.c(377) : warning C4244: '=' : conversion from 'uintptr_t' to 'ULONG', possible loss of data

pcd.c(236) : warning C4100: 'argv' : unreferenced formal parameter

i.c(183) : warning C4100: 'lpReserved' : unreferenced formal parameter

api.c(506) : warning C4996: 'stricmp': The POSIX name for this item is deprecated. Instead, use the ISO C++ conformant name: _stricmp. See online help for details.

api.c(554) : warning C4310: cast truncates constant value

api.c(719) : warning C4996: 'strcpy': This function or variable may be unsafe. Consider using strcpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

api.c(2217) : warning C4996: 'sprintf': This function or variable may be unsafe. Consider using sprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

api.c(2892) : warning C4312: 'type cast' : conversion from 'ULONG_T' to 'HANDLE_T' of greater size

api.c(559) : warning C4702: unreachable code

stdio.h(234) : see declaration of 'fopen'

api.c(2217) : warning C4996: 'sprintf': This function or variable may be unsafe. Consider using sprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

prm.c(681) : warning C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
        C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\stdio.h(234) : see declaration of 'fopen'

host.c(410) : warning C4311: 'type cast' : pointer truncation from 'PVOID_T' to 'unsigned long'

stub.c(138) : warning C4295: 'eye' : array is too small to include a terminating null character

isv.c(372) : warning C4310: cast truncates constant value

chp.c(250) : warning C4244: '=' : conversion from 'SOCKET' to 'ULONG_T', possible loss of data

api.c(665) : warning C4311: 'type cast' : pointer truncation from 'HANDLE_T' to 'LONG'

api.c(1216) : warning C4057: 'function' : 'LPDWORD' differs in indirection to slightly different base types from 'LONG_T *'

hlp.c(1171) : warning C4057: 'function' : 'LPDWORD' differs in indirection to slightly different base types from 'LONG_T *'

neto.c(435) : warning C4057: 'function' : 'PLONG_T' differs in indirection to slightly different base types from 'ULONG_T *'

neto.c(595) : warning C4152: nonstandard extension, function/data pointer conversion in expression

neto.c(2115) : warning C4213: nonstandard extension used : cast on l-value

neto.c(2209) : warning C4057: 'function' : 'int *' differs in indirection to slightly different base types from 'LONG *'

td.c(760) : warning C4244: '=' : conversion from 'uintptr_t' to 'int', possible loss of data

td.c(2104) : warning C4054: 'type cast' : from function pointer 'FARPROC' to data pointer 'PVOID'

msc.c(287) : warning C4133: 'function' : incompatible types - from 'long *' to 'time_t *'

msc.c(1009) : warning C4702: unreachable code

inf.c(400) : warning C4057: 'function' : 'PLONG_T' differs in indirection to slightly different base types from 'ULONG *'

arb.c(166) : warning C4267: '=' : conversion from 'size_t' to 'LONG_T', possible loss of data

arb.c(226) : warning C4244: '=' : conversion from 'int' to 'CHAR_T', possible loss of data

sl.c(441) : warning C4054: 'type cast' : from function pointer 'int (__cdecl *)(unsigned char *,int,int,void *)' to data pointer 'void *'

pco.c(369) : warning C4057: 'function' : 'PLONG_T' differs in indirection to slightly different base types from 'ULONG_T *'

exit1.c(157) : warning C4295: 'publickey' : array is too small to include a terminating null 

env.c(341) : warning C4267: 'function' : conversion from 'size_t' to 'DWORD', possible loss of data

hook.c(221) : warning C4245: 'return' : conversion from 'int' to 'SOCKET', signed/unsigned mismatch

hook.c(817) : warning C4311: 'type cast' : pointer truncation from 'unsigned char *' to 'int'

tor.c(128) : warning C4244: 'function' : conversion from 'time_t' to 'unsigned int', possible loss of data

cth.c(1012) : warning C4244: '=' : conversion from '__int64' to 'int', possible loss of data

cntrl.c(427) : warning C4996: 'strnicmp': The POSIX name for this item is deprecated. Instead, use the ISO C++ conformant name: _strnicmp. See online help for details.

api.c(263) : warning C4057: 'function' : 'int *' differs in indirection to slightly different base types from 'LONG_T *'

api.c(706) : warning C4057: 'function' : 'int *' differs in indirection to slightly different base types from 'DWORD *'

ii.c(252) : warning C4244: '=' : conversion from 'time_t' to 'long', possible loss of data 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T08:10:44.887

我建议您更好地阅读错误消息。它们是用通俗易懂的语言写成的。你可以用谷歌搜索你还不明白的术语。

让我们通过一堆，好吗？

> pcd.c(248) : 警告 C4996: 'getenv': 此函数或变量可能不安全。考虑改用 _dupenv_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。

`getenv`只有当您在从另一个线程更改变量时调用时，我才会担心这一点。这些例程的问题在于它们依赖于全局状态，这在使用多个线程时会出现问题。较新的版本也更清楚谁拥有什么分配。

> pcd.c(377)：警告 C4244：“=”：从“uintptr_t”转换为“ULONG”，可能丢失数据

看起来很可疑。您是否正在通过将指针转换为整数来做一些时髦的事情？大约在引入 64 位 Windows 的时候，他们`ULONG_PTR`为此添加了内容。

> pcd.c(236) : 警告 C4100: 'argv' : 未引用的形式参数
> 
> ic(183) : 警告 C4100: 'lpReserved' : 未引用的形式参数

可以安全地忽略或抑制。

> api.c(506)：警告 C4996：'stricmp'：不推荐使用此项目的 POSIX 名称。而是使用符合 ISO C++ 的名称：_stricmp。详细信息请参见在线帮助。

不是很担心。带有下划线的名称最终可能会使您在 *nix 系统中的可移植性降低。

> api.c(554)：警告 C4310：强制转换截断常量值

看起来很可疑。请提供例子。

> api.c(719) : 警告 C4996: 'strcpy': 此函数或变量可能不安全。考虑改用 strcpy_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。
> 
> api.c(2217) : 警告 C4996: 'sprintf': 此函数或变量可能不安全。考虑改用 sprintf_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。

这些是每个体面的 C 程序员都应该知道或理解的古老问题。请进行谷歌搜索或阅读有关缓冲区溢出的内容以及为什么应尽可能避免使用这些功能。请注意，虽然`_s`名称在 C1x 标准中，但它们在 *nix 系统上可能并不常见。还有符合旧标准的`snprintf`。`strncpy`

> api.c(2892)：警告 C4312：'type cast'：从 'ULONG_T' 转换为更大尺寸的 'HANDLE_T'

不知道是什么`HANDLE_T`，但在 Win32`HANDLE`中是指针的大小。这很糟糕。我会`ULONG_PTR`像以前一样建议。

> api.c(559) : 警告 C4702: 无法访问的代码

正是它所说的。

> stdio.h(234) : 见 'fopen' 的声明

你看见了吗？

> api.c(2217) : 警告 C4996: 'sprintf': 此函数或变量可能不安全。考虑改用 sprintf_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。

与上面类似。

> prm.c(681) : 警告 C4996: 'fopen': 此函数或变量可能不安全。考虑改用 fopen_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\stdio.h(234) ：参见“fopen”声明

这是 MS 编译器开始推荐的另一个 C11 功能。这个有点可疑。 `fopen`大概没问题。酌情阅读文档。

> host.c(410)：警告 C4311：“类型转换”：从“PVOID_T”到“无符号长”的指针截断

使用`ULONG_PTR`or`uintptr_t`代替`unsigned long`.

> stub.c(138) : 警告 C4295: 'eye' : 数组太小而不能包含终止空字符

我的猜测是你声明了一个这样的字符串：

```
char foo[n] = "blah"; 
```

哪里`n`是一个太小而无法容纳字符串的尺寸。只需删除整数。

> api.c(1216) : 警告 C4057: 'function' : 'LPDWORD' 在间接方面与 'LONG_T *' 的基本类型略有不同

`DWORD`和`LONG`是不同的类型，您将指针指向其中一个并将其用作另一个。这是非法的。（在这种情况下，它不会给您带来问题，但您应该修复它。）

> neto.c(595) : 警告 C4152: 非标准扩展，表达式中的函数/数据指针转换

嗯，不知道你是怎么做到的。也许你分配了一个函数指针到`void *`? 有几个库需要这个，尽管它在技术上按照标准是非法的。

> neto.c(2115) : 警告 C4213: 使用了非标准扩展: 对 l 值进行强制转换

我的猜测是你做了这样的事情：

```
*(char*)foo = bar; 
```

非法的。

> neto.c(2209) : 警告 C4057: 'function' : 'int *' 在间接方面与 'LONG *' 的基本类型略有不同

`PDWORD`与使用和`LONG`互换的情况类似。

> td.c(2104)：警告 C4054：“类型转换”：从函数指针“FARPROC”到数据指针“PVOID”

与 neto.c 类似，第 595 行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T08:03:39.943

是的：

我看到有几个会导致未定义的行为。

所有警告都应该被认为是逻辑错误（至少在你的想法中），应该被查看并保持沉默。通过显式更改代码/通过使用编译器指令来使警告静音（然后写一个很长的评论来说明为什么要使警告静音，这也表明它已被故意查看）。

快速扫描我首先要检查的那些（删除了重复项）。

这些绝对听起来很糟糕：

```
stub.c(138) : warning C4295: 'eye' : array is too small to include a terminating null character
exit1.c(157) : warning C4295: 'publickey' : array is too small to include a terminating null 
```

这些可能很糟糕：

```
api.c(554) : warning C4310: cast truncates constant value

chp.c(250) : warning C4244: '=' : conversion from 'SOCKET' to 'ULONG_T', possible loss of data

api.c(1216) : warning C4057: 'function' : 'LPDWORD' differs in indirection to slightly different base types from 'LONG_T *'

neto.c(2209) : warning C4057: 'function' : 'int *' differs in indirection to slightly different base types from 'LONG *'

td.c(760) : warning C4244: '=' : conversion from 'uintptr_t' to 'int', possible loss of data

msc.c(287) : warning C4133: 'function' : incompatible types - from 'long *' to 'time_t *'

arb.c(166) : warning C4267: '=' : conversion from 'size_t' to 'LONG_T', possible loss of data

arb.c(226) : warning C4244: '=' : conversion from 'int' to 'CHAR_T', possible loss of data

api.c(665) : warning C4311: 'type cast' : pointer truncation from 'HANDLE_T' to 'LONG' 
```

这些我不会留在代码中，但可能是良性的：

```
api.c(559) : warning C4702: unreachable code

td.c(2104) : warning C4054: 'type cast' : from function pointer 'FARPROC' to data pointer 'PVOID' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T08:25:10.473

警告分为三种：

1.  关于不安全/不推荐使用的功能的警告。其中一些警告您之前可能已经收到过，因为这些功能是不安全/非标准的，并且之前可能已被弃用。但是，如果您查看它们并确保正确使用它们（记住某些类型的大小在 64 位中会发生变化），您可以继续使用它们。但是，我会尽可能使用标准函数。如果您确定正确使用这些功能，至少您应该单独关闭警告。

2.  以前也应该出现的警告，例如“未引用的参数”、有符号/无符号不匹配、无法访问的代码和一些讨厌的东西，如警告 C4295、C4054、C4133。你应该修复那些，所有的。有些不是很严重（例如有符号/无符号不匹配），但也很容易修复，所以修复它们只是为了让编译器静音。

3.  使用 MSVC 的 Windows 上 64 位不同大小导致的警告。在 32 位中，int、long、long long、指针、size_t 等具有 32 位大小。您可以无缝转换它们，而不会丢失数据。但是，在 64 位中，long long、size_t 和指针具有 64 位大小，而 long 和 int 仍然是 32 位。转换它们可能会丢失信息，尤其是在涉及指针的情况下。尝试使用正确的类型，不要使用缩小转换。这也适用于这些类型的各种 typedef，例如 PVOID、DWORD 和 WinAPI 使用的所有那些 typedef，只是为了为相同的事物提供其他名称。

一般来说：警告是有原因的。尝试通过关注每个警告并对代码应用适当的更改来尽可能地使编译器保持沉默。如果您绝对必须进行转换并且确定它们不会影响程序的有效性，请使用显式转换（即`static_cast`在大多数情况下）。通过这样做，你可以确保你不会错过一个警告，它暗示你有一天会犯的一个非常愚蠢的错误，它会完全破坏整个程序，直到经过长时间的调试之后才会被发现。我知道这很乏味，尤其是在 32/64 位双平台编译上，但从长远来看，这是值得的。

# java - adding one parameter additionally

> ID：14474816
> 
> 赞同：0
> 
> 时间：2013-01-23T07:54:21.060
> 
> 标签：java

> **Possible Duplicate:**
> [removing value from the list](https://stackoverflow.com/questions/14474154/removing-value-from-the-list)

I have a query I have a Map like this

```
 Map ab = new HashMap<String, List<String>>(); 
```

and it contains the value like this

```
 1  22 23 24 25 
```

so 1 is the key and the values are 22,23,24,25

Now I want to change the structure

like this

```
 1 22 23 24 25 | M 
```

as shown above that in list apart from 22,23,24,25 I want to store pipe |M also please advise how to achieve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:55:40.537

你可以只使用`((List<String>)ab.get("1")).add("|M")`

编辑：修改为`<Object, Object>`. 请注意，这是一个未经检查的演员表。当您知道`Map`要包含的内容时，您不应该使用原始类型。避免未经检查的强制转换的另一种方法是使用`instanceof`运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:35:06.767

因此，基于 Swapnil 的回答：

```
Map<String,List<String>> ab = new HashMap<String, List<String>>();

List<String> valueList = ab.get("1");
if (valueList == null) {
  valueList = new ArrayList<String>();
  ab.put("1",valueList);
}
valueList.add ("|M"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:19:36.603

尝试这个

```
Map ab = new HashMap<String, List<String>>();
        ab.put("1", "22 23 24 25");
        Iterator it = ab.entrySet().iterator();

            if (ab.containsKey("1")) {
                String value = (String) ab.get("1");
                value += "| M";
                ab.put("1", value);
            }

        System.out.println(ab.get("1")); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T07:55:59.257

使用值创建一个新列表并使用相同的键将其放在地图上，它将被替换。

# android - “java.lang.OutOfMemoryError”在 Android 中新建一个 int 数组时

> ID：14474824
> 
> 赞同：1
> 
> 时间：2013-01-23T07:55:03.703
> 
> 标签：android, arrays, out-of-memory

问题出现在最后一行，当我尝试新建这样的数组时，它会崩溃。在 Logcat 中，它显示“java.lang.OutOfMemoryError”。那是什么意思？请帮忙。

```
Bitmap bmap;
Bitmap bMapRotate;
int bmapWidth;
int bmapHeight;
int[] bmapColorArray;
int bmapColorArraySize;

bmapWidth = bmap.getWidth();
bmapHeight = bmap.getHeight();
bmapColorArraySize = bmapWidth * bmapHeight;
bmapColorArray = new int[bmapColorArraySize];
bmap.getPixels(bmapColorArray, 0, bmapWidth, 0, 0, bmapWidth, bmapHeight); 
```

然后调用将这个 int Array 传递给 native 层。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:00:26.187

Android 应用程序的可用内存量有限。取决于从 16MB 到 24MB (IIRC) 的屏幕分辨率/大小。

因此，如果您为大图像（10M 像素）分配多个数组，那么您的内存很快就会被填满。

尽量只存储必要的信息。如果您使用的是图像的缩放版本（您可能是）存储缩放版本而不是完整的原始版本。此外，不要将您（可能）不会再次使用的图像保存在内存中。

换句话说，尽量保守你的内存，尤其是大内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:06:06.353

手动调用垃圾收集器。

```
System.gc(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T09:56:08.877

如果您想避免崩溃，请尝试此操作。

```
 Runtime runtime = Runtime.getRuntime();  

    Log.d("Free memory",""+runtime.freeMemory());  

    if(runtime.freeMemory()>(h*w)) 
    {
        int[] i = new int[h* w];
    }
    else
    {
        Toast.makeText(getApplicationContext(),"No More Heap memory",Toast.LENGTH_LONG).show();
     } 
```

# java - OAuth：发送访问令牌并获取用户数据

> ID：14474827
> 
> 赞同：0
> 
> 时间：2013-01-23T07:55:15.887
> 
> 标签：java, oauth-2.0, access-token, google-oauth

我正在尝试使用 Google OAuth。我正在开发在 IBM WebSphere 服务器上运行的 Web 应用程序。应用程序的框架是 SpringMVC。

我正在尝试获取 userinfo.profile。我已**成功获取访问令牌**，但找不到使用此令牌和获取用户信息的方法。

我正在将浏览器重定向到此 URL `https://www.googleapis.com/oauth2/v2/userinfo?access_token="+access.getAccessToken();`，但出现错误

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Invalid Credentials",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Invalid Credentials"
 }
} 
```

我是否可以正常使用此访问令牌，还是应该以其他形式发送请求？

我以这种方式发送请求：

```
GenericUrl shortenEndpoint = new GenericUrl("https://www.googleapis.com/oauth2/v2/userinfo");
HttpRequest request1 = rf.buildGetRequest(shortenEndpoint);
GoogleHeaders headers = new GoogleHeaders();
headers.setContentType("application/json; charset=UTF-8");
headers.setAuthorization("OAuth " + accessToken); 
request1.setHeaders(headers);
HttpResponse shortUrl = request1.execute(); 
```

在浏览器的此 URL 中提供我的访问令牌后

```
https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=****** 
```

我有

```
{
 "issued_to": "*****************",
 "audience": "*****************",
 "scope": "https://www.googleapis.com/auth/urlshortener",
 "expires_in": 3515,
 "access_type": "online"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T01:45:33.107

查看 tokeninfo 响应，颁发令牌的范围与您尝试访问的 API 不匹配。您似乎有[https://www.googleapis.com/auth/urlshortener](https://www.googleapis.com/auth/urlshortener)范围的访问令牌。如果您想使用 userinfo API，您应该获取[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)和[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)范围的令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:38:40.793

您的授权标头似乎不正确。

尝试：`headers.setAuthorization("OAuth " + accessToken);`

# mysql - Tomcat 7 和 Idea ide 的 JDBC 问题

> ID：14474841
> 
> 赞同：0
> 
> 时间：2013-01-23T07:56:00.560
> 
> 标签：mysql, apache, jsp, tomcat, jdbc

我正在开发一个旨在与某些 Web 服务（jsp）集成的 Androip 应用程序为此，我使用 Intellij Idea 11.1.3 进行开发，我的 Web 服务器是 Apache Tomcat 7（用于 Web 服务）。当我尝试加载mysql驱动程序`Class.forName("com.mysql.jdbc.Driver");`没问题（没有例外）但是当我这样做时

java.sql.Connection con = DriverManager.getConnection(DatabaseUrl,"root","root");

抛出一些异常是这样的：

java.sql.SQLException: 在 java.sql.DriverManager.getConnection(DriverManager.java:602) 在 java.sql.DriverManager.getConnection(DriverManager.java:185) 中找不到适合 jdbc:mysql:localhost:3306/androiddb 的驱动程序在 org.apache.jsp.add_jsp._jspService(add_jsp.java:78) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java :728) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390) 在 org.apache.jasper.servlet 的 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)。 JspServlet.service(JspServlet.java:334) at javax.servlet.http.HttpServlet.service(HttpServlet.java:728) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at org.apache .catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java: 123) org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) org.apache.catalina.valves.ErrorReportValve .invoke(ErrorReportValve.java:99) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org. org.apache.coyote.http11.AbstractHttp11Processor 上的 apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)。在 org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822) 的 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 的进程(AbstractHttp11Processor.java:1004)在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java :662)线程.run(线程.java:662)线程.run(线程.java:662)

正如说**没有找到合适的驱动程序**。但是mysql驱动程序（jar文件）从*项目结构->库->新项目库*附加到我的模块。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:10:09.857

您的网址错误；它应该是`jdbc:mysql://localhost:3306/androiddb`（注意添加`//`between`jdbc:mysql:`和`localhost`）。

另请参阅[连接器/J 的驱动程序/数据源类名称、URL 语法和配置属性](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:01:08.763

您缺少将 mysql-connectio-java.jar 添加到应用程序的 lib 文件夹中。转到您的 webapp 部署文件夹并检查 jar 是否在文件夹 WEB-INF/lib 中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-06-08T10:03:11.073

我得到了同样的错误 Eclipse 说：加载类`com.mysql.jdbc.Driver'. This is deprecated. The new driver class is`com.mysql.cj.jdbc.Driver'。驱动程序通过 SPI 自动注册，通常不需要手动加载驱动程序类。

我曾经删除命令 Class.forName("com.mysql.jdbc.Driver") 但有时它运行正常，有时它返回空白页 - 没有错误

现在我使用 Class.forName("com.mysql.cj.jdbc.Driver") 就可以了

# python - Python中的vtk用户类

> ID：14474842
> 
> 赞同：4
> 
> 时间：2013-01-23T07:56:03.180
> 
> 标签：python, vtk

我想用我自己在 Python 中的东西来扩展**vtkActor 。**我找不到调用基类的方法`__init__`，看起来没有`__init__`。也许**vtk/Python 包装**不允许这样的用户专业化，`super`失败的说法`vtkActor`不是类型......*嗯*......

我该怎么做：

```
class MyVtkActor(vtk.vtkActor):
  def __init__(self,*args):
    vtk.vtkActor.__init__(self,*args)
    # my stuff here 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:54:50.083

VTK 类的 Python 包装器有些不同。看看这个 ipython 会话：

```
In [1]: import vtk

In [2]: type(vtk.vtkActor)
Out[2]: <type 'vtkclass'>

In [3]: type(vtk.vtkActor())
Out[3]: vtkobject 
```

基本上，您仍然可以从 vtkActor 继承，但不能依赖 Python 中使用的对象初始化。您仍然可以显式调用此超类的“普通”方法，并将其`self`作为第一个参数。

您必须手动设置调用构造函数（在 C 中的意思）会执行的所有属性。

请记住：对象构造是在初始化之前执行的，因此如果您从 vtkActor 继承，则会调用普通的 vtkActor 构造函数。所以通过定义

```
class MyActor(vtk.vtkActor):
    pass 
```

你还会得到一个 vtkobject：

```
In [8]: type(MyActor())
Out[9]: vtkobject 
```

如果你需要一个真实的样本，你可以看看[这个类](https://github.com/nipy/PyLocator/blob/master/pylocator/markers.py)。它是我的[PyLocator](http://pylocator.thorstenkranz.de)程序的一部分。每个标记（屏幕截图上的蓝/绿球）都是这样一个对象。

# c - 如何通过串行端口将十六进制数据发送到使用 C 的自定义仪器？

> ID：14474844
> 
> 赞同：1
> 
> 时间：2013-01-23T07:56:08.410
> 
> 标签：c, serial-port, lpt

我有一台机器（仪器），可以从串行端口或打印机中的 8 个引脚分别读取十六进制数字。

我想将计算机上运行的 C 程序中的十六进制数据发送到这台机器上。计算机和机器通过打印机端口连接。

请让我知道如何分别从每个引脚发送我的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:19:57.683

**首先，一些澄清：**

串行通信是一种使用所有（大部分）引脚的协议。一些引脚用于同步两个通信芯片。但实际数据是通过一个数据 PIN 发送的，一次一位。

另一方面，并​​行通信是一种使用 8 个数据引脚一次同时通信一个字节的协议。打印机端口通常是并行端口。

**取决于操作系统：**

如何通过这些端口中的任何一个从程序发送数据取决于您的操作系统。

在 Linux 上比在 Windows 上更容易。

对于 Windows，这有点复杂，因为 Windows 在用户模式下（即通过用户程序）对端口访问进行了限制。

**对于 Windows 上的并行端口：**

但是，对于 Windows，我已[使用`io.dll`Geek Hideout 上提供的此处](http://www.geekhideout.com/iodll.shtml)成功驱动 LED 关闭并行端口。io.dll 包包含一个 .dll 和一个 .h 头文件，记录了您的 C 程序可以使用的函数。

**对于 Linux 上的串行端口：**

请参阅[此答案](https://stackoverflow.com/a/6947758/181638)和此[Serial HOWTO 中的代码（适用于 Linux）](http://tldp.org/HOWTO/Serial-Programming-HOWTO/)

# android - 标记文件夹并获取它们的路径

> ID：14474845
> 
> 赞同：1
> 
> 时间：2013-01-23T07:56:23.933
> 
> 标签：android, android-gallery

我想给用户一个界面，以便他可以标记文件夹，并且在后端我会得到他们的路径。但我不知道如何做到这一点。目前，我开始打算从图库中选择图像，然后保存其路径。这是我的代码。

```
Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select an Image"),1); 
```

但我希望它应该显示所有文件夹而不是图像选择器，并且用户应该标记这些，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:09:55.487

检查以下链接以获取文件/文件夹选择器 Api。

*   [Android 文件对话框。](http://code.google.com/p/android-file-dialog/)
*   [打开意图文件管理器。](http://openintents.org/en/filemanager)
*   [Android 文件/文件夹选择器](https://github.com/vaal12/AndroidFileBrowser)

只需使用此 API 并在 onActivityResult 中，您将获得选定的文件夹/文件路径。

如果你想实现自定义选择器然后看看[这个教程](http://android-er.blogspot.in/2010/01/implement-simple-file-explorer-in.html)，这会给你一些关于开始的提示。

# css - 使用悬停在文章中设置文本样式 - 但链接在文章元素上

> ID：14474852
> 
> 赞同：0
> 
> 时间：2013-01-23T07:56:49.313
> 
> 标签：css

我正在设计一个网站，其中有带有链接的元素。我希望这样做，以便访问者可以单击文章上的任意位置以链接到该页面。我的代码是：

```
<article class="pfitem"><a href="research.php">
<img class="pfcover" src="Images/pfresearch.png" />
<p class="pfcaption">Research Papers</p>
</a></article> 
```

当人们将文章悬停时，我希望显示“研究”的文本具有紫色背景，因为这是我在网站上所有文本链接中所拥有的。我尝试使用 CSS 来使用类“pfcap”来设置它的样式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:59:39.017

你可以这样写：

```
.pfitem:hover a .pfcaption{
 background:red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:20:49.487

以下 CSS 应该可以工作：

```
.pfcaption:hover {
    background-color: #d9f;
} 
```

# android - 如何在android的asyntask中调用onProgressUpdate方法

> ID：14474856
> 
> 赞同：2
> 
> 时间：2013-01-23T07:57:21.980
> 
> 标签：android

我`AsynTask`在我的代码中实现了。我想在`doInBackground()`任务完成后更新我的 UI。但是`onProgressupdate()`方法没有调用。请给我们解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:14:55.050

从`publishProgress(...)`您的`doInBackground()`.

# iphone - UIbutton 宽度和高度为零？

> ID：14474857
> 
> 赞同：0
> 
> 时间：2013-01-23T07:57:32.107
> 
> 标签：iphone, ios, ipad

我有这个

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self
              action:@selector(myAction:)
    forControlEvents:UIControlEventTouchDown];

[button setTitle:NSLocalizedString(@"Action", @"")
           forState:UIControlStateNormal];
CGFloat width = button.bounds.size.width; 
```

此时宽度为零...

零？

任何线索为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T07:59:50.853

由于您没有设置 UIButton 的框架，因此将代码修改为

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(20,20,50,50);
[button addTarget:self
              action:@selector(myAction:)
    forControlEvents:UIControlEventTouchDown];

[button setTitle:NSLocalizedString(@"Action", @"")
           forState:UIControlStateNormal];
CGFloat width = button.bounds.size.width; // Now the width of button would be 50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:07:06.217

您正在创建一个按钮，但您没有设置它的框架，要么使用界面生成器创建它并在视图加载后访问它的框架，要么给它一个类似的框架：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame: CGRectMake (100, 200, 150, 44)];
[button addTarget:self .... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:03:45.290

`sizeToFit`设置标题标签后调用您的按钮。这会将其大小调整为您刚刚设置的文本。

在绘制按钮之前，无论如何都会在按钮上调用它，但由于您似乎更早需要它，您可以自己做。

# iphone - iphone中的BroadCast Receiver android等效

> ID：14474859
> 
> 赞同：0
> 
> 时间：2013-01-23T07:57:37.937
> 
> 标签：iphone, broadcastreceiver, sip, android-broadcast

我正在 iphone 中处理一个项目，其中服务器将 SIP 消息作为广播发送，它应该由广播接收器类在客户端接收，如 Android.content.broadcastreceiver

请告诉我如何从服务器接收广播？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:48:58.953

您需要查看[推送通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

总结如下：

*   您注册您的应用程序以使用 APN（苹果推送通知）
*   当您想通知客户端某些事情时，服务器需要向 APN 服务器发送消息（以特定的非 SIP 格式）
*   然后，APN 服务器通知客户端（iPhone），您可以对手机进行编程，使其在苹果通常的严格限制内采取相应的行动。

至于使用 SIP，这取决于您收到通知后实际需要做什么，但我怀疑您会遇到麻烦。

# javascript - 对基于表的流解析方法的建议

> ID：14474860
> 
> 赞同：0
> 
> 时间：2013-01-23T07:57:47.140
> 
> 标签：javascript, node.js

我正在尝试解析每个消息看起来像这样的协议：

[01001ACP01010100]

也就是说，每条消息都有一个起始字符（[）和结束字符（]），一个 5 字节的序列号，一个类型（本例中为 ACP）。中间的数据由类型决定。

我正在寻找的是一种在一个或多个表中声明所有有效消息的结构的方法，然后制作一个利用该表的解析器。

我还想要一个可以处理 node.js 流和部分传输消息的解决方案。

我的第一次尝试看起来像这样：

```
var sub_parsers = {
    "beg" : make_parser(function (char) {return char === "<"}, 1), // start character
    "end" : make_parser(function (char) {return char === ">"}, 1), // end character
    "seq" : make_parser(isnum, 5), // sequence number
    "typ" : make_parser(isupper, 3), // type (must be all uppercase)
};

var order = ["beg", "seq", "typ"];

var make_parser = function (valid, length) {
    var buf, ret;

    buf = "";

    return function (char) {

        buf += char;

        if (valid(char)) {
            if (buf.length === length) {
                ret = buf.slice(0);
                buf = "";
                return ret;
            }
        } else {
            buf = "";
            return null;
        }
        return undefined;
    };

    return f;
}; 
```

然后我将当前状态保存在某个地方，并将字符泵送到与我的状态相对应的解析函数中。

这种方法有几个问题：

*   有一些状态，例如上面的“typ”状态，解析的实际值会影响解析器。我无法在上表中对此进行编码。
*   我想要一个表，它不仅编码如何解析消息，还编码如何序列化新消息。

# batch-file - 为什么使用带有 /b 选项的 FC.exe 比较两个文件会在手动执行和批处理执行之间产生不同的结果？

> ID：14474861
> 
> 赞同：1
> 
> 时间：2013-01-23T07:57:50.173
> 
> 标签：batch-file

`fc.exe`我尝试使用with 选项逐字节比较两个文件`/b`进行二进制比较。

当我从命令提示符窗口中运行命令时，输出列出了二进制差异。

例如命令：

```
C:\Work\jan21\script>fc.exe /b C:\abc\2.0\common.c C:\Users\rakeshk\Desktop\download_break\final\common.c >b.txt 
```

结果`b.txt`包含：

```
Comparing files C:\ABC\2.0\common.c and C:\USERS\RAKESHK\DESKTOP\DOWNLOAD_BREAK\FINAL\COMMON.C
00000994: 20 09
00000995: 20 69
00000996: 49 6E
00000997: 4E 74
00000998: 20 0D
00000999: 20 0A
0000099A: 55 20
... 
```

最后**FC**打印：

```
C:\USERS\RAKESHK\DESKTOP\DOWNLOAD_BREAK\FINAL\COMMON.C longer than C:\ABC\2.0\common.c 
```

但是当我在批处理文件中运行时，例如这个命令行

```
fc.exe /b !FILE1! !FILE2!>c.txt 
```

该文件`c.txt`包含

```
Comparing files C:\USERS\RAKESHK\DESKTOP\DOWNLOAD_BREAK\FINAL\COMMON.C longer than C:\ABC\2.0\common.c
FC: no differences encountered 
```

为什么**FC**打印文件内容不同却没有区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:20:02.830

我创建了两个文件：

## x.txt (7 字节)

```
abcdefg 
```

## y.txt（16 字节）

```
abcdefg
hijklmn 
```

比较 using`/b`时，它没有报告任何差异，因为该`/b`选项逐字节显示差异。一旦到达较小文件的末尾，它就会停止比较。在这个测试中，它只比较了前 7 个字节，然后它报告 y.txt 比 x.txt 长。

我猜您的两个文件与较小文件的末尾相同，这就是它没有报告任何差异的原因。在我的测试用例中，它没有报告`no differences encountered`. 也许那是因为您在不同的操作系统上运行，并且您可能在`FC.EXE`...中发现了一个错误。我正在使用 WinSvr2008R2。从 DOS运行`ver`报告`Microsoft Windows [Version 6.1.7601]`给我。文件详细信息`FC`是：

```
07/13/2009  06:14 PM            19,968 fc.exe 
```

如果我通过 Windows 资源管理器查看详细信息，我会看到：

```
File Description  -  DOS 5 File Compare Utility
File Version      -  6.1.7600.16385 
```

.

## 编辑 2013 年 1 月 28 日

由于您正在进行二进制比较，只是为了查看文件是否不同，您可以在不生成大型二进制差异文件的情况下进行比较。如果您下载 Microsoft **[File Checksum Integrity Verifier](http://www.microsoft.com/en-us/download/details.aspx?id=11533)**并确保`fciv.exe`它位于您的路径中，那么您可以编写以下批处理文件来确定两个文件是相同还是不同。

```
@echo off

setlocal ENABLEDELAYEDEXPANSION

for /f "skip=3 delims= " %%i in ('fciv -md5 %1') do set md5_1=%%i
for /f "skip=3 delims= " %%i in ('fciv -md5 %2') do set md5_2=%%i

if "!md5_1!"=="!md5_2!" (echo Files are the same) else (echo Files are different)

set md5_1=
set md5_2=

endlocal 
```

# html - 呈现 HTML 格式的 mongo 文档

> ID：14474864
> 
> 赞同：3
> 
> 时间：2013-01-23T07:58:13.807
> 
> 标签：html, mongodb, meteor

所以，这里有一个场景。

我的页面中有一个消息框。我正在该框中显示集合中的消息字符串。

```
Template.HomePage.Messages = function(){
   var  Messages = MessageCollection.find({raceId: Session.get('race_id')});
      if(Messages.count() > 0){
         return Messages;
      }
} 
```

该集合包含一堆消息作为字符串，并简单地通过`{{#each}}`块呈现。

问题是：如何显示带有 HTML 标记的消息？

例如。如果字符串是：

```
Hello <b> how are you? </b> 
```

这应该显示为：

你好**，你好吗？**

目前它显示字符串中的所有 html 标签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:04:03.947

使用`{{{value}}}`而不是`{{value}}`.

# android - 如何在状态栏设置数字

> ID：14474866
> 
> 赞同：1
> 
> 时间：2013-01-23T07:58:23.723
> 
> 标签：android

我想在 android 的状态栏上显示数字作为文本。我已经设置了图标，但我想设置动态的数字。有没有可能做到这一点。

```
//Create the Notification
Notification notification = new Notification(android.R.drawable.stat_sys_warning, "Battery Indicator", System.currentTimeMillis());
//Create a PendingIntent to do something when the user clicks on the Notification
//Normally this would be something in your own app
Intent intent = new Intent();
intent.setClass(getApplicationContext(), BatteryIndicator.class);
PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);

//Add the detail to the Notification
notification.setLatestEventInfo(getApplicationContext(),"Battery Indicator", "Charge level: " + batteryRemaining , pi);

//Display the Notification
NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(1, notification); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:10:33.297

Android [ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html#onDraw%28android.graphics.Canvas%29)（如果你指的是这个类）不支持任何`setText`或类似的。我建议创建一个自定义组件覆盖`onDraw(Canvas)`. 您可以打电话`super.onDraw`来完成大部分工作，然后使用`Canvas.drawText`在中心绘制数字（使用`View.getWidth`并`getHeight`找到该中心的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:58:22.517

使用 notification.number=value;

# android - 如何在android应用程序上更改音频格式

> ID：14474868
> 
> 赞同：2
> 
> 时间：2013-01-23T07:58:27.430
> 
> 标签：android

实际上我正在从事录音工作，我想根据需要选择我的音频文件，我创建了用于显示格式选项的弹出框，但我无法选择选择性的，在我的情况下它将采用默认格式或第一种格式。谁能帮帮我吗？

```
public String getFilename(){
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath,AUDIO_RECORDER_FOLDER);

    if(!file.exists()){
        file.mkdirs();
    }
    gfilename = (file.getAbsolutePath() + "/" + System.currentTimeMillis() + file_exts[currentFormat]);
    return (gfilename );
}

@SuppressLint("NewApi")
private void startRecording(){
    recorder = new MediaRecorder();         
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC); 
    recorder.setOutputFormat(output_formats[currentFormat]);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(getFilename());          
    //recorder.setOnErrorListener(errorListener);
    //recorder.setOnInfoListener(infoListener);

    try {
        recorder.prepare();
        recorder.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void stopRecording(){
    if(null != recorder)
    {
        mDbHelper.updateTestFileName(mRowId, gfilename); 
        recorder.stop();
        recorder.reset();
        recorder.release();             
        recorder = null;
        }
    displayFormatDialog();

}

private void displayFormatDialog(){
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    String formats[] = {"MPEG 4", "3GPP", "AMR", "Mp3"};

    builder.setTitle(getString(R.string.choose_format_title))
           .setSingleChoiceItems(formats, currentFormat, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                currentFormat = which;
                //setStopButtonCaption();

                dialog.dismiss();
            }
           })
           .show();
} 
```

# multithreading - 从多线程 c 应用程序调用 cuda 内核

> ID：14474869
> 
> 赞同：3
> 
> 时间：2013-01-23T07:58:27.910
> 
> 标签：multithreading, cuda

我已经为 CUDA 编写了最小二乘优化程序。当它优化一个数据集时它工作得很好。为了进一步使用，我必须实现它以同时使用三个数据集。该代码由三个内核和它们之间的一些主机代码组成，用于准备数据等。一个简单的实现是为每个数据集调用该程序三次。

![串行计算](../Images/c45153ff2e991506083617b88c76e0e5.png)

但我的任务是找出如何同时运行它 3 次。 ![多线程](../Images/de8c360b992bdd29753d6b538b2224db.png)

当我使用 openmp 或 posix 之类的库时，是否可以同时从三个主机线程调用程序或并发内核，甚至是一个好主意？还是我应该尝试编写自己的调度程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:33:29.803

当您说“同时四个块”时，您的意思是每个多处理器（MP）四个块吗？

根据您在 Q 中的附加评论，您的[560 Ti](http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-560ti/specifications)上可能有 384/32=12 多处理器 (MP) 。如果您为一个内核启动超过 12*4=48 个块，您将无法同时运行您的三个内核。

[在这种情况下，您的任务规模对于并发内核执行](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#conurrent-kernel-execution)来说太大了，但您仍然可以重叠数据传输和内核执行，如[本博客](https://developer.nvidia.com/content/how-overlap-data-transfers-cuda-cc)所示。

您可以在 CUDA 编程指南的[异步并发执行](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)部分找到更多信息。

另一方面，由于每个数据集都有一些宿主代码，因此您可以通过同时运行一个数据集的宿主代码和另一个数据集的内核来加速程序。

对于主机代码并行性，您可以使用 posix/omp，然后将具有不同 CUDA 流的每个内核绑定到相应的主机线程。

# jquery - Jquery：控制多个新闻自动收报机

> ID：14474870
> 
> 赞同：1
> 
> 时间：2013-01-23T07:58:35.150
> 
> 标签：jquery, news-ticker

我正在使用*jQuery*新闻自动收录[器插件](http://buildinternet.com/project/totem/)。它工作得很好，但是当我在我的页面中放置多个新闻代码时，新闻代码`control(start,stop,next/pre)`不起作用。当我单击控件 1 时，此控件适用于所有新闻自动收报机框，但需要`control`为每个框工作。`i.e: control1 for box1, control2 for box2`. 如何解决这个问题？[在线演示](http://jsfiddle.net/BBKING/ucvdB/)（实际操作中请先点进去`controlbar`。）

HTML：

```
<ul id="vertical-ticker">
            <li>One Time</li>
            <li>Baby</li>
            <li>One Less Lonely Girl</li>
            <li>Somebody to Love</li>
            <li>Eenie Meenie</li>
            <li>Never Say Never</li>
            <li>U Smile</li>
</ul>
<p><a href="#" id="ticker-previous">Previous</a> / <a href="#" id="ticker-next">Next</a> / <a id="stop" href="#">Stop</a> / <a id="start" href="#">Start</a></p>
<ul id="vertical-ticker1">
            <li>One Time</li>
            <li>Baby</li>
            <li>One Less Lonely Girl</li>
            <li>Somebody to Love</li>
            <li>Eenie Meenie</li>
            <li>Never Say Never</li>
            <li>U Smile</li>
</ul>
    <p><a href="#" id="ticker-previous">Previous</a> / <a href="#" id="ticker-next">Next</a> / <a id="stop" href="#">Stop</a> / <a id="start" href="#">Start</a></p> 
```

查询：

```
$(function(){
            $('#vertical-ticker').totemticker({
                row_height  :   '100px',
                next        :   '#ticker-next',
                previous    :   '#ticker-previous',
                stop        :   '#stop',
                start       :   '#start',
                mousestop   :   true,
            });
        });
$(function(){
            $('#vertical-ticker1').totemticker({
                row_height  :   '100px',
                next        :   '#ticker-next',
                previous    :   '#ticker-previous',
                stop        :   '#stop',
                start       :   '#start',
                mousestop   :   true,
            });
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:00:34.347

您有重复的 id，如`#ticker-next`, `#start`,`#stop`等。这些在 HTML 和 jQuery 对象映射中都必须是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:00:38.223

更改开始按钮的 id，每个新贴纸的开始按钮应该有不同的 id。

```
$(function(){
            $('#vertical-ticker').totemticker({
                row_height  :   '100px',
                next        :   '#ticker-next',
                previous    :   '#ticker-previous',
                stop        :   '#stop',
                start       :   '#start',
                mousestop   :   true,
            });
        });
$(function(){
            $('#vertical-ticker1').totemticker({
                row_height  :   '100px',
                next        :   '#ticker-next2',
                previous    :   '#ticker-previous2',
                stop        :   '#stop2',
                start       :   '#start2',
                mousestop   :   true,
            });
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:06:51.447

你应该改变`#vertical-ticker1`and `ticker-previous1`and `#ticker-next1`and `#start`and `#stop`too。

**[jsfiddle 现场演示](http://jsfiddle.net/BlackSRC/ucvdB/3/)**

**JavaScript**

```
$(function(){
        $('#vertical-ticker1').totemticker({
            row_height  :   '100px',
            next        :   '#ticker-next1',
            previous    :   '#ticker-previous1',
            stop        :   '#stop1',
            start       :   '#start1',
            mousestop   :   true,
        });
    }); 
```

**HTML**

```
<p><a href="#" id="ticker-previous1">Previous</a> / <a href="#" id="ticker-next1">Next</a> / <a id="stop1" href="#">Stop</a> / <a id="start1" href="#">Start</a></p> 
```

# android - SocketTimeOutException (id=830027971416)/引起ErrorException (id=830029535888)

> ID：14474875
> 
> 赞同：2
> 
> 时间：2013-01-23T07:58:46.693
> 
> 标签：android, exception, vnc

我不确定我的问题是否正确...@@

（完整源代码：[https](https://github.com/oNaiPs/droid-VNC-server) ://github.com/oNaiPs/droid-VNC-server ）

我在 Windows XP、Eclipse AVD（API 级别 14）上运行上述链接中的源代码，但在启动服务器的步骤中失败。

当我在调试模式下跟踪代码时，我在这段代码中遇到了异常

```
public static boolean isServerRunning() {
    try {
        byte[] receiveData = new byte[1024];
        DatagramSocket clientSocket = new DatagramSocket();
        InetAddress addr = InetAddress.getLocalHost();

        clientSocket.setSoTimeout(100);
        String toSend = "~PING|";
        byte[] buffer = toSend.getBytes();

        DatagramPacket question = new DatagramPacket(buffer, buffer.length,
                addr, 13132);
        clientSocket.send(question);

        DatagramPacket receivePacket = new DatagramPacket(receiveData,
                receiveData.length);
        clientSocket.receive(receivePacket);
        String receivedString = new String(receivePacket.getData());
        receivedString = receivedString.substring(0, receivePacket
                .getLength());

        return receivedString.equals("~PONG|");
    } catch (Exception e) {
        return false;
    }
} 
```

当它运行到这一行时“clientSocket.receive(receivePacket);”

它转到“捕获（异常e）”

变量e的内容是

```
e:                       SocketTimeOutException (id=830027971416)
   bytes Transferred      0
  +cause                  ErrorException (id=830029535888)
   detailMessage          null
  +stackState             (id=830027970928)
   stackTrace             null
  +suppressedExceptions   ArrayList(id=830027971456) 
```

* * *

现在我知道这是服务器没有按时回答的异常原因。（感谢Class Stacker）。所以我评论这一行“clientSocket.setSoTimeout(100);” 等了很久才发现还是卡住了。

我不知道在运行 AVD 时是否应该连接一些设备，或者它只能在 AVD 上运行。

我查看变量“clientSocket”，它的子内容“地址”为空，“端口”在“clientSocket.send(question);”这一行之后为 -1。这是一个正确的结果吗？（我在android包网站上阅读了类的解释，但仍然不明白[。http://developer.android.com/reference/java/net/DatagramSocket.html](http://developer.android.com/reference/java/net/DatagramSocket.html)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:22:52.420

如前所述，您没有为此测试创建单独的线程。这个“假客户端”代码在服务器应用程序中运行，在应该服务 PING 请求并提供 PONG 响应的同一线程中。

一种快速的解决方案是将此代码包装在 a中`Runnable`并为其单独启动一个`Thread`。一个快速开始的例子是（暂时放弃结果，

```
# start your concurrent request on-the-fly
Thread serverTest = new Thread(new Runnable() { public void run() { isServerRunning(); }});
serverTest.start(); 
```

但是请研究有关并发、`synchronized`使用`volatile`和`HandlerThread`而`AsyncTask`不是`Thread`在 Android 上的详细信息。

# android - 如何使用 InputFilter 在 Android 中的 EditText 中最大字符数？

> ID：14474881
> 
> 赞同：2
> 
> 时间：2013-01-23T07:58:57.660
> 
> 标签：android, android-edittext

```
<RelativeLayout
    android:id="@+id/tab1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip" >

    <EditText
        android:id="@+id/txtMarketName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:focusableInTouchMode="true"
        android:textColor="@android:color/black"
        android:textSize="17sp" />

    <ImageView
        android:id="@+id/imgDelete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dip"
        android:focusableInTouchMode="true"
        android:scaleType="fitXY"
        android:src="@drawable/edit_clr_tab" />
</RelativeLayout> 
```

xml 看起来像：

![在此处输入图像描述](../Images/0391a844d30a74c4e2cc8d186721bfc7.png)

Java 代码：

```
public class EditTextLocker {
private EditText editText;

private int charactersLimit;

public EditTextLocker(EditText editText) {

    this.editText = editText;

    editText.setOnKeyListener(editTextOnKeyListener);
}

private OnKeyListener editTextOnKeyListener = new OnKeyListener() {

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_DEL) {
            startStopEditing(false);
        }

        return false;
    }
};

private TextWatcher editTextWatcherForCharacterLimits = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {            

        if (!editText.getText().toString().equalsIgnoreCase("")) {

            int editTextLength = editText.getText().toString().trim()
                    .length();

            if (editTextLength >= charactersLimit) {

                startStopEditing(true);

            }

        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
};

public void limitCharacters(final int limit) {

    this.charactersLimit = limit;
    editText.addTextChangedListener(editTextWatcherForCharacterLimits);
}

public void unlockEditText() {

    startStopEditing(false);
}

public void startStopEditing(boolean isLock) {

    System.out.println("Start Stop Edit ==============> : " + isLock);

    if (isLock) {

        editText.setFilters(new InputFilter[] { new InputFilter() {
            @Override
            public CharSequence filter(CharSequence source, int start,
                    int end, Spanned dest, int dstart, int dend) {

                return len < 1 ? dest.subSequence(dstart, dend)
                        : "";
            }
        } });

    } else {

        editText.setFilters(new InputFilter[] { new InputFilter() {
            @Override
            public CharSequence filter(CharSequence source, int start,
                    int end, Spanned dest, int dstart, int dend) {
                return null;
            }
        } });
    }
}
} 
```

主要活动：

```
public class MainActivity extends Activity {
EditText editText1;
ImageView imageView1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    editText1 = (EditText) findViewById(R.id.txtMarketName);

    imageView1 = (ImageView) findViewById(R.id.imgDelete);

    final EditTextLocker locker1 = new EditTextLocker(editText1);
    locker1.limitCharacters(60);

     editText1.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            if (!hasFocus) {
                imageView1.setVisibility(View.INVISIBLE);
            } else {
                imageView1.setVisibility(View.VISIBLE);
            }
        }
    });

    imageView1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            editText1.setText("");
        }
    });
}
} 
```

问题是在 60 个字符后停止出现，但它仍然继续输入，除了文本没有出现，但是，它确实出现在“缓冲区”中（意思是建议的东西）

另一个问题是，在调用 imageview1 onClick 事件后，类型是继续，但文本不显示在编辑文本中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:03:31.477

以下代码片段将帮助您为我处理输入文件管理器，它的工作原理就像一个魅力

```
 InputFilter filter = new InputFilter() { 
        public CharSequence filter(CharSequence source, int start, int end, 
Spanned dest, int dstart, int dend) { 
                for (int i = start; i < end; i++) { 
                        if (!Character.isLetterOrDigit(source.charAt(i))) { 
                                return ""; 
                        } 
                } 
                return null; 
        } 
}; 

edit.setFilters(new InputFilter[]{filter}); 
```

# html - 如何添加百分比宽度的滚动？

> ID：14474892
> 
> 赞同：2
> 
> 时间：2013-01-23T07:59:49.700
> 
> 标签：html, css

我需要将滚动添加到 div。问题是witch is text中的div必须是百分比。因此，如果名称很长，我需要在父级中滚动它。

![滚动](../Images/4d9bc70721c52235298d407e10f7e057.png)

**HTML：**

```
<div id="list">
    <div class="info">
        <div class="image">
            <img src="https://dl.dropbox.com/u/14396564/no_camera.jpg">     </div>
        <div class="text_data">Intell. off. ch. 1 with a very very very long</div>
    </div>

    <div class="info">
        <div class="image">
            <img src="https://dl.dropbox.com/u/14396564/no_camera.jpg">
        </div>
        <div class="text_data">Intell. off.</div>
    </div>
</div> 
```

**CSS：**

```
#list{
    max-height:200px;
    overflow-y:auto;
    padding:5px;
    /*display: none;*/
}

.info{
    border: 1px dashed #CCCCCC;
    margin-bottom: 5px;
    padding:5px;
    overflow: hidden;
    cursor: pointer;
}

.info .image{
    width:20%;
    display:inline-block;
    margin-right:20px;
    /*border: 1px solid red;*/
}

.info .image img{
    width: 100%;
}

.info .text_data{
    display: inline-block;
    /*border: 1px solid green;*/
    vertical-align: top;
    overflow-x: auto !important; 
} 
```

**[jsfiddle.net](http://jsfiddle.net/nonamez/2DLqq/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:28:49.127

如果您希望文本始终显示在图像的右侧而不换行，则需要将 div 的`white-space`属性设置为`nowrap`.

[新的 jsFiddle](http://jsfiddle.net/2DLqq/4/)

所以这是新的 CSS `class="info"`（其余不变）。

```
.info{
    border: 1px dashed #CCCCCC;
    margin-bottom: 5px;
    padding:5px;
    overflow: auto;
    cursor: pointer;
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:11:45.137

这里：http: [//jsfiddle.net/2DLqq/3/](http://jsfiddle.net/2DLqq/3/)

**编辑**（在图像的一侧，垂直滚动）：http: [//jsfiddle.net/2DLqq/6/](http://jsfiddle.net/2DLqq/6/)

**编辑**（在图像的一侧，水平滚动）：http: [//jsfiddle.net/2DLqq/7/](http://jsfiddle.net/2DLqq/7/)

您需要在 .text_data 周围添加一个容器 div 并将容器设置为 overflow-x:auto; 和空白：nowrap；所以它是一行文本，而不是换行到第二行。

```
<div class="text_data_container">
     <div class="text_data">
          Your really, really, really, really, really, really long string of text.
     </div>
</div> 
```

CSS：

```
.text_data_container {
     overflow-x:auto;
     width:100%;
}

.text_data {
     display:inline-block;
     white-space:nowrap;
} 
```

还有你的“垂直对齐：顶部；” 在您的原始 .text_data 中无效，因为它仅适用于图像。

# macos - GNU SCREEN - MAC OS X 10.8.2 的 USB 串行 tty 通信问题

> ID：14474893
> 
> 赞同：2
> 
> 时间：2013-01-23T07:59:49.463
> 
> 标签：macos, serial-port, gnu-screen

我们成功地使用 Windows 7 上的 Putty 和 LINUx 上的 GNU 屏幕管理 USB 到串行通信，但使用 MAC OS 上的终端/屏幕有一半未能做到这一点。

在 LINUX windows 机器上需要简单的基本通信设置：

> 57600 bps，8 位，无奇偶校验，无流量控制

该设备成功安装并按照此处所述进行了配置（抱歉，法语）：

> 产品标识符：0x6160
> 
> 标识符 dufournisseur：0x03eb（爱特梅尔公司）
> 
> 版本：1.10
> 
> Vitesse:Jusqu'à 12 Mb/s
> 
> 位置标识符：0x06200000 / 2
> 
> Courant 可分配性 (mA):500
> 
> Courant 要求 (mA):0

一个 cu.usbmodem621 和一个 tty.usbmodem621 确实出现在 ls /dev/tty* 或 ls /dev/cu* 的列表中

我们在 terminal.app 上使用以下屏幕命令激活屏幕

> 屏幕 /dev/tty.usbmodem621 57600

或者

> 须藤屏幕/dev/tty.usbmodem 57600

最初不存在 screenrc 文件，我最终创建了一个来微调终端设置并确保没有流量控制：

> defscrollback 5000
> 
> termcapinfo xterm* ti@:te@
> 
> 关闭回流
> 
> hardstatus alwayslastline "%{rk}%H %{gk}%c %{yk}%M%d %{wk}%?%-Lw%?%{bw}%n*%f %t%?(%u )%?%{wk}%?%+Lw%?"

我试过没有特定的驱动程序，然后使用以下 2 个参考

FTDI [http://www.ftdichip.com/FTDrivers.htm](http://www.ftdichip.com/FTDrivers.htm)

多产 PL2303 [http://osx-pl2303.sourceforge.net/](http://osx-pl2303.sourceforge.net/)

我还根据 LINUX 机器复制并粘贴了 stty -a 上列出的所有设置。他们来了 ：

> 速度 57600 波特；92行；145列；
> 
> lflags: icanon isig iexten echo echoe echok echoke -echonl echoctl -echort -altwerase -noflsh -tostop -flusho pendin -nokerninfo -extproc
> 
> iflags：-itrip icrnl -inlcr -igncr ixon -ixoff ixany imaxbel iutf8 -ignbrk brkint -inpck -ignpar -parmrk
> 
> 滞后： opost onlcr -oxtabs -onocr -onlret
> 
> cflags: cread cs8 -parenb -parodd hupcl -clocal -cstopb -crtscts -dsrflow -dtrflow -mdmbuf
> 
> cchars: 丢弃 = ^O; dsusp = ^Y; eof = ^D; eol = ; eol2 = ; 擦除 = ^?; 内部 = ^C; 杀死 = ^U; 下一个 = ^V; 最小值 = 1; 退出 = ^\; 重印=^R；开始 = ^Q; 状态 = ^T; 停止 = ^S; 悬念 = ^Z; 时间=0；错误 = ^W;

在所有情况下，设备都能正确接收并解释我们从屏幕终端窗口发送的所有命令，但屏幕无法显示来自设备的任何通信。

我已经尝试过 Goserial 和 Zterm，结果相同。

任何暗示发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T13:16:18.340

串行通信的[常见缺陷包括：](https://learn.sparkfun.com/tutorials/serial-communication/all#common-pitfalls)

*   RX 到 TX，TX 到 RX
*   波特率不匹配
*   总线争用（例如 getty 进程；cf. `sudo lsof /dev/tty.usbmodem`）
*   溢出（芯片缓冲区；字符进入串行通信芯片太快时发生）
*   通信参数错误
*   帧错误（波特率、奇偶校验、数据位和/或停止位可能不正确）
*   奇偶校验错误
*   ...（参见 cisco 的“串行线路故障排除”）

使用的替代方法`screen`是使用`picocom`/`setserial`或`cu -l /dev/tty.usbmodem -s 9600` （用于故障排除）。

要获得虚拟串行端口进行故障排除`screen`，您可以使用以下内容：

```
socat GOPEN:/dev/ptyp0,ignoreeof TCP:10.0.1.93:10002 
```

确保没有使用流量控制（硬件或软件）。

有关“在 Mac OS X 中设置串行控制台”的更多信息，请参见[此处](http://www.club.cc.cmu.edu/~mdille3/doc/mac_osx_serial_console.html)（例如`.plist`，开始的文件`getty`; `screen /dev/cu.usbserial 115200 8N1`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:57:14.893

[在http://changux.co/osx-installer-to-pl2303-serial-usb-on-osx-mou](http://changux.co/osx-installer-to-pl2303-serial-usb-on-osx-mou)有一个“OSX 安装到 PL2303 Serial-USB on Mountain Lion” 。还可以使用来自 MacPorts 的最新 GNU 屏幕进行测试。

# hadoop - 如何使用 Hadoop 中的 HadoopRpcRequestProto 请求字段对方法参数进行编码

> ID：14474895
> 
> 赞同：0
> 
> 时间：2013-01-23T08:00:01.843
> 
> 标签：hadoop, rpc, protocol-buffers

Hadoop RPC 引擎使用协议缓冲区来编码/解码来自线路的字节。

我正在尝试使用 HadoopRpcRequestProto 在 Hadoop 服务器上调用一个方法

```
HadoopRpcRequestProto rpcReHadoopRpcRequestProtoquest;
    HadoopRpcRequestProto.Builder builder =   HadoopRpcRequestProto.newBuilder();
    builder.setMethodName("foo"); 
```

所以如果我的“foo”方法有两个参数，foo(String name, int num);

如何对参数进行编码并将它们设置为 HadoopRpcRequestProto 的请求字段？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:10:55.813

你应该能够做这样的事情：

```
private HadoopRpcRequestProto constructRpcRequest(Method method, Object paramObj) {
  HadoopRpcRequestProto rpcRequest;
  HadoopRpcRequestProto.Builder builder = HadoopRpcRequestProto
      .newBuilder();
  builder.setMethodName(method.getName());

  Message param = (Message) paramObj;
  builder.setRequest(param.toByteString());
  rpcRequest = builder.build();
  return rpcRequest;
} 
```

对于`Message`我们正在谈论的课程`com.google.protobuf.Message`。我认为您需要编写一个 .proto 文件并使用`protoc`after 编译它以生成 Java 绑定，然后您可以在 Java 代码中使用它。例如，一个 .proto 文件可能如下所示：

```
message Person {
  required int32 id = 1;
  required string name = 2;
  optional string email = 3;
} 
```

如果你这样做了，`protoc myperson.proto`那么这将生成一个名为的类`MyPerson.java`，它的内部类`Person`如下所示：

```
public static final class Person extends
  com.google.protobuf.GeneratedMessage
  implements PersonOrBuilder {
   ...
} 
```

这个`GeneratedMessage`类扩展了我上面提到`AbstractMessage`的接口。`Message`所以基本上你可以创建你的`Person`对象，然后你应该能够使用`builder.setRequest(person.toByteString())`.

# c++ - C++ 在一个文件中定义类并在另一个文件中转发声明

> ID：14474905
> 
> 赞同：3
> 
> 时间：2013-01-23T08:00:31.773
> 
> 标签：c++, oop, class, forward-declaration

在 C++ 中这样做是否合法/建议

```
//Interface.h
#ifndef INTERFACE_H
#define INTERFACE_H
    #include "WinImplementation.h"
    #include "NixImplementation.h"
    class Interface {
        class WinImplementation;
        class NixImplementation;
    }
#endif

//WinImplementation.h
#ifndef WINIMPLEMENTATION_H
#define WINIMPLEMENTATION_H
    #include "Interface.h"
    class Interface::WinImplementation {}
#endif

//NixImplementation.h
#ifndef NIXIMPLEMENTATION_H
#define NIXIMPLEMENTATION_H
    #include "Interface.h"
    class Interface::NixImplementation {}
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:34:06.187

是的，您可以在 C++ 中转发声明嵌套类。以下示例直接取自 C++ 标准（第 9.7.3 节）：

```
class E
{
    class I1;     // forward declaration of nested class
    class I2;
    class I1 {};  // definition of nested class
};
class E::I2 {};   // definition of nested class 
```

# youtube - 我有一个 youtube 网址，使用它可以在我的网站上显示视频

> ID：14474909
> 
> 赞同：1
> 
> 时间：2013-01-23T08:00:38.327
> 
> 标签：youtube

我有一个 youtube**网址**，使用它可以在我的网站上显示视频。例如： [http](http://www.youtube.com/watch?v=XXXXXXXX) ://www.youtube.com/watch?v= XXXXXXXX 假设这是我的视频链接。我已将其保存在我的数据库中。我需要在我的网站上展示这个视频，因为我必须写什么代码。（我正在我的 html 页面中检索该代码，但它没有使用嵌入显示视频）。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:05:10.217

单击**共享**，然后单击**嵌入**。从那里拿走它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:06:14.100

您可以拥有 iFrame 并在其中加载视频。

```
<iframe width="500" height="500"
src="http://www.youtube.com/watch?v=XXXXXXXX">
</iframe> 
```

或者你可以像嵌入视频

```
<embed
width="500" height="500"
src="http://www.youtube.com/watch?v=XXXXXXXX"
type="application/x-shockwave-flash">
</embed> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:04:36.817

使用 iframe 嵌入

```
<iframe width="560" height="315" src="/* YOUR YOUTUBE URL*/" frameborder="0" 
    ></iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T09:22:00.870

我总是做以下这对我很有用的事情。因为 youtube 可以有多个 url，例如“ [http://www.youtube.com/watch?v=XXXXXXXX](http://www.youtube.com/watch?v=XXXXXXXX) ”或“ [http://www.youtube.com/v/XXXXXXXX](http://www.youtube.com/v/XXXXXXXX) ”，所以我使用 parse_url 和 parse_str 来获取视频 ID .

```
<?php $youtube_url =  'http://www.youtube.com/watch?v=XXXXXXXX';
parse_str(parse_url($youtube_url, PHP_URL_QUERY), $youtube); ?>

<object width="400" height="224">
<param name="movie" value="https://www.youtube-nocookie.com/v/<?= $youtube['v'] ?>"></param>
<param name="allowFullScreen" value="true"></param>
<param name="allowscriptaccess" value="always"></param>
<embed src="https://www.youtube-nocookie.com/v/<?= $youtube['v'] ?>" type="application/x-shockwave-flash" width="400" height="224" allowscriptaccess="always" allowfullscreen="true"></embed>
</object> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:08:41.287

我会说，您必须修改字符串并将其放入：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/XXXX" frameborder="0" allowfullscreen></iframe> 
```

*因此，将=*之后的所有内容拆分并使用 PHP 或任何其他语言将其粘贴到此源中。您也可以使用 JavaScript 执行此操作。

# jquery - FancyBox 加载器图像始终显示

> ID：14474915
> 
> 赞同：0
> 
> 时间：2013-01-23T08:01:17.773
> 
> 标签：jquery, wordpress, fancybox, fancybox-2

我已经加载了适当的fancybox 脚本和样式表，并初始化了我能做的最简单的fancy box 版本。我以前从未遇到过这个问题，并且代码在 JSfiddle 中运行良好，但是这次我在有意触发任何花哨的框之前，加载图标正好出现在页面中间。

[http://www.michaladarling.com/](http://www.michaladarling.com/)

然后，当我单击底部的小缩略图以启动精美的框时，我在控制台中收到错误消息：

未捕获的类型错误：对象 # 没有方法“onCleanup”

一定有什么小东西掉了，我就是看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:40:51.367

“ ***...在有意触发任何花哨的框之前，我的加载图标正好出现在页面中间。*** ”

那不是fancybox 的加载图标，而是nivoslider 的加载图标。**[在这里检查](http://www.michaladarling.com/wp-content/themes/clean/images/nivo-slider/loading.gif)**。

* * *

***“...我在控制台中收到错误消息：”***

```
Uncaught TypeError: Object # has no method 'onCleanup' 
```

**[当您在此处看到](https://stackoverflow.com/q/4468348/1055987)**的 fancybox css 文件丢失时会生成该错误。

在您的特定情况下，您正在使用**[fancybox v2.1.4 css 文件](http://www.michaladarling.com/wp-content/themes/clean-child/js/fancybox/jquery.fancybox.css)**和**[fancybox v2.1.3 js 文件](http://www.michaladarling.com/wp-content/themes/clean-child/js/fancybox/jquery.fancybox.pack.js)**......所以存在版本不匹配。

只需将fancybox js文件升级到v2.1.4

# templates - BIP 模板中的动态图像？

> ID：14474927
> 
> 赞同：0
> 
> 时间：2013-01-23T08:02:04.067
> 
> 标签：templates, rtf, bi-publisher

我们在共享路径中有一组图像。在查询中，我们编写了一个逻辑，它将为我们提供图像的路径，例如**\\path\Logos\ test.jpg**。在 RTF 模板中，我们使用了一个将**Alt Text**设置为图像路径的虚拟图像，例如**url:{PATH_FIELD}**。在运行时，出现的是我们需要的图像，而不是虚拟图像。这仅在输出为 HTML 时才有效。我们需要输出为 PDF 格式。对于 PDF 输出，图像未显示。它只显示一个白色的空白区域。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T12:16:43.927

在替代文本中，路径字段应具有完整路径，如 url:{DATA_DS/GROUP_TAG_NAME/PATH_FIELD}。我希望这将适用于 PDF 输出

# javascript - 跳过“#”正则表达式Javascript

> ID：14474929
> 
> 赞同：0
> 
> 时间：2013-01-23T08:02:06.357
> 
> 标签：javascript, regex

我想跳过使用 javascript 的评论。我只能得到相反的结果，这意味着不要跳过评论。以下语法：

```
#GSM settings\r\n   <----- Skip these
Apn internet\r\n
Pass \r\n
User \r\n
Pin \r\n
Dial *99#\r\n
KeepAlive 0\r\n
#ETH TEST\r\n                  <---- skip
Mac 00:60:37:12:34:56\r\n
EthIpv4 192.168.0.10\r\n
Subnet 255.255.255.0\r\n
Gwip 192.168.0.1\r\n
Autoip 0\r\n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:11:40.190

我不确定我是否理解 100%，如果你想匹配不以“#”开头的行，你可以这样做：

```
/^(?!#).*/ 
```

仅当字符串开始后没有紧跟“#”时才匹配。

[在 Regexr 上](http://regexr.com?33ge7)查看

`(?!#)`是一个[否定的前瞻断言](http://www.regular-expressions.info/lookaround.html)，如果该位置后面有一个“#”，则该断言失败。由于它在`^`锚点之后，如果第一个字符是“#”，则整个表达式将失败。

如果“#”之前可以有空格，您可以像这样添加它们：

```
/^(?!\s*#).*/ 
```

[在 Regexr 上](http://regexr.com?33ged)查看

# php - PHP `exec` 在后台但获得 STDOUT

> ID：14474932
> 
> 赞同：0
> 
> 时间：2013-01-23T08:02:30.940
> 
> 标签：php, background, exec, fork

我正在尝试通过 PHP 执行命令（在 Windows 和 Linux 中）。我的目标是让命令的多个实例同时运行（因此是背景），但我还需要获取每个实例的输出。

这不起作用，因为无法抓取输出。

```
function execInBackground($cmd) { 
    if (substr(php_uname(), 0, 7) == "Windows"){ 
        pclose(popen("start /B ". $cmd, "r"));  
    } 
    else { 
        exec($cmd . " > /dev/null &");   
    } 
} 
```

分叉会帮助我吗？我在后台看到[PHP exec 使用 & 也不起作用，](https://stackoverflow.com/questions/14412190/php-exec-in-background-using-is-not-working)但又在哪里获得输出？

任何想法都会很棒！

编辑：我们使用的是 PHP v5.2，不能使用其他 PHP 版本！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:16:53.927

为了兼容 Linux 和 Windows 环境，您可以使用[Symfony2 Process 组件](http://symfony.com/doc/master/components/process.html)。它将允许您在轻松获取输出的同时运行代码后台：

```
use Symfony\Component\Process\Process;

$process = new Process($cmd);
$process->start(function ($type, $buffer) {
    if ('err' === $type) {
        // Do something with error $buffer
    } else {
        // Do something with normal $input
    }
});

// Do something else

// Wait until the process completes
$process->wait(); 
```

请注意，您应该使用`$process->start()`而不是`$process->run()`允许后台执行。

更多链接：

*   [来自 Symfony 主分支的进程 API](http://api.symfony.com/master/Symfony/Component/Process/Process.html)（今天的 2.2 开发版）
*   [如何在后台运行自定义 Symfony2 命令](https://stackoverflow.com/questions/13802822/how-to-run-custom-symfony2-command-in-background)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:04:47.950

使用 & 执行命令并输出到文件：

```
exec($cmd . " > output".$NumberOfInstance.".txt &"); 
```

之后，您可以在完成后阅读内容。

```
exec($cmd . " > output".$NumberOfInstance.".txt ; php phpscriptwhereyouchecktheoutputfilewithaverylongname.php&"); 
```

尝试在第一个命令结束后执行 PHP 脚本，使用**;** 指令之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:19:15.430

如果使用“Windows PowerShell”或 run>cmd 来执行命令，您将很容易获得输出。它会立即返回结果，如果您想让输出进行处理，这不是一个好的解决方案，它只是用于测试结果

在window和linux中执行命令的另一种情况：

```
if (getenv('OS')=='Windows_NT'){
        exec($pathToFileExecute.$command);
    }
    else {
        exec($command);
    } 
```

$pathToFileExcute 在 linux ex 上是不需要的
： $pathToFileExecute = 'E:^\Setup^\wamp^\bin^\mysql^\mysql5.5.20^\bin^\';

# ruby - 使用 Mechanize 对象获取“证书验证失败（OpenSSL::SSL::SSLError）”错误

> ID：14474937
> 
> 赞同：0
> 
> 时间：2013-01-23T08:02:54.723
> 
> 标签：ruby, ssl, windows-xp, ssl-certificate, mechanize

对于以下代码`certificate verify failed (OpenSSL::SSL::SSLError)`：

***代码***

```
require 'mechanize'

agent = Mechanize.new

#{|a| a.ssl_version, a.verify_mode = 'SSLv3', OpenSSL::SSL::VERIFY_NONE}

agent.set_proxy('3.209.30.25', 80)
agent.ssl_version='SSLv3'
agent.verify_mode= OpenSSL::SSL::VERIFY_PEER

page = agent.get "https://gegsltraining.aravo.com/" 
```

***错误***

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persist
ent/ssl_reuse.rb:70:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 rea
d server certificate B: certificate verify failed (OpenSSL::SSL::SSLError) 
```

***编辑***

我只是修改了代码如下：

```
require 'mechanize'
agent = Mechanize.new
#{|a| a.ssl_version, a.verify_mode = 'SSLv3', OpenSSL::SSL::VERIFY_NONE}
agent.set_proxy('3.209.30.25', 80)
agent.ssl_version='SSLv3'
cert_store = OpenSSL::X509::Store.new
cert_store.add_file 'E:\WIPData\Ruby\Scripts\cacert.pem'
agent.cert_store = cert_store
agent.verify_mode= OpenSSL::SSL::VERIFY_PEER (tried OpenSSL::SSL::VERIFY_NONE none of them going good) 
```

***新错误***

```
E:\WIPData\Ruby\Scripts>mechanizev1.rb
C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2632:in `error!': 500 "Internal Server Err
or" (Net::HTTPFatalError) 
```

如何成功完成认证验证？帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:44:51.297

只需将您的机械化代理 object.http.ca_file 设置为指向此文件。

```
agent.agent.http.ca_file = '/etc/ssl/certs/curl-ca-bundle.crt' 
```

否则，将 curl-ca-bundle.crt 保存在 app lib 目录中，然后设置

```
agent.agent.http.ca_file = 'lib/curl-ca-bundle.crt' 
```

# css - css 控制 HTML EMAILS 中的字体大小

> ID：14474938
> 
> 赞同：9
> 
> 时间：2013-01-23T08:03:03.547
> 
> 标签：css, html-email, font-size

**有没有办法让 HTML EMAILS 中的字体保持相似的大小？**

在网站上它看起来很棒，但在我的电子邮件中，文本非常小而且靠得很近。

[现场演示](http://EdVizenor.com/rosary/email/HailMary.php)

我附上了我在电子邮件中看到的屏幕截图。![在此处输入图像描述](../Images/67085a407c1b615906179f30c9afe90d.png)

有任何解决这个问题的方法吗？

**这是html代码：**

```
<html>
<head>
<title>The Most Holy Rosary</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
#Table_01 tr td #box {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 16px;
    line-height: 24px;
}
</style>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<!-- Save for Web Slices (Holy Mary Email copy.psd) -->
<table width="843" height="855" border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
        <td colspan="2" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_01.png" width="546" height="253" alt=""></td>
        <td width="297" rowspan="3" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_02.png" width="297" height="855" alt=""></td>
    </tr>
    <tr>
        <td width="11" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_03.png" width="11" height="565" alt=""></td>
        <td width="535" valign="top"><table width="95%" border="0" align="center" cellpadding="0" cellspacing="15" id="box">
          <tr>
            <td valign="top"><p style="font-weight: bold; color: #666;">PRAISE BE JESUS CHRIST!</p>
            <p><br>
              Thank you for taking the time to read this email. We are developing some exciting media to help you and others fall even more in love with JESUS through the power of Mary, the Queen of Heaven (Revelations 12) and through Heaven's blessed gift to us... The Most Holy Rosary. </p>
            <p>We need your help if you can. We need you to answer some quick questions on the Rosary. Also once on the page can you &quot;like&quot; it on Facebook, Tweet it and finally forward this email to friends who may be interested. Awesome! Thank you so much.</p>
            <p align="center"><a href="http://www.EdVizenor.com/?p=questions"><img src="http://www.EdVizenor.com/rosary/email/images/HolyRosary.png" width="364" height="67"></a></p>
            <p>Be assured of my prayers for you and all your intentions in my Rosary.</p>
            <p>In The Merciful Heart Of Jesus Christ,<br>
            <span style="color: #666">Ed Vizenor </span></p></td>
          </tr>
      </table></td>
    </tr>
    <tr>
        <td colspan="2" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_05.png" width="546" height="37" alt=""></td>
    </tr>
</table>
<!-- End Save for Web Slices -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T08:08:12.783

始终为电子邮件提供 **内联样式**。电子邮件不支持外部样式。像这样写：

```
<table style="font-size:16px" width="843" height="855" border="0" align="center" cellpadding="0" cellspacing="0"></table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:28:45.610

对于电子邮件，将所有字体 css 内联在字体标签、跨度标签或`<td>`包含您的文本中。

```
<font style="color:#770000;">This will always work</font> 
```

```
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td style="color:#770000;">
      So will this.  
    </td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T20:02:10.940

我正在发布有效的代码。我在桌子上做了“INLINE STYLES”，但没有用，所以我把“INLINE STYLES”放在所有段落上。在我的电子邮件客户端中看起来不错。

只有一个小问题，那就是左边的图像，左边的文本空白旁边的栏，就像 gmail 中的一个像素。修不了那个混蛋。

好的，这是有效的代码

```
<html>
<head>
<title>Holy Mary Email copy</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<!-- Save for Web Slices (Holy Mary Email copy.psd) -->
<table width="843" height="855" border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
        <td colspan="2" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_01.png" width="546" height="253" alt=""></td>
        <td width="297" rowspan="3" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_02.png" width="297" height="855" alt=""></td>
    </tr>
    <tr>
        <td width="11" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_03.png" width="11" height="565" alt=""></td>
        <td width="535" valign="top"><table width="95%" border="0" align="center" cellpadding="0" cellspacing="0" id="box">
          <tr>
            <td valign="top"><p style="font-family: Tahoma, Geneva, sans-serif; font-weight: bold; color: #666; font-size: 17px">PRAISE BE JESUS CHRIST!</p>
              <p><span style="font-family: Verdana, Geneva, sans-serif; font-size: 17px">Thank you for taking the time to read this email. We are developing some exciting media to help you and others fall even more in love with JESUS through the power of Mary, the Queen of Heaven (Revelations 12) and through Heaven's blessed gift to us... The Most Holy Rosary. <br>
                <br>
                </span><span style="font-family: Verdana, Geneva, sans-serif; font-size: 17px">We need your help if you can. We need you to answer some quick questions on the Rosary. Also once on the page can you &quot;like&quot; it on Facebook, Tweet it and finally forward this email to friends who may be interested? Awesome! Thank you so much.</span></p>
              <span style="font-family: Verdana, Geneva, sans-serif; font-size: 17px">
                <p align="center"><a href="http://www.EdVizenor.com/?p=questions"><img src="http://www.EdVizenor.com/rosary/email/images/HolyRosary.png" alt="" width="364" height="67"></a></p>
              </span>
              <p><span style="font-family: Verdana, Geneva, sans-serif; font-size: 17px">Be assured of my prayers for you and all your intentions in my Rosary.</span></p>
              <p><span style="font-family: Verdana, Geneva, sans-serif; font-size: 17px">In The Merciful Heart Of Jesus Christ,</span><br>
                <span style="color: #666">Ed Vizenor </span> </td>
          </tr>
        </table></td>
    </tr>
    <tr>
        <td colspan="2" valign="top">
            <img src="http://www.EdVizenor.com/rosary/email/images/HailMary_05.png" width="546" height="37" alt=""></td>
    </tr>
</table>
<!-- End Save for Web Slices -->
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T13:37:50.820

那里！为了避免 Gmail 中的图像间距问题（Hotmail 中也会出现这种情况），您必须 `display=block`在图像中添加内联 CSS 样式。就像这样：

```
img src="http://webserver.com/image.jpeg" alt="" style="display:block;" 
```

# php - CakePHP 2：AclBehavior 调用非对象上的成员函数 node()

> ID：14474939
> 
> 赞同：0
> 
> 时间：2013-01-23T08:03:15.593
> 
> 标签：php, cakephp-2.0, acl

```
class User extends AppModel {
    public $actsAs = array('Acl' => array('type' => 'requester'), 'Containable');
    ...
} 
```

当我尝试删除用户时：

```
Fatal error: Call to a member function node() on a non-object in ...\AclBehavior.php on line 89 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T07:36:38.453

你的控制器中有这条线吗..？

```
public $components = array('Acl'); 
```

# javascript - 使用 jQuery 从 json 中获取值，而不使用 foreach 循环

> ID：14474940
> 
> 赞同：2
> 
> 时间：2013-01-23T08:03:18.403
> 
> 标签：javascript, jquery, json

```
I have a json string like 
{
"Msg1": "message 1",
"Msg2": "message 3",
"Msg3": "message 2"
} 
```

我正在使用以下代码

```
 function GetMessages(msg) {
   $.getJSON("./jquery/sample.json", function (result) {
        $.each(result, function (key, val) {
            if (key == msg) {
                alert(val);
            }
        });
} 
```

有没有其他方法可以检查我的键是否存在于结果数组中并在不使用 foreach 循环的情况下获取它的值？eval() 可以做点什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:05:08.720

如果您知道属性名称，则可以直接访问它，而无需遍历其属性：

```
var msg = 'Msg2';

$.getJSON('./jquery/sample.json', function (result) {
    alert(result[msg]);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T08:11:52.967

使用`in` [运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)。

```
function GetMessages(msg) {
   $.getJSON("./jquery/sample.json", function (result) {
       if (msg in result) {
           alert(result[msg]);
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:15:47.773

检查它是否存在

```
result["your_key"] !== undefined // as undefined is not a valid value this workes always
result.your_key !== undefined // works too but only if there aren't any special chars in it 
```

并且获取值是相同的，但没有比较操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:29:44.070

当你使用 $.getJSON 时，你会得到一个内部对象，所以你可以使用多种方式来判断：

```
if(result['msg']){
    alert(result['msg']);
}
//
if(typeof result['msg']!=='undefined'){
    ...
} 
//
if('msg' in result){
    ...
}
//
if(result.hasOwnProperty('msg')){
    ...
} 
```

仔细考虑随时使用 eval()，它是 eve.sorry，我的英语很差，我希望它对你有用。thx！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T08:10:09.987

您可以使用 parseJSON

```
var obj = $.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# mysql - 主键和外键是否在同一张表中

> ID：14474942
> 
> 赞同：0
> 
> 时间：2013-01-23T08:03:34.853
> 
> 标签：mysql, foreign-keys, foreign-key-relationship

我有一个类别字段。每个类别最多有一个父级。哪个设计更好？

1）一张表：category_parent为外键（与category_id相关），category_id为主键

```
category_id | category_parent | category_name 
```

2）两个表

表格1

```
catgory_id | category_name 
```

表2

```
id | category | category_parent 
```

category,category_parent 为外键（与 category_id 相关），category_id 为主键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:08:18.450

你说每个节点只有父节点。对于您的要求，第一个选择是更好的设计。

仅当您需要一个节点具有多个父节点时，才真正强制使用第二个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:13:04.723

显然第一个，因为每个节点只有一个父节点。因此，不会有冗余，因为类别名称不能重复。

如果可以有多个父级，则类别名称将在表中重复。在这种情况下，您将创建两个表。

# javascript - JavaScript 数组迭代方法

> ID：14474950
> 
> 赞同：1
> 
> 时间：2013-01-23T08:03:58.520
> 
> 标签：javascript

我有一个遍历所有项目的 for 循环：

```
for (i=0; i < this.widgets.length; i++) {
  this.changeWidgetArray(this.widgets[i]); 
} 
```

在 for 循环中，对于每个元素，我调用“changeWidgetArray”。在这种方法中，改变了上面的“widgets”-Array。“changeWidgetArray”中的这种数组更改是否会影响循环迭代？

我的问题是：

目前，当迭代从第一项开始时，是整个数组及其所有元素都“收集”，还是 JavaScript 在下一个迭代步骤开始之前动态地一个一个地获取。

还是这取决于 JavaScript 实现？这是在 ECMA 脚本规范中定义的吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:05:57.877

**是**：

```
for (i=0; i < this.widgets.length; i++) {
  this.changeWidgetArray(); 
} 
```

**否**：

```
for (var i=0, max=this.widgets.length; i < max; i++) {
  this.changeWidgetArray(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:06:19.537

在循环迭代期间，**没有**变量被**缓存**。（除非你自己在临时变量中这样做）

因此，每次评估时，`this.widgets.length`将是数组的确切长度，因为每次更改数组时都会更新 的值。`widgets``length`

您可以通过将长度分配给这样的临时变量来缓存长度：

```
for (var i=0, l = this.widgets.length; i < l; i++) { 
```

但这*可能*是个坏主意，因为您正在循环中更改数组，可能会使您指向数组中的无效索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:09:04.020

每次修改它包含的集合时，数组长度都会更新。任何时候你引用array.length，它都会反映数组的当前大小。

出于这个原因，以及许多性能优势，您应该始终这样编写代码：

```
for(var i = 0, l = array.length; i < l; i++){
  // Do stuff with array[l]
} 
```

如果您这样做（假设您遍历的方向无关紧要），您还可以获得更多性能：

```
var l = array.length;
while(l--){
  // Do stuff with array[l]
} 
```

# makefile - 将多个makefile转换为一个makefile

> ID：14474952
> 
> 赞同：0
> 
> 时间：2013-01-23T08:04:06.290
> 
> 标签：makefile, gnu-make

我只是写了一些纯c程序来练习，每个小程序都有一个`XXX.h`文件`XXX.c`文件和`XXX_test.c`带有main函数的文件。该`XXX.c`文件和该文件`XXX_test.c`都可能包含其他一些`YYY.h`文件。我使用 gcc -MM`XXX_test.c`自动查找文件的依赖关系。最后，我想出了makefile（使用GNU makefile）`XXX.mk`：

```
# change your targets to your real targets
MINGW := MINGW32_NT-6.1
CC = gcc
OFLAG = -o 
CFLAGS = -Wall -g -DDEBUG
# get the dependent header files and change their name to source files
TARGET := XXX_test
FILES := $(filter %.c %.h, $(shell gcc -MM $(addsuffix .c, $(TARGET))))
SRCS := $(FILES:.h=.c)
DEPS := $(SRCS:.c=.d)
OBJECTS := $(SRCS:.c=.o)

#determine the os platform
ifdef SystemRoot
   ifeq ($(shell uname), ${MINGW})
      RM = rm -f
      FixPath = $1
   else
      RM = del /Q
      FixPath = $(subst /,\,$1)
   endif
else
   ifeq ($(shell uname), Linux)
      RM = rm -f
      FixPath = $1
   endif
endif

all: ${TARGET}
# include .d files generated by gcc -MMD opt
-include $(DEPS)
# to generate the .o files as well as the .d files
%.o:%.c
    $(CC) $(CFLAGS) -c -MMD $< -o $@

# generate the executable program
${TARGET}: ${OBJECTS}
    ${CC} $^ ${OFLAG} $@

.PHONY:clean
# the "$" is not needed before "FixPath"
clean:
    $(RM) $(call FixPath, ${OBJECTS} ${DEPS}) 
```

每个小程序都有一个`XXX.mk`文件。它们几乎相同，只是变量中的内容`TARGET`不同（参见上面的makefile）。所以我有`XXX.mk`，`YYY.mk`等等......我想问的问题是**如何将所有的makefile，即`XXX.mk`......`YYY.mk`转换成一个makefile？**例如，分配给`generic.mk`的变量`TARGETS`（注意） 。我觉得难以处理的是：`S``XXX_test YYY_test ...``variable dependencies`

```
TARGET --> OBJECTS --> SRCS --> FILES --> TARGET(the FILES is generate by gcc using -MM opt)
                         ↓
                        DEPS(used to include the .d files) 
```

每个目标（例如 XXX_test）都应该依赖于它们的一堆文件。我想看看 GNU makefile 的强大功能，我该怎么做呢？我正在学习使用 gmake。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:40:29.243

正如您所发现的，您遇到的主要问题是，从 DEPS 扩展 OBJECTS 不适用于多个目标。

解决此问题的一种可能性是使用两阶段方法，其中第二阶段仅处理构建单个二进制文件（并进行所有依赖项跟踪和二进制对象编译），第一阶段为每个给定的二进制文件调用第二阶段。

此解决方案涉及*两个*Makefile（不完全符合您的要求，但仍然如此）：

生成文件：

```
TARGETS = XXX_test YYY_test ZZZ_test XYZ_test
CLEANTARGETS=$(TARGETS:=_clean)

all: $(TARGETS)
clean: $(CLEANTARGETS)

$(TARGETS) $(CLEANTARGETS):
        make -f Makefile.sub $@

.PHONY: all clean $(CLEANTARGETS) 
```

这个 makefile 只是调用另一个 make 程序来构建作为参数和辅助 Makefile.sub：

```
# change your targets to your real targets
MINGW := MINGW32_NT-6.1
CC = gcc
OFLAG = -o 
CFLAGS = -Wall -g -DDEBUG
# get the dependent header files and change their name to source files
TARGET=$(MAKECMDGOALS:_clean=)
FILES= $(filter %.c %.h, $(shell gcc -MM $(addsuffix .c, $(TARGET))))
SRCS= $(patsubst %.h,%.c,$(filter %.c %.h, $(shell gcc -MM $(addsuffix .c, $(TARGET)))))

DEPS= $(SRCS:.c=.d)
OBJECTS= $(SRCS:.c=.o)

#determine the os platform
ifdef SystemRoot
   ifeq ($(shell uname), $(MINGW))
      RM = rm -f
      FixPath = $1
   else
      RM = del /Q
      FixPath = $(subst /,\,$1)
   endif
else
   ifeq ($(shell uname), Linux)
      RM = rm -f
      FixPath = $1
   endif
endif

# include .d files generated by gcc -MMD opt
-include $(DEPS)
# to generate the .o files as well as the .d files
%.o:%.c
    $(CC) $(CFLAGS) -c -MMD $< -o $@

# generate the executable program
$(TARGET): $(OBJECTS)
    $(CC) $^ $(OFLAG) $@

.PHONY:clean
# the "$" is not needed before "FixPath"
clean:
    $(RM) $(call FixPath, $(OBJECTS) $(DEPS))

$(TARGET)_clean: clean 
```

如果您坚持使用单个 Makefile，那么恐怕您必须手动进行依赖跟踪。更常见的构建系统之一是 autotools，您必须自己提供每个二进制文件的源代码（要运行以下内容，您需要安装 autotools；运行`autoreconf`以生成`configure`并`Makefile.in`从以下代码；然后运行`./configure`以创建跨平台 Makefile） ：

生成文件.am：

```
 bin_PROGRAMS = XXX_test YYY_test
 XXX_test_SOURCES = XXX_test.c XXX.c
 YYY_test_SOURCES = YYY_test.c YYY.c 
```

配置.ac：

```
AC_INIT([XYZ],[0.1])
AM_INIT_AUTOMAKE($PACKAGE_NAME,$PACKAGE_VERSION)
AC_CONFIG_FILES([Makefile])
AC_PROG_INSTALL
AC_LANG_C
AC_PROG_CC
AC_OUTPUT 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T11:56:37.863

目标/依赖项可以是多值的。如果您指定

```
 TARGET := XXX_test XXY_test XYZ_test XZY_test 
```

然后运行`make all`（这是默认设置，因为`all`它是 Makefile 中的第一个目标；因此您也可以简单地运行`make`），将为您构建所有这些 ???_test 文件。

# objective-c - 如何使用 quicklook 插件分发 App

> ID：14474961
> 
> 赞同：3
> 
> 时间：2013-01-23T08:04:53.707
> 
> 标签：objective-c, xcode, macos, app-store, quicklook

我用 Quick Look 插件完成了 myApp。然后我在 xcode 中添加了一个 bulid 阶段，将插件复制到 myApp.app/Library/QuickLook/ 。现在我想将它分发到应用商店，我发现存档文件 xxx.xcarchive 有两个产品：plugin 和 myApp。而且我无法分发到 App Store ......

有人遇到过这样的问题吗？我应该手动复制插件吗？或者 AppStore 不接受带有 QuickLook 插件的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:05:10.680

您应该将您的构建设置设置`Skip Install`为`Yes`您`Release`构建的 quicklook 插件目标。

![在此处输入图像描述](../Images/7ab0cf2f0993e99d6b1f84d062be3cc3.png)

# c++ - 如何在 MFC 对话框中显示网格线？（不在设计中，但在运行对话框时）

> ID：14474971
> 
> 赞同：1
> 
> 时间：2013-01-23T08:05:16.610
> 
> 标签：c++, visual-c++, mfc, dialog

我正在 MFC 中开发自定义对话编辑器。

我想在运行 dilaog 时在 MFC dilaog 上显示网格线（在 DoModal 上）

如何在 MFC 中实现这一点？有什么要设置的属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:09:35.263

不，网格仅在设计时使用，在运行时根本不存在。

你可以自己画一些水平线和垂直线......

# node.js - 仅在某些路径上的 Node.js 客户端证书身份验证

> ID：14474972
> 
> 赞同：7
> 
> 时间：2013-01-23T08:05:19.307
> 
> 标签：node.js, ssl, https, x509

我有一个`node.js`基于 Web 应用程序，需要`https`来自客户端的安全 ( ) 连接。我想要的是在某些路径上需要客户端证书身份验证，而在其他路径上则不需要。

举个例子。如果用户访问[https://www.example.com/main](https://www.example.com/main)，则服务器不需要客户端证书身份验证（因此浏览器不会询问任何内容）。但是如果用户导航到[https://www.example.com/secure](https://www.example.com/secure)，则需要客户端证书身份验证（因此浏览器将弹出一个对话框以选择要使用的证书）。

我怎样才能做到这一点。如果我通过`requestCert:true`和 选项`rejectUnauthorized:true`，我可以强制客户端证书身份验证。`https.createServer`这种方法的问题是每个路径都需要客户端证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-17T11:22:33.697

我认为可以通过使用与 express 兼容的 Node.js 包 http-proxy-middleware（我们正在使用的 Web 服务器包）设置反向代理/API 网关来解决这个问题。

如 Node.js 包主页上的示例所示，可以这样完成： 1\. 根据 http-proxy-middleware 使用的约定定义 UNAUTH 和 AUTH API 的重定向，并在下一步中使用。

2.  在所需端口（例如 3000）上启动一个快速 HTTPS 网络服务器，并将 http-proxy-middleware 配置为充当反向代理/API 网关。无需在 https.createServer 选项中设置 requestCert 和 rejectUnauthorized。

3.  在另一个端口（比如 3001）上启动一个快速 HTTPS 网络服务器来服务 UNAUTH API 请求。无需在 https.createServer 选项中设置 requestCert 和 rejectUnauthorized。

4.  在另一个端口（比如 3002）上启动一个快速 HTTPS 网络服务器来服务 AUTH API 请求。将 requestCert:true 和 rejectUnauthorized:true 设置为 https.createServer 选项。

UNAUTH 请求将从 3000 到 3001 来回路由，AUTH 请求将从 3000 到 3002 来回路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-12T07:51:40.450

您可以通过 TLS 重新协商来实现此目的，但不幸的是，TLS 1.3 不支持此功能，因此您必须禁用它：

```
https
    .createServer(
        {
            // configure key, cert, ca,
            secureOptions: require('constants').SSL_OP_NO_TLSv1_3,
        },
        function (req, res) {
            if (req.url.startsWith('/secure')) {
                req.socket.renegotiate(
                    {
                        requestCert: true,
                        rejectUnauthorized: true,
                    },
                    err => {
                        if (err) {
                            console.log('Renegotiation failed', err);
                            res.writeHead(500);
                            res.end('Internal Server Error');

                            return;
                        }

                        // handle secure content
                    },
                );
            } else {
                // handle main content
            }
        },
    )
    .listen(443); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T03:40:22.627

我来到这里是因为我正在处理同样的问题，并将分享我正在采取的方法。对于要求用户使用有效证书进行身份验证的端点，我使用附加到需要证书的端点的自定义路径，并验证用户是否已使用证书进行身份验证，如果他们正在访问遵循该路径的任何端点（假定为 express 应用程序）。IE：

```
app.use('/api/cert', function(req, res, next){
    //validate that any token passed in the request was generated for a valid
    //cert login, otherwise reject request

    //pseudo-code
    if(isValidCertToken(req.authentication.token)) {
        next(); //this will pass it on to the correct endpoint in the /api/cert/[whatever] chain
    } else {
        req.status(401).send({error: 'invalid login, cert required'});
    }
}); 
```

这将要求您允许用户通过将`requestCert`标志设置为 true 来使用证书进行身份验证，但如果用户不希望使用“需要证书”端点，只要`rejectUnauthorized`设置为 false ，也将允许其他身份验证方法设置 https 连接时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:09:47.953

我不确定我是否完全理解你想要什么.. 但根据我的理解，如果你使用 express，你可以通过一个简单的中间件来管理这个东西。在那个中间件中，你可以跟踪来自 http 的任一请求或 https 通过这个

HTTPS 连接具有 req.connection.encrypted（包含有关 SSL 连接信息的对象）。HTTP 连接没有 req.connection.encrypted。

另外（来自文档）：

使用 HTTPS 支持，使用 request.connection.verifyPeer() 和 request.connection.getPeerCertificate() 获取客户端的身份验证详细信息。

我希望这有帮助..

# groovy - 如何下载文件？- 时髦的

> ID：14474973
> 
> 赞同：8
> 
> 时间：2013-01-23T08:05:26.673
> 
> 标签：groovy, https, download

我需要下载一个文件（例如：[https](https://www.betaseries.com/srt/391160) ://www.betaseries.com/srt/391160 ），所以我在网上找到了不同的方法：

```
def download(String remoteUrl, String localUrl)
{
    def file = new FileOutputStream(localUrl)
    def out = new BufferedOutputStream(file)
    out << new URL(remoteUrl).openStream()
    out.close()
} 
```

或者

```
def download(String remoteUrl, String localUrl) {
  new File("$localUrl").withOutputStream { out ->
      new URL(remoteUrl).withInputStream { from ->  out << from; }
  }
} 
```

我看到文件已创建但文件大小始终等于 1KB 我该如何修复它？

预先感谢，

本杰明

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T10:22:53.960

因此，看起来 url [https://www.betaseries.com/srt/391160](https://www.betaseries.com/srt/391160)重定向到[http://www.betaseries.com/srt/391160](http://www.betaseries.com/srt/391160)（http，不是 https）

所以你抓住的是重定向响应（1K）而不是完整的响应图像。

您可以这样做以获得实际图像：

```
def redirectFollowingDownload( String url, String filename ) {
  while( url ) {
    new URL( url ).openConnection().with { conn ->
      conn.instanceFollowRedirects = false
      url = conn.getHeaderField( "Location" )      
      if( !url ) {
        new File( filename ).withOutputStream { out ->
          conn.inputStream.with { inp ->
            out << inp
            inp.close()
          }
        }
      }
    }
  }
} 
```

# xml - 使用正则表达式在 Netbeans 中进行 XML 验证

> ID：14474977
> 
> 赞同：0
> 
> 时间：2013-01-23T08:05:50.350
> 
> 标签：xml, regex, xsd

我有一个看起来像这样的字符串......

```
 1-Jan-1970 01:00:00 
```

这可以以空格开头（就像这个一样），如果数据是两位数，则可以以数字开头。

我在 XSD 文件中构造了一个正则表达式来创建一个简单的 Timestamp 类型，如下所示；

```
<xs:simpleType name="Timestamp">
    <xs:restriction base="xs:token">
        <xs:pattern value="( [1-9]|[1-3][0-9])-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-[1-2][0-9][0-9][0-9] [0-2][0-9]:[0-5][0-9]:[0-5][0-9]"/>
    </xs:restriction>
</xs:simpleType> 
```

如果我采用这个正则表达式和给出的示例字符串，并在[http://www.regextester.com/](http://www.regextester.com/)中进行测试，它就可以工作。

但是，如果我尝试使用它验证一些 XML，它适用于所有具有两位数的日期，但不适用于带有空格的日期（如上所示）

有人可以给我指导一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:38:21.260

[令牌](http://www.w3.org/TR/xmlschema-2/#token)数据类型从其词法空间中排除带有前导和尾随空格的字符串。

将 xs:string（或某些没有将空格方面设置为 的字符串派生类型`collapse`）而不是 xs:token 命名为基本类型。

# opencv - OpenCV：计算一组 cv::Mat 的统计模式

> ID：14474978
> 
> 赞同：2
> 
> 时间：2013-01-23T08:05:52.603
> 
> 标签：opencv, mode

我正在使用以下内容来获取一组 cv::Mat 的统计模式：

```
vector<Mat> imgs(30);
...
...

Mat mode = Mat::zeros(imgRows, imgCols, CV_8U);
for(int i=0;i<mode.rows;i++)
{
    for(int j=0;j<mode.cols;j++)
    {
        vector<int>count(256,0);
        int maxIndex=0, maxCount=0;
        int index;
        for(int n=0;n<imgs.size();n++)
        {
            index = imgs[n].at<uchar>(i,j);
            count[index]++;
            if(count[index] > maxCount)
            {
                maxCount = count[index];
                maxIndex = index;
            }
        }
        mode.at<uchar>(i,j) = maxIndex;
    }
} 
```

还有其他方法可以更有效地计算模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T04:18:19.940

计算直方图并使用直方图中的峰值。您可以修改[opencv已经提供的代码](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)来计算模式。此页面还解释了直方图和使用它的不同方法。

# java - 查询 LocalDateTime

> ID：14474985
> 
> 赞同：3
> 
> 时间：2013-01-23T08:06:28.243
> 
> 标签：java, mysql, hibernate, datetime, jodatime

我在 MySQL 中有一个包含 DateTime 数据类型的记录的表（例如 2013-01-17 21:16:06），而在我的实体上，我选择 LocalDateTime 数据类型作为日期字段。在我的查询中，我想只检索基于 2 个日期的所有记录（使用日期选择器的 fromDate 和 toDate）。假设我为 fromDate 和 toDate 选择了相同的日期，问题是两个值都是相同的，因为时间是 00:00:00，因此从数据库中没有给出任何结果。

我很好奇我是否使用了来自 Joda 的正确数据类型。我是否需要调整这两个值的时间让我们说 fromDate 00:00:00 和 toDate 23:59:59 ？或者有什么更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:29:19.513

给定一个日期时间列和两个任意日期作为输入，您可以编写：

```
SELECT * FROM `table`
WHERE `datetime` >= @startDate
AND   `dateTime` <  @endDate + INTERVAL 1 DAY 
```

在哪里：

*   startDate 是开始日期，包括
*   endDate 是结束日期，不包括

上面的意思最好通过以下案例来解释：

1.  要查看`2013-01-17`（一天）的所有记录 startDate 应该是`2013-01-17`并且 endDate 应该是`2013-01-17`
2.  要查看`2013-01-17`- `2013-01-18`（两天） startDate 应该是`2013-01-17`并且 endDate 应该是的所有记录`2013-01-18`。

这使得选择日期变得直观。该`<`符号确保计算的结束日期从结果中排除（例如，在第一种情况下，查询省略了 `2013-01-18 00:00:00 记录）。

# shell - 从ini文件中获取值并修改shell脚本中的值

> ID：14474987
> 
> 赞同：0
> 
> 时间：2013-01-23T08:06:34.583
> 
> 标签：shell

我正在创建从`.ini`文件中获取值并修改该值的 shell 脚本。

在 ini 文件中，值保存为以下结构：

```
key1 = value1 
```

我在 shell 中得到 value1

```
SHELL_VALUE = ${key1} 
```

还可以，我进去`value1`了`SHELL_VALUE`。

但是，我使用以下语法连接`SHELL_VALUE`一个值`ab`

```
FINAL_VALUE = ${SHELL_VALUE}"ab". 
```

我想要结果，`value1ab`但现在我得到`ablue1`了，前两个 char`va`被`ab`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:16:04.610

您可以使用

```
 `FINAL_VALUE = "${SHELL_VALUE}ab"` 
```

代替

```
 `FINAL_VALUE = ${SHELL_VALUE}"ab"` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T12:02:26.287

还要注意你的发行版上应该可用的 crudini。您可以使用它以更可靠的方式从 ini 文件中获取值

# php - SQl：如果日期为空，则获取所有行

> ID：14474990
> 
> 赞同：0
> 
> 时间：2013-01-23T08:06:45.267
> 
> 标签：php, mysql

我正在编写一个 php 函数，其中我采用 2 个参数，`start_date`并且`end_date`

我还想如果两个日期都为 Null，那么这个函数应该返回所有行

这是我的mysql查询

```
select COUNT(*) from demo_meeting where meeting_datetime > "2013-01-01 OR NULL" and  meeting_datetime < "2013-09-10 OR NULL"; 
```

如果两个日期都可用，如果我将两个日期都用作 NULL，则此查询工作正常，它返回零行。

请告诉我如何改进此查询，以便如果两个日期均为 NULL，则它可以返回所有会议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:10:21.020

```
if (empty($start_date) &&  empty($end_date)){
     $sql="select COUNT(*) from demo_meeting where meeting_datetime > '$start_date' and  meeting_datetime < '$end_date'";
}else{
     $sql="select COUNT(*) from demo_meeting";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:52:28.697

`richardo`给出了很好的解决方案，但你也可以这样做：

```
select COUNT(*) from demo_meeting
where (meeting_datetime > "2013-01-01" and  meeting_datetime < "2013-09-10") 
      or (meeting_datetime  is null); 
```

# mysql - 具有值的返回行存在于两行中

> ID：14474998
> 
> 赞同：2
> 
> 时间：2013-01-23T08:07:12.323
> 
> 标签：mysql, sql

```
+------+------+------------+------+
| id   | type| design| location   |
+------+------+------------+------+
|    1 | abc |    A  | Location X |
|    2 | abc |    A  | Location Y |
|    3 | def |    A  | Location X |
+------+------+------------+------+ 
```

我有上面的桌子。

假设我想获取位置 X 和 Y 中存在的类型。它应该返回第 1 行和第 2 行。

我应该使用什么 sql？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:09:28.417

```
SELECT type
FROM    tableName
WHERE   location IN ('location x','location y')
GROUP   BY type
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c6862/3)

或者，如果您想拥有所有这些值，请使用`JOIn`

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
          SELECT  type
          FROM    tableName
          WHERE   location IN ('location x','location y')
          GROUP   BY type
          HAVING  COUNT(*) = 2
        ) b ON a.type = b.type 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c6862/4)

资源

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:32:30.783

如果您只需要检索两者中都存在的类型，您应该这样做

```
 select [type] 
    from ur_table 
    where location = 'Location X'
    intersect 
    select [type] 
    from ur_table 
    where location = 'Location Y' 
```

但如果你真的需要来自 2 行的所有数据.. 试试

```
 select id,[type],design, location 
    from ur_table L
    where L.[type] in (select [type] from ur_table where location = 'Location X'
                       intersect select [type] from ur_table where location = 'Location Y'
                       ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:09:28.907

```
SELECT *
FROM table1
WHERE type IN(SELECT type
              FROM table1
              WHERE location IN('location X', 'location y')
              GROUP BY type
              HAVING COUNT(type) = 2
             ); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/7c67c/2)

这会给你：

```
| ID | TYPE | DESIGN |   LOCATION |
-----------------------------------
|  1 |  abc |      A | Location X |
|  2 |  abc |      A | Location Y | 
```

# yii - 如何在验证/保存之前更正用户输入？

> ID：14474999
> 
> 赞同：3
> 
> 时间：2013-01-23T08:07:21.200
> 
> 标签：yii

我的表单中有一个价格字段，它将以十进制格式保存到数据库中。

现在，如果用户键入逗号' **，** '不是点' **。**'，我怎样才能悄悄地替换它，以便正确保存？例如，而不是`12,34`，将被保存`12.34`，而不是`12.00`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T10:38:27.613

[`CFilterValidator`](http://www.yiiframework.com/doc/api/1.1/CFilterValidator)如果在验证发生时使用 a 将输入从字符串自动转换为浮点值，这可能是最简单的；其余的应该照顾好自己。

所以你的模型会有

```
public function rules() {
    return array(
        array('price', 'filter', 'filter' => 'convertToFloat'),
    );
} 
```

过滤功能类似于

```
function convertToFloat($value) {
    return floatval(trim(str_replace(',', '.', $value)));
} 
```

您还可以将过滤函数指定为任何有效的[可调用](http://php.net/manual/en/language.types.callable.php)函数，例如使其成为模型方法并将其指定为

```
'filter' => array($this, 'convertToFloat') 
```