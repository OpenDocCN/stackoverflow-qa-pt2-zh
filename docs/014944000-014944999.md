# StackOverflow 问答 14944000-14944999

# android - Nexus 7、Nexus 4 NFC

> ID：14944002
> 
> 赞同：-5
> 
> 时间：2013-02-18T19:37:48.063
> 
> 标签：android, nfc

我知道他们可以读取 NFC 标签。但是这个设备可以写入 NFC 标签吗？你有人这个设备之一吗？有使用 NFC 标签的经验吗？谢谢回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:54:51.000

是的，这两款设备都可以写入 NFC 标签。您需要额外的软件。在 Google Play 上浏览 nfc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:16:36.547

您可以读取和写入标签，也可以使用这些设备（或大多数启用 NFC 的智能设备），您可以在这些设备之间创建对等通信。

关于 NFC 的 Android 文档非常好[http://developer.android.com/guide/topics/connectivity/nfc/index.html](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

另外，请查看此链接以读取和写入标签 [http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html#read-write](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html#read-write)

# java - 在 Java 的 ArrayList 中的类对象内保留一个独立的 ID 计数器

> ID：14944003
> 
> 赞同：2
> 
> 时间：2013-02-18T19:37:49.453
> 
> 标签：java, database, arraylist

抱歉，我对编程知之甚少，但我现在正在尝试通过尝试 Java 来学习。我非常雄心勃勃地尝试编写一个桌面应用程序，该应用程序将来也将成为一个 Web 应用程序。当然，我希望这 2 个应用程序能够相互同步。

我在想象，比方说.. 任务列表管理员。对于 Web 应用程序，我将使用 MySQL 作为数据库。但是在我的桌面应用程序中，我想我会使用 ArrayList 作为数据库。（或者有没有办法让我使用一些 Java DB 而不是类？）

如果我目前走错了路，我还处于发展的初期，所以我可以很容易地改变方向。但本质上，我有一个类任务和一个类数据库来保存任务。

在我试图保持与 MySQL 记录配对的一致 ID 的想法中，我试图存储一个 taskID。我有一些工作要做，但我也不认为这是最好的解决方案。我只是在看看是否有人可以指出我可以研究和/或应该尝试的不同且更有效的方向。

这是我到目前为止编译的代码：

```
import java.util.ArrayList;

public class Todos {

    public static class Database {
        private ArrayList<Task> database = new ArrayList<Task>();
        private int taskCounter = 0;

        /*
        // This above taskCounter is not being incremented inside my
        // addTask method, so I had put the for-loop in there..

        public boolean addTask(Task task)
        {
            boolean addItemSuccessful = false;
            int originalArraySize = database.size();
            taskCounter++;
            database.add(task);
            if (database.size() > originalArraySize)
            {
                addItemSuccessful = true;
            }
            return addItemSuccessful;
        }
        */

        public boolean addTask(Task task)
        {
            boolean addItemSuccessful = false;
            int originalArraySize = database.size();
            int taskID = 0;
            for(int i = 0; i < database.size(); i++) {
                if (database.get(i).taskID > taskID) {
                    taskID = database.get(i).taskID;
                    System.out.println(taskID);
                }
            }
            taskID++;
            task.setTaskID(taskID);
            System.out.println(taskID);
            database.add(task);
            if (database.size() > originalArraySize)
            {
                addItemSuccessful = true;
            }
            return addItemSuccessful;
        }

        public boolean removeTask(int taskID) {
            // This code is actually not correct, here but this is the idea.
            boolean removeItemSuccessful = false;
            int originalArraySize = database.size();
            database.remove(taskID);
            if (database.size() < originalArraySize)
            {
                removeItemSuccessful = true;
            }
            return removeItemSuccessful;
        }

    }

    public static class Task {

        private int taskID;
        private String task;
        private Priority priority = Priority.ZERO;

        public enum Priority { ZERO, MAYBE, LOW, MEDIUM, HIGH, EXTREME }

        public void setTaskID(int taskID) {
            this.taskID = taskID;
        }
        // .. Other Getters and Setters for Task
    }

    public static void main(String[] args) {

        Database database = new Database();
        Task newTask = new Task();

        database.addTask(newTask);  // Add 1st Task, taskID = 1
        database.addTask(newTask);  // Add 2nd Task, taskID = 2
        database.addTask(newTask);  // Add 3rd Task, taskID = 3
        database.removeTask(2);     // Remove Task 2
        database.addTask(newTask);  // Add 4th Task, taskID = 4

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:20:25.327

当您在数据库中插入新条目时，数据库会自动分配一个自动增量 ID（我认为您也可以选择您的 ID，但您不应该选择）。如果您没有特定原因，我建议您不要将其包含在 的字段中`Task`，而是将其用作索引来访问和定位您的`ArrayList`，或者可能更明确地使用`HashMap <Integer, Task>`. 否则，您可以创建一个静态字段来生成您的自动增量 ID 或继续您的方式。

# php - 使用 mysql_num_rows 时的 udefined 变量

> ID：14944006
> 
> 赞同：0
> 
> 时间：2013-02-18T19:38:01.853
> 
> 标签：php, mysql

我遇到了变量问题。似乎我必须始终在使用 $variable 之前对其进行初始化。这很烦人。$username_check=mysql_num_rows($sql_username_check); 这里它说注意：未定义的变量：c：//中的用户名检查注意：未定义的变量：c：//中的电子邮件检查我正在检查数据库中的重复数据。不幸的是，它正在添加相同的数据:(有人可以帮助我吗？

```
// Database duplicate Fields Check
        $sql_username_check = mysql_query("SELECT user_id FROM users WHERE user_username='$username' LIMIT 1");
        $sql_email_check = mysql_query("SELECT user_id FROM users WHERE user_email='$email' LIMIT 1");
        if($sql_username_check != "")
            if(isset($username_check))
                $username_check= mysql_num_rows($sql_username_check);
        if($sql_email_check != "")
            if(isset($email_check))
                $email_check = mysql_num_rows($sql_email_check); 
        if ($username_check > 0){ 
            $errorMsg = "<u>ERROR:</u><br />Your User Name is already in use inside of our system. Please try another.";
        } 
        else if ($email_check > 0){ 
            $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:43:39.913

你有一些非常奇怪的代码，但你可以试试这个：

```
 $sql_username_check = mysql_query("SELECT user_id FROM users WHERE user_username='$username' LIMIT 1");
    $sql_email_check = mysql_query("SELECT user_id FROM users WHERE user_email='$email' LIMIT 1");

    if($sql_username_check)
      $username_check= mysql_num_rows($sql_username_check);

    if($sql_email_check)
      $email_check = mysql_num_rows($sql_email_check); 

    if (isset($username_check) && $username_check > 0){ 
        $errorMsg = "<u>ERROR:</u><br />Your User Name is already in use inside of our system. Please try another.";
    } else if (isset($email_check) && $email_check > 0){ 
        $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:46:47.960

问题似乎从这里开始：

```
$sql_username_check = mysql_query("SELECT user_id FROM users WHERE user_username='$username' LIMIT 1");
$sql_email_check = mysql_query("SELECT user_id FROM users WHERE user_email='$email' LIMIT 1"); 
```

函数调用不返回字符串，因此您在下面的比较并没有按照您的想法进行。导致错误的行可能是这些：

```
if ($username_check > 0){ 
        $errorMsg = "<u>ERROR:</u><br />Your User Name is already in use inside of our system. Please try another.";
    } 
    else if ($email_check > 0){ 
        $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";
    } 
```

从我从您的示例中读到的内容，我想不出任何方式可以在这里设置`$username_check`和`$email_check`设置，这样您就不会收到这些通知）。

您真正需要做的是了解如何处理来自数据库的结果集，包括数据库错误处理。

在您阅读这些内容时，您应该继续并转储您对`mysql_*`函数的使用，因为它们已被弃用并学习使用`mysqli`或`PDO`哪些是 PHP 中最流行的首选数据库库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:48:21.367

```
if(isset($username_check)) 
```

这是在`$username_check`分配之前使用的，这就是为什么会有通知。

试试这样的代码：

```
$sql_username_check = mysql_query("SELECT user_id FROM users WHERE user_username='$username' LIMIT 1");
        $sql_email_check = mysql_query("SELECT user_id FROM users WHERE user_email='$email' LIMIT 1");
        if($sql_username_check != "")
            $username_check= mysql_num_rows($sql_username_check);
        if($sql_email_check != "")
            $email_check = mysql_num_rows($sql_email_check); 
        if ($username_check > 0){ 
            $errorMsg = "<u>ERROR:</u><br />Your User Name is already in use inside of our system. Please try another.";
        } 
        else if ($email_check > 0){ 
            $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T19:41:39.313

您需要在 PHP 中调整错误报告设置。例如像这样：

```
error_reporting (E_ALL & ~E_NOTICE & ~E_STRICT); 
```

# php - 使用PHP和JS在div中显示图片

> ID：14944007
> 
> 赞同：0
> 
> 时间：2013-02-18T19:38:07.660
> 
> 标签：php, javascript, jquery, html, mysql

### 免责声明：这是一个任务。我不是要求明确的代码。我只想要足够的信息，以便我可以理解手头的任务并学习相关部分。

我正在做一项任务，要求我通过表单接受姓名和图片，将两者放入数据库，然后在表单下方显示数据库中的所有姓名。名称应该是可点击的，点击后，在名称下方的 div 中显示它们各自的图片。

我已经足够将名称和图像存储在数据库中（我知道，将图像存储在数据库中很糟糕，但这是任务的一部分。）我必须完成的最后一部分是链接和图像显示。

我决定以一种相当鲁莽的方式为每个名称赋予其自己的 div：

```
for ($i = 0; $i < $nrows; $i++) {
    $name = htmlspecialchars(mysql_result($results, $i, "first_name")). " " .htmlspecialchars(mysql_result($results, $i, "last_name"));
    echo "<div id='".$name."'>";
    echo $name;
    echo "</div>";
} 
```

所以这就像一个表格，除了每个 div 都有一个唯一的 ID（人的名字，虽然我可以将其更改为数字 ID。）我认为为每个 div 提供点击功能是相当基本的，基于它的唯一ID，但我不确定是否应该在循环范围内或外部执行此操作...

此外，我不完全确定如何设置单击功能来选择特定名称的图像。每个图像都存储为 LONGBLOB，因此需要在显示之前将其编码为图像形式。我知道 base64_encode 应该适用于此，但我似乎无法将它放在我的脑海中。

如果您需要更多我的代码，请告诉我 - 我很乐意提供。否则，感谢您的时间和帮助。

### 编辑#1（上午 11:44，2/18/13）：

```
$('#$name').click(function() {
    $("#image-div").html("<img src='data:image/jpeg;base64,'.base64_encode(mysql_result($results, $i, 'photo')).'>");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:47:35.570

1.  给 div 一个类，然后你可以`jQuery.on`通过类选择器来分配你的点击处理程序
2.  要检索您的图像，您需要创建一个*控制器*以使用正确的内容类型标头将图像向下推送到客户端；这使您的图像标签看起来像：`<img src="image.php?name=theimagename" />`

**更新**：

您不想将 id 直接放在 js 中……您想使用可以从处理程序中获得的某种属性。例如：

```
<div id="theimagename" data-image-id="1">
</div> 
```

然后从处理程序中，您可以获得的值`data-image-id`并将其发送到 php.ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:49:15.540

对于每个`<div id="name">`，还添加`onclick`如下处理程序：

`<div onclick="getImage(this.id)" id="name">`

那么该`getImage()`函数可以具有以下内容：

```
function getImage(name){
  console.log(id)
  //Now you have the name of the image you need
} 
```

# matlab - Matlab中根据函数值过滤矩阵行

> ID：14944010
> 
> 赞同：2
> 
> 时间：2013-02-18T19:38:16.317
> 
> 标签：matlab, matrix, filter, row

这似乎是一个简单的问题，但我一直无法在任何地方找到答案。如果我有一个`A`由任意数量的行组成的 Matlab 矩阵，我将如何根据某个函数的值`f`（其参数是行向量）过滤这些行？换句话说，我将如何只保留为的`A`矩阵`f`行`true`？我试过

```
A(f(A(:)), :) 
```

但没有成功。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:07:29.477

正如[Dan](https://stackoverflow.com/a/14951554/1714410)回答的那样，您可以根据逻辑向量过滤矩阵的行。让`selectRows`是一个逻辑向量，`numel(selectRows) == size(A,1)`其中包含`true`要保留`false`的行和要丢弃的行。然后：

```
A( ~selectRows, : ) = []; 
```

将删除所有行`selectRows == false`。

现在，问题是如何`selectRows`使用函数生成逻辑向量`f`？

如果`f`知道如何处理多行，并相应地返回多个`true`/`false`值，那么

```
selectRows = f(A); 
```

应该做的伎俩。

但是，如果`f`只知道如何一次处理一行，则需要遍历这些行。这样做的一种方法是

```
selectRows = cellfun( @f, mat2cell( A, ones(size(A,1)), size(A,2) ) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:57:11.067

这个问题有点不清楚（你应该提供你的过滤标准），但听起来你只需要利用 Matlab 的逻辑索引。

试试这个非常人为的例子：

```
A = rand(7)
A = A(logical([1 1 0 0 0 1 1]), :) 
```

在这里，我通过告诉 Matlab 保留哪些行和哪些列（在我们的例子中都是）来过滤掉第 3 - 5 行。

您可以通过创建向量作为条件来避免丑陋的转换：

```
A = rand(5)
A([1 0 1 1 0] == 1, :) 
```

当然，如果我们知道您的过滤条件，那么以这种方式创建逻辑索引会简单得多。例如，假设您要过滤总和大于 10 的所有行。第 1 步是找到这些行（要保留的行或要过滤的行，没关系）：

```
rowsToFilter = sum(A, 2) > 10; 
```

在没有 的命令行中尝试，`;`你会看到它沿行求和（`2`在 sum 参数中），并且只选择那些大于`10`创建逻辑向量（Matlab 的布尔类型）的那些。现在过滤 A 它只是：

```
A(rowsToFilter, :) = []; 
```

= [] 将我们要过滤的行设置为空向量，Matlab 将其理解为从矩阵中删除这些元素。

您可以通过选择要保留的行来做同样的事情，如下所示：

```
rowsToKeep = sum(A, 2) <= 10;
A = A(rowsToKeep, :); 
```

您会注意到最后一种形式与您尝试使用的形式非常相似`f(A) = sum(A, 2) <= 10`

# ms-access - 代码未正确执行，但似乎没有引发错误

> ID：14944013
> 
> 赞同：1
> 
> 时间：2013-02-18T19:38:23.930
> 
> 标签：ms-access, vb6, dao, jet

最近有 2 次，与以下基本相同的代码未能正确执行。

在同一时间范围内，它也会正常执行数百次。

有两次打印单据，但没有记录添加到数据库中，也没有向用户报告错误。

我无法理解这怎么可能。

发生错误的计算机通过有线网络连接到一个共享的 Jet 数据库，其中大约有 8 台计算机。

```
On Error GoTo ErrorHandler1

BeginTrans
Dim RS as RecordSet
Dim strRS as string

strRS = "Select * from Blah"

Set RS = DB.OpenRecordset(strRS)

RS.AddNew
RS.Fields("Date1").value =  Now
RS.Fields("OpID").value =  intOpId
RS.Update                              

PrintSlip Now, intOpId                 
CommitTrans

Exit Sub

ErrorHandler1:
Rollback
MsgBox "There has been an error" 
```

他们最近用新的电缆和机器升级了他们的网络，但我看不出有任何原因，特别是为什么这可能是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:39:24.333

[`QueryDef`](http://www.upsizing.co.uk/Art26_RecordSets.aspx)您可以使用对象来添加记录，而不是依赖于引发的错误，然后测试`.RecordsAffected`属性以查看实际添加了多少记录。

这里有一些细节： [如何从 Access VBA 中的更新查询提示中获取值？](https://stackoverflow.com/questions/343396/how-can-i-get-a-value-from-the-update-query-prompt-in-access-vba)

总结一下：

1.  [创建一个带有两个参数](http://www.techonthenet.com/access/queries/parameter3.php)、`[TheDate]`和的追加查询`[TheOpID]`
2.  运行如下所示的代码：

：

```
Dim qdf As New QueryDef
Set qdf = DB.QueryDefs("qappMyCoolParameterQuery")
With qdf
    !TheDate = Now
    !TheOpID = intOpId
    .Execute
    If .RecordsAffected = 0 Then
        'Freak Out, alert user, etc
    End If
End With 
```

# c# - 修改WPF中按钮的图片颜色

> ID：14944016
> 
> 赞同：1
> 
> 时间：2013-02-18T19:38:32.057
> 
> 标签：c#, wpf, xaml, shader

在 WPF 应用程序中，我在背景上插入一个带有简单图片的按钮：

```
<Button Grid.Column="2" BorderBrush="Transparent" HorizontalAlignment="Left" Height="20" Margin="15,0,0,0" VerticalAlignment="Center" Width="20">
    <Button.Background>
       <ImageBrush ImageSource="Divalto_Rechercher_25px.png" Stretch="Uniform"></ImageBrush>
    </Button.Background>
</Button> 
```

我想在鼠标悬停时转换图片的图片颜色。

这是鼠标不在时的图片：

![在此处输入图像描述](../Images/ea95b2861e91c8324eb1280e92836ad5.png)

当鼠标结束时，我想要这样的事情：

![在此处输入图像描述](../Images/de7b44469746daccc7e12d54c82c9e23.png)

我想动态地执行此操作（动态地转换图片颜色）。

这是一个尝试，但不完整：

```
<Button Grid.Column="2" BorderBrush="Transparent" HorizontalAlignment="Left" Height="20" Margin="15,0,0,0" VerticalAlignment="Center" Width="20">
  <Button.Background>
    <ImageBrush ImageSource="appbar.feature.search.rest.png" Stretch="Uniform"></ImageBrush>
  </Button.Background> 
    <EventTrigger RoutedEvent="Button.MouseEnter">
        <BeginStoryboard>
            <Storyboard>
                <ColorAnimation
                    Storyboard.TargetName="AnimBrush" 
                    Storyboard.TargetProperty="(SolidColorBrush.Color)"
                    From="Red" To="Green" Duration="0:0:5" 
                    AutoReverse="True" RepeatBehavior="Forever" />
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Button> 
```

任何人都可以帮助我吗？

非常感谢，

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:54:12.703

您可以只创建带有内部的`Content`as a并更改使用 a或。如果您只想显示图像样式，则覆盖模板也是一个好主意，否则当鼠标悬停时您将获得按钮焦点样式。`Border``Image``Border` `Background``Trigger``Animation``Button`

例子：

```
 <Button BorderBrush="Transparent" HorizontalAlignment="Left" Height="50" Margin="12,24,0,238" VerticalAlignment="Center" Width="51">
        <Button.Content>
            <Border CornerRadius="5">
                <Image Margin="3" Source="http://icons.iconarchive.com/icons/custom-icon-design/mini/32/Search-icon.png" Stretch="Uniform" />
                <Border.Style>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="Background" Value="LimeGreen" />
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="Red" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
            </Border>
        </Button.Content>
        <Button.Style>
            <Style TargetType="{x:Type Button}" >
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}" >
                            <ContentPresenter />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Button.Style>
    </Button> 
```

结果：

普通![在此处输入图像描述](../Images/a017132bfd3712cb49c14074998a3f95.png)鼠标悬停![在此处输入图像描述](../Images/0a848bebd5bc440f79b8768b272c96c9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:30:00.857

听起来您需要将 StoryBoard 添加到 XAML。如果你有一个透明的图像，为什么不简单地改变按钮的填充颜色呢？

我还没有测试过下面的代码，但它是你可以用作跳板的东西。

```
<EventTrigger RoutedEvent="Button.MouseOver">
      <BeginStoryboard>
        <Storyboard>
          <ColorAnimation
            Storyboard.TargetName="AnimBrush" 
            Storyboard.TargetProperty="(SolidColorBrush.Color)"
            From="Red" To="Green" Duration="0:0:5" 
            AutoReverse="True" RepeatBehavior="Forever" />
        </Storyboard>
      </BeginStoryboard>
 </EventTrigger> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:44:28.273

为什么不直接将按钮内容设置为您想要的图像？这可能是最简单的方法。然后，您可以更改鼠标事件。[看到这个答案](https://stackoverflow.com/questions/2783619/how-do-i-animate-image-content-in-wpf)

如果您的图像仅是白色放大镜，图像的其余部分是透明的，那么您应该将按钮内容设置为图像并将背景设置为您想要的颜色（橙色或黑色）

# java - WEKA 的 .data 文件的类路径错误

> ID：14944017
> 
> 赞同：0
> 
> 时间：2013-02-18T19:38:33.043
> 
> 标签：java, classpath, weka

我正在尝试一些使用 weka API for Java 的简单代码。在尝试查找 numberofAttributes 时，它会为任何 .data 文件触发错误。虽然它适用于 .arff 文件。已从[UCI存储库下载文件](http://archive.ics.uci.edu/ml/machine-learning-databases)

```
---Registering Weka Editors---
Trying to add database driver (JDBC): RmiJdbc.RJDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): jdbc.idbDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): org.gjt.mm.mysql.Driver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): com.mckoi.JDBCDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): org.hsqldb.jdbcDriver - Error, not in CLASSPATH?
java.io.IOException: premature end of line. Expected attribute type., read Token[EOL], line 5
    at weka.core.converters.ConverterUtils.errms(ConverterUtils.java:912)
    at weka.core.converters.C45Loader.readHeader(C45Loader.java:417)
    at weka.core.converters.C45Loader.getStructure(C45Loader.java:211)
    at weka.core.converters.C45Loader.getDataSet(C45Loader.java:234)
    at weka.core.converters.ConverterUtils$DataSource.getDataSet(ConverterUtils.java:268)
    at MetaFeatureStatistical.main(MetaFeatureStatistical.java:42)
Exception in thread "main" java.lang.NullPointerException
    at MetaFeatureStatistical.main(MetaFeatureStatistical.java:43) 
```

第 42 和 43 行如下：

```
instances=source.getDataSet(); 
instances.setClassIndex(instances.numAttributes()-1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:30:19.640

`instances.numAttributes()`由于实例为空，它会引发错误。`source.getDataSet()`无法完成，因此未为实例分配值，因为文件存在问题，可能在第 5 行。在我们知道您正在使用的文件之前，我们无法说出原因。

# ios - iOS 6：收到推送通知后更新视图，但应用程序已关闭

> ID：14944024
> 
> 赞同：4
> 
> 时间：2013-02-18T19:38:46.803
> 
> 标签：ios, ios6, push-notification, apple-push-notifications

应用收到推送通知后，我想更改 main 上某些按钮的标题`ViewController`。为了实现这种行为，我在我的应用程序委托中重写了将我想更新的控制器`application: didReceiveRemoteNotification:`重新实例化为它的根视图控制器的方法，将按钮的标题设置为我想要的任何内容：`UINavigationController`

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
       UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:self.welcomeViewController];
       [self.window setRootViewController:navController];
       [self.welcomeViewController.buttonToUpdate setTitle: @"Updated Text" forState: UIControlStateNormal];
} 
```

虽然这可能不是最好的解决方案（也许我可以`UIButtons`完全忘记并让视图控制器使用 a`UITableView`并将其行用作按钮？），但它适用于以下场景：

1）应用程序在前台。推送通知警报弹出，用户点击确定，视图更新正常。

2）后台/关闭的应用程序。设备处于锁定模式。推送通知到达，用户解锁设备，加载应用程序，视图也更新正常。

例如，当用户使用另一个应用程序并且推送通知到达时，问题似乎出现了，但用户不是通过推送通知而是通过点击应用程序图标打开应用程序。在那种情况下，`application: didReceiveRemoteNotification:`似乎没有被调用，并且问题中的视图永远不会更新。

希望我的解释清楚。我愿意接受有关不同方法的建议，或者如何使用我的方法处理最后一种情况。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T19:57:12.330

来自 APNS 开发指南：

> 让我们回顾一下操作为应用程序传递本地通知或远程通知时的可能场景。
> 
> 当应用程序未在前台运行时会发送通知。在这种情况下，系统会显示通知、显示警报、标记图标，可能还会播放声音。
> 
> 作为呈现通知的结果，用户点击警报的操作按钮或点击（或点击）应用程序图标。如果点击操作按钮（在运行 iOS 的设备上），系统将启动应用程序并且应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地通知对象（用于本地通知）。
> 
> 如果在运行 iOS 的设备上点击应用程序图标，应用程序会调用相同的方法，**但不会提供有关通知的信息**。

您遇到的行为是点击应用程序图标时的预期行为。在这种情况下，就好像用户正常启动了应用程序并且没有收到推送通知一样。在这种情况下，您显示不同内容的唯一方法（我能想到的）是在启动应用程序时联系您的服务器并获取一些信息，表明最近向该设备发送了推送通知。

# php - 在 PHP 中验证 Microsoft Dynamics

> ID：14944025
> 
> 赞同：7
> 
> 时间：2013-02-18T19:38:55.743
> 
> 标签：php, rest, soap, dynamics-crm, microsoft-dynamics

我正在尝试将 Microsoft Dynamics Online 与我的网站集成。但是，我正在努力寻找一种体面的方式来使用 PHP 通过 API（无论是 REST 还是 SOAP）进行身份验证。大多数示例使用 Microsoft CRM SDK（在 .NET 中）进行身份验证。但是，我的网站基于 PHP，我想知道您如何访问 Microsoft Dynamics API（REST 和/或 SOAP）。

有谁知道通过 php 使用 Microsoft 动态 API 进行身份验证的合适方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-06T20:02:50.543

从 Dynamics CRM 2016 起 (v8.0) - 我们获得了用于跨平台集成的 REST API 端点。它看起来像这样：`https://crmorgname.crm.dynamics.com/api/data/v8.0/accounts`

SOAP 端点已被弃用，基于 REST/JSON/Odata 的 CRM Web api 端点是游戏规则的改变者。为了我们的目的，我们可以使用 XMLHttpRequest 或任何方式使用提示动词（如 PUT、GET 或 POST）来访问该端点。

要获得身份验证 - 我们必须使用 OAuth，为此我们需要在 Azure Active Directory 中注册 PHP 应用程序并在线启用 Dynamics CRM 的权限。完成后，我们可以使用该客户端 ID 和客户端密码进行身份验证，并且 BEARER TOKEN 可用于 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:31:11.477

唯一类型的授权适用于 Dynamics CRM Online - 使用 Windows Live ID。在官方的“Dynamics CRM 2011 开发人员培训工具包”中有一个很好的（而且很重要 - 工作）示例从 PHP 连接到 CRM Online。

[http://www.microsoft.com/en-us/download/details.aspx?id=23416](http://www.microsoft.com/en-us/download/details.aspx?id=23416)

参见\CRM2011KitUpdated\Labs\CRMOnlinefromPHP

至少它对我有用，我的图书馆就是基于那个例子。

# google-chrome - Grails / Chrome 错误：资源解释为字体但使用 MIME 类型应用程序/八位字节流传输

> ID：14944029
> 
> 赞同：0
> 
> 时间：2013-02-18T19:39:12.773
> 
> 标签：google-chrome, grails, twitter-bootstrap, font-awesome

如何在 Chrome 中设置 woff 字体的 mime 类型，就像 font-awesome bootstrap 库使用的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T04:37:05.480

通过将以下文件放入文件夹来创建[Grails 自定义映射器：](http://grails-plugins.github.io/grails-resources/guide/6.%20Creating%20custom%20mappers.html)`FontResourceMapper.groovy``grails-app/resourceMappers/`

**FontResourceMapper.groovy**

```
import org.grails.plugin.resource.mapper.MapperPhase

class FontResourceMapper {

   static phase = MapperPhase.ALTERNATEREPRESENTATION
   static defaultIncludes = ["**/*.woff"]

   def map(resource, config) {
      // Changes "application/octet-stream" to correct MIME type to avoid browser warning
      resource.requestProcessors << { req, resp ->
         resp.setHeader("Content-Type", "application/font-woff")
         }
      }

} 
```

改编自[半生不熟的解决方案](https://github.com/halfbaked/grails-font-awesome-resources/blob/master/grails-app/resourceMappers/FontAwesomePluginResourceMapper.groovy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:39:12.773

**在 Config.groovy 中：**

```
grails.mime.types = [
    all:           '*/*',
    atom:          'application/atom+xml',
    css:           'text/css',
    ...
    woff:          'font/opentype'
] 
```

# sql - 从 SQL/SSRS 2005 中的每一行中选择最大日期的列名

> ID：14944031
> 
> 赞同：2
> 
> 时间：2013-02-18T19:39:18.143
> 
> 标签：sql, sql-server-2005, reporting-services, reportingservices-2005

如何将最右侧的“最后一步”列添加到 SSRS 的报告中？本质上，我需要包含该行中最近日期的列的名称。实际数据将有几千行，每行有大约 15 个日期。

```
Name      Step X      Step W      Step A      Step B      Step Y     Last Step
-------------------------------------------------------------------------------
John      1/21/2013   1/24/2013   1/3/2013    1/27/2013   1/7/2013   Step B
Sally     1/22/2013   1/24/2013   1/12/2013   1/1/2013    1/5/2013   Step W 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!3/916c1/1)简单的示例数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:51:21.207

这是一种不使用动态 sql 的方法（因为这是用于报告服务）：

```
SELECT T.*, C.ColName
FROM yourtable T
OUTER APPLY (SELECT TOP 1 *
             FROM (SELECT 'Step X', [Step X]
                   UNION ALL
                   SELECT 'Step W', [Step W]
                   UNION ALL
                   SELECT 'Step A', [Step A]
                   UNION ALL
                   SELECT 'Step B', [Step B]
                   UNION ALL
                   SELECT 'Step Y', [Step Y]) X(ColName,ColValue)
             ORDER BY ColValue DESC) C 
```

和[小提琴](http://www.sqlfiddle.com/#!3/916c1/11)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:40:26.180

这是通过修改[第一个问题](https://stackoverflow.com/questions/14902909/ssrs-2005-find-name-of-column-with-max-value)的查询的另一种方法。这只是将结果添加`name`到结果中，因此您可以获得`max(date)`每个名称的：

```
;with cte as
(
  select name, col, value
  from yourtable
  unpivot
  (
    value
    for col in ([Step X], [Step W], [Step A], [Step B], [Step Y])
  ) unpiv
) 
select t.name, 
  [Step X], 
  [Step W], 
  [Step A], 
  [Step B], 
  [Step Y],
  d.col LastStep
from yourtable t
cross apply
(
  select c1.col
  from cte c1
  inner join
  (
    select name, max(value) MaxDate
    from cte
    group by name
  ) c2
    on c1.value = c2.maxdate
    and c1.name = c2.name
  where t.name = c1.name
) d 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/916c1/19)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:37:12.573

为了后代的缘故，这里是 bluefeet 对类似问题的回答的修改版本，以及[fiddle](http://www.sqlfiddle.com/#!3/916c1/16)。

```
WITH cte AS (
    SELECT *, Rank() OVER (PARTITION BY Name ORDER BY value DESC) AS Rank
    FROM (
      SELECT *
      from yourtable
      unpivot
      (
        value
        for col in ([Step X], [Step W], [Step A], [Step B], [Step Y])
      ) unpiv
    ) X
)
SELECT  yt.[Step X]
      , yt.[Step W]
      , yt.[Step A]
      , yt.[Step B]
      , yt.[Step Y]
      , c1.col
FROM yourtable yt
JOIN cte c1
ON   yt.Name = c1.Name
AND  c1.Rank = 1 
```

# ms-access - 设置表单控件，可在选择组合框中的值时更新

> ID：14944042
> 
> 赞同：1
> 
> 时间：2013-02-18T19:40:32.620
> 
> 标签：ms-access, ms-access-2010

我设计的订单输入表单上有一个组合框，允许我从名为 tblCustomers 的表中的公司名称下拉列表中进行选择。此控件的行源是：

```
SELECT CustomerID, CompanyName FROM tblCustomers; 
```

绑定列是 1，以便我可以将 CustomerID 存储在基础 tblOrders 表中。

我的问题是：

我想在表单上显示与组合框中选择的客户相关联的销售人员（也在 tblCustomers 表中）的文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:01:28.870

您可以利用组合中的 column 属性：

如果您的组合的行源是：

```
 SELECT CustomerID, CompanyName, SalesPerson FROM tblCustomers; 
```

您可以将文本框的控制源设置为引用列属性，从零开始计数：

```
 =ComboX.Column(2) 
```

您需要将列数设置为 3。

# ruby - 为什么 thrubyracer gem 会出现 Ruby 分段错误？

> ID：14944044
> 
> 赞同：0
> 
> 时间：2013-02-18T19:40:47.677
> 
> 标签：ruby, ruby-on-rails-3, amazon-ec2, therubyracer

我在 AWS EC2 中有一个我们的应用程序的生产实例。我的团队在 Fedora 18 上进行本地开发。最近，在将代码推送到生产环境时，我们注意到在运行“rake assets:precompile”或“script/delayed_job start|stop”时出现分段错误。这些在我们的开发机器上运行良好。

为了尝试隔离问题，我们将 RBENV 从 1.9.3-p327 升级到 RBENV 1.9.3-p385。然后，为了尝试隔离 RBENV，我创建了一个新用户“testuser”，并使用 1.9.3-p385 全新安装了 RVM。同样的问题。

段错误细节似乎指向“therubyracer”宝石。我找不到任何看起来像我们的问题的信息。

```
 gem install minitest
    WARNING!! No private key specified, gem will not be signed!
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/therubyracer-0.11.3/lib/v8/init.so: [BUG] Segmentation fault
    ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-linux]

    -- Control frame information -----------------------------------------------
   <snip>
    -- Ruby level backtrace information ----------------------------------------
    script/delayed_job:3:in `<main>'
    /home/testuser/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    /home/testuser/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    /home/testuser/apps/pharos/config/environment.rb:2:in `<top (required)>'
    /home/testuser/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    /home/testuser/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    /home/testuser/apps/pharos/config/application.rb:7:in `<top (required)>'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler.rb:128:in `require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in `require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in `each'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in `block in require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in `each'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in `require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs/runtimes.rb:50:in `autodetect'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs/runtimes.rb:56:in `best_available'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs/runtimes.rb:56:in `find'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs/runtimes.rb:56:in `each'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/execjs-1.4.0/lib/execjs/ruby_racer_runtime.rb:99:in `available?'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/therubyracer-0.11.3/lib/v8.rb:4:in `<top (required)>'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
    /home/testuser/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'

<snip>

    [NOTE]
    You may have encountered a bug in the Ruby interpreter or extension libraries.
    Bug reports are welcome.
    For details: http://www.ruby-lang.org/bugreport.html 
```

# mysql - 选择带有日期和文章点的行（无关系）

> ID：14944045
> 
> 赞同：3
> 
> 时间：2013-02-18T19:40:51.653
> 
> 标签：mysql, sql, database, pchart

我得到了下表：

**文章**

```
+----+-------------+-----------------------------+--------------+
| ID | ID_group_AG | Title                       | Date_publish |
+----+-------------+-----------------------------+--------------+
|  1 |          10 | O obrotach sfer niebieskich | 2009-05-07   |
|  2 |          11 | Technologia betonu          | 2011-03-21   |
|  3 |          12 | test                        | 2008-01-13   |
+----+-------------+-----------------------------+--------------+ 
```

**员工**

```
+----+-----------+-----------+
| ID | Name      | Surname   |
+----+-----------+-----------+
|  1 | Andrzej   | Gacek     |
|  2 | Leszek    | Ksiazek   |
|  3 | Krzysztof | Skibinski |
|  4 | Andrzej   | Inny      |
+----+-----------+-----------+ 
```

**文章组**

```
+----+----------+---------------+----------------+
| ID | ID_group | ID_employee   | Points         |
+----+----------+---------------+----------------+
|  1 |       10 |             1 |              3 |
|  2 |       10 |             3 |              3 |
|  3 |       11 |             1 |              2 |
|  4 |       11 |             2 |              2 |
|  5 |       11 |             4 |              2 |
|  6 |       12 |             4 |              6 |
+----+----------+---------------+----------------+ 
```

以及以下关系：

```
articles.ID_group_AG => articlesGroup.ID_group

articlesGroup.ID_employee => employee.ID 
```

* * *

我需要做的是打印与员工、文章和发布日期相关的所有文章点，所以我使用以下查询：

```
SELECT
  p.Name,
  p.Surname,
  a.Date_publish,
  ag.Points
FROM
  employee p,
  articles a,
  articlesGroup ag
WHERE
  (ag.ID_group = a.ID_group_AG) AND
  (ag.ID_employee = p.ID) 
```

我得到：

```
+-----------+-----------+--------------+----------------+
| Name      | Surname   | Date_publish | Points         |
+-----------+-----------+--------------+----------------+
| Andrzej   | Gacek     | 2009-05-07   |              3 |
| Andrzej   | Gacek     | 2011-03-21   |              2 |
| Leszek    | Ksiazek   | 2011-03-21   |              2 |
| Krzysztof | Skibinski | 2009-05-07   |              3 |
| Andrzej   | Inny      | 2011-03-21   |              2 |
| Andrzej   | Inny      | 2008-01-13   |              6 |
+-----------+-----------+--------------+----------------+ 
```

* * *

现在让我们解决问题:)

我使用 pChart 库制作图表。

我想把关于每个员工的所有日期放在 Y 轴上，在 X 轴上。

因此，员工“Andrzej Gacek”的积分数组将为：[3,2]

对于员工“Krzysztof Skibinski”将是：[3]

和日期数组（已排序）：["2008-01-13","2009-05-07","2011-03-21"]

我需要在员工点数组中添加零点，例如。对于“Andrzej Gacek”数组应如下所示：[0,3,2]，因此 Point 将与 Dates 相关。

如何形成查询以将零添加到点，以便查询的输出如下所示：

```
+-----------+-----------+--------------+----------------+
| Name      | Surname   | Date_publish | Points         |
+-----------+-----------+--------------+----------------+
| Andrzej   | Gacek     | 2009-05-07   |              3 |
| Andrzej   | Gacek     | 2011-03-21   |              2 |
| Andrzej   | Gacek     | 2008-01-13   |              0 |
| Leszek    | Ksiazek   | 2011-03-21   |              2 |
| Leszek    | Ksiazek   | 2009-05-07   |              0 |
| Leszek    | Ksiazek   | 2008-01-13   |              0 |
| Krzysztof | Skibinski | 2009-05-07   |              3 |
| Krzysztof | Skibinski | 2011-03-21   |              0 |
| Krzysztof | Skibinski | 2008-01-13   |              0 |
| Andrzej   | Inny      | 2011-03-21   |              2 |
| Andrzej   | Inny      | 2008-01-13   |              6 |
| Andrzej   | Inny      | 2009-05-07   |              0 |
+-----------+-----------+--------------+----------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:21:29.573

您必须创建笛卡尔积才能获得所需的结果。我用 a`CROSS JOIN`来获取每个员工的日期。

试试这个：

```
SELECT DISTINCT E.Name,
  E.SurName,
  a.Date_Publish, 
  IFNULL(AG.Points,0) Points
FROM Articles A CROSS JOIN
  Employee E LEFT JOIN
  ArticlesGroup AG ON ag.ID_group = a.ID_group_AG 
    AND E.Id = ag.ID_employee 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/f6a98/2)。

# php - Ajax 形式：后备样式

> ID：14944049
> 
> 赞同：1
> 
> 时间：2013-02-18T19:40:59.220
> 
> 标签：php, javascript, jquery, ajax, forms

我有一个 Ajax 表单。现在，如果用户停用了 JavaScript，我想提供一个可靠的后备。

到目前为止，它也可以在没有 JavaScript 的情况下工作，但是用户随后只会看到 JSON 字符串打印在没有样式的空白白色上，因为

`echo json_encode( $arr );`

如何为此添加样式？我必须要`echo`一个完整的 HTML 页面吗？是否可以为禁用的 JS 启用重定向或其他什么？

整个 PHP 看起来像这样：

```
if ( !empty( $invalidFieldArray ) ) {     
    // validation errors
    $arr = array( "status" => "error" , "data" => $invalidFieldArray );
    echo json_encode( $arr );      
} else {
    // all ok
    $arr = array( "status" => "success" );
    echo json_encode( $arr );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:52:00.490

## HTML 和 AJAX

You could use a different `action` URL in your `<form>` than the one used by AJAX. That way, you can have a normal working `<form>` fallback which outputs HTML.

## X-Requested-With

Or, if you want to use only one URL for both methods, then you can have a look at the `X-Requested-With` header sent, and identify an AJAX request by checking it against the value `XMLHttpRequest`.

```
if(strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
  /* It's AJAX */
} else {
  /* HTML fallback */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:45:39.700

尝试类似的东西

```
<form action="some.url?js=false"... 
```

使用表示没有可用 JavaScript 的标志设置操作

然后使用 JavaScript 将其删除

```
$('form').attr('action', "some.url"); 
```

然后在服务器端，您可以检查`$_GET[js]`它是否未设置只是回显 json 否则为一整页。

# hibernate - 同一实体的两个属性

> ID：14944051
> 
> 赞同：0
> 
> 时间：2013-02-18T19:41:07.333
> 
> 标签：hibernate

我有两个实体

```
@Entity
class A {
    @Id
    private Long Id;

    //attributes of A
}

@Entity
class B {  
    xxx
    private A instanceOfA_1;

    xxx
    private A instanceOfA_2;
} 
```

如您所见，我在 B 类中有两个 A 类型的属性。

您将如何在 Hibernate 中注释这两个属性？最后，在数据库中，我希望在表 B 中找到两列，每一列都包含表 A 中的键 id。

我想这是一个简单的 ORM 问题，但我没有设法单独解决它......

* * *

编辑：在上述回复之后，您建议我执行以下操作？

```
@Entity
class A {
  @Id
  private Long Id;  
  //attributes of A
}

@Entity
class B {
@ManyToOne
private A instanceOfA_1;
@ManyToOne
private A instanceOfA_2;
} 
```

这将创建以下表格？

```
Table A
  id
  attributes

Table B
  a_id_1
  a_id_2 
```

如何指定表 B 中的列名（即 a_id_1 和 a_id_2）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:48:06.890

这是相当典型的情况，每个都应该用[@ManyToOne](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToOne.html)注释。如果每个关系只有一个 B 可以与给定的 A 相关联，则应使用[@OneToOne 。如果从实体生成数据库模式，则使用 @OneToOne 将在外键中存在唯一约束。](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToOne.html)

[@JoinColumn](http://docs.oracle.com/javaee/6/api/javax/persistence/JoinColumn.html)可用于指定外键列的名称：

```
 @JoinColumn(name="preferred_column_name") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:00:05.803

试试这个 ：

```
@Entity
class A {
   @Id
   private Long Id;  
}

@Entity
class B {
   @ManyToOne
   @JoinColumn(name="A_1")
   private A instanceOfA_1;

   @ManyToOne
   @JoinColumn(name="A_2")
   private A instanceOfA_2;
} 
```

# c++ - 将附加参数传递给 glutKeyboardFunc

> ID：14944054
> 
> 赞同：0
> 
> 时间：2013-02-18T19:41:19.003
> 
> 标签：c++, opengl, parameter-passing, freeglut

我们可以传递额外的参数`glutKeyboardFunc`吗？我有一个班级，我想在按下某个键时修改班级的数据。该类在全局范围内，但该类的对象对于某些函数是本地的。此外，我不想使对象成为全局对象。

# php - PHP - 按变量搜索多维关联数组

> ID：14944064
> 
> 赞同：0
> 
> 时间：2013-02-18T19:42:45.663
> 
> 标签：php

我有这个多维关联数组：

```
$store = array(
array("id" => 13,"store_id" => 4,"name" => "trumpet","type" => "trumpet567"),
array("id" => 15,"store_id" => 3,"name" => "piano","type" => "piano689"),
array("id" => 33,"store_id" => 1,"name" => "flute","type" => "flute267"),
array("id" => 77,"store_id" => 3,"name" => "violin","type" => "violin324"),
array("id" => 78,"store_id" => 2,"name" => "guitar","type" => "guitar364"),
array("id" => 91,"store_id" => 3,"name" => "accordion","type" => "accordion763")); 
```

和一个变量：

```
$instrument="guitar"; 
```

我需要获取 $instrument 的 store_id。我已经尝试了很多东西，但我没有解决方案:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:45:14.270

```
$instrument = 'guitar';
$storeId = null;

foreach ($store as $row) {
    if ($row['name'] == $instrument) {
        $storeId = $row['store_id'];
        break;
    }
}

echo $storeId; // Will echo 2. 
```

# android - Android - file.exists() 为 /mnt/sdcard 文件夹返回 true，即使 SDCard 已卸载？- 模拟器

> ID：14944065
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:42:50.357
> 
> 标签：android, android-emulator, sd-card

我通过重命名模拟器的 SDCard 文件（sdcard.img - 位于 .Android 文件夹中）卸载了 SD 卡。

但是我的应用程序的 f.exists() 仍然为 sd 卡的根文件夹返回 true - /mnt/sdcard （即使它在技术上不应该存在）。

这怎么可能？

编辑：它为位于 /mnt/sdcard/something 下的文件返回 false。但它为根文件夹 /mnt/sdcard 返回 true - 这让我感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:39:44.727

> 也许这是一个错误，或者我可能误解了 api。

两者都不。模拟器只是创建了一个新的外部存储映像。你没有“卸载”任何东西。

# php - 在 PHP 中浏览巨大的嵌套数组

> ID：14944066
> 
> 赞同：0
> 
> 时间：2013-02-18T19:42:53.263
> 
> 标签：php, multidimensional-array

这可能是一个简单的问题，但我正在转储一个绝对巨大的对象 ($this)，我需要到达数组中的特定点

```
$this->varA->varB->varC->varD->what_I_need 
```

我知道我需要的变量在那里，我可以使用 ctrl+f 来找到它，但是数组是如此嵌套，以至于我不知道我应该如何在 PHP 中找到它。关于最好的方法是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T07:35:22.317

不要犹豫，从框架中查看库。

[CakePHP] 制作了一个很棒的类，它能够使用点语法符号中的字符串导航到数组中。这个库被称为[**Hash**](http://book.cakephp.org/2.0/fr/core-utility-libraries/hash.html)，看看它。

如果你有这个：

```
$var = array(
    'Element1' => array(
        'First_rule' => true,
        'Second_rule' => false,
    ),
    'Element2' => array(
        'First_rule' => 'none',
        'Other_rule' => 'otherone',
    ),
); 
```

您可以简单地使用字符串从该数组中提取数据。

您只能从特定元素中获取一个信息：

```
$extracted_other_rule = Hash::extract($var, 'Element2.Other_rule'); 
```

返回：

```
Array
(
    [0] => otherone
) 
```

或者您甚至可以从包含它的数组中的任何元素中提取所有“First_rule”索引：

```
$extracted_rules = Hash::extract($var, '{s}.First_rule'); 
```

返回这个：

```
Array
(
    [0] => 1
    [1] => none
) 
```

如果您需要浏览一个深度未定义的巨大数组，只需创建一个递归函数，将名为“$path”的字符串传输到递归操作。我做了一个这样的大函数，将整个 XML 流解析为 JSON 字符串，所有键都用我自己的规则解析，并带有一组参数。

# php - 使用 PHP 时使用 socks5 代理的 cURL 请求失败，但它通过命令行工作

> ID：14944067
> 
> 赞同：7
> 
> 时间：2013-02-18T19:42:56.297
> 
> 标签：php, curl, proxy, socks, ssh-tunnel

cURL + 代理菜鸟在这里，很难。我在尝试通过代理从远程安全服务器检索网页时遇到问题。远程开发人员显然已经正确设置了一切，因此以下命令行指令可以正常工作并返回我们正在寻找的内容：

```
curl -k --socks5-hostname localhost:xxxx https://hostname/ 
```

但是，以下 PHP 不会回显请求的网页。相反，它会回显错误“无法解析主机名”：

```
$proxy = 'localhost:xxxx';
$url = 'https://hostname/';
//$proxyauth = 'user:password';

$ch = curl_init();
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
//curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxyauth);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_URL, $url);
$curl_scraped_page = curl_exec($ch);
$error = curl_error($ch);
curl_close($ch);

if ($error)
    echo $error;
elseif ($curl_scraped_page)
    echo $curl_scraped_page; 
```

如果把$url改成公共页面，比如google，请求成功，大家开心。

如果有任何改变，则连接需要 SSH 隧道。隧道已打开且正常运行，命令行请求成功证明了这一点。

这里有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-17T22:36:25.553

您需要将选项设置`CURLOPT_PROXYTYPE`为[`CURLPROXY_SOCKS5_HOSTNAME`](https://www.php.net/manual/en/curl.constants.php)，遗憾[的是在旧 PHP 版本中没有定义，大约在 5.6 之前](https://bugs.php.net/bug.php?id=69950)；如果您之前有，但您可以显式使用它的值，它等于`7`：

```
curl_setopt($ch, CURLOPT_PROXYTYPE, 7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-11T14:02:45.233

在选项中`CURLOPT_PROXYTYPE`，您需要设置[`CURLPROXY_SOCKS5_HOSTNAME`](https://www.php.net/manual/en/curl.constants.php)option 而不是`CURLPROXY_SOCKS5`. 在这种情况下，DNS 查询（用于主机名解析）将被发送到 SOCKS 代理，而不是在本地网络中解析。

```
curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5_HOSTNAME); 
```

这个常量从 PHP 5.5.23 和 PHP 5.6.7 和 cURL 7.18.0 开始可用，所以你可以简单地使用它。

# ruby - 如何用 macruby 编译一个简单的 ruby 脚本？

> ID：14944069
> 
> 赞同：0
> 
> 时间：2013-02-18T19:43:05.167
> 
> 标签：ruby, macos, macruby

我正在尝试使用 macrubyc 将一个简单的“Hello World”ruby 脚本编译为 Mac OS 二进制文件。这是我正在使用的命令：

`macrubyc -C hello_world.rb`

这是`file`命令的输出：

```
file hello_world.rbo
hello_world.rbo: Mach-O 64-bit bundle x86_64 
```

但是，当我尝试运行创建的二进制文件时，我得到`./hello_world.rbo: cannot execute binary file`

PS：hello_world.rb 脚本只包含一行：

`puts "Hello World!"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:28:16.297

您没有链接您的程序。像这样调用 macrubyc：

```
macrubyc -o hello_word hello_world.rb 
```

当您运行`macruby -C`它时，它会创建一个必须链接才能执行的目标文件。

# c - Automake、GNU make、检查和（忽略的）模式规则

> ID：14944070
> 
> 赞同：1
> 
> 时间：2013-02-18T19:43:05.960
> 
> 标签：c, makefile, autotools, check-framework

我有以下 Makefile.am 应该创建`foo.hdb`和`foo.cdb`来自`foo.h`（通过 Python 脚本）：

```
TESTS = check_foo

check_PROGRAMS = check_foo

check_foo_SOURCES = check_foo.c $(top_builddir)/src/isti.h \
    foo.cdb foo.h foo.hdb
check_foo_CFLAGS = @CHECK_CFLAGS@ $(all_includes) -I../../clib/src/
check_foo_LDADD = $(top_builddir)/src/libcorm.la @CHECK_LIBS@ -lsqlite3

%.hdb %.cdb: %.h
    PYTHONPATH=$(top_builddir)/cgen/src python $(top_builddir)/cgen/src/isti/cgen/run.py $<

clean-local:
    rm -f *.hdb *.cdb 
```

但是，虽然`make foo.hdb`and`make foo.cdb`工作（调用 Python 代码并从 生成`foo.hdb`and`foo.cdb`文件`foo.h`），`make clean check`（或两者分开）不能（缺少`foo.hdb`- 没有这样的文件） - 不调用模式规则`foo.hdb`从`foo.h`.

换句话说：**没有为 check_foo_SOURCES 中列出的文件调用模式规则**。

我怎样才能使这项工作？其余的 autotools 基础设施工作正常。通过查看 Makefile，我怀疑问题在于 autotools 如何扩展检查源。

这都是在带有 Gnu make 的 Linux 上。这是[Makefile](http://pastebin.com/jLmQs33r)。

[略微更新以反映来自 MadScientist 的帮助]。

**稍后更新**

以下 Makefile（只是 make，而不是 autotools）工作正常，因此问题似乎与 autotools 和检查支持有关。

```
all: check_foo

CFLAGS=-I../../clib/src
LDFLAGS=-L../../clib/src/.libs

check_foo: check_foo.c foo.h corm_foo.h corm_foo.c
    gcc $(CFLAGS) $(LDFLAGS) $^ -o $@ -lcorm -lsqlite3

corm_%.h corm_%.c: %.h
    PYTHONPATH=../../cgen/src python ../../cgen/src/isti/cgen/run.py $<

clean:
    rm -f corm_*.h corm_*.c
    rm -f *.o 
```

（请注意，我已从 xxx.hdb 切换到 corm_xxx.h 等，因此文件扩展名保持正常）。

**更多细节**

由于它似乎与 CHECK 宏有关，因此这是 configure.ac：

```
AC_INIT([corm], [0.1], [a.cooke@isti.com])
AC_CONFIG_MACRO_DIR([m4])
PKG_CHECK_MODULES([CHECK], [check >= 0.9.4]) 
AM_INIT_AUTOMAKE([-Wall foreign -Werror])
AC_PROG_CC_C99
AM_PROG_CC_C_O
LT_INIT
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([Makefile clib/Makefile clib/src/Makefile clib/tests/Makefile clib/docs/Makefile cgen/Makefile cgen/docs/Makefile example/Makefile example/src/Makefile])
AC_CHECK_PROGS([DOXYGEN], [doxygen], AC_MSG_WARN([Doxygen not found - continuing without Doxygen support]))
AM_CONDITIONAL([HAVE_DOXYGEN], [test -n "$DOXYGEN"])
AM_COND_IF([HAVE_DOXYGEN], [AC_CONFIG_FILES([clib/docs/Doxyfile cgen/docs/Doxyfile])]) 
```

**解决方案**

好的，总结下面的各种事情，有两个重要问题（一旦我修复了文件扩展名 - 请参阅“普通”makefile和fceller的答案），其中任何一个都足以让事情正常进行：

1.  （处理）头文件很复杂。由于自动依赖，以编程方式生成的头文件会破坏事情。解决方案是使用[BUILT_SOURCES](http://www.gnu.org/software/automake/manual/html_node/Sources.html)

2.  但是（处理）.c 文件并不复杂。因此，将 corm_foo.c 放在 check_foo.c 前面会触发该文件的生成。因为这也会生成 corm_foo.h，所以一切正常（因为 check_foo.c 现在可以包含 corm_foo.h）。

此外，fceller 对整洁的 makefile 有一些很好的一般观点，并解释了为什么“普通”makefile 可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:51:30.673

线

```
%.cdb: %.hdb 
```

不做任何事情。查看 GNU make 手册，您会看到没有命令行的模式规则用于删除具有相同模式的先前定义的规则。由于没有以前的规则，这本质上是一个无操作。

如果您有一个命令使用一个规则调用创建两个输出文件，那么您需要将两个模式放在同一规则中，如下所示：

```
%.cdb %.hdb: %.h
        PYTHONPATH=$(top_builddir)/cgen/src python $(top_builddir)/cgen/src/isti/cgen/run.py $< 
```

这将告诉 GNU make 两个目标都是通过一次调用规则生成的。意识到！此语法仅对模式规则具有此行为。具有多个目标的显式规则会做一些完全不同的事情（足够令人困惑）。

至于`make clean`行为，我不确定。automake 生成的 makefile 太复杂了，我无法阅读它；它需要一些调试（运行它并跟踪发生了什么）。但是，我怀疑那里的规则设计不正确，无法`clean`在同一 make 调用中运行目标和构建目标。分别运行这两个命令，看看是否效果更好：

```
make clean
make check 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:44:20.830

首先：您不需要在 *_SOURCES 中包含“*.h”。automake 将生成代码来生成依赖项。来自手册： _SOURCES 定义中列出的头文件将包含在分发中，否则将被忽略

您在普通 Makefile 中所做的更改（“请注意，我已从 xxx.hdb 切换到 corm_xxx.h 等，因此文件扩展名保持正常”）是必不可少的。automake 使用文件扩展名过滤 *_SOURCES 列表，以查看要调用的内容（CC、CXX、F77）。

以下 Makefile.am 将起作用：

```
TEST = check_foo

check_PROGRAMS = check_foo

check_foo_SOURCES = check_foo.c foo.db.c
check_foo_CFLAGS = 
check_foo_LDADD = 

%.db.c %.db.h: %.h
    echo "int i = 1;" > foo.db.c
    echo "int j;" > foo.db.h

clean-local:
    rm -f *.db.h *.db.c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T21:01:12.680

您需要告诉 automake 这`foo.hdb`是要构建的源文件。将以下内容添加到 Makefile.am：

```
BUILT_SOURCES = foo.hdb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-01T16:58:02.147

让我尝试在现有的直接答案/讨论中添加间接答案/讨论。

我最近离开`make`的原因与您遇到的相同：它非常强大，但有时当事情没有按预期进行时，调试起来有点困难。

我最近发现了[pydoit](https://pydoit.org/)，它作为 make 的可调试替代构建工具非常有前途。由于其中没有“模式规则”的概念，我提出了一个独立的包来完成这项工作：[fprules](https://smarie.github.io/python-fprules/)。

这就是您将如何执行您在帖子中提到的相同任务的方式，使用`doit`和`fprules`：

```
from fprules import file_pattern

# all: check_foo
DOIT_CONFIG = {'default_tasks': ['check_foo']}

CFLAGS = '-I../../clib/src'
LDFLAGS = '-L../../clib/src/.libs'

# check_foo: check_foo.c foo.h corm_foo.h corm_foo.c
#     gcc $(CFLAGS) $(LDFLAGS) $^ -o $@ -lcorm -lsqlite3
def task_check_foo():
    """
    Compiles the `check_foo` executable
    """
    src_files = ('check_foo.c', 'foo.h', 'corm_foo.h', 'corm_foo.c')
    dst_file = 'check_foo'
    return {

        'file_dep': src_files,
        'actions': ["gcc %s %s %s -o %s -lcorm -lsqlite3" % (CFLAGS, LDFLAGS, ' '.join(src_files), dst_file)],
        'verbosity': 2,
        'targets': [dst_file],
        'clean': True
    }

# corm_%.h corm_%.c: %.h
#     PYTHONPATH=../../cgen/src python ../../cgen/src/isti/cgen/run.py $<
def task_gen_corm():
    """
    Generates files `corm_%.h` and `corm_%.c`
    for each header file `%.h`.
    """
    for data in file_pattern('./*.h', dict(h_file='./corm_%.h', c_file='./corm_%.c')):
        yield {
            'name': data.name,
            'file_dep': [data.src_path],
            'actions': ["PYTHONPATH=../../cgen/src python ../../cgen/src/isti/cgen/run.py %s" % data.src_path],
            'verbosity': 2,
            'targets': [data.h_file, data.c_file],
            'clean': True
        }

# clean:
#     rm -f corm_*.h corm_*.c
#     rm -f *.o
# No need to create tasks for this: 
# with 'clean': True, `doit clean` will clean all target files 
```

然后只需`doit`在文件夹中运行。

如果需要，请随时在项目页面上提供反馈：例如，不支持多行命令，如果您也觉得缺少它们，可以为它们投票：[https ://github.com/pydoit/doit/issues/314](https://github.com/pydoit/doit/issues/314)

# php - 向提交表单的用户回显文本

> ID：14944080
> 
> 赞同：0
> 
> 时间：2013-02-18T19:43:40.687
> 
> 标签：php

我有一个 2 文件 PHP 脚本，它允许用户提交带有单个文本区域的表单。该脚本创建一个新的 PHP 页面并将用户重定向到该页面。我想将文本回显给提交表单的用户，而不是其他人。你能帮忙提供一个代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:19:29.587

如果这不是您要查找的内容，请告诉我并相应地对其进行编辑：

HTML：

```
<input type = "text" name = "input"> 
```

PHP：

```
<?php
//user input
$userInput = $_POST['input'];

//not sure how you are getting the email adress but however youre getting it it goes here
$email = "placeholder@123.com";

//create the filename
$myFile = $userInput . ".php";

//create the file
$fh= fopen($myFile, 'w');

//write to the file
fwrite($fh, $email);

//redirect to the new file
header("location:". $userInput .".php");
?> 
```

基本上，它会根据您的用户输入的内容创建一个新页面，并向他们显示一个电子邮件地址。我想它只允许用户看到它，因为它是基于他们输入的内容。否则，最好的方法是在用户系统上存储一个 cookie（就安全性而言）

# c# - 从数据库读取后返回一个列表

> ID：14944081
> 
> 赞同：1
> 
> 时间：2013-02-18T19:43:41.057
> 
> 标签：c#, sql-server

我正在尝试从数据库中的名称表中检索所有名称。我无法检索数据并将其作为列表返回。我该怎么做 ？

```
public List<SelectListItem> getNames()
        {
             try
            {
                using (SqlCommand com = new SqlCommand("SELECT * FROM Names", con))
                {
                    con();
                    SqlDataReader dr = com.ExecuteReader();

                    return ?? // How to return the items that was returned 

                }
            }
 ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:51:17.073

首先实例化列表以保存您的项目（您也可以将其保留为 null，但这取决于调用者的期望），然后通过调用 Read() 遍历[数据](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader_methods.aspx)读取器，直到它返回 false，这意味着没有更多记录可用。

当数据读取器有记录时，您可以通过调用 GetString、GetInt、GetLong 等方法之一来获取列，将您想要获取的列作为参数提供给它。

构造要存储在列表中的类型并将检索到的值添加到其属性中，将新类型添加到列表中。

```
public List<SelectListItem> getNames()
{
    var list = new List<SelectListItem>();
    try
    {
       using (SqlCommand com = new SqlCommand("SELECT * FROM Names", con))
       {
           con();
           SqlDataReader dr = com.ExecuteReader();
           while (dr.Read())
           {
               list.Add(new SelectListItem { 
                          Value = dr.GetString(0), // first column, depends on your table 
                          Text = dr.GetString(1)  // second column, depends on your table
                }); 
           }
    catch(Exception e)
    {
        Trace.WriteLine(r.Message);
    }
    return list;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:47:33.733

您可以遍历返回的所有行，如下所示：

```
var items = new List<SelectListItem>();
while (dr.Read()) 
{
  var valueInColumn1 = dr[1];
  var valueInNamedColumn = dr["ColumnName"];
  ...
  items.Add(new SelectListItem { Text = valueInColumn1.ToString(), Value = valueInNamedColumn.ToString()); 
}
return items; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:46:47.770

请参阅我的代码示例：

```
 public static List<ActionItem> GetAllActions()
        {
            var actionItems = new List<ActionItem>();
            SqlDataReader actionsReader = CatalogDB.GetAllActions();

            try
            {
                while (actionsReader.Read())
                {
                    actionItems.Add(new ActionItem
                                        {
                                            Id = (int)actionsReader["Id"],
                                            Name = actionsReader["Name"] != DBNull.Value ? (string)actionsReader["Name"] : null,
                                            Description = (string)actionsReader["Description"],
                                            CreationDate = (DateTime)actionsReader["CreationDate"]                                                
                                        }
                        );
                }
            }
            finally
            {
                actionsReader.Close();
            }

            return actionItems;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T19:48:06.940

有几种不同的方法，但这可能是最直接的。

```
public List<SelectListItem> getNames()
{
    var list = new List<SelectedListItem>();
    try
    {
        using (SqlCommand com = new SqlCommand("SELECT * FROM Names", con))
        {
            con();
            SqlDataReader dr = com.ExecuteReader();

            while (dr.Read())
            {
                var item = new SelectedListItem();
                item.Value = dr[0];
                list.Add(item);
            }
        }
    }
    catch(Exception ex)
    {
        // ...
    }

    return list;
} 
```

# r - 在多行中打印具有列名的 R 数据框

> ID：14944082
> 
> 赞同：8
> 
> 时间：2013-02-18T19:43:44.860
> 
> 标签：r, dataframe

我有一个带有长列名的 R 数据框。所以当我打印数据框时它太宽了。有没有一种简单的方法可以将数据框打印到屏幕上，并且列名出现在多行中？

我知道我可以缩短名称，但不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:49:37.043

您可以创建一个自定义`format.data.frame`函数，并在 R 找到“长”名称时修改行为：

```
long <- nchar(cn, "bytes") > 256L
cn[long] <- paste(substr(cn[long], 1L, 250L), "...")
names(rval) <- cn 
```

并且由于在所有预处理之后数据帧被打印为矩阵，我们希望`print.default`（实际上，通用`print.default`）像 cat 一样处理转义字符（按原样打印，以便在打印时获得一个新行`\n`）。

**编辑** 实际上，`print.default`转义不可打印的字符（猫在线帮助页面）

> 字符串按“原样”输出（与 print.default 转义不可打印字符和反斜杠 [...] 不同）

所以你应该开始准备你自己的方法（另外，检查将 R 对象转换为 $$\LaTeX$$ 表的选项，可能有一个选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:27:05.037

当奥斯卡的答案被接受时，我认为这实际上可能是一个答案。不幸的是，它只是复制代码`format.daa.frame`并说“在这里做一些未指定的魔法”。这是一些实际上做某事的代码，尽管当时我认为它太粗糙而无法发布。它仍然打印矩阵行和列标题。我不知道如何压制它。也许需要一种黑客攻击的矩阵打印方法？

```
dfrm <- data.frame(reallly_long.nameeeeeeeeeeeeeeeeeeeeeeee=letters[1:5],
                  secondreallly_long.nameeeeeeeeeeeeeeeeeeeeeeee=letters[1:5], short=2)

pdfrm <- function(dfrm) { # first print the names broken into sections
         print(  unname(t(sapply( 1:(max(nchar(names(dfrm))) %/% 12), 
                   # first construct break points to be passed to `substr`
             function(rr) sapply(names(dfrm), 
                         substr, 1+(rr-1)*10, 9+(rr-1)*10) ) )) ,quote=FALSE, 
                   # then print with sufficient gap
                 print.gap=8)
                   # Now print a headerless data.frame with wider spacing
         print( setNames(dfrm, rep(" ", length(dfrm))), print.gap = 15  )}
 pdfrm(dfrm)
#------------------------------
            [,1]             [,2]             [,3] 
[1,]        reallly_l        secondrea        short
[2,]        ng.nameee        lly_long.             
[3,]        eeeeeeeee        ameeeeeee             

1               a               a               2
2               b               b               2
3               c               c               2
4               d               d               2
5               e               e               2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-15T08:03:09.220

**删除矩阵行和列**

我以某种方式编辑了上面[42-](https://stackoverflow.com/users/1855677/42)`print`的代码，以通过创建函数的修改来解决删除矩阵行和列索引的问题。这是代码：

```
pdfrm <- function(dfrm) { # first print the names broken into sections
  mprint <- function(Mn){
    rownames(Mn) <- rep("",nrow(Mn))
    colnames(Mn) <- rep("",ncol(M))
    print(as.table(Mn),quote=FALSE,print.gap=8)
  }
  mprint(unname(
    t(sapply( 1:(max(nchar(names(dfrm))) %/% 12), 
              # first construct break points to be passed to `substr`
              function(rr) sapply(names(dfrm), substr, 1+(rr-1)*10, 9+(rr-1)*10) ) )))
  # Now print a headerless data.frame with wider spacing
  print( setNames(dfrm, rep(" ", length(dfrm))), print.gap = 15  )
}
pdfrm(dfrm) 
```

它输出以下内容：

```
 reallly_l        secondrea        short
        ng.nameee        lly_long.             
        eeeeeeeee        ameeeeeee             

1               a               a               2
2               b               b               2
3               c               c               2
4               d               d               2
5               e               e               2 
```

可以修改上面的代码，以便它可以处理任意和自适应间距。

# sql - 用 reg ex 更新或

> ID：14944086
> 
> 赞同：0
> 
> 时间：2013-02-18T19:44:03.867
> 
> 标签：sql, sql-server

我有一个 mssql 数据库，我正在尝试更新一个包含这样数据的数据库字段..

**1111-2222-3333-4444**

我想浏览所有记录并更改前 3 组数字并保留最后一组。

因此，在更新之后，它们都将是**0000-0000-0000-4444**，而**4444**是以前的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:50:35.247

如果所有行的格式完全相同，并且您希望将每行中的前三组字符更改为完全相同的值，那么这样的事情会起作用：

```
update tblToUpdate
set columnToUpdate = '0000-0000-0000-' + right(columnToUpdate , 4) 
```

在做任何太疯狂的事情之前一定要备份那张桌子！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:51:08.643

```
create table tmp (a varchar(32))

insert into tmp values ('1111-2222-3333-4444')
GO

select '0000-0000-0000-' + substring(a, 16, 4)
from tmp 
```

# ruby - 有一个方法重新定义另一个类的方法

> ID：14944087
> 
> 赞同：0
> 
> 时间：2013-02-18T19:44:07.050
> 
> 标签：ruby

我有一个带有简单方法定义的简单类

```
class Printer
  def print
    p '1'
  end
end 
```

现在我介绍一个单独的脚本，它通过添加一些额外的东西来重新定义打印方法来打印

```
class Printer

  alias :old_print :print
  def print
    old_print
    p '2'
  end
end 
```

我可以以编程方式执行此操作吗？

```
module Test

  def self.redefine_print(arg)
    # redefine Printer's print method so that it will print all of the stuff it should
    # print, followed by the arg I specified
  end
end 
```

所以一个示例交互可能看起来像

```
>>>a = Printer.new
>>>a.print
1
>>>Test.redefine_print("new stuff")
>>>a.print
1
new stuff
>>>Test.redefine_print("more")
>>>a.print
1
new stuff
more 
```

如果现有实例受到更改的影响是可以的（因为将创建打印机的任何实例，进行打印，然后立即处置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:01:18.510

您可以为此使用`define_method`or 一个模块，但它是矫枉过正的（而且可能非常慢）。可以（并且更简单）使用类变量和类方法：

```
class Printer
  @@tokens = []

  def print
    @@tokens.each do |token|
      p token
    end
  end

  def self.add_token(token)
    @@tokens << token
  end
end

Printer.add_token("foo")

printer = Printer.new
printer.print
# foo

Printer.add_token("bar")
printer.print
#foo
#bar 
```

* * *

不过，要回答您的问题，可以使用`class_eval`and重新定义其他类的方法`define_method`：

```
class Printer
  def print
    p '1'
  end
end

module Test
  def self.redefine_print(arg)
    old_print = Printer.instance_method(:print)
    Printer.class_eval do
      define_method(:print) do
        old_print.bind(self).call
        p arg
      end
    end
  end
end

printer = Printer.new
printer.print
# 1

Test.redefine_print("new stuff")
printer.print
# 1
# new stuff

Test.redefine_print("more")
printer.print
# 1
# new stuff
# more 
```

# php - 在控制台上执行 php 脚本

> ID：14944088
> 
> 赞同：2
> 
> 时间：2013-02-18T19:44:16.927
> 
> 标签：php, linux, bash, mongodb

我有一个 php 脚本，我试图在我的 linux 控制台上运行它。我可以使用 curl 在任何浏览器上运行它而不会出现任何错误。这是我得到的错误。

```
PHP Fatal error:  Class 'Mongo' not found in .....

Fatal error: Class 'Mongo' not found in .... 
```

不知道为什么会出现这个错误，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:54:42.267

你应该添加`extension=mongo.so`到你的`/etc/php5/cli/php.ini`文件

您可以运行以下命令来识别您的 php 版本使用的 ini 文件：

```
vps01:/usr/share/php# php --ini
Configuration File (php.ini) Path: /etc/php5/cli
Loaded Configuration File:         /etc/php5/cli/php.ini
Scan for additional .ini files in: /etc/php5/cli/conf.d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:05:56.820

这是因为 php 对 web-server 和 CLI 使用了不同的配置。CLI 配置通常放在`/etc/php5/cli/`. 将其与您的一般 php.ini 文件进行比较，您会发现导致错误的原因。

# android - 当用户在 Android 上按下主页按钮时无法继续录制视频

> ID：14944091
> 
> 赞同：3
> 
> 时间：2013-02-18T19:44:24.610
> 
> 标签：android, android-camera

我正在尝试开发一个与相机硬件交互以录制视频的 Android 应用程序。它将视频录制 10 秒，保存并将其发送到服务器（在后台线程中）并在接下来的 10 秒内开始另一个视频。除非用户按下应用程序中的“停止”按钮，否则预计会无限期地拍摄视频。即使用户按下主页按钮，**视频录制也应该在后台继续**。

目前，如果用户按下主页按钮，则相机预览会生成异常“Java：IO Exception：Invalid preview surface”

这是我使用的代码片段

```
 recorder.setOutputFile(outputFile+"_"+number+".mp4");
        recorder.setPreviewDisplay( holder.getSurface());
        if (recorder != null) {
            try {
                recorder.prepare();
                recorder.start();
            } catch (IllegalStateException e) {
                Toast.makeText(context, e.toString(), Toast.LENGTH_LONG).show();

            } catch (IOException e) {
                Toast.makeText(context, e.toString(), Toast.LENGTH_LONG).show();
            }
        } 
```

即使用户按下主页键，我也可以在后台继续录制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:58:02.827

我没有任何链接记录这种行为，但我想这是不可能的。即使您使用服务，它也会不断抛出异常，说它“失去了表面”。

您也可以检查这个其他[问题](https://stackoverflow.com/questions/11834702/activate-video-camera-in-the-background)。

# c# - 日期时间和文化

> ID：14944102
> 
> 赞同：0
> 
> 时间：2013-02-18T19:45:09.770
> 
> 标签：c#, .net, sql, sql-server

SQL：

```
select * 
from tvideoconference 
where del = 'false' 
and iduserpatient = 0 and startdate >= N'18.02.2013 20:37:07'  
order by startdate 
```

错误：

> *将 nvarchar 数据类型转换为 datetime 数据类型导致值超出范围。*

当我尝试在`de-DE`会话文化中使用以下方法时，出现此错误。更重要的是，在`pl-PL`文化`en-US`方面，这种方法非常有效。

```
public static DataSet getSpecialistConfs(int iduserspecialist)
{
    DateTime? today = DateTime.Now;
    today = today.Value.AddHours(-today.Value.Hour).AddMinutes(-(today.Value.Minute + 1));
    string sql = "select * from tvideoconference where del='false' and startdate >=N'" + today.Value + "' and iduserspecialist=" + iduserspecialist;
    sql += " order by startdate ";

    return Tools.SQLTools.getDataSet(sql);
} 
```

我该如何解决？我尝试了许多解决方案（子字符串，日期格式），效果相同..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:47:23.223

> 我该如何解决？

首先使用参数化 SQL。不要在查询本身中包含值；使用参数并设置这些参数的值。

目前还不清楚是什么`Tools.SqlTools`，但你*真的，真的*应该使用参数化 SQL。这样一来，您就不会将`DateTime`值转换为字符串，因此文化和格式不会妨碍您。此外，您不会受到[SQL 注入攻击](http://bobby-tables.com)...

（此外，完全不清楚为什么要使用`DateTime?`而不是`DateTime`- 它不像`DateTime.Now`可以为空......你应该考虑使用`DateTime.Today`而不是......或`DateTime.UtcNow.Date`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:00:32.470

各种设置（语言、日期格式）仅影响`DateTime`SQL Server Management Studio 中向您显示的方式 - 或者当您尝试将字符串转换为`DateTime`.

SQL Server 支持多种格式 - 请参阅[有关 CAST 和 CONVERT 的 MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。这些格式中的大多数**取决于**您拥有的设置 - 因此，这些设置有时可能有效 - 有时无效。

解决此问题的方法是使用 SQL Server 支持的（稍作调整的）**ISO-8601 日期格式**- 这种格式**始终**有效- 无论您的 SQL Server 语言和日期格式设置如何。

SQL Server 支持的[ISO-8601 格式](http://msdn.microsoft.com/en-us/library/ms180878.aspx)有两种形式：

*   `YYYYMMDD`仅适用于日期（无时间部分）；注意这里：**没有破折号！**，这很重要！`YYYY-MM-DD`不独立于 SQL Server 中的日期格式设置，并且**不会****在**所有情况下工作！

 **或者：

*   `YYYY-MM-DDTHH:MM:SS`对于日期和时间 - 请注意：这种格式*有*破折号（但*可以*省略），并且`T`在`DATETIME`.

这对 SQL Server 2000 和更新版本有效。

如果您使用 SQL Server 2008 或更新版本以及`DATE`数据类型（仅`DATE`-**不是** `DATETIME`！），那么您确实也可以使用该`YYYY-MM-DD`格式，并且该格式也适用于您的 SQL Server 中的任何设置。

不要问我为什么整个话题如此棘手和令人困惑——事情就是这样。但是使用该`YYYYMMDD`格式，您应该适用于任何版本的 SQL Server 以及 SQL Server 中的任何语言和日期格式设置。**

# windows-8 - 围绕 Windows 应用商店应用沙盒工作

> ID：14944110
> 
> 赞同：2
> 
> 时间：2013-02-18T19:45:34.067
> 
> 标签：windows-8

我想创建一个用于学习和个人消费目的的 Metro 应用程序来完成各种低级设备 API 工作，例如跟踪功耗、枚举进程和计算每个进程的 CPU 使用率等......不幸的是，这些桌面 API 是禁止 Metro 应用程序。

我第一次尝试解决这个问题是创建一个非 Windows 存储 C++ 库，它`WINAPI_FAMILY`正确设置了变量，以便使用`QueryIdleProcessorCycleTime()`和[`CallNtPowerInformation()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372675%28v=vs.85%29.aspx). [`ProcessorInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373184(v=vs.85).aspx)不幸的是，当我将第一个参数中的令牌传递给它并带有`STATUS_ACCESS_DENIED`返回码时，正是后一个函数调用失败了。

有趣的是，作为第一个参数`CallNtPowerInformation()`给出时效果很好`SystemBatteryState`，所以我想当作为 Metro 应用程序运行以获取处理器信息时，我缺少某种访问权限。我读到 Metro 应用程序以[非常有限的权限](https://stackoverflow.com/questions/12040390/how-are-winrt-metro-apps-restrictions-enforced)运行，因此我正在寻找一种方法来增加这些权限，以允许我的 API 调用正常通过。为了测试这是进程权限而不是编码错误，我使用了控制台应用程序中的 C++ 库，一切正常。

我真的不想创建第二个桌面后台进程来完成所有脏活并通过套接字将结果传递给 Metro 应用程序。我意识到这可以工作，但我宁愿将所有东西都放在同一个进程空间中。

# python - 在 python 中启动一些东西

> ID：14944117
> 
> 赞同：-5
> 
> 时间：2013-02-18T19:46:03.847
> 
> 标签：python

好的，你可以看到我的问题，我是 python 的新手。我正在构建一个 python 脚本，基本上我希望它执行这一行

```
 /Library/Frameworks/GDAL.framework/Programs/ogr2ogr -f "GeoJSON" output.json input.shp 

```

如何让 python 像在终端中输入一样执行它？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T19:46:50.940

```
import os
os.system('/Library/Frameworks/GDAL.framework/Programs/ogr2ogr -f "GeoJSON" output.json input.shp') 
```

最近，建议使用[subprocess](http://docs.python.org/2/library/subprocess.html)包：

```
subprocess.call(['/Library/Frameworks/GDAL.framework/Programs/ogr2ogr', '-f',
                 '"GeoJSON"', 'output.json', 'input.shp']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:54:19.800

我无法发表评论，但想补充一下上述答案：
subprocess 包允许返回句柄，您可以通过该句柄确定命令是否成功执行。这在您的脚本后面可能很重要：

```
import subprocess  
COMMAND = '/Library/Frameworks/GDAL.framework/Programs/ogr2ogr -f "GeoJSON" output.json input.shp'  
return_code = subprocess.call(COMMAND, shell=True) 
```

# rotation - 尝试重置立方体的初始旋转会产生奇怪的结果

> ID：14944120
> 
> 赞同：0
> 
> 时间：2013-02-18T19:46:23.350
> 
> 标签：rotation, three.js, cubes

我有旋转立方体，我在 x、y 或 z 轴上旋转 90°。旋转完成后，我想通过简单地设置来重置旋转：

```
cube.rotation.x = 0;
cube.rotation.y = 0;
cube.rotation.z = 0; 
```

但是当这完成时，立方体的 x、y、z 轴不会被重置（一个轴助手告诉我）。除此之外，立方体然后稍微倾斜。我设置了一个 JsFiddle 来显示这种行为：http: [//jsfiddle.net/mikel/an86j/23/](http://jsfiddle.net/mikel/an86j/23/)

为什么呢？

# javascript - $timeout 的 Angular Js 回调函数

> ID：14944121
> 
> 赞同：3
> 
> 时间：2013-02-18T19:46:29.563
> 
> 标签：javascript, callback, angularjs

我有那行代码

```
...
$timeout(tempFunc, $scope.sync.getDelay());
... 
```

在我的临时函数中，我最后有那行代码：

```
$scope.sync.releasePrivilege(); 
```

一切正常。但是，当我尝试：

```
...
$timeout(tempFunc, $scope.sync.getDelay());
$scope.sync.releasePrivilege();
... 
```

它没有。我认为我应该将该行作为回调函数写入超时。我不想在我的代码中更改最近的功能，我可以编辑那些行。

有任何想法吗？

**PS：**问题是：

> $scope.sync.releasePrivilege();

超时后没有运行，它立即运行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T06:56:27.950

`$timeout``setTimeout`是一个在测试期间被嘲笑的包装器。@MarkRajcok 关于为什么将其用作阻塞方法不起作用是完全正确的。马克的解决方案也可以解决您的问题。但是，如果重新定位您的代码不可行，那么仍然有好消息！

`$timeout`返回一个承诺（请参阅 参考资料[`$q`](http://docs.angularjs.org/api/ng.%24q)），因此您实际上可以将您想要的内容链接在一起：

```
$timeout( tempFunc, $scope.sync.getDelay() ).then( function() {
  console.log("I'm called only after the timeout.");
  $scope.sync.releasePrivilege();
});

console.log("But I get called immediately."); 
```

如果您愿意，这应该可以正常工作。它仍然没有阻塞。它只是确保`then`调用中的函数*仅在 promise 解决后才*执行，即仅在超时完成并且您的方法已被调用时才执行。

此外，如果需要，您的函数可以返回数据。因此，如果`tempFunc`返回一个表示成功的布尔值，您也可以访问它：

```
$timeout( tempFunc, $scope.sync.getDelay() ).then( function( result ) {
  if ( result ) {
    $scope.sync.releasePrivilege();
  } else {
    // handle the error
  }
}); 
```

有很多的欣喜。耶。

* * *

就像一个注释：在浏览器中睡眠会非常糟糕 - 它会锁定 UI。异步执行使 Web 成为一个很棒的平台！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:12:16.530

超时不提供等效的“睡眠”。$timeout 将工作（在您的情况下为 tempFunc）放在本机事件队列上，因此 tempFunc 将在稍后（在浏览器呈现之后）被调用。 `$scope.sync.releasePrivilege();`因此将在 tempFunc 之前执行。正如您所说，如果您希望 releasePrivilege() 在 tempFunc() 之后执行，请让 tempFunc() 调用它。

# jquery - 如何隐藏li元素内的所有内容并动态插入div

> ID：14944122
> 
> 赞同：0
> 
> 时间：2013-02-18T19:46:35.457
> 
> 标签：jquery, twitter-bootstrap, ajaxform

我正在使用推特引导程序。

```
 <div class="hero-unit span8 pull-right">
       <h5><span class="label label-info">General Account Settings</span></h5>
          <ul class="nav nav-list">
             <c:forEach items="${personUI}" var="entry">
                  <li id="${entry.key}">
                    <div class="span2 pull-left">
                       <span class="label">${entry.key}</span>
                    </div> 
                    <div class="span2">
                       <font size="2"><span><strong>${entry.value}</strong></span></font>
                    </div>
                    <div class="span2 pull-right">
                       <font size="2">
                          <span>
                             <a href="#" id="${entry.key}">
                             <span class="add-on">
                               <i class="icon-pencil"></i>
                             </span>Edit
                                <script type="text/javascript">
                                    $(function(){
                                         $(this).click(function(){
                                             $('li[${entry.key}]').hide();
                                         });
                                    });
                                 </script>
                               </a>
                          </span>
                      </font>
                    </div>
                  </li>
             </c:forEach>
          </ul>
   </div>
</div> 
```

当用户单击编辑按钮时，必须将以下 div 动态添加到与编辑按钮关联的 li 元素中。div 内的表单也应该有一个提交和关闭按钮。在提交/关闭时，在发布过程并使用新值更新相应的 li 元素后，div 应该再次变得不可见。

```
<!-- Name Edit div -->
<div id="nameEdit" style="display:none;">
  <form id="editname" action="<c:url value="/editname" />" method="post">
     <div class="control-group">
        <div class="controls">
            <input type="text" placeholder="First Name" name="firstName" id="firstName" class="input-xlarge help-inline">
            <input type="text" placeholder="Last Name" name="lastName" id="lastName" class="input-xlarge help-inline">
        </div>
    </div>
  </form>
</div> 
```

快照![在此处输入图像描述](../Images/6046c61baa75e503faa6f9906c8f4685.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:30:18.700

您可以查看以下引导插件

[编辑内联插件](http://vitalets.github.com/x-editable/docs.html)

# php - Box.com API 2 - 从网站搜索并从文件夹中显示结果

> ID：14944123
> 
> 赞同：0
> 
> 时间：2013-02-18T19:46:35.477
> 
> 标签：php, forms, api, search, box-api

快速提问...（对于我正在创建的 PHP 内部网）。

是否可以使用他们的 API 2 在 Box.com 帐户中搜索文档？？？

理想情况下，我想：

1.  在 Intranet 中搜索 Box.com（一个对外开放的端口）。
2.  将 Box.com 文件夹中的结果显示为文档标题，即下载文档的链接。

任何“完全”确认这是可能的提示，甚至只是一个或 2 个链接，都将不胜感激 - 因为我一直听到相互矛盾的答案，即这是不可能的。

谢谢 ;-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T14:42:17.443

Yes, it is possible to search a Box.com account through the API. See the documentation at [http://developers.box.com/docs/#search](http://developers.box.com/docs/#search)

However, I don't think you can restrict the search to a single folder at present: you have to be logged in to Box to do the search and the only documented options are the search term and some control over how many results are returned. The documentation does say they will add filters but if you can filter results right now there's nothing in the documentation about it.

# php - 无法访问函数中的“使用”d 类

> ID：14944124
> 
> 赞同：1
> 
> 时间：2013-02-18T19:46:39.873
> 
> 标签：php, import, namespaces

引导脚本包含

```
use Aws\Common\Aws;
use Aws\S3\Enum\CannedAcl;
use Aws\S3\Exception\S3Exception; 
```

我有一个带有代码的函数“aws_s3_put_object”

```
$s3 = Aws::factory('../lib/aws-config.php')->get('s3'); 
```

但我得到了错误

```
PHP Fatal error:  Class 'Aws' not found 
```

为什么函数中无法访问“Aws”类？我究竟做错了什么 ？

# c# - C# 中不需要完整数据库解决方案的持久表/网格的正确解决方案？

> ID：14944131
> 
> 赞同：0
> 
> 时间：2013-02-18T19:47:06.910
> 
> 标签：c#, .net, database, sqlite, datagrid

我的 WinForms C#/.NET 应用程序需要一个表格/网格控件来向最终用户显示记录。记录很简单，只包含两个字段，一个字符串和一个日期/时间字段。我需要持久化数据，我想知道使用什么最有效的控制和存储后端。数据是非关键的（即——不是健康或财务记录，或任何需要广泛安全或任何加密的敏感数据）。

到目前为止，我发现的一种解决方案是将 DataGrid 控件与 SQL Server Compact Edition 结合使用。我从本教程中了解了这个解决方案：

[http://www.dotnetperls.com/datagridview-tutorial](http://www.dotnetperls.com/datagridview-tutorial)

似乎这对我的应用程序来说可能是多余的。此外，我担心安装 SQL Server CE 的复杂性，尤其是在安装过程中涉及管理员与用户帐户权限问题时：

[http://msdn.microsoft.com/en-us/library/aa983326(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa983326(v=vs.80).aspx)

是否存在具有内置文件加载/保存功能的表格或网格控件，它使用简单的磁盘文件作为存储方法，也许是逗号分隔的 ASCII 文件？我想要一些我仍然可以使用 SQL（通过 LINQ）与之交互的东西。另外，我希望这可以透明地完成。也就是说，如果我以后想升级到 SQL 数据库引擎解决方案，我与数据接口的代码不会改变（当然，数据库打开/创建代码除外）。

或者我最好还是硬着头皮继续使用 SQL Server CE 或者 SQLite：

[适用于 .Net 的良好嵌入式数据库解决方案（如 SQLite）](https://stackoverflow.com/questions/2842189/good-embedded-database-solution-like-sqlite-for-net)

如果您对安装问题和易用性有任何警告或轶事，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:19:25.133

我强烈建议您使用嵌入式数据库，因为在不久的将来使用完整的数据库会更容易。SQL Server CE 是一个不错的选择，如果你想变得更大，你可以简单地使用一个完整的 SQL Server 数据库，只需对代码进行最少的更改，SQL Server CE 的唯一缺点是你需要安装它并且它需要.NET Framework 4，除此之外我认为它没有什么大问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:00:03.300

在我的项目中，我们使用对象数据源。网格可以像绑定数据表一样容易地绑定到对象集合。您可以使用简单的序列化引擎存储/恢复数据（XmlSerializer 相当容易实现）。制作一个基本对象，使用 List 或 BindingList 作为数据集，并在需要时在后端对其进行序列化/反序列化。

List 和 BindingList 都支持 Linq 查询。

稍后添加数据库保存就像编写将对象保存到数据库的代码一样简单，代替序列化代码，完全不改变前端。

就“正确”解决方案而言……有很多不同的方法可以做到这一点，这归结为个人喜好，可能还有实际需求和预期的未来发展。我发现使用对象编码更容易，因为数据操作更容易，但如果您要直接输入记录，不需要数据操作，直接进入数据库更容易。这仅取决于数据以及您打算用它做什么。

# javascript - 如何在指令测试中注入服务

> ID：14944133
> 
> 赞同：1
> 
> 时间：2013-02-18T19:47:11.760
> 
> 标签：javascript, angularjs, angularjs-directive

我有一个依赖于其中一项服务的指令。它有一个名为 getcustomers() 的方法。当我尝试测试指令时，如何注入该服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:26:56.913

```
 var app = angular.module('mymod', []);
        app.service('myser', myservicename);
        app.directive('mydir', mydir);

//Before Beforeeach(inject) 
beforeEach(module('mymod'));  //This loads all the necessary dependencies for your directive

spyOn(myservice, 'methodname').andCallThrough();

That's it..above line mocks the service call and lets you call it.... 
```

# c - sprintf 前置额外字符

> ID：14944137
> 
> 赞同：1
> 
> 时间：2013-02-18T19:47:30.650
> 
> 标签：c

我决定编写一个二进制转换器，代码小而简单，它需要一个整数，并且应该输出一个 char* 和生成的二进制字符串。

这里的问题似乎是最后一个 sprintf 似乎总是将最后一个前置字符加倍。

例如，如果答案是 1001001，它将打印 11001001，或者如果它应该是 -10，它会打印 --10，后者特别特别，因为它甚至不在循环中。

```
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>

void bin_string( char** buffer ,int num ){

    bool neg = false;

    if ( num < 0 ){
        neg = true;
        num = ~num+1;
    }

    if( num == 0 )
        sprintf( *buffer, "%d", 0 );

    while( num > 0 ){

        int rem = num%2;

        sprintf( *buffer, "%d%s", rem, *buffer );

        printf("iteration: %s rem: %d\n", *buffer, rem );
        num = num/2;
    }

    if( neg )
        sprintf( *buffer, "-%s", *buffer );
}

int main( int argc, char** argv ){

    char* a = malloc( sizeof(char)*64 );
    bin_string( &a, 73 );

    printf("Result %s\n",a ); /* output is 11001001 but should be 1001001*/

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T19:54:36.133

C99 及以后的声明[`sprintf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sprintf.html)是：

```
 int sprintf(char *restrict s, const char *restrict format, ...); 
```

您违反了`restrict`该声明的一部分。您正在使用，例如：

```
sprintf(*buffer, "-%s", *buffer); 
```

这是试图就地修改缓冲区，并且是未定义的行为。你很幸运，你得到了如此近乎理智的结果——或者可能是不幸的。您不能在调用的尾随参数中使用目标缓冲区`sprintf()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:53:40.487

我想 sprintf 只是不够聪明，无法将缓冲区插入自身。您可能需要有两个缓冲区并交换它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T20:06:26.763

答案是当你对自身进行调用时，你正在调用**未定义**`sprintf()`的行为`*buffer`。你应该做的是：

```
void bit_string(char *buf, int n)
{
    int nbits = sizeof(n) * CHAR_BIT;
    int i;
    for (i = 0; i < nbits; i++) {
        buf[i] = '0' + ((n >> (nbits - i - 1)) & 1);
    }
    buf[nbits] = 0;
} 
```

（是的，我还为您考虑了效率、可读性和可移植性——不客气。）

# php - PHP搜索在之前/之后获取文本

> ID：14944138
> 
> 赞同：1
> 
> 时间：2013-02-18T19:47:32.997
> 
> 标签：php, mysql

我将如何将我的搜索结果变成这样：http: [//i.stack.imgur.com/NfPGs.png](http://i.stack.imgur.com/NfPGs.png)

结果显示特定术语在单元格中的位置。

我目前有这个基本的搜索脚本：

```
 $terms = explode("-", $SQuery);
    $QuerySQL = "SELECT * FROM pages WHERE ";

        foreach ($terms as $each){
        $i++;

        if ($i == 1)
            $QuerySQL .= "Title LIKE '%$each%' OR Content LIKE '%$each%' OR Description LIKE '%$each%'";
        else 
            $QuerySQL .= "OR Title LIKE '%$each%' OR Description LIKE '%$each%' OR Content LIKE '%$each%'";
        }

    $QueryNEW = mysql_query($QuerySQL);

WHILE($datarows_cat = mysql_fetch_array($QueryNEW)):

        $title = $datarows_cat['Title'];
        $Deleted = $datarows_cat['Deleted'];
        $id = $datarows_cat['ID'];
        if ($Deleted != "YES") {
        echo "<a href='/{$id}'>{$title}</a><br/>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:58:11.110

您可以使用[PHP strpos](http://php.net/manual/en/function.strpos.php)查找 +/- 100 个字符：

```
$pos = strpos($mystring, $findme);

if ($pos === false) {
    echo "The string '$findme' was not found in the string '$mystring'";
} else {
    echo "The string '$findme' was found in the string '$mystring'";
    echo " and exists at position $pos";
} 
```

然后使用[PHP substr](http://php.net/manual/en/function.substr.php)获取`$pos+100`and的子串`$pos-100`

```
//For instance your substring could start at the position of the word found minus 100 characters and a length of 200
$result = substr($mystring, $pos-100, 200); 
```

您可以使用[PHP str_replace](http://php.net/manual/en/function.str-replace.php)来格式化您需要的字符串：

```
$word_your_looking_for = "test";
$word_you_want_to_replace_it_with = "<b>test</b>"; //Make it bold

str_replace($word_your_looking_for, $word_you_want_to_replace_it_with, $your_string); 
```

# symfony - 在 configureDatagridFilters 中创建自定义类型字段 - Sonata Admin

> ID：14944146
> 
> 赞同：2
> 
> 时间：2013-02-18T19:47:59.363
> 
> 标签：symfony, filter, sonata-admin

奏鸣曲管理过滤器的文档很少有示例，并且它们没有显示所有字段选项。

所以，我需要在没有操作员选择框的情况下制作或配置文本字段等，这对于简单的用户来说太复杂了。我试图开发一个包含很多领域的搜索表单，但没有成功。我也在尝试制作自定义模板。我尝试了这篇[关于 Sonata Admin Bundle configureShowFields 的原始过滤器中所写的内容](https://stackoverflow.com/questions/10597046/raw-filter-on-sonata-admin-bundle-configureshowfields)

我想要的其他个性化字段是学说_orm_datetime_range，但填充了一些默认日期。我正在使用genemu bundle中的日期选择器，就像在这篇文章中一样：[Sonata Admin Bundle: DatePicker range](https://stackoverflow.com/questions/14443558/sonata-admin-bundle-datepicker-range)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T09:14:54.203

可以像这样隐藏运算符：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $datagridMapper
        ...
        ->add(
            'fieldName',
            null,
            array('operator_type' => 'hidden')
        ),
        ...
    ;
} 
```

干杯，马可

# javascript - D3 鼠标悬停过渡“卡住”

> ID：14944150
> 
> 赞同：5
> 
> 时间：2013-02-18T19:48:14.283
> 
> 标签：javascript, hover, d3.js

假设我想为导航菜单创建常规悬停效果，但我使用 D3 过渡来“软化”效果，而不是 CSS。这适用于`mouseover`-方法。但是，问题在于，如果鼠标在过渡完成之前离开悬停的链接，则过渡会卡住。如何避免这种副作用？`mouseout``.on`

例如，使用此代码，即使鼠​​标移动到其他地方，底部边框仍显示为橙色，如果您执行得太快：

```
d3.selectAll("a")
    .on("mouseover", function() { 
       d3.select(this)
      .style("border-bottom-color", "#fff")
      .transition()
      .duration(1000)
      .style("border-bottom-color", "#B23600"); })
    .on("mouseout", function() { 
       d3.select(this)
      .style("border-bottom-color", "#fff"); }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:12:50.157

我认为正在发生的事情是，当您`.transition`只有 on时`mouseover`，当您在 1000 毫秒到期之前离开时，过渡仍然没有进行。所以当你提早离开时，mouseover 过渡仍在运行，并且没有对 mouseout 事件进行过渡调用来覆盖此过渡。（显然，即使是`mouseout`事件也不会停止`.transition`与事件的关联`mouseover`。）

但是，正如您所指出的，当您`transition`在 mouseout 事件上放置 a 时，问题就消失了。我相信这是因为 mouseout`transition` 优先于`mouseover` `.transition`，因此在事件上设置 a`.transition`会使`mouseout`事件`mouseout`重新得到控制。

如果您`.transition`对`mouseout`事件发表评论，您可以在此处看到它的实际效果。

[http://jsfiddle.net/Ldmv6/1/](http://jsfiddle.net/Ldmv6/1/)

同样值得一读的是[Scott Murray](http://alignedleft.com/)即将出版的 d3 书中的第 10 章：http: [//ofps.oreilly.com/titles/9781449339739/_interactivity.html](http://ofps.oreilly.com/titles/9781449339739/_interactivity.html)

# visual-foxpro - 在 Visual Foxpro 9 中测试主键是否存在

> ID：14944161
> 
> 赞同：0
> 
> 时间：2013-02-18T19:48:50.320
> 
> 标签：visual-foxpro

在我的代码中，我有一个例程在启动时进行一些数据库维护，我使用以下代码从表中删除主键。

```
USE Students EXCLUSIVE
ALTER TABLE Students DROP PRIMARY KEY 
```

如果它只运行一次并且钥匙就在那里，那么生活是美好的。但是，如果它已经被删除，它会生成错误代码 1879，我对其进行测试并执行 RETURN 并且一切正常。

但是，我希望能够在发出 ALTER TABLE 命令之前测试密钥是否存在。

我已经搜索了帮助文件和 MSDN 无济于事，我无法想象没有代码可以检查主键是否存在，但我肯定找不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:38:15.493

您可以使用[ATAGINFO()](http://msdn.microsoft.com/en-us/library/aa978983%28v=vs.71%29.aspx)、[TAG()](http://msdn.microsoft.com/en-us/library/aa978592%28v=vs.71%29.aspx)和[PRIMARY()](http://msdn.microsoft.com/en-us/library/aa978141%28v=vs.71%29.aspx)函数来确定您的主键索引是什么。从 Primary() 的帮助：

```
CLOSE DATABASES
SET PATH TO (HOME(2) + 'Data\')   && Sets path to database
OPEN DATABASE testdata  && Open testdata database
USE Customer     && Open customer table

FOR nCount = 1 TO 254
   IF !EMPTY(TAG(nCount))  && Checks for tags in the index
   ? TAG(nCount)  && Display tag name
   ? PRIMARY(nCount)     && Display primary status
   ELSE
      EXIT  && Exit the loop when no more tags are found
   ENDIF
ENDFOR 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:21:04.200

您可以先检查它的存在：

```
If !Empty(  DBGetProp("Students","TABLE","PrimaryKey") )
  Alter table students drop primary key
endif 
```

# javascript - Jquery 脚本在 Wordpress 中不起作用，尝试了多种入队方法

> ID：14944162
> 
> 赞同：0
> 
> 时间：2013-02-18T19:48:52.500
> 
> 标签：javascript, jquery, wordpress

我已经搜索过类似的问题，但还没有找到答案。

在我使用 Genesis 框架的 Wordpress[开发站点上](http://tsdevtest.com/teahouse/)，我尝试使用以下 jquery 脚本：[smoothscroll.js](http://www.dwuser.com/education/content/quick-guide-adding-smooth-scrolling-to-your-webpages/)和 Matt Verone 的 Dynamic to top（WP 插件版本和手动版本）。两者都不起作用。我已经成功地在 WP 和非 WP 网站上使用了这两种方法。

我通过functions.php中的以下方法将smoothscroll.js和动态到顶部脚本（手动使用时）、easing.js和jquery.ui.totop.min.js排入队列。

```
function tm_scripts()
{       
    wp_register_script( 'easing', get_stylesheet_directory_uri() . '/lib/js/easing.js', array( 'jquery' ), null, true );

    wp_register_script( 'smoothscroll', get_stylesheet_directory_uri() . '/lib/js/smoothscroll.js', array( 'jquery' ), null, true );

    wp_register_script( 'jquery.ui.totop.min', get_stylesheet_directory_uri() . '/lib/js/jquery.ui.totop.min.js', array( 'jquery' ), null, true );

    wp_register_script( 'main', get_stylesheet_directory_uri() . '/lib/js/main.js', array( 'jquery' ), null, true );

    wp_enqueue_script( 'easing' );
    wp_enqueue_script( 'smoothscroll' );
    wp_enqueue_script( 'jquery.ui.totop.min' );
    wp_enqueue_script( 'main' );
}
add_action( 'wp_enqueue_scripts', 'tm_scripts' ); 
```

当我查看代码时，它们出现在页脚中。

然后我尝试让 jquery 通过 wp 和 CSS Tricks 中的以下 jquery enqueue 方法加载：

```
 if (!is_admin()) add_action("wp_enqueue_scripts", "tm_jquery_enqueue", 11);
function tm_jquery_enqueue() {
   wp_deregister_script('jquery');
   wp_register_script('jquery', "http" . ($_SERVER['SERVER_PORT'] == 443 ? "s" : "") . "://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js", false, null);
   wp_enqueue_script('jquery');  
} 
```

没运气。我使用的唯一其他插件是 Contact Form 7 和 Akismet。我觉得某处有冲突，只是不确定是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-24T01:08:19.417

CSS-tricks 代码对我也不起作用，但这是

```
add_action( 'init', 'jquery_register' );
function jquery_register() {
if ( !is_admin() ) {
wp_deregister_script( 'jquery' );
wp_register_script( 'jquery', ('http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js' ), false, null, true );
wp_enqueue_script( 'jquery' );
}
} 
```

或任何其他 jquery 版本...

# list - 显示为列表的层次结构的 ng-repeat

> ID：14944163
> 
> 赞同：0
> 
> 时间：2013-02-18T19:48:54.027
> 
> 标签：list, tree, angularjs

我是 AngularJS 的新手，但到目前为止我真的很喜欢使用它。我使用 AngularJS 的 ng-repeat 在 HTML 中创建树结构，其中节点的子节点 a 放置***在***节点的标记中，如下所示：

```
<div class="parent">
    I am the parent node.
    <div class="child">
        I am a child node.
        <div class="child">
            I am a grandchild.
            etc...
        </div>
    </div>
</div> 
```

但我想做的是使用相同的数据（一棵树）来制作这样的标记：

```
<div class="parent">I am the parent</div>
<div class="child">I am a child</div>
<div class="child">I am a grandchild</div>
<div class="child">I am a great-grandchild</div>
etc.... 
```

即，一个列表。我想出的唯一方法是在我的容器对象上创建一个名为 visibleDescendants 的新方法，它创建一个数组，看起来很像这样：

```
this.visibleDescendants = function(a) {
  if (!a) a = [];
  if (this.selected()) {
    a.push(this);
    if (this.hasChildren()) {
      this.children().forEach(function(child) {
        if (child.selected()) {
          a = child.visibleDescendants(a);
        }
      });
    }
  }
  return a;
}; 
```

然后像这样设置控制器/模板：

```
$scope.visibleDescendants = $scope.container.visibleDescendants();
<div ng-repeat="column in visibleDescendants">...</div> 
```

然后每次将其中一个节点设置为 时`selected(false)`，我都会重置 $scope.visibleDescendants。

与我一直在阅读/正在使用 AngularJS 的其他内容相比，这似乎不是很有效，也不是很惯用。我希望能够找到一种方法来在模板部分中以更具声明性的方式执行此操作。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:30:57.280

我认为我真正想做的是展示问题，不应该影响标记。换句话说，数据和标记应该在结构/语义上匹配；只有 CSS 应该改变它的外观。

也就是说，我认为为了演示目的而重组数据是不明智的。

# java - 将自定义视图添加到 xml 布局

> ID：14944164
> 
> 赞同：4
> 
> 时间：2013-02-18T19:49:02.013
> 
> 标签：java, android, android-layout, graphics, android-widget

我有这个签名视图，可以让你基本上在手机屏幕上画画。现在我需要将此视图添加为背景或将其用作 xml 布局上的小部件，但我不知道该怎么做。所以请任何人都可以帮助我做到这一点。这是我拥有的签名视图类：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.RectF;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class SignatureView extends View {

      private static final float STROKE_WIDTH = 5f;

      /** Need to track this so the dirty region can accommodate the stroke. **/
      private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

      private Paint paint = new Paint();
      private Path path = new Path();

      /**
       * Optimizes painting by invalidating the smallest possible area.
       */
      private float lastTouchX;
      private float lastTouchY;
      private final RectF dirtyRect = new RectF();

      public SignatureView(Context context, AttributeSet attrs, int background) {
        super(context, attrs);
        setBackgroundResource(background);
        paint.setAntiAlias(true);
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(STROKE_WIDTH);

      }

      public void setColor(int color){
          paint.setColor(color);
      }

      /**
       * Erases the signature.
       */
      public void clear() {
        path.reset();

        // Repaints the entire view.
        invalidate();
      }

      @Override
      protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
      }

      @Override
      public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            lastTouchX = eventX;
            lastTouchY = eventY;
            // There is no end point yet, so don't waste cycles invalidating.
            return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            // Start tracking the dirty region.
            resetDirtyRect(eventX, eventY);

            // When the hardware tracks events faster than they are delivered, the
            // event will contain a history of those skipped points.
            int historySize = event.getHistorySize();
            for (int i = 0; i < historySize; i++) {
              float historicalX = event.getHistoricalX(i);
              float historicalY = event.getHistoricalY(i);
              expandDirtyRect(historicalX, historicalY);
              path.lineTo(historicalX, historicalY);
            }

            // After replaying history, connect the line to the touch point.
            path.lineTo(eventX, eventY);
            break;

          default:
//          Log.("Ignored touch event: " + event.toString());
            return false;
        }

        // Include half the stroke width to avoid clipping.
        invalidate(
            (int) (dirtyRect.left - HALF_STROKE_WIDTH),
            (int) (dirtyRect.top - HALF_STROKE_WIDTH),
            (int) (dirtyRect.right + HALF_STROKE_WIDTH),
            (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

        lastTouchX = eventX;
        lastTouchY = eventY;

        return true;
      }

      /**
       * Called when replaying history to ensure the dirty region includes all
       * points.
       */
      private void expandDirtyRect(float historicalX, float historicalY) {
        if (historicalX < dirtyRect.left) {
          dirtyRect.left = historicalX;
        } else if (historicalX > dirtyRect.right) {
          dirtyRect.right = historicalX;
        }
        if (historicalY < dirtyRect.top) {
          dirtyRect.top = historicalY;
        } else if (historicalY > dirtyRect.bottom) {
          dirtyRect.bottom = historicalY;
        }
      }

      /**
       * Resets the dirty region when the motion event occurs.
       */
      private void resetDirtyRect(float eventX, float eventY) {

        // The lastTouchX and lastTouchY were set when the ACTION_DOWN
        // motion event occurred.
        dirtyRect.left = Math.min(lastTouchX, eventX);
        dirtyRect.right = Math.max(lastTouchX, eventX);
        dirtyRect.top = Math.min(lastTouchY, eventY);
        dirtyRect.bottom = Math.max(lastTouchY, eventY);
      }
    } 
```

和我的主要课程：

```
public class Draw extends Activity {
    DrawView drawView;
    SignatureView signature;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Set full screen view
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        signature = new SignatureView(this, null,R.drawable.back);

        setContentView(signature);
        signature.requestFocus();
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.my_options_menu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.clear:
            signature.clear();
            return true;

        case R.id.red:
            signature.setColor(Color.RED);
            return true;

        case R.id.blue:
            signature.setColor(Color.BLUE);
            return true;
        case R.id.yellow:
            signature.setColor(Color.YELLOW);
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public void onBackPressed() {
        this.finish();
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:53:38.210

您将在 XML 布局中按全名引用它，例如`com.example.myapp.SignatureView`.

```
<com.example.myapp.SignatureView android:id="@+id\my_id"
      android:layout_width="match_parent"
      android:layout_height="match_parent">
</com.example.myapp.SignatureView> 
```

您也可以在后面的代码中正常引用它

```
SignatureView sv = (SignatureView)findViewById(R.id.my_id);
sv.setColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:54:01.500

要将其添加到 xml 中，您可以添加一个像这样的标签`<com.example.SignatureView />` ，其中 com.example 的内容被您的包名称替换。您可以照常添加参数和子选项卡。

# c# - MVC 3 WebGrid.Table 页脚参数

> ID：14944165
> 
> 赞同：2
> 
> 时间：2013-02-18T19:49:05.203
> 
> 标签：c#, asp.net-mvc-3, webgrid

我一直在尝试使用 WebGrid 来显示包含网格总计的页脚行。到目前为止，我一直在将总计行附加到结果集中，这部分工作。我的问题是，当你排序时，总行也会被排序，这是我不想要的。此外，当您在混合中添加分页时，总行位于最后一页。

我注意到有一个[WebGrid.Table](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid.table%28v=vs.111%29.aspx)方法，它接受一个名为 footer 的 System.Func 类型的参数。我想这可能允许我设置页脚行，但似乎没有任何关于如何使用它的文档。这个怎么用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:47:41.740

该`footer`参数需要一个 Razor 模板，就像`format`a 的参数一样`WebGridColumn`：

```
var grid = new WebGrid(Model);
var cols = new List<WebGridColumn>();
//add some columns
var table = grid.Table(columns: cols, footer: @<text>Footer</text>);
....
....
@table 
```

这将在一个元素中呈现单词“Footer”，该`tfoot`元素具有`td`一个`colspan`等于`List<WebGridColumn>`. 如果要在某些列下对齐页脚文本，可以将完整的 HMTL 表传递给 Razor 模板委托并设置相应的样式以实现所需的对齐方式，例如：

```
footer: @<table><tr><td colspan="3">&nbsp;</td><td>footer</td><td>&nbsp;</td></tr></table> 
```

或者，您可以使用 jQuery 创建页脚：

```
<script>
    $(function () {
        var html = '<tfoot><tr><td colspan="3">&nbsp;</td><td>footer</td><td>&nbsp;</td>';
        $('table').append(html);
    });
</script> 
```

# javascript - Smartfox 服务器的聊天问题

> ID：14944170
> 
> 赞同：0
> 
> 时间：2013-02-18T19:49:32.440
> 
> 标签：javascript, smartfoxserver

您好我正在使用 smartfox 运行[http://www.impactjs.com](http://www.impactjs.com) 游戏引擎来创建多人纸牌游戏。我遇到了公共聊天 API 的问题。

当我尝试发送 publicmessage 请求时，API 的第 158 行出现错误

> 类型错误：c[d].listener 未定义

除此之外，其他一切几乎都已完全实现，所有其他 API 组件都运行良好。有smartfox专家吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:39:44.827

发现问题，原来另一个事件的监听函数超出范围

# java - 从远程 ftp 服务器提取文件内容而不写入本地磁盘中的文件

> ID：14944178
> 
> 赞同：0
> 
> 时间：2013-02-18T19:50:10.307
> 
> 标签：java, ftp, sftp, apache-tika

在使用 java 以编程方式建立与远程`ftp`或服务器的连接后，无需写入本地系统中的`sftp`文件即可读取文件。`/home/www-data/content/`基本上我想使用[Apache Tika](http://tika.apache.org/)从该路径中提取文件的元数据而不下载。

**更新 ：**

我试图与[JSch](http://www.jcraft.com/jsch/)连接，它是`SSH2`.

```
JSch jsch = new JSch();
session = jsch.getSession(SFTPUSER,SFTPHOST,SFTPPORT);
session.setPassword(SFTPPASS);
java.util.Properties config = new java.util.Properties();
config.put("StrictHostKeyChecking", "no");
session.setConfig(config);
session.connect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:26:48.937

对于使用 JSCH 库的 SFTP，您应该使用 ChannelSFTP.get() 方法并提供不写入磁盘的 OutputStream 实例（例如，ByteArrayOutputStream）。请参阅此处的 JSCH 股票示例：

[http://www.jcraft.com/jsch/examples/Sftp.java.html](http://www.jcraft.com/jsch/examples/Sftp.java.html)

以及 get() 方法的 JavaDoc：

[http://epaul.github.com/jsch-documentation/javadoc/com/jcraft/jsch/ChannelSftp.html#get(java.lang.String,java.io.OutputStream,com.jcraft.jsch.SftpProgressMonitor,int,长）](http://epaul.github.com/jsch-documentation/javadoc/com/jcraft/jsch/ChannelSftp.html#get(java.lang.String,java.io.OutputStream,com.jcraft.jsch.SftpProgressMonitor,int,long))

对于 FTP，您将不得不使用其他东西，因为 JSCH 仅支持 SFTP 协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:05:22.587

您可能想尝试[Apache Commons VFS](http://commons.apache.org/vfs/index.html)（虚拟文件系统）。

他们有一个相当不错[的简单 SFTP 文件下载示例](http://wiki.apache.org/commons/SimpleSftpFileDownload)，但在您的情况下，您可以更改该`process()`示例的方法并让它使用 TIKA 解析文件。

使用 commons vfs，您只需使用`FileObject`. 在 FileObject 上，您可以调用 doGetInputStream() ，然后您可以将其交给 TIKA 进行进一步处理。

# python - Python 读取大型文本文件（几 GB）的最快方法

> ID：14944183
> 
> 赞同：38
> 
> 时间：2013-02-18T19:50:35.203
> 
> 标签：python, performance, optimization, line, chunking

我有一个大文本文件（~7 GB）。我正在寻找是否存在读取大文本文件的最快方法。我一直在阅读有关使用几种方法逐块读取以加快该过程的信息。

例如[effbot](http://effbot.org/zone/readline-performance.htm)建议

```
# File: readline-example-3.py

file = open("sample.txt")

while 1:
    lines = file.readlines(100000)
    if not lines:
        break
    for line in lines:
        pass # do something**strong text** 
```

为了每秒处理 96,900 行文本。其他[作者](https://stackoverflow.com/questions/6335839/python-how-to-read-n-number-of-lines-at-a-time)建议使用 islice()

```
from itertools import islice

with open(...) as f:
    while True:
        next_n_lines = list(islice(f, n))
        if not next_n_lines:
            break
        # process next_n_lines 
```

`list(islice(f, n))`将返回文件下一`n`行的列表`f`。在循环中使用它将为您提供成块的`n`文件

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T19:57:01.550

```
with open(<FILE>) as FileObj:
    for lines in FileObj:
        print lines # or do some other thing with the line... 
```

将一次读取一行到内存，并在完成后关闭文件...

# android - 如何暂停和恢复音频

> ID：14944186
> 
> 赞同：0
> 
> 时间：2013-02-18T19:50:55.233
> 
> 标签：android, audio

我正在尝试制作一个程序，该程序在播放音频 2 一次后播放音频 10 次，然后再次播放音频 10 次，然后播放音频 3 一次，该应用程序有一个按钮来暂停和恢复当前音频以及每个音频更改imageView ，问题是每次我暂停 audio1 时，audio2 也会播放，或者当前音频停止并播放下一个音频。我怎样才能更好地控制音频，我的意思是我想暂停当前音频，另一个等到当前音频完成。

公共类 PrincipalActivity 扩展 ClassePai {

```
Thread thread;
private int currentPosition, duracaoTotal;

private MediaPlayer avemaria, intro, primeiro, segundo, terceiro, quarto,
        quinto, salve;
private ImageView imagem;
private Button btnProximo, btnAnterior, btnPause;

protected Intent intent;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_principal);

    avemaria = MediaPlayer.create(this, R.raw.teste);

    intro = MediaPlayer.create(this, R.raw.teste);

    primeiro = MediaPlayer.create(this, R.raw.ave_maria);

    segundo = MediaPlayer.create(this, R.raw.ave_maria);

    terceiro = MediaPlayer.create(this, R.raw.terceiro_goz);

    quarto = MediaPlayer.create(this, R.raw.quarto_goz);

    quinto = MediaPlayer.create(this, R.raw.quinto_goz);

    salve = MediaPlayer.create(this, R.raw.salve_bencao);

    imagem = (ImageView) findViewById(id.imageViewGoz);
    imagem.setImageResource(com.willamydotcom.osantoterco.R.drawable.g
            + getContador());

    Thread thread = new Thread() {

        public void run() {

            play(primeiro);

            // wait while the current audio plays
            while (primeiro.isPlaying()) {

            }

            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(avemaria);
            while (avemaria.isPlaying()) {

            }
            play(segundo);
            while (avemaria.isPlaying()) {

            }

        }

    };
    thread.start();

    btnProximo = (Button) findViewById(id.btnTest);

    btnProximo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            if (avemaria.isPlaying()) {

                avemaria.start();
            } else if (primeiro.isPlaying()) {
                primeiro.start();
            } else if (segundo.isPlaying()) {
                segundo.start();
            }
        }
    });

    btnPause = (Button) findViewById(id.btnPlay);
    btnPause.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (avemaria.isPlaying()) {

                avemaria.pause();
            } else if (primeiro.isPlaying()) {
                primeiro.pause();
            } else if (segundo.isPlaying()) {
                segundo.pause();
            }

        }
    });

    btnAnterior = (Button) findViewById(id.btnAnterior);
    btnAnterior.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        }

    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_principal, menu);
    return true;
}

public void play(MediaPlayer audio) {
    audio.start();

    audio.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer arg0) {

            imagem.setImageResource(R.drawable.g + getContador());

            setContador(getContador() + 1);

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:50:33.440

首先，不要忘记在播放剪辑之前调用 MediaPlayer.prepare。

您不需要每个 play() 函数之后的 while 循环 - 在您的播放函数中，您正在设置一个 OnCompletionListener - 您可以将逻辑放在那里以决定当您的一个音频剪辑完成时接下来要播放什么 - 所以它只会在剪辑结束时播放，而不是在剪辑暂停时播放。看看 MediaPlayer ( [http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html) ) 中可用的功能，尤其是 setAudioSessionId (你可以给每个剪辑一个 ID，这样你就可以知道哪个剪辑是完整的你的 OnCompletionListener)

实际上，最好只使用一个 MediaPlayer 对象并更改数据源（在必要时使用 setDataSource ......我没有经常使用这个类，所以我不确定设置它的最佳方法是什么。

# javascript - 占据顶部和左侧位置并在javascript中转换为百分比

> ID：14944191
> 
> 赞同：0
> 
> 时间：2013-02-18T19:51:18.073
> 
> 标签：javascript, jquery, html

我有一个正方形区域，可以捕获鼠标点击并在该位置添加一个新的 div。我的目标是拿下那些顶部：Ypx；左：Xpx；坐标并使用javascript将它们转换为百分比，因为方形区域将在不同页面上设置为不同的大小。

我当前的示例[http://jsfiddle.net/p5h26/1/](http://jsfiddle.net/p5h26/1/)

```
//current js for the effect( some small diferences in the click event using backbone events)
$(".div_container").click(function(e, ui){
          var parentOffset = $(this).offset();         
          var relativeXPosition = (e.pageX - parentOffset.left);
          var relativeYPosition = (e.pageY - parentOffset.top);         
          $(".div_container").append('<div class="MAPICON" style="top:'+relativeYPosition+'px; left:'+relativeXPosition+'px;"></div>');
}); 
```

编辑：我希望能够占据顶部和左侧位置并将它们以百分比的形式保存到我的数据库中，我不知道如何为此进行数学计算或从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:14:33.380

您可以使用如下代码计算百分比：

```
var $this = $(this), offset = $this.offset(),
    width = $this.innerWidth(), height = $this.innerHeight();
var parentOffset = $(this).offset();         
var relativeXPosition = (e.pageX - parentOffset.left),
    percentx = relativeXPosition/width;
var relativeYPosition = (e.pageY - parentOffset.top),
    percenty = relativeYPosition/height; 
```

但我认为您确实想从相对定位更改为绝对定位。当你用你的小提琴演奏很多次点击时，附加的 div 开始碰撞并破坏彼此的位置。

# c# - 在 C# 中通过字符串解析的问题

> ID：14944192
> 
> 赞同：0
> 
> 时间：2013-02-18T19:51:19.970
> 
> 标签：c#, char

我正在尝试解析字符串的前三个字符。

```
public List<string> sortModes(List<string> allModesNonSorted)
{
     foreach (string s in allModesNonSorted)
     {
         char firstNumber  = s[0];
         char secondNumber = s[1];
         char thirdNumber  = s[2];

         char.IsDigit(firstNumber);
         char.IsDigit(secondNumber);
         char.IsDigit(thirdNumber);

         combinedNumbers = Convert.ToInt16(firstNumber) + Convert.ToInt16(secondNumber) + Convert.ToInt16(thirdNumber);
     }
     return allModesNonSorted;
} 
```

![](../Images/8432d21b8fa31a85cb340971e76e7a33.png)

它正确识别每个字符，但添加了一个额外的值 53 或 55。下面当我添加数字时，包括 53 和 55。为什么要这样做？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T19:53:13.703

53 是 '5' 的 Unicode 值，55 是 '7' 的 Unicode 值。它向您显示数据的数字和字符版本。

您会注意到`secondNumber`二进制值 0 和字符值 '\0' 也是如此。

如果要将字符串解释为整数，可以使用

```
int myInteger = int.Parse(myString); 
```

特别是如果你知道你总是有格式

```
input = "999 Hz Bla bla" 
```

您可以执行以下操作：

```
int firstSeparator = input.IndexOf(' ');
string frequency = input.Substring(firstSeparator);
int numericFrequency = int.Parse(frequency); 
```

无论频率中有多少位数字，只要数字后跟一个空格字符，这将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:55:24.780

53 是字符 '5' 的 ASCII 值 57 是字符 '7' 的 ASCII 值

这只是 Visual Studio 向您展示有关实际值的额外详细信息。

您可以继续使用您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:53:55.823

因为您将它们视为角色。

字符 '5' 依次是 ASCII 中的第 53 个字符。

最简单的解决方案是从所有字符中减去字符“0”，这将为您提供单个字符的数值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T19:55:56.180

`53`是 '5'和`55`'7' 字符的 ASCII 值（字符在内存中的存储方式）。

如果您需要将它们转换为整数，请查看[此 SO 帖子](https://stackoverflow.com/questions/1303934/convert-string-to-integer)。

# iphone - 视口元标记不适用于 iPhone

> ID：14944196
> 
> 赞同：4
> 
> 时间：2013-02-18T19:51:44.717
> 
> 标签：iphone, ios, meta-tags, viewport, retina-display

我的网站有一个固定的布局，大小为 1090 像素。当我使用这个元标记时：

```
 <meta name="viewport" content="width=device-width, maximum-scale=1"> 
```

页面将加载放大。虽然不是一路（大约 300px 的宽度是看不见的）。

此外，您不能将页面缩小到足以看到整个内容。

width=device-width 不应该解决这个问题吗？

所以我尝试了 0.29 的初始比例，这对 iPhone 来说效果很好。但是当在 iPad 上加载网站时，它显然太小了。

我怎样才能解决这个问题？

**更新：** 所以我只是想，宽度似乎是由我的页面的高度定义的。iPhone上的Safari适合视口中的高度并且不关心适合宽度，也不会让您缩小以查看整个宽度。看起来如果页面更高，你可以看到更多的宽度。横向的宽度刚刚好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T13:17:32.367

如果您的设计没有响应，最好针对特定的设备分辨率，例如 320 宽度，我会选择`<meta name="viewport" content="width=320">`

我还注意到设置为设备宽度的内容往往会在 ios 4 safari 上中断。恐怕这不是 ios safari 的问题，而是导致问题的非响应式设计。

此外，如果设计没有响应，那么使用这种组合是最糟糕的

```
user-scalable=no or maximum-scale=1 with initial-scale=1 
```

玩初始规模并不能解决所有设备的问题。

# javascript - EmberJS 嵌套路由没有得到解决

> ID：14944203
> 
> 赞同：1
> 
> 时间：2013-02-18T19:52:09.580
> 
> 标签：javascript, ember.js, ember-data

我正在尝试在 EmberJS.RC.1 构建中构建一个简单的地址簿应用程序，作为学习它的一部分。我的路线没有通过初始检查。这里有什么问题？ [http://jsfiddle.net/Sz6fj/](http://jsfiddle.net/Sz6fj/)

控制台错误：

> **未捕获的错误：断言失败：无法在未定义的对象上使用 'id' 调用 get** - ember-1.0.0-rc.1.js:52

## 结构体

```
contacts
contacts/new
contacts/<id>
contacts/<id>/edit 
```

* * *

代码：

```
App.Router.map(function(){
  this.resource('contacts', {path: '/'}, function(){
    this.route('new', {path: '/new'});
    this.resource('contact', {path: '/:contact_id'}, function(){
      this.route('edit', {path: '/edit'});
    });//contact
  });//contacts
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:10:52.870

这是因为你没有`contact_id`在模型上。如果您将其更改为主键 ( `id`) 那么它将正常工作：http: [//jsfiddle.net/Sz6fj/1/](http://jsfiddle.net/Sz6fj/1/)

`contact_id`对外键有特殊用途。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T20:10:25.507

试试这个：

```
App.Router.map(function(){
  this.resource('contacts', {path: '/'}, function(){
    this.route('new');
    this.resource('contact', {path: '/contacts/:contact_id'}, function(){
      this.route('edit');
    });
  });
}); 
```

# linux - Linux' hrtimer - 微秒精度？

> ID：14944204
> 
> 赞同：5
> 
> 时间：2013-02-18T19:52:18.413
> 
> 标签：linux, timer, module, kernel, real-time

是否可以在 Linux 主机上以微秒精度执行任务？即，我想在特定的时刻执行一项任务。我知道，Linux 不是实时系统，但我正在寻找 Linux 上的最佳解决方案。

到目前为止，我已经创建了一个内核模块，设置了 hrtimer 并测量了输入回调函数时的抖动（我不太关心实际延迟，重要的是抖动）——大约 20-50us。这并不比在用户空间中使用 timerfd 好很多（也尝试过为进程使用实时优先级，但这并没有真正改变任何东西）。

我正在运行 Linux 3.5.0（只是一个示例，尝试了从 2.6.35 到 3.7 的不同内核），/proc/timer_list 显示 hrtimer_interrupt，我没有在禁用 hrtimer 功能的故障安全模式下运行。在不同的 CPU（Intel Atom 到 Core i7）上进行了尝试。

到目前为止，我最好的想法是将 hrtimer 与 ndelay/udelay 结合使用。这真的是最好的方法吗？我不敢相信不可能以微秒精度触发任务。在内核空间中将代码作为模块运行是可以接受的，但如果代码没有被其他任务中断，那就太好了。我不太关心系统的其余部分，该任务每秒只会执行几次，因此每次执行任务时使用 mdelay/ndelay 将 CPU 烧掉几微秒并不重要。尽管如此，我更喜欢更优雅的解决方案。

我希望这个问题很清楚，找到了很多关于计时器精度的话题，但没有真正解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:09:26.887

你可以从用户空间做你想做的事

1.  使用[`clock_gettime()`](http://linux.die.net/man/3/clock_gettime)with`CLOCK_REALTIME`获取具有`nano`-second 分辨率的时间
2.  用于[`nanosleep()`](http://linux.die.net/man/3/nanosleep)让出 CPU，直到您接近执行任务所需的时间（至少是`milli`- 秒分辨率）。
3.  使用自旋循环，`clock_gettime()`直到达到所需的时间
4.  执行你的任务

该`clock_gettime()`函数[`VDSO`](http://en.wikipedia.org/wiki/VDSO)在最近的内核和现代 x86 处理器中实现 - 需要 20-30`nano`秒才能获得具有`nano`-second 分辨率的时间 - 你应该能够`clock_gettime()`每秒调用超过 30 次`micro`。使用此方法，您的任务应在预期时间的 1/30`micro`秒内调度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:09:13.283

默认的 Linux 内核计时器每毫秒计时一次。微秒*远远*超出了当前用户硬件的能力。

您看到的抖动是由许多因素造成的，例如中断处理和服务更高优先级的任务。你可以通过仔细选择硬件来减少它，只启用真正需要的东西。内核的实时补丁系列（参见[HOWTO](http://rt.wiki.kernel.org/index.php/RT_PREEMPT_HOWTO)）可能是进一步减少它的一个选项。

永远记住，任何收益都会在交互性、稳定性和（最后但并非最不重要的）你在构建、调整、故障排除和防止纸牌屋分崩离析方面的时间方面付出一定的代价。

# git - 将 gitbundle 与制表符而不是空格合并

> ID：14944208
> 
> 赞同：1
> 
> 时间：2013-02-18T19:52:38.510
> 
> 标签：git

我正在尝试将一个 gitbundle 合并到 master 中，它是 bundle 之前的几个提交（例如，参见下图）。问题是 gitbundle 提交所有使用制表符而不是空格，因此 git 认为整个文件都已更改。如果我只是简单地将 gitbundle 合并到 master 中，那么最后几个提交给 master 将几乎消失。

解决此问题的最佳方法是什么？

[http://i.imgur.com/lmwm2pK.png](http://i.imgur.com/lmwm2pK.png)

# php - PHP 检查现有 cookie 在 Wordpress 中不起作用

> ID：14944209
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:52:43.063
> 
> 标签：php, wordpress, cookies

我有一个 PHP 脚本，当我将它直接插入 header.php 或我的 Wordpress 网站主题的任何其他文件时，它不起作用。

我成功地写了一个cookie。然后我用 Java Script 和 PHP 代码检查这个 cookie。但只有 Java Script 会返回“找到”。

```
<script language="javascript">
    <!--
    if (document.cookie.indexOf("users_res") >= 0) {
  alert("found");
}
else {
  alert("not found");
}
    //-->
    </script>
<?php
if (isset($HTTP_COOKIE_VARS["users_res"]))  {
    echo "found";
} else {
    echo "not found";
}
?> 
```

当我将此 PHP 代码放入**test.php**并手动将其上传到我的站点时 - PHP 脚本显示“找到”。但是当我尝试将代码插入到 header.php 或我的 WP 主题的任何其他 PHP 文件中时 - 它显示“未找到”。

我用其他 2 个具有不同主题和 WP 版本的站点测试了这个 PHP 代码，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:57:53.437

我认为您的问题在于`$HTTP_COOKIE_VARS`，将其替换为`$_COOKIE`它应该可以工作（也就是说，如果您正在调用的脚本部分`$HTTP_COOKIE_VARS`在函数内）。

> $HTTP_COOKIE_VARS 包含相同的初始信息，但不是超全局的。（注意 $HTTP_COOKIE_VARS 和 $_COOKIE 是不同的变量，PHP 会这样处理它们）

[http://php.net/manual/en/reserved.variables.cookies.php](http://php.net/manual/en/reserved.variables.cookies.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:58:16.827

替换`$HTTP_COOKIE_VARS`为`$_COOKIE`。`$HTTP_COOKIE_VARS`已弃用且不是超全局的，这可能是您无法访问 cookie 的原因。

# jquery - 根据图像 src 属性向父级添加类

> ID：14944212
> 
> 赞同：2
> 
> 时间：2013-02-18T19:52:56.713
> 
> 标签：jquery, addclass

我遇到了一个问题，CMS 基于模板吐出图像网格，但如果项目的图像少于网格，它也会吐出空白。所以我想向父元素添加一个类来隐藏基于空白图像src属性的空白。这是我所拥有的：

HTML

```
<div class="item">
  <a href="#">
     <img src="image-1.jpg">
  </a>
</div>
<div class="item"> <!-- Need to add class of 'hide' -->
  <a href="#">
     <img src=""> <!-- Blank Img -->
  </a>
</div> 
```

jQuery

```
var image = $("div.item > a > img");
var srcs = image.attr('src');

$.each(image, function () {
   if(srcs.length == 0){
      $(this).closest('div').addClass("hide");
   }
}); 
```

因为我在这方面有点菜鸟，所以这可能很简单。提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:03:03.800

只需使用：

```
$('img[src=""]').parents ('div.item').hide() 
```

描述：选择器查找所有具有空源的 img 元素，并且父方法返回具有给定选择器的 paretns，最后用actuallu 隐藏隐藏 div.item 选择器。

关于@Felix 建议这是更有效的：

```
$('img[src=""]').closest ('div.item').hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:58:01.700

`image.attr('src')`将始终返回**第一个选定元素**`src`的属性值。

 **您要测试每个元素的属性值。您可以使用[`.filter` *^([docs])*](http://api.jquery.com/filter/)轻松完成此操作：

```
$('div.item > a > img').filter(function() {
    return $(this).attr('src').length === 0;
}).closest('div.item').addClass('hide'); 
```

或者使用[属性等于选择器*^([docs])*](http://api.jquery.com/attribute-equals-selector/)：

```
$('div.item > a > img[src=""]').closest('div.item').addClass('hide'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:01:42.197

使用`.attr("src")`将返回`src`属性。

我会使用`each`jQuery 函数`img`。

```
$("img").each(function () {
    if($(this).attr("src") == "") {
         $(this).closest('div').addClass("hide").text("Hide class was added.");
    }
}); 
```

[在此处](http://jsfiddle.net/rAKmE/1/)查看演示。

您可以看到下面的屏幕截图。

我使用了以下 CSS 样式`.hide`：

```
.hide {
    background: lightblue;
} 
```

![在此处输入图像描述](../Images/b58f08bd60fb5c22d1852cf3dafde56c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:01:46.617

我修改了您的代码版本，因此您可以从中学习。您还将学习如何使用 $.each()。

```
 var image = $("div.item > a > img");

 $.each(image, function (idx, element) {
   if($(element).attr('src').length == 0){
      $(this).closest('div').addClass("hide");
       // remove
       $(this).closest('div').hide();
   }
}); 
```

你可以在小提琴上玩它

[http://jsfiddle.net/r84NR/](http://jsfiddle.net/r84NR/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T20:07:16.790

`**[LIVE DEMO](http://jsbin.com/adoveb/2/edit)**`

```
$('img[src=""]').closest('.item').hide(); 
```

另外，`.hide()`您可以使用`.remove()`**

# ns2 - 如何在 ns2 中为有线场景实现 BFS？

> ID：14944213
> 
> 赞同：2
> 
> 时间：2013-02-18T19:53:12.283
> 
> 标签：ns2

如何在 ns2 中为有线场景实现 BFS？

有没有办法找到节点的邻居？

我想根据其子节点计算节点的总需求，其中定义了叶节点的需求。

# php - 服务器/本地主机之间的不同环境正在更改日期格式 - php pdo mysql/oci

> ID：14944227
> 
> 赞同：2
> 
> 时间：2013-02-18T19:54:09.557
> 
> 标签：php, mysql, oracle, pdo

我在配置服务器环境时遇到问题，带有 PDO 的 PHP 没有像 localhost 那样格式化日期。为了测试它，我创建了两个连接（使用 pdo 和 oci 和 mysql）。在 localhost 上，oci 和 mysql 运行正常，但在服务器上只有 mysql 保持正确的格式。

重要细节：在 sqldeveloper 上，它以与 localhost pdo/oci 相同的格式显示数据。

我的本地主机是 WINDOWS 7，我的服务器是 LINUX DEBIAN X64。

服务器上的 pdo/oci 会发生什么？

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Documento sem título</title>
</head>

<body>
<?php
try
{
    $params->host = "172.0.0.0:1521";
    $params->dbname = "geo";
    $params->user = "root";
    $params->pass = "";

    $conn = new PDO("oci:dbname=//$params->host/$params->dbname;charset=UTF8", "$params->user", "$params->pass");
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $conn->prepare("select * from tb_geooficio where tipo = 1 and cadastro_im = 37693500 ");
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    print_r($result);
}
catch(Exception $e)
{
    echo $e->getMessage();
}
?>

<?php
try
{
    $host = "200.0.0.1";
    $user = "postmaster";
    $pass = "^PostM@ster^";
    $db = "bd_controleinternet";

    $conn = new PDO("mysql:host=$host; dbname=$db", "$user", "$pass");
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $conn->prepare("select * from tbl_secretaria where sec_id = 7");
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    print_r($result);
}
catch(Exception $e)
{
    echo $e->getMessage();
}
?>
</body>
</html> 
```

结果：

![在此处输入图像描述](../Images/b3e27636b2f6c383709122d94ecdf124.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:44:33.120

在 Oracle 中，您可以使用以下命令更改用于日期转换的默认格式以匹配 MySQL 默认值：

```
ALTER SESSION SET NLS_DATE_FORMAT='yyyy-mm-dd hh24:mi:ss'; 
```

这将使 Oracle 日期输出与 MySQL 日期一样。

您可以在每次使用 PDO 连接时实现这一点：

```
$driver_options = array( PDO::MYSQL_ATTR_INIT_COMMAND => 'ALTER SESSION...' );
try {
    $dbh = new PDO($dsn, $user, $pw, $driver_options);
}
catch (PDOException $e) {
    // Handle exception
} 
```

Oracle 和 MySQL 还具有显式格式化日期的函数，您可以在查询选择列表中的表达式中调用这些函数。但在 Oracle 中，函数是 TO_CHAR()，而在 MySQL 中，函数是 DATE_FORMAT()，这使得编写独立于 RDBMS 的代码变得更加困难。

* * *

回复您的评论：

似乎 NLS_DATE_FORMAT 可以在 中全局设置`initORCL.ora`，可以通过 LOGON 触发器设置，可以在会话级别设置等。这可以解释两种不同环境中的不同行为。这是一篇关于它的有趣帖子：

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:351017764854](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:351017764854)

# linux-kernel - qemu 和 gdb 的问题

> ID：14944229
> 
> 赞同：3
> 
> 时间：2013-02-18T19:54:14.593
> 
> 标签：linux-kernel, gdb, qemu

我有一个冻结操作系统的设备驱动程序。鼠标甚至不会移动。我正在尝试调试这个问题，我相信一种好的方法是将 gdb 与 qemu 一起使用，这是我以前从未使用过的两件事。有更好的方法吗？

所以首先我需要用我已经完成的调试符号编译内核。

现在，生成了一个名为 vmlinux 的新文件，它与源文件位于同一文件夹中。看来我还需要一个 bzImage 文件[，](http://tuxthink.blogspot.com/2012/04/using-qemu-to-debug-kernel.html) 这样我就可以使用以下命令运行新编译的内核：

```
qemu-system-i386 -kernel bzImage 
```

或在调试模式

```
qemu-system-i386 -s -S -kernel bzImage 
```

我找不到 bzImage 文件。我在哪里可以找到它或这里缺少什么？bzImage 是指我使用 qemu-img create 创建的操作系统映像吗？

另外，我不明白的是现在内核已经编译（vmlinux）我如何用qemu运行它？所以我的问题是，当我使用 qemu 或调试器运行它时，内核是否在我的主操作系统中作为应用程序运行？

还有如何安装我的设备驱动程序？我的理解内核不是Ubuntu所以没有UI？

另外，我安装了 qemu，当我输入 qemu 时，找不到命令。我猜我必须选择一个特定的处理器模拟器，如 qemu-system-i386、qemu-system-x86_64 或 qemu-x86_64？

qemu 与 kvm 命令有何不同或相似之处？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:51:27.933

所以，如果我正确理解了这个问题，那么你就有一个不需要特定硬件的内核模块。当您使用该模块时，系统会冻结，但内核日志没有任何特别之处。

以下内容可能会有所帮助。

## 获取日志

您描述的症状可能仍然是内核 oops 或恐慌的结果。日志记录工具有时在将有关错误的信息输出到日志文件之前就死了。您可以尝试通过串口输出日志，这样应该更可靠。

由于您的内核模块不需要任何特定硬件，因此最简单的方法可能是安装与您使用的虚拟机相同的 Linux 发行版，并将该机器的虚拟串行端口 (COM) 连接到主机系统上的管道。

这通常很容易做到。例如，[这篇博](http://linuxdeveloper.blogspot.com/2012/05/debugging-linux-kernel-over-serial-port.html)文包含主机操作系统和客户操作系统是 Ubuntu 11.10 的详细说明。

[VirtualBox](https://www.virtualbox.org/)用于管理虚拟机。如果您更喜欢 QEMU，这也应该是可能的。我认为使用 VirtualBox 会更容易一些，但这是个人喜好问题。

基本上，您需要执行以下步骤。

*   创建一个虚拟机并在那里安装您需要的 Linux 发行版作为来宾操作系统。
*   在虚拟机的配置中启用串行端口（COM1，...）并将其配置为连接到主机上的特殊文件（“主机管道”），例如`/tmp/vbox_serial`.
*   启动来宾操作系统并调整其引导选项：至少，`console=ttyS0,115200`在引导加载程序菜单中的内核选项中添加或类似的内容。
*   在主机上， start`minicom`或`socat`其他要读取的内容`/tmp/vbox_serial`。
*   这就对了。现在您应该通过`/tmp/vbox_serial`. 如果来宾系统崩溃，您将获得日志，即使它没有保存到来宾本身的文件中。

为了使事情更容易，您可以`socat`在您的主机系统上使用，而不是`minicom`该博客文章的作者所建议的。`minicom`这里可能不需要的力量。

这样，您可以使用`socat`和`tee`将日志保存到`guest.log`文件，同时仍将其输出到控制台：

```
socat /tmp/vbox_serial - | tee guest.log 
```

如果出现内核 oops 或 panic，日志中的回溯通常有助于找出问题所在。

## 检测死锁

如果您通过串行连接或其他方式获得了完整的日志，但仍然没有任何可疑之处，并且您怀疑内核中存在死锁，那么该 `lockdep`工具可能会有所帮助。它包含在内核中（但您可能需要使用 重建内核`CONFIG_LOCKDEP_SUPPORT=y`）。

Lockdep 检测潜在的死锁并将结果输出到内核日志。[此演示文稿](http://linuxplumbersconf.org/2011/ocw//system/presentations/153/original/lockdep-plumbers-2011.odp)可以帮助您分析其输出。

## 追踪设施

如果您需要跟踪内核中的某些事件来调试您的系统，那么有些工具可能会很方便。

*   [Kprobes](http://www.mjmwired.net/kernel/Documentation/kprobes.txt) - 一种可以在内核中几乎任意位置设置的断点。可用于跟踪函数调用等，对性能的影响适中。
*   [SystemTap](http://sourceware.org/systemtap/) - 一个强大的系统来分析内核中发生的事情。其中一部分基于 Kprobes。
*   [Ftrace](http://www.mjmwired.net/kernel/Documentation/trace/ftrace.txt) - 一个包含在内核中的跟踪系统，如果重要的话，比 Kprobes 产生的开销更少。

# php - Ajax 脚本不工作

> ID：14944234
> 
> 赞同：1
> 
> 时间：2013-02-18T19:54:46.153
> 
> 标签：php, jquery, ajax

我知道我应该更具体地说明这个问题，但我不知道它是什么，但是一旦我得到答案，我就会修复这个帖子。

这是简单的 ajax 脚本的问题，但不知何故它不起作用。我在代码上看不到任何错误 =/

jQuery部分：

```
 $(document).ready(function()
{   
    var addFavPhp = '../functions/addfav.php';
    var orange = 'orange';
    var favLinkError = false;
    var favNameError = false;

    $('#addFavButton').click(function()
    {
        var favLink = $('.favLinkInput').val();
        var favName = $('.favNameInput').val();
        var fileName = $('.file').val();

        if(favLink=="")
        {
            $('.favLinkInput').css('border-color',orange);
            favLinkError = true;
        }

        if(favName=="")
        {
            $('.favNameInput').css('border-color',orange);
            favNameError = true;
        }

        if((favLinkError==false) && (favNameError==false))
        {
            $.post(addFavPhp,{favLink:favLink,favName:favName,fileName:fileName},function(addFav)
            {
                $('.favLinkInput,.favNameInput').val('').css('border-color','');
                $('.file option[value=""]').attr("selected", "selected");
                location.reload();
            });
        }
    });
}); 
```

和 php 部分：

```
 <?php session_start(); 

    include('../functions/connect.php');

    if(!empty($_SESSION['username']))
    {
        $username = $_SESSION['username'];
    }else
    if(!empty($_COOKIE['PHPCOOKID']))
    {
        $cookie = htmlspecialchars(trim($_COOKIE['PHPCOOKID']));
        $explode = explode('-', $cookie);
        $username = $explode['0'];
    }

    $favLink = htmlspecialchars(trim($_POST['favLink']));
    $favName = htmlspecialchars(trim($_POST['favName']));
    $fileName = htmlspecialchars(trim($_POST['fileName']));

    $d = array($username,$favLink,$favName,$fileName);
    $req = $DB->prepare('INSERT INTO favs (username,favLink,favName,favFile) VALUE (? , ? , ? , ?)');
    $req->execute($d);

?> 
```

我发现它停止在 $.post 周围工作，但我不知道为什么。它可以在本地服务器上找到。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:58:35.250

看起来这条线`var addFavPhp = '../functions/addfav.php';`是错误的。执行 ajax 时必须使用 http url。类似的东西`/path/to/addfav.php`

# android - Android 在 TextView 中处理 HTML 链接和键入的链接

> ID：14944236
> 
> 赞同：2
> 
> 时间：2013-02-18T19:54:57.883
> 
> 标签：android

我正在尝试在 TextViews 中处理 HTML 和键入的链接，但我无法找到内置工具的组合来执行此操作。我可以做一个或另一个工作，但不能两者兼而有之。

给定以下格式

```
http://google.com
<a href="http://google.com/">Google!</a> 
```

使用 .setMovementMethod(LinkMovementMethod.getInstance()) 我可以使锚标签变成一个链接并在点击时打开一个网页。使用 .setAutoLinkMask(Linkify.ALL) 我可以使键入的链接按预期工作。问题是 setAutoLinkMask 禁用了 setMovementMethod 功能并删除了它在 html 链接上创建的突出显示以及它的单击功能。

我尝试寻找其他有此问题的人，但我相信我因缺乏针对这种情况的适当条款而受阻。有没有其他人遇到过无缝处理这两种情况的解决方案？

这就是我目前所拥有的，只有键入的链接链接在 TextView 中，锚点只显示它包装的文本。

```
mTextViewBio.setText(Html.fromHtml(htmlstring));
mTextViewBio.setAutoLinkMask(Linkify.ALL);
mTextViewBio.setMovementMethod(LinkMovementMethod.getInstance());
mTextViewBio.setLinksClickable(true); 
```

文本视图输出：

[http://google.com](http://google.com)
谷歌！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:28:25.250

问题是当`Linify.addLinks()`被调用时，该方法所做的第一件事就是删除所有跨度。当您使用`Html.fromHtml()` `Spanned`返回时，因此`Linkify`再次解析文本时首先删除“html链接”。我写了一个简单的类`LinkifyExtra`。它有一个额外的方法

```
public class LinkifyExtra extends Linkify {
    public static Spanned addLinksHtmlAware(String htmlString) {
        // gather links from html
        Spanned spann = Html.fromHtml(htmlString);
        URLSpan[] old = spann.getSpans(0, spann.length(), URLSpan.class);
        List<Pair<Integer, Integer>> htmlLinks = new ArrayList<Pair<Integer, Integer>>();
        for (URLSpan span : old) {
            htmlLinks.add(new Pair<Integer, Integer>(spann.getSpanStart(span),
                    spann.getSpanEnd(span)));
        }
        // linkify spanned, html link will be lost
        Linkify.addLinks((Spannable) spann, Linkify.ALL);
        // add html links back
        for (int i = 0; i < old.length; i++) {
            ((Spannable) spann).setSpan(old[i], htmlLinks.get(i).first,
                    htmlLinks.get(i).second, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
        }

        return spann;
    }
} 
```

并像那样使用它

```
 String htmlstring = "http://google.com <a href=\"http://google.com/\">Google!</a>";

    textView = (TextView)findViewById(R.id.textView1);

    textView.setText(LinkifyExtra.addLinksHtmlAware(htmlstring));
    textView.setMovementMethod(LinkMovementMethod.getInstance());
    textView.setLinksClickable(true); 
```

它有效。但是您不能使用`mTextViewBio.setAutoLinkMask(Linkify.ALL);`，因为它会触发`addLinks()`并删除“html 链接”。取决于您想在更大的范围内做什么，此方法可能需要进行一些更改。我跳过检查跨度是否重叠，因为我认为它不会发生，但如果我错了，你可以简单地复制[这个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/text/util/Linkify.java#Linkify.pruneOverlaps%28java.util.ArrayList%29)方法。

# jquery - 更新 Youtube iframe

> ID：14944237
> 
> 赞同：0
> 
> 时间：2013-02-18T19:54:59.020
> 
> 标签：jquery, iframe, youtube, youtube-api, youtube-javascript-api

我正在尝试使用 jQuery 动态更新 Youtube iframe 的 src 属性。这是我的 HTML：

```
<iframe width="480" height="360" src="" frameborder="0"   allowfullscreen></iframe>

<ul>        
<li>Reading comprehension. <span>
 http://www.youtube.com/embed/O9AuuYOdCGc?rel=0</span>
</li>
</ul> 
```

和 JavaScript

```
 $('.manipulated li').click(function(e) {
    var source = $(this).children('span').html();
    $('iframe').attr('src',source);
}); 
```

目标是在我单击 li 项目后，iframe 的源将被更新，用户将在同一个 iframe 上播放不同的剪辑。

任何想法，这里有什么问题，或者如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:00:38.740

在 JQuery 中，当您使用它时，`.html();`它包含标记。在这种情况下，您将 iframe 的源设置为 `<span>http://www.youtube.com/embed/O9AuuYOdCGc?rel=0</span>`，而不仅仅是 url。而是使用：

```
$('.manipulated li').click(function(e) {
    var source = $(this).children('span').text();
    $('iframe').attr('src',source);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:09:04.253

想办法在没有任何 JavaScript 的情况下做到这一点 1\. 将 id 添加到 iframe：2\. 将标签添加到 li，而不是 span，将标签添加到 li，href 属性等于 youtube 链接 3\. 将标签添加到 iframe

```
<iframe name="testClip" id="testClip" width="480" height="360" src="http://www.youtube.com/embed/" frameborder="0" allowfullscreen></iframe>

 <ul>
 <li>
 <a href="http://www.youtube.com/embed/O9AuuYOdCGc?rel=0" target="testClip">Reading comprehension.</a>
 </li>
 </ul> 
```

在这种情况下，iframe 会自动更新。

# android - 光标中的Android SQLiteException“不是错误”

> ID：14944238
> 
> 赞同：3
> 
> 时间：2013-02-18T19:55:00.137
> 
> 标签：android, sqlite, trigger.io

我正在使用编写 Trigger.io 插件来管理 Android 上的本机数据库，并且最近开始出现此异常：

```
android.database.sqlite.SQLiteException: not an error
at android.database.sqlite.SQLiteQuery.nativeFillWindow(Native Method)
at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:86)
at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164)
at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161)
at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:201)
at io.trigger.forge.android.modules.database.NotesDatabase.cursorToArray(NotesDatabase.java:176)
at io.trigger.forge.android.modules.database.NotesDatabase.queryToObjects(NotesDatabase.java:127)
at io.trigger.forge.android.modules.database.NotesDatabase.queryToObjects(NotesDatabase.java:120)
at io.trigger.forge.android.modules.database.API.query(API.java:50) 
```

因此，堆栈跟踪中提到的函数是：

```
//"atomic" is always true when this is called
public synchronized JSONArray queryToObjects(String query, boolean atomic) throws JSONException{
    if(atomic) open();
    Cursor c = db.rawQuery(query, null);
    JSONArray notes = cursorToArray(c);
    c.close();
    if(atomic) close();
    return notes;
}

private JSONArray cursorToArray(Cursor c) throws JSONException{
    final String[] columnNames = c.getColumnNames();
    JSONArray results = new JSONArray();

    for (c.moveToFirst();!c.isAfterLast();c.moveToNext()){
        JSONObject object = new JSONObject();
        for(String name : columnNames){
            int index = c.getColumnIndex(name);
                            //"get" is defined elsewhere, but this line never executes
            object.put(name, get(c, index));
        }
        results.put(object);
    }
    return results;
} 
```

我正在使用的查询是：

从 NoteTag 组中选择不同的主题标签作为名称，计数（主题标签）作为主题标签

有没有人经历过这样的事情？提前感谢您提出的任何建议！

**更新：** 光标似乎有一些根本性的错误：对“getColumnNames”的调用返回一个空数组，调用 c.getCount() 会产生同样的错误。

**另一个更新：**

一些有效的查询：

```
select * from Notes where  localID in (select distinct localID from NoteTag where hashtags == '#gold') and  status != 'delete'  order by timestamp desc  limit 0,25

select * from Notes where  localID in (select distinct localID from NoteTag where hashtags == '#woot' intersect select distinct localID from NoteTag where hashtags == '#yeah') and  status != 'delete'  order by timestamp desc  limit 0,25 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:30:49.960

**解决方案：**问题的根源是我在javascript端调用forge函数的方式。我正在传递一个需要字符串的对象（“查询”参数），该对象被本机桥强制转换为字符串。这个例外是 SQLite 非常迂回的说法“这不是一个查询”。

# spring - 有人说你可以用 Spring + hibernate 处理任何全局（XA）事务，对吗？

> ID：14944241
> 
> 赞同：2
> 
> 时间：2013-02-18T19:55:18.163
> 
> 标签：spring, hibernate, transactions, xa

有人说你可以用 Spring + hibernate 处理任何全局事务，对吗？

其他人说您还需要一个应用程序服务器 XA 数据源或另一个 XA JTA 实现，如 atomikos 或 JbossTS 或 Bitronix。

哪些人是正确的？
A)spring + hibernate
B)spring + hibernate + 另一个 XA JTA 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:00:01.337

Spring 和 Hibernate 都没有提供支持 XA 的事务管理器。因此，您确实需要这样的事务管理器才能使用 Spring/Hibernate 进行分布式事务。

这在[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#transaction-global)中进行了解释。

# java - 在线测试器中的正则表达式匹配但在 JAVA 中不匹配

> ID：14944243
> 
> 赞同：0
> 
> 时间：2013-02-18T19:55:25.637
> 
> 标签：java, regex, pattern-matching

我正在尝试`BetClic`从此字符串中提取文本`popup_siteinfo(this, '/click/betclic', '373', 'BetClic', '60€');`

我写了一个简单的正则表达式，可以在[Regex Tester](http://www.regextester.com/index2.html)上运行，但在 Java 上却不行。

这是正则表达式

```
'\d+', '(.*?)' 
```

这是Java输出

```
Exception in thread "main" java.lang.IllegalStateException: No match found
at java.util.regex.Matcher.group(Matcher.java:485)
at javaapplication1.JavaApplication1.main(JavaApplication1.java:74)
Java Result: 1 
```

这是我的代码

```
Pattern pattern = Pattern.compile("'\\d+', '(.*?)'");
Matcher matcher = pattern.matcher(onMouseOver);                
System.out.print(matcher.group(1)); 
```

`onMouseOver`字符串在哪里`popup_siteinfo(this, '/click/betclic', '373', 'BetClic', '60€');`

我不是正则表达式的专家，但我很确定我的完全没有错！

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:49:38.023

您需要先`find()` *致电* `group(...)`：

```
Pattern pattern = Pattern.compile("'\\d+', '(.*?)'");
Matcher matcher = pattern.matcher(onMouseOver);                
if(matcher.find()) {
  System.out.print(matcher.group(1));
}
else {
  System.out.print("no match");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:58:59.957

您在`group(1)`没有先调用匹配操作（例如`find()`）的情况下调用。-这是`IllegalStateException`.

如果您必须使用该分组案例进行替换，那么如果您只使用**$1**则不需要这样做，因为这`replaceAll()`是匹配操作。

# java - 初学者在Java中的构造函数用法

> ID：14944244
> 
> 赞同：-2
> 
> 时间：2013-02-18T19:55:27.567
> 
> 标签：java, arrays, methods, constructor

**目标 -**

尝试用很少的函数创建类 - 创建数组并用它做一些操作现在我希望用户输入数组的长度并且程序将它返回给用户

**做了什么？-**

创建类：

```
public class Array {
    private int myArray[];
    private int count;

    Array(int length){
        myArray = new int[length];// create mas of diff length
        count =0 ; // count q-ty of elements
    }

    //array out
    public static void outArray(int array[]){
        int length = array.length;
        for (int i=0; i<length+1; i++){
            System.out.println("Element number ["+i+"] is ["+ array[i]+"]");
        }
    } 
```

主要：

```
public static void main(String[] args) throws IOException {
    System.out.println("What length of your array? []");
    Array matrix = new Array(Array.getCharToInt());
    Array.outArray(matrix);
.... 
```

**发生了什么 -**

这里我有一些问题 Array.outArray(matrix);

**问题 -**

我在哪里做错了？也尝试了很多变体，但无法理解我做错了什么。

* * *

更改获取数组实例的函数，但现在我的方法有问题.. - 无法获取数组的长度`

```
Array(int length){
    myArray = new int[length];// create mas of diff length
    int myLength=myArray.length;
}

//array out
public static void outArray(Array array){
    int length = array.myLength; - cant do like this - "myLength cannot be resolved or is not a field". 
```

我想如果我向构造函数添加一些字段，我可以使用它还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:18:57.203

定义数组的正确方法是：

```
private int[] myArray; 
```

所以你的构造函数和类将是：

```
public class Array {
private int[] myArr;
private int count;

public Array(int length) {
    myArr = new int[length];
    count = 0;
}

public int[] getInnerArray() {
    return myArr;
}

public static void processArray(Array array) {
    int[] innerArray = array.getInnerArray();
    int length = innerArray.length;
    for (int i=0; i<length; i++) {
        System.out.println("Next [" + i + "] is - " + innerArray[i]);
    }
} 
```

但您也可以将 public static void processArray(Array array) 方法更改为实例方法：

```
 public void processArray() {
    int[] innerArray = myArr;
    int length = innerArray.length;
    for (int i=0; i<length; i++) {
        System.out.println("Next [" + i + "] is - " + innerArray[i]);
    }
} 
```

主要功能将是：

```
public static void main(String[] arg) {
    System.out.println("What length of your array? []");
    Array matrix = new Array(666);
    matrix.processArray();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:29:31.707

首先，我建议您仔细阅读 Perception 和 Java 的帖子。对于“myLength 无法解决或不是字段”的问题，是因为您正在调用 array.myLength。myLength 是您在调用 Array 类时创建的变量。请记住，每次调用类的新实例时，它们都是分开的。如果您想在一个类中使用不同的方法，请在您的主项目类中创建该类的一个实例，即......您还使用了从未使用过的 Array 类中的私有变量声明。

在 java.lang.reflect.Array 中还有一个名为“Array”的类。如果您尝试创建自己的类而不是覆盖类中的方法，您可能还需要考虑重命名 Array 类。然后执行以下操作：

```
public static void main(String[] args) throws IOException {
MyArrayClass mAC = new MyArrayClass;
System.out.println("What length of your array? []");
int[] matrix = new int[mAC.getCharToInt()];
mAC.outArray(matrix); 
```

然后将您的 outArray 方法更改为

```
public static void outArray(int array[]){
int length = array.length;
for (int i=0; i<length; i++){
System.out.println("Element number ["+i+"] is ["+ array[i]+"]");
} 
```

我喜欢使用私有变量，您尝试过使用，但是您还需要实现获取变量的 getter 和 setter 方法。

# filemaker - Filemaker中的“设置值”添加记录

> ID：14944252
> 
> 赞同：0
> 
> 时间：2013-02-18T19:55:56.960
> 
> 标签：filemaker

我正在使用 Filemaker 脚本（我对 Filemaker 非常缺乏经验），并且我正在尝试使用双嵌套循环来完成对每条记录的所有门户行的更新。我试图基本上在每个门户行的“Desc”字段中附加一个“x”。

![在此处输入图像描述](../Images/774b8fb814ae0c365fd21173a5ca1068.png)

它正在工作，只是内部循环没有退出，它只是不断地将行插入到带有“x”值的门户表中。当我提前退出时，我可以看到外循环工作正常。“设置字段”是否应该创建新行？在这种情况发生之前，我怎样才能让它退出？我知道我可以使用“替换字段内容”，但我只是在自学 Filemaker 脚本，并想知道为什么这不起作用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:33:43.740

您需要在关系图上的关系详细信息下取消选中“允许通过此关系在此表中创建记录”选项。

选中此选项后，使用该关系创建的任何门户在底部都有一个空白行，允许添加新记录。您的“设置字段”脚本步骤是在门户的新记录行中设置该字段，从而创建新记录。

取消选中该选项，该空白行消失，脚本将退出。

如果您想在此处保留该空白行，您的另一个选择是修改您的脚本，以便它实际上适用于其关联表中的相关记录，而不是直接在门户上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:42:41.480

另一种选择是使用“Exit Loop If”脚本步骤来测试门户相关记录中的特定字段是否为 IsEmpty。

# c# - 在 EmguCV 中使用 cvKMeans2 的异常

> ID：14944253
> 
> 赞同：2
> 
> 时间：2013-02-18T19:56:01.597
> 
> 标签：c#, .net, opencv, emgucv, k-means

我正在尝试使用 C# 在 Emgu CV 中转换[这段代码。](https://stackoverflow.com/a/10242156/130993)我认为我将大部分内容转换为 EmguCV 中应有的内容，但 cvKMeans2 不断向我射击没有意义的异常。

这是我的代码：

```
Image<Bgr, float> src = new Image<Bgr, float>("c:\\blanc.jpg");
         Matrix<Single> samples = new Matrix<Single>(src.Rows * src.Cols, 3);
         for (int y = 0; y < src.Rows; y++)
         {
            for (int x = 0; x < src.Cols; x++)
            {
               for( int z = 0; z < 3; z++)
               {
                  if(z == 0)
                     samples[y + x * src.Rows, z] = Convert.ToSingle(src[y, x].Blue);
                  else if(z == 1)
                     samples[y + x * src.Rows, z] = Convert.ToSingle(src[y, x].Green);
                  else if (z == 2)
                     samples[y + x * src.Rows, z] = Convert.ToSingle(src[y, x].Red);
               }
            }
         }

         MCvTermCriteria term = new MCvTermCriteria(10000, 0.0001); 
         term.type = TERMCRIT.CV_TERMCRIT_ITER | TERMCRIT.CV_TERMCRIT_EPS;

         int clusterCount = 3;
         Matrix<Int32> labels = new Matrix<Int32>(src.Width, 1);
         int attempts = 5;
         Matrix<Single> centers = new Matrix<Single>(clusterCount, samples.Cols);
         CvInvoke.cvKMeans2(samples, clusterCount, labels, term, attempts, IntPtr.Zero, KMeansInitType.PPCenters, centers, IntPtr.Zero );

         Image<Bgr, float> new_image = new Image<Bgr, float>(src.Size);

         for (int y = 0; y < src.Rows; y++)
         {
            for (int x = 0; x < src.Cols; x++)
            { 
               //nTotal++;
               int cluster_idx = labels[y + x * src.Rows, 0];

               float n1 = centers[cluster_idx, 0];
               float n2 = centers[cluster_idx, 1];
               float n3 = centers[cluster_idx, 2];

               MCvScalar sca = new MCvScalar(n1, n2, n3);
               CvInvoke.cvSet2D(new_image, y, x, sca);
            }
         }

         CvInvoke.cvShowImage( "clustered image", new_image );
         CvInvoke.cvWaitKey( 0 ); 
```

我不断收到此异常：

> 附加信息：OpenCV：labels.isContinuous() && labels.type() == CV_32S && (labels.cols == 1 || labels.rows == 1) && labels.cols + labels.rows - 1 == 数据。行

标签必须是 Single 类型没有意义，因为我需要在 cvKMeans2 之后将其用作循环中的索引。谁能帮我让这段代码正常工作？如果此代码有效，我们很有可能会购买 Emgu 的商业许可证以在我们的软件中使用。

谢谢！

***编辑***

根据下面的答案，我已经修改了我的代码并让它像这样工作：

```
Image<Bgr, float> src = new Image<Bgr, float>(@"C:\\test.png");
            Matrix<float> samples = new Matrix<float>(src.Rows * src.Cols, 1, 3);
            Matrix<int> finalClusters = new Matrix<int>(src.Rows * src.Cols, 1);

            for (int y = 0; y < src.Rows; y++)
            {
                for (int x = 0; x < src.Cols; x++)
                {
                    samples.Data[y + x * src.Rows, 0] = (float)src[y, x].Blue;
                    samples.Data[y + x * src.Rows, 1] = (float)src[y, x].Green;
                    samples.Data[y + x * src.Rows, 2] = (float)src[y, x].Red;
                }
            }

            MCvTermCriteria term = new MCvTermCriteria(10000, 0.0001);
            term.type = TERMCRIT.CV_TERMCRIT_ITER | TERMCRIT.CV_TERMCRIT_EPS;

            int clusterCount = 3;
            int attempts = 5;
            Matrix<Single> centers = new Matrix<Single>(clusterCount, samples.Cols, 3);
            CvInvoke.cvKMeans2(samples, clusterCount, finalClusters, term, attempts, IntPtr.Zero, KMeansInitType.PPCenters, centers, IntPtr.Zero);

            Image<Bgr, Byte> new_image = new Image<Bgr, Byte>(src.Size);

            for (int y = 0; y < src.Rows; y++)
            {
                for (int x = 0; x < src.Cols; x++)
                {
                    int cluster_idx = finalClusters[y + x * src.Rows, 0];
                    MCvScalar sca1 = CvInvoke.cvGet2D(centers, cluster_idx, 0);
                    Bgr color = new Bgr(sca1.v0, sca1.v1, sca1.v2);

                    PointF p = new PointF(x, y);
                    new_image.Draw(new CircleF(p, 1.0f), color, 1);
                }
            }

            CvInvoke.cvShowImage("clustered image", new_image);
            CvInvoke.cvWaitKey(0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:11:08.843

我看一下[您提到的示例，](https://stackoverflow.com/questions/10240912/input-matrix-to-opencv-kmeans-clustering/10242156#10242156)并编写了一些适用于输入 rgb 图像的 vanilla 代码，这些图像在 rgb 空间中执行 kmeans。您可以调整一些参数以使其适应您的需要。

以这个输入图像为例： ![输入图像](../Images/ee32c5e76f4bb1bf5cea803ea020090c.png)

***EMGUCV 代码***

```
Bgr[] clusterColors = new Bgr[] {
        new Bgr(0,0,255),
        new Bgr(0, 255, 0),
        new Bgr(255, 100, 100),
        new Bgr(255,0,255),
        new Bgr(133,0,99),
        new Bgr(130,12,49),
        new Bgr(0, 255, 255)};

        Image<Bgr, float> src = new Image<Bgr, float>("fotobp.jpg");            
        Matrix<float> samples = new Matrix<float>(src.Rows * src.Cols, 1, 3);
        Matrix<int> finalClusters = new Matrix<int>(src.Rows * src.Cols, 1);

        for (int y = 0; y < src.Rows; y++)
        {
            for (int x = 0; x < src.Cols; x++)
            {                    
                samples.Data[y + x * src.Rows, 0] = (float)src[y, x].Blue;
                samples.Data[y + x * src.Rows, 1] = (float)src[y, x].Green;
                samples.Data[y + x * src.Rows, 2] = (float)src[y, x].Red;
            }
        }

        MCvTermCriteria term = new MCvTermCriteria(100, 0.5);
        term.type = TERMCRIT.CV_TERMCRIT_ITER | TERMCRIT.CV_TERMCRIT_EPS;

        int clusterCount = 4;            
        int attempts = 5;
        Matrix<Single> centers = new Matrix<Single>(clusterCount, src.Rows * src.Cols);            
        CvInvoke.cvKMeans2(samples, clusterCount, finalClusters, term, attempts, IntPtr.Zero, KMeansInitType.PPCenters, IntPtr.Zero, IntPtr.Zero);

        Image<Bgr, float> new_image = new Image<Bgr, float>(src.Size);

        for (int y = 0; y < src.Rows; y++)
        {
            for (int x = 0; x < src.Cols; x++)
            {
                PointF p = new PointF(x, y);
                new_image.Draw(new CircleF(p, 1.0f), clusterColors[finalClusters[y + x * src.Rows, 0]], 1);
            }
        }

        CvInvoke.cvShowImage("clustered image", new_image);
        CvInvoke.cvWaitKey(0); 
```

结果（CLUSTER_NUM = 4） ![在此处输入图像描述](../Images/ab647cea3defb8a3fce375edbf4dad64.png)

# c# - 使用 C# 指定的强制转换无效错误

> ID：14944254
> 
> 赞同：3
> 
> 时间：2013-02-18T19:56:03.557
> 
> 标签：c#, asp.net, sql-server-2008

我正在尝试将 select 语句结果存储在 C# 变量中，但出现此错误

> “指定的演员表无效”

当我运行它时。我不知道如何解决它请帮忙

```
SqlConnection con1 = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);

        SqlCommand cmd1 = new SqlCommand("select cast(round(sum(CAST(AvgNumbers AS numeric(12,2))),2) as decimal(12,2)) AS [Average Days] from MainTable ", con1);

        cmd1.Connection = con1;
        con1.Open();
        Int32 result = (Int32)cmd1.ExecuteScalar();
        con1.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T19:57:56.740

`cmd1.ExecuteScalar()`没有返回一个装箱的整数。将它分配给一个对象并在调试器中查看它以了解它的真正含义。

我猜它会返回一个小数或双精度，你需要这样做：

```
Int32 result = (Int32)(double)cmd1.ExecuteScalar(); 
```

或者：

```
Int32 result = (Int32)(Decimal)cmd1.ExecuteScalar(); 
```

[编辑回应以下评论中的问题]

要保留十进制值，只需执行以下操作：

```
Decimal result = (Decimal) cmd1.ExecuteScalar(); 
```

如果需要，您可以将小数转换为双精度：

```
double result = (double)(Decimal) cmd1.ExectuteScalar(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:59:18.940

结果不是`Int32`，基本上。你正在投射它`Decimal(12, 2)`- 所以我不确定你为什么期望它。

我的猜测是它要么是 a`double`要么是`decimal`- 但如果你将调用与演员分开并查看调试器，它应该是显而易见的：

```
object result = cmd1.ExecuteScalar();
// Now look at the type of the value of result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:01:13.470

你的结果很`Int32`明显，所以你可以使用它；

```
var result = cmd1.ExecuteScalar(); 
```

之后，您可以检查它是哪种类型。或使用；

```
object result = cmd1.ExecuteScalar(); 
```

也许你可以施放它。请记住，您可以轻松地在调试器中查看它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T19:58:43.163

您在 SQL 中将值转换为小数，因此请尝试在您的 c# 代码中将值转换为小数。

# ruby-on-rails - 如何在使用 Rails 运行的 Sequel 中获取当前数据库对象？

> ID：14944256
> 
> 赞同：1
> 
> 时间：2013-02-18T19:56:15.117
> 
> 标签：ruby-on-rails, ruby, sequel

我需要在 Rails 应用程序中从 Sequel 获取当前数据库对象。由于各种原因，我无法定义它，就像“ [Ruby Sequel 模块中的事务：如何获取 DB 对象？](https://stackoverflow.com/questions/13593295/transactions-in-ruby-sequel-module-how-to-get-db-object) ”中建议的那样。我的数据库使用 database.yml 中定义的 JDBC。

我可以得到`Database.current`，但似乎我不能对它做任何操作，比如添加一个记录器，就像我可以在另一个应用程序中为 Sequel 定义的 DB 对象上做的那样：

```
lger = Logger.new(STDOUT)
DB.sql_log_level = :debug
DB.loggers << lger 
```

这样做`Database.current`会`Database.current()`导致“没有这样的方法”异常，所以我需要获取 Sequel 使用的实际 DB 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:59:13.757

我花了一段时间才记住如何做到这一点，而且，我并不完全肯定它会与 Rails 一起工作，但是......

当使用带有 Sequel 的模型时，这可能是 Rails 发生的情况，您可以获得“DB”对象。我有一张桌子叫`acls`. 我的型号是`Acl`。当我加载我的模型时，我可以这样做：

```
require 'sequel'
require 'logger'

# ... make my connection then load my models ...

# turn on logging...
Acl.db.loggers << Loggers.new(STDOUT)
Acl.first 
# => I, [2013-02-18T16:55:13.561148 #94494]  INFO -- : (0.010879s) SELECT * FROM `acls` LIMIT 1 
```

而且，这也有效：

```
Acl.db.sql_log_level = :debug 
```

# rabbitmq - 用于插件开发的 RabbitMQ 内部 API 参考在哪里

> ID：14944259
> 
> 赞同：1
> 
> 时间：2013-02-18T19:56:41.437
> 
> 标签：rabbitmq

我正在开发一个自定义的**RabbitMQ 插件**，但我在任何地方都找不到 RabbitMQ 内部的**内部 API**参考（当然是 erlang）。这是在某处记录的吗？请注意，这不是我正在寻找**的 erlang 客户端 API ，只是在 RabbitMQ 插件中使用的内部 API 参考。**

举个例子：我想从插件中识别监听端口而不查看配置文件。我假设配置文件是在 RabbitMQ 内部加载的，并且可以从一些内部 API 访问，例如 rabbitmq:getenv("port") 等。这不是我的问题所特有的，我只需要知道整个**内部**API 参考在哪里是

# excel - 选择选项后VBA Excel组合框不显示值

> ID：14944261
> 
> 赞同：0
> 
> 时间：2013-02-18T19:56:43.717
> 
> 标签：excel, vba, combobox, populate

```
Private Sub ComboBox1_DropButtonClick()

    If ComboBox1.ListCount > 0 Then
    ActiveSheet.ComboBox1.Clear
    End If

    For N = 1 To ActiveWorkbook.Sheets.Count - 1
    ComboBox1.AddItem ActiveWorkbook.Sheets(N).Name
    Next N

End Sub 
```

我是 VBA 新手，所以请多多包涵。我可能不是最好的开始方式。

该代码正在获取我的工作簿中每个工作表的名称（最后一张工作表除外）并将它们添加到组合框列表中。起初，每次我单击下拉列表时，都会再次添加所有工作表名称，从而使列表随着每次单击而继续增长。我的补救措施是在每次单击时首先清除组合框并重新填充。

但是，使用 clear 选项时，在进行选择时不会显示该值。不使用 clear 选项时显示正常。其他一切仍然有效，但我需要它来显示所选值，以免用户感到困惑。

有没有更好的方法来完成我所需要的？

编辑：如果重要的话，这不在用户表单中，它只是直接位于工作表上的活动 x 组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:14:20.703

像下面这样的东西会起作用。但是，我会质疑为什么每次有人点击它时你都想重新填充组合框。当工作簿打开或工作表被激活时，为什么不这样做呢？

```
Private Sub ComboBox1_DropButtonClick(ComboBox1 As ComboBox)
    Dim strSelected As String
    If ComboBox1.ListIndex > -1 Then
      strSelected = ComboBox1.List(ComboBox1.ListIndex)
    End If
    If ComboBox1.ListCount > 0 Then
      ActiveSheet.ComboBox1.Clear
    End If

    For N = 1 To ActiveWorkbook.Sheets.Count - 1
      ComboBox1.AddItem ActiveWorkbook.Sheets(N).Name
      If strSelected = ActiveWorkbook.Sheets(N).Name Then
        ComboBox1.ListIndex = N - 1
      End If
    Next N
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:15:24.167

这是一个非常奇怪的行为 - 但是当您选择列表中的项目时会再次触发 DopButtonClick 事件。因此，刚刚分配的值`.Clear`在第二次运行时被清除。

此代码修复它：

```
Private Sub ComboBox1_DropButtonClick()
    Dim strValue As String
    Dim n As Integer
    strValue = ComboBox1.Value

    If ComboBox1.ListCount > 0 Then
        ActiveSheet.ComboBox1.Clear
    End If

    For n = 1 To ActiveWorkbook.Sheets.Count - 1
        ComboBox1.AddItem ActiveWorkbook.Sheets(n).Name
    Next n
    ComboBox1.Value = strValue

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-06T20:28:32.503

非常好的解决方案彼得。就我而言，我有一个可以在两个组合框运行之间更改的项目列表。如果选定的组合框项目不再在组合列表中，则在下一次运行时，该行：

```
ComboBox1.Value = strValue 
```

抛出错误。

我发现声明一个公共索引：

```
Public nr As Integer 
```

并在组合框代码中进行计数，以便每个按钮操作仅运行一次 .clear ，这使得它独立于列表更新工作：

```
Private Sub ComboBox1_DropButtonClick()
Dim n As Integer

If nr = 0 Then
    ActiveSheet.ComboBox1.Clear
    nr = 1
Else
    nr = 0
End If

For n = 1 To ActiveWorkbook.Sheets.count - 1
    ComboBox1.AddItem ActiveWorkbook.Sheets(n).Name
Next n
End Sub 
```

# android - 如何从 webView1 中的链接加载 webView2 中的 html 文件

> ID：14944264
> 
> 赞同：0
> 
> 时间：2013-02-18T19:56:46.970
> 
> 标签：android, html, webview

我使用 webView1 + 本地 html 文件，例如带有一些链接的自定义导航栏。

单击链接时，请求的 html 文件必须加载到 webView2 中。

这可能吗？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); // Fixed Portrait orientation
    requestWindowFeature(Window.FEATURE_NO_TITLE); // No app title bar
    setContentView(R.layout.activity_main);

    myNavbarView = (WebView)findViewById(R.id.navbarView);
    myNavbarView.getSettings().setJavaScriptEnabled(true);
    myNavbarView.setVerticalScrollBarEnabled(false);
    myNavbarView.setHorizontalScrollBarEnabled(false);
    myNavbarView.setWebViewClient(new WebViewClient());
    myNavbarView.loadUrl("file:///android_asset/HTML/navbar.html");

    myWebView = (WebView)findViewById(R.id.webView);
    myWebView.getSettings().setJavaScriptEnabled(true);
    //hack to load twitter
    myWebView.getSettings().setUserAgentString("Mozilla/5.0 (Linux; U; Android 2.0; en-us; Droid Build/ESD20) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17");
    myWebView.setVerticalScrollBarEnabled(false);
    myWebView.loadUrl("file:///android_asset/HTML/index.html"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:09:50.450

不知道为什么要使用这样的两个 webView。

但是，**一种解决方案**是将**Javascript 接口桥**添加到您的**navWebView**并让它**将 URL 传递回 Java，**然后 Java 可以通过**loadUrl将其传递给****第二个 webView**。

 **关于 JSInterface 的信息：http: [//developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T16:30:18.373

从这个例子简化工作：http: [//blog.objectgraph.com/index.php/2012/03/16/android-development-javascript-bridge-example-fully-explained/](http://blog.objectgraph.com/index.php/2012/03/16/android-development-javascript-bridge-example-fully-explained/)

JavaScriptHandler.java

```
public class JavaScriptHandler {
    MainActivity parentActivity;
    public JavaScriptHandler(MainActivity activity)  {
        parentActivity = activity;
    }
    public void setResultUrl(String url){
        this.parentActivity.javascriptCallUrl(url);
    }
} 
```

MainActivity.java

```
// add line:
myNavbarView.addJavascriptInterface(new JavaScriptHandler(this), "MyHandler");

// Verwerk calls van navbar.html via JavaScriptHandler.java
public void javascriptCallUrl(final String url){
    Log.v(TAG, "MainActivity JSHandler used: " + url);
    // I need to run set operation of UI on the main thread.
    // therefore, the above parameter "url" must be final
    runOnUiThread(new Runnable() {
        public void run() {
           myWebView.loadUrl(url);
        }
    });
} 
```

导航栏.html

```
<a href="#" onclick="window.MyHandler.setResultUrl('file:///android_asset/HTML/index.html')">...</a> 
```**

# append - 使用 iMacros 将文本附加到输入字段中

> ID：14944265
> 
> 赞同：1
> 
> 时间：2013-02-18T19:56:53.187
> 
> 标签：append, imacros

*请注意，这是针对 VERSION BUILD=6011206

我想知道是否有人知道 iMacros 的脚本，它可以让您将文本附加到输入字段而不覆盖任何内容。

更具体地说，这是一个用于我想要更新的笔记的输入框，而不会丢失任何以前的笔记。谁能提供这个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:19:44.813

您可以尝试提取文本的当前值，然后将其设置为变量，然后在 JavaScript 中添加字符串并填充文本字段。

```
var macroCurrent;

macroCurrent ="CODE";
macroCurrent +="TAG POS=1 TYPE=some_type ATTR=CLASS:some_class EXTRACT=TXT"+"\n";

var macroAppend;

macroAppend ="CODE";
macroAppend +="TAG POS=1 TYPE=some_type ATTR=CLASS:some_class CONTENT={{text}}"+"\n";

var text_to_fill="something here";

iimPlay(macrocurrent)

var text=iimGetLastExtract();

text=text+text_to_fill;

iimSet("text",text)
iimPlay(macroAppend) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T02:25:35.923

也许很久以前问过，但我从谷歌偶然发现，所以我想有人可能有用。有更简单的方法，不使用 javascript 首先从字段中提取。流程就像发布的 IceD，但纯粹是 Imacros：提取字段并存储到 var。将您的文本附加到 var。不要忘记在需要时清理变量。编码：

```
SET !VAR1 {{!EXTRACT}}
SET !EXTRACT NULL
TAG POS=1 TYPE=SPAN ATTR=ID:result_box EXTRACT=TXTALL // the text which to append
ADD !VAR1 {{!EXTRACT}} // append! 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-02T14:57:16.323

当您需要在输入中添加文本时，您必须执行 2 .. 1 - 录制，imacros 将自动保存并记住此文本并在播放后将其添加到输入中 2 - 使用此代码 // 这是输入facebook 中的电子邮件 TAG POS=1 TYPE=INPUT:EMAIL FORM=ID:login_form ATTR=ID:email CONTENT=------- 用您的文本更改 ------

# upload - 如何上传 x3dom 文件以像画廊一样显示

> ID：14944266
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:56:55.507
> 
> 标签：upload, gallery, x3d, x3dom

过去一个月我一直在使用 x3dom，现在我希望能够展示我的作品，有谁知道我可以上传 x3dom 文件的上传器，以便将其保存在某种图片库中，或者是将x3dom代码复制粘贴到html文件然后通过ftp上传的唯一方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:33:06.980

任何各种可用的上传场景都可以使用

x3d 是所有文本，因此您可以将它们存储为平面文件并通过 ftp 上传，或者如果您想要一个模板和动态可查看的系统，您可以将 x3d 存储在数据库中并在动态生成的 html 文件中显示该 db 信息

# java - 以编程方式创建的 Android ProgressBar (Circle) 在 Xoom 上不可见（在其他任何地方都可以使用！）

> ID：14944271
> 
> 赞同：5
> 
> 时间：2013-02-18T19:57:20.707
> 
> 标签：java, android, android-layout, android-progressbar, android-gui

## 问题

我有一个奇怪的问题，我无法弄清楚，需要一些其他的眼睛来看看。我已经动态创建了一个 ProgressBar 视图，它可以在各种设备和 AVD 上运行，除了我的 Motorola Xoom。

* * *

## 截图

所有屏幕截图的上方都有设备名称，并且从通过 ADT 抓取的任何内容都减少了大约 50%，除了 Nexus 10，它是 25%，因为它的超高分辨率。为调试目的添加了 ProgressBar 的红色背景，以显示视图存在且可见。我添加了左侧和顶部填充以使其居中。

下面的屏幕截图从 Xoom 开始，它无法工作，然后是 Nexus 10 (AVD)、Nexus 7、Galaxy Nexus 和 HTC Droid Incredible，展示了它在其他任何地方都能正常工作。拍摄后，我将添加我的代码。

## 摩托罗拉 Xoom 不工作

*进度条不工作！但请注意视图是可见的（我们看到红色背景）。*

![摩托罗拉 Xoom](../Images/5d109d3266274d4631c35e8ee056edfb.png)

## 在其他设备上正常工作

*在所有这些设备上都可以看到圆圈进度。*

**模拟三星 Nexus 10**

![模拟三星 Nexus 10](../Images/e714397b29682283589e69ce3219b84d.png)

**华硕 Nexus 7**

![华硕 Nexus 7](../Images/19e7175096f0d24b2d91daed67e7aa15.png)

**三星 Galaxy Nexus**

![三星 Galaxy Nexus](../Images/44e42b2874514dc028b97d1d77c935b6.png)

**HTC Droid 难以置信**

![HTC Droid 难以置信](../Images/6cb4df768ee157eb69c3c891ea832773.png)

* * *

## 现在代码

这将创建包含它的父视图：

```
 RelativeLayout discoverListLayout = new RelativeLayout(mContext);
    discoverListLayout.setLayoutParams(params);
    discoverListLayout.addView(mDiscoverList); 
```

mDiscoverList 是最终显示的列表视图。ProgressBar 被加载在它上面，直到列表被加载。

现在创建并设置进度条。我在GlobalLayout 上设置了填充，否则对象的宽度和高度为0。

```
 mDiscoverLoading = new ProgressBar(mContext);
    params.height = ViewPager.LayoutParams.WRAP_CONTENT;
    params.width = ViewPager.LayoutParams.WRAP_CONTENT;
    mDiscoverLoading.setLayoutParams(params);
    mDiscoverLoading.setIndeterminate(true);
    discoverListLayout.addView(mDiscoverLoading);
    ViewTreeObserver vto = mDiscoverLoading.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @SuppressWarnings("deprecation")
        @Override
        public void onGlobalLayout() {
            if (mDiscoverList.getCount() > 0) {
                processLoadedList(true);
            } else {
                mDiscoverLoading.setBackgroundColor(getActivity().getResources().getColor(R.color.stitchoid_red));
                mDiscoverLoading.setPadding((getView().getWidth() / 2) - (mDiscoverLoading.getWidth() / 2),(getView().getHeight() / 2) - (mDiscoverLoading.getHeight()), 0, 0);
            }
            ViewTreeObserver obs = mDiscoverLoading.getViewTreeObserver();
            obs.removeGlobalOnLayoutListener(this);
        }
    }); 
```

所以除了摩托罗拉 Xoom 之外，一切都像冠军一样运作！？我将不胜感激任何有助于解决此问题的见解或建议。如果我应该提供任何其他信息，请告诉我。

> *非常感谢！*

*附录：一个奇怪的注意事项可能不是很相关，但以防万一：如果我将 ProgressBar 宽度设置为 match_parent （并且不添加宽度填充）它也适用于其他任何地方，但在 Xoom 上它确实显示但在拉伸到宽度时会变形（仅限 xoom）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T21:23:55.783

老实说，我不知道如何或为什么会有所作为。

但请尝试使用 RelativeLayout.CENTER_IN_PARENT 将 ProgressBar 置于屏幕中央，而不是手动将顶部和左侧填充设置为屏幕大小的一半。

所以而不是：

```
mDiscoverLoading.setPadding((getView().getWidth() / 2) - (mDiscoverLoading.getWidth() / 2),(getView().getHeight() / 2) - (mDiscoverLoading.getHeight()), 0, 0); 
```

利用

```
LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
lp.addRule(RelativeLayout.CENTER_IN_PARENT);
mDiscoverLoading.setLayoutParams(lp); 
```

请注意，LayoutParams 对象有几个不同的“版本”，您需要确保这`RelativeLayout.LayoutParams`是您导入的那个，因为在这种情况下您的父级是一个 RelativeLayout。

我无法真正告诉您是什么导致 Xoom 上的填充出现错误，但这是您可以将 ProgressBar 置于中心的另一种方式，这似乎不受导致问题的任何错误的影响xoom。

# sql - SQL 批处理变量

> ID：14944272
> 
> 赞同：0
> 
> 时间：2013-02-18T19:57:23.267
> 
> 标签：sql, batch-file, sqlcmd

我需要自动执行查询，以便可以在网络上的所有服务器上执行它。问题是不断添加更多服务器，所以我需要保持动态。在一张表上，我有一个当前活动服务器的列表，但它们会重复多次，因为每个服务器都有不同的数据。它也只显示一个数字，并且服务器名称具有特定的格式。我这样做是为了解决它：

```
select distinct ('swp0'+ cast(rtl_loc_id as nvarchar(4000)) +'r01') 
from basename..inv_valid_destinations 
```

我得到了一个输出文件，但现在我想将它用作 sqlcmd 的输入。每个服务器名称（前一个输出中的每一行）都应该用作 -s 参数。我尝试了不同的方法来做到这一点无济于事。它应该是这样的：

```
SQLCMD -Sswp0241r01 -Uswpos -isalto_folio.sql -osalto_folio.txt 
```

正如我所说，更多的服务器不断出现，我们需要同时对所有活动服务器执行查询并生成输出文件。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:10:07.230

如果您真的想批量执行此操作，您可以使用循环，其中`yourfile`包含服务器列表的文件在哪里。

```
for /F "tokens=*" %%A in (readme.txt) do (
    SQLCMD -S%%A -Uswpos -isalto_folio.sql -osalto_folio.txt
) 
```

# python - 如何 hstack numpy 记录的数组？

> ID：14944275
> 
> 赞同：5
> 
> 时间：2013-02-18T19:57:32.543
> 
> 标签：python, numpy, recarray

[[这篇文章的早期版本的标题不准确“如何将一列添加到 numpy 记录数组中？” *早期标题*中提出的问题已经部分[回答](https://stackoverflow.com/questions/1201817)，但这个答案并不是这篇文章早期版本的*正文*所要求的。我已经改写了标题，并对帖子进行了大量编辑，以使区别更加清晰。我还解释了为什么我前面提到的答案不符合我的要求。]]

* * *

假设我有两个`numpy`数组`x`和`y`，每个数组由*r*个“记录”（又名“结构化”）数组组成。设`x`be ( *r* , *c [x]* ) 的形状和`y`be ( *r* , *c [y]* ) 的形状。我们还假设`x.dtype.names`和之间没有重叠`y.dtype.names`。

例如，对于*r* = 2、*c [x]* = 2 和*c [y]* = 1：

```
import numpy as np
x = np.array(zip((1, 2), (3., 4.)), dtype=[('i', 'i4'), ('f', 'f4')])
y = np.array(zip(('a', 'b')), dtype=[('s', 'a10')]) 
```

我想“水平”连接`x`并`y`产生一个*新*的记录数组`z`，具有形状（*r*，*c [x]* + *c [y]*）。此操作不应该修改`x`或根本不应该修改`y`。

一般来说，`z = np.hstack((x, y))`不会这样做，因为`dtype`' 在`x`并且`y`不一定匹配。例如，继续上面的例子：

```
z = np.hstack((x, y))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-7-def477e6c8bf> in <module>()
----> 1 z = np.hstack((x, y))
TypeError: invalid type promotion 
```

现在，有一个函数，`numpy.lib.recfunctions.append_fields`看起来*它*可能会做一些接近我正在寻找的事情，但我无法从中得到任何东西：我尝试过的所有事情要么因错误而失败，要么产生不同于我想要得到的东西。

Can someone please show me *explicitly* the code (using `n.l.r.append_fields` or otherwise¹) that would generate, from the `x` and `y` defined in the example above, a *new* array of records, `z`, equivalent to the horizontal concatenation of `x` and `y`, and do so without modifying either `x` or `y`?

I assume that this will require only one or two lines of code. Of course, I am looking for code that does not require building `z`, record by record, by iterating over `x` and `y`. Also, the code may assume that `x` and `y` have the same number of records, and that there is no overlap between `x.dtype.names` and `y.dtype.names`. Other than this, the code I'm looking for should know nothing about `x` and `y`. Ideally, it should be agnostic also about the number of arrays to join. IOW, leaving out error checking, the code I'm looking for could be the body of a function `hstack_rec` so that the new array `z` would be the result `hstack_rec((x, y))`.

* * *

¹[...although I have to admit that, after my so-far perfect record of failure with `numpy.lib.recfunctions.append_fields`, I've become a bit curious about how this function could be used ***at all***, irrespective of its relevance to this post's question.]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T20:14:43.980

I never use recarrays, and so someone else is going to come up with something slicker, but maybe `merge_arrays` would work?

```
>>> import numpy.lib.recfunctions as nlr
>>> x = np.array(zip((1, 2), (3., 4.)), dtype=[('i', 'i4'), ('f', 'f4')])
>>> y = np.array(zip(('a', 'b')), dtype=[('s', 'a10')])
>>> x
array([(1, 3.0), (2, 4.0)], 
      dtype=[('i', '<i4'), ('f', '<f4')])
>>> y
array([('a',), ('b',)], 
      dtype=[('s', '|S10')])
>>> z = nlr.merge_arrays([x, y], flatten=True)
>>> z
array([(1, 3.0, 'a'), (2, 4.0, 'b')], 
      dtype=[('i', '<i4'), ('f', '<f4'), ('s', '|S10')]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T03:59:49.450

This is a very late answer, but maybe it will be helpful to someone else. I used this solution after asking the same question with most of the same criteria.

It doesn't generate a new numpy array, but by using `zip` and `itertools.chain` it is much faster. In my case, I needed to access every value of every row in sequential order. Here is benchmark which simulates this use-case:

```
import numpy
from numpy.lib.recfunctions import merge_arrays
from itertools import chain

a = numpy.empty(3, [("col1", int), ("col2", float)])
b = numpy.empty(3, [("col3", int), ("col4", "U1")]) 
```

Results:

```
%timeit [i for i in (row for row in merge_arrays([a,b], flatten=True))]
52.9 µs ± 2 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)

%timeit [i for i in (row for row in (chain(i,k) for i,k in zip(a,b)))]
3.47 µs ± 52 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

# lua - Redis排序集和解决关系

> ID：14944279
> 
> 赞同：4
> 
> 时间：2013-02-18T19:57:39.630
> 
> 标签：lua, redis, sortedset

我正在使用 Redis 排序集来存储我正在处理的项目的排名。我们没有预料到（！）我们想如何处理关系。Redis 按字典顺序对得分相同的条目进行排序，但我们要做的是给所有得分相同的条目赋予相同的排名，例如在

```
redis 127.0.0.1:6379> ZREVRANGE foo 0 -1 WITHSCORES
1) "first"
2) "3"
3) "second3"
4) "2"
5) "second2"
6) "2"
7) "second1"
8) "2"
9) "fifth"
10) "1" 
```

我们要考虑`second1`,`second2`和`second3`都具有位置 2 和`fifth`位置 5。因此在第三或第四位置没有条目。 `ZREVRANK`在这里没用，那么获取我要查找的号码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:57:39.630

在我看来，一种方法是编写一个小 Lua 脚本并使用该`EVAL`命令。结果运算仍然具有对数复杂度。

例如，假设我们对 的位置感兴趣`second2`。在脚本中，首先我们使用 获得它的分数`ZSCORE`，获得 2。然后我们使用获得该分数的第一个条目`ZRANGEBYSCORE`，获得`second3`。我们所追求的位置是`ZREVRANK`加`second3`1。

```
redis 127.0.0.1:6379> ZSCORE foo second2
"2"
redis 127.0.0.1:6379> ZREVRANGEBYSCORE foo 2 2 LIMIT 0 1
1) "second3"
redis 127.0.0.1:6379> ZREVRANK foo second3
(integer) 1 
```

所以脚本可能类似于

```
local score = redis.call('zscore', KEYS[1], ARGV[1])
if score then
  local member = redis.call('zrevrangebyscore', KEYS[1], score, score, 'limit', 0, 1)
  return redis.call('zrevrank', KEYS[1], member[1]) + 1
else return -1 end 
```

# c++ - 视觉工作室 2012

> ID：14944283
> 
> 赞同：1
> 
> 时间：2013-02-18T19:57:43.107
> 
> 标签：c++, opencv, visual-studio-2012

我在使用 Visual Studio 2012 时遇到一些问题，在构建我的解决方案并运行调试时，它说缺少 MSVCP100D.dll

屏幕转储：

![在此处输入图像描述](../Images/774dbf9e732800be48e1fcea649e1c9e.png)

当我尝试使用 Release 运行我的程序时，它可以正常编译并运行，但随后它会随机遇到运行时错误：

![在此处输入图像描述](../Images/79397d60dbbbd79da308e6b51687113b.png)

然后它将不再构建这些 CV_8U 和 CV_8UC3

我正在使用 OpenCV 库，我的代码在 Visual Studio 2010 上也运行良好；但我决定升级到2012。

理想情况下，我会使用 DEBUG 构建我的解决方案............

任何解决方案或建议...？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:14:36.143

看起来您正在链接 Visual Studio 2010 的 opencv 库。您必须自己编译 Visual Studio 2012 的 opencv 库，因为预建的是 Visual Studio 2010 的库。

有关如何执行此操作的信息可以在[通过从源文件制作您自己的库进行安装](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html#windows-installation)下找到。

# actionscript-3 - 为什么不收集这些垃圾

> ID：14944285
> 
> 赞同：1
> 
> 时间：2013-02-18T19:57:52.870
> 
> 标签：actionscript-3

如果我制作一个计时器，例如

```
var timer:Timer = new Timer(50, 0);
timer.addEventListener(TimerEvent.TIMER, OnTimer);
timer.start(); 
```

然后我的函数结束了，你会认为这个计时器已经超出了范围，没有任何东西可以再保留它的引用了。但是，此计时器仍然有效。

所以要么我很幸运，垃圾收集器还没有运行，要么有什么东西在保留引用。如果是后者，那么我怎么知道它将被垃圾收集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:02:27.743

计时器仍将运行并将分派事件。只需以您可以访问它的方式声明它（作为公共实例变量）并执行：

*   `timer.stop();`
*   `timer.removeEventListener(TimerEvent.TIMER, OnTimer);`- 在 Flash 中非常重要的事情
*   `timer = null;`- 如果确实需要释放内存，请将引用设置为 null

# html - JCE Editor 2.3.1 更改 Joomla 3.0 中的 HTML

> ID：14944291
> 
> 赞同：1
> 
> 时间：2013-02-18T19:57:57.017
> 
> 标签：html, joomla3.0

我正在使用 JCE 编辑器的代码视图围绕一些文本添加链接。通过链接功能添加链接会产生相同的结果。当我添加链接并保存并返回代码时，它已完全重新格式化。谢谢你的帮助！

以下是我已经做过的事情：

*   已经关闭了全局文本过滤。
*   编辑器集的全局参数将验证 HTML 设置为关闭。
*   在用户配置文件中，验证 HTML 设置为关闭。
*   关闭源代码编辑器插件参数上的所有参数。

这是我输入的代码以及它如何被 JCE Edit 重新格式化：

```
<!-- BEFORE -->
<a class="inline" href="#inline_content">
    <div class="smallTile">
        <img src="/image.jpg" />
        <h4 class="upper">Title</h4>
        <p>
            <a href="http://www.stackoverflow.com">Paragraph</a>
        </p>
    </div>
</a>

<!-- AFTER -->
<a class="inline" href="#inline_content"></a>
<div class="smallTile">
    <a class="inline" href="#inline_content">
        <img src="/image.jpg" />
        <h4 class="upper">Title</h4>
    </a>
    <p>
        <a class="inline" href="#inline_content"></a>
        <a href="http://www.stackoverflow.com">Paragraph</a>
    </p>
</div> 
```

# c# - 如何输出二进制数据？

> ID：14944292
> 
> 赞同：0
> 
> 时间：2013-02-18T19:57:58.513
> 
> 标签：c#, asp.net, binary, webforms

我无法将我的文件以二进制形式保存到我的数据库中，因此，为了调试，我正在尝试查看二进制文件的内容。我试过这个：

```
file.InputStream.Read(fileData, 0, size);
Debug.Print("binary=" + fileData); 
```

它输出这个：

```
binary=System.Byte[] 
```

我怎样才能看到应该看起来像`0x78421824794783741237FJKHASJKH`等的实际数据？

在我的数据库中，它只作为`0x`（这是我要解决的更大的问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:08:24.670

如果您只是想确保数据在那里，最简单的方法可能是以 Base64 编码输出它。就像是：

```
byte[] foo = new byte[] { 1, 2, 3, 4, 5 };
string base64 = Convert.ToBase64String(foo);
Console.WriteLine(base64); 
```

[演示](http://ideone.com/b9RCgv)

如果没有数据（基本上是 a `Byte[0]`），那么`base64`将是一个空字符串。

# android - MediaRecorder.stop() 挂在三星 Galaxy 相机上

> ID：14944300
> 
> 赞同：6
> 
> 时间：2013-02-18T19:58:18.260
> 
> 标签：android, freeze, mediarecorder

调用`stop()`我的 MediaRecorder 会无限期地挂在三星 Galaxy 相机上。将此调用放在单独的线程中也无济于事。

Logcat 不显示任何错误消息。但是，在 Samsung Galaxy Nexus 上运行相同的应用程序不会产生任何问题。

这是我调用的代码`stop`：

```
View.OnClickListener captureListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        if (isRecording) {
            // stop recording and release camera
            mMediaRecorder.stop();
            releaseMediaRecorder(); // release the MediaRecorder object
            mCamera.lock();         // take camera access back from MediaRecorder
            // inform the user that recording has stopped
            captureButton.setText("Capture");
            isRecording = false;
        } else {
            // initialize video camera
            if (prepareVideoRecorder()) {
                // Camera is available and unlocked, MediaRecorder is prepared,
                // now you can start recording
                mMediaRecorder.start();
                // inform the user that recording has started
                captureButton.setText("Stop");
                isRecording = true;
            } else {
                // prepare didn't work, release the camera
                releaseMediaRecorder();
                // inform user
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-19T11:40:57.093

我看到的一件事是，对于某些设备，如果没有附加预览，MediaRecorder.stop() 会挂起（即您之前调用过 Camera.stopPreview()，或者您可能从未调用过 startPreview()）。

# java - 布尔错误（斐波那契数）

> ID：14944307
> 
> 赞同：0
> 
> 时间：2013-02-18T19:58:51.640
> 
> 标签：java

首先，我不是要求任何人做任何事情，只需要一点帮助来用布尔值修复这个错误。我放了假，但程序停止了。我有两个部分的程序。

我进行计算的第一部分：

```
class FibonacciNumbers {

    FibonacciNumbers() {} //default constructor

    public int fOf(int n) {
        if (n == 0) //the base case
        {
            return 0;
        } else if (n == 1) {
            return 1;
        } else {
            return fOf(n - 1) + fOf(n - 2);
        }
    }
} 
```

其次，主要方法是：

```
import java.util.*;
public class FibonacciNumbersTesters {

    public static void main(String[] args) {
        FibonacciNumbers fNumbers = new FibonacciNumbers();    //creates new object
        Scanner in = new Scanner(System.in);
        String again;
        String test;
        boolean IsRepeat = true;
        boolean isQuit;

        try {
            isQuit = false;
            while (!isQuit) {

                System.out.print("Enter the number you want to convert to Fibanocci('q' to quit): ");
                int n = in.nextInt();
                System.out.print("The Fibanocci number for " + n + " is: ");
                n = fNumbers.fOf(n);
                System.out.println(n);
                System.out.print("Do you want to run again? (Y or N):  ");
                again = in.next();
                if (again.equalsIgnoreCase("N")) {

                    System.out.println("Thank you! Please terminate the program by entering 'Q' or 'q' OR you can cotinue by entering anything else: ");
                    String toQuit = in.next();

                    if ((toQuit.charAt(0) == 'q') || (toQuit.charAt(0) == 'Q')) {
                        System.out.println("Good-bye!");
                        isQuit = true;

                    }
                } else {
                    IsRepeat = true;
                }
            }
        } catch (InputMismatchException ex) {

            test = in.nextLine();
            if ((test.charAt(0) == 'q') || (test.charAt(0) == 'Q')) {
                System.out.println("Good-bye!");
                isQuit = true;

            } else {
                System.out.println("Invalid input!");
                System.out.println("Try again! ");
                isQuit = false;
            }
        }
    }
} 
```

我放在`isQuit = false;`最后的这部分就停止了。我希望它继续下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:02:57.920

尝试将您的 try catch 语句放在您的 while 循环中。

# java - 实现接口

> ID：14944310
> 
> 赞同：0
> 
> 时间：2013-02-18T19:59:01.727
> 
> 标签：java, interface

我知道什么是界面以及如何构建/使用界面。让我们以 ActionListener 接口为例。我的问题是点击按钮后会发生什么，哪个类调用actionPerformed方法？从我点击按钮的部分到执行actionPerformed的部分的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:12:12.347

`JButton`调用`ActionListener`. _

在内部，它监听键盘和鼠标事件。当它接收到鼠标点击或按键，这意味着“点击按钮”，它创建一个`ActionEvent`实例，循环通过所有`ActionListener`已添加到自身的实例，并使用`ActionEvent`as 参数调用每个实例。

# c# - 为什么这会锁定文件写入？

> ID：14944311
> 
> 赞同：0
> 
> 时间：2013-02-18T19:59:03.670
> 
> 标签：c#, file-io, .net-3.5

该程序的一个功能基本上需要跟踪一个日志文件并转发新写入的行。我相信我通过`FileStream`将`FileShare.ReadWrite`选项创建为流来正确执行此操作，如此[处](https://stackoverflow.com/questions/1606349/does-a-streamreader-lock-a-text-file-whilst-it-is-in-use-can-i-prevent-this)和[此处](https://stackoverflow.com/questions/5338450/file-readlines-without-locking-it)`StreamReader`的其他几个答案中所述。

但是当我运行程序时，它会阻止某些进程写入文件。使用[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，我可以看到我的程序正在打开具有 R/W 权限的文件，而不仅仅是读取。

```
reader = new StreamReader(new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite));

{
    //start at the end of the file
    long lastMaxOffset = reader.BaseStream.Length;

    while (true)
    {
        System.Threading.Thread.Sleep(Properties.Settings.Default.pauseInMilliseconds);

        // if the file size has not changed, keep idling
        if (reader.BaseStream.Length == lastMaxOffset)
            continue;

        // handle if the file contents have been cleared
        if (reader.BaseStream.Length < lastMaxOffset)
            lastMaxOffset = 0;
        eventLogger.WriteEntry("LogChipper target file was reset, starting from beginning", EventLogEntryType.Information, 0);

        // seek to the last max offset
        reader.BaseStream.Seek(lastMaxOffset, SeekOrigin.Begin);

        // read out of the file until the EOF
        string line = "";
        while ((line = reader.ReadLine()) != null)
            syslogForwarder.Send(line);

        // update the last max offset
        lastMaxOffset = reader.BaseStream.Position;

        // block if the service is paused or is shutting down
        pause.WaitOne();
    }
} 
```

我在保持文件打开的那个块中还有其他事情吗？[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.90%29.aspx)如果那会更好，我愿意尝试不同的方法（例如）...

# python - GAE - 如何组合几个异步 url 获取的结果？

> ID：14944317
> 
> 赞同：1
> 
> 时间：2013-02-18T19:59:32.097
> 
> 标签：python, google-app-engine, urlfetch

我有一个 Google `AppEngine`(in `Python`) 应用程序，我需要在其中执行 4 到 5 次 url 获取，然后在将数据打印到响应之前组合数据。

我可以使用同步工作流毫无问题地做到这一点，但由于我正在获取的 url 不相关或相互依赖，因此异步执行此操作将是最理想的（也是最快的）。

我已经阅读并重新阅读了[此处](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests#Making_Asynchronous_Requests)的文档，但我只是不知道如何阅读每个 url 的内容。我还在网上搜索了一个小例子（这确实是我需要的）。我已经看到[了这个](https://stackoverflow.com/questions/11107825/asynchronous-fetch-request-with-google-app-engine)SO question，但同样，这里他们没有提到任何关于阅读这些单独的异步 url 获取的内容。

有没有人有任何简单的例子来说明如何使用 AppEngine 执行 4 或 5 个异步 url 获取？然后在将结果打印到响应之前组合结果？

这是我到目前为止所拥有的：

```
rpcs = []
for album in result_object['data']:
  total_facebook_photo_count = total_facebook_photo_count + album['count']
  facebook_albumid_array.append(album['id'])

  #Get the photos in the photo album
  facebook_photos_url = 'https://graph.facebook.com/%s/photos?access_token=%s&limit=1000' % (album['id'], access_token)

  rpc = urlfetch.create_rpc()
  urlfetch.make_fetch_call(rpc, facebook_photos_url)
  rpcs.append(rpc)

for rpc in rpcs:
  result = rpc.get_result()
  self.response.out.write(result.content) 
```

但是，它仍然看起来像以下行： result = rpc.get_result() 强制它等待第一个请求完成，然后是第二个，然后是第三个，依此类推。有没有办法在收到结果时简单地将结果放入变量中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:25:53.403

在[示例](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests#Making_Asynchronous_Requests)中，`text = result.content`是您获取内容（正文）的地方。

要并行获取 url，您可以设置它们，添加到列表并随后检查结果。扩展已经提到的示例，它可能看起来像：

```
from google.appengine.api import urlfetch

futures = []
for url in urls:
    rpc = urlfetch.create_rpc()
    urlfetch.make_fetch_call(rpc, url)
    futures.append(rpc)

contents = []
for rpc in futures:
    try:
        result = rpc.get_result()
        if result.status_code == 200:
            contents.append(result.content)
            # ...
    except urlfetch.DownloadError:
        # Request timed out or failed.
        # ...

concatenated_result = '\n'.join(contents) 
```

在这个例子中，我们组装了所有返回状态码 200 的请求的主体，并在它们之间用换行符连接起来。

或者使用[ndb](https://developers.google.com/appengine/docs/python/ndb/async#urlfetch)，我个人对 GAE 上任何异步的偏好，例如：

```
@ndb.tasklet
def get_urls(urls):
  ctx = ndb.get_context()
  result = yield map(ctx.urlfetch, urls)
  contents = [r.content for r in result if r.status_code==200]
  raise ndb.Return('\n'.join(contents)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:11:09.263

我使用这段代码（*在我了解 ndb tasklets 之前*实现）：

```
 while rpcs:
      rpc = UserRPC.wait_any(rpcs)
      result = rpc.get_result()
      # process result here
      rpcs.remove(rpc) 
```

# c++ - 并联电路

> ID：14944320
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:59:45.197
> 
> 标签：c++, visual-studio-2010

我在处理这个编程任务时遇到了麻烦。我需要计算并联和串联电路的总电阻值。我有串联电路功能，但我的问题是当我尝试计算并联电路的总电阻时，我的返回值为 1.#INF。有关如何解决此问题的任何建议

```
 // project.cpp : Defines the entry point for the console application.
    //

    #include "stdafx.h"
    #include <iostream>
    #include <math.h>

    using namespace std;

    void menu()
    {
       cout <<"\t\t\tLab 2 Menu Driven Algorithms" << endl;
       cout <<"\t\t  Calculating Parallel and Series Resistance" << endl;
       cout <<"1)\tSeries" << endl;
       cout <<"2)\tParallel" << endl;
       cout <<"3)\tQuit" << endl;   
    }

    int series(int& num, int& sum)
    {
int answer;
num = 0;
sum = 0;

do
{
    cout << "Enter Resistor " << num+1 << " value, 0 to calculate: ";
    cin >> answer;
    cout << endl;

    sum = sum + answer;

    num++;
}
while(answer != 0);     

return sum;
    }

    double parallel (int& num, double& sum)
    {
double answer;
num = 0;
sum = 0.0;
int counter = 0;

do
{
    cout << "Enter Resistor " << num+1 << " value, 0 to calculate: ";
    cin >> answer;
    cout << endl;
    counter++;

    sum = (1/answer) + sum;
    cout << sum << endl;

    num++;
}
while(answer != 0);

return sum;
    }

    int main()
    {
char choice;
int num = 0;
int sum = 0;
double sum2 = 0.0;

menu();

cout <<"\n\nPlease enter a value from the menu: ";
cin >> choice;
cout << endl;

while (choice != '3' && choice != 'q' && choice != 'Q')
{

switch(choice)
{
    case '1': cout << "Calculating Series Resistance" << endl;
              cout << "The series resistance for the " << num-1 << " resistors is: " << series(num, sum) << " Ohms\n";
              system("pause");
              break;
    case '2': cout << "Calculating Parallel Resistance" << endl;
              cout << "The parallel resistance for the " << num-1 << " resistors is: " << parallel(num, sum2) << " Ohms\n";
              system("pause");
              break;
    default: break;

}

system("cls");

menu();

cout <<"\n\nPlease enter a value from the menu: ";
cin >> choice;
cout << endl;

} 
system("pause");

return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:04:32.940

您可能希望以`parallel()`这种方式重写函数内部的循环，这样您就永远不会处理 的值`0`（在这种情况下会导致除以零）：

```
cout << "Enter Resistor " << num+1 << " value, 0 to calculate: ";
cin >> answer;
cout << endl;

while (answer != 0);     
{
    counter++; // NOTICE: This is never used for computation...

    sum = (1/answer) + sum;
    cout << sum << endl;

    num++;

    cout << "Enter Resistor " << num+1 << " value, 0 to calculate: ";
    cin >> answer;
    cout << endl;
} 
```

该`counter`变量从不用于计算，所以我想你可以摆脱它。

还要注意，即使内部的循环`series()`也有类似的问题，尽管您永远不会导致除以零这一事实并不能使其可见。

# video-streaming - 使用带有 jw 播放器的动态 smil 文件

> ID：14944322
> 
> 赞同：5
> 
> 时间：2013-02-18T19:59:48.793
> 
> 标签：video-streaming, jwplayer, smil

我正在尝试使用 JW Player 6 制作在线流媒体播放器。

如果我创建一个包含所有质量版本的流的 smil 文件并使用下面的代码，它可以正常工作：

```
<script>
    jwplayer("myElement").setup({
        playlist: [{
            sources: [{
                file: "/player/smil.asp"
        }]
      }],
      type: 'rtmp'
    });
</script> 
```

smil 文件：

```
<smil>
  <head>
    <meta base="rtmp://host/app" />
  </head>
  <body>
    <switch>
      <video src="quality1" system-bitrate="720" />
      <video src="quality2" system-bitrate="360" />
    </switch>
  </body>
</smil> 
```

我想根据用户的质量选择动态创建 smil 文件。（即：丢弃高于 720 的比特率）

我使用了一个asp文件来动态创建smil文件，但它没有工作：

```
file: "/player/smil.asp" 
```

> 错误：***加载播放器时出错：找不到可播放的源***

当然，我在 asp 文件中将标头类型设置为***application/octet-stream***但没有解决问题。

我还尝试使用 smil 扩展名保存相同的 asp 文件，然后在 IIS 设置中为 smil 文件设置 asp 处理程序。当我在浏览器中调用时它运行良好，但 jw 播放器显示相同的错误。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:13:28.937

定义源类型可以解决问题。

```
sources: [{
    file: "/player/smil.asp",
    type: "rtmp"
}] 
```

感谢 Ethan 的耐心。

# java - LWJGL 键盘和鼠标检测按下

> ID：14944327
> 
> 赞同：0
> 
> 时间：2013-02-18T20:00:06.353
> 
> 标签：java, lwjgl

我有以下代码：

```
private int getKeyboardKeyPressed() {
    while (Keyboard.next()) {
        if (Keyboard.getEventKeyState()) {
            int key = Keyboard.getEventKey();
            if (key == Keyboard.KEY_ESCAPE)
                return -1;

            return key;
        }
    }
    return -1;
}

private int getMouseKeyPressed() {
    return Mouse.getEventButton();
} 
```

我使用摇摆按钮让用户输入按键（按下按钮，然后按下所需的键）。

这给了我两个问题：第一个鼠标总是返回为 0，但是文档说如果没有按下任何内容，它应该返回 -1。我认为这可能是因为 Swing 的按钮按下，但是设置一个一开始就休眠的新线程也不起作用，简单地丢弃第一次按下也不起作用。

其次，键盘检测似乎根本不起作用。它不会检测到任何压力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:04:24.717

显然 LWJGL 需要激活显示，并且不能通过活动的 Swing 窗口捕捉键。

# java - SMTP 和 Java 电子邮件错误

> ID：14944329
> 
> 赞同：0
> 
> 时间：2013-02-18T20:00:15.547
> 
> 标签：java, email, smtp

您好，我研究了这段代码来弄清楚 SMTP 如何与 java 程序一起工作，我已经走了很远，但我一直收到这个错误，我不知道它有什么问题。这一切似乎都是我看过的其他类似程序所做的，但他们的似乎有效。它一直到 FROM 行，然后打印出这个错误

```
 530 5.7.0 Must issue a STARTTLS command first. n1sm21348109bkv.14 - gsmtp
 Exception in thread "main" java.lang.Exception: 250 reply not received from server.

 at emailagent.EmailAgent.main(EmailAgent.java:73) 
```

对此的任何帮助将不胜感激谢谢

```
import java.io.*;
import java.net.*;
import java.util.*;

public class EmailAgent
{
 public static void main(String[] args) throws Exception
{

    // Establish a TCP connection with the mail server.
    System.out.println("Enter the mail server you wish to connect to (example:  pop.gmail.com):\n");  
    String hostName = new String();  
    Scanner emailScanner = new Scanner(System.in);  
    hostName = emailScanner.next();  
    Socket socket = new Socket(hostName, 25); 

    // Create a BufferedReader to read a line at a time.
    InputStream is = socket.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    // Read greeting from the server.
    String response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("220"))
    {
        throw new Exception("220 reply not received from server.");
    }

    // Get a reference to the socket's output stream.
    OutputStream os = socket.getOutputStream();

    // Send HELO command and get server response.
    String command = "HELO alice\r\n";
    System.out.print(command);
    os.write(command.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);

    if (!response.startsWith("250")) 
    {
        throw new Exception("250 reply not received from server.");
    }

   // Send HELO command and get server response.   
    System.out.println("Enter the name of your mail domain (example:  hotmail.com):");  
    String heloDomain = emailScanner.next();  
    String fullHeloCommand =  "HELO " + heloDomain + "\r\n";  
    System.out.print(fullHeloCommand);   
    os.write(fullHeloCommand.getBytes("US-ASCII"));   
    response = br.readLine();   
    System.out.println(response);

    if (!response.startsWith("250")) 
    {   
        throw new Exception("250 reply not received from server.\n");   
    }  

    // Send MAIL FROM command.  
    System.out.println("Please enter your e-mail address (example: me@myexample.com:\n");  
    String sourceAddress = emailScanner.next();  
    String mailFromCommand = "MAIL FROM:  <" + sourceAddress + ">\r\n";  
    System.out.println(mailFromCommand);  
    os.write(mailFromCommand.getBytes("US-ASCII"));  
    response = br.readLine();  
    System.out.println(response);

    if (!response.startsWith("250")) 
    {
        throw new Exception("250 reply not received from server.\n");  
    }

    // Send RCPT TO command.  
    System.out.println("Please type the destination e-mail address (example:  example@nova.edu):\n");  
    String destEmailAddress = new String();  
    destEmailAddress = emailScanner.next();  
    String fullAddress = new String();  
    fullAddress = "RCPT TO:  <" + destEmailAddress + ">\r\n";  
    System.out.println(fullAddress);  
    os.write(fullAddress.getBytes("US-ASCII"));  
    response = br.readLine();  
    System.out.println(response);

    if(!response.startsWith("250"))  
    {  
        throw new Exception("250 reply not received from server.\n");  
    }  

    // Send DATA command.    
    String dataString = new String();  
    dataString = "DATA";  
    System.out.println(dataString);  
    os.write(dataString.getBytes("US-ASCII"));  
    response = br.readLine();  

    if(!response.startsWith("354"))
    {
        throw new Exception("354 reply not received from server.\n");  
    }

    System.out.println(response); 

    // Send message data.   
    System.out.println("Enter your message, enter '.' on a separate line to end message data entry:\n");  
    String input = new String();  
    while(input.charAt(0) != '.')  
    {  
        input = emailScanner.next();  
        os.write(input.getBytes("US-ASCII"));  
    }  
        //End with line with a single period.  
    os.write(input.getBytes("US-ASCII"));  
    response = br.readLine();  
    System.out.println(response);

    if(!response.startsWith("250")) 
    {
        throw new Exception("250 reply not received from server\n");  
    }

    // Send QUIT command.  
    String quitCommand = new String();  
    quitCommand = "QUIT";  
    os.write(quitCommand.getBytes("US-ASCII"));  

    }   
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:04:06.247

您尝试连接的邮件服务器需要您建立安全连接 (TLS) 才能使用邮件服务。这就是你得到的错误。

至于解决方案，我强烈推荐使用[JavaMail 库](http://www.oracle.com/technetwork/java/javamail/index.html)，因为它提供了很多开箱即用的功能，并且已经在“野外”进行了可靠的测试。

# java - 获取字段名称

> ID：14944333
> 
> 赞同：38
> 
> 时间：2013-02-18T20:00:25.763
> 
> 标签：java, reflection, field

在Java中是否可以从实际字段中获取字符串中的字段名称？喜欢：

```
public class mod {
    @ItemID
    public static ItemLinkTool linkTool;

    public void xxx{
        String fieldsName = *getFieldsName(linkTool)*;
    }
} 
```

PS：我**不是**在寻找字段的类/类名称或从字符串中的名称获取字段。

* * *

编辑：当我查看它时，我可能不需要获取字段名称的方法，Field 实例（来自字段的“代号”）就足够了。[例如`Field myField = getField(linkTool)`]

Java 本身可能没有我想要的东西。我将看一下 ASM 库，但最后我可能最终会使用字符串作为字段的标识符：/

* * *

EDIT2：我的英语不是很好（但即使用我的母语我也很难解释这一点），所以我再添加一个例子。希望现在会更清楚：

```
public class mod2 {
    @ItemID
    public static ItemLinkTool linkTool;

    @ItemID
    public static ItemLinkTool linkTool2;

    @ItemID
    public static ItemPipeWrench pipeWrench;

    public void constructItems() {
        // most trivial way
        linkTool = new ItemLinkTool(getId("linkTool"));
        linkTool2 = new ItemLinkTool(getId("linkTool2"));
        pipeWrench = new ItemPipeWrench(getId("pipeWrench"));

        // or when constructItem would directly write into field just
        constructItem("linkTool");
        constructItem("linkTool2");
        constructItem("pipeWrench");

        // but I'd like to be able to have it like this
        constructItemIdeal(linkTool);
        constructItemIdeal(linkTool2);
        constructItemIdeal(pipeWrench);
    }

    // not tested, just example of how I see it
    private void constructItem(String name){
        Field f = getClass().getField(name);
        int id = getId(name);

        // this could be rewritten if constructors take same parameters
        // to create a new instance using reflection
        if (f.getDeclaringClass() == ItemLinkTool){
            f.set(null, new ItemLinkTool(id));
        }else{
            f.set(null, new ItemPipeWrench(id));
        }
    }
} 
```

问题是：constructItemIdeal 方法怎么看？（根据答案和谷歌搜索，我认为这在 Java 中是不可能的，但谁知道......）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T00:10:39.480

不幸的是，没有办法做你想做的事。*为什么？*

在我们仍在试图证明 Java 并不慢的时代，存储对象构建位置或方式的元数据会产生很大的开销，并且由于它的使用范围非常小，因此不存在。不仅如此：还有很多技术原因。

一个原因是因为 JVM 是如何实现的。`class`可以在[此处](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)找到Java 文件格式的规范。这是一口大口，但信息量很大。

正如我之前所说，一个对象可以从任何地方构造，即使是在*对象没有名字*的情况下。只有定义为类成员的对象才有名称（出于显而易见的访问原因）：在方法中构造的对象没有。JVM 有一个本地变量表，最多有 65535 个条目。这些被加载到堆栈并通过 *load 和 *store 操作码存储到表中。

换句话说，像这样的类

```
public class Test {
int class_member = 42;

   public Test() {
      int my_local_field = 42;
   }
} 
```

被编译成

```
public class Test extends java.lang.Object
  SourceFile: "Test.java"
  minor version: 0
  major version: 50
  Constant pool:
  --snip--

{
int class_member;

public Test();
  Code:
   Stack=2, Locals=2, Args_size=1
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   bipush  42
   7:   putfield        #2; //Field class_member:I
   10:  bipush  42
   12:  istore_1
   13:  return
  LineNumberTable:
   --snip--    
} 
```

在那里，您可以看到一个清晰的示例`javap -v Test`，虽然名称`class_member`被保留，但`my_local_field`已被抽象为局部变量表中的索引 1（0 为 保留`this`）。

这本身对调试器等来说是一种痛苦，因此设计了一组属性（想想类文件的元数据）。其中包括[LocalVariableTable](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.12)、[LineNumberTable](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.12)和[LocalVariableTypeTable](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.14)。这些属性对于堆栈跟踪（LineNumberTable）和调试器（LocalVariableTable 和 LocalVariableTypeTable）很有用。但是，这些是*完全可选的是否包含在文件中，并且不能保证它们是：*

> LineNumberTable 属性是属性表中的可选可变长度属性

其他人也是如此。

此外，大多数编译器默认情况下除了 LineNumberTable 之外不生成任何东西，因此即使有可能，您也会不走运。

基本上，对于开发人员来说，拥有一个`getFieldName(object)`（这对于局部变量来说首先是不可能的）是非常令人沮丧的，并且只有在这些属性存在时才能工作。

因此，在可预见的未来，您将无法使用`getField`与字符串一起使用。无耻的插件：[IntelliJ](http://www.jetbrains.com/idea/)似乎可以很好地处理带有反射的重构：我也编写了 Minecraft 模块，我知道这种感觉，并且可以说 IntelliJ 显着减少了重构工作。但对于大多数现代 IDE 来说可能也是如此：我相信大玩家，Eclipse，Netbeans*等。*拥有实施良好的重构系统。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-18T20:04:56.823

如果该字段是私有的，您可以使其可访问：

```
Field field = object.getClass().getDeclaredField(fieldName);
field.setAccessible(true);
String value = (String)field.get(object); // to get the value, if needed. In the example is string type 
```

要获取字段的名称，请这样做：

```
//use the field object from the example above
field.getName(); // it is in String. 
```

如果您不知道该字段的名称...好吧..那么您想获得什么字段？:) 您可以使用反射获取所有字段，然后遍历它们。但是如果您不知道该字段，那么此操作的实际意义和逻辑是什么？

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-15T18:32:53.367

> String fieldName = getFieldName(linkTool, this);

```
private static String getFieldName(Object fieldObject, Object parent) {

    java.lang.reflect.Field[] allFields = parent.getClass().getFields();
    for (java.lang.reflect.Field field : allFields) {
        Object currentFieldObject;
        try {
            currentFieldObject = field.get(parent);
        } catch (Exception e) {
            return null;
        }
        boolean isWantedField = fieldObject.equals(currentFieldObject);
        if (isWantedField) {
            String fieldName = field.getName();
            return fieldName;
        }
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-18T20:03:41.533

这只能通过反射实现。

使用`Class.getDeclaringFields`() 和`java.reflection.Field.getName()`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-22T10:43:22.510

我想这就是你要找的。

```
SomeClass data; // or List<SomeClass> data; etc.
List<String> fieldNames = getFieldNamesForClass(data.get(0).getClass());

private static List<String> getFieldNamesForClass(Class<?> clazz) throws Exception {
    List<String> fieldNames = new ArrayList<String>();
    Field[] fields = clazz.getDeclaredFields();
    for (int i = 0; i < fields.length; i++) {
        fieldNames.add(fields[i].getName());
    }
    return fieldNames;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-08-06T16:32:35.063

如何使用**lombok**注释[`@FieldNameConstants`](https://projectlombok.org/features/experimental/FieldNameConstants)

```
@FieldNameConstants
public class Mod {
    public ItemLinkTool linkTool;
}
...
String fieldName = Mod.Fields.linkTool; //fieldName == "linkTool" 
```

有了这个特性，我们就不需要维护获取字段名称的代码（lombok 为我们做这件事）。删除字段编译器后会抱怨它的用法。

请注意，此功能被标记为实验性的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-26T09:06:48.130

我获取字段名称的动机是使用它来搜索键值数据库（如 mongodb）中的内容。我有一个结构，其中包含代表已保存数据的成员（字段）。**我使用成员名称来搜索 db**。

我的建议是为每个重要成员放置一个静态吸气剂。例子：

```
public class Data {
  public static String getMember1Key() {
    return "member1";
  }
  public String member1;
} 
```

希望 Java 将来会为此提供一些机制，因为如今，元数据可能是数据的一部分。尤其是在使用 JSON 做事时。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-22T12:32:11.257

可以使用运行时字节码检测来完成，例如使用 Byte Buddy 库，请参阅此答案[nameof等效于 Java](https://stackoverflow.com/questions/40850926/nameof-equivalent-in-java/46679366#46679366)

# phpexcel - PHP Excel，条形图和折线图的可能性？

> ID：14944334
> 
> 赞同：5
> 
> 时间：2013-02-18T20:00:29.667
> 
> 标签：phpexcel

是否可以使用 PHPExcel 创建折线图和条形图？比如下面这个。

![在此处输入图像描述](../Images/304985928fd27111cfb059e41b87669a.png)

如果不是，是否可以使图形背景透明，以便我可以将两个图形合并在一起？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T12:30:19.500

我不得不对 PHPExcel 代码进行一些小调整以使其正常工作，只需将其推送到 github；连同 /Examples 中的 33chartcreate-composite-chart.php。

```
$objPHPExcel = new PHPExcel();
$objWorksheet = $objPHPExcel->getActiveSheet();
$objWorksheet->fromArray(
    array(
        array('',       'Rainfall (mm)',    'Temperature (°F)', 'Humidity (%)'),
        array('Jan',        78,                 52,                 61),
        array('Feb',        64,                 54,                 62),
        array('Mar',        62,                 57,                 63),
        array('Apr',        21,                 62,                 59),
        array('May',        11,                 75,                 60),
        array('Jun',        1,                  75,                 57),
        array('Jul',        1,                  79,                 56),
        array('Aug',        1,                  79,                 59),
        array('Sep',        10,                 75,                 60),
        array('Oct',        40,                 68,                 63),
        array('Nov',        69,                 62,                 64),
        array('Dec',        89,                 57,                 66),
    )
);

//  Set the Labels for each data series we want to plot
//      Datatype
//      Cell reference for data
//      Format Code
//      Number of datapoints in series
//      Data values
//      Data Marker
$dataseriesLabels1 = array(
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$B$1', NULL, 1),   //  Temperature
);
$dataseriesLabels2 = array(
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$C$1', NULL, 1),   //  Rainfall
);
$dataseriesLabels3 = array(
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$1', NULL, 1),   //  Humidity
);

//  Set the X-Axis Labels
//      Datatype
//      Cell reference for data
//      Format Code
//      Number of datapoints in series
//      Data values
//      Data Marker
$xAxisTickValues = array(
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$A$2:$A$13', NULL, 12),    //  Jan to Dec
);

//  Set the Data values for each data series we want to plot
//      Datatype
//      Cell reference for data
//      Format Code
//      Number of datapoints in series
//      Data values
//      Data Marker
$dataSeriesValues1 = array(
    new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$B$2:$B$13', NULL, 12),
);

//  Build the dataseries
$series1 = new PHPExcel_Chart_DataSeries(
    PHPExcel_Chart_DataSeries::TYPE_BARCHART,       // plotType
    PHPExcel_Chart_DataSeries::GROUPING_CLUSTERED,  // plotGrouping
    range(0, count($dataSeriesValues1)-1),          // plotOrder
    $dataseriesLabels1,                             // plotLabel
    $xAxisTickValues,                               // plotCategory
    $dataSeriesValues1                              // plotValues
);
//  Set additional dataseries parameters
//      Make it a vertical column rather than a horizontal bar graph
$series1->setPlotDirection(PHPExcel_Chart_DataSeries::DIRECTION_COL);

//  Set the Data values for each data series we want to plot
//      Datatype
//      Cell reference for data
//      Format Code
//      Number of datapoints in series
//      Data values
//      Data Marker
$dataSeriesValues2 = array(
    new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$C$2:$C$13', NULL, 12),
);

//  Build the dataseries
$series2 = new PHPExcel_Chart_DataSeries(
    PHPExcel_Chart_DataSeries::TYPE_LINECHART,      // plotType
    PHPExcel_Chart_DataSeries::GROUPING_STANDARD,   // plotGrouping
    range(0, count($dataSeriesValues2)-1),          // plotOrder
    $dataseriesLabels2,                             // plotLabel
    NULL,                                           // plotCategory
    $dataSeriesValues2                              // plotValues
);

//  Set the Data values for each data series we want to plot
//      Datatype
//      Cell reference for data
//      Format Code
//      Number of datapoints in series
//      Data values
//      Data Marker
$dataSeriesValues3 = array(
    new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$D$2:$D$13', NULL, 12),
);

//  Build the dataseries
$series3 = new PHPExcel_Chart_DataSeries(
    PHPExcel_Chart_DataSeries::TYPE_AREACHART,      // plotType
    PHPExcel_Chart_DataSeries::GROUPING_STANDARD,   // plotGrouping
    range(0, count($dataSeriesValues2)-1),          // plotOrder
    $dataseriesLabels3,                             // plotLabel
    NULL,                                           // plotCategory
    $dataSeriesValues3                              // plotValues
);

//  Set the series in the plot area
$plotarea = new PHPExcel_Chart_PlotArea(NULL, array($series1, $series2, $series3));
//  Set the chart legend
$legend = new PHPExcel_Chart_Legend(PHPExcel_Chart_Legend::POSITION_RIGHT, NULL, false);

$title = new PHPExcel_Chart_Title('Average Weather Chart for Crete');

//  Create the chart
$chart = new PHPExcel_Chart(
    'chart1',       // name
    $title,         // title
    $legend,        // legend
    $plotarea,      // plotArea
    true,           // plotVisibleOnly
    0,              // displayBlanksAs
    NULL,           // xAxisLabel
    NULL            // yAxisLabel
);

//  Set the position where the chart should appear in the worksheet
$chart->setTopLeftPosition('F2');
$chart->setBottomRightPosition('O16');

//  Add the chart to the worksheet
$objWorksheet->addChart($chart); 
```

# java - 如何在 JSP 上使用套接字编程从另一台计算机访问数据库.....任何方法？

> ID：14944338
> 
> 赞同：-3
> 
> 时间：2013-02-18T20:00:48.197
> 
> 标签：java, html, jsp, sockets

# 我正在做一个最后一年的项目

**我正在开发一个 jsp 网站**
1-我必须连接三个系统的
2-其中两个有数据库，在第三台计算机上有一个 jsp 页面，它将同时访问两个数据库中的数据
3-我应该应用什么编程代码
以及如何应用连接这三台计算机非常感谢任何帮助
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:06:49.697

JSP*不*应该直接访问任何数据库

为 JSP 编写一个 servlet 与之对话。为这两个数据库提供 servlet JDBC 连接。让它代表 JSP 与数据库交互并将结果发送给显示。

*没有插座*。使用 JDBC。

```
 +-----> DB1 via JDBC
                       |
JSP ----> servlet -----+
                       |
                       +-----> DB2 via JDBC 
```

# jquery - Jquery Validation 无法导入 Galleria 脚本

> ID：14944342
> 
> 赞同：0
> 
> 时间：2013-02-18T20:01:02.623
> 
> 标签：jquery, jquery-validate, galleria

我正在将一个基本站点与 Galleria 库、隐藏/显示和验证表单放在一起。当我加载 Galleria 脚本时，对我的基本反馈表单的验证失败。

当我还将 Galleria 脚本加载到页面中时，什么原因可能会阻止 JQuery 验证脚本运行？验证在 Galleria 未加载时工作正常，但在加载时失败。现场直播：http: [//lucidnetdesigns.com/invidia/](http://lucidnetdesigns.com/invidia/)这是当前的导入和脚本：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript" src="scripts/jquery.validate.js"></script>
<script type="text/javascript" src="galleria/galleria-1.2.7.min.js"></script>
<script type="text/javascript" src="http://ui.jquery.com/latest/ui/effects.core.js"></script>
<script type="text/javascript" src="http://ui.jquery.com/latest/ui/effects.slide.js"></script>

<script type="text/javascript">

   Galleria.loadTheme('galleria/themes/twelve/galleria.twelve.min.js');
    Galleria.run('#galleria', {
    fullscreenCrop: 'false',
    autoplay: 3000,
    imageCrop: true
});

            $(document).ready(function() {
                $('#content_salon').hide();

                $('a#show_content_salon').click(function () {
                    $('#content_salon').slideToggle('slow');
                    return false;
                });
            });

            $(document).ready(function () {
                $('#content_services').hide();

                $('a#show_content_services').click(function () {
                    $('#content_services').slideToggle('slow');
                    return false;
                });

            });

            $(document).ready(function () {
                $('#content_contactus').ahow();

                $('a#show_content_contactus').click(function () {
                    $('#content_contactus').slideToggle('slow');
                    return false;
                });
            });

$(document).ready(function(){
    $("#form1").validate({

    rules: 

    {

      email1: "required",
       email2: {
              equalTo: "#email1" },

      phone: {
        minlength: 10,
        maxlength: 10
      },

      fullname: {
        minlength: 2
      },

    },

    messages: { 

    name: "Please enter your full name.",
    email1: "Please enter a valid email.",
    phone: "Phone number must be 10 characters (include area code).",
    },

    errorPlacement: function(error, element) { 
            error.appendTo( element.parent() ); 
        }
  });

});
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:13:50.620

我在您的页面上看到很多拼写错误。

根据您的 OP，这些是您的`rules`...

```
rules:  {
      email1: "required",
      email2: {
          equalTo: "#email1" 
      },
      phone: {
          minlength: 10,
          maxlength: 10
      },
      fullname: {  // <-- no such field defined
          minlength: 2
      }
},
messages: { 
    name: "Please enter your full name.",  // <-- no such field or rule
    email1: "Please enter a valid email.",
    phone: "Phone number must be 10 characters (include area code).",
}, 
```

但是，根据您的页面，没有名为`fullname`. 您的实际 HTML 是这样的：

```
<input name="firstname" .... 
```

在您的`messages`部分中，您定义了一条消息，`name`但您的表单中没有带有 的字段`name="name"`，也没有任何名为 的规则`name`。

**您的验证代码正在运行：http: [//jsfiddle.net/zPQJb/](http://jsfiddle.net/zPQJb/)**

**旁注：**当您已经在 contains 中指定复合规则时，没有 理由`class="require"`在字段上使用。这是多余的。`input``.validate()``required`

* * *

您页面上的第一个错误：

```
"$('#content_contactus').ahow is not a function" 
```

`ahow`应该是`show`。

您需要解决此问题以及页面上的许多其他 JavaScript 错误（似乎是由许多拼写错误引起的），然后才能期望任何剩余的 JavaScript 正常运行。

# php - 在 mysqli_connect('','','') 之后停止执行

> ID：14944343
> 
> 赞同：1
> 
> 时间：2013-02-18T20:01:03.113
> 
> 标签：php, mysqli

我在php中编写了aa代码...

```
<?php
 echo "entering db php code";
 $link=mysqli_connect ('localhost','root','MyRootPassword');
 echo "mysqli_connect is called";
 if (!$link)
 {
     echo "cannection is failed";
     exit();    
 }
 echo "connection is ok";
 ?> 
```

输出是::

> 输入db php代码

就是这样。***代码在 mysqli_connect() 调用后停止执行。*** 谁能告诉我。代码中的问题是什么。这段代码对 mysqli_connect() 调用完全没有任何作用，一旦调用 mysqli_connect，它就会停止执行其余部分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:11:51.897

您应该启用错误显示，例如：

```
ini_set('display_errors',1);
error_reporting(E_ALL | E_STRICT); 
```

但是如果你从来没有达到第二个`echo`，那可能意味着`mysqli`没有安装扩展并且你得到一个`undefined function`错误，停止你的脚本。

有没有`phpinfo();`给你一个 mysqli 信息的部分？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:02:42.973

```
$link=mysqli_connect ('localhost','root','MyRootPassword'); 
```

缺少一个论点。

正确的调用方式`mysqli_connect`是

```
$link = mysqli_connect('server', 'username', 'password', 'database_name'); 
```

或者，您可以在`php.ini`文件中定义以下内容

```
mysqli.default_host
mysqli.default_user
mysqli.default_pw
mysqli.default_db
mysqli.default_port //You should only need to change this rarely
mysqli.default_socket //You should only need to change this rarely 
```

并将 mysqli_connect 称为

```
$link = mysqli_connect(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:54:52.507

我已经解决了 :D :) 早些时候我已经安装了 php 安装程序版本。我卸载了它。然后解压缩 php 5.2.x 线程安全。现在它在必要的配置后工作......

# c# - 根据WPF中GridView/ListView相邻单元格的值进行过滤

> ID：14944344
> 
> 赞同：0
> 
> 时间：2013-02-18T20:01:05.753
> 
> 标签：c#, wpf, filter

我有一个 ListView，其中包含两列的 WPF 项目中的项目数量可变。A列是一个字符串，B列是一个组合框。我将 ListView 绑定到某个 collectionView，并且组合框列是一个 cellTemplate，将组合框绑定到其他一些 collectionView 或 observableCollection。

有没有办法根据A列的值动态过滤B列组合框中显示的集合？

如果 ListView 可以授予我所描述的功能，我愿意用其他控件替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:08:36.963

也许您可以通过将组合框属性 B 的 ItemsSource 绑定到

```
{Binding Path=PropertyA, Converter={StaticResource ItemsConverter}} 
```

然后编写一个 IValueConverter，它接受一个 TypeA 并返回一个 IEnumerable。将其敲入资源中，以便静态资源可以找到它。

鲍勃是你的叔叔。

# wpf - 在另一个列表框内滚动列表框

> ID：14944349
> 
> 赞同：0
> 
> 时间：2013-02-18T20:01:24.783
> 
> 标签：wpf, layout, listbox

我有一个列表框（具有正常的垂直方向），其中的每个元素都是一个**水平**方向的列表框。我想在**内部**列表框中有一个 ScrollBar。所以，我的问题是如何根据外部的实际当前宽度设置内部列表框的宽度。

我目前的代码是：

```
<Window.Resources>
    <HierarchicalDataTemplate x:Key="ItemTemplateSchedule">
        <ListBox>
            <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBoxItem>My-Very-Long-Item-Nimber-1___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-2___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-3___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-4___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-5___</ListBoxItem>
        </ListBox>
    </HierarchicalDataTemplate>
</Window.Resources>

<Grid>
    <ListBox ItemTemplate="{StaticResource ItemTemplateSchedule}" >
        >
    </ListBox>
</Grid> 
```

当前截图： ![列表框内的列表框](../Images/70b18a5eca5378dbd5cd89abd83b2f55.png) .

**UPD1**

好的，我的问题的答案是设置内部列表框的宽度，感谢**@sa_ddam213**：

```
Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ListBox}, Path=ActualWidth}" 
```

现在我想在外部列表框的每一行中添加一些新控件：

```
<HierarchicalDataTemplate x:Key="ItemTemplateSchedule">
    <StackPanel Orientation="Horizontal" Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ListBox}, Path=ActualWidth}">
        <TextBlock Text="This is Text in a TextBlock"/>
        <ListBox >
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBoxItem>My-Very-Long-Item-Number-1___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Number-2___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Number-3___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Number-4___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Number-5___</ListBoxItem>
        </ListBox>
    </StackPanel>
</HierarchicalDataTemplate> 
```

而且现在不行！有可能解决这个问题吗？当前截图： ![更新1](../Images/e37be71bdfbe780e02616b1e89f70513.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:09:38.713

您可以使用 a`FindAncestor`绑定到父级`ListBox` `ActualWidth`

例子：

```
<Window.Resources>
    <HierarchicalDataTemplate x:Key="ItemTemplateSchedule">
        <ListBox Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ListBox}, Path=ActualWidth}" >
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBoxItem>My-Very-Long-Item-Nimber-1___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-2___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-3___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-4___</ListBoxItem>
            <ListBoxItem>My-Very-Long-Item-Nimber-5___</ListBoxItem>
        </ListBox>
    </HierarchicalDataTemplate>
</Window.Resources> 
```

结果：

![在此处输入图像描述](../Images/7b4d5d1537a2447fc2f52d3013d0cf1d.png)

# c# - Outlook 加载项自定义表单区域和自定义邮件类

> ID：14944357
> 
> 赞同：0
> 
> 时间：2013-02-18T20:01:58.503
> 
> 标签：c#, visual-studio, outlook-addin

我在 Outlook 插件开发方面真的很陌生，而且我正在为 Outlook 的概念而苦苦挣扎。例如; 使用自定义消息类创建表单区域。其实我什至不知道那是我要找的。请帮助我 :) 这是这种情况，我需要在个人文件夹中创建一个包含文件夹和子文件夹的 Outlook 加载项。现在到目前为止一切顺利。但是，我需要的是，当我单击该文件夹时，它会打开一个嵌入到 Outlook 中的表单（不是窗口表单）。

![在此处输入图像描述](../Images/17d17149785bc68c350a78ab58d644db.png)

就像这个例子一样。我试图分离和相邻的表单区域，但由于 IPM.standartMessageClass，它不适合我。我想知道如何创建此表单和/或如何创建自定义消息类。我知道这不是stackoverflow的概念，但我真的很绝望:(请帮助我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:10:14.170

您可以显示 HTML 页面而不是文件夹内容，右键单击文件夹并选择“属性 | 主页”时相同。

尝试 MAPIFolder.WebViewURL/WebViewOn 属性。

# jquery - 验证 URL jQuery

> ID：14944363
> 
> 赞同：0
> 
> 时间：2013-02-18T20:02:13.873
> 
> 标签：jquery, razor

好像没办法整理...

我正在尝试验证 2 个输入以验证两者都是有效的 URL。即[http://www.somename.com](http://www.somename.com)。

它破坏了我的应用程序（ASP.NET RAZOR）。说一些解析问题并指出 domainPattern var 是罪魁祸首。

有什么猜测吗？

```
// validate domain url
var url = $('.sb-terms-url, .sb-privacy-url').val();
var domainPattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
if (!domainPattern.test(url)) {
    $('.sb-privacyalert').fadeIn(600);

}
else {
    $(this).trigger('reveal:close');

    $('.terms-link').attr('href', $('.sb-terms-url').val());
    $('.privacy-link').attr('href', $('.sb-privacy-url').val());

    $('.sb-privacyalert').fadeOut(300);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:05:41.107

我的猜测是这条线是你的问题：

```
var domainPattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/; 
```

因为它包含`@`razor 提取并尝试解析为 razor 语法的符号。您可以通过连续使用两次来转义该字符，例如`@@`在这种情况下，剃刀会吐出`@`然后将与您的正则表达式一起使用。

这应该有效：

```
var domainPattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@@!\-\/]))?/; 
```

# macos - Rackspace Cloud Files 是否有与 Amazon S3 的 s3cmd 同步的等效项？

> ID：14944364
> 
> 赞同：3
> 
> 时间：2013-02-18T20:02:18.933
> 
> 标签：macos, amazon-s3, sync, rackspace-cloud, s3cmd

我目前正在使用 Amazon S3 在我的网站上托管所有静态内容。该站点有很多静态文件，因此我需要一种自动方式将本地主机上的文件与远程文件同步。我目前使用 s3cmd 的同步功能来执行此操作，效果非常好。每当我运行部署脚本时，只会上传已更改的文件，并且已删除的所有文件也会在 S3 中删除。

我想试试 Rackspace CloudFiles；但是，我似乎找不到任何提供相同功能的东西。除了编写我自己的同步实用程序之外，还有什么方法可以在 Rackspace Cloud Files 上完成此任务？它需要有一个命令行界面并且可以在 OS X 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:42:43.830

用于 Rackspace Cloud的[pyrax SDK](https://github.com/rackspace/pyrax)`sync_folder_to_container()`具有听起来像您正在寻找的云文件的方法。它只会上传新的/更改的文件，并且可以选择从云中删除本地删除的文件。

就初始上传而言，我通常使用[eventlet](http://eventlet.net/)以尽可能异步的方式上传文件。总时间仍然会受到您的上传速度的限制（我不知道有任何 SDK 可以解决这个问题），但非阻塞代码肯定会有助于整体性能。

如果您有任何其他问题，请随时在 GitHub 页面上提问。

——埃德·利夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:07:42.053

[Rackspace Python SDK](http://docs.rackspace.com/sdks/guide/content/python.html)可以为您做到这一点。有一个名为[cf_pyrax.py](https://github.com/Linuturk/www.onitato.com/blob/master/cf_pyrax.py)的脚本或多或少地完成了我认为您正在尝试做的事情。[在这篇博文](http://devops.rackspace.com/using-pyrax-to-deploy.html)中有一篇关于它的文章。

# python - 仅在 OSX 上的 ctypes 段错误

> ID：14944367
> 
> 赞同：2
> 
> 时间：2013-02-18T20:02:22.280
> 
> 标签：python, c, segmentation-fault, ctypes, language-binding

我使用 ctypes 在 Python 中创建了一个非常简单的 C 库绑定。它所做的只是接受一个字符串并返回一个字符串。

我在 Ubuntu 上进行了开发，一切看起来都很好。不幸的是，在 OSX 上完全相同的代码失败了。我完全被难住了。

我已经整理了一个最小的案例来显示我遇到的问题。

### 主文件

```
import ctypes

# Compile for:
#   Linux: `gcc -fPIC -shared hello.c -o hello.so`
#   OSX:   `gcc -shared hello.c -o hello.so`
lib = ctypes.cdll.LoadLibrary('./hello.so')

# Call the library
ptr = lib.hello("Frank")
data = ctypes.c_char_p(ptr).value # segfault here on OSX only
lib.free_response(ptr)

# Prove it worked
print data 
```

### 你好ç

```
#include <stdlib.h>
#include <string.h>

// This is the actual binding call.
char* hello(char* name) {
    char* response = malloc(sizeof(char) * 100);
    strcpy(response, "Hello, ");
    strcat(response, name);
    strcat(response, "!\n");
    return response;
}

// This frees the response memory and must be called by the binding.
void free_response(char *ptr) { free(ptr); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:17:00.007

您应该指定函数的返回类型。具体来说，将其声明为`ctypes.POINTER(ctypes.c_char)`.

```
import ctypes

lib = ctypes.CDLL('./hello.so')    
lib.hello.restype = ctypes.POINTER(ctypes.c_char)

ptr = lib.hello("Frank")
print repr(ctypes.cast(ptr, ctypes.c_char_p).value)
lib.free_response(ptr) 
```

# python - 数组的功能

> ID：14944368
> 
> 赞同：1
> 
> 时间：2013-02-18T20:02:24.093
> 
> 标签：python, function, numpy

我有一个以这种方式定义的数组（提取数据集的第三列）：

```
value=[]
value.append((p[3]))
x=np.array(value) 
```

如果我想获得一个包含数组 x 的 Log10（oa 不同函数）的新数组，我该怎么办？我尝试过：

```
logx=np.array(log(x)) 
```

但它给了我以下错误：

```
TypeError: 'numpy.ufunc' object is not subscriptable. 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:06:37.260

您可以使用：`logx = np.log(x)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:14:29.893

不知道为什么 Nikolay 的答案对你不起作用，但你也可以这样做：

`logx = map(np.log, x)`

# python - Python：函数/方法（如 sorted）从何而来？

> ID：14944377
> 
> 赞同：1
> 
> 时间：2013-02-18T20:03:04.097
> 
> 标签：python, python-2.7

我是 python 新手。我有这个示例程序：

```
def main():
  a = [4,2,1,6]
  b = sorted(a)

  for i in b:
    print i 
```

sorted 来自哪里，或者这是某种 python 关键字？与 print i 相同的问题。顺便说一句，这是python 2.7。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T20:04:53.827

`sorted`不是方法，而是 Python 内置函数。它们在这里列出：http: [//docs.python.org/2/library/functions.html](http://docs.python.org/2/library/functions.html)

在 Python 2 中，`print`是一个语句，它是一种关键字。在 Python 3 中，它已被更改`print`为内置函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:05:28.393

根据[文档](http://docs.python.org/2/library/functions.html#sorted)，它是一个内置函数。

Print 是 Python 2.7 中的一个语句 - 请参阅[此处的文档](http://docs.python.org/2/reference/simple_stmts.html#the-print-statement)。请注意，这在 Python 3 中不再适用，现在 print 是一个函数。

# sql - 从表中获取下一个 ID 值有时会返回重复项

> ID：14944386
> 
> 赞同：0
> 
> 时间：2013-02-18T20:03:31.520
> 
> 标签：sql, sql-server, tsql

我有一个名为的表`UniqueIDStore`，它给了我最后一次`UniqueID`从数据库中给出的信息。当应用程序需要唯一 id 时，应用程序将执行以下存储过程并执行以下操作，

1.  `UniqueID`从`UniqueIDStore`表中获取最后一个
2.  加一
3.  将最新的保存`UniqueID`到`UniqueIDStore`表中。

当应用程序从不同的数据库连接/java 进程执行这个存储过程时，它有时会返回重复的 id，我不知道为什么。

`UniqueIDStore`桌子：

```
CREATE TABLE [dbo].[UniqueIDStore](
    [UniqueId] [bigint] NOT NULL
) ON [PRIMARY] 
```

存储过程是：

```
CREATE    PROCEDURE [dbo].[GET_UniqueID] @blockSize int = 1 
AS  
    DECLARE @uniqueId BIGINT;
    DECLARE C1 CURSOR local FOR SELECT UNIQUEID FROM UniqueIDStore FOR UPDATE OF UNIQUEID;
    OPEN C1;
    SELECT UNIQUEID FROM UniqueIDStore;
    FETCH C1 INTO @uniqueId;
    UPDATE UniqueIDStore SET UNIQUEID = @uniqueId + @blockSize;
    CLOSE C1;
GO 
```

我不是 SQL Server 专家；有人可以帮我解决这个修复存储过程以同步请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:43:09.903

您的存储过程未使用事务，因此您无法保证其他人不会在您之后读取相同的数字，但在您存储新值之前。

在 SQLServer 中，您可以使用标识来处理主键生成，如下所示：

```
create table something (
   id identity int,
   something varchar(50)
); 
```

然后，您可以这样做：

```
 insert into something values ('something');
 insert into something values ('something else'); 
```

可能会得到这样的东西：

```
| id | something      |
|  1 | something      |
|  2 | something else | 
```

# javascript - 循环遍历字符数组

> ID：14944395
> 
> 赞同：-2
> 
> 时间：2013-02-18T20:04:08.690
> 
> 标签：javascript, arrays, loops, textbox, toggle

我想为一组不断变化的特定字符循环一个数组。从那里我想切换字母的大小写，我被告知要使用这个特定的代码，但我无法让它工作。代码必须循环遍历字符数组，其中字符来自“输入”文本框。我怎样才能解决这个问题？

*我应该提一下，我正在为高中上课做这个，所以我在编码方面还不够完美。*

* * *

```
 <html> 
      <head> 
        <script type="text/javascript"> 
    function toggleCase() { 
        var i = document.getElementById("input").value.length;
        var word = document.getElementById("input").value;
        var chop =new array(i);
        for (a=i; a <= i; a++) {
            character[i] = word.slice(i-1,i)
            if (character[i] == character[i].toUpperCase;){
                character[i] = character[i].toLowerCase();
            }
            else {
                character[i] = character[i].toUpperCase();
            }
        }

        var final

        for (a=i; a <= i; a++) {
            final += character[i];
        }

        document.getElementById("output").value = final
    }
        </script> 
      </head> 
      <body> 
        <p>Enter letters for conversion:</p> 
        <form> 
          <input type="text" name="input" id="input" value="sample" maxlength="10"><br />
          <input type="text" name="output" id="output" value="" /> <br/>
          <input type="checkbox" name="toggle" value="ToggleCase" onClick="toggleCase(this.form)">Toggle Case<br/>
        </form> 
      </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:18:25.720

也许你应该看看一些 api 和 howtos 但这是你的代码：

```
<html> 
<head> 
<script type="text/javascript"> 
function toggleCase() { 
  var text = document.getElementById("input").value;
  var character = new Array(text.length);

  for (i=0, a = text.length; i < a; i++) {
    character[i] = text[i];
    if (character[i] == character[i].toUpperCase){
      character[i] = character[i].toLowerCase();
    }
    else {
      character[i] = character[i].toUpperCase();
    }
  }

  document.getElementById("output").value = character.join('');
}
</script> 
</head> 
<body> 
<p>Enter letters for conversion:</p> 
<form> 
<input type="text" name="input" id="input" value="sample" maxlength="10"><br />
<input type="text" name="output" id="output" value="" /> <br/>
<input type="checkbox" name="toggle" value="ToggleCase" onClick="toggleCase()">Toggle Case<br/>
</form> 
</body> 
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:22:21.377

```
function toggleCase() { 
   var str = document.getElementById("input").value;
   for (var i=0; i<str.length; i++) {
     str[i] = (str[i]==str[i].toUpperCase() ? str[i].toLowerCase() : str[i].toUpperCase());
   }
   document.getElementById("output").value = str;
} 
```

这是一个完成这项工作的 for 循环。记住`.toUpperCase`和`.toLowerCase`是函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:06:51.373

您可能想看看 String 的 split 方法。

```
var str = 'foo bar baz'; 
```

将字符串转换为 char 数组的最简单方法是将空字符串传递给 split 方法。

```
var charArray = str.split(''):
// charArray === ['f','o','o' ... 'b','a','z']; 
```

另外一个仅供参考，将空格字符传递给 split 会给你一个单词数组。

```
var wordArray = str.split(' ');
// wordArray === ['foo', 'bar', 'baz']; 
```

我有点不清楚你必须解决什么，但看起来你想要一个函数将大写字母转换为小写字母，反之亦然。

```
var userInput = document.getElementById('someTextBox');
// If you want to be fancy you could use JQuery
// var userInput = $(#someTextBox').value() 

function toggledCase( str ) {

    var characters = str.split('');
    // The split method still uses iteration so should be able to say it 
    // satisfies the argument of looping through each character.  
    // Split just provides a good abstraction to interface with.

    var toggledCharacters = [];
    var i;
    var ch;
    for( i in characters ) {
        // For in loops on strings will return the indexes instead 
        // of the characters
        ch = characters[i];

        if( ch.toUpperCase() === ch ){
            toggledCharacters.push( ch.toLowerCase() );
        } else {
            toggledCharacters.push( ch.toUpperCase() );
        }

        // If you like one-liners, 
        // the conditional if statement could be replace with a ternay statement.

        //  toggledCharacters.push( ( ch.toUpperCase() === ch ) ? 
        //  ch.toLowerCase() : ch.toUpperCase();
    }

    return toggledCharacters;
} 
```

我的 toggledCharacters 方法只返回一个字符数组，所以如果你想返回一个字符串，你可以创建一个 for 循环；

```
var arr = toggledCharacters('Foo'); // str = 'fOO';
var str = '';  

var i, ch;
for ( i in arr ) {
    str += arr[i]; // += is just a short hand notation of saying 
                   //      str = str + arr[i];
} 
```

如果您很懒惰并且喜欢单行，请查看函数式编程。因为你还在上高中，所以有点超出范围。

```
var arr = toggledCharacters('Foo'); // str = 'fOO';
var str = arr.reduce( function(str, ch) {
    return str + ch;
} ); 
```

无论如何，这对我来说比老师概述的要干净得多。

```
function toggledCharacters(input) {
    input = input.split('');
    var output = [];

    var i, ch;
    for( i in input ) {
        output.push( ( input[i].toUpper() === input[i] ) ?
            input[i].toLower() : input[i].toUpper()
        );
    }

    return output.reduce( 
        function(str, ch) {
            return str + ch;
        }
    );
} 
```

编辑：

哦，我只是注意到该代码中没有任何地方正在评估复选框的布尔值。

```
var checkBox = document.getElementByName('toggle');
var inputTextBox = document.getElementById('input'); 
var outputTextBox = document.getElementById('output');

var result = inputTextBox.value;

if( checkBox.checked ) {
    result = toggleCase( result );
}

outputTextBox.value = result; 
```

哦，另一个仅供参考，因为您是初学者。确保您知道使用浏览器的控制台。

如果您使用的是 Firefox，请获取 firebug 应用程序。

Chrome，按 Ctrl-Shift-C。

IE 也有一个，我只是不想使用它。

与制作 html 演示页面并假设代码正常工作相比，控制台使使用 JS 进行实验变得更容易。

此外，这些开发人员工具可以向您展示对象的底层方法。它为学习 JS 提供了一种快速而有效的方式。

# wordpress - Wordpress 基于年/期的杂志 URL 结构……他们是怎么做到的？

> ID：14944398
> 
> 赞同：2
> 
> 时间：2013-02-18T20:04:35.907
> 
> 标签：wordpress, permalinks

我已经看到了很多几乎答案，但没有确定的答案，所以我在这里。

我正在尝试像[http://magazine.pomona.edu](http://magazine.pomona.edu)那样构建我的 WP 永久链接。该站点的组织形式为[http://example.com/%volume_year%/%volume_issue%/%postname%/](http://example.com/%volume_year%/%volume_issue%/%postname%/)。示例： http: [//magazine.pomona.edu/2012/fall/a-carefully-calculated-caper/](http://magazine.pomona.edu/2012/fall/a-carefully-calculated-caper/)

我在找出不提供 404 或 400 的永久链接结构时遇到问题。我创建了两个自定义分类法，“volume_year”和“volume_issue”。我更改了我的永久链接结构以反映这些（/%volume_year%/%volume_issue%/%postname%/）并检查了帖子管理员（2012 年和秋季）中的适当条款。

但是，当我尝试查看该帖子时，该帖子应位于[http://example.com/2012/fall/lost-and-found/](http://example.com/2012/fall/lost-and-found/)。我收到 400 Bad Request 错误，我的 URL 是[http://example.com/%volume_year%/%volume_issue%/lost-and-found/](http://example.com/%volume_year%/%volume_issue%/lost-and-found/)。显然，占位符没有被转换为术语。我错过了什么，和/或有人有更好的方法吗？

这是我的代码，fwiw：

```
$labels[0] = array(
            'name'                       => 'Year',
            'singular_name'              => 'Year',
            'menu_name'                  => 'Year',
            'all_items'                  => 'All Years',
            'parent_item'                => 'Parent Year',
            'parent_item_colon'          => 'Parent Year:',
            'new_item_name'              => 'New Year Name',
            'add_new_item'               => 'Add New Year',
            'edit_item'                  => 'Edit Year',
            'update_item'                => 'Update Year',
            'separate_items_with_commas' => 'Separate years with commas',
            'search_items'               => 'Search years',
            'add_or_remove_items'        => 'Add or remove years',
            'choose_from_most_used'      => 'Choose from the most used years',
        );

        $rewrite[0] = array(
            'slug'                       => 'volume_year',
            'with_front'                 => false,
            'hierarchical'               => true,
        );

        $args[0] = array(
            'labels'                     => $labels[0],
            'hierarchical'               => true,
            'public'                     => true,
            'show_ui'                    => true,
            'show_admin_column'          => true,
            'show_in_nav_menus'          => true,
            'show_tagcloud'              => true,
            'query_var'                  => 'volume_year',
            'rewrite'                    => $rewrite[0],
        );

        register_taxonomy( 'volume_year', array('post'), $args[0] );

        $labels[1] = array(
            'name'                       => 'Issue',
            'singular_name'              => 'Issue',
            'menu_name'                  => 'Issue',
            'all_items'                  => 'All Issues',
            'parent_item'                => 'Parent Issue',
            'parent_item_colon'          => 'Parent Issue:',
            'new_item_name'              => 'New Issue Name',
            'add_new_item'               => 'Add New Issue',
            'edit_item'                  => 'Edit Issue',
            'update_item'                => 'Update Issue',
            'separate_items_with_commas' => 'Separate issues with commas',
            'search_items'               => 'Search issues',
            'add_or_remove_items'        => 'Add or remove issues',
            'choose_from_most_used'      => 'Choose from the most used issues',
        );

        $rewrite[1] = array(
            'slug'                       => 'volume_issue',
            'with_front'                 => false,
            'hierarchical'               => true,
        );

        $args[1] = array(
            'labels'                     => $labels[1],
            'hierarchical'               => true,
            'public'                     => true,
            'show_ui'                    => true,
            'show_admin_column'          => true,
            'show_in_nav_menus'          => true,
            'show_tagcloud'              => true,
            'query_var'                  => 'volume_issue',
            'rewrite'                    => $rewrite[1],
        );

        register_taxonomy( 'volume_issue', array('post'), $args[1] ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:43:32.267

我们为当地的商业报纸做了非常相似的事情。他们每隔一个星期五发布一次，并使用问题和卷的概念。我们发现对他们来说最好的方法是简单地让他们将文章标记到具有适当名称的类别中。然后，我们根据这些类别过滤并放置内容到网站的适当区域。

我们将问题和数量信息保留在 URL 之外，因为它与搜索引擎如何对文章进行分类和索引无关。

对 Google 来说重要的是在 URL 中包含一个至少 3 位数长的唯一编号。这使我们的信息能够进入 Google 新闻。[我们只是在 URL 中使用帖子 ID 来确保唯一性，并将帖子表重新设置为 400，因此第一篇文章的 ID 将是 401。在http://support.google.com/news/publisher/bin/answer](http://support.google.com/news/publisher/bin/answer.py?hl=en&answer=68323)了解更多信息[.py?hl=en&answer=68323](http://support.google.com/news/publisher/bin/answer.py?hl=en&answer=68323)

该属性现在已切换为月刊，但由于我们没有在 URL 中包含数量和发行信息，因此我们无需更改任何内容，并且轻松保留了多年的内容，这些内容只是简单地吸收了新主题的样式。在此页面上，您可以看到我们进行切换的位置。2011 年 10 月是新的，2011 年 9 月是旧的。 [http://columbiabusinesstimes.com/archives/page/17/](http://columbiabusinesstimes.com/archives/page/17/) 请注意，较新的问题有不同的标签，并且每篇文章都有一张图片。

希望对某人有所帮助。

# twitter-bootstrap - 使用 AngularJS 模拟我的后端

> ID：14944399
> 
> 赞同：0
> 
> 时间：2013-02-18T20:04:40.460
> 
> 标签：twitter-bootstrap, mocking, angularjs

我有一个大型现有 SPA 应用程序，它使用 REST/JSON 调用来获取/保存数据到数据库。

我最近被介绍给 AngularJS，我认为它真的很酷，尤其是它的模拟功能。

但是，到目前为止，我还没有掌握如何端到端模拟后端调用。

我正在寻找的是一个简单的应用程序，其中包含 html、控制器和模拟层，以最简单的基本方式演示如何使用它。我在 jsFiddle 上看到的例子并没有真正做到。

我将我的测试应用程序放到网上（[http://plnkr.co/edit/HcaKeKqbHKZsvmuDt5tR](http://plnkr.co/edit/HcaKeKqbHKZsvmuDt5tR)）。如您所见，这是来自 Angular 网站的一个，有少量添加（reset pwd 功能）。我想要做的是添加一个可以帮助我测试重置密码功能的模块，通过拦截 jsonp 调用（或我在我的应用程序中拥有的任何其他 json 调用），而是返回一个静态 json 数据对象。

[http://plnkr.co/edit/HcaKeKqbHKZsvmuDt5tR](http://plnkr.co/edit/HcaKeKqbHKZsvmuDt5tR)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:23:55.853

我认为您正在寻找如何使用 $httpBackend 服务。文档： [http](http://docs.angularjs.org/api/ngMockE2E) : //docs.angularjs.org/api/ngMockE2E .$httpBackend 和[http://docs.angularjs.org/api/ngMock](http://docs.angularjs.org/api/ngMock) .$httpBackend 有很多例子。

我用示例模拟的hackend创建了Plunker示例：[http ://plnkr.co/edit/R4Bxs4u7n2iNjIMP0izh?p=preview](http://plnkr.co/edit/R4Bxs4u7n2iNjIMP0izh?p=preview)

模拟是通过以下方式完成的：

```
$httpBackend.whenGET('some.json').respond({name:"MyName"}); 
```

# c - 如果在main中通过stdin输入，如何在其他函数定义中使用数组的维度变量？

> ID：14944409
> 
> 赞同：0
> 
> 时间：2013-02-18T20:05:34.890
> 
> 标签：c, arrays

如果我们在 main`A[a][b]`外部和内部全局声明一个数组，`main()`我们要求的是`a`and`b`的值

```
scanf("Input values of a and b %d %d", &a,&b) 
```

但是这个 a 和 b 正在被其他一些函数定义使用，它会给出分段错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:11:55.867

您的问题不是很清楚，但听起来您想要一个数组，其维度由用户在运行时指定。在 c 中执行此操作的最佳方法是 malloc 指针：

```
int* A = malloc(a*b*sizeof(int)); 
```

A 现在指向一个包含 a*b 元素的数组，您可以将其视为二维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:47:49.790

在要为维度 a 和 b 的数组 A 分配空间的代码中，使用：

```
int (*A)[b] = malloc(a * sizeof *A); 
```

这将 A 定义为指向`b`元素（元素）的行（数组）的指针，并为这些行（所以对象的行，对象`int`）分配空间。`a``a``b` `int``a*b` `int`

在要接收此数组的函数中，以这种方式声明该函数：

```
void foo(size_t a, size_t b, int (*A)[b])
{
    …
} 
```

这表示 foo 的参数是 size `a`、 size`b`和指向`b` `int`对象行的指针。

像这样调用函数：

```
foo(a, b, A); 
```

`A`以正常方式使用 的元素：

```
…A[i][j]… 
```

# authentication - 如何修改当前用户的属性并在整个会话中保持它们

> ID：14944410
> 
> 赞同：3
> 
> 时间：2013-02-18T20:05:37.977
> 
> 标签：authentication, symfony, service, ldap, symfony-2.1

我正在使用 IMAG/Ldap-Bundle (BorisMorel/LdapBundle) 对我的用户进行身份验证，并且我无法保留`User`对我的 LDAP 服务器所做的任何更改。但是每当用户登录时，我需要在本地检查一些东西并根据一些规则添加用户的角色。

每当 imag 验证我的 LDAP 服务器上的用户/密码时，它都会调用我创建的正在侦听“绑定”事件的服务。事情是这样的：

```
ldap_user_verifier:
    class: MyBundle\Service\LdapUserVerifierService
    arguments: [ @security.context, @doctrine.orm.default_entity_manager, @twig ]
    tags:
        - { name: 'kernel.event_listener', event: imag_ldap.security.authentication.pre_bind, method: loadUser } 
```

注意：`bind_username_before`设置为`false`，这意味着`LdapUserVerifierService::loadUser`只有在用户登录并且`User`类加载到我的`security.context`.

然后我有我`LdapUserVerifierService::loadUser`这样的：

```
public function loadUser(LdapUserEvent $event) {

    $ldapUser = $event->getUser();

    [...]

    $ldapUser->setLocalUser($localUser);
    $ldapUser->addRole('ROLE_USER');
    [...]

} 
```

这很好用，除了每当我的用户更改页面（例如从`/login_check`到`/dashboard`）时，我对 的修改都会`security.context.getToken().getUser()`丢失。我的用户有一个`localUser`和`ROLE_USER`关联 on `/login_check`，但它没有 on `/dashboard`。

因为我的用户不是从我的应用程序的数据库中加载的，所以我无法将其保存在数据库中以在后续页面点击中加载，因此，如果不保存另一个会话变量，就无法保存我的对象更改。

有谁知道我应该怎么处理这个？

谢谢你。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-21T18:40:48.607

没有足够的代码来提供更好的答案，但我看不到您在哪里修改 security.context 或令牌。

对从令牌中获得的用户对象进行更改后，您可能需要将此修改后的用户设置为令牌。

# java - Gson 到 HashMap

> ID：14944419
> 
> 赞同：52
> 
> 时间：2013-02-18T20:06:13.977
> 
> 标签：java, android, gson

有没有办法将包含 json 的 String 转换为 HashMap，其中每个 key 都是 json-key 而 value 是 json-key 的值？json 没有嵌套值。我正在使用 Gson 库。

例如，给定 JSON：

```
{
"id":3,
"location":"NewYork"
} 
```

结果哈希图：

```
<"id", "3">
<"location", "NewYork"> 
```

谢谢

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-02-18T20:12:49.933

[`TypeToken`](http://google-gson.googlecode.com/svn/tags/1.1.1/docs/javadocs/com/google/gson/reflect/TypeToken.html)根据[GSON FAQ](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)使用：

```
Gson gson = new Gson();
Type stringStringMap = new TypeToken<Map<String, String>>(){}.getType();
Map<String,String> map = gson.fromJson(json, stringStringMap); 
```

没有铸造。没有不必要的对象创建。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-25T08:37:29.873

如果我将 TypeToken 解决方案与 Map< **Enum** , Object> 一起使用，我会得到“重复键：null”。

对我来说最好的解决方案是：

```
String json = "{\"id\":3,\"location\":\"NewYork\"}";
Gson gson = new Gson();
Map<String, Object> map = new HashMap<String, Object>();
map = (Map<String, Object>)gson.fromJson(json, map.getClass()); 
```

结果：

```
{id=3.0, location=NewYork} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-07T20:42:38.920

我喜欢：

```
private static class MyMap extends HashMap<String,String> {};
...
MyMap map = gson.fromJson(json, MyMap.class); 
```

# video-streaming - 使用 smil 文件更改 JW Player 中的名称质量

> ID：14944424
> 
> 赞同：4
> 
> 时间：2013-02-18T20:06:36.603
> 
> 标签：video-streaming, jwplayer, smil

我有一个用于 jw player 6 的 smil 文件。

```
<smil>
<head>
  <meta base="rtmp://host/app" />
</head>
<body>
  <switch>
    <video src="stream1" system-bitrate="1800" width="1280" height="540" />
    <video src="stream2" system-bitrate="390" width="320" height="320" />
  </switch>
</body> 
```

这是它在播放器上的外观

![这是它在播放器上的外观](../Images/c8fc615dd60d5f4b4260862da96490d9.png)

如何在 JW 播放器中显示 High/Med/Low 而不是 540p/320p？我尝试在 smil 文件的视频节点中添加名称、标题和标签参数，但没有奏效。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T21:23:08.553

使用标题属性。这将显示“高质量视频”：

```
<video src="stream1" system-bitrate="1800" width="1280" height="540" title="High Quality Video" /> 
```

# c# - 变量在多个循环内不递增

> ID：14944430
> 
> 赞同：1
> 
> 时间：2013-02-18T20:07:15.713
> 
> 标签：c#, asp.net, loops, nested-loops

这个问题把我难住了。我有一个在循环中共享的变量，它没有递增。

有问题的变量是 elrObject.currentLocation。有两种方法可以增加它 - 如果 XML 元素为空，或者它不是。

这是代码：

```
if (reader.Name == "Cell")
{  
    if (reader.IsEmptyElement)
    {       
        Response.Write("i ran<br>");
        elrObject.currentLocation++;
    }       
    else
    {
        while (reader.Read())
        {           
            if (reader.IsStartElement())
            {                                           
                //labels
                if (elrObject.currentLocation >= elrObject.index && elrObject.currentLocation <= elrObject.index + elrObject.colSpan)
                    Response.Write("i ran again<br>");

                Response.Write(elrObject.currentLocation + "<br>");
                elrObject.currentLocation++;

            }
            if (reader.Name == "Cell")
            break;
        }
    }
} 
```

我得到的输出是：
0
1
2
3
5

数字 4 是当 XML 元素为空并且顶部循环运行时。我正在增加变量，但它不会显示数字 4，它会完全跳过它并转到 5。我确信上部循环运行正常并且在下部循环之前运行，因为以下也运行：

我跑了
我又跑了

这证实了上面的循环在下面的循环之前运行....但是数字 4 正在跳过自己！我真的很感激这方面的一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:14:29.200

它不*应该*显示数字 4。你没有

```
Response.Write(elrObject.currentLocation + "<br>"); 
```

在里面

```
if (reader.IsEmptyElement) 
```

堵塞。

# r - 根据列名在数据框中添加两列

> ID：14944434
> 
> 赞同：4
> 
> 时间：2013-02-18T20:07:22.593
> 
> 标签：r

示例：我有一个数据框

```
> a = data.frame(T_a_1=c(1,2,3,4,5),T_a_2=c(2,3,4,5,6),T_b_1=c(3,4,5,6,7),T_c_1=c(4,5,6,7,8),length=c(1,2,3,4,5))
> a    
T_a_1 T_a_2 T_b_1 T_c_1 length
1     2     3     4      1
2     3     4     5      2
3     4     5     6      3
4     5     6     7      4
5     6     7     8      5 
```

我想根据名称在列上添加（或执行一些其他操作，例如 (column1+column2)/length。像 T_a（T_a_1 和 T_a_2）是两列（第 1 和第 2）之间的通用名称，所以我想添加它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:23:02.190

我会使用`grep`命令来将列名与某种模式相匹配。这里有些例子：

```
> a = data.frame(T_a_1=c(1,2,3,4,5),
+                T_a_2=c(2,3,4,5,6),
+                T_b_1=c(3,4,5,6,7),
+                T_c_1=c(4,5,6,7,8),
+                length=c(1,2,3,4,5))
> 
> # display only columns that match T_a
> a[,grep('T_a', colnames(a))]
  T_a_1 T_a_2
1     1     2
2     2     3
3     3     4
4     4     5
5     5     6
> 
> # sum
> sum(a[,grep('T_a', colnames(a))])
[1] 35
> 
> #rowsum
> rowSums(a[,grep('T_a', colnames(a))])
[1]  3  5  7  9 11
> 
> # your example (row1 + row2) / length
> rowSums(a[,grep('T_a', colnames(a))]) / a$length
[1] 3.000000 2.500000 2.333333 2.250000 2.200000 
```

更新：

从下面的评论中，我了解到您想要对按公共前缀分组的匹配行求和并除以长度列。以下代码是该问题的一个不优雅的解决方案：

```
> a = data.frame(ES51_223_1=c(1,2,3,4,5),
+                ES51_312_1=c(2,3,4,5,6),
+                ES52_223_2=c(3,4,5,6,7),
+                ES52_312_2=c(4,5,6,7,8),
+                ES53_223_3=c(1,2,3,4,5),
+                length=c(1,2,3,4,5))
> 
> # get the unique prefixes
> prefixes = unique(unlist(lapply(colnames(subset(a, select=-length)), function(x) { strsplit(x, '_')[[1]][[1]]})))
> 
> f = function(prefix) {
+   return (rowSums(subset(a, select=grep(prefix, colnames(a)))) / a$length)
+ }
> m = matrix(unlist(lapply(prefixes, f)), nrow=nrow(a))
> colnames(m) = prefixes
> m
         ES51     ES52 ES53
[1,] 3.000000 7.000000    1
[2,] 2.500000 4.500000    1
[3,] 2.333333 3.666667    1
[4,] 2.250000 3.250000    1
[5,] 2.200000 3.000000    1 
```

`m`是包含不同列中不同前缀结果的矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:17:20.563

这个怎么样？

```
# data
df <- structure(list(ES51_223_1 = 1:5, ES51_312_1 = 2:6, ES52_223_2 = 3:7, 
      ES52_312_2 = 4:8, ES53_223_3 = 1:5, length = 1:5), 
      .Names = c("ES51_223_1", "ES51_312_1", "ES52_223_2", "ES52_312_2", 
      "ES53_223_3", "length"), row.names = c(NA, -5L), class = "data.frame")

# create indices from factor levels (shortcut)
ids <- gsub("_.*$", "", setdiff(names(df), "length"))
ids <- factor(as.numeric(factor(ids)))
> ids
# [1] 1 1 2 2 3
# Levels: 1 2 3

# use the levels to fetch columns and sum them
o <- sapply(as.numeric(levels(ids)), function(x) {
    rowSums(df[which(ids == x)])/df$length
})

> o
#          [,1]     [,2] [,3]
# [1,] 3.000000 7.000000    1
# [2,] 2.500000 4.500000    1
# [3,] 2.333333 3.666667    1
# [4,] 2.250000 3.250000    1
# [5,] 2.200000 3.000000    1 
```

# html - 在没有链接的情况下将 SVG 嵌入 HTML

> ID：14944445
> 
> 赞同：0
> 
> 时间：2013-02-18T20:08:34.540
> 
> 标签：html, svg, embedded-resource

好的，所以我知道如何将静态 SVG 放入 html：

```
<object data="your.svg" type="image/svg+xml">
   <img src="yourfallback.jpg" />
</object> 
```

但是，如何放置实际的 SVG 文档（消除保存 http 请求的链接）：

```
<object data='<path d="m315.9,581.1c.....1,22.8z" fill="#fff" stroke="#4ea3ff" stroke-miterlimit="10" stroke-width="36"></path>' type="image/svg+xml">
  <img src="yourfallback.jpg" />
</object> 
```

我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:19:28.517

如果您想继续使用对象标签，您可以创建 svg 的数据 URI，有关详细信息，请参阅[此答案](https://stackoverflow.com/a/3365176/109374)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:03:24.947

只需粘贴在svg中。但是你需要用一个`<svg>`标签开始它，你不能只使用一个原始的`<path>`

```
<!DOCTYPE html>
<html>
<body>

<svg height="190">
  <polygon points="100,10 40,180 190,60 10,60 160,180"
  style="fill:lime;stroke:purple;stroke-width:5;fill-rule:evenodd;">
</svg>

</body>
</html> 
```

# cocoa - Cocoa - 4.6 播放一点声音后启动计时器

> ID：14944447
> 
> 赞同：1
> 
> 时间：2013-02-18T20:08:39.267
> 
> 标签：cocoa, audio, timer

播放声音后，我需要启动计时器，有人可以帮我吗？我写了一段声音和时间同时运行的小代码

```
 CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"song", CFSTR ("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlayAlertSound(soundID);

    [sender setTitle:@"RUNNIG 2P" forState:UIControlStateNormal];
    milliSecTimer1 =[NSTimer scheduledTimerWithTimeInterval:0.1
                                                     target:self
                                                   selector:@selector(countUp1)
                                                   userInfo:nil
                                                    repeats:YES]; 
```

# html - IE9 Quirks 模式 - Doctype 语句被注释掉

> ID：14944448
> 
> 赞同：1
> 
> 时间：2013-02-18T20:08:41.313
> 
> 标签：html, internet-explorer-9, doctype, quirks-mode

我遇到了一个问题，IE9 在我的网站上以 Quirks 模式呈现单个页面。

[http://www.bettereverafter.com/index.php?fc=module&module=blockwishlistpro&controller=view&token=E5D343F0E9D5C666](http://www.bettereverafter.com/index.php?fc=module&module=blockwishlistpro&controller=view&token=E5D343F0E9D5C666)

出于某种原因，它在我的头文件中使用 DOCTYPE 声明并注释掉。我使用的 Doctype 是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

它似乎正在引入一些额外的代码，我认为这些代码来自这里：

看起来它在这里被调用：

```
private function _displayProducts($id_wishlist)
{
    global $cookie;
    include_once(dirname(__FILE__).'/WishListpro.php');
    include_once(_PS_CLASS_DIR_.'/Message.php');
echo "  
<script type='text/javascript'> 
// <![CDATA[
ThickboxI18nImage = 'Image';
ThickboxI18nOf = '/';
ThickboxI18nClose = 'X';
ThickboxI18nOrEscKey = 'Esc';
ThickboxI18nNext = '>';
ThickboxI18nPrev = '<';
tb_pathToImage = '"._MODULE_DIR_.self::modulename."/img/loadingAnimation.gif';
//]]> 
</script>"; 
```

我的问题是，该代码实际上不在头文件中，它来自其他地方。我不知道它是如何在实际头文件之前加载的......

我已经尝试添加，但这并没有做任何事情。

其他所有页面似乎都可以正常工作，只有这一页。如果我强制它进入 IE9 标准，它看起来很好。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:14:44.253

问题是由于在您的 doctype 之前有此代码：

```
<script type='text/javascript'> 
// <![CDATA[
    ThickboxI18nImage = 'Image';
    ThickboxI18nOf = '/';
    ThickboxI18nClose = 'X';
    ThickboxI18nOrEscKey = 'Esc';
    ThickboxI18nNext = '>';
    ThickboxI18nPrev = '<';
    tb_pathToImage = '/modules/blockwishlistpro/img/loadingAnimation.gif';
//]]>
</script> 
```

在您的文档类型或 IE 以怪癖模式而不是标准模式呈现之前，您不能拥有任何东西（甚至没有评论）。

# php - 在wordpress中更改不同页面的页脚

> ID：14944451
> 
> 赞同：0
> 
> 时间：2013-02-18T20:08:46.630
> 
> 标签：php, wordpress

在我的移动网站上，我有一个带有“后退”按钮的页脚（使用 Jquery Mobile） - 我试图弄清楚如何删除主页的按钮（所以它只显示没有按钮的页脚），但是让按钮显示在子页面上。基本上，一个页脚用于主页，一个页脚用于所有子页面。但由于我只有一个 footer.php 文件，我不确定如何更改代码（甚至是放置什么）以拥有两个不同的页脚。我最初在 Jquery Mobile 表单上询问过，但他们说这是一个 PHP 问题..所以我在这里。

这是我的页脚代码：

```
</div><!-- data role content-->
     <div data-theme="b" data-role="footer">
    <h3>
        Premier IT Consulting
    </h3>
    <a data-role="button" data-direction="reverse" data-rel="back" data-icon="back"    
data-iconpos="left" class="ui-btn-left">
        Back</a>
</div>
    <?php wp_footer(); ?>
</div><!-- data role content-->
</body>
</html> 
```

在我使用的 Wordpress 模板中，index.php 和 page.php 正在调用 footer.php - 因此，它们在每个页面（主页和所有子页面）上显示相同的页脚。我不知道该怎么做。如果我从页脚中删除 HTML，它将不会显示在任何页面上。

仅供参考。我正在使用 wordpress，而不是在我的网站上托管 .js 和 .css 文件，而是在我的标题中使用它：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-
1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:25:02.217

您可以尝试测试它是否是您的按钮的主页。例如：

```
 <?php if (!is_home() ) : ?>
 <a data-role="button" data-direction="reverse" data-rel="back" data-icon="back"    
 data-iconpos="left" class="ui-btn-left">Back</a>
 <?php endif;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T16:47:55.937

使用 is_front_page() 确保您在主页上：

```
<?php if(is_front_page()): ?>
<a data-role="button" data-direction="reverse" data-rel="back" data-icon="back" data-iconpos="left" class="ui-btn-left">Back</a>
 <?php endif; ?> 
```

# php - 如何在不循环的情况下展平一个简单的数组？

> ID：14944453
> 
> 赞同：4
> 
> 时间：2013-02-18T20:09:04.910
> 
> 标签：php, arrays, loops, multidimensional-array, foreach

我想把一个简单的多维数组变成一个更简单的数组。

转这个：

```
Array
(
    [0] => Array
        (
            [id] => 123
        )
    [1] => Array
        (
            [id] => 456
        )
    ...
    [999] => Array
        (
            [id] => 789
        )
) 
```

进入这样的数组：

```
Array
(
    [0] =>  123
    [1] => 456
    ...
    [999] => 789
) 
```

我想这样做而**不用**`foreach`. 这在PHP中可能吗？

这是我已经可以用`foreach`循环解决它的方法：

```
$newArr = array();
foreach ($arr as $a) {
    $newArr[] = $a['id'];
}
$arr = $newArr; 
```

我想在不循环的情况下做到这一点。你能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:12:11.673

我很佩服你希望有一些接近函数式编程和隐式循环的东西，但是 PHP 对你来说是错误的语言。它不会以实用的风格自然地表达自己。

该`reset`函数返回数组中的第一个元素，因此您可以将该函数映射到数组上：

```
array_map('reset', $array) 
```

然而，在 PHP 中，最快的方法是一个简单的`for`循环（不是`foreach`, `for`）。这里有一堆不同的扁平化方法。只有包含`for`和`foreach`执行显式循环的函数才会被包括在内以进行比较。

```
function flatten_for($arr) {
    $c = count($arr);
    $newarr = array();
    for ($i = 0; $i < $c; $i++) {
        $newarr[] = $arr[$i][0];
    }
    return $newarr;
}

function flatten_for_inplace($arr) {
    $c = count($arr);
    for ($i = 0; $i < $c; $i++) {
        $arr[$i] = $arr[$i][0];
    }
}

function flatten_foreach($arr) {
    $newarr = array();
    foreach ($arr as $value) {
        $newarr[] = $value[0];
    }
    return $newarr;
}

function flatten_foreach_inplace($arr) {
    foreach ($arr as $k => $v) {
        $arr[$k] = $v[0];
    }
}

function flatten_foreach_inplace_ref($arr) {
    foreach ($arr as &$value) {
        $value = $value[0];
    }
}

function flatten_map($arr) {
    return array_map('reset', $arr);
}

function flatten_walk($arr) {
    array_walk($arr, function(&$v, $k){$v = $v[0];});
}

function visitor($v, $k, &$a) {
    return $a[] = $v;
}

function flatten_walk_recursive($arr) {
    $newarr = array();
    array_walk_recursive($arr, 'visitor', $newarr);
    return $newarr;
}

function reducer($result, $item) {
    return $item[0];
}

function flatten_reduce($arr) {
    return array_reduce($arr, 'reducer', array());
}

function flatten_merge($arr) {
    return call_user_func_array('array_merge_recursive', $arr);
} 
```

这是时间代码：

```
function buildarray($length) {
    return array_map(function($e){return array($e);}, range(0, $length));
}

function timeit($callable, $argfactory, $iterations) {
    $start = microtime(true);
    for ($i = 0; $i < $iterations; $i++) {
        call_user_func($callable, call_user_func($argfactory));
    }
    return microtime(true) - $start;
}

function time_callbacks($callbacks, $argfactory, $iterations) {
    $times = array();
    foreach ($callbacks as $callback) {
        $times[$callback] = timeit($callback, $argfactory, $iterations);
    }
    return $times;
}

function argfactory() {
    return buildarray(1000);
}

$flatteners = array(
    'flatten_for', 'flatten_for_inplace', 'flatten_foreach',
    'flatten_foreach_inplace', 'flatten_foreach_inplace_ref',
    'flatten_map', 'flatten_walk', 'flatten_walk_recursive',
    'flatten_reduce', 'flatten_merge',
);

$results = time_callbacks($flatteners, 'argfactory', 1000);

var_export($results); 
```

在较旧的 MacBook Pro（Core 2 Duo，2.66 GHz，8GB，PHP 5.3.15 和 Suhosin-Patch）上，我得到以下结果：

```
array (
  'flatten_for' => 12.793387174606,
  'flatten_for_inplace' => 14.093497991562,
  'flatten_foreach' => 16.71691608429,
  'flatten_foreach_inplace' => 16.964510917664,
  'flatten_foreach_inplace_ref' => 16.618073940277,
  'flatten_map' => 24.578175067902,
  'flatten_walk' => 22.884744882584,
  'flatten_walk_recursive' => 31.647840976715,
  'flatten_reduce' => 17.748590946198,
  'flatten_merge' => 20.691106081009,
) 
```

`for`和方法之间的差异`foreach`在较长的数组上更小。

令人惊讶的是（无论如何对我来说）`flatten_merge`仍然比普通`for`循环慢。我希望`array_merge_recursive`至少能快到甚至更快，因为它基本上将整个工作交给了一个 C 函数！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:10:22.343

你可以`map`：

```
$arr = array_map(function($element) {
    return $element['id'];
}, $arr); 
```

由于`array_map`可能在内部循环，您可以在不循环的情况下真正做到这一点：

```
$arr = array_reduce($arr, function($arr, $element) {
    $arr[] = $element['id'];
    return $arr;
}); 
```

**但是没有理由不循环。**没有真正的性能提升，并且代码的可读性可能会降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T13:08:10.573

目前，最简单的方法是使用 array_column() 函数

```
$newArray = array_column($array, 'id'); 
```

# c++ - Git 和 KDevelop

> ID：14944454
> 
> 赞同：5
> 
> 时间：2013-02-18T20:09:08.113
> 
> 标签：c++, git, kdevelop

我开始使用 KDevelop 和 Git 进行编程。

我正在使用 KDevelop 4.4.1 用 C++ 创建一个项目，实际上我在 Assembla 中有一个 Git 帐户。

我能够创建一个“内部 git 存储库”，使用 KDevelop 进行提交。

我正在研究如何将我的项目推送到我的帐户中，但我没有找到足够的信息。如何将我的项目推送到 Assembla 中的仓库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:17:19.637

推送通常是这样完成的：

在第一次推送之前，您应该添加一个遥控器：

```
git remote add origin pathToRepositoryInAssembla 
```

现在进行第一次推送（我假设您的默认分支是 master）

```
git push -u origin master 
```

这将推送您的更改，并且 git 不会将其分配`origin/master`给您的本地 master。在此之后通过使用

```
git push 
```

它将自动推送所有包含更改的“已分配”分支。

有关如何使用 git 的更多信息，请参阅[官方手册](http://git-scm.com/book/en/Getting-Started)。有关遥控器的更多信息，请参阅[使用遥控器](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)。

# html - 是否可以将内容溢出到类似 iframe 的页面中？

> ID：14944455
> 
> 赞同：1
> 
> 时间：2013-02-18T20:09:08.493
> 
> 标签：html, css, overflow

有没有办法使用 CSS 来溢出包含区域中的内容，但不是让它可以滚动，而是让你可以使用底部的页码按钮导航内容？

寻找类似于在 YouTube 上观看视频时的内容，您可以单击下一个箭头或箭头之间的任何特定页码来解析搜索结果。

我们不希望溢出的内容滚动；我们希望在底部有页码。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:31:39.483

是的！您可以根据需要使用`:target`选择器和位置哈希来显示（或不显示）内容：

```
#frame > div { display: none; }
#frame > div:target { display: block; } 
```

然后您可以使用简单的锚点进行导航：

```
<a href="#one">One</a>
<a href="#two">Two</a>
<a href="#three">Three</a>
<a href="#four">Four</a> 
```

您在（或您想要的任何容器）中的 div`#frame`应该具有与您要在链接中使用的哈希相对应的 ID。

这是一个 JSBin：http: [//jsbin.com/ifasok/1/edit](http://jsbin.com/ifasok/1/edit)

# c# - Datatable.WriteXml - 如何在元素名称中保留空格

> ID：14944456
> 
> 赞同：1
> 
> 时间：2013-02-18T20:09:12.490
> 
> 标签：c#, .net, xml, vb.net, xml-parsing

我在我的应用程序中添加了将 a`DataTable`转换为的功能`XML`，如下所示：

```
dtResults.WriteXml(fileName); 
```

`_x0020_`正在添加，而不是在输出的 XML 文档中添加空格。

是否可以在没有代码的情况下生成 XML 文件`_x0020_`？即可以使用该方法或类似方法生成 XML 文件，并且实际上保留了空格吗？

**这是数据网格：**

![在此处输入图像描述](../Images/7ce4e2d9ca685bbefe9d7746edb86274.png)

**这是生成的 XML：**

```
<Customers>
    <Customer_x0020_Name>Sean</Customer_x0020_Name>
  </Customers>
  <Customers>
    <Customer_x0020_Name>John</Customer_x0020_Name>
  </Customers>
  <Customers>
    <Customer_x0020_Name>Sarah</Customer_x0020_Name>
  </Customers>
  <Customers>
    <Customer_x0020_Name>Mark</Customer_x0020_Name>
  </Customers>
  <Customers>
    <Customer_x0020_Name>Norman</Customer_x0020_Name>
  </Customers> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T20:28:11.050

您的列的名称包含一个空格。XML 元素名称不能包含空格。XML 中使用空格将元素名称与属性名称分开，例如：

```
<ElementName Attribute1="value" /> 
```

该`DataTable.WriteXml`方法尝试以一致的方式写出 XML 文件，以便`DataTable`稍后可以使用另一个对象来加载 XML 并尽可能接近原始文件的精确副本。因此，它将非法字符替换为其十六进制值，以便非法字符在翻译中不会丢失。

因此，如果您想以不同的方式将其写入 XML，您需要：

*   更改中列的名称`DataTable`，使其不包含空格
*   `XDocument`使用、`XmlDocument`、`XmlWriter`或手动输出 XML`XmlSerializer`并根据需要设置输出格式
*   像现在一样输出 XML，然后在其上运行 XSLT 脚本以修复格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:26:52.793

我不认为你想要什么是可能的。我不相信 XML 元素名称可以包含空格，就像变量名称不能包含空格一样。它需要一个空间的原因是什么？

如果确实需要一个空格（我认为这会使 xml 无法用于解析），您可以简单地在文件中进行查找和替换。

如果您将其存储以重新读入并在 DataTable 中再次显示，我将在读回数据后重命名列，替换`_x0020_`为空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T15:53:36.890

我也面临同样的问题。我正在从包含带空格的列的 excel 文件中导出数据。所以我的专栏也包含空间。所以我尝试了以下方式。

```
StringWriter strXML = new StringWriter();
dtPartOriginalData.WriteXml(strXML, XmlWriteMode.IgnoreSchema, false);
strMessages = strXML.ToString().Replace("_x0020_", ""); 
```

这将替换`_x0020_`并生成 xml。但是您不能使用此 xml 构造相同的数据表。它是一种解决方法，我想将其添加为建议。谢谢你。

# java - 在 O(n) 时间内找到数组中的重复元素

> ID：14944458
> 
> 赞同：64
> 
> 时间：2013-02-18T20:09:18.177
> 
> 标签：java, arrays, algorithm

我在工作面试中被问到这个问题，我一直想知道正确的答案。

> 您有一个从 0 到 n-1 的数字数组，其中一个数字被删除，并替换为数组中已有的数字，该数字与该数字重复。我们如何在*O(n)*时间内检测到这个重复？

例如，一个数组`4,1,2,3`将变为`4,1,2,2`.

时间*O(n ² )*的简单解决方案是使用嵌套循环来查找每个元素的重复项。

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-02-18T22:50:06.473

这可以在`O(n)`时间和`O(1)`空间上完成。

（该算法之所以有效，是因为这些数字是已知范围内的连续整数）：

在一次通过向量的过程中，计算所有数字的总和，以及所有数字的平方和。

减去所有数字的总和`N(N-1)/2`。打电话给这个`A`。

从 中减去平方和`N(N-1)(2N-1)/6`。将此除以`A`。调用结果`B`。

被删除`(B + A)/2`的数字是 和它被替换的数字是`(B - A)/2`。

## 例子：

向量是`[0, 1, 1, 2, 3, 5]`：

*   N = 6

*   向量之和为 0 + 1 + 1 + 2 + 3 + 5 = 12。N(N-1)/2 为 15。A = 3。

*   平方和为 0 + 1 + 1 + 4 + 9 + 25 = 40。N(N-1)(2N-1)/6 为 55。B = (55 - 40)/A = 5。

*   删除的数字是 (5 + 3) / 2 = 4。

*   它被替换的数字是 (5 - 3) / 2 = 1。

## 为什么有效：

*   原始向量之和`[0, ..., N-1]`为`N(N-1)/2`。假设该值`a`已被删除并替换为`b`. 现在修改向量的总和将是`N(N-1)/2 + b - a`。如果我们从中减去修改后的向量之和，则`N(N-1)/2`得到`a - b`。所以`A = a - b`。

*   类似地，原始向量的平方和为`N(N-1)(2N-1)/6`。修正向量的平方和为。从原始和中减去修改向量的平方和得到，与 相同。因此，如果我们将它除以(ie, )，我们得到。`N(N-1)(2N-1)/6 + b² - a²``a² - b²``(a+b)(a-b)``a - b``A``B = a + b`

*   现在`B + A = a + b + a - b = 2a`和`B - A = a + b - (a - b) = 2b`。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-18T20:26:21.703

我们有原始数组`int A[N];`创建第二个数组`bool B[N]`，类型为`bool=false`。迭代第一个数组并设置`B[A[i]]=true`if 为 false，否则 bing！

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-05-30T13:20:06.843

您可以在 O(N) 时间内完成，无需任何额外空间。这是算法的工作原理：

以下列方式遍历数组：

1.  对于遇到的每个元素，将其对应的索引值设置为负数。例如：如果你发现 a[0] = 2。得到 a[2] 并否定该值。

    通过这样做，您可以将其标记为遇到。既然你知道你不能有负数，你也知道你是否定它的人。

2.  检查与该值对应的索引是否已标记为负，如果是，则您得到重复的元素。例如：如果 a[0]=2 ，转到 a[2] 并检查它是否为负数。

假设您有以下数组：

```
int a[]  = {2,1,2,3,4}; 
```

在第一个元素之后，您的数组将是：

```
int a[] = {2,1,-2,3,4}; 
```

在第二个元素之后，您的数组将是：

```
int a[] = {2,-1,-2,3,4}; 
```

当您到达第三个元素时，您会转到 a[2] 并看到它已经为负数。你得到副本。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-18T20:42:31.703

扫描阵列 3 次：

1.  **将所有数组元素 XOR 在一起**-> `A`。将 0 到 N-1 -> 的所有数字异或`B`。现在`A XOR B = X XOR D`，其中 X 是删除的元素，D 是重复的元素。
2.  选择 中的任何非零位`A XOR B`。**将设置此位的所有数组元素 XOR 在一起**-> `A1`。将所有从 0 到 N-1 的数字 XOR 在一起，其中设置了该位 -> `B1`。现在要么`A1 XOR B1 = X`要么`A1 XOR B1 = D`。
3.  再次扫描阵列并**尝试找到** `A1 XOR B1`. 如果找到，这是重复元素。如果不是，则重复元素是`A XOR B XOR A1 XOR B1`.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-18T20:12:33.683

使用 a`HashSet`保存所有已经看到的数字。它在（摊销）`O(1)`时间内运行，因此总数为`O(N)`。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-02-18T20:23:32.513

我建议使用 BitSet。我们知道 N 对于数组索引来说足够小，所以 BitSet 的大小是合理的。

对于数组的每个元素，检查与其值对应的位。如果已经设置，那就是副本。如果没有，请设置该位。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-22T02:52:34.073

@rici 关于时间和空间的使用是正确的：“这可以在 O(n) 时间和 O(1) 空间内完成。”

但是，这个问题可以扩展到更广泛的要求：重复的数字不一定只有一个，而且数字可能不是连续的。

OJ[在这里](https://leetcode.com/problems/find-the-duplicate-number/)这样说：（注3显然可以缩小）

> 给定一个包含 n + 1 个整数的数组 nums，其中每个整数介于 1 和 n（含）之间，证明至少存在一个重复数。假设只有一个重复的号码，找到重复的号码。
> 
> 笔记：
> 
> *   您不得修改数组（假设数组是只读的）。
> *   您必须只使用常量，O(1) 额外空间。
> *   您的运行时复杂度应小于 O(n2)。
> *   数组中只有一个重复的数字，但可以重复多次。

[Keith Schwarz在这里](http://keithschwarz.com/interesting/code/?dir=find-duplicate)使用[Floyd 的循环查找](https://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare)算法*很好*地解释和回答了这个问题：

> 我们需要用来解决这个问题的主要技巧是注意，因为我们有一个包含从 0 到 n - 2 的 n 个元素的数组，我们可以将数组视为从集合 {0, 1, ..., n - 1} 到自身上。该函数由 f(i) = A[i] 定义。鉴于此设置，重复值对应于一对索引 i != j 使得 f(i) = f(j)。因此，我们的挑战是找到这对 (i, j)。一旦我们有了它，我们只需选择 f(i) = A[i] 即可轻松找到重复值。
> 
> 但是我们如何找到这个重复值呢？事实证明，这是计算机科学中一个经过充分研究的问题，称为循环检测。问题的一般形式如下。我们得到一个函数 f。将序列 x_i 定义为

```
 x_0     = k       (for some k)
    x_1     = f(x_0)
    x_2     = f(f(x_0))
    ...
    x_{n+1} = f(x_n) 
```

> 假设 f 从域映射到自身，则此函数将具有三种形式之一。首先，如果域是无限的，那么序列可以是无限长且不重复的。例如，整数上的函数 f(n) = n + 1 具有此属性 - 没有数字是重复的。其次，该序列可能是一个闭环，这意味着存在一些 i 使得 x_0 = x_i。在这种情况下，序列会无限期地循环通过一些固定的值集。最后，序列可以是“rho 形”。在这种情况下，序列看起来像这样：

```
 x_0 -> x_1 -> ... x_k -> x_{k+1} ... -> x_{k+j}
                    ^                       |
                    |                       |
                    +-----------------------+ 
```

> 也就是说，序列从进入循环的元素链开始，然后无限循环。我们将在序列中到达的循环的第一个元素表示为循环的“入口”。

也可以在[这里](http://bookshadow.com/weblog/2015/09/28/leetcode-find-duplicate-number/)找到一个 python 实现：

```
def findDuplicate(self, nums):
    # The "tortoise and hare" step.  We start at the end of the array and try
    # to find an intersection point in the cycle.
    slow = 0
    fast = 0

    # Keep advancing 'slow' by one step and 'fast' by two steps until they
    # meet inside the loop.
    while True:
        slow = nums[slow]
        fast = nums[nums[fast]]

        if slow == fast:
            break

    # Start up another pointer from the end of the array and march it forward
    # until it hits the pointer inside the array.
    finder = 0
    while True:
        slow   = nums[slow]
        finder = nums[finder]

        # If the two hit, the intersection index is the duplicate element.
        if slow == finder:
            return slow 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-18T20:12:05.297

使用哈希表。在哈希表中包含一个元素是 O(1)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-18T20:26:58.140

一种可行的解决方案：

假设数字是整数

创建一个 [0 .. N] 的数组

```
int[] counter = new int[N]; 
```

然后迭代读取并增加计数器：

```
 if (counter[val] >0) {
   // duplicate
 } else {
   counter[val]++;
 } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-06-02T09:02:32.613

这可以在**O(n)**时间和**O(1)**空间内完成。 **不修改输入数组**

1.  这个想法类似于在链表中找到循环的起始节点。
2.  保持两个指针：快和慢

```
slow = a[0]
fast = a[a[0]] 
```

3.  循环直到慢！=快
4.  一旦我们找到循环（慢==快）
5.  将慢速重置为零

```
slow = 0 
```

6.  找到起始节点

```
while(slow != fast){
    slow = a[slow];
    fast = a[fast];
} 
```

7.  慢是你的重复号码。

这是一个Java实现：

```
class Solution {
    public int findDuplicate(int[] nums) {
        if(nums.length <= 1) return -1;
        int slow = nums[0], fast = nums[nums[0]]; //slow = head.next, fast = head.next.next
        while(slow != fast){            //check for loop
            slow = nums[slow];
            fast = nums[nums[fast]];
        }
        if(slow != fast) return -1;
        slow = 0; //reset one pointer
        while(slow != fast){ //find starting point of loop
            slow = nums[slow];
            fast = nums[fast];
        }
        return slow;
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-11T20:55:01.620

这是`O(n)`时间和`O(1)`空间上的另一种解决方案。它类似于[rici 的](https://stackoverflow.com/a/14946745/913286). 我发现它更容易理解，但在实践中，它会溢出得更快。

让`X`成为缺失的数字并`R`成为重复的数字。

1.  我们可以假设数字来自`[1..n]`，即不出现零。实际上，在遍历数组时，我们可以测试是否找到零，如果没有则立即返回。

2.  现在考虑：

    ```
    sum(A) = n (n + 1) / 2 - X + R

    product(A) = n! R / X 
    ```

其中`product(A)`是`A`跳过零的所有元素的乘积。我们有两个具有两个未知数的方程，从中可以代数推导出`X`和。`R`

**编辑**：根据大众的需求，这里有一个成功的例子：

让我们设置：

```
S = sum(A) - n (n + 1) / 2
P = n! / product(A) 
```

那么我们的方程就变成了：

```
R - X = S
X = R P 
```

可以解决：

```
R = S / (1 - P)
X = P R = P S / (1 - P) 
```

例子：

```
A = [0 1 2 2 4]

n = A.length - 1 = 4
S = (1 + 2 + 2 + 4) - 4 * 5 / 2 = -1
P = 4! / (1 * 2 * 2 * 4) = 3 / 2

R = -1 / (1 - 3/2) = -1 / -1/2 = 2
X = 3/2 * 2 = 3 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-18T21:33:55.753

您可以进行如下操作：

1.  使用线性时间排序算法（例如计数排序）对数组进行排序 - O(N)
2.  扫描已排序的数组并在两个连续元素相等时立即停止 - O(N)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-04-21T00:10:32.423

```
public class FindDuplicate {
    public static void main(String[] args) {
        // assume the array is sorted, otherwise first we have to sort it.
        // time efficiency is o(n)
        int elementData[] = new int[] { 1, 2, 3, 3, 4, 5, 6, 8, 8 };
        int count = 1;
        int element1;
        int element2;

        for (int i = 0; i < elementData.length - 1; i++) {
            element1 = elementData[i];
            element2 = elementData[count];
            count++;
            if (element1 == element2) {
                System.out.println(element2);
            }
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-17T08:57:52.190

```
 public void duplicateNumberInArray {
    int a[] = new int[10];
    Scanner inp = new Scanner(System.in);
    for(int i=1;i<=5;i++){  
        System.out.println("enter no. ");
        a[i] = inp.nextInt();
    }
    Set<Integer> st = new HashSet<Integer>();
    Set<Integer> s = new HashSet<Integer>();
    for(int i=1;i<=5;i++){          
        if(!st.add(a[i])){
            s.add(a[i]);
        }
    }

    Iterator<Integer> itr = s.iterator();
                System.out.println("Duplicate numbers are");
    while(itr.hasNext()){
        System.out.println(itr.next());
    }
} 
```

首先使用 Scanner 类创建一个整数数组。然后遍历数字循环并检查是否可以将数字添加到集合中（仅当该特定数字不应该在集合中时才可以将数字添加到集合中，这意味着集合不允许重复的数字添加并返回布尔值vale FALSE 添加重复值）。如果没有。不能添加意味着它是重复的，所以将该重复的数字添加到另一个集合中，以便我们稍后打印。请注意我们正在将重复数字添加到集合中，因为重复数字可能会重复多次，因此只添加一次。最后我们使用迭代器打印集合。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-10T23:38:06.597

//这类似于HashSet方法，但只使用一种数据结构：

```
 int[] a = { 1, 4, 6, 7, 4, 6, 5, 22, 33, 44, 11, 5 };

    LinkedHashMap<Integer, Integer> map = new LinkedHashMap<Integer, Integer>();

    for (int i : a) {
        map.put(i, map.containsKey(i) ? (map.get(i)) + 1 : 1);
    }

    Set<Entry<Integer, Integer>> es = map.entrySet();
    Iterator<Entry<Integer, Integer>> it = es.iterator();

    while (it.hasNext()) {
        Entry<Integer, Integer> e = it.next();
        if (e.getValue() > 1) {
            System.out.println("Dupe " + e.getKey());
        }
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-04-23T09:51:17.283

我们可以有效地使用 hashMap：

```
Integer[] a = {1,2,3,4,0,1,5,2,1,1,1,};
HashMap<Integer,Integer> map = new HashMap<Integer,Integer>();
for(int x : a)
{
    if (map.containsKey(x))  map.put(x,map.get(x)+1);
    else map.put(x,1);
}

Integer [] keys = map.keySet().toArray(new Integer[map.size()]);
for(int x : keys)
{
    if(map.get(x)!=1)
    {
        System.out.println(x+" repeats : "+map.get(x));
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-07T13:17:17.193

这个程序是基于c#的，如果你想用另一种编程语言来做这个程序，你必须首先按升序更改数组并将第一个元素与第二个元素进行比较。如果相等，则找到重复的数字。程序是

```
int[] array=new int[]{1,2,3,4,5,6,7,8,9,4};
Array.Sort(array);
for(int a=0;a<array.Length-1;a++)
{
  if(array[a]==array[a+1]
  {
     Console.WriteLine("This {0} element is repeated",array[a]);
   }
}
Console.WriteLine("Not repeated number in array"); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-09-14T02:58:26.353

1.  对数组进行排序 O(n ln n)
2.  使用滑动窗口技巧遍历数组 O(n)

    空间是 O(1)

    ```
    Arrays.sort(input);
    for(int i = 0, j = 1; j < input.length ; j++, i++){
        if( input[i] == input[j]){
            System.out.println(input[i]);
            while(j < input.length && input[i] == input[j]) j++;
            i = j - 1;
        }
    } 
    ```

测试用例 int[] { 1, 2, 3, 7, 7, 8, 3, 5, 7, 1, 2, 7 }

输出 1、2、3、7

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-01-16T11:09:43.087

遍历数组并检查 的符号`array[abs(array[i])]`，如果为正则为负，如果为负则打印，如下：

```
import static java.lang.Math.abs;

public class FindRepeatedNumber {

    private static void findRepeatedNumber(int arr[]) {
        int i;
        for (i = 0; i < arr.length; i++) {
            if (arr[abs(arr[i])] > 0)
                arr[abs(arr[i])] = -arr[abs(arr[i])];
            else {
                System.out.print(abs(arr[i]) + ",");
            }
        }
    }

    public static void main(String[] args) {
        int arr[] = { 4, 2, 4, 5, 2, 3, 1 };
        findRepeatedNumber(arr);
    }
} 
```

**参考：** [http ://www.geeksforgeeks.org/find-duplicates-in-on-time-and-constant-extra-space/](http://www.geeksforgeeks.org/find-duplicates-in-on-time-and-constant-extra-space/)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-06-23T17:08:09.080

如前所述，

> 您有一个从 0 到 n-1 的数字数组，其中一个数字被删除，并替换为数组中已有的数字，该数字与该数字重复。

我假设数组中的元素除重复条目外已排序。如果是这种情况，我们可以轻松实现以下目标：

```
 public static void main(String[] args) {
    //int arr[] = { 0, 1, 2, 2, 3 };
    int arr[] = { 1, 2, 3, 4, 3, 6 };
    int len = arr.length;
    int iMax = arr[0];
    for (int i = 1; i < len; i++) {
        iMax = Math.max(iMax, arr[i]);
        if (arr[i] < iMax) {
            System.out.println(arr[i]);
            break;
        }else if(arr[i+1] <= iMax) {
            System.out.println(arr[i+1]);
            break;
        }
    }
} 
```

*   O(n) 时间和 O(1) 空间；请分享您的想法。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-07-25T08:32:52.367

这是在 O(n) 时间内使用 hashmap 的简单解决方案。

```
#include<iostream>
#include<map>
using namespace std;

int main()
{
    int a[]={1,3,2,7,5,1,8,3,6,10};
    map<int,int> mp;
    for(int i=0;i<10;i++){

        if(mp.find(a[i]) == mp.end())
            mp.insert({a[i],1});
        else
            mp[a[i]]++;
    }

    for(auto i=mp.begin();i!=mp.end();++i){
        if(i->second > 1)
            cout<<i->first<<" ";
    }

} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-02-11T09:54:11.903

```
int[] a = {5, 6, 8, 9, 3, 4, 2, 9 };
int[] b = {5, 6, 8, 9, 3, 6, 1, 9 };

 for (int i = 0; i < a.Length; i++)
  {
     if (a[i] != b[i])
      {
       Console.Write("Original Array manipulated at position {0}  + "\t\n"  
                             + "and the element is {1} replaced by {2} ", i, 
                             a[i],b[i] + "\t\n" );
       break;               
      }      
  }
   Console.Read();

   ///use break if want to check only one manipulation in original array.
   ///If want to check more then one manipulation in original array, remove break 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-02-29T23:52:20.853

这个视频[如果编程是一部动漫](https://youtu.be/pKO9UjSeLew)太有趣了，不能分享。这是同样的问题，视频有答案：

1.  排序
2.  创建哈希图/字典。
3.  创建一个数组。（虽然这部分被跳过了。）
4.  使用龟兔算法。

注意：这个问题更像是一个琐事问题，而不是现实世界。哈希图之外的任何解决方案都是过早的优化，除非在罕见的有限内存情况下，如嵌入式编程。

此外，您最后一次在现实世界中看到一个数组，其中数组中的所有变量都适合数组的大小是什么时候？例如，如果数组中的数据是字节（0-255），那么您是否有一个包含 256 个元素或更大元素且其中没有 null 或 inf 的数组，并且您需要找到一个重复的数字？这种情况非常罕见，你可能在整个职业生涯中都不会使用这个技巧。

因为这是一个琐事问题，而不是现实世界的问题，所以我会谨慎接受一家提出此类琐事问题的公司的报价，因为人们会通过纯粹的运气而不是技巧来通过面试。这意味着那里的开发人员不能保证熟练，除非你可以教你的老年人技能，否则你可能会度过一段糟糕的时光。

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2013-05-20T18:58:43.153

```
int a[] = {2,1,2,3,4};

int b[] = {0};

for(int i = 0; i < a.size; i++)
{

    if(a[i] == a[i+1])
    {
         //duplicate found
         //copy it to second array
        b[i] = a[i];
    }
} 
```

# android - 睡觉前更新TextView

> ID：14944459
> 
> 赞同：3
> 
> 时间：2013-02-18T20:09:21.653
> 
> 标签：android, multithreading, textview, sleep

我想做`setText()`一个`TextView`并让活动在之后睡觉。

这是代码：

```
tv.setText("myText");
tv.invalidate(); // Doesn't work
pause(1000); // French for sleep 
```

我的功能暂停：

```
public void pause(int seconds)
{
    synchronized(this)
    {
        try { 
            this.wait(seconds); 
        } catch (InterruptedException ie) { 
            ie.printStackTrace();
        }
    }
} 
```

问题是 TextView 在睡觉前没有更新。我试图调用`invalidate()`我的 TextView 但它不起作用。

我有另一个可能的解决方案：创建一个新的线程来休眠活动，如果我的 TextView 的值仍然相同，则重新加载线程，否则调用我的函数`pause()`。但是有可能在 View 中获得我的 TextView 的真正价值吗？因为我可以在这样做时获得新文本：

```
tv.setText("myText");
System.out.println(tv.getText());
pause(1000); // French for sleep 
```

而文本不会在视图中更新。

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:22:03.080

我会建议 Jave 所说的。

```
tv.setText("myText");
Handler handler = new Handler();
handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                //Do something
            }
        }, 3000); //3000 is time in ms. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:54:04.623

如果您使用 UI 线程并使其睡眠时间过长，您将获得应用程序无响应对话框。当然，只有当函数结束时，你才会看到新的值，所以这不是一个好的解决方案。如果您只想使用 UI 线程，则可以使用处理程序。

如果您使用不同的线程，则需要使用 UI 线程以某种方式设置 TextView 的文本，因为它是唯一允许这样做的线程（为此使用处理程序）。

# c# - 根据其类型铸造对象

> ID：14944463
> 
> 赞同：1
> 
> 时间：2013-02-18T20:09:25.617
> 
> 标签：c#, asp.net-mvc, model, casting

我为未从模型中的规则验证的业务规则创建了一个验证方法，但我在使其工作时遇到了问题。由于存在两种可能的场景（客户或卖家注册），因此需要在各自的视图和模型中分别对待。卖家注册继承了客户注册的基本信息，因此客户中的所有字段也在卖家中。但是由于我正在使用 2 个不同的模型，即使它们都具有我正在进行验证的相同字段，我需要`Object`使用相同的验证方法。但不幸的是，我在这样做时遇到了麻烦。

```
[CustomHandleError]
private bool ValidateRegistrationForm (Object registerViewModelObject) {
    if (registerViewModelObject is RegisterViewModel)
    {
        RegisterViewModel registerViewModel = 
            (RegisterViewModel)registerViewModelObject;
    }
    else
    {
        RegisterSellerViewModel registerViewModel = 
            (RegisterSellerViewModel)registerViewModelObject;
    }

    if (ModelState.IsValid)
    {
        string [] names = registerViewModel.Name.Split (
            new string [] {" "}, StringSplitOptions.RemoveEmptyEntries);
        if (names.Length == 1)
            ModelState.AddModelError ("Name", "Fill your full name");

        if (CustomerUtilities.IsCpf (registerViewModel.Identity) == false)
            ModelState.AddModelError ("Identity", "Invalid CPF value");

        if (this.AuthenticatorService.IsExistentUser (registerViewModel.Email))
            ModelState.AddModelError ("Email", "Email already registered");
    }
} 
```

如您所见，在`if (ModelState.IsValid)`IntelliSense 在当前上下文中找不到 registerViewModel 之后。我想知道为什么会发生这种情况，因为该变量是在上面的 if 和 else 中定义的，所以如果没有定义它就无法访问该代码。

是否有任何解决方法（除了创建新方法或传递 2 个变量）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:12:03.630

`RegisterViewModel`在 if 块范围之外声明，并在 if 块中分配它。

```
RegisterViewModel registerViewModel;
if (registerViewModelObject is RegisterViewMOdel)
{
     registerViewModel = // ...
}
else
{
     registerViewModel = // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:13:25.597

`RegisterViewModel`您应该从您的声明中定义外部`if`。`if`并在您的陈述中进行分配。

像;

```
RegisterViewModel registerViewModel;
if(...)
{
  //make your assigment here.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:23:14.620

如果您希望有两个单独的变量，则在 if 语句之外声明两者并在之后测试 null。

```
RegisterViewModel registerViewModel;
RegisterSellerViewModel sellerModel; 

if (registerViewModelObject is RegisterViewModel)
{
    registerViewModel = (RegisterViewModel)registerViewModelObject;
}
else
{
    sellerViewModel = (RegisterSellerViewModel)registerViewModelObject;
} 
```

但是，定义要使用的接口而不是 Object 将是更好的选择。

```
public interface IRegisterViewModel
{
    public string Name { get; set;}
    public ... Identity {get; set;}
    ...
}

public class RegisterViewModel : IRegisterViewModel
{
    ...
}

public class RegisterSellerViewModel : IRegisterViewModel
{
    ...
} 
```

然后使用 ValidateRegistrationForm(IRegisterViewModel registerViewModel) 你可以完全摆脱 if 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:18:24.097

您可能需要提取接口中通用的方法`RegisterViewModel`并`RegisterSellerViewModel`在两个类中实现它。然后`registerViewModelObject`不管它的实际类型如何转换到这个接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T20:25:08.957

出现问题是因为您没有在函数的主范围中定义单个变量。在您编写代码的方式中，您定义了两个位于不同范围内的变量。

我将如何解决这个问题：

我会做一个基类。

```
class RegisterModel
{
   public string Name;
   public IdentifyType Identify;
   public string Email;
} 
```

然后你的两个类都可以从基类继承。像这样：

```
class RegisterViewModel
   : RegisterModel
{...}
class RegisterSellerViewModel
   : RegisterModel
{...} 
```

现在，您实际上可以一次在函数中隐藏 Object 变量。像这样：

```
private bool Validate(Object viewModel)
{
   var castViewModel = (RegisterModel)viewModel;
   if(ModelState.IsValid)
   {
      ...
   }
} 
```

请注意，如果 viewModel 不是 RegisterModel 类型，这将导致运行时错误。

# c# - SQL Server 存储过程结果返回

> ID：14944466
> 
> 赞同：4
> 
> 时间：2013-02-18T20:09:30.270
> 
> 标签：c#, .net, sql, sql-server, stored-procedures

我在 SQL Server 中有一个存储过程：

```
CREATE PROCEDURE [dbo].[GET_AVAILABLE_PLACES] 
-- Add the parameters for the stored procedure here
@eventGuid uniqueidentifier,
@placeGuid uniqueidentifier,     
@dateGuid dateTime 
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
-- Insert statements for procedure here
DECLARE @ReservedPlaces int;
DECLARE @TotalPlaces int;    
SELECT @ReservedPlaces = RESERVED_PLACES FROM dbo.EVENT_DATE_PLACE
WHERE EVENT_GUID = @eventGuid 
and DATE_BEGIN = @dateGuid
and PLACE_GUID = @placeGuid    
SELECT @TotalPlaces = NUMBER_PLACES FROM dbo.PLACES
WHERE GUID = @placeGuid    
RETURN @TotalPlaces - @ReservedPlaces;     
END 
```

但我似乎无法读取返回的结果

```
private int SelectByStoredProcedureGetAvailablePlaces(string entryParam1, string entryParam2, DateTime entryParam3)
{
        int results;
        //PlanningElement plan = GetPlanningElement(entryParam1, entryParam2, entryParam3.ToString(), "31/12/2012 00:00:00", "150");

        using (SqlConnection sqlConnection = new SqlConnection(_connectionString))
        {
            SqlCommand sqlCommand = new SqlCommand();
            sqlCommand.Connection = sqlConnection;

            sqlCommand.CommandText = "GET_AVAILABLE_PLACES";
            sqlCommand.CommandType = CommandType.StoredProcedure;
            sqlCommand.Parameters.AddWithValue("eventGuid", entryParam1);
            sqlCommand.Parameters.AddWithValue("placeGuid", entryParam2);                
            sqlCommand.Parameters.AddWithValue("dateGuid", entryParam3);

            sqlConnection.Open();

            SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();
            results = sqlDataReader.GetInt32(0);

            sqlConnection.Close();
        }

        return results;
    } 
```

问题是什么 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:19:29.853

该`GetInt32`方法将从选定的表输出中读取。您想要一个返回值，因此您可以将代码更改为

```
SqlParameter returnValueParam = sqlcomm.Parameters.Add("@ReturnValue", SqlDbType.Int);
returnValueParam.Direction = ParameterDirection.ReturnValue;
sqlCommand.Parameters.Add(returnValueParam);
...
sqlCommand.ExecuteNonQuery();
result = returnValueParam.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:13:48.823

您可以更改存储过程，替换

```
RETURN @TotalPlaces - @ReservedPlaces; 
```

经过：

```
SELECT (@TotalPlaces - @ReservedPlaces) AS [AvailablePlaces]
RETURN; 
```

您还可以从存储过程中获取返回值，但这需要进行更多修改。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/706361/getting-return-value-from-stored-procedure-in-c-sharp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:13:16.007

必须使用 SqlCommand.Parameters 集合中的附加参数读取特定类型的返回值，方向为 System.Data.ParameterDirection.ReturnValue

要在尝试时阅读它，您的 SQL 过程需要执行以下操作：

```
SELECT @TotalPlaces - @ReservedPlaces As MyResult 
```

然后结果将作为结果集而不是返回值返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T15:21:21.090

在你的小程序中试试这个。

```
CREATE PROCEDURE [dbo].[GET_AVAILABLE_PLACES] 
-- Add the parameters for the stored procedure here
@eventGuid uniqueidentifier,
@placeGuid uniqueidentifier,     
@dateGuid dateTime,

@ReservedPlaces int output,
@TotalPlaces int output   

AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
-- Insert statements for procedure here

SELECT @ReservedPlaces = RESERVED_PLACES FROM dbo.EVENT_DATE_PLACE
WHERE EVENT_GUID = @eventGuid 
and DATE_BEGIN = @dateGuid
and PLACE_GUID = @placeGuid    
SELECT @TotalPlaces = NUMBER_PLACES FROM dbo.PLACES
WHERE GUID = @placeGuid    
SELECT @TotalPlaces - @ReservedPlaces As ReturnValue;   
END 
```

这在你的程序中

```
private int SelectByStoredProcedureGetAvailablePlaces(string entryParam1, string   entryParam2, DateTime entryParam3)
{
        int results;
        //PlanningElement plan = GetPlanningElement(entryParam1, entryParam2, entryParam3.ToString(), "31/12/2012 00:00:00", "150");

        using (SqlConnection sqlConnection = new SqlConnection(_connectionString))
        {
            SqlCommand sqlCommand = new SqlCommand();
            sqlCommand.Connection = sqlConnection;

            sqlCommand.CommandText = "GET_AVAILABLE_PLACES";
            sqlCommand.CommandType = CommandType.StoredProcedure;
            sqlCommand.Parameters.AddWithValue("eventGuid", entryParam1);
            sqlCommand.Parameters.AddWithValue("placeGuid", entryParam2);                
            sqlCommand.Parameters.AddWithValue("dateGuid", entryParam3);

            SqlParameter returnValueParam = sqlCommand.Parameters.Add("@ReturnValue", SqlDbType.Int);
            returnValueParam.Direction = ParameterDirection.Output;

            sqlConnection.Open();

            sqlCommand.ExecuteNonQuery();
            result = returnValueParam.Value;

            sqlConnection.Close();
        }

        return results; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T11:59:53.963

所以我的存储过程一定是这样的？

```
 CREATE PROCEDURE [dbo].[GET_AVAILABLE_PLACES] 
-- Add the parameters for the stored procedure here
@eventGuid uniqueidentifier,
@placeGuid uniqueidentifier,     
@dateGuid dateTime 
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
-- Insert statements for procedure here
DECLARE @ReservedPlaces int;
DECLARE @TotalPlaces int;    
SELECT @ReservedPlaces = RESERVED_PLACES FROM dbo.EVENT_DATE_PLACE
WHERE EVENT_GUID = @eventGuid 
and DATE_BEGIN = @dateGuid
and PLACE_GUID = @placeGuid    
SELECT @TotalPlaces = NUMBER_PLACES FROM dbo.PLACES
WHERE GUID = @placeGuid    
SELECT @TotalPlaces - @ReservedPlaces As ReturnValue;   
END 
```

我的功能是这样的？

```
private int SelectByStoredProcedureGetAvailablePlaces(string entryParam1, string entryParam2, DateTime entryParam3)
{
        int results;
        //PlanningElement plan = GetPlanningElement(entryParam1, entryParam2, entryParam3.ToString(), "31/12/2012 00:00:00", "150");

        using (SqlConnection sqlConnection = new SqlConnection(_connectionString))
        {
            SqlCommand sqlCommand = new SqlCommand();
            sqlCommand.Connection = sqlConnection;

            sqlCommand.CommandText = "GET_AVAILABLE_PLACES";
            sqlCommand.CommandType = CommandType.StoredProcedure;
            sqlCommand.Parameters.AddWithValue("eventGuid", entryParam1);
            sqlCommand.Parameters.AddWithValue("placeGuid", entryParam2);                
            sqlCommand.Parameters.AddWithValue("dateGuid", entryParam3);

            SqlParameter returnValueParam = sqlCommand.Parameters.Add("@ReturnValue", SqlDbType.Int);
            returnValueParam.Direction = ParameterDirection.ReturnValue;
            sqlCommand.Parameters.Add(returnValueParam);

            sqlConnection.Open();

            sqlCommand.ExecuteNonQuery();
            result = returnValueParam.Value;

            sqlConnection.Close();
        }

        return results;
    } 
```

# javascript - 如何防止重复发送ajax jQuery？

> ID：14944469
> 
> 赞同：0
> 
> 时间：2013-02-18T20:10:02.320
> 
> 标签：javascript, jquery, ajax

我有一个按钮

```
<span class="btn btn-primary" id="open-label"><i class="icon-plus icon-white"></i> Add label</span> 
```

打开模态窗口（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)）

```
<div id="ajax-labels"></div>

<div id="labels-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
         <h3 id="header">Add label</h3>
    </div>
    <div class="modal-body">
        <div class="control-group">
            <label class="control-label" for="name">Name</label>
            <div class="controls">
                <input type="text" id="name">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="color">Color</label>
            <div class="controls">
                <input type="text" id="color" name="color" value="#a5f3d4" size="6" class="iColorPicker" />
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="submit" class="btn btn-primary" id="submit-label"><i class="icon-ok icon-white"></i> Add label</button>
    </div>
</div>

<script>

function append_labels() {
    $("#ajax-labels").empty();
    $.ajax({
        url: "/ajax",
        type: "POST",
        cache: false,
        data: {
            type: "get_labels"
        },
        success: function (html) {
            labels = $.parseJSON(html);
            $.each(labels, function () {
                $("#ajax-labels").append('<span class="label" id="' + this.id + '" style="background-color: ' + this.color + '">' + this.name + '<i id="edit-label" class="icon-pencil icon-white"></i></span>   ');
            });
        }
    });
}

$('span#open-label').click(function () {
    $('#labels-modal').modal('show');
    $('#labels-modal #submit-label').click(function () {
        $('#labels-modal #submit-label').prop('disabled', true);

        var name = $('#labels-modal #name').val().trim();
        var color = $('#labels-modal #color').val().trim();

        if (name != '' || color != '') {
            $.ajax({
                url: "/ajax",
                type: "POST",
                cache: false,
                data: {
                    type: "add_label",
                    name: name,
                    color: color
                },
                success: function () {
                    $('#labels-modal').modal('hide');
                    append_labels();
                }
            });
        } else {
            return false;
        }
    });
});

</script> 
```

填写标签后，用户单击“添加标签”并 jquery 发送请求，发送后，脚本关闭模式并刷新（在 ajax 上）标签列表。问题 - 如果用户快速点击“添加标签”，脚本会重复发送表单，我会在数据库中加倍响应。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:26:26.353

尝试使用[一个](http://api.jquery.com/one/)

```
$('span#open-label').one('click', function () { //... 
```

这将保证您的 modal/ajax 函数只会执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:13:10.760

在第一次单击时禁用表单和按钮，以便 UI 不允许额外单击。您可以手动执行此操作，或使用[jQuery Block UI 插件](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://www.malsup.com/jquery/block/&ei=M4siUbTPJ-XU0gHb6IGABQ&usg=AFQjCNHR_3c-hRqH6iggzD-F2qNVEeqHpA&bvm=bv.42553238,d.dmQ)。

这是关于如何执行此操作的另一篇文章：[jquery disable submit button on form submit](https://stackoverflow.com/questions/5445431/jquery-disable-submit-button-on-form-submission)

**编辑：**

您正在单击处理程序内定义事件处理程序。因此，jQuery 所做的是在每次触发包含单击时分配该事件处理程序。因此，根据执行顶级点击的次数，您的 AJAX 调用将触发多少次。即使您的按钮只有 1 次点击，之前的点击也是罪魁祸首。将该单击处理程序定义提取到另一个之外，您应该一切顺利。

```
$('span#open-label').click(function () {
    $('#labels-modal').modal('show');
});

$('#labels-modal #submit-label').click(function () {
    $('#labels-modal #submit-label').prop('disabled', true);

    var name = $('#labels-modal #name').val().trim();
    var color = $('#labels-modal #color').val().trim();

    if (name != '' || color != '') {
        $.ajax({
            url: "/ajax",
            type: "POST",
            cache: false,
            data: {
                type: "add_label",
                name: name,
                color: color
            },
            success: function () {
                $('#labels-modal').modal('hide');
                append_labels();
            }
        });
    } else {
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:39:14.673

将此添加到点击处理程序

```
$('span#open-label').click(function () {

  if( ($(this).attr('clicked') == '1') ) { 
    /* do something else then */ 
    return;
  }
  $(this).attr('clicked', '1');

  $('#labels-modal').modal('show'); 
```

这样，下次单击时，您可以显示警报。

如果你想“重新激活”“开放标签”，你只需这样做：

```
 $('span#open-label').attr('clicked', '0'); 
```

# mysql - 在rails中创建模型不会在mysql中创建对应的表

> ID：14944472
> 
> 赞同：0
> 
> 时间：2013-02-18T20:10:08.263
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, model

以前没有遇到过这个，我在rails中生成一个模型

```
rails g model Rating ratings:integer 
```

此时没有生成迁移文件

然后我跑

```
 rake db:migrate 
```

此时没有任何反应，即使 myapp_development 和 myapp_test 存在，模型也没有写入表

所以我检查了mysql，只用

```
mysql 
```

它直接登录，那里没有数据库，然后我再次登录，但这次使用这个命令

```
mysql -u root 
```

在这里我的数据库存在。有谁知道这里发生了什么以及如何让我的模型创建相应的表？

数据库.yml

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: recipes_development
pool: 5
username: root
password: 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:42:59.627

检查您的迁移文件和您的时间戳`db/schema.rb`文件的时间戳。如果您最近一直在处理 git 的不同分支，您可能会遇到时间戳问题。

如果是这种情况，请尝试删除您的`schema.rb`文件，然后重新运行`rake db:migrate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:39:44.803

你的发电机看起来不错。
1\. 适合我（Rails 3.2）：

```
$ rails g model Rating ratings:integer
      invoke  active_record
      create    db/migrate/20130218203713_create_ratings.rb
      create    app/models/rating.rb
      invoke    test_unit
      create      test/unit/rating_test.rb
      create      test/fixtures/ratings.yml
$ cat db/migrate/20130218203713_create_ratings.rb
class CreateRatings < ActiveRecord::Migration
  def change
    create_table :ratings do |t|
      t.integer :ratings

      t.timestamps
    end
  end
end 
```

尝试 rake db:migrate --trace

UPD 2\. 您可以检查数据库中的 schema_migrations 表。

# ruby - ruby 中的运算符 * 和 (*) 是什么意思？

> ID：14944474
> 
> 赞同：13
> 
> 时间：2013-02-18T20:10:15.250
> 
> 标签：ruby, ruby-1.9.3

我刚刚向 Ruby splat oprator 介绍了自己。我玩了很多方法。但是下面的实验不知何故让我想了两次:)

```
langs = ["java", "csharp", "ruby", "haskell" ]
# => ["java", "csharp", "ruby", "haskell"]

 l1,*,l2 = *langs
# => ["java", "csharp", "ruby", "haskell"]
 l1
# => "java"
 l2
# => "haskell"

 l1,*,*,l2 = *langs
SyntaxError: (irb):27: syntax error, unexpected tSTAR
l1,*,*,l2 = *langs
      ^
    from /usr/bin/irb:12:in `<main>' 
```

是的，错误很明显，因为我`*(splat)`在同一个参数列表中使用了超过 1 个运算符。

现在我试着玩它。

```
l1,(*),(*),l2 = *langs
# => ["java", "csharp", "ruby", "haskell"] 
```

啊！在这里有效。但不明白为什么会这样？

```
 l1
# => "java"
 l2
# => "haskell"
 l1,(*),l2 = *langs
# => ["java", "csharp", "ruby", "haskell"]
 l1
# => "java"
 l2
# => "ruby" 
```

从上面的示例中，它似乎正在跳过数组元素。

***问题是：***

*   (a) 运算符 (*) 叫什么？

*   (b) 当我在 splat(*) 中使用`l1,*,l2 = *langs`它时，它会消耗所有元素 - `"csharp", "ruby"`。有什么方法可以从`*`技术上查看那里的消耗量吗？显然，我正在使用 if `l1,*,l2 = *langs`not by `l1,l*,l2 = *langs`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T20:28:22.143

这是由于[括号如何与](http://books.google.com/books?id=jcUbTcr5XWwC&pg=PA99&lpg=PA99#v=onepage&q&f=false)Matz 解释的并行分配一起工作。

例如：

```
a, b, c = *[1, 2, 3]
a => 1
b => 2
c => 3 
```

不同于：

```
a, (b, c) = *[1, 2, 3]
a => 1
b => 2
c => nil 
```

*基本上，括号说：将此索引处*的右侧元素分配给括号中的变量。所以 2 被分配给`b`，索引处没有任何东西`1`可以分配给`c`。同样， (*) 将只获取给定索引处的元素并分发它。

```
# the * is interpreted to mean 'take all remaining elements'
a, * = 1, 2, 3, 4

# the * is interpreted to mean 'take all remaining elements except
# the last element'
a, *, c = 1, 2, 3, 4

# incorrect syntax, can't splat more than once on all remaining
# elements
a, *, *, c = 1, 2, 3, 4

# the * is interpreted to mean 'take all elements at index 1'
a, (*), c = 1, 2, 3, 4

# the *'s are interpreted to mean 'take all elements at index 1,
# then again at index 2'
a, (*), (*), c = 1, 2, 3, 4 
```

通常，`*`运算符与变量结合使用`*foo`- 但如果不是，它将保留其位置并像变量一样进行元素分配（基本上丢弃它们）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T20:49:54.503

这样想：括号本身（忽略变量名或 splat 运算符）正在访问数组中的单个元素：

```
l1,  (), (), l2 = *['a', 'b', 'c', 'd']
 ^   ^   ^   ^
'a' 'b' 'c' 'd' 
```

如果它是一个数组数组，那么使用括号会更有意义：

```
>> l1,(l3, l4),(l5, l6),l2 = *['a', ['b', 'c'], ['d', 'e'], 'f']
=> ["a", ["b", "c"], ["d", "e"], "f"]
>> l1
=> "a"
>> l3
=> "b"
>> l4
=> "c"
>> l5
=> "d"
>> l6
=> "e"
>> l2
=> "f" 
```

因此 (*) 从数组中获取单个元素，并对其进行 splat 分配。括号本身采用 SINGLE 元素，然后 splat 采用该单个元素并“splats”它。

值得注意的是，当从数组执行多变量赋值时，数组端不需要 splat：

```
>> a,b,c = ['a', 'b', 'c']
=> ["a", "b", "c"]
>> a
=> "a"
>> b
=> "b"
>> c
=> "c" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T21:16:15.207

`(*)`实际上只是从右侧读取*一个元素。*考虑这个例子，它在`langs`数组中有第五个元素：

```
langs = ["java", "csharp", "ruby", "haskell", "python" ] 
```

因此，当您使用普通的 splat 时，您会得到：

```
l1,*,l2 = langs

l1 #=> "java"
l2 #=> "python" 
```

与带括号的示例相反：

```
l1,(*),(*),l2 = langs

l1 #=> "java"
l2 #=> "haskell" 
```

不过我想提一下，对于这种情况，您通常会使用`_`将中间值分配给“无”（相当于最后一个示例）：

```
l1,_,_,l2 = langs

l1 #=> "java"
l2 #=> "haskell" 
```

如果您想查看最终在中间值中的内容，可以将值显式分配给变量，如下所示：

```
l1,*m,l2 = *langs

l1 #=> "java"
l2 #=> "python"
m  #=> ["csharp","ruby","haskell"] 
```

或与其他示例：

```
l1,(*m1),(*m2),l2 = langs

l1 #=> "java"
l2 #=> "haskell"
m1 #=> ["csharp"]
m2 #=> ["ruby"] 
```

所以我希望这清楚地表明`(*)`它本身不是一个运算符，而实际上只是括号内的一个 splat，因此没有自己的名字。

# c# - 为什么我们得到 ArrayTypeMismatch 与 ref 参数？

> ID：14944475
> 
> 赞同：3
> 
> 时间：2013-02-18T20:10:22.880
> 
> 标签：c#

**鉴于场景：**

```
public class Program
{
    static void Main()
    {
        object[] covarientArray= new A[] { new A() };
        object polymorphism = new A();
        object test = covarientArray[0];
        M(ref polymorphism);//fine up to here

        M(ref covarientArray[0]);//ArrayTypeMismatchException
    }

    static void M(ref object o) { Console.WriteLine(o); }
}
class A {} 
```

**[以及ArrayTypeMisMatch](http://msdn.microsoft.com/en-us/library/system.arraytypemismatchexception.aspx)的定义：**

> 尝试在数组中存储错误类型的元素时引发的异常。

当尝试在数组**中存储**错误类型的元素时，将引发此异常。例如：

```
A[] invalid = new A[1];
invalid[0] = "";//I can't store a type of string within an array of type of A 
```

这个异常是怎么发生的？为什么在调用带有`ref`参数的方法时我们正在执行存储操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:16:38.420

`ref`在创建错误类型的数组元素时也会引发异常。仅通过阅读异常文本显然不清楚这一点，但在您链接到的页面上间接提到了它：

> 以下 Microsoft 中间语言 (MSIL) 指令抛出 ArrayTypeMismatchException ：
> 
> 困难症

[`ldelema`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldelema.aspx)（加载元素地址）是用于创建对数组元素的引用的指令。

至于为什么，它可以防止对*每个参数的**每个*分配都需要对类型进行运行时检查。 *`ref`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:31:37.440

> 为什么在调用带有 ref 参数的方法时我们正在执行存储操作？

将数组元素作为参数提供给`ref`参数实际上*是*一种存储操作，至少可能是这样。（是的，您可能*不会*重新分配它，但编译器/运行时不一定*知道*）

想象一下，如果您的`M`方法实现是这样的：

```
static void M(ref object o) 
{ 
    o = new B();
} 
```

如果我们键入您的协变数组`object[]`，那么它可以编译和工作：

```
object[] covariantArray= new object[] { new A() };
M(ref covariantArray[0]);
Console.WriteLine(covariantArray[0].GetType().Name); //B 
```

它运行并用*B 的新实例**替换*了第一个元素。当然，这对于数组是完全有效的。所以现在如果我们简单地把它改成：*`object[]``A[]`*

 *```
object[] covariantArray= new A[] { new A() };
M(ref covariantArray[0]); //ArrayTypeMismatchException
Console.WriteLine(covariantArray[0].GetType().Name); 
```

它在处理潜在危险/灾难性/dogs-are-cats/up-is-down 调用之前抛出异常`M`。

当然，删除`ref`调用或`ref`针对局部变量而不是数组元素，它工作得非常好，因为你没有弄乱数组内容。

@hvd 的答案可能更正确，因为它解释了抛出的底层运行时机制，但至少这里有一个实际演示为什么会这样。**

# android - 从网站访问 android 应用程序？

> ID：14944478
> 
> 赞同：0
> 
> 时间：2013-02-18T20:10:29.470
> 
> 标签：android, google-maps, latitude-longitude, android-maps

我想开发一个可以读取用户纬度和经度的应用程序。我可以做到这一点，`LocationManager`我可以做到这一点。但是，如果即使是用户从外部网站请求时，我也想在哪里传递这个纬度和经度数据。

这意味着我想通过网站连接应用程序并检索纬度和对数数据，然后将其传递到该特定网站。

这在 Android 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:51:28.153

您可以做的是集成[GCM的应用程序。](http://developer.android.com/google/gcm/index.html)[您的网络应用程序可以向Google 服务器](http://developer.android.com/google/gcm/gcm.html#send-msg)发出请求，告诉/所有用户将他们的 GPS 详细信息直接发送到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:46:52.113

所以你想创建从安卓应用程序获取数据的网站，我做对了吗？

您需要将 javascript 添加到您的网站，例如：

```
"<div class=\"location\"> <input type=\"button\" value=\"get location\" onClick=\"getAndroidLocation()\" />"
                    + "<script language=\"javascript\"> function getAndroidLocation() { AndroidFunction.getAndroidLocation(); } </script>"; 
```

对于您的应用程序，您需要添加 javascript 界面。例子：

```
mWebView = (WebView)findViewById(R.id.webView1);
mWebView.addJavascriptInterface(this, "AndroidFunction");

    public void getAndroidLocation(){
          //Do your staff and send location 

    } 
```

# java - 如何通过循环遍历 ID 数组来设置按钮 ID 并使用循环设置按钮文本？

> ID：14944479
> 
> 赞同：0
> 
> 时间：2013-02-18T20:10:38.850
> 
> 标签：java, android, button, for-loop

我正在尝试以编程方式设置 5（五）个按钮的 id，并每次都将它们随机播放。
洗牌没有问题。

当我使用 2（两种）方法来洗牌并设置 5 个按钮的 id 并设置每个按钮的文本时，我会遇到错误。
我知道这可能会一团糟，因为这是我第一次尝试 for-each 循环。
请帮忙。谢谢你。

```
Button b1, b2, b3, b4, b5;
Button[] buttons = { b1, b2, b3, b4, b5 };

    public void shuffleButtons() {

            Integer[] Id = { R.id.bChoice1, R.id.bChoice2, R.id.bChoice3,
                    R.id.bChoice4, R.id.bChoice5 };

            ArrayList<Integer> buttonId = new ArrayList<Integer>(Arrays.asList(Id));

            Collections.shuffle(buttonId);

                for (int x = 0; x < 5; x++) {

                    for (Button b : buttons) {

                        b = (Button) findViewById(buttonId.get(x));

                    }

                }

        } 
```

* * *

```
public void setButtonTxt() {

            for (Button b : buttons) {

                for (int x = 0; x <= buttons.length; x++) {

                    b.setText(textList.get(x));

                }
            }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:18:41.117

> 我正在尝试以编程方式设置 5（五）个按钮的 id，并每次都将它们随机播放。洗牌没有问题。

我的建议是你不应该，不应该这样做。每个 id 都应该从创建`XML`，然后每个 id 都是`R.java`作为静态 int 字段自动生成的。

你应该尊重这条规则，不要创建“意大利面条代码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:29:16.307

简而言之，我猜你的问题`x <= buttons.length`应该`x < buttons.length`在你的 for 循环中。但是，您似乎将`textList.get(5)`使用您拥有的当前代码将所有 5 个按钮设置为。

为什么不尝试使用 XML 中的预设按钮？

```
<Button android:id="@+id/bChoice1" ... />
<!-- etc -->
<Button android:id="@+id/bChoice5" ... /> 
```

然后在后面的代码中，随机化文本而不是两者？

```
Button b1 = (Button)findViewById(R.id.bChoice1);
Button b2 = (Button)findViewById(R.id.bChoice2);
Button b3 = (Button)findViewById(R.id.bChoice3);
Button b4 = (Button)findViewById(R.id.bChoice4);
Button b5 = (Button)findViewById(R.id.bChoice5);

// assuming textList is an ArrayList of text items
// the next two lines will randomize your textList order
// so you don't need to do it yourself and much less
// error-prone
long seed = System.nanoTime();
Collections.shuffle(textList, new Random(seed));

b1.setText(textList.get(0));
b2.setText(textList.get(1));
b3.setText(textList.get(2));
b4.setText(textList.get(3));
b5.setText(textList.get(4)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T05:45:50.153

最好以这种方式编写代码：

```
Button [] buttens=new Button[5];
final int ID= R.id.bChoice1;
for (int i = 0; i < 5; i++) {
        button[i]=(Button)findViewById(ID+i);
    } 
```

但请注意，只要您连续设置按钮 ID，它就可以工作！

# javascript - 用于从 html 注释中提取数据的 JavaScript 正则表达式

> ID：14944482
> 
> 赞同：1
> 
> 时间：2013-02-18T20:10:49.930
> 
> 标签：javascript, html, regex

有一个带有我需要提取的 Id 的 html 注释。评论在一个 div 上，使用 JQuery $ 运算符并不难获得。但是我需要的正确的正则表达式字符串我还没有弄清楚。这是评论：

```
<!-- sid=FFKK12H1 --> 
```

我需要一个分配有字符串“FFKK12H1”的JS变量。要使用的正确语法/表达式是什么？谢谢！

编辑：

我忘记了一条非常重要的信息：代码需要在 IE7 上运行。不幸的是，这是我公司允许我们使用的浏览器，到目前为止，所提出的解决方案都没有。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:13:16.317

正则表达式将是`/<!-- sid=(.+?) -->/i`：

```
var str = '<!-- sid=FFKK12H1 -->';
console.log(str.match(/<!-- sid=(.+?) -->/i)[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:17:36.767

```
var content = $('#comment-containg-div').html();
var regex = /<!--\s*sid=([\x00-\x7F]+)\s*-->/;
var matches = regex.exec(content);
console.log(matches); 
```

这里的正则表达式是一个合并的答案，其中包括页面上其他人提出的所有建议，它似乎是最安全的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:26:14.163

```
var my_id = my_string.replace(/.*<!-- sid=(.*) -->.*/gi, '$1'); 
```

示例 [http://jsfiddle.net/YTdKQ/](http://jsfiddle.net/YTdKQ/)

# vb.net - VB.net 在模块中查找发送控制

> ID：14944487
> 
> 赞同：0
> 
> 时间：2013-02-18T20:11:37.930
> 
> 标签：vb.net, visual-studio-2008, module

我正在使用 Visual Studio 2008 创建一个多用户窗体应用程序。用户表单将具有按钮，其中一些（来自不同表单）将全部转到同一模块。我需要弄清楚（在模块内）如何确定来自哪个表单的哪个按钮是发件人。我知道如何通过使用发件人和句柄在表单本身上找到发件人，但是当我在模块中时，我对如何找到发件人感到困惑。

提前感谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:29:11.767

将发件人作为参数传递到您的模块中。

```
Public Module Module1
    Public Function MyFunction(sender As Button)
        ' do stuff with sender here
    End Function
End Module 
```

这就是函数参数的用途。

# java - java protected 为什么这是通过非继承工作的？

> ID：14944488
> 
> 赞同：1
> 
> 时间：2013-02-18T20:11:40.790
> 
> 标签：java, protected

我显然错过了这一点，但给出了：

```
package a;
public class Class1 {
    protected int a=1;
}

package b;
import a.*;

public class Class2 extends Class1 {
    Class2() {
        Class1 c1=new Class1();
        Class2 c2=new Class2();
        System.out.println(a);     //1
        System.out.println(c1.a);  //2
        System.out.println(c2.a);  //3
    }
} 
```

我知道 //1 由于通过继承使用而很好，而 //2 因为不是通过继承访问而失败，但为什么 //3 也可以？我认为变量 a 正在通过一个新对象访问，而 a 位于 Class1 中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:17:46.577

由于`Class2`is-a 的任何对象`Class1`，它都可以访问所有`Class 1`具有作用域的成员变量`default`，`protected`和`public`。

此外，尝试通过使用您用来处理作用域/继承的类的对象来理解作用域和继承规则并不是一个好主意，因为它的工作方式与通过第三方不同（这是最常见的用途。）

例如，这是允许的：

```
public class Something {
   private int something;

   public int stealSomething(final Something otherthing) {
       return otherthing.something;
   }
} 
```

尝试制作第三个类，它不在您用于测试的类的层次结构中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T20:18:27.673

当您在其类中操作对象时，您可以完全访问他的所有属性，包括私有属性。作为`c2`一个实例，`Class2`并且您正在`Class2`代码中对其进行操作，您可以看到受保护的属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T20:18:11.803

> 为什么 //3 也可以？

为什么不应该没问题？鉴于这`Class2`是 的子类`Class1`，因此可以通过 的实例访问的`protected`字段。这就是你在这里所做的。是 的一个实例，并且字段对它是可见的。`Class1``Class2``c2``Class2``a`

**注意：**任何*直接子类*都可以访问*受保护的成员*，无论是在同一个包中还是在不同的包中。

 *> 我认为变量 a 正在通过一个新对象访问

对，那是真的。

> 并且 a 位于 Class1 中？

这在这里真的不重要。就实例`a`可访问而言`Class2`，它是有效的。

仅供参考，您的代码将死于`StackOverflowError`. 你需要照顾它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T20:18:02.277

我不明白这个问题。

Class1 有一个名为“a”的变量。由于它是“受保护的”，因此该变量在 Class1 的任何对象和扩展 Class1 的类的任何对象中都是可见的。

如果“a”是私有的，那么它在扩展 Class1 的类的对象中不会以这种方式可见。*

# php - 我试图避免 CodeIgniter 路由正则表达式过度杀伤

> ID：14944489
> 
> 赞同：0
> 
> 时间：2013-02-18T20:11:47.160
> 
> 标签：php, regex, codeigniter

我正在寻找有关如何避免的建议：

```
$route = array(
    'directory'             => 'accountdirectory/index',
    'directory/(:any)'          => 'accountdirectory/index/$1',
    'directory/(:any)/(:num)'       => 'accountdirectory/index/$1/$2' ... 
```

如果可能的话，通过采用更宽容的单一模式，如果所有段都不存在，则路线不会中断：

`'directory(/)?(:any)?(/)?(:any)' => 'accountdirectory/index/$1/$2'`

路由

*   目录/全部
*   目录/
*   目录/全部/10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:37:06.217

您可以使用一种路线：

```
$route = array(
    'directory' => 'accountdirectory/index',
    ...
) 
```

并像这样定义 accountdirectory/index 函数：

```
public function index($arg1 = null, $arg2 = null) {
    if ($arg === 'all' && $arg2 !== null) {
        // directory/all/XXXX
    }
    elseif ($arg1 === 'all') {
        // directory/all
    }
    else {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:56:38.233

通常，在您描述的情况下，我会做的是：

```
$route['404_override'] = 'directory'; 
```

那么您可以在构造函数或索引函数中使用 if 或 switch 语句根据其他 uri 段从那里重定向。

# scala - 在正在运行的进程中获取 scala 列表的内容？

> ID：14944494
> 
> 赞同：1
> 
> 时间：2013-02-18T20:11:59.603
> 
> 标签：scala, heap-dump

我有一个正在运行的 Scala 进程，并希望在该进程中获取 List 的内容。我知道进程的 PID 和 List[String] 的名称，并且我已经使用 VisualVM 进行了堆转储。有没有办法让我找到该特定列表的实际内容并将其保存在某个地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:00:33.400

如果`List[String]`实例被一个类引用（例如通过 a `val`），那么您可以查找包含它的类。

*   您可以下载[Eclipse Memory Analyzer (MAT)](http://www.eclipse.org/mat/)并打开您的堆转储。
*   然后，您可以单击“支配树”，然后在表格顶部键入包含列表的类的名称。
*   如果您找到了该类，请右键单击它并选择“列出对象-> 使用传入引用”，这应该会为您提供所有可能包含该列表的类的实例。
*   右键单击其中一个实例并选择“列表对象-> 带有传出引用”，这将为您提供一个树结构，您可以在其中找到您的列表
*   请注意，找到列表后，您可以查看左侧的面板（检查器面板），其中包含可读信息。

注意：以上步骤来自我的头脑，因此它们可能并不完全准确。然而，这应该给你一个很好的方向感。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:54:43.660

我相信原则上这是可能的，但肯定没有什么简单或直接和现成的允许您这样做。

我可能会使用[Java Platform Debugger Architecture (JPDA)](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/index.html)及其[Java Debugging Wire Protocol (JDWP)](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/jdwp-spec.html)来获取您需要的原始信息。从那里您可以使用 Java 和/或 Scala 反射来发现在目标 JVM 中要查询的内容。

我不知道这有多少适用于堆转储。在过去，C / Unix 调试工具可以在核心转储或活动进程上运行。

# ember.js - 使用 createRecord() 添加记录后，如何在 ember.js 中刷新模型？

> ID：14944495
> 
> 赞同：1
> 
> 时间：2013-02-18T20:12:01.010
> 
> 标签：ember.js, ember-data

**更新：这已经过时了，我的博客不再基于 Ember。**基本上，我的问题很简单。我添加了一条记录`createRecord()`。我可以看到`didCreate`事件被触发，但我不知道如何让 ember 加载并显示我刚刚创建的内容。这个案例是关于在帖子中添加评论——这就是我想立即看到的。

**更新**：我没有 jsfiddle，但我可以炫耀我正在谈论的实时应用程序/网站是我自己的博客，这里：[http ://eduardmoldovan.com/](http://eduardmoldovan.com/)

模板在页面底部，javascript在这里：[http ://eduardmoldovan.com/static/eduardmoldovan.com/javascripts/ngin.js](http://eduardmoldovan.com/static/eduardmoldovan.com/javascripts/ngin.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:51:36.103

假设您已使用 commit() 保存评论，这样的事情应该可以工作：

```
{{#each comment in post.comments}}
  {{comment.text}}
{{/each}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T08:39:34.763

~~`didCreate`您可以从挂钩 手动将新记录添加到记录数组中：~~

 ~~```
var newRecord = transaction.createRecord(Ngin.Comment, {
    articleUrl: articleUrl,
    name: name,
    url: url,
    email: email,
    body: body,
    secret: secret
});
newRecord.one('didCreate', this, function () {
    this.get('comments').pushObject(newRecord);
});
transaction.commit(); 
```~~ 

或者，如果您想从服务器重新加载，请使用以下`reload`方法：

```
controller.get("comments").reload(); 
```

 ~~### 编辑

检查源代码后，我`update`在 class 中找到了一个方法`RecordArray`。这似乎是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T20:36:49.093

以下既不是有效的方法也不是最好的方法，但它会通知视图。并且会努力寻找更好的方法。我确定有一种更新方法和一种通知视图的方法。不能马上找到。

模板

```
<script type="text/x-handlebars" id="posts">
<button {{action 'newObject'}} ></button> 
```

控制器

```
App.PostsController = Ember.ArrayController.extend

  actions: {
    newObject: function() {
       this.store.createRecord('post', {id: xxxx, title: 'Default title'});
       var all = this.store.filter('post', function(post) {
         return post; // return each object
       }); //This filter will include the new post record
       this.set('model', all); // set will notify the view of a mutated array
    }
  }, 
```~~

# asp.net-mvc-3 - ASP.NET MVC 子数组外键不可为空

> ID：14944505
> 
> 赞同：1
> 
> 时间：2013-02-18T20:12:26.877
> 
> 标签：asp.net-mvc-3, razor

所以我有两个这样的模型设置：

```
class Job { ... List<Restriction> userRestrictions {set; get; ... } 
```

第二种型号：

```
Restriction { public int Id { get; set; } ... public int JobID { get; set; } } 
```

现在，当我编辑作业时，我通过以下方式获取限制：

```
job = db.Jobs.Where(i => i.Id == id).Include(r => r.UserRestrictions).First(); 
```

所以我遍历 UserRestrictions 并手动制作它们：

```
 @for (ind = 0; ind < Model.UserRestrictions.Count; ind++)
        {
            JaASv1.Models.Restriction p = Model.UserRestrictions[ind];
        <tr>
            <td>
                <input type="hidden" name="UserRestrictions[@(Counter + ind)].Id" value="@p.Id" />
                <input type="hidden" name="UserRestrictions[@(Counter + ind)].JobId" value="@Model.Id" />
            </td> 
```

我的发帖方式：

```
 public ActionResult Edit(Job job, string ProjTypeOther, string VenderOther, string FoldingOther, string BindingOther)
            ...
            db.Entry(job).State = EntityState.Modified;
            ...
            for (int iter = iterStart; iter >= 0; iter--)
            {
                Restriction r = job.UserRestrictions[iter];

                db.Entry(r).State = EntityState.Modified;

                if (r.Permissions == 0)
                {
                    DelPermission(sPath, r.AdName); // Folder Permission things
                    job.UserRestrictions.Remove(r);

                    continue;

                }
                else if (r.Permissions == 1 )
                {
                    AddPermission(sPath, r.AdName, readRights); // Folder Permission things
                }
                else if (r.Permissions == 2)
                {
                    AddPermission(sPath, r.AdName, writeRights); // Folder Permission things
                }

            }

            db.SaveChanges(); 
```

我在 db.SaveChanges() 上收到以下错误：

> 无法更改关系，因为一个或多个外键属性不可为空。

我查看了所有的 job.UserRestrictions 并看到他们都发布了他们的 JobID，我什至查看了数据库上下文，发现其中没有任何带有 NULL 的外键，所以我不知道这个错误在说什么关于。

我可能做错了什么？

我尝试将每个限制状态设置为已修改。那似乎没有用。

我愿意接受任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:53:10.053

所以，我最终做的是以下内容：

拉取当前在数据库中的所有 UserRestrictions。

在遍历发布数据时，我检查数据库中的相应项目。我还将 Post 对象中的 UserRestrictions 设置为 null，因此 ASP 不会尝试重新插入表中。

如果该项目不存在，我将该项目添加到数据库中。

我从数据库修改项目而不是发布数据之一。

我曾希望 ASP.NET 能够为我处理所有事情，但我想我不能指望它能够完成所有事情。

```
List<Restriction> fromDB = db.Restrictions.Where(r => r.JobId == job.Id).ToList();
List<Restriction> newPost = job.UserRestrictions;
job.UserRestrictions = null;
for (int iter = iterStart; iter >= 0; iter--) {
... // Logic to handle post item
    Restriction b;
    try
    {

         b = fromDB.Where(f => f.Id == r.Id).First();
     }
     catch (Exception er)
     {
         // No record exists yet
         b = r;
         db.Restrictions.Add(b);
      }
      // Modify values of b to the values from post data
    }
  db.SaveChanges(); 
```

很抱歉出现奇怪的缩进，StackOverflow 应该使用 bbcode 而不是空格：x

# bash - Bash：嵌套在 for 循环中的 If 语句

> ID：14944506
> 
> 赞同：1
> 
> 时间：2013-02-18T20:12:28.743
> 
> 标签：bash, if-statement, for-loop

我正在编写一个简单的脚本来检查输入的目录路径是否存在。这就是我所拥有的

```
echo "Please specify complete directory path"
read file_path

for file in $file_path; do
    if [[ -d "$file" ]]; then
        echo "$file is a directory"
        break
    else
        echo "$file is not a directory, please try again."
fi
done 
```

我需要的是，如果它不是返回并再次询问文件路径的目录。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:17:37.203

这个怎么样？

```
echo "Please specify complete directory path"

while read file; do
    if [[ -d "$file" ]]; then
        echo "$file is a directory"
        break
    fi
    echo "$file is not a directory, please try again."
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:20:25.140

无需将路径拆分为各个部分，使用 -d 测试整个路径会告诉您它是否是目录。您需要将整个测试放入一个while循环中，直到用户正确为止：

```
#/bin/sh
set -e
file_path=''
while [ ! -d "$file_path" ]
do
    echo "Please specify complete directory path"
    read file_path   
    if [ ! -d "$file_path" ]
    then
        echo "$file_path is not a directory, please try again."
    fi
done 
```

我可以这样使用

```
$ sh /tmp/test.sh 
Please specify complete directory path
foobar
foobar is not a directory, please try again.
Please specify complete directory path
/var/www 
```

# sql-server - 如何获取有关存储过程 xp_instance_regread 的信息

> ID：14944508
> 
> 赞同：0
> 
> 时间：2013-02-18T20:12:37.723
> 
> 标签：sql-server, vb.net

我需要从 sql server 中检索正在运行的 SQL server 的默认路径。我知道应该是这样的工作：

```
declare @dir nvarchar(4000) 
exec master.dbo.xp_instance_regread
N'HKEY_LOCAL_MACHINE',
N'Software\Microsoft\MSSQLServer\Setup',
N'SQLPath', 
@dir output
select @dir 
```

现在我担心的是使用哪些参数名称从 .NET 调用此存储过程

```
Using sqlConn As New SqlConnection(connectionstring)
 Using cmd As New SqlCommand("xp_instance_regread", sqlConn)
            Parameter= New SqlParameter("@THE_FIRST_PARAMETER"... 
```

我怎么能得到那个？是否有一些像 sp_help 这样的存储过程，但提供了有关 sqlparameters 的更多详细信息？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:58:42.480

我将添加有效的代码，以防万一有人需要它:)

```
Public Shared Function GetSqlPath(ByVal connectionstring As String) As String
    Dim rowCount = 0
    Using sqlConn As New SqlConnection(connectionstring)
        Using cmd As New SqlCommand("xp_instance_regread", sqlConn)
            cmd.CommandType = CommandType.StoredProcedure
            Dim parameterRootKey As New SqlParameter With {.SqlDbType = SqlDbType.NVarChar,
                                                           .ParameterName = "@rootkey",
                                                           .Size = 128,
                                                            .Direction = ParameterDirection.Input, .Value = "HKEY_LOCAL_MACHINE"
                                                          }

            Dim parameterKey As New SqlParameter With {.SqlDbType = SqlDbType.NVarChar,
                                                       .ParameterName = "@key",
                                                       .Size = 128,
                                                          .Direction = ParameterDirection.Input,
                                                        .Value = "SOFTWARE\Microsoft\MSSQLSERVER\Setup"
                                                        }

            Dim parameterValueName As New SqlParameter With {.SqlDbType = SqlDbType.NVarChar,
                                                             .ParameterName = "@value_name",
                                                             .Size = 128,
                                                          .Direction = ParameterDirection.Input, .Value = "SQLPath"
                                                        } '                                              
            Dim parameterValue As New SqlParameter With {.SqlDbType = SqlDbType.NVarChar,
                                                         .ParameterName = "@value",
                                                         .Size = 128,
                                                        .Direction = ParameterDirection.Output
                                                        }
            cmd.Parameters.Add(parameterRootKey)
            cmd.Parameters.Add(parameterKey)
            cmd.Parameters.Add(parameterValueName)
            cmd.Parameters.Add(parameterValue)
            sqlConn.Open()
            cmd.ExecuteNonQuery()

            Return CType(parameterValue.Value, String)
        End Using
    End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:17:08.410

Even if there is some information online, `xp_instance_regread` is undocumented and that means there's a risk in using it: a new service pack may change it completely.

It's not entirely clear what you mean by the "default path" (path to what?), but the SMO [`Server`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server_properties.aspx) and [`Information`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.information_properties%28v=sql.110%29.aspx) classes have properties for all the 'obvious' paths that you might need. In this case I think you're asking about the [`RootDirectory` property](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.rootdirectory.aspx).

# amazon-web-services - AWS EC2 可用区到底在哪里？

> ID：14944510
> 
> 赞同：11
> 
> 时间：2013-02-18T20:12:39.203
> 
> 标签：amazon-web-services, amazon-ec2, latency, availability-zone

我正在尝试为我的目标受众创建一个延迟最低的服务器。我明白区域和可用区之间的区别（我认为）。听起来可用区位于不同的城市。他们究竟在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:16:06.130

Amazon 在公共信息方面提供的最好的信息是[他们的 EC2 FAQ](http://aws.amazon.com/ec2/faqs/#How_isolated_are_Availability_Zones_from_one_another)。如果您想要尽可能低的延迟，您是否可以不只是从目标位置 ping 每个可用区域中的服务器并以这种方式找到最低延迟？无论如何，不​​能保证物理接近 == 最低延迟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T06:50:24.897

您可以假设同一区域中的所有可用区都具有相似的延迟。（因为它们都非常接近）。此外，据我所知，所有用户的可用区都没有必要。（即 us-east-1a 可以是不同用户的不同数据中心）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-23T09:20:55.583

要为您的用户实现最佳体验，您应该选择地理上离您的用户最近的区域。AWS 区域内的 EC2 可用区应有效地为外部用户提供相同的延迟（与部署在同一区域或 AZ 内的其他服务作为您自己的服务不同）。所有 AZ 都与其地理区域内的 Internet 基础设施高度互连。在该区域内，您理想地希望构建您的应用程序，以便跨多个 AZ 复制其组件以实现最佳可用性。

顾名思义，可用区主要是一种可用性/可靠性构造：通过跨多个 AZ 部署应用程序，您可以保护自己免受某些故障模式的影响。AWS EC2 向客户做出的承诺是，任何两个 AZ 都不应因相关原因同时发生故障。

可用区由非常接近的一个或多个数据中心组成，因此延迟足够低，高度分布式应用程序可以以“本地网络”速度有效运行。区域是彼此足够接近的此类 AZ 的集合。但是，由于它们需要通过距离有意义地彼此分开，因此光速意味着*跨*AZ 的最小延迟更高。[Peter DeSantis 在他的 re:Invent 2018 主题演讲中很好地分解了它](https://youtu.be/mDNHK-SzXEM?t=190)。

这在技术上是不准确的，但可能是一个有用的简化模型：您可以将 AZ 视为“逻辑数据中心”，将区域视为“同一都市区域内的数据中心组”。像同步复制这样的功能可能在 AZ 中运行良好，但您可能应该更加小心地创建跨 AZ 的拓扑。相反，对于对延迟非常敏感的集群应用程序，例如消息传递计算网格，您可以选择使用 EC2 置放群组来确保 AZ 内部拓扑内的最佳位置。确切的延迟数字会因地区而异，您应该进行自己的测量以告知您的架构决策。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T17:47:38.783

您可以在[此 Amazon 文档页面](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html)上阅读可用区未映射到特定位置：

> 为了确保资源分布在一个区域的可用区中，我们独立地将可用区映射到每个账户的标识符。例如，您的可用区 us-east-1a 可能与另一个账户的 us-east-1a 位置不同。请注意，您无法在账户之间协调可用区。
> 
> UPADTE：根据下面的[Pavel](https://stackoverflow.com/users/48340/pavel)评论，请注意，现在您可以为可用区使用唯一标识符 AZ ID：要跨账户协调可用区，您必须使用 AZ ID，它是可用区的唯一且一致的标识符。例如，use1-az1 是 us-east-1 区域的 AZ ID，它在每个 AWS 账户中具有相同的位置。来源[aws 文档](https://docs.aws.amazon.com/en_pv/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-regions-availability-zones)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-27T14:47:42.630

如果您为在不同可用区启动的一堆实例查询一个 IP 地址到位置映射服务，您最终会得到一个类似于以下的映射：

```
- az: af-south-1c
  longitude: 18.424100875854492
  latitude: -33.92490005493164
  continent:
    code: AF
    name: Africa
  country:
    code: ZA
    name: South Africa
    flag: "\U0001F1FF\U0001F1E6"
  region:
    code: WC
    name: Western Cape
  city:
    name: Cape Town
  postcode: 8001
- az: ap-northeast-1a
  longitude: 139.73855590820312
  latitude: 35.69628143310547
  continent:
    code: AS
    name: Asia
  country:
    code: JP
    name: Japan
    flag: "\U0001F1EF\U0001F1F5"
  region:
    code: 13
    name: Tokyo
  city:
    name: Tokyo
  postcode: 162-0843
- az: ap-northeast-1c
  longitude: 139.73855590820312
  latitude: 35.69628143310547
  continent:
    code: AS
    name: Asia
  country:
    code: JP
    name: Japan
    flag: "\U0001F1EF\U0001F1F5"
  region:
    code: 13
    name: Tokyo
  city:
    name: Tokyo
  postcode: 162-0843
- az: ap-northeast-1d
  longitude: 139.73855590820312
  latitude: 35.69628143310547
  continent:
    code: AS
    name: Asia
  country:
    code: JP
    name: Japan
    flag: "\U0001F1EF\U0001F1F5"
  region:
    code: 13
    name: Tokyo
  city:
    name: Tokyo
  postcode: 162-0843
- az: ap-northeast-2a
  longitude: 126.620361328125
  latitude: 37.473548889160156
  continent:
    code: AS
    name: Asia
  country:
    code: KR
    name: South Korea
    flag: "\U0001F1F0\U0001F1F7"
  region:
    code: 28
    name: Incheon
  city:
    name: Incheon
  postcode: 400-011
- az: ap-northeast-3c
  longitude: 135.50750732421875
  latitude: 34.67094039916992
  continent:
    code: AS
    name: Asia
  country:
    code: JP
    name: Japan
    flag: "\U0001F1EF\U0001F1F5"
  region:
    code: 27
    name: Ōsaka
  city:
    name: Osaka
  postcode: 542-0082
- az: ap-southeast-1a
  longitude: 103.8517837524414
  latitude: 1.287950038909912
  continent:
    code: AS
    name: Asia
  country:
    code: SG
    name: Singapore
    flag: "\U0001F1F8\U0001F1EC"
  region:
    code: 1
    name: Central Singapore
  city:
    name: Singapore
  postcode: null
- az: ap-southeast-1c
  longitude: -73.44097137451172
  latitude: 41.126861572265625
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: CT
    name: Connecticut
  city:
    name: East Norwalk
  postcode: 06850
- az: ap-southeast-2a
  longitude: 151.2071075439453
  latitude: -33.86714172363281
  continent:
    code: OC
    name: Oceania
  country:
    code: AU
    name: Australia
    flag: "\U0001F1E6\U0001F1FA"
  region:
    code: NSW
    name: New South Wales
  city:
    name: Sydney
  postcode: 2000
- az: ap-southeast-2b
  longitude: 151.2071075439453
  latitude: -33.86714172363281
  continent:
    code: OC
    name: Oceania
  country:
    code: AU
    name: Australia
    flag: "\U0001F1E6\U0001F1FA"
  region:
    code: NSW
    name: New South Wales
  city:
    name: Sydney
  postcode: 2000
- az: ca-central-1a
  longitude: -73.56201171875
  latitude: 45.502079010009766
  continent:
    code: NA
    name: North America
  country:
    code: CA
    name: Canada
    flag: "\U0001F1E8\U0001F1E6"
  region:
    code: QC
    name: Quebec
  city:
    name: Montréal
  postcode: H2Y 2J7
- az: ca-central-1b
  longitude: -73.56201171875
  latitude: 45.502079010009766
  continent:
    code: NA
    name: North America
  country:
    code: CA
    name: Canada
    flag: "\U0001F1E8\U0001F1E6"
  region:
    code: QC
    name: Quebec
  city:
    name: Montréal
  postcode: H2Y 2J7
- az: eu-central-1c
  longitude: 8.682100296020508
  latitude: 50.11090087890625
  continent:
    code: EU
    name: Europe
  country:
    code: DE
    name: Germany
    flag: "\U0001F1E9\U0001F1EA"
  region:
    code: HE
    name: Hesse
  city:
    name: Frankfurt am Main
  postcode: 60311
- az: eu-north-1a
  longitude: 18.051319122314453
  latitude: 59.315120697021484
  continent:
    code: EU
    name: Europe
  country:
    code: SE
    name: Sweden
    flag: "\U0001F1F8\U0001F1EA"
  region:
    code: AB
    name: Stockholm
  city:
    name: Stockholm
  postcode: 118 58
- az: eu-north-1b
  longitude: 18.051319122314453
  latitude: 59.315120697021484
  continent:
    code: EU
    name: Europe
  country:
    code: SE
    name: Sweden
    flag: "\U0001F1F8\U0001F1EA"
  region:
    code: AB
    name: Stockholm
  city:
    name: Stockholm
  postcode: 118 58
- az: eu-north-1c
  longitude: 18.051319122314453
  latitude: 59.315120697021484
  continent:
    code: EU
    name: Europe
  country:
    code: SE
    name: Sweden
    flag: "\U0001F1F8\U0001F1EA"
  region:
    code: AB
    name: Stockholm
  city:
    name: Stockholm
  postcode: 118 58
- az: eu-south-1a
  longitude: 9.192000389099121
  latitude: 45.47200012207031
  continent:
    code: EU
    name: Europe
  country:
    code: IT
    name: Italy
    flag: "\U0001F1EE\U0001F1F9"
  region:
    code: 25
    name: Lombardy
  city:
    name: Milan
  postcode: 20121
- az: eu-south-1b
  longitude: 9.192000389099121
  latitude: 45.47200012207031
  continent:
    code: EU
    name: Europe
  country:
    code: IT
    name: Italy
    flag: "\U0001F1EE\U0001F1F9"
  region:
    code: 25
    name: Lombardy
  city:
    name: Milan
  postcode: 20121
- az: eu-south-1b
  longitude: 9.192899703979492
  latitude: 45.48379898071289
  continent:
    code: EU
    name: Europe
  country:
    code: IT
    name: Italy
    flag: "\U0001F1EE\U0001F1F9"
  region:
    code: 25
    name: Lombardy
  city:
    name: Milan
  postcode: 20124
- az: eu-south-1c
  longitude: 9.192000389099121
  latitude: 45.47200012207031
  continent:
    code: EU
    name: Europe
  country:
    code: IT
    name: Italy
    flag: "\U0001F1EE\U0001F1F9"
  region:
    code: 25
    name: Lombardy
  city:
    name: Milan
  postcode: 20121
- az: eu-west-1a
  longitude: -6.243330001831055
  latitude: 53.35388946533203
  continent:
    code: EU
    name: Europe
  country:
    code: IE
    name: Ireland
    flag: "\U0001F1EE\U0001F1EA"
  region:
    code: L
    name: Leinster
  city:
    name: Dublin
  postcode: null
- az: eu-west-1b
  longitude: -6.243330001831055
  latitude: 53.35388946533203
  continent:
    code: EU
    name: Europe
  country:
    code: IE
    name: Ireland
    flag: "\U0001F1EE\U0001F1EA"
  region:
    code: L
    name: Leinster
  city:
    name: Dublin
  postcode: null
- az: eu-west-1c
  longitude: -6.243330001831055
  latitude: 53.35388946533203
  continent:
    code: EU
    name: Europe
  country:
    code: IE
    name: Ireland
    flag: "\U0001F1EE\U0001F1EA"
  region:
    code: L
    name: Leinster
  city:
    name: Dublin
  postcode: null
- az: eu-west-2c
  longitude: -0.12574
  latitude: 51.5122184753418
  continent:
    code: EU
    name: Europe
  country:
    code: GB
    name: United Kingdom
    flag: "\U0001F1EC\U0001F1E7"
  region:
    code: ENG
    name: England
  city:
    name: Blackheath
  postcode: EC1M
- az: eu-west-2c
  longitude: 0
  latitude: 51.5122184753418
  continent:
    code: EU
    name: Europe
  country:
    code: GB
    name: United Kingdom
    flag: "\U0001F1EC\U0001F1E7"
  region:
    code: ENG
    name: England
  city:
    name: Blackheath
  postcode: EC1M
- az: eu-west-3a
  longitude: 2.3410699367523193
  latitude: 48.8602294921875
  continent:
    code: EU
    name: Europe
  country:
    code: FR
    name: France
    flag: "\U0001F1EB\U0001F1F7"
  region:
    code: IDF
    name: Île-de-France
  city:
    name: Saint-Ouen
  postcode: 75001
- az: eu-west-3c
  longitude: 2.3410699367523193
  latitude: 48.8602294921875
  continent:
    code: EU
    name: Europe
  country:
    code: FR
    name: France
    flag: "\U0001F1EB\U0001F1F7"
  region:
    code: IDF
    name: Île-de-France
  city:
    name: Saint-Ouen
  postcode: 75001
- az: us-east-1b
  longitude: -77.47419738769531
  latitude: 39.043701171875
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: VA
    name: Virginia
  city:
    name: Ashburn
  postcode: 20147
- az: us-east-1c
  longitude: -77.47419738769531
  latitude: 39.043701171875
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: VA
    name: Virginia
  city:
    name: Ashburn
  postcode: 20147
- az: us-east-1d
  longitude: -77.47419738769531
  latitude: 39.043701171875
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: VA
    name: Virginia
  city:
    name: Ashburn
  postcode: 20147
- az: us-east-1f
  longitude: -77.47419738769531
  latitude: 39.043701171875
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: VA
    name: Virginia
  city:
    name: Ashburn
  postcode: 20147
- az: us-east-2b
  longitude: -82.99945831298828
  latitude: 39.99557876586914
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: OH
    name: Ohio
  city:
    name: Columbus
  postcode: 43201
- az: us-east-2c
  longitude: -82.99945831298828
  latitude: 39.99557876586914
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: OH
    name: Ohio
  city:
    name: Columbus
  postcode: 43201
- az: us-west-1a
  longitude: -121.83822631835938
  latitude: 37.330528259277344
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: CA
    name: California
  city:
    name: San Jose
  postcode: 95122
- az: us-west-1b
  longitude: -121.83822631835938
  latitude: 37.330528259277344
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: CA
    name: California
  city:
    name: San Jose
  postcode: 95122
- az: us-west-2d
  longitude: -119.81143188476562
  latitude: 45.73722839355469
  continent:
    code: NA
    name: North America
  country:
    code: US
    name: United States
    flag: "\U0001F1FA\U0001F1F8"
  region:
    code: OR
    name: Oregon
  city:
    name: Boardman
  postcode: 97818 
```

```
[
  {
    "az": "af-south-1c",
    "longitude": 18.424100875854492,
    "latitude": -33.92490005493164,
    "continent": {
      "code": "AF",
      "name": "Africa"
    },
    "country": {
      "code": "ZA",
      "name": "South Africa",
      "flag": ""
    },
    "region": {
      "code": "WC",
      "name": "Western Cape"
    },
    "city": {
      "name": "Cape Town"
    },
    "postcode": 8001
  },
  {
    "az": "ap-northeast-1a",
    "longitude": 139.73855590820312,
    "latitude": 35.69628143310547,
    "continent": {
      "code": "AS",
      "name": "Asia"
    },
    "country": {
      "code": "JP",
      "name": "Japan",
      "flag": ""
    },
    "region": {
      "code": 13,
      "name": "Tokyo"
    },
    "city": {
      "name": "Tokyo"
    },
    "postcode": "162-0843"
  },
  {
    "az": "ap-northeast-1c",
    "longitude": 139.73855590820312,
    "latitude": 35.69628143310547,
    "continent": {
      "code": "AS",
      "name": "Asia"
    },
    "country": {
      "code": "JP",
      "name": "Japan",
      "flag": ""
    },
    "region": {
      "code": 13,
      "name": "Tokyo"
    },
    "city": {
      "name": "Tokyo"
    },
    "postcode": "162-0843"
  },
  {
    "az": "ap-northeast-1d",
    "longitude": 139.73855590820312,
    "latitude": 35.69628143310547,
    "continent": {
      "code": "AS",
      "name": "Asia"
    },
    "country": {
      "code": "JP",
      "name": "Japan",
      "flag": ""
    },
    "region": {
      "code": 13,
      "name": "Tokyo"
    },
    "city": {
      "name": "Tokyo"
    },
    "postcode": "162-0843"
  },
  {
    "az": "ap-northeast-2a",
    "longitude": 126.620361328125,
    "latitude": 37.473548889160156,
    "continent": {
      "code": "AS",
      "name": "Asia"
    },
    "country": {
      "code": "KR",
      "name": "South Korea",
      "flag": ""
    },
    "region": {
      "code": 28,
      "name": "Incheon"
    },
    "city": {
      "name": "Incheon"
    },
    "postcode": "400-011"
  },
  {
    "az": "ap-northeast-3c",
    "longitude": 135.50750732421875,
    "latitude": 34.67094039916992,
    "continent": {
      "code": "AS",
      "name": "Asia"
    },
    "country": {
      "code": "JP",
      "name": "Japan",
      "flag": ""
    },
    "region": {
      "code": 27,
      "name": "Ōsaka"
    },
    "city": {
      "name": "Osaka"
    },
    "postcode": "542-0082"
  },
  {
    "az": "ap-southeast-1a",
    "longitude": 103.8517837524414,
    "latitude": 1.287950038909912,
    "continent": {
      "code": "AS",
      "name": "Asia"
    },
    "country": {
      "code": "SG",
      "name": "Singapore",
      "flag": ""
    },
    "region": {
      "code": 1,
      "name": "Central Singapore"
    },
    "city": {
      "name": "Singapore"
    },
    "postcode": null
  },
  {
    "az": "ap-southeast-1c",
    "longitude": -73.44097137451172,
    "latitude": 41.126861572265625,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "CT",
      "name": "Connecticut"
    },
    "city": {
      "name": "East Norwalk"
    },
    "postcode": "06850"
  },
  {
    "az": "ap-southeast-2a",
    "longitude": 151.2071075439453,
    "latitude": -33.86714172363281,
    "continent": {
      "code": "OC",
      "name": "Oceania"
    },
    "country": {
      "code": "AU",
      "name": "Australia",
      "flag": ""
    },
    "region": {
      "code": "NSW",
      "name": "New South Wales"
    },
    "city": {
      "name": "Sydney"
    },
    "postcode": 2000
  },
  {
    "az": "ap-southeast-2b",
    "longitude": 151.2071075439453,
    "latitude": -33.86714172363281,
    "continent": {
      "code": "OC",
      "name": "Oceania"
    },
    "country": {
      "code": "AU",
      "name": "Australia",
      "flag": ""
    },
    "region": {
      "code": "NSW",
      "name": "New South Wales"
    },
    "city": {
      "name": "Sydney"
    },
    "postcode": 2000
  },
  {
    "az": "ca-central-1a",
    "longitude": -73.56201171875,
    "latitude": 45.502079010009766,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "CA",
      "name": "Canada",
      "flag": ""
    },
    "region": {
      "code": "QC",
      "name": "Quebec"
    },
    "city": {
      "name": "Montréal"
    },
    "postcode": "H2Y 2J7"
  },
  {
    "az": "ca-central-1b",
    "longitude": -73.56201171875,
    "latitude": 45.502079010009766,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "CA",
      "name": "Canada",
      "flag": ""
    },
    "region": {
      "code": "QC",
      "name": "Quebec"
    },
    "city": {
      "name": "Montréal"
    },
    "postcode": "H2Y 2J7"
  },
  {
    "az": "eu-central-1c",
    "longitude": 8.682100296020508,
    "latitude": 50.11090087890625,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "DE",
      "name": "Germany",
      "flag": ""
    },
    "region": {
      "code": "HE",
      "name": "Hesse"
    },
    "city": {
      "name": "Frankfurt am Main"
    },
    "postcode": 60311
  },
  {
    "az": "eu-north-1a",
    "longitude": 18.051319122314453,
    "latitude": 59.315120697021484,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "SE",
      "name": "Sweden",
      "flag": ""
    },
    "region": {
      "code": "AB",
      "name": "Stockholm"
    },
    "city": {
      "name": "Stockholm"
    },
    "postcode": "118 58"
  },
  {
    "az": "eu-north-1b",
    "longitude": 18.051319122314453,
    "latitude": 59.315120697021484,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "SE",
      "name": "Sweden",
      "flag": ""
    },
    "region": {
      "code": "AB",
      "name": "Stockholm"
    },
    "city": {
      "name": "Stockholm"
    },
    "postcode": "118 58"
  },
  {
    "az": "eu-north-1c",
    "longitude": 18.051319122314453,
    "latitude": 59.315120697021484,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "SE",
      "name": "Sweden",
      "flag": ""
    },
    "region": {
      "code": "AB",
      "name": "Stockholm"
    },
    "city": {
      "name": "Stockholm"
    },
    "postcode": "118 58"
  },
  {
    "az": "eu-south-1a",
    "longitude": 9.192000389099121,
    "latitude": 45.47200012207031,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IT",
      "name": "Italy",
      "flag": ""
    },
    "region": {
      "code": 25,
      "name": "Lombardy"
    },
    "city": {
      "name": "Milan"
    },
    "postcode": 20121
  },
  {
    "az": "eu-south-1b",
    "longitude": 9.192000389099121,
    "latitude": 45.47200012207031,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IT",
      "name": "Italy",
      "flag": ""
    },
    "region": {
      "code": 25,
      "name": "Lombardy"
    },
    "city": {
      "name": "Milan"
    },
    "postcode": 20121
  },
  {
    "az": "eu-south-1b",
    "longitude": 9.192899703979492,
    "latitude": 45.48379898071289,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IT",
      "name": "Italy",
      "flag": ""
    },
    "region": {
      "code": 25,
      "name": "Lombardy"
    },
    "city": {
      "name": "Milan"
    },
    "postcode": 20124
  },
  {
    "az": "eu-south-1c",
    "longitude": 9.192000389099121,
    "latitude": 45.47200012207031,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IT",
      "name": "Italy",
      "flag": ""
    },
    "region": {
      "code": 25,
      "name": "Lombardy"
    },
    "city": {
      "name": "Milan"
    },
    "postcode": 20121
  },
  {
    "az": "eu-west-1a",
    "longitude": -6.243330001831055,
    "latitude": 53.35388946533203,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IE",
      "name": "Ireland",
      "flag": ""
    },
    "region": {
      "code": "L",
      "name": "Leinster"
    },
    "city": {
      "name": "Dublin"
    },
    "postcode": null
  },
  {
    "az": "eu-west-1b",
    "longitude": -6.243330001831055,
    "latitude": 53.35388946533203,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IE",
      "name": "Ireland",
      "flag": ""
    },
    "region": {
      "code": "L",
      "name": "Leinster"
    },
    "city": {
      "name": "Dublin"
    },
    "postcode": null
  },
  {
    "az": "eu-west-1c",
    "longitude": -6.243330001831055,
    "latitude": 53.35388946533203,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "IE",
      "name": "Ireland",
      "flag": ""
    },
    "region": {
      "code": "L",
      "name": "Leinster"
    },
    "city": {
      "name": "Dublin"
    },
    "postcode": null
  },
  {
    "az": "eu-west-2c",
    "longitude": -0.12574,
    "latitude": 51.5122184753418,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "GB",
      "name": "United Kingdom",
      "flag": ""
    },
    "region": {
      "code": "ENG",
      "name": "England"
    },
    "city": {
      "name": "Blackheath"
    },
    "postcode": "EC1M"
  },
  {
    "az": "eu-west-2c",
    "longitude": 0,
    "latitude": 51.5122184753418,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "GB",
      "name": "United Kingdom",
      "flag": ""
    },
    "region": {
      "code": "ENG",
      "name": "England"
    },
    "city": {
      "name": "Blackheath"
    },
    "postcode": "EC1M"
  },
  {
    "az": "eu-west-3a",
    "longitude": 2.3410699367523193,
    "latitude": 48.8602294921875,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "FR",
      "name": "France",
      "flag": ""
    },
    "region": {
      "code": "IDF",
      "name": "Île-de-France"
    },
    "city": {
      "name": "Saint-Ouen"
    },
    "postcode": 75001
  },
  {
    "az": "eu-west-3c",
    "longitude": 2.3410699367523193,
    "latitude": 48.8602294921875,
    "continent": {
      "code": "EU",
      "name": "Europe"
    },
    "country": {
      "code": "FR",
      "name": "France",
      "flag": ""
    },
    "region": {
      "code": "IDF",
      "name": "Île-de-France"
    },
    "city": {
      "name": "Saint-Ouen"
    },
    "postcode": 75001
  },
  {
    "az": "us-east-1b",
    "longitude": -77.47419738769531,
    "latitude": 39.043701171875,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "VA",
      "name": "Virginia"
    },
    "city": {
      "name": "Ashburn"
    },
    "postcode": 20147
  },
  {
    "az": "us-east-1c",
    "longitude": -77.47419738769531,
    "latitude": 39.043701171875,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "VA",
      "name": "Virginia"
    },
    "city": {
      "name": "Ashburn"
    },
    "postcode": 20147
  },
  {
    "az": "us-east-1d",
    "longitude": -77.47419738769531,
    "latitude": 39.043701171875,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "VA",
      "name": "Virginia"
    },
    "city": {
      "name": "Ashburn"
    },
    "postcode": 20147
  },
  {
    "az": "us-east-1f",
    "longitude": -77.47419738769531,
    "latitude": 39.043701171875,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "VA",
      "name": "Virginia"
    },
    "city": {
      "name": "Ashburn"
    },
    "postcode": 20147
  },
  {
    "az": "us-east-2b",
    "longitude": -82.99945831298828,
    "latitude": 39.99557876586914,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "OH",
      "name": "Ohio"
    },
    "city": {
      "name": "Columbus"
    },
    "postcode": 43201
  },
  {
    "az": "us-east-2c",
    "longitude": -82.99945831298828,
    "latitude": 39.99557876586914,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "OH",
      "name": "Ohio"
    },
    "city": {
      "name": "Columbus"
    },
    "postcode": 43201
  },
  {
    "az": "us-west-1a",
    "longitude": -121.83822631835938,
    "latitude": 37.330528259277344,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "CA",
      "name": "California"
    },
    "city": {
      "name": "San Jose"
    },
    "postcode": 95122
  },
  {
    "az": "us-west-1b",
    "longitude": -121.83822631835938,
    "latitude": 37.330528259277344,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "CA",
      "name": "California"
    },
    "city": {
      "name": "San Jose"
    },
    "postcode": 95122
  },
  {
    "az": "us-west-2d",
    "longitude": -119.81143188476562,
    "latitude": 45.73722839355469,
    "continent": {
      "code": "NA",
      "name": "North America"
    },
    "country": {
      "code": "US",
      "name": "United States",
      "flag": ""
    },
    "region": {
      "code": "OR",
      "name": "Oregon"
    },
    "city": {
      "name": "Boardman"
    },
    "postcode": 97818
  }
] 
```

请注意，这不是 az 位置的准确表示。这只是针对多个 ec2 实例的公共 IP 地址运行地理定位查询的结果。

# php - 动态更新外部 PHP XML 生成脚本中的变量

> ID：14944515
> 
> 赞同：0
> 
> 时间：2013-02-18T20:12:54.643
> 
> 标签：php, ajax, get

我有一个简单的 php 脚本，与 google 开发人员示例中演示的非常相似，它从 MySQL 查询的结果创建 XML 数据。然后，我使用这个 XML 来驱动显示给定行程的航点的地图。

我目前遇到的问题是，虽然显示航点的页面有效，但我不知道如何使用所述行程 ID 动态更新下面的脚本。我通常会使用 $_GET 来传递变量，尤其是带有非敏感 ID 的变量，但由于此脚本是显示映射输出的页面的单独文件，因此我不确定如何动态更新其中的变量。

如果有人可以解释我如何将值传递给这个脚本，以便在我标记为“!!!!”的查询中更新 itineraryID 将不胜感激。

```
 <?php

    require("phpsqlajax_dbinfo.php");

    function parseToXML($htmlStr) 
    { 
    $xmlStr=str_replace('<','&lt;',$htmlStr); 
    $xmlStr=str_replace('>','&gt;',$xmlStr); 
    $xmlStr=str_replace('"','&quot;',$xmlStr); 
    $xmlStr=str_replace("'",'&apos;',$xmlStr); 
    $xmlStr=str_replace("&",'&amp;',$xmlStr); 
    return $xmlStr; 
    } 

    // Opens a connection to a mySQL server
    $connection=mysql_connect ($db_host, $username, $password);
    if (!$connection) {
      die('Not connected : ' . mysql_error());
    }

    // Set the active mySQL database
    $db_selected = mysql_select_db($database, $connection);
    if (!$db_selected) {
      die ('Can\'t use db : ' . mysql_error());
    }

    // Select all the rows in the locations table
    $query = "SELECT itinerary_link.itineraryID, itinerary_link.coursesID, itinerary_courses.coursename, courses.lat, courses.lng FROM itinerary_link LEFT JOIN itinerary_courses ON itinerary_link.coursesID = itinerary_courses.coursesID
 LEFT JOIN courses ON courses.coursename = itinerary_courses.coursename WHERE itineraryID=!!!! ORDER BY coursename";
    $result = mysql_query($query);
    //$ti1 = "U8abKhsdiu";
    //$hashed = $row['coursename'];
    //$bh= sha1($hashed);
    //$tileimage = sha1("$bh$ti1");
    if (!$result) {
      die('Invalid query: ' . mysql_error());
    }

    header("Content-type: text/xml");

    // Start XML file, echo parent node
    echo '<markers>';

    // Iterate through the rows, printing XML nodes for each
    while ($row = @mysql_fetch_assoc($result)){

    // Define variables for infoWindow images   
      // ADD TO XML DOCUMENT NODE
      echo '<marker ';
      echo 'name="' . parseToXML($row['coursename']) . '" ';
      echo 'lat="' . $row['lat'] . '" ';
      echo 'lng="' . $row['lng'] . '" ';
      echo '/>';
    }

    // End XML file
    echo '</markers>';

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:02:57.863

我还不能对帖子发表评论，或者我只是要求澄清一下。但我必须对您如何使用此脚本做出假设：

如果您通过`include`使用它的页面中的一个访问此脚本，那么您可以以您熟悉的方式使用 $_GET 和 $_POST。

**但是**我怀疑这不是您*动态*所说的那样做的方式！

这意味着使用 AJAX（异步 javascript 和 xml）或 jQuery 更简单的 ajax 函数从要更新的页面调用脚本。

**这个想法是您从要更新的页面中使用 jQuery 或 AJAX 调用此脚本，然后使用结果（您的 XML）来更新页面。**

这些方法也允许发送 GET 和 POST 信息。下面的示例显示了它们的用法，但您必须按照链接查看正确、完整的实现。

**无论您选择哪种方法，在 PHP 端都使用您熟悉的相同的 $_GET/$_POST。**

阿贾克斯：`ajaxRequest.open("GET", "ajax-example.php" + queryString, true);`

完整示例：[http ://www.tizag.com/ajaxTutorial/ajax-javascript.php](http://www.tizag.com/ajaxTutorial/ajax-javascript.php)

jQuery：`$.get("test.php", { name:"Donald", town:"Ducktown" });`

完整示例：[http ://www.w3schools.com/jquery/ajax_get.asp](http://www.w3schools.com/jquery/ajax_get.asp)

# function - 如何对向量的每个元素进行条件赋值

> ID：14944516
> 
> 赞同：0
> 
> 时间：2013-02-18T20:12:54.997
> 
> 标签：function, matlab, vector

我有这样的功能：

> y=-2，x<=0 y=-2+3x^2，0=1

我需要在一维矩阵的每个元素上计算这个函数，而不使用循环。

我认为定义一个像这样的函数是可能的：

```
function y= foo(x)

if x<=0
    y=-2;
elseif x>=1
    y=1;
else
    y= -2+3*x.^2;
end

end 
```

但这只会产生一个结果，如何对所有元素进行操作？我知道。运算符，但是如何访问 if 中的单个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:09:32.673

```
function b = helper(s)
  if s<=0
    b=-2;
  elseif s>=1
    b=1;
  else
    b= -2+3*s^2;
  end
end 
```

然后只需调用

```
arrayfun(@helper, x) 
```

产生你想要的功能行为`foo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T07:28:18.103

另一种不需要`arrayfun()`的方法是乘以条件：

```
y = -2*(x <= 0) + (-2+3*x.^2).*(x < 1).*(x > 0) + (x >= 1) 
```

你也可以做一个功能。这将接受向量输入，`x`例如

```
x = [1 4 0 -1 0.5];
y = -2*(x <= 0) + (-2+3*x.^2).*(x < 1).*(x > 0) + (x >= 1) 
```

输出

```
y =

   1.0000   1.0000  -2.0000  -2.0000  -1.2500 
```

# drop-down-menu - 如何从链接切换 Bootstrap 下拉菜单？

> ID：14944526
> 
> 赞同：4
> 
> 时间：2013-02-18T20:13:27.107
> 
> 标签：drop-down-menu, twitter-bootstrap

我有一个运行良好的 Bootstrap 下拉菜单。我想做的也是通过单击页面上其他地方的链接来触发菜单的打开。（这是有道理的，因为菜单项中的内容等。）文档页面说让链接做类似的事情`$('.dropdown-toggle').dropdown()`，或者也许`$('.dropdown-toggle').dropdown('toggle')`应该这样做，但对我来说都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:11:55.023

尝试

```
$(".dropdown").addClass("open"); 
```

和

```
$(".dropdown").removeClass("open"); 
```

# visual-studio - 适用于 Windows 应用商店的非 Metro 应用？

> ID：14944527
> 
> 赞同：1
> 
> 时间：2013-02-18T20:13:42.710
> 
> 标签：visual-studio, xaml, visual-studio-2012, microsoft-metro, windows-store-apps

我想使用 Visual Studio 2012 和 C# 为 Windows 应用商店开发一个应用程序。但是，当我创建一个选择“Windows Store”的空项目（XAML）时，我得到了一个地铁应用程序。我想要一个普通的 XAML 应用程序，因为我的应用程序只能作为一个窗口应用程序工作（用户根本不会从 Metro 接口中受益）。

那么如何在没有 Metro 的情况下创建一个默认的 XAML 应用程序，但仍然能够将其放入 Windows 应用商店？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T00:45:40.263

您只需像往常一样构建桌面应用程序。不要选择 Windows 应用商店应用程序，否则您最终会得到基于 WinRT 构建的 Metro 应用程序。

您需要针对您的申请运行认证工具包并将其提交给 MS。您还需要一个公司帐户才能提交给商店。

您可以在此处找到更多信息：http: [//blogs.msdn.com/b/windowsstore/archive/2012/06/08/listing-your-desktop-app-in-the-store.aspx](http://blogs.msdn.com/b/windowsstore/archive/2012/06/08/listing-your-desktop-app-in-the-store.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:30:03.157

您只需为`Style`要使用的控件提供自己的模板。如果您不想使用标准的开箱即用主题，则与您对任何 WPF/SL 项目所做的方式相同。例如，假设您想使用 a`Button`但您不希望它看起来像默认的 Light/Dark 主题按钮之一。在您的设计区域放置一个，右键单击并转到编辑模板-> 编辑副本并使用 Blend 对其进行样式设置，但您希望它看起来。不幸的是，这意味着您必须为所有控件设置*主题*才能创建主题，让所有内容都可以协同工作。

这是关于如何设置这些环境的一件很酷的事情，您几乎可以让任何东西看起来像您的想象力想要的样子。网上有很多关于如何使用 Blend 自定义控件样式模板的教程。希望这可以帮助。

# java - 2 个客户端之间的 Java 套接字本地连接 - 设计

> ID：14944528
> 
> 赞同：0
> 
> 时间：2013-02-18T20:13:46.350
> 
> 标签：java, sockets

我有一个应用程序，其中用户（客户端 #1）输入本地 ip 和端口，应用程序将图片发送到客户端 #2（也使用相同的应用程序）。但是对于最终的应用程序，我不希望用户输入本地 ip，因为他们不会知道这些信息，我希望我的程序能够自动解决这个问题。

我的第一个想法：最初，我认为我可以扫描所有本地 ip 以查找开放端口，但这需要的时间太长了。

我的第二个想法：我的下一个想法是让客户端将他们的本地主机名发送到远程服务器，然后交换它们并将它们发送回客户端。

但是，我不想为我的第二个想法运行专用服务器。

因为这更像是一个设计问题，所以我没有包含任何代码，但如果有必要我会这样做。

你们对我应该如何设计我的应用程序以自动找出本地 ips 有任何想法吗？

我确实尝试用谷歌搜索，但找不到解决方案，所以一个小时后我放弃了，只是把我的问题放在这里。如果这是重复的，那么我很抱歉，请删除这个问题。

谢谢，布科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:24:41.203

您可以使用类似[jgroups](http://jgroups.org)的东西（允许基于多播 [lan] 等的发现）或一些[点对点](http://jxta.kenai.com/)实现，尽管后者至少需要一些服务器进行初始发现。

原则上，客户端使用某个众所周知的地址向“世界”发送消息并等待某人回答。同时，每个客户端本身都在等待这样的消息，并用如何“连接”到当前客户端的信息来回复它。这可以通过所谓的黑板来完成，其中这个 bb 是多播消息的特殊 tcp 地址（os/tcp 将消息发送到同时侦听的所有客户端）或一个或多个服务器（种子）获取和协调请求和“成员”列表。无论如何，有一些工具；）

# css - CSS：@font-face 导入不起作用

> ID：14944531
> 
> 赞同：5
> 
> 时间：2013-02-18T20:13:53.537
> 
> 标签：css, text, fonts, import

我不明白如何让它工作，任何帮助将不胜感激；

我要离开我从这个网站得到的东西：http: [//alistapart.com/article/cssatten](http://alistapart.com/article/cssatten)

来自我的 style.css

```
@font-face {
 font-family: "JSL";
 src: url(http://ff.static.1001fonts.net/j/s/jsl-ancient.normal.ttf) format("truetype");
}

font {
 color: #000000;
 font-size: 120%;
 font-family: "JSL";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:35:56.813

加号也不是问题（使用我重命名的字体测试），您也不必在主 css 文件的顶部导入单独的 css 文件。

但是，您可能需要拥有更多版本的字体，而不仅仅是真正的类型。看看[Bulletproof @font-face 语法](http://www.paulirish.com/2009/bulletproof-font-face-implementation-syntax/)。

您可以使用[FontSquirrel 的生成器](http://www.fontsquirrel.com/fontface/generator)来实现这一点。

这是我的应用程序中嵌入的示例`@font-face`，它固定在我的主 css 样式表的顶部。

```
@font-face {
    font-family: 'JustVector';
    src: url('../fonts/justvectorv2+webfont.eot');
    src: url('../fonts/justvectorv2+webfont.eot?') format('eot'),
        url('../fonts/justvectorv2+webfont.woff') format('woff'),
        url('../fonts/justvectorv2+webfont.ttf') format('truetype'),
        url('../fonts/justvectorv2+webfont.svg#webfontkw9J4lGf') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:17:32.260

不

```
@font-face 
```

尝试导入它：

```
@import_your_new_cssfile.css 
```

你放哪里：

```
font-face {
 font-family: "JSL";
 src: url(http://www.fontyukle.net/en/DownLoad-JSL+Ancient.ttf) format("truetype");
}

font {
 color: #000000;
 font-size: 120%;
 font-family: "JSL";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:18:38.350

字体 URL 中的“+”号可能有问题吗？您可能希望对其进行 URL 编码。

编辑 - 在点击字体 URL 后，看起来您应该尝试下载 ttf 文件，并在本地引用它，而不是从远程源引用。它提示我输入验证码以下载文件，这可能是它不起作用的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:33:41.800

您确实需要下载文件并在本地引用它，支持的链接有一个下载链接，需要下载验证码，这意味着它不是 TTF 文件的直接链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-30T12:35:36.623

根据您可能需要使用的字体：

```
@font-face {
font-family: 'someFont';
src: url('path/to/font/someFont.eot');
src: url('path/to/font/someFont.eot?#iefix'), format('embedded-opentype'), 
     url('path/to/font/someFont.woff'), format('woff'), 
     url('path/to/font/someFont.ttf'), format('truetype'), 
     url('path/to/font/someFont.svg'), format('svg');
font-weight: normal;
font-style: normal;
} 
```

在 CSS 中：

```
BODY 
{
    font-family: 'someFont', Fallback, sans-serif;
    font-size: 12px;
    ... 
} 
```

当我遇到嵌入自定义字体的问题时，这对我有用。

# ios - iPhone 应用设置只读值

> ID：14944534
> 
> 赞同：2
> 
> 时间：2013-02-18T20:14:06.220
> 
> 标签：ios, objective-c, cocoa, plist

我发现这段代码向我展示了如何在“系统偏好设置”上为 iOS 设置页面插入一些值。

[https://developer.apple.com/library/ios/#samplecode/AppPrefs/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40007799-ReadMe_txt-DontLinkElementID_7](https://developer.apple.com/library/ios/#samplecode/AppPrefs/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40007799-ReadMe_txt-DontLinkElementID_7)

问题是我只希望它插入应用程序版本和一些版权文本。

我有这个 Setting.bundle 和 Root.plist insite。

plist 像示例一样具有“iPhone 设置架构”字典，并且工作正常。但我无法将版权设置为如下图所示的节页脚：

[http://cl.ly/image/0v3b0O0Q0S2A](http://cl.ly/image/0v3b0O0Q0S2A)

编辑：我已经设法为版本设置只读属性，我错过了“默认值”键，因为它没有将它添加为默认值。

但我仍然需要管理如何设置版权字符串

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:14:14.660

**标题**是您要查找的内容。来自[关于首选项和设置的 Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)：

> 标题类型显示只读字符串值。您可以使用此类型显示只读首选项值。

版权文本`FooterText`是`PSGroupSpecifier`. 查看[设置应用程序架构参考](https://developer.apple.com/library/ios/#documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference)中的[组元素](https://developer.apple.com/library/ios/#documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSGroupSpecifier.html)

# asp.net-mvc - 在会话之间保留数据而不使用 get、post 或 cookie

> ID：14944535
> 
> 赞同：0
> 
> 时间：2013-02-18T20:14:06.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个具有两个动作功能的控制器类。一个动作是我的登录页面，有一个视图，另一个是我的后端页面，有多个视图。

```
public ActionResult Login(...)
{
    if (logged in or login success)
    {
        return RedirectToAction("Backend","Controller");
    }
    ...
    return View();
}

public ActionResult Backend(...)
{
    if(session expired or not logged in)
    {
        return RedirectToAction("Login","Controller");
    }
    ...
    return View("someView");
} 
```

问题是当后端操作必须将用户发送到登录操作时，我想在登录页面上向用户显示“会话已过期”之类的消息。

例如，ViewBag 仅存在于当前会话中。但是有没有一种类似且简单的方法可以在会话之间存储信息？所以我可以在后端设置一条消息，然后重定向到登录，让登录读取该消息并将其显示在视图中？有点像 PersistentViewBag。

我真的不想使用 get、post 或 cookie，因为这是一个可行的选择，但我宁愿只在后端操作中将登录作为其自己的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:21:24.213

当您重定向到登录页面时，您可以简单地使用查询字符串来传递数据。

```
public ActionResult Backend(...)
{
    if(session expired or not logged in)
    {
        return RedirectToAction("Login","Controller",new { IsSessionExpired = true });
    }
    ...
    return View("someView");
} 
```

在您的登录操作中，您可以检查查询字符串并决定是否要显示该消息。

**更新**

如果您不想使用查询字符串，也可以使用 TempData。

```
public ActionResult Backend(...)
{
    if(session expired or not logged in)
    {
        TempData["IsSessionExpired"] = true;
        return RedirectToAction("Login","Controller");
    }
    ...
    return View("someView");
} 
```

然后您可以在登录操作中检查它：

```
if(TempData["IsSessionExpired"] != null)
{
    //Show message
} 
```

# coronasdk - Corona SDK 添加物理体/不接受碰撞

> ID：14944543
> 
> 赞同：0
> 
> 时间：2013-02-18T20:14:33.803
> 
> 标签：coronasdk

我正在尝试在我正在开发的应用程序中从物理引擎（addBody() 和 removeBody()）中添加/删除对象。我正在开发的应用程序是模块化的，因此问题出在两个文件之一中。

对象文件 (TransmitterObject) 或主文件 (main)：

这是两者的相关代码：

主程序.lua

```
local physics = require("physics")
physics.start()
physics.setGravity(0,0)
physics.setDrawMode( "debug" ) 

local TransmitterObject = require("TransmitterObject")

function updateGame(event)

    if(ITERATIONS % 100 == 0) then
        tran1:activate()    --create new physics object here    
    end

    ITERATIONS = ITERATIONS + 1
    --print(ITERATIONS)
end

Runtime:addEventListener("enterFrame", updateGame) 
```

TransmitterObject.lua

```
function transmitter.new(props) --constructor
    Transmitter = 
    {
        x = props.x,
        y = props.y,
        receivers = props.receivers
    }

    return setmetatable( Transmitter, transmitter_mt )      
end

function transmitter:activate() 
    local group = math.random(1, #self.receivers)
    local receiver = math.random(1,#self.receivers[group])
    local x , y = self.receivers[group][receiver][1], self.receivers[group][receiver][2]
    local d = math.sqrt(math.pow((self.x-x),2) + math.pow((self.y-y),2))
    local dx = math.abs(self.x - x)
    local angle = math.deg(math.acos(dx/d))

    local beam = display.newRect(self.x,self.y, d, 10)
    beam:setReferencePoint(display.TopLeftReferencePoint)
    beam.rotation = 180 + angle
    beam:setFillColor(0,255,0)
    beam.alpha = 0

    local function add(event)
        physics.addBody(beam, "static")
    end

    local function delete(event)
        physics.removeBody(beam)
    end 

    transition.to( beam, { time=1000, alpha=1.0, onComplete=add } )
    transition.to( beam, { time=1000, delay=2500, alpha=0, onComplete=delete})  
end 
```

现在让我试着更好地描述这个问题。基本上每 100 次 'enterFrame' 触发，我都会告诉发射器对象 (tran1) 调用它的函数 'activate'，然后执行一些基本的数学运算来获取坐标。然后它使用计算的信息创建一个矩形（梁）并设置一些属性。这都是基本的东西。接下来，我告诉它在 1 秒内从不可见 (alpha = 0) 过渡到可见。何时调用将对象添加到物理引擎的函数“add”。下一行删除对象也是如此。

话虽如此，当我设置 Physics.setDrawMode("debug") 时，光束对象显示为静态物体，但不接受碰撞。有谁知道为什么上面的代码不接受光束对象的碰撞？

请记住，我还有其他可以在物理引擎中正常工作的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T15:03:06.240

哇，我回复太晚了！
碰撞时，不支持修改实体。
我建议你创建一个新功能，

```
local function addBody ( event )
physics.addBody(ball, "static")
end 
```

在你的碰撞事件中你必须添加这个，

```
timer.performWithDelay(500, addBody) 
```

唯一可能导致一些问题的是延迟，但由于碰撞不会花费太多时间，所以应该没问题。
很抱歉发布这个 necroposting，
这只是为了帮助其他可能有这个问题的人，
Fannick

# javascript - jQuery和JavaScript单脚本之间的冲突

> ID：14944549
> 
> 赞同：0
> 
> 时间：2013-02-18T20:14:53.980
> 
> 标签：javascript, jquery, conflict

我在单个 html 页面中使用多个 JS 脚本以及 jquery。这些脚本包括一个滑块、一个粘性菜单、阴影框，最后是一个图像预览脚本。**这个图像预览脚本是使其他脚本失败的脚本，它单独工作。**它是在正文标签之后插入的简单代码。

这是它的代码：

```
<script type="text/javascript">
//<![CDATA[
jQuery.noConflict();
(function(jQuery){  

jQuery('#first a').imgPreview();

})(jQuery);
//]]>
</script> 
```

完整的 HEAD 代码：

```
<script src="js/jsapi.js" type="text/javascript"></script>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/html5.js" type="text/javascript"></script>

<script type="text/javascript" src="js/easySlider1.7.js"></script>

<script type="text/javascript">
jQuery.noConflict();
    $(document).ready(function(){   
        $("#slider").easySlider({
            auto: true, 
            continuous: true
        });
    }); 
</script>

<script src="js/scroll.inicio.js"></script>
<script src="js/jquery.scrollTo.js"></script>
<script src="js/jquery.nav.js"></script>
<script>
$(document).ready(function() {
   $('#sticky').onePageNav({
changeHash: true
  });
});
</script>

<script type="text/javascript">
function sticky_relocate() {
  var window_top = $(window).scrollTop();
  var div_top = $('#sticky-anchor').offset().top;
  if (window_top > div_top)
    $('#sticky').addClass('stick')
  else
    $('#sticky').removeClass('stick');
  }
google.setOnLoadCallback(function() {
  $(window).scroll(sticky_relocate);
  sticky_relocate();
  });
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-        2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src;         x.src=a[i+2];}
    }
    </script>

<script type="text/javascript" src="js/shadowbox.js"></script>

<script src="js/imgpreview.full.jquery.js" type="text/javascript"></script>

<script type="text/javascript">Shadowbox.init({ overlayOpacity: 0.9 });</script> 
```

**控制台显示这 3 个错误**

```
Uncaught TypeError: Cannot call method 'replace' of undefined imgpreview.full.jquery.js:58
Uncaught TypeError: Property '$' of object [object Window] is not a function index.html:21
Uncaught TypeError: Property '$' of object [object Window] is not a function index.html:49 
```

我需要找到冲突的位置以及如何解决它。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:51:10.723

这将失败：

```
jQuery.noConflict();
// script after this fails
$(document).ready(function(){   
    $("#slider").easySlider({
        auto: true, 
        continuous: true
    });
}); 
```

正确使用：

```
jQuery.noConflict();
// script after this fails
(function($){   
    $("#slider").easySlider({
        auto: true, 
        continuous: true
    });
})(jQuery); 
```

一种正确的用法也可能是：

```
jQuery.noConflict();
(function($){  
     $('#first a').imgPreview();
})(jQuery);
//other library code here... 
```

# css - 跨度中的内联块字母之间的 Firefox 间隙

> ID：14944550
> 
> 赞同：2
> 
> 时间：2013-02-18T20:15:04.823
> 
> 标签：css

见演示：http: [//jsbin.com/evesey/41/edit](http://jsbin.com/evesey/41/edit)

每个字母都在一个`span`元素中，整个句子与输入字段重叠，以显示差异。这仅在 Firefox 中引起，并且仅在`spans`设置为`inline-block`. 他们一定是`inline-block`。我尝试使用，`letter-spacing`但是当文本更改为其他内容时，这不是一个好的解决方案。

有没有办法解决这个问题？恐怕这可能只是 Firefox 渲染内联块中的一个无法解决的错误......

![字母之间的行内块间隙](../Images/bd5b7c77220093847e5f974cb83b0577.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T21:31:55.897

好的，经过深入调查，我了解到 Firefox 在输入字段上应用了 Kernnig，但不是在单独的字母上，`spans`而 Chrome 根本不应用任何字距调整，因此呈现完美的文本匹配。我看到这是一个 Chrome 错误，默认情况下不调整字距并不是那么明智的恕我直言。

`\u200b`通过在打印到输入字段的每个字符之后添加一个零宽度空格字符，我设法以“hacky”方式删除了强制字距调整。

**更新**：似乎上述技巧仍在发生字距调整，只是“字距缩小”较少。不是很好。

# java - 最好在 try 块内有一个同步块，还是在同步块内有一个 try 块？

> ID：14944551
> 
> 赞同：21
> 
> 时间：2013-02-18T20:15:17.613
> 
> 标签：java, multithreading, try-catch, synchronized-block

例如，这样更好吗？

```
try {
    synchronized (bean) {
        // Write something              
    }
} catch (InterruptedException e) {
    // Write something
} 
```

或者最好这样：

```
synchronized (bean) {
    try {           
        // Write something              
    }
    catch (InterruptedException e) {
        // Write something
    }
} 
```

我想知道哪一个是最佳实践。显然考虑到我必须同步 try 块中的所有代码。我不是在谈论我只需要同步 try 内的部分代码的情况（在这种情况下，我认为在 try 内有同步块会更好）。我怀疑我必须同步所有 try 块的情况。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T20:19:13.923

> 最好在 try 块内有一个同步块，还是在同步块内有一个 try 块？

除非您明确需要`catch`在`synchronized`块中，否则我会将`synchronized`代码部分尽可能小，并将其放在 try/catch 中。所以第一个模式会更好。然后，如果您确实需要在该`catch`部分中执行操作（例如记录异常或重新中断线程，请参见下文），这些不会阻塞其他线程。

也就是说，如果`synchronized`块包含许多行（当然通常不是一个好主意），那么我会考虑将 try/catch 块移到更靠近引发异常的方法（prolly`wait`或`notify`）。对于大量的行，您会冒着用大的 try/catch 块来不正确地处理异常的风险。取决于这里的参考框架。

顺便说一句，请确保您至少记录中断的异常。永远不要忽视它们。您可能还想重新中断线程：

```
try {
   ...
} catch (InterruptedException e) {
   // always a good pattern
   Thread.currentThread().interrupt();
   // handle the interrupt here by logging or returning or ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:20:30.243

没有最佳实践。这仅取决于您是否需要同步块内的异常处理部分。您可能想要一个或另一个，并且应该选择使同步块最短的一个，同时仍然使代码正确且线程安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T23:02:22.983

你似乎认为这只是一个美学问题。它不是。这是一个功能性问题，答案取决于每个案例的要求。每个同步块应该尽可能大，以包含需要同步的任何内容，并且不能更大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:19:55.720

你的 catch 块是否同步有关系吗？由于您在那里“写了一些东西”，我假设您将进行一些日志记录，这些日志记录不需要与一个好的日志记录框架同步，这意味着答案可能是**否定**的。

一般来说，您的目标应该是尽可能少地使用同步。同步块越小，遇到问题的可能性就越小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T20:20:44.030

在这种情况下，`InterruptedException`可能只发生`synchronized`在您可以调用`wait`or`sleep`或的块内`notify`。

一般来说，最好的做法是将`try/catch`块放置在尽可能靠近可能引发异常的代码的位置，以便于识别要修复的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T20:33:55.023

`synchronized{try{}}`它与or无关`try{synchronized{}}`，但与`synchronized{catch{}}`or完全有关`synchronized{} catch{}`。这实际上取决于您在 catch 块中执行的操作。

但是，猜测一下，因为`InterruptedException`，你通常应该在`catch{}`外面做`synchronized{}`。

# javascript - ondblclick 后可以禁用链接吗？

> ID：14944560
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:15:59.703
> 
> 标签：javascript, jquery, html

我有两个链接：一个链接使我的文字变红，另一个使我的文字变蓝。单击一个链接后，我想禁用这两个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:18:39.167

将事件处理程序附加到两者，如果被触发，则删除两者的事件处理程序。单击一个时，两者都将被禁用：

```
$('#red, #blue').on('click', function() {
    $('#red, #blue').off('click');
    //$('#red, #blue').prop('disabled', true);
}); 
```

不确定您所说的“禁用”是什么意思，或者双击与它有什么关系，但无论哪种方式，概念都是一样的？

# javascript - 强制网页在法律文件中打印

> ID：14944562
> 
> 赞同：4
> 
> 时间：2013-02-18T20:16:05.533
> 
> 标签：javascript, css, printing, web

在**Intranet**的 Web 应用程序中，我有一个网页必须由用户用合法 (8 1/2" x 14") 纸打印。

有没有办法使用 CSS 或 JavaScript 告诉浏览器请求（或优化）此纸张大小？如果没有，是否可以至少更改此特定网页的默认打印机设置，以便用户不必手动指定 Legal Paper？

提前感谢您的友好回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:18:17.513

这不能用标准的 CSS 或 JavaScript 来完成。你*也许*可以用 ActiveX 做到这一点，但我不能肯定地说，即使那样它也只能在 IE 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:56:51.930

如果这不能通过 CSS/JS 实现，另一种方法是从 HTML 动态生成合法大小的 PDF。有很多 HTML 到 PDF 转换器，最好的开源选项之一是[mPDF](http://www.mpdf1.com/mpdf/index.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:48:53.647

你可以试试 CSS，看看它是否适合你。它似乎适用于我的一些打印机，但不是全部。

```
@media print {
    body {
    width:816px;
    height:1344px;
    } 
```

# mysql - SQL 多个 GROUP BY

> ID：14944565
> 
> 赞同：2
> 
> 时间：2013-02-18T20:16:31.837
> 
> 标签：mysql, sql

我无法弄清楚 mysql 查询以从该表“ **timeEntry** ”中提取我想要的数据：

```
hours     creationDate    userId    clientId    projectId    taskId
20        2012-02-18      1         1           1            1
40        2012-02-18      1         1           1            1
30        2012-02-21      2         1           1            1
20        2012-02-22      2         1           1            2
30        2012-02-22      2         1           1            2
80        2012-02-23      1         2           2            2
10        2012-02-23      3         2           2            2
15        2012-02-23      1         2           2            3
40        2012-02-23      1         2           4            1 
```

我想在给定的时间段内将这种结果作为另一个表、csv/excel 文件或 php 数组（其中 totalHours 是 userId 的小时数之和），比如说（在 2012-02- 01 和 2012 年 2 月 25 日）：

```
clientId    projectId    taskId    userId    totalHours
1           1            1         1         60
                                   2         30
                         2         2         50 
2           2            2         1         80 
                                   3         10
                         3         1         15
            4            1         1         40 
```

我想我必须使用多个分组，我尝试过类似的方法：

```
SELECT clientId, projectId, taskId, userId, sum(hours)
FROM `timeEntry`
WHERE date_creation >= "2012-02-01"
AND date_creation <= "2012-02-25"
GROUP BY  clientId, projectId, taskId, userId; 
```

但是没有用...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:23:10.643

在Group by之前需要去哪里。

如果您想在分组之前按日期过滤，请使用您拥有但在分组依据之前移动的 where 子句。

如果您想过滤整个组或过滤掉整个组，请使用有：

```
...
Group by ...
Having max(date) <= someValue and min(date) >= someValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:26:52.970

```
SELECT clientId, projectId, taskId, userId    sum(Hours) total_hours 
FROM timeEntry 
GROUP BY clientID, ProjectID, TaskID, userID; 
```

您可以使用它`[with Rollup][1]`来生成子聚合。如果你想

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:34:22.327

这是一个简单的解决方案。您需要按所有必要字段分组

```
SELECT
  t.clientId,
  t.projectId,
  t.taskId,
  t.userId,
  SUM(t.hours) AS Total
FROM test AS t
GROUP BY t.creationDate , t.userId , t.clientId , t.projectId , t.taskId 
```

[小提琴演示](http://sqlfiddle.com/#!2/dc072/1)

输出：

```
clientId    projectId   taskId  userId   Total
____________________________________________________________

    1           1           1       1       60
    1           1           1       2       30
    1           1           2       2       50
    2           2           2       1       80
    2           2           3       1       15
    2           4           1       1       40
    2           2           2       3       10 
```

# xml - 使用 XSLT 时如何正确使用 XML 属性

> ID：14944569
> 
> 赞同：0
> 
> 时间：2013-02-18T20:16:46.977
> 
> 标签：xml, xslt, xpath

我制作了一个 XML 文件，示例如下：

```
 <flight flightid="1">
<flightno>EK98</flightno>
<callsign>UAE98</callsign>
<airline>Emirates Airline</airline>
<altitude height="feet">41000 feet</altitude>
<speed ratio="mph">564 mph</speed>
<plane planeid="1">
  <name>Airbus 330</name>
  <speed>567 mph</speed>
  <wingspan>199 ft 11 in</wingspan>
  <length>301 ft 7 in</length>
  <registereddate>07-06-10</registereddate>
</plane>
<route>
  <routename>Fiumicino-Dubai</routename>
  <course bearing="degrees">154 degrees</course>
  <distance unit="miles">2697 miles</distance>
  <duration>PT5H30M</duration>
  <from>
    <iatacode>FCO</iatacode>
    <airport>Fiumicino</airport>
    <country>Italy</country>
    <city>Rome</city>
    <latitude>41.8044</latitude>
    <longitude>12.2508</longitude>
    <yahoowoeid>715520</yahoowoeid>
  </from>
  <to>
    <iatacode>DXB</iatacode>
    <airport>Dubai Intl</airport>
    <country>UAE</country>
    <city>Dubai</city>
    <latitude>25.2528</latitude>
    <longitude>55.3644</longitude>
    <yahoowoeid>1940345</yahoowoeid>
  </to>
</route>
</flight> 
```

在距离元素中，您可以看到英里的单位：

```
<distance unit="miles">2697 miles</distance> 
```

在我写英里的文本中，我觉得属性点是为了让我可以使用它并输出属性值和距离值？这是我的 XSL 示例，其中使用了距离以及我尝试添加单位：

```
<tr>
  <td><xsl:attribute name="class">lside</xsl:attribute>Distance</td>
  <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. ="Fiumicino-Dubai"]/distance"/><xsl:value-of select="@unit" /></td>
</tr> 
```

当我问这个问题时，我最初的意图是使用属性的正确方法吗，这就是属性存在的原因吗，以便创建一个始终相同的全局类型的说测量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:24:04.897

属性本质上是 XML 文档中元素-值对的一种简短形式。因此`<distance unit="miles">2697 miles</distance>`与编写以下内容相同：

```
<distance>
    <unit>
        <value>miles</value>
    </unit>
    <value>2697</value>
</distance> 
```

是的，您在上述 XML 中正确使用了 element 属性。您可以选择任何您希望的方式来形成您的 XML 文档——并因此相应地提取此类信息。

将以下评论中的答案转移到答案中：

要使用 XPath 访问具有特定属性的元素的值，请使用以下内容进行区分：

**"** /flights/flight/route[routename/.="Fiumicino-Dubai"]/distance/@unit=@miles

# c# - 在项目文件结构中包含引用

> ID：14944570
> 
> 赞同：0
> 
> 时间：2013-02-18T20:16:48.510
> 
> 标签：c#, git, visual-studio-2012

抱歉，这里有点无聊的问题...在 Google 和 MS 帮助文档上花了一个小时，我的头似乎在错误的地方，我想不通。

我在 Visual Studio 2012 中设置了一个 C# 项目，它引用了我自己的硬盘驱动器上的一些 .dll（具体来说是 NetOffice .dll，用于 Excel 互操作）。我一直在通过右键单击我的引用文件夹来添加它们，转到添加引用，然后转到浏览以查找文件。那时它们被包括在内，一切都按我的预期工作。

共享项目时出现问题。我正在使用 Git 来保持我自己和几个团队成员之间的项目协调。我将运行我的提交并推动它，然后让我的队友做他的拉动。一切都正确显示在他的计算机上，但是当我们打开项目时，它告诉我 NetOffice .dll 丢失了。

我猜这是因为文件仅在我的计算机上本地链接，但我无法弄清楚，对于我的生活，如何使 .dll 存在于文件结构中，以便它们与项目一起旅行当我推它时。

我们也使用了一些 NuGet 包，它们在转移后似乎工作得很好。我还进入了 NetOffice 的 .dll 属性并将“复制本地”设置为`true`，但它仍然不包括在内。

我想要的只是能够链接引用，然后将整个内容（包括 dll）发送给我的队友，我做错了什么？我想我只想在项目结构中包含 .dll，但是......我只是不明白一些东西。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:30:26.050

1 在文件系统中创建与解决方案文件处于同一级别的文件夹。
2 将外部 dll 复制到该文件夹​​。
3 添加解决方案文件夹。
4 使用添加现有项将每个 dll 添加到解决方案文件夹
5 在解决方案中引用 Dll

第 3 步和第 4 步并不是真正必要的，但它们有助于使事情井井有条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:33:14.090

尽管在 git 存储库中包含二进制文件不是一个好习惯，但这样做可以解决您的问题。

快速修复可能是`lib`在存储库中的合理位置创建目录（我不是 C# 开发人员，但 Gama Felix 的建议似乎是正确的）。

然后提交这些文件夹并推送到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:59:36.023

假设您的源代码管理根文件夹名为**SourceRoot**
，而您的解决方案文件位于 名为**JaySolutionFolder****的**
文件*夹*
下。 将此 dll 引用从 SharedDlls 添加到您的项目中。 提交这个文件夹 现在你的队友必须得到 JaySolutionFolder 和 SharedDlls 来编译源代码。 稍后此 SharedDlls 可能是构建过程的目标目录（使用[TFS](http://en.wikipedia.org/wiki/Team_Foundation_Server) Bulid 、 [NANT](http://nant.sourceforge.net/)等工具） 这将是一种最大限度地减少基于团队的开发问题的方法。 ***在发布和软件安装中，您可以使用*安装程序*或*软件包构建器*，如[installshield](http://www.installshield.com/)或[Visual Studio Setup Package](http://support.microsoft.com/kb/307353)或 ... 来解决外部 dll 问题，
这有帮助。***

# c# - 正则表达式包含额外字符

> ID：14944572
> 
> 赞同：0
> 
> 时间：2013-02-18T20:16:57.543
> 
> 标签：c#, regex

希望这真的是一个简单的问题，但我有以下数据串，见下文：

```
*frac {7frac {1} {2}&nbsp;+ 8} {frac {3} {4} +3} = 4 
```

想要返回以下

```
frac {1} {2}
frac {3} {4} 
```

但我得到以下内容：

```
7frac {1} {2}    
{frac {3} {4} 
```

我现在的表达是：

```
[^\\*]frac\s{(.*?)}\s*{(.*?)} 
```

如何删除额外的起始字符？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:18:28.017

看起来您正在尝试`[^\\*]`排除潜在匹配以“*”为前缀的匹配。它可以工作，但它在匹配中包含前缀。您可以使用[否定的lookbehind](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#zerowidth_negative_lookbehind_assertion) ( `(?<!\*)`) 来完成相同的事情，而无需在匹配中包含前缀。

```
(?<![*\\])frac\s{(.*?)}\s*{(.*?)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:18:55.990

最简单的方法是在表达式的开头不包含额外的位。你真的需要字符串的开头吗？在我看来不像。所以只需使用： `frac\s{(.*?)}\s*{(.*?)}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:22:12.553

您可以删除第一个`[^\\*]`. 表达式应该只有：

```
frac\s{(.*?)}\s*{(.*?)} 
```

# android - 想要复制 SQL 数据库信息并粘贴到新的活动中

> ID：14944575
> 
> 赞同：0
> 
> 时间：2013-02-18T20:17:16.707
> 
> 标签：android, sql, copy-paste, duplicate-data

我有两个活动。向用户显示特定条目的数据库信息，然后他可以从那里选择编辑该条目。

我想添加复制现有数据并使用旧数据开始新条目的功能，这样您就不必再次输入所有相同的信息。

我试过只使用 SharedPrefs 但一无所获。希望这里有人可以阐明正确的编码礼仪。

我会尽力在我的描述中非常详细

这是开始一个全新条目的代码......

```
 public boolean onOptionsItemSelected(MenuItem item) 
{
  Intent addContact = new Intent(CrList.this, CrAETune.class);
  startActivity(addContact);
  return super.onOptionsItemSelected(item);
} 
```

然后这个类是你编辑新条目的地方，这是我用来保存它的代码......

```
 private void saveContact() 
       {
          CrDbCon dbConnector = new CrDbCon(this);

          if (getIntent().getExtras() == null)
          {
              dbConnector.insertContact(
                      caret.getText().toString(),//1
                      lapet.getText().toString(),
                      trket.getText().toString()); 
```

这是您查看条目的类，随后可以编辑但需要能够将其复制到新条目中......

```
 case R.id.editItem:
            Intent addEditContact =
               new Intent(this, CrAETune.class);

            addEditContact.putExtra(CrList.ROW_IID, rowid);
            addEditContact.putExtra("car", car.getText());
            addEditContact.putExtra("lap", lap.getText());
  startActivity(addEditContact); 
            return true; 
```

如果这还不够信息，请在评论中告诉我......我在这里很迷茫......不知道该怎么做才能得到我想要的结果。提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:32:34.310

好吧，我认为最好的方法是将联系人 ID 传递给您的 addContact 活动。然后使用该 id 填充，加载所有用户数据并运行它，并将其保存为新项目。（例如`dbconnection.addContact(..,..,contact,stuff..);`）

这将允许该人对联系人进行他们想要的任何更改，或者他们无法更改任何内容。

# c - 混淆 dll 的安全性

> ID：14944579
> 
> 赞同：2
> 
> 时间：2013-02-18T20:17:26.187
> 
> 标签：c, security, dll

我有一个功能未知的严重混淆的本机 win32 dll，它似乎没有从其他 dll 调用任何函数。我的问题是，理论上该代码是否能够修改其代码以造成任何伤害。子问题： - 动态加载的 dll 的代码部分是默认只读还是可写？- 如果代码不使用任何其他 dll，它仍然能够执行需要系统 dll 中的一些代码的操作吗？如果默认没有加载加载dll的函数，它如何加载另一个dll并找到一个函数？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T20:20:01.477

> 此代码是否能够修改其代码以造成任何伤害。

是的。事实上，它甚至可能在不需要修改自身的情况下造成伤害。

> 动态加载的 dll 的代码部分是默认只读还是可写？

默认情况下，DLL 能够自行修改。他们需要打电话`VirtualProtect`才能这样做，但这是完全可能的。

> 如果代码不使用任何其他 dll，它仍然能够执行需要系统 dll 中的某些代码的操作吗？

DLL 可以加载任何系统 DLL 并调用它选择的任何函数。

> 如果默认没有加载加载dll的函数，它如何加载另一个dll并找到一个函数？

通过调用`LoadLibrary`和`GetProcAddress`。如果 DLL 真的什么都不导入，那么获取`GetProcAddress`. 但并非不可能。如果 Windows 能够做到这一点，那么 DLL 肯定也能做到。它可以做的一件事是读取加载到每个进程中的 kernel32 DLL 的内存内容。它可以解析 PE 导出表并使用它来查找`GetProcAddress`.

# php - json_encode 返回 null

> ID：14944587
> 
> 赞同：0
> 
> 时间：2013-02-18T20:17:48.527
> 
> 标签：php, mysql, json

```
echo json_encode(array(utf8_encode("success"))); 
```

该代码返回null，我正在尝试调试一个项目并希望它返回一个post变量，但它甚至不适用于字符串

继承人完整代码： http: [//www.bludevelopment.com/php/getdata.txt](http://www.bludevelopment.com/php/getdata.txt)

问题出在uploadinstalldata 函数中。该应用程序为每个功能单独调用它。

任何帮助深表感谢！

```
function uploadInstallData(){

if (isset($_POST["Timestamp"]) && isset($_POST["PMINo"]) && isset($_POST["GPS"])){
//$result = array(utf8_encode('value', 'success'));

if ($_POST['cmd'] == "uploaddata"){

$con = mysql_connect("localhost","bludevel_PMI","password1");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("bludevel_PMIForm", $con);

$sql="INSERT INTO JobData (startTime, PMINo, Address, BeforePhoto, ExtraPhoto1,                    ExtraPhoto2, ExtraPhoto3, AbletoInstall, InstallProblem, BBoxStatus,
NewLocation, BBoxPhoto, Occupied, BasementFinished, BuildingType, ServiceSize,     ServiceType, HousepipeSize, HousepipeType, SSControlValve, NewMeter,
NewMeterSize, NewTransmitter, MIULocation, MeterInstallType, MtrLocated, MtrDirection1,   MtrSideof1, MtrDistance, MtrDirection2, MtrSideof2, AccessNotes,
BldgWidth, BldgDepth, Review, StreetValve, HouseValve, AuthorizedWork, InspectorsName,   NewStreetValve, AddPiping, Installedby, AfterPhoto, AfterPhoto2,
CustomerIncentive, ConfirmSignal, InstallNotes, EndTime, GPS)
     VALUES
           ('".$_POST[Timestamp]."',
            '".$_POST[PMINo]."',
        '".$_POST[Address]."',
            '".$_POST[BeforePhoto]."',
            '".$_POST[ExtraPhoto1]."',
            '".$_POST[ExtraPhoto2]."',
        '".$_POST[ExtraPhoto3]."',
        '".$_POST[AbletoInstall]."',
        '".$_POST[InstallProblem]."',
        '".$_POST[BBoxStatus]."',
        '".$_POST[NewLocation]."',
        '".$_POST[BBoxPhoto]."',
        '".$_POST[Occupied]."',
        '".$_POST[BasementFinished]."',
        '".$_POST[BuildingType]."',
        '".$_POST[ServiceSize]."',
        '".$_POST[ServiceType]."',
        '".$_POST[HousepipeSize]."',
        '".$_POST[HousepipeType]."',
        '".$_POST[SSControlValve]."',
        '".$_POST[NewMeter]."',
        '".$_POST[NewMeterSize]."',
        '".$_POST[NewTransmitter]."',
        '".$_POST[MIULocation]."',
        '".$_POST[MeterInstallType]."',
        '".$_POST[MtrLocated]."',
        '".$_POST[MtrDirection1]."',
        '".$_POST[MtrSideof1]."',
        '".$_POST[MtrDistance]."',
        '".$_POST[MtrDirection2]."',
        '".$_POST[MtrSideof2]."',
        '".$_POST[AccessNotes]."',
        '".$_POST[BldgWidth]."',
        '".$_POST[BldgDepth]."',
        '".$_POST[Review]."',
        '".$_POST[StreetValve]."',
        '".$_POST[HouseValve]."',
        '".$_POST[AuthorizedWork]."',
        '".$_POST[InspectorsName]."',
        '".$_POST[NewStreetValve]."',
        '".$_POST[AddPiping]."',
        '".$_POST[Installedby]."',
        '".$_POST[AfterPhoto]."',
        '".$_POST[AfterPhoto2]."',
        '".$_POST[CustomerIncentive]."',
        '".$_POST[ConfirmSignal]."',
        '".$_POST[InstallNotes]."',
        '".$_POST[EndTime]."',
        '".$_POST[GPS]."')";

echo json_encode(array(utf8_encode("success")));
return true;
$res = mysql_query($sql);
if (!res)
  {
  die('Error: ' . mysql_error());
  }

if (!$mysql->error) {
}

mysql_close($con);
}
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:14:49.053

正如我所提到的，您不应该将[`ext/mysql`](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)扩展用于新代码。直到从互联网上所有那些古老的 PHP 教程中清除它之前，我们不会看到人们结束“为什么我的代码不再工作”，因为使用它会`E_DEPRECATED`在 PHP 5.5 中抛出，并且它将在以后完全删除版本。

这使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)扩展，带有[准备好的查询](http://php.net/manual/en/mysqli.prepare.php)（您也可以使用[PDO](http://php.net/pdo)）。

```
$db = new mysqli($dbip, $dbuser, $dbpass, $dbname);

if ($query = $db->prepare("INSERT INTO table_name (x, y) values (?, ?)")) {
    $query->bind_param("ss", $_POST["x"], $_POST["y"]); // s = string, i = int
    $query->execute();
} else {
    echo json_encode(array("error" => "malformed query"));
    return false;
    // in PHP, false or null both signify an error in a non-boolean context
}
echo json_encode(array("success" => "query attempted"));
return true; 
```

当然，您不想像我在这里那样盲目地假设查询是成功的（因此“尝试”）。

您的 JSON 实际上似乎并没有失败，但最好为数组中的值提供关联键。此外，`utf8_encode`ing 数组给出`null`. 看到这个：

```
json_encode(array("query attempted")); // ["success"]
json_encode(array("success" => "more info")); // {"success":"more info"}
json_encode(utf8_encode(array("success" => "more info"))); // null 
```

这样做是更好的做法，并且可以帮助调试复杂的 json，因为它可以返回许多不同的东西。回答您的问题的“空”部分几乎就是这样。

此外，`ISO-8859-1`(aka `latin1`) 是 Unicode 的子集（与 ASCII 一样）；它将干净地编码为 JSON。但是，您应该`utf8_encode`明确地保留在 JSON 中的任何内容（例如用户输入）。

* * *

我第一次回答时错过了另一件重要的事情（我不敢相信我错过了这个）：

```
. $_POST[NewLocation] . 
```

这不是正确的 PHP。它可能会根据 PHP 配置的严格程度而起作用，但数组中的键被引用为字符串，而不是不被引用为常量。`Undefined T_CONSTANT NewLocation; 'NewLocation' assumed`这可以并且将在错误日志 ( )中引发错误。

使用`$_POST["NewLocation"]`（单引号或双引号都可以，但请记住它们在 PHP 中的含义不同）

# objective-c - 具有 UICollectionView 的 selectItemAtIndexPath 的数组

> ID：14944590
> 
> 赞同：1
> 
> 时间：2013-02-18T20:18:01.870
> 
> 标签：objective-c, uicollectionview

我正在尝试以编程方式选择 UICollection 视图中的单元格。我是 Obj-C 的新手，我不太确定如何使用 selectItemAtIndexPath 属性。我可以抓取用户之前选择的图像数组。它只是一个与命名图像相对应的数字数组。但我不确定如何将这些信息与 selectItemAtIndexPath 一起使用。

我找了一些人使用的例子

```
- (void)selectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UICollectionViewScrollPosition)scrollPosition 
```

但我不确定如何将它与我的 UICollectionView 一起使用，这样我就可以在视图加载时选择正确的单元格，从而突出显示。我有多项选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:27:12.167

您应该调用`selectItemAtIndexPath:`要突出显示的每个单元格，如下所示：

```
[self.collectionView selectItemAtIndexPath:path animated:NO scrollPosition:UICollectionViewScrollPositionNone] 
```

请注意，对于一项（并且只有一项！），您可能希望将动画属性设置为`YES`并提供滚动位置（仅一项，因为否则您将进行*大量* 不必要的动画调用）。

您首先需要获取要选择的单元格的索引路径。索引路径由两个数字组成：单元格所在的部分和该*部分*内的单元格的*行号*（或顺序，如果您的集合视图没有行）。

如果您将用户选择的单元格的索引路径存储在一个数组中，那么您可以迭代。否则，您需要使用`UICollectionView`诸如`indexPathForCell`.

# javascript - 让ajax获取html或获取JSON并让javascript创建html更有效吗

> ID：14944595
> 
> 赞同：2
> 
> 时间：2013-02-18T20:18:20.180
> 
> 标签：javascript, jquery, ajax, performance

标题说明了一切，但基本上我使用 ajax 来获取信息，我不知道我是否应该让 PHP 创建 HTML，然后将其返回给客户端，然后 javascript 将其插入，或者我是否应该拥有服务器通过 JSON 发送所有信息并让 javascript (jQuery) 创建包含它的所有 html。

哪个效率更高？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:22:55.900

我会说最好只提供 JSON 数据。为什么？

好吧，也许，您想将不同类型的客户端连接到您的数据服务。

也许您创建了一个移动应用程序，它需要相同的数据，但希望以不同的方式显示。

如果您还提供 HTML 标记，那么现在您的移动应用程序必须从 HTML 结构中解析出它想要的数据，而不是立即处理数据。

在效率尺度上，这取决于你认为什么是**有效**的。

例如，从带宽的角度来看，只发送 JSON 会很有效。但是，从目标客户端的处理角度来看，简单地给它一个要显示的 HTML 字符串会更有效。

但是，如果您正在考虑让不同的客户端访问相同的数据，那么您希望创建一个为 JSON 提供服务的单个数据接口（在您的情况下），并允许客户端决定如何呈现该数据。

**关注点分离。**

# html - HTML 表单发送未选中的复选框

> ID：14944601
> 
> 赞同：0
> 
> 时间：2013-02-18T20:18:30.113
> 
> 标签：html, django

我需要发送一个很长的表格，里面有很多复选框。它们按区域分组，如下所示：

```
<fieldset>
    <legend>Whatever1</legend>
    <div class="checkbox-list">
        <label class="checkbox inline"><input type="checkbox" name="Hobbies" value="Arts"> Arts</label>
        <label class="checkbox inline"><input type="checkbox" name="Hobbies" value="Bars"> Bars</label>
        <label class="checkbox inline"><input type="checkbox" name="Hobbies" value="Books"> Books</label>
        (more items)
    </div>
</fieldset>
<fieldset>
    <legend>Whatever2</legend>
    <div class="checkbox-list">
        <label class="checkbox inline"><input type="checkbox" name="Interests" value="Architecture"> Architecture</label>
        <label class="checkbox inline"><input type="checkbox" name="Interests" value="Audio"> Audio/vídeo</label>
        <label class="checkbox inline"><input type="checkbox" name="Interests" value="Business"> Business</label>
        (more items)            
    </div>
</fieldset> 
```

表格要长得多，但你明白了。

使用`name="Hobbies" value="Arts"`我的 django 后端接收分组在一个`Hobbies`数组中的所有复选框，这非常方便，但我也需要知道未选中的复选框。我知道[隐藏输入技巧](https://stackoverflow.com/a/1992745/1212067)，但这对我没有用，因为我使用该`value`字段作为复选框分组的一部分。

关于我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:25:56.747

好吧，我想你已经知道了，基本上没有办法询问浏览器哪些框未被选中。责怪 HTML 表单的发明者...

以下是一些不会破坏您的分组逻辑的简单方法：

*   重新生成您在服务器端显示的复选框列表。无论如何，这在很多情况下都是可取的，因为这意味着您不相信返回的数据与您显示的完全相同。（考虑一下如果我使用像 Firebug 这样的调试工具来删除您的一个复选框，或者添加一个新的复选框会发生什么......）
*   为每个复选框包括具有*相应*名称的隐藏输入 - “Interests_All”、“Hobbies_All”等 - 这样您就有了两个数据数组，一个只包括选中的项目，一个包括显示的所有内容。
*   使用单选按钮而不是复选框。是的，它们的显示方式不同，但它们可以具有您想要提交是/否值的功能，而不仅仅是添加或不添加到数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:27:07.767

您可以添加一个隐藏输入字段，并在提交表单时，使用[jQuery](http://jquery.com/)使用包含未选中复选框值的数组填充隐藏输入的值：

```
$("form").on("submit", function(e) {
  e.preventDefault();

  // Create an array of unchecked Hobbies
  var uncheckedValues = [];
  $(this).find("input[name='Hobbies']:not(:checked)").each(function() {
    uncheckedValues.push(this.value);
  });

  // Set the uncheckedValues array as hidden input value
  $("#your-hidden-input").val(uncheckedValues);
  alert($("#your-hidden-input").val());

  // Handle the form submission
  handleFormSubmit();
}); 
```

见[演示](http://jsfiddle.net/zaknotzak/WGsur/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:36:44.763

我已经解决了。这个想法在 IMSoP 的回答中。这是我的解决方案，也许它可以帮助某人：

```
<fieldset>
    <legend>Whatever1</legend>
    <div class="checkbox-list">
        <input type="hidden" name="Hobbies_Arts">
        <label class="checkbox inline"><input type="checkbox" name="Hobbies" value="Arts"> Arts</label>
        <input type="hidden" name="Hobbies_Bars">
        <label class="checkbox inline"><input type="checkbox" name="Hobbies" value="Bars"> Bars</label>
        <input type="hidden" name="Hobbies_Books">
        <label class="checkbox inline"><input type="checkbox" name="Hobbies" value="Books"> Books</label>
        (more items)
    </div>
</fieldset> 
```

这样，在 django 端处理列表就很容易了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:31:55.653

如何为后端的每个复选框设置一个默认的 false 值。如果浏览器已经传递了一个值，那么您可以将该值更改为 true。

# php - 来自数据库行的 PHP 变量

> ID：14944603
> 
> 赞同：0
> 
> 时间：2013-02-18T20:18:36.937
> 
> 标签：php, sql, database, variables

我正在尝试从只有一行和一列的数据库表创建一个 PHP 变量。所以基本上，我正在尝试使用数据库在多个页面中传递信息。这可能吗？我有一个名为的表`name`，其上的一列也称为`name`. 我只有一行，我想选择那个唯一字段的值并为其分配一个变量。我该怎么做呢？谢谢！

编辑：我试过了：

```
$name = mysql_query("SELECT * FROM name ORDER BY RAND() LIMIT 0,1");

var_dump($name); 
```

但它返回`null`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:23:00.737

```
$result = mysql_query("SELECT * FROM lv1 ORDER BY RAND() LIMIT 0,1"); //You get only 1 row

$name = ($result && mysqli_num_rows($result) == 1) ? mysql_fetch_assoc($result) : null ;

var_dump($name) ; 
```

# symfony - Symfony2 安全上下文看不到 FOSUserBundle 组。为什么？

> ID：14944605
> 
> 赞同：1
> 
> 时间：2013-02-18T20:18:38.963
> 
> 标签：symfony, fosuserbundle

我创建了用户和组实体。之后，我创建了名为 admin 的用户，并为该用户创建了组，并将 ROLE_CMS 分配给了一个新组。

但是，当我尝试检查用户的角色时，我到了那里：

```
$this->getUser()->getRoles(); // array('ROLE_CMS', 'ROLE_USER');
$this->get('security.context')->isGranted('ROLE_CMS'); // false
$this->get('security.context')->isGranted('ROLE_USER'); // true 
```

**编辑：**解决。我正在重新登录系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:58:57.493

安全组件未链接到任何数据库。具有用户/组的持久层在授权过程中不起任何作用。

这个问题应该可以帮助您进一步了解这个问题。本质是一样的。

[具有自定义用户提供者实体的递归角色](https://stackoverflow.com/questions/14937436/recursive-roles-with-custom-user-provider-entity/14938808#comment20965504_14938808)

# xpages - Xpage: Date validation does not give any validation message

> ID：14944610
> 
> 赞同：1
> 
> 时间：2013-02-18T20:18:46.297
> 
> 标签：xpages

I tried a simple date validation, but this "does nothing": I can enter any date I like.

```
<xp:inputText
    value="#{Auftrag.MF_GebDatum_1}" id="MF_GebDatum_11"
    style="width:255px">

    <xp:this.converter>
    <xp:convertDateTime
         type="date">
    </xp:convertDateTime>
    </xp:this.converter>
    <xp:this.validators>
    <xp:validateDateTimeRange
        minimum="1900-01-01T00:00:00"
     message="Please enter a correct date of birth"
     maximum="2100-01-01T00:00:00">
  </xp:validateDateTimeRange>
  </xp:this.validators></xp:inputText> 
```

it runs on a german linux server, so I enter dates like 01.01.1811

Thanks for any help, Uwe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:03:25.593

This example is from the Mastering XPages book. Please try this and see if that helps you:

```
<xp:inputText id="inputText3">
    <xp:this.validators>
        <xp:validateDateTimeRange message="Earliest date is 1 Jan 2011" 
             minimum="#{javascript:new Date(2011,0,1,0,0,0,0)}">
        </xp:validateDateTimeRange>
    </xp:this.validators>
    <xp:dateTimeHelper id="dateTimeHelper1"></xp:dateTimeHelper>
    <xp:this.converter>
        <xp:convertDateTime type="date"></xp:convertDateTime>
    </xp:this.converter>
</xp:inputText> 
```

# api - 在正常路线旁边使用 Swagger for Express

> ID：14944617
> 
> 赞同：5
> 
> 时间：2013-02-18T20:19:18.363
> 
> 标签：api, node.js, rest, express, swagger

我有兴趣使用类似 swagger-node-express 的东西来为我正在处理的项目构建 API。但是，应用程序的某些部分不是基于 api 的（而是提供 HTML）。有人对我如何在正常路线上使用 Swagger 有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:25:50.180

您只需要确保您的路线不会与 Swagger 路线冲突，并且您的其他路线将照常处理。一种简单的方法是让 Swagger 生活在子路径下。查看有关该分数的文档：

[https://github.com/wordnik/swagger-node-express](https://github.com/wordnik/swagger-node-express)

```
var app = express();
var subpath = express();

app.use(express.bodyParser());
app.use("/v1", subpath);

swagger.setAppHandler(subpath); 
```

否则，您只需注意确保您在应用程序中使用的其他 URL 都不会与 Swagger URL 冲突，并且您应该能够正常定义路由和处理程序。例如，您可以使用 Swagger 在下面提供文档，`http://localhost:8002/api-docs.json/pet`但`http://localhost:8002/foo/`只需以正常方式添加路线即可做其他事情：

```
app.get(/foo/, function(req, res, next) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello Foo\n');
}) 
```

使用子路径配置可能是最干净的方法，但您也可以自己跟踪路由并确保 Swagger 路由与应用程序其余部分的路由不冲突。

# svn - 以增量方式查看 SVN 日志历史记录？

> ID：14944622
> 
> 赞同：0
> 
> 时间：2013-02-18T20:19:31.680
> 
> 标签：svn, version-control

是否有任何工具可以逐步显示文件的 SVN 日志历史记录，就像我单击一个按钮并显示下一个版本并添加了新行，这样我就可以从头到尾浏览整个文件的历史记录按钮点击？我知道有像 Tortoise 之类的软件可以进行合并差异，但我想要一个更加图形化和交互式的基于 GUI 的工具，它需要更少的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:30:42.240

像[Sventon](http://svn.sventon.org/repos/gc/diff/trunk/sventon-webapp/base/pom.xml?revision=HEAD&entries=%2ftrunk%2fsventon-webapp%2fbase%2fpom.xml%402047&entries=%2ftrunk%2fsventon-webapp%2fbase%2fpom.xml%402045&style=sidebyside)这样的 Web 浏览器怎么样？这是查看 Sventon 项目本身的 Sventon Web 浏览器的链接。（哇！那是元！）。

这显示了修订版 2047 到修订版 2045 的并排视图。有一个标记为*Diff to previous*的按钮。单击该按钮会将修订版 2045 与之前的修订版 2044 进行比较。再次单击它将显示`pom.xml`该文件从修订版 2044 到 2043 之间的差异。

这是做你想做的吗？Sventon 易于设置：您安装 Java 和 Tomcat，并将`sventon.war`文件添加到`webapps`Tomcat 的目录中。启动 Tomcat，Sventon 启动并运行。您可以在与您的 repo 相同的机器上运行 Sventon，但这不是必需的。如果您愿意，您甚至可以在本地桌面上运行它。

# python - Python/xrld 读取行和列

> ID：14944623
> 
> 赞同：3
> 
> 时间：2013-02-18T20:19:39.903
> 
> 标签：python, xlrd

我有具有特定结构的 exel 文件。第一行是标题，第二行是名称，最后一行是值。我只需要获取标题和值，如果 Excel 文件只有 3 行，这并不难，但它可以是 100 行和列，我只需要获取标题和值，而不是任何名称和空行

```
 1          2        3           
1    GroupOne     Empty      Empty
2      Jonh       Elena     Mike    
3        45         100      500 
4        Empty      Empty     Empty
5   GroupTwo       Empty     Empty
6   Lisa           Ken       Lui
7   100             300      400 
```

等等。

如您所见，两个标题之间始终是一个空行。最后它会是这样的：

```
GroupOne
45 100 500
第二组
100 300 400

```

先感谢您。我会很感激一些帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T20:53:27.113

我认为这个[网站](http://www.youlikeprogramming.com/2012/03/examples-reading-excel-xls-documents-using-pythons-xlrd/)有一个可以帮助你的例子：

```
import xlrd
workbook = xlrd.open_workbook('my_workbook.xls')
worksheet = workbook.sheet_by_name('Sheet1')
num_rows = worksheet.nrows - 1
num_cells = worksheet.ncols - 1
curr_row = -1
while curr_row < num_rows:
  curr_row += 1
  row = worksheet.row(curr_row)
  print 'Row:', curr_row
  curr_cell = -1
  while curr_cell < num_cells:
    curr_cell += 1
    # Cell Types: 0=Empty, 1=Text, 2=Number, 3=Date, 4=Boolean, 5=Error, 6=Blank
    cell_type = worksheet.cell_type(curr_row, curr_cell)
    cell_value = worksheet.cell_value(curr_row, curr_cell)
    print ' ', cell_type, ':', cell_value 
```

该函数`cell_type`应该可以帮助您构建一个 if 语句`if worksheet.cell_type != 0`，从而跳过空单元格。

# python - 将部分列表传递给 Python 函数

> ID：14944629
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:20:15.747
> 
> 标签：python

我正在编写一个 Python 程序来读取文本文件并提取一些信息。我试图找到三个项目，一个实数和两个列表。该脚本将文本文件的行存储为一个列表`inLines`。通读脚本使用的行时`for curLine in inLines:`，然后在所有行中搜索特定键。一旦我找到搜索键，我想将剩余部分传递给`inLines`一个函数，再读几行，然后在函数停止的那一行返回到主脚本。

这是我想要发生的事情的小图（以注释形式给出的代码说明）

```
line of text that doesn't matter    #Read by main, nothing interesting happens
line of text that doesn't matter    #Read by main, nothing interesting happens
search key A                        #Read by main, all following lines passed to function A
line that matters                   #Read by function A, stores in object
line that matters                   #Read by function A, stores in object

line that matters                   #Read by function A, stores in object

search key B                        #Read by function A, return to main, all following lines passed to function B

line that matters                   #Read by function B, stores in object

search key C                        #Read by function B, return to main, all following lines passed to function C
line that matters                   #Red by function C, stores in object 
```

所以每个搜索键都会告诉程序要在哪个函数中（并且不同的键可以按任何顺序排列）。当脚本找到键时，它将所有进一步的行传递给正确的函数，并且每当一个函数找到一个搜索键时，它就会中断，并将所有进一步的行传递回 main（然后将相同的行传递给适当的函数）

很抱歉这本书的问题，我只是在多年的 FORTRAN 之后学习 Python，所以如果有人能想到更好的方法来解决这个问题，我愿意接受建议。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:55:12.493

这个小脚本很*接近*你想要的。它丢弃在指定搜索函数之前出现的行。您应该能够使其适应您的需求。

```
import sys

def search_func_a(l):
    """
    Called for things that follow `search key A`
    """
    print 'A: %s' % l

def search_func_b(l):
    """
    Called for things that follow `search key B`
    """
    print 'B: %s' % l

def search_key_func(l):
    """
    Returns the associated "search function" for each search string.
    """
    if 'search key A' in l:
        return search_func_a
    if 'search key B' in l:
        return search_func_b
    return None

def main():
    # Start with a default handler.  This changes as `search key` lines are
    # found.
    handler = lambda _: 0 

    for line in open('test.txt'):
        # search_key_func returns None for non `search key` lines.  In that
        # case, continue to use the last `search function` found.
        search_func = search_key_func(line) 
        if search_func:
            # If a search line is found, don't pass it into the search func.
            handler = search_func
            continue
        handler(line)

if __name__ == '__main__':
    sys.exit(main()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:30:10.037

做这样的事情有问题吗？

```
inA = inB = inC = False
for line in file:
  if keyA(line):
    inA = True
    inB = inC = False
  elif keyB(line):
    inB = True
    inA = inC = False
  elif keyC(line):
    inC = True
    inA = inB = False
  if inA:
    processA(line)
  if inB:
    processB(line)
  if inC:
    processC(line) 
```

你问是否有更快的方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:37:03.093

```
#!/usr/bin/env python3
# encoding: utf-8

import sys

def find(haystack, needle, start_line = 0):
    for i, line in enumerate(haystack[start_line:]):
        if line == needle:
            return i + 1
    raise("%s not found." % needle)

def main(argv = None):
    if argv is None:
        argv = sys.argv

    with open(argv[1], 'r') as f:
        text = f.read().splittext()

    find(text, "c", find(text, "b", find(text, "a")))

if __name__ == "__main__":
    sys.exit(main()) 
```

我不确定您的意思是“存储在对象中”，但代码很容易修改以适合您的目的。

# asp.net - 如何在 c# for ASP.NET 中针对 sql 数据库检查非空查询字符串？

> ID：14944639
> 
> 赞同：1
> 
> 时间：2013-02-18T20:20:55.317
> 
> 标签：asp.net, c#-4.0

我有一个网页，它根据该数据库条目的参考号提取有关特定数据库条目的信息。此参考编号不是 SQL ID 编号，而是我们在进入时分配的编号。

这个参考号以查询字符串的形式传递给页面，只要参考号确实存在于数据库中，一切都很好。但是，如果参考号不存在，我的详细信息页面就会出现空白：没有例外或任何事情。

在这种情况下，我不确定共享我的代码的相关性如何，但我会谨慎行事：

```
protected void Page_Load(object sender, EventArgs e)
{
    using (KidsEntities detailEntities = new KidsEntities())
    {
        string imgPath = ConfigurationManager.AppSettings["imagePath"];
        string KidNum = Request.QueryString["ChildNum"].ToString();

        var KidSpecific = from Kid in detailEntities.Kids
                          where Kid.Number == KidNum
                          ... ;

        DescRepeater.DataSource = KidSpecific.ToList();
        DescRepeater.DataBind();
    }
} 
```

我可以进行重定向，以防某些小丑试图在不通过主目录的情况下调出我的详细信息页面（这会调出一个空查询字符串），但如果使用正确，我的查询字符串将永远不会为空或空。我要准备的是，如果有人使用在添加书签时有效的查询字符串为我的详细信息页面添加书签，但随后被删除。

在 var "KidSpecific" 触发之前，如何检查以确保数据库中有与查询字符串匹配的参考号？如果没有这样的参考编号，我需要能够使用 Response.Redirect 来放置错误页面，而不是现在显示的空白屏幕。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:26:15.057

您可以像这样使用 string.IsNullOrEmpty 检查 quety 字符串：

```
protected void Page_Load(object sender, EventArgs e)
{
    using (KidsEntities detailEntities = new KidsEntities())
    {
        string imgPath = ConfigurationManager.AppSettings["imagePath"];
        string KidNum = Request.QueryString["ChildNum"].ToString();

        if ( string.IsNullOrEmpty ( KidNum ) ) {
            Response.Redirect ( "WhatEverURI" );
        } else {
            var KidSpecific = from Kid in detailEntities.Kids
                      where Kid.Number == KidNum
                      ... ;

            DescRepeater.DataSource = KidSpecific.ToList();
            DescRepeater.DataBind();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:26:38.583

为什么需要在查询触发之前进行检查？无论哪种方式，您都必须检查数据库中的条目。如果您的查询为空，请尝试重定向：

```
protected void Page_Load(object sender, EventArgs e)
{
    using (KidsEntities detailEntities = new KidsEntities())
    {
        string imgPath = ConfigurationManager.AppSettings["imagePath"];
        string KidNum = Request.QueryString["ChildNum"].ToString();

        var KidSpecific = from Kid in detailEntities.Kids
                          where Kid.Number == KidNum
                          ... ;

        var KidSpecificList = KidSpecific.ToList();

        //Redirect if there are no results!
        if (KidSpecificList.Count() < 1)
            Response.Redirect("RedirectPage.aspx");

        DescRepeater.DataSource = KidSpecificList;
        DescRepeater.DataBind();
    }
} 
```

# linux - 生成核心转储

> ID：14944644
> 
> 赞同：2
> 
> 时间：2013-02-18T20:21:13.123
> 
> 标签：linux, debian, go

我的 Go 程序有时会崩溃。

我尝试了一些方法来为该程序生成核心转储：

1.  在系统上定义 ulimit ，我都尝试了`ulimit -c unlimited`，`ulimit -c 10000`以防万一。启动我的恐慌程序后，我没有得到核心转储。

2.  我还在`recover()`我的程序中添加了支持，并添加了代码以在出现恐慌的情况下记录到 syslog，但我在 syslog 中一无所获。

我现在没有想法了。

我一定忽略了一些东西，但我没有找到什么，任何帮助将不胜感激。

谢谢 ！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T07:47:12.443

请注意，当满足某个集合的条件时*，操作系统*会生成核心转储。这些条件是相当低级的——比如试图访问未映射的内存或试图执行 CPU 不知道的操作码等。在 POSIX 操作系统（如 Linux）下，当一个进程执行这些操作时，会发送一个适当的[信号](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)到它，其中一些，如果不由进程处理，则具有生成核心转储的*默认操作*，如果不通过设置[某个限制](http://linux.die.net/man/2/setrlimit)来禁止，则由操作系统完成。

现在观察到这种机制在可能的最低级别（机器代码）上处理进程，但 Go 编译器生成的二进制文件比 C 编译器（或汇编程序）生成的二进制文件更高，这意味着进程中产生了某些错误Go 编译器由 Go 运行时而不是操作系统处理。例如，由 C 编译器生成的进程中的典型 NULL 指针取消引用通常会导致向进程发送 SIGSEGV 信号，这通常会导致尝试转储进程的核心并终止它。相反，当这种情况发生在由 Go 编译器编译的进程中时，Go 运行时会启动*并出现恐慌，*从而为调试目的生成一个很好的堆栈跟踪。

考虑到这些事实，我会尝试这样做：

1.  将您的程序包装在一个 shell 脚本中，该脚本首先放宽核心转储的限制（但见下文），然后运行您的程序，并将其标准错误流重定向到文件（或通过管道传输到`logger`二进制文件等）。
2.  用户可以调整的限制有一个层次结构：有软限制和硬限制——参见[这个](https://stackoverflow.com/q/3107476/720999)和[这个](https://serverfault.com/q/265155/118848)以获得解释。因此，请尝试检查您的系统是否将核心转储大小设置为 0 作为硬限制，因为这可以解释为什么您尝试提高此限制没有效果。
3.  至少在我的 Debian 系统上，当一个程序由于 SIGSEGV 死机时，这个事实会被内核记录下来，并且在 syslog 日志文件中可见，因此请尝试使用 grep 来获取提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:32:29.847

1.  首先，请确保处理所有错误。

2.  对于核心转储，您可以参考[在 linux 中生成核心转储](https://stackoverflow.com/questions/17965/generate-a-core-dump-in-linux/17994)

3.  当程序崩溃时，您可以使用[主管重新启动程序。](http://supervisord.org/)

# javascript - shadowbox.js 无法正常工作，只能正常打开一半

> ID：14944645
> 
> 赞同：0
> 
> 时间：2013-02-18T20:21:14.350
> 
> 标签：javascript, popup, shadowbox

我正在使用 shadowbox.js 代码在我的网站上弹出打开的产品详细信息。它大约有一半的时间工作得很好。当它无法正常运行时，它会在同一窗口中打开链接页面。例如，如果您单击顶部“Boombastic/Boombastic Plus”或“Team Pack Diamondista”的任何图像框，它应该会在阴影框中弹出一个窗口。 [http://www.teamsportsplanet.com/sharedfiles/softballhome.php?sport=softball](http://www.teamsportsplanet.com/sharedfiles/softballhome.php?sport=softball)

`<img src="images/LandingPage_Softball_TSP_teampack_01.jpg" /></a><a href="team-packs/softball-team-uniform-packages_2.html" title="Softball Team Packs" target="_new" rel="shadowbox" alt="Order Team Softball Uniform Packages">`

他们应该在一个影子框中弹出，里面有这个页面： [http ://www.teamsportsplanet.com/sharedfiles/team-packs/softball-team-uniform-packages_2.html](http://www.teamsportsplanet.com/sharedfiles/team-packs/softball-team-uniform-packages_2.html)

我不知道这是怎么回事，我想知道它是否只是 JavaScript 代码本身的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:32:35.193

如果没有初始化 shadowbox 的 js 部分，很难判断发生了什么，但是......

...由于该框加载正常但不是您期望的网址，请确保

```
content: 
```

属性正在获取正确的 url 作为它的值。

根据[他们的文档](http://www.shadowbox-js.com/api.html#buildobject)：

```
**content** The value of the link's href attribute 
```

先检查一下。

# php - PHP：从 SQL 表中获取变量

> ID：14944648
> 
> 赞同：0
> 
> 时间：2013-02-18T20:21:31.087
> 
> 标签：php, mysql, sql

我的数据库中有多个相同的表（但内容不同）和一个为每个表名分配一个 Id 的表。我想首先显示最新的表格，用户可以使用两个按钮在它们之间导航：上一个和下一个。问题是我不知道为什么这不起作用：

```
$sql = mysql_query("SELECT MAX('id') AS 'nr' FROM 'listatabele'");
$row = mysql_fetch_array($sql);
$idTabel = $row['nr']; 
```

我得到的错误是资源是预期的，给定的布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:16:08.283

您可以尝试将表名从“listatabele”更改为“listatabele”

# visual-studio-2012 - cin.get() 在 Visual Studio 下导致访问冲突错误

> ID：14944649
> 
> 赞同：1
> 
> 时间：2013-02-18T20:21:41.250
> 
> 标签：visual-studio-2012, access-violation

我的 Visual Studio 2013 控制台应用程序在退出前突然开始导致访问冲突错误。弹出错误窗口告诉我“访问冲突执行位置 xxx”，它在 VC 库函数 _callthreadstartex 中中断。如果我注释掉我添加的行：

> cout << "\n回车完成\n";
> 
> std::cin.get();

有用。此外，当我从命令窗口而不是从 Visual Studio 调试环境运行它时，它可以工作。（我正在使用的项目文件不包含发布配置——只有调试版本。）

该程序的其余部分是来自一个大型开源包的示例，此处无法列出。操作系统是 Windows 7，新安装在旧计算机上。

虽然我知道这种类型的错误通常是神秘的和间歇性的，并且可能与 cin.get() 根本没有任何关系，但我可以排除任何事情吗？由于我添加的唯一内容是标准库调用，因此我不太可能出现编程错误。我正在使用的包非常复杂和脆弱，但我不知道从哪里开始使用我提供的错误信息来追踪问题。这可能是不需要代码修复的操作系统设置问题吗？这是一个超出我专业知识的线程问题吗？

# python - 如何部署代码节点

> ID：14944652
> 
> 赞同：0
> 
> 时间：2013-02-18T20:21:59.637
> 
> 标签：python, django

大家好，

因此，我希望在嵌套在页面中的网站上部署 codenode ' [http://codenode.org/ '。](http://codenode.org/)对于我的生活，我只是无法遵循文档并弄清楚我应该做什么。

它似乎只谈论从终端本地运行的东西，你应该如何设置它的视图、模型和模板？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:47:55.630

他们只是告诉你通过 pip 和 virtualenv 安装它。在对 Django 和 Python 非常友好的主机（例如[WebFaction](http://webfaction.com/) ）上，这并不是很难做到的。您始终可以将必要的文件放在需要的位置，以便通过 FTP 等将它们添加到您的 Python 路径中。

# playframework - 使用 with-source=true 时使用 sbteclipse 下载 javadoc 失败

> ID：14944657
> 
> 赞同：2
> 
> 时间：2013-02-18T20:22:20.660
> 
> 标签：playframework, sbt, sbteclipse

当我调用`sbt`并键入`eclipse with-source=true`时，我得到了一堆失败的 javadoc 下载：

```
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: eu.medsea.mimeutil#mime-util;2.1.3!mime-util.jar(src)
[warn]  :: eu.medsea.mimeutil#mime-util;2.1.3!mime-util.jar(doc)
[warn]  :: com.typesafe#config;0.3.1!config.jar(doc)
[warn]  :: com.typesafe#config;0.3.1!config.jar(src)
[warn]  :: commons-httpclient#commons-httpclient;3.1!commons-httpclient.jar(doc)
[warn]  :: commons-logging#commons-logging;1.1.1!commons-logging.jar(src)
[warn]  :: commons-logging#commons-logging;1.1.1!commons-logging.jar(doc)
[warn]  :: commons-io#commons-io;1.4!commons-io.jar(src)
[warn]  :: commons-io#commons-io;1.4!commons-io.jar(doc)
[warn]  :: org.codehaus.woodstox#wstx-asl;3.2.7!wstx-asl.jar(doc)
[warn]  :: io.netty#netty;3.4.4.Final!netty.jar(doc)
[warn]  :: org.apache.httpcomponents#httpclient;4.2.3!httpclient.jar(doc)
[warn]  :: org.apache.httpcomponents#httpcore;4.2.2!httpcore.jar(doc)
[warn]  :: commons-codec#commons-codec;1.6!commons-codec.jar(doc)
[warn]  :: commons-codec#commons-codec;1.6!commons-codec.jar(src)
[warn]  :: org.apache.httpcomponents#httpmime;4.2.3!httpmime.jar(doc)
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

看起来公共 Maven 存储库和 Sonatype 的存储库中都缺少 javadoc jar 文件。

为什么这些相当流行的软件包缺少这么多 javadoc 文件？

哪个存储库可以保证有很多这些 javadoc 包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T08:36:25.263

在播放控制台中，键入“update-classifiers”以检索源代码和 javadoc，或“eclipsify with-source=true”以将它们包含在生成的 eclipse 项目中。（不包括引号） 它在[另一个答案](https://stackoverflow.com/a/17127380)
中提到

# java - JDBC 查询中的分页

> ID：14944659
> 
> 赞同：2
> 
> 时间：2013-02-18T20:22:35.843
> 
> 标签：java, sql, jdbc, orm

我想知道如果有人不使用分页的标准做法是`ORM`什么？
使用 eg`limit`作为 SQL 查询的一部分？
开箱即用的ORM也解决了这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:27:35.440

是的，标准做法是使用一些限制子句来限制结果（不幸的是，这是非标准的，并且每个数据库都不同）。

[`setFirstResult()`](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setFirstResult%28int%29)JPA 使用and方法本地支持这一点[`setMaxResults()`](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setMaxResults%28int%29)，这些方法被转换为 SQL 中的适当限制子句。

# spring - spring context:property-placeholder 仅加载名称非常具体的文件 jdbc.properties

> ID：14944660
> 
> 赞同：0
> 
> 时间：2013-02-18T20:22:38.733
> 
> 标签：spring, applicationcontext

我正在使用 spring 3.0 并尝试加载属性文件：

```
<context:property-placeholder location="classpath:myFile.properties" />
...
<property name="userName" value="${myVariable}" /> 
```

...

使用`xpto.properties`, 当我尝试使用此文件中的任何参数时，如果显示错误：

> org.springframework.beans.factory.BeanDefinitionStoreException：在类路径资源 [myApplicationContext.xml] 中定义的名称为“myBean”的 bean 定义无效：无法解析占位符“myVariable”...

奇怪的是，如果我使用具有非常特定名称的文件，`jdbc.properties`它就可以工作！我在我的项目中搜索了任何参考或过滤器，`jdbc.properties`但一无所获。

附言。一件重要的事情：属性文件在类路径中，错误是不加载文件，这是当我尝试使用该文件中的任何变量时（除非文件名是 jdbc）

谁能给我一盏灯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:27:53.157

它现在起作用了！该项目依赖于另一个父项目，并且占位符已在该父项目中定义（如 jdbc.properties）。所以我只需要改变父母。我之前没有找到，因为当我尝试搜索时，这个父项目在eclipse中被关闭了。谢谢大家的帮助

# oop - 在 VBA 中使用类模块作为命名空间有什么陷阱吗

> ID：14944666
> 
> 赞同：4
> 
> 时间：2013-02-18T20:23:08.723
> 
> 标签：oop, vba

VBA 不支持名称空间（Java 人员的包）。其他语言的命名空间有助于避免歧义和补充工具，如成员名称的自动完成。

在 VBA 中模拟命名空间的一种方法是在 Class 模块中声明事实上的静态方法，然后在标准模块中声明该类的默认实例。这甚至是[一些 Microsoft 文档中遵循的模式](http://msdn.microsoft.com/en-us/library/ff195443%28v=office.14%29.aspx)。您也可以使用这种方法来嵌套伪命名空间。

我的同行们，您是否预计使用这种方法会出现任何技术问题？

这不是民意调查问题；我不是在问正统或美学吸引力。我在问，“这会引起问题吗？如果会，会怎样？”

例子：

```
' Class module called clsIOText
Public Function ReadAllText(ByVal FileName As String) As String
    With New FileSystemObject
        With .OpenTextFile(FileName, ForReading)
            ReadAllText = .ReadAll
            .Close
        End With
    End With
End Function

' Class module call clsIO
Public Text As New clsIOText

' In a standard module somewhere
Public IO As New clsIO

' Usage like a namespace
' 1\. Fully qualified
Debug.Print IO.Text.ReadAllText("C:\temp\example.txt")

' 2\. With a namespace alias-like object
Dim Text As clsIOText
Text = IO.Text
Debug.Print Text.ReadAllText("C:\temp\example.txt") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:49:20.240

暂时没有其他答案...

我自己想出的陷阱是更多的限制和陷阱：

1.  您需要将每个类的 Instancing 属性设置为“2 - PublicNotCreatable”。否则，如果项目被编译然后从另一个项目中引用，成员将不会出现在对象浏览器中（尽管它们仍然可用）
2.  您不能将类模块中的外部 API 声明声明为 Public。为了将它们暴露给类之外的代码，您必须先执行`Declare`as private ，然后再创建一个公共包装器方法。
3.  这仍然不允许您在命名空间中组织类型——只能是静态方法的集合。
4.  从查询和宏中，您只能调用标准模块中定义的全局方法。因此，要使用包装在命名空间类中的任何函数，您必须在标准模块中定义包装器，重新扁平化层次结构。

# java - 将 mySQL 和 MS access DB 用于只有一个数据表的 java 应用程序

> ID：14944670
> 
> 赞同：0
> 
> 时间：2013-02-18T20:23:21.050
> 
> 标签：java, mysql, swing, ms-access, netbeans

我正在开发一个简单的桌面应用程序，该应用程序使用 java swing 与 NetBeans IDE 进行界面设计。假设系统只有一个表，其中包含将通过接口访问的字段。

我正在考虑使用 mySQL 或 microsoft access DB 创建数据库 我熟悉 mysql 但对 microsoft access DB 很陌生

我担心的是，与在 MS access 中创建单个表并将 swing 接口连接到数据库相比，使用 mySQL 数据库创建一个表会有点浪费。

如果有人可以比较这两个数据库以获得适合我情况的最佳选择，我会很高兴

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:48:27.327

您考虑使用 MySQL（客户端服务器数据库）或 MS Access 嵌入式桌面数据库。

我认为您应该首先考虑客户端服务器数据库与嵌入式数据库。您的应用程序将数据存储在集中式数据库服务器上是否有意义？您的应用程序是否会在不同的客户端上运行许多实例，并且它们都会访问相同的数据？还是每个应用程序实例都只能访问其私有数据？

如果您决定使用客户端服务器数据库，那么您可以使用 MySQL。

如果您认为嵌入式数据库就足够了，那么您应该知道，Java 和 MS Access 并不以最佳合作而闻名。[在这里](https://stackoverflow.com/questions/14221796/microsoft-access-database-to-java/14223891#14223891)查看我的帖子。

有一些全 Java 嵌入式数据库，如[Apache Derby](http://db.apache.org/derby/)、[H2](http://www.h2database.com/)或[HSQLDB](http://hsqldb.org/)，它们非常适合桌面应用程序。您应该为您的项目考虑其中之一。

# jquery - Google 搜索结果样式的弹出窗口

> ID：14944676
> 
> 赞同：0
> 
> 时间：2013-02-18T20:23:39.380
> 
> 标签：jquery, css

我需要制作一个右栏弹出窗口，其中包含有关单个搜索结果的附加信息。就像在 Google 的搜索结果中单击双箭头以显示更多信息一样。我不需要网络预览，只需输入我自己的附加信息。

```
<div class="left_col">
<div class="search_result">
  <div class="result_details">
    <div class="result_details_button"> This is the button to make the popout >> </div>
  </div>
  <p class="small">Info about item</p>
  <div class="popout">Pop out data is here</div>
</div>
</div>

<div class="right_col">
  <div>Map results</div>
</div> 
```

如您所见，已经有一个右列。当您单击 >> 时，右列应切换到弹出 div 中的信息。如果再次单击>>，则会返回到 right_col div 中的默认数据。

[http://jsfiddle.net/thepriebe/XPgdx/](http://jsfiddle.net/thepriebe/XPgdx/)

我可以稍后处理样式和效果。大多数情况下只需要获得这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:40:18.223

使用 JQuery 时，该功能看起来像这样......

假设 .small 和 .popout 在 CSS 中设置为 display: none

```
$(document).ready(function()
{
    $(".result_details_button").click(function()
    {
        //Parent >> .result_details
        $(this).parent().next(".small").css("display", "block");
        $(this).parent().next(".popout").css("display", "block");
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:32:14.737

所以我终于想出了如何做我想做的事。

这是一个小提琴：http: [//jsfiddle.net/XPgdx/](http://jsfiddle.net/XPgdx/)

这是jQuery：

```
$j(".result_details_button").click(function () {
  var msg = "There are no sites associated with this service.";
  var popout = $j("#search_results_details");
  $j(".result_details_button").not(this).parent().removeClass("active_highlight").parent().removeClass("active_details");
  if($j("#search_results_details").is(":visible") && $j(this).parent().hasClass("active_highlight"))
  {
    popout.html(msg).html($j(this).parent().toggleClass("active_highlight").parent().toggleClass("active_details").find($j(".sites")).html()).hide();
  }
  else
  {
    popout.html(msg).html($j(this).parent().toggleClass("active_highlight").parent().toggleClass("active_details").find($j(".sites")).html()).show();
  };
}); 
```

和 HTML：

```
<div class="col_left">
  <div class="search_result">
    <div class="result_details">
      <div class="result_details_button"> Sites >></div>
    </div>
    <p>This is a search result</p>
    <div class="sites">Info here</div>
  </div>
</div>
<div class="col_right">Map data here</div>
<div id="search_results_details">This is the popout div where the sites will populate.</div> 
```

对于笑容，CSS：

```
.search_result, #paginationControl { padding: 15px 0; border-top: 1px solid #ddd; position: relative;}
.search_result .service { font-size: 18px; font-weight: bold; }
.search_result .service .small { margin-left: 5px; }
.search_result .description { margin: 2px 0; font-size: 12px; color: #222; margin-right: 75px; }
.search_result .description b { color: #000; }
.search_result .small_icon { width: 10px; height: 10px; margin-right: 2px; }

.sites { font-size: 12px; display: none; }
.site_name { font-size: 14px; font-weight: bold; }
.site_block { float:left; border: 2px solid #ccc; border-radius: 4px; margin: 5px 10px 5px 0; padding: 5px; width: auto; background-color: #fff; height: auto; overflow-y: auto; }
.site_name { font-size: 14px; font-weight: bold; }

.result_details {
  background: none repeat scroll 0 0 transparent;
  bottom: 0;
  cursor: default;
  height: auto;
  margin: 0;
  min-height: 40px;
  padding-left: 9px;
  padding-right: 4px;
  position: absolute;
  right: 0px;
  top: -2px;
  width: 65px;
}
.result_details_button {
  height: 13px;
  margin-left: 6px;
  margin-top: -7px;
  opacity: 0.3;
  position: absolute;
  top: 50%;
}
.result_details_button:hover {
  opacity: 0.6;
}

#search_results_details {
  background: #efefef;
  border-left: solid 1px #ddd;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  height: auto;
  margin-left: 67%;
  padding: 10px;
  padding-top: 20px;
  display: none;
  box-shadow: 0px 0px 10px 5;
}
.active_details { z-index: 999; }
.active_highlight { background-color: #efefef; } 
```

# c# - 返回 FileInfo HttpResult 时写入标头时出错

> ID：14944680
> 
> 赞同：5
> 
> 时间：2013-02-18T20:23:55.760
> 
> 标签：c#, servicestack

我在 Mono 3.x 上，在 Mac OSX 上，我正在尝试使用 ServiceStack 返回一个静态文件。该代码（并且根据其他答案应该是）非常简单：

```
public class AirPlayService : Service
{
    public object Get(Movie request)
    {
        var fileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.UserProfile), "Movies", request.Name);

        var file = new FileInfo(fileName);
        return new HttpResult(file, asAttachment:false); 
    }
} 
```

Movie 对象是一个简单的 DTO。
当我的 Get() 被调用时，我在终端窗口中看到以下错误：

> 错误：处理请求时发生错误：[IOException] 写入失败，异常：写入失败信息：无法将错误写入响应：{0}，异常：发送标头后无法更改。错误：HttpListenerResponseWrapper 中的错误：写入失败，异常：写入失败

ServiceStack 是 3.9.35 版本；Mono JIT 编译器版本 3.0.3（master/39c48d5 Tue Jan 8 12:12:24 EST 2013）；.NET 4.5。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T16:24:09.867

我在我爸爸的电脑上遇到了同样的问题，它通过使用对我有用：

```
public class AirPlayService : Service
{
    public object Get(Movie request)
    {
        var fileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.UserProfile), ( "Movies", request.Name);

        var file = new FileInfo(fileName);
        return new HttpResult(file, asAttachment:false); 
```

# php - MySQL从过去的时钟小时中选择

> ID：14944681
> 
> 赞同：-5
> 
> 时间：2013-02-18T20:23:59.430
> 
> 标签：php, mysql, sql, database

我将如何从最后一个时钟小时中选择。例如，如果是 3:30，我将如何从 3 点钟开始选择？我知道如何在查询运行后的最后一个小时内执行此操作，但我不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:26:04.170

`WHERE`在你的条款 中试试这个：

```
 WHERE DATE(columnname) = DATE(CURRENT_TIMESTAMP)
   AND HOUR(columnname) = HOUR(CURRENT_TIMESTAMP) 
```

**参考**

*   [`HOUR()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_hour)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:05:33.920

为了获得最佳性能，您希望在裸列上使用谓词，而不是将列引用包装在函数中（如所选答案中所示）。

`mydatetimecol`要将返回的行限制为仅在当前时钟小时内具有值的行：

```
 WHERE mydatetimecol >= DATE_FORMAT(NOW(),'%Y-%m-%d %H:00:00') 
```

右侧的表达式是向下舍入到小时的当前日期时间值。（在此示例中，这是通过将当前日期时间格式化为分钟和秒部分的零来完成的。这不是唯一的方法，但这种方法比其他方法更容易阅读。）

请注意，无需将列引用包装在函数中。在谓词中使用裸列引用`mydatetimecol`使 MySQL 能够对`mydatetimecol`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:51:34.753

这是约翰康德答案的变体。它可能运行得更快，因为它不使用 where 子句中的函数。语法可能不正确，因为我不使用 mysql 并且正在使用 google 来查找语法。

```
where yourdatetimefield >= timestampadd(minute, 
, -minute(current_timestamp), current_timestamp) 
```

# java - 在 Java 中实例化 scala.Int

> ID：14944684
> 
> 赞同：2
> 
> 时间：2013-02-18T20:24:10.077
> 
> 标签：java, scala, playframework-2.0, scala-java-interop, securesocial

我正在为 Play 2 框架的[SecureSocial插件编写持久层。](https://github.com/jaliss/securesocial)[我在https://github.com/play-modules/modules.playframework.org/blob/master/app/models/ss/MPOOAuth2Info.java](https://github.com/play-modules/modules.playframework.org/blob/master/app/models/ss/MPOOAuth2Info.java)找到了一个示例：

```
package models.ss;

import models.AbstractModel;
import securesocial.core.java.OAuth2Info;
import javax.persistence.Entity;

@Entity
public class MPOOAuth2Info extends AbstractModel
{
    public String accessToken;

    public String tokenType;

    public Integer expiresIn;

    public String refreshToken;

    public MPOOAuth2Info()
    {
        // no-op
    }

    public MPOOAuth2Info(OAuth2Info oAuth2Info)
    {
        this.accessToken = oAuth2Info.accessToken;
        this.tokenType = oAuth2Info.tokenType;
        this.expiresIn = oAuth2Info.expiresIn;
        this.refreshToken = oAuth2Info.refreshToken;
    }

    public OAuth2Info toOAuth2Info()
    {
        OAuth2Info oAuth2Info = new OAuth2Info();

        oAuth2Info.accessToken = this.accessToken;
        oAuth2Info.tokenType = this.tokenType;
        oAuth2Info.expiresIn = this.expiresIn;
        oAuth2Info.refreshToken = this.refreshToken;

        return oAuth2Info;
    }
} 
```

但是 API 已更改，因此我无法使用`securesocial.core.java.OAuth2Info`. SecureSocial 是由 Scala 编写的，这个类是一个 Java 前端。所以我决定直接在哪里使用 Scala：

```
case class OAuth2Info(accessToken: String, tokenType: Option[String] = None,
                  expiresIn: Option[Int] = None, refreshToken: Option[String] = None) 
```

我的结果：

```
package models.security.securesocial;

import models.AbstractModel;
import scala.Option;
import securesocial.core.*;

import javax.persistence.Entity;

/**
 * Persistence wrapper for SecureSocial's {@link } class.
 *
 * @author Steve Chaloner (steve@objectify.be)
 */
@Entity
public class MPOOAuth2Info extends AbstractModel
{
    public String accessToken;

    public String tokenType;

    public Integer expiresIn;

    public String refreshToken;

    public MPOOAuth2Info(){
        // no-op
    }

    public MPOOAuth2Info(OAuth2Info oAuth2Info){
        this.accessToken = oAuth2Info.accessToken();
        this.tokenType = oAuth2Info.tokenType().get();
        this.expiresIn = scala.Int.unbox(oAuth2Info.expiresIn().get());
        this.refreshToken = oAuth2Info.refreshToken().get();
    }

    public OAuth2Info toOAuth2Info(){
        return new OAuth2Info(accessToken, Option.apply(tokenType), Option.apply(SOME_TRANSFORMATION(expiresIn)), Option.apply(refreshToken));
    }
} 
```

`scala.Int`但是我在类型转换方面遇到了问题`java.lang.Integer`。转换`scala.Int`为`java.lang.Integer`我使用`scala.Int.unbox()`的 . 是连接方式吗？而且我不知道如何转换`java.lang.Integer`为`scala.Int`：在我输入的代码中伪代码`SOME_TRANSFORMATION()`。这个 SOME_TRANSFORMATION 的正确实现是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:34:43.650

`scala.Int.unbox(new java.lang.Integer(3))`给`Int = 3`

`scala.Int.box(3)`给`Integer = 3`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T05:11:05.460

Scala 自动透明地装箱和拆箱。此外，`scala.Int`是一种虚构。`int`当存储在局部变量中、作为形式参数传递或存储在类中时，它是本机的（à la Java / JVM）。但是当它必须通过参数化/泛型类型的值进行交易时，它必须被装箱和拆箱。（有一个例外，当所讨论的类型参数是专门的，但这是另一回事。）

# json - 我在哪里可以获得要在 MongoDB 中使用的示例 JSON 数据

> ID：14944685
> 
> 赞同：6
> 
> 时间：2013-02-18T20:24:18.757
> 
> 标签：json, mongodb, sample-data

样本数据有哪些来源（最好是经过清理的 json）？预期用途是导入 MongoDB 以评估和演示应用程序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T20:40:53.260

看看这个[http://media.mongodb.org/zips.json](http://media.mongodb.org/zips.json)这是由 mongodb 提供的

# iphone - 在一个上下文中保留项目但核心数据在另一个上下文中找不到项目？

> ID：14944687
> 
> 赞同：0
> 
> 时间：2013-02-18T20:24:21.023
> 
> 标签：iphone, objective-c, multithreading, cocoa, core-data

在我的应用程序中，我有以下方法来检查下一个要显示的项目，

```
- (void)displayIfPossible:(NSNumber *)orderId {
    NSParameterAssert(orderId);
    NSLog(@"displayIfPossible orderId:%@", [orderId stringValue]);

    ItemStore *itemStore = [ItemStore sharedInstance];
    Item *currentItem = [itemStore getItemByOrderId:orderId];

    if (!currentItem) {
        NSLog(@"Fetching next(): currentItem doens't exist");
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [itemStore fetchItemsForFeed:^{
                // TODO FIXME figure out why there's infinite recursion here
                // TEMP FIX: run app once, fetch, stop run again.
                [self displayIfPossible:orderId];
            } withFailureBlock:^{
                [self updateStatus:@"Failed to fetch new items"];
            }];
        });
        return;
    }

    self.item = currentItem;
} 
```

如果 currentItem 不存在，则 fetchItems 将查询服务器并保存到核心数据中。当 fetchItems 完成时，它将执行其回调，该回调将再次为 displayIfPossible。

这是 fetchItems

```
- (void)fetchItems:(void (^)(void))callback
  withFailureBlock:(void (^)(void))failureBlock
       withRequestPath:(NSString *)path
            withStatus:(NSNumber *)status {
    APIClient *client = [APIClient sharedManager];
    NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:path parameters:nil];

    AFJSONRequestOperation *operation = \
    [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        // Create a new managed object context and set its persistent store coordinator
        // Note that this **must** be done here because this context belongs to another thread
        AppDelegate *theDelegate = [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext *localContext = [[NSManagedObjectContext alloc] init];
        [localContext setPersistentStoreCoordinator:[theDelegate persistentStoreCoordinator]];

        for (id itemJson in JSON) {
            Item *item = [[ItemStore sharedInstance] getItemByCid:NULL_TO_NIL([itemJson valueForKey:@"id"])];
            if (item == nil) {
                Item *newItem = [NSEntityDescription insertNewObjectForEntityForName:@"Item" \
                                                              inManagedObjectContext:localContext];
                newItem.cid = NULL_TO_NIL([itemJson valueForKey:@"id"]);
                newItem.title = NULL_TO_NIL([itemJson valueForKey:@"title"]);
                newItem.url = NULL_TO_NIL([itemJson valueForKey:@"url"]);
                newItem.image_url = NULL_TO_NIL([itemJson valueForKey:@"image_url"]);
                newItem.order_id = @([[self largestOrderId] intValue] + 1);
                newItem.status = status;

                NSError *error;
                if (![localContext save:&error]) {
                    NSLog(@"Error saving: %@", [error localizedDescription]);
                } else {
                    NSLog(@"fetchItems persisting item cid:%@ order_id:%@", newItem.cid, newItem.order_id);
                }
            }
        }

        if (callback != nil) {
            callback();
        }
    } failure:^(NSURLRequest *request , NSURLResponse *response , NSError *error , id JSON) {
        if (failureBlock) {
            failureBlock();
        }
        NSLog(@"[ItemStore fetchItems] failed. error:%@ response:%@ JSON:%@",
              [error localizedDescription], response, JSON);
    }];

    [operation start];
} 
```

所以我目前在这里看到无限递归：

```
2013-02-18 12:10:07.013 Giordano.iPhone[5946:c07] Unknown class Lik in Interface Builder file.
2013-02-18 12:10:07.040 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:07.041 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:07.483 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:07.484 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:07.885 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:07.886 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:08.325 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:08.326 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:08.762 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:08.763 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:09.169 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:09.170 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:09.614 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:09.615 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:10.116 Giordano.iPhone[5946:c07] displayIfPossible orderId:0
2013-02-18 12:10:10.116 Giordano.iPhone[5946:c07] Fetching next(): currentItem doens't exist
2013-02-18 12:10:10.654 Giordano.iPhone[5946:c07] displayIfPossible orderId:0 
```

我打开 sqlite 数据库，我可以看到项目确实已经插入到数据库中。

我知道多线程和 Core Data 可能很棘手，而且我认为我已经遵循了 Apple's concurrency with core data doc 概述的原则。

任何想法为什么 displayIfPossible 没有看到正确的东西？

**编辑**

getItemByOrderId 的代码

```
// Returns a newly generated managedObjectContext. Use it for cases without concurrency.

- (NSManagedObjectContext *)managedObjectContext {
    return [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
}

- (Item *)getItemByPredicate:(NSPredicate *)predicate {
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Item"
                                              inManagedObjectContext:[self managedObjectContext]];
    [request setEntity:entity];
    [request setResultType:NSManagedObjectResultType];
    [request setFetchLimit:1];

    NSSortDescriptor *d = [[NSSortDescriptor alloc] initWithKey:@"order_id" ascending:YES
                                                       selector:nil];
    [request setSortDescriptors:[NSArray arrayWithObject:d]];
    [request setPredicate:predicate];

    Item *ret = nil;
    NSError *error;
    NSArray *objects = [[self managedObjectContext] executeFetchRequest:request error:&error];
    if (objects == nil) {
        // handle the error
    } else {
        if ([objects count] > 0) {
            ret = (Item *)[objects objectAtIndex:0];
        } else if ([objects count] > 1) {
            [NSException raise:@"Duplicated results in core data" format:@"%@", predicate];
        }
    }
    return ret;
}

- (Item *)getItemByOrderId:(NSNumber *)orderId {
    NSParameterAssert(orderId);
    return [self getItemByPredicate:[NSPredicate predicateWithFormat:@"order_id = %@", orderId]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:29:23.727

上下文不知道其他上下文中的更改，除非它们是从子上下文推送到它的。在您的情况下，您应该从执行保存到持久存储和合并更改的上下文中收听`NSManagedObjectContextDidSaveNotification`。另一种方法是在您的 NSOperation 中生成一个子上下文，当 fetch 完成时，它会将更改推送到它的父级（用于显示项目的那个），但这完全取决于您并且取决于应用程序设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:00:29.930

我放弃了 MR，因为它太麻烦了。

# ruby-on-rails-3 - Rails 在其他控制器中呈现联系表单

> ID：14944694
> 
> 赞同：1
> 
> 时间：2013-02-18T20:24:53.157
> 
> 标签：ruby-on-rails-3, render, contact-form

我有两个控制器页面和联系人。页面显示数据库中的内容。联系是简单的联系表格，效果很好。现在我想将此联系表放在特定页面中。但我尝试渲染它，但仍然出现没有模型类等错误。

这是我的联系人控制器（控制器/contact_controller）：

```
class ContactController < ApplicationController

  def new
      @message = Message.new
    end

  def create
      @message = Message.new(params[:message])

      if @message.valid?
        NotificationMailer.new_message(@message).deliver
        redirect_to(root_path, :notice => "Sent.")
      else
        flash.now.alert = "Alert."
        render :new
      end
  end

end 
```

这是我的消息模型（models/message.rb）：

```
class Message

  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :name, :email, :subject, :body

  validates :name, :email, :subject, :body, :presence => true
  validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

end 
```

这是表格（views/contact/new.html.erb）：

```
<%= form_for @message, :url => contact_path do |form| %>
  <fieldset class="fields">
    <div class="field">
      <%= form.label :name %>
      <%= form.text_field :name %>
    </div>

    <div class="field">
      <%= form.label :email %>
      <%= form.text_field :email %>
    </div>
    <div class="field">
      <%= form.label :subject %>
      <%= form.text_field :subject %>
    </div>

    <div class="field">
      <%= form.label :body %>
      <%= form.text_area :body %>
    </div>
  </fieldset>

  <fieldset class="actions">
    <%= form.submit "Send" %>
  </fieldset>
<% end %> 
```

如何将此表单放入页面视图？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:46:02.150

我认为你应该使用部分。例如，您可以将表单放在名为“app/views/shared/_message_form.html.erb”的文件中，然后放在contact/new（和所有其他页面）中，而不是将表单放在contact/new中： `render 'shared/message_form'`

显然，您必须`@message`在每个控制器中设置哪些视图呈现此部分。也许您可以在 ApplicationController 中有一个方法，`set_message`并在需要时调用它。
简单示例：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def set_message
    @message = Message.new params[:message] || {}
  end
end 
```

然后你可以`set_message`在任何控制器中使用:)

# jmeter - 如何循环一个线程组直到另一个线程组完成

> ID：14944697
> 
> 赞同：2
> 
> 时间：2013-02-18T20:25:09.197
> 
> 标签：jmeter

我有一个线程组可以处理 X 个循环。我有 2 个其他线程组要循环，直到第一个线程组完成。

如何同步其他线程组以仅循环直到第一个线程组完成它的循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:49:05.290

It sounds like you will need to look at using IF Controller. This might work for you:

[http://jmeter.apache.org/usermanual/component_reference.html#If_Controller](http://jmeter.apache.org/usermanual/component_reference.html#If_Controller)

Or the While:

[http://jmeter.apache.org/usermanual/component_reference.html#While_Controller](http://jmeter.apache.org/usermanual/component_reference.html#While_Controller)

# javascript - 使用 JavaScript 访问框架的文档对象

> ID：14944699
> 
> 赞同：18
> 
> 时间：2013-02-18T20:25:12.470
> 
> 标签：javascript, html, dom, frame

我正在[这个页面](http://www.quackit.com/html/templates/frames/frames_example_1.html)上进行测试，但我不确定我错过了什么。

```
// Two frames on the page
> document.getElementsByTagName("frame").length
2

// Same domain, so no security restrictions
> document.getElementsByTagName("frame")[0].src
"http://www.quackit.com/html/templates/frames/menu_1.html"
> window.location.href
"http://www.quackit.com/html/templates/frames/frames_example_1.html"

// Can't access the document
> document.getElementsByTagName("frame")[0].document
undefined 
```

看起来这应该有效，那么问题是什么？它需要在 IE8 中工作，但我也在 Chrome 中进行测试（最新稳定版）。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-18T20:37:40.730

获取框架内容的全方位方法是这样的：

```
var theFrame = document.getElementsByTagName("frame")[0];
var theFrameDocument = theFrame.contentDocument || theFrame.contentWindow.document;
var button = theFrameDocument.getElementById("mybutton"); 
```

但是，可以`<frame>`通过使用其名称来获取 的文档，例如：

```
window.frames["frame_name"].document 
```

如果 HTML 是：

```
<frame name="frame_name">...</frame> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:32:13.367

你可以使用

```
parent.frame.location.href = ... 
```

其中 frame 是您要更改的框架的名称/ID。

问候马克

# asp.net - 没有缩小 javascripts 的请求

> ID：14944700
> 
> 赞同：0
> 
> 时间：2013-02-18T20:25:19.957
> 
> 标签：asp.net, asp.net-mvc-4, bundling-and-minification

MVC4 C#网站，在调试模式下运行，“BundleConfig”文件中的代码有：

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/bundles/scripts").Include(
                "~/Scripts/jquery-1.8.2.min.js", 
                "~/Scripts/jquery.simplemodal.js", 
                "~/Scripts/jquery-ui-1.9.2.custom.min.js", 
                "~/Scripts/jquery.validate.js", 
                "~/Scripts/jquery.validate.unobtrusive.min.js", 
                "~/Scripts/site.js", 
                "~/Scripts/jquery.watermark.js", 
                "~/Scripts/jquery.signalR-0.5.3.min.js" ,
                "~/Scripts/jquery.dataTables.js" 
```

在 web.config 中，`debug="true"`

我打开 firebug 并看到在“net -> js”选项卡部分，只调用不缩小 js。客户端未请求所有缩小 js 文件。

在我的布局中，我的代码是：

```
@Scripts.Render("~/bundles/scripts") 
```

当我从 nuget 安装“Microsoft.AspNet.Mvc.FixedDisplayModes.1.0.0”包后，问题就开始了......当我在发布模式下运行网站时一切正常。我没有不缩小 js 文件，我想继续在调试模式下工作。我该如何解决？为什么没有出现客户端缩小 js 的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:35:56.480

在调试模式下使用捆绑和缩小时，捆绑/缩小被禁用。

您可以通过添加`BundleTable.EnableOptimizations = true;`到您的`RegisterBundles`.

```
public static void RegisterBundles(BundleCollection bundles)
{
    //your bundle code
    BundleTable.EnableOptimizations = true;
} 
```

**更新：**看到你的评论，我似乎误解了你的问题。

当您处于调试模式时，**不**使用文件`BundleTable.EnableOptimizations = false`的版本。相反，将使用文件的**完整调试版本**。所以你的脚本文件夹应该有两个版本的文件：比如`.min`

 ****```
jquery-1.9.1.min.js 
jquery-1.9.1.js 
```

在调试模式下，`jquery-1.9.1.js`将被使用。在发布模式下，`jquery-1.9.1.min.js`将被使用。

如果您只有一个版本的文件，则只需从文件名中删除“.min”。****

# python - 防止错误消息？

> ID：14944701
> 
> 赞同：-2
> 
> 时间：2013-02-18T20:25:22.663
> 
> 标签：python, sqlite

我正在检查 SQLite 中的字段是否有客户预订 ID - 如果有，它将返回该行等。但如果他们没有，我会收到以下错误

```
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我知道这意味着什么，什么都没有等等。但我想知道是否有办法防止错误，而是在那里放一条消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:27:10.247

如果你知道如何处理它，你总是可以捕捉到错误：

```
try:
   do_something_that_raises_error()
except TypeError:
   print("database doesn't have correct info")
   sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:56:46.443

发现错误后，您还可以引发自定义错误而不是打印：

```
try:
    do_something_that_raises_error()
except TypeError:
    raise MyCustomError("My Custom Message") 
```

这是一个示例自定义错误定义：

```
class MyCustomError(Exception):
    def __init__(self, msg):
        Exception.__init__(self,msg)
        self.message = msg
    def __str__(self):
        return repr(self.message) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:27:31.260

看起来你正在做这样的事情：

```
if row['customer_booking_id'] is not None: 
```

而你`row`的`None`本身就是。你能发布你的代码吗？

# c# - 如何在没有 asp 成员资格的情况下进行完全自定义的身份验证/授权

> ID：14944702
> 
> 赞同：0
> 
> 时间：2013-02-18T20:25:25.150
> 
> 标签：c#, asp.net, asp.net-mvc, authentication, asp.net-membership

我不想学习如何为 asp mvc 进行完全自定义的身份验证/授权。
如此简单的操作：**注册/登录/注销/记住我**。
我不想再使用 asp 会员资格，但我在网上找不到任何关于如何制作这个的从头到尾的教程。
我有点困惑。如果我定制所有东西，我还需要使用`SetAuthCookie()`等等。
所以我不想定制`MembershipProvider`，而是做我自己的授权/身份验证。
我正在寻找的只是一些完整的资源（如果存在）？
我真的需要关于这个主题的帮助，所以我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:29:07.400

你不想这样做。

开发自己的成员资格课程的问题在于，99.999% 的时间您都不具备创建安全、可靠、健壮和可靠框架的安全知识。（另外 0.001% 的时间你是专家，被第三方雇用来做这件事。）

我知道 MembershipProvider 笨重、臃肿而且不像它应该的那样灵活。但它非常安全，比你能写的任何东西都要安全得多。不值得冒险……在开发自己的网站时，您可能会失去对网站、数据以及最重要的是客户数据的控制权。

坚持下去。否则你会后悔的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:40:58.113

我有同样的想法，如果你不是 100% 确定，@levibotelho 是不安全的。另一方面，您可以在[http://nugetmusthaves.com/Category/Security](http://nugetmusthaves.com/Category/Security)中找到许多项目， 例如：[http](http://altairiswebsecurity.codeplex.com/) ://altairiswebsecurity.codeplex.com/、https : [//github.com/kristofferahl/FluentSecurity](https://github.com/kristofferahl/FluentSecurity)等等。 .

可能是这个：[https](https://github.com/OdeToCode/Memflex) ://github.com/OdeToCode/Memflex brgds！。

更新：@1110 如果您想直接访问表格，我建议您使用 simplemembership 而不是旧的会员资格提供程序。[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and- asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。如果您需要在配置文件中使用客户字段而不是 blob 等等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T21:15:13.640

首先，关于 ASP.NET 成员资格和表单身份验证的速成课程。

直接来自提供商 ( [Microsoft](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx) )：

*“ASP.NET 成员身份为您提供了一种内置方式来验证和存储用户凭据。因此，ASP.NET 成员身份可以帮助您管理网站中的用户身份验证。您可以使用 ASP.NET 成员身份与 ASP.NET 表单身份验证一起使用ASP.NET 登录控件，以创建一个完整的用户身份验证系统。”*

请注意，您*“可以将 ASP.NET 成员资格与 ASP.NET 表单身份验证一起使用”*。它们是不同的元素。身份验证部分是你不想搞砸的，这是我认为 LeviBotelho （正确地）紧张的部分。但是您也可以在没有会员资格的情况下正确使用表单身份验证！

正如[Scott Mitchell 指出的那样](https://stackoverflow.com/a/3638694/855363)，在 ASP.NET 2.0 之前，我们甚至*没有* `Membership`. [他自己在 4guysfromrolla 上发表的文章](http://www.4guysfromrolla.com/articles/082703-1.aspx)（现在已经很老了）提供了一个基于角色的授权示例，结合了表单身份验证**而不**使用`Membership`. 这没有任何内在的不安全或风险。

但是，如果您*正在*冒险摆脱`Membership`模式/框架，那么接下来最重要的事情就是密码安全性。您的第一个诱惑可能是将用户密码以纯文本形式存储在数据库中。**不。**Troy Hunt 撰写了有关 Internet 安全的精彩文章，并且比我更好地解释了密码安全的来龙去脉。[这篇文章](http://www.troyhunt.com/2012/05/everything-you-ever-wanted-to-know.html)比您可能感兴趣的要详细得多（它主要是关于创建密码重置功能），但是密码存储的起点非常有效。

关于*“我正在寻找的只是一些完整的资源（如果存在）？”* . 你可能不会找到这样的文章。这是一个非常广泛的主题，充其量您会发现每篇文章都提供一些帮助您开发*自己的*解决方案的文章。

# php - 根据 IF 条件更改 JOOMLA 站点背景

> ID：14944709
> 
> 赞同：0
> 
> 时间：2013-02-18T20:25:51.770
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

几个小时以来，我一直在努力寻找解决方案...任何评论/指导将不胜感激！..谢谢...我创建了一个扩展，用于按类别列出不同的产品。我想要完成的是根据设置的类别更改整个网站的背景，例如：电子产品将是蓝色背景，时尚将是红色背景等......

我有几个问题： 1\. 类别的排序功能是动态的，（下拉列表/提交按钮）所以页面不会改变（只有它在模块中显示的内容会改变）所以我不能为不同的页面使用不同的模板, 2\. 我不能使用页面后缀来定义一个新的模板。

一个好的解决方案是一个 php 语句，例如：if ($categoryId == X) --> set_new_background，但是站点背景的类是在我正在处理的 php 文件之外设置的。此外，为 DIV 设置背景不会更改站点背景。

任何想法和帮助将不胜感激！谢谢！

举报此帖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:05:00.893

有几种方法可以解决您的问题

1）您可以为每个类别使用模板覆盖，在组件中加载不同的模板

2）您可以加载不同的css样式

```
$document =& JFactory::getDocument();
If ($cat==1){
 $document->addStyleSheet("/mybluetheme.css");
}
else
{
 $document->addStyleSheet("/myredtheme.css");
} 
```

[3）您可以使用自定义插件http://www.rockettheme.com/magazine/jan-2012/1342-creating-a-simple-macro-replacement-plug-in](http://www.rockettheme.com/magazine/jan-2012/1342-creating-a-simple-macro-replacement-plug-in)将特定类添加到文档正文

4）至少但不是最后你可以在你的身体中回显一个隐藏的 div 指定颜色

```
<?php 
if($category==1){
$color="#ffffee";
}
else{
$color="#eeeeee";
}
echo "<div class='hiddencolor' style='display:none'>".$color."</div>";
?> 
```

然后使用一些jquery代码

```
$(document).ready(function() {

        var mycolor = $(".hiddencolor").text();
        alert(mycolor);
        // change the body background css
        $("body").css("background", mycolor);
}); 
```

[http://jsfiddle.net/zWzvd/](http://jsfiddle.net/zWzvd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:59:54.690

请参考上面@Theodeore 的回答，相当完整；我要做的唯一补充是只在模板级别使用类，因此您可以在 css 中定义颜色并为每个类别设置类。

这将是最快的（您不需要查找表）：因此只需将以下 $catClass 添加到正文：

```
if ($option=='com_content' && $view=='category') 
    $catClass = ' cat'.JRequest::getVar('id'); 
```

在此之后，$catClass 将包含类似“cat16”的内容，您可以将其附加到您的

所以你可以在你的模板中插入上面的代码“

```
<body class="your classes <?php echo $catClass; ?>"> 
```

这将输出如下内容：

```
<body class="your classes cat16"> 
```

然后在**单个**css 中你将有规则：

```
body.cat16 {background-image:url(../image1.jpg);}
body.cat18 {background-image:url(../image2.jpg);} 
```

这比拥有单独的 css 文件要好，因为它为浏览器加载会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:10:00.397

您可以尝试这种编辑模板代码的方法。只需要让它充满活力。 [http://forum.joomla.org/viewtopic.php?p=2271520](http://forum.joomla.org/viewtopic.php?p=2271520)

或者

您可以将类别的颜色保存在表格中。在页面加载时查询它，并在返回值时使用它为站点的背景着色。基本上将代码放在模板中。

# xamarin.ios - 如何将 Monotouch.Dialog.Element 添加到 UIView.AddSubview

> ID：14944713
> 
> 赞同：0
> 
> 时间：2013-02-18T20:25:57.367
> 
> 标签：xamarin.ios, monotouch.dialog

简单来说，我想使用 UIView.AddSubview 将 Monotouch.Dialog.Element 添加到 UIView。我需要更改/创建什么才能使这成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:49:01.657

A`MonoTouch.Dialog.Element`基于 a `UITableViewCell`，而不是 a `UIView`。

因此，`Element`应该是 a 的一部分，`UITableView`不能简单地添加到 a`UIView`作为 a `SubView`。

如果你想要一个`UIView`类似于 的`Element`，你必须创建一个自定义视图，继承自`UIView`。在此视图中，您可以从您选择的内部创建您喜欢的`View`行为。`UITableViewCell``Element`

编辑：基于 MultiLineElement 的基本示例

```
public class MyView : UIView
{
  private string Caption { get; set; }          
  private string Text { get; set; }

  public View(string caption, string text) : base()
  {
    Opaque = true;
    BackgroundColor = UIColor.Clear;
    Update(caption, text);
  }

  public void Update(string caption, string text)
  {
    Caption = caption;
    Text = text;

    SetNeedsDisplay();
  }

  public override void Draw(RectangleF frame)
  {
    var bounds = Bounds;
    var captionFont = UIFont.BoldSystemFontOfSize(12f);
    var textFont = UIFont.SystemFontOfSize(10f);
    var width = Bounds.Width;

    if (string.IsNullOrWhiteSpace(Caption) == false)
    {
      // Caption, black
      UIColor.Black.SetColor();
      width = Bounds.Width / 2;
      var captionHeight = 
        StringSize(Caption, captionFont, width, UILineBreakMode.TailTruncation).Height;
      var captionOffset = textFont.PointSize - captionFont.PointSize;
      DrawString(Caption, new RectangleF(0, captionOffset, width, captionHeight),
        captionFont, UILineBreakMode.TailTruncation, UITextAlignment.Right);
    }

    // Text, dark gray
    UIColor.DarkGray.SetColor();
    var textHeight = 
      StringSize(Text, textFont, width, UILineBreakMode.WordWrap).Height;
    DrawString(Text, new RectangleF(Bounds.Width - width, 0, width, textHeight), 
      textFont, UILineBreakMode.WordWrap);
  }
} 
```

# php - 当另一个值重复时从列中获取值

> ID：14944717
> 
> 赞同：1
> 
> 时间：2013-02-18T20:26:13.777
> 
> 标签：php, sql

我真的是新手，我一直试图从查询中得到结果而没有得到它。我相信对于有经验的用户来说这很容易，但我肯定会在搜索后提出一个问题，但没有找到对我来说足够解释的答案或示例。

我有一张这样的桌子：

```
a  |  b
----------
2  | 76
----------
3  | 79
----------
3  | 84
----------
4  | 16
---------- 
```

如果重复“a”列中的任何数字，我想在 php 中“回显”“b”列中的数字。例如，在这种情况下，我应该得到结果：'79, 84'（因为'a'列中唯一重复的数字是'3'）

我试过：

```
$query=  mysql_query( "select b from table where a=3" );
$row = mysql_fetch_array($query);
$value = $row['b'];

$j = min($row);
$k = max($row);
while ($j <= $k) {
echo $j;
echo $k;
echo $value;
$j++;
} 
```

但它不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-23T06:55:52.267

如果您想要表中所有数据的结果，请使用此选择：

```
SELECT a, GROUP_CONCAT( b ) values
FROM table
GROUP BY a
HAVING count(*) > 1 
```

这将按`table`列的值对数据进行分组`a`，`HAVING`将结果仅过滤到具有多个成员的组，并将组中`GRPOUP_CONCAT`的所有值转换`b`为单个值（默认情况下以逗号分隔）。

[GROUP_CONCAT 文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# google-sheets - 谷歌电子表格 - 从下拉项目中填充行

> ID：14944720
> 
> 赞同：3
> 
> 时间：2013-02-18T20:26:23.920
> 
> 标签：google-sheets

我正在为我兄弟的建筑公司创建一个 Google Docs 电子表格。这是为了帮助他为潜在工作提供报价，这样他就可以控制成本。

我有三张纸，报价单，设置，产品。

报价将包含实际逐项报价。设置将包含一些静态值，例如增值税，产品包含产品的实际成本，即木材 49.00 欧元、电工 250.00 欧元等。

我已经想出了如何创建包含产品表中的项目代码的下拉框，但是当我选择项目代码时，我希望整个行都填充产品表中的详细信息。

这是我到目前为止创建的链接：

[https://docs.google.com/spreadsheet/ccc?key=0AseLC0_NOCETdHRTV1Rlc3pGblEtTnBzQ1A2VDlEakE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AseLC0_NOCETdHRTV1Rlc3pGblEtTnBzQ1A2VDlEakE&usp=sharing)

任何帮助表示赞赏。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:58:34.763

从另一个工作表中提取一行数据的最佳方法是使用 vlookup 函数。可以在以下位置找到详细信息：http: [//anandexcels.wordpress.com/tag/vlookup-function-in-google-docs/](http://anandexcels.wordpress.com/tag/vlookup-function-in-google-docs/)

# graphite - 按时间段拆分连续计数器

> ID：14944727
> 
> 赞同：1
> 
> 时间：2013-02-18T20:26:48.297
> 
> 标签：graphite

我有一个系列列表`*.in.count`，表示进入队列的消息数。如果我按原样绘制列表，它将是一条永远上升的线：

![在此处输入图像描述](../Images/7de2fcae417750aded816d251b209f6f.png)

我想知道的是有多少消息进入队列，按小时汇总和汇总，并按天重置。像这样的东西：

![在此处输入图像描述](../Images/d5902ec6700bb1d905ae90142101ab4e.png)

我尝试了 Graphite 功能，但找不到实现此目的的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T16:49:22.453

要在 Graphite 中随时间聚合事件，您可以结合使用`group()`、`sumSeries()`和`summarize()`。*group*函数将指标提取到单个系列中，然后*sumSeries*将它们相加，然后*汇总*在一个间隔内聚合它们。

例如：

1小时总和：

```
summarize(sumSeries(group(*.in.count)),"1h") 
```

或者

1天总和

```
summarize(sumSeries(group(*.in.count)),"1d") 
```

然后，要使图形看起来像您想要的（即条形图），您应该将“线模式”设置为**阶梯线**，将“区域模式”设置为**堆叠**或**全部**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T15:08:34.297

老问题，但为了其他搜索者：

**总结或计算每个间隔的计数（总计）：**

```
hitcount(perSecond(your.count), '1day') 
```

Afaik 它在里面做了所有的黑魔法。包括但不限于`summarize(scaleToSeconds(nonNegativeDerivative(your.count),1), '1day')` 并且还应该根据落入所选聚合区间的碳保留期（一个或多个）进行缩放。

# etl - 不要使用 Kettle SFTP 覆盖文件

> ID：14944734
> 
> 赞同：0
> 
> 时间：2013-02-18T20:27:04.390
> 
> 标签：etl, pentaho, kettle

我在 Kettle 中使用“使用 SFTP 获取文件”步骤来检索作业文件。每天都会有一个附加文件上传到此 SFTP。我只想要下载和转换新文件的工作。我注意到在“使用 FTP 获取文件”步骤中有一个“不覆盖文件”选项，但我没有看到 SFTP 的类似选项。有没有办法复制这个不覆盖功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T08:57:33.593

您可以使用[lftp](http://en.wikipedia.org/wiki/Lftp)。

登录后，使用

```
mirror -R --ignore-time local/dir/path remote/dir/path 
```

并确保不要在路径上附加斜杠。

这将继续上传您尝试放置的任何目录。

类型

```
man lftp 
```

了解更多信息

# ruby-on-rails - 在 Rails 中使用隐藏字段的替代方法。确保安全

> ID：14944738
> 
> 赞同：3
> 
> 时间：2013-02-18T20:27:24.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在建立一个帖子系统，用户的帖子总是必须由超级用户审核，除非他们是“经过验证的”用户（User.verified = true）

我打算在 User 模型中设置一个布尔列， :verified 如果这是真的，那么允许他们发布和规避审核。

所以，当用户去发帖时……我知道我可以很容易地为帖子设置一个隐藏字段。例如，在我的帖子表单中，我可以添加

```
<%= f.hidden_field :approved, :value => 1 if current_user.verified == 1 %> 
```

但是，我知道这并不安全，任何人都可以轻松地使用 firebug 来修改它。

将此逻辑移动到模型/控制器中的最佳实践是什么，或者是否有一个很好的资源链接可以涵盖此类事情，覆盖或修改“默认”创建/更新操作？

谢谢

根据下面的答案，这是我现在在我的 Post 模型中拥有的内容：

```
#If user is verified, set approved column to true
before_save :check_for_verified

def check_for_verified
    approved = user.verified?
end 
```

但是，它现在不允许我保存，它不会出错，只是不允许保存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:32:04.420

您认为这不属于视图的感觉是正确的。

有很多方法可以解决这个问题。一种方法是在模型上设置 before_create 回调，如果用户通过验证，则设置为批准

```
class Post

before_create :approve_if_user_verified

def approve_if_user_verified
  approved = user.verified?
end 
```

# kendo-ui - kendochart 的背景图像

> ID：14944740
> 
> 赞同：3
> 
> 时间：2013-02-18T20:27:32.110
> 
> 标签：kendo-ui, kendo-dataviz

我正在尝试为剑道图表设置背景图像，查看演示网站的代码：http://demos.kendoui.c​​om/dataviz/line-charts/ [index.html](http://demos.kendoui.com/dataviz/line-charts/index.html)

但是我无法为气泡图获得相同的结果。例如这里的代码：http: [//jsbin.com/alupin/42/edit](http://jsbin.com/alupin/42/edit)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T23:16:01.533

你错过了：

```
chartArea: {
    background: ""
}, 
```

在`kendoChart`初始化中。

# google-openid - Google OpenID 真的会返回 openid.pape.preferred_auth_policies 吗？

> ID：14944741
> 
> 赞同：1
> 
> 时间：2013-02-18T20:27:32.900
> 
> 标签：google-openid

我正在尝试让 Google OpenID 返回`openid.pape.preferred_auth_policies`以下链接中指定的内容：

[https://developers.google.com/accounts/docs/OpenID#gsa](https://developers.google.com/accounts/docs/OpenID#gsa)

特别是，我希望`[http://www.idmanagement.gov/schema/2009/05/icam/openid-trust-level1.pdf](http://www.idmanagement.gov/schema/2009/05/icam/openid-trust-level1.pdf)`返回该策略，但无论我在请求中指定什么，Google 似乎都不会返回它（而且我在具有有效 SSL 证书的主机上）。我正在使用 simpleSAMLphp 并指定要返回的策略如下（并且也尝试了至少 4-5 种其他方式）：

```
'http://specs.openid.net/extensions/pape/1.0' => array(
    'max_auth_age' => 60,
    'preferred_auth_policies' => 'http://www.idmanagement.gov/schema/2009/05/icam/openid-trust-level1.pdf', 
), 
```

对 Google 的请求如下所示：

`openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.sreg=http%3A%2F%2Fopenid.net%2Fextensions%2Fsreg%2F1.1&openid.ns.ax=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ns.ext0=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fpape%2F1.0&openid.ax.mode=fetch_request&openid.ax.type.ext0=http%3A%2F%2Faxschema.org%2FnamePerson%2Ffirst&openid.ax.type.ext1=http%3A%2F%2Faxschema.org%2FnamePerson%2Flast&openid.ax.type.ext2=http%3A%2F%2Faxschema.org%2Fcontact%2Femail&openid.ax.type.ext3=http%3A%2F%2Faxschema.org%2FnamePerson&openid.ax.type.ext4=http%3A%2F%2Faxschema.org%2FnamePerson%2Ffriendly&openid.ax.required=ext0%2Cext1%2Cext2%2Cext3%2Cext4&openid.ext0.max_auth_age=60&openid.ext0.preferred_auth_policies=http%3A%2F%2Fwww.idmanagement.gov%2Fschema%2F2009%2F05%2Ficam%2Fopenid-trust-level1.pdf&openid.realm=https%3A%2F%2Ftw.socialidp.com&openid.mode=checkid_setup&openid.return_to=https%3A%2F%2Ftw.socialidp.com%2Fidp%2Fmodule.php%2Fopenid%2Flinkback.php%3FAuthState%<removed>https%253A%252F%252Ftw.socialidp.com%252Fidp%252Fmodule.php%252Fcore%252Fas_login.php%253FAuthId%253Dgoogleoid2%2526ReturnTo%253Dhttps%25253A%25252F%25252Ftw.socialidp.com%25252Fidp%25252Fmodule.php%25252Fcore%25252Fauthenticate.php%25253Fas%25253Dgoogleoid2%26janrain_nonce%3D2013-02-18T20%253A10%253A30Z3jP9G3&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=<removed>`

相关部分是：

```
&openid.ext0.preferred_auth_policies=http%3A%2F%2Fwww.idmanagement.gov%2Fschema%2F2009%2F05%2Ficam%2Fopenid-trust-level1.pdf

```

有人可以验证这是否正确吗？

此外，在上述 Google OpenID 页面引用部分的底部，Google 声明：

> 包含 http://www.idmanagement.gov/schema/2009/05/icam/openid-trust-level1.pdf 要求 Google 声明身份验证符合 OpenID 的 GSA 配置文件的安全要求。默认情况下，所有 Google 身份验证流程都提供这些安全功能，无论是否包含此特定策略 URL。

从阅读来看，似乎人们可以盲目地假设每次使用 OpenID 的 AuthN 尝试都在 LOA1 上，实际上没有必要从 Google 那里得到这个断言。这是一个正确的假设吗？

# java - 无法获取通过 JSP 填充的复选框的值

> ID：14944746
> 
> 赞同：0
> 
> 时间：2013-02-18T20:27:55.227
> 
> 标签：java, jsp, servlets

我将复选框与表中的每一行相关联。我想在 servlet 中获取选中的复选框。我已经填充了这样的复选框：

```
<%int i=0; %>
<c:forEach items="${booklist}" var="book" varStatus="bookCount">
<tr>
<td><input type="checkbox" name="bookSelected" id="bookSelected<%=i%>" value="<%=i%>"><c:out value="${book.title}"></c:out></td>
<%i=i+1%>
</C:forEach> 
```

Servlet 代码是

```
String[] chks = request.getParameterValues("bookSelected"); 
```

复选框确实显示在屏幕上，但即使我选择了这些复选框，servlets 变量也会`chks`获得空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:07:02.267

你需要在这里检查几件事。

表单中的复选框是否正在提交？

您正在为每个复选框生成行。因此，该表应在提交的表单标记内。

现在，您可以使用 Firefox 中的“Firebug”等工具检查提交的参数。

查看参数是否以名称“bookSelected”传递。

![在此处输入图像描述](../Images/2b4cf8cefa007327eb6903724a4bbfc3.png)

# ios - AVVideoComposition 中 CALayers 的质量损失？

> ID：14944750
> 
> 赞同：1
> 
> 时间：2013-02-18T20:28:09.893
> 
> 标签：ios, objective-c, cocoa-touch, core-animation, avfoundation

我正在使用 AVVideoCompositionCoreAnimationTool 将 CALayers 添加到捕获的视频中。用于图层的图像是相当高分辨率的 PNG，到目前为止，它们已经很好地按比例缩小以用于其他用途，但是当我将它们放入合成中时，无论图层的原始大小如何，它们都会失去一大堆质量是，并且显得非常像素化。视频是用 AVSessionPreset640x480 录制的，合成视频是 480x360（这似乎是一种奇怪的分辨率），所以我要让我的艺术家调整图层的大小，使它们在正确的位置480x360 视频的大小，但我不太相信它会有所帮助。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-18T13:37:27.450

导出动画视频时，将 AVAssetExportSession 的预设名称设置为 AVAssetExportPresetHighestQuality。

例如：

让assetExport = AVAssetExportSession（资产：mixComposition，presetName：AVAssetExportPresetHighestQuality）

# java - 无法将面板添加到 scrollPane，应用程序没有变化

> ID：14944754
> 
> 赞同：0
> 
> 时间：2013-02-18T20:28:28.670
> 
> 标签：java, swing, jpanel, jscrollpane, preferredsize

我添加`panel4`到 scrollPane，但我的应用程序没有改变。这是我的代码：

```
 public class Bill extends JPanel {
      //some Jlabels, JComboBox......
      public Bill(){

      JPanel panel1 = new JPanel();
      panel1.setLayout(new GridLayout(7,1,10,20));
      //add some labels to panel

      JPanel panel2 = new JPanel();
      panel2.setLayout(new GridLayout(7,4,10,10 ));

        //add some components to panel

      JPanel panel3=new JPanel(new GridLayout(4,1,10,10));
      panel3.add(CRTA);
      panel3.add(UKUPNO);
      panel3.add(jbtView);
      panel3.add(jbtCancel); 
```

最后是 panel4

```
 JPanel panel4=new JPanel();
     panel4.add(panel1, BorderLayout.WEST);
     panel4.add(panel2, BorderLayout.CENTER);

     JScrollPane scrollPane = new JScrollPane();
     scrollPane.getViewport().add( panel4 );  
     add(scrollPane,BorderLayout.CENTER);
     add(panel3, BorderLayout.SOUTH); 
```

* * *

这就是我得到的

![在此处输入图像描述](../Images/da1ffca8571e6ed7321ff84764b97b1d.png)

矩形内是 panel4（带有数字和组合框的面板）

这是我改变尺寸的时候 ![在此处输入图像描述](../Images/237aad40d2d3368c490c9c767965a31a.png)

**没有滚动显示**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:33:41.120

```
JPanel panel4=new JPanel();
panel4.add(panel1, BorderLayout.WEST);
panel4.add(panel2, BorderLayout.CENTER); 
```

默认情况下，JPanel 使用 FlowLayout 始终尊重组件的首选大小。您尝试指定的约束将被忽略。

你可以试试：

```
JPanel panel4=new JPanel( new BorderLayout() ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:08:09.037

基本上，您应该在 panel4（包括 panel3）上添加所有内容，然后在`JScrollPane`. 之后，将其添加`JScrollPane`到`CENTER`.`JTabbedPane`

也永远不要调用`setXXXSize`你`JButton`的方法。

**编辑**

我玩了一下你的想法：

![在此处输入图像描述](../Images/82c0b1ac10bfaeff69277585d6a342c7.png)

我希望这将帮助您了解您的 UI 的外观。再说一遍：不要调用`setXXXSize`方法，让一些其他的东西来确定组件的大小，比如字体大小，以防`JTextField`“Total”权限或“热饮”面板`JLabel`中这些图标的大小。`JButton`

# uitableview - 由于 NSDictionary 嵌套数据，UITableView 滚动缓慢？

> ID：14944757
> 
> 赞同：0
> 
> 时间：2013-02-18T20:28:52.547
> 
> 标签：uitableview, nsarray, nsdictionary, xib

我有`NSDictionary`很多嵌套数据。所有这些数据都在 my 中加载一次，`UIViewController`然后重新加载 my `UITableView`，使用这些数据填充它的单元格标签，这些标签设置在单独的`xib`. 所有加载过程都发生得非常快，但我`UITableView`的滚动变得非常慢。我首先认为它可能是`xib`每次分配单元格时都在加载，所以我测试了默认值`UITableViewCell`而不是加载它，但没有任何改变。这个问题可能是由我访问数据的方式引起的吗？我正在执行以下操作：

```
NSDictionary *match = dictionaryMatches[@"dates"][indexPath.section][@"matches"][indexPath.row];

homeTeamAbbreviationLabel.text = match[@"home"];
visitorTeamAbbreviationLabel.text = match[@"visitor"];
matchTimeLabel.text = match[@"time"];
leagueLabel.text = match[@"league"];

homeNameLabel.text = match[@"home_name"];
visitorNameLabel.text = match[@"visitor_name"]; 
```

这段代码在里面`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

任何建议也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:48:20.397

我刚刚发现问题出在哪里。我在我的 中设置了单元标识符`xib`，但没有在我的代码中使用它。

在我解决问题之前，它是：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:[NSString stringWithFormat:@"cell"]]; 
```

现在它是：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:[NSString stringWithFormat:@"RegularMatchCell"]]; 
```

现在它工作正常。

# spring - 无法从底层数据库获取连接

> ID：14944761
> 
> 赞同：2
> 
> 时间：2013-02-18T20:29:07.867
> 
> 标签：spring, hibernate

我正在使用 Spring 3.1、Hibernate 4 和 MySQL 5.1 应用程序，该应用程序在我的本地计算机上运行良好。将应用程序部署到 Web 主机后，出现以下错误：

```
org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Connections could not be acquired from the underlying database! 
```

我的 Spring applicationContext.xml 文件包含：

```
<bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <property name="driverClass" value="org.gjt.mm.mysql.Driver" />
  <property name="jdbcUrl" value="jdbc:mysql://127.0.0.1:3306/brutteng_adaptiveonlinetesting" />
  <property name="user" value="XXXXXXXXXX" />
  <property name="password" value="YYYYYYYYY" />
  <property name="maxPoolSize" value="10" />
  <property name="maxStatements" value="0" />
  <property name="minPoolSize" value="5" />
  <property name="idleConnectionTestPeriod" value="10800"/>
  <property name="maxIdleTime" value="21600"/>
 </bean> 
```

我的 hibernate.cfg.xml 文件包含：

```
<session-factory>
        <property name="hibernate.connection.driver_class">org.gjt.mm.mysql.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://127.0.0.1:3306/brutteng_adaptiveonlinetesting</property>
        <property name="hibernate.connection.username">XXXXXX</property>
        <property name="hibernate.connection.password">YYYYYYY</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</property>
        <property name="c3p0.min_size">5</property>
        <property name="c3p0.max_size">20</property>
        <property name="c3p0.timeout">1800</property>
        <property name="c3p0.max_statements">50</property>
    </session-factory> 
```

请提供帮助，因为我陷入了这个问题。

# php - 标签之间的正则表达式，除非转义

> ID：14944762
> 
> 赞同：1
> 
> 时间：2013-02-18T20:29:08.833
> 
> 标签：php, regex

我围绕 Pygments 库制作了一个 PHP 包装器，用于突出显示代码块。用于代码块检测的正则表达式可以在**配置**文件中配置。（json格式）

在 json 值中看起来像这样：

```
{ 
    "codeblock_regex": "\\[pygments=(.*?)\\](.*?)\\[\\/pygments\\]" 
} 
```

在它被 JSON 解码后应该是这样的：

```
\[pygments=(.*?)\](.*?)\[\/pygments\] 
```

这很糟糕，因为它不允许转义，我希望人们能够这样做：

```
\[pygments=lexer]some code here[/pygments] 
```

和 pygments 来检测`\`并忽略该代码块。我试过了

```
 "(^\\\\)\\[pygments=(.*?)\\](.*?)\\[\\/pygments\\]" 
```

之后应该是这样的`json_decode`：

```
 (^\\)\[pygments=(.*?)\](.*?)\[\/pygments\] 
```

但是，这只会使它忽略所有内容，甚至是常规块，所以一定是我做错了。如您所见，我离正则表达式专家还差得很远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:45:22.633

您需要的是一个相当棘手的正则表达式功能，称为[“零宽度否定后向断言”](http://www.regular-expressions.info/lookaround.html)。“零宽度”意味着它匹配输入的零个字符，“负”意味着它只有在*不匹配时才成功*找到时才成功，而“向后看”意味着它向后看。

这个的语法是你不想在`(?<!test)`那里的东西。`test`

在您的情况下，您想匹配 a`[`但如果前面有 a 则忽略它`\`，两者都需要转义，所以您需要`(?<!\\)\[`

所以你的正则表达式最终为（在 PHP 中）`$re = '/(?<!\\\\)\[pygments=(.*?)\](.*?)\[\/pygments\]/';`

根据`json_encode`，然后`"\/(?<!\\\\)\\[pygments=(.*?)\\](.*?)\\[\\\/pygments\\]\/"`以 JSON 形式结束。我觉得我的眼睛开始变得有趣了所有的反斜杠......`;)`

# android - 为什么我的动态生成的内容不会显示在表格布局中

> ID：14944763
> 
> 赞同：2
> 
> 时间：2013-02-18T20:29:11.487
> 
> 标签：android, dynamic, android-tabhost, fragment, android-tablelayout

我正在尝试将一些按钮加载到片段内的表格布局中。这怎么不出现。我看到更改背景有效（在 onCreateView(......) 中从灰色更改为红色）但是当我调用 loadAllButtons 时，它们不会出现。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
        if(container == null)
            return null;
        basedView = (TableLayout) inflater.inflate(R.layout.fragment_difficult_sound_syllable, container, false);
        currentSyllable = getArguments().getString(StaticValues.DIFFICULT_SOUND_SELECTOR);

        basedView.setBackgroundColor(Color.RED);
        return basedView;
} 
```

下面是我的 loadAllButtons，在有人问是之前，它说所有内容都已加载（例如添加的按钮和行，在 row.add() 和 basedView.add() 之后通过 logcat 检查）

```
private void loadAllButtons()
{

    DataBaseHelper tmpHelper = new DataBaseHelper(getActivity().getApplicationContext());
    ArrayList<ButtonInfoContainer> tmpArray = null;

    if(currentSyllable.contentEquals(StaticValues.CONSONANT))
    {
        tmpArray = tmpHelper.returnAllConsonants();
        Log.i(StaticValues.TAG, "returned all consonants");
    }
    else
    {
        tmpArray = tmpHelper.returnAllVowels();

        Log.i(StaticValues.TAG, "returned all vowels");
    }

    if(tmpArray != null)
    {
        TableRow row = null;
        InfoButton tmpButton = null;

        //LayoutParams rowParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        //TableRow.LayoutParams equalParams = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 0); 
        LinearLayout.LayoutParams buttonLayout = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

        if(basedView != null)
        {

            for(int i = 0; i < tmpArray.size(); i++)
            {

                //adds new row to table if modulus is 0
                if(( i % 2 ) == 0)
                {
                    row = (TableRow) getLayoutInflater(getArguments()).inflate(R.layout.table_row, null);
                    //row.setLayoutParams(rowParams);
                    basedView.addView(row);
                }

                tmpButton = (InfoButton) getLayoutInflater(getArguments()).inflate(R.layout.info_button, null);
                tmpButton.setBackgroundResource(R.drawable.button_bg);
                tmpButton.setLayoutParams(buttonLayout);

                //set button Text
                tmpButton.setText(tmpArray.get(i).buttonText);
                //Obtain extra held info
                tmpButton.setExtraInfo(tmpArray.get(i).infoHeld);

                //tmpButton.setWidth(buttonWidth);
                //tmpButton.setHeight(buttonHeight);

                //tmpButton.setTextSize(TypedValue.COMPLEX_UNIT_DIP, textSize);
                tmpButton.setTextColor(getResources().getColor(R.color.button_text_color));
                tmpButton.setTypeface(Typeface.DEFAULT_BOLD);

                row.addView(tmpButton);
                tmpButton.setOnClickListener(listenerDynamicButton);
            }

        }
    }
} 
```

出于某种原因，即使我的 logcat 输出显示一切都很好（按钮显示正确名称的按钮数量），但表格布局没有被填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:05:17.053

想出了关于我自己的问题的答案。之后的一切

```
tmpButton = (InfoButton) getLayoutInflter()... 
```

到

```
row.addView(tmpButton); 
```

必须删除，除了

```
tmpButton.setText(); 
```

和

```
tmpButton.setExtraInfo(..); 
```

虽然我不知道为什么那些杀了我的布局。因此，如果有人认为那部分我会很乐意接受这个答案。

# php - Backbone 和 Laravel：如何转换 JSON 对象

> ID：14944771
> 
> 赞同：0
> 
> 时间：2013-02-18T20:29:44.480
> 
> 标签：php, json, backbone.js, laravel, laravel-4

在我的 Backbone 应用程序中，Laravel 正在接收来自 POST 请求的结果，如下所示：

```
$input = Input::json(); 
```

这将返回一个 JSON 对象，而不是一个字符串。我以为我可以`json_decode`用来获取它的属性，但`json_decode`需要一个字符串。那么如何将我的 JSON 对象转换为 PHP 可以使用其属性的东西呢？

我尝试`Input::all()`从应用程序中获取，但返回一个空数组。

我试过搜索谷歌，找不到任何关于如何做到这一点的信息。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:34:09.230

`json_decode($string)`必须接收一个 json 字符串作为参数。默认情况下，它会在成功和失败时返回`StdClass`具有所有属性的 (object) 实例（除非您没有设置第二个参数 = true） 。`null`

诸如`null`, `false`,之类的值`true`也可以按原样返回。

`json_encode($anyData)`实际上可以接收任何数据并将返回一个 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:01:56.437

您可以使用`Request::getContent()`来获取请求的数据。有了它，你可以随心所欲地传递它`json_decode()`。

# eclipse - 从 ANT build.xml 文件创建 Eclipse 项目

> ID：14944772
> 
> 赞同：1
> 
> 时间：2013-02-18T20:29:45.037
> 
> 标签：eclipse, ant

我有一个 ANT 项目（ant 1.8.4），可以用命令行很好地构建。我需要将这个 ant 构建文件放入 eclipse 项目中。我在[这个网站](http://dheffelfinger.blogspot.com/2005/06/eclipse-31-ant-build-file-importexport.html)上搜索了 ant-1.8.4 作为 Eclipse 项目，但我最终遇到了大约 1K 的构建错误。

问题是我必须在构建路径中添加许多 jar 文件。我需要 log4j、common-io 等等。

有没有办法解决这个jar文件问题？ant 构建代码没有问题的事实意味着所有必要的 jar 文件都被找到并自动与 ant 链接。让 eclipse 找到所有必要的 jar 文件可能需要什么步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:16:49.147

Eclipse doesn't use your Ant file for building. Instead, you have to tell it the jars used and where the source is located. It will then use that information to compile the source.

I'm not a developers, so I am not 100% sure what happens if you have a really funky project where you don't want to compile all the source, or first have to process it, or manipulate the classpath as you compile. However, 90% of Java projects are fairly straight forward when it comes to at least compiling the code: My source is here, the dependent jars are here. Please compile.

Of the other 10%, 9.8% usually are using things like WSDL or Ivy, but Eclipse has plugins for these. You need to download the plugins and configure them, but once this is done, Eclipse can work without needing the `build.xml` file to figure out how to compile the code.

It's the last 0.2% that are the killers. However, you can always tell Eclipse to spawn an Ant build using the build.xml file. Then, you need to tell Eclipse where the classfiles are located and the jars (and other resources that might not be in the `*.class` file directory, and you can still use the Eclipse debugger.

# http - 在 Arduino 上接收 HTTP POST 请求

> ID：14944773
> 
> 赞同：6
> 
> 时间：2013-02-18T20:29:46.493
> 
> 标签：http, post, arduino

是否可以使用以太网屏蔽与我的 Arduino Uno 接收 HTTP Post 请求。我想制作一个可以控制我的 Arduino 的 Android 应用程序，我认为最好的方法是使用 HTTP Post 请求。

有很多关于[1](https://stackoverflow.com/questions/3677400/making-a-http-post-request-using-arduino) [Sending a POST Request] 的帖子，但我找不到任何关于如何接收 HTTP Post 请求的帖子。我刚开始为 Arduino 编程，但我已经为 Android 制作了一些应用程序（我已经完成了 Android 的邮政编码）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-23T03:38:43.670

我想像你一样阅读 POST 而不是使用 GET。我是这样做的：

```
/*
 A simple Arduino Ethernet web server. 
 by John Harrison
 */

#include <SPI.h>
#include <Ethernet.h>

// You can change the MAC and IP addresses to suit your network:

byte mac[] = { 0X52, 0X64, 0X75, 0X69, 0X6E, 0X6F };
IPAddress ip( 192,168,0,97 );

EthernetServer server(80); // Port 80 is HTTP port
char new_state[1024];

void setup()
{
  Serial.begin(9600);
  // Start the Ethernet server:
  Ethernet.begin(mac, ip);

  server.begin();

  // Set the digital pins ready to write to
  for (int pin = 2; pin <= 9; pin++) {
    pinMode(pin, OUTPUT);
  }

  Serial.print("Serving on http://");
  Serial.println(Ethernet.localIP());
}

void loop()
{
  // listen for incoming clients
  EthernetClient client = server.available();

  if (client) {

    // Serial.println("Client connected");

    while (client.connected()) {

      int i = 0;
      int head = 1;
      int body = 0;

      while(client.available()) {
        char c = client.read();
        if (c == '\n') {

          if ( i <= 2 ) {

            // an http request ends with a blank line

            sendPage(client);
            if ( head == 1 ) {
              body = 1;
              head = 0;
            }

          }

          i = -1;

        }
        if ( body == 1 ) {
          new_state[i] = c;
        }
        i++;
        new_state[i] = '\0';
      }
      i = 0;
    }

    // Serial.println("Disconnected");
    /*
    if ( strlen(new_state) > 0 ){
      Serial.print ("[");
      Serial.print(new_state);
      Serial.println ("]");
    }
    */
    // Post data looks like pinD2=On
    if ( strncmp( new_state, "pinD", 4) == 0 ) {
      int pin = new_state[4] - 48; // Convert ascii to int
      // Serial.println(pin);
      if ( strncmp( new_state+5, "=On", 3) == 0 ) {
        digitalWrite(pin, 1);
      } 
      else if ( strncmp( new_state+5, "=Off", 4) == 0 ) {
        digitalWrite(pin, 0);
      }
    }

  }

}

void sendPage(EthernetClient client)
{

  // Serial.println("Sending response");

  // send a standard http response header
  client.println("HTTP/1.0 200 OK\Content-Type: text/html\n\n<html>\n<head>");
  client.println("<link rel='icon' href='data:;base64,iVBORw0KGgo='>");
  client.println("<title>POST Pin controller</title>\n</head>\n<body>\n");
  client.println("<h2>Buttons turn pins on or off</h2>");
  client.println("<form method='post' action='/' name='pins'>");

  char line[1024];
  int pin;

  for ( pin=2; pin<=9; pin++ ) {
    sprintf(line, "<input name='pinD%d' type='submit' value='On' />\n", pin);
    client.print(line);
    sprintf(line, "<input name='pinD%d' type='submit' value='Off' /> %d<br />\n", pin, pin);
    client.print(line);
  }

  client.println("</form>\n</body>\n</html>");
  client.stop();

} 
```

有一些方法可以做到更简单、更小，但我发现它们相当滞后，所以一直在努力尽快得到它。

我用它来控制 Mega 2560 上引脚 2-9 上的 8 个 LED。我还没有在 Uno 上测试过它，但我希望它可以工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T21:31:57.290

不确定 POST，但 GET 肯定有效。这是我一直在使用的 AJAX 示例。它只是控制一个RGB LED。

```
 xmlhttp.open("GET", "http://ipAddressOfArduino?r=" + redVal + "&g=" + greenVal + "&b=" + blueVal + "&e", true); 
```

然后在 Arduino 方面，我只是解析数据。

```
//ARDUINO 1.0+ ONLY
//ARDUINO 1.0+ ONLY

#include <Ethernet.h>
#include <SPI.h>
boolean reading = false;
String myStr;
int redVal, greenVal, blueVal;

////////////////////////////////////////////////////////////////////////
//CONFIGURE
////////////////////////////////////////////////////////////////////////
  //byte ip[] = { 192, 168, 0, 1 };   //Manual setup only
  //byte gateway[] = { 192, 168, 0, 1 }; //Manual setup only
  //byte subnet[] = { 255, 255, 255, 0 }; //Manual setup only

  // if need to change the MAC address (Very Rare)
  byte mac[] = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

  EthernetServer server = EthernetServer(80); //port 80
////////////////////////////////////////////////////////////////////////

void setup(){
  Serial.begin(9600);

  pinMode(3, OUTPUT);
  pinMode(5, OUTPUT);
  pinMode(6, OUTPUT);

  Ethernet.begin(mac);
  //Ethernet.begin(mac, ip); //for manual setup

  server.begin();
  Serial.println(Ethernet.localIP());

}

void loop(){

  // listen for incoming clients, and process qequest.
  checkForClient();

}

void checkForClient(){

  EthernetClient client = server.available();

  if (client) {

    // an http request ends with a blank line
    boolean currentLineIsBlank = true;
    boolean sentHeader = false;
    myStr = "";
    while (client.connected()) {
      if (client.available()) {

        char c = client.read();

        if(reading && c == ' ') reading = false;
        if(c == '?') reading = true; //found the ?, begin reading the info

        if(reading){
          //Serial.print(c);
          if (c!='?') {
            myStr += c;
          }

        }

        if (c == '\n' && currentLineIsBlank)  break;

        if (c == '\n') {
          currentLineIsBlank = true;
        }else if (c != '\r') {
          currentLineIsBlank = false;
        }
      }
    }

    parseThangs(myStr);
    analogWrite(3, redVal);
    analogWrite(5, greenVal);
    analogWrite(6, blueVal);    
    delay(100); // give the web browser time to receive the data
    client.stop(); // close the connection:    
  } 
}

void parseThangs(String str) {
  int startIndex = str.indexOf("r");
  int endIndex = str.indexOf("g");
  String redStr = str.substring(startIndex + 2, endIndex - 1);
  char tempRed[4];
  redStr.toCharArray(tempRed, sizeof(tempRed));
  redVal = atoi(tempRed);
  startIndex = str.indexOf("g");
  endIndex = str.indexOf("b");
  String greenStr = str.substring(startIndex + 2, endIndex -1);
  char tempGreen[4];
  greenStr.toCharArray(tempGreen, sizeof(tempGreen));
  greenVal = atoi(tempGreen);
  startIndex = str.indexOf("b");
  endIndex = str.indexOf("e");
  String blueStr = str.substring(startIndex + 2, endIndex -1);
  char tempBlue[4];
  blueStr.toCharArray(tempBlue, sizeof(tempBlue));
  blueVal = atoi(tempBlue);
  Serial.println(redStr + " " + greenStr + " " + blueStr);
} 
```

可能有点草率，但它确实有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-26T12:39:34.857

一个 POST 看起来像：

```
POST /test.php HTTP/1.1
Host: 192.168.0.55
Content-Type: application/x-www-form-urlencoded
Connection: close
User-Agent: Arduino/1.0
Content-Length: 1024

data=5 
```

所以你必须忽略第一个“换行符”并继续阅读。这是我修改后的 Web 服务器代码，用于读取发布的数据：

```
/*
  Web Server 
*/

#include <SPI.h>
#include <Ethernet.h>

// Enter a MAC address and IP address for your controller below.
// The IP address will be dependent on your local network:
byte mac[] = {
  0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED
};
IPAddress ip(192, 168, 15, 177);

// Initialize the Ethernet server library
// with the IP address and port you want to use
// (port 80 is default for HTTP):
EthernetServer server(80);

void setup() {
  // Open serial communications and wait for port to open:
  Serial.begin(9600);
  while (!Serial) {
    ; // wait for serial port to connect. Needed for native USB port only
  }

  // start the Ethernet connection and the server:
  //Ethernet.begin(mac, ip);
  Ethernet.begin(mac);
  server.begin();
  Serial.print("server is at ");
  Serial.println(Ethernet.localIP());
}

  void writeResponse(EthernetClient client) {
    // send a standard http response header
    client.println("HTTP/1.1 200 OK");
    client.println("Content-Type: text/html");
    client.println("Connection: close");  // the connection will be closed after completion of the response
    // client.println("Refresh: 5");  // refresh the page automatically every 5 sec

    client.println();
    client.println("<!DOCTYPE HTML>");
    client.println("<html> <body>");
    // output the value of each analog input pin
    for (int analogChannel = 0; analogChannel < 6; analogChannel++) {
      int sensorReading = analogRead(analogChannel);
      client.print("analog input ");
      client.print(analogChannel);
      client.print(" is ");
      client.print(sensorReading);
      client.println("<br />");
    }
    client.println("<form action=\"\" method=\"post\">");
    client.println("<input type=\"submit\" value=\"On\" name=\"btnOn\">");
    client.println("<input type=\"submit\" value=\"Off\" name=\"btnOff\">");
    client.println("</form>");
    client.println("</body> </html>");
  }

void loop() {
  // listen for incoming clients
  EthernetClient client = server.available();
  if (client) {
    Serial.print("new client [");
    //Serial.print(client.getRemoteIP());
    //Serial.println("]");

    // an http request ends with a blank line
    boolean currentLineIsBlank = true;
    String req_str = "";
    int data_length = -1;
    boolean skip = true;

    //int empty_line_count = 0;
    while (client.connected()) 
    {
      if (client.available()) {
        char c = client.read();
        //Serial.write(c);
        req_str += c;

        // if you've gotten to the end of the line (received a newline
        // character) and the line is blank, the http request has ended,
        // so you can send a reply       
        if (c == '\n' && currentLineIsBlank && req_str.startsWith("GET")) {
          writeResponse(client);
          break;
        }
        if (c == '\n' && currentLineIsBlank && req_str.startsWith("POST") && !skip) {
          writeResponse(client);
          break;
        }   
        if (c == '\n' && currentLineIsBlank && req_str.startsWith("POST") && skip) {
          skip = false;
          String temp = req_str.substring(req_str.indexOf("Content-Length:") + 15);
          temp.trim();
          //Serial.print("Content-Length=");
          data_length = temp.toInt();
          /*Serial.println(data_length);
          writeResponse(client);
          break;*/
          while(data_length-- > 0)
          {
            c = client.read();
            req_str += c;
          }
          writeResponse(client);
          break;
        }

        if (c == '\n') {
          // you're starting a new line
          currentLineIsBlank = true;
        } else if (c != '\r') {
          // you've gotten a character on the current line
          currentLineIsBlank = false;
        }
      }
    }

    Serial.println(req_str);

    // give the web browser time to receive the data
    delay(1);
    // close the connection:
    client.stop();
    Serial.println("client disconnected");
  }
} 
```

# windows - 始终识别插入设备的物理 USB 插槽

> ID：14944774
> 
> 赞同：1
> 
> 时间：2013-02-18T20:29:50.633
> 
> 标签：windows, usb, device, slots

我在 Windows 7 中有一个应用程序，它使用两个 USB 手机插入 PC 中特定的物理外部 USB 插槽（例如：平板电脑中的左侧 USB 插槽和右侧 USB 插槽）。

应用程序需要根据插入的物理外部 USB 插槽对这些手机进行不同的处理。到目前为止，我必须通过带有参数 SPDRP_LOCATION_INFORMATION 的 SetupDiGetDeviceRegistryProperty() 来发现位置信息。

这给了我一个类似“Port_#0004_Hub_#0006”的字符串，我可以手动和通过检查将其与给定硬件系统的外部物理 USB 插槽相关联。但这不是非常可靠和持久的，因为它会随着许多因素而变化，例如安装的 Windows 版本、同一型号 PC 的单元之间的差异等。

是否存在一致的识别程序： 1\. 在系统重新启动时稳定 3\. 在安装新设备、Windows 或驱动程序更新或重新安装 Windows 时稳定。2\. 插入额外的 USB 集线器时稳定 4\. 跨同一计算机型号的不同单元稳定

一些知识渊博的人警告我这是无法实现的，但我仍然希望好运！

非常感谢您的帮助。

# xml - 使用 JQuery 将 XML 数据读入浮点图表时遇到问题

> ID：14944775
> 
> 赞同：2
> 
> 时间：2013-02-18T20:29:53.633
> 
> 标签：xml, jquery, flot

我对此停滞不前，想知道是否有人能指出我正确的方向。我配置了这个脚本，在我看来它应该可以工作，但是我没有显示任何数据，当我尝试 console.log 时它说成本没有定义。继承人的脚本：

```
function get_daygraphdata() {
$.ajax({
           type: "GET",
            url: "day.xml",
            dataType: "xml",
            cache: false,
            success: function(xml){
            var dataset = new Array();
        var counter = 0;
$(xml).find('product1').each(function(){
dataset[counter] = new Array(2);
dataset[counter][0] = $(this).children("date").text();
dataset[counter][1] = $(this).children("cost").text();
counter++;
console.log(dataset);

var options = {
            xaxis: {
                mode: 'time', 
                timeformat: "%H:%M %p",
                minTickSize: [1, "hour"]
            }
        }

        var placeholder = $("#graph1");
        $.plot(placeholder, [{data: dataset, label: Cost}], options);

});
}})
}
get_daygraphdata();
setInterval(function() {
    get_daygraphdata();
}, 300000);     
}) 
```

Xml数据如图所示：

```
<graphdata>
  <product1>
    <date>243500000</date>
    <cost>17.85</cost>
    <date>245500000</date>
    <cost>14.65</cost>
    <date>248500000</date>
    <cost>16.22</cost>
  </product1>
</graphdata 
```

我的想法是它应该出现在一个数组中（日期，成本）。console.log 吐出这个

```
array[2] ->Which holds
0: "243500000245500000248500000122500000122900000130900000"
1: "17.8514.6516.2213.8713.8713.87"
Uncaught ReferenceError: Cost is not defined 
```

有没有人可能知道我做错了什么？为什么这没有适当的反应？

# java - 在 weblogic 中面临 perm gen 空间错误

> ID：14944778
> 
> 赞同：12
> 
> 时间：2013-02-18T20:30:07.957
> 
> 标签：java, garbage-collection, weblogic

我是 weblogic 的新手。当我看到管理员控制台并登录时启动服务器后，它会抛出异常。

```
Root cause of ServletException.
java.lang.OutOfMemoryError: PermGen space
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at weblogic.utils.classloaders.GenericClassLoader.defineClass(GenericClassLoader.java:335)
at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:288)
Truncated. see log file for complete stacktrace 
```

我做了很多谷歌，找到了一些初始化之`JAVA_OPTIONS`类的解决方案`-XX:xmx`。我试图在`startdomainenv.cmd`文件中设置它，但没有运气。

请帮忙。任何指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T00:58:13.487

要设置**PermGen**大小，您可以使用例如`-XX:PermSize=512m -XX:MaxPermSize=512m`.

关于**Weblogic**，设置 JAVA_OPTIONS 并查看这些选项是否作为参数正确传递到您的 Java 进程中。您也可以直接在`startWeblogic.cmd`脚本中设置这些参数。

要检查您`JAVA_OPTIONS`的设置是否正确，请添加`echo %JAVA_OPTIONS%`到`startWeblogic.cmd`脚本中并查看输出。此外，您可以使用例如**jConsole**、**jstat**或**jmap**来监控 Weblogic 进程在运行时的堆使用情况。这将向您显示**PermGen**的大小和占用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-13T10:49:49.397

您可以尝试更改服务器中 weblogic 的内存设置。* 转到 - `<weblogic path>\Middleware\user_projects\domains\fms_domain\bin\setDomainEnv.cmd` * 打开文件 * 更改设置

```
if "%JAVA_VENDOR%"=="Sun" (
set WLS_MEM_ARGS_64BIT=-Xms256m -Xmx512m
set WLS_MEM_ARGS_32BIT=-Xms256m -Xmx512m
) else (
set WLS_MEM_ARGS_64BIT=-Xms512m -Xmx512m
set WLS_MEM_ARGS_32BIT=-Xms512m -Xmx512m
) 
```

根据您的要求和环境更改这些设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-31T15:44:13.337

要完成 user267 的响应，您还必须更改：设置 MEM_MAX_PERM_SIZE_64BIT=-XX:MaxPermSize=256m

设置 MEM_MAX_PERM_SIZE_32BIT=-XX:MaxPermSize=256m

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T11:36:02.100

就我而言，解决方案是编辑`DOMAIN\bin\setDomainEnv.cmd`文件。在服务器按预期启动之前进行了以下修改：

*   和值增加`-Xms`了`-Xmx`
*   和值`-XX:PermSize`也`-XX:MaxPermSize`增加了

最后，但可能是最重要的

*   `if "%JAVA_VENDOR%"=="Sun" (`条件已更改为正确`if "%JAVA_VENDOR%"=="Oracle" (`识别我的 JVM。

在最后一次修改之前，内存更改仅部分反映到初始化的 JVM，这意味着有关 PermGen 空间的参数被简单地忽略了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-21T05:40:24.807

我只想分享为我解决问题的方法：我找到了 setDomainEnv.sh 和 echo ${JAVA_OPTIONS} 并注意到 MEM 参数不存在。

所以我在 JAVA_OPTIONS 的最后设置中添加了 MEM_ARGS。

像这样：
JAVA_OPTIONS="${JAVA_OPTIONS} ${MEM_ARGS}" 导出 JAVA_OPTIONS

干杯

# wordpress - 通过修改 htaccess 来阻止机器人

> ID：14944780
> 
> 赞同：1
> 
> 时间：2013-02-18T20:30:12.557
> 
> 标签：wordpress, .htaccess, bots, robots.txt

我试图通过我的 htaccess 文件阻止几个机器人。在 Search Engine Watch 上，建议使用以下内容。我确实在 robots.txt 文件中阻止了这些机器人，但他们忽略了它。

以下是搜索引擎观察的代码：

```
RewriteEngine on 
Options +FollowSymlinks 
RewriteBase / 
RewriteCond %{HTTP_USER_AGENT} ^Baiduspider [NC,OR” 
RewriteCond %{HTTP_USER_AGENT} ^Sogou
RewriteRule ^.*$ - [F” 
```

我当前的 htaccess 文件如下。我将如何使用上面的代码修改我当前的 .htaccess ？我要添加什么以及在哪里添加上述内容？我假设上面的一些内容已经包含在我当前的 htaccess 文件中，不需要重复。

这是我当前的 .htaccess：

```
 # BEGIN WordPress
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule>

   # END WordPress 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T00:03:07.360

# jquery - 无法序列化：动态添加的最后一个表单

> ID：14944781
> 
> 赞同：1
> 
> 时间：2013-02-18T20:30:17.067
> 
> 标签：jquery, html

我尝试使用滚动分页来制作无尽的滚动页面。
当滚动到页面底部时，它会在底部添加新数据和表单，
但是当我再次滚动到底部时，它不会序列化只是动态添加的表单，而是会序列化第一个表单。，对不起我的英语不好！
这是我的 Jquery 的一部分

```
$(function(){
var datastring=$(".passform:last").serialize();
$('#update').scrollPagination({
    'contentPage': 'post_update.php',
    'contentData': {
        data : datastring
        }, 
    'scrollTarget': $(window), 
    'heightOffset': 10, 
    }
});}); 
```

这是我的 HTML 中的第一个表单

```
<form id="passform" class="passform" name="passform">
        <input name="totalpage" type="hidden" value="<? echo($totalpage);?>" />
        <input name="nowpage" type="hidden" value="0" />
        <input name="u_id" type="hidden" value="<? echo($u_id);?>" />
        </form> 
```

这是稍后动态添加的表单

```
 <form class="passform" id="passform2" name="passform2">
        <input name="totalpage" type="hidden" value="<? echo($totalpage);?>" />
        <input name="nowpage" type="hidden" value="1" />
        <input name="u_id" type="hidden" value="<? echo($u_id);?>" />
        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:40:35.273

根据[**插件站点**](http://andersonferminiano.com/jqueryscrollpagination/)`afterLoad`，您可以使用类似于此的选项：

```
var datastring;

$('#update').scrollPagination({
    'contentPage': 'post_update.php',
    'contentData': {
        data: datastring
    },
    'scrollTarget': $(window),
    'heightOffset': 10,
    'afterLoad': function (elementsLoaded) {
        datastring=$(".passform:last").serialize();

        // or use elementsLoaded I suppose which should be the elements just loaded.
        //datastring=$(".passform", elementsLoaded).serialize();
    }
}); 
```

# android - Android：许多按钮，一个 OnClickListener？

> ID：14944784
> 
> 赞同：1
> 
> 时间：2013-02-18T20:30:29.437
> 
> 标签：android, button, onclick

我目前正在开发一个 android 应用程序，并且有几个问题。

1) 在我的应用程序中，有一个 Battery Mod 部分。他们将有超过 50 个按钮。所以，而不是做类似的事情：

```
 public class MyActivity extends Activity implements OnClickListener {

  @Override public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     Button buttonA = (Button) findViewById(R.id.buttonA);    
     buttonA.setOnClickListener(this);
     Button buttonB = (Button) findViewById(R.id.buttonB); 
     buttonB.setOnClickListener(this);
  }

//etc... etc...

public void onClick(View v) {

  switch (v.getId()) {
     case R.id.buttonA: 
      // do something
      break;
     case R.id.buttonB:
      // do something else
      break;
  }
}  
} 
```

有没有更简单的方法来做到这一点？当您单击电池模块按钮时，它将显示模块的图像，以及安装它的选项。除图像外，每个模块都相同。如果没有更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:09:54.837

标签属性是所有视图的一个有用组件，但没有对此进行过多讨论。您可以将视图的标签设置为任何对象：

```
Object foo = new Object();
button1.setTag(foo); 
```

您可以使用它轻松地将标签分配给图像的名称，或者可能是`Drawable`资源的 id。然后`onClick`对所有这些按钮使用一种方法，然后简单地解压缩标签以确定应该如何使用它：

```
public void onClick(View v)
{
    //any button was clicked. Now determine what to do using the tag.

    Object tag = v.getTag();
    //TODO: use tag.

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T22:05:20.620

您可以在布局文件中设置每个按钮的 onClick 回调。就像是：

```
<Button
    android:id="@+id/buttonId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/buttonText"
    android:onClick="onItemClick" /> 
```

然后，添加 Activity/Fragment：

```
public void onItemClick(View view) {
    // Do something in response to button click
} 
```

更多信息在这里：http: [//developer.android.com/guide/topics/ui/controls/button.html#HandlingEvents](http://developer.android.com/guide/topics/ui/controls/button.html#HandlingEvents)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:40:32.623

你可以像这样遍历你的按钮——

```
int[] buttons = { R.id.button1, R.id.button2, ... , R.id.button30 };

for( int i=0; i < buttons.length; i++ ) {
    final Button b = (Button) findViewById( buttons[ i ] );
    b.setOnClickListener( ... );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:40:23.387

不同的是id。所以你不能遍历它，你需要像这样输入它：

```
private static final BUTTON_IDS={R.id.buttonA,R.id.buttonB,R.id.buttonC....R.id.buttonZ}; 
```

然后循环它：

```
 for(int i=0;i<BUTTON_IDS.lenght;i++{
        Button buttonXYZ = (Button) findViewById(BUTTON_IDS[i]);    
        buttonXYZ.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                    if(...){
                        //your spical cases
                    }
                    else{
                        //do awesome generic stuff.
                    }

                    }
                });
    } 
```

# php - 需要帮助在 PHP 中进行降序排序；似乎没有任何效果

> ID：14944785
> 
> 赞同：0
> 
> 时间：2013-02-18T20:30:37.563
> 
> 标签：php, sorting

我有一个带有缩略图和链接的相册样式页面设置。问题是由于某种排序问题，缩略图与文件夹及其连接的链接不匹配。该页面可以在[http://www.remixnightclub.net/album.php](http://www.remixnightclub.net/album.php)以及代码中查看。关于我可以尝试使其正常工作的任何想法？如果这不是太明显的话，我对 php 比较陌生。

```
//if no album selected
if (!$get_album)
{
    echo "<b>Select an album:</b><p />";

    //find each album and display as links
    $y = 0;
    $handle = opendir($base); 

    while (false !== ($file = readdir($handle)))
    {
        if (is_dir($base."/".$file) && $file !="." && $file !=".." && $file != $thumbs)
        {
            echo "<table style='display:inline;' class='nav'><tr><td align='center'><a href='$page?album=$file'><img src='$base/$thumbs/$images[$i]'></a><br /><li><a href='$page?album=$file'>".$file."</a></li></td></tr></table>";
            $i++;

            if ($y==$column1)
                echo "<br />";

            $y = 0;
        }
    }
    closedir($handle);
} 
```

我没有使用数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:39:45.570

该`readdir`函数以基本上随机的顺序返回目录条目；程序喜欢`ls`在显示它们之前麻烦地对它们进行排序，但是它们在文件系统中并没有自然排序。将它们读入一个数组并在迭代之前对其进行排序。

例子：

```
 $files = array();
    while (false !== ($file = readdir($handle)))
    {
        if (is_dir($base."/".$file) && $file !="." && $file !=".." && $file != $thumbs)
        {
            array_push($files, $file);
        }
    }
    closedir($handle);

    rsort($files);

    foreach ($files as $file) 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:48:47.010

另一种解决方案是使用[`glob`](http://php.net/manual/en/function.glob.php). `glob`将为您排序文件：

```
$files = glob($base);
foreach ($files as $file)
{
  // etc. 
```

你甚至可以指定一个模式来只获取你想要的文件，不包括拇指。

**编辑：**如果要降序，则需要反转结果：

```
$files = glob($base);
$inverse_files = array_reverse($files); 
```

# mercurial - 如何判断 Mercurial 合并何时微不足道？

> ID：14944787
> 
> 赞同：4
> 
> 时间：2013-02-18T20:30:49.873
> 
> 标签：mercurial

有时当我这样做`hg merge`然后结帐时`hg status`，什么都没有打印。其他时候，我会看到另一个分支的实际变化。为什么会这样？你能解释一下合并之间的区别吗？

这个问题的重点是：我们将 Mercurial 连接到 Jira 并强制每个提交必须包含一个任务 ID，并且每个此类提交都将在推送之前进行代码审查。但是，我们不需要对“琐碎”的合并进行审查，因此我们在提交钩子中执行此检查：

```
if not ctx.files():
    return ALLOW_COMMIT 
```

但是，我遇到过提交很琐碎的情况（即，Mercurial 完成了所有工作，我不需要解决任何冲突）但`ctx.files()`列表不为空。然而，大多数时候，它工作正常。我本来想为每种情况发布一个示例，但我似乎无法理解这两种情况之间的区别。

基本上我在问：我怎么知道 Mercurial 合并什么时候是微不足道的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:39:29.370

这实际上是一个比你想象的更困难的问题。一两年前，我尝试编写一个插件来生成“合并差异”，仅显示合并中引入的更改：[https ://www.mercurial-scm.org/wiki/MergediffExtension](https://www.mercurial-scm.org/wiki/MergediffExtension)

它确实有一些错误......但如果它显示一个空的合并差异，它肯定意味着合并是“微不足道的”（尽管有一些微不足道的合并会显示差异）。

或者，这个问题/答案可能会有所帮助：[如何检查 Mercurial 中潜在的合并/变基冲突？](https://stackoverflow.com/questions/4086724/how-do-i-check-for-potential-merge-rebase-conflicts-in-mercurial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:32:55.330

您可以重播合并。如果失败了，那可不是一件小事。如果成功，将结果与之前提交的合并进行比较。如果两个合并结果是相同的，这是一个微不足道的，否则有手动调整。

但是，这假设重播使用与原始合并相同的合并算法。不同的 Mercurial 版本和配置可能与此假设相冲突。

### 更新

如果您想在提交合并之前进行这些检查，您可以使用*pre-merge*挂钩来“预览”合并（而不是事后重播）。在钩子中，自动执行建议的合并并检查冲突。没有冲突 → 可能是微不足道的，将合并差异保存在临时文件中。不要忘记放弃由自动合并引起的工作副本更改 ( `hg up -r . -C`)。然后，当人们想要提交她的实际合并时，使用预提交挂钩来检查手动合并是否与存储在临时文件中的自动合并不同。如果不同，则需要进行审核。

然而，虽然这原则上应该有效，但恕我直言，这是一种过度设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:47:58.650

> Why is that happening? Can you explain the differences between the merges?

*   If it was manual merge, merger can prefer only own changes and discard changes from merged branch, i.e have dummy merge (it can be also non-interactive merge with `tool=internal:local`)
*   Rare case - in both files changes (from common parent) may be identical, merge-target will not be changed in this case

**PS**: I don't know, what is `ctx.files()` in hook, but if it's "files, changed in changeset", disabling commit in case of existing such files is Bad Idea (tm) - files may be modified due to clean (no conflicts) merge and in this situation [Martin's idea](https://stackoverflow.com/a/4096340/960558) of replying merge and checking resolve-list seems as rather good approach

# c# - C# 列表 使用 lambda 表达式将前 3 个项目字符串化

> ID：14944788
> 
> 赞同：0
> 
> 时间：2013-02-18T20:31:08.033
> 
> 标签：c#, properties, lambda

您将如何编写 MySpecialFunction 方法以伴随以下代码产生如下所示的输出？我想在逗号分隔的列表中显示前三个属性，然后计算剩余的项目并将它们报告为数字。我想用 lambda 表达式指定属性。感谢您的帮助！

```
public class MyObject
{
  public Text1 {get; set;}
  public Text2 {get; set;}

  public MyObject(string text1, string text2)
  {
    Text1 = text1;
    Text2 = text2;
  }
}

public class Main()
{
  List<MyObject> myObjects = new List<MyObject>();
  myObjects.Add(new MyObject("sample11", "sample12");
  myObjects.Add(new MyObject("sample21", "sample22");
  myObjects.Add(new MyObject("sample31", "sample32");
  myObjects.Add(new MyObject("sample41", "sample42");
  myObjects.Add(new MyObject("sample51", "sample52");

  MySpecialFunction(myObjects, f => f.Text1); 
  MySpecialFunction(myObjects, f => f.Text2);
} 
```

输出字符串是：

> 样品 11、样品 21、样品 31 和另外 2 个。
> 
> 样品 12、样品 22、样品 32 和另外 2 个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:40:41.670

您可以使用类似下面的代码：

```
public class StackOverflow_14944788
{
    private static void MySpecialFunction(IEnumerable<MyObject> list, Func<MyObject, string> selector, int count = 3)
    {
        string result = string.Join(", ", list.Take(count).Select(selector));
        int listSize = list.Count();
        if (listSize > count)
        {
            result += ", and " + (listSize - count) + " more.";
        }

        Console.WriteLine(result);
    }

    public class MyObject
    {
        public string Text1 { get; set; }
        public string Text2 { get; set; }

        public MyObject(string text1, string text2)
        {
            Text1 = text1;
            Text2 = text2;
        }
    }

    public static void Test()
    {
        List<MyObject> myObjects = new List<MyObject>();
        myObjects.Add(new MyObject("sample11", "sample12"));
        myObjects.Add(new MyObject("sample21", "sample22"));
        myObjects.Add(new MyObject("sample31", "sample32"));
        myObjects.Add(new MyObject("sample41", "sample42"));
        myObjects.Add(new MyObject("sample51", "sample52"));

        MySpecialFunction(myObjects, f => f.Text1);
        MySpecialFunction(myObjects, f => f.Text2);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:40:49.030

这是一个通用版本，可以防止异常，并在您的集合中的项目少于*maxCount时安全地处理这种情况。*它还避免了多次枚举`input`：

```
static string MySpecialFunction<T>(IEnumerable<T> input, Func<T, string> selector, int maxCount)
{
    if (input == null)
        throw new ArgumentNullException("input");

    if (selector == null)
        throw new ArgumentNullException("selector");

    if (maxCount <= 0)
        throw new ArgumentOutOfRangeException("maxCount must be greater than 0.");

    var items = input.Select(selector).ToArray();
    if (items.Length < 1)
    {
        return string.Empty;
    }
    else if (items.Length == 1)
    {
        return items[0];
    }
    else
    {
         var joined = String.Join(", ", items, 0, Math.Min(items.Length, maxCount));
         if (items.Length > maxCount)
         {
              joined += String.Format(", and {0} more.", items.Length - maxCount);
         }
         return joined;
    }
} 
```

你会像这样使用它：

```
Console.WriteLine(MySpecialFunction(myObjects, o => o.Text1, 3)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:36:08.773

像这样的东西（[看到它运行](http://ideone.com/l9owo0)）：

```
static string MySpecialFunction(IEnumerable<string> items, int limit)
{
    var sb = new StringBuilder();

    bool delimit = false;
    int count = 0;

    foreach (var item in items) {
        if (limit == 0) {
            ++count;
        } else {
            if (delimit) {
                sb.Append(", ");
            }

            delimit = true;
            sb.Append(item);

            --limit;
        }
    }

    if (count != 0) {
        sb.Append(", and ");
        sb.Append(count);
        sb.Append(" more.");
    }

    return sb.ToString();
} 
```

然后你会像这样执行它：

```
var summary = MySpecialFunction(myObjects.Select(i => i.Text1), 3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T20:39:46.990

```
private String MySpecialFunction<T>(IEnumerable<T> items, Func<T, String> selector)
{
    var prefix = items.Take(3).Select(selector);
    var suffix = " and " + (items.Count() - 3) +" more.";
    return prefix + suffix;
} 
```

# c++ - next_permutation 在函数中被调用后有不同的结果

> ID：14944794
> 
> 赞同：1
> 
> 时间：2013-02-18T20:31:49.720
> 
> 标签：c++, stl

如果我有：

```
bool shuffle(string s){
    return next_permutation(s.begin(), s.end());
}

int main(int argc, char* argv[]){    
        string m = "abcde5";
    do {
        cout << m << endl;
    } while(shuffle(m)); 
```

我会得到：

abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 abcde5 ...

这**不是**我想要的

但是，如果我这样做：

```
int main(int argc, char* argv[]){    
string m = "abcde5";
do {
    cout << m << endl;
} while(next_permutation(m.begin(), m.end())); 
```

我会得到

abcde5 abce5d abced5 abd5ce abd5ec abdc5e abdce5 abde5c abdec5 abe5cd abe5dc abec5d abecd5 abed5c abedc5 ac5bde ac5bed ac5dbe ac5deb ac5ebd ac5edb acb5de acb5ed acbd5e acbde5 ... edcba5

这就是**我想要**的。

有什么不同？我查找了 next_permutation，看起来它返回一个布尔值，所以我现在真的很困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T20:33:31.293

```
bool shuffle(string & s){
                    ^ 
```

You're passing the same string to the function over and over, because you're taking the string by value, and so not modifying the passed argument.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:34:42.310

next_permutation is modifying your string to mantain the current state. With your intermediate function shuffle you modify a copy of the original string. To solve the problem try to define shuffle like this:

```
bool shuffle(string &s) 
```

# entity-framework-5 - 首先使用实体 框架代码进行事务

> ID：14944802
> 
> 赞同：4
> 
> 时间：2013-02-18T20:32:21.907
> 
> 标签：entity-framework-5, transactionscope

[这里](https://stackoverflow.com/questions/815586/entity-framework-using-transactions-or-savechangesfalse-and-acceptallchanges)有一个答案 来解释如何使用实体框架进行事务但是该解决方案首先不适用于代码。我已经尝试过，我的测试表明以下确实有效

```
using (var scope = new TransactionScope())
{
        DBContext1.SaveChanges()
        If (ForceFailure) return 0  // used in testing
        DBContext2.SaveChanges()
        scope.Complete();
 } 
```

但是我感到紧张，因为我不再将参数传递给 SaveChanges 或调用 AcceptAllChanges

如何确定我是否可以信任我的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:11:17.343

`SaveChanges(Boolean)`是的一部分`ObjectContext`，不是`DbContext`。请注意，不推荐使用 in 中的方法`SaveChanges(Boolean)`以`ObjectContext`支持[`SaveChanges(SaveOptions)`](http://msdn.microsoft.com/en-us/library/dd395500.aspx).

如果您仍想使用`DbContext`，您可以重载自己的`SaveChanges`方法以使用[IObjectContextAdapter.ObjectContext](http://msdn.microsoft.com/en-us/library/gg696590.aspx)，例如使用扩展方法。

# c# - 清理方法中出现意外的“无法访问已处理的对象”

> ID：14944808
> 
> 赞同：2
> 
> 时间：2013-02-18T20:32:39.983
> 
> 标签：c#, wpf, kinect, objectdisposedexception

当我关闭我的 WPF 应用程序时，我面临一个令人费解的处置对象问题。如果您发现我的逻辑中有任何错误，请指出。

我有一个`ColorManager`带`update()`方法的类，如下所示。

```
public void Update(ColorImageFrame frame)
{
    byte[] pixelData = new byte[frame.PixelDataLength];

    frame.CopyPixelDataTo(pixelData);

    if (Bitmap == null)
    {
        Bitmap = new WriteableBitmap(frame.Width,
                                     frame.Height,
                                     96,
                                     96,
                                     PixelFormats.Bgr32,
                                     null);
    }
    // draw bitmap

    RaisePropertyChanged(() => Bitmap);   
} 
```

我在单独的线程中运行此方法。在我的`MainWindow.xaml.cs`我有以下内容：

```
 private void Initialise()
    {
        if (kinectSensor == null)
            return;
        // start kinect sensor        
        kinectSensor.Start();

        updateColourStreamThread = new Thread(new ThreadStart(colorStreamDisplay));
        updateColourStreamThread.Name = "updateColourStreamThread";
        updateColourStreamThread.Start();

        // ...some more codes
     }

        void colorStreamDisplay()
        {
            while(isDisplayActive)
            {
                using (var frame = kinectSensor.ColorStream.OpenNextFrame(500))
                {
                    if (frame == null) continue;

                    if (displayDepthStream) continue;

                    Dispatcher.Invoke(new Action(() => colorManager.Update(frame)));
                }
            }
        } 
```

单击关闭按钮后，我有以下方法进行`MainWindow.xaml.cs`清理。

```
 private void Clean()
    {
        isDisplayActive = false;
        // some other codes

        if (kinectSensor != null)
        {
            updateColourStreamThread.Abort();
            updateDepthStreamThread.Abort();
            updateSkeletonStreamThread.Abort();

            kinectSensor.Stop();
            kinectSensor = null;
            Console.WriteLine("Closed successfully");
        } 
```

`frame.CopyPixelDataTo(pixelData);`单击关闭按钮后，我的应用程序抛出“无法访问已处理的对象” 。

我将 bool 值切换为 false 以停止循环，然后中止线程，并停止 kinect 设备。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:44:15.520

当您将布尔值设置为 false 时，应用程序将退出 while 循环：

1）设置你`bool`为假

```
 isDisplayActive = false; 
```

2) 将退出此循环：

```
 while(isDisplayActive)
        {
            using (var frame = kinectSensor.ColorStream.OpenNextFrame(500))
            {
                if (frame == null) continue;
                if (displayDepthStream) continue;

                Dispatcher.Invoke(new Action(() => colorManager.Update(frame)));
            }
        } 
```

3）所以你的框架也会超出范围。因此，它将被处置...

```
using (var frame = kinectSensor.ColorStream.OpenNextFrame(500)) 
```

4）虽然你的主线程还没有执行`Thread.Abort`。

5）因此，您`CopyPixelDataTo`将在已处置的`frame`对象上执行。

```
frame.CopyPixelDataTo(pixelData); 
```

6）和kaboom，你有你的对象处理异常。

* * *

## Thread.Abort 是个坏主意。

你永远不知道执行线程在执行之前走*了多远*，这会导致各种讨厌的副作用。在此问答中阅读更多信息：[使用 Thread.Abort() 有什么问题](https://stackoverflow.com/questions/1559255/whats-wrong-with-using-thread-abort)

在你的情况下我会做的是更换

```
while(isDisplayActive) 
```

有类似的东西

```
while(colorThingyThreadIsBusy) 
```

并在您准备好（=完成处理）`colorThingyThreadBusy`时将 bool 设置为 false 。`Thread`

为了优雅地关闭您的应用程序，我将实现[CancellationToken](http://msdn.microsoft.com/nl-nl/library/system.threading.cancellationtoken.aspx)而不是中止线程。

# java - 卡雷尔机器人：找不到符号

> ID：14944809
> 
> 赞同：0
> 
> 时间：2013-02-18T20:33:01.323
> 
> 标签：java, robot

在整个迷宫中，我试图让我的机器人在每个人不在的十字路口放下一个东西（putThing）。RobotSE 有一个布尔方法 isBesideThing()，我正在尝试使用它。但是，我不断收到编译错误：

```
MazeIDudItz.java:24: cannot find symbol
symbol  : method isBesideThing()
location: class MazeBot
        if(!this.isBesideThing()) 
```

我已经尝试了所有我知道该怎么做的事情。我将其更改为包含返回值的公共布尔方法，但无济于事。这是我的 RobotSE 类扩展器。这是我的第一堂编程课，所以如果我不清楚或者我说的不完全有道理，我提前道歉。我知道当我收到那个错误时，我拼错了一些东西，忘记了一些东西，或者没有导入一些东西。我应该只需要导入 becker.robots.*；因为 RobotSE 是一个子类。

```
class MazeBot extends RobotSE
{

  public MazeBot(City theCity, int str, int ave, Direction dir, int numThings)
  {
    super(theCity, str, ave, dir, numThings);
  }   

  private boolean isAtEndSpot()
  {
    return (this.getAvenue() == 9 && this.getStreet() == 10);   
  }

  public void dontPickThatUp()
  {
    while(!this.isBesideThing())
    {  
      this.putThing();
    }    
  }   

  public void moveCheck()
  {
    if(this.frontIsClear())
    {  
      this.move();
    }
    else
    {   
      this.turnAround();
    }
  }                   

  public void checkRight()
  {
    this.turnRight();
    if (this.frontIsClear())
    {   
      this.moveCheck();
    }
    else
    {  
      this.turnLeft();    
      this.moveCheck();
    }
  }

  public void NavigateMaze()
  {
    while (!this.isAtEndSpot())
    {
      this.checkRight();
    }

  }   
} 
```

感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:37:09.717

我会说要[彻底阅读他们的文档。](http://www.learningwithrobots.com/doc/becker/robots/RobotSE.html)

方法签名是

```
public boolean isBesideThing(IPredicate kindOfThing) 
```

所以你必须匹配签名并传递一个`IPredicate`.

# ssrs-2008 - SSRS 报告，希望根据行内的值显示行

> ID：14944810
> 
> 赞同：2
> 
> 时间：2013-02-18T20:33:03.883
> 
> 标签：ssrs-2008, multiple-columns

我的报告本质上比较了两个模板。我有两列，一列用于模板 a，一列用于模板 b。然后我有大约 200 个唯一行（模板的字段/属性）。

```
Fields   templateA    templateB
 Cass         1           1
 Foreign      1           0
 Vacant       0           0
 APO/FPO      32 
```

我想要做的只是显示模板 a 和 b 的值不同的行，例如 Foreign 和 APO。我知道我可以使用单独的行显示来隐藏它们。然而，为 200 行单独写这个是可笑的，我将来可能需要重复这个任务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:53:39.107

你不能通过过滤你的 tablix 来做到这一点。

右键单击 tablix，单击`tablix properties`.

在`Filter`选项卡下，添加新的过滤规则，并定义以下内容：

**表达式**：`templateA`

**运营商**：`<>`

**价值**：`templateB`

# php - 找不到 PHPMailer 附件 - 在文件系统上找不到文件

> ID：14944815
> 
> 赞同：0
> 
> 时间：2013-02-18T20:33:15.347
> 
> 标签：php, phpmailer

我每次得到的只是'文件系统上找不到文件'

```
<?php 
    if($_POST[upload])
    {    
        require_once('incs/phpmailer/phpmailer.php');
        $upload = $_FILES['upload']['tmp_name'];
        $mail = new phpmailer;
        $mail->AddAddress("email@email.com", "Email");
        $mail->AddReplyTo("info@site.com", "Information");
        $mail->WordWrap = 50;    // set word wrap
        $mail->AddAttachment($upload);  // add attachment
        $mail->IsHTML(true);    // set email format to HTML
        $mail->Subject = "Here is the subject";
        $mail->Body = "This is the message body";
        $mail->Send(); // send message
    }      
?> 
```

有谁知道为什么会这样？

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:37:14.390

尝试这个，

```
$upload = $_FILES['upload']['name']; 
```

# c# - 如何禁用 wpf 窗口？

> ID：14944821
> 
> 赞同：0
> 
> 时间：2013-02-18T20:33:52.560
> 
> 标签：c#, wpf

我不知道这是否可能，但是我调用以下方法在 wpf 中显示一个窗口：

```
Window window = Window.Show(); 
```

窗口已经加载后，我想禁用窗口，即我不希望用户能够关闭窗口，直到满足某些条件......这可能吗？

我试过：

`window.IsEnabled = false`，这可行，但用户仍然可以关闭窗口...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:39:28.117

`Closing`如果不满足条件，则处理事件并取消：

```
private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
       if (/*condition not true*/)
        e.Cancel = true;
    } 
```

但是，用户可以找到其他方法来关闭窗口，也许是关机？:)

# java - 如何使用 bufferedreader 读取我的文本文件并将其插入 Java 堆栈

> ID：14944826
> 
> 赞同：-2
> 
> 时间：2013-02-18T20:34:16.083
> 
> 标签：java, bufferedreader, stack

这是我的代码，我对堆栈很陌生，不知道如何实现它们，尤其是使用缓冲阅读器。我不知道如何实现编程新手的堆栈代码。我必须编写一个程序来反转从我的 txt 文件中读取的方向并将它们打印出来。

```
try
{
    BufferedReader in = new BufferedReader(new FileReader("GoingThere.txt"));
    String line = in.readLine();
    while(line != null)
    {
           line.replace("West","East");
           line.replace("East","West");
           line.replace("North", "South");
           line.replace("South", "North");      
           line = in.readLine();
    }
}
catch(FileNotFoundException e)
{ 
  System.out.println("File Not Found"); 
}
catch(IOException e)
{ 
  System.out.println("IO Exception Found.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:54:38.053

你的问题让我很困惑。但是，根据您的代码和文本文件的名称，我想我可以推断出您正在尝试做什么。我猜您有一个学校作业，它为您提供了 A -> B 的方向列表。您需要使用堆栈反转这些方向以给出 B -> A。基于该假设，请尝试：

```
Stack st = new Stack();
while (line != null) {
    st.push(line);
    line = in.readLine();
} 
```

然后，您可以使用`st.pop()`以相反的顺序从堆栈中恢复您的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:14:20.847

```
The Same of your Codes but I Added The Stack  Hope you Understand it 
The implementation of stack :
Stack <String> stack = new Stack<String>();
stack.push(String);
stack.pop();

here is the  Same Example :

       Stack <String> stack = new Stack<String>();

    try
        {
        BufferedReader in = new BufferedReader(new FileReader("GoingThere.txt"));
        String line = in.readLine();
        String a,b,c,d;
        while(line != null)
        {
        System.out.println(a=line.replace("West","East"));
        System.out.println(b=line.replace("East","West"));
        System.out.println(c=line.replace("North", "South"));
        System.out.println(d=line.replace("South", "North"));

        stack.push(a);
        stack.push(b);
        stack.push(c);
        stack.push(d);    
        System.out.println("----------------- Stack Pushed -----------------");
        line = in.readLine();
        }
        System.out.println("Pop is Begin :");

        while(!stack.isEmpty()){

            System.out.println(stack.pop());
        }
        }

        catch(FileNotFoundException e)
        { 
          System.out.println("File Not Found"); 
        }
        catch(IOException e)
        { 
          System.out.println("IO Exception Found.");
        } 
```

# caching - 运行时缓存重新配置

> ID：14944830
> 
> 赞同：1
> 
> 时间：2013-02-18T20:34:23.077
> 
> 标签：caching, simulation, computer-architecture

我正在做一个项目，我必须通过实施启发式算法为特定基准找到最佳缓存配置。我完成了算法部分，但没有实现运行时重新配置（块大小、关联性、行大小）技术的想法。我正在使用 simplescalar wattch 工具。

编写 Perl 脚本来实现每个基准的算法并驱动模拟器直到我们实现最佳缓存配置是否可行。如果是，那么是否有可能找到一个例子。

请帮我！

# ios - iOS 本地通知会重复，但设置在过去。它会火吗？

> ID：14944835
> 
> 赞同：0
> 
> 时间：2013-02-18T20:34:30.217
> 
> 标签：ios, objective-c, ios6, uilocalnotification

这里有没有人知道iOS如何处理安排在过去某个日期但设置了重复间隔的本地通知？将来会处理它们还是会被忽略？

我问是因为我的应用程序的 SQLite 数据库中存储了两种类型的通知日期。一个正在重复，另一个不会重复。如果我在数据库中更改或删除其中一个（通过表格视图），我将不得不重置所有通知并从数据库中创建新通知（如果我在这里错了，请纠正我！）。问题是重复的日期可能已经过去了，但我仍然需要它们启动。

我在 Google 或此处找不到与我的问题相关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:48:52.860

好的，我今天只是在真正的 iOS 6.0.1 设备上对其进行了测试。即使触发日期设置在过去，也会以正确的间隔弹出具有重复间隔的通知。我认为在未来的版本中它也将起作用。

# python - 鼻子在目录中收集测试

> ID：14944837
> 
> 赞同：0
> 
> 时间：2013-02-18T20:34:41.933
> 
> 标签：python, nose

我正在尝试从 python 脚本中用鼻子收集特定目录中的所有测试。

我的目录结构看起来像

```
script.py
test_dir/
  testsetA/testA1.py
           testA2.py
           __init__.py
  testsetB/testB1.py
           testB2.py
           __init__.py
  testsetC/... 
```

从 script.py，我像鼻子一样流鼻涕

```
args = ['-w test_dir/testsetA/', '--collect-only']   
nose.run(argv=args) 
```

问题是，它似乎收集了 testsetA、B、C 等中的所有测试，而不是像我期望的那样只收集 testsetA 中的两个。我可能可以使用 --with-id 选项并找出哪些测试在 testsetA 中，但我宁愿只从我指定的目录中收集测试。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T16:29:27.120

如果你使用的是 Python 3.X，你应该这样写：

```
args = ['--py3where', 'test_dir/testsetA/', '--collect-only'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:56:05.653

`-w`您应该从目录中拆分：

```
args = ['-w', 'test_dir/testsetA/', '--collect-only'] 
```

否则`nose`会认为这`'-w test_dir/testsetA/`是一个单一的论点。

# qt - Object::connect: No such slot AllWidgets::m_pSpinBoxOut->setText

> ID：14944842
> 
> 赞同：2
> 
> 时间：2013-02-18T20:34:56.247
> 
> 标签：qt, cmake, signals-slots

编译我的 cpp 文件时收到以下错误：

```
Object::connect: No such slot AllWidgets::m_pSpinBoxOut->setText( const QString &) in Widgets.cpp:148 
```

这是第 148 行：

```
 connect(m_pSpinBox,SIGNAL(valueChanged(double)),this,SLOT(m_pSpinBoxOut->setText( const QString &))); 
```

第一个 m_pSpinBox 只是一个 SpinBox 并没有问题，但它说 m_pSpinBoxOut（它是一个 QLabel）没有 setText 插槽......实际上在 QT 网站上显示它有它......

我还尝试将第 148 行更改如下：

```
connect(m_pSpinBox,SIGNAL(valueChanged(double)),m_pSpinBoxOut,SLOT(setText("demo")));

connect(m_pSpinBox,SIGNAL(valueChanged(double)),m_pSpinBoxOut,SLOT(QLabel::setText("demo")))

connect(m_pSpinBox,SIGNAL(valueChanged(double)),m_pSpinBoxOut,SLOT(QString::setText("demo"))); 
```

只有警告信息发生了变化。分别：

```
Object::connect: No such slot QLabel::setText("demo")
Object::connect: No such slot QLabel::QLabel::setText("demo")
Object::connect: No such slot QLabel::QString::setText("demo") 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:07:43.400

```
connect(m_pSpinBox,SIGNAL(valueChanged(double)),
        m_pSpinBoxOut,SLOT(setText(const QString&))); 
```

必须是接收方法的名称和参数，拥有`SLOT`的事实无关紧要。arg 声明也不能包含表达式（即）。`this``m_pSpinBoxOut``QLabel::setText("demo")`

我还应该指出，这种连接无论如何都不起作用，因为 a`double`不能隐式转换为 a `QString`。所以你必须创建一个转换槽：

```
connect(m_pSpinBox,SIGNAL(valueChanged(double)),
        this,SLOT(converterSlot(double)));
...
AllWidgets::converterSlot(double number)
{
    m_pSpinBoxOut->setText(QString::number(number));
} 
```

如果您使用的是 Qt 5，您也可以使用 lambda 来执行此操作，而无需额外的插槽。

# c# - 在字符串中插入字符串

> ID：14944845
> 
> 赞同：3
> 
> 时间：2013-02-18T20:35:03.920
> 
> 标签：c#, string

我在字符串中插入子字符串时遇到问题我想要注入`"/thumbs"`到字符串路径中

```
/media/pictures/image1.jpg 
```

我想将 /thumbs/ 注入到路径的最后一部分，如下所示：

```
/media/pictures/thumbs/image1.jpg 
```

linq可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:43:55.120

对于像路径操作这样的东西，最好使用`System.IO`命名空间，特别是`Path`对象。你可以做类似的事情；

```
string path = "/media/pictures/image1.jpg";
string newPath = Path.Combine(Path.GetDirectoryName(path), "thumbs", Path.GetFileName(path)).Replace(@"\", "/"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T20:39:37.700

试试这个，你得到最后一个正斜杠的索引并在那个点插入额外的字符串。

不确定为什么要投反对票，但我保证它有效。

```
string original = "/media/pictures/image1.jpg";
string insert = "thumbs/";
string combined = original.Insert(original.LastIndexOf("/") + 1, insert); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T20:42:49.020

> linq可以吗？

您不需要在此过程中使用*Linq*。您可以使用**[String.Insert()](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)**方法；

> 返回一个新字符串，其中指定字符串插入到此实例中的指定索引位置。

```
string s = "/media/pictures/image1.jpg";
string result = s.Insert(s.LastIndexOf('/'), "/thumbs");
Console.WriteLine(result); 
```

输出;

```
/media/pictures/thumbs/image1.jpg 
```

这是一个**[演示](http://ideone.com/6aPDoB)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T20:40:10.230

我会使用[Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)类，最好是在您自己的实用程序方法中或作为扩展方法。

```
string pathWithThumbs = Path.Combine(Path.Combine(Path.GetDirectoryName(path), "thumbs"), Path.GetFileName(path)); 
```

Linq 在这里似乎格格不入；你不是真的在查询集合。另外，`Path`该类会自动为您处理大部分斜线和角案例。

编辑：正如@juharr 指出的那样，从 4.0 开始，有一个方便的重载，使其更加简单：

```
string pathWithThumbs = Path.Combine(Path.GetDirectoryName(path), "thumbs", Path.GetFileName(path)); 
```

EDITx2：Hrrrm，正如@DiskJunky 指出的那样，这种路径用法实际上会将您的正斜杠换成反斜杠，所以只需`Replace("\\", "/")`在那里打个电话。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T20:46:50.363

我会使用 System.IO 类称为`Path`.

这是仅用于演示目的的 long(er) 版本：

```
string pathToImage = "/media/pictures/image1.jpg";

string dirName = System.IO.Path.GetDirectoryName(pathToImage);
string fileName = System.IO.Path.GetFileName(pathToImage);
string thumbImage = System.IO.Path.Combine(dirName, "thumb", fileName);

Debug.WriteLine("dirName: " + dirName);
Debug.WriteLine("fileName: " + fileName);
Debug.WriteLine("thumbImage: " + thumbImage); 
```

这是一个单行：

```
Debug.WriteLine("ShortHand: " + Path.Combine(Path.GetDirectoryName(pathToImage), "thumb", Path.GetFileName(pathToImage))); 
```

我得到以下输出：

```
dirName: \media\pictures
fileName: image1.jpg
thumbImage: \media\pictures\thumb\image1.jpg

ShortHand: \media\pictures\thumb\image1.jpg 
```

# ruby-on-rails - 设计注册控制器与我自己的“注册”控制器冲突

> ID：14944847
> 
> 赞同：1
> 
> 时间：2013-02-18T20:35:07.677
> 
> 标签：ruby-on-rails, devise, routes

由于我使用 Daniel Kehoe 出色的 Rails Composer 构建了一个小型应用程序，所以我在这里有点麻烦。我也在使用设计进行身份验证。

我有一个好主意来创建一个“注册”控制器/模型，以使我的用户能够注册他们想要参加的不同课程。显然，这对我的应用程序造成了严重破坏，我想知道摆脱这种泡菜的最佳方法是什么:)

我有两个选择，希望 Rails 专家加入：

1.  重命名我的注册控制器并单独保留设计（我猜如果更新设计等，从长远来看这会更好。）
2.  更改设计路线在 config/routes.rb 文件中的命名方式。

我应该计划做什么改变？

谢谢你的帮助！

弗朗西斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:58:19.833

将您的注册控制器包装在模块/命名空间中。

```
Classroom::RegistrationsController
end 
```

然后确保注册控制器的视图在教室目录中。

```
-views
--classroom
---registrations
----new.html.erb 
```

在您的 routes.rb 中，将注册路由放在命名空间中。

```
namespace :classroom do
 resources :registrations
end 
```

# opencv - OpenCV Masking 错误结果撕裂

> ID：14944848
> 
> 赞同：1
> 
> 时间：2013-02-18T20:35:09.557
> 
> 标签：opencv, image-processing, javacv

我正在尝试将二进制图像掩盖到原始图像上，大多数情况下它都可以工作，但是我偶尔会得到这个：

![在此处输入图像描述](../Images/d9f24a86575cedbe5c28704cf247d195.png)

关于为什么会发生这种情况以及如何解决它的任何想法？提前致谢 ：）

编辑：好的，所以我有 2 张图像，我发现它们之间的区别，最终是手。

![在此处输入图像描述](../Images/58e16ebfae0a82022673173d0dccc2a6.png) ![在此处输入图像描述](../Images/23e8be8dfa3df94364ed94c20d1a3603.png)

好结果的例子

![在此处输入图像描述](../Images/c803cad895e8faf9b0ba4e6b55416dac.png)

然后我将差异图像转换为灰度，将图像二值化（使用 cvThreshold），最后将结果用作 input2 上的掩码（带有手的原始图像）。最后的操作 cvCopy 似乎是造成这种撕裂的原因，请注意它有时只会发生（大约 1/5 次）。

这是我的 Main.java 的样子：

```
 import com.googlecode.javacv.CanvasFrame;
    import com.googlecode.javacv.cpp.opencv_core.IplImage;
    import com.googlecode.javacv.cpp.opencv_imgproc.CvHistogram;

    import static com.googlecode.javacv.cpp.opencv_highgui.*;

    public class Main {

private static CanvasFrame AbsDiffFrame = new CanvasFrame("cvAbsDiff");
private static CanvasFrame SubDiffFrame = new CanvasFrame("cvSub");
private static CanvasFrame grayscale = new CanvasFrame("cvCvtColor CV_RGB2GRAY");
private static CanvasFrame binary = new CanvasFrame("cvThreshold CV_THRESH_BINARY");
private static CanvasFrame hsv = new CanvasFrame("cvCvtColor CV_RGB2HSV");
private static CanvasFrame cvMultiplyAcc = new CanvasFrame("cvMultiplyAcc");
private static CanvasFrame hsv2 = new CanvasFrame("cvCvtColor CV_RGB2HSV");
private static IplImage input1;
private static IplImage input2;

public static void main(String[] args) {
    // TODO Auto-generated method stub

    AbsDiffFrame.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);
    SubDiffFrame.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);
    grayscale.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);
    binary.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);
    hsv.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);
    hsv2.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);
    cvMultiplyAcc.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);

    input1 = cvLoadImage("input1.jpg",CV_LOAD_IMAGE_COLOR);
    input2 = cvLoadImage("input2.jpg",CV_LOAD_IMAGE_COLOR);

    ImageProcessor imgProc = new ImageProcessor();

    AbsDiffFrame.showImage(imgProc.getAbsDifference(input1, input2));

    IplImage img = imgProc.getSubDifference(input2,input1);

    SubDiffFrame.showImage(img);

    IplImage hsvImg = imgProc.rgbToHSV(input2);

    hsv.showImage(hsvImg);

    IplImage gray = imgProc.rgbToGrey(img);

    grayscale.showImage(gray);

    IplImage binaryImg = imgProc.getBinary(gray);

    binary.showImage(binaryImg);

    IplImage multiplyImage = imgProc.cvCopyImages(binaryImg, input2);

    cvMultiplyAcc.showImage(multiplyImage);

    IplImage hsvImg2 = imgProc.rgbToHSV(multiplyImage);

    hsv2.showImage(hsvImg2);

    CvHistogram hueHistogram = imgProc.getHueHistogram(hsvImg2);

    System.out.println("Done");

    System.out.printf("max hist value is: ", imgProc.getHistMaxValue(hueHistogram));

} 
```

}

这里还有 cvCopyImage 方法：

```
 public static IplImage cvCopyImages (IplImage binary, IplImage color){

    IplImage result = cvCreateImage(new CvSize(color.width(),color.height()),color.depth(),3);

    cvCopy(color,result,binary);

    return result;

} 
```

# python - Python绘制中值

> ID：14944851
> 
> 赞同：2
> 
> 时间：2013-02-18T20:35:33.477
> 
> 标签：python, numpy, matplotlib, time-series

我是 Numpy 和 matplotlib 的新手。

我有一些数据要针对日期绘制，我只想绘制每个日期的中值。每个日期的数据点数不同。

我创建了一个像这样的二维 numpy 数组：

```
[[date1, v1], [date1, v2], [date2, v3], [date3, v4], [date3, v5], [date3, v6]] 
```

ETC....

现在我迷路了。如何绘制每日中位数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:39:08.317

对于中位数，只需使用 numpy.median：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.median.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.median.html)

有关日期，请查看 matplotlib 日期文档：

[http://matplotlib.org/api/dates_api.html](http://matplotlib.org/api/dates_api.html)

这是一个简单的日期演示，可能会对您有所帮助：

[http://matplotlib.org/examples/api/date_demo.html](http://matplotlib.org/examples/api/date_demo.html)

如果您在查看这些内容后仍然卡住，请尝试发布您的一些代码或提出更具体的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:21:17.303

对于时间序列，我强烈建议使用[`pandas`](http://pandas.pydata.org/)基于`numpy`.

它有一些方便的方法来处理像你这样的问题。

```
In [5]: import pandas as pd

# generate some data
In [6]: idx = pd.date_range('2013-01-01', pd.datetime.today(), freq='H')

In [7]: s = pd.Series(np.random.random_sample(idx.size) * 1000, index=idx)

In [8]: s.describe() # print some statistics 
Out[8]: 
count    1184.000000
mean      499.817905
std       291.446537
min         0.292728
25%       252.537037
50%       485.828521
75%       758.535148
max       999.681320

In [9]: s.index
Out[9]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2013-01-01 00:00:00, ..., 2013-02-19 07:00:00]
Length: 1184, Freq: H, Timezone: None

# downsample to daily using median value for a day and plot it
In [10]: s.resample('D', how='median').plot()
Out[10]: <matplotlib.axes.AxesSubplot at 0x3d88ad0> 
```

![pandas_example](../Images/d89962d31e03213a510f21647842d470.png)

# jquery - 在 IIS 8 中运行的 jQuery POST 到 MVC3 应用程序的 400（错误请求）错误

> ID：14944853
> 
> 赞同：0
> 
> 时间：2013-02-18T20:35:47.617
> 
> 标签：jquery, asp.net-mvc-3, iis, iis-8

正如标题所说，在我的 MVC3 应用程序中，我正在向控制器发送 POST 请求并收到 400 错误。

该请求包含一个 id，控制器使用该 id 检索文件的内容并在响应中将其发回。

我阅读了一些相关的 stackoverflow 帖子，这些帖子表明它可能是由我正在使用的硬编码 URL 引起的，但此后我使用了 URL 帮助程序并继续遇到此问题。

这是我的控制器：

```
[HttpPost]
public ActionResult GetContent(string id)
{
    // Decrypt string to get filepath.
    string file = EncryptStrings.DecryptAESString(id);

    string content = String.Empty;

    if(System.IO.File.Exists(file))
    {
        content = System.IO.File.ReadAllText(file);
    }

    return Content(content);
} 
```

我的 jQuery 代码：

```
function setContent(id) {
    $.post('@Url.Action("GetContent", "Content")/' + id, null,
        function (data) {
            $('#article').html(data);
            bringToFront('article-container');
    }, 'text');
} 
```

以及请求的示例（我增加了 maxUrlLength 以允许长请求）：

```
http://localhost/KBLite/Content/GetContent/545E55A34A5B6EE892286D481D177C149A003AAA0F44FAAD432970A9BADA5B79713344D2D80580DCA3345D520742E358A2089BF2E01EA553203AFCA27C96B4150923D33EC57D93F55241F9398D217E3B38609449CB64DCD2D2C31C850E5EBB452CC5A8F3B2F71D0B30E282D16F394FDC60696C3661372B1D200AE1B45371473DD7DC077BEAE475CD7D498F0AEDD63727 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:45:03.423

根据“[了解 400 Bad Request Exception](http://weblogs.asp.net/imranbaloch/archive/2010/04/23/understanding-400-bad-request-exception.aspx) ”：

> 任何单独的路径段（不包括协议、服务器名称和查询字符串的 URL 部分，例如 [http://a.com/b/c?d=e](http://a.com/b/c?d=e)，这里 b 和 c 是单独的路径) 不得超过 260 个字符。http.sys 也不允许包含超过 255 个路径段的 URL。

我相信您的 id 被解释为路径段，因此会发生此 400 响应。您配置的`maxUrlLength`仅用于总 url 长度，而不是其中的一部分。

**编辑**：有一个简单的解决方法。将您的网址更改为：

```
http://localhost/KBLite/Content/GetContent?id=545E55A34A5B6EE892286D481D177C149A003AAA0F44FAAD432970A9BADA5B79713344D2D80580DCA3345D520742E358A2089BF2E01EA553203AFCA27C96B4150923D33EC57D93F55241F9398D217E3B38609449CB64DCD2D2C31C850E5EBB452CC5A8F3B2F71D0B30E282D16F394FDC60696C3661372B1D200AE1B45371473DD7DC077BEAE475CD7D498F0AEDD63727 
```

注意`?id=`. 这将改变您的 id 在 ASP.NET 内部解析的方式，它不会被视为路径段。

# asp.net - 我可以将 OnTextChanged 事件传递给特定的 GridViewRow 以加快处理速度吗？

> ID：14944859
> 
> 赞同：0
> 
> 时间：2013-02-18T20:36:04.870
> 
> 标签：asp.net, vb.net

**问题**：如何修改`UpdateColumns()`方法（如下）或`OnTextChanged`事件调用以仅使用触发事件的行？

现在，我正在通过`UpdateColumns()`使用事件调用方法来更新 GridView 单元格值，`OnTextChanged`如下所示：

```
<asp:TemplateField HeaderStyle-Width="35px">
    <ItemTemplate>
        <asp:TextBox OnTextChanged="UpdateColumns" ID="txtJan" CssClass="row"
        runat="server" AutoPostBack="True" Text='<%# Eval("Jan","{0:#0}") %>'>
        </asp:TextBox> 
    </ItemTemplate>
    <HeaderTemplate>
        Jan
    </HeaderTemplate>
    <FooterTemplate>
        <asp:TextBox ID="txtJan" CssClass="row" runat="server"></asp:TextBox>
    </FooterTemplate>
</asp:TemplateField> 
```

下面是事件触发的`UpdateColumns()`方法。`OnTextChanged`它遍历表中的每一行并进行计算。我的 GridView 中有 15 列和 10 行，因此该操作需要大约 1 秒才能完成。如何修改我的方法以仅查看调用它的行？本质上，我只是想让操作执行得更快，而不是做无用的计算。

```
Protected Sub UpdateColumns(ByVal sender As Object, ByVal e As EventArgs)
    Dim errors As New StringBuilder

    Try
        For Each row As GridViewRow In gvBuildingBlocks.Rows

            _tjan = CType(row.FindControl("txtJan"), TextBox)
            _tfeb = CType(row.FindControl("txtFeb"), TextBox)
            _tmar = CType(row.FindControl("txtMar"), TextBox)
            _tapr = CType(row.FindControl("txtApr"), TextBox)
            _tmay = CType(row.FindControl("txtMay"), TextBox)
            _tjun = CType(row.FindControl("txtJun"), TextBox)
            _tjul = CType(row.FindControl("txtJul"), TextBox)
            _taug = CType(row.FindControl("txtAug"), TextBox)
            _tsep = CType(row.FindControl("txtSep"), TextBox)
            _toct = CType(row.FindControl("txtOct"), TextBox)
            _tnov = CType(row.FindControl("txtNov"), TextBox)
            _tdec = CType(row.FindControl("txtDec"), TextBox)
            _tq1 = CType(row.FindControl("txtQ1"), TextBox)
            _tq2 = CType(row.FindControl("txtQ2"), TextBox)
            _tq3 = CType(row.FindControl("txtQ3"), TextBox)
            _tq4 = CType(row.FindControl("txtQ4"), TextBox)
            _th1 = CType(row.FindControl("txtH1"), TextBox)
            _th2 = CType(row.FindControl("txtH2"), TextBox)
            _tt = CType(row.FindControl("txtYear"), TextBox)

            If IsNumeric(_tjan.Text) And IsNumeric(_tfeb.Text) _
            And IsNumeric(_tmar.Text) And IsNumeric(_tapr.Text) _
            And IsNumeric(_tmay.Text) And IsNumeric(_tjun.Text) _
            And IsNumeric(_tjul.Text) And IsNumeric(_taug.Text) _
            And IsNumeric(_tsep.Text) And IsNumeric(_toct.Text) _
            And IsNumeric(_tnov.Text) And IsNumeric(_tdec.Text) Then
                _bbjan = Decimal.Parse(_tjan.Text)
                _bbfeb = Decimal.Parse(_tfeb.Text)
                _bbmar = Decimal.Parse(_tmar.Text)
                _bbapr = Decimal.Parse(_tapr.Text)
                _bbmay = Decimal.Parse(_tmay.Text)
                _bbjun = Decimal.Parse(_tjun.Text)
                _bbjul = Decimal.Parse(_tjul.Text)
                _bbaug = Decimal.Parse(_taug.Text)
                _bbsep = Decimal.Parse(_tsep.Text)
                _bboct = Decimal.Parse(_toct.Text)
                _bbnov = Decimal.Parse(_tnov.Text)
                _bbdec = Decimal.Parse(_tdec.Text)
                _bbq1 = _bbjan + _bbfeb + _bbmar
                _bbq2 = _bbapr + _bbmay + _bbjun
                _bbq3 = _bbjul + _bbaug + _bbsep
                _bbq4 = _bboct + _bbnov + _bbdec
                _bbh1 = _bbq1 + _bbq2
                _bbh2 = _bbq3 + _bbq4
                _bbtt = _bbh1 + _bbh2

                _tq1.Text = _bbq1.ToString()
                _tq2.Text = _bbq2.ToString()
                _tq3.Text = _bbq3.ToString()
                _tq4.Text = _bbq4.ToString()
                _th1.Text = _bbh1.ToString()
                _th2.Text = _bbh2.ToString()
                _tt.Text = _bbtt.ToString()

                _totalJan += _bbjan
                _totalFeb += _bbfeb
                _totalMar += _bbmar
                _totalApr += _bbapr
                _totalMay += _bbmay
                _totalJun += _bbjun
                _totalJul += _bbjul
                _totalAug += _bbaug
                _totalSep += _bbsep
                _totalOct += _bboct
                _totalNov += _bbnov
                _totalDec += _bbdec
                _totalQ1 += _bbq1
                _totalQ2 += _bbq2
                _totalQ3 += _bbq3
                _totalQ4 += _bbq4
                _totalH1 += _bbh1
                _totalH2 += _bbh2
                _totalT += _bbtt
            Else
                errors.Append("Error!  Input string must be numeric.  Please correct error(s).")
            End If
        Next

        If errors.Length > 0 Then
            'gvBuildingBlocks.DataSource = CType(Session("buildingBlocks"), DataTable)
            'gvBuildingBlocks.DataBind()
            ShowMessage(errors.ToString)
        End If

        _tjan = CType(gvBuildingBlocks.FooterRow.FindControl("txtJan"), TextBox)
        _tfeb = CType(gvBuildingBlocks.FooterRow.FindControl("txtFeb"), TextBox)
        _tmar = CType(gvBuildingBlocks.FooterRow.FindControl("txtMar"), TextBox)
        _tapr = CType(gvBuildingBlocks.FooterRow.FindControl("txtApr"), TextBox)
        _tmay = CType(gvBuildingBlocks.FooterRow.FindControl("txtMay"), TextBox)
        _tjun = CType(gvBuildingBlocks.FooterRow.FindControl("txtJun"), TextBox)
        _tjul = CType(gvBuildingBlocks.FooterRow.FindControl("txtJul"), TextBox)
        _taug = CType(gvBuildingBlocks.FooterRow.FindControl("txtAug"), TextBox)
        _tsep = CType(gvBuildingBlocks.FooterRow.FindControl("txtSep"), TextBox)
        _toct = CType(gvBuildingBlocks.FooterRow.FindControl("txtOct"), TextBox)
        _tnov = CType(gvBuildingBlocks.FooterRow.FindControl("txtNov"), TextBox)
        _tdec = CType(gvBuildingBlocks.FooterRow.FindControl("txtDec"), TextBox)
        _tq1 = CType(gvBuildingBlocks.FooterRow.FindControl("txtQ1"), TextBox)
        _tq2 = CType(gvBuildingBlocks.FooterRow.FindControl("txtQ2"), TextBox)
        _tq3 = CType(gvBuildingBlocks.FooterRow.FindControl("txtQ3"), TextBox)
        _tq4 = CType(gvBuildingBlocks.FooterRow.FindControl("txtQ4"), TextBox)
        _th1 = CType(gvBuildingBlocks.FooterRow.FindControl("txtH1"), TextBox)
        _th2 = CType(gvBuildingBlocks.FooterRow.FindControl("txtH2"), TextBox)
        _tt = CType(gvBuildingBlocks.FooterRow.FindControl("txtYear"), TextBox)

        _tjan.Text = _totalJan.ToString()
        _tfeb.Text = _totalFeb.ToString()
        _tmar.Text = _totalMar.ToString()
        _tapr.Text = _totalApr.ToString()
        _tmay.Text = _totalMay.ToString()
        _tjun.Text = _totalJun.ToString()
        _tjul.Text = _totalJul.ToString()
        _taug.Text = _totalAug.ToString()
        _tsep.Text = _totalSep.ToString()
        _toct.Text = _totalOct.ToString()
        _tnov.Text = _totalNov.ToString()
        _tdec.Text = _totalDec.ToString()
        _tq1.Text = _totalQ1.ToString()
        _tq2.Text = _totalQ2.ToString()
        _tq3.Text = _totalQ3.ToString()
        _tq4.Text = _totalQ4.ToString()
        _th1.Text = _totalH1.ToString()
        _th2.Text = _totalH2.ToString()
        _tt.Text = _totalT.ToString()

    Catch ex As Exception
        ShowError("Exception: ", ex.ToString())
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:41:29.220

“sender”参数应该包含触发事件的控件。您应该能够根据您的发件人找出发生了什么变化，并且只对发生变化的内容进行重做计算。

# c - 如何在 Linux 上使用 GCC 编译 C 和 Gtk+？

> ID：14944866
> 
> 赞同：8
> 
> 时间：2013-02-18T20:36:41.963
> 
> 标签：c, linux, gcc, compilation, gtk

我已经搜索和搜索，但我没有得到我真正想要的信息。有人可以尽可能完整和基本地解释在 Linux 上使用 GCC 用 C 编写时如何编译 Gtk+ 代码。有一些我完全不理解的东西，比如反引号、“c99”和 .o 文件。

我也很感激学习 Gtk+ 代码的任何资源。我找到的所有资源都是针对 2.x 版本的，但我认为 3.6 是当前版本。

我想重申一下，我只对 C 代码感兴趣。请不要尝试向我解释 C++ 或 C# 的好处，我已经阅读了所有这些。我是来找C的。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T20:55:01.770

对于初学者，您编写 C 代码，例如“hello_world_gtk.c”，然后使用适当的编译器和链接器标志编译并将其链接到 Gtk。这些标志由 pkg-config 工具提供给您。要获得所需的编译器标志，您可以使用以下命令调用该工具：

```
pkg-config gtk+-2.0 --cflags

```

对于链接标志：

```
pkg-config gtk+-2.0 --libs

```

反引号允许您从 pkg-config 获取输出并将其作为参数传递给 gcc：

```
gcc `pkg-config gtk+-2.0 --cflags` hello_world_gtk.c -o hello_world_gtk `pkg-config gtk+-2.0 --libs`

```

但是您不需要使用反引号。如果需要，您可以手动复制和粘贴标志。

对于 Gtk 3，将“2.0”替换为“3.0”。如果 pkg-config 报告它找不到包，那么您没有安装 Linux 发行版提供的 Gtk 开发包。

如果您通常不了解如何将某些内容编译成目标文件然后链接它，那么您不应该从 Gtk 开始，而是使用纯 C。一旦您熟悉了编译和链接的绝对基础知识，您就可以继续学习 Gtk 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:39:56.437

正如其他人所说，您的问题过于广泛。它询问反引号（基本的 shell 语法）、什么是“.o”文件（基本编程）和 GTK 编程（有点高级的编程）。

但是为了最好的回答，假设你只有一个源文件，使用

```
gcc -Wall -Wextra -std=c99 `pkg-config --cflags --libs gtk+-2.0` example.c -o example 
```

其中“example.c”是您的源的名称。这是细分：

*   使用标志“-Wall”和“-Wextra”，这样您就可以看到所有警告（并修复它们）。

*   使用“std”标志来设置你的 C 方言。有几个，gcc 对其中的大多数有全部或部分支持。阅读手册页或信息页以获取更多信息。像上面那样使用“c99”并不是一个糟糕的选择。

*   并使用 pkg-config 和命令替换（即反引号）来设置库和包含。请注意，您可以同时执行这两项操作，尽管很多人通过 pkg-config 的两个反引号版本使用它两次。反引号替换引号内命令的输出。尝试在命令行上单独在反引号内运行 pkg-config，您将看到它的作用。

不幸的是，3.x GTK 代码的资源并不多，而且大部分仍然是基于 2.x 的。您只需要求助于 gtk 邮件列表或参考手册。

至于 GTK 3.x，您无法编译的原因可能是您的发行版是基于 GTK 2.x 的。较新的发行版可能在其存储库中包含 GTK 3.x。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-21T17:33:34.277

以 gtk2.0 为例：

```
$gcc test.c -o gnometest $(pkg-config --cflags --libs gtk+-2.0) 
```

以 gtk3.0 为例：

```
$gcc $(pkg-config --cflags gtk+-3.) test.c -o gnometest $(pkg-config --libs gtk+-3.0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-23T19:44:56.813

从 Gtk Docs[入门](https://developer.gnome.org/gtk3/stable/gtk-getting-started.html)页面：

```
gcc `pkg-config --cflags gtk+-3.0` -o example example.c `pkg-config --libs gtk+-3.0` 
```

另请查看[Nikos C. 的 Aswer](https://stackoverflow.com/a/14945115/1695680)以了解有关`pkg-config`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-25T11:14:00.460

我的`Makefile`：

```
LDLIBS = -lcurl -lpthread `pkg-config --cflags gtk+-2.0` `pkg-config --libs gtk+-2.0` 
```

# c# - WCF 和 ref 参数

> ID：14944873
> 
> 赞同：1
> 
> 时间：2013-02-18T20:37:35.210
> 
> 标签：c#, wcf

我在使用 WCF 并将参数作为 ref 传递时遇到了奇怪的问题。

假设我有一个类：

```
Class MyClass 
{
     public string str;
} 
```

和这样的代码块：

```
List<MyClass> c = new List<MyClass>();
c.Add(new MyClass());
MyClass c2 = c[0]; 
```

如果我然后调用应该更新该类的 str 属性的 WCF 方法：

```
WCFService.UpdateStr(ref c2); 
```

c[0] 和 c2 是不同的——它们不应该在 str-property 中包含相同的字符串吗！？ref 函数参数在 WCF 中是否有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T20:52:00.360

不，他们不应该。通过引用传递的参数意味着可以更改对象本身，并且在 WCF 调用的情况下，它是。当调用`UpdateStr`返回时，c2 引用了一个不同的对象实例。

下图显示了此场景的情况。

![在此处输入图像描述](../Images/0c2592525504b24d696878f8a8ea1b1b.png)

# java - Android，从输入流中读取“NULL” - 解释

> ID：14944874
> 
> 赞同：-2
> 
> 时间：2013-02-18T20:37:34.650
> 
> 标签：java, android, null

在下面的代码中，在 readline 中返回**null**可能是什么原因以及正确解释（为什么会发生） ：

```
if (socket != null) {
    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
    out.write("ABC\n");
    out.flush();
    respond = in.readLine();
 } 
```

我确定我的服务器会发送答案（发送一些字符串），但有时上面的代码会给我**null**作为响应。问候， 阿蒂克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:39:22.030

来自文档“如果在到达阅读器末尾之前没有读取任何字符，则该行的内容或 null 。”

所以没有更多的输入。

# iphone - 通过点击tableview的单元格加载nib/xib/view

> ID：14944877
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:37:57.683
> 
> 标签：iphone, ios, objective-c, xamarin.ios

如何在从 tableview 中选择一行时打开 nib/xib/view... 下面是我的代码

```
public class TableViewDelegate : UITableViewDelegate 
{
    private List list;

    public TableViewDelegate(List<string> list)
    {
        this.list = list;
    }    

    public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
    {
        Console.WriteLine("TableViewDelegate.RowSelected: Label={0}",list[indexPath.Row]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:35:55.347

只需将新的视图控制器添加为子视图。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NewViewController *myViewController = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
    [self.view addSubView:myViewController];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:25:22.727

您应该使用 didSelectRowAtIndexPath 方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NewViewController *myViewController = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
[self presentModalViewController:myViewController animated:YES];
    } 
```

# sql - SQL Server 的 JOIN 问题

> ID：14944880
> 
> 赞同：1
> 
> 时间：2013-02-18T20:38:19.673
> 
> 标签：sql, sql-server, join, outer-join

我的表 ( `user_page_cells`) 显示了以下查询：

```
SELECT tag_id, nid 
FROM user_page_cells WHERE nid = 1; 
```

它给了我结果：

![在此处输入图像描述](../Images/88ca8c2b2aeee3b0f32b67f65ddb7dfc.png)

我还有一张桌子（`graph_tags`）：

```
SELECT * 
FROM graph_tags where page_node = 1 
```

这给了我结果：

![在此处输入图像描述](../Images/efa7acd1ad654e4022f701f91afb8775.png).

`user_page_cells.nid`和`graph_tags.page_node`两个参考页面节点。

我需要一个显示我的第一个查询结果的查询

```
(SELECT tag_id, nid FROM user_page_cells WHERE nid = 1;) 
```

有一个额外的列。如果没有，则此列需要`default_graph_tag_id`来自第二个表 ( `graph_tags`)`nid = page_node`或`NULL`根本没有。

我已经尝试使用`LEFT`, `RIGHT`，`FULL OUTER JOIN`但我无法获得我正在寻找的结果。

这是我认为可行的查询示例。

```
SELECT user_page_cells.tag_id, graph_tags.default_graph_tag_id
FROM user_page_cells
LEFT OUTER JOIN graph_tags ON user_page_cells.nid = graph_tags.page_node
WHERE user_page_cells.nid = 1. 
```

无论是否使用 、 或 ，我总是`LEFT`得到`RIGHT`这个`FULL`；

![在此处输入图像描述](../Images/b0ac2420eac599679ea81ca450015bd1.png)

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:47:41.960

如果我明白你想要什么，你只需要在你的加入中包含 tag_id 。

```
SELECT user_page_cells.tag_id, graph_tags.default_graph_tag_id
FROM user_page_cells
Left OUTER JOIN graph_tags
ON user_page_cells.nid = graph_tags.page_node
and user_page_cells.tag_id=graph_tags.tag_id
where user_page_cells.nid = 1 
```

# jquery - bx 滑块在少于 4 张幻灯片时销毁

> ID：14944881
> 
> 赞同：0
> 
> 时间：2013-02-18T20:38:21.817
> 
> 标签：jquery, bxslider

我在一个项目中使用 BX 滑块并且在使用 destroy.slider() 方法时遇到了一些问题 - 我的客户正在通过 CMS 添加图像，因此滑块的每个实例都有一个可变的幻灯片数。当幻灯片少于 5 张时，我试图杀死滑块并返回正常的显示状态（这是一个没有任何控件的网格）。阅读文档后，我认为这会起作用，但没有运气 - 滑块保持完好，即使 getSlideCount 返回 2。欢迎提出任何建议！

谢谢！

```
var slider = $('#view-profiles').bxSlider({
  minSlides: 4,
  maxSlides: 4,
  nextSelector: '.next',
  prevSelector: '.back',
  slideWidth:   '220px',
  pager: false,
  slideMargin: '0',
  nextText: '',
  prevText: '',
  infiniteLoop:false,
  hideControlOnEnd: true

}); 

if (slider.getSlideCount() < 5){
  slider.destroySlider();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:01:00.267

尝试这个

```
var total_slide = slider.getSlideCount() ;

if (total_slide  < 5){
  slider.destroySlider();
} 
```

或者

```
var slider = $('#view-profiles').bxSlider({
  minSlides: 4,
  maxSlides: 4,
  nextSelector: '.next',
  prevSelector: '.back',
  slideWidth:   '220px',
  pager: false,
  slideMargin: '0',
  nextText: '',
  prevText: '',
  infiniteLoop:false,
  hideControlOnEnd: true,
  onSliderLoad:function() 
            {
            if (slider.getSlideCount() < 5){
            slider.destroySlider();
            }    
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T10:48:14.097

```
if($('#view-profiles > div').length > 4){
            var slider = $('#view-profiles').bxSlider({
                  minSlides: 4,
                  maxSlides: 4,
                  nextSelector: '.next',
                  prevSelector: '.back',
                  slideWidth:   '220px',
                  pager: false,
                  slideMargin: '0',
                  nextText: '',
                  prevText: '',
                  infiniteLoop:false,
                  hideControlOnEnd: true   
                });
    } 
```

# java - 我必须做一个足球记分牌，但我不知道如何找到总数

> ID：14944882
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:38:25.453
> 
> 标签：java

这是显示分数菜单的代码块：

```
public void scoreBoard() //the score board to keep count; need to display 4 times
{
    Scanner score = new Scanner (System.in);
    for (int k = 1; k <= 4; k++) //repeat for the 4 quarters
    {
      System.out.println( "T : " );
      System.out.println( touchdown * score.nextInt()); //scores of the plays made
      System.out.println("F : ");
      System.out.println(fieldgoal * score.nextInt());
      System.out.println("E : ");
      System.out.println ( extrapnt * score.nextInt());
      System.out.println ("P : ");
      System.out.println ( twopntcon * score.nextInt());
      System.out.println("S : " );
      System.out.println( safety * score.nextInt());
      System.out.println ( "Q : Done with quarter " + k);
    }
} 
```

我似乎无法弄清楚如何使用这些值并计算总分。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:47:00.300

我假设您的问题是关于如何重用扫描仪值进行计算和打印。尝试这个：

```
public void scoreBoard() 
{
    int total = 0;
    Scanner score = new Scanner (System.in);
    for (int k = 1; k <= 4; k++) //repeat for the 4 quarters
    {
        int touchdown_score = touchdown * score.nextInt();
        int fieldgoal_score = fieldgoal * score.nextInt();
        int extra_score = extrapnt * score.nextInt();
        int twopnt_score =  twopntcon * score.nextInt();
        int safety_score = safety * score.nextInt();

        System.out.println( "T : " );
        System.out.println( touchdown_score ); //scores of the plays made
        System.out.println("F : ");
        System.out.println(fieldgoal_score);
        System.out.println("E : ");
        System.out.println (extra_score );
        System.out.println ("P : ");
        System.out.println (twopnt_score);
        System.out.println("S : " );
        System.out.println(safety_score);
        System.out.println ( "Q : Done with quarter " + k);
        total+= touchdown_score  + fieldgoal_score + extra_score + twopnt_score + safety_score;
    }
} 
```

# windows - GetTextExtentPoint 返回的文本高度到底是多少？

> ID：14944883
> 
> 赞同：0
> 
> 时间：2013-02-18T20:38:29.660
> 
> 标签：windows, gdi

在 Windows 上，GetTextExtentPoints 和朋友返回一个 SIZE 结构，其中包含给定字符串的高度和宽度。我想知道高度到底是多少，例如有或没有外部前导的字体高度或字符串的实际高度。后者意味着高度值取决于实际字符串。例如，“mmm”的高度将不同于“Aq”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:40:21.577

我试过了：*GetTextExtentPoints*返回包括内部前导但不包括外部前导的字体大小，即单元格大小。此值不依赖于实际字符串。（但它显然适用于文本宽度。）

# mediawiki - mediaWiki 类别与用于组织内容的子页面

> ID：14944886
> 
> 赞同：0
> 
> 时间：2013-02-18T20:38:58.920
> 
> 标签：mediawiki, categorization

出于搜索能力和清晰度的原因，我想创建一个内容可以并且因此可能应该按类别明确分开的 wiki。

让我们以一个 wiki 作为随机示例，其中每个站点都描述了电影导演在给定时间点的情况。我将有一个组织逻辑如下的页面：`Year > Month > director's situation`，而且`Year > Month > Day > director's situation`和`Year > director's situation`。

1976 > 九月 > 伍迪艾伦：艾伦先生正在拍摄安妮霍尔。

1977 > 伍迪艾伦：艾伦先生在那一年变成了 x。

1979 > 二月 > 伍迪艾伦：艾伦先生正在切割曼哈顿。

好的，这是一个愚蠢的例子，但它明白了这一点。所以现在每个时间框架都有不同内容的伍迪艾伦页面。我希望实现良好的搜索能力，因为我的实际应用程序中的标题不会像名称那样明显，并且不同页面的唯一标识。我的问题是，鉴于内容的明确分类，在 mediaWiki 中实现这一目标的最佳策略是什么？

1.  创建类别层次结构（例如，年 > 月 > 日：导演）和匹配的子页面层次结构（年/月/日/导演）。
2.  创建类别的层次结构，然后只有一个页面标题，如“导演，年，月日”
3.  只是用子页面组织一切。
4.  ……

我会选择#1。类别的层次结构允许干净的搜索`+incategory:"Category Name"`，子页面的层次结构允许更漂亮的页面标题（特别是如果类别具有长名称）。这个解决方案有什么陷阱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:06:41.570

或者，[Semantic Mediawiki](http://www.mediawiki.org/wiki/Extension%3aSemantic_MediaWiki)会为您提供许多选项，用于按您想要的任何参数或元数据对页面进行排序、索引和搜索，而无需嵌套类别或专门的标题。这是我推荐的几乎所有 wiki 组织问题的解决方案。

# winforms - 对 SpreadsheetGear WorkbookView 的单元格编辑不会持续存在

> ID：14944889
> 
> 赞同：0
> 
> 时间：2013-02-18T20:39:12.377
> 
> 标签：winforms, model-view-controller, spreadsheetgear, controlcollection

## 出了什么问题：

当我在 SpreadsheetGear WorkbookView 中编辑一个单元格并通过按 Enter、Tab 或任何箭头键启动 CellEndEdit 事件时，我刚刚键入的值将被清除。

## 语境：

*   似乎在 WorkbookView 中编辑单元格时，会在 WorkbookView 顶部添加一个控件，该控件的行为类似于 TextEdit，以允许您键入数据。当发生 CellEndEdit 事件时，调用堆栈指示 WorkbookView 调用 ControlCollection.Remove(...)。
*   这反过来又会导致表单将焦点放在页面上的另一个控件上。有问题的页面包括 WorkbookView 上方的一些 TextEdit 控件，这些控件是从基本页面继承的。第一个 TextEdit 会在短时间内获得焦点。
*   在这些 TextEdits 上设置验证，最终启动模型更新。这会清除 WorkbookView 中的内容，因为所有这些都发生在视图更改被推送到模型之前。

## 问题：

在我的 WorkbookViews 事件处理程序可以将视图的更改推送到模型之前，有没有办法阻止其他控件接收焦点？还是有其他方法可以更好地处理这个问题？

请让我知道我是否可以在任何地方详细说明或更好地解释自己，谢谢！

## 更新：

我用一个 DevExpress TextEdit 和一个 SpreadsheetGear WorkbookView 创建了一个测试应用程序。如果我添加 textEdit1_Validated 和 textEdit1_Enter，我会得到相同的行为。焦点转到 TextEdit 控件，现在似乎是由于验证处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:52:17.040

显然 DevExpress TextEdit 控件的验证处理程序请求焦点，这是模型更新期间运行的语句之一的问题。SpreadsheetGear WorkbookView 中数据的视图属性被设置为该属性的模型版本，并且模型可以具有默认值或用户定义的值。

声明是这样写的：

```
view.Data = model.IsUserDefined ? model.Data.UserDefined : model.Data.Default 
```

我将声明更改为如下内容：

```
if (!model.IsUserDefined)
{
    view.Data = model.Data.Default;
} 
```

这解决了这个问题，因为如果输入的数据是用户定义的，则用户正在输入数据，并且这个 if 语句允许视图保留该数据，直到基本上整个页面验证之后。仍在调用堆栈上的是专门针对此 Data 属性的模型更新。

很抱歉，这可能不会对一般人提供太多帮助，因为这是个人实施的问题。但我仍然认为值得注意的是，如果您将主要更新与验证处理程序联系起来，那么随着越来越多的附加更新语句，这样的事情肯定会在以后发生。

# python - 有条件的xpath？如果匹配更具体的 xpath，则需要 xpath

> ID：14944900
> 
> 赞同：0
> 
> 时间：2013-02-18T20:39:35.260
> 
> 标签：python, xpath

我正在尝试创建一个包含两个数据项的字典列表。

我正在查看的页面有 37 个匹配项`//div[@id='content']/*[self::p or self::h2]/a[2]`；`//div[@id='content']/*[self::p or self::h2]/a[contains(@href,'game')]/img[@src]` 但是，对于这两个 xpath的共同点，它只有 33 个匹配 项`//div[@id='content']/*[self::p or self::h2]`。如果第二个 xpath 匹配，我实际上只想让第一个 xpath 匹配的元素，并留下 4 而没有第二个元素。

我希望这可以通过 xpath 来完成，但如果没有，可以使用一些建议来编写一个在 python 中实现这一点的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:10:07.553

您可以在 XPath 中进行匹配，然后在 Python 中简单地将结果节点作为父节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:10:51.903

听起来这就是你想要的：

```
//div[@id='content']/*[self::p or self::h2]/a[2][contains(@href,'game') and img[@src]] 
```

你能试试吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:09:19.380

您是否正在寻找此 XPath：

```
//div[@id='content']/*[self::p/a[contains(@href,'game')]/img[@src] or self::h2/a[contains(@href,'game')]/img[@src]]/a[2] 
```

# javascript - Javascript 替换删除 HTML

> ID：14944912
> 
> 赞同：0
> 
> 时间：2013-02-18T20:40:01.953
> 
> 标签：javascript, jquery, html, regex

Javascript 的字符串替换功能似乎正在剥离 HTML 标签，有没有办法禁用它？

例子：

[http://jsfiddle.net/TDd7w/](http://jsfiddle.net/TDd7w/)

```
$('#pageEnumeration').text(function(){
    return $(this).text().replace(/^Showing \d+-\d+ of/, 'Showing');
});

```

```
<p id="pageEnumeration">
  Showing 1-25 of 45 records found:
  <br>
  containing the terms:
  <span class="italic">cat</span>
</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:45:34.430

实际上，归结为您正在通过 .text() 访问文本节点，这确实完全去除了标记。

[http://jsfiddle.net/mori57/dkLLX/](http://jsfiddle.net/mori57/dkLLX/)

这是你要找的吗？

```
$('#pageEnumeration').html(function(i, htm){
    return htm.replace(/^Showing \d+-\d+ of/, 'Showing ');
}); 
```

如果要保留元素节点，则需要使用 .html() 方法而不是 .text() 进行访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:45:53.273

需要抓取具体的文本节点，或者`innerHTML`直接处理。标签的剥离是由`text()`.

```
var $pageEnum = $('#pageEnumeration');

if ($pageEnum.length > 0) {
    $pageEnum[0].innerHTML = $pageEnum[0].innerHTML.replace(/^Showing \d+-\d+ of/, 'Showing ');
} 
```

[**演示**](http://jsfiddle.net/TDd7w/2/)

# extjs - Extjs Grid - 没有当前页面

> ID：14944913
> 
> 赞同：0
> 
> 时间：2013-02-18T20:40:05.833
> 
> 标签：extjs, grid, paging, extjs4.1

并提前感谢您在此问题上的帮助。

我有一个 extjs 4.1 网格，填充了从服务器加载的 json。分页是远程的，并且每个 25 个项目的块都从服务器正确地作为有效的 json 提供，并且在 totalProperty 中具有正确的值。就加载和分页而言，一切功能正常，分页栏中没有页码。它看起来像这样。好的...我不允许发布图片...所以这是一个 [看起来像这样的链接](http://evan55.smugmug.com/Other/misc/i-z6SLp3G/0/O/ext%20pagingbar.jpg)

这是相关的代码。如果它有助于解决问题，我可以发布其他代码。

```
var theStore = Ext.create('Ext.data.Store',
    {
        model: 'SearchResult',
        pageSize: 25,
        remoteSort: true,
        proxy:
        {
            type: 'ajax',
            url: '/Search/SubmitSimpleQuery',
            reader:
            {
                type: 'json',
                root: 'Results',
                totalProperty: 'totalHits'
            },
            extraParams:
            {
                searchText: theSearchText,
                beginDate: theBeginDate,
                endDate:theEndDate,
                collectionMatch:theCollection
            }
        }
    });
theStore.load();

var grid = Ext.create('Ext.grid.Panel',
    {
        store: theStore,
        width: '100%', 
        height: '100%', 
        columns:
        [

            {
                text: 'Title',
                dataIndex: 'title',
                width: '60%'

            },

            {
                text: 'Published Date',
                dataIndex: 'pubDate_ymd',
                renderer: renderDate
            },
            {
                text: 'Released Date',
                dataIndex: 'releaseDate_ymd',
                renderer: renderDate
            },
            {
                text: 'From',
                dataIndex: 'from',
                hidden: true

            },
            {
                text: 'To',
                dataIndex: 'to',
                hidden: true

            }
        ],
        dockedItems: [
        {
            xtype: 'pagingtoolbar',
            dock: 'bottom',
            store: theStore,
            displayInfo: true,
            displayMsg: 'Displaying results {0} - {1} of {2}',
            emptyMsg: 'No results'
        }]

    });

Ext.create('Ext.panel.Panel',
{
    bodyPadding:25,
    width:'100%',
    renderTo:Ext.getBody(),
    items:[
        grid
    ]

}); 
```

totalproperty 正确地通过他的 json 进入 - 例如 108 导致 5 页。所有寻呼工作。当分页到第 2 页时， `page:2 , start:25, limit: 25`都传递给服务器，所以 ext 知道它是什么页面，但它没有进入当前页面框。然后我需要将该页面值设置为代理或商店上的属性吗？

我被难住了，我已经把我的头撞在这个上面一段时间了。

谢谢。

顺便说一句，这是一个类似的问题 [ExtJS 网格面板没有显示页码](https://stackoverflow.com/questions/14130304/extjs-grid-panel-not-showing-page-number) ，但它（显然？）修复了将分页栏添加到网格上的 dockeditems，正如你在上面看到的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:50:15.830

来自 Sencha API 文档：

> 要使用分页，需要在 Store 上设置一个 pageSize 配置，并在 Store 首次加载时将分页需求传递给服务器。

```
store.load({
    params: {
        // specify params for the first page load if using paging
        start: 0,
        limit: myPageSize,
        // other params
        foo:   'bar'
    }
}); 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging)

我认为您的问题可能是您在`theStore.load()`没有任何此类参数的情况下手动调用。我认为您根本不需要调用它。

# android - 如何更改操作栏的分隔线颜色？

> ID：14944925
> 
> 赞同：1
> 
> 时间：2013-02-18T20:40:33.280
> 
> 标签：android, android-actionbar

如何将全息蓝色分隔线更改为全息绿色分隔线？谢谢！

![图片](../Images/1f408032028eb3f4a8d6f3ca80ee2176.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:50:41.257

试用 ActionBar 样式生成器。[这](http://jgilfelt.github.io/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&texture=0&hairline=0&backColor=E4E4E4%2C100&secondaryColor=D6D6D6%2C100&tabColor=33B5E5%2C100&tertiaryColor=F2F2F2%2C100&accentColor=9c0%2C100&cabBackColor=FFFFFF%2C100&cabHighlightColor=33B5E5%2C100)是一个带有绿色口音的示例。

# javascript - AngularJS 全局 http 轮询服务

> ID：14944936
> 
> 赞同：34
> 
> 时间：2013-02-18T20:40:57.497
> 
> 标签：javascript, angularjs

我正在使用 AngularJS 构建一个网络应用程序。应用程序需要轮询返回 JSON 数据的 URL，并使该数据可用于应用程序的任何部分。根据我目前所读到的内容，我最好的选择是创建一个服务来处理轮询并保留其自己的 JSON 数据内部缓存，然后将该服务注入到应用程序中想要查询该数据的任何部分。我迷失的是如何真正做到这一点。我发现的最接近的例子是[这个问题](https://stackoverflow.com/questions/13937318/convert-angular-http-get-function-to-a-service)，但它似乎正在创建一个由特定控制器手动调用的服务（它本身与给定的路由绑定），而我想要在应用程序的后台持续运行的东西永远不管应用程序的哪个部分处于活动状态。这是可行的，还是我采取了完全错误的方法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-18T21:08:00.127

这是我的解决方案：

```
app.factory('Poller', function($http, $timeout) {
  var data = { response: {}, calls: 0 };
  var poller = function() {
    $http.get('data.json').then(function(r) {
      data.response = r.data;
      data.calls++;
      $timeout(poller, 1000);
    });      
  };
  poller();

  return {
    data: data
  };
}); 
```

（调用只是为了表明轮询已经完成）

[http://plnkr.co/edit/iMmhXTYweN4IrRrrpvMq?p=preview](http://plnkr.co/edit/iMmhXTYweN4IrRrrpvMq?p=preview)

**编辑：**正如 Josh David Miller 在评论中建议的那样，应该在 app.run 块中添加对该服务的依赖，以确保从一开始就完成轮询：

```
app.run(function(Poller) {}); 
```

并且在上一次通话完成后还移动了下一次轮询的安排。因此，如果轮询挂起很长时间，就不会有调用的“堆叠”。

更新了 plunker。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-01-03T22:47:01.243

这是 Github 上的一个[angular poller 服务](http://github.com/emmaguo/angular-poller)，可以很容易地注入到你的控制器中。

要安装： `bower install angular-poller`.

既然你想启动一个永远在后台运行的全局轮询​​服务，你可以这样做：

```
// Inject angular poller service.
var myModule = angular.module('myApp', ['poller']);

// The home/init controller when you start the app.
myModule.controller('myController', function($scope, $resource, poller) {

    // Define your resource object.
    var myResource = $resource(url[, paramDefaults]);

    // Create and start poller.
    var myPoller = poller.get(myResource);

    // Update view. Most likely you only need to define notifyCallback.
    myPoller.promise.then(successCallback, errorCallback, notifyCallback);
}); 
```

现在它将永远在后台运行，直到您调用`myPoller.stop()`或`poller.stopAll()`。

如果您想在其他控制器中使用此轮询器的回调数据，您可以简单地执行以下操作：

```
myModule.controller('anotherController', function($scope, $resource, poller) {

    /* 
     * You can also move this to a $resource factory and inject it
     * into the controller so you do not have to define it twice.
     */
    var sameResource = $resource(url[, paramDefaults]);

    /* 
     * This will not create a new poller for the same resource
     * since it already exists, but will simply restarts it.
     */
    var samePoller = poller.get(sameResource);

    samePoller.promise.then(successCallback, errorCallback, notifyCallback);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-19T13:31:15.133

我分叉了@ValentynShybanov 的工厂代码并添加了间隔调用（每秒、每 5 秒等），您也可以根据需要停止和启动轮询器：

[http://plnkr.co/edit/EfsttAc4BtWSUiAU2lWf?p=preview](http://plnkr.co/edit/EfsttAc4BtWSUiAU2lWf?p=preview)

```
app.factory('Poller', function($http, $timeout) {
  var pollerData = {
    response: {},
    calls: 0,
    stop: false
  };

  var isChannelLive = function() {
    $http.get('data.json').then(function(r) {
      if (pollerData.calls > 30 && pollerData.stop === false) { // call every minute after the first ~30 secs
        var d = new Date();
        console.log('> 30: ' + d.toLocaleString() + ' - count: ' + pollerData.calls);
        pollerData.calls++;
        $timeout(isChannelLive, 10000);
      } else if (pollerData.calls > 15 && pollerData.calls <= 30 && pollerData.stop === false) { // after the first ~15 secs, then call every 5 secs
        var d = new Date();
        console.log('> 15 & <= 30: ' + d.toLocaleString() + ' - count: ' + pollerData.calls);
        pollerData.calls++;
        $timeout(isChannelLive, 5000);
      } else if (pollerData.calls <= 15 && pollerData.stop === false) { // call every 1 second during the first ~15 seconds
        var d = new Date();
        console.log('<= 15: ' + d.toLocaleString() + ' - count: ' + pollerData.calls);
        pollerData.calls++;
        $timeout(isChannelLive, 1000);
      }

      pollerData.response = r.data;
    });

  };
  var init = function() {
    if (pollerData.calls === 0) {
      pollerData.stop = false;
      isChannelLive();
    }
  };
  var stop = function() {
    pollerData.calls = 0;
    pollerData.stop = true;
  };

  return {
    pollerData: pollerData, // this should be private
    init: init,
    stop: stop
  };
}); 
```

# php - 如何从 AMI ORIGINATE 设置 Asterisk 呼叫日志 CDR 数据库字段

> ID：14944937
> 
> 赞同：2
> 
> 时间：2013-02-18T20:41:02.607
> 
> 标签：php, asterisk, cdr

我在 PHP 中使用 Asterisk 管理接口 (AMI) 来发起出站呼叫。下面是我正在使用的代码片段：

```
// snippet
// $num is the number to dial e.g. 0207 121 3456
// $ext is the extension use to make the call e.g. 101
// $name is the name of the caller e.g. Fred Flintstone
//
fputs($socket, "Action: Originate\r\n" );
fputs($socket, "Channel: SIP/$ext\r\n" );
fputs($socket, "Exten: $num\r\n" );
fputs($socket, "Context: from-internal\r\n");
fputs($socket, "Priority: 1\r\n" );
fputs($socket, "CallerID: \"".$name."\" <".$num.">\r\n" );
fputs($socket, "Async: yes\r\n\r\n" ); 
```

如何设置呼叫者姓名 ( `$name`) 或写入到`asteriskcdrdb`始发脚本中的出站呼叫的其他详细信息？理想情况下，我想以与设置`dst`入站呼叫字段相同的方式设置字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-01T07:14:25.033

您可以将任何变量置于操作中：

```
 fputs($socket, "Action: Originate\r\n" );
    fputs($socket, "Channel: SIP/201\r\n" );
    fputs($socket, "Exten: 1234\r\n" );
    fputs($socket, "Account: FOOBAR\r\n" );
    fputs($socket, "Context: from-internal\r\n" );
    fputs($socket, "Priority: 1\r\n" );
    fputs($socket, "WaitTime: 15\r\n" );
    fputs($socket, "Callerid: 123456\r\n" );
    fputs($socket, "Variable: CDR(userfield)=AnyData\r\n\r\n" );
    $wrets=fgets($socket,128);
    echo $wrets; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T21:22:58.290

您不需要使用 Action: Setvar 来设置 CDR(accountcode) ，您只需在呼叫发起期间添加以下行

```
 fputs($socket, "Account: FOOBAR\r\n" ); 
```

下面是完整的例子

```
 fputs($socket, "Action: Originate\r\n" );
        fputs($socket, "Channel: SIP/201\r\n" );
        fputs($socket, "Exten: 1234\r\n" );
        fputs($socket, "Account: FOOBAR\r\n" );
        fputs($socket, "Context: from-internal\r\n" );
        fputs($socket, "Priority: 1\r\n" );
        fputs($socket, "WaitTime: 15\r\n" );
        fputs($socket, "Callerid: 123456\r\n\r\n" );
        $wrets=fgets($socket,128);
        echo $wrets; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T08:48:10.253

在origin 之后，您可以解析输出以查找频道 ID，然后您可以使用 Setvar 设置 CDR(userfield) 或 CDR(accouncode) ...等[。](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate)

我的例子：

```
fputs($socket, "Action: Originate\r\n");
fputs($socket, "Channel: $userExt\r\n");
fputs($socket, "Context: $AMIcntx\r\n");
fputs($socket, "Exten: $phoneNum\r\n");
fputs($socket, "Priority: 1\r\n");

$chan=true;
$channelID=0;

while (!feof($socket))
{
    if ($chan && preg_match("#Channel: ([a-zA-Z0-9\\/-]+)#", $wrets, $cm))
    {
        $channelID = $cm[1];        
        fputs($socket, "Action: Setvar\r\n");
        fputs($socket, "Channel: $channelID\r\n");
        fputs($socket, "Variable: CDR(userfield)\r\n");
        fputs($socket, "Value: FOOBAR\r\n\r\n");        
        fputs($socket, "Action: Logoff\r\n\r\n");
        $chan = false; //There are various Channel response, not overwrite.
    }
    //Further parsing of the AMI response go heres
} 
```

[SetVar](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+SetVar)仅设置指定通道的变量。您必须在通话结束之前尽早发送 setvar 命令。

如果您可以编辑您的拨号计划（我不能，因为我使用 freepbx），另一种方法是为 ami 调用创建一个特定的上下文，将一些变量从起源传递到上下文，将这个变量设置为拨号计划中的 CDR .

# delphi - 单个用户的多个连接

> ID：14944946
> 
> 赞同：4
> 
> 时间：2013-02-18T20:41:45.497
> 
> 标签：delphi, datasnap

我试图找出将以下逻辑放入我的 Delphi datasnap 服务器的最佳/“正确”位置。

用户连接到服务器，并使用提供的凭据，我使用集中的 AuthorizationDatabase（Oracle 数据库）对其进行验证。如果他们实际上是一个有效用户，那么我想根据授权存储库所说的（可能是另一个主机、数据库、用户名、密码）为他们提供与他们的数据实际所在位置的连接。

我在自己的服务器类中有 AuthorizationDatabase，这是服务器生命周期，因为没有人可以在没有经过验证的情况下进入。这会产生并发问题吗？10个用户同时登录验证，这样可以吗？

我有一个基本服务器模块，所有会话级数据模块都来自该模块，它具有应用程序连接。应用程序连接参数可以根据用户登录而改变。

我遇到的问题是在哪里放置授权/验证/新的数据库参数分配过程。

这种两步数据库方法最适合哪里？这似乎很常见，用户在一个地方得到验证，但他们最终要访问的数据在另一个地方。

在查看这些示例时，我看不出它会去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T20:47:43.480

跨多个会话共享一个连接是不安全的，当 2 个会话尝试同时读取数据库时，您将收到“读取错误”或其他错误。

但是你可以有一个集中的登录位置，只要让它线程安全，就可以了：

```
TMonitor.Enter(LoginDM);
Try
 valid := LoginDM.Login(username, password);
finally
  TMonitor.Exit(LoginDM);
end; 
```

关于访问数据的用户，因为每个用户都有自己的会话在线程上运行，您可以为每个 ServerClass 实例创建一个连接并将生命周期定义为“Session”，因此每个新会话都会产生一个新的 ServerMethod 的类实例并具有它自己的连接，这样您就不必担心编写服务器方法的方式，因为它们将始终拥有自己的“独占”连接。

# jquery - jquery - 寻找相同的内容

> ID：14944949
> 
> 赞同：-1
> 
> 时间：2013-02-18T20:41:50.653
> 
> 标签：jquery, html, select, addclass

我正在尝试使用选择器、while、for 等来使用它，但我并没有达到想要的效果。

```
<div class="product">
<div class="id">569865974598</div>
<div class="name">Ati Radeon Sapphire Hd 6850</div>
<div class="time">2013-02-14 03:13:33</div>
</div>

<div class="product">
<div class="id">654654654987</div>
<div class="name">Nvidia Geforce 9500gt</div>
<div class="time">2013-02-14 00:36:13</div>
</div>

<div class="product">
<div class="id">2561564898789</div>
<div class="name">Ati Radeon Sapphire Hd 6850</div>
<div class="time">2013-02-14 00:36:13</div>
</div> 
```

预期（同时封装产品）

```
<div id="same">
    <div class="product">
    <div class="id">569865974598</div>
    <div class="name">Ati Radeon Sapphire Hd 6850</div>
    <div class="time">2013-02-14 03:13:33</div>
    </div>
</div>
<div id="same">
    <div class="product">
    <div class="id">654654654987</div>
    <div class="name">Nvidia Geforce 9500gt</div>
    <div class="time">2013-02-14 00:36:13</div>
    </div>

    <div class="product">
    <div class="id">2561564898789</div>
    <div class="name">Ati Radeon Sapphire Hd 6850</div>
    <div class="time">2013-02-14 00:36:13</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:13:35.960

尝试这样的事情：

```
$(document).ready(function(){

    $('.product').each(function(){
        // generate div id based on time e.g. 2013-02-14 00:36:13 -> id=20130214003613
        var id = $(this).find('.time').html().replace(/[\s-:]/g,"");

        var sameElement = $('#' + id);

        if(sameElement.length == 0){
            $('body').append('<div id=' + id + '></div>');
            sameElement = $('#' + id);
        }
        $(this).appendTo(sameElement);
    });

}); 
```

注意：拥有多个具有相同 id 的 div 元素是不正确的，这就是为什么不是你建议的 id='same' 而是基于时间生成的 id

小提琴：http: [//jsfiddle.net/Zt38S/](http://jsfiddle.net/Zt38S/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:27:45.143

首先，不要在多个元素上使用相同的 id，id 在 HTML 中必须是唯一的，而是使用例如 class 属性。

此代码将首先查找所有唯一时间，然后将所有时间组包装在具有“相同”类的 div 中。

在 jsfiddle 上可用：http: [//jsfiddle.net/RA9eb/](http://jsfiddle.net/RA9eb/)

```
(function () {
    var uniqueTimes = $.unique($('.product').map(function() {
        return $(this).find('.time').text();
    })).get();

    $.each(uniqueTimes, function (i, time) {
        $('.product').filter(function () {
            return $(this).find('.time').text() == time;
        }).wrapAll($('<div />').addClass('same'));
    });
})(); 
```

# c - 使用 scanf 的多种输入格式

> ID：14944952
> 
> 赞同：1
> 
> 时间：2013-02-18T20:41:56.400
> 
> 标签：c, string, parsing, scanf

我希望通过`stdin`和读取用户的几个数据点`scanf()`。

但是，如果用户希望指示由 a 表示的无效数据，`*`这将违反预期的格式（`%f`、`%d`等），并且据我所知，会导致`scanf()`返回错误。

我设想处理这个问题的方法是从`stdin`一系列字符串中读取输入，检查这些字符串，`*`然后以相应的方式处理。这似乎非常幼稚和混乱，我想知道是否有更清洁的方法来实现这一点。

请注意，我在非常有限的环境中工作，因此 POSIX/3rd 方解决方案将不适用。仅限 ANSI C :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T21:12:17.217

一般来说，我建议`fgets()`输入，但是......

`scanf()`如果您强制用户对无效数据使用“nan”，则有一个简单的解决方案。通过输入“nan”（非数字），您可以解决 3 个问题：发布的问题、如何在代码中表示无效数据以及如何打印出无效数据。

示例：每行读取 2 个数据点

```
#include<math.h>
#include<stdio.h>
#include<stdlib.h>
...
double f1, f2;
int i;
f1 = f2 = atof("NaN");
i = scanf("%lf %lf\n", &f1, &f2);
if (i != 2) {
  // Handle input error
}
if (isnan(f1)) { 
  // Handle invalid f1
}
... 
```

# jquery - 如何将触发事件的 jQuery 对象传递给自定义对象函数？

> ID：14944956
> 
> 赞同：0
> 
> 时间：2013-02-18T20:42:24.993
> 
> 标签：jquery, object, parameter-passing

请看下面的代码：

```
jQuery(function($) {

Slider = function() {

    this.deleteSlider = function(e) {
        return false;
    }

}

var Slider = new Slider;

$('.heading-slider .actions .delete').click( Slider.deleteSlider );

}); 
```

如您所见，我正在使用 jQuery。在这种情况下，如何将包装在 jQuery 对象中的单击元素传递给 deleteSlider 函数？

我能想出的唯一解决方案是使用`$(e.target)`，但必须有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:48:13.583

`Silder.deleteSlider`应该通过指向触发点击的 DOM 元素来调用，而不管其原始上下文如何，因此除了从函数内部`this`调用之外，您不需要执行任何操作。`$(this)`

如果您想通过`this`引用用 jquery 包装的元素来专门调用它，那么您可以这样做：

```
$('.heading-slider .actions .delete').on('click', function(e) {
    Slider.deleteSlider.apply($(this), [e]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:44:57.063

实际上，据我所知，没有更好的方法，使用有什么问题`$(e.target)`？

```
jQuery(function($) {
    Slider = function() {
        this.deleteSlider = function(e) {
            var $elem = $(e.target);
            return false;
        }
    }

    var Slider = new Slider;
    $('.heading-slider .actions .delete').on('click', Slider.deleteSlider);
}); 
```

# java - 如何在特定类型的泛型上调用方法

> ID：14944959
> 
> 赞同：1
> 
> 时间：2013-02-18T20:42:43.727
> 
> 标签：java, service, dao

在下面的服务中，我试图初始化我的 Dao 并将 EntityManager 注入其中。我们没有在这个项目中使用 spring。我的 IDE 抱怨调用`setEntityManager()`，因为它无法识别该对象始终是`GenericDao`. 这是正确的方法吗？

```
public class GenericService<T, Dao> {

    private static Logger logger = Logger.getLogger(Logger.class.getName());

    protected Dao dao;
    protected EntityManager em;

    public GenericService(Class<Dao> daoClass) {
        try {
            dao = daoClass.newInstance();

            EntityManagerFactory emf = Persistence.createEntityManagerFactory("unit");
            em = emf.createEntityManager();

            dao.setEntityManager(em);

        } catch(InstantiationException e) {
            logger.log(Level.SEVERE, "Unable to initialize DAO: {1}", daoClass.getClass());
        } catch(IllegalAccessException e) {
            logger.log(Level.SEVERE, "Unable to initialize DAO: {1}", daoClass.getClass());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:44:09.830

您可以使用演员表：

```
((GenericDao)dao).setEntityManager(em); 
```

但我想如果你知道它总是一个 GenericDao，为什么不把它作为开始的类型，例如

```
protected GenericDao dao; 
```

并更改类声明：

```
public class GenericService<T, GenericDao> 
```

# batch-file - 批处理脚本获取服务状态

> ID：14944960
> 
> 赞同：0
> 
> 时间：2013-02-18T20:42:44.993
> 
> 标签：batch-file

在 w7 上，我想使用 psservice 接收服务的状态，因为我想稍后在远程计算机上执行此操作。

我尝试先让批处理脚本在本地机器上运行。

我有两个问题：第一个问题是“D:/PsService.exe 查询服务器”将查询包含名称“服务器”的所有服务。我只想查询一项特定的服务（在本例中名为“Server”。

另一个更大的问题是我的批处理脚本根本不起作用。它只是“死掉”（CMD 窗口立即关闭而不执行 pause 命令，这使得调试非常困难）。

我想将服务的状态存储在一个变量中，稍后我将使用它来比较示例（IF %Status% EQ "RUNNING"）。

到目前为止我的代码：

```
FOR /F token=3 %%i IN ('D:/PsService.exe query Server 2> NUL | find /I "STATE"') DO   ( SET Status=%%i )
echo %Status%
pause 
```

为什么 CMD 就死了，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:12:31.883

以下将为您工作

```
 @ECho off
   for /F "tokens=3 delims=: " %%H in ('D:/PsService.exe query "SERVICE" ^| findstr "        STATE"') do echo %%H 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T17:34:39.093

```
echo off
set /P srvname="Enter the servername  :"
echo %srvname%
set /P srvice="Enter the Service name :"
echo %srvice%
psservice.exe \\%srvname% query  %srvice% >a.txt
a.txt

pause 
```

# sql-server - VB SqlAdapter 批量更新：InsertCommand 向存储过程发送“NULL”

> ID：14944966
> 
> 赞同：0
> 
> 时间：2013-02-18T20:43:08.483
> 
> 标签：sql-server, vb.net

我有一些我继承的 SqlAdapter 代码。我不得不承认，代码通常运行得很好，但是最近有一种方法确实表现得很奇怪。当我附加 SQL Server Profiler 时，它显示调用了存储过程，但发送的所有参数都是 NULL。我快要发疯了，试图追查这件事。

我传递给 oSqlAdapter 对象的数据集包含我想要插入的所有正确数据。oSqlAdapter.InsertCommand 具有正确的存储过程名称和所有正确的参数。我已经对参数的顺序和类型以及参数和列名的拼写进行了三次检查。我还能错过什么？

**代码：**

```
Dim rows as DataRow() = myDataSet.Tables(0).Select(Nothing, Nothing, _
                            DataViewRowState.Added)

... Create oSqlAdapter and connect the currentConnectionObject ...

With oSqlAdapter
    .InsertCommand = New SqlCommand()

    .InsertCommand.CommandText = "myStoredProc"
    .InsertCommand.CommandType = CommandType.StoredProcedure
    .InsertCommand.Connection  = currentConnectionObject

    AddParameter(.InsertCommand, "@Parm1", ParameterDirection.Input, "MyColumn1")
    AddParameter(.InsertCommand, "@Parm2", ParameterDirection.Input, "MyColumn2")
    AddParameter(.InsertCommand, "@Parm3", ParameterDirection.Input, "MyColumn3")
    AddParameter(.InsertCommand, "@ResultCode", ParameterDirection.Output, "MyResult")

    .Update(rows) '<--- Crashes here. When I connect Profiler, I see that 
                  '     the update did send the parameters, but the values
                  '     are always NULL, never the values in the DataRows.
End With

oSqlAdapter = Nothing 
```

**AddParameter 逻辑如下：**

```
Public Sub AddParameter(cmd As SqlCommand, parmName As String,  _
    dir as ParameterDirectoni, colName as String)

    Dim oParm As SqlParameter = New SqlParameter(parmName, SqlDbType.Int)

    With oParm
        .Direction = dir
        .Value() = Nothing
        .SourceColumn = colName
    End With

    cmd.Parameters.Add(oParm)
    oParm = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:23:53.307

在 Public Sub AddParameter() 中，您将值设置为空。

.Value() = 无

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:16:35.667

我发现了错误！（这也是一个偷偷摸摸的）

显然，数据源通过同一表单上的另一个用户控件附加到 Infragistics 控件。它被数据绑定到同一个数据源。基础设施控制正在重新取消一切。有人（早在我来到这里之前）一直在将项目直接写入基础设施控件（而不是数据源本身），因此当您调用 .Update() 方法时，控件会在实际更新通过之前拦截命令，并且数据源中的数据会被破坏。

我感谢大家的建议，我希望这有助于在不久的将来帮助其他人。

For reference, **IF** you don't have something clobbering your datasource behind the scenes, the above code snip does work.

# c# - opentk glcontrol 自动渲染？

> ID：14944972
> 
> 赞同：0
> 
> 时间：2013-02-18T20:44:09.207
> 
> 标签：c#, .net, winforms, opengl, opentk

所以我有这个用 OpenTK (OpenGL) 编写的漂亮的 c# 应用程序......它使用全屏 GL 窗口，并且就像它应该的那样，它会尽可能自动运行 OnRenderFrame 方法，并且我得到了一个很棒的 60 FPS 游戏。

但是，现在我希望在 Windows 窗体而不是 GL 窗口中的 GLControl 中使用我的游戏。无论出于何种原因，它都会运行一次 onrenderframe 方法，仅此而已。我尝试使用 Application.Idle 来运行它，就像它在他们的文档中所说的那样，但我最终每秒获得大约 5 帧。

我应该如何让它像原始应用程序一样在循环上运行？

编辑：基本上我正在寻找类似于 game.Run(60) 的东西，您将使用它以每秒 60 帧的速度初始化 OpenGL 窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-05T15:37:18.337

GLControl 是基于事件的，因此只有在手动调用 GLControl.Invalidate() 之后才会渲染每一帧。

实际上，您并不总是需要高 fps。您只需要渲染更改。因此，可变 fps 可能对您来说已经足够好，因为它占用的系统资源更少。

输入处于活动状态时的 fps 值取决于输入设备，例如，我的触摸板每秒获得约 60 个事件，而具有 1000Hz 采样频率的 a4tech 鼠标在相同的基本样本上获得约 750 fps。

无论如何，如果您坚持恒定 fps，您可以在计时器中调用 Invalidate()，如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T21:56:43.187

制作一个每 1/60 秒调用 GLControl.Invalidate() 的计时器。另外，我不建议使用 Application.Idle 来运行动画，因为它有意外的行为。您是否正确交换缓冲区？

# c++ - 使用其 PID 编写 STDIN 以进行处理

> ID：14944978
> 
> 赞同：2
> 
> 时间：2013-02-18T20:44:44.700
> 
> 标签：c++, unix, process

我试图在一个终端窗口（窗口 1）上运行 GNU octave，然后从另一个窗口（窗口 2）向它发送命令。例如，从窗口 2 设置变量 x = 1（可能使用 octave 的 PID 的运行实例），然后通过 octave 接口检查窗口 1 中的 x 是什么。窗口 1 本质上只是在等待一个 STDIN，我想从另一个窗口提供它。

我找了几个小时来了解如何做到这一点，但我发现的一切都试图解决不同的问题。

我在 Mac OS X 上使用终端。我的 shell 是 Bash 4.2。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:57:05.170

我不能发誓这将在 OSX 上工作，但在 linux 上写入 /proc/${pid}/fd/0。

编辑：实际上这不起作用。谢谢@KeithThompson

# codeigniter - codeigniter：在运行时设置库变量可供所有用户访问

> ID：14944984
> 
> 赞同：0
> 
> 时间：2013-02-18T20:45:31.330
> 
> 标签：codeigniter

我正在使用 Codeigniter，并希望在运行时在库中设置一个私有变量，然后所有用户都可以从他们正在使用的控制器访问该变量。我正在使用 Codeigniter 用户会话。我尝试了下面的代码，但设置后该值变为空。这甚至可行还是有其他方法可以做到？

谢谢！

```
// To Set from controller
$this->qshared->setSharedVar('shared var');

// To get from controller
$this->qshared->getSharedVar();

    // Library class
class qShared
{
    private $shared_var = '';

    function setSharedVar($mySharedVar) {
        $this->shared_var = $mySharedVar;
    }

    function getSharedVar() {
        return $this->shared_var;
    }
} 
```

# sql - 存储过程 - 插入

> ID：14944986
> 
> 赞同：1
> 
> 时间：2013-02-18T20:45:34.833
> 
> 标签：sql, sql-server, stored-procedures

简化我有这个表设置：

```
Table Users:       Table HolidayTypes:              Table Days:
  ID                       ID                           Year
  Name                TypeName (f.e. 3 types)          TypeID  
                        DefaultValue                   UserId  
                                                       Amount 
```

现在我想要实现的是创建一个可以在每年年初运行的存储过程，它将执行以下操作：

对于每个用户，在 Days 表中为每种类型的假期添加新记录并插入默认金额。所以我想得到这样的东西：

```
Year      TypeId     UserId     Amount
2013        1           1         20
2013        2           1          4
2013        3           1         15
2013        1           2         20
2013        2           2          4
2013        3           2         15 
```

我没有存储过程的经验，所以如果有人可以帮助我解决这个问题或帮助我朝着正确的方向发展。任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:02:01.997

这应该是您要查找的查询，它使用`CROSS JOIN`：

```
INSERT INTO Days
SELECT Year(GetDate()) Year,
  HT.Id TypeId,
  U.Id UserId,
  DefaultValue                   
FROM Users U CROSS JOIN HolidayTypes HT 
```

这是示例小提琴：[http ://sqlfiddle.com/#!3/15164/1](http://sqlfiddle.com/#!3/15164/1)

这会产生以下结果：

```
YEAR    TYPEID  USERID  AMOUNT
2013    1       1       20
2013    2       1       10
2013    3       1       5
2013    1       2       20
2013    2       2       10
2013    3       2       5 
```

*顺便说一句——我在构建小提琴时使用了不同的默认值——相应地更新，您的金额将与您帖子中的金额相匹配。*

# java - 将代码约定规则放在哪里？

> ID：14944987
> 
> 赞同：0
> 
> 时间：2013-02-18T20:45:49.640
> 
> 标签：java, android, coding-style

我正在与一组开发人员（位于同一位置）一起开发一个项目（Android 项目）。

我们需要制定一些规则来命名类、文件、xml 元素等......

目前，我们在项目的根目录中有一个名为“code_conventions.txt”的文件，我们以自由文本方式编写规则。

前任： `1\. Append "Activity" string after each class in the app that extends Activity Class`

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:50:37.233

我工作的公司有一套用于所有 Java 开发的编码标准。该文件托管在我们自己的 wiki Intranet 上。新用户必须阅读文件并遵守约定。该文件包含一些约定，例如在成员变量名称前加上`m`，例如。`mUsername`，或对类和方法名称使用[驼峰式大小写](http://en.wikipedia.org/wiki/CamelCase)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:50:17.470

这些规则对于自动化来说已经成熟了。查看[Checkstyle](http://checkstyle.sourceforge.net/)，它将在您编写代码时自动检查这些类型的规则的执行情况，因此无需执行手动检查。

例如，您可以使用正则表达式检查来验证您在问题中记录的断言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:50:54.440

如果您真的想强制执行编码约定，您可以查看使用[http://checkstyle.sourceforge.net/](http://checkstyle.sourceforge.net/)并将其作为构建的一部分。

# iphone - 处理对多关系中 Core Data 对象的删除

> ID：14944991
> 
> 赞同：2
> 
> 时间：2013-02-18T20:46:05.903
> 
> 标签：iphone, ios, core-data

使用 Core Data，我希望设置一个具有以下一对多关系的标记系统：

```
article.tags <<------->> tag.articles 
```

在这种情况下，一个`article`可以有很多`tags`，而相同的`tags`可以分配给多个`articles`。每当`article`编辑 a 的标签时，我都会删除所有以前`tags`与 the 关联的标签，`article`并重新添加那些仍然相关的标签，如下所示：

```
// Remove any existing tags from this article
if(article.tags.count)
{
    NSSet *existingEventTags = [article.tags copy];
    for (NSManagedObject *tag in existingEventTags)
    {
        [[article mutableSetValueForKey:@"tags"] removeObject:tag];
        [moc deleteObject:tag];
    }
}

// Now re-assign any applicable tags to this article
for(NSString *tag in tags)
{
    Tag *existingTag = [self existingTagWithString:tag];
    if(existingTag)
    {
        [article addTagsObject:existingTag];
    }
    else
    {
        NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Tag" inManagedObjectContext:moc];
        Tag *newTag = (Tag *)[[NSManagedObject alloc] initWithEntity:entityDescription insertIntoManagedObjectContext:moc];
        newTag.name = tag;
        [article addTagsObject:newTag];
    }
} 
```

我的问题是如何最好地处理与这两个关系相关的删除规则。本质上，我正在寻找的行为是，当我从 a 中删除 a 时`tag`，如果没有其他人被标记`article`，我只想完全删除它。`articles`

为了实现这一点，我设置了我`tag.articles`与 Nullify 的关系，以及我`articles.tags`与 Cascade 的关系。但是，当删除一篇文章时，与它相关的任何标签（无论它们是否与其他文章相关联）都会被删除。为了测试这一点，我编写了一个简单的调试函数，我将在下面包括：

```
- (void)debugTags
{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Tag" inManagedObjectContext:moc];
    [request setEntity:entity];

    // Execute the fetch.
    NSError *error = nil;
    NSArray *objects = [moc executeFetchRequest:request error:&error];
    if (objects != nil && [objects count] > 0)
    {
        NSLog(@"Found %d tags", [objects count]);
        for(Tag *tag in objects)
        {
            NSLog(@"\t%@ (%d events)", tag.name, tag.articles.count);
        }
    }
    else
    {
        NSLog(@"No tags found!");
    }
} 
```

为了完整起见，这里是一个示例输出（显示创建`articles`两个共享两个`tags`：食物和快餐）。删除 one`article`后，我希望仍能在商店中找到食物和快餐，但关系计数为 1。

```
Before deletion
---------------

Found 4 tags
   breakfast (1 events)
   food (2 events)
   fastfood (2 events)
   lunch (1 events)

After deletion
--------------

Found 1 tags
   lunch (1 events) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T19:03:47.247

我发现这个问题的最佳解决方案是将删除规则都设置为 Nullify，并在 my`article`的`NSManagedObject` `prepareForDeletion`方法中处理删除：

```
- (void)prepareForDeletion
{
    [super prepareForDeletion];

    for (Tag *tag in self.tags)
    {
        if(tag.events.count == 1)
        {
            [self.managedObjectContext deleteObject:tag];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:00:39.893

一切都是正确的，除了删除规则。使用此配置 CoreData 不会保存错误的上下文：

```
 NSValidationErrorKey=events, NSLocalizedDescription=The operation couldn’t be completed. (Cocoa error 1600.), NSValidationErrorValue=Relationship 'articles' on managed object 
```

为此，您应该将 tag.articles 关系设置为 Nullify，并将我的文章.tags 关系设置为 Cascade。这将按预期工作。

第二。您的代码因异常而崩溃：**Collection <_NSFaultingMutableSet: 0x841de10> 在枚举时发生了变异。**制作关系副本以安全地枚举它：

```
 NSSet* tags = [[object valueForKey:@"tags"] copy];
    for (NSManagedObject *tag in tags) {
        [[object mutableSetValueForKey:@"tags"] removeObject:tag];
        [context deleteObject:tag];
    } 
```

# mongodb - 查询 mongodb - 使用限制与重新查询

> ID：14944992
> 
> 赞同：0
> 
> 时间：2013-02-18T20:46:09.577
> 
> 标签：mongodb, limit

场景是：

*   我正在查询数据（呃！）

*   可能会过滤掉一些服务器端，因为精确查询是不可能/合理的，即复杂查询

*   数据库可能承受相当大的负载。可能有许多并行请求，包括更新。

所以，我可以

a）不限制（）查询，只保留流数据，直到我得到足够的数据。但是，响应时间很重要，因此如果所需数据太稀疏，则可能必须在检索整个页面之前返回部分集合。

b) 使用 limit() 但偶尔会重新查询几次以尝试检索整页数据。同样，最终结果仍然可能不是一整套。这里的想法是提出几个额外的请求会减少数据库的负载。

我知道这可能是“视情况而定”，但我想知道是否有人对最佳实践或最佳起点有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:10:08.310

选项 (a) 将有助于在您所说的已经承受相当大负载的数据库上增加额外的负载。原因是如果没有限制，你`nscan`的`explain`命令很可能会很大，导致MongoDB服务器负载很重。在我看来，这将是一个非常糟糕的主意。

您可以使用`limit`，但请注意，随着尺寸的增加`skip`，它`limit`会变得越来越昂贵。`skip`来自 MongoDB 文档：

> 不幸的是，跳过可能（非常）昂贵，并且需要服务器从集合或索引的开头走到偏移/跳过位置，然后才能开始返回数据页面（限制）。随着页码的增加，skip 会变得更慢，CPU 密集度更高，并且可能会受到 IO 限制，并且集合更大。
> 
> 基于范围的分页可以更好地使用索引，但不允许您轻松跳转到特定页面。

您真正需要的是[基于范围的分页](https://stackoverflow.com/a/6806285/374420)，只要您有一个独特的列，您就可以使用它来排序和使用`$lt`and `$gt`。有关如何实现基于范围的分页的另一个示例，请参见[此处。](https://stackoverflow.com/a/8383928/374420)

# c# - 如何创建一个委托以分配给动态菜单的 onClick 事件？

> ID：14944994
> 
> 赞同：0
> 
> 时间：2013-02-18T20:46:33.173
> 
> 标签：c#, winforms, delegates, menuitem, menustrip

我想执行以下操作，但收到错误争论类型`DoWindow`不可分配给参数`System.EventHandler`

如何让我的委托继承自`System.EventHandler`？

```
 public delegate void DoWindow(MdiLayout layoutInstruction) ;

 private ToolStripMenuItem MakeWindowMenu()
    {
        var tsi = new ToolStripMenuItem("Window");
        tsi.DropDownItems.Add(CreateMenuItem("Cascade","Cascade the features",    DoWindowLayout(MdiLayout.Cascade)));
        tsi.DropDownItems.Add(CreateMenuItem("Tile Vertical","Tile the features vertically", this.DoWindowTileVertically));

       //etc
        return tsi;
    }

private   ToolStripMenuItem CreateMenuItem(string Caption, string tooltip, EventHandler onClickEventHandler)
    {
        var item = new ToolStripMenuItem(Caption);
        item.Click += onClickEventHandler;
        item.ToolTipText = tooltip;
        return item;
    }

public DoWindow DoWindowLayout(MdiLayout layoutInstruction)
    {
        Master.MDIForm.LayoutMdi(layoutInstruction);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:12:41.807

您可以使用 an`Action`作为参数并使用匿名`Eventhandler`来调用`Action`

就像是：

```
 private ToolStripMenuItem MakeWindowMenu()
    {
        var tsi = new ToolStripMenuItem("Window");
        tsi.DropDownItems.Add(CreateMenuItem("Cascade", "Cascade the features", () => Master.MDIForm.LayoutMdi(MdiLayout.Cascade)));
        tsi.DropDownItems.Add(CreateMenuItem("Tile Vertical", "Tile the features vertically", () => {  }));
        return tsi;
    }

    private ToolStripMenuItem CreateMenuItem(string Caption, string tooltip, Action onClickEventHandler)
    {
        var item = new ToolStripMenuItem(Caption);
        item.Click += (s, e) => { onClickEventHandler.Invoke(); };
        item.ToolTipText = tooltip;
        return item;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:54:20.990

您的自定义事件处理程序需要包含所需的方法签名。换句话说： ToolStripMenuItemClick 需要一个带有签名的方法

```
delegate void EventHandler(object Sender, EventArgs e); 
```

因此您需要更改委托的签名和相应的方法。

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.click.aspx)以获取更多参考。

# javascript - 将单选按钮列表更改为标签

> ID：14944996
> 
> 赞同：0
> 
> 时间：2013-02-18T20:46:35.253
> 
> 标签：javascript, jquery, forms, replace

我已经建立了一个表单，允许用户在单击按钮后编辑他们之前输入的信息。

在这种情况下，用户将单击性别标签旁边的编辑按钮，并显示一个单选按钮，允许他们选择男性或女性。

我需要帮助找出一种方法来让单选按钮列表在单击时变回标签。

这是我到目前为止所拥有的：

**HTML**

```
<div class="gear">
  <label>Gender:</label><br />
  <span id="gender" class="datainfoGender">Male</span>
   <a href="#" class="editlinkGender">Edit Info</a>
   <a class="savebtnGender">Save</a>
</div> 
```

**Javascript**

```
$(".editlinkGender").on("click", function (e) {
    e.preventDefault();
    var datasets = $(this).prevAll(".datainfoGender");
    var savebtn = $(this).next(".savebtnGender");
    datasets.each(function () {
        var theid = $(this).attr("id");
        var newid = theid + "-form";
        var currval = $(this).text();
        $(this).html('<input type="radio" name="gender" value="male">Male<br><input type="radio" name="gender" value="female">Female');
    });

    $(this).css("display", "none");
    savebtn.css("display", "block");
});

$(".savebtnGender").on("click", function (e) {
    e.preventDefault();
    var elink = $(this).prev(".editlinkGender");
    var datasets = $(this).prevAll(".datainfoGender");
    datasets.each(function () {
        var newid = $(this).attr("id");
        var einput = $("#" + newid + "-form");
        var newval = einput.val();
        einput.remove();
        $(this).html(newval);
    });

    $(this).css("display", "none");
    elink.css("display", "block");
}); 
```

我如何从单选按钮列表中获取值并将其制成标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:56:25.037

检索这样的值：

```
var newGender = $('[name="gender"]').val(); 
```

并将其更改为这样的标签：

```
$('[name="gender"]').html('your choice : ' + newGender); 
```

# javascript - 防止 AngularJS 中的默认事件无法正常工作

> ID：14944997
> 
> 赞同：0
> 
> 时间：2013-02-18T20:46:37.130
> 
> 标签：javascript, html, angularjs

这是我的 HTML 表单：

```
<form class="form-login" name="loginForm" novalidate ng-submit="login()">
    <fieldset>
        <h2>Login</h2>
        <input type="text" required class="input-block-level" placeholder="Username" ng-model="username" name="username" tabindex="1" xs-input-sync>
        <input type="password" required class="input-block-level" placeholder="Password" ng-model="password" name="password" tabindex="2" xs-input-sync>

    </fieldset>
</form> 
```

这是提交表单时调用的控制器方法：

```
$scope.login = function() {
        $http.post($scope.serviceUrls.getAuthenticationUrl($scope.username), {
            "password": $scope.password
        }).success(function(data, status, headers) {

        }).error(function(data, status) {

        });
        return false;
    } 
```

到目前为止一切正常。但由于浏览器仅在您在表单上设置了属性时才显示本机“记住密码”对话框`action="/"`，所以我也将它添加到我的表单中。

添加`action="/"`表单后，无论我尝试什么，都会在按下 Enter 键或登录按钮时提交。我也尝试将`$event`参数添加到 html`login`函数调用中，然后执行`$event.preventDefault();`但仍然不行。

同样的事情发生在 url 上，例如：

```
<a class="xs-btn edit-btn" ng-click="toggleEditMode($event)"></a> 
```

我试过：`$event.preventDefault();`, `return false;`, 添加`href=""`, `href="#"`. 但是没有任何工作，我总是被重定向到站点的根目录。唯一有效的是`href="javascript:void(0);"`.

知道我做错了什么吗？整个应用程序似乎有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:59:27.823

如我所见，只需添加`onsubmit="return false"`即可`<form>`完成工作：[http ://plnkr.co/edit/a7bUU1VWAZOUYyXQjvF3?p=preview](http://plnkr.co/edit/a7bUU1VWAZOUYyXQjvF3?p=preview)