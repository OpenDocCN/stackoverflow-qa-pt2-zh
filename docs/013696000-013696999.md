# StackOverflow 问答 13696000-13696999

# actionscript-3 - 使用 Adob e Air 在 iPad 上检查网络状态的最简单方法

> ID：13696003
> 
> 赞同：2
> 
> 时间：2012-12-04T04:17:03.673
> 
> 标签：actionscript-3, air

我想用 Adob​​e Air 检查 iPad 上的网络状态，此时我正在通过向 Google.com 发送 URLREQUEST 来检查。有没有其他更好的方法来监控网络状态，并知道是否有连接或连接已被丢弃。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T05:06:00.530

棘手的部分在这里我们没有 ping 一些间隔时间。所以我们使用

```
NativeApplication.nativeApplication.addEventListener(Event.NETWORK_CHANGE, onNetwork_ChangeHandler); 
```

它会在更改网络状态更改时触发，因此性能方面也不错。

因为 Ping 是非常昂贵的操作。所以在触发网络变化后调用 start() URLMontior 然后我们调用 stop()。

```
 package com.abc.net
    {
    import air.net.URLMonitor;
    import flash.desktop.NativeApplication;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.events.StatusEvent;
    import flash.net.URLRequest;

    [Event(name="networkStatusChanged", type="flash.events.Event")]
    public class NetStatusMonitor extends EventDispatcher
    {
        private var urlMonitor:URLMonitor;
        private var url:String;

        public function KBNetStatusMonitor(url:String = 'http://www.adobe.com')
        {
            super();
            this.url = url;
            NativeApplication.nativeApplication.addEventListener(Event.NETWORK_CHANGE, onNetwork_ChangeHandler);
        }

        protected function onNetwork_ChangeHandler(event:Event):void
        {
            start();
        }       

        public function start():void
        {
            urlMonitor = new URLMonitor(new URLRequest(url));
            urlMonitor.addEventListener(StatusEvent.STATUS, onNetStatus_ChangeHandler);

            if(!urlMonitor.running)
                urlMonitor.start();
        }

        public function stop():void
        {
            if(urlMonitor.running)
                urlMonitor.stop();
        }

        private function onNetStatus_ChangeHandler(event:StatusEvent):void
        {
            trace("event code " + event.code);
            trace("event level " + event.level);
            dispatchEvent(new NetStatusEvent(NetStatusEvent.NETWORK_STATUS_CHANGED,urlMonitor.available));
            stop();
        }
    }
} 
```

事件类

```
package com.abc.net
{
    import flash.events.Event;

    public class NetStatusEvent extends Event
    {
        public static const  NETWORK_STATUS_CHANGED:String = "networkStatusChanged";

        public var status:Boolean;

        public function NetStatusEvent(type:String, status:Boolean, bubbles:Boolean=false, cancelable:Boolean=false)
        {
            super(type, bubbles, cancelable);
            this.status = status;
        }

        override public function clone():Event
        {
            return new NetStatusEvent(type, status, bubbles,cancelable);
        }

    }
} 
```

用法 ：

```
var netStatusMonitor:NetStatusMonitor = new NetStatusMonitor();
    netStatusMonitor.addEventListener(NetStatusEvent.NETWORK_STATUS_CHANGED,function(event:NetStatusEvent):void {
           statusCallBack.call(null,event.status);
});

netStatusMonitor.start(); 
```

# javascript - 嵌套的 WHILE 循环未按预期运行 - Javascript / Google Apps 脚本

> ID：13696006
> 
> 赞同：3
> 
> 时间：2012-12-04T04:17:26.200
> 
> 标签：javascript, google-apps-script, wolfram-mathematica, nested-loops

我有一个没有按预期运行的功能。在继续之前，我想先说明一下，我通常在 Mathematica 中编程，并负责将 Mathematica 函数（我编写的）移植到 JavaScript，以便它可以在 Google Docs 电子表格中使用。我有大约 3 小时的 JavaScript 经验...

给定晶圆和裸片尺寸（以及其他输入），整个（小）项目正在计算每个晶圆的裸片总面积。不工作的部分是我检查模具的任何角落是否在有效半径之外，Reff。

该函数采用 X 和 Y 坐标列表，当它们组合时，创建模具中心的单独 XY 坐标。然后将其放入一个单独的函数“maxDistance”中，该函数计算 4 个角中每个角的距离并返回最大值。对照 Reff 检查该最大值。如果最大值在半径内，则骰子数加 1。

```
// Take a list of X and Y values and calculate the Gross Die per Wafer
function CoordsToGDW(Reff,xSize,ySize,xCoords,yCoords) {

  // Initialize Variables
  var count = 0;

  // Nested loops create all the x,y coords of the die centers
  for (var i = 0; i < xCoords.length; i++) {
    for (var j = 0; j < yCoords.length, j++) {         
      // Add 1 to the die count if the distance is within the effective radius
      if (maxDistance(xCoords[i],yCoords[j],xSize,ySize) <= Reff) {count = count + 1}
    }
  }

  return count;
} 
```

以下是我得到的一些示例：

```
xArray={-52.25, -42.75, -33.25, -23.75, -14.25, -4.75, 4.75, 14.25, 23.75, 33.25, 42.75, 52.25, 61.75}
yArray={-52.5, -45.5, -38.5, -31.5, -24.5, -17.5, -10.5, -3.5, 3.5, 10.5, 17.5, 24.5, 31.5, 38.5, 45.5, 52.5, 59.5}
CoordsToGDW(45,9.5,7.0,xArray,yArray)
  returns: 49 (should be 72)

xArray={-36, -28, -20, -12, -4, 4, 12, 20, 28, 36, 44}
yArray={-39, -33, -27, -21, -15, -9, -3, 3, 9, 15, 21, 27, 33, 39, 45}
CoordsToGDW(32.5,8,6,xArray,yArray)
  returns: 39 (should be 48) 
```

我知道 maxDistance() 正在返回正确的值。那么，我的简单错误在哪里？

另外，请原谅我用数学符号写了一些东西......

编辑＃1：一点点格式化。

编辑#2：根据 showi，我将 WHILE 循环更改为 FOR 循环，并将 <= 替换为 <。仍然不是正确的答案。虽然它确实清理了一些东西......

编辑#3：我实际上想做的是采用 [a,b] 和 [a,b,c] 并返回 [[a,a],[a,b],[a,c],[b ,a],[b,b],[b,c]]

**编辑#4：**

所以事实证明我的嵌套循环**工作**正常：当我删除 maxDistance 函数并将其替换为 1（因此 1 <= Reff 始终为真）时，我发现循环执行的总数是正确的。

我是如何找到它的：我添加了一些代码，这些代码只是打印出函数在每次循环迭代中所做的事情，并看到 X 和 Y 是正确的，但是当 X || 时 maxDistance 函数返回 NaN 或一个非常大的值 Y 为阳性。我会研究这个功能。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:38:45.533

如果我没记错的话，你在做的时候会比实际数组大小多一个元素

> 而（i <= xCoords.length）{

它应该是

> 而（i < xCoords.length）{

但是我更喜欢

> for (var i = 0; i < xCoords.length; i++)

不知道它是否可以帮助:)

当你在做 var a = {10, 9, 8, 7} 它不是一个数组而是一个对象时，你的意思可能是 var a = []; 或者它是数学的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:40:28.670

```
while (i < xCoords.length) {
    j = 0;
    while (j < yCoords.length) { 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:48:19.203

所以事实证明我的嵌套循环**工作**正常：当我删除 maxDistance 函数并将其替换为 1（因此 1 <= Reff 始终为真）时，我发现循环执行的总数是正确的。

我是如何找到它的：我添加了一些代码，这些代码只是打印出函数在每次循环迭代中所做的事情，并看到 X 和 Y 是正确的，但是当 X || 时 maxDistance 函数返回 NaN 或一个非常大的值 Y 为阳性。我会研究这个功能。

# magento - magento 升级后单个产品 url 给出 404

> ID：13696011
> 
> 赞同：1
> 
> 时间：2012-12-04T04:18:15.940
> 
> 标签：magento

我将企业安装从 升级`v1.10.1.1`到`v1.12.0.2`并且只有一个产品 url 给出了 404 错误。其他产品网址工作正常，所以有点奇怪。

从我可以收集的决议中，我尝试了以下方法：

*   刷新缓存
*   删除整个 var 文件夹
*   重新编译一切
*   禁用编译
*   重新索引所有内容

然而，我似乎没有想办法让它发挥作用。

日志文件中没有任何内容，我完全不知道它可能是什么。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:32:57.560

转到管理 -> 目录 -> URL 重写管理

检查以确保产品 ID 存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T04:27:24.280

检查`report_event_types`表是否为空运行此查询就是这样。

```
 INSERT INTO `report_event_types` (`event_type_id`, `event_name`, `customer_login`) VALUES
(1, 'catalog_product_view', 0),
(2, 'sendfriend_product', 0),
(3, 'catalog_product_compare_add_product', 0),
(4, 'checkout_cart_add_product', 0),
(5, 'wishlist_add_product', 0),
(6, 'wishlist_share', 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T14:27:56.563

执行以下命令后，问题将得到解决。

```
 INSERT INTO `report_event_types` (`event_type_id`, `event_name`, `customer_login`) VALUES
(1, 'catalog_product_view', 0),
(2, 'sendfriend_product', 0),
(3, 'catalog_product_compare_add_product', 0),
(4, 'checkout_cart_add_product', 0),
(5, 'wishlist_add_product', 0),
(6, 'wishlist_share', 0); 
```

# c++ - 为什么复制初始化是这样的？为什么需要复制构造函数？

> ID：13696016
> 
> 赞同：8
> 
> 时间：2012-12-04T04:18:40.870
> 
> 标签：c++, copy-constructor, copy-initialization

> **可能重复：**
> [复制和直接初始化行为不同的动机是什么？](https://stackoverflow.com/questions/11223285/whats-the-motivation-behind-having-copy-and-direct-initialization-behave-differ)

通过复制初始化，我的意思是这样的：

```
struct MyStruct
{
    MyStruct(int) {}
    MyStruct(const MyStruct&) {}
};

MyStruct s = 5; // needs *both* the int and copy constructor 
```

尽管使用 C++ 编程多年，但我从未意识到上面的代码需要复制构造函数（感谢 jogojapan）。临时性总是被忽略，因此我什至不知道它甚至存在（至少在表面上，尽管它被优化掉了），直到它被指出给我。

经过大量的谷歌搜索后，我明白了它是如何工作的。我的问题是*为什么*会这样？

为什么标准没有使上面的示例不需要复制构造函数？是否有一些特定的案例/示例表明在这种类型的初始化中需要复制构造函数很重要？

如果没有一个体面的解释*为什么*事情会这样，我只是认为这是一个令人讨厌的人工制品，但如果我遗漏了一些重要的东西，我宁愿不要无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:37:00.510

对象的复制初始化与直接初始化是模棱两可的，两者可以在相同程度上用于设置彼此相等的值。

```
int a = 4;
int a = int(4);
int a(4); 
```

所有这些调用都是模棱两可的，它们都将 a 设置为 4。在整数的情况下使用复制构造函数的原因是方便，想象一下没有 this 的 c++ 数据类型

```
int a(foo(b,r)); //a little messy for a variable declaration
int a = foo(b,r) //ok, cleaner 
```

您也可能会使用隐式和显式复制构造函数，这是一个示例程序，它显式使用复制构造函数来处理虚数：

```
#include <iostream>
using std::cout;
using std::endl;
class complexNumbers {
  double real, img;
public:
  complexNumbers() : real(0), img(0) { }
  complexNumbers(const complexNumbers& c) { real = c.real; img = c.img; }
  explicit complexNumbers( double r, double i = 0.0) { real = r; img = i; }
  friend void display(complexNumbers cx);
};
void display(complexNumbers cx){
  cout<<&quot;Real Part: &quot;<<cx.real<<&quot; Imag Part: &quot;<<cx.img<<endl;
}
int main() {
  complexNumbers one(1);
  display(one);
  complexNumbers two =2;
  display(200);
  return 0;
} 
```

# ios - 如何通过 segue 传递 Section 和 Row 指定的 tableview 单元格内容？

> ID：13696018
> 
> 赞同：2
> 
> 时间：2012-12-04T04:18:49.900
> 
> 标签：ios, xcode, tableview, segue

我经常使用 prepareForSegue 将内容传递给下一个视图控制器。当我的表格视图不使用部分时没问题。但是我已经在我的最新项目中添加了部分。现在我不知道如何使用 prepareForSegue，因为它没有收到包含部分引用的 indexpath。我错过了什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:31:33.087

在您的 prepareForSegue 方法中，只需使用：

```
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow]; 
```

并将其传递给destinationViewController。

# c# - 使用矩形数组存储值

> ID：13696026
> 
> 赞同：0
> 
> 时间：2012-12-04T04:19:44.800
> 
> 标签：c#, arrays, loops

```
 public mainForm()
    {
        InitializeComponent();
    }
    string[,] summary = new string[10, 4];

    private void exitButton_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void calculateButton_Click(object sender, EventArgs e)
    {
            decimal monthlyInvestment =
                    Convert.ToDecimal (monthlyInvestmentTextBox.Text);
            decimal yearlyInterestRate =
                    Convert.ToDecimal (interestRateTextBox.Text);
            int years = 
                Convert.ToInt32(yearsTextBox.Text);

            int months = years * 12;
            decimal monthlyInterestRate = yearlyInterestRate / 12 / 100;

            decimal futureValue = 0;
            for (int i = 0; i < months; i++)
            {
                futureValue = (futureValue + monthlyInvestment)
                        * (1 + monthlyInterestRate);
            }
            futureValueTextBox.Text = futureValue.ToString("c");
            monthlyInvestmentTextBox.Focus();
    } 
```

该程序根据利率和年份计算投资的未来价值。一旦用户点击计算，我希望程序在一个 10x4 的数组中存储多达 10 个计算。4 投资、利率、年限和未来价值。单击退出按钮后，我希望显示一个包含 10 个先前计算的消息框。我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:37:00.650

```
public class FutureInvestments
{
public decimal monthlyInvestment {get;set;}
public decimal yearlyInterestRate {get;set;}
public decimal futureValue {get;set;}
public decimal monthlyInterestRate {get;set;}
public decimal monthlyInvestment {get;set;}

  public string Calculate()
  {
    int months = years * 12;
    monthlyInterestRate = yearlyInterestRate / 12 / 100;
    for (int i = 0; i < months; i++)
    {
     futureValue = (futureValue + monthlyInvestment)  * (1 + monthlyInterestRate);
    }
    return futureValue.ToString("c");  
  }  
}

public mainForm()
{
    InitializeComponent();
}

List<FutureInvestments> summary = new List<FutureInvestments>();

private void calculateButton_Click(object sender, EventArgs e)
{
   //Instantiate class - passing in ReadOnly parameters
   var futureInv = new FutureInvestment() {monthlyInvestment = Convert.ToDecimal (monthlyInvestmentTextBox.Text), monthlyInvestment = Convert.ToDecimal(monthlyInvestmentTextBox.Text), yearlyInterestRate = Convert.ToDecimal (interestRateTextBox.Text) years =  Convert.ToInt32(yearsTextBox.Text));

   futureInv.Calculate();

   //Store the calculation for showing user when application closes
   summary.Add(futureInv);
 }

private void exitButton_Click(object sender, EventArgs e)
{
    foreach(var item in summary)
    {
        MessageBox.Show("Future value is: " + item.FutureValue.ToString());
    }
    this.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:11:18.530

@Jeremy Thompson 是对的；让您的课程专注于他们所做的事情 - 表单用于 UI，Investment 课程处理其他所有事情。

```
 public partial class mainForm : Form
{
    private Stack<Investment> Investments;

    public mainForm()
    {
        InitializeComponent();
        Investments = new Stack<Investment>();
    }

    private void calculateButton_Click(object sender, EventArgs e)
    {
        Investment thisInvestment = new Investment(Convert.ToDecimal(monthlyInvestmentTextBox.Text),
                                                   Convert.ToDecimal(interestRateTextBox.Text),
                                                   Convert.ToInt32(yearsTextBox.Text));
        Investments.Push(thisInvestment);
        futureValueTextBox.Text = thisInvestment.futureValue.ToString("c");
        monthlyInvestmentTextBox.Focus();

    }

    private void exitButton_Click(object sender, EventArgs e)
    {
        int count = Math.Min(10, Investments.Count);
        StringBuilder sb = new StringBuilder();
        for (int i = 1; i <= count; i++)
        {
            sb.AppendLine(Investments.Pop().ToString());
        }
        MessageBox.Show(sb.ToString());
    }
}

public class Investment
{
    public Investment(decimal monthlyInvestment, decimal yearlyInterestRate, int years)
    {
        this.monthlyInvestment = monthlyInvestment;
        this.yearlyInterestRate = yearlyInterestRate;
        this.years = years;
    }

    public decimal monthlyInvestment { get; set; }
    public decimal yearlyInterestRate { get; set; }
    public decimal monthlyInterestRate
    {
        get
        {
            return yearlyInterestRate / 12 / 100;
        }
    }
    public int years { get; set; }
    public int months
    {
        get
        {
            return years * 12;
        }
    }
    public decimal futureValue
    {
        get
        {
            decimal retVal = 0;
            for (int i = 0; i < months; i++)
            {
                retVal = (futureValue + monthlyInvestment)
                        * (1 + monthlyInterestRate);
            }
            return retVal;
        }
    }

    public override string ToString()
    {
        return string.Format("Investment of {0:c} for {1:n} years at {2:p} pa yields {3:c}", monthlyInvestment,years,monthlyInterestRate,futureValue);
    }
} 
```

# java - 确定字符串中有多少个数字和字母

> ID：13696027
> 
> 赞同：0
> 
> 时间：2012-12-04T04:19:49.403
> 
> 标签：java, string, parsing

```
import java.util.Scanner;

public class digitthingy
{
    public static void main(String args[])
    {
        Scanner s = new Scanner(System.in);

        String first="";
        int firstnum=0;

        System.out.print("Enter a string: ");
        first = s.nextLine();

        firstnum = first.indexOf("1-100");

        System.out.println(firstnum);
    }
} 
```

我想知道我输入的某个字符串中有多少个数字，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T04:24:28.507

这看起来像是一份工作`regular expressions`！

```
String s = "sdf234sdf234";

System.out.println(s.replaceAll("\\D", "").length()); 
```

或者也许你在每个多位数字实例之后？

```
String s = "sdf234sdf234sdf23";

s = s.replaceAll("^\\D+|\\D+$", "").replaceAll("\\D+", ",");

List<String> numbers = Arrays.asList(s.split(","));

System.out.println(numbers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T15:54:49.017

对于位数：

```
Pattern digitPattern = Pattern.compile("\\d");
Matcher digitMatcher = digitPattern.matcher("asdf 123 qwer");
int digitCount = 0;
while (digitMatcher.find()) 
   digitCount++; 
```

与字母类似，只使用“[a-zA-Z]”正则表达式；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:23:13.617

```
String myString = "whatever123";
int count = 0;
for (int i = 0; i < myString.length(), i++) {
    if (Character.isDigit(myString.charAt(i)) {
        count++;  
    }
}
System.out.println(count); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-19T05:49:13.053

用java 8计算字符串中的数字：

```
public long countDigits(String s) {
    return s.chars().mapToObj(i -> (char) i).filter(Character::isDigit).count();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-26T10:18:45.017

```
public class ArrayDigits 

{
     public static void main(String[] args)
     {
        String str = new String("Hey123456789234Hey");
        String num = new String("0123456789");
        int dig_count = 0;

        for(int i=0;i<str.length();i++)
        {
           for(int j=0;j<num.length();j++)
           {
               if(str.charAt(i)==num.charAt(j))
               {
                  dig_count++;
              }
          }
        }
        System.out.println("Total length of String:"+str.length());
        System.out.println("Number of digits:"+dig_count);
        System.out.println("Number of characters:"+(str.length() - dig_count));
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T04:29:50.997

尝试这个 ...

```
public class digitthingy
{
 public static void main(String args[])
 {
     Scanner sc = new Scanner(System.in);

    String s="";
    int firstnum=0;

    System.out.print("Enter a string: ");
    s = sc.nextLine();
    int digitCount =0, charCount=0;
    for(int i=0;i<s.length();i++){
if(s.charAt(i)==' ') continue;
else if((s.charAt(i) >='a' && s.charAt(i)<='z') || (s.charAt(i)>='A' && s.charAt(i)<='Z'))
    charCount++;
else if(s.charAt(i) >= '0' && s.charAt(i)<='9')
    digitCount++;
   }
System.out.println(digitCount+ " "+ charCount);
  }
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T04:24:49.547

您可以使用 Scanner 类：

```
 Scanner in = new Scanner(System.in);

   // Reads a single line from the console 
   // and stores into name variable
   first = s.nextLine(); 
```

然后遍历字符串：

```
 int numbers = 0;
  int letters = 0;

  for(int i = 0; i < first.length(); i++)
  {
   if      (Character.isDigit (first.charAt(i)) numbers++;  // Count the digits
   else if (Character.isLetter(first.charAt(i)) letters++;   // Count the Letters
   else{} // is not a letter and not a digit
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-19T06:18:10.113

试试这个代码，我希望它会工作

```
import java.util.Scanner;

public class CountDigitAndCharacter {

        public static void main(String args[])
        {
            Scanner s = new Scanner(System.in);

            String first="";
            int firstnum=0;

            System.out.print("Enter a string: ");
            first = s.nextLine();
            int numberCount=0,charCount=0;
            for(int i=0; i<first.length();i++){
                char c=first.charAt(i);
                if(c=='0' || c=='1' || c=='2' || c=='3' || c=='4' || c=='5' || c=='6' || c=='7' || c=='8' || c=='9' )
                    ++numberCount;
                else
                    ++charCount;    
            }

            System.out.println("numberCount  :-"+numberCount   +"  CharCount   :-"+charCount);
        }
} 
```

结果：- 输入一个字符串：l0kesh numberCount :-1 CharCount :-5

# php - 在引导程序中使用分页发布变量

> ID：13696028
> 
> 赞同：0
> 
> 时间：2012-12-04T04:19:51.837
> 
> 标签：php, post, twitter-bootstrap, pagination

使用引导程序时，我需要发布一个附加变量。我有一个工作正常的下拉菜单，但是当用户从下拉菜单中选择时，我还希望能够从分页列表中选择第二个输入。

到目前为止我的代码：

```
 <form action="racing.php" method="POST">
        <select name="meeting_codes" id="meeting_codes" class="span1" onchange="this.form.submit();">  
             <?php include('get_codes.php'); 
             $selected = $_POST['meeting_codes'];
                for($i=0; $i<count($data_array); $i++){
                echo' <option value="'.$data_array[$i][0].( $data_array[$i][0] == $selected ? '" selected="selected">' : '">' ).$data_array[$i][0].'</option>'; 
                }            
             ?>
        </select>  
    </form> 

    <div class="pagination">
        <ul>
        <?php
            for($j=1; $j<=12; $j++){
                echo '<li><a>'.$j.'</a></li>';
            }
        ?>
        </ul>
    </div> 
```

我包含一个需要两个 $_POST 变量的 PHP 文件，第一个来自下拉列表，第二个来自分页列表...

第一个包含文件 ( `get_codes.php`) 为下拉菜单创建一个数组。

如何插入第二个 POST 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:39:58.143

我已经管理了一个解决方案......无论它是否合适，或优雅，我不确定

旧代码：

```
echo '<li><a>'.$j.'</a></li>'; 
```

变成：

```
echo '<li><a href="?meeting_code='.$selected.'&race_num='.$j.'">Race '.$j.'</a></li>'; 
```

其中 'meeting_code' 和 'race_num' 是需要通过 $_GET 发布的变量

# sql - 是否可以使用多个内部联接重写此 SQL 查询，使其执行得更快？

> ID：13696030
> 
> 赞同：0
> 
> 时间：2012-12-04T04:20:21.110
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一张有 200,000 行的表。我创建了一个视图，我根据不同的标准从该表中删除数据片段，这些标准符合我对构成重复记录的定义。我在下面有这样做的代码，我想知道是否有人可以建议一种更快/更有效的方法来编写这个查询。目前执行大约需要 20 秒，但我希望最多几秒钟来执行这个查询，如果不是更少的话。我正在使用 SQL Server 2005。我对 SQL 的了解非常初级，我很感激任何帮助。

```
WITH dsm_hardware_basic_cte AS
(
 SELECT    TOP 100 PERCENT
           dbo.dsm_hardware_basic.[UUID]
          ,dbo.dsm_hardware_basic.[Name]
          ,dbo.dsm_hardware_basic.[LastAgentExecution]
          ,dbo.dsm_hardware_basic.[MaxUserRegistration]
          ,REPLACE(RIGHT([MaxUserRegistration], CHARINDEX('/', REVERSE([MaxUserRegistration])) - 1),'_ADMIN','') AS [MaxUserUsername]
          ,dbo.dsm_hardware_basic.[LastUserRegistration]
          ,REPLACE(RIGHT([LastUserRegistration], CHARINDEX('/', REVERSE([LastUserRegistration])) - 1),'_ADMIN','') AS [LastUserUsername]
          ,dbo.dsm_hardware_basic.[IPAddress]
          ,dbo.dsm_hardware_basic.[HostName]
          ,dbo.dsm_hardware_basic.[MACAddress]
 FROM      dbo.dsm_hardware_basic
)

SELECT     TOP 100 PERCENT
           dsm_hardware_basic_cte.[UUID]
          ,dsm_hardware_basic_cte.[Name]
          ,dsm_hardware_basic_cte.[LastAgentExecution]
          ,dsm_hardware_basic_cte.[MaxUserRegistration]
          ,dsm_hardware_basic_cte.[LastUserRegistration]
          ,dsm_hardware_basic_cte.[IPAddress]
          ,dsm_hardware_basic_cte.[HostName]
          ,dsm_hardware_basic_cte.[MACAddress]
FROM       dsm_hardware_basic_cte
           INNER JOIN
           (
            SELECT    [UUID]
                     ,ROW_NUMBER() OVER (PARTITION BY [Name], [MACAddress] ORDER BY [LastAgentExecution] DESC) AS [NameMACRowNum]
            FROM      dsm_hardware_basic_cte
           ) AS duplicate_NameMAC_filtered
             ON duplicate_NameMAC_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_NameMAC_filtered.[NameMACRowNum] = 1
           INNER JOIN
           (
            SELECT    [UUID]
                     ,ROW_NUMBER() OVER (PARTITION BY [Name], [HostName] ORDER BY [LastAgentExecution] DESC) AS [NameHostNameRowNum]
            FROM      dsm_hardware_basic_cte
           ) AS duplicate_NameHostName_filtered
             ON duplicate_NameHostName_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_NameHostName_filtered.[NameHostNameRowNum] = 1
           INNER JOIN
           (
            SELECT    [UUID]
                     ,ROW_NUMBER() OVER (PARTITION BY [HostName], [MACAddress] ORDER BY [LastAgentExecution] DESC) AS [HostNameMACRowNum]
            FROM      dsm_hardware_basic_cte
           ) AS duplicate_HostNameMAC_filtered
             ON duplicate_HostNameMAC_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_HostNameMAC_filtered.[HostNameMACRowNum] = 1
           INNER JOIN
           (
            SELECT    [UUID]
                     ,ROW_NUMBER() OVER (PARTITION BY [HostName], [IPAddress] ORDER BY [LastAgentExecution] DESC) AS [HostNameIPAddressRowNum]
            FROM      dsm_hardware_basic_cte
           ) AS duplicate_HostNameIPAddress_filtered
             ON duplicate_HostNameIPAddress_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_HostNameIPAddress_filtered.[HostNameIPAddressRowNum] = 1
           INNER JOIN
           (
            SELECT    [UUID]
                     ,ROW_NUMBER() OVER (PARTITION BY [Name], [MaxUserUsername] ORDER BY [LastAgentExecution] DESC) AS [NameMaxUserRowNum]
            FROM      dsm_hardware_basic_cte
           ) AS duplicate_NameMaxUser_filtered
             ON duplicate_NameMaxUser_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_NameMaxUser_filtered.[NameMaxUserRowNum] = 1
           INNER JOIN
           (
            SELECT    [UUID]
                     ,ROW_NUMBER() OVER (PARTITION BY [Name], [LastUserUsername] ORDER BY [LastAgentExecution] DESC) AS [NameLastUserRowNum]
            FROM      dsm_hardware_basic_cte
           ) AS duplicate_NameLastUser_filtered
             ON duplicate_NameLastUser_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_NameLastUser_filtered.[NameLastUserRowNum] = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:58:04.923

根据您的查询计划，按 LastAgentExecution 排序需要 19% 的时间。首先在此列上创建索引。

但是，如果我是你，我会改变使用“ROW_NUMBER() OVER (PARTITION BY [Name], [MACAddress] ORDER BY [LastAgentExecution] DESC)”类型语法的习惯，因为它似乎不是很有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:42:43.453

而不是内部连接，尝试用这样的“Exists”子句替换它们

```
WHERE      EXISTS           
           ((SELECT [UUID],[NameMACRowNum]
                FROM
                        (SELECT    [UUID]
                                 ,ROW_NUMBER() OVER (PARTITION BY [Name], [MACAddress] ORDER BY [LastAgentExecution] DESC) AS [NameMACRowNum]
                        FROM      dsm_hardware_basic_cte) AS duplicate_NameMAC_filtered
            WHERE duplicate_NameMAC_filtered.[UUID] = dsm_hardware_basic_cte.[UUID]
            AND duplicate_NameMAC_filtered.[NameMACRowNum] = 1) 
```

不确定它应该是存在还是不存在，但是一旦其余的工作正常进行更改将很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:14:20.387

我不知道您的需求是什么，但我会尝试重新编写查询：

```
WITH dsm_hardware_basic_cte AS (
 SELECT
    d.[UUID]
    ,d.[Name]
    ,d.[LastAgentExecution]
    ,d.[MaxUserRegistration]
    ,REPLACE(RIGHT([MaxUserRegistration], CHARINDEX('/', REVERSE([MaxUserRegistration])) - 1),'_ADMIN','') AS [MaxUserUsername]
    ,d.[LastUserRegistration]
    ,REPLACE(RIGHT([LastUserRegistration], CHARINDEX('/', REVERSE([LastUserRegistration])) - 1),'_ADMIN','') AS [LastUserUsername]
    ,d.[IPAddress]
    ,d.[HostName]
    ,d.[MACAddress]
    ,ROW_NUMBER() OVER (PARTITION BY [Name], [MACAddress] ORDER BY [LastAgentExecution] DESC) AS [NameMACRowNum]
    ,ROW_NUMBER() OVER (PARTITION BY [Name], [HostName] ORDER BY [LastAgentExecution] DESC) AS [NameHostNameRowNum]
    ,ROW_NUMBER() OVER (PARTITION BY [HostName], [MACAddress] ORDER BY [LastAgentExecution] DESC) AS [HostNameMACRowNum]
    ,ROW_NUMBER() OVER (PARTITION BY [HostName], [IPAddress] ORDER BY [LastAgentExecution] DESC) AS [HostNameIPAddressRowNum]
    ,ROW_NUMBER() OVER (PARTITION BY [Name], [MaxUserUsername] ORDER BY [LastAgentExecution] DESC) AS [NameMaxUserRowNum]
    ,ROW_NUMBER() OVER (PARTITION BY [Name], [LastUserUsername] ORDER BY [LastAgentExecution] DESC) AS [NameLastUserRowNum]
 FROM      dbo.dsm_hardware_basic as d
)

SELECT
    c.[UUID]
    ,c.[Name]
    ,c.[LastAgentExecution]
    ,c.[MaxUserRegistration]
    ,c.[LastUserRegistration]
    ,c.[IPAddress]
    ,c.[HostName]
    ,c.[MACAddress]
FROM       dsm_hardware_basic_cte as c
WHERE
    c.[NameMACRowNum] = 1
    or c.[NameHostNameRowNum] = 1
    or c.[HostNameMACRowNum] = 1
    or [HostNameIPAddressRowNum] = 1
    or [NameMaxUserRowNum] = 1
    or [NameLastUserRowNum] = 1 
```

我认为您的查询和我的查询在逻辑上是等效的。优化器可能足够聪明，可以将您的查询减少到我的范围内，但请试一试！几点注意事项：

1.  我使用表别名以使其更具可读性（在我看来）
2.  我从您的选择中删除了“前 100%”子句。不需要；这通常是人们实施的一种技巧，因此他们可以在视图中执行命令以获得“有序视图”。不要那样做。:)

# css - 改进数学方程式的基本 CSS 格式

> ID：13696033
> 
> 赞同：1
> 
> 时间：2012-12-04T04:20:56.787
> 
> 标签：css

我正在开发一个用 HTML、CSS 和 JavaScript 编写的适用于 Windows 8 的应用程序。我在 CSS 格式化部分苦苦挣扎。我能够格式化我的应用程序，使其看起来有点像我希望它看起来的方式，但我想知道如何清理我的 CSS？我“谷歌”并进行了试验，直到我得到了我想要的布局，但我想知道正确的、首选的 CSS 格式化方式？

下面是我的代码：

```
 <style type="text/css">
     .quiz p {
        margin-left: 120px;
    }

    .quizDiv2 {
        margin-top: 220px;
        width: 320px;
        margin-left: auto;
        margin-right: auto;
    }

    .cenDiv {
        text-align: center ;

    }

    .cenDiv2 {
        text-align: center ;
         font-size:250%;
    }

    .alignleft {
      float: left;
      width:33.33333%;
      text-align:left;
    }
    .aligncenter {
      float: left;
      width:33.33333%;
      text-align:center;
    }
    .alignright {
     float: left;
     width:33.33333%;
     text-align:right;
    }​

     .alignleft2 {
        float: left;
    }
    .alignright2 {
        float: right;
    }

    .container {
        width:320px;
    }

    .first,
    .second {
        width:100%;
        text-align:right;
        display:table;
        font-size:250%;
    }
    .plus {
        width:auto;
        float:left;
    }
    .number {
        width:auto;
        float:right;
    }
    .third {
        width:100%;
        text-align:right;
        border-top:2px solid black;
        border-color:black;
    }
    ​ .correct {
     font-size:250%;
    }
     </style>
    </head>

    <body>
     <div class="quizDiv2">

                <div id="textbox">
     <p class="alignleft" id="statQuestionDiv">1/10</p>
     <p class="aligncenter" id="statTimerDiv">02:27</p>
     <p class="alignright" id="statScoreDiv">100%</p>
     </div>
     <div style="clear: both;"></div>

            <div class="container">
        <div class="first" id="mathProblemDiv1">1,483</div>
        <div class="second">
            <div class="plus">+</div>
            <div class="number" id="mathProblemDiv2">4,573</div>
        </div>
        <div class="third">
            <div class="result"></div>
        </div>
    </div>

            <div class="cenDiv">
                <!-- Fill in the blank div -->
                <div id="fillBlankDiv">
                <input id="userAnswer" type="text" />
                <p>
                <button id="btn7">7</button>
                <button id="btn8">8</button>
                <button id="btn9">9</button>
                </p>
                <p>
                <button id="btn4">4</button>
                <button id="btn5">5</button>
                <button id="btn6">6</button>
                </p>
                <p>
                <button id="btn1">1</button>
                <button id="btn2">2</button>
                <button id="btn3">3</button>
                </p>
                <p>
                <button id="btn0">0</button>
                <button id="btnNeg">+/-</button>
                <button id="btnOk">OK</button>
                </p>
                </div>
                </div>
            <div class="cenDiv2">
                <div id="checkDiv">CORRECT!</div>
       </div>
                 </div>

    </body>
    </html> 
```

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/qe7BJ/)]]]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:34:21.720

你可以使用这个简单的 CSS Cleaner。这个网站很棒，非常适合清理未来的 CSS 样式。

您可以在 CSS 输入中复制并粘贴您的样式，然后选择输出的大小。我推荐高。

[http://www.cleancss.com/](http://www.cleancss.com/)

希望这可以帮助！

这是清理后的代码：

```
<style>
.quiz p{margin-left:120px;}
.quizDiv2{margin-top:220px;width:320px;margin-left:auto;margin-right:auto;}
.cenDiv{text-align:center;}
.cenDiv2{text-align:center;font-size:250%;}
.alignleft{float:left;width:33.33333%;text-align:left;}
.aligncenter{float:left;width:33.33333%;text-align:center;}
.alignright{float:left;width:33.33333%;text-align:right;}
.alignleft2{float:left;}
.alignright2{float:right;}
.container{width:320px;}
.first,.second{width:100%;text-align:right;display:table;font-size:250%;}
.plus{width:auto;float:left;}
.number{width:auto;float:right;}
.third{width:100%;text-align:right;border-top:2px solid #000;border-color:#000;}
.correct{font-size:250%;}
</style> 
```

**更新：**对于 css 中的最佳实践，如果你有一种风格，你将使用类似的风格。例如文本对齐和字体大小以及列。像这样在你的 CSS 中创建类：

```
 .onethird { width:33.33333%; }
 .alignleft { text-align:left; }
 .aligncenter { text-align:center; }
 .alignright { text-align:right; }

 .largefont { font-size:250%; font-family: arial,tahoma; font-weight:normal;} 
```

然后在您的 html 上添加类，例如：

```
 <div class="container">
      <div class="first alignleft onethird">
      </div>
      <div class="second aligncenter onethird">
      </div>
      <div class="third alignright onethird">
      </div>
 </div> 
```

这样 use 可以应用您一遍又一遍地使用的样式，而无需将 . 添加到每个 css 类中。然后，如果您想更改特定的样式，请更具体地调用您的 css，它将覆盖默认样式。例如：

`.container .onethird { width:100%; }`

将覆盖`.onethird { width:33.33333%; }`

这就是我在 css 中的工作方式，它对我帮助很大。希望这可以帮助！

# excel - 从猪导出到 CSV

> ID：13696036
> 
> 赞同：10
> 
> 时间：2012-12-04T04:21:06.827
> 
> 标签：excel, csv, apache-pig

我在将数据从 pig 中获取到 CSV 中时遇到了很多麻烦，我可以在 Excel 或 SQL（或 R 或​​ SPSS 等）中使用而无需进行大量操作......

我试过使用以下功能：

```
STORE pig_object INTO '/Users/Name/Folder/pig_object.csv'
    USING CSVExcelStorage(',','NO_MULTILINE','WINDOWS'); 
```

它使用该名称创建包含大量 part-m-0000# 文件的文件夹。稍后我可以使用 cat part* > filename.csv 将它们全部加入，但没有标题，这意味着我必须手动输入。

我读过 PigStorageSchema 应该创建另一个带有标题的位，但它似乎根本不起作用，例如，我得到的结果就像它只是存储一样，没有头文件：STORE pig_object INTO '/Users/名称/文件夹/pig_object' 使用 org.apache.pig.piggybank.storage.PigStorageSchema();

（我在本地和 mapreduce 模式下都试过了）。

有没有任何方法可以在没有这些多个步骤的情况下将 Pig 中的数据转换为简单的 CSV 文件？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-04T12:03:26.123

恐怕没有一个单线可以完成这项工作，但您可以提出以下建议（Pig v0.10.0）：

```
A = load '/user/hadoop/csvinput/somedata.txt' using PigStorage(',') 
      as (firstname:chararray, lastname:chararray, age:int, location:chararray);
store A into '/user/hadoop/csvoutput' using PigStorage('\t','-schema'); 
```

当[PigStorage 使用](http://pig.apache.org/docs/r0.10.0/api/org/apache/pig/builtin/PigStorage.html)' `-schema`' 时，它将在输出目录中创建一个 ' `.pig_schema`' 和一个 ' '。`.pig_header`然后你必须将 ' `.pig_header`' 与 ' `part-x-xxxxx`' 合并：

**1.**如果需要将结果复制到本地磁盘：

```
hadoop fs -rm /user/hadoop/csvoutput/.pig_schema
hadoop fs -getmerge /user/hadoop/csvoutput ./output.csv 
```

（由于`-getmerge`需要一个输入目录，您需要先摆脱`.pig_schema`）

**2.**将结果存储在 HDFS 上：

```
hadoop fs -cat /user/hadoop/csvoutput/.pig_header 
  /user/hadoop/csvoutput/part-x-xxxxx | 
    hadoop fs -put - /user/hadoop/csvoutput/result/output.csv 
```

如需进一步参考，您还可以查看以下帖子：
[将输出存储到单个 CSV？](https://stackoverflow.com/questions/9910908/store-output-to-a-single-csv)
[如何使用 Hadoop FS shell 将 hadoop 中的两个文件连接成一个文件？](https://stackoverflow.com/questions/10607716/how-can-i-concatenate-two-files-in-hadoop-into-one-using-hadoop-fs-shell)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-26T16:56:50.163

如果您将数据存储`PigStorage`在 HDFS 上，然后使用以下方法进行合并`-getmerge -nl`：

```
STORE pig_object INTO '/user/hadoop/csvoutput/pig_object'
    using PigStorage('\t','-schema');
fs -getmerge -nl /user/hadoop/csvoutput/pig_object  /Users/Name/Folder/pig_object.csv; 
```

[文件：](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html#getmerge)

> 可选 -nl 可以设置为在每个文件的末尾添加换行符 (LF)。

您将拥有一个具有以下结构的 TSV/CSV 文件：

```
1 - header
2 - empty line
3 - pig schema
4 - empty line
5 - 1st line of DATA
6 - 2nd line of DATA
... 
```

所以我们可以简单地`[2,3,4]`使用 AWK 删除行：

```
awk 'NR==1 || NR>4 {print}' /Users/Name/Folder/pig_object.csv > /Users/Name/Folder/pig_object_clean.csv 
```

# r - 当主题之间的“时间”值不同时，在 R 中重塑

> ID：13696037
> 
> 赞同：4
> 
> 时间：2012-12-04T04:21:08.580
> 
> 标签：r, reshape

我已经浏览了整个网络，包括 StackOverflow，并在提出这个问题之前测试了各种东西，但如果我错过了一个很好的答案，请原谅我。

我看到了很多关于 reshape 功能的帮助（以及包，但我不能做我需要的）。我有一个因主题而异的“时间”变量，例如，它不是 time1、time2、time3。我想创建一个广泛的数据集，将主题 ID 的每个唯一时间值视为“time1”、“time2”、“time3”，但我需要保存日期。为了具体说明，这里有一些示例数据：

```
Id<-c(1, 1,1, 2,2,2, 3)
date<-c("Jan10", "Jun11", "Dec11", "Feb10", "May10", "Dec10", "Jan11")
Score<-c(52, 43, 67, 56, 33, 21, 20)
format2<-data.frame(Id, date, Score)
format2

  Id  date Score
1  1 Jan10    52
2  1 Jun11    43
3  1 Dec11    67
4  2 Feb10    56
5  2 May10    33
6  2 Dec10    21
7  3 Jan11    20 
```

我希望它看起来像这样：

```
 Id  date1 Score1 date2 Score2 date3 Score3
  1  Jan10    52    Jun11    43  Dec11    67
  2  Feb10    56    Dec10    21  May10    33 
  3  Jan11    20      NA     NA    NA     NA 
```

感谢您的帮助，如果我错过了一个明显的答案，我深表歉意。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T04:32:57.203

您需要生成一个`time`变量，可以使用以下方法快速完成`ave()`：

```
format2$time <- ave(format2$Id, format2$Id, FUN=seq_along)
reshape(format2, direction = "wide", idvar="Id", timevar="time")
#   Id date.1 Score.1 date.2 Score.2 date.3 Score.3
# 1  1  Jan10      52  Jun11      43  Dec11      67
# 4  2  Feb10      56  May10      33  Dec10      21
# 7  3  Jan11      20   <NA>      NA   <NA>      NA 
```

有些人更喜欢这个`reshape2`包，因为它的语法，但即使在那里，你也需要有一个`time`变量才能做任何有趣的事情。

从上面继续（创建时间变量的地方）：

```
library(reshape2)
format2m <- melt(format2, id.vars=c("Id", "time"))
dcast(format2m, Id ~ variable + time)
#   Id date_1 date_2 date_3 Score_1 Score_2 Score_3
# 1  1  Jan10  Jun11  Dec11      52      43      67
# 2  2  Feb10  May10  Dec10      56      33      21
# 3  3  Jan11   <NA>   <NA>      20    <NA>    <NA> 
```

# android - 地图未在android中加载

> ID：13696044
> 
> 赞同：0
> 
> 时间：2012-12-04T04:21:50.953
> 
> 标签：android, map

嗨，我是 android 中这张地图的新手。我试图加载我的应用程序。我已经做了一切

1.  生成密钥

2.  清单文件中的权限。但只有一个普通的灰色网格即将到来。

找了半天左右。并按照他们说的去做。一切都是正确的..但我不知道地图没有加载..我真的很担心这个..请帮助我..提前谢谢。

我生成 MD5 指纹打印的命令：

```
keytool -list -alias androiddebugkey -keystore "C:\Documents and Settings\Admin\.android\debug.keystore"\ -storepass android -keypass android 
```

我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.map"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INERNET" />
    <uses-permission android:name="android.permission.WRITE_GSERVICES" />

    <application

        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name=".Mapcctivity"
            android:label="@string/title_activity_mapcctivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

我的活动文件：

```
public class Mapcctivity extends MapActivity {
    private MapView mMapView = null;  
     private MapController mc = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

//        mMapView = new MapView(this, "0FTpADSJRjSkczl5Jd4E8yoTlhthq6np5gPQClQ");
        setContentView(R.layout.ssss);

//        MapView mp=new MapView(this,"0FTpADSJRjSmVNLeQhafHG_AHJD9mo5lAEsJ_KQ");

        GeoPoint gPoint = new GeoPoint(19240000,-99120000);

        mMapView = (MapView) findViewById(R.id.mapview);
        mMapView.setSatellite(true);
        mMapView.setBuiltInZoomControls(true);

        mc = mMapView.getController();
        mc.setZoom(15);
        mc.setCenter(gPoint);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="My generated key"
/> 
```

当地图加载时，我的 logcat 如下：

```
12-04 09:42:09.553: E/ActivityThread(285): Failed to find provider info for com.google.settings
12-04 09:42:09.563: E/ActivityThread(285): Failed to find provider info for com.google.settings
12-04 09:42:09.673: E/ActivityThread(285): Failed to find provider info for com.google.settings
12-04 09:42:10.583: D/dalvikvm(285): GC freed 1891 objects / 125528 bytes in 140ms
12-04 09:42:11.213: I/MapActivity(285): Handling network change notification:CONNECTED
12-04 09:42:11.213: E/MapActivity(285): Couldn't get connection factory client
12-04 09:42:12.093: D/dalvikvm(285): GC freed 4623 objects / 271376 bytes in 149ms
12-04 09:42:16.403: D/dalvikvm(285): GC freed 13753 objects / 921216 bytes in 175ms
12-04 09:42:26.873: D/dalvikvm(285): GC freed 9400 objects / 642912 bytes in 181ms 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:43:33.557

生成映射键如下：

1.[到这个链接生成MD5指纹](https://developers.google.com/maps/documentation/android/v1/mapkey)

2.[点击此链接，您将使用生成的 MD5 指纹获取地图密钥](https://developers.google.com/maps/documentation/android/v1/maps-api-signup)

3.在您的 xml 文件中使用此密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:51:57.210

放

```
 android:minSdkVersion="8" 
```

在你的清单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:26:03.357

感谢所有伙计..我解决了这个..真的我找到解决方案后很烦恼..

问题是 ：

请参阅我的清单文件权限.. `For "INTERNET" i misspelled as "INERNET"`...这个罪魁祸首是问题..

# ruby-on-rails - 重用 activerecord 范围有很多通过关联

> ID：13696045
> 
> 赞同：0
> 
> 时间：2012-12-04T04:22:05.600
> 
> 标签：ruby-on-rails, activerecord, arel

假设我的 rails 3.1 项目中有一些 activerecord 模型，如下所示：

```
class Component < ActiveRecord::Base
    has_many :bugs
end

class Bug < ActiveRecord::Base
    belongs_to :component
    belongs_to :project

    scope :open, where(:open => true)
    scope :closed, where(:open => false)
end

class Project < ActiveRecord::Base
    has_many :bugs
    has_many :components_with_bugs, :through => :bugs, :conditions => ["bugs.open = ?", true]
end 
```

**简而言之：**我有一个 has_many through 关联 ( `components_with_bugs`)，我想在其中定义“通过”模型。目前我正在通过复制范围的代码来做到这一点。

有什么方法可以定义这个有很多通过关联（`components_with_bugs`），这样我就可以重用`Bug.open`通过模型上的范围，同时仍然在单个数据库查询中加载组件？（我在想象类似的东西`:conditions => Bug.open`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-22T21:38:46.150

**铁轨 4个答案**

鉴于您有：

```
class Component < ActiveRecord::Base
  has_many :bugs
end

class Bug < ActiveRecord::Base
  belongs_to :component
  belongs_to :project

  scope :open,   ->{ where( open: true) }
  scope :closed, ->{ where( open: false) }
end 
```

你有两种可能：

```
class Project < ActiveRecord::Base
  has_many :bugs

  # you can use an explicitly named scope
  has_many :components_with_bugs, -> { merge( Bug.open ) }, through: :bugs, source: 'component'

  # or you can define an association extension method
  has_many :components, through: :bugs do
    def with_open_bugs
      merge( Bug.open )
    end
  end
end 
```

调用`projet.components_with_bugs`or`project.components.with_open_bugs`将触发相同的 sql 查询：

```
SELECT "components".* FROM "components"
INNER JOIN "bugs" ON "components"."id" = "bugs"."component_id"
WHERE "bugs"."project_id" = ? AND "bugs"."open" = 't'  [["project_id", 1]] 
```

哪个更好用取决于您的应用程序。但是如果您需要在同一个关联上使用多个范围，我想[关联扩展](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Association+extensions "这里")可能会更清晰。

真正的魔法是通过[合并](http://apidock.com/rails/ActiveRecord/SpawnMethods/merge)完成的，正如名字所说，它允许你合并另一个 ActiveRecord::Relation 的条件。在这种情况下，它负责`AND "bugs"."open" = 't'`在 sql 查询中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:35:07.463

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)指定_

> **:conditions**指定关联对象必须满足的条件才能作为 WHERE SQL 片段包含在内，例如 authorized = 1。

因此，您可以这样做：

```
class Project < ActiveRecord::Base
  has_many :bugs
  has_many :components_with_bugs, :through => :bugs do
    def open
      where("bugs.open = ?", true)
    end
  end
end 
```

编辑：

您不能将另一个模型的范围指定为条件。就您而言，他们实施它的方式是正确的。你可以用另一种方式实现它

```
has_many :components_with_bugs, :through => :bugs # in this case, no need to use the relation.

def open_bugs
  self.bugs.openn # openn is the scope in bug. Don't use name 'open'. It's a private method of Array.
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:14:11.903

尝试使用以下内容。

`has_many :components_with_bugs, :through => :bugs do`
   `Bug.open`
`end`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:10:14.533

你不能用这样的东西吗？

```
has_many :components_with_bugs, :through => :bugs, :conditions => Bug.open.where_values 
```

我没有测试过，只是提出一个调查路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T05:25:58.913

除了您的范围之外，将默认范围写为：
**`default_scope where(:open => true)`**在您的“通过”模型**Bug**中。

`class Bug < ActiveRecord::Base`
  `belongs_to :component`
  `belongs_to :project`
  **`default_scope where(:open => true)`**
  `scope :open, where(:open => true)`
  `scope :closed, where(:open => false)`
`end`

并在项目模型中删除**:conditions => ["bugs.open = ?", true]**

`class Project < ActiveRecord::Base`
  `has_many :bugs`
  `has_many :components_with_bugs, :through => :bugs`
`end`

我认为以上内容对您有用。

# c# - 隐藏 Windows 8 桌面图标

> ID：13696046
> 
> 赞同：16
> 
> 时间：2012-12-04T04:22:06.380
> 
> 标签：c#, windows-8

一段时间以来，我使用以下 Win32 代码来隐藏桌面（隐藏所有桌面图标）。以下是我的 Win32_Window 类，因为桌面只是一个窗口。

```
public bool Visible
{
    get { return IsWindowVisible(Handle); }
    set
    {
        ShowWindow(Handle, value ? ShowWindowConsts.SW_SHOW :
            ShowWindowConsts.SW_HIDE);
    }
} 
```

在 Windows 8 中，上述内容不仅隐藏了桌面，而且使其完全空白。现在我想这可以被认为是正常的，因为命令是隐藏，但到目前为止这还不是问题，因为桌面的背景图像仍然可见（这是意图）。

我试过这个来切换图标：[https](https://stackoverflow.com/a/6403014/353147) ://stackoverflow.com/a/6403014/353147但它在 Windows 8 中不起作用。

有人找到解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-12T10:09:47.760

您可以在 RegEdit HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced 中执行此操作，将 HideIcons 更改为 1

```
 static void HideIcons()
    {
        RegistryKey myKey = Registry.CurrentUser.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced", true);
        if (myKey != null)
        {
            myKey.SetValue("HideIcons", 1);
            myKey.Close();
        }
    } 
```

使用此处描述的 Registry 类。

[http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)

# sql - SSIS 配置文件在计划包期间出现无效错误

> ID：13696047
> 
> 赞同：0
> 
> 时间：2012-12-04T04:22:09.713
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我已经用配置文件创建了我的一个包，并且在远程服务器上的 BIDS、DTEXEC.EXE 和 DTEXECUI.exe 中运行良好但是我们正在使用一些第三方工具来安排作业（我不能说）。它不会在其中运行，它会创建一个错误“配置文件无效并且文件位置路径错误”。我该怎么办？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:49:24.983

鉴于您的包在 BIDS 中运行良好，并且当您手动执行它时，这强烈地嗅到了权限问题。

您将需要查看运行神秘的第三方计划工具的 Active Directory 用户。您需要确保帐户 (domain\ThirdPartySchedulerService) 对`DriveLetter:\path\to\config.dtsconfig`

另请注意，如果假设要映射驱动器号，则它可能不适用于服务帐户。关于访问网络共享的类似声明。

# winapi - 从 WM_GETFONT 消息中得到一个奇怪的结果

> ID：13696051
> 
> 赞同：1
> 
> 时间：2012-12-04T04:22:30.110
> 
> 标签：winapi

实际上，我试图通过使用带有 SENDMESSAGE 函数的 WM_GETFONT 来获取从其他应用程序运行的 Windows 窗体控件中使用的字体，但即使控件的字体不是系统字体，我也总是以 0 结尾。请....帮帮我。

提前致谢....！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:35:31.227

每个控件决定它使用什么字体。打算在对话框内使用的控件应该支持`WM_SETFONT`，`WM_GETFONT`因为这是对话框管理器设置对话框字体的方式。对于所有其他控件，对这些消息的支持是可选的。Windows 窗体控件不会出现在对话框中（它们出现在窗体上），因此没有理由期望它们支持`WM_SETFONT`或`WM_GETFONT`. 如果您知道您有一个 Windows 窗体控件，那么您可以使用适当的 Windows 窗体方法和属性来获取字体。

# symfony - 如何加载和缓存翻译？

> ID：13696053
> 
> 赞同：0
> 
> 时间：2012-12-04T04:23:02.183
> 
> 标签：symfony

我正在为 SF2 使用 gettext 翻译，并且我将翻译文件安排在与普通包不同的文件夹结构中（我为某些特定需求创建了自己的迷你插件系统）。

无论如何，这就是我加载翻译文件的方式：

```
$finder = new Finder();
$finder->files()->filter(function (\SplFileInfo $file)
{
    return 2 === substr_count($file->getBasename(), '.') && preg_match('/\.\w+$/', $file->getBasename());
})->in($dirs);
foreach ($finder as $file) {
    // filename is domain.locale.format
    list($domain, $locale, $format) = explode('.', $file->getBasename(), 3);

    // we have to add resource right away or it will be too late
    $translator->addResource($format, (string)$file, $locale, $domain);
} 
```

它运作良好，唯一的问题是它没有缓存，效率不高。我想知道我应该做些什么来缓存这些翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:48:26.520

我的问题是我忘记了配置文件中的声明翻译器，因此翻译通行证不起作用

```
framework:
  translator: { fallback: %locale% } 
```

# ios - 无法返回之前的界面

> ID：13696054
> 
> 赞同：0
> 
> 时间：2012-12-04T04:23:04.663
> 
> 标签：ios, uiviewcontroller

这是我第一个使用按钮调用另一个xib接口的接口

```
-(IBAction)poli

UIViewController *ll = [[UIViewController alloc] initWithNibName:@"ViewController" bundle:nil];
[self presentModalViewController:ll animated:YES]; 
```

第二个接口调用前一个接口....

```
-(IBAction)popaa

UIViewController *ui = [[UIViewController alloc] initWithNibName:@"Ra" bundle:nil];
[self presentModalViewController:ui animated:YES]; 
```

但是出现了一个问题，显示

由于未捕获的异常“ `NSUnknownKeyException`”而终止应用程序，原因`[<UIViewController 0x7433230> setValue:forUndefinedKey:]`：：此类不符合键 pol 的键值编码

有人可以解释这个问题吗，我只想让第一个 xib 显示第二个，第二个通过按钮显示第一个 xib。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:31:19.347

检查您的 xibs 是否有任何警告。`setValue:forUndefinedKey:`当您在 xib 中添加了一些视图但未将相同的视图添加到您的类代码或未正确定义出口时，通常会引发此问题。在这种情况下，您已向 xib 添加了一些视图，但您的或类`pol`中不存在相同的视图。`ll``ui`

你的解雇方法也应该是，

```
- (IBAction)popaa

  [self dismissViewControllerAnimated:YES];
} 
```

# design-patterns - symfony2 中使用的设计模式

> ID：13696059
> 
> 赞同：19
> 
> 时间：2012-12-04T04:23:45.033
> 
> 标签：design-patterns, symfony, doctrine-orm

在*symfony2*中，使用单例模式的*服务。*Doctrine 使用工作单元模式。*我想知道symfony2*中可能会使用很多设计模式。我认为更好地理解设计模式会很有用。我的问题是*symfony2 中使用的设计模式是什么？*

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-09-13T17:26:32.250

我刚刚创建了这个图表。作为 Sf2 课程的指南。

![在此处输入图像描述](../Images/74208daf977281948c18232b80283f8c.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-04T06:07:13.653

我认为您可以找到任何探索 Symfony2 组件的设计模式。例如，Form 组件为您提供了 Factory、Facade、Composite、Builder、Flyweight 模式示例。

并且不要忘记 Symfony2 中使用的主要依赖注入模式

# java - 最新的 Java 6 是否会开箱即用地运行 JavaFX 2

> ID：13696061
> 
> 赞同：6
> 
> 时间：2012-12-04T04:24:00.430
> 
> 标签：java, javafx-2, compatibility, java-6

由于 Java 7 还没有 Java 6 流行，我想知道我是否可以在 Java 6 JRE 的最新更新中使用 WebView 之类的东西，而无需用户在他们的系统上下载 JavaFX。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T06:23:19.873

不，Java 6 不会开箱即用地运行 JavaFX 2。

如果今天开发一个新的 JavaFX 应用程序，我建议以 Java Runtime 7u9 的最低版本为目标，原因如下。

1.  [Java Runtime 6 和 JavaFX for Java Runtime 6 将于 2013 年2 月](http://java.com/en/download/faq/java_6.xml)停止公开分发。

2.  JavaFX 的 Java 运行时仅适用于安装了单独的下载 - 这可能会让您的应用程序的用户感到困惑。

3.  Java 6 Runtime 的 JavaFX 仅适用于 Windows，并且由于 Oracle 的 Java Runtime for Windows 自动更新，Windows 机器上的 Java 通常是最新的公共版本。

4.  如果您将您的应用程序定位到至少 JavaFX 2.2 和 Java Runtime 7u6，那么您的应用程序将运行更广泛的平台（Windows、Mac、Linux）并具有更多部署选项（例如[自包含应用程序](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T06:23:37.077

我认为可以将 jfxrt.jar 与您的应用程序一起分发，同时依靠用户的系统 JRE 6 来运行 JavaFX 应用程序。请记住，Java 6 不附带 JavaFX。

如果您担心用户计算机上的内容，您可能需要考虑通过将您的程序与 JRE 和 JavaFX“捆绑”来创建一个独立的应用程序包。[您可以在http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)阅读有关自包含应用程序打包的更多信息。

# ios - 将 iOS 设备变成 AirPlay 扬声器

> ID：13696062
> 
> 赞同：2
> 
> 时间：2012-12-04T04:24:09.237
> 
> 标签：ios, audio, airplay

我在摆弄一个应用程序，而且我也知道开发人员制作的应用程序允许 iOS 设备从另一个 iOS 设备或 iTunes 接收音频流。所以我想实现它，并可能在 Apple 的指导方针中找到一种方法，允许流式传输音频。我试过寻找所有东西，但我找不到从哪里开始。任何想法，一个起点，甚至一个方向都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T00:17:49.920

在 github 上查看 airspeaker 项目。

[https://github.com/chenkaigithub/AirSpeaker](https://github.com/chenkaigithub/AirSpeaker)

我能够在 iOS 模拟器 6.0 上运行它，然后使用我的 iphone 流式传输音频。但是，如果我尝试从 iTunes 11 流式传输它不起作用（iTunes 将设备列在播放列表中，但在选择时提示错误“播放设备与此版本的 iTunes 不兼容。”）

# ruby - 使用模块范围之外的对象

> ID：13696064
> 
> 赞同：6
> 
> 时间：2012-12-04T04:24:22.077
> 
> 标签：ruby, ruby-on-rails-3

我有这样的代码。

```
class User < ActiveRecord::Base
end

module Foo
  class User
  end
end

module Foo
  class DoesSomethingWithActiveRecordUser
    def initialize user_id
      User.find(user_id)
    end
  end
end 
```

如果我打电话`Foo::DoesSomethingWithActiveRecordUser.new(1)`，我会收到一条错误消息，上面写着类似`undefined method 'find' for Foo::User`.

如何从内部调用 ActiveRecord 用户`Foo`？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-04T04:29:44.187

像这样：

```
::User.find(user_id) 
```

# java - 使用xml解析显示产品属于android listview中的类别

> ID：13696076
> 
> 赞同：0
> 
> 时间：2012-12-04T04:25:24.217
> 
> 标签：java, android, listview, xml-parsing

我必须在我的 android listview 应用程序中通过 xml 解析传递类别、子类别和产品详细信息。

```
This is my xml feed:

<Feed>
    <category>
        <Category>
            <Categoryname>Books</Categoryname>
            <SubCategory>
                <subcategoryname>Internet</subcategoryname>
                <Product>
                    <Name>New Masters of Flash</Name>
                    <Price>79.99</Price>
                </Product>
                <Product>
                    <Name>Professional Java Server Programming</Name>
                    <Price>63.99</Price>
                </Product>
            </SubCategory> 
            <SubCategory>
                <subcategoryname>Software</subcategoryname>
                <Product>
                    <Name>Krishnaveni</Name>
                    <Price>79.99</Price></Product>
                <Product>
                    <Name>Veeman</Name>
                    <Price>63.99</Price>
                </Product>
            </SubCategory>
        </Category>
    </category>
</Feed> 
```

在这里我遇到了一些问题。

我必须运行应用程序意味着

----> 主要活动必须仅显示书籍（类别）。----> 我必须单击 Books listview 意味着正在获取（子类别）。他们是：

```
Internet
Software 
```

---->在我必须单击**Internet**后，意味着我正在获取该特定（Internet）类别的产品。他们是：

```
New Masters of Flash
Professional Java Server Programming 
```

如果我必须单击第二个子类别（**软件**）意味着我必须得到以下结果：

```
Krishnaveni
Veeman 
```

在这里只有我遇到了一些问题。

在这里，我必须单击 Internet 子类别意味着获得 4 个产品。同样的方法也适用于软件。我必须单击软件子类别意味着获得 4 个产品。

我如何开发这个。请帮助我。我怎样才能获得该特定子类别的产品。

这是我的编码部分：

```
public class AndroidXMLParsingActivity extends Activity {
static final String URL = "http://192.168.1.168/xcart432pro/feed.xml";
 private static final int Tech = 0;

 static String KEY_CATEGORY = "Category";
 static final String KEY_TITLE = "Categoryname";

ListView lview3;
LazyAdapter adapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY);

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));

            songsList.add(map);
        }
    lview3 = (ListView) findViewById(R.id.listView1);
    adapter = new LazyAdapter(this, songsList);
    lview3.setAdapter(adapter);

    lview3.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);
         switch (position)
         {
             case Tech:
                 Intent tech = new Intent(AndroidXMLParsingActivity.this, com.androidhive.xmlparsing.SubCate.class);
                 tech.putExtra(KEY_TITLE, "Books");
                 startActivity(tech);   
                 break;

             default:
                 break;
         }
        }  

     }); 
```

第二个活动：

```
public class SubCate extends Activity {
static final String URL = "http://192.168.1.168/xcart432pro/feed.xml";
 private static final int Tech = 0;
 private static final int Sport =1;
 static String KEY_CATEGORY = "SubCategory";
 static  final String KEY_SUBCATE = "subcategoryname";
ListView lview3;
ListViewCustomAdapter adapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY);

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key =&gt; value

            map.put(KEY_SUBCATE, parser.getValue(e, KEY_SUBCATE));

            songsList.add(map);
        }
    lview3 = (ListView) findViewById(R.id.listView1);
    adapter = new ListViewCustomAdapter(this, songsList);
    lview3.setAdapter(adapter);

    lview3.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);
         switch (position)
         {
             case Tech:
                 Intent tech = new Intent(SubCate.this, com.androidhive.xmlparsing.Catalogue.class);
                 tech.putExtra(KEY_SUBCATE, "Internet");
                 startActivity(tech);   
                 break;
             case Sport:
                 Intent sport = new Intent(SubCate.this, com.androidhive.xmlparsing.Catalogue.class);
                 sport.putExtra(KEY_SUBCATE, "Software");
                    startActivity(sport);   
                 break;

             default:
                 break;
         }
        }  

     }); 
```

第三项活动：

```
public class Catalogue extends Activity {

// static String URL = "https://dl.dropbox.com/u/48258247/catalogue.json";
static final String URL = "http://192.168.1.168/xcart432pro/feed.xml";

 static String KEY_CATEGORY = "Product";

 static final String KEY_TITLE = "Name";

static final String KEY_DESCRIPTION = "Description";
static final String KEY_COST = "Price"; 
//static final String KEY_THUMB_URL = "Image";

ListView list;
ListAdapter adapter;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY);

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key =&gt; value

            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
           map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
            map.put(KEY_COST, parser.getValue(e, KEY_COST));
          //  map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)findViewById(R.id.listView1);

        // Getting adapter by passing xml data ArrayList
        adapter=new ListAdapter(this, songsList);
        list.setAdapter(adapter);

        System.out.println("Category is:- " + KEY_CATEGORY);
        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                HashMap<String, String> map = songsList.get(position);

            }

        }); 
```

请检查代码并为我提供解决方案。请帮助我。

**编辑：**

我必须在我的第二个活动中添加代码（SubCate.java）

首先声明 KEY_TITLE

```
 static final String KEY_TITLE = "Categoryname"; 
```

在 onCreate 函数添加以下行之后：

```
 Bundle bdl = getIntent().getExtras();
    KEY_CATEGORY = bdl.getString(KEY_TITLE); 
```

我还在第三个活动（Catalogue.java）上添加了一些代码。

首先声明 KEY_SUBCATE：

```
static  final String KEY_SUBCATE = "subcategoryname"; 
```

在 onCreate() 函数之后必须添加以下行：

```
 Bundle bdl = getIntent().getExtras();
      KEY_CATEGORY = bdl.getString(KEY_SUBCATE); 
```

现在我必须运行该应用程序意味着我没有得到任何产品。请帮助我。我怎样才能获得正确类别的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:21:11.950

只需`final`在点击子类别之前制作每个产品。我认为您的问题将得到解决。如果您不使这些最终值每次都排在最后位置。

我想你在这里发送产品表格：---

```
 map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
       map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
        map.put(KEY_COST, parser.getValue(e, KEY_COST)); 
```

只需更换它：---

```
final  String key_title=parser.getValue(e, KEY_TITLE);
final String key_desc=parser.getValue(e, KEY_DESCRIPTION);
fiinal String key_cost=parser.getValue(e, KEY_COST);

    map.put(KEY_TITLE, key_title);
       map.put(KEY_DESCRIPTION, key_desc);
        map.put(KEY_COST, key_cost); 
```

# javascript - 无法理解 jQuery-UI 弹出菜单

> ID：13696078
> 
> 赞同：4
> 
> 时间：2012-12-04T04:25:30.817
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-menu

我试图弄清楚如何使用 jQuery UI 菜单小部件制作弹出菜单。

在四处寻找之后，我终于找到了以下演示，可以满足我的需求：

[http://view.jqueryui.com/menubar/demos/popup/popup-menu.html](http://view.jqueryui.com/menubar/demos/popup/popup-menu.html)

但是，我在理解这个演示时遇到了一些麻烦。例如：

1.  在单击任何按钮之前隐藏菜单的原因是什么？
2.  是什么导致菜单在打开时关闭并且我单击页面上的其他位置？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:49:02.900

该演示使用 jquery.ui.menu.js 的修改版本以及弹出窗口小部件：http: [//view.jqueryui.com/menubar/ui/jquery.ui.popup.js](http://view.jqueryui.com/menubar/ui/jquery.ui.popup.js)

菜单本身，在 1.9 中发布，没有任何代码将其显示为弹出窗口。我建议编写一些自定义代码来构建弹出菜单，直到稳定版本提供适当的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T13:49:23.303

正如[Jörn Zaefferer](http://bassistance.de/)所说，您引用的[jQuery UI Popup - Popup Menu](http://view.jqueryui.com/menubar/demos/popup/popup-menu.html)使用[未发布的代码。](http://bugs.jqueryui.com/ticket/8235)（请注意，Jörn 是关闭[错误](http://bugs.jqueryui.com/ticket/8235)的同一个人）

但是在[jQuery UI Button 的 Split Button 示例](http://jqueryui.com/button/#splitbutton)中有一个几乎相同的解决方案，*它不*使用`.popup()`并且明确地执行所有隐藏等。

也许您可以将其用作起点。我知道我要去！;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:53:27.067

我相信这可能是您正在寻找的。当您调用时`.menu()`，函数中会触发很多事情`_create()`（如 Derek 所说），例如设置类名等。然后，在第 123-135 行`jquery.ui.menu.js`，会发生这种情况：

```
 this.refresh();

    // Clicks outside of a menu collapse any open menus
    this._on( this.document, {
        click: function( event ) {
            if ( !$( event.target ).closest( ".ui-menu" ).length ) {
                this.collapseAll( event );
            }

            // Reset the mouseHandled flag
            mouseHandled = false;
        }
    }); 
```

第二部分确保当用户单击`this.document`菜单 () 之外的页面 () 时所有菜单都被折叠`.ui-menu`：`this.collapseAll()`被调用，调用`this._close()`，然后调用`hide()`。这应该回答你的第二个问题。

至于您的第一个问题，该`refresh()`函数所做的第一件事是：

```
 // Initialize nested menus
    var menus,
        icon = this.options.icons.submenu,
        submenus = this.element.find( this.options.menus + ":not(.ui-menu)" )
            .addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
            .hide()
            .attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }); 
```

这会找到之前未初始化的所有子菜单（在这种情况下，所有子菜单，因为我们来自`_create()`）并初始化它们，包括隐藏它们。

# redirect - Jomsocial 注册新用户时不会进入第二步，它停留在第一个注册屏幕

> ID：13696083
> 
> 赞同：0
> 
> 时间：2012-12-04T04:26:16.873
> 
> 标签：redirect, registration, joomla2.5, jomsocial

希望你们都做得很好！

我刚刚安装了 jomsocial 版本：2.6.2，当我尝试注册新用户（jomsocial 索引，第一步）并单击下一步时，页面只是重新加载，没有任何反应（我停留在第一步，我没有被定向到第二步输入个人信息的步骤）。在 localhost 中一切正常，但在我的 Godaddy 的服务器中，我遇到了这个问题，有什么想法吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:47:21.160

确保这不是 SEF url 问题（url 在 localhost 和 godaddy 上看起来是否相同？），然后检查错误日志。

另请参阅我对[JomSocial - 注册重定向](https://stackoverflow.com/questions/14480381/jomsocial-registration-redirection)的回答，它也可能是您的解决方案。

# php - Magento 前端自定义属性值不保存数据

> ID：13696085
> 
> 赞同：1
> 
> 时间：2012-12-04T04:26:24.413
> 
> 标签：php, zend-framework, magento, zend-form

我使用 Hwg 属性管理器扩展（管理类别、客户和客户地址属性）向客户地址添加了一个自定义属性（以选择商业或住宅地址类型）。它在后端工作。但问题不适用于前端。所以我已将此代码添加到
app/design/frontend/base/default/template/customer/address/edit.phtml

```
<li class="fields">         
                <label for="billing:addresstype" class="required"><em>*</em><?php echo $this->__('Address Type') ?></label>
                <div class="input-box"> 
                    <select name="billingaddresstype" id="billingaddresstype">
                        <?php $collection = Mage::getResourceModel('eav/entity_attribute_option_collection');                           
                            $collection->setAttributeFilter(174);
                            $collection->setStoreFilter();
                            $collection->load();
                            $options = $collection->toOptionArray();
                            foreach ($options as $option) {
                                echo "<option value='".$option['value']."'>".$option['label']."</option>";             
                             }
                        ?>
                    </select><?php  //var_dump($options); ?>
                </div>
            </li> 
```

现在组合框出现在前端。但它不保存数据。然后我检查 AddressController 中的提交表单值

```
 $addressForm = Mage::getModel('customer/form');
        $addressForm->setFormCode('customer_address_edit')
            ->setEntity($address);
        $addressData    = $addressForm->extractData($this->getRequest());

        var_dump($addressData);

        break; 
```

它不包含我的自定义属性值。

```
array(11) { ["firstname"]=> string(8) "thushara" 
        ["lastname"]=> string(11) "Mannaperuma"
        ["company"]=> string(3) "flt"
        ["street"]=> array(2) 
            { [0]=> string(17) "1234 Heartwood Dr"   [1]=> string(0) "" } 
            ["city"]=> string(10) "Beltsville" 
            ["country_id"]=> string(2) "US" 
            ["region"]=> string(0) "" 
            ["region_id"]=> string(2) "31" 
            ["postcode"]=> string(5) "20705" 
            ["telephone"]=> string(12) "548-789-6548" 
            ["fax"]=> string(0) "" } 
```

我卡在这一点上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T15:13:03.047

我尝试了您的代码，但它破坏了编辑页面。

该扩展在 1.9 上适用于我，我正在使用自定义的 rwd 主题。
这就是它对我的工作方式。

我在我的主题文件夹中打开了这个文件：\magento\app\design\frontend\rwd\default\template\customer\address\edit.phtml

在您的情况下，代码将是这样的：

```
<li class="field">
     <label for="adtype" class="required">
        <em>*</em>Adtype
     </label>
     <div class="input-box">
         <input type="text" name="adtype" id="adtype" value="<?php echo $this->escapeHtml($this->getAddress()->getAdtype()) ?>" />
    </div>
</li> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T06:42:35.067

我解决了。

确保您拥有最新版本的 Hwg 属性管理器扩展。

您可以使用此链接[direct-download-magento-extension](http://www.tangkoko.com/direct-download-magento-extension/)将扩展名作为 zip 文件获取。

这是我用来将自定义属性获取到前端的代码。它正在正确保存数据。

```
<li class="fields">
                <?php 
                    $attribute = Mage::getModel('eav/config')->getAttribute('customer_address','adtype');
                ?>
                <label for="adtype" class="<?php if($attribute->getIsRequired() == true){?>required<?php } ?>"><?php if($attribute->getIsRequired() == true){?><em>*</em><?php } ?><?php echo $this->__('Address Type') ?></label>
                <div class="input-box">
                    <select name="adtype" id="adtype" class="<?php if($attribute->getIsRequired() == true){?>required-entry<?php } ?>">
                        <?php
                             $options = $attribute->getSource()->getAllOptions();                                
                             foreach($options as $option){
                        ?>
                            <option value='<?php echo $option['value']?>' <?php if($this->getCustomer()->getAdtype() == $option['value']){ echo 'selected="selected"';}?>><?php echo $this->__($option['label'])?></option>
                        <?php } ?>
                    </select>
                </div>
            </li> 
```

adtype 是我的属性代码。字段名称和 id 必须是属性代码。

# api - Intent=browse 在该区域的场地搜索中被忽略

> ID：13696088
> 
> 赞同：0
> 
> 时间：2012-12-04T04:27:01.873
> 
> 标签：api, foursquare

我正在尝试搜索该区域的提示（使用“ **sw** ”和“ **ne** ”参数）并跳过“ **ll** ”参数，因为根据[doc在“](https://developer.foursquare.com/docs/venues/search) **intent=browse** ”模式中不需要它。

得到错误：

```
c({"meta":{"code":400,"errorType":"param_error","errorDetail":"Must provide ll parameter."},"response":{}}); 
```

请求网址为： [https ://api.foursquare.com/v2/tips/search?intent=browse&sw=56.8284375%2C60.613698&ne=56.8301645%2C60.615842&client_id=XXX&client_secret=YYY&v=20120412&callback=c](https://api.foursquare.com/v2/tips/search?intent=browse&sw=56.8284375%2C60.613698&ne=56.8301645%2C60.615842&client_id=XXX&client_secret=YYY&v=20120412&callback=c)

PS。正确指定了 client_id 和 client_secret。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:04:22.353

哦，[tips 搜索](https://developer.foursquare.com/docs/tips/search)方法已**弃用**，不支持**sw**和**ne**参数。建议使用[搜索场地。](https://developer.foursquare.com/docs/venues/search)

# image - JPEG压缩实现问题

> ID：13696092
> 
> 赞同：2
> 
> 时间：2012-12-04T04:27:35.617
> 
> 标签：image, compression, jpeg

我正在尝试实现 JPEG 压缩（或尽可能接近它），但在实际实现中我需要明确一些要点。我将解释我目前所知道的以及我在哪里看到这些问题，如果有人能解决它们，那就太好了。

第一步是将图像分割成 8x8 块。但是我不确定执行此操作的最佳方法，例如，考虑到必须对色度进行向下采样然后应用 DCT，最好使用哪个维度数组来存储所有这些段。是 3D 数组（存储图像的 2D 元素的二维，然后是颜色通道的一个维），然后以 8 个为一组进行迭代，还是 4D 数组（每个 8x8 组有一个额外的维度）或其他方法完全。

然后我可能会看到色度下采样的问题，因为一旦减少了色度值的数量，数组的大小就必须改变大小，然后必须将它们放入不能真正占用所有的 DCT不同大小的阵列同时用于色度和发光。

DCT 的想法也是，它采用 8x8 组的所有三个颜色通道，然后将三个值转换为一个值，从而节省空间，还是一次采用一个颜色通道（如果是这样，我真的不明白转换为傅立叶空间如何使压缩更有效）？我还注意到，我为 DCT 获得的值远远超出了 0-255 的范围，而是更高。据我所知，每个 8x8 块的这些值将除以 IJG 标准量化矩阵，然后是不同的熵编码。

我意识到这个问题涵盖了很多领域并且非常混乱，但如果需要，我可以提供任何其他信息，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:22:17.390

Peter Symes 的“ [Digital Video Compression](https://rads.stackoverflow.com/amzn/click/com/0071424873) ”有一章是关于 JPEG 的，一般来说是对压缩的一个很好的介绍。

JPEG的[参考实现](http://www.ijg.org/)可能是一个好的开始。

# python - 获取 Django 模型中属于黄色框的所有项目

> ID：13696093
> 
> 赞同：0
> 
> 时间：2012-12-04T04:27:44.913
> 
> 标签：python, django, filter, django-queryset, m2m

所以我有我正在尝试做的和失败的简化版本。我有这个具有颜色字段的 Boxes 对象，并且可以通过 m2m 字段包含许多项目，所以我想要一个特定颜色框中所有项目的列表（一个查询集）。所以我为管理员制作了这个 django 过滤器。

```
from django.contrib.admin import SimpleListFilter
from store.models import Box

class Items(Model):
    name = CharField(max_length=200)

class Box(Model):
    items = ManyToManyField(Items)
    color_choices = (
        ('yellow','yellow'),
        ('green','green'),
    )
    box_color = CharField(max_length=200,choices=color_choices)

# So in my Items admin list i want to filter the items by color, this is my 'failed' attemp.

class Items_by_payment_system_filter(SimpleListFilter):
    title = _('Colors')

    # Parameter for the filter that will be used in the URL query.
    parameter_name = 'color'

    def lookups(self, request, model_admin):
        """
        Returns a list of tuples. The first element in each
        tuple is the coded value for the option that will
        appear in the URL query. The second element is the
        human-readable name for the option that will appear
        in the right sidebar.
        """
        return Box.color_choices
    def queryset(self, request, queryset):
        # Remember that self.value contains the current selection in the filter options displayed to the user in Admin
        if self.values():
            boxes = Box.objects.filter(items__in=queryset) # get only boxes with the current set of items
            boxes_ids = boxes.filter(box_color=self.values()).values_list('items__id',flat=True)
            return queryset.filter(id__in=boxes_ids) 
```

我不确定出了什么问题，因为管理员向我展示了属于与我选择的颜色不同的盒子的物品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:38:26.237

这是你的问题 ：

*   更改`self.values`为`self.value`_`if self.values():`
*   更改`color`为`box_color`_`boxes_ids = boxes.filter(color=self.values()) ...`

代码示例（在 django 1.4.2 上测试和工作）

```
from box.models import Items,Box
from django.contrib import admin
from django.utils.translation import ugettext_lazy as _
from django.contrib.admin import SimpleListFilter

class Items_by_payment_system_filter(SimpleListFilter):
    title = _('Colors')

    # Parameter for the filter that will be used in the URL query.
    parameter_name = 'color'

    def lookups(self, request, model_admin):
        """
        Returns a list of tuples. The first element in each
        tuple is the coded value for the option that will
        appear in the URL query. The second element is the
        human-readable name for the option that will appear
        in the right sidebar.
        """
        return Box.color_choices
    def queryset(self, request, queryset):
        # Remember that self.value contains the current selection in the filter options displayed to the user in Admin

        if self.value():
            boxes = Box.objects.filter(items__in=queryset) # get only boxes with the current set of items
            boxes_ids = boxes.filter(box_color=self.value()).values_list('items__id',flat=True)
            return queryset.filter(id__in=boxes_ids)

class ItemsAdmin(admin.ModelAdmin):
    fields = ['name']
    list_filter = (Items_by_payment_system_filter,)

admin.site.register(Items,ItemsAdmin)
admin.site.register(Box) 
```

# c# - 枚举 VS 静态类（普通和带字符串值）

> ID：13696098
> 
> 赞同：11
> 
> 时间：2012-12-04T04:28:07.880
> 
> 标签：c#, java, android, windows-phone-7

我一直在为 windows mobile 和 android 开发一段时间。我对这两个概念感到困惑。

假设我想根据某些用户设备的屏幕尺寸做出决定。所以我会期待如此预定义的值。我可以使用 switch 语句来处理我的逻辑。但我不确定是否应该为此目的使用静态类的枚举。哪个是更好的方法。我可以用这两种不同的方式来做我的逻辑。哪一个是正确的方法？我很困惑。**我也可以使用字符串值吗？**因为目前我坚持使用课程，所以我需要更新以使用所有枚举。那么如何将我的类更改为字符串枚举呢？反正。谢谢。

**使用枚举**

```
//My predefined values
public enum ScreenSizeEnum
{
    Small, Medium, Large, XLarge,
}
//Handling Logic
private void SetScreenSize(ScreenSizeEnum Screen)
{
    switch (Screen)
    {
        case ScreenSizeEnum.Large:
            //Do Logic
            break;
        case ScreenSizeEnum.Small:
            //Do Logic
            break;
    }
} 
```

**使用类**

```
//My predefined values
public class ScreenSizeClass
{
    public const int Small = 0;
    public const int Medium = 1;
    public const int Large = 2;
    public const int XLarge = 3;
}
//Handling Logic
private void SetScreenSize(int Screen)
{
    switch (Screen)
    {
        case ScreenSizeClass.Large:
            //Do Logic
            break;
        case ScreenSizeClass.Small:
            //Do Logic
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T04:30:41.327

这正是枚举的用途。并不是说您不能将静态类与常量一起使用，而是枚举要干净得多……

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T04:33:12.153

从[枚举类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/cc138362%28v=vs.90%29.aspx)：

> 枚举类型（也称为枚举或枚举）提供了一种有效的方法来定义一组可以分配给变量的命名整数常量。
> 
> 以下是使用枚举而不是数字类型的优点：
> 
> 1.  您清楚地为客户端代码指定哪些值对变量有效。
>     
>     
> 2.  在 Visual Studio 中，IntelliSense 列出了定义的值。

因此，如果您通过`enum`，它是强类型的，因此您可以自动控制可以传递给方法的内容。

```
ScreenSizeEnum size = ScreenSizeEnum.Medium;
SetScreenSize(size); 
```

使用`const`or`static`字段时，您定义需要检查传递的`int`值是否取自预期的音调。

```
int somevalue = ...;//anything
SetScreenSize(somevalue); //compiles

private void SetScreenSize(int Screen)
{
    switch (Screen)
    {
        case ScreenSizeClass.Large:
            //Do Logic
            break;
        case ScreenSizeClass.Small:
            //Do Logic
            break;
        default: 
            // something else, what to do??
            break;
    }
} 
```

* * *

*根据评论：*

如果有必要检查 some`int`是否定义在 中`enum`，可以这样做：

```
int somevallue = 0;
if(Enum.IsDefined(typeof(ScreenSizeEnum), somevallue))
{
    //it's ok
} 
```

或扩展方法：

```
public static T GetEnumValue<T>(this string value) where T : struct
{
    Type t = typeof(T);
    if (!t.IsEnum)
        throw new Exception("T must be an enum");
    else
    {
        T result;
        if (Enum.TryParse<T>(value, out result))
            return result;
        else
            return default(T);
    }
} 
```

可以使用哪个

```
int somevalue = 1;
ScreenSizeEnum size = somevalue.GetEnumValue<ScreenSizeEnum>(); 
```

* * *

至于`string`（基于OP的编辑问题）：

从[枚举（C# 参考）](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.90%29.aspx)：

> 已批准的枚举类型为 byte、sbyte、short、ushort、int、uint、long 或 ulong。

所以你不能有一个字符串枚举。但是您可以使用枚举中`ToString`的名称，因为方法返回名称，而不是枚举的值。

```
ScreenSizeEnum.Small.ToString(); //Small 
```

所以你可以对字符串有另一种扩展方法：

```
public static T GetEnumValue<T>(this string value) where T : struct
{
    Type t = typeof(T);
    if (!t.IsEnum)
        throw new Exception("T must be an enum");
    else
    {
        if (Enum.IsDefined(t, value))
            return (T)Enum.Parse(t, value);
        else
            return default(T);
    }
} 
```

以便

```
int i = (int)ScreenSizeEnum.Small;
string str = ScreenSizeEnum.Small.ToString();
ScreenSizeEnum isize = i.GetEnumValue<ScreenSizeEnum>();//ScreenSizeEnum.Small
ScreenSizeEnum strsize = str.GetEnumValue<ScreenSizeEnum>();//ScreenSizeEnum.Small 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T04:47:09.847

当您希望变量或参数具有来自一组固定的可能常量的值时，基本上使用枚举。您可以将枚举替换为具有一组静态 final int 常量的类。但是使用枚举比后者更灵活、更易读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-18T08:35:45.290

如果您只想将更多内容用作枚举器，则类可能非常方便。如果你想实现几个 Get... 函数，可以返回你需要的其他东西。

我的例子是我有一个类型的类，但我需要一个相关的其他类型。

# javascript - Greasemonkey 脚本使固定定位元素成为静态

> ID：13696100
> 
> 赞同：3
> 
> 时间：2012-12-04T04:28:12.077
> 
> 标签：javascript, css, firefox, greasemonkey

我发现网页上的元素经常被固定在我的方式中。我想找到一种方法来禁用`position: fixed`我访问的任何网站中的 CSS 规则。

我编写了一个用户脚本（Firefox，Greasemonkey），它扫描文档中的每个节点并确定它是否有一个固定的计算样式位置，然后将其覆盖为静态。

有没有更好的方法来实现我的目标？

这是我写的脚本，我现在把它缩小到 div：

```
Array.forEach(
    document.querySelectorAll("div")
    ,function(el) {
        if (window.getComputedStyle(el).position === 'fixed') {
            el.style.position = 'static';
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T05:02:41.553

如果您的 Greasemonkey 脚本有效，它可能是消除固定位置样式的最经济有效的方法。

一些需要更多努力但每页使用更少 CPU/内存的替代方案：

1.  编写[***一个附加组件***](https://addons.mozilla.org/en-US/developers/builder)：

    1.  在加载 CSS 样式规则时删除它们。（由于跨域问题，Greasemonkey 不能总是这样做。）
    2.  使用[Mutation Observers](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver?redirectlocale=en-US&redirectslug=DOM/DOM_Mutation_Observers)拦截 javascript 尝试设置`position: fixed`.
2.  Fork 并编译您自己的忽略`position: fixed`. 您可能希望它由“黑名单”和“白名单”控制。

# php - 使用jquery和ajax检索一组图片路径

> ID：13696103
> 
> 赞同：1
> 
> 时间：2012-12-04T04:28:25.450
> 
> 标签：php, jquery, ajax

我正在实施一个在线图书应用程序。它基于html。

一般来说，这本书是双页的。但是，第一页只显示单页，它是第 1 页。我每次需要加载六页。例如，如果用户阅读 4th 5th page ，我需要得到的是 2th 3th 4th 5th 6th 7th pages 。

> 所以我的想法是提供文件夹名称和一个页码（i，例如 i = 5th）并返回 i-3,i-2,i-1,i, i+1, i+2 图像路径。

这是我找到的一些示例代码：

```
public function getImage(){
        $params = $this->getRequest()->getParams();
        //d($params);
        if ($_SERVER['REQUEST_METHOD'] == 'POST')
        {
                $src = $params['image_path'];

                exit;
        }        
    } 
```

它是有益的？以及如何将其转换为接受文件夹名称/页码？谢谢

# c# - 异步等待与任务 .WP8 上的结果

> ID：13696105
> 
> 赞同：2
> 
> 时间：2012-12-04T04:29:02.137
> 
> 标签：c#, httpwebrequest, async-await, windows-phone-8

```
 var factory1 = new TaskFactory();
 var task1 =  factory1.FromAsync<WebResponse>(request.BeginGetResponse, request.EndGetResponse, null).Result; 
```

上面的代码在 windows 8 和 windows store 上运行，但是当我尝试在 windows phone 8 中运行它时，它不起作用。它只是冻结并且没有任何响应，看起来运行任务需要很长时间。

我的目的是同步调用 web 服务，而不使用 asycn 和 await 方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:16:55.967

> 我的目的是同步调用 web 服务，而不使用 asycn 和 await 方法。

你不应该那样做。WP8/Win8 应该是异步的。`async`并使`await`异步编程变得容易。

我有[一篇博客文章](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)详细解释了`Result`死锁情况（虽然我有点惊讶它在这种情况下发生）。简而言之，该`async`方法试图在 UI 线程上恢复，但 UI 线程被阻塞，等待该`async`方法完成。

为什么要同步？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T07:26:55.087

这是应该发生的。当您请求 Result 时，应用程序将停止并等待，直到您真正*得到*结果。这意味着您同步等待。

如果你想异步等待，你必须使用**await**关键字，因为它的语义是：**当你得到结果，然后继续执行；同时，继续进行UI工作**。

这就是等待（隐含同步）和异步等待（又名等待）之间的区别。

# jquery - Rails - 形式上的 jQuery 部分适用于编辑，但不适用于新的

> ID：13696109
> 
> 赞同：1
> 
> 时间：2012-12-04T04:29:10.807
> 
> 标签：jquery, ruby-on-rails

我有一个部分，它使用新控制器操作和编辑控制器操作之间的相同代码呈现，其中包含关联模型和嵌套资源的表单。

作为解决此部分中包含的 jQuery 为什么在编辑表单而不是新表单上工作的故障排除步骤，我删除了所有现有的 jQuery 并将其替换为：

`$("input").click(function() { alert("test!"); });`

这在加载编辑表单时按预期工作，所有输入字段/按钮/下拉菜单在单击时都会显示警报框。但是，当新表单加载时，这并不适用。

关于如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:48:23.977

听起来您可能在新表单上有一个 javascript 错误，该错误正在破坏 javascript 并阻止它进一步执行。您可以使用浏览器检查器查看页面上是否有任何 javascript 错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:18:41.060

这都是由我用来帮助显示某些内容的插件问题引起的；我将 div id 的字符串作为参数传递给它，而不是将其方法直接应用于 DOM 中的 div，而是将其复制到页面下方，这意味着正在重新创建 id，此外，意味着页面加载时执行的 jQuery 不适用于新对象。

# google-drive-api - 检索某些文件的修订时出现内部服务器错误

> ID：13696110
> 
> 赞同：1
> 
> 时间：2012-12-04T04:29:12.257
> 
> 标签：google-drive-api

现在，这总是发生在只读（即用户只有查看权限）谷歌电子表格中。我不确定预期的响应是什么，但状态应该至少是 4XX 错误而不是 5XX。因为对于服务器错误，它可能只是一个临时错误，应该稍后重试，但在这种情况下，状态始终为 500。

对于只读文档，检索修订工作正常。

# php - 无法回显在函数中获取的变量

> ID：13696116
> 
> 赞同：1
> 
> 时间：2012-12-04T04:30:59.523
> 
> 标签：php, mysql, function

我有两个文件名 func.inc.php 和 profile.php 我试图通过在 func.inc.php 中创建一个函数 get_data($id) 并在配置文件页面中显示来从 mysql 获取数据（profile.php ）。但是数据没有显示。

<-- func.inc.php 文件-->

```
<?php session_start();
function  get_data($id){
$query_in="SELECT * FROM user WHERE id ='$id'";
$query=mysql_query($query_in);
while($row=mysql_fetch_assoc($query)){
    $name=$row['name'];
    $book=$row['book'];
    $mobile=$row['mobile'];
    $computer=$row['computer'];
}

} 
?> 
```

<-- 配置文件.php -->

```
<? 
include'func.inc.php';
echo "Name: ".$name;
echo "Book: ".$book;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:41:30.893

函数应该返回一些值，然后只会得到函数中的值

```
 function  get_data($id){
    $query_in= sprintf("SELECT * FROM user WHERE id ='%d'", mysql_real_escape_string($id));
    $query=mysql_query($query_in);
    $result = array();
    while($row=mysql_fetch_assoc($query)){
        $result[]['name'] = $row['name'];
    }
    return $result;
    } 
```

<-- 配置文件.php -->

```
$values = get_data($id);

print_R($values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:09:00.143

您应该从函数调用中传递 id，即：在这里您应该像这样调用：

```
$values = get_data($id);

 while($row=mysql_fetch_array($values)){
 echo $name=$row['name']."<br>";
 echo $book=$row['book']."<br>";
 echo $mobile=$row['mobile']."<br>";
 echo $computer=$row['computer']."<br>";
} 
```

在 func.inc.php 中使用以下代码：

```
function  get_data($id){
  $query_in="SELECT * FROM user WHERE id ='$id'";
  $query=mysql_query($query_in);
  return $query;
} 
```

# c - 我如何一次发送这个字符串一个字符？

> ID：13696123
> 
> 赞同：0
> 
> 时间：2012-12-04T04:31:40.490
> 
> 标签：c

这是我拥有的代码。我现在无法测试它，所以我只是想知道是否有人可以验证这将采用完整的`str`字符串并将每个字符单独发送到`TXREG`

```
char str [10];
int n;
n = sprintf(str, "%u%% %u\n", Duty_Cycle, DAC_Output);
transmit_uart(str);                    // Send the value 
```

这是`transmit_uart()`方法。

```
void transmit_uart(const char *value) {
    for(int i = 0; value[i] != '\0'; i++) {
        while(TXIF == 0) {}
        TXREG = value[i];
    }
} 
```

所以这应该发送类似

`50% 128`

每次我`transmit_uart()`用我在那里的方式格式化的字符串调用。

**更新：我昨天能够测试它，这确实有效！感谢所有的帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:40:04.317

虽然我没有亲自将它加载到 MCU 上并对其进行测试，但是，是的，只要`TXIF`它看起来像它，它看起来就很好。

你真的应该使用`snprintf`或更大的缓冲区。这是整数溢出（如简单地具有太大的值或任何负值）将级联成缓冲区溢出的一种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:40:27.750

如果要发送 5-9 个字符的字符串：

```
1 or 2 or 3 symbols - Duty_Cycle value,
1 symbol - % symbol,
1 symbol - space,
1 or 2 or 3 symbols - DAC_Output value,
1 symbol - \n symbol, 
```

你做得对。

# image - 如何在 wp7 中更改运行时列表框图像路径

> ID：13696128
> 
> 赞同：0
> 
> 时间：2012-12-04T04:32:02.933
> 
> 标签：image, windows-phone-7, listbox

我有一个列表框，这个列表框包含图像控件。

我想在列表框项的单击事件上更改运行时图像路径。

如何更改我的图像控制路径？

我的代码是这样的：

```
 <ListBox x:Name="TransactionList" Width="450" Height="450" Margin="0,0,0,0">    
    <ListBox.ItemTemplate >
      <DataTemplate>

            <StackPanel Orientation="Horizontal" Width="450" Height="auto" Margin="0,0,10,0" >
                <StackPanel Orientation="Horizontal"  Width="300" Height="auto" Margin="0,0,1,10">
                    <TextBlock Height="35" Width="250"  Margin="10,0,0,90" Text="{Binding SONGNAME}" FontSize="22" Foreground="Red" Name="tbSubCategories" />
                    <TextBlock Height="25" Margin="-250,10,180,30" Text="SingBy:" FontSize="18" Foreground="Gray" Name="tbsingby" />
                    <TextBlock Height="auto" TextWrapping="Wrap" Width="210" Margin="-180,50,0,70" Text="{Binding  SINGBY}" FontSize="18" Foreground="Gray" Name="tbSingBy" />
                     <TextBlock Height="25"  Margin="-280,60,200,0" Text="MusicBy:" FontSize="18" Foreground="Gray" Name="tbMusicby" />
                     <TextBlock Height="auto" TextWrapping="Wrap" Width="200" Margin="-205,100,0,30" Text="{Binding MUSICBY}" FontSize="18" Foreground="Gray" Name="tbMusicBy" />
                </StackPanel>
            <StackPanel Orientation="Vertical"  Height="auto" Width="auto" Margin="0,50,0,35">
              <Image Name="imgsubcatagorie" Width="40" Height="40"  VerticalAlignment="Center" FlowDirection="LeftToRight" Source="/VodafoneAugmentedReality;component/Images/play1.png" />
            </StackPanel>
       </StackPanel>
     </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

当我单击列表框项时，我想更改 imgsubcatagories 图像控制路径。帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:19:58.577

好吧，这并不容易。

如果*可以*获取您的图像对象，则可以像这样轻松完成：

```
imgsubcatagorie.Source = ModifyImageSource(new Uri("yourUri", UriKind.RelativeOrAbsolute));

 private ImageSource ModifyImageSource(Uri uri)
        {
                image = new BitmapImage(uri);
                return image;          
        } 
```

* * *

但是，您不能只拿走这个对象。主要问题是如何获得它。

您应该以某种方式从 TransactionList 中提取它。（另外，你的结构很重：listbox=>stackpanel=>stackpanel=>image）

我的第一个想法是：使用循环遍历 TransactionList 中的所有项目并尝试在那里找到图像。

* * *

**可能的解决方案**

我对 ListBox.ItemTemplate 功能并不熟悉，而且我没有你的完整代码，但无论如何......

直接方法：尝试使用循环查找项目。

```
foreach (var x in TransactionList.Items)
            {
                if (x is Image)
                {
                    image = (Image)x;
                    break;
                }
            } 
```

然后在事件处理程序中使用此图像对象。

还

[查找具体类型的元素。](http://www.windowsphonegeek.com/tips/how-to-access-a-control-placed-inside-listbox-itemtemplate-in-wp7)

还要检查这个问题：

[在 Listbox.ItemTemplate 中查找控件](https://stackoverflow.com/questions/1800101/find-control-inside-listbox-itemtemplate-wpf-c)

不适用于 wp7，但可能有效。

# java - 在 Java Swing 应用程序中打开子类别

> ID：13696132
> 
> 赞同：0
> 
> 时间：2012-12-04T04:32:57.820
> 
> 标签：java, swing, awt

我有一个窗口，分为左窗格/框架和右窗格/框架。

左窗格占据屏幕的 30%，并且有类别，以垂直方式排列。

我想要的是当我单击一个类别时，右窗格应该显示基于它的内容（这很简单）并且（这是我卡住并需要帮助的地方）希望子类别显示在类别下方，这正在被点击，将其他类别推到子类别下方！

关于如何在我的应用程序中实现这一点的任何指示。

我正在为我的应用程序使用 swing/awt ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:59:05.727

正如我如何理解你的问题，你想创建一个类别树。您可能想查看此文档：

[J树](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)

# sql - clojure，用于插入数据库项目的协议

> ID：13696134
> 
> 赞同：2
> 
> 时间：2012-12-04T04:33:08.013
> 
> 标签：sql, clojure

仍在学习 clojure 并做一个实验，试图让我的头围绕 clojure 和协议。我的主要问题是我的代码是提取低级数据库交互的正确方法，以便提供一种更简洁的方式将特定数据类型添加到我的数据库中？

```
(defn- db-insert
 [table record]
 "Inserts record based on table/record map"
 (sql/with-connection
  rosay-db
   (sql/transaction
    (sql/insert-record table record))))

;; public interface
(defprotocol DBFactory
  (add-item [_] "Adds item to db"))

(defrecord Page [name description keywords frontpage client_id pages_type_id]
  DBFactory
  (add-item [_]
   (db-insert :pages {:name name
                              :description description
                              :keywords keywords
                              :frontpage frontpage
                              :client_id client_id
                              :pages_type_id pages_type_id})))

(defrecord Client [username password email domain]
 DBFactory
  (add-item [_]
   (db-insert :clients {:username username
                        :password password
                        :email email
                        :domain domain}))) 
```

然后在我的 nrepl 中，我可以执行以下操作：

```
 rosay.server=> (use 'rosay.models)
 nil
 rosay.server=> (add-item (->Client "booyaka" "fark" "mailzer" "domain.com"))
 {:updated_on nil, :created_on #inst "2012-12-04T04:25:22.672462000-00:00", :email "mailzer",        :domain "domain.com", :password "fark", :username "booyaka", :id 10} 
```

我想我只是好奇我解决这个问题的方法是否正确甚至有意义。到目前为止，我可以通过简单地使用我的记录类型调用我的协议来完成客户端和页面，并且一切似乎都有效。也许我想太多了，只写几个函数就可以了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:22:59.147

IMO 仅在数据库交互中隐藏两种远程类型 Client 和 Page 之间的差异并不是很有用。如果没有其他多态操作（例如，对象创建、对象处理等），它不会减少/抽象代码。无论如何，这些类型太不同了，无法`item`在所有应用程序中“相同”。更清楚的是，只需为这些类型创建单独的操作（例如，添加页面、添加客户端）。如果您真的需要这个，您可以将您的解决方案与提供调度机制但不强迫您使用 OOP 的多方法的解决方案进行比较。

# kettle - 在 PentaHo 水壶中添加代码片段用户定义的 java 类

> ID：13696136
> 
> 赞同：3
> 
> 时间：2012-12-04T04:33:13.140
> 
> 标签：kettle

我使用 java 编写了一些自定义代码。我想将代码添加到代码片段部分的 Kettle 中的用户定义的 java 类中。有没有办法在 UDJC 的类和代码片段中添加自定义代码片段，以便它可以重用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T14:08:33.390

目前无法在运行时使用 ui 添加代码片段。如果你想要这个功能，你可以提交有关[pentaho jira的问题。](http://jira.pentaho.com/)或者就像解决方法一样，您可以编辑 codeSnippits.xml（位于 lib/kettle-ui-*.jar/org/pentaho/di/ui/trans/steps/userdefinedjavaclass/ 下）并将此文件重新压缩回 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T14:40:26.660

我不建议走这条路。原因很简单，PDI 中的 UDJC 是[Janino](http://docs.codehaus.org/display/JANINO/Home)，一个相当缩小（但速度超快）的 Java 编译器，我引用[Pentaho wiki](http://wiki.pentaho.com/display/EAI/User+Defined+Java+Class)的用户定义 Java 类：

> 不是 100% Java...首先要知道的是 Janino，因此这一步不需要完整的 Java 类...最明显的限制是没有泛型

如果我们能够即时添加代码片段会发生什么？恐怕不是好事。

但是，这非常有用，请考虑`JAR`按照注释中的建议将代码包装在一个包中，将其包含在`lib-ext`PDI 环境的文件夹中，然后随意将其导入用户定义的 Java 类。恕我直言，这是正确的方法。

我希望这能有所帮助。

# rpc - 在 ubuntu 上编译 rpcgen 程序

> ID：13696137
> 
> 赞同：2
> 
> 时间：2012-12-04T04:33:22.563
> 
> 标签：rpc, ubuntu-12.04

我是 rpcgen 编程的新手。在 ubuntu 上编译以下示例 rpcgen 示例时出现错误。主要功能是计算给定数字的平方

正方形.X

```
struct square_in {
 long arg1;
 };

struct square_out {
long    res1;
};

program SQUARE_PROG {
version SQUARE_VERS {
square_out  SQUAREPROC(square_in) = 1;
                    /* procedure number = 1 */
} = 1;              /* version number = 1 */
} = 0x31230000;         /* program number = 0x31230000 */ 
```

客户端.c

```
 #include  <rpc/rpc.h>
  #include  "square.h"

int
main(int argc, char **argv)
  {
CLIENT      *cl;
square_in   in;
square_out  *outp;

if (argc != 3)
    //err_quit("usage: client <hostname> <integer-value>");
    exit(0);

cl = clnt_create(argv[1], SQUARE_PROG, SQUARE_VERS, "tcp");

in.arg1 = atol(argv[2]);
if ( (outp = squareproc_1(&in, cl)) == NULL)
    //err_quit("%s", clnt_sperror(cl, argv[1]));
   exit(0);

printf("result: %ld\n", outp->res1);
exit(0);
 } 
```

服务器.c

```
#include    <rpc/rpc.h>
#include    "square.h"
#include <stdio.h>

     square_out *
    squareproc_1_svc(square_in *inp, struct svc_req *rqstp)
     {
static square_out   out;

printf("thread %d started, arg = %ld\n",
       pr_thread_id(NULL), inp->arg1);
sleep(5);
out.res1 = inp->arg1 * inp->arg1;
printf("thread %d done\n", pr_thread_id(NULL));

return(&out);
       } 
```

生成文件：

```
PROGS = client server
CFLAGS += -DDEBUG

all:    ${PROGS}

square.h square_clnt.c square_svc.c square_xdr.c:   square.x
            rpcgen -C square.x

square_clnt.o: square_clnt.c square.h

square_svc.o: square_svc.c square.h

client: square.h client.o square_clnt.o square_xdr.o
            ${CC} ${CFLAGS} -o $@ client.o square_clnt.o square_xdr.o \
                ${LIBS} ${LIBS_RPC}

server: square.h server.o square_svc.o square_xdr.o
            ${CC} ${CFLAGS} -o $@ server.o square_svc.o square_xdr.o \
                ${LIBS} ${LIBS_RPC}

clean:
        rm -f ${PROGS} ${CLEANFILES} *_clnt.c *_svc.c *_xdr.c square.h 
```

在执行时，我收到以下错误：

```
cc -DDEBUG   -c -o client.o client.c
cc -DDEBUG -o client client.o square_clnt.o square_xdr.o \

cc -DDEBUG   -c -o server.o server.c
cc -DDEBUG -o server server.o square_svc.o square_xdr.o \

server.o: In function `squareproc_1_svc':
server.c:(.text+0x14): undefined reference to `pr_thread_id'
server.c:(.text+0x52): undefined reference to `pr_thread_id'
collect2: error: ld returned 1 exit status
make: *** [server] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-04T18:46:24.727

像这样使用服务器文件

```
// SERVER FILE: server.c

#include"rpc/rpc.h"
#include"square.h"
#include"stdio.h"
#include"stdlib.h"
#include"math.h"

square_out *squareproc_1_svc(square_in *inp,struct svc_req *rqstp)
{

    static square_out out;
    out.res1 = inp->arg1 * inp->arg1;
    return(&out);
} 
```

并使用运行程序

```
[root@localhost ~]# rpcgen -C square.x
[root@localhost ~]# cc -c client.c -o client.o
[root@localhost ~]# cc -c square_clnt.c -o square_clnt.o
[root@localhost ~]# cc -c square_xdr.c -o square_xdr.o
[root@localhost ~]# cc -o client client.o square_clnt.o square_xdr.o
[root@localhost ~]# cc -c client.c server.c square_xdr.c
[root@localhost ~]# cc -c server.c -o server.o
[root@localhost ~]# cc -c square_svc.c -o square_svc.o
[root@localhost ~]# cc -o server server.o square_svc.o square_xdr.o
[root@localhost ~]# ./server &

[1] 3334

[root@localhost ~]# ./client localhost 4

result is : 16 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T17:43:24.520

我认为你不需要使用`pr_thread_id`. 尝试不使用它进行编译。

# matlab - Canny边缘检测器上可能的NaN梯度方向 - matlab上的图像处理

> ID：13696139
> 
> 赞同：4
> 
> 时间：2012-12-04T04:33:30.707
> 
> 标签：matlab, image-processing

我正在编写我自己的[Canny 边缘检测算法](http://en.wikipedia.org/wiki/Canny_edge_detector#Development_of_the_Canny_algorithm)版本。我的问题是，如何计算梯度的方向？我已经知道了：

![在此处输入图像描述](../Images/9daa5e24a12d3cd22325675a3024ba28.png)

**但是当G** [y] = **G** [x] = 0时我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:22:40.670

我认为你给 theta 的值实际上并不重要，因为 Gx 和 Gy 等于 0 意味着没有梯度，这意味着没有边缘。该像素没有边缘，因此它也没有边缘方向的角度。检测何时 Gy=gx=0 并在 theta 中写入您想要的任何内容。

哦！但不要忘记 arctan(Inf)=pi/2！如果只有 Gx 的值为零，请记住您有结果！

编辑：在图像中，所有黑色区域都没有渐变，因此没有角度。

![在此处输入图像描述](../Images/f140d3cbbd882582687220bed2aa77a5.png)

# c - LFTP format_perms(int p)

> ID：13696141
> 
> 赞同：-1
> 
> 时间：2012-12-04T04:34:02.750
> 
> 标签：c

来自 lftp 中的 misc.cc。你能解释一下代码吗？我尝试 p = 600, 777 并获得不同的预期许可。

```
// it does not prepend file type.
    const char *format_perms(int p)
    {
       static char s[10];
       memset(s,'-',9); // set - for all s[]
       if(p&0400) s[0]='r'; // set r
         if(p&0200) s[1]='w';  // set w
         if(p&0100) s[2]='x'; // set x
         if(p&0040) s[3]='r';  //set r
         if(p&0020) s[4]='w';  
         if(p&0010) s[5]='x';
         if(p&0004) s[6]='r';
         if(p&0002) s[7]='w';
         if(p&0001) s[8]='x';
         if(p&01000) s[8]=(p&0001?'t':'T');
         if(p&02000) s[5]=(p&0010?'s':'S');
         if(p&04000) s[2]=(p&0100?'s':'S');
         return s;
    } 
```

T和S的目的是什么？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:42:15.707

假设您的意思是 format_perms 中的“s”和“T”。根据[chmod 手册页](http://netbsd.gw.com/cgi-bin/man-cgi?chmod++NetBSD-current)：

> 4000 执行时设置用户 ID
> 
> 2000 set-group-ID-on-execution
> 
> 1000 粘性位，参见[chmod(2)](http://netbsd.gw.com/cgi-bin/man-cgi?chmod+2+NetBSD-current)

强调，我的。

# objective-c - 图像选择器后没有出现 Segue

> ID：13696145
> 
> 赞同：1
> 
> 时间：2012-12-04T04:34:21.267
> 
> 标签：objective-c, ios, ios5, uistoryboard, uistoryboardsegue

我正在编写一个 iOS 应用程序，其中视图中有一个按钮。单击该按钮会获得一个操作表，其中包含从相机或图库中选择图像的选项。选择图像后，应通过手动调用 segue 将其传递到另一个视图。出现图像选择器并执行准备转场代码，但转场没有出现。没有错误，我检查了所有标识符等。这是代码：

```
-(IBAction)showButtonClicked:(id)sender {
    UIActionSheet *photoActionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Take Photo", @"Choose from Library", nil];
    photoActionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [photoActionSheet showInView:self.tabBarController.tabBar];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

     switch (buttonIndex) {
     case 0:
            {
            [self dismissModalViewControllerAnimated:YES];
            UIImagePickerController *picker = [[UIImagePickerController alloc] init];
             picker.delegate = self;
             picker.sourceType = UIImagePickerControllerSourceTypeCamera;
             [self presentModalViewController:picker animated:YES];
             break;
            }
         case 1:
            {
            [self dismissModalViewControllerAnimated:YES];
             UIImagePickerController *picker = [[UIImagePickerController alloc] init];
             picker.delegate = self;
             picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
             [self presentModalViewController:picker animated:YES];
             break;
            }
     default:
             break;

     }

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"goToPhotoDetails"]){
        FostoPhotoDetailsViewController *photoDetails = (FostoPhotoDetailsViewController *)segue.destinationViewController;
        photoDetails.imageView.image = self.buttonImage1;
    }
}

- (void) imagePickerController:(UIImagePickerController *)picker
         didFinishPickingImage:(UIImage *)image
                   editingInfo:(NSDictionary *)editingInfo
{

    self.buttonImage1 = image;
    //FostoPhotoDetailsViewController *photoDetails = [[FostoPhotoDetailsViewController alloc] init];
    //photoDetails.imageView.image = image;
    [self dismissModalViewControllerAnimated:NO];
    NSLog(@"Test");
    [self performSegueWithIdentifier:@"goToPhotoDetails" sender:self];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:22:37.333

听起来您正在执行带有风格的 segue`push`而不是在`UINavigationController`.

当您`performSegueWithIdentifier:sender:`首先正确调用`prepareForSegue:sender:`它时，它会尝试检索当前导航控制器并推动目标控制器执行类似的操作

```
[self.navigationController pushViewController:destinationController animated:YES]; 
```

但是由于您不在 a 内部，`UINavigationController`因此该属性`navigationController`设置为`nil`，导致上述调用静默失败。

要么将 segue 的显示样式更改为`push`（例如`modal`）以外的其他内容，要么将控制器嵌入到`UINavigationController`.

# javascript - Node.js 创建文件夹或使用现有的

> ID：13696148
> 
> 赞同：212
> 
> 时间：2012-12-04T04:34:24.170
> 
> 标签：javascript, node.js

我已经阅读过 Node.js 的文档，除非我遗漏了什么，否则它不会说明某些操作中的参数包含什么，特别是[`fs.mkdir()`](http://nodejs.org/api/fs.html#fs_fs_mkdir_path_mode_callback). 正如您在文档中看到的那样，它不是很多。

目前，我有这段代码，它试图创建一个文件夹或使用现有的文件夹：

```
fs.mkdir(path,function(e){
    if(!e || (e && e.code === 'EEXIST')){
        //do something with contents
    } else {
        //debug
        console.log(e);
    }
}); 
```

但我想知道这是正确的方法吗？检查代码`EEXIST`是知道文件夹已经存在的正确方法吗？我知道我可以`fs.stat()`在创建目录之前做，但这已经是对文件系统的两次点击。

其次，是否有完整的或至少更详细的 Node.js 文档，其中包含有关错误对象包含的内容、参数表示的内容等详细信息。

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2014-06-19T16:27:25.743

**编辑：** *因为这个答案很受欢迎，我已经更新了它以反映最新的做法。*

### 节点 >=10

`{ recursive: true }`Node 的新选项`fs`现在允许本机这样做。此选项模仿 UNIX 的`mkdir -p`. 它将递归地确保路径的每个部分都存在，并且如果其中任何部分存在，则不会抛出错误。

（注意：它可能仍然会抛出诸如`EPERM`or之类的错误，因此如果您的实现容易受到它的影响`EACCESS`，最好还是将其包装在 a中。）`try {} catch (e) {}`

同步版本。

```
fs.mkdirSync(dirpath, { recursive: true }) 
```

异步版本

```
await fs.promises.mkdir(dirpath, { recursive: true }) 
```

### 旧节点版本

使用 a `try {} catch (err) {}`，您可以非常优雅地实现这一点，而不会遇到竞争条件。

为了防止检查存在和创建目录之间的死时间，我们简单地尝试直接创建它，如果它存在则忽略错误`EEXIST`（目录已经存在）。

但是，如果错误不是`EEXIST`，我们应该抛出一个错误，因为我们可能正在处理类似`EPERM`or的东西`EACCES`

```
function ensureDirSync (dirpath) {
  try {
    return fs.mkdirSync(dirpath)
  } catch (err) {
    if (err.code !== 'EEXIST') throw err
  }
} 
```

对于`mkdir -p`-like 递归行为，例如`./a/b/c`，您必须在 dirpath 的每个部分都调用它，例如`./a`, `./a/b`,`.a/b/c`

* * *

## 回答 #2

> 赞同：244
> 
> 时间：2012-12-04T05:58:59.140

这样做的好方法是使用[mkdirp](https://github.com/substack/node-mkdirp)模块。

```
$ npm install mkdirp 
```

使用它来运行需要该目录的功能。在创建路径或路径确实已经存在时调用回调。`err`如果 mkdirp 未能创建目录路径，则会设置错误。

```
var mkdirp = require('mkdirp');
mkdirp('/tmp/some/path/foo', function(err) { 

    // path exists unless there was an error

}); 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2015-10-21T12:13:08.883

如果你想要一个又快又脏的衬里，使用这个：

```
fs.existsSync("directory") || fs.mkdirSync("directory"); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-12-04T05:45:09.067

node.js 文档`fs.mkdir`基本上遵循[`mkdir(2)`](http://linux.die.net/man/2/mkdir). 这表明`EEXIST`如果路径存在但不是一个目录，如果你走这条路线，也会指示它会创建一个尴尬的角落案例。

您最好调用[`fs.stat`](http://nodejs.org/api/fs.html#fs_fs_stat_path_callback)它来告诉您路径是否存在以及它是否是单个调用中的目录。对于（我假设是）目录已经存在的正常情况，它只是一个文件系统命中。

这些`fs`模块方法是原生 C API 的薄包装器，因此您必须查看 node.js 文档中引用的手册页以获取详细信息。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2014-03-02T15:11:19.533

你可以使用这个：

```
if(!fs.existsSync("directory")){
    fs.mkdirSync("directory", 0766, function(err){
        if(err){
            console.log(err);
            // echo the result back
            response.send("ERROR! Can't make the directory! \n");
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-07-07T15:43:15.290

我提出了一个没有模块的解决方案（为了可维护性，不建议使用累积模块，特别是对于可以用几行编写的小功能......）：

**最后更新 ：**

在 v10.12.0 中，NodeJS 实现了递归选项：

```
// Create recursive folder
fs.mkdir('my/new/folder/create', { recursive: true }, (err) => { if (err) throw err; }); 
```

**更新 ：**

```
// Get modules node
const fs   = require('fs');
const path = require('path');

// Create 
function mkdirpath(dirPath)
{
    if(!fs.accessSync(dirPath, fs.constants.R_OK | fs.constants.W_OK))
    {
        try
        {
            fs.mkdirSync(dirPath);
        }
        catch(e)
        {
            mkdirpath(path.dirname(dirPath));
            mkdirpath(dirPath);
        }
    }
}

// Create folder path
mkdirpath('my/new/folder/create'); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-09-30T10:24:55.387

你也可以使用[fs-extra](https://github.com/jprichardson/node-fs-extra)，它提供了很多常用的文件操作。

示例代码：

```
var fs = require('fs-extra')

fs.mkdirs('/tmp/some/long/path/that/prob/doesnt/exist', function (err) {
  if (err) return console.error(err)
  console.log("success!")
})

fs.mkdirsSync('/tmp/another/path') 
```

此处的文档：[https ://github.com/jprichardson/node-fs-extra#mkdirsdir-callback](https://github.com/jprichardson/node-fs-extra#mkdirsdir-callback)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-03-23T11:04:03.513

这是我用来创建目录的 ES6 代码（当它不存在时）：

```
const fs = require('fs');
const path = require('path');

function createDirectory(directoryPath) {
  const directory = path.normalize(directoryPath);

  return new Promise((resolve, reject) => {
    fs.stat(directory, (error) => {
      if (error) {
        if (error.code === 'ENOENT') {
          fs.mkdir(directory, (error) => {
            if (error) {
              reject(error);
            } else {
              resolve(directory);
            }
          });
        } else {
          reject(error);
        }
      } else {
        resolve(directory);
      }
    });
  });
}

const directoryPath = `${__dirname}/test`;

createDirectory(directoryPath).then((path) => {
  console.log(`Successfully created directory: '${path}'`);
}).catch((error) => {
  console.log(`Problem creating directory: ${error.message}`)
}); 
```

**笔记：**

*   在`createDirectory`函数的开头，我对路径进行了规范化，以保证操作系统的路径分隔符类型将被一致地使用（例如，这将`C:\directory/test`变成`C:\directory\test`（在 Windows 上时）
*   `fs.exists`已[弃用](https://nodejs.org/api/fs.html#fs_fs_exists_path_callback)，这就是我`fs.stat`用来检查目录是否已存在的原因
*   如果目录不存在，错误代码将是`ENOENT`( **E** rror **NO ENT** ry)
*   目录本身将使用`fs.mkdir`
*   我更喜欢异步函数`fs.mkdir`而不是它的阻塞对应函数，`fs.mkdirSync`并且由于包装`Promise`，它将保证只有在成功创建目录后才会返回目录的路径

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-12-04T04:39:42.413

在我看来，你最好不要在用 Javascript 编码时计算文件系统命中。但是，（1）`stat`和`mkdir`（2）`mkdir`并检查（或丢弃）错误代码，这两种方法都是做你想做的事情的正确方法。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-31T13:00:33.470

> 为每个用户创建动态名称目录...使用此代码

```
***suppose email contain user mail address***

var filessystem = require('fs');
var dir = './public/uploads/'+email;

if (!filessystem.existsSync(dir)){
  filessystem.mkdirSync(dir);

}else
{
    console.log("Directory already exist");
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-31T12:21:36.217

正如[Teemu Ikonen 的答案](https://stackoverflow.com/a/13696975/10232790)的更新替代方法一样，它非常简单易读，是使用包的[`ensureDir`](https://github.com/jprichardson/node-fs-extra/blob/HEAD/docs/ensureDir.md)方法[`fs-extra`](https://www.npmjs.com/package/fs-extra)。

它不仅可以作为内置`fs`模块的明目张胆的替代品，而且除了包的功能外，还有很多其他的功能`fs`。

`ensureDir`顾名思义，该方法确保目录存在。如果目录结构不存在，则创建它。喜欢`mkdir -p`。不只是结束文件夹，而是创建整个路径（如果不存在）。

上面提供的是`async`它的版本。它也有一个同步的方法来以方法的形式执行这个[`ensureDirSync`](https://github.com/jprichardson/node-fs-extra/blob/HEAD/docs/ensureDir-sync.md)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-05T06:49:33.483

您可以使用文件系统模块完成所有这些操作。

```
const
  fs = require('fs'),
  dirPath = `path/to/dir`

// Check if directory exists.
fs.access(dirPath, fs.constants.F_OK, (err)=>{
  if (err){
    // Create directory if directory does not exist.
    fs.mkdir(dirPath, {recursive:true}, (err)=>{
      if (err) console.log(`Error creating directory: ${err}`)
      else console.log('Directory created successfully.')
    })
  }
  // Directory now exists.
}) 
```

您甚至不需要检查目录是否存在。以下代码还保证该目录已经存在或已创建。

```
const
  fs = require('fs'),
  dirPath = `path/to/dir`

// Create directory if directory does not exist.
fs.mkdir(dirPath, {recursive:true}, (err)=>{
  if (err) console.log(`Error creating directory: ${err}`)
  // Directory now exists.
}) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-31T07:34:16.987

@Liberateur 上面的[回答](https://stackoverflow.com/a/44974886/7573108)对我不起作用（节点 v8.10.0）。一点点修改就可以了，但我不确定这是否是正确的方法。请建议。

```
// Get modules node
const fs   = require('fs');
const path = require('path');

// Create
function mkdirpath(dirPath)
{
    try {
        fs.accessSync(dirPath, fs.constants.R_OK | fs.constants.W_OK);
    }
    catch(err) {
        try
        {
            fs.mkdirSync(dirPath);
        }
        catch(e)
        {
            mkdirpath(path.dirname(dirPath));
            mkdirpath(dirPath);
        }
    }
}

// Create folder path
mkdirpath('my/new/folder/create'); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-01-24T21:31:40.330

[Raugaral 的答案](https://stackoverflow.com/a/22129318/7563889)，但具有 -p 功能。丑陋，但它有效：

```
function mkdirp(dir) {
    let dirs = dir.split(/\\/).filter(asdf => !asdf.match(/^\s*$/))
    let fullpath = ''

    // Production directory will begin \\, test is on my local drive.
    if (dirs[0].match(/C:/i)) {
        fullpath = dirs[0] + '\\'
    }
    else {
        fullpath = '\\\\' + dirs[0] + '\\'
    }

    // Start from root directory + 1, build out one level at a time.
    dirs.slice(1).map(asdf => {
        fullpath += asdf + '\\'
        if (!fs.existsSync(fullpath)) {
            fs.mkdirSync(fullpath)
        }
    })
}//mkdirp 
```

# android - 当调用 Activity/Fragment 改变方向时，Android 中的服务是否停止？

> ID：13696152
> 
> 赞同：3
> 
> 时间：2012-12-04T04:35:20.443
> 
> 标签：android, android-service

我正在查看文档，但它并没有在任何地方真正解释这一点。我确实找到了这个：

```
The service will at this point continue running until Context.stopService() 
or stopSelf() is called. 
```

这告诉我的是服务将继续运行，但这是假设发生方向变化时 Activity/Fragment 不会自动停止它已经启动的服务。我还发现了这个：

```
Using startService() overrides the default service lifetime that is managed by
bindService(Intent, ServiceConnection, int): it requires the service to remain 
running until stopService(Intent) is called, regardless of whether any 
clients are connected to it. 
```

我可以假设在我明确调用之前服务实际上不会停止`stopService`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:41:13.327

是的。您必须使用 stopService() 方法停止它，或者您可以在不再需要该服务时使用 stopSelf() 停止它。它会自动停止该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:48:03.123

对于标题，答案是否定的。

当调用活动/片段改变方向时，服务不会停止。它继续运行，除非或直到它被明确停止

对于描述，答案是肯定的。

您肯定需要调用其中任何一个功能`stopService()`或`stopSelf()`停止服务。

# php - cakePHP 中的 $this->request->action 是什么意思

> ID：13696155
> 
> 赞同：2
> 
> 时间：2012-12-04T04:36:09.667
> 
> 标签：php, cakephp

我目前正在维护其他程序员编写的代码。该应用程序基于 CakePHP 构建。

在应用程序中，我发现在控制器内部，`$this->request->action = 'string_value'`我不明白这条评论的含义。我尝试搜索 CakePHP 文档和 API，但我一无所获。也没有在谷歌上找到任何合适的参考。

有人可以解释一下这个评论吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:48:56.917

基本上 $this->request 用于访问请求参数。请查看此[cakephp](http://book.cakephp.org/2.0/en/controllers/request-response.html)文章。可能是在设置一个请求参数，比如 $_POST["action"]="abcd"; 请检查。

# php - PHP：urldecode/explode 中未定义的偏移量

> ID：13696161
> 
> 赞同：1
> 
> 时间：2012-12-04T04:36:51.787
> 
> 标签：php, preg-replace, preg-match, urldecode

试图解构一个函数，我收到一条警告通知，用于从数据库中检索 CSV 数据。

该函数从 index.php 文件中调用，可以格式化为

`$masterRecords = $qb->genResultsTable($qid, $config[27]);`

`$config[27]`是动态设置的，但有助于理解；它是一个以句点分隔的整数列表。eg`"3.4.5.6.7.8.9.25.141.137.83"`
`$qid`是一个整数 - 例如`"63"`。

该功能有效，但我想看看我是否可以摆脱 php Notice。
获取通过循环的每个项目的通知：

```
Notice: Undefined offset: 106 in /vagrant/public/arc/inc/lib.php on line 522 
```

**调用堆栈：**

```
1   0.0028  417156  {main}()    ../index.php:0
2   1.2886  473280  qb->genResultsTable()   ../index.php:66 
```

**功能：**

```
public function genResultsTable($qid, $clist) {
  $url = "{$this->qb_ssl}{$this->db_id}?act=API_GenResultsTable&ticket={$this->ticket}&apptoken={$this->app_token}&qid={$qid}&clist={$clist}&slist={$clist}&options=csv";
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_COOKIEJAR, $this->cjFile);
  curl_setopt($ch, CURLOPT_COOKIEFILE, $this->ckfile);
  //  curl_setopt($ch, CURLOPT_HEADER, true);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
  curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
  curl_setopt($ch, CURLOPT_COOKIE, "TICKET=" . urlencode($this->ticket));
  $r = curl_exec($ch);
  $r = preg_replace_callback('/([\'"])([^"]+)\1/', 'call_back', $r);
  preg_match_all('/(.*)\r\n/', $r, $matchs);
  $fields = explode('.', $clist);
  $count = count($matchs[0]);
  $arrs = array();
  for ($i = 1; $i < $count; $i++) {
    $explode_arr = explode(',', $matchs[0][$i]);
    $arr = array();
    foreach ($fields as $key => $field) {
  // vv THIS BELOW LINE IS THE LINE THAT IS INDICATED IN ERROR vv
      $arr[$field] = urldecode($explode_arr[$key]);
    }
    $arrs[] = $arr;
  }
  return $arrs;
}

function call_back($matches) {
  return urlencode($matches[0]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:14:21.730

为了使@HamZa 的答案更清楚，基本上您收到通知的原因是因为您正在访问一个索引不存在或未设置的数组......

理想情况下，每次将 [ ] 与变量键一起使用时，最好测试该数组是否存在键索引/键。

所以，只需在前面`doSomeThing($arr[$x])`加上

```
if(isset($arr[$x])){
     doSomeThing($arr[$x])
} 
```

这将防止无效的数组访问，并且通知应该消失。

# lambda - 闭包变量

> ID：13696165
> 
> 赞同：0
> 
> 时间：2012-12-04T04:37:13.597
> 
> 标签：lambda, lisp, closures, clisp

```
>
(defun hib (f1 f2)
  (cons
    (function
      (lambda ()
        (setq f2 (+ f1 (setq f1 f2))))
    )
    (function
      (lambda ()
        (list 88 f1 f2 99 ))
    )
  )
)
hib
> (setq hib1 (hib 1 1))
(#<function :lambda nil (setq f2 (+ f1 (setq f1 f2)))> .
 #<function :lambda nil (list 88 f1 f2 99)>)
> (setq hib2 (hib 1 1))
(#<function :lambda nil (setq f2 (+ f1 (setq f1 f2)))> .
 #<function :lambda nil (list 88 f1 f2 99)>)
> (funcall (car hib1))
2
> (funcall (car hib1))
3
> (funcall (cdr hib1))
(88 2 3 99)
> (funcall (car hib1))
5
> (funcall (cdr hib1))
(88 3 5 99)
> (funcall (car hib1))
8
> (funcall (cdr hib1))
(88 5 8 99)
> (funcall (car hib2))
2
> (funcall (cdr hib2))
(88 1 2 99)
> (funcall (cdr hib1))
(88 5 8 99)
> (funcall (car hib2))
3
> (funcall (cdr hib2))
(88 2 3 99) 
```

为什么`(funcall (car hib1))`会改变`f1`和`f2`在`(cdr hib1)`？

为什么`(funcall (car hib1))`不改变`f1`and `f2`in `(cdr hib2)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:00:33.677

hib1 和 hib2 的闭包不同，即有单独的变量绑定。

调用`(funcall (car hib1))`会更改 hib1 周围的 f1 和 f2 的值。这些值与 hib2 周围的 f1 和 f2 完全不同。

所以对 hib1 环境的任何调用都不能改变 hib2 的环境。

# android - android - calculateInSampleSize，为什么当宽度 > 高度时 Math.round 处理高度（高度 / reqHeight）？

> ID：13696166
> 
> 赞同：10
> 
> 时间：2012-12-04T04:37:26.703
> 
> 标签：android, bitmapfactory

我正在寻找“developer.android.com”来缩小我的位图文件，但我发现了一件事我不明白。所以我很感谢你给我一点帮助。

这是来自 developer.android.com的[片段](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
  // Raw height and width of image
  final int height = options.outHeight;
  final int width = options.outWidth;
  int inSampleSize = 1;

  if (height > reqHeight || width > reqWidth) {
    if (width > height) {
      inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
      inSampleSize = Math.round((float)width / (float)reqWidth);
    }
  }
  return inSampleSize;
} 
```

在 if 语句中，当“ if(width > height)”时，他们为什么要计算“(float)height / (float)reqHeight”？

例如，宽度=600，高度=800，reqWidth=100，reqHeight=100。

在这种情况下，inSampleSize 将为 6，计算的尺寸为 width=100，height=133。高度仍然高于 reqHeight..

那么，有人可以解释一下吗？对不起复杂的解释，但我希望有人给我一个想法。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:34:11.070

我只能说他们的逻辑看起来是错误的 :( 无论如何，这个方法相当简单，所以用正确的条件重新实现它应该不是什么大问题！我的意思是当你看一下 decodeSampledBitmapFromResource 时，它只想减少位图以使其适合所需的范围，所以这一定是一个错误。

编辑 :: 这对我来说看起来更糟，它在某些情况下不起作用。假设您有宽度 = 200 和高度 = 600。您将最大边界设置为宽度 = 100 和高度 = 500。您有高度 > 宽度，但是如果您希望它们都适合返回结果 inSampleSize 必须为 200/100而不是 600/500。所以基本上如果你重新实现这个方法，我会这样做：

```
public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;

    int stretch_width = Math.round((float)width / (float)reqWidth);
    int stretch_height = Math.round((float)height / (float)reqHeight);

    if (stretch_width <= stretch_height) 
        return stretch_height;
    else 
        return stretch_width;
} 
```

但这看起来他们的代码有太多问题，我相信我正确理解了它的观点！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-08T13:49:19.093

上述问题中的代码严重过时。如[BitmapFactory.Options 参考](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)（自 2013 年 3 月 8 日起）中所述，`inSampleSize`将向下舍入到最接近的 2 次幂。

> 如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。样本大小是对应于解码位图中的单个像素的任一维度中的像素数。例如， inSampleSize == 4 返回的图像是原始宽度/高度的 1/4，像素数的 1/16。任何 <= 1 的值都被视为 1。注意：解码器使用基于 2 的幂的最终值，任何其他值将向下舍入到最接近的 2 幂。

2013 年 3 月 8 日的[BitmapFactory.Options 参考](http://web.archive.org/web/20130308024615/http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)

所以正确的计算代码`inSampleSize`是[加载大位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

```
public static int calculateInSampleSize(BitmapFactory.Options options, 
    int reqWidth, int reqHeight) {

    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        final int halfHeight = height / 2;
        final int halfWidth = width / 2;

        // Calculate the largest inSampleSize value that is a power of 2 and keeps both
        // height and width larger than the requested height and width.
        while ((halfHeight / inSampleSize) > reqHeight
                && (halfWidth / inSampleSize) > reqWidth) {
            inSampleSize *= 2;
        }
    }    
    return inSampleSize;
} 
```

然而，上面的代码可以额外优化。因为`halfWidth`和`halfHeight`已经除以 2，所以可以重写 while 循环以返回**大于或等于**请求大小范围的图像。

```
 while ((halfHeight / inSampleSize) >= reqHeight
                && (halfWidth / inSampleSize) >= reqWidth) {
            inSampleSize *= 2;
        } 
```

`800x800`必须适合pix的图像大小 pix 的原始代码`100x100`将返回`inSampleSize`4 -> 返回的图像将是`200x200`pix，修改后的代码将返回`inSampleSize`8 -> 返回的图像将是`100x100`pix。

**注意：**`inSampleSize`使用和方法下采样图像的主要功能`BitmapFactory.decodeXXX`是在加载明显大于显示所需的图像时保留内存。这些方法与上述代码相结合，将始终为您提供大于（或等于）请求边界的最小图像（按 2 的幂缩放），而不是适合该边界的图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T23:40:01.520

好吧，在缩放的东西有很多问题之后，我想我得到了自己的答案：

使用[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)中的“有效加载大型位图”我想发布我的一些结果（*下面的原始代码*）：

```
// Calculate ratios of height and width to requested height and width
final int heightRatio = Math.round((float) height / (float) reqHeight);
final int widthRatio = Math.round((float) width / (float) reqWidth); 
```

我目前正在使用横​​向模式下分辨率为 1280 x 752 的 Galaxy-Tab 7.7。想象一个具有以下规格的图像：

1920 x 1200 ..会发生什么？

高度比 = 1920/1280 = **1.5**和宽度比 = 1200/752 = **1.59**

这两个数字都变成了**2**，所以如果我理解一切正确的话，图像将被缩小 2 倍。这将导致图像 1920/2 = **960 * 600**小于我要求的**1280 * 752**分辨率。

我通过逐层替换解决了这个问题：

```
// Calculate ratios of height and width to requested height and width
final int heightRatio = (int)Math.floor((float) height / (float) reqHeight);
final int widthRatio = (int)Math.floor((float) width / (float) reqWidth); 
```

这实际上可以防止我的*一些*图像被缩小太多。我目前仍在调查参数*inSampleSize*以查看是否可以选择使用“分数”。目前，尺寸不超过 1280x752 (*2) = 2560*1504 的所有图像都**不会**被缩放。我正在写的 imageView 是图像的详细视图，因此现在应该不是太大的问题。

我将 in 代码的修改版本与以下内容结合使用：

```
returnview.setAdjustViewBounds(true); 
```

这将防止比我的屏幕大的图像得到一个混乱的边界框。如果为实际图像设置颜色背景，则可以看到它。此外，使用现在固定的代码，我可以实现一些 onClick 处理程序来检测用户是否在我的图像之外单击以关闭图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-04T21:12:06.587

他们的逻辑不仅笨拙而且实际上是错误的。您在图像中需要的东西不是缩小它，直到一个参数小于所需值（如果它被分成两半），而是确保没有尺寸大于 2048。在此之上，很多时候你可以' t 渲染纹理或显示图像。如果你有一个类似 4000x1300 的图像并且你说你想要至少 768。它实际上不能在不低于该值的情况下将 1300 减半。所以它什么也不做并退出。尝试加载失败的 4000 宽图像。

```
public static int calculateInSampleSize(BitmapFactory.Options options, int maxWidth, int maxHeight) {
    int height = options.outHeight;
    int width = options.outWidth;
    int inSampleSize = 1;
    while (height > maxHeight || width > maxWidth) {
        height /= 2;
        width /= 2;
        inSampleSize *= 2;
    }
    return inSampleSize;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:17:24.950

我发现他们的逻辑

```
if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
} 
```

也很混乱。我会采取更简单的方法。我的逻辑是如果它是水平图像并忽略所需的高度，则在宽度上缩放图像，如果它是垂直图像，则在高度上缩放图像并忽略所需的宽度。

```
if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        } else {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        }
    } 
```

# php - facebook->getUser() 方法返回 0

> ID：13696167
> 
> 赞同：0
> 
> 时间：2012-12-04T04:37:33.003
> 
> 标签：php, facebook, zend-framework

我在我的网站中使用 facebook 功能登录。问题是在成功验证后该`$facebook->getUser()`方法返回 0，因此它不在其余代码之前。为了解决这个问题，我修改了我的 APP ID 和密钥，还创建了新的 APP，但仍然无法正常工作。也在谷歌上做了很多东西，但没有取得任何成功。

以下是我的代码：

```
public function facebookregisterAction() {
require 'auth/src/facebook.php';

$facebook = new Facebook(array('appId' => 'xxxxxxxxxxxxxxx','secret' => 'xxxxxxxxxxxxxxxxxxxxxxx','cookie' => true));

$session = new Zend_Session_Namespace('user');
$user = $facebook->getUser();

if ($session->islogout != 1) {
       if ($user) {
            try {
                   $user_profile = $facebook->api('/me');                    
                }catch(Exception $e){}
       }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:43:20.053

作为一般答案，我发现从 facebook-php-sdk 目录中的 example.php 开始很有帮助。

在我的情况下，我的测试应用程序的 URL 与站点 URL 不同。example.php 文件提供了对诊断和纠正问题非常有用的错误消息。

这也是实际使用的一个很好的例子。

话虽如此，您似乎缺少了一部分。用户必须先访问您应用的 Facebook 登录 URL，然后 API 才会非常有用（除了获取公共信息之外）。要查找此 URL，请尝试：

```
$url = $facebook->getLoginUrl(); 
```

如果您需要登录，您可以给用户一个点击链接，或者悄悄地把用户重定向到这个 URL。一个“Hello, World!”类型的开始会是这样的：

```
if ($user) {
  $url = $facebook->getLogoutUrl();
  $message = "Click here to log out";
} else {
  $url = $facebook->getLoginUrl();
  $message = "Click here to log in";
}

print "<a href=$url>$message</a>"; 
```

但是您很快就会遇到 example.php 文件中包含的内容：当用户退出 Facebook 时，“访问令牌”（如会话 ID）不会被清除。您的应用程序仍将看到一个有效的用户对象，但任何命中 Facebook 的 API 调用都会失败。

# azure - Azure 订阅类型处理

> ID：13696168
> 
> 赞同：1
> 
> 时间：2012-12-04T04:37:33.287
> 
> 标签：azure, azure-marketplace

我目前正在处理如何在我的应用程序中处理一个独特的场景，即提供一种特定的订阅类型，该类型只能持续 3 个月，然后在此之后切换订阅的用户将不再能够注册此订阅. 假设我是一家提供 2 比 1 优惠的商店，该优惠仅持续一个假期，之后优惠将结束。如何使用 Azure 市场库进行模拟？我从以下链接知道您可以在注册不同的订阅类型时生成，这很有用，我们最终可能会这样做，但我想知道我上面提到的是否可行，我该如何去做那？

[http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowazmarketplace_topic6](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowazmarketplace_topic6)

> 注意：请特别注意提交新既定课程表。您提供的信息将用于发布您的申请（例如联系信息、公司名称和公司描述）。特别是，产品类型指示市场用户将如何使用您的应用程序。
> 
> 提供三种产品类型：
> 
> 1.商业应用：应用可以通过市场购买。
> 
> 2.仅列出应用程序：该应用程序不是市场产品的一部分，但将在应用程序目录中列出。
> 
> 3.Data：通过Marketplace注册一个数据集。
> 
> 此外，您将指定您的应用程序订阅及其价格。Windows Azure > Marketplace 仅支持按月订阅。您可以选择添加多个月度订阅。为了区分每个产品，请分配一个全局唯一标识符 (GUID)，例如：
> 
> 1.企业订阅：免费（B40878F0-2100-4754-A6C1-50141E6ADC0F）
> 
> 2.业务订阅：免费（E52E4425-09E6-4F0B-9764-4FDB0D814526）
> 
> 3.个人订阅：免费（79D8743E-9025-4749-8179-AE516C85FE3E）
> 
> 您可以使用 Visual Studio 附带的 GUID 生成器工具生成自己的 GUID。
> 
> 如果您想进一步描述每种订阅类型之间的差异，可以在表单的“功能”部分进行。

# php - 在 keyup 事件上获取 codeigniter 中文本框的当前值

> ID：13696170
> 
> 赞同：1
> 
> 时间：2012-12-04T04:37:47.123
> 
> 标签：php, jquery, ajax, codeigniter

嗨，我目前正在学习 jQuery 中的 AJAX，现在我正在尝试在 codeigniter 中使用它。现在发生的事情是我有一个文本框，其中在 keyup 事件上它会调用我的控制器上的函数并且它仍然在工作，但是控制器本身没有获得文本框的当前值并且它保持空白，因为我没有提交表单尚未，因此无法获取 POST 数据。好吧，我也不想提交表单，因为我只有一次提交机会，而我只想检查事件是否已经存在（用于验证目的）。到目前为止，这是我的代码，添加了注释以便更好地查看。

看法：

```
<div>
<form>
<table border="0">
    <tr>
        <td>
            <title>Name: </title>
        </td>
        <td>
            <input id="name" type="text" name="eventname" />
        </td>
        <td>
            <div id="name1"></div>
        </td>
    </tr>
</table>

<script type="text/javascript" src="<?php echo $base; ?>javascripts/jquery-1.8.2.min.js">
     </script>
<script type="text/javascript" src="<?php echo $base; ?>javascripts/ajax.js">
     </script>

</form>
</div> 
```

控制器：

```
<?php

class Login extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('test_model');
    }

    public function view()
    {
        $data['base'] = $this->config->base_url();

        //CHECK IF THE $PAGE VIEW IS EXISTING
        if ( !file_exists('test/views/pages/test_form/test_form.php'))
        {
            // IF PAGE DOESN'T EXISTS SHOW 404 ERROR
            show_404();
        }

        //FOR THE TITLE PART
        $data['title'] = ucfirst('Test'); 

        $this->load->view('templates/header', $data);
        $this->load->view('pages/test_form/test_form', $data);
        $this->load->view('templates/footer', $data);

    }

    public function message()
    {
        //this one will access database
        echo $this->test_model->check_event($this->input->post('eventname'));
        //username doesn't get the current value on keyup unlike the AJAX part
    }

} 
```

该模型：

```
<?php
class Test_model extends CI_Model {

    public function __construct()
    {
        $this->load->database();
    }

    public function check_event($test_input)
    {
        if($test_input==null){
            return "True";
        }
        else
            return "False";
    }

} 
```

和 AJAX：

```
$('#name').keyup(function() { //LISTENER FOR BUTTON CLICK BASED ON ID button ON THE PHP PAGE
    var name = $('#name').val();

    $.ajax({ //STARTS AJAX
    type: 'POST',
    url: '/CodeIgniter_2.1.3/index.php/login/message/', //THIS PAGE IS LOADED ON THE AJAX data IS THE CONTENTS ON THE PAGE NOTE COMMA SEPARATED VALUES
    data: 'name='+name,
    statusCode: { //THE STATUS FOR THE PAGE. NOTE THIS IS CASE SENSITIVE
        404: function(){ //IF 404 ERROR OCCURS THIS MESSAGE WILL BE DISPLAYED
            $('#name1').text('Page not found');
        }, //NOTE COMMA SEPARATED VALUES
        202: function(){ //IF 202 SHOW THIS TEXT
            $('#name1').text('Please wait');
        }
    }, //NOTE COMMA SEPARATED VALUES
    success: function(data){ //IF PAGE EXISTS OR FOUND THE data FROM THE GIVEN PAGE WILL BE LOADED AND PASSED
        $('#name1').html(data); //THE content ID ON THE PHP PAGE WILL CONTAIN ALL THE html data OF THE GIVEN PAGE
    }
    });
}); 
```

很抱歉这个 AJAX 部分。它充满了我认为没有必要的评论。这只是我快速查看代码的注释。:) 我的代码有问题还是我需要使用某些功能来检索数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:03:20.147

**命名似乎有些错误，让我们跟踪一下：**

**1、获取输入：**

```
<input id="name" type="text" name="eventname" />

var name = $('#name').val();
ajax{...
data: 'name='+name,...} 
```

从上面的代码中，您可以为帖子参数“名称”赋值。

**2、因为它给了post参数'name'，你需要替换：**

```
$this->test_model->check_event($this->input->post('eventname')); 
```

**和：**

```
$this->test_model->check_event($this->input->post('name')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:40:02.703

您将数据发布为“名称”....

检查你的ajax

```
data: 'name='+name,   // this is data that is posted by ajax..you are posting it with a name as "name" 
```

所以你必须将输入帖子作为“名称”而不是“事件名称”......

要么您必须将数据的名称重命名`data: 'name='+name,`为`data: 'eventname='+name,`

**或者**

替换这个

```
echo $this->test_model->check_event($this->input->post('eventname')); 
```

有了这个

```
echo $this->test_model->check_event($this->input->post('name')); 
```

在您的控制器中，它应该可以工作....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:18:17.233

文本框中没有名为 value 的字段，因此请像这样修改您的文本框并尝试

```
<input id="name" type="text" name="eventname" value="eventname"/> 
```

现在我认为你会得到价值，请检查这个

# c - C中变量的范围

> ID：13696173
> 
> 赞同：0
> 
> 时间：2012-12-04T04:38:22.320
> 
> 标签：c, scope

我有一个程序，它有一个名为 best_cost 的变量，它是在所有函数之外定义的。然后我有一个名为 compare_costs 的函数，它可以更改 best_cost 的值，并且我在 main() 中打印了 best_cost。现在它输出 1000000，这告诉我 compare_costs 函数的范围不能改变 best_costs 的值。我使用了一个调试器，发现 best_cost 在 compare_costs 中发生了变化。这是我的代码的简化版本：

```
int best_cost = 1000000;

int main {

    compare_costs(new_cost);

    printf("%d", best_cost);

}

void compare_costs(nc) 
{
    if(nc < best_cost) {
        best_cost = nc;
    }
} 
```

我需要使用指针吗？如果是这样，你能给我一个如何将它作为指针实现的简化版本吗？

另外，我应该注意，这是我实际使用的非常简化的代码。我不只是将 best_cost 传递给 compare_costs 函数并让它返回 best_cost 是有原因的。

这是整个代码： http: [//pastebin.com/khs2jcaF](http://pastebin.com/khs2jcaF)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:50:23.600

问题是 best_cost 也在 main() 中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:03:02.650

请编辑问题以正确表示问题的状态。[就目前而言，发布的问题与http://pastebin.com/khs2jcaF](http://pastebin.com/khs2jcaF)中发布的代码不同步

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:23:09.503

只需`int best_cost;`从 main() 中删除 ..

# asp.net-web-api - 将 Web API 传入表单字段名称映射到我的班级？

> ID：13696174
> 
> 赞同：0
> 
> 时间：2012-12-04T04:38:22.303
> 
> 标签：asp.net-web-api

我编写了一个 Web API，用作与 3rd 方服务的 webhook，以便他们可以在他们的服务中发生事件时向我发送数据。他们已经规定了发布的数据将是什么。因此，我为传入数据创建了一个类，以便每个属性名称与来自已发布表单 urlencoded 数据的字段名称匹配。

我想做的是以比他们在 POST 请求中发送的名称更用户友好的方式命名我班级中的事物。我找不到是否有办法（可能使用属性）告诉 ModelBinder 将哪些表单数据放入哪个属性。有没有办法做到这一点？

顺便说一句，当我认为他们将 JSON 作为 POSTED 数据发送时，我可以使用 JSON.NET 及其 JsonProperty 属性来做到这一点。但是现在它以 application/x-www-form-urlencoded 的形式出现，我不知道如何做同样的事情。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-04-27T18:21:26.817

```
please try something like this

[DataContract]
public class TestSerialization
{
    [DataMember(Name = "field_one")]
    public string ItemOne { get; set; }

    [DataMember(Name = "field_two")]
    public string ItemTwo { get; set; }
} 
```

# pyqt - 子类化 QGraphicsItem 在用作模块时没有获得鼠标事件

> ID：13696178
> 
> 赞同：1
> 
> 时间：2012-12-04T04:38:57.573
> 
> 标签：pyqt, mouseevent, subclass, pyside

我正在使用 Pyside 创建一个交互式子类 QGraphicsView - 包含一些子类 QGraphicsItems。它在自己的模块中运行良好并接收鼠标事件。

但是当用作另一个文件中的模块并合并到另一个布局中时 - 我的鼠标事件没有被触发。但是 .itemChange 正在工作。除了鼠标事件之外的一切。我没有使用悬停等跟踪事件。我正在使用 mousePressEvent 和 mouseReleaseEvent。

我已经看到关于设置“setMouseTracking”的 c++ 响应，但这是针对小部件的，我的 QGraphicsItems 已添加为项目而不是小部件。所以当我调用这个函数时，它告诉我它不存在于项目中。这似乎也适用于悬停类型的事件——我不需要。我相信我正在正确地进行子类化，并将事件传递给父类。正如我在开始时所说的 - 我的代码在独立文件中运行良好。

有什么想法我忘了做什么吗？

这是独立的工作程序：另存为 test_subclass_module.py

```
import sys
import weakref
import math
from PySide import QtCore, QtGui

###
class Edge(QtGui.QGraphicsItem):
    Type = QtGui.QGraphicsItem.UserType + 2

    def __init__(self, sourceNode, destNode):
        QtGui.QGraphicsItem.__init__(self)
        #
        self.sourcePoint = QtCore.QPointF()
        self.destPoint = QtCore.QPointF()
        self.setAcceptedMouseButtons(QtCore.Qt.NoButton)
        self.source = weakref.ref(sourceNode)
        self.dest = weakref.ref(destNode)
        self.source().addEdge(self)
        self.dest().addEdge(self)
        self.set_index()
        self.adjust()

    def type(self):
        return Edge.Type

    def sourceNode(self):
        return self.source()

    def setSourceNode(self, node):
        self.source = weakref.ref(node)
        self.adjust()

    def destNode(self):
        return self.dest()

    def setDestNode(self, node):
        self.dest = weakref.ref(node)
        self.adjust()

    def set_index(self):
        self.setToolTip(self.source().label)

    def adjust(self):
        # do we have a line to draw ?
        if  self.source() and self.dest():
            line = QtCore.QLineF(self.mapFromItem(self.source(), 0, 0), self.mapFromItem(self.dest(), 0, 0))
            length = line.length()
            if length > 20:
                edgeOffset = QtCore.QPointF((line.dx() * 10) / length, (line.dy() * 10) / length)
                self.prepareGeometryChange()
                self.sourcePoint = line.p1() + edgeOffset
                self.destPoint   = line.p2() - edgeOffset
            else: # want to make sure line not drawn
                self.prepareGeometryChange()
                self.sourcePoint = self.destPoint 

    def boundingRect(self):
        # do we have a line to draw ?
        if not self.source() or not self.dest():
            return QtCore.QRectF()
        else:
            extra = 1
            return QtCore.QRectF(self.sourcePoint,
                                 QtCore.QSizeF(self.destPoint.x() - self.sourcePoint.x(),
                                               self.destPoint.y() - self.sourcePoint.y())).normalized().adjusted(-extra, -extra, extra, extra)

    def paint(self, painter, option, widget):
        if self.source() and self.dest():
            # Draw the line itself.
            line = QtCore.QLineF(self.sourcePoint, self.destPoint)
            if line.length() > 0.0:
                painter.setPen(QtGui.QPen(QtCore.Qt.black, 1, QtCore.Qt.SolidLine, QtCore.Qt.RoundCap, QtCore.Qt.RoundJoin))
                painter.drawLine(line)

###
class Node(QtGui.QGraphicsItem):
    Type = QtGui.QGraphicsItem.UserType + 1

    def __init__(self, graphWidget, time, temp, pos):
        QtGui.QGraphicsItem.__init__(self)

        self.graph = weakref.ref(graphWidget)
        self.edgeList = []
        self.set_index(pos)
        self.newPos = QtCore.QPointF()
        self.setFlag(QtGui.QGraphicsItem.ItemIsMovable)
        self.setFlag(QtGui.QGraphicsItem.ItemSendsGeometryChanges)
        self.setCacheMode(self.DeviceCoordinateCache)
        self.setZValue(-1)
        #
        self.temp = temp
        self.time = time
        x,y = self.map_temptime_to_pos()
        self.setPos(x,y)
        self.marker = False

    def type(self):
        return Node.Type

    def addEdge(self, edge):
        self.edgeList.append(weakref.ref(edge))

    def set_index(self, index):
        self.index = index
        self.label = "Step %d" % index
        self.setToolTip(self.label)

    def get_prev_edge(self):
        index = 1000
        edge = False
        for e in self.edgeList:
            sn = e().source().index
            dn = e().dest().index
            if sn < index:
                index = sn
                edge = e
            if dn < index:
                index = dn
                edge = e
        return edge

    def get_next_edge(self):
        index = -1
        edge = False
        for e in self.edgeList:
            sn = e().source().index
            dn = e().dest().index
            if sn > index:
                index = sn
                edge = e
            if dn > index:
                index = dn
                edge = e
        return edge

    def map_temptime_to_pos(self):
        x = self.time * self.graph().graph_width_ratio
        y = self.graph().size[3] - self.temp * self.graph().graph_height_ratio
        return (x,y)

    def boundingRect(self):
        adjust = 2.0
        return QtCore.QRectF(-10 - adjust, -10 - adjust,
                             22 + adjust, 23 + adjust)

    def paint(self, painter, option, widget):
        painter.drawLine(QtCore.QLineF(6,-40,6,-2))
        painter.setPen(QtCore.Qt.NoPen)
        painter.setBrush(QtCore.Qt.lightGray)
        painter.drawEllipse(-10, -10, 20, 20)
        gradient = QtGui.QRadialGradient(0, 0, 22)
        if option.state & QtGui.QStyle.State_Sunken: # selected
            gradient.setColorAt(0, QtGui.QColor(QtCore.Qt.darkGreen).lighter(120))
        else:
            gradient.setColorAt(1, QtCore.Qt.blue)
        painter.setBrush(QtGui.QBrush(gradient))
        painter.setPen(QtGui.QPen(QtCore.Qt.black, 0))
        painter.drawEllipse(-6, -6, 12, 12)

    def itemChange(self, change, value):
        if change == QtGui.QGraphicsItem.ItemPositionChange:
            for edge in self.edgeList:
                edge().adjust()
        return QtGui.QGraphicsItem.itemChange(self, change, value)

    def mousePressEvent(self, event):
        if not self.graph().inhibit_edit:
            self.update()
            print "Node pressed"
            QtGui.QGraphicsItem.mousePressEvent(self, event)

    def mouseReleaseEvent(self, event):
        if not self.graph().inhibit_edit:
            self.update()
            print "Node released"
            #
            QtGui.QGraphicsItem.mouseReleaseEvent(self, event)

###
class GraphWidget(QtGui.QGraphicsView):
    def __init__(self):
        QtGui.QGraphicsView.__init__(self)
        self.size = (-30, 30, 600, 400)
        #
        scene = QtGui.QGraphicsScene(self)
        scene.setItemIndexMethod(QtGui.QGraphicsScene.NoIndex)
        scene.setSceneRect(self.size[0],self.size[1],self.size[2],self.size[3])
        self.setScene(scene)
        self.setCacheMode(QtGui.QGraphicsView.CacheBackground)
        self.setRenderHint(QtGui.QPainter.Antialiasing)
        self.setTransformationAnchor(QtGui.QGraphicsView.AnchorUnderMouse)
        self.setResizeAnchor(QtGui.QGraphicsView.AnchorViewCenter)
        #
        self.maxtemp = 300
        self.maxtime = 160
        self.nodecount = 0
        self.calc_upper_limits()
        #
        self.scale(0.8, 0.8)
        self.setMinimumSize(600, 400)
        self.setWindowTitle(self.tr("Elastic Nodes"))
        self.inhibit_edit = False

    def calc_upper_limits(self):
        self.toptemp = (self.maxtemp / 100 + 1) * 100
        self.toptime = (int(self.maxtime) / 30 + 1) * 30
        self.graph_width_ratio = float(self.size[2]) /self.toptime
        self.graph_height_ratio = float(self.size[3]) / self.toptemp

    def add_node(self, time, temp, marker=False, pos=-1):
        self.nodecount += 1
        scene = self.scene()
        # Insert Node into scene
        node = Node(self, time, temp, self.nodecount)
        scene.addItem(node)
        # Insert new edges
        nodes = self.get_ordered_nodes()
        if len(nodes) > 1:
            e = Edge(nodes[-2], node)
            scene.addItem(e)
        # cleanup edge tooltips
        for n in self.get_ordered_nodes():
            edges = n.edgeList
            for e in edges:
                e().set_index()

    def get_ordered_nodes(self):
        nodes = [item for item in self.scene().items() if isinstance(item, Node)]
        nodes.sort(key=lambda n: n.index)
        return nodes

    def keyPressEvent(self, event):
        key = event.key()
        if key == QtCore.Qt.Key_Plus:
            self.scaleView(1.2)
        elif key == QtCore.Qt.Key_Minus:
            self.scaleView(1 / 1.2)
        else:
            QtGui.QGraphicsView.keyPressEvent(self, event)

    def mousePressEvent(self, event):
        print "GraphWidget mouse"
        QtGui.QGraphicsView.mousePressEvent(self, event)

    def wheelEvent(self, event):
        self.scaleView(math.pow(2.0, -event.delta() / 240.0))

    def scaleView(self, scaleFactor):
        factor = self.matrix().scale(scaleFactor, scaleFactor).mapRect(QtCore.QRectF(0, 0, 1, 1)).width()
        if factor < 0.07 or factor > 100:
            return
        self.scale(scaleFactor, scaleFactor)

    def drawBackground(self, painter, rect):
        sceneRect = self.sceneRect()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    widget = GraphWidget()
    widget.add_node(0,    25)
    widget.add_node(30,  100)
    widget.add_node(60,  200)
    widget.show()
    sys.exit(app.exec_()) 
```

这是父程序 - 它不获取鼠标事件：称为 test_toplevel.py

```
# import user interface etc
from PySide import QtCore, QtGui
from test_tabs_ui import Ui_Form
from test_subclass_module import *

import sys

Programs = {"Gen13": {"steps": [[0, 0, 0], [0, 30, 30], [0, 60, 60], [0, 77, 77]]
                      }}

###-----------------------------------------------------------
### The dialog
class Nusku_tab_Add_kiln(QtGui.QWidget):
    """ Create dialog to add/delete kilns from controlled kilns """
    def __init__(self, parent=None):
        # Get the UI loaded
        super(Nusku_tab_Add_kiln, self).__init__(parent)
        self.ui = Ui_Form()
        self.ui.setupUi(self)
        self.current = Programs['Gen13']
        # draw program in graphicsView
        # swap out the standin
        self.ui.graphLayout.removeWidget(self.ui.graphicsView)
        self.ui.graphicsView.setParent(None)
        self.ui.graphicsView.deleteLater()
        self.graph = GraphWidget()
        self.ui.graphLayout.addWidget(self.graph)
        self.draw_graph()

    def choose_program(self):
        pass

    def draw_graph(self):
        graph = self.graph
        graph.inhibit_edit = True
        steps = self.current['steps']
        for s in steps:
            print s
            graph.add_node(s[1],s[2])

###------------------------------------------------

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    prog = Nusku_tab_Add_kiln()
    prog.show()
    sys.exit(app.exec_()) 
```

为了完整起见。这是它导入的 ui 文件：test_tabs_ui.py

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'test_tabs.ui'
#
# Created: Wed Dec 05 15:20:02 2012
#      by: pyside-uic 0.2.14 running on PySide 1.1.1
#
# WARNING! All changes made in this file will be lost!

from PySide import QtCore, QtGui

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(595, 540)
        self.verticalLayout = QtGui.QVBoxLayout(Form)
        self.verticalLayout.setObjectName("verticalLayout")
        self.tabWidget = QtGui.QTabWidget(Form)
        self.tabWidget.setObjectName("tabWidget")
        self.Tab_Program = QtGui.QWidget()
        self.Tab_Program.setObjectName("Tab_Program")
        self.verticalLayout_2 = QtGui.QVBoxLayout(self.Tab_Program)
        self.verticalLayout_2.setObjectName("verticalLayout_2")
        self.frame_graph_status = QtGui.QFrame(self.Tab_Program)
        self.frame_graph_status.setFrameShape(QtGui.QFrame.StyledPanel)
        self.frame_graph_status.setFrameShadow(QtGui.QFrame.Raised)
        self.frame_graph_status.setObjectName("frame_graph_status")
        self.horizontalLayout_7 = QtGui.QHBoxLayout(self.frame_graph_status)
        self.horizontalLayout_7.setSpacing(0)
        self.horizontalLayout_7.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_7.setObjectName("horizontalLayout_7")
        self.frame_program = QtGui.QFrame(self.frame_graph_status)
        self.frame_program.setFrameShape(QtGui.QFrame.StyledPanel)
        self.frame_program.setFrameShadow(QtGui.QFrame.Raised)
        self.frame_program.setObjectName("frame_program")
        self.graphLayout = QtGui.QVBoxLayout(self.frame_program)
        self.graphLayout.setContentsMargins(-1, 0, -1, 0)
        self.graphLayout.setObjectName("graphLayout")
        self.graphicsView = QtGui.QGraphicsView(self.frame_program)
        self.graphicsView.setObjectName("graphicsView")
        self.graphLayout.addWidget(self.graphicsView)
        self.horizontalLayout_7.addWidget(self.frame_program)
        self.verticalLayout_2.addWidget(self.frame_graph_status)
        self.widget_prog = QtGui.QWidget(self.Tab_Program)
        self.widget_prog.setObjectName("widget_prog")
        self.prog_layout = QtGui.QGridLayout(self.widget_prog)
        self.prog_layout.setContentsMargins(4, 4, 4, 4)
        self.prog_layout.setSpacing(0)
        self.prog_layout.setContentsMargins(0, 0, 0, 0)
        self.prog_layout.setObjectName("prog_layout")
        self.verticalLayout_2.addWidget(self.widget_prog)
        self.tabWidget.addTab(self.Tab_Program, "")
        self.Tab_alarms = QtGui.QWidget()
        self.Tab_alarms.setObjectName("Tab_alarms")
        self.alarms_tab_layout = QtGui.QVBoxLayout(self.Tab_alarms)
        self.alarms_tab_layout.setObjectName("alarms_tab_layout")
        self.tabWidget.addTab(self.Tab_alarms, "")
        self.Tab_settings = QtGui.QWidget()
        self.Tab_settings.setObjectName("Tab_settings")
        self.settings_tab_layout = QtGui.QVBoxLayout(self.Tab_settings)
        self.settings_tab_layout.setObjectName("settings_tab_layout")
        self.tabWidget.addTab(self.Tab_settings, "")
        self.Tab_pid = QtGui.QWidget()
        self.Tab_pid.setObjectName("Tab_pid")
        self.verticalLayout_8 = QtGui.QVBoxLayout(self.Tab_pid)
        self.verticalLayout_8.setSpacing(0)
        self.verticalLayout_8.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout_8.setObjectName("verticalLayout_8")
        self.scrollArea_2 = QtGui.QScrollArea(self.Tab_pid)
        self.scrollArea_2.setWidgetResizable(True)
        self.scrollArea_2.setObjectName("scrollArea_2")
        self.scrollAreaWidgetContents_2 = QtGui.QWidget()
        self.scrollAreaWidgetContents_2.setGeometry(QtCore.QRect(0, 0, 569, 494))
        self.scrollAreaWidgetContents_2.setObjectName("scrollAreaWidgetContents_2")
        self.PID_tab_layout = QtGui.QVBoxLayout(self.scrollAreaWidgetContents_2)
        self.PID_tab_layout.setSpacing(0)
        self.PID_tab_layout.setContentsMargins(0, 0, 0, 0)
        self.PID_tab_layout.setObjectName("PID_tab_layout")
        self.scrollArea_2.setWidget(self.scrollAreaWidgetContents_2)
        self.verticalLayout_8.addWidget(self.scrollArea_2)
        self.tabWidget.addTab(self.Tab_pid, "")
        self.verticalLayout.addWidget(self.tabWidget)

        self.retranslateUi(Form)
        self.tabWidget.setCurrentIndex(0)
        QtCore.QMetaObject.connectSlotsByName(Form)
        Form.setTabOrder(self.tabWidget, self.graphicsView)
        Form.setTabOrder(self.graphicsView, self.scrollArea_2)

    def retranslateUi(self, Form):
        Form.setWindowTitle(QtGui.QApplication.translate("Form", "Form", None, QtGui.QApplication.UnicodeUTF8))
        self.graphicsView.setToolTip(QtGui.QApplication.translate("Form", "decimal point", None, QtGui.QApplication.UnicodeUTF8))
        self.graphicsView.setStatusTip(QtGui.QApplication.translate("Form", "Accuracy can be increased at lower temperatures", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.Tab_Program), QtGui.QApplication.translate("Form", "Program", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.Tab_alarms), QtGui.QApplication.translate("Form", "Alarms", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.Tab_settings), QtGui.QApplication.translate("Form", "Settings", None, QtGui.QApplication.UnicodeUTF8))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.Tab_pid), QtGui.QApplication.translate("Form", "PID", None, QtGui.QApplication.UnicodeUTF8)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:42:15.900

因为有一个答案——它合理地要求我删除我的答案——我必须用我自己的答案来回答这个问题才能关闭它。等待 3 天后......希望我可以删除它 - 但可能不是因为它有答案..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:40:06.013

我下载并尝试了您的应用程序，并看到它或多或少地工作（尽管光标位置在 test_toplevel.py 中出错）。

删除后`graph.inhibit_edit = False`光标也保持正确。

那么问题已经解决了吗？那么删除您的问题或将其设为已解决将非常有帮助。或者请澄清问题。

# php - 使用html ajax php 上传文件

> ID：13696179
> 
> 赞同：0
> 
> 时间：2012-12-04T04:39:03.190
> 
> 标签：php, html, ajax

以前我已经使用 get 或 post 方法通过 ajax 将 html 页面的数据提交到 php 页面。现在我想知道假设我的 html 页面具有以下方式的文件类型的输入标签

```
<input type="file" name="image_file" id="image_file" />
<input type="button" id="btn_crop" onclick="btbn_click()" /> 
```

现在我想在单击按钮后执行该操作，文件将通过 ajax 传输到“crop.php”。我不想使用 ajax 文件上传，因为我希望在将文件存储到服务器硬盘之前执行裁剪page.Now 任何机构都可以给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:13:37.397

您可能会发现这个[Nettuts+ 教程](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)很有帮助。那是用 AJAX 上传文件。现在，当文件传输到您的服务器时，它会自动存储在一个临时目录中，您可以在裁剪后从该目录中移动它等等。如果你愿意，你也可以尝试删除它，我不知道。

尝试使用 GD 函数进行裁剪。一个好的搜索可以解决问题。

希望我有所帮助。

# python - 轻松访问加载了 scipy 的 matlab 矩阵中的数据

> ID：13696182
> 
> 赞同：0
> 
> 时间：2012-12-04T04:39:18.753
> 
> 标签：python, numpy, scipy, mat-file, matlab-load

当我使用 scipy.io.loadmat 加载 .mat 文件时，我得到一个难以处理的数据结构，因为我必须猜测数据包含在结构的哪个级别。numpy 或 scipy 表示将所有内容包装在深层列表中。打印它通常没有帮助，因为它包含大量数据。例如：

```
from scipy.io import loadmat
mat = loadmat("data.mat")
val = mat["someattribute"] # not what I want, the data I can iterate over is one layer deeper (len(val) == 1)
val = mat["someattribute"][0] # len(val) is some big value 
```

有没有一些简单的方法可以访问这些东西而不必担心它们的表示？我最近从 python 2.6.6 切换到 2.7.3 并注意到 numpy/scipy 库中的表示发生了变化（因此我的代码中断了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:49:53.043

你也许可以逃脱

```
val = mat['someattribute'].ravel() 
```

如果您知道它是一维数据`val`或`np.array`

```
val = mat['someattribute'].squeeze() 
```

这将删除所有`len=1`尺寸[（文档）](http://docs.scipy.org/doc/numpy/reference/generated/numpy.squeeze.html)

# objective-c - Objective-C 中的 Wordnet

> ID：13696184
> 
> 赞同：6
> 
> 时间：2012-12-04T04:39:49.627
> 
> 标签：objective-c, macos, cocoa, wordnet

我知道 Wordnet 网页引用它带有 C 接口。但是，我在将它添加到我的项目中时遇到了很大的麻烦。我的问题是两方面的。

第一：机器是否需要安装 wordnet 才能使用 API（或者数据可以在运行时从 dict 文件中读取吗？因此分发到没有安装 wordnet 的机器上）

第二：如何在 C 项目中包含 Wordnet。我试过直接添加源文件，但它在 init() 上崩溃。我已经通过调试器，看起来它正在寻找从我的本地驱动器加载文件，而不是项目中包含的文件。对于没有安装 Wordnet 的机器（从第 1 部分开始），有没有办法防止这种情况发生。

感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:38:15.057

[除非我弄错了，并且您指的是不同的](http://www.mulle-kybernetik.com/software/WordNet/)WordNet，否则多年来一直有 Cocoa 前端可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T14:10:55.863

今天才发现这个。可能会有所帮助，因为它只需要添加 WordNet 的 sqlite.db 文件，并在 sqlite 调用上提供超薄的 Objective-C 包装器来与数据库对话。使用它作为您理解的模板应该允许您扩展它以允许各种查询。

[https://gist.github.com/atduskgreg/c30a5fb167f4c35d6f89](https://gist.github.com/atduskgreg/c30a5fb167f4c35d6f89)

编辑：通过上面的示例，您可以看到查询采用的格式。有了这些知识，您可以从以下网址获取 WordNet 数据库的 sqlite 文件： [https ://code.google.com/p/synonym/downloads/detail?name=wordnet30.1.tar.gz&can=2&q=](https://code.google.com/p/synonym/downloads/detail?name=wordnet30.1.tar.gz&can=2&q=)

然后要么只使用 SQLite 的 C 调用，要么选择更强大的 Objective-C 包装器，例如： [https ://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

# algorithm - 我们如何通过归纳证明二分查找是正确的？

> ID：13696185
> 
> 赞同：8
> 
> 时间：2012-12-04T04:39:55.480
> 
> 标签：algorithm, search, binary-search, proof

我很难理解如何使用归纳法和一些不变量来证明算法的正确性。即，如何找到不变量，何时使用归纳假设——尤其是对于二分搜索？我还没有找到一个直观的回应，所以我希望有人可以在这里对这个话题有所了解。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T05:59:41.853

假设二分查找是这样定义的：

```
def binary_search(a,b,e,x):
  n = e-b
  if n==0: return None
  m = b + int(n/2)
  if x<a[m]: return binary_search(a,b,m,x)
  if x>a[m]: return binary_search(a,m+1,e,x)
  return m 
```

在哪里

*   a 是值数组——假设已排序
*   [b,e) 是从 b 到 e 的范围，包括 b 但不包括我们正在搜索的 e。
*   x 是我们正在搜索的值

该函数的目标是返回 i 其中 a[i]==x 如果存在这样的 i 值，否则返回 None。

binary_search 适用于大小为零的范围：

*   证明：如果范围不包含任何元素，则 n==0 并且函数返回 None，这是正确的。

假设 binary_search 适用于从 0 到 n 的任意大小的元素范围，则二分搜索适用于大小为 n+1 的元素范围。

*   证明：

    因为数组是有序的，如果x < a[m]，那么对于所有k > m，x < a[k]。这意味着我们只需要搜索范围 [b,m)。范围 [b,m) 必然小于范围 [b,e)，并且我们假设二分查找适用于所有小于 n+1 的范围，因此它适用于 [b,m)。

    如果 x > a[m]，则适用类似的逻辑。

    如果 x==a[m]，那么函数将返回 m，这是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T15:15:58.757

假设排序后的数组是`a[0...n]`. 二分查找的工作原理是将这个数组递归地分成**三**部分，中间元素`m`，左边部分是所有元素`<= m`（因为数组是按假设排序的），右边部分是所有元素`>=m`（同样，因为数组按假设排序）。

**如何制定不变量？**

让我们首先考虑一下二分搜索是如何工作的。如果键（正在搜索的项目）是，`k`那么我将它与中间元素进行比较`m`。

1.  如果`k = m`，我找到了我的物品（无事可做）

2.  如果`k < m` *那么我确定如果`k`出现在 中`a`，则它不能出现在数组的正确部分，因为数组该部分上的所有元素都是`>= m > k`. 所以它必须出现（如果出现）在数组的左侧部分*。

3.  如果`k > m` *那我肯定知道*......

那么，在这样的递归计算的每一步，我们能**保证什么呢？**在每个步骤中，我们都可以识别两个索引`i, j`并声称*“如果`k`它是其中的一个元素，`a[0...n]`那么它必须出现在两者之间`i, j`”*。这是**不变量**，因为它适用于**所有**递归步骤，并且每一步都挤压此范围`i, j`，直到找到您的项目或此范围变为空（范围在 时为非空`i < j`）。

**感应是如何工作的？**

*   对于您采取的基本情况`i = 0, j = n`。不变量是微不足道的。

*   对于归纳步​​骤，假设不变量适用于某个递归步骤`p`where `i = i_p & j = j_p`。然后你必须证明对于下一个递归步骤，`i, j`更新使得不变量仍然成立。这是您必须使用上述步骤 2) 和 3) 中的参数的地方。

*   范围`i, j`严格递减，因此计算必须终止。

我错过了什么吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T05:38:53.400

```
/** Return an index of x in a.
 *  Requires: a is sorted in ascending order, and x is found in the array a
 *  somewhere between indices left and right.
 */
int binsrch(int x, int[] a, int left, int right) {
  while (true) {
    int m = (left+right)/2;
    if (x == a[m]) return m;
    if (x < a[m])
    r = m−1;
    else
    l = m+1;
  }
} 
```

关键的观察是 binsrch 以一种分而治之的方式工作，只在某种程度上“更小”的参数调用自己。

假设 P(n) 是 binsrch 对 right-left = n 的输入正确工作的断言。如果我们可以证明 P(n) 对所有 n 都是正确的，那么我们就知道 binsrch 对所有可能的参数都有效。

**基本情况。**在n=0的情况下，我们知道left=right=m。由于我们假设该函数只会在 x 在左右之间找到时才会被调用，所以 x = a[m] 的情况一定是这样，因此该函数将返回 m，即数组 a 中 x 的索引。

**感应步骤。**我们假设 binsrch 只要 left-right ≤ k 就可以工作。我们的目标是证明它适用于 left-right = k + 1 的输入。存在三种情况，其中 x = a[m]，其中 x < a[m] 和 x > a[m]。

```
 Case x = a[m]. Clearly the function works correctly.

    Case x < a[m]. We know because the array is sorted that x must be found between a[left] and a[m-1]. The n for the recursive call is n = m − 1 − left = ⌊(left+right)/2⌋ − 1 − left. (Note that ⌊x⌋ is the floor of x, which rounds it down toward negative infinity.) If left+right is odd, then n = (left + right − 1)/2 − 1 − left = (right − left)/2 − 1, which is definitely smaller than right−left. If left+right is even then n = (left + right)/2 − 1 − left = (right−left)/2, which is also smaller than k + 1 = right−left because right−left = k + 1 > 0\. So the recursive call must be to a range of a that is between 0 and k cells, and must be correct by our induction hypothesis.

    Case x > a[m]. This is more or less symmetrical to the previous case. We need to show that r − (m + 1) ≤ right − left. We have r − (m + 1) − l = right − ⌊(left + right)/2⌋ − 1\. If right+left is even, this is (right−left)/2 − 1, which is less than right−left. If right+left is odd, this is right− (left + right − 1)/2 − 1 = (right−left)/2 − 1/2, which is also less than right−left. Therefore, the recursive call is to a smaller range of the array and can be assumed to work correctly by the induction hypothesis. 
```

因为在所有情况下，归纳步骤都有效，我们可以得出结论 binsrch（及其迭代变体）是正确的！

请注意，如果我们在编码 x > a[m] 的情况下出错，并且将 m 作为 left 而不是 m+1 传递（很容易做到！），那么我们刚刚构建的证明在这种情况下将失败。事实上，当右 = 左 + 1 时，算法可能会进入无限循环。这显示了仔细归纳推理的价值。

参考：[http ://www.cs.cornell.edu/Courses/cs211/2006sp/Lectures/L06-Induction/binary_search.html](http://www.cs.cornell.edu/Courses/cs211/2006sp/Lectures/L06-Induction/binary_search.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T05:59:01.233

你应该证明在每一步二分查找之后`arr[first] <= element <= arr[last]`

从这个和终止您可以得出结论，一旦二进制搜索终止`arr[first] == element == arr[last]`

# objective-c - 使用 NSString stringWithFormat 的动态字符串格式

> ID：13696188
> 
> 赞同：9
> 
> 时间：2012-12-04T04:40:04.383
> 
> 标签：objective-c, ios, stringwithformat

我一直在尝试制作动态字符串格式，以便通过用户选项精度或填充可以在某种程度上由用户定义。

一个示例包括以 24 小时时间格式填充前导零。在正常时间格式中，小时可以用单个数字表示，也可以用零填充的数字表示。这以字符串格式表示：

```
...stringWithFormat:@"Hour: %02i", hour   // leading zero padded 
```

和

```
...stringWithFormat:@"Hour: %i", hour     // not leading zero padded 
```

我想要实现的是有一个包含`@""`or的变量，并将该变量显示在和`@"02"`之间的格式字符串中。`%``i`

我已经做了几个实验，但似乎无法做到这一点，并且开始认为这是不可能的`stringWithFormat`。

我试过了：

`...stringWithFormat:@"Hour: %%@i", padding, hour`

`...stringWithFormat:@"Hour: %@%i", padding, hour`

和别的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-04T04:47:17.413

有更好的方法来做到这一点。

```
... stringWithFormat:@"Hour: %0*i", length, hour]; // note the asterisk 
```

`length`你想要的位数在哪里。用于`1`获得无前导零，用于`2`根据需要获得带前导零的 2 长度。

仅供参考 - 要解决您最初尝试的问题，您需要分两步完成：

```
NSString *dynFmt = [NSString stringWithFormat:@"Hour: %%%@i", padding];
NSString *res = [NSString stringWithFormat:dynFmt, hour]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T04:46:50.967

使用两个步骤：

```
 NSString* hourString=nil;
    if(...){
         hourString=[NSString stringWithFormat:@"%i", hour];
    }else{
         hourString=[NSString stringWithFormat:@"%02i", hour];
    }
    NSString* result=[NSString stringWithFormat:@"Hour: %@", hourString]; 
```

以下被认为是不好的做法：

```
 NSString* formatString=nil;
    if(...){
         formatString=@"Hour: %i";
    }else{
         formatString=@"Hour: %02i";
    }
    NSString* result=[NSString stringWithFormat:formatString, hour]; 
```

因为拥有一个变量 formatString 是非常危险的，它可以用于多种类型的破解者攻击。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T04:47:43.570

我认为你可以在一个完全独立的阶段建立你的格式，然后使用它。此外，不要忘记转义其中一个 % 以使其成为文字。

```
NSString *format = [NSString stringWithFormat:@"%%%@i", padding];
NSString *result = [NSString stringWithFormat:@"Hour: %@", format]; 
```

更新：哎呀，麦迪的回答指出了我的一个问题：要转义 %，您应该使用 %%，而不是 \%。答案已更新。

# matlab - MATLAB 中是否存在指针或引用？

> ID：13696189
> 
> 赞同：2
> 
> 时间：2012-12-04T04:40:05.773
> 
> 标签：matlab

我正在尝试优化这段代码。这是简化版本（不是实际代码）。

```
for i = 1:1000000
  a(i).x = a(i).x+1;
  a(i).y = a(i).y*2;
  a(i).f = i:i+128;
end 
```

我知道我是否尊重 a(i) 一旦它会更快。如下所示：

```
for i = 1:1000000
  b = a(i);
  b.x = b.x+1;
  b.y = b.y*2;
  b.f = i:i+128;
  a(i) = b;
end 
```

在这里，我将 a(i) 复制到 b 并在最后复制回 a(i)。是否可以只定义一个指向 a(i) 的指针？类似于 C++ 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:10:23.727

MATLAB 的`handle`数据类型类似于其他语言中的引用，但我认为这在这里不合适。

我在这里建议的主要优化是使用大型数组结构，而不是大型结构数组。换句话说，您的代码可能看起来更像这样：

```
for i = ...
    a.x(i) = a.x(i) + 1;
    ...
end 
```

这种方法通常速度更快，内存效率更高。

# c++ - 如何捕获从类的全局实例的构造函数抛出的异常？

> ID：13696194
> 
> 赞同：14
> 
> 时间：2012-12-04T04:40:44.643
> 
> 标签：c++, exception-handling, constructor, global

我知道拥有全局变量是不受欢迎的。但是在 Bjarne Stroustrup 所著的《C++ 编程语言》一书中，作者说“在从非本地静态对象的初始化程序抛出的情况下获得控制的唯一方法是 set_unexpected()”。它是如何完成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T13:10:34.900

我在其他一些论坛上发布了这个问题并得到了一些答案。

第一个是声明一个指针而不是拥有一个对象并在 main() 中初始化它

第二个是从另一个执行 set_terminate 的类派生类（其构造函数抛出异常），以便设置有意义的处理程序。第二个似乎在代码块 ide 中运行良好。

我用来测试的代码是：

```
void f()        //Unexpected exception handler
{
    cout<<"Terminate called "<<endl;
    exit (0);
}
class A         //Base class that performs set_unexpected
{
    terminate_handler h;
public:
    A()
    {
        h=set_terminate(f);
    }
    ~A()
    {
        set_terminate(h);
    }
};
class B:public A    //Derived class that throws unexpected_exception
{
public:
    B()
    {
        throw 1;
    }
};
B b;
int main()
{
} 
```

程序显示消息：“Terminate called”并退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:16:02.090

`try/catch`块在功能范围内或与功能范围一起。因此，全局对象不能驻留在`try/catch`范围内，因此您**永远无法** *捕获*这些异常。

您可以探索特殊`try/catch`语法：

```
class Test {
public:
  Test ()
  try { throw 0; }
  catch(...) {}
}; 
```

这为处理此类异常提供了一些缓解。这是[一个](https://stackoverflow.com/questions/2026287/exception-handling-before-and-after-main)讨论相同问题的线程。
但是，您必须为您声明全局对象的每个类提供这样的语法

您可能想知道，如果您将`try/catch`其放入构造函数本身，有什么区别？好吧，如果一个全局对象初始化失败，那么内部`try/catch`会默默地*吸收*它，这很糟糕。
但是上面的语法会给你一个错误诊断的机会，然后再次抛出异常，这将终止程序。
[有关更多详细信息，请参阅此线程](https://stackoverflow.com/questions/6756931/difference-between-try-catch-syntax-for-function)。

另一方面，[`std::unexpected()`](http://www.cplusplus.com/reference/exception/unexpected/)在不适合`catch()`抛出异常时调用。此功能是标准功能，但您可以使用[`std::set_unexpected()`](http://www.cplusplus.com/reference/exception/set_unexpected/).

# java - 在 Java 中“认可”一个库是什么意思？

> ID：13696196
> 
> 赞同：3
> 
> 时间：2012-12-04T04:41:00.547
> 
> 标签：java

我是一名 Java 新手，并阅读了一篇文章 (https://wiki.shibboleth.net/confluence/display/OpenSAML/OSTwoUsrManJavaInstall)，其中指出唯一可以工作的 JAXP 提供程序是 Apache Xerces 和 Xalan 项目，我必须支持不同的 JAXP。

在 Java 中“认可”一个库是什么意思？

我最熟悉 c/c++/c#。在任何这些环境中，等效的操作是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T04:54:09.063

好吧，您可能会将 JAR 视为 DLL（大多数情况下，即使它们在许多方面有所不同）。现在，如果在您的项目中发现两个具有相同代码库但不同版本的不同 JARS 会发生什么（这里不同的版本意味着 API 的不同版本）。

现在这可能会导致冲突。当您使用 Web 服务和 XML 解析器时，这些冲突尤其明显。

因此，当某些 Web 服务框架要求您“认可”一个 jar 时，这意味着您需要将其放入 JDK Endorsed 文件夹中 -

> \lib\endorsed [Microsoft Windows] /lib/endorsed [Solaris 或 Linux]

这里 JAVA-HOME 是安装 JDK 的地方。

注意 - 此功能应谨慎使用，可能会产生意想不到的后果。

延伸阅读——

*   [http://docs.oracle.com/javase/1.5.0/docs/guide/standards/index.html](http://docs.oracle.com/javase/1.5.0/docs/guide/standards/index.html)
*   [在jdk1.6中使用Endorsed目录的确切方法是什么](https://stackoverflow.com/questions/2859471/what-is-the-exact-way-to-use-endorsed-directory-in-jdk1-6)

# wso2esb - 如何并行运行序列调解器

> ID：13696197
> 
> 赞同：2
> 
> 时间：2012-12-04T04:40:59.953
> 
> 标签：wso2esb

我正在尝试使用 wso2 esb 4.0.3 上的序列中介器创建序列以调用 2 另一个序列。我的序列信息如下：当我尝试运行它时。当第一个序列出错时，我遇到问题，第二个序列无法运行。我想当第一个序列出错时，第二个序列可以单独运行。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:20:04.227

这可以使用WSO2 ESB 中的[克隆中介来完成。](http://docs.wso2.org/wiki/display/ESB451/Clone+Mediator)下面的克隆中介配置会将一条消息拆分为两条消息，这两条消息将发送到两个序列（test1 和 test2）。然后消息将按两个顺序并行处理。

```
<clone>
    <target sequence="test2"/>
    <target sequence="test1"/>
</clone> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:56:52.327

我曾经使用过`<clone>`（就像 CHarithaM 回答的那样），但这会杀死你的事务（即 JMS）等。所以我更喜欢使用**带有两个消费者的 JMS 主题**。然后它们都有自己的 messageContext 并以适当的方式完全独立运行。

# security - 排除 web.xml 安全约束中的 css 和图像资源

> ID：13696204
> 
> 赞同：6
> 
> 时间：2012-12-04T04:42:24.067
> 
> 标签：security, jsf, jakarta-ee, facelets, web.xml

我正在使用 JSF2.1 和 Glassfish 3.1.2。

我指定了一个安全约束来阻止一切：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Secured Content</web-resource-name>
        <!-- Block all -->
        <url-pattern>/*</url-pattern>
    </web-resource-collection>

    <!-- only users with at least one of these roles are allowed to access the secured content -->
    <auth-constraint>
        <role-name>ADMINISTRATOR</role-name>
    </auth-constraint>
</security-constraint> 
```

并有另一个允许访问页面和资源的子集：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Open Content</web-resource-name>
        <!-- Allow subscribe -->
        <url-pattern>/subscribe/*</url-pattern>
        <url-pattern>/javax.faces.resource/*</url-pattern>
    </web-resource-collection>
    <!-- No Auth Contraint! -->
</security-constraint> 
```

这工作正常。但是，以下是

```
<url-pattern>/javax.faces.resource/*</url-pattern> 
```

允许所有资源的正确方法？

我只是通过查看 Facelets 注入 xhtml 的 url 来做到这一点的。这种方法是否存在安全漏洞？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T11:02:40.033

它必须是[`ResourceHandler#RESOURCE_IDENTIFIER`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#RESOURCE_IDENTIFIER)常量的值。另请参阅它的[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#RESOURCE_IDENTIFIER)：

> # `RESOURCE_IDENTIFIER`
> 
> `public static final java.lang.String RESOURCE_IDENTIFIER`
> 
> `Resource#getRequestPath`返回此常量的值作为 URI 的前缀。[`handleResourceRequest(javax.faces.context.FacesContext)`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#handleResourceRequest%28javax.faces.context.FacesContext%29)在请求 URI 中查找此常量的值以确定请求是资源请求还是视图请求。
> 
> ### 也可以看看：
> 
> [常量字段值](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.application.ResourceHandler.RESOURCE_IDENTIFIER)

[常量字段值](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.application.ResourceHandler.RESOURCE_IDENTIFIER)表示以下内容：

```
public static final java.lang.String    RESOURCE_IDENTIFIER    "/javax.faces.resource" 
```

因此，您对 URL 模式是绝对正确的。没有安全漏洞，前提是您没有将敏感信息放在`/resources`由 JSF 资源处理程序处理的公共 Web 内容的文件夹中。

# c# - 我可以使用 DirectoryEntry 列出 IIS Express 中的站点吗

> ID：13696206
> 
> 赞同：1
> 
> 时间：2012-12-04T04:42:31.530
> 
> 标签：c#, iis-express

我在 Windows XP 上。我们有 Windows 2008 服务器。需要运行 IIS Express，直到我们为真正的 IIS 7.X 获得具有更新版本的本地操作系统的工作站或虚拟机。

在 IIS Express 下运行 c# 代码时，可以使用 DirectoryEntry 列出我的站点和虚拟目录吗？我有在 IIS Express 下设置虚拟目录的示例，所以我想我已经介绍过了。现在我想列出它们以确保它们存在。

任何人都知道如何在 C# 中做到这一点？只是我一直在尝试的一小部分导致 com 异常......

```
DirectoryEntry iisServer = new DirectoryEntry("IIS://localhost/W3SVC/1");
DirectoryEntry folderRoot = iisServer.Children.Find("Root", "/");
var children = folderRoot.Children; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:08:38.977

你可以试试这样的

```
void ListVirtualDirectories(string serverName, int siteId)
{            
       DirectoryEntry iisServer = new DirectoryEntry("IIS://" + serverName + "/W3SVC/" + siteId + "/ROOT");

       foreach (DirectoryEntry webDir in iisServer.Children)
       {
           if (webDir.SchemaClassName.Equals("IIsWebVirtualDir"))
               Console.WriteLine("Found virtual directory {0}", webDir.Name);
       }
} 
```

# jquery - 如何保持 Jquery 下拉菜单向下？

> ID：13696207
> 
> 赞同：1
> 
> 时间：2012-12-04T04:42:30.610
> 
> 标签：jquery, drop-down-menu

当我将鼠标从按钮上移到实际菜单上时，我无法弄清楚如何使菜单保持向下。我正在使用 jquery 向下滑动功能。

```
<script>
function drop(elid) {
    var element = document.getElementById(elid);
    $(element).slideDown("fast");
}

function raise(elid) {
    var element = document.getElementById(elid);
    $(element).slideUp("fast");
}
 </script> 
```

HTML 看起来有点像这样。

```
<a href="menu.php" onMouseOver="drop('drop_down')" onMouseOut="raise('drop_down')">Click Here</a>

<div id="drop_down">Menu</div> 
```

如果这没有意义，则指向该站点的实际链接是 albionsteakhouse.com。当鼠标在菜单上时，我希望菜单保持向下。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:14:22.620

而不是`$(element).slideDown`你应该尝试`$(element).show();`

# python - 输入未指定的 raw_input 时如何中断循环？

> ID：13696208
> 
> 赞同：0
> 
> 时间：2012-12-04T04:42:38.503
> 
> 标签：python, while-loop, raw-input

我想使用 while 循环和 raw_input 编写一个接口。

我的代码如下所示：

```
while True:
    n = raw_input("'p' = pause, 'u' = unpause, 'p' = play 's' = stop, 'q' = quit)
    if n.strip() == 'p':
        mp3.pause()
    if n.strip() == 'u':
        mp3.unpause()
    if n.strip() == 'p':
        mp3.play()
    if n.strip() == 's':
        mp3.stop()
    if n.strip() == 'q':
        break 
```

但是，如果我输入 raw_input 中未指定的任何内容，我希望它中断。

```
 if not raw_input:
        break 
```

返回和 IndentationError: unindent 不匹配任何外部缩进级别。

```
 if not raw_input:
            break 
```

不返回任何错误，但不能按我的意愿工作。据我所知，它根本没有任何作用。

另外，如果有一种更简洁的方式来编写我的循环，我很乐意听到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:51:31.750

我认为您可以使用 dict 来保存所有功能是一种更清洁的方式。

```
func_dict = {
    'pause': mp3.pause,
    'unpause': mp3.unpause,
    'play': mp3.play,
    'stop': mp3.stop,
}

while True:
    n = raw_input("'p' = pause, 'u' = unpause, 'p' = play 's' = stop, 'q' = quit")
    if n.strip() in func_dict.keys():
        func_dict[n]()
    else:
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:54:24.473

您收到缩进错误，因为您没有结束双引号。

```
n = raw_input("'p' = pause, 'u' = unpause, 'p' = play 's' = stop, 'q' = quit") 
```

如果你想在有任何其他值的情况下让 while 看起来中断，那么将所有条件放入 elif 语句中，并在末尾添加一个包含所有内容的 else。此外，我只是将 lower 和 strip 放在 raw_input 语句的末尾。

```
while True:
    n = raw_input("'p' = pause, 'u' = unpause, 'pl' = play 's' = stop, 'q' = quit").strip().lower()
    if n == 'p':
        mp3.pause()
    elif n == 'u':
        mp3.unpause()
    elif n == 'pl':
        mp3.play()
    elif n == 's':
        mp3.stop()
    elif n == 'q':
        break
    else:
        break 
```

您也可以将所有有效的答案选项放入字典中，但看起来您应该从简单的解决方案开始来理解流程。您还使用 ap 播放和暂停。你会想要使用一个独特的价值来区分，所以我添加了“pl”来玩。

# c# - 如何在gridview中获得点击项目

> ID：13696210
> 
> 赞同：1
> 
> 时间：2012-12-04T04:42:41.920
> 
> 标签：c#, xaml, windows-8

我想在我的gridview中获取被点击的项目，但是由于某种原因我不能使用itemclick事件，在获取项目之后，我还想将它转换为项目持有的对象。gridview 有 DataTemplate，当我在点击事件中看到 e.OriginalSource 值时，它是一个 TextBlock。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:01:00.457

我在这里回答了一个类似的问题：

[Windows 8 Metro：如何获得点击的 GridViewItem？](https://stackoverflow.com/questions/11781836/windows-8-metro-how-to-get-clicked-gridviewitem/12229508#12229508)

如果您尝试获取用户单击的项目的 GridViewItem 对象，则可以使用 GridView 的 ItemContainerGenerator.ContainerFromItem 方法由 GridView 的 ItemClick 事件捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-17T07:14:38.687

第 1 步：启用 IsTapEnabled="True" 并在 Gridview 中创建 Tapped 事件

```
<GridView x:Name="categoryItemsGV"
                                Margin="5,5,0,0"
                                IsItemClickEnabled="True" IsTapEnabled="True" Tapped="categoryItemsGV_Tapped"
                                SelectionMode="Single" 
```

第 2 步：此 GridView 与**TableModel**列表绑定，并在 Tapped Event 下方

```
 private void categoryItemsGV_Tapped(object sender, TappedRoutedEventArgs e)
        {
            var selectedTableModel= (TableModel)(sender as GridView).SelectedItem;

        } 
```

这个**selectedTableModel**包含选定项目模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:38:59.933

`DataContext`你的`TextBlock`就是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:11:57.873

您可以尝试使用附加行为（即[WinRT 行为](http://winrtbehaviors.codeplex.com/)）并使用它将点击事件中继到视图模型中的命令

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T04:59:13.703

您可以使用控件 ListView 的“onItemInvoked”事件，如下代码：

```
//item click handler for list view
document.getElementById("yourListViewId").addEventListener("iteminvoked", function(e) {
    e.detail.itemPromise.then(function (invokedItem) {
         WinJS.Navigation.navigate("url to another pages", { objectToTransfer: invokedItem.data });
        });
}); 
```

使用“invokedItem.data”传递 ListViewItem 保存的整个对象数据

# c++ - 制作一个随机数稀有系统，但它不起作用

> ID：13696211
> 
> 赞同：0
> 
> 时间：2012-12-04T04:42:48.423
> 
> 标签：c++

> **可能重复：**
> [如何在 switch 语句中选择一系列值？](https://stackoverflow.com/questions/9432226/how-do-i-select-a-range-of-values-in-a-switch-statement)
> [c++ 不能出现在常量表达式中|](https://stackoverflow.com/questions/13354644/c-cannot-appear-in-a-constant-expression)

我要做的是生成一个随机数，并根据数字的值写出“常见”、“稀有”或“非常稀有”。有人可以帮助我吗？

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int main()
{
    int a;
    srand(time(0));
    a = 1 + (rand()%10);

    switch (a)
    {
        case (a >= 0 && a <= 5):
        cout << "Common";
            break;

        case (a >= 6 && a <= 8):
        cout << "Rare";
            break;

        case (a >= 9 && a <= 10):
        cout << "Very rare";
            break;

        default:
            break;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T04:46:24.800

您不能在 switch case 中使用比较运算符。尝试这个：

```
 switch (a)
    {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
        cout << "Common";
            break;

        case 6:
        case 7:
        case 8:
        cout << "Rare";
            break;

        case 9:
        case 10:
        cout << "Very rare";
            break;

        default:
            break;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:58:41.927

If you want to check ranges I recommend you to use the if statement to avoid using a list of all possible values:

```
if (a >= 0 && a <= 5)
    cout << "Common";
else if (a >= 6 && a <= 8)
    cout << "Rare";
else if (a >= 9 && a <= 10)
    cout << "Very rare"; 
```

# python - 如何告诉类方法等到来自 QDialog 类方法的信号被捕获？

> ID：13696212
> 
> 赞同：2
> 
> 时间：2012-12-04T04:42:48.190
> 
> 标签：python, multithreading, qt, pyqt, pyside

我有以下代码：

```
class Functions(QObject):

    mysig = Signal(filename)

    def __init__(self, parent=None):
        super(Functions, self).__init__(parent)
        self.result = None

    def showDialog(self, filename):
        self.mysig.emit(filename)

    def grabResult(self):

        while not self.result:
            time.sleep(5)

        return result #this is the question

    def setResult(self, result):
        self.result = result 
```

代码的另一部分是这样的：

```
class Dialog(QDialog):

    anotherSig = Signal(str)
    fun = Functions()

    def __init__(self, parent=None, filename=filename):
        self.filename = filename
        #Here it displays a picture based on the filename parameter

    def okButtonClicked(self):
        text = self.lineedit.text()
        fun.setResult(text)
        #Tried also this:
        self.anotherSig.emit(text) 
```

该类`Functions()`是从工作人员`QThread`（此处未显示）调用的。

我想我的问题是这样的：我如何告诉我的`Functions`班级用户已经输入了文本并单击了 OK 按钮？我尝试连接该`anotherSig`信号，但是当我尝试这样做时，Qt 抱怨 QPixmaps 从不同的线程设置不安全，并且它不起作用。

我在这里使用的方法“有效”，但我觉得它不是很可靠。另外，它仅在`Functions`类中的所有相关方法都有效时才有效`@classmethod`- 这样，由于某种原因，它不起作用。被`setResult`调用（我添加了一个`print`声明以确保），但`grabResult`仍然显示`self.result`为`None`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:06:49.363

使用`time.sleep`会导致您的应用程序冻结。让你的班级等待的一种方法是`QEventLoop`这样使用：

```
loop = QEventLoop()
myDialog.mySignal.connect(loop.quit)
loop.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:33:44.143

此代码不起作用，因为调用`showDialog`发生在对象的实例化上，该`Functions`对象是另一个线程上关闭的任何对象的属性。您设置结果的`fun`in`Dialog`是不同的实例化。

要将结果移回原始`Functions`对象，我认为您需要将对象连接到要获取结果`anotherSig`的`Dialog`对象上的`setResult`函数。`Functions`

做这样的事情（很难在没有大量样板的情况下进行测试）。

```
class Functions(QObject):

    mysig = Signal(filename,Functions)

    def __init__(self, parent=None):
        super(Functions, self).__init__(parent)
        self.result = None

    def showDialog(self, filename):
        self.mysig.emit(filename,self)

    def grabResult(self):

        while not self.result:
            time.sleep(5)

        return result #this is the question

    @QtCore.Slot(str)
    def setResult(self, result):
        self.result = result

def connection_fun(filename,fun):
    d = Dialog(filename)
    # what ever else you do in here
    d.anotherSig.connect(fun.setResult)) 
```

# ios - 了解 iOS 中的视图层次结构

> ID：13696213
> 
> 赞同：0
> 
> 时间：2012-12-04T04:43:07.323
> 
> 标签：ios, uiviewcontroller

我熟悉 UITabBarController 和 UINavigationController 范例，您可以在其中为不同的选项卡提供新的视图控制器，或者推送/弹出新的视图控制器。我不熟悉的是像 Flipboard 这样的应用程序。Flipboard 将向我展示 3 个故事的预览。如果我点击其中一个故事，我看到的过渡基本上就是占据屏幕的故事。为了做这样的事情，我想知道你设置了什么样的视图层次结构。我最初的直觉是把观点叠加在一起，然后隐藏和展示一个。我不喜欢这种方法的一点是它看起来很混乱，尤其是当 IB 中有很多元素相互重叠时。有没有更好的办法？创建一个新的viewController并做类似的事情会更好吗

```
- (IBAction)showDetailView:(id)sender {
   [self.view addSubview:detailController.view]; // have the detailController.view as an ivar so we can reference it later
}

- (IBAction)removeDetailView:(id)sender {
   [detailControllerIvar.view removeFromSuperview];
} 
```

对不起，如果这是一个基本问题。我不太熟悉我不只是使用 ViewController 来通过推送/弹出、tab 按下、显示模式等来显示它自己的视图的情况。我不太熟悉的 addSubview 并没有'不知道这是好的还是坏的做法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:50:13.507

你想使用`transitionFromViewController:toViewController`. 它负责添加/删除子视图。这将是一个例子......

```
[self addChildViewController:toViewController];
[fromViewController willMoveToParentViewController:nil];

[self transitionFromViewController:fromViewController
                  toViewController:toViewController
                          duration:1.0f
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{}
                        completion:^(BOOL completed){
                            [fromViewController removeFromParentViewController];
                            [toViewController didMoveToParentViewController:self];
                        }]; 
```

# c - 在C中将指针转换为不同的类型

> ID：13696218
> 
> 赞同：4
> 
> 时间：2012-12-04T04:43:34.833
> 
> 标签：c, type-conversion, c99

```
int i = 42;
int *p1 = &i;
int long *p2 = (long*)p1; 
```

这是未定义的行为吗？在 C++ 中，我认为出于某种原因它是实现定义的行为。

我查看了 C 标准：

> C99 6.3.2.3/7 指向对象或不完整类型的指针可以转换为指向不同对象或不完整类型的指针。如果结果指针未正确对齐 57) 指向的类型，则行为未定义。否则，当再次转换回来时，结果将等于原始指针。
> 
> 57) 一般来说，“正确对齐”的概念是可传递的：如果指向类型 A 的指针正确对齐指向类型 B 的指针，而指向类型 B 的指针又正确对齐指向类型 C 的指针，则指向类型 A 的指针是为指向 C 类型的指针正确对齐。

在实践中，术语正确对齐是什么意思？你怎么知道你是否正确地执行了它而不进入未定义的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T04:47:55.770

这基本上意味着，如果`int`对齐到 4 个字节，并且`int long`对齐到 8 个字节，那么行为是未定义的。假设你有类似的东西：

```
 0x04     0x08    0x0C    0x10
+------+-------+-------+-------+
|      |       |   i   |       |
+------+-------+-------+-------+ 
```

在这种情况下，`&i == 0x0C`（这是有效的，因为`int`对齐到 4 个字节）。当您`int long*`转换为 时，指针将转换为对齐的：`p2 == 0x08`，因为我们的理论系统对齐`int long`到 8 个字节，所以如果您取消引用，您基本上会读取一个您不拥有的地址`p1`，因此未定义的行为。

# java - 我们应该在哪里放置 HBM 文件？

> ID：13696220
> 
> 赞同：0
> 
> 时间：2012-12-04T04:44:10.903
> 
> 标签：java, hibernate

我们有一个 5 到 8 人的团队，我们的项目正在使用 Hibernate (ORM)，但我们面临一些与 HBM 文件和相应的 VO（值对象）相关的问题。实际上，我们都在开发不同的模块，我们都在创建 HBM 文件，并且根据我们的模块有各自的 VO（所以我们有我们的 HBM 文件和特定于我们模块的 VO）。如果在多个模块中使用公共表，那么我们有多个 HBM 文件及其用于该单个表的 VO。因此，即使我们有多个 HBM 和 VO，我们是否应该将所有 HBM 文件和 VO 放置到特定位置或保持它们特定于模块。请同时提出好的或坏的做法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:55:36.010

从查询看来，每个模块都有自己的数据访问权限。如果它不是很复杂，您可以将所有数据访问放在单独的模块中。一个项目可以有多个模块，但应该有一个数据访问的地方。

*   正如建议的那样，您可以拥有一个只对数据相关操作的 DAO 模块。包可用于识别不同的 DAO 类型。

*   通用 DAO 应该保持简单。业务逻辑不应该参与其中。逻辑应该在更高的层次上处理。

除此之外 ：-

*   您的项目应该结构合理，即包应该明确定义。

> module1/src/../com/../../bl
> module2/src/../com/../../b0
> 
> dataacess/src/../com/../../bl
> dataacess/src/../com/../../bo

*   应该清楚地推断依赖关系。如果你有一个 DAO 模块，那么 DAO 应该是独立的。其他模块应该依赖于 DAO。如果它的 java 你可以使用 maven 来做到这一点。

最后是我们做出的选择。会有很多最佳实践。您应该选择最适合您的方案的内容。最后，它应该在未来变得简单且易于管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:55:00.500

应该有一个`common project`包含所有与 DAO 相关的东西。每个模块/项目将在其类路径中包含该 commonDAO 项目，以执行休眠和数据库相关操作。这将克服 HBM 文件的重复性并易于维护代码。

# visual-c++ - 如何在 Windows 命令提示符中将 command2 的输出作为 command1 的输入传递

> ID：13696221
> 
> 赞同：2
> 
> 时间：2012-12-04T04:44:18.010
> 
> 标签：visual-c++, unix, sua

在我的程序中，我必须使用`diff`SUA 的命令来找出 2 个文件的区别。

我使用 a 命令如下，

```
diff xx yy 
```

这里

```
xx - /a/s/xx.txt

yy - /a/s/yy/txt 
```

`xx.txt`和的路径为`yy.txt`Windows 格式。但在 SUA 'diff' 命令中，接受 UNIX 格式的路径`/dev/fs/C/a/s/xx.txt`和`/dev/fs/C/a/s/yy.txt`.

我们有一个`winpath2unix`将路径转换为 ​​Unix 格式的命令。所以我想`diff`在我的程序中使用如下命令，

```
diff 'winpath2unix xx' 'winpath2unix yy' 
```

这里我想先运行`winpath2unix`command，需要将这些命令的输出传递给`diff`command。

在 C shell 中它工作正常。但是在命令提示符下它不起作用。

是否有任何选项可以运行此命令？

或者我如何`csh`在 CreateProcess 中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:05:13.057

如果通过命令提示符，您的意思是`cmd.exe`，有一个技巧可以帮助您，它使用`FOR`命令在批处理文件中设置变量。所以你会创建一个看起来像这样的批处理文件

```
@ECHO OFF
FOR /F "tokens=1 delims=" %%A in ('winpath2unix %1') do SET xxWinPath=%%A
FOR /F "tokens=1 delims=" %%A in ('winpath2unix %2') do SET yyWinPath=%%A
diff xxWinPath yyWinPath 
```

如果我们调用此批处理文件`doDiff.bat`，您将使用语法调用它`doDiff.bat xx yy`。

这种技术的另一个描述是[here](http://justgeeks.blogspot.com/2008/07/save-output-of-dos-command-to-variable.html)。[Raymond Chen在这里](http://blogs.msdn.com/b/oldnewthing/archive/2007/05/11/2532913.aspx)也演示了类似的技术。官方文档位于[MSDN的](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/for.mspx?mfr=true)**Iterating and file parsing**标题下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:16:28.370

我想我在其他论坛上找到了您的问题。:)

用于`-c`将命令作为参数发送给 tcsh，如果路径 winpath 打印包含空格的路径，则 "" 用于引用双引号。

```
LPTSTR cmd[] = _tcsdup(TEXT("C:\\Windows\\posix.exe /u /c /bin/tcsh -c \"/bin/diff \"\"`winpath2unix /x/xx.txt`\"\" \"\"`winpath2unix /x/yy.txt`\"\"\""));

int RetVal = CreateProcess(NULL,
                           cmd,
                           NULL,
                           NULL,
                           TRUE,
                           NORMAL_PRIORITY_CLASS,
                           NULL,
                           NULL,
                           &sInfo,
                           &pInfo);
DWORD error = GetLastError(); 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682425 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)

# java-me - 检查文件是否存在，在 J2ME 中下载并保存文件

> ID：13696224
> 
> 赞同：0
> 
> 时间：2012-12-04T04:44:28.650
> 
> 标签：java-me, nokia, j2mepolish

我想编辑我的问题。

如果文件仍然不存在，请下载并保存，这就是我的情况。要检查文件是否存在，我已尝试使用此代码

```
private boolean isXmlFileExist(){
    try{
        FileConnection fCon = (FileConnection) Connector.open("file:///"+Resource.XML_PATH + "/" + Resource.XML_FILENAME, Connector.READ);
        return fCon.exists();
    }catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

在我的资源类中

```
public static final String XML_PATH = "/xml";
public static final String XML_FILENAME = "template.xml"; 
```

我在 res 文件夹下创建了“xml”文件夹，并将文件“template.xml”放在那里。但是这段代码总是返回 false。是否不能使用 res 文件夹？那么，正确的路径是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:53:35.090

文件`res`夹下的文件始终可用，因为它们与类文件打包在一起。因此，您无需检查`FileConnection`它们是否存在。
要访问这些文件，您可以使用[`Class.getResourceAsStream`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/java/lang/Class.html#getResourceAsStream%28java.lang.String%29).
例如：

```
private InputStream open (String fileName) {
  return getClass().getResourceAsStream(fileName);
}

// call it like this
open(Resource.XML_PATH + "/" + Resource.XML_FILENAME); 
```

# javascript - JS "for in" 错误 IE7/8

> ID：13696226
> 
> 赞同：1
> 
> 时间：2012-12-04T04:44:44.963
> 
> 标签：javascript, jquery, validation

我正在为我的网站中的某些表单使用 jquery 验证插件。但是其中一个表单的验证仅在 IE7 和 8 上不起作用。但是使用相同验证脚本的其他表单可以工作。我尝试调试，发现问题出在 showErrors 部分，当我使用“for in”JS 循环通过 errorMap 时，显示对象不支持错误。知道如何解决这个问题吗？

这是我得到的 HTML

```
<form name="donate" id="form1" action="https://www.xxxx.xxx.xx/api/help" method="POST" target="_top">     
            <input type="hidden" name="face" id="faceinput" style="clear: both; margin:0; padding:0;">
            <input type="hidden" name="image" id="imageinput" style="clear: both; margin:0; padding:0;">
            <h3>Thank you for helping! </h3>
            <h4>Please fill out the following details.</h4>     
            <label>Name: </label>
            <input type="text" name="fullname" id="fullname" class="required" />
            <div class="clearfix"></div>
            <label>Email: </label>
            <input type="text" name="email" id="email" class="required email" />
            <div class="clearfix"></div>
            <label>Amount: </label>
            <input type="text" name="amount" id="amount" class="required number minStrict" /><input type="button" id="submitBtn" value="Donate" />
            <div class="clearfix"></div>
            <div id="error" style="display:none;">
                Oops! The minimum amount to donate is $6\. Don't wish to donate? Please click on the close button on the top right hand corner instead.
            </div>
        </form> 
```

JavaScript

```
 $('#form1').validate({
                onkeyup: false,
                focusInvalid: false,
                rules : {
                    amount : {
                        required    : true,
                        number      : true,
                        minStrict   : 5
                    }
                },
                messages : {
                    fullname: "Please fill out your name",
                    email: {required:"Please fill out your email address",email:"Invalid email address"},
                    amount: {required:"Please fill out amount to donate",number:"Invalid amount",minStrict:"Minimum amount is 6$"}
                },
                showErrors: function(errorMap, errorList) {
                    alert('here');

                    for(error in errorMap){
                        alert(error);
                        /*if(error=="fullname" || error=="email" || error=="amount"){
                            //if(errorMap[error]=='Minimum amount is 6$') {
                                //$('div#error').show();
                            //}
                            //else {
                                $(':text[name='+error+']').val(errorMap[error]).addClass('error');//append err msg in all text field and hightlight
                                $('div#error').hide();
                            }
                        }*/
                    }
                }
            });

$('#submitBtn').click(function(){
            if( $("#form1").valid()){
                alert('here');
                $('div#error').hide();
                $('#form1').submit();
            }
        }); 
```

错误

SCRIPT438：对象不支持此属性或方法 validate.js，第 26 行字符 5

只需添加 var 错误即可修复...

for(var error in errorMap){ //

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:04:57.660

我不知道为什么，但使用

```
for(var error in errorMap){ 
```

似乎解决了您在评论中发布的问题...

# php - 从 ADDTIME(CURTIME(), '14400 hour') 格式选择内容时出错

> ID：13696228
> 
> 赞同：0
> 
> 时间：2012-12-04T04:44:54.430
> 
> 标签：php, mysql

所以显然我在尝试从我的数据库中选择时间时偶然发现了一个编码错误。

```
SELECT * FROM `videos` WHERE `added_time` > AddTime( CurTime(), '14400 hour' ) 
```

是代码，我正在尝试使用“added_time”格式选择 10 天（14400 小时）前发布的所有视频，因为它适用于我之前的编码，但在这个编码中它有效。

下面显示的是图像的链接，显示了我的视频数据库结构是如何显示的。

[http://i.imm.io/NURT.png](http://i.imm.io/NURT.png)

编辑：以前我在检索和删除 10 天前发布的公告时遇到了这个问题，并且此代码有效，但是在尝试检索视频时此代码显然不起作用：/ 我不知道为什么，他们正在使用相同的格式。

见：http: [//i.imm.io/NUSW.png](http://i.imm.io/NUSW.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T04:47:47.430

获取 的实际日期`added_time`，然后获取 10 天前的日期`NOW()`。

`WHERE DATE(added_time) = DATE_SUB(NOW(),INTERVAL 10 DAY)`

`<=`如果要删除 10 天或更长时间的任何内容，可以将其更改为。

--- 现在我们知道其中一个是字符串而不是日期字段。转换它。

```
// Change %Y-%m-%d to your date 
STR_TO_DATE(added_date, '%Y-%m-%d') 
```

经过一番聊天讨论和 SQL Fiddlin' 我得到了答案，它对他有用。干杯。

```
SELECT *
FROM videos_shared
WHERE DATE_FORMAT(STR_TO_DATE(added_date, '%a %b %d, %Y, %H:%i'), '%Y-%m-%d') 
<= DATE_SUB(NOW(), INTERVAL 10 DAY) 
```

[http://sqlfiddle.com/#!2/63eef/14](http://sqlfiddle.com/#!2/63eef/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:51:44.483

尝试将全时格式提供为：

```
 > SUBTIME( CurTime(), '14400:00:00.000000' ) 
```

或者（减去 10 天如下：），

```
 > SUBTIME( CurTime(), '10 00:00:00.000000') 
```

请参阅此处的文档-> [**SUBTIME()**](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_subtime)

# r - RandomForest 包中的 predict 函数给出了与带有 xtest 和 ytest 选项的 randomForest 不同的结果

> ID：13696235
> 
> 赞同：3
> 
> 时间：2012-12-04T04:45:45.447
> 
> 标签：r

当我运行这样的代码时获得的不同结果让我感到困惑：

```
set.seed(100) 
test1<-randomForest(BinaryY~., data=Xvars, trees=51, mtry=5, seed=200) 
predict(test1, newdata=cbind(NewBinaryY, NewXs), type="response") 
```

这个代码：

```
set.seed(100) 
test2<-randomForest(BinaryY~.,data=Xvars,trees=51, mtry=5,seed=200,xtest=NewXs, ytest=NewBinY) 
```

由于相同的种子设置，我认为两个森林的混淆矩阵是相同的，但它们的预测值和投票也不同。起初我以为只是平局被打破的方式，所以我将树木的数量改为奇数，这样就不再有平局了。

任何人都可以阐明我希望是一个简单的疏忽吗？我只是不明白为什么这两个森林的预测结果应用于 NewBinaryYs 和 NewX 数据集会不一样。

另外，我注意到当我只使用一棵树时结果是一样的。

感谢您的任何提示和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:38:50.450

我相信 xtest 和 ytest 为随机森林运行本身指定测试集，以便它使用它而不是随机选择的 OOB 样本。如果是这种情况，那么您的两次运行正在使用不同的测试数据集，从而产生不同的结果。

# java - 如何在 Android 3.0 中创建移动尺寸模拟器？

> ID：13696236
> 
> 赞同：0
> 
> 时间：2012-12-04T04:45:46.953
> 
> 标签：java, android

如果我为 Android 3.0 创建模拟器，它会针对平板电脑大小打开。是否可以在 Android 3.0 中为移动设备创建模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:30:28.057

单击 Eclipse 中的 Android 虚拟设备管理器。单击新建并指定您的目标。一旦您创建了具有所需规格的 AVD。在 AVD 管理器中选择它并单击开始，这应该启动您的 AVD。现在尝试在运行时安装您的应用程序AVD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:09:07.463

不，你不能，Android 3.0 aka HoneyComb 纯粹是作为一个平板电脑操作系统。从 4.0 起，即支持超大屏幕（平板电脑）到手机的 ICS。因此，如果您想开发手机应用程序，请使用 2.3.3 或 4.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:14:01.430

在 New Developer Tools (r21) 中，他们给出了许多定义`AVD Manager`

# java - 写入文本文件问题

> ID：13696241
> 
> 赞同：0
> 
> 时间：2012-12-04T04:46:44.090
> 
> 标签：java, text, file-io

```
public static void makeSandwich()
{
    System.out.println("Enter First Name: ");
    String name = Scanner.next();
    double price = sandwich.getBreadPrice() + sandwich.getMeatPrice() + sandwich.getVegPrice();
    sandwich.setPrice(price);
    NumberFormat currency = NumberFormat.getCurrencyInstance();
    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
    Date date = new Date();

    System.out.println(dateFormat.format(date) + " " + name + " " + sandwich.getBread() + " " + sandwich.getMeat() + " " + sandwich.getVegetables() + " " + currency.format(sandwich.getPrice()));
    OrderLine.writeOrderLine(name, sandwich.getBread(), sandwich.getMeat(), sandwich.getVegetables(), sandwich.getPrice());
} 
```

这是我的 orderline.app 代码

```
public class OrderLine{
    private static Sandwich sandwich = null;

    public static void writeOrderLine(String name, String bread, String meat, String veg, double price)
    {
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Date date = new Date();
        try
        {
            File productsFile = new File("orderline.txt");
            PrintWriter out = new PrintWriter(
                new BufferedWriter(
                new FileWriter(productsFile, true)));

           out.print(dateFormat.format(date) + "\t");
           out.print(name + "\t");
           out.print(sandwich.getBread() + "\t");
           out.print(sandwich.getMeat() + "\t");
           out.print(sandwich.getVegetables() + "\t");
           out.println(sandwich.getPrice() + "\t");
           out.close();
       }
       catch (IOException e)
       {
           System.out.println(e);
       }
    }
} 
```

它根本不打印，但是当我在 orderline.java 中的 dateformat 之前添加这一行“sandwich = new Sandwich()”时它可以工作，但它最终给了我空字符串，因为我想我正在创建一个新的三明治. 我怎么称呼我已经做好的三明治？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:03:47.847

在 writeOrderLine 函数中，您尚未初始化三明治，但传递了三明治的所有属性，您可以通过以下方式进行

```
 public static void writeOrderLine(String name, String bread, String meat, String veg, double price)
        {
            DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
            Date date = new Date();
            try
            {
                File productsFile = new File("orderline.txt");
                PrintWriter out = new PrintWriter(
                    new BufferedWriter(
                    new FileWriter(productsFile, true)));

               out.print(dateFormat.format(date) + "\t");
               out.print(name + "\t");
               out.print(bread + "\t");
               out.print(meat + "\t");
               out.print(veg + "\t");
               out.println(price+ "\t");
               out.close();
           }
           catch (IOException e)
           {
               System.out.println(e);
           }
        } 
```

或者你可以这样做

像这样打电话

```
OrderLine.writeOrderLine(name, sandwich); 
```

并将功能更改为

```
public static void writeOrderLine(String name, Sandwich sandwich)
    {
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Date date = new Date();
        try
        {
            File productsFile = new File("orderline.txt");
            PrintWriter out = new PrintWriter(
                new BufferedWriter(
                new FileWriter(productsFile, true)));

           out.print(dateFormat.format(date) + "\t");
           out.print(name + "\t");
           out.print(sandwich.getBread() + "\t");
           out.print(sandwich.getMeat() + "\t");
           out.print(sandwich.getVegetables() + "\t");
           out.println(sandwich.getPrice() + "\t");
           out.close();
       }
       catch (IOException e)
       {
           System.out.println(e);
       }
    } 
```

# css - 无法悬停更改文本颜色

> ID：13696247
> 
> 赞同：0
> 
> 时间：2012-12-04T04:47:20.327
> 
> 标签：css, colors, hover

我在页面顶部创建了一个名为`newarrival`的选项卡，当您将鼠标悬停在该选项卡上时，我希望文本变为蓝色，以便人们知道它是一个链接……但我就是不明白为什么它不起作用。我的标签位于页面顶部：[www.greenieproducts.com](http://www.greenieproducts.com)

据我所知，这个css代码应该可以工作：

```
#newarrival a:hover 
{
  color:blue!important;
} 
```

但它不适合我。我也试过

```
a #newarrival : hover 
{
  color:blue!important;
} 
```

请有人指出我正确的方向。非常感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:52:44.720

Your image: [http://greenieproducts.com/wp-content/themes/shopperpress/thumbs/greenie-12.png](http://greenieproducts.com/wp-content/themes/shopperpress/thumbs/greenie-12.png) is covering the a tag

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:56:08.140

check this

```
#newarrival a
{
  color:#00000 !important;
}

#newarrival a:hover 
{
  color:#F3F3F3 !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:06:51.407

[图像](http://www.greenieproducts.com/wp-content/themes/shopperpress/thumbs/greenie-12.png)出现在div**前面**。`#newarrival`要将`#newarrival`div 放在图像的前面，只需将其添加`z-index:1`到其 CSS 属性中，正如 Rohit Azad 评论的那样，删除`!important`.. 此处没有必要。

```
#newarrival
{
  /* Your other CSS properties */

  z-index:1;  /*Add this property */
} 
```

# java - 如何调整代码以使用两个参数而不是一个参数？

> ID：13696249
> 
> 赞同：2
> 
> 时间：2012-12-04T04:47:43.430
> 
> 标签：java, parameters, tostring

我需要这个项目的帮助。我似乎找不到让测试代码运行的方法。我不允许更改测试代码，只能更改 IntegerSet 类。我还在学习，请帮助我解决这个问题。

我知道代码很长，所以我把评论问题！在测试和当前代码中似乎有危险信号的两个点附近。也许 toString() 与它有关，但不确定。

当前代码：

```
 public class IntegerSet {
  private int [] a;  // holds a set of numbers from 0 - 100

  public IntegerSet () {
    // an empty set, all a[i] are set to 0
    a = new int [101];
  }

  // A constructor that copies from an existing set.
  public IntegerSet (IntegerSet existingSet) {
    a = new int [101];
    for(int i=0; i<a.length; i++)
      a[i] = existingSet.a[i];
  }

  public void deleteElement(int i) {
    if ((i >= 0) && (i < a.length))
      a[i] = 0;  // set to 1
  }

  public void insertElement(int i) {
    if ((i >= 0) && (i < a.length))
      a[i] = 1;  // set to 1
  }

  public boolean isSet(int i) {
    return (a[i] == 1);
  }
  // PROBLEM!!!!

  // The union of this set and another set
  public IntegerSet union(IntegerSet otherSet) {
    IntegerSet newSet = new IntegerSet(this);

    // newSet is now a copy of the current set,  Next we
    // want to union with set a

    for(int i=0; i<a.length; i++) {
      if (otherSet.isSet(i))
        newSet.insertElement(i);
    }

    return newSet;
  }
  // PROBLEM!!!
  // The intersection of this set and another set
  public IntegerSet intersection(IntegerSet otherSet) {
    IntegerSet newSet = new IntegerSet(this);

    // newSet is now a copy of the current set,  Next we
    // want to intersect with set a

    for(int i=0; i<a.length; i++) {
      if (!otherSet.isSet(i))
        newSet.deleteElement(i);
    }

    return newSet;
  }

  // return true if the set has no elements
  public boolean isEmpty() {
    for (int i=0; i<a.length; i++)
      if (isSet(i)) return false;
    return true;
  }

  // return the 'length' of a set
  public int cardinality() {
    int count = 0;
    for (int i=0; i<a.length; i++)
      if (isSet(i))
        count++;
    return count;
  }

  // Print a set to System.out
  public void setPrint() {
    System.out.print("[Set:");

    if (isEmpty())
      System.out.print("---");

    for (int i=0; i<a.length; i++) {
      if (isSet(i))
        System.out.print(" " + i);
    }

    System.out.print("]\n");
  }

  // return true if two sets are equal
  public boolean isEqualTo(IntegerSet otherSet) {
    for(int i=0; i<a.length; i++) {
      if (otherSet.isSet(i) != isSet(i))
        return false;
    }
    return true;
  } 
```

测试代码：

```
import java.util.Scanner;

public class IntegerSetTest {

    public static void main(String args[]) {

        IntegerSet setA = new IntegerSet();
        IntegerSet setB = new IntegerSet();

        Scanner scan = new Scanner(System.in);
        int input;

        do {            
            // Just for formatting purposes...
            System.out.println();            
            System.out.println("setA: " + setA);
            System.out.println("setB: " + setB);
            System.out.println("1) insertElement into setA");
            System.out.println("2) deleteElement from setA");
            System.out.println("3) insertElement into setB");
            System.out.println("4) deleteElement from setB");
            System.out.println("5) intersection of setA and setB");
            System.out.println("6) union of setA and setB");
            System.out.println("7) equality of setA and setB");
            System.out.println("Select from the menu above (or 0 to exit): ");
            input = scan.nextInt();

            switch(input) {
                case 1: 
                    System.out.print("Enter an element to insert into setA: ");
                    setA.insertElement(scan.nextInt());
                    break;
                case 2:
                    System.out.print("Enter an element to delete from setA: ");
                    setA.deleteElement(scan.nextInt());                  
                    break;
                case 3:    
                    System.out.print("Enter an element to insert into setB: ");
                    setB.insertElement(scan.nextInt());                 
                    break;
                case 4:
                    System.out.print("Enter an element to delete from setB: ");
                    setB.deleteElement(scan.nextInt());                  
                    break;
                case 5: // PROBLEM!   
                    System.out.println("The intersection of setA and setB is: " + IntegerSet.intersection(setA, setB));
                    break;
                case 6: // PROBLEM!
                    System.out.println("The union of setA and setB is: " + IntegerSet.union(setA, setB));
                    break;
                case 7:
                    System.out.println("setA and setB are " + (setA.isEqualTo(setB) ? "" : "un") + "equal");
                    break;
                default:
                    if (input != 0) {
                        System.out.println("\n*** Error, invalid input! ***\n");
                    }
            }          
        }while(input != 0);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:53:14.643

您会注意到测试代码正在运行

```
IntegerSet.intersection(setA, setB)
IntegerSet.union(setA, setB) 
```

与

```
setA.intersection(setB)
setA.union(setB) 
```

区别在于第一个是对静态方法的调用，第二个是对实例方法的调用。您的实现包含实例方法，这些方法使用自身 ( `this`) 而不是接受第二个参数。

（简而言之，更改`this`第二个参数的值并将`static`关键字添加到您的方法中。此外，您必须更改对私有的引用才能`a`使用访问器方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:21:13.133

```
 public static IntegerSet union(IntegerSet otherSet, IntegerSet nextSet) {

    for(int i=0; i<a.length; i++) {
      if (otherSet.isSet(i))
        nextSet.insertElement(i);
    }

    return nextSet;
  }

  public static IntegerSet intersection(IntegerSet otherSet, IntegerSet nextSet) {

    for(int i=0; i<a.length; i++) {
      if (!otherSet.isSet(i))
        nextSet.deleteElement(i);
    }

    return nextSet;
  } 
```

# javascript - 如何让 CoffeeScript 闭包知道非局部变量？

> ID：13696255
> 
> 赞同：1
> 
> 时间：2012-12-04T04:48:09.900
> 
> 标签：javascript, coffeescript, closures

这是一个使用 express 和 async 的 CoffeeScript 片段。如何让最终的回调函数知道模板的值？

```
app.get '/', (req, res) -> template = 'main'
async.parallel([
  (callback) ->
    db.collection1.find(
      {},
      (err, data) ->
      if !err && data  
        callback null, data
      else
        callback null, null
    ),
  (callback) ->
    db.collection2.find(
      {},
      (err, data) ->
      if !err && data  
        callback null, data
      else
        callback null, null
    )
], (err, results) ->
  console.log template
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:44:15.027

将您的`async`块放在`app.get`回调中（如下`template = 'main'`）。像这样：

```
app.get '/', (req, res) -> 
  template = 'main'
  async.parallel([
    (callback) ->
      db.collection1.find(
        {},
        (err, data) ->
        if !err && data  
          callback null, data
        else
          callback null, null
      ),
    (callback) ->
      db.collection2.find(
        {},
        (err, data) ->
        if !err && data  
          callback null, data
        else
          callback null, null
      )
  ], (err, results) ->
    console.log template
  ) 
```

# android - 在Android中的谷歌地图位置上设置名称和标题

> ID：13696257
> 
> 赞同：3
> 
> 时间：2012-12-04T04:48:18.617
> 
> 标签：android, google-maps, geolocation, google-maps-markers

> **可能重复：**
> [android 地图上的 iphone 类注释](https://stackoverflow.com/questions/9126811/iphone-like-annotation-on-android-map)

我正在实现一个使用谷歌地图的应用程序。到目前为止，我已经成功地在谷歌地图上标记了位置。但我真正需要的是在谷歌地图位置的顶部设置一个标题。就像下图一样。

有人可以帮帮我吗？谢谢。

![在此处输入图像描述](../Images/b65d70b19dbd37e268719f5d57c04f24.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:55:56.327

Its basically called Mapview Ballons. Here is the sample project developed on github for your reference. It will help me a lot in my project.

[Mapview Ballons](https://github.com/jgilfelt/android-mapviewballoons)

Hope it helps you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:28:56.153

看看刚刚发布的新的[Google Maps Android API v2 。](https://developers.google.com/maps/documentation/android/)它使添加带有信息窗口（带有标题和片段）的标记变得更加容易 - 请参阅[文档](https://developers.google.com/maps/documentation/android/marker)以获取示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:00:27.453

您可以通过使用 onTap 方法在 ItemizedOverlay 中使用 Alertbox/Dialog 框。

*您可以标记任意多个您喜欢的地方，并且可以在谷歌地图位置的顶部设置标题。*

***例如***

```
 public void onCreate(Bundle b)
    {
        super.onCreate(b);
        try{  

            setContentView(R.layout.main);
            System.out.println(""+lati+place+longi+position.get(0)+position.size());
            mapView=(MapView)findViewById(R.id.map_view);
            mapView.setBuiltInZoomControls(true); 

            mc = mapView.getController();
            mc.setZoom(12);

            drae=this.getResources().getDrawable(R.drawable.ic_launcher);
            test tt=new test(drae,this);        
            tt.addit(latitude,longitude, place_name);
            tt.addit(latitude1,longitude1, place_name1);
            mapView.getOverlays().add(tt);
            System.out.println(ii);

            break;
        }

        default:
            System.out.println(position.size());
        }
    }
}

        }catch (Exception e) {
          System.out.println(e.getMessage());
        } 
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    class test extends ItemizedOverlay
    {
        List<OverlayItem>overLayItem=new ArrayList<OverlayItem>();
        Context con;
        public test(Drawable drae,Context con) {

            super(boundCenterBottom(drae));
            testt(con);
        }

        void testt(Context con)
        {
            this.con=con;
        }
        @Override
        protected OverlayItem createItem(int i) {
            return overLayItem.get(i);
        }

        @Override
        public int size() {
            return overLayItem.size();
        }

        protected boolean onTap(int index) {
            // TODO Auto-generated method stub
            OverlayItem ir=overLayItem.get(index);
            AlertDialog.Builder dia=new AlertDialog.Builder(con);
            dia.setTitle(ir.getTitle());
            dia.setMessage(ir.getSnippet());
            dia.setPositiveButton("close",new  DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    dialog.dismiss();
                }
            });
            dia.show();
            return true;
        }

        public void additem(OverlayItem item)
        {
            overLayItem.add(item);
            populate();
        }
        public void addit(int l,int g,String s)
        {
            GeoPoint po=new GeoPoint(l, g);
            OverlayItem it=new OverlayItem(po,s,null);
            additem(it);
        }
    }
} 
```

# android - Android上的sqlite3失败：语法错误：意外“（”

> ID：13696259
> 
> 赞同：1
> 
> 时间：2012-12-04T04:48:25.820
> 
> 标签：android, sqlite

我将 sqlite3（从我的 Android SDK 工具文件夹）推送到我的根设备（**Galaxy S III, 4.0.3**），因为它不在那里。

但是执行任何查询都会失败并出现错误，即使只是`sqlite3`单独调用 ' ' 也是如此。

通过`adb shell`：

```
~ # sqlite3
/system/xbin/sqlite3: line 1: syntax error: unexpected "("

~ # sqlite3 /data/system/accounts.db "delete from grants;"
/system/xbin/sqlite3: line 1: syntax error: unexpected "(" 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:21:00.387

看看在命令行中在 sqlite3 周围加上引号是否有效：`~ # "sqlite3"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:39:41.063

启动时，`sqlite3`执行文件`~/.sqliterc`. 检查它是否存在，以及它包含什么。

但在这种情况下，它会输出一条消息`-- Loading resources from .../.sqliterc`，所以这不是这里发生的情况。

# .net - 接受发布数据 VB.net

> ID：13696261
> 
> 赞同：0
> 
> 时间：2012-12-04T04:48:54.890
> 
> 标签：.net, vb.net, file-upload

我正在使用 vb.net 并有一个发布数据的表单： value1 是文本，value2 是图像。

如何解码进入服务器的多部分表单数据，保存文件并将文本传递给另一个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:53:18.963

您不需要这样做，ASP.NET 会为您执行此操作，并通过`Request.Form`集合提供数据，并通过键索引项目。上传的文件通过`Request.Files`而不是`Request.Form`.

```
String value1 = Request.Form["value1"];
HttpPostedFile image = Request.Files["value2"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:17:05.080

对于图片：

```
Dim pix As HttpPostedFile = System.Web.HttpContext.Current.Request.Files("pix") 
```

对于表单元素：

```
Dim pix As HttpPostedFile = System.Web.HttpContext.Current.Request.Form("tag") 
```

# python - 为什么使用 PIL 进行仿射变换后图像颜色会发生变化？

> ID：13696272
> 
> 赞同：0
> 
> 时间：2012-12-04T04:50:36.217
> 
> 标签：python, image, opencv, python-imaging-library, affinetransform

我`image.transform`在[Python Imaging Library](http://www.pythonware.com/products/pil/)中使用仿射变换对人脸检测图像应用仿射变换，以根据眼睛的位置校准人脸。结果是正确的，但图像的颜色如下所示。为什么？代码如下。最后两行是转换函数的调用。

```
def ScaleRotateTranslate(image, angle, center = None, new_center = None, scale = None, resample=Image.NEAREST):
    if (scale is None) and (center is None):
        return image.rotate(angle=angle, resample=resample)
    nx,ny = x,y = center
    sx=sy=1.0
    if new_center:
        (nx,ny) = new_center
    if scale:
        (sx,sy) = (scale, scale)
    cosine = math.cos(angle)
    sine = math.sin(angle)
    a = cosine/sx
    b = sine/sx
    c = x-nx*a-ny*b
    d = -sine/sy
    e = cosine/sy
    f = y-nx*d-ny*e
    return image.transform(image.size, Image.AFFINE, (a,b,c,d,e,f), resample=resample)

def Distance(p1,p2):
    dx = p2[0] - p1[0]
    dy = p2[1] - p1[1]
    return math.sqrt(dx*dx+dy*dy)

image_center = ((eye_left[0]+eye_right[0])/2,(eye_left[1]+eye_right[1])/2)
rotatedImg = ScaleRotateTranslate(pilIm,center=image_center,angle=rotation) 
```

![在此处输入图像描述](../Images/c65002e1a48ec121648dd3c0135de05c.png)

![在此处输入图像描述](../Images/ed3d3ac8853925bfad9a9f0bd597af3b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:10:40.380

试过这个：

```
import Image
import math

def ScaleRotateTranslate(image, angle, center = None, new_center = None, scale = None, resample=Image.NEAREST):
    if (scale is None) and (center is None):
        return image.rotate(angle=angle, resample=resample)
    nx,ny = x,y = center
    sx=sy=1.0
    if new_center:
        (nx,ny) = new_center
    if scale:
        (sx,sy) = (scale, scale)
    cosine = math.cos(angle)
    sine = math.sin(angle)
    a = cosine/sx
    b = sine/sx
    c = x-nx*a-ny*b
    d = -sine/sy
    e = cosine/sy
    f = y-nx*d-ny*e
    return image.transform(image.size, Image.AFFINE, (a,b,c,d,e,f), resample=resample)

def Distance(p1,p2):
    dx = p2[0] - p1[0]
    dy = p2[1] - p1[1]
    return math.sqrt(dx*dx+dy*dy)

pilIm = Image.open('/Users/carlos/Downloads/image.jpg').convert('RGB');
eye_left = (10,10)
eye_right = (40,30)
rotation = 0.3;

image_center = ((eye_left[0]+eye_right[0])/2,(eye_left[1]+eye_right[1])/2)
rotatedImg = ScaleRotateTranslate(pilIm,center=image_center,angle=rotation)
rotatedImg.save('out.jpg') 
```

收到：

![在此处输入图像描述](../Images/86c2637228f0be595ff94d716f544ae4.png)

所以我想，答案是它对我有用。尝试检查您的 PIL 安装以及您正在使用 RGB 编码。

# c++ - 这个程序不是要求数组中预先确定的 5 个数字吗？

> ID：13696274
> 
> 赞同：3
> 
> 时间：2012-12-04T04:50:54.737
> 
> 标签：c++

好的，所以这个问题很难说。

我是 C++ 的初学者，我很少遇到这些简单作业的问题，但这里有一些主要错误，我无法识别它。我已经尝试了几个小时。

该程序应该从用户输入的数组中读取 5 个数字，然后打印最大的一个。（我知道只写一个 for 循环更容易，但我们的教授希望我们调用一个函数）。

唯一的问题是，它不是要求 5 个数字，而是要求 2。除此之外它还有效，我只需要它来要求 5 个数字。哈哈。

您的意见将不胜感激。我渴望有一天成为一名程序员，所以不要害怕对我苛刻。

```
#include <iostream>
using namespace std;

int largest_number(int score[], int max)
{ 
    for (int i=1; i<5; i++)
    {
        cin >> score[i];
        if(score[i] > max)
            max=score[i];

        return (max);
    }
}

int main ()
{
    int score[5], max, z;

    cout << "Enter 5 numbers: " <<endl;
    cin >> score[0];
    max = score[0];

    z = largest_number(score, max);

    cout << "The largest number is: " << z <<endl;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T04:54:42.210

```
int largest_number(int score[], int max)
{ 
    for (int i=1; i<5; i++)
    {
        cin >> score[i];
        if(score[i] > max)
            max=score[i];

        return (max); //whoops! it's inside the for loop
    }
} 
```

*   您将 return 放入 for 循环中犯了一个错误，这意味着无论您输入什么，`score[1]`因为该函数随后将返回 max 。

删除 for 循环中的 return 并将其放在函数的末尾，你应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:56:05.987

正如我们在这里所说，您需要将苍蝇与肉丸分开。好的选择是制作只找到最大值并分别填充数组的函数。

例子：

```
 int FindMax(int score[], int size)
    {
       int max = score[0];
       for(int i = 1; i < size; i++)
           if(score[i] > max)
              max = score[i];
       return max; 
    }

int main()
{
    const int SIZE = 5;
    int score[SIZE];
    for(int i = 0; i < SIZE; i++)
    {
        cout << "Enter " << i << " number\n";
        cin >> score[i];
    }

    cout << "\nMax is " << FindMax(score, SIZE);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T04:56:14.860

在你的 for 循环中

```
for (int i=1; i<5; i++)
{
    cin >> score[i];
    if(score[i] > max)
        max=score[i];

    return (max);
} 
```

你回来。当您编写该 return 语句时，该函数退出，并且您不会执行循环的其余部分。

我认为您的意思是将 return 语句放在循环之外

```
for (int i=1; i<5; i++)
{
    cin >> score[i];
    if(score[i] > max)
        max=score[i];
}
return (max); 
```

也，`Fomin Arseniy`，有一个好点（虽然没有优雅地陈述）。

您应该在一个步骤中收集您的输入，然后在下一步中找到最大的数字。对于像这样简单的问题，它并没有太大的区别，但是对于更难的问题，你应该学习这种模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T05:05:04.650

欢迎来到美妙的代码世界！

1.  请记住，当调用 return 时，它会跳出 for 循环并返回给调用者。话虽如此，在您的**maximum_number**函数中，只需拉出 return 语句......

    ```
    return (max); 
    ```

    ...在 for 循环之外

2.  **通过将变量i**初始化为 0 而不是 1 来开始你的 for 循环。这样你将获得 5 个循环，而不是 4 个。

3.  确保第一次执行 for 循环时，将**max**变量设置为输入的任何值。我通过在 if 语句中使用以下条件来确保发生这种情况

    `score[i] > max || i == 0`

    注意**i == 0**。想想为什么会这样。

4.  您的**maximum_number**函数不需要传递参数**max**。您可以简单地在函数中创建一个名为**max**的局部变量并使用它。

5.  此外，尝试使用“驼峰”格式命名您的函数（示例如下）。

您的最终（工作）函数将如下所示：

```
int largestNumber(int score[])
{ 
   int max = 0;
   for (int i = 0; i < 5; i++)
   {
      cin >> score[i];
      if (score[i] > max || i == 0)
        max = score[i];
   }
   return (max);
} 
```

# objective-c - 如何使用 Xcode 显示图像

> ID：13696277
> 
> 赞同：0
> 
> 时间：2012-12-04T04:51:09.840
> 
> 标签：objective-c, ios, xcode

我需要知道如何使用 Xcode 和 Objective-C 显示图像。我正在使用 Xcode 4.5.2。我宁愿使用空的应用程序。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T04:52:20.750

使用[UIImageView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)在应用中显示图像。

就这么简单，

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:rect];
imageView.image = [UIImage imageNamed:@"MyImage.png"];
[self.view addSubview:imageView]; 
```

您不需要为此提供教程。只需浏览文档，您就可以找出其余的属性。

# python - 在 Python 中对列表进行数字排序

> ID：13696281
> 
> 赞同：2
> 
> 时间：2012-12-04T04:51:35.217
> 
> 标签：python, list, numbers, numeric, sorted

所以我有这个列表，我们称之为listA。我正在尝试获取每个列表中的 [3] 项，例如`['5.01','5.88','2.10','9.45','17.58','2.76']`按排序顺序。因此，最终结果将重新开始整个列表，圣诞老人位于顶部。这有任何意义吗？

`[['John Doe', u'25.78', u'20.77', '5.01'], ['Jane Doe', u'21.08', u'15.20', '5.88'], ['James Bond', u'20.57', u'18.47', '2.10'], ['Michael Jordan', u'28.50', u'19.05', '9.45'], ['Santa', u'31.13', u'13.55', '17.58'], ['Easter Bunny', u'17.20', u'14.44', '2.76']]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T04:59:22.890

如果您想按排序顺序返回完整列表，这可能会起作用。这将获取您的输入列表并`sorted`在其之上运行。`reverse`设置为`True`以反向（降序）顺序对列表进行排序的参数，并且参数`key`指定排序的方法，在本例中是`float`每个列表的第三个参数的方法：

```
In [5]: l = [['John Doe', u'25.78', u'20.77', '5.01'] # continues...    
In [6]: sorted(l, reverse=True, key=lambda x: float(x[3]))
Out[6]:
[['Santa', u'31.13', u'13.55', '17.58'],
 ['Michael Jordan', u'28.50', u'19.05', '9.45'],
 ['Jane Doe', u'21.08', u'15.20', '5.88'],
 ['John Doe', u'25.78', u'20.77', '5.01'],
 ['Easter Bunny', u'17.20', u'14.44', '2.76'],
 ['James Bond', u'20.57', u'18.47', '2.10']] 
```

如果您只需要按排序顺序排列的值，则其他答案提供了可行的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T05:01:55.400

尝试这个：

```
>>> listA=[['John Doe', u'25.78', u'20.77', '5.01'], ['Jane Doe', u'21.08', u'15.20', '5.88'], ['James Bond', u'20.57', u'18.47', '2.10'], ['Michael Jordan', u'28.50', u'19.05', '9.45'], ['Santa', u'31.13', u'13.55', '17.58'], ['Easter Bunny', u'17.20', u'14.44', '2.76']]

>>> [x[3] for x in sorted(listA, reverse = True, key = lambda i : float(i[3]))]
['17.58', '9.45', '5.88', '5.01', '2.76', '2.10'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-13T13:53:03.570

`lambda`此任务不需要匿名函数。您可以使用`operator.itemgetter`，这可能更直观：

```
from operator import itemgetter

res1 = sorted(map(itemgetter(3), listA), reverse=True, key=float)

['17.58', '9.45', '5.88', '5.01', '2.76', '2.10'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T05:07:52.437

```
from operator import itemgetter
lstA.sort(reverse = True, key = itemgetter(3)) 
```

你很高兴。当您有多个要排序的索引时，在排序中使用 itemgetter() 非常有用。假设您想按字母顺序对第一个值进行排序，以防出现平局，您可以执行以下操作

```
from operator import itemgetter
lstA.sort(key = itemgetter(0))
lstA.sort(reverse = True, key = itemgetter(3)) 
```

瞧！

# ios - 我应该在哪里为 UIView 动画设置 BOOL？

> ID：13696283
> 
> 赞同：0
> 
> 时间：2012-12-04T04:51:44.920
> 
> 标签：ios, uiview, uiviewanimation

我想做这样的 UIView 动画

```
CGRect frame = view.frame;
frame.origin.y += 30.0;
[UIView animateWithDuration:0.7 animations:^{
    view.frame = frame;
} completion^(BOOL finished){
     viewMovedDown = YES;
}]; 
```

我应该在完成块中设置 BOOL (viewMovedDown) 还是应该在开始动画之前设置它？

# xpath - XQUERY: Finding number of occurences from one query in another

> ID：13696285
> 
> 赞同：1
> 
> 时间：2012-12-04T04:51:46.797
> 
> 标签：xpath, xquery

I know there should be a simple solution to this but I can't seem to figure it out. Suppose I have a query which returns something like:

```
xs:untypedAtomic("A"),
xs:untypedAtomic("B"),
xs:untypedAtomic("C") 
```

and I have another one which returns something like:

```
xs:untypedAtomic("B"),
xs:untypedAtomic("B"),
xs:untypedAtomic("B"),
xs:untypedAtomic("A"),
xs:untypedAtomic("C"),
xs:untypedAtomic("A") 
```

How do I get the number of occurences for each letter in the second table?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:02:08.593

**使用**：

```
for $s in $vMySeq
       return
          ($s, count(index-of($vSeq, $s))) 
```

where`$vMySeq`是第一个查询`$vSeq`的结果，是第二个查询的结果。

**一个完整的例子**：

```
 let $vMySeq := ('A', 'B', 'C'),
       $vSeq := ('B', 'B', 'B', 'A', 'C', 'A')
     return
         for $s in $vMySeq
           return
                  ($s, count(index-of($vSeq, $s))) 
```

**结果是**：

```
A 2 B 3 C 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T08:59:37.420

我提出了两种变体，一种包含 group by 子句，恰好显示了非分组变量 $cntr 的所需特征（参见[http://www.w3.org/TR/xquery-30/#id-group-](http://www.w3.org/TR/xquery-30/#id-group-by)关于如何执行分组的详细信息）[：](http://www.w3.org/TR/xquery-30/#id-group-by)

```
let $seq := ("B", "B","B","A","C","A")
let $cntr := 1
for $it in $seq
group by $it
return <el>{
  attribute num {count($cntr)},
  $it  
}</el> 
```

我的第二个，也许更明显的变体是：

```
let $seq := ("B", "B","B","A","C","A")
for $v in distinct-values($seq)
    return <el>{
      attribute num {count($seq[. = $v])},
      $v
    }</el> 
```

由于我的回答有点不准确，这里有一个受 Dimitre Novatchev 回答启发的小修正。

而不是使用：

```
for $v in distinct-values($seq) 
```

你也可以使用

```
for $v in ("A", "B", "C") (: this is sequence 1 as stated in the question:) 
```

这更类似于问题两个序列，因为这个序列只包含不同的值。

# r - 编译任何代码时出现 Rcpp 错误消息：`dyn.load(context$dynlibPath) 中的错误：无法加载共享对象 '...sourceCpp_96369.so'`

> ID：13696286
> 
> 赞同：3
> 
> 时间：2012-12-04T04:51:55.483
> 
> 标签：r, rcpp

当我尝试编译任何代码时，我收到以下错误消息。下面是一个示例和来自 的输出`sessionInfo()`。该示例曾经有效，但我遇到了问题`RcppArmadillo`。所以我安装了for HPC版本的`gfortran`编译器，这是一个错误。当我尝试编译某些东西时，R 刚刚崩溃（CRAN 还警告 HPC 版本）。[最后，我在这里](http://cran.r-project.org/bin/macosx/tools/)安装了 CRAN 上的版本，但现在任何调用`cppFunction`或`sourceCpp`产生以下错误。我已经尝试卸载 gfortran、R、Rcpp 并重新安装它们。同样的错误。的输出`gfortran -v`有点令人困惑。有任何想法吗？

**示例代码**

```
require("Rcpp")
cppFunction('
    int add(int x, int y, int z) { 
      int sum = x + y + z;
      return sum;
    }'
) 
```

**错误信息**

```
Error in dyn.load(context$dynlibPath) : 
  unable to load shared object '/var/folders/cc/_mskgpdd6f77hrg4rsp4zq1h0000gq/T//RtmpHRb5JV/sourcecpp_24fb5226c6fc/sourceCpp_96369.so':
  dlopen(/var/folders/cc/_mskgpdd6f77hrg4rsp4zq1h0000gq/T//RtmpHRb5JV/sourcecpp_24fb5226c6fc/sourceCpp_96369.so, 6): Symbol not found: ___emutls_get_address
  Referenced from: /usr/local/lib/libstdc++.6.dylib
  Expected in: /usr/local/lib/libgcc_s.1.dylib
 in /usr/local/lib/libstdc++.6.dylib 
```

**会话信息的输出**

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Rcpp_0.10.1      boot_1.3-7       xtable_1.7-0     stringr_0.6.1   
[5] mi_0.09-18       arm_1.5-08       abind_1.4-0      R2WinBUGS_2.1-18
[9] coda_0.14-7      lme4_0.999999-0  Matrix_1.0-9     lattice_0.20-10 
[13] car_2.0-15       nnet_7.3-5       MASS_7.3-22      plyr_1.7.1      
[17] foreign_0.8-51  

loaded via a namespace (and not attached):
[1] grid_2.15.2   nlme_3.1-105  stats4_2.15.2 tools_2.15.2 
```

**编译器版本**

```
> gcc -v
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
> gfortran -v
Using built-in specs.
Target: i686-apple-darwin8
Configured with: /Builds/unix/gcc/gcc-4.2/configure --prefix=/usr/local --mandir=/share/man --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --build=i686-apple-darwin8 --host=i686-apple-darwin8 --target=i686-apple-darwin8 --enable-languages=fortran
Thread model: posix
gcc version 4.2.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:41:49.317

不知何故，我最终得到了一个`libstdc++.6.dylib`in版本`/usr/local/lib`。当我使用 Rcpp 或内联编译某些代码并产生错误时，会选择此版本。好像覆盖了系统版本`/usr/lib`。目前，我只是重命名`/usr/local/lib/libstdc++.6.dylib`为`.../libstdc++.6-SAVE`. 我不确定这是否会产生其他问题，但 Rcpp 再次运行并且`?cfunction`示例也有效！

**编辑**：它实际上仍然搞砸了。以下是解决当前 R 会话问题的步骤。`/usr/local/lib/libstdc++.6.dylib`1）以不变的方式启动 R ，2）重命名`/usr/local/lib/libstdc++.6.dylib`，3）愉快地使用`Rcpp`. 但是，当我现在重新启动 R 时，我仍然收到旧的错误消息。我必须再次完成这三个步骤才能使其在当前的 R 会话中工作。

# iphone - GREE 集成最终出现错误

> ID：13696287
> 
> 赞同：0
> 
> 时间：2012-12-04T04:51:55.987
> 
> 标签：iphone, objective-c, ios, gree

我将 GREE 集成到 iOS 应用程序（演示）中，经过一天的努力，代码已经足够好了，可以正常执行并产生一些 UI 响应，但遗憾的是，这不值得，请检查：

![在此处输入图像描述](../Images/09e4baf13a2d1f522da924372475b298.png)

我的控制台里也有一些东西；

```
 2012-12-04 09:52:22.721 GreeHelloSample[1295:1bb03] GreeJSAbstractStateCommand:name must be overloaded in subclasses.
 2012-12-04 09:52:22.724 GreeHelloSample[1295:1bb03] GreeJSAsyncCommand:name must be overloaded in subclasses.
 2012-12-04 09:52:22.725 GreeHelloSample[1295:1bb03] GreeJSLoadAsynchronousCommand:name must be overloaded in subclasses.
 2012-12-04 09:52:22.997 GreeHelloSample[1295:1bb03] [Gree][GreePlatform.m:381]  Initialized Gree Platform SDK 3.4.0 (Build release/v3.4.0_public_189)
 2012-12-04 09:52:24.589 GreeHelloSample[1295:1bb03] didLogoutUser
 2012-12-04 09:52:25.003 GreeHelloSample[1295:1bb03] greePlatformWillShowModalView 
```

但我累了，无法追踪现在**出了什么问题**？所以，帮帮我。

# 编辑1：

这是我写的所有相关代码：

# 。H

```
#import <UIKit/UIKit.h>
#import "GreePlatform.h"
#import "GreePlatformSettings.h"

#define kGreeApplicationID  @"XXXXX"
#define kGreeConsumerKey    @"XXXXXXXXXXXX"
#define kGreeConsumerSecret @"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

@class GHSViewController;
@interface GHSAppDelegate : UIResponder <UIApplicationDelegate, GreePlatformDelegate>

@property (retain, nonatomic) UIWindow *window;
@property (retain, nonatomic) GHSViewController *viewController;

@end 
```

# .m

```
#import "GHSAppDelegate.h"
#import "GHSViewController.h"

@implementation GHSAppDelegate

- (void)dealloc
{
    [_window release];
    [_viewController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[GHSViewController alloc] initWithNibName:@"GHSViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    NSDictionary* settings = [NSDictionary dictionaryWithObjectsAndKeys:GreeDevelopmentModeSandbox, GreeSettingDevelopmentMode, nil];

    [GreePlatform initializeWithApplicationId:kGreeApplicationID
                                  consumerKey:kGreeConsumerKey
                               consumerSecret:kGreeConsumerSecret
                                     settings:settings
                                     delegate:self];
    [GreePlatform handleLaunchOptions:launchOptions application:application];

    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
    [GreePlatform shutdown];
}

#pragma mark - GreePlatformDelegate
/**
 * Sent to the receiver when Gree will show a modal view (dashboard, login dialogs,
 * etc.) that will interrupt your application.
 * @note It is recommended that you suspend your application logic here.
 */
-(void)greePlatformWillShowModalView:(GreePlatform*)platform{
    NSLog(@"greePlatformWillShowModalView");
}
/**
 * Sent to the receiver when Gree has dismissed a modal view (dashboard, login dialogs,
 * etc.) that was interrupting your application.
 * @note It is recommended that you resume your application logic here.
 */
-(void)greePlatformDidDismissModalView:(GreePlatform*)platform{
    NSLog(@"greePlatformDidDismissModalView");
}
/**
 * Sent to the receiver when your application's user logs in to the Gree Platform.
 */
-(void)greePlatform:(GreePlatform*)platform didLoginUser:(GreeUser*)localUser{
    NSLog(@"didLoginUser");
}
/**
 * Sent to the receiver when your application's user logs out of the Gree Platform.
 */
-(void)greePlatform:(GreePlatform*)platform didLogoutUser:(GreeUser*)localUser{
        NSLog(@"didLogoutUser");
}
/**
 @brief Notifies the parameter received when an application starts.
 @param params Parameter received when an application starts.
 */
-(void)greePlatformParamsReceived:(NSDictionary*)params{
       NSLog(@"greePlatformParamsReceived");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:38:35.617

开始了！

我犯了一个愚蠢的错误来忍受这个。实际上我使用的是生产（格力应用程序）ID，用于在沙箱中执行我的应用程序。尽管格力提供了不同的 Sandbox ID 来在 Sandbox 环境中运行应用程序。感谢 Gree 框架 SDK，特别是**Showcase***（示例应用程序），剩下的事情都可以了。

# c++ - 检查到目前为止我在 C++ 中使用的值的最快方法是什么？

> ID：13696291
> 
> 赞同：0
> 
> 时间：2012-12-04T04:52:25.843
> 
> 标签：c++, vector

一个片段

```
if (a<=lim){
    if(std::find(prims.begin(), prims.end(), a)==prims.end()){
        prims.push_back(a);
        count+=lim/a;
    }         
} 
```

所以基本上我的代码中有这一部分，如果它不存在，我将变量添加`a`到其中`vector`，然后我动态更新一个计数器。

但我想知道这在运行时是否不是最理想的。我能做的更快吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T04:55:07.980

[`std::set`](http://en.cppreference.com/w/cpp/container/set)如果您只想保留唯一值，则通常使用该容器。值在内部存储为红黑树，因此大多数操作具有对数复杂性。

这将比您的实现更快，并且与建议的二进制搜索实现一样快。

您可以使用新的 (c++11) 进一步改进它[`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)，它将其存储为哈希表，这将使其在平均恒定时间操作中更快。

使用`set`如下

```
std::set<TYPE> prims;
....
if (a<=lim){
    if(prims.insert(a).second){
        count+=lim/a;
    }         
} 
```

其中 TYPE 是存储在向量中的值的类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:55:31.543

您可以使用 a`std::unordered_set`检查重复项，从而为您提供`O(1)` *摊销*查找。

如果您知道 的最大大小`a`并且它相当小，您可以使用`bool`数组来存储是否元素`x`并且您将进行真正的`O(n)`查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:03:40.343

您想使用其他具有内置唯一性的 STL 容器，例如*set*或*map*；[http://www.cplusplus.com/reference/map/map/](http://www.cplusplus.com/reference/map/map/)。例如，由地图建模的哈希表适合您的用例。

```
<map>
using namespace std;

int insert_and_update(int key_val,map<int,int> hash_map) {
map<int,int>::iterator it;
it = hash_map.find(key_val);
  if( it != hash_map::end() ) {
     it->second += 1; //contains the associated value.
     return 1;
  }
 hash_map(key_val) = 1; //else insert new key into map
 return 0;      
} 
```

# android - 如何判断一个网站的平台是Android还是Iphone或其他？

> ID：13696302
> 
> 赞同：0
> 
> 时间：2012-12-04T04:53:41.287
> 
> 标签：android, iphone, web, responsive-design

我想根据平台运行不同类型的 javascript。那么如何使用javascript来判断平台呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:44:44.277

对于检测 android 尝试：

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
    // Do something!
    // Redirect to Android-site?
    window.location = 'http://android.davidwalsh.name';
} 
```

对于 iOS，试试这个问题：[Detect iOS version less than 5 with JavaScript](https://stackoverflow.com/q/8348139/1548523)

# java - 使用 BigInteger 在 Java 中手动实现 RSA

> ID：13696304
> 
> 赞同：2
> 
> 时间：2012-12-04T04:53:55.253
> 
> 标签：java, cryptography, rsa, biginteger, public-key-encryption

我正在尝试使用 BigInteger 在 Java 中实现文件的 RSA 加密和解密。

我有我的参数 p, q, e, n, d

我将一个文件读入一个字节[]

```
System.out.println("Opening file: " + infile);
File file = new File(infile);
FileInputStream fis = new FileInputStream(file);
int filelength = (int)file.length();
byte[] filecontent = new byte[filelength];
fis.read(filecontent);
fis.close(); 
```

然后从那个字节[]制作一个BigInteger

```
BigInteger plaintext = new BigInteger(filecontent); 
```

那么加密很简单

```
BigInteger ciphertext = plaintext.modPow(e, n); 
```

我将密文写入一个新的加密文件

```
FileOutputStream fos = new FileOutputStream(outfile);
fos.write(ciphertext.toByteArray());
fos.close(); 
```

解密几乎是一样的

```
BigInteger plaintext = ciphertext.modPow(d, n); 
```

当我第一次用一个小文本文件对其进行测试时，它工作得非常好。它加密和解密就好了。然而，当我开始使用 jpg 或 zip 等其他文件进行测试时，一切都崩溃了。我无法确定调试问题，但我确实注意到有时从文件 byte[] 到 BigInteger 的转换会导致一个空的 BigInteger 对象。

在加密之前我必须对 byte[] 做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:45:40.573

为了解决这个问题，您需要将文件分成块，这意味着例如将每 256 位作为一部分并对其进行加密。等等。

# .htaccess - How to load the same website after redirecting subdomain to subdirectory htaccess

> ID：13696306
> 
> 赞同：0
> 
> 时间：2012-12-04T04:54:03.257
> 
> 标签：.htaccess, redirect, subdomain, subdirectory

I could redirect subdomain to subdirectory:

sub.domain.com > www.domain.com/sub

By using:

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^sub.domain.com [NC]
RewriteRule (.*) www.domain.com/sub/$1 [R=301,L] 
```

However, the page at www.domain.com/sub displayed nothing but this:

```
Index of /sub
Parent Directory
Apache Server at www.domain.com Port 80 
```

I have a working website with contents at sub.domain.com. How can I load the same website and make it work at www.domain.com/sub ?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:43:36.253

Jon 是对的，你需要移动内容。然后你只需要通过`http://`在目标域前面添加来重定向来自旧子域的传入请求来修复你的重定向：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^sub\.domain\.com [NC]
RewriteRule (.*) http://www.domain.com/sub/$1 [R=301,L] 
```

# javascript - 向注入的 DOM 元素添加 CSS 样式

> ID：13696310
> 
> 赞同：0
> 
> 时间：2012-12-04T04:54:21.510
> 
> 标签：javascript, jquery, html, css, dom

我正在使用 javascript 向页面中注入一些 DOM 元素。我能够注入单个 DOM 元素并对其应用 CSS 样式：

```
var $e = $('<div id="header"></div>');
$('body').append($e);

$e.css({
    background: '#fbf7f7',
}); 
```

**问题：**如果我在 内有嵌套元素`$e`，如何将 CSS 样式分别应用于父级及其子级？

```
var $e = $('<div id="header"><div class="header-content"><span class="title"></span></div></div>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:59:34.047

当您将类应用于`div`内部父元素时，您可以简单地为其创建一个样式`class header-content`并应用它。

为了动态应用样式，您可以像这样简单地为单个元素添加类

```
$('#id-of-element').addClass("header-content"); 
```

您还可以在父元素中找到元素，如下所示

```
$e.find('.header-content').css('background-color', '#ccc'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:01:23.850

嗨，您可以使用 .css() 方法将 css 添加到任何元素...尝试以下示例。我在 $e 中添加了一个 div 并应用了不同的样式...问题是使用父 div 中子项的 id 或类...

```
var $e = $('<div id="header"><div id="child"></div></div>');
$('body').append($e);

$e.css({
    background: '#fbf7f7',
});
$('#child').css("background", "red"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:38:06.580

扩展我的评论：如果您需要访问孩子而不管任何 id 或类，那么只需使用`$e.children()`.

# javascript - Restricting Desktop access in Windows 8 Metro application

> ID：13696316
> 
> 赞同：1
> 
> 时间：2012-12-04T04:54:55.740
> 
> 标签：javascript, windows, windows-8, microsoft-metro

I'm currently developing a Windows 8 Metro application (javascript) in Visual Studio 2012 for a public gallery competition entry which will run on a tablet PC. Ordinarily, I would never ask a question like this, but I've considered the application at length and this seems legitimate enough of a requirement. The application is simple in that it has three screens presented to the user:

1.  Call to Action
2.  User Details
3.  Thank you

Given that this application will need to run all day is straightforward enough, but stopping saavy passers-by from shutting down the application and opening Internet Explorer and leaving the tablet on a less than desirable webpage is something I don't want to be called about.

Of course I can set a Restricted Group Policy on Application Access but that doesn't stop users from pressing the Start button and suspending the application.

My question is this: Is it possible to implement a password dialog or specific keystroke combination that prevents the application from being suspending, gesture suspended or shut down which stops the user from accessing anything other than the intended application?

# java - 缺少访问令牌

> ID：13696319
> 
> 赞同：0
> 
> 时间：2012-12-04T04:55:13.040
> 
> 标签：java, twitter-oauth, twitter4j, android-twitter

这是我目前拥有的代码，但我无法从我的回调中获取访问令牌，任何提示或提示将不胜感激。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tweetr);
    Button tweetr = (Button)findViewById(R.id.tweetr);

    //create a new twitter configuration using user details
    tweetTwitter = new TwitterFactory().getInstance();
    tweetTwitter.setOAuthConsumer(TWIT_KEY, TWIT_SECRET);

        //create a twitter instance
   // tweetTwitter = new TwitterFactory(twitConf).getInstance();

    tweetr.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

          dt.execute();

        }
    });

}

public class TweetTask extends AsyncTask<Object, Void, String> {
    @Override
    protected String doInBackground(Object... values) {
        /* try {
            //requestToken = tweetTwitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(requestToken.getAuthenticationURL())));
        */
        try {
            requestToken = tweetTwitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
            String authUrl = requestToken.getAuthenticationURL();

            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      return null;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.d("URI", "DONE");
        super.onPostExecute(result);
    }

}

@Override
protected void onResume() {
    super.onResume();
    final Uri uri = getIntent().getData();
    if(uri != null ){

                Log.d("URI", uri.toString());

                Thread th = new Thread(){
                    public void run(){
                        AccessToken accessToken;

                        try {
                            String verifier = uri.getQueryParameter("oauth_verifier");
                            String oauthToken = uri.getQueryParameter("oauth_token");

                            accessToken = tweetTwitter.getOAuthAccessToken(verifier);
                            //String token = accessToken.getToken(), secret = accessToken.getTokenSecret();

                        } catch (TwitterException ex) {
                            Log.e("Main.onNewIntent", "" + ex.getMessage());
                        }

                    }};
                    th.start();
      }else
        Log.d("URI", "FAILED");         

    }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:59:15.010

我必须使用相同的 requestToken 才能访问我的应用程序，因此我必须编辑清单文件以在从 webview 登录面板返回后只允许运行一个活动实例。这为我解决了它。

# delphi - Delphi - 将物理路径（设备文件句柄）转换为虚拟路径

> ID：13696320
> 
> 赞同：3
> 
> 时间：2012-12-04T04:55:19.867
> 
> 标签：delphi, path, virtual

我怎样才能转换像

\Device\HarddiskVolume3\Windows

进入其对应的虚拟路径？（如 c:\Windows 在这种情况下）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T06:32:41.590

我个人更喜欢原生方式：

```
function GetHDDDevicesWithDOSPath:TStringlist;
var
  i: integer;
  root: string;
  device: string;
  buffer: string;
begin
  setlength(buffer, 1000);
  result:=TStringlist.create;
  for i := Ord('c') to Ord('z') do
  begin
    root := Char(i) + ':';
    if (QueryDosDevice(PChar(root), pchar(buffer), 1000) <> 0) then
    begin
      device := pchar(buffer);
      result.add(format('%s = %s\',[device, root ]));
    end;
  end;
end; 
```

**注意**：此代码示例取自： http: [//www.delphipraxis.net/165249-auflistung-devices.html](http://www.delphipraxis.net/165249-auflistung-devices.html)

这将返回逻辑驱动器和路径之间的映射。就我而言：

```
\Device\HarddiskVolume2 = c:\
\Device\HarddiskVolume3 = d:\
\Device\IsoCdRom0 = e:\
\Device\CdRom0 = f:\
\Device\hgfs\;Z:0000000000084af9\vmware-host\Shared Folders = z:\ 
```

您必须将路径中的“\device\harddisk”部分替换为对应的驱动器号。

请注意，驱动器号取决于用户。一些有用的链接：

*   [定义 MS-DOS 设备名称](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363908%28v=vs.85%29.aspx)
*   [命名文件、路径和命名空间](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)
*   [将物理驱动器转换为逻辑驱动器如何？](http://forum.madshi.net/viewtopic.php?t=2266)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T06:04:34.163

一种方法是使用 WMI，例如[http://www.magsys.co.uk/delphi/magwmi.asp](http://www.magsys.co.uk/delphi/magwmi.asp) - 它还有一个演示，您可以使用它来获取代码示例。

您可以找到许多 WMI Explorer 并探索 configuaartiona 类和构造查询。仅举几例免费的：

*   Microsoft WMI CIM Studio 不擅长查询，但可以很好地查看类
*   来自 www.ks-soft.net 的 WMI Explorer 变成了我用得最多的一个

您还需要在谷歌上搜索 WMI 查询语言示例并阅读[规范](http://msdn.microsoft.com/ru-ru/library/windows/desktop/aa394606.aspx)：虽然 WMI 语言类似于 SQL 查询，但它有一些不同的语法和一组难以预测的非统一限制。

* * *

我个人在不同的方向上使用它：我需要制作一个按物理磁盘或网络服务器分组的卷列表（驱动器号）。

我以（快速且非常丑陋，但足以在程序初始化时一次性工作）单元结束，如下所示。您可以对其进行流线化处理，并且您肯定必须反转请求和功能。

```
unit WMI_Helper;

interface

function WMINetDiskName(const disk: string { 'C:' - w/o slash } ): string;
function WMIPhysDiskName(const disk: string { 'C:' - w/o slash } ): string;
function WMIGetVolumeName(const disk: string { 'C:' - w/o slash } ): string;

implementation

uses magwmi, SysUtils, StrUtils, Windows, IOUtils;

function WMIGetProp(const query, param, resultProp: string): string;
begin
  if MagWmiGetOneQ(StringReplace(query, '%s', param, []), resultProp, Result) <= 0
  then
    Result := '';
  Result := Trim(Result);
end;

function WMINetDiskName(const disk: string { 'C:' - w/o slash } ): string;
const
  req = 'select ProviderName from Win32_MappedLogicalDisk where DeviceID = "%s"';
  prop = 'ProviderName';
var
  i: integer;
begin
  Result := WMIGetProp(req, disk, prop);

  If not TPath.IsUNCPath(Result) then
    exit('');

  i := PosEx('\', TPath.GetPathRoot(Result), 3);
  if i <= 0 then
    exit('');

  SetLength(Result, i - 1);
end;

function WMIPhysDiskName(const disk: string { 'C:' - w/o slash } ): string;
const
  resultProp = 'DeviceID';
  reqPart = 'ASSOCIATORS OF {Win32_LogicalDisk.DeviceID="%s"} WHERE ResultClass=Win32_DiskPartition';
  reqDisk = 'ASSOCIATORS OF {Win32_DiskPartition.DeviceID="%s"} WHERE ResultClass=Win32_DiskDrive';
begin
  Result := WMIGetProp(reqPart, disk, resultProp);
  if Result > '' then
    Result := WMIGetProp(reqDisk, Result, resultProp);
end;

function WMIGetVolumeName(const disk: string { 'C:' - w/o slash } ): string;
const
  prop = 'VolumeName';
  reqNet = 'select VolumeName from Win32_MappedLogicalDisk where DeviceID = "%s"';
  reqPhy = 'select VolumeName from Win32_LogicalDisk where DeviceID = "%s"';

begin
  Result := WMIGetProp(IfThen(GetDriveType(PChar(disk)) = DRIVE_REMOTE, reqNet,
    reqPhy), disk, prop);
end;

end. 
```

* * *

我没有尝试无字母卷（例如 c:\ 和 c:\Windows 将是一个分区，而 c:\Windows\Temp 将驻留在另一个磁盘上），但如果您需要考虑此类配置，我相信您可以在 WMI Explorer 中进行适当的查询并将其添加到您的程序中。

# asp.net - 在 ASP.net 中显示多个节点

> ID：13696329
> 
> 赞同：2
> 
> 时间：2012-12-04T04:56:11.943
> 
> 标签：asp.net, xml, vb.net, master-pages, nodes

我的应用程序中有来自 Web 服务的 xml 数据，其输出如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
-<NewDataSet> 
-<Table> 

   <RecipeID>12923</RecipeID>
    <RecipeNumber>R-000023</RecipeNumber> 
    <Name>Orange Pineapple Honey chicken (2)</Name> 
    <Servings>4</Servings>
     <PrepTime>20</PrepTime> 
    <CookTime>90</CookTime>
    <MarinateTime>0</MarinateTime> 
    <StandTime>0</StandTime> 
    <ChillTime>0</ChillTime>
    <BrewTime>0</BrewTime> 
    <FreezeTime>0</FreezeTime> 
    <TotalTime>110</TotalTime>  
    <MethodHeader>Makes 4 servings</MethodHeader> 
    <SubTitle>Tasty variation of the delicious honey chicken with an orange pineapple sauce.
</Table> 
-<Table1> 

 <Description>3 lbs. skinless boneless chicken breast halves</Description>  

</Table1> 
-<Table1> 

  <Description>2 Tbsp. salt</Description> 

</Table1> 
-<Table2> 

 <Note>Preheat oven to 350°F. Thoroughly wash chicken breasts and add salt.</Note> 

</Table2> 
-<Table2> 

 <Note>Place the salted chicken breasts in a large baking dish and set them aside. To make the sauce, combine the honey and the pineapple juice.</Note> 

</table2>

</NewDataSet> 
```

因此，我使用 ReadXml 将其放入数据集中，并通过 `<%#Eval("RecipeID")%>`在我的母版页源中使用 inside 等方法在 DataList 中显示信息。

问题是当我到达`<table1>`. 我无法获得多个节点（鸡肉和盐）。我怎样才能获取这两个节点。所以我可以继续在`<table2>`哪里我也做同样的事情并获得两个`<note>`节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:30:45.887

不能在单个 DataSet 中创建两个同名的 DataTable。您可以通过执行以下操作来验证：

```
var ds = new DataSet();
ds.Tables.Add(new DataTable("Table1"));
ds.Tables.Add(new DataTable("Table1")); 
```

我认为您需要将其中的两行折叠`<Table1>`到一个表中。那么你将不会有任何绑定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:52:52.570

我刚刚使用 .selectNodes 并在循环中获取每个项目

# sql - 这些 SQL 语法有什么区别？

> ID：13696331
> 
> 赞同：2
> 
> 时间：2012-12-04T04:56:27.797
> 
> 标签：sql, foreign-keys, create-table

我正在寻找有关外键的信息....再次！...并且碰巧在 webschools.com 上注意到他们对同一件事有不同的例子。对于他们拥有的外键示例

```
CREATE TABLE Orders
(
O_Id int NOT NULL,
OrderNo int NOT NULL,
P_Id int,
PRIMARY KEY (O_Id),
FOREIGN KEY (P_Id) REFERENCES Persons(P_Id)
) 
```

* * *

```
CREATE TABLE Orders
(
O_Id int NOT NULL PRIMARY KEY,
OrderNo int NOT NULL,
P_Id int FOREIGN KEY REFERENCES Persons(P_Id)
) 
```

* * *

```
CREATE TABLE Orders
(
O_Id int NOT NULL,
OrderNo int NOT NULL,
P_Id int,
PRIMARY KEY (O_Id),
CONSTRAINT fk_PerOrders FOREIGN KEY (P_Id)
REFERENCES Persons(P_Id)
) 
```

现在..........

有什么不同？...

我怎么知道我应该为我的数据库使用哪一个？我有一种感觉，这将有助于解决我对 SQL 的很多困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:58:38.777

效果上没有区别：它们实现了完全相同的东西。

我更喜欢内联版本，因为它使 fk 定义尽可能接近列定义。

还有第三种方式 - 一个单独的`alter table`声明（我认为这是“官方”方式）：

```
alter table orders
add contraint fk_PerOrders 
foreign key p_id references persons(p_id); 
```

您可能会发现某些数据库不支持一个版本或另一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T04:58:54.820

他们都在做同样的事情。使用你觉得容易理解的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T05:05:09.997

都一样（三种方式）：

*   首先，您首先定义`P_Id`为`int`然后定义的外键约束。
*   其次，`P_Id int FOREIGN KEY REFERENCES Persons(P_Id)`. `P_Id`是排便和外键约束排便在同一行。

*   第三，`a foreign key constraint name`也是给`fk_PerOrders`。可以`useful later when you wants to drop constraint`。例如

> ALTER TABLE 订单
> DROP FOREIGN KEY fk_PerOrders

为约束命名总是好的做法。

# c++ - 文件不会将输出保存到文件，并奇怪地打印出一个字符串 C++ Linux

> ID：13696334
> 
> 赞同：1
> 
> 时间：2012-12-04T04:57:04.113
> 
> 标签：c++, file-io, user-input

我正在尝试制作密码代码，用户输入密码，然后它将密码保存到 /tmp/ 中的文件中，然后它将输出密码（对我来说，这样我可以找到错误）。我已经包含了“字符串”库，并且我将密码类型设置为字符串，但是当我输出它时，它的输出是这样的：

```
0x7fffb55baac0password // <-- thats the password I entered 
```

它会输出十六进制（我认为），然后是我输入的密码，它不会将其保存到我想要的 /tmp/ 中的文件（或 /tmp/ 中的任何文件）。这是源代码：[http](http://codepad.org/3aamAv7R) ://codepad.org/3aamAv7R 感谢你们迄今为止给我的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:02:13.400

```
ifstream password_read ("/tmp/qT9Cp0XPKZ.txt");
cout<< password_read;
password_read.close(); 
```

password_read 属于 ifstream 类型，因此您将得到的要么是垃圾，要么是它的内存地址。为了显示 INSIDE password_read 是什么，您需要有一个变量来保存所述信息。

```
 const int BUFFER = 1204; //maximum size of password(might be a large password)
 getline(password_read,Data,BUFFER); //if the password happens to contain whitespaces
 cout << Data; 
```

还：

```
ofstream password ("/tmp/qT9Cp0XPKZ.txt");
password.open("/tmp/qT9Cp0XPKZ.txt"); 
```

ofstream 的构造函数将为您打开文件，因此后面的行是模棱两可的。

# javascript - jquery脚本不改变div的类

> ID：13696336
> 
> 赞同：1
> 
> 时间：2012-12-04T04:57:15.580
> 
> 标签：javascript, jquery, html, css

在我的单页站点上，我有一个脚本，它被称为向内容区域的 div 添加“阅读更多”样式的链接。单击按钮时，它应该更改内容区域的类以允许查看所有内容。再次单击时，它应该隐藏内容。

这是我遇到问题的网站：http: [//lexisnexis.stacklaw.com.au/](http://lexisnexis.stacklaw.com.au/)
但是，它在这个网站上运行良好：http: [//nundoobah-retreat.com.au/about.html](http://nundoobah-retreat.com.au/about.html)

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:03:14.903

`switchClass`当您的脚本运行该方法时，JQuery 抛出一个脚本错误——“找不到 .curCSS” 。

我不确定，但这可能是因为您运行的是旧版本的 JQuery UI，而不是 JQuery 核心：

```
<script type="text/javascript" src="/templates/microsites//js//jquery-1.8.3.min.js"></script>     
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js" type="text/javascript"></script> 
```

该`curCSS`方法在 JQuery 1.8.0 中已弃用。

我建议升级到最新版本的[JQueryUI](http://jqueryui.com/)。或者，不要使用`switchClass`（属于 JQuery UI），而是使用`removeClass`/`addClass`或`slideUp`/ `slideDown`（核心 JQuery 库的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:46:42.670

这是 jquery-ui 的 curcss 问题。[http://bugs.jquery.com/ticket/11921](http://bugs.jquery.com/ticket/11921)

你可能会在 1.9.0 以后使用 jquery-ui。

# python - 计算列表中所有元素与单个句子的相似度

> ID：13696337
> 
> 赞同：2
> 
> 时间：2012-12-04T04:57:32.847
> 
> 标签：python, string, comparison

1.  我需要将一个长列表中所有句子的相似度量化为一个句子。也许使用 Levenshtein 或 difflib。
2.  然后，我必须删除列表中那些超过某个给定阈值的句子，比如 difflib 中的 90%。

你们能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:04:41.450

```
>>> mylist = ['ham and eggs', 'spam and legs', "it's time to die, mr bond!"]
>>> import difflib
>>> close_matches = difflib.get_close_matches('spam and eggs', mylist)
>>> close_matches
['spam and legs', 'ham and eggs']
>>> set(mylist) - set(close_matches)
set(["it's time to die, mr bond!"]) 
```

# javascript - Selenium Ruby Webdriver中get_eval的等效方法

> ID：13696343
> 
> 赞同：0
> 
> 时间：2012-12-04T04:58:19.560
> 
> 标签：javascript, ruby, selenium, webdriver

我有以下代码在 Selenium RC 中很好地使用了“get_eval”方法：

```
@selenium.get_eval("var window = this.browserbot.getUserWindow(); var
   map = window.F1.Maker.current_map; var layers = map.getLayers();
   layers[0].guid"); 
```

有人请指导我在 Selenium Ruby Webdriver 中使用“get_eval()”的等效方法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:05:59.473

`driver.execute_script`将达到同样的目的。

# jquery - Peculiar Jquery behavior when using .effects()

> ID：13696344
> 
> 赞同：1
> 
> 时间：2012-12-04T04:58:23.507
> 
> 标签：jquery

I was trying to use .effect( "bounce", "slow" ) on a div but three more divs appeared instead. The problem is quite hard to explain in text, so I have included a JSFiddle link at the bottom.

I wasn't sure if it was my code so I copied the entire source directly from the documentation to JSFiddle and got the same result.

[http://jsfiddle.net/ryBjh/](http://jsfiddle.net/ryBjh/)

Here's the code:

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>effect demo</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
    <style>
    div {
        width: 100px;
        height: 100px;
        background: #ccc;
        border: 1px solid #000;
    }
    </style>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>

<p>Click anywhere to apply the effect.</p>
<div></div>

<script>
$( document ).click(function() {
    $( "div" ).effect( "bounce", "slow" );
});
</script>

</body>
</html> 
```

Tested on Chrome Script works normally on ie8 and firefox... so is this a chrome bug?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:38:36.077

显然 chrome 在页面中添加了额外的 div，然后将 css 样式和动画应用于所有 div 元素。看起来只有 1 个 div，但浏览器插入了几个它自己的。

我更改了代码，因此它只会影响 .box 类，并且一切都按预期工作。

以下是适用于所有浏览器的新代码：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>effect demo</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
    <style>
   .box {
        width: 100px;
        height: 100px;
        background: #ccc;
        border: 1px solid #000;
    }
    </style>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>

<p>Click anywhere to apply the effect.</p>
<div class= 'box' ></div>

<script>
$( document ).click(function() {
    $( ".box" ).effect( "bounce", "slow" );
});
</script>

</body>
</html>​ 
```

# hibernate - store database value into arry list using hibernate

> ID：13696347
> 
> 赞同：0
> 
> 时间：2012-12-04T04:58:31.617
> 
> 标签：hibernate, struts2

I created a login application using struts2 and hibernate. I get login details from Login table and stored into list in hibernate dao class. That list is passed to the login_action class.In action class I am using iterator to get the value, but I want store the database value(not a object) in array list in dao class. How to store a value(ex:david,103) into array list in dao class

```
public class DAOClass {
    ...
    public List getPwd(LoginModel lm) {
        Session session=null;
        List pwdlist = null;
        session = sessionfactory.openSession(); 
        try {
            Query q=session.createQuery("from LoginModel l where UId='"+lm.getUname()+"'");
            pwdlist=q.list();
        } catch (Exception e){
            e.printStackTrace();
        } 

        return pwdlist;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:55:20.730

您只能选择特定列而不是所有列：

```
List<Object[]> list = session.createQuery("select column1, column2 from LoginModel l where UId='"+lm.getUname()+"'"); 
```

它将返回对象数组的列表 where`column1 -> array[0]`和`column2 -> array[1]`。这个查询要快一些，因为它只从数据库中获取特定的列。但是您仍然需要遍历集合以获取值。

顺便说一句，使用`setParameter`方法将值绑定到命名查询参数。使用`setParameter`将防止 SQL 注入。

```
List<Object[]> list = session.createQuery("select column1, column2 from LoginModel l where UId=:uid").setParameter("uid", lm.getUname()); 
```

# android - Retrieve images from Google Places API

> ID：13696350
> 
> 赞同：0
> 
> 时间：2012-12-04T04:58:37.980
> 
> 标签：android, google-places-api

I am using the Google Places api to get places data:

```
https://maps.googleapis.com/maps/api/place/search/json? + "location=" + strlatitude + "," + strlongitude + "&" +"radius=" + searchRadius + "&" +"types="+ types + "&" + "sensor=true" + "&" + "key=" + googleAPIKey; 
```

I am just getting only "icon" from this response.But I want to get image of that place.

Is there any parameter to get the image of the places?

Additionally, how can I get reviews of the places (like 9reviews, 6reviews, etc.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:10:22.923

您可以`image_link`使用获取`JSONObject`，并且可以使用 轻松将特定链接转换为图像`Bitmap`。

**例如，`image_link`从`Json`：**

```
JSONObject jsonObj = new JSONObject(Global.JSON.toString()); 

// Creating JSON Parser instance
JSONArray jr=jsonObj.getJSONArray("results");

for(int h=0;h<jr.length();h++)
{       
    JSONObject js=jr.getJSONObject(h);      
    icon_array=js.getString("icon");    
} 
```

***将链接转换为图像***

```
url = new URL("http://www.paho.org/Images/DD/PIN/whd08_banner2_eng.jpg");
//In URL pass your link

bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
image_view.setImageBitmap(bm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:06:17.920

我找到了从 Places Api 获取位置图像的链接。

**试试这个链接**

[http://maps.googleapis.com/maps/api/streetview?size=400x400&location=40.720032,%20-73.988354&fov=90&heading=235&pitch=10&sensor=false](http://maps.googleapis.com/maps/api/streetview?size=400x400&location=40.720032,%20-73.988354&fov=90&heading=235&pitch=10&sensor=false)

***对于上面的链接，你会得到这样的图像*** ![在此处输入图像描述](../Images/0eab7417869ae987badbbd24e341ced8.png)

***参考链接***
[https://developers.google.com/maps/documentation/streetview/](https://developers.google.com/maps/documentation/streetview/)

# unit-testing - Grails 单元测试模拟服务返回无效对象

> ID：13696355
> 
> 赞同：0
> 
> 时间：2012-12-04T04:59:00.910
> 
> 标签：unit-testing, grails, groovy

我正在为此（工作正常）Grails 服务创建单元测试：

```
class CommonCodeService {

    def gridUtilService

    def getList(def params){
        def ret = null

        try {
            def res = gridUtilService.getDomainList(CommonCode, params)
            def rows = []
            def counter = 0
            res?.rows?.each{ // this is line 15
                rows << [
                        id: counter ++,
                        cell:[

                            it.key,  
                            it.value  
                        ]
                ]
            }

            ret = [rows: rows, totalRecords: res.totalRecords, page: params.page, totalPage: res.totalPage]

        } catch (e) {
            e.printStackTrace()
            throw e
        }

        return ret
    }

} 
```

这是来自合作者的一种方法`GridUtilService`：

```
import grails.converters.JSON

class GridUtilService {

    def getDomainList(Class domain, def params){
        /* some code */
        return [rows: rows, totalRecords: totalRecords, page: params.page, totalPage: totalPage]
    }
} 
```

这是我的（不工作）单元测试：

```
import grails.test.mixin.TestFor
import grails.test.mixin.Mock
import com.emerio.baseapp.utils.GridUtilService

@TestFor(CommonCodeService)
@Mock([CommonCode,GridUtilService])
class CommonCodeServiceTests {

    void testGetList() {
        def rowList = [new CommonCode(key: 'value', value: 'value')]
        def serviceStub = mockFor(GridUtilService)
        serviceStub.demand.getDomainList {Map p -> [rows: rowList, totalRecords: rowList.size(), page:1, totalPage: 1]}
        service.gridUtilService = serviceStub.createMock()
        service.getList() // this is line 16
    }

} 
```

当我运行测试时，它显示异常：

```
No such property: rows for class: com.emerio.baseapp.CommonCodeServiceTests
groovy.lang.MissingPropertyException: No such property: rows for class: com.emerio.baseapp.CommonCodeServiceTests
    at com.emerio.baseapp.CommonCodeService.getList(CommonCodeService.groovy:15)
    at com.emerio.baseapp.CommonCodeServiceTests.testGetList(CommonCodeServiceTests.groovy:16) 
```

似乎模拟`GridUtilService`返回`CommonCodeServiceTests`实例而不是`Map`. 我的单元测试有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:14:02.820

看起来您需要为模拟`getDomainList()`调用修复方法参数。你有它`Map m`，但它可能需要`Class c, Map m`。

从[文档](http://grails.org/doc/latest/guide/testing.html#mockingCollaborators)，

> 闭包参数必须与模拟方法的数量和类型匹配，否则您可以在主体中随意添加任何内容。

为什么在论点上的失误会表现得如此糟糕。我可以使用我自己的精简类来复制您的问题。我还发现，当参数丢失时，方法调用的返回类型是测试类的闭包，至少对于我的简单情况，然后可以`.call()`'ed 以获得所需的（模拟）结果。我不确定这种行为是否支持某种功能或者是一个错误。这当然令人困惑。

# html - 如何创建一个在背景上有文本（带有指针/箭头）的 div，从而需要自动扩展宽度？

> ID：13696356
> 
> 赞同：0
> 
> 时间：2012-12-04T04:59:00.367
> 
> 标签：html, css, responsive-design

如何使用 :after 选择器创建一个带有文本的 div，它会自动扩展以适应文本的宽度？

听起来很复杂？也许是的。

我首先使用 div id 和 :after 选择器解决了这个问题，但是我们遇到了太多的兼容性和功能问题。我可以在 chrome 中使它看起来不错，但是每当我缩放对齐和放置时，都会变得很糟糕。

我有一个用 .png 文件替换背景颜色和 :after 的想法，但我不完全确定我会怎么做？下面的代码在左侧有一个指针，然后是一个长的水平主体，我可以将其从 .psd 拼接成 3 个 png 文件——一个用于指针，一个 1px 图像用于重复，然后一个用于完成 div。

我希望这很清楚。请参阅下面的代码，并随时问我任何问题！

```
#div1 {
padding:6px 0 0 0;
left:49px;
position:relative;
float:left;
height:35px;
background-repeat:no-repeat;
background-position:left
}

#div1 p {
font-family:sans-serif,Helvetica;
font-size:14px;
font-style:italic;
text-decoration:none;
color:#FFF;
margin:5px 0 0 -2px;
padding-right:10px;
text-shadow:0 1px 0 #000
}

.div2 {
width:auto;
min-height:30px; 
max-width:420px;
background: #fc1e10;
color:white;
padding:5px 10px 0 10px;
position:relative;
word-wrap:break-word;
margin-bottom:2em;
margin-left:20px;
-webkit-box-shadow:3px 3px 0 rgba(0,0,0,.3), inset 0 2px 2px rgba(253,116,84,.9);
box-shadow:3px 3px 0 rgba(0,0,0,.3), inset 0 2px 2px rgba(253,116,84,.9);
border-bottom:solid 1px;
border-bottom-color:#fd7454;
border-top:solid 1px;
border-top-color:#f11d1a;
}

.div2:after { 
content:'';
display:block;
position:absolute;
top:-.05em;
left:-2.16em; 
width:0;
height:0;
border-color: transparent #fc1e10 transparent transparent;
border-style: solid;
border-width: 1.14em;
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T05:07:46.417

它必须是一个：之后，它可以是div内的一个跨度吗？

# scala - 为什么 Scala 的 toSeq 将不可变的 Set 转换为可变的 ArrayBuffer？

> ID：13696357
> 
> 赞同：19
> 
> 时间：2012-12-04T04:59:12.677
> 
> 标签：scala, set, sequence, immutability, scala-collections

如果我调用`toSeq`一个不可变的`Set`集合，我会得到一个`ArrayBuffer`.

```
scala> Set(1,2,3).toSeq // returns Seq[Int] = ArrayBuffer(1, 2, 3) 
```

这让我很惊讶。鉴于 Scala 强调使用不可变数据结构，我希望得到一个不可变序列，例如 a `Vector`or`List`而不是 mutable `ArrayBuffer`。set 元素的返回顺序当然应该是未定义的，但似乎没有任何语义上的原因说明该顺序也应该是可变的。

一般来说，我希望 Scala 操作总是产生不可变的结果，除非我明确地请求一个可变的结果。这一直是我的假设，但这里的假设不正确，实际上我只花了一个小时调试一个问题，即意外存在`ArrayBuffer`导致`match`语句中出现运行时错误。我的解决方法是更改`Set(...).toSeq`​​为`Set(...).toList`，但这感觉像是一个 hack，因为那时我的应用程序没有什么特别需要列表的地方。

返回一个可变对象是`Set(...).toSeq`Scala实现中的一个缺陷，还是我在这里误解了一个原则？

这是 Scala 2.9.2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T05:45:32.950

[这](http://grokbase.com/t/gg/scala-internals/12apbqpqbc/seq-aliasing-scala-collection-seq-considered-dangerous)是最近关于 Seq 是否应该意味着 immutable.Seq 的线程。

罗兰·库恩：

> collection.Seq 没有​​变异器根本不是有效的防御！

可变可变参数的例子相当狡猾。

最近，

```
scala> Set(1,2,3)
res0: scala.collection.immutable.Set[Int] = Set(1, 2, 3)

scala> res0.toSeq
res1: Seq[Int] = ArrayBuffer(1, 2, 3)

scala> res0.to[collection.immutable.Seq]
res2: scala.collection.immutable.Seq[Int] = Vector(1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-04T05:18:10.933

我同意这有点奇怪，但我不相信这是一个缺陷。首先，考虑一下：编译时类型`Set.toSeq`是

```
() => Seq[Int] 
```

不是

```
() => ArrayBuffer[Int] 
```

`ArrayBuffer`恰好是返回对象的运行时类型（可能是因为`Set.toSeq`添加到 an`ArrayBuffer`然后只返回它而不进行转换）。

所以，即使`toSeq`给你一个可变对象，你也不能真正改变它（没有强制转换或模式匹配`ArrayBuffer`——所以真正的“奇怪”部分是 Scala 允许你在任意类上进行模式匹配）。（你必须相信它`Set`不会抓住对象并改变它，但我认为这是一个公平的假设）。

另一种看待它的方式是，可变类型比不可变类型更具体。或者，换一种说法是，每个可变对象也可以被视为不可变对象：不可变对象有一个 getter，一个可变对象有一个 getter*和*一个 setter——但它仍然有一个 getter。

当然，这可以被滥用：

```
val x = new Seq[Int] {
    var n: Int = 0
    def apply(k: Int) = k
    def iterator = {
        n += 1
        (0 to n).iterator
    }
    def length = n
}

x foreach println _
0
1

x foreach println _
0
1
2 
```

但是，好吧，很多事情也可以。

# javascript - 单击孩子时如何不激活母亲？

> ID：13696361
> 
> 赞同：0
> 
> 时间：2012-12-04T04:59:23.983
> 
> 标签：javascript, jquery

[http://jsfiddle.net/aQb9H/](http://jsfiddle.net/aQb9H/) 最好的方法是什么，不要在单击其子项时激活父项。现在，当点击孩子时，两者都被激活。

```
<!DOCTYPE html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script>
$(document).ready(function(){

    $('#child').click(function(){
        $('#output').append('Child is activated ||')
    })

    $('#mother').on('mousedown',function(){
        $('#output').append('Mother is activated ||')
    })

})
</script>
</head>

<style>
#mother,#child,#output{
display:block;
color:white;
font-weight:bold;
cursor:pointer;
}
#mother{
width:100px;height:100px;
padding:30px;
margin:20px;
background-color:purple;
}
#child{
width:100px;height:100px;
background-color:orange;
}
#output{
    width:300px;height:100px;
border:2px solid red;
color:black;    
}
</style>
<body>
    <h1>Click Child, I don't want to activate mother when clicking child</h1>
<div id='mother'>
    Mother
    <div id='child'>Child</div>

</div>
<div id='output'> Output:  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:04:49.927

尝试这个

**[演示](http://jsfiddle.net/pintu31/aQb9H/1/)**

```
$('#child').on('mousedown', function(e){
    e.stopPropagation();
    $('#output').append('Child is activated ||')
})

$('#mother').on('mousedown',function(){
    $('#output').append('Mother is activated ||')
}) 
```

# html - 如何在同一轮播中滑动图像时在轮播中显示默认图像？

> ID：13696362
> 
> 赞同：1
> 
> 时间：2012-12-04T04:59:24.873
> 
> 标签：html, sencha-touch, sencha-touch-2

**嗨，我已经使用 Sencha touch2 完成了应用程序。**在轮播中，我们在控制器级别从 Web 服务动态绑定图像。当我们在轮播中移动/滑动图像时，下一张图像需要时间来加载/显示在轮播中。如果加载原始图像需要时间，那么它将在轮播中显示默认加载蒙版。根据我们的要求，如果在滑动轮播时加载原始图像需要时间，我们需要在轮播中显示默认图像。加载原始图像后，无需显示默认图像，显然加载蒙版也将消失。**谁能告诉我如何实现这个煎茶 touch2？**

我的查看页面代码：

```
Ext.define('SLS.BRND.WEB.view.ProjectsView', {
  extend: 'Ext.Panel',
  requires: [        
  'Ext.Carousel'
  ],
  id: 'projectprofile',
  xtype: "projectspage",
  config: {
    autoDestroy: true,
    fullscreen: true,       
    layout: {
      type: 'vbox'
    },
    items: [{
      xtype: 'panel',
      layout: 'fit',
      flex: Ext.os.is.Phone ? 5 : 5,
      items: [{
        xtype: 'carousel',
        direction: 'horizontal',
        directionLock: true,
        id: 'ImgId',
        flex: Ext.os.is.Phone ? 5 : 5,                          
        config: {
          fullscreen: true                               
        }
      }]
    }]
  }
}); 
```

我的控制器页面代码：

```
var retrievedObject = localStorage.getItem('ProjectDetails');
jsonObj = Ext.decode(retrievedObject);
var cmp = Ext.getCmp('ImgId');

if (jsonObj != null) {
  if (jsonObj != null) {
    var itemsoverlay = [];
    if (jsonObj.ProjectMainGalleryRoyalGardenia != null) {
      for (var i = 0; i < jsonObj.ProjectMainGalleryRoyalGardenia.length; i++) {
        var imgURL = jsonObj.ProjectMainGalleryRoyalGardenia[i].ImageUrl;
        var senchaIoProjectImageURL = imgURL;
        var senchabigImage = imgURL;

        var images = [{ url: senchaIoProjectImageURL, bigUrl: senchabigImage}]
        Ext.each(images, function (picture) {
          var img = picture.url;
          var bigImg = picture.bigUrl;
          itemsoverlay.push({
            xtype: 'label',
            html: '<div style="width:' + window.innerWidth + 'px;height:' + SLS.BRND.WEB.Common.Constants.carouselCanvasHeight + 'px;"><img src=' + img + ' style="width:100%;height:100%"/></div>'
          });
        });
      }
    }
    cmp.setItems(itemsoverlay);
    cmp.setActiveItem(0);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:03:06.807

我可以看到的快速解决方案是向包含图片的 div 添加一个 CSS 类，例如：

```
itemsoverlay.push({
  xtype: 'label',
  html: '<div cls="myDiv" style="width:' + window.innerWidth + 'px;height:' + SLS.BRND.WEB.Common.Constants.carouselCanvasHeight + 'px;"><img src=' + img + ' style="width:100%;height:100%"/></div>'
}); 
```

然后在您的 CSS 文件中创建相关的 CSS 类：

```
.myDiv {
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbvAAAG7wBureguwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTM5jWRgMAAAAVdEVYdENyZWF0aW9uIFRpbWUANy8yNC8wN7cOTVAAAAzcSURBVHic7dtZU+PKHQXwo9ZiSZYtvLCHeyehklupSlW+/8fI062kimQyBBgW2wjvstXKg5HGi/wHZsAwcH4vgCRLrW4dqbstjDRNUxBRIfXaBSB6yxgQIoH1vR9MAYzjGON4Aq1TJInGNEmesWhET2dbFpQyYJkm3JID2zJ/aH9PCsg4nqA7GCLqDhBPpkiSBInWSNMUOk2hNYcz9LpMZcAwDCjDgGmZMJWC7zoIKwHKbgnWEwNjPGaQPhiNcd2OcNvtI0k0DAMAjPufAAwDhvB5ok2aXdEp0m9/QKeA59iob1XQrFVhmY8LihiQNE1x2brFZesW0ySBaZoMAv20Zr0cDa9Uwh92GqhW/Ac/szYgWmv89/wKnbseDKWgDEaD3getNQwAh7tNbNdDcdu1s1hfLq7RvuvBNE2Gg94VpRRgGPjf1xu0o668bdHC63aEdtSDqTgLTO+TYRizkFzeYDiO1263koDJdIrL1i0MYzYbQPReKWVgOk1w1bpdv83ygnbUQzyZQCmGg94/Q5mIun0MRuPC9QsBSYHZoNxg14o+BmUAk2mC226/eP38H/3BCON4wq4VfShKGej1R4VfdC8EZDAcYZokYD7oI1FKYTAaIZ5MV9fN/zEu2IDoI0jTFPFUCIhOU4zjCb/zoA9rWDBQ/xaQRCOeTDn+oA8rjicry/KApEihU73RAhG9JUnBW1d5QBKtMZ0mfILQhzWZCE8QpLOBCtFH9eA0LxEtYkCIBAwIkYABIRIwIEQCBoRIwIAQCRgQIgEDQiRgQIgEDAiRgAEhEjAgRAIGhEjAgBAJGBAiAQNCJGBAiAQMCJGAASESMCBEAgaESMCAEAkYECIBA0IkYECIBAwIkYABIRIwIEQCBoRIwIAQCRgQIgEDQiRgQIgEDAiRgAEhEjAgRAIGhEjAgBAJGBAiAQNCJGBAiAQMCJGAASESMCBEAgaESMCAEAkYECIBA0IkYECIBAwIkYABIRIwIEQCBoRIwIAQCRgQIgEDQiRgQIgEDAiRgAEhEjAgRAIGhEjAgBAJGBAiAQNCJGBAiAQMCJGAASESMCBEAgaESGC9dgGKBL4LABiOYiRab/z4XsmBaSrEkyniyXSj+zSVguc6AIDeYPQsx6bv9yafIMdH+zg+2s8vlE072Gng+Ggf9bCy8X16rpOf/ybkdV16nbp+697kE4Q2J3tam+abvFe+Ogbkg/vHP//z2kV40zYWkHoYwLFt9AZDJIlGsxbCsS2MxjG+3nQeHGt4JQdhpYyyN7vjxZMpOnfdlX66qRTqYYCy78FUConWuOv10Y56+TaB76JWrcCxLSRa46YTre3vO7aF3UZNLGs9DFANymuPJwkDH7WwAlMp9IcjDEfjtds+VO75Oo4n07zcJ6cXa/e516wBANpRNx8bzS9zbAvNWpiX7+tNBwCwXauiGpSRaI3Lmw6G4xjArP7Dio+y58GxZ5dXVh/L9ZbtA0DelvWwgngyWai/rE2zbfvDEa7b0UbGpxsLSK1aQeC7cEsOAt+FqWaP9MB3UfZdnHy5EE/4L58OkWiN4SiGaSrU/QD1MMDns0tEvQGA2cV8fLSfX0DDUQzHtnC0t51X+NHeNuphkK8PAx9h4C/sJ+OWHPzl0+FCWZVSOP16DWDWcMe/zPrv2f4C30UY+GjWwgfPqR4GONrbBgAMxzFq1QDNWrVw28eUO6tj27IQVvy83JLdxhYA5KGaX2ZbFuphkG+btVvZdxfGLIHv4veTUyRaY7seYrexheE4RpJoeO6svWthBf/6fLZyPrNjj3Cw08jrtDcY5e3llRwc/7IPUykMxzFMpRD4W6gG/sL+XsrGu1iB7+L8qoV21MsvEK/koB4GuO7crf3c8gWcVXCzFubLj/a24dgW4skUJ6cXeYNnd7LAd/NGOflygeE4xuFOA81aFQc7jZWAhIGP86sWrjt32GvWsNvYQj0M8oBs18M8HNn+sgb1Sg6262F+x11mKpVfFO2ol+8zO85ynT2l3PUwyOv4R4QVHyenF+gNRjg+2kfgu2jWqmhHPZx8ucgnFLKZt95ghKjbX3gaObaFv/7pCN79jXH2lAjy8zn9eo121IOpFI72txEG/kIZDnYaMJVC1Bvg89klTKXwtz//ml8zP3qOD9n4yKwT9fKTake9vCLLvid+LrsIsope5thWvvymEy1MpWa/16qzGaThOM67BFGvn38+C1KmHfXy0PYGw5Vj1qqzRo66g3x/w3GMqDtYWF9k/g5/2foWouLjPK3cN507XHfukGj9Q92Q04vrvAvXH47yMpx+vUaidWG3dDiOEU+m93d6d6VsAFD2Zm0dT6b5tZBojdH9uWXm27QTdfPtsuNm+3lJG3+CLDdYPJnCsa0HuwN7zRqatera7eYbYrhU0cvbeCUHf//tj4Xr54M1mcrfgWT7W94u+7vo4vj2WTv//aHvWp5a7ufqmxftJ0keHise7DQKb2KZ7Hwee94A8OlwV1z/Un6KWaztWjXvdmRdraKuSOahsA3HMc6vWqvLR8XBeit+hnJn44WoN8D5VQvxZFoY6qc6v2qt3PgeCutzeNWAzD9C7+67DEWy2YveYLTS3870BiMkWsNUCrWwUrjdXa+P4H6A+Rzfkke9AcLARzXwF8Ya1ft+9LqyAliYrQoDP982KOhqPne5X8r85MtyN3defzhC4Lv5OWVjt+UJivk2dUslcYz6UjYekKwSeoNhPkhNtBYHW1lFZzNEpqny/Ti2lVfyTecOu40thIGPT4e7uOlEAIAwKOPsftBaCyuzgfTRPi5bnbn+sod21F3bPSty04kQBj68koOjvW107roIfC+f4cmOX2S+8Y/2t+F17lD23MK3B5673C9lPhDNWrjwE5iFfziK0Y66eXf5+Jf9fPYvC8q886vWwoxX5242Fpm9umOunQR5LhsPSG8wQq0a5N2jbAZI6jdftjr5gO/T4e5CGBzbwsFOAyenF3llNWvVfBoUmDXc2VUrP9anw10EvptPsWblaN8PBJ9yLp/PLnGw01iYmYknU5xftcR3qbKyZF2SbGr09OJ6pb/93OV+KfFkisvWbX6TCgMfl63b/Ca229hCbzBEbzDCyZeL2Y2h5MCxLZxftWCa5kpAshvnch3Pr3tJRpqmKQCMxjF+//cp1CPmzr9HNk142brF15tO3rV6ygt5ge8iSXR+t8xmcOaXzW8LYG2XZP6lwOfotmQvIxaV5SHL5yV57nK/hKxd5l82fcwLqNmT4qZzh7OCsVZWx8Dzv8iptYbvlvDbH/+wsPzVxiDfc4LLn5EukIf2v26a8nv9SBfnKeV47nK/hKJ2WS7z8dE++sNRPq0dBuX86RCtGY++Rjfyp5jFovcn0Rq7ja2FmcjHdE03bWMBkd4Hoo/n89klgG9dr+/pmm4CnyD0qt7S06II/wmASMCAEAkYECIBA0IkYECIBAwIkYABIRIwIEQCBoRIwIAQCRgQIgEDQiRgQIgEDAiRgAEhEjAgRAIGhEjAgBAJGBAiAQNCJGBAiAQMCJGAASESMCBEAgaESMCAEAkYECIBA0IkYECIBAwIkYABIRIwIEQCBoRIwIAQCRgQIgEDQiRgQIgEDAiRgAEhEjAgRAIGhEjAgBAJGBAiAQNCJGBAiAQMCJGAASESMCBEAgaESMCAEAkYECIBA0IkYECIBAwIkYABIRIwIEQCBoRIwIAQCRgQIgEDQiRgQIgEDAiRgAEhEjAgRAIGhEjAgBAJGBAiAQNCJGBAiAQMCJGAASESMCBEgjwghjJgmgrpa5aG6BVZlrmyLA+IMgyYygRSRoQ+JssUA6KgFJ8g9HGZanXE8S0gpoLr2IBmROhjcl1nZdm3MQgAx7Gg+QyhDygF4DpCQADAtW0YhrGpMhG9GbZpomRbK8sXAhKUPdimiZQDdfpAkkSj7LmwrQcCUnJseG6JAaEPJUWKSuDNxhlLVobtzVp1E2UiehN0msItOdiqBIXrVwISBj7Knosk0S9eOKLXprVGI6zALviSECgIiGEYONipwzQNdrXoXUsSjcBzsV0L125T+C5W4Hs43GkgTVNohoTeoSTRcGwLvx7swDTXv5K4Omy/17xP1dlVG9NEwxJ2QvSzSFMg0QnKbgm/HuzALa1+9zHPSB/oR/WHI5xftdDtjwBj9s4Wvyuhn0mazmaq0jSFMgw0tirY364Xvnu17MGAzA6QIur2cXPbxWgcI55OkeoUhpqFxQCA7CfRK8ou5zSd/Z6mKUxTwbYtVDwPzVoVvld69P4eFZB543iC7mCIcTzFOJ4gnsRIkhSJTjCdavDhQq/JsiyYyoBpmnAdG45twSs5qJR9cayxzpMDsmyaJPlgPuWLjvTKlFIwjNnPordzn+qHA0L0nnFqikjwf/0qqzzaHOPmAAAAAElFTkSuQmCC);
} 
```

在这里，我只是将占位符图像转换为 Base 64 数据并将其添加为 div 的背景图像。这样，您的默认图像将在真实图片加载之前出现。

通过从 div 中删除 myDiv CSS 类，您可以在加载真实图片后轻松删除默认图片。

希望这可以帮助

# sql - SQL连接条件中的正则表达式

> ID：13696363
> 
> 赞同：0
> 
> 时间：2012-12-04T04:59:25.673
> 
> 标签：sql, regex, sql-server-2008

我正在尝试连接两个表，其中我用于连接的两列（每个表一列）的值不完全相同，

左连接表的正则表达式是：（`^d_0*\d+`例如 d_00233），右连接表的值是`\d+`（例如 233）

是否可以在 SQL 中做到这一点？（我使用的是 Microsoft SQL Server 2008）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:22:35.017

试试这样：

```
Select * from TableA a
Inner join TableB    b
On Right(a.Column1,3)= b.Column1 
```

您还可以使用 CTE 获取正确连接表数据的长度（例如 233），长度为 3，并`RIGHT`在我使用过的函数参数中重用此长度`3`。

**编辑：**

如果没有 CTE，我认为这应该可行：

```
Select * from TableA a
Inner join TableB    b
On Right(a.Column1,LEN(b.Column1))= b.Column1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:28:31.100

查询如何：

```
SELECT * FROM Table1 a INNER JOIN Table2 b 
ON CONVERT(INT, STUFF(a.ColumnName, 1, PATINDEX('%[0-9]%', a.ColumnName + '1')-1, ''))=b.ColumnName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:54:49.010

实际上我决定使用以下 SQL 而不是正则表达式：

`SELECT * FROM din2class RIGHT OUTER JOIN features_top20 ON din2class.din = CAST(SUBSTRING(dbo.features_top20.feature, 3,LEN(dbo.features_top20.feature)) AS INT)`

因此，我没有使用正则表达式，而是使用了简单的 Substring & Casting (to remove starting 0s) ，它似乎比正则表达式更容易使用

# javascript - 动态包含cordova JS

> ID：13696366
> 
> 赞同：0
> 
> 时间：2012-12-04T04:59:44.203
> 
> 标签：javascript, android, html, ios, cordova

以下 JS 片段动态包含 JS 文件，

```
var headID = document.getElementsByTagName("head")[0];
var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = 'http://172.26.224.57/ios/cordova-2.2.0.js';
headID.appendChild(newScript); 
```

但是调用自定义插件在以下调用中不起作用

```
 cordova.exec(onSuccess, onFail, "CustomPlugin", "getName", [tempObj]); 
```

但是，如果我像下面那样静态包含cordova js文件，它就可以工作。

```
<script type="text/javascript" src="http://172.26.224.57/ios/cordova-2.2.0.js"></script> 
```

# jquery - jQuery中的滑块

> ID：13696367
> 
> 赞同：0
> 
> 时间：2012-12-04T05:00:00.163
> 
> 标签：jquery

我正在尝试制作图像滑块，以下是我的代码：

**HTML**

```
<div class="slider_mian_cont">
  <div class="slider_inner">
        <ul>
            <li><img src="images/one.jpg" width="940" height="350" alt=" " /></li>
            <li><img src="images/two.jpg" width="940" height="350" alt=" " /></li>
            <li><img src="images/three.jpg" width="940" height="350" alt=" " /></li>
        </ul>
    </div>
</div>
<div id="next"><a href="#">next</a></div> 
```

**jQuery**

```
$(document).ready(function(e) {
    var len = $('.slider_mian_cont ul li').length;
    var wd = $('.slider_mian_cont ul').width();
    var mn = $('.slider_inner').width(wd*len);
    var testa = $('.slider_mian_cont ul li').width(); 
    $('#next').click(function(){  
        var leftValue = $('.slider_inner').position().left;
        //console.log('leftValue : ' + leftValue + ',  testa : ' + testa);
        var movedValue = leftValue - testa;
        //console.log('movedValue : ' + movedValue);
        $('.slider_inner').animate({ left: movedValue }, 200 )
        })
}); 
```

**CSS**

```
.slider_mian_cont{width:940px; height:350px; overflow:hidden; position:relative;}
.slider_inner{position:absolute;}
.slider_mian_cont ul{margin:0; padding:0; }
.slider_mian_cont ul li{margin:0; padding:0; float:left; width:940px; height:350px; list-style:none;} 
```

我只想设置条件，如果最后`<li>`来棕褐色“下一步”按钮停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:04:32.290

你可以试试这个，这会奏效

```
$(document).ready(function(e) {
    var len = $('.slider_mian_cont ul li').length;
    var wd = $('.slider_mian_cont ul').width();
    var mn=len*wd;
    //var mn = $('.slider_inner').width(wd*len);
    var testa = $('.slider_mian_cont ul li').width(); 
    //console.log(len, wd);
    //console.log(mn);
    $('#next').click(function(){ 
        var leftValue = $('.slider_inner').position().left;
        //console.log(leftValue);
        var movedValue = leftValue - testa;
        var posv=Math.abs(leftValue)
        var mix= posv+testa+wd;
        console.log(mix , mn);
        //$(this).toggle(mn <= mix)
        if(mix == mn){ $('#next').toggle();}
        $('.slider_inner').animate({ left: movedValue }, 200 )
    });

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T05:14:04.263

`next`以下将根据最后到达结束隐藏/显示您的按钮

```
$(document).ready(function(e) {
    var len = $('.slider_mian_cont ul li').length;
    var wd = $('.slider_mian_cont ul').width();
    var mn = $('.slider_inner').width(wd * len);
    var testa = $('.slider_mian_cont ul li').width();
     /* calculate max left*/
    var maxLeft = len * testa;

    $('#next').click(function() {
        var leftValue = $('.slider_inner').position().left;

        var movedValue = leftValue - testa;
        /* hide or show "#next" depending on end or not*/ 
        $(this).toggle(movedValue >= maxLeft);    

        $('.slider_inner').animate({
            left: movedValue
        }, 200)
    })
}); 
```

# c++ - 假设动态作用域，以下 C++ 程序的输出将是什么？

> ID：13696368
> 
> 赞同：0
> 
> 时间：2012-12-04T05:00:01.543
> 
> 标签：c++, function, dynamic, global-variables, scoping

假设动态作用域，以下 C++ 程序的输出将是什么？我有 turboc++ 编译器，其中显示的输出使用静态范围，答案如下：8 6 50 现在，我怀疑假设动态范围的输出将是 207 104 52 -- 或 -- 207 104 50

```
#include<iostream.h>
#include<conio.h>
int n=1;
void printn(int x)
{
  cout<<x+n<<"\n";
}
void increment()
{
  n=n+2;
  printn(n);
}
void main()
{
  clrscr();
  int n;
  n=200;
  printn(7);
  n=50;
  increment();
  cout<<n;
  getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:04:43.227

任何符合标准的编译器都会给您错误并且不会输出任何内容，因为您

```
#include<iostream.h> 
```

之后你使用

```
cout << ... 
```

`std::`没有用或有指令来限定它，`using`并且因为

```
void main() 
```

修复这些后，任何符合 C++ 的编译器都会输出

```
8 
6 
50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:37:19.693

我认为 PL 课程中相当标准的问题。

假设动态范围（和突变的 C++）

```
207
104
52 
```

很难测试，因为您的问题可能是理解范围界定的理论练习。但是，Perl（通常（幸运的是）静态作用域）支持动态作用域，如果您通过`local`关键字要求它：

```
my $x = 1;    # default lexical scope
local $y = 1; # dynamically scoped. 
```

所以，如果你愿意的话，你可以用 Perl 重写你的程序并尝试一下：

```
sub println {
  my $x = shift;
  printf "%d\n", $x + $n;
}

sub increment {
  $n = $n + 2;
  println($n);
}

sub main {
  local $n = 200; # $n will be dynamically scoped!
  println(7);
  $n = 50;
  increment();
  print "$n\n";
}

main(); 
```

给你`207 104 52`。

# c#-4.0 - 如何验证文本框在 c#.net 中只允许第一个字符大写后者？

> ID：13696373
> 
> 赞同：0
> 
> 时间：2012-12-04T05:00:28.727
> 
> 标签：c#-4.0, textbox, validating-event

我有一个任务，我的文本框只接受第一个字符大写字母和剩余字符正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:23:14.287

使用文本框的 KeyPress 事件：

```
    私人无效txt_KeyPress（对象发送者，KeyPressEventArgs e）
    {
        if (txt.Text != "" && !Char.IsUpper(txt.Text, 0))
        {
            txt.Text = Char.ToUpper(txt.Text[0]) + txt.Text.Substring(1);
        }
    }

```

# c++ - gtest 和 gmock 有什么区别？

> ID：13696376
> 
> 赞同：39
> 
> 时间：2012-12-04T05:01:05.940
> 
> 标签：c++, googletest, googlemock

我试图了解Google`google-mock`的[C++ 模拟框架](https://github.com/google/googletest/blob/master/googlemock/README.md)的目的。

我之前已经使用`gtest`过，但我仍然无法理解是什么`gmock`。为什么我们需要它？

`gtest`用于单元测试。如果需要`gmock`，我们需要什么？`gmock``unit testing`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-04T06:21:54.147

“Google Mock 本身并不是一个测试框架。相反，它需要一个用于编写测试的测试框架。Google Mock 与 Google Test 无缝协作。它附带了一份 Google Test 捆绑包。从 1.1.0 版本开始，您还可以使用它与您选择的任何 C++ 测试框架一起使用。” - Google Mock，系统要求

模拟就像对象，以通过提供受控行为来模仿真实交易的方式定义。例如，要测试股票报价应用程序，您将创建一个虚假股票数据提供程序，该提供程序创建虚假股票报价来测试您的代码。想想模拟这个词，字面意思是“模仿”。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-19T10:15:47.120

软件单元并不生活在绿色草地上。他们经常需要一些同行来做这项工作。在实际系统中，这些对应物属于系统本身。在单元测试中，它们被替换为模拟。

Gtest 是一个单元测试框架。Gmock 是一个在单元测试期间模仿系统其余部分的框架。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-13T19:54:24.090

假设您正在编写一段代码，它需要与不可预测的、昂贵的外部系统（例如网站、大型数据库、物理传感器等）进行交互。当外部系统超时时，您的代码需要继续工作，或者给你错误信息，或者给你不一致的数据。您如何测试您的代码是否真正满足这些要求？

好吧，您可以针对实际的网站/数据库/传感器/任何东西运行它很多次，并希望您能幸运地遇到您的代码应该处理的所有错误情况。显然是一种相当昂贵且不可靠的测试策略。

因此，相反，您编写的东西满足与网站/数据库/传感器/任何东西相同的界面，但是您已经对其进行了编程以产生某些“罐头”响应（错误、超时、不一致的数据等）。您的测试现在将运行得更快（因为它们不会面临*真实*网站/数据库/传感器/其他任何东西的开销），而且它们是可预测的。不幸的是，为您需要测试的每个场景编写一个单独的“模拟”网站/数据库/传感器/任何东西都需要大量编码。工作越多，你做的可能性就越小。结果：未充分测试的代码。

Gmock 和它的亲戚自动化了很多这样的东西，所以你可以在测试本身的中间指定所需的“罐头”行为，只需几行代码。如果测试很容易编写，您可能会编写更多测试，因此更有可能在发布代码之前发现错误 :-)

顺便说一句，这意味着您还需要“依赖注入”：您的代码需要接受接口类型的参数，并且您需要能够传入模拟对象（用于单元测试）或“真实”网站/数据库/传感器/任何东西（供实际使用）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-04-29T10:21:36.473

假设你想写一些东西到文件中。

您必须测试系统内存是否已满。

你会让系统内存满来测试这个吗？不。

您的朋友 Google mock 将在这里为您提供帮助。

# javascript - 如何以有效的方式向 HTML 元素添加属性？

> ID：13696377
> 
> 赞同：2
> 
> 时间：2012-12-04T05:01:05.030
> 
> 标签：javascript, jquery, html

我希望能够向 HTML 元素添加一个属性，以便能够识别它所指的内容。

例如，如果我有一个名称列表和每个名称旁边的复选框，如下所示：

```
<div id="users">
 Bob smith <input type=checkbox />
</div> 
```

当一个复选框被点击并调用它的事件处理函数时，我希望能够识别哪个用户被选中/取消选中。

理想情况下，我正在寻找这样的东西：

```
<input type=checkbox data-userId = "xxx" /> 
```

然后当它点击时：

```
function handleClick()
{
  var userId = $(this).attr('data-userId');
} 
```

但是，我希望以一种不会破坏我的 HTML 验证的方式来执行此操作，并且仍然是有效的 HTML 并且可以在所有浏览器中使用。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T05:04:48.273

[**数据属性**](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)由 html5 提供，是有效属性。您可以通过jquery的数据方法访问数据属性

```
var userId = $(this).data('userId'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T05:04:45.240

将 data- 属性添加到您的 dom 元素，然后使用

```
var userId = $(this).attr('data-userId'); 
```

甚至

```
var userId = $(this).data('userId'); 
```

**这是执行此操作**的正确方法，并且*不会*破坏任何 HTML 验证。

请注意，jQuery 会对您的 data- 属性执行一些大小写操作，如此[处](https://stackoverflow.com/a/7602630/352552)所述。为简单起见，请考虑更改`data-userId`为`data-userid`

# nhibernate - 我在哪里可以找到 nuget 中的 nhibernate.bytecode.castle dll？

> ID：13696381
> 
> 赞同：2
> 
> 时间：2012-12-04T05:01:28.370
> 
> 标签：nhibernate, nuget, castle

我正在尝试恢复旧的 asp.net-mvc 解决方案，它引用了我似乎没有的 nhibernate.bytecode.castle（尝试通过 Nuget 下载所有引用。

我可以通过nuget下载这个吗？我似乎无法通过搜索找到它。. 还是我应该不再使用它并且有替代品（不确定这是否已弃用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:41:58.790

所有旧的 NHibernate 版本都在这里： http: [//sourceforge.net/projects/nhibernate/ ?source=directory](http://sourceforge.net/projects/nhibernate/?source=directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:04:09.083

您可以通过搜索 nhibernate.castle 在 nuget 中找到它安装它

它将为您安装 castle.core，我认为这就是您正在寻找的

# r - 在 R 中使用 SPADE 方法时发生错误

> ID：13696382
> 
> 赞同：1
> 
> 时间：2012-12-04T05:01:48.303
> 
> 标签：r, data-mining

我目前正在使用 R 中的 SPADE 算法挖掘序列模式。 SPADE 包含在`arulesSequence`R 包中。我在 CentOS 6.3 64 位上运行 R。

作为练习，我尝试了[http://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Sequence_Mining/SPADE中提供的示例](http://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Sequence_Mining/SPADE)

当我试图做

```
cspade(x, parameter = list(support = 0.4), control = list(verbose = TRUE)) 
```

R 说：

```
parameter specification:    
support : 0.4
maxsize :  10
maxlen  :  10

algorithmic control:     
bfstype : FALSE     
verbose :  TRUE
summary : FALSE

preprocessing ... 1 partition(s), 0 MB [0.096s]     
mining transactions ... 0 MB [0.066s]    
reading sequences ...Error in asMethod(object) : 's' is not an integer vector 
```

当我尝试在 Window 7 32bit 上运行 SPADE 时，它运行良好，没有任何错误。

有谁知道为什么会发生这样的错误？

# jquery - 适合 ASP.NET 网站或云服务的流畅 UI？

> ID：13696387
> 
> 赞同：0
> 
> 时间：2012-12-04T05:02:07.250
> 
> 标签：jquery, css, asp.net-mvc, cloud, fluid-layout

我即将开始一个由 LOB 和云服务组成的新项目。

我在考虑 Silverlight，但它对我来说似乎是一种死技术，而且它需要一个插件。

我喜欢 Windows-Azure 的设计，我想知道在开始完全响应用户的 Fluid-UI 之前是否应该了解任何众所周知且有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:19:10.133

它们有很多……最值得注意的是 Twitter Bootstrap ( [twitter.github.com/bootstrap](http://twitter.github.com/bootstrap/) ) 和 Foundation ( [foundation.zurb.com](http://foundation.zurb.com/) )。
两者都允许简单的流体布局，并附带许多您可以使用的额外功能和组件！

HTML 5 和 Javascript 目前在 UI 方面是一个安全的选择，我会避免使用像 Silverlight 这样的插件，因为我认为让你的 UI 流畅的重点是跨设备方面，这有点像 Flash 和 Silverlight 这样的插件立即取消.

# java - 为什么这个while循环是无限的？

> ID：13696389
> 
> 赞同：2
> 
> 时间：2012-12-04T05:02:14.987
> 
> 标签：java

```
int MATCH_LENGTH = 0;
int FINAL_MATCH_LENGTH = 0;
int FINAL_MATCH_POS = 0;

while (window.contains(next)) {
    int MATCH_POS = window.indexOf(next);
    boolean nextMatches = true;
    while (nextMatches = true) {
        int index = window.indexOf(next);
        index++;
        int positionOfNext = fileArray.indexOf(next);
        positionOfNext++;
        MATCH_LENGTH++;
        char afterNext = fileArray.get(positionOfNext);
        char afterNextInWindow = window.get(index);
        if (afterNext != afterNextInWindow) {
            nextMatches = false;
            if (MATCH_LENGTH > FINAL_MATCH_LENGTH) {
                FINAL_MATCH_POS = MATCH_POS;
                FINAL_MATCH_LENGTH = MATCH_LENGTH;
                MATCH_LENGTH = 0;
            }
            window.remove(window.indexOf(next));
        }
    }
} 
```

我在这里遇到了一个无限循环。我认为这是因为`nextMatches`布尔变量。但是，我不确定这对程序有何影响，因为我的`while`循环条件为`while (window.contains(next))`. 但是，我将`next`一一删除，因此最终`while (window.contains(next))`将不得不返回 false 并且`while`循环将不得不中断。尽管删除线，我的推理可能存在缺陷`window.remove(window.indexOf(next));`。

还是我推理的其他部分有缺陷？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T05:04:49.990

你犯了经典`=`vs`==`错误

```
while (nextMatches = true) 
```

应该

```
while(nextMatches) 
```

作为一般规则，**不要将布尔值与`true`and`false`**进行比较。在我看来，它只会导致这些奇怪的错误并使代码变得不那么清晰。如果您正确命名变量，Java 约定的布尔值听起来像一个条件。例如：`isEmpty`或`isFull`。这种方式读起来像英语：`while(isFull)`

我对你的逻辑有点困惑，特别是因为`int index = window.indexof(next)`不会改变任何东西。索引将被重新定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T05:05:51.920

问题就在这里 `while (nextMatches = true)`尝试 put 代替

```
while (nextMatches == true) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T05:23:37.427

我发现了问题。就是这一行：`int index = window.indexOf(next);`。我一遍又一遍地重新定义`index`为相同的数字，这导致了无限循环。问题解决了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T05:37:06.093

```
while (nextMatches == true) { 
```

此条件将是`false`当且仅当`nextMatches`分配给`false`。

您分配它的唯一位置`false`是在以下代码块中：

```
if (afterNext != afterNextInWindow) {
    nextMatches = false;
    ... 
```

因为，`while`对你来说是无限运行的，这意味着在代码执行时`nextMatches`永远不会分配`false`，即**`if`条件总是`false`**。

这意味着，在 ; 的每次迭代`while`中 `afterNext`总是等于`afterNextInWindow`。

# php - 在循环中动态命名 PHP 变量

> ID：13696391
> 
> 赞同：1
> 
> 时间：2012-12-04T05:02:21.473
> 
> 标签：php, loops, foreach

在执行 foreach 循环时，我无法动态命名我的 PHP 变量。这是我的代码：

```
$count = count($_POST['member']);
for ($i = 0; $i < $count; $i++) {
    $fname = $_POST['member'][$i]['fname'];
    $lname = $_POST['member'][$i]['lname'];
} 
```

我如何将包含在 & 中的数字附加`$i`到`$fname`&`$lname`以使`$fname`&`$lname`成为`$fname1`&`$lname_2`等等？或者有没有更好的方法来做到这一点？我没有尝试过任何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:09:13.810

```
$i = 0;
$output = array();

foreach ($_POST['member'] as $member)
{
   $output['fname' . $i] = $member['fname'];   
   $output['lname' . $i] = $member['lname'];
   $i++;
}

extract($output); 
```

虽然..为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:05:56.283

编辑：回答您的新问题 - 如何在会话中存储：

```
session_start();
$count = count($_POST['member']);
for ($i = 0; $i < $count; $i++) {
    $_SESSION["fname_{$i}"] = $_POST['member'][$i]['fname'];
    $_SESSION["lname_{$i}"] = $_POST['member'][$i]['lname'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:07:08.903

试试这个

```
$count = count($_POST['member']);
for ($i = 0; $i < $count; $i++) {
 $fname.'_'.$i = $_POST['member'][$i]['fname'];
 $lname.'_'.$i = $_POST['member'][$i]['lname'];
} 
```

所以你可以访问 $fname_1,$fname_2 等...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T05:06:16.583

嗨，试试php的简单连接（“。”）运算符。所以你的代码将是

```
$count = count($_POST['member']);
for ($i = 0; $i < $count; $i++) {
    $fname = $_POST['member']['fname'.$i];
    $lname = $_POST['member']['lname_'.$i];
} 
```

# ios - iOS Mapkit - 用户位置显示为 0, 0

> ID：13696394
> 
> 赞同：0
> 
> 时间：2012-12-04T05:03:14.787
> 
> 标签：ios, mapkit, cllocationmanager, userlocation

所以我正在构建一个基于位置的游戏，并且在让用户位置正确初始化时遇到问题。它并不总是发生，但有时位置永远不会从 0,0 改变。

这会导致一个问题，因为我有一个加载视图（保险库），它会阻止地图显示，直到加载玩家的位置而不是 0,0。因此，如果未设置用户位置，则保险库永远不会打开并显示地图。

有没有其他方法可以确保加载用户位置？仅供参考 - 我已经确保他们启用了位置服务并且他们的设备是有能力的。我在自己的设备上打开和关闭这个问题，一切都正确启用。

ViewDidLoad：

```
/*Location Manager*/
locationManager = [[CLLocationManager alloc] init]; 
locationManager.delegate = self; 
[locationManager setDistanceFilter:100.0];//Update location to network when player moves X meters
[locationManager setDesiredAccuracy:kCLLocationAccuracyKilometer];//Nearest 1000 meters (.33 miles)
[locationManager startUpdatingLocation];

/*Map View*/
mapLoaded = false;
currentFilter = 0;
[_mapView setDelegate:self];
[_mapView setShowsUserLocation:YES];
[_mapView setMapType:MKMapTypeSatellite]; 
```

位置经理代表：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    //Wait until User Location is initialized (NOT 0,0)
    NSLog(@"Latitude: %f, Longitude: %f",_mapView.userLocation.coordinate.latitude,_mapView.userLocation.coordinate.longitude);
    if(_mapView.userLocation.location.coordinate.latitude!=0.00 && _mapView.userLocation.location.coordinate.longitude!=0.00){

        //Update Player Object
        [player setLatitude:_mapView.userLocation.location.coordinate.latitude];
        [player setLongitude:_mapView.userLocation.location.coordinate.longitude];

        [player updatePlayerLocation];//Update location to network
        if(mapLoaded){//Map already loaded, call refresh
            [self refreshMap];
        }
        else{//First load of map
            [_mapView setCenterCoordinate:_mapView.userLocation.location.coordinate];
            [self populateMap];
            [self openVault];
            mapLoaded = true;//Disable map first load
            //timerMap = [NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(refreshMap) userInfo:nil repeats:YES];//Auto-Refresh of Map
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:08:40.490

您似乎试图从`_mapView.userLocation`CLLocation 对象中获取位置。

您应该使用`locations`传递给您的方法的数组中的最后一项。

另请参阅[文档](https://developer.apple.com/library/ios/DOCUMENTATION/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations)，[带有片段的指南](https://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)

# c# - 将自动属性转换为通知属性（WPF 中的 MVVM）

> ID：13696405
> 
> 赞同：8
> 
> 时间：2012-12-04T05:04:39.440
> 
> 标签：c#, wpf, visual-studio, mvvm, properties

有什么办法可以自动将 Auto 属性转换为 Notify Property 吗？

`INotifyPropertyChanged`

或 WPF 中 MVVM 的任何其他方式

```
public string Filename { get; set; } 
```

至

```
string _Filename;
public string Filename {
    get { return _Filename; }
    set {
        if (PropertyChanged != null) {
            _Filename = value; 
            PropertyChanged(this, new PropertyChangedEventArgs("Filename"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:13:25.293

有一个看起来很接近你需要的[魔法项目。](http://kindofmagic.codeplex.com/)

这是一个 MSBuild 任务，它处理您的程序集并将`PropertyChanged`调用添加到用某些属性修饰的`[Magic]`属性。我已经使用了一点，发现非常有帮助。

# iphone - 为什么只从 iphone 的 url 查看 xml 文件中最后一个元素的 UIImage

> ID：13696406
> 
> 赞同：0
> 
> 时间：2012-12-04T05:04:39.343
> 
> 标签：iphone, ios, ios6

当我从 URL 检索 XML 文件时，我可以解析 XML 文件中的所有元素并在日志文件中查看，我的解析代码如下所示，

```
-(id) loadXMLByURL:(NSString *)urlString{
tweets  = [[NSMutableArray alloc] init];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [[NSData alloc] initWithContentsOfURL:url];
parser = [[NSXMLParser alloc] initWithData:data];
parser.delegate = self;
[parser parse];
return self;}

-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
if([elementName isEqualToString:@"Products"]){
currentTweet = [egsBase alloc];}}

-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
if([elementName isEqualToString:@"img"]){
currentTweet.img=[UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:currentNodeContent]]];}
if ([elementName isEqualToString:@"Products"]) {
[tweets addObject:currentTweet.img];
currentTweet = nil;
currentNodeContent = nil;}}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
 currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];} 
```

我使用类名解析为`XmlParsing`. 在控制器类中，我已经实现了类文件`XmlParsing`，`XmlParsing xmlparser;`现在在 viewDidLoad() 函数中我使用这样的代码，

```
- (void)viewDidLoad{
[super viewDidLoad];
xmlParser = [[XMLParsing alloc] loadXMLByURL:@"http://images.com/Products.xml"];
UIImage *currentImage = [[xmlParser tweets] objectAtIndex:0];
customimage.image = currentImage;} 
```

这里`customimage`是 UIImageView 的参考，现在的问题是我只能获取最后一个元素值并显示在故事板中连接的 UIImageView 中（即）为了更好地理解它只显示最后一个元素图像而不是我在元素中使用的先前元素. 如何解决这个问题？我在哪里做错了。请建议我。

**XML的结构**

```
<Products>
 <products id="1">
   <img>http://images.com/images/Main_pic.png</img>
 </products>
 <products id="2">
  <img>http://images.com/images/image1.png</img>
 </products>
</Products> 
```

我的 NSLog 显示用于解析 XML 文件，

```
images <UIImage: 0x71529a0>
images <UIImage: 0x74a6750> 
```

当我打印以检查我得到的图像时，它显示当前图像为，

```
Current,<UIImage: 0x74a6750> 
```

在这里您可以看到当前图像仅显示最后一个元素而不是前一个元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:32:51.353

```
- (void)viewDidLoad
{
 1) [super viewDidLoad];
 2) xmlParser = [[XMLParsing alloc] loadXMLByURL:@"http://images.com/Products.xml"];
 3) UIImage currentImage = [[xmlParser tweets] objectAtIndex:0];
 4) customimage.image = currentImage;
} 
```

为了便于理解，我添加了行号：

**第 3 行**：你总是得到一个新的图像（我对吗？）

**第 4 行**：每当您获得新图像时，您将该图像设置为相同的图像视图（自定义图像），因为以前的图像会被新图像替换。

理想情况下，您应该将每个新图像设置为各自的图像视图。

**如果您尝试在表格视图中加载这些图像 ---** 那么图像视图的名称保持不变，但实际上对象不同，因此您应该通过在 cellForRowAtIndexPath 中分配的 TAG 访问每个单元格的图像视图。

**更新代码**

```
-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{
if([elementName isEqualToString:@"products"])
{
        currentTweet = [egsBase alloc];}}
}

-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
  if([elementName isEqualToString:@"img"])
   {
    currentTweet.img=[UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:currentNodeContent]]];
    [tweets addObject:currentTweet.img];
   }
 if ([elementName isEqualToString:@"products"])
  {
   currentTweet = nil;
   currentNodeContent = nil;
  }
} 
```

描述：当解析“产品”作为起始元素并创建对象时，当找到结束元素时，图像与对象关联并添加到数组中。我看到错误是：您在解析条件中使用“产品”而不是“产品”

希望这个想法有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:16:34.070

将字符串附加到 currentnodecontent

```
if(!currentNodeContent ) 
    currentNodeContent = [[NSMutableString alloc] initWithString:string];
else
    [currentNodeContent appendString:string]; 
```

# php - 在后台 PrestaShop 模块中使用 AJAX

> ID：13696417
> 
> 赞同：1
> 
> 时间：2012-12-04T05:05:06.817
> 
> 标签：php, ajax, json, class, prestashop

我正在为购物车 PrestaShop 创建一个模块，因此在创建一个可在其系统中工作的模块时，我必须遵循一套规则框架，并且我想通过 AJAX 提交表单而不重新加载页面。

这是模块页面的精简版本，它构建并确定显示的内容：

```
<?php
    class mymodule extends Module
    {
        private $_html = '';

        // Module information
            function __construct()
            {
                // Get shop version
                    $versionMask = explode('.', _PS_VERSION_, 3);
                    $versionTest = $versionMask[0] > 0 && $versionMask[1] > 3;
                // Module info
                    $this->name  = 'MyModule';
                    $this->tab   = $versionTest ? 'administration' : 'Administration';
                    if ($versionTest) { $this->author = 'JD'; }
                    $this->version = '0';
                    parent::__construct();
                    $this->displayName = $this->l('MyModule'); 
                    $this->description = $this->l('Description...');
            }

        // Display content
            public function getContent()
            {
                $this->_displayForm();
                return $this->_html;
            }

        // Build the display
            private function _displayForm()
            {
                $this->_html .= '<script src="../modules/mymodule/scripts.js" type="text/javascript"></script>
                                <form name="formName" id="formName" method="get">
                                    <input type="submit" name="submitModule" value="Continue" />
                                </form>';
            }
    }
?> 
```

通常有一个私有`_postProcess`函数处理表单数据，然后`getContent`在页面重新加载时调用该函数，然后您可以检查它是否应该显示表单或结果等。

但是因为我想用 AJAX 来做这件事，所以我已经删除了`_postProcess`不需要的函数，链接到我的`scripts.js`，它具有以下内容：

```
$(document).ready(function() {
    $('#formName').submit(function(e)
    {
        e.preventDefault();
        $.ajax({
            url: "ajax.php",
            type: "GET",
            dataType: "json",
            success: function(data)
            {
                if (data.response == 1)
                {
                    alert('true');
                }
                else
                {
                    alert('false');
                }
            }
        });
    });
}); 
```

以及我已经真正修剪过的 ajax.php 文件本身，因此它被迫显示结果：

```
<?php
    $json['response'] = 1;
    echo json_encode($json);
    exit();
?> 
```

但我总是收到错误**Uncaught TypeError: Cannot read property 'response' of null**，这显然告诉我 data.response 没有正确发送，因为它不知道是什么`response`。

如果我手动测试页面，一切正常，所以它让我相信它可能与它可能在课堂上的事实有关？而且我必须做一些与往常不同的事情才能让它发送数据？

或者 PrestaShop 不允许模块通过 AJAX 运行，但我可以在他们的网站上找到与此相关的唯一内容是有人[在他们的论坛中提出相同的问题，](http://www.prestashop.com/forums/topic/159519-using-ajax-for-backoffice-modules/)并且没有回复/修复。

我还想指出 AJAX 在一定程度上是有效的，如果在成功功能中我把`alert("hello");`警报弹出窗口显示出来。

有没有人有任何想法我可能会出错？

```
Uncaught TypeError: Cannot read property 'response' of null scripts.js:132
$.ajax.success scripts.js:132
o jquery-1.7.2.min.js:2
p.fireWith jquery-1.7.2.min.js:2
w jquery-1.7.2.min.js:4
d 
```

`scripts.js:132`指的是行：`if (data.response == 1)`

此外，我已将其从课堂中取出并将其放在普通页面/单独目录中，并具有相同的代码，只是不在类/函数中：

索引.php

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="scripts.js" type="text/javascript"></script>
<form name="formName" id="formName" method="get">
<input type="submit" name="submitModule" value="Continue" />
</form> 
```

脚本.js

```
$(document).ready(function() {
    $('#formName').submit(function(e)
    {
        e.preventDefault();
        $.ajax({
            url: "ajax.php",
            type: "GET",
            dataType: "json",
            success: function(data)
            {
                if (data.response == 1)
                {
                    alert('true');
                }
                else
                {
                    alert('false');
                }
            }
        });
    });
}); 
```

ajax.php

```
<?php
    $json['response'] = 1;
    echo json_encode($json);
    exit();
?> 
```

当我提交页面时，我得到警报 true，如果我查看 ajax.php，我得到`{"response":1}`. 所以代码本身没问题，它只是将它与他们的类/函数集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:02:34.293

似乎是 scripts.js 文件中 ajax.php 文件的路径导致了问题。

这与prestashop中文件夹的结构有关，所有模块都放在/prestashop/modules/目录中，但从/prestashop/admin/查看模块。因此，将它们更改为完整路径可以解决问题。

感谢在这里提供帮助的人，仍然很感激！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:00:34.407

我认为您的结果发送正常，但没有被解释为 JSON，有点 jquery 错误 - 我敢说。

```
header('Content-Type: text/javascript; charset=utf8'); 
```

把它放在 PHP 脚本中应该可以解决问题并强制正确解释 json 数据。如果之前的建议没有让你到任何地方，也可以尝试使用 $.parseJson(); 就像在 jQuery 文档中一样：

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

# c# - 在可移植类库中使用外部 DLL

> ID：13696419
> 
> 赞同：1
> 
> 时间：2012-12-04T05:05:18.393
> 
> 标签：c#, .net, windows-runtime, windows-phone-8, portable-class-library

我正在编写一个为 .NET 4.5、Windows RT 和 Windows Phone 8 设置的可移植类库 (PCL)。

我想在字典中找到最小值。在网上搜索说[MoreLinq](http://code.google.com/p/morelinq/downloads/list)是最快的方法。

所以我添加了一个参考，它编译得很好。

但我不确定我的 PCL 是否有“破损收容”。

**如果我引用了不符合 PCL 约束的内容，编译器会告诉我吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T06:14:55.560

不幸的是，编译器不会为你做这样的检查。

我尝试使用命名空间中的类创建一个 .NET 4 类库，`System.Data`这显然与 PCL 不兼容。我从 .NET 4.5、Windows Store 和 Windows Phone 8 的可移植类库项目中引用和使用它没有任何问题。甚至更多：我设法从 Windows Store 应用程序引用了这个可移植库，编译并运行它。当然，运行 Windows 应用程序认证工具包会发现这一点并且验证失败。

提前检测这些问题的最佳选择是通过 NuGet 添加引用，以检查包是否支持您的目标配置文件。当然，这需要以特定的方式准备 NuGet 包。

对于某些第三方库，这样的包可能不可用，但它可能仍与 PCL 兼容。在这种情况下，我建议您下载源代码并尝试自己创建一个具有正确目标的可移植类库。这样，只要它只引用系统程序集，编译器就会警告您有关兼容性问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:24:45.570

在[MoreLinq](http://code.google.com/p/morelinq/)的特殊情况下，这个库很容易转换为可移植类库。

1.  创建面向例如 .NET Framework 4 及更高版本、Silverlight 4 及更高版本、Windows Phone 7 及更高版本以及 Windows 应用商店应用程序的可移植类库项目。
2.  将包含在主*MoreLinq*库中的所有文件添加到 PCL，除了*ToDataTable.cs*和*ToHashSet.cs*。
3.  将以下条件编译符号添加到 PCL 项目：`NO_SERIALIZATION_ATTRIBUTES`, `NO_EXCEPTION_SERIALIZATION`, `NO_HASHSET`, `NO_TRACING`.
4.  *修改exceptBy.cs*中的私有方法`ExceptByImpl`，而不是在为 PCL 构建时使用：*`Dictionary<,>``HashSet<>`*

     *```
    private static IEnumerable<TSource> ExceptByImpl<TSource, TKey>(
        this IEnumerable<TSource> first,
        IEnumerable<TSource> second,
        Func<TSource, TKey> keySelector,
        IEqualityComparer<TKey> keyComparer)
    {
    #if !NO_HASHSET
    HashSet<TKey> keys = new HashSet<TKey>(second.Select(keySelector), keyComparer);
    foreach (var element in first)
    {
        TKey key = keySelector(element);
        if (keys.Contains(key))
        {
            continue;
        }
        yield return element;
        keys.Add(key);
    }
    #else
    var keys = second.ToDictionary(keySelector, keyComparer);
    foreach (var element in first)
    {
        TKey key = keySelector(element);
        if (keys.ContainsKey(key))
        {
            continue;
        }
        yield return element;
        keys.Add(key, element);
    }
    #endif 
    ```

    }* 

 *当然，这不是您问题的直接答案，但希望它对您的具体问题有用。*

# php - 在 php 中使用 readfile() 读取远程文件时是否可以设置用户代理？

> ID：13696421
> 
> 赞同：1
> 
> 时间：2012-12-04T05:05:37.853
> 
> 标签：php, url, io, readfile

例如，在 cURL 中，我可以使用`curl_setopt($curlrequest, CURLOPT_USERAGENT, 'myuseragent');`来更改`User-Agent`当我请求在`$curlrequest`.

但是我可以做类似的事情`readfile()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:13:02.223

是的，您可以在配置文件中或通过在运行时设置`user_agent`属性。`php.ini``ini_set()`

请参阅[http://php.net/manual/en/filesystem.configuration.php#ini.user-agent](http://php.net/manual/en/filesystem.configuration.php#ini.user-agent)（通过[http://php.net/manual/en/wrappers.http.php](http://php.net/manual/en/wrappers.http.php)）

## 更新

一个例子（根据要求）

```
ini_set('user_agent', 'RTM'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:14:58.270

您可以`user_agent`在 php.ini 配置文件中设置属性，或者使用[ini_set](http://us3.php.net/ini_set)更改它而不修改 php.ini，因此您可以基于每个脚本进行自定义。

此外，[此页面](http://php.net/manual/en/wrappers.http.php)中的一条评论说您可以执行以下操作：

```
<?php
    $default_opts = array(
        'http' => array(
            'user_agent' => 'Foobar',
            'header' => array(
                'X-Foo: Bar',
                'X-Bar: Baz'
            )
        )
    );
    stream_context_get_default($default_opts);
    readfile('http://www.xhaus.com/headers');
?> 
```

# jquery - jquery取消父函数

> ID：13696423
> 
> 赞同：0
> 
> 时间：2012-12-04T05:05:53.950
> 
> 标签：jquery, parent, each, preventdefault

jQuery 中是否有类似于`retun false;`in function 的方法阻止父函数运行？

我有一个下面概述的系统，当值不正确时需要停止该系统。与此同时，需要停止父函数。

```
parent.each(function(){

    child.each(function(){

        if (true) {

            //stuff
        } else {

           return false and cancel parent.each();
        }

    });

    otherChild.each(function(){

        if (true) {

            //stuff
        } else {

           return false and cancel parent.each();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:13:45.663

```
parent.each(function(){
    var canceled=false;

    child.each(function(){

        if (true) {

            //stuff
        } else {
           canceled=true;

           return false;
        }

    });

    if(!canceled) otherChild.each(function(){

        if (true) {

            //stuff
        } else {
           canceled=true;
           return false;
        }
    });
    return !canceled;
}); 
```

# android - GSON 返回异常 json 语法异常需要一个字符串，但在第 1 行第 15 列是 begin_object

> ID：13696436
> 
> 赞同：2
> 
> 时间：2012-12-04T05:07:23.060
> 
> 标签：android, json, gson

下面是我的代码。当我运行它时，它显示“json 语法异常需要一个字符串，但它是 begin_object”。我不知道为什么它显示错误。

```
 {
"products": [
    {
        "name": "gam",
        "pplsft": "75665",
        "imei": "Ptwm ",
        "created_at": "2012-12-03 04:58:01"
    },
    {
        "name": "",
        "pplsft": "0",
        "imei": "",
        "created_at": "2012-12-03 05:44:01"
    },
    {
        "name": "gptw",
        "pplsft": "0",
        "imei": "at",
        "created_at": "2012-12-03 05:58:18"
    },
    {
        "name": "",
        "pplsft": "0",
        "imei": "",
        "created_at": "2012-12-03 23:32:06"
    },
    {
        "name": "",
        "pplsft": "0",
        "imei": "",
        "created_at": "2012-12-03 23:35:25"
    }
]
} 
```

和类文件是，但我不知道如何使用gson创建用于json解析的类文件。anobdy能解释一下吗？？

```
 public class Results  {
public String name;
@SerializedName("pplsft")
public int pplsft;
@SerializedName("imei")
public String imei;
@SerializedName("created_at")
public int created_at;
     }

   public class SearchResponse  {

@SerializedName("products")
public List<Result> products;
@SerializedName("name")
public String name;
@SerializedName("pplsft")
public int pplsft;
@SerializedName("imei")
public String imei;
@SerializedName("created_at")
public int created_at;
public List<Result> getProducts() {
    return products;
}
public void setProducts(List<Result> products) {
    this.products = products;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public int getPplsft() {
    return pplsft;
}
public void setPplsft(int pplsft) {
    this.pplsft = pplsft;
}
public String getImei() {
    return imei;
}
public void setImei(String imei) {
    this.imei = imei;
}
public int getCreated_at() {
    return created_at;
}
public void setCreated_at(int created_at) {
    this.created_at = created_at;
}

   } 
```

这是从 json 调用数据的主要方法。

```
 response = gson.fromJson(reader, SearchResponse.class);
Toast.makeText(this,response.name, Toast.LENGTH_SHORT).show();
List<Result> list = response.products; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:23:33.583

对于 JSON，您的对象应如下所示：

```
SearchResponse response = gson.fromJson(reader, SearchResponse.class); 
```

然后获取您的清单：

```
List<Product> mProducts = response.products; 
```

要浏览您的列表，请执行以下操作：

```
for( Product pro : mProducts ){
    String pName = pro.name;
    ......
} 
```

或者您可以手动进行（从第一个对象获取名称；

```
mProducts.get(0).name; 
```

现在你的课：

```
public class SearchResponse  {

    @SerializedName("products")
    public List<Product> products;

    public class Product {

        @SerializedName("name")     
        public String name;

        @SerializedName("pplsft")
        public String pplsft;

        @SerializedName("imei")
        public String imei;

        @SerializedName("created_at")
        public String created_at;

    }
} 
```

你的 JSON

```
{
   "products":[
      {
         "name":"gam",
         "pplsft":"75665",
         "imei":"Ptwm ",
         "created_at":"2012-12-03 04:58:01"
      },
      {
         "name":"",
         "pplsft":"0",
         "imei":"",
         "created_at":"2012-12-03 05:44:01"
      },
      {
         "name":"gptw",
         "pplsft":"0",
         "imei":"at",
         "created_at":"2012-12-03 05:58:18"
      },
      {
         "name":"",
         "pplsft":"0",
         "imei":"",
         "created_at":"2012-12-03 23:32:06"
      },
      {
         "name":"",
         "pplsft":"0",
         "imei":"",
         "created_at":"2012-12-03 23:35:25"
      }
   ]
} 
```

[也许这篇文章的解决方案](https://stackoverflow.com/questions/11484353/gson-throws-malformedjsonexception)也可以对您有所帮助。

# c# - C# 多态性

> ID：13696437
> 
> 赞同：-1
> 
> 时间：2012-12-04T05:07:27.103
> 
> 标签：c#

> **可能重复：**
> [尽可能简单地描述多态性](https://stackoverflow.com/questions/210460/try-to-describe-polymorphism-as-easy-as-you-can)

我很难理解多态性到底是什么？例如，这段代码将如何使用多态性

我有一个汽车类和一个名为 countprice 的方法，我还有一个从汽车类继承的吉普车类。

```
List<Car> carlist = new List<Car>();
Jeep jeepABC123 = new Jeep(800, 14, 20, 10, 3500);
carlist.Add(jeepABC123);
Sedan sedanGHA321 = new Sedan(600, 7, 20, 10);
carlist.Add(sedanGHA321)

// This code
foreach (Bil bil in carlist)
{
revenue = revenue + car.countprice();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:09:44.090

很简单，你可以将s 放入你的s`Jeep`数组中`Car`

也许你也可以实现`Truck`which 将继承自`Car`，那么你`carlist`可以同时拥有`Jeep`s 和`Truck`s 。

多态性意味着您可以将任何派生类放入为基类声明的变量中，这是面向对象编程的一个非常基本的概念。

当我开始编写简单的游戏时，我第一次真正体会到了多态性。

例如：

```
foreach(Enemy enemy in Enemies)
{
    enemy.update();
} 
```

这些`update`调用中的每一个都可以做不同的事情，一个可以导致敌人向你射击，另一个可以导致敌人改变它的位置，但是它们都有一个更新调用，并且所有更新调用都有相同的签名。

# c# - 位图转换

> ID：13696438
> 
> 赞同：0
> 
> 时间：2012-12-04T05:07:33.417
> 
> 标签：c#, bytearray

我正在尝试将网络摄像头从客户端流式传输到服务器，但在从字节数组转换回服务器上的位图时遇到了困难。

这是代码：

```
public void handlerThread()
{
    Socket handlerSocket = (Socket)alSockets[alSockets.Count-1];
    NetworkStream networkStream = new
    NetworkStream(handlerSocket);
    int thisRead=0;
    int blockSize=1024;
    Byte[] dataByte = new Byte[blockSize];
    lock(this)
    {
        // Only one process can access
        // the same file at any given time
        while(true)
        {
            thisRead=networkStream.Read(dataByte,0,blockSize);

            pictureBox1.Image = byteArrayToImage(dataByte);
            if (thisRead==0) break;
        }
        fileStream.Close();
    }
    lbConnections.Items.Add("File Written");
    handlerSocket = null;
}

public Image byteArrayToImage(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);  //here is my error
    Image returnImage = Image.FromStream(ms);
    return returnImage;
} 
```

在上面标记的地方，当我尝试转换回图像并崩溃时，我得到“参数无效”。关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:33:49.600

注意这一点： [Image.Save(..) 抛出 GDI+ 异常，因为内存流已关闭](https://stackoverflow.com/questions/336387/image-save-throws-a-gdi-exception-because-the-memory-stream-is-closed)

您可以创建扩展方法或删除传统方法的“this”。这看起来与您的代码相同，所以我想知道您是否有某种类型的编码或其他与创建底层字节数组相关的问题？

```
public static Image ToImage(this byte[] bytes)
{
    // You must keep the stream open for the lifetime of the Image.
    // Image disposal does clean up the stream.

    var stream = new MemoryStream(bytes);
    return Image.FromStream(stream);
} 
```

# php - PHP 错误报告 - 使用“^”字符和“~”字符

> ID：13696441
> 
> 赞同：3
> 
> 时间：2012-12-04T05:07:51.140
> 
> 标签：php, error-reporting

在设置 error_reporting 值时，我试图了解使用“^”字符和“~”字符之间的区别。例如，我的 php 脚本中有以下内容：

```
if (version_compare(PHP_VERSION, '5.3.0') >= 0) {
error_reporting(E_ALL & ~ E_DEPRECATED & ~ E_USER_DEPRECATED & ~ E_NOTICE);
} else {
error_reporting(E_ALL ^ E_NOTICE);
} 
```

我在以下位置阅读了手册页：

[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

但我现在比以往任何时候都更加困惑。是：

```
error_reporting(E_ALL & ~ E_DEPRECATED & ~ E_USER_DEPRECATED & ~ E_NOTICE); 
```

相同：

```
error_reporting(E_ALL ^ E_DEPRECATED ^ E_USER_DEPRECATED ^ E_NOTICE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:11:20.957

这些是按位运算符： http: [//php.net/manual/en/language.operators.bitwise.php](http://php.net/manual/en/language.operators.bitwise.php)

```
error_reporting(E_ALL & ~ E_DEPRECATED & ~ E_USER_DEPRECATED & ~ E_NOTICE); 
```

将意味着 E_ALL 和 NOT E_DEPRECATED 和 NOT E_USER_DEPRECATED & NOT E_NOTICE

尽管

```
error_reporting(E_ALL ^ E_DEPRECATED ^ E_USER_DEPRECATED ^ E_NOTICE); 
```

将意味着 E_ALL 除了 E_DEP.... 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:51:33.217

我认为与您的问题更相关的答案列在[php.net 上的错误报告页面](http://www.php.net/manual/en/function.error-reporting.php#64060)的评论中，我将在此处重新发布：

> 对于我们这些不完全熟悉位运算符的人来说，E_ALL ^ E_NOTICE 的例子有点令人困惑。
> 
> 如果您希望从当前级别删除通知，无论未知级别是什么，请使用 & ~ 代替：
> 
> ```
> <?php
> //....
> $errorlevel=error_reporting();
> error_reporting($errorlevel & ~E_NOTICE);
> //...code that generates notices
> error_reporting($errorlevel);
> //...
> ?> 
> ```
> 
> ^ 是 xor（位翻转）运算符，如果之前关闭通知（在其左侧的错误级别），它实际上会打开*通知*。它在示例中有效，因为 E_ALL 保证设置了 E_NOTICE 位，因此当 ^ 翻转该位时，它实际上已关闭。& ~ （而不是）将始终关闭右手参数指定的位，无论它们是打开还是关闭。

# powershell - Nuget如何将文件添加到解决方案文件夹

> ID：13696443
> 
> 赞同：1
> 
> 时间：2012-12-04T05:07:57.273
> 
> 标签：powershell, nuget

我有一个包，其中包含一些我想在解决方案级别而不是项目级别添加的文件。我可以在解决方案级别添加一个文件夹，但无法确定如何将我的文件添加到该文件夹​​中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:49:22.643

您可以通过将代码放在 init.ps1 文件中来完成此操作。install.ps1 仅使用项目级包执行。因为代码将在 init.ps1 中，所以它会在每次加载解决方案时运行 - 而不仅仅是在安装时。所以你需要防止重新执行。有关代码示例，请参见这篇[文章](https://stackoverflow.com/questions/6460854/adding-solution-level-items-in-a-nuget-package)- 您只需添加一个步骤即可从工具文件夹复制到解决方案文件夹。

# python - 如何在python中使用numpy.genfromtxt从底部读取文件

> ID：13696445
> 
> 赞同：0
> 
> 时间：2012-12-04T05:08:03.873
> 
> 标签：python, numpy, matplotlib, genfromtxt

我有一个文件每 60 秒更新一次，其中包含一些数据。我希望能够从文件底部向后读取，以便将过去 6 小时的数据绘制成图表。

我能够读取前 360 行（见下文），但这是旧数据。我希望能够查看文件的底部 360 行，这是最新数据。我不知道该怎么做。任何人都可以帮忙吗？

```
import numpy,itertools, matplotlib,datetime 
with open('temperature_logging') as t_in:
 temp = numpy.genfromtxt(itertools.islice(t_in,360),dtype=None,usecols=(0))
 time = numpy.genfromtxt(itertools.islice(t_in,360),dtype=None,usecols=(1))

dates = matplotlib.dates.datestr2num(time)
pylab.savefig('graph.png') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:53:47.033

如果您不必使用`numpy.genfromtxt()`，并且文件行的长度恒定（或变化缓慢或变化不大），您可以计算偏移量并使用`file.seek()`来获得该偏移量。例如，用于`os.stat()`找出文件大小，减去平均行长的 360 倍加上缓冲，查找，读取。

使用`numpy.genfromtxt()`，您可能可以使用该`skip_header`参数指定在读取数据之前要向前跳过多少行。例如，读取文件的第一行以找出文件开始的时间，并计算自该时间以来的分钟数。假设是`minutesOld`分钟。`skip_header = minutesOld - 360`在`genfromtxt()`参数列表中说。

这样您就不必跳过很多行两次，在同一个 genfromtxt 调用中获取时间和临时数据。为此，请说（例如）

```
data = numpy.genfromtxt(t_in, dtype=None, usecols=(0,1), skip_header = minutesOld - 360) 
```

`usecols`可以通过设置或通过设置在同一个调用中获取时间和温度数据`dtype`；请参阅 genfromtxt[示例](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)文档。下面显示的代码说明了前者。此示例的温度记录文件中有大约 1234 行，并且时间没有附加日期。相反，小时数一直超过 24。调整计算文件中行数的代码以匹配您自己的时间表示约定。

```
from numpy import genfromtxt
from itertools import islice
from time import localtime, time

toKeep = 20
with open('temperature_logging') as fin:
    start = genfromtxt(islice(fin,1), dtype=None, usecols=(0,1))
    hf, mf = map(int, start.tolist()[0].split(':'))
    ti = localtime(time())
    hn, mn = ti.tm_hour, ti.tm_min
    print 'File start: {:02d}:{:02d},  Time Now: {:02d}:{:02d}'.format(hf, mf, hn, mn)
    minutesOld = (hn-hf)*60 + mn-mf
    if minutesOld < 0: minutesOld += 24*60
    data = genfromtxt(fin, dtype=None, usecols=(0,1), skip_header = minutesOld - toKeep)

print data 
```

以下是上述代码的示例输出：

```
File start: 03:43,  Time Now: 00:16
[('23:57', 66.3) ('23:58', 66.8) ('23:59', 66.7) ('24:00', 67.1)
 ('24:01', 66.7) ('24:02', 67.1) ('24:03', 66.8) ('24:04', 67.2)
 ('24:05', 67.4) ('24:06', 67.7) ('24:07', 67.3) ('24:08', 67.1)
 ('24:09', 66.8) ('24:10', 67.3) ('24:11', 67.8) ('24:12', 67.3)
 ('24:13', 67.6) ('24:14', 67.6) ('24:15', 67.7) ('24:16', 67.3)] 
```

# jquery - jQuery 组织 document.ready 逻辑

> ID：13696448
> 
> 赞同：1
> 
> 时间：2012-12-04T05:08:18.787
> 
> 标签：jquery, document-ready

我工作过的大多数支持 jQuery 的 Web 应用程序都以两种方式之一来组织 document.ready 逻辑。

1.  全局 document.ready 用于站点范围的 JS 文件，所有 document.ready 逻辑都包含在该执行块中。
2.  document.ready 逻辑被显式添加到需要它们的特定页面。

通常，我选择选项 1，以便 javascript 享受 javascript 合并和缩小的好处，这些好处很容易应用于独立文件而不是页面上的 javascript 块。

但是，随着站点的增长，需要在 document.ready 处执行的逻辑量也会增加，我怀疑正在评估的选择器数量会影响站点的快速性。

我已经考虑为此开发一个框架，从而可以应用一种全局技术，该技术使用 URL 或根元素属性来确定应该在 document.ready 上执行哪些代码并减少正在评估的选择器的数量。

**编辑：更多澄清......** 在一个简单的例子中，我有 2 个不同的页面。在每个页面上，逻辑（包括选择器）需要在 document.ready 上执行，但理想情况下，逻辑仅在加载这些页面时执行，而不是在整个站点的每个页面上执行。

这样的东西是否已经存在，或者选择器通常足够便宜以至于我不应该关心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:13:16.010

首先，我主要使用单页应用程序。

我通常是这样操作的：

```
// Main module
;(function($, win, undefined) {
    var module = {
        _currentPanel,
        initialize: function() {
            // all my global bindings here
        },

        // Only included to understand whats going on in the sub-module below
        displayPanel: function(panelName) {
            if (!!module._currentPanel) {
                $(module._currentPanel)
                    .hide(0)
                    .triggerHandler('hide.panel');
            }

            module._currentPanel = panelName;

            $(panelName)
                .show(0)
                .triggerHandler('show.panel');
        },          
    };

    $.extend("namespace", module);
})(jQuery, window);

// Sub modules
;(function($, win, undefined) {
    var module = {
        something: function() {
            // ..nothing to see here, this is just how i construct my modules
        }
    };

    // Event bindings specific to this module
    $('#geo-panel').bind('show.panel', function() {
        // wire up init() stuff   
    });
    $('#geo-panel').bind('hide.panel', function() {
        // wire up dispose() stuff
    }); 

    $.extend("namespace", module);
})(jQuery, window); 
```

那么那里发生了什么？

我的主模块包含所有全局内容..这是合乎逻辑的 :) 使用我在加载页面时在某处调用的 initialize() 函数。这连接了我在所有页面（或本例中的视图）上有用的所有通用绑定/选择器。

然后，当我在应用程序中显示各种伪页面时，我的子模块将绑定到我触发的事件。他们都对 .triggerHandler() 做出反应，我使用了很多来能够在整个站点中分离我的逻辑。

displayPanel("#geo-panel");

displayPanel("#someother-panel");

然后将主模块和子模块都聚合成一个大的 js 文件。这里有一些多余的 $.extend() （我用它来动态创建命名空间），它允许我将所有内容拆分为自动构建的专用子模块（首选项、配置文件、搜索......）在应用程序构建时聚合。

但是，如果我没有使用单页应用程序，那么我会：

1.  只需将所有引用从`#panel-geo`, 更改为更像`#pageX #panel-geo`
2.  或为所有页面选择 1 个通用 js，为每个页面选择 1 个特定 js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:42:19.597

我一直在使用你在我最新项目中描述的东西。我给每个页面中的 HTML 标记一个唯一的 ID，然后我用它来初始化特定于该页面的代码：

```
$(function() {
    //for index.html (view/edit)
    if($("html#view").length>0){
        ReadView();
    }
    //for create.html (add)
    if($("html#create").length>0){
        CreateView();
    }
    globalFunction();
});

var ReadView = function(){
    ...
};

var CreateView = function(){
    ...
};

var globalFunction = function(){
    ...
}; 
```

正如您所说，这不仅有助于保持 JavaScript“活泼”，而且有助于命名间距并有助于防止变量冲突。我还发现，当其他程序员查看代码时，它有助于以更有条理的方式理解事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T14:40:53.740

组织页面的替代方法可能是用户 jquery 的 triggerHandler 来“拆分” *document.ready*事件，如下所示：

准备就绪：

```
$(namespace.eventPool).triggerHandler("namespace.preready");
$(namespace.eventPool).triggerHandler("namespace.domready");
$(namespace.eventPool).triggerHandler("namespace.postready"); 
```

从 ajax 加载的模板（示例）：

```
$(namespace.eventPool).triggerHandler("namespace.templates.loaded"); 
```

伪代码中的示例用法：

```
function loadTemplates(){
    $.get...
    $(namespace.eventPool).triggerHandler("namespace.templates.loaded");
}

$(namespace.eventPool).on({
   "namespace.preready":loadTemplates,
   "namespace.templates.loaded":invalidateCache
}); 
```

等等

这样做的目的是避免一次猛烈抨击所有内容，而只使用少量基于事件的 pub/sub

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:07:55.457

我所做的是拥有两组（虽然可能更多）文件。一个 app.js 文件，其中包含站点的全局内容，每个页面的 page.js 文件都包含该页面特定的内容。

page.js 文件设置了一个对象，即对象，该`myapp.page`对象包含特定于该页面但*也*与具有全局上下文的事物相关的功能。该文件还包含特定于该页面且与任何全局内容*无关的内容。*

典型的 page.js 看起来像这样：

```
var myapp = mayapp || {};
myapp.page = {
    onReady: function($, undefined) {
        // page specific initialization that will need to use
        // things initialized in the global initialization
    },

    // for other events that I want some page-specific behavior 
    // in addition to the global behavior. For example, onresize:
    onResize: function(e, anything) {
        // page specific response to some event
        // that uses or relies on things done in the global
        // onresize listener
    }
}

// stuff that is page specific that is completely autonomous.
// This could also be included in the myapp.page.onReady, if preferred.
// I like the seperation because it illustrates what on the page 
// depends on global resources.
$().ready(function() {
    $('#some-form').submit(function(e) {
        // the form only exists on this page so no need to put it in
        // the page.onReady callback function
    });
}); 
```

app.js 文件使用 $().ready(...) 来完成页面加载。然后它调用页面特定的 JS：

```
$().ready(function() {

    var myapp = mayapp || {};

    // do global stuff first
    globalStuff();
    // then page specific
    if (myapp.page && typeof myapp.page.onReady === 'function') {
        myapp.page.onReady($);
    }

    // if there are some events that have both global page specific things
    // going on I would have something like this:
    window.addEventListener('resize', function(e) {
        // global behavior
        someResult = processedTheSameOnAllPges();

        // then page specific
        if (myapp.page && typeof myapp.page.onResize === 'function') {
            myapp.page.onResize(e, someResult);
        }
    });
}) 
```

我以这种方式将事情分开主要是为了简化，但它肯定会对大型网站产生性能影响。这确实有单独文件的缺点，因此将有两个下载。但是，每个页面都只是在下载和执行它需要的东西。

关于性能，如果由于选择器而导致初始化缓慢，则可以考虑将它们中的一部分或全部本地化。

对于特定数据，特别关注选择器（在 OP 中多次提到），我能提供的最好的是一些有趣的 jsPerf 案例：

*   [http://jsperf.com/native-vs-jquery-class-selectors/2](http://jsperf.com/native-vs-jquery-class-selectors/2)
*   [http://jsperf.com/native-vs-jquery-selectors](http://jsperf.com/native-vs-jquery-selectors)
*   [http://jsperf.com/js-native-vs-jquery-selector](http://jsperf.com/js-native-vs-jquery-selector)

恕我直言，这些测试的一个巨大限制是他们使用的“准备代码”。这些测试场景是不现实的，据我所知，运行选择器的 DOM对其性能有*巨大影响。*

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-11T19:41:39.033

每个页面都“知道”需要在该页面上执行哪个 JS。因此，在您的 .js 文件中定义这些函数，并在 HTML 标记中进行 doc-ready 调用以仅调用这些函数。

虽然您应该避免在 HTML 中放置重要的 JS 代码，但调用一两个 init 函数是完全可以接受的。

# asp.net-mvc-3 - 如何在 MVC 中的 Webgrid 中保存图像..？

> ID：13696449
> 
> 赞同：0
> 
> 时间：2012-12-04T05:08:24.370
> 
> 标签：asp.net-mvc-3

如何在 MVC Webgrid 中保存图像？以及如何在 WebGrid 中生成图像列...？

```
<div id="grid" class="Radius">
    @grid.GetHtml(
                            tableStyle: "listing-border",
                            headerStyle: "gridhead",
                            footerStyle: "paging",
                            rowStyle: "td-dark",
                            alternatingRowStyle: "td-light",
                            mode: WebGridPagerModes.All,
                            firstText: "<<",
                            lastText: ">>",
                            previousText: "<",
                            nextText: ">",

        columns: grid.Columns(
        grid.Column(format: (item) => Html.CheckBox("check", false)),
        grid.Column("ID"),
        grid.Column("FirstName"),
                    grid.Column("LastName"),
                            grid.Column("EmailAddress"),
                            grid.Column("UserPicture"),
                            grid.Column("IsActive"),

                              grid.Column(header: "Edit", format: @<text><a href="@Url.Action("CreateUser", "User", new { ID = item.ID })" ><img src="~/Images/Edit.png" alt="" style="border:none;" /></a></text>, style: "colOperation"),
       grid.Column(header: "Delete", format: @<text><a href="@Url.Action("", "", new { ID = item.ID })" ><img src="~/Images/Delete.png" alt="" style="border:none;" /></a></text>, style: "colOperation")
)
                                     )
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:42:51.140

试试这个在 webGrid 中创建 Image 列：

```
grid.Column(header,format: @<div><img src="@Url.Content("~/Content/images/icon_edit.png")" alt="@Resources.Tooltip_Update"/></div>)) 
```

在 webgrid 中保存图像是什么意思？

# ruby - 在 Sinatra 中配置 erb 目录

> ID：13696454
> 
> 赞同：3
> 
> 时间：2012-12-04T05:08:44.890
> 
> 标签：ruby, sinatra, erb

应用程序/控制器/app.rb

```
require 'sinatra'
get '/' do
  erb :index
end 
```

应用程序/视图/index.erb

```
<html>
    <body>
        <p>Hello World</p>
    </body>
</html> 
```

错误：

```
Errno::ENOENT at /
No such file or directory - .../app/controllers/views/index.erb 
```

如何将 erb 配置为查看`app/views`而不是`app/controllers/views`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T05:16:53.927

您可以通过调整配置设置来实现此目的。由于您使用的是非标准设置，因此您需要告诉 Sinatra 您的应用程序的实际根目录是什么以及在哪里可以找到视图。在`app/controllers/app.rb`文件顶部添加：

```
# sets root as the parent-directory of the current file
set :root, File.join(File.dirname(__FILE__), '..')
# sets the view directory correctly
set :views, Proc.new { File.join(root, "views") } 
```

您可以在[Sinatra 文档](http://www.sinatrarb.com/documentation)中阅读有关 Sinatra[配置选项](http://www.sinatrarb.com/configuration.html)的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T05:15:18.323

```
set :views, Proc.new { File.join(root, "views") } 
```

来自[http://www.sinatrarb.com/configuration.html#__view_template_directory](http://www.sinatrarb.com/configuration.html#__view_template_directory)

编辑：显然这什么也没做，呵呵。最好有一个`app/`需要您的控制器的文件：

```
Dir.glob("controllers/*.rb").each { |r| require_relative r } 
```

然后，`app/views`将是默认的视图目录。

# ios - iOS 订阅验证

> ID：13696457
> 
> 赞同：0
> 
> 时间：2012-12-04T05:09:04.450
> 
> 标签：ios, storekit

我有一个有趣的问题......（至少对我来说）

我开发了一个使用自动续订订阅的应用程序。他们设置了它，应用程序保存订阅收据，然后每次需要验证订阅时，应用程序将收据信息发送到我的服务器，验证收据仍然有效。

在我的应用程序中，我有一个名为“testMode”的应用程序范围的常量。除其他外，这会导致应用程序使用沙盒或生产标志查询我的服务器。因此，如果我在测试模式下测试应用程序，该应用程序将查询我的服务器上的一个文件，该文件检查沙盒 Apple 服务器。如果应用程序未处于测试模式（例如当我将其提交给 Apple 时），它会查询我的服务器上的生产文件，该文件会根据 Apple 的生产服务器检查数据。

我的应用程序被拒绝，因为它在订阅时产生了错误。该错误是 21007，这意味着沙盒收据已发送到生产验证服务器。

所以我的问题是：如果Apple测试人员使用沙盒环境，我如何提交用户生产服务器验证的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:56:07.127

我遇到了类似的问题。这是处理它的最佳方法：

每当您的服务器收到来自应用程序的新收据时，请首先与生产服务器进行验证。然后，如果您收到错误 21007，请尝试使用沙盒服务器使用相同的收据。这就是我所做的，并且效果很好。苹果应该推荐这个，但他们不推荐。

使用此方法，您应该能够摆脱应用程序中的 testMode（除非您将其用于其他目的）。

# java - 在Java中用转义前的特殊字符替换特殊字符

> ID：13696461
> 
> 赞同：7
> 
> 时间：2012-12-04T05:09:27.760
> 
> 标签：java, regex, string, data-structures, escaping

在我的 java 代码中，如果字符串输入有任何提到的特殊字符，则应该在前面加上`\\`

特殊字符集是`{+, -, &&, ||, !, (, ), {, },[, ], ^, "", ~, *, ?, :, \}`. 我尝试使用`String.replaceAll(old,new)`但令我惊讶的是它不起作用，即使我为“旧”和“新”提供了正确的值。

```
if old=":",new="\:" 
```

我将特殊字符放在一个字符串数组中，在 for 循环中对其进行迭代，检查它是否存在于字符串中，如果是，`input.replaceAll(":","\\:")`. 但它没有给我预期的输出。请帮忙

```
String[] arr = { "+", "-", "&&", "||", "!", "(", ")", "{", "}",
                "[", "]", "^", "\"", "~", "*", "?", ":", "\\", "AND", "OR" };

    for (int i = 0; i < arr.length; i++) {
//'search' is my input string

        if (search.contains((String) arr[i])) {

            String oldString = (String) arr[i];

            String newString = new String("\\" + arr[i]);
            search = search.replaceAll(oldString, newString);
            String newSearch = new String(search.replaceAll(arr[i],
                    newString));

        }
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T05:28:59.103

一旦您意识到 replaceAll 需要一个正则表达式，只需将您的字符编码为正则表达式即可。

尝试这个：

```
String newSearch = search.replaceAll("(?=[]\\[+&|!(){}^\"~*?:\\\\-])", "\\\\"); 
```

那个古怪的正则表达式是一个“向前看”——一个非捕获断言，即以下字符匹配某些东西——在这种情况下是一个字符类。

请注意，除了 a 之外，您不需要转义字符类中的字符`]`（即使是第一个或最后一个减号也不需要转义）。

这`\\\\`就是您编写正则表达式文字的方式`\`（Java 转义一次，正则表达式转义一次）

这是对此工作的测试：

```
public static void main(String[] args) {
    String search = "code:xy";
    String newSearch = search.replaceAll("(?=[]\\[+&|!(){}^\"~*?:\\\\-])", "\\\\");
    System.out.println(newSearch);
} 
```

输出：

```
code\:xy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T05:13:30.173

[`String#replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)将 a`regex`作为第一个参数。`meta-character`因此，如果字符串中的输入类似 - ，您的代码将失败`+`。

你应该使用[`String#replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29).

而且你也不需要最后的任务： -

```
String newSearch = new String(search.replaceAll(arr[i], newString)); 
```

因为，你根本没有使用它。实际上，您正在将修改后的字符串分配回`search`，所以它不是必需的。

此外，而不是使用`new String(...)`, 来构建你的新字符串。实际上，您只需要在`if-statement`.

好的，在**解释**之后，您现在可以使用以下内容`for-loop`：-

```
for (int i = 0; i < arr.length; i++) {
    if (search.contains(arr[i])) {
        search = search.replace(arr[i], "\\" + arr[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T05:32:13.500

尝试使用下面的一个。请使用 replace 方法而不是 ReplaceAll

搜索 = search.replace(oldString, newString);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:39:50.233

当我尝试下面的代码时，它起作用了

```
String[] arr = { "+", "-", "&&", "||", "!", "(", ")", "{", "}",
                    "[", "]", "^", "\"", "~", "*", "?", ":", "\\", "AND", "OR" };

        for (int i = 0; i < arr.length; i++) {
    //'search' is my input string

            if (search.contains((String) arr[i])) {

                String oldString = (String) arr[i];

                String newString = new String("\\" + arr[i]);
                search = search.replaceAll(oldString,(String) ("\\" + newString));

            }
        } 
```

# android - 为什么是 安卓需要吗？他们的意图是什么？

> ID：13696464
> 
> 赞同：1
> 
> 时间：2012-12-04T05:10:01.970
> 
> 标签：android, permissions

究竟为什么`uses-permission`

前任 ：

```
<uses-permission>android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

需要访问Android的各个模块。仅由编写代码的同一程序员添加一行，实际上是如何提供安全性的？我是 Android 编程新手，这看起来很有趣。请解释引用的确切用途是什么`<uses-permission>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:15:37.253

谷歌制作了一整页来描述这个概念。过一遍你就知道原因了。 [http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

**编辑：**除了上述信息。这些所需的权限会在安装应用程序时显示给用户。它们甚至可以在每个应用程序的 google play 商店中看到。虽然大多数用户在安装之前看不到 reqd 权限，但有些人可能会检查它们，如果它对他们的隐私的干扰超过了要求，他们可能不会安装它，甚至在 Play 商店中给出差评。AndroidManifest 中提到了这些，因此 Google 不必遍历所有场景来检查应用程序将来可能请求的所有服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:12:50.860

您添加的任何权限`<uses-permission>`实际上都会在以后安装应用程序时使用。将询问用户此应用程序需要以下权限： 访问网络状态。如果用户接受，则可以安装应用程序。否则将不会安装应用程序。

有关矿石澄清，请参阅[此内容。](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)

# windows - Microsoft MPEG-2 编码器和 MPEG-2 视频编码器在 Windows 8 上失败

> ID：13696467
> 
> 赞同：0
> 
> 时间：2012-12-04T05:10:15.683
> 
> 标签：windows, windows-8, directshow, mpeg-2

在 Windows 8 ICaptureGraphBuilder2::SetOutputFileName 使用 Microsoft MPEG-2 编码器从视频和音频源构建记录图到文件期间，返回失败 80040154 结果 - 未注册类。

```
 //Adding MPEG2 Encoder Muxer filter to the graph
hr = m_pCapGraphBuilder->SetOutputFileName(&CLSID_CMPEG2EncoderDS, szOutFileName, &pMPEG2EncoderMuxer, &pFileSinkFilter); 
```

同样在 graphedit 中，任何尝试在 MPEG-2 编码器和 MPEG-2 视频编码器过滤器中插入的尝试都失败，并带有描述：“无法创建过滤器。此过滤器使用的资源可能已经在使用中。（返回代码：0xc004f011）”

为什么会发生这种情况以及如何避免这个问题？

很高兴有任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:15:01.373

你确定你的 windows 8 有一个 MPEG-2 编码器吗？正如我从 MS 那里听到的，他们从 Windows 8 中删除了 MPEG-2，您必须自己购买编码器。

# entity-framework - 在 EF5 中更新多对多关系时出错

> ID：13696474
> 
> 赞同：4
> 
> 时间：2012-12-04T05:10:50.537
> 
> 标签：entity-framework

我有一个使用 Entity Framework 5 的 N 层的 ASP.NET WebForms 项目。我有两个实体：Cliente 和 Banda。一个客户可能有很多班达，一个班达可能有很多客户

在商务层我有这个代码：

```
public void Update(Cliente cliente)
    {
        using (MegaStudioEntities contexto = new MegaStudioEntities())
        {
            if (contexto.Entry(cliente).State == EntityState.Detached)
                contexto.Entry(cliente).State = EntityState.Modified;

            //Delete existing relations
            var qBandas = from qb in contexto.Bandas.Where(b => b.Clientes.Any(c => c.IdCliente == cliente.IdCliente))
                          select qb;

            foreach (Banda b in qBandas.ToList())
                ((IObjectContextAdapter)contexto).ObjectContext.ObjectStateManager.ChangeRelationshipState(cliente, b, c => c.Bandas, EntityState.Deleted);

            contexto.SaveChanges();

            //Adding new relations
            foreach (Banda banda in cliente.Bandas)
            {
                contexto.Bandas.Attach(banda);
                ((IObjectContextAdapter)contexto).ObjectContext.ObjectStateManager.ChangeRelationshipState(cliente, banda, c => c.Bandas, EntityState.Added);
            }

            cliente.TipoCliente = contexto.TipoClientes.Find(cliente.IdTipoCliente);
            cliente.FechaModificacion = System.DateTime.Now;
            Encriptar(cliente);
            contexto.SaveChanges();
        }
    } 
```

我第一次调用 Update 方法时，运行成功，但第二次出现此错误：

*“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。”*

我忘记关闭什么？这是在 EF5 中更新多对多关系的正确方法吗？

提前致谢！！！

马丁

**更新 1：**

最后我的代码是这样的：

```
public void Update(Cliente cliente)
        {
            using (MegaStudioEntities contexto = new MegaStudioEntities())
            {
                Cliente savedClient = contexto.Clientes.Find(cliente.IdCliente);

                foreach (var banda in savedClient.Bandas.ToList())
                {
                    savedClient.Bandas.Remove(contexto.Bandas.Find(banda.IdBanda));
                }

                foreach (var banda in cliente.Bandas)
                {
                    savedClient.Bandas.Add(contexto.Bandas.Find(banda.IdBanda));
                }

                contexto.Entry(savedClient).CurrentValues.SetValues(cliente);
                contexto.SaveChanges();
            }
        } 
```

谢谢格特阿诺德！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:57:46.750

您实际上不必将任何对象附加到上下文中。因此，您可以通过不这样做来防止此异常。

```
public void Update(Cliente cliente)
{
    using (MegaStudioEntities contexto = new MegaStudioEntities())
    {
        Cliente savedClient = contexto.TipoClientes.Find(cliente.IdCliente);

        foreach (var banda in savedClient.Bandas.ToList())
        {
            savedClient.Bandas.Remove(banda);
        }
        foreach (var banda in cliente.Bandas)
        {
            savedClient.Bandas.Add(banda);
        }

        savedClient.IdTipoCliente = cliente.IdTipoCliente;
        savedClient.FechaModificacion = System.DateTime.Now;

        Encriptar(cliente);
        contexto.SaveChanges();
    }
} 
```

我不确定这个中断代码是否存在，`Encriptar(cliente);`因为（显然）我不知道那里会发生什么。

如您所见，您通过添加/删除对象来添加和删除 am:m 关系中的关联。您几乎从不（可能从不）需要明确地操纵关系状态。如果您觉得有必要这样做，这很可能表明您忽略了一种更简单的方法来实现您想要的。

# java - 具有项目列表的警报对话框

> ID：13696479
> 
> 赞同：3
> 
> 时间：2012-12-04T05:11:28.013
> 
> 标签：java, android, android-layout

在我的 android 应用程序中，当我单击文本视图时，我想显示一个包含项目列表的警报对话框。这怎么可能。请指导。

我将其编码为：

```
cus_name_txt = (TextView)findViewById(R.id.cus_name_txta);
    cus_name_txt.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Onclick_click1(cus_name_txt);
            // TODO Auto-generated method stub

        }
    }); 

    contact_no_txt = (TextView)findViewById(R.id.contact_no_txta);

    attend_by_txtbx = (EditText)findViewById(R.id.attend_by_txt);
    attend_by_txtbx.setText(My_Task.attend_by_txt);

    ticket_no_txt = (TextView)findViewById(R.id.ticket_no_txta);

    task_detail_txt = (TextView)findViewById(R.id.task_detail_txt); 
```

如何通过单击 textView 获取项目列表的警报框。请指导。我会感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:15:53.493

将以下代码放入`onClick`：`textView`

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Select Color Mode");

ListView modeList = new ListView(this);
String[] stringArray = new String[] { "Bright Mode", "Normal Mode" };
ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, stringArray);
modeList.setAdapter(modeAdapter);

builder.setView(modeList);
final Dialog dialog = builder.create();

dialog.show(); 
```

或者

```
Dialog dialog = new Dialog(**Your Context**);
  dialog.setContentView(R.layout.**Your Layout File**);
  dialog.show(); 
```

在此布局文件中，您可以根据您的要求进行布局。当您想从对话框布局文件中使用 ListView 时，您必须编写

```
 ListView listView = (ListView)**dialog**.findViewById(R.id.**Your ListView Id**) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:22:55.290

如果要在警报对话框中加载列表之前显示进度条，请使用 AsyncTask 。

例如：

```
private class LoadingTask extends AsyncTask<String, Void, String> {
        @Override
        protected void onPreExecute(){
               super.onPreExecute();
               progressDialog.show();
        }

        @Override
        protected String doInBackground(String... str) {
            String response = "";
                    // Call Web Service here and return response

            response = API.getDealsByCategory(str[0], str[1]); 
                    // e.g.: above is my WebService Function which returns response in string
            return response;
        }
        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            System.out.println("result is: "+result);

            new Thread(new Runnable() {
                @Override
                public void run() {
                    progressDialog.dismiss();
                }
            }).start();

        // SHOW THE ALERT DIALOG HERE.....  
        }
    } 
```

如下调用 AsyncTask ：

LoadingTask 任务 = new LoadingTask(); task.execute("YOUR_PARAMETER","YOUR_PARAMETER");

//================================

只需将下面的代码放在 AsyncTask 的 Post Execution 中，你就会得到你想要的。

```
final CharSequence[] items = {"","50","100","150","200","250","300","350","400","450","500","550","600","650","700","750","800","850","900","1000"};
        AlertDialog.Builder builder = new AlertDialog.Builder(getParent());
        builder.setTitle("Select Country");
        //builder.setI
        builder.setItems(items, new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int item) {
                //Toast.makeText(getApplicationContext(), con.get(item).getCountrName(), Toast.LENGTH_SHORT).show();
                selectDistanceTV.setText(items[item]);
                System.out.println("Item is: "+items[item]);
                /*CONTRY_ID = con.get(item).getCountryId();
                stateET.requestFocus();*/
           }
        });
        AlertDialog alert = builder.create();
        alert.show(); 
```

希望它会帮助你。

如果您需要有关如何使用 AsyncTask 的更多帮助，请参阅此处：[Vogella](http://www.vogella.com/articles/AndroidPerformance/article.html)

如有任何疑问，请评论我。

享受编码... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:21:29.453

您可以传递字符串数组中的项目列表并将其显示在 AlertBox 中。

***例如：***

```
private void SingleChoice() { 
```

String[] selectFruit = new String[] {"苹果","橙子","芒果"};

```
 Builder builder = new AlertDialog.Builder(this);  
 builder.setTitle("Single your Choice");  
 builder.setItems(selectFruit, new DialogInterface.OnClickListener() {  
   @Override  
   public void onClick(DialogInterface dialog, int which) {  
     Toast.makeText(MainActivity.this,  
         selectFruit[which] + " Selected", Toast.LENGTH_LONG)  
         .show();  
     dialog.dismiss();  
   }  
 });  
 builder.setNegativeButton("cancel",  
     new DialogInterface.OnClickListener() {  
       @Override  
       public void onClick(DialogInterface dialog, int which) {  
         dialog.dismiss();  
       }  
     });  
 AlertDialog alert = builder.create();  
 alert.show(); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T05:22:07.910

```
button.setOnClickListener(new OnClickListener()
    {

        public void onClick(View arg0) 
        {
            new AlertDialog.Builder(MainActivity.this)

            .setSingleChoiceItems(arrClientName,0, new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which) 
                {
                    name.setText(arrClientName[which]);

                }
            })
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() 
            {
                       public void onClick(DialogInterface dialog, int id) 
                       {

                       }
            })
            .show();

        }
    }); 
```

# ruby-on-rails - 限制用户在一天内执行一定次数的操作

> ID：13696480
> 
> 赞同：0
> 
> 时间：2012-12-04T05:11:37.023
> 
> 标签：ruby-on-rails, devise, spam

我将 Rails 3.1.0 与 Devise 2.1.0 一起使用。我想限制用户在一天内执行某项操作的次数。此限制的主要目的是防止垃圾邮件。

我看到许多与此类似的问题，但想知道是否有一种特定的方法可以通过 Devise 完成我想要做的事情。

对于创建模型实例的操作，一天内执行操作的次数很容易跟踪。但是，我想限制的至少一项操作不会创建模型实例，因此我不确定该怎么做。

我还想知道这是否是防止垃圾邮件的合法/有效方式（除了要求用户注册并登录以执行操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:25:03.110

就个人而言，我发现这类系统过于复杂。除非垃圾邮件是一个现有的、可证明的问题，否则我不确定添加一个可能相当广泛的系统是否会很好地利用时间和精力。

替代方法是要求通过第三方服务（例如 Facebook）进行注册，并使用[验证码](https://github.com/ambethia/recaptcha/)或令人兴奋的新[否定验证码](https://github.com/subwindow/negative-captcha)。

也就是说，如果你想这样做，我认为跟踪它的最佳位置是在临时数据存储中。Redis 非常适合这个，因为你可以使用队列。在您要限制的操作中，将时间戳添加到队列中，然后在您允许用户执行所述操作之前，检查队列中的元素数量，在您这样做时清除那些太旧的元素。

那是一种伪代码，但至少应该可以帮助您入门。

# apache - 具有自定义角色的 Shiro Active Dictory

> ID：13696485
> 
> 赞同：0
> 
> 时间：2012-12-04T05:12:23.870
> 
> 标签：apache, active-directory, shiro

如何配置 Shiro 以使用 Active Directory 身份验证，但此外我想将用户名映射到自定义角色。我似乎找不到任何关于此的信息。任何人都可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:28:29.810

要进行 Active Directory 身份验证，请使用[JndiLdapRealm](http://shiro.apache.org/static/1.2.1/apidocs/org/apache/shiro/realm/ldap/JndiLdapRealm.html)

对于授权覆盖方法 queryForAuthorizationInfo

请注意，您可能会从 AD 中获取组，因此您必须提供自己的映射（组到角色）。

关于这个 shiro[参考手册](http://shiro.apache.org/authorization.html)说：

> 当需要将角色名称转换为一组具体的权限实例时，Realm 可以在内部使用 RolePermissionResolver。
> 
> 对于支持可能没有权限概念的遗留或不灵活的数据源，这是一个特别有用的功能。
> 
> 例如，许多 LDAP 目录存储角色名称（或组名称）但不支持将角色名称关联到具体权限，因为它们没有“权限”概念。基于 Shiro 的应用程序可以使用存储在 LDAP 中的角色名称，但实现 RolePermissionResolver 将 LDAP 名称转换为一组显式权限，以执行首选的显式访问控制。权限关联将存储在另一个数据存储中，可能是本地数据库。

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:16:54.773

我正在做同样的事情，但我很确定你必须编写一个自定义 AuthenticationStrategy。我想针对 AD 进行身份验证，但使用 INI 来定义角色，但我无法让它表现得足够好，以至于不接受针对任何一个的身份验证（即使使用 FirstSuccessfulStrategy）。我没有深入研究它，所以也许四处飘荡的Shiro家伙之一可以纠正这个问题，但我今天遇到了这些问题。

# ruby-on-rails - 使用 Rails 设置 Nginx 服务器的最后一步

> ID：13696489
> 
> 赞同：0
> 
> 时间：2012-12-04T05:12:52.497
> 
> 标签：ruby-on-rails, nginx, vps

我一直在尝试在我的 VPS 上设置一个 nginx 服务器来部署我的 rails 应用程序。在最后一个命令之前一切都成功了，如果我让它工作，我将能够在服务器上看到我的应用程序。

我做了

```
sudo service nginx restart 
```

最后，

```
sudo update-rc.d uinicorn_app defaults 
```

但它说

```
update-rc.d: /etc/init.d/unicorn_app: file does not exist 
```

我通过进入目录手动检查文件，文件就在那里。但是，当我运行下面的命令时，我得到了以下信息。

```
deployer@max:/$ file /etc/init.d/unicorn_app
/etc/init.d/unicorn_app: broken symbolic link to `/home/deployer/apps/app/current/config/unicorn_init.sh' 
```

如何解决此问题并完成服务器设置？

**更新：**似乎我的*deploy.rb*配置无法正常工作，因为我找不到 /home/deployer/apps/app/current 文件夹。这是我的**deploy.rb**的一部分：

```
namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, :roles => :app, :except => {:no_release => true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, :roles => :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:38:54.377

如果找不到当前文件，请运行

```
cap deploy:cold 
```

which will deploy your application, run all pending migrations, and start the server for the first time.

# wcf - WCF 中的 MaxItemsInObjectgraph

> ID：13696493
> 
> 赞同：2
> 
> 时间：2012-12-04T05:13:03.197
> 
> 标签：wcf, wcf-binding

我有一个问题。当我使用 WCF 向服务器发送请求时，我得到了异常

“底层连接已关闭这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文”

我检查了 wcf 跟踪日志，发现错误是由于 MaxItemsInObjectgraph 超过了 65536。但是在我的服务器端配置文件和客户端配置文件中，我给 MaxItemsInObjectgraph 超过了 65536，即 2147483647。但它仍然给出了错误。比我试图通过在服务类中编写的代码来赋予 MaxItemsInObjectgraph 值

```
 [AspNetCompatibilityRequirements(RequirementsMode =    AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(MaxItemsInObjectGraph = 2147483647)]
    public class CustomerAnalyzeService : ICustomerAnalyze
    {.....something
    } 
```

但这也不起作用。我应该如何解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T08:43:58.897

在服务端配置中，您应该将 MaxItemsInObjectGraph = 2147483647 添加到 ServiceBehavior 和 EndpointBehavior。

# visual-c++ - 为什么我的 std::map 不通过其下标运算符接受其键作为索引？

> ID：13696495
> 
> 赞同：1
> 
> 时间：2012-12-04T05:13:15.613
> 
> 标签：visual-c++, stl, hashmap

我的代码最初看起来像这样：

```
int SomeObject::operator[]( const string& key ) const
{
    return ( *m_Map )[ key ];
}

int SomeObject::operator()( const string& key ) const
{
    return ( *m_Map2 )[ key ];
} 
```

这两张地图都有以下签名：

`std::map< std::string, int >`

然后我读了一些关于 STL 容器真的不需要显式堆分配（即`std::map< ... >* map = new std::map< ... >`）的东西，这就是我正在做的事情。

一旦我将映射更改为堆栈分配并删除指针取消引用，它看起来像这样：

```
int SomeObject::operator[]( const string& key ) const
{
    return m_Map[ key ];
}

int SomeObject::operator()( const string& key ) const
{
    return m_Map2[ key ];
} 
```

编译器抱怨以下错误（对于两个地图）：

```
Error   1   error C2678: binary '[' : no operator found which takes a left-hand operand of type 'const std::map<_Kty,_Ty>' (or there is no acceptable conversion) 
```

笏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T08:17:11.537

问题是您已将函数标记为`const`修改映射（如果键`operator[]()`不在`std::map`映射中，则添加一个带有默认值的元素）。

使用指针时可以避免这种情况，因为`const`仅适用于成员指针，而不适用于指针所指的对象。

像下面这样的东西应该可以解决这个`const`问题：

```
int SomeObject::operator[]( const string& key ) const
{
    std::map<string,int>::const_iterator it(m_Map.find(key));

    if (it == m_Map.end()) {
        throw /* something */;
    }

    return it->second;
} 
```

# jquery - 在jquery mobile中使用Photoswipe打开画廊

> ID：13696498
> 
> 赞同：1
> 
> 时间：2012-12-04T05:13:33.903
> 
> 标签：jquery, html, jquery-mobile, photoswipe

因此，我正在使用 Jquery Mobile 和 photoswipe 为投资组合创建一个小型图片库，但是一旦我调用 photoswipe，它会立即在浏览器中打开图库。它不是来自 photoswipe 网站的默认调用，因为它不起作用。

这是我的代码。

```
 <!DOCTYPE html>
<html>
<head>

    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link rel="stylesheet" type="text/css" href="jquery-mobile/jquery.mobile.structure.css">
    <link rel="stylesheet" type="text/css" href="jquery-mobile/jquery.mobile.css">
    <link rel="stylesheet" type="text/css" href="jquery-mobile/jquery.mobile.theme.css">
    <link rel="stylesheet" type="text/css" href="jquery-mobile/photoswipe.css">

    <script type-"text/javascript" src="jquery-mobile/jquery.js"></script>
    <script type-"text/javascript" src="jquery-mobile/jquery.mobile.js"></script>
    <script type="text/javascript" src="jquery-mobile/klass.min.js"></script>
    <script type="text/javascript" src="jquery-mobile/code.photoswipe.jquery-3.0.5.js"></script>

    <script type="text/javascript">

        (function(window, $, PhotoSwipe)
        {
            $(document).ready(function()
            {
                $("#gallery a").photoSwipe(
                {
                    enableMouseWheel: false,
                    enableKeyboard: false
                });

                $("#gallery a:first").click();
            });
        }(window, window.jQuery, window.Code.PhotoSwipe));

    </script>

</head>
<body>

<div data-role="page">

    <div data-role="header">
    <h1>welcome</h1>
    </div>

    <div id="gallery">

            <a href="web/full/photo1.jpg" rel="external"><img src="web/thumb/photo1thumb.jpg" alt="Image 001" /></a>
            <a href="web/full/photo2.jpg" rel="external"><img src="web/thumb/photo2thumb.jpg" alt="Image 002" /></a>
            <a href="web/full/photo3.jpg" rel="external"><img src="web/thumb/photo3thumb.jpg" alt="Image 003" /></a>
            <a href="web/full/photo4.jpg" rel="external"><img src="web/thumb/photo4thumb.jpg" alt="Image 004" /></a>
            <a href="web/full/photo5.jpg" rel="external"><img src="web/thumb/photo5thumb.jpg" alt="Image 005" /></a>
            <a href="web/full/photo6.jpg" rel="external"><img src="web/thumb/photo6thumb.jpg" alt="Image 006" /></a>

    </div>

    <div data-role="footer">
    <h2>2012</h2>
    </div>
</div>  

</body>
</html> 
```

关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:29:24.567

尝试删除

```
$("#gallery a:first").click(); 
```

我认为这是在您初始化后调用画廊`$("#gallery a").photoSwipe`

# random - 在 Ada 中转换数字

> ID：13696501
> 
> 赞同：3
> 
> 时间：2012-12-04T05:13:46.403
> 
> 标签：random, key, ada

我想知道如何将整数转换为 long_integer，将 long_integer 转换为 Positive_Count。即使在那种情况下转换应该很容易，我尝试过的每一种方法都给了我和错误。

例如，做

```
long := long_integer(int1) + long_integer(int2); 
```

即使两个整数都是正数，有时也会产生负值。

我正在运行的函数的代码，调试步骤拆分：

```
--calcKey--
procedure calcKey(x: in String16; key: out External_IO.Positive_Count) is
  s1, s2 : String2;
  int1, int2 : integer;
  long1, long2 : long_integer;
begin
  s1 := x(12..13); 
  s2 := x(15..16); 
  put_line("s1: " &s1& "- s2: " &s2);
  int1 := abs StringToInt(s1);
  int2 := abs StringToInt(s2); 
  put("int1: " & Integer'image(int1) & " | int: " & Integer'Image(int2)); new_line;
  long1 := long_integer(int1); 
  long2 := long_integer(int2);
  long1 := long1 + long2; 
  put_line("long := " & long_integer'Image(long1));
  long1 := (long1 mod 256) + 1;
  key := External_IO.Positive_Count(long1); 
  put_line("Key : " & External_IO.Positive_Count'Image(key));

  new_line;
end calcKey; 
```

调用函数：

```
calcKey("0123456789abcdef",k);
calcKey("0123456789abcdef",k);
calcKey("0123456789abcdef",k);
calcKey("0123456789abcdef",k);
calcKey("fedvba9876543210",k);
calcKey("fedvba9876543210",k); 
```

输出：

```
s1: bc- s2: ef
int1:  2011929758 | int:  1667393125
long := -615644413
Key :  4

s1: bc- s2: ef
int1:  287586 | int:  1667393125
long :=  1667680711
Key :  200

s1: bc- s2: ef
int1:  13132642 | int:  1667393125
long :=  1680525767
Key :  200

s1: bc- s2: ef
int1:  13132642 | int:  1667393125
long :=  1680525767
Key :  200

s1: 43- s2: 10
int1:  13120308 | int:  859058225
long :=  872178533
Key :  102

s1: 43- s2: 10
int1:  6697780 | int:  859058225
long :=  865756005
Key :  102 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:50:24.243

先前的答案对于检查整数大小的需要（和正确的方法）是正确的。

或者，定义您自己的整数类型并解决“问题”！

但是，如果整数加法溢出并返回负数，则说明您没有使用 Ada 编译器！

不幸的是，Gnat 默认不是 Ada 编译器。

使用 Gnat，您需要设置编译器标志以启用检查，例如溢出，默认情况下确实应该启用。然后这样的溢出将引发 Constraint_Error 异常，并带有一条消息直接指向失败的代码行 - 使测试比必须对出错的地方进行逆向工程容易得多！

```
gnatmake -gnataeEfoUv -fstack-check my_main.adb 
```

是一个相当全面的集合，可能包括一些您不想要的样式检查：查看 Gnat 文档以获取更多详细信息。

欢迎其他有关首选标志集的建议。

如果您使用的是另一个编译器，我很想知道它是哪个。

顺便说一句，您没有提供 StringToInt 函数，因此没有其他人可以测试您的示例，但我要指出的是，它生成的值与您提供的字符串所期望的值完全不同......它是随机散列吗发电机？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T06:38:20.983

（这应该是评论，但太长了，所以我将其作为答案提交）

我要做的第一件事实际上是验证 long_int 是您认为的那样，即正在做`INTEGER'SIZE`并且`LONG_INTEGER'SIZE`，很可能在您的平台上它们的大小完全相同，

从 Ada 定义：

> 请注意，这些类型的范围和大小在每个平台上都可能不同（当然，布尔值和 [[Wide_]Wide_]Character 除外）。有一个实现要求，Integer 类型的大小至少为 16 位，Long_Integer 的大小至少为 32 位（如果存在） RM 3.5.4 (21..22)（已注释）。所以如果你想要你的类型的完全可移植性，不要使用标准中的类型（除非你必须，见下文），而是定义你自己的类型。编译器将拒绝其范围无法满足的任何类型声明。

如果它们的大小相同，则在添加 2 个非常大的整数时可能会溢出，从而给出您看到的结果。

来源：[http ://en.wikibooks.org/wiki/Ada_Programming/Libraries/Standard](http://en.wikibooks.org/wiki/Ada_Programming/Libraries/Standard)

# c++ - 大括号括起来的初始化列表

> ID：13696502
> 
> 赞同：0
> 
> 时间：2012-12-04T05:13:55.990
> 
> 标签：c++, arrays

我正在尝试将一组`Data*`指针传递给函数。

```
void f(int argc, Data** argv) {
    ...
}
// at this point, I have Data* x, Data* y initialized
f(2, {x, y}); 
```

有没有办法让这样的代码运行，其中数组定义内联在函数调用中？现在，返回的错误是

```
closure3.cc:15:8: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
closure3.cc:15:16: error: cannot convert ‘&lt;brace-enclosed initializer list>’ to ‘Data**’ for argument ‘2’ to ‘void f(int, Data**)’ 
```

有没有办法让数组内联实例化，是否可以在没有 C++0x 的情况下做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:28:58.717

您可能需要考虑使用可变长度参数，这样您就不必内联实例化列表。

[http://www.cprogramming.com/tutorial/lesson17.html](http://www.cprogramming.com/tutorial/lesson17.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:44:37.410

大括号初始值设定项仅在声明数组变量时可用。所以你不能这样做。

从技术上讲，您可以使用函数来完成（注意：这是未经测试的）

```
Data ** pair_of_data(Data * x, Data * y)
{
  Data ** result = new Data*[2];
  result[0] = x;
  result[1] = y;
  return result;
} 
```

但这很丑，有几个原因：

1.  数组最终在堆上，这真的是不必要的
2.  每次使用该功能时，您都要求（轻微）内存泄漏。
3.  它需要重载以模拟可变参数，或者更改为使用可变参数，从而失去类型安全性。

如果您特别需要传递对，请考虑`std::pair`改用。这些可以使用`std::make_pair`.

不过，最后，使用 STL 容器可能更容易，或者在调用函数之前声明一个数组变量，以便使用聚合初始化。或添加`-std=c++0x`标志。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T05:32:28.713

如果你真的想要它没有 C++11 特性，你可以尝试这样做（不是好的代码，只是为了展示这个想法）：

```
vector<int> InitList(int first, ...)
{
    vector<int> arr;
    int *p = &first;

    while(*(p + 1))
    {
        arr.push_back(*p);
        p++;
    }

    return arr;
}

int main()
{
    F(2, InitList(1, 2, 3));
} 
```

# c++ - OpenCV“引用自：main.o中的_main”构建错误

> ID：13696505
> 
> 赞同：1
> 
> 时间：2012-12-04T05:14:07.583
> 
> 标签：c++, opencv, undefined, symbols

我正在尝试在 Xcode 中运行以下程序；

```
#include <stdio.h>
#include <stdlib.h>
#include <opencv/cv.h>
#include <opencv/highgui.h>

int TrackbarInitValue = 0;
int TrackbarStopValue;

CvCapture *capture = NULL;
IplImage *frame;

void onTrackbarSlide(int position)
{
    cvSetCaptureProperty(capture, CV_CAP_PROP_POS_FRAMES, position);
        // cvShowImage("Trackbar", frame);
}

int main(int argc, char **argv)
{
    cvNamedWindow("Trackbar", CV_WINDOW_AUTOSIZE);

    if(argc < 2)
    {
        printf("Please specify the video name n");
        exit(0);
    }

    capture = cvCreateFileCapture(argv[1]);
    TrackbarStopValue = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_COUNT);
    if(TrackbarStopValue != 0)
    {
        cvCreateTrackbar("Position", "Trackbar", &TrackbarInitValue, TrackbarStopValue, onTrackbarSlide);
    }

    while(1)
    {
        frame = cvQueryFrame(capture);
        if(!frame) break;
        int pos = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_POS_FRAMES);
        cvSetTrackbarPos("Position", "Trackbar", pos);
        cvShowImage("Trackbar", frame);
        char c = cvWaitKey(33);
        if( c == 27) break;
    }

    cvReleaseCapture(&capture);
    cvDestroyWindow("Trackbar");

    return 0;
} 
```

当我尝试构建时，出现以下错误；

```
Ld build/Debug/TrackBarPlayer normal x86_64
cd "/Users/facebooth/C++ practice/OpenCV Practice/TrackBarPlayer"
setenv MACOSX_DEPLOYMENT_TARGET 10.6
/Developer/usr/bin/g++-4.2 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.6.sdk "-L/Users/facebooth/C++ practice/OpenCV Practice/TrackBarPlayer/build/Debug" -L/opt/local/lib "-F/Users/facebooth/C++ practice/OpenCV Practice/TrackBarPlayer/build/Debug" -filelist "/Users/facebooth/C++ practice/OpenCV Practice/TrackBarPlayer/build/TrackBarPlayer.build/Debug/TrackBarPlayer.build/Objects-normal/x86_64/TrackBarPlayer.LinkFileList" -mmacosx-version-min=10.6 -o "/Users/facebooth/C++ practice/OpenCV Practice/TrackBarPlayer/build/Debug/TrackBarPlayer"

Undefined symbols:
  "_cvCreateFileCapture", referenced from:
      _main in main.o
  "_cvSetCaptureProperty", referenced from:
      onTrackbarSlide(int)  in main.o
  "_cvNamedWindow", referenced from:
      _main in main.o
  "_cvSetTrackbarPos", referenced from:
      _main in main.o
  "_cvCreateTrackbar", referenced from:
      _main in main.o
  "_cvShowImage", referenced from:
      _main in main.o
  "_cvQueryFrame", referenced from:
      _main in main.o
  "_cvDestroyWindow", referenced from:
      _main in main.o
  "_cvReleaseCapture", referenced from:
      _main in main.o
  "_cvWaitKey", referenced from:
      _main in main.o
  "_cvGetCaptureProperty", referenced from:
      _main in main.o
      _main in main.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

我是编程的新手，经过几个小时的谷歌搜索，我发现这是一个链接问题。如果有人能给我一些关于如何修复它的指导，或者这些错误实际上在说什么，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-08-02T01:31:17.127

关联`libopencv_videoio.3.2.6.dylib`

# c# - 将Button控件保持在按下状态wp7？

> ID：13696507
> 
> 赞同：0
> 
> 时间：2012-12-04T05:14:11.280
> 
> 标签：c#, windows-phone-7

如何使用 C# 在 windows phone 7 应用程序中将按钮控件保持在按下状态？我想在屏幕上有很多不同的按钮，但是当我按下任何一个按钮时，我希望它保持按下状态。有任何想法吗？

另外，一旦它处于按下状态，有没有办法手动“按下”它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:33:33.003

如果按钮属性如下：
foreground:white
background:black

然后在按下状态下，它的属性将是
前景：黑色
背景：白色

如果您在单击事件中更改按钮的属性，则可以看到它被按下。并且设置按钮的 IsEnabled 属性可以防止它触发按钮上的事件。

# windows - 批处理文件只下载今天的文件

> ID：13696510
> 
> 赞同：1
> 
> 时间：2012-12-04T05:14:24.290
> 
> 标签：windows, command-line, batch-file

我在文件夹中有“n”个不同日期的文件，但我只想下载今天的文件。请帮我解决这个问题。文件名中没有日期格式，仅根据修改日期我必须下载通过 FTP 文件，

请帮帮我。

谢谢

塞尔瓦

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T07:29:35.120

您可以使用该`forfiles`命令获取仅前一天或仅在今天修改的文件。

例如。如果您想从今天修改的文件夹（source_folder）下载一些文件，然后下载到您的文件夹（destination_folder）：

```
forfiles /P %path to source_folder%  /M *.txt  /D -0 /C "cmd copy @fname %path_of_destination_folder% " 
```

# java - JAVA：如何访问另一个对象的子类？

> ID：13696514
> 
> 赞同：0
> 
> 时间：2012-12-04T05:14:54.133
> 
> 标签：java

我有一个对象 VMemRead 的实例（我们称之为 r）。VMemRead 的构造函数看起来像

```
VMemRead(SourcePos sourcePos, VVarRef dest, VMemRef source) 
```

带字段`dest`和`source`. 我知道当我想访问 dest 时，我可以做`r.dest`. 但是，我想“更深入”地了解源代码。

VMRef 有两个嵌套类`VMemRef.Global`和`VMemRef.Stack`. VMemRef.Global 有构造函数

```
VMemRef.Global(SourcePos sourcePos, VAddr<VDataSegment> base, int byteOffset) 
```

我想访问`int byteOffset`. 实际上，我想做一些类似的事情，`r.source.Global.byteOffset`但 Java 不允许我这样做。

有什么方法可以访问该值吗？

文档：VMemRead：[http ://cs.ucla.edu/classes/spring11/cs132/kannan/vapor-parser/vapor-parser-javadoc/cs132/vapor/ast/VMemRead.html#source](http://cs.ucla.edu/classes/spring11/cs132/kannan/vapor-parser/vapor-parser-javadoc/cs132/vapor/ast/VMemRead.html#source)

VMemRef：[http ://cs.ucla.edu/classes/spring11/cs132/kannan/vapor-parser/vapor-parser-javadoc/cs132/vapor/ast/VMemRef.html](http://cs.ucla.edu/classes/spring11/cs132/kannan/vapor-parser/vapor-parser-javadoc/cs132/vapor/ast/VMemRef.html)

VMemRef.Global：http://cs.ucla.edu/classes/spring11/cs132/kannan/vapor-parser/vapor-parser-javadoc/cs132/vapor/ast/VMemRef.Global.html [_](http://cs.ucla.edu/classes/spring11/cs132/kannan/vapor-parser/vapor-parser-javadoc/cs132/vapor/ast/VMemRef.Global.html)

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:24:50.313

~~这些嵌套类是静态的。对于它们中的每一个，您都需要对实例的引用才能访问字段值。的实例`VMemRef`没有（记录的）类型为`VMemRef.Global`或的成员字段`VMemRef.Stack`。您必须在其他地方寻找`r`这些类的数据。~~

~~换句话说，仅仅因为您有`VMemRef`in的实例`r`，并不意味着存在`VMemRef.Global`or的任何实例`VMemRef.Stack`。所以没有办法访问“那些值”，因为“那些值”不一定存在！~~

**编辑**重新阅读 API 后，我看到这`VMemRef`是一个抽象类，并且`r.source`是`VMemRef.Global`or的一个实例`VMemRef.Static`。这改变了故事。你可以这样做：

```
if (r.source instanceof VMemRef.Global) {
    VMemRef.Global source = (VMemRef.Global) r.source;
    // access fields specific to VMemRef.Global
} else if (r.source instanceof VMemRef.Stack) {
    VMemRef.Stack source = (VMemRef.Stack) r.source;
    // access fields specific to VMemRef.Stack
} 
```

# bash - 如何将 grep 的值分配给变量并与字符串连接？

> ID：13696517
> 
> 赞同：3
> 
> 时间：2012-12-04T05:15:10.890
> 
> 标签：bash, shell, grep

我的开发机器上有几台服务器。我每个人都有一个脚本来运行它们，我一次处理几个 git 分支。因此，每当我运行运行服务器的脚本时，我希望它打印我试图以不同颜色运行的 git 分支中的哪个服务器。

这是我所拥有的，但它无法正常工作。

```
git_branch= git branch|grep '*'|cut -c3-
echo -e "\e[1;33;40m Running API server on git branch  $git_branch \e[0m"
...
REST_OF_THE_CODE_THAT_RUNS_THE_DEV_SERVER
... 
```

它首先打印 git 分支，并且该值似乎根本没有分配给变量。我无法弄清楚我哪里出错了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T05:17:37.877

要将命令行的结果分配给变量，请使用反引号或`$(..)`符号。例如，假设您的命令行有效，您可以使用：

```
git_branch=$(git branch|grep '*'|cut -c3-) 
```

这种表示法比反引号更可取，因为它更容易阅读，并且允许嵌套而不需要转义：

```
echo $(echo foo$(echo bar)) 
```

请注意，在您的原始代码中，您`grep`应该更具体。请记住，对于 grep，星号实际上意味着“前一个原子的零个或多个”。所以这会更好：

```
git_branch=$(git branch|grep '^[*]'|cut -c3-) 
```

# firefox - 如何使用 Vimperator 选择非 url 文本？

> ID：13696518
> 
> 赞同：46
> 
> 时间：2012-12-04T05:15:13.230
> 
> 标签：firefox, vimperator

我正在使用 vimperator 3.5 和 firefox 17。除了非 url 文本选择之外，一切都很顺利。官方帮助文档中似乎对此没有任何描述。每次当我想选择一些非 url 文本时，我都必须使用鼠标来完成它。这真的很烦人。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-04T18:19:58.763

**跳到点开始您的选择**

您可以使用它`/`来查找您想要搜索的任何内容，并使用它`n`来前往特定位置。

**选择**

到达那里后，键入`c`以进入**CARET**模式，您可以像 vim 一样使用`h``j``k``l`来移动和选择。`v`

**应对**

也`y`用来拉。快乐的vip！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-21T09:55:33.650

如果您用鼠标选择想要的文本，请使用

> 是

复制选定的文本。

好的备忘单：http: [//sheet.shiar.nl/vimperator](http://sheet.shiar.nl/vimperator)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-12-06T18:09:16.543

xxinerKYU 的答案很好，但根据 liberator://help/various#various 的参考页面，这似乎`i`是插入符号模式的关键。

# css - LESS 是否支持这种语法？

> ID：13696527
> 
> 赞同：0
> 
> 时间：2012-12-04T05:16:25.850
> 
> 标签：css, less

我目前正在使用 LESS。由于我使用 CSS sprites，我想知道 LESS 是否支持这种语法：

```
icon{x}{
  background-position:-10px -10*{x}px;
} 
```

因为我必须创建这种 CSS 样式：

```
icon1{
  background-position:-10px -10px;
}
icon2{
  background-position:-10px -20px;
}
icon3{
  background-position:-10px -30px;
}
................. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:07:28.143

## Is it possible ?

Unfortunately, I think it's not. LESS is a compiled language and doesn't support (yet ?) iteration control structures like `while()` or `for()`.
To begin an answer, I would write the following HTML code :

```
<div id="1" class="icon"></div>
<div id="2" class="icon"></div>
<div id="3" class="icon"></div> 
```

With the following LESS code :

```
.dynamic-background(@i)
{
    background-position: -10px (-10px * @i);
}

@var: `document.getElementsByClassName('icon')[2].id`;

.icon
{
    .dynamic-background(@var);
} 
```

Which would result as the following CSS code :

```
.icon
{
    background-position: -10px -30px;
} 
```

But as you can see, this code is dynamic for only one element by page, due to the `[x]` on the result of `getElementsByClassName`. Maybe there is an additional trick that I'm missing there, though.

## Alternative solution

Maybe could you just use Javascript :

```
<script type="text/javascript">
    var elems = document.getElementsByClassName('icon');
    for (var i=0; elems[i]; i++)
        elems[i].style.backgroundPosition = '-10px -'+elems[i].id*10+'px';
</script> 
```

Which results in the following:

```
<div id="1" class="icon" style="background-position: -10px -10px;"></div>
<div id="2" class="icon" style="background-position: -10px -20px;"></div>
<div id="3" class="icon" style="background-position: -10px -30px;"></div> 
```

# r - 我在哪里可以找到 R 的 EM 聚类算法的基本实现？

> ID：13696532
> 
> 赞同：2
> 
> 时间：2012-12-04T05:16:45.263
> 
> 标签：r, data-mining, cluster-analysis

我正在寻找 R 中 EM 集群的基本实现。到目前为止，[我能找到](http://cran.r-project.org/web/views/Cluster.html)的似乎是专门的或“需要一些组装”的版本。例如， from 的实现`mclust`定义了一系列我不熟悉的参数，并且不接受*k*的参数。我正在寻找的是更接近 R 附带的 kmeans 实现或[ELKI](http://elki.dbs.ifi.lmu.de/)的[EM 实现的](http://elki.dbs.ifi.lmu.de/browser/elki/trunk/src/de/lmu/ifi/dbs/elki/algorithm/clustering/EM.java)东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:31:48.157

阅读文档怎么样`mclust`？

[http://cran.r-project.org/web/packages/mclust/mclust.pdf](http://cran.r-project.org/web/packages/mclust/mclust.pdf)

[https://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Clustering/Expectation_Maximization_%28EM%29](https://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Clustering/Expectation_Maximization_%28EM%29)

确保选择所需的模型（可能`VVV`？），如果你想要一个固定的`k`，然后设置`G`为单个值而不是默认值`1:9`。

尝试这个：

```
library(mclust)
m <- Mclust(data, 4:4, c("VVV"), control=emControl(tol=e1-4)) 
```

我必须说我不太使用或不喜欢 R。它有很多东西，但它不适合在一起。它只是随机的人独立编写的随机内容，然后上传到中央存储库。但是根本没有质量保证，也没有人使库兼容。

# android - 在android中的imageview上绘制文本或符号

> ID：13696535
> 
> 赞同：1
> 
> 时间：2012-12-04T05:17:03.680
> 
> 标签：android, image, touch, android-imageview

我正在开发一个需要 mee 允许用户在显示的图像上绘制任何文本的应用程序。
我无法找到正确的术语来搜索网络——我应该称之为感应还是触摸事件，或者它是一个手势应用程序。
正是我想让用户在图像上涂鸦或绘制任何东西。
我几乎没有什么想法，比如它可以使用画布或一些覆盖元素，但没有什么具体的。

PS：
我使用 android 2.2 作为目标。
我是android开发的新手。
请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:18:52.390

好吧，回答我自己的第一个问题 :) 实际上我无法直接找到解决方案 - 但至少找到了 2 条出路。

1.  您可以拍摄 2 个图像视图。将第一个 Imageview（引用为 imageview1）与图像源分配，然后将第二个 Imageview（引用为 imageview2）放在 imageview1 上，这样它就可以覆盖整个屏幕（填充父级 - 高度和宽度）。
    现在在 .java 文件中，`imageview2.setOnTouchListener(this);`根据需要分配和覆盖 onLoad() 方法。例如。

    `public boolean onTouch(View v, MotionEvent 事件) {

    ```
    int action = event.getAction();
    switch (action) {
    case MotionEvent.ACTION_DOWN:

        oldx = downx = event.getX();
        oldy = downy = event.getY();            
        break;

    case MotionEvent.ACTION_MOVE:

        downx = event.getX();
        downy = event.getY();

        canvas.drawLine(oldx, oldy, downx, downy, paint);
        imgvw.invalidate();

        oldx = downx ;
        oldy = downy ;          
        break;

    case MotionEvent.ACTION_UP:
        upx = event.getX();
        upy = event.getY();

        canvas.drawLine(oldx, oldy, upx, upy, paint);
        imgvw.invalidate();

        break;
    case MotionEvent.ACTION_CANCEL:
                     // SOME CODE THAT YOU WANNA USE 
        break;
    default:
        break;
    }
    return true; 
    ```

    }`

> 油漆油漆 = 新油漆（）；
> 
> paint.setColor(Color.GREEN);

这将有助于在 imageview2 上绘制，但看起来好像是在 imageview1 上绘制的 :)

1.  第二种方法非常简单——创建一个扩展 ImageView 的新类（称为 MyImageview）。现在在您的活动类中，创建一个 MyImageView 对象`setContentView(myImageView(this))` 并附加一个`setOnTouchListener(this);`，实现上面指定的 onTouch 方法，这将正常工作。

# flash - Youtube 视频嵌入不起作用：“电影未加载...”？

> ID：13696536
> 
> 赞同：3
> 
> 时间：2012-12-04T05:17:08.970
> 
> 标签：flash, youtube, youtube-api, video-embedding

我有一个网站，[advicedaily.com](http://advocatedaily.com/)，它的主页上有一个 Youtube 视频，该视频无缘无故停止加载。相反，我得到了一个透明的 Flash 对象。右键单击它会显示“电影未加载...”。

在[此站点的其他页面上](http://advocatedaily.com/advocatetv/)，视频运行良好。这发生在所有浏览器和我尝试过的所有机器上，所以我不相信它与缓存或 cookie 有任何关系。

有没有人遇到过这样的事情？为什么在没有用户影响的情况下会突然发生这种情况？

```
<object width="460" height="337"><param name="movie" value="http://www.youtube.com/v/?fs=1&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/?fs=1&amp;hl=en_US" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="460" height="337"></embed></object> 
```

![电影未加载注释、flash、youtube](../Images/8c0c269cefaccd427eb91631150ca741.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:24:16.620

看起来嵌入代码缺少`video_id`：

```
<embed  src="http://www.youtube.com/v/{VIDEO_ID_HERE}?fs=1&amp;hl=en_US" type="application/x-shockwave- flash" allowscriptaccess="always" allowfullscreen="true" width="460" height="337"></embed> 
```

# ms-access-2007 - 将现有的 Access 表单重定向到 SQL Server

> ID：13696537
> 
> 赞同：1
> 
> 时间：2012-12-04T05:17:09.820
> 
> 标签：ms-access-2007

在我们的组织中，我们在 Access 中有销售数据库。Access 数据库的表单和报表很少。随着时间的推移，Access 数据库不断增长。通过表单检索记录变得缓慢而繁琐。我们决定将迁移分为两个阶段——短期和长期。短期内，我们希望将 Access 数据库迁移到 SQL Server，并将 Access 中的表单和报表保持原样。我必须将表单和报告链接到 SQL Server 表。我已经使用迁移助手工具成功地将 Access 数据库迁移到 SQL SERVER。我被困在更改表单以与 SQL Server 对话。我的问题是——是否可以更改现有的访问表单以与 SQL SERVER 对话？如果上述答案是错误的，我可以使用哪些其他方法来实现相同的目标？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:36:16.633

我相信您可以通过创建与原始表同名的“链接表”来做到这一点。

我已经在菜单栏的“外部数据”中使用 ODBC，选择“ODBC 数据库”，然后选择“链接到数据源，并创建链接表”。

当向导完成“它几乎向前”时，只需将表名更改为原始表名，表单应该像“没有任何改变”一样工作。

# python - 用于谷歌应用引擎（GAE）的最佳 facebook 图形 api 包装器

> ID：13696542
> 
> 赞同：1
> 
> 时间：2012-12-04T05:18:01.630
> 
> 标签：python, google-app-engine, facebook-graph-api

是否有任何用于在 GAE 上使用的 python/Django 的 facebook graph api 包装器？最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:19:44.563

我使用[PythonForFacebook](https://github.com/pythonforfacebook/facebook-sdk)。它工作得很好。

# iphone - 如何知道我正在使用哪个 iOS 开发者程序？

> ID：13696545
> 
> 赞同：-1
> 
> 时间：2012-12-04T05:18:15.047
> 
> 标签：iphone, ios, ad-hoc-distribution

实际上，我有一个客户端 ios 开发人员程序，我用它来在苹果商店上传应用程序，我也可以分发带有企业选项的 adhoc。

我很困惑我正在使用 99 美元或 @299 美元的 iOS 开发程序。有人说，如果您使用的是 Enterprise ios developer Program，则无法在 Apple Store 上上传应用程序。

谁能告诉我如何知道我正在使用哪个 ios 开发人员程序。

如果是企业版，那么我想在不注册设备的 UDID 的情况下在内部分发应用程序，我可以在内部进行多少次分发，程序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:55:07.263

检查此链接 [获取为 iOS 和 OS X 开发和分发应用程序所需的一切](https://developer.apple.com/programs/start/standard/)。：[https ://developer.apple.com/programs/start/standard/](https://developer.apple.com/programs/start/standard/)

主要区别在于 ios 标准程序（99 美元），您可以将应用程序分发给所有公众。但如果是企业版（299 美元），您可以将专有的内部 iOS 应用程序分发给您的员工。您还可以安全地托管和无线分发或更新内部应用程序给员工。来源：[https ://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

1.  要了解您使用的程序，请单击链接：[https](https://developer.apple.com/membercenter/index.action#accountSummary) ://developer.apple.com/membercenter/index.action#accountSummary并使用您的 ID 和密码登录。然后在帐户摘要中（在您的帐户选项卡中），您可以看到您的帐户摘要以及到期日期。例如： **iOS 开发者计划，到期日期：Sep xx, xxxx**
2.  检查此链接：[http](http://answers.oreilly.com/topic/1434-how-to-prepare-an-iphone-app-for-ad-hoc-distribution/) ://answers.oreilly.com/topic/1434-how-to-prepare-an-iphone-app-for-ad-hoc-distribution/ 了解如何为 Ad Hoc 准备 iPhone 应用程序分配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:22:52.280

使用 Ad-hoc（In House），您每年只能将应用程序分发到具有企业配置文件的 100 台设备。您也可以使用企业配置文件将您的应用上传到应用商店。

# ruby-on-rails - Spork 和 minitest：testdrb 以 SystemExit 异常退出

> ID：13696550
> 
> 赞同：3
> 
> 时间：2012-12-04T05:18:41.853
> 
> 标签：ruby-on-rails, spork

我有一个安装了 spork-rails 和 spork-minitest 的 Rails 3.2 项目。我还有一个使用命令成功运行（尽管速度很慢）的集成测试`rake test:integration`。

现在，spork 在端口 8988 上运行，我尝试通过 testdrb 运行测试：

```
$ bundle exec testdrb -Itest test/integration/**/*_test.rb
No examples found.

Finished in 0.00141 seconds
0 examples, 0 failures

Randomized with seed 35511

Exception encountered: #<SystemExit: exit>
backtrace:
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/test/unit.rb:326:in `exit'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork.rb:77:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork.rb:77:in `exec_after_each_run'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/run_strategy/forking.rb:14:in `block in run'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/forker.rb:21:in `block in initialize'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/forker.rb:18:in `fork'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/forker.rb:18:in `initialize'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/run_strategy/forking.rb:9:in `new'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/run_strategy/forking.rb:9:in `run'
/home/mike/.rvm/gems/ruby-1.9.3-p286@myproject/gems/spork-1.0.0rc3/lib/spork/server.rb:48:in `run'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1548:in `perform_without_block'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1508:in `perform'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1586:in `block (2 levels) in main_loop'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1582:in `loop'
/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1582:in `block in main_loop' 
```

同时，Spork 终端输出一个成功的测试运行：

```
Running tests with args ["-Itest/", "test/integration/admin/user_test.rb"]...
Run options: 

# Running tests:

Finished tests in 1.551147s, 0.6447 tests/s, 0.6447 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Done. 
```

除了这个 SystemExit 错误之外，基本上一切都在工作。它似乎来自 minitest 自动运行代码，它安装了一个 at_exit 处理程序，然后在该处理程序中调用 exit()。我能做些什么来摆脱这个错误吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T15:52:28.613

您可以检查或发布文件/home/mike/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/test/unit.rb:326:in 下的代码吗

那里有一个出口错字的机会。

在我看到代码之前没有 100%，您在终端中输入了 exit，但在文件中输入错误，这就是导致它的原因

# java - java程序获取ip isp信息

> ID：13696553
> 
> 赞同：1
> 
> 时间：2012-12-04T05:19:02.660
> 
> 标签：java

我使用java程序从日志文件中获取IP地址，然后我需要获取IP的ISP和IP的组织。我用

```
 URL url = new URL("http://www.ip-adress.com/ip_tracer/"+ip); 
```

获取html内容，然后从html内容中获取ISP信息，但是这个网站每天只能免费使用20次，所以你能不能给我一些其他的方法来获取ISP信息。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:23:01.627

```
request.getHostAddress(); 
```

这将给出IP地址

# python - 如何在 Python 的树层次结构中打破“/home/username/ok/ok.txt”？

> ID：13696556
> 
> 赞同：-2
> 
> 时间：2012-12-04T05:19:41.087
> 
> 标签：python, split

我在 Python 中使用以下命令获取文件或目录的完整路径的输出：

```
command = subprocess.Popen(['sshpass', '-p', password, 'rsync', '--recursive', source],
                           stdout=subprocess.PIPE).communicate()[0] 
```

我得到了问题中的输出。现在我想打破我的输出：

```
home
 username
   ok
     ok.txt 
```

尝试使用：`command.split('\')`但没有用。打破后我想让用户也选择每个文件或目录。我怎样才能做到这一点？谢谢

**编辑**：实际上它是一个列表，但我使用 Django 模板中的连接打破了它，所以我猜它现在是一个字符串。现在输出是这样的：

```
django
django/genelaytics
django/genelaytics/.project
django/genelaytics/.pydevproject
django/genelaytics/manage.py
django/genelaytics/fileupload
django/genelaytics/fileupload/__init__.py
django/genelaytics/fileupload/__init__.pyc
django/genelaytics/fileupload/form.html~
django/genelaytics/fileupload/forms.py
django/genelaytics/fileupload/forms.pyc
django/genelaytics/fileupload/models.py 
```

期望的输出：

```
django
  genelaytics
    .project
     .pydevproject 
```

我想要文件和文件夹的树结构。谢谢

如果从字符串转换为树很难，我也有这种列表：

```
['django', 'django/genelaytics', 'django/genelaytics/.project', 'django/genelaytics/.pydevproject', 'django/genelaytics/manage.py', 'django/genelaytics/fileupload', 'django/genelaytics/fileupload/__init__.py', 'django/genelaytics/fileupload/__init__.pyc'] 
```

我想要与上面相同的输出。如果从字符串转换树很容易，我会这样做，否则如果从列表转换树很容易，让我们做任何容易的事情。不是问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:26:46.777

我认为这会让你达到 99% 那里..

```
t = "/home/username/ok/ok.txt"
for i,j in enumerate(t.split("/")):
    print i * " " + j

 home
  username
   ok
    ok.txt 
```

对于 python ，字符串可以是多个数字，如下所示：

```
"a" * 3
output: 'aaa' 
```

并且 enumerate 将返回一个元组，该元组的第一个元素是可迭代对象的索引。

```
for i in enumerate(t.split("/")):
    print i

output: (0, '')
output: (1, 'home')
output: (2, 'username')
output: (3, 'ok')
output: (4, 'ok.txt') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T05:24:44.903

我可能会误解，但假设你有这样的字符串，这行得通吗？

```
In [14]: s = '/home/username/ok/ok.txt'

In [15]: for index, el in enumerate(s.split('/')[1:]):
   ....:     print '  ' * index + el
   ....:
   ....:

  home
    username
      ok
        ok.txt 
```

这将遍历拆分字符串，跳过第一个（空白）元素并打印出前面有两个空格乘以当前索引（0、1、2 等）的元素。不确定您要使用什么界面来允许选择，但我想您可以执行以下操作：

```
In [23]: for index, el in enumerate(s.split('/')[1:]):
   ....:     print '[{0}] {1}{2}'.format(index + 1, index * ' ', el)
   ....:
   ....:
[1] home
[2]  username
[3]   ok
[4]    ok.txt 
```

这与上面的基本相同，添加一个“标记”并使用字符串格式来显示字符串。要允许使用 进行选择`raw_input`，您可以尝试以下操作：

```
In [26]: my_path = s.split('/')[1:]

In [27]: my_path
Out[27]: ['home', 'username', 'ok', 'ok.txt']

In [28]: choice = int(raw_input(('Enter choice: ')))
Enter choice: 2

In [29]: print my_path[choice-1]
username 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T05:28:56.327

考虑使用[`os.path.split`](http://docs.python.org/2/library/os.path#os.path.split).

# iphone - 向 NSMutableArray 添加对象，尝试在 UITableView 上重新加载数据，新对象未显示。:(

> ID：13696558
> 
> 赞同：1
> 
> 时间：2012-12-04T05:19:56.733
> 
> 标签：iphone, objective-c

我已经成功设置了`UITableView`从数组中提取其单元格标签的 a。我想要做的是*将一个对象添加到该数组并重新加载 UITableView*以便它显示该新对象并创建一个新单元格。不幸的是，我没有运气。

我知道这可能是我在代码中所做的非常愚蠢的事情，但是有人可以让我知道我哪里出错了吗？这是我目前正在使用的：

**这是我的整个.h：**

```
@interface crastinatrViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> {

NSMutableArray *tasksList;

UIView *addtaskview;

}

@property (strong, nonatomic) IBOutlet UITableView *mainTableView;

@property (nonatomic, retain) NSMutableArray *tasksList;

@property (strong, nonatomic) IBOutlet UITextField *taskName;

- (IBAction)addTask:(id)sender;
- (IBAction)startaddTask:(id)sender;
@end 
```

**和我的整个.m：**

```
@interface crastinatrViewController ()

@end

@implementation crastinatrViewController

@synthesize mainTableView;

@synthesize tasksList;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    tasksList = [[NSMutableArray alloc] initWithObjects:nil];
    self.mainTableView.delegate = self;
    self.mainTableView.dataSource = self;
    [self.taskName becomeFirstResponder];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSInteger rows = [[self tasksList] count];

    NSLog(@"rows is: %d", rows);
    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *contentForThisRow = [[self tasksList] objectAtIndex:[indexPath row]];

    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        // Do anything that should be the same on EACH cell here.  Fonts, colors, etc.
    }

    // Do anything that COULD be different on each cell here.  Text, images, etc.
    [[cell textLabel] setText:contentForThisRow];

    return cell;}

-(IBAction)startaddTask:(id)sender {

    addtaskview = [self.storyboard instantiateViewControllerWithIdentifier:@"addTaskView"];

    [self presentViewController:addtaskview animated:YES completion:nil];

}

- (IBAction)addTask:(id)sender {

    [tasksList addObject:self.taskName.text];

    [self dismissViewControllerAnimated:YES completion:nil];

    [mainTableView reloadData];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:22:38.780

你试过了吗

```
[self dismissViewControllerAnimated:YES completion:^{
    [mainTableView reloadData];
}]; 
```

此外，放置断点并检查是否调用`reloadData`了 TableView Delegate 和 DataSource 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:42:33.633

请确保您已完成 taskList 数组的初始化。像'tasksList = [[NSMutableArray alloc] init]'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:54:54.513

我认为，您是硬编码 numberOfRowsInSection 请检查，它将是 -

```
 - (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section {
                     return [tasksList count];
                 } 
```

# apache-flex - flex全屏外接

> ID：13696566
> 
> 赞同：1
> 
> 时间：2012-12-04T05:21:08.983
> 
> 标签：apache-flex, hyperlink, fullscreen

当用户从列表中选择（选择要查看的项目）时，我有一个 flex 应用程序进入全屏模式。

一切都很好，除非用户单击链接（例如 PDF 文档），这会在新窗口中打开（一切正常），并且当用户尝试返回上一页时，他们无法访问该页面。他们需要 Alt+TAB 才能进入全屏窗口。

客户端会迷路，任何关于让浏览器以全屏模式打开新链接的想法，我认为（希望）这将解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:06:59.330

我想现在有办法强制浏览器从 pdf 页面切换到全屏 flash 应用程序。相反，您可以使用 FlexPaper 之类的库在您的应用程序中显示 pdf 文件。在这种情况下，您可以插入任何控件来关闭此 pdf，或者您可以使用 HistoryManager 处理页面上的后退按钮。

# iphone - 使用 Objective-c 从 Microsoft Exchange Server 读取邮件和文件夹列表

> ID：13696573
> 
> 赞同：4
> 
> 时间：2012-12-04T05:21:41.667
> 
> 标签：iphone, objective-c, exchange-server

我是 ios 设备应用程序编程的新手，我想以编程方式从 Microsoft Exchange 服务器读取文件夹列表和邮件。

任何人都可以请指导我正确的方向..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T14:20:37.923

您可以将 EWS、EAS 或 OWA 用于 Exchange 服务。

1）如果您想使用 OWA 服务，请检查以下链接，您将获得 OWA 交换的包装类。

[https://github.com/jgallen23/OWAParser](https://github.com/jgallen23/OWAParser)

2)EWS

对于 Ews，我使用 sudzc 将 Services.wsdl（描述客户端和服务器之间的合同）转换为 objetiveC，并在 Sudzc 生成的代码中进行了更改。

也检查下面的链接

**// 请求阅读邮件**

[http://msdn.microsoft.com/en-us/library/exchange/aa566107(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa566107(v=exchg.140).aspx)

**// 请求获取文件夹列表**

/ [http://msdn.microsoft.com/en-us/library/exchange/aa564829(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa564829(v=exchg.140).aspx)

3)EAS

希望以下lnik对EAS交流发展有所帮助。 [http://blogs.msdn.com/b/webdav_101/archive/2011/09/28/new-to-exchange-activesync-development.aspx](http://blogs.msdn.com/b/webdav_101/archive/2011/09/28/new-to-exchange-activesync-development.aspx)

# css - css 转换阻止窗口滚动

> ID：13696574
> 
> 赞同：0
> 
> 时间：2012-12-04T05:21:47.377
> 
> 标签：css, css-transitions

在 Firefox 中，我得到了延迟，这使得滚动窗口（在 mac 上使用触控板）几乎不可能顺利完成。

[http://wishd.me/](http://wishd.me/)

不知道我做错了什么，如果有的话，或者这只是在悬停时进行转换的意外副作用。

```
.list > li > div {
  border: 1px solid #09c;
  border-radius: 5px;
  margin-bottom: 20px;
  padding: 10px 20px;
  border-bottom: 7px solid #39c;
  position: relative;
  background: #ffffff;
  /* Old browsers */

  background: -moz-linear-gradient(top, #ffffff 0%, #fcfcfc 66%, #fbfbfb 80%, #fafafa 100%);
  /* FF3.6+ */

  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffffff), color-stop(66%, #fcfcfc), color-stop(80%, #fbfbfb), color-stop(100%, #fafafa));
  /* Chrome,Safari4+ */

  background: -webkit-linear-gradient(top, #ffffff 0%, #fcfcfc 66%, #fbfbfb 80%, #fafafa 100%);
  /* Chrome10+,Safari5.1+ */

  background: -o-linear-gradient(top, #ffffff 0%, #fcfcfc 66%, #fbfbfb 80%, #fafafa 100%);
  /* Opera 11.10+ */

  background: -ms-linear-gradient(top, #ffffff 0%, #fcfcfc 66%, #fbfbfb 80%, #fafafa 100%);
  /* IE10+ */

  background: linear-gradient(to bottom, #ffffff 0%, #fcfcfc 66%, #fbfbfb 80%, #fafafa 100%);
  /* W3C */

  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#fafafa', GradientType=0);
  /* IE6-9 */

  /*box-shadow: 1px 5px 15px #f0f0f0; */

  box-shadow: 1px 1px 2px #fff inset, 1px 5px 15px #f0f0f0;
  -webkit-transition: all 0.15s ease-in-out;
  -moz-transition: all 0.15s ease-in-out;
  -o-transition: all 0.15s ease-in-out;
  -ms-transition: all 0.15s ease-in-out;
  transition: all 0.15s ease-in-out;
  margin: 0 10px 20px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.list > li:hover > div {
  box-shadow: 1px 1px 2px #fff inset, 0px 5px 20px #ddd;
  background: #fff;
  -webkit-transition: all 0.15s ease-in-out;
  -moz-transition: all 0.15s ease-in-out;
  -o-transition: all 0.15s ease-in-out;
  -ms-transition: all 0.15s ease-in-out;
  transition: all 0.15s ease-in-out;
  margin-top: -1px;
  margin-bottom: 21px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:46:27.427

我无法对您的问题进行全面测试，但是...

过渡样式不需要复制到该`:hover`部分。只有原始部分就足够了。它可能是罪魁祸首。

由于渲染速度可能是问题的主要来源，您也可以尝试添加一个`transition-delay`，以便滚动不会激活下面的所有可悬停元素。

# php - 使用 mysqli bind_param() 时出错

> ID：13696575
> 
> 赞同：0
> 
> 时间：2012-12-04T05:22:00.203
> 
> 标签：php, mysql, mysqli

我正在尝试在我的 PHP 项目中的数据库中的 29 个字段中进行搜索。我正在使用 mysqli 连接到我的数据库。当我不尝试使用 bind_param() 时，我的查询工作正常，但当我使用错误时失败：

```
PHP Warning:  mysqli_stmt::bind_param() [<a href='mysqli-stmt.bind-param'>mysqli-stmt.bind-param</a>]: Number of variables doesn't match number of parameters in prepared statement in /search.php on line 6 
```

我的代码如下：

```
<?php 
$find = $_POST['find'];
if (strcasecmp($_POST['in'], 'users') == 0) {

$query = $db->prepare("SELECT u.id, u.group_id, u.username, u.email, m.credits, m.first_name, m.last_name, m.address1, m.address2, m.city, m.state, m.country, m.zipcode, m.about, m.account_status, m.vacation_status FROM kf_users u JOIN kf_usermeta m ON u.id = m.id WHERE u.id LIKE  '%?%' OR u.group_id LIKE  '%?%' OR u.ip_address LIKE  '%?%' OR u.username  LIKE  '%?%' OR u.password LIKE  '%?%' OR u.salt LIKE  '%?%' OR u.email LIKE  '%?%' OR u.activation_code LIKE  '%?%' OR u.forgotten_password_code LIKE  '%?%' OR u.remember_code LIKE  '%?%' OR u.created_on LIKE  '%?%' OR u.last_login LIKE '%?%' OR u.active LIKE  '%?%' OR u.FUID LIKE  '%?%' OR m.id LIKE  '%?%' OR m.credits LIKE  '%?%' OR m.rating LIKE  '%?%' OR m.user_id LIKE  '%?%' OR m.first_name LIKE  '%?%' OR m.last_name LIKE  '%?%' OR m.address1 LIKE  '%?%' OR m.address2 LIKE  '%?%' OR m.city LIKE  '%?%' OR m.state LIKE  '%?%' OR m.country LIKE  '%?%' OR m.zipcode LIKE  '%?%' OR m.about LIKE  '%?%' OR m.account_status LIKE  '%?%' OR m.vacation_status LIKE '%?%'");
$query->bind_param('sssssssssssssssssssssssssssss',$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find,$find);
$query->execute();
$query->bind_result($id, $group, $username, $email, $credits, $first_name, $last_name, $address1, $address2, $city, $state, $country, $zipcode, $about, $account_status, $vacation_status);

while ($query->fetch()) {
    $result['id'] = $id;
    $result['group'] = $group;
    $result['username'] = $username;
    $result['email'] = $email;
    $result['credits'] = $credits;
    $result['first_name'] = $first_name;
    $result['last_name'] = $last_name;
    $result['address1'] = $address1;
    $result['address2'] = $address2;
    $result['city'] = $city;
    $result['state'] = $state;
    $result['country'] = $country;
    $result['zipcode'] = $zipcode;
    $result['about'] = $about;
    $result['account_status'] = $account_status;
    $result['vacation_status'] = $vacation_status; 
    $output[] = $result;
}

$query->close();

}
?> 
```

同样，如果我注释掉我的 bind_param() 行，并将`?`查询中的 有人对这里可能出现的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:31:29.283

您有 29`?`是您的查询，列表`s`中有 29 个数据类型条目`bind_param`，以及要绑定的 29个`$find`变量，但是，当您将`?`占位符封装在引号中时 - 它们不再是占位符，它们只是字符串。因此，MySQL 看到要绑定的参数*为零*，而您正在尝试绑定 29。

要使用准备好的语句做一个简单的`LIKE`子句，您可以执行以下操作：

```
$query = $db->prepare("SELECT * FROM some_table WHERE field LIKE ?");
$query->bind_param('s',$find); 
```

在您的情况下，您想要匹配`%$find%`. 你可以这样做：

```
$query = $db->prepare("SELECT * FROM some_table WHERE field LIKE ?");
$query->bind_param('s', '%'.$find.'%'); 
```

或者更复杂的是，您可以`CONCAT()`在每个参数上使用：

```
$query = $db->prepare("SELECT * FROM some_table WHERE field LIKE CONCAT('%', ?, '%')");
$query->bind_param('s',$find); 
```

使用现有代码和第一种方法复制+粘贴*`('%'.$find.'%')`*：

```
$query = $db->prepare("SELECT u.id, u.group_id, u.username, u.email, m.credits, m.first_name, m.last_name, m.address1, m.address2, m.city, m.state, m.country, m.zipcode, m.about, m.account_status, m.vacation_status FROM kf_users u JOIN kf_usermeta m ON u.id = m.id WHERE u.id LIKE ? OR u.group_id LIKE ? OR u.ip_address LIKE ? OR u.username  LIKE ? OR u.password LIKE ? OR u.salt LIKE ? OR u.email LIKE ? OR u.activation_code LIKE ? OR u.forgotten_password_code LIKE ? OR u.remember_code LIKE ? OR u.created_on LIKE ? OR u.last_login LIKE ? OR u.active LIKE ? OR u.FUID LIKE ? OR m.id LIKE ? OR m.credits LIKE ? OR m.rating LIKE ? OR m.user_id LIKE ? OR m.first_name LIKE ? OR m.last_name LIKE ? OR m.address1 LIKE ? OR m.address2 LIKE ? OR m.city LIKE ? OR m.state LIKE ? OR m.country LIKE ? OR m.zipcode LIKE ? OR m.about LIKE ? OR m.account_status LIKE ? OR m.vacation_status LIKE ?");
$query->bind_param('sssssssssssssssssssssssssssss','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%','%'.$find.'%'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T05:31:49.647

绑定参数与字符串插值不同；你不能只用 替换你的变量`?`，也不应该引用它们。占位符用于整个值。

相反，您应该像这样准备查询

```
$query = $db->prepare('SELECT ... WHERE u.id LIKE ? OR u.group_id LIKE ? ... '); 
```

然后将您的值包装在通配符中

```
$find = '%' . $find . '%'; 
```

## 更新

我强烈建议使用 PDO 而不是 MySQLi。有了它，您可以使用命名占位符，例如

```
$stmt = $pdo->prepare('SELECT ... WHERE u.id LIKE :term OR u.group_id LIKE :term ... ');
$find = '%' . $find . '%';
$stmt->bindParam('term', $find);
$stmt->execute(); 
```

这样，您可以在整个查询中重复使用相同的占位符

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-24T21:57:03.507

如果这不起作用，那么您可能正在使用 mariadb 而不是 mysql。这个问题是两者之间的细微差别。

我对我的代码所做的就是改变它：

```
$search_text=$db->real_escape_string($search_text);
$stmt=$db->prepare("SELECT * FROM rentals WHERE search_text LIKE '%{$search_text}%'");
//TODO Put the bind_param back when it works someday; plus take out the escape.
//$stmt=$db->prepare("SELECT * FROM rentals WHERE search_text LIKE ?");
//$stmt->bind_param('s', '%'.$search_text.'%');
$stmt->execute(); 
```

粗略，但暂时是一个可行的解决方案。

# drupal - Drupal 7 - 如何在另一个区域内添加一个区域？

> ID：13696581
> 
> 赞同：1
> 
> 时间：2012-12-04T05:22:27.207
> 
> 标签：drupal, drupal-7

我很惊讶我在网上找不到这个答案。

我目前正在为我的 drupal 站点创建一个自定义标头，因此我在 .info 和一个 region--custom-header.tpl.php 文件中创建了一个 custom_header 区域。在区域内，我需要添加另一个区域。

我尝试使用 - 打印标题区域内的其他区域`<?php print render($page['regionname']); ?>`，但没有显示任何内容。

好习惯与否，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:14:09.787

`$page`在 region.tpl.php 文件中不可用（例如，在 node.tpl.php 中，它可用，但仅作为完整页面状态的标志，而不是包含区域信息的数组）。

要访问 region.tpl.php 中的任何区域，您应该通过预处理函数创建新变量。

添加到您的 template.php 文件：

```
function youtheme_preprocess_region(&$variables) {
  $variables['regionname'] = block_get_blocks_by_region('regionname');
} 
```

然后你可以像这样从这个区域输出内容：

```
echo render($regionname); 
```

# c# - 如何为泛型类编写约束

> ID：13696590
> 
> 赞同：0
> 
> 时间：2012-12-04T05:22:58.910
> 
> 标签：c#, generics

有一个像这样的泛型类**XXValue**，其中Type T可以是值类型或引用类型，例如int、string、struct object

```
public class XXValue<T>
{
   public T DefaultValue;
} 
```

还有另一个泛型类**XXAttribute**

```
public class XXAttribute<T>
{
   public T Value;
} 
```

但是 XXAttribute 的类型 T应该是**XXValue**类型的类或子类，那么**XXAttribute的***where*语句 怎么写**呢**？哪一个是正确的？

```
public class XXAttribute<T> where T : XXValue<T>

public class XXAttribute<VT, AT> where AT : XXValue<VT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:26:57.903

> 但是 XXAttribute 的类型 T 应该是 XXValue 类型的类或子类

鉴于此声明，它应该是第二个。

```
public class XXAttribute<TBase, T> where T : XXValue<TBase>
{
    public T Value;
} 
```

这指定了类型参数`XXAttribute`应该继承自`XXValue`. 但是由于`XXValue`它也是泛型类型，因此您还需要在as中指定*其*类型参数，并将其传递。`XXAtribute``TBase`

* * *

或者（鉴于问题的范围很难说，但你可以）改变`Value`定义方式：

```
public class XXAttribute<TBase>
{
    public XXValue<TBase> Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:31:07.310

第二个是正确的，否则编译器会混淆 T 的值，一方面是 T ，另一方面是`XXValue<T>`T `int`。

```
public class XXAttribute<V, T> where T : XXValue<V>
{
    public T Value;
} 
```

用法：

```
XXAttribute<int, XXValue<int>> attr = new XXAttribute<int, XXValue<int>>(); 
```

# php - 如何使用 avconv 将图像转换为视频

> ID：13696596
> 
> 赞同：-2
> 
> 时间：2012-12-04T05:23:33.747
> 
> 标签：php, ubuntu, libavcodec, avcodec

我想从我使用以下代码的图像创建视频

```
shell_exec("avconv -f image2 -r 50 testimage.jpg output.mpg"); 
```

但是当我尝试播放输出视频时，它显示**流不包含数据**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:42:48.757

avconv[手册](https://libav.org/documentation/avconv.html#Video-and-Audio-file-format-conversion)说

> 从许多图像创建视频：
> 
> **avconv -f image2 -i foo-%03d.jpeg -r 12 -s WxH foo.avi**
> 
> 语法 foo-%03d.jpeg 指定使用由用零填充的三位数字组成的十进制数来表示序列号。

`-s WxH`您的代码中缺少该行中的一个。也许这就是原因。 `-s WxH`用于指定视频的大小，W - 宽度和 H - 高度。这是[支持的格式列表](https://libav.org/documentation/avconv.html#Video-Options)

在增加播放时间时，手册再次说

> **`-t duration (output)`**
> 
> 在其持续时间达到持续时间后停止写入输出。持续时间可以是以秒为单位的数字，也可以是`hh:mm:ss[.xxx]`形式。

# .net - 从源列表创建新的随机列表

> ID：13696600
> 
> 赞同：0
> 
> 时间：2012-12-04T05:23:58.660
> 
> 标签：.net, vb.net, algorithm, list, random

我正在使用 VB.net 2012 并希望在代码中执行以下操作：

我有一个长度为 x 的媒体项目列表。
列表中的每个项目的持续时间为 y。
我想创建一个总持续时间为 z 的新随机列表，并且这些项目只能在这个新列表中出现一次。

做这个的最好方式是什么？我不确定这是否属于“背包问题”。无论哪种方式，我都可以使用伪代码或实际的 vb.net 代码来帮助实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:55:44.073

我可能会误解你，但似乎你有`l`一对列表，`(item,x)`你想找到一个子集`l`（让它成为`l'`）这样`sum(l'.e.item) == z`。

不幸的是 - 您正在描述[**子集和问题**](http://en.wikipedia.org/wiki/Subset_sum_problem)，它是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)，因此**没有已知的多项式解决方案**。

如果列表很小，您可以使用蛮力（检查所有可能性）。如果数字都是整数， 还有一个[DP 解在伪多项式时间内运行。](http://en.wikipedia.org/wiki/Subset_sum_problem#Pseudo-polynomial_time_dynamic_programming_solution)
一些替代方法是近似算法或启发式算法 - 例如[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:30:09.543

伪代码：

```
1\. Object Song: properties Name, Duration
2\. mlstLibrary = List(Of Song) ... fill mlstLibrary
3\. user enters desired playlist duration intPlaylistDuration    
4\. make a copy of mlstLibrary called mlstLibraryWorking
5\. Dim intPlaylistDurationWorking As Integer = 0
6\. Dim lstPlaylist As New List(Of Song) ' This is the output playlist
7\. Do While mlstLibraryWorking.Count > 0
7a.  Go through mlstLibraryWorking and remove all items that have .Duration > (intPlaylistDuration - intPlaylistDurationWorking)
7b1\.  Pick random Song from mlstLibraryWorking 
7b2\.  Add selected Song to mlstPlaylist
7b3\.  intPlaylistDurationWorking += selected Song.Duration
7b4\.  Remove selected Song from mlstLibraryWorking  
8\. Loop 
```

# c++ - 钳制无符号整数

> ID：13696607
> 
> 赞同：4
> 
> 时间：2012-12-04T05:24:53.353
> 
> 标签：c++, unsigned

钳制无符号整数的正确方法是什么？

例如，假设我有：

```
 unsigned int ui = 5U; 
```

现在我想从中减去一个值：

```
ui = Clamp(ui - MAGIC_VALUE, 0, 255); 
```

如果 MAGIC_VALUE >= 5，我希望 ui 包含 0。

但是，我不能只减去 MAGIC_VALUE，因为如果 MAGIC_VALUE > 5，表达式`ui - MAGIC_VALUE`将环绕`UINT_MAX`并最终被限制在上限 255。这与我想要的相反！

有什么技巧可以解决这个问题吗？

# mysql - 多列交叉表 AKA 枢轴

> ID：13696613
> 
> 赞同：2
> 
> 时间：2012-12-04T05:25:33.680
> 
> 标签：mysql, sql, pivot

我已经学习和练习 sql 大约 6 个月了。我已经准备好投入，只是承认我对此很愚蠢，我的大脑无法理解它的大部分模式。我正在尝试创建一个数据透视表。关于这个主题的简单文献并不多，我发现的一个来源谈到了创建多维数据集和基本的实体-属性-值 (EAV) 逻辑。不管那是什么意思。

```
name        action  pagecount
-------------------------------
Company A   PRINT    3
Company A   PRINT    2
Company A   PRINT    3
Company B   EMAIL    6
Company B   PRINT    2
Company B   PRINT    2
Company B   PRINT    1
Company A   PRINT    3 
```

我想用列`name`的总数和列`action`的总数交叉表（这是正确的术语吗？）列`pagecount`

```
 name        action_PRINT   action_EMAIL       pagecount_PRINT      pagecount_EMAIL
--------------------------------------------------------------------------------
Company A   4                0                 11                       0
Company B   3                1                 5                        6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:23:32.837

这种类型的操作称为 a`PIVOT`但 MySQL 没有数据透视函数，因此您需要使用聚合函数和`CASE`语句来复制它。

您可以使用以下内容来生成结果：

```
select name,
  sum(case when action = 'PRINT' then 1 else 0 end) action_print,
  sum(case when action = 'EMAIL' then 1 else 0 end) action_email,
  sum(case when action = 'PRINT' then pagecount else 0 end) pagecount_print,
  sum(case when action = 'EMAIL' then pagecount else 0 end) pagecount_email
from yourtable
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/3c5e8/3)

结果将是：

```
|      NAME | ACTION_PRINT | ACTION_EMAIL | PAGECOUNT_PRINT | PAGECOUNT_EMAIL |
-------------------------------------------------------------------------------
| Company A |            4 |            0 |              11 |               0 |
| Company B |            3 |            1 |               5 |               6 | 
```

# jquery - 托管后过多的 ajax 调用会影响我的网站吗

> ID：13696619
> 
> 赞同：0
> 
> 时间：2012-12-04T05:26:07.743
> 
> 标签：jquery, web-hosting

我创建了一个聊天网站，它有许多 ajax(jquery) 调用，当我将它上传到一个免费的虚拟主机站点 (000webhosting.com) 上时，它会产生问题，与 localhost n 相比它太慢了，而且有时可能需要刷新它两次或三次以加载特定页面。

我想知道这是因为多个 ajax 调用还是互联网速度问题，或者它发生在免费网络托管 (000webhosting.com) 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:32:14.387

Internet 托管站点总是比`localhost`因为流量实际上必须通过 Internet 慢。这在亚马逊的云中和廉价主机一样都是如此。

当然，一旦你解决了基本的延迟问题，你可能还会看到不同主机之间的性能差异，但我认为你的基本问题是网络延迟，可能还有带宽。

# android - Google Maps Android API v2 授权失败

> ID：13696620
> 
> 赞同：99
> 
> 时间：2012-12-04T05:26:09.510
> 
> 标签：android, google-maps, android-maps, google-maps-android-api-2

我的步骤：

*   从 debug.keystore 获得 SHA1 代码
*   在 google apis 控制台中创建应用程序
*   启用谷歌地图 api v2
*   输入 SHA1;my.package.name
*   获取 API 密钥
*   创建 AndroidManifest 文件：

    ```
     <permission
                android:name="my.package.name.permission.MAPS_RECEIVE"
                android:protectionLevel="signature"/>

        <uses-permission android:name="my.package.name.permission.MAPS_RECEIVE"/>

        <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/>

        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

        <uses-feature android:glEsVersion="0x00020000" android:required="true"/>

        <application android:label="@string/app_name" android:icon="@drawable/ic_launcher" android:hardwareAccelerated="true">

            <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="MY_API_KEY_HERE" />

            <activity android:name="MyActivity"
                      android:label="@string/app_name">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN"/>
                    <category android:name="android.intent.category.LAUNCHER"/>
                </intent-filter>
            </activity>
        </application>
    </manifest> 
    ```

*   创建的布局

*   将“google-play-services.jar”放入库

编译后我崩溃了：

```
 ERROR/AndroidRuntime(10182): FATAL EXCEPTION: main
                java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
                at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
                at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
                at android.app.Activity.onCreateView(Activity.java:4716)
                at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
                at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
                at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
                at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
                at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
                at android.app.Activity.setContentView(Activity.java:1881)
                at com.example.gm2.MyActivity.onCreate(MyActivity.java:16)
                at android.app.Activity.performCreate(Activity.java:5104)
                at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
                at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
                at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
                at android.app.ActivityThread.access$600(ActivityThread.java:141)
                at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
                at android.os.Handler.dispatchMessage(Handler.java:99)
                at android.os.Looper.loop(Looper.java:137)
                at android.app.ActivityThread.main(ActivityThread.java:5039)
                at java.lang.reflect.Method.invokeNative(Native Method)
                at java.lang.reflect.Method.invoke(Method.java:511)
                at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
                at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
                at dalvik.system.NativeStart.main(Native Method) 
```

之后，我将布局更改为：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/map"
             android:layout_width="match_parent"
             android:layout_height="match_parent" /> 
```

并将 MyActivity 更改为

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    FragmentManager manager = getFragmentManager();
    FragmentTransaction transaction = manager.beginTransaction();

    transaction.add(R.id.map, MapFragment.newInstance());           
    transaction.commit(); 
```

结果，应用程序启动了，但我没有看到地图。

控制台日志：

```
ERROR/Google Maps Android API(10369): Authorization failure. 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-05T09:09:46.617

**步骤**：

*   确保设备有 Google Play services APK
*   安装 Google Play 服务版本。超过 2 个

![在此处输入图像描述](../Images/7bef310202a87b361a6a6b73afb3efbf.png)

*   在[https://code.google.com/apis/console/创建项目](https://code.google.com/apis/console/)
*   启用“Google Maps Android API v2” ![在此处输入图像描述](../Images/dd5ac52bb509e4241d27633c3c5a11d0.png)
*   在 API 控制台注册项目中的 SHA1（**现在，您需要 WRITE SHA1;your.app.package.name**）并获取 API KEY
*   将目录 ANDROID_SDK_DIR/extras/google/google_play_services/libproject/google-play-services_lib 复制到项目的根目录
*   将下一行添加到 YOUR_PROJECT/project.properties

`android.library.reference.1=google-play-services_lib`

*   将下一行添加到`YOUR_PROJECT/proguard-project.txt`

.

```
-keep class * extends java.util.ListResourceBundle {

   protected Object[][] getContents();

} 
```

现在您已准备好使用适用于 Android 的 Google Map APIs V2 创建您自己的 Google Map 应用程序。

如果您使用 min SDK = 8 创建应用程序，请使用 android 支持库 v4 + SupportMapFragment 而不是 MapFragment。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-09-30T07:24:14.807

另请查看此帖子：[Google Map Android Api V2 Sample Code not working](https://stackoverflow.com/questions/14216205/google-map-android-api-v2-sample-code-not-working)，如果您完全确定您做了正确的步骤，然后按照第二个答案，身份验证被缓存在某处，尝试手动卸载应用程序（就像您使用正常应用程序）然后再次“运行”该项目

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-22T10:05:47.763

由于我只是浪费了很多时间让 API 正常工作，因此我将尝试对 Map API v2 进行逐步验证：

**第 1 步：申请您的 API 密钥**

如果您不熟悉 Google API 控制台，请阅读上面 Rusfearuth 的非常好的答案。

**第 2 步：检查您的 SHA 哈希**（在这种情况下，我使用 eclipse 的调试密钥）：

在 Windows 机器上，通过命令提示符进入您的用户目录：

```
C:\Users\you>keytool -list -alias androiddebugkey -keystore .android\debug.keyst
ore -storepass android -keypass android 
```

你会得到类似的东西：

```
androiddebugkey, 15.10.2012, PrivateKeyEntry,
Zertifikat-Fingerprint (SHA1): 66:XX:47:XX:1E:XX:FE:XX:DE:XX:EF:XX:98:XX:83:XX:9A:XX:23:A6 
```

然后查看您的地图活动的包名，例如 com.example.mypackagename

您将其结合起来并与您在 Google API 控制台中的设置进行检查：

```
66:XX:47:XX:1E:XX:FE:XX:DE:XX:EF:XX:98:XX:83:XX:9A:XX:23:A6;com.example.mypackagename 
```

你在哪里得到你的 API 密钥：

```
AZzaSyDhkhNotUseFullKey49ylKD2bw1HM 
```

**步骤 3\. 清单元数据**

检查元数据是否存在并包含正确的键。如果你发布你的应用程序，你需要一个不同的密钥。

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AZzaSyDhkhNotUseFullKey49ylKD2bw1HM" />
    <meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

**步骤 4\. 清单功能：**

您需要此条目，因为地图 API 需要一些图形支持：

```
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" /> 
```

别担心，99.7% 的设备都支持这一点。

**第 5 步。清单库：**

添加谷歌库。

```
 <uses-library
        android:name="com.google.android.maps"
        android:required="false" /> // This is required if you want your app to start in the emulator. I set it to false also if map is not an essential part of the application. 
```

**步骤 6\. 清单权限：**

检查包名两次：com.example.yourpackage

```
<permission
    android:name="com.example.yourpackage.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.example.yourpackage.permission.MAPS_RECEIVE" /> 
```

添加以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" /> 
```

如果您只显示地图，则以下权限是可选的并且不是必需的。尽量不要使用它们。

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

**步骤 7\. 将地图片段包含到您的布局中：**

```
<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    class="com.google.android.gms.maps.SupportMapFragment"
    map:cameraTargetLat="47.621120"
    map:cameraTargetLng="-122.349594"
    map:cameraZoom="15" /> 
```

如果您发布到 2.x Android 版本，您需要在 Activity 中添加支持：

```
import android.support.v4.app.FragmentActivity; 
```

对于地图：工作条目包括

```
xmlns:map="http://schemas.android.com/apk/res-auto" 
```

在您的活动布局中（例如 LinearLayout）。

就我而言，每次更改布局中的某些内容时，我都必须清理项目。似乎是一个错误。

**第 8 步：使用 Eclipse - 项目 - 清理。**

享受！

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-12-04T06:15:40.363

您需要使用位于以下位置的库项目：ANDROID-SDK-DIRECTORY/extras/google/google_play_services/libproject

这将解决您的第一个问题。

我不确定你的第二个，但这可能是第一个的副作用。我仍在尝试让地图在我自己的应用程序中工作:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-10-17T15:37:22.923

今天我遇到了这个问题。我使用的是 Android Studio 2.1.3，windows 10。虽然调试它工作正常，但如果我更新到发布模式，它就不起作用。我清除了所有 proguard 条件，更新了，但这不是解决方案。

解决方案与项目结构有关。app\src\debug\res 和 app\src\release\res 之间的 google_maps_api.xml 文件不同。我做了从调试到发布文件夹的手动复制粘贴。

现在它起作用了。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-17T14:58:52.753

我遵循了上面提到的 Gunnar Bernstein 的大部分（如果不是全部）建议，但仍然没有用。但是，在我遵循他的建议和以下内容后，它开始起作用：

1.  我使用 Android Studio 的右键单击选项列表创建了一个新的 MapActivity：**New -> Google -> Google Maps Activity**

2.  然后我打开了自动生成的**google_maps_api.xml**文件，并使用指定的链接创建了一个新的 API KEY。我完成了所有步骤并将我的新密钥保存在我当前的项目下。然后我删除了旧注册的 API KEY，因为它不再需要了。

3.  在 Manifest 文件下，我用这个新 XML 文件创建的字符串快捷方式替换了旧的 API KEY 值： `android:value="@string/google_maps_key`"，而不是直接说明 KEY。

4.  最后，删除新的 MapActivity，但保留在该过程中创建的 xml 文件。

~~注意：通过以这种方式创建 API KEY，Credentials 下的 Restrictions 列现在显示为“Android 应用程序”。早些时候，当它不起作用时，该列会显示“Android 应用程序，1 个 API”或类似的内容。我不知道这是否有所作为。~~ **注意：不，这只是意味着我没有为此 API 密钥选择特定的 API（控制台 -> API 密钥 -> 密钥限制 -> API 限制）。**

注意：它看起来像 Manifest 文件下的元数据标记：

```
android:name="com.google.android.maps.v2.API_KEY 
```

已替换为：

```
android:name="com.google.android.geo.API_KEY" 
```

我想两者都可以使用，但最好从一开始就使用后者。

注意：在 build.gradle 文件中，**android -> defaultConfig -> applicationId**下的值必须与 Credentials 页面下的**Package name**文本匹配。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-07-26T06:51:05.983

只需将其添加到您的清单文件中：

```
**<uses-library android:name="com.google.android.maps" />** 
```

例如...

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".California"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

请更新您的谷歌播放服务库...转到窗口-> Android sdk 管理器->更新谷歌播放服务...安装它..删除旧的并保留这个。取自 ANDROID-SDK-DIRECTORY/extras/google/google_play_services/

谢谢..请投票

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-06-29T11:47:10.990

我通过检查manifest 和 app 中的**包名**`build.gradle`解决了这个错误。

**在清单中：**

我正在使用包名称：

```
com.app.triapp 
```

**在应用程序 build.gradle 中：**

```
 defaultConfig {

        applicationId "com.app.live"
    } 
```

更改为`com.app.triapp`in后`build.gradle`，解决了我的问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-21T23:44:05.773

我正在从谷歌地图的 V1 迁移到 V2。我在尝试通过 Eclipse 运行应用程序时遇到了这个失败。我的根本原因是使用我的发布证书密钥库而不是 Android 调试密钥库，这是通过 Eclipse 运行它时使用的。以下命令 (OSX/Linux) 将为您获取调试密钥库的 SHA1 密钥：

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

如果您使用的是 Windows 7，则可以使用以下命令：

```
keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android 
```

最好在尝试使用新密钥之前从您的设备上完全卸载您的应用程序，因为 Android 会缓存安全凭据。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-15T01:52:24.943

“java.lang.NoClassDefFoundError：com.google.android.gms.R$styleable”

A 也有此错误，您需要：文件 -> 导入 -> 现有 Android 代码进入工作区 -> 浏览 -> Android sdks -> extras -> google -> google_play_services -> lib_project -> google_play_services_lib 并确定。检查项目并完成。

该项目转到包资源管理器。现在转到您的项目（有错误）-> 属性-> Android 并在库中单击添加... google_play_services_lib 应该在那里！添加并重试:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-17T18:15:28.223

*   确保`SDK for Android`在 API 控制台中启用了地图。
*   此外，您可能需要添加您的包名称和 SHA-1 签名证书指纹，以限制您的密钥的使用以完全启用。

[![在此处输入图像描述](../Images/f4fde11223ae42e3c580ac66a3c01718.png)](https://i.stack.imgur.com/3sbLL.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-23T07:49:22.863

我有同样的问题，但事实证明这是因为我创建了两个不同的地图 API 密钥，它们具有相同的 SHA-1 指纹，包名称几乎相似`com.bla.bla`，另一个`com.bla.bla.something`。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-25T09:15:20.187

您的 ECLIPSE 可能更改了 SHA1 密钥，因此您必须在此处使用新的 SHA1 密钥重新生成您的 google 密钥： [https](https://console.developers.google.com/project/watchful-net-796/apiui/credential) ://console.developers.google.com/project/watchful-net-796/apiui/credential 之后，复制新密钥进入清单并重新加载这个谷歌页面，你的密钥将被更新，重建你的项目，它会工作。 *P/S：对于我的错误，我删除了 .android 文件夹，所以 eclipse regen SHA1。*

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-10-03T16:27:07.847

我遇到过同样的问题。经过大约两个小时的谷歌搜索、重试、多次重新生成 API 密钥等，我发现我在 Google API 控制台中启用了错误的服务。我启用了**Google Maps API v2 Service**，但对于 Android 应用程序，您必须使用**Google Maps Android API v2**。启用正确的服务后，一切都开始工作了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-07-03T08:43:59.307

我遇到了完全相同的问题，我只需要将 MapsApiV2 库项目的 SDK 设置为 Android 2.3.3（API lvl 10）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-05T20:12:45.940

我遇到了同样的问题。

如果您为应用程序的发布版本发布了 api。然后该 api 将仅适用于发布版本而不适用于调试版本。因此，请确保您在手机或模拟器中使用的是发行版。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-02T06:16:24.790

我遵循了 Google Doc 中提供的相同步骤，但我遇到了同样的错误。后来我意识到我正在使用我的 app.keystore 签署我的应用程序，而我用来生成 API 密钥的 SHA 密钥是调试密钥。

所以我只是`signingConfig signingConfig.generic`从`build.gradle`文件中删除了，我的地图开始正常工作。

希望这可以帮助某人。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-02T19:23:51.560

对我来说，一切都在模拟器和物理设备上工作。

但是，当我设置第二台机器以在具有较新 API 级别的模拟器中调试同一个应用程序时，它停止了对我的工作。

我没有意识到那台机器的**指纹**发生了变化。在设备日志中看到身份验证失败错误日志后，我将 Google Developer Console 中的指纹与错误消息中的指纹进行了仔细比较。那是我看到差异的时候。将新指纹添加到开发人员控制台（与包名称结合）后，我的应用程序开始在新系统上的模拟器中按预期工作。

因此，如果您设置了一个新系统，请再次检查您的指纹！

# android - 检查并避免应用程序中的内存泄漏

> ID：13696621
> 
> 赞同：13
> 
> 时间：2012-12-04T05:26:15.700
> 
> 标签：android, memory-leaks, android-context

所以，我完成了一个项目，现在我面临的主要问题是应用程序中的**内存泄漏***（“泄漏”意味着您保留对活动的引用，从而阻止 GC 收集它）*

我发现的一些发生内存泄漏的情况是：

## 上下文泄漏

它的发生是因为对活动上下文的长期引用。

[我在这里](https://stackoverflow.com/q/6567647/1626878)找到了一个很好的例子，

```
private static Drawable sBackground;

@Override
protected void onCreate(Bundle state) {
  super.onCreate(state);

  TextView label = new TextView(this);
  label.setText("Leaks are bad");

  if (sBackground == null) {
    sBackground = getDrawable(R.drawable.large_bitmap);
  }
  label.setBackgroundDrawable(sBackground);

  setContentView(label);
} 
```

这里的问题是`private static Drawable sBackground;`静态 Drawable 是使用 Activity 作为上下文创建的，所以在这种情况下，有一个对引用 Activity 的 Drawable 的静态引用，这就是为什么存在泄漏的原因。只要该引用存在，Activity 就会保存在内存中，并泄漏其所有视图。

## 屏幕方向更改

引起注意的第二种情况是屏幕方向发生变化时。默认情况下，当屏幕方向发生变化时，系统将销毁当前活动并创建一个新活动，同时保留其状态。这样做时，Android 将从资源中重新加载应用程序的 UI。现在想象一下，您编写了一个带有大位图的应用程序，您不想在每次旋转时都加载该位图。

这将导致大量内存泄漏，因为可能需要加载大的位图。

## 上下文活动

第三种情况，我发现是对活动上下文的引用。它还会导致内存泄漏。

我想知道是否有任何简单的方法可以避免发生这种内存泄漏。或者是否有工具可以检查并从应用程序中删除这些内存泄漏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-20T17:23:50.103

我知道这是一篇旧文章，但最近 Square 发布了一个名为[LeakCanary](https://github.com/square/leakcanary)的库，它是*迄今为止*寻找内存泄漏的最优雅的解决方案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T07:52:11.417

您可以使用 traceview 或内存分析器等工具来检查内存泄漏

[http://developer.android.com/tools/help/traceview.html](http://developer.android.com/tools/help/traceview.html)

[http://kohlerm.blogspot.com/2009/04/analyzing-memory-usage-off-your-android.html](http://kohlerm.blogspot.com/2009/04/analyzing-memory-usage-off-your-android.html)

这里有一些我觉得有帮助的文章

[http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)

[http://vahidmlj.blogspot.com/2012/10/android-memory-leak-on-screen-rotation.html](http://vahidmlj.blogspot.com/2012/10/android-memory-leak-on-screen-rotation.html)

# java - 有多少上下文类加载器有 EAR？

> ID：13696622
> 
> 赞同：0
> 
> 时间：2012-12-04T05:26:21.413
> 
> 标签：java, classloader, ear

我有一个 EAR 项目，我使用`getContextClassLoader.getResource`. 但是当我的 WAR 模块和 EJB (.jar) 模块具有相同名称（但内容不同）的资源时，我总是从 EJB 获取资源，而不是从 Web 模块获取资源（来自 EJB 的同名资源会覆盖来自 .WAR 的资源）。

这件事与*上下文类加载器*有关吗？

**UPD**：项目结构：

```
 -EAR
     -- WEBAPP.WAR
                  ---classes
                             ----my.properties

     -- EJB.JAR
                  ---classes
                            ---- my.properties 
```

在`webapp.war`和`ejb.jar`我有相同的文件（`my.properties`）。

但是当我使用

`Thread.currentThread().getContextClassLoader().getResourceAsStream("My.properties")`

从`webapp.war`我总是`My.properties`从`EJB.JAR`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:42:12.120

您必须将耳朵的类路径或依赖项更改为**WEBAPP.WAR**，然后是**EJB.JAR**。

就像您使用上下文类加载器时一样，它使用 EAR 的 ClassLoader 并尝试`My.properties`使用其 Classpath 查找资源并首先在 EJB.jar 中找到依赖项，因此使用其文件。

因此，您必须将顺序更改为 WEBAPP.war，然后更改为 EJB.jar

# android - Android项目中的通信链接错误

> ID：13696624
> 
> 赞同：0
> 
> 时间：2012-12-04T05:26:36.887
> 
> 标签：android, mysql, jdbc

我看过很多关于这个问题的帖子，它们涉及数据库权限或防火墙设置，但我似乎遇到了不同的问题。

我收到错误消息“com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障。成功发送到服务器的最后一个数据包是 0 毫秒前。驱动程序没有收到来自服务器的任何数据包。” 尝试从 Android 应用程序打开到远程数据库的 jdbc 连接时。

我知道这不是权限、防火墙或数据库可用性的问题，因为我能够使用完全相同的 java 类来连接不同的应用程序并进行更改，并且此功能在之前的代码迭代中运行良好，但是现在正在引起问题。它的调用方式相同，唯一的区别是在一个项目中它是一个 Android 应用程序，而在另一个项目中它是一个常规 Java 应用程序。如果有人对可能出现的问题有任何想法，请告诉我。我正在使用的类如下：

```
public class DatabaseHandler{

private static String address;
private String username;
private String password;
private static Connection con;

public DatabaseHandler(String url, String un, String pw){
    address = "jdbc:mysql://[remote server IP]:3306/nfcgeo";
    username = un;
    password = pw;
}

public void openDB() throws Exception{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        con = DriverManager.getConnection(address, username, password);
} 
```

在 android 应用程序的 MainMenu 类中：

```
 public void onCreate(Bundle savedInstanceState)
{
    setupDatabaseConnection(context);
    if(!dbAvailable)
    {
        noDatabaseConnection(context);       

    }

public static void setupDatabaseConnection(Context _context)
{
    try
    {
    dbHandle = new DatabaseHandler("","root","rootpw");
    dbHandle.openDB();
    dbAvailable = true;
    }
    catch(Exception e)
    {
        dbAvailable = false;
        e.printStackTrace();
    }
} 
```

同样，如果在 android 应用程序之外使用 DatabaseHandler 类，它可以完美地工作，我只有在从主菜单调用它时才会得到异常。如果有人有任何想法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:19:13.760

发生这种情况是因为服务器没有分配给名为 u 的用户在此处作为用户名提供的权限

所以你需要在你的数据库上运行命令

1.  将 *.* 上的所有权限授予由 somepassword username 标识的用户名 - 您将使用它连接到数据库密码 - 您将使用它连接到 dB。所以连接字符串现在将是 jdbc:mysql://ip:3306/dbname,username,password
2.  刷新权限（检查拼写）
3.  如果仍然不起作用，请将 bind-address:your ip 替换为 bind-address:0.0.0.0。该文件将位于 mysql 安装目录中。

# php - 存储获取和存储IP地址

> ID：13696628
> 
> 赞同：0
> 
> 时间：2012-12-04T05:26:50.333
> 
> 标签：php, mysql, ip

我目前有一个存储已输入表单的查询的功能。我正在尝试保存提交表单的用户的 IP 地址以及输入。

目前这是功能：

```
 function userIP(){
    $ip = $_SERVER['REMOTE_ADDR'];     
    if($ip){
        if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
            $ip = $_SERVER['HTTP_CLIENT_IP'];
        } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
            $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];

        $ipis = ip2long($ip);
        }
        return $ip;
    }
    return false;
}

 public function __construct( $data = array() ) {
     if( isset( $data['text'] ) ) $this->text = stripslashes( strip_tags( $data['text'] ) );
     if( isset( $data['ipis'] ) ) $this->ipis = stripslashes( strip_tags( $data['ipis'] ) );
 }

 public function storeFormValues( $params ) {
    $this->__construct( $params ); 
 }

     public function store() {
    $correct = false;
        try {
            $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
            $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            $sql = "INSERT INTO tbl(content, ip) VALUES(:text, :ipis)";

            $stmt = $con->prepare( $sql );
            $stmt->bindValue( "text", $this->text, PDO::PARAM_STR );
            $stmt->bindValue( "ipis", $this->ipis, PDO::PARAM_STR );
            $stmt->execute();
            return "Added";
        }catch( PDOException $e ) {
            return $e->getMessage();
        }
 } 
```

}

然而，它目前只存储输入的“文本”，只是将 NULL 添加到 IP 数据库中。IP 行的 MYSQL 设置为无符号 INT 11。有关解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:34:29.773

返回长值的函数中存在错误。您已将 return 语句置于 elseif 条件中。此外，您`$ip`将按原样返回实际值。

```
function userIP(){
$ip = $_SERVER['REMOTE_ADDR'];   
if($ip){
    if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    $ipis = ip2long($ip);
    return $ipis;
}
return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:32:18.560

使用字符串将IP存储在数据库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:04:52.293

另一种可能的选择：

```
function userIP(){
  $ip = $_SERVER['REMOTE_ADDR'];     
  if( !$ip )
    return false;
  if( !empty( $_SERVER['HTTP_CLIENT_IP'] ) )
    $ip = $_SERVER['HTTP_CLIENT_IP'];
  if( !empty( $_SERVER['HTTP_X_FORWARDED_FOR'] ) )
    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
  return sprintf( '%u' , ip2long( $ip ) );
} 
```

在阅读了[PHP 手册之后，`ip2long()`](http://php.net/manual/en/function.ip2long.php#refsect1-function.ip2long-notes)我发现了一些关于它如何在某些系统上处理大整数的有趣之处。

# java - 在 Hibernate 中将枚举列表传递给 namedQuery.setParameter() 后出现非法转换异常

> ID：13696630
> 
> 赞同：0
> 
> 时间：2012-12-04T05:26:58.157
> 
> 标签：java, hibernate, db2, named-query

我在 DB2 上使用 Hibernate。当我创建一个参数为枚举值列表的 NameQuery 时，getResultList() 会引发 Illegal converation 异常。

```
@NamedQuery(
        name="Deliverable.deliverableFiles",
        query="Select distinct f " +
                "from Deliverable d JOIN d.deliverableFiles f JOIN f.architectures a " +
                "where d.visibility in (:visibilities) and a.architecture in (:architectures) " +
                "and d.hidden = false and releaseType in (:releaseTypes) "
) 
```

Java方法：

```
public static List<DeliverableFile> getDeliverableFiles(EntityManager em, ArrayList<DeliverableVisibility> visibilities,
                                                 ArrayList<DeliverableArchitectureType> architectures,
                                                 ArrayList<DeliverableReleaseType> releaseTypes, int limit) {
    Query deliverableFiles = em.createNamedQuery("Deliverable.deliverableFiles");
    deliverableFiles.setFlushMode(FlushModeType.COMMIT);
    deliverableFiles.setParameter("visibilities", visibilities);
    deliverableFiles.setParameter("architectures", architectures);
    deliverableFiles.setParameter("releaseTypes", releaseTypes);

    List<DeliverableFile> files;

    try {
        files = deliverableFiles.getResultList();   // exceptions is thrown here
    } // end try
    catch (NoResultException nre) {
        files = null;
    } // end catch

    return files;
} // end getDeliveries() 
```

调用方法时出现异常：

```
 ERROR: [jcc][1083][10406][4.2.73] Illegal conversion: can not convert from "byte[]" to "java.lang.String" ERRORCODE=-4474, SQLSTATE=null
Exception in thread "main" javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: [jcc][1083][10406][4.2.73] Illegal conversion: can not convert from "byte[]" to "java.lang.String" ERRORCODE=-4474, SQLSTATE=null
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:266)
    at **hidden**.jpa.main.Deliverable.getDeliverableFiles(Deliverable.java:68)
    at **hidden**.dbtestbed.DBTestbed.main(DBTestbed.java:165)
Caused by: org.hibernate.exception.GenericJDBCException: [jcc][1083][10406][4.2.73] Illegal conversion: can not convert from "byte[]" to "java.lang.String" ERRORCODE=-4474, SQLSTATE=null
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy40.setBytes(Unknown Source)
    at org.hibernate.type.descriptor.sql.VarbinaryTypeDescriptor$1.doBind(VarbinaryTypeDescriptor.java:57)
    at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:92)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:305)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:300)
    at org.hibernate.param.NamedParameterSpecification.bind(NamedParameterSpecification.java:66)
    at org.hibernate.loader.hql.QueryLoader.bindParameterValues(QueryLoader.java:588)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1736)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1697)
    at org.hibernate.loader.Loader.doQuery(Loader.java:832)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
    at org.hibernate.loader.Loader.doList(Loader.java:2382)
    at org.hibernate.loader.Loader.doList(Loader.java:2368)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2198)
    at org.hibernate.loader.Loader.list(Loader.java:2193)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1244)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:257)
    ... 2 more
Caused by: com.ibm.db2.jcc.a.SqlException: [jcc][1083][10406][4.2.73] Illegal conversion: can not convert from "byte[]" to "java.lang.String" ERRORCODE=-4474, SQLSTATE=null
    at com.ibm.db2.jcc.a.cd.a(cd.java:650)
    at com.ibm.db2.jcc.a.cd.a(cd.java:60)
    at com.ibm.db2.jcc.a.cd.a(cd.java:94)
    at com.ibm.db2.jcc.a.gc.a(gc.java:677)
    at com.ibm.db2.jcc.a.vl.a(vl.java:1207)
    at com.ibm.db2.jcc.a.vl.setBytes(vl.java:1174)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setBytes(NewProxyPreparedStatement.java:235)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 24 more 
```

非常感谢任何提示或线索或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:00:31.893

发现了问题 - 这是 NamedQuery 中的一个简单错字。releaseType 属性没有被别名 d 限定。它应该是：d.releaseType in (:releaseTypes)。就将枚举对象作为 ArrayList 传递给 setParameter() 而言，其他一切都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:38:55.113

参数可见性、架构和 releaseTypes 属于 ArrayList。这不受 db2 支持。它们必须转换为正确的列格式。

```
String whereCondition1 = "'";
for(string tmp : visibilities){
    whereCondition1 = whereCondition1 + tmp + "','";
}
whereCondition1.subString(0,whereCondition1.length() -1); 
```

您应该将数组列表设置为这种格式

```
deliverableFiles.setParameter("visibilities", whereCondition1); 
```

# java - 在 NetBeans 中构建可执行 JAR 不起作用

> ID：13696632
> 
> 赞同：0
> 
> 时间：2012-12-04T05:27:21.303
> 
> 标签：java, netbeans, executable-jar

我在 StackOverflow 和互联网上的其他地方看到了很多对此类问题的引用，但其他人都满意的解决方案对我不起作用。

问题：我创建了 Java 项目并希望通过可执行的 .jar 文件运行它们。当我尝试为我的项目运行 .jar 文件时，我得到一个“找不到主类：类名。项目将退出。” 错误。

我读过
的解决方案： - 从项目属性“运行”选项卡中编辑“主类”并选择主类的位置。
- 编辑清单文件以包括： Main-Class: classname

这些都没有奏效。在项目属性中输入正确的类，并使用更新的清单文件，我仍然得到未找到主类错误，并且我已经没有关于如何解决此问题的想法。

任何帮助将不胜感激。

编辑：

这是我的实际清单文件的完整副本：

```
Manifest-Version: 1.0
Main-Class: TestCode
<invisible blank line here> 
```

我听说 .mf 文件中需要一个空行，所以我放了一个空行以防万一。

项目名称是 TestCode 它在 TestCode.java 下的“默认包”中

编辑2：

我解压了 .jar 文件并查看了它的内容 .jar 中的 manifest.mf 文件列出了包含 main 方法的 .class 文件的正确类路径。（这些项目中的大多数只有一个 .class 文件）但我仍然收到“找不到主类”错误。

主类显然在 .jar 文件中，清单正确指向它，它仍然不会运行程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:46:03.157

写

```
main -class: Packagename.Classname 
```

# iphone - 来自 url 的半图像显示

> ID：13696634
> 
> 赞同：0
> 
> 时间：2012-12-04T05:27:23.100
> 
> 标签：iphone, objective-c, ios, xcode, ipad

![在此处输入图像描述](../Images/f04590df42be09ee0e3b28ba8bf1c64a.png)

你好，

我从 url 异步加载图像，问题是图像只加载了一半我不明白为什么会发生这种情况，在网上搜索后我得到了两个三个原因，

**1它可能是由于服务器端问题而发生的。**

**2它可能是由于图像格式而发生的（但是对于格式（png和jpg）都发生了，所以这不是问题）。**

**3 这可能是因为图像尺寸太大（图像尺寸在 200kb 到 700kb 之间）**

它也发生在浏览器中，但有时。

如果您对此问题有任何解决方案或建议，请重播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:29:51.700

使用此代码..它可能对您有用

```
 NSString *htmlString = [NSString stringWithFormat:
                  @"<html>"
                  "<head>"
                  "<script type=\"text/javascript\" >"
                  "function display(img){"
                  "var imgOrigH = document.getElementById('image').offsetHeight;"
                  "var imgOrigW = document.getElementById('image').offsetWidth;"
                  "var bodyH = window.innerHeight;"
                  "var bodyW = window.innerWidth;"
                  "if((imgOrigW/imgOrigH) > (bodyW/bodyH))"
                  "{"
                  "document.getElementById('image').style.width = bodyW + 'px';"
                  "document.getElementById('image').style.top = (bodyH - document.getElementById('image').offsetHeight)/2  + 'px';"
                  "}"
                  "else"
                  "{"
                  "document.getElementById('image').style.height = bodyH + 'px';"
                  "document.getElementById('image').style.marginLeft = (bodyW - document.getElementById('image').offsetWidth)/2  + 'px';"
                  "}"
                  "}"
                  "</script>"
                  "</head>"
                  "<body style=\"margin:0;width:100%;height:100%;\" >"
                  "<img id=\"image\" src=\"%@\" onload=\"display()\" style=\"position:relative\" />"
                  "</body>"
                  "</html>",pass your url string here]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:58:43.647

我也遇到过这类问题，基本上是异步线程无法完全下载图像时网络错误。解决方案是检查下载的图像是否有效。如果无效则重新下载。以下是我用来检查图像是否有效的方法：

注意：此检查仅适用于 PNG 图像，要检查 JPEG，只需在“if”条件下替换第一个和最后两个字节。

```
- (BOOL)isImageValid:(NSData *)data
{
    BOOL val = YES;

    if ([data length] < 4) 
        val = NO;

    const unsigned char * bytes = (const unsigned char *)[data bytes];

    if (bytes[0] != 0x89 || bytes[1] != 0x50) 
        val = NO;
    if (bytes[[data length] - 2] != 0x60 || 
        bytes[[data length] - 1] != 0x82) 
        val = NO;

    return val; //return YES if valid 
} 
```

不要忘记接受答案。

# java - 在 Android 中使用 java 项目

> ID：13696635
> 
> 赞同：0
> 
> 时间：2012-12-04T05:27:29.213
> 
> 标签：java, android, mechanicalturk

我有一个执行 Mechanical Turk HIT 任务的 Java 项目，我想在 Android 应用程序中使用它。我试图在我的 android 应用程序中编写 MTurk 函数，但由于一些与 sdk jar 相关的错误，我无法让它工作。简而言之，我有一个 Android App Project 和一个 java Project。有什么办法可以在我的 android 项目中使用 java 项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:34:14.960

1.  您可以将您的 java 项目导出为 jar，并添加到我认为的其他项目中。（`project`->右键单击-> `export`-> `java`->`jar files`在eclipse中）。将此 jar 文件添加到 android 项目中的 lib 文件夹中。
2.  如果您的 java 项目没有其他依赖项，您可以将带有完整包的源代码复制到您的 android 项目中并引用它。它有时对我有用，有时却没有。我认为这是因为 java 项目使用了 android 中不存在的包。
3.  另一种方法，但我从未尝试过。右键单击您的 android 项目，选择`Build path`-> `Configure Build path`。在结果对话框中，选择`Projects`选项卡并单击`Add`。现在选择您要链接的项目并单击`OK`。

[这个](https://stackoverflow.com/questions/10828014/android-library-project-as-jar-file-for-distribution-like-google-analytics)问题可能不会给出直接的答案，但可能会有所帮助。

# ios - 在 ios 4.3 + iphone sdk 中的 textview 中自动滚动

> ID：13696637
> 
> 赞同：1
> 
> 时间：2012-12-04T05:27:30.930
> 
> 标签：ios, objective-c, textview, ios4

自动滚动发生在 ios 4.3 中，当 textViewShouldBeginEditing 方法调用时。我想停止这种自动滚动。目前滚动向上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:11:45.017

```
[txtview scrollRectToVisible:CGRectMake(0, txtview.contentSize.height-txtview.frame.size.height, txtview.frame.size.width, txtview.frame.size.height) animated:NO]; 
```

在 textview 中设置此框架开始编辑。并在 textview 中设置 textview txtview.contentSize.height-txtview.frame.size.height 的 y 位置
应更改字符。

有用..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-02T20:27:40.330

下面的代码更干净，效果更好：

```
[yourTextView scrollRangeToVisible:NSMakeRange(self.text.length, 0)]; 
```

在 Swift 2.2 中：

```
yourTextView.scrollRangeToVisible(NSRange(location: yourTextView.text.length, length: selectedRange.length)) 
```

# java - 布局设计中不显示日期选择器？

> ID：13696639
> 
> 赞同：2
> 
> 时间：2012-12-04T05:27:58.513
> 
> 标签：java, android, datepicker, task

![日期选择器不清楚它自己的设计](../Images/30a39d6aa2fe0d57948ee4418acb109e.png)

当我在布局设计中拖放日期选择器时，它会显示这样的错误消息，

> **找不到以下类：**

*   CalendarView（更改为 android.widget.CalendarView，修复构建路径，编辑 XML）

*   DatePicker（更改为 android.widget.DatePicker，修复构建路径，编辑 XML）

我必须做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:51:48.010

日期选择器只会弹出带有向上和向下箭头的月、日、年字段集。除非您创建自己的动态集和取消按钮，否则它不会真正起作用。一旦单击其中一个以调出键盘，就无法摆脱它。您可能希望使用完整的日期选择器小部件。

要正确使用日期选择器，请在您的 activity.java 中创建一个新选择器：

```
 new DatePickerDialog(MainActivity.this,
                d,
                dateAndTime.get(Calendar.YEAR),
                dateAndTime.get(Calendar.MONTH),
                dateAndTime.get(Calendar.DAY_OF_MONTH)).show(); 
```

从按钮触发。

如果您想尝试将其从小部件调色板中拉出会发生什么情况，请将 android 目标版本更改为 10 之类的东西，您可能会看到它。您遇到的错误可能只是由于您在 Eclipse 中的视图无法呈现它们，不一定是小部件本身。也试着看看你是否可以在手机上看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T06:33:56.767

只需运行代码，它将在设备上可见。您也可以通过更改 xml 目标在 XML 中看到它。

注意：您不需要在图形布局编辑器中仅设置项目目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:40:50.363

我认为在你的`LinearLayout`方向没有设置。为您的布局设置`orientation`为垂直。否则将您的 xml 代码

# c# - 为什么在我的表单的 OnLoad 中，当我设置背景图像时我的表单会闪烁？

> ID：13696641
> 
> 赞同：-4
> 
> 时间：2012-12-04T05:28:14.800
> 
> 标签：c#, winforms

为什么在我的表单的 OnLoad 中，当我设置背景图像时我的表单会闪烁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:43:00.750

这是因为它正在重新绘制。重绘首先清除背景，然后在其上绘制图像。这会导致闪烁。

您可以在表单上激活双缓冲来消除此问题：

```
this.DoubleBuffered = true; 
```

# c# - 在 EPSON PRINTERS 中打印

> ID：13696642
> 
> 赞同：1
> 
> 时间：2012-12-04T05:28:15.907
> 
> 标签：c#, .net, printing

我想以某种格式打印一个字符串，最后我想传递剪纸命令。搜索后我得到了这个代码

```
Convert.ToString((char)27) + "@" + Convert.ToString((char)29) + "V" + (char)1 
```

我将此添加到最后需要打印的字符串中。该命令切割纸张但不是在最后，在中间一些它切割的地方。如果我再次提供另一份副本，则表示前一份的部分将出现在此印刷品中。

请帮助克服这个问题.. 并建议将打印机命令传递给这些 EPSON 打印机的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:27:01.780

大多数收据打印机在与当前打印位置不同的位置裁切纸张。

有两种可能的方法。首先，您需要计算收据剪切位置和打印的最后一行之间的行数。

然后执行以下操作之一：

*   在切割收据之前，打印正确的行数 - 可以是空白的，或者更常见的是，可以是下一张收据的标题文本。

*   执行适当数量的换行；剪切收据，然后执行相同数量的反向换行。这假设打印机支持反向换行（大多数都支持），并且可能会增加卡纸的风险。

# java - 向 ProcessBuilder 提供提示以帮助命令行实用程序使用其他实用程序

> ID：13696644
> 
> 赞同：0
> 
> 时间：2012-12-04T05:28:17.217
> 
> 标签：java, macos, processbuilder

我`jhead`用来检查图像是否设置了方向标志，如果是，则旋转它并设置 exif 信息以指示它在查看时不需要旋转。在命令行上它看起来像：

```
jhead -autorot 'IMG_3680.JPG' 
```

我试图用`ProcessBuilder`我的java应用程序在我正在查看的图像上调用它，但它用于`jpegtran`执行实际的图像旋转。这两个应用程序都可以从命令行正常工作，并且位于`/opt/local/bin`我的 Mac 上。

我不断得到：

```
sh: jpegtran: command not found

Error : Problem executing specified command
in file '/images/IMG_3681.JPG' 
```

我的代码是：

```
public static void main(String[] args) throws Exception {

    File[] files = (new File("/images")).listFiles();
    for (File file : files){
      ProcessBuilder pb = new ProcessBuilder("jhead", "-autorot", file.getAbsolutePath());
      pb.redirectOutput(Redirect.INHERIT);
      pb.redirectError(Redirect.INHERIT);
      Process p = pb.start();
    }
} 
```

我是否需要提供提示`ProcessBuilder`才能`jhead`打电话`jpegtran`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:05:33.777

经过一番猜测，我确定`PATH`环境变量设置不正确。它有 `/usr/bin:/bin:/usr/sbin`其中明显不包括的`/opt/local/bin`。我像这样添加它：

```
Map<String, String> env = pb.environment();
env.put("PATH", env.get("PATH")+":/opt/local/bin/"); 
```

现在产生正确的结果。真正的解决方案是添加`/opt/local/bin/`到`PATH`环境变量中，而不是直接在代码中添加。

* * *

**更新：**经过再看，如果我从终端而不是 Eclipse 运行我的应用程序，这似乎不是问题。该`PATH`变量在终端中设置正确，但我必须将其添加到 Eclipse。要将其添加到 Eclipse：

1.  转到运行 -> 运行配置 -> 环境
2.  单击新建并为名称输入`PATH`和值输入`/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin/`
3.  单击应用。

如果您确实需要在 OS X 中设置它，那么似乎有几种方法（或者实际上是几个地方）。如果您需要它用于通过 Spotlight 启动的应用程序，请转到[此处](https://stackoverflow.com/a/588442/3340)。如果您需要为终端设置 if 而不是去[这里](https://stackoverflow.com/a/8264813/3340)。

# java - 二维和一维阵列

> ID：13696648
> 
> 赞同：0
> 
> 时间：2012-12-04T05:28:34.393
> 
> 标签：java, arrays, short

首先，这是代码：

```
public class Test{

   public static void main(String args[]){

    short[][] b = new short[4][4];
    short[][] big = new short[2][2];
    short b3 = 8;
    short b2 [][][][] = new short [2][3][2][2];

　　　// insert code here that will allow the code to compile

     }

} 
```

这是教科书上的问题，这里有两个错误的答案：

```
b2[0][1][1] = b; 
```

这里的解释是它试图分配一个二维数组，其中需要一个一维数组。有人可以解释一下吗？我根本看不到一维数组在代码中的位置。

```
b2[0][2][1] = b[1][0]; 
```

这个错误答案的解释是它试图在预期短数组的地方分配一个原始短。我对此感到困惑，因为我在这个答案中看不到原始的简短？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:36:41.910

在java中，多维数组实际上是一个数组数组。

你可以把它想象成每次你索引数组时（这意味着你把 [i] 放在它后面）你失去了一个维度。

```
b 
```

给出一个二维数组，

```
b[i] 
```

给你一个一维数组，和

```
b[i][j] 
```

给你一个`short`（这是一个原始的）

```
 b2[0][1][1] 
```

也应该给你一个一维数组，但你试图把一个二维数组放在那里，这就是问题所在。

现在对于第二个错误答案，`b[i][j]`给你一个原语。这就是你试图把一维数组放在哪里的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:23:30.660

这是b2数组的结构。

xxxxxxxxxxxxxxxxxx P[xx] xxx xxxxxxxxxxxx

xxxxxxxxxxxx xxxxxxxxxxxx xxxxxxxxxxxx

您试图在 b2[0][1][1] 的位置获取数组，这是一个具有两个元素的一维数组。但是，'b' 是二维数组。所以，它抛出了错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T05:36:49.060

查看它的简单方法是划掉数组标记。将初始类型想象为 `b[][][][]`，现在当你这样做时，`b[0][1][1]`你实际上是在“划掉”前三个 []，只剩`b[]`下一个短裤数组。您可以将其应用于其余部分，以了解它们为什么错了。

我用来教学生指针和数组效果很好的技巧。

# c++ - C++ 多掷骰子

> ID：13696649
> 
> 赞同：0
> 
> 时间：2012-12-04T05:28:52.960
> 
> 标签：c++, random, dice

> **可能重复：**
> [我应该多久在 C++ 应用程序中调用 srand()？](https://stackoverflow.com/questions/6954490/how-often-should-i-call-srand-in-a-c-application)

我正在尝试实现滚动多个骰子，但是使用我的代码，即使我创建了 2 个以上的骰子，它们似乎总是滚动相同的数字。这是我的代码：

```
Dice::Dice() {}

void Dice::roll() 
{
srand(time(0));
setFaceValue((rand() % MAX_FACE_VALUE + 1));
}

int Dice::getFaceValue()
{
return currentFaceValue;
}

void Dice::setFaceValue(int value) 
{
currentFaceValue = value;
} 
```

如果我将它编程到我的驱动程序中，我会得到相同的数字 3 次。

```
int main()
{
Dice d1, d2, d3;
d1.roll();
cout << d1.getFaceValue() << endl;

d2.roll();
cout << d2.getFaceValue() << endl;

d3.roll();
cout << d3.getFaceValue() << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:35:04.380

我怀疑您的“播种”RNG 使用的时间尺度变化比创建对象 b1 - b3 的速度要慢；即您的 time(0) 调用不会像创建 b1 - b3 并调用它们的 roll() 方法那样快。

您可以在开始时使用 3 个不同的种子时间，在对象创建时确保使用不同的 RNG，或者使用 1 RNG 的函数进行 1 对 1 值映射以提取更多 RNG 编号。

所以一句话，慢慢来！在调用之间添加 sleep() 调用可能会改变一些事情。

# opengl - 将矩阵和向量与 GLM 相乘时出错

> ID：13696656
> 
> 赞同：0
> 
> 时间：2012-12-04T05:29:29.310
> 
> 标签：opengl, vector, matrix, matrix-multiplication, glm-math

[我在按照本教程](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-3-matrices/)尝试将矩阵和向量与 GLM 相乘时遇到此错误。

```
reading1.cpp: In function ‘int main()’:
reading1.cpp:50:44: error: conversion from ‘glm::detail::tmat4x4<int>’ to non-scalar type ‘glm::mat4 {aka glm::detail::tmat4x4<float>}’ requested 
```

我正在使用此命令进行编译。

g++ 1.cpp -o 1 -lGLEW -lglfw

```
#include <glm/glm.hpp>
#include <glm/gtx/transform.hpp>

//program

glm::mat4 myMatrix = glm::translate(10,0,0);
glm::vec4 myVector(10,10,10,0);
glm::vec4 transformedVector = myMatrix * myVector;

//program 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:34:48.197

由于大量使用模板，我发现 GLM 对类型非常挑剔。我的猜测是您的 vec4 或 mat4 正在创建`int`类型，而不是`float`.

尝试使用浮点数显式创建它们，因为如果存在与模板匹配的 int 构造函数，它不会自动转换它们。

```
glm::mat4 myMatrix = glm::translate(10.f,0.f,0.f);
glm::vec4 myVector(10.f,10.f,10.f,0.f); 
```

# c# - 将PowerPoint幻灯片放映嵌入控制器

> ID：13696657
> 
> 赞同：3
> 
> 时间：2012-12-04T05:29:56.263
> 
> 标签：c#, wpf, powerpoint, office-interop, setparent

我有一个将 powepoint 文件嵌入到 webBrowser 控件中的 wpf 应用程序。我设法使用下面的示例代码实现了该功能。但每当我运行 ppt 文件时，幻灯片放映会在屏幕中弹出几秒钟，然后只有它嵌入到控件中。有什么办法可以阻止它或将其作为后台进程运行？

```
using System;
using System.Runtime.InteropServices;
using System.Windows;
using Microsoft.Office.Core;
using PPT = Microsoft.Office.Interop.PowerPoint;

namespace WpfApplication1
{
    public partial class MainWindow
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        [DllImport("User32", CharSet = CharSet.Auto, ExactSpelling = true)]
        internal static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndParent);

        private void BtnOpenClick(object sender, RoutedEventArgs e)
        {
            const string pptFilePath = @"E:\Sample.ppt";
            var pptApplication = new PPT.Application
            {
                ShowWindowsInTaskbar = MsoTriState.msoFalse 
            };            

            var presentation = pptApplication.Presentations.Open(pptFilePath, MsoTriState.msoCTrue,
                                                                          MsoTriState.msoTrue, MsoTriState.msoFalse);

            var slideShowWindow = presentation.SlideShowSettings.Run();

            slideShowWindow.Height = (int)(0.85 * webBrowser1.Height);
            slideShowWindow.Width = (int)(0.75 * webBrowser1.Width);           

            SetParent(new IntPtr(presentation.SlideShowWindow.HWND), webBrowser1.Handle);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T08:43:32.513

我遇到了同样的问题，我使用了 Patrick Reisert 的这个[解决方案。](https://github.com/Boddlnagg/PowerpointViewerLib)他使用 powerpointviewer 而不是 powerpoint，并将幻灯片转换为位图列表。它是一个具有导航功能的综合解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-14T14:18:18.533

您也可以通过我实现的另一种方式来打开 ppt/pps。它会以全屏模式直接在顶部打开您的 ppt/pps 文件。如果你想这样做，试试这个。

```
 Microsoft.Office.Interop.PowerPoint.Application application = new Microsoft.Office.Interop.PowerPoint.Application();
                Microsoft.Office.Interop.PowerPoint.Presentation presesntation = application.Presentations.Open2007("file path", Microsoft.Office.Core.MsoTriState.msoTrue, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoTrue);
                Microsoft.Office.Interop.PowerPoint.SlideShowSettings sst = presesntation.SlideShowSettings;
                sst.ShowType = Microsoft.Office.Interop.PowerPoint.PpSlideShowType.ppShowTypeSpeaker;
                sst.Run(); 
```

# php - PHP在查询执行后打开新页面

> ID：13696658
> 
> 赞同：0
> 
> 时间：2012-12-04T05:30:01.710
> 
> 标签：php, html, webpage, form-submit

我的网页中有一个表单，其中“操作”指定了一个 php 文件来执行查询。我想在按下按钮时执行该查询并打开一个名为 details.php 的新网页。我怎样才能做到这一点？查询工作正常..执行查询后，它应该打开 details.php 页面。我的输出打印代码如下..提前致谢

```
if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
{
echo "The image has been uploaded, and your information has been added";  
}
else {
echo "Sorry, there was a problem uploading your file.";
} 
```

我需要将此结果打印在带有主页按钮的网页中（页面尺寸与之前的数据输入页面相同）

同一个页面显示结果也可以，但是需要清除form中的数据，以便用户输入新数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:49:49.580

以最简单的形式，

```
if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
{
   $msg = "The image has been uploaded, and your information has been added";
   $size = <place the value here>
   $filename = <place file name here>
   header("Location: details.php?msg={$msg}&size={$size}&fn={$filename}&target={$target}");
   exit();
}
else {
echo "Sorry, there was a problem uploading your file.";
} 
```

然后在`details.php`

```
$msg = $_GET['msg'];
$size = $_GET['size'];
$fn = $_GET['fn'];
$destination = $_GET['target'];

echo "<p>".$msg."</p>";
echo "<p>File size is: ".$size."</p>";
echo "<p>File name is: ".$fn."</p>";
echo "<p>File uploaded at :".$destination."</p>";
echo "<input type='button' value='Home' onclick='window.location.href=\"home.php\"' />"; 
```

PS：不要忘记清理所有数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:39:33.193

using`header()`只会将用户当前所在的页面导航到您想要的页面。为了创建具有所需尺寸的新弹出窗口，您必须使用 JavaScript。

您可以使用 AJAX 处理请求并让 PHP 向客户端 JS 返回消息以触发新的弹出页面打开。

# c++ - 值和对象不同的编程语言

> ID：13696659
> 
> 赞同：8
> 
> 时间：2012-12-04T05:30:03.850
> 
> 标签：c++, programming-languages, functional-programming, generic-programming

我正在尝试从 Alex Stepanov 和 Paul McJones 的“编程元素”开始。在第 5 页最后一段：他们说，

“本书使用的编程语言无法将值和值类型与对象和对象类型分开描述。”

我的意思是，有人可以举一个编程语言的例子，可以将值描述为与对象分开的实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:39:26.363

听起来他们指的是值类型和引用类型。与此 Wikipedia 条目中的文本类似 ( [http://en.wikipedia.org/wiki/Object_type_(object-orientation_programming)](http://en.wikipedia.org/wiki/Object_type_%28object-oriented_programming%29) )

> 由于运行时效率和语法或语义问题等原因，一些面向对象的编程语言对引用类型和值类型进行了区分，在不存在复杂值类型的平台上，通常称为对象和非对象。例如，Java 有对应于每个原始类型的原始包装类：Integer 和 int、Character 和 char、Float 和 float 等。像 C++ 这样的语言很少或没有引用类型的概念；因此，对象类型的使用没有什么意义。

C# 有引用类型和值类型：http: [//msdn.microsoft.com/en-us/library/4d43ts61 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/4d43ts61%28v=vs.90%29.aspx)

# objective-c - 使用 RestKit 将 NSArray 映射到具有动态嵌套属性的 JSON？

> ID：13696660
> 
> 赞同：3
> 
> 时间：2012-12-04T05:30:05.403
> 
> 标签：objective-c, json, dynamic, nested, restkit

如何使用 RestKit 将 NSArray 映射到具有动态嵌套属性的 JSON？

我有一个名为“ `DataModel`”的类，它与其他各种属性一起包含`NSString*`属性`DataModel_tag`。我还有一个 class `UploadObj`，其唯一目的是为上传`DataModel`s 数组提供基础。因此，`UploadObj`包含一个属性：

```
@property NSMutableArray* DataModels; 
```

这需要以以下格式映射到 JSON：

```
{
    "DataModels" : 
    {
        "DataModel tag 1" : 
            {
                // other properties of DataModel instance 1 here
            },
        "tag for DataModel 2" : 
            {
                // other properties of DataModel instance 2 here
            }
    }
} 
```

我目前正在尝试遵循 RestKit 对象映射文档，并提出了以下方法：

```
+(RKObjectMapping*)mappingForDataModel {

    RKObjectMapping* mapping = [RKObjectMapping mappingForClass:
                                    [DataModel class]];

    [mapping mapKeyOfNestedDictionaryToAttribute:@"DataModel_tag"];

    mapping.forceCollectionMapping = YES;
    mapping.rootKeyPath = @"DataModel_tag";

    NSArray* propertyNames = // all properties, names obtained by introspection

    for (NSInteger i = 0; i < [propertyNames count]; i++) {
        NSString* propertyName = [propertyNames objectAtIndex:i];
        if (![propertyName isEqualToString:@"DataModel_tag"]) {
            // map (DataModel_tag).propertyName to propertyName
            [mapping mapKeyPath:[NSString stringWithFormat:
                @"(DataModel_tag).%@", propertyName]
                toAttribute:propertyName];
        }
    }

    return mapping;
}

+(void)configureMappingProviderForUpload {

    RKObjectMapping* uploadMapping = [Utilities
                                      simpleMappingForObject:[UploadObj class]
                                      withFieldsOrNil:nil];
    // ^ method not shown, but it just maps non-array properties to the object
    // with the same name. This method works in other parts of the code.
    [[RKObjectManager sharedManager] setSerializationMIMEType:RKMIMETypeJSON];
    [[[RKObjectManager sharedManager] router]
        routeClass:[UploadObj class]
        toResourcePath:@"/test.php"];

    RKObjectMapping *dataModelMapping = [Utilities mappingForDataModel];

    [uploadMapping mapKeyPath:@"DataModels"
        toRelationship:@"DataModels"
        withMapping:dataModelMapping];

    [[[RKObjectManager sharedManager] mappingProvider]
        setSerializationMapping:[dataModelMapping inverseMapping]
        forClass:[DataModel class]];

    [[[RKObjectManager sharedManager] mappingProvider]
        setSerializationMapping:[uploadMapping inverseMapping]
        forClass:[UploadObj class]];   
} 
```

当我尝试映射此对象时，我会收到每个 DataModel 属性的以下输出：

```
Destination object {
    "<RK_NESTING_ATTRIBUTE>" = [DataModel_tag value for current instance]
} rejected attribute value [attribute value for current attribute on 
current instance] for keyPath (DataModel_tag).[current attribute name]. 
Skipping... 
```

如何正确映射此对象？

谢谢！

# javascript - mobiscroll 时间选择器功能

> ID：13696661
> 
> 赞同：0
> 
> 时间：2012-12-04T05:30:16.967
> 
> 标签：javascript, jquery, html, function, mobiscroll

您好，我是 mobiscroll Demos 的新手，我正在尝试弄清楚它们是如何工作的。为了练习，我只是想让他们的时间选择器之一工作，但我遇到了一些问题。如果有人可以在代码中向我指出问题，我将不胜感激。

```
 <html>
<head>

<script src="jqmobi.js"></script>

<script text/javascript>
$(function(){
    $('#i').scroller({
        preset: 'time',
        theme: 'ios',
        display: 'bottom',
        mode: 'scroller'
    });    

    $('#show').click(function(){
        $('#i').scroller('show'); 
        return false;
    });
    $('#clear').click(function () {
        $('#i').val('');
        return false;
    });
});

</script>

</head>

<body>
<input id="i" name="i"  />

<a href="#" id="show" class="btn">Show</a>
<a href="#" id="clear" class="btn">Clear</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:53:16.857

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<link href="http://cdn-dev.aldu.net/jquery.mobiscroll/latest/jquery.mobiscroll.min.css" rel="stylesheet" type="text/css" />
<script src="http://cdn-dev.aldu.net/jquery.mobiscroll/latest/jquery.mobiscroll.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
$(function(){
    $('#i').scroller({
        preset: 'time',
        theme: 'ios',
        display: 'bottom',
        mode: 'scroller'
    });    

    $('#show').click(function(){
        $('#i').scroller('show'); 
        return false;
    });
    $('#clear').click(function () {
        $('#i').val('');
        return false;
    });
});
    </script>
    </head>
    <body>
<input id="i" name="i"  />
<a href="#" id="show" class="btn">Show</a>
<a href="#" id="clear" class="btn">Clear</a>
</body> 
</html> 
```

我猜你错过了 mobiscroll javascript 和 css 库。

我在[这里实现了上面的代码](http://jsfiddle.net/LTdaV/)

[我已将此站点](http://cdn-dev.aldu.net/jquery.mobiscroll/latest/)中的 css 和 js mobiscroll用作 cdn

请从[mobiscroll 博客阅读他们的教程](http://blog.mobiscroll.com/hassle-free-5-minute-guide-to-awesome-date-time-picking/)

# c# - How to bind event handler for custom control

> ID：13696662
> 
> 赞同：2
> 
> 时间：2012-12-04T05:30:18.247
> 
> 标签：c#, asp.net, custom-controls

I am new to custom controls in asp.net. I am facing difficulty while attaching the click event handler for the image button. I written the following code for server control.

```
 ImageButton _imgbtn;
        TextBox txtOutput;
        Label _lblname;
        public ImageButton searchBtn
        {
            get { return _imgbtn; }
            set { _imgbtn = value; }
        }

        public Label lblName
        {
            get { return _lblname; }
            set { _lblname = value; }
        }
        protected override void OnInit(EventArgs e)
        {
             txtOutput = new TextBox();
            txtOutput.Width = 180;
            txtOutput.ID = "ResultOutput";
            txtOutput.Enabled = false;
            Controls.Add(txtOutput);

            searchBtn = new ImageButton();
            Controls.Add(searchBtn);
            lblName = new Label();
            lblName.Text = "";
            Controls.Add(lblName);

        }
        protected override void RenderContents(HtmlTextWriter output)
        {
            //base.Render(output);
            txtOutput.RenderControl(output);
            searchBtn.RenderControl(output);
            lblName.RenderControl(output);
        } 
```

I added this custom control to the .aspx page with register tag as follows.

```
<%@ Register TagPrefix="mycontrol" Namespace="MyControl" Assembly="MyControl" %> 
```

In aspx.cs file I give the property values as below,

```
 CustomControl mycustctrol;
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                mycustctrol = myCust as CustomControl;
                mycustctrol.searchBtn.ImageUrl = "~/Images/searchicon.png";
                mycustctrol.searchBtn.OnClientClick = "GenerateClickEvent"

            }
        }

public void GenerateClickEvent(object sender, EventArgs args)
    {
        mycustctrol.lblName.Text = "clicked";
    } 
```

After running this application I am getting the following error.

> 'GenerateClickEvent' is undefined

Where I done the mistake. I tried with declaring an event like `public event EventHandler GenerateClickEvent;`, but I am unable to go further. Can you please show me the way how to achieve this.

I also tried with the javascript function in the .aspx page as

```
function GenerateClickEvent() {

        alert('clicked');
    } 
```

`alert('clicked');` is not firing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:04:42.457

you probably want something like this what you are doing is for client click

```
 mycustctrol.searchBtn.OnClientClick = "GenerateClickEvent()" 
```

and something like this for the event click

```
 mycustctrol.searchBtn.Click += new ImageClickEventHandler(GenerateClickEvent_Click);

 protected void GenerateClickEvent_Click(object sender, ImageClickEventArgs e) 
  {
        mycustctrol.lblName.Text = "clicked";
  } 
```

# maven - Maven 构建错误（无法解析依赖项）

> ID：13696672
> 
> 赞同：2
> 
> 时间：2012-12-04T05:30:55.467
> 
> 标签：maven, build

我正在尝试使用 maven构建软件 Online-Whiteboard ( [http://code.google.com/p/online-whiteboard/ )。](http://code.google.com/p/online-whiteboard/)根据上面链接的网站，我需要使用以下命令：

```
mvn jetty:run 
```

但是，当我运行该命令时，出现以下错误：

```
[ERROR] Failed to execute goal on project whiteboard-showcase: Could not resolve 
dependencies for project com.googlecode.online-whiteboard:whiteboard-showcase:war:0.1: 
Failed to collect dependencies for [commons-lang:commons-lang:jar:2.5 (compile), 
commons-configuration:commons-configuration:jar:1.6 (compile), com.sun.faces:jsf-
api:jar:2.1.2 (compile), com.sun.faces:jsf-impl:jar:2.1.2 (compile), 
org.primefaces:primefaces:jar:2.2.1 (compile), org.primefaces.themes:cupertino:jar:1.0.1 
(compile), com.ocpsoft:prettyfaces-jsf2:jar:3.3.0 (compile), javax.el:el-api:jar:2.2 
(compile), org.glassfish.web:el-impl:jar:2.2 (compile), javax.annotation:jsr250-api:jar:1.0 
(compile), javax.servlet:servlet-api:jar:2.5 (compile), javax.servlet:jstl:jar:1.2 
(compile), com.google.code.gson:gson:jar:1.7.1 (compile), org.atmosphere:atmosphere-
jersey:jar:0.8-SNAPSHOT (compile), org.apache.geronimo.specs:geronimo-
servlet_3.0_spec:jar:1.0 (compile), org.slf4j:slf4j-api:jar:1.6.2 (compile), 
org.slf4j:slf4j-nop:jar:1.6.2 (compile), junit:junit:jar:4.8.2 (test)]: Failed to read 
artifact descriptor for org.primefaces:primefaces:jar:2.2.1: Could not transfer artifact
 org.primefaces:primefaces:pom:2.2.1 from/to JBoss (http://repository.jboss.org/maven2/): 
Access denied to: 
http://repository.jboss.org/maven2//org/primefaces/primefaces/2.2.1/primefaces-2.2.1.pom ->
 [Help 1] 
```

我以前从未使用过 Maven，所以真的不知道我在这里做什么；我尝试查找这可能是什么，但找不到任何东西（有帮助）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:39:28.503

首先，当您使用 mvn 命令时，它会尝试从可用的存储库位置下载依赖项。但出于某种原因，在您的项目中，maven 正尝试从以下不存在的位置下载依赖项，或者您可能无效。

[http://repository.jboss.org/maven2/](http://repository.jboss.org/maven2/)

因此，请尝试使用以下存储库位置，如果该位置中存在 primeface jar，它应该可以解决问题。我想它是那里的主机。

[http://repository.jboss.org/nexus/content/groups/public](http://repository.jboss.org/nexus/content/groups/public)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:36:20.913

我对素颜知之甚少。查看`pom.xml`Online-Whiteboard 的，我看到了对

```
<repository>
    <id>prime-repo</id>
    <name>Prime Technology Maven Repository</name>
    <url>http://repository.prime.com.tr</url>
</repository> 
```

看起来这个网址无效。这是一个[相关的 SO 帖子](https://stackoverflow.com/questions/6779997/primefaces-dependency-not-able-to-import-as-the-repo-url-is-blocked)。根据[这个 primeface 下载链接](http://primefaces.org/downloads.html)，您可以尝试使用以下内容，看看它是否可以帮助您继续。

```
<repository>  
    <id>prime-repo</id>  
    <name>PrimeFaces Maven Repository</name>  
    <url>http://repository.primefaces.org</url>     
</repository 
```

# string - 使用 awk 或 send 查找字符串并在其之前插入另一个复杂字符串

> ID：13696674
> 
> 赞同：2
> 
> 时间：2012-12-04T05:31:14.050
> 
> 标签：string, search, insert, sed, awk

好的，我被锁定在我试图根据搜索字符串插入一行的情况下。我熟悉使用单个工作或不复杂的东西来使用 AWK 和 SED。

我想如何插入一个包含单引号和括号的字符串，例如这将起作用

```
 awk '/('Backup/ {print "NEWLINE"  } {print}' filename.sh 
```

这也会

```
 sed -e '/\(\'backup/i\
    newline ' filename.sh 
```

而不是换行工作 - 我想要这个“（'Drop the no good white.cap;'），”

包含在“和”中的所有内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:38:22.353

您尝试做的事情与`awk`or无关`sed`。例如，请参阅：

```
print " '\'' data_between_two_single_quotes '\'' " 
```

第一个`'`字符关闭打开的`'`shell 字符串文字。shell 文字不支持反斜杠转义。该序列`'\''`起到了作用：它关闭单引号文字，指定引号字符（使用单引号文字之外支持的转义），然后重新打开一个新的单引号文字。你可以把它想象成一个四字符的转义序列来得到一个单引号。

因此，您的`awk`命令变为：

```
awk '/\('\''Backup/ {print " ('\''Drop the no good white.cap ;'\'' ) , " } { print }' filename.sh 
```

你的`sed`命令变成：

```
sed -e '/\('\''Backup/i\
('\''Drop the no good white.cap ;'\'' ) , ' filename.sh 
```

* * *

***编辑：***

```
for i in *; do awk -v database="$DB" -v table="$TB" 'BEGIN { print "header" } /backup/ { print " ('\''DROP TABLE " database "." table ";'\'' ) , " }1' "$i" > "${i}.new"; done 
```

解释：

使用 shell`for`循环遍历目录中的所有文件。`BEGIN`向带有块的文件添加标题。找到单词`backup`并打印一行包含 shell 变量`DB`和`TB`. `... }1'`在`awk`脚本末尾默认启用打印。它是 的简写`{ print }`。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:47:25.663

使用 awk 的另一种方法：

将要插入的内容保留在单独的文件中：

```
$ cat file1
 " ('Drop the no good white.cap ;' ) , " 
```

使用 awk：

```
$ awk '/\('\''Backup/{getline x<"file1";print x;}1'  filename.sh 
```

使用 getline，file1 中的行被读入变量 x，并打印在 encoutering 模式中。这将允许您不使用任何转义字符来转义引号。

# vba - 使用VBA设置另一个单元格引用的excel单元格的值

> ID：13696675
> 
> 赞同：1
> 
> 时间：2012-12-04T05:31:18.837
> 
> 标签：vba, excel

我目前有一个名为“DataMap”的电子表格，它有一个键/值布局。键是对另一个电子表格和单元格的引用，值由用户输入。

例如，键列可能具有以下单独的引用：

*   =工作表1！B25
*   ='表 2'!B25
*   =表名[表行名]

此页面上还有一个名为“传输数据”的按钮。

当按下“传输数据”时，将运行一个宏，将值复制到键列引用的单元格中。

这个页面的重点是有一个可以从第三方系统注入数据的位置，而不需要知道 excel 工作簿的其余部分——除非有一个“DataMap”表。

目前，我遍历“DataMap”中的每个键/值对行，并可以使用以下代码将值注入“=Sheet1！B25”：

```
reference = Replace(Sheets("MAPPINGS").Range("A" & row).Formula, "=", "")
refSplit = Split(reference, "!")

Sheets(refSplit(0)).Range(refSplit(1)) = Sheets("MAPPINGS").Range("B" & row).Value 
```

如果我使用字符串替换，我也可以处理 "='Sheet 2'!B25" 的情况。

但是，我在使用命名表时遇到了很大的麻烦。

是否可以？或者，是否有人建议更好的方法来专门处理将值复制到“键”列引用的单元格中（无论引用的格式如何）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:02:11.357

```
Dim sht As Worksheet
Dim ref As Range

Set sht = Sheets("MAPPINGS")

Set ref = Application.Evaluate(Replace(sht.Range("A" & Row).Formula, "=", ""))
ref.Value = sht.Range("B" & Row).Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:12:41.163

见下文。

```
Dim sht As Worksheet
Dim address As Range

Set sht = Sheet2

Set address = Range(Replace(sht.Range("A" & 5).Value, "=", vbNullString))
address.Value = sht.Range("B" & 5).Value 
```

几个建议：

1.  将 Sheets("MAPPINGS") 更改为工作表的内部名称（在 VBA 窗口中找到），因此如果在 Excel 中更改工作表名称，它不会影响您的宏。
2.  不要在单元格引用中添加“=”，因此您不需要替换语法。

# magento - My Custom Attribute not Displayed in Product Collection Magento

> ID：13696676
> 
> 赞同：0
> 
> 时间：2012-12-04T05:31:27.270
> 
> 标签：magento

Hi i created a multi select product attribute with setup.php and it got created. i used the following code:

```
 $installer = $this; 
 $installer->startSetup();   
 $installer->addAttribute('catalog_product', 'author_name',array( 
'label' => 'Name of The Author', 
'type' => 'varchar', 
'input' => 'multiselect', 
'backend' => 'eav/entity_attribute_backend_array', 
'frontend' => '', 
'source' => '', 
'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 
'visible' => true, 
'required' => false, 
'user_defined' => false, 
'searchable' => false, 
'filterable' => false, 
'comparable' => false, 
'option' => array ( 'value' => array('optionone' => array('Carolyne Aarsen'), 
                                     'optiontwo' => array('Jennie Lucas'), 
                                     'optionthree' => array('Anna Adams'),
                                     'optionfour' => array('Kathryn Albright'), 
                                     'optionfive' => array('Trisha Alexander'), 
                                     'optionsix' => array('Vincent Alexandria'),
                                     'optionseven' => array('Louise Allen'), 
                                     'optioneight' => array('Abby Green'), 
                                     'optionnine' => array('Laura Abbot'),
                                     'optionten' => array('Caroline Anderson'), 
                                     'optioneleven' => array('Victoria Aldridge'), 
                                     'optiontwelve' => array('Harper Allen'),
                                     ) 
                  ), 
'visible_on_front' => false, 
'visible_in_advanced_search' => false, 
'unique' => false, 
'group' => 'General'
)); 
$installer->endSetup(); 
```

Then i want to get the author_name attribute value for each product in every category that is included in naigation menu of the site i wrote the following query to get the attribute value:

```
 $categories = Mage::getModel('catalog/category')->getCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('include_in_menu', '1');
    foreach ($categories as $_category):
    if ($_category->getName() != 'Root Catalog'): 
     $category = Mage::getModel('catalog/category')->load($_category->getId());
     $products = $category->getProductCollection()
                       ->addCategoryFilter($category)
                       ->addAttributeToSelect('author_name')
                       ->setPageSize(9); 
         $author_names = array(); 
         foreach ($products as $_product):                             
        $author_names[] = $_product->getAttributeText('author_name');
         endforeach;
         print_r($author_names); 
    endif;
    endforeach; 
```

the array is not printing anything. when i debug this i am not getting author_name attribute in the collection.

is there any thing wrong in my query. please help me out

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:38:43.837

Try following code to display custom attributes

```
<?php echo $_product->getResource()->getAttribute('author_name')->getFrontend()->getValue($_product); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:45:03.697

Hello check following query may be help you

get product id & using this id get product auther name

```
$reqProdid = Mage::registry('current_product')->getId();
$selected_auther =Mage::getModel('catalog/product')
    ->load($reqProdid)
    ->getData('author_name'); 
```

# qt - 如何安装 Qt

> ID：13696678
> 
> 赞同：0
> 
> 时间：2012-12-04T05:31:28.210
> 
> 标签：qt, installation, window, qt-creator, valgrind

我必须在 Windows 上安装 Qt 才能使用 C++ 创建应用程序。我面临的问题是，在安装 qt-win-opensource-4.8.3-vs2008.exe 和 qt creator 之后，许多事情都突然发生了。在打开 qt-creator 时，它没有找到任何示例：“未找到示例”。同样，Qt creator 的菜单栏中也没有分析选项。有人可以帮助我了解如何在 Windows 上安装 Qt SDK 和 creator。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:46:37.503

请参阅我关于[QtCreator 甚至没有找到 Qt](https://stackoverflow.com/q/12599233/1122645)的问题。采用

```
qmake -query 
```

查看 qmake 可执行变量。确保`QT_INSTALL_EXAMPLES`并`QT_INSTALL_DEMOS`设置为能够访问示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:59:00.187

该分析器不随 Qt 一起提供，必须单独下载。但是 Valgrind 不能在 Windows 上运行。

来自 Qt 文档：

> 此外，Qt Creator 集成了 Valgrind 代码分析工具，用于检测内存泄漏和分析函数执行。**这些工具仅在 Linux 和 Mac OS 上受本地支持。您可以在 Windows 的远程主机上运行它们。**您必须单独下载并安装它们才能从 Qt Creator 中使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:28:04.077

您仍然可以从[CNET](http://download.cnet.com/Qt-SDK/3000-2069_4-75305206.html)下载 Qt SDK 。安装后，您可以从开始菜单启动*维护诺基亚 SDK*，并且可以将工具链从 Visual Studio 更改为 MinGW，因为调试不适用于 Visual Studio 工具链。

# jquery - 根据表单中的字段值输出实时计算

> ID：13696679
> 
> 赞同：0
> 
> 时间：2012-12-04T05:31:33.047
> 
> 标签：jquery

我想使用 jQuery 以表单形式输出实时计算，但由于缺乏 JS 知识，我不确定从哪里开始。我想知道是否有人可以帮我解决这个问题？

这是我的字段值：

```
<input type="hidden" name="total_days" value="{total_days}" />
<input type="text" name="cost_per_day" value="" />
<p>Total Cost: $<span class="total_cost"></span></p> 
```

页面加载时，total_days 将预先填充一个值。cost_per_day 将由用户输入。我希望在用户输入表单时填充总成本跨度，计算如下：

```
total_days * cost_per_day = total_cost 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:47:03.917

我已经向您的隐藏文本字段和用户文本字段添加了一个 id 以检索它们的值。它看起来像这样。

```
<input type="hidden" name="total_days" id = "totaldays" value="10" />
<input type="text" name="cost_per_day" id = "mytextfield" value="" />
<p>Total Cost: $<span class="total_cost"></span></p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

javascript如下：

```
$("#mytextfield").on('keyup',function(){
        var totalcost= $("#totaldays").val() * $(this).val() 
        $(".total_cost").html(totalcost);
}) 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T18:45:55.703

这个解决方案效果很好，但是我试图做一个小的改变，我想总是将答案四舍五入到小数点后 2 位。我尝试将 .toFixed(2) 添加到各个点，但它似乎不起作用。像这样，

```
<script type="text/javascript">
$(document).ready(function() {
$("#mytextfield").on('keyup',function(){
   // alert('pressed')
   var totalcost= $("#totaldays").val() * $(this).val() 
   $(".total_cost").text(totalcost).toFixed(2);
})
});
</script> 
```

谁能告诉我如何达到小数点后两位？

谢谢

# c# - Clickonce 应用程序在 windows xp 中下载旧版本

> ID：13696684
> 
> 赞同：0
> 
> 时间：2012-12-04T05:31:54.063
> 
> 标签：c#, winforms, windows-xp, clickonce

我使用 clickonce 在我的服务器中发布了我的 winform 应用程序。之后，我在五个 Windows 7 系统中下载并安装了它。并且还尝试在一个windows xp系统中。首先它安装正确。发布更新版本后，它不会在 xp 中自动更新，但在 win7 中已更新。在浏览器中，它在 xp 中显示旧版本号。但在 win7 中显示正确版本。我们尝试了以下命令，这些命令首先有效，但不再有效。

```
mage -cc 
```

这个问题有什么解决办法吗？请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:29:50.267

我会尝试[为 ClickOnce 启用增强的日志记录，](http://robindotnet.wordpress.com/2010/05/31/enhanced-logging-in-clickonce-deployment/)以查看 XP 机器上发生了什么。另外，你是说你正在运行“mage -cc”并重新安装应用程序，它仍然安装旧版本吗？您是否尝试过删除用户缓存下的 \apps\2.0 文件夹？如果您这样做并重新安装，但仍然获得旧版本，请在安装链接处仔细检查部署清单（.application 文件）中的版本号。如果*这*是正确的，那么您在访问部署时一定遇到了某种缓存问题。

# visualvm - 使用可视 Vm 的本地 jmx 连接

> ID：13696686
> 
> 赞同：2
> 
> 时间：2012-12-04T05:32:07.123
> 
> 标签：visualvm

根据 oracle 文档[http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/jmx_connections.html](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/jmx_connections.html) 目标应用程序应与 Java VisualVM 在同一主机上运行，​​但由不同于一个启动 Java VisualVM 的人。但是，在我的情况下，我正在以假设 X 用户身份登录。并且我正在启动 VisualVM 和目标应用程序。如何由一个用户运行 VisualVM 并由另一个用户在同一个用户上运行目标应用程序本地主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:31:41.617

你在正确的页面上。您需要按照页面所述创建显式 JMX 连接：

> **何时需要显式 JMX 连接？**
> 
> *   目标应用程序与 Java VisualVM 在同一主机上运行，​​但由与启动 Java VisualVM 的用户不同的用户启动。Java VisualVM 使用 jps 工具发现正在运行的应用程序，该工具只能发现由与启动 Java VisualVM 工具的用户相同的用户启动的 Java 应用程序。

# android - 如何从中心数据库中获取数据并存储在 android sqlite 数据库中？

> ID：13696694
> 
> 赞同：1
> 
> 时间：2012-12-04T05:32:28.710
> 
> 标签：android, database, sqlite

我想创建一个 Android 应用程序，其中任何用户都可以在某个中央数据库中添加一些信息，并且使用该应用程序的所有其他用户都可以看到它。

所以，我想维护一个集中式数据库并使用这个集中式数据库更新 App 本地数据库（sqlite 数据库）。

那么，任何人都可以帮助我吗？我想要一些想法或代码示例或指针来了解这些事情......

PS：我对Android App开发很陌生。所以，如果我错过了任何必需的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:05:45.867

您必须将远程数据库存储在远程数据库服务器上。为此，您可以使用像 MySQL 这样的简单数据库。然后，您必须创建 REST API（通过使用 PHP、Ruby、Python 等语言编写服务器端代码），您的 Android 应用程序可以使用这些 API 从数据库中获取数据。

还有其他选项可以避免使用 REST API。看：

[如何从 MySql 服务器到 Android 应用程序？](https://stackoverflow.com/questions/2898823/get-data-to-android-app-from-mysql-server)

有关 REST 的初学者教程，请参见此处：

[http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)

完成此操作后，您必须在 Android 应用程序中创建[线程](https://developer.android.com/reference/java/lang/Thread.html)或[AsyncTasks](https://developer.android.com/reference/android/os/AsyncTask.html)，它们将调用 API 并解析获得的数据（通常数据以 JSON 格式发送）。然后，您可以将解析后的数据存储在本地 android SQLite 数据库中并访问它。

安卓数据库教程：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

Android 异步任务和线程教程：

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

Android JSON 教程：

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

# android - android中的单选选择对话框

> ID：13696699
> 
> 赞同：6
> 
> 时间：2012-12-04T05:32:58.247
> 
> 标签：android, dialog

我正在制作一个安卓程序。在我的应用程序中，我使用了一个单选选择 AlertDialog，其项目是以编程方式添加的。我想做的是：

*   下次用户打开对话框时为所选项目设置背景颜色，
*   在对话框中间显示所选项目（这是一个问题，因为大约有 20 个项目）。

这是我所拥有的：XML：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingTop="5dp" >

    <Button
        android:id="@+id/selectDateButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Please, select date" />

</LinearLayout> 
```

爪哇：

```
public class ExperimentListView extends Activity {

private static final DateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd");
private static Calendar calendar = Calendar.getInstance();
private static Button selectDateButton;
private static String[] items;
private static int selectedDatePosition = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_view_ex);

    selectDateButton = (Button)findViewById(R.id.selectDateButton);
    selectDateButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            items = new String[20];
            for (int i = 0; i < 20; i++) {
                items[i] = DATE_FORMAT.format(calendar.getTime());
                calendar.add(Calendar.DATE, 1);
            }
            showListView();
        }
    });

}

private void showListView() {
    AlertDialog.Builder builder = new AlertDialog.Builder(ExperimentListView.this);
    builder.setTitle("Select date");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            selectedDatePosition = which;
            selectDateButton.setText(items[selectedDatePosition]);
        }
    });
    AlertDialog alertDialog = builder.create();
    alertDialog.getListView().setSelection(selectedDatePosition);
    alertDialog.show();
 }
} 
```

到目前为止，我还没有找到解决方案，如果有人可以提供帮助，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:52:21.893

而不是`builder.setItem`使用`builder.setSingleChoiceItems`与作为参数传递的选定项目位置一起使用

```
 builder.setSingleChoiceItems(strArray, selected_pos, new DialogInterface.OnClickListener ()
    {
         @Override
         public void onClick(DialogInterface dialog, int which) 
         {

         }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:53:21.597

1）要设置背景颜色，您可以为警报对话框使用**自定义视图**

2）要在对话框中间显示所选项目，您需要**交换其在**您传递给列表以用于警报对话框的数组中的位置。

3）并且由于您希望尊重先前选择的项目的背景颜色，请使用**共享首选项**来存储项目和背景，并在用户打开警报对话框时重新获得背景和选择的项目。

正如 Deepika 所说，使用**setSingleChoiceItems**进行单选选择。

# iframe - 门户网站、iframe

> ID：13696704
> 
> 赞同：1
> 
> 时间：2012-12-04T05:33:46.420
> 
> 标签：iframe, web, portal

我对开发门户网站有疑问。例如，任务是开发几个单独的 Web 应用程序。可能每个应用程序都有自己的数据库并位于不同的服务器和端口上。所有应用程序都必须可以从一个门户访问。我是否必须使用 iframe 才能将所有应用程序放在一个门户中，或者是否有其他方法可以从一个地方访问它们？我在询问 iframe，因为我听说很多它们存在很大问题并且在跨浏览器兼容性方面存在困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:29:05.740

一组网站需要统一的质量是很常见的。假设您有一家销售某物的公司。在他们的网站上，他们可能会出售产品、提供的工作和客户服务。内部网站可能有更多的东西。会计、应付账款、应收账款、人力资源/福利、商业智能、员工通讯等。

这些系统中的每一个都是由具有不同技术和不同人员的不同团队开发的。没有两个长得像，人们认为这是一团糟。一项任务是说一切都必须协同工作，而不是分散在各处。

想到几个选项

1.  做一个可以做所有事情的大网站。当然，要拥有一个可以做所有事情的站点，就必须重写所有内容。

2.  建立一个可以以某种方式访问​​每个部门站点并从这些站点提取相关信息的站点。当然，没有一个原始站点需要自己提供部分服务（Portlets）

3.  创建一个包含一堆框架（或 iframe）的站点，其中包含所有部门站点。用户仍然可以使用现有站点，因为它们没有被更改，并且将站点放入框架或 iframe 是一个比选项 1 和 2 小得多的问题

4.  创建一个仅包含指向所有部门网站的链接的页面。一切仍然是分开的，但它看起来也是分开的。

## 评估选项

1.  重写一切可能太昂贵了

2.  这将减少工作量，但弥合系统之间的差距可能是一个永久的维护问题

3.  我想这就是你所提议的。

4.  这可能已经存在，没有人喜欢它。事实上，它可能被认为是问题所在

5.  让所有网站都使用标准 CSS 文件来控制外观

因此，选项 3 看起来非常好

## 选项 3：框架和 iframe

您可以使用几百行静态 HTML 来执行选项 3。我会做3个步骤：

*   验证每个应用程序在 iframe 中时是否正常工作。我会检查以使菜单系统、弹出窗口等。即使页面位于 iframe 内，它仍然可以工作。很有可能某些事情不起作用

*   有许多选项卡机制。jQuery 有很多可供选择的其他 Javascript 库。找到适合您的选项卡方法。

*   将两者结合在一起。仅仅因为 iframe 工作并且仅仅因为选项卡工作，并不意味着它们会一起工作。

这种方法仍然需要密集测试。编码可能需要几天时间，但验证需要几周时间。

## 选项 5：CSS 怎么样？

级联样式表 (CSS) 提供了一个通用的外观和感觉网站。一个 CSS 可以在多个部门网站之间共享。应用新的 CSS 通常不会破坏任何东西。

## 简而言之

归根结底，有人将不得不维护所创建的任何内容。我会选择十几个丑陋但可维护的网站，而不是一个永远无法运行的网站。

# java - 从自身内部重新启动 Tomcat

> ID：13696712
> 
> 赞同：3
> 
> 时间：2012-12-04T05:34:23.033
> 
> 标签：java, tomcat

我想根据特定条件自动重启 Tomcat。基本上我在一个 32 MB 的 JVM 中运行，可能空间不足。因此，我会定期检查可用内存的状态。

如果可用内存百分比低于 50%，我想从内部重新启动 Tomcat。

我知道这不是一个优雅的方法。而且我应该更多地解决内存泄漏问题！但在我这样做之前，我想知道这个问题是否有战术解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:45:42.460

这可能会帮助你。根据您的需要进行配置：

Tomcat 启动/停止的批处理/shell 脚本：

```
cd tomcat_dir\bin
catalina stop
catalina start 
```

运行批处理文件[http://www.roseindia.net/answers/viewqa/Java-Beginners/5286-Running-Batch-files-in-java.html](http://www.roseindia.net/answers/viewqa/Java-Beginners/5286-Running-Batch-files-in-java.html)

对于内存检查[http://viralpatel.net/blogs/getting-jvm-heap-size-used-memory-total-memory-using-java-runtime](http://viralpatel.net/blogs/getting-jvm-heap-size-used-memory-total-memory-using-java-runtime)

创建 Jar 文件并在操作系统启动时执行并定期检查，比如 2 分钟堆大小消耗更多？

如果更多则运行上述`CallBatchFile.java`过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:40:52.563

也许你可以触摸一个 jsp/jar 文件，它会触发 tomcat 重新加载你的应用程序。希望它将完全卸载您的旧应用程序实例并释放所有内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:20:54.557

如果您对 shell 脚本感到满意，请编写一个脚本以在内存下降后重新启动 tomcat。您将无法仅使用 java 代码完成任务，因为另一种方法是从您的 java 应用程序触发重新启动脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T22:23:03.520

经过几天的研究和反复试验，我们的网络应用程序重新启动了tomcat的功能。

本质上，您需要创建自己的脚本，在后台启动 tomcat 脚本（参见下面的步骤＃1。该脚本将通过 Process 对象从您的 Web 应用程序调用（参见下面的步骤＃2）。我们在方法的 javadoc 中被提及。

以下是步骤：

（1）创建一个shell脚本，在后台调用tomcat脚本：

```
#! /bin/sh
# This script simply calls the tomcat script in the background using nohup ... &

echo Calling tomcat shell script in background...
nohup 2>&1 /your/tomcat/shell/script.sh $1 > /your/tomcat/shell/script.log &

echo Done calling the tocat shell script 
```

(2)在web app中，调用如下方法：

```
/**
 * Run shell script.
 * <p>
 * CAUTION: The following could cause problems:
 * <ol>
 * 1) Calling process.waitFor(). This call blocks the thread until the
 * process is terminated. This could be an issue when calling the script to
 * restart tomcat: the JVM is waiting for the process to finish
 * before it stops while the process is waiting for the JVM to stop.
 * <ol>
 * 2) Redirecting the process's streams (which could be obtained by calling
 * process.getInputStream() and process.getErrorStream()) to a separate
 * thread. This could be an issue when calling the script to restart: JVM is
 * waiting for the thread to terminate while the thread is awaiting for more
 * input to come through the stream.
 * <ol>
 * 3) Calling the actual script directly. This could be a similar issue to
 * (1) above when calling the script to restart. Better approach is to have
 * another script that executes the main script in the background (using
 * nohup ... &).
 * 
 */
private void kickOffProcess(String scriptOption) {
    String executeScript = null;

    try {
        File workingDir = new File(WORKING_DIRECTORY_PATH);

        // This script calls the tomcat script in the background
        executeScript = "/your/shell/script.sh";

        logger.info("Executing the following script: [" + executeScript
                + "] ");

        // Call the shell script
        ProcessBuilder processBuilder = new ProcessBuilder(executeScript,
                scriptOption);
        // processBuilder.redirectErrorStream(true);
        processBuilder.directory(workingDir);
        Process process = processBuilder.start();

        int exitValue = process.exitValue();
        if (exitValue != 0) {
            logger.error("Script failed to execute. " + "exitValue["
                    + exitValue + "] ");
        }

        logger.info("Done with calling the script. " + "exitValue["
                + exitValue + "] ");

    } catch (IOException e) {
        String errorMessage = "Failed with IOException trying to run the script. "
                + "executeScript[" + executeScript + "] ";
        logger.error(errorMessage, e);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-16T06:00:52.887

你也可以使用像[Monit](https://mmonit.com/monit/)这样的东西。它是一个简单的守护进程，您可以对其进行配置以检查 JVM 内存统计信息并触发 tomcat 服务重启。

# python - 从模板 html 文件发送请求到 views.py

> ID：13696715
> 
> 赞同：0
> 
> 时间：2012-12-04T05:34:32.737
> 
> 标签：python, google-app-engine, django-views, jinja2

在 html 文件中，我有这段代码，它打印出 golfelement 的信息，例如 golfname、changenamefee、url_1net、url_golfagora、url_juchi。我还得到了 golfelement ID `{{golfelement.key().id()}}`。有一个按钮`1net`，如果我点击按钮，它会请求`myapp/affiliate`

```
{% for golfelement in displaygolf %}
          <tr>
              <td></td>
              <td>{{ golfelement.golfname }}</td>
              <td>{{ golfelement.changenamefee }}</td>
              <td>
                  <a href="{{golfelement.url_1net}}">1net | </a>
                  <a href="{{golfelement.url_golfagora}}">Golfagora | </a>
                  <a href="{{golfelement.url_juchi}}">Juchi</a>
                  {{golfelement.key().id()}}
                  <form method="LINK" action="{{url_for('myapp/affiliate')}}">
                      <input type="submit" value="1net">
                  </form>
              </td>

          </tr>
          {% endfor %} 
```

单击按钮时，我想发送`{{golfelement.key().id()}}`到 views.py 中的函数`affiliate(request, idnum)`。

```
def affiliate(request, idnum):
    golfe = Golf.get_by_id(idnum)
    return render_to_response('myapp/affiliate.html',{'affiliate': golfe}) 
```

请帮我如何修改html文件以发送参数`{{golfelement.key().id()}}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:39:40.893

```
<form method="GET" action="{{ url_for('myapp.affiliate') }}">
    <input type="hidden" name="idnum" value="{{ golfelement.key().id() }} />
    <input type="submit" value="1net" />
</form> 
```

然后你的观点：

```
def affiliate(request, idnum=None):
    idnum = int(idnum or request.args.get('idnum'))
    golfe = Golf.get_by_id(idnum)
    return render_to_response('myapp/affiliate.html',{'affiliate': golfe}) 
```

# c - 将一个数组分成 2^N，然后将后续数组中的所有数字相加

> ID：13696720
> 
> 赞同：0
> 
> 时间：2012-12-04T05:34:56.750
> 
> 标签：c, arrays, math

我正在用 C 语言编写一个程序，该程序使用线程将分区数组中的数字相加，该分区数组使用一些晦涩的命令行参数来确定应该使用多少个分区。

这是我在简报中苦苦挣扎的部分的副本：

```
 Divide the array into 2**n partitions (n is another command-line argument)   and create 
 one thread to do simple sum of all values stored in one partition   of the array. Each 
thread can calculate which locations of the array it should   search given the thread index
 (0,1, … 2**n-1). For example, if n=1 and the   array is size 512, then thread 0 should sum
 array locations [0,255] and   thread 1 should search array locations [256-511].  Each 
thread should store   the partial sum it produces in a global array.  Note that since the 
threads do   not share any data, they do not need to be synchronized, however you do   need
 to wait until the last thread completes processing before continuing on   to the next 
stage. 
```

我完全不知道如何对数组进行分区以及为什么线程对于这项任务来说是必要的，但鉴于这是我的要求的一部分，我将不得不使用它们。如果有人可以帮助解释清楚一点，以及我将在哪个庄园中进行分区和线程的原因，我将不胜感激。我已经创建了数组并用随机数填充了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:39:28.373

您的课程可能是并行处理，并且此分配允许您对具有 2^n 个线程的给定数组进行并行加法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:09:20.737

这个想法是你可以让多个核心同时处理这个问题。它显然是为了教您线程编程，但您需要启动必要数量的线程并使用正确的起点和要处理的索引数量对它们进行参数化。

您的主线程将需要等待它们完成，然后添加每个的部分总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T08:48:35.493

分区是合乎逻辑的。您无需对阵列进行物理更改或分割。

从 0 到 2**n 对每个工作线程进行编号。

让`size_t`N = 2**n 让`size_t`M = 数组长度 让 a = 数字数组

线程 0：计算 a[0*M/N] 的总和，但不包括 a[1*M/N]

线程 1：计算 a[1*M/N] 的总和，但不包括 a[2*M/N]

线程 j：计算 a[j*M/N] 的总和，但不包括 a[(j+1)*M/N]

Last Thread (j=N-1)：计算 a[j*M/N] 的总和，但不包括 a[M]

所有线程将同时访问（的不同部分）`a`。

注意：请注意，M/N 将使用整数除法（有意）。

# c++ - 多个 DLL 的问题

> ID：13696721
> 
> 赞同：1
> 
> 时间：2012-12-04T05:34:58.150
> 
> 标签：c++, oop, dll, com

我有一个引用 2 个 COM DLL 的应用程序。应用程序在启动时调用的 2 个 DLL 中有一个 Init 函数。

这两个 DLL 几乎相似——除了它们有不同的 uid 和不同的接口名称。除此之外，逻辑是相同的......并且使用的变量也相同。

这就是该系统的工作方式 - 1\. StartApp() 2\. Init DLL1(appVar1,appVar2)..这里应用程序将在此 DLL 中定义的 var x,y 设置为从应用程序传递的值。假设 x = appVar1 和 y = appVar2。x 和 y 是全局变量。3\. 初始化 DLL2(appVar1a,appVar2a)...应用程序将 DLL2 中定义的 var x 设置为从应用程序传递的值。x = appVar1a；y = appVar2。

现在，当我尝试在 DLL1 上运行某些东西时，x 和 y 的值神秘地变成了 else 。

x 现在变成 appVar2 并且 y 是空白的。

这里 x、y 以及应用程序在 InitDLL 函数中传递的所有变量（如 appVar1 等）都是 BSTR 的。

我通过代码... x,y 在 InitDLL1 中正确设置为 appVar1,appVar2。但是一旦这个函数返回并且我们正在初始化第二个 DLL (InitDLL2)，情况就会改变。

有趣的是，我在 DLL2 中没有看到任何此类问题..即使代码/逻辑非常相似....除了它调用的接口。

在 DLL1 和 DLL2 中，在 InitDLL 函数中，我们创建了一个新线程，我们在各种函数中使用 x 和 y。由于上述问题，DLL1 总是失败..DLL2 没有问题。

关于什么可能出错的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:28:02.870

您不能只分配 BSTR，您需要复制它。这是问题所在：

```
// caller - by COM memory management rules, for [in] parameters
// caller needs to allocate and free the memory
BSTR str = SysAllocString("..."); // string is allocated
comObjectPtr->Init(str);          // in the function, pointer is copied to global
SysFreeString(str);               // string released, pointer points to garbage

// callee
ComObject::Init(BSTR str)
{
    // wrong code!!! you have no idea about lifetime of str,
    // so you can't just assign it. When the caller function
    // exits, string memory is released and your global is thrashed
    // I suspect you use some BSTR wrapper (bstr_t or CComBSTR) so
    // you don't see the deallocation part and that's why the values
    // are invalidated on function exit: the destructor of BSTR wrapper
    // does its job
    global_str = str;             

    // correct code:
    // global_str = SysAllocString(str);
} 
```

# memory - Zeromq 内存泄漏 (pyzmq)

> ID：13696725
> 
> 赞同：0
> 
> 时间：2012-12-04T05:35:11.050
> 
> 标签：memory, python-2.7, zeromq, pyzmq

您好我正在尝试使用呼吸机/工作人员/接收器模式使用 ZeroMQ 发送大数据包。

我尝试添加工人。每次，sink 进程内存使用量都会增加一点。然后它在大约 6 或 7 名工人时达到一个临界点，突然内存呈指数增长，直到它死于：

```
> *** error: can't allocate region
> *** set a breakpoint in malloc_error_break to debug Assertion failed: (msg_->flags | ZMQ_MSG_MASK) == 0xff (zmq.cpp:211)
> Python(42410,0xaccb8a28) malloc: *** mmap(size=3559424) failed (error
> code=12) 
```

这是代码（仅显示工作器/接收器模式）：

```
import sys
import resource
import zmq
import time

context = zmq.Context()

if sys.argv[1] == 'worker':
    # Socket to send messages to

    sender = context.socket(zmq.PUSH)
    sender.connect("tcp://localhost:5558")

    while True:
        msg = 'x' * 3559333
        time.sleep(.01)
        sender.send(msg)
else:
    # Socket to receive messages on

    receiver = context.socket(zmq.PULL)
    receiver.bind("tcp://*:5558")
    while True:
        msg = receiver.recv()

        print msg[0:5], len(msg), resource.getrusage(resource.RUSAGE_SELF).ru_maxrss 
```

这仅仅是缺乏硬件资源吗？数据积压？或者有没有办法避免这种情况？

我正在运行具有 16gb 内存的 OSX Mountain Lion 和具有 zmq 2.2.0.1 的 Python 2.7。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:56:44.297

> 这仅仅是缺乏硬件资源吗？

好吧，让我们算一下。每个工作人员每 10 毫秒发送 3.3MB。或大约每秒 300mb。现在你添加了更多的工人。当您最多有 5 个工作人员时，您每秒发送大约 1.5GB。

我认为您已经找到了机器的性能限制。当 sink 进程与所有 worker 在同一台机器上运行时，它每秒能够消耗 1-2GB 之间的数据。当数据进入的速度比接收器进程中队列的建立速度快于它们被清空的速度时，您就会耗尽内存。

> 或者有没有办法避免这种情况？

发送较小的消息？不那么频繁？:) 或者将工人和接收器进程放在不同的机器上。请记住，工作人员正在从接收器中窃取 CPU 资源。如果这是一台四核机器，那么在接收器加上多达 3 个工作人员的情况下，操作系统可能会将几乎所有的处理器核心分配给每个进程。

一旦添加了第 4、5、6 个 worker，操作系统就无法将 100% 的核心分配给任何进程。他们必须开始共享，因此即使消息速度加快，接收器也会变慢。这将解释您所看到的内存使用量呈指数增长的临界点。

嗯 - 这表明了一个有趣的实验。你能配置你的mac，让sink进程以非常高的优先级运行吗？这可能会带来更好的结果。我自己从未尝试过，但请参阅以下链接以获取想法... [https://discussions.apple.com/thread/1491812?start=0&tstart=0](https://discussions.apple.com/thread/1491812?start=0&tstart=0)

# android - ListView 内的 Horizo ntalScrollView

> ID：13696728
> 
> 赞同：4
> 
> 时间：2012-12-04T05:35:37.013
> 
> 标签：android

我正在尝试在 ListView 中制作水平滚动视图。我有 ListView 工作，但将数据放入 Horizo​​ntalscrollview(HSV) 对我来说不起作用。请指教！（我对列表视图进行了编码，经过测试，现在尝试添加一个水平滚动视图）

HSV 将适用于每个列表项。

所以基本上对于我如何处理这个问题的逻辑：我有我的 listview 适配器，我决定将 HSV 放在适配器内，以便它循环遍历每个 listItem 并在其中放置一个 HSV。

我的 Xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:baselineAligned="false"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <LinearLayout
    android:orientation="vertical"
    android:layout_width="0dip" android:layout_weight="1"
    android:layout_height="fill_parent">

        <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txtProjectName" />

        <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txtProjectDescription" />

        <HorizontalScrollView
            android:layout_width="wrap_content"
            android:layout_height="match_parent" >

            <LinearLayout 
                android:id="@+id/projectTasks"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal">
                <TextView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/txtProjectTasks" />

            </LinearLayout>

        </HorizontalScrollView>
    </LinearLayout>
</LinearLayout> 
```

然后我创建了一个自定义适配器来运行所有项目。

```
public class ProjectListAdapter extends ArrayAdapter<Projects> {

int resource;
String response;
Context context;
ArrayList<Tasks> taskArray = null;

// Initialize adapter
public ProjectListAdapter(Context context, int resource,
        List<Projects> items) {
    super(context, resource, items);
    this.resource = resource;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LinearLayout projectView;

    // Get the current project object
    Projects project = getItem(position);
    //
    // Inflate the view
    if (convertView == null) {
        projectView = new LinearLayout(getContext());
        String inflater = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater vi;
        vi = (LayoutInflater) getContext().getSystemService(inflater);
        vi.inflate(resource, projectView, true);
    } else {
        projectView = (LinearLayout) convertView;
    }

    TextView PROJECT_NAME = (TextView) projectView
            .findViewById(R.id.txtProjectName);
    TextView PROJECT_DESCRIPTION = (TextView) projectView
            .findViewById(R.id.txtProjectDescription);

    PROJECT_NAME.setText(project.getNAME());
    PROJECT_DESCRIPTION.setText(project.getDESCRIPTION());
    taskArray = new ArrayList<Tasks>();
    taskArray = (ArrayList<Tasks>) project.getTasks();

    for (Tasks tasks : taskArray) {
        HorizontalScrollView TASKS = (HorizontalScrollView) projectView
                .findViewById(R.id.projectTasks);
        LinearLayout taskLayout = (LinearLayout) projectView
                .findViewById(R.id.projectTasks);
        TextView taskTxt = (TextView) projectView
                .findViewById(R.id.txtProjectTasks);
        taskTxt.setText(tasks.getTASK_ID());
        taskLayout.addView(taskTxt);

    }
    return projectView;
} 
```

}

最后一段代码是适配器循环生成 HSV 的地方，但有些东西不能按我的意愿工作，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:54:44.200

请按照以下链接在 ListView 中使用 HSV：http: [//www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)

或者

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean handled = mGesture.onTouchEvent(event);
    return handled;
}
Then, add the following code which will decide to steal the event from the item children and give it to our onTouchEvent, or let it be handled by them.

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    switch( ev.getActionMasked() ){
        case MotionEvent.ACTION_DOWN:
             mInitialX = ev.getX();
             mInitialY = ev.getY();             
             return false;
        case MotionEvent.ACTION_MOVE:
             float deltaX = Math.abs(ev.getX() - mInitialX);
             float deltaY = Math.abs(ev.getY() - mInitialY);
             return ( deltaX > 5 || deltaY > 5 );
        default:
             return super.onInterceptTouchEvent(ev);
    }
}
Finally, don't forget to declare the variables in your class:

private float mInitialX;
private float mInitialY; 
```

资料来源：[Android 中的水平 ListView？](https://stackoverflow.com/questions/3240331/horizontal-listview-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:04:01.130

在您的代码中，此行不正确，您正在创建一个新的 linearLayout 但它不是来自您的自定义视图：

```
projectView = new LinearLayout(getContext()); 
```

所以试试这个：

```
View projectView = convertView;

// Inflate the view
if (projectView == null) {
    String inflater = Context.LAYOUT_INFLATER_SERVICE;
    LayoutInflater vi;
    vi = (LayoutInflater) getContext().getSystemService(inflater);
    projectView = vi.inflate(resource, false);
} 
```

并将您的 projectView 定义为 View，而不是 LinearLayout。

# jquery - 如何在 ajax 函数处理过程中显示加载图像？

> ID：13696732
> 
> 赞同：1
> 
> 时间：2012-12-04T05:35:59.197
> 
> 标签：jquery, ajax, progress-bar

以下是我的 ajax 函数，它将在按钮单击时填充 html div。现在我想要的是如何在此函数启动时显示加载器图像，并且在此函数执行后加载器将隐藏。

```
function campaignList(){
        $.ajax({
            type:'post',
            url:'<%=campaignListURL.toString()%>',
            data:{},
            success:function(data){
                $(".main_content").html(data);                              
            }
        });
    } 
```

我曾尝试使用以下脚本

```
<script type="text/javascript">
$("#loading_layer").ajaxStart(function(){
       $(this).show();
     });
</script> 
```

但没有任何反应.. 以下是我的 div，其中有 ajax 加载程序 gif 图像，我想隐藏和显示

```
<div id="loading_layer" style="display: none"> 
```

///////////////////////////////////////// //////////////////////////////////////////////////////////////////////////////////////////////////////////////////那我怎么能做到这一点..？

以下是我提交表单的一个 javascript 的代码行

{一些用于表单验证的 javascript 代码，如果所有验证都为真，那么标志将为真.....

```
 if (flag == true) {
    div.style.display = '';
 alert("");
    document.editadform.submit();
    }
         div.style.display = 'none';
        return flag; 
```

}

以下是我的一个 div，我想在提交表单时显示隐藏，完成后我想隐藏

" />

所以任何人都可以指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T05:38:29.117

您可以通过添加`beforeSend`AJAX 脚本来完成，

看看 jquery Ajax 文档，[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
function campaignList(){
        $.ajax({
            type:'post',
            url:'<%=campaignListURL.toString()%>',
            data:{},
            beforeSend: function ( xhr ) {
               //Add your image loader here
            },
            success:function(data){
                $(".main_content").html(data);                              
            }
        });       

 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T05:38:25.283

这应该可以正常工作：

```
function campaignList(){
        $(".main_content").html("<img src='loader.png'>"); // show the ajax loader
        $.ajax({
            type:'post',
            url:'<%=campaignListURL.toString()%>',
            data:{},
            success:function(data){
                $(".main_content").html(data);  // this will hide the loader and replace it with the data                            
            }
        });
    } 
```

# ruby-on-rails - 单元测试隔离：1行代码20行测试？

> ID：13696735
> 
> 赞同：3
> 
> 时间：2012-12-04T05:36:16.090
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing, rspec

据我了解，在单元测试中，[方法应该与其依赖项隔离](http://c2.com/cgi/wiki?UnitTestIsolation)，这样它们就不会受到环境变化的影响。

尽管如此，删除所有依赖项让我觉得我正在测试实现而不是行为。

换句话说，通过隔离依赖关系，我将我的测试与实现细节耦合起来。因此，任何[代码重构](http://en.wikipedia.org/wiki/Code_refactoring)都会导致测试失败，即使行为（期望的结果）没有改变。

例如，这是一个简单的 (Ruby) 方法：

```
 def send_request
    update_attributes(response.page_params) if active?
  end 
```

这些是我对这行代码的两个独立测试：

```
 let(:page) { Page.new }

  describe '#send_request' do
    context 'when a page is active' do
      it 'updates page with the response parameters' do
        page.active = true
        response = double('response')
        page_params = double('page_params')
        response.stub(:page_params).and_return(page_params)
        page.stub(:response).and_return(response)
        page.stub(:update_attributes).and_return(nil)
        page.should_receive(:update_attributes).with(page_params)
        page.send_request
      end
    end
    context 'when a page is inactive' do
      it 'does NOT send a request' do
        page.active = false
        page.should_not_receive(:response)
        page.send_request
      end
    end
  end 
```

测试通过了，但我发现了一些严重的问题：

*   如果稍后我决定使用 update_attributes() 以外的任何其他方法将更改保存到数据库中，我的测试将失败，即使数据将按预期保存
*   如果 response.page_params 的实现发生变化，我的软件将在生产中失败，但测试仍将通过

我一定做错了什么。

编写单元测试的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:45:38.287

正如 AlistairIsrael 所说，我认为您在这里并没有完全偏离标准。

您可以进行一些优化以使其更简洁。一个好的测试应该清楚地显示您对代码的期望。

```
let(:page) { Page.new }

describe '#send_request' do
  context 'when a page is active' do
    it 'updates page with the response parameters' do
      page.active = true
      response = double('response',
        :page_params => page_params = mock('page_params')
      )

      # not needed as .should_receive creates a nil stub by default.
      # page.stub(:update_attributes).and_return(nil)
      page.should_receive(:update_attributes).with(page_params)
      page.send_request
    end
  end
  context 'when a page is inactive' do
    it 'does NOT send a request' do
      page.active = false

      subject.should_not_receive(:update_attributes)
      page.send_request
    end
  end
end 
```

从上面的一些更改中，您可以看到 rspec 的双重助手非常强大，您可以构造复杂的对象并使用一些赋值的东西，您可以访问链中最后评估的方法。

我对负面情况做了一个假设，但你应该明白了。测试方法调用`update_attributes`可能更容易，也更清楚，因为您知道`page_params`如果处于活动状态将永远不会被调用？不满足条件。

高温高压

# c++ - OpenCV SIGSEGV C++ minGW

> ID：13696738
> 
> 赞同：0
> 
> 时间：2012-12-04T05:36:19.980
> 
> 标签：c++, opencv, segmentation-fault

即使在简单的程序中也会出现内存错误和异常。调试中的代码块 + mingw - SIGSEGV，调用堆栈 - user32.dll。运行时崩溃并出现 0xc0000005 错误。VC 也因未处理的异常而崩溃。

```
#include "opencv2/video/tracking.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv/cv.h"
#include "opencv/highgui.h"

#include <iostream>
#include <ctype.h>
#include <stdlib.h>
#include <stdio.h>

using namespace cv;
using namespace std;

int main(int argc, char* argv[])
{
    CvCapture* capture = cvCreateCameraCapture(CV_CAP_ANY); //cvCaptureFromCAM( 0 );
    assert( capture );

    IplImage* frame=0;

    cvNamedWindow("capture", CV_WINDOW_AUTOSIZE);

    int counter=0;
    char filename[512];

    while(true){

            frame = cvQueryFrame( capture );

            cvShowImage("capture", frame);

            char c = cvWaitKey(33);
            if (c == 27) { 
                    break;
            }

    }

    cvReleaseCapture( &capture );
    cvDestroyWindow("capture");
    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-03T15:23:30.323

我在您的代码中看不到任何错误。也许这是一些图书馆的错误。

但是你为什么要使用这个旧的 OpenCV 版本。使用 C++ 更容易

```
#include "opencv2/opencv.hpp"

using namespace cv;

int main(int, char**)
{
    VideoCapture cap(0); // open the default camera
    if(!cap.isOpened())  // check if we succeeded
        return -1;

    while(true)
    {
        Mat frame;
        cap >> frame; // get a new frame from camera
        imshow("frame", frame);
        if(waitKey(30) >= 0) break;
    }
    // the camera will be deinitialized automatically in VideoCapture destructor
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T05:39:25.250

您是否尝试过交换以下几行：

```
cvDestroyWindow("capture"); 
```

和

```
cvReleaseCapture( &capture ); 
```

我相信你应该`cvDestroyWindow`比之前打电话`cvReleaseCapture`。我认为窗口成为了所有者，`capture`应该首先销毁。

# php - PHP - PDO 库返回结果

> ID：13696739
> 
> 赞同：-1
> 
> 时间：2012-12-04T05:36:21.690
> 
> 标签：php, foreach, pdo

我正在尝试使用 PDO 库从我的数据库中返回一个结果，但返回我想要的唯一方法是将它放入 foreach 循环中。

这是我查询数据库和获取数据的方式。

```
<?  $query = " 
    SELECT 
        theme 
    FROM ncms_settings 
";      
try 
{
    $stmt = $db->prepare($query); 
    $stmt->execute(); 
} 
catch(PDOException $ex) 
{  
    die("Failed to run query: " . $ex->getMessage()); 
} 
$rows = $stmt->fetchAll(); ?> 
```

我如何通过执行返回数据

```
echo $rows['theme']; 
```

代替

```
<? foreach($rows as $row): ?>
   $echo $row['theme']
endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:40:39.623

如果它只返回一行 - 只需使用

```
$stmt->fetch() // returns a single row (array of fields) 
```

代替

```
$stmt->fetchAll() // returns all rows (array of arrays of fields) 
```

[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

# php - 用phpmyadmin更改mysql区分大小写

> ID：13696741
> 
> 赞同：0
> 
> 时间：2012-12-04T05:36:31.027
> 
> 标签：php, mysql, phpmyadmin

我在第三方托管服务上托管了我的应用程序，我没有可以更改 **lower_case_table_names**变量的 MYSQL 控制台。
在我的混合大小写的 php 应用程序 SQL 中（有时是示例和有时是 SAMPLE）
我运行查询
`SELECT * FROM sample;`
它工作正常但是当我运行它时
`SELECT * FROM SAMPLE;`
它会生成错误**#1146 - 表 'dbmma.SAMPLE' 不存在。**
我该如何解决？而且我认为更改我的应用程序中的所有 SQL 语句是不可行的。
如果可以，我可以从 PHPMYADMIN 更改 SQL 不区分大小写，然后如何？
存储引擎是否影响 SQL 区分大小写？我用过**InnoDB**。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:39:41.263

不。区分大小写是服务器设置；如果您无权访问 MySQL 服务器配置文件（听起来不像），则无法更改它。

# c++ - 在 OpenCV 中，设置曝光会导致我的网络摄像头软件无法自动调整曝光

> ID：13696742
> 
> 赞同：3
> 
> 时间：2012-12-04T05:36:41.100
> 
> 标签：c++, opencv, webcam, skype

当我调用该方法`cvSetCaptureProperty(capture, CV_CAP_PROP_EXPOSURE, 2);`时，它会按应有的方式设置相机的曝光。但是，当我运行我的 Dell Webcam Central 软件、Skype 或其他任何使用我的相机的软件时，曝光会停留在我在 OpenCV 程序代码中设置的最后一次曝光，并且不会像以前那样自动调整之前做过。

如何让我的网络摄像头程序（Dell Webcam Central 和 Skype）再次自动调整曝光？

这是代码：

```
#include "cv.h"
#include "highgui.h"
#include <stdio.h>
#include <iostream>

using namespace std;

int main()
{
    CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANY ); //CV_CAP_ANY
    if ( !capture )
    {
        fprintf( stderr, "ERROR: capture is NULL \n" );
        getchar();
        return -1;
    }

    cvNamedWindow( "mywindow", CV_WINDOW_AUTOSIZE );

    cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 640);
    cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, 480);

    int width = (int)(cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH));
    int height = (int)(cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT));
    IplImage* image = cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 3);

    IplImage* frame;
    char c;
    while ( true )
    {
        frame = cvQueryFrame( capture );
        if ( !frame ) 
        {
            fprintf( stderr, "ERROR: frame is null...\n" );
            getchar();
            break;
        }
        cvShowImage( "mywindow", frame );
        cvSetCaptureProperty(capture, CV_CAP_PROP_EXPOSURE, 2);
        c = cvWaitKey(33);
        if( (c & 255) == 27 ) break;
    }
    cvReleaseCapture( &capture );
    cvDestroyWindow( "mywindow" );
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:52:39.027

OpenCV 只是调用`v4l1_ioctl()`传递参数`V4L2_CID_EXPOSURE`。

您必须深入研究[V4L2 文档](http://www.linuxtv.org/downloads/legacy/video4linux/API/V4L2_API/spec-single/v4l2.html)才能弄清楚这一点。

顺便说一句，您是否尝试在销毁窗口后传递`0`值`CV_CAP_PROP_EXPOSURE`？这可能会奏效。

# c++ - 使用多维数组的递归和动态内存分配来找到 NxN 矩阵的行列式

> ID：13696750
> 
> 赞同：0
> 
> 时间：2012-12-04T05:37:17.780
> 
> 标签：c++, dynamic, recursion, determinants

我正在尝试编写一个程序，该程序可以计算任何 NxN 矩阵的行列式，而不管大小如何，但是程序有问题，并且对于任何大小大于 1 的矩阵都会崩溃。

我会非常感谢任何能告诉我我做错了什么的人。我是 C++ 和动态内存的新手，所以请放轻松（:.

这是我的程序：

```
#include <iostream>

using namespace std;

int determinant(int *matrix[], int size);
void ijMinor(int *matrix[], int *minorMatrix[], int size, int row, int column);

int main()
{
    int size;
    cout << "What is the size of the matrix for which you want to find the determinant?:\t";
    cin >> size;

    int **matrix;
    matrix = new int*[size];
    for (int i = 0 ; i < size ; i++)
        matrix[i] = new int[size];

    cout << "\nEnter the values of the matrix seperated by spaces:\n\n";
    for(int i = 0; i < size; i++)
        for(int j = 0; j < size; j++)
            cin >> matrix[i][j];

    cout << "\nThe determinant of the matrix is:\t" << determinant(matrix, size) << endl;

    return 0;
}

int determinant(int *matrix[], int size){
    if(size==1)return matrix[0][0];
    else{
        int result=0, sign=-1;
        for(int j = 0; j < size; j++){

            int **minorMatrix;
            minorMatrix = new int*[size-1];
            for (int k = 0 ; k < size-1 ; k++)
                matrix[k] = new int[size-1];

            ijMinor(matrix, minorMatrix, size, 0, j);

            sign*=-1;
            result+=sign*matrix[0][j]*determinant(minorMatrix, size-1);
            for(int i = 0; i < size-1; i++){
                delete minorMatrix[i];
            }
        }

        return result;
    }
}

void ijMinor(int *matrix[], int *minorMatrix[], int size, int row, int column){
    for(int i = 0; i < size; i++){
        for(int j = 0; j < size; j++){
            if(i < row){
                if(j < column)minorMatrix[i][j] = matrix[i][j];
                else if(j == column)continue;
                else minorMatrix[i][j-1] = matrix[i][j];
            }
            else if(i == row)continue;
            else{
                if(j < column)minorMatrix[i-1][j] = matrix[i][j];
                else if(j == column)continue;
                else minorMatrix[i-1][j-1] = matrix[i][j];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:55:25.957

由于以下原因，您`minorMatrix`由未初始化的指针组成：

```
minorMatrix = new int*[size-1];
for (int k = 0 ; k < size-1 ; k++)
    matrix[k] = new int[size-1]; 
```

`matrix[k]`应该是`minorMatrix[k]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:44:10.937

您最好使用 C/C++ 接口连接到 BLAS/LAPACK Fortran 库，这些库在此任务中做得最好。

首先是您在 O(N!) 中实现的数值方法的复杂性，更不用说您将引入的数值不稳定性；现实世界的系统（总是在下面使用 BLAS 包）通过首先将 NxN 矩阵转换为上/下三角形形式，然后找到主对角线元素的乘积来解决问题。

在经典书籍“数值食谱”或“矩阵计算”中查找参考资料。

# ruby-on-rails - Rails 应用程序部署：Web 服务器关闭。

> ID：13696751
> 
> 赞同：0
> 
> 时间：2012-12-04T05:37:18.687
> 
> 标签：ruby-on-rails, ruby, webrick

我在服务器上设置了代码和数据库。我运行命令 rails s，但是一旦我的本地系统关闭，服务器就会关闭。有没有办法让网络服务器在服务器上运行。Capistrano 可能不是必需的，因为我在服务器本身上有代码。Webrick 是当前使用的 webser。

这是第一次部署，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:59:40.750

在生产环境中使用 WEBrick 非常少见。有一个[Stack Overflow 讨论为什么](https://stackoverflow.com/questions/10859671/webrick-as-production-server-vs-thin-or-unicorn)和很多人告诉你不要在网络上太多。我真的不喜欢*“因为每个人都这么说！”* 答案，但谷歌会发现你很多很多意见。

但是，如果您的应用程序没有被广泛使用并且您的服务器上有可用资源，您可以在启动服务器时以*守护程序模式*运行：

`rails server -d`

但是，一旦开始，停止这种情况的唯一方法是获取 pid 并调用`kill`该进程：

`kill -9 thepidhere` （我发现 -9 是必要的，否则它拒绝停止）

如果你想换成另一台服务器，请查看[thin](http://code.macournoyer.com/thin/)、[Unicorn](http://unicorn.bogomips.org/)和[Nginx](http://nginx.org/)。如需大型、强大、可定制的解决方案，请查看[这篇](http://blog.codahale.com/2006/06/19/time-for-a-grown-up-server-rails-mongrel-apache-capistrano-and-you/)关于 Apache 和 Mongrel 的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:43:31.833

**`thin`**尝试在服务器上运行您的应用程序。

写`gem 'thin'`在你的gemfile中。不如 写
吧。 除非你写，否则你的服务器不会停止`bundle install`
**`thin start`**`rails s`
**`thin stop`**

我认为以上内容对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:04:09.753

您必须创建一个守护进程，以便即使没有使用命令 rails s 打开本地终端，它也可以运行。尝试类似 rails s -d 的东西。您还可以安装乘客并编写乘客启动 -d 或瘦并编写 rails s -d。

为了更好的部署，如果您使用上述独立方式运行应用程序，则添加一个初始化脚本以自动启动应用程序是一个好主意。

# shell - 如何回显相同的字符直到行尾

> ID：13696753
> 
> 赞同：4
> 
> 时间：2012-12-04T05:37:23.833
> 
> 标签：shell, echo

我想回显字符“=”直到行尾，而与 shell 脚本的终端窗口大小无关

我可以这样做：

```
echo -e "\e[1;35;40m =======================================================================================\e[0m" 
```

但这只是一条随机线。我希望角色重复直到行尾。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T05:42:34.257

```
for i in $(seq 1 $(stty size | cut -d' ' -f2)); do 
  echo -n "=" 
done 
```

# parallel-processing - Matlab GPU Computing：将矩阵作为一个单元进行处理

> ID：13696754
> 
> 赞同：2
> 
> 时间：2012-12-04T05:37:28.523
> 
> 标签：matlab, parallel-processing, gpgpu, matlab

我有一个名为`fun`实现如下的函数：

```
function result = fun( number , matrix)
 result = var( mean(matrix) + number ); // any processing not that exactly
end 
```

使用[matlab](/questions/tagged/matlab "显示标记为“matlab”的问题") `parallel Computing toolbox`，我想将它分布在 GPU 上一组具有相同矩阵的数字上，如下面的代码：

```
mat = magic(10);
numbers = 1:5;
gMat = gpuArray(mat);
gNumbers = gpuArray(numbers);
result = arrayfun(@fun,gNumbers,gMat); // Error here 
```

如果有人可以为这个问题提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:14:10.017

在最初提出的情况下，您可以在 GPU 上使用 MATLAB 的[BSXFUN](http://www.mathworks.com/help/distcomp/bsxfun.html)。（不能以这种方式解决已编辑的问题。）

```
mat = magic(5);
numbers = 1:5;
gMat = gpuArray(mat);
gNumbers = gpuArray(numbers);
result = bsxfun(@rdivide, gMat, gNumbers); 
```

请注意，我`@rdivide`直接使用而不是调用单独的函数 - 您不需要这样做，但它会使事情变得更短。您还可以像这样使用匿名函数：

```
bsxfun(@(x,y) x./y, gMat, gNumbers) 
```

# regex - 正则表达式 PCRE，带有 a、b 的字母，应该匹配没有连续字符的单词

> ID：13696757
> 
> 赞同：2
> 
> 时间：2012-12-04T05:37:45.690
> 
> 标签：regex

例如，我正在尝试构建一个应该匹配的正则表达式。

```
b
abab
babab 
```

但不是

```
bb
babb
aaaba
abaaba 
```

目前我有`a(b)|b(a)`并且它正在为`abab`. 我缺少第一个和最后一个字母，例如`b`or `babab`。

所以我需要`a`单独或`b`单独或在单词末尾指定一个字母（如果它之前的字母不是它本身）。但我不知道该怎么做。

我正在使用[http://www.rexv.org/](http://www.rexv.org/) (Perl PCRE) 来尝试它。

谢谢大家，但我忘了提：空字符串也可以匹配，我只能使用以下

```
* ? +

|

()

. 
```

多谢你们！，

[我想如果不能在http://www.rexv.org/](http://www.rexv.org/)上指定字符串的开头和结尾以使其正常工作是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:48:16.943

尝试这样的事情：

```
^((?:(?:ab)*a?)|(?:(?:ba)*b?))$ 
```

解释：

```
^(                   # beginning of the string
    (?:
        (?:ab)*      # matches any repeating `ab` group
        a?           # group can optionally end with an `a`
    )
    |
    (?:
        (?:ba)*      # matches any repeating `ba` group
        b?           # group can optionally end with a `b`
    )
)$                   # end of the string 
```

`(?:`我使用围绕整个正则表达式的完整捕获组将子组包括为非捕获与领先。这将确保只返回匹配的完整字符串，而不是每个子组的噪声。

这种方法的警告是“空”字符串也将匹配。

**更新**（有限的字符集）
您的有限字符集仍然适用于我上面的模式，但是，我们需要删除不匹配的组部分（`?:`）。正则表达式将最终为：

```
(((ab)*a?)|((ba)*b?)) 
```

上面提到的警告是它也会匹配一个空字符串，但是，这似乎是你需要的，所以我们可以将它添加到奖励列表中！

允许使用的字符集的一个小问题是，不允许使用`^`和`$`分别表示字符串的开始和结束的字符。这样做的问题是，任何匹配的*子模式*（无论您使用什么正则表达式）都会将输入标记为有效。我假设这是考虑到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:47:56.737

**编辑： -**

如果你不想使用`look-ahead`和`look-behind`断言，你可以使用这个正则表达式： -

```
"b?(ab)*|a?(ba)*"  // Will also match `empty string` 
```

**解释 ： -**

```
b?   // 0 or 1 b
(    // capture group. 
  ab // Match ab
)*   // group close `0 or more repetition

|

a?(ba)*  // Same with `a` replaced with `b`, and `b` with `a` 
```

* * *

**旧答案：-**

使用这个正则表达式： -

```
"((?<!a)a|(?<!b)b)*"   // This will also match empty string 
```

它匹配`a`前面没有另一个`a`. 对`b`.

```
(            // Capture group
    (?<!     // Negative Look-behind assertion
        a    // on a
    )
     a       // Match a

    |        // or

    (?<!     // Negative Look-behind assertion
        b    // on b
    )
     b       // Match b
)                 // Close capture group
+  // 1 or more repetition 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:57:33.480

不要构建复杂的匹配正则表达式，而是使用简单的正则表达式来匹配重复字符并使用相反的：

```
 String stringToMatch = "babaab";
    Pattern p1 = Pattern.compile("^[ab]+$");//match the a`s and b`s kind of string
    Pattern p2 = Pattern.compile("([ab])\\1+");//match the repeating a`s and b`s
    Matcher m1 = p1.matcher(stringToMatch);
    Matcher m2 = p2.matcher(stringToMatch);
    if (m1.find() && !m2.find()){//validates it has a's and b's but not repeating
       //valid string
    } 
```

要匹配任何单词字符，只需使用：`(\\w)\\1+`。这是其中最好的部分。**简单且可扩展以涵盖更多字符集，例如 abcdabcd 等。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:11:46.150

试试这个：

```
^((b?(ab)*a?)|(a?(ba)*b?))$ 
```

这假设您的字母表仅限于`{a, b}`.

# html - 使用图像文件作为菜单文本

> ID：13696758
> 
> 赞同：0
> 
> 时间：2012-12-04T05:37:48.140
> 
> 标签：html, css, image

我有一张图片是背景图片，它会拉伸整页

它还有一个菜单栏（没有文字）

我有四个文本图像文件（关于、家庭等）

我想将它们放在背景图像的顶部

但是当我这样做时，如果我不在全屏模式下，它们会调整菜单栏的大小

这是我到目前为止所拥有的，如果有更简单的方法，请告诉我

```
 <html>
    <style> 
     body
     { 
        background: url("http://imageshack.us/a/img84/4772/backgroundnomenutext.png")
                    no-repeat scroll;
        background-size: 100% 100%;
        min-height: 700px; 
     }
    </style>
    </head>
    <body>
     <div style="position:relative">

      <a href="http://www.google.com">
       <img src="http://imageshack.us/a/img835/7200/homefw.png"

        style = "position:absolute; top: 160px; left: 100px;"/>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:13:41.547

尝试以百分比而不是像素为`img`标签提供顶部和左侧值，这将使它们（`div`和`img`）看起来附加。

```
img
{
  top : /* In percentages */
  left: /* In percentages */
} 
```

检查这个**[小提琴](http://jsfiddle.net/MtKWa/)**

**或者**使用固定的宽度和高度

检查这个[**小提琴**](http://jsfiddle.net/MtKWa/2/)

```
<html>
 <head>
   <style> 
     body
     { 
        background: url("http://imageshack.us/a/img84/4772/backgroundnomenutext.png")
                no-repeat scroll;
        background-size: 1024px 768px;
        min-height: 700px; 
        max-width:1024px;
        min-width:700px;
     }
     img 
     { 
        position:absolute; 
        top: 180px; 
        left: 300px; 
     }
  </style>
</head>
<body>

 <div>
    <a href="http://www.google.com"  >
       <img src="http://imageshack.us/a/img835/7200/homefw.png"/>
    </a>
 </div>

</body>
</html>​ 
```

希望这可以帮助..

# android - 使用 HTML 渲染的 Android WebView

> ID：13696759
> 
> 赞同：1
> 
> 时间：2012-12-04T05:37:50.103
> 
> 标签：android, html, css, webview

当我在 webview 上显示并隐藏时，它总是在屏幕上保持碎片，直到我触摸屏幕。例如，当点击一个按钮时，显示一个div，然而，这个div并没有完全显示，它只显示一半，如果我触摸屏幕，左边部分显示。然后，当点击按钮让这个div隐藏时，它没有完全隐藏，它只隐藏一部分，屏幕上的剩余部分直到我触摸屏幕，左侧部分消失了。

```
1\. I use jquery show() and hide() method to show and hide the div
2\. I have enabled hardware accelerate
3\. I have set webview render priority as HIGH.

would you please give me some suggestions, thank you. 
```

实际上，这是来自此[链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/UzWMukIo4xg)的帖子，我刚刚遇到了同样的问题。

在我的项目中，我得到了一个包含两个按钮的 div。在某些情况下，我还必须显示/隐藏 div。更具体地说，固定定位用于将 div 固定在浏览器底部，就像页脚一样。这是div的css。

```
[id^="btns_div"]{
position: fixed;
bottom: 5px;
left: 10px;
z-index: 3;
background-color:#eeeeff;
width: 90%;
height: 10%;
font-size:20px;
display: none;
} 
```

我尝试了许多不同的机制来避免这个渲染问题。我只是发现只有在分配 css:bottom 时才会出现问题。没有它，没有渲染问题，但位置错误。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:28:56.763

以我的经验，在使用 DOM 的页面的 web 视图上的完整硬件加速目前会导致数百万个问题。我做了很多测试试图找到一个可能的根本原因，但如果 Google / Chromium 不能自己工作，我们似乎无能为力。

硬件加速导致屏幕以完全不同的方式呈现，使用“显示列表”。作为一个非常便宜的简历，这种技术有成千上万的好处，但并不擅长检测非预期的更新，因此用户必须牢记这一点并“使”渲染“无效”。

这对于 Java 应用程序来说非常好，因为您在操作所在的位置进行编程，但是当您插入 web 视图时，事情开始变得复杂。请谷歌显示列表以获得扩展解释，了解这些事情发生的原因真的很值得。

因此，根据我的经验，我必须始终禁用 webview 的硬加速。我时不时地尝试新的 android 版本等等，但情况根本没有改善。

如果有人有更好的消息，请告诉！干杯。

# asp.net - asp.net findcontrol方法返回null

> ID：13696770
> 
> 赞同：1
> 
> 时间：2012-12-04T05:38:41.597
> 
> 标签：asp.net

我在按钮单击事件上创建一些动态文本框，在另一个按钮单击上我想使用 findcontrol 方法获取该文本框的数据

```
 public void addDepartmentBtn_Click(object sender, EventArgs e)
    {

        int count = Convert.ToInt32(countTxtBx.Text);
        lblErrorMsg.Text = "";
        if (Convert.ToInt32(countTxtBx.Text) <= 5)
        {

            for (int i = 0; i < count; i++)
            {
                Label lb = new Label();
                TextBox tb = new TextBox();

                tb.ID = "Textbox_" + i;
                lb.ID = "Label_" + i;
                lb.Text = "Enter Departnment Name: " + Convert.ToInt32(i + 1);
                pnlMain.Controls.Add(new LiteralControl("<br>"));
                pnlMain.Controls.Add(lb);
                pnlMain.Controls.Add(new LiteralControl("&nbsp&nbsp"));
                pnlMain.Controls.Add(tb);
                pnlMain.Controls.Add(new LiteralControl("<br><br>"));
                lblErrorMsg.Text = Convert.ToInt32(i + 1) + "  Departments Created Successfully";
                //string str = string.Empty;
                //TextBox myTB = (TextBox)pnlMain.FindControl("Textbox_" + i);
                //str = myTB.Text;
                //Response.Write(str);

            }

        }
        else
        {
            lblErrorMsg.Text = "You cannot create more than 5 Departments at once:";
        }
    } 
```

在按钮 2 上单击：

```
 protected void Button2_Click(object sender, EventArgs e)
        {
            string alltextdata = null;
            for (int i = 0; i < 5; i++)
            {
                Control controltxt = FindControl("Textbox_"+i);
                if (controltxt != null)
                {
                    TextBox txttemp = (TextBox)controltxt;
                    alltextdata = txttemp.Text;

                }
            }

        } 
```

但是我的查找控制方法总是显示 null 我检查了我的 html 页面视图源，它显示了所有正确的东西我的文本框名称和 id 是“Textbox_0”，Textbox_1 等

我做错了吗？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:54:43.530

当您动态添加控件时，它不会在回发（button2 回发）之后添加到控件树中。单击 addDepartmentBtn 后，您需要在任何回发的 Page_Load 事件中再次添加它。

保存在 ViewState 中单击的按钮并在 Page_Load 中检查它：

```
public void addDepartmentBtn_Click(object sender, EventArgs e)
    {
        ViewState["addDepartmentBtn_Clicked"] = true;
        AddTextBoxes();
    }

protected void Page_Load(object sender, EventArgs e)
{
    if (Convert.ToBoolean(ViewState["addDepartmentBtn_Clicked"]) == true)
        AddTextBoxes();
}

public void AddTextBoxes()
{
int count = Convert.ToInt32(countTxtBx.Text);
        lblErrorMsg.Text = "";
        if (Convert.ToInt32(countTxtBx.Text) <= 5)
        {

            for (int i = 0; i < count; i++)
            {
                Label lb = new Label();
                TextBox tb = new TextBox();

                tb.ID = "Textbox_" + i;
                lb.ID = "Label_" + i;
                lb.Text = "Enter Departnment Name: " + Convert.ToInt32(i + 1);
                pnlMain.Controls.Add(new LiteralControl("<br>"));
                pnlMain.Controls.Add(lb);
                pnlMain.Controls.Add(new LiteralControl("&nbsp&nbsp"));
                pnlMain.Controls.Add(tb);
                pnlMain.Controls.Add(new LiteralControl("<br><br>"));
                lblErrorMsg.Text = Convert.ToInt32(i + 1) + "  Departments Created Successfully";
                //string str = string.Empty;
                //TextBox myTB = (TextBox)pnlMain.FindControl("Textbox_" + i);
                //str = myTB.Text;
                //Response.Write(str);

            }

        }
        else
        {
            lblErrorMsg.Text = "You cannot create more than 5 Departments at once:";
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:58:49.760

在调用 findcontrol 方法之前，您必须再次加载该控件，因为它是在每次回发时动态创建的。这些不像我们在 Page_Init 下创建的静态控件。在 Page_Load 事件下创建动态控件。

# z3 - Z3中的declare-fun和define-fun不能一起工作？

> ID：13696777
> 
> 赞同：0
> 
> 时间：2012-12-04T05:39:07.563
> 
> 标签：z3, theorem-proving

我需要对数组的长度进行建模。所以我声明了一个函数

```
(declare-fun LEN ((Array Int Int)) Int) 
```

同时，我想定义一些使用`define-fun`.

但是，当我在 Z3 上进行了一些测试时，似乎`define-fun`并`declare-fun`不能存在于同一个源文件中？

如下代码可以正常工作：

```
(define-fun mymax ((a Int) (b Int)) Int
  (ite (> a b) a b))

(assert (= (mymax 100 7) 100))
(check-sat) 
```

（来源：[http](http://rise4fun.com/Z3/jRzs) ://rise4fun.com/Z3/jRzs ）

但是下面，不管`LEN`插入到哪里，都会出现错误：

```
;(declare-fun LEN ((Array Int Int) Int) 
;unknown sort 'assert'  
(define-fun mymax ((a Int) (b Int)) Int
  (ite (> a b) a b))
; (declare-fun LEN ((Array Int Int) Int) 
;unknown sort 'assert'
(assert (= (mymax 4 7) 7))
; (declare-fun LEN ((Array Int Int) Int) 
;;unknown sort 'check-assert'
(check-sat)
;(declare-fun LEN ((Array Int Int) Int) 
 ;invalid sort, symbol, '_' or '(' expected 
```

（来源：[http](http://rise4fun.com/Z3/HdEy) ://rise4fun.com/Z3/HdEy ）

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:27:02.307

`declare-fun`并且`define-fun`可以一起使用。问题是您缺少括号。它应该是

```
(declare-fun LEN ((Array Int Int)) Int) 
```

代替

```
(declare-fun LEN ((Array Int Int) Int) 
```

由于缺少括号，第二个实际上是声明一个`LEN`带有两个参数（数组和整数）的函数，然后 Z3 在找到此声明的结果排序时会生成错误。

这是完整示例的链接：[http ://rise4fun.com/Z3/TjNS](http://rise4fun.com/Z3/TjNS)

# php - 从本地系统连接到 EPP 服务器

> ID：13696779
> 
> 赞同：-1
> 
> 时间：2012-12-04T05:39:11.823
> 
> 标签：php, fsockopen, epp

我正在使用 fsock open 连接到 epp 服务器，但它失败了。下面是我的代码：（我在这里给出了错误的输入值。）

```
$whoisserver = "epp-test.verisign-grs.net";
$port = 123;
$timeout = 40;

$fp = @fsockopen($whoisserver, $port, $errno, $errstr, $timeout) or die("Socket Error " . $errno . " - " . $errstr);

$out = "";
while(!feof($fp)){
    $out .= fgets($fp, 128);
}

fclose($fp);

echo "<br> result <pre>\n" . $out . "\n</pre>\n <br>"; 
```

以下是我得到的错误：

```
Socket Error 10060 - A connection attempt failed because the connected party 
did not properly respond after a period of time, or established connection
failed because connected host has failed to respond. 
```

Epp 服务器响应连接。但连接失败。

我也使用过 CURL，但在使用 curl 时没有得到任何响应：（此处输入错误）

```
$ch = curl_init();

// set URL and other appropriate options 
curl_setopt($ch, CURLOPT_URL, "epp-test.verisign-grs.net"); 
curl_setopt($ch, CURLOPT_PORT, 123); 
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);

 $res = curl_exec($ch); 
 echo "response is:<br>".$res."<br>";
 print "len[".strlen($res)."]\n"; 
 curl_close($ch); 
```

注意：当我从命令行对 epp 服务器执行 ping 操作时。Ping 命令成功，我收到了来自 epp 服务器的回复。

如果我做错了什么？

我们不能从本地系统到 epp 服务器吗？

是否必须使用 SSL 连接到 epp 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T16:19:20.943

你从哪里得到的数据、服务器和端口？EPP 端口是 700，您可以在技术上对其进行测试

```
openssl s_client -connect epp-test.verisign-grs.net:700 
```

但是威瑞信不允许在没有事先达成特殊协议并在他们这边为您建立防火墙规则的情况下连接到他们的服务器。

如果你只是在玩 EPP 并尝试调试你的脚本，你可能会考虑使用 CentralNIC，但你必须先向他们询问用户名和密码。

对于简单的“问候测试”，您可以使用：

```
openssl s_client -connect epp-ote.centralnic.com:700 
```

同样，这不能通过 curl 工作。它可能在 PHP 中使用“ssl://epp-ote.centralnic.com”作为您的第一个参数。但是如果不先阅读 EPP 规范，您将无法摆脱 feof($fp) 和其他代码：

*   [http://www.ietf.org/rfc/rfc5730.txt](http://www.ietf.org/rfc/rfc5730.txt)
*   [http://www.ietf.org/rfc/rfc5731.txt](http://www.ietf.org/rfc/rfc5731.txt)
*   [http://www.ietf.org/rfc/rfc5732.txt](http://www.ietf.org/rfc/rfc5732.txt)
*   [http://www.ietf.org/rfc/rfc5733.txt](http://www.ietf.org/rfc/rfc5733.txt)
*   [http://www.ietf.org/rfc/rfc5734.txt](http://www.ietf.org/rfc/rfc5734.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T19:12:23.497

[根据RFC5734](https://www.rfc-editor.org/rfc/rfc5734.txt)，对于 EPP，TLS 确实是强制性的：

> 当在 TCP 上分层时，传输层安全 (TLS) 协议版本 1.0 [RFC2246] 或其后续版本（例如 TLS 1.2 [RFC5246]），使用双方支持的最新版本，必须用于提供完整性、机密性和相互强客户端-服务器身份验证。

# php - 实时评分

> ID：13696787
> 
> 赞同：-3
> 
> 时间：2012-12-04T05:39:50.950
> 
> 标签：php, jquery, mysql, json

我正在创建一个实时评分网站。关于如何在一个页面上显示我的游戏记分牌，我遇到了难题。我想用来`jquery/javascript`从文件中提取数据`JSON`并从中创建多个表。

这是我的`JSON`文件的内容。

```
{"basketball_scores":[
    ["basket001","15","12","7","34","10","12","4","26"],
    ["basket002","10","15","5","30","5","10","5","20"],
    ["basket003","3","4","2","9","4","6","10","20"],
    ["basket004","2","6","2","10","5","3","4","12"]
]} 
```

我希望能够创建 4 个自动填充每个游戏的行和列的表。

这是我想显示的方式：

```
matchup  half1  half2  ot  final 
home     15     12     7   34 
away     10     12     4   26 
```

那将是一张桌子。我想在该领域的其余部分继续这样做。

游戏数量未知，我以 4 为例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:40:03.460

Ajax polling is not realtime. Realtime is when something changes in you database, push that data into website, web page or whatever.

1.  some script receives new data
2.  you insert that data into db
3.  you push that data into page

you need [Strophe library](http://strophe.im) for this and some [php XMPP class](http://code.google.com/p/xmpphp/) if you are using php. Every other language also have libraries for manipulating xmpp messages.

Of course this is easier said then done. [This is the boo](http://professionalxmpp.com/)k on this metter. If you are looking for finished solution then skip all that I said.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:49:04.497

您应该使用[Jquery Ajax](http://api.jquery.com/jQuery.ajax/)来查询您是后端的`JSON`数据（您想要的），并且您可以`success`使用`jquery.ajax`.

# c - do-while循环中的scanf

> ID：13696788
> 
> 赞同：0
> 
> 时间：2012-12-04T05:39:51.027
> 
> 标签：c, scanf, do-while

我想知道为什么当我只要求两个参数时我的 scanf 会继续运行？

```
do {
    scanf("%f %f\n", &a,&b);
    printf("a=%f; b=%f;\n",a,b);
    printf("f(a)=%f; f(b)=%f; f(a)*f(b)=%f;\n",f(a),f(b),f(a)*f(b));
}
while(a>=b || f(a)*f(b)>=0); 
```

* * *

```
1
2
3
a=1.000000; b=2.000000;
f(a)=-3.281718; f(b)=-0.610944; f(a)*f(b)=2.004947;
1 5
a=3.000000; b=1.000000;
f(a)=10.085535; f(b)=-3.281718; f(a)*f(b)=-33.097884; 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:42:14.263

```
scanf("%f %f \n ", &a,&b); 
```

最后的 \n 使 scanf 忽略第一个换行符，否则该换行符会终止输入。

这将正常工作：

```
 scanf("%f %f ", &a,&b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:49:00.670

从 scanf 中删除 \n。scanf("%f %f", &a,&b);

# bison - “.output”文件中的“$@n”变量是什么？

> ID：13696789
> 
> 赞同：0
> 
> 时间：2012-12-04T05:39:56.613
> 
> 标签：bison

我来自野牛的“.output”文件有许多变量，命名为 $@1、$@2、...、$@38。这些在某种程度上与中间动作规则相关，我正在检查的语法有很多，但在某种程度上我还没有完全辨别。它们代表非终结符号，在某种程度上与中间操作规则相关。我能说的就这些了。

编辑：

* * *

input.y（卡通版）：

```
%start  statement

%%

statement:  /* empty */ { print("testA"); }
    |   ';'         { print("testB"); }
    |       statement   { print("testC"); } thing1 thing2 { print("testD"); }
    ; 
```

* * *

input.output（卡通版）：

```
0 $accept: statement $end

1 statement: /* empty */
2      | ';'

3 $@1: /* empty */

4 statement: statement $@1 thing1 thing2

10 thing1: /*empty*/
20 thing2: /*empty*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:14:10.517

将中间规则动作放入规则中几乎与添加具有空右侧和相同动作（现在是最终动作）的非终结符完全相同，除了动作中语义值的编号. （bison 允许您在生产开始之前使用负索引引用语义值；这是用于中间规则操作的机制，除了 bison 为您计算堆栈偏移量。）

插入的空非终结符是 "named" `@1, @2, ...`。你会在状态描述中看到这些；看起来每个中间规则操作都已被`@i`占位符替换（实际上就是这样）。

**编辑**

事实证明，中间规则动作可能被命名为`$@n`or `@n`。根据`reader.c`第 527 行的有用评论（在 v2.6.5 中，这是我写的最新版本）：

```
 /* If the midrule's $$ is set or its $n is used, remove the `$' from the
     symbol name so that it's a user-defined symbol so that the default
     %destructor and %printer apply.  */ 
```

换句话说，如果一个中间规则动作`$`没有任何值（它既不设置值，也没有任何人使用该值），它的名称中将精确地包含 a；如果它有一个值（我想我的几乎总是这样），那么它的名字中就不会有 a `$`。

谜底解开了，我相信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:57:14.590

在 Bison 2.3 之前，中间规则动作的匿名符号被命名为`@N`，但在 Bison 2.4 中它被更改为`$@N`。见[http://lists.gnu.org/archive/html/bison-patches/2006-10/msg00075.html](http://lists.gnu.org/archive/html/bison-patches/2006-10/msg00075.html)

底线是：如果您看到`@N`，是时候更新您的 Bison 副本了 :)

# c# - 在方法签名中使用异步时任务取消异常不会冒泡

> ID：13696791
> 
> 赞同：2
> 
> 时间：2012-12-04T05:40:00.577
> 
> 标签：c#, multithreading, task-parallel-library, task

我真的不明白这一点。在我下面的代码中，按原样运行，token.ThrowIfCancellationRequested() 抛出的异常不会被发送回 Main 使用 .Wait() 的位置，而是当场抛出，堆栈跟踪并不知道它发生在哪里除了“任务已取消”。但是，如果我删除 async 关键字并使用 await Task.Delay() 删除 try catch 块，它确实会被发送回 main 中的 .Wait() 并被捕获。

我是不是做错了什么，或者我究竟如何让 await Task.Delay() 和 token.ThrowIfCancellationRequested() 抛出的异常都冒泡到 .Wait()？

```
static void Main(string[] args)
{
    var t = new CancellationTokenSource();
    var task = Task.Factory.StartNew((x) => Monitor(t.Token), t.Token, TaskCreationOptions.LongRunning);

    while (true)
    {
        if (Console.ReadLine() == "cancel")
        {
            t.Cancel();
            try 
            {
                task.Wait();
            }
            catch(AggregateException)
            {
                Console.WriteLine("Exception via task.Wait()");

            }
            Console.WriteLine("Cancelled");
        }
    }
}

static async void Monitor(CancellationToken token)
{
    while(true)
    {
        for(int i = 0; i < 5; i++)
        {
            // If the async in the method signature, this does not send the exception to .Wait();
            token.ThrowIfCancellationRequested();

            // Do Work
            Thread.Sleep(2000);
        }

        // Wait 10 seconds before doing work again.

        // When this try block is removed, and the async is taken out of the method signature,
        // token.ThrowIfCancellationRequested() properly sends the exception to .Wait()
        try
        {
            await Task.Delay(10000, token);
        } 
        catch(TaskCanceledException) 
        {
            Console.WriteLine("Exception from Delay()");
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:23:23.887

你应该避免`async void`。它的异常处理语义很棘手，无法组合成其他`async`方法。

`async void`方法在概念上是事件处理程序，因此如果它引发异常，它将直接在其上`SynchronizationContext`引发 - 在这种情况下，在线程池线程上引发。

-returning 方法的异步等价物`void`不是`async` `void`-returning 方法；这是一个`async` `Task`返回方法。所以你的`Monitor`方法应该返回`Task`：

```
static void Main(string[] args)
{
  var t = new CancellationTokenSource();
  var task = Monitor(t.Token);

  while (true)
  {
    if (Console.ReadLine() == "cancel")
    {
      t.Cancel();
      try 
      {
        task.Wait();
      }
      catch(AggregateException)
      {
        Console.WriteLine("Exception via task.Wait()");
      }
      Console.WriteLine("Cancelled");
    }
  }
}

static async Task Monitor(CancellationToken token) 
```

不用担心错过`LongRunning`flag；这只是一种优化，没有它线程池也能正常工作。

您可能会发现我的[`async`/ `await`intro](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)或[官方 MSDN 文档](http://msdn.microsoft.com/en-us/library/hh191443.aspx)很有帮助。

# asp.net-mvc-3 - ASP.NET MVC Razor Url.Action 在 Internet Explorer 8 中不起作用

> ID：13696793
> 
> 赞同：1
> 
> 时间：2012-12-04T05:40:03.577
> 
> 标签：asp.net-mvc-3, internet-explorer, razor, internet-explorer-8, url.action

我用 Razor 开发了一个简单的 ASP.NET MVC3 项目。页面之间的链接，我使用下表：

```
<table class="indexTable" align="left">
    <tr>
        <td class="indexTd">
        <a class="noUL" href='@Url.Action("Index", "ProblemEntrance")'><button class="menuButton">@ViewBag.ProblemEntrance</button></a>
        </td> 
```

因此，当我单击 ProblemEntrance 时，它​​会将我从 ProblemEntranceController 带到 ProblemEntrance 索引页面。在 Mozilla 和 Chrome 中一切正常，但在 Internet Explorer 中，页面保持不变，对我的点击没有任何反应。知道我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:47:43.993

将`href`属性放在按钮上，然后连接一个点击处理程序：

```
<button href='@Url.Action("Index", "ProblemEntrance")' class="menuButton" onclick='location.href=this.getAttribute("href")'>@ViewBag.ProblemEntrance</button> 
```

这是一个[小提琴](http://jsfiddle.net/WxPr5/)。

# jquery - 如何在 jquery Validation Engine 插件中设置错误消息位置？

> ID：13696796
> 
> 赞同：0
> 
> 时间：2012-12-04T05:40:31.637
> 
> 标签：jquery, css, jquery-validation-engine

我正在使用 Validation Engine2.2 jquery 插件来验证我的表单，问题是我无法在字段上准确显示错误，每个字段与其错误消息之间存在一点差距，是否有任何设置顶部位置手动查看这些错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:45:42.477

默认情况下，插件带有设置为默认值的 CSS 属性，您需要通过`!important;`为手动创建的样式提供属性来覆盖这些值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T06:34:39.360

覆盖样式中 formError 类的属性 padding-top

# jquery - 提交表单时 JQueryMobile 中的后退按钮

> ID：13696798
> 
> 赞同：0
> 
> 时间：2012-12-04T05:40:33.513
> 
> 标签：jquery, jquery-mobile

我有一个带有表单的 JQM 页面。提交表单时，结果将显示在另一个带有一些链接的 JQM 页面中。单击该链接将转到另一个带有后退按钮的 JQM 页面：

```
<a href="#" data-icon="back" data-rel="back" >Back</a> 
```

问题是单击后退按钮将转到表单而不是第二页（结果页）。有什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:58:30.000

就在这里。删除 data-rel="back" 并添加此代码。如果您的第三页有一个 idthirdPage 使用此事件来获取最后一页的 id 并在后退按钮上添加 click 事件，以便它可以将您返回到您的第二页。

```
$('#thirdPage').live('pagebeforeshow', function (e, data) {
    //below is a beck button of page #thirdPage
    $('#thirdPage-backbtn').bind('click', function(e) {
        $.mobile.changePage( "#" + data.prevPage.attr('id') , {transition: "none"} );
    });
} 
```

如果您需要更多信息，请查看此处：http: [//jquerymobile.com/demos/1.0rc1/docs/api/events.html](http://jquerymobile.com/demos/1.0rc1/docs/api/events.html)，查找 data.prevPage。

或者你可以使用这个：

```
<a href="" data-role="button" data-icon="back" onclick="history.go(-1);">Back</a> 
```

我更喜欢第一个选项，它更长，但给你更多的控制权。

# c# - WPF 中私有导入属性的 CA1811 警告

> ID：13696803
> 
> 赞同：3
> 
> 时间：2012-12-04T05:40:43.850
> 
> 标签：c#, .net, wpf, properties, mef

我有一个公共控制器类，其中我使用以下属性

```
[Import]
private TransferRegionViewModel TransferRegionView { get; set; }

[Import]
private Lazy<IVoiceController> VoiceController { get; set; } 
```

我收到以下 CA 警告：

> CA1811：Microsoft.Performance：“TransferController.VoiceController.set(Lazy)”似乎没有上游公共或受保护的调用者。

我将 VoicdeController 属性用作：

```
VoiceController.Value.CallTransfer(phoneNumber.PhoneNumber, true); 
```

我提到了这个 -[属性私有集；](https://stackoverflow.com/questions/2366075/c-sharp-properties-private-set)但不明白我是否需要设置内部或私有属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T07:12:41.357

一起使用 MEF 和代码分析时，这是“正常”警告。

您的属性将在运行时由 MEF 容器通过反射设置，因此，没有任何属性设置器调用，这可以由 CA 静态证明。唯一的方法是通过[`SuppressMessage`](http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.suppressmessageattribute.aspx)属性抑制此消息：

```
[SuppressMessage("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
[Import]
private Lazy<IVoiceController> VoiceController { get; set; } 
```

# jquery - 如何将 html 元素填充到另一个页面中？

> ID：13696806
> 
> 赞同：1
> 
> 时间：2012-12-04T05:40:52.587
> 
> 标签：jquery, html, flickr

这是我在 script.js 中的 jQuery 函数。该函数用于从 Flicker 获取提要并填充结构。

我想将 html 结构填充到另一个名为“items.html”的 html 页面中

```
$function getImages(){
    $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?id=90528678@N03&lang=en-us&format=json&jsoncallback=?", displayImages);   

  function displayImages(data) {      

// Start putting together the HTML string
var htmlString = '';         

// Now start cycling through our array of Flickr photo details
    $.each(data.items, function(i,item){
    // Here's where we piece together the HTML
    htmlString += '<div class="item_wrapper" name="'+item.title+'">';
    htmlString += '<img class="item_picture" src="' + item.media.m + '" alt=""/>';
    htmlString += '<div class="item_data">';
    htmlString += '<div class="item_company">';
    htmlString += '<h3 class="fi se en">'+item.title+'</h3>';
    htmlString += '</div>';
    htmlString += '<div class="item_title">';
    htmlString += '<h3 class="fi">'+item.title+'</h3>';
    htmlString += '<h3 class="se">'+item.title+'</h3>';
    htmlString += '<h3 class="en">'+item.title+'</h3>';
    htmlString += '</div>';
    htmlString += '</div>';
    htmlString += '</div>';
});   
     // Pop our HTML in the DIV tag of items.html 
     // Here's the problem. 
    $('div').html(htmlString);
   }
} 
```

那么我该怎么做呢？谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:42:09.757

您可以使用 ajax 加载函数来加载网页中的 html 内容。

```
$('div').load("file.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:49:04.183

您可以使用以下方法将另一个 html 页面加载到元素中：

```
$('div').load("items.html"); 
```

您也不应该使用字符串连接来构建您的 dom 元素。

使用这样的东西：

```
var div = $('<div/>');

$.each(data.items, function(i, image) {

    var item = $('<div/>').addClass("item_wrapper").attr('name', image.title);

    $('<img/>').attr('src', image.media.m).appendTo(item);

    item.appendTo(div);

});

$('div').html(div); 
```

等等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:08:41.350

这是一个可以工作的简化版本。

```
getImages();
function getImages(){
    $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?id=90528678@N03&lang=en-us&format=json&jsoncallback=?",
    function(data) {
        var htmlString = '';
        $.each(data.items, function(key, value){
                htmlString += '<div>'+value.title+'</div>';
                htmlString += '<img src="'+value.media.m+'">';
        });
        $('div').html(htmlString);
    });  
} 
```

我实际上不知道为什么您的版本不起作用。

getJSON 的回调可能需要是匿名的无名函数，这就是 displayImages 函数不起作用的原因。我无法让它工作。

You do have a $ in front of your function declaration. Maybe that contributed to the problem.

Though the html string insert works, like Josh said DOM insertion with nodes is better than html insertion. If you're just looking for a quick and dirty solution html string insertion might be fine.

# fullscreen - 立方体的全屏保持透视不变-html css

> ID：13696807
> 
> 赞同：2
> 
> 时间：2012-12-04T05:40:55.963
> 
> 标签：fullscreen, css-transitions, cube

我目前正在做一个项目，我需要一个在下面设计的立方体，但我需要它在不影响视角和所有浏览器的情况下全屏显示，尝试将宽度和高度设置为 100%，最大宽度和最大高度为 100 ％但没有帮助！下面给出了html。我需要下面给出的相同但在全屏模式下。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>3D rotation</title>
<link rel="stylesheet" href="3D_cube.css" />
</head>

<body class="experiment">
<script src="../jquery.js"></script>
<!--<script src="3D_cube.js"></script>-->

<div id="wrapper">

<div id="experiment">   
<div id="cube">
    <div class="face one">
        Top
    </div>
    <div class="face three">        
    </div>
    <div class="face four">
    </div>
    <div class="face five">
    </div>
    <div class="face six">
        Bottom
    </div>
</div>  
</div>
</div>

</body>
</html> 
```

相应的样式表由下式给出

```
#experiment {
  width:100%;
  height:100%;
  -webkit-perspective: 700; 
  -webkit-perspective-origin: 50% 200px;

  -moz-perspective: 800; 
  -moz-perspective-origin: 50% 200px;
}
#wrapper{
        width:100%;
        height:100%;
    }

#cube {
  position: relative;
  margin: 100px auto 0;
  height: 400px;
  width: 400px;
  -webkit-transition: -webkit-transform 2s linear;
  -webkit-transform-style: preserve-3d;

  -moz-transition: -moz-transform 2s linear;
  -moz-transform-style: preserve-3d;
}

.face {
  position: absolute;
  height: 360px;
  width: 360px;
  padding: 20px;
  background-color: rgba(50, 50, 50, 0.7);
  font-size: 27px;
  line-height: 1em;
  color: #fff;
  border: 1px solid #555;
  border-radius: 3px;
}   

#cube .one  {
  -webkit-transform: rotateX(90deg) translateZ(200px);
  -moz-transform: rotateX(90deg) translateZ(200px);
}

#cube .three {
  -webkit-transform: rotateY(90deg) translateZ(200px);
  -moz-transform: rotateY(90deg) translateZ(200px);

}

#cube .four {
  -webkit-transform: rotateY(180deg) translateZ(200px);
  -moz-transform: rotateY(180deg) translateZ(200px);
}

#cube .five {
  -webkit-transform: rotateY(-90deg) translateZ(200px);
  -moz-transform: rotateY(-90deg) translateZ(200px);
}

#cube .six {
  -webkit-transform: rotateX(-90deg) rotate(180deg) translateZ(200px);
  -moz-transform: rotateX(-90deg) rotate(180deg) translateZ(200px);
} 
```

# blackberry - 如何在黑莓应用程序的 web 视图中打开附件？

> ID：13696808
> 
> 赞同：0
> 
> 时间：2012-12-04T05:41:04.947
> 
> 标签：blackberry

我设计了一个可以在 web 视图中打开的应用程序（从某种意义上说，用户无法保存或转发我的应用程序中的任何网页）。问题是，每当我的应用程序包含一些链接（可能来自应用程序服务器）并且当我打开可能是 doc 文件或 xls 等的链接时......该文件正在普通浏览器中打开......如何制作文件要在我的应用程序的 webview 本身中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:55:36.320

BlackBerry 的 webview 等价物是 BrowserField。为了在应用程序的 web 视图中打开文件，您可以尝试以下操作：

```
BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
            myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
BrowserField browserField = new BrowserField(myBrowserFieldConfig);

add(browserField);
browserField.requestContent("http://www.blackberry.com"); 
```

提供您自己的文档链接并使用它在应用程序中打开文档/页面。

# jquery - jQuery allow contextmenu only on certain elements

> ID：13696810
> 
> 赞同：5
> 
> 时间：2012-12-04T05:41:33.280
> 
> 标签：jquery, contextmenu

```
// this works

$(document).on('contextmenu', function() {
    return false;
});

```

```
// without the code above, this works too

$(document).on('contextmenu', '#special', function() {
    alert('#special right clicked');
});
```

How can I combine these 2 pieces of code so that I can disable context menu on the whole document except the one with id #special.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T05:48:12.620

```
$(document).on('contextmenu', function(e) {
    if (!$(e.target).is("#special"))
       return false;

    alert('#special right clicked');
    // you may want e.preventDefault() here
}); 
```

Using the [`.is()` method](http://api.jquery.com/is/) lets you test whether the clicked element matches any selector, which is basically what your original delegated `.on()` call did behind the scenes, but if you're checking for an element id specifically it would be more efficient to say:

```
if (e.target.id != "special")
    return false; 
```

# android - 在android中使用获取密码位置的纬度和经度

> ID：13696812
> 
> 赞同：1
> 
> 时间：2012-12-04T05:42:03.667
> 
> 标签：android, google-maps

我有一个输入密码或邮政编码，我必须在 android 中找到这个位置？我们在 android 中找到了 lat & long 和 lat & long 的地址……但是如何通过邮政获得……？除了 Google API 之外，任何其他可用于此的 API...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:58:03.327

您可以使用**地理**编码器将街道地址或位置的其他描述转换为（纬度、经度）坐标或**反向地理编码**是将（纬度、经度）坐标转换为（部分）地址的过程

请看这个[链接](http://developer.android.com/reference/android/location/Geocoder.html)

您还可以使用**雅虎天气 api**，您可以在其中输入邮政编码并获取**城市**或**位置的名称**

参考这个[链接](http://developer.yahoo.com/weather/)

# sql - 如何将 SQL 查询结果存储在批处理文件的局部变量中？

> ID：13696815
> 
> 赞同：1
> 
> 时间：2012-12-04T05:42:19.347
> 
> 标签：sql, sql-server-2008, batch-file

我正在使用以下 SQL 查询通过批处理文件从数据库中获取版本号。

```
sqlcmd.exe -S localhost -d MyDB 
           -Q "set nocount on;Declare @VersionNumber nvarchar(128) set @VersionNumber = (select top 1 versionnumbe from Table_schemaversion order by Id desc)  print 'Your Previous Version is: ' + @VersionNumber " 
```

此查询工作正常，并产生正确的结果。

但现在我需要将此结果存储到批处理文件的局部变量中。而且我不能在这里使用任何外部文件，我只能通过上面写的查询来做到这一点。

我怎样才能做到这一点？任何人都可以告诉我一个解决方案吗？

提前致谢.....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:34:56.750

您必须将查询结果写入临时文件，然后从那里读取。

```
sqlcmd  -S ".\SQLEXPRESS" -Q "select c1 from [a].[dbo].[t1] where c1='1'" -U sa -P wavetec -h -1 -o tempstorage.txt        
set /p varname=<tempstorage.txt
echo %varname% 
```

*   -o：创建文件
*   -h -1：省略标题

希望这是你想要的！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:44:39.717

如果命令结果是一行就足够了：

```
FOR /F "usebackq" %%S IN (`sqlcmd.exe -S localhost -d MyDB  -Q "set nocount on;Declare @VersionNumber nvarchar^(128^) set @VersionNumber = ^(select top 1 versionnumbe from Table_schemaversion order by Id desc^)  print 'Your Previous Version is: ' + @VersionNumber "`) DO SET var=%%S 
```

或者

```
FOR /F  %%S IN ('sqlcmd.exe -S localhost -d MyDB  -Q "set nocount on;Declare @VersionNumber nvarchar^(128^) set @VersionNumber = ^(select top 1 versionnumbe from Table_schemaversion order by Id desc^)  print ^'Your Previous Version is: ^' + @VersionNumber "') DO SET var=%%S 
```

# svn - svn slave HEAD 高于仓库 HEAD

> ID：13696816
> 
> 赞同：0
> 
> 时间：2012-12-04T05:42:22.493
> 
> 标签：svn

我的办公室刚搬家，新的 svn 服务器设置了不同的 URL 和不同的用户凭据。我决定更新我的用户名密码和存储库的 URL，而不是重新获取所有存储库，如下所示

```
svn switch --relocate http://192.168.1.3:18090/svn/my_repo --username blabla --password blabla123 http://192.168.7.41:18090/svn/my_repo 
```

当我运行时`svn log`，我可以看到 URL 已成功更新

但是现在当我尝试时`svn update`，它会抛出以下消息

```
svn: E000000: A reported revision is higher than the current repository HEAD revision. 
```

所以我猜svn存储库已被重置。

如何从新存储库更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:07:49.960

很可能正如@sheldonCooper（尼斯尼克兄弟：D）在重新定位存储库时建议的那样，管理员没有从原始存储库中获得最新（一个或多个）修订版。

或者另一个版本被推送到旧存储库，并且您在切换之前对其进行了更新。错误消息实际上说的是您的本地版本似乎高于（新）服务器上的版本。

您可以执行以下操作：

I. 不好（最好先联系管理员 :D）

1.  切换到旧的仓库。
2.  从 repo 中导出代码。
3.  将工作副本恢复到以前的修订版或与新仓库中的修订版匹配的修订版。
4.  再次将 repo 切换到新的 repo。
5.  试一试`svn update`，`compare`这样你就知道文件版本匹配了。
6.  复制/粘贴您在当前代码库上创建的导出
7.  犯罪

二、好一些

1.  导出您当前的代码库。
2.  用新的 repo 版本替换所有文件
3.  将导出的文件复制/粘贴到新的工作副本上
4.  犯罪

# ios - 为什么 UIBezierPath strokeWithBlendMode 不做任何事情？

> ID：13696819
> 
> 赞同：1
> 
> 时间：2012-12-04T05:42:38.627
> 
> 标签：ios, drawing, core-graphics, alphablending

我已经使用类似于[这个 SO question](https://stackoverflow.com/questions/11185763/eraser-for-uibezierpath)中所示的方法设置了一个绘图工具......我有一个 UIView 的子类，它跟踪触摸，创建[UIBezierPath](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)对象，将路径添加到数组，然后将它们绘制到视图中绘制矩形。该视图是透明的 ([UIColor clearColor], opaque=NO)，并放置在以 PDF 和 Word 格式显示文档的 UIWebView 上。

我想使用这个工具来突出显示文本，所以我使用了带有 0.5 alpha 的黄色笔触颜色。这工作得很好，但是颜色使文本在重叠的地方看起来褪色。我正在阅读[kCGBlendModeMultiply](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/doc/uid/TP30000950-CH3g-BCIDAEFJ)混合模式的描述，并认为这将是完美的——它应该允许文本“穿透”突出显示颜色以获得更好的对比度。

但是，我看不出 kCGBlendModeNormal、kCGBlendModeMultiply 或我尝试过的任何随机混合模式之间有任何区别。这些真的有效吗，还是只在某些情况下有效？

这是我的drawRect代码：

```
- (void)drawRect:(CGRect)rect {
    for (UIBezierPath *path in self.paths) {
        [[UIColor colorWithRed:1 green:1 blue:0 alpha:0.5] setStroke]; // yellow
        //[path stroke]; // uses default blend mode
        [path strokeWithBlendMode:kCGBlendModeMultiply alpha:1.0]; // looks the same as above
    }
} 
```

我尝试将颜色的 alpha 设置为 1.0，将 strokeWithBlendMode 方法的 alpha 参数设置为 0.5，但这没有任何区别。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:29:26.997

就您的代码而言，您的文本处于完全不同的世界。当您进入`drawRect:`时，您可以使用的`CGContextRef`是专门为您的视图和您的视图创建的。它不知道其他视图中的内容，因此您的所有混合都是针对一堆清晰像素进行的。

我会说只是再降低一点alpha，它看起来还可以。*或者，您可以在文本后面*画出笔触，使文本更加突出（不过这需要一些技巧）。

# fortran - 编译时模块版本错误

> ID：13696820
> 
> 赞同：4
> 
> 时间：2012-12-04T05:42:58.333
> 
> 标签：fortran, mpi

我想用 mpif90 编译我的 Fortran 程序 (.f90)，但我得到以下信息：

```
use a_box
   1
Fatal Error: Wrong module version '6' (expected '9') for 
                       file 'a_box.mod' opened at (1) 
```

你能帮我解决这个问题吗？谢谢！

mpif90版本如下：

```
GNU Fortran (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 
```

我的系统是 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T06:38:29.440

在编译任何使用它的源代码文件之前，您需要编译包含模块 a_box 的源代码文件。当您编译使用此模块的源代码文件时，您似乎在选择编译器在使用该模块编译源代码时生成的旧版本的 .mod 文件。它是由旧版本的 gfortran 或不同的 fortran 编译器制作的。

# java - 与 Netty 聊天服务器

> ID：13696822
> 
> 赞同：1
> 
> 时间：2012-12-04T05:43:16.740
> 
> 标签：java, networking, netty

我用netty写了一个简单的聊天服务器，我和一个朋友一直在用telnet测试它。当我们两个都连接时，它表示组的大小为 1。每当写入用户列表时，它只会写入发送消息的人。我怎样才能解决这个问题？

```
import org.jboss.netty.channel.SimpleChannelHandler;
import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelStateEvent;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.group.ChannelGroup;
import org.jboss.netty.channel.group.DefaultChannelGroup;

public class ServerChannelHandler extends SimpleChannelHandler {

  private ChannelGroup users = new DefaultChannelGroup();

  @Override
  public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    users.write(e.getMessage());
  }

  @Override
  public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
    users.add(e.getChannel());
    System.out.println("Opened. ");
    System.out.println(users.size());
  }

  @Override
  public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
    users.remove(e.getChannel());
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:31:54.853

您必须为所有创建的 ChannelPipeline 实例共享相同的处理程序实例。或者将 ChannelGroup 声明为 static final

# php - 音频文件在 Base64 编码后会变小吗？

> ID：13696823
> 
> 赞同：2
> 
> 时间：2012-12-04T05:43:23.077
> 
> 标签：php, mysql, sql, base64

只是想知道，因为我正在考虑以这种方式将音频文件存储到数据库中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T05:47:06.443

[base64 维基](http://en.wikipedia.org/wiki/Base64)

Base64 编码将比二进制大约 1.37 倍。

# alfresco - Alfresco getChildren Resturl 给出 500 内部错误

> ID：13696828
> 
> 赞同：0
> 
> 时间：2012-12-04T05:44:28.660
> 
> 标签：alfresco

我在用

```
**GET /alfresco/service/api/path/{store_type}/{store_id}/{id}/children?types={types}&filter={filter?}&skipCount={skipCount?}&maxItems={maxItems?}**

**http://localhost:6060/alfresco/service/api/node/workspace/SpacesStore/4ae5fdf8-105e-4b87-bcda-b071a92785c1/children** 
```

获取 User Homes 文件夹的子项

当我点击上述网址时，我收到以下错误。请提供一个示例，它将检索 User Homes 文件夹中的所有 html 内容。提前致谢。

```
The Web Script /alfresco/service/api/node/workspace/SpacesStore/4ae5fdf8-105e-4b87-bcda-b071a92785c1/children has responded with a status of 500 - Internal Error.

500 Description:     An error inside the HTTP server which prevented it from fulfilling the request.

Message:    11040005 Wrapped Exception (with status template): 11043733 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/cmis/children.get.js': 11043732

Exception:  java.security.cert.CertificateExpiredException - NotAfter: Fri Aug 17 17:34:11 IST 2012

sun.security.x509.CertificateValidity.valid(CertificateValidity.java:256)
sun.security.x509.X509CertImpl.checkValidity(X509CertImpl.java:570)
sun.security.provider.certpath.BasicChecker.verifyTimestamp(BasicChecker.java:157)
sun.security.provider.certpath.BasicChecker.check(BasicChecker.java:109)
sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:117)
sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:328)
sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:178)
java.security.cert.CertPathValidator.validate(CertPathValidator.java:250)
sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:255)
sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:243)
sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:156)
sun.security.validator.Validator.validate(Validator.java:218)
com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1014)
com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:124)
com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1112)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:623)
com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)
java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:506)
org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114)
org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:320)
org.alfresco.repo.search.impl.solr.SolrQueryLanguage.executeQuery(SolrQueryLanguage.java:49)
org.alfresco.repo.search.impl.solr.SolrSearchService.query(SolrSearchService.java:367)
org.alfresco.repo.search.SearcherComponent.query(SearcherComponent.java:78)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:65)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
$Proxy13.query(Unknown Source)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:80)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:44)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:146)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
$Proxy13.query(Unknown Source)
org.alfresco.cmis.mapping.CMISServicesImpl.getChildren(CMISServicesImpl.java:570)
org.alfresco.repo.cmis.rest.CMISScript.queryChildren(CMISScript.java:402)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.mozilla.javascript.MemberBox.invoke(MemberBox.java:155)
org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:243)
org.mozilla.javascript.optimizer.OptRuntime.callN(OptRuntime.java:86)
org.mozilla.javascript.gen.c3._c0(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/children.get.js:134)
org.mozilla.javascript.gen.c3.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/children.get.js)
org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:393)
org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2834)
org.mozilla.javascript.gen.c3.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/children.get.js)
org.mozilla.javascript.gen.c3.exec(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/children.get.js)
org.alfresco.repo.jscript.RhinoScriptProcessor.executeScriptImpl(RhinoScriptProcessor.java:483)
org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:191)
org.alfresco.repo.processor.ScriptServiceImpl.executeScript(ScriptServiceImpl.java:282)
org.alfresco.repo.web.scripts.RepositoryScriptProcessor.executeScript(RepositoryScriptProcessor.java:102)
org.springframework.extensions.webscripts.AbstractWebScript.executeScript(AbstractWebScript.java:1128)
org.alfresco.repo.cmis.rest.CMISWebScript.executeScript(CMISWebScript.java:46)
org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:86)
org.alfresco.repo.web.scripts.RepositoryContainer$2.execute(RepositoryContainer.java:393)
org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:462)
org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:500)
org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:316)
org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:372)
org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)
org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:465)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
java.lang.Thread.run(Thread.java:619)

Exception:  java.security.cert.CertPathValidatorException - timestamp check failed

sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:139)

Exception:  sun.security.validator.ValidatorException - PKIX path validation failed: java.security.cert.CertPathValidatorException: timestamp check failed

sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:260)

Exception:  javax.net.ssl.SSLHandshakeException - sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: timestamp check failed

com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)

Exception:  org.alfresco.repo.search.impl.lucene.LuceneQueryParserException - 11043732

org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:366)

Exception:  org.alfresco.scripts.ScriptException - 11043733 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/cmis/children.get.js': 11043732

org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:195)

Exception:  org.springframework.extensions.webscripts.WebScriptException - 11040005 Wrapped Exception (with status template): 11043733 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/cmis/children.get.js': 11043732

org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:905)

Server: Community v4.0.0 (b 3835) schema 5,019
Time:   Dec 4, 2012 10:57:32 AM

Diagnostics:    Inspect Web Script (org/alfresco/cmis/children.get) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:16:25.617

异常中有两个关键位可以解释发生了什么：异常：

`Exception: java.security.cert.CertificateExpiredException - NotAfter: Fri Aug 17 17:34:11 IST 2012`

`org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:366)`

这些告诉我们您已将 Alfresco 配置为通过 SSL 与 SOLR 通信，并且 SOLR 用于响应的证书已过期。我猜你使用的是默认的？如果是这样，请按照这样的[建议](https://forums.alfresco.com/en/viewtopic.php?f=2&t=45940)或 Alfresco 支持论坛上的即时贴来解决它。（您需要升级或放入一些较新的证书）。如果您自己创建了过期的证书，则需要重新生成。

实际上，使异常显示的三个问题：

> org.mozilla.javascript.gen.c3.exec(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/children.get.js)

您正在使用旧的 CMIS URL，您应该切换到新的。有关您应该使用的 AtomPub 或 WebServices URL 的详细信息，请参阅[cmis.alfresco.com 。](http://cmis.alfresco.com/)

# design-patterns - 静态变量和方法的继承模型

> ID：13696831
> 
> 赞同：1
> 
> 时间：2012-12-04T05:44:36.913
> 
> 标签：design-patterns, inheritance, model, static, subclass

*我正在为 Objective C 执行此操作，但这是各种常用语言中的常见行为。*

我知道静态变量或方法不会继承给子类，但是我想知道哪种方法是执行以下操作的最佳方法：

**我有几个类（比如 10 个）具有以下基本模型：**

```
static id A

@interface MyClass

 + (void) doSomethingWithA;

@end

@implementation MyClass
    + (void) doSomethingWithA {
        [A doSomething];
        [A doOtherThing];
        //do more things
    }

@end 
```

**所有类的代码完全相同，但由于方法是静态的（我只想每个类有一个 A 实例），所以我不能使用子类化来避免代码重复。**

**我真的很想避免复制和粘贴这么多代码。**

在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:11:50.850

为什么不使用继承和您需要的一切使其成为实例方法，并创建静态实例（例如单例）来调用它们？

# python - 使用python迭代文件和列表，从不同点开始？

> ID：13696832
> 
> 赞同：1
> 
> 时间：2012-12-04T05:44:39.103
> 
> 标签：python, file-io, iteration

所以我认为这应该是一件很容易的事情。假设我有一个这样的文本文件。

```
football
baseball
basketball
soccer 
```

和一个像这样的列表，例如

```
colors=["orange","white"] 
```

我了解如何在 python 中一起迭代它们

```
for i,j in zip(file, colors) 
```

但是有没有一种简单的方法可以告诉文件从第 3 行开始，这样如果打印出来我会得到

```
basketball orange
soccer white 
```

我了解如何使用 2 个列表执行此操作，但我不确定如何告诉文件从更远的位置开始。一如既往地感谢，我还是新来的，每个人都是很大的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:48:07.393

我会做

```
next(file) # get and discard
next(file)
for i,j in zip(file, colors):
    # do stuff 
```

然后是zip操作。

如果您有超过 2 个或可变数字：

```
for _ in range(number_to_skip):
    next(file)
for i, j in zip(file, colors):
    # do stuff 
```

这是有效的，因为文件不仅是可迭代的，而且它自己的迭代器也是如此。所以它自己给出它的值，而不是使用不同的迭代器对象（就像`list`等人所做的那样）。

每个`next(file)`人都从文件中获取一行并继续前进。如果你达到了“真正的”迭代，你就在你想去的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T05:54:20.993

可以使用 itertools 实现一种无需将文件转换为列表并将其保持在可迭代状态的方法：

```
import itertools

for i, j in itertools.izip(itertools.islice(file, 2, None), colors) 
```

将`islice`跳过 2 行而不将文件转换为列表并将其保持在可迭代状态。

`izip`也很重要，因为`zip`也可能将事物转换为列表，而不是让它们保持可迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T05:50:02.680

阅读 2 行并且不执行任何操作

```
file.readline()
file.readline() 
```

然后使用普通拉链

```
for i,j in zip(file, colors):
    # perform action 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T05:47:11.747

你可以做`for i,j in zip(file[2:],colors)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T05:47:17.927

如果它适合，只需使用 readlines 来获取行列表..

```
lines = my_file.readlines()
zip(colors,lines[3:]) 
```

# php - 使用 LESSPHP 覆盖 Twitter 的 Bootstrap LESS 变量

> ID：13696834
> 
> 赞同：2
> 
> 时间：2012-12-04T05:44:47.240
> 
> 标签：php, twitter-bootstrap, less, lessphp

我一直在搞乱[lessphp](http://leafo.net/lessphp/)和[bootstrap-colorpicker](http://www.eyecon.ro/bootstrap-colorpicker/)，我想知道是否可以用bootstrap-colorpicker设置的十六进制颜色覆盖更少的变量，例如：

```
<?php
if(isset($_POST['submit'])){
    require "lessc.inc.php";

    $less = new lessc;
    $less->setVariables(array("bodyBackground" => $_POST['color']));
    $less->checkedCompile("less/bootstrap.less", "output.css");

    try{
        $less->compile("invalid LESS } {");
    }catch(exception $e){
        echo "fatal error: " . $e->getMessage();
    }
}?> 
```

标记：

```
<form method="post" action="">
    <input name="color" 
           type="text" 
           class="span3" 
           value="<?php if(isset($_POST['color'])){echo $_POST['color'];}else{echo       
                 '#8fff00';}?>" 
           id="cp1" />
    <input name="submit" class="btn btn-primary" type="submit" value="Submit"/>
</form>
<script>
$function(){
    var bodyStyle = $('body')[0].style;

    $('#cp1').colorpicker({format: 'hex'}).on('changeColor', function(ev){    
        bodyStyle.backgroundColor = ev.color.toHex();
});
</script> 
```

我认为这会起作用，但它不起作用，我不完全确定 setVariables 是否正在传递 POST 数据，`@bodyBackground: #new_hex;`因为我目前正在获取引导程序的`@white`less 变量的默认值。我是 lessphp 的新手，想知道是否可以在编译之前为引导更少的变量分配新值？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T20:44:44.357

不，你不能（我认为）。阅读[http://leafo.net/lessphp/docs/#compiling](http://leafo.net/lessphp/docs/#compiling)上的文档。您的设置`$less->checkedCompile`数组不被`$less->checkedCompile`. 导致 checkedCompile() 和 compileFile() 读取（更少）文件。

你可以做什么：1）添加一行：`@import "_custom.less"; 在less/bootstrap.less 的末尾。2）你的PHP代码：

```
require "lessc.inc.php";

$fp = fopen('less/_custom.less','w');
fwrite($fp,'@bodyBackground : '.$_POST['color']."\n");
fclose($fp);

$less = new lessc;
//$less->setVariables(array("bodyBackground" => $_POST['color']));
$less->FileCompile("less/bootstrap.less", "output.css"); 
```

` 注意checkedCompile 非常基础，它只检查输入文件的修改时间。它不知道来自@import 的任何文件。

是的，您可以使用十六进制颜色。

**如果您不想更改引导程序的较少文件，请**更新尝试：****

 **```
/* with twitter boostrap less files in ./bootstrap-master/less */
error_reporting(E_ALL);
ini_set('display_errors','on');
require('lessphp/lessc.inc.php');

file_put_contents('./custom.less','@bodyBackground : '.$_POST['color']."\n");

$less = new lessc;
$less->setImportDir(array('./bootstrap-master/less','.'));
try {
$css = $less->compile(file_get_contents('./bootstrap-master/less/bootstrap.less')."\n" . '@import "custom.less";'); 
} catch (Exception $ex) {
    echo "lessphp fatal error: ".$ex->getMessage();
}

file_put_contents('./bootstrap.css',$css);
exit; 
```**

# objective-c - MFMailComposeViewController 立即关闭

> ID：13696835
> 
> 赞同：24
> 
> 时间：2012-12-04T05:44:47.707
> 
> 标签：objective-c, ios, mfmailcomposeviewcontroller, mfmailcomposer

情况是要呈现 MFMailComposeViewController。我看到它已经完成了一半，但后来被解雇了。

这是错误：

> _serviceViewControllerReady:error: Error Domain=_UIViewServiceInterfaceErrorDomain Code=3 “操作无法完成。（_UIViewServiceInterfaceErrorDomain error 3.）”

这是我展示 MFMailComposeViewController 的源代码：

```
-(void) MailExecute {
    if ([MFMailComposeViewController canSendMail]) 
    {
        MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];   
        mailViewController.mailComposeDelegate = self;
        [mailViewController setSubject:NSLocalizedString(@"Check this new look", @"")];
        [mailViewController setMessageBody: @"my new look" isHTML:YES];

        [self presentModalViewController:mailViewController animated:YES];

        [mailViewController release];
    }
    else 
    {
        UIAlertView *alertInternal = [[UIAlertView alloc]
                                      initWithTitle: NSLocalizedString(@"Notification", @"")
                                      message: NSLocalizedString(@"You have not configured your e-mail client.", @"")
                                      delegate: nil
                                      cancelButtonTitle:NSLocalizedString(@"OK", @"")
                                      otherButtonTitles:nil];
        [alertInternal show];
        [alertInternal release];
    }
} 
```

奇怪的是，有时会发生，有时不会。请帮我解决这个问题！我花了将近 1 个工作日来解决这个问题，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-23T05:14:54.527

This problem can occur when displaying a remote view controller -- a view controller run in another process -- as indicated by the [`UIViewService` reference](http://www.lyonanderson.org/blog/2012/10/08/failing-to-make-ios6-remote-view-controllers/) in the error message.

I've had this problem when displaying an `SKStoreProductViewController`, which is also a [remote view controller](http://oleb.net/blog/2012/10/more-on-remote-view-controllers/). I'm not sure what the root cause is; the only thing that seemed to trigger it for me was presenting the view controller repeatedly.

For the `SKStoreProductViewController` I was able to check for this error in the completion block of the `loadProductWithParameters:completionBlock:` method. Does the `MFMailComposeViewControllerDelegate` give you a callback with an error about this? It may be that all you can do is listen for this error and show an error message to the user.

We should both probably file an apple radar about this.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T09:00:13.880

您的代码看起来是正确的，并且如所述错误消息强烈表明这与`UIView`正确（不是`MFMail`特别）有关。几乎可以肯定，问题出在代码中的某个地方，并且可能难以排除故障。

一些要寻找的东西：

1.  其他动画或视图控制器转换/关闭同时或不正确发生（[可能像这样](https://stackoverflow.com/questions/11061559/ios-app-crashes-when-inapp-mail-command-gets-called)）
2.  释放/保留问题，当然

如果这些似乎都不是解决方法，请尝试注释掉调用此方法的视图控制器中发生的所有其他事情，然后看看它是否有效。

如果您仍然无法正常工作，请提供最简单的失败代码版本，以便我们进一步排除故障。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:11:49.040

您的`viewDidDisappear:`或`viewWillDisappear`方法中是否有任何会关闭视图控制器的内容？

如果没有，您能否为呈现 MFMailComposeViewController 的 ViewController 发布更多代码？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T04:58:50.063

我知道这是迟到的答复，但可能会有所帮助。

刚刚面临同样的问题，通过**`resetting the simulator`**为我解决同样的问题。让我知道这是否有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-31T07:20:13.520

对我来说，问题是调用附件函数时参数不正确。如果您在使用电子邮件附件时遇到此问题，我建议您按照[此线程](https://stackoverflow.com/a/18286771/3242920)中的解决方案进行操作，如下所示：

```
NSString *path = [self getDatabaseFilePath];
NSData *myData = [NSData dataWithContentsOfFile:path];
[picker addAttachmentData:myData mimeType:@"application/x-sqlite3" fileName:[path lastPathComponent]]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-19T07:12:03.313

MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc]init];

```
if ([MFMailComposeViewController canSendMail])
{
    mailComposer.mailComposeDelegate = self;
    [mailComposer setToRecipients:[NSArray arrayWithObject:@"support@kapsie.com"] ];
    [mailComposer setSubject:@"Kapsie App Contact Support"];
    [mailComposer setMessageBody:@"Type Your Feedback message here" isHTML:NO];
    [self presentViewController:mailComposer animated:YES completion:nil];
} 
```

使用上面的代码并在设备上检查它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-14T18:41:20.747

在我将 MFMailComposeViewController 存储在我的类的强属性中而不是局部变量中之后，我无法再重现自我关闭行为。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-05-28T12:38:30.637

在 iOS 6 中不推荐使用 modelViewController ，请使用

```
[self presentViewController:mailView animated:YES completion:nil]; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-08-01T10:07:02.070

我面临同样的问题，解决方案是：

我删除了与整体应用程序外观相关的代码，例如

```
[[UILabel appearance]setText:@""] 
```

并替换为代码

```
[[UILabel appearanceWhenContainedIn:[self class], nil] setText:@""]; 
```

现在它工作正常，所以要小心整体应用程序外观的变化：它可能是导航栏的外观，等等

# mysql - 持有相同的查询并且只将一个唯一的查询转发给 MySQL？

> ID：13696840
> 
> 赞同：0
> 
> 时间：2012-12-04T05:45:27.427
> 
> 标签：mysql, sql

例如，100 个相同的查询`SELECT * FROM tableA WHERE columnA LIKE '%STH%'`同时发送到 MySQL，MySQL 将同时执行这 100 个相同的查询。

是否有一些中间件或插件，可以容纳所有这 100 个查询并且只向 MySQL 发送一个查询，等待结果并将结果发送给所有客户端？

内存缓存不是选项。如果查询没有在 Memcache 中命中，MySQL 有可能会执行所有 100 个相同的查询。

# java - 窗口不活动时的 Java 输入

> ID：13696842
> 
> 赞同：0
> 
> 时间：2012-12-04T05:45:35.923
> 
> 标签：java, input, keyboard

当窗口不活动时，有没有办法检测键输入？也就是说，另一个应用程序正在运行，但是当按下 F9 键或类似的东西时，程序会被触发。

这是可能的还是java与这些功能不兼容？从我发现java无法获得输入，除非它是活动窗口。

**注意：** 我通常使用 keylistener，当我不积极使用该程序时，它似乎停止工作（有充分的理由）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:56:10.187

听起来您想要低级键盘挂钩。

[使用 Java 获取全局键盘输入](https://stackoverflow.com/questions/5442473/get-global-keyboard-input-with-java)

这在 Java 中是不可能直接实现的（即使用纯 Java 代码），但您可以参考其他库（或制作您自己的库）来实现这一点。快速的[谷歌](http://www.google.com/#hl=en&tbo=d&output=search&sclient=psy-ab&q=java+low+level+keyboard+hook&oq=java+low+level+key&gs_l=hp.3.0.0i30l2.709.4245.0.5516.19.15.0.4.4.0.213.2430.0j12j3.15.0.les%3B..0.0...1c.1.G7Oj-8U5C-o&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=ff2852371cfa3161&bpcl=39580677&biw=1366&bih=628)搜索提供了很多参考资料和免费/开放的库，可以为您提供键盘和鼠标挂钩（都非常方便）。

希望有帮助。

# java-me - 修复在 j2me 中显示的初始屏幕图像

> ID：13696843
> 
> 赞同：2
> 
> 时间：2012-12-04T05:45:36.693
> 
> 标签：java-me, nokia, midp, lcdui, jsr75

在我的 j2me 应用程序中，我尝试了在诺基亚手机上运行良好但不能在三星上运行的画布。为此，我必须切换到在两种情况下都有效但唯一的问题是尺寸的某种形式，如果我创建较小的图像以适合两个手机屏幕，一个（三星）显示还可以，但另一个（诺基亚）留下更多空间反之亦然。

我需要有可以拉伸我的图像的代码，并且只需将其修复为我基本上得到的屏幕尺寸`form.getHeight()`和`form.getWidth()`属性。我想知道是否有属性，`Image.createImage(width, height)`那么为什么不将其扩展到我提供的值？

我的代码如下

```
try {
        System.out.println("Height: " + displayForm.getHeight());
        System.out.println("Width: " + displayForm.getWidth());
        Image img1 = Image.createImage("/bur/splashScreen1.PNG");
        img1.createImage(displayForm.getHeight(), displayForm.getWidth()); 
        displayForm.append(new ImageItem(null, img1, Item.LAYOUT_CENTER, null));
    } catch (Exception ex) {
    } 
```

图片![在此处输入图像描述](../Images/3a680aa4811a2fb1ba71c693be1019ad.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:05:37.623

单个图像不会适合所有屏幕。但更多会做。
较小的徽标图像应小于 96x54，因为这是最小的屏幕分辨率。此图像可以毫无问题地使用到 128x128 的分辨率。不过，使用更大的分辨率，它看起来会很小。
较大的徽标图像应该比 128x128 大一点，并且可以使用到 240x320。下面的代码举例说明了如何实现这一点。

```
import javax.microedition.lcdui.Image;
import javax.microedition.lcdui.Graphics;

class Splash extends javax.microedition.lcdui.Canvas {

  Image logo;

  Splash () {
    if (getWidth() <= 128) {
      // sl stands for Small Logo and does not need to have a file extension
      // this will use less space on the jar file
      logo = Image.createImage("/sl");
    } else {
      // bl stands for Big Logo
      logo = Image.createImage("/bl");
    }
  }

  protected void paint (Graphics g) {
    // With these anchors your logo image will be drawn on the center of the screen.
    g.drawImage(logo, getWidth()/2, getHeight()/2, Graphics.HCENTER | Graphics.VCENTER);
  }
} 
```

如[http://smallandadaptive.blogspot.com.br/2008/10/showing-splash.html所示](http://smallandadaptive.blogspot.com.br/2008/10/showing-splash.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:45:22.717

> 想知道是否有属性，`Image.createImage(width, height)`那么为什么不将其扩展到我提供的值？

*此方法中的参数与拉伸*无关，请参阅**[API javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html#createImage%28int,%20int%29)**：

> ```
>  public static Image createImage(int width, int height)
> 
>     Creates a new, mutable image for off-screen drawing.
>         Every pixel within the newly created image is white.
>         The width and height of the image must both be greater than zero.
> 
>     Parameters:
>         width - the width of the new image, in pixels
>         height - the height of the new image, in pixels 
> ```

* * *

`Image`类（[API javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html)）还有两个`createImage`使用参数的方法，称为“width”和“height”——一个有**[六个](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html#createImage%28javax.microedition.lcdui.Image,%20int,%20int,%20int,%20int,%20int%29)**，另一个有**[四个](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html#createRGBImage%28int%5b%5d,%20int,%20int,%20boolean%29)**参数，但这些都与*拉伸*无关。

*   在使用六个参数时，宽度和高度指定要从源图像`createImage`复制（不*拉伸）的区域的大小。*

*   在具有四个参数的方法中，宽度和高度指定如何解释源 ARGB 数组，如果没有这些参数，就无法确定`12`值数组是否代表`3x4`图像或`4x3`. *同样，这与拉伸*无关。

# php - VB6 代码到 PHP 的转换

> ID：13696847
> 
> 赞同：0
> 
> 时间：2012-12-04T05:46:38.317
> 
> 标签：php, vb6

我目前正在开发一个将 VB6 代码转换为 PHP 的项目，我需要一些帮助。我想知道我的校验和函数的转换是否正确，因为我得到的值根本不准确。

VB6 代码：

```
Function CheckSum(St As String) As Long
 Dim A As Long, B As Long
 For A = 1 To Len(St)
     B = B + Asc(Mid$(St, A, 1))
 Next A
 CheckSum = B
End Function 
```

到

PHP代码：

```
Function CheckSum($st)
{

For($a=0; $a<Count($st); $a++)
{
$B = $B + SubStr($st,$a,1);
}
return $B;
} 
```

整个PHP代码：

```
Function CheckSum($st)
{

For($a=0; $a<Count($st); $a++)
{
$B = $B + SubStr($st,$a,1);
}
return $B;
}

Function DoubleChar($num)
{
$DoubleChar = Chr(IntVal($num / 256)) + Chr($num % 256);
Return $DoubleChar;
}

$host = '127.0.0.1'; 
$port = 7973; 
$waitTimeoutInSeconds = 1; 
if($fp = fsockopen($host,$port,$errCode,$errStr,$waitTimeoutInSeconds))
{   
$getplayers = DoubleChar(Chr(35)) + Chr(CheckSum(Chr(35)) * 20 % 194) + Chr(0) + Chr(35);
if(fwrite($fp, $getplayers)):
while (!feof($fp)) 
{
    $buffer = fread($fp, 256);
echo IntVal($buffer);
}   
endif;
} else {
echo "ERROR: $errno - $errstr<br />\n";
} 
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:48:00.157

> 我想知道我的校验和转换是否正确，因为我得到的值根本不准确。

如果结果不匹配 - 则转换不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:02:18.870

您发布的 VisualBasic`checksum`代码对字符串 st 的每个字符进行操作，并将其转换为等效的 Ansi 代码（`Asc()`函数）。此外，VB 代码使用该`Len()`函数对字符串进行操作，而您的 PHP 代码使用该`count()`函数对数组进行操作。

为了在 PHP 中获得等效的结果，您需要使用类似的函数，例如[ord()](http://php.net/manual/en/function.ord.php)和[strlen()](http://php.net/manual/en/function.strlen.php)，因此您的校验和函数看起来像：

```
function CheckSum($st)
{
    for($a=0; $a<strlen($st); $a++)
    {
        $B = $B + ord(substr($st,$a, 1));
    }
    return $B;
} 
```

# spring - 在错误节点上运行的集群中的石英作业

> ID：13696848
> 
> 赞同：2
> 
> 时间：2012-12-04T05:46:40.123
> 
> 标签：spring, cluster-computing, quartz-scheduler, phase

u我有一个以 2+2 设置集群的应用程序，其中 2 台机器用于 alpha 产品阶段，另外两台用于真实客户。所有机器都在查看同一个数据库，我需要在午夜为每个组运行一份工作。两台 alpha 机器中的一台应该得到一份工作，另外两台应该得到另一份工作。

我正在使用 Spring 3.0.5 和 Quartz 1.8.5 并具有以下属性

```
phase=alpha
quartz.job.name=MY_JOB_${phase} 
```

```
<bean id="quartzPropertiesFactoryBean" class="com.liveperson.kwo.quartz.QuartzPropertiesFactory">
    <constructor-arg value="AUTO"/>
    <constructor-arg value="MY_CLUSTER"/>
    <constructor-arg value="JobStoreTX"/>
    <constructor-arg value="StdJDBCDelegate"/>
    <constructor-arg value="true"/> //isClustered
    <constructor-arg value="false"/> //useProperties
</bean>

<bean name="runJobBean" class="org.quartz.JobDetail">
    <property name="name" value="${quartz.job.name}"/>
    <property name="jobClass" value="CLASS1"/>
    <property name="group" value="JOB-for-${quartz.job.name}"/>
    <property name="jobDataMap">
        <bean class="org.quartz.JobDataMap">
        </bean>
    </property>
</bean>

<bean name="schedulerFactoryBean" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="quartzProperties" ref="quartzPropertiesFactoryBean"/>

    <property name="dataSource" ref="mySqlConnectorBean"/>
    <property name="overwriteExistingJobs" value="true"/>
    <property name="jobDetails">
        <list>
            <ref bean="runJobBean"/>
        </list>
    </property>
    <property name="triggers">
        <list>
            <ref bean="cronTriggerBean"/>
        </list>
    </property>
</bean> 
```

我定义了两个作业，一个用于 alpha，另一个用于生产抛出阶段属性，我遇到的问题是我为 alpha 阶段定义的作业在定义为生产的节点上运行，我怎样才能使作业定义为alpha 阶段仅在为 alpha 定义的机器上运行？

谢谢！

# php - 如何从谷歌翻译 api 中删除或隐藏谷歌图标？

> ID：13696851
> 
> 赞同：4
> 
> 时间：2012-12-04T05:47:07.787
> 
> 标签：php, html, css, api, google-translate

我正在使用这行代码：

```
 <div id="google_translate_element"></div>
<script>
   function googleTranslateElementInit() {
      var translator = new google.translate.TranslateElement({
      pageLanguage: 'en',
      autoDisplay: false,
      multilanguagePage: false,
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
   }, 'google_translate_element');
}
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

这是输出，我想删除图标，怎么可能删除它？或隐藏

![在此处输入图像描述](../Images/d00e0baa36a4c654c11a79778220c72b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T05:50:05.690

**习惯了这个**

```
.goog-te-gadget-icon{
background:none !important;
} 
```

***[现场演示](http://tinkerbin.com/iZ1tDonV)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T06:59:23.430

这比rohit的回答要好得多

```
.goog-te-gadget-icon{
  display:none;
} 
```

# php - PHP变量中的HTML img

> ID：13696856
> 
> 赞同：2
> 
> 时间：2012-12-04T05:47:22.917
> 
> 标签：php, html

我正在尝试这样做

```
$input = "<img src="HTML/images/user.png" alt="" />"; 
```

但这行不通，我知道我应该在“之前放一个/”或者请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:48:14.180

尝试这个

```
$input = "<img src='HTML/images/user.png' alt='' />"; 
```

或者

```
$input = "<img src=\"HTML/images/user.png\" alt=\"\" />"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:50:25.663

您需要做的就是转义双引号。就像下面一样。 `\"HTML/images/user.png\" alt=\"\"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:04:27.603

尝试这个

```
$input = "<img src='HTML/images/user.png' alt='' />"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T05:50:30.090

请注意，您已经使用`"`了 PHP。

您可以选择使用`'`或`\"`。

例如，

```
$input = "<img src='HTML/images/user.png' alt='' />";

$input = "<img src=\"HTML/images/user.png\" alt=\"\" />"; 
```

# ember.js - 推荐使用最新版本的基本 ember.js 示例？

> ID：13696859
> 
> 赞同：4
> 
> 时间：2012-12-04T05:47:33.837
> 
> 标签：ember.js

谁能推荐一个使用最新版本库的 ember.js 示例？有很多很好的教程，但它们似乎都使用旧版本的 ember，并且当指向最新版本时，它们都因某种原因而崩溃；即使是 ember.js 主页上的基本片段也不能开箱即用，尽管我怀疑这是因为它们需要 ember-data 而我什至还没有开始研究。只是尝试开始使用该框架，寻找一种起步的方法！

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:59:21.010

我知道那感觉！从 Ember 开始可能真的更容易。

首先，我建议阅读Trek Glowacki[的使用 Ember.js 的建议和说明。](http://trek.github.com/)示例应用程序也可用作[jsFiddle](http://jsfiddle.net/Sly7/ZKXyg/)。它看起来很乱，但它是一个使用路由器的工作 Ember 应用程序。

如果您需要一个基本的 Ember 框架来开始，我将指向我自己的[Ember CoffeeScript Start Kit](https://github.com/stravid/emberjs-coffeescript-start-kit/tree/master/app/assets/javascripts)。它包括您开始使用的最小的 Ember 应用程序。A `Router`, an`ApplicationView`和`ApplicationController`plus 模板。去看看:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:41:47.763

听起来很熟悉。

我一直在使用[ember rest 示例](https://github.com/dgeb/ember_rest_example)来结合 Ember 和 rails，如果这对您的目标感兴趣的话。

# java - javac makefile在每个'make'上重新编译

> ID：13696864
> 
> 赞同：1
> 
> 时间：2012-12-04T05:47:57.363
> 
> 标签：java, compilation, makefile, javac

知道为什么这个makefile会重新编译（不必要地）每个.class文件吗？另外，我认为它是相关的，java文件导入它们上面的文件。我已经尝试了 4 次并且浪费了几个小时来让它工作，而不是处理我项目的实际代码，所以任何帮助都将不胜感激。

## **最近的尝试：**

```
#########################################################################
#                                   #
# http://ieng6.ucsd.edu/~cs131f/makenotes.html              #
#                                   #
#########################################################################
JFLAGS      = -g -d
JC      = javac
.SUFFIXES   : .java .class
SRCDIR      = simpella
OUTDIR      = simpella/out

.java.class:
    $(JC) $(JFLAGS) $(OUTDIR) $*.java

#########################################################################
#
# example run: javac -g -d simpella/out simpella/simpella.java
#
#########################################################################

CLASSES = \
    $(SRCDIR)/Util.java \
    $(SRCDIR)/Converters.java \
    $(SRCDIR)/Connection.java \
    $(SRCDIR)/Simpella.java

default: classes

classes: $(CLASSES:.java=.class)

#########################################################################
clean:
    $(RM) -v simpella/out/simpella/*.class
    @- echo "Cleaned" 
```

## **尝试 3...：**

```
#########################################################################
#                                   #
# http://ieng6.ucsd.edu/~cs131f/makenotes.html              #
#                                   #
#########################################################################
JFLAGS      = -g -d
JC      = javac
.SUFFIXES   : .java .class
SRCDIR      = simpella
OUTDIR      = simpella/out

.java.class:
    $(JC) $(JFLAGS) $(OUTDIR) $*.java

#########################################################################
#
# example run: javac -g -d simpella/out simpella/simpella.java
#
#########################################################################

all: Simpella.java

Util.java:
    Util.java=Util.java
Converters.java:
    Converters.java=Converters.class
Connection.java: Converters.java Util.java
    Connection.java=Connection.class
Simpella.java: Connection.java Converters.java Util.java
    Simpella.java=Simpella.class
    @- echo "Done Compiling!!"

#########################################################################
clean:
    $(RM) -v simpella/out/simpella/*.class
    @- echo "Cleaned" 
```

## **尝试 2...：**

```
#########################################################################
#                                   #
# http://ieng6.ucsd.edu/~cs131f/makenotes.html              #
#                                   #
#########################################################################
JFLAGS      = -g -d
JC      = javac
.SUFFIXES   : .java .class
SRCDIR      = simpella
OUTDIR      = simpella/out

.java.class:
    $(JC) $(JFLAGS) $*.java

#########################################################################

#CLASSES = Simpella.java Connection.java Converters.java Util.java

all: Simpella.java

#example run: javac -g -d simpella/out simpella/simpella.java

Util.java:
    $(JC) $(JFLAGS) $(OUTDIR) $(SRCDIR)/Util.java
Converters.java:
    $(JC) $(JFLAGS) $(OUTDIR) $(SRCDIR)/Converters.java
Connection.java: 
    $(JC) $(JFLAGS) $(OUTDIR) $(SRCDIR)/Connection.java
Simpella.java: Util.java Connection.java Converters.java
    $(JC) $(JFLAGS) $(OUTDIR) $(SRCDIR)/Simpella.java
    @- echo "Done Compiling!!"

#########################################################################
clean:
    $(RM) -v simpella/out/simpella/*.class
    @- echo "Cleaned" 
```

## **尝试1 ...：**

```
JFLAGS = -g -d
JC = javac
.SUFFIXES: .java .class
.java.class:
    $(JC) $(JFLAGS) $*.java

CLASSES = \
    simpella\Util.java \
    simpella\Converters.java \
    simpella\Connection.java \
    simpella\simpella.java 

default: classes

classes: $(CLASSES:.java=.class)
    @- echo "Done Compiling!!"

clean:
    $(RM) *.class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:48:44.140

为java创建定义良好的makefile是一项复杂的任务，因为a）源文件和类文件位于不同的目录中，b）这些目录是嵌套的，c）源文件和类文件没有一对一的映射。然后，即使做得好的 makefile 也不会获得良好的性能，因为 make 实用程序会产生单独的进程来编译每个 java 文件。另一方面，java 编译器本身运行速度很快，具有嵌入式依赖检查，并且能够在单进程运行中编译数百个 java 文件。因此，make 实用程序不用于编译 java 文件。对于中小型项目，使用java编译器并将所有源文件传递给它。对于大型项目，请使用 Ant、Gradle 或其他支持 java 的构建工具。

编辑：要使用 javac 依赖检查，请以这种方式运行：

```
 javac -d ${OUTDIR} -cp ${OUTDIR} -sourcepath ${SRCDIR} ${MAIN_JAVA_FILE_NAME} 
```

也就是说，只传递主 java 文件的名称，指向其他源文件所在的位置，指向类文件所在的位置两次：存储位置和检查存在的位置。${SRCDIR} 应该根据它们的包结构包含 java 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:30:49.103

问题是您不应该将“*.java”用作目标，而应该将其用作每个相关“*.class”的依赖项。否则，就像你的“尝试2”，当目标是没有依赖关系的文件时，它不会被重建，并且总是会喊“最新”。

主要思想是告诉你的 make 清楚地理解依赖关系。下面是一个测试用例，可以更简单地构建类文件，对于一个小项目来说是可以的（类 Test 将使用来自 Ref 的方法，因此它依赖于 Ref.class，我们应该手动添加它）。我希望在这个问题上得到更好的答案！！！但是对于大型项目，嗯，为什么不试试[ant](http://ant.apache.org/manual/index.html)呢？

生成文件：

```
OBJ = ./obj/
SRC = ./src/
JARS = $(wildcard lib/*.jar)
LIB = .:$(OBJ):$(shell echo '$(JARS)' | sed 's/jar /jar:/g')

define make-target
    @echo + cc $<
    @javac -classpath $(LIB) $< -d $(OBJ) $*
endef

all: always ./obj/Ref.class ./obj/Test.class

./obj/Ref.class: ./src/Ref.java
    $(make-target)
./obj/Test.class:./src/Test.java ./obj/Ref.class
    $(make-target)

run:
    @java -classpath $(LIB) Test
always:
    @mkdir -p $(OBJ) 
```

测试.java：

```
public class Test {
  public static void main(String argv[]) {
    Ref ref = new Ref();
    ref.run();
  }
} 
```

参考java：

```
public class Ref {
  public void run() {
    System.out.println("hhhh");
  }
} 
```

我想在这里分享我的“更简单”模板（您只需要添加文件名和依赖项）：

```
OBJ = obj
SRC = src
JARS = $(wildcard lib/*.jar)
LIB = .:$(OBJ):$(shell echo '$(JARS)' | sed 's/jar /jar:/g')

targets := $(wildcard */*.java)
targets := $(patsubst %.java,%.class,$(targets))
targets := $(notdir $(targets))
targets := $(addprefix $(OBJ)/,$(targets))

define build
    @echo + cc $<
    @javac -classpath $(LIB) $< -d $(OBJ) $*
endef
define extend 
    $(shell echo $1|sed 's/.class/.java/'|sed 's/$(OBJ)/$(SRC)/')
endef

all: always $(targets)

.SECONDEXPANSION:
$(OBJ)/Ref.class: $$(call extend, $$@)
    $(call build)
$(OBJ)/Test.class:$$(call extend, $$@) $(OBJ)/Ref.class
    $(call build)

run:
    @java -classpath $(LIB) Test

.PHONY: clean always
clean:
    @rm -rf $(OBJ)
always:
    @mkdir -p $(OBJ) 
```

# android - 识别 ListView 中的选定复选框

> ID：13696866
> 
> 赞同：0
> 
> 时间：2012-12-04T05:48:05.600
> 
> 标签：android, android-listview, adapter, android-checkbox

我已经创建了`ListView`a`Checkbox`和一些`TextView`s，如下所示。我从. `Android Activity`_ 我正在使用 a在我的. 从数据库中检索数据以填充此.`extends``ListActivity``SimpleAdapter``ListView``Android Activity``ListView`

```
SimpleAdapter adapter = new SimpleAdapter(this,
        saleDriver.getOutstandings(clientId),
        R.layout.outstanding_list_row, new String[] {
                "sale_date", "invoice_number", "sale_total", },
        new int[] { R.id.tt_invoice_date,
                R.id.tt_invoice_no, R.id.tt_invoice_tot });

setListAdapter(adapter); 
```

`Pay`当用户`Menu`在 android 设备中按下按钮时，也会显示一个按钮（假设）。当用户检查一个或多个`CheckBoxes`并按下该按钮时，我需要获取该列表行中的数据。（根据下面附上的示例图片，我需要获取`4341`and `0910201`）。

我怎么能这样做？

![带有 CheckBox 的 Android ListView](../Images/edeeb66aaa0a7409b31a45d639c21a7c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:56:53.697

```
checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
       }
      } 
```

请参阅下面的[链接](http://www.vogella.com/articles/AndroidListView/article.html)，它可能会对您有所帮助，在此页面中，请在下面查看带有复选框的自定义列表视图及其侦听器。这可能是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:53:13.117

当用户点击菜单按钮时，您可以使用行号检查复选框的状态，您可以使用这些行并获取所需的数据。我建议使用自定义适配器来更好地控制数据。

# python - 我可以在同一台计算机上拥有多个同名的虚拟环境吗

> ID：13696872
> 
> 赞同：4
> 
> 时间：2012-12-04T05:48:22.090
> 
> 标签：python, django, virtualenv

我正在制作一些 Django 项目文件的基本框架，以便我可以将它们放在 git 上，并且每当我需要创建一个新的 Django 站点时，我可以从 git 中获取文件并开始一个空白项目。

在我的 fabfile 中，我正在生成一个名为`virutalenv`.

我只想知道，如果我需要在单台计算机上创建多个站点，那么所有站点都不会相同，但它们将位于项目目录中。

那样可以么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T06:20:09.967

可以创建多个`virtualenv`同名的s；但是，它们必须位于不同的父目录中。

或者，您可以在同一个父目录中创建多个 virtualenv，但名称不同。

# c# - 以编程方式添加按钮和 OnClientClick 但仍有回发问题

> ID：13696874
> 
> 赞同：0
> 
> 时间：2012-12-04T05:48:28.733
> 
> 标签：c#, javascript, asp.net, postback, onclientclick

我正在尝试使用 Javascript 隐藏一些 div，但我认为回帖会不断重新加载页面。为了让事情变得更复杂，我的按钮是由我背后的代码以编程方式添加的。

```
foreach (string line in thefilters)
        {
            Button newButton = new Button();
            newButton.ID = Convert.ToString(line);
            newButton.Text = Convert.ToString(line);
            newButton.CssClass = "tblbutton";
            //newButton.Attributes.Add("onclick", "hide_div("+newButton.ID+")");
            newButton.OnClientClick = "return hide_div('" + newButton.ID + "')";
            pnl_left.Controls.Add(newButton);
        } 
```

我的 javascript 位于标题中，如下所示。

```
<script type="text/javascript">
        function hide_div(filter) {
            var pnl_right = document.getElementById("pnl_right");
            var listofelements = pnl_right.getElementsById("div");
            for (var i = 0; i < listofelements.length; i++) {
                if (listofelements[i].id.indexOf(filter) == 0) {

                    document.getElementById(listofelements[i].id).style.display = 'inline';
                }
                else {
                    document.getElementById(listofelements[i].id).style.display = 'none';
                }
            }
            return false;

        } 
```

我可能在 javascript 中遇到了我想要实现的问题，但我相信如果我可以停止回发，那么我可以自己解决 javascript..

感谢您提前提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:56:41.140

您尚未显示在哪个事件中添加控件。但是我从您的问题中假设您在 Page_Load 中执行此操作。如果是，请尝试进入**OnInit**事件。

其次，在 Page_Load 你需要检查

```
if(!IsPostBack)
{
//your code for adding controls
} 
```

希望有帮助。

# vlc - 如何从内存中播放 MPEG-4？

> ID：13696876
> 
> 赞同：1
> 
> 时间：2012-12-04T05:48:39.750
> 
> 标签：vlc

我必须从内存中播放 MPEG-4，而不是文件。

因为我只从流媒体服务器获取一个 MPEG-4 文件并且必须立即显示它。

我想我应该使用 libvlc_media_new_path 和 libvlc_media_player_play，但是这些函数需要一个文件才能播放。

请帮帮我~！:->

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:25:35.157

也许你可以试试[imem 模块](http://forum.videolan.org/viewtopic.php?f=32&t=93842#p311611)，它可以从内存中获取数据。

从 VLC 论坛发布的一些[示例代码](http://forum.videolan.org/viewtopic.php?f=14&t=94808)。

# python - 如何在 macosx 上配置 STAF

> ID：13696883
> 
> 赞同：0
> 
> 时间：2012-12-04T05:49:31.500
> 
> 标签：python, macos

我在 macosx 中安装了一个 STAF，但是有一个文档说如何配置它，我 `./startSTAFProc.sh`用来运行 staf，然后`staf local ping ping`，它显示找不到命令 staf。关于 macosx 上的工作人员的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:31:50.223

这可能有用
[http://staf.sourceforge.net/current/STAFInstall.pdf](http://staf.sourceforge.net/current/STAFInstall.pdf)

**PATH**：必须包含`STAF`bin 目录才能启动`STAFProc`（例如`/Library/staf/bin`）。

**DYLD_LIBRARY_PATH**：必须包含`STAF`lib 目录（例如 `/Library/staf/lib`），除非您允许将软链接安装在默认系统目录中

**CLASSPATH**：必须包含`JSTAF.jar`文件（例如 `/Library/staf/lib/JSTAF.jar`）。`JSTAF.jar`包含`STAF Java APIs` 与 Java 程序进行通信的内容，`STAF`并且还需要注册`STAF`用 Java 编写的服务。

**STAFCONVDIR**`STAF` ：如果您没有安装`STAF`在默认目标目录（例如 `/Library/staf`）中，则必须设置为代码页目录。

**STAFCODEPAGE**：必须在不返回有效值的系统上设置`nl_langinfo(CODESET)`（特别是如果该调用返回 NULL 或空字符串）。此变量的值应包含系统正在使用的代码页。`odepage/alias.txt`有关有效值，请参见 c 。如果您不确定，请使用`LATIN_1`

# c# - 从 Add-Type'd 类中重新引用一个类会产生错误

> ID：13696884
> 
> 赞同：1
> 
> 时间：2012-12-04T05:49:30.843
> 
> 标签：c#, powershell, exception-handling, add-type

我有一个 C# 类（processcontroller.cs）。

在这个类中，我将其他类添加到列表对象（这些类将在稍后调用）。

我的一个子类如下所示：

```
namespace PowerShellTests
{
    public class Step1
    {
        public void Initialize()
        {
            try
            {
                File.Open("filethatdoesnotexist.txt", FileMode.OpenOrCreate);
            }
            catch (Exception exc)
            {
                ExceptionHandler.LogException(exc);
            }
        }
    }
} 
```

我定义了我的流程控制器路径，然后将其设置为第一个子类，如下所示：

```
processController.steps[0] = $Step1Class 
```

我用以下 3 个 PS 命令定义 $Step1Class

```
$script = [io.file]::readalltext('step1.cs')
add-type $script -lang csharpversion3
$Step1Class = New-Object Step1 
```

但是在上面代码的最后一行我得到一个错误：

> 当前上下文中不存在名称 ExceptionHandler。

我理解为什么会触发错误，但是除了`ExceptionHandler`在 Step1 类本身中定义之外，我还有哪些其他选项？我不想在 Step1.cs 中定义它的原因是因为这意味着我必须为每个其他步骤类重复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:58:06.860

我的猜测是 Powershell 没有引用您的自定义类（假设它是自定义类）。尝试编译它并将其作为程序集加载。

```
[System.Reflection.Assembly]::LoadFrom("path to assembly") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:33:41.553

您需要`add-type`为您的自定义类使用。然后`using`在需要它的所有其他类中为您的自定义类添加指令（这与您在 c# 中执行此操作的方式相同）。或 `add-type`与

```
Add-type $script -UsingNamespace PowerShellTests.MycustomExceptionHandlerClass 
```

# java - 写入文件时保留换行符

> ID：13696889
> 
> 赞同：1
> 
> 时间：2012-12-04T05:50:00.593
> 
> 标签：java, newline

我正在从数据库表中导出数据并将其写入文件中。换行符从数据库中正确检索并在写入字符串时保留（因此我能够重新导入导出的数据）。

我的问题是文件中的换行符是隐式的（即它们显示为换行符）。如果数据库值是字符串“line1 \r\n line2”，直接发送这个String给我的BufferedWriter + FileOutputStream的结果就是“line1 line2”

有什么方法可以将“line1 \r\n line2”字符序列准确写入文件？（我已经尝试过 bw.write(value.toCharArray())

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:29:18.993

您可以用双反斜杠替换每个转义序列：

```
public static String escapeChars(String str) {
    char[][] escapes = {
            { '\n', 'n' },
            { '\r', 'r' },
            { '\f', 'f' },
            { '\b', 'b' },
            { '\t', 't' }
    };
    for (char[] escape : escapes) {
        str = str.replaceAll(Character.toString(escape[0]), "\\\\" + escape[1]);
    }
    return str;
} 
```

可以轻松添加双撇号和单撇号转义，但我在此答案中省略了它。

# android - 在android中以编程方式将屏幕设置为关闭

> ID：13696891
> 
> 赞同：14
> 
> 时间：2012-12-04T05:50:02.513
> 
> 标签：android

如果在 1 分钟不活动后没有自动完成，我可以在 android 中以编程方式将屏幕设置为关闭吗？

这可以在android中以编程方式完成吗？

我发现了这个线程： [Android：如何以编程方式打开和关闭屏幕？](https://stackoverflow.com/questions/9561320/android-how-to-turn-screen-on-and-off-programmatically)

[以编程方式打开和关闭屏幕在某些设备上不起作用](https://stackoverflow.com/questions/13416563/turning-screen-on-and-off-programmatically-not-working-on-some-devices)

但1分钟后没有计时器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T06:01:41.397

是的，在这种情况下最好使用的方法是以编程方式设置屏幕超时。

```
Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT, 1000); 
```

1000 以毫秒为单位，表示 1 秒，您可以根据需要将其替换为任何值。

需要的许可：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

**更新**

它将覆盖手机系统值（设置/显示/睡眠），因此您可能需要在完成后恢复当前设置：

```
private static final int SCREEN_OFF_TIME_OUT = 13000;
private int mSystemScreenOffTimeOut;
private void setScreenOffTimeOut() {
    try {
        mSystemScreenOffTimeOut = Settings.System.getInt(getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT);
        Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT, SCREEN_OFF_TIME_OUT);
    } catch (Exception e) {
        Utils.handleException(e);
    }
}

private void restoreScreenOffTimeOut() {
    if (mSystemScreenOffTimeOut == 0) return;
    try {
        Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT, mSystemScreenOffTimeOut);
    } catch (Exception e) {
        Utils.handleException(e);
    }
} 
```

# drupal - Drupal 7 - 使用分类法或内容类型创建分层内容的视图

> ID：13696893
> 
> 赞同：4
> 
> 时间：2012-12-04T05:50:18.347
> 
> 标签：drupal, drupal-7, drupal-views, drupal-taxonomy

我正在尝试在 Drupal 7 中创建一个自定义视图，作为内容的登录页面。我创建了一个名为 Expertise Areas 的分类组，它是一个类别的分层列表 - 如下所示：

1.  专长领域 1

    1.  分区 1

    2.  分区 2

2.  专长领域 2

    1.  分区 1

现在这些术语用于将相关页面/内容类型链接在一起，因此对于网站的一个名为“研究领域”的部分，我有一个页面列表 - 每个页面都是“研究领域”的内容类型。定义的这些页面中的每一个都链接到上面列出的专业领域之一（分类术语）。

研究领域及其专业领域的关系是：

*   研究领域 1（专业领域 = 1）

    *   研究子领域 1（专业领域 = 2）

    *   研究子领域 2（专业领域 = 3）

*   研究领域 2（专业领域 = 4）

    *   研究子领域 1（专业领域 = 5）

我的目标是在层次结构中创建所有研究领域的登录页面列表，但我似乎无法在 Drupal 7 中找到一个好的方法。我正在使用 Views、Token、PathAuto、CCK、等等。我假设的这种层次结构需要基于其分类术语关系，如上图所示，只是因为我无法弄清楚如何在父级中获取特定内容类型的节点列表->子格式。

通过在菜单管理屏幕中移动链接，我设法在父->子结构中获取研究区域页面，但节点之间实际上没有自引用关系。这就是为什么我认为解决它的唯一方法是引用分类组。

希望这是有道理的，也非常渴望解决方案。我走错路可能很容易！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:47:23.047

我可能没有正确阅读此内容，但您可能想尝试使用除了[Taxonomy Menu之外的任一个](http://drupal.org/project/taxonomy_menu)[Menu Block](http://drupal.org/project/menu_block)。只需创建一个新菜单，比如研究，并启用分类菜单，您可以告诉分类从该特定菜单开始，然后根据术语构建链接列表。使用菜单块，您可以控制菜单并将其放置在您想要的任何页面上，可能使用上下文放置在基本页面上。

然后就可以随心所欲地设计风格。不需要任何视图。

希望这可以帮助。

# asp.net-mvc - asp.net mvc如何使用htmlhelper生成复杂类型？

> ID：13696895
> 
> 赞同：0
> 
> 时间：2012-12-04T05:50:20.533
> 
> 标签：asp.net-mvc, razor, html-helper

我有一个复杂类型的许可证作为视图模型。

```
public class License
{
    public string Name { get; set; }

    //  Other Properties

    public List<Function> Functions { get; set; }
}

public class Function
{
    public string Name { get; set; }

    //  Other Properties

    public List<Unit> Units { get; set; }
}

public class Unit
{
    public string Name { get; set; }

    //  Other Properties
} 
```

Function 的视图模板和 Unit 的视图模板都是动态渲染的。所以html看起来像这样：

```
<!-- LicenseView -->
@model License

@Html.TextBoxFor(m => m.Name)  //  this is OK

@for(int i=0; i<Model.Functions.Count; i++)
{
    @Html.Partial(Model.Functions[i].Name, Model.Functions[i])
} 
```

FunctionView 可能看起来像这样

```
@model Function

@Html.TextBoxFor(m => m.Name)  //  the generated html element's name is just 'Name'

@for(int i=0; i < Model.Units.Count; i++)
{
    @Html.Partial(Model.Units[i].Name, Model.Units[i])
} 
```

这是 UnitView

```
@model Unit

@Html.TextBoxFor(m => m.Name)  // the generated html element's name is just 'Name' 
```

所以我的问题是，我应该怎么做才能使 Name 属性正确？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:19:15.787

您需要在上述代码中进行的唯一更改是使用编辑器而不是局部视图。所以基本上你所有的代码看起来都类似于下面

```
@model License

@Html.TextBoxFor(m => m.Name) 
// Editor will take care of the repetition and u don't need to explicitly pass in the name
// Since the model already have the attribute
@Html.EditorFor(Model.Functions) 
```

然后在“Shared”文件夹下创建您的编辑器模板文件夹“EditorTemplates”，并将您的视图文件命名为“Function”

对 Unit 类做同样的事情，你会得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:56:50.200

请原谅我猜测这个问题，但你是在问`DisplayName`属性吗？

它将定义 html 助手如何显示您的字段标签

```
public class License
{
    [DisplayName("License Name")]
    public string Name { get; set; }

    //  Other Properties

    public List<Function> Functions { get; set; }
}

public class Function
{
    [DisplayName("Fun Name")]
    public string Name { get; set; }

    //  Other Properties

    public List<Unit> Units { get; set; }
}

public class Unit
{
    [DisplayName("Unit Name")]
    public string Name { get; set; }

    //  Other Properties
} 
```

一定要有

```
using System.ComponentModel; 
```

在您的模型代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:57:30.137

如果您希望能够为复杂对象图创建所有输入并让整个图由模型绑定器重构，最简单的方法是创建一个呈现整个图的单个视图或部分视图：

```
@for(int i=0;i<Functions.Length;i++){
    @for(int j=0;j<Units.Length;j++){

        @Html.EditorFor(Functions[i].Length[j].Unit)

    }
} 
```

另一种选择是找到一种方法将元素的索引传递给对象图上每个叶子的部分视图。

诚然，很多人不喜欢在单个视图中渲染复杂模型的想法。但是，您的另一个选择是使 Units 等的较小子视图依赖于注入或由上下文提供的附加数据。6个一个，半打另一个。几乎每次我完成“学术上正确”的方法，即为对象图中的每种类型制作一个视图或部分视图时，我最终都会得到一大堆视图，这些视图一开始是不可重用的，也是唯一的优势我有能力说，“看！很多小文件……完全相互依赖……我为什么要这样做？”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:35:14.640

正如@Jack 所说......您可以使用编辑器而不是 PartialViews 来做到这一点。

但是......如果你真的想使用PartialViews，你可以这样做，但要传递的模型应该是最重要的（License）。这种方式与 David Jessee 提出的类似，但将一个视图拆分为多个视图。

# node.js - 确定 socket.io 是 TCP 还是 HTTP

> ID：13696903
> 
> 赞同：2
> 
> 时间：2012-12-04T05:51:47.173
> 
> 标签：node.js, http, tcp, socket.io

这是我的节点服务器

```
var io = require('socket.io').listen(8889);
io.sockets.on('connection', function (socket) {
    socket.emit('news', { hello: 'world' });
    socket.on('my other event', function (data) {
        console.log(data);
    });
}); 
```

我正在尝试在[**socket.io.js的帮助下从客户端连接到这个节点服务器**](http://socket.io/)

我的连接没有任何问题
我的要求是我想创建一个`TCP`客户端可以连接的连接
但是我怎样才能知道并确认服务器是一个`TCP`类型或`HTTP`类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:54:18.983

Socket.IO 是一个`Lightweight protocol that sits on top of HTTP.`

[https://github.com/LearnBoost/socket.io-spec](https://github.com/LearnBoost/socket.io-spec)

您可以在此处查看更多信息[https://stackoverflow.com/a/8053026/1012381](https://stackoverflow.com/a/8053026/1012381) 但简而言之，您无法通过浏览器进行原始数据连接。

# android - 关于Android Framebuffer的几个疑问

> ID：13696904
> 
> 赞同：0
> 
> 时间：2012-12-04T05:51:52.827
> 
> 标签：android, framebuffer

我对Android Framebuffer几乎没有疑问，

1.  它与 Linux Framebuffer 相同吗？
2.  我们在哪里准确地分配两个缓冲区（用于双缓冲）（代码方面也是如此）？MDP 如何知道它需要使用哪个缓冲区来获取帧数据？
3.  MDP 如何表示他已从帧缓冲区中获取数据，并准备好获取新数据？

除此之外，我对surfaceflinger中使用的函数也有一些疑问，但如果上述问题得到回答，我可以稍后再问。

# flex-lexer - 用 flex 替换数字表达式

> ID：13696905
> 
> 赞同：2
> 
> 时间：2012-12-04T05:52:11.877
> 
> 标签：flex-lexer

我在代码源中使用 Flex 替换数字表达式：

例如：

```
Input string: ... echo "test"; if ($isReady) $variable = 2 * 5; ... 
Desired result string: ... echo "test"; if ($isReady) $variable = 10; ... 
```

我的代码：

```
%{
#include <stdio.h>
#include <stdlib.h>
%}

MYEXP [0-9]+[ \t\n\r]*\+[ \t\n\r]*[0-9]+

%%

{MYEXP} {
    printf("multiplication ");
    // code for processing
}

%%

void main()
{
    yylex();
} 
```

如何使用 Flex 处理乘法？还是我必须用C语言处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-23T16:49:06.823

一些答案在评论中，但这个问题两年来还没有答案。我认为一些笔记，为了完成的目的，对将来想这样的事情的人很有用。

问题中举例说明的简单算术表达式可以被 flex 之类的工具识别，它使用 FSA（有限状态自动机 - 或 FSM 有限状态机）匹配正则表达式。这在语法很简单时有效`id + id`，但在表达式变得更复杂时会失败。处理运算符优先级`id + id * id`和类似的嵌套括号`((id + id) * (id + id))`意味着**常规语法**不再起作用。这需要**上下文无关的语法**。（计算机科学专业的学生应该从乔姆斯基语言理论中了解这一点）。所以这些运算只能以`flex`最简单的表达形式来执行。

替换仅包含常量的简单表达式是一种称为**常量折叠**的优化，大多数编译器都将其作为标准执行。将此作为对大多数代码进行预处理的一种形式不会产生任何改进。因此，在提议编写工具来完成这样的工作时，您必须考虑它是否必要！

现在回到评论中提到的问题的实际细节；是的，每个运算符、加法和乘法都需要一个规则；并且当匹配时，将需要一个子字符串来获取操作数。它看起来像这样：

```
MYplusEXP [0-9]+[ \t\n\r]*\+[ \t\n\r]*[0-9]+
MYmultEXP [0-9]+[ \t\n\r]*\*[ \t\n\r]*[0-9]+

%%
            char [20] left; char * right;
{MYplusEXP} {right = strstr(yytext,"+"); /* yytext is already terminated with \0 */
             strncopy(left,yytext,right-yytext+1);        
             printf("%d",atoi(left)+atoi(right));
             }
{MYmultEXP} {right = strstr(yytext,"*");
             strncopy(left,yytext,right-yytext+1);        
             printf("%d",atoi(left)*atoi(right));
             } 
```

*但是我在做那个指针运算后感觉有点脏*

总之，使用其他工具可能会更好，或者根本不使用！

# google-chrome - 资源必须列在 web_accessible_resources 清单键中才能被扩展之外的页面加载

> ID：13696906
> 
> 赞同：31
> 
> 时间：2012-12-04T05:52:17.497
> 
> 标签：google-chrome, google-chrome-extension

在检查 onUpdated.addListener 的 URL 时，我尝试了多种方法（所有记录的过程）将脚本注入特定页面。最后，下面带有“executescript”的代码似乎可以工作，但并不完美。我可以得到警报，但无法通过 getElementById/getElementsByName 找到页面的文档元素。

当我检查页面时，脚本被注入。但在错误控制台中我得到：

> 拒绝加载 chrome-extension://jfeiadiicafjpmaefageabnpamkapdhe/js/Leoscript.js。资源必须列在 web_accessible_resources 清单键中，才能被扩展之外的页面加载。

清单.json：

```
{
  "name": "Leo Extension for Job Boards",
  "version": "1.6",
  "manifest_version": 2,
  "content_security_policy": "script-src 'self'; object-src 'self'",
  "description": "Leo Extension",
  "background": {
    "scripts": ["js/Leojshelper.js"],
    "persistent": true
  },
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["js/eventPage.js"],
      "run_at" : "document_start"
    }
  ],
  "icons":{"48":"images/bob48.png", "128":"images/bob128.png"}, //Define any icon sizes and the files that you want to use with them. 48/128 etc.
  "browser_action": {
    "default_icon": "images/bob.png",       // What icon do you want to display on the chrome toolbar
    "default_popup": "LeoExtwatch.html"     // The page to popup when button clicked.
  },
  "permissions": [
    "tabs", "<all_urls>"      // "http://*/*","https://*/*"             // Cross Site Access Requests
  ],
   "web_accessible_resources": ["js/LeoScript.js"]
} 
```

我还授予了脚本的“web_accessible_resources”权限，但仍然没有成功。后台脚本中的代码：

```
chrome.tabs.onUpdated.addListener(function (tabId, changeInfo, tab) {
    if (changeInfo.status == 'complete') {
        if (tab.url.indexOf("in.yahoo") !== -1) {
            chrome.tabs.update(tabId, { url: "https://login.yahoo.com/config/mail?.intl=us" });
            chrome.tabs.executeScript(tabId, {
                code: "document.body.appendChild(document.createElement('script')).src='" +
    chrome.extension.getURL("js/LeoScript.js") + "';"
            }, null); 
```

LeoScript.js 中的代码，将被注入特定页面。

```
$(document).ready(function () {
    alert('injected');
    document.getElementById('username').value='aaaaaaa';
}); 
```

内容脚本：eventPage.js，我用来注入脚本。

```
var script = document.createElement('script');
    script.src = chrome.extension.getURL("js/Leoscript.js");
    (document.body || document.head || document.documentElement).appendChild(script); 
```

请指出上述代码中将解决权限问题的任何更改。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T05:59:01.237

**更新：**终于找到了你的问题。在 eventPage.js 中，您尝试注入未列入白名单的 js/Leoscript.js，而不是列入白名单的 js/LeoScript.js（大写“S”）。请注意，URL*区分大小写*！

```
chrome.tabs.executeScript(tabId, {file: 'js/LeoScript.js'}); 
```

LeoScript.js：

```
alert('injected');
document.getElementById('username').value='aaaaaaa'; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-04T06:02:18.613

编辑：

这是使用[web_accessible_resources](https://developer.chrome.com/extensions/manifest.html#web_accessible_resources)和[Injection](https://developer.chrome.com/extensions/tabs.html#type-InjectDetails)组合的工作版本

***清单.json***

```
{
"name":"Off Screen Tabs Demo",
"description":"This demonstrates Off Screen Tabs API",
"manifest_version":2,
"version":"1",
"permissions":["tabs","<all_urls>"],
"browser_action":{
    "default_icon":"screen.png",
    "default_popup":"popup.html"
},
 "web_accessible_resources": ["js/LeoScript.js"] ,
 "permissions":["tabs","<all_urls>"]
} 
```

***LeoScript.js***

```
alert("Injected.."); 
```

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

***弹出.js*** *****

```
document.addEventListener("DOMContentLoaded",function (){
    chrome.tabs.executeScript( {"file": "js/LeoScript.js"});
}); 
```

如果您在运行它时仍有问题，请告诉我

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-10T08:57:09.987

许多人会因为这个错误而登陆这个页面，因为他们没有在 manifest.json 文件中包含他们的图像/网络资源。api文档的链接很有帮助，所以分享它：[清单中的网络资源](https://developer.chrome.com/extensions/manifest/web_accessible_resources)

# android - 在 ActionBarSherlock 中设置 Home 应用程序图标的方法

> ID：13696909
> 
> 赞同：2
> 
> 时间：2012-12-04T05:52:26.273
> 
> 标签：android, android-actionbar, actionbarsherlock, android-homebutton

我对在 ActionbarSherlock 上设置主页图标的方式感到困惑，当然我是这个 ActionBarSherlock 的新手。检查了许多来源，但无法获得如何设置主页图标。下面是我设置 ActionbarSherlock 的课程。

```
public abstract class BaseActivity extends SherlockActivity {

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuItem miPrefs = menu.add("Login");
        miPrefs.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        miPrefs.setOnMenuItemClickListener(new OnMenuItemClickListener() {

            @Override
            public boolean onMenuItemClick(MenuItem item) {
                Intent loginIntent = new Intent(BaseActivity.this, LoginForm.class);
                startActivity(loginIntent);
                return true;
            }
        });
        return true;
    }
} 
```

当然我知道如何在普通操作栏中将应用程序图标设置为主页图标。以下是我平时设置普通actionbar的方式。

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuItem menu1 = menu.add(0, 0, 0, "Login");
    menu1.setIcon(R.drawable.image1);
    menu1.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
} 
```

在 中`onCreate()`，我们必须通过 获取actionbar `getActionBar()`，然后使用`actionbar.setDisplayHomeAsEnabled(true)`，可以将应用程序图标设置为主页图标。通过设置以下我们可以听到主页图标的点击。

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case android.R.id.home:
        // Here we can keep the code to get to the mainactivity.
        return true;
    }
} 
```

另外，当我尝试通过`ActionBar actionbar = getSupportActionBar();`in获取操作栏时`oncreate()`，我收到此错误，

> 类型不匹配：无法从 com.actionbarsherlock.app.ActionBar 转换为 android.app.ActionBar

我对如何根据上面的 ActionbarSherlock 代码将应用程序图标设置为主页图标并监听点击感到困惑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:12:17.073

**使应用程序图标在 ActionBar 中可点击（使用 ABS）**

```
@Override
public void onCreate() {
    super.onCreate();
    getSupportActionBar().setHomeButtonEnabled(true);
} 
```

ABS 是一个库，因此当您想要访问它的功能时，您必须使用它自己的方法/类，不要与默认的 Android 方法/类（例如`getActionBar()`和`getSupportActionBar()`）混淆。示例代码的好地方是[https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/demos](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/demos)。

**聆听点击**

和你上面的一样。

# ios - 我应该为录音机 iOS 应用程序使用什么音频格式？

> ID：13696911
> 
> 赞同：1
> 
> 时间：2012-12-04T05:52:41.507
> 
> 标签：ios, audio-recording, audioformat

我想为 iOS 制作一个录音机应用程序，我首选的音频格式是 DSS，因为我希望录制的文件很小。

iOS 是否支持 DSS 格式？如果不是，我可以为我的应用程序使用什么其他格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:59:50.173

# c# - 重定向到默认值

> ID：13696917
> 
> 赞同：0
> 
> 时间：2012-12-04T05:53:15.113
> 
> 标签：c#, asp.net, asp.net-mvc

有：网页

例如：

```
url/willpower/default.aspx 
```

* * *

```
url/willpower/purchase_order.aspx
url/willpower/movement.aspx 
```

如何制作 - 例如，如果用户通过 url -

```
 http://<machine_name>:<port>/willpower/movement.aspx 
```

（它会打印一些错误——>“您无权通过直接链接查看。”）

然后，在 5 秒内，它将用户重定向到`default.aspx`.

带着敬意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:53:49.703

重定向部分由@teddy 回答。对于第一部分，您可以设置使用名为`Request.UrlReferrer`this 的服务器变量，这将为您提供当前页面的请求来自何处。如果它不是来自您想要的页面（我猜您希望从 default.aspx 访问每个页面），那么一旦 page_load 中的此检查失败，则显示消息“您无权通过直接链接查看内容. 你将被重定向。并使用@teddy 给出的代码设置重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:11:04.077

使用 javascript setTimeOut

```
setTimeout(function () { window.location="Default.aspx" }, 5000); 
```

# c - C将void指针转换为函数指针

> ID：13696918
> 
> 赞同：16
> 
> 时间：2012-12-04T05:53:17.377
> 
> 标签：c

我正在尝试创建一些可用于创建自己的单元测试库的宏。我的头文件如下所示：

```
#ifndef _TEST_H_
#define _TEST_H_

#include <stdio.h>
#include "hehe_stack.h"

static hehe_stack* tests;
typedef int (*testfunc)();

#define test_init() tests = hehe_stack_init();
#define test_register(test) hehe_stack_push(tests, test);
#define test_info() fprintf(stdout, "running %s :: %s \n", __FILE__, __func__);
#define test_run() testfunc = (int (*)()) hehe_stack_pop(tests); testfunc(); return 0;

#endif 
```

在每个测试 .c 文件中，我想将一些函数指针推入测试堆栈，然后将每个函数指针从堆栈中弹出并调用它。我的堆栈弹出方法返回一个 void 指针，而我推入它的函数指针返回一个 int 并且不带任何参数。我的语法不正确吗？我觉得我应该能够做到这一点。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-04T06:59:25.387

C99 标准不允许在指向数据的指针（在标准中，“对象或不完整类型”，例如`char*`or `void*`）和指向函数的指针之间进行转换。

> 6.3.2.3:8 指向一种类型函数的指针可以转换为指向另一种类型函数的指针，然后再转换回来；结果应与原始指针比较。如果转换后的指针用于调用类型与指向的类型不兼容的函数，则行为未定义。

一个原因是指向对象的指针和指向函数的指针不必是相同的大小。在示例架构上，前者可以是 64 位，而后者可以是 32 位。

您可以将指向某个函数类型的指针转​​换为指向另一个函数类型的指针，如果您需要将函数指针存储在数据结构中，我建议您使用这种技术。任何函数类型都可以。这意味着您不能重用用于数据指针的数据结构。您需要复制数据结构并将其更改为保存函数指针。

在调用之前不要忘记转换回正确的函数指针类型，否则这是未定义的行为。

请注意，正如 Andrew Mellinger 所指出的，一些编译器允许在每个方向上进行转换。C11 的附件“J.5 通用扩展”[列表](http://port70.net/~nsz/c/c11/n1570.html#J.5.7)：

> J.5.7 函数指针转换
> 
> 1 指向对象或 void 的指针可以转换为指向函数的指针，从而允许将数据作为函数调用 (6.5.4)。
> 
> 2 指向函数的指针可以转换为指向对象或 void 的指针，从而允许检查或修改函数（例如，通过调试器）（6.5.4）。

一些 POSIX 接口，例如`dlsym()`，实际上也要求这些转换在 POSIX 系统的 C 编译器中有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T06:06:55.010

你可以这样做，但你不应该意外地这样做，所以语法变得特别尴尬。一个人不转换函数指针，而是一个指向函数指针的指针，然后分配它。

```
#define test_run() *((void**)&testfunc) = hehe_stack_pop(tests); testfunc(); return 0; 
```

这变成`&testfunc`了一个指向 a 的指针`void*`，然后取消引用它并将 another 的值分配`void*`给它，这是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:42:46.963

建议的代码永远不会编译，因为您不应该取消引用 void * 指针（你怎么能？没有关于特定指针的类型信息。）

cmotley 在他的评论中建议的方式是正确的方法，尽管为了可读性我会建议一些改进：

```
typedef int (*tTestFuncSignature)(void)
#define test_run() tTestFuncSignature testfunc = hehe_stack_pop(tests); testfunc(); 
```

甚至使用此宏来避免隐藏的名称冲突：

```
#define test_run() ((tTestFuncSignature)hehe_stack_pop(tests))(); 
```

无论哪种方式，您都必须确保（例如通过合同）您的堆栈中只有有效的指针，或者在调用函数之前必须先测试指针。

编辑：更正了代码格式

# web-services - EJB 3 / Web 服务的调用侦听器？

> ID：13696921
> 
> 赞同：0
> 
> 时间：2012-12-04T05:53:34.870
> 
> 标签：web-services, jakarta-ee, jboss, ejb-3.0, listener

我们有一个使用`EJB 3`无状态 bean 的系统，它也作为 Web 服务公开。

来自其他团队的集成请求希望我们的系统在调用后（通过 Web 服务或其他方式）向其他系统发出通知。由于这与我们的系统并不完全相关，我更愿意将此功能与我们自己的系统松散耦合，而不是将这些功能硬编码到我们的系统代码中。

EJB 或 Web 服务上是否有任何功能可以实现我想要的？我们需要一个方法级别的调用侦听器，以便在调用 EJB 方法/Web 服务时，它可以触发回调/消息，以便我们可以根据它执行某些操作。我希望它是用于设置 JMS 或其他东西的某种注释/配置。

我们使用 JBoss 作为应用服务器。如果有任何 JBoss 特定的解决方案，也欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:28:54.950

我建议两种选择：

*   使用 JMS。当您提到松散耦合时，我首先想到的是 JMS - 您可以在方法调用后将消息放在某个队列/主题上，并让侦听器执行进一步的操作。JMS 消息可以携带各种对象——唯一的要求是类实现 Serializable ( [ObjectMessage#setObject](http://docs.oracle.com/javaee/6/api/javax/jms/ObjectMessage.html) )；另一个优点是您可以（取消）独立部署您的无状态 bean 和其他系统。它们可以在不同的 JVM 上。

*   使用拦截器。从技术上讲，它们将在您的方法运行之前被调用，但当然总有一些很好的[解决方法](https://stackoverflow.com/questions/6426636/using-ejb-interceptors-after-a-method-call):-) 这是有关拦截器的[官方文档](http://docs.oracle.com/javaee/6/tutorial/doc/gkeed.html)，但是由于您提到您正在使用 JBoss，因此也可以找到一些有趣的材料在[JBoss 页面](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/Callbacks_and_Callback_Handlers.html)上。

# javascript - 检查 ASP.NET Gridview 中的所有复选框，同一页面上的多个表

> ID：13696922
> 
> 赞同：0
> 
> 时间：2012-12-04T05:53:37.650
> 
> 标签：javascript, asp.net, gridview, checkbox

好的，所以有大量的文件我已经提交并在一天中尝试了很多次，但似乎无法确定这个问题。我在一页上有多个 Gridviews（在可折叠面板内），其中两个有一个包含复选框的列（第 7 列，从 0 开始）。我想让用户使用标题行中的复选框字段来选择/取消选择所有复选框。我更喜欢使用 Javascript 来完成此操作，但似乎无法到达那里。[这](http://bit.ly/Vu67ct)是我更喜欢的方式，因为它似乎可以与页面上的多个表格一起使用（如果我错了，请纠正我）。使用 Firebug，没有错误，它只是无法正常工作，我无法找出原因。

这是我的 ASP.NET 代码：

```
 <asp:GridView ID="gvSerialNumberDetails" CellPadding="5" runat="server" CssClass="wind" AutoGenerateColumns="false">
            <HeaderStyle CssClass="windHeader" />
            <Columns>
                <asp:BoundField DataField="Description" HeaderText="Description" />
                <asp:BoundField DataField="Serial Number" HeaderText="Serial Number" />
                <asp:BoundField DataField="Facility" HeaderText="Facility" />
                <asp:BoundField DataField="Department" HeaderText="Department" />
                <asp:BoundField DataField="EmpID" HeaderText="EmpID" />
                <asp:BoundField DataField="Configuration" HeaderText="Config" />
                <asp:BoundField DataField="Error" HeaderText="Errors" />
                <asp:TemplateField>
                    <HeaderTemplate> 
                        <asp:CheckBox ID="chkHeader" ToolTip="Select All" runat="server" 
                            onclick="changeAllCheckBoxes(this)" />
                    </HeaderTemplate>
                    <ItemTemplate>
                        <asp:CheckBox ID="chkItem" runat="server" ToolTip="Select this item" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

这是我的Javascript：

```
<script type="text/javascript" language="javascript">
    function changeAllCheckBoxes(sender) {
    var gridViewRows = GetParentElementByTagName(sender, "table").rows;
        for (var i = 1; i < gridViewRows.length; ++i) {
            gridViewRows[i].cells[7].childNodes[0].checked = sender.checked;
        }
    }

    function GetParentElementByTagName(element, tagName) {
        var element = element;
        while (element.tagName != tagName)
            element = element.parentNode;
        return element;
    }
</script> 
```

**更新**

好的，所以我现在遇到错误。`"TypeError: element is null [Break On This Error] </tr><tr>"`我该如何解决这个问题？似乎它应该爬上 DOM 并找到 table 元素，但没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:23:47.137

请尝试下面的javascript函数而不是你的。我检查了这个函数，它在我的代码中完美运行。如果您发现任何困难，请告诉我。

```
 function changeAllCheckBoxes(objparentcheckbox)
   {              
      var HeaderCheckboxControl = objparentcheckbox
      var table = getParentByTagName(HeaderCheckboxControl, 'table');

      //get all the control of the type INPUT in the base control.
      var Inputs = table.getElementsByTagName("input"); 

      for(var n = 0; n < Inputs.length; ++n)
         if(Inputs[n].type == 'checkbox')
         {
            Inputs[n].checked = HeaderCheckboxControl.checked;        
         }        
      return false;
   }
function getParentByTagName(obj, tag)
{
    var obj_parent = obj.parentNode;
    if (!obj_parent) return false;
    if (obj_parent.tagName.toLowerCase() == tag) return obj_parent;
    else return getParentByTagName(obj_parent, tag);
} 
```

上述方法的Jquery交替如下：

```
function changeAllCheckBoxes(objparentcheckbox)
{
    if(objparentcheckbox.checked)
     $(objparentcheckbox).closest('table').find('input[type=checkbox]').attr('checked', 'checked');        
    else    
     $(objparentcheckbox).closest('table').find('input[type=checkbox]').removeAttr('checked', 'checked');            
} 
```

在这里我为演示添加了 jsfiddle 链接：[演示链接](http://jsfiddle.net/9KQH7/11)

# iphone - 通过使用 GPS 获取当前位置，在运行时在地图上绘制路线？iPhone (iOS6)

> ID：13696923
> 
> 赞同：-2
> 
> 时间：2012-12-04T05:53:39.117
> 
> 标签：iphone, objective-c, ios, sdk

我想用 GPS 获取我当前的位置，当我移动时，我在地图上绘制了路径。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:59:06.487

您可以使用 MKPolyline 绘制路线

# google-api - 使用 C# API 从 Google 日历的重复事件更新事件

> ID：13696924
> 
> 赞同：1
> 
> 时间：2012-12-04T05:53:41.230
> 
> 标签：google-api, google-calendar-api, recurring-events

我正在使用 C# Google API 从我的应用程序（asp.net mvc - C#）中以编程方式添加重复事件。以下是它的代码（我添加了一个从 2012 年 12 月 1 日开始到 2012 年 12 月 3 日结束的每日活动）：

```
GOAuthRequestFactory authFactory = new GOAuthRequestFactory("cl", "MyApp");
authFactory.ConsumerKey = "xxxx";
authFactory.ConsumerSecret = "yyyy";
authFactory.Token = "zzzz";
authFactory.TokenSecret = "ssss";
Google.GData.Calendar.CalendarService service = new Google.GData.Calendar.CalendarService(authFactory.ApplicationName);
service.RequestFactory = authFactory;

EventEntry entry = new EventEntry();
entry.Title.Text = "Year End Meeting";

Recurrence recur = new Recurrence();
recur.Value = "DTSTART;VALUE=DATE:20121201\r\nDTEND;VALUE=DATE:20121201\r\nRRULE:FREQ=DAILY;UNTIL=20121203;INTERVAL=1";
entry.Recurrence = recur;

Uri postUri = new Uri("https://www.google.com/calendar/feeds/default/private/full");
EventEntry insertedEntry = service.Insert(postUri, entry);
if (insertedEntry != null && !string.IsNullOrEmpty(insertedEntry.EventId))
{
   //Update the Google Event Id to the Event Table
    this.UpdateGoogleEventId(_userId, _eventId, insertedEntry.EventId);
} 
```

直到这一切顺利。现在我需要从重复事件中更新特定事件（仅此实例）。例如；我需要将 2012 年 12 月 2 日活动的标题更改为“明年计划”。同样，我需要对所有关注做同样的事情，这个系列中的所有事件也更新操作。我正在根据 Google 事件 ID（在创建重复事件时的响应中）删除所有事件，然后再次创建事件，这是一种双重工作。

这就是我删除所有重复事件并按照上面给出的创建的方式：

```
Uri delteUri = new Uri("https://www.google.com/calendar/feeds/default/private/full/" + googleeventid);
EventQuery deleteQuery = new EventQuery(delteUri.ToString());
EventFeed deleteFeed = service.Query(deleteQuery);
if (deleteFeed.Entries.Count > 0)
{
   AtomEntry eve = deleteFeed.Entries[0];
   if (eve != null)
   {
       service.Delete(eve);
   }
} 
```

根据所需条件仅更新实例的最佳方法是什么（仅此实例、所有以下、本系列中的所有事件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T16:04:18.603

10分钟前才发现这个。

要在特定日期访问重复事件的单个实例，请使用以下作为事件 url：

```
https://www.google.com/calendar/feeds/default/private/full/" 
    + googleEventId + "_" + dateTime.ToString("yyyyMMdd"); 
```

# .net - vb.net 中是否有任何用于触摸屏窗体应用程序的工具包、参考或库文件？

> ID：13696925
> 
> 赞同：1
> 
> 时间：2012-12-04T05:53:42.550
> 
> 标签：.net, vb.net, winforms, touch

我正在为桌面应用程序创建简单的应用程序，用户可以在其中通过笔/手写笔输入作为他们的签名。.net 中是否对此功能有任何参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:37:50.837

我宁愿找到这个类/命名空间：System.Windows.Input.Stylus (http://msdn.microsoft.com/en-us/library/ms604577.aspx)。虽然它有助于捕捉手写笔动作和系统手势，但不清楚如何制作自己的手势。

哔叽

# nhibernate - NHibernate 不持久更改我的对象

> ID：13696928
> 
> 赞同：1
> 
> 时间：2012-12-04T05:54:18.047
> 
> 标签：nhibernate, asp.net-mvc-4, castle-windsor

我的 ASP.NET MVC 4 项目正在使用 NHibernate（存储库后面）和 Castle Windsor，使用 AutoTx 和 NHibernate 设施。我遵循了 haf 编写的指南，我可以创建和读取对象。

我的 PersistenceInstaller 看起来像这样

```
public class PersistenceInstaller : IWindsorInstaller
{
    public void Install(Castle.Windsor.IWindsorContainer container, Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store)
    {
        container.AddFacility<AutoTxFacility>();            
        container.Register(Component.For<INHibernateInstaller>().ImplementedBy<NHibernateInstaller>().LifeStyle.Singleton);
        container.AddFacility<NHibernateFacility>(
            f => f.DefaultLifeStyle = DefaultSessionLifeStyleOption.SessionPerWebRequest);          
    }
} 
```

NHibernateInstaller 直接来自[NHib Facility Quickstart](https://github.com/haf/Castle.Facilities.NHibernate/wiki/NHibernate-Facility---Quick-Start)。

我在我的基础存储库中使用 ISessionManager ...

```
protected ISession Session
{
    get
    {
        return _sessionManager.OpenSession();
    }
}

public virtual T Commit(T entity)
{
    Session.SaveOrUpdate(entity);            
    return entity;
} 
```

最后，导致问题的我的应用程序代码：

```
[HttpPost]
[ValidateAntiForgeryToken]        
[Transaction]
public ActionResult Maintain(PrescriberMaintainViewModel viewModel)
{           
    if (ModelState.IsValid)
    {
        var prescriber = UserRepository.GetPrescriber(User.Identity.Name);

        //var prescriber = new Prescriber { DateJoined = DateTime.Today, Username = "Test" };                
        prescriber.SecurityQuestion = viewModel.SecurityQuestion;
        prescriber.SecurityAnswer = viewModel.SecurityAnswer;
        prescriber.EmailAddress = viewModel.Email;
        prescriber.FirstName = viewModel.FirstName;
        prescriber.LastName = viewModel.LastName;
        prescriber.Address = new Address
                                {
                                    Address1 = viewModel.AddressLine1,
                                    Address2 = viewModel.AddressLine2,
                                    Address3 = viewModel.AddressLine3,
                                    Suburb = viewModel.Suburb,
                                    State = viewModel.State,
                                    Postcode = viewModel.Postcode,
                                    Country = string.Empty
                                };

        prescriber.MobileNumber = viewModel.MobileNumber;
        prescriber.PhoneNumber = viewModel.PhoneNumber;
        prescriber.DateOfBirth = viewModel.DateOfBirth;
        prescriber.AHPRANumber = viewModel.AhpraNumber;
        prescriber.ClinicName = viewModel.ClinicName;
        prescriber.ClinicWebUrl = viewModel.ClinicWebUrl;
        prescriber.Qualifications = viewModel.Qualifications;
        prescriber.JobTitle = viewModel.JobTitle;

        UserRepository.Commit(prescriber);          
    }

    return View(viewModel);
} 
```

上面的代码将保存一个新的处方者（通过取消注释掉注释掉的行等来测试）。

我正在使用 NHProf 并已确认没有将 sql 发送到数据库进行更新。我可以看到正在执行的读取，仅此而已。

在我看来，NHibernate 无法识别实体被更改，因此不会生成 sql。或者可能没有提交事务？

我已经在网上搜索了几个小时，现在试图解决这个问题，作为最后的绝望行为，我已经在 SO 上发布了。有任何想法吗？:)

哦，在 NHProf 中，我看到了三个会话（1 个用于来自 repo 的 GetPrescriber 调用，一个用于更新（没有 sql）- 一个用于我对基类的 actionfilter 中的某些操作）。我还收到有关使用隐式事务的警报。这让我很困惑，因为我认为我正在做我需要做的一切来获得交易——使用 AutoTx 和 Transaction 属性。根据我的 Windsor 配置，我还希望每个 web 请求只有 1 个会话。

更新：似乎在花一天时间阅读 NHibernateFacility 和 AutoTx Facility 的源代码以进行自动交易之后，AutoTx 没有在我的 INHibernateInstaller 实现上设置拦截器。这似乎意味着每当 SessionManager 调用 OpenSession 时，它都会调用不带参数的默认版本，而不是接受拦截器的版本。AutoTxFacility 在内部向 windsor 注册 TransactionInterceptor，以便可以通过使用 AutoTx 的 TransactionalComponentInspector 的 Windsor 在我的 INHibernateInstaller 混凝土上添加拦截器

[github上的AutoTxFacility源码](https://github.com/haf/Castle.Transactions/blob/master/src/Castle.Facilities.AutoTx/AutoTxFacility.cs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:38:10.193

对我来说，它看起来像是为每次调用存储库创建会话。一个会话应该跨越整个业务操作。它应该在开始时打开并在最后提交和处置。

这段代码中还有其他奇怪的东西。

*   Commit 是一个与 SaveOrUpdate 完全不同的概念。
*   而且您也不需要告诉 NH 存储更改。您不需要为会话中已经存在的对象调用 session.Save。无论如何，它们都被存储了。您只需要在添加新对象时调用 session.Save 即可。
*   确保您将事务用于整个业务操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:19:22.123

上面的代码片段中有一个最有可能“意外”的部分。并通过 NHProf 的观察证明

> 哦，在 NHProf 中，我看到了三个会话（1 个用于来自 repo 的 GetPrescriber 调用，一个用于更新（没有 sql）- 一个用于在基类上的 actionfilter 中的某些操作）。

调用**`OpenSession()`**会触发**新**会话实例的创建。

```
protected ISession Session
{
    get { return _sessionManager.OpenSession(); }
} 
```

因此，每当代码访问该`Session`属性时，都会创建**新的会话**实例（一次又一次）。一个会话用于获取，一个用于 udpate，一个用于过滤......

正如我们在这里看到的，返回的会话`SessionManager.OpenSession()`必须用于整个范围（工作单元、Web 请求......）

[http://docs.castleproject.org/Windsor.NHibernate-Facility.ashx](http://docs.castleproject.org/Windsor.NHibernate-Facility.ashx)

我们需要的语法，si 创建一个会话（第一次访问时）并重用它直到 enf 范围*（然后正确关闭它，提交或回滚事务......）*。无论如何，现在的第一件事就是以`Session`这种方式更改属性：

```
ISession _session;
protected ISession Session
{
    get 
    { 
      if (_session == null)
      {
         _session = sessionFactory.OpenSession();
      }
      return _session; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:04:25.350

在昨天花了一整天的时间在 github 上搜索 AutoTx 和 NHibernate 工具但一无所获之后，我开始了一个干净的项目，试图复制这个问题。不幸的是，对于复制，一切正常！我在源代码上运行了 Update-Package 并关闭了新版本的 Castle.Transactions 并且我运行正常。我确实对自己的代码做了一些小的调整。那是删除 UserRepository.Commit 行。

我不需要修改我打开会话的方式。这是由 SessionManager 实例处理的。随着对 Castle.Transactions 的更新，正在识别 Transaction 属性并正在创建一个事务（NHProf 中不再有警报证明了这一点）。

# c++ - CC1不能在类定义中初始化，为什么？那我将如何初始化它？请有人帮助我

> ID：13696932
> 
> 赞同：0
> 
> 时间：2012-12-04T05:54:25.293
> 
> 标签：c++

CC1不能在类定义中初始化，为什么？那我将如何初始化它？

```
 class X
    {
    public:
     X(){}
     const char CC1 = 25;       // Line1
     static const int SCI = 50; // Line2
    } ;

        int main()

    {
     X Obj1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:55:26.037

您在构造函数成员初始化列表中对其进行初始化：

```
class X
{
public:
    X() : CC1(25) {}  // <--- here
    const char CC1;       
    static const int SCI = 50; 
} ; 
```

但如果它`25`适用于所有情况，为什么不做`static`呢？浪费内存是否符合您的要求？

# jakarta-mail - 带有绝对图像链接的 HTML EMAIL - Javamail

> ID：13696936
> 
> 赞同：1
> 
> 时间：2012-12-04T05:54:50.200
> 
> 标签：jakarta-mail, html-email

我正在尝试发送包含以下内容的 html 电子邮件：

```
<p><img alt="" src="http://www.xyz.com/uploads/images/abc.JPG" style="width: 400px; height: 225px;" /></p> 
```

但没有收到发送？我没有将图像作为附件的选项，因为我使用 html 编辑器将 n 上传图像放入内容中，并将此 html 内容保存为电子邮件发送。

正常的 html 电子邮件正在正确发送，但当我将任何带有直接 url 的图像包含到他们的位置时却没有。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:34:28.837

但是问题现在解决了，我直接在 MimeMessage 对象中使用 setContent 方法设置消息正文，使用 Multipart 和 MimeBodyPart 解决了问题。

# android - 如何在android中获取属性文件值？

> ID：13696940
> 
> 赞同：0
> 
> 时间：2012-12-04T05:54:59.070
> 
> 标签：android

我是android应用程序开发的新手。

在我的 android 项目中，我将属性文件放在 assets 文件夹中。

我的要求是，如何从属性文件中获取值？

请帮助我前进..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:12:08.213

请参阅[http://developer.android.com/reference/java/util/Properties.html](http://developer.android.com/reference/java/util/Properties.html)。

从您的文件中加载`Properties`，然后使用键检索它们的值。

# ajax - 使用 ajax 的 400 错误请求错误

> ID：13696947
> 
> 赞同：0
> 
> 时间：2012-12-04T05:55:40.683
> 
> 标签：ajax, web-services

我正在使用 ajax 来调用 web 服务。但是当我检查萤火虫中的输出时，我得到 400 bad request 错误。你能告诉我为什么我会得到这个错误。为什么我会收到错误消息。以下代码有什么问题吗？以下是我编写的代码：

```
<script>

    function HelloWorld() {

        var sDate = '<cart currency="USD" total="5.38"><cart-shipment total="5.38" shipment-reference="33261668"><shipment-tax total="0.39" /><shipment-cost total="0" /><shipment-address><address>33 W 59TH STREET APT 203 </address><zip>60559</zip><city>WESTMONT</city><state>IL</state><country>US</country><phone></phone><name>John Baker</name><attention-of>KID</attention-of></shipment-address><items><item total="4.99"><item-name>Hello Kitty - cupcake</item-name><item-description>Hello Kitty - cupcake</item-description><item-price>4.99</item-price><item-quantity>1</item-quantity></item></items></cart-shipment></cart>';

        var webMethod = "https://abc.com/Services/TransactionService.svc";

        var sr = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/" xmlns:ns2="vp">' +
               '<soapenv:Header/>' +
                    '<soapenv:Body>' +
                        '<tem:ProcessTransaction>' +
                            '<tem:checkOutData>' + sDate + '</tem:checkOutData>' +
                            '<tem:token>5OMc0y1miZN5EFqiZ8IiLn+mzdboyTuTob43Kp4+VcVtrYGQvl7QWJB5OeoPWQpBUej6LSejwE8f16tDhg1EUqDtGGAdn/MM3Gk8MOr0FvFko84ogfhIs9HCUjum2MUN1a/sALjhen+DareUP5wWbIpnu8Eaqg2Tv0RjEsq1bqYblHcXfKIq7anTDzYoHN8Y7LAXgdEhSrVcEIB3+sCCDQ==</tem:token>' +
                            '<tem:transactionDescription>Volusion Order Description</tem:transactionDescription>' +
                        '</tem:ProcessTransaction>' +
                    '</soapenv:Body>' +
                '</soapenv:Envelope>';

        $.ajax({
            type: "POST",
            url: webMethod,
            data: sr,
            contentType: "text/xml",
            dataType: "xml",
            cache: false,
            success: OnSuccess,
            error: OnError
        });
        return false;

    }
    function OnSuccess(data, status) {

        alert(data);

    }

    function OnError(request, status, error) {

        alert(error);
    }

    </script>
    <div>
            <input type="button" value="Soap" onclick="HelloWorld();" />
        </div> 
```

以下是我在 firebug 中收到的输出：

请求标头：OPTIONS /Services/TransactionService.svc?wsdl HTTP/1.1 主机：development.virtualpiggy.com 连接：keep-alive 访问控制请求方法：POST 来源：[http](http://test.com) ://test.com 用户代理：Mozilla /5.0 (Windows NT 6.0) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11 Access-Control-Request-Headers: origin, content-type, accept Accept: */* Referer: [http://test. com/Desktop/test_webservice.htm](http://test.com/Desktop/test_webservice.htm) Accept-Encoding: gzip,deflate,sdch Accept-Language: en-US,en;q=0.8 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q =0.3

响应头：Access-Control-Allow-Origin:http://yann-asus:81 [http://www.kkdmarketing.com](http://www.kkdmarketing.com) Cache-Control:private Content-Length:0 Date:Tue, 04 Dec 2012 06:42: 23 GMT 服务器：Microsoft-IIS/7.0 设置-Cookie：SessionId=ovpsrxt33jyoi3pzidvxkh0o；路径=/; 安全的; HttpOnly X-AspNet-Version:4.0.30319 X-Powered-By:ASP.NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:50:19.017

我会尝试在 contentType 中设置一个 utf-8 字符集

```
$.ajax({
        type: "POST",
        url: webMethod,
        data: sr,
        contentType: "text/xml; charset=utf-8",
        dataType: "xml",
        cache: false,
        success: OnSuccess,
        error: OnError
}); 
```

# javascript - 使用 Angularjs 或 Jquery 重构 Json

> ID：13696955
> 
> 赞同：1
> 
> 时间：2012-12-04T05:56:20.773
> 
> 标签：javascript, jquery

用 Angularjs 或 Jquery 重构 Json 的最佳方法是什么？

我得到一个具有以下格式的 json

```
 [
  {
     "address":"balh",
     "lat":123,
     "long":456
  },
  {
     "address":"balh",
     "lat":321,
     "long":543
  },
  {
     "address":"balh",
     "lat":432,
     "long":333
  },
  {
     "address":"balh",
     "lat":123,
     "long":456
  },
  {
     "address":"balh",
     "lat":321,
     "long":543
  },
  {
     "address":"balh",
     "lat":432,
     "long":333
  }
] 
```

我需要的格式是将它与以下三个分组..

```
 {
   "1":[
      {
         "address":"balh",
         "lat":123,
         "long":456
      },
      {
         "address":"balh",
         "lat":321,
         "long":543
      },
      {
         "address":"balh",
         "lat":432,
         "long":333
      }
   ],
   "2":[
      {
         "address":"balh",
         "lat":123,
         "long":456
      },
      {
         "address":"balh",
         "lat":321,
         "long":543
      },
      {
         "address":"balh",
         "lat":432,
         "long":333
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:06:05.820

这对我来说更像是一个直接的 JavaScript 问题。

下面的代码应该将您的数组分解为一个数组字典，每个数组包含三个（或更少）对象：

```
var yourArray = [/*whatever it is in here*/];

var output = {};

for(var i = 0, c = 1, current = null; i < yourArray.length; i++) {
    if(i % 3 == 0) {
        output[c++] = current = [];
    }
    current.push(yourArray[i]);
} 
```

[**这是一个小提琴（使用Angular）在输出之前和之后演示**](http://jsfiddle.net/blesh/Hmn96/)

# javascript - Javascript 到 C

> ID：13696956
> 
> 赞同：1
> 
> 时间：2012-12-04T05:56:21.780
> 
> 标签：javascript, c

我有一个 Javascript 程序，它可以找到数组的最大值，但现在我想直接翻译成 C。请参见下面的 Javascript 和 C 代码：

Javascript（作品）：

```
var tail = function(arr, pos, max) { //max and pos starts at 0 when called
    if (pos === arr.length - 1) {
        return arr[pos] > arr[max] ? arr[pos] : arr[max];
    }
    max = arr[pos] > arr[max] ? pos : max;
    return tail(arr, pos += 1, max);
}; 
```

C（需要直接从Javascript翻译）：

```
int main(int arr[], int pos, int max) {
    if (pos == arr.length - 1) {
        return arr[pos] > arr[max] ? arr[pos] : arr[max];
    } else {
        max = arr[pos] > arr[max] ? pos : max;
        return (int arr[], int pos += 1, int max);
    }
} 
```

我在 C 代码中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:11:25.907

首先，在数组中查找最大元素的代码不需要使用递归（你可以，但是这无助于使代码更简单，更糟糕的是，它需要你有足够的堆栈内存来放置（数组长度） *（堆栈帧大小）。

没有递归的线性搜索示例：

```
#include <limits.h>

int max_element(int arr[], int len) {
    int max = INT_MIN;
    for (int i=0; i < len; ++i)
        if (arr[i] > max)
            max = arr(i);
    return max;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:59:23.490

您无法知道 C 中数组的长度。

main() 函数在 C 中具有特殊的含义，程序的入口点。

递归语法也是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T06:01:08.420

这应该有效：

```
int tail(int *arr, int pos, int max, int len) {
    if (pos == len - 1) {
        return arr[pos] > arr[max] ? arr[pos] : arr[max];
    }
    max = arr[pos] > arr[max] ? pos : max;
    return tail(arr, pos + 1, max, len);
} 
```

请注意，虽然这或多或少是对 JavaScript 的忠实翻译，但它是非常糟糕的代码。除非编译器识别尾递归，否则这有可能溢出调用堆栈，尤其是对于大型数组。遍历数组会好得多。这是一个为空数组任意返回 0 的解决方案：

```
int max(int *arr, int len) {
    int max = 0, i;
    if (len > 0) {
        max = arr[0];
        for (i = 1; i < len; i++) {
             if (arr[i] > max) max = arr[i];
        }
    }
    return max;
} 
```

# asp.net-mvc - 在 MVC Telerik 控件上创建包装器

> ID：13696958
> 
> 赞同：0
> 
> 时间：2012-12-04T05:56:32.700
> 
> 标签：asp.net-mvc, asp.net-mvc-4, telerik, wrapper, telerik-mvc

我正在尝试通过 MVC 的 Telerik 控件编写包装库。这背后的原因是我可以轻松更改第三方控件，而无需更改 View、Controller。是不是好主意。我面临完全隐藏 telrik 的问题，因为他们有自己的 js 并返回对象。我在正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:17:19.910

听起来很抽象。你说的是多少浏览页面？你有具体的要求才能改变吗？很有可能你会失去一些力量，只会增加很多麻烦。如果需要，可能更容易重写视图。如果您担心，您可能应该使用非商业替代品？但是，这取决于您使用的部分我只使用了 Grid，我们将网站切换到 DataTables 没有太多问题。

我使用 Telerik 并且从未抽象过它，但我的架构的其余部分是灵活的。我从来没有将 Telerik 控件直接绑定到域实体列表等。我总是使用使用 AutoMapper 从域实体映射的 ViewModel。

大多数业务应用程序中的 UI 是最不重要的部分，如果您没有将它与域模型紧密耦合，通常相对容易更改。

# mysql - 无法更新触发器中的表

> ID：13696960
> 
> 赞同：0
> 
> 时间：2012-12-04T05:56:48.533
> 
> 标签：mysql, sql, database, triggers, phpmyadmin

我做了新的触发器，它必须更新员工的工资。它从表支付中获取 2 个值（现金和月份），并将它们分成“how_much_to_pay”列。

我查看了主题： [MySQL 触发器无法更新触发器分配到的同一个表中的行。建议的解决方法？](https://stackoverflow.com/questions/2334478/mysql-triggers-cannot-update-rows-in-same-table-the-trigger-is-assigned-to-sugg)

但这对我没有帮助，因为他们只使用一张桌子，他们可以毫无问题地放入“新”。

这是我的触发器：

```
create trigger pay_out before insert on `payment_out`
for each row
then
UPDATE `payment_out` o
INNER JOIN payment p ON p.id_1 = o.id_1 AND o.id2 = p.id2
SET o.`how_much_to_pay` = p.cash / p.months;
end;
$$ 
```

以下是表格：

```
table payment_out
id1
id2
how_much_to_pay

table payment
id1
id2
cash
months 
```

和错误本身：

```
1442 - Can't update table payment_out in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:35:36.517

如果两个表之间存在一对一关系，则可以在 BEFORE INSERT 触发器中使用此代码 -

```
BEGIN
  SELECT p.cash, p.months INTO @cash, @months
    FROM payment p
    WHERE p.id_1 = NEW.id_1 AND p.id2 = NEW.id2;

  SET NEW.how_much_to_pay = @cash / @months;
END 
```

# c++ - 为什么我必须在 C++ 中按两次 Enter 才能获取行？

> ID：13696962
> 
> 赞同：3
> 
> 时间：2012-12-04T05:56:50.920
> 
> 标签：c++, cin

为什么我运行这段代码时，只有按两次键`cout`才执行语句？`enter`

```
#include <iostream>
using namespace std;
int main(int argc, const char * argv[]) {
    char buf[128];
    cin.getline(buf, 128, '\n');
    cout << buf;
    return 0;
} 
```

我该如何解决？

我在 OS X Lion 上使用 Xcode 版本 4.5.2。我尝试在终端中运行该程序，它也需要两次`return`按下。

这与[此问题](https://stackoverflow.com/questions/13556890/why-do-i-have-to-press-enter-twice)类似，但代码较少，因此解决方案应该更清晰。即在另一个问题中，人们说问题是`cin.ignore()`，但是，我的代码没有。

* * *

**我尝试过的其他代码失败了：**

这会产生相同的行为：

```
 cin.getline(buf, 128); 
```

这永远不会移动到下一行（无论按下多少次`return`键）：

```
 cin.getline(buf, 128, '\r'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:16:00.087

我发现了问题。这似乎是编译器的问题。

当我在 Xcode 中进入我的项目并将编译器从**默认编译器（Apple LLVM 编译器 4.1）**切换到**LLVM GCC 4.2**时，一切正常。

# java - java应用程序死锁但在使用jstack转储线程后解锁

> ID：13696964
> 
> 赞同：0
> 
> 时间：2012-12-04T05:57:17.503
> 
> 标签：java, hibernate, deadlock, c3p0, jstack

我的 java 应用程序有时会冻结，所以我用 jstack -F 转储线程，但报告显示没有死锁并且应用程序再次响应？有谁知道发生了什么？

我的应用程序使用休眠 4.1.8、码头 9M2、mysql 连接器 5.1.22、c3p0 0.9.2.pre6。线程转储似乎到处都被阻塞：日志文件有点长，所以我在这里上传了它[http://pastebin.com/vDCd6Kjb](http://pastebin.com/vDCd6Kjb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:00:52.353

在文档中找到了这个

```
The process is suspended when this connector attaches and resumed when this connector detaches. 
```

回去找死锁在哪里

# c - 链表帮助，单链接（多结构）（C 编程）

> ID：13696967
> 
> 赞同：0
> 
> 时间：2012-12-04T05:58:04.853
> 
> 标签：c, struct, linked-list, structure

我需要一些有关链接列表的帮助。我已经想出了如何做单个链表，但是在尝试实现多个结构和列表时我很挣扎。

我的最后一个程序都与 Structs 一起使用，但现在我必须实现链表。它说在函数中使用“外部指针”来遍历各种列表。

这是我的一门课的作业，我不是要求你们都为我做，但我要求帮助我指出正确的方向。

结构如下：

```
 struct stockItem
            {
              char stockName[60];
              char stockType[60];
              int itemNumber;
              float actualCost;
              float markUp;
              int totalCurrentInventory;
              int monthlyRestock;
              float price; //stores actual cost + markup

            };

            struct roomData
            {
              float widthFeet, widthInch;
              float lengthFeet, lengthInch;
              char roomName[100];
              int roomNumberOfType;
              char roomType[6]; //char of room type
              int roomStock[100][2]; //for storing each room stock types
              int roomHasStock; //if the room has a stock avaliable
              int roomStockCount; //how many stocks the room has
              float area;  // sq ft
              float rentalRate;
              float profitsPerRoom;
              float netProfit;
              float grossProfit;
              char stockLine[200];
            };

            struct staffData
            {
                char firstName[100];
                char lastName[100];
                char fullName[100];
                int employeeNumber;
                char typeOfEmployee[10];
                char payType[10];
                float hourlyWage;
                float salary;
                int hours;
                char address[150];
                char city[150];
                char state[10];
                int zip;
                char phone[30];
                float yearlyTotalPay;

                struct hireDate //holds staff hire date
                {
                  int month;
                  int day;
                  int year;
                }hireDate;

                struct birthDate //holds staff birth date
                {
                  int month;
                  int day;
                  int year;
                }birthDate;
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:27:06.717

您的链表是否应该利用您开发的结构？这样，您就有了一个链表，其中每个节点都包含您列出的所有这些结构的实例。

```
struct node {
  struct node *left;
  struct node *right;
  roomData room;
  stockItem stock;
  staffData staff;
  hireDate hire;
  birthDate birth;  
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:36:19.917

```
typedef struct YourStructNode_ {

   struct YourStructNode_ * next;
   struct YourStructNode_ * prev;

   YourStruct data;

} T_YourStructList; 
```

用你的结构名称替换“YourStruct”以创建一个双向链表。

即使您使用此模式多次创建 T_XXXX_List，您也应该使用相同的函数操作列表，因为 T_Node 的前两个字段始终相同。

编写添加、插入、删除函数来操作此结构。

# silverlight - 在 WP7 中使全景项目标题彼此靠近

> ID：13696968
> 
> 赞同：0
> 
> 时间：2012-12-04T05:58:05.350
> 
> 标签：silverlight, windows-phone-7, panorama-control

我第一次在 WP7 Silverlight 中使用全景图。我的问题是只出现了下一个全景项目标题的第一个字母的一半。

恐怕用户不会知道还有另一部分可以滑动。

这是我需要的样本：

[http://briansolli.files.wordpress.com/2011/03/leaderboard.png](http://briansolli.files.wordpress.com/2011/03/leaderboard.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:39:21.223

我认为您在这里需要的不是 panaroma 而是枢轴页面。它的工作原理与图像中显示的完全一样。查看此示例以获取指导 -

[http://blogs.msdn.com/b/stephanc/archive/2010/05/09/windows-phone-7-pivot-control-sample.aspx](http://blogs.msdn.com/b/stephanc/archive/2010/05/09/windows-phone-7-pivot-control-sample.aspx)

# asp.net-mvc - 如何在 MVC 4 中使用我自己的 User 表而不是默认的 UserProfile ？

> ID：13696969
> 
> 赞同：3
> 
> 时间：2012-12-04T05:58:11.217
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-membership, dbcontext, user-profile

我想创建大型用户表（高级用户配置文件）并将用户数据保存在我的数据库上下文中。所以，我不想在我的项目中使用 2 个 DbContexts。当用户注册到站点时，他们的数据（用户名、密码等）存储我自己的用户表。我的课是这样的：

```
public class ModelBase
    {
        public int Id { get; set; }
        public DateTime CreateDate { get; set; }
        public DateTime LastUpdateDate { get; set; }
    }

public class User : ModelBase
    {
        public string UserName { get; set; }
        public string Password{ get; set; }
        public string FullName { get; set; }
        public string Email { get; set; }
        public DateTime BirthDate { get; set; }
        public string Specialty { get; set; }
    }

public class News : ModelBase
    {
            public int UserId { get; set; }
            public string Title { get; set; }
            ...
    }

    .... 
```

上下文是这样的：

```
public class MyDBContext : DbContext
    {
        public MyDBContext()
        {
            Database.SetInitializer<MyDBContext>(new MyDBContextInitializer());
        }

        public DbSet<User> UserSet { get; set; }
        public DbSet<News> NewsSet { get; set; }
        public DbSet<Project> ProjectSet { get; set; }
        public DbSet<Section> SectionSet { get; set; }
        ....
    }

    class MyDBContextInitializer : DropCreateDatabaseIfModelChanges<MyDBContext>
        {
            protected override void Seed(MyDBContext context)
            {
                base.Seed(context);
            }
        } 
```

我用我的 DbContext 名称替换了默认 **SimpleMembershipInitializer**类中的连接名称，如下所示：

```
 ....
     Database.SetInitializer<MyDBContext>(null);

                try
                {
                    using (var context = new MyDBContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("MyDBContextConnection", "User", "Id", "UserName", autoCreateTables: true);
    .... 
```

最后，我更改了 适合我的 User 类的**RegisterModel**和**WebSecurity.CreateUserAndAccount() 。**但是，它不起作用。 **如何使用我自己的用户表注册到站点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:54:30.310

您可以将**Asp.net Membership**和您的复杂类连接在一起。使用这种方法，您将节省大量时间，因为 asp.net 成员身份更加强大（您无需考虑角色和用户管理），并且确保您可以利用现有的开源项目并将其添加到您[的](https://github.com/TroyGoode/MembershipStarterKit)用最少的时间完成项目。然后你的类将具有如下结构：

```
public class CustomUserDetail : ModelBase
    {
        public string UserName { get; set; } // what you really need is this to be unique for each user in you data base
        // public string Password{ get; set; } handled by asp.net Membership
        public string FullName { get; set; }
        // public string Email { get; set; } handled by asp.net Membership
        public DateTime BirthDate { get; set; }
        public string Specialty { get; set; }
    } 
```

然后您可以向**IPrincipal**添加扩展方法，例如：

```
public static CustomUserDetail CustomUserDetail (this IPrincipal principal)
        {
            var repository = new  YourUserDetailRepository();
            return repository.GetCurrentUserDetail();
        } 
```

并最终在您的代码中轻松使用

```
<p> @User.CustomUserDetail.FullName  </p> 
```

# iphone - iPhone sdk 如何从 PDF 文件中检索目录？

> ID：13696970
> 
> 赞同：0
> 
> 时间：2012-12-04T05:58:24.073
> 
> 标签：iphone, pdf, vfr-reader

我正在使用 VFR 阅读器来显示我的 pdf。我需要在单击按钮时提取目录并将其显示在表格视图中，然后在点击每个页面时它应该指向相应的页面。我为此搜索并获得了这些链接

1.  [从 pdf 文件创建目录](https://stackoverflow.com/questions/2556344/create-a-table-of-contents-from-a-pdf-file)
2.  [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-adding-a-table-of-contents-to-an-ipad-reader/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-adding-a-table-of-contents-to-an-ipad-reader/)

我开始知道，要获得 TOC，我们必须使用“CGPDFDocumentGetCatalog(pdf doc)”。但在我的读者中，“CGPDFDocumentGetCatalog(pdf doc)”根本没有被调用。现在如何从我的 pdf 文件中提取我的目录？请帮我解决这个问题。我为此苦苦挣扎了一周。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:24:58.283

不幸的是，我认为您提到的两个答案指向不同的实施策略，它们都可能有效但不同。

第一个问题是您拥有并希望在应用中显示的 PDF 文件是什么样的。PDF 文件中没有预定义的 TOC 对象，只有不同的方法可以模拟它。最常见的两种方式是：

A) 书签，这是一种将小段文本添加到结构化树中的方法，其中每段文本都指向 PDF 文件中的特定位置。这些书签可以在设计应用程序中或以后添加（有特定的工具可以这样做），它们可以实现任何结构。

B) 您的 PDF 文件可能包含看起来像是书籍中经典目录的内容，基本上只是开始页面上的文本，还可以选择带有指向书中特定位置的超链接。

您引用的第二个链接显示了如何创建可以在其中显示 TOC 的用户界面。剩下的问题是确定要在 TOC 窗口中显示的项目。在您指向的第二个链接中，提出的解决方案是提供特定于一本特定书籍的硬编码项目。当然，当您只想显示任何书籍时，这种方法并不是很有用。

因此，您剩下的问题是如何确定要显示的项目以及它们链接到的位置。

如果您考虑我上面的可能性 A)：带有书签的 PDF 文件，答案可能相对简单。您指向的答案 1 解释了如何查看 PDF 文件中的不同结构 - 书签就是这样的结构（在 PDF 规范的第 12.3 节中定义：http: [//www.adobe.com/content/dam/Adobe/ zh/devnet/acrobat/pdfs/PDF32000_2008.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)）

这意味着您可以使用此处显示的技术来遍历 PDF 文件中的不同对象，并找到每个书签。书签将为您提供要显示的文本以及单击时文本应跳转到的 PDF 文件中的实际位置。

如果您考虑我上面的可能性 B）：没有书签但经典 TOC 的 PDF 文件，这将更难解决。这样的目录只是一个或多个页面上的简单文本，可选地带有超链接。当然，您可以尝试查找这些页面上的所有文本（如果您可以找出目录开始和结束的页面），但您还必须找出该项目链接到的位置。如果不涉及超链接，那将是一项艰巨的任务。

所以你的第一个问题应该是你想解决这个问题的通用性。您知道要显示哪些 PDF 文件吗？您可以自己为这些文件设计一个 TOC（如您的解决方案 2 中所示）吗？如果没有，您能确定所有 PDF 文件都包含书签吗？这些问题的答案将在很大程度上决定你的其余策略......

# java - SharedPrefs 空指针 | 那不是不可能吗？

> ID：13696971
> 
> 赞同：0
> 
> 时间：2012-12-04T05:58:41.960
> 
> 标签：java, android, sharedpreferences

我在共享首选项上得到一个空指针。但是共享首选项总是需要一个默认值。那岂不是不可能。

添加此代码片段（大致）给我带来了问题（根据 logcat）：

```
myPrefs = getSharedPreferences("myPrefs", 0);
        String lvl_result= myPrefs
                .getString(lvl, null);
        // Example "A -> a" or null
        if (lvl_result.equals(null)) {
            gen_lvl();
            lvl_result = myPrefs.getString(lvl, null);
        } 
```

Logcat（不确定这是否是您想要看到的）：

```
12-04 00:54:42.932: E/AndroidRuntime(763): Caused by: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T06:02:39.563

替换代码中的以下行：

```
if (lvl_result.equals(null)) { 
```

和

```
if (lvl_result == null) { 
```

如果`lvl_result`是`null`然后调用`equals`此对象上的方法将引发空指针异常..

# azure - 我可以将 WAMS 连接到 Windows 应用商店应用程序和 WP8 应用程序吗？

> ID：13696972
> 
> 赞同：0
> 
> 时间：2012-12-04T05:58:46.203
> 
> 标签：azure, windows-8, windows-phone-8, azure-mobile-services

我刚刚创建了我的第一个 WAMS（请放下 - 不要歇斯底里）。

但是，当我在 WAMS 管理区域时，它要我“选择平台”，其中包含“Windows 应用商店”、“Windows Phone 8”和“IOS”(meh) 选项。

我想选择前*两个*平台，而不仅仅是其中一个。这可能吗，还是我需要为我的 Windows 商店应用程序创建一个，为我的 WP8 应用程序创建另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:37:38.100

该屏幕有些误导，您只需要一项可从任何平台访问的服务。此处“选择平台”的上下文是创建一个将使用该服务的快速启动应用程序（注意上图中的文本“让我们将其连接到应用程序”）。您可以选择三个平台中的任何一个（或全部，多次访问）并获取样板代码，以向您展示如何从这些特定平台使用 WAMS，但您所针对的服务是相同的。

# sql - 奇怪的 SQL 请求（加入）

> ID：13696981
> 
> 赞同：0
> 
> 时间：2012-12-04T05:59:21.743
> 
> 标签：sql, select, join, sql-server-2000

假设有两个表A={a,b}和B={0,1,2}，可以join

```
tableA  tableB
a       0
b       1
a       2
        3 
```

如何得到以下结果 ExpectingResult：

```
tableA  tableB
a-------0
b-------1
null----2
null----3 
```

或者

```
 tableA   tableB
    a-------2
    b-------3
    null----0
    null----1 
```

只要确保每个表中的元素只出现一次，我尝试了各种join（inner，full，cross），没有一个可以做到。有人可以给我小费吗？

非常感谢你

请检查此问题本身的链接：[http ://www.sqlfiddle.com/#!3/9fc21/2](http://www.sqlfiddle.com/#!3/9fc21/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:13:40.647

这**是**一个糟糕的要求。产生这种输出的原因几乎可以忽略不计，尽管我并没有完全排除理智的原因。

对于 SQL Server 2000，您将需要通过临时表来获取用于压缩的顺序密钥。

```
 SELECT IDENTITY(int,1,1) ID, Value
    INTO #tblA
    FROM tableA
ORDER BY Value;

  SELECT IDENTITY(int,1,1) ID, Value
    INTO #tblB
    FROM tableB
ORDER BY Value;

  SELECT A.Value, B.Value
    FROM #tblA A FULL OUTER JOIN #tblB B ON A.ID = B.ID
ORDER BY Coalesce(A.ID, B.ID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:14:11.377

使用`SQL Server 2005`，您可以使用`ROW_NUMBER`和 a的组合`FULL OUTER JOIN`来组合两个结果。

请参阅[SQL 小提琴](http://www.sqlfiddle.com/#!3/bbb34/2)

不幸的是，`SQL Server 2000`它没有`ROW_NUMBER`函数，所以你有点坚持使用带有标识字段的临时表来模拟行号。

这样做的要点是

*   从 tableA 中选择您需要的数据到#tempTableA，添加一个标识字段。
*   对表 B 重复
*   使用诱惑`FULL OUTER JOIN`结果

# assembly - 来自 NASM 的多位输入

> ID：13696983
> 
> 赞同：1
> 
> 时间：2012-12-04T05:59:22.917
> 
> 标签：assembly, nasm

所以我对汇编语言相当陌生，我对基础知识有相当扎实的掌握，但用户输入总是让我感到困惑。所以现在我有以下代码可以从用户那里接收一个数字：

```
mov eax, 3
mov ebx, 0
mov ecx, inStrBuf
mov edx, StrLen
int 80h 
```

然后定义如下

```
SECTION .bss
inStrBuf:  times StrLen resb  ' ' 

Section .data
StrLen: equ 8 
```

在我把值放入ecx之后，值就是数字+2608。所以我一直在做的只是简单地减去2608并得到数字。现在，当我输入多个数字时，例如数字 46，当我转换为十进制时，我得到 669236。没有像以前那样仅减去 2608 的简单方法。

首先，2608 是怎么回事，有没有办法只接受像 654 这样的数字并将其放入寄存器（当然是十六进制值）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:03:45.120

我不知道2608是从哪里来的，更不用说669236了！总体思路是：

```
;zero out someplace to put result
top:
;get a digit/character
;make sure it represents a decimal digit
;(if not - go to done)
;subtract '0' to convert character to number
;multiply "result so far" by 10
;add in the new number
;go to top
done: 
```

这是我平时用的...

```
section .bss
    inStrBuf resb StrLen ; 12+ is good...

section .text
    ...
    push inStrBuf ; pass parameter on stack
    call atoi
    add esp, 4 ; clean up stack
    mov [someplace], eax
    ...

;--------------------
atoi:
    push ebx

    mov edx, [esp + 8]  ; pointer to string
    xor ebx, ebx ; assume not negative

    cmp byte [edx], '-'
    jnz .notneg
    inc ebx ; indicate negative
    inc edx ; move past the '-'
.notneg:

    xor eax, eax        ; clear "result"
.top:
    movzx ecx, byte [edx]
    inc edx
    cmp ecx, byte '0'
    jb .done
    cmp ecx, byte '9'
    ja .done

    ; we have a valid character - multiply
    ; result-so-far by 10, subtract '0'
    ; from the character to convert it to
    ; a number, and add it to result.

    lea eax, [eax + eax * 4]
    lea eax, [eax * 2 + ecx - '0']

    jmp short .top
.done:
    test ebx, ebx
    jz .notminus
    neg eax
.notminus:
    pop ebx
    ret
;------------------------ 
```

这使用了两个s的“聪明”方法`lea`乘以十，减去'0'，然后添加新的数字。它的缺点是不设置标志，所以我们不能检查溢出——它只是默默地翻滚。任何“无效”字符停止 - 适用于 xero、换行（sys_read 将在那里）...或“垃圾”。当它返回时，“无效”字符将在 ecx 中（只是 cl 很有趣），并且 edx 指向下一个字符。方便解析“192.168.1.1”左右。您可能更喜欢使用更直接的东西。:) C 库“atoi”或“scanf”工作......如果你想那样做......

真的很好奇那个2608是从哪里来的！

# android - 如何在android中从FlowTextView中选择和复制文本

> ID：13696989
> 
> 赞同：3
> 
> 时间：2012-12-04T05:59:56.490
> 
> 标签：android

我有围绕图像流动的flowtextview。我想在长按时选择文本..我怎样才能为流文本视图做到这一点..到目前为止我所做的是

```
txtDesc = (FlowTextView) findViewById(R.id.tDescription);
txtDesc.setText(temp_desc);
CharSequence stringYouExtracted = text.getText();
int startIndex = text.getSelectionStart();
int endIndex = text.getSelectionEnd();
stringYouExtracted = ( stringYouExtracted).subSequence(startIndex, endIndex);
getSystemService(CLIPBOARD_SERVICE);
if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ECLAIR) 
{
   android.text.ClipboardManager clipboard = (android.text.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
    clipboard.setText(stringYouExtracted);
} else {
    ClipboardManager clipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
  System.err.println("clipboard to select"+clipboard);
} 
```

# ruby-on-rails - 试图在终端安装导轨，不知道错误是什么意思

> ID：13696990
> 
> 赞同：1
> 
> 时间：2012-12-04T06:00:15.700
> 
> 标签：ruby-on-rails, ruby, terminal, gem

我在尝试安装rails时遇到了这个问题：`gen install rails` 我几乎不知道我在做什么：/尝试学习:)

```
ERROR:  Error installing rails:
ERROR: Failed to build gem native extension.

    /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.5 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
```

提前致谢！

我已尝试按照此处（http://rubyonrails.org/download）和此处（http://rubygems.org/pages/download）的说明进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:43:07.823

我将假设您也是 Ruby 的新手，以防万一这样做可以帮助其他需要回答的人。请不要冒犯。

看起来您安装的 Ruby 已过时或损坏。Mac OSX 安装了默认的 Ruby，但老实说，我不知道它是完整的还是过时的，因为我总是安装自己的。

# 准备好构建环境

默认情况下，MacOSX 不具备构建 C 应用程序的能力，而这正是“标准”ruby 运行时。因此，您需要安装一个 C 构建工具链，在许多情况下是 GCC 和朋友。

## 未安装 XCode

1.  [在XCode 产品页面](https://developer.apple.com/xcode/)上找到“*其他开发人员工具*”链接
2.  点击它
3.  为您的 OSX 版本查找并安装“*命令行工具”*

## 安装了 XCode

1.  打开 XCode
2.  打开“下载”首选项窗格
3.  找到“*命令行工具*”并安装它们

安装它们后，请关闭所有打开的终端窗口，然后再继续以确保构建工具在您的路径中。

# 安装 Ruby

有几种方法可以让 Ruby 在新的 linux 系统上运行，但最广泛推荐的方法是使用**rvm**。

RVM 是一种帮助安装和管理不同 Ruby 环境的工具，因此您可以轻松地在它们之间切换并升级（或针对特定项目或问题降级）。 [可在此处找到（安装说明的直接链接）](https://rvm.io/rvm/install/) 您很可能想要执行第一个快速引导式安装，这将为您的用户简单地安装它。它还将安装最新的稳定版 ruby​​。

有一个用于安装 RVM 的 GUI，称为[JewelleryBox](http://unfiniti.com/software/mac/jewelrybox)。它相当漂亮，并且会在有新版本时通知您。

安装应用程序本身后：

1.  单击工具栏中的添加 Ruby
2.  选择一个 Ruby 版本。核磁共振是“官方”红宝石……它是一切的开始。目前，最新的稳定版是 ruby​​-1.9.3-p327，所以选择那个 ;)
3.  确保勾选*make default复选框，然后点击“安装”按钮。*
4.  希望一切正常！

# 安装导轨

Ruby 获取库（包括 Rails）几乎无处不在的方法是使用 ruby​​gems 和`gem`命令。在这种情况下，`gem install rails`应该让你开始。哦，确保在安装新的 ruby​​ 后打开一个新的终端窗口，并检查它是否安装了`ruby -v`.

# 另一件好事

Bundler 是一个构建在 ruby​​gems 之上的简洁的包管理器。安装它`gem install bundle`（哦，Rails 会将它安装为依赖项）。[它在这个链接](http://gembundler.com/)上有它的文档，但是对于基本的原始导轨，你不需要对它做任何事情。

# 祝你好运

祝你学习 Rails 愉快，我希望你会发现它让你的 webapp 开发更有趣^_^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T06:06:37.087

我尝试了很长时间让 Rails 在 Mac OS X 上顺利运行，我能找到的最佳解决方案是通过[JewelryBox](http://unfiniti.com/software/mac/jewelrybox)安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:02:56.927

你有文件吗

> /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

因为我没有，而且我也在 Mac OS X 上......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:49:40.223

首先用 ruby​​ 版本创建一个`rvm`版本。
并在该 rvm 下创建一个具有某个名称的 gemset。在安装任何东西之前
做。 然后安装安装最新版本的rails的rails。 然后继续。`gem install bundler`
`gem install rails`

# html - 不确定如何定制 具有可扩展背景

> ID：13696992
> 
> 赞同：0
> 
> 时间：2012-12-04T06:00:38.870
> 
> 标签：html, css

一直在尝试制作类似于下面链接的图像的自定义侧边栏。但是，我不确定如何对自定义 div 进行编码（如果有必要）并合并可变边框。

我尝试管理多个 s 来实现倾斜的标题，但没有成功。我已经考虑过仅使用模板作为背景图像的选项，但我不确定这是否是最佳方法，因为我希望侧边栏由于下拉菜单而具有可扩展性。

如果这不是丰富的信息，我深表歉意，但我对如何完成最终结果一无所知。任何建议将不胜感激。

[http://oi47.tinypic.com/wjce1j.jpg](http://oi47.tinypic.com/wjce1j.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:04:53.323

你可以这样做

1，为标题制作一个div

![在此处输入图像描述](../Images/53057ec784bd084e4d6183504d128188.png)

2、制作左右两边高度为100%的div，并在两边重复这个图像

> ![在此处输入图像描述](../Images/b6db3b7460e22fbd4fd0689d3c12fa8d.png)

就像

![在此处输入图像描述](../Images/c62df1ceb3e7f31768a96d067d50c0ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:50:31.090

如果您不想使用图像，您应该能够仅使用 css 和 html 来完成此操作。使用 css 和 html 执行此操作的好处是它可以更好地在浏览器中重新调整大小（尽管较新的浏览器在重新调整图像大小方面做得更好）并且无需时间加载。

您可以尝试以下内容。

下面是 CSS 样式：

```
#tabbox {
    position:absolute;
    width: 200px; 
    height: 200px; 
    background: black;
    border: 2px solid #C7ECFE;
    -webkit-box-shadow:-4px 6px 12px #C7ECFE; 
    -moz-box-shadow: -4px 6px  12px #C7ECFE; 
    box-shadow:-4px 6px  12px #C7ECFE; 
}
#tabbox:before {
    margin-top:-2px;
    margin-left:0px;
    height: 0;
    width: 143px;
    content:"";
    position: absolute; 
    border-bottom: 30px solid #C7ECFE;
   border-right: 60px solid black; 
}
#tabbox:after {
    position: absolute;
    top:0;
    height: 0;
    width: 142px;
    content:"";
    position: absolute; 
    border-bottom: 30px solid black;
    border-right: 60px solid transparent; 
} 
```

然后在你的身体中定义 id = "tabbox" 的 div。这会给你这样的东西：

![样品盒](../Images/f44387eb0b3573d834a446e5cdb95a4e.png)

# binding - Monotouch 绑定 - “无法从源类型转换为目标类型。”

> ID：13696994
> 
> 赞同：1
> 
> 时间：2012-12-04T06:00:57.560
> 
> 标签：binding, xamarin.ios

我是 Monotouch 的新手。最近，我正在开发一个 Monotouch 绑定项目，该项目绑定了一个自定义 iOS 框架，该框架是我自己开发的一个 .NET 框架库。我按照 Xamarin 上的说明进行操作，但目前我遇到了无法解决的问题。这是我的代码。

```
**HEADER FILE IN OBJECTIVE C**

*GRG.h*
@interface GRG: NSObject {} 

// Shared instance 
+ (GRG*) sharedG; 

// Preference class 
@property (nonatomic, readonly) GRGPreferences  *preferences; 

// Driver version 
@property (readonly,copy) NSString* driverVersion; 

// More parameters... 
@end 

*GRGPreferences.h*
@interface GRGPreferences : NSObject <GRGPreferencesProtocol>{} 

// Enable DEBUG 
@property BOOL debugEnabled; 

// More parameters... 
@end 

*GRGPreferencesProtocol.h*
@protocol GRGPreferencesProtocol <NSObject>  

// More parameters... 
@end 
```

我将我的头文件转换成这个

```
**API DEFINITION**

[BaseType (typeof (NSObject))] 
interface GRG 
{ 
        [Static][Export("sharedG")] 
        GRG SharedG{ get; } 

        [Export("preferences")] 
        GRGPreferences Preferences{ get;} 

        [Export("driverVersion", ArgumentSemantic.Copy)] 
        string DriverVersion {get;} 
} 

[BaseType (typeof (GRGPreferencesProtocol))] 
public interface GRGPreferences 
{ 
        [Export("debugEnabled")] 
        bool DebugEnabled{ get; set;} 
} 

[BaseType(typeof (NSObject))] 
[Model] 
public interface GRGPreferencesProtocol 
{} 
```

之后，我在 mono 上创建了一个测试应用程序来测试新创建的库并访问我创建的值。但是，我得到了一个错误。

> Console.WriteLine(GRG.sharedG.DriverVersion); - 这工作正常。它返回正确的值。
> 
> GRGPreferences 首选项 = GRG.SharedG.Preferences; - 错误：“无法从源类型转换为目标类型。”
> 
> Console.WriteLine(GRG.sharedG.Preferences.DebugEnabled); - 错误：“无法从源类型转换为目标类型。”

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:40:55.180

快速浏览一下，我认为这就是您想要的：

```
[BaseType (typeof (NSObject))] 
public interface GRGPreferences : GRGPreferencesProtocol { 
```

您的类型在实现您想要的协议时`GRGPreferences`继承自。`NSObject`

# c# - c#复选框不起作用

> ID：13696997
> 
> 赞同：1
> 
> 时间：2012-12-04T06:01:40.523
> 
> 标签：c#, asp.net, checkboxlist

我是这个 c# 编码的新手。我正在尝试使用复选框编写代码。以下是设计流程中的代码

```
<table>
    <tr>
        <td align="right">
            <asp:Label ID="lblOwn" runat="server" Text="Owned by You :"></asp:Label>
        </td>
        <td align="left">
            <asp:CheckBoxList ID="chbxOwn" runat="server"
                OnSelectedIndexChanged="onAckTypeChanged3" AutoPostBack="true">
                <asp:ListItem>2 wheeler</asp:ListItem>
                <asp:ListItem>4 wheeler</asp:ListItem>
            </asp:CheckBoxList>
        </td>
    </tr>
    <tr>
        <td align="right">
            <asp:Label ID="Label1" runat="server" Text="2 w"></asp:Label>
        </td>
    </tr>
    <tr>
        <td align="right">
            <asp:Label ID="Label2" runat="server" Text="4 w"></asp:Label>
        </td>
    </tr>
</table> 
```

以下是代码隐藏

```
public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Hid1();
        Hid2();
    }
    protected void onAckTypeChanged3(object sender, EventArgs e)
    {
        if (chbxOwn.SelectedItem.Text == "2 wheeler")
        {
            Vis1();
        }
        if (chbxOwn.SelectedItem.Text == "4 wheeler")
        {
           Vis2();
        }
    }
    private void Hid1()
    {
        Label1.Visible = false;
    }
    private void Hid2()
    {
        Label2.Visible = false;
    }
    private void  Vis1()
    {
        Label1.Visible = true;
    }
    private void Vis2()
    {
        Label2.Visible = true;
    }
} 
```

当检查“ 2 Wheeler”复选框时，可见2 W”标签。但是当我检查“四轮车”时，它并没有显示两个标签。我想知道我在哪里犯了错误。此外，当我取消选择这两个复选框时，会生成 Null 引用异常。

你能帮我解决这些问题吗 1\. 选中两个复选框应该显示两个标签。2\. 取消选择不应产生空引用异常。

提前致谢 问候， 阿布舍克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:54:53.447

修改**onAckTypeChanged3**事件如下

```
protected void onAckTypeChanged3(object sender, EventArgs e)
        {
            foreach (ListItem checkBoxItem in chbxOwn.Items)
            {
                if (checkBoxItem.Selected == true)
                {
                    if (checkBoxItem.Text == "2 wheeler")
                    {
                        Vis1();
                    }
                    if (checkBoxItem.Text == "4 wheeler")
                    {
                        Vis2();
                    }
                }                
            }            
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:19:17.393

这就是你想要的：

```
protected void onAckTypeChanged3(object sender, EventArgs e)
{
    foreach (ListItem item in chbxOwn.Items)
    {
        if (item.Text == "2 wheeler" && item.Selected)
        {
            Vis1();
        }
        if (item.Text == "4 wheeler" && item.Selected)
        {
            Vis2();
        }
    }
} 
```

它就像一个魅力..!!

这是工作演示：**[DEMO](http://vishalsuthar.studio2.coderun.com/ASPNETWebSite/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T06:09:41.580

查看[ListControl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.items.aspx)以获取有关如何使用该`Items`属性来确定 CheckBoxList 中选定项目的示例。该`SelectedItem`属性返回具有最低索引的项目。当未选择任何项目时，`SelectedItem`返回 null 这就是您会得到 null 引用异常的原因。