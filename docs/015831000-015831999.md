# StackOverflow 问答 15831000-15831999

# sql - 在 sql server 中为数据库图创建图像

> ID：15831002
> 
> 赞同：11
> 
> 时间：2013-04-05T09:58:28.047
> 
> 标签：sql, sql-server-2008, database-diagram

我在 sql server 中创建了数据库图。但我必须在 db 图中再取 15 个表。然后我截图。但我不能截取超过 5 个表的屏幕截图。所以我截图2次或更多次。如果 sql server 是自动创建图像并且是单个屏幕截图，则表示没问题。有什么办法可以做到这一点？

[![在此处输入图像描述](https://i.stack.imgur.com/5WSQE.png)](https://i.stack.imgur.com/5WSQE.png)

这是我的截图。我问有没有机会通过 sql server 在单个屏幕截图中获取 15 个表？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-05T10:23:19.477

是的，你可以这样做。只需在 SSMS 中打开图表，右键单击图表表面（在表格之间的空白处，而不是表格本身），然后单击“将图表复制到剪贴板”选项。

然后，您可以将完整的图表粘贴到您想要的任何程序中。

# c++ - 当使用特定枚举标识符时，打印出带有建议更正的静态“弃用”警告消息？

> ID：15831003
> 
> 赞同：0
> 
> 时间：2013-04-05T09:58:29.820
> 
> 标签：c++

在我们协作中很多地方使用的一个C++库中，我们错误地在同一个lib命名空间中定义了多个枚举来定义常量值。枚举是一个独特的类型，但不是一个独特的命名空间。因此，所有枚举值最终都在同一个命名空间中。这是枚举标识符冲突的敞开大门，并且在使用自动完成时也很不方便。为了解决这个问题，我们正在考虑将不同的枚举移动到不同的命名空间中。

为了使用这个库轻松进化代码，我们希望能够在编译时显示“弃用”警告消息，建议在代码中遇到旧的枚举标识符时更改代码。

以下问答[是否存在static_warning？](https://stackoverflow.com/questions/8936063/does-there-exist-a-static-warning)提供一种在满足条件时定义弃用警告的方法。当枚举标识符出现在用户代码中时，我怎样才能达到相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:03:31.457

如果您使用 Visual C++，您也许可以使用[`#pragma deprecated`](http://msdn.microsoft.com/en-us/library/c8xdzzhh%28v=vs.100%29.aspx).

对于 GCC，有[`__attribute__`](http://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html#Attribute-Syntax)编译器扩展，可用于将变量或函数标记为已弃用。虽然不知道枚举。

# c++ - 使用 StereoBM 时视差图中的黑色列

> ID：15831018
> 
> 赞同：2
> 
> 时间：2013-04-05T09:59:13.240
> 
> 标签：c++, opencv, image-processing, computer-vision

我正在尝试在 OpenCV 中使用 StereoBM 从一对图像中提取视差图。忽略下面视差图的不良质量，您可以看到它的左侧有许多黑色列，对应于参数 ndisparities。我认为 ndisparities 只告诉 StereoBM 它可以在多远的地方搜索对应关系。什么可能导致这种行为？它似乎限制了生成的深度图的宽度，但我不明白为什么。

![视差图](https://i.imgur.com/BjXXksO.jpg)

[你可以在这里](http://imgur.com/a/rkRiQ)看到立体声对和下面的代码。提前感谢您的任何指点！

```
Mat Limg = imread("left.jpg", CV_LOAD_IMAGE_GRAYSCALE);
Mat Rimg = imread("right.jpg", CV_LOAD_IMAGE_GRAYSCALE);

Mat disp(Limg.size(), CV_16SC1), disp8U;
int ndisparities = 512;
StereoBM SBM(StereoBM::BASIC_PRESET, ndisparities , 11);
SBM(Limg, Rimg, disp, CV_16S);

double minVal, maxVal;
minMaxLoc( disp, &minVal, &maxVal );
disp.convertTo( disp8U, CV_8UC1, 255/(maxVal - minVal));
imshow("disparity", disp8U) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T12:31:32.263

视差图量化了左右图像中相应点对之间的纵向（对极）偏移。

原则，

```
 disparity := x_l - x_r 
```

其中`x_l`和`x_r`是空间中给定点的两个相机焦平面上的投影。（请记住，较大的差异是*更接近*相机的像素的特征。[A]）

* * *

该参数`ndisparities`量化了您可以拥有的*预期*最大差异（假设您可以忽略最小差异）。

由于您假设这`ndisparities`是您最大的差异，因此它成立

```
 x_l - x_r < ndisparities, 
```

IE

```
 x_r > x_l - ndisparities 
```

因此，在左图像的第一列中寻找与右图像的任何像素的对应关系是没有意义的`ndisparities`：根本不可能。

从某种意义上说，右相机的视锥正好`ndisparities`从左相机视锥右侧的列开始。

* * *

**一个修复：**

如果您希望视差图左侧的 *黑色列*`ndisparities`较少，则需要能够假设较低的.

由于`ndisparities` 取决于与最近物体的相机的距离（从 [A] 开始），因此要么将相机远离物体，要么将相机彼此靠近。

在您非常具体的情况下，您有很大的差异（stereoBM 需要做很多工作）！前景中的“x”符号显示出与图像比例相当的差异！！我相信你需要把你的相机放在更远的地方。

# java - CardLayout：找出当前项目是否是列表中的第一个/最后一个

> ID：15831020
> 
> 赞同：0
> 
> 时间：2013-04-05T09:59:15.283
> 
> 标签：java, swing, cardlayout

我使用 CardLayout 并希望使用两个带有 .next() 和 .previous() 的按钮来滚动项目。它只解决一个问题：如果当前项目是第一个/最后一个项目，我想停止滚动。

我找不到获取当前项目索引的方法或一个标志来确定当前项目是否是第一个/最后一个。

你能告诉我一个简单的方法来找出当前项目是第一个/最后一个吗？

由于有 .first() 和 .last() 方法可以跳转，我猜肯定有一种方法可以确定当前是否是第一个/最后一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:05:51.190

我会简单地使用一个`List<String>`包含卡片布局中所有组件名称的字段，以及一个包含当前显示组件索引的字段。

要知道你是否在开始，你会测试 if `index == 0`。要知道您是否在最后一个组件，您将测试 if `index == list.size() - 1`。要显示下一个组件，您可以使用`index++; layout.show(parent, list.get(index));`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:58:22.620

> 我扩展了 CardLayout，覆盖了几个方法

这也是我的解决方案。有关我的实现，请参阅[Card Layout Focus](http://tips4java.wordpress.com/2008/10/31/card-layout-focus/)。

# regex - 使用正则表达式在代码中查找导入

> ID：15831021
> 
> 赞同：0
> 
> 时间：2013-04-05T09:59:16.377
> 
> 标签：regex, sublimetext2, sublimetext

我的代码中某处出现导入错误，但找不到。我可以使用编辑器（sublime text）中的搜索功能在项目内的所有文件中搜索正则表达式。所以我想搜索“import”和“views”这两个词之间或之前/之后的任何内容，我只想匹配包含这两个词的任何行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:03:32.780

我不熟悉“崇高文本”，但以下`regex`在“记事本++”中效果很好：

```
(.*)(import)(.*)(views)(.*) 
```

现在，在匹配的行中，`$1`, `$2`, `$3`,`$4`和`$5`可以用来指代“import”之前的文本，“import”，“import”和“views”之间的文本，“views”和“views”之后的文本.

## 编辑 - 1

它也适用于“崇高文本”。

例如，对于文本，

```
asdf1234 ..import.fghj4567 views...hjkl7890 
```

查找内容（如上）：

```
(.*)(import)(.*)(views)(.*) 
```

用。。。来代替：

```
$2, $4, $5, $3, $1 
```

结果：

```
import, views, ...hjkl7890, .fghj4567 , asdf1234 .. 
```

* * *

* * *

对于正文，

```
asdf1234 views fghj4567 import hjkl7890 
```

查找内容（如上）：

```
(.*)(views)(.*)(import)(.*) 
```

用。。。来代替：

```
$2, $4, $5, $3, $1 
```

结果：

```
views, import,  hjkl7890,  fghj4567 , asdf1234 
```

## 编辑 - 2

不过，它似乎对我来说效果很好：

![在此处输入图像描述](https://i.stack.imgur.com/TeZY0.png)

# coq - 简化匿名函数中的表达式的简单方法？

> ID：15831028
> 
> 赞同：0
> 
> 时间：2013-04-05T09:59:34.333
> 
> 标签：coq

假设我需要证明以下内容：

```
x: nat

(fun _ : nat => 0) = (fun y : nat => if beq_nat x y then 0 else 0) 
```

由于`y`不在环境中，看起来我无法破坏`beq_nat x y`以简化右侧。有没有一种简单的方法来简化匿名函数中的表达式？

除了能够使两个函数看起来相等之外，有没有办法通过显示它们在所有输入上产生相同的值来推断两个函数是相同的？

编辑：我意识到我可能会要求不可能的事情，因为这些函数不一样，只是当应用于参数时它们会产生相同的值。我不确定 Coq 是如何解释这一点的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:36:14.023

我相信这是一种所谓的情况`functional extensionality`，您想证明两个函数在扩展上是相等的（从调用者的角度来看，它们的行为相同）。

你不能直接在 Coq 中证明它（因为`=`它是一个定义相等，所以它不是真的），但是如果你愿意，你可以 require 这个模块：

[http://coq.inria.fr/stdlib/Coq.Logic.FunctionalExtensionality.html](http://coq.inria.fr/stdlib/Coq.Logic.FunctionalExtensionality.html)

这将为您提供功能可扩展性的公理。您可以调用该策略，该策略`extensionality y.`将使您可以访问`y`.

# c++ - （不）在异常中使用 std::string

> ID：15831029
> 
> 赞同：25
> 
> 时间：2013-04-05T09:59:41.410
> 
> 标签：c++, exception, boost

我一直在读到我不应该抛出一个`std::string`或其他一些分配内存的类。喜欢[这里](https://stackoverflow.com/questions/134569/c-exception-throwing-stdstring)或更重要[的](http://www.boost.org/community/error_handling.html)是第 3 点。 -**不要嵌入`std::string`对象**。

所以现在我试图在我的项目中插入[boost::exception](http://www.boost.org/doc/libs/1_53_0/libs/exception/doc/boost-exception.html)，我看到了什么：[很多字符串](http://www.boost.org/doc/libs/1_53_0/libs/exception/doc/synopsis.html)。

为什么 boost 不遵守自己的建议？

如果我有不能硬编码的参数，比如安全的配置文件，我怎么能把它们放到异常中，而不使用`std::string`？

还是指南**不只使用`std::string`**一个**尽可能少****使用`std::string`**的指南？我有点困惑……

我做了一些研究。如果我错了，请纠正我。

* * *

如果我理解正确，这完全是关于抛出**期间**的分配以及分配的内存发生了什么。因此，如果我在构造函数中分配内存并且无法在异常的析构函数中释放内存，则会丢失内存，这将产生内存泄漏。但是在抛出之前分配这个是可以的，所以异常是干净的。

我试过这个：

```
struct xexception {
  int *ttt[10];
  xexception() {
    ttt[0] = new int[0xfffffffL];
    ttt[1] = new int[0xfffffffL];
    ttt[2] = new int[0xfffffffL];
    ttt[3] = new int[0xfffffffL];
    ttt[4] = new int[0xfffffffL];
    ttt[5] = new int[0xfffffffL];
    ttt[6] = new int[0xfffffffL];
    ttt[7] = new int[0xfffffffL];
    ttt[8] = new int[0xfffffffL];
    ttt[9] = new int[0xfffffffL];
  }

  ~xexception() throw() {
    //never happen
    delete[] ttt[0];
    delete[] ttt[1];
    delete[] ttt[2];
    delete[] ttt[3];
    delete[] ttt[4];
    delete[] ttt[5];
    delete[] ttt[6];
    delete[] ttt[7];
    delete[] ttt[8];
    delete[] ttt[9];
  }
};

int main(int argc, const char *argv[]) {
  try {
    throw(xexception());
  }
  catch (const xexception &e) {
    std::cerr << "\nttt " << e.ttt[0][0] << std::endl;
  }
  catch (std::bad_alloc) {
    std::cerr << "bad alloc" << std::endl;
  }

  return 0;
} 
```

结果是，我得到了**bad_alloc**和巨大的内存泄漏。

现在，如果我之前进行分配，它*也会*抛出 bad_alloc 但在创建异常之前。

* * *

**我对异常概念的例外是：**

谁在乎？如果我的程序中有一个 bad_alloc，由于 memory_leak 或其他原因（我说的是 PC 上的程序而不是微控制器），我还有其他问题。也许我可以弄清楚发生了 bad_alloc，但是在哪里呢？在我的 alloc 函数期间（可能是 1000 个）或在`std::string`（我知道它是字符串但......不可能操纵字符串的内存......或者它消散）。

```
try {
  // where is the error???
  int *x = new int[100];  // here?
  ....
  int *y = new int[100];  // or here?
  ....
  int *z = new int[100];
  ....
  int *w = new int[100];
  ....
  int *t = new int[100];
  ....
  int *f = new int[100];

  ....

  std::string str("asdfasdfasdfasdfasdfasdfasdf"); // maybe here
}
catch (the error) {
  ....
} 
```

进而？我应该试着弄清楚它发生在哪里吗？因此我会使用**valgrind**而不是例外。

```
void foo() {
  int *i = new int[1];
  foo();
}

try {
  foo();
}
chatch( bad_boy ) {
  go_exception_handler_go(parameters); // oh, shit happens: also an stack_overflow may happend, cause stack is also full
} 
```

或者我应该操纵错误消息并记录它，最终会抛出下一个bad_alloc。

请不要误解我的意思。自从我看到了 boost::exception 我已经重写了我的异常类（直到等待答案），但我也认为没有必要捡起每一粒沙子。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-06T17:34:14.173

该建议基本上是在告诉您“不要使用任何可能在异常中引发异常的构造”。这是因为如果您在尝试抛出异常时遇到异常，C++ 运行时将立即调用`terminate()`并终止您的程序。

现在，如果（任何一个）所涉及的异常`terminate()`无论如何都会调用（这是未捕获异常的默认设置），那么您真的不需要担心它。例如，如果您的应用程序无法处理`bad_alloc`（无法从内存不足中恢复），那么您无需担心`std::string`可能会抛出它的复制构造函数（例如 ）。

但是，如果您希望能够捕获并从中恢复`bad_alloc`，则需要确保您的异常复制构造函数都不会导致异常。如果您正在编写其他应用程序将使用的库，则不应假设该应用程序不想处理`bad_alloc`.

C++11 通过尽可能使用移动构造函数（而不是复制构造函数）使这变得更容易。由于`std::string`永远不会抛出异常的移动构造函数`std:string`，只要正确实现移动构造函数并确保使用它们，您就可以安全地在异常类型中使用 a 。请注意，在 throw 表达式中要抛出的对象的初始构造不是异常抛出过程的一部分，因此构造函数可以抛出异常而不会导致双重异常（和 terminate()）。因此，如果您有：

```
throw some_function(); 
```

`some_function`可能会抛出异常（例如`bad_alloc`）而不返回要抛出的对象，这很好。如果它没有抛出异常（并返回一个有效对象），则异常类型的移动构造函数将用于异常抛出过程（如果可用），并且该移动构造函数不得抛出异常。

* * *

完全独立于上述情况，每当您调用时，`new`您需要确保`delete`在每种可能的情况下都只有一个位置会调用，否则您将泄漏内存（或因双重删除而崩溃）。每当您有一个函数调用`new`然后执行可能引发异常的其他操作（例如`new`再次调用）时，这变得很棘手。如果这发生在构造函数中，则不会调用对象的析构函数（尽管会调用基类和字段的析构函数），因此您无法像尝试对示例进行的那样在析构函数中进行清理。

幸运的是`std::unique_ptr`，存在使这更容易。如果您将异常类编写为：

```
struct xexception {
  std::unique_ptr<int[]> ttt[10];
  xexception() {
    ttt[0].reset(new int[0xfffffffL]);
    ttt[1].reset(new int[0xfffffffL]);
    ttt[2].reset(new int[0xfffffffL]);
    ttt[3].reset(new int[0xfffffffL]);
    ttt[4].reset(new int[0xfffffffL]);
    ttt[5].reset(new int[0xfffffffL]);
    ttt[6].reset(new int[0xfffffffL]);
    ttt[7].reset(new int[0xfffffffL]);
    ttt[8].reset(new int[0xfffffffL]);
    ttt[9].reset(new int[0xfffffffL]);
  }
}; 
```

它应该可以工作并且不会泄漏内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T01:14:59.453

虽然我认为不使用`std::string`核心，基本例外可能是一个很好的指导方针，但我认为面向用户的库/应用程序不一定要遵循这一点。

可能还有其他原因，但您遇到了第一个原因：您想向用户（或开发人员）指示具有上下文意义的信息，而您通常无法仅使用文字字符串来做到这一点。为了做到这一点，必须进行动态分配。如果出于某种原因，你有一个`bad_alloc`，你可能已经开始使用软管，所以它不会给你买/失去任何东西。

**编辑：**

顺便说一句： 的析构函数`std::exception`被标记为虚拟是有原因的！

# c++ - 确定乘法输出是否适合 64 位的最大值

> ID：15831035
> 
> 赞同：4
> 
> 时间：2013-04-05T09:59:51.993
> 
> 标签：c++, c

我有一条乘法线可以导致输出大于 64 位值。（最多我可以持有）。

我想确定确定输出是否大于 64 位的最佳方法是什么。

我尝试过一些类似的东西。

```
uint64_t val1, val2, val3;
if ((val1 * val2 * val3 ) > UINT64_MAX) {
    //warning message
}
else {
    //do something
} 
```

变量被初始化为一些值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:13:55.570

`a * b`两个任意大小的无符号 (!) 整数相乘，我们称之为这种类型，`T`当且仅当结果大于`T`可以容纳的最大数字时才会溢出。标准库可以`T`使用[`std::numeric_limits`](http://en.cppreference.com/w/cpp/types/numeric_limits).

上面的语句也可以写成：`a * b`当且仅当 时才会溢出`a > max(T) / b`，这与`b > max(T) / a`（其中`/`是整数除法，`max(T)`是可以容纳的最大数`T`）相同。

示例：假设`T = uint8_t`，所以`max(T) == 255`。几个演示示例：

```
a              |  16 |  15 |  14
b              |  16 |  17 |  18
---------------------------------
a * b          | 256 | 255 | 252
overflow?      | yes |  no |  no
---------------------------------
max(T)/b       |  15 |  15 |  14
a > max(T)/b?  | yes |  no |  no 
```

使用此方法检查乘法`a * b`是否会溢出：

```
#include <limits.h>

template<typename T>
bool multiplicationWillOverflow(T a, T b) {
    return a > std::numeric_limits<T>::max() / b;
} 
```

然后，在您的三个数字的乘积上使用此方法两次：

```
uint64_t val1, val2, val3;
if (multiplicationWillOverflow(val1, val2)) {
    //warning message
}

uint64_t product12 = val1 * val2, 
else if (multiplicationWillOverflow(product12, val3)) {
    //warning message
}

uint64_t product123 = product12 * val3; 
```

另一种选择是将乘法和检查封装在*一个*方法中。如果发生溢出则*抛出异常。*

```
template<typename T>
T safeMultiplication(T a, T b) {
    if (a > std::numeric_limits<T>::max() / b)
        throw ...;
    else
        return a * b;
} 
```

您可以将此行为封装在自定义类型中，该类型会重载算术运算符并在发生溢出时抛出。

*如果您期望溢出作为“正常行为”/在“正常情况下”，请*不要使用异常。*在这种情况下，请改用自定义类型中的错误参数/标志。*

 *在具有异常状态的浮点运算中也有类似的事情`NaN`：继续计算一个`NaN`值将`NaN`再次导致结果。在自定义类型中标记溢出的类似实现将确保您可以轻松检测链式计算中的溢出，例如您的三个数字的乘积。关于自定义类型的要点是，您不必编写要计算两次的表达式：作为计算本身加上预先的溢出检查。*

# php - 通过 AJAX jquery 更改表格背景颜色？

> ID：15831040
> 
> 赞同：3
> 
> 时间：2013-04-05T10:00:00.990
> 
> 标签：php, javascript, jquery, html, ajax

**场景：**当我的网页加载自动搜索时，用户输入了单元格并具有价值。如果已输入表格背景颜色为红色，否则为绿色。

假设该表尚未输入。桌子背景绿色这样

![在此处输入图像描述](https://i.stack.imgur.com/P7QDF.png)

和表的源代码：

```
 <table width="1023" height="200" border="1">
      <tr>
        <th colspan="2" scope="col">A1</th>
        <th colspan="2" scope="col">A2</th>
        <th colspan="2" scope="col">A3</th>
       </tr>
    <tr>
        <td bgcolor="#00CC00"><div class="data" align="center" value="A1.4"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A1.4" /></td>
        <td bgcolor="#00CC00"><div class="data" align="center" value="A1.8"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A1.8" /></td>
        <td bgcolor="#00CC00"><div class="data" align="center" value="A2.4"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A2.4" /></td>
        <td bgcolor="#00CC00"><div class="data" align="center" value="A2.8"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A2.8" /></td>
        <td bgcolor="#00CC00"><div class="data" align="center" value="A3.4"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A3.4" /></td>
        <td bgcolor="#00CC00"><div class="data" align="center" value="A3.8"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A3.8" /></td>
    </tr>
    </table> 
```

我使用 ajax.jquery 像这样检查单元格值

```
 var htmlobjek;
     $(document).ready(function () {
         var i = $("td").find("td.data").val();
          $.ajax({
                 url: "cek.php",
                 data: "i",
                 cache: false,
                 success: function (data) {
                     $("#cek").val(data);
                 }
             });     
     }); 
```

当然在 cek.php 中会喜欢这样

```
<?php
$posisi =  $_POST[i];

$val = mssql_num_rows(mssql_query("SELECT*FROM tblTrnProduct WHERE Posisi = '$posisi'"));

echo"$val";
?> 
```

获取 cek.php 的输出。我用了一个小技巧。我做一个

```
<input id="cek" name="cek" type="text" /> 
```

作为一面镜子。

之后我用这个javascript操作表格背景

```
 $(document).ready(function () {
         $("#cek").change(function () {
             var cek = $("#cek").val();
                 if (cek === 0) {
                     $("td").style("bgcolor", "#00CC00");//green
                     else {
                         $("td").style("bgcolor", "#FF0000");//red

                     }
                 }
            });
     }); 
```

但是用户通过弹出表单输入数据后什么也没有发生。任何可以通过示例帮助解决此问题的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:02:39.653

if-else 上的括号不正确，就像 else 在 if 内：

```
if (cek === 0) {
    $("td").style("bgcolor", "#00CC00");//green
         else {
           $("td").style("bgcolor", "#FF0000");//red
          }
 } 
```

我想你的意思是

```
if (cek === 0) {
     $("td").style("bgcolor", "#00CC00");//green
 } else {
     $("td").style("bgcolor", "#FF0000");//red
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T06:56:31.880

真正的解决方案

```
script type="text/javascript">
    var htmlobjek;
     $(document).ready(function () {
    var ajaxCall = $.ajax({
        url: "cek.php",
        type:'POST',
        data: $('#data').serialize(),
        cache: false,
    }).done( function (data) {
        $("#cek").val(data);
    }).fail( function () {
        alert('I can not send ajax here');
    });

    ajaxCall.done( function (data) {
        var k = $("#cek").val();
        if(k == 0){
            $(".dataa").css("background-color", "#00CC00");//green
        }
        else {
            $(".dataa").css("background-color", "#FF0000");//red
        }
    });
    });
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:06:43.230

```
 You can try this,

  if (cek === 0) {
    $("td").css("backgroundColor", "#00CC00");//green
  } else {
    $("td").css("backgroundColor", "#FF0000");//red
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:09:18.100

为 CSS 背景属性包含 jquery.color.js。如果不写新类并申请TR addClass("newclass")

# java - 如何使用浏览器在服务器上运行 Shell 脚本

> ID：15831043
> 
> 赞同：2
> 
> 时间：2013-04-05T10:00:08.390
> 
> 标签：java, jsp, shell

我有输出为 output.zip 的 shell 脚本。

我想使用浏览器在服务器上运行 Shell 脚本并下载 output.zip。

请建议我如何做到这一点，我应该使用哪种技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:12:02.643

不确定你的服务器平台，但我假设你有 JAVA 并且你可以处理 http 请求。

使用以下命令创建输出文件：

```
Runtime.getRuntime().exec("sh test.sh"); 
```

第二部分是将文件的内容作为响应流式传输。只需将响应标头设置为

```
Content-Description: File Transfer 
Content-type: application/octet-stream
Content-Disposition: attachment; filename="YourFilename.zip"
Content-Transfer-Encoding: binary
Content-Length: LengthOfYourFileInBytes 
```

您可以将文件内容作为响应的正文发送。

# javascript - 仅当检查同一行上的复选框时，jQuery / javaScript才能到达sum字段

> ID：15831050
> 
> 赞同：0
> 
> 时间：2013-04-05T10:00:23.580
> 
> 标签：javascript, jquery

我有一个 jquery / javascript 函数，它总计我订单中的多维数据集数。这工作100％，低于。

```
function calculateTotalVolume() {
    var grandTotalCubes = 0;
    $("table.authors-list").find('input[name^="cubicvolume"]').each(function () {
        grandTotalCubes += +$(this).val();
    });
    $("#grandtotalcubes").text(grandTotalCubes.toFixed(2));
} 
```

如上所述，效果很好。我需要第二个函数来汇总相同的字段，但前提是选中了名为 Treated 的复选框。每行都有一个名为的复选框，但由于表格是动态生成的，因此每次都会在名称后面附加一个计数器，因此我使用`name^="treated"`

我在追求类似下面的东西，但这不起作用：

```
function calculateTotalTreatedVolume() {
    var grandTotaltreatedCubes = 0;
    $("table.authors-list").find('input[name^="cubicvolume"]').each(function () {
        if($("table.authors-list").find('checkbox[name^="treated"]').checked){
            alert('10');
            grandTotaltreatedCubes += +$(this).val();
    }

    });
    $("#grandtotaltreatedcubes").text(grandTotaltreatedCubes.toFixed(2));
} 
```

一如既往的帮助。

**更新**

渲染后的 HTML 输出[添加了 1 个动态行]：（仍在开发中，非常粗糙，请见谅）

```
<table class="authors-list" border=1>
  <thead>
    <tr>
      <td></td><td>Product</td><td>Price/Cube</td><td>Qty</td><td>line total cost</td><td>Discount</td><td>Cubes per bundle</td><td>pcs per bundle</td><td>cubic vol</td><td>Bundles</td><td><input type="checkbox" class="checkall"> Treated</td>
    </tr>
  </thead>
  <tbody>
    <tr>
     <td><a class="deleteRow"> <img src="http://devryan.tekwani.co.za/application/assets/images/delete2.png" /></a></td>
     <td><input type="text" id="product" name="product" />
     <input type="hidden" id="price" name="price" readonly="readonly"/></td>
     <td><input type="text" id="adjustedprice" name="adjustedprice" /></td>
     <td><input type="text" id="qty" name="qty" /></td>
     <td><input type="text" id="linetotal" name="linetotal" readonly="readonly"/></td>
     <td><input type="text" id="discount" name="discount" /></td>
     <td>
        <input type="text" id="cubesperbundle" name="cubesperbundle" >
    </td>
    <td>
        <input type="text" id="pcsperbundle" name="pcsperbundle" >
    </td>
    <td>
        <input type="text" id="cubicvolume" name="cubicvolume"  size='5' disabled>
    </td>
     <td><input type="text" id="totalbundles" name="totalbundles" size='5' disabled ></td>
    <td valign="top" ><input type="checkbox" id="treated" name="treated" ></td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
        <td colspan="15"><input type="button" id="addrow" value="Add Product" /></td>
    </tr>
    <tr>
        <td colspan="3">Grand Total: R<span id="grandtotal"></span></td>
        <td colspan="2">Ave Discount: <span id="avediscount"></span>%</td>
        <td colspan="1">Total Cubes: <span id="grandtotalcubes"></span></td>
        <td colspan="15">Treated Cubes: <span id="grandtotaltreatedcubes"></span></td>
    </tr>

    <tr>
        <td colspan="15"><textarea  rows="1" cols="50" placeholder="Specific Comments"></textarea><textarea  rows="1" cols="20" placeholder="Customer Reference"></textarea>
</td>
    </tr>
  </tfoot>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:02:31.390

首先转到父 tr 然后使用 find 查找当前行中的复选框，并使用 DOM 对象而不是 jQuery 对象进行检查，您可以使用索引器将 jQuery 对象转换为 DOM 对象。

改变

```
if($("table.authors-list").find('checkbox[name^="treated"]').checked){ 
```

到

```
if($(this).closest('tr').find('checkbox[name^="treated"]')[0].checked){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:02:38.303

`checked`是实际 DOM 元素的属性，而您拥有的是 jQuery 元素。你需要改变这个：

```
$("table.authors-list").find('checkbox[name^="treated"]').checked 
```

对此：

```
$("table.authors-list").find('checkbox[name^="treated"]')[0].checked
                                                         -^- // get DOM element 
```

或者更多的 jQuery 风格：

```
$("table.authors-list").find('checkbox[name^="treated"]').is(':checked') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:03:31.187

更改以下行

```
if($("table.authors-list").find('input[name^="treated"]').checked){ 
```

对此

```
if($("table.authors-list").find('input[name^="treated"]').is(':checked')){ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T10:05:03.500

`$("table.authors-list").find('checkbox[name^="treated"]:checked')`您可以使用和使用最接近它的输入值（假设在同一行）遍历“选中”复选框。

假设您的表格有很多行，每行都有一个复选框和一个输入，您可以使用：

```
function calculateTotalTreatedVolume() {
    var grandTotaltreatedCubes = 0;

    // iterate through the "checked" checkboxes
    $("table.authors-list").find('input[type="checkbox"][name^="treated"]:checked').each(function () {

        // use the value of the input in the same row
        grandTotaltreatedCubes += +$(this).closest('tr').find('input[name^="cubicvolume"]').val();

    });
    $("#grandtotaltreatedcubes").text(grandTotaltreatedCubes.toFixed(2));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T10:12:22.147

试试这个：

```
var grandTotaltreatedCubes = 0;

// Cache the table object here for faster processing of your code..
var $table = $("table.authors-list");

$table.find('input[name^="cubicvolume"]').each(function () {

    // Check if checkbox is checked or not here using is(':checked')
    if ($table.find('checkbox[name^="treated"]').is(':checked')) {
        grandTotaltreatedCubes += $(this).val();
    }
});

$("#grandtotaltreatedcubes").text(grandTotaltreatedCubes.toFixed(2)); 
```

# android - 在内存中创建文件夹

> ID：15831051
> 
> 赞同：9
> 
> 时间：2013-04-05T10:00:24.587
> 
> 标签：android

我无法获得在内部存储器中创建文件夹的方法，

我在 Android 中进行了几次对话，在内部存储器中[创建文件夹](https://stackoverflow.com/questions/8124612/android-create-folders-in-internal-memory?rq=1) 以及[从 android 的内部存储器读取文件时面临的问题](https://stackoverflow.com/questions/3037037/problem-facing-in-reading-file-from-internal-memory-of-android?rq=1)。但我仍然无法满足我的要求。

我的要求是，我想在内存中创建一个文件夹，我想在那里存储一个视频。

非常感谢您提前提供宝贵的反馈。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-05T10:19:08.987

试试下面

```
File mydir = context.getDir("users", Context.MODE_PRIVATE); //Creating an internal dir;
if (!mydir.exists())
{
     mydir.mkdirs();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T10:06:43.550

这是我用于在内部存储器中创建文件的代码：

```
 File myDir = context.getFilesDir();
    // Documents Path
    String documents = "documents/data";
    File documentsFolder = new File(myDir, documents);
    documentsFolder.mkdirs(); // this line creates data folder at documents directory

    String publicC = "documents/public/api." + server;
    File publicFolder = new File(myDir, publicC);
    publicFolder.mkdirs(); // and this line creates public/api.myservername folder in internal memory 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-28T07:58:08.727

要在手机主存储器（通常是内部存储器）上创建目录，您应该使用以下代码。请注意，ExternalStorage in`Environment.getExternalStorageDirectory()`不一定指 sdcard，它返回手机主存储内存

```
File mediaStorageDir = new File(Environment.getExternalStorageDirectory(), "MyDirName");

if (!mediaStorageDir.exists()) {
    if (!mediaStorageDir.mkdirs()) {
        Log.d("App", "failed to create directory");
        return null;
    }
} 
```

使用此代码创建的目录将对电话用户可见。另一种方法（如接受的答案）在位置（/data/data/package.name/app_MyDirName）中创建目录，因此普通手机用户将无法轻松访问它，因此您不应使用它来存储视频/照片等等

您将需要权限，在 AndroidManifest.xml

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-01T09:06:55.230

> ```
> <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
> <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
> ```

```
File direct = new File(Environment.getExternalStorageDirectory()+"/folder_name");

if(!direct.exists()) {
     if(direct.mkdir()); //directory is created;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T10:11:51.767

“data/package_name”目录中有一个“cacheDirectory”。

如果你想在那个缓存中存储一​​些东西，

```
File cacheDir = new File(this.getCacheDir(), "temp");
if (!cacheDir.exists())
    cacheDir.mkdir(); 
```

**这**是上下文。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-12T07:50:32.693

```
try {
    File cashDir = new File(dir.getCanonicalPath(),"folder");
    if(!(cashDir.exists())) cashDir.mkdirs();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# iphone - cocos2d在图层的一部分截图？

> ID：15831054
> 
> 赞同：2
> 
> 时间：2013-04-05T10:00:35.687
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我只想截取图层的中间部分（它是图像），而没有位于屏幕上下部分的菜单。是否可以将图层的一部分截取到图像中？

```
//normal screenshots
-(UIImage *) screenshotWithNode:(CCNode*)node
{
    [CCDirector sharedDirector].nextDeltaTimeZero = YES;

    CGSize winSize = [CCDirector sharedDirector].winSize;
    CCRenderTexture* rtx = [CCRenderTexture renderTextureWithWidth:winSize.width
                                     height:winSize.height];
    [rtx begin];
    [node visit];
    [rtx end];

    return [rtx getUIImage];
} 
```

# linux - 安装plpythonu时出错（postresql & linux）

> ID：15831056
> 
> 赞同：1
> 
> 时间：2013-04-05T10:00:49.410
> 
> 标签：linux, postgresql-9.1

我正在尝试运行此命令`createlang plpythonu dbanem` ，但出现错误

```
createlang: language installation failed: ERROR:  could not open extension control file "/usr/share/postgresql/9.1/extension/plpythonu.control" 
```

我怎样才能安装plpythonu？（我刚开始使用 linux）你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:47:55.037

```
apt-get install postgresql-plpython 
```

# c# - 在 ToString 的帮助下比较 C# 中的 lambda 表达式

> ID：15831057
> 
> 赞同：1
> 
> 时间：2013-04-05T10:00:50.020
> 
> 标签：c#, linq, lambda, moq, assert

我正在尝试在测试中断言 2 个 Linq 表达式。我正在使用 Moq 并在回调中捕获在被测方法中调用的表达式。

```
Expression<Func<Role, bool>> actualExpression = null;
roleRepositoryMock.Setup(t => t.Search(It.IsAny<Expression<Func<Role, bool>>>()))
            .Callback((Expression<Func<Role, bool>> exp) =>
                {
                    actualExpression = exp;
                })
            .Returns(new List<Role> { new Role { Name = "site1_code_role1", Description = "descr" }, new Role { Name = "site1_code" } }); 
```

然后我比较下一个方法：

```
var siteCode = "site1";
var namePattern = "role1";
Expression<Func<Role, bool>> expectedExpression = 
                    t => (string.IsNullOrEmpty(siteCode)
                          || t.Name.StartsWith(siteCode + "_") 
                          || t.Name == siteCode) 
                          && t.Name.Contains(namePattern);
Assert.AreEqual(expectedExpression.ToString(), actualExpression.ToString()); 
```

上述断言失败。字符串的预期表达式等于：

```
t => (((IsNullOrEmpty(value(BL.Tests.RolesServiceTests+<>c__DisplayClass6).siteCode) OrElse t.Name.StartsWith((value(BL.Tests.RolesServiceTests+<>c__DisplayClass6).siteCode + "_"))) OrElse (t.Name == value(BL.Tests.RolesServiceTests+<>c__DisplayClass6).siteCode)) AndAlso t.Name.Contains(value(BL.Tests.RolesServiceTests+<>c__DisplayClass6).namePattern)) 
```

实际表达式等于：

```
t => (((IsNullOrEmpty(value(BL.Services.RolesService+<>c__DisplayClass3).site) OrElse t.Name.StartsWith((value(BL.Services.RolesService+<>c__DisplayClass3).site + "_"))) OrElse (t.Name == value(BL.Services.RolesService+<>c__DisplayClass3).site)) AndAlso t.Name.Contains(value(BL.Services.RolesService+<>c__DisplayClass3).pattern)) 
```

不同之处在于：

*   c_DisplayClass6*和*c_DisplayClass3
*   BL.Services.RolesService 和 BL.Tests.RolesServiceTests（命名空间不同）

任何人都可以解释或向我发送正确的方向为什么以及如何解决它？也许尝试通过 ToString() 比较这些是绝对错误的方法？备择方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:11:19.910

最好编写测试来验证一段代码的外部可观察行为，而无需耦合到实现细节。通过将表达式转换为字符串，您不仅将测试与精确表达式耦合，而且与`ToString`方法的实现耦合，这可能会在未来的 .NET 版本中发生变化。

更好的方法是断言某些输出状态。看起来您想验证传递到存储库的 linq 表达式是否会过滤掉正确的`Role`集合。既然您已经可以通过回调捕获表达式，为什么不针对这个表达式编写一些测试呢？

假设`Role`是一个[POCO](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object)`Role` ，编写调用具有不同输入集合的表达式并断言产生正确输出的测试应该是微不足道的。如果表达式很复杂，您可能需要许多输入，但它看起来像这样：

```
var roles = new List<Role>
{
    new Role { Name = siteCode+"_role1"  },
    new Role { Name = siteCode+"_role22"  },
    new Role { Name = siteCode+"_role1324"  },
};

Assert.AreEqual(2, roles.Where(actualExpression.Compile()).Count()); //test the number of roles returned is as expected 
```

更好的是只在客户端代码的接口上进行测试，而测试不知道如何查询存储库。

# r - 如何绘制生存函数的“逆”？

> ID：15831058
> 
> 赞同：4
> 
> 时间：2013-04-05T10:00:54.943
> 
> 标签：r, plot, survival-analysis

我试图绘制生存函数的倒数，因为我的数据实际上是随着时间的推移事件的比例增加。我可以制作 Kaplan-Meier 生存图，但我想制作这些图的“相反”。我可以使用以下方法获得我想要的东西`fun="cloglog"`：

```
plot(survfit(Surv(Days_until_workers,Workers)~Queen_Number+Treatment,data=xdata),
     fun="cloglog", lty=c(1:4), lwd=2, ylab="Colonies with Workers",
     xlab="Days", las=1, font.lab=2, bty="n") 
```

!['cloglog' 功能](https://i.stack.imgur.com/3j3Ih.jpg)

但我不太明白这对时间做了什么（*即*不是从 0 开始，距离减小了？），以及为什么生存线延伸到 y 轴上方。

非常感谢一些帮助！

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T11:52:21.563

用于`fun="event"`获得所需的输出

```
fit <- survfit(Surv(time, status) ~ x, data = aml)
par(mfrow=1:2, las=1)
plot(fit, col=2:3)
plot(fit, col=2:3, fun="event") 
```

![在此处输入图像描述](https://i.stack.imgur.com/aaWyx.png)

搞砸坐标轴的原因`fun="cloglog"`是它根本没有绘制分数。相反，它是根据以下内容绘制的`?plot.survfit`：

> "cloglog" 创建一个互补的对数生存图（f(y) = log(-log(y)) 以及 x 轴的对数刻度）

此外，`fun`参数不限于像`"event"`or这样的预定义函数`"cloglog"`，因此您可以轻松地为其赋予您自己的自定义函数。

```
plot(fit, col=2:3, fun=function(y) 3*sqrt(1-y)) 
```

# php - 如何在不等待第一个响应的情况下同时调用两个 api？

> ID：15831059
> 
> 赞同：4
> 
> 时间：2013-04-05T10:01:00.363
> 
> 标签：php, api, fork, pcntl

我正在制作一个搜索小部件。当我搜索时，我从 2 个 api 中获取结果，一个来自 yelp，另一个来自另一个来源。但这个过程需要更长的时间

```
$dataProvider = SearchUtil::locallookup($for, $near); //local api
$content=SearchUtil::yelplookup($for,$near);    //yelp api
$array=array_merge($dataProvider,$content); 
```

有什么方法可以将这两个 api 一起调用吗？我不希望在第一个 api 给出结果后调用 yelp api。我想同时给他们两个打电话。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:10:04.727

我得到了一些结果。

[http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/](http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/)

[https://github.com/petewarden/ParallelCurl](https://github.com/petewarden/ParallelCurl)

可能这对其他人有用..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:46:29.967

这是可能的，但您必须同时重写 locallookup 和 yelplookup 并将它们绑定到 cURL multi_exec 上下文中。默认情况下，cURL 同步运行。在您的情况下，您希望它在多组数据上异步，最好的方法是将两个通道都运行到 multi_exec 上下文中。

此页面上的更多信息：http: [//php.net/manual/fr/function.curl-multi-exec.php](http://php.net/manual/fr/function.curl-multi-exec.php)。

一旦您使用 curl_multi_exec()，您将能够使用第二个参数（将引用更改为 true 或 false）跟踪调用集的状态，并且从那里，您还可以获取内容使用 curl_multi_getcontent() 的每个频道。

# javascript - window.open 无法使用 Chrome 中的浏览器后退按钮打开

> ID：15831060
> 
> 赞同：3
> 
> 时间：2013-04-05T10:01:02.443
> 
> 标签：javascript, jquery, onclick, window.open

我正在尝试使用简单的`window.open`.

但是我想要浏览器后退按钮，所以我给出了以下参数。它适用于除 Google Chrome 之外的所有浏览器。我已经尝试了几乎所有可能的排列，但 Chrome 中没有出现后退按钮：

```
<a onclick="window.open('http://www.google.com',
                        'popUpWindow',
                        'height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=yes,directories=no, status=yes'
                       );">Click Here</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:20:30.410

更改`menubar=no`为`menubar=yes`，这是代码。

**注意**：它不会作为弹出窗口打开，它将作为新选项卡打开。

```
<a onclick="window.open('http://www.google.com',
                        'popUpWindow',
                        'height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=yes,location=yes,directories=no, status=yes'
                       );">Click Here</a> 
```

# java - 如何使用 Java 通过 web 服务检索 sharepoint 中文档库中文件的大小

> ID：15831063
> 
> 赞同：3
> 
> 时间：2013-04-05T10:01:06.043
> 
> 标签：java, web-services, sharepoint, filesize

我正在用 Java 编写一个应用程序，它必须报告 SharePoint 2007 上文档库中的所有可用文件。该应用程序使用来自 korecky ( [Project Home](http://code.google.com/p/java-sharepoint-library/) ) 的 java sharepoint 库。除了几个文件信息之外，一切正常，我没有得到文件大小。

具体来说，请求被发送到调用 GetListItems 方法的 List.asmx Web 服务。

请求如下所示：

```
<QueryOptions>
    <ViewAttributes IncludeRootFolder="True" Scope="RecursiveAll"/>
    <IncludeMandatoryColumns>
        TRUE
    </IncludeMandatoryColumns>
    <DateInUtc>
        TRUE
    </DateInUtc>
</QueryOptions> 
```

根据 web 服务响应中的几个论坛，应该有一个名为**ows_File_x0020_Size**的可用字段，它应该包含一个表示文件大小的 int，但它丢失了。有人知道如何修改请求以接收文件大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:29:09.547

您需要说出要调用的字段（在 ViewFields 中）。最终请求应如下所示：

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
      <listName>My Documents List</listName>
      <viewName></viewName>
      <query><Query></Query></query>
      <viewFields>
        <ViewFields Properties="True">
          <FieldRef Name="FileLeafRef"></FieldRef>
          <FieldRef Name="File_x0020_Size"></FieldRef>
        </ViewFields>
      </viewFields>
      <rowLimit>0</rowLimit>
      <queryOptions>
        <QueryOptions>
          <DateInUtc>True</DateInUtc>
          <Paging ListItemCollectionPositionNext=""></Paging>
          <ViewAttributes Scope="Recursive"></ViewAttributes>
          <IncludeAttachmentUrls>True</IncludeAttachmentUrls>
          <IncludeMandatoryColumns>False</IncludeMandatoryColumns>
          <ExpandUserField>False</ExpandUserField>
        </QueryOptions>
      </queryOptions>
    </GetListItems>
  </soap:Body>
</soap:Envelope> 
```

# c - strstr 表现的几率

> ID：15831066
> 
> 赞同：2
> 
> 时间：2013-04-05T10:01:09.977
> 
> 标签：c, performance, algorithm, visual-c++

我正在对我的代码执行一些基准测试，并决定使用`strstr`性能作为参考点。在我的 PC 上，扫描 ~7mb 文件（预加载到 RAM）的所有文本的性能约为 10Gb/秒。
奇怪的是，当我将 strstr 函数的代码从“C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\crt\src\strstr.c”复制到我的程序时，它的性能要差**得多**——大约 650 Mb /秒。代码是这样的：

```
char * __cdecl strstr2 (
    char * str1,
    const char * str2
    )
{
    char *cp = (char *) str1;
    char *s1, *s2;

    if ( !*str2 )
        return((char *)str1);

    while (*cp)
    {
        s1 = cp;
        s2 = (char *) str2;

        while ( *s1 && *s2 && !(*s1-*s2) )
            s1++, s2++;

        if (!*s2)
            return(cp);

        cp++;
    }

    return(NULL);

} 
```

在 Release 中编译所有代码，所有编译器选项默认，无需调试器即可运行。
这种差异是由于某些编译器选项，还是代码`strstr.c`不是编译 CRT 中使用的真实代码，还是其他原因？

我`QueryPerformanceCounter`用来测量时间的 UPD。每个测试重复 500 次，然后我计算平均速度并开始下一个测试。（目前我正在比较 2 个测试 - CRT 的 strstr 和复制的 strstr2）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:55:02.973

Microsoft CRT 可能`strstr`使用`VC\crt\src\intel\strstr.asm`. 在我的系统（Visual Studio 10.0）上，内部循环如下所示：

```
loop_start:
        mov     al,[esi]            ; put next char from str1 into al
        add     esi,1               ; increment pointer in str1
in_loop:
        cmp     al,dl
        je      first_char_found

        test    al,al               ; end of str1?
        jnz     loop_start          ; no, go get another char from str1 
```

# javascript - 如何从 JavaScript (jQuery.path) 中的数组中选择多个参数

> ID：15831069
> 
> 赞同：2
> 
> 时间：2013-04-05T10:01:18.297
> 
> 标签：javascript, jquery, html

我正在尝试根据用户使用 jQuery.path 进行的多次点击来为特定的 HTML 元素设置动画。我遇到的问题是我不确定选择与所选元素相关的参数的最佳方法。

这是我当前的代码：

```
 var segment1Params = {
       start: {
          x: 414,
          y: 121,
          angle: 358.156,
          length: 0.300
        },
        end: {
          x: 114,
          y: 121,
          angle: 0.229,
          length: 0.704
        }
      }

    var segment2Params = {
       start: {
          x: 494,
          y: 104,
          angle: 358.156,
          length: 0.300
        },
        end: {
          x: 114,
          y: 121,
          angle: 0.229,
          length: 0.704
        }
      }

    var segment3Params = {
       start: {
          x: 420,
          y: 306,
          angle: 358.156,
          length: 0.300
        },
        end: {
          x: 114,
          y: 121,
          angle: 0.229,
          length: 0.704
        }
      }

    var segment4Params = {
       start: {
          x: 514,
          y: 389,
          angle: 358.156,
          length: 0.300
        },
        end: {
          x: 114,
          y: 121,
          angle: 0.229,
          length: 0.704
        }
      } 

    var segmentSelected = 1;

    $('body').click(function () {
        segmentSelected += 1; //the amount of user clicks
        $("#segment-"+segmentSelected).animate({path : new $.path.bezier(segment1Params)})
        if (segmentSelected == 5) {
            segmentSelected = 1; //reset the amount of user clicks (looping)
        }
    }); 
```

理想情况下，我想要这条线......

```
$("#segment-"+segmentSelected).animate({path : new $.path.bezier(segment1Params)}) 
```

...选择正确的参数集。

我认为这可以通过数组来完成，但在语法上我不确定最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:10:12.447

您可以将所有段放入一个数组中，并使用一个将段号作为参数并执行动画的函数。

请注意`segments[sid-1]`- 这是因为在 DOM 中，您的段似乎以 1: 开头`#segment-1`，`#segment-2`依此类推，但默认情况下，数组元素始终从 0 开始。

另一件事是`segmentSelected`用初始化`0`：这是因为这个变量应该表示用户点击`body`元素的次数，最初这表示“0 次”，然后才会发生任何点击。

```
var segments = [{
       start: {
          x: 414,
          y: 121,
          angle: 358.156,
          length: 0.300
        },
        end: {
          x: 114,
          y: 121,
          angle: 0.229,
          length: 0.704
        }
      },
     {
       start: {
          x: 494,
          y: 104,
          angle: 358.156,
          length: 0.300
        },
        end: {
          x: 114,
          y: 121,
          angle: 0.229,
          length: 0.704
        }
      } ... ];

       var segmentSelected = 0;

       function animateSegment(sid)
       {
                  $("#segment-"+sid).animate({path : new $.path.bezier(segments[sid-1])});
       }

       $('body').click(function () {
        segmentSelected += 1; //the amount of user clicks
        animateSegment(segmentSelected);
        if (segmentSelected == 5) {
            segmentSelected = 0; //reset the amount of user clicks (looping)
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:10:42.780

您可以使用与此类似的数组：

```
var selectedSegment = 1;
var segments = [];

segments.push({
    start: {
        x: 414,
        y: 121,
        angle: 358.156,
        length: 0.300
    },
    end: {
        x: 114,
        y: 121,
        angle: 0.229,
        length: 0.704
    }
});

segments.push({
    start: {
        x: 494,
        y: 104,
        angle: 358.156,
        length: 0.300
    },
    end: {
        x: 114,
        y: 121,
        angle: 0.229,
        length: 0.704
    }
})

segments.push({
    start: {
        x: 420,
        y: 306,
        angle: 358.156,
        length: 0.300
    },
    end: {
        x: 114,
        y: 121,
        angle: 0.229,
        length: 0.704
    }
})

segments.push({
    start: {
        x: 514,
        y: 389,
        angle: 358.156,
        length: 0.300
    },
    end: {
        x: 114,
        y: 121,
        angle: 0.229,
        length: 0.704
    }
}) 
```

然后像这样使用它：

```
console.log(segments[selectedSegment]); 
```

* * *

### 边注

* * *

我在上面的示例中使用[**了 array.push()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push) **，它在数组的末尾**添加了一个新元素。

要将项目添加到数组的开头，请改用[**Array.unshift()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/unshift)。

# javascript - jQuery datePicker 中的奇怪行为

> ID：15831070
> 
> 赞同：1
> 
> 时间：2013-04-05T10:01:19.460
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

好吧，这有点奇怪，我很惊讶。我想知道是否有人知道这是预期的行为还是某些错误。

在 ASP.NET MVC 应用程序上，我使用 jQuery 处理客户端事件。我有几个日期选择器，我尝试通过在日期选择器对象上使用 onSelect 属性来覆盖点击事件的标准日期颜色模式。

基本上，在 onSelect 上，我使用 AJAX 调用向服务器询问我想以确定的颜色显示的日期并更改它们（通常在将单击的日期添加到“标记”日期列表之后）。

我的代码似乎没有覆盖默认行为（当您单击某一天时，所有天都获得标准颜色，并且您单击的那一天被突出显示），而是似乎在它之后执行（因此在 datepicker 上重绘状态和颜色我的愿望）。

我发现令我惊讶的是，如果我使用 $.ajax 调用服务器，我的代码会在显示标准颜色模式的“默认行为”之前执行，但如果我使用 $.post，我的代码会在“默认行为”之后执行行为”覆盖标准颜色模式。

这是一些代码示例：

```
$("#diasNoLectivosHolder").datepicker({ 
    minDate: arrayNoLaborables[0], 
    maxDate: arrayNoLaborables[1],
    onSelect: function (fecha, calendar, event) {
        $.post($.url("Grupos/diaNoLaborable/" + $("#idGrupo").val() + "/" + fecha.replace(/\//g, ".")), function (xmlResponse) {
            if (xmlResponse)
                $.post($.url("Grupos/obtenerDiasNoLaborables/" + $("#idGrupo").val()), function (xmlDias) {
                    marcarNoLaborables(xmlDias);
                });
            $("#fechaInicio").change();
            return false;
        });
        return false;
    },
    onChangeMonthYear: function () {
        $.post($.url("Grupos/obtenerDiasNoLaborables/" + $("#idGrupo").val()), function (xmlResponse) { marcarNoLaborables(xmlResponse); });
    }
}); 
```

在此示例中，单击任何一天后，日历会短暂闪烁到标准颜色模式，并完成显示 my marcarNoLaborables(xmlDias); 的颜色模式。方法定义。

相反，如果我使用：

```
$("#diasNoLectivosHolder").datepicker({ 
    minDate: arrayNoLaborables[0], 
    maxDate: arrayNoLaborables[1],
    onSelect: function (fecha, calendar, event) {
        $.ajax({ 
            async: false,
            cache: false,
            url: $.url("Grupos/diaNoLaborable/" + $("#idGrupo").val() + "/" + fecha.replace(/\//g, ".")),
            success: function (xmlResponse) {
                if (xmlResponse)
                    $.ajax({ 
                        async: false,
                        cache: false,
                        url: $.url("Grupos/obtenerDiasNoLaborables/" + $("#idGrupo").val()),
                        success: function (xmlDias) {
                            marcarNoLaborables(xmlDias);
                        }
                    });
                $("#fechaInicio").change();
                return false;
            }
        });
        return false;
    },
    onChangeMonthYear: function () {
        $.post($.url("Grupos/obtenerDiasNoLaborables/" + $("#idGrupo").val()), function (xmlResponse) { marcarNoLaborables(xmlResponse); });
    }
}); 
```

datePicker 在任何一天点击后，完成绘制“标准颜色模式”，如果我执行代码，我可以看到我修改的颜色模式适用，但在完成我的代码时，标准模式适用。

所以我的问题是......任何人都知道为什么使用 $.ajax 或 $.post 会影响代码执行时尊重“默认日期选择器行为”的那一刻？

如果我的解释不清楚，请随时提出。英语不是我的母语，有时我很难清楚地解释像这样复杂的情况。

谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:08:56.770

代码在脚本中不同点执行的原因是设置了“异步”选项。

默认情况下，“async”选项设置为 true，这意味着在生成 XHR 时不会阻止代码执行。通常这是想要的行为，因为您不希望 UI 线程在脚本调用服务器以获取更多数据时被阻塞。

将“异步”选项设置为错误的行为更改，以便您的脚本暂停，直到服务器做出响应。

我不确定你脚本的最终目标是什么，所以我无法就你应该做什么提出建议。但是您应该知道，该`$.post`方法只是`$.ajax`具有以下选项的方法的简写：

```
$.ajax({
  type: "POST",
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

因此，如果您的同步的阻塞行为是绝对需要的（不推荐），您可以获得一个“POST”类型的 AJAX 请求，其选项与传递给 $.ajax 的选项相同。

希望这可以帮助。

# actionscript-3 - 哪一个执行得更快：hitTestObject 或 Point.distance？

> ID：15831072
> 
> 赞同：0
> 
> 时间：2013-04-05T10:01:22.403
> 
> 标签：actionscript-3, flash, apache-flex, collision-detection, distance

我正在尝试优化用 AS3 编写的碰撞检测算法。

我想知道如果我使用性能是否有任何改进

```
Point.distance(pointObject1, pointObject2); 
```

在两个对象之间而不是使用

```
object1.hitTestObject(object2); 
```

我的对象或多或少都是凸的，所以边界并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:04:03.803

`Point.distance`如果您的测试对象是包含多个子对象的复杂容器，则速度会更快（4 次甚至更多！）。如果您使用简单的 Sprite，则函数执行时间的差异仅接近 25%。

之所以如此，是因为 Point.distance 只是计算毕达哥拉斯定理的斜边。所以，我们只需要计算 2 个减法、1 个加法和 3 个对合。许多现代处理器都有对合指令，因此速度很快。如果我们使用 hitTest，则需要执行更多操作。并且这些动作的数量会随着 hitTest'ing Sprite 的复杂性而增长（因为它的边界更难计算）。

我刚刚做了一些测试。结果证实我是对的。

```
var ar:Vector.<Sprite> = Vector.<Sprite>([]); //Sprites for hitTest
for(var i:int = 0; i < 100000; i++) {
    var sp:Sprite = new Sprite(); //!The results will be other, is case of use a huge container with come objects here!
    sp.graphics.drawCircle(0, 0, randomIntBetween(1, 200)); //add some shapes
    sp.graphics.drawRect(0, 0, randomIntBetween(1, 200), randomIntBetween(1, 200));
    sp.x = randomIntBetween(-800, 800);
    sp.y = randomIntBetween(-800, 600);
    sp.rotation = randomIntBetween(-360, 360); //rotate and scale in random way
    sp.scaleX = sp.scaleY = Math.random();
    ar.push(sp);
}

var tim:Number = new Date().time;
for each(var spr:Sprite in ar) {
   ar[0].hitTestObject(spr);
}
tim = new Date().time - tim;
trace(tim);

var pn:Vector.<Point> = Vector.<Point>([]); //Points for Point.distance
for(i = 0; i < 100000; i++) {
    var point:Point = new Point(randomIntBetween(-800, 800), randomIntBetween(-800, 800));
    pn.push(point);
}

tim = new Date().time;
for each(var pnt:Point in pn) {
    Point.distance(pn[0], pnt);
}
tim = new Date().time - tim;
trace(tim); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:40:10.147

事实上，你不能将这两者相互比较。如果您的所有对象都是单像素位图，则距离测试可以正常工作。但我想情况并非如此。

`hitTestObject`本质上检查对象的边界矩形，所以它非常快。在进行像素级别检查之前，您总是可以检查距离以查看它们是否足够近，因为它更昂贵并且您不想做太多。

当您在对象周围设置圆形边界并确定两个这样的圆不相交时，距离检查非常有用。如果它们确实相交，那么您必须再次检查 hitTestObject 以确保两个对象形状实际上重叠。所以基本上你会使用两者，距离检查作为第一次通过检查，hitTestObject 作为准确性的后续检查。

# html - 调整移动设备的背景图像大小

> ID：15831073
> 
> 赞同：4
> 
> 时间：2013-04-05T10:01:26.200
> 
> 标签：html, css, image, responsive-design

那时，我刚刚在玩我的网站，并在一些图像上添加了一个“新”横幅，我已经完成了我能想到的最简单的方法，如下所示..

```
<img style="background:url(images/pic3.jpg)" src="images/new.png" alt="" /></a> 
```

现在，在桌面上查看时效果很好，因为图像已经适合网站的大小，但是当我在移动设备上查看时，.png 图像被缩小，而不是背景图像..

我知道我从 css 中遗漏了一些东西，但是由于我还在学习，我不知道它到底遗漏了什么，这就是你们进来的地方。

这是我的html..

```
<div class="thumbnail">
    <a href="#">
        <img style="background:url(images/pic3.jpg)" src="images/new.png" alt="" />
             </a>
                 </div> 
```

这是有问题的移动CSS..

```
.thumbnails
{
}

    .thumbnails .thumbnail
    {
        border-top: solid 1px #e5e5e5;
        padding-top: 2em;
        margin-top: 2em;
    }

    .thumbnails .first
    {
        border-top: 0;
        padding-top: 0;
        margin-top: 0;
    }

    .thumbnails .thumbnail img
        {
            margin-top: 5px;
            height: 180px;
            margin-right: 8px;
        }

    .thumbnails .thumbnail blockquote
        {

            margin-left: 143px;
        } 
```

所以基本上，我只需要知道，如何使背景图像像前景图像（.png 图像）一样缩小

我相信有人可以提供帮助，非常感谢。

编辑：这是一个快速的小提琴，所以你可以看到发生了什么...... [http://jsfiddle.net/bBMdp/](http://jsfiddle.net/bBMdp/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:04:11.147

试试这个：

```
.thumbnails .thumbnail img{
    margin-top: 5px;
    height: 180px;
    margin-right: 8px;

    background-size: 100% 100%;

} 
```

或者：

```
.thumbnails .thumbnail img{
    margin-top: 5px;
    height: 180px;
    margin-right: 8px;

    background-size: cover;

} 
```

**来源**

[MDN - 背景尺寸 - CSS](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:04:54.670

使用`background-size:XXpx XXpx;`第一个值是取宽度，第二个值是取高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:11:09.037

```
-webkit-background-style: cover;
-moz-background-style: cover;
-o-background-size: cover;
background-style: cover; 
```

这将缩小背景，因此它只足以覆盖整个盒子。

# c# - 在 C# 中保存 XML 文档时出现 System.IO 异常

> ID：15831079
> 
> 赞同：-1
> 
> 时间：2013-04-05T10:01:37.810
> 
> 标签：c#, xml

在将大量 XML 文件导入应用程序后，我尝试使用 XML 文档类对其进行修改，为此我创建了一些方法来进行修改。

问题是它工作正常的启动方法，当涉及到第二个时，它显示 System.IO 异常，例如“文件已经在使用另一个进程”。

所以任何人都可以帮助我解决这个问题。

示例代码我在做什么：

```
Method1(fileList);
Method2(fileList);
Method3(fileList);

    private void Method1(IList<RenamedImportedFileInfo> fileList)
    {
           try
        {

            string isDefaultAttribute = Resource.Resources.ImportIsDefaultAttribute;
            string editorsPath = editorsFolderName + Path.DirectorySeparatorChar + meterType;
            string profilesPath = profileFolderName + Path.DirectorySeparatorChar + meterType;
            string strUriAttribute = Resource.Resources.ImportUriAttribute;

            foreach (RenamedImportedFileInfo renameInfo in fileList)
            {
                if (renameInfo.NewFilePath.ToString().Contains(editorsPath) && (renameInfo.IsProfileRenamed != true))
                {
                    var xmldoc = new XmlDocument();
                    xmldoc.Load(renameInfo.NewFilePath);

                    if (xmldoc.DocumentElement.HasAttribute(isDefaultAttribute))
                    {
                        xmldoc.DocumentElement.Attributes[isDefaultAttribute].Value = Resource.Resources.ImportFalse;
                    }

                    XmlNodeList profileNodes = xmldoc.DocumentElement.GetElementsByTagName(Resource.Resources.ImportMeasurementProfileElement);
                    if (profileNodes.Count == 0)
                    {
                        profileNodes = xmldoc.DocumentElement.GetElementsByTagName(Resource.Resources.ImportBsMeasurementProfileElement);
                    }
                    if (profileNodes.Count > 0)
                    {
                        foreach (RenamedImportedFileInfo profileName in oRenamedImportedFileList)
                        {
                            if (profileName.NewFilePath.ToString().Contains(profilesPath))
                            {
                                if (string.Compare(Path.GetFileName(profileName.OldFilePath), Convert.ToString(profileNodes[0].Attributes[strUriAttribute].Value, CultureInfo.InvariantCulture), StringComparison.OrdinalIgnoreCase) == 0)
                                {
                                    profileNodes[0].Attributes[strUriAttribute].Value = Path.GetFileName(profileName.NewFilePath);
                                    renameInfo.IsProfileRenamed = true;
                                    break;
                                }
                            }
                        }
                    }

                    xmldoc.Save(renameInfo.NewFilePath);
                    xmldoc = null;
                    profileNodes = null;
                }
            }
            oRenamedImportedFileList = null;
        }
        catch (NullReferenceException nullException) { LastErrorMessage = nullException.Message; }
    } 
```

谢谢，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:03:38.447

您可能在应用程序中打开同一个文件两次。在您可以再次打开它之前，您必须先将其关闭（或者让它保持打开状态并在不再次打开的情况下处理同一个文档）。

如需有关如何实现此功能的帮助，请向我们展示更多代码，以便我们为您提供建议。

# android - 使用带有图层列表的可绘制对象，就好像它是普通图像一样

> ID：15831086
> 
> 赞同：0
> 
> 时间：2013-04-05T10:01:58.270
> 
> 标签：android

我正在使用 Intent 来共享图像，就像在 stackoverflow 上解释的其他地方一样。这是我从该站点窃取的代码（谢谢）:)

```
private void share(String nameApp, String imagePath) {
    List<Intent> targetedShareIntents = new ArrayList<Intent>();
    Intent share = new Intent(android.content.Intent.ACTION_SEND);
    share.setType("image/jpeg");
    List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
    if (!resInfo.isEmpty()){
        for (ResolveInfo info : resInfo) {
            Intent targetedShare = new Intent(android.content.Intent.ACTION_SEND);
            targetedShare.setType("image/jpeg"); // put here your mime type

            if (info.activityInfo.packageName.toLowerCase().contains(nameApp) || 
                    info.activityInfo.name.toLowerCase().contains(nameApp)) {
                targetedShare.putExtra(Intent.EXTRA_TEXT,     "My body of post/email");
                targetedShare.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)) );
                targetedShare.setPackage(info.activityInfo.packageName);
                targetedShareIntents.add(targetedShare);
            }
        }

        Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), getResources().getString(R.string.share_select));
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
        startActivity(chooserIntent);
    }
} 
```

我的问题是我没有任何 jpg 文件要分享，但我创建了图像，带有这样的可绘制对象和图层列表：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/background01" />
    <item android:drawable="@drawable/img02" />
    <item android:drawable="@drawable/img07" />
</layer-list> 
```

我不明白是否以及如何使用这些可绘制对象，因为它们是完整的图像，并在 share() 函数中使用它们。有人可以解释一下吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:11:43.810

这就是你如何通过两个重叠的位图图像获得位图：

```
 private Bitmap overlay(Bitmap bmp1, Bitmap bmp2) {
    Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp1, new Matrix(), null);
    canvas.drawBitmap(bmp2, new Matrix(), null);
    return bmOverlay;
} 
```

获得位图后，您可以将其保存在任何地方并通过您的方法共享。

# objective-c - NSMenuItem 切换粗体字体样式

> ID：15831088
> 
> 赞同：0
> 
> 时间：2013-04-05T10:02:10.327
> 
> 标签：objective-c, cocoa, osx-lion, nsmenuitem

我必须以这样一种方式实现 NSMenuItem 选择 NSMenuItem 应该有 Bold Text ，这就是我所做的，

```
@implementation NSMenuItem (Font)

-(void)setBoldStyle:(bool)bBold{
    NSString* title = [self title] ;

    NSFont *pFont = (bold)?[NSFont boldSystemFontOfSize:14]:[NSFont menuFontOfSize:12];

    NSDictionary* fontAttribute = [NSDictionary dictionaryWithObjectsAndKeys:
                                   pFont, NSFontAttributeName,
                                   nil] ;

    NSMutableAttributedString* newTitle = [[NSMutableAttributedString alloc] initWithString:title
                                                                                 attributes:fontAttribute] ;

    [self setAttributedTitle:newTitle] ;
    [newTitle release] ;

}

@end 
```

使用上面的代码，我可以在选择特定的 NSMenuItem 时设置粗体文本，但是如果需要切换它（意味着如果一个项目之前是粗体，现在应该是正常的），那么它不会发生，

这就是我所说的方式，

```
 // have we selected any menuitem yet
    if ( prevStatusIndex >0){
        // then deselect it
        pTempMenuItem = [pMenu itemAtIndex:prevStatusIndex];
        [pTempMenuItem setBoldStyle:NO];
    }

    prevStatusIndex = clientStatus+1;
    pTempMenuItem = [pMenu itemAtIndex:prevStatusIndex]; // 1 because a separator added
    [pTempMenuItem setBoldStyle:YES]; 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:36:01.510

我们只能猜测，因为您的问题中缺少很多信息 - `prevStatusIndex`、`pMenuItem`、`pMenu`和`clientStatus`声明和给定的值在哪里？的有效范围是`clientStatus`多少？等等。

在您所说的评论中，您已经使用了调试器和断点，但没有说明您看到了什么值。

您确实需要提供更多详细信息，以便人们可以帮助您。

*如果*所选索引从不为 0（即`prevStatusIndex`不是 0 或`clientStatus`不是 -1）并且`pMenu`指向正确的菜单，那么您的代码就可以工作。如果选定的索引可以为零，那么您需要将去粗体测试更改为`prevStatusIndex >= 0`否则菜单中的第一个条目可以加粗但不能取消加粗。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:15:53.830

您需要使用类似于此：

```
if ([pTempMenuItem boldStyle]) {
    NSLog(@"currently bold. change it");
    [pTempMenuItem setBoldStyle:NO]);
}
else{
    [pTempMenuItem setBoldStyle:YES]);
    NSLog(@"currenlty normal. change it");
} 
```

# java - 在 Java 中创建 JTable

> ID：15831090
> 
> 赞同：0
> 
> 时间：2013-04-05T10:02:26.513
> 
> 标签：java, swing, multidimensional-array, arraylist, jtable

我将用于 JTable 的数据是对象数据（例如 Person）的 ArrayList，它将使用方法返回。因为JTable的构造函数需要你传入一个Object类型的多维数组，我需要把这个ArrayList转成多维数组吗？无论哪种情况，如何从对象数据的 ArrayList 创建 JTable？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:14:23.310

可以使用`DefaultTableModel`（不需要多维数组）来完成

```
String columns = new String[] {"Name", "Age"};
ArrayList<Person> data = getYourData();

DefaultTableModel dm = new DefaultTableModel(data.size(), columns.length);
JTable table = new JTable(dm);

for(Person p : data) {
   table.addRow(new String[]{p.name, p.age});
} 
```

有关其他信息，请参阅[此问题](https://stackoverflow.com/questions/295649/adding-rows-to-a-jtable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:18:25.030

```
you can try this code. And set your JTables model from this method.

public TableModel toTableModel() {
    Object[] headerNames = new Object[] { "a", "b" };
    DefaultTableModel model = new DefaultTableModel(headerNames, 0);
    List<String> valueList = new ArrayList<String>();
    valueList.add("a");
    valueList.add("b");
    model.addRow(valueList.toArray());
    return model;
} 
```

# google-chrome-extension - 如何在桌面通知窗口中创建下载链接？

> ID：15831102
> 
> 赞同：0
> 
> 时间：2013-04-05T10:03:29.663
> 
> 标签：google-chrome-extension

我有一个`contextMenu`向我网站上的 PHP 脚本发送 Ajax 请求的项目。

PHP 脚本创建一个`.txt`文件并再次将下载 URL 返回到扩展程序。

下一步`Desktop Notification`会显示 a，我想在此处放置下载链接，以便用户可以下载创建的文件。

问题是我不能在那里使用 HTML。我不想使用`createHTMLNotification`已弃用的，所以我的代码是：

```
var url = 'http://mydomain.com/somefile.txt';

var notification = window.webkitNotifications.createNotification(
    '48.png', 'Click to download', 'Some description');

notification.addEventListener('click', function() { // can't create <a> tag, so I'm tring with a click event. 
    notification.cancel();
    window.open(url);
});

notification.show(); 
```

此 ( `window.open()`) 在新选项卡中打开文件。但我只想下载它，而不是在浏览器中打开。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:58:48.773

我找到了一个解决方案，由于没有任何答案，我会写下来。

要从给定的 URL 下载文件，您可以使用[`downloads API's download method`](http://developer.chrome.com/extensions/downloads.html#method-download)：

```
function forceDownload(url) {
    var filename = url.replace(/^.*\/|\.[^.]*$/g, ''); // get basename

    chrome.downloads.download(
        {url: url, saveAs: true}, // options array
        function(id) {
            // callback function
        }
    );
}; 
```

在我的情况下`forceDownload()`，方法在方法中被调用`Ajax' done`：

```
function exportEntries(info, tab) { 
    var user = 'blah blah';

    $.ajax({
        url: 'http://domain.com/export.php',
        method: 'POST',
        data: { topic: tab.url, user: user }
    }).done(function ( url ) {
        forceDownload(url);
    });
} 
```

# c# - C# 动态和使用 IEnumerable 集合

> ID：15831113
> 
> 赞同：9
> 
> 时间：2013-04-05T10:03:41.947
> 
> 标签：c#, dynamic

今天在遇到[Massive](https://github.com/robconery/massive)的一些问题后，我决定创建一个简单的测试程序来说明问题。我想知道，我在这段代码中犯了什么错误：

```
var list = new List<string>
               {
                   "Hey"
               };

dynamic data = list.Select(x => x);

var count = data.Count(); 
```

最后一行抛出错误：**'object' does not contain a definition for 'Count'**

**为什么将“数据”视为对象？**是否因为我正在调用扩展方法而出现此问题？

以下代码有效：

```
var list = new List<string>
               {
                   "Hey"
               };

dynamic data = list.Select(x => x);

foreach (var s in data)
{
} 
```

**为什么在这种情况下“数据”被正确地视为 IEnumerable？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:11:16.950

是的，那是因为`Count()`它是一种扩展方法。

> 扩展方法不支持扩展方法形式的动态类型，即像实例方法一样调用。*（[来源](https://stackoverflow.com/questions/5311465/extension-method-and-dynamic-object-in-c-sharp)）*

`foreach (var s in data)`有效，因为`data` **必须**实现`IEnumerable`成为`foreach`源 - 在`(IEnumerable)data`执行期间执行转换。

您可以在尝试执行以下操作时看到该机制：

```
dynamic t = 1;

foreach (var i in t)
    Console.WriteLine(i.ToString()); 
```

运行时抛出异常：`Cannot implicitly convert type 'int' to 'System.Collections.IEnumerable'`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T10:10:55.213

似乎扩展方法不适用于动态对象（请参阅[Jon' answer](https://stackoverflow.com/a/5311527/804545)）。但是，您可以将它们直接称为静态方法：

```
var count = Enumerable.Count(data); // works 
```

# html - 使用 HTML::HTMLDoc 将 HTML 转换为 PDF

> ID：15831116
> 
> 赞同：0
> 
> 时间：2013-04-05T10:03:46.240
> 
> 标签：html, pdf

我已经使用 HTML 生成了 PDF 文件，`HTML::HTML Doc`但是在打开文件时，它显示以下错误我该怎么办，请帮助我...

**错误**：

> 无法打开 foo.pdf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:24:31.780

我不知道您可能使用的是什么工具，但您可以尝试使用 DOMPDF [https://code.google.com/p/dompdf/](https://code.google.com/p/dompdf/)

不过我觉得这个有点老了，最近没用过，觉得可能是php驱动的。

编辑：它的 PHP 由我阅读的内容驱动，但符合从 CSS2.1 到 CSS3 :)

# sql - 需要枢轴协助

> ID：15831119
> 
> 赞同：0
> 
> 时间：2013-04-05T10:03:58.500
> 
> 标签：sql, sql-server, pivot

我有一张这样的桌子。表格1。

```
Customer    Product     Value   Quantity    Order Number

Dave    Product 1   15  1   154
Dave    Product 2   25  5   154
Dave    Product 3   45  4   15
Rob     Product 2   222 33  233 
```

现在我想要这个，表 2。

```
Customer    Product 1 Quantity  Product 1 Value     Price per item ( Value /Quantity) for Product 1     Product 2 Quantity  Product 2 Value     Price per item ( Value /Quantity) for Product 2     Product 3 Quantity  Product 3 Value     Price per item ( Value /Quantity) for Product 3 Order Number 

Dave    1   15  15  5   25  5   null    null    null    154

Dave    null    null    null    null    null    Null    4   45  11.25   15

Rob     null    null    null    33  222 6.727272727 null    null    null    233 
```

我正在考虑一些支点，但不确定如何构建它。产品数量也不是固定的，在表 1 中有所变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:33:35.417

为了得到结果，我建议对数据应用*unpivot*和*pivot*。

UNPIVOT 会将表中的列数据转换为行。取消数据透视后，您可以应用数据透视。

由于您使用的是 SQL Server 2008+，因此您可以将 CROSS APPLY 与 VALUES 子句一起使用来取消透视。在 2008 年之前，您可以使用 UNPIVOT 功能。取消透视数据的代码是：

```
select t.customer,
  replace(t.product, ' ', '')+'_'+c.col piv_col, 
  c.val,
  t.ordernumber
from table1 t
cross apply
(
  values
    ('value', cast(value as varchar(10))),
    ('quantity', cast(quantity as varchar(10))),
    ('PricePerUnit', cast((value/quantity) *1.0 as varchar(10)))
) c (col, val); 
```

请参阅[演示](http://www.sqlfiddle.com/#!3/94e30/15)。这会将数据转换为以下格式：

```
| CUSTOMER |               PIV_COL |  VAL | ORDERNUMBER |
---------------------------------------------------------
|     Dave |        Product1_value |   15 |         154 |
|     Dave |     Product1_quantity |    1 |         154 |
|     Dave | Product1_PricePerUnit | 15.0 |         154 |
|     Dave |        Product2_value |   25 |         154 | 
```

您可以看到`Dave`订单 154 的行已转换为行，并且我创建了将用于枢轴 ( `piv_col`) 的新列名。此列已将产品名称连接到前一列标题（值、数量）的来源。

由于数据在单行中，您可以轻松地将数据透视函数应用于数据。最终代码将是：

```
select customer,
  Product1_quantity, Product1_value, Product1_PricePerUnit,
  Product2_quantity, Product2_value, Product2_PricePerUnit,
  Product3_quantity, Product3_value, Product3_PricePerUnit,
  orderNumber
from
(
  select t.customer,
    replace(t.product, ' ', '')+'_'+c.col piv_col, 
    c.val,
    t.ordernumber
  from table1 t
  cross apply
  (
    values
      ('value', cast(value as varchar(10))),
      ('quantity', cast(quantity as varchar(10))),
      ('PricePerUnit', cast((value/quantity) *1.0 as varchar(10)))
  ) c (col, val)
) d
pivot
(
  max(val)
  for piv_col in(Product1_quantity, Product1_value, Product1_PricePerUnit,
                 Product2_quantity, Product2_value, Product2_PricePerUnit,
                 Product3_quantity, Product3_value, Product3_PricePerUnit)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/94e30/16)。

如果您有已知数量的产品，上述方法非常有用，但如果没有，那么您将需要使用动态 SQL。

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT  ',' + QUOTENAME(replace(t.product, ' ', '')+'_'+c.col) 
                    from Table1 t
                    cross apply
                    (
                      values ('value', 1), ('quantity', 0),('PricePerUnit', 3)
                    ) c (col, so)    
                    group by product, col, so
                    order by product, so
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT customer, ' + @cols + ', ordernumber
              from
              (
                select t.customer,
                  replace(t.product, '' '', '''')+''_''+c.col piv_col, 
                  c.val,
                  t.ordernumber
                from table1 t
                cross apply
                (
                  values
                    (''value'', cast(value as varchar(10))),
                    (''quantity'', cast(quantity as varchar(10))),
                    (''PricePerUnit'', cast((value/quantity) *1.0 as varchar(10)))
                ) c (col, val)
              ) d
              pivot
              (
                max(val)
                for piv_col in (' + @cols + ')
              ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/c36b5/8)。这些查询给出了结果：

```
| CUSTOMER | PRODUCT1_QUANTITY | PRODUCT1_VALUE | PRODUCT1_PRICEPERUNIT | PRODUCT2_QUANTITY | PRODUCT2_VALUE | PRODUCT2_PRICEPERUNIT | PRODUCT3_QUANTITY | PRODUCT3_VALUE | PRODUCT3_PRICEPERUNIT | ORDERNUMBER |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     Dave |            (null) |         (null) |                (null) |            (null) |         (null) |                (null) |                 4 |             45 |                  11.0 |          15 |
|     Dave |                 1 |             15 |                  15.0 |                 5 |             25 |                   5.0 |            (null) |         (null) |                (null) |         154 |
|      Rob |            (null) |         (null) |                (null) |                33 |            222 |                   6.0 |            (null) |         (null) |                (null) |         233 | 
```

# php - 使用不同的文件名将文件添加到 PHP 中的 Tar 存档

> ID：15831121
> 
> 赞同：1
> 
> 时间：2013-04-05T10:04:04.167
> 
> 标签：php, pear, tar

我目前正在使用[`Archive-Tar Pear extension`](http://pear.php.net/package/Archive_Tar)for PHP 将文件集合添加到 Tar 存档中。

这些文件存储在具有额外扩展名的文件管理器上，例如

```
 filename.tgz.104850209.t or filename2.doc.2154395.t 
```

我想在添加文件时删除这个额外的扩展名，这样我的 Tar Archive 就会有文件：filename.tgz 和 filename2.doc

有没有办法在添加到存档之前不必先**复制/重命名源文件？**

谢谢，马克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:30:29.087

`Archive_Tar`在其最新版本中尚不支持开箱即用的此类功能。部分功能在`_addFile()`，另一部分在`_addString()`.

最简单的可能是扩展`Archive_Tar`和代理所有公共调用[`_writeHeaderBlock()`](http://pear.php.net/package/Archive_Tar/docs/latest/__filesource/fsource_Archive_Tar__Archive_Tar-1.3.11ArchiveTar.php.html#a1182)，在文件名参数上应用映射，以便在写入标题时重命名。

```
class Patched_Archive_Tar extends Archive_Tar
{
    var $renameMap = array();

    function _writeHeaderBlock($p_filename, $p_size, $p_mtime=0, $p_perms=0,
                               $p_type='', $p_uid=0, $p_gid=0)
    {
        return parent::_writeHeaderBlock($this->_translateFilename($p_filename), 
                                  $p_size, $p_mtime=0, $p_perms=0,
                                  $p_type='', $p_uid=0, $p_gid=0);
    }

    function _translateFilename($orignal)
    {
        $map = $this->renameMap;
        if (isset($map[$orignal])) {
            return $map[$orignal];
        }

        return $original;
    }
} 
```

用法：

```
$obj = new Patched_Archive_Tar('dummy.tar'); // name of archive

$files = array('mystuff/ad.gif', 
               'mystuff/alcon.doc.t', 
               'mystuff/alcon.xls.t');   // files to store in archive

$obj->renameMap = array(
    'mystuff/alcon.doc.t' => 'mystuff/alcon.doc',
    'mystuff/alcon.xls.t' => 'mystuff/alcon.xls',
)  // files to rename

if ($obj->create($files)) {
    echo 'Created successfully!';
} else {
    echo 'Error in file creation';
} 
```

这是快速而肮脏的，但希望有效。为了更好地查看我在开始时注意到的功能`_addFile()`，`_addString()`您基本上想要另一个能够通过指定文件名（如 ）添加文件（如`_addFile()`）的功能`_addString()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T01:48:33.737

试图编辑@hakre 的答案，但同行评审员没有。

为了回答@user2248522 的评论，我重写了该类以使用_writeHeader。此外，我为任何 Windows 用户添加了一个块，并修复了几个拼写错误。

```
class Patched_Archive_Tar extends Archive_Tar
{
    var $renameMap = array();

    function _writeHeader($p_filename, $p_stored_filename)
    {
        return parent::_writeHeader($p_filename, 
            $this->_translateFilename($p_stored_filename));
    }

    function _translateFilename($orignal)
    {
        $map = $this->renameMap;

        if (isset($map[$original])) {
            return $map[$original];
        }

        //Need alter our map array to match the altered original on WIN systems
        if (defined('OS_WINDOWS') && OS_WINDOWS) {

            //Check for a proper array
            if (!is_array($map)) return $original;

            //Check each replacement rule
            foreach($map as $needle => $replacement) {

                if ($this->_translateWinPath($needle, true) == $original) {

                    return $replacement;

                } //if()

            } //foreach()

        } //if()

        return $original;

    }
} 
```

用法：

```
$obj = new Patched_Archive_Tar('dummy.tar'); // name of archive

$files = array('mystuff/ad.gif', 
               'mystuff/alcon.doc.t', 
               'mystuff/alcon.xls.t');   // files to store in archive

$obj->renameMap = array(
    'mystuff/alcon.doc.t' => 'mystuff/alcon.doc',
    'mystuff/alcon.xls.t' => 'mystuff/alcon.xls',
)  // files to rename

if ($obj->create($files)) {
    echo 'Created successfully!';
} else {
    echo 'Error in file creation';
} 
```

# forms - 更改表单中的名称和 ID

> ID：15831123
> 
> 赞同：0
> 
> 时间：2013-04-05T10:04:11.157
> 
> 标签：forms, symfony

我会更改我的退货表格

我在树枝内创建带有循环的表单，我想更改名称和 ID 字段

例如

```
<input type="text" id="foo_1" name="foo_1[title]" maxlength="255"> 
```

我想像为 {{loop.index}} 形式的 id 添加一个索引

我可能需要向表单的构造函数传递一些东西，但我没有找到任何对我有帮助的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:34:03.953

现在我这样做：

我的控制器

```
foreach($fotos as $key => $foto){

            $array_fotos[] = array(
                "form" => $this->createForm(new \My\FotoBundle\Form\FotoType($key), $fotos[$key])->createView(),

            );
        } 
```

在我的 FormType 我这样做

```
class FotoType extends AbstractType
{

    protected $key;

    public function __construct($chiave) {
        $this->key = $chiave;
    }

    .....

    public function getName()
    {
        return 'form_gestione_foto_'.$this->key;
    }
} 
```

# php - 在 PHP 中包含 DIV 的 CSS

> ID：15831130
> 
> 赞同：0
> 
> 时间：2013-04-05T10:04:28.823
> 
> 标签：php, css, html

```
if(boothsizerGlobal ==  3){
    var cellWidth = 112;
    var cellHeight = 52;
    var innerDivElectricTop = 41; 
    var innerDivElectricLeft =  110;    
    $('.imgBox').css("background-image", "url(booth_top_images/5X20TOP.jpg)");
    $('.imgBox').css("width", "900px");
    $('.imgBox').css("height", "225px");
    sidewalls = 2;
    backwalls = 6;  

} 
```

任何人都可以帮助我将上述代码转换为 PHP 吗？我的意思是如果我有条件，如何为 40 多个 DIV 设置 CSS？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:10:34.777

```
.imgBox
{
background:url(booth_top_images/5X20TOP.jpg) no-repeat; 
width:900px;
height:225px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:11:07.450

好吧，您的原始代码从一开始就没有任何意义，因为一半的声明变量甚至没有被使用。此外，你为什么要像这样将前端代码转换为服务器端代码，这***不是***`php`正确的方法！

 *```
if(boothsizerGlobal ==  3){
    $cellWidth = '112px';
    $cellHeight = '52px';
    $innerDivElectricTop = '41px'; 
    $innerDivElectricLeft =  '110px';    
    $backgroundImage = 'url(booth_top_images/5X20TOP.jpg)';

    $divCode = '<div style="width: ' . $cellWidth . '; height: ' . $cellHeight . '; "';
    return $divCode

} 
```*

# grails - grails 可搜索 grails 2.1.0？

> ID：15831132
> 
> 赞同：0
> 
> 时间：2013-04-05T10:04:36.570
> 
> 标签：grails, version, grails-searchable

谁能告诉我 grails-2.1.0 的可搜索插件版本是什么？当我添加版本为 0.6.4 的可搜索插件（通过 maven 依赖项）时，我在构建项目时收到此错误

插件：可搜索 - 依赖项： - dataSource（必需：1.0 > *，找到：2.1.0） - domainClass（必需：1.0 > *，找到：2.1.0） - i18n（必需：1.0 > *，找到：2.1.0 ) - 核心（必需：1.0 > *，找到：2.1.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:05:44.627

您是否使用 Grails 2.2+ 尝试过。
在插件站点上，根据描述，他们提到***“只有版本 0.6.4+ 可与 Grails 2.2+ 一起使用”***
所以可能 Searchable-0.6.4 与旧版本存在一些兼容性问题Grails 版本

# ipad - 绘图，交点清除

> ID：15831133
> 
> 赞同：-1
> 
> 时间：2013-04-05T10:04:40.753
> 
> 标签：ipad, drawing

我们正在开发一个绘图应用程序。在我们绘制交叉线时，交叉点会清除之前绘制的两条线相交的像素。我们正在使用 setneedsdisplayinrect 来刷新绘图数据。

如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:21:40.803

**tl; dr：**您需要存储先前的线段并在再次在同一个矩形中绘制时重新绘制它们。

* * *

> 我们正在使用 setneedsdisplayinrect 来刷新绘图数据

这是一件好事。你能看到这样做的任何副作用吗？如果没有，请尝试传递整个矩形，看看会发生什么。您将看到只绘制了最后一段。

现在您知道您需要存储并可能重绘以前的线段（或只是它们的图像）。

# 天真的方法

第一个也是最简单的解决方案是将所有行存储在一个数组中并重新绘制它们。您会注意到这会大大降低您的应用程序*的*速度，尤其是在绘制了一段时间之后。此外，仅绘制您需要的东西并不顺利

# 仅在刷新的矩形内绘制线条

您可以通过过滤数组中的所有行以仅重绘与刷新的矩形相交的行来加速上述实现。例如，这可以通过获取线段的边界框（使用`CGPathGetBoundingBox(path)`）并检查它是否与刷新的矩形相交（使用`CGRectIntersectsRect(refreshRect, boundingBox)`）来完成。

这会减少一些绘图，但你仍然会得到很长的线阵列，并在一段时间后看到性能问题。

# 栅格化旧线段

不必存储所有先前行的一种好方法是将它们绘制到位图中（一个单独的图像上下文（请参阅 参考资料`UIGraphicsBeginImageContextWithOptions(...)`）），然后再绘制新的线段。但是，这几乎会使您必须这样做的绘图增加一倍，因此不应该对每一帧都进行。

您可以做的一件事是存储最后 100 个线段（或者可能是最后 1000 个或任何您自己的性能调查显示的内容，*您应该自己调查这些内容*）并将其余部分绘制成图像。每次有 100 条新线时，您都将它们添加到图像上下文中——首先绘制图像，然后绘制新的 100 条线——并将其保存为新图像。

您可以做的另一件事是在用户每次抬起手指时将所有新线条绘制到图像上。结合上述建议，这可以很好地工作。

* * *

根据您的应用程序的复杂性，您可能需要这些建议中的一个或多个来保持您的应用程序响应（这对于绘图应用程序非常重要），但首先进行调查，如果您不需要，不要让您的解决方案过于复杂.

# php - 从 .htaccess 访问 MYSQL

> ID：15831135
> 
> 赞同：0
> 
> 时间：2013-04-05T10:04:50.343
> 
> 标签：php, mysql, .htaccess, ip, block

我试图阻止从 htaccess 级别访问我的网站。我希望从 MySQL 表中读取错误的 IP，然后使用它来限制访问。

1.  这是一种安全的使用方法吗？

2.  如何从 htaceess 创建连接？

我已经检查了以前的类似问题，但没有实际的连接代码

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:12:46.990

您无法从 连接`.htaccess`。`.htaccess`是配置文件。它没有执行但已处理。您所能做的就是运行 cronjob以根据需要**创建** `.htaccess`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:10:22.220

我想，你可以试试这个。我从来没有尝试过自己虽然 [http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:12:56.227

无法`.htaccess`直接使用存储在 MySQL 表中的数据。但是，您可以使用`mod_ext_filter`（[http://httpd.apache.org/docs/2.2/mod/mod_ext_filter.html](http://httpd.apache.org/docs/2.2/mod/mod_ext_filter.html)），它允许您通过任意外部程序过滤请求（`mode`设置为）。`input`该程序可以连接到 MySQL 并验证 IP 是否存在于拒绝表中。

（为了性能考虑：

*   开发自定义 Apache 模块
*   在文本文件中缓存被拒绝 IP 的列表）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-05T10:15:23.113

> 这是一种安全的使用方法吗？

“安全”是指“安全”吗？如果是这样，那么不，它根本不安全，如果“安全”是指它会损害您的系统或以任何主要方式损坏它，那么“是的，它是安全的”

> 如何从 htaceess 创建连接？

它在您连接到服务器上的文件或文件夹时运行。

# operating-system - 如何在erlang中连续显示os命令输出？

> ID：15831137
> 
> 赞同：3
> 
> 时间：2013-04-05T10:04:52.807
> 
> 标签：operating-system, erlang

我需要从 erlang 中的 os 命令连续显示 stdout/stderr。在 ruby​​ 中，我可以使用以下代码实现它：

```
s1, s2 , s3, t = Open3.popen3('for %a in (1 2 3 4 5 6 7 8 9) do (echo message & sleep 2 ) 2>&1 ')

s2.each do |l|
    puts l
end 
```

它将“实时”显示“消息\n 消息\n” - 不等待进程结束。

我试过`os:cmd(..)` 了

```
1> P5 = erlang:open_port({spawn, "ruby rtest.rb"}, [stderr_to_stdout, in, exit_s
tatus, binary,stream, {line, 255}]).
#Port<0.505>
2> receive {P5, Data} -> io:format("Data ~p~n",[Data]) end.
Data {data,{eol,<<>>}}
ok 
```

但他们都等待过程结束。

在 Erlang 中连续读取标准输出是否可选？

**编辑：** 换句话说，我在 erlang 中寻找一个 popen (c/c++; proc_open(php) 等) 函数

**EDIT2** 代码，适用于 linux（在 centos6.2 上测试）。感谢`vinod`：

```
-module(test).
-export([run/0]).

run() ->  
    P5 = erlang:open_port({spawn, "sh test.sh"}, 
    [stderr_to_stdout, in, exit_status,stream, {line, 255}]), 
    loop(P5).

loop(P) ->
       receive{P, Data} -> 
           io:format("Data ~p~n",[Data]),
       loop(P)
       end. 
```

输出：

```
10> c(test).
{ok,test}
11> test:run().
Data {data,{eol,"1"}}
Data {data,{eol,"2"}}
Data {data,{eol,"3"}}
Data {data,{eol,"4"}}
Data {data,{eol,"5"}}
Data {data,{eol,"6"}}
Data {data,{eol,"7"}}
Data {data,{eol,"8"}}
Data {data,{eol,"9"}}
Data {data,{eol,"10"}}
Data {exit_status,0} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:00:39.463

如果我理解正确，您希望继续与 os 命令同时执行您的程序。在 Erlang 中，您可以生成一个执行此操作的进程，然后您可以继续。例如

```
1> spawn(fun() ->  
       P5 = erlang:open_port({spawn, "ruby rtest.rb"}, 
                             [stderr_to_stdout, in, exit_status, 
                              binary,stream, {line, 255}]), 
       receive {P5, Data} -> 
           io:format("Data ~p~n",[Data]) 
       end  
   end).
<0.32.0>
2> 5+5.
10
3> 
```

最好写在一个模块中，以便您更好地理解它。

# php - Foreach 为每个循环发送电子邮件

> ID：15831138
> 
> 赞同：2
> 
> 时间：2013-04-05T10:04:54.110
> 
> 标签：php, arrays, loops, foreach, phpmailer

我有一个 PHP foreach 循环，它通过电子邮件提示运行并发送电子邮件。我的问题是它会从提示中的每一行向提示中的每封邮件发送一封电子邮件，所以假设提示中有 50 封邮件，我将收到 50 封电子邮件。不酷

foreach 是这样的：

```
$cue = new NewsletterHandler;       
$cue->GetEmailCue($letter_id, $lhash);

require_once(INCLUDE_DIR."/class.phpmailer.php");
$mail = new PHPMailer();
$mail->From     = "tegl@xxxxxxx";
$mail->FromName = "Randers Tegl";
$mail->Host     = "smtp.xxxxx.dk";
$mail->Mailer   = "smtp";

foreach($cue->email_row as $key => $value) { 
   $mail->AddAddress($value);
   $mail->Subject = $subject ." - ". date("d-m-Y");
   $mail->Body    = $this->htmlTemplate;    

   if(!$mail->Send()) {
      echo "E-mailen er ikke sendt til ". $value;
      echo "Mailer Error: ". $mail->ErrorInfo;
      echo "<br />";
      mail("morten@domain.dk", "Error", "Letter not send. ". $mail->ErrorInfo ."");
   } else {
      $sql_update = "UPDATE newsletter_emailcue SET time_recieved = NOW() WHERE email = '". $value ."'";
      SQLHandling::SQLquery($sql_update);    
      echo "Newsletter send to ". $value ."<br />"; 
   }
} 
```

GetEmailCue 函数：

```
function GetEmailCue($letter_id, $lhash) {

       $sql = "SELECT * FROM newsletter_emailcue WHERE mail_to_recieve = '". $letter_id ."' AND time_recieved = '0000-00-00 00:00:00' LIMIT 50";
       $result = SQLHandling::SQLquery($sql);

       if(mysql_num_rows($result) < 1) {
            Main::txtOutput("Der er ikke nogle modtagere til nyhedsbrevet", "TXT_ERR");

           /*** If there aren't any emails in the cue table, but a pending letter was found
           * that letter will be updated with '2' in status, which is send completed.
           */
           $sql_update = "UPDATE newsletter_items SET status = 2 WHERE letter_id = '". $letter_id ."'";
          SQLHandling::SQLquery($sql_update);
       } else {              
           while($row = mysql_fetch_array($result)) {
               $this->email_row[] = $row["email"];
           }
      }

            return $this->email_row;
       } 
```

如果我`var_dump($cue->email_row) outside the foreach`得到`array(2) { [0]=> string(17) "morten@domain1.dk" [1]=> string(14) "morten@domain2.dk" }`但在里面我得到

```
array(2) { [0]=> string(17) "morten@adomain1.dk" [1]=> string(14) "morten@domain2.dk" } 
array(2) { [0]=> string(17) "morten@domain1.dk" [1]=> string(14) "morten@domain2.dk" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:34:10.397

我找到了！我忘了放

```
$mail->ClearAddresses();
$mail->ClearAttachments(); 
```

在脚本的末尾，因此它在运行时插入了每封邮件`$mail->AddAddress($value);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:29:35.613

一些事情 ：

*   您可能会以密件抄送模式（密件）发送一封邮件，因此没有一个收件人会收到所有其他邮件列表
*   您可以在循环之外操作 sql 更新（使用 , 分隔进行多次更新），构建一个大的 sql 查询字符串并在循环之后执行它，这样您就可以节省大量的 SQL 访问，（尝试 10000 次不同的更新或 10000 条记录一次)
*   你可能总是逃避 SQL 查询中使用的变量（即：$letter_id）来自范围之外（所以你永远不知道它是否安全），否则你将容易受到 sql 注入的攻击
*   然后关于你的 var_dump ：暂时看不到，代码中的 var_dump 放在哪里？

# coffeescript - Meteor >0.6.0 和 CoffeeScript 的全局类

> ID：15831144
> 
> 赞同：17
> 
> 时间：2013-04-05T10:05:02.873
> 
> 标签：coffeescript, meteor

由于 Meteor 0.6.0 的发布和[文件级 JavaScript 变量作用域](http://meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)的添加，我在使用 CoffeeScript 类时遇到了问题，每个类都在各自的文件中定义。

foo.coffee：

```
class Foo
  ... 
```

subfoo.coffee：

```
class Subfoo extends Foo
  ... 
```

正如预期的那样，由于 Meteor 0.6.0 中引入的更改，我收到以下错误：

> ReferenceError: Foo 未定义

这是我的问题：应该如何处理 CoffeeScript 和 Meteor >0.6.0 的文件中的类定义？理想情况下：是否有一种方便的方法可以*不过*多地修改类的定义方式，以确保这些定义（以及我的应用程序的核心部分）不依赖于 Meteor？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-05T11:35:27.753

[如文档](http://docs.meteor.com/#coffeescript)的 CoffeeScript 部分所述：

> 全局变量可以通过使用 this（或 CoffeeScript 的 @ 简写）在 CoffeeScript 中设置

事实证明，CoffeeScript 类可以定义为：

```
class @Foo 
```

编译为：

```
this.Foo = (function() {
  function Foo() {}
  return Foo;
})(); 
```

假设在您可以执行以下操作`foo.coffee`之前已加载：`subfoo.coffee`

```
class @Subfoo extends Foo 
```

当然，假设`Subfoo`需要将其分配给全局范围。还值得一提的是，您需要以类似的方式公开您的收藏。例如：

```
@Players = new Meteor.Collection 'players' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:51:38.063

另请注意，诸如“Foo”之类的类本身就是一个值，您可以将其分配给变量或自己放入名称空间中。

`class @Foo`当您想将该值直接放入全局命名空间时，使用是一个很好的捷径。

但是，如果您愿意，您也可以将变量保留在本地，然后自己将它们添加到全局命名空间中：

```
class Foo
  ...

Players = new Meteor.Collection 'players'

doThat = -> ...

_.extend(this, {Foo, Players, doThat}) 
```

或者，如果您愿意，您可以让您的“foo”模块只定义一个`foo`包含导出值的全局对象：

```
@foo = {Foo, Players, doThat} 
```

现在使用“foo”模块的模块可以通过全局变量引用这些值`foo`：

```
class Subfoo extends foo.Foo
  ... 
```

或者，如果您希望`Foo`即使在 export only 时也能输入`foo`，您可以`foo`在顶部展开：

```
{Foo, Players, doThat} = foo

class Subfoo extends Foo
  ... 
```

# scala - 无法将 play 2.1 scala 应用程序部署到 heroku

> ID：15831147
> 
> 赞同：2
> 
> 时间：2013-04-05T10:05:16.297
> 
> 标签：scala, heroku, playframework-2.1

当我尝试将我的 play scala 2.1 应用程序部署到 heroku 时，我收到以下错误：

> ```
>  [info] Wrote /tmp/build_36s2qu6pn5i6k/target/scala-2.10/get2play_2.10-1.0.pom
>   [info] Packaging /tmp/build_36s2qu6pn5i6k/target/scala-2.10/get2play_2.10-1.0-sources.jar ...
>   [info] Done packaging.
>   [info] Generating Scala API documentation for main sources to /tmp/build_36s2qu6pn5i6k/target/scala2.10/api...
>   /app/slug-compiler/lib/utils.rb:67:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/../../tmp/buildpacks/scala/bin/compile /tmp/build_36s2qu6pn5i6k /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=902.47056889534 (Utils::TimeoutError)
> 
>   from /app/slug-compiler/lib/utils.rb:53:in `loop'
>   from /app/slug-compiler/lib/utils.rb:53:in `block in spawn'
>   from /app/slug-compiler/lib/utils.rb:48:in `popen'
>   from /app/slug-compiler/lib/utils.rb:48:in `spawn'
>   from /app/slug-compiler/lib/buildpack.rb:37:in `block in compile'
>   from /app/slug-compiler/lib/buildpack.rb:35:in `fork'
>   from /app/slug-compiler/lib/buildpack.rb:35:in `compile'
>   from /app/slug-compiler/lib/slug.rb:526:in `block in run_buildpack'
>   from /app/slug-compiler/lib/utils.rb:122:in `log'
>   from /app/slug-compiler/lib/slug.rb:763:in `log'
>   from /app/slug-compiler/lib/slug.rb:525:in `run_buildpack'
>   from /app/slug-compiler/lib/slug.rb:132:in `block (2 levels) in compile'
>   from /app/slug-compiler/lib/utils.rb:103:in `block in timeout'
>   from /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
>   from /app/slug-compiler/lib/utils.rb:103:in `rescue in timeout'
>   from /app/slug-compiler/lib/utils.rb:98:in `timeout'
>   from /app/slug-compiler/lib/slug.rb:119:in `block in compile'
>   from /app/slug-compiler/lib/utils.rb:122:in `log'
>   from /app/slug-compiler/lib/slug.rb:763:in `log'
>   from /app/slug-compiler/lib/slug.rb:118:in `compile'
>   from /app/slug-compiler/bin/slugc:86:in `block in <main>'
>   from /app/slug-compiler/lib/slug.rb:534:in `block in lock'
>   from /app/slug-compiler/lib/repo_lock.rb:44:in `call'
>   from /app/slug-compiler/lib/repo_lock.rb:44:in `run'
>   from /app/slug-compiler/lib/slug.rb:534:in `lock'
>   from /app/slug-compiler/bin/slugc:67:in `<main>' 
> ```
> 
> ！Heroku推送被拒绝，无法编译Play 2.x - scala app

直到昨天一切正常。没有大的代码更改。

有谁知道问题是什么以及如何解决？

# ios - iPad 上的 iCarousel 性能问题

> ID：15831148
> 
> 赞同：2
> 
> 时间：2013-04-05T10:05:23.147
> 
> 标签：ios, objective-c, icarousel

我正在为 iPad 应用程序使用 Nick Lockwood 的[iCarousel 。](https://github.com/nicklockwood/iCarousel)现在它只是 15 个全屏图像的轮播。

我设置了一个单一的视图项目，在情节提要中添加 iCarousel 视图，将其视图控制器添加为数据源，并将此代码用于数据源方法：

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel {
    return 15;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view {
    UIImage* img = [UIImage imageNamed:[NSString stringWithFormat:@"image%d.jpg", index]];
    UIImageView* imgView = [[UIImageView alloc] initWithImage:img];

    return imgView;
} 
```

这可行，但是当我第一次滚动浏览所有项目时，您会注意到在将新项目添加到轮播时性能受到了一点影响。我第二次检查所有项目时不会发生这种情况。

您可以在此分析器屏幕截图中看到我的意思。前半部分的峰值是我第一次滚动浏览所有图像，然后我再次滚动，没有峰值，也没有性能受到影响。

我怎样才能解决这个问题？

![在此处输入图像描述](https://i.stack.imgur.com/fViNu.png)

**编辑**

我隔离了仪器上的一个峰，这是调用树

![在此处输入图像描述](https://i.stack.imgur.com/GOPRX.png)

**编辑**

带有 jcesar 建议的代码

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSMutableArray* urls_aux = [[NSMutableArray alloc] init];
    for (int i = 0; i<15; i++) {
        NSString *urlPath = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"captura%d", i] ofType:@"jpg"];
        NSURL *url = [NSURL fileURLWithPath:urlPath];

        [urls_aux addObject:url];
    }
    self.urls = urls_aux.copy;

    self.carousel.dataSource = self;
    self.carousel.type = iCarouselTypeLinear;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view {

    if (view == nil) {
        view = [[[AsyncImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)] autorelease];
        view.contentMode = UIViewContentModeScaleAspectFit;
    }

    [[AsyncImageLoader sharedLoader] cancelLoadingImagesForTarget:view];
    ((AsyncImageView *)view).imageURL = [self.urls objectAtIndex:index];

    return view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:22:50.693

我不认为这是一个非常正统的解决方案，但它确实有效。

我所做的是使用 iCarousel 的方法`insertItemAtIndex:animated:`在设置时一次添加一个图像。然后性能受到打击，但之后一切顺利。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.images = [[NSMutableArray alloc] init];
    self.carousel.dataSource = self;
    self.carousel.type = iCarouselTypeLinear;

    for (int i = 0; i<15; i++) {
        UIImage* img = [UIImage imageNamed:[NSString stringWithFormat:@"captura%d.jpg", i]];
        [self.images addObject:img];
        [self.carousel insertItemAtIndex:i animated:NO];
    }
}

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel {
    return self.images.count;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view {
    UIImage* img = [self.images objectAtIndex:index];
    UIImageView* imgView = [[UIImageView alloc] initWithImage:img];

    return imgView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:14:14.743

很难确定，但我猜第一次是从文件中加载图像；而第二次使用缓存的副本 - 这`+[UIImage imageNamed:]`是自动为您执行的操作；没有它，您每次都会看到性能受到影响。您可以在应用程序委托或控制器的初始化程序中更早地加载图像。

您可以做的另一件事是利用 iCarousel 的视图重用逻辑。我不认为它对你的问题负责，但你现在也可以这样做：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view {
    UIImage* img = [UIImage imageNamed:[NSString stringWithFormat:@"image%d.jpg", index]];

    UIImageView* imgView = nil;
    if ([view isKindOfClass:[UIImageView class]])
    {
        imgView = (UIImageView *)view;
        imgView.image = img;
        [imgView sizeToFit];
    }
    else
    {
        [[UIImageView alloc] initWithImage:img];
    }

    return imgView;
} 
```

更新：获得更多有关您的应用程序花费时间的信息会很棒。如果您使用[Instruments Time Profiler](http://developer.apple.com/library/mac/#documentation/AnalysisTools/Reference/Instruments_User_Reference/TimeProfilerInstrument/TimeProfilerInstrument.html)，您可以获得每种方法所花费时间百分比的细分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:36:37.187

看看他的例子：[动态下载](https://github.com/nicklockwood/iCarousel/tree/master/Examples/Dynamic%20Downloads)。他`AsyncImageView`改为使用`UIImageView`，以异步方式加载图像。所以它不会尝试同时加载所有 15 张图像，我认为它不应该有性能问题

# maven - Maven/Netbean 项目

> ID：15831151
> 
> 赞同：1
> 
> 时间：2013-04-05T10:05:35.500
> 
> 标签：maven, uml, netbeans-7

我试过 Maven 插件来生成类图。但是，此工具仅生成特定类的图表。我想知道是否有工具可以根据我拥有的源代码生成概述类图？

```
<plugin> 
            <artifactId>maven-javadoc-plugin</artifactId> 
            <version>2.9</version>
            <configuration> 
                <aggregate>true</aggregate> 
                <show>private</show> 
                <doclet>org.umlgraph.doclet.UmlGraphDoc</doclet> 
                <docletArtifact>                                                         
                    <groupId>org.umlgraph</groupId>                                      
                    <artifactId>umlgraph</artifactId>                                    
                    <version>5.6</version>                                               
                </docletArtifact>        
                <additionalparam> 
                    -views -all -inferrel -collpackages java.util.* -inferdep  -nodefontsize 9 
                </additionalparam>
                <useStandardDocletOptions>true</useStandardDocletOptions> 
            </configuration> 
        </plugin> 
```

# php - cakephp 知道控制器本身的所有设置变量

> ID：15831152
> 
> 赞同：8
> 
> 时间：2013-04-05T10:05:37.380
> 
> 标签：php, cakephp, methods

是否可以通过`$this->set('variable_name', 'some_value')` 控制器的方法本身跟踪所有设置的变量。实际上我有一个调用其他几个方法的方法，每个子方法都设置要查看的值。现在我无法跟踪是否在主方法中设置了两次相同的键。

例子

```
 function beforeFilter()
{
    $this->set('key1', 'viable value');
}

function reqMethod()
{
    $this->extendMethod1();
    $this->extendMethod2();
    $this->extendMethod3();
    $this->extendMethod4();
    $this->extendMethod5();
    $this->extendMethod6();
            // Want to track all set variable (key) here.
}

private function extendMethod1()
{
    $this->set('key1', 'unknow value');
} 
```

在这里，key1（错误地）可能被设置为另一种方法。任何帮助真的很感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:50:52.590

Controller::set() 只是将值添加到 'viewVars' 属性，所以要调试所有这些变量，你只需要这样做：

```
debug($this->viewVars); 
```

您可以通过查看源代码自己发现这一点吗？

[查看源代码](https://github.com/cakephp/cakephp/blob/2.3.1/lib/Cake/Controller/Controller.php#L834)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:00:40.437

一种可能的方法是将其写入会话。例如。在前置过滤器()

```
function beforeFilter()
{
    $this->set('key1', 'viable value');
    $this->Session->write ('key1', true);
}

private function extendMethod1()
{
    $this->set('key1', 'unknow value');
    if ($this->Session->check('key1')
     {
        // whatever needs to be done.
     }
} 
```

# c++ - shared_ptr 未报告引用的对象删除

> ID：15831153
> 
> 赞同：2
> 
> 时间：2013-04-05T10:05:39.097
> 
> 标签：c++, c++11, shared-ptr, smart-pointers

我在 MS Visual Studio 10 中运行此代码，

```
#include <iostream>
#include <memory>
using namespace std;

class A
{
    int i;
public:
    A(int j) : i(j) {}
    ~A() {}
    void fun()
    {
        cout << "A::i = " << i << endl;
    }
};
int _tmain(int argc, _TCHAR* argv[])
{
    A aObj(12);
    std::shared_ptr<A> const pObj (&aObj,
                [] (A* pA) {
                    cout << "lambda deleter" << endl;
                });
    aObj.~A();
    pObj->fun();
    return 0;
} 
```

这将打印/保存已删除的对象的数据成员，而不会报告任何类型的错误。

请写在：

1.  为什么`shared_ptr`pObj 不报告（在运行时）底层对象已被删除？
2.  由于我正在创建一个 const shared_ptr，意味着不能使用它来引用任何其他对象，为什么在对象删除时不调用 lambda。
3.  `weak_ptr`在类似情况下可能会有所帮助。`weak_ptr`与对对象的引用的生命周期超过它所引用的对象的语义一起使用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T10:08:44.983

> 为什么 shared_ptr pObj 不报告（在运行时）底层对象已被删除？

因为`shared_ptr`不是*魔法*¹。*只有在删除该对象*时，它才知道包含的对象何时被删除。当您使用 时`shared_ptr`，您已与 签订合同`shared_ptr`。该合同的租户之一（实际上，您使用任何类型的智能指针签订的*任何*合同）是*您*无法删除该指针。`shared_ptr`实例拥有指针，*它*会删除它，而不是你。

违反该合同会导致未定义的行为。

> 由于我正在创建一个 const shared_ptr，意味着不能使用它来引用任何其他对象，为什么在对象删除时不调用 lambda。

同样，只有在删除*它*`shared_ptr`时才能知道包含的对象被删除。如果您违反合同，它对对象的状态一无所知。

 *> 在类似情况下，weak_ptr 是否有帮助。weak_ptr 与对对象的引用的生命周期超过它所引用的对象的语义一起使用。

`weak_ptr`没有比 更神奇的天赋`shared_ptr`。`weak_ptr`只知道`shared_ptr`创建它的集合知道什么。如果`shared_ptr`不知道对象已被删除，则也不知道`weak_ptr`。

* * *

¹ “魔术”是指做一些在 C++ 中不可能的事情。如果您想知道一个函数是否被调用（而析构函数是一个函数调用），那么只有两种方法可以做到这一点。要么该函数告诉您它已被调用（通过设置您可以看到的一些值），要么您设置了一个系统，人们调用您的函数，然后调用另一个函数。

第一个系统需要一个明确编写的函数，让人们知道它已被调用。任何旧功能都无法做到这一点；它必须为此而设计。第二个系统要求每个人都使用您的新功能，而没有人使用旧功能。如果有人直接使用旧的，您的代码将不知道它。

第一种方法称为“侵入式”（因为它要求您以特殊方式编写对象），使用它的智能指针称为“侵入式智能指针”。第二种方法是非侵入式的（不需要对象的特殊代码）。`shared_ptr`，以及所有当前标准的智能指针，都是非侵入式的。这意味着您可以将它们与任何对象一起使用，但您只能在遵守合同的情况下使用它们。

C++ 不提供第三种方式。因此，一个可以以某种方式侵入析构函数调用的类，一个可以知道它已被调用而没有该析构函数明确*告诉*它已经被调用的类，是不可能的。因此会很神奇。*

# php - Magento：检测管理员是否登录到前端页面

> ID：15831156
> 
> 赞同：24
> 
> 时间：2013-04-05T10:05:47.910
> 
> 标签：php, magento, magento-1.7, administration

我创建了一个 magento 扩展。我想实现对扩展的访问。该扩展程序在前端创建一个页面，我只希望管理员访问该页面。所以基本上我需要一些可以检测到管理员是否登录到前端页面的东西。

我尝试了几种解决方案，但注意到似乎有效。

```
if(Mage::getSingleton('admin/session', array('name' => 'adminhtml'))->isLoggedIn()) echo 'logged in'; else echo 'not logged in'; 
```

[如果管理员已登录，请检查前端](https://stackoverflow.com/questions/8340953/check-on-frontend-if-admin-is-logged-in)

```
Mage::getSingleton('core/session', array('name'=>'adminhtml'));
$adminSession = Mage::getSingleton('admin/session');
$adminSession->start();
if ($adminSession->isLoggedIn()) {
   echo 'logged in';
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T10:39:42.130

上面的解决方法都不行！

这是一个可行的解决方案（它不是那么干净！但这将在您的应用程序中的 phtml 视图或模型或控制器或助手的任何地方工作！）

```
$sesId = isset($_COOKIE['adminhtml']) ? $_COOKIE['adminhtml'] : false ;
$session = false;
if($sesId){
    $session = Mage::getSingleton('core/resource_session')->read($sesId);
}
$loggedIn = false;
if($session)
{
    if(stristr($session,'Mage_Admin_Model_User'))
    {
        $loggedIn = true;
    }
}
var_dump($loggedIn);// this will be true if admin logged in and false if not 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-23T01:26:15.740

有一个新的 magento 模块，由 alan Storm 编写：[https ://github.com/astorm/Magento_CrossAreaSessions](https://github.com/astorm/Magento_CrossAreaSessions)

```
$adminhtml  = Mage::getModel('pulsestorm_crossareasession/manager')->getSessionData('adminhtml');

$adminUser = $dataAdminhtml['admin']['user'];
$loggedIn = $adminUser->getId() && $adminUser->getIsActive(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-02T14:13:24.303

Christoph Peters 发布了一个链接，解决了我的问题（检测管理员是否登录到前端页面）：

```
//check if adminhtml cookie is set
if(array_key_exists('adminhtml', $_COOKIE)){
   //get session path and add dir seperator and content field of cookie as data name with magento "sess_" prefix
   $sessionFilePath = Mage::getBaseDir('session').DS.'sess_'.$_COOKIE['adminhtml'];
   //write content of file in var
   $sessionFile = file_get_contents($sessionFilePath);

   //save old session
   $oldSession = $_SESSION;
   //decode adminhtml session
   session_decode($sessionFile);
   //save session data from $_SESSION
   $adminSessionData = $_SESSION;
   //set old session back to current session
   $_SESSION = $oldSession;

   if(array_key_exists('user', $adminSessionData['admin'])){
      //save Mage_Admin_Model_User object in var
      $adminUserObj = $adminSessionData['admin']['user'];
      echo 'ADMIN USER IS LOGGED IN';
   }
   else
   {
      echo 'ADMIN USER IS NOT LOGGED IN'
   }
} 
```

非常感谢克里斯托夫·彼得斯！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-14T13:37:13.180

如果你试图让它在模板/phtml 文件中工作，和/或在 Block 的类中工作，你将很难。主要是因为 magento（积极地）出于性能目的缓存您的 PHTML 块，从而撤消您拥有的任何程序流控制语句，特别是与 cookie 检查相关的内容。我没有直接/冗长/深入的解释为什么，但这就是我一遍又一遍地遇到它的方式。

但是，您的解决方案应该是正确的，但是您需要在控制器的 preDispatch 方法中进行检查，以避免上述激进的缓存，因为控制器永远不会被缓存。（显示在您链接的问题中[尼克的解决方案中。）：](https://stackoverflow.com/a/8944859/951773)

```
// Ensure we're in the admin session namespace for checking the admin user..
Mage::getSingleton('core/session', array('name' => 'adminhtml'))->start();

$admin_logged_in = Mage::getSingleton('admin/session', array('name' => 'adminhtml'))->isLoggedIn();

// ..get back to the original.
Mage::getSingleton('core/session', array('name' => $this->_sessionNamespace))->start(); 
```

如果您确实需要在 PHTML 文件或命名块中执行上述检查，请查看以下代码，了解如何关闭块级缓存并*使其*工作。我之前所做的是禁用页脚块的缓存（其中子块，而不是 phtml，包含检查
特定 cookie 的代码）

首先，块调用（在您的 local.xml 或模块布局更新 xml 中找到，或者您可以进行布局更新的任何地方，真的。我更喜欢将我的自定义分解为模块，所以绝对模块布局更新 xml 是要走的路） ：

```
<reference name="footer">      
   <action method="unsetData"><key>cache_lifetime</key></action>
   <action method="unsetData"><key>cache_tags</key></action>
   <block type="newsletterpopup/popup" name="newsletterpopup_footer" template="newsletterpopup/popup.phtml"/>
</reference> 
```

这是 newsletterpopup 的 block 类：

```
<?php
class Launchpad_Newsletterpopup_Block_Popup extends Mage_Core_Block_Template {
    public function canRender() {
         // Check if cookie exists here       
    }
    public function afterRender() { // if block has rendered, this is called.
        // Set cookie, if it doesn't exist here.
    }
} 
```

phtml 将类似于：

```
<?php if($this->canRender()): ?>
   // stuff
<?php endif; ?> 
```

祝你好运！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-30T19:21:36.363

这是一个适用于 Magento 1.7.0.2（已测试）的解决方案，并且在每个前端站点上，我在未从 Mage_Adminhtml_Controller_Action 扩展的控制器中使用它。

[https://peters-christoph.de/tutorials/magento-pruefe-admin-session-logi-im-frontend/](https://peters-christoph.de/tutorials/magento-pruefe-admin-session-logi-im-frontend/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T09:50:26.457

此代码将有效

```
//get the admin session
Mage::getSingleton('core/session', array('name'=>'adminhtml'));

//verify if the user is logged in to the backend
if(Mage::getSingleton('admin/session')->isLoggedIn()) {
  //do stuff
}
else
{
  echo "404 page not found";
} 
```

**或者**

```
$adminsession = Mage::getSingleton('admin/session', array('name'=>'adminhtml'));

if($adminsession->isLoggedIn()) {
    //do stuff
} else {
    echo "404 page not found";
} 
```

您是否尝试转储`$_SESSION`变量？也许它会帮助你走上正轨。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-03T11:45:41.097

这很简单，但不是推荐的解决方案。我自己花了几个小时来做​​这件事。对于基于 Windows 的服务器，请尝试以下解决方案：

```
$sessionFilePath = Mage::getBaseDir('session').DS.'sess_'.$_COOKIE['adminhtml'];
$sessionFile     = file_get_contents($sessionFilePath); 
$exp_cookie   = explode(';',$sessionFile);
if(count($exp_cookie)   >   100)
{
  return "login";
}
return "expire"; 
```

对于基于 Linux 的服务器，请尝试以下解决方案：

```
$sessionFilePath = Mage::getBaseDir('session').DS.'sess_'.$_COOKIE['adminhtml'];
$sessionFile     = file_get_contents($sessionFilePath); 
$exp_cookie   = explode('--',$sessionFile)
if(count($exp_cookie)   >   10)
{
  return "login";
}
return "expire"; 
```

谢谢， 卡希夫

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-18T14:06:16.473

除了尝试从 adminhtml cookie 中提取会话 id 之外，这可能会或可能不会起作用恕我直言，最好只是“皮肤”页面，您需要在前端显示它看起来像它并使用管理控制器，以便它将在管理会话下运行。

另一种解决方案是将客户从管理员“复制”到前端并在点击您的页面之前将其登录，然后只需检查登录的客户是否是某个组的成员。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-03T21:29:33.220

```
require_once $dir.'app/Mage.php';
umask(0);

$apps = Mage::app('default');
Mage ::getSingleton('core/session', array('name'=>'adminhtml'));
$adminSession = Mage::getSingleton('admin/session');
$adminSession->start();
if ($adminSession->isLoggedIn()) {
   //echo "logged in";
} 
 else { 
      //echo "Not logged in";
      exit();
 }?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-14T17:28:27.820

能够使用的关键：

```
// Ensure we're in the admin session namespace for checking the admin user..
Mage::getSingleton('core/session', array('name' => 'adminhtml'))->start();

$admin_logged_in = Mage::getSingleton('admin/session', array('name' => 'adminhtml'))->isLoggedIn();

// ..get back to the original.
Mage::getSingleton('core/session', array('name' => $this->_sessionNamespace))->start(); 
```

那是`controller`必须的吗`extends Mage_Adminhtml_Controller_Action`

`preDispatch`比您可以在函数中使用此代码。

并`routers`在. `admin`_`config.xml`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-05T10:16:58.557

检查[这个博客](http://ka.lpe.sh/2011/06/19/magento-checking-customer-admin-is-logged-in-or-not/)，我认为你不需要`start()`在检查之前检查`isLoggedIn()`。

```
Mage::getSingleton('core/session', array('name'=>'adminhtml')); // get sessions

$check = Mage::getSingleton('admin/session', array('name'=>'adminhtml')); //get admin sessions

    if($check->isLoggedIn()) { //check is admin logged in
        echo "Admin is logged in";
    } else {
        echo "Admin is offline";
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-02-05T14:45:30.650

如果您使用 cm redis session 试试这个：（为我工作）

```
$sesId = isset($_COOKIE['adminhtml']) ? $_COOKIE['adminhtml'] : false ;
if($sesId){
    $session = Mage::getSingleton('core_mysql4/session')->read($sesId);
}
$loggedIn = false;
if($session)
{
    if(stristr($session,'Mage_Admin_Model_User'))
    {
        $loggedIn = true;
    }
}

var_dump($loggedIn); 
```

因为如果您使用 cm redis，它会使用自己的模型重写 db session 模块。

# ios - 发布数据并获得成功响应

> ID：15831159
> 
> 赞同：0
> 
> 时间：2013-04-05T10:05:53.163
> 
> 标签：ios, objective-c, http-post, nsurlconnection

嗨，我是 iphone 开发的新手，有人可以解释一下如何将数据发布到 URL 并获得成功的响应，下面是示例代码...

```
-(IBAction)clicked:(id)sender{
    NSString *CIDString = cID.text;

    NSURL *url = [NSURL URLWithString:@"http://localhost:8080/test/?"];
    NSString *postData = [NSString stringWithFormat:@"companyID=%@",CIDString];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[url standardizedURL]
                                                           cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:[postData dataUsingEncoding:NSUTF8StringEncoding]];

    [self startConnection:(NSMutableURLRequest *)request];
     if([self.result isEqualToString:@"New Alert"])
    {
        cID.text = @"Scuess";
    }

} 
```

和 startConnection 如下

```
- (void)startConnection:(NSMutableURLRequest *)request {

    [self.connection cancel];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData = data;
    self.result = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    NSLog(@"receivedData: %@", [[NSString alloc] initWithData:receivedData encoding:NSASCIIStringEncoding]);

    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (self.networkErrorAlert) {
        NSLog(@"connection fail");

    }

    [self.connection start];
} 
```

有人可以帮帮我吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:45:50.220

-（无效）发送请求{

```
NSString *tempusername = txtusername.text;
NSString *tmppassword = txtpassword.text;
NSString *tempurllogin = [staticstrings URLLink];
NSString *tmpURL = [NSString stringWithFormat:@"http://example.com/ValidateService?", tempurllogin];
NSString *connect;
connect = [NSString stringWithFormat:@"%@emailAddress=%@&password=%@", tmpURL,tempusername,tmppassword];

responseData = [[NSMutableData data] retain];
NSURL *url = [[NSURL alloc] initWithString:connect];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self];

[url release];
[request release]; 
```

}

# php - php arrayObj 对未定义的索引不敏感

> ID：15831160
> 
> 赞同：0
> 
> 时间：2013-04-05T10:05:55.910
> 
> 标签：php

如何对`ArrayObj`未定义的索引不敏感，我有时需要在日志中使用未定义的索引示例

```
$this->log['some']['other']['info']++ 
```

这是我的尝试：

```
class arrayInSensitive extends \arrayObject{

    var $data = array();

    public function offsetGet($name) {
        if(!array_key_exists($name,$this->data)) $this->data[$name]=new arrayInSensitive();

        return $this->data[$name];
    }
    public function offsetSet($name, $value) {
        $this->data[$name] = $value;
    }
    public function offsetExists($name) {
        return (array_key_exists($name,$this->data));
    }
    public function offsetUnset($name) {
        unset($this->data[$name]);
    }

} 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:19:23.100

每当您引用索引值时，只需强制执行特定情况

```
class arrayInSensitive extends \arrayObject{

    var $data = array();

    public function offsetGet($name) {
        if(!array_key_exists(strtolower($name),$this->data)) $this->data[strtolower($name)]=new arrayInSensitive();

        return $this->data[strtolower($name)];
    }
    public function offsetSet($name, $value) {
        $this->data[strtolower($name)] = $value;
    }
    public function offsetExists($name) {
        return (array_key_exists(strtolower($name),$this->data));
    }
    public function offsetUnset($name) {
        unset($this->data[strtolower($name)]);
    }

} 
```

# database - 具有多种用户类型的 kohana 身份验证模块

> ID：15831164
> 
> 赞同：0
> 
> 时间：2013-04-05T10:06:06.223
> 
> 标签：database, authentication, kohana

有什么方法可以在 Kohana 中使用 Auth 模块来处理三个不同的用户表？或者也许更好的是拥有一个用户表“用户”并为这三种用户提供不同的配置文件表？问题是不同的用户必须在表中使用完全不同的字段，还需要根据不同的标准（字段）进行身份验证。请建议如何模拟这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T12:34:23.403

（kingkero 是对的）您应该为此扩展 Kohana_Auth 或 Kohana_Auth_ORM 并覆盖这些方法来做您需要的事情。

# usb - Zedboard 上的 USB OTG 接口

> ID：15831165
> 
> 赞同：3
> 
> 时间：2013-04-05T10:06:06.707
> 
> 标签：usb

我正在开发由 Avnet 设计的基于 Zynq 的 zedboard。我想使用 Zedboard 的 USB 功能。我想在处理器上编写 C 代码来访问来自任何附加设备（例如相机）的数据。驱动程序由赛灵思提供。任何人都可以在c代码中帮助我吗？如何使用这些功能。

```
int XUsbPs_EpBufferSend(XUsbPs InstancePtr, u8 EpNum, const u8 BufferPtr, u32 BufferLen);
int XUsbPs_EpBufferReceive(XUsbPs InstancePtr, u8 EpNum, u8 BufferPtr, u32 BufferLenPtr, u32 Handle); 
```

我不明白如何为 EpNum 和 Handle 设置值。

# c# - 获取字符串中某个索引后第一个检测到的空间的索引

> ID：15831171
> 
> 赞同：11
> 
> 时间：2013-04-05T10:06:22.307
> 
> 标签：c#, .net, regex, string

在要格式化的字符串中（主要是用不同的符号替换字符以在 UI 上进行渲染测试），我必须检测 % 然后从这个 % char 中跳过所有字符 util 第一个空格，并且必须对字符串中的所有实例重复它。

**例如** `abcd%1$s efgh %2$d ijkl`。在这个字符串中，我必须得到 % 的索引，然后从中找到第一个空间的索引。基本上，我必须跳过这个`%1$s`&`%2$d`这是某种格式的占位符。我希望，我不会把它放在复杂的地方。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-05T10:09:47.537

你可以很容易地做到这一点，只需抓住第一个百分号的索引，然后利用该索引从那里找到第一个空格：

```
var start = myString.IndexOf("%");
var spaceIndex = myString.IndexOf(" ", start) 
```

当然 myString 的值是您在问题中表示的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T09:28:54.580

根据您的要求，以下是最简单且可扩展的“`abcd%1$s efgh %2$d ijkl`在此字符串中，我必须跳过此`%1$s`&`%2$d`这是某种格式的占位符。”

```
string[] placeHolders = new string[] {"%1$s", "%2$d"};
string[] splits = "abcd%1$s efgh %2$d ijkl".Split(placeHolders, StringSplitOptions.None); 
```

这将提供`splits`为`["abcd", "efgh", "ijkl"]`

# xml - 下载 XML R 包时发生 ICAP“文件解压缩/解码”错误

> ID：15831175
> 
> 赞同：2
> 
> 时间：2013-04-05T10:06:40.823
> 
> 标签：xml, r, repository, cran

我正在尝试下载 R 的 XML 包。

作为 Windows 用户，按照[http://www.omegahat.org/RSXML](http://www.omegahat.org/RSXML)，我尝试了在线安装：

```
install.packages("XML", repos = "http://www.omegahat.org/R") 
```

并得到：

```
package ‘XML’ is available as a source package but not as a binary 
```

您确实可以浏览[http://www.omegahat.org/R](http://www.omegahat.org/R)看到 bin/windows/contrib/2.15/ 不包含 XML 文件，与 bin/windows/contrib/2.14/ （二进制文件，旧版本的 R ) 或 src/contrib/ (源文件)。

现在，如果我想从我的浏览器下载二进制文件或源文件（之后在 R 中安装它），我在[http://www.omegahat.org/R](http://www.omegahat.org/R)和[http://cran 都会遇到以下错误。 r-project.org/web/packages/XML/index.html](http://cran.r-project.org/web/packages/XML/index.html)：

```
ICAP Error (icap_error)
An error occurred while performing an ICAP operation:
File decompression/decode error;
  File:              <name of the file downloaded>;
  Sub File:          <some files>/exampleData/dtd.zip;
  Vendor:            Sophos, Plc.;
  Engine error code: 0xA004021A;
  Engine version:    3.41.0;
  Pattern version:   4.87G.4724528.2257566597;
  Pattern date:      2013/04/05 04:26:00
There could be a network problem,
the ICAP service may be misconfigured,
or the ICAP server may have reported an error. 
```

同时，可以轻松下载其他包（二进制和源代码）（例如 XMLSchema，来自同一个 Omegahat 存储库）。有什么线索吗？有没有人有同样的情况？

我想这是来自 Omegahat 的错误，但为什么没有检测到它？我该向谁要求更正？以及如何下载以前但有效的软件包版本？

# c# - 如何在 windows 窗体的实例中更改变量的值

> ID：15831178
> 
> 赞同：0
> 
> 时间：2013-04-05T10:06:44.053
> 
> 标签：c#, winforms, textbox

我有一个对象的实例，它被添加到列表中，然后数据以 Windows 窗体 c# 显示。是否可以通过windows窗体更改实例的数据？

```
Person Joe = new Person("Sam", "Smith", "12.05.1992");
person.Add(Joe); 
```

这是随后添加到人员列表中的人员的实例。

```
textBox1.Text = person.Forename;
textBox2.Text = person.Surname;
textBox4.Text = person.DateOfBirth; 
```

这就是我通过文本框在表单中显示它的方式，以便您可以输入新名称并随后保存更改的数据。

这是我的想法。。

```
person.Forename = textBox1.Text; 
```

但我想我需要一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:40:49.267

好的，我知道您的`Person`课程看起来像这样：

```
public class Person
{
    public Person(string forename, string surname, string dateOfBirth)
    {
        Forename = forename;
        Surname = surname;
        DateOfBirth = dateOfBirth;
    }
    public string Forename { get; set; }
    public string Surname { get; set; }
    public string DateOfBirth { get; set; }

    public override string ToString()
    {
        return Forename + ";" + Surname + ";" + DateOfBirth;
    }
} 
```

所以你的表格应该是这样的：

```
public partial class frmMain : Form
{
    private List<Person> Persons = new List<Person>();

    public frmMain()
    {
        InitializeComponent();

        Person Joe = new Person("Sam", "Smith", "12.05.1992");
        Persons.Add(Joe);

        textBox1.Text = Persons[0].Forename;
        textBox2.Text = Persons[0].Surname;
        textBox3.Text = Persons[0].DateOfBirth;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(Persons[0].ToString()); // before change
        Persons[0].Forename = textBox1.Text;
        MessageBox.Show(Persons[0].ToString()); // after change
    }
} 
```

但我不太明白，为什么你会想要 a`List<Person>`而不仅仅是 one `Person`。如果列表中有多个`Person`，您怎么知道要显示并随后更改哪一个？

PS：我强烈建议你使用`DateTime`作为你的`DateOfBirth`. 如果您想真正使用出生日期，您将陷入困境......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:22:52.170

Tyr 文本更改事件或文本验证事件，例如：

```
private void textBox1_TextChanged(object sender, EventArgs e)
        {
            person.Forename = textBox1.Text;
        } 
```

# javascript - 1 个下拉菜单，2 个收音机，2 个输入

> ID：15831179
> 
> 赞同：1
> 
> 时间：2013-04-05T10:06:53.563
> 
> 标签：javascript, jquery

好的，即使用我的母语也很难解释，但我会尽量说清楚。

我有一个带有不同选项的下拉菜单。在选择其中一个之后，用户需要检查两个单选按钮之一，这最终会在两个不同的输入字段中给出结果。例如 - 如果您从下拉列表中选择选项 2，然后选中单选按钮 1，则输入 1 显示某个值，输入 2 显示其他值。

```
<select id="single">
    <option>Select an item</option>
    <option data1="140x200" data2="1">80x190</option>
    <option data1="140x200/220" data2="2">80x200</option>
    <option data1="140x220" data2="3">80x210</option>
</select>

<input type="radio" id="radioButton1" name="radioButton" value="enkel" />
<label for="radioButton1">enkel</label>
<input type="radio" id="radioButton2" name="radioButton" value="dubbel" />
<label for="radioButton2">dubbel</label>
<input type="text" id="dekbed">
<input type="text" id="overtrek"> 
```

我有我制作的这个 jsfiddle，所以也许它有助于澄清。

[**小提琴**](http://jsfiddle.net/astronaut/P7bJ5/39/)

也许我应该为下拉列表中的每个选项（data1、data2、data3、data4）提供 4 个属性，这样对于选定的选项，如果选中了 radio1，它会给 data1 输入 #dekbed 和 data2 输入 #overtrek，而 data3 输入 #如果选中无线电 2，则 dekbed 和 data4 输入 #overtrek。

我希望你们理解这一点，我真的很感激一些帮助，因为我以前还没有见过这种选择方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:31:11.867

您可以尝试添加一个条件来检查是否在例程中检查了每个单选按钮

```
 $("#single option:selected").each(function () { 
```

例如对于 radioButton1 它将是

```
 if ($("#radioButton1").is(':checked')){  .... do something } 
```

如果勾选了 radioButton1，将 dekbed 和 overtrek 中的值更改为 data1 和 data 2。

否则，如果 radioButton2 被选中

```
if ($("#radioButton2").is(':checked')){  .... do something different} 
```

将 dekbed 和 overtrek 中的值更改为 data3 和 data 4。

编辑说明：您需要将这些方法添加到选择框的更改事件和单选按钮输入中。

我在以下位置创建了一个演示解决方案的小提琴：[jsfiddle.net/dbS2Q/1/](http://jsfiddle.net/dbS2Q/1/)

我希望这有帮助！

# javascript - 如何获得特征几何？

> ID：15831180
> 
> 赞同：1
> 
> 时间：2013-04-05T10:06:55.603
> 
> 标签：javascript, openlayers

我在 OpenLayers 应用程序中有一个 DrawFeature 控件：

```
draw=new OpenLayers.Control.DrawFeature(markers,OpenLayers.Handler.Point, {
        "title": "POI",
        "displayClass": "olControlDrawPoi"
})
app.mapPanel.map.addControl(draw); 
```

它的工作正常。现在我想获得具有创建特征的几何图形和属性的窗口来编辑它们。我怎样才能做到？

# ios - 从 NSArray 中检索 NSDictionary，其中字典键的值为 X

> ID：15831183
> 
> 赞同：10
> 
> 时间：2013-04-05T10:07:08.413
> 
> 标签：ios, objective-c, nsarray, nsdictionary

我有一个`NSArray`with `NSDictionaries`。一个数组中的一个字典键包含一个值。我想`NSDictionary`用该值检索 。

我的数组：

```
Array: (
        {
        DisplayName = "level";
        InternalName = "Number 2";
        NumberValue = 1;
    },
        {
        DisplayName = "PurchaseAmount";
        InternalName = "Number 1";
        NumberValue = 3500;
    }
) 
```

所以，我想获取包含`DisplayName`设置为`PurchaseAmount`（不区分大小写）的字典。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T10:18:17.230

以下解决了我的问题：

```
NSArray *filtered = [promotions filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(DisplayName == %@)", @"PurchaseAmount"]];
NSDictionary *item = [filtered objectAtIndex:0]; 
```

感谢用户 Nate 对我的问题的评论！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T10:31:57.267

LIKE[cd] 也会这样做

```
NSArray *filtered = [data filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(DisplayName LIKE[cd] %@)", @"purchaseAmount"]]; 
```

回来

```
<NSArray>(
    {
       DisplayName = PurchaseAmount;
       InternaName = "Number 1";
       NumberValue = 3500;
    }
) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T10:18:09.013

使用`NSPredicate`这种方式

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"DisplayName LIKE[cd] 'PurchaseAmount' "];
NSArray *filter = [array filteredArrayUsingPredicate:predicate];
NSLog(@"%@",filter); 
```

此处过滤器将保存您的字典，其中包含设置为 PurchaseAmount 的 DisplayName（不区分大小写）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-30T01:18:01.513

用 Swift 回答，

```
let predicate = NSPredicate(format: "name contains[cd] %@", stringLookingFor)
let newList = data .filteredArrayUsingPredicate(predicate) 
```

数据 nsarray 看起来像这样

```
[
 {
   name = Carlos,
   total = 9
 },
 {
   name = Willy,
   total = 2
 }
] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T13:08:25.157

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"DisplayName == 'level'"];
  NSArray *arrOutput = [[Array filteredArrayUsingPredicate:predicate] mutableCopy]; 
```

在上面两行的帮助下，您将获得所有带有 DisplayName = "PurchaseAmount" 的字典

# git - 合并时如何始终忽略文件

> ID：15831187
> 
> 赞同：3
> 
> 时间：2013-04-05T10:07:15.577
> 
> 标签：git, git-branch, git-merge, ignore

我有一个在两个分支中不同的配置文件。我希望在每个分支内跟踪这个配置文件，但在合并分支时总是忽略。

因此，在我合并两个分支之后，文件在每个分支中都保持与合并前相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:42:51.737

要使用下面的钩子，请执行例如

```
echo path/to/protected/file config >> .git/info/attributes
git config --add branch.server1.protect-attr config 
```

属性`config`和`protect-attr`分支项正是为此而发明的。

*   `.git/hooks/post-merge`：

    ```
    #!/bin/sh
    protect="$(git config --get-all branch."$(git branch|sed -n 's/^\*.//p')".protect-attr)"
    if test ! -z "$protect"; then
        git diff --name-only HEAD@{1} HEAD \
        | git check-attr --stdin $protect \
        | sed -n '/: unspecified$/!s,:.*,,p' \
        | sort -u \
        | sed -e 's,^,git checkout HEAD@{1} -- ",' -e 's,$," # protected file changed by merge,'
    fi 
    ```

`foo`当您标记为配置的更改或任何其他文件合并到标记为保护它们的分支时，合并到分支配置将弹出恢复命令。

```
$ git merge wip
Updating 9906beb..888556e
Fast-forward
 foo | 1 +
 1 file changed, 1 insertion(+)
git checkout HEAD@{1} -- "foo" # protected file changed by merge 
```

您还可以添加一个`|sh -x`管道阶段来进行还原 - 甚至可以`git commit --amend --no-edit`进行全自动操作。这几乎是一个入门工具包，请参阅[githooks](https://www.kernel.org/pub/software/scm/git/docs/githooks.html)、[gitattributes](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)和[git config](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)手册页了解更多信息。

有一个[`libgit2`](http://libgit2.github.com)项目正在以一种对嵌入更友好的方式重新实现 git，它不是 git，但如果你不需要所有的 git，它有它的优势。不幸的是，它还不够完整，无法处理这个问题，所以请确保您使用[的是完整的 git](http://git-scm.com/downloads)，而不是有限的客户端之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:57:23.117

首先，您需要创建`ours`合并驱动程序，除非您已经有一个。为此，请运行以下命令：

```
 git config merge.ours.driver true 
```

此驱动程序将允许您在合并会话期间首选目标分支的文件版本。

其次，让我们调用您的分支`A`和`B`.

在 branch`A`上，在文件的目录中，创建一个名为的文件，`.gitattributes`其中包含以下行：

```
myconfig.conf merge=ours 
```

然后添加并提交`.gitattributes`文件。

它会让 git`A`在`myconfig.conf`合并**`B`到`A`**时始终保持. 如果您还需要合并**`A`到`B`**`B`，请对分支重复相同的步骤。

# excel - 如何从下拉列表中创建公式

> ID：15831190
> 
> 赞同：1
> 
> 时间：2013-04-05T10:07:25.780
> 
> 标签：excel

您好，我真的需要帮助才能获得所需的正确配方。

我需要能够在一个单元格中有一个下拉列表，然后在下一个单元格中有一个公式来计算值。

例如，在一个单元格中，下拉列表将包含 >15、15-20、20-25、25-30 等。这显示了员工已经旅行了多少英里。我希望下一个单元格为下拉列表的每个选项说明一个数字，例如 15-20 英里 = 4.75 英镑。

任何关于如何计算的想法都是最有帮助的，我将永远欠你的债

劳拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:23:07.827

您可能需要使用 VLOOKUP 公式。

让单元格 A1 包含您的下拉菜单（使用 Data->Validation->List 创建，然后选择一个在本例中为 B1:B3 的源）。

让 B1:B3 包含英里数，所以 10,20,30

让 C1:C3 包含成本，所以 £1.00, £2.00, £3.00

然后您可以在 D1 中键入`=VLOOKUP($A$1,$B$1:$C$3,2,FALSE)`. 这应该在 D1 中显示在 A1 中选择的里程成本。

希望这可以帮助。

# sql - 传递多个值以获取 CSV 输出

> ID：15831194
> 
> 赞同：0
> 
> 时间：2013-04-05T10:07:47.480
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

```
Create procedure temp
(
@MID smallint
)
as
Begin

select TranID,
[MonthValue]=(CASE WHEN @MID=1 THEN Jan
    WHEN @MID=2 THEN Feb
    WHEN @MID=3 THEN Mar
    WHEN @MID=4 THEN Apr
    WHEN @MID=5 THEN May
    WHEN @MID=6 THEN Jun
    WHEN @MID=7 THEN Jul
    END)
    FROM 
    TblTran as M
 where TranID=1 and
       M.Month = @MID
end 
```

这是一个带有参数@MID 的存储过程，我使用它来使用SSRS 生成报告。
如果将单个值传递给参数，则它可以正常工作。

例如-

交易表

```
TranID | Apr |  May  | Jun   | Jul 
```

* * *

```
1     |  50  |   30  |  11   |   30   
2     |  51  |   39  |  100  |   30 
```

如果我执行
`Exec 4`
结果是我所期望的

```
TranID  |  MonthValue    

1       |   50   **-- ie Aprils value** 
```

但是我需要将多个值传递给参数，
例如

`exec 4,5,6`

和期望的结果应该是

```
TranID  |  MonthValue        

1       |   50,30,11     ***-->Comma Separated values of columns 
```

我怎样才能达到这样的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:14:46.690

存储过程必须具有有限数量的预定义参数，此外，您尝试实现的目标并不保证存储过程。更好的解决方案是将值存储在表格中`create table (mid smallint, monthtext varchar(20))`并查找您需要的内容。

请注意，从外观上看，您还可以使用 datetime 功能返回 1-12 月份的数字。

`DECLARE @Mth smallint SET @Mth = 11 SELECT DateName(mm,DATEADD(mm,@Mth,-1)) as [MonthName]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:31:39.960

您可以在定义中定义多个值，默认值为 null，因此您只需传入所需的项目数。

```
create procedure fred
(
  @i1 int = null,
  @i2 int = null,
  @i3 int = null,
... 
```

然后检查值是否为空。

位我同意使用系统功能可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:05:23.930

您可以使用拆分功能，例如

```
CREATE FUNCTION dbo.SplitInts
(
    @List       VARCHAR(MAX),
    @Delimiter  VARCHAR(32)
)
RETURNS TABLE
AS
    RETURN 
    (
      SELECT Item = CONVERT(INT, Item) 
        FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
          CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
        FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
          FROM sys.all_objects) AS n(Number)
        WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, LEN(@Delimiter)) = @Delimiter
      ) AS y
    ); 
```

然后将您的参数作为*单个字符串*而不是单独的参数传递（[根据这篇文章，您可以使用 SSRS 轻松完成此操作](https://stackoverflow.com/questions/512105/passing-multiple-values-for-a-single-parameter-in-reporting-services)）：

```
EXEC dbo.procedurename @param = '4,5,6'; 
```

这是一个使用声明的变量和动态 SQL 来获得所需输出的快速示例：

```
CREATE TABLE dbo.TransactionsTest
(TranID INT PRIMARY KEY, Apr INT, May INT, Jun INT, Jul INT);

INSERT dbo.TransactionsTest VALUES
(1,50,30,11 ,30),   
(2,51,39,100,30);

DECLARE @months VARCHAR(32) = '4,5,6';

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql = 'SELECT TranID,MonthValue=' + STUFF(
(SELECT '+'',''+RTRIM(' 
  + CONVERT(CHAR(3),DATENAME(MONTH, DATEADD(MONTH, Item-1, 0))) + ')' 
  FROM dbo.SplitInts(@months,',') 
  ORDER BY Item
  FOR XML PATH, 
  TYPE).value(N'./text()[1]', N'nvarchar(max)'),1,5,N'') + '
 FROM dbo.TransactionsTest ORDER BY TranID;';

PRINT @sql;

EXEC sp_executesql @sql; 
```

结果：

```
-- printed in messages pane:

SELECT TranID,MonthValue=RTRIM(Apr)+','+RTRIM(May)+','+RTRIM(Jun) 
    FROM dbo.TransactionsTest ORDER BY TranID;

-- grid/text results:

TranID  MonthValue
------  ----------
1       50,30,11
2       51,39,100 
```

[SQLfiddle 演示](http://sqlfiddle.com/#!3/f48f2/2)

# c# - 使用自定义类绑定键

> ID：15831196
> 
> 赞同：1
> 
> 时间：2013-04-05T10:07:52.673
> 
> 标签：c#, wpf, mvvm, binding, dictionary

是否可以在自定义类中绑定 a `Key`，就像使用 a 一样`Dictionary`？

我可以`Dictionary`使用此绑定绑定到 a：

```
"Binding MyDictionary[MyKey]" 
```

但我不想使用这样`Dictionary`的自定义类：

```
public class DataGridField :  INotifyPropertyChanged
{
    [Required]
    [Key]
    public string Key { get; set; }

    private object value;
    public object Value
    {
        get
        {
            return this.value;
        }
        set
        {
            this.value = value;
            this.OnPropertyChanged("Value");
        }
    }
} 
```

现在我想以`ObservableCollection`与使用`Dictionary`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:41:23.790

你可以，但你必须实现[indexer 属性](http://msdn.microsoft.com/en-us/library/2549tw02%28v=vs.110%29.aspx)：

```
public class DataGridField
{
    public string this[string index]
    {
        get { return this.Key; }
        set
        {
            this.Key = index;
        }
     }
 } 
```

**编辑：**

但是，如果您对具有 INotifyProperty/CollectionChange 实现的 Dictionary 感兴趣，您可以使用[ObservableDictionary](http://blogs.microsoft.co.il/blogs/shimmy/archive/2010/12/26/observabledictionary-lt-tkey-tvalue-gt-c.aspx)

# image - FFmpeg：计算将图像和 .mp3 转换为视频的时间

> ID：15831197
> 
> 赞同：2
> 
> 时间：2013-04-05T10:07:53.030
> 
> 标签：image, video, ffmpeg

有什么公式可以用来计算 FFmpeg 将单个 .jpg 图像和 .mp3 歌曲转换为视频的时间吗？

我正在使用以下代码：

```
ffmpeg -loop 1 -r ntsc -i image.jpg -i song.mp3 -c:a copy -c:v libx264 \
  -preset fast -threads 0 -shortest

```

假设我们有一张 X 分辨率和 .mp3 长度为 L 的图像。公式是否为：

```
time = X * L(in seconds) ? 
```

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-27T11:16:51.360

首先，使用键“-t 10”运行基准测试，这意味着 10 秒基准测试并计算运行时间。

```
ffmpeg -i .......... -t 10 -f null - -benchmark 
```

基准输出，运行时：**utime**：

```
bench: utime=3.203s
bench: maxrss=215036kB
[aac @ 0000026cb6474600] Qavg: 1569.054 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-03T12:36:39.857

[![在此处输入图像描述](https://i.stack.imgur.com/zLQwl.png)](https://i.stack.imgur.com/zLQwl.png) **首先从 FFmpeg Listener 的 OnProgress 方法调用这个方法**

```
 public void onProgress(String s) {
            getProgress(s);
            Log.e("Editor", "String ==== " + s);
    } 
```

*getProgress(s) 是一种查找我们执行的估计时间的方法*

```
 private void getProgress(String message) {
            Pattern pattern = Pattern.compile("time=([\\d\\w:]{8}[\\w.][\\d]+)");
            Matcher matcher = pattern.matcher(message);
            matcher.find();
            String tempTime = String.valueOf(matcher.group(1));
            Log.d(TAG, "getProgress: tempTime " + tempTime);
            String[] arrayTime = tempTime.split("[:|.]");
            long currentTime =
                    TimeUnit.HOURS.toMillis(Long.parseLong(arrayTime[0]))
                            + TimeUnit.MINUTES.toMillis(Long.parseLong(arrayTime[1]))
                            + TimeUnit.SECONDS.toMillis(Long.parseLong(arrayTime[2]))
                            + Long.parseLong(arrayTime[3]);

            String speed;
            speed = message.substring(message.indexOf("speed=") + 1, message.indexOf("x")).split("=")[1];

            long percent = 100 * currentTime / videoLengthInMillis;
            long time = TimeUnit.HOURS.toMillis(Long.parseLong(arrayTime[0])) * 3600 + TimeUnit.MINUTES.toMillis(Long.parseLong(arrayTime[1])) * 60 + TimeUnit.SECONDS.toMillis(Long.parseLong(arrayTime[2])) + Math.round(Long.parseLong(arrayTime[3]));
            long ETA = Math.round((Math.round(videoLengthInMillis) - time) / Float.valueOf(speed));
            Log.e(TAG, "currentTime -> " + currentTime + "s % -> " + percent);
            Log.e(TAG, "ETA -> " + ETA);

            progressBar.setProgress((int) percent);
            String EstimateTime = convertSecondsToHMmSs(ETA);
            Log.e(TAG, "EstimateTime -> " + EstimateTime);
            ProcessTime.setText(EstimateTime);
        } 
```

*ConvertSecondToHMmSs*

```
public static String convertSecondsToHMmSs(long millis) {

    long seconds=(millis/1000);
    long s = seconds % 60;
    long m = (seconds / 60) % 60;
    long h = (seconds / (60 * 60)) % 24;
    return String.format("%d:%02d:%02d", h,m,s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:55:48.887

使用`-r 1`，速度更快

```
ffmpeg -loop 1 -r 1 -i image.jpg -i song.mp3 -c:a copy -c:v libx264 \
  -preset fast -threads 0 -shortest

```

[`ref`](http://github.com/svnpenn/a/blob/master/ff-audio.sh)

# php - 获取手机的 GPS 位置

> ID：15831203
> 
> 赞同：0
> 
> 时间：2013-04-05T10:08:15.377
> 
> 标签：php, geolocation, gps, mobile-browser

我一直在 Google 和 SO 周围寻找一种方法来获取使用带有 PHP 的手机的用户的 GPS 位置。但是，我发现的唯一解决方案使用 Javascript，当我可以将一些 PHP 代码添加到我现有的系统时，我宁愿不必使用 Javascript 做一些复杂的事情。

我的问题很简单：如何使用 PHP 而不是 Javascript 获取浏览我网站的人的 GPS 位置？

另外：如果我必须使用 Javascript，如何从 PHP 访问值？另外，有没有办法从这个 GPS 位置获取城市/国家，或者可能是另一种获取城市/国家的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:22:15.887

您无法使用 PHP 获取 GPS 位置。

您可以使用 GeoLocation 来近似它（使用 IP 地址），但这是出了名的不可靠，最好避免。

另一种选择是使用 HTML5 中内置的位置 API。访问您的网站时，系统会询问使用功能强大的移动设备（或浏览器）的用户是否出于功能原因希望披露其位置，但您不能强迫用户透露：

```
function show_map(position) {
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;
  // let's show a map or do something interesting!
} 
```

[这里](http://diveintohtml5.info/geolocation.html)有一个值得阅读的示例指南/概述（其中包括位置感知浏览如何工作的实时示例）。

位置信息在隐私方面是一个非常敏感的领域，因此手机制造商不允许自动披露您正在寻找的信息。

延伸阅读资源：

*   [W3C 地理定位 API](http://www.w3.org/TR/geolocation-API/)
*   [geoPosition.js](https://github.com/estebanav/javascript-mobile-desktop-geolocation)，一个地理定位 API 包装脚本
*   Internet Explorer 9 开发人员指南：[地理位置](http://msdn.microsoft.com/en-us/ie/ff468705.aspx#_HTML5_geolocation)
*   一个 SO 问题：[iPhone 上的 Web Geolocation API](https://stackoverflow.com/questions/221592/geolocation-api-on-the-iphone)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:16:51.277

没有办法通过 PHP 检索这些数据，请记住 PHP 是在服务器中执行的，而不是在客户端中执行的，因此您需要像 javascript 这样的客户端执行语言。

# linux - 用于读取单词列表并计算它们在语料库中的计数的 Shell 脚本。

> ID：15831204
> 
> 赞同：1
> 
> 时间：2013-04-05T10:08:17.783
> 
> 标签：linux, shell, command-line, wc

我需要在 linux 中编写一个命令行脚本来执行以下操作：

*   从文本文件中读取单词列表（每行一个单词）。说 w_i

*   对于每个 w_i 计算不同文本文件中的字数。

*   对这些计数求和

非常感谢这里的一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:45:24.960

这里使用一个单行来`awk`打印字数和总数：

```
awk 'NR==FNR{w[$1];next}{for(i=1;i<=NF;i++)if($i in w)w[$i]++}END{for(k in w){print k,w[k];s+=w[k]}print "Total",s}' file1 file2
hello 13
foo 20
world 13
baz
bar 20
Total 66 
```

注意：使用[**Kents**](https://stackoverflow.com/a/15831545/1066031)示例输入。

更具可读性的脚本版本：

```
BEGIN {
    OFS="\t"                              # Space the output with a tab 
}
NR==FNR {                                 # Only true in file1
    word_count[$1]                        # Build keys for all words           
    next                                  # Get next line
}
{                                         # In file2 here
    for(i=1;i<=NF;i++)                    # For each word on the current line
        if($i in word_count)              # If the word has a key in the array
            word_count[$i]++              # Increment the count
}
END {                                     # After all files have been read
    for (word in word_count) {            # For each word in the array
        print word,int(word_count[word])  # Print the word and the count
        sum+=word_count[word]             # Sum the values
    }
    print "Total",sum                     # Print the total
} 
```

另存为`script.awk`并运行如下：

```
$ awk -f script.awk file1 file2
hello   13
foo     20
world   13
baz     0
bar     20
Total   66 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:27:47.470

这条 grep 行可能对你有用，试一试：

```
 grep -oFwf wordlist textfile|wc -l 
```

我刚刚做了这个小测试，它似乎像你预期的那样工作。

（PS，我使用vim在file2中插入这些词，所以我知道我插入了多少）

```
kent$  head file1 file2
==> file1 <==
foo
bar
baz
hello
world

==> file2 <==
 foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo bar bar bar bar bar bar bar bar bar bar bar bar bar bar bar bar bar bar bar bar
 hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world 
blah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo bablah bbbb fo ba 

kent$  grep -oFwf file1 file2|wc -l
66 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:16:44.037

假设您有 file`words`每个文件包含一个单词，然后您有 file `corpus`，您可以使用以下命令：

```
$ cat file | xargs -I% sh -c '{ echo "%\c"; grep -o "%" corpus | wc -l; }' | \
  tee /dev/tty | awk '{ sum+=$2} END {print "Total " sum}' 
```

例如，对于`file`：

```
car
plane
bike 
```

对于`corpus`：

```
car is a plane is on a car
or in the car via a plane
plane plane
car 
```

输出将是：

```
$ cat file | xargs -I% sh -c '{ echo "%\c"; grep -o "%" corpus | wc -l; }' | \
  tee /dev/tty | awk '{ sum+=$2} END {print "Total " sum}'
car       4
plane       4
bike       0
Total 8 
```

# jquery - 实时生成元素并将其内容放入新的实时生成元素中

> ID：15831206
> 
> 赞同：0
> 
> 时间：2013-04-05T10:08:25.500
> 
> 标签：jquery, dom

我有两个表格都有自动增量行。到目前为止，当我单击添加按钮时，代码可以根据我的需要正常工作。但现在我想将值从一行发布到另一行中，该值在其他表中递增。同时我有 javascript 代码，但该代码在自动增量函数中似乎无法正常工作。这是我的jQuery：

```
<script type='text/javascript'>
    //<![CDATA[
     $(document).ready(function() {
      var currentItem = 7;
            $('#addnew').click(function() {
                currentItem++;
                $('#items').val(currentItem);
                $('#items2').val(currentItem);
                var strToAdd = '<tr><td align="center"><input type="text" size="6" maxlength="6" id="ord_' + currentItem + '" maxlength="6" name="ord_' + currentItem + '" class="form-input-oth" onkeyup=$("#ordby_'+ currentItem +'").val($("#ordby_'+ currentItem +'").val())/></td>\n\
                                    <td align="center"><input type="text" size="6" maxlength="6" id="srno' + currentItem + '" maxlength="6" name="srno_' + currentItem + '" class="form-input-oth" onkeyup="document.getElementById("srno_' + currentItem + '").value = this.value;"/></td>\n\
                                    <td align="center"><textarea name="descrip_' + currentItem + '" id="descrip_' + currentItem + '" cols="70" class="form-input-textarea" onkeyup="document.getElementById("descrip_' + currentItem + '").value = this.value;"></textarea></td>\n\
                                    <td align="center"><input type="text" size="6" maxlength="9" id="unit_' + currentItem + '" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate" onkeyup="document.getElementById("unit_' + currentItem + '").value = this.value;"/></td>\n\
                                    <td align="center"><input type="text" size="6" maxlength="9" id="rate_' + currentItem + '" maxlength="6" name="rate_' + currentItem + '" class="form-input-rate" onkeyup="document.getElementById("rate_' + currentItem + '").value = this.value;"/></td></tr>';

                var strToAdd3 = '<tr><td align="center"><input type="text" size="6" maxlength="6" id="ord_' + currentItem + '" maxlength="6" name="ord_' + currentItem + '" class="form-input-oth"  /></td>\n\
                                    <td align="center"><input type="text" size="6" maxlength="6" id="srno_' + currentItem + '" maxlength="6" name="srno_' + currentItem + '" class="form-input-oth"  /></td>\n\
                                    <td align="center"><textarea name="text_' + currentItem + '" id="descrip_' + currentItem + '" cols="70" style="display: none;"></textarea></td>\n\
                                    <td align="center"><input type="text" size="6" maxlength="9" id="unit_' + currentItem + '" maxlength="6" name="unit_' + currentItem + '" class="form-input-rate"  /></td>\n\
                                    <td align="center"><input type="text" size="6" maxlength="9" id="rate_' + currentItem + '" maxlength="6" name="rate_' + currentItem + '" class="form-input-rate"  /></td></tr>';

                $('#data').append(strToAdd);
                $('#data3').append(strToAdd3);

            });
        });

    //]]>
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:35:49.267

```
 $.each($('textarea'),function(){
     $(this).on('keyup',function(){
        $('body').append('<textarea>'+$(this).val()+'</textarea>'); 
          });
        }); 
```

您可以检查[jQuery $.each()](http://api.jquery.com/jQuery.each/)以在所有元素上循环此代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:36:35.897

你可以试试去掉这个...

`onkeyup=$("#ordby_'+ currentItem +'").val($("#ordby_'+ currentItem +'").val())`

...并添加此事件

```
$( '.class-name-for-input-element-you-want-to-attach-event-to' ).on( 'keyup', function() {
    var itemIdx = parseInt( this.id.substr( 4 ), 10 ); // Strips the 'Ord_' from the id
    // Do whatever you need to do with the integer

    // Find element in #data3 and replace its value with the value in the element that triggered this event
    $( '#data3' ).find( 'selector' ).val( this.value );
}); 
```

为了使它起作用，您需要为每个输入元素添加一个类名。

**更简单的版本**
或者如果你想将所有输入元素的值复制到#data3表对应的输入元素，使用这个：

```
$( '#data' ).on( 'keyup', 'input, textarea', function() {
    $( '#data3' ).find( '#' + this.id ).val( this.value );
}); 
```

**备注**
您只能将事件附加到 DOM 中已经存在的元素，因此您不能直接将事件附加到 input 或 textarea 元素。相反，您可以将事件附加到该事件上`#data`，我假设它已经在 DOM 中。

**没有重复的 ID（从 #data3 表的输入元素中删除的 ID）**

```
$( '#data' ).on( 'keyup', 'input, textarea', function() {
    $( '#data3' ).find( '[name="' + this.id + '"]' ).val( this.value );
}); 
```

# python - Django 1.5 UnicodeEncodeError 在电子邮件中使用 attach_alternative

> ID：15831209
> 
> 赞同：1
> 
> 时间：2013-04-05T10:08:51.663
> 
> 标签：python, django, unicode

我正在将 Django 项目从 1.3 迁移到 1.5。

一个发送电子邮件的应用程序现在无法在我的开发机器中的 1.5 中运行。我收到此错误：

/envia_activacion/ 'ascii' 编解码器的 UnicodeEncodeError 无法在位置 37 对字符 u'\xf3' 进行编码：序数不在范围内（128）

```
Traceback:
File "/home/django/.virtualenvs/migracion/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/django/clones/migracion/libs/my_apps/emailing/views.py" in envia_email
  48\.         mailer.msg.send()
File "/home/django/.virtualenvs/migracion/lib/python2.6/site-packages/django/core/mail/message.py" in send
  255\.         return self.get_connection(fail_silently).send_messages([self])
File "/home/django/.virtualenvs/migracion/lib/python2.6/site-packages/django/core/mail/backends/smtp.py" in send_messages
  95\.                 sent = self._send(message)
File "/home/django/.virtualenvs/migracion/lib/python2.6/site-packages/django/core/mail/backends/smtp.py" in _send
  113\.                     force_bytes(message.as_string(), charset))
File "/home/django/.virtualenvs/migracion/lib/python2.6/site-packages/django/core/mail/message.py" in as_string
  169\.         g.flatten(self, unixfrom=unixfrom)
File "/usr/lib/python2.6/email/generator.py" in flatten
  84\.         self._write(msg)
File "/usr/lib/python2.6/email/generator.py" in _write
  109\.             self._dispatch(msg)
File "/usr/lib/python2.6/email/generator.py" in _dispatch
  135\.         meth(msg)
File "/usr/lib/python2.6/email/generator.py" in _handle_multipart
  201\.             g.flatten(part, unixfrom=False)
File "/usr/lib/python2.6/email/generator.py" in flatten
  84\.         self._write(msg)
File "/usr/lib/python2.6/email/generator.py" in _write
  109\.             self._dispatch(msg)
File "/usr/lib/python2.6/email/generator.py" in _dispatch
  135\.         meth(msg)
File "/usr/lib/python2.6/email/generator.py" in _handle_text
  178\.         self._fp.write(payload)

Exception Type: UnicodeEncodeError at /envia_activacion/
Exception Value: 'ascii' codec can't encode character u'\xf3' in position 37: ordinal not in range(128) 
```

我的代码是这样的：

```
plaintext = get_template('emailing/activacion.txt')
htmly = get_template('emailing/activacion.html') //html template with utf-8 charset
d = Context({
    'code': code,
    'version': sVersion,
    'activacion': activacion,
    'distribuidor': distribuidor,
    'contacto': contacto,
    'departamento': departamento,
    'empresa': empresa
             })

asunto = u'Código activación %s - V%s - Code: %s' % (nombre_destinatario, version, code)
text_content = plaintext.render(d)
html_content = htmly.render(d)

msg = EmailMultiAlternatives(asunto, text_content, remitente, para, [remitente], headers={'Reply-To': remitente})
msg.attach_alternative(html_content, "text/html")//This is what makes it fail

msg.send() 
```

这在 django 1.3 中有效，在 django 1.4 中不知道。

调试，我看到失败的文本是unicode：

```
> /usr/lib/python2.6/email/generator.py(178)_handle_text()
-> self._fp.write(payload)
(Pdb) s
UnicodeEncodeError: UnicodeE...ge(128)')
> /usr/lib/python2.6/email/generator.py(178)_handle_text()
-> self._fp.write(payload)
(Pdb) payload
u'Apreciado cliente, le indicamos los c\xf3digos necesarios ...' 
```

我正在使用 python 2.6.5。我已经查看了这张看起来几乎相同的票[https://code.djangoproject.com/ticket/19107](https://code.djangoproject.com/ticket/19107)但在 django 1.5 中该补丁已经存在并且我仍然收到此错误。

相关： [python中的unicode错误](https://stackoverflow.com/questions/7039975/unicode-error-in-python)

我真的很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:54:23.200

您的有效负载是一个`unicode`实例（请注意，Django 力求仅`unicode`在内部使用），而它应该是`str`实例。传递 a (最好是正确编码的) 是你的责任`str`。这很容易 FWIW：

```
# I assume you use utf-8 everywhere 
text_content = plaintext.render(d).encode("utf-8")
html_content = htmly.render(d).encode("utf-8") 
```

# javascript - 简单的逻辑 - 涉及 javascript

> ID：15831211
> 
> 赞同：1
> 
> 时间：2013-04-05T10:08:52.970
> 
> 标签：javascript, jquery, html, css

我不想要任何插件。我有 3 张图像，它们以 2 种不同的方式显示。

![在此处输入图像描述](https://i.stack.imgur.com/Io6ZA.png)

我想在每个中编写 onclick 函数`img`，这样当我单击小的时，它应该替换大的。我的愿景是这样的：

```
<img class="locationfoto" src="image-path">  <--- main foto 
<img class="locationfoto1" src="image-path-1" onclick="moveme(this)">
<img class="locationfoto2" src="image-path-2" onclick="moveme(this)"> 
```

我的js：

```
function moveme(me){
   // how can i do this?
} 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:10:11.710

好吧，您可以将显示的图像设置`locationfoto`为：

```
function moveme(me){
    $('.locationfoto').attr('src', me.src);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:12:46.343

```
function moveme(me)
{
   var imgsrc = me.src ;
   $('.locationfoto').attr('src', imgsrc)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:12:55.863

```
<style>
 table#thumbnails{
  background-color:white;
}
 table#thumbnails tr td img
{
cursor: pointer;
 }
</style>

<script type="text/javascript">
 function showImage(image){
var mainImage = document.getElementById('mainImage');
mainImage.src = image; 
}
function toggleThumbnails(){
var thumbnails = document.getElementById('thumbnails');
if(thumbnails.style.display == 'block'){
thumbnails.style.display = 'none'; 
 } else {
thumbnails.style.display = 'block'; 
}
} 
```

```
<input type="button" value="Show/hide thumbnail list" onclick="toggleThumbnails()" />
<table id="thumbnails" style="display:none;">
<tr>
<td><img src="thumb1.png" title="Item 1" onclick="showImage('img1.png')" /></td>
<td><img src="thumb2.png" title="Item 2" onclick="showImage('img2.png')" /></td>
<td><img src="thumb3.png" title="Item 3" onclick="showImage('img3.png')" /></td>
</tr>
<tr>
<td><img src="thumb4.png" title="Item 4" onclick="showImage('img4.png')" /></td>
<td><img src="thumb5.png" title="Item 5" onclick="showImage('img5.png')" /></td>
<td><img src="thumb6.png" title="Item 6" onclick="showImage('img6.png')" /></td>
</tr>
<tr>
<td><img src="thumb7.png" title="Item 7" onclick="showImage('img7.png')" /></td>
<td><img src="thumb8.png" title="Item 8" onclick="showImage('img8.png')" /></td>
<td><img src="thumb9.png" title="Item 9" onclick="showImage('img9.png')" /></td>
</tr>
</table>
<div>
<img id="mainImage" src="img1.png" /> 
</div> 
```

嗯，你提到的例子是在 Flash 中创建的，所以在 javascript 中获得类似的花哨外观并不容易。

但是在 javascript 中很容易获得类似的功能，但没有花哨的平滑过渡和花哨的工具提示外观等（这是可能的，但需要更多......）。通过单击缩略图显示图像的简单示例可能是这样的：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T10:18:04.807

一个不使用 jQuery 的例子。您需要为主照片指定一个 ID：

```
<body>
<img class="locationfoto" src="image-path" id="main">  <--- main foto 
<img class="locationfoto1" src="image-path-1" onclick="moveme(this)">
<img class="locationfoto2" src="image-path-2" onclick="moveme(this)">

<script>
function moveme(me) {
  document.getElementById('main').src = me.src;
}

</script>
</body> 
```

# css - CSS 设计：三个 div

> ID：15831216
> 
> 赞同：2
> 
> 时间：2013-04-05T10:09:04.280
> 
> 标签：css, html, background, footer

我想将“leftbox”“midbox”和“rightbox”div 并排排列。当我使用浮动：左，我的页脚到顶部。

任何人都可以帮助我，所以我可以让它们彼此相邻排列，而我的页脚仍然在下部。

任何人都想更改我的代码，使其尺寸变小。

这是我的代码。

```
<html>
<head>
<title>
XXX
</title>
</head>
<style>
body{
margin-top:0px;
margin-left:0px;
margin-right:0px;
margin-bottom:0px;
background-color:#dedede;
}
#header{
 background: none repeat scroll 0% 0% rgb(241, 241, 241);
    background-color: rgb(68, 68, 68);
    background-image: none;
    background-repeat: repeat;
    background-position: 0% 0%;
    background-size: auto auto;
    height: 31px;
    position:fixed;
    //position:relative;
    top: 0px;
    width: 100%;
    z-index: 985;
    min-width: 980px;
}
#header2{
 background: none repeat scroll 0% 0% rgb(241, 241, 241);
    background-color: rgb(241, 241, 241);
    background-image: none;
    background-repeat: repeat;
    background-size: auto auto;
    border-bottom: 1px solid rgb(221, 221, 221);
    border-bottom-width: 1px;
    border-bottom-style: solid;
    height: 71px;
    position:fixed;
    //position:relative;
    top: 31px;
    width: 100%;
    z-index: 985;
    min-width: 980px;
}
#wrapper{
position:relative;
width:980px;
height:auto;
margin:auto;
}
#logo{
position:absolute;
top:0px;
left:10px;
width:102px;
height:60px;
font:68px Blue Highway;
color:#01b5ce;
}
#logo:hover{
color:#aaaaaf;
}
#navigation{
position:absolute;
top:30px;
left:170px;
width:auto;
height:40px;
}
#navigation a{
position:relative;
top:20px;
width:auto;
height:30px;
font:18px Corbel;
margin-left:5px;
border-left:1px solid #dddddd;
text-decoration:none;
color:#aaaaaf;
}
#navigation a:hover{
color:#01b5ce;
}
#access{
position:absolute;
top:5px;
right:10px;
width:auto;
height:20px;
}
#access a{
position:relative;
text-decoration:none;
color:#01b5ce;
font:18px Corbel;
margin-left:10px;
}
#body{
position:relative;
top:100px;
width:980px;
height:auto;
margin:auto;
background-color:#ffffff;
}
    #leftbox{
    position:relative;
    top:10px;
    left:10px;
    width:160px;
    height:auto;
    background-color:red;
    }
    #ads{
    position:relative;
    top:10px;
    width:160px;
    height:auto;
    background-color:green;
    }
    #midbox{
    position:relative;
    top:10px;
    margin-top:10px;
    left:10px;
    width:500px;
    height:auto;
    background-color:red;
    }
    #latest{
    position:relative;
    top:10px;
    width:500px;
    height:auto;
    background-color:green;
    }
    #rightbox{
    position:relative;
    top:10px;
    margin-top:10px;
    left:10px;
    width:280px;
    height:auto;
    background-color:red;
    }
    #top{
    position:relative;
    top:10px;
    width:280px;
    height:auto;
    background-color:green;
    }
    .title{
    position:relative;
    width:100%;
    height:20px;
    background-color:yellow;
    font:20px WLM Carton;
    color:#cc0000;
    }

#footer{
 background: none repeat scroll 0% 0% #444444;
    background-color: #444444;
    background-image: none;
    background-repeat: repeat;
    background-position: 0% 0%;
    background-size: auto auto;
    height: 100px;
    position: relative;
    top: 105px;
    width: 100%;
    z-index: 985;
    min-width: 980px;
}
#footerContent{
    position:relative;
    top:10px;
    margin:auto;
    width:980px;
    height:80px;
    color:#ffffff;
    font: 12px Arial,tahoma;
}
#ads ul{ list-style:none; padding:0; margin:0; width:390px; height:auto;}
#ads ul li{ padding:5px; margin:0; width:390px; height:auto; float:left;}

#latest ul{ list-style:none; padding:0; margin:0; width:390px; height:auto;}
#latest ul li{ padding:5px; margin:0; width:390px; height:auto; float:left;}
#latest #wrapper{width:490px; height:auto; float:left; color: #7a7a7a;text-align: left; font-family:Arial, Helvetica, sans-serif; font-size:12px;}
#latest #date{background-color:#f3f3f3; border-top:1px solid #b6b6b6; border-left:1px solid #b6b6b6; border-right:1px solid #b6b6b6; border-bottom:1px solid #b6b6b6; width:70px; height:60px; float:left;}
#latest #content{ float:left; width: 405px; height:auto; margin: 0 0 0 10px;}

#top ul{ list-style:none; padding:0; margin:0; width:390px; height:auto;}
#top ul li{ padding:5px; margin:0; width:390px; height:auto; float:left;}
</style>
<body>
<div id=header>
    <div id=wrapper>
        <div id=access>
            <a href=''>Register</a>
            <a href=''>Login</a>
        </div>
    </div>
</div>
<div id=header2>
    <div id=wrapper>
        <div id=logo>
            <b><font color='#aaaaaf'>X</font>XXX</b>
        </div>
        <div id=navigation>
            <a href=''>&nbsp;X</a>
            <a href=''>&nbsp;X</a>
            <a href=''>&nbsp;X</a>
            <a href=''>&nbsp;X</a>
            <a href=''>&nbsp;X</a>
        </div>
    </div>
</div>
<div id=body>
    <div id=leftbox>
        <div id=ads>
            <div class=title>
            ADS
            </div>
            <ul>
                <li><a href=''><img src='' width=160 height=180></a></li>
                <li><a href=''><img src='' width=160 height=180></a></li>
                <li><a href=''><img src='' width=160 height=180></a></li>
            </ul>
        </div>
    </div>
    <div id=midbox>
        <div id=latest>
            <div class=title>
            Latest Album
            </div>
            <ul>
                <li>
                    <div id='wrapper'>
                        <div id='date'>
                            <div class=month><b>JAN</b></div>
                            <div class=day>01 2013</div>
                        </div>
                        <div id='content'>
                            <b>Happy New Year!</b>
                            <br>
                            Wishing you all the blessings of the New Year...the warmth of home, the love of family and the company of good friends.
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div id=rightbox>
        <div id=top>
            <div class=title>
            Featured DJs
            </div>
            <ul>
            </ul>
        </div>
    </div>
    &nbsp;
</div>
<div id=footer>
    <div id=footerContent>
        <center>
        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

        <br><br>
        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
        </center>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:12:31.877

一个很常见的问题我的朋友！

当我们浮动元素时，父元素很难跟踪它们的高度。为了让父元素知道它的子元素高度，我们附加了一个“clearfix”。

**CSS**

```
.clear { clear: both; } 
```

然后，将该元素附加到浮动元素的同一级别。

**HTML**

```
<div id="parent">
    <div id="left"></div>
    <div id="center"></div>
    <div id="right"></div>

    <!-- lets clear this shizzle -->
    <div class="clear"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:15:36.017

只需添加：

`#footer{ clear: both; }`

一切都将是笨拙的；无需添加 [非语义] 更清晰的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:17:28.570

工作小提琴：

[http://jsfiddle.net/eBH9M/3/](http://jsfiddle.net/eBH9M/3/)

HTML：

```
<div id="wrapper">
    <div id="left">

    </div>
    <div id="center">

    </div>
    <div id="right"></div>
    <div class="clear"></div>
</div> 
```

CSS：

```
#left, #right, #center{

    float: left;
    height: 50px;
    width: 30%;
}

.clear{
    clear: both;
}

#footer{
    width: 100%;
    height: 40px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T08:44:56.970

如果您阅读这篇关于流控制的 w3 文章，它将帮助您理解为什么触发元素位置以及为什么[http://www.w3.org/TR/CSS2/visuren.html#flow-control](http://www.w3.org/TR/CSS2/visuren.html#flow-control)。

在文档中添加元素会对流程产生影响，尤其是在调整屏幕大小、旋转等时。

只需将**style="clear:both"**内联添加到您的页脚

# c# - 比较和验证两个字符串

> ID：15831222
> 
> 赞同：1
> 
> 时间：2013-04-05T10:09:20.273
> 
> 标签：c#, string, validation

```
// A = Alphabetic, X = Alphanumeric, N = Numeric character

string strForMatching = "AAAAXXXX-NNNN-AA";

string[] strToBeValidated = new string[]
{
    "333TEST",
    "TEST4444-1234-AB",
    "ABCD12AB-1234-99",
    "ABCD2345-1234-AB",
    "PPP12AA-9876"
}; 
```

通过`for`循环，我将字符串数组中的每个字符串传递给此方法

```
public bool ValidateString(string strForMatching, string strToBeValidated)
{
    bool isValid = false;

    // what to put here?

    return isValid;
} 
```

我想`strToBeValidated`用`strForMatching`.

这意味着：

*   `333TEST`无效
*   `ABCD2345-1234-AB`已验证
*   `PPP12AA-9876`已验证
*   `PPPPP12AX-1234-AB`无效。

任何价值都应该与`strForMatching`. 我还需要验证分隔符。

我不能使用正则表达式，因为我有`AAAAXXX-NNNN-AA`，在我的情况下，1 到 4 个字母是可以的，但超过 4 个字母与 X 和 N 一样无效，并且可以单独更改它可以是`/ or # or @`任何东西。如果我将使用正则表达式，那么它将检查直到固定长度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:18:27.890

此正则表达式似乎按预期工作

```
string[] strTobeValidate = new string[] {"333TEST", "TEST4444-1234-AB", "ABCD12AB-1234-99", "ABCD2345-1234-AB", "PPP12AA-9876" };
Regex r = new Regex(@"[A-Za-z]{4}[A-Za-z0-9]{4}-[0-9]{4}-[A-Za-z]{2}");
foreach(string s in strTobeValidate)
{
    Match m = r.Match(s);
    if(m.Success == false)
        Console.WriteLine("No match for: " + s);
    else
        Console.WriteLine(m.ToString());

} 
```

**意义：**

*   第一组四个字符`{4}`应在 AZ（大写）或 az（小写）范围内
*   第二组四个字符应该和以前一样，但也可以包含数字 0-9
*   后面会出现一个减号
*   第三组四个字符只是数字
*   后面会出现一个减号
*   第四组 2 个字符只是字母字符

现在将 Regex 模式应用于您的输入字符串，您会发现仅匹配第二个和第四个字符串。

查看评论，我尝试构建一个简单的模式构建器。

```
string BuildPattern(string h)
{
    StringBuilder sb = new StringBuilder();
    string curPattern = "";
    char curChar = ' ';
    int cnt = 0;
    foreach(Char c in h)
    {
        if(c != curChar && cnt != 0)
        {
            sb.Append(curPattern);
            sb.Append("{" + cnt.ToString() + "}");
            cnt = 0;
            curPattern = "";
        }
        curChar = c;
        switch(c)
        {
            case 'A':
                curPattern = "[A-Za-z]";
                cnt++;
                break;
            case 'X':
                curPattern = "[A-Za-z0-9]";
                cnt++;
                break;
            case 'N':
                curPattern = "[0-9]";
                cnt++;
                break;
            default:
                sb.Append(c);
                break;
        }
    }
    sb.Append(curPattern);
    sb.Append("{" + cnt.ToString() + "}");
    return sb.ToString();
} 
```

并用这个更改准备正则表达式模式的代码：

```
string strForMatching = "AAAANNAA-NNNN-NN";
string pattern = BuildPattern(strForMatching);
// Fixed -> Regex r = new Regex(@"[A-Za-z]{4}[A-Za-z0-9]{4}-[0-9]{4}-[A-Za-z]{2}");
// Dynamic pattern 
Regex r = new Regex(pattern); 
```

然而，这需要更广泛地测试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:59:11.737

如果您希望它是动态构建的，那么我将完全避免使用正则表达式。构建一些对象来为您完成工作。

首先是一个非常简单的类，用于通过任意匹配检查来验证单个字符：

```
public class Matcher
{
    public char Flag { get; private set; }
    private readonly Predicate<char> Checker;

    public Matcher(char flag, Predicate<char> checker)
    {
        this.Flag = flag;
        this.Checker = checker;
    }

    public bool DoesMatch(char character)
    {
        return Checker(character);
    }
} 
```

然后是一些完成繁重工作的验证类：

```
public class StringValidator
{
    private Dictionary<char, Matcher> Matchers = new Dictionary<char, Matcher>();

    public StringValidator()
    {
        Matchers = new[]{
            new Matcher('A', c => Char.IsLetter(c)),
            new Matcher('N', c => Char.IsDigit(c)),
            new Matcher('X', c => Char.IsLetter(c) || Char.IsDigit(c)),
            new Matcher('-', c => c == '-')}
            .ToDictionary(m => m.Flag);
    }

    public bool ValidateString(string strForMatching, string strTobeValidated)
    {
        if (strForMatching.Length != strTobeValidated.Length)
            return false;

        for(int i = 0; i < strTobeValidated.Length; i++)
        {
            Matcher matcher = GetMatcher(strForMatching[i]);

            if (!matcher.DoesMatch(strTobeValidated[i]))
                return false;
        }

        return true;
    }

    private Matcher GetMatcher(char flag)
    {
        Matcher matcher;

        if(!Matchers.TryGetValue(flag, out matcher))
            throw new IndexOutOfRangeException(String.Format("No matcher for character '{0}'", flag));

        return matcher;
    }
} 
```

现在，您如何选择创建匹配例程或组织它们，或者它们的标志取决于您。在这种情况下，`StringValidator`它的规则是“硬编码的”，但您可以更改它以通过构造函数将它们传递或通过公共方法进行更改。

此外，我使用的规则[`Char.IsLetter`](http://msdn.microsoft.com/en-us/library/yyxz6h5w.aspx)有点[`Char.IsDigit`](http://msdn.microsoft.com/en-us/library/7f0ddtxh.aspx)超出简单的“AZ”和“0-9”，但应该足以证明它是如何工作的。如果您愿意，请随意用正则表达式或其他检查替换这些特定检查。

此外，您的示例规则/输出似乎不正确（例如，我希望“PPP12AA-9876”与“AAAAXXXX-NNNN-AA”*不*匹配）。这当前检查长度是否匹配，但您可以摆脱它。如果匹配模式比要验证的输入短（反之亦然），我对此并不肯定，所以我将根据您的确切要求将其留给您作为练习。

一些示例用法：

```
string[] stringsToValidate = new string[] { 
                                       "333TEST",
                                       "TEST4444-1234-AB",
                                       "ABCD12AB-1234-99",
                                       "ABCD2345-1234-AB",
                                       "PPP12AA-9876"
                                   };
string strForMatching = "AAAAXXXX-NNNN-AA";

var validator = new StringValidator();

foreach(var strToValidate in stringsToValidate)
{
    bool isValid = validator.ValidateString(strForMatching, strToValidate);
    Console.WriteLine(strToValidate + ": " + isValid);
} 
```

输出：

> 333TEST：错误
> TEST4444-1234-AB：正确
> ABCD12AB-1234-99：错误
> ABCD2345-1234-AB：正确
> PPP12AA-9876：错误

# php - 使用 CakePHP 2.3.1 的自定义分页路由

> ID：15831223
> 
> 赞同：2
> 
> 时间：2013-04-05T10:09:23.253
> 
> 标签：php, cakephp, cakephp-2.0

我正在使用 cakephp 2.3.1，但 Paginator 组件有问题。

我的目标是这样的页面：

```
example.com/abruzzo
example.com/abruzzo/2
example.com/abruzzo/3 
```

我创建了以下路线：

```
Router::connect('/:regione/:page', array('controller'=>'regions','action'=>'home'), array('page' =>'[0-9]+'));
Router::connect('/:regione', array('controller' => 'regions', 'action' => 'home')); 
```

（如您所见，第一条路线工作处理**页面**参数）

**现在，为了正确处理页面参数，我在 RegionsController 的beforeFilter**中添加了以下行。

```
public function beforeFilter()
{        
    $this->request->params['named']['page'] = (isset($this->request->params['page'])) ? $this->request->params['page'] : 1;
} 
```

因为我阅读了 Paginator 组件会直接查看广告 ['named']['page'] 而不是 ['page'] 。

**第一个问题：**

它是否正确？我真的需要 beforeFilter() 中的这个技巧吗？

* * *

然后，我需要使用以下方法显示页面编号：

```
<?php echo $this->Paginator->numbers(); ?> 
```

这里的问题是在链接上创建的 URL 是错误的。他们指向：

```
example.com/regions/home/page:2
example.com/regions/home/page:3
etc... 
```

我**不需要这样**的 URL，我需要：

```
example.com/abruzzo
example.com/abruzzo/2
example.com/abruzzo/3 
```

**第二个问题：**

如何强制使用我想要的 url 而不是 controller/action/page:N 格式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:18:01.453

这可能是[重复](https://stackoverflow.com/questions/1078558/cakephp-pagination-how-to-remove-page-from-url-for-better-seo-cleaner-url)的。

但是，回答你的第一个问题：这取决于。如果您确定您的 url 不会接收更多参数，那么您的路由可能更像

```
Router::connect('/:regione/*', array('controller'=>'regions','action'=>'home')); 
```

并在“家”动作中做

```
public function home($pageOption=null) {
    if (is_numeric($option)) {
        $this->passedArgs['page'] = $pageOption;
    }
    $items = $this->paginate('Home');
    ...
} 
```

我认为 beforeFilter 选项更好，因为它是可重用的，并且可以让您更好地组织参数。

现在，帮助其他类似问题（以及您的第二个问题）的文章恢复到此

在 home.ctp 视图中（或任何你喜欢的）

```
$prev_link = str_replace('page:', '', $this->Paginator->prev('« Prev'));
$prev_link = preg_replace('/\/1"/', '"', $prev_link);
$next_link = str_replace('page:', '', $this->Paginatornext('Next »'));
echo $prev_link;
echo $next_link; 
```

所以，而不是通常的

```
echo $this->Paginator->prev('< Prev');
echo $this->Paginator->numbers();
echo $this->Paginator->next('Next >'); 
```

您必须手动替换 url 的“page:”部分，然后回显它。

当然，您可以随时修改 PaginationHelper，但我不建议这样做，因为每次更新蛋糕时，您都必须检查 PaginationHelper 是否已更改，然后重新调整它。

如果您不清楚某些事情，请阅读有关其他问题的文章希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T13:12:09.213

我想这就是你要找的

[https://github.com/hashmode/Cakephp-Beauty-Paginator](https://github.com/hashmode/Cakephp-Beauty-Paginator)

# javascript - 在 for 循环中设置自定义 JSON 对象名称

> ID：15831235
> 
> 赞同：1
> 
> 时间：2013-04-05T10:10:14.553
> 
> 标签：javascript

如何在 for 循环中设置自定义 JSON 对象名称。

```
var myArray = [];

for (var i = 0; i<= 8; i++){

    var x = "name" + i;

    myArray.push({x:[0,0,0]});

} 
```

我要这个

```
myArray = [
            {name0:[0,0,0]},
            {name1:[0,0,0]},
            {name2:[0,0,0]},
            {name3:[0,0,0]},
            {name4:[0,0,0]},
            {name5:[0,0,0]},
            {name6:[0,0,0]},
            {name7:[0,0,0]},
            {name8:[0,0,0]},
            ]; 
```

但它返回这个

```
myArray = [
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            {x:[0,0,0]},
            ]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:12:40.540

括号符号：

```
for (var i = 0; i<= 8; i++){
  var obj = {};
  obj['name'+ i] = [0,0,0];
  myArray.push(obj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:12:21.140

要将变量用作对象中的键，您应该使用括号表示法：

```
var myArray = [];

for (var i = 0; i<= 8; i++){

    var x   = "name" + i,
        obj = {};

    obj[x] = [0,0,0];

    myArray.push(obj);

} 
```

# c# - MVC JsonResult 更新进度

> ID：15831237
> 
> 赞同：2
> 
> 时间：2013-04-05T10:10:19.340
> 
> 标签：c#, jquery, asp.net-mvc

MVC 4 Web 应用程序、JQuery

我想展示一个冗长程序的进度。

以下是从 JSON 调用的，这需要几秒钟......

基本上，我想做的是：

```
[HttpPost]
public JsonResult Update(var x)
{
    return Json(new { Result = "Working", Message = "Waiting on Server" });
    var y = contactAnotherServer(x);
    return Json(new { Result = "Working", Message = "Crunching Data" });
    var finished = doSomethingWithData(y);
    return Json(new { Result = "OK", Message = "Done" });
} 
```

显然，这将在第一个返回语句处终止。

这将如何完成？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:20:05.457

要像这样“自己动手”，您需要三个单独的 JsonResult 方法和一个相当复杂的 javascript 函数。IE：

*控制器*

```
public JsonResult Step1()
{
    return Json(new { Result = "Working", Message = "Waiting on Server" });
}
public JsonResult Step2()
{
    return Json(new { Result = "Working", Message = "Crunching data" });
}
public JsonResult Step3()
{
    return Json(new { Result = "Ok", Message = "Done" });
} 
```

*JS*

```
// urls
var urls = ["/step1","/step2","/step3"];

// counter
var counter = 0;

// recursive method
var fetchAndUpdateRecursive(url){

   // get data
   $.ajax(url, {
        async: false,
        success: function(r){

              // use r to update something visually
              // then...

              // change the url
              counter++;
              url = urls[counter];

              // go again
              fetchAndUpdateRecursive(url);
        };
   });
};

// go
var urlToStartWith = urls[counter];
fetchAndUpdateRecursive(urlToStartWith); 
```

# ajax - 故障转移后不重新呈现 JSF 页面

> ID：15831241
> 
> 赞同：1
> 
> 时间：2013-04-05T10:10:30.240
> 
> 标签：ajax, richfaces, cluster-computing, jsf-1.2, failover

当我们的应用程序部署在集群中时，我们的应用程序有一点问题。在我们关闭工作节点后，会话在另一个节点上恢复并且应用程序继续工作，但我们需要完全刷新页面或移动到另一个页面，因为服务器关闭时打开的页面不想正常工作。它仍然发送请求，调用托管 bean 的方法并且所有数据都是正确的，但是在 AJAX 请求之后它不想重新呈现其部分。所以我们在页面上唯一能做的就是点击一个链接并移动到另一个页面，因为在这种情况下我们有 GET 请求。如何解决？

# php - 想要获得文本框的价值

> ID：15831243
> 
> 赞同：0
> 
> 时间：2013-04-05T10:10:35.390
> 
> 标签：php, textbox

我想做的是，

我有一个代码，它通过 ajax 在按钮单击事件上生成 2 个文本框，其次数与按钮单击次数一样多。所以在单击提交按钮时，我如何识别每个文本框的文本框和 getvalue。

所以我想为每个文本框提供动态名称。在表单提交上我想获取每个文本框的值。

我能做这样的事吗

```
<input type="text" name="fname[]" value="Hello" />
<input type="text" name="fname[]" value="World" /> 
```

并在提交时获得价值

```
<?php
if(isset($_POST['txtfname[]'])){
    echo $_POST['txtfname[0]'];

}
?> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:15:17.860

值在`$_POST['fname']`-array 中。

意义：

`$_POST['fname'][0]`--> “你好”

`$_POST['fname'][1]`--> “世界”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:15:10.463

在按照您所说的通过ajax创建文本框时，按照您所说的将新创建的按钮的名称作为数组提供。提交表单后，如果您`print_r($_POST)`可以看到包含提交的元素的所有值的已发布数组形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:15:58.633

这可能是可能的，但以下可能是更好的方法。如果您生成每个输入，因此它们的名称采用以下格式：数字`<input type="text" name="fname_0" value="value" />`在哪里`0`，然后您可以使用此代码循环遍历每个输入并回显该值：

```
$prefix = "fname_";
foreach ($_POST as $post) {
    if (strncmp($post, $prefix, strlen($prefix))) {
        echo $post;
    }
} 
```

**编辑**
或者，如果您将输入格式化为`<input type="text" name="fname" value="value" />`，它们将可以`$_POST['fname']`作为数组访问，因此您可以像这样回显每个输入（在您的 PHP 代码中）：

```
foreach ($_POST['fname'] as $fname) {
    echo $fname;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:20:47.603

在您的每个元素的 HTML 中放置

```
<input type="text" name="fname[]" value="value" /> 
```

`value`每个文本框的值在哪里。这会将每个文本框的所有值放在一个数组中。在转储所有输入值的代码中，您可以输入：

```
<?php
if(isset($_POST['fname'])){
    $array =  $_POST['fname'];
    var_dump($array)

}
?> 
```

# php - PHP PDO ODBC 连接

> ID：15831246
> 
> 赞同：5
> 
> 时间：2013-04-05T10:10:43.473
> 
> 标签：php, pdo, odbc, qlikview

我们正在尝试通过 PHP 中的 ODBC 创建与我们的 SQL 数据库的连接。

这是我们当前的脚本：

```
$cnx = new PDO("odbc:Driver={EFR};Server=localhost;Port:7004;Database=EFR;Uid=LcLfVJFLTKTCEHRO;Pwd=*********;"); 
```

该驱动程序在 Qlikview 中工作，该 Qlikview 也连接到该数据库。

该驱动程序实际上是由 PHP 找到的，但我们认为它无法登录。

PHP 返回以下错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[IM001] SQLDriverConnect: 0 No transaction control system' in C:\Program Files (x86)\EasyPHP-12.1\www\index.php:2
Stack trace:
#0 C:\Program Files (x86)\EasyPHP-12.1\www\index.php(2): PDO->__construct('odbc:Driver={EF...')
#1 {main} thrown in C:\Program Files (x86)\EasyPHP-12.1\www\index.php on line 2 
```

我们希望有人可以帮助我们解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-08T07:03:24.633

如果您已经定义了 ODBC 并存储了密码，则可以简单地连接

```
$conn = new PDO("odbc:DSN_NAME") 
```

其中 DSN_NAME 是 ODBC 数据源的实际名称，可以是 MySQL、SQL Server 或 DB2。

您可以使用以下方法测试您的连接：

```
try{
    $conn = new PDO ("odbc:DSN_NAME");

    die(json_encode(array('outcome' => true)));
}
catch(PDOException $ex){
     die(json_encode(array('outcome' => false, 'message' => 'Unable to connect')));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-02T11:24:19.130

尝试在系统而不是用户上添加 DSN

# android - 如果单击并且按钮是在 xml 中制作的，如何将焦点设置在按钮上

> ID：15831250
> 
> 赞同：0
> 
> 时间：2013-04-05T10:11:03.840
> 
> 标签：android

我创建了 3 个按钮，我想更改用户使用编码单击的那个按钮的焦点，有什么办法吗？

我看过这些链接

**[链接1](https://stackoverflow.com/questions/9750097/how-can-a-button-get-the-focus)**

**[链接2](https://stackoverflow.com/questions/4680065/android-set-clicked-focus-on-button)**

但是我想知道的是，当我创建这 3 个按钮的实例时，我只想要当时单击的焦点，并且我想更改我使用编码定义的单击时的焦点颜色？谁能告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:18:26.733

```
 final Button button = (Button) findViewById(R.id.button_id);
     button.setFocusable(true);
      button.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub

        }
    }); 
```

试试这个示例代码

# iphone - 如何为 CCSprite 应用动画

> ID：15831257
> 
> 赞同：0
> 
> 时间：2013-04-05T10:11:10.730
> 
> 标签：iphone, cocos2d-iphone, game-physics, ccsprite

我刚开始一个 cocos2d 游戏。在那检查碰撞，如果发生碰撞，使用以下代码创建动画。动画代码被调用但没有显示任何动画。这是什么错误。请帮我解决。

```
-(void)check_collision:(ccTime)dt
{
  for(PolygonSprite *sprite in _cache)
  {
    if(CGRectIntersectsRect(sprite.boundingBox,monkey.boundingBox))
    {
      if(sprite != monkey)
      {
      NSLog(@"collision collision collision.......%@",sprite);
      id s2 = [CCScaleTo actionWithDuration:0.5 scaleX:1.5 scaleY:1.5];
      id fun = [CCCallFuncN actionWithTarget:self selector:@selector(spriteDone:)];
      [sprite runAction:[CCSequence actions:s2,fun,nil]];
      [self unschedule:@selector(check_collision:)];
    }
  }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:29:09.940

尝试这个，

```
[self schedule:@selector(check_collision:)interval:1];

-(void) check_collision: (ccTime) t
{
   for(PolygonSprite *sprite in _cache)
   {
       if(CGRectIntersectsRect(sprite.boundingBox,monkey.boundingBox))
       {
           if(sprite != monkey)
           {
               id s2 = [CCScaleTo actionWithDuration:0.1 scaleX:2 scaleY:2];
               id fun = [CCCallFuncN actionWithTarget:self  selector:@selector(spriteDone)];
               [car.sprite runAction:[CCSequence actions:s2,fun,nil]];
               [self unschedule:@selector(check_collision:)];
           }
       }
    }
}

-(void) spriteDone
{
    // Function logic goes here..
} 
```

希望这有帮助..谢谢

# ios - 在 Objective C 中禁用键值观察

> ID：15831258
> 
> 赞同：2
> 
> 时间：2013-04-05T10:11:14.167
> 
> 标签：ios, objective-c, performance, key-value-observing

我不使用 KVO，主要是出于性能原因，所以我想确保我正确禁用它。

来自 Apple Key-Value Observing Programming Guide

> 自动支持（针对 KVO）由 NSObject 提供，默认情况下可用于符合键值编码的类的所有属性。通常，如果您遵循标准的 Cocoa 编码和命名约定，您可以使用自动更改通知——您不必编写任何额外的代码。

这是否意味着 Xcode 生成的每个属性都实现`willChangeValueForKey`了`didChangeValueForKey`方法？

如果是这样，是否有某种方法（某些标志或其他东西）可以禁用此行为？我一直在使用`accessInstanceVariablesDirectly`并返回 NO，但我不确定这是否足够好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T10:26:44.233

> 我不使用KVO。

你不能真正知道这一点。Cocoa 框架类或其他外部代码可能在您不知情的情况下依赖于 KVO。

此外，NSObject 的 KVO 使用一种称为 isa-swizzling 的技术，通过动态地对观察到的对象进行子类化来自动增强观察到的对象。这意味着没有观察到的对象没有开销。

您的其他问题：

`accessInstanceVariablesDirectly`仅在 KVC 中使用，与 KVO 无关。覆盖它没有性能优势。

> 这是否意味着 Xcode 生成的每个属性都 实现`willChangeValueForKey`了`didChangeValueForKey`方法？

是的，每个*对象*都会响应这些方法。但是这些方法的存在并不意味着性能会受到任何影响。通常甚至不调用这些方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:20:48.317

**简而言之：**

通常，您在从外部访问对象时使用属性。然后，性能不应该是至关重要的，因为您可能没有执行繁重的工作。如果 KVO 是一个问题，您可能需要检查您的应用程序的设计。从对象本身来说，最好直接访问ivars，这种情况下KVO是无关紧要的。

**更多细节：**

最近在苹果邮件列表中讨论了这个话题：
[何时使用属性与 ivars](http://lists.apple.com/archives/objc-language/2013/Mar/msg00137.html)

特别是 Jens Alfke（前苹果员工）的回答：

> *   作为类的公共 API 的一部分。
> *   作为类实现中的抽象
> *   作为更改实例变量的便捷瓶颈——例如，如果您想在每次更改变量时触发其他内容，则将其设置为属性而不是直接写入 ivar 会很有用。
> *   在非 ARC 代码中，当您分配新值时，它可能是一种管理保留/释放舞蹈的便捷方式（但这个问题随着 ARC 而消失。）
> 
> 我见过只为所有内部状态声明和使用属性的代码——我认为这是个坏主意。这真的很浪费 CPU 时间和代码大小，而且现在我们有了 ARC，它不再给你买任何东西了。

另外，请注意，除了 KVO 之外，还有其他性能问题。John McCall（现任 Apple 员工）表示：

> 属性以多种方式影响性能：
> 
> 1.  正如已经讨论过的，发送消息来执行加载/存储比仅执行加载/存储内联要慢。
> 2.  发送消息进行加载/存储也需要在 i-cache 中保留更多代码：即使 getter/setter 除了加载/存储之外添加了零个额外指令，也会有一半- 调用者中的十几个额外指令来设置消息发送和处理结果。
> 3.  发送消息会强制将该选择器的条目保留在方法缓存中，并且该内存通常保留在 d-cache 中。这会增加启动时间，增加应用程序的静态内存使用量，并使上下文切换更加痛苦。由于方法缓存特定于对象的动态类，因此在其上使用 KVO 的次数越多，这个问题就越严重。
> 4.  发送消息会强制函数中的所有值溢出到堆栈中（或保存在被调用者保存寄存器中，这只是意味着在不同的时间溢出）。
> 5.  发送消息可能会产生任意副作用，因此会强制编译器重置其关于非本地内存的所有假设。
> 6.  消息发送可以有任意的副作用，因此不能被提升、沉没、重新排序、合并或消除。
> 7.  在 ARC 中，消息发送的结果将始终由被调用者或调用者保留，即使是 +0 返回：即使该方法不保留/自动释放其结果，调用者也不知道并且有尝试采取措施防止结果自动释放。这永远无法消除，因为消息发送不是静态可分析的。
> 8.  在 ARC 中，由于 setter 方法通常将其参数设为 +0，因此无法将该对象的保留（如上所述，ARC 通常具有）“转移”到 ivar，因此该值通常必须得到保留/释放两次。
> 
> 当然，这并不意味着它们总是不好的——使用属性有很多好的理由。请记住，与许多其他语言功能一样，它们不是免费的。

除了 KVO，在设计应用程序时还要考虑这些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T10:15:26.970

> 这是否意味着 Xcode 生成的每个属性都实现了 willChangeValueForKey 和 didChangeValueForKey 方法？

不。除了属性不是由 Xcode 而是由编译器生成的事实之外，这意味着传统命名的属性在默认情况下是自动可观察的，并且您**可以**在需要时实现 KVO 方法**。**这并不意味着每次设置属性时，都会调用跨类的各种方法。只有您指定的那些。

所以，基本上，不用担心这个。仅 KVO 不会对性能产生影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T10:14:26.577

我认为这不会以任何方式影响性能。因此，如果您不想使用 KVO，可以忽略它。

`addObserver`仅当您用于观察 KV 变化时，观察才会开始并因此使用资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-24T14:21:25.247

你可以看看`+ (BOOL)automaticallyNotifiesObserversForKey:(NSString *)key`。它是一个类方法，而不是实例，它将配置一个类型的所有对象。

除了您的要求之外，这在您需要手动 KVO 而不是自动 KVO 时很有用。

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/#//apple_ref/occ/clm/NSObject/automaticallyNotifiesObserversForKey](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/#//apple_ref/occ/clm/NSObject/automaticallyNotifiesObserversForKey)：

# ios - UIViewController 在其视图关闭之前释放

> ID：15831260
> 
> 赞同：0
> 
> 时间：2013-04-05T10:11:20.723
> 
> 标签：ios, objective-c, uiviewcontroller

我正在开发一个带有最新 SDK 并使用**ARC**的 iOS 应用程序。

我这样做是为了显示`UIViewController`：

```
- (IBAction)showMyObjectsMenu:(id)sender
{
    MyObjectsMenuViewController* myObjectsController = [[MyObjectsMenuViewController alloc] initWithNibName:@"MyObjectsMenuViewController" bundle:nil];

    [self.view addSubview:myObjectsController.view];
} 
```

但这是错误的，因为`myObjectsController`是在方法中释放的`- (IBAction)showMyObjectsMenu:(id)sender`。

**我该怎么做才能以`viewcontroller`正确的方式显示？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:12:58.067

要么将控制器添加为子视图控制器（iOS 5.0+），要么将其存储在某个实例变量中。与需要更长存储时间的任何其他变量相同。

# video-streaming - 如何实现流畅的流式传输？

> ID：15831262
> 
> 赞同：1
> 
> 时间：2013-04-05T10:11:21.777
> 
> 标签：video-streaming, google-tv

我阅读了[https://developers.google.com/tv/android/articles/hls?hl=en](https://developers.google.com/tv/android/articles/hls?hl=en)并不清楚“**自适应流媒体 - 自动适应拥塞或带宽可用性**。”是什么意思？它仅在播放器启动时有效，还是在玩时也有效？

在我的练习中，视频从当前带宽的质量开始；例如 .m3u8 文件包含链接和带宽列表：

```
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1950000
http://link1.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1500000
http://link2.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1200000
http://link3.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=950000
http://link4.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=800000
http://link5.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=700000
http://link6.M3U8 
```

例如，我当前的带宽为 1600000，播放器 (VideoView) 开始播放来自链接 2 的视频。在播放时，我的带宽变为 900000，但播放器仍继续播放来自链接 2 的视频，但有缓冲延迟。

**播放器是否正常工作，或者他应该切换到链接 5？**

**如果正确，我可以在不重新启动视频的情况下以某种方式切换视频链接吗？**

谢谢！

**更新：** 测试设备 Logitech Reveue，android 3.2。视频播放器 - VideoView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:03:05.937

首先 - 您展示的清单是 HLS aka [HTTP Live Streaming](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)而不是 Microsoft 的[SmoothStreaming](http://www.iis.net/downloads/microsoft/smooth-streaming)。

HLS 中的每个段通常为 10 秒。

您没有提及您的播放器是什么，但我认为它是 GoogleTV，因为这是您标记问题的内容。不同的玩家表现不同，但基本思想是相同的。播放器测量获得每个段所需的时间，如果及时，它往往会保持不变，如果花费的时间太长，它将尝试选择一个带宽，它可以在需要之前获得一两个段玩它。如果您看到缓冲延迟，那是一个错误。您应该能够在日志文件中查看播放器在播放内容时正在做什么，以及为什么它没有切换到不同的带宽。

# java - 升级 App Engine Java SDK 后无法打开写入通道

> ID：15831263
> 
> 赞同：0
> 
> 时间：2013-04-05T10:11:22.073
> 
> 标签：java, google-app-engine, playframework, google-cloud-datastore, playframework-1.x

我正在尝试升级我们用于 Play 的 App Engine SDK 版本！从 1.6.0 到 1.7.6 的 Web 应用程序。

升级后，我们不再能够将文件写入本地开发服务器的 blobstore。我们使用下面的代码来写一个文件：

```
Image img = ImagesServiceFactory.makeImage(uploadedData);

FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.createNewBlobFile("image/png", "__initial_data/" + vf.getName());

FileWriteChannel writeChannel = fileService.openWriteChannel(file, true);
OutputStream output = Channels.newOutputStream(writeChannel); 
```

调用`fileService.openWriteChannel`失败并显示以下堆栈跟踪：

```
Caused by: java.lang.NullPointerException
    at com.google.appengine.tools.development.RequestEndListenerHelper.register(RequestEndListenerHelper.java:39)
    at com.google.appengine.api.files.dev.LocalFileService.open(LocalFileService.java:247)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:527)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:481)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:458)
    at java.util.concurrent.Executors$PrivilegedCallable$1.run(Executors.java:461)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.concurrent.Executors$PrivilegedCallable.call(Executors.java:458)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

虽然 App Engine 的 SDK 是开源的，但我无法找到这些开发特定类的源文件来了解内部发生的情况。

有谁知道自 1.6.0 版以来将对象写入 blobstore 的实现细节是否发生了变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:48:10.683

原来这是一场戏！具体问题。play-gae 模块为 App Engine 实现了它自己的 LocalServerEnvironment，称为`PlayDevEnvironment`. 这包含一个获取属性列表的方法。在 App Engine 版本 1.6.0 和 1.7.7 之间进行了更改，需要返回额外的属性。我们通过如下更改该类来解决它：

```
public class PlayDevEnvironment implements Environment, LocalServerEnvironment {

    ...

    @Override
    public Map<String, Object> getAttributes() {
        HashMap<String, Object> hashMap = new HashMap<String, Object>();
        hashMap.put(LocalEnvironment.REQUEST_END_LISTENERS, new ArrayList<RequestEndListener>());
        return hashMap;
    }
} 
```

# java - Jboss抛出IllegalStateException

> ID：15831265
> 
> 赞同：-3
> 
> 时间：2013-04-05T10:11:41.277
> 
> 标签：java, jakarta-ee, servlets, jboss

我正在尝试通过本地启动 Web 应用程序。我有一个单独的战争来生成 PDF。当我点击我的应用程序并尝试为我的应用程序信息创建报告的 PDF 时，当操作从我的应用程序战争转发到 PDF 生成器战争时，我收到了错误：

`SEVERE: Servlet.service() for servlet livexpactionservlet threw exception java.lang.IllegalStateException`

因此，一切都失败了。我正在使用 jboss.4.0.3

JDK 1.5.0_22

请让我知道如何进行

我添加了整个异常堆栈：

```
SEVERE: Invalid path /jsp/errors/notAuthorized.jsp?nonSecure=true was requested
13:53:58,440 INFO  [STDOUT] Apr 5, 2013 1:53:58 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet livexpactionservlet threw exception
java.lang.IllegalStateException
        at org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:423)
        at javax.servlet.http.HttpServletResponseWrapper.sendRedirect(HttpServletResponseWrapper.java:125)
        at livexp.ui.web.BaseLiveXPRequestProcessor.processException(BaseLiveXPRequestProcessor.java:368)
        at livexp.ui.web.BaseLiveXPRequestProcessor.process(BaseLiveXPRequestProcessor.java:598)
        at livexp.ui.web.EnhancedLiveXPActionServlet.process(EnhancedLiveXPActionServlet.java:316)
        at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:697)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at livexp.ui.web.SetCookieFilter.doFilter(SetCookieFilter.java:31)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at livexp.ui.web.MarkupFilter.doFilter(MarkupFilter.java:30)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at edu.yale.its.tp.cas.client.filter.CASFilter.doFilter(CASFilter.java:404)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:159)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
        at java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:41:56.620

> 该操作从我的应用程序战争转发到 PDF 生成器战争我收到错误

所以你试图将请求从一个 .war 转发到另一个？那是行不通的，它们是单独的应用程序。您需要配置共享上下文或向客户端发送重定向到其他 .war。或者将应用程序组合到单一战争中。

# javascript - Highcharts 散点图。绘图边缘附近点的不良工作“悬停”

> ID：15831269
> 
> 赞同：0
> 
> 时间：2013-04-05T10:11:58.863
> 
> 标签：javascript, jquery, highcharts

当散点放置在绘图边缘时，仅当鼠标悬停在绘图区域中的一部分点上时才会触发“悬停”事件。使用小标记，用户必须为工具提示“寻找像素”。这是示例：http: [//jsfiddle.net/Efm4p/4/](http://jsfiddle.net/Efm4p/4/)

```
$(function () {
var chart;

$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'scatter',
        },
        xAxis:{
            min:0,
            max: 100},
        yAxis:{
            min:0,
            max:2,
            tickInterval:1,
            lineWidth:1
        },
        series: [{
            marker:{
                lineWidth:1,
                lineColor:'BBBBBB',
                radius:3
            },
            data: [{x: 10, y: 2}, {x: 0.5, y:1}, {x: 0, y: 1}, {x: 12, y: 2}, {x: 11, y: 2}]
        }]
    });
});  

}); 
```

在此示例中，很难获得点 {x: 0, y: 1} 的工具提示。

我正在尝试为轴设置 minPadding/maxPadding，但是当我明确设置 min/max 时它们不起作用。明确设置最小值/最大值很重要，因为真实图表通过 x 轴显示从 0 到 100 的百分比，通过 y 轴显示类别。一些点在 x 轴上具有 0% 或 100% 的值，并且在 y 轴上属于第一个或最后一个类别。

**Upd：**我的问题是“如何使'悬停'对位于情节边缘的点正常工作？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:04:27.793

这是分散系列的默认行为 - 仅在悬停标记时显示工具提示。您可以将系列类型更改为`line`，然后设置`lineWidth: 0`。那应该工作得更好。

唯一的限制是线/样条的数据应按 x 值升序排序，并且不允许相同 x 值的重复。简单地将排序添加到您的数据将解决该问题。

```
(function() { 
    return [{x: 10, y: 2}, {x: 0.5, y:1}, {x: 0, y: 1}, {x: 12, y: 2}, {x: 21, y: 1}]
            .sort(function(a,b){ return a.x - b.x } );
})() 
```

组合示例：http: [//jsfiddle.net/Efm4p/5/](http://jsfiddle.net/Efm4p/5/)

# mysql - 另一列中一组相等列值的MYSQL触发器/约束

> ID：15831272
> 
> 赞同：0
> 
> 时间：2013-04-05T10:12:07.107
> 
> 标签：mysql, sql, triggers, constraints

在下表中：

```
Country Name             |  Country Code |  isStandardName
----------------------------------------------------------

United States            |  USA          |    false
----------------------------------------------------------
United States of America |  USA          |    True 
----------------------------------------------------------
Yankees                  |  USA          |   false 
```

有一种情况是，美国/美国等国家有不同的名称，国家代码相似（在本例中为美国），但其中一个可以是标准名称。在这种情况下，最简单的解决方案是强制执行一个约束，其中类似的国家代码一次只能在 isStandardName 部分中具有一个布尔值 true。

换句话说，如何通过触发器/约束使“CountryCode，'true'”对于一组相等的 countryCode 名称是唯一的？

关于如何执行此约束的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:53:37.693

我建议删除“isStandardName”列。创建一个表standard_country。在国家和标准国家之间建立了关系。使用左连接创建视图并更改模型以使用新结构。

例子。

```
CREATE TABLE `country` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `country` varchar(63) DEFAULT NULL,
  `code` char(3) DEFAULT NULL COMMENT 'ISO 3166-1 alpha-3',
  PRIMARY KEY (`id`),
  UNIQUE KEY `country` (`country`,`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `country` (`id`, `country`, `code`)
VALUES
    (1,'United States','USA'),
    (2,'United States of America','USA'),
    (3,'Yankees','USA');

CREATE TABLE `standard_country` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `country_id` int(11) unsigned NOT NULL,
  `code` char(3) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `key` (`code`),
  KEY `country_id` (`country_id`),
  CONSTRAINT `standard_country_ibfk_1` FOREIGN KEY (`country_id`) REFERENCES `country` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `standard_country` (`id`, `country_id`, `code`)
VALUES
    (1,2,'USA');

create or replace view countries_view as
select country.id country_id 
, country
, country.code
, COALESCE( (standard_country.id > 0) , 0 ) isStandard
from `country`
left join `standard_country`
on country.id = standard_country.country_id

-- example result
select * from countries_view ;

country_id    country    code    isStandard
1    United States    USA    0
2    United States of America    USA    1
3    Yankees    USA    0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T14:50:03.920

我这样做的同时将桌子保持为一体（原样）。

首先，创建检查规范国家整合的程序

```
DELIMITER //
CREATE PROCEDURE `db`.`check_canonical_integrity` (IN new_countrycode
  VARCHAR(10), IN new_iscanonical tinyint(1))
BEGIN
SELECT sum(iscanonical) into @canonicalsum from `gapminder_db`.`COUNTRY_CODES` WHERE countrycode = new_countrycode; 
IF (@canonicalsum + new_iscanonical) > 1 THEN
   SET @msg := 'More than one canonical countrycode cannot exit.';
   SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = @msg;
END IF;
END
//DELIMITER ; 
```

其次，我们在插入之前调用上面的，你可以在删除中做同样的事情：

```
DELIMITER &&
 CREATE TRIGGER `db`.`check_canonical_flag_insert` BEFORE INSERT ON
 `COUNTRY_CODES`

 FOR EACH ROW
    BEGIN 
      CALL check_canonical_integrity(New.countrycode, New.iscanonical);
    END&&
 DELIMITER ; 
```

# php - 上传表单两次抛出相同的错误

> ID：15831277
> 
> 赞同：1
> 
> 时间：2013-04-05T10:12:15.613
> 
> 标签：php, codeigniter, file-upload

我正在尝试使用 CodeIgniter 创建一个上传表单，让用户可以更改他们的个人资料图片。在我的控制器中是以下代码行：

```
if(!$this->upload->do_upload() && empty($_FILES['userfile'])) {
    $data['upload'] = "0";
    $this->load->view('editpicture', $data);
} elseif (!$this->upload->do_upload() && !empty($_FILES['userfile'])) {
    $data['upload'] = "0";
    $data['attempt'] = "1";
    $data['error'] = $this->upload->display_errors();
    $this->load->view('editpicture', $data);        
} else {
    $upload_data = $this->upload->data();
    .... 
```

一切正常，除非我遇到错误。该视图两次显示相同的错误：

> 您没有选择要上传的文件。
> 您没有选择要上传的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:18:48.063

做这个：

```
if(!$this->upload->do_upload()) {
    if (empty($_FILES['userfile'])) {
        $data['upload'] = "0";
        $this->load->view('editpicture', $data);
    } else {
        $data['upload'] = "0";
        $data['attempt'] = "1";
        $data['error'] = $this->upload->display_errors();
        $this->load->view('editpicture', $data);       
    }
} else {
    $upload_data = $this->upload->data();
    .... 
```

它发生的原因是你跑`$this->upload->do_upload()`了两次。第一个条件运行它以查看它是否为空`FALSE`，然后检查`$_FILES`它是否为空以运行代码块。

好吧，如果`$this->upload->do_upload()`为 TRUE 并且`$_FILES`为空，那么它将运行，但如果`$_FILES`不为空，它将运行下一个条件，您`$this->upload->do_upload()`在该条件下再次运行。然后该函数正在执行`if()`两次。条件检查从左到右运行。

# php - 使用 ajax 更快地访问数据库或文件访问？

> ID：15831297
> 
> 赞同：2
> 
> 时间：2013-04-05T10:13:03.397
> 
> 标签：php, mysql, jquery

我正在使用 jquery/ajax 和 php 开发一个简单的聊天应用程序，并将聊天消息保存在 mysql 数据库中。我的问题是保存聊天消息，它是更快的数据库、文本文件或 xml 文件，并且检索速度更快使用ajax的数据。提前致谢

# c# - 使用 WPF 中的操作关闭窗口

> ID：15831299
> 
> 赞同：2
> 
> 时间：2013-04-05T10:13:10.617
> 
> 标签：c#, wpf

当我尝试关闭当前窗口时，我使用：

```
this.Close(); 
```

它成功关闭了窗口。但在后台，窗口的操作也在运行。我的意思是，我关闭窗口但不能停止它的操作，例如 for 循环。它继续为进程运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:25:15.367

我怀疑库中是否存在这种机制：它要求错误释放资源的问题。相反，在任何长时间运行的进程中添加一个守卫，比如

```
if(isClosing) break; 
```

然后在事件处理程序中设置`isClosing`为。`true``Closing`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:26:00.017

当您关闭窗口时，您要求 GUI 线程完成其操作。但是，那些在不同线程中执行的进程（例如 Web 请求）和其他异步操作在它们自己的线程中运行。

如果您在不同的线程中运行循环，那么当您关闭窗口时它很可能不会自行终止。

WPF 以异步方式执行其许多操作，因此请检查窗口的代码并查看是否有任何需要显式终止的内容。

此外，异常终止循环并不是一个好主意。如果您正在运行循环，请设置一个中断条件，当您终止窗口时停止循环。

# mongodb - 如何查看从 Mongoose 发出的实际 Mongo 调用？

> ID：15831301
> 
> 赞同：2
> 
> 时间：2013-04-05T10:13:24.303
> 
> 标签：mongodb, mongoose

我正在尝试记录从我的 MongooseJS 连接对 MongoDB 的实际调用。

1) 如何从我的 NodeJS 应用程序中访问这些信息？我认为猫鼬图书馆必须提供一些东西？我想用winston来记录这个。

2) 奖金。如何查看来自 MongoDB 端本身的调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:07:18.337

在 Node.JS/Mongoose 中，您可以这样做：

```
mongoose.set( "debug", true ); 
```

而且，对于 MongoDB，我现在能记住的最好的就是你可以访问`http://(server address):(mongod port + 1000)`.

例如：如果您的 mongod 在端口 27017（默认）上运行，那么您可以使用`http://localhost:28017`.

据我所知，这个页面实际上并没有向您显示正在运行的确切查询，但它显示了正在查询哪些集合，以及有多少文档受到影响。

此外，您可以在此页面中看到更多有趣的数据。

# android - Android中带有图标、标题和描述的列表视图

> ID：15831304
> 
> 赞同：0
> 
> 时间：2013-04-05T10:13:30.977
> 
> 标签：android, listview

它在 getBaseContext() 的此代码行中显示错误。我不知道这里发生了什么我尝试了数组适配器而不是简单适配器，但它显示错误。现在我正在使用简单适配器..它给了我错误..

```
 SimpleAdapter(getBaseContext(), aList, R.layout.list,          
       from, to); 
```

headFragment.java

```
 public class HeadFragment extends ListFragment {
OnHeadlineSelectedListener mCallback;

// The container Activity must implement this interface so the fragment can deliver 
   messages
public interface OnHeadlineSelectedListener {
    /** Called by HeadlinesFragment when a list item is selected */
    public void onArticleSelected(int position);
}
static String[] Headlines = {
    "Article One",
    "Article Two",
    "Article 3"
};
int[] flags = new int[]{
        R.drawable.ic_11,
        R.drawable.ic_12,
        R.drawable.ic_13

    };
String[] currency = new String[]{
        "Indian Rupee",
        "Pakistani Rupee",
        "Sri Lankan Rupee",

    };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);

 // Each row in the list stores country name, currency and flag
    List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();        

    for(int i=0;i<10;i++){
        HashMap<String, String> hm = new HashMap<String,String>();
        hm.put("txt", "Headlines: " + Headlines[i]);
        hm.put("cur","Currency : " + currency[i]);
        hm.put("flag", Integer.toString(flags[i]) );            
        aList.add(hm);        
    }

    // Keys used in Hashmap
    String[] from = { "flag","txt","cur" };

    // Ids of views in listview_layout
    int[] to = { R.id.flag,R.id.txt,R.id.cur};        

    // Instantiating an adapter to store each items

    SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.list,          
       from, to);
    // Getting a reference to listview of main.xml lagetBayout file
    ListView listView =( ListView ) findViewById(R.id.listview);

    // Setting the adapter to the listView
    listView.setAdapter(adapter);      } 
```

列表.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
 >
<ImageView
    android:id="@+id/flag"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:paddingTop="10dp"
    android:paddingRight="10dp"
    android:paddingBottom="10dp"
/>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
>
    <TextView
        android:id="@+id/txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15dp"
    />

    <TextView
        android:id="@+id/cur"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dp"
    />
     <!-- Rightend Arrow -->
 <ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/next"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"/>

</LinearLayout>
   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:17:03.273

使用`getApplicationContext()`或`Frgment context`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:19:14.377

已`getBaseContext()`使用`getActivity()`或`getApplicationContext()`

* * *

**`getApplicationContext()`**应用程序上下文与应用程序相关联，并且在整个生命周期中始终相同

* * *

**`getBasecontext()`**不应该使用 jst 使用 Context 而不是它，它与活动相关联并且可能在活动被销毁时被销毁

* * *

**`getActivity()`**在 Fragment 中返回与 Fragment 关联的活动的上下文。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:55:22.690

@Abhay 您的代码没有任何问题，只需要使用**getApplicationContext()**而不是**getBaseContext()**，我完全同意@DhavalSodhaParmar

要了解更多信息，请阅读*getBaseContext()*和*getApplicationContext()之间的区别*

# entity-framework - 获取 Breeze configureMetadataStore 时出错

> ID：15831306
> 
> 赞同：1
> 
> 时间：2013-04-05T10:13:33.933
> 
> 标签：entity-framework, breeze, single-page-application, hottowel

我正在使用热毛巾模板进行 SPA。我目前面临一些问题

我在 datacontext.js 上遇到错误

[服务/数据上下文]

检索数据时出错。无法找到属性：实体类型上的公司名称：公司：#Atlas.Web.Models

但是，公司模型有一个名为 CompanyName 的属性

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:54:02.233

解决方案非常简单 - 从 Pluralsight SPA Jump Start Discussion Forum 上的 John Papa 那里获得！

“......当属性到达客户时，它们被翻译成驼峰式。试试 companyName......”

排序！

谢谢@JohnPapa

# java - 从 AHK 到 Java 的变量

> ID：15831310
> 
> 赞同：1
> 
> 时间：2013-04-05T10:13:46.787
> 
> 标签：java, native, autohotkey, transfer

是否可以将变量或整数从 ahk 传输到 java？可能可以使用 cmd，可以使用 NativeCall 执行 AHK 命令，通过 cmd，在 java 中，在此处解释：http: [//youtu.be/EX0iT0NTTjw](http://youtu.be/EX0iT0NTTjw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T17:54:23.097

或者您使用 onmessage 或将某些内容附加到文件并在 java 中读取它。

我建议初学者使用 fileappend 命令，因为它还可以让您记录发生在 onmessage 没有的最后一件事的日志，并且您必须注意不要向该事物发送消息。大多数 Windows 功能都有这样的消息支持，所以打断它们是个坏主意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T22:16:13.750

您可以使用 runtime.exec 从 java 执行 Ahk 脚本并读取 Autohotkey 进程的标准输出。使用 [http://l.autohotkey.net/docs/commands/FileAppend.htm](http://l.autohotkey.net/docs/commands/FileAppend.htm) 作为标准输出。

您还可以使用 OnMessage、临时文件、剪贴板等。 [http://www.autohotkey.com/docs/commands/OnMessage.htm](http://www.autohotkey.com/docs/commands/OnMessage.htm)

# javascript - 防止回发的javascript函数

> ID：15831311
> 
> 赞同：0
> 
> 时间：2013-04-05T10:13:48.887
> 
> 标签：javascript, asp.net, postback, tabcontrol

I am using a javascript tab control and I have to use the below function along with the CSS for the links to act as a tab control... the problem is that as soon as I include this in my html,it prevents postback. 结果，单击第二个选项卡上的按钮会将其移回第一个选项卡。然后我必须再次单击第二个选项卡才能获得按钮单击的结果。

**JavaScript**：

```
<script type="text/javascript">
    $(function () {
        $("#tabs").tabs();
    }); 
```

**HTML**：

```
<div id="tabs" class="ui-tabs">
  <ul>
 <li><a href="#tabs-1" class="ui-tabs">My Profile</a></li>
  <li><a href="#tabs-2" class="ui-tabs">My AddressBook</a></li>
  </ul>

 <div id="tabs-1" class="ui-tabs"></div>
 <div id="tabs-2" class="ui-tabs"></div>
</div> 
```

有没有人有任何想法？

# iphone - 如何使用渐变 UIButton 创建光泽

> ID：15831312
> 
> 赞同：0
> 
> 时间：2013-04-05T10:13:49.710
> 
> 标签：iphone, ios, objective-c, ipad, uibutton

创建这样的按钮而不必使用 .png 并将其设置为背景的最简单方法是什么？

![在此处输入图像描述](https://i.stack.imgur.com/SDo2I.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:51:42.847

```
 CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.rem.bounds;

    gradient.cornerRadius=7.0f;

    gradient.colors = [NSArray arrayWithObjects:
                       (id)[[UIColor blueColor] CGColor],
                       (id)[[UIColor blueColor] CGColor], (id)[[UIColor whiteColor] CGColor],nil];
    gradient.opacity=0.7f;

    [self.rem.layer insertSublayer:gradient atIndex:0];
    self.rem.layer.cornerRadius=7.0f;
    [self.rem.layer setBorderWidth:0.50f]; 
```

试试这个`import QuartzCore`

rem 是`UIButton`出口

我希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:20:22.010

这是渐变按钮的常用方法。

```
CAGradientLayer *btnGradient = [CAGradientLayer layer];
btnGradient.frame = btn.bounds;
btnGradient.colors = [NSArray arrayWithObjects:
                              (id)[[UIColor colorWithRed:102.0f / 255.0f green:102.0f / 255.0f blue:102.0f / 255.0f alpha:1.0f] CGColor],
                              (id)[[UIColor colorWithRed:51.0f / 255.0f green:51.0f / 255.0f blue:51.0f / 255.0f alpha:1.0f] CGColor],
                             nil];
[btn.layer insertSublayer:btnGradient atIndex:0]; 
```

# github - 是否可以在 github api 中获取一个文件的提交历史记录？

> ID：15831313
> 
> 赞同：20
> 
> 时间：2013-04-05T10:13:54.310
> 
> 标签：github, github-api

我想在 github REST api 中获取单独文件的所有提交消息。但我得到的只是为了获得单独分支的所有提交。然后我试图得到以下信息：

```
http://api.github.com/users/<username>/<project>/commits/<branch>/<path/to/file> 
```

但这也无济于事。这至少可能吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-05T15:58:41.757

试试这个（如[这里](http://developer.github.com/v3/repos/commits/#list-commits-on-a-repository)的 API 文档中所述）：

[http://api.github.com/repos/:owner/:repo/commits?path=PATH_TO_FILE](http://api.github.com/repos/:owner/:repo/commits?path=PATH_TO_FILE)

例如

[https://api.github.com/repos/izuzak/pmrpc/commits?path=README.markdown](https://api.github.com/repos/izuzak/pmrpc/commits?path=README.markdown)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-27T01:37:34.267

使用[GraphQL API v4](https://developer.github.com/v4/)，对于默认分支上的文件，它将是：

```
{
  repository(owner: "izuzak", name: "pmrpc") {
    defaultBranchRef{
      target {
        ...on Commit{
            history(first:100,path: "README.markdown"){
            nodes {
              author {
                email
              }
              message
              oid
            }
          }
        }
      }
    }
  }
} 
```

[在资源管理器中尝试](https://developer.github.com/v4/explorer/?variables=%7B%7D&query=%7B%0A%20%20repository(owner%3A%20%22izuzak%22%2C%20name%3A%20%22pmrpc%22)%20%7B%0A%20%20%20%20defaultBranchRef%7B%0A%20%20%20%20%20%20target%20%7B%0A%20%20%20%20%20%20%20%20...on%20Commit%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20history(first%3A100%2Cpath%3A%20%22README.markdown%22)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20author%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20email%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20message%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oid%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D)

# microsoft-metro - 如何在winjs中集成Dedicated Worker

> ID：15831322
> 
> 赞同：0
> 
> 时间：2013-04-05T10:14:32.507
> 
> 标签：microsoft-metro, winjs

## 如何在winjs中集成专用工作者..

我正在开发一个 winJS 应用程序。我的应用程序从下载图像开始。我如何将 Dedicated Worker 集成到我的应用程序中......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:58:17.073

很高兴熟悉 WinJS.Promise，它用于基于 javascript 的 Windows 商店应用程序中的异步任务。检查`WinJS.xhr()`api。如果可以通过 url 访问图像，则可以简单地将 img 标签的 src 属性绑定到 url。

```
<img data-win-bind="src: imageUrl" /> 
```

# spring - Grails & Spring - 在 resources.groovy 中如何设置列表

> ID：15831324
> 
> 赞同：6
> 
> 时间：2013-04-05T10:14:34.350
> 
> 标签：spring, grails

问题很简单，如何在 resources.groovy 中创建 bean 列表？

像这样的东西不起作用：

```
beans {
    listHolder(ListHolder){
        items = list(){
            item1(Item1),
            item2(Item2),
            ...
        }
    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T11:14:28.303

如果你想要一个对其他*命名*bean 的引用列表，你可以使用普通的 Groovy 列表表示法，它都会被正确解析：

```
beans {
    listHolder(ListHolder){
        items = [item1, item2]
    }
} 
```

但是当“项目”需要是匿名内部 bean 时，这不起作用，相当于 XML

```
<bean id="listHolder" class="com.example.ListHolder">
  <property name="items">
    <list>
      <bean class="com.example.Item1" />
      <bean class="com.example.Item2" />
    </list>
  </property>
</bean> 
```

你必须做类似的事情

```
beans {
    'listHolder-item-1'(Item1)
    'listHolder-item-2'(Item2)

    listHolder(ListHolder){
        items = [ref('listHolder-item-1'), ref('listHolder-item-2')]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T18:23:56.713

这简单：

```
beans {
    item1(Item)
    item2(Item)
    listHolder(ListHolder) {
        items = [item1, item2]
    }
} 
```

您可以在 [Spring with the Beans DSL] 的文档中找到更多详细信息（[http://grails.org/doc/latest/guide/spring.html#14.3](http://grails.org/doc/latest/guide/spring.html#14.3) Runtime Spring with the Beans DSL）

# html - iFrame 中的跨域锚链接

> ID：15831326
> 
> 赞同：0
> 
> 时间：2013-04-05T10:14:39.873
> 
> 标签：html, iframe, cross-domain

我有两个测试用例场景。我在同一个域中加载一个 iFrame，在另一个域中加载相同的 iFrame。在同一个域内，简单的锚标签会转到适当的位置，但在不同的域内，锚链接会拒绝工作。我猜这是一个跨域问题，但为什么锚标签会拒绝将您带到 iFrame 中的适当位置？我不明白这将如何构成安全风险。无论如何，下面是两个网址。您将在右侧看到 iframe 的导航。它在同一个域上工作，但在另一个域上它拒绝这样做。

[同域](http://fnbsocialmedia.co.za/fnbblog/?page_id=574)和[跨域](http://www.youcanhelp.co.za/vote-to-help/)。有什么解决方法吗？

# ssrs-2008 - SSRS - 禁用个别报告的导出选项（例如 PDF）

> ID：15831328
> 
> 赞同：17
> 
> 时间：2013-04-05T10:14:59.310
> 
> 标签：ssrs-2008, reportviewer, reporting-services

我们在网站上使用了许多报告。在将一些报告导出为 PDF 时，文件会变得很大，并且服务器会因负载而崩溃。因此，如果我可以仅为某些有问题的报告禁用导出到 PDF 选项，那就太好了。

那么有没有办法在报表查看器 9.0 (SSRS) 中为单个报表禁用某些导出选项（例如：导出为 PDF）？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-06-15T13:44:53.213

以防万一在此之前或在链接的文章中没有其他人大声说出来：

最简洁的全局解决方案是在 RS 配置文件中找到渲染引擎（我的位于：*C:\Program Files\Microsoft SQL Server\MSRS12.MSSQLSERVER\Reporting Services\ReportServer\rsreportserver.config*），转到 xml 键：**Extensions** >在您要隐藏的每个条目的末尾**呈现并插入以下属性：**

> 可见=“假”

例子：

> <Extension Name="XML" Type="Microsoft.ReportingServices.Rendering.DataRenderer.XmlDataReport,Microsoft.ReportingServices.DataRendering" **Visible="false"** />

或者将**<!--**和**-->**（HTML 注释标记）放在条目的开头和结尾。

对于个人报告，这些功能可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-22T08:14:48.450

您可以在报表查看器中使用 Pre_render 事件。

```
 protected void ReportViewer1_PreRender(object sender, EventArgs e)
        {
            DisableUnwantedExportFormat((ReportViewer)sender, "Excel");
            DisableUnwantedExportFormat((ReportViewer)sender, "Word");
        } 
```

看看这个帖子

[示例 删除 SSRS 中的另存为](https://machinesyntax.blogspot.com/2013/12/example-to-disable-save-as-certain-file.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T11:07:02.320

您可以在此处的特定配置文件中全局隐藏 PDF 按钮：

“InstallPath\Reporting Services\ReportServer\rsreportserver.config”

有关更多信息，StackOverflow 上已经有一个关于此的主题。

请在此处查看更多答案：[ReportViewer - 隐藏 PDF 导出](https://stackoverflow.com/questions/1499885/reportviewer-hide-pdf-export)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T13:26:12.667

我的解决方案

```
$(document).ready(function() {
        var sel = $("select#ReportViewer2_ctl01_ctl05_ctl00");
        sel.find("option[value='XML']").remove();
        sel.find("option[value='CSV']").remove();
        sel.find("option[value='IMAGE']").remove();
        sel.find("option[value='MHTML']").remove();
        sel.find("option[value='PDF']").remove();
        sel.find("option[value='EXCEL']").remove();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:58:13.337

这解决了问题（部分为我们）：

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/0c680c69-9f7d-42aa-a6b4-b1178eab8adf](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/0c680c69-9f7d-42aa-a6b4-b1178eab8adf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-03T15:30:31.323

我正在使用 MvcReportViewer 库在我们的 MVC 应用程序中获取 SSRS 的报表查看器。该库不支持用户控制生命周期事件，因此我无法使用 shamcs 提供的 PreRender 方法。Ristanovic Marko 描述的 Javascript 方法部分有效，但选择器不适用于我们使用的 SSRS 版本，它需要在 IFrame 中加载 JQuery，并且它没有描述仅针对特定报告执行此操作的方法。这是我想出的：

在我的 ReportViewer 部分中，我添加了以下脚本块：

```
var frame = $('#reportframe');
var src = frame.attr('src');
frame.attr('src', src + '?showAdditionalExports=' + @ViewBag.ShowExportsAttribute); 
```

在 ReportViewerWebForm.aspx 中，我添加了另一个脚本块：

```
var urlParams = new URLSearchParams(location.search);
if (urlParams.get('showAdditionalExports') === 'true') {
    document.addEventListener("DOMContentLoaded",
        function() {
            ['Word', 'Excel'].map(function(title) {
                var menuItem = document.querySelector("#ReportViewer1 a[title='" + title + "']")
                    .parentNode;
                menuItem.parentNode
                    .removeChild(menuItem);
            });
        });
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-16T06:28:08.930

您可以在该保存按钮上使用 div 并设置其属性，如下所示

```
<div style="
    background-color: white;
    z-index: 100;
    height: 61px;
    position: absolute;
    padding-left: 500;
    padding-left: 36px;
    margin-left: 370px;
    opacity: 0.5;
"></div> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-09-24T14:26:27.620

这个问题并不新鲜，但也许对于其他有同样问题的人来说，我的回答也很有用。在`web.config`=> `configuration`=>`configSections`部分粘贴一个新的 Telerik 报告配置，如果您没有：

```
<section
      name="Telerik.Reporting"
      type="Telerik.Reporting.Configuration.ReportingConfigurationSection, Telerik.Reporting, Version=11.0.17.118, Culture=neutral, PublicKeyToken=a9d7983dfcc261be"
      allowLocation="true"
      allowDefinition="Everywhere"/> 
```

*`version`在属性中使用您的 Telerik 版本。您可以从`Solution Explorer`=> `your project name`=> `References`=> `TelerikReporting`=>`Properties`*找到它， 另外，在`<configrations>`正文中，粘贴：

```
 <Telerik.Reporting>
<extensions>
  <render>
    <extension name="RTF" visible="false">
    </extension>
    <extension name="PDF" visible="false">
    </extension>
    <extension name="CSV" visible="false">
    </extension>
    <extension name="IMAGE" visible="false">
    </extension>
    <extension name="MHTML" visible="false">
    </extension>
    <extension name="XPS" visible="false">
    </extension>
  </render>
</extensions>
  </Telerik.Reporting> 
```

在上面的代码中，我禁用了除 Excel 之外的任何导出类型。

# css - CSS：如何将提示框（a：hover）向左移动？

> ID：15831331
> 
> 赞同：1
> 
> 时间：2013-04-05T10:15:12.687
> 
> 标签：css, hover, hint

我在框中有提示，它们是这样制作的：
CSS 代码：

```
a span
{
  display:none;
}
a:hover span
{
  position:fixed;
  display:inline;
  border: 1px solid #0000FF;
  margin: 0px 0px 0px 10px;
  padding: 5px;
  color: #000000;
  background: #faffc3;
  opacity:.90;
} 
```

HTML 代码，提示在**span**标签之间，在**元素**内部：

```
<div>
  Some text, 
  <a href="#">link<span>Hint.<br>Second line of hint.</span></a>
  , some text, and another
  <a href="#">link<span>Hint</span></a>.
</div> 
```

是否可以使用一些 CSS 属性将提示框从链接的右侧（默认位置）移动到左侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:25:37.800

```
a {
    position:relative;
}

a span
{
  display:none;
}
a:hover span
{
  position:absolute;
  display:inline;
  border: 1px solid #0000FF;
  margin: 0px 0px 0px 10px;
  padding: 5px;
  color: #000000;
  background: #faffc3;
  opacity:.90;
  right:0;
  margin-right: 105%;
} 
```

**[演示](http://jsfiddle.net/maheshsapkal/bkSkv/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:22:38.577

您需要根据您的要求设置margin-left。

```
a:hover span
{
   margin-left:-10px; 
} 
```

看例子

[http://jsfiddle.net/dSd2a/3/](http://jsfiddle.net/dSd2a/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:24:16.530

我认为这段代码对你有用：

```
a{
    position: relative;
}

a:hover span{
    position: absolute;
    right: 100%;
} 
```

跨度的右边界将接触到 的左边界`<a>`。如果您为跨度定义宽度，这将更好地工作。

[jsFiddle](http://jsfiddle.net/dSd2a/11/)

# java - 从java程序访问linux服务器并运行存储在linux服务器上的TCL脚本

> ID：15831332
> 
> 赞同：0
> 
> 时间：2013-04-05T10:15:13.017
> 
> 标签：java, linux, login, tcl, telnet

我知道这有点具体，我需要通过将问题分成子问题来找到答案。但我想知道做同样事情的最佳方法。

我有一个 linux 服务器，我有自己的登录名。linux服务器上存储了一些TCL脚本。我想编写一个我将从我的 Windows 机器调用的 java 程序，一旦我提供我的登录名、密码和主机名，它应该连接到 linux 服务器，并且应该从存储脚本的目录中执行脚本。

我尝试的是（在网上找到）如下。这样，连接和执行诸如“ls”之类的简单命令需要花费大量时间。此外，为了运行脚本，我需要设置一些我能够设置的环境变量，但即使在我授予脚本执行权限后我也无法执行脚本。

```
static String executeCommand(Session session, String command)

            throws Exception {
        ChannelExec channel = (ChannelExec) session.openChannel("exec");
        channel.setCommand(command);
        channel.setInputStream(null);
        channel.setErrStream(System.err);
        channel.connect();

        InputStream in = channel.getInputStream();

        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String line;
        StringBuffer sb = new StringBuffer();
        while ((line = br.readLine()) != null) {
                sb.append(line + '\n');
        }
        channel.disconnect();

        return sb.toString();
    }

private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {                                      
    // TODO add your handling code here:

    try {
                JSch jsch = new JSch();
                System.out.println("Logging in");

            Session session = jsch.getSession("login name", "host name", port);

            session.setPassword("password");

                java.util.Properties config = new java.util.Properties();
            config.put("StrictHostKeyChecking", "no");
            session.setConfig(config);

            session.connect();
            System.out.println("Logged in");

            System.out.println("==>" + executeCommand(session, "ls"));

        //System.out.println("==>" + executeCommand(session, "./first"));   

            Thread.sleep(60000);

            session.disconnect();
                System.out.println("Disconnected");  
        } catch (Exception e) {
            e.printStackTrace();
        }

} 
```

shell脚本“first”只有下面一行

```
echo "First Script"
sh testscripts/assignment1.scr 
```

如果我从 SSH 终端运行相同的脚本，我会得到所需的输出，并且 TCL 脚本运行正确。但是，如果我尝试从程序中运行它，我将无法运行它并且它会给出错误

```
testscripts/assignment1.scr：第 3 行：/bin/tclsh：没有这样的文件或目录
testscripts/assignment1.scr：第 3 行：exec：/bin/tclsh：无法执行：没有这样的文件或目录

```

# android - Android：一键发送多条短信

> ID：15831336
> 
> 赞同：2
> 
> 时间：2013-04-05T10:15:23.897
> 
> 标签：android, sms, android-pendingintent, smsmanager

我正在开发一个短信发送应用程序。代码运行良好。我可以从我的应用程序发送短信为此我使用以下代码：

```
private void sendSMS(String phoneNumber, String message, final int k){   
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    Intent sentIntent = new Intent(SENT);
    Intent deliveredUntent = new Intent(DELIVERED);

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,sentIntent, 0);        
    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,deliveredUntent, 0);

    //---when the SMS has been sent---
    sentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent "+k,Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    };

    //---when the SMS has been delivered---
    deliverReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
                    break;                      
            }           
        }
    };  

    try{
        registerReceiver(sentReceiver, new IntentFilter(SENT));
        registerReceiver(deliverReceiver, new IntentFilter(DELIVERED));
    } catch (Exception e) {
        e.printStackTrace();
    }

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
} 
```

但现在我想**向多个号码发送短信**。我怎样才能做到这一点。我在谷歌上搜索但没有得到满意的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:32:02.560

只需循环具有多个数字的列表并在循环内调用 sms.sendtextmessage

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T18:17:32.113

## 试试这个方法，它对我很有效，我希望它对你有帮助

public void sendSMS(String number2[], String message) {

```
 for (int i = 0; i < number2.length; i++) {

        try {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number2[i], null, message, null,
                    null);
            Toast.makeText(getApplicationContext(), "SMS Sent to" + " " + number2[1],
                    Toast.LENGTH_LONG).show();
            strNuum = strNuum + 1;
            btnNumber.setText("Sending " + strNuum + " " + "TO" + " "
                    + StringArrayNumber.length);
            edtName.setText("TO: " + number2[1]);

            new Handler().postDelayed(new Runnable() {
                public void run() {

                }
            }, DISPLAY_TIME);

        } catch (Exception e) {
            Toast.makeText(getApplicationContext(),
                    "SMS faild, please try again later!", Toast.LENGTH_LONG)
                    .show();
            e.printStackTrace();
        }

    }

} 
```

# c# - 基类扩展对象实现

> ID：15831338
> 
> 赞同：-4
> 
> 时间：2013-04-05T10:15:30.563
> 
> 标签：c#, inheritance, casting, polymorphism, base-class

有点菜鸟问题，但嘿嗬。

例子：

```
BaseClass bc = new ExtendedClass(); //Assume ExtendedClass inherits from BaseClass
((BaseClass)bc).ExtendedMethod();
bc.ExtendedMethod();
((ExtendedClass)bc).ExtendedMethod(); //overridden in ExtendedClass

ExtendedClass ec = new ExtendedClass();
((BaseClass)ec).ExtendedMethod();
ec.ExtendedMethod();
((ExtendedClass)ec).ExtendedMethod(); //overridden in ExtendedClass 
```

?

运行时会调用`bc.ExtendedMethod();`哪些实现？`ec.ExtendedMethod();`他们会有所不同吗？我假设强制转换的调用将调用类中的特定实现。

编辑：添加了相关标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:20:01.477

在所有三种情况下，`ExtendedMethod`都会调用 的重写实现，因为您正在创建`ExtendedClass`. 毕竟，这就是[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)的全部意义所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:31:39.513

```
public class Base
{
    public void Extends()
    {
        Console.WriteLine("Base class");
    }
}

public class Extend : Base
{
    public new void Extends()
    {
        Console.WriteLine("Extend class");
    }
}

public class Program
{
    public static void Main()
    {

        Base b = new Base();
        b.Extends();

        Extend e = new Extend();
        e.Extends();

        Base be = new Extend();
        be.Extends();

        Console.Read();

   }

} 
```

结果如下：

```
Base class
Extend class
Base class 
```

请注意，您还可以`new`在类中使用关键字`Extend`来隐藏基`Extends`函数。

```
public new void Extends() 
{

} 
```

# c# - 从异步 wcf 操作取消订阅事件

> ID：15831341
> 
> 赞同：0
> 
> 时间：2013-04-05T10:15:39.830
> 
> 标签：c#, wcf

我正在开发使用 wcf 服务的 WP 应用程序。WP 仅适用于异步方法，因此添加服务引用后，所有方法都是异步的。我想问你，当我订阅事件时，我可以像我的示例中那样取消订阅事件 OnSendDataCompleted 方法吗？

```
serviceClient.SendDataCompleted += OnSendDataCompleted;
serviceClient.SendData(params);

void OnSendDataCompleted(object sender, EventArgs e){
    serviceClient.SendDataCompleted -= OnSendDataCompleted;
} 
```

谢谢

# android - 在Android运行时将文本更改为图像并返回按钮

> ID：15831352
> 
> 赞同：0
> 
> 时间：2013-04-05T10:16:43.030
> 
> 标签：android, button

我想在运行时将按钮的文本更改为图像，然后在某些用户交互中返回（而不是我想要文本返回的图像）。我怎样才能做到这一点？谁能给我一个例子？

据我了解，我无法使用图像按钮，因为我无法在其上添加文本。我试着用

```
setCompoundDrawables 
```

但这对我不起作用（按钮上没有可见的变化）。这是我的代码：

```
 Button button = (Button) findViewById(R.id.button1);

 Drawable myDrawable = this.getResources().getDrawable(R.drawable.ic_launcher);
 myDrawable.setBounds(0, 0, 0, 0);

 button.setCompoundDrawables(myDrawable, null, null, null); 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:19:52.943

我认为这是问题所在

```
myDrawable.setBounds(0, 0, 0, 0); 
```

既然你已经放弃`0`了`left, top, right, bottom`，就没有明显的变化。尝试为and提供一些值，例如`10`or ，您将能够看到变化。`15``right``bottom`

# python - python中的Http用户代理解析器

> ID：15831357
> 
> 赞同：0
> 
> 时间：2013-04-05T10:16:57.007
> 
> 标签：python, regex, parsing, http-headers, user-agent

我想解析python中的用户代理字符串并将浏览器分类为以下类别：
1）浏览器名称
2）浏览器版本
3）操作系统/平台名称
4）操作系统/平台版本
5）设备类型：移动/桌面/平板电脑/其他
如果是手机/平板电脑则
6) 制造商/供应商名称
7) 型号

所以，我可以使用什么外部库来完成这项任务，我想在没有任何互联网连接的情况下离线完成所有这些工作。所以我有一个数据库，我只需要对其进行分类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:12:41.477

```
# Import the lib
from ua_parser import user_agent_parser

# Parse the user agent
user_agent_parser.Parse(request.META.get('HTTP_USER_AGENT'))

print result_dict['user_agent']
# {'major': '5', 'minor': '1', 'family': 'Mobile Safari', 'patch': None}

print result_dict['os']
# {'major': '5', 'patch_minor': None, 'minor': '1', 'family': 'iOS', 'patch': None}

print result_dict['device']
# {'is_spider': False, 'is_mobile': True, 'family': 'iPhone'} 
```

上面的代码示例都很容易被使用它们的人识别；使用用户代理信息很简单，API 也很简单。Tobie 这个漂亮的图书馆做得很好。

[http://davidwalsh.name/user-agent-parser](http://davidwalsh.name/user-agent-parser)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-27T17:35:01.457

这不是关于问题的开源解决方案，而是一个解决方案。

你们知道[Python 的 WURFL 模块](https://docs.scientiamobile.com/documentation/infuze/infuze-python-module-user-guide)吗？

# python - 烧瓶错误处理程序

> ID：15831364
> 
> 赞同：3
> 
> 时间：2013-04-05T10:17:07.653
> 
> 标签：python, web, flask

我创建了简单的多应用 Flask 站点。我将所有错误视图（404、501 等）移至 application `errors`。但是当发生错误时，我只看到 Flask 的默认错误页面，而不是我自己的。项目结构为：

```
/site
|-> main.py
     from flask import Flask

     app = Flask(__name__)
     app.config.from_pyfile('config.py')

     import errors, account, mysite, blog
     from errors.views import not_found

     @app.route("/")
     def index_view():
         return "Welcome!"

     @app.route("/about")
     def about_view():
         return "About"

     if __name__ == "__main__":
         app.run(debug=True)
|-> templates
  |-> errors
    |-> 404.html

|->errors
  |-> __init__.py
     from main import app
     import errors.views
  |-> views
     from errors import app
     from flask import render_template

     @app.errorhandler(404)
     def not_found(error):
         return render_template('errors/404.html'), 404 
```

如果我返回的内容`errors/views.py`按`main.py`预期开始工作并向我显示我的错误页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:16:27.023

将所有错误模板（如 404 等）放在项目的主模板文件夹中。因此，如果您的项目名为“myproject”，您可以使用以下内容：

```
myproject/
    __init__.py
    templates
        404.html
        503.html
        .. and so on 
```

在您的 `__init__.py`文件中将它们称为：

```
app = Flask(__name__)

@app.errorhandler(404)
def not_found(error):
    return render_template('404.html'), 404 
```

# unix - Unix - 条件中的条件

> ID：15831371
> 
> 赞同：0
> 
> 时间：2013-04-05T10:17:44.167
> 
> 标签：unix, ksh

我一直在到处寻找，但找不到答案。在 ksh 中，你如何做这样的事情：

```
while [ [ ! [ [ -n $var1 ] || [ [ -n $var2 ] && [ -n $var3 ] ] ] ] && [ ! [ [ -n $var1 ] && [ -n $var2 ] ] ] ]; do
    ...etc etc
done 
```

或以伪/更简单的方式查看

```
while ((! ((var1 != none) or 
         ((var2 != none) and (var3 != none)))
      and
      (!((var1 != none) and (var2 != none)))) {
....
} 
```

...基本上是任何类型的分组条件

我在 if [ -z $var1 ] && [ -n $var2 ]; 等简单条件下发现了很多。然后

但不像上面那个。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:03:31.397

您要执行的测试存在许多问题。

*   如果为空，片段 like `-n $var`将失败，`$var`因为它将扩展为单个`-n`.

取而代之`-n "$var"`的是这里的防弹版本。

*   **并且**用`-a`运算符**not** with表示`&&`

*   **or**用`-o`运算符**not** with表示`||`

*   **分组**运算符不是`()`另一个嵌套`[]`结构

应用此规则，您的表达式将更接近如下所示：

```
[ ! ( -n "$var1" -o ( -n "$var2" -a -n "$var3" ) ) -a ! ( -n "$var1" -a -n "$var2" ) ] 
```

请注意，此处**必须**使用空格。

根据转义规则，您可能必须转义`(`和`)`.

因为我不知道这些是如何处理的，`ksh`所以我无法确定那里是否真的有必要，但所有外壳证明版本看起来像这样：

```
[ ! '(' -n "$var1" -o '(' -n "$var2" -a -n "$var3" ')' ')' -a ! '(' -n "$var1" -a -n "$var2" ')' ] 
```

请注意，`[`它通常是一个可执行文件，`/usr/bin/`因此不同 shell 之间没有任何语法差异。

`[`在使用不同的 shell时，您只需要注意不同的元字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:01:12.847

`ksh`使用's`[[ ]]`语法要容易得多。`(`and`)`不需要被引用，你可以像在 C 语言中一样使用`&&`and 。`||`例如：

```
[[ ! ( -n $var1 && ( -n $var2 || -n $var3 ) ) ]] 
```

此外，您不需要双引号`$var`，`[[ ]]`这会使代码更清晰。

# c# - SVCUtil 跳过复杂类型的 wsdl 以避免重复

> ID：15831390
> 
> 赞同：1
> 
> 时间：2013-04-05T10:18:29.107
> 
> 标签：c#, wcf, svcutil.exe

我在本地下载了多个 wsdl 文件 - A.WSDL 和 B.WSDL

A.WSDL 具有与 B.WSDL 相同的复杂类型集（近 100 个）， `<xsd:complexType name="Book">`但方法/操作不同。

例如：A.WSDL 具有复杂类型`<xsd:complexType name="Book">`和正在创建新操作的操作

B.WSDL 具有相同的复杂类型`<xsd:complexType name="Book">`和操作是读取操作

我正在使用 SVCUtil 在客户端生成存根到单个文件和具有相同命名空间的存根。但得到以下错误：

错误：验证导出期间生成的某些 XML 模式时出错：`http://mylocalhost/object:Book`已经声明了 complexType。

约束是：

1) 我将无法更改 WSDL 文件。

2) 希望将生成的存根类放在单个名称空间中。

3）没有wsdl.exe

有什么方法可以跳过或覆盖重复的 complexType？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T19:44:14.787

我引用 Daniel Roth 在[这里提供的内容](http://social.msdn.microsoft.com/Forums/vstudio/en-US/a8cdcfa7-d18f-4ebc-9ecb-131d45f34189/svcutil-excludetype-doesnt-work?forum=wcf)

```
"I think you are looking for something like the /shareTypes feature in wsdl.exe.  
 If you want to correctly share types all you need to do is generate clients 
 for both service at the same time.  You can do this by passing the location 
 of the metadata for both services to svcutil:

       svcutil [service url1] [service url2]

 When you pass both services to svcutil at the same time svcutil can figure out 
 which types are shared and only generate one type instead of many.

 If you want svcutil to generate existing types instead of new types, you need 
 to 'reference' the existing types in a DLL:

      svcutil /reference:MyTypes.dll [service url1] [service url2]

 If there are types in the referenced DLL that you don't want to be used in code           
 generation, you can use the /excludeType switch to keep that type from getting 
 generated." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T18:19:48.567

我通过编写一个批处理文件来做到这一点。

方法是 1) 使用 SVCUtil 为 A.wsdl 创建代理类

2) 将它们编译为 .dll 文件

3) 使用 SVCUtil 为 B.wsdl 创建引用在#2 中创建的 dll 文件的代理类。

以下是代码行：

`"Your_Windows_SDK_Path\Bin\SvcUtil.exe" A.wsdl /language:C# /out:A.cs`

`"Your_Windows_.NetFramework_Path\csc.exe" /target:library /out:myreferences.dll A.cs`

`"Your_Windows_SDK_Path\Bin\SvcUtil.exe" B.wsdl /r:myreferences.dll /language:C# /out:B.cs /mergeconfig /config:output.config` `

# windows-phone-7 - Cimbalino appbar，烦人的 xaml 警告

> ID：15831393
> 
> 赞同：2
> 
> 时间：2013-04-05T10:18:45.777
> 
> 标签：windows-phone-7, windows-phone-8, cimbalino

完全按照手册中的说明使用它，例如：

```
<i:Interaction.Behaviors>
    <behaviors:ApplicationBarBehavior>
        <behaviors:ApplicationBarIconButton Command="{Binding UpdateTaskCommand, Mode=OneTime}" IconUri="/Assets/AppBar/save.png" Text="Save Task" />
        <behaviors:ApplicationBarIconButton Command="{Binding DeleteTaskCommand, Mode=OneTime}" IconUri="/Assets/AppBar/delete.png" Text="DeleteTask" />
    </behaviors:ApplicationBarBehavior>
</i:Interaction.Behaviors> 
```

但我收到 xaml 警告“路径不能是绝对的”。一般来说，它可以工作，但警告很烦人。

图像属性设置为“内容”和“如果较新则复制”，如下所述：[WP7 Dynamic icons in ApplicationBar](https://stackoverflow.com/questions/4592236/wp7-dynamic-icons-in-applicationbar)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:47:06.330

好的，所以更新到最新版本（目前为 1.4.1）解决了这个问题。链接：[https ://github.com/Cimbalino/Cimbalino-Phone-Toolkit/downloads](https://github.com/Cimbalino/Cimbalino-Phone-Toolkit/downloads)

谢谢，佩德罗（不知道如何将评论标记为正确答案）。

# c++ - 在 vim 中显示函数调用堆栈

> ID：15831398
> 
> 赞同：2
> 
> 时间：2013-04-05T10:18:53.860
> 
> 标签：c++, linux, vim

有没有办法在编辑（而不是在运行时）代码时在 VIM/GVIM 中显示函数的调用堆栈？我正在使用 LINUX 和 C++。假设下面的代码示例

```
 void foo3(){}

 void foo2(){}

 void foo1(){
     foo2(){
         foo3(){
         }
     }    
 } 
```

我正在寻找能够在下面显示列表的 vim 命令或插件

```
foo1()
foo2()
foo3() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:23:39.030

我建议看看[http://www.vim.org/scripts/script.php?script_id=2368](http://www.vim.org/scripts/script.php?script_id=2368)，它的下降并为我服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:43:44.227

您可以安装[Eclim](http://eclim.org)，这是一种将 Vim 与 Eclipse 集成的方法，您的 Vim 实例通过守护进程与 Eclipse 实例通信。

支持调用堆栈的显示。有关示例，请参见[此处。](http://eclim.org/vim/c/inspection.html)您还将从 Eclipse 中获得一些其他好处，例如代码完成和基本代码验证。

根据我的个人经验，使用起来有点麻烦，因为您必须设置一个 Eclipse 项目，但如果这是您的目标，这是将 IDE 功能引入 Vim 的一种相当简单的方法。

# android - 制作Android代码跨平台

> ID：15831399
> 
> 赞同：1
> 
> 时间：2013-04-05T10:19:01.610
> 
> 标签：android, jquery, ios, sqlite, porting

我的 Android 应用使用动态 UI。也就是说，所有 UI 屏幕都仅由简单类型（图库、列表视图、表单视图）组成，它们完全由 java 代码创建，而不是使用 xml 模板。这是因为 UI 中几乎没有任何静态内容。java代码也广泛使用sqlite。没有媒体内容（图像、视频），它是一个普通的数据库前端应用程序。它也没有使用太多的设备功能（相机、短信等）。

有 3 个主要领域 - SQLite 文件、没有任何 Android 依赖项的纯 Java 代码、Android UI java 代码（ListView 等 - 但只有非常薄的代码）。我需要在 iOS 中完成所有这些工作。

使此代码跨平台（至少移植到 iOS）我有什么选择？jQuery 移动？电话间隙？任何其他？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:25:16.397

你试过谷歌项目[`j2objc`](http://code.google.com/p/j2objc)吗？

# android - 应用程序在 android 2.3.7 而不是 4.1.2 中运行良好

> ID：15831401
> 
> 赞同：1
> 
> 时间：2013-04-05T10:19:05.940
> 
> 标签：android, jar, android-version

我有一个在 android 2.3.4、2.3.6 和 2.3.7 中运行良好的应用程序，但在 android 4.1.2 或 4.2.2 中没有（我没有更多设备）

应用程序调用返回结果的 jar 文件，当我在 2.3.7 中测试应用程序时，我调用 jar 并获取结果，但是当我使用 android 4.1.2 执行此操作时，它会强制关闭。这很奇怪，因为唯一的区别是操作系统，因为应用程序是相同的。

jar 文件调用互联网，我不认为这可能是错误

再次感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:52:33.850

> jar 文件调用互联网，我不认为这可能是错误

=> 抱歉，问题就在这里，正如您所说，您的应用程序在 < 2.3 版本中运行良好，但在 >2.3 中却没有，此失败背后的原因是**`NetworkOnMainThreadException`**。

**现在，为什么每当您在 >2.3 版本的设备中运行应用程序时都会引发此异常？**

=>`NetworkOnMainThreadException`每当应用程序尝试在其主线程上执行网络操作时都会发生。

## 解决方案：

以下是解决此问题的两种解决方案：

1) 标准方式是通过实现[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来进行 web 服务调用。

2）处理此问题的懒惰方法是检查：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:30:11.447

从 android 版本 4.0 (ICS) 开始，网络操作应该在 AsynTask 中运行。在 AsyncTask 中运行您的代码：

```
private class Task extends AsyncTask<Void, Void, Void> {

    private Exception exception;

    @Override
    protected Void doInBackground(Void... urls) { 
        /// run your network operations here     
        return null;         
    }

    @Override
    protected void onPostExecute(RSSFeed feed) {

   }     
}

 new Task ().execute(); 
```

# asp.net-mvc-3 - 如何将外部 CSS 应用于 Html Helper 类元素？

> ID：15831404
> 
> 赞同：1
> 
> 时间：2013-04-05T10:19:19.440
> 
> 标签：asp.net-mvc-3, css, external, html-helper

我在我的 aspx 页面中使用 DropDownList()、TextArea()、TextBox()、ListBox()。我想将外部 CSS 应用于它而不是内联 CSS。而且我不想使用 Id/Class 申请。那么如何通过名称将外部 CSS 应用于 HTML 助手类元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:18:13.103

使用 HTML 帮助类添加的控件将控件转换为简单的 HTML 元素/控件。

如果您要添加`Html.Dropdownlist()`，它将最终转换为`<select/>`。

因此，为此只需将您的 CSS 应用到`<select/>`.

并且对于将来只需从浏览器查看 PageSource ，您就会知道您的控件在哪个标签中被转换，您可以为该标签编写您的 css ...

# python - 使用线程的 NoneType 类型的对象

> ID：15831406
> 
> 赞同：0
> 
> 时间：2013-04-05T10:19:21.380
> 
> 标签：python, multithreading, thread-safety

我有以下课程

```
queue = Queue.Queue()
class SpectraProcessing(threading.Thread):
    def __init__(self, queue, pbar = None, image_infos = []):
        threading.Thread.__init__(self)
        self.queue = queue
        self.pbar = pbar
        self.image_infos = image_infos

    def run(self):
        while True:
        spectrum = self.queue.get()
        self.image_infos.append(get_spectrumInfos(spectrum))

        #signal to queue job has been done
        if self.pbar:
            self.pbar.update(self.pbar.currval + 1)
        self.queue.task_done() 
```

msrun 是使用 Reader 类创建的 Spectrum 对象的迭代器：

```
msrun = pimzml.run.Reader(file_imzML, file_ibd, MSn_Precision = 250e-6) 
```

每个光谱对象都有一个属性列表，它将（最初是 []）包含强度（浮点值）。我的主要功能包含：

```
number_spectra = len(msrun)   
print "start creating the image from spectra..."
pbar = ProgressBar( maxval = number_spectra ).start()

#spawn a pool of threads, and pass them a queue instance
image_infos = []
for i in range(number_spectra):
    t = SpectraProcessing(queue, pbar, image_infos)
    t.setDaemon(True)
    t.start()
#populate queue with data
for spectrum in msrun:
    queue.put(spectrum)

#wait on the queue until everything has been processed
queue.join() 
```

`get_spectrumInfos(spectrum)`run 方法调用的函数，处理（用强度填充列表，...）每个光谱的强度列表。当我执行时，我收到强度列表为 NoneType （即空）的错误，有时执行没有任何错误。不使用线程就没有错误。

非常感谢。

# email - Javamail /hMailServer 550 不允许向该地址投递

> ID：15831408
> 
> 赞同：0
> 
> 时间：2013-04-05T10:19:23.097
> 
> 标签：email, smtp, jakarta-mail

我正在努力`send emails with javamail and a local smtp serveur (hMailServer)`。你能告诉我javamail是否是用java发送电子邮件的最佳方式吗？

然后我有一个错误告诉我=> **550 Delivery is not allowed to this address** 我不明白这是它的格式还是它自己的地址：

堆栈跟踪：

```
SEVERE: Erreur dans le message
SEVERE: javax.mail.SendFailedException: Invalid Addresses;<br> 
```

`nested exception is:`

```
com.sun.mail.smtp.SMTPAddressFailedException: 550 Delivery is not allowed to this address.
at com.sun.mail.smtp.SMTPTransport.rcptTo(SMTPTransport.java:1835)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1098)
at javax.mail.Transport.send0(Transport.java:195)
at javax.mail.Transport.send(Transport.java:124)
at dao.SendEmail.sendEmail(SendEmail.java:51)
at beans.ActionBean.ajouter(ActionBean.java:59)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662) 
```

原因：com.sun.mail.smtp.SMTPAddressFailedException: 550 不允许向该地址投递。在 com.sun.mail.smtp.SMTPTransport.rcptTo(SMTPTransport.java:1686) ... 45 更多

```
public void sendEmail(Action action) {
    if (action.getCopieAction() != null) {
        try {

            Properties props = new Properties();
            String host = "localhost";
            props.setProperty("mail.smtp.host", host);
            props.setProperty("mail.from", "sakina@transat.fr");

            Session session = Session.getInstance(props);
            Message message = new MimeMessage(session);
            UtilisateurDao user = new UtilisateurDao();
            // récupération du code user de l'utilisateur

            Integer codeUserEnCopie = action.getCopieAction();
            System.out.println(codeUserEnCopie);
            Utilisateur util = user.findUserByCode(91);
            String mailUserCopie = util.getEmail();
            System.out.println(mailUserCopie);
            InternetAddress recipient = new InternetAddress(mailUserCopie);
            message.setRecipient(Message.RecipientType.TO, recipient);
            message.setSubject("Vous êtes en copie d'une action");

            message.setText("Bonjour, l'utilisateur "
                    + action.getUtilCreation()
                    + " vous à mis en copie d'une action:"
                    + "Nom de l'action : " + action.getObjetAction()
                    + "Détails de l'action : " + action.getTexteAction()
                    + "Date de l'action : " + action.getDateAction());

            Transport.send(message);
        } catch (NoSuchProviderException e) {
            System.err
                    .println("Pas de transport disponible pour ce protocole");
            System.err.println(e);
        } catch (AddressException e) {
            System.err.println("Adresse invalide");
            System.err.println(e);

        } catch (MessagingException e) {
            System.err.println("Erreur dans le message");
            System.err.println(e);

        }

    }

} 
```

送货地址和发件人地址是相同的，我尝试过使用其他地址，如 gmail 或 hotmail 仍然是同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:08:40.433

JavaMail 是使用 Java 发送电子邮件的最佳方式。

错误来自您的邮件服务器。它抱怨特定的收件人地址。您需要检查您的邮件服务器配置，以了解它为什么不允许您发送到该地址。这可能就像[您无法登录邮件服务器](http://www.oracle.com/technetwork/java/javamail/faq/index.html#smtpauth)一样简单，因此它不知道您是谁，因此不会让您发送到该地址。[协议跟踪](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)将提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T15:51:25.770

当您使用 javamail 时，您在 FROM 字段中输入的地址必须是您 hmailServer 中的现有帐户，即使服务器在物理上是相同的，如果 FROM 字段未在 hMailServer 中创建，您会收到此错误。

```
// The following account must be created in a hMailServer domain called qqq.com 
message.setFrom(new InternetAddress("xxx@qqq.com")); 
```

# c# - 使用 .NET 2.0 在 XP 上运行 .NET 4.5 程序

> ID：15831411
> 
> 赞同：3
> 
> 时间：2013-04-05T10:19:28.030
> 
> 标签：c#, .net, winforms, windows-xp, .net-4.5

我们有一个用 C# 5.0 为 .NET 4.5 编写的 Windows 服务。我的代码使用了一些较新的语言特性（`async`和`await`）和框架特性（`Task.Run`、、、、`Task.Delay`等`IProgress`）`CancellationToken`。

安装 .NET 4.5后，我们的产品在 Windows **7**和**8上运行良好。**我们的问题是，我们现在需要它在**XP**机器上运行。即使 .NET 4.5[可以安装在 Windows XP](http://msdn.microsoft.com/en-gb/library/8z6watww.aspx)上，这台机器上也没有足够的空间来安装它。

有什么方法可以让 .NET 4.5 应用程序在这台机器上运行？我已经研究过使用[Mono AOT Compiler](http://www.mono-project.com/AOT)或[NGen.exe](http://msdn.microsoft.com/en-GB/library/6t9t5wcf%28v=vs.80%29.aspx)将程序编译为本机代码，但我没有运气 - 我认为它们中的任何一个都没有真正实现我想要做的事情。

如果做不到这一点 - 我们曾考虑创建一个可启动的预安装闪存驱动器，它运行安装了我们的应用程序的简单版本的 Windows（如 WinPE？），但这超出了我的深度，我真的不知道从哪里开始。这是一个好主意吗？我怎么能接近这个？

我们的另一个选择是尝试安装 .NET 4.0 并使用[Async Targeting Pack](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack/)。

或者有人有其他想法吗？有什么方法可以在运行 .NET 2.0 的 XP 机器上构建/编译/运行我的 .NET 4.5 应用程序（利用 .NET 4.5 功能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:37:26.970

如果您只有一台 XP 计算机，请将其升级到 Windows 7。Windows 7 包含一个 XP 虚拟机，它可以与 Windows 7 程序（包括 .NET 4.5 应用程序）并行运行旧程序。

否则，您将不得不更改代码。最好的方法可能是使用[Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async/)以 .NET 4.0 为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:55:39.740

[AsyncBridge](https://github.com/OmerMor/AsyncBridge)类似于 MS Async Targeting Pack，但也可用于 .NET 3.5。

但是，它不适用于 .NET 2.0；因为任务并行库（定义`Task<T>`）[仅适用于 .NET 3.5](https://stackoverflow.com/questions/3500614/is-it-possible-to-use-the-task-parallel-library-tpl-in-c-sharp-2-0?lq=1)（并内置于 .NET 4.0）。

至于 Mono，要创建一个包含框架相关部分的独立应用程序，您需要创建一个[bundle](http://www.mono-project.com/Mono:Runtime#Bundles)，但我不确定 Windows 是否支持这些。`mono --aot`并且`ngen`只需预编译应用程序以在本地机器上更快地启动，它们不会消除安装框架的需要。

# android - 如何获取谷歌项目 ID 和 pushwoosh 应用 ID？

> ID：15831412
> 
> 赞同：8
> 
> 时间：2013-04-05T10:19:35.663
> 
> 标签：android, cordova, push-notification

我正在尝试从 phongap 推送通知。

我遵循以下教程 [http://www.pushwoosh.com/programming-push-notification/android-gcm-push-notifications-guide/](http://www.pushwoosh.com/programming-push-notification/android-gcm-push-notifications-guide/)

但我需要有**google 项目 id**和**pushwoosh 应用程序 id**。所以基本上得到这些ID的过程是什么..???

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:34:33.397

本指南显示您可以在哪里找到您的 Google 项目 ID：[http ://www.pushwoosh.com/programming-push-notification/enabling-gcm-services-for-google-api/](http://www.pushwoosh.com/programming-push-notification/enabling-gcm-services-for-google-api/)

Pushwoosh App ID 是您可以在 Pushwoosh 控制面板的应用程序页面上找到的应用程序代码 (XXXXX-XXXXX)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:11:44.767

转到[https://code.google.com/apis/console](https://code.google.com/apis/console)并在那里启用 GCM。您将在仪表板上看到项目 ID。（您甚至可以在登录后在 url 中看到项目 ID）

# python - XML 错误对象没有属性“cssselect”

> ID：15831414
> 
> 赞同：1
> 
> 时间：2013-04-05T10:19:41.660
> 
> 标签：python, xml, django, lxml

以下似乎无法正确解析 xml 数据或做错了什么。

这是正在运行的代码。

从 lxml 导入 etree 从 lxml.etree 导入 fromstring

```
if request.POST:

    xml = request.POST['xml'].encode('utf-8')
    parser = etree.XMLParser(ns_clean=True, recover=True, encoding='utf-8')
    h = fromstring(xml, parser=parser)
    status = h.cssselect('itagg_delivery_receipt status').text_content()
    return HttpResponse(status) 
```

错误：

**AttributeError：“lxml.etree._Element”对象没有属性“cssselect”状态**

这是正在发送的 xml 文档：

```
 <?xml version="1.1" encoding="ISO-8859-1"?>
<itagg_delivery_receipt>
<version>1.0</version>
<msisdn>447889000000</msisdn>
<submission_ref>
845tgrgsehg394g3hdfhhh56445y7ts6</
submission_ref>
<status>Delivered</status>
<reason>4</reason>
<timestamp>20050709120945</timestamp>
<retry>0</retry>
</itagg_delivery_receipt> 
```

我已经抛弃了 str(h)，它看起来像这样 `<element 0x7fd341e93870="" at="" itagg_delivery_receipt=""></element>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:45:01.200

以下是如何获得您想要的东西`xpath`：

```
>>> h.xpath('status/text()')
['Delivered'] 
```

因此，在您的代码中使用一个小辅助函数：

```
def first(seq,default=None):
  for item in seq:
    return item
  return default

...

status = first(h.xpath('status/text()')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:09:03.220

在使用[cssselect](https://pypi.python.org/pypi/cssselect)之前，您需要安装它

```
pip install cssselect 
```

# javascript - OOP Javascript，获取实例名称

> ID：15831415
> 
> 赞同：-1
> 
> 时间：2013-04-05T10:19:46.510
> 
> 标签：javascript, oop

我有一个对象，我写了一个实例：

```
var table1=new searchTable(someoptions) 
```

无论如何从对象内部以编程方式获取“table1”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:22:09.753

不，对象不知道它们被分配给什么变量和属性（可以有多个）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:22:25.987

*绝对没有办法做到这一点。*

当你这样做

```
LHS = RHS 
```

`RHS`不知道它的结果将被分配给什么。

# cakephp - 使用 cakephp 在控制器中修改并添加一个条件

> ID：15831416
> 
> 赞同：0
> 
> 时间：2013-04-05T10:19:46.363
> 
> 标签：cakephp

我在控制器中有这种情况，我从一张表中列出产品

```
$conditions = array('winner_id >' => 0, 'Product.beg' => '1', 'Product.status_id' => $status_id); 
```

我需要在这里再添加一个条件来检查哪个获胜者也支付了费用。所以我还有一个表帐户，并且我在产品表中有获胜者 ID。那么我将如何在此处添加条件，以便在相同条件下检查帐户表中的获胜者 ID。

只需要再添加一个条件，即从 Product 表中获取 Winner_id 并在 Accounts 表中进行搜索，并仅显示 Accounts 表中的那些 id

我试过这种方式但没有工作：

```
$conditions = array('winner_id >' => 0, 'Product.beg' => '1', 'Product.status_id' => $status_id, array('conditions' => array('Product.winner_id' => $this->'Account.user_id'))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:29:07.517

如果基于某些`if`条件您想添加`condition`到此可能会有所帮助.. 如果我遗漏了什么，请纠正我。

```
if(condition)
{
    $conditions + = array('field_name' => 'field_value');
} 
```

# c# - 显示 ToolStripTextBox 添加运行时的文本属性

> ID：15831422
> 
> 赞同：0
> 
> 时间：2013-04-05T10:20:12.490
> 
> 标签：c#, menustrip

我`menustrip`在我的应用程序中添加了运行时。

```
MenuStrip MS = new MenuStrip();
ToolStripMenuItem MN1 = new ToolStripMenuItem("&New"); 
```

我正在进一步为 keyup 事件添加一个带有事件处理程序的文本框。

```
ToolStripTextBox qry = new ToolStripTextBox();
qry.KeyUp += new KeyEventHandler(tools23);

public void tools23(Object sender,KeyEventArgs e) 
{ 
    if(e.KeyValue ==13)
    {
        MessageBox.Show(the text entered in the toolstriptextbox);
    } 
```

引发事件时如何显示文本框内容，因为我无法访问添加的运行时控件的文本属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:12:37.347

尝试这个

```
 public void tools23(Object sender, KeyEventArgs e)
        {
            if (e.KeyValue == 13)
            {
                ToolStripTextBox t = (ToolStripTextBox)sender;
                MessageBox.Show("the text entered in the toolstriptextbox is " + t.Text);
            }
        } 
```

# layout - 使用窗口调整大小缩小或扩大边距

> ID：15831423
> 
> 赞同：0
> 
> 时间：2013-04-05T10:20:14.853
> 
> 标签：layout, margin, css

这是我一直在摆弄的代码：http: [//jsfiddle.net/denWG/3/](http://jsfiddle.net/denWG/3/)

首先，您需要展开包含 HTML 和 CSS 的右列。注意灰色容器如何扩展和收缩到可用宽度的 90%。

```
#container
{
    width: 90%;

    margin: 16px auto;
    /* More rules... */
} 
```

理想情况下，我希望绿色框从容器的右壁开始。随着窗口的缩小，它会将右边框推到更靠近左边框的位置。我希望绿盒子有这种行为。随着窗口缩小，我希望右边框将绿色框推向红色框。

两个盒子都是`display: inline-block;`。

最初，我想添加`margin-right: some%;`到红色框中，但并没有像我想象的那样工作。

最终，我想要一个由红色和绿色框组成的网格。我正确地接近这个吗？有什么建议吗？太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:36:40.607

我更改了以下CSS：

```
 #container {
        width: 90%;
        margin: 16px auto;
        padding: 16px;
        position:relative;  /* added */
        border: solid 1px #333;
        background-color: #eee;
        min-width: 280px;
    }

    #greenBox {
        width: 128px;
        height: 128px;
        position:absolute;  /* added */
        top:16px;
        right:16px;
        background-color: green;
    } 
```

**[工作小提琴](http://jsfiddle.net/denWG/4/)**

# android - 无法在我的视图 android 上绘制背景设置的图像

> ID：15831424
> 
> 赞同：1
> 
> 时间：2013-04-05T10:20:16.273
> 
> 标签：android, image, draw, paint

这是我可以在视图上绘制的代码，但是当我为视图设置背景时，我无法在背景图像上绘制，请帮帮我。提前致谢

```
 public class FingerPaint extends GraphicsActivity
  implements MyColorPickerDialog.OnColorChangedListener {    

   ListView dialog_ListView;
   String[] listContent = {
        "Stroke Size 1", "Stroke Size 2", "Stroke Size 3", "Stroke Size 4", 
        "Stroke Size 5","Stroke Size 10","Stroke Size 20","Stroke Size 30"
};
String[] effectContent = {
        "Normal", "Blur", "Emboss", "SrcATop" };
private static  int FONT_SIZE=5;
private static int COLOR_CODE=Color.BLACK;
public int mPos;
private Bitmap  mBitmap;
MyView mv;

ImageShowActivity imageShowActivity =new ImageShowActivity();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mv= new MyView(this);
    mv.setDrawingCacheEnabled(true);
    //mv.setBackgroundResource(R.drawable.image1_layer1);
    setContentView(mv);
    initialiazation();
    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
            0.4f, 6, 3.5f);

    mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);// TODO Auto-generated method stub
    loadImageToEddit();
}

private void initialiazation() {
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(COLOR_CODE);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(FONT_SIZE);

}
private void loadImageToEddit() {

    Bundle bundle=getIntent().getExtras();
    if(bundle!=null){
        int  pos=bundle.getInt("image_path");
        if(pos!=0){
            // Bitmap bitmap =BitmapFactory.decodeFile(ImageShowActivity.imagePathList.get(path));
            //   mv=new MyView(this,bitmap);
            //Drawable d = new BitmapDrawable(getResources(),bitmap);
            //mv.setBackground(d);
            mPos=pos;

        }
    }
}

private Paint       mPaint;
private MaskFilter  mEmboss;
private MaskFilter  mBlur;

public void colorChanged(int color) {
    mPaint.setColor(color);
    COLOR_CODE=color;
}

private void fontChanged(Float size){
    mPaint.setStrokeWidth(size);
}
private void showEffectDialog(){
    final Dialog    dialog = new Dialog(FingerPaint.this);
    dialog.setContentView(R.layout.font_dialog);
    dialog.setCancelable(true);
    dialog.setTitle("Font");
    WindowManager.LayoutParams params = new WindowManager.LayoutParams();
    params.width=200; params.height=250;
    params.gravity =  Gravity.CENTER_HORIZONTAL;       
    dialog.getWindow().setAttributes(params);
    ArrayAdapter<String> ad =new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,effectContent);

    ListView list = (ListView) dialog.findViewById(R.id.dialoglist);
    list.setAdapter(ad);
    dialog.show();
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                long arg3) {
            switch (pos) {
            case 0:
                mPaint.setMaskFilter(null);
                initialiazation();

                break;
            case 1:
                mPaint.setMaskFilter(null);
                //initialiazation();
                mPaint.setStrokeWidth(FONT_SIZE);
                if (mPaint.getMaskFilter() != mBlur) {
                    mPaint.setMaskFilter(mBlur);
                } else {
                    mPaint.setMaskFilter(null);
                }

                break;
            case 2:
                mPaint.setMaskFilter(null);
                if (mPaint.getMaskFilter() != mEmboss) {
                    mPaint.setMaskFilter(mEmboss);
                } else {
                    mPaint.setMaskFilter(null);
                }
                break;
            case 3:
                mPaint.setMaskFilter(null);
                mPaint.setXfermode(new PorterDuffXfermode(
                        PorterDuff.Mode.SRC_ATOP));
                mPaint.setAlpha(0x80);
                break;

            default:
                break;
            }
            dialog.dismiss();

        }
    });

}
private void showDialog(){
    final Dialog    dialog = new Dialog(FingerPaint.this);
    dialog.setContentView(R.layout.font_dialog);
    dialog.setCancelable(true);
    dialog.setTitle("Font");
    WindowManager.LayoutParams params = new WindowManager.LayoutParams();
    params.width=200; params.height=250;
    params.gravity =  Gravity.CENTER_HORIZONTAL;       
    dialog.getWindow().setAttributes(params);
    ArrayAdapter<String> ad =new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,listContent);

    ListView list = (ListView) dialog.findViewById(R.id.dialoglist);
    list.setAdapter(ad);
    dialog.show();
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                long arg3) {
            switch (pos) {
            case 0:
                FONT_SIZE=1;
                fontChanged(1f);
                break;
            case 1:
                FONT_SIZE=2;
                fontChanged(2f);
                break;
            case 2:
                FONT_SIZE=3;
                fontChanged(3f);
                break;
            case 3:
                FONT_SIZE=4;
                fontChanged(4f);
                break;
            case 4:
                FONT_SIZE=5;
                fontChanged(5f);
                break;
            case 5:
                FONT_SIZE=10;
                fontChanged(10f);
                break;
            case 6:
                FONT_SIZE=20;
                fontChanged(20f);
                break;
            case 7:
                FONT_SIZE=30;
                fontChanged(30f);
                break;
            default:
                break;
            }
            dialog.dismiss();

        }
    });

}

public class MyView extends View {

    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);
        //            DisplayMetrics dm = new DisplayMetrics();
        //            getWindowManager().getDefaultDisplay().getMetrics(dm);
        //            int w = dm.widthPixels; 
        //            int h=dm.heightPixels;
        //            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        // mBitmap.eraseColor(c)

        //            mCanvas = new Canvas(mBitmap);
        //            mCanvas.drawColor(0xFFAAAAAA);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        // mPaint.setStrokeWidth(FONT_SIZE);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        if(mPos!=0){
            Bitmap bitmap =BitmapFactory.decodeFile(ImageShowActivity.imagePathList.get(mPos));
            mBitmap=bitmap;
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            //canvas.drawPath(mPath, mPaint);
            Log.d("onDraw", "if called");

            //invalidate();
        }else{
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            Log.d("onDraw", "else called");

        }

        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
        }
        return true;
    }
}

private static final int COLOR_MENU_ID = Menu.FIRST;
private static final int FONT_ID = Menu.FIRST + 1;
private static final int BLUR_MENU_ID = Menu.FIRST + 2;
private static final int ERASE_MENU_ID = Menu.FIRST + 3;
private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
    menu.add(0, FONT_ID, 0, "Font Size").setShortcut('4', 's');
    menu.add(0, BLUR_MENU_ID, 0, "Effects").setShortcut('5', 'z');
    menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
    menu.add(0, SRCATOP_MENU_ID, 0, "Save").setShortcut('5', 'z');

    /****   Is this the mechanism to extend with filter effects?
    Intent intent = new Intent(null, getIntent().getData());
    intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
    menu.addIntentOptions(
                          Menu.ALTERNATIVE, 0,
                          new ComponentName(this, NotesList.class),
                          null, intent, 0, null);
     *****/
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    mPaint.setXfermode(null);
    mPaint.setAlpha(0xFF);

    switch (item.getItemId()) {
    case COLOR_MENU_ID:
        //  initialiazation();

        new MyColorPickerDialog(this,this, Color.RED, false).show();
        return true;
    case FONT_ID:

        showDialog();
        //emboss
        //              
        return true;
    case BLUR_MENU_ID:
        showEffectDialog();
        //                
        return true;
    case ERASE_MENU_ID:
        //initialiazation();
        mPaint.setAlpha(0xFF);//transperent color
        mPaint.setMaskFilter(null);

        mPaint.setXfermode(new PorterDuffXfermode(
                PorterDuff.Mode.CLEAR));

        return true;
    case SRCATOP_MENU_ID:
        //                mPaint.setXfermode(new PorterDuffXfermode(
        //                                                    PorterDuff.Mode.SRC_ATOP));
        //                mPaint.setAlpha(0x80);

        saveImageDialog2();
        return true;
    }
    return super.onOptionsItemSelected(item);
}
//src fingerpaint.java

private void saveImageDialog2() {
    AlertDialog.Builder editalert = new AlertDialog.Builder(FingerPaint.this);
    editalert.setTitle("Please Enter the name with which you want to Save");
    final EditText input = new EditText(FingerPaint.this);
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.MATCH_PARENT);
    input.setLayoutParams(lp);
    editalert.setView(input);
    editalert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

            String name= input.getText().toString();
            Bitmap bitmap = mv.getDrawingCache();
            File    directory= new File(Environment.getExternalStorageDirectory(),"Hand Brush/");

            File    myPath=new File(directory,name);
            File file = new File(myPath+".png");           
            try 
            {
                if(!file.exists())
                {
                    file.createNewFile();
                }
                FileOutputStream ostream = new FileOutputStream(file);
                bitmap.compress(CompressFormat.PNG, 10, ostream);
                //System.out.println("saving......................................................"+path);
                ostream.close();
                mv.invalidate();                            
            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }finally
            {

                mv.setDrawingCacheEnabled(false);                           
            }
        }
    });

    editalert.show();       
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:41:40.073

在 onDraw() 中删除它

canvas.drawColor(Color.White);

```
mv= new MyView(this);
mv.setDrawingCacheEnabled(true);
mv.setBackgroundResource(R.drawable.afor);
setContentView(mv); 
```

抽奖时

```
@Override
protected void onDraw(Canvas canvas) {
super.onDraw(canvas);
   canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
   canvas.drawPath(mPath, mPaint);
  } 
```

快照

![在此处输入图像描述](https://i.stack.imgur.com/XaZyo.png)

# c++ - c++ 标准是否支持非常量数据成员作为数组边界？

> ID：15831435
> 
> 赞同：1
> 
> 时间：2013-04-05T10:20:46.707
> 
> 标签：c++

请参阅以下代码：

```
class X {
    int a;
public:
    void foo() {
        char arr[a]; // a is not a constant variable, but g++ doesn't report error, why?
    }
}; 
```

一直以为数组边界只能使用常量表达式，直到今天遇到了上面的奇怪代码。g++和clang++都可以编译成功。但我在 C++ 标准中找不到任何支持它的描述。它是编译器的扩展内容吗？我在哪里可以找到关于它的一些描述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:21:35.953

不，C++ 标准不支持[VLA](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:22:25.610

您的编译器正在尝试使用非标准的[可变长度数组](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)功能。

坦率地说，我发现它并不总是能正常工作。不知道为什么会这样，但我已经学会避免它。

# ajax - ajax prestashop 1.5 前端控制器

> ID：15831443
> 
> 赞同：1
> 
> 时间：2013-04-05T10:21:19.217
> 
> 标签：ajax, controller, prestashop

如何在 prestashop 中的控制器调用的新页面中进行 ajax 调用。例子：

-我在根文件夹中有一个表单页面调用 formulario.php -此页面在控制器文件夹中调用 FormularioController.php 并向我展示了完美的 tpl 和页面，tpal 在主题/默认文件夹中

但是，当我进行 Ajax 调用以检查表单并将错误或结果加载到 div 中时，它会再次将所有页面放入该 div 中，而不仅仅是我调用的 response.php。

如何解决此问题的任何想法，或从页面进行 ajax 调用的指南。prestashop 关于 ajax 的文档不清楚

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T19:26:28.453

你找到这个页面了吗？ [http://doc.prestashop.com/display/PS15/Using+jQuery+and+Ajax#UsingjQueryandAjax-MakingAjaxcallswithjQuery](http://doc.prestashop.com/display/PS15/Using+jQuery+and+Ajax#UsingjQueryandAjax-MakingAjaxcallswithjQuery)

我用它来开发我的模块。它还可以帮助您对使用 ajax 调用的其他模块进行大量使用（不记得哪些模块使用了）。

以下是如何进行 ajax 调用：

```
var query = $.ajax({
  type: 'POST',
  url: baseDir + 'modules/mymodule/ajax.php',
  data: 'method=myMethod&id_data=' + $('#id_data').val(),
  dataType: 'json',
  success: function(json) {
    // ....
  }
}); 
```

然后，您只需要创建 PHP 文件。使用这种方式，不会加载 Prestashop 核心，因此如果要使用 Prestashop 功能，则必须手动执行：

```
// HTTP headers for no cache etc
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

require_once(dirname(__FILE__).'/../../config/config.inc.php');
require_once(dirname(__FILE__).'/../../init.php'); 
```

要生成 JSON 输出，您可以使用：

```
die(Tools::jsonEncode($myArrays)); 
```

希望你得到你需要的东西。

# c# - 拥有多个 DoWorkEventHandlers 是不好的做法吗？

> ID：15831445
> 
> 赞同：3
> 
> 时间：2013-04-05T10:21:23.853
> 
> 标签：c#, backgroundworker

我有一个将执行不同验证的 Gui 应用程序。由于其中一些验证可能需要更长的时间，因此我在 BackgroundWorker 中运行它们，当前代码如下所示：

```
//sample validator interface
public interface Validator
{
    void Validate();
}

//BGWs DoWork-method:

private void myBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    ValidatorA.Validate();
    ValidatorB.Validate();
    ValidatorC.Validate();
} 
```

现在有一些验证器也必须支持取消。这可以通过添加一堆代码来实现，或者我可以这样做：

```
public interface Validator
{
    void DoValidationWork(object sender, DoWorkEventArgs e);
}

class NormalValidator
{
    void DoValidationWork(object sender, DoWorkEventArgs e)
    {
        //validation-work
    }
}

class CancelableValidator
{
    void DoValidationWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker bgw = sender as BackgroundWorker;
        while(!bgw.CancellationPending)
        {
            //validation-work
        }
    }
}

//setup
myBGW.DoWork += ValidatorA.DoValidationWork;
myBGW.DoWork += CancelableValidatorB.DoValidationWork;
myBGW.DoWork += ValidatorC.DoValidationWork; 
```

根据我的理解，这将产生相同的结果，但每个验证者都可以自行处理取消。

拥有多个 DoWork 处理程序是否可以，或者这是不好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:44:01.747

您可能会发现对其中的大多数使用内联匿名函数更简洁。例如：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (s, dwe) =>
{
    dwe.result = ...
    // do work here
};
worker.RunWorkerCompleted += (s, rwe) =>
{
    if (rwe.Error != null) {
        // show dialog/message
    } else {
        var something = rwe.Result;
    }
};
worker.RunWorkerAsync(); 
```

# python-3.x - Python3 re.split() 通过不在特殊子字符串中的字符

> ID：15831447
> 
> 赞同：0
> 
> 时间：2013-04-05T10:21:28.263
> 
> 标签：python-3.x, tokenize

我正在尝试解析和验证语言。我想标记输入以检查语法。我的输入字符串是：

```
something > 0 AND (something CONTAINS "substr" OR NOT something) 
```

如果我这样做：

```
tokens = re.split(r"([\s()])", input) 
```

我懂了：

```
['something', ' ', '>', ' ', '0', ' ', 'AND', ' ', '', '(', 'something', ' ', 'CONTAINS','   ', '"substr"', ' ', 'OR', ' ', 'NOT', ' ', 'something', ')', ''] 
```

这正是我想要的。但是，总有“东西”。如果我用“substr with whitespace”替换“ **substr”** **，**我得到了这个数组，这不是完美的结果：

 **```
['"substr', ' ', 'with', ' ', 'whitespace"'] 
```

有什么办法可以拆分为跟随？

```
['"substr with whitespace"'] 
```

或者如何有效地修复这种“如此接近的分裂”？或者也许我错过了一些不同的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:59:32.627

只是想分裂

```
re.split(r"\s*(NOT|AND|OR|\(|\)|CONTAINS|<|>|=)\s*", input) 
```

解决了我的问题**

# php - 如果在 php 的 div 标签中，class 和 id 都写会发生什么？

> ID：15831451
> 
> 赞同：-2
> 
> 时间：2013-04-05T10:21:36.123
> 
> 标签：php, joomla2.5

我在 joomla 2.5 beez2 主题的 index.php 文件中找到了代码，如下所示。请帮我解决这个代码。因为我无法清楚地理解这段代码实际上将包含什么......类或id？

```
<div class="left1 <?php if ($showRightColumn==NULL){ echo 'leftbigger';} ?>" id="nav"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:23:21.773

两个都。开始标签可以有多个属性。

根据 的分辨率，输出将`if`是以下之一：

```
<div class="left1 " id="nav">
<div class="left1 leftbigger" id="nav"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:23:32.973

`class`它增加了一秒钟`div`

因此，在 CSS 中，您可以`div`通过任一类或两个类访问。

HTML：

```
<div class="first second">

</div> 
```

CSS：

```
.first{

}

.second{

}

.first.second{

} 
```

# mysql - 通过将行旋转为动态列数在 MySQL 中创建摘要视图

> ID：15831453
> 
> 赞同：4
> 
> 时间：2013-04-05T10:21:47.090
> 
> 标签：mysql, sql, group-by, pivot, case

我在 MySQL 中有一个包含以下字段的表：

```
id, company_name, year, state 
```

同一客户和年份有多行，以下是数据示例：

```
 id | company_name  | year | state
----------------------------------------
    1  | companyA      | 2008 | 1
    2  | companyB      | 2009 | 2
    3  | companyC      | 2010 | 3
    4  | companyB      | 2009 | 1
    5  | companyC      | NULL | 3 
```

我正在尝试从此表中创建一个视图，以显示每行一家公司（即`GROUP BY`pubco_name），其中状态为给定年份的最高值。

这是我尝试创建的视图示例：

```
 id | cuompany_name | NULL | 2008 | 2009 | 2010
--------------------------------------------------
    1  | companyA      | NULL | 1    | NULL | NULL
    2  | companyB      | NULL | 2    | NULL | NULL
    3  | companyC      | 3    | NULL | NULL | 3 
```

还有比这更多的数据，但你可以看到我想要完成的事情。

我不知道如何选择每年的最大状态并按 pubco_name 分组。这是我到目前为止的 SQL（我认为我们需要在这里使用`CASE`和/或`sub-selects`）：

```
SELECT
id,
company_name,
SUM(CASE WHEN year = 2008 THEN max(state) ELSE 0 END) AS 2008,
SUM(CASE WHEN year = 2009 THEN max(state) ELSE 0 END) AS 2009,
SUM(CASE WHEN year = 2010 THEN max(state) ELSE 0 END) AS 2010,
SUM(CASE WHEN year = 2011 THEN max(state) ELSE 0 END) AS 2011,
SUM(CASE WHEN year = 2012 THEN max(state) ELSE 0 END) AS 2012,
SUM(CASE WHEN year = 2013 THEN max(state) ELSE 0 END) AS 2013
FROM tbl
GROUP BY company_name
ORDER BY id DESC 
```

提前感谢您的帮助和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:07:44.023

您需要对表进行透视，但 mysql 没有任何这样的透视功能

所以我们需要复制它的功能

**已编辑**

```
Select 
  group_concat(
    DISTINCT 
       if(year is null,
          CONCAT('max(if (year is null, state, 0)) as ''NULL'' '),
          CONCAT('max(if (year=''', year, ''', state, 0)) as ''',year, ''' '))
    ) into @sql from tbl join (SELECT @sql:='')a;
set @sql = concat('select company_name, ', @sql, 'from tbl group by company_name;');
PREPARE stmt FROM @sql;
EXECUTE stmt; 
```

**结果**

```
| COMPANY_NAME | 2008 | 2009 | 2010 | NULL |
--------------------------------------------
|     companyA |    1 |    0 |    0 |    0 |
|     companyB |    0 |    2 |    0 |    0 |
|     companyC |    0 |    0 |    3 |    3 | 
```

## **[SQL 小提琴](http://sqlfiddle.com/#!2/a013c/22)**

有两种方法可以解决您的问题 1\. 为每年创建案例，这在您的情况下是不可能的，因为我们正在处理第 2 年。动态生成查询，以便我们根据您的需要获得适当的列。

我根据生成查询并将其存储在`@sql`变量中的第二种解决方案给出了解决方案。在小提琴中，我`@sql`在执行之前打印了它的内容。

```
select company_name, max(if (year='2008', state, 0)) as '2008' ,max(if (year='2009', state, 0)) as '2009' ,max(if (year='2010', state, 0)) as '2010' ,max(if (year is null, state, 0)) as 'NULL' from tbl group by company_name; 
```

有关`group_concat()`通过链接 **[GROUP_CONCAT](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)**和 **[USER DEFINED VARIABLE的更多信息](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)**

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:33:20.207

请参阅[此问题](https://stackoverflow.com/questions/7674786/mysql-pivot-table)答案中链接的页面。

请注意，执行此操作时，您*必须*提前指定输出中所需的列数。

针对下面的评论，这里是一个简单/基本的实现，它重现了上面的结果表（除了 ID 列；没有意义，因为结果中的每一行可以汇总输入表中的多行）

```
SELECT
   `company_name`,
   NULLIF(SUM(CASE WHEN `t3`.`year` IS NULL THEN `t3`.`state` ELSE 0 END), 0) AS `null`,
   NULLIF(SUM(CASE WHEN `t3`.`year` = 2008 THEN `t3`.`state` ELSE 0 END), 0) AS `2008`,
   NULLIF(SUM(CASE WHEN `t3`.`year` = 2009 THEN `t3`.`state` ELSE 0 END), 0) AS `2009`,
   NULLIF(SUM(CASE WHEN `t3`.`year` = 2010 THEN `t3`.`state` ELSE 0 END), 0) AS `2010`
FROM
(
   SELECT
   `t1`.`id`,
   `t1`.`company_name`,
   `t1`.`year`,
   `t1`.`state`
   FROM `tbl` `t1`
   WHERE `t1`.`state` = (
      SELECT MAX(`state`)
      FROM `tbl` `t2`
      WHERE `t2`.`company_name` = `t1`.`company_name`
      AND (`t2`.`year` IS NULL AND `t1`.`year` IS NULL OR `t2`.`year` = `t1`.`year`)
   )
) `t3`
GROUP BY `t3`.`company_name`; 
```

这使用嵌套查询：内部查询（带有`t1`和`t2`别名）查找每个年份和公司的最大状态行（除非您可以确定这是唯一的，否则它将中断！），外部`t3`查询.

我会对此进行彻底测试，以确保在真实数据上的性能是可以接受的。

# php - 如何将 Html 代码转换为相关的 Unicode 字符

> ID：15831454
> 
> 赞同：0
> 
> 时间：2013-04-05T10:21:48.203
> 
> 标签：php, unicode

其实我google了很多，我也探索过这个论坛，但是这是我的第二天，我找不到解决方案。

我的问题是我想转换 Html 代码

```
&#1576;&#1575;&#1582; 
```

到其相等的 unicode 字符

```
خ ا ب 
```

实际上我不想将所有的 html 符号转换为 unicode 字符。我只想将阿拉伯语/乌尔都语 html 代码转换为 unicode 字符。这些字符的范围是`from &#1563; To &#1785;`如果没有任何 PHP 函数，那么我怎样才能一次性用它们相等的 unicode 字符替换这些代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:31:24.423

我想你正在寻找：

```
html_entity_decode('&#1576;&#1575;&#1582;', ENT_QUOTES, 'UTF-8'); 
```

当你从 ب 到 ب，这叫解码。做相反的事情称为编码。

至于仅替换 ؛ 中的字符 到 ۹ 也许尝试这样的事情。

```
<?php

// Random set of entities, two are outside the 1563 - 1785 range.
$entities = '&#1563;&#1564;&#60;&#1604;&#241;&#1784;&#1785;';

// Matches entities from 1500 to 1799, not perfect, I know.
preg_match_all('/&#1[5-7][0-9]{2};/', $entities, $matches);

$entityRegex = array(); // Will hold the entity code regular expression.
$decodedCharacters = array(); // Will hold the decoded characters.

foreach ($matches[0] as $entity)
{
    // Convert the entity to human-readable character.
    $unicodeCharacter = html_entity_decode($entity, ENT_QUOTES, 'UTF-8');

    array_push($entityRegex, "/$entity/");
    array_push($decodedCharacters, $unicodeCharacter);
}

// Replace all of the matched entities with the human-readable character.
$replaced = preg_replace($entityRegex, $decodedCharacters, $entities);

?> 
```

这是我能解决的最接近的问题。希望这会有所帮助。我现在是早上 5:00，所以我要睡觉了！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:27:56.157

您是否尝试过 html 头中的 utf-8 编码？

```
<meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:29:04.830

尝试这个

```
 <?php
$trans_tbl = get_html_translation_table(HTML_ENTITIES);
foreach($trans_tbl as $k => $v)
{
    $ttr[$v] = utf8_encode($k);
}
$text = '&#1576;&#1576;....;&#1582';
$text = strtr($text, $ttr);
echo $text;
 ?> 
```

对于 mysql 解决方案，您可以将字符集设置为

```
 $mysqli = new mysqli($host, $user, $pass, $db);

   if (!$mysqli->set_charset("utf8")) {
    die("error");

    } 
```

# html - IE 中的边框看起来比 Chrome 中的粗

> ID：15831456
> 
> 赞同：2
> 
> 时间：2013-04-05T10:21:49.437
> 
> 标签：html, internet-explorer, google-chrome, border

我遇到了以下问题：我创建了一个 html 表。在该表的某些列上，我的 css 使用以下语法应用右边框：

```
 .right-border {
     border-right: 1px solid @tableBorderColor;
 } 
```

边框在 Chrome 中看起来不错。但是，当我切换到 IE 时，边框看起来会是 2px 而不是 1px。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:42:07.047

对不起所有试图回答我问题的人：

但正如我刚刚发现的那样 - 我只是愚蠢地使用我的浏览器的缩放。似乎我昨天出于测试目的更改了浏览器的缩放级别，之后忘记将其设置回来。因此，当我今天检查边框厚度时，由于缩放级别，它看起来像 2px。由于我在同一页面上有一些 div，它们也有 1px 边框并且看起来很正常，所以我有点困惑，认为 IE 一定有问题。

太对不起大家了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:42:45.950

如果你不能给我们检查代码，我建议放一个`DIV`里面，这样可以很容易给一些风格，也可以避免跨浏览器失败（包括FF和IE）

```
<table>
    <tr>
        <td><div>lorem ipsum</div></td>
        <td><div>lorem ipsum</div></td>
        <td><div>lorem ipsum</div></td>
    </tr>
</table> 
```

编辑：我看到你现在回复......至少它很容易解决！

# knockout.js - 比较 2 个具有不同结构的可观察数组并标记匹配的行被选中

> ID：15831469
> 
> 赞同：0
> 
> 时间：2013-04-05T10:22:43.627
> 
> 标签：knockout.js

假设我有以下 2 个可观察数组

```
var data1 = [{
name1: "one",
id: 1,
IsSelected: false
  }, 
{
name1: "two",
id: 2,
IsSelected: false
 }, 
{
name1: "three",
id: 3,
IsSelected: false
}];

var data2 = [{
 name2: "five"
 }, 
 {
 name2: "two"
 }, 
 {
 name2: "three"
}]; 
```

从 2 个数组中，您可以看到 2 行匹配“二”和“三”。那些匹配的行绑定到复选框并标记为选中。

现在我想要的是如果行匹配，那么如果行匹配，它应该将 IsSelected 属性设置为 true。

我知道展平阵列会使结构与 2 个阵列相同。但我想要的是比较 2 个数组，如果数据匹配，则将 IsSelected 属性标记为 true。

如果有的话，这是[为了](http://jsfiddle.net/Jq3ru/84/)减少你的困惑。

我真的没有想法来实现这一目标。在小提琴中，您可以看到选中了 2 个框，但旁边显示为 false。它应该显示为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:13:46.457

可能[这](http://jsfiddle.net/damienobringer/Jq3ru/103/)会有所帮助

```
self.isDuplicated = function (item) {
    var data2 = viewModel.dataTwo();
    for (var index = 0; index < data2.length; index++) {
        if (data2[index].name == item.name) return true;
    }
    return false;
}; 
```

# c++ - 返回值语法和模板不起作用

> ID：15831470
> 
> 赞同：1
> 
> 时间：2013-04-05T10:22:45.400
> 
> 标签：c++, c++11

为什么这段代码失败了

> 错误 C2893：无法专门化函数模板 ''unknown-type' makeAndProcessObject(const Builder &)'

我正在使用 MSVC2012

```
class BBuilder
{
public:
    int makeObject()
    {
        return 22;
    }
};

template <typename Builder>
auto
makeAndProcessObject (const Builder& builder) -> decltype( builder.makeObject() )
{
    auto val = builder.makeObject();
    // do stuff with val
    return val;
}

int main()
{
    BBuilder myobj;
    auto retval = makeAndProcessObject(myobj);

    return 0;
} 
```

（现场[示例](http://liveworkspace.org/code/1zimN5%242)）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T10:24:23.577

你的函数`makeObject`应该是 const，因为你试图在 上调用这个函数`constant object`，然后一切正常。[例子](http://liveworkspace.org/code/1zimN5$3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:26:57.663

问题是

```
makeAndProcessObject (const Builder& builder) receives a const builder 
```

但 makeObject() 函数不是 const ！所以它不能推断出回报......你可以删除 const 限定符或 makeObject const 所以它可以找到函数：

```
int makeObject() const
{
    return 22;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T11:42:38.317

由于 makeAndProcessObject 函数采用常量引用对象，因此它无法访问非常量成员函数（builder.makeObject()）。将 makeObject() 转换为常量成员函数 [Ex :int makeObject() const] 或在 builder.makeObject() 模板函数中使用非常量对象 [例如：makeAndProcessObject (Builder& builder)]

问候， 希瓦库玛

# css - 避免继承 CSS superfish 菜单中的子菜单项

> ID：15831473
> 
> 赞同：0
> 
> 时间：2013-04-05T10:22:55.557
> 
> 标签：css, superfish

我需要更多关于我的超级鱼菜单的帮助： [http ://web288.merkur.ibone.ch/klingler/](http://web288.merkur.ibone.ch/klingler/)

我想修改悬停和当前的主要按钮。然而，这也改变了我不想要的子菜单条目。我不是 CSS 专家，但不知何故子菜单条目确实继承了这些属性。我试图添加的是以下内容

```
.sf-menu a:hover,
.sf-menu li.current a,
.sf-menu li.sfHover a {
    background: #e24c4c url(../../images/bg-top-a-active.png) no-repeat center bottom;
    margin: 5px;
    padding: 0 10px;
    height: 35px;
    line-height: 35px;
    border-radius: 5px; 
```

}

这对主按钮做了我想要的，但它也改变了子菜单条目......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:33:56.350

据我了解，您只想选择作为 li.current 或 li.sfHover 的直接子级的 a 元素。

```
.sf-menu a:hover,
.sf-menu li.current > a,
.sf-menu li.sfHover > a { 
```

# asp.net-mvc - Asp.net MVC web api Response.CreateResponse 发送奇怪的内容

> ID：15831478
> 
> 赞同：0
> 
> 时间：2013-04-05T10:23:23.797
> 
> 标签：asp.net-mvc, asp.net-web-api, base64, httpresponse

我目前正在使用 Windows Compact Framework 3.5 与移动设备通信。发送到设备的消息是这样构建的，

```
HttpResponseMessage result;
var response = Encoding.UTF8.GetBytes("<?xml version=\"1.0\" encoding=\"windows-1252\"?><message type=\"response\"><header><datetime>2013-04-03T09:49:35</datetime><sender version=\"1.1.4.1138\"><userid>Connect Server</userid></sender><commandlist><module>ADMIN</module><command1>VALIDATE</command1></commandlist><result type=\"ok\"/></header></message>");

result = Request.CreateResponse(HttpStatusCode.OK, response); 
```

设备然后检索消息，然后使用

```
Encoding.UTF8.GetString(responseContent); 
```

解码后的消息是：

```
&lt;base64Binary xmlns="http://schemas.microsoft.com/2003/10/Serialization/"&gt;PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0id2luZG93cy0xMjUyIj8+PG1lc3NhZ2UgdHlwZT0icmVzcG9uc2UiPjxoZWFkZXI+PGRhdGV0aW1lPjIwMTMtMDQtMDNUMDk6NDk6MzU8L2RhdGV0aW1lPjxzZW5kZXIgdmVyc2lvbj0iMS4xLjQuMTEzOCI+PHVzZXJpZD5Db25uZWN0IFNlcnZlcjwvdXNlcmlkPjwvc2VuZGVyPjxjb21tYW5kbGlzdD48bW9kdWxlPkFETUlOPC9tb2R1bGU+PGNvbW1hbmQxPlZBTElEQVRFPC9jb21tYW5kMT48L2NvbW1hbmRsaXN0PjxyZXN1bHQgdHlwZT0ib2siLz48L2hlYWRlcj48L21lc3NhZ2U+&lt;/base64Binary&gt; 
```

在发送之前尝试在服务器上解码消息，这很好。不确定可能出了什么问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:22:16.397

Request.CreateResponse() 使用 ObjectContent。对于这种情况，您不希望这样。您应该使用 StringContent 或 StreamContent 来返回 XML。有关详细信息，请参阅此问题[https://stackoverflow.com/a/15372410/6819](https://stackoverflow.com/a/15372410/6819)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:35:17.303

您正在将 XML 编码为二进制文件。然后，您将返回一个字节数组。然后您的客户端在标头中请求 XML `Accept: application/xml`。Web API 将二进制文件序列化为 XML。这就是你所看到的。

只需将 XML 作为字符串返回，您应该没有问题，除非您已经尝试过？

[有关类似问题，请参见此处](https://stackoverflow.com/questions/11662028/webapi-to-return-xml)。

# c# - 在后台流写入器中运行单声道应用程序不写入文本文件

> ID：15831486
> 
> 赞同：0
> 
> 时间：2013-04-05T10:23:52.937
> 
> 标签：c#, monodevelop

我在 ubuntu 中运行我的 mono C# 应用程序作为使用 upstart 的守护进程。应用程序使用streamwriter并假设写入日志文件，如果我在前台运行我的应用程序，这可以工作，但是当我在后台运行它时它不会写入文件。可能是什么问题呢？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:36:15.127

从日志中发现，如果您在后台运行应用程序并且您的应用程序使用来自根目录的路径，则必须指定完整路径。

例如 - 而不是应用程序根目录的路径，您必须提供源的完整路径，例如在这种情况下“/usr/share/myapp/res/pic.jpg”**而不是**“res/pic.jpg”

# php - 动态设置 Facebook 社交分享主缩略图

> ID：15831487
> 
> 赞同：0
> 
> 时间：2013-04-05T10:23:54.570
> 
> 标签：php, sql, facebook, facebook-graph-api

我有一个包含项目列表的页面，每个页面都有一个 Addthis 共享按钮，我希望共享器中的第一个 Facebook 缩略图成为所选项目的缩略图，所以我尝试了许多不起作用的解决方案，最后我尝试了每次用户单击特定项目的共享按钮时，从 SQL 动态写入和读取**og:image**和**rel="image_src"**缩略图的 URL，这样 Facebook 抓取工具在解析时就可以获取所选项目的详细信息，但它似乎不起作用，缩略图甚至没有显示在缩略图选项中。

当此类页面具有多个共享按钮时，是否有可靠的方法来设置主缩略图？

![在此处输入图像描述](https://i.stack.imgur.com/idmHN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:19:09.160

**ShareThis 提供了使用st_image**标签选择缩略图的选项，您可以在此处找到更多信息。所以基本上我不得不从 Addthis 切换到 ShareThis。

# c# - c# 中的 VB.NET MyApplication 等效项

> ID：15831490
> 
> 赞同：1
> 
> 时间：2013-04-05T10:24:16.370
> 
> 标签：c#, visual-studio

在我的 vb.Net 项目中，我使用下面的代码来设置 MyApplication 的日期格式

```
Private Sub MyApplication_Startup(ByVal sender As Object, ByVal e As Microsoft.VisualBasic.ApplicationServices.StartupEventArgs) Handles Me.Startup
        Dim newculture As System.Globalization.CultureInfo = System.Threading.Thread.CurrentThread.CurrentCulture.Clone()
        newculture.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy"
        newculture.DateTimeFormat.DateSeparator = "/"
        System.Threading.Thread.CurrentThread.CurrentCulture = newculture
End Sub 
```

> 我如何在 c# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:27:23.043

在`Program.cs`您拥有的文件中`static void Main()`，您可以在其中初始化应用程序设置。

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.CurrentCulture.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";
        Application.CurrentCulture.DateTimeFormat.DateSeparator = "/";

        Application.Run(new MainForm());
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-05T10:28:41.110

尝试在线转换器为您提供帮助，如下所示。

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

您的代码从相同转换而来。

```
private void MyApplication_Startup(object sender, Microsoft.VisualBasic.ApplicationServices.StartupEventArgs e)
{
    System.Globalization.CultureInfo newculture = System.Threading.Thread.CurrentThread.CurrentCulture.Clone();
    newculture.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";
    newculture.DateTimeFormat.DateSeparator = "/";
    System.Threading.Thread.CurrentThread.CurrentCulture = newculture;
} 
```

# layout - NetBeans 7.3 自定义/编辑工具栏位置

> ID：15831496
> 
> 赞同：0
> 
> 时间：2013-04-05T10:24:33.637
> 
> 标签：layout, user-interface, action, netbeans-7

我为客户端创建了新的 TopComonent，然后在主工具栏和主菜单下拉列表中的视图文件夹中添加了新的图标单击操作。但我的问题是，我设置动作的每个位置总是把它放在工具栏的开头，但我需要它在最后。

```
@ActionID(
        category = "Build",
        id = "some.action")
@ActionRegistration(
        iconBase = "path.to.icom.image",
        displayName = "someName")
@ActionReferences({
    @ActionReference(path = "Menu/View", position = 400),
    @ActionReference(path = "Toolbars/Refresh", position = 700)
})
@Messages("CTL_SomeAction=Refresh") 
```

那么我可以在 netBeans 中编辑主 layer.xml 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T06:11:43.877

您需要做的是在您的模块中创建一个 xml 文件（例如 layer.xml）。然后，您将根据以下路径从生成的layer.xml 文件中复制并粘贴您需要的内容，该文件可以在左侧窗口的文件选项卡下找到：[您的模块名称]/build/classes/META-INF/生成层.xml。通常根据您现在的问题，您可能需要 layer.xml 文件的以下信息（如果您给它命名）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE filesystem PUBLIC "-//NetBeans//DTD Filesystem 1.2//EN"
                            "http://www.netbeans.org/dtds/filesystem-1_2.dtd">

<filesystem>
    <folder name="Toolbars">
        <folder name="Refresh">
            <attr intvalue="1000" name="position"/>
        </folder>
    </folder>
</filesystem> 
```

完成此操作后，通过右键单击它并选择“验证 XML”选项来验证您的 layer.xml 文件。完成此操作后，然后在项目视图中，转到“重要文件”并打开模块清单文件。在文件末尾添加以下内容：

```
OpenIDE-Module-Layer: org/yourorg/modulename/layer.xml 
```

保存清单文件并运行您的模块后，应该没问题。

# objective-c - 如何将数字转换为指示性字符串

> ID：15831498
> 
> 赞同：5
> 
> 时间：2013-04-05T10:24:38.230
> 
> 标签：objective-c, numbers, formatter

我只是想知道如何将数字 1、2 或 3 转换为 First、second 或 Third ？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-07T11:35:56.020

尝试这个，

```
- (NSString *)getOrdinalTextFor:(NSInteger)number {

     NSNumber *numberValue = [NSNumber numberWithInteger:number];
     NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
     [numberFormatter setNumberStyle:NSNumberFormatterOrdinalStyle];

     return [numberFormatter stringFromNumber:numberValue];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:43:11.307

[在此处输入链接描述从](http://icu-project.org/apiref/icu4c/classRuleBasedNumberFormat.html)[GitHub](https://github.com/mattt/FormatterKit)下载 Formatter 工具包

```
TTTOrdinalNumberFormatter *ordinalNumberFormatter = [[TTTOrdinalNumberFormatter alloc] init];
[ordinalNumberFormatter setGrammaticalGender:TTTOrdinalNumberFormatterMaleGender];
NSNumber *number = [NSNumber numberWithInteger:2];
NSString *str = [ordinalNumberFormatter stringFromNumber:number];
NSLog(@"%@", str); 
```

阅读此链接，它非常有帮助：[数字格式](http://icu-project.org/apiref/icu4c/classRuleBasedNumberFormat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:28:09.143

看看这个可能对你有帮助

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle: NSNumberFormatterSpellOutStyle];
    NSString* numberString = [formatter stringFromNumber:[NSNumber numberWithInt: 3]];
    NSLog(@"%@",numberString); 
```

# vb.net - System.Windows.Forms.TreeView 节点“不可点击”

> ID：15831502
> 
> 赞同：0
> 
> 时间：2013-04-05T10:24:42.190
> 
> 标签：vb.net, winforms, treeview

我有一个带有 HotTracking = True 的 System.Windows.Forms.TreeView
我希望仅在特定节点中将 HotTracking 设置为 False。

例如，我希望父亲不可点击，而孩子可点击。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:08:39.937

“可点击”非常模糊。我假设您不希望它们是可选的。使用 BeforeSelect 事件很容易做到这一点，您可以取消它。例如：

```
Private Sub TreeView1_BeforeSelect(ByVal sender As Object, ByVal e As TreeViewCancelEventArgs) Handles TreeView1.BeforeSelect
    If e.Node.Nodes.Count > 0 Then e.Cancel = True
End Sub 
```

这并不能形成一个很好的用户界面，当他的点击没有效果时，用户会很困惑。您可以通过不放弃单击并自动选择您允许选择的节点来使其更直观。使它看起来类似于：

```
Private Sub TreeView1_BeforeSelect(ByVal sender As Object, ByVal e As TreeViewCancelEventArgs) Handles TreeView1.BeforeSelect
    If e.Node.Nodes.Count > 0 Then
        e.Cancel = True
        Me.BeginInvoke(New Action(Of TreeNode)(AddressOf SelectNode), e.Node.Nodes(0))
    End If
End Sub

Private Sub SelectNode(ByVal node As TreeNode)
    node.Expand()
    node.TreeView.SelectedNode = node
End Sub 
```

# android - data-bind="attr:{for:id()+'check'}" 不适用于 2.3 android 但适用于 4.0+ android

> ID：15831506
> 
> 赞同：0
> 
> 时间：2013-04-05T10:24:51.793
> 
> 标签：android, html, cordova, checkbox, knockout.js

我正在使用 phonegap、html 5、knockout 开发
下面的代码不适用于 2.3 android 但适用于 4.0+ android

```
<input type="checkbox" data-bind="checked: IsChecked,attr:{Id:id()+'check'}" class="checkBoxInput" />
                <label data-bind="attr:{for:id()+'check'}"></label> 
```

可能是脚本错误，但之后没有任何剔除数据加载。

下面的代码（没有 ko 的硬编码）有效

```
<input type="checkbox" id="test" class="checkBoxInput" />
                <label for="test"></label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:13:23.857

感谢您的关注[爱德华·范·拉克](https://stackoverflow.com/users/2095855/edward-van-raak)

只是很小的变化，单引号？'for':id() 并且它有效

```
<label data-bind="attr:{'for':id()+'check'}"></label> 
```

# javascript - JavaScript this 指的是窗口而不是函数内部的对象

> ID：15831509
> 
> 赞同：14
> 
> 时间：2013-04-05T10:25:08.763
> 
> 标签：javascript, this

我对 JavaScript`this`参考情况感到困惑。

我正在编写在对象方法中声明函数的代码。（原因是整理对象方法中的代码，同时保持方法私有的函数。）

以下是重现我的问题的实验。

我发现`this`inside`greeting`函数是指*窗口*范围而不是*人员*范围。

```
var person = {
    nickname: "Makzan",
    sayHi: function() {
        console.log(this);
        var greeting = function() {
            console.log(this);
            return "Aloha " + this.nickname;
        }
        console.log(greeting());
    }
}
person.sayHi(); 
```

（jsfiddle 中的相同代码：http: [//jsfiddle.net/makzan/z5Zmm/](http://jsfiddle.net/makzan/z5Zmm/)）

这是浏览器中的日志结果：

```
> Object
> Window
Aloha undefined 
```

在 JS 中，我知道*这个*引用很棘手。我可以通过使用`.call`方法来改变范围，使这段代码工作。

```
var greeting = (function() {
    console.log(this);
    return "Aloha " + this.nickname;
}).call(this); 
```

但是，我很想知道为什么默认情况下在*问候*`this`方法中引用*窗口*范围？

 *提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T10:27:50.530

`this`*与范围*无关。它由*上下文*决定。

`greeting()`调用没有上下文的函数，`this`默认对象也是如此（`window`在浏览器中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T10:29:44.427

,`this`引用与范围无关，它取决于调用上下文。

根据[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)，

> 一般来说，当前作用域中绑定到 this 的对象是由当前函数的调用方式决定的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T10:27:40.650

试试 person.nickname，这指的是你的情况下的 var 问候语*

# json - 在浏览器中输出带尖括号的 JSON

> ID：15831512
> 
> 赞同：2
> 
> 时间：2013-04-05T10:25:18.140
> 
> 标签：json, browser

目前我正在开发一个将 JSON 输出到客户端的小型 Web 服务。出于测试目的，我让 JSON 输出到我的浏览器（Firefox 20）上。在 JSON 中，我使用标签来声明不同语言的文本，但这似乎会导致一些麻烦，因为我的浏览器会过滤开始标签。

我猜浏览器（我也在 Chrome 和 Opera 上尝试过）认为标签是 HTML 并尝试处理它。所以我把 JSON 代码也放在了 CODE-Tags 和 PRE-Tags 中，但结果总是一样的。

换句话说，我得到的是：

```
"description":"Bild 1<\/de>Image 1<\/en>\u5199\u771f\u7b2c\u4e00<\/jp>" 
```

我想要的是：

```
"description":"<de>Bild 1<\/de><en>Image 1<\/en><jp>\u5199\u771f\u7b2c\u4e00<\/jp>" 
```

重要提示：输出是它必须的（我的调试器说），它就是浏览器显示它的方式。是否有可能让浏览器忽略标签或者我必须使用“<” 和“>”？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:29:06.327

是的，尝试使用转义字符[XML Escape characters](http://xmmssc-www.star.le.ac.uk/SAS/xmmsas_20070308_1802/doc/param/node24.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:59:28.397

转义 XML 似乎是直接的解决方案，但事实并非如此。它会破坏你原来的网络服务。

请重新检查您是否在响应中发送以下标头：

```
Content-Type: application/json 
```

上面的标头会使浏览器将响应解释为 JSON（而不是 HTML）

# ios - 我如何使用 PushMagic 令牌发送 JavaPNSpayloads

> ID：15831513
> 
> 赞同：1
> 
> 时间：2013-04-05T10:25:20.037
> 
> 标签：ios, mdm

嗨，我正在使用 JavaPNS 实现 IOS MDM。到目前为止执行的步骤。

1）我在IOS设备上安装了xxx.mobileconfig文件。

2）我正在使用 JavaPNS 发送通知。

3）我从我的 IOS 设备获得 PushMagic 令牌。我得到 200 响应。

4）我使用 https:// 作为签入网址。我正在使用 IPCU 生成 mobileconfig 文件。

5）我的意图是安装一些自定义有效负载，如禁用相机、禁用 youtube 等。

6）我为此使用了限制有效负载。我正在发送推送通知，但 IOS 设备无法响应我的服务器......

以下问题似乎是我的问题，所以任何人都可以指导我。 [http://code.google.com/p/javapns/issues/detail?id=103](http://code.google.com/p/javapns/issues/detail?id=103)

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T11:59:03.857

尝试以下

1.  下载并安装[iPhone 配置实用程序](http://support.apple.com/kb/dl1466)。
2.  连接您的设备并打开控制台选项卡
3.  从服务器向设备发送命令并查看日志（见下图）
4.  如果您可以在启动、轮询等日志中看到 MDM 的痕迹，则表示设备已收到 APNS 消息并正在尝试连接到 MDM 服务器以获取命令。
5.  如果在控制台中发现一些错误，则需要进一步调查。
6.  如果您在日志中没有看到任何 MDM 痕迹，则可能存在一些问题 - 服务器（无效的推送令牌等）或设备的互联网连接。

如果需要，请发布结果并询问更多详细信息。

![在此处输入图像描述](https://i.stack.imgur.com/A8M66.png)

# c++ - 如何检查/检测没有花括号的“if”子句？

> ID：15831517
> 
> 赞同：2
> 
> 时间：2013-04-05T10:25:58.880
> 
> 标签：c++

在 C/C++ 代码项目中，我想找到所有不使用大括号的*if/else语句。*是否有任何编译器检查或实用程序可以找到它们？

主要问题是我想重新定义一些调试宏以避免在某些情况下进行跟踪评估（有人知道其他解决方案吗？）。而且我需要找到它们以避免[“悬空-else问题”</a>，正如“if”块中所指出的那样，](http://en.wikipedia.org/wiki/Dangling_else)[没有花括号会使后续的“else if”嵌套](https://stackoverflow.com/questions/11734604/if-block-without-curly-braces-makes-subsequent-else-if-nested)

代码片段：

修改前：

```
DEBUG GET_DEBUG_DST(DEBUG_LEVEL_DEBUG).nospace() << DEBUG_PREFIX << __PRETTY_FUNCTION__ 
```

现在我们将在里面使用`if`不带大括号的：

```
DEBUG if (getDebugmode(DEBUG_LEVEL_DEBUG)) GET_DEBUG_DST(DEBUG_LEVEL_DEBUG).nospace() << DEBUG_PREFIX << __PRETTY_FUNCTION__ 
```

有问题的代码示例：

```
if (my condition)
    DEBUG << "hi there";
else
    {some more code;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:44:45.600

只需反转逻辑，并将活动部分放在 else 分支中：

```
#define DEBUG if( !getDebugmode( DEBUG_LEVEL_DEBUG ) )              \
        ;                                                           \
    else                                                            \
        GET_DEBUG_DST( DEBUG_LEVEL_DEBUG ).nospace()                \
            << DEBUG_PREFIX << __PRETTY_FUNCTION__ 
```

由于 有 的匹配项`else`，`if`因此它无法获取任何额外`else`的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:36:40.600

> 我想在 ac/c++ 代码项目中找到所有不使用大括号的 if/else 语句。是否有任何编译器检查或实用程序可以找到它们？

这听起来像[xy 问题](http://www.perlmonks.org/?node_id=542341)。如果您尝试使用不会使 if 语法无效的空操作替换 DEBUG 宏，则可以使用：

```
#ifdef DEBUG_ENABLED
#define DEBUG GET_DEBUG_DST(DEBUG_LEVEL_DEBUG).nospace() << DEBUG_PREFIX // ...
#else
#define DEBUG do {;} while(false); /##/
#endif 
```

在这种情况下，DEBUG 将是一个有效的操作（不会因为 if 块中的任何内容而使 else 无效），并且同一行上的任何内容（调试消息数据）都将评估为：

```
if (my condition)
    do {;} while(false); // << "hi there";
else
    {some more code;} 
```

但是，这具有不允许多行调试注释的缺点：

```
if (my condition)
    DEBUG << "hi there"
        << "some more data on a different line"; // causes error if DEBUG is no-op
else
    {some more code;} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T10:29:52.690

馊主意。

采用：

#define debug(x) do { if (DEBUG_LEVEL) print_stuff(x); } 而（0）

这避免了这个问题。

# c# - 仅当在 C# 项目中定义了指定常量时才包含文件

> ID：15831523
> 
> 赞同：0
> 
> 时间：2013-04-05T10:26:17.510
> 
> 标签：c#, project, constants

我有一个包含许多 .xaml 文件的应用程序，只有在定义了指定的常量（例如 TEST）的情况下，我才能让这个项目包含一些文件？

谢谢！

# java - 在浏览器中加载小程序会引发 Classnotfound 异常

> ID：15831525
> 
> 赞同：0
> 
> 时间：2013-04-05T10:26:25.957
> 
> 标签：java, plugins, applet, browser-plugin

当我尝试在我的 Firefox 浏览器中运行小程序时，它被提示安装 java 插件。我已经下载并安装了插件**Java 7 Update 17**。

后来，我尝试再次加载小程序，但我得到了错误。我在所有浏览器中都得到了这个。我的朋友可以加载这个小程序。请帮我解决这个问题。谢谢

Java Plug-in 10.17.2.02 使用 JRE 版本 1.7.0_17-b02 Java HotSpot(TM) Client VM

## 用户主目录 = C:\Users\Administrator

c: 清除控制台窗口 f: 完成终结队列中的对象 g: 垃圾收集 h: 显示此帮助消息 l: 转储类加载器列表 m: 打印内存使用情况 o: 触发日志记录 q: 隐藏控制台 r: 重新加载策略配置 s: 转储系统和部署属性 t：转储线程列表 v：转储线程堆栈 x：清除类加载器缓存

## 0-5：将跟踪级别设置为

```
cache: Initialize resource manager: com.sun.deploy.cache.ResourceProviderImpl@17825dd
security: property package.access value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.
security: property package.access new value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.definition value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.
security: property package.definition new value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.access value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.access new value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
security: property package.definition value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.definition new value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
security: property package.access value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
security: property package.access new value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss,com.sun.browser,com.sun.glass,com.sun.javafx,com.sun.media.jfxmedia,com.sun.media.jfxmediaimpl,com.sun.openpisces,com.sun.prism,com.sun.scenario,com.sun.t2k,com.sun.webpane,com.sun.pisces,com.sun.webkit
security: property package.definition value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
security: property package.definition new value sun.,com.sun.xml.internal.bind.,com.sun.xml.internal.org.jvnet.staxex.,com.sun.xml.internal.ws.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.xerces.internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.glassfish.external.,com.sun.org.glassfish.gmbal.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss,com.sun.browser,com.sun.glass,com.sun.javafx,com.sun.media.jfxmedia,com.sun.media.jfxmediaimpl,com.sun.openpisces,com.sun.prism,com.sun.scenario,com.sun.t2k,com.sun.webpane,com.sun.pisces,com.sun.webkit
basic: Added progress listener: sun.plugin.util.ProgressMonitorAdapter@15b3296
basic: Plugin2ClassLoader.addURL parent called for http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar
network: Cache entry not found [url: http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar, version: null]
network: Connecting http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar with proxy=DIRECT
network: Connecting http://10.10.10.129:8080/ with proxy=DIRECT
network: Connecting http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar with cookie "expandable=5c; subexpandable=18c"
java.io.FileNotFoundException: http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack.downloadJAR(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack.access$000(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin.PluginURLJarFileCallBack.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.getJarFile(Unknown Source)
    at sun.net.www.protocol.jar.JarFileFactory.get(Unknown Source)
    at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFileInternal(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFile(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.getJarFile(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.access$1000(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.ensureOpen(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.<init>(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
network: Cache entry not found [url: http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar, version: null]
network: Connecting http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar with proxy=DIRECT
network: Connecting http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar with cookie "expandable=5c; subexpandable=18c" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:22:53.870

您的问题似乎从这里开始：

```
network: Cache entry not found [url: http://10.10.10.129:8080/Sistic/resources/lib/Printer-1.0-executable.jar, version: null] 
```

请确保获取的 jar 文件在指定目录下。

# c# - 无法使用 c# System.Data.SqlClient 连接到本地数据库

> ID：15831526
> 
> 赞同：1
> 
> 时间：2013-04-05T10:26:26.180
> 
> 标签：c#, mysql, database-connection, connection-string, mysql-workbench

我在使用 c# System.Data.SqlClient 连接到我的本地数据库时遇到了一些问题。

信息：

*   数据库参数：名称：`baza`主机：`localhost`实例：`baza`端口：`3306`架构：`world`
*   我的连接字符串：`@"server=localhost\baza;password=pass;User Id=root;database=world;Persist Security Info=True"`
*   使用：c#、System.Data.SqlClient、MySQL Workbench
*   防火墙关闭
*   与 JDBC 成功连接，因此服务器正在工作

JDBC参数：

```
String url = "jdbc:mysql://localhost:3306/";
String driver = "com.mysql.jdbc.Driver";
String dbName = "world";
String username = "root";
String pass = "pass"; 
```

问题：

*   当我使用 conn.Open(); 这发生 =>（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

试过：

*   server=localhost 然后它给出 => 错误：40 - 无法打开到 SQL Server 的连接
*   许多其他愚蠢的组合，如 server=baza
*   [http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)
*   [ASP.NET 初学者问题：如何摆脱这个错误？](https://stackoverflow.com/questions/3665084/asp-net-beginner-question-how-to-get-rid-of-this-error)
*   与 freesql.org 服务器的连接也失败了

我不知道该怎么办...某事可能与服务器名称有关。

编辑：代码：

```
string connstr = @"Data Source=localhost\baza;password=qspass;User Id=root;"+
    "Initial Catalog=world;Persist Security Info=True";

Console.WriteLine(connstr);

SqlConnection conn = new SqlConnection(conbuild.ConnectionString);
conn.Open();

Console.WriteLine("YO!");
Some more code... 
```

从来没有达到过哟！:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:36:06.197

我想我应该把我的答案放在答案部分，而不是评论:)

我从您的 JDBC 连接字符串中看到您使用的是 MySQL 而不是 SQL Server。

System.Data.SqlClient 命名空间是 SQL Server 的 .NET Framework 数据提供程序，而不是 MySQL。

如果您使用的是 MySQL，则需要使用此处提供的 MySQL ADO.NET 驱动程序：

[下载连接器/网络](http://dev.mysql.com/downloads/connector/net/)

# meteor - Meteor 0.6.0 和 Collection API

> ID：15831537
> 
> 赞同：4
> 
> 时间：2013-04-05T10:27:01.777
> 
> 标签：meteor

升级到最新的 0.6.0 的流星和集合 API 未定义，流星不再正确启动：

ReferenceError：CollectionAPI 未定义

我将粘贴的 collectionapi 复制到应用程序“packages”文件夹，但仍然没有运行。我还需要做些什么，才能将 Collection API 与最新的流星 0.6.0 一起使用吗？

流星添加collectionapi - 说：collectionapi：已经使用

提前感谢您提供任何类型的信息和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:25:45.907

~~我不确定复制和粘贴包是个好主意。您是否尝试过重新安装它`meteor remove collectionapi`然后再次添加它？~~

[更新：我的一个包chartjs](https://github.com/donskifarrell/meteor-chartjs)似乎遇到了同样的问题。它现在给你一个类似的错误，说`ReferenceError: Chart is not defined`. 以前`Chart`的范围仅限于窗口，因此可以在我的客户端 JS 文件中访问它。这一定是由于 0.6.0 中的范围更改，但我还不确定如何解决它 - 可能包本身需要更新。

更新 2：是的，akshat 完全正确，chartjs 包核心的 JS 文件需要`var Chart`更改为，`Chart`以便将其范围限定为`window`对象。已向包发送[拉取请求](https://github.com/donskifarrell/meteor-chartjs/pull/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:51:13.940

是的，谢谢你的回答。修复也可以在 CollectionAPI github 中下载：

[https://github.com/crazytoad/meteor-collectionapi/pull/12](https://github.com/crazytoad/meteor-collectionapi/pull/12)

# ios - UIView 动画相互取消

> ID：15831540
> 
> 赞同：2
> 
> 时间：2013-04-05T10:27:18.700
> 
> 标签：ios, animation, uiview, block, objective-c-blocks

播放多个 UIView 动画块时出现问题。

我所拥有的是一个有很多按钮的游戏，当你按下一个按钮时，它会产生一个 UILabel，它会在屏幕顶部动画到总点数，这是通过使用 3 个嵌套块来完成的。这很好用，让我尽可能多地生成带有动画的点标签。

```
 //setup the label
    UILabel *pointIndicator = [[UILabel alloc]initWithFrame:CGRectMake(button.button.frame.origin.x, button.button.frame.origin.y, 60, 30)];
    pointIndicator.backgroundColor = [UIColor clearColor];
    pointIndicator.font = [UIFont boldSystemFontOfSize:25];
    pointIndicator.alpha = 0;
    pointIndicator.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
    pointIndicator.layer.shadowOpacity = 0.6;
    pointIndicator.layer.shadowRadius = 1;

    [pointIndicators addObject:pointIndicator];
    [self.view addSubview:pointIndicator];

    CGPoint scoreLabelPosition = [self.view convertPoint:self.totalScoreLabel.frame.origin fromView:self.totalScoreLabel.superview];
    CGSize scoreLabelSize = [self.totalScoreLabel.text sizeWithFont:self.totalScoreLabel.font];

    [UILabel animateWithDuration:0.3 delay:0 options:UIViewAnimationCurveEaseIn animations:^{

        //Make label appear and move it above button
        CGRect frame = pointIndicator.frame;
        frame.origin.y -= 30;
        pointIndicator.frame = frame;
        pointIndicator.alpha = 1;

    }completion:^(BOOL finished){

        [UILabel animateWithDuration:0.4 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{

            //Move the label next to the score label
            NSInteger YPosition = 0;
            if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad){

                YPosition = 15;

            }else{

                YPosition = 2;
            }
            CGRect frame = pointIndicator.frame;
            frame.origin.x = scoreLabelPosition.x + self.totalScoreLabel.frame.size.width/2 + scoreLabelSize.width/2 + 5;
            frame.origin.y = scoreLabelPosition.y - self.totalScoreLabel.frame.size.height/2 + YPosition;
            pointIndicator.frame = frame;

        }completion:^(BOOL finished){

            [UILabel animateWithDuration:0.5 animations:^{

                pointIndicator.alpha = 0;

            }completion:^(BOOL finished){

                //Animate point label to increase a bit in size
                CABasicAnimation *pointAnim = [CABasicAnimation animationWithKeyPath:@"transform"];
                pointAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
                pointAnim.duration = 0.1;
                pointAnim.repeatCount = 1;
                pointAnim.autoreverses = YES;
                pointAnim.removedOnCompletion = YES;
                pointAnim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(1.5, 1.5, 1.0)];
                [self.totalScoreLabel.layer addAnimation:pointAnim forKey:nil];

                [pointIndicator removeFromSuperview];
                [pointIndicators removeObject:pointIndicator];
            }];

        }];

    }]; 
```

然而，当游戏结束时，所有的按钮都在屏幕上显示动画，并且图像视图的大小从中间变大，每个按钮都使用 1 个动画块。

问题在于，如果 UILabel 在游戏结束的同时在屏幕上显示动画，它会取消按钮动画和不断增长的图像动画。如果没有生成 UILabel，则一切都按原样播放。在播放其他动画之前，我尝试取消并删除所有点标签，但没有运气。只有在之前的所有动画都提前正常完成的情况下，它似乎才起作用。这就是我删除它们的方式：

```
for(UIView *pointView in pointIndicators){

    [pointView.layer removeAllAnimations];
    [pointView removeFromSuperview];
}
[pointIndicators removeAllObjects];
[self.totalScoreLabel.layer removeAllAnimations]; 
```

所有动画视图都是同一个 UIView 的子视图。我注意到，如果我将按钮的点标签子视图设为所有动画都可以同时播放。

我似乎无法弄清楚这种行为，动画之间是否存在某种冲突？

# excel - excel 2003 vb写作课

> ID：15831544
> 
> 赞同：2
> 
> 时间：2013-04-05T10:27:42.263
> 
> 标签：excel, vba

我想使用 Visual Basic 在 excel 2003 中编写一个类似于 java/C# 的类。但是我不知道在哪里写那个类。

这是写作课的例子吗？如果是，我应该把这些放在 excel 2003 哪里？

```
Type Employee
    Name As String
    Address As String
    Salary As Double
End Type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:44:23.647

您所拥有的是一个用户定义类型（一种固定的数据结构），您可以将其放置在项目的任何模块中。

要创建一个类模块（我认为这是您正在寻找的），右键单击 VBA 项目 -> 插入 -> 类模块

![在此处输入图像描述](https://i.stack.imgur.com/vcaFw.png)

# c# - 加入 HashCode 魔法

> ID：15831548
> 
> 赞同：1
> 
> 时间：2013-04-05T10:27:55.533
> 
> 标签：c#, .net

我开始用我的算法测试生成的 HashCodes 的唯一性哈希函数。我编写了下一个文本类来测试何时会生成相同的 hashCode。

```
class Program
{
    static void Main(string[] args)
    {
        var hashes = new List<int>();
        for (int i = 0; i < 100000; i++)
        {
            var vol = new Volume();
            var code = vol.GetHashCode();
            if (!hashes.Contains(code))
            {
                hashes.Add(code);
            }
            else
            {
                Console.WriteLine("Same hash code generated on the {0} retry", hashes.Count());
            }
        }
    }
}

public class Volume
{
    public Guid DriverId = Guid.NewGuid();
    public Guid ComputerId = Guid.NewGuid();
    public int Size;
    public ulong VersionNumber;
    public int HashCode;
    public static ulong CurDriverEpochNumber;
    public static Random RandomF = new Random();

    public Volume()
    {
        Size = RandomF.Next(1000000, 1200000);
        CurDriverEpochNumber ++;
        VersionNumber = CurDriverEpochNumber;
        HashCode = GetHashCodeInternal();
    }

    public int GetHashCodeInternal()
    {
        unchecked
        {
            var one = DriverId.GetHashCode() + ComputerId.GetHashCode() * 22;
            var two = (ulong)Size + VersionNumber;
            var result = one ^ (int)two;
            return result;
        }
    } 

} 
```

GUID 字段 DriverId、ComputerId 和 int Size 是随机的。我假设在某个时候我们会生成相同的哈希码。你知道它会破坏大型收藏品的工作。神奇的是，生成重复哈希码时的重试次数是一样的！我多次运行示例代码并得到接近相同的结果：第一次在 10170 重试时重复运行，第二次在 7628 上运行，第三次在 7628 上运行，然后在 7628 上一次又一次地运行。有时我得到了一些其他结果。Bu 在大多数情况下是在 7628 上。

它对我没有任何解释。是不是中的错误。NET 随机生成器还是什么？

* * *

谢谢大家。现在很明显我的代码中存在错误（Matthew Watson）。我不得不调用 GetHashCodeIntelrnal() 而不是 GetHashCode()。最好的 GetHashCode 独特结果给了我：

```
 public int GetHashCodeInternal()
    {
        unchecked
        {
            var one = DriverId.GetHashCode() + ComputerId.GetHashCode();
            var two = ((ulong)Size) + VersionNumber;
            var result = one ^ (int)two << 32;
            return result;
        }
    } 
```

但是仍然在接近 140 000 它给出相同的代码......我认为这不好，因为我有接近 10 000 的收藏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:54:46.477

如果您将 Console.WriteLine() 更改为也像这样打印 Volume.Size：

```
Console.WriteLine("Same hash code generated on the {0} retry ({1})", hashes.Count, vol.Size); 
```

你会看到虽然`hashes.Count`第一次碰撞总是相同的，但`vol.Size`通常是不同的。

这似乎排除了导致此问题的随机数生成器 - 它看起来像`GetHashCodeInternal()`.

仔细检查会发现您调用了错误的哈希码函数。

这一行：`var code = vol.GetHashCode();`

应该：`var code = vol.HashCode;`

试试吧！因为目前你正在调用默认的.Net `GetHashCode()`，它根本没有做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:36:14.390

您将需要传入随机数生成器，创建一个要重用的随机数生成器，因为目前您正在创建它们的新实例太靠近，这导致使用相同的种子，因此出现相同的数字序列出去。

您的结果将 在从种子日期的下一个滴答声/秒生成种子的点上看似随机*地随机出现。*所以，只是偶然，真的。

# android - 高速公路不适用于tomcat 7 websocket

> ID：15831554
> 
> 赞同：3
> 
> 时间：2013-04-05T10:28:09.593
> 
> 标签：android, websocket, tomcat7, autobahn

对不起我的英语不好。

我想在 Android 中编写一个本机应用程序来连接服务器以进行交互式通信。Websocket 技术是完美的。我已经在我的笔记本电脑上安装并运行了 Tomcat 7.0.39，IP 为 192.168.1.250。我已经尝试了示例 echo、snake 等，使用 ws://localhost:8080/.... 和使用 ws://192.168.1.250:8080/...

我正在使用带有 eclipse 的高速公路连接到我的服务器。我已经在我的 Android 手机中安装了带有高速公路客户端 websocket 示例的 apk，它与 ws://echo.websocket.org 完美连接。

问题是从 android 到我的服务器（在我的笔记本电脑中）不起作用。从 android 到 ws://echo.websocket.org 运行良好（我认为高速公路示例运行良好），我的服务器运行良好，因为 de 示例附带 tomcat 运行良好。

因为我必须对在服务器和客户端之间传输的信息进行深入的工作，所以我不能在服务器端使用 javascript，我需要 java servlet 或其他人来处理数据库、文件等等。

怎么了？防火墙已关闭，wireshark 向我展示了 android 客户端如何尝试连接到我的笔记本电脑服务器（我不太了解 wireshark 信息）但连接丢失。

这是我的安卓代码：

```
 package com.example.autobahnandroiddemo;

    import de.tavendo.autobahn.WebSocketConnection;
    import de.tavendo.autobahn.WebSocketException;
    import de.tavendo.autobahn.WebSocketHandler;
    import android.app.Activity;
    import android.content.SharedPreferences;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.Gravity;
    import android.view.Menu;
    import android.view.MenuInflater;
    import android.view.MenuItem;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class MainActivity extends Activity {

       static final String TAG = "de.tavendo.autobahn.echo";
       private static final String PREFS_NAME = "AutobahnAndroidEcho";

       static EditText mHostname;
       static EditText mPort;
       static TextView mStatusline;
       static Button mStart;

       static EditText mMessage;
       static Button mSendMessage;

       private SharedPreferences mSettings;

       private void alert(String message) {
          Toast toast = Toast.makeText(getApplicationContext(), message,         Toast.LENGTH_SHORT);
          toast.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL, 0, 0);
          toast.show();
       }

       private void loadPrefs() {

          mHostname.setText(mSettings.getString("hostname", ""));
          mPort.setText(mSettings.getString("port", "9000"));
       }

       private void savePrefs() {

          SharedPreferences.Editor editor = mSettings.edit();
          editor.putString("hostname", mHostname.getText().toString());
          editor.putString("port", mPort.getText().toString());
          editor.commit();
       }

       private void setButtonConnect() {
          mHostname.setEnabled(true);
          mPort.setEnabled(true);
          mStart.setText("Connect");
          mStart.setOnClickListener(new Button.OnClickListener() {
             public void onClick(View v) {
                start();
             }
          });
       }

       private void setButtonDisconnect() {
          mHostname.setEnabled(false);
          mPort.setEnabled(false);
          mStart.setText("Disconnect");
          mStart.setOnClickListener(new Button.OnClickListener() {
             public void onClick(View v) {
                mConnection.disconnect();
             }
          });
       }

       private final WebSocketConnection  mConnection = new WebSocketConnection();

       private void start() {

          final String wsuri = mHostname.getText() + ":" + mPort.getText();

          mStatusline.setText("Status: Connecting to " + wsuri + " ..");

          setButtonDisconnect();

          try {
             mConnection.connect(wsuri, new WebSocketHandler() {
                @Override
                public void onOpen() {
                   mStatusline.setText("Status: Connected to " + wsuri);
                   savePrefs();
                   mSendMessage.setEnabled(true);
                   mMessage.setEnabled(true);
                }

                @Override
                public void onTextMessage(String payload) {
                   alert("Got echo: " + payload);
                }

                @Override
                public void onClose(int code, String reason) {
                   alert("Connection lost.");
                   mStatusline.setText("Status: Ready.");
                   setButtonConnect();
                   mSendMessage.setEnabled(false);
                   mMessage.setEnabled(false);
                }
             });
          } catch (WebSocketException e) {

             Log.d(TAG, e.toString());
          }
       }

       @Override
       public void onCreate(Bundle savedInstanceState) {

          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);

          mHostname = (EditText) findViewById(R.id.hostname);
          mPort = (EditText) findViewById(R.id.port);
          mStatusline = (TextView) findViewById(R.id.statusline);
          mStart = (Button) findViewById(R.id.start);
          mMessage = (EditText) findViewById(R.id.msg);
          mSendMessage = (Button) findViewById(R.id.sendMsg);

          mSettings = getSharedPreferences(PREFS_NAME, 0);
          loadPrefs();

          setButtonConnect();
          mSendMessage.setEnabled(false);
          mMessage.setEnabled(false);

          mSendMessage.setOnClickListener(new Button.OnClickListener() {
             public void onClick(View v) {
                mConnection.sendTextMessage(mMessage.getText().toString());
             }
          });
       }

       @Override
       protected void onDestroy() {
           super.onDestroy();
           if (mConnection.isConnected()) {
              mConnection.disconnect();
           }
       }

       @Override
       public boolean onCreateOptionsMenu(Menu menu) {
           MenuInflater inflater = getMenuInflater();
           inflater.inflate(R.menu.main_menu, menu);
           return true;
       }

       @Override
       public boolean onOptionsItemSelected(MenuItem item) {
          switch (item.getItemId()) {
             case R.id.quit:
                finish();
                break;
             default:
                return super.onOptionsItemSelected(item);
          }
          return true;
       }

    } 
```

这是我的 SERVLET TOMCAT 代码：

```
 package servlets;

    import org.apache.catalina.websocket.MessageInbound;
    import org.apache.catalina.websocket.StreamInbound;
    import org.apache.catalina.websocket.WebSocketServlet;
    import org.apache.catalina.websocket.WsOutbound;

    import javax.servlet.http.HttpServletRequest;
    import java.io.IOException;
    import java.nio.ByteBuffer;
    import java.nio.CharBuffer;

    public class SimpleWebSocketServlet extends WebSocketServlet {
    private static final long serialVersionUID = 1L;

        @Override
        protected StreamInbound createWebSocketInbound(String string, HttpServletRequest hsr) {
            return new MessageInbound() {

                @Override
                protected void onBinaryMessage(ByteBuffer bb) throws IOException {

                }

                @Override
                protected void onTextMessage(CharBuffer cb) throws IOException {
                    System.out.println(cb.toString());
                    WsOutbound outbound = getWsOutbound();
                    outbound.writeTextMessage(cb);
                }
            };
        }

    } 
```

我不知道怎么了。有另一种通过websockets将android客户端与服务器（类似技术上的java servlet）结合使用的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T17:24:31.693

我认为您应该将连接代码放入onCreate。

# python - Flask 每个应用程序模板文件夹

> ID：15831556
> 
> 赞同：3
> 
> 时间：2013-04-05T10:28:16.310
> 
> 标签：python, templates, web, flask

我用几个应用程序（如博客、代码、帐户等）实现了简单的站点。由于体积大，我决定将一个 python 文件拆分为应用程序。除了 Flask 的基本功能外，我不使用蓝图或其他东西——我想尽可能简单。不幸的是，flask 仍在寻找模板

```
/site
|-> main.py
     from flask import Flask

     app = Flask(__name__)
     app.config.from_pyfile('config.py')

     # Import all views
     from errors.views import *  # Errors hasn't its specific prefix
     from blog.views import *
     from account.views import *
     from mysite.views import *

     if __name__ == "__main__":
         app.run(debug=True)
|-> templates
...................
|->blog
  |-> template
    |-> _layout.html
    |-> index.html
    |-> post.html
  |-> __init__.py
     from main import app
     import blog.views
  |-> views
     from blog import app
     from flask import render_template

     @app.route("/blog/", defaults={'post_id': None})
     @app.route("/blog/<int:post_id>")
     def blog_view(post_id):
         if post_id:
             return "Someday beautiful post will be here with id=%s" % post_id
         else:
             return "Someday beautiful blog will be here"

     @app.route("/blog/tags/")
     def tags_view():
         pass
     .......................... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:10:38.727

假设您有 2 个蓝图博客和帐户。您可以按如下方式划分博客和帐户的个人应用程序（蓝图）：

```
myproject/
    __init__.py
    templates/
        base.html
        404.html
         blog/
            template.html
            index.html
            post.html
         account/
            index.html
            account1.html
    blog/
        __init__.py
        views.py
    account/
        __init__.py
        views.py 
```

在您的 blog/views.py 中，您可以呈现如下模板：

```
@blog.route('/')
def blog_index():
    return render_template('blog/index.html')

@account.route('/')
def account_index():
    return render_template('account/index.html') 
```

..等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-17T20:42:51.237

添加`template_folder='templates'`到每个应用程序蓝图声明：

```
account = Blueprint('account', __name__, template_folder='templates') 
```

详情：[https ://flask.palletsprojects.com/en/2.0.x/blueprints/#templates](https://flask.palletsprojects.com/en/2.0.x/blueprints/#templates)

# jquery - 鼠标悬停灰度在 IE9 中不起作用

> ID：15831558
> 
> 赞同：2
> 
> 时间：2013-04-05T10:28:20.083
> 
> 标签：jquery, internet-explorer-9

我在 IE9 中遇到鼠标悬停状态的一些问题，希望有人能帮助我。

这个元素将有各种大小，这就是为什么我不愿意使用背景图像精灵。

我的问题是，当我将鼠标悬停在项目上时，图像变为灰色，但是当我将鼠标悬停在中间的刻度上时，灰度效果会丢失，因为我猜测 IE9 认为我不再悬停在项目上，当我.

[http://www.tindlemanor.co.uk/jtest/cameron/11.html](http://www.tindlemanor.co.uk/jtest/cameron/11.html)

我在 jquery 上玩过鼠标悬停的例子，它在 IE9 中工作，所以我猜我在做一些有点愚蠢的事情。

它适用于所有其他浏览器，包括 ie8 和 ie7，如果这发生在 7 中，那么我可以理解它并简单地让它滑动，但是它在 9 中的事实意味着我需要解决这个问题。

提前感谢大家。

卡梅伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:02:10.087

该问题可能是由`:hover`CSS 中的伪类与jQuery 中的`onmouseover`and事件之间的冲突引起的。`onmouseout`我想我已经找到了解决当您将鼠标悬停在绿色刻度上时背景丢失过滤器的方法：

**[JSFiddle](http://jsfiddle.net/veewx/3/)**

似乎仍然可以在 IE9 和 Chrome 中使用。JSFiddle 在 Firefox 中不起作用，但我认为这是由于其他原因。

`onmouseover`我基本上将 jQuery和事件重组`onmouseout`为一个`hover()`事件（我怀疑这会有所不同）并注释掉`opacity`在类中设置属性的行`.grayscale`。

看看IE9，让我知道你的想法。

```
$(document).ready(function () {

    $(".inspire-me").hover(function () {
        $(this).addClass("on");
    //  $(this).find('.grayscale').css('opacity', '0.50');
        $(this).find('.content-lower').css('opacity', '1');
        var margin = $(this).find('.grayscale').height() / 2;
        var half = margin - 17;
        $(this).find('.hide').css('visibility', 'visible');
        $('.hide').css({'top' : half});
    }
    ,
    function () {
        $(this).removeClass("on");
    //  $(this).find('.grayscale').css('opacity', '1');
        $(this).find('.hide').css('visibility', 'hidden');
    }); 
```

**更新**

`filter`通过在 CSS的属性中指定完整的 SVG XML，我现在可以在 Firefox中使用它：

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); 
```

**[更新小提琴](http://jsfiddle.net/veewx/3/)**

# javascript - 如何用 ;$39 替换所有出现的相同字符，如 '

> ID：15831559
> 
> 赞同：2
> 
> 时间：2013-04-05T10:28:23.203
> 
> 标签：javascript

我正在使用以下代码，其中我想用 ;$39 替换所有 ' 但它不能正常工作。它只替换第一个 ' 。

`var searchUserName = document.getElementById("ctl00_ContentMain_UserSearchColl").value.replace("/\'/g", ";$39;");`

例如：Ram's's .输出：Ram;$39s;$39s

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:31:19.823

您不需要将正则表达式放在双引号内。删除它们。

```
value.replace(/'/g, ';$39;') 
```

另请注意，您不需要“转义”单引号。（感谢@Paul S. 指点）

# r - 允许使用滑块（或其他 GUI 元素）操作变量的 R 输出设备？

> ID：15831560
> 
> 赞同：3
> 
> 时间：2013-04-05T10:28:35.773
> 
> 标签：r, user-interface, plot, slider

我想绘制图中使用的数据和操作变量（此处：`rangeMin`和`rangeMax`）。变量变化的后果应该在图中直接可见。

我想要有 GUI 元素（例如滑块），我可以使用它来更改变量值`rangeMin`和`rangeMax`调用`rangePlot()`函数。

R 中是否有提供 GUI 元素的输出设备？

```
# generate example data
n <- 100
x <- 1:n
y <- x + (runif(n) * 25)

# rangeMin: value I'd like to manipulate using sliders
# rangeMax: value I'd like to manipulate using sliders
rangePlot <- function(x, y, rangeMin, rangeMax) {
  plot(x, y)

  # linear regression using datapoints a a certain range
  plotrange <- c(rangeMin:rangeMax)

  # linear model (y is mapped on x)
  linReg = lm(formula = y[plotrange] ~ x[plotrange])
  abline(linReg, col=2)

  # highlight points used for liniar regression
  points(x[plotrange], y[plotrange], col=2, pch=3)

  # show slope and intercept in the plot
  text(
    x=min(x),
    y=max(y),
    paste0(
      "intercept: ", linReg$coefficients[1],
      "\nslope: ", linReg$coefficients[2]
      ),
    adj=c(0, 1)
  )
}

# manual call
rangePlot(x=x, y=y, rangeMin=1,     rangeMax=n)
rangePlot(x=x, y=y, rangeMin=0.2*n, rangeMax=0.8*n)
rangePlot(x=x, y=y, rangeMin=50, rangeMax=60)
# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:42:43.517

对评论进行详细说明。RStudio 的操作包使这些事情变得非常容易。该包在 RStudio 中工作。如果你想在没有 RStudio 的情况下使用相同的语法，gWidgets2 中有一个示例（不需要 gWidgetsManipulate）：

```
require(tcltk); require(tkrplot)
require(gWidgets2)                      # require(devtools); install_github(c("gWidgets2", "gWidgets2tcltk"), "jverzani")
options(guiToolkit="tcltk")
source(system.file("examples", "manipulate.R", package="gWidgets2"))

w <- gwindow("Manipulate example", visible=FALSE)

manipulate({
  y <- get(distribution)(size)
  plot(density(y, bw=bandwidth/100, kernel=kernel))
  points(y, rep(0, size))
},
           ##
           distribution=picker("Normal"="rnorm", "Exponential"="rexp"),
           kernel=picker("gaussian", "epanechnikov", "rectangular",
             "triangular", "cosine"),
           size=picker(5, 50, 100, 200, 300),
           bandwidth=slider(0.05 * 100, 2.00 * 100, step=0.05 * 100, initial=1* 100), # integers needed
           button=button("Refresh"),

           container=w
           )
visible(w) <- TRUE 
```

使用 RGtk2 或 Qt 后端的 GUI 看起来更好，但这些通常更难安装。

# javascript - JSP 和 JavaScript 转换日期

> ID：15831561
> 
> 赞同：5
> 
> 时间：2013-04-05T10:28:38.223
> 
> 标签：javascript, html, jsp

我在尝试转换特定类型的日期时遇到问题。

我的目标是把它变成这种格式：`dd/MM/yyyy`

当前日期格式：`Thu Apr 04 00:00:00 EEST 2013`

当我使用 JavaScript 发出警报时，它会响应它不是日期。我使用了许多解决方案，例如在 JSP 上对其进行格式化：

```
<fmt:formatDate value="${theDate}" pattern="dd/MM/yyyy"/> 
```

结果错误：

```
Attempt to convert String "Thu Apr 04 00:00:00 EEST 2013" to type "java.util.Date", but there is no PropertyEditor for that type. 
```

甚至在 Javascript 中：

```
var dateCreation = new Date(theDate); 
```

JavaScript 的问题在于它说这`dateCreation`不是日期。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:45:24.233

您的日期字符串有问题 `"Thu Apr 04 00:00:00 EEST 2013"`

当我尝试使用您的日期字符串时`IllegelArgumentException`

改为 然后工作正常`"Thu Apr 04 00:00:00 EEST 2013"` 。`"Thu Apr 04 00:00:00 EST 2013"`

我无法猜测你为什么得到那个`EEST`（一个 E 额外）。

```
 public static void main(String[] args) {
    Date date = new Date("Thu Apr 04 00:00:00 EST 2013");
    System.out.println(date);
} 
```

您在 javascript 中遇到错误，因为我猜您将相同的字符串传递给 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:44:17.447

fmt:formatDate 需要一个 java 日期对象作为值。在您的情况下，看起来 theDate 不是日期对象，而是日期对象的字符串表示形式。请提供一个日期对象，它应该可以工作。

同样在 JavaScript 中，theDate 参数的值是什么，它在哪里定义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:45:17.920

JavaScript 中的日期对象具有以下构造函数：

```
var d = new Date();
var d = new Date(milliseconds); // from epoch
var d = new Date(dateString); // "yyyy-mm-dd hh:mm:ss"
var d = new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

确保使用其中之一。请记住，对于最后提到的构造函数，月份是从 0 开始的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:14:51.077

EST 是 GMT-05:00，而 EEST 是 GMT+03:00。例如，在解析“Thu Apr 04 23:00:00 EEST 2013”​​时会出现差异。Java(7) 可以解析 EEST，但不能在 EEST 中格式化。

```
 String s = "Thu Apr 04 23:00:00 EEST 2013";
    SimpleDateFormat sdfParse = new SimpleDateFormat("E MMM d H:m:s z yyyy", Locale.ENGLISH);
    Date d = sdfParse.parse(s);
    SimpleTimeZone stz = new SimpleTimeZone(3 * 3600000 /* GMT+03:00 */, "EEST");
    GregorianCalendar cal = new GregorianCalendar(stz, Locale.ENGLISH);
    cal.setTime(d);
    String ddmmyyyy = String.format("%02d/%02d/%4d", cal.get(Calendar.DAY_OF_MONTH), cal.get(Calendar.MONTH) + 1, cal.get(Calendar.YEAR));
    System.out.println(s+"\n"+ddmmyyyy); 
```

在 JavaScript 中：

```
function format2(s) {s="0"+s;return s.substr(s.length-2);}

function dateFormat(theDate) {
    //theDate = "Thu Apr 04 00:00:00 EEST 2013";
    var timestamp = Date.parse(theDate.replace(/EEST/, "GMT+0300"));
    var datePseudoGMT = new Date(timestamp+3 * 3600000);
    var dateCreation = format2(datePseudoGMT.getUTCDate())
                +"/"+format2(datePseudoGMT.getUTCMonth()+1)
                +"/"+format2(datePseudoGMT.getUTCFullYear());
    console.log(dateCreation);
    return dateCreation;
} 
```

# asp.net - 如何选择具有多个类别的产品

> ID：15831563
> 
> 赞同：2
> 
> 时间：2013-04-05T10:28:43.227
> 
> 标签：asp.net, ms-access

根据我的问题标题，我有这样的 Access 数据库结构：

**类别**

```
categoryid   categoryname
1            one
2            two
3            three 
```

**产品表：**

```
productid    productname    categories
1            one            1,2,3
2            two            3
3            three          1,2 
```

**当我的 categoryid 为 1 时**，我不知道选择产品的方式有多个类别。因为当我使用**In**运算符时，我遇到了一些错误..

```
Select * from product where categories In (categodyid) because cannot compare a collection with one value. 
```

我被困在这里！请帮我！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:35:04.887

这是典型的父子一对多关系。您需要一个`[ProductCategory]`表来将给定的产品与多个类别相关联：

```
productid  categoryid
1          1
1          2
1          3
2          3
3          1
3          2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:39:06.620

首先，您的表格未标准化。查看产品表中的类别列。每个单元格应该只有一个值。通过允许多个值，您将面临各种问题，包括更新/插入异常以及您现在看到的内容。您还使选择和其他操作变得非常困难。相反，请考虑使用以下示例规范化您的表：

**类别**

```
categoryid   categoryname
1            one
2            two
3            three 
```

**产品**

```
ProdductId   ProductName
4            prod1
5            prod2
6            prod 3 
```

**类别_产品**

```
CategoryId   ProductId
1            3
1            4
2            3 
```

第三张表是一种补救多对多模式的方法。如果您对如何执行此操作或如何使用它有任何疑问，请告诉我

# firebase - beginAt, endAt 使用索引而不是优先级

> ID：15831565
> 
> 赞同：3
> 
> 时间：2013-04-05T10:28:53.127
> 
> 标签：firebase

有没有办法将 beginAt 和 endAt 与 index 而不是 priority 一起使用，以便我可以使用它进行客户端分页？

我将 .priority 分配给非空值进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:28:41.930

您可以使用 startAt / endAt 的第二个参数来执行此操作。

请注意，在对消息进行排序时，优先级始终具有优先权，因此对于要按索引排序的所有项目，您需要相同的优先级（即 null）。

然后，您只需执行以下操作：

```
ref.startAt(null, indexToStartAt).endAt(null, indexToEndAt); 
```

# jira - 电子邮件页脚问题 jira

> ID：15831567
> 
> 赞同：1
> 
> 时间：2013-04-05T10:28:56.603
> 
> 标签：jira

我能够正确接收和发送电子邮件。

电子邮件页脚内容显示**“template.footer.text”**而不是文本。

请提供建议。

我需要编辑哪些文件和文件的位置。

问候，图西夫·谢赫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:22:25.580

我从未与 Jira 合作过，但我推测您缺少一个可能存在于此处的模板文件：

```
atlassian-jira/WEB-INF/classes/templates/email/html/includes/
atlassian-jira/WEB-INF/classes/templates/email/text/includes/ 
```

您可能会在 Jira 论坛上获得更好的运气，这似乎是真正基于您的 :)

[https://answers.atlassian.com/questions/](https://answers.atlassian.com/questions/)

# authorization - XACML 义务

> ID：15831574
> 
> 赞同：6
> 
> 时间：2013-04-05T10:29:08.860
> 
> 标签：authorization, access-control, xacml, xacml3

我们如何在 XACML 中使用义务？任何参考都会有所帮助 场景是义务应参考 PIP 并将结果返回给 PEP

谢谢

### 作者评论中的示例：

```
<ObligationExpressions>
    <ObligationExpression ObligationId="EmailObligation" FulfillOn="Permit">
        <AttributeAssignmentExpression AttributeId="urn:oasis:names:tc:xacml:3.0:example:attribute:text">
            <AttributeDesignator MustBePresent="false" Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" DataType="w3.org/2001/XMLSchema#string"/>
        </AttributeAssignmentExpression>
    </ObligationExpression> 
</ObligationExpressions> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-16T20:56:09.933

XACML 中的义务（以及 XACML 3.0 中引入的 Advice）用于丰富授权流程。

典型的 XACML 响应仅包含一个决定（允许、拒绝、不适用或不确定）。但是，如果您想告诉用户访问被拒绝的原因怎么办？如果你想实现一个“打破玻璃”的场景怎么办？

这就是义务和建议派上用场的地方。这里有一些例子：

*   拒绝 Alice 访问文档 D + 义务：给她的经理 Bob 发送电子邮件，让他知道 Alice 试图访问文档 D。
*   拒绝豪斯医生查看病历的权利+义务：告诉豪斯医生他可以“打破玻璃”查看病历。
*   允许 Joe 查看文档 D，但在将文档返回给 Joe 之前先给文档添加水印

在 XACML 3.0 中，义务和建议可以包含可变部分，例如 - 在上面的示例中 - 经理的电子邮件。可以从 PIP 中检索这些部分。

# node.js - Node.JS 中的 switch 与 if-else 分支控制结构

> ID：15831579
> 
> 赞同：17
> 
> 时间：2013-04-05T10:29:24.363
> 
> 标签：node.js

Node.JS程序中存在大量分支流程时，使用哪一个好。

转变

```
switch(n)
{
case 1:
  execute code block 1
  break;
case 2:
  execute code block 2
  break;
default:
  code to be executed if n is different from case 1 and 2
} 
```

或
if-else

```
if (condition1)
  {
    execute code block 1
  }
else if(condition2)
  {
    execute code block 2
  } 
else
  {
     code to be executed if n is different from condition1 and condition2
  } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T11:01:40.280

对于少数几项，差异很小。如果您有很多物品，您绝对应该使用开关。它比 if-else 提供更好的性能。

如果一个开关包含五个以上的项目，则使用查找表或哈希列表来实现。这意味着所有项目都获得相同的访问时间，与 if-else 列表相比，最后一个项目需要更多时间才能到达，因为它必须首先评估每个先前的条件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-07T13:39:48.353

```
switch(n)
{
case 1,3,4:
     execute code block 1
     break;
case 2,5,9,10:
     execute code block 2
     break;
default:
      code to be executed if n is different from first 2 cases.
} 
```

要为上述情况写下 if...else if...else 步骤，您必须编写“OR (||)”条件语句并在语句中重复变量“n”，其中为 switch案例可以仅用逗号“，”分隔。因此 switch 对于这种情况更具可读性。

# scala - 如何在scala中使用反射调用对象方法（不是类方法）

> ID：15831580
> 
> 赞同：1
> 
> 时间：2013-04-05T10:29:26.460
> 
> 标签：scala, reflection

我想在 scala 中使用反射调用对象主方法。但它不起作用，以下两行代码将通过我无法使用反射创建对象的异常。

```
val clazz = Class.forName(job.runnerClass)
val runnerClass = clazz.newInstance() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:12:53.973

首先，您必须在类名的末尾使用 $，因为 scala 对象总是以 $ 结尾。然后，您可以在名为 MODULE$ 的字段中找到对象实例

```
val class = Class.forName(name)
val objectInstance = class.getField("MODULE$").get(class).asInstanceOf[YOURCLASSTYPE] 
```

# android - For IOS 中的 C++ 网络库

> ID：15831584
> 
> 赞同：2
> 
> 时间：2013-04-05T10:29:41.613
> 
> 标签：android, c++, ios, c, network-programming

这个问题在 StackOverFlow 上被问了很多次，但希望`Updated answer and Good News`它再次出现……
我已经创建了一个应用程序`GUI in Objective C`，现在我想实现我的`Networking Part in C++`，以便我也可以使用它`Android`。

那么有没有`C++ Networking Library`我可以用于我的目的的东西，或者我必须在目标 C 中为 ios 和在 java 中为 Android 这样做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-23T12:33:13.900

[Poco](http://pocoproject.org/)也许是一个选择。

它的网络模块在 Android 和 iOS 中都支持 TCP、UDP、HTTP 和 HTTPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:43:30.783

我推荐 Qt，虽然它只用于它的网络模块有点大。但是，您也可以将您的 UI 和其他代码移至 Qt，并获得一个完全可移植的应用程序。iOS 目前还没有得到官方支持，但官方支持预览版计划在本月底发布的 5.1 版本。Android 支持也是如此。

# php - PHP中的条件概率

> ID：15831585
> 
> 赞同：1
> 
> 时间：2013-04-05T10:29:42.383
> 
> 标签：php, probability

我想在 PHP 中绘制 1 到 100 之间的随机数。我希望以 20% 的概率抽取偶数，以 80% 的概率抽取奇数。

我该如何实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:32:31.860

```
function wtf_random() {
  $ret = 2 * rand(1, 50);
  if (rand(1, 5) !== 1) {
    --$ret;  
  }
  return $ret;
} 
```

# android - 通过调用生命周期回调停止应用程序

> ID：15831587
> 
> 赞同：5
> 
> 时间：2013-04-05T10:29:42.597
> 
> 标签：android, quit

如何简单地停止我的整个应用程序？（所有活动、服务、线程等。简单来说就是一切）应该调用生命周期回调（尤其是`onStop()`and ）。`onDestroy()`

谷歌建议以下可能的解决方案：

*   杀死进程：但这不会调用生命周期回调
*   和完成（）；但这仅适用于一项活动：

但是是否可以从外部访问此方法，例如：

```
//Getting all activityies, how?
//For each gotten activity
AcitvityName.finish();
or via or via getParent().finish(); ? 
```

这对我没有帮助：[退出 android 应用程序的最佳方法？](https://stackoverflow.com/questions/9532405/best-way-to-quit-android-app)

FD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:42:17.047

```
 @Override 
public void onPause() {        

        if(isFinishing()){
//code to finish() all activitys threads etc.....
}            

    super.onPause();
} 
```

在 onPause() 你可以检查 isFinishing() 然后如果它正在完成它会去 onDestroy() 这样你就可以执行一些你喜欢的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:30:51.937

使用广播接收器调用所有活动并`finish`在它们本地调用，调用当前生命周期回调。

[广播接收器和暂停的活动](https://stackoverflow.com/questions/7890363/broadcastreceiver-and-paused-activity)

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:40:59.110

Android 不允许用户直接关闭应用程序。您可以将其最小化到后台或直接杀死进程。

但是，如果您想在用户从屏幕上删除您的应用程序时调用一些回调并释放任何资源 - 您可以执行以下操作：

在 onDestroy 方法中清除活动堆栈（或者如果您希望在 onBackPressed，onHomePressed 中）。它必须在所有删除活动中调用 onDestroy 方法，以便您可以在活动的 onDestroy 方法中释放任何具有链接的扩展资源。

因此，当用户退出您的应用程序时 - 它将删除他的活动并释放所有资源。

# java - 使用 Spring MVC 运行脚本文件和使用 Css 文件？

> ID：15831589
> 
> 赞同：2
> 
> 时间：2013-04-05T10:29:48.720
> 
> 标签：java, css, jsp, spring-mvc, scripting

我正在开发一个 Spring MVC 应用程序，我有我的登录页面 (login.jsp)，它应该调用脚本并链接一些 css 文件。问题是应用程序不运行脚本。

这是我的文件；

Web.xml

```
 <servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>*.css</url-pattern>
 </servlet-mapping>

 <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/ressources/js/*</url-pattern>
 </servlet-mapping> 
```

我的 mvc 调度程序 spring 文件：

```
 <mvc:resources mapping="/resources/**" location="/ressources/" /> 
    <mvc:resources mapping="/scripts/**" location="/ressources/js/" /> 

   <bean      class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
     <bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
     </bean>
        <bean
          class="org.springframework.web.servlet.view.InternalResourceViewResolver">
          <property name="prefix">
            <value>/WEB-INF/pages/</value>
          </property>
          <property name="suffix">
            <value>.jsp</value>
          </property>
        </bean>
    </beans> 
```

Login.jsp 调用脚本文件和css文件

```
<% String init="<c:url value='/resources/js/init.js'>";%>
<% String grid="<c:url value='/resources/css/5grid/init.js?use=mobile,desktop,1000px&mobileUI=1&mobileUI.theme=none&mobileUI.titleBarOverlaid=1&viewport_is1000px=1060'>";%>
<% String query="<c:url value='/resources/js/jquery-1.8.3.min.js'>";%>
<% String drop="<c:url value='/resources/js/jquery.dropotron-1.2.js'>";%>

<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,300italic" rel="stylesheet" />
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="<%=grid%>"></script>
<script src="<%=drop%>"></script>
<script src="<%=init%>"></script>
<noscript>
    <link rel="stylesheet" href="<c:url value='/resources/css/5grid/core.css' />"/>
    <link rel="stylesheet" href="<c:url value='/resources/css/5grid/core-desktop.css' />"/>
    <link rel="stylesheet" href="<c:url value='/resources/css/5grid/core-1200px.css' />"/>
    <link rel="stylesheet" href="<c:url value='/resources/css/5grid/core-noscript.css' />"/>
    <link rel="stylesheet" href="<c:url value='/resources/css/style.css' />"/>
    <link rel="stylesheet" href="<c:url value='/resources/css/style-desktop.css' />"/>
</noscript> 
```

显示页面时没有使用样式，只显示组件，因为没有脚本也没有 css 文件。

任何人都可以解决我的问题吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:05:50.107

在您的资源映射中，您拼错了资源。它不包含两个 s 字符。

```
 <mvc:resources mapping="/resources/**" location="/resources/" /> 
  <mvc:resources mapping="/scripts/**" location="/resources/js/" /> 
```

相对于：

```
 <mvc:resources mapping="/resources/**" location="/ressources/" /> 
  <mvc:resources mapping="/scripts/**" location="/ressources/js/" /> 
```

请注意，当您加载 css 和脚本时，它们位于`resource`目录下，而不是`ressources`

```
<link rel="stylesheet" href="<c:url value='/resources/css/style-desktop.css' />"/> 

<% String drop="<c:url value='/resources/js/jquery.dropotron-1.2.js'>";%> 
```

调度程序 servlet 将尝试处理此请求，而不是让它们通过。

还要更改 web.xml 文件中的调度程序 servlet 映射。

```
 <servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping> 
```

映射到`/`将导致调度程序处理所有请求，而映射到`/*`将导致调度程序处理未映射到资源的所有请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:48:39.417

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"

id="WebApp_ID" version="2.5">
  <display-name>Spring MVC Application</display-name>
  <servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>
                    org.springframework.web.servlet.DispatcherServlet
                </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <listener>
    <listener-class>
                  org.springframework.web.context.ContextLoaderListener
                </listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
            /WEB-INF/mvc-dispatcher-servlet.xml,
            /WEB-INF/spring-security.xml
        </param-value>
  </context-param>
  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
                  org.springframework.web.filter.DelegatingFilterProxy
                </filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

<servlet>
<servlet-name>Resource Servlet</servlet-name>
<servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Resource Servlet</servlet-name>
<url-pattern>/resources/*</url-pattern>
</servlet-mapping>
</web-app> 
```

# eclipse - Java EE 不会更新我所做的更改

> ID：15831590
> 
> 赞同：1
> 
> 时间：2013-04-05T10:29:49.777
> 
> 标签：eclipse, jakarta-ee, glassfish-3

这可能是一些我找不到的简单设置，但从昨天开始，我的 Eclipse 并没有传播我对 servlet 代码所做的更新。

只有源代码没有得到更新，JSP 页面仍然得到更新。

有人知道问题可能是什么。

-我已经创建了一个新的 Glassfish 服务器 -我一直在尝试一些随机的东西，比如调试和更新 glassfish 核心

# deployment - Apache POI java.lang.NoClassDefFoundError: Jboss 7.1.1

> ID：15831591
> 
> 赞同：2
> 
> 时间：2013-04-05T10:29:51.573
> 
> 标签：deployment, apache-poi, jboss7.x, noclassdeffounderror

我正在尝试在 Jboss Server 7.1.1 中部署一个 jar 应用程序，它是通过 maven 配置的，我已经在 pom.xml 中添加了所有依赖项。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>SampleGroupId</groupId>
<artifactId>SampleArtifactId</artifactId>
<version>0.0.1-SNAPSHOT</version>
<name>ProjectName</name>
<dependencies>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.0.4</version>
    </dependency>
    <dependency>
        <groupId>org.freemarker</groupId>
        <artifactId>freemarker</artifactId>
        <version>2.3.13</version>
    </dependency>
    <dependency>
        <groupId>opensymphony</groupId>
        <artifactId>ognl</artifactId>
        <version>2.6.11</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>2.1.6</version>
    </dependency>
    <dependency>
        <groupId>com.opensymphony</groupId>
        <artifactId>xwork</artifactId>
        <version>2.1.2</version>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.0.4</version>
    </dependency>
    <dependency>
        <groupId>org.freemarker</groupId>
        <artifactId>freemarker</artifactId>
        <version>2.3.13</version>
    </dependency>
    <dependency>
        <groupId>opensymphony</groupId>
        <artifactId>ognl</artifactId>
        <version>2.6.11</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>2.1.6</version>
    </dependency>
    <dependency>
        <groupId>com.opensymphony</groupId>
        <artifactId>xwork</artifactId>
        <version>2.1.2</version>
    </dependency>
    <dependency>
        <groupId>ECView_1_10_jar_test</groupId>
        <artifactId>ECView_1_10_jar_test</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.annotation</groupId>
        <artifactId>jboss-annotations-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.ejb</groupId>
        <artifactId>jboss-ejb-api_3.1_spec</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.el</groupId>
        <artifactId>jboss-el-api_2.2_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>javax.enterprise</groupId>
        <artifactId>cdi-api</artifactId>
        <version>1.0-SP4</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.enterprise.deploy</groupId>
        <artifactId>jboss-jad-api_1.2_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.faces</groupId>
        <artifactId>jboss-jsf-api_2.1_spec</artifactId>
        <version>2.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.interceptor</groupId>
        <artifactId>jboss-interceptors-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.jms</groupId>
        <artifactId>jboss-jms-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>javax.jws</groupId>
        <artifactId>jsr181-api</artifactId>
        <version>1.0-MR1</version>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.4</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.management.j2ee</groupId>
        <artifactId>jboss-j2eemgmt-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.resource</groupId>
        <artifactId>jboss-connector-api_1.6_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.rmi</groupId>
        <artifactId>jboss-rmi-api_1.0_spec</artifactId>
        <version>1.0.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.security.auth.message</groupId>
        <artifactId>jboss-jaspi-api_1.0_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.security.jacc</groupId>
        <artifactId>jboss-jacc-api_1.4_spec</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.servlet</groupId>
        <artifactId>jboss-servlet-api_3.0_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.servlet.jsp</groupId>
        <artifactId>jboss-jsp-api_2.2_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.servlet.jstl</groupId>
        <artifactId>jboss-jstl-api_1.2_spec</artifactId>
        <version>1.0.2.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.transaction</groupId>
        <artifactId>jboss-transaction-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.ws.rs</groupId>
        <artifactId>jboss-jaxrs-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>wsdl4j</groupId>
        <artifactId>wsdl4j</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.xml.bind</groupId>
        <artifactId>jboss-jaxb-api_2.2_spec</artifactId>
        <version>1.0.3.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.xml.registry</groupId>
        <artifactId>jboss-jaxr-api_1.0_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.xml.rpc</groupId>
        <artifactId>jboss-jaxrpc-api_1.1_spec</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.xml.soap</groupId>
        <artifactId>jboss-saaj-api_1.3_spec</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec.javax.xml.ws</groupId>
        <artifactId>jboss-jaxws-api_2.2_spec</artifactId>
        <version>2.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.picketbox</groupId>
        <artifactId>picketbox-commons</artifactId>
        <version>1.0.0.final</version>
    </dependency>
    <dependency>
        <groupId>org.picketbox</groupId>
        <artifactId>picketbox-infinispan</artifactId>
        <version>4.0.6.final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-controller-client</artifactId>
        <version>7.1.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss</groupId>
        <artifactId>jboss-dmr</artifactId>
        <version>1.1.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.logging</groupId>
        <artifactId>jboss-logging</artifactId>
        <version>3.1.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <version>2.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>async-http-servlet-3.0</artifactId>
        <version>2.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-multipart-provider</artifactId>
        <version>2.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.ejb3</groupId>
        <artifactId>jboss-ejb3-ext-api</artifactId>
        <version>2.0.0</version>
    </dependency>
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1</version>
    </dependency>
    <dependency>
        <groupId>ecs</groupId>
        <artifactId>ecs</artifactId>
        <version>1.4.2</version>
    </dependency>
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache</artifactId>
        <version>1.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>3.3.2.GA</version>
    </dependency>
    <dependency>
        <groupId>org.cheffo</groupId>
        <artifactId>jeplite</artifactId>
        <version>0.8.7a</version>
    </dependency>
    <dependency>
        <groupId>org.cheffo</groupId>
        <artifactId>jeplite</artifactId>
        <version>0.8.7a</version>
        <classifier>sources</classifier>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.10</version>
    </dependency>
    <dependency>
        <groupId>com.sun</groupId>
        <artifactId>tools</artifactId>
        <version>1.5.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi</artifactId>
        <version>3.9</version>
    </dependency>
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml</artifactId>
        <version>3.9</version>
    </dependency>
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml-schemas</artifactId>
        <version>3.9</version>
    </dependency>
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-scratchpad</artifactId>
        <version>3.9</version>
        </dependency>
</dependencies>
<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>src</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

我对 apache poi 3.9 的所有依赖项都已定义，并且所有 jar 都正确包含在类路径中。但是，当我尝试部署 jar 文件时，部署失败是由于

***“ java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/Font”***

在谷歌上阅读后，我改变了我的 jboss-deployment-structure 像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="org.hibernate" export="true" />
            <system export="true">
                <paths>
                    <path name="org/apache/poi/ss/usermodel/Row"/>
                    <path name="org/apache/poi/ss/usermodel/Font"/>
                </paths>
            </system>
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

但我仍然面临同样的问题，我能够毫无问题地部署并使用相同的类的 War 文件不会发生这种问题。有关如何解决此问题的任何见解都会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-05T20:18:07.890

在`MANIFEST.MF`添加

```
 Manifest-Version: 1.0
    Class-Path: 
    Dependencies: org.apache.poi 
```

另外，请确保您在 JBoss 中正确设置了您的模块，您应该在`org/apache`called中有一个文件夹`poi`，然后`main`在 main 中您将拥有 jars 和 module.xml，您需要的 jars 是：

*   点

*   poi-ooxml

*   poi-ooxml 模式

*   poi便签本

*   dom4j

*   stax-api

*   xmlbeans

你的`module.xml`遗嘱看起来像

```
 <module xmlns="urn:jboss:module:1.1" name="org.apache.poi">
        <properties>
           <property name="jboss.api" value="private"/>
        </properties>
        <resources>
           <resource-root path="poi-3.9-20121203.jar"/>
           <resource-root path="poi-ooxml-3.9-20121203.jar"/>
           <resource-root path="poi-ooxml-schemas-3.9-20121203.jar"/>
           <resource-root path="poi-scratchpad-3.9-20121203.jar"/>
           <resource-root path="dom4j-1.6.1.jar"/>
           <resource-root path="stax-api-1.0.1.jar"/>
           <resource-root path="xmlbeans-2.3.0.jar"/>
        </resources>

        <dependencies>
           <module name="javax.api"/>
        </dependencies>
     </module> 
```

`poi-ooxml`用于读取 2007 excel 及更高版本，它需要`poi`和，`poi-ooxml-schema`以及，xmlbeans 需要依赖项“javax.api”。`dom4j``stax-api``xmlbean`

**最后一件事**确保您的版本兼容

# c - 将字符串传递给函数并返回结构

> ID：15831594
> 
> 赞同：2
> 
> 时间：2013-04-05T10:30:00.667
> 
> 标签：c, string, structure

我试图实现将字符串传递给函数并返回包含有关该字符串的数据的结构的简单目标。我已经写了这个，但是当我尝试编译它时，我得到一个运行时错误，我不明白为什么。我很感谢你看一看。

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>

struct stringStats
{
    int length;
    int uppercase;
    int lowercase;
    int digits;
    int nonAlphaNum;
};

struct stringStats stringReader (char anyString[])
{
    int i;
    struct stringStats returned = {0, 0, 0, 0, 0 };

    returned.length = strlen(anyString);

    for (i = 0; anyString[i] != '\0'; ++i)
    {
        if (isupper(anyString[i]))
            ++returned.uppercase;
        if (islower(anyString[i]))
            ++returned.lowercase;
        if (isdigit(anyString[i]))
            ++returned.digits;
        if (isalnum(anyString[i]) == 0)
            ++returned.nonAlphaNum;
    }
    return returned;
}

int main(void)
{
    struct stringStats stored;
    char passedString[] = "Th1s string's g0t it all!";
    stored = stringReader(passedString);
    printf ("%i\n%i\n%i\n%i\n%i\n", stored.length, stored.uppercase, stored.lowercase,
                                    stored.digits, stored.nonAlphaNum);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:33:37.223

这是不正确的：

```
char passedString = "Th1s string's g0t it all!"; 
```

不确定这是如何编译的（建议在最高警告级别编译并将警告视为错误）：

```
$ gcc -O2 -Wall -Werror -std=c99 -pedantic main.c -o main -pthread
main.c：在函数'main'中：
main.c:38:25：错误：初始化从指针生成整数而不进行强制转换 [-Werror]
main.c:39:5：错误：传递 'stringReader' 的参数 1 使指针从整数而不进行强制转换 [-Werror]
main.c:14:20：注意：预期为“char *”，但参数为“char”类型
cc1：所有警告都被视为错误

```

类型应该是`char[]`：

```
char passedString[] = "Th1s string's g0t it all!"; 
```

请注意，返回类型是合法的，因为返回的是局部变量的副本（按值），而不是局部变量的地址。只是警告说，如果包含指针成员，则复制 a`struct`是危险的，因为现在两个s 具有指向相同地址的成员（悬空指针的潜在来源）。`struct``struct`

本地`struct`确实需要初始化，因为它目前不是：

```
struct stringStats returned = {0}; /* All members initialized to zero. */ 
```

循环条件不正确，将`for`导致循环体永远不会被执行（第一次评估是`0 != '\0'`错误的）。改成：

```
for (i = 0; anyString[i]; ++i)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:39:04.993

这里有几个问题。

1.  在 main() 你有`char passedString = "Th1s string's g0t it all!";`- char 是存储一个字符，所以这应该是`char *passedString = "Th1s string's g0t it all!";`

2.  `returned`在增加成员之前，您没有初始化成员。

3.  您的 for 循环的终止条件是检查`i`自身的值，而您实际上想要检查的值`anyString[i]`以在空字符上终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:45:59.623

您正在将本地结构的值返回给调用对象。根据我的经验，只是传递引用并在内部执行操作更安全。

看看这个：：

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>

struct stringStats
{
    int length;
    int uppercase;
    int lowercase;
    int digits;
    int nonAlphaNum;
};

int stringReader (char anyString[], struct stringStats *returned)
{
    int i;
    returned->digits=0;
    returned->length=0;
    returned->lowercase=0;
    returned->nonAlphaNum=0;
    returned->uppercase=0;

    returned->length = strlen(anyString);

    for (i = 0; anyString[i] != '\0'; ++i)
    {
        if (isupper(anyString[i]))
            ++returned->uppercase;
        if (islower(anyString[i]))
            ++returned->lowercase;
        if (isdigit(anyString[i]))
            ++returned->digits;
        if (isalnum(anyString[i]) == 0)
            ++returned->nonAlphaNum;
    }
    return 0;
}

int main(void)
{
    struct stringStats stored;
    char passedString[] = "Th1s string's g0t it all!";
    stringReader(passedString,&stored);
    printf ("%i\n%i\n%i\n%i\n%i\n", stored.length, stored.uppercase, stored.lowercase,
                                    stored.digits, stored.nonAlphaNum);

    return 0;
} 
```

这在我的末端编译并完美运行。希望这可以帮助！

# vb.net - 如何在 VB.NET 代码中触发事件？

> ID：15831599
> 
> 赞同：18
> 
> 时间：2013-04-05T10:30:18.507
> 
> 标签：vb.net, events, raiseevent

我有一个带有开始按钮的表单（允许用户根据需要反复运行进程），并且我想`btnStart.Click`在表单加载时发送一个事件，以便进程自动启动。

我有以下`btnStart.Click`事件功能，但我如何真正告诉 Visual Basic '假装有人点击了按钮并触发此事件'？

我试过很简单，这基本上是有效的。但是，Visual Studio 给了我一个警告`Variable 'sender' is used before it has been assigned a value`，所以我猜这不是真正的方法：

```
Dim sender As Object
btnStart_Click(sender, New EventArgs()) 
```

我也尝试过使用`RaiseEvent btnStart.Click`，但这会出现以下错误：

> 'btnStart' 不是 'MyProject.MyFormClass 的事件

### 代码

```
Imports System.ComponentModel

Partial Public Class frmProgress

    Private bw As BackgroundWorker = New BackgroundWorker

    Public Sub New()

        InitializeComponent()

        ' Set up the BackgroundWorker
        bw.WorkerReportsProgress = True
        bw.WorkerSupportsCancellation = True
        AddHandler bw.DoWork, AddressOf bw_DoWork
        AddHandler bw.ProgressChanged, AddressOf bw_ProgressChanged
        AddHandler bw.RunWorkerCompleted, AddressOf bw_RunWorkerCompleted

        ' Fire the 'btnStart.click' event when the form loads
        Dim sender As Object
        btnStart_Click(sender, New EventArgs())

    End Sub

    Private Sub btnStart_Click(sender As Object, e As EventArgs) Handles btnStart.Click

        If Not bw.IsBusy = True Then

            ' Enable the 'More >>' button on the form, as there will now be details for users to view
            Me.btnMore.Enabled = True

            ' Update the form control settings so that they correctly formatted when the processing starts
            set_form_on_start()

            bw.RunWorkerAsync()

        End If

    End Sub

    ' Other functions exist here

End Class 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-05T10:36:55.993

您应该将按钮发送`sender`到事件处理程序中：

```
btnStart_Click(btnStart, New EventArgs()) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T10:50:06.270

参与引发事件的步骤如下，

```
Public Event ForceManualStep As EventHandler
RaiseEvent ForceManualStep(Me, EventArgs.Empty)
AddHandler ForceManualStep, AddressOf ManualStepCompletion

Private Sub ManualStepCompletion(sender As Object, e As EventArgs)        

End Sub 
```

所以在你的情况下，它应该如下所示，

```
btnStart_Click(btnStart, EventArgs.Empty) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T10:48:39.787

打电话

```
btnStart.PerformClick() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-05T11:03:14.437

您正在尝试实施一个*坏*主意。实际上，您必须编写一个*子程序*来完成这些任务。

```
Private Sub btnStart_Click(sender As Object, e As EventArgs) Handles btnStart.Click

      call SeparateSubroutine()

End Sub

private sub SeparateSubroutine()

   'Your code here.

End Sub 
```

然后无论你想调用什么`btnStart's click event`，就调用那个`SeparateSubroutine`。在您的情况下，这应该是正确的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-09T09:59:35.840

您可以将按钮子类化并`OnClick`公开其方法[，如我在此处所述](https://stackoverflow.com/a/68708066/6702598)。

# objective-c - 核心数据谓词日期比较

> ID：15831600
> 
> 赞同：16
> 
> 时间：2013-04-05T10:30:18.810
> 
> 标签：objective-c, cocoa, nsdate, predicate

我试图获取与用户 selectedDate 匹配的实体中的所有对象（它是 NSDate）。核心数据代码很好，但我的谓词一直返回 0 结果，数据库中的日期与用户选择的日期相同。

如何将 selectedDate 与使用谓词的实体的日期进行比较？

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(eDate = %@)", selectedDate]; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-05T10:56:30.920

你的谓词看起来很好。

您发现返回零结果的原因可能是日期不完全相同。

例如：

`05/04/2012 13:37:00`将不匹配，`05/04/2012 13:37:01`因为这两个值不完全相同。

您想检查日期（日、月、年）和时间吗？

如果您只想检查日期，您应该创建一个开始日期和结束日期，并使用用户选择的日期作为参考框架进行比较。

与此类似的东西应该为 00:00:00 创建一个日期和时间。

```
//gather current calendar
NSCalendar *calendar = [NSCalendar currentCalendar];

//gather date components from date
NSDateComponents *dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:[NSDate date]];

//set date components
[dateComponents setHour:0];
[dateComponents setMinute:0];
[dateComponents setSecond:0];

//return date relative from date
return [calendar dateFromComponents:dateComponents]; 
```

通过将小时、分钟和秒设置为 23:59:59 来创建另一个日期，并检查用户选择的日期是否在这些范围之间。

```
[NSPredicate predicateWithFormat:@"date BETWEEN %@", [NSArray arrayWithObjects:startOfDay, endOfDay, nil]] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-05T11:00:54.553

虽然在人类交流中，日期通常等于天，但与 NSDate 对象不同：NSDate 表示时间的单个时刻。仅以秒为单位的日期是不相等的。实际上它们根本不代表日、月、年，因为这与日历系统不同

您必须自己定义同一分钟、小时、天……中的日期是否相等。所以基本上你必须教程序允许一些模糊性。

这里是分钟分辨率

```
NSDate *startDate = ....;
NSTimeInterval length;

[[NSCalendar currentCalendar] rangeOfUnit:NSMinuteCalendarUnit 
                                startDate:&startDate
                                 interval:&length 
                                  forDate:startDate];

NSDate *endDate = [startDate dateByAddingTimeInterval:length];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(eDate >= %@) AND (eDate < %@)", startDate, endDate]; 
```

对于同一天的日期（注意时区和夏令时），您只需更改以下内容：

```
[[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit 
                                startDate:&startDate
                                 interval:&length 
                                  forDate:startDate]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T06:03:11.757

我可以对已接受的答案进行一些修改，并使用 iOS 8 API 创建具有时间偏移的日期。编码：

```
NSCalendar *calendar = [[FFSharedCalendar singleton] getGregorianCalendar];
NSDate *startOfDay = [calendar dateBySettingHour:0 minute:0 second:0 ofDate:[NSDate date] options:0];
NSDate *endOfDay = [calendar dateBySettingHour:23 minute:59 second:59 ofDate:[NSDate date] options:0];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"createdAt > %@ AND createdAt < %@", startOfDay, endOfDay];
NSArray* plans = [Plan MR_findAllWithPredicate:predicate]; 
```

希望它可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-05T04:51:36.900

我最近花了一些时间试图解决同样的问题并解决了以下问题，现在更新为 iOS 8 及更高版本......

```
NSDate *dateDay = nil;
NSDate *dateDayStart = nil;
NSDate *dateDayNext = nil;

dateDay = <<USER_INPUT>>;  //for example - selectedDate

dateDayStart = [[NSCalendar currentCalendar] startOfDayForDate:dateDay];

//  dateDayNext EITHER
dateDayNext = [dateDayStart dateByAddingTimeInterval:(24 * 60 * 60)];

//  dateDayNext OR
NSDateComponents *dateComponentDay = nil;
dateComponentDay = [[NSDateComponents alloc] init];
[dateComponentDay setDay:1];
dateDayNext = [[NSCalendar currentCalendar] dateByAddingComponents:dateComponentDay
                                                            toDate:dateDayStart
                                                           options:NSCalendarMatchNextTime]; 
```

...以及`NSPredicate`核心数据`NSFetchRequest`（如上面其他答案中所示）...

```
[NSPredicate predicateWithFormat:@"(dateAttribute >= %@) AND (dateAttribute < %@)", dateDayStart, dateDayNext]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-09T16:10:36.087

我在实际日期上下 1 秒之间进行查询。在我的情况下，当我查询餐厅订单时，可以添加和减去 1 秒，所以我知道下一个新订单需要一些时间，为了安全起见，我还有 1 个 orderNo 字段。

```
 let fetchRequest: NSFetchRequest = Order.fetchRequest()
    let date_formatter = DateFormatter()
    date_formatter.dateFormat = "yyyy-MM-dd-HH-mm-ss"
    date_formatter.timeZone = TimeZone(abbreviation: "UTC")

    let createdDate = date_formatter.date(from: clientCreatedStr)

    let calendar = NSCalendar.current

    //as matching exact same datetime doesnt return anything
    let onesecondafter = calendar.date(byAdding: .second, value: 1, to: createdDate!)
    let onesecondbefore = calendar.date(byAdding: .second, value: -1, to: createdDate!)

    let predicate = NSPredicate(format: "offlineUniqueId == %@ AND (clientCreatedDate >= %@ AND clientCreatedDate <= %@)", offlineUniqueId, onesecondbefore! as NSDate, onesecondafter! as NSDate)

    fetchRequest.predicate = predicate 
```

# ruby-on-rails - 无法在rails 3中使用任何时候运行cronjob

> ID：15831603
> 
> 赞同：5
> 
> 时间：2013-04-05T10:30:21.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, crontab, whenever

我遵循参考[https://github.com/javan/whenever的所有步骤](https://github.com/javan/whenever)

在 schedule.rb 中

```
require 'yaml'
set :environment, 'production'
set :output, {
    :error    => "/log/error.log",
    :standard => "/log/cron.log" 
}

every 1.minute do
   runner "User.weekly_update"
end 
```

在宝石文件中

```
gem 'whenever', :require => false 
```

一些命令的输出

本地主机：~/project$ 每当 -i

```
[write] crontab file updated 
```

本地主机：~/project$ crontab -l

```
# Begin Whenever generated tasks for: /home/bacancy/project/config/schedule.rb
* * * * * /bin/bash -l -c 'cd /home/bacancy/project && script/rails runner -e     production '\''User.weekly_update'\'' >> /log/cron.log 2>> /log/error.log'

# End Whenever generated tasks for: /home/bacancy/project/config/schedule.rb

# Begin Whenever generated tasks for: store
* * * * * /bin/bash -l -c 'cd /home/bacancy/project && script/rails runner -e  development '\''User.weekly_update'\'''

# End Whenever generated tasks for: store

# Begin Whenever generated tasks for: lapulguilla

# End Whenever generated tasks for: lapulguilla 
```

然后我输入

localhost:~/project$ 任何时候

```
* * * * * /bin/bash -l -c 'cd /home/bacancy/project && script/rails runner -e    production '\''User.weekly_update'\'' >> /log/cron.log 2>> /log/error.log'

## [message] Above is your schedule file converted to cron syntax; your crontab file  was not updated.
## [message] Run `whenever --help' for more options. 
```

在用户模型中，我有定义 self.weekly_update

```
def self.weekly_update
  puts "cronjobs is called in every minutes"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:33:05.070

你的一切都是正确的，只是你说 cron 作业在后台打印一些东西，所以它正在这样做并且你能够观察它。

相反，您应该尝试创建或销毁一些记录以感受我认为的变化:)

# php - 使用 PHP_SQLSRV 连接到 IIS8 上的 SQL Server 2012

> ID：15831605
> 
> 赞同：3
> 
> 时间：2013-04-05T10:30:24.117
> 
> 标签：php, asp.net, sql

这是一个项目，因此不需要极高的谨慎/安全性 - 我想让它工作，然后从那里改进它。

## 如何让 PHP 成功连接到 SQL Server 2012

我成功完成的事情：

*   在 SQL Server 2012 上启用混合身份验证
*   使用 SQL 身份验证建立帐户
*   在 IIS 上设置 FastCGI 并配置 PHP.ini
*   Web根目录下的.PHP脚本执行成功
*   我可以使用 SSMS 使用我创建的凭据（SQL 身份验证）在本地连接到 SQL 数据库

问题：

*   我无法使用 PHP 脚本成功连接到本地 SQL 数据库。

我考虑过的，但理解得不够好，无法诊断：

*   到 IIS 的 HTTP 连接是在模拟 IUSR，它有权在 Web 根目录中读取/执行 PHP 脚本，但可能无权连接到服务器？
*   出于某种原因，我的连接对话根本无效

这是我的连接脚本：

```
$serverName = 'localhost';
$connectionInfo = array( 'Database'=>'DATABASE',
                       'Encrypt'=>'1', 'UID'=>'user', 'PWD'=>'password' );

$connection = sqlsrv_connect($serverName, $connectionInfo);

if( $connection == false )
{
  echo "No connection was established.\n";
  die( print_r( sqlsrv_errors(), true));
} 
```

这是我的错误（不幸的是 PHP 不能很好地打印它们）：

```
No connection was established. Array (
    [0] => Array (
        [SQLSTATE] => 08001
        [code] => -2146893019
        [message] => [Microsoft][SQL Server Native Client 11.0]SSL Provider: The certificate chain was issued by an authority that is not trusted.
    )
    [1] => Array (
        [SQLSTATE] => 08001
        [code] => -2146893019
        [message] => [Microsoft][SQL Server Native Client 11.0]Client unable to establish connection
    )
) 
```

当我通过浏览器加载脚本时，我还尝试使用进程监视器检查 w3wp.exe - 我不知道如何从中粘贴信息，但它的输出似乎没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:12:30.983

错误消息直截了当：您在 SQL Server 上使用的 SSL 证书是自签名的，因此不受消费者信任。

可能的解决方案包括：

*   在 SQL Server 上禁用 SSL/TLS
*   使用与 SQL Server 的非安全连接
*   将自签名证书添加到消费者的受信任证书存储区
*   从公共 CA 获取受信任的证书（Namecheap 只需不到 20 美元即可）

# java - 将整个项目导入 Maven (Eclipse Juno)

> ID：15831607
> 
> 赞同：4
> 
> 时间：2013-04-05T10:30:26.710
> 
> 标签：java, linux, eclipse, macos, maven

我有一个文件夹，其中包含一些专门为 Linux 编写的 Java 代码。

有一个`pom.xml`文件和两个文件夹称为：`src`和`build`

我已经在我的 Mac (10.7.5) 上安装了 Eclipse Juno，并且我知道它已经包含了 Maven。在 Linux 机器上，代码是通过`mvn package`在命令行输入来执行的。

但是在这个阶段之后，在构建工件的执行过程中，它不会在我的 Mac 上运行，因为某些命令是特定于 Linux 的（有人告诉我）。

如何在我的 Mac 上将整个项目导入 Maven？我的意思是我在哪里复制文件夹和pom文件？

谢谢你，H

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:40:17.503

您可以将 maven 项目留在原处。去

```
File->import->Maven->Existing Maven Projects->Root directory 
```

并选择 Maven 项目目录。

如果您在 Import 菜单中看不到 Maven，则意味着您需要将 maven 插件 (m2e) 添加到 Juno。mvn 从命令行运行的事实仅意味着您的 PC 上安装了 maven。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:02:28.367

补充 Evgeniy Dorofeev 的回答：

如果您的项目在 GIT 存储库中并且您使用 eGit，您可能希望像这样导入它：

```
File->Import->Git->Projects from Git 
```

导入后，您可以将项目转换为 Maven 项目，它将更新项目设置。

# ios - 操作无法完成。(com.facebook.sdk 错误 2.) ios6

> ID：15831610
> 
> 赞同：22
> 
> 时间：2013-04-05T10:30:32.853
> 
> 标签：ios, facebook, ios6, facebook-login

嗨，我正在使用 ios6 进行 facebook 登录，我收到此错误作为本机弹出窗口

操作无法完成。（com.facebook.sdk 错误 2。）

这是我使用的场景。（**我在模拟器上运行它**）

我已经通过设置登录到 facebook 应用程序，我尝试登录到我的应用程序并且它工作正常。

然后我从设置中注销了 facebook 并以不同的用户再次登录。然后我尝试登录该应用程序。我收到这个错误。

我尝试使用命令退出应用程序

`[FBSession.activeSession closeAndClearTokenInformation];`

但是没有用。

facebook 应用程序中的包标识符与我的 ios 应用程序中的相同。

这是我用来登录的代码

```
NSArray *permissions = [[NSArray alloc] initWithObjects:@"email", nil];
    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }]; 
```

任何帮助表示赞赏。

这是我得到的错误

> Domain=com.facebook.sdk Code=2 "操作无法完成。(com.facebook.sdk 错误 2.)" UserInfo=0x9535330 {com.facebook.sdk:ErrorLoginFailedReason=com.facebook.sdk:SystemLoginDisallowedWithoutError, com.facebook.sdk:ErrorSessionKey=, expireDate: (null), refreshDate: (null), mappedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(null)>}

**注意** 我在不同的场合遇到了同样的错误。当时这是我代码中的一个错误

而不是给予许可

`NSArray *permissions = [[NSArray alloc] initWithObjects:@"email",@"birthday", nil];`

我做错了

`NSArray *permissions = [[NSArray alloc] initWithObjects:@"email,birthday", nil];`

**解决方案** 即使在更正代码之后，我也遇到了同样的错误。我必须从 ios 设置屏幕注销并登录 facebook。一旦我这样做了，正确的代码就不会引起任何问题。请注意，该问题仅发生在先前执行错误代码的设备上。请注意确定问题的原因，希望此信息对某人有所帮助

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-27T19:32:07.987

这对我有用：

*   转到 iPhone 的设置应用程序。
*   打开您的 Facebook 设置
*   向下滚动到您的应用程序并确保您的应用程序允许 Facebook 交互。

这可能发生在任何设备上，因此在您的应用程序中，您必须确保正确处理此错误。我认为您向用户反馈了使用 Facebook 登录失败的原因，并要求用户检查其设备上的 Facebook 设置。

```
 - (void)facebookSessionStateChanged:(FBSession *)session state:(FBSessionState)state error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            // handle successful login here
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];

            if (error) {
                // handle error here, for example by showing an alert to the user
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Could not login with Facebook"
                                                                message:@"Facebook login failed. Please check your Facebook settings on your phone."
                                                               delegate:nil
                                                      cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
                [alert show];
            }
            break;
        default:
            break;
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T10:34:26.790

检查您的项目的 Bundle 标识符，并为您在 developer.facebook.com 上创建的应用程序提供 Bundle 标识符，它们是否相同。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-22T20:38:14.073

此错误的另一个潜在原因：当 Facebook 用户未在应用程序的管理员、开发人员或测试人员中列出时，尝试在沙盒模式下获取 Facebook 应用程序的权限。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-31T05:56:44.260

我通过在登录时传递 nil 权限来解决我的问题。

```
[FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler: 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-03T21:55:55.287

我有同样的问题，花了一整天的时间来解决这个问题。Facebook SDK 的这个错误信息非常模糊。由于 myApplication 中的 openURL: 方法被覆盖，我遇到了这个问题。我删除了覆盖的方法，Facebook 登录工作正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T02:22:44.553

对我来说，问题是无效的权限——我请求的是“生日”而不是“user_birthday”。遗憾的是，错误消息至少不是最低限度的描述性 - 只是说“权限无效”而不是 ERROR CODE 2 会为我节省很多时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T17:23:49.420

我有一个类似的问题。当我从设置切换 fb 用户时出现错误。[在设备上切换 FB 帐户时，iOS6 上的 Facebook 授权失败](https://stackoverflow.com/questions/12838118/facebook-authorization-fails-on-ios6-when-switching-fb-account-on-device)这解决了我的问题

# c# - C# MailMessage 流式传输 - 编码问题

> ID：15831611
> 
> 赞同：8
> 
> 时间：2013-04-05T10:30:39.867
> 
> 标签：c#, .net, amazon-web-services

我正在使用 Amazon SES SendRawEmail API，因此我需要一个 MailMessage 作为内存流。

我在 stackoverflow 上找到了关于 MailMessage to MemoryStream 问题的几个答案。

**解决方案 1：**使用使用私有方法的方法会导致电子邮件部分编码错误： [https ://stackoverflow.com/a/8826833](https://stackoverflow.com/a/8826833)

**解决方案 2：**使用此解决方案没有编码问题，您将其发送到拾取目录，然后将其读回： [https ://stackoverflow.com/a/14350088](https://stackoverflow.com/a/14350088)

我非常不喜欢我需要写入一个临时文件才能使其正常工作的事实。有谁知道纯 MemoryStream 解决方案如何弄乱一些编码。

我正在测试的邮件是这样的：

```
var mailMessage = new MailMessage();
mailMessage.Subject = "HEADER WITH SPECIAL ÆØÅ";
mailMessage.Body = "TEST";

Attachment att = new Attachment(@"C:\AttachmentWithSpecial ÆØÅ.pdf");
mailMessage.Attachments.Add(att);
mailMessage.From = new MailAddress("test@test.com", "NameÆØÅ");
mailMessage.To.Add(new MailAddress("test@test.com", "NameÆØÅ")); 
```

**总结一下：**

*   如果我使用标准 SMTP 发送此消息，它看起来不错。
*   如果我使用 SendRawEmail 发送它，如果我使用解决方案 2 生成内存流看起来不错
*   如果我使用 SendRawEmail 发送它，如果我使用解决方案 1 生成内存流，则会出现编码问题。

对于编码问题，我的意思是“ø”显示为

![在此处输入图像描述](https://i.stack.imgur.com/xB8ez.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T17:53:53.357

不幸的是 MailMessage 对象是错误的并且界面很差。

好消息是 .NET 4.5 在 Send() 中使用 allowUnicode 标志部分修复了它（不幸的是，Send 方法仍然是私有的）

下面是修改后的“解决方案1”。它以与“解决方案 2”相同的方式对主题进行编码。仅限 .NET Framework 4.5。

```
private static MemoryStream ConvertMailMessageToMemoryStream(MailMessage message)
{
    Assembly systemAssembly = typeof(SmtpClient).Assembly;
    Type mailWriterType = systemAssembly.GetType("System.Net.Mail.MailWriter");
    const BindingFlags nonPublicInstance = BindingFlags.Instance | BindingFlags.NonPublic;
    ConstructorInfo mailWriterContructor = mailWriterType.GetConstructor(nonPublicInstance, null, new[]  typeof(Stream) }, null);

    MethodInfo sendMethod = typeof(MailMessage).GetMethod("Send", nonPublicInstance);
    MethodInfo closeMethod = mailWriterType.GetMethod("Close", nonPublicInstance);
    using (MemoryStream memoryStream = new MemoryStream())
    {
        object mailWriter = mailWriterContructor.Invoke(new object[] { memoryStream });
        //AssertHelper.IsTrue(sendMethod.GetParameters().Length > 2, ".NET framework must be 4.5 or higher in order to properly encode email subject.");
        sendMethod.Invoke(message, nonPublicInstance, null,
            new[] { mailWriter, true, false },
            null);
        closeMethod.Invoke(mailWriter, nonPublicInstance, null, new object[] { }, null);
        return memoryStream;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:45:52.260

您是否尝试明确指定主题/正文和邮件地址的编码？

*   正文：http: [//msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.bodyencoding.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.bodyencoding.aspx)
*   主题：http: [//msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.subjectencoding.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.subjectencoding.aspx)
*   每个邮件地址：http: [//msdn.microsoft.com/en-us/library/f52hswkf.aspx](http://msdn.microsoft.com/en-us/library/f52hswkf.aspx)

我猜想当 .NET 将邮件写入文件夹时，它可以以某种方式定义正确的编码（或者文件阅读器可能以某种方式找到正确的编码来转换数据）。在内存中，所有内容都采用默认编码，这对您不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:32:00.253

```
message.BodyEncoding = message.SubjectEncoding = message.HeadersEncoding = Encoding.UTF8; 
```

# iphone - ios中Mkmapview中的自定义标注

> ID：15831612
> 
> 赞同：0
> 
> 时间：2013-04-05T10:30:42.030
> 
> 标签：iphone, ios, ios5, mkmapview

我必须在 ios 中的注释单击上显示自定义视图，我必须在自定义视图中显示 7 个图像、名称和详细信息披露按钮。单击详细信息披露按钮时，我必须调用新的视图控制器。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:44:24.903

```
 -(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
    // Define your reuse identifier.
    MKPinAnnotationView *annotationView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];

    annotationView.pinColor = MKPinAnnotationColorGreen;
    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    // Adding Button on annotation callout  which is your detail disclosure button//
    UIButton *rightButton = [[UIButton alloc]initWithFrame:CGRectMake(0.0f,0.0f,28.0f,22.0f)];
    [rightButton setImage:[UIImage imageNamed:@"rightArrow.png"] forState:UIControlStateNormal];
    [rightButton addTarget:self
                   action:@selector(pressDetailBtn:)
         forControlEvents:UIControlEventTouchUpInside];

    annotationView.rightCalloutAccessoryView = rightButton;
    annotationView.image=[UIImage imageNamed:@"orangePin.png"];
    annotationView.opaque = NO;

    return annotationView;
}
-(void)pressDetailBtn:(id)sender
{

      YourVC code here
} 
```

# debugging - 在 Windows 8 上从 Visual Studio 2012 以调试模式运行应用程序时出错

> ID：15831614
> 
> 赞同：2
> 
> 时间：2013-04-05T10:30:46.697
> 
> 标签：debugging, windows-8, visual-studio-2012

当我尝试使用 F5 运行任何类型的项目或附加到进程时，会显示一个错误窗口，其中显示以下内容：

> "*尝试运行项目时出错：无法启动程序... microsoft visual studio 调试监视器似乎没有在远程计算机上运行。这可能是因为防火墙阻止了与远程计算机的通信...* "

但我在本地调试。这发生在一些项目上，但不是全部。我在 Windows 8、Visual Studio 2012 上，并使用项目配置 ANY CPU。

为了使用 Visual Studio 2012 在本地调试我的应用程序，我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:45:06.450

将 Visual Studio 2012 升级到 SP2 解决了这个问题。

# java - 检查是否在 AutoCompleteTextView 中键入了来自 Hashmap 的键

> ID：15831615
> 
> 赞同：0
> 
> 时间：2013-04-05T10:30:46.890
> 
> 标签：java, android, hashmap, autocompletetextview

我创建了一个`HashMap<String, String>`我事先填充的。

我想让我`AutoCompleteTextView`告诉我，因为我正在输入它是否在 HashMap 中。到目前为止，这是我的代码：

```
autocomplete.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if(s.length() > 0){     
            if (map_clients.containsKey(s)){
                Toast.makeText(context, "He's here", Toast.LENGTH_SHORT).show();
            }
            else {
                Toast.makeText(context, "He's not here", Toast.LENGTH_SHORT).show();
            }
        }
        else {

        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {            

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}); 
```

即使我完全输入文本或从自动完成中选择它，它也总是告诉我“他不在这里”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:37:03.280

您需要使用 TreeMap 来存储数据，然后对其进行排序，然后您可以从那里寻找最适合您的代码的数据。

您的另一个选择是使用 SortedList 或数组并使用 binarySearch 实现来提高速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:02:51.083

```
autocomplete.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if(s.length() > 0){
                text = s.toString();
                if(map_clients.containsKey(text)){
                    Toast.makeText(context, "He's here", Toast.LENGTH_SHORT).show();
                }else{
                    Toast.makeText(context, "He's not here", Toast.LENGTH_SHORT).show();
                }
            }else{

            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    }); 
```

我已将其更改为 text = s.toString(); 我认为这是因为我将 HashMap 放入 < String, String > 而不是 CharSequence。

# android - 如何在按钮单击时为图像视图应用放大/缩小功能？

> ID：15831618
> 
> 赞同：1
> 
> 时间：2013-04-05T10:31:04.807
> 
> 标签：android

我是 Android 新手，我必须创建一个显示来自服务器的图像的 android 应用程序。我想在按钮单击时应用缩放效果。我有两个按钮，一个用于放大，另一个是表格缩小。我想在点击相关按钮时应用放大或缩小。我进行了很多搜索，但没有找到与我的具体案例相关的任何内容。到目前为止，我已经实现`imageview.onTouchlisterner()`了缩放效果，但我不想这样做，我想在按钮单击时进行缩放，所以请帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:34:12.760

我用于此目的的一种非常简单的技术，制作一个 webview 并使用它的 url 将您的图像加载到该 webview 上单击的图像上，如下所示：

```
WebView web=(WebView)findViewById(R.id.web);
    mProgress = ProgressDialog.show(this, "Please wait!", "Loading image and zoom controlls...");
    web.getSettings().setLoadWithOverviewMode(true);
    web.getSettings().setUseWideViewPort(true);
    web.getSettings().setBuiltInZoomControls(true);
    WebSettings settings = web.getSettings();
    settings.setJavaScriptEnabled(true);
    String url=getIntent().getExtras().getString("imageURL");

             web.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }

            // when finish loading page
            public void onPageFinished(WebView view, String url) {
                if(mProgress.isShowing()) {
                    mProgress.dismiss();
                }
            }
        });
             web.loadUrl(url);

} 
```

# javascript - 在 Google Chrome 中通过 Javascript 启动系统命令

> ID：15831619
> 
> 赞同：3
> 
> 时间：2013-04-05T10:31:06.420
> 
> 标签：javascript, google-chrome-extension

我想通过 Chrome 中的 Javascript 在我的计算机上执行本地程序。在 Firefox 中，可以按如下方式完成

```
var file = Components.classes["@mozilla.org/file/local;1"]
    .createInstance(Components.interfaces.nsILocalFile);
file.initWithPath(cmd);

var process = Components.classes["@mozilla.org/process/util;1"]
    .createInstance(Components.interfaces.nsIProcess);
process.init(file);

process.run(false, args, args.length); 
```

你能请任何人帮我从 chrome 扩展执行本地程序吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:24:09.790

你不能这样做。Chrome 的沙盒安全模型不允许你在用户机器上任意执行程序；这可能非常危险。理论上可以使用[NPAPI](http://developer.chrome.com/extensions/npapi.html)来做到这一点，但这样的插件不太可能被 Chrome Web Store 批准。如果这仅用于私人用途，您可以使用 NPAPI 创建一个插件，然后做任何您想做的事情，您将无法通过 Chrome Web Store 分发该插件。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-05T16:38:25.367

您可以调用 jQuery ajax 进程来执行 php 脚本，该脚本可以使用 exec() 执行命令。Javascript 是一种客户端语言，但您可以使用 jQuery...

您可以在此链接中找到方法：

[http://www.sitepoint.com/take-command-ajax/](http://www.sitepoint.com/take-command-ajax/)

# symfony - 在 Symfony2 中访问从 DQL 继承类属性

> ID：15831620
> 
> 赞同：4
> 
> 时间：2013-04-05T10:31:09.580
> 
> 标签：symfony, doctrine, dql

我有一个抽象类 Product 和继承类 ProductWithRecurrency：

```
/**
 * @ORM\Table(name= "product")
 * @ORM\Entity(repositoryClass="Acme\StoreBundle\Entity\Repositories\ProductRepository")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="product_kind_id", type="integer")
 * @ORM\DiscriminatorMap({"1" = "ProductFoo", "2" = "ProductWithRecurring"})
 */
abstract class Product
{

}

/**
 *
 * @ORM\Table(name="product_with_recurring")
 * @ORM\Entity( repositoryClass ="Acme\StoreBundle\Entity\Repositories\ProductRepository")
 */
class ProductWithRecurring extends Product
{
    /**
     * @var Recurring $recurring
     *
     * @ORM\JoinColumn(name="recurring_id", referencedColumnName="id", nullable=false)
     */
    protected $recurring;
} 
```

当产品是 ProductWithRecurring 的实例时，我需要获取一些混合产品并具有“重复”实体信息。我在 ProductRepository 中有一个带有这个 dql 的方法：

```
$dql = "SELECT p product
        FROM Acme\StoreBundle\Entity\Product p
        LEFT JOIN p.recurring rc
        WHERE p.some_conditions"; 
```

显然得到这个异常：

```
[Semantical Error] line 0, col 1182 near 'rc
': Error: Class Acme\StoreBundle\Entity\Product has no association named recurring 
```

**我应该增加查询的复杂性还是我有概念错误？**（我不是 Symfony 方面的专家，也不是 Doctrine 方面的专家）。

代码中可能存在错误，我已对其进行了简化以隔离问题。

我的英文不太好，希望你能理解我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T08:28:03.780

您应该能够访问 ProductWithRecurring 中的所有产品属性。

使用下面的代码不起作用？我不太明白你想得到什么结果

```
$dql = "SELECT p
    FROM Acme\StoreBundle\Entity\ProductWithRecurring p
    WHERE p.some_conditions"; 
```

# sql - 从 SQLite 表中删除

> ID：15831627
> 
> 赞同：2
> 
> 时间：2013-04-05T10:31:26.717
> 
> 标签：sql, database, sqlite, relational-database

我正在运行以下命令从 SQLite 中的表中删除一个元组，但出现错误

```
DELETE FROM Students S where S.name="Smith" 
```

我确信有一个名为 Smith 的条目，并且我确信有一个名为“name”的列。这是错误消息：

```
SQLiteManager: Likely SQL syntax error: delete from Students S where S.name="Smith"
[ near "S": syntax error ] Exception Name: NS_ERROR_FAILURE Exception Message: 
Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)                     
[mozIStorageConnection.createStatement] 
```

我认为这是关于重命名表格：“Students S”，但我找不到解决方案。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:36:00.327

在 SQL 中，您使用单引号而不是双引号分隔字符串。此外，您不会像以前那样在`DELETE`语句中为表起别名：

```
DELETE FROM Students where name='Smith' 
```

如果您必须使用别名，则此语法应该有效：

```
DELETE s from Students s WHERE s.name='Smith' 
```

# python - 如何让 Python 模块 termios 在 Cygwin 中工作？

> ID：15831628
> 
> 赞同：2
> 
> 时间：2013-04-05T10:31:30.057
> 
> 标签：python, cygwin, termios, urwid

我想在 Windows 中运行[Urwid](http://excess.org/urwid/)，所以我下载并安装了 Cygwin（仅限默认包）。我尝试了 Hello World 示例：

```
import urwid

txt = urwid.Text(u"Hello World")
fill = urwid.Filler(txt, 'top')
loop = urwid.MainLoop(fill)
loop.run() 
```

但它抱怨`termios`：

```
$ python test.py
Traceback (most recent call last):
  File "test.py", line 1, in <module>
    import urwid
  File "C:\Python27\lib\site-packages\urwid-1.1.1-py2.7-win-amd64.egg\urwid\__init__.py", line 40, in <module>
    from urwid.graphics import (BigText, LineBox, BarGraphMeta, BarGraphError,
  File "C:\Python27\lib\site-packages\urwid-1.1.1-py2.7-win-amd64.egg\urwid\graphics.py", line 30, in <module>
    from urwid.display_common import AttrSpec
  File "C:\Python27\lib\site-packages\urwid-1.1.1-py2.7-win-amd64.egg\urwid\display_common.py", line 23, in <module>
    import termios
ImportError: No module named termios 
```

我回到安装程序并安装了所有与`term`搜索词匹配的软件包，但我仍然得到同样的错误。

拜托，你们所有的 Cygwin 神，你能帮助一个软弱的菜鸟解决这个烦人的问题吗？

编辑：如果这很重要，我正在 Windows 7 上运行 Python 2.7.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:12:17.133

在安装了实际的`Python`软件包之后，`libmpfr4`这也丢失了一切正常...

# c# - 带有时区 postgresql 映射的时间戳

> ID：15831646
> 
> 赞同：6
> 
> 时间：2013-04-05T10:32:14.787
> 
> 标签：c#, postgresql

如何将“带有时区的时间戳”数据类型从 postgreSql 映射到`System.Data.DbType` 我需要传递参数，因为它将转到具有“带有时区的时间戳”的列

以下是我的代码：

```
var pOrderDate = cmdOrder.CreateParameter();
pOrderDate.ParameterName = "OrderDate";
pOrderDate.DbType = System.Data.DbType.DateTime;
pOrderDate.Value = objOrder.OrderDate;
cmdOrder.Parameters.Add(pOrderDate); 
```

以下行导致问题：

```
pOrderDate.DbType = System.Data.DbType.DateTime; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:01:33.930

您是否考虑过在 .NET 中尝试 DateTimeOffset 类？

我不知道它如何映射到 Postgres“带时区的日期时间”类型，但它与我认为的 MSSQL 等效项（也称为 DateTimeOffset）具有 1:1 的相关性。

请注意，这里的命名很差 - 类型表示 DateTime + Offset，而不仅仅是 Offset 本身。

# objective-c - beginSheetModalForWindow - 警告窗口消失

> ID：15831649
> 
> 赞同：1
> 
> 时间：2013-04-05T10:32:29.407
> 
> 标签：objective-c, cocoa

AppDelegate 中实现的这段代码有什么问题？警报很快出现在窗口上方，然后消失。永远不会调用 alertDidEnd 回调方法。

我试图在 Xcode 4.6.1 中清理产品并重建它，但没有成功。

```
- (void) alertDidEnd:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo
{
    [[alert window] orderOut:self];
    alertResult = returnCode;
    NSLog(@"alertDidEnd called");
}

- (void) showAlert
{
    NSAlert *saveAlert = [[NSAlert alloc] init];

    [saveAlert setAlertStyle:NSWarningAlertStyle];
    [saveAlert setMessageText:messageText];
    [saveAlert setInformativeText:informativeText];
    [saveAlert addButtonWithTitle:defaultButtonTitle];
    [saveAlert addButtonWithTitle:secondButtonTitle];

    [saveAlert beginSheetModalForWindow:[self window]
                        modalDelegate:self
                        didEndSelector:@selector(alertDidEnd:returnCode:contextInfo:)
                        contextInfo:nil];
} 
```

我自己回答。问题出在 applicationShouldTerminate 方法的其他地方。

```
- (NSApplicationTerminateReply )applicationShouldTerminate:(NSApplication *) sender
{   if(conditionOK)
        doSomeStuff;
    else    // all changes are not saved
    {   [self showAlert];
        handleButtonClicked;
    }

    return NSTerminateNow;
} 
```

在 if 语句的 else 分支中，执行 showAlert 但也“返回 NSTerminateNow”。应用程序不会等到单击警报中的按钮。它立即返回。所以我测试了一个尚未发布的回复。

我将修改 applicationShouldTerminate 方法。

```
- (NSApplicationTerminateReply )applicationShouldTerminate:(NSApplication *) sender
{   if(conditionOK)
        doSomeStuff;
        return NSTerminateNow;
    else
    {   [self showAlert];
        return NSTerminateCancel;
    }
} 
```

alertDidEnd 回调方法将测试返回的按钮，完成工作并在必要时发送终止信号。

目前，我还没有解决问题，但我知道问题出在哪里。

只是一个问题： beginSheetModalForWindow 始终是异步的，还是仅在 applicationShouldTerminate 的上下文中是异步的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:54:50.133

这是 applicationShouldTerminate 的最终版本

```
- (NSApplicationTerminateReply )applicationShouldTerminate:(NSApplication *) sender
{
    if([_buttonSave isEnabled])
    {   if(quitMenuTerminate)
            [self majFile];
        else
        {   [self showAlert];
            return NSTerminateLater;
        }
    }

    return NSTerminateNow;
} 
```

在 beginSheetModalForWindow 的回调方法 alertDidEnd 中，我调用

```
[[NSApplication sharedApplication] replyToApplicationShouldTerminate:YES]; 
```

现在一切正常。

# ruby - 获取隐藏字段标签 Ruby on Rails 的值

> ID：15831650
> 
> 赞同：1
> 
> 时间：2013-04-05T10:32:31.530
> 
> 标签：ruby, ruby-on-rails-3, params, hidden-field

我迷路了，我不知道我做错了什么！我有 4 个单选按钮和一个隐藏字段（值 =“1”）。当您单击第二个单选按钮时，隐藏字段的值更改为 2，依此类推。这适用于 js 函数。

选择不同的射射线布顿时，将显示不同的DIV。现在，当我试图在我的控制器中获取隐藏字段的值时，它总是返回 nil。

这是代码：

## 看法：

（单选按钮、隐藏字段和一个 div）

```
<div>
    <%= form_tag patients_path do %>
        <%= radio_button_tag 'searchRBN', 'patient', true, :onchange => "checkRadioButton()" %>
        <%= label_tag :byPatient_patient, "Patient" %>
        <%= radio_button_tag 'searchRBN', 'staff', false, :onchange => "checkRadioButton()" %>
        <%= label_tag :byStaff_staff, "Staff" %>
        <%= radio_button_tag 'searchRBN', 'ocmw', false, :onchange => "checkRadioButton()" %>
        <%= label_tag :byOcmw_ocmw, "OCMW" %>
        <%= radio_button_tag 'searchRBN', 'mutuality', false, :onchange => "checkRadioButton()" %>
        <%= label_tag :byMutuality_mutuality, "Mutuality" %>
        <%= hidden_field_tag :hidden_one, "1" %>
    <% end %>
</div>

<div id="searchByPatient">
    <%= form_tag patients_path, :method => 'get' do %>
        <p>
            <%= text_field_tag :search1, params[:search1] %>
            <%= submit_tag "Search", :name => nil %>
        </p>
    <% end %>
</div> 
```

## 控制器：

```
def index
    @staff_all = Staff.all
    @ocmw_all = Ocmw.all
    @mutuality_all = Mutuality.all
    debugger
    if params[:hidden_one] == '1'
      @patients = Patient.searchByName(params[:search1])
    elsif params[:hidden_one] == '2'
      @patients = Patient.searchByStaff(params[:search2])
    else
      @patients = Patient.all
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:36:30.720

这是因为你有两种形式。当您提交第二个表单时，它不会发送第一个表单的字段。如果您将所有内容放在一种形式中，它将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:56:34.597

仅使用单个表单：作为一种解决方法，在单个表单中使用两个提交标签：将操作与`params[:action]`

例如：

```
<%= form_for :attachment_metadata, :url=>{:action=>'delete_files'}, :html=>{:onsubmit=> "return confirm('Are you sure, you want to delete selected files?');",:multipart => true} do |f| %>
   <table>
     ..........Some stuff here..........
   </table> 
<%= submit_tag 'Reprocess', :class =>'button' %>
<%= submit_tag 'Remove', :class =>'button' %>
<% end %> 
```

`params[:commit]`可以区分两个提交标签的动作。

```
@action = params[:commit] 
```

如果您单击“重新处理”按钮，它会将@action 值作为“重新处理”，如果单击“删除”按钮，它会提供“删除”值，

然后你会得到你的价值观。

# css - 创建 CSS 全局变量：样式表主题管理

> ID：15831657
> 
> 赞同：79
> 
> 时间：2013-04-05T10:33:05.947
> 
> 标签：css, variables

有没有办法在css中设置全局变量，例如：

```
@Color1 = #fff;
@Color2 = #b00;

h1 {
  color:@Color1;
  background:@Color2;
} 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2014-03-30T07:42:40.373

*最新更新：**16/01/2020***

# CSS 自定义属性（变量）已经到来！

### 现在是 2020 年，是时候在您的新应用程序中正式推出此功能了。

* * *

**需要预处理器*“NOT”*！**

CSS中有很多重复。一种颜色可以在多个地方使用。

对于某些 CSS 声明，可以在级联中将 this 声明得更高一些，让 CSS 继承自然地解决这个问题。

对于非平凡的项目，这并不总是可能的。通过在`:root`伪元素上声明一个变量，CSS 作者可以使用该变量停止某些重复实例。

## 这个怎么运作

在样式表的顶部设置变量：

**CSS**

创建一个根类：

```
:root {
} 
```

创建变量（-- *[String]* : *[value]*）

```
:root {
  --red: #b00;
  --blue: #00b;
  --fullwidth: 100%;
} 
```

在 CSS 文档中的任何位置设置变量：

```
h1 {
  color: var(--red);
}
#MyText {
  color: var(--blue);
  width: var(--fullwidth);
} 
```

* * *

## 浏览器支持/兼容性

有关当前兼容性，请参见[caniuse.com](https://caniuse.com/#feat=css-variables)。

[![![支持的浏览器](https://i.imgur.com/v3SeY7r.png)](https://i.imgur.com/v3SeY7r.png)

* * *

**Firefox：**版本**31** + *（默认启用）*

**自2014 年** 起受支持*（一如既往地领先。）*

`[More info from Mozilla](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables)`

* * *

**Chrome：**版本**49** + *（默认启用）*。

自**2016 年起支持**

* * *

**Safari/IOS Safari：**版本 9.1/9.3 *（默认启用）*。

自**2016 年起支持**

* * *

**Opera：**版本**39** + *（默认启用）*。

自**2016 年起支持**

* * *

**Android：**版本**52** + *（默认启用）*。

自**2016 年起支持**

* * *

**Edge：**版本**15** + *（默认启用）*。

自**2017 年起支持**

CSS 自定义属性登陆 Windows Insider Preview 版本 14986

* * *

**IE：**当猪飞时。

终于到了让这艘船沉没的时候了。反正没人喜欢骑她。☺</p>

* * *

**W3C 规范**

即将推出的 CSS 变量的完整规范

`[Read more](http://dev.w3.org/csswg/css-variables/)`

* * *

### 试试看

下面附上一个小提琴和片段以进行测试：

***（它只适用于支持的浏览器。）***

[***演示小提琴***](http://jsfiddle.net/5hCtL/90/)

```
:root {
  --red: #b00;
  --blue: #4679bd;
  --grey: #ddd;
  --W200: 200px;
  --Lft: left;
}
.Bx1,
.Bx2,
.Bx3,
.Bx4 {
  float: var(--Lft);
  width: var(--W200);
  height: var(--W200);
  margin: 10px;
  padding: 10px;
  border: 1px solid var(--red);
}
.Bx1 {
  color: var(--red);
  background: var(--grey);
}
.Bx2 {
  color: var(--grey);
  background: black;
}
.Bx3 {
  color: var(--grey);
  background: var(--blue);
}
.Bx4 {
  color: var(--grey);
  background: var(--red);
}
```

```
<p>If you see four square boxes then variables are working as expected.</p>

<div class="Bx1">I should be red text on grey background.</div>
<div class="Bx2">I should be grey text on black background.</div>
<div class="Bx3">I should be grey text on blue background.</div>
<div class="Bx4">I should be grey text on red background.</div>
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-05T10:35:33.063

你现在不能在 CSS 中创建变量。如果您想要这种功能，您将需要使用 CSS 预处理器，如[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)。以下是您在 SASS 中出现的样式：

```
$Color1:#fff;
$Color2:#b00;
$Color3:#050;

h1 {
    color:$Color1;
    background:$Color2;
} 
```

它们还允许你做其他（很棒的）事情，比如嵌套选择器：

```
#some-id {
    color:red;

    &:hover {
        cursor:pointer;
    }
} 
```

这将编译为：

```
#some-id { color:red; }
#some-id:hover { cursor:pointer; } 
```

查看[官方 SASS 教程](http://sass-lang.com/tutorial.html)以获取设置说明以及有关语法/功能的更多信息。[我个人使用Mindscape](http://www.mindscapehq.com/products/web-workbench)的一个名为 Web Workbench 的 Visual Studio 扩展来轻松开发，还有很多其他 IDE 的插件。

## 更新

截至 2014 年 7 月/8 月，Firefox 已经实现了CSS 变量的[草案规范，语法如下：](http://dev.w3.org/csswg/css-variables/)

```
:root {
  --main-color: #06c;
  --accent-color: #006;
}
/* The rest of the CSS file */
#foo h1 {
  color: var(--main-color);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-05T10:35:26.513

使用 CSS 是不可能的，但可以使用 CSS 预处理器，例如[less](http://lesscss.org)或[SASS](http://sass-lang.com)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-05T10:36:10.403

试试 SASS [http://sass-lang.com/](http://sass-lang.com/)或 LESS [http://lesscss.org/](http://lesscss.org/)

我喜欢 SASS 并将它用于我所有的项目。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-22T08:39:57.023

我这样做：

**的HTML：**

```
<head>
    <style type="text/css"> <? require_once('xCss.php'); ?> </style>
</head> 
```

**xCss.php：**

```
<? // place here your vars
$fntBtn = 'bold 14px  Arial'
$colBorder  = '#556677' ;
$colBG0     = '#dddddd' ;
$colBG1     = '#44dddd' ;
$colBtn     = '#aadddd' ;

// here goes your css after the php-close tag: 
?>
button { border: solid 1px <?= $colBorder; ?>; border-radius:4px; font: <?= $fntBtn; ?>; background-color:<?= $colBtn; ?>; } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-05T10:36:46.233

您将需要 LESS 或 SASS 来实现相同的..

但这是另一种选择，我相信它会在 CSS3 中解决。

[http://css3.bradshawenterprises.com/blog/css-variables/](http://css3.bradshawenterprises.com/blog/css-variables/)

例子 ：

```
 :root {
    -webkit-var-beautifulColor: rgba(255,40,100, 0.8);
    -moz-var-beautifulColor: rgba(255,40,100, 0.8);
    -ms-var-beautifulColor: rgba(255,40,100, 0.8);
    -o-var-beautifulColor: rgba(255,40,100, 0.8);
    var-beautifulColor: rgba(255,40,100, 0.8);
 }
  .example1 h1 {
    color: -webkit-var(beautifulColor);
    color: -moz-var(beautifulColor);
    color: -ms-var(beautifulColor);
    color: -o-var(beautifulColor);
    color: var(beautifulColor);
 } 
```

# bash - /bin/dash 找不到主机名

> ID：15831658
> 
> 赞同：0
> 
> 时间：2013-04-05T10:33:06.363
> 
> 标签：bash, hostname, dash-shell

我新安装了一个重新制作的 ubuntu 12.10。安装后我运行了一个脚本来创建一个标准用户并做一些其他的工作。现在当我登录到新的标准用户并打开终端时，它只显示一个`$`标记而不显示`username@hostname$`。

它可以返回`whoami`但不返回任何东西，`echo $HOSTNAME` 有趣的是当我运行 bash 时，一切正常，但是当我运行 dash（这是 ubuntu 中的默认设置）时，我看到了问题。

我试过`dpkg-reconfigure dash`了，但没有任何改变。

谁能猜出我的系统发生了什么！先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:47:27.203

我建议使用 bash 而不是 dash 因为前者更适合交互式使用。

新用户的 shell 可能设置为`/bin/dash`，您只需使用命令`--shell`选项创建新用户并指定所需的 shell `adduser`。要更改已创建用户的 shell，您可以使用命令`chsh`。

# javascript - 如何将 jQuery 代码放在 WordPress 主题的外部文件中？

> ID：15831662
> 
> 赞同：1
> 
> 时间：2013-04-05T10:33:13.287
> 
> 标签：javascript, jquery, wordpress

我对 Javascript/jQuery 比较陌生，所以请多多包涵。

我正在设计一个自定义 WordPress 主题，并且一直在使用 jQuery 对在我的头文件 (header.php) 中生成的主导航菜单进行一些更改。我一直在 head 标签内添加这样的代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
  <script>
    $(document).ready(function(){
      $('nav').mouseover(function() {
        // my mousecode here...
      }); // end mouseover
    }); // end ready
  </script> 
```

我的问题真的很简单。我的脚本已经很长了，以至于我想将它们移动到它们自己的文件（可能是 nav-mouse-events.js）并从 header.php 中调用它们。我该怎么做呢？是否就像将第二个脚本标签之间的代码放入名为 nav-mouse-events.js 的文件中然后将其添加到 head 标签中一样简单？

```
<script src="nav-mouse-events.js"></script> 
```

还是我需要做一些更复杂的事情？我需要从新的外部文件或 header.php 调用 jQuery 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:34:48.057

您可以将脚本放在一个`.js`文件中并使用`wp_enqueue_script`in`functions.php`以正确的方式包含它们。

来自[wordpress 网站](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)：

```
<?php
function my_scripts_method() {
    wp_enqueue_script(
        'custom-script',
        get_template_directory_uri() . '/js/custom_script.js',
        array( 'jquery' )
    );
}

add_action( 'wp_enqueue_scripts', 'my_scripts_method' );
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:38:41.467

添加这一行：

```
<script src="<?php echo get_bloginfo('template_url ');?>/nav-mouse-events.js"></script> 
```

并用代码保存`nav-mouse-events.js`文件：

```
$(document).ready(function(){
      $('nav').mouseover(function() {
        // my mousecode here...
      }); // end mouseover
    }); // end ready 
```

在您的**模板文件夹**中。

# css - 自动调整表

> ID：15831670
> 
> 赞同：0
> 
> 时间：2013-04-05T10:33:43.880
> 
> 标签：css, html-table

我有一个表格，其中包含一行单选选项，另一个包含两段，其中只有一个将显示，另一个根据用户在单选选项中选择的值隐藏。

问题是，这两个段落的内容长度不同，使得一个段落在表格中占用更多空间。当用户选择显示更大段落的选项时，表格会自动扩展以适应更大的内容。但是稍后如果用户选择一个单选选项来显示小段落，它不会将其缩小，而应该缩小以适合一个小段落。

有没有在 CSS 中处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:39:30.513

您可以尝试如下添加此 css，如果不起作用，您能否将您的代码粘贴到此处以进行进一步调查？希望这可以帮助。 **表格布局：固定；**

# wcf - wcf maxReceivedMessageSize 限制

> ID：15831674
> 
> 赞同：1
> 
> 时间：2013-04-05T10:33:59.977
> 
> 标签：wcf, web-config, streaming, limits

据我所知，`maxReceivedMessageSize`属性的限制受最大 int 大小的限制，即 2147483647 字节 (2gb) 我希望这些信息在我输入时不正确。

在我的应用程序中，我需要发送超过此大小限制的文件，我需要能够发送超过 4-5 GB 的文件。有什么解决方法吗？还是我应该采用另一种方法？我真的被困在这里了。

即使我的`maxReceivedMessageSize`限制现在是 2gb，我的服务在上传和下载时都会抛出 1.5gb 的内存不足异常。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:36:44.770

要通过 WCF 发送大文件，应使用**流传输。**有关如何进行流传输，请参阅[http://msdn.microsoft.com/en-us/library/ms789010.aspx](http://msdn.microsoft.com/en-us/library/ms789010.aspx)

# php - PHP tinymce，验证问题

> ID：15831677
> 
> 赞同：2
> 
> 时间：2013-04-05T10:34:08.140
> 
> 标签：php, tinymce, sugarcrm

我在我的 CMS 页面上使用 tinymce 并面临需要验证（jquery）的问题。一切顺利，但是当我使用编辑器仅插入 date{DATE d/m/Y} 时。jquery 验证不会关闭。

我的意思是，如果只有日期存在，如果我在验证效果良好之后或之前给出空格，就会产生问题。但是为什么只有 Date{DATE d/m/Y} 存在时验证不起作用？

我应该怎么做才能解决这个问题？

```
tinyMCE.init({
                theme : "advanced",
                theme_advanced_toolbar_align : "left",
                height : "400px",
                mode: "exact",
                elements : "description",
                plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,ibrowser",
                setup : function(ed){

                ed.onKeyUp.add(function (ed, event) {
                        tinymce.triggerSave();
                        $("#EditView#description").trigger({type: 'keyup', ctrlKey: event.ctrlKey, altKey: event.altKey, which: event.keyCode, event:eventObject });
                });
            },

                theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
                theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen,ibrowser",
                theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage", 
                theme_advanced_toolbar_location : "top",
                width: "100%",
                inline_styles : true,
                directionality : "ltr",
                entity_encoding: 'raw',
                cleanup_on_startup : true,
                strict_loading_mode : true,
                convert_urls : false,
                remove_redundant_brs : true,
                plugin_insertdate_dateFormat : '{DATE '+df+'}',
                content_css :cssurl+"/includes/style/style.css",
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:40:04.083

我猜你的验证机制没有考虑到 tinymce 不等于你表单中的文本区域或输入字段。但是 tinymce 会创建一个新的 iframe，在其中编辑编辑器内容。

# c# - Datagridview 上下文菜单在 hittest 中始终显示 -1

> ID：15831680
> 
> 赞同：3
> 
> 时间：2013-04-05T10:34:10.233
> 
> 标签：c#, winforms, datagridview

我正在尝试为 datagridview 创建一个上下文菜单。我从这里尝试了一些示例，但无法理解为什么对于单击的任何行，下面总是返回 -1。这是一个winforms，网格是从数据表中填充的。我在这里做错了什么？

```
 DataGridView.HitTestInfo hit = dgvResults.HitTest(e.X, e.Y); 
```

我的代码：

```
private void dgvResults_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
  if (e.ColumnIndex >= 0 && e.RowIndex >= 0 && e.Button == MouseButtons.Right)
  {
      DataGridView.HitTestInfo hit = dgvResults.HitTest(e.X, e.Y); \\ this shows as -1 always
      if (hit.Type == DataGridViewHitTestType.Cell)
      {
         dgvResults.CurrentCell = dgvResults[hit.ColumnIndex, hit.RowIndex];
         cmsResults.Show(dgvResults, e.X, e.Y);
      }
  }
} 
```

当我使用 MouseClick 事件时，它似乎起作用了，我有点迷失在这里

```
private void dgvResults_MouseClick(object sender, MouseEventArgs e)
{
  if (e.Button == MouseButtons.Right)
  {
    int currentMouseOverRow = dgvResults.HitTest(e.X, e.Y).RowIndex;
    cmsResults.Show(dgvResults, new Point(e.X, e.Y));

  }
} 
```

编辑：

我终于让它与下面的代码一起工作。

谢谢大家

对我有用的代码：

```
private void dgvResults_MouseClick(object sender, MouseEventArgs e)
{
  if (e.Button == MouseButtons.Right)
   {
      int currentMouseOverRow = dgvResults.HitTest(e.X, e.Y).RowIndex;
      dgvResults.ClearSelection();
      if (currentMouseOverRow >= 0) // will show Context Menu Strip if not negative
      {
          dgvResults.Rows[currentMouseOverRow].Selected = true;
          cmsResults.Show(dgvResults, new Point(e.X, e.Y));
           row = currentMouseOverRow;
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:57:09.610

这是正常行为，因为 EventArgs 返回的 X 和 Y 坐标相对于宿主控件的左上角：

*   `MouseEventArgs`返回相对于`DataGridView`控件的 X/Y 坐标。
*   `DataGridViewCellMouseEventArgs`返回相对于`DataGridViewCell`控件的 X/Y 坐标。

`HitTest`是针对`DataGridView`控制执行的，只是将提供的 X/Y 转换为列/行索引，而不进行任何修改。

下面的插图演示了这个想法（蓝色 - 返回的值`MouseEventArgs`，绿色 - DataGridViewCellMouseEventArgs）

![在此处输入图像描述](https://i.stack.imgur.com/BPHC2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:56:11.900

看着 -

[http://bytes.com/topic/c-sharp/answers/826824-invalid-coordinates-datagridview-hittest](http://bytes.com/topic/c-sharp/answers/826824-invalid-coordinates-datagridview-hittest)

尤其 -

```
Point p = dataGridView2.PointToClient(new Point(e.X, e.Y);
DataGridView.HitTestInfo info = dataGridView2.HitTest(p.X, p.Y);
int row = info.RowIndex; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T06:51:13.280

我终于让它与下面的代码一起工作。

```
private void dgvResults_MouseClick(object sender, MouseEventArgs e)
{
  if (e.Button == MouseButtons.Right)
  {
    int currentMouseOverRow = dgvResults.HitTest(e.X, e.Y).RowIndex;
    dgvResults.ClearSelection();
    if (currentMouseOverRow >= 0) // will show Context Menu Strip if not negative
    {
      dgvResults.Rows[currentMouseOverRow].Selected = true;
      cmsResults.Show(dgvResults, new Point(e.X, e.Y));
       row = currentMouseOverRow;
    }
  }
} 
```

# java - 如何更改 Java ROME 解析器默认套接字超时？

> ID：15831683
> 
> 赞同：5
> 
> 时间：2013-04-05T10:34:11.687
> 
> 标签：java, sockets, timeout, rome

我正在使用 Java ROME 作为我的 XML 解析器以级联方式解析大量 RSS 提要。有时，由于网络问题，其中一个 RSS 提要可能无法访问，这会在尝试创建 XMLReader 对象 (new XMLReader(url)) 时导致 Socket 超时。

问题是默认超时持续大约 2 年，当它发生时，它会减慢整个过程。

有没有办法改变 Java ROME 中的默认套接字超时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:47:42.080

当您创建时`XMLReader object ( new XMLReader(url))`，您已经有一个`URLConnection`作为参数传递的对象`XMLReader`。调用`setConnectTimeout(long)`URLConnection 并设置您的超时值。我不认为罗马提供任何连接超时选项

# javascript - 如何阻止 Chrome 进入调试模式？

> ID：15831685
> 
> 赞同：86
> 
> 时间：2013-04-05T10:34:15.413
> 
> 标签：javascript, jquery, google-chrome

如果调试窗口打开，即使没有设置断点，调试器也会自行开始运行。

我试过使用“停用断点”按钮，它是打开还是关闭都没有什么区别。

这发生在任何网站上。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-07T00:38:12.493

您不小心将“异常暂停”设置为所有/未捕获的异常。

转到“来源”选项卡。在右上角，切换看起来像被六边形包围的暂停符号的按钮（最右侧的按钮），直到圆圈的颜色变为黑色以将其关闭。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-03-03T23:11:58.620

这有几个原因：

1.  您已经打开了*暂停捕获异常*按钮。所以，把它关掉。

    [![在此处输入图像描述](https://i.stack.imgur.com/8nHCj.png)](https://i.stack.imgur.com/8nHCj.png)

2.  您已经切换了一行（或更多行）以在异常时暂停。所以，把它关掉。

    [![在此处输入图像描述](https://i.stack.imgur.com/WMVHZ.png)](https://i.stack.imgur.com/WMVHZ.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-10-26T09:47:16.427

我已经让它工作了......

请按照附图中突出显示的标记进行操作。

[![在此处输入图像描述](https://i.stack.imgur.com/KZzbO.png)](https://i.stack.imgur.com/KZzbO.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-18T14:40:24.073

如果您不熟悉这些工具，很可能在调试器中的某个时刻您切换了导致调试器停止应用程序的设置。

我建议你“禁用所有断点”：

[![在此处输入图像描述](https://i.stack.imgur.com/TWlR7.png)](https://i.stack.imgur.com/TWlR7.png)

来源：

[https://javascript.info/debugging-chrome](https://javascript.info/debugging-chrome)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-27T22:17:33.700

您为同一个 URL 和开发人员工具栏打开了多个 Google Chrome 浏览器选项卡。

在其他一些选项卡中，您设置了在当前选项卡中调试时显示的断点。

解决方案：关闭其他选项卡中的开发人员工具栏或选项卡本身。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-15T13:19:47.773

对于任何正在搜索为什么他们的 chrome 调试器会在每次页面加载时自动跳转到源选项卡的人，尽管所有断点/暂停/等事件都已被禁用。

对我来说，这是`"breakOnLoad": true`VS Code`launch.json`配置中的一行。

# networking - lxc 网络类型为空

> ID：15831688
> 
> 赞同：0
> 
> 时间：2013-04-05T10:34:26.023
> 
> 标签：networking, lxc

我想在没有网络的情况下运行 lxc 机器。我在配置文件“lxc.network.type=empty”中写入并启动实例映像，但映像未启动（悬停，冻结）。在文档中写道：

> 空：将只创建环回接口。

那么，我需要做什么才能在没有网络的情况下启动机器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:30:26.977

我找到了答案！转到**/etc/network/interfaces**和注释行：

> # 自动 eth0
> 
> # iface eth0 inet dhcp

# asp.net - 在 Treeview 的同一级别应用不同的叶节点样式

> ID：15831691
> 
> 赞同：0
> 
> 时间：2013-04-05T10:34:39.793
> 
> 标签：asp.net, treeview

我需要动态显示使用树视图控件的目录结构。我能够获取树视图，但样式存在问题。我的树视图看起来像这样。

![在此处输入图像描述](https://i.stack.imgur.com/wv9hV.jpg)

但问题是（IN IMAGE）机器类型和主板报告处于同一级别，但我想为机器类型（我想要文件夹图标）和主板报告（文件图标）显示不同的图标。实际上我正在生成这个使用网站地图从数据库中获取结构。

我在 aspx 文件中的 Treeview 代码如下。

```
<asp:TreeView ID="TreeView1" runat="server">
        <RootNodeStyle ImageUrl="~/TreeView/images/folder/folder.gif" />
        <ParentNodeStyle ImageUrl="~/TreeView/images/folder/folder.gif" />
        <LeafNodeStyle ImageUrl="~/TreeView/images/folder/file.gif" />
</asp:TreeView> 
```

所以任何人都可以帮助我..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:43:06.123

您可以使用每个节点的 ImageUrl 属性来实现它：例如：

```
<asp:TreeNode ImageUrl="image.jpg"></asp:TreeNode> 
```

# mysql - Ruby TinyInt（1）？

> ID：15831692
> 
> 赞同：2
> 
> 时间：2013-04-05T10:34:40.713
> 
> 标签：mysql, ruby

我有一个用状态标志（它是 tinyint(1)）定义的 mysql 表。但是，当我尝试检查该值是真还是假时，我似乎得出了错误的结果。也就是说，它不会将该值视为合法的真值或值，而是测试它是否不是“nil”或类似的 - 因此我的“似乎不起作用”

```
results.each_hash do |row|
 # What I tried

 # (a)
 if row['status'] 
    # do something - doesn't seem to work
 end

 # (b)
 if row['status'].to_i == 1
    # this seems correct
 end

 # (c)
 if row['status'] == false
   # doesn't seem to work
 end
end 
```

检查这个值的正确方法是什么（tinyint（1）），因为它应该是 Ruby 中的 TrueClass 或 FalseClass；但是（c）本身不起作用。

这是我使用的参考 - 我假设这应该适用于 rails 和 ruby​​ 本身（除非 ActiveRecord 完成工作） - [http://www.orthogonalthought.com/blog/index.php/2007/06/mysql-和-ruby-on-rails-datatypes/](http://www.orthogonalthought.com/blog/index.php/2007/06/mysql-and-ruby-on-rails-datatypes/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:57:02.487

从`active_record-3.2.13`，`abstract_mysql_adapter.rb`代码行 96：

```
 # By default, the MysqlAdapter will consider all columns of type <tt>tinyint(1)</tt>
  # as boolean. If you wish to disable this emulation (which was the default
  # behavior in versions 0.13.1 and earlier) you can add the following line
  # to your application.rb file:
  #
  #   ActiveRecord::ConnectionAdapters::Mysql[2]Adapter.emulate_booleans = false 
```

# android - Json解析正确的解决方案

> ID：15831696
> 
> 赞同：-9
> 
> 时间：2013-04-05T10:34:57.983
> 
> 标签：android

我陷入了一个问题。我收到了 Json 响应，例如

```
{
"Result":[
   "Entertainment",
   "Business",
   "Sports",
   "Technology"]
} 
```

我能够获得第一个值，即在执行后循环响应中这样的结果值是

```
["Entertainment","Business","Sports","Technology"] 
```

现在的问题是我得到的响应是字符串而不是数组。那么我怎样才能分别获取这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:38:38.193

> 问题是我得到的响应是字符串而不是数组

=>正如你所说，你有一个字符串的响应，那么你只需要用你得到的响应字符串创建 JSONObject ，然后使用下面的方法从中获取 JSONArray ：

```
try{
    JSONObject objJSON = new JSONObject(objResponse);
    JSONArray arrayResponse = objJSON.getJSONArray("Result");

    // iterate through the JSONArray and fetch one by one string
 } catch (JSONException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:40:26.883

你可以像这样解析你的json

```
try {
        JSONObject obj=new JSONObject("");
        JSONArray arr=obj.getJSONArray("Result");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:41:31.083

试试看

```
JSONObject jsonObj = new JSONObject(json);
JSONArray resultArray = jsonObj.getJSONArray("Result");

for(int i=0;i<resultArray.length();i++){  

  JSONObject jsonObj =   resultArray.getJSONObject(i);
  String Entertainment= jObject.getString("Entertainment");
  String    Business= jObject.getString("Business");
  String    Sports = jObject.getString("Sports");
  String Technology = jObject.getString("Technology ");

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T10:44:41.477

要解析你的`JSONArray`并返回一个`ArrayList`字符串，试试这个：

```
JSONObject json = new JSONObject(jsonString);
    JSONArray jsonArray = jsonObj.getJSONArray("Result");
    if(jsonArray!= null) {
        ArrayList<String> arrayResult = new ArrayList<String>();
        for(int i=0;i<jsonArray.length();i++){
            arrayResult.add(arrayResult.getString(i));
        }
    } 
```

**注意：你应该把它放在一** `try catch` **起来捕捉** `JSONException`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T10:38:22.413

像这样（并且`jsonString`是来自服务器的源 json 响应）：

```
JSONObject json = new JSONObject( jsonString );
JSONArray resultArray = json.getJSONArray("Result"); 
```

然后简单地迭代`resultArray`和`get()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T10:39:11.063

您可以从您的字符串中获取数组的每个`String`值，如下所示：-`Results``JSON`

```
JSONObject jsonObj = new JSONObject(jsonString);
JSONArray resultArray = jsonObj.getJSONArray("Result");
for(int i=0;i<resultArray.length();i++){
    System.out.println(resultArray.getString(i)); // Get each String.
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T11:32:49.940

我已经解决了这个问题

```
JSONParser jParser = new JSONParser();
   // getting JSON string from URL
   JSONObject json = jParser.getJSONObjectFromUrl(url);
   Log.e("json is", "--------------"+json);
   programResponse   =   json.getString("Result");
   Log.e("in the post-execute loop", "in the post-execute loop response is"+programResponse);
   JSONArray arrayResponse = new JSONArray(programResponse);
   for(int i = 0; i < arrayResponse.length(); i++){
   //JSONArray innerJsonArray = json.getJSONArray(i);
   String jsonObject = arrayResponse.getString(i);
   System.out.println(jsonObject);
   Log.e("length is", "--------------"+jsonObject);
   programValues.add(jsonObject);
} 
```

# android - 使用 Google Maps Android API v2 创建 Android 应用程序

> ID：15831700
> 
> 赞同：0
> 
> 时间：2013-04-05T10:35:15.210
> 
> 标签：android

我想构建一个使用 Google Maps Android API v2 的 Android 应用程序。所以，我点击了链接 - [Link](https://developers.google.com/maps/documentation/android/start#specify_settings_in_the_application_manifest)。按照链接中规定的步骤，我可以生成 API 密钥。完成这些步骤后，我尝试运行该应用程序。我遇到了以下错误。

```
04-05 10:01:56.442: E/AndroidRuntime(6170): FATAL EXCEPTION: main
04-05 10:01:56.442: E/AndroidRuntime(6170): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.task/com.example.task.MainActivity}: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2142)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2167)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.ActivityThread.access$600(ActivityThread.java:134)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.os.Looper.loop(Looper.java:150)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.ActivityThread.main(ActivityThread.java:4831)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at java.lang.reflect.Method.invoke(Method.java:511)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at dalvik.system.NativeStart.main(Native Method)
04-05 10:01:56.442: E/AndroidRuntime(6170): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:257)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Activity.setContentView(Activity.java:1867)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at com.example.task.MainActivity.onCreate(MainActivity.java:14)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Activity.performCreate(Activity.java:5008)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
04-05 10:01:56.442: E/AndroidRuntime(6170):     ... 11 more
04-05 10:01:56.442: E/AndroidRuntime(6170): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Fragment.instantiate(Fragment.java:584)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Fragment.instantiate(Fragment.java:552)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Activity.onCreateView(Activity.java:4656)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-05 10:01:56.442: E/AndroidRuntime(6170):     ... 21 more
04-05 10:01:56.442: E/AndroidRuntime(6170): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
04-05 10:01:56.442: E/AndroidRuntime(6170):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-05 10:01:56.442: E/AndroidRuntime(6170):     at android.app.Fragment.instantiate(Fragment.java:574)
04-05 10:01:56.442: E/AndroidRuntime(6170):     ... 24 more 
```

错误可能是由于 main.xml 中的**com.google.android.gms.maps.MapFragment**包。我的 DUT 中有**com.google.android.gms**包，但找不到**com.google.android.gms.maps.MapFragment**。我怎么知道这个包是否在我的 DUT 中，以及错误的解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:39:20.127

`MapFragment`是`google-play-services`图书馆的一部分。要使用它，您需要将其导入`google-play-services`到您`workspace`的项目中，然后从您的项目中引用它，您可以在`first 3 steps`我写的这篇博客文章中了解它是如何完成的：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

# c# - 如何将样式应用于所有按钮？

> ID：15831704
> 
> 赞同：2
> 
> 时间：2013-04-05T10:35:23.730
> 
> 标签：c#, windows-phone-7, xaml

如何以及在哪里创建一种样式，使所有按钮控件具有蓝色资源（黄色边框，蓝色背景）？

它也可以添加到texbox吗？

是否有一个集中的地方，因为我希望这种样式能够影响我应用程序中不同页面中的按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:40:06.640

在这些情况下，您可以使用`Styles`：

*   您将在一个类型的多个控件上应用相同的属性（或成员）
*   您将保存类型的良好和所需状态并稍后使用它。

您可以将其添加`Style`到控件的资源中或`ResourceDictionaries`像这样：

```
<Style TargetType="Button">
    <Setter Property="BorderBrush" Value="Yellow"/>
    <Setter Property="Background" Value="Blue"/>
</Style> 
```

如果您定义`x:key`，那么您应该明确说明哪个按钮遵循您的样式（例如`<Button Style="{StaticResource myButtonStyleKey}">`），否则您的样式将自动应用于按钮。

**编辑：**将**ResourceDictionary**（名为`myStyles.xaml`）添加到您的项目（在名为 的文件夹`MyResource`中）。这是代码：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="Button">
        <Setter Property="BorderBrush" Value="Yellow"/>
        <Setter Property="Background" Value="Blue"/>
    </Style>
</ResourceDictionary> 
```

然后在你`App.xaml`添加这个：

```
<Application x:Class="WPFApp.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="MyResource/myStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

# c# - COM-Interop 中的十进制封送处理

> ID：15831706
> 
> 赞同：0
> 
> 时间：2013-04-05T10:35:26.450
> 
> 标签：c#, com-interop

我有带有签名的 COM 对象方法

```
HRESULT _stdcall Method1([in] int ms);
```

接下来，我通过反射从 C# 调用此方法：

```
...

十进制毫秒 = 100.5m；
comType.InvokeMember("Method1", flags, null, comObject, new object[] { ms });

 ...

```

这个电话正确吗？我的意思是**小数**ms 将如何编组为**int**？

如果我通过 Activator 创建实例，则此代码有效

```
var comType= Type.GetTypeFromProgID("MyCom.Server", false);
var comObject= Activator.CreateInstance(comType);

```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:48:24.673

第一个片段使用在添加对 COM 服务器的引用时创建的 Runtime Callable Wrapper 进行早期绑定调用。当参数类型为 int 时，传递小数点不会让您享受，反射不会为您转换参数值。

第二个片段使用 IDispatch::Invoke() 进行后期绑定调用。十进制转换为 VT_DEC 类型的 VARIANT。COM 服务器中的 IDispatch 实现然后将该变体转换为所需的参数类型。COM 自动化辅助函数 VarI4FromDec() 可能会这样做，这取决于服务器是自己实现 IDispatch 还是将其留给库存实现。

由于您已经在使用 RCW，因此这两个代码片段都没有多大意义。只需使用 comObject.Method1(ms)。C# 编译器将为您强制转换小数点。如果您喜欢使用后期绑定，虽然缓慢但安全，那么您真的希望在 C# 版本 4 及更高版本中使用*动态*关键字。

# jsp - JSP（MVC DAO）：动作后返回同一页面

> ID：15831709
> 
> 赞同：0
> 
> 时间：2013-04-05T10:35:31.073
> 
> 标签：jsp, model-view-controller, dao

我需要在特定操作后返回同一页面，例如登录/注销/切换语言等。由于 DAO MVC，我的所有导航都在进行：请求转到控制器，控制器启动适当的操作。几乎所有动作都需要许多输入请求参数。

我的**问题**：如果我需要将我返回到同一页面的操作，而不是我需要将所有页面需要的参数保存在 page.jsp 的隐藏字段中？

*我的意思是，将所有参数/属性（生成page.jsp所需的）保存在page.jsp的隐藏字段中是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:34:23.953

我希望我已经清楚地理解了你的问题。您可以使用 session 来存储您的参数/属性，以便您可以在每个页面中使用它们（在同一个会话中）。

# matlab - 质心 3d matlab

> ID：15831710
> 
> 赞同：1
> 
> 时间：2013-04-05T10:35:31.837
> 
> 标签：matlab, geometry, computer-vision, physics

我有一个稀疏的 3d 体积（立方体），在每个 x,y 位置我想创建一个半径为 r 的球体，中心位于 x,y,z。对于每个球体，我想计算质心。

我的问题：

1.  每个球内的点分布不均，所以我的质心不是质心，我如何计算质心？我发现了很多不同的方法...

2.  我需要每次都计算它`size(x)*size(y)`，这可能非常大，我可以创建一个像这样的 3d 球体：

    ```
    w = ceil(r)*2+1;
    [x,y,z] = meshgrid(1:w,1:w,1:w);
    xc = floor(w./2)+1;
    yc = floor(w./2)+1;
    zc = floor(w./2)+1;   
    mask = (x-xc).^2 + (y-yc).^2 + (z-zc).^2 <= r.^2;
    mask = double(mask); 
    ```

但这会让我对每个点都进行循环，并且会很耗时。谢谢matlabit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:50:09.620

看一下[K-means clustering](http://en.wikipedia.org/wiki/K-means_clustering#Standard_algorithm)的更新步骤，它将找到球体的质心。

为了找到应该包含在该球体中的点，计算并阈值球体质心与每个点之间的[欧几里得距离。](http://en.wikipedia.org/wiki/Euclidean_distance#Three_dimensions)如果距离小于球体的半径，则将其包括在内。

在您的一组 x,y,z 球体质心上的三个深度嵌套 for 循环中执行此操作，您就完成了。

# eclipse - 设置属性以在 Eclipse 中启动配置

> ID：15831714
> 
> 赞同：0
> 
> 时间：2013-04-05T10:35:38.140
> 
> 标签：eclipse, configuration, attributes, launch

eclispe3.7 中的一个应用程序，我想在每次启动时为启动配置设置一个属性。我使用以下命令设置属性，但是在获取属性时，它只显示默认属性值。

```
launch.getLaunchConfiguration().getWorkingCopy().setAttribute(IGDBLaunchConfigurationConstants.ATTR_PORT, value); 
```

在另一个类上，使用以下代码从第一类启动：

```
launch.getLaunchConfiguration()..getWorkingCopy().getAttributes(); 
```

为什么无法设置属性？请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T09:06:25.007

当您使用 getWorkingCopy() 时，您会获得原始状态的副本，但您还需要使用 doSave()。

```
ILaunchConfigurationWorkingCopy launchCopy = launch.getWorkingCopy();
launchCopy.setAttribute(IGDBLaunchConfigurationConstants.ATTR_PORT, value);
launch = launchCopy.doSave(); 
```

你可以在这里阅读它是如何工作的：http: [//comments.gmane.org/gmane.comp.ide.eclipse.platform.debug.devel/240](http://comments.gmane.org/gmane.comp.ide.eclipse.platform.debug.devel/240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T14:01:45.410

我怀疑问题在于每次调用 getWorkingCopy() 都会获得不同的工作副本。如果您在调试器中检查工作副本对象的 Java ID，那么您将能够确定。

希望这会有所帮助，托马斯

# websphere - getRealPath("/") - 此方法的结果在 Tomcat 和 WebSphere 中有何不同

> ID：15831715
> 
> 赞同：0
> 
> 时间：2013-04-05T10:35:43.080
> 
> 标签：websphere

使用方法

```
getServletContext().getRealPath("/") 
```

在 Tomcat 中的路径末尾返回一个 **“\”**（例如 C:\testfolder\myapp），而在 Websphere 中则不返回（例如 C:\testfolder\myapp）。这是什么原因？getRealPath("/") 中 ("/") 的相关性是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:56:55.043

```
Q-1: What is the relevance of ("/") in getRealPath("/") 
```

/ 指的是您的根 Web 上下文路径。该函数返回您的 web 目录的物理路径，您的 war/web 应用程序安装在该目录中。

```
Q-2 Why tomcat appends \ in the end and websphere does not. 
```

正如您所提到的，不同的服务器的结果确实有所不同，因为当 Java EE 模糊定义任何部分时，API 实现因服务器而异。

问候，拉维

# java - 旋转pdf页面时书签不平衡

> ID：15831722
> 
> 赞同：1
> 
> 时间：2013-04-05T10:36:07.143
> 
> 标签：java, pdf, itext

我正在构建一个包含多个表格的 PDF。其中一些比平时宽，所以我必须旋转几页（将它们横向放置）才能舒适地看到整个表格。

问题是：当我将文档旋转为横向时，从该点生成的书签会延迟（或多或少）一页。它不完全是一页，有一个不平衡的，但我已经能够通过将这些书签移回一页来解决它。

在大写的时候，我试图在文档写的时候旋转它。然后我尝试在单独的文档中打开两篇文章（纵向和横向），将它们合并到一个带有书签的最终文档中。在这两种情况下，（坏的）结果是相同的。

这是我使用的代码：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ByteArrayOutputStream baosLandscape = new ByteArrayOutputStream();
ByteArrayOutputStream baosTotal = new ByteArrayOutputStream();

PdfCopyFields copier = new PdfCopyFields(baosTotal);
copier.setViewerPreferences(PdfWriter.PageModeUseOutlines);

Document document = new Document(PageSize.A4, 72, 48, 48, 24);
PdfWriter writer = PdfWriter.getInstance(document, baos);
writer.setViewerPreferences(PdfWriter.PageModeUseOutlines);
document.open();
// WRITE MY TABLES IN PORTRAIT
document.close();

Document documentLandscape = new Document(PageSize.A4.rotate(), 48, 65, 71, 48);
PdfWriter writerLandscape = PdfWriter.getInstance(documentLandscape, baosLandscape);
documentLandscape.open();
// WRITE MY TABLES IN LANDSCAPE
documentLandscape.close();

PdfReader reader = new PdfReader(baos.toByteArray());
List bookmarks = SimpleBookmark.getBookmark(reader);
copier.addDocument(reader);

PdfReader readerLandscape = new PdfReader(baosLandscape.toByteArray());
List bookmarksLandscape = SimpleBookmark.getBookmark(readerLandscape);
copier.addDocument(readerLandscape);

// HERE IT IS WHERE I CORRECT THE DELAY FOR THE LANDSCAPE BOOKMARKS
SimpleBookmark.shiftPageNumbers(bookmarksLandscape, reader.getNumberOfPages()-1, null);
bookmarks.addAll(bookmarksLandscape);

copier.setOutlines(bookmarks);
copier.close();

return baosTotal; 
```

但是，正如我之前提到的，它并不完全是一页，最后书签并不像我想要的那样精确。

你们中有人遇到过这个问题吗？有什么解决办法吗？还是我做错了什么？

提前致谢！

PS：我忘了提到我是通过在其中创建章节和章节（每个章节生成一个书签）来生成书签，最后将章节添加到文档中：

```
 Paragraph titulo = new Paragraph("TITLE", myTitleFont);
  titulo.setSpacingAfter(20f);
  Chapter chapter = new Chapter(titulo, 5);
  chapter.setNumberDepth(0);
  Section section = null;

  for(int i = 0; i < MAX; i++){
    Paragraph tableName = new Paragraph("Table " + i, myFont);
    section = chapter.addSection(10f, tableName, i);
    section.setNumberDepth(0);

    // GENERATE eventsTable

    eventsTable.setSpacingBefore(10f);
    eventsTable.setSpacingAfter(20f);
    section.add(eventsTable);

    section.newPage();
    section.setComplete(true);
  }

  chapter.setComplete(true);
  document.add(chapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T22:51:05.267

@Gayolomao，不确定这是否有帮助，但我遇到了类似的问题。当我在横向页面（位于纵向页面之后）上设置书签时，它会在一页后显示。

以下是我为纵向页面设置书签的方法，这对于纵向页面非常有用（尽管当用于横向页面时，书签会显示在第二个横向页面的开头）：

```
document.newPage();
sect = "Chapter 1 Title";
sectionBookmark=new PdfOutline(root, new PdfDestination(PdfDestination.FITH, writer.getVerticalPosition(true)), sect);
document.add(new Paragraph(LEAD, sect, styleChapterTitle)); 
```

以下是我如何修改它以在位于纵向页面之后的第一个横向页面顶部获取书签：

```
document.setPageSize(PageSize.A4.rotate());  // landscape
document.newPage();
sect="Chapter 2 Title";
sectionBookmark=new PdfOutline(root, new PdfDestination(PdfDestination.FITH,0),sect); // use 0 on landscape pages to trigger bookmark at top of page
document.add(new Paragraph(LEAD, sect, styleChapterTitle)); 
```

# java - 分析 JasperReports 导出输出

> ID：15831741
> 
> 赞同：-1
> 
> 时间：2013-04-05T10:36:51.567
> 
> 标签：java, unit-testing, pdf, jasper-reports

再次 - Jasperreports...

因此，我们得到了带有类似于此的图表和表格的报告：

```
JAN | FEB | MAR | ... | DEC | SUM
----+-----+-----+-----+-----+----
 5  |  1  |  9  | 120 | 20  | 155
(Numbers represent amounts of vehicles) 
```

在这些表下方有多个表，其中包含上表中更详细的数据（以向下钻取的方式）。

我们将这些报告导出为 PDF，并在 Web 应用程序中作为可下载文档提供。所需的数据是在专门的 Java 工厂中计算出来的。根据报告，有一个工厂提供带有哑数据对象的列表。这些对象包含显示在图表和表格中的汇总数字。

此外，数字是超链接。他们转发到一个 servlet，该 servlet 提供一个 XLS 导出，其中包含有关每辆车的详细数据。当然，每个超链接都有一堆 servlet 的参数。

**我们想要拥有的：**

一个完全自动化的测试，它执行以下操作：

*   检查每个表的数据完整性（sum列中的数字真的是之前每列的总和）
*   检查明细表相对于上级表的数据完整性（JAN列总和=上级表JAN列数）
*   获取每个数字的超链接并将其提供给 XLS 导出，以检查 XLS 中的车辆数量是否等于表中显示的数字

所以测试应该与此类似：

```
Test -> generate PDF report -> check table integrity -> parse links -> check XLS -> assertEverythingLooksFine() 
```

**我们尝试过的：**

目前，PDF 报告被写入 a`ByteArrayOutputStream`以将数据转发到 a `PdfReader`，后者使用`SimpleTextExtractionStrategy`. 这样虽然很麻烦，但可以检查表的完整性。此外，无法获取超链接。另一个想法是将报告导出为 HTML 而不是 PDF 以获取超链接。检查表的完整性更加麻烦，因为 JasperReports 不会生成 HTML 表，而是生成一堆 DIV。

**补充笔记：**

*   是的，也可以根据工厂的输出来检查表的完整性——这个想法是在我写这个问题的时候想到的。但真正重要的测试点是 XLS 导出，导出的参数是在 JasperReports 中生成的
    *   是的，生成导出参数也可以在工厂中完成，但我认为它不属于那里（层架构等）
*   我知道，在单元测试中分析二进制格式输出是一个坏主意，但是 JasperReports 是一个相当黑的盒子，我们在 jrxml-stuff 中做了很多工作
*   我还想到了某种格式化程序/定制程序，它在生成时访问元素
*   我已经阅读了[http://whathaveyoutried.com](http://whathaveyoutried.com)并尽力了；）

**我的问题：**

*   您如何看待这种方法？合理吗？
*   是否有一些我错过了可以做得更好的点？
*   JasperReports 是否有某种 API 或接口可以访问以更轻松地访问生成的输出？也许格式化程序/定制程序方法？
*   有没有更好的阅读 PDF 的 API？
*   我忘了合理的问题吗？;)

**我们使用哪些版本：**

*   Java 1.6
*   兴趣点 3.8
*   iText 5.1.3
*   碧玉报告 4.7.1

我希望这个问题不要太乱，你不要口头上把我打死；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:29:15.597

正如@Vash 所说，这不是可以回答/讨论此类话题的地方。

不过，如果有人遇到类似问题并找到此站点，我将发布我们的解决方案。

**获得所需 - 通过 JasperReports 生成 - 输出**

生成 HTML 代替 PDF 或使用某种 API 解析最终的 PDF 文档都不是一个真正令人满意的解决方案。我们所做的是编写一个链接到报告的脚本。在报告中，在显示车辆数量的地方调用 scriplet。车辆数量和生成的链接作为参数传递给脚本，该方法再次返回该数字。

现在脚本有一个静态的`Map<String, Double>`，它收集所有的链接和数字。生成报告后，我们可以抓取它`Map`并分析相应的 XLS 导出。通过这种方式，我们可以比较 PDF 和 XLS 中的车辆数量。

这种方法的缺点是，PDF 报告生成为一个空的`OutputStream`.

**检查表数据的完整性**

幸运的是，显示的数据是在 java 工厂中生成的。所以我们所要做的就是实例化它并检查它的输出，这些输出是在特殊的数据类和集合中传递的。这样我们就可以隐式验证报表中的数据是否正确。

使用由三个报告和大约 240 个 XLS 文档组成的设置运行完整的单元测试大约需要五分钟。作为副产品，我们有一堆 XLS 表（也写入 empty `OutputStreams`），这不是很好，但另一方面，它只是一个单元测试，不必非常高效。

# mysql - 并发访问多个mysql表

> ID：15831742
> 
> 赞同：1
> 
> 时间：2013-04-05T10:36:53.617
> 
> 标签：mysql, multithreading, python-2.7

我正在使用python。我想使用线程访问一个数据库中的多个 mysql 表。

```
class DBThread(threading.Thread):

    def __init__(self):
        Thread.__init__(self)

    def __init__(self,i,db):

        self.t = i
        self.DB=db
        Thread.__init__(self)

    def run(self):

        time.sleep(0)
        mpo = self.DB.get_place(self.t)

###################################################################

for i in range(0,3):

        dbThread = DBThread(self,i,self.db)
        dbThread.start()
        threads.append(dbThread)

        for dbThread in threads:
            dbThread.join() 
```

但我收到一条错误消息

> 错误 2013：在查询期间丢失与 MySQL 服务器的连接错误 2013：在查询期间丢失与 MySQL 服务器的连接错误 2006：MySQL 服务器已消失

# python - Python：将列表元素合并为一个

> ID：15831746
> 
> 赞同：0
> 
> 时间：2013-04-05T10:36:59.163
> 
> 标签：python, arrays, concatenation

我想知道 Python 中是否有任何方法可以将列表的元素连接到一个元素中。目前我有类似的东西：

```
Test = [(1, 2, 3), (4, 5, 6)]
print Test[0]
(1, 2, 3)
print Test[1]
(4, 5, 6) 
```

我要这个：

```
Test = [(1, 2, 3), (4 ,5, 6)]
print Test[0]
(1, 2, 3), (4, 5, 6) 
```

然后我希望能够传输 Test[0] 的内容并将其传输到一个 numpy 数组，这样：

```
array = [(1, 2, 3), (4, 5, 6), (1, 2, 3), (4, 5, 6), ...]
array[0] = (1, 2, 3), (4, 5, 6)
array[1] = (1, 2, 3), (4, 5, 6) 
```

我尝试转换为字符串并连接，但它将列表中的*所有内容*（即括号和所有内容）转换为字符。有什么建议么？

EDIT1：我忘了提到我将使用大量数据。我尝试使用extend()、append() 和“+”运算符，但这样做会遇到内存问题，因为extend、append 和+ 在内存中保存了不断增长的列表。

EDIT2：还要注意元素 (x, y, z) 是一个 numpy 数组结构。

EDIT3：有一些混乱。我不只是想打印格式 (1, 2, 3), (4, 5, 6)，我需要数据类型采用 numpy 数组方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:38:33.370

```
Test = [Test] 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:41:10.993

从您的评论中：

> “测试应该是一个只包含一个元素的数组/列表。即，只有 Test[0] = (1, 2, 3), (4, 5, 6)”

您可以在另一个列表中“包装”测试，从而使其看起来像一个元素（尽管您也可以访问该列表的子元素）：

```
Test = [(1, 2, 3), (4, 5, 6)]
Test = [Test]
print Test[0] # [(1, 2, 3), (4, 5, 6)] 
```

# apache - mod_rewrite 从主域中提取图像

> ID：15831747
> 
> 赞同：0
> 
> 时间：2013-04-05T10:37:00.877
> 
> 标签：apache, mod-rewrite, url-rewriting

我正在尝试从主域中获取子域中的所有模板图像和 css 文件，这样我就不需要复制所有内容。

此规则适用于根文件夹中的图像，但不适用于子目录。

```
RewriteCond %{HTTP_HOST} sub.domain.com [NC]
RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|css|js|txt|ico|pdf)$ [NC]
RewriteRule ^(.*) http://www.domain.com/$1 [L,R=301] 
```

如何修改代码以使所有指定的扩展名都指向主域，即使这些文件位于不同的文件夹中，而不仅仅是根文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:54:18.283

在 .htaccess 文件中试试这个：

```
RewriteCond %{HTTP_HOST} ^sub.domain.com$
RewriteRule ^(.+\.(?:jpg|gif|png|css|js|txt|ico|pdf))$ http://www.domain.com/$1 [NC,R=permanent] 
```

这应该获取整个请求路径和文件名，然后将其附加到主域以进行重定向。

如果您改用 httpd.conf，则需要在 RewriteRule 匹配模式的`^`字符后立即添加一个正斜杠。

# linq - 对象上的 linq OrderBy 属性

> ID：15831750
> 
> 赞同：0
> 
> 时间：2013-04-05T10:37:22.860
> 
> 标签：linq, entity-framework-4

使用 EF4 是否可以通过属性对属性进行排序，即

EntityA 具有 Name 属性。实体 B 和实体 A 有一些其他属性。我想获取由 EntityA.Name 排序的 EntityB 列表

```
entityBList = _repo.Find<EntityB>() .OrderBy(x => x.EntityA.Name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:29:47.353

为什么这不起作用？我知道它没有使用 EF4，但概念是一样的。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    namespace LinqOrderByReference
    {
        class Program
        {
            static void Main(string[] args)
            {
                EntityA[] entitiesA = {   new EntityA { Ordinal = 3, SecretCode = "xxx"}, 
                                          new EntityA { Ordinal = 2 ,SecretCode = "x"}, 
                                          new EntityA { Ordinal = 1 ,SecretCode = "x"} };
                EntityB[] entitiesB = {  new EntityB { Name = "C", EntityA = entitiesA[2] }, 
                                          new EntityB {Name = "B", EntityA = entitiesA[1] },
                                          new EntityB {Name = "A", EntityA = entitiesA[0] } };

                IEnumerable<EntityB> entitiesBList = entitiesB.OrderBy(x => x.EntityA.Ordinal);
                foreach (EntityB b in entitiesBList)
                {
                    Console.WriteLine("EntityB.Name: {0}, Ordinal {1}.", b.Name, b.EntityA.Ordinal);
                }
                Console.Read();
            }
        }

        public class EntityA
        {
            public int Ordinal { get; set; }
            public string SecretCode { get; set; }
        }

        public class EntityB
        {
            public string Name { get; set; }
            public EntityA EntityA { get; set; }
        }
    } 
```

输出为：
EntityB.Name：C，Ordinal
1。EntityB.Name：B，Ordinal
2。EntityB.Name：A，Ordinal 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:48:33.267

name 属性是一个简单的字符串，还是包含 First name 和 Last Name，如果是，它是否覆盖 GetHashCode 方法？如果是这样，您可能想看看这篇文章[What is the best algorithm for a overridden System.Object.GetHashCode?](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)

# sql - 有没有 DBCC CHECKIDENT 的替代品？

> ID：15831755
> 
> 赞同：1
> 
> 时间：2013-04-05T10:37:46.567
> 
> 标签：sql, sql-server, sql-server-2008

SQL Server 中是否有 DBCC CHECKIDENT 的替代方法（例如更改列查询）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:06:51.640

你可以这样试试。

```
 SET IDENTITY_INSERT [MyTable] ON
INSERT INTO Mytable(ID,name)values (@AutoIncrementvalue-1,'siva')
SET IDENTITY_INSERT [MyTable] OFF

--Insert into table or whatever here
-- finally delete the value which we inserted initially
DELETE FROm MyTable WHERE ID=@AutoIncrementvalue-1 
```

但我总是更喜欢`DBCC CHECKIDENT`. 您可以使用它来满足您的 TL。

# python - Scipy curvefit RuntimeError：未找到最佳参数：函数调用次数已达到 maxfev = 1000

> ID：15831763
> 
> 赞同：38
> 
> 时间：2013-04-05T10:38:17.067
> 
> 标签：python, scipy, curve-fitting

我想做一个对数拟合。但我不断收到运行时错误：

> 未找到最佳参数：函数调用次数已达到 maxfev = 1000

我使用以下脚本。谁能告诉我哪里出错了？我使用 Spyder 仍然是初学者。

```
import math
import matplotlib as mpl
from scipy.optimize import curve_fit
import numpy as np

#data
F1=[735.0,696.0,690.0,683.0,680.0,678.0,679.0,675.0,671.0,669.0,668.0,664.0,664.0]
t1=[1,90000.0,178200.0,421200.0,505800.0,592200.0,768600.0,1036800.0,1371600.0,1630800.0,1715400.0,2345400.0,2409012.0]

F1n=np.array(F1)
t1n=np.array(t1)

plt.plot(t1,F1,'ro',label="original data")

# curvefit
def func(t,a,b):
    return a+b*np.log(t)

t=np.linspace(0,3600*24*28,13)

popt, pcov = curve_fit(func, t, F1n, maxfev=1000)    

plt.plot(t, func(t, *popt), label="Fitted Curve")

plt.legend(loc='upper left')
plt.show() 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2019-06-13T05:05:27.030

西皮的

```
 curve_fit() 
```

使用迭代来搜索最佳参数。如果迭代次数超过了默认的800次，但是仍然没有找到最优参数，那么就会出现这个错误。

```
 Optimal parameters not found: Number of calls to function has reached maxfev = 800 
```

您可以为curve_fit() 提供一些初始猜测参数，然后再试一次。或者，您可以增加允许的迭代次数。或者两者都做！

这是一个例子：

```
 popt, pcov = curve_fit(exponenial_func, x, y, p0=[1,0,1], maxfev=5000) 
```

p0 是猜测

maxfev 是最大迭代次数

您还可以尝试设置边界，这将有助于函数找到解决方案。但是，您不能同时设置边界和 max_nfev。

```
 popt, pcov = curve_fit(exponenial_func, x, y, p0=[1,0,1], bounds=(1,3)) 
```

来源1：[https ://github.com/scipy/scipy/issues/6340](https://github.com/scipy/scipy/issues/6340)

Source2：我自己测试发现关于github的不是100%准确

此外，关于不使用 0 作为“x”值的其他建议也是很好的建议。以 1 开始您的“x”数组，以避免除以零错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-05T12:37:29.743

您的原始数据是`t1`和`F1`。因此`curve_fit`应该`t1`作为它的第二个参数给出，**而不是** `t`.

```
popt, pcov = curve_fit(func, t1, F1, maxfev=1000) 
```

现在，一旦您获得拟合参数 ，您就可以在 中的点`popt`进行评估以获得拟合曲线：`func``t`

```
t = np.linspace(1, 3600 * 24 * 28, 13)
plt.plot(t, func(t, *popt), label="Fitted Curve") 
```

（我从`t`（根据 StuGrey 的回答）中删除了零以避免`Warning: divide by zero encountered in log`.)

* * *

```
import matplotlib.pyplot as plt
import scipy.optimize as optimize
import numpy as np

# data
F1 = np.array([
    735.0, 696.0, 690.0, 683.0, 680.0, 678.0, 679.0, 675.0, 671.0, 669.0, 668.0,
    664.0, 664.0])
t1 = np.array([
    1, 90000.0, 178200.0, 421200.0, 505800.0, 592200.0, 768600.0, 1036800.0,
    1371600.0, 1630800.0, 1715400.0, 2345400.0, 2409012.0])

plt.plot(t1, F1, 'ro', label="original data")

# curvefit

def func(t, a, b):
    return a + b * np.log(t)

popt, pcov = optimize.curve_fit(func, t1, F1, maxfev=1000)
t = np.linspace(1, 3600 * 24 * 28, 13)
plt.plot(t, func(t, *popt), label="Fitted Curve")
plt.legend(loc='upper left')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/Tn6Hf.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-13T19:00:15.177

`Curve_fit()`使用迭代来搜索最佳参数。如果迭代次数超过了设定的 1000 次，但仍然没有最优参数，那么就会出现这个错误。您可以为 提供一些初始猜测参数`curve_fit()`，然后重试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T11:27:41.003

修复导入语句后：

```
#import matplotlib as mpl
import matplotlib.pyplot as plt 
```

您的代码产生了以下错误：

```
RuntimeWarning: divide by zero encountered in log 
```

改变：

```
#t=np.linspace(0,3600*24*28,13)
t=np.linspace(1,3600*24*28,13) 
```

产生以下输出：

![在此处输入图像描述](https://i.stack.imgur.com/lyjxN.png)

# python-2.7 - numpy 2D 矩阵 - 在这种情况下如何提高性能？

> ID：15831766
> 
> 赞同：1
> 
> 时间：2013-04-05T10:38:32.263
> 
> 标签：python-2.7, numpy

我开始知道 numpy 对于一个非常大的矩阵的单个元素访问很慢。以下部分代码运行大约需要 7-8 分钟。矩阵大小约为 3000*3000

```
import numpy as np
................
................
ArrayLength=len(Coordinates)
AdjMatrix=np.zeros((len(Angles),len(Angles)))
for x in range(0, Arraylength):
    for y in range(x+1, Arraylength-x):
        distance=Distance(Coordinates[x],Coordinates[y)
            if(distance<=radius)
                AdjMatrix[x][y]=distance
                AdjMatrix[y][x]=distance 
```

我基本上是在尝试为由大约 3000 个节点组成的图构建一个邻接矩阵。有人可以帮我做这种麻木的方式吗？或者有什么替代方案？

编辑：这是距离（）函数

```
Def Distance(p1,p2):
    distance=np.sqrt(np.square(p1[0]-p2[0])+np.square(p1[1]-p2[1]))
    return distance 
```

顺便说一句，我将坐标作为元组传递。如 p[0]=x 坐标和 p[1]=y 坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:53:18.977

能发一下`Distance()`功能吗？如果是普通函数，`scipy.spatial.distance.cdist`可以很快计算出距离矩阵：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html#scipy.spatial.distance.cdist](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html#scipy.spatial.distance.cdist)

**编辑**：

您确实可以使用`pdist`，这是一个示例：

```
from scipy.spatial.distance import pdist, squareform
coordinates = [(0.0, 0), (1.0, 2.0), (-1.0, 0.5), (3.1, 2.1)]
dist = squareform(pdist(coordinates))
print dist 
```

输出：

```
[[ 0\.          2.23606798  1.11803399  3.74432905]
 [ 2.23606798  0\.          2.5         2.1023796 ]
 [ 1.11803399  2.5         0\.          4.40113622]
 [ 3.74432905  2.1023796   4.40113622  0\.        ]] 
```

如果要屏蔽一些数据：

```
dist[dist > 3.0] = 0
print dist 
```

输出：

```
[[ 0\.          2.23606798  1.11803399  0\.        ]
 [ 2.23606798  0\.          2.5         2.1023796 ]
 [ 1.11803399  2.5         0\.          0\.        ]
 [ 0\.          2.1023796   0\.          0\.        ]] 
```

# java - 如何在没有 jdbc 和其他框架的情况下连接到 java 中的数据库？

> ID：15831767
> 
> 赞同：2
> 
> 时间：2013-04-05T10:38:33.130
> 
> 标签：java, jdbc

除了建立 jdbc 连接或使用内部使用 jdbc 的框架之外，还有其他方法可以连接到数据库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:53:47.677

Sure, it's possible. But not likely.

You'd have to understand the protocol that the database vendor expected completely.

You'd have to write your own client to converse with the vendor's listener on the server side.

It can be done, but I doubt that you or I would be up to it.

The big question is: why?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:46:19.080

您可以使用 JDBC ODBC 桥...虽然不推荐..

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;

public class Main {
  public static void main(String[] args) throws Exception {
    Connection conn = getConnection();
    Statement st = conn.createStatement();
    // st.executeUpdate("drop table survey;");
    st.executeUpdate("create table survey (id int,name varchar(30));");
    st.executeUpdate("insert into survey (id,name ) values (1,'nameValue')");

    st = conn.createStatement();
    ResultSet rs = st.executeQuery("SELECT * FROM survey");

    ResultSetMetaData rsMetaData = rs.getMetaData();

    int numberOfColumns = rsMetaData.getColumnCount();
    System.out.println("resultSet MetaData column Count=" + numberOfColumns);

    st.close();
    conn.close();
  }

  private static Connection getConnection() throws Exception {
    String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
    String url = "jdbc:odbc:northwind";
    String username = "";
    String password = "";
    Class.forName(driver);
    return DriverManager.getConnection(url, username, password);
  }
} 
```

# c# - 如何在 Crystal Reports 中绑定会话值

> ID：15831771
> 
> 赞同：2
> 
> 时间：2013-04-05T10:38:45.367
> 
> 标签：c#, crystal-reports, session-variables

我需要使用参数将我的会话值绑定到我的水晶报告中。我该如何绑定它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:42:41.850

阅读本主题

[以编程方式将参数传递到水晶报告](http://www.codeproject.com/Articles/61393/Programmatically-Pass-Parameters-into-Crystal-Repo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:43:13.087

```
report.SetParameterValue("@SessionVar", sessionvar); 
```

其中：@SessionVar 是您在设计报告时添加的参数，而 sessionvaris 是参数的值

# java - 反射和不变性应该如何协同工作

> ID：15831773
> 
> 赞同：14
> 
> 时间：2013-04-05T10:38:59.307
> 
> 标签：java, reflection, concurrency, jvm, immutability

根据[JSR-133](http://download.oracle.com/otndocs/jcp/memory_model-1.0-pfd-spec-oth-JSpec/) ，不可变对象是线程安全的，不需要同步。但是，可以使用反射更新最终字段的值：

```
package com.stackoverflow;

import java.lang.reflect.Field;

public class WhatsGoingOn {

    static class Immutable {
        private final int value;

        public Immutable(int value) {
            this.value = value;
        }

        public int getValue() {
            return value;
        }
    }

    public static void main(String[] args) throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException {
        final Immutable immutable = new Immutable(Integer.MIN_VALUE);

        final Field f = Immutable.class.getDeclaredField("value");
        f.setAccessible(true);

        System.out.println(immutable.getValue());
        f.set(immutable, Integer.MAX_VALUE);
        System.out.println(immutable.getValue());
    }
} 
```

鉴于依赖反射的框架数量（Spring 和 Hibernate 只是少数），我很好奇规范对这种情况的看法。例如，如果我将字段更新放入同步块中，将保证在其他线程中的可见性，或者值将根据最终规范缓存在寄存器中。

[http://download.oracle.com/otndocs/jcp/memory_model-1.0-pfd-spec-oth-JSpec/](http://download.oracle.com/otndocs/jcp/memory_model-1.0-pfd-spec-oth-JSpec/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T11:52:24.570

> 如果一个对象在构造后它的状态不能改变，那么它就被认为是不可变的。 [http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)

您正在将该对象用作**可变**对象，因为您正在更改其状态。

确实，使用反射打破了教程中定义的不变性，因为您可以使用它来更改非常量的最终字段。

抗反射不可变对象的示例如下：

```
static class Immutable {
    // This field is a constant, and cannot be changed using Reflection
    private final int value = Integer.MIN_VALUE;

    public int getValue() {
        return value;
    }
}

public static void main(String[] args) throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException {
    final Immutable immutable = new Immutable();

    final Field f = Immutable.class.getDeclaredField("value");
    f.setAccessible(true);

    System.out.println(immutable.getValue());
    f.set(immutable, Integer.MAX_VALUE);
    System.out.println(immutable.getValue());
} 
```

在这种情况下，您的反射测试将失败，并且该值将保持不变`Integer.MIN_VALUE`。但是，嘿，我们总是可以使用本机代码或内存编辑器将该值更改为其他值。

如果您使用反射进行黑客攻击，那么您最好不要将您的字段称为 final 并提供操作它的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T10:41:51.757

如果您坚持关闭访问控制并做一些淘气的事情，那么所有的赌注都会被反思。

静态常量通常在编译时内联，因此更改它们的值可能无论如何都不会产生影响。结果实际上取决于优化器在编译时有多聪明，以及 JIT 编译器在运行时有多聪明。

最终结果：“这里是龙，害怕所有敢于踏入这里的人！”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T11:25:13.240

在这种情况下会发生内存一致性错误：

1 线程 1 用 b1.getField1() 读取一个字段并得到 1

2 线程 2 用 b1.setField1(2) 改变字段

3 现在，当线程 1 调用 b1.getField1() 时，它可能会再次获得 1，因为在没有同步的情况下，JVM 可以优化此调用并返回缓存值。

但是如果我们在实例化过程中只初始化一个可变 bean（可能像 Spring 容器那样使用反射）并且其他线程只会在初始化后读取它，即使没有任何同步也不会出现内存一致性错误

当您通过反射更改其字段时，相同的规则适用于不可变对象。

# c# - 如何编写 lambda 表达式来创建燃尽图

> ID：15831777
> 
> 赞同：0
> 
> 时间：2013-04-05T10:39:08.267
> 
> 标签：c#, linq

我的目标是创建一个燃尽图。

我有一个包含以下相关字段的故障对象：

*   故障ID
*   故障创建开始日期
*   故障关闭日期

我创建了一个列表，它返回两个给定日期之间的日期列表

```
List<DateTime> listOfDays = new List<DateTime>();
        int lastDayOfMonth = DateTime.DaysInMonth(i_Date.Year, i_Date.Month);

        for (int i = 1; i <= lastDayOfMonth; i++)
        {
            listOfDays.Add(new DateTime(DateTime.Now.Year,
                                   DateTime.Now.Month, i));
        } 
```

现在我想知道每天打开的故障数量，这意味着它们还没有关闭。

基本上`FaultClosedDate`应该>比相关`day`

我创建了一些 linq 表达式，但它执行内部连接而不是左连接。

我想获取该月的所有天数并计算当天所有打开的故障

```
var tryfaults = listOfDays.SelectMany(d => i_Context.Faults.GetAllFaults()
                .Where(f=> f.FaultCloseDateTime >= d.Date), (d, f) => new
                {
                    Date = d.Date,
                    Open = f.FaultID
                }).GroupBy(d => d.Date).Select(d => new
                    {
                        Date = d.Key.Date,
                        Open = d.Count()
                    }).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:52:36.070

你可以使用类似的东西：

```
var allFaults = i_Context.Faults.GetAllFaults();
var faults = 
  listOfDays.Select(d => new { Day = d.Date,
                               OpenFaults =
                                   allFaults.Count(f => f.FaultCloseDateTime >=
                                                           d.Date)
                             }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:51:54.593

也许我什么都没看到，但不只是：

```
var tryfaults = listOfDays.Select(d => new {
                    Date = d.Date,
                    Open = i_Context.Faults.GetAllFaults().Where(f=> f.FaultCloseDateTime >= d.Date).Count())
                }).ToList(); 
```

但我不得不说 - 你对该查询的一般想法是非常低效的。

# c# - 如何将 css 类注入 MvcHtmlString？

> ID：15831779
> 
> 赞同：7
> 
> 时间：2013-04-05T10:39:19.180
> 
> 标签：c#, css, asp.net-mvc-3

是否可以将 css 类注入到已封装在`MvcHtmlString`.

作为我正在构建的框架的一部分，我的任务是为表单元素（、、等）创建我自己的 MVC 扩展方法版本，但`TextBox`需要`TextBoxFor<>`注意以下几点：

*   他们必须创建正确的 HTML 标记，包括 CSS 类，以匹配已经为网站设计的样式。在大多数情况下，这仅仅意味着添加一个特定的类。
*   它们必须尽可能地忠实于 MVC 扩展方法，以便开发人员使用它们感到舒适

大多数（如果不是全部）MVC 扩展方法都返回一个`MvcHtmlString`，因此模仿该功能的最简单方法是直接从我的方法中调用这些方法。我有自己的 Html Helper, `OuHelper`，我的框架正在使用它，因此希望创建例如 a 的开发人员`TextBox`会调用以下内容：

> `@Ou.TextBoxFor(m => m.Username)

我希望生成的 Html 呈现如下：

> `<input type="text" name="Username" id="Username" class="int-text" />`

如果我创建自己的重载版本，就像它们在 MVC 框架中一样，我将能够控制在需要的地方添加额外的 CSS 类，但对于这些方法的 HTML 输出的如此小的变化来说，这似乎有点过分了。我需要提供所有重载的等效实现（`TextBox`仅当您计算通用和非通用版本时，大约有 12 个）。我想做的是`TagBuilder`相反的（从输出开始并从中创建一个对象，使之类`MergeAttributes`的东西可用），但我认为这是不可能的。

需要明确的是：我正在编写的框架代码需要自己添加 css 类，但是使用我创建的扩展方法的开发人员也应该可以添加他们自己的自定义 css 类。这些将根据标准 MVC 框架表单扩展方法的功能添加/附加

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:01:11.323

你目前似乎有一个很好的系统。您不能注入/覆盖 HtmlHelper 类的默认样式，如果需要，可以[`HtmlHelper`在此处查看输入扩展](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/b4631c0ef899fdccf210cda4c0e39591e67537b7#src/System.Web.Mvc/Html/InputExtensions.cs)的源代码。

我能想到的唯一另一种方法是使用扩展方法，就像它在实际的 ASP.NET 源代码中所做的那样。这是一个示例，函数的名称可以是您想要的任何名称，但它需要不同，`TextBoxFor`因为它具有相同的参数列表。

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString IntTextFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
    {
        return htmlHelper.TextBoxFor(expression, new { @class = "int-text" });
    }
} 
```

用法就像常规 MVC 仅包含扩展方法的命名空间一样。

```
@using MyProject.Helpers;

@Html.IntTextFor(e => e.Age) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:47:24.383

你可以这样做

```
@Ou.TextBoxFor(m => m.Username,new{@Class="your class Name"}) 
```

或用于内联样式

```
@Ou.TextBoxFor(m => m.Username,new{@style="font-size:10px"}) 
```

# ios - 在 iphone/ipad 中自动调整子视图的大小？

> ID：15831783
> 
> 赞同：0
> 
> 时间：2013-04-05T10:39:25.110
> 
> 标签：ios, objective-c, xcode, autoresizingmask

我有一个视图（将其命名为“MyView”），其中有 4 个子视图 - 比如说 2 个 UIImageView，2 个 UILabel。我必须将此视图放在其他视图中（需要的地方）。在放置 MyView 时，我必须给出一个框架（任何框架）。根据赋予“MyView”的框架，子视图应按位置和大小进行调整（根据原始位置和大小自动调整）。如果我从“MyView”中删除 4 个子视图中的任何 1 个，其余 3 个子视图应在“MyView”中自动调整。我应该在没有“AutoLayout”的情况下实现这一点来支持旧版本。我在 IB 中使用了 AutoresizingMask 属性，但没有得到想要的结果。

任何人都可以帮助我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:56:17.317

Without Autolayout you can't do any suffisticated layout out of the box.

You would have to write a custom subclass for `MyView`. You then overwrite it's `layoutSubviews` (this is beeing called everytime the view's frame changes) to reposition and resize your subviews.

```
@interface MyView : UIView
@property (weak, nonatomic) IBOutlet UIImageView *iv1;
@property (weak, nonatomic) IBOutlet UIImageView *iv2;
@property (weak, nonatomic) IBOutlet UILabel *label1;
@property (weak, nonatomic) IBOutlet UILabel *label2;
//...
@end

@implementation MyView

- (void)layoutSubviews
{
    CGRect frame = self.iv1.frame;
    frame.origin.x = someValue * self.bound.size.width;
    frame.origin.y = ...;
    self.iv1.frame = frame;
    ...
} 
```

# java - 使用基本身份验证的 OData4j 查询

> ID：15831789
> 
> 赞同：2
> 
> 时间：2013-04-05T10:39:37.700
> 
> 标签：java, android, odata, odata4j

首先，让我先说我完全没有使用 OData4j。

我正在构建一个需要从 Web 服务消耗一些 OData 的 android 应用程序（使用 Eclipse），我们已经有一个 iPad 应用程序可以正常工作，所以我认为 Web 服务是安全的。

所有 Web 请求都需要基本身份验证才能工作，我可以使用浏览器进行调用，以确认我使用的 URL 和凭据有效。

到目前为止，我有这个代码：

```
ODataConsumer.Builder builder = ODataConsumers.newBuilder(url);
builder.setClientBehaviors(new BasicAuthenticationBehavior(LoginUsername, LoginPassword));      
ODataConsumer c = builder.build();

for(OEntity entity : c.getEntities("entry").execute()){
    System.out.println(entity.getProperty("name").getValue().toString());
} 
```

目前，Eclipse 调试器`for`在线失败，推测可能是在`.execute()`调用期间。调试器对我的帮助为零，在 LogCat 中看起来半相关的唯一行是：

**编辑**：在@JohnSpurlock 的回答之后，我走得更远了。总体上同样的问题，但出现了新的错误消息：

> BadRequestException：请求 URI 无效。由于“文档”段指的是一个集合，因此它必须是请求 URL 中的最后一个序列。所有中间段必须引用单个资源。

还有其他消息，但主要与线程有关 - 值得注意的是，此方法是从[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中调用的，但是当`AsyncTask`.

我的 XML 结果的审查和缩短版本（通过浏览器）如下所示：

```
<feed xml:base="http://a.example.com/OData.svc/" 
    xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" 
    xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" 
    xmlns="http://www.w3.org/2005/Atom">
    <entry>
        <name>one</name>
    </entry>
    <entry>
        <name>two</name>
    </entry>
</feed> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:47:27.543

我已经制定了解决方案。

首先，感谢 John Spurlock 让我朝着正确的方向迈出了一步，我需要首先在清单文件中包含正确的 INTERNET 权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

然后是查询的问题，本质上问题在于我对 OData 的结构和查询方式缺乏了解。当我创建时，`ODataConsumer`我传递了完整的 URL 查询，但是我只需要传递基本`.SVC`路径。

所以而不是这个：

```
ODataConsumer.Builder builder = ODataConsumers.newBuilder("http://a.example.com/OData.svc/Documents"); 
```

我这样做了：

```
ODataConsumer.Builder builder = ODataConsumers.newBuilder("http://a.example.com/OData.svc"); 
```

然后在查询实体时指定`Documents`零件：

```
for(OEntity entity : c.getEntities("Documents").execute().toList()){

} 
```

我原来的 XML 被删减了，实际上包含了一些属性元素。起初我认为`feed`and`entry`元素是它们自己的实体，所以我在尝试查询它们时遇到了问题，但它们实际上是 OData 魔法的一部分，并且似乎是标准定义的元素，所以这些由 OData4j 自动处理。

然后可以像这样查询每个属性：

```
String myProperty = entity.getProperty("MyProperty").getValue().toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:49:03.313

听起来您是 Android 开发的新手。要进行任何网络调用，您需要将互联网权限添加到应用的 Android 清单 xml。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:52:46.077

execute() 中可能存在问题，默认情况下它不返回列表。请使用以下代码并尝试。

```
for(OEntity entity : c.getEntities("entry").execute().**toList()**){
    System.out.println(entity.getProperty("name").getValue().toString());
} 
```

# ios - 如何从 xcdatamodel 生成类图？

> ID：15831792
> 
> 赞同：0
> 
> 时间：2013-04-05T10:39:52.420
> 
> 标签：ios, xcode, class-diagram, xcode4.6, xcdatamodel

是否有任何工具可以从现有的 xcdatamodel 生成类图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:09:37.750

XCode 提供了一些你想要的东西......

这是它的屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/ZXwbV.png)

# linux - Mono/Linux 下基于 ServiceStack 的网站：静态内容的性能

> ID：15831793
> 
> 赞同：2
> 
> 时间：2013-04-05T10:39:52.503
> 
> 标签：linux, nginx, mono, servicestack, fastcgi-mono-server

我计划将 ASP.NET MVC 网站转换为 ServiceStack Razor，目的是将其托管在 Linux 服务器上。

为网站的静态内容提供服务的最佳解决方案是什么？Nginx 后面的自托管守护进程可以吗，还是我应该使用 Nginx 直接提供服务？使用 Mono FastCGI 有什么好处/坏处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:45:10.753

如果您有机会使用 nginx 提供静态文件，那将始终是最有效的选择。

这也是[www.servicestack.net](http://www.servicestack.net/)对他们的许多[Live Demo 所做的](http://www.servicestack.net/#livedemos)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:28:54.017

我同意 myz，并且也这样做，但是您还应该考虑允许缓存这些静态文件以加快客户端的浏览速度并减少服务器上的负载。

在我的 nginx 配置中，我定义了常见的静态类型以直接提供服务（允许浏览器端缓存），然后使用版本查询字符串对这些类型的所有引用进行版本化，以在需要新副本时强制刷新（即 /style.css ?版本=2)

例子：

```
location ~* \.(htm|html|jpg|jpeg|png|ico|txt|css|js|ico|pdf|gif|ttf|woff|svg|pdf)$ {
     #server it directly, but allow caching
     expires 30d;
} 
```

# ruby - 根据您所在的页面禁用图像

> ID：15831794
> 
> 赞同：0
> 
> 时间：2013-04-05T10:39:53.190
> 
> 标签：ruby, ramaze

我有一个奇怪的问题，我想实施。我已经思考了一段时间，但我无法提出解决方案。

因此，假设我访问了 www.rene.com/promotions/hitman。在此页面的 RHS 上，我有一个不好的一面显示其他促销图片。现在我想从侧边栏中隐藏杀手的图像。简而言之，当我在促销页面上时，右侧边栏上与我访问的促销相关的图片不会显示。右侧边栏使用循环并加载所有图像。如何将右侧边栏与我访问的促销活动联系起来？唯一的共同点是促销名称和促销图片的文件夹：

促销链接：www.rene.com/promotions/hitman

侧边栏图片：/img/promotions/hitman/250x90.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:08:46.277

**解决方案 1**

在您当前的环境和您正在迭代的循环中的数据之间查找匹配的数据。您可以在您的`request`. 例如，如果您希望跳过的图像有一个`src`或什至一个`href`，那么您可以将其与您的请求环境 URL（通常是`request.env['PATH_INFO']`）或类似的东西相匹配。

如果`href`您的图像/链接的 与您请求中的路径信息相同，那么您可能应该跳过当前迭代 ( `next`)，因为您将呈现指向您当前所在页面的链接。

**解决方案 2**

与 Ramaze 合作，这就是我解决这个问题的方法。首先，我需要陈述一些假设/主张。

您可能有一个布局模板或一个索引模板来呈现您需要匹配的两个不同模板（您的页面和“右侧边栏”）。如果您的布局或索引模板在您需要匹配的位置呈现部分，则解决方案在于将该匹配作为参数发送到该部分。

您的控制器（由于您的 URL，它可能被称为`promotions.rb`）应该（或可能）持有一个名为`hitman`. 这个方法代表访问页面的动作`promotions/hitman`。在此处声明一个可在整个实例中使用的变量（在此处`instance variable`阅读[更多内容](http://ramaze.net/documentation/file.views.html#Layouts)）。

您现在有了一个`instance variable`可以在布局/索引模板中使用并作为参数发送到部分的。

在部分中，您需要接收它并将其与您当前正在迭代的对象（在您的示例中为图像 URL）匹配 - 如果它们匹配您隐藏该图像（或在循环中使用[next](http://www.tutorialspoint.com/ruby/ruby_loops.htm)跳过迭代）。

# java - DefaultClient 保持活动状态

> ID：15831799
> 
> 赞同：0
> 
> 时间：2013-04-05T10:40:12.780
> 
> 标签：java, apache

问题在哪里？当对 HTTPClient 3.1 使用相同的请求和设置时，会保持持久连接，但不会在`HTTPClient 4.x [DefaultClient]`.

```
javax.net.ssl.SSLContext ctx = javax.net.ssl.SSLContext.getInstance("TLS");
ctx.init(keyfactory.getKeyManagers(), tmfactory.getTrustManagers(), new    SecureRandom());
..
SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(new Scheme("https", 443, new MySSLFactory(ctx))); 
PoolingClientConnectionManager cm = new PoolingClientConnectionManager(schemeRegistry);
cm.setMaxTotal(20);
cm.setDefaultMaxPerRoute(5);
cm.setMaxPerRoute(new HttpRoute(localhost), 5);
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000); // Connection timeout
HttpConnectionParams.setSoTimeout(httpParameters, 0);
HttpClient client = new DefaultHttpClient(cm,httpParameters);           
while (i<200) {
    HttpPost post = new HttpPost(send.getUrl().toString());
    Header[] heads =  post.getAllHeaders();
    System.out.println("Request Headers size:"+heads.length);
    for (int ii=0; ii<heads.length; ii++) {
        Header head = heads[ii];
        System.out.println("Name:"+head.getName()+",  value:"+head.getValue()); 
    }       
    ContentType contentType =     ContentType.create("text/xml","UTF-8");       
    HttpEntity entity = new StringEntity(data,contentType );
    post.setEntity(entity);
    HttpResponse resp = client.execute(post);
...
}
client.getConnectionManager().shutdown(); 
```

这是日志输出：

```
2013/04/05 10:52:12:337 CEST [DEBUG] PoolingClientConnectionManager - Connection request: [route:  {s}->https://smsconnector.cz][total kept alive: 0; route allocated: 0 of 5; total allocated: 0 of 5] 
2013/04/05 10:52:12:400 CEST [DEBUG] PoolingClientConnectionManager - Connection leased: [id: 0][route:  {s}->https://smsconnector.cz][total kept alive: 0; route allocated: 1 of 5; total allocated: 1 of 5] 
2013/04/05 10:52:13:294 CEST [DEBUG] DefaultClientConnectionOperator - Connecting to smsconnector.cz:443 
2013/04/05 10:52:13:382 CEST [DEBUG] RequestAddCookies - CookieSpec selected: best-match 
2013/04/05 10:52:13:404 CEST [DEBUG] RequestAuthCache - Auth cache not set in the context 
2013/04/05 10:52:13:405 CEST [DEBUG] RequestTargetAuthentication - Target auth state: UNCHALLENGED 
2013/04/05 10:52:13:405 CEST [DEBUG] RequestProxyAuthentication - Proxy auth state: UNCHALLENGED 
2013/04/05 10:52:13:405 CEST [DEBUG] DefaultHttpClient - Attempt 1 to execute request 
2013/04/05 10:52:13:405 CEST [DEBUG] DefaultClientConnection - Sending request: POST  /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1 
2013/04/05 10:52:13:406 CEST [DEBUG] wire - >> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1[\r][\n]" 
2013/04/05 10:52:13:407 CEST [DEBUG] wire - >> "Connection: Keep-Alive[\r][\n]" 
2013/04/05 10:52:13:407 CEST [DEBUG] wire - >> "Keep-Alive: timeout=5, max=5[\r][\n]" 
2013/04/05 10:52:13:407 CEST [DEBUG] wire - >> "Content-Length: 222[\r][\n]" 
2013/04/05 10:52:13:407 CEST [DEBUG] wire - >> "Content-Type: text/xml; charset=UTF-8[\r][\n]" 
2013/04/05 10:52:13:408 CEST [DEBUG] wire - >> "Host: smsconnector.cz[\r][\n]" 
2013/04/05 10:52:13:408 CEST [DEBUG] wire - >> "[\r][\n]" 
2013/04/05 10:52:13:408 CEST [DEBUG] headers - >> POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1 
2013/04/05 10:52:13:408 CEST [DEBUG] headers - >> Connection: Keep-Alive 
2013/04/05 10:52:13:408 CEST [DEBUG] headers - >> Keep-Alive: timeout=5, max=5 
2013/04/05 10:52:13:408 CEST [DEBUG] headers - >> Content-Length: 222 
2013/04/05 10:52:13:408 CEST [DEBUG] headers - >> Content-Type: text/xml; charset=UTF-8 
2013/04/05 10:52:13:408 CEST [DEBUG] headers - >> Host: smsconnector.cz 
2013/04/05 10:52:13:408 CEST [DEBUG] wire - >> "<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:b2b="http://b2b.et.cz"><soapenv:Header/><soapenv:Body><b2b:receive><baID>123456</baID></b2b:receive></soapenv:Bod y></soapenv:Envelope>" 
2013/04/05 10:52:43:812 CEST [DEBUG] wire - << "HTTP/1.1 200 OK[\r][\n]" 
2013/04/05 10:52:43:815 CEST [DEBUG] wire - << "Date: Fri, 05 Apr 2013 08:52:13 GMT[\r][\n]" 
2013/04/05 10:52:43:815 CEST [DEBUG] wire - << "Server: Apache/2.2.8 (Unix) mod_ssl/2.2.8 OpenSSL/0.9.8h Resin/3.1.9[\r][\n]" 
2013/04/05 10:52:43:815 CEST [DEBUG] wire - << "Content-Type: text/xml; charset=UTF-8[\r][\n]" 
2013/04/05 10:52:43:815 CEST [DEBUG] wire - << "Vary: Accept-Encoding[\r][\n]" 
2013/04/05 10:52:43:815 CEST [DEBUG] wire - << "Keep-Alive: timeout=60, max=2000[\r][\n]" 
2013/04/05 10:52:43:816 CEST [DEBUG] wire - << "Connection: Keep-Alive[\r][\n]" 
2013/04/05 10:52:43:816 CEST [DEBUG] wire - << "Transfer-Encoding: chunked[\r][\n]" 
2013/04/05 10:52:43:816 CEST [DEBUG] wire - << "[\r][\n]" 
2013/04/05 10:52:43:817 CEST [DEBUG] DefaultClientConnection - Receiving response: HTTP/1.1 200 OK 
2013/04/05 10:52:43:817 CEST [DEBUG] headers - << HTTP/1.1 200 OK 
2013/04/05 10:52:43:817 CEST [DEBUG] headers - << Date: Fri, 05 Apr 2013 08:52:13 GMT  
2013/04/05 10:52:43:818 CEST [DEBUG] headers - << Server: Apache/2.2.8 (Unix) mod_ssl/2.2.8 OpenSSL/0.9.8h Resin/3.1.9 
2013/04/05 10:52:43:818 CEST [DEBUG] headers - << Content-Type: text/xml; charset=UTF-8  
2013/04/05 10:52:43:818 CEST [DEBUG] headers - << Vary: Accept-Encoding  
2013/04/05 10:52:43:818 CEST [DEBUG] headers - << Keep-Alive: timeout=60, max=2000  
2013/04/05 10:52:43:818 CEST [DEBUG] headers - << Connection: Keep-Alive  
2013/04/05 10:52:43:818 CEST [DEBUG] headers - << Transfer-Encoding: chunked  
2013/04/05 10:52:43:822 CEST [DEBUG] DefaultHttpClient - Connection can be kept alive for 60000 MILLISECONDS  
2013/04/05 10:52:43:825 CEST [DEBUG] wire - << "108[\r][\n]"  
2013/04/05 10:52:43:825 CEST [DEBUG] wire - << "<soap:Envelope  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:receiveResponse xmlns:ns2="http://b2b.et.cz"><result xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:nil="true"/></ns2:receiveResponse></soap:Body></soap:Envelope>" 
2013/04/05 10:52:43:825 CEST [DEBUG] wire - << "[\r][\n]"  
2013/04/05 10:52:43:825 CEST [DEBUG] wire - << "0[\r][\n]"  
2013/04/05 10:52:43:825 CEST [DEBUG] wire - << "[\r][\n]"  
2013/04/05 10:52:43:826 CEST [DEBUG] PoolingClientConnectionManager - Connection [id: 0][route:  {s}->https://smsconnector.cz][state: EMAILADDRESS=lab@draft.cz, CN=EndToEnd Test, OU=VAS,  O="EndToEnd Test, ICO: 00000000", L="Jecna 1, Praha 2, 123", ST=., C=CZ] can be kept alive for 60000 MILLISECONDS  
2013/04/05 10:52:43:826 CEST [DEBUG] PoolingClientConnectionManager - Connection released: [id: 0][route:  {s}->https://smsconnector.cz][state: EMAILADDRESS=lab@draft.cz, CN=EndToEnd Test, OU=VAS,  O="EndToEnd Test, ICO: 00000000", L="Jecna 1, Praha 2, 123", ST=., C=CZ][total kept alive: 1; route allocated: 1 of 5;  total allocated: 1 of 5] 
2013/04/05 10:52:43:826 CEST [DEBUG] PoolingClientConnectionManager - Connection request: [route:  {s}->https://smsconnector.cz][total kept alive: 1; route allocated: 1 of 5; total allocated: 1 of 5]  
2013/04/05 10:52:43:826 CEST [DEBUG] PoolingClientConnectionManager - Connection leased: [id: 1][route:  {s}->https://smsconnector.cz][total kept alive: 1; route allocated: 2 of 5; total allocated: 2 of 5] 
```

# 不同的会话 ID

## 默认客户端

```
>  Operation/CN=EndToEnd Test/emailAddress=lab@draft.cz
> C2730AFB1EE8A769F642861F3E167FC961A115E540BF06D2CDB21FC75921758E
> SUCCESS [05/Apr/2013:11:12:29 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> C5520D9FCA38E1A6BEB5994A4EBA7F9EA28165AE51C8A0976F6B137C93A0128D
> SUCCESS [05/Apr/2013:11:12:59 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> 431FD618F6093BD94B0DF845765DC96F45A8B7F499CEC0EA1BD66CE6FE9F12E4
> SUCCESS [05/Apr/2013:11:13:30 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> F6EA63B12ADB023FCD13E88B44CAE86D1A5AD4B28019783B331EDBBF6F8106F8
> SUCCESS [05/Apr/2013:11:14:00 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> CAF1B53A029112EDC0CF7124ACB0D8EE662312A9CB672C96190EBF60F7ADD6FF
> SUCCESS [05/Apr/2013:11:14:30 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> 3E212288D658D95C69EA7001588D0A9DD9113F8CD0CED406BCE5658076628B2F
> SUCCESS 
```

## HTTP客户端 3.1

Session-id 相同 - 持久连接

```
> [05/Apr/2013:11:15:18 +0200] 160.218.43.253 TLSv1 RC4-MD5 "POST
> /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> F46C2DE76C881FD21B7235F4E3BCC778358BAF73687A433A7E4E46A3A9DCF539
> SUCCESS [05/Apr/2013:11:15:49 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> F46C2DE76C881FD21B7235F4E3BCC778358BAF73687A433A7E4E46A3A9DCF539
> SUCCESS [05/Apr/2013:11:16:22 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> F46C2DE76C881FD21B7235F4E3BCC778358BAF73687A433A7E4E46A3A9DCF539
> SUCCESS [05/Apr/2013:11:16:52 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> F46C2DE76C881FD21B7235F4E3BCC778358BAF73687A433A7E4E46A3A9DCF539
> SUCCESS [05/Apr/2013:11:17:41 +0200] 160.218.43.253 TLSv1 RC4-MD5
> "POST /smsconnector/services/PPGwPort?METHOD=POST HTTP/1.1" 264
> /C=CZ/ST=./L=Jecna 1, Praha 2, 123/O=EndToEnd Test, ICO:
> 00000000/OU=VAS/CN=EndToEnd Test/emailAddress=lab@draft.cz
> F46C2DE76C881FD21B7235F4E3BCC778358BAF73687A433A7E4E46A3A9DCF539
> SUCCESS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:42:51.650

我不是 100% 确定，但你能尝试保持本地环境吗？

```
HttpClient client = new DefaultHttpClient(cm,httpParameters);
// Create local context
HttpContext context= new BasicHttpContext();
while (i<200) {
    HttpPost post = new HttpPost(send.getUrl().toString());
    Header[] heads =  post.getAllHeaders();
    System.out.println("Request Headers size:"+heads.length);
    for (int ii=0; ii<heads.length; ii++) {
        Header head = heads[ii];
        System.out.println("Name:"+head.getName()+",  value:"+head.getValue()); 
    }       
    ContentType contentType =     ContentType.create("text/xml","UTF-8");       
    HttpEntity entity = new StringEntity(data,contentType );
    post.setEntity(entity);
    // Pass context for execution
    HttpResponse resp = client.execute(post, context);
...
} 
```

# apache - 使用 Apache2 上传大文件时如何减少内存使用量？

> ID：15831804
> 
> 赞同：0
> 
> 时间：2013-04-05T10:40:25.687
> 
> 标签：apache, upload

我需要上传> 500M的文件。Apache2 会将其全部存储在内存中，然后转储到磁盘。如何让Apache2直接写入磁盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:57:04.943

可能您需要实现的是模块缓冲区，您可以在其中根据 I/O 过滤器堆栈大小调整参数。

详细说明在这里：[http ://httpd.apache.org/docs/2.4/mod/mod_buffer.html](http://httpd.apache.org/docs/2.4/mod/mod_buffer.html)

以及关于过滤器的概述 - [http://httpd.apache.org/docs/2.2/filter.html](http://httpd.apache.org/docs/2.2/filter.html)

对于文件上传应该存在适用于 apache2 的模块 - [https://modules.apache.org/](https://modules.apache.org/)

或者，也许最好分块上传大文件......

# php - 如何在codeigniter的活动记录中获取特定数组

> ID：15831805
> 
> 赞同：0
> 
> 时间：2013-04-05T10:40:25.880
> 
> 标签：php, mysql, codeigniter

例如，如果我有一堆数据存储在像这样的活动记录中

模型

```
 function get_cdj($id){
    return $this->db->select()->from("news_dj")->where("news_id",$id)->get();       
} 
```

控制器

```
 public function news_edit($id)
{
    $data['cdj'] = $this->newscms_model->get_cdj($id);
    $data['id'] = $id;
    $this->load->vars($data);
    $this->load->view('admin/news_edit');
} 
```

我要打印的变量是...

```
$cdj->id 
```

我想在其中获取第三个变量

有没有办法让它看起来像这样 -

```
$data[3] 
```

?

* * *

有没有办法使用codeigniter的活动记录来控制我想打印哪一行？

就像php的原生

```
 <?php echo $data['insert the row number you want to get here']; ?>
 ie: $data[3] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:05:01.070

你可以这样做

**模型**

```
function get_cdj($id)
{
    $this->db->select('*');
    $this->db->where("news_id",$id);
    return $this->db->get("news_dj")->row();
} 
```

**控制器**

```
public function news_edit($id)
{
    $data['cdj'] = $this->newscms_model->get_cdj($id);
    $this->load->view('admin/news_edit',$data);
} 
```

**news_edit (view)** 你可以像这样访问你的内容

```
echo $cdj->dbfieldname; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:52:29.460

这是你需要的吗？

```
function get_cdj($id){
    $return = $this->db->get_where('news_dj',array('news_id' => $id));
    if($return->num_rows())
        return $return->result();
    else return false;
}

$data = $this->newscms_model->get_cdj($id);

var_dump($data[3]); 
```

# java - “干净”的方式来中断可能正在做某事的线程

> ID：15831806
> 
> 赞同：3
> 
> 时间：2013-04-05T10:40:26.377
> 
> 标签：java, multithreading, interrupt

好的，假设我有一个执行 while() 循环的线程。在循环期间，可以做一些事情然后重新进入睡眠状态：

```
public void run() {
    while (some_condition) {
        doSomeLongJob();      // this could be a long job
        try {
            Thread.sleep(a_bit);    // back to sleep
        } catch (InterruptedException ie) {
            handleInterruptionButDoNotExitLoop();
        }
    }
} 
```

一些问题：

1.  **如果在doSomeLongJob**的执行过程中出现一些中断，该方法将继续其自然结束吗？（我想是的，只要没有人检查*Thread.interrupted()*但我想要确认）；
2.  捕获中断后，*interrupted()*状态是否会重置为 false？
3.  总而言之，一个线程只要重置线程状态就可以中断*n次？*有没有办法手动重置线程状态以处理**doSomeLongJob**执行期间的中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:47:27.600

通过调用`Thread.interrupted()`您可以获得标志的状态，然后将其清除。

我的建议是：如果有疑问，请调用此方法以明确（向以后必须维护代码的人）您想要吸收条件并继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:50:46.850

1.  也许，如果`doSomeLongJob`有打开`InterruptibleChannel`的 IO 对象，`ClosedByInterruptException`如果线程中断状态未清除，它们会在您下次尝试访问它们时抛出。

2.  当`InterruptedException`被Java核心类抛出时，未设置线程中断状态

3.  `Thread.interrupted`将清除中断状态。如果您只需要测试中断，`Thread.isInterrupted`将为您提供状态并保留中断状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:53:36.540

要回答您的问题：

1.  当您说中断时，您的意思是 InterruptedException 吗？如果是这样，我认为您应该将**doSomeLongJob**移到try 中以处理可能的异常。

2.  它不会被重置为 false，您必须手动执行。

3.  要重置中断状态，请调用 Thread.interrupted() 。

# zend-framework - 如果在从数据库中删除行之后在 Zend_Db_Table_Row_Abstract 上调用 refresh() 会发生什么？

> ID：15831810
> 
> 赞同：0
> 
> 时间：2013-04-05T10:40:40.567
> 
> 标签：zend-framework, zend-db-table

我正在使用 Zend Framework 1.x 版

`refresh`方法的文档`Zend_Db_Table_Row_Abstract`只说：

```
Refreshes properties from the database. 
```

我的问题是，如果同时从数据库中删除了该行（即通过其他进程），此方法将返回什么？

它是否能够通过返回 null 或抛出异常来处理这种情况？

谢谢，雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:25:54.727

首先`resfresh()`只是调用`_refresh()`，如果`$row === null`返回一个`Exception`.

```
protected function _refresh()
    {
        $where = $this->_getWhereQuery();
        $row = $this->_getTable()->fetchRow($where);

        if (null === $row) {
            require_once 'Zend/Db/Table/Row/Exception.php';
            throw new Zend_Db_Table_Row_Exception('Cannot refresh row as parent is missing');
        }

        $this->_data = $row->toArray();
        $this->_cleanData = $this->_data;
        $this->_modifiedFields = array();
    } 
```

# java - 在休眠hbm中映射枚举？

> ID：15831814
> 
> 赞同：4
> 
> 时间：2013-04-05T10:41:05.347
> 
> 标签：java, hibernate

我有一个枚举如下。

```
public enum ExampleEnum {
    ONE(1), TWO(2);

    private int action;

    private ExampleEnum (int action){
        this.action = action;
    }

    /**
     * @return the action
     */
    public int getAction() {
        return action;
    }

    /**
     * @param action the action to set
     */
    public void setAction(int action) {
        this.action = action;
    }

} 
```

我需要保存整数值而不是一和二。我怎样才能做到这一点？我的 hbm 中有以下配置：

```
<property name="action">
            <column name="ACTION" />
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">com.ExampleEnum</param>
            </type>
        </property> 
```

我需要任何其他配置来保存整数吗？请帮我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:07:21.290

`

```
<class name="package.class" table="database table name">
<id name="get/set parameter....your first attribute" type="int" column="data base columnname">
<generator class="increment"/><!--using auto increment-->
</id>
<property name="get/set parameter your second attribute">
<column name="data base column name"/>
</property>
</class>` 
```

# blogs - 果园 CMS 博客主页

> ID：15831816
> 
> 赞同：1
> 
> 时间：2013-04-05T10:41:15.860
> 
> 标签：blogs, orchardcms

我正在尝试将博客设置为主页，但它不起作用。我有 3 个博客，我尝试设置所有博客，但没有一个有效。所有博客都有一些帖子。我自定义了博客文章，添加了 2 个额外字段（图像和事件日期）

我去管理博客，编辑博客，勾选“设为主页”。现在在卡西尼浏览网站我得到一个文件列表而不是主页。

如果我将主页设置回页面，则一切正常。

我的问题是我不想看到额外的内容：在我的主页中我只想看到一个博客列表。

我正在使用 Orchard 1.6 发布版本。日志中不显示任何内容。Settings_SiteSettingsPartRecord，主页列始终为空（无论我设置为主页的页面，工作或不工作的页面）

可能的解决方法：将帖子显示为小部件并为隐藏内容的主页创建自定义布局。但我想知道为什么我不能将博客设置为主页。会不会和卡西尼有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:28:20.287

我已经缩小了问题的范围：使博客作为主页失败的模块是来自画廊的 Orchard.CulturePicker 模块。

现在我刚刚禁用它。

我在文化选择器项目页面上添加了一个问题：

[https://orchardculturepicker.codeplex.com/workitem/38](https://orchardculturepicker.codeplex.com/workitem/38)

# loading - 中心 hs.loading 而不是相对计算

> ID：15831817
> 
> 赞同：1
> 
> 时间：2013-04-05T10:41:15.877
> 
> 标签：loading, highslide

我喜欢像这样将highslide“加载”居中：

```
.highslide-loading {
  display: block;
  position:fixed;
  top:50%;
  left:50%;
  height:32px;
  width:32px;
  padding: 24px;
  margin:-40px 0 0 -40px;
  text-indent:-9999em;
  background:#FFFFFF url(img/hslide_loader_white.gif) 50% 50% no-repeat;
  -webkit-box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.75);
  box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.75);
  -webkit-border-radius: 3px;
  border-radius: 3px;
} 
```

但是 highslide 脚本提供了这样的内联样式：

```
element.style {
  left: 134px;
  opacity: 0.9;
  position: absolute;
  top: -9999px;
  z-index: 1003;
} 
```

我在旧的支持论坛中找到了这个帖子，它解释了如何访问加载对象：[http ://highslide.com/forum/viewtopic.php?f=1&t=1796&p=7975](http://highslide.com/forum/viewtopic.php?f=1&t=1796&p=7975)

```
hs.Expander.prototype.onShowLoading = function (sender) {
   var width = sender.thumbWidth;
   sender.loading.style.width = width +'px';
}; 
```

这也适用于“位置”，但不适用于“顶部”或“左侧”

因为：

> 顶部和左侧的值是在 onShowLoading 事件之后设置的，因此事件处理程序无法编辑这些值。您可以编辑 highslide.js 文件本身来解决此问题。另一种方法是将 marginLeft 和 marginTop 设置为加载标签，并让 Highslide 做顶部和左侧。

但是 - 我对 highslide 脚本有不同的用法，需要保留 highslide.js 的代码库。边距对我没有帮助。

我确实制作了一个自定义配置脚本 - 但 hs.loading 无法访问。

```
if (typeof(hs) != "undefined") {

  $.extend(true, hs || {}, {

    dimmingOpacity:0.75,
    ...,
    loading: hs.createElement('a', {
            className: 'highslide-loading',
            title: hs.lang.loadingTitle,
            innerHTML: hs.lang.loadingText,
            href: 'javascript:;'
        }, {
            position: 'fixed',
            top: '50%',
            opacity: hs.loadingOpacity,
            zIndex: 1
        }, hs.container
    )

  });

} 
```

同样在 hs.overrides ( [http://highslide.com/ref/hs.overrides](http://highslide.com/ref/hs.overrides) ) 中也无法访问加载程序

有没有办法让加载器在窗口中居中？

如果不是 - 我停止调查 ;-)

# ios6 - 使用 iOS 6+ 处理 iOS 应用处于 FOREGROUND 时收到的多个推送通知

> ID：15831819
> 
> 赞同：5
> 
> 时间：2013-04-05T10:41:21.117
> 
> 标签：ios6, apple-push-notifications

在我的 iOS 应用程序中，服务器发送多种类型的推送通知。现在让我们说我的**应用程序在前台**并且用户正在使用我的应用程序。如果服务器一次向该用户发送多个推送通知，我如何显示和处理这些推送通知？

我想显示推送通知的警报视图，但由于我有多个推送通知，它会连续显示多个警报视图。我还需要区分有效负载，以便我可以向用户加载显示正确的信息。

现在我的问题是

1）处理同时收到的多个推送通知的最佳方法是什么？

2) 我可以实现内置推送通知横幅之类的功能吗？苹果允许吗？如果是，任何参考都会有所帮助。

提前致谢。

# jquery - JQuery EasyUI Treegrid 无法使用格式化程序正确显示 json 对象数据

> ID：15831822
> 
> 赞同：2
> 
> 时间：2013-04-05T10:41:29.273
> 
> 标签：jquery, treegrid, jquery-easyui

我有 jsondata 如下：

```
"rows":[                                                          
        {"code":"001","name":"Name 1","addr":"Address 11","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"002","name":"Name 2","addr":"Address 13","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"003","name":"Name 3","addr":"Address 87","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"004","name":"Name 4","addr":"Address 63","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"005","name":"Name 5","addr":"Address 45","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"006","name":"Name 6","addr":"Address 16","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"007","name":"Name 7","addr":"Address 27","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"008","name":"Name 8","addr":"Address 81","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"009","name":"Name 9","addr":"Address 69","col4":{"data":"col4 data","value":"col4 value"}},
        {"code":"010","name":"Name 10","addr":"Address 78","col4":{"data":"col4 data","value":"col4 value"}}
] 
```

旨在在两个不同的列中显示 col4 的数据和值。因此，在 treegrid 表定义中添加了以下内容。

```
{field:'col4',title:'Col41 data',width:150,rowspan:2,formatter:function (value,row,index){return value["data"];}},
{field:'col4',title:'Col41 value',width:150,rowspan:2,formatter:function (value,row,index){return value["value"];}} 
```

预计它可以工作，但**格式化程序只能看到数据字段。第二个格式化程序永远不会适用于该列。**

有谁知道任何可用的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:50:09.313

您应该更改字段的名称... jesasyui 将字段名称与发送的 json 匹配并添加相应的值..因此，由于您的字段名称对于附加相应对象的两个列都是相同的...

试试这个

```
{field:'col4_data',title:'Col41 data',width:150,rowspan:2,formatter:function (value,row,index){return row.col4["data"];}},
{field:'col4_value',title:'Col41 value',width:150,rowspan:2,formatter:function (value,row,index){return row.col4["value"];}} 
```

# php - PHP对象/ Sql查询中的多数组结果

> ID：15831825
> 
> 赞同：0
> 
> 时间：2013-04-05T10:41:37.320
> 
> 标签：php, mysql, sql

我有一个名为的对象`Index`，它有一个名为的属性`_fletter`（在本例中为私有属性）。

我有一个 sql 查询，它使用以下查询从表中获取所有不同的值：

```
SELECT DISTINCT fletter FROM books ORDER BY fletter ASC 
```

我调用这个查询的方式是通过一个私有函数来处理所有与数据库相关的东西并返回一个变量：

```
function getFirstLetter() {
    // Database stuff omitted
    $stmt->execute();
    $res = $stmt->fetchAll(PDO::FETCH_ASSOC);
    return $res;
} 
```

我将结果赋予`_fletter`属性的方式如下：

```
$this->_fletter = $this->getFirstLetter(); 
```

最终发生的是， 的属性`$this->_fletter`是一个关联数组，当`print_r`它给出：

```
[0] => Array
    (
        [fletter] => A
    )
    // etc. 
```

然后我想使用一个`foreach`语句，它遍历每个`_fletter[x]`x 对应于所讨论字母的位置并运行以下 sql 语句

```
SELECT booktitle, isbn, pages FROM books WHERE booktitle = ':booktitle' 
```

然后我想像前面的例子一样返回结果：

```
$this->_fletter = $this->getBookTitles(); 
```

而且，我的想法是，我希望将新关联数组的结果添加到第`_fletter`一个字母对应于新结果集的数组中，类似于：

```
[0] => Array
    (
        [fletter] => [A]
            (
                [1] => 'A time to kill'
                [2] => 'Almost Famous'
            )
    ) //etc - note I may not have written the syntax correct 
```

因此，新查询必须取 '_fletter' 的值，运行查询并在与第一个字母相同的位置或相同的数组条目下返回结果。所以我希望fletter成为新结果数组的新键或其他东西

如果我只是将新结果添加到`_fletter`数组中，它只会追加到现有数组而不使用的值，`[fletter]`而是会将新条目添加到数组中：

```
[15] => Array
        (
            [fletter] => W
        )

    [A] => Array
        (
            [0] => Array
                (
                    [booktitle] => A Time to kill
                    [isbn] => 1234567890
                ) 
```

有什么想法可以实现吗？我想避免将 php 放在页面的 html 部分，但是，如果没有其他选择，我可能不得不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:52:06.850

你真的很难理解你想要什么。我认为您只需要一个查询和一个 foreach

```
SELECT fletter, booktitle, isbn, pages FROM books

<?php
$fletters = array();
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    $index = $row['fletter'];
    unset($row['fletter']);
    $fletters[$index][] = $row;
} 
```

# php - Symfony 1.4 - 如何在模板中恢复计数请求的结果？

> ID：15831829
> 
> 赞同：0
> 
> 时间：2013-04-05T10:41:40.883
> 
> 标签：php, count, request, symfony-1.4, recover

我有个问题。

**这是我在模型中的要求：**

```
public function nbDomainesParUrl($clientId)
{
    $q = Doctrine_Query::create()
        ->from('domaine d')
        ->select('count(*)')
        ->where('d.client_id = ?', $clientId)
         ->leftJoin('d.Client c')
        ->leftJoin('d.CompteRegistar')
        ->groupBy('d.url')
    ;

    return $q;
}

public function executeGetDomainesParUrl($clientId)
{
    return $this->getDomainesParUrl($clientId)->execute();
} 
```

**我在我的 action.class.php 中执行这个，如下所示：**

```
$this->nb_domaines = Doctrine::getTable('Domaine')->executeGetDomainesParUrl($request->getParameter('id')); 
```

这个请求的结果是这样的：19,1,1

**但我不知道如何在我的模板中恢复这个结果。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:48:34.083

您必须为计数起别名以便轻松检索它。

```
$q = Doctrine_Query::create()
->from('domaine d')
->select('count(*) as nb')
[...] 
```

结果中的其他内容

如果您使用`->getResult()`：

```
$count = $result[0]['nb']; 
```

和`$row = $query->execute()`

```
$count = $row['nb']; 
```

# sql-server - SQL-Server 使用从表中获取的列创建视图

> ID：15831832
> 
> 赞同：0
> 
> 时间：2013-04-05T10:41:48.207
> 
> 标签：sql-server, view

我正在尝试从 MS SQL Server 2005 上的表创建一个视图，使用它的一些数据来填充视图的列......一个简化的例子是一个记录用户解锁阶段的表，一些东西像：

```
UserID | Stage | Date  

1 | 1 | 1-1-2013  
1 | 2 | 2-1-2013  
2 | 1 | 1-1-2013  
1 | 3 | 5-1-2013  
2 | 2 | 3-1-2013  
3 | 1 | 6-1-2013  
3 | 2 | 8-1-2013  
1 | 4 | 10-1-2013  
3 | 3 | 12-1-2013 
```

我正在寻找类似的视图（如果有 4 个可用阶段）：

```
UserID | Stage 1 | Stage 2 | Stage 3 | Stage 4 

 1 | 1-1-2013 | 2-1-2013 | 5-1-2013 | 10-1-2013  
 2 | 1-1-2013 | 3-1-2013 | |  
 3 | 6-1-2013 | 8-1-2013 | 12-1-2013 | 
```

阶段是新视图的列。

我以前在 Access 上做过类似的事情，但不知道在 SQL Server 上是否可行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:04:06.597

有几种方法可以在 SQL Server 中*透视*数据，将数据从行转换为列。

您可以使用`CASE`表达式应用聚合函数：

```
select userid,
  max(case when stage=1 then date end) Stage1,
  max(case when stage=2 then date end) Stage2,
  max(case when stage=3 then date end) Stage3,
  max(case when stage=4 then date end) Stage4
from dbo.yourtable
group by userid; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/cd4b8/4)

或者您可以使用以下`PIVOT`功能：

```
select userid, Stage1, Stage2, Stage3, Stage4
from
(
  select userid, 'Stage'+cast(stage as varchar(10)) Stage, date
  from dbo.yourtable
) d
pivot
(
  max(date)
  for stage in (Stage1, Stage2, Stage3, Stage4)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/cd4b8/5)。两者的结果将是：

```
| USERID |     STAGE1 |     STAGE2 |     STAGE3 |     STAGE4 |
--------------------------------------------------------------
|      1 | 2013-01-01 | 2013-02-01 | 2013-05-01 | 2013-10-01 |
|      2 | 2013-01-01 | 2013-03-01 |     (null) |     (null) |
|      3 | 2013-06-01 | 2013-08-01 | 2013-12-01 |     (null) | 
```

# php - 不重定向来自移动设备的某些 URL

> ID：15831833
> 
> 赞同：2
> 
> 时间：2013-04-05T10:41:48.807
> 
> 标签：php, .htaccess, url, redirect, url-rewriting

我想将来自 MOBILE 并具有以下 url 格式的 url 重定向`www.mywebsite.com` 到`www.mywebsite.mobi.com`，

但是，具有以下格式的 URL `www.mywebsite.com/name/`（例如名称是字符串 [az]+，此地址将允许用户在她的页面中访问）我不想重定向这种类型的 url ( `www.mywebsite.com/name/`)。所以当我在 MOBILE 中写 www.mywebsite.com/name/ 时，我希望我的网络浏览器显示页面的内容`www.mywebsite.com/name/`

此时在我的 (.htacces) 到达时将所有 url 重定向到 www.mywebsite.mobi.com。为此，我使用以下代码

```
RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]
RewriteRule (.*) www.mywebsite.mobi.com [R,L] 
```

如何在我的代码中考虑这两个约束？

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:07:50.370

尝试将另一个添加`RewriteCond`到您的指令中，例如：

```
RewriteCond %{REQUEST_URI} !^/name/?$ 
```

如果您愿意，您甚至可以将`RewriteRule`其中的内容更改为此规则：

```
RewriteRule ^(.*)$ www.mywebsite.mobi.com/$1 [R,L] 
```

现在，如果您希望动态更改文件夹的名称，请检查此条件是否与上述条件不完全相同：

```
RewriteCond %{REQUEST_URI} !^/([a-z0-9-_]+)/?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:19:06.243

您可以使用`PHP`.

只需使用以下代码创建一个`PHP`文件：`Mobile_Detect.php`

```
class Mobile_Detect {

protected $accept;
protected $userAgent;

protected $isMobile     = false;
protected $isAndroid    = null;
protected $isBlackberry = null;
protected $isOpera      = null;
protected $isPalm       = null;
protected $isWindows    = null;
protected $isGeneric    = null;

protected $devices = array(
    "android"       => "android",
    "blackberry"    => "blackberry",
    "iphone"        => "(iphone|ipod)",
    "opera"         => "opera mini",
    "palm"          => "(avantgo|blazer|elaine|hiptop|palm|plucker|xiino)",
    "windows"       => "windows ce; (iemobile|ppc|smartphone)",
    "generic"       => "(kindle|mobile|mmp|midp|o2|pda|pocket|psp|symbian|smartphone|treo|up.browser|up.link|vodafone|wap)"
);

public function __construct() {
    $this->userAgent = $_SERVER['HTTP_USER_AGENT'];
    $this->accept    = $_SERVER['HTTP_ACCEPT'];

    if (isset($_SERVER['HTTP_X_WAP_PROFILE'])|| isset($_SERVER['HTTP_PROFILE'])) {
        $this->isMobile = true;
    } elseif (strpos($this->accept,'text/vnd.wap.wml') > 0 || strpos($this->accept,'application/vnd.wap.xhtml+xml') > 0) {
        $this->isMobile = true;
    } else {
        foreach ($this->devices as $device => $regexp) {
            if ($this->isDevice($device)) {
                $this->isMobile = true;
            }
        }
    }
}

/**
 * Overloads isAndroid() | isBlackberry() | isOpera() | isPalm() | isWindows() | isGeneric() through isDevice()
 *
 * @param string $name
 * @param array $arguments
 * @return bool
 */
public function __call($name, $arguments) {
    $device = substr($name, 2);
    if ($name == "is" . ucfirst($device)) {
        return $this->isDevice($device);
    } else {
        trigger_error("Method $name not defined", E_USER_ERROR);
    }
}

/**
 * Returns true if any type of mobile device detected, including special ones
 * @return bool
 */
public function isMobile() {
    return $this->isMobile;
}

protected function isDevice($device) {
    $var    = "is" . ucfirst($device);
    $return = $this->$var === null ? (bool) preg_match("/" . $this->devices[$device] . "/i", $this->userAgent) : $this->$var;

    if ($device != 'generic' && $return == true) {
        $this->isGeneric = false;
    }

    return $return;
}
} 
```

然后在您包含在每个页面上的文件中写入以下代码行，以从所有页面重定向到移动网站。

```
include('Mobile_Detect.php');
$detect = new Mobile_Detect();
if ($detect->isMobile()) 
{
    // it is mobile platform
    header("Location:http://www.mywebsite.mobi.com");
} 
```

# oop - OO 设计决策：类从数据库构建自身或具有构建器类/工厂

> ID：15831834
> 
> 赞同：0
> 
> 时间：2013-04-05T10:41:49.970
> 
> 标签：oop, design-patterns, database-design, object-oriented-analysis

我正在构建一个新应用程序，但无法决定解决这个问题的方式。

面向数据库数据的类是否应该使用以下方法从数据库构建自己：

```
class Foo 
{
    public buildYourselfFromDatabaseForID(...)
    //and overloading the constructor etc.
    public commitYourselfToTheDatabase();
} 
```

或者我应该构建一个数据库管理类/工厂来处理所有 SQL 并为我构建对象，例如：

```
Foo var = dbManager->createMeAFooFromID(id);
// Make some changes to var

dbManger->commitChangesToFoo(var); 
```

我以前曾参与过两种方式的项目，但无法真正决定在这个新项目中采用哪种方式，并想知道今天的普遍共识是什么？

我的意思是它们是两种方式的优点和缺点，但是在这方面更普遍采用的方法是什么？您可以指出他们的任何既定模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:45:29.733

让一个实体直接联系数据库违反了[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)——这意味着除了它自己的工作之外，该类还在做一些与它无关的数据库工作。

有一个工厂/建造者。

如今，从数据库中隐藏实体的一种常用方法是通过[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping) - 这样的库在数据库和您的对象模型之间进行调解，并代表您处理所有数据库交互。[ORM的](http://en.wikipedia.org/wiki/Category%3a.NET_object-relational_mapping_tools)示例包括[Entity Framework](http://msdn.microsoft.com/en-gb/data/ef.aspx)、[nHibernate](http://nhforge.org/)、[Dapper](https://code.google.com/p/dapper-dot-net/)等。

# java - Struts2 Annotations 使用 RegexFieldValidator 验证字符串

> ID：15831837
> 
> 赞同：2
> 
> 时间：2013-04-05T10:42:03.443
> 
> 标签：java, regex, validation, struts2

我正在尝试使用 Struts2 Annotations 来验证 bean 的某些字段。在这种情况下，我想使用正则表达式验证电话号码字符串。

我找到了**`@RegexFieldValidator`**注释，所以我将其包含在我的课程中并进行了一些测试：

```
 @RequiredStringValidator(message="Phone required.") 
  @RegexFieldValidator( message="Invalid Phone",
    expression="\\([\\d][\\d][\\d]\\) [\\d][\\d][\\d]-[\\d][\\d][\\d][\\d]")
  public void setPhone(String phone) {
    this.phone = phone;
  } 
```

但是，正则表达式不起作用。我什至尝试使用**"\d{9}"**和**"[0-9]{9}"**。即使使用 type=ValidatorType.SIMPLE。

必需的 StringValidator 正常工作......这里发生了什么？是否可以正确使用此验证器？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:27:02.063

尝试

```
@RegexFieldValidator(type=ValidatorType.FIELD, message="Invalid Phone",
    expression="\\([0-9][0-9][0-9]\\)\\s[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T10:43:52.300

Struts 2 团队已经修复了这个错误，现在它在 2.3.14 版本中可以正常工作。

```
<dependency>
  <groupId>org.apache.struts</groupId>
  <artifactId>struts2-core</artifactId>
  <version>2.3.14</version>
</dependency> 
```

我尝试了两种情况：

**1.现场验证：**

AccountAction.java

```
regexFields = {
        @RegexFieldValidator(fieldName="phone2",
                             regexExpression="\\d{3}-\\d{3}-\\d{4}",
                             message="Invalid Phone")} 
```

**2\. 访客字段验证：**

AccountAction.java

`visitorFields = { @VisitorFieldValidator(fieldName="account", message="[Error]", appendPrefix=true) }`

账户.java

`@RequiredStringValidator(message="Phone required.") @RegexFieldValidator(message="Invalid Phone", regexExpression="\d{3}-\d{3}-\d{4}") public void setPhone(String phone) { this.phone = phone; }`

# android - OES_framebuffer_object 扩展在基于 Tegra 的设备上是否损坏？

> ID：15831839
> 
> 赞同：2
> 
> 时间：2013-04-05T10:42:07.580
> 
> 标签：android, opengl-es, android-ndk, tegra

我们将一些使用 FBO 扩展 ( **GL_OES_framebuffer_object** ) 的 OpenGL ES 1.x 代码移植到 Android 上，并遇到了基于**Tegra**的设备 ( **Tegra 2、Tegra 3** ) 的问题。问题是，虽然设备在支持的扩展列表中报告**GL_OES_framebuffer_object**扩展，但功能的一部分似乎被破坏了，特别是`glGetIntegerv()`函数不接受任何与扩展相关的常量（例如`GL_FRAMEBUFFER_BINDING_OES`）报告`GL_INVALID_ENUM`错误。同时，其他与扩展相关的功能都可以正常工作。

*   这是一个已知问题吗？
*   有众所周知的解决方法吗？
*   有人也面临这个问题吗？

我们测试的设备是 Nexus7 和 Acer A500。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T17:04:34.813

看来，在 Tegra 设备上，您需要将位深度设置为 16 才能正常工作。一旦我们在 MonoGame 中这样做，游戏就可以在 Nexus 7 和 Acer500 上正常运行。

D.

# ios - 如何在 viewController 中添加两个 navigationController？

> ID：15831845
> 
> 赞同：-1
> 
> 时间：2013-04-05T10:42:20.637
> 
> 标签：ios, objective-c, ipad

我想在视图控制器中添加 2 个导航控制器。这 2 个 navigationController 是完全独立的，没有链接。我想将这 2 个 navigationViewController 并排显示，例如 splitviewcontroller。

使用 childViewController，我成功地将 2 个 viewController 添加到我想要的位置和大小。但是当我尝试使用 navigationController 时，它们会占据所有屏幕并显示在点 (0,0)。我尝试更改 navigationController 的框架，但没有任何改变。

任何人都可以帮助我吗？

非常感谢。

编辑：这是我用来添加 childVC 的代码：

```
self.meetingsListViewController = [[MeetingsListViewController alloc] initWithNibName:@"MeetingsListViewController" bundle:nil];
self.navCalendar = [[UINavigationController alloc] initWithRootViewController:meetingsListViewController];
[self.navCalendar setNavigationBarHidden:NO];

self.meetingsListViewController.view.frame = CGRectMake(10, 54, self.view.frame.size.width/2-20, self.view.frame.size.height - 64);
self.navCalendar.view.frame = self.meetingsListViewController.view.frame;    
self.navCalendar.view.autoresizesSubviews = NO;

[self addChildViewController:meetingsListViewController];
[self.view addSubview:self.meetingsListViewController.view];
[self.navCalendar didMoveToParentViewController:self];

self.listPlaylistViewController = [[ListPlaylistViewController alloc] initWithNibName:@"ListPlaylistViewController" bundle:nil];
self.navPlaylist = [[UINavigationController alloc] initWithRootViewController:listPlaylistViewController];
[self.navPlaylist setNavigationBarHidden:NO];

self.listPlaylistViewController.view.frame = CGRectMake(self.view.frame.size.width/2+10, 54, self.view.frame.size.width/2-20, self.view.frame.size.height - 64);
self.navPlaylist.view.frame = self.listPlaylistViewController.view.frame;
self.navPlaylist.view.autoresizesSubviews = NO;

[self addChildViewController:listPlaylistViewController];
[self.view addSubview:self.listPlaylistViewController.view];
[self.navPlaylist didMoveToParentViewController:self]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T14:33:39.160

简单的方法是将两个容器视图添加到情节提要中的控制器视图中，这将为您提供两个嵌入式控制器。我认为您应该能够选择这些嵌入式控制器并使用菜单将它们嵌入导航控制器中。如果这不起作用，只需删除那些嵌入式控制器，拖出导航控制器，从容器视图添加控件拖动以嵌入它们。

**编辑后：**

如果您想在代码中执行此操作，那么您发布的内容有几处错误。addChildViewController、addSubview 和 didMoveToParentViewController 调用都应该针对导航控制器，而不是内容控制器。也不需要设置内容控制器的框架，直接设置导航控制器的框架：

```
self.meetingsListViewController = [[UIViewController alloc] initWithNibName:@"MeetingsListViewController" bundle:nil];
    self.navCalendar = [[UINavigationController alloc] initWithRootViewController:self.meetingsListViewController];

    self.navCalendar.view.frame = CGRectMake(10, 54, self.view.frame.size.width/2-20, self.view.frame.size.height - 64);

    [self addChildViewController:self.navCalendar];
    [self.view addSubview:self.navCalendar.view];
    [self.navCalendar didMoveToParentViewController:self];

    self.listPlaylistViewController = [[UIViewController alloc] initWithNibName:@"ListPlaylistViewController" bundle:nil];
    self.navPlaylist = [[UINavigationController alloc] initWithRootViewController:self.listPlaylistViewController];

    self.navPlaylist.view.frame = CGRectMake(self.view.frame.size.width/2+10, 54, self.view.frame.size.width/2-20, self.view.frame.size.height - 64);

    [self addChildViewController:self.navPlaylist];
    [self.view addSubview:self.navPlaylist.view];
    [self.navPlaylist didMoveToParentViewController:self]; 
```

# sql - 两个 COUNT 到一个 SELECT

> ID：15831847
> 
> 赞同：0
> 
> 时间：2013-04-05T10:42:28.237
> 
> 标签：sql, count

您能告诉我如何将这两个 COUNT 合并为一个选项吗？

```
/*Pocet treninku ucast*/
SELECT Jmeno, COUNT(Ucast)
FROM Hraci 
INNER JOIN Ucast_trenink2 ON Ucast_trenink2.ID_hrace_ucast=Hraci.IDHrace 
INNER JOIN Seznam_treninku ON Seznam_treninku.ID_treninku=Ucast_trenink2.ID_treninku_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Seznam_treninku.Kategorie 
WHERE (Ucast='TRUE')AND(Kategorie.IDkategorie = 1) AND Datum >= '1/1/2013' AND Datum < '9/1/2014'
GROUP BY Jmeno;
/*Pocet treninku neucast*/
SELECT Jmeno, COUNT(Ucast)
FROM Hraci 
INNER JOIN Ucast_trenink2 ON Ucast_trenink2.ID_hrace_ucast=Hraci.IDHrace 
INNER JOIN Seznam_treninku ON Seznam_treninku.ID_treninku=Ucast_trenink2.ID_treninku_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Seznam_treninku.Kategorie 
WHERE (Ucast='FALSE')AND(Kategorie.IDkategorie = 1) AND Datum >= '1/1/2013' AND Datum < '9/1/2014'
GROUP BY Jmeno; 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:47:10.780

你可以使用这样的东西：

```
SELECT
    Jmeno,
    SUM(CASE WHEN Ucast = 'False' then 1 end) as count_false,
    SUM(CASE WHEN Ucast = 'True' then 1 end) as count_true
FROM ...
WHERE (Kategorie.IDkategorie = 1) AND Datum >= '1/1/2013' AND Datum < '9/1/2014'
GROUP BY Jmeno; 
```

# android - 如何使用 aSmack 获取 MultiUserChat 房间的 DiscussionHistory？

> ID：15831855
> 
> 赞同：5
> 
> 时间：2013-04-05T10:42:44.180
> 
> 标签：android, xmpp, smack, asmack

如何从中获取*MUC 房间*的DiscussionHistory `MultiUserChat`？我可以使用 aSmack 库创建 MultiUserChat 实例和房间，现在我想显示房间中发生的所有先前对话。

任何有相同经验的人请帮助我。我在谷歌上搜索了很多关于此的内容，但我仍然没有得到任何适当的文档/解释。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T16:53:12.040

```
DiscussionHistory history = new DiscussionHistory();
history.setSince(date);

muc.join(nickname, null, history, SmackConfiguration.getReplyTimeout());

// Get historical message;
Message oldMsg = muc.nextMessage(timeout); 
```

你也可以使用

```
history.setMaxChars()
history.setMaxStanzas()
history.setSeconds() 
```

一些示例在测试代码中。检查测试*testDiscussionHistory*。

[http://fisheye.igniterealtime.org/browse/smack/trunk/test/org/jivesoftware/smackx/muc/MultiUserChatTest.java?hb=true](http://fisheye.igniterealtime.org/browse/smack/trunk/test/org/jivesoftware/smackx/muc/MultiUserChatTest.java?hb=true)

# mongodb - 如何定义返回具有相同字段的所有文档的查询

> ID：15831857
> 
> 赞同：1
> 
> 时间：2013-04-05T10:42:48.987
> 
> 标签：mongodb

我想创建一个查询来检查我的数据库中的哪些文档具有相同的字段值。

例如，我存储了 100 个文档，其中 2 个看起来像这样：

**文件 1：**

```
{
    "_id":32143242,
    "specialField":12
} 
```

**文件 2：**

```
{
    "_id":787878,
    "specialField":12
} 
```

那么，如果我不知道 id 或 specialField-Value，如何获取这两个文档呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:00:56.620

这是可以使用[MongoDB 聚合框架](http://docs.mongodb.org/manual/reference/aggregation/group/#stage._S_group)执行的分组操作。

样本数据

```
> db.foo.find().pretty();
{ "_id" : ObjectId("515ead9c7bb40c6a51b16a68"), "Value" : 12 }
{ "_id" : ObjectId("515ead9d7bb40c6a51b16a69"), "Value" : 12 }
{ "_id" : ObjectId("515ead9f7bb40c6a51b16a6a"), "Value" : 14 }
{ "_id" : ObjectId("515eada07bb40c6a51b16a6b"), "Value" : 8 } 
```

样本分组操作

```
> db.foo.aggregate({$group : 
    { _id: "$Value", 
      count : {$sum : 1}, 
      ids: { $addToSet : "$_id" } } }); 
```

这将返回相等的组`Value`以及它们的计数和各自的 id：

```
{
        "result" : [
                {
                        "_id" : 8,
                        "count" : 1,
                        "ids" : [
                                ObjectId("515eada07bb40c6a51b16a6b")
                        ]
                },
                {
                        "_id" : 14,
                        "count" : 1,
                        "ids" : [
                                ObjectId("515ead9f7bb40c6a51b16a6a")
                        ]
                },
                {
                        "_id" : 12,
                        "count" : 2,
                        "ids" : [
                                ObjectId("515ead9d7bb40c6a51b16a69"),
                                ObjectId("515ead9c7bb40c6a51b16a68")
                        ]
                }
        ],
        "ok" : 1
} 
```

您应该阅读聚合框架的文档并了解其局限性。

# python - 谁能向我解释这段代码如何让星星移动？

> ID：15831858
> 
> 赞同：1
> 
> 时间：2013-04-05T10:42:58.160
> 
> 标签：python, python-2.7

试图理解这段代码是如何工作的，谁能解释一下。

```
def draw_star(star): # drawing a star
    # you only need to change a pixel, so use set_at, not draw.line
    screen.set_at((star[0], star[1]), (255, 255, 255))
    star[0] -= 1
    if star[0] < 0:
        star[0] = screen.get_width()
        star[1] = random.randint(0, screen.get_height())

stars = []
for i in range(1200):
    x = random.randint(0, screen.get_width())
    y = random.randint(0, screen.get_height())
    stars.append([x,y])

for star in stars:
    draw_star(star) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:12:33.660

首先，代码生成 1200`[x, y]`个坐标，所以每个坐标都是一个 Python `list`：

```
stars = []
for i in range(1200):
    x = random.randint(0, screen.get_width())
    y = random.randint(0, screen.get_height())
    stars.append([x,y]) 
```

每个坐标由屏幕约束内的随机值组成`x`。`y`

接下来，绘制这些坐标中的每一个：

```
for star in stars:
    draw_star(star) 
```

这会将`[x, y]`坐标列表传递给函数`draw_star`

```
def draw_star(star): # drawing a star 
```

这会在给定坐标处设置一个白色像素（`star[0]`是`x`，`star[1]`是`y`坐标）：

```
 # you only need to change a pixel, so use set_at, not draw.line
    screen.set_at((star[0], star[1]), (255, 255, 255)) 
```

然后代码从 x 坐标中减去 1（左一步）。这会更改*原始*列表，因为使用了可变列表：

```
 star[0] -= 1 
```

如果这改变了屏幕边缘之外的坐标，则星坐标将*替换*为屏幕右侧的新坐标，位于随机高度：

```
 if star[0] < 0:
        star[0] = screen.get_width()
        star[1] = random.randint(0, screen.get_height()) 
```

如果您现在要在中间有屏幕空白的情况下重复*循环*`for star in stars: draw_star(star)`，您将*动画*星星从右向左移动，随着星星从左侧掉落，新星星以随机高度出现在右侧屏幕。

这里的核心思想是该`draw_star()`函数处理可变列表并更改其中包含的值，从而有效地更改`stars`下一个动画循环的全局列表的内容。

# jquery - 使用委托交换类

> ID：15831866
> 
> 赞同：0
> 
> 时间：2013-04-05T10:43:17.640
> 
> 标签：jquery, css, razor, delegates

我正在使用 jquery 委托函数来切换类但没有成功，我想要的是切换类

```
<li class="unselected-values"> 
```

至

```
<li class="<li class="unselected-values"> 
```

当客户点击标签时，任何我弄错的想法、任何建议或帮助都将不胜感激。谢谢

```
 <ul class="option-list swatch pockets">
                            @foreach (var pvaValue in attribute.Values)
                            {                                    
                                <li class="unselected-values">
                                    <input id="@(controlId)_@(pvaValue.Id)" type="checkbox" value="@pvaValue.Id" checked="@pvaValue.IsPreSelected" />
                                    <label for="@(controlId)_@(pvaValue.Id)" style="background-image:url(@(pvaValue.MenuIcon))">@pvaValue.Name</label>
                                </li>
                            }
                        </ul>

<script type="text/javascript">
                      $(document).ready(function() {
                          $('.option-list swatch pockets').delegate('label', 'click', function(event) {
                              $(this).parent().toggleClass('selected-value');
                              console.log($(this).parent);
                              alert($(this).parent);
                              return false;

                          });

                      });
                                </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:46:20.637

尝试这个：

```
$('.option-list.swatch.pockets').delegate('label', 'click', function (event) {
    $(this).parent().toggleClass('unselected-values selected-value');
    console.log($(this).parent);
    alert($(this).parent);
    return false;
}); 
```

您的选择器`$('.option-list swatch pockets')`不正确。您需要这样做`$('.option-list.swatch.pockets')`才能正确获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:47:30.710

你的选择器`$('.option-list swatch pockets')`是错误的，这意味着一个元素`pockets`在一个`swatch`元素内，而这个元素在一个带有 class 的元素内`option-list`。

尝试

```
$('.option-list.swatch.pockets') 
```

这意味着具有类的元素`option-list`，`swatch`和`pockets`。

此外，为了在两个类之间切换，您需要将两个类都传递给[toggleClass](http://api.jquery.com/toggleClass/)方法。

```
$(document).ready(function() {
    $('.option-list.swatch.pockets').delegate('label', 'click', function(event) {
        $(this).parent().toggleClass('unselected-values selected-value');
        return false;
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rE7g2/)

# scrollbar - 如何在 IE10 中获得圆边滚动条？

> ID：15831867
> 
> 赞同：1
> 
> 时间：2013-04-05T10:43:18.493
> 
> 标签：scrollbar, internet-explorer-10

我正在使用以下 css 更改滚动条颜色

```
<style>

body
{
  scrollbar-face-color: #EEEEEE;
  scrollbar-highlight-color: #FFFFFF;
  scrollbar-3dlight-color: #CCCCCC;
  scrollbar-darkshadow-color: #FFFFFF;
  scrollbar-shadow-color: #AAAAAA;
  scrollbar-arrow-color: #000000;
  scrollbar-track-color: #EEEEEE;
}
</style> 
```

颜色变了。但是在IE10中获得圆边滚动条的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:22:35.173

除了颜色之外，没有办法在 IE 中设置滚动条的样式。[您可以在http://msdn.microsoft.com/en-us/library/windows/apps/hh466154.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh466154.aspx)查看用于样式滚动条的 CSS 属性的完整列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T14:11:50.113

如果您准备使用 javascript，可以在 IE 中设置滚动条样式。您只能使用 CSS 更改颜色。通过使用 javascript，您可以创建一个可使用 css 设置样式的滚动条，并替换浏览器的原生滚动条。有几个这样的例子，例如[这个](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/scrollbar_themes_demo.html)使用 jQuery 的例子。

# facebook - sharethis 在 facebook 的共享链接上无法正常工作

> ID：15831868
> 
> 赞同：0
> 
> 时间：2013-04-05T10:43:21.517
> 
> 标签：facebook, facebook-opengraph, sharethis

我使用 sharthis 插件为我的网站分享新闻链接。facebook 的分享链接有问题，就像它现在显示新闻的图像、标题、描述一样。我已经用谷歌搜索了这个并添加了开放图形标签（`og:url, og:title, og:description, og:image`）和定义的命名空间，但现在仍然有效。我已经测试了 facebook 调试器工具（`https://developers.facebook.com/tools/debug`），我没有收到任何错误消息，但它仍然不能正确共享。我的网站内容有什么问题吗，因为我的新闻是 unicode 格式的，而且我的 url 中也使用了 unicode slug。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-10T15:48:15.920

我想这现在还不是问题，但是[Facebook Open Graph 对象调试器](https://developers.facebook.com/tools/debug/og/object/)在遇到 Open Graph 元数据问题时会非常有用。

# asp.net-mvc - ASP.NET MVC 4 覆盖控制器名称

> ID：15831869
> 
> 赞同：1
> 
> 时间：2013-04-05T10:43:22.667
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing

是否可以覆盖 ASP.NET MVC 4 中的控制器名称？路由需要它。

有一个`[ActionName("some-action-name")]`属性可以覆盖动作名称。

是否可以对控制器类名做同样的事情？

需要在路由中创建一个控制器名称以具有破折号，例如“some-controller-name”而不是“SomeControllerName”

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-08T14:33:54.330

用路线解决。这是唯一的方法。

感谢您的评论。

# asp.net - 菜单中按钮的css位置

> ID：15831870
> 
> 赞同：1
> 
> 时间：2013-04-05T10:43:23.490
> 
> 标签：asp.net, css

我有一个菜单，它看起来像这样：

```
<div class="menuContainer">
<div id="titlebarDiv" style="float: left;">
<a>Item 1</a>
<div id="container">
     <input type="button" value="0" class="masterPageNotifier" style="height: 30px;"onclick="NotifierButtonClicked()" />
     <input type="hidden" value="" class="mehidden" />
    <ul class="selectBox" />
    </div>
<a>Item 2</a>
<a>Item 3</a>
<a>Item 4</a>
<a>Item 5</a>
<div>
<div> 
```

正如你所看到的，我有一个`div`里面有一个按钮，点击按钮，ul with`class="selectbox"`将向下滑动并显示项目。这里的问题是我可以让菜单自行工作，但是一旦我在两者之间添加按钮，按钮就会将所有内容向下移动 1 行，并且当我单击按钮时`.menuContainers`背景会被拉伸。当单击通知按钮时，我想使它像 facebook。我尝试在容器 div 上使用绝对位置，但没有运气。

**CSS**：

```
 input[type="submit"],
    input[type="button"],
    button {
        background:#5CCD00;
    background:-moz-linear-gradient(top,#5CCD00 0%,#4AA400 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#5CCD00),color-stop(100%,#4AA400));
    background:-webkit-linear-gradient(top,#5CCD00 0%,#4AA400 100%);
    background:-o-linear-gradient(top,#5CCD00 0%,#4AA400 100%);
    background:-ms-linear-gradient(top,#5CCD00 0%,#4AA400 100%);
    background:linear-gradient(top,#5CCD00 0%,#4AA400 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#5CCD00',endColorstr='#4AA400',GradientType=0);
    padding:10px 15px;
    color:#fff;
    font-family:'Helvetica Neue',sans-serif;
    font-size:13px;
    border-radius:5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border:1px solid #459A00;
    }

.menuContainer
{
width: 1000px; 
margin-left: auto; 
margin-right: auto; 
overflow: hidden; 
background-color: purple;
}

function NotifierButtonClicked() {
    if (checked == false) {
        checked = true;

        GetNotificationsForUser();

        $('.selectBox').slideToggle(200).css('borderTop', 'none');
        $('.selectBox li').click(function () {
            $('.selectBox').slideUp(200);
        });

        //$('.masterPageNotifier').val("0");
    }
    else if (checked == true) {
        checked = false;
        $('.selectBox').slideUp(200);
    }

} 
```

这就是它的外观：![在此处输入图像描述](https://i.stack.imgur.com/VOBuM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:13:00.750

您可以通过添加以下内容使“容器”`<div>`与您的`<a>`元素保持在同一行：

```
#container {  display:inline-block; width:50px; } 
```

我在 Chrome 中进行了测试。当然，我无法判断您的 JavaScript 在此更改后是否仍在工作，因为您发布的内容不完整（未定义“已检查”）。

# opengl - 在复杂场景中渲染半透明对象

> ID：15831877
> 
> 赞同：1
> 
> 时间：2013-04-05T10:43:38.680
> 
> 标签：opengl, rendering, translucency, scenegraph

所以我遇到了关于场景图和半透明对象的以下问题......我的问题是我想在一个场景中渲染多个半透明对象。我知道我必须先渲染不透明的物体，然后从后到前渲染半透明的物体。这运作良好......或多或少......

但真正的问题是，例如，我有一个半透明的立方体，白色（或任何其他颜色），alpha 值例如为 0.5。立方体的内部结构在波前 obj 文件中给出，因此给出了立方体单平面的顺序。我不订购对象的单个平面，因为在具有 >1000 个对象和每个对象的 >1000 个顶点的场景中这将太多，所以我只订购整个对象。如果我渲染对象的单个平面并四处移动，就会有这样一个时刻，一个比另一个更近的平面在另一个平面之前被渲染。然后第二个没有被渲染，因为深度缓冲区不允许这样做，这是渲染中的错误。

关闭深度缓冲区不是解决方案：我需要它，因为可能存在半透明和不透明的复杂对象。

任何提示我如何才能实现对象，即使它们很复杂并且既不透明又半透明，以正确的方式呈现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:09:24.050

基本上你必须做到以下几点：

*   将所有东西分成不透明和半透明（如果一个对象由两者组成，则必须将其撕开）

*   清除深度缓冲区

*   启用深度测试并绘制不透明的所有内容。

*   使深度缓冲区只读：**glDepthMask(GL_FALSE)**

*   把所有半透明的东西都画到前面。

这应该够了吧。

# php - 表字段中的 MySQL 确切单词是否存在检查

> ID：15831879
> 
> 赞同：3
> 
> 时间：2013-04-05T10:43:53.767
> 
> 标签：php, mysql, where-clause, sql-like

我有一个查询。是否有任何与 MySQL 相关的内置函数或任何其他方法，它将返回在数据库表字段中包含 EXACT 单词的行？我知道使用 MySQL LIKE 运算符，您可以在将字符串值与包含通配符的模式字符串匹配的列中搜索指定的模式。但是使用 MySQL LIKE 子句，它也会返回子字符串条目。

例如。

假设 3 列值如下所示：

```
1\. "Take another shot of courage"

2\. "The End of This age is Not Yet"

3\. "Employers can obtain this wage rate by submitting a request" 
```

我想检索列值包含确切单词“年龄”的所有行

如果我们准备这样的查询

```
SELECT * FROM sometable WHERE somefield LIKE '%age%' 
```

它将返回所有三行。但我的意图只是获得第二排。我们如何实现这一目标？提前致谢。

干杯，
**简森。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:46:58.393

使用此查询

```
SELECT * FROM sometable WHERE somefield LIKE '% age %' 
OR somefield LIKE 'age %' OR somefield LIKE '% age' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T11:01:10.113

您可以使用 MySQL 的正则表达式引擎并匹配单词边界字符`[[:<:]]`和`[[:>:]]`

这将匹配`age`但不匹配`courage`or `wage`or `aged`。它还将匹配文本被**非单词**字符包围的`-age-`任何其他行中的年龄。这意味着它将在字符串的开头和结尾匹配。`age`**`age`**

 **在我看来，这比具有三个条件要简单一些。如果返回匹配项`-age-`是可以接受的，那么您可以考虑这一点。

我也没有测试过这个查询的性能或可移植性，所以你可能也想考虑一下。

```
SELECT * FROM sometable WHERE somefield RLIKE '[[:<:]]age[[:>:]]'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T10:55:25.457

试试这个

```
 1 SELECT * FROM sometable WHERE somefield LIKE '% age %' to search in middle of string

2 SELECT * FROM sometable WHERE somefield LIKE '% age' if word is at end of string

3 SELECT * FROM sometable WHERE somefield LIKE 'age %' if your word is at starting of the string 
```**

# javascript - 为什么这在 iPad 上不起作用？

> ID：15831882
> 
> 赞同：1
> 
> 时间：2013-04-05T10:44:07.380
> 
> 标签：javascript, html, mobile-safari

它适用于所有浏览器，仅适用于 iPad Safari。如果我在浏览器上模拟 iPad 用户代理，它就可以正常工作。

[http://jsfiddle.net/NMcuy/38/embedded/result/](http://jsfiddle.net/NMcuy/38/embedded/result/)

问题是如果我输入文本（添加文本），iPad 中的键盘显示，我可以按键，但它不会显示在可拖动的 div 中。即使是默认文本也保持不变。

我不知道问题是:(

```
function newText()
{
var note = new Note();
note.id = ++highestId;

var text = document.createElement('textarea');
text.name = "text";
text.setAttribute("onkeyup", "textAreaAdjust(this)");
text.setAttribute("class", "text");
//text.innerHTML = initialText;
note.contentField.appendChild(text);

note.name = note.id + "_text";
note.left = Math.round(Math.random() * 400) + 'px';
note.top = Math.round(Math.random() * 500) + 'px';
note.zIndex = ++highestZ;
note.saveAsNew();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T07:57:21.543

根据我的研究，这是 iOS 中关于焦点（或延迟焦点）事件的错误/（特定功能）。这是后来被放弃的。

[移动 Safari 自动对焦文本字段](https://stackoverflow.com/questions/6287478/mobile-safari-autofocus-text-field)

# javascript - 二项式子数组

> ID：15831883
> 
> 赞同：4
> 
> 时间：2013-04-05T10:44:11.477
> 
> 标签：javascript, arrays, math

我有一个长度为 n 的 A 数组。我想取所有可能的 k (0

例如，如果我有 A 的长度是五：

```
[1,2,3,4,5] 
```

如果 k = 3，算法必须给我 B 数组。

```
[1,2,3    ]
[1,2,  4  ]
[1,2,    5]
[1,  3,4  ]
[1,  3,  5]
[1,    4,5]
[  2,3,4  ]
[  2,3,  5]
[  2,  4,5]
[    3,4,5] 
```

B 的长度将等于**`n!/k!(n-k)!`**（“！”表示阶乘，牛顿法）

我正在使用 javascript，所以在我的标签中包含了它，但它只是算法，不需要用 javascript 编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:58:48.097

您可以通过过滤器方法来做到这一点。

在您的示例中，您希望接收数组的所有排列，并获取该数组的特定数量的元素。

您可以轻松地以迭代方式做到这一点。`n - 1`从获取数组元素的所有排列开始：

```
// return all (n - 1) element permutations of an array
var permutations = function(arr) {
  return arr.reduce(function(re, value, i) {
    // add an array for each element in the original array
    return re.concat([arr.filter(function(v, index) {
      // drop each element with the same index
      return index !== i 
    })])
  }, [])
} 
```

现在`permutations([1,2,3])`将返回`[[1,2], [1,3], [2,3]]` 假设您在源数组中只有唯一值，那总是一个不相交的集合。

要接收 5 元素数组的所有 3 元素数组，您将首先计算 4 元素数组的列表并将它们中的每一个转换为 3 元素数组。

```
permutations([1,2,3,4]).map(permutations)
=> [[1,2,3] => [[[1,2], [1,3], [2,3]]
   ,[1,2,4]    ,[[1,2], [1,4], [2,4]]
   ,[1,3,4]    ,[[1,3], [1,4], [3,4]]
   ,[2,3,4]    ,[[2,3], [2,4], [3,4]]
   ]           ] 
```

显然这里的问题是有双打。这可以通过删除所有非唯一值来解决。

```
var unique = function(arr) {
  var s = arr.map(function(v) { return "" + v })
  return arr.filter(function(v, i) { return s.indexOf("" + v) == i })
} 
```

将它们全部打包到一个函数中可以这样完成：

```
var permutationsWithLength = function(arr, length) {
  var re = [arr]
  for (var i = arr.length; i >= length; i--) {
    re = re.reduce(function(tmp, perms) {
      return unique(temp.concat(permutations(perms)))
    }, [])
  }
  return re
} 
```

我承认这可能不是最快的方法，尤其是在`unique`函数方面，但它是一种非常通用的方法，即使使用更大的数组也可以解决您描述的问题。

希望能帮助到你 ;）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T11:33:23.557

下面是我的一个项目的复制粘贴。不知道它是否仍然有效；）

```
var choose = function choose_func(elems, len) {
  var result = [];
  for (var i=0; i<elems.length; i++) {
    if (len == 1) {
      result.push([elems[i]]);
    } else {
      var remainingItems = choose_func(elems.slice(i+1, elems.length), len - 1);
      for (var j=0; j<remainingItems.length; j++) 
        result.push([elems[i]].concat(remainingItems[j])); 
    }
  }
  return result;
};

var result = choose([1,2,3,4,5], 3)

/*result  = [[1,2,3],[1,2,4],[1,2,5],[1,3,4],[1,3,5],
             [1,4,5],[2,3,4],[2,3,5],[2,4,5],[3,4,5]] */ 
```

# c# - 加入 2 个查询的结果（使其在 1 个查询中更可取）

> ID：15831889
> 
> 赞同：-5
> 
> 时间：2013-04-05T10:44:22.090
> 
> 标签：c#, mysql

所以我有 2 个查询从 1 个表中获得足球队的分数

查询 1

```
SELECT SUM(Score_Thuis) FROM `wedstrijden` WHERE `Gespeeld` = 1 AND Thuis_team = 'Team 14' 
```

查询 2

```
SELECT SUM(Score_Uit) FROM `wedstrijden` WHERE `Gespeeld` = 1 AND Uit_team = 'Team 14' 
```

有没有办法我可以获得 1 个查询并获得上述 2 个查询的结果。我在 SUM 命令方面经历了很多，但它所做的只是结合对手球队的得分或在 2 行中给出结果：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:59:27.597

```
SELECT SUM(Score_Thuis), SUM(Score_Uit)
FROM wedstrijden
WHERE `Gespeeld` = 1 AND (Thuis_team = 'Team 14' OR Uit_team = 'Team 14') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:56:29.753

try this

```
 SELECT SUM(Score_Thuis) 
   FROM `wedstrijden` 
   WHERE `Gespeeld` = 1 AND Thuis_team = 'Team 14' AND Uit_team = 'Team 14' 
```

# android - IBM Worklight：推送通知和徽章

> ID：15831893
> 
> 赞同：0
> 
> 时间：2013-04-05T10:44:27.770
> 
> 标签：android, ios, push-notification, ibm-mobilefirst, badge

1.  在测试 Android 版 Worklight 推送通知时，如果警报（通知消息）为空，则通知栏中将显示带有应用名称的应用图标，而没有任何通知消息。

    如果 iOS 中的警报为空，我可以知道 Worklight 将如何处理这种情况吗？会提示通知提醒吗？这么问的原因是，即使应用程序关闭，如果服务器有更新，我只想更新徽章编号而不启动警报框。

2.  我可以知道推送通知中的徽章是否仅适用于 iOS 而不适用于 Android？正如[这里](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fapiref%2Fr_method_wl_server_notifyalldevi.html)的文档所说：
    “GCM alert Optional。要在警报中显示的字符串 **。badge Mandatory。要在应用程序图标上的徽章中显示的整数值。** ”但是在我的测试中，没有出现任何徽章安卓应用。

3.  请注意，有一个 API 可以设置徽章的数量（WL.Badge.setNumber），或者我可以在推送通知 API 中设置它（WL.Server.Notifyxxx - notificationOptions）。
    我可以获取当前要增加的徽章数量，而不仅仅是为其设置一个数字吗？

环境：Worklight 5.0.6，三星 Galaxy S3 Android 4.1.1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:46:00.047

1.  如果不随通知发送文本，iOS 将不会显示警报（横幅或模式对话框，具体取决于用户在 Settings.app 的 Notifications 部分中为应用程序选择的内容）。如果您选择，它只会发出声音。
2.  徽章支持仅适用于 iOS。我将从该信息中心文章中删除“徽章”提及。谢谢。
3.  目前没有获取当前徽章数量的 API。同时，也许您可[​​以使用 Cordova 插件](https://github.com/mgcrea/cordova-push-notification/pull/2)来获取应用程序图标徽章的当前值。

# python - 从数组中的每个单独元素中删除一些东西

> ID：15831895
> 
> 赞同：1
> 
> 时间：2013-04-05T10:44:34.693
> 
> 标签：python, list

`'145,153,8,1.35659494835128,155,C,H,H,H,H,H,H,H,H,H,H,H,H,H,C,X,X,X,1.000,0.000,0.000,0.286,0.429,0.000,0.286,0.000,0.286,0.571,0.000,0.143,0.000,0.143,0.000,0.143,0.429,0.286,0,2,0,0,3,1,0,1,3,3,1,0,1,1,0,X,X,X,1,3,0,0,3,1,0,1,3,3,1,0,3,3,0,X,X,X,3,1,3,3,0,3,4,3,0,0,3,4,2,1,4,X,X,X,0.265,0.213,0.523,0.155,0.265,0.052,0.374,0.155,0.290,0.232,0.097,0.381,0.000,0.187,0.174,0.077,0.348,0.213,0.143,0.143,0.000,0.000,0.000,0.143,0.000,0.000,0.000,0.143,0.143,0.000,0.000,0.000,0.143,0.000,0.143,0.000,0.000,0.000,E,E,E,E,E,4,4,3,4,3,3,3,3,3,1,0,1,2,0,3,0.077,0.052,0.039,0.045,0.013,0.065,0.052,0.065,0.026,0.026,0.065,0.058,0.006,0.071,0.058,0.071,0.052,0.019,0.039,0.103,0,0,0,2,-4,-1,2,-2,-3,-3,-3,3,-3,-4,0,2,2,-5,-3,-3,-2,-6,-6,-5,-6,-5,-5,-5,-6,-2,-4,-5,-1,-3,8,-3,-4,-7,-6,-1,0,-2,-1,2,-4,1,4,-3,-1,-3,0,1,0,-1,-3,0,-2,-4,-2,-3,1,-1,0,3,-4,1,2,-2,-1,-3,-4,2,-3,-4,-3,2,0,-5,-3,-2,-3,-5,-5,-5,-4,-4,-5,-6,-5,5,3,-5,4,0,-4,-4,-3,-4,-3,1,1,1,-2,0,-3,-1,5,-3,-2,-1,-2,1,-2,-4,-3,-1,-1,-2,-3,1,1,0,0,1,-4,1,2,-1,-1,-4,-3,4,-3,-5,2,0,0,-5,-4,-3,2,-1,-1,5,-4,0,2,-3,0,-4,-5,0,-4,-4,-2,-1,-1,1,-2,-3,-4,-6,-6,-6,-4,-6,-6,-7,-6,7,1,-6,-1,-3,-6,-5,-4,-6,-4,2,-4,-6,-6,-6,-4,-6,-6,-7,-6,7,1,-6,-1,-3,-6,-5,-4,-6,-4,2,0,-1,-2,1,-5,2,5,-4,-2,-2,-1,2,-3,-5,-2,-2,-1,-5,-3,0,2,1,-1,-1,-4,1,2,-3,-3,-4,-4,5,-3,-5,-2,0,-1,-5,-4,-3,2,-4,-5,-5,-2,-2,-1,-5,-4,-1,5,-4,1,-1,-5,-3,-2,-1,0,-1,-4,-5,-6,-7,-3,-5,-6,-7,-6,2,6,-5,-1,-2,-6,-5,-4,-5,-4,1,-3,3,2,-1,-5,2,4,-3,-2,-5,-4,4,-3,-5,-3,-2,-2,-5,-4,-4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-3,-5,-5,-6,-3,-5,-5,-6,-5,5,2,-5,0,5,-5,-4,-3,-3,-2,3,-4,-5,-5,-6,-6,-4,-5,-6,5,-5,-2,-5,-4,2,-5,-4,-5,-1,9,-5,-3,-3,0,7,-6,1,3,-2,-1,-6,-6,-2,-3,-6,-3,0,-2,-6,-5,-5,-5,-6,-6,-6,-4,-5,-6,-6,-2,2,1,-6,-2,8,-6,-5,-3,-2,2,-2,-1,-1,0,-2,-3,1,2,-3,-1,-3,-4,2,-2,-4,2,2,3,-5,-3,-2,0\n'` 我列表中的每个项目都包含与上述类似的内容，但编号不同。我想保留前 2 个值，但摆脱其他所有值。所以对于上面的例子。最终结果将是`145,153`。我的列表大小是 145，我想对列表中的每个元素都这样做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:45:44.333

```
lst = ['145,153,8,1.3565949', '1,2,3,4,5,6', '9,8,7,6,5,4']

[','.join(elem.split(',', 2)[:2]) for elem in lst] 
```

返回

```
['145,153', '1,2', '9,8'] 
```

# php - 调用未定义函数 exif_read_data()

> ID：15831898
> 
> 赞同：6
> 
> 时间：2013-04-05T10:44:58.560
> 
> 标签：php, exif

在我的应用程序中，我收到以下错误：

> 调用未定义函数 exif_read_data()

我已经在 exif 扩展之前启用了 mbstring 扩展，但我仍然收到此错误。

任何人都可以给我任何关于为什么这个错误仍然存​​在的提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T10:57:01.427

So you php.ini needs to look like this (under Windows):

```
1   extension=php_mbstring.dll
2   extension=php_exif.dll 
```

and not:

```
1   extension=php_exif.dll
2   extension=php_mbstring.dll 
```

**restart apache** good luck!

**update 1**

Try this code and put back the result

```
 <?php
$ini = get_cfg_var('cfg_file_path');
echo '<pre>ini: ', $ini, "\n";

foreach(file($ini) as $l) {
  if ( false!==strpos($l, '_exif') || false!==strpos($l, '_mbstring') ) {
    echo $l;
  }
}
echo '<pre>'; 
```

**update 2** check “ext” directory of your PHP installation and see the file `php_exif.dll` was there. **update 3** try [http://www.sno.phy.queensu.ca/~phil/exiftool/](http://www.sno.phy.queensu.ca/~phil/exiftool/)

# sql - 即使指定了不同，SQL 也会检索重复项

> ID：15831902
> 
> 赞同：0
> 
> 时间：2013-04-05T10:45:10.970
> 
> 标签：sql

我试图`competence_id`从具有重复行的表中检索一些不同的行，基于：

```
select distinct competences.competence_id, skillmgt.* 
from competences
join skillmgt 
on competences.competence_id=skillmgt.cid
Where skillmgt.eid=121 and datename(yyyy,skillmgt.timestamp)='2013' 
```

但它得到了所有的`competence_id`s 及其重复项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:05:06.717

我想这会起作用（我猜你的一些列名）：

```
select competences.competence_id, skillmgt.* 
from competences c
join skillmgt s
on c.competence_id=s.cid
where s.sid = (select max(sqs.sid) from skillmgt sqs where c.competence_id=sqs.cid) 
```

你没有说你正在使用哪个版本的 SQL。如果我使用 SQL Server 2005 和更高版本执行此操作，那么我将使用稍微更优雅的 ROW_NUMBER 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:01:27.650

你需要分组。

```
select competences.competence_id, skillmgt.* 
from competences
join skillmgt 
on competences.competence_id=skillmgt.cid
group by competences.competence_id 
```

# android - Android Canvas drawcolor 抛出空指针异常

> ID：15831903
> 
> 赞同：2
> 
> 时间：2013-04-05T10:45:10.797
> 
> 标签：android, nullpointerexception, render, android-canvas

开发一款安卓小游戏（支持2.1到4.2），下面的代码经常会抛出java.lang.NullPointerException异常

***canvas.drawColor((0xFFAAAAAA);***

```
public class MainGamePanel extends SurfaceView implements SurfaceHolder.Callback {

public void render(Canvas canvas) {             

        canvas.drawColor(0xFFAAAAAA);   

        droid.draw(canvas);

    }
} 
```

这是堆栈跟踪

```
java.lang.NullPointerException
at com.rdx.play.MainGamePanel.render(MainGamePanel.java:186)
at com.rdx.play.MainThread.run(MainThread.java:54) 
```

异常不一致，什么可能导致此问题？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:07:40.533

[SurfaceHolder.lockCanvas()](http://developer.android.com/reference/android/view/SurfaceHolder.html#lockCanvas%28%29)允许返回 null （因为您的线程与表面的生命周期不完全相同）。我打赌你没有在你的线程函数中处理这种可能性。

# html - HTML - onbeforesubmit 属性的使用

> ID：15831910
> 
> 赞同：3
> 
> 时间：2013-04-05T10:45:36.320
> 
> 标签：html, forms, submit

我最近发现了一个名为的表单事件属性`onbeforesubmit`，它在实际提交表单之前处理给定的函数/请求。

虽然我发现它很有用，但对我来说似乎很奇怪，几乎没有找到有关此事件属性的“官方”文档，并模糊地引用了 Microsoft 网页和一些论坛。没有关于它的 w3schools 或 w3 参考（据我所知）。

它是一个非常古老/已弃用的事件属性，还是一个实验性的？到目前为止，我已经使用 Google Chrome 对其进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T19:41:30.993

它是一个旧属性。它的工作可以用 onsubmit 代替。您可以按照您想要执行的方式编写代码并在提交时调用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-17T11:13:28.797

我遇到了定义此事件的[Phalcon](http://www.phalconphp.com/en/)表单。找到了[这个文档](http://docs.jboss.org/richfaces/latest_4_5_X/Component_Reference/en-US/html/chap-Component_Reference-Common_Ajax_attributes.html#sect-Component_Reference-Events_and_JavaScript_interactions-onsubmit)。`onbeforesubmit`它说：

> event 属性在`onbeforesubmit`发送 Ajax 请求之前调用事件侦听器。`onbeforesubmit`如果为事件定义的事件侦听器返回，则取消请求`false`。

# java - 在 JPA 中重用持久性上下文

> ID：15831912
> 
> 赞同：0
> 
> 时间：2013-04-05T10:45:41.113
> 
> 标签：java, hibernate, jakarta-ee, jpa, jpa-2.0

我只是在处理@EmbededId 代码，我想在实体被持久化之前进行自动增量，这是不使用@GeneratedValue 和标识列的情况，

下面是具有复合 id 的表，

```
create table TBL_EMPLOYEE_002(
    ID integer, 
    COUNTRY varchar(50),
    NAME varchar(50),
    constraint PK_EMP_00240 primary key(ID,COUNTRY)
) 
```

这是实体映射的代码，

```
@Entity
@Table(name="TBL_EMPLOYEE_002")
public class EmployeeEntitySix implements Serializable{

// contructor's

    @EmbeddedId    
    private EmployeeIdTwo id;

    @Column(name="NAME")
    private String employeeName;

// getters and setter's

    @PrePersist
    public void incId(){
        EntityManager em = null;
        Query q = null;
       EntityManagerFactory emf = null;
        try{
            emf = Persistence.createEntityManagerFactory("forPractise");
            em = emf.createEntityManager();
            q = em.createQuery("select max(e.id.employeeId) from EmployeeEntitySix e");
            List list = q.getResultList();
            Integer i = (list != null && list.size() > 0) ? Integer.valueOf(list.get(0).toString()) : 0;
            this.getId().setEmployeeId(++i);
        }catch(Exception e){
            System.out.println("EXCETION WHILE INCREASING COUNTER...");
            e.printStackTrace();
        }finally{
            if(em != null && em.isOpen()){
                em.close();
            }
            if(getEmf() != null && getEmf().isOpen()){
                getEmf().close();
            }
        }

} 
```

这是复合id映射，

```
@Embeddable
public class EmployeeIdTwo implements Serializable{

    @Column(name="ID") 
    private Integer employeeId;

    @Column(name="COUNTRY",length=50)
    private String empCountry;

// getters and setters

    } 
```

这段代码是我的主要方法，这个主要方法在其他类中，

```
public static void main(String [] args){
    EntityManagerFactory emf = null;
    EntityManager em = null;
    EntityTransaction tx = null;
    try{
        emf = Persistence.createEntityManagerFactory("forPractise");
        em = emf.createEntityManager();
        tx = em.getTransaction();            
        tx.begin();
    EmployeeEntitySix employee = new EmployeeEntitySix(new EmployeeIdTwo("ZIMBABWE"), "Henry Olanga");
    em.persist(employee);
....
} 
```

现在上面的代码运行良好，每当我持久化实体“EmployeeEntitySix”时，使用@PerPersist注释的方法就会运行，它将首先获取最大id，递增它，将其设置为嵌入实体中的id并持久化实体。

现在我的问题是，

我创建了 EntityManagerFactory 两次，第一次是在 main 方法中，第二次是在实体 EmployeeEntitySix 的 @PrePersist 方法中。因此，我是否可以使用在实体 EmployeeEntitySix 的 main 方法中创建的第一个 Entitymanagerfactory 而预先持久化，或者我是否可以重用第一次在实体的 @PrePersist 方法的 main 方法中创建的 entitymanager。

仅供参考，我使用的是纯 Java 环境，我没有使用 Java EE 容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:08:16.717

Hibernate 默认尝试持久化实体类或嵌入 id 的所有字段，包括 field `emf`，但它不知道如何持久化 type 的字段`EntityManagerFactory`。

当然，坚持一个`EntityManagerFactory`. 您可以将该字段标记为`@Transient`防止它被持久化，但是您将面临不同的问题。

`EntityManagerFactory`带有注解的注入`@PersistenceUnit`仅适用于在符合 Java EE 的应用服务器上运行的应用程序中的 CDI Bean 和 EJB。当您使用 main 方法时，我假设您的示例是一个简单的 JSE 程序。

此外，您不应`EntityManager`在生命周期回调方法中访问 s，例如`@PrePersist`. 引用 JPA 规范（[JSR 317：JavaTM Persistence API，2.0 版](http://download.oracle.com/otn-pub/jcp/persistence-2.0-fr-eval-oth-JSpec/persistence-2_0-final-spec.pdf)）：

*通常，可移植应用程序的生命周期方法不应调用 EntityManager 或 Query 操作、访问其他实体实例或修改同一持久性上下文中的关系。生命周期回调方法可以修改调用它的实体的非关系状态。*

我建议您不要使用`EntityManagerFactory`嵌入式 id 类，也不要使用`incId`-Method。相反，您可以`employeeId`在调用`persist`. 只要程序的一个实例与数据库一起工作，这就可以正常工作。当有多个程序尝试插入新员工时，可能会出现两个程序尝试插入相同 ID 的竞争条件。

为了防止这种情况，您可以使用数据库序列生成`employeeId`带有注释的`@GeneratedValue`, 和`@SequenceGenerator`. 您可以在此处找到有关 id 生成的更多信息：[http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing)

# macos - 如何在 Mac 的 automator 中使用没有路径的当前文件夹名称作为变量？

> ID：15831913
> 
> 赞同：14
> 
> 时间：2013-04-05T10:45:43.680
> 
> 标签：macos, variables, directory, automator

我正在使用 Mac OSX 10.8.3。

我在 Automator 中设置了一个工作流程，如下所示：

1.  询问查找器项目
2.  获取文件夹内容
3.  使顺序
4.  移动查找器项目

工作流程的目的是自动重命名我保存在文件夹中的一堆照片，然后将它们移动到新文件夹。

我想获取文件夹名称并将其粘贴在一个变量中，然后在工作流程的 Make Sequential 部分（见附件）图像的“新名称框”中使用该变量。

如何仅获取文件夹名称并将其分配给变量。我的示例有一个名为“FolderName”的变量

这是一个截图 ![截屏](https://i.imgur.com/OBHEXlF.jpg)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-16T10:29:56.297

这适用于测试：

1.  **询问查找器项目**- 将类型设置为文件夹。
2.  **设置变量值**- 这将是从操作**1获取的文件夹的****路径**。
***   **运行 Shell 脚本**- 设置 Pass 输入：作为参数。并使用***/usr/bin/basename "$1"***作为命令行来获取文件夹名称*   **设置变量值**- 这将是从操作**3中****获取**的文件夹的文件夹名称。***   **获取变量**的值 - 将它获得的变量设置为**路径**

    5a。将动作**5**设置为忽略来自上述动作**4**的输入- `Ctrl`+ 鼠标单击动作标题以获取上下文菜单

    *   **获取文件夹内容**- 获取操作**5**传递的**路径处的文件夹内容**

    ***   **重命名 Finder 项目**- 设置为使顺序和新名称 = **folderName**变量******

 ****![在此处输入图像描述](https://i.stack.imgur.com/xv2c0.png)

您可以根据需要添加移动操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T12:32:24.830

您可以将`Run Shell Script Action`, 与以下代码一起使用：

```
echo ${1##*/} 
```

并`Pass input:`设置为`as arguments`。

![在此处输入图像描述](https://i.stack.imgur.com/9w0mG.png)

这将过滤传递的输入，只给出文件基名作为输出。

您应该将此步骤放在设置`FolderName`变量的操作之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-02T07:42:17.903

另一个简短版本，用于获取文件夹名称并将其分配给变量。

```
tell application "Finder"
    set currentDir to target of Finder window 1 as alias
    set posixDir to POSIX path of currentDir
    -- set myShell to "touch \"" & posix & "\"readme.txt"
    -- set result to (do shell script myShell)
end tell 
```

[![截屏](https://i.stack.imgur.com/06Sp7.jpg)](https://i.stack.imgur.com/06Sp7.jpg)****

# jsp - 如何将 JSTL 自定义标签的主体存储到变量中？

> ID：15831917
> 
> 赞同：3
> 
> 时间：2013-04-05T10:45:49.453
> 
> 标签：jsp, jstl, jsp-tags

我想创建一个可以像这样使用的自定义 JSP 标记：

```
<mytags:myTag>
    <p>My content!</p>
</mytags:myTag> 
```

在标签中，我想处理正文的内容，就像我使用任何其他属性一样。所以，标签定义看起来像这样——但主体不是属性而是*别的*东西。

**mytag.标签：**

```
<%@taglib prefix="mytags" tagdir="/WEB-INF/tags/mytags" %>
<%@attribute name="body" required="true"%>

<div>
  <c:if test="${fn:contains(body, 'test')}">
    <p>Found test string<p>
  </c:if>
</div> 
```

显然，类似`<jsp:doBody/>`或`<jsp:invoke fragment="body" />`不会帮助我的东西。此外，为此目的创建 Java 标记似乎有点过于复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-24T20:51:50.873

[如本文](http://www.techrepublic.com/article/an-introduction-to-jsp-20s-tag-files/)`<jsp:dobody>`所示，可以通过其`var`属性使用操作来捕获正文内容。正文内容将作为属性添加到您的标记文件中，并且可以通过表达式访问。`pageContext`

**mytag.tag**

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<jsp:doBody var="body"/>
<div>
    <c:if test="${ fn:contains(body, 'test') }">
        <p>Found test string</p>
    </c:if>
</div> 
```

# c# - RegularExpressionValidator 总是显示错误信息

> ID：15831919
> 
> 赞同：1
> 
> 时间：2013-04-05T10:46:05.120
> 
> 标签：c#, asp.net, regex, file-upload

这是我的代码`aspx`：

```
<asp:FileUpload ID="ImageUpload" runat="server" Style="margin-bottom: 5px" />
<br />
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
 ErrorMessage="Only jpeg, png or gif files are allowed!"
 ValidationExpression="^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))
 +(.jpeg|.JPEG|.png|.PNG|.gif|.GIF)$" 
 ControlToValidate="ImageUpload"></asp:RegularExpressionValidator> 
```

我想过滤 jpeg、png 和 gif 文件只在我的`ImageUpload`. 但是，当我上传 jpeg、png 和 gif 文件时，`RegularExpressionValidator`总是显示错误消息。我想知道我的代码有什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:53:47.293

If all you want is to assert the extension then you could try something like this:

```
\.(jpeg|JPEG|png|PNG|gif|GIF)$ 
```

This would match anything that ends in a `.` followed by either of the above extensions.

**Edit:**

Without having tried it and having no experience with aspx, I think you should be able to use `(?i:)` to make it case insensitive:

```
(?i:\.jpeg|png|gif)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:06:58.647

你应该试试这个

```
protected void Button1_Click(object sender, EventArgs e)
        {
            string filename = fileUpload.PostedFile.FileName;
            string extsn = Path.GetExtension(filename);
            if (extsn.ToUpper() == ".JPEG" || extsn.ToUpper() == ".PNG" || extsn.ToUpper() == ".GIF")
            { 

            }
        } 
```

# javascript - 同时按下两个键后javascript事件的奇怪行为

> ID：15831920
> 
> 赞同：0
> 
> 时间：2013-04-05T10:46:05.120
> 
> 标签：javascript, events

我正在编写一个小 javascript 应用程序，我需要控制屏幕事件（图像外观）。例如，如果 image_1 出现在屏幕上，我需要按一个键（例如右箭头），如果 image_2 出现，我需要按另一个键（例如左箭头）。如果它们同时出现，我需要同时按下两个键。

问题是，如果我同时按下两个键，则不再启动键事件，我的意思是当出现下一张图像时，我按下一个键但没有 javascript 事件。

我简化了代码供您尝试：

```
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>Test1</title>
    <script>

    function addE () {
        if (document.addEventListener)  {// standard W3C DO
                document.addEventListener("keydown",test1,false);
        }
    }

    // ejemplo equivalente para quitar el evento
    function removeE () {
        if (document.removeEventListener)  {// standard W3C DOM
                document.removeEventListener("keydown",test1,false);
         }
    }

    function test1 (e) {
        alert('test');
        if (!e) var e = window.event;
        switch (e.keyCode) {
            case 39: 
              alert(e.keyCode);
            break;
            case 37:  
              alert(e.keyCode);
            break;
            default:
              alert(e.keyCode);
        }
    }

    window.onload = function() {
        addE();
        alert('Listener added');
    }

    </script>
  </head>
<body>

</body>
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:31:15.060

正如 Gonçalo Vieira 和 Andy E 建议我的那样，问题不在于我的代码，而在于我使用的调试警报。当更改为更好的调试解决方案 console.log() 时，一切正常

# jquery - 我在哪里可以托管 jQuery 滑块/小部件和 iframe？

> ID：15831923
> 
> 赞同：0
> 
> 时间：2013-04-05T10:46:17.453
> 
> 标签：jquery, html, iframe, web, host

我有一个 jQuery 幻灯片。它的所有文件都由 Dropbox 托管。因此，当我将我的 HTML 代码放到网上（获取 css 和 js 文件）时，它工作得很好。

问题是我想在它上工作的网站是一个 Jimdo 网站，而 Jimdo 不支持 jQuery。所以我唯一的希望是 iframe 我的 jQuery 幻灯片。但是我将在哪里托管我的小部件？

**不是文件，是小部件本身......**

这是 jQuery 幻灯片/小部件的 HTML 代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ResponsiveSlides.js &middot; Responsive jQuery slideshow</title>
        <link rel="stylesheet" href="https://dl.dropbox.com/u/12608183/ResponsiveSlides.js-master/responsiveslides.css">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link rel="stylesheet" href="https://dl.dropbox.com/u/12608183/ResponsiveSlides.js-master/demo/demo.css">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="https://dl.dropbox.com/u/12608183/ResponsiveSlides.js-master/responsiveslides.min.js"></script>
        <script>
            // You can also use "$(window).load(function() {"
            $(function () {
                // Slideshow 1
                $("#slider1").responsiveSlides({
                    maxwidth: 800,
                    speed: 800
                });
            });
        </script>
    </head>
    <body>
        <div id="wrapper">
            <!-- Slideshow 1 -->
            <ul class="rslides" id="slider1">
                <li><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTPlSuCpMPhKN_P3JFKD875c_Wsd5e_Xy5OJCHYsvLZ6s24820" alt=""></li>
                <li><img src="http://upload.wikimedia.org/wikipedia/commons/7/7c/Aspect_ratio_16_9_example.jpg" alt=""></li>
                <li><img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTnz-gglGHf9bY7P1Yu-qCFUlV9xh9pSOWFdeRPmJ3otTyWfjJw" alt=""></li>
            </ul>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:54:39.037

使用[pastehtml](http://pastehtml.com/)并使用它的链接在 iframe 中显示它

# regex - 跳过协议 url 的正则表达式

> ID：15831924
> 
> 赞同：1
> 
> 时间：2013-04-05T10:46:17.740
> 
> 标签：regex

我正在尝试在 C# 中定义一个正则表达式，当给定一个 url 时，它将返回除协议之外的 url，例如 http。也就是说，我需要跳过任何协议，只返回域和路径。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:48:19.863

尝试使用以下正则表达式：

```
^[a-z]+://(.*)$

string input = "http://www.google.com/search";

Match match = Regex.Match(input, @"^[a-z]+://(.*)$", RegexOptions.IgnoreCase);

if (match.Success)
{
    string url = match.Groups[1].Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:49:20.763

使用这个正则表达式`(?<=://).+`

或者

*在 regexGroup[1] 中*使用此正则表达式而不向后看`://(.+)`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:49:53.257

您可以使用简单的替换

```
string url = "http://url.com";
        if(url.Contains("http://")){
            url = url.Replace("http://","");
        }
        else if(url.Contains("https://")){
            url = url.Replace("https://","");
        } 
```

或者

```
url = Regex.Replace(url,@"[a-z]+://",""); 
```*

# php - 使用持久套接字访问套接字服务

> ID：15831929
> 
> 赞同：0
> 
> 时间：2013-04-05T10:46:40.857
> 
> 标签：php, sockets, persistent-connection

我有一个在后台运行的 tcp 套接字服务 MyServ（使用 Java，虽然并不重要），还有一个带有 php 的 Web 服务器，它使用持久套接字（pfsockopen）访问 MyServ。

问题是，如果一个 php 请求由于某种原因停止，它会在持久套接字中留下一些未读取的数据，并且下面的 php 请求在读取此套接字时会出错。

我想知道其他类似场景的服务（如 php-mysql、php-memcached）如何处理这个问题？更具体地说，php 如何判断使用的持久套接字是干净的？

# delphi - 如何访问 TFrame 的画布？

> ID：15831932
> 
> 赞同：3
> 
> 时间：2013-04-05T10:46:57.303
> 
> 标签：delphi, tframe

使用：Delphi XE2、VCL 32 位应用程序、Windows 8

我正在尝试将框架的背景绘制到面板上（我正在使用 TJvPanel，因为它公开了 OnPaint 事件），这是框架的子控件。

在阅读[了这篇文章](https://stackoverflow.com/questions/15294099/using-tframe-how-do-i-properly-access-the-tcanvas-property-just-as-in-a-tform)并将画布添加为字段后，我仍然没有成功。

调用 ShowAddReceiptPanel 后，它应该在前景面板上绘制框架的 (TfrmMyFrame) 窗口内容，其中包含所有控件（包括网格和页面控件），在通过 ProEffectImage 方法处理后，灰度化，而是显示一个不透明的白色背景。我错过了什么吗？

这是我的代码：

```
type
  TfrmMyFrame = class(TFrame)
    pnlHdr: TPanel;
    pnlAddNewBG: TJvPanel;
    procedure pnlAddNewBGPaint(Sender: TObject);
  private
    { Private declarations }
    FBGImg: TProEffectImage;
    Fcnvs: TCanvas;

    procedure PaintWindow(DC: HDC); override;
    procedure ShowAddReceiptPanel;
    procedure HideAddReceiptPanel;
    procedure ResizePanel_pnlAddNewBG;

  public
    { Public declarations }
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  end;

constructor TfrmMyFrame.Create(AOwner: TComponent);
begin
  inherited;

  FBGImg := TProEffectImage.Create(nil);
  Fcnvs := TCanvas.Create;

end;

destructor TfrmMyFrame.Destroy;
begin
  if Assigned(FBGImg) then
    FBGImg.Free;

  if Assigned(Fcnvs) then
    Fcnvs.Free;

  inherited;
end;

procedure TfrmMyFrame.ShowAddReceiptPanel;
begin
  ResizePanel_pnlAddNewBG;
  pnlAddNewBG.Visible := True;
end;

procedure TfrmMyFrame.PaintWindow(DC: HDC);
begin
  inherited;

  Fcnvs.Handle := DC;
end;

procedure TfrmMyFrame.pnlAddNewBGPaint(Sender: TObject);
var
  l, t, w, h: Integer;
  srct, drct: TRect;
begin

  // Copy Frame canvas to BGImg bitmap
  l := 0;
  t := pnlHdr.Height;
  w := ClientWidth;
  h := ClientHeight - t;

  srct := TRect.Create(l, t, w, h);
  FBGImg.Width := w;
  FBGImg.Height := h;
  drct := TRect.Create(l, t, w, h);
  FBGImg.Canvas.CopyMode := cmSrcCopy;
  FBGImg.Canvas.CopyRect(drct, Fcnvs, srct);
//  FBGImg.Picture.SaveToFile('c:\tmp\a.bmp');

  FBGImg.Effect_AntiAlias;
  FBGImg.Effect_GrayScale;

  // Draw BGImg onto Option panel
  TJvPanel(Sender).Canvas.CopyMode := cmSrcCopy;
  TJvPanel(Sender).Canvas.Draw(0, 0, FBGImg.Picture.Graphic);
end;

procedure TfrmMyFrame.ResizePanel_pnlAddNewBG;
var
  x1, y1, x2, y2: Integer;
  bmp: TBitmap;
begin
  x1 := 0;
  y1 := pnlHdr.Height;
  x2 := ClientWidth;
  y2 := ClientHeight - y1;

  pnlAddNewBG.SetBounds(x1, y1, x2, y2);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:55:46.630

您分配给画布句柄的 DC 仅在 PaintWindow 调用期间有效。当它无效时，您在该函数之外使用它，因此您观察到的行为。

我认为您应该能够通过调用[PaintTo](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TWinControl.PaintTo)方法来解决您的问题。创建一个大小合适的位图并将其画布传递给 PaintTo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:16:14.893

A`TFrame`没有画布。您可以像这样创建/添加一个，`TCustomControl`但您不必这样做。画布只是 Windows 设备上下文的一个方便的包装器。`PaintWindow`每当必须（部分）重绘框架时，都会调用该例程。该参数显示 DC，或者您可以使用 获得一个`GetDC`。

那么伪代码如下：

```
procedure TfrmMyFrame.PaintWindow(DC: HDC);
begin
  - Resize BG image and hide it (otherwise image itself will be copied too)
  - Paint the frame's contents to the image with:
    Self.PaintTo(FBGImg.Canvas.Handle, 0, 0)
  - Process the special effects on FBGImg
  - Paint the image onto DC with:
    BitBlt(DC, 0, 0, ClientWidth, ClientHeight, FBGImage.Canvas.Handle, 0, 0, SRCCOPY);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T15:29:57.727

访问 a `Canvas`on a的一种简单方法是在其上`TFrame`添加 a并使用其属性。`TPaintBox``Align := alClient``Canvas`

我希望这种方法在将来也可以与任何版本的 Delphi 一起使用，因此使用它来代替`PaintWindow`似乎很棘手的方法。

# php - PHP、sprintf 和数值中的 SQL 注入

> ID：15831936
> 
> 赞同：0
> 
> 时间：2013-04-05T10:47:06.400
> 
> 标签：php, sql-injection

我试图使我的查询对 SQL 注入安全，幸运的是，可以定位的变量只是整数或浮点数，所以我想知道在这种情况下，使用 sprintf() 是否足够（甚至不使用 mysqli_real_escape_string ())。我做了一些测试，到目前为止它看起来不错，因为它将任何输入解析为浮点/整数，因此不应执行任何 SQL 语句。有没有办法破解这个？对我来说它看起来太简单太美妙了：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:07:35.423

为什么不使用准备好的语句？它们为 SQL 注入提供了更好的保护，如果它们被重用，还可以提高查询性能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-05T10:55:51.347

```
$int = 125 . 'asda';
$float = 654.12;

function validateNumber($number) {
    if (strpos($number, '.')) {
        $number = floatval($number);
    } else { 
        $number = intval($number);
    }
    return $number;
}

echo validateNumber($int); // 125
echo '<br />';
echo validateNumber($float); // 654.12 
```

Checking if number is int or float and returning their values.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-05T10:59:47.097

> 使用 sprintf() 就足够了

是的。

# java - 更改 rgb 位的 alpha

> ID：15831940
> 
> 赞同：3
> 
> 时间：2013-04-05T10:47:15.517
> 
> 标签：java, image, bufferedimage, alpha, rgba

我在 java 中设置 buffredimage 的 rgb 的 alpha。此代码更改 alpha 值，但保存文件后我无法检索相同的值。如何克服这个问题。

```
// ================ Code for setting alpha ===============
int alpha=140;
// alpha value to set in rgb

int b=alpha<<24;
b=b|0x00ffffff;

ialpha.setRGB(0, 0,ialpha.getRGB(0, 0)&b);
// ialpha is a bufferedimage of type TYPE_INT_ARGB

ImageIO.write(ialpha, "png", new File("C:/newimg.png"));
System.out.println("\nFile saved !");

// ================ Code for getting alpha ===============

int val=(ialpha.getRGB(0, 0)&0xff000000)>>24;
if(val<0)
val=256+val;
System.out.println("Returned alpha value:"+val); 
```

这只是返回 255 作为 alpha 值。它不返回我设置的值，即 140。

请帮我找回我之前设置的 alpha 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T11:00:53.630

问题出在获取 alpha 的代码中。在第二个位移操作中，您不考虑符号位。

```
int val=(ialpha.getRGB(0, 0) & 0xff000000) >> 24; 
```

这将给出值（给定您的`0xffffff8c`初始 alpha ）。有关详细信息，请参阅[按位和位移运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。尤其：`140``0x8c`

> 无符号右移运算符“>>>”将零移到最左边的位置，而“>>”之后的最左边的位置取决于符号扩展。

您需要执行以下任一操作：

```
int val = (ialpha.getRGB(0, 0) & 0xff000000) >>> 24; // shift zero into left 
```

或者：

```
int val = ialpha.getRGB(0, 0) >> 24) & 0xff; // mask out the sign part 
```

PS：我更喜欢后者，因为大多数人（包括我自己）都不记得`>>>`操作员实际上做了什么.. ;-)

# java - Jackson writeValueAsString：有效的 JSON 不再有效

> ID：15831948
> 
> 赞同：0
> 
> 时间：2013-04-05T10:47:33.617
> 
> 标签：java, json, jackson

我有一些字符串，我想创建一个有效的 JSON。

输入：时间戳、特征、id、数据（本身就是有效的 JSON）

`{"items":[{"id":"13123545","count": 5, "amount": 11.6},{"id": "1638343", "count": 1, "amount": 55.99}], "oid": 5556}`

```
 //Some code here
    valueItems.add(new ValueItem(timestamp, feature, id, data));
    valueData.setInformation(valueItems);
    valueString = valueMapper.writeValueAsString(valueData);
    System.out.println(valueString); 
```

输出：

```
{
    "information": [
        {
            "timestamp": "2013-01-01",
            "feature": "login",
            "id": 0,
            "data": "{\"items\":[{\"id\":\"14737\",\"count\": 5, \"amount\": 11.6},{\"id\": \"1874345\", \"count\": 1, \"amount\": 55.99}], \"oid\": 5556}"
        }
    ]
} 
```

JSON 本身是有效的，但由于 . 为什么会这样？我怎样才能改变它或防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:14:49.477

问题是因为您将 JSON 文本表示为`String`，因此所有引号都被转义（即带有`\"`）。

为什么在 Java 程序内部以这种方式表示 JSON？一般来说，维护一个纯 POJO 内部表示，然后一次性将所有这些转换为 JSON，而不是混合 POJO 和 JSON，更有意义。

在您的情况下，这意味着`data`您的类中的字段`Information`不应该是 a `String`，而应该是一个定义为包含`Set<Item> items`and`long oid`或类似内容的对象。

# c++ - 使用 Boost C++ 库使用自定义替换进行正则表达式替换

> ID：15831950
> 
> 赞同：1
> 
> 时间：2013-04-05T10:47:44.433
> 
> 标签：c++, boost, boost-regex, boost-xpressive

我可以使用 Boost 库的 Xpressive 进行一些正则表达式替换，如下所示：

```
#include <iostream>
#include <boost/xpressive/xpressive.hpp>

void replace(){
    std::string in("a(bc) de(fg)");
    sregex re = +_w >> '(' >> (s1= +_w) >> ')';
    std::string out = regex_replace(in,re,"$1");
    std::cout << out << std::endl;
} 
```

我需要的是用某个转换函数的结果替换捕获的部分，例如

```
std::string modifyString(std::string &in){
    std::string out(in);
    std::reverse(out.begin(),out.end());
    return out;
} 
```

所以上面提供的示例的结果将是***cb gf***。

您认为实现这一点的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:59:08.953

采用

```
std::string modifyString(const smatch& match){
    std::string out(match[1]);
    std::reverse(out.begin(),out.end());
    return out;
}

void replace(){
    std::string in("a(bc) de(fg)");
    sregex re = +_w >> '(' >> (s1= +_w) >> ')';
    std::string out = regex_replace(in, re, modifyString);
    std::cout << out << std::endl;
} 
```

[活生生的例子](http://liveworkspace.org/code/1qEydG%240)

在文档中有所有关于`regex_replace`功能[视图的描述/要求](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/xpressive/regex_replace.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:00:11.710

将格式化程序函数传递到`regex_replace`. 注意它需要采取`const smatch &`。

```
std::string modifyString(smatch const &what){
    std::string out(what[1].str());
    std::reverse(out.begin(),out.end());
    return out;
}

std::string out = regex_replace(in,re,modifyString); 
```

请参阅[http://www.boost.org/doc/libs/1_53_0/doc/html/xpressive/user_s_guide.html#boost_xpressive.user_s_guide.string_substitutions](http://www.boost.org/doc/libs/1_53_0/doc/html/xpressive/user_s_guide.html#boost_xpressive.user_s_guide.string_substitutions)

# c++ - 动态链接、内存使用和并发

> ID：15831951
> 
> 赞同：3
> 
> 时间：2013-04-05T10:47:47.073
> 
> 标签：c++, c, unix, memory, dynamic-linking

当可执行文件与静态库链接时，可执行文件仅包含代码中使用的必要库部分，对吗？

但我错过了 - 如何准确使用共享对象（动态链接库）？

据我所知，它们不包含在可执行文件中，它们是使用动态加载的`dlopen`，这是由链接器直接完成的，对吧？

在这种情况下，这个库在内存中的什么位置？我的意思是，这里有帖子，解释说动态库可以减少内存使用，但究竟如何呢？如果动态库以某种方式加载到共享内存中（用于多个进程），那么在这种情况下内核如何处理并发？

[我意识到这可能是基本的东西，如果这是重复的，我很抱歉，我找不到这样的东西。]
[我知道[静态链接与动态链接](https://stackoverflow.com/questions/1993390/static-linking-vs-dynamic-linking?rq=1)，我问的有点不同。]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T10:56:17.030

共享库确实被加载到所有“用户”（使用相同库的所有应用程序）之间共享的内存中。

这基本上是通过引用计数来完成的，因此对于图书馆的每个新用户，引用都会被计数。当应用程序退出时，引用计数会倒计时。如果它变为零，则不再需要该库，并将从内存中删除（很可能仅在“其他东西需要内存”时，而不是“立即”）。引用计数是由内核“原子地”完成的，因此不存在并发冲突。

请注意，实际上共享的只是共享库中的代码。每个进程的任何数据部分都是私有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:52:46.730

对于使用它们的所有进程，动态库只加载一次。动态库的内存然后被操作系统映射到进程地址空间。这样，它只消耗一次所需的内存。使用静态链接，所有可执行文件都包含静态链接的代码。加载可执行文件时，也会加载静态链接的代码。这意味着，包含在 10 个可执行文件中的函数在内存中驻留 10 次。

# ios - 如何打开包含 UIview 或图像的弹出窗口

> ID：15831954
> 
> 赞同：2
> 
> 时间：2013-04-05T10:48:12.847
> 
> 标签：ios, objective-c, xcode, ipad

我想在单击按钮时打开一个弹出窗口。弹出窗口应包含运行时的图像或视图。请帮我。关于阿努帕姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:52:12.990

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Popup Title" 
                                                message:@"This is pop up window/ Alert" 
                                               delegate:nil 
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];

UIImageView *tempImageView=[[UIImageView alloc]initWithFrame:CGRectMake(20,20,50,50)];

tempImageView.image=[UIImage imageNamed:@"abcd.png"];

[alert addSubview:tempImageView];

[alert show]; 
```

# scrapy - Scrapy请求+响应+下载时间

> ID：15831955
> 
> 赞同：12
> 
> 时间：2013-04-05T10:48:16.010
> 
> 标签：scrapy

**UPD**：不是很接近的问题，因为我认为我的方式还不够清晰

是否可以获得当前请求 + 响应 + 下载时间以将其保存到项目？

在“普通”python中我做

```
start_time = time()
urllib2.urlopen('http://example.com').read()
time() - start_time 
```

但是我怎么能用 Scrapy 做到这一点？

**更新**：

解决方案对我来说足够了，但我不确定结果的质量。如果你有很多超时错误的连接`Download time`可能是错误的（甚至是DOWNLOAD_TIMEOUT * 3）

为了

设置.py

```
DOWNLOADER_MIDDLEWARES = {
    'myscraper.middlewares.DownloadTimer': 0,
} 
```

中间件.py

```
from time import time
from scrapy.http import Response

class DownloadTimer(object):
    def process_request(self, request, spider):
        request.meta['__start_time'] = time()
        # this not block middlewares which are has greater number then this
        return None

    def process_response(self, request, response, spider):
        request.meta['__end_time'] = time()
        return response  # return response coz we should

    def process_exception(self, request, exception, spider):
        request.meta['__end_time'] = time()
        return Response(
            url=request.url,
            status=110,
            request=request) 
```

在spider.py里面`def parse(...`

```
log.msg('Download time: %.2f - %.2f = %.2f' % (
    response.meta['__end_time'], response.meta['__start_time'],
    response.meta['__end_time'] - response.meta['__start_time']
), level=log.DEBUG) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T12:18:06.450

您可以编写一个[下载器中间件](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html)来为每个请求计时。它会在请求发出之前添加一个开始时间，然后在它完成时添加一个完成时间。通常，诸如此类的任意数据存储在[Request.meta](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request.meta)属性中。此时间信息稍后可能会被您的蜘蛛读取并添加到您的项目中。

这个下载器中间件听起来对许多项目都很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-14T01:05:53.800

不确定您是否需要一个中间件。Scrapy 有一个 request.meta，你可以查询和生成。对于下载延迟，只需屈服

```
download_latency=response.meta.get('download_latency'), 
```

> 自请求开始以来获取响应所花费的时间，即通过网络发送的 HTTP 消息。此元密钥仅在下载响应后才可用。虽然大多数其他元键用于控制 Scrapy 行为，但这个键应该是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T15:41:12.733

我认为最好的解决方案是使用scrapy信号。每当请求到达下载器时，它就会发出*request_reached_downloader*信号。下载后它会发出*response_downloaded*信号。您可以从蜘蛛中捕获它并从那里将时间及其差异分配给元。

```
@classmethod
    def from_crawler(cls, crawler, *args, **kwargs):
        spider = super(SignalSpider, cls).from_crawler(crawler, *args, **kwargs)
        crawler.signals.connect(spider.item_scraped, signal=signals.item_scraped)
        return spider 
```

更详细的答案在[这里](https://docs.scrapy.org/en/latest/topics/signals.html#signals)

# r - 每 n 个单词拆分一个字符向量

> ID：15831957
> 
> 赞同：1
> 
> 时间：2013-04-05T10:48:27.337
> 
> 标签：r, vector, split, character

如何将单词的单个字符向量拆分为向量列表，其中列表中的每个向量都包含一定数量的单词？

例如：

```
# reproducible data
examp <- "Before asking a technical question by e-mail, or in a newsgroup, or on a website chat board, do the following:  Try to find an answer by searching the archives of the forum you plan to post to. Try to find an answer by searching the Web. Try to find an answer by reading the manual. Try to find an answer by reading a FAQ. Try to find an answer by inspection or experimentation. Try to find an answer by asking a skilled friend. If you're a programmer, try to find an answer by reading the source code. When you ask your question, display the fact that you have done these things first; this will help establish that you're not being a lazy sponge and wasting people's time. Better yet, display what you have learned from doing these things. We like answering questions for people who have demonstrated they can learn from the answers. Use tactics like doing a Google search on the text of whatever error message you get (searching Google groups as well as Web pages). This might well take you straight to fix documentation or a mailing list thread answering your question. Even if it doesn't, saying “I googled on the following phrase but didn't get anything that looked promising” is a good thing to do in e-mail or news postings requesting help, if only because it records what searches won't help. It will also help to direct other people with similar problems to your thread by linking the search terms to what will hopefully be your problem and resolution thread. Take your time. Do not expect to be able to solve a complicated problem with a few seconds of Googling. Read and understand the FAQs, sit back, relax and give the problem some thought before approaching experts. Trust us, they will be able to tell from your questions how much reading and thinking you did, and will be more willing to help if you come prepared. Don't instantly fire your whole arsenal of questions just because your first search turned up no answers (or too many). Prepare your question. Think it through. Hasty-sounding questions get hasty answers, or none at all. The more you do to demonstrate that having put thought and effort into solving your problem before seeking help, the more likely you are to actually get help. Beware of asking the wrong question. If you ask one that is based on faulty assumptions, J. Random Hacker is quite likely to reply with a uselessly literal answer while thinking Stupid question..., and hoping the experience of getting what you asked for rather than what you needed will teach you a lesson." 
```

目前我正在这样做（基于[https://stackoverflow.com/a/3318390/1036500](https://stackoverflow.com/a/3318390/1036500)）：

```
xx <- unlist(strsplit(examp, " "))
xxdf <- data.frame(examp = xx)
n <- 50 # split every how many words?
exampsplit <- split(xxdf, factor(sort(rank(row.names(xxdf))%%round(length(unlist(strsplit(examp, " ")))/n,0)))) 
```

这对于我目前的目的来说大致足够了，但我怀疑它可以改进。什么是更有效和准确的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T10:53:47.303

你可以试试下面

```
x <- unlist(strsplit(examp, "\\s+"))
y <- split(x, seq_along(x)%/%50)

y
## $`0`
##  [1] "Before"     "asking"     "a"          "technical"  "question"  
##  [6] "by"         "e-mail,"    "or"         "in"         "a"         
## [11] "newsgroup," "or"         "on"         "a"          "website"   
## [16] "chat"       "board,"     "do"         "the"        "following:"
## [21] ""           "Try"        "to"         "find"       "an"        
## [26] "answer"     "by"         "searching"  "the"        "archives"  
## [31] "of"         "the"        "forum"      "you"        "plan"      
## [36] "to"         "post"       "to."        "Try"        "to"        
## [41] "find"       "an"         "answer"     "by"         "searching" 
## [46] "the"        "Web."       "Try"        "to"        
## 
## $`1`
##  [1] "find"             "an"               "answer"           "by"              
##  [5] "reading"          "the"              "manual."          "Try"             
##  [9] "to"               "find"             "an"               "answer"          
## [13] "by"               "reading"          "a"                "FAQ."            
## [17] "Try"              "to"               "find"             "an"              
## [21] "answer"           "by"               "inspection"       "or"              
## [25] "experimentation." "Try"              "to"               "find"            
## [29] "an"               "answer"           "by"               "asking"          
## [33] "a"                "skilled"          "friend."          "If"              
## [37] "you're"           "a"                "programmer,"      "try"             
## [41] "to"               "find"             "an"               "answer"          
## [45] "by"               "reading"          "the"              "source"          
## [49] "code."            "When"            
## 
## $`2`
##  [1] "you"          "ask"          "your"         "question,"    "display"     
##  [6] "the"          "fact"         "that"         "you"          "have"        
## [11] "done"         "these"        "things"       "first;"       "this"        
## [16] "will"         "help"         "establish"    "that"         "you're"      
## [21] "not"          "being"        "a"            "lazy"         "sponge"      
## [26] "and"          "wasting"      "people's"     "time."        "Better"      
## [31] "yet,"         "display"      "what"         "you"          "have"        
## [36] "learned"      "from"         "doing"        "these"        "things."     
## [41] "We"           "like"         "answering"    "questions"    "for"         
## [46] "people"       "who"          "have"         "demonstrated" "they"        
## 
## $`3`
##  [1] "can"           "learn"         "from"          "the"          
##  [5] "answers."      "Use"           "tactics"       "like"         
##  [9] "doing"         "a"             "Google"        "search"       
## [13] "on"            "the"           "text"          "of"           
## [17] "whatever"      "error"         "message"       "you"          
## [21] "get"           "(searching"    "Google"        "groups"       
## [25] "as"            "well"          "as"            "Web"          
## [29] "pages)."       "This"          "might"         "well"         
## [33] "take"          "you"           "straight"      "to"           
## [37] "fix"           "documentation" "or"            "a"            
## [41] "mailing"       "list"          "thread"        "answering"    
## [45] "your"          "question."     "Even"          "if"           
## [49] "it"            "doesn't,"     
## 
## $`4`
##  [1] "saying"     "“I"         "googled"    "on"         "the"       
##  [6] "following"  "phrase"     "but"        "didn't"     "get"       
## [11] "anything"   "that"       "looked"     "promising”" "is"        
## [16] "a"          "good"       "thing"      "to"         "do"        
## [21] "in"         "e-mail"     "or"         "news"       "postings"  
## [26] "requesting" "help,"      "if"         "only"       "because"   
## [31] "it"         "records"    "what"       "searches"   "won't"     
## [36] "help."      "It"         "will"       "also"       "help"      
## [41] "to"         "direct"     "other"      "people"     "with"      
## [46] "similar"    "problems"   "to"         "your"       "thread"    
## 
## $`5`
##  [1] "by"          "linking"     "the"         "search"      "terms"      
##  [6] "to"          "what"        "will"        "hopefully"   "be"         
## [11] "your"        "problem"     "and"         "resolution"  "thread."    
## [16] "Take"        "your"        "time."       "Do"          "not"        
## [21] "expect"      "to"          "be"          "able"        "to"         
## [26] "solve"       "a"           "complicated" "problem"     "with"       
## [31] "a"           "few"         "seconds"     "of"          "Googling."  
## [36] "Read"        "and"         "understand"  "the"         "FAQs,"      
## [41] "sit"         "back,"       "relax"       "and"         "give"       
## [46] "the"         "problem"     "some"        "thought"     "before"     
## 
## $`6`
##  [1] "approaching" "experts."    "Trust"       "us,"         "they"       
##  [6] "will"        "be"          "able"        "to"          "tell"       
## [11] "from"        "your"        "questions"   "how"         "much"       
## [16] "reading"     "and"         "thinking"    "you"         "did,"       
## [21] "and"         "will"        "be"          "more"        "willing"    
## [26] "to"          "help"        "if"          "you"         "come"       
## [31] "prepared."   "Don't"       "instantly"   "fire"        "your"       
## [36] "whole"       "arsenal"     "of"          "questions"   "just"       
## [41] "because"     "your"        "first"       "search"      "turned"     
## [46] "up"          "no"          "answers"     "(or"         "too"        
## 
## $`7`
##  [1] "many)."         "Prepare"        "your"           "question."     
##  [5] "Think"          "it"             "through."       "Hasty-sounding"
##  [9] "questions"      "get"            "hasty"          "answers,"      
## [13] "or"             "none"           "at"             "all."          
## [17] "The"            "more"           "you"            "do"            
## [21] "to"             "demonstrate"    "that"           "having"        
## [25] "put"            "thought"        "and"            "effort"        
## [29] "into"           "solving"        "your"           "problem"       
## [33] "before"         "seeking"        "help,"          "the"           
## [37] "more"           "likely"         "you"            "are"           
## [41] "to"             "actually"       "get"            "help."         
## [45] "Beware"         "of"             "asking"         "the"           
## [49] "wrong"          "question."     
## 
## $`8`
##  [1] "If"           "you"          "ask"          "one"          "that"        
##  [6] "is"           "based"        "on"           "faulty"       "assumptions,"
## [11] "J."           "Random"       "Hacker"       "is"           "quite"       
## [16] "likely"       "to"           "reply"        "with"         "a"           
## [21] "uselessly"    "literal"      "answer"       "while"        "thinking"    
## [26] "Stupid"       "question...," "and"          "hoping"       "the"         
## [31] "experience"   "of"           "getting"      "what"         "you"         
## [36] "asked"        "for"          "rather"       "than"         "what"        
## [41] "you"          "needed"       "will"         "teach"        "you"         
## [46] "a"            "lesson."     
## 
```

# mysql - MySQL查询调用其他SQL文件按顺序执行

> ID：15831961
> 
> 赞同：0
> 
> 时间：2013-04-05T10:48:43.073
> 
> 标签：mysql, sql, oracle, hibernate

所以我有一个 Java EE 应用程序并且我使用休眠。我创建了 import.sql 文件，每次启动应用程序时都会加载该文件。

我的问题是数据库很大，所以我在单独的 sql 文件中准备了启动数据，我应该按照一定的顺序加载。

**因此，在此 SQL 脚本文件中，我需要调用或导入或加载此文件夹上方文件夹中的其他 SQL 文件（路径不是问题）。**

我会很感激 mySQL 的解决方案，也许还有 oracle db （但 mysql 是更重要的 atm）。

[此解决方案不起作用](https://stackoverflow.com/questions/4029240/mysql-how-to-call-sql-script-file-from-other-sql-script-file)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:08:26.810

好的，问题是目前无法将其他 QUERY SCRIPT 文件彼此加载。它可能是带有[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)的原始数据，否则是不可能的。

# primefaces - Accordion Panel 必填字段验证问题

> ID：15831965
> 
> 赞同：1
> 
> 时间：2013-04-05T10:48:45.480
> 
> 标签：primefaces

我正在使用带有三个选项卡的手风琴面板，每个选项卡都有表单提交的必填字段。我想在执行提交操作时验证必填字段。但是验证发生在选项卡更改期间，我不想要这个功能，所以如何在表单提交期间删除它并验证整个表单。请给我一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:52:27.750

您应该将您的设置`accordionPanel`为不被动态加载：`dynamic="false"`

# android - 如何在 Android 中输出日志？

> ID：15831986
> 
> 赞同：1
> 
> 时间：2013-04-05T10:50:09.877
> 
> 标签：android, logging, output

我见过一百万种不同的日志函数，比如`log.i`, `log.v`, `log.d`.

我只是想在我的代码中有时在日志上输出一个简单的字符串，以查看是否一切正常以进行调试。

这样做的干净方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:54:10.137

您可以使用 Log 来跟踪应用程序代码中的日志。

日志 API 用于发送日志输出。

通常，使用 Log.v() Log.d() Log.i() Log.w() 和 Log.e() 方法。

**冗长（冗长）**的顺序，从最少到最多是**ERROR, WARN, INFO, DEBUG, VERBOSE**。否则或多或少它们是相同的。

除非在开发期间，否则永远不应将详细信息编译到应用程序中。

调试日志被编译，但在运行时被剥离。

始终保留错误、警告和信息日志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:57:37.253

例子

```
String TAG = "value of i = ";

for(int i = 0; i<=10 i++)
{
  Log.i(TAG, i+"");
} 
```

这将在您的 log.i 中打印 10 个数字`(info)`。

![在此处输入图像描述](https://i.stack.imgur.com/Hkjb1.png)

```
log.d 
```

用于调试

```
log.e 
```

是为了错误

等等。这是一个学习更多关于[日志的链接](http://developer.android.com/reference/android/util/Log.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T10:53:27.300

当您更改字母后，`log.`您基本上是在设置此日志记录的严重性：

```
I => Info
V => Verbose
D => Debug
E => Error 
```

看看这张图片，了解所有不同类型的日志记录：

![在此处输入图像描述](https://i.stack.imgur.com/9tXfB.jpg)

所以`.d`用于简单的调试记录，如下所示：

```
Log.d (TAG, "the message you want to out put"); 
```

虽然我总是`TAG`在上课的时候这样设置：

```
static final String TAG = YouCurrentActivity.class.getSimpleName(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T10:54:11.053

```
Log.d("tag","the string youd like"); 
```

log.d 用于 LogCat 的调试列表

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-05T11:12:26.013

@donparalias 好问题

最**简单的方法：**

```
 public static final String LOG_TAG = "Facebook";

 public void onFacebookError(FacebookError error) 
{
    Log.i(Facebook.LOG_TAG, "LoginListener onFacebookError " + error);

} 
```

您可以使用其中一项或全部：

```
Log.d("tag","string");  ::  Debug

Log.v("tag","string");  ::  Verbose

Log.e("tag","string");  ::  Error

Log.i("tag","string");  ::  Info 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T11:00:11.227

有不同类型的日志。

我 = 信息

V = 详细

D = 调试

E = 错误

例子：

```
Log.d("tag","the string youd like");

Log.v("tag","the string youd like");

Log.e("tag","the string youd like");

Log.i("tag","the string youd like"); 
```

# ios - 请如何实现这些表

> ID：15831989
> 
> 赞同：0
> 
> 时间：2013-04-05T10:50:19.973
> 
> 标签：ios, uitableview

我必须执行下表

![在此处输入图像描述](https://i.stack.imgur.com/Rz9rQ.png)

![在此处输入图像描述](https://i.stack.imgur.com/F45ov.png) 我知道我可以使用带有两个标签的自定义单元格，但是知道如何使用垂直和水平标签实现整体形状

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:05:10.443

也许设置一个常规视图控制器。然后添加一个集合视图，使单元格非常大。在该集合视图单元格的侧面添加一个标签（这将成为浅蓝色框）。然后在它旁边添加一个带有部分的表格视图。标题将是红色和深蓝色区域。

这可行，但您需要灵活地从视图控制器开始，并通过委托进行集合和表视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:10:07.923

你的问题太笼统了，无法以这种形式回答。

它是`UITableView`由 Subclass-ing 创建的自定义`UITableViewCell`。

检查这些教程和第三方控件：

1.  [水平表视图](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)
2.  [MDSpreadView演示](https://github.com/mochidev/MDSpreadViewDemo)
3.  [KKGridView](https://github.com/kolinkrewinkel/KKGridView)

# background-image - CSS背景图像不起作用 - 不显示

> ID：15831994
> 
> 赞同：0
> 
> 时间：2013-04-05T10:50:34.257
> 
> 标签：background-image, gradient

我的CSS：

```
background-image: url(/images/framework/arrow-down-small.png) no-repeat center; /* fallback */
                background-image: url(/images/framework/arrow-down-small.png) no-repeat center, -webkit-gradient(linear, left top, left bottom, from(#eee), to(#ccc)); /* Saf4+, Chrome */
                background-image: url(/images/framework/arrow-down-small.png) no-repeat center, -webkit-linear-gradient(top, #eee, #ccc); /* Chrome 10+, Saf5.1+ */
                background-image: url(/images/framework/arrow-down-small.png) no-repeat center,    -moz-linear-gradient(top, #eee, #ccc); /* FF3.6+ */
                background-image: url(/images/framework/arrow-down-small.png) no-repeat center,     -ms-linear-gradient(top, #eee, #ccc); /* IE10 */
                background-image: url(/images/framework/arrow-down-small.png) no-repeat center,      -o-linear-gradient(top, #eee, #ccc); /* Opera 11.10+ */
                background-image: url(/images/framework/arrow-down-small.png) no-repeat center,         linear-gradient(top, #eee, #ccc); /* W3C */ 
```

我想要的只是一个背景图像和一个渐变。HTML 元素是：

```
<input type="button" class="mybutton" /> 
```

但

*   背景图像根本不显示
*   渐变不存在

绝对路径是正确的，因为如果我尝试一个没有渐变的简单 background:url(...) 图像就在那里。

怎么了？

谢谢伯恩哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:55:00.300

With `no-repeat` you should skip the `-image`, try only with `background:`", such as :

```
background-image: url('image.png') no-repeat; /* Doesn't work */
background-image: url('image.png'); /* Works */ 
```

When you say you use only `background:` I think it does work because you aren't using `background-image`

And maybe you should try :

```
<input type = "image" class = "mybutton"/> 
```

Hope that helps !

EDIT : Quotes are not mandatory

```
background-image: url(image.png);
background-image: url("image.png");
background-image: url('image.png'); 
```

Is the same thing

# javascript - 覆盖jQuery插件的设置？

> ID：15831995
> 
> 赞同：0
> 
> 时间：2013-04-05T10:50:37.137
> 
> 标签：javascript, jquery

我已经构建了一个这样的插件：

```
;(function ($,window,undefined){

  ...
  ...default settings area...
  ...content area...
  ...

})(jQuery,window); 
```

但是这个插件可以有很多（！）配置。（文件配置）

所以每个配置文件都可以在一个js文件中。例子 ：

`mySettings.js :`

`var mySetings= {a:1,b:2.....}`

那么问题出在哪里：

*   设置文件必须在插件之前加载。（因此插件将能够`mySettings` 在*覆盖设置区域*中读取）

*   `mySettings`与插件本身通信的唯一方法 是通过`window`对象

问题 ：

配置可以通过 js 文件进行许多（！）设置的插件的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:06:42.163

由于我没有可使用的代码示例，因此我将为您提供一些通用的解决方案。

1.  在数组中收集设置对象并在覆盖设置区域内对其进行迭代。
2.  通过窗口公开您的插件并直接在此处附加设置。

## [示例 1](http://jsfiddle.net/mVtUd/1/)

**JS**

```
//File 1.js
window.settings = window.settings || []; 
window.settings.push({a:'11'}); 

//File2.js
window.settings = window.settings || []; 
window.settings.push({b:'22', c:'33'}); 

//File3.js
window.settings = window.settings || []; 
window.settings.push({b:'222'}); 

//Main.js File
;(function ($,window,undefined){

    var plugin = function(settings){
        var defConfig = {
            a: '1', 
            b: '2',
            c: '3'
        }; 

        var len = settings.length, i; 

        if(len){
            for(i = 0; i < len; i++){
               defConfig = $.extend(defConfig, settings[i]); 
            }
        }else{
            defConfig = $.extend(defConfig, settings); 
        }

        alert(JSON.stringify(defConfig)); 
    }; 

    var instance = new plugin(window.settings || []); 

})(jQuery,window); 
```

## [示例 2](http://jsfiddle.net/mVtUd/2/)

```
//Main.js File
;(function ($,window,undefined){

    var plugin = function(){
        var defConfig = {
            a: '1', 
            b: '2',
            c: '3'
        }; 

        this.overrideSettings = function(settings){
            var len = settings.length, i; 

            if(len){
                for(i = 0; i < len; i++){
                   defConfig = $.extend(defConfig, settings[i]); 
                }
            }else{
                defConfig = $.extend(defConfig, settings); 
            }

            alert(JSON.stringify(defConfig)); 
        }
    }; 

    window.instance = new plugin(); 

})(jQuery,window);

//File 1.js
window.instance.overrideSettings({d:'93'}); 

//File2.js
window.instance.overrideSettings({b:'22222'}); 
```