# StackOverflow 问答 15883000-15883999

# vb.net - VB.net 奇怪的文本框行为

> ID：15883001
> 
> 赞同：1
> 
> 时间：2013-04-08T15:23:04.377
> 
> 标签：vb.net, textbox, inline-editing

我的一个客户的文本框有问题。当他单击文本框中的字符串时，光标总是跳到字符串的末尾。这是一个标准的 VB.net 2005 文本框，具有多行 true。在我的开发机器上它可以正常工作。我点击一个字符串的中间，可以编辑我点击的地方。谁能提出什么问题？

他已经在终端服务器下和本地笔记本电脑上运行了该程序，并且遇到了同样的问题。

TIA，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:50:08.333

Is it possible to observe the user? For example, the user might be pressing shift-tab when they are past the text-box, and refering to that as "clicking" the text box.

You can always force behavior like:

```
Private Sub TextBox1_GotFocus(sender As Object, e As System.EventArgs) Handles TextBox1.GotFocus
    TextBox1.SelectionStart = 0
End Sub 
```

# java - 如何计算参数的数量？

> ID：15883013
> 
> 赞同：0
> 
> 时间：2013-04-08T15:23:40.907
> 
> 标签：java, arguments, command-line-arguments, argument-passing

谁能告诉我如何计算java中的参数数量。

我正在使用 log4j，下面是我正在使用的代码，但我仍然看到我的代码停留在 length =0 处。有什么帮助吗？

```
public static void main(String args[]) throws RemoteException{

  log.info("running Example1");

  String sfUrl = "https://ca...ov";
  String sfUser ="...";
  String sfPass ="...";

  log.error(args.length);

  if (args.length != 3)
  {
     log.error("Usage: teamforge-url username password");
  }
  else
  {
     sfUrl  = args[0];
     sfUser = args[1];
     sfPass = args[2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:12:40.980

如果您从 IDE 运行它，则必须在项目中配置一些运行选项，也许您只是忘记了它。只是说，因为 args.length 是正确的方法。

# c - 为 C 程序创建 MATLAB MEX 文件

> ID：15883018
> 
> 赞同：1
> 
> 时间：2013-04-08T15:23:47.857
> 
> 标签：c, matlab, mex

我是一位经验丰富的 MATLAB 用户，但对 C 和 MEX 文件完全陌生。我有一个用 C 语言编写的复杂程序，需要从 MATLAB 中调用。该程序由一个文件夹中的几十个文件组成，包括一个名为 main.c 的文件，它处理来自命令行的输入，将结果传递给其他执行实际计算的类。

通常，要从命令行安装这个程序，我会在 UNIX 命令提示符下运行 ./configure, make。然后，要运行程序，./runMyProgram -f input_file.txt -p some_parameters。该程序将一个包含数字列表的文本文件作为输入，并在命令窗口中打印一个结果表。我想为程序提供一个 MATLAB 数组（而不是 .txt 文件）并取回一个数组（而不是打印的结果表）。

我已经阅读了 The Mathworks 的 MEX 文档（我发现它相当不透明）以及其他一些“教程”，但我完全迷失了——这些示例是针对非常简单的单文件 C 程序的，并没有真正讨论如何处理更大更复杂的程序。用执行相同操作的 MEX 文件替换 main.c 文件是否足够？另外，如何在 MATLAB 中编译整个包？

我将不胜感激任何关于从哪里开始的简单英语建议，或指向任何以易于理解的方式处理该主题的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T13:11:46.637

是的。通常用 MEX 文件替换 main.c 文件就是这个过程。在您的情况下，由于您已经进行了复杂的构建设置，因此构建一个库然后构建一个单独的 mex 文件可能会更容易，该文件仅链接到该库。这比使用 mex 命令构建整个东西要容易得多。如果您从库中导出需要调用的函数，则可以从 mexFunction 中调用它。mexFunction 可以完成 mxArrays 的所有创建和读取。一个简单的示例 mexFunction 可以是，

```
#include "mex.h"
// Include headers for your library

void
mexFunction(int nlhs,mxArray *plhs[],int nrhs,const mxArray *prhs[])
{
   void* x = mxGetData(prhs[0]); // Assume one input. Check nrhs
   plhs[0] = mxCreateDoubleMatrix(10,10,mxREAL); // Create 10x10 double matrix for output
   void* y = mxGetData(plhs[0]);
   yourLibraryFunction(x, y); // Read from x and write to y. Pass sizes in if needed
} 
```

# c# - c# dataRow 访问抛出 System.ArgumentException

> ID：15883021
> 
> 赞同：-4
> 
> 时间：2013-04-08T15:24:00.293
> 
> 标签：c#, datatable

谁能解释我为什么得到`System.ArgumentException`？代码：

```
var dsResult = new SecurityYieldsData();//DataSet
var syData = (SecurityYieldsData)base.PrepareCAData(ctx, swiftMessage, caData);
SecurityYieldOptionsData optionsData = GetCaOption(ctx, syData.SecurityYields[0], message.Body);
syData.Merge(optionsData);
dsResult.Merge(syData);
var temp1 = (SecurityYieldOptionsData.SecurityYieldOptionsDataTable)manager.SecurityYieldOptions().GetTable(dsResult);
var temp2 = (SecurityYieldOptionsData.SecurityYieldOptionsDataTable)manager.SecurityYieldOptions().GetTable(dsResult).Copy();
int t1 = temp1[0].OptionNumber;//'temp1[0].OptionNumber' threw an exception of type 'System.ArgumentException'
int t1_1 = Convert.ToInt32(temp1[0]["OptionNumber"]);// Ok
int t2 = temp2[0].OptionNumber;// Ok
int t3 = optionsData.SecurityYieldOptions[0].OptionNumber;// Ok 
```

在 temp1 和 temp2 的 DataSet Visualizer 中，我可以看到数据存在，但如果 t1 我得到了例外，如果创建 temp1 的副本它工作正常（参见 temp2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:15:18.323

我找到了我的问题的答案。当您将类型化数据集合并到另一个数据集并且目标数据集不包含类型化表时，就会发生这种情况。例如：

```
var sourceDataSet = new SomeTypedDataset();
var strongTypedTable = new SomeTypedDataTable()
sourceDataSet.Tables.Add(strongTypedTable );
var targetDataSet = new SomeTypedDataset();
targetDataSet.Merge(sourceDataSet);// at that step targetDataSet will contains strongTypedTable byt this DataTable is not strong-typed 
```

如果您需要保存能力以使用 targetDataSet 中的强类型数据表，您需要添加到 targetDataSet 空类型数据表，然后调用合并

```
var targetDataSet = new SomeTypedDataset();
targetDataSet.Tables.Add(new SomeTypedDataTable());
targetDataSet.Merge(sourceDataSet); 
```

# java - 如何为不在数组列表中的项目产生错误

> ID：15883028
> 
> 赞同：0
> 
> 时间：2013-04-08T15:24:19.417
> 
> 标签：java

我正在尝试通过调用其 ID 号从数组列表中选择一个项目，如果 ID 号与数组列表中的任何项目无关，我需要一个对话框错误来显示。

我知道如何编写一个对话框，但是当我输入的 ID 号与数组列表中的任何内容都不匹配时，我不知道如何让它弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:31:52.407

```
for (Object myElement : myList) {
    if (myElement.getId() == id) {
        // handle gracefully
        break;
    }
}

// Make dialog box appear 
```

正如建议的那样，您可能希望使用[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)来提高性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:32:36.600

为了回答你的问题，我认为你正在寻找类似的东西

```
int id = getMahId();
ArrayList<?> mahList = getMahList();
if (!mahList.contains(getMahId())
    throw new IllegalArgumentException("Does not contain id"); 
```

但是，我认为您正在寻找地图，可能是[HashMap。](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)这更容易让您将 id 映射到项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:37:05.253

简单的方法：

```
List<MyClass> list = new ArrayList<MyClass>();
// add objects to list

String id; // get this from wherever
boolean found = false;
for (MyClass o : list) {
    found |= o.getId().equals(id);
} 
```

更好的方法是重写 equals() 方法来比较 id。

```
public class MyClass {
    String id;
    public boolean equals(Object o) {
        return o instanceof MyClass &&
            ((MyClass)o).getId().equals(id);
    }
    // hash code should agree with equals
    public int hashCode() {
        return id.hashCode();
    }
    // rest of class omitted
} 
```

然后检查，只需：

```
boolean found = list.contains(id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:39:11.077

```
Boolean foundObject = false;

for (MyObject myObject : myList) {
    if (id.equals(myObject.getId()) {
        foundObject = true;
        break;
    }
}

if (!foundObject) {
    //Show dialog here
} 
```

# asp.net-3.5 - Quartz.Net 是否适合运行从 ASP.Net 3.5 页面开始的长进程？

> ID：15883031
> 
> 赞同：2
> 
> 时间：2013-04-08T15:24:25.797
> 
> 标签：asp.net-3.5, quartz.net, long-running-processes

我有一个长时间运行的任务（很多小时），它是通过 Intranet 界面上的网页启动的。这是一个 ASP.Net 3.5 项目。当然，我可以延长脚本超时并让页面运行几个小时，但我不认为这是一个干净的解决方案。我在某处读到长时间运行的任务不应该是 Web 应用程序池的子项，因为它可以随时被 IIS 重置。为了寻找解决方案，我阅读了一些有关 Quartz.Net 的信息，但大多数示例都在谈论重复性工作。我想知道它是否也适用于用户要求时只运行一次的任务。还是有其他更好的解决方案？

此外，如果 Quartz.Net 是一个不错的选择，它应该作为 Windows 服务运行，还是应该由 ASP.Net 网站使用 Global.asax 生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:58:07.323

Quartz.net 在这种情况下工作得很好。你在 Quartz.net 上安排一个一次性的工作，让它运行多久就运行多久。在工作中，这正是我们开展许多工作的方式。

不过，您应该将 Quartz.Net 设置为 Windows 服务。IIS 回收 Web 应用程序，如果您在 Web 应用程序中运行 Quartz.net，它将与您的 Web 应用程序一起被 IIS 回收。

# nsis - NSIS中页面的自定义功能消失了

> ID：15883038
> 
> 赞同：0
> 
> 时间：2013-04-08T15:24:43.967
> 
> 标签：nsis

我有以下脚本：

```
!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_COMPONENTS
!define MUI_PAGE_CUSTOMFUNCTION_PRE ComponentPost
!insertmacro MUI_PAGE_DIRECTORY
!define MUI_PAGE_CUSTOMFUNCTION_SHOW  DirectoryShow
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE DirectoryLeave
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH 
```

不幸的是，在第一个目录选择对话框之后，目录页面返回到默认值，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:22:23.493

当使用多个目录页面时，您通常还希望将所选路径存储在不同的变量中：

```
Var SomeOtherFolder
!define MUI_DIRECTORYPAGE_VARIABLE $SomeOtherFolder
!insertmacro MUI_PAGE_DIRECTORY
...
Section
SetOutPath $SomeOtherFolder
File /r "c:\otherfiles"
Section 
```

所有这些信息都可以在[Modern UI 自述文件](http://nsis.sourceforge.net/Docs/Modern%20UI%202/Readme.html)中找到...

# sharepoint - SP2007 工作流程：按标题查找 XXX 的 XXXX 属性？

> ID：15883040
> 
> 赞同：0
> 
> 时间：2013-04-08T15:24:49.527
> 
> 标签：sharepoint, sharepoint-2007, sharepoint-designer, sharepoint-workflow

有谁知道是否有办法使用`Look site user property`用户的标题而不是他们的 NTLogin/用户名进行搜索？

例子： `Lookup JobTitle property for John Smith, store in Variable: JobTitle`

我收到以下错误：`System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. Parameter name: User not found.`

有没有其他方法可以格式化这个请求，仍然允许我使用用户的标题而不是他们的用户名？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:03:46.507

我能够通过使用“个人或组”列来实现这一点。我使用工作流使用用户标题更新“人员或组”列，然后使用“人员或组”列在工作流中执行属性查找。

# java - PAAS 是否解决了 BlazeDS 的可扩展性问题？

> ID：15883044
> 
> 赞同：2
> 
> 时间：2013-04-08T15:25:04.403
> 
> 标签：java, apache-flex, blazeds, paas

我们正在开发一个以 flex 作为客户端，java 作为服务器的 Flash 游戏。对于客户端和服务器之间的通信，我们计划使用 BlazeDS。我们希望数十万（可能是数百万）玩家同时玩游戏，但我们发现由于 BlazeDS 对它可以处理的客户端数量的限制，我们在扩展方面会遇到问题。我们买不起 LCDS，听说 GraniteDS 也有局限性（高于 BlazeDS 但仍然不够）。

考虑到 Blazeds 的限制，将我们的应用程序部署到诸如 Amazon Elastic Beanstalk 之类的 PAAS 会解决这个扩展问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:34:15.437

快速总结一下，使用 BlazeDS，您有每台服务器数百个连接的限制。使用 GraniteDS，根据您的用例、有效负载大小等，每个服务器的连接数限制为数千，可能数万（实际上，实际限制是应用服务器异步 I/O 支持的限制， tomcat，码头或其他）。使用集群（在 PaaS 或任何地方）会给你带来更多的数字（虽然不确定你能达到数百万）。

# solr - 在 Solr 或 ElasticSearch（尤其是 websolr 或 bonsai.io）中使用根扩展器进行邻近搜索短语？

> ID：15883048
> 
> 赞同：2
> 
> 时间：2013-04-08T15:25:09.583
> 
> 标签：solr, elasticsearch, wildcard, proximity, phrase

我正在尝试为大型项目选择搜索工具，我很想知道 Solr 或 ElasticSearch 是否支持此用例。

我的客户有兴趣进行相对复杂的布尔搜索。必须进行的一项搜索是能够对带有词根扩展符的短语进行邻近搜索。

例如，假设用户搜索包含以下短语的文档：“可爱的狗被邪恶的浣熊攻击”

我希望用户能够在“dog”的 5 个单词内搜索“evil rac*”并返回包含上述句子的文档。理想情况下，查询应该类似于：

（“邪恶的 rac*”狗）~5

到目前为止，我发现的唯一可以做我正在寻找的搜索工具是 dtSearch。dtSearch 的查询将是带有 5 只狗的“evil rac*”，这很好。我宁愿使用 Solr 或 ElasticSearch 之类的开源工具（尤其是 websolr 或 bonsai.io 之类的托管解决方案）。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:25:28.553

使用自定义查询解析器在技术上当然可以做到这一点，但是 solr 中的默认、dismax 等解析器似乎不支持这一点。关于此有一个古老且未解决的问题：[https](https://issues.apache.org/jira/browse/SOLR-1604) ://issues.apache.org/jira/browse/SOLR-1604 。

ElasticSearch 只支持 JSON 查询构建器，但似乎短语式查询支持仅适用于“span_term”，它们只是简单的单词。

有人说默认查询解析器在不久的将来会变得更加聪明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:12:20.900

在技​​术上绝对可行，但在 Lucene 中尚未得到支持。Lucene 中存在一些支持“复杂短语”行为的未解决问题，这似乎针对 Lucene 4.3：

> [LUCENE-1486](https://issues.apache.org/jira/browse/LUCENE-1486) — 默认 QueryParser 的扩展，它覆盖 PhraseQueries 的解析以允许更复杂的语法，例如短语查询中的通配符。

我没有在他们的示例中看到您的特定查询结构，但这绝对比今天可用的更接近。

回顾一下：理论上可行，截至 2013 年 4 月和 Lucene 4.2.1 的语法不支持。

（向我的商业伙伴凯尔（Kyle）致敬，寻求帮助。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T17:46:06.533

这是可能的，但...

1) 首先，检查[http://wiki.apache.org/solr/SurroundQueryParser](http://wiki.apache.org/solr/SurroundQueryParser) ( [http://searchhub.org/2009/02/22/exploring-query-parsers/](http://searchhub.org/2009/02/22/exploring-query-parsers/) ) 是否有环绕查询解析器。这几乎正​​是您想要的。然而，人们声称（至少在某些地方）它支持短语查询，但事实并非如此（目前）。

2）所以你必须实现短语接近。一个（讨厌的）黑客是更新 DistanceQuery::getSpanNearQuery （在 lucene/queryparser/.../DistanceQuery.java 中的 solr 4.2.1 中的第 78 行）

```
while (sqi.hasNext()) {
  SpanNearClauseFactory sncf = new SpanNearClauseFactory(reader, fieldName, qf);

  // HACK starts here 
  DistanceSubQuery dsq = ((DistanceSubQuery)sqi.next());
  try {
    if ( ((SrndTermQuery)dsq).getTermText().contains( " " ) ) {
      String term_text = ((SrndTermQuery)dsq).getTermText();
      String[] tokens = term_text.split("\\s+");
      SpanQuery[] span_queries = new SpanQuery[tokens.length];
      for ( int i = 0; i < tokens.length; ++i ) {
        span_queries[i] = new SpanTermQuery( new Term(fieldName, tokens[i]) );
      }
      spanClauses[qi] = new SpanNearQuery( span_queries, 0, true);
      qi++;
      continue;
    }
  }catch( Exception ex ){
  }
  // HACK ends here 

  dsq.addSpanQueries(sncf); 
```

3) 请注意，没有对数据进行预处理，因此如果您使用词干提取，则必须搜索准确的单词，例如 select?q={!surround df=text}"we defin" 11w "descend" will match " "" 我们定义了一组按降序排列的单词 """

# windows-phone-8 - 如何使用来自后台代理的本地生成的图像进行计划的 Tile 更新？

> ID：15883049
> 
> 赞同：1
> 
> 时间：2013-04-08T13:02:04.300
> 
> 标签：windows-phone-8

我的情况如下：

后台进程开始后，我想使用**Deployment.Current.Dispatcher**生成数十个图块背景图像，然后我想为生成的每个背景安排图块更新。

我将所有生成的图像存储在**/Shared/ShellContent/**中，并通过以下方式调用**ShellTileSchedule ：**

```
var shellTileSchedule1 = new ShellTileSchedule
{
    StartTime = DateTime.Now.AddMinutes(1),
    RemoteImageUri = new Uri("http://212.120.12.197/wus/shell1.jpg")
};
shellTileSchedule1.Start(); 
```

但是，后台进程似乎不支持**ShellTileSchedule**，或者至少我无法在这里找到支持：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj662941% 28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662941%28v=vs.105%29.aspx)

任何提示或想法我该如何解决我的问题？定期平铺**更新（ShellTileData）**不是一个选项，因为它每 30 分钟只运行一次 - 我需要的是在 30 分钟内多次自定义平铺更新。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:45:49.633

要比允许的更新频率更高，`ShellTileSchedule`您必须将生成和更改磁贴图像外包给远程服务，并在适当时使用磁贴推送通知来更新磁贴。

[这](http://blogs.msdn.com/b/jasonz/archive/2011/01/03/tutorial-dynamic-tile-push-notification-for-windows-phone-7.aspx)是一个很好的演练。

# ruby - 我需要红宝石方面的帮助

> ID：15883056
> 
> 赞同：-2
> 
> 时间：2013-04-08T15:25:36.237
> 
> 标签：ruby

1.  我正在制作一个软件，但我现在不想发布它的源代码，因为我不希望人们窃取我的辛勤工作。我不粗鲁或类似的东西。下面是我正在制作的程序的示例。

> ```
> print "Username : "
> name = gets.chomp
> 
> print "Password : "
> pass = gets.chomp
> 
> if name =="user" and pass=="pa$$word"
> print "Hello"
> 
> else print "Error, incorrect details" 
> ```

现在这是 ruby​​ 中最简单的登录表单，但是这里发生的不好的情况是，每当用户插入错误信息时，程序就会简单地关闭，而我想要发生的是我想让程序询问用户正确的信息，直到正确的信息是插入。

1.  你是windows用户吗？知道如何在批处理文件中编程吗？例子

    回声你好世界cls

暂停

所以这是红宝石的代码

```
a. print "Command : "
b. command = gets.chomp

c. if command == "Hello"

d. print "Hi, how are you?"

e. elsif command == "help"

f. print "Say hi to me, chat with me" 
```

现在我想要的也和第一个问题一样

详细信息：在用户输入“嗨”后，程序就关闭了，但我想在这里让程序要求再次进入第 a 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:34:36.170

使用`while`循环不断地要求输入并检查用户的提交，直到输入有效的结果。

```
username = nil

while username.nil?
  puts "What is your username?"
  entered_username = gets.chomp

  if entered_username == "Bob"
    username = entered_username
  end
end

puts "Thanks!" 
```

在终端上运行时，这会产生：

```
What is your username?
sdf
What is your username?
dsfsd
What is your username?
sdfsd
What is your username?
sdfds
What is your username?
sdf
What is your username?
Bob
Thanks! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:36:40.283

1.

```
until (print "Username : "; gets.chomp == "user") and
      (print "Password : "; gets.chomp == "pa$$word")
  puts "Error, incorrect details"
end
puts "Hello" 
```

2.

```
loop do
  print "Command : "
  case gets.chomp
  when "Hello" then print "Hi, how are you?"; break
  when "help" then print "Say hi to me, chat with me"; break
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:05:27.753

这是简单的方法:) 如果有人遇到我遇到的问题，那么你要做的就是这个。“while”循环

```
number = 1          # Value we will give for a string named "number" 
while number < 10   # The program will create a loop until the value 
                    # of the string named "number" will be greater than 10

    puts "hello"

                    # So what we need to do now is to end the loop otherwise
                    # it will continue on forever
                    # So how do we do it? 
                    # We will make the ruby run a script that will increase
                    # the string named "number"'s value every time we run the loop

    number = number + 1
end                 # Now what happens is every time we run the code all the program
                    # will do is print "hello" and add number 1 to the string "number". 
                    # It will continue to print out "hello" until the string is
                    # greater than 10 
```

# ios - 在 iPad 上每小时运行一项任务

> ID：15883058
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:25:40.840
> 
> 标签：ios, ipad, cocoa-touch

我有一堆（1500 多台）内部 iPad，仅限 WiFi，带有 Enterprise Developer，我想在其中一个上运行任务，按此顺序首选

A.) 每小时 B.) 每次他们连接到新的无线设备时

由于我有企业开发人员，我不需要应用商店的批准。

我已经阅读了几种执行后台任务的不同方法，但正在尝试找到正确的方法。

A.) 假装是一个 VoIP 应用程序。该应用程序将在启动时启动并保持在后台，但用户可以关闭它。如何强制它重新打开？

B.) 播放一个空的声音文件。与上述相同的问题并且在启动时没有启动？

C.) 位置发生重大变化。不知道怎么编码。当他们更改无线网络时应该运行任务吗？即使它还没有开放？它可以在没有 GPS 和蜂窝网络的情况下工作吗？阿拉[http://preyproject.com/blog/2013/01/how-does-prey-work-on-iphone-ipad](http://preyproject.com/blog/2013/01/how-does-prey-work-on-iphone-ipad)

[尽管http://orbicule.blogspot.com/2012/12/discontinuing-undercover-ios.html](http://orbicule.blogspot.com/2012/12/discontinuing-undercover-ios.html)另一个应用程序有问题

想法？示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:33:02.050

应用程序在后台？

这对于内部应用程序应该是可能的。

我猜应该可以使用 Apple 的“Reachability”示例更改 wi-fi。[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

我会选择#C（重大的位置变化）。可以使用 CLLocationManager 框架来实现

```
[[CLLocationManager sharedLocationManager] startMonitoringSignificantLocationChanges] 
```

# c# - ObservableCollection 与 INotifyPropertyChanged 成 DatagridComboboxColumn 绑定

> ID：15883062
> 
> 赞同：0
> 
> 时间：2013-04-08T15:25:54.190
> 
> 标签：c#, wpf, data-binding, datagrid, inotifypropertychanged

我的小项目现在看起来完全不同了。现在我有了 ObservableCollection `PackagesList`，其中包含我想与整个 DataGrid（通过绑定路径）和 ObservableCollection 绑定的数据，我`DestinationItememsSource`在其中存储 DataGridComboboxColumn 的案例（作为 ItemsSourceBinding）。DatagridComboboxColumn 中的 SelectedItem 属性是来自的一个值`PackageInfo`（它是 c 的一种`DestinationNames`情况）。绑定 DatagridTextBoxColumns 是可以的。

XAML：

```
<Window x:Class="test01.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="300" Width="400" Loaded="Window_Loaded">
    <Grid>
        <Border x:Name="mainBorder" Margin="20">
            <DataGrid x:Name="mainDataGrid" x:Uid="mainDataGrid" AutoGenerateColumns="False"
                       AlternationCount="2" SelectionMode="Single" HorizontalAlignment="Stretch">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Path=id}"
                                    Header="ID" Width="Auto" IsReadOnly="True"/>
                    <DataGridTextColumn Binding="{Binding Path=name}"
                                    Header="Name" Width="Auto" IsReadOnly="True"/>
                    <DataGridTextColumn Binding="{Binding Path=quantity}"
                                    Header="Quantity" Width="Auto" IsReadOnly="True"/>
                    <DataGridTextColumn Binding="{Binding Path=price}"
                                    Header="Price" Width="Auto" IsReadOnly="True"/>
                    <DataGridComboBoxColumn ItemsSource="{Binding DestinationItemsSource}" 
                                                    SelectedItemBinding="{Binding Path=destination, UpdateSourceTrigger=PropertyChanged}"
                                                    Header="Destination" Width="Auto"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</Window> 
```

C＃：

```
public class PackageInfo
    {
        public int id { get; set; }
        public string name { get; set; }
        public int quantity { get; set; }
        public double price { get; set; }
        public string destination { get; set; }
    }

    public class DestinationNames : INotifyPropertyChanged
    {
        public string name { get; set; }

        public event PropertyChangedEventHandler PropertyChanged;

        public DestinationNames(string value)
        {
            this.name = value;
        }

        public string DestinationName
        {
            get { return name; }
            set
            {
                name = value;
                OnPropertyChanged("DestinationName");
            }
        }

        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
    }

    public partial class MainWindow : Window
    {
        public ObservableCollection<DestinationNames> DestinationItememsSource { get; set; }
        public ObservableCollection<PackageInfo> PackagesList { get; set; }

        public MainWindow()
        {
            InitializeComponent();
        }

        public void Window_Loaded(object sender, RoutedEventArgs e)
        {
            LoadPackages();
        }

        public void LoadPackages()
        {
            DestinationItememsSource = new ObservableCollection<DestinationNames>();
            DestinationItememsSource.Add(new DestinationNames("London"));
            DestinationItememsSource.Add(new DestinationNames("Plymouth"));
            DestinationItememsSource.Add(new DestinationNames("Birmingham"));
            DestinationItememsSource.Add(new DestinationNames("Cambridge"));

            PackagesList = new ObservableCollection<PackageInfo>();
            PackagesList.Add(new PackageInfo { id = 1, name = "Potato", quantity = 3, price = 2.2, destination = "London" });
            PackagesList.Add(new PackageInfo { id = 2, name = "Tomato", quantity = 5, price = 3.8, destination = "Plymouth" });
            PackagesList.Add(new PackageInfo { id = 3, name = "Carrot", quantity = 1, price = 5.1, destination = "London" });
            PackagesList.Add(new PackageInfo { id = 4, name = "Pea", quantity = 6, price = 1.8, destination = "Plymouth" });
            PackagesList.Add(new PackageInfo { id = 5, name = "Bean", quantity = 2, price = 1.5, destination = "Birmingham" });
            mainDataGrid.ItemsSource = PackagesList;
        }
    } 
```

如何正确绑定此 DatagridComboboxColumn？我应该使用 INotifyCollectionChanged 吗？如果我想让 datagrid 中的所有数据自动与 ObservableCollection 同步怎么办？请帮忙举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:38:45.077

您与 DestinationItememsSource 的绑定不起作用，因为它不是`PackageInfo`对象的一部分。您也无法通过 FindAncestor 或 ElementName-binding 绑定到 Windows DataContext，因为 DataGrid-Columns 不会添加到可视化树中。

我能想到的一种解决方案是使用[CollectionViewSource](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/UseCollectionViewSourcetosortandgroupdatainXAML.htm)：

```
<Window.Resources>
    <CollectionViewSource Source="{Binding RelativeSource={RelativeSource Self}, Path=DestinationItememsSource}" x:Key="destinations">
        <!--here you can also add Group and SortDescriptions-->
    </CollectionViewSource>
</Window.Resources>
<DataGridComboBoxColumn ItemsSource="{Binding Source={StaticResource ResourceKey=destinations}}".../> 
```

我无法在 atm 测试它，因为我仍在下载 VS 2012。^^

另一种方法是简单地将目的地列表添加到您的 PackageInfo 对象（但这会导致大量冗余）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:10:03.130

让 PackageInfo 实现 INotifyPropertyChanged。

ObservableCollection 自动实现 INotifyCollectionChanged。

您将需要添加 List 或 ObservableCollection Destinations 作为 PackageInfo 的属性
NO 类 DestinationNames
只是一个类 DestinationName

# python - Python：TypeError：“unicode”对象不可调用，与 ugettext 冲突？

> ID：15883063
> 
> 赞同：1
> 
> 时间：2013-04-08T15:25:57.377
> 
> 标签：python, django, unicode, typeerror

我正在使用[该类](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/)`GeoDjango`的示例。我的麻烦是我无法打印出所选国家的名称。当我尝试执行[`WorldBorder`](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/)

```
from django.utils.translation import ugettext_lazy as _
...
location = fromstr(... , srid=4326)
country = WorldBorder.objects.get(mpoly__intersects=location)
print _('User country determined to %s') %country.name 
```

我收到错误消息：

```
Python: TypeError: 'unicode' object is not callable 
```

当我删除 时`ugettext_lazy`，一切正常。**如何保留翻译选项并使字符串正常工作？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-11T13:23:39.233

看起来您正在使用 Python shell。在那里， _ 将取最后一个表达式的值。所以 _ 最终成为第三行之后的 WorldBorder 实例。为避免此问题，当您在 shell 中使用 translate 时，请将 ugettext_lazy 别名为“_”以外的其他内容。

# c# - 如何在代码隐藏中向面板添加文字，以创建类似仪表板的布局网格？

> ID：15883064
> 
> 赞同：0
> 
> 时间：2013-04-08T15:26:01.157
> 
> 标签：c#, asp.net, highcharts

目前这是有效的：

```
<div id="DashboardDiv" runat="server">
        <asp:Panel ID="pnlA" runat="server" CssClass="Widget" Width ="900">
            <asp:Literal ID="ltrChart" runat="server"></asp:Literal>
        </asp:Panel>
        <asp:Panel ID="pnlB" runat="server" CssClass="Widget" Width ="900">
            <asp:Literal ID="ltrChart2" runat="server"></asp:Literal>
        </asp:Panel>
</div> 
```

我需要使用文字，以便在代码隐藏中使用 dotNet Highcharts。

然而，问题是我正在创建一个显示多个小部件的仪表板。现在我的测试用例由 1 个小部件组成，但我想最终将其扩展到不确定数量的小部件。

我觉得我需要在运行时根据用户想要的小部件数量创建面板（以及添加到这些面板的文字）。我该怎么做呢？

我试过这样的事情：

```
protected static List<Panel> panelList = new List<Panel>();

Panel myChildPanel = new Panel();
myChildPanel.Width = 900;
panelList.Add(myChildPanel);
DashboardDiv.Controls.Add(myChildPanel); 
```

然后将文字添加到此面板列表中，添加到指定面板：

```
Literal ltrChart = new Literal();
ltrChart.Text = chart.ToHtmlString();
panelList[counter].Controls.Add(ltrChart); 
```

这感觉像是一种丑陋的做事方式。 **基本上我正在寻找这个：**

如何在代码隐藏中创建能够包含文字的面板/区域/区域，以便我可以创建一个充满小部件外观的仪表板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:42:23.733

您是否尝试过使用 asp 占位符？我相信他们会帮助你实现你想做的事情。它们允许您在其中放置和控制类型，并且您可以根据特定条件隐藏和显示占位符。例如

```
<asp:Placeholder runat="server" visible="<%=CMSContext.CurrentUserIsAuthenticated()%> >
<div class="faq-listing itmList faq odd">
<h2 class="heading"> Home</h2>
<asp:Repeater ID="rptSubFaq" runat="server">
</asp:Repeater>
</div>
</asp:Placeholder> 
```

# servlets - 是否可以根本不使用会话，而只依赖于servetcontext、隐藏的表单字段等？

> ID：15883068
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:26:12.383
> 
> 标签：servlets, cookies, servletcontextlistener

看到使用 session 和 cookies 是如此不安全，是否可以安全地使用 servlet 上下文变量和隐藏表单字段，url 重写来实现与 session 相同的事情？

但它会同样安全和方便吗？为什么不使用这种方法？

我只是想避免饼干！另外，如果我将用户详细信息保存在 servlet 上下文变量中，它会不会与 cookie 一样工作，而只是在服务器端？这就是最终使用cookies的原因，它们是客户端吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:16:33.957

不，Cookie 与 Servlet 上下文不同。ServletContext 每个应用程序都是单例的。不是每个用户。您应该避免将 ServletContext 用于用户特定信息，因为您还需要处理用户生命周期，例如在用户空闲时删除用户信息。

如果您不想使用 Cookie，会话跟踪的替代方法是：

*   网址改写
*   隐藏的表单域

但是您可以借助以下属性使 Cookie 得到保护：

*   **httponly**：在受支持的浏览器上，仅在传输 HTTP（或 HTTPS）请求时才会使用 HttpOnly 会话 cookie，从而限制来自其他非 HTTP API（例如 JavaScript）的访问。
*   **secure ：安全**cookie 启用了安全属性，并且仅通过 HTTPS 使用，确保 cookie 在从客户端传输到服务器时始终加密。
*   **域**：它们告诉浏览器 cookie 应该只发送回给定域的服务器。
*   **Path**：他们告诉浏览器cookies应该只发送回给定路径的服务器。

# c# - SimpleInjector container.RegisterSingleOpenGeneric 不返回相同的实例

> ID：15883069
> 
> 赞同：2
> 
> 时间：2013-04-08T15:26:18.083
> 
> 标签：c#, inversion-of-control, simple-injector

我已经注册了一个“开放通用类型”，如下所示：

```
_container.RegisterSingleOpenGeneric(
    typeof(StandardCacheItemByKeyRetriever<>),
    typeof(StandardCacheItemByKeyRetriever<>)); 
```

然后我尝试按照以下方式检索实例两次：

```
var t1 = _container.GetInstance<StandardCacheItemByKeyRetriever<SettingData>>();
var t2 = _container.GetInstance<StandardCacheItemByKeyRetriever<SettingData>>(); 
```

不`t1`应该等于`t2`，考虑到我正在使用`RegisterSingleOpenGeneric`?

在下面， b 等于`false`- 如果它相同，它应该是正确的，对吧？

```
bool b = t1 == t2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:18:04.210

**更新：** 这是一个错误，现已在[Simple Injector 2.2](https://nuget.org/packages/SimpleInjector/)中修复。

不幸的是，您偶然发现了 Simple Injector 的一个错误。不能正确处理您的`RegisterSingleOpenGeneric`情况（服务类型等于实现类型）。这导致注册被完全跳过，使容器回退到其默认行为，即创建具有瞬态生活方式的具体类型。

在我们说话的时候，我正在修复错误。很快就会有新版本（2.2）。当它发布时，我会更新这个答案。

同时，作为一种解决方法，您可以做的是通过接口注册类型，例如：

```
_container.RegisterSingleOpenGeneric(
    typeof(ICacheItemByKeyRetriever<>),
    typeof(StandardCacheItemByKeyRetriever<>)); 
```

另一种解决方法（不太愉快）是手动进行所有注册：

```
_container.RegisterSingle<StandardCacheItemByKeyRetriever<SettingData>>();
_container.RegisterSingle<StandardCacheItemByKeyRetriever<SomeData>>();
_container.RegisterSingle<StandardCacheItemByKeyRetriever<OtherData>>();
// etc 
```

很抱歉你偶然发现了这个。

# curl - 亚马逊MWS提交提要

> ID：15883072
> 
> 赞同：0
> 
> 时间：2013-04-08T15:26:24.990
> 
> 标签：curl, amazon-mws

我正在尝试使用 SubmitFeed 操作更新数量。这个事情谁有经验？我收到的错误是：“必须存在操作或操作查询参数”，但查询字符串中确实有“操作 = SubmitFeed”。

我编写了其他四个可以完美运行的函数（RequestReport、GetReportRequestList、GetReport 和 GetFeedSubmissionList）。我想我缺少一些 cURL 配置选项来发布文件。

卷曲选项：

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HTTPHEADER => array(
    'Content-Type: application/x-www-form-urlencoded',
    'Content-MD5: '. $md5,
    'Transfer-Encoding: chunked',
)),
curl_setopt($ch, CURLINFO_HEADER_OUT => true);
curl_setopt($ch, CURLOPT_UPLOAD => true);
curl_setopt($ch, CURLOPT_PROTOCOLS => CURLPROTO_HTTPS);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt($ch, CURLOPT_PORT , 443);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, implode('&', $url_parts)); 
```

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:12:35.977

为了进行`SubmitFeed`呼叫，您必须将`Content-Type: text/xml`XML 提要用作 CURLOPT_POSTFIELDS。您的其他选项字段必须进入 URL，就好像这是`GET`：

```
$ch = curl_init($url_with_fields);                   <-- change 1
curl_setopt($ch, CURLOPT_HTTPHEADER => array(
    'Content-Type: text/xml',                        <-- change 2
    'Content-MD5: '. $md5,
    'Transfer-Encoding: chunked',
)),
curl_setopt($ch, CURLINFO_HEADER_OUT => true);
curl_setopt($ch, CURLOPT_UPLOAD => true);
curl_setopt($ch, CURLOPT_PROTOCOLS => CURLPROTO_HTTPS);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt($ch, CURLOPT_PORT , 443);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xmldata);      <-- change 3 
```

请注意，这种类型的调用*也*适用于 RequestReport、GetReportRequestList、GetReport 和 GetFeedSubmissionList：在这些情况下，只需将 $xmldata 留空。

# ruby-on-rails - 为用户隐藏项目

> ID：15883073
> 
> 赞同：0
> 
> 时间：2013-04-08T15:26:25.600
> 
> 标签：ruby-on-rails

我有两个模型：

```
model User id:integer name:string

model Item id:integer name:string 
```

执行功能的最佳方法是什么：

所有用户都可以查看所有项目。当前用户可以“隐藏项目”。然后该项目不显示，但显示给没有隐藏项目的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:31:44.323

您需要一个辅助模型来处理单个项目的“隐藏”逻辑。以下代码说明了如何使用子查询执行此操作：

```
class HiddenItem < ActiveRecord::Base
  belongs_to :user
  belongs_to :item      
end

class Item < ActiveRecord::Base
  has_many :hidden_items

  def self.visible_for_user(user)
    subquery = user.hidden_items.select("hidden_items.item_id").to_sql
    where("items.id NOT IN (#{subquery})")
  end
end

class User < ActiveRecord::Base
  has_many :hidden_items

  def visible_items
    Item.visible_for_user(self)
  end      
end 
```

现在您可以获取用户的非隐藏项：

```
user = User.find(1)
user.visible_items 
```

如果你想隐藏一个项目，你可以这样做：

```
user.hidden_items.create(item_id: item.id) 
```

# php - 如何将计数器值从javascript发布到数据库

> ID：15883088
> 
> 赞同：0
> 
> 时间：2013-04-08T15:27:08.163
> 
> 标签：php, javascript, mysql

我有一个 java 脚本函数我想将计数器的值发布到我的数据库中...怎么做...这是一个在单击时创建 2 个 texbox 和 1 个选择框的函数...但是当我应用另一个输入时标记以获取和发布计数器值另一个输入文本框正在被重新评估...我不想要这个我只想在单击提交按钮时将总值发布到计数器

```
<script>
 var counter=1;
    function generateRow() {
    var count="<font color='red'>"+counter+"</font>";
   var temp ="<p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='stop"+counter+"' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='timing"+counter+"' placeholder='Timing'></input></div>&nbsp;<div class='_25'><select id='ampm"+counter+"' name='ampm"+counter+"'><option>a.m</option><option>p.m</option></select>  </div>";

var newdiv = document.createElement('div');
newdiv.innerHTML = temp + count;

var yourDiv = document.getElementById('div');
yourDiv.appendChild(newdiv);
counter++;
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:33:12.757

我能想到的绝对最基本的方法是：

在页面的某处添加 iframe：

```
<iframe id="iframe"></iframe> 
```

创建一个php文件**counter.php**

```
<?php

$counter = (int) $_GET['counter'];

$query = mysql_query('INSERT INTO table (counter) VALUES (' . $counter . ')');
// OR YOUR OWN QUERY TO DO THIS

?> 
```

并将以下 javascript 代码添加到您的函数中：

```
document.getElementById('iframe').src = 'counter.php?counter=' + counter; 
```

显然，您可以通过 ajax 将其做得更复杂并读取 json 响应等，但在最基本的层面上，这将适合您。基本上诀窍是，您将 iframe 源设置为`counter.php`并在 get 参数中传递计数器。当 iframe 源更改时，它会自动加载，因此服务器将接收计数器参数并对其进行处理。

您可以添加`display:none`到 iframe 以在视觉上隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:29:24.077

鉴于问题的标签：

向 PHP 处理的 URL发出 HTTP 请求（可能[使用 XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)），该 URL 读取数据（可能来自[`$_POST`](http://php.net/manual/en/reserved.variables.post.php)）并使用[PDO API](http://php.net/pdo)使用该数据进行 SQL 查询。

# ruby-on-rails - Rails 网站上的简单 facebook 用户提要

> ID：15883089
> 
> 赞同：1
> 
> 时间：2013-04-08T15:27:10.980
> 
> 标签：ruby-on-rails, facebook

我已经搜索了很多帖子，但没有找到我要找的确切内容。只是好奇是否有一种相对简单的方法可以将一个业务页面的状态更新发布到 rails 站点。

我不需要它做任何花哨的事情，只需列出单个配置文件中的最后几个状态。

有宝石吗？

谢谢。

# ajax - AJAX 突然无法在 Wordpress 网站中运行

> ID：15883093
> 
> 赞同：0
> 
> 时间：2013-04-08T15:27:32.607
> 
> 标签：ajax, wordpress

到目前为止，我在 11 月建立的一个网站一直在使用 AJAX 在 Wordpress 的单个页面上提取内容。在页面初始加载并出现静态内容后，当用户单击列表中的名称时，静态内容将替换为通过 AJAX 从目录中提取的内容。大约两周前，当用户单击该列表中的名称时，静态内容会消失，但不会被替换。AJAX 好像坏了……？这是一个 Wordpress 安装。我具有在相同性质的“姐妹网站”上成功运行的完全相同的功能。

该页面可以在这里找到：[http ://www.cleanse-nyc.com/?page_id=98](http://www.cleanse-nyc.com/?page_id=98)

这是代码：

```
<div id="teamMenu">
    <ul id="wCoach">
        <h2>CLEANSE Wellness Coaches</h2>

        <li class="hidden"><a href="#" intPage="http://www.cleanse-nyc.com/wp-content/themes/cleanse/FernandadelaPuente.php">Fernanda de la Puente</a></li>

    </ul> 
```

通过单击锚标记中的名称，相关内容应使用 AJAX 显示。

我已经尝试使用开发工具来解决这个问题，但我没有看到任何具体的问题。

有人对此有经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:31:00.093

如果您阅读指南： http: [//jquerytools.org/documentation/performance.html](http://jquerytools.org/documentation/performance.html) ，它将说明您需要使用完整（不包括 jquery）或别名 $

> GET [http://cleansenyc.s3.amazonaws.com/2012/08/cleanse-team-bkg-pvt.jpg](http://cleansenyc.s3.amazonaws.com/2012/08/cleanse-team-bkg-pvt.jpg) 404（未找到）www.cleanse-nyc.com:75 XHR 完成加载：“ [http://www .cleanse-nyc.com/wp-content/themes/cleanse/AndreaMitchell.php](http://www.cleanse-nyc.com/wp-content/themes/cleanse/AndreaMitchell.php) ”。jquery.tools.min.js:38 Uncaught TypeError: 对象 [object Object] 的属性“$”不是函数

现在 jquery 工具正在使用 $. 我建议您更新该行

```
var $j = jQuery.noConflict(); 
```

至

```
var $ = jQuery.noConflict(); 
```

* * *

或者，更好的解决方法是使用捆绑的 jquery。有一个 /full 会加载工具，并自动导入 jquery.js

例如当前版本

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script> 
```

将导入 jquery 和 jquery 工具。

# javascript - 正则表达式允许单词字符、括号、空格和连字符

> ID：15883097
> 
> 赞同：3
> 
> 时间：2013-04-08T15:27:45.897
> 
> 标签：javascript, regex

我正在尝试在 javascript 中使用正则表达式验证字符串。字符串可以有：

*   单词字符
*   括弧
*   空间
*   连字符 (-)
*   3到50长度

这是我的尝试：

```
function validate(value, regex) {
    return value.toString().match(regex);
}

validate(someString, '^[\w\s/-/(/)]{3,50}$'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:29:41.153

像这样写你的验证器

```
function validate(value, re) {
  return re.test(value.toString());
} 
```

并使用这个正则表达式

```
/^[\w() -]{3,50}$/ 
```

一些测试

```
// spaces
validate("hello world yay spaces", /^[\w() -]{3,50}$/);
true

// too short
validate("ab", /^[\w() -]{3,50}$/);
false

// too long
validate("this is just too long we need it to be shorter than this, ok?", /^[\w() -]{3,50}$/);
false

// invalid characters
validate("you're not allowed to use crazy $ymbols", /^[\w() -]{3,50}$/);
false

// parentheses are ok
validate("(but you can use parentheses)", /^[\w() -]{3,50}$/);
true

// and hyphens too
validate("- and hyphens too", /^[\w() -]{3,50}$/);
true 
```

# yii - 通过 AJAX 使用 CGridView 时如何避免渲染整个页面

> ID：15883100
> 
> 赞同：2
> 
> 时间：2013-04-08T15:28:04.723
> 
> 标签：yii

在 yii CGridView 中创建任何 ajax 请求时，例如（分页、过滤等），请求的结果将呈现整个页面，我该如何避免这种情况？

我尝试使用 renderPartial 进行查看，但它不起作用。如果这是解决方案，我该怎么做？

我只需要渲染 GridView 的表格而不是整个页面。

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:50:07.717

在控制器中：

```
$this->layout = false; 
```

对我来说，也适用`$this->renderPartial()`于控制器而不是`$this->render()`

```
if(Yii::app()->request->isAjaxRequest()) $this->renderPartial('view');
else $this->render('view'); 
```

你可以创建类：

```
class Controller extends CController {
    public function beforeAction($action) {
        if(Yii::app()->request->isAjaxRequest) $this->layout = false;
        return parent::beforeAction($action);
    }
} 
```

# java - 外部 jquery 文件在 Spring MVC 中不起作用？

> ID：15883103
> 
> 赞同：1
> 
> 时间：2013-04-08T15:28:13.153
> 
> 标签：java, javascript, spring, jsp, spring-mvc

我的 Jsp 是，

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%-- <%@include file="include.jsp"%> --%>

<%@ taglib prefix="form" uri="../tld/spring-form.tld" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
    <script type="text/javascript" src="/jquery/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="/jquery/hello.js"></script>

</head>
<body>
<%out.println("Hello") ;%>
 <form:form  commandName="person">
        Select A or B :
        <form:input path="option" id="option" />
        <input type="button" value="Ajax Submit" onclick="hello();">

        <p id = "result"></p>

</form:form> 
</body>
</html> 
```

`out.println("Hello")`在浏览器中打印并且表单也显示出来。只有外部 Jquery 无法进行 JavaScript 调用。

我的调度员-Servlet 将是，

```
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"></property>
    <property name="suffix" value=".jsp"></property>
</bean> 
```

我的外部 hello.js 包含，

```
function hello(){
    alert("Hello 99");
    var val = $("#option").val();
    alert("Option : "+val);
} 
```

我的项目结构是，

![在此处输入图像描述](https://i.stack.imgur.com/lds9Q.png)

当我单击按钮时，我在控制台中得到了这个

```
Apr 8, 2013 9:03:08 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/SampleChat/jquery/hello.js] in DispatcherServlet with name 'dispatcher'
Apr 8, 2013 9:03:09 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/SampleChat/jquery/jquery-1.9.1.js] in DispatcherServlet with name 'dispatcher' 
```

我需要调用 JavaScript 函数来获取警报。

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:45:44.230

检查这是否可以帮助您（将其放在您的调度程序 xml 中）：

```
<mvc:resources location="jquery/**" mapping="jquery/**" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:55:00.620

尝试使用 c 标签库

```
<%@ taglib prefix='c' uri='http://java.sun.com/jstl/core_rt'%> 
```

和脚本标签如下

```
<script type="text/javascript" src='<c:url value="/jquery/jquery-1.9.1.js"></c:url>'></script>
<script type="text/javascript" src='<c:url value="/jquery/hello.js"></c:url>'></script> 
```

**还要**检查您是否已将调度程序 servlet 配置为使用以下 url 模式处理所有请求

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

那么你需要添加@Dani 显示的标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:34:52.933

js文件中的**madeAjaxCall** （）在哪里？

我认为您正在尝试这样做

```
<input type="button" value="Ajax Submit" onclick="hello();"> 
```

你的代码看起来不错。

# c# - 在gridview中只显示一些单词

> ID：15883107
> 
> 赞同：-2
> 
> 时间：2013-04-08T15:28:22.007
> 
> 标签：c#, asp.net, gridview

我正在使用网格视图来显示最近的消息...使用数据源...

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" Width="586px" AutoGenerateColumns="False" 
                                        DataSourceID="SqlDataSource1" 
                                        onselectedindexchanged="GridView1_SelectedIndexChanged" 
                                        onrowcommand="GridView1_RowCommand">
                                        <Columns>
                                            <asp:CommandField HeaderText="show" ShowSelectButton="True" />
                                            <asp:BoundField DataField="user_id" HeaderText="user_id" 
                                                SortExpression="user_id" />
                                            <asp:BoundField DataField="user_name" HeaderText="user_name" 
                                                SortExpression="user_name" />
                                            <asp:BoundField DataField="sender_mail" HeaderText="sender_mail" 
                                                SortExpression="sender_mail" />
                                            <asp:BoundField DataField="message" HeaderText="message" ReadOnly="True" 
                                                SortExpression="message" ControlStyle-Width="70px" ControlStyle-Height="25">
                                            <ControlStyle Height="20px" Width="50px" />
                                            <HeaderStyle Height="10px" Width="70px" />
                                            <ItemStyle Height="20px" HorizontalAlign="Left" Width="70px" />
                                            </asp:BoundField>
                                        </Columns>
                                    </asp:GridView> 
```

如果消息太长，则在我的数据库中显示在一个字段中...例如：-msg 是'嗨，你好吗' 它显示完整的味精......但我只显示数据'嗨，怎么样... ' 我也尝试设置宽度和高度，但不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:33:37.180

您可以使用模板字段而不是 boundfield。

```
 <asp:TemplateField >
    <HeaderTemplate>Message</HeaderTemplate>
    <ItemTemplate>
    <%# Eval("message").ToString().Substring(0,10) %>
    </ItemTemplate>
 <EditItemtemplate>
              <asp:textbox id="Textbox1"
                text='<%#Eval("message")%>'
                width="90"
                runat="server"/>                                      
            </Edititemtemplate>
    </asp:TemplateField> 
```

在这里，我们获取消息的子字符串（仅 10 个字符）。您可以修改以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:32:48.863

您可以通过将方法添加到您的代码中，该方法从 DB 中获取 msg 或只是字符串，然后您在该字符串上创建任何您想要的（在特定索引处剪切字符串然后添加...）。然后该方法返回处理后的字符串

```
public string cutString(string msg)
   {
      int msgLength = 100;
      return msg.Substring(0, msgLength) + "...";
   }

<asp:Label runat="server" Text='<%# cutString(Eval("message").ToString())%>' /> 
```

# c# - CreateInstanceAndUnwrap 无法加载程序集

> ID：15883109
> 
> 赞同：6
> 
> 时间：2013-04-08T15:28:27.837
> 
> 标签：c#, reflection, appdomain

我正在尝试在我的控制台应用程序的新 AppDomain 中加载程序集 A，并使用相同的基本目录和 RelativePath 作为默认域。

当我使用 CreateInstanceFrom 从 A 创建一个类型时，它成功但是当我使用`CreateInstanceAndUnwrap`它时找不到带有`FileLoadException`. 请记住，程序集在其构造函数中`A.MyType`从程序集调用方法。`B.Typeb`两个程序集文件都存在于执行程序集的父文件夹中的相同路径 (..\Mytypes)

```
_domain = AppDomain.CreateDomain("MyDomain" + Guid.NewGuid(), null, AppDomain.CurrentDomain.SetupInformation);
var mytype = _domain.CreateInstanceAndUnwrap(pathtoassembly, typename); 
```

这是错误消息：

> 无法加载文件或程序集“..\Mytypes\A.dll”或其依赖项之一。给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T09:14:26.333

[AppDomain.CreateInstanceAndUnwrap](http://msdn.microsoft.com/en-us/library/b223a08k.aspx)将在 Load 上下文中加载程序集，而[AppDomain.CreateInstanceFromAndUnwrap](http://msdn.microsoft.com/en-us/library/0y80xe4t.aspx)将在 LoadFrom 上下文中加载程序集。

它使用 CreateInstanceFromAndUnwrap 方法的原因是 LoadFrom 上下文将尝试解析 Mytypes 文件夹中的程序集。加载上下文不会。它将尝试仅从 GAC、AppDomain 的 BaseDirectory 和 RelativeSearchPath 解析。

您拥有的一些选项是：

1.  使用 LoadFrom 上下文（通过使用 CreateInstanceFromXXX 方法）。
2.  将 Mytypes 文件夹添加到用于创建 AppDomain 的 AppDomainSetup.PrivateBinPath。这样，加载上下文将能够解析位于那里的组件。
3.  订阅[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件并通过查找它们并从 Mytypes 文件夹加载它们自己解决程序集。
4.  在应用程序的基目录中部署所有程序集。

我建议使用 2 选项，这将允许您想要的文件夹结构加上通常首选的加载上下文。

# python - Python 中的灵活参数

> ID：15883110
> 
> 赞同：0
> 
> 时间：2013-04-08T15:28:34.383
> 
> 标签：python, arguments

这可能以前被问过，但我不知道如何查找答案，因为我不确定什么是表达问题的好方法。

主题是可以以多种不同方式在语义上表达的函数参数。例如，要将文件提供给函数，您可以直接提供文件，也可以提供一个字符串，即文件的路径。要指定一个数字，您可能允许一个整数作为参数，或者您可能允许一个字符串（数字），或者您甚至可能允许一个字符串，例如“one”。另一个例子可能是一个函数，它接受一个列表（比如说数字），但为了方便起见，它将一个数字转换为一个包含一个元素的列表：那个数字。

Python中是否有或多或少的标准方法来允许这种灵活性？如果您不确定参数是什么类型，它肯定会使程序的代码复杂化，所以我的猜测是尝试将便利函数分解到一个地方，而不是分散在各处，但我真的不知道如何最好做这种分解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:43:21.953

不，对此没有或多或少的“标准”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:36:09.553

1.  不要那样做！;)

但如果你仍然想要，我建议你有一个中间类或函数为你处理这个：

伪代码：

```
def printTheNumber(num):
    print num

def intermediatePrintTheNumber(input):

    num_int_dict = {'one':1, "two":2 ....
    if input.isstring():
        printTheNumber(num_int_dict[input])
    elif input.isint():
        printTheNumber(input)
    else:
        print "Sorry Dave, I don't understand you" 
```

如果这是`pythonic`我不知道，但如果我必须这样做，我会如何解决它，当然还要对输入进行更多检查以认为它有效。

当谈到您的评论时，您提到语义相似性`"one"`，即`1`可能意味着相同的事情。

你问应该在哪里进行这种转换。

嗯，这取决于你的系统的设计，但我可以告诉你，它不应该在我调用的同一个函数中完成，`printTheNumber`原因很简单，那就是这会给这个函数带来很多责任。

根据输入的复杂性，它可能是 the `integer 1`or the `string "1"`or，在更坏的情况下，`"one"`甚至可能更糟`"uno"|"one"|"yxi"|"ett" .. and so on`。这应该由仅具有该职责的函数处理，可能由处理映射的数据库来处理。

我会将其拆分，以便我有一个函数处理字符串“一”、“二”……等，一个处理整数，并有第三个函数检查输入以查看它是否可以转换为整数或不。

在我看来，如果您必须针对这种复杂性采取措施，则会**警告**设计存在`fundamental`缺陷，但您似乎已经意识到这一点，所以我不会继续讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:37:46.243

分解出几个函数共有的代码的一个好方法是通过[装饰器](http://docs.python.org/2.7/reference/compound_stmts.html#function-definitions "装饰师")。例如，

```
from functools import wraps

def takes_list(func):
    @wraps(func)
    def wrapper(arg):
        if not isinstance(arg, list):
            arg = [arg]
        return func(arg)
    return wrapper

@takes_list
def my_func(x):
    "Does something with list x." 
```

我应该注意，对于诸如文件之类的情况，您不想妨碍 Python 的鸭子类型：进行检查`isinstance(arg, file)`的问题是它不允许类似文件的内容，例如`io.StringIO`. 相反，使用 try-except 检查`str`(或`basestring`) 甚至让`open`您进行检查。

但是，通常更好的做法是让调用者将他们喜欢的内容传递给函数，如果它无效则失败。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-08T15:40:51.360

1.  由于您不能在运行时将方法添加到内置类中，`int`或者`str`您会像 Daniel Figueroa 提到的那样创建 switch case 语句。

2.  另一种方法是转换：

    ```
    def func(i):
        if not isinstance(i, int):
            i = int(i) # objects can overwrite __int__ if needed. 
    ```

3.  如果你有自己的类可以添加方法，你可以使用双重调度来为你做同样的事情。Smalltalk 将其用于 Integer-Float-... 转换。

4.  另一种方法是使用我尚未找到实现但我尝试过的面向主题的编程：[https ://gist.github.com/niccokunzmann/4971938](https://gist.github.com/niccokunzmann/4971938)

# c# - IComparer 应该返回什么来表示“保持现有的排序顺序”

> ID：15883112
> 
> 赞同：9
> 
> 时间：2013-04-08T15:28:46.263
> 
> 标签：c#, icomparer

我正在实现一个自定义[比较器](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.aspx)，以便为各种视图中的项目应用自定义排序顺序。

有时我发现我想保持现有的项目顺序，在这种情况下，我应该从我的`Compare`方法实现中返回什么？简单地返回 0 就足够了，还是我需要主动识别哪个项目先出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:10:30.330

（这个答案归功于[Lee](https://stackoverflow.com/questions/15883112/what-should-icomparer-return-to-indicate-keep-the-existing-sort-order#comment22613032_15883112)）

这取决于用于进行排序的算法是否[稳定](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)。例如，[OrderBy](http://msdn.microsoft.com/en-us/library/bb549422.aspx)是稳定的，因此返回 0 from`Compare`将意味着这两个项目在列表中保留其原始顺序，但是[List.Sort](http://msdn.microsoft.com/en-gb/library/w56d4y5z.aspx)不是，因此返回 0 from`Compare`并不能保证这两个项目将在它们的排序输出中的原始顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:02:52.007

零，但您的排序算法可能仍会更改其顺序。

# shell - 检查文件是否存在于多个目录中的脚本，如果不存在则创建（使用 644 权限），否则仅 chmods 到 644

> ID：15883115
> 
> 赞同：0
> 
> 时间：2013-04-08T15:28:59.930
> 
> 标签：shell

我正在尝试编写一个脚本来检查文件是否存在，如果它不存在，它会使用 644 的权限创建它。如果文件已经存在，它只是确保权限为 644。下面的脚本适用于当前目录的文件。

重点是我可能需要检查 10 个目录并执行相同的操作。

例子

```
/usr/local/opt/**app1**/logs/test`date '+%Y%m%d'`.log 
```

app1 可以是 5 到 10 个不同的应用程序。该名称是唯一的（不是 app1、app2 等）。文件目录结构的其余部分是统一/标准的。

我可以通过以下方式在当前目录上弄清楚：

```
if [ -f test`date '+%Y%m%d'`.log ];
then
    chmod 644 test`date '+%Y%m%d'`.log
    echo "File test`date '+%Y%m%d'`.log  exists and now it is readable by all"
else
    echo "File test`date '+%Y%m%d'`.log  does not exists creating"
    touch test`date '+%Y%m%d'`.log
    chmod 644 test`date '+%Y%m%d'`.log
fi 
```

但是当有多个 dir 元素时，我很难过。放置显式 dir 结构不是一个好主意，因为有时会有许多“应用程序”，有时会有不同数量的应用程序。如果文件存在，我只想 chmod 不要触摸，因为它已经有不应删除的数据。

非常感谢任何输入。

谢谢

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:38:13.060

```
for app in /usr/local/opt/*/*; do
    log_file=$app/logs/test$(date +%Y%m%d).log

    touch "$log_file"
    chmod 644 "$log_file"
done 
```

请注意，触摸已存在的文件不会删除其数据。触摸已经存在的文件是完全安全的。它只是更新他们的修改时间，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:38:16.183

我不想把所有的代码都写出来，但我会使用`find /usr/local/opt -type d`管道将其输入`grep "/logs/"`然后循环遍历结果目录以查找您的测试日志文件。

# java - 如何创建随机怪物

> ID：15883117
> 
> 赞同：0
> 
> 时间：2013-04-08T15:29:01.403
> 
> 标签：java, swing

我正在制作像 Space Impact 这样的游戏。在我的游戏中，火箭工作正常，但我不能随机创建怪物。怪物在屏幕上，但他们没有移动，所以他们没有活动 我该怎么做？

```
public class Dnm extends JFrame implements Runnable {
    Graphics dbg;
    Image dbImage;
    Image Pik1;
    Image Boss;
    static ImageIcon active;

    int x, y, xDirection, yDirection, BossX, BossY;

    public void run() {
        try {
            while (true) {
                move();
                boss();
                Thread.sleep(10);
            }
        } catch (Exception e) {
            System.out.println("Uh-oh, something went wrong!.");
        }
    }

    private void move() {
        x += xDirection;
        y += yDirection;
    }

    private void boss() {
        while (BossX == 0) {
            BossX = getX() - 1;
        }

        Random rastgele = new Random(getY());
        BossY = rastgele.nextInt();
    }

    public void setXDirection(int xdir) {
        xDirection = xdir;
    }

    public void setYDirection(int ydir) {
        yDirection = ydir;
    }

    // KEY COMMANDS //
    public class AL extends KeyAdapter {
        @Override
        public void keyPressed(KeyEvent e) {
            int keyCode = e.getKeyCode();

            if (keyCode == e.VK_LEFT) {
                setXDirection(-1);
            }
            if (keyCode == e.VK_RIGHT) {
                setXDirection(+1);
            }
            if (keyCode == e.VK_UP) {
                setYDirection(-1);
            }
            if (keyCode == e.VK_DOWN) {
                setYDirection(+1);
            }
        }

        @Override
        public void keyReleased(KeyEvent e) {
            int keyCode = e.getKeyCode();
            if (keyCode == e.VK_LEFT) {
                setXDirection(0);
            }
            if (keyCode == e.VK_RIGHT) {
                setXDirection(0);
            }
            if (keyCode == e.VK_UP) {
                setYDirection(0);
            }
            if (keyCode == e.VK_DOWN) {
                setYDirection(0);
            }
        }

        @Override
        public void keyTyped(KeyEvent e) {

        }
    }

    // CONSTRUCTOR //
    public Dnm() {
        //Image Import
        ImageIcon still = new ImageIcon("img/rocket.png");
        Pik1 = still.getImage();

        addKeyListener(new AL());

        setTitle("Dnm");
        setSize(500, 500);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(true);
        setVisible(true);

        x = 15;
        y = 15;
    }

    public void paint(Graphics g) {
        dbImage = createImage(getWidth(), getHeight());
        dbg = dbImage.getGraphics();
        paintComponent(dbg);
        g.drawImage(dbImage, 0, 0, this);

    }

    public void paintComponent(Graphics g) {
        ImageIcon background = new ImageIcon("img/space.jpeg");
        Image background1 = background.getImage();

        ImageIcon still1 = new ImageIcon("img/Alien.png");
        Boss = still1.getImage();

        g.setColor(Color.red);
        g.drawImage(background1, 0, 0, this);
        g.drawImage(Boss, BossX, BossY, this);
        g.drawImage(Pik1, x, y, this);
        g.setColor(Color.blue);

        repaint();
    }

    public static void main(String[] args) {
        Dnm game = new Dnm();

        Thread t1 = new Thread(game);
        t1.start();
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:39:52.613

由于您的代码不完整，很难确定，但这一行看起来很可疑：

```
while (BossX == 0) {
   BossX = getX() - 1;
} 
```

这段代码很可能会执行一次，对吧？如果 BossX 最初为零，则代码在您更改其值的地方执行。在下一次更新中，BossX 不为零（大概），因此代码不会执行。由于 BossX 是绘制 Boss 的 X 坐标，所以它不会移动。相反，它只是在同一个地方一遍又一遍地重绘。

要让怪物随机移动，请在每个游戏循环期间随机增加或减少 X 和 Y 坐标值。添加第二个随机变量以使它们以随机速度在随机方向上移动（通过将坐标值调整为大于一的值）。

正如 NPE 评论的那样，您应该在调试器中单步执行代码并准确找出发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:41:00.180

我是编程的初学者，但这是我最好的尝试：

我将创建一个每 x 秒调用一次的方法，该方法使用 Math.Random() 生成一个随机数。我会说

```
int number = .5;  
if(number > Math.Random())
     GenerateMonster(); 
```

然后，您的 GenerateMonster 方法将使用 Monster 的默认值创建一个新对象。为了让被创造出来的怪物以某种方式行动，您需要在您定义怪物如何行动的任何地方继承这些功能。我没有看到这些函数的代码，所以我假设你只是没有列出它们。希望这至少会有所帮助。祝你好运！

# ruby-on-rails - 带有 Nginx 的 Phusion Passenger 上的 Rails 不允许上传大小 > 2G 的文件

> ID：15883118
> 
> 赞同：0
> 
> 时间：2013-04-08T15:29:04.923
> 
> 标签：ruby-on-rails, nginx, redmine, passenger

带有 Nginx 的 Phusion Passenger 上的 Rails 不允许上传大小 > 2G 的文件。在上传过程中，我得到 500 错误和一个大小为 2G 的 /tmp 文件夹中的 RackMultipart 文件。

nginx.conf：

```
worker_processes 2;
timer_resolution 100ms;
worker_priority -5;

error_log /opt/vhod/webapp/shared/log/nginx_error.log;
pid /var/run/nginx.pid;

events {
  worker_connections 1024;
}

http {
 passenger_root /home/vhod-admin/.rbenv/versions/1.8.7-p370/lib/ruby/gems/1.8/gems/passenger-3.0.19;
 passenger_ruby /home/vhod-admin/.rbenv/versions/1.8.7-p370/bin/ruby;
 passenger_max_pool_size   3;
 passenger_pool_idle_time  1200;

 passenger_spawn_method          smart;
 passenger_friendly_error_pages  on;
 passenger_log_level             1;
 passenger_debug_log_file        /opt/vhod/webapp/shared/log/passenger_debug.log;
 include       mime.types;
 default_type  application/octet-stream;

 sendfile              on;
 client_max_body_size  0;

 proxy_max_temp_file_size  0;
 proxy_read_timeout        360s;
 keepalive_timeout         70;

 server {
    listen        443;
    server_name   vhod;
    charset       utf-8;

    root /opt/vhod/webapp/current/redmine/public;
    passenger_enabled           on;
    passenger_use_global_queue  on;
    passenger_min_instances     1;
    rails_env                   production;

    ssl                 on;
    ssl_certificate     cert.pem;
    ssl_certificate_key cert.key;
    ssl_protocols       SSLv3 TLSv1;

    if (-f /opt/vhod/webapp/shared/system/maintenance.html) {
        rewrite ^(.*)$ /opt/vhod/webapp/shared/system/maintenance.html last;
        break;
    }
  }
} 
```

一切都只有在没有 nginx 的情况下才能工作。当我使用应用程序运行 mongrel/thin/webrick 服务器时。所以，passenger是最新版本，3.0.19，nginx是1.2.6。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:29:29.860

将 client_max_body_size 设置为 > 2000m。

[http://wiki.nginx.org/HttpCoreModule#client_max_body_size](http://wiki.nginx.org/HttpCoreModule#client_max_body_size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:14:49.083

这是 Phusion Passenger 中可能存在的错误，已在 4.0.0 RC 4 版本中[解决](https://code.google.com/p/phusion-passenger/issues/detail?id=838)。

# c# - 用于 C++ 的 C# 包装器，但仅编译为静态库

> ID：15883119
> 
> 赞同：1
> 
> 时间：2013-04-08T15:29:10.463
> 
> 标签：c#, c++, visual-studio, wrapper

我正在尝试通过编写包装器从 C# 运行非托管本机 C++ 类代码。我的 C++ 代码可以毫无问题地编译为静态库 (.lib)。该代码依赖于其他代码，我相信这些代码都被编译为静态库。由于存在链接器错误，我无法将其编译为 DLL。

我刚刚了解到，需要将包装器编译为 DLL，以便可以从 C# 调用它。这是真的？我不能将我的包装器编译为要在 C# 中使用的静态库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:41:47.763

C# 无法加载 .lib 文件。

P/Invoke 只能加载 .DLL 文件（它们不必命名为 .DLL，但它们必须是正确的文件格式）。

# java - OrthogonalTiledMapRenderer 和普通 Spritebatch 渲染一个白框？

> ID：15883120
> 
> 赞同：1
> 
> 时间：2013-04-08T15:29:13.180
> 
> 标签：java, android, libgdx

我正在使用 Libgdx 将 TileMap 渲染为我的游戏背景。稍后我可能会渲染一些不同的图层。如果没有 tilemap 渲染和单个背景图片，它可以正常工作！当我使用 TiledRender 时发生了一些奇怪的事情，看看它： ![左上角带有大白框的平铺场景](https://i.stack.imgur.com/Zcfe9.jpg)

两个白色区域通常是触摸板和字符。

触摸板和字符渲染为：

```
@Override
   public void draw(SpriteBatch batch, float parentAlpha) {
      sprite.draw(batch);
   } 
```

我渲染 TileMap 的地图如下所示：

```
public class Map extends Actor {
   private TiledMap map;
   private OrthogonalTiledMapRenderer render;
   public int[][] mapArray = new int[Config.X_SIZE][Config.Y_SIZE];

   public Map(TiledMap map){
      this.map  = map;
      this.render = new OrthogonalTiledMapRenderer(map,(((float)Config.VIRTUAL_VIEW_HEIGHT/Config.Y_SIZE)/(float)Config.TILE_SIZE));
      this.toBack();
   }

   @Override
   public void draw(SpriteBatch batch, float parentAlpha) {
      this.render.setView((OrthographicCamera) this.getStage().getCamera());
      render.render();
   }
} 
```

有什么解决 SpriteBatch 问题的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:27:19.750

许多 Libgdx 渲染助手对象假定它们“拥有”OpenGL 运行时中的状态，因此如果您有两个同时对 OpenGL 进行更改，则输出会变得混乱。在你的情况下，`OrthogonalTiledMapRenderer`它有自己的`SpriteBatch`，所以你有两个`SpriteBatch`（默默地）互相争斗。

尝试更改您的`Map.render()`方法以在渲染地图之前结束正在进行的 SpriteBatch（然后重新启动它）：

```
@Override
public void draw(SpriteBatch batch, float parentAlpha) {
  batch.end();
  this.render.setView((OrthographicCamera) this.getStage().getCamera());
  render.render();
  batch.begin();
} 
```

如果这有帮助，您可能会考虑将平铺地图设置`SpriteBatch`为与其余代码“共享”相同（因为这些对象有些重）。这应该更有效，并且应该消除结束/启动`SpriteBatch`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T22:07:21.667

我有一个类似的问题，我使用批处理首先绘制瓷砖地图，然后是我自己的纹理。它以与纹理完全相同的大小和位置绘制了白色矩形。

```
 batch.setProjectionMatrix(camera.combined);
    batch.begin();
    mapRenderer.render();
    GameObjectSystem.inst().render(RenderLayer.floor, batch);
    GameObjectSystem.inst().render(RenderLayer.ground, batch);
    batch.end(); 
```

在绘制瓷砖地图并重新启动它后结束批处理解决了问题。

```
 batch.setProjectionMatrix(camera.combined);
    batch.begin();
    mapRenderer.render();
    batch.end();

    batch.begin();
    GameObjectSystem.inst().render(RenderLayer.floor, batch);
    GameObjectSystem.inst().render(RenderLayer.ground, batch);
    batch.end(); 
```

# xcode - iOS6 MapKit - 附近地点

> ID：15883122
> 
> 赞同：0
> 
> 时间：2013-04-08T15:29:22.043
> 
> 标签：xcode, ios6, mapkit

在 iOS6 中，我使用什么类/代码来获取 Nearby Places？

我知道这是地图工具包。我一直在看教程，但都没有解决 Apple 在 1 月 13 日所做的最新 MKLocalSearch 更新。

对于简单的解决方案有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:31:43.723

这是一个演示 MKLocalSearch 的教程：

[http://phpadvocate.com/blog/2013/01/ios-6-1-simple-example-using-mklocalsearch/](http://phpadvocate.com/blog/2013/01/ios-6-1-simple-example-using-mklocalsearch/)

# php - 带有此 htaccess 规则的 Http 错误 500

> ID：15883123
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:29:22.207
> 
> 标签：php, .htaccess, redirect, url-rewriting, http-redirect

我想将任何请求重定向`http://www.domain.com/folder1/folder2/mytitle-1.html`到`http://www.domain.com/folder1/folder2/script.php?id=1&code=5`

我不明白为什么下面的规则不起作用。我将它添加到一个 htaccess 文件中`folder2`

```
RewriteEngine on
RewriteRule ^folder1/folder2/mytitle-1.html$ /folder1/folder2/script.php?id=1&code=5 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:03:43.197

你可以试试这个，在根目录的一个 .htaccess 文件中：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !script\.php [NC]
RewriteRule  ^folder1/folder2/mytitle-1\.html/? /folder1/folder2/script.php?id=1&code=5 [L,NC] 
```

### 选项：

如果 .htaccess 文件位于`/folder2`，则将上面的*RewriteRule*替换为：

```
RewriteRule  ^mytitle-1\.html/? /folder1/folder2/script.php?id=1&code=5 [L,NC] 
```

对于永久和可见的重定向，将 [L,NC] 替换为 [R=301,L,NC]

# android - 如何在 monodroid 或 java 中添加 ActionBar 选项卡

> ID：15883126
> 
> 赞同：0
> 
> 时间：2013-04-08T15:29:30.113
> 
> 标签：android, android-actionbar, xamarin.android

我想知道如何使用 mono for android 将一些选项卡添加到我的操作栏？我需要 3 个选项卡，每个选项卡都保留一个活动和一个布局，并且应该启用滑动 :) 可能吗？如果不是我怎么能用java做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:46:04.510

[Xamarin](https://github.com/xamarin/monodroid-samples/tree/master/HelloTabsICS)提供了一些关于如何在`ICS`.

# javascript - 使用 onbeforeunload 确认时是否可以捕获用户的答案？

> ID：15883127
> 
> 赞同：7
> 
> 时间：2013-04-08T15:29:30.260
> 
> 标签：javascript, jquery, onbeforeunload

我需要警告用户离开页面时他们会丢失信息。这可以使用 onbeforeunload 事件轻松完成。我的问题是，如果用户决定离开，我想采取一些行动。

这是一个示例（我正在使用 jquery，因为它无论如何都已加载）：

```
$(window).on('beforeunload', function(e){
    return "Do you really want to leave?";
}); 
```

我想做的是这样的（这个代码不起作用，我知道，这只是一个例子来说明我正在尝试做的事情）：

```
$(window).on('beforeunload', function(e){
    // Ask for user confirmation
    var bUserAnswer = confirm("Do you really want to leave?");

    if(bUserAnswer)
    {
        // Do something...
    }
    else
    {
        // Do something else...
    }
    // Close everything if the user decides to leave...
    return bUserAnswer;
}); 
```

我不知道我在这里尝试做的事情是否可能......谷歌搜索并没有给我任何指示，所以我转向我最喜欢的专家组！

知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T16:14:20.823

离开页面时，事件`beforeunload`并`unload`按此顺序执行。当然，如果`beforeunload`事件没有完成，事件就不会完成`unload`。

事件未完成的方式`beforeunload`是用户单击“留在页面”按钮而不是“离开页面”（如果向他们显示该对话框，就像在您的代码中一样）。

因此，如果您知道他们不离开页面的可能性将始终呈现给他们，那么`unload`执行事件的唯一方法`beforeunload`是（由用户）不阻止该事件。

因此，当用户实际选择离开页面时，您应该能够将您想要执行的任何代码放入`unload`事件中。

至于知道用户是否决定留在页面上，我不知道如何抓住它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-05T14:06:43.313

```
window.addEventListener('beforeunload', this.handleUnload);
window.addEventListener("unload", function(event) {
    //calling ajax or do something here
});

handleUnload (e) {
     var message = "your custom message here";
     (e || window.event).returnValue = message; //Gecko + IE
    return message;
} 
```

# php - 如何使 $_SERVER["HTTP_REFERER"] 不记录某些链接？

> ID：15883128
> 
> 赞同：0
> 
> 时间：2013-04-08T15:29:39.530
> 
> 标签：php, html, wordpress

我正在尝试为文章页面实现一个“关闭按钮”，单击该按钮应将用户带回到他打开文章的类别页面。我为实现这一目标而写的内容如下，

```
<?$back_url = htmlspecialchars($_SERVER['HTTP_REFERER']);?>
<a href="<?=$back_url?>"><span class="btn-close">X</span></a> 
```

但问题在于它还记录了分页 url，所以如果我使用分页链接然后点击这个“关闭按钮”，它会带我回到上一个分页链接，而不是返回到类别页面。

我不想记录像[www.foo.bar/article?page_no=1](http://www.foo.bar/article?page_no=1)`$_SERVER['HTTP_REFERER']`这样的分页链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:32:29.857

您对此无能为力，因为它是客户端发送的。

您可以使用会话来存储有关客户端来自何处的一些信息。否则，只需返回某个页面。

# android - 车载HUD和安卓蓝牙通信

> ID：15883139
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:04.997
> 
> 标签：android, xamarin.android, hud

我目前有一个在 android 上运行的流媒体网络广播应用程序。我想让它与汽车 HUD 通信，这样我就可以在 HUD 屏幕上显示当前歌曲信息。

例如，我刚买了一辆新的本田 Pilot。我注意到当我使用 CD 时，它会显示歌曲信息。如果我使用 USB 设备（例如，ipod），它将显示歌曲信息。但是，如果我用完蓝牙，它将显示艺术家、歌曲等空白，但它会显示蓝牙正在通过手机运行并显示“Droid Razr”。

这让我开始思考，如果每次歌曲更改时，我手动将音乐信息从手机发送到 HUD 会怎样。

我的问题是，这可以做到吗？我需要某种 API 来执行此操作吗？如果有，是哪一个？上述 API 是否适用于 Mono Android？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:51:43.610

当您说 HUD 时，您可能指的是集群显示（真实的 HUD 投影或渲染在挡风玻璃上）。无论如何，传输曲目信息的蓝牙配置文件是[AVRCP 1.3+](http://en.wikipedia.org/wiki/Bluetooth_profile#Audio.2FVideo_Remote_Control_Profile_.28AVRCP.29)。如果您的主机或手机不支持此版本的配置文件，您将无法看到曲目信息。CD 曲目信息是完全[不同的协议](http://en.wikipedia.org/wiki/Disc_Description_Protocol)，仅取决于集群控制器和 CD 播放器之间的关系。

如果您能够确定您的汽车的主机/蓝牙控制器确实支持 AVRCP 1.3 并且您有一部 android 手机 - 您可以尝试使用支持 AVRCP 1.3 的闪烁自定义 ROM（为您的设备尝试[xda-developers](http://www.xda-developers.com)）并查看如果显示元数据。

# javascript - 获取复选框 ID 列表

> ID：15883140
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:08.123
> 
> 标签：javascript, jquery

我正在尝试为一组复选框获取一串 ID。下面的代码确实包含 ID，但它还包含空格和双逗号，用于未选中的复选框。

有没有办法只获取一串ID？

谢谢！

```
$($('input[type=checkbox][name=selector]')).each(function () {
       var sThisVal = (this.checked ? this.id : "");
       sList += (sList == "" ? sThisVal : "," + sThisVal);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:31:39.217

您可以使用[map()](http://api.jquery.com/jQuery.map/)获取选中复选框的逗号分隔 ID

```
strIds = $('input[type=checkbox][name=selector]').map(function () {                        
      if(this.checked) return  this.id;    
}).get().join(','); 
```

*[通过简化选择器并使用:checked selector](http://api.jquery.com/checked-selector/)使选择器返回选中的复选框，使其变得有点简单。*

```
strIds = $('[name=selector]:checked').map(function () {                        
       return  this.id;    
}).get().join(','); 
```

# ios - Core Data 中的版本化数据模型集成

> ID：15883146
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:16.957
> 
> 标签：ios, objective-c, core-data, migration, database-migration

我的 iOS 项目中有两个版本化的数据模型。

数据模型之间的区别在于较新的模型有一个名为“new_col”的新字段。

在项目的某些部分，我需要获取由这个“new_col”字段过滤的数据。

所以，我使用了以下代码。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"new_col = %@", val];
[request setPredicate:predicate];

NSArray *results = [context executeFetchRequest:request error:&err]; 
```

我遇到了异常 - 'NSInvalidArgumentException'，原因：'keypath new_col not found in entity ...

我知道这是因为原始数据模型。

我认为我应该将原始数据转换为新的数据模型。

我怎样才能转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:32:35.800

快速谷歌。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

这是 Apple 支持的，并且是将您的用户数据从一个模型迁移到另一个模型的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:33:13.530

如果您要添加新属性并希望保持向后兼容性，您应该为新属性指定一个默认值，或者在核心数据编辑器中将其保留为“可选”。

完成此操作后，您需要确保启用了自动迁移。有关如何执行此操作的详细信息，请参阅[Core Data 的“自动轻量级迁移”的实现。](https://stackoverflow.com/questions/2310216/implementation-of-automatic-lightweight-migration-for-core-data-iphone)然后，现有/旧实体将采用默认值（如果已定义）或 nil 如果属性是可选的。

# jquery - 确定哪个链接提交了表单

> ID：15883148
> 
> 赞同：1
> 
> 时间：2013-04-08T15:30:20.697
> 
> 标签：jquery, forms, hyperlink, submit

我已经设置了一个页面，其中包含两个链接，这些链接的样式看起来像按钮 - 保存和保存并分配：

```
<a id="submit" title="Save">Save</a>
<a id="submit_assign" title="Save & Assign">Save & Assign</a> 
```

我正在使用 JQuery 来捕获每个按钮的单击事件并执行 FORM 提交：

```
$(document).ready(function() {  
    $('#submit').click(function(){
        $(this).parents('form').submit();
    });

    $('#submit_assign').click(function(){
        $(this).parents('form').submit();
    });  

    $("#main_form").on("submit", function (event) {
        //call save function
        //if button clicked was submit_assign, call assign function
    });
}); 
```

两个按钮都需要执行相同的基本功能（即保存），但保存和分配按钮需要在成功保存后进行额外处理。我想确定是哪个按钮导致表单提交，以便我可以使用它来查看是否需要额外处理。我的第一直觉是尝试通过点击中的提交函数调用传递一个变量，但我不确定如何在实际的提交函数中访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:34:18.680

**编辑**

为此，`<a>`您只需在表单中设置*隐藏*输入的值

```
<a id="submit_1">Submit</a>
<a id="submit_2">Save</a>

<form>
    <input type="hidden" name="submit" value="" />
</form> 
```

jQuery：

```
$("#submit1").on("click", function(){
    $('input[name="submit"]').val("submit");
}
$("#submit1").on("click", function(){
    $('input[name="submit"]').val("save");
} 
```

* * *

**旧答案**

HTML：

```
<form>
    <input type="Submit" name="submit_1" value="submit_1"/>

    <input type="submit" name="submit_2" value="submit_2"/>
</form> 
```

PHP

```
if(isset($_GET['submit_1'])){
    // submit one was clicked
}
elseif(isset($_GET['submit_2'])){
    /submit two was clicked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:35:05.597

如果您的提交按钮是实际`<input type="submit">`按钮，您可以为它们分配`name`和`value`属性，这些按钮将与表单的其余部分一起传递：

```
<input type="submit" id="submit" name="submit" value="Save">
<input type="submit" id="submit_assign" name="submit" value="Save and Assign"> 
```

否则，为什么不在`<input type="hidden">`处理提交之前创建新的表单元素呢？

```
$('#submit_assign').click(function(){
    var hidden = '<input type="hidden" name="something" value="somethingelse">';
    $(this).parents('form').append(hidden).submit();
}); 
```

# azure - 从 Azure 提供 WOFF 字体时出现 SECURITY_DENIED_BY_MIMEMAP 错误

> ID：15883149
> 
> 赞同：2
> 
> 时间：2013-04-08T15:30:22.600
> 
> 标签：azure, mime-types, woff

我使用 Azure 库中的 Wordpress 安装，在 Azure 中作为 Azure 网站运行了一个测试 Wordpress 站点。

该站点功能正常，并且似乎按预期工作。除了一个例外。我正在使用自定义网络字体 - [http://fortawesome.github.io/Font-Awesome/](http://fortawesome.github.io/Font-Awesome/)。

此字体有 OTF、SVG、TTF、EOT 和 WOFF 版本。据我了解，不同的设备/浏览器使用不同版本的文件来渲染字体。

我在提供文件的 .woff 版本时遇到问题。

我在 Azure 门户中打开了日志记录，我可以看到以下错误

> SECURITY_DENIED_BY_MIMEMAP
> 
> 文件名 C:\DWASFILES\SITES\WWW-MYWPTESTSITE\VIRTUALDIRECTORY0\SITE\WWWROOT\WP-CONTENT\THEMES\AVADA\AVADA\FONTS\FONTAWESOME-WEBFONT.WOFF

我通过 SFTP 登录并浏览到该文件夹​​，确认服务器上存在 .woff 文件。

我在网上看到其他关于将此信息添加到 web.config 文件的帖子。就像是：

```
<?xml version="1.0"?>
<!-- Web.Config Configuration File -->
<configuration>
        <system.webServer>
            <modules runAllManagedModulesForAllRequests="true"/>
            <staticContent>
              <remove fileExtension=".svg" />
              <remove fileExtension=".eot" />
              <remove fileExtension=".woff" />
              <mimeMap fileExtension=".svg" mimeType="image/svg+xml"  />
              <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
              <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
            </staticContent>
        </system.webServer>
</configuration> 
```

但是，我不确定如何将其添加到 Azure 托管站点。

更新：将上述代码另存为 web.config 并上传到 wwwroot 文件夹。Azure 现在将允许在请求时下载 .woff 字体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T15:48:34.090

Save the following as web.config. Upload the web.config file to the wwwroot folder of the site hosted in Azure. The .woff files will now be served.

```
<?xml version="1.0"?>
<!-- Web.Config Configuration File -->
<configuration>
        <system.webServer>
            <modules runAllManagedModulesForAllRequests="true"/>
            <staticContent>
              <remove fileExtension=".svg" />
              <remove fileExtension=".eot" />
              <remove fileExtension=".woff" />
              <mimeMap fileExtension=".svg" mimeType="image/svg+xml"  />
              <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
              <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
            </staticContent>
        </system.webServer>
</configuration> 
```

# wix - WiX：如何打包 exe 或 dll 以仅在安装期间使用

> ID：15883150
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:22.750
> 
> 标签：wix, wix3.5, wix3, wix3.6, wix3.7

我需要在生成的 MSI 中包含一个 dll/exe（通过 WiX 项目创建），但我不想在安装过程中部署它们：~~我只想在一些 CustomAction 中使用它们~~我的目的是包含一个现有的 exe/dll并在安装期间从 wxs 代码（而不是从 CustomAction dll）调用它。
是否可以包含安装期间未部署的文件？我的意思是，只将它们打包在生成的 MSI 中，并在它们被解压到 %temp% 文件夹中时调用它们执行某些任务？
此外，如果有人可以通过 Product.wxs XML 代码单元展示一些如何包含 dll/exe 的示例代码，那就太好了。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:44:45.210

是的，使用[Binary](http://wix.sourceforge.net/manual-wix3/wix_xsd_binary.htm)元素包含它们。

```
<Binary Id='MyCustomActionBinary'
        SourceFile='$(var.CustomActionProject.TargetPath)' /> 
```

这将使它们对您的[CustomAction](http://wix.sourceforge.net/manual-wix3/wix_xsd_customaction.htm)可用，您可以在其中使用 BinaryKey 属性来引用二进制文件：

```
<CustomAction Id='MyCustomAction'
              BinaryKey='MyCustomActionBinary'
              DllEntry='MyCustomFunction'
              Execute='deferred' /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:37:59.750

如果您使用 C#/DTF 编写自定义操作，您只需添加 DLL 作为引用。对于任何其他类型的文件，您将它们作为 Content | 添加到项目中。CopyAlways 和构建将自动将这些文件包含在自解压自定义操作中。当 CA 运行时，它们将在当前目录（临时目录）中可用，并在 CA 结束时自动清理。

# tfsbuild - TFSBuild.proj 导入更新 - 需要建议

> ID：15883151
> 
> 赞同：2
> 
> 时间：2013-04-08T15:30:23.103
> 
> 标签：tfsbuild, msbuildextensionpack

通过安装 Sql Server 2008 express 而不是 SSE 2005，我们的新 Win 7 VS2008 Team System 构建服务器取得了一些进展。下一个障碍是我们正在使用 VS2008，我们的团队项目文件导入了 Sql Server 2005 的 MSBuild 扩展包，这似乎不适用于 Win 7 和 Sql Server 2008。因此，我们已将日期为 2012 年 10 月的 MSBuild 扩展包安装到默认路径。我们的构建现在失败了，因为导入找不到“$(MSBuildExtensionsPath)\ExtensionPack\MSBuild.ExtensionPack.tasks”。

而且我也找不到！

这是版本不匹配（在这种情况下我们如何摆脱这个漏洞）还是我很傻？我能找到的唯一文件是 $(MSBuildExtensionsPath)\ExtensionPack\MSBuild.ExtensionPack.Tfs2010.dll，这对我来说看起来不合适。据我所知，安装的 MSBuild Extension Pack 帮助文件不包括这类事情，所以我很茫然。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:32:35.187

尝试替换`$(MSBuildExtensionPath)`以`$(MSBuildExtensionPath32)`确保可以找到 Program Files (x86) 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:33:55.423

我建议让您的构建服务器尽可能地匹配您的开发环境。如果您的开发人员在安装了 SQL 2005 的 32 位机器上工作，那么我会尝试让构建服务器匹配。任何需要安装在开发人员机器上的软件（例如 MSBuild 扩展）也应该安装在构建服务器上。

# android - Android中带有TextView、TextView、RadioGroup的自定义ListView

> ID：15883152
> 
> 赞同：2
> 
> 时间：2013-04-08T15:30:25.640
> 
> 标签：android, listview, android-arrayadapter, custom-adapter

我正在开发一个`ListView`用于创建学生标记列表的应用程序。

在这个应用程序中，列表有 10 名学生。为这些学生进行的考试提供了四个等级。一个学生只能适应四个年级中的一个。

教师将在 中为学生分配成绩`ListView`。

我的 xml 文件**Studentlist.xml**如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>
</LinearLayout> 
```

我的**row.xml**文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="500dp"
android:layout_height="fill_parent"
android:padding="10dp" >

<TableRow>

    <TextView
        android:id="@+id/SNo"
        style="@style/text"
        android:layout_width="40dp"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/StudNo"
        style="@style/text"
        android:layout_width="80dp"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/StudName"
        style="@style/text"
        android:layout_width="180dp"
        android:layout_height="wrap_content" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:checked="true" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="40dp"
            android:layout_height="wrap_content" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="40dp"
            android:layout_height="wrap_content" />

        <RadioButton
            android:id="@+id/radio3"
            android:layout_width="40dp"
            android:layout_height="wrap_content" />
    </RadioGroup>
</TableRow> 
```

现在我正在尝试以下形式的输出：

```
1 0001 AAAA <RadioButton1> <RadioButton2> <RadioButton3> <RadioButton4>
2 0002 BBBB <RadioButton1> <RadioButton2> <RadioButton3> <RadioButton4> 
```

如何使用适配器功能？

`ArrayAdapter<String,String,String,RadiGroup> studList=new ArrayAdapter<String,String,String,RadiGroup>();`

我可以这样使用吗？如何开发定制的适配器`ListView`？

建议我最好的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:41:34.843

您可以使用从 ArrayAdapter 继承的类，并覆盖其 getView() 方法。

```
public class StudentAdapter extends ArrayAdapter<Student> {

protected LayoutInflater inflater;

    public StudentAdapter(final Context context) {
        super(context, 0);
        inflater = (LayoutInflater) ((Context) context)
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        // Note: You should optimize here with re-using convertView

        View rowView = inflater.inflate(R.layout.user_address_row_layout,
                parent, false);
        TextView sNo = (TextView) rowView.findViewById(R.id.sNo);
        sNo.setText(getItem(position).number);
            // same for every field of the row
            // ...

        return rowView;
    }

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:50:05.947

This is a sample example of custom adapter for listview. Modify it as your need: XML layout :

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/main"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Header -->

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/black" >

        <TextView
            android:id="@+id/item2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:height="30dip"
            android:text="Latest News - Your Healing Place"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FFFFFF"
            android:width="100dip" />

        <TextView
            android:id="@+id/item1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:height="30dip"
            android:width="20dip" />

    </LinearLayout>

    <View android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="?android:attr/listDivider" />

    <LinearLayout android:id="@+id/layout"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent">

        <ListView
            android:id="@+id/listview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@color/black" >

        </ListView>

    </LinearLayout>
</LinearLayout> 
```

news.java :

```
List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
String[] from = new String[] {"details", "date"};
int[] to = new int[] { R.id.item1, R.id.item2};
ListView lv= (ListView)findViewById(R.id.listview);
HashMap<String, String> map = new HashMap<String, String>();
map.put("details", "This is a sample message");
map.put("date", "24-07-2003");
fillMaps.add(map);

SimpleAdapter adapter = new SimpleAdapter(this, fillMaps, R.layout.grid_item, from, to);
lv.setAdapter(adapter); 
```

# java - EMF 模型与 EMF Compare 的比较

> ID：15883154
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:34.140
> 
> 标签：java, eclipse, eclipse-emf-ecore, emf, emf-compare

我有两个版本的 EMF 实例，它们基于相同的 ecore 模型。我需要按照以下格式准备从 v1 更改为 v2 的内容列表

对于模型中的每个对象对象名称：修改属性：添加属性：删除属性：

这些 emf 实例文件中的每一个实际上都是数据库数据的表示。用户不直接更改数据库，但他们更改了 emf 实例文件。该工具需要识别这些更改，然后需要生成必要的 DML 语句。欣赏是否可以提供有关如何实现此目的的伪代码，或者是否有更好的选择。以下是我目前拥有的代码

```
public Comparison compare()
{
    // Load the two input models
    ResourceSet resourceSet1 = new ResourceSetImpl();
    ResourceSet resourceSet2 = new ResourceSetImpl();
    String xmi1 = "src/test/java/com/equifax/ic/provisioning/service/v1.xmi";
    String xmi2 = "src/test/java/com/equifax/ic/provisioning/service/v2.xmi";
    load(xmi1, resourceSet1);
    load(xmi2, resourceSet2);

    // Configure EMF Compare
    EMFCompare comparator = EMFCompare.builder().build();

    // Compare the two models
    IComparisonScope scope = EMFCompare.createDefaultScope(resourceSet1, resourceSet2);
    return comparator.compare(scope);
}

@Test
public void testCompare()
{
    Comparison comparison = compare();
    List<Diff> differences = comparison.getDifferences();

    for(Diff d: differences)
    {
        System.err.println("d.getKind(): "+d.getKind());
        System.err.println("d.getMatch(): " + d.getMatch());
        System.err.println("State: " + d.getState());
    }

    assertSame(Integer.valueOf(12), Integer.valueOf(differences.size()));
} 
```

**输出**

```
d.getKind(): ADD
d.getMatch(): MatchSpec{left=BillableSystemEvent@1b5340c Application Processed, right=BillableSystemEvent@16c163f Application Processed, origin=<null>, #differences=2, #submatches=2}
State: UNRESOLVED

d.getKind(): DELETE
d.getMatch(): MatchSpec{left=BillableSystemEvent@1b5340c Application Processed, right=BillableSystemEvent@16c163f Application Processed, origin=<null>, #differences=2, #submatches=2}
State: UNRESOLVED 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:54:06.300

我不能说我真的了解您想要实现的一切，但据我了解，您对 EMF Compare 用于其差异的格式并不真正感兴趣。相反，您正在尝试为差异生成一种不同的表示形式。

您可能对重新实现[IDiffProcessor 感兴趣](http://wiki.eclipse.org/EMF_Compare/Developer_Guide#Changing_the_Diff_Processor)。每次我们检测到更改时，都会通知差异处理器。默认情况下，我们创建我们的“Diff”实例......没有什么可以阻止您生成 DML 语句。[您可以在此处](http://git.eclipse.org/c/emfcompare/org.eclipse.emf.compare.git/tree/plugins/org.eclipse.emf.compare/src/org/eclipse/emf/compare/diff/IDiffProcessor.java)快速了解 IDiffProcessor API 。

# css - 是否可以使用背景图像制作一个响应式 div，该 div 保持背景图像的比例，就像使用?

> ID：15883157
> 
> 赞同：9
> 
> 时间：2013-04-08T15:30:37.093
> 
> 标签：css, responsive-design, background-image

不是以英语为母语的人，所以可能有更好的方法来塑造问题......无论如何：

我想要创建的内容类似于此处的标题：http: [//thegreatdiscontent.com/adam-lisagor](http://thegreatdiscontent.com/adam-lisagor) 标题图像以所有屏幕尺寸完全显示，并且图像的纵横比当然总是正确的。这是使用 an 并让文本出现在 using position: absolute 上。

但是，如果您使用 css 作为 background-image 而不是 an ，您会得到类似这样的标题：[http](http://elegantthemes.com/preview/Harmony/) ://elegantthemes.com/preview/Harmony/ 调整浏览器大小以查看部分背景被遗漏。

是否可以使用第二个链接上的 background-image css 属性使 aa div 的外观和行为类似于第一个链接？或者我是否必须更改整个标题的工作方式并使用背景才能在所有屏幕尺寸中完全显示？

我想要一个不会留下任何东西的标题背景，但是像这样固定[http://getflywheel.com/](http://getflywheel.com/) 到目前为止唯一的想法是制作一个具有正确图像比例的透明 png，然后使用具有背景附件的背景图像：固定。但这似乎不是很聪明。

希望我足够清楚，我会被理解。提前非常感谢大家！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-21T14:15:29.010

这是一个只有 css/html 的漂亮而简单的提示：

**原料**

*   具有所需比例的透明 PNG 图像 (transparent-ratio-conserver.png)

*   标签

*   不同视口的不同图像（retina.jpg、desktop.jpg、tablet.jpg...）

这个想法是打开一个标签并为其分配一个透明图像（具有我们所需的比例）。我们还添加了 HTML 中的 class="responsive-image"。

```
<img src="img/transparent-ratio-conserver.png" class="responsive-image"> 
```

在 CSS 中，我们设置 background-size 以适应图像并选择图像的宽度。

```
.responsive-image{
    width: 100%;
    background-size: 100% 100%;
} 
```

最后，我们为每个视口提供正确的图像：

```
/* Retina display */
@media screen and (min-width: 1024px){
    .responsive-image{
        background-image: url('../img/retina.jpg');
    }
}
/* Desktop */
@media screen and (min-width: 980px) and (max-width: 1024px){
    .responsive-image{
        background-image: url('../img/desktop.jpg');
    }
}
/* Tablet */
@media screen and (min-width: 760px) and (max-width: 980px){
    .responsive-image{
        background-image: url('../img/tablet.jpg');
    }
}
/* Mobile HD */
@media screen and (min-width: 350px) and (max-width: 760px){
    .responsive-image{
        background-image: url('../img/mobile-hd.jpg');
    }
}
/* Mobile LD */
@media screen and (max-width: 350px){
    .responsive-image{
        background-image: url('../img/mobile-ld.jpg');
    }
} 
```

[您可以从这里](https://www.dropbox.com/s/c9i8zhvks9vzlew/Demo.zip)下载演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:36:37.533

这是通过 background-size 属性完成的：

```
background-size: cover; 
```

Cover 将使图像尽可能小，同时仍覆盖其父级的全部，并保持其纵横比。

您可能还想尝试`contain`，它可以使图像尽可能大，同时仍然适合父级。

**来源**

[MDN - 背景尺寸 CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T14:25:44.380

我认为有比`contain`or更好的解决方案`cover`（顺便说一句，这对我不起作用）。这是我最近用于徽标的示例：

```
#logo{
    max-width: 600px;
    min-height: 250px;
    margin: 0 auto;
    background: url(../images/logo.png) no-repeat center;
    background-size: 100%;
} 
```

所以现在我们有一个带有背景图像的响应式 div，其大小设置为 div 的全宽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T19:56:33.620

虽然还有其他解决方案。% 将 div 缩放为图像大小或纵横比。

```
.responsive-image{
width: 100%;
background-image: url(x.jpg);
background-repeat:no-repeat;
background-size: 100% 100%; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T14:43:31.583

您只需要将高宽比传递给元素。对于 1400x600 的图像；

*1400:600 = 98:42*

```
span( style="padding-bottom:42%;
             width:98%;
             background:url('/images/img1.jpg');
             background-size:contain;
             display:inline-block;") 
```

将显示与

```
img(src="/images/img.jpg" style="width:98%;") 
```

# powershell - 使用invoke-vmscript从powercli脚本调用powershell脚本？

> ID：15883159
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:43.907
> 
> 标签：powershell, vmware, powercli

我正在尝试使用 invoke-VMScript 函数在多个 VM 上执行 .ps1。目前我有代码： `Invoke-VMScript -ScriptText $script -VM $servername -guestcredential $gcred -hostcredential $hcred`但是`$script = 'data.ps1'`这会返回错误，指出“data.ps1”不是有效的函数或脚本。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:22:03.320

我没有准备好对此进行测试，但我猜想`-ScriptText`需要提供在 VM 上可访问的 .ps1 文件的完整路径。

```
$script = '"C:\my scripts\data.ps1"'
Invoke-VMScript -ScriptText $script -VM $servername -guestcredential $gcred -hostcredential $hcred 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:52:04.960

您必须输入脚本的脚本变量内容，而不是文件名。

# c# - 如何在不创建单独的项目文件的情况下为几个类创建 dll

> ID：15883161
> 
> 赞同：1
> 
> 时间：2013-04-08T15:30:47.260
> 
> 标签：c#, dll, msbuild

我有一个现有项目，但我想使用 MSBuild 仅为该项目中总类的一个子集生成一个 dll。

我知道我通过创建一个`.csprj`文件并插入所有类文件名（我想要的）来实现这一点，MSBuild 可以为此生成一个 dll `.csprj`。但是我不允许在该项目中引入任何新的更改（即我不能`.csprj`在该项目中创建文件）。

如何使用由现有文件中的某些文件组成的 MSBuild 创建 dll `.csprj`？

注意：我正在使用 jenkins 进行持续集成，该解决方案预计将使用 jenkins 来创建几个文件的单独 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:34:29.223

您可以直接使用 csc.exe (c# 编译器) 使用 csc.exe 进行[命令行构建](http://msdn.microsoft.com/en-us/library/vstudio/78f4aasd.aspx)。如果您每次构建主 dll 时都需要构建此 dll - 您可以将其添加为主项目中的构建后用户任务。如果您需要构建一次 - 只需从命令行使用它。语法很简单。

# ruby-on-rails - 如何根据图片模型在Ruby On Rails的CKeditor中设置图片的大小？

> ID：15883162
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:47.407
> 
> 标签：ruby-on-rails, ckeditor, paperclip

**这可能是一个重复的问题，但我对此表示怀疑。**

**我有以下情况：**

我有一个带有两个广泛使用的宝石的 ruby​​ on rails 应用程序：回形针和 ckeditor（与回形针一起使用）。

我希望根据“帖子”的类型调整我在 Ckeditor 屏幕中上传的图像的大小。现在在 Ckeditor 或任何东西中没有一个按钮可以帮助解决这个问题，尽管它确实上传了我在 picture.rb 模型中设置的不同类型的尺寸：

```
class Ckeditor::Picture < Ckeditor::Asset
  has_attached_file :data,
                :url  => "/ckeditor_assets/pictures/:id/:style_:basename.:extension",
                :path => ":rails_root/public/ckeditor_assets/pictures/:id/:style_:basename.:extension",
                :styles => { :content => '600>',:medium => '300x300', :quintet => '150x150', :thumb => '118x100#' }

  validates_attachment_size :data, :less_than => 2.megabytes
  validates_attachment_presence :data

  def url_content
    url(:content)
  end
end 
```

问题是从 Ckeditor 保存的内容（图像和标签）将显示为

```
.post_body= raw post.content 
```

其中 post.content =

```
 <p><img alt="" src="/ckeditor_assets/pictures/2/content_cartoon_paul-the-good-fight.gif" /></p> 
```

CKeditor 使用的图像是标准图像，而不是具有特定大小或类型的图像。如何设置该尺寸或类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:29:44.003

在 url_content 方法中，将 :content 替换为您需要的样式（例如，:medium、:quintet、:thumb）。请注意，对于在您设置特定样式之前上传的任何图像，将没有该尺寸的对应图像。任何上传的图像都会得到保存到 ckeditor_assets 路径的不同版本（例如，原始、中、拇指），然后您可以更改 url 参数以指向正确的版本。由于我正在使用已上传的图片进行测试，因此我花了一段时间才意识到这一点，因此在测试它是否有效时，请确保指定了您想要的所有样式，然后上传新图片。更改 url_content 的参数应该可以工作。

# ember.js - 与嵌套路由关联的模板未在父模板中呈现

> ID：15883167
> 
> 赞同：0
> 
> 时间：2013-04-08T15:30:59.270
> 
> 标签：ember.js

这是我的 HTML 模板：

```
<script type="text/x-handlebars">
    <p>Application template</p>
    {{#linkTo employees}}<button>Show employees</button>{{/linkTo}}
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="employees">
    <p>Employees template</p>
    {{#linkTo employees.employee}}<button>Show employee</button>{{/linkTo}}
    {{outlet employeeOutlet}}
</script>

<script type="text/x-handlebars" data-template-name="employee">
    <p>Employee template</p>
</script> 
```

这是javascript：

```
App = Ember.Application.create();

App.Router.map(function () {
    this.resource('employees', function () {
        this.route('employee');
    });
});

App.EmployeeRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('employee', {       // the template to render
            into: 'employees',          // the template to render into
            outlet: 'employeeOutlet',   // the name of the outlet in that template
            controller: 'employee'      // the controller to use for the template
        });
    }
}); 
```

JS斌[**在这里**](http://jsbin.com/izoviw/1/edit)

我添加了很多不必要的代码，以便尝试让员工模板在员工模板的出口中呈现（例如，命名出口，定义 renderTemplate 方法......），但它似乎不起作用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:41:54.017

您需要将员工模板命名为员工/员工，它将起作用。否则，您需要告诉视图使用员工模板。

示例 [http://jsbin.com/ukajix/1/](http://jsbin.com/ukajix/1/)

# filter - 使用 ettercap 更改请求参数

> ID：15883170
> 
> 赞同：1
> 
> 时间：2013-04-08T15:31:06.647
> 
> 标签：filter, man-in-the-middle

我正在尝试修改 HTTP GET 方法的请求参数，但是我编写的过滤器没有按预期工作。我什至不确定这是否可以使用 ettercap。到目前为止，我编写了以下过滤器：

```
 if (regex(DATA.data, ".*expiration.*")){
          msg("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
          pcre_regex(DATA.data, "expiration=[0-9][0-9]*", "expiration=20150307171853");
 } 
```

即使 URL 中出现“过期”，也不会打印该消息。我怀疑如果模式包含在消息正文中，它会起作用，但我需要修改 URL 部分。是否可以使用过滤器或任何其他 Ettercap 机制来实现？

# javascript - 使用 JQuery 选择标题之间的所有表行

> ID：15883171
> 
> 赞同：2
> 
> 时间：2013-04-08T15:31:07.247
> 
> 标签：javascript, jquery, forms, dom

具有以下自动生成的表格布局（我几乎没有影响它）

```
<table>
   <tr>
      <th>First Header</th>
      <th>
         <a href="#" class="used-for-some-action">show/hide</a>
      </th>
   </tr>
   <tr>
      <td>A question?</td>
      <td><input value="User's answer" /></td>
   </tr>
   <!-- Some more rows -->

   <tr>
      <th>Second Header</th>
   </tr>

   <!-- Some more question blocks -->
</table> 
```

...我想`<tr>`使用 Javascript/jQuery 选择两个标头之间的所有 -elements 以提供以下功能：

*   隐藏属于某个标题的所有问题。
*   自动编辑`<input>`s（*例如*选中/取消选中全部*或*恢复默认值）

导致所需操作的链接已经在正确的标题中。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:40:49.510

你可以使用[nextUntil()](http://api.jquery.com/nextUntil/)来解决这个问题。

```
function getRows(start){
    return start.nextUntil(function(i, v){
        return $('th', v).length > 0;
    });
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/KNvev/5/)

显示/隐藏的实现

```
$('table').on('click', '.used-for-some-action', function(){
    getRows($(this).closest('tr')).toggle();
    return false;
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/KNvev/6/)

**更新：**
基于@BLSully 的评论

```
$('table').on('click', '.used-for-some-action', function(){
    $(this).closest('tr').nextUntil('tr:has(th)').toggle();
    return false;
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/KNvev/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:43:46.397

我喜欢 Arun P Johny 的回答。这是我最初的想法（这段代码实现了隐藏/显示功能）

```
$(".used-for-some-action").click(function(e) {
    e.preventDefault()

    $(this).parents("tr").next().is(":visible") ? $(this).parents("tr").next().hide() : $(this).parents("tr").next().show();
}); 
```

小提琴：http: [//jsfiddle.net/DQMht/1/](http://jsfiddle.net/DQMht/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:52:00.283

我会保持简单。您正在使用 JavaScript，因此当页面加载时，只需将一个类添加到带有 a 的行`<th>`，然后使用该类。

```
$(function() {
    $("th").parent().addClass("hasTH");
}); 
```

然后，您可以简单地定位具有`hasTH`该类的行。

* * *

另一种选择是在页面加载时仍然这样做，但不是添加类，而是将行分组到新`<tbody>`元素中。这将为您提供最纯粹的 DOM 表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:45:02.437

试试这个：

```
$("tr:has(th)").each(function(){
    if ($(this).find('th').length==2) {
        // here you have this: that represent the row which have two td
    }
}) 
```

# clearcase - 如何找到 clearcase 符号链接？

> ID：15883174
> 
> 赞同：3
> 
> 时间：2013-04-08T15:31:14.820
> 
> 标签：clearcase

目前，在更新 clearcase 视图时，我必须等待符号链接错误。然后我取损坏的符号链接的名称并专门搜索它。

有没有办法找到所有损坏的符号链接，而不必知道名称？

如何一次找到一个：

*   清除工具>`cd C:\cc_view\view_name\source_app`
*   清除工具>`find -all -type l -name "missing.link.name" -nxname -print`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:39:49.613

您的 find 查询中不需要 -all 。
快照视图更新中损坏的符号链接是可见的元素：

```
cleartool find . -type l -name "missing.link.name" -nxname -print 
```

您可以在 DOS 会话中执行该命令（“ `cleartool find`”，而不是 cleartool 的“ `cleartool> find`”）：它允许您将结果重定向到文本文件并解析结果。

IBM 文章“[如何找到损坏的（孤立的）符号链接](http://www-01.ibm.com/support/docview.wss?uid=swg21601126)”也可以提供帮助。

### 原因

> 用户重命名了目标，因此符号链接指向一个不存在的目标。
> 
> 重命名版本化目标文件（`a.doc -> a.docx`由 ClearCase Explorer 完成）后，我收到更新错误，即`symlink a.doc`不存在。
> 
> 无法解析符号链接“filename.doc”。符号链接目标将不会被加载。
> 
> *   我在哪里可以找到链接本身（它位于哪个文件夹中？）？
> *   如何解决符号链接的重命名（？）？

### 回答

> 要查找和删除符号链接：
> 
> *   **使用动态视图（快照视图无法加载缺少的链接）**。
> *   跑`M:\viewtag\vobtag>cleartool find . -kind slink -print`
> *   有关如何删除上述命令输出中的符号链接的信息，请参阅以下技术说明：“[无法解析 VOB 符号链接](http://www-01.ibm.com/support/docview.wss?uid=swg21125166)”：
> 
> 命令提示符下的 cleartool ls 将显示：

```
virt.46e5e94ff9024144ab0fe9ed432ce6e6 --> ../virt
virt.5043bcc7c8f44439938d634bd5ba9ac2 --> ..virt [not loaded] 
```

> 上面的符号链接指向 ClearCase 之外的资源，这使得超链接无法在 UCM 中使用。

### 解决问题

> `cleartool rmname`使用命令 从 VOB 中删除断开的（悬空）链接以清除错误。
> 
> 例子：

```
cleartool rmname virt.46e5e94ff9024144ab0fe9ed432ce6e6 
```

> Using`cleartool rmname`允许您保留符号链接，但从将来的目录版本中删除对它的引用。
> 可以使用 永久删除符号链接，有关详细信息`cleartool rmelem`，请参阅[技术说明 1148781](http://www-01.ibm.com/support/docview.wss?&rs=984&uid=swg21148781)。

# jquery - jquery mobile用另一个超链接替换超链接

> ID：15883180
> 
> 赞同：1
> 
> 时间：2013-04-08T15:31:39.597
> 
> 标签：jquery, css, jquery-mobile

我需要用另一个 a 标签替换某个类的 html“a”标签。

这是我的代码

```
<html>
<head>

<script type="text/javascript"src="jquery.mobile-1.3.0"></script>
<link rel="stylesheet" href="jquery.mobile-1.3.0" type="text/css">

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

$('.list1').replaceWith('<a class="list3" href="#">link3</a>');
</script>

</head>

<body>

<h1> hello world </h1>

<div class="content-page" >
  <div class="list-page">
    <a class="list1" href="#">link1</a>
    <a class="list2" href="#">link2</a>  
  </div>
</div>
</body>

</html> 
```

我使用了 jquery replaceWith 函数，但令我失望的是，在这种情况下它对我不起作用。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:55:12.880

解决方案：

```
<html>
<head>
    <!-- STYLESHEETS //-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <!-- JavaScripts //-->
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>   
    <script type="text/javascript">
    $(document).ready(function() {
        $('.list1').replaceWith('<a class="list3" href="#">link3</a>');
    }); 
    </script>
</head>
<body>
<h1> hello world </h1>
<div class="content-page" >
  <div class="list-page">
    <a class="list1" href="#">link1</a>
    <a class="list2" href="#">link2</a>  
  </div>
</div>
</body> 
```

您需要将代码包装到准备好的文档中。

或者如果你想要 jQuery Mobile 版本：

```
<html>
<head>
    <!-- STYLESHEETS //-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <!-- JavaScripts //-->
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>   
    <script type="text/javascript">
    $(document).on('pagebeforeshow', '.content-page', function() {
        $('.list1').replaceWith('<a class="list3" href="#">link3</a>');
    }); 
    </script>
</head>
<body>
<h1> hello world </h1>
<div class="content-page" data-role="page">
  <div class="list-page">
    <a class="list1" href="#">link1</a>
    <a class="list2" href="#">link2</a>  
  </div>
</div>
</body> 
```

**编辑 ：**

在您的示例中，替换以下行：

```
<script type="text/javascript"src="jquery.mobile-1.3.0"></script>
<link rel="stylesheet" href="jquery.mobile-1.3.0" type="text/css">
<script type="text/javascript" src="jquery.js"></script> 
```

有了这行：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<!-- JavaScripts //-->
<script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"</script> 
```

基本上首先初始化jQuery Mobile css，然后初始化jQuery，然后初始化jQuery Mobile。在您的示例中，您在 jQuery 之前初始化 jQuery Mobile，这可能会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:19:28.087

此外，最好在 DOM 操作之后使用以下内容。这样做是为了将 JQuery 移动 CSS 应用回元素。

```
 $(":jqmData(role='page')").trigger('create'); 
```

或者具体来说

```
 $(".list-page").trigger('create'); 
```

如果您想刷新 DOM 中特定部分的 CSS。

# python - 使用 python 查询 Cloudant (couchdb)（错误 500，未知查询语言）

> ID：15883182
> 
> 赞同：2
> 
> 时间：2013-04-08T15:31:43.350
> 
> 标签：python, couchdb, cloudant

我对 Python 和 Cloudant/couchdb 还很陌生，因此请指导我访问您认为可能有帮助的任何资源。

我知道有一个[类似的问题](https://stackoverflow.com/questions/7810064/query-cloudant-with-python)，但我会发布这个问题，以防看到这个问题的人对 Cloudant 有丰富的经验（而且我的错误消息不同）。我正在尝试查询存储在 cloudant 上的一堆 JSON 文档。为了在 python 中创建视图，我安装了 couchpy。我正在使用 Mining Social Web O'Reilly Book 中的代码。如果我正在查询我的本地 couchdb 服务器，而不是 cloudant 服务器，我正在使用的代码有效。

我一直收到此错误消息：

```
db.view('index/entity_count_by_doc', group=True)],
File "build/bdist.macosx-10.6-intel/egg/couchdb/client.py", line 984, in __iter__
File "build/bdist.macosx-10.6-intel/egg/couchdb/client.py", line 1003, in rows
File "build/bdist.macosx-10.6-intel/egg/couchdb/client.py", line 990, in _fetch
File "build/bdist.macosx-10.6-intel/egg/couchdb/client.py", line 880, in _exec
File "build/bdist.macosx-10.6-intel/egg/couchdb/http.py", line 393, in get_json
File "build/bdist.macosx-10.6-intel/egg/couchdb/http.py", line 374, in get
File "build/bdist.macosx-10.6-intel/egg/couchdb/http.py", line 419, in _request
File "build/bdist.macosx-10.6-intel/egg/couchdb/http.py", line 310, in request
couchdb.http.ServerError: (500, ('unknown_query_language', 'python')) 
```

关于在 cloudant 上使用 python 进行查询的替代方法的任何想法？我对其他解决方案持开放态度。我确定我忽略了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:00:18.033

您很可能会收到错误，因为`couchpy`在多租户安装中未在 Cloudant 上安装/可用。

[视图](http://guide.couchdb.org/draft/views.html)需要在 JavaScript 或 Erlang 中创建（或者您需要注册他们可能允许 Python 的专用安装——联系他们）。

Cloudant 建议使用[CouchDBKit](http://couchdbkit.org/)或[Requests](http://docs.python-requests.org/en/latest/)（根据他们的[FAQ](https://cloudant.com/for-developers/faq/development/)）。

# wicket - 测试检票口页面

> ID：15883185
> 
> 赞同：2
> 
> 时间：2013-04-08T15:31:44.510
> 
> 标签：wicket, wicket-tester

我正在为检票口页面编写测试。我的页面上有三个下拉菜单。根据从下拉列表中选择的值，面板被渲染（面板包含一个数据表）。如何更改检票口测试中下拉列表的值，以便我可以测试渲染面板以选择不同的值组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:24:15.077

```
@Test
public void testPanel() {
    WicketTester tester = new WicketTester(new JavaWhatApplication()) ;

    DropDownChoice<Type> typeDropDown = 
(DropDownChoice<Type>)tester.getComponentFromLastRenderedPage("categoryForm:types");
    assertEquals(3, typeDropDown.getChoices().size());

    FormTester formTester = tester.newFormTester("categoryForm",false);
    formTester.select("types", 1);   // 1 is index
    tester.executeAjaxEvent("categoryForm:types", "onchange"); 

} 
```

[Wicket 快速指南 - 单元测试](http://www.javawhat.com/showWebsiteContent.do?id=527805)

# sql - Oracle 是否优化 OR 条件？

> ID：15883190
> 
> 赞同：0
> 
> 时间：2013-04-08T15:31:55.567
> 
> 标签：sql, oracle

我遇到了一个奇怪的问题。假设我们有一个查询

```
SELECT * FROM some_table WHERE STATUS = 'issued'  
AND ((TRANSACTIONDATE = :to_date AND TYPE = 'A') 
    OR (TRANSACTIONDATE >= :from_date AND TRANSACTIONDATE < :to_date AND TYPE = 'M')) 
```

此查询对于某些参数组合运行良好。但是，如果我将 04/03/2013 作为 from_date 并将 04/04/2013 作为 end_date 传递，我只会看到满足第二部分条件的行

```
(TRANSACTIONDATE >= :from_date AND TRANSACTIONDATE < :to_date AND TYPE = 'M') 
```

在另一个数据库实例上，此问题不可重现。所以我认为它出现是因为一些 Oracle 设置。我对吗？

# ruby-on-rails - 如何从 Rails 引擎中的设计中获得正确的 current_MODEL？

> ID：15883191
> 
> 赞同：0
> 
> 时间：2013-04-08T15:31:58.840
> 
> 标签：ruby-on-rails, devise

我正在编写一个引擎，我希望它与设计很好地集成，但不一定依赖它。具体来说，我希望能够引用 current_MODEL（默认值：current_user）。我可以在引擎控制器中使用通用方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:20:49.997

看起来 Ryan Bigg 已经回答了我的问题！

[http://ryanbigg.com/2012/03/engines-and-authentication/](http://ryanbigg.com/2012/03/engines-and-authentication/)

# r - 选择字符串并在逻辑表达式中使用以创建新变量 - R

> ID：15883192
> 
> 赞同：0
> 
> 时间：2013-04-08T15:32:02.870
> 
> 标签：r, string

我有一个分类变量，指示流感诊所的位置以及“其他”类别。选择“其他”类别的参与者对他们的位置给出开放式回答。在大多数情况下，这些开放式回答符合现有类别之一（例如，一个类别是“公共卫生诊所”，但一些受访者选择“其他”并引用“商场”，即公共卫生诊所）。我可以很容易地手动完成，但想学习代码来选择“商场”字符串，然后使用逻辑表达式将这些人分配给“公共卫生诊所”（例如，为流感诊所的位置创建一个新变量）。

我的分类变量是“lrecflu2”，我的字符串变量是“lfother”

到目前为止，我有：

```
mall <- grep("MALL", Motiv82012$lfother, value = TRUE) 
```

这给了我一个向量，其中包含所有包含“MALL”的字符串响应（所有字符串在数据框中都大写）

如何在逻辑表达式中使用这个向量来创建一个新变量，将这些人分配给“公共卫生诊所”类别，并为没有选择“其他”的人分配流感诊所位置变量的原始值（并且不字符串变量中有值）到新的流感诊所位置变量？

也许， grep 甚至不是正确使用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:57:14.643

据我了解，您在数据框中有一列，您希望将一个字符值重新分配给另一个。如果是这样，你几乎在那里......

```
set.seed(1) # for generating an example
df1 <- data.frame(flu2=sample(c("MALL","other","PHC"),size=10,replace=TRUE))
df1$flu2[grep("MALL",df1$flu2)] <- "PHC" 
```

这`grep()`是为您提供所需的矢量索引；然后，您基于此对向量进行子集化并更改这些元素。

**更新 2**

这应该会产生`data.frame`与您正在使用的类似的结果：

```
set.seed(1)
lreflu2 <- sample(c("PHC","Med","Work","other"),size=10,replace=TRUE)
Ifother <- rep("",10) # blank character vector
s1 <- c("Frontenac Mall","Kingston Mall","notMALL")
Ifother[lreflu2=="other"] <- s1
df1 <- data.frame(lreflu2,Ifother)
### alternative:
### df1 <- data.frame(lreflu2,Ifother, stringsAsFactors = FALSE)
df1 
```

给出：

```
 lreflu2        Ifother
1      Med               
2      Med               
3     Work               
4    other Frontenac Mall
5      PHC               
6    other  Kingston Mall
7    other        notMALL
8     Work               
9     Work               
10     PHC 
```

如果您正在寻找完全不需要的字符串匹配`grep`：

```
df1$lreflu2[df1$Ifother=="MALL"] <- "PHC" 
```

使用`regex`：

```
df1$lreflu2[grep("Mall",df1$Ifother)] <- "PHC" 
```

给出：

```
 lreflu2        Ifother
1      Med               
2      Med               
3     Work               
4      PHC Frontenac Mall
5      PHC               
6      PHC  Kingston Mall
7    other        notMALL
8     Work               
9     Work               
10     PHC 
```

是否`Ifother`是具有模式字符的因子或向量不会影响事物。`data.frame`默认情况下将强制字符串向量转换为因子。

# javascript - jQuery Mobile 中的背景图像

> ID：15883198
> 
> 赞同：0
> 
> 时间：2013-04-08T15:32:12.767
> 
> 标签：javascript, jquery, mobile

我是 jQuery 的初学者，我在修复背景时遇到问题，图像会在 1 秒后显示

```
<body id="content" style="display: none;background-image:url('images/wood.jpg'); "> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:35:50.333

您将显示设置为无，因此 1 秒后您需要将其删除。

您应该使用 window.setTimeout 函数。1000 毫秒 = 1 秒。

[设置超时](http://www.w3schools.com/jsref/met_win_settimeout.asp)

您可以使用 jQuery 设置可见性，如下所示：

```
$("#content").show(); 
```

所以一个完整的代码示例是：

```
setTimeout(function(){
 $("#content").show();
},1000) 
```

# ruby-on-rails-3 - Rails：FriendlyId gem 不工作

> ID：15883204
> 
> 赞同：1
> 
> 时间：2013-04-08T15:32:36.170
> 
> 标签：ruby-on-rails-3, rubygems, friendly-url, friendly-id

我试图安装 gem FriendlyId。我正在关注 railscast：314-pretty-urls-with-friendlyid。它似乎很容易安装。但不为我工作。

以下是我执行的步骤：

```
added gem "friendly_id", "~> 4.0.9" in Gemfile 
```

然后我运行`bundle install`命令

然后将我的产品模型修改为：

```
class Product < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name

  attr_accessible :name, :product_code, :recipe, :selling_price, :servings,   letsrate_rateable "quality", "packaging", "hygiene" , "service", "price"
  validates :name, :presence => true
  class << self
    def search(params)
             if params[:search]
                products = Product.published.includes(:product_sub_categories)
             end
    end
  end
 end 
```

它仍然显示'id'：

```
http://localhost:3000/products/9 
```

根据 railscasts 它应该显示产品名称。但事实并非如此。我单独安装 gem 但没有效果。

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T15:52:33.733

Not sure why this is not mentioned in Guide, but try:

```
alias_attribute :to_param, :slug 
```

This works because to_param method allows to customise the id part of URL. And here you are assigning that part to friendly_id generated URL.

# Another solution

I am not sure if this is implemented inside friendly_id, but I did this:

```
class Product < ActiveRecord::Base
  def self.find(id_or_slug)
    case id_or_slug
    when String
      find_by_slug id_or_slug
    else
      super id_or_slug
    end
  end
end 
```

# c++ - 没有声明字符串？

> ID：15883214
> 
> 赞同：0
> 
> 时间：2013-04-08T15:32:56.457
> 
> 标签：c++

```
#include <string.h>
using namespace std;
namespace charcount 
{
    int ShowPerCent();
    int PerCent();
    int Values(char letter);
    int analize(string var);
} 
```

这段代码是我项目的“functions.h”的一部分。这说：

```
functions.h: 7:13: error: 'string' was not declared in this scope 
```

我不明白为什么这么说。我尝试`std::string`并没有。有谁知道会发生什么？如果您需要更多其他信息，请询问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:33:19.080

正确的标题是`<string>`. 将包含指令更改为：

```
#include <string> 
```

C++ 标准库头文件*不*以`.h`.

这样做被认为是非常糟糕的做法`using namespace std;`，尤其是在头文件中。这会使用命名空间中的名称污染全局命名`std`空间，并将所述污染传播到包含它的任何文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:38:56.280

在 C 中，

```
#include <string.h> 
```

为您提供 C 字符串标题（`strlen()`等`strcmp()`）。

在 C++ 中，

```
#include <string.h> 
```

已弃用，但为您提供相同的 C 字符串标头。鼓励您使用

```
#include <cstring> 
```

相反，它为您提供相同的功能，但在`std::`名称空间（它们所属的位置）中。

如果你想要`std::string`面向对象的自动分配自动扩展 C++ 的优点，你必须：

```
#include <string> 
```

并且请不要使用`using namespace`，*尤其是*不要与`std::`. 这个想法是*明确*说明给定标识符来自哪个命名空间。

**编辑：**借调 sftrabbit，他打字比我快。虽然`using namespace`在您的 .cpp 文件中可能是可以原谅的，但在标头中这是一种死罪，因为包含您的标头可能会使完全有效的 C++ 代码突然无效，因为您更改了名称空间。

# mysql - 消息系统的 MYSQL GROUP 和 ORDER

> ID：15883219
> 
> 赞同：0
> 
> 时间：2013-04-08T15:33:07.240
> 
> 标签：mysql, messaging

我一直在用这个来拉头发，我有一个用于网站的消息传递系统，用户可以在其中互相发送消息，收件箱现在会向您显示消息列表（例如老式短信），但我想做更现代，给人一种更像 Facebook 的感觉。该表非常基本

```
id  senderid    recipientid dateadded   message
--------------------------------------------------------------------
1   1              2        2013-04-01  hello1
2   3              2        2013-04-02  hello2
3   1              2        2013-04-03  hello3
4   3              2        2013-04-04  hello4
5   3              2        2013-04-05  hello5
6   4              2        2013-04-06  hello6 
```

现在，我遇到的困难是加载邮件，按发件人 ID 对它们进行分组，并添加最新日期的发件人的邮件，从最旧到最新排序

所以我希望上面的表格像这样加载

```
id  senderid    recipientid dateadded   message
--------------------------------------------------------------------
5   3              2        2013-04-05  hello5
4   3              2        2013-04-04  hello4
2   3              2        2013-04-02  hello2
3   1              2        2013-04-03  hello2
1   1              2        2013-04-01  hello1
6   4              2        2013-04-01  hello1 
```

最新消息的发件人ID在前，依此类推。

这是我刚刚根据其他类似帖子使用的查询

```
SELECT m.*
FROM messages m 
INNER JOIN (
SELECT senderid, recipientid, dateadded
FROM messages
WHERE recipientid = :user_id
GROUP BY senderid
ORDER BY dateadded DESC
) senders ON m.senderid = senders.senderid
ORDER BY senders.dateadded DESC 
```

不幸的是，该查询不起作用，它只对发件人的

同样，这里的目标是加载发送给登录用户的所有消息，但按发件人 ID 和为消息添加的最新日期对它们进行排序

提前感谢您的任何评论，Stackoverflow 对我帮助很大，我非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:38:34.520

这个怎么样？

```
SELECT senderid, recipientid, MAX(dateadded) AS MAX_dateadded
FROM messages
WHERE recipientid = :user_id
GROUP BY senderid
ORDER BY MAX_dateadded DESC 
```

# asp.net-mvc - 支持“DMSContext”上下文的模型已更改

> ID：15883220
> 
> 赞同：1
> 
> 时间：2013-04-08T15:33:10.213
> 
> 标签：asp.net-mvc, entity-framework

运行我的 mvc 4 应用程序时收到以下错误。

自数据库创建以来，支持“DMSContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库

我正在针对现有数据库运行我的应用程序，并且不想在每次模型更改时重新创建数据库。

我在谷歌上找到了很多答案，但没有一个有效。

具体来说，我尝试将以下内容添加到我的 global.asax 中：

```
Database.SetInitializer<DMSContext>(null); 
```

和

```
Database.SetInitializer<DMSContext<Contact>>(null); 
```

在上面，DMSContext 就是 DbContext。联系是导致错误的更改起源的模型。

我还尝试将以下内容添加到我的上下文类中：

```
public DMSContext() : base()
          {
             Configuration.AutoDetectChangesEnabled = false;
          } 
```

我遵循的大部分方向都来自此页面，但没有运气。

[自创建数据库以来，支持 <Database> 上下文的模型已更改](https://stackoverflow.com/questions/3600175/the-model-backing-the-database-context-has-changed-since-the-database-was-crea)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:43:47.647

虽然你不使用迁移尝试创建一个，不要运行它，但你将能够看到与数据库的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:06:25.687

如果您正在使用`Entity Framework Code First`，建议您在应用程序中启用迁移。为此，[请参阅此链接](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)。

现在，每次您更改代码中的某些内容（主要是实体）时，只需构建然后`Update-Database -Force`在您的`Package Manager Console`.

如果您还有其他问题，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-21T10:29:28.927

检查继承 DbContext 的类的名称。它的名称必须与 Web.config 中的 connectionString 的名称相同

```
<connectionStrings>
    <add name="TheSameNameAsYourDbContextClass" providerName="" connectionString="" />
  </connectionStrings> 
```

# clojure - 将参数传递给 project.clj 可读的 leiningen

> ID：15883222
> 
> 赞同：5
> 
> 时间：2013-04-08T15:33:12.407
> 
> 标签：clojure, command-line-arguments, argument-passing, leiningen

我有一个`project.clj`文件，我想根据 leiningen 调用时传入的参数以不同的方式使用它。这是我假设的示例项目

```
(defproject simple "0.0.1"
  :source-paths [(get-argument "source.path")]) 
```

（在这种情况下`get-argument`，只需调用`System/getProperty`）。我会像这样使用这个文件，

```
lein2 compile -Dsource.path=path/to/location 
```

问题是两方面的，

*   我不知道如何将论点传递给 leiningen。它不接受`-Dkey=value`语法。我在文档中找不到有关传递可选/额外参数的任何内容。我错过了一些明显的东西吗？
*   里面的子表单`defproject`似乎是用一种特殊的方式处理的。我找不到将代码放入其中的简单方法。

我找到了一些方法

*   [https://github.com/weavejester/environ](https://github.com/weavejester/environ)看起来很有希望，但它似乎只适用于正确的 clojure 代码，而不是 project.clj
*   [https://groups.google.com/forum/?fromgroups=#!topic/leiningen/t8G6Et1_j8w](https://groups.google.com/forum/?fromgroups=#!topic/leiningen/t8G6Et1_j8w) - 这是一种可以解决一半问题的解决方法
*   [建立需要基于构建平台的不同依赖项的 leiningen 项目的优雅方法是什么？](https://stackoverflow.com/questions/4688336/what-is-an-elegant-way-to-set-up-a-leiningen-project-that-requires-different-dep)给出了一些想法如何评估 project.clj 中的代码
*   [https://github.com/sattvik/leinjacker](https://github.com/sattvik/leinjacker)承诺会做一些肮脏的把戏，但我无法让它在我的环境中工作

（我真正想要使用它的是我有一个具有不同工件的 clojurescript 项目。虽然可以为它配置不同的构建，但它们都共享相同的交叉。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T05:25:32.677

在类 unix 平台上方便的一种方法是使用环境变量，并结合 lein 对`project.clj`文件中标有波浪号的表达式求值的意愿。因此，对于您的示例，您可以提供`project.clj`如下内容：

```
（defproject 简单“0.0.1”
  :source-paths [ ~(System/getenv "MY_SRC_PATH") ]
  : 依赖 [[org.clojure/clojure "1.5.0"]])

```

...然后在启动 lein 时设置环境变量，如下所示：

```
MY_SRC_PATH="s2" lein 编译

```

我不知道这种方法在 Windows 上的效果如何。

# dart - 如何在 openWrite 之后完成/刷新写入/关闭

> ID：15883230
> 
> 赞同：1
> 
> 时间：2013-04-08T15:33:36.377
> 
> 标签：dart

此代码尝试打开现有文件，然后通过 openWrite 向其中添加文本。

```
import 'dart:io';

main() {
  File inFile = new File('/tmp/foo.txt');
  String currentText = inFile.readAsStringSync();
  var writer = inFile.openWrite();
  writer.write(currentText);
  writer.write("\nOne more line");
  writer.close();
  exit(0);
} 
```

完成后文件为空。如果 exit(0) 不存在，它工作正常。应该执行哪些调用以确保在退出之前写入所有写入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:37:58.973

由于编写器是异步的，因此您将希望使用编写器的[done](http://api.dartlang.org/docs/releases/latest/dart_io/IOSink.html#done)属性在流的写入和关闭完成时得到通知。例如：

```
import 'dart:io';

main() {
  File inFile = new File('/tmp/foo.txt');
  String currentText = inFile.readAsStringSync();
  var writer = inFile.openWrite();
  writer.write(currentText);
  writer.write("\nOne more line");
  writer.close();
  writer.done.then((_) {
    exit(0);
  });
} 
```

# vb.net - 使用“字典”时如何解决错误

> ID：15883232
> 
> 赞同：1
> 
> 时间：2013-04-08T15:33:39.633
> 
> 标签：vb.net, dictionary

我正在创建一个类来处理我的应用程序的注册表项，但我很早就遇到了一些问题。

在下面，它应该获取 SubKey 的所有键/值并将它们添加到`Dictonary`. 被注释掉的消息框正确显示了键和值，但是每次运行该函数时，下面的行都会生成一个错误`A first chance exception of type 'System.NullReferenceException'`。

由于注册表项本身似乎很好，我认为这与我使用`RegKeys Dictonary`. 如果有人可以看看并提出建议，我将不胜感激。谢谢。

这就是我开始课程的方式（我什至还没有尝试做任何其他事情） -

```
Private Sub getMyRegSettings()

        Dim ServerPing As RegistryKey = Registry.CurrentUser.OpenSubKey("ServerPing")
        Dim Servers As RegistryKey = ServerPing.OpenSubKey("Servers")
        Dim MyRegistry As New MyRegistry(Servers)
        Dim RegKeys As Dictionary(Of String, String) = MyRegistry.RegKeys

End Sub 
```

这是给我带来麻烦的课程-

```
Public Class MyRegistry

    Public RegKeys As Dictionary(Of String, String)

    Public Sub New(SubKey As RegistryKey)

        get_registry_keys(SubKey)

    End Sub

    Private Sub get_registry_keys(SubKey As RegistryKey)

        ' Print the information from the Test9999 subkey.
        For Each valueName As String In SubKey.GetValueNames() ' Error occurs here

            'MsgBox("Key: " & valueName & vbCrLf & "Value: " & SubKey.GetValue(valueName))
            RegKeys(valueName) = SubKey.GetValue(valueName).ToString()

        Next valueName

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:42:51.637

你没有初始化你的`RegKeys`对象

尝试更改此行：

```
Public RegKeys As Dictionary(Of String, String) 
```

对此：

```
Public RegKeys As New Dictionary(Of String, String) 
```

这将确保在创建类时初始化字典

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:43:45.867

这条线

```
Public RegKeys As Dictionary(Of String, String) 
```

声明了 Dictionary 类型的变量（引用类型），但该变量不是 Dictionary 的实例。要成为有效实例，您需要使用 new 实例化

```
Public RegKeys = new Dictionary(Of String, String) 
```

# ajax - 对必须添加计算字段的视图模型创建感到困惑

> ID：15883233
> 
> 赞同：1
> 
> 时间：2013-04-08T15:34:02.393
> 
> 标签：ajax, knockout.js

我的 json 调用返回一个对象数组：

```
[
{
Table: 1,
FirstName: "Bert",
LastName: "Smith",
Place: 1
},
{
Table: 1,
FirstName: "Suzanne",
LastName: "Smith",
Place: 2
},
{
Table: 1,
FirstName: "Matthew",
LastName: "Stewart",
Place: 3
},
{
Table: 1,
FirstName: "Brian",
LastName: "Robinson",
Place: 4
},
{
Table: 1,
FirstName: "Jennifer",
LastName: "Robinson",
Place: 5
},
{
Table: 1,
FirstName: "Andrew",
LastName: "Caygill",
Place: 6
},
{
Table: 1,
FirstName: "Susan",
LastName: "Caygill",
Place: 7
},
{
Table: 1,
FirstName: "John",
LastName: "Spreadbury",
Place: 8
},
{
Table: 1,
FirstName: "Anne-Marie",
LastName: "Nevin",
Place: 9
}] 
```

我的 HTML 中有一个模板：

```
<script type="text/html" id="dataLine">
    <div class="itemLine">
        <div class="Name">
            <span class="fixtureBoxLine" data-bind="text: fullName"></span>
        </div>
        <div class="TableNo">
            <span class="fixtureBoxLine" data-bind="text: Table"></span>
        </div>
    </div>
</script> 
```

绑定是：

```
<div data-bind="template: { name: 'dataLine', foreach: pageCol1 }"></div> 
```

我的视图模型是：

```
var viewModel = {
    fields: ko.observableArray([]),
    pageSize: ko.observable(1),
    pageIndex: ko.observable(0)
}; 
viewModel.pageCol1 = ko.computed(function() {
    var size = Number(this.pageSize());
    var start = this.pageIndex() * size * 2; //2 cols per page
    var end = start + size;
    return this.fields.slice(start, end);
}, viewModel); 
```

一切正常，除了我无法获得“全名”属性。如果我尝试以与上面使用“pageCol1”相同的方式将其添加到视图模型中，那么就像我的 json 成功属性一样：

```
viewModel.fields(xlData); 
```

它不起作用，因为返回的数据没有“fullName”属性。

我觉得我今天已经尝试了所有可能的组合，现在让自己头疼！请有人指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:57:38.110

尝试`pageCol1`通过将新字段（从另外两个连接）添加到响应数组来扩展您的响应数组，例如：

```
viewModel.pageCol1 = ko.computed(function() {
    var size = Number(this.pageSize());
    var start = this.pageIndex() * size * 2; //2 cols per page
    var end = start + size;

    for( var i = 0, len = this.fields.length; i < len; i++ ) {
        this.fields[ i ].fullName = this.fields[ i ].FirstName + ' ' + this.fields[ i ].LastName;
    }

    return this.fields.slice(start, end);
}, viewModel); 
```

所以在你迭代你的数组之前的最终结果将是：

```
[
{
Table: 1,
FirstName: "Bert",
LastName: "Smith",
fullName: "Bert Smith",
Place: 1
},
{
Table: 1,
FirstName: "Suzanne",
LastName: "Smith",
fullName: "Suzanne Smith",
Place: 2
},
{
Table: 1,
FirstName: "Matthew",
LastName: "Stewart",
fullName: "Matthew Stewart",
Place: 3
},
... 
```

# vba - 用于以字节为单位返回文件大小的 VBA Excel 函数

> ID：15883237
> 
> 赞同：15
> 
> 时间：2013-04-08T15:34:17.143
> 
> 标签：vba, excel, function, size, byte

我希望在 Excel 2010 中使用 VBA 返回同一文件夹中或不同文件夹中某些文件的文件大小。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-03-30T03:07:56.353

有一个非常好用且简单的 VBA 函数，目前还没有提到，[FileLen](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/filelen-function)：

`FileLen("C:\Temp\test file.xls")`

它以**字节**为单位返回文件的大小。

结合遍历目录中的文件，可以实现您最初想要的（获取文件夹中文件的大小）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-09T09:03:02.090

这里如何在 Excel 单元格中使用它：

```
 =GetDirOrFileSize("C:\Users\xxx\Playground\","filename.xxx") 
```

如果您有德语 Windows，则：

```
=GetDirOrFileSize("C:\Users\xxx\Playground\";"filename.xxx") 
```

这是 VBA 模块的功能：（只需启用开发人员工具，然后将其复制并粘贴到新模块中）

```
Function GetDirOrFileSize(strFolder As String, Optional strFile As Variant) As Long

'Call Sequence: GetDirOrFileSize("drive\path"[,"filename.ext"])

   Dim lngFSize As Long, lngDSize As Long
   Dim oFO As Object
   Dim oFD As Object
   Dim OFS As Object

   lngFSize = 0
   Set OFS = CreateObject("Scripting.FileSystemObject")

   If strFolder = "" Then strFolder = ActiveWorkbook.path
   If Right(strFolder, 1) <> "\" Then strFolder = strFolder & "\"
   'Thanks to Jean-Francois Corbett, you can use also OFS.BuildPath(strFolder, strFile)

   If OFS.FolderExists(strFolder) Then
     If Not IsMissing(strFile) Then

       If OFS.FileExists(strFolder & strFile) Then
         Set oFO = OFS.Getfile(strFolder & strFile)
         GetDirOrFileSize = oFO.Size
       End If

       Else
        Set oFD = OFS.GetFolder(strFolder)
        GetDirOrFileSize = oFD.Size
       End If

   End If

End Function   '*** GetDirOrFileSize *** 
```

# android - 如何将表格布局垂直分成相等的部分？

> ID：15883238
> 
> 赞同：3
> 
> 时间：2013-04-08T15:34:18.117
> 
> 标签：android, layout, android-linearlayout, android-tablelayout

我是android新手，有一个疑问。我正在创建一个带有表格的布局。我有线性布局作为主要布局和 3 个子布局，我使用布局权重对其进行了划分。现在我的问题是如何将线性布局中的表格布局分成 6 个相等的部分（其 layout_weight 为 0.70）。

```
<TableLayout
    android:layout_height="0dp"
    android:layout_width="300dip"
    android:id="@+id/tablelayout01"
    android:layout_weight="0.70"
    android:layout_gravity="center"
    android:gravity="center"
    android:weightSum="1">

    <TableRow 
        android:layout_width="300dp"
        android:layout_height="0dp"
        android:id="@+id/tablerow01"
        android:layout_marginTop="15dp"
        android:layout_weight="0.10"
        android:gravity="center">

        <EditText
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:background="@drawable/edittext_bg"
            android:ems="10"
            android:gravity="center"
            android:hint="Name"
            android:textColorHint="#333333"
            android:shadowRadius="2"  
            android:shadowColor="#000000"
            android:shadowDx="2"
            android:shadowDy="4">
            <requestFocus />
        </EditText>

    </TableRow>

  <TableRow
       android:layout_width="300dp"
        android:layout_height="0dp"
        android:id="@+id/tablerow02"
        android:layout_weight="0.10"
        android:gravity="center">

      <EditText
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:background="@drawable/edittext_bg"
            android:ems="10"
            android:gravity="center_horizontal"
            android:hint="Email"
            android:inputType="textEmailAddress"
            android:textColorHint="#333333">
            <requestFocus />
        </EditText>  
  </TableRow>

   <TableRow
       android:layout_width="300dp"
        android:layout_height="0dp"
        android:id="@+id/tablerow03"
        android:layout_weight="0.10"
        android:gravity="center">

      <EditText
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:background="@drawable/edittext_bg"
            android:ems="10"
            android:gravity="center_horizontal"
            android:hint="Password"
            android:inputType="textPassword"
            android:textColorHint="#333333">
            <requestFocus />
        </EditText>  
  </TableRow>

     <TableRow
       android:layout_width="300dp"
        android:layout_height="0dp"
        android:id="@+id/tablerow04"
        android:layout_weight="0.10"
        android:gravity="center">

      <EditText
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:background="@drawable/edittext_bg"
            android:ems="10"
            android:gravity="center_horizontal"
            android:hint="Confirm Password"
            android:inputType="textEmailAddress"
            android:textColorHint="#333333">
            <requestFocus />
        </EditText>  
  </TableRow>

    <TableRow
       android:layout_width="300dp"
        android:layout_height="0dp"
        android:id="@+id/tablerow05"
        android:layout_weight="0.15">

      <Button
            android:layout_width="300dp"
            android:layout_height="wrap_content"
            android:background="@drawable/btn_signup"
            android:text="Create Account"
            android:textColor="#ffffff">

        </Button>  
  </TableRow>  

        <TableRow
       android:layout_width="300dp"
        android:layout_height="0dp"
        android:id="@+id/tablerow06"
        android:layout_weight="0.15"
         android:background="@drawable/fb_button" >

        <LinearLayout
    android:layout_width="300dp"
    android:layout_height="40dp"
    android:layout_gravity="center"
    android:background="@drawable/fb_button"
    android:id="@+id/linearlayout02">

        <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/facebook_icon"/>

         <Button
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:text="Sign Up with Facebook"
        android:id="@+id/btn_fb"
        android:background="@drawable/fb_button"
        android:layout_gravity="center"
        android:textColor="#ffffff"/>   

         </LinearLayout>

  </TableRow>  

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:41:57.467

如果它是 6 个相等的部分，那么父母应该是`weightSum`6 的 a，每个孩子的 a 应该`layout_weight`是 1。

由`layout_weight`视图对象直接父级定义。所以你可以有一个`weightSum`6 的`LinearLayout`然后一个`layout_weight`1 和一个`weightSum`6 的你`TableLayout`，每个`TablRow`人都有一个`layout_weight`1。

* * *

**编辑**

您的代码中必须有一些与重量冲突的东西，我已经更改了下面的代码以显示 (3) 中的三个项目`LinearLayout`和 (6) 中的六个项目`TableLayout`，我还包含了它给我的确切内容的屏幕截图在预览和我的设备上。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="3" >

    <TableLayout
        android:id="@+id/tablelayout01"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:weightSum="6" >

        <TableRow
            android:id="@+id/tablerow01"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_marginTop="15dp"
            android:layout_weight="1"
            android:gravity="center" >

            <EditText
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Name" >

                <requestFocus />
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tablerow02"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center" >

            <EditText
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Email" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tablerow03"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center" >

            <EditText
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Password"
                android:inputType="textPassword" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tablerow04"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center" >

            <EditText
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Confirm Password" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tablerow05"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
        </TableRow>

        <TableRow
            android:id="@+id/tablerow06"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
        </TableRow>
    </TableLayout>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:text="Item 2" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:text="Item 3" />

</LinearLayout> 
```

* * *

![](https://i.imgur.com/b7Bgtzj.png?1)

# sql - 跨越多个日期的酒店价格问题

> ID：15883240
> 
> 赞同：0
> 
> 时间：2013-04-08T15:34:21.720
> 
> 标签：sql, delphi, delphi-xe2, delphi-xe

问题在某种程度上与这个有关，除了我使用参数。我的按钮上有这个：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
with ABSQuery1 do begin
ABSQuery1.Close;
ABSQuery1.SQL.Clear;
ABSQuery1.SQL.Add('select * from ROOM_RATES where CENIK_ID = :a4 and ROOM_TYPE = :A1');
ABSQuery1.SQL.Add('and rate_Start_DATE < :a3 AND rate_End_DATE  > :a2 ORDER BY rate_Start_DATE ASC ');
ABSQuery1.Params.ParamByName('a1').Value:= cxLookupComboBox2.Text;
ABSQuery1.Params.ParamByName('a2').Value:= cxDateEdit1.Date;
ABSQuery1.Params.ParamByName('a3').Value := cxDateEdit2.Date;
ABSQuery1.Params.ParamByName('a4').Value := cxLookupComboBox1.Text;
ABSQuery1.Open;
end;
end; 
```

这种工作但不是我真正想要的。问题与这个有关： [Hotel Booking Rates SQL Problem](https://stackoverflow.com/questions/5452774/hotel-booking-rates-sql-problem)

问题在于提到的超链接中的重叠日期。现在我得到这个：

如何在上述示例中获得与上述超链接相似的结果？

这是 db 表的快照： ![在此处输入图像描述](https://i.stack.imgur.com/Qucz9.png)

更新（新）：这是按钮上的代码 click ：

```
procedure TForm1.AdvGlowButton1Click(Sender: TObject);
var
     nxt             : integer;
     mem_from         : TDateTime;
     mem_to           : TDateTime;
     mem_RATE_ID      : integer;
     mem_ROOM_TYPE    : string[10];
     mem_Start_DATE_1 : TDateTime;
     mem_End_DATE_1   : TDateTime;
     mem_RATE_Price_1 : Currency;
     mem_calc_END     : TDateTime;
     mem_calc_DAYS    : integer;
     c_from           : TDateTime;
     c_to             : TDateTime;
     c_from_test      : TDateTime;
     c_to_test        : TDateTime;

begin
ABSQuery2.Close;
ABSQuery2.SQL.Text:='DELETE from TEMP';
ABSQuery2.ExecSQL;
ABSQuery2.SQL.Text:='SELECT * from TEMP ORDER BY ID ';
ABSQuery2.Open;

c_from := cxDateEdit1.Date;
c_to   := cxDateEdit2.Date;

mem_from := cxDateEdit1.Date;
mem_to   := cxDateEdit2.Date;

with ABSQuery1 do begin
ABSQuery1.Close;
ABSQuery1.SQL.Clear;
ABSQuery1.SQL.Add('select * from ROOM_RATES where CENIK_ID = :a4 and ROOM_TYPE = :A1');
ABSQuery1.SQL.Add('and rate_Start_DATE < :a3 AND rate_End_DATE  > :a2 ORDER BY rate_Start_DATE ASC ');
ABSQuery1.Params.ParamByName('a1').Value:= cxLookupComboBox2.Text;
ABSQuery1.Params.ParamByName('a2').Value:= cxDateEdit1.Date;
ABSQuery1.Params.ParamByName('a3').Value := cxDateEdit2.Date;
ABSQuery1.Params.ParamByName('a4').Value := cxLookupComboBox1.Text;
ABSQuery1.Open;

     nxt              := 1;
     mem_RATE_ID      := ABSQuery1.FieldByName('RATE_ID').AsInteger;
     mem_ROOM_TYPE    := ABSQuery1.FieldByName('ROOM_TYPE').AsString ;
     mem_Start_DATE_1 := ABSQuery1.FieldByName('RATE_START_DATE').AsDateTime;
     mem_End_DATE_1   := ABSQuery1.FieldByName('RATE_END_DATE').AsDateTime;
     mem_RATE_Price_1 := ABSQuery1.FieldByName('RATE_PRICE').AsCurrency;

     if mem_to > mem_End_DATE_1 then begin
         mem_calc_END  := mem_End_DATE_1;
         mem_calc_DAYS := Daysbetween(mem_from,mem_End_DATE_1);
     end else begin
         mem_calc_END  := mem_to;
         mem_calc_DAYS := Daysbetween(mem_from,mem_calc_END);
     end;
end;

if ABSQuery1.RecordCount > nxt then ABSQuery1.Next;
with ABSQuery2 do begin
open;
Insert;
  ABSQuery2.FieldByName('RATE_ID').AsInteger:=mem_RATE_ID;
  ABSQuery2.FieldByName('ROOM_TYPE').AsString:=mem_ROOM_TYPE;
  ABSQuery2.FieldByName('DATE_FROM').AsDateTime:=mem_from;
  ABSQuery2.FieldByName('DATE_TO').AsDateTime:= mem_to;//mem_calc_END;
  ABSQuery2.FieldByName('RATE_PRICE').AsCurrency:=mem_RATE_PRICE_1;
  ABSQuery2.FieldByName('DAYS').AsInteger:=mem_calc_DAYS;
  ABSQuery2.FieldByName('TOTAL').AsCurrency:=mem_RATE_PRICE_1 * mem_calc_DAYS;
post;
end;  ///////////////////////////////////////////////////////////////////
if ABSQuery1.RecordCount > nxt then begin
     inc(nxt);

    if mem_to < ABSQuery1.FieldByName('rate_End_DATE').AsDateTime then begin
       mem_calc_END   := mem_to;
       mem_calc_DAYS  := Daysbetween(ABSQuery1.FieldByName('rate_Start_DATE').AsDateTime,mem_calc_END);
    end else begin
       mem_calc_END   := ABSQuery1.FieldByName('rate_End_DATE').AsDateTime;
       mem_calc_DAYS  := Daysbetween(ABSQuery1.FieldByName('rate_Start_DATE').AsDateTime, ABSQuery1.FieldByName('rate_End_DATE').AsDateTime);
    end;
       mem_RATE_ID      := ABSQuery1.FieldByName('RATE_ID').AsInteger;
       mem_ROOM_TYPE    := ABSQuery1.FieldByName('ROOM_TYPE').AsString;
       mem_Start_DATE_1 := ABSQuery1.FieldByName('rate_Start_DATE').AsDateTime;
       mem_End_DATE_1   := ABSQuery1.FieldByName('rate_End_DATE').AsDateTime;
       mem_Rate_Price_1 := ABSQuery1.FieldByName('RATE_PRICE').AsCurrency;

    // calculation : second row.
with ABSQuery2 do begin
Insert;
  FieldByName('RATE_ID').AsInteger:=mem_RATE_ID;
  FieldByName('ROOM_TYPE').AsString:=mem_ROOM_TYPE;
  FieldByName('DATE_FROM').AsDateTime:=mem_Start_DATE_1;
  FieldByName('DATE_TO').AsDateTime:= mem_calc_END;
  FieldByName('RATE_PRICE').AsCurrency:=mem_RATE_PRICE_1;
  FieldByName('DAYS').AsInteger:=mem_calc_DAYS;
  FieldByName('TOTAL').AsCurrency:=mem_RATE_PRICE_1 * mem_calc_DAYS;
post;
end;
 ABSQuery2.refresh;
end;
end; 
```

我得到的结果是这样的： ![在此处输入图像描述](https://i.stack.imgur.com/tGXpd.png)

从数据库快照中可以看出，价格设置正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:27:37.013

# google-app-engine - GAE google task api“错误：未找到”

> ID：15883247
> 
> 赞同：0
> 
> 时间：2013-04-08T15:34:46.490
> 
> 标签：google-app-engine, python-2.7, google-tasks-api

我在 GAE 上遵循了这个谷歌任务 api 教程：[https ://developers.google.com/appengine/articles/python/getting_started_with_tasks_api](https://developers.google.com/appengine/articles/python/getting_started_with_tasks_api)

我已经尝试了他们所做的一切。

我在路线中添加了这个：

```
 ('/mytask', mytask),
                        ('/mytask'+ decorator.callback_path, decorator.callback_handler()), 
```

但我收到以下错误：

```
Error: Not Found

The requested URL /oauth2callback?state=http://sadaf2605.appspot.com/mytask:rBFVjEpyDnAPoYsm-J6COToxMzY1NDM0ODg4&code=4/DVdE2clKgg1yfLTcFL9AdGzszVvj.snlDhp_QkQYZgrKXntQAax1q0onUewI was not found on this server. 
```

你们能告诉我我在哪里可以期待一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:02:47.667

您没有将处理程序附加到正确的 URL：您使用“/mytask”作为前缀。如果您不希望它在默认的 /oauth2callback 上服务，那么您需要`callback_path`在创建时传递`OAuth2Decorator`

# iphone - 如何知道 UIImageView 移动的当前位置？

> ID：15883249
> 
> 赞同：0
> 
> 时间：2013-04-08T15:34:47.730
> 
> 标签：iphone, ios, animation, core-animation, uiviewanimation

我必须做一个小游戏，其中 2 个图像在同一条线上水平移动。我想知道它们何时叠加，以便显示新图像而不是 2。

最好的方法是什么？

我想这样做的方式：

我需要在我的 UIImageViews 动画期间知道位置，当我发现 2 个 imageViews 接近时，我会尝试使用计时器来刷新 imageView。

到目前为止，我有这个功能来移动图像：

```
- (void)moveImage:(UIImageView *)image duration:(NSTimeInterval)duration
        curve:(int)curve x:(CGFloat)x y:(CGFloat)y
{
    // Setup the animation

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationBeginsFromCurrentState:YES];

    // The transform matrix
    CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
    image.transform = transform;

    // Commit the changes
    [UIView commitAnimations];

} 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:44:30.653

我认为每秒多次检查位置并不是最好的方法。如果可以，您应该预先计算视图重叠的时间点！

无论如何，您不应该使用仿射变换来移动图像视图，而只是通过更改视图的框架或中心属性来移动图像视图的框架！

如果你不能预先计算，这里有一些关于如何实现定时器和检查的提示：

为了实现计时器，您可以使用：

```
 [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(checkPosition:) userInfo:nil repeats:YES]; 
```

这将每 0.1 秒调用一次函数。

```
- (void)checkPosition:(NSTimer *)timer 
```

在此方法中，您可以通过调用访问 imageViews UILayer 以找出该视图的实际位置

```
CGFrame currentFrame = [imageView.layer presentationLayer].frame; 
```

为了能够做到这一点，您必须导入 QuartzCore 框架！

# c++ - 通过函数参数而不是模板参数获取元组的元素

> ID：15883253
> 
> 赞同：1
> 
> 时间：2013-04-08T15:34:55.110
> 
> 标签：c++, tuples

例如，我有一个元组

```
std::tuple<T0, T1, T2> tp; 
```

其中 T0、T1 和 T2 从 T 继承。我想获取其元素的基类指针，例如

```
T* get(i)(tp); 
```

以外

```
(T*)(&std::get<i>(tp)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:39:11.073

您可以将包装函数编写为：

```
T* get(int index, std::tuple<T0, T1, T2> & tp)
{
   if ( index < 0 || index > 2 ) throw std::out_of_range("index");
   else if ( index == 0 ) return &std::get<0>(tp);
   else if ( index == 1 ) return &std::get<1>(tp);
   else return &std::get<2>(tp);
} 
```

由于和派生自`T0`，因此您不需要使用强制转换。`T1``T2``T`

您可能还想重载这个函数，`std::tuple<T0, T1, T2> const &`在这种情况下函数将返回`T const*`。

# javascript - Android 应用程序 - 运行 JavaScript 函数一次，然后在更新应用程序之前再次运行

> ID：15883256
> 
> 赞同：1
> 
> 时间：2013-04-08T15:35:07.500
> 
> 标签：javascript, cordova

我正在使用 JavaScript 制作一个 Android PhoneGap 应用程序。

应用程序从本地文本文件加载数据并将其存储在本地存储中，然后从本地存储中加载数据。

当我想更新文本文件中的数据并让应用程序再次将数据重新加载到本地存储时，问题就出现了。我无法让它加载文本文件一次，然后再也不加载。每次应用程序启动时，它都会再次加载文本文件，直到我进行另一个设置 localStorage.update = 0 的更新；

这是我尝试过的代码，但得到了上述结果。

```
localStorage.update = 1; //tell the app to update 
                         //but this will run each time the app is opened

if(localStorage.update == 1) {
    localStorage["StoredData"] = ""; //text file data is stored in [StoredData]

    //Proceed to load the text file into storage

    localStorage.update = 0;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:51:34.907

原来下面的代码有效：

```
if(localStorage.update == 1) { // change this value everytime you want to reload the file
    localStorage["StoredData"] = ""; //text file data is stored in [StoredData]

    //Proceed to load the text file into storage

    localStorage.update = 1; //set this to the same as the if statement
} 
```

# debugging - gdb 将可执 行文件放在错误的目录中？

> ID：15883257
> 
> 赞同：0
> 
> 时间：2013-04-08T15:35:09.640
> 
> 标签：debugging, gdb

我无法弄清楚这里的问题是什么。我在一个目录中：

```
pwd 
```

> /afs/naf.desy.de/user/e/eron/scratch/UserCode/devRA4b / **UserCode** /DesySusy/ra4b_2012

我有一个名为 myAnalysis 的可执行文件。但是，我还有另一个目录叫做

> /afs/naf.desy.de/user/e/eron/scratch/UserCode/ **RA4bHead** /UserCode/DesySusy/ra4b_2012/

我现在是**第**一个，如果我这样做：

```
gdb myAnalysis 
```

我得到：`

> 从`/afs/naf.desy.de/user/e/eron/scratch/UserCode/RA4bHead **/UserCode** /DesySusy/ra4b_2012/ myAnalysis...读取符号...完成。

为什么它从错误的目录中获取可执行文件，我该如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:39:46.560

尝试：

```
gdb ./myAnalysis 
```

还要确保您的其他文件夹不在您的路径中。我以为 '。' 隐含地位于搜索路径的头部，但显然并非适用于所有操作系统。

# android - 实现应用的 Google 播放时间有效性

> ID：15883261
> 
> 赞同：0
> 
> 时间：2013-04-08T15:35:33.127
> 
> 标签：android, google-play, google-play-services, android-lvl

我想在 google play 上上传一个应用程序。我想实现应用订阅的有效期为一年。

用户支付一年后，用户就可以使用该应用程序一年。一年后应用程序自动停止工作，用户需要从 google play 再次购买。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:39:11.953

您需要查看 Google Play Billing API。

从第 3 版开始，它们支持您正在寻找的订阅计费。

[http://developer.android.com/google/play/billing/billing_subscriptions.html](http://developer.android.com/google/play/billing/billing_subscriptions.html)

# powershell - 奇怪的 TFS Powershell cmdlet 行为

> ID：15883264
> 
> 赞同：0
> 
> 时间：2013-04-08T15:35:41.103
> 
> 标签：powershell, tfs

我有两台机器，两台机器都装有 Power tools 2012。以下命令的工作方式与我的本地机器上的一样，但不返回任何内容

```
(Get-TfsItemHistory "$MyItemspec").Changes 
```

有任何想法吗？两台机器上的文件夹结构完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:08:47.980

您是否在一台机器上运行 PSH 3 而在另一台机器上运行 V2？V3 自动将不适用于集合的属性应用到每个成员。

在 PSH V2 上，如果`Get-TfsItemHistory`返回多个结果，则为`.Changes`null（.NET 数组上没有此类属性），但在 V3 中，它将应用于每个对象。要在 V2 中获得相同的效果：

```
Get-TfsItemHistory $MyItemspec | % {$_.Changes} 
```

# ruby-on-rails - 如何将 hidden_ field 输出到数组？

> ID：15883265
> 
> 赞同：0
> 
> 时间：2013-04-08T15:35:44.457
> 
> 标签：ruby-on-rails, forms

正在开发基本消息应用程序的回复功能，并且已经卡了一段时间。

在我的消息控制器中，我将原始消息作者的 user_id 传递给 :to 以获取回复消息”：

```
 @message = current_user.sent_messages.build(:to => @original.author.id, :subject => subject, :body => body)
    render :template => "sent/raply" 
```

我的隐藏字段如下所示：

```
 <%= f.hidden_field :to %> 
```

我通过表单获得了正确的 user_id，但我需要将值作为数组传递，例如“to”=>[“1”]，而不是“to”=>“1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:46:18.417

```
@message = current_user.sent_messages.build(:to => [@original.author.id], :subject => subject, :body => body)
render :template => "sent/raply" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:50:31.560

弄清楚了。

保持控制器如下：

```
@message = current_user.sent_messages.build(:to => @original.author.id, :subject => subject, :body => body)
render :template => "sent/raply" 
```

更新了我的表单字段：

```
<%= f.hidden_field :to, :multiple => true %> 
```

谢谢你的帮助！

# jquery - 使用 jquery 引用嵌套 div 中的复选框

> ID：15883267
> 
> 赞同：0
> 
> 时间：2013-04-08T15:35:49.957
> 
> 标签：jquery

我在一个 div 中有一些复选框，这些复选框受其中的数字限制`data-max-answers`（从 Wordpress 中获取）。因此，如果该数字为 2，则用户只能勾选其中的 2 个复选框，而其他复选框为灰色。

我遇到的问题是我无法弄清楚如何深入研究 div 以定位复选框，有人可以帮我吗？

我有一个简化版本，其中复选框直接位于 div 中，这工作正常，但无法让它在嵌套 div 的地方工作 - [http://jsfiddle.net/pVA3d/4/](http://jsfiddle.net/pVA3d/4/)。

```
<div class="question" data-max-answers="<?php echo $repeater_row['required_answers']; ?>">
    <?php $rows = $repeater_row['answer_options'];
    foreach ($rows as $row){ ?>
    <?php $Question[$counter] = $_POST['answer'.$counter]; ?>
    <div style="display:table-row;">
        <div style="display:table-cell;">
            <input style="width: 20px;" type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
        </div>
        <div style="display:table-cell;">
            <p>
                <?php echo $row['answer']; ?>
            </p>
        </div>              
    </div>
    <?php } ?>
</div> 
```

查询：

```
jQuery(function($) {
$(document).ready(function () {
    $("input[type=checkbox]").click(function (e) {
        if ($(e.currentTarget).closest("div.question").length > 0) {
            toggleInputs($(e.currentTarget).closest("div.question")[0]);        
        }
    });
});
});

jQuery(function($) {
function toggleInputs(questionElement) {
    if ($(questionElement).data('max-answers') == undefined) {
        return true;
    } else {
        maxAnswers = parseInt($(questionElement).data('max-answers'), 10); 
        if ($(questionElement).find(":checked").length >= maxAnswers) {
            $(questionElement).find(":not(:checked)").attr("disabled", true);
        } else {
            $(questionElement).find("input[type=checkbox]").attr("disabled", false);
        }
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:57:06.787

我正在看

`Uncaught ReferenceError: toggleInputs is not defined`

当我单击您网址上的复选框时。你有什么理由包装每个单独的 jquery 函数吗？尝试将您的 toggleInputs 功能与您的输入点击功能放在同一个包装器中

# spring-mvc - Spring security：如何在控制器中映射 j_spring_security_check？

> ID：15883271
> 
> 赞同：2
> 
> 时间：2013-04-08T15:35:59.733
> 
> 标签：spring-mvc, spring-security, spring-webflow

我正在尝试将 spring security 集成到 spring mvc 中的现有代码库中。

在我现有的代码库中，我有一个 Web 项目中的客户端委托，它与服务项目中的服务委托交互，后者又与后端层的服务接口交互。它是我的后端层的服务接口实现m 实现 UserDetailsS​​ervice 接口。

PS - 我正在跨所有层创建/转换/传递各种对象，即模型、DO、DTO、请求、响应等。

所以现在，当我点击提交时，我希望控件通过委托从 web 到后端层，直到实现 UserDetailsS​​ervice 接口的类。我怎样才能做到这一点？

[更新]：通过[此链接](https://stackoverflow.com/questions/5971453/spring-security-custom-filter)后，我更改了我的安全 xml，如下所示：

```
 <security:http auto-config="true" use-expressions="true">
    <security:intercept-url pattern="/welcome.html" access="hasRole('ROLE_USER')" />
    <security:form-login login-page="/portalLogin.html" login-processing-url="/signIn" always-use-default-target="true"
    username-parameter="username" password-parameter="password"
        default-target-url="/welcome.html" authentication-failure-url="/loginfailed.html" />
    <security:logout logout-success-url="/logout.html" />
</security:http> 
```

我的登录控制器是这样的：

```
 @RequestMapping("/signIn")
        public ModelAndView onClickLogin(@ModelAttribute("dashboard")
        LoginModel loginModel,Model model){
        try{
        delegate.clickLogin(loginModel);
        if(null != loginModel.getError()){
            // return new ModelAndView("error");
        }       
        }catch(Exception exception){
        }
        return new ModelAndView("redirect:welcome.html");

        } 
```

[更新]：很抱歉很晚更新。控制器映射问题已解决，现在由于 UsernamePasswordAuthenticationFilter 而我面临问题。在将上述代码生成的日志与正常工作的代码日志进行比较后，我发现 Spring Security 没有触发'UsernamePasswordAuthenticationFilter ' 在我的情况下出于某些原因。'UsernamePasswordAuthenticationFilter' 是对用户进行身份验证的一种。

```
 //Logs when authentication is done 
            [while using spring's default /j_spring_security_check].

    DEBUG FilterChainProxy - /j_spring_security_check at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
    DEBUG UsernamePasswordAuthenticationFilter - Request is to process authentication
    DEBUG ProviderManager - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
    session created
    DEBUG SessionImpl - Opened session at timestamp: 13661947944
    SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])
    After openSession
    DEBUG SessionImpl - Opened session at timestamp: 13661947944
    Criteria before eq::this::CriteriaImpl(com.infy.itrade.core.entity.LoginDO:this[][])::CriteriaImpl(com.infy.itrade.core.entity.LoginDO:this[][])...

    //Logs when authentication is not done [while using custom login processing url : /signIn.html].
    DEBUG FilterChainProxy - /signIn.html at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter' //UsernamePasswordAuthenticationFilter is not doing authentication process instead it skips to next filter.
    DEBUG FilterChainProxy - /signIn.html at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
    DEBUG FilterChainProxy - /signIn.html at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter' 
```

我创建了一个自定义过滤器“MyFilter”，它扩展了“AbstractAuthenticationProcessingFilter”。但是 'MyFilter' 仍然没有进行任何身份验证，因为日志显示如下：

```
 DEBUG FilterChainProxy - /signIn.html at position 2 of 9 in additional filter chain; firing Filter: 'LogoutFilter'
    DEBUG FilterChainProxy - /signIn.html at position 3 of 9 in additional filter chain; firing Filter: 'MyFilter'
    DEBUG FilterChainProxy - /signIn.html at position 4 of 9 in additional filter chain; firing Filter: 'RequestCacheAwareFilter' 
```

我的过滤器：

```
 public class MyFilter extends AbstractAuthenticationProcessingFilter {

    private static final String DEFAULT_FILTER_PROCESSES_URL = "/signIn";
    private static final String POST = "POST";
    public static final String SPRING_SECURITY_FORM_USERNAME_KEY = "username";
    public static final String SPRING_SECURITY_FORM_PASSWORD_KEY = "password";
    public static final String SPRING_SECURITY_LAST_USERNAME_KEY = "SPRING_SECURITY_LAST_USERNAME";

    private String usernameParameter = SPRING_SECURITY_FORM_USERNAME_KEY;
    private String passwordParameter = SPRING_SECURITY_FORM_PASSWORD_KEY;

    public MyFilter() {
        super(DEFAULT_FILTER_PROCESSES_URL);
    }

    public MyFilter(String defaultFilterProcessesUrl) {
        super(defaultFilterProcessesUrl);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Authentication attemptAuthentication(HttpServletRequest request,
            HttpServletResponse arg1) throws AuthenticationException,
            IOException, ServletException {
        // TODO Auto-generated method stub
        String username = obtainUsername(request);
        String password = obtainPassword(request);

        if (username == null) {
            username = "";
        }

        if (password == null) {
            password = "";
        }

        username = username.trim();
        UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(
                username, password);
        HttpSession session = request.getSession(false);
        if (session != null || getAllowSessionCreation()) {
            request.getSession().setAttribute(
                    SPRING_SECURITY_LAST_USERNAME_KEY,
                    TextEscapeUtils.escapeEntities(username));
        }
        setDetails(request, authRequest);

        return this.getAuthenticationManager().authenticate(authRequest);
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {
        final HttpServletRequest request = (HttpServletRequest) req;
        final HttpServletResponse response = (HttpServletResponse) res;
        if (request.getMethod().equals(POST)) {
            // If the incoming request is a POST, then we send it up
            // to the AbstractAuthenticationProcessingFilter.
            super.doFilter(request, response, chain);
        } else {
            // If it's a GET, we ignore this request and send it
            // to the next filter in the chain. In this case, that
            // pretty much means the request will hit the /login
            // controller which will process the request to show the
            // login page.
            chain.doFilter(request, response);
        }
    }
    ...
    } 
```

上下文 xml：

```
 <bean id="loginUrlAuthenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl" value="/portalLogin.html"/>
    </bean>

    <bean id="MyFilter" class="com.infosys.itrade.core.dao.security.MyFilter">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="authenticationSuccessHandler" ref="successHandler"></property>
        <property name="authenticationFailureHandler" ref="failureHandler"></property>
        <property name="filterProcessesUrl" value="/signIn"></property>
    </bean>

    <bean id="successHandler" class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
        <property name="defaultTargetUrl" value="/welcome.html" />
    </bean>

    <bean id="failureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
        <property name="defaultFailureUrl" value="/loginfailed.html" />
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider
            user-service-ref="LoginUserDetailsService">
        </security:authentication-provider>
    </security:authentication-manager>

    <bean id="LoginUserDetailsService"
        class="com.infy.itrade.core.service.login.LoginServiceImpl">
        <property name="logindao" ref="loginDAOImpl" />
    </bean>

    <bean id="loginDAOImpl" class="com.infy.itrade.core.dao.login.LoginDAODBImpl">
        <property name="sessionFactory"> <ref bean ="sessionFactory"/> </property>
    </bean>
</beans> 
```

我在这里想念什么？

[更新]：由于我无法正常工作，因此我按照其他人的建议改变了我的方法，即我正在避免单独登录模块的架构流程。但现在我面临着新方法的不同问题，我会问一个不同的问题。谢谢。

# ios - 为什么模态演示表单未按预期显示？

> ID：15883272
> 
> 赞同：0
> 
> 时间：2013-04-08T15:36:03.390
> 
> 标签：ios, ipad, modalviewcontroller, presentmodalviewcontroller

我只是在这里尝试一个非常简单的示例，因为我开始深入研究 ipad 的 iOS 开发。

我正在创建一个拆分视图并立即尝试呈现一个模式表单。应该是非常基础的。

通过我的尝试，我得到了类似于页面表的行为。在横向中，我可以看到下面的拆分视图，但看不到模态视图的顶部（工具栏被隐藏但在纵向视图中）。

我希望只是将 540x620 模态对话框下方的拆分视图变灰。我应该在纵向和横向模式下看到拆分视图，例如 Cheddar 应用程序中所有漂亮的表单对话框。

我一定是在这里做错了，但是我在 Cheddar 应用程序中阅读的所有示例都在做我在下面概述的内容。

在应用委托中：

```
 MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

masterViewController.detailViewController = detailViewController;

self.splitViewController = [[UISplitViewController alloc] init];
self.splitViewController.delegate = detailViewController;
self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];
self.window.rootViewController = self.splitViewController;

[self.window addSubview:self.splitViewController.view];

ModalViewController *modalView = [[ModalViewController alloc] initWithNibName:@"ModalViewController" bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:modalView];
navController.modalPresentationStyle = UIModalPresentationFormSheet;

[self.splitViewController presentViewController:navController animated:NO completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:14:55.790

应用程序委托太快了。您还没有界面，因此您无法连贯地展示任何视图控制器。

因此，首先，将所有代码`modalView`移至`viewDidAppear:`.`detailViewController`

# c# - 如何获取 RESTful Web 服务的请求 URI

> ID：15883274
> 
> 赞同：0
> 
> 时间：2013-04-08T15:36:05.157
> 
> 标签：c#, web-services

我有一个在多个不同网站下使用的网络服务，并且想知道请求来自哪些网站（并根据该数据返回不同的内容）。我该怎么做呢？

我有一个网站 example.com，它在 /webservice.svc 中有一个 web 服务。[当客户通过http://client1.example.com/webservice.svc/hello](http://client1.example.com/webservice.svc/hello)来到这个站点时，我想说“你好，client1！” 当他们通过[http://client2.example.com/webservice.svc/hello](http://client2.example.com/webservice.svc/hello)它应该说“你好，client2！”。

所以client1或client2取决于子主机（或应用程序目录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:49:19.077

Assuming you are using WCF, you can try: `System.ServiceModel.Web.WebOperationContext.Current.IncomingRequest.Headers["Referer"]`

The result will in your example be [http://client1.example.com/webservice.svc/hello](http://client1.example.com/webservice.svc/hello) or [http://client2.example.com/webservice.svc/hello](http://client2.example.com/webservice.svc/hello). You can then parse that string for presence of client1 or client2\.

You may want to check for nulls.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:06:00.207

最后用 HttpContext.Current.Request.Url.ToString();

当我尝试时，它最初也返回“对象引用未设置为对象的实例”，但发现在我的类声明之前以及在 web.config 中设置 [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 可以解决问题并允许访问我想要的变量。

# java - 在进行单元测试时仅实例化其他域对象就足够了吗？

> ID：15883276
> 
> 赞同：2
> 
> 时间：2013-04-08T15:36:05.800
> 
> 标签：java, unit-testing

如果您测试 Car 类，并希望在其上创建一个返回座位数的方法。如果不需要的话，只写`car.addSeat(new Seat())`多次而不在座位上实际设置一些数据就足够了吗？该方法看起来像：

```
public int numberOfSeats() {
    return seats.size();
} 
```

鉴于席位是席位列表。或者即使不需要，您也会在座位上填写数据？您是否应该始终尽量减少编写测试的工作量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:42:34.723

您应该考虑使用模拟。通过模拟，您可以使用期望控制未测试对象的行为方式。

例如 when(seat.getSomeProperty()).thenReturn("some value")

但是，如果您不需要该值，则可以将期望从代码中排除。这样可以在不重写测试的情况下更新代码，并且维护您的测试要简单得多。

结帐 Mockito [https://code.google.com/p/mockito/](https://code.google.com/p/mockito/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:47:57.817

我有两种方法。

1.  准确定义您要测试的内容，您将确切知道需要填写哪些数据。在您的示例中，没有必要填补座位。

2.  如果您想测试的不仅仅是 numberOfSeats，您可以使用 setUp 和 tearDown 为每个测试创建可重用的数据集。JUnit 在每次测试之前运行 setUp，之后运行 tearDown。

# c++ - 解决初始化列表顺序与成员顺序不匹配的警告

> ID：15883278
> 
> 赞同：1
> 
> 时间：2013-04-08T15:36:09.667
> 
> 标签：c++

我们需要让我们的项目在没有来自最高级别 gcc 的警告的情况下编译。目前，我们有很多关于以下内容的警告：

```
struct Bob
{
    int a;
    int b;

    Bob()
        : b(0)
        , a(0)
    {
    }
}; 
```

警告说初始化列表的顺序与类中声明成员的顺序不匹配。我理解这个警告，因为真正的初始化顺序来自于类中成员的顺序，如果有些依赖于其他的，按照相同的顺序排列初始化列表可以帮助发现错误。

但是，我们有大量（和大量）代码，其初始化列表与成员顺序不匹配，并且成员不相互依赖，所以没有问题。但是我们需要从我们的代码中删除所有警告。

有没有一些自动的方法可以解决这个问题？我有没有提到我们有大量的代码？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:43:15.050

假设您有一个明智的人要求您“没有警告”，那么您可以请求例外并“禁用此警告”。它可能应该在逐个文件的基础上完成，最好使用书面的“计划在未来修复”解决方案，而不是批发“让我们对所有文件禁用此警告”。

另一种选择是查找导致警告的所有位置，并重新排序初始化程序。

请注意，警告只是说“初始化发生的顺序与您编写的顺序不同”，因此重新排序根本不会改变代码的行为 - 编译器已经为您重新排序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:38:45.350

您可以使用

```
-Wno-reorder 
```

只是禁用这些警告。

# c++ - OpenCv 图像未显示

> ID：15883281
> 
> 赞同：0
> 
> 时间：2013-04-08T15:36:25.107
> 
> 标签：c++, visual-studio-2010, opencv

请看下面的代码

```
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <iostream>

using namespace std;
using namespace cv;

int main()
{
    Mat image;

    try
    {
        image = imread("C:/Users/Public/Pictures/Sample Pictures/Chrysanthemum.jpg");

        if(!image.data)
        {
            throw 1;
        }

        cout << "Height: " << image.size().height << " Width: " << image.size().width << endl;
    }
    catch(int error)
    {
        cout << "This message does not exists" << endl;
        exit(0);
    }

    namedWindow("Image 1");
    imshow("Image 1",image);

    system("pause");
    return 0;
} 
```

当我运行此代码时，我没有显示图像。而是显示空白图像。这是为什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:38:12.503

您需要让窗口刷新。system("pause") 不这样做。opencv 的等价物是 waitKey(0)；

# python - python：stringarray到格式化的字符串

> ID：15883286
> 
> 赞同：0
> 
> 时间：2013-04-08T15:36:41.713
> 
> 标签：python, string, kml

我正在尝试从数组中创建一个文本，以使用[此示例](http://pythonhosted.org/pykml/examples/kml_reference_examples.html#kml-reference-example-gx-altitudemode)创建 kml ，如下所示：

```
KML.coordinates(
              "146.825,12.233,400 "
              "146.820,12.222,400 "
              "146.812,12.212,400 "
              "146.796,12.209,400 "
              "146.788,12.205,400"
            ) 
```

我已经在一个数组中有这个坐标作为这样的字符串：

```
myCoords[0]: '146.825,12.233,400'
myCoords[1]: '146.820,12.222,400'
... 
```

但如果我给`myCoords`，`KML.coordinates`我会得到一个没有新行`[]`并附上它的blob。

我可以`', '.join(myCoords)`用来删除`[]`，但它仍然是一个没有新行的 blob。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:39:34.463

该示例使用*空格*分隔的数据；字符串文字之间有换行符，但 Python 将它们连接在一起。

在任何情况下，您都可以使用`' '.join(myCoords)`与该示例相同的方式连接您的坐标。

# android - Google Play LVL 许可证检查是“包”还是“公钥”特定的？

> ID：15883288
> 
> 赞同：1
> 
> 时间：2013-04-08T15:36:43.637
> 
> 标签：android, google-play, android-lvl

我是 Google Play 中可用的 2 个应用程序的开发人员（非公开，正在进行中）。

一个应用程序是免费的，另一个是非免费的。

免费应用程序正在检查用户是否拥有非免费应用程序的许可证。因此，我使用非免费应用程序的公钥从免费应用程序调用 LVL。

直到现在我还认为它可以工作，但后来我意识到可以在 Google Play 开发者控制台中配置的“测试结果”不是每个应用程序，而是全球范围内的。

这意味着：如果我将测试结果配置为“LICENSED”或“NOT_LICENSED”，那么我的哪个应用程序检查许可证都无关紧要 - 这就是我的问题。

谁知道，如果它对我使用的两个公钥中的哪一个有任何影响？LVL 是真的使用公钥来识别应用程序，还是使用“调用应用程序的包”？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:03:15.707

遗憾的是，不能通过 LVL 检查其他应用程序的许可证。您是否是这两个应用程序的开发人员都没有关系，您向 LVL 提供哪个公钥或包也没有关系。

另一种解决方案是在免费应用程序中使用应用内购买。然后，用户可以通过 IAP 仅“购买”一个“解锁许可证”。

看看这里： http: [//grokbase.com/t/gg/android-developers/11c5znp9qh/can-the-lvl-check-for-paid-app-be-done-from-my-free-app](http://grokbase.com/t/gg/android-developers/11c5znp9qh/can-the-lvl-check-for-paid-app-be-done-from-my-free-app)

# git - git svn 在大型存储库中分支

> ID：15883291
> 
> 赞同：2
> 
> 时间：2013-04-08T15:36:47.437
> 
> 标签：git, svn, git-svn

我正在使用“git svn”与具有非标准分支约定的大型 SVN 存储库进行交互。[我看到有多种方法可以克隆 svn repo / 分支，如此](https://stackoverflow.com/questions/1638478/git-svn-with-multiple-branch-locations)处所指出

我看到了非常不同的行为：

假设SVN repo如下：

```
http://svn.mycom.com/svn/Project
-->trunk
-->defects
-->uat 
```

生产在“主干”，分支在“缺陷”，当前开发在“uat”。

话虽如此，我可以执行以下操作

**1.克隆直接uat..**

```
$ git svn clone http://svn.mycom.com/svn/Project/uat 
```

当我这样做时，我的 .git/config 文件如下所示：

```
[svn-remote "svn"]
    url = http://svn.mycom.com/svn/Project/uat
    fetch = :refs/remotes/trunk 
```

[然后我添加了如此处所述的](https://stackoverflow.com/questions/296975/how-do-i-tell-git-svn-about-a-remote-branch-created-after-i-fetched-the-repo)分支 我的 .git/config 看起来类似于：

```
[svn-remote "svn"]
    url = http://svn.mycom.com/svn/Project/uat
    fetch = :refs/remotes/trunk
[svn-remote "task1"]
    url = http://svn.mycom.com/svn/Project/defects/task1
    fetch = :refs/remotes/task1 
```

现在当我跑

```
 $git log --decorate --all --graph 
```

我看到我的新分支只有 1 次提交，即。分支创建它与要掌握的实际历史无关。它显示了自己的历史记录线，与之前的提交没有任何联系。

**2\. 使用 -T 克隆然后添加分支** 我发现的替代解决方案是：

```
$git svn clone http://svn.mycom.com/svn/Project/ -T uat Project --no-minimize-url
   Since the "Defects" has lot many branches, and it would take hours, i then did:

[svn-remote "svn"]
    url = http://svn.mycom.com/svn/Project
    fetch = uat:refs/remotes/trunk
    branches = defects/{task1}:refs/branches/* 
```

这似乎很好用，我确实了解了历史。我想知道两者中更好的方法是什么，如果有什么我需要考虑从一个选项与另一个选项之间进行选择的话。但是，在这个选项中，如果我必须添加另一个分支，我不能简单地在逗号分隔列表中编辑分支部分和新分支名称，例如分支 = 缺陷/{task1，task2}。这不起作用感觉就像一个 GIT 缺陷。然后，我只需在分支下方添加另一条提取线

```
[svn-remote "svn"]
    url = http://svn.mycom.com/svn/Project
    fetch = uat:refs/remotes/trunk
    branches = defects/{task1}:refs/branches/*
    fetch = defects/task2:refs/branches/task2 
```

这很好用，我得到了分支历史记录并且能够在没有问题的情况下切换。但感觉就像一个黑客。我希望有一种方法可以将它附加到看起来很干净的分支列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:01:31.923

我使用并更喜欢第二种方式，IMO 是正确的方式。在第二种方式中，您将拥有存储库的所有历史记录，并且您可以轻松地在所需的分支之间切换。另外我认为如果您要在本地创建一个新分支然后将其提交到`SVN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:48:57.627

使用它几天后，最好的选择是选项#2。

注意：而不是为稍后创建的新分支添加“获取”行。我发现添加新的分支名称作为列表中的第一件事，就可以了。新的分支信息被拉取。

```
[svn-remote "svn"]
 url = http://svn.mycom.com/svn/Project
 fetch = uat:refs/remotes/trunk
 branches = defects/{task2,task1}:refs/branches/* 
```

如果这样做没有拉出分支，只需删除“.git/svn/.metadata”文件夹并运行

```
git svn fetch 
```

它基本上会重新获取信息，但至少看起来很干净。添加 fetch 行也很好。就我个人而言，我不在乎。如果你很细致，你可以像上面提到的那样添加分支。

# partitioning - 逻辑卷分区

> ID：15883299
> 
> 赞同：1
> 
> 时间：2013-04-08T15:37:06.507
> 
> 标签：partitioning, lvm

我已经创建了逻辑卷，使用已经存在的 /home /var 目录...创建逻辑卷的过程没有问题，但是在我创建逻辑卷之后，目录中的所有内容看起来都被擦除了。

有没有办法避免这种情况？

# c++ - c++ 上的前向声明，里面有一个列表

> ID：15883302
> 
> 赞同：1
> 
> 时间：2013-04-08T15:37:14.900
> 
> 标签：c++

我有两个课程`Pet`和`Person`

这是Person.h：

```
#ifndef PERSON_H
#define PERSON_H
#include <list>

class Pet;

class Person
{
public:
    Person();
    Person(const char* name);
    Person(const Person& orig);
    virtual ~Person();

    bool adopt(Pet& newPet);
    void feedPets();

private:
    char* name_;
    std::list<Pet> pets_;
};

#endif 
```

这是 Pet.h

```
#ifndef PET_H
#define PET_H
#include <list>
#include "Animal.h"

class Person;

class Pet : public Animal
{
public:
    Pet();
    Pet(const Pet& orig);
    virtual ~Pet();
    std::list<Pet> multiply(Pet& pet);

private:
    std::string name_;
    Person* owner_;
};

#endif 
```

我遇到的问题是：

```
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/list.tcc:129: error: invalid use of undefined type `struct Pet'

Person.h:13: error: forward declaration of `struct Pet' 
```

我修复了这个问题`std::list<Pet>* pets_;`，但是当我尝试调用列表函数时总是有链接问题。我的问题是如何必须在包含来自另一个类的对象的类中包含一个列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:42:23.967

该标准要求，除非明确说明，否则您在库模板中使用完整类型。这基本上会抑制您的设计（每个对象*按值*维护另一个类型的列表）。

您可以通过使用 [smart] 指针（指向容器的指针或指针容器）来解决此问题。

# sql - 停止触发器更改 scope_identity

> ID：15883304
> 
> 赞同：5
> 
> 时间：2013-04-08T15:37:15.677
> 
> 标签：sql, sql-server, triggers, sql-server-2008-r2

我的应用程序将一些数据插入到表中。

```
insert into this_Table (id, value, value) 
```

然后，我创建了一个触发器，它使用主键将简单的插入到另一个表中。

```
insert into temp_wc_triggertest values ('test', GETDATE()) 
```

我的问题是，应用程序尝试`scope_identity`从第一个插入中查找。但是，它会被触发器覆盖，从而将作用域标识更改为`temp_wc_triggertest`.

如何停止触发器覆盖`scope_identity`？

我意识到这里没有多少代码可以提供帮助，这通常被归类为一个坏问题，但我目前无权访问完整的应用程序代码，所以我希望这是可以回答的。

这是在 SQL Server 2008 R2 上

编辑：我查看了代码，它**确实使用了 scope_identity**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:52:48.310

您的客户肯定会使用[@@IDENTITY](http://msdn.microsoft.com/en-us/library/ms187342.aspx)而不是[SCOPY_IDENTITY()](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

这是一个 SQL Fiddle，其中包含一些您可以测试的代码。

[SQL小提琴](http://sqlfiddle.com/#!3/15692/1)

**MS SQL Server 2008 架构设置**：

```
create table T1(ID int identity(1,1));
create table T2(ID int identity(1000, 1));

go

create trigger tr_T1 on T1 for insert
as
insert into T2 default values; 
```

**查询**：

```
insert into T1 default values

select @@identity as "@@identity", 
       scope_identity() as "scope_identity()" 
```

**[结果](http://sqlfiddle.com/#!3/15692/1/1)**：

```
| @@IDENTITY | SCOPE_IDENTITY() |
---------------------------------
|       1000 |                1 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T17:03:29.503

如果您正确使用 SCOPE_IDENTIY，您可能还会遇到一个已知错误 - [http://connect.microsoft.com/SQLServer/feedback/details/328811](http://connect.microsoft.com/SQLServer/feedback/details/328811)

MS 已在 2012 年永久修复它，并为 2008 和 2008R2 提供补丁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T10:11:16.750

它覆盖范围标识的原因尚不清楚，可能与提到的错误有关。但是发现了一个修复：

创建了一个临时表“temp_wc”

然后在触发器结束时，为该表打开了标识插入，并为触发器触发后我们想要保留的 ID 完成了插入。这种方法可以被认为是再次覆盖被覆盖的作用域标识。

```
SET IDENTITY_INSERT ON
INSERT INTO temp_wc VALUES (@ID, 'fix scope identity error') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T16:00:21.850

这可能会帮助将来解决此问题的任何人：

[https://docs.microsoft.com/en-us/sql/t-sql/functions/scope-identity-transact-sql?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/t-sql/functions/scope-identity-transact-sql?view=sql-server-2017)

您可能需要修补 SQL Server，因为看起来`SCOPE_IDENTITY`应该返回实际接收主插入的表上的插入 ID，而不是 SQL 触发器插入语句。

来自 SQL Server 2017 的 Microsoft 文档（以防链接损坏）：

> 备注 SCOPE_IDENTITY、IDENT_CURRENT 和@@IDENTITY 是相似的函数，因为它们返回插入标识列的值。
> 
> IDENT_CURRENT 不受范围和会话限制；它仅限于指定的表。IDENT_CURRENT 返回为任何会话和任何范围内的特定表生成的值。有关详细信息，请参阅 IDENT_CURRENT (Transact-SQL)。
> 
> SCOPE_IDENTITY 和@@IDENTITY 返回在当前会话的任何表中生成的最后一个标识值。但是，SCOPE_IDENTITY 返回仅在当前范围内插入的值；@@IDENTITY 不限于特定范围。
> 
> 例如，有两个表，T1 和 T2，并且在 T1 上定义了一个 INSERT 触发器。当向 T1 插入一行时，触发器将触发并在 T2 中插入一行。这个场景说明了两个作用域：T1 上的插入和触发器在 T2 上的插入。
> 
> **假设 T1 和 T2 都有标识列，@@IDENTITY 和 SCOPE_IDENTITY 在 T1 上的 INSERT 语句末尾返回不同的值。@@IDENTITY 返回在当前会话的任何范围内插入的最后一个标识列值。这是插入到 T2 中的值。SCOPE_IDENTITY() 返回插入到 T1 中的 IDENTITY 值。这是在同一范围内发生的最后一个插入。SCOPE_IDENTITY() 函数如果在作用域中出现任何插入标识列的 INSERT 语句之前调用该函数，则返回空值。**
> 
> 失败的语句和事务可能会更改表的当前标识并在标识列值中创建间隙。即使尝试将值插入表的事务未提交，标识值也永远不会回滚。例如，如果 INSERT 语句由于 IGNORE_DUP_KEY 违规而失败，则表的当前标识值仍会递增。

这里的另一个链接：

[http://www.sqlbadpractices.com/how-not-to-retrieve-identity-value/](http://www.sqlbadpractices.com/how-not-to-retrieve-identity-value/)

> 此代码的问题是您可能无法检索您插入的标识值。例如，如果表上有一个触发器在另一个表上执行插入，您将获得最后创建的标识值。即使您从未创建任何触发器，由于 SQL Server 创建自己的复制触发器，您可能会得到复制表的偏差结果。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-08T15:39:11.597

采用`SELECT IDENT_CURRENT(‘tablename’)`

“它返回表中生成的最后一个 IDENTITY 值，无论创建该值的连接如何，也无论生成该值的语句的范围如何。”

有关详细信息，请参阅此链接。

[http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

# ios - 使用 convertPoint 获取父 UIView 内的相对位置

> ID：15883305
> 
> 赞同：75
> 
> 时间：2013-04-08T15:37:18.053
> 
> 标签：ios, objective-c

我已经查看了有关该主题的十几个 SO 问题，但没有一个答案对我有用。也许这会帮助我回到正确的道路上。

想象一下这个设置：

![在此处输入图像描述](https://i.stack.imgur.com/VcbWy.png)

我想获取`center`UIButton 相对于 UIView 的坐标。

换句话说，UIButton 中心在 UITableViewCell 内可能是 215、80，但相对于 UIView，它们应该更像 260、165。如何在两者之间进行转换？

这是我尝试过的：

```
[[self.view superview] convertPoint:button.center fromView:button];  // fail
[button convertPoint:button.center toView:self.view];  // fail
[button convertPoint:button.center toView:nil];  // fail
[button convertPoint:button.center toView:[[UIApplication sharedApplication] keyWindow]];  // fail 
```

我可以通过循环遍历所有按钮的超级视图并添加 x 和 y 坐标来实现这一点，但我怀疑这太过分了。我只需要找到covertPoint 设置的正确组合。对？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-08T15:45:33.143

`button.center`*是在其 superview*的坐标系中指定的中心，所以我假设以下工作：

```
CGPoint p = [button.superview convertPoint:button.center toView:self.view] 
```

或者您在其自己的坐标系中计算按钮的中心并使用它：

```
CGPoint buttonCenter = CGPointMake(button.bounds.origin.x + button.bounds.size.width/2,
                                   button.bounds.origin.y + button.bounds.size.height/2);
CGPoint p = [button convertPoint:buttonCenter toView:self.view]; 
```

**斯威夫特 4+**

```
let p = button.superview!.convert(button.center, to: self.view)

// or

let buttonCenter = CGPoint(x: button.bounds.midX, y: button.bounds.midY)
let p = button.convert(buttonCenter, to: self.view) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-02-26T21:24:02.453

**Swift 5.2**

您需要`convert`从按钮调用，而不是超级视图。在我的情况下，我需要宽度数据，所以我转换了边界，而不仅仅是中心点。下面的代码对我有用：

```
let buttonAbsoluteFrame = button.convert(button.bounds, to: self.view) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-19T07:01:22.437

马丁的回答是正确的。对于使用 Swift 的开发人员，您可以使用以下方法获取对象（按钮、视图等）相对于屏幕的位置：

```
var p = obj.convertPoint(obj.center, toView: self.view)

println(p.x)  // this prints the x coordinate of 'obj' relative to the screen
println(p.y)  // this prints the y coordinate of 'obj' relative to the screen 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-03-07T19:48:35.733

这是@Pablo 答案的**Swift 3**更新，在我的情况下当然效果很好。

```
if let window = UIApplication.shared.keyWindow {
    parent.convert(child.frame.origin, to: window)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-05T14:28:15.263

在 swift 2.2 中为我工作：

```
var OrignTxtNomeCliente:CGPoint!

if let orign = TXT_NomeCliente.superview, let win = UIApplication.sharedApplication().keyWindow {
        OrignTxtNomeCliente = orign.convertPoint(TXT_NomeCliente.frame.origin, toView: win)
    } 
```

# crossrider - 将 CrossRider 捆绑为单个安装程序

> ID：15883306
> 
> 赞同：0
> 
> 时间：2013-04-08T15:37:21.293
> 
> 标签：crossrider

让我详细说明我要完成的工作：我有一个应用程序，除了特定的应用程序代码和安装程序之外，还捆绑了 CrossRider 浏览器扩展。问题是我的安装程序在*Programs & Features*中生成了一个条目，而 CrossRider 扩展生成了一个不同的条目。

有没有办法在*Programs & Features*中只显示我的安装程序，并隐藏/让 CrossRider 条目成为我的主安装程序的一部分？

谢谢，

米尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:31:37.063

恐怕控制面板中没有隐藏 Crossrider 扩展的选项。但是，如果您打开 Crossrider 支持票证（电子邮件 support@crossrider.com），处理此类问题的人（本周不在）将很乐意讨论我们可以考虑实施以帮助您的任何选项。

# html - 尝试重定向链接似乎无法正常工作

> ID：15883308
> 
> 赞同：0
> 
> 时间：2013-04-08T15:37:24.647
> 
> 标签：html, .htaccess

我正在尝试重定向此链接。当用户来到这里时：

```
campnubar.org/50/booklet 
```

我想将它们重定向到以下链接

```
http://campnubar.org/MyNubar/booklet.php 
```

我试过：

```
redirect 301 50/booklet 

http://campnubar.org/MyNubar/booklet.php 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:48:12.243

试试这个：

```
Redirect /50/booklet http://campnubar.org/MyNubar/booklet.php 
```

# java - 使用 primefaces 的自定义 BeanELResolver

> ID：15883309
> 
> 赞同：0
> 
> 时间：2013-04-08T15:37:24.803
> 
> 标签：java, jsf, primefaces

我正在使用 primefaces 库提供的动态列功能。因为我也有嵌套属性（例如 bean.city.address），所以我制作了一个自定义 BeanElResolver 来处理它：

```
public class ExtendedBeanELResolver extends BeanELResolver {

@Override
public Object getValue(ELContext context, Object base, Object property)
    throws NullPointerException, PropertyNotFoundException, ELException
{
    if (property == null || base == null || base instanceof ResourceBundle || base instanceof Map || base instanceof Collection) {
        return null;
    }

    String propertyString = property.toString();

    if (propertyString.contains(".")) {
        Object value = base;

        for (String propertyPart : propertyString.split("\\.")) {
            value = super.getValue(context, value, propertyPart);
        }

        return value;
    }
    else {
        return super.getValue(context, base, property);
    }
} 
```

它适用于 bean 属性，但是当呈现页面时，我在 primefaces 中为某些图像获得 PropertyNotFound Exception，这不是 bean 属性：

```
 Servlet failed with an Exception -javax.el.PropertyNotFoundException: The class      'org.primefaces.application.PrimeResourceHandler' does not have the property 'primefaces-   aristo:images/ui-bg_highlight-soft_100_c4c4c4_1x100.png'. 
```

我认为那是因为我扩展了 BeanELResolver 类，它以某种方式覆盖了处理各种属性的默认 ELResolver。我试图创建一个 CompositeELResolver 类来处理其他类型的属性，但我不知道如何。有任何想法吗？

# java - ERD 的实体类

> ID：15883317
> 
> 赞同：0
> 
> 时间：2013-04-08T15:37:54.743
> 
> 标签：java, database, class, erd

```
public class Table{

private String column[];
private String dataType[];
private boolean PK[];
private boolean NN[];
 private int count;
public Table()
{
    count =0;
}

public void AddColumn(String name,String dtype,boolean pk,boolean nn)
{

     column[count]=name;
     dataType[count]=dtype;
     PK[count]=pk;
     NN[count]=nn;
     count++;
} 

 public void Display(Table T)
 {

 }  

 public void DeleteColumn(String name)
{
  if(count==0){return;}
  else if(count ==1)
  {
      if(name==column[0])
         column[0]=null;
         dataType[0]=null;
        count--;
         return;
  }

  else 

  for(int i=0;i<count;i++)
  {
      if(name==column[i])
      {
          column[i]=column[count-1];
          dataType[i]=dataType[count-1];
          PK[i]=PK[count-1];
          NN[i]=NN[count-1];  
      }
  }

 } 
```

这是我的餐桌课；当我设计实体表并保持列名称数据类型等时。这个类及其私有属性是否正确，或者我应该将其分解为更多类，例如属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:43:59.463

我认为您应该创建`Column`课程。

我会这样做（当然可以做得更好）：

```
public class DataType {
    public static String DATA_TYPE_1 = "dataType1";
    public static String DATA_TYPE_2 = "dataType2";
    public static String DATA_TYPE_3 = "dataType3";
}

public class Column() {
    private String name;
    private DataType dataType;
    private boolean PK;
    private boolean NN;

    // getters and setters
}

public class Table {
    private ArrayList<Column> columns;

    public Table() {
        columns = new ArrayList<Column>();
    }

    public boolean AddColumn(Column column) {
        columns.add(column);
    }

    public boolean DeleteColumn(String name) {
        for (Column c : columns) {
            if (c.getName().equals(name)) {
                return columns.remove(column);
            }
        }
        return false;
    }
} 
```

# php - 重命名数据库并将数据库结构复制到新数据库 - MySQL & PHP 或 Ruby

> ID：15883330
> 
> 赞同：0
> 
> 时间：2013-04-08T15:38:32.810
> 
> 标签：php, mysql, mysqldump

参考：[Mysql数据库的复制数据库结构](https://stackoverflow.com/questions/771253/copy-database-sructure-of-mysql-database)

这是我的问题...我有一个网站，我使用 PPC 来吸引流量。我跟踪访问者的关键字、PPC 来源、广告版本等。目前我将这些数据存储在一个名为`visits`. 然而，当这个 PPC 活动全速运行时，它会生成大量数据。每隔一段时间，我的网站就会崩溃，因为该数据库已填满并停止响应。（而且因为我忘记手动复制并清空......）

所以现在我想创建一个每周/每月运行一次的 PHP 或 Ruby 脚本，将收集到的数据放入存档数据库并清空用于数据收集的数据库。我认为最快的方法是将现有数据库重命名为`visits`名称中带有日期戳的名称，例如`visits_010113_020113`2013 年 1 月。然后复制创建一个`visits`仅包含该结构的新数据库。主键是由 PHP 的 md5 函数生成的 32 字符散列，因此由于自动增量而导致的重复键不是问题。

（我选择了一个数据库来存储数据，因为我熟悉数据库，并且我希望能够解析数据以进行自定义报告。我愿意接受不同架构的建议，但我不想花下一个3 周的时间编写新的类，例如现在的新架构。）

我在将数据库的结构复制到新数据库时运行了 Google 搜索（第一个结果是我在上面引用的结果，第一页的其余大部分都非常相似）。但是，这些解决方案都通过 CLI 使用 mysqldump。我想通过 PHP 或 Ruby 做所有事情。我可以使用我为 PHP 提供的 SSH 类来执行 CLI，但这似乎是一个 hack。

我希望有一个简单的 SQL 语句可以传递来进行重命名和复制。我首选的解决方案将完全使用 PHP。我使用 PHP 5.3.10-1ubuntu3.6 和 Suhosin-Patch、mysql 5.5.29-0ubuntu0.12.04.2 和 Ubuntu 12.04 服务器。我还使用 PHP 的 PDO 对象与 MySQL 进行交互。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:21:11.637

所以这需要你有一个需要复制的表的列表，但我喜欢

```
CREATE TABLE cur_db.tbl_name LIKE old_db.tbl_name 
```

所以你的脚本可以重命名数据库，创建新的数据库，然后在你的表名上循环运行它。

# windows-runtime - Windows 商店应用程序的捕获屏幕

> ID：15883332
> 
> 赞同：8
> 
> 时间：2013-04-08T15:38:42.643
> 
> 标签：windows-runtime, winrt-xaml

是否可以捕获正在运行的 Windows 商店应用程序的内容？我需要捕获整个屏幕或用户定义的矩形区域。

1.  该应用程序将提供共享选项
2.  当应用程序正在运行并选择了共享选项时，我想定期获取屏幕截图，例如每秒 4 次
3.  此屏幕截图图像将发布到服务器，服务器将存储相同的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-29T19:48:06.653

现在可以在 Windows 8.1 中捕获应用商店应用的屏幕。您需要使用**[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap%28v=vs.110%29.aspx)**类。

你可以在这里找到一个例子：http: [//mariusbancila.ro/blog/2013/11/05/render-the-screen-of-a-windows-store-app-to-a-bitmap-in-windows-8 -1/](http://mariusbancila.ro/blog/2013/11/05/render-the-screen-of-a-windows-store-app-to-a-bitmap-in-windows-8-1/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T16:13:24.193

您无法以编程方式捕获屏幕。请参阅 MSDN 中的以下线程。

[以编程方式拍摄 Windows RT 快照。](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/92e8eb38-0242-422f-baa6-67ad08a4f5b7)

[如何在 Metro 应用程序中截屏？](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/63dd9596-bf94-440b-847a-961cbf036e7b)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:59:35.367

在 Windows 8.0 中没有将 Windows 8 XAML UI 呈现为位图的内置机制。根据您的 UI 的复杂程度，您可以实现自己的合成引擎以使用 Direct2D 将您的 UI 呈现为位图，或使用 WinRT XAML 工具包[WriteableBitmap.Render()](https://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c540adbd6952821a351d9ffa4d1d99#WinRTXamlToolkit.Composition/WriteableBitmapRenderExtensions.cs)方法实现，该方法实现对执行您的要求的支持有限（它没有t 渲染所有类型的控件，不支持 RenderTransform 等）。您可以更新它以添加对缺失功能的支持。

Windows 8.1 API 包含新[的“RenderTargetBitmap”](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.rendertargetbitmap.aspx)类，该类允许使用其`RenderAsync`方法呈现位图。

# .net - 如何在 Orchard CMS 上有条件地应用 html

> ID：15883335
> 
> 赞同：0
> 
> 时间：2013-04-08T15:38:49.547
> 
> 标签：.net, content-management-system, orchardcms

我的网站有 3 个菜单导航，但我需要每个使用不同的 html 呈现。

我需要一些关于我可以用什么来做到这一点的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:52:29.170

在您的开发站点上启用形状跟踪和小部件替代项，根据需要创建替代项并编辑其 cshtml 文件以获得所需的结果，然后禁用形状跟踪。

# scala - Scala/Lift - 地图功能

> ID：15883337
> 
> 赞同：1
> 
> 时间：2013-04-08T15:38:56.467
> 
> 标签：scala, lift

我正在使用 Lift 来生成我的网页前端。在 scala 文件中，我有一个列表：`val testList = List("part1","part2","part3")`
我将一个函数应用于列表的每个元素。现在我只想让它们变得大胆。我知道还有另一种方法可以通过更改 html 代码使它们变为粗体，但这不是本练习的重点。我正在尝试查看是否可以在 scala 文件中生成 html，而不是在 .html 文件中生成。

我定义了一个函数

```
 def formatText(s:String)={
    <B> s </B>
  } 
```

我打电话给`var testList2= testList.map(formatText(_))`

问题是在输出中我看到的`s s s`都是`bold`. 如果我在 the 周围加上引号，`<B>`那么字符串将被转义，所以我得到的是 < B >part1</ B >，而不是得到 part1（粗体）。

如何以粗体显示这些字符串？有没有`$s`告诉 Lift/scala 我的意思是变量`s`而不是 char `formatText`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:42:30.583

XML 文字的“转义”字符（用于添加变量、表达式等）是`{`and `}`：

```
def formatText(s:String)= <B> {s} </B> 
```

看看[Programming in Scala 26.3: XML Literals](http://www.artima.com/pins1ed/working-with-xml.html#26.3)了解更多细节。

# jquery - jquery - 获取具有相同数据属性值的元素数组

> ID：15883338
> 
> 赞同：-2
> 
> 时间：2013-04-08T15:39:01.453
> 
> 标签：jquery, custom-data-attribute

鉴于我有一个类似的文件：

```
<div>
    <div data-myAttr = "foo"></div>
    <div data-myAttr = "bar"></div>
</div>
<div>
    <div data-myAttr = "foo"></div>
    <div data-myAttr = "bar"></div>
</div> 
```

如何获取包含 data-myAttr 且 foo 和 bar 分组的所有元素？

编辑：这更像是一个理论问题。我没有尝试过失败的代码，但正在为已经存在的代码探索更优雅的选择。

顺便说一句，谢谢你的-1！？

编辑：有人可以将此标记为重复吗？在这里找到适用的答案：[Group and count HTML elements by data attribute in jQuery](https://stackoverflow.com/questions/15314872/group-and-count-html-elements-by-data-attribute-in-jquery)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T23:24:54.447

好的，这是我在这里的第一个答案，所以不要粗暴地判断......在我的情况下，我的数组中也有重复项。我才刚刚开始完全理解这一切是如何运作的，但这里是：

```
elements = $('div[data-myAttr]').map(function () {
    return $(this).attr('data-myAttr');
}); 
```

然后按名称运行一个基本的 js 循环以获取具有正确属性的所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:39:52.113

您可以使用[属性选择器](http://api.jquery.com/has-attribute-selector/)并将两个属性选择器与`comma`;

**[现场演示](http://jsfiddle.net/ZxQzW/)**

```
$('[data-myAttr=foo], [data-myAttr=bar]') 
```

您可以使用遍历元素`each()`

```
$('[data-myAttr=foo], [data-myAttr=bar]').each(function(){
  alert($(this).text());  
}); 
```

# java - 为什么索引切片查询似乎需要随机但一致的时间来加载数据？

> ID：15883342
> 
> 赞同：0
> 
> 时间：2013-04-08T15:39:11.767
> 
> 标签：java, cassandra, hector

我总是收到来自测试人员的错误报告，他们抱怨我的页面从 cassandra 加载数据的速度不够快。数据会加载时间戳介于当前日期和之前 30 天之间的任何内容，以及用户输入的任何其他过滤条件，包括每页要加载多少数据点（我实现了一些代码来检索数据） page" 一次从 cassandra 加载，以避免一次加载数十万个数据点的内存问题)。

在某些日子，每页加载最大数量的时间不到一秒，而在其他日子，则需要 15 分钟。在任何一天，加载所需的时间长度都是一致的，但第二天加载时间可能会与前一天相比发生巨大变化。

这可能是什么原因？我希望能够给我的主管和测试人员一个明确的答案，这样我就可以停止发回没有修复或解释的错误报告。

我用来从 Cassandra 检索数据的 Java API 是 Hector，当前版本为 1.0-5

如果您需要更多信息，我会尽力提供。感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:57:22.833

Cassandra 中二级索引的性能在很大程度上取决于索引列具有的不同值的数量。

就像这个文档中所说的那样：[http](http://www.datastax.com/docs/1.0/ddl/indexes) ://www.datastax.com/docs/1.0/ddl/indexes 枚举将是二级索引的良好候选者。但是随着数据的增长，通过任意辅助唯一键搜索行会变得越来越慢。（简称国家代码：是；电子邮件：否）

如果您有很多与其他几行相同的索引列（如电子邮件、街道地址、电话号码等），我建议创建另一行，将这些索引作为键（相同的列族或不同的列族） ) 并在那里复制行内容。非规范化是您在 cassandra 中应该考虑的事情。

我还建议使用 TTL 或通过在您这边过滤而不是在查询中添加额外条件来消除早于某个时间戳的所有内容。

# php - PHP一直显示“数组”而不是[字符串]

> ID：15883344
> 
> 赞同：-2
> 
> 时间：2013-04-08T15:39:14.670
> 
> 标签：php, html, mysql, text-formatting

我正在尝试做一些文本格式并在一大块代码中查询 SQL。以前，它在没有格式化的情况下很好地列出了列表，但是为了用户可读性，我需要用空格替换下划线并删除每个字符串之前的类别。

```
<?php
 //doing the query
    $query = "SELECT * FROM parts WHERE itemName LIKE 'Processors:%'";
    $result = mysql_query($query) or die("Unable to query parts table!");
    while($row=mysql_fetch_array($result)) {
 //explode removes the preceding category, str_replace obviously replaces the _
        $labelCPU = explode(':',str_replace('_',' ',$row['itemName']));
 //displays the option in HTML
        $aa .= "<option value='{$row['partID']}'>$labelCPU</option>";
        }
?>
<select name="cpu"><? echo $aa; ?></select> 
```

当它回显列表中的变量时，我可以告诉查询仍然执行良好，因为我获得了适当数量的选项，但它们都显示为“数组”。

我在哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:42:09.063

您在下面的行：

```
$labelCPU = explode(':',str_replace('_',' ',$row['itemName'])); 
```

正在将其更改为数组。Explode 基本上接受一个字符串并将其转换为一个数组，按您指定的字符（在本例中为“:”）将其拆分。

您需要执行以下操作：

```
for ($i=0; $i<count($labelCPU); $i++) {
    $aa .= "<option value='{$row['partID']}'>$labelCPU[$i]</option>";
} 
```

我怀疑您正在使用爆炸来获取“：”之后的类别名称。所以也许这会更好：

```
 $aa .= "<option value='{$row['partID']}'>$labelCPU[1]</option>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:43:46.537

php 函数`explode`返回一个数组。
放置
`var_dump($labelCPU);`
在爆炸声明之后。它将转储存储在`$labelCPU`. 然后找到包含所需数据的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:45:22.940

如果您不使用数字键，请切换到 mysql_fetch_assoc，您也只是缺少关于您爆炸的索引（我添加了评论）。

请注意，不推荐使用 mysql_fetch_assoc/array 以支持 PDO。如果长寿是一个问题，可能要考虑换掉。

```
<?php

$query  = "SELECT * FROM parts WHERE itemName LIKE 'Processors:%'";
$result = mysql_query($query) or die("Unable to query parts table!");
$aa     = "";

while($row = mysql_fetch_assoc( $result ) ) 
{
    $labelCPU = explode(':',str_replace('_',' ',$row['itemName']));
    $labelCPU = $labelCPU[1]; // this is what you're missing
    $aa .= "<option value='{$row['partID']}'>$labelCPU</option>";
}
?>
<select name="cpu"><? echo $aa; ?></select> 
```

祝你好运！

# sql - 更新外部表中的外键值？

> ID：15883350
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:39:25.533
> 
> 标签：sql, sql-server, tsql

您好我想通过以下方式更新表中的外键值：

```
FK
1 to 5
2 to 6
3 to 7
4 to 1
5 to 2
6 to 3
7 to 4 
```

但是，如果我按顺序进行上述操作：

```
update table set fk = 5 where fk=1 
```

当我想更新值 5 时，我会将值与先前将值 1 更改为 5 的更新语句结果混合。

如何在不将它们与早期结果混合的情况下更新这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:48:30.437

您可以临时`Updated BIT`向表中添加一列，当您更新行的值时，将此位设置为`1`（True - 已更新） - 并避免更新那些已更新的行！

第 1 步：添加带有值的新列`0`（false - 尚未更新）：

```
ALTER TABLE dbo.YourTable 
  ADD Updated BIT NOT NULL DEFAULT(0) WITH VALUES 
```

第 2 步：进行更新 - 尊重`Updated`旗帜！

```
UPDATE dbo.YourTable 
SET fk = 5, Updated = 1
WHERE fk = 1 AND Updated = 0 
```

第 3 步：所有内容更新后 - 再次删除该列

```
ALTER TABLE dbo.YourTable 
  DROP COLUMN Updated 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:48:52.790

您可以按照 FreshPrince 的建议使用额外的列。添加新列，将其设置为适当的值，然后将键更改为新列。

另一种方法可能是使用该范围之外的一组值。这将消除添加和删除列的需要。所以...

```
update table set fk = 15 where fk=1

1 to 15
2 to 16
3 to 17
4 to 11
5 to 12
6 to 13
7 to 14 
```

然后直接更新从所有行中减去 10。

```
update table set fk = fk - 10 
```

您还需要删除并恢复外键约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:28:43.173

您还可以使用 CASE 表达式在单个 UPDATE 语句中指定新值：

```
UPDATE YourTable 
SET fk=CASE fk
    WHEN 1 THEN 5
    WHEN 2 THEN 6
    WHEN 3 THEN 7
    WHEN 4 THEN 1
    WHEN 5 THEN 2
    WHEN 6 THEN 3
    WHEN 7 THEN 4
END
WHERE fk IN (1,2,3,4,5,6,7) 
```

在这种特殊情况下，您还可以使用：

```
UPDATE YourTable 
SET fk=(fk+3)%7+1
WHERE fk BETWEEN 1 AND 7 
```

拉兹万

# python - ValueError: 没有 JSON 对象可以被解码，但是是肯定的

> ID：15883351
> 
> 赞同：3
> 
> 时间：2013-04-08T15:39:25.843
> 
> 标签：python, json, url

我正在浏览一些 URL，我可以从我正在使用的 API 中获取大部分数据。*Imgur API。但是，当它找到之前发布但最终被删除的图像时，它仍然显示积极的 URL 获取响应（代码 200），并且当我使用

```
 j1 = json.loads(r_positive.text) 
```

我收到此错误：

```
http://imgur.com/gallery/cJPSzbu.json
<Response [200]>
Traceback (most recent call last):
  File "image_poller_multiple.py", line 61, in <module>
    j1 = json.loads(r_positive.text)
  File "/usr/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

我怎样才能“获取” j1 变量中的错误呢？我想使用条件结构来解决问题并避免我的程序崩溃。就像是

```
if j1 == ValueError:
  continue
else:
  do_next_procedures() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T15:42:51.333

您需要`try` `except`改用：

```
try:
    j1 = json.loads(r_positive.text)
except ValueError:
    # decoding failed
    continue
else:
    do_next_procedures() 
```

请参阅Python 教程中的[处理异常](https://docs.python.org/tutorial/errors.html#handling-exceptions)。

*真正*发生的是，您被重定向到该 URL，而您获得的是图像页面。如果您`requests`用于获取 JSON，请查看[响应历史记录](https://requests.readthedocs.io/en/latest/user/quickstart/#redirection-and-history)：

```
if r_positive.history:
    # more than one request, we were redirected:
    continue
else:
    j1 = r_positive.json() 
```

或者您甚至可以*禁止*重定向：

```
r = requests.post(url, allow_redirects=False)
if r.status == 200:
    j1 = r.json() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:45:01.543

您列出的 URL 会将您重定向到 HTML 页面。（`curl`用来检查这样的事情，他是你的朋友。）

HTML 页面显然不能解析为 JSON。

你可能需要的是：

```
response = fetch_the_url(url)
if response.status == 200:
  try:
    j1 = json.loads(response.text)
  except ValueError:
    # json can't be parsed
    continue 
```

# file-io - 如何使用 InstallShield 添加 Windows 文件类型关联？

> ID：15883361
> 
> 赞同：6
> 
> 时间：2013-04-08T15:39:52.223
> 
> 标签：file-io, installshield, file-association

我编写了一个应用程序来接受文件路径（具有自定义扩展名的文件）作为参数，然后对其进行一些处理。

我的想法是我可以将自定义文件与我安装的可执行应用程序关联（使用 Windows 功能）（通过安装屏蔽安装程序）。

我希望能够双击具有自定义扩展名的文件并将其传递给我的可执行文件进行处理。

但是，我得到的行为是这样的：

*   如果我双击我的文件（带有自定义扩展名），它什么也不做。
*   如果我将文件拖放到我的可执行程序上，那么它会按预期工作。

那么是否可以通过简单地双击我的自定义文件来使其工作？

我猜windows正在尝试使用可执行文件打开自定义文件，这可能与将其作为参数传递不一样？！

任何帮助表示赞赏。

谢谢，KS

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-04T15:53:26.557

使用 InstallShield 2013：

***对于自定义文件类型***

1.  切换到“安装设计器”选项卡。
2.  在左侧的框架中，展开“组织”并选择“组件”。
3.  从组件列表中，展开主要 exe 的选项，然后展开“高级设置”并选择“文件类型”。
4.  右键单击“扩展”并选择“新扩展”。输入没有前导句点的扩展名。
5.  当你创建它时，你的扩展应该已经自动添加了“动词”“打开”。选择那个。输入“显示名称”，例如“&Open with MyApp”。输入一个“参数”，例如“%1”（将文件名传递给用引号括起来的 exe 以处理长文件名/空格。）
6.  从列表中选择您的新扩展，然后为其输入“ProgID”。例如，“MyApp.Document”。

要定义与类型关联的特定图标（而不是隐式 exe 图标）：

7.  单击您添加的“ProgID”（“MyApp.Document”或其他）。单击“图标”字段，然后单击出现的“...”按钮。这将允许您浏览到图标文件。

***对于“通用”文件类型***

如果文件类型不“专属”于您的应用程序，您可能希望将您的应用程序添加到打开该类型的选项列表中，但不要将其设为默认程序，或更改默认图标。以下是如何实现这一目标...

1.  切换到“安装设计器”选项卡并**按照自定义文件类型的说明进行操作**。
2.  在左侧的框架中，展开“组织”并选择“组件”。
3.  从组件列表中，展开主要 exe 的选项，然后选择“注册表数据”。
4.  在“目标计算机框架”中，右键单击“HKEY_CLASSES_ROOT”并选择“新建”...“密钥”。将键命名为您要为其定义关联的文件扩展名（包括前导句号）。
5.  右键单击该新键并选择“新建”...“默认值”。然后，右键单击该默认值，选择“修改”。输入默认应用程序的 ProgID 以打开此类型并指定图标。您可能需要检查注册表以确定此值。例如，zip 文件的标准默认值是“CompressedFolder”。弄清楚这一点是此过程中最棘手的部分。
6.  右键单击该新键并再次选择“新建”...“键”以创建子键。将子键命名为“OpenWithProgids”。
7.  右键单击“OpenWithProgids”键并选择“新建”...“字符串值”。将该值命名为您定义为默认值的 ProgId。将此值保留为“空”（“名称”是“值”）。
8.  右键单击“OpenWithProgids”键并再次选择“New”...“String Value”。这一次，将值命名为您按照自定义文件类型的说明为应用程序定义的 ProgId。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T16:13:25.183

无论您的安装方法是什么（installscript、MSI 等），您基本上都需要创建一些 HKEY_CLASSES_ROOT 条目。根据您的方法，有不同的方法来解决它（例如，在 installshield 创建的 MSI 安装程序中，如果您遵循[指南](http://kb.flexerasoftware.com/doc/Helpnet/installshield16helplib_sp1/IHelpAdvFileTypes.htm)，它还可以在检测到有问题时触发您的应用程序的安装修复。

您需要的根目录：（我们假设您的扩展名是 .xyz）

1.  在 HKCR 下创建一个名为“.xyz”的新密钥（例如，您可以在这里看到许多其他密钥）
2.  在默认值中，将数据设置为某个名称，类似于“myapp.xyz”
3.  创建一个名为“myapp.xyz”的新 HKCR 密钥以匹配您在 2 中创建的内容
4.  在默认值中，将数据设置为描述性标签。例如“我的应用数据文件”
5.  创建一个名为 shell 的子项（您可以在此处将默认值设置为“打开”，这将在资源管理器中打开默认操作）
6.  创建一个名为 open 的子项
7.  创建一个名为 command 的子项
8.  在命令键的默认值中，将值设置为**"c:\path\to\installfolder\appname.exe" "%1"** （注意此实例中的所有引号）
9.  您还可以在“myapp.xyz”下创建一个名为 DefaultIcon 的子项，它指向一个图标文件，该文件将与您在资源管理器中的扩展名相关联。

如果您使用 installshield，上面的很多工作都已为您完成；尽管我过去不得不对其进行调整，以使其与具有多种文件格式的更复杂应用程序中的所需输出相匹配。

# jsf - 按钮作为链接，不工作（不使用导航箱）

> ID：15883367
> 
> 赞同：0
> 
> 时间：2013-04-08T15:40:11.330
> 
> 标签：jsf, button, hyperlink

我试图通过一个按钮来实现以下目标。

```
<h:outputLink value="/admin/category/read">
    Cancel
    <f:param name="cat" value="" />
    <f:param name="subcat" value="" />
</h:outputLink> 
```

我尝试过使用`h:button`，尽管该`outcome`属性不起作用，因为`/admin/category/read`它不是指定的导航案例。

如何使用按钮作为链接，而不必使用导航案例或服务器端方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:29:51.660

不，没有使用 JSF 属性的解决方案，至少如果您真的没有`h:button`.

如果可能的话，我建议使用评论中已经提到的 CSS 样式。

但`h:button`只需使用`onclick="window.location.href=URL"`. 因此，如果您真的想要，您可以自己构建 URL，只需使用一个普通的 HTML 输入按钮，如下所示：

```
<input type="button" value="Cancel"
       onclick="window.location.href='/admin/category/read?cat=&subcat='; return false;" /> 
```

**有关的：**

*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# c# - 带有 DotNetOpenAuth 和 Twitter 的 2-legged OAuth。收到 401 错误

> ID：15883368
> 
> 赞同：1
> 
> 时间：2013-04-08T15:40:11.930
> 
> 标签：c#, twitter, oauth, dotnetopenauth

我正在尝试通过 twitter 获得 2-legged oauth，以便能够检索推文以显示在网站上。为此，我想使用 DotNetOpenAuth。为了让我开始，我使用了 DotNetOpenAuth 附带的 OAuthConsumer 示例。

下面是我现在拥有的代码隐藏代码。在这里，我使用 3 腿部分或 2 腿部分。三足部分工作正常（这是基于示例中的 Twitter.aspx）。然而，2 腿部分（基于 GoogleApps2Legged.aspx）在 twitter.RequestNewClientAccount() 上给出 401 错误；

```
private string AccessToken
{
    get { return (string)Session["TwitterAccessToken"]; }
    set { Session["TwitterAccessToken"] = value; }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        // 3 legged
        var twitter = new WebConsumer(TwitterConsumer.ServiceDescription, TwitterConsumer.ShortTermUserSessionTokenManager);

        //// Is Twitter calling back with authorization?
        var accessTokenResponse = twitter.ProcessUserAuthorization();
        if (accessTokenResponse != null)
        {
            this.AccessToken = accessTokenResponse.AccessToken;
        }
        else if (this.AccessToken == null)
        {
            // If we don't yet have access, immediately request it.
            twitter.Channel.Send(twitter.PrepareRequestUserAuthorization());
        }

        var response = TwitterConsumer.GetUserTimeLine(twitter, this.AccessToken);

        // 2 legged
        var twitter = new WebConsumer(TwitterConsumer.ServiceDescription, TwitterConsumer.ShortTermUserSessionTokenManager);

        this.AccessToken = twitter.RequestNewClientAccount();
        var response = twitter.PrepareAuthorizedRequestAndSend(TwitterConsumer.GetUserTimelineStatusEndpoint, this.AccessToken);
    }
} 
```

TwitterConsumer.cs

```
//-----------------------------------------------------------------------
// <copyright file="TwitterConsumer.cs" company="Outercurve Foundation">
//     Copyright (c) Outercurve Foundation. All rights reserved.
// </copyright>
//-----------------------------------------------------------------------

namespace DotNetOpenAuth.ApplicationBlock {
    using System;
    using System.Collections.Generic;
    using System.Configuration;
    using System.Globalization;
    using System.IO;
    using System.Net;
    using System.Web;
    using System.Linq;
    using System.Xml;
    using System.Xml.Linq;
    using System.Xml.XPath;
    using DotNetOpenAuth.Messaging;
    using DotNetOpenAuth.OAuth;
    using DotNetOpenAuth.OAuth.ChannelElements;

    /// <summary>
    /// A consumer capable of communicating with Twitter.
    /// </summary>
    public static class TwitterConsumer {
        /// <summary>
        /// The description of Twitter's OAuth protocol URIs for use with actually reading/writing
        /// a user's private Twitter data.
        /// </summary>
        public static readonly ServiceProviderDescription ServiceDescription = new ServiceProviderDescription {
            RequestTokenEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/request_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/authorize", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            AccessTokenEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/access_token", HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
        };

        /// <summary>
        /// The description of Twitter's OAuth protocol URIs for use with their "Sign in with Twitter" feature.
        /// </summary>
        public static readonly ServiceProviderDescription SignInWithTwitterServiceDescription = new ServiceProviderDescription {
            RequestTokenEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/request_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/authenticate", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            AccessTokenEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/access_token", HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
        };

        /// <summary>
        /// The URI to get a user's favorites.
        /// </summary>
        private static readonly MessageReceivingEndpoint GetFavoritesEndpoint = new MessageReceivingEndpoint("http://api.twitter.com/1/favorites.xml", HttpDeliveryMethods.GetRequest);

        /// <summary>
        /// The URI to get the data on the user's home page.
        /// </summary>
        public static readonly MessageReceivingEndpoint GetFriendTimelineStatusEndpoint = new MessageReceivingEndpoint("http://api.twitter.com/1/statuses/friends_timeline.xml", HttpDeliveryMethods.GetRequest);

        public static readonly MessageReceivingEndpoint UpdateProfileBackgroundImageEndpoint = new MessageReceivingEndpoint("http://api.twitter.com/1/account/update_profile_background_image.xml", HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest);

        public static readonly MessageReceivingEndpoint UpdateProfileImageEndpoint = new MessageReceivingEndpoint("http://api.twitter.com/1/account/update_profile_image.xml", HttpDeliveryMethods.PostRequest | HttpDeliveryMethods.AuthorizationHeaderRequest);

        public static readonly MessageReceivingEndpoint VerifyCredentialsEndpoint = new MessageReceivingEndpoint("http://api.twitter.com/1/account/verify_credentials.xml", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest);

        public static readonly MessageReceivingEndpoint GetUserTimelineStatusEndpoint = new MessageReceivingEndpoint("http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=concepts2go", HttpDeliveryMethods.GetRequest);

        /// <summary>
        /// The consumer used for the Sign in to Twitter feature.
        /// </summary>
        private static WebConsumer signInConsumer;

        /// <summary>
        /// The lock acquired to initialize the <see cref="signInConsumer"/> field.
        /// </summary>
        private static object signInConsumerInitLock = new object();

        /// <summary>
        /// Initializes static members of the <see cref="TwitterConsumer"/> class.
        /// </summary>
        static TwitterConsumer() {
            // Twitter can't handle the Expect 100 Continue HTTP header. 
            ServicePointManager.FindServicePoint(GetFavoritesEndpoint.Location).Expect100Continue = false;
        }

        /// <summary>
        /// Gets a value indicating whether the Twitter consumer key and secret are set in the web.config file.
        /// </summary>
        public static bool IsTwitterConsumerConfigured {
            get {
                return true;
            }
        }

        /// <summary>
        /// Gets the consumer to use for the Sign in to Twitter feature.
        /// </summary>
        /// <value>The twitter sign in.</value>
        private static WebConsumer TwitterSignIn {
            get {
                if (signInConsumer == null) {
                    lock (signInConsumerInitLock) {
                        if (signInConsumer == null) {
                            signInConsumer = new WebConsumer(SignInWithTwitterServiceDescription, ShortTermUserSessionTokenManager);
                        }
                    }
                }

                return signInConsumer;
            }
        }

        public static InMemoryTokenManager ShortTermUserSessionTokenManager {
            get {
                var store = HttpContext.Current.Session;
                var tokenManager = (InMemoryTokenManager)store["TwitterShortTermUserSessionTokenManager"];
                if (tokenManager == null) {
                    string consumerKey = "dgnwPLz40rcvmGKn0SugfA";
                    string consumerSecret = "IvaV0cA3N146mXTXPH5EaEHX8XbULch1vwBYpeI4Xc";
                    if (IsTwitterConsumerConfigured) {
                        tokenManager = new InMemoryTokenManager(consumerKey, consumerSecret);
                        store["TwitterShortTermUserSessionTokenManager"] = tokenManager;
                    } else {
                        throw new InvalidOperationException("No Twitter OAuth consumer key and secret could be found in web.config AppSettings.");
                    }
                }

                return tokenManager;
            }
        }

        public static XDocument GetUpdates(ConsumerBase twitter, string accessToken) {
            IncomingWebResponse response = twitter.PrepareAuthorizedRequestAndSend(GetFriendTimelineStatusEndpoint, accessToken);
            return XDocument.Load(XmlReader.Create(response.GetResponseReader()));
        }

        public static IncomingWebResponse GetUserTimeLine(ConsumerBase twitter, string accessToken)
        {
            IncomingWebResponse response = twitter.PrepareAuthorizedRequestAndSend(GetUserTimelineStatusEndpoint, accessToken);

            return response;

            //return XDocument.Load(XmlReader.Create(response.GetResponseReader()));
        }

        public static XDocument GetFavorites(ConsumerBase twitter, string accessToken) {
            IncomingWebResponse response = twitter.PrepareAuthorizedRequestAndSend(GetFavoritesEndpoint, accessToken);
            return XDocument.Load(XmlReader.Create(response.GetResponseReader()));
        }

        public static XDocument UpdateProfileBackgroundImage(ConsumerBase twitter, string accessToken, string image, bool tile) {
            var parts = new[] {
                MultipartPostPart.CreateFormFilePart("image", image, "image/" + Path.GetExtension(image).Substring(1).ToLowerInvariant()),
                MultipartPostPart.CreateFormPart("tile", tile.ToString().ToLowerInvariant()),
            };
            HttpWebRequest request = twitter.PrepareAuthorizedRequest(UpdateProfileBackgroundImageEndpoint, accessToken, parts);
            request.ServicePoint.Expect100Continue = false;
            IncomingWebResponse response = twitter.Channel.WebRequestHandler.GetResponse(request);
            string responseString = response.GetResponseReader().ReadToEnd();
            return XDocument.Parse(responseString);
        }

        public static XDocument UpdateProfileImage(ConsumerBase twitter, string accessToken, string pathToImage) {
            string contentType = "image/" + Path.GetExtension(pathToImage).Substring(1).ToLowerInvariant();
            return UpdateProfileImage(twitter, accessToken, File.OpenRead(pathToImage), contentType);
        }

        public static XDocument UpdateProfileImage(ConsumerBase twitter, string accessToken, Stream image, string contentType) {
            var parts = new[] {
                MultipartPostPart.CreateFormFilePart("image", "twitterPhoto", contentType, image),
            };
            HttpWebRequest request = twitter.PrepareAuthorizedRequest(UpdateProfileImageEndpoint, accessToken, parts);
            IncomingWebResponse response = twitter.Channel.WebRequestHandler.GetResponse(request);
            string responseString = response.GetResponseReader().ReadToEnd();
            return XDocument.Parse(responseString);
        }

        public static XDocument VerifyCredentials(ConsumerBase twitter, string accessToken) {
            IncomingWebResponse response = twitter.PrepareAuthorizedRequestAndSend(VerifyCredentialsEndpoint, accessToken);
            return XDocument.Load(XmlReader.Create(response.GetResponseReader()));
        }

        public static string GetUsername(ConsumerBase twitter, string accessToken) {
            XDocument xml = VerifyCredentials(twitter, accessToken);
            XPathNavigator nav = xml.CreateNavigator();
            return nav.SelectSingleNode("/user/screen_name").Value;
        }

        /// <summary>
        /// Prepares a redirect that will send the user to Twitter to sign in.
        /// </summary>
        /// <param name="forceNewLogin">if set to <c>true</c> the user will be required to re-enter their Twitter credentials even if already logged in to Twitter.</param>
        /// <returns>The redirect message.</returns>
        /// <remarks>
        /// Call <see cref="OutgoingWebResponse.Send"/> or
        /// <c>return StartSignInWithTwitter().<see cref="MessagingUtilities.AsActionResult">AsActionResult()</see></c>
        /// to actually perform the redirect.
        /// </remarks>
        public static OutgoingWebResponse StartSignInWithTwitter(bool forceNewLogin) {
            var redirectParameters = new Dictionary<string, string>();
            if (forceNewLogin) {
                redirectParameters["force_login"] = "true";
            }
            Uri callback = MessagingUtilities.GetRequestUrlFromContext().StripQueryArgumentsWithPrefix("oauth_");
            var request = TwitterSignIn.PrepareRequestUserAuthorization(callback, null, redirectParameters);
            return TwitterSignIn.Channel.PrepareResponse(request);
        }

        /// <summary>
        /// Checks the incoming web request to see if it carries a Twitter authentication response,
        /// and provides the user's Twitter screen name and unique id if available.
        /// </summary>
        /// <param name="screenName">The user's Twitter screen name.</param>
        /// <param name="userId">The user's Twitter unique user ID.</param>
        /// <returns>
        /// A value indicating whether Twitter authentication was successful;
        /// otherwise <c>false</c> to indicate that no Twitter response was present.
        /// </returns>
        public static bool TryFinishSignInWithTwitter(out string screenName, out int userId) {
            screenName = null;
            userId = 0;
            var response = TwitterSignIn.ProcessUserAuthorization();
            if (response == null) {
                return false;
            }

            screenName = response.ExtraData["screen_name"];
            userId = int.Parse(response.ExtraData["user_id"]);

            // If we were going to make this LOOK like OpenID even though it isn't,
            // this seems like a reasonable, secure claimed id to allow the user to assume.
            OpenId.Identifier fake_claimed_id = string.Format(CultureInfo.InvariantCulture, "http://twitter.com/{0}#{1}", screenName, userId);

            return true;
        }
    }
} 
```

InMemoryTokenManager.cs

```
//-----------------------------------------------------------------------
// <copyright file="InMemoryTokenManager.cs" company="Outercurve Foundation">
//     Copyright (c) Outercurve Foundation. All rights reserved.
// </copyright>
//-----------------------------------------------------------------------

namespace DotNetOpenAuth.ApplicationBlock {
    using System;
    using System.Collections.Generic;
    using System.Diagnostics;
    using DotNetOpenAuth.OAuth.ChannelElements;
    using DotNetOpenAuth.OAuth.Messages;
    using DotNetOpenAuth.OpenId.Extensions.OAuth;

    /// <summary>
    /// A token manager that only retains tokens in memory. 
    /// Meant for SHORT TERM USE TOKENS ONLY.
    /// </summary>
    /// <remarks>
    /// A likely application of this class is for "Sign In With Twitter",
    /// where the user only signs in without providing any authorization to access
    /// Twitter APIs except to authenticate, since that access token is only useful once.
    /// </remarks>
    public class InMemoryTokenManager : IConsumerTokenManager, IOpenIdOAuthTokenManager {
        private Dictionary<string, string> tokensAndSecrets = new Dictionary<string, string>();

        /// <summary>
        /// Initializes a new instance of the <see cref="InMemoryTokenManager"/> class.
        /// </summary>
        /// <param name="consumerKey">The consumer key.</param>
        /// <param name="consumerSecret">The consumer secret.</param>
        public InMemoryTokenManager(string consumerKey, string consumerSecret) {
            if (string.IsNullOrEmpty(consumerKey)) {
                throw new ArgumentNullException("consumerKey");
            }

            this.ConsumerKey = consumerKey;
            this.ConsumerSecret = consumerSecret;
        }

        /// <summary>
        /// Gets the consumer key.
        /// </summary>
        /// <value>The consumer key.</value>
        public string ConsumerKey { get; private set; }

        /// <summary>
        /// Gets the consumer secret.
        /// </summary>
        /// <value>The consumer secret.</value>
        public string ConsumerSecret { get; private set; }

        #region ITokenManager Members

        /// <summary>
        /// Gets the Token Secret given a request or access token.
        /// </summary>
        /// <param name="token">The request or access token.</param>
        /// <returns>
        /// The secret associated with the given token.
        /// </returns>
        /// <exception cref="ArgumentException">Thrown if the secret cannot be found for the given token.</exception>
        public string GetTokenSecret(string token) {
            return this.tokensAndSecrets[token];
        }

        /// <summary>
        /// Stores a newly generated unauthorized request token, secret, and optional
        /// application-specific parameters for later recall.
        /// </summary>
        /// <param name="request">The request message that resulted in the generation of a new unauthorized request token.</param>
        /// <param name="response">The response message that includes the unauthorized request token.</param>
        /// <exception cref="ArgumentException">Thrown if the consumer key is not registered, or a required parameter was not found in the parameters collection.</exception>
        /// <remarks>
        /// Request tokens stored by this method SHOULD NOT associate any user account with this token.
        /// It usually opens up security holes in your application to do so.  Instead, you associate a user
        /// account with access tokens (not request tokens) in the <see cref="ExpireRequestTokenAndStoreNewAccessToken"/>
        /// method.
        /// </remarks>
        public void StoreNewRequestToken(UnauthorizedTokenRequest request, ITokenSecretContainingMessage response) {
            this.tokensAndSecrets[response.Token] = response.TokenSecret;
        }

        /// <summary>
        /// Deletes a request token and its associated secret and stores a new access token and secret.
        /// </summary>
        /// <param name="consumerKey">The Consumer that is exchanging its request token for an access token.</param>
        /// <param name="requestToken">The Consumer's request token that should be deleted/expired.</param>
        /// <param name="accessToken">The new access token that is being issued to the Consumer.</param>
        /// <param name="accessTokenSecret">The secret associated with the newly issued access token.</param>
        /// <remarks>
        ///     <para>
        /// Any scope of granted privileges associated with the request token from the
        /// original call to <see cref="StoreNewRequestToken"/> should be carried over
        /// to the new Access Token.
        /// </para>
        ///     <para>
        /// To associate a user account with the new access token,
        /// <see cref="System.Web.HttpContext.User">HttpContext.Current.User</see> may be
        /// useful in an ASP.NET web application within the implementation of this method.
        /// Alternatively you may store the access token here without associating with a user account,
        /// and wait until <see cref="WebConsumer.ProcessUserAuthorization()"/> or
        /// <see cref="DesktopConsumer.ProcessUserAuthorization(string, string)"/> return the access
        /// token to associate the access token with a user account at that point.
        /// </para>
        /// </remarks>
        public void ExpireRequestTokenAndStoreNewAccessToken(string consumerKey, string requestToken, string accessToken, string accessTokenSecret) {
            this.tokensAndSecrets.Remove(requestToken);
            this.tokensAndSecrets[accessToken] = accessTokenSecret;
        }

        /// <summary>
        /// Classifies a token as a request token or an access token.
        /// </summary>
        /// <param name="token">The token to classify.</param>
        /// <returns>Request or Access token, or invalid if the token is not recognized.</returns>
        public TokenType GetTokenType(string token) {
            throw new NotImplementedException();
        }

        #endregion

        #region IOpenIdOAuthTokenManager Members

        /// <summary>
        /// Stores a new request token obtained over an OpenID request.
        /// </summary>
        /// <param name="consumerKey">The consumer key.</param>
        /// <param name="authorization">The authorization message carrying the request token and authorized access scope.</param>
        /// <remarks>
        ///     <para>The token secret is the empty string.</para>
        ///     <para>Tokens stored by this method should be short-lived to mitigate
        /// possible security threats.  Their lifetime should be sufficient for the
        /// relying party to receive the positive authentication assertion and immediately
        /// send a follow-up request for the access token.</para>
        /// </remarks>
        public void StoreOpenIdAuthorizedRequestToken(string consumerKey, AuthorizationApprovedResponse authorization) {
            this.tokensAndSecrets[authorization.RequestToken] = string.Empty;
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:06:17.607

Twitter 并不真正支持[我所说的 2-legged OAuth](http://blog.nerdbank.net/2011/06/what-is-2-legged-oauth.html)。它只执行“0-legged OAuth”。由于`ConsumerBase.RequestNewClientAccount`您调用的方法是用于 2-legged OAuth，因此它失败了。

对于 0-legged OAuth，您需要创建一个`InMemoryTokenManager`预填充您的使用者密钥、秘密和访问令牌和秘密的文件。然后将该令牌管理器传递给您的`ConsumerBase`派生类型（`WebConsumer`或`DesktopConsumer`）并开始进行授权调用。

或者更简单地说，您可以[下载包含 DelegatingHandler 的 DotNetOpenAuth v4.3 预览版](https://groups.google.com/forum/?fromgroups#!searchin/dotnetopenid/delegatinghandler/dotnetopenid/hMvPRtsewsI/loOn56kOjF4J)，您可以在其中完全跳过上述步骤，只需将您的密钥、令牌和秘密注入一个简单的方法，然后开始使用`HttpClient`自动 OAuth 1 签名的调用.

# jquery - 排序后如何在准备好的文档上运行功能？jQuery

> ID：15883371
> 
> 赞同：0
> 
> 时间：2013-04-08T15:40:20.933
> 
> 标签：jquery, onclicklistener

我有一个包含多个表的 div。每个表都有一个删除按钮，该按钮调用一个函数来删除表。表格也可以按日期升序/降序排序。删除功能将起作用，但如果表已排序，则不起作用。

[JSFiddle 演示在这里](http://jsfiddle.net/CZmCZ/)

删除按钮看起来像这样。

```
 <button id="6" class="delete">X</button> 
```

该函数有一个“删除”类的单击事件侦听器。我目前仅使用警报显示 id 以进行调试。

```
$(".delete").click(function () {
    alert($(this).attr("id"));
}); 
```

我怀疑它在排序后不起作用的原因是因为它使用`$(this)`选择器获取 ID 属性，而这在排序后不够具体。

我尝试了各种方法将表 ID 传递给删除函数，但没有一种方法可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:44:23.840

您在排序时重新附加内容，使`.delete`元素动态化，为此您需要一个委托事件处理程序：

```
$("#meetingTable").on('click', ".delete", function () {
    alert(this.id);
}); 
```

[**小提琴**](http://jsfiddle.net/CZmCZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:48:00.190

在此行之后的按钮排序函数中添加一个额外的副本或回调到您的删除函数

```
 sortUsingNestedText($('#meetingTable'), "table", $(this).data("sortKey")); 
```

我测试了它的工作原理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T15:44:05.337

尝试改变

```
$(".delete").click(function () { 
```

和

```
$(".delete").on("click", function(){ 
```

即使在 DOM 操作之后，这将允许 jQuery 监听该元素的点击

# vb.net - 在 VB 中显示另一种形式

> ID：15883372
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:40:22.007
> 
> 标签：vb.net

我想在 VB 中制作一个包含多种表单的程序，我需要制作一个打开另一个表单的按钮。

```
form2.open() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:48:48.990

不要使用表单的默认实例（如其他答案所示），而是

```
 Dim foo As New Form2
    foo.Show()
    'or
    'foo.ShowDialog() 
```

如果要显示同一表单的多个实例，则

```
 Form2.Show()
    Form2.Show() 
```

不管用。

这会

```
 Dim foo As New Form2
    foo.Show()

    Dim bar As New Form2
    bar.Show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T15:41:32.943

只是代码将是

```
form2.show() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T15:45:41.557

您可以作为 MDI 子项在您的表单中打开一个表单，或者您可以使用以下方法在新窗口中“打开”您的新表单：

```
form2.Show()
form2.ShowDialog() 
```

[在此处](http://msdn.microsoft.com/en-us/library/c7ykbedk%28v=vs.80%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/szcefbbd%28v=vs.80%29.aspx)阅读有关它们的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T15:52:27.723

正如 SysDragon 已经提到的，

```
.Show()
.ShowDialog(owner) 
```

是您可以使用的方法。如果调用窗体应该被冻结，直到新打开的窗体再次关闭，那么您应该使用 ShowDialog。

# ios - Objective-C 中的 Grand Central Dispatch 保证什么行为？

> ID：15883373
> 
> 赞同：5
> 
> 时间：2013-04-08T15:40:26.020
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch

我认为提出这个问题的最好方法是使用一些代码：

```
//Main method
for(int i = 0; i < 10; i++)
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         [self foo:i];
    });

}

- (void) foo: (int) i
{
    @synchronized(self)
    {
        NSLog(@"%d",i);
    }
} 
```

在这种情况下，是否保证数字0-9会按顺序打印出来？是否有可能跳过正在运行队列中等待的线程之一？现实中又如何。实际上，这曾经发生过吗？如果我想要上面的行为（仍然使用线程）怎么办？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T15:50:28.650

> 在这种情况下，是否保证数字0-9会按顺序打印出来？

不。

> 是否有可能跳过正在运行队列中等待的线程之一？

不清楚“跳过”是什么意思。如果它的意思是“块会按顺序执行吗？” 答案是“可能，但它是一个实现细节”。

> 现实中又如何。实际上，这曾经发生过吗？

无关紧要。如果您基于对实际实现细节的假设来编写并发代码，那么您正在编写不正确的并发代码。

> 如果我想要上面的行为（仍然使用线程）怎么办？我怎么能做到这一点？

创建一个串行调度队列并按照您需要执行的顺序调度到该队列。请注意，这比`@synchronized()`（当然，`@synchronized()`无论如何都不适合您，因为它不能保证顺序，而只是排他性）要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:56:38.293

来自 dispatch_get_global_queue 的文档

> 提交给这些全局并发队列的块可以相对于彼此同时执行。

所以这意味着那里没有任何保证。您正在将一段代码传递给队列，队列从那里获取它。

# javascript - Javascript角度方向

> ID：15883380
> 
> 赞同：5
> 
> 时间：2013-04-08T15:40:50.990
> 
> 标签：javascript, direction, angle

简单的javascript角度问题：

javascript中角度进入哪个方向？

是吗：

```
 90
180    0
   270 
```

或者

```
 270
180    0
   90 
```

或者是其他东西？

我知道 javascript 使用弧度，我使用度数来表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:21:23.020

在规则的单位圆上，*y*轴指向上方，因此角度逆时针增加：

![在此处输入图像描述](https://i.stack.imgur.com/gspgD.png)

但是在 HTML 文档或 canvas 元素中，*y*轴指向下方，因此如果您使用*cos(t)*和*sin(t)增加角度**t并在**x、y*上绘制点，结果将是顺时针方向：

 **```
 270
 180          0
       90 
```

（[现场示例](http://jsfiddle.net/dUntf/)）

正如其他答案所说，这不是因为角度在 JavaScript 中的工作方式，而是因为坐标空间的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:47:23.453

An angle by definition has no direction, but is rather the measure of the radial distance between two intersecting lines.

Various libraries/css methods might measure the angle from a certain direction - like up for example, but this totally depends on the context.

Javascript itself has no concept of directions to angles - it is something that has to be built on top of javascript's angle functions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:44:43.837

它可能取决于您使用的 javascript 库。

然而，在大多数情况下，旋转度数是相对于原始位置的。因此，旋转 180 度总是会将图像（或其他任何东西）颠倒过来，否则元素将需要了解，我将称之为“向上”（哪种方式是向上方向）本身。**

# http-headers - apache2模块自定义http头

> ID：15883383
> 
> 赞同：0
> 
> 时间：2013-04-08T15:40:53.723
> 
> 标签：http-headers, apache-modules

我正在尝试重定向非法访问并将用户带到登录页面，如果用户获得许可并继续访问原始，我需要保留原始请求 url。我尝试将原始 url 写入 http 标头区域，但我无法从客户端检索此数据。

apache2 或其他模块是否忽略了自定义 http heaer？或者我只是想念什么？

**（顺便说一句：我不喜欢使用查询字符串，想想也许下一页仍然是重定向）**

代码示例：

```
ap_set_content_type(r, "text/html");
apr_table_add(r->headers_out, "Location", conf->authurl);
apr_table_add(r->headers_out, "RequestUrl", url);

return HTTP_MOVED_TEMPORARILY; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:57:53.573

// 下面的代码可以正常工作。apr_table_add(r->err_headers_out, "RequestUrl", url);

参见： [https ://source.jasig.org/cas-clients/mod_auth_cas/tags/mod_auth_cas-1.0.9.1/src/mod_auth_cas.c](https://source.jasig.org/cas-clients/mod_auth_cas/tags/mod_auth_cas-1.0.9.1/src/mod_auth_cas.c)

# r - 将函数应用于向量

> ID：15883384
> 
> 赞同：1
> 
> 时间：2013-04-08T15:40:53.377
> 
> 标签：r, quantlib

我有一组日期（来自 RQuantLib 的 as.Date）存储为 my_dates 中的列表或行

我想选择这个条件为真的第一个值

```
businessDaysBetween("UnitedStates", TodayDate, my_dates)>10 
```

`TodayDate<-as.Date(format(Sys.time(), "%Y%m%d"), "%Y%m%d")`今天的日期在哪里。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:42:49.817

使用`which`您的`businessDaysBetween`通话结果。

```
set.seed(21)
my_dates <- Sys.Date()+sample(50,10)
bizday_gt10 <- sapply(my_dates, businessDaysBetween,
                      calendar="UnitedStates", from=Sys.Date()) > 10
if(any(bizday_gt10)) {
  first_bizday_gt10 <- which(bizday_gt10)[1]
  my_dates[first_bizday_gt10]
} else {
  stop("no business days between today and today+10")
} 
```

请注意，您需要检查 中是否*至少有*1 个`TRUE`观察值`bizday_gt10`，否则`which`将返回一个长度为零的向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:52:11.610

如果您只需要值或第一个值，这可能非常简单。

应用于向量的条件语句会产生真/假向量

真/假向量可用作向量的索引，并返回条件为真的值的较短向量。

示例：初始化 x 以包含 10 个随机数。每个都大于 0.7 吗？现在返回大于 0.7 的那些。然后返回第一个。

```
x = rnorm(10)
x
 [1] -0.96029244  0.41779224  0.08058894 -0.02026729 -0.65383370 -0.83572926
 [7]  0.92722221  0.49157700  0.88779718 -1.09073923
x>0.7
 [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE
x[x>0.7]
[1] 0.9272222 0.8877972

first one...

x[x>0.7][1]
[1] 0.9272222 
```

# java - Java 文件访问 - URI 疯狂

> ID：15883387
> 
> 赞同：1
> 
> 时间：2013-04-08T15:41:00.540
> 
> 标签：java, url, uri, filepath

我正在使用 IBM OmniFind，它有一种处理文件路径的有趣方式。如果你有这样的路径：

```
C:\temp\some §$% path\temp - Sho rtcut.lnk 
```

它变成了这种“URI”（这就是他们所说的......）：

```
file:///C:/temp/some+%C2%A7%24%25+path/temp+-+Sho+rtcut.lnk 
```

这显然似乎是用 URLEncoder.encode 转义的。通常，Java 会从上面的路径构建这种 URI：

```
file:/C:/temp/some%20%C2%A7$%25%20path/temp%20-%20Sho%20rtcut.lnk
file:/C:/temp/some%20§$%25%20path/temp%20-%20Sho%20rtcut.lnk 
```

现在我很难将这种 URL 编码路径转换为适用于文件句柄的东西。这种方法可以解决问题，尽管它似乎是一个非常值得怀疑的解决方法：

```
String path = "file:///C:/temp/some+%C2%A7%24%25+path/temp+-+Sho+rtcut.lnk";
URL url = new URL(path);
path = url.toExternalForm().replaceAll("[+]", "%20");

URI uri = new URI(path);
File file = new File(uri);
System.out.println(file.exists()); 
```

是否有任何安全的方法可以将 URL 转义文件路径转换为 ​​Java 中的有效 URI？

# ios - 在iOS中实现cantor配对功能

> ID：15883389
> 
> 赞同：2
> 
> 时间：2013-04-08T15:41:07.317
> 
> 标签：ios, math, mapping, square-root

我有一个我在 2 年前写的 Java中的**Cantor 配对函数的实现。**现在我更多地转向 iOS 我在 Objective-C 中需要同样的东西。

问题是，至少从我的角度来看，在 Java 中我必须实现一个**BigSqrt**类。因为理论上我现在可以配对任何大小的数字。

因为我是 iOS 新手，所以我真的不知道我是否必须为 Objective-C 再次实现所有的东西，或者是否已经实现了一些东西。如果是这样，有人可以给我一个提示，从哪里开始为**Objective-C**中任何大小的“整数”实现**康托尔配对功能**？

 **谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-15T05:47:25.053

我用它在表格视图单元格上设置标签：

```
NSUInteger cantorPair(NSIndexPath *indexPath)
{
    NSUInteger x = indexPath.section;
    NSUInteger y = indexPath.row;
    return ((x + y) * (x + y + 1)) / 2 + y;
}

NSIndexPath *reverseCantorPair(NSUInteger z)
{
    NSUInteger t = floor((-1.0f + sqrt(1.0f + 8.0f * z))/2.0f);
    NSUInteger x = t * (t + 3) / 2 - z;
    NSUInteger y = z - t * (t + 1) / 2;
    return [NSIndexPath indexPathForRow:y inSection:x];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T16:49:34.297

这是针对 C# 版本的，但在 Objective-C 中应该几乎相同：

[http://sachiniscool.blogspot.com/2011/06/cantor-pairing-function-and-reversal.html](http://sachiniscool.blogspot.com/2011/06/cantor-pairing-function-and-reversal.html)

```
int CantorPair(short x, short y)
{
    return ((x + y) * (x + y + 1)) / 2 + y;
} 
```

并扭转配对

```
short[] Reverse(int z)
{
    short[] pair = new short[2];
    int t = (int)Math.Floor((-1D + Math.Sqrt(1D + 8 * z))/2D);
    int x = t * (t + 3) / 2 - z;
    int y = z - t * (t + 1) / 2;
    pair[0] = (short)x;
    pair[1] = (short)y;
    return pair;
} 
```**

# concurrency - DB2 事务如何在并发情况下准确地工作

> ID：15883390
> 
> 赞同：0
> 
> 时间：2013-04-08T15:41:09.447
> 
> 标签：concurrency, transactions, db2

这里有 2 个表employee(empID int,empName varchar,age int) 和salary(salID,empID,...)。

1.  `insert into employee select ... where not exists (select 1 from employee where empID = :employeeID)`

2.  `insert into salary ....`

3.  ...

有 2 个作业与上述逻辑和相同的员工同时运行。

*   job1 失败并回滚。
*   job2 在 job1 回滚之前开始，并在 job1 回滚之后提交。

我的问题是：

1.  如果job2成功完成，将在员工表中插入多少条记录？1 还是 0？更准确地说，job2的第1步可以看到job1插入的员工记录吗？
2.  如果为 0，我如何确保员工被 job2 插入或不会被 job1 回滚删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:54:48.143

> 如果 job2 成功完成，将在employee 表中插入多少条记录？1 还是 0？

1

> 更准确地说，job2的step 1能看到job1插入的员工记录吗？

既然你说job1被回滚，那么job1没有插入员工记录。

job1 告诉数据库，“我想插入一条员工记录”。DB2 然后在行、页或表上放置一个写锁。定义表时，数据库分析师 (DBA) 确定表写入锁定的级别。默认为页面。

只要有写锁，就没有其他事务可以读到这个插入，除非读隔离级别是未提交读。我们假设这里不是这种情况。

在 db2 允许 job2 看到 job1 的行之前，job2 必须等待 job1 提交或回滚。job1 回滚后，写锁被解除，job2 可以继续进行。

> 如何确保员工被 job2 插入或不会被 job1 回滚删除？

DB2 不允许 job2 执行插入操作，直到 job1 回滚。

顺便说一句，这种问题（两个事务试图插入同一行）可能导致 DB2 死锁，两个事务都将被回滚。同样，这假设事务（作业）具有比未提交读取更高的读取隔离级别。

# c# - QuickFIX /n 未连接

> ID：15883393
> 
> 赞同：0
> 
> 时间：2013-04-08T15:41:21.750
> 
> 标签：c#, quickfix

我有一个提供给客户的 QuickFIX/n 实现。它连接到 Currenex RFQ 系统。他们偶尔在启动应用程序时遇到问题。没有错误被抛出，它在我的测试中运行良好。他们成功连接的唯一方法是重新启动整个服务器。

我不知道为什么会发生这种情况并且它没有引发任何错误。我的整个修复连接都包含在 try|catch 语句中，所以我不知道我还可能缺少什么。下面是我的连接方法。代码执行并命中所有日志记录，但永远不会发送登录消息。

我不知所措，我们的客户也是如此，任何指示都会有很大的帮助。

代码：

```
public void Connect()
    {
        try
        {
        string beginString = "FIX.4.2";
        MemoryStoreFactory storeFactory = new MemoryStoreFactory();
        MessageStoreFactory msgFactory;
        LogFactory logfactory;
        SessionSettings settings = new SessionSettings();
        QuickFix.Dictionary entry = new QuickFix.Dictionary();

        entry.SetString("ConnectionType", "initiator");
        entry.SetString("ReconnectInterval", "1");
        entry.SetString("SocketConnectHost", this.fixHost);
        entry.SetString("FileLogPath", this.workingDirectory + "logs");
        entry.SetString("FileStorePath", this.workingDirectory + "logs");
        entry.SetString("StartTime", "23:59:59");
        entry.SetString("EndTime", "23:59:59");
        entry.SetString("HeartBtInt", "30");
        entry.SetString("SocketNodelay", "Y");
        //entry.SetString("SocketTrafficClass", "IPTOS_LOWDELAY");
        entry.SetString("ResetSeqNumFlag", "Y");
        //entry.SetString("UseDataDictionary", "N");
        entry.SetString("DataDictionary", this.workingDirectory + "FixResourceFiles\\FIX42.xml");
        entry.SetString("ResetOnLogout", "Y");
        entry.SetString("ResetOnDisconnect", "Y");
        entry.SetString("CheckLatency", "N");
        entry.SetString("SocketConnectPort", this.fixPort);

        this.sessionId = new QuickFix.SessionID(beginString, this.senderCompId, this.targetCompId, DateTime.Now.ToString("yyyyMMddhhmmssfff"));

        settings.Set(this.sessionId, entry);

        if (this.storeAllQuickFixMsgs)
        {
            logfactory = new FileLogFactory(settings);
        }
        else
        {
            logfactory = new ScreenLogFactory(settings);
        }

        msgFactory = new FileStoreFactory(settings);

        Logger.MsgLog("Creating QuickFIX Socket Initiator...");
        QuickFix.Transport.SocketInitiator init = new QuickFix.Transport.SocketInitiator(this, msgFactory, settings);
        //this.socketInitiator = new QuickFix.Transport.SocketInitiator(this, msgFactory, settings, logfactory);
        this.socketInitiator = init;

        Logger.MsgLog("Starting Socket Initiator...");
        this.socketInitiator.Start();
        Logger.MsgLog("Started");

        }
        catch (Exception ex)
        {
            Logger.MsgLog("Error on FIX Connection: " + ex);
        }
    } 
```

设置：（内部企业FIX主机）CNX i1scfxcrfq 10.192.6.121 444 test1234

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:44:43.230

检查以下两行：

```
entry.SetString("StartTime", "23:59:59");
entry.SetString("EndTime", "23:59:59"); 
```

我想这就是你可能会遇到问题的原因。启动器只会在 StartTime 开始。您的客户可能会在其他时间启动它？

# c# - 使用 LINQ 和多个“关键字”返回结果？

> ID：15883395
> 
> 赞同：1
> 
> 时间：2013-04-08T15:41:24.383
> 
> 标签：c#, asp.net

我是 ASP.Net 和 LINQ 的新手。我有一个我正在做的小项目。它基本上由一个带有四个文本框的屏幕、一个列表视图控件和一个带有一个数据库表的搜索按钮组成。

每个文本框代表一个特定字段：作者、标题、出版商和价格。我的设想是用户将在一个或多个字段中输入文本并点击搜索按钮。然后，该程序将返回可以找到与用户标准匹配的任何结果。

如果我使用 SQL 语句，我只需选择与任何输入字段匹配的每条记录（即 SELECT author、title、publisher、price FROM books WHERE...）。但是，我不太确定如何使用 LINQ 执行此操作。

那么，有人对我有起点吗？我在搜索中看到了一个字段作为限制器的 LINQ 示例：

```
public void SimpleSearch()
{
    DataClasses1DataContext dc = new DataClasses1DataContext();

    var q =
        from a in dc.GetTable<Books>()
        where a.Title == "1984"
        select a;

    dataGridView1.DataSource = q;
} 
```

但我似乎找不到在搜索中使用多个限制器的任何其他示例。我开始认为这是不可能的。如果是这样，有人可以为我推荐一种不同的方式来完成我想做的事情吗？基本上，我只想在表中搜索与用户输入匹配的字段并在列表视图中返回结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:47:04.387

您应该能够`||`用作 OR 分隔符：

```
public void SimpleSearch()
{
    DataClasses1DataContext dc = new DataClasses1DataContext();

    var q =
        from a in dc.GetTable<Books>()
        where a.Title == "1984" || a.Author == "Stephen King" || a.Price == 5.99m
        select a;

    dataGridView1.DataSource = q;
} 
```

您还可以使用`&&`AND 搜索而不是`||`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:56:00.787

我喜欢使用 contains 使搜索更加模糊，而且我喜欢将所有内容设置为小写，因此在执行搜索时不会出现区分大小写的问题。

```
public void SimpleSearch()
{
  DataClasses1DataContext dc = new DataClasses1DataContext();

  var search = txtSearch.Text.ToLower();

var q =
    from a in dc.GetTable<Books>()
    where a.Title.ToLower() == search ||
    a.Author.ToLower() == search ||
    a.Author.ToLower().Contains(search) ||
    a.Title.ToLower().Contains(search)
    select a;

dataGridView1.DataSource = q;
} 
```

# internet-explorer - mediaelement.js 波形文件在 ie 中不播放

> ID：15883396
> 
> 赞同：1
> 
> 时间：2013-04-08T15:41:27.790
> 
> 标签：internet-explorer, mp3, html5-audio, mediaelement.js, wave

我已经安装了 mediaelement.js 并创建了一个页面，用于在页面上为用户选择的音频文件动态呈现播放器。有些是 mp3，但有些是波形文件。mp3 在 IE 中运行良好（目前我只能测试版本 9），但波形文件渲染播放器但不加载文件。Wave 和 MP3 文件在 Chrome 和我的 Android 手机上都可以正常加载和播放。

任何人都可以稍微了解一下让我的波形文件播放吗？

谢谢！

地理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:47:22.827

奇怪的是，IE 不支持 WAV。

[http://en.wikipedia.org/wiki/HTML5_Audio#.3CAudio.3E_element_format_support](http://en.wikipedia.org/wiki/HTML5_Audio#.3CAudio.3E_element_format_support)

# php - 使用通配符搜索电话

> ID：15883398
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:41:33.667
> 
> 标签：php, regex, preg-match

我想验证电话是否在阵列中，但使用通配符。

在 foreach 中，我有以下代码：

```
$phone = '98765432'; // Data of stored phone
$match = '987*5432'; // Input with search term

echo preg_match('/^' . str_replace('*', '.*', $match) . '$/i' , $phone); 
```

当我搜索以下内容之一时，`preg_match`应该可以：

```
9*
987*5432
987*
*876* 
```

但是，当我搜索错误的数字时，例如，`preg_match`不应该工作：

```
8*65432
*1*
98*7777 
```

我已经尝试过，但找不到正确的解决方案。谢谢！

编辑 1

`2*2*`应该传递给`2020`，但不传递给`2002`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:48:07.203

我不会尝试匹配所有内容，而是只关注数字，因为您知道您正在处理电话号码：

```
preg_match('/^' . str_replace('*', '\d*', $input) . '$/i' , $phone); 
```

我写了一个[简单的测试用例](http://viper-7.com/gjNyCh)，似乎适用于您的输入。

```
$phone = '98765432'; // Data of stored phone

function test( $input, $phone) {
    return preg_match('/^' . str_replace('*', '\d*', $input) . '$/i' , $phone);
}

echo 'Should pass:' . "\n";
foreach( array( '9*', '987*5432', '987*', '*876*') as $input) {
    echo test( $input, $phone) . "\n";
}

echo 'Should fail:' . "\n";
foreach( array( '8*65432', '*1*', '98*7777') as $input) {
    echo test( $input, $phone) . "\n";
} 
```

**输出**：

```
Should pass:
1
1
1
1
Should fail:
0
0
0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:48:29.623

您可以尝试使用`\d`，如下所示：

```
preg_match('/^' . str_replace('*', '(\d+)', $match) . '$/i' , $phone); 
```

# javascript - 克隆的内容可编辑 div 不保留 keydown 事件

> ID：15883401
> 
> 赞同：-3
> 
> 时间：2013-04-08T15:41:41.000
> 
> 标签：javascript, jquery

我对 Jquery 很陌生，并希望解决无法克隆内容可编辑 div 上的 keydown 事件的原因。当我发现 clone(true) 时，我以为我已经解决了问题，但是我的代码仍然无法正常工作。下面的代码是我想要实现的简化版本。

基本上我将 keydown 事件附加到内容可编辑的 div 然后克隆它。然而，克隆的 div 不像原始 div 那样工作。

我一直在寻找解决方案很长一段时间，希望有人能给我一个答案，这样我就可以继续前进 - 非常感谢。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>untitled</title>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {

    var mymax1 = 10;

    $('#List_1').keydown(function(e){ check_charcount(mymax1, e); });

    function check_charcount(mymax1, e)
    {   
        <!--prevent line breaks, that is the enter key from working-->
        if(e.keyCode==13){
        e.preventDefault();
        }

        if(e.which != 8 && $('#List_1').text().length > mymax1{
            $("#List_1").css("background-color","yellow"); 

            e.preventDefault();
        }
    }

    <!---->
    var $cloned = $('#hope').clone(true);

    $('#placeHere').append($cloned.html());
    });

</script>

</head>
<body>

<div id="hope">
<div id="List_1"  contentEditable="true">TEXT</div>
</div>

</br>
<div id="placeHere"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:01:41.197

**正如Ian**所指出的那样，您的代码中有些事情是不正确的。在您使用的 keydown 函数中`$('list_1')`，您应该使用对元素的引用。顺便说一句，clone keep id attr 这意味着您的克隆元素获得与原始元素相同的 id，这是无效的。查看工作代码：

```
$(document).ready(function () {

    var mymax1 = 10;

    $('#List_1').keydown(function (e) {
        check_charcount(mymax1, e);
    });

    function check_charcount(mymax, e) {

        if (e.keyCode == 13) {
            e.preventDefault();
        }

        if (e.which != 8 && $(e.target).text().length > mymax) {
            $(e.target).css("background-color", "yellow");

            e.preventDefault();
        }
    }

    var $cloned = $('#hope').clone(true);

    $('#placeHere').append($cloned.contents().removeAttr('id'));
}); 
```

[看演示](http://jsfiddle.net/MJEeu/)

# php - 在客户端选择存储文件夹

> ID：15883403
> 
> 赞同：0
> 
> 时间：2013-04-08T15:41:42.147
> 
> 标签：php, user-interaction, phpword

我正在使用 PhpWord 以 Word 格式保存一些数据。问题是我需要用户选择需要保存的位置。现在我按以下方式设置它：

```
$objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
$docName = '../../../files/generated_documents/document.docx';
$objWriter->save($docName); 
```

有没有办法让用户选择存储文档的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:06:11.943

我终于找到了答案。如果文档存储在服务器端，那么您可以执行允许用户下载它的操作。下面的代码解释它：

```
$docName = 'document.doc';
$docPath = 'path/inThe/server/';
$fullName= $docPath.$docName;
$objWriter->save($fullName);
$this->downloadTimeSheetFile($docName,$docPath);

header('Content-type: application/doc');
header('Content-Disposition: attachment; filename="'.$docName.'"');
readfile($fullName); 
```

希望有人可以使用！:)

# eclipse - 自动处理错误/警告

> ID：15883404
> 
> 赞同：0
> 
> 时间：2013-04-08T15:41:43.607
> 
> 标签：eclipse, xtext

在链接错误时，我可以提出适当的诊断（比如 MyDSL.MY_APPROPRIATE_DIAGNOSTIC），然后在 MyDSLQuickfixProvider 中通过以这种方式对其进行注释来快速修复它：

```
@Fix(MyDSL.MY_APPROPRIATE_DIAGNOSTIC)
public void fixMyAppropriateDiagnostic(final Issue issue, final IssueResolutionAcceptor acceptor) {
  ...
} 
```

如果我想自动解决诊断问题，即自动执行 IModification 而不向用户建议它作为快速修复（想象一下诊断的快速修复是唯一的），那该怎么办？

有没有办法以与（用户建议的）快速修复类似的方式将（立即）处理代码与诊断相关联？

在此先感谢，马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:11:02.293

无法将快速修复设置为自动执行。您的替代方案是：

*   从代码中的其他位置调用标记解析代码。即，虽然标记分辨率通常是根据用户请求使用问题视图、标尺按钮和类似 UI 显式触发的，但您*可以*从任何地方调用它们。确保您不会干扰不是来自您的插件的快速修复，并确保您的用户不会对这个非 Eclipse 工作流程感到惊讶。

*   对于某些问题，您可以改为创建代码完成规则或模板。这些仍然不是完全自动的，但基本上您已经可以通过这种方式“纠正”部分用户输入，并避免标记完整输入的违规行为。

# c# - 如何将托管 C#/Xaml WP8 组件中的字符串传递给 D3D 组件？

> ID：15883405
> 
> 赞同：2
> 
> 时间：2013-04-08T15:41:45.807
> 
> 标签：c#, .net, windows-phone-7, directx, windows-phone-8

我的目标：将字符串从 C#/Xaml 编写的 Windows Phone 运行时组件传递到 C++ 编写的 Direct3DComponent。

我的理解：这是使用 D3DInterop 完成的。

更具体地说，我将 D3D 与 Xaml 应用程序模板一起使用，并尝试将值传递给加载 DrawingSurfaceGrid 时创建的 Direct3DBackground 对象。

模板作者通过仅复制诸如整数之类的琐碎数据类型来实现这一点，但没有给出封送字符串的示例。我得出的结论是，最终解决方案将比简单的变量分配更复杂，例如第一次调用首先分配一个足够大的缓冲区，然后再实际复制字节。

下面首先是项目的托管部分，它将数据传递给 D3DComponent，然后是接收数据的类 Direct3DBackground 类声明。

```
 private void DrawingSurfaceBackground_Loaded(object sender, RoutedEventArgs e)
    {
        if (m_d3dBackground == null)
        {
            m_d3dBackground = new Direct3DBackground();

            // Set window bounds in dips
            m_d3dBackground.WindowBounds = new Windows.Foundation.Size(
                (float)Application.Current.Host.Content.ActualWidth,
                (float)Application.Current.Host.Content.ActualHeight
                );

            // Set native resolution in pixels
            m_d3dBackground.NativeResolution = new Windows.Foundation.Size(
                (float)Math.Floor(Application.Current.Host.Content.ActualWidth * Application.Current.Host.Content.ScaleFactor / 100.0f + 0.5f),
                (float)Math.Floor(Application.Current.Host.Content.ActualHeight * Application.Current.Host.Content.ScaleFactor / 100.0f + 0.5f)
                );

            // Set render resolution to the full native resolution
            m_d3dBackground.RenderResolution = m_d3dBackground.NativeResolution;

            // Get the location of the model from the query string
            string ModelLocation;
            if (this.NavigationContext.QueryString.ContainsKey("ModelLocation"))
            {
                ModelLocation = this.NavigationContext.QueryString["ModelLocation"];
            }

            // then somehow pass the value of ModelLocation to m_d3dBackground
            /// ???

            // Hook-up native component to DrawingSurfaceBackgroundGrid
            DrawingSurfaceBackground.SetBackgroundContentProvider(m_d3dBackground.CreateContentProvider());
            DrawingSurfaceBackground.SetBackgroundManipulationHandler(m_d3dBackground);
        }
    } 
```

以及接收此数据的 C++ 类：

```
public ref class Direct3DBackground sealed : public Windows::Phone::Input::Interop::IDrawingSurfaceManipulationHandler
{
public:
    Direct3DBackground();

    Windows::Phone::Graphics::Interop::IDrawingSurfaceBackgroundContentProvider^ CreateContentProvider();

    // IDrawingSurfaceManipulationHandler
    virtual void SetManipulationHost(Windows::Phone::Input::Interop::DrawingSurfaceManipulationHost^ manipulationHost);

    event RequestAdditionalFrameHandler^ RequestAdditionalFrame;

    property Windows::Foundation::Size WindowBounds;
    property Windows::Foundation::Size NativeResolution;
    property Windows::Foundation::Size RenderResolution;
    // property System::String ModelLocationUri; // The solution is more complex than this

protected:
    // Event Handlers
    void OnPointerPressed(Windows::Phone::Input::Interop::DrawingSurfaceManipulationHost^ sender, Windows::UI::Core::PointerEventArgs^ args);
    void OnPointerReleased(Windows::Phone::Input::Interop::DrawingSurfaceManipulationHost^ sender, Windows::UI::Core::PointerEventArgs^ args);
    void OnPointerMoved(Windows::Phone::Input::Interop::DrawingSurfaceManipulationHost^ sender, Windows::UI::Core::PointerEventArgs^ args);

internal:
    HRESULT Connect(_In_ IDrawingSurfaceRuntimeHostNative* host, _In_ ID3D11Device1* device);
    void Disconnect();

    HRESULT PrepareResources(_In_ const LARGE_INTEGER* presentTargetTime, _Inout_ DrawingSurfaceSizeF* desiredRenderTargetSize);
    HRESULT Draw(_In_ ID3D11Device1* device, _In_ ID3D11DeviceContext1* context, _In_ ID3D11RenderTargetView* renderTargetView);

private:
    CubeRenderer^ m_renderer;
    BasicTimer^ m_timer;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:55:18.297

这就是为什么你必须`Platform.String`传递字符串。将以下属性添加到 D3DInterop 类：

```
property Platform::String ^Name; 
```

现在您可以像这样从 C# 代码中设置它：

```
m_d3dInterop.Name = "Whatever you like"; 
```

# c# - 原型业务应用用户登录系统

> ID：15883410
> 
> 赞同：0
> 
> 时间：2013-04-08T15:41:54.630
> 
> 标签：c#, .net, entity-framework, authentication, login

我正在为工作创建一个小的 .NET c# 业务应用程序/原型。老实说，我有点开心。它依赖于 SQL 2012、C# .NET 4 WPF，我计划玩弄实体框架。

我们总共有 5 个用户和 3 个角色。建立可靠的用户登录系统的最佳方法是什么？这是一个原型，我只需要它工作，但原则上我希望它是可靠的，这样我就可以将它扩展到可能 10 或 15 个用户。

系统需要能够接受新用户和密码，然后为其分配角色。

编辑：

我正在构建应用程序以坐在客户端计算机上，该计算机通过网络与内部服务器交互以与 sql 数据库对话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:51:29.593

这是我的建议：

以这种方式构建数据库

```
 User           UserRoles               Roles
---------       ---------------         ------------
UserID(PK)          UserID(FK)(PK)         RoleID(PK)
UserName            RoleID(FK)(PK)         RoleName
Password                                   RoleDescription 
```

该数据库模型将为您在 EF 中建立多对多关系，以确保用户可以属于多个角色。然后，您可以为您的应用程序创建自己的身份验证模型，因为 Membership Provider 不适用于 WPF，但它应该很简单。

当您登录用户时，您可以使用 EF 查询数据库以了解用户所属的角色，以便您可以对结果执行所需的操作。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:45:47.973

我建议使用 InBuilt 会员提供程序，因为它具有为您编写的大部分样板代码，并且对 Microsoft 公平，它还不错并且是可扩展的。

[http://msdn.microsoft.com/en-gb/library/system.web.security.membershipprovider.aspx](http://msdn.microsoft.com/en-gb/library/system.web.security.membershipprovider.aspx)

**编辑：** 啊，对不起，我错过了你提到你正在使用 WPF。不幸的是，成员资格提供程序是 ASP.NET 特定的，并且在 WPF 中不可用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-08T15:53:55.093

具有可靠安全性和角色的业务应用程序。
如果客户端直接访问数据库，则该 SQL 连接和那些 SQL 凭据可能会被黑客入侵。

[Windows Communication Foundation 身份验证服务概述](http://msdn.microsoft.com/en-us/library/bb386582.aspx)

[WPF 安全策略 - 平台安全](http://msdn.microsoft.com/en-us/library/ms743612.aspx)

您仍然可以使用 EF 作为角色和登录的支持。

# ios - 我已经放弃了 iOS 5，如何从 Xcode 的方案目标中删除 iOS 5.x？

> ID：15883412
> 
> 赞同：1
> 
> 时间：2013-04-08T15:41:56.040
> 
> 标签：ios, xcode

我的应用程序历来支持 iOS 5 及更高版本。我们最近刚刚决定放弃对 iOS 5 的支持。我通过执行以下操作从应用程序中删除了支持：

*   单击项目的目标
*   在构建设置中搜索 iOS 部署目标
*   将该值设置为 iOS 6.0

但是，当我从方案下拉列表中查看可能的模拟器列表时，我仍然可以选择 iOS 5.0 和 iOS 5.1。

我担心这意味着我实际上可能没有将我的应用程序的最低支持版本设置为 6.0。我的应用程序会在 iOS 6 之前的任何版本上崩溃，因为我们已经开始对一些新视图使用自动布局。任何新项目仅将最新的模拟器显示为方案目标。

我错过了什么？如何让这个下拉菜单停止向我显示 iOS 5.0 和 5.1 模拟器选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:45:34.683

你没有错过任何东西。设置部署目标将确定安装应用程序所需的最低版本。

我不知道有什么方法可以从方案下拉列表中隐藏不相关的目标。

# git - 在 Bash 命令提示符下添加 git 分支

> ID：15883416
> 
> 赞同：186
> 
> 时间：2013-04-08T15:41:57.193
> 
> 标签：git, bash, ubuntu

我尝试在 bash 提示符下添加我当前正在处理（签出）的 git 分支，但没有成功。（**同时保持显示活动目录/文件**完整的当前路径）我家中有一个 .bashrc 文件，但我也看到很多人提到 .profile 文件..

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2014-07-12T19:16:12.047

## git 1.9.3 或更高版本：使用`__git_ps1`

Git 提供了一个名为 的 shell 脚本[`git-prompt.sh`](https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh)，其中包含一个`__git_ps1`函数

> 打印文本以添加到 bash PS1 提示符（包括分支名称）

它最基本的用法是：

```
$ __git_ps1
(master) 
```

它还需要一个可选的格式字符串：

```
$ __git_ps1 'git:[%s]'
git:[master] 
```

### 如何获得它

首先，将文件复制到某个地方（例如`~/.git-prompt.sh`）。

选项 1：使用文件系统上的现有副本。示例（Mac OS X 10.15）：

```
$ find / -name 'git-prompt.sh' -type f -print -quit 2>/dev/null
/Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh 
```

[选项 2：从 GitHub](https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh)拉取脚本。

接下来，将以下行添加到您的`.bashrc/.zshrc`:

```
source ~/.git-prompt.sh 
```

最后，将您`PS1`的调用更改`__git_ps1`为命令替换：

重击：

```
PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ ' 
```

Zsh：

```
setopt PROMPT_SUBST ; PS1='[%n@%m %c$(__git_ps1 " (%s)")]\$ ' 
```

### 混帐 < 1.9.3

但请注意，只有 git 1.9.3（2014 年 5 月）[或更高版本](https://unix.stackexchange.com/questions/33617/how-can-i-update-to-a-newer-version-of-git-using-apt-get/170831#170831)允许您*安全地*显示该分支名称（！）

请参阅[Richard Hansen (](https://github.com/richardhansen) [)](https://github.com/richardhansen)的[提交 8976500](https://github.com/git/git/commit/8976500cbbb13270398d3b3e07a17b8cc7bff43f)：[`richardhansen`](https://github.com/richardhansen)

> bash 和 zsh 都对 PS1 的值进行**参数扩展**、**命令替换**和算术扩展。
> 
> `PS1`在以两个或三个参数模式运行时，不要在其中包含原始的、未转义的分支名称，而是构造`PS1`以引用包含分支名称的变量。
> 
> 由于 shell 不会递归扩展，因此可以避免通过特制的分支名称执行任意代码，例如

```
'$(IFS=_;cmd=sudo_rm_-rf_/;$cmd)'. 
```

什么狡猾的头脑会命名这样的分支？;)（[在 xkcd 中的妈妈旁边](http://xkcd.com/327/)）

### 更多示例

[Still_dreaming_1](https://stackoverflow.com/users/172274/still-dreaming-1)[在评论中](https://stackoverflow.com/questions/15883416/adding-git-branch-on-the-bash-command-prompt/24716445?noredirect=1#comment54332815_24716445)报告：

> 如果您想要带有`xterm`（在我的`.bashrc`）中的颜色提示，这似乎很有效：

```
PS1='\[\e]0;\u@\h: \w\a\]\n${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\03‌​3[01;34m\]\w\[\033[00m\]$(__git_ps1)\$ ' 
```

> 一切都是不同的颜色，包括树枝。

在 Linux Mint 17.3 Cinnamon 64 位中：

```
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[01;34m\] \w\[\033[00m\]$(__git_ps1) \$ ' 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-02-05T07:27:31.973

请按照以下步骤操作：（Linux）

编辑文件`~/.bashrc`，在其末尾输入以下行（如果是 Mac，文件将是`~/.bash_profile`）

```
# Git branch in prompt.
parse_git_branch() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}
export PS1="\u@\h \W\[\033[32m\]\$(parse_git_branch)\[\033[00m\] $ " 
```

现在，启动新的终端窗口，并尝试进入任何 git-repo。将显示当前分支，并带有提示。

[4 更多信息 - MAC/Linux](http://martinfitzpatrick.name/article/add-git-branch-name-to-terminal-prompt-mac/)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-02-13T22:27:05.530

1-如果您没有*bash-completion* ... ：`sudo apt-get install bash-completion`

2-编辑您的*.bashrc*文件并检查（或添加）：

```
if [ -f /etc/bash_completion ]; then
  . /etc/bash_completion
fi 
```

3- ...在您的提示行之前：（`export PS1='$(__git_ps1) \w\$ '`
__git_ps1**将**显示您的 git 分支）

4-做`source .bashrc`

**编辑 ：**

进一步阅读：[不要重新发明轮子](https://web.archive.org/web/20160704140739/http://ithaca.arpinum.org/2013/01/02/git-prompt.html)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-03-12T21:12:04.657

以下是我如何配置提示以显示 Git 状态：

获取 git-prompt 脚本：

```
curl -o ~/.git-prompt.sh https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh 
```

并自定义您的提示，在您的 .bashrc 文件中添加以下代码：

```
# Load Git functions
source ~/.git-prompt.sh

# Syntactic sugar for ANSI escape sequences
txtblk='\e[0;30m' # Black - Regular
txtred='\e[0;31m' # Red
txtgrn='\e[0;32m' # Green
txtylw='\e[0;33m' # Yellow
txtblu='\e[0;34m' # Blue
txtpur='\e[0;35m' # Purple
txtcyn='\e[0;36m' # Cyan
txtwht='\e[0;37m' # White
bldblk='\e[1;30m' # Black - Bold
bldred='\e[1;31m' # Red
bldgrn='\e[1;32m' # Green
bldylw='\e[1;33m' # Yellow
bldblu='\e[1;34m' # Blue
bldpur='\e[1;35m' # Purple
bldcyn='\e[1;36m' # Cyan
bldwht='\e[1;37m' # White
unkblk='\e[4;30m' # Black - Underline
undred='\e[4;31m' # Red
undgrn='\e[4;32m' # Green
undylw='\e[4;33m' # Yellow
undblu='\e[4;34m' # Blue
undpur='\e[4;35m' # Purple
undcyn='\e[4;36m' # Cyan
undwht='\e[4;37m' # White
bakblk='\e[40m'   # Black - Background
bakred='\e[41m'   # Red
badgrn='\e[42m'   # Green
bakylw='\e[43m'   # Yellow
bakblu='\e[44m'   # Blue
bakpur='\e[45m'   # Purple
bakcyn='\e[46m'   # Cyan
bakwht='\e[47m'   # White
txtrst='\e[0m'    # Text Reset

# Prompt variables
PROMPT_BEFORE="$txtcyn\u@\h $txtwht\w$txtrst"
PROMPT_AFTER="\\n\\\$ "

# Prompt command
PROMPT_COMMAND='__git_ps1 "$PROMPT_BEFORE" "$PROMPT_AFTER"'

# Git prompt features (read ~/.git-prompt.sh for reference)
export GIT_PS1_SHOWDIRTYSTATE="true"
export GIT_PS1_SHOWSTASHSTATE="true"
export GIT_PS1_SHOWUNTRACKEDFILES="true"
export GIT_PS1_SHOWUPSTREAM="auto"
export GIT_PS1_SHOWCOLORHINTS="true" 
```

如果你想了解更多，你可以在这里获取所有的点文件：[https ://github.com/jamming/dotfiles](https://github.com/jamming/dotfiles)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-12-24T09:26:22.420

对于 mac，这非常有效：[http](http://martinfitzpatrick.name/article/add-git-branch-name-to-terminal-prompt-mac/) ://martinfitzpatrick.name/article/add-git-branch-name-to-terminal-prompt-mac/ ：

```
# Git branch in prompt.
parse_git_branch() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

export PS1="\u@\h \W\[\033[32m\]\$(parse_git_branch)\[\033[00m\] $ " 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-04-17T00:56:30.330

首先，在您的主目录中打开您的 Bash 配置文件。使用默认编辑器打开和编辑**bash_profile的最简单方法。**

例如，我使用 VS Code 使用以下命令打开它：code .bash_profile。

然后只需将以下代码粘贴到您的 Bash 中。

```
parse_git_branch() {
     git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

export PS1="\u@\h \W\[\033[32m\]\$(parse_git_branch)\[\033[00m\] $ " 
```

功能

> parse_git_branch()

将获取分支名称，然后通过 PS1 您可以在终端中显示它。

这里，

> \u = 用户名
> 
> @ = 静态文本
> 
> \h = 计算机名称
> 
> \w = 当前目录
> 
> $ = 静态文本

您可以更改或删除这些变量以进行更多自定义。

* * *

如果您在终端中第一次使用 Git，或者在配置后立即使用 Git，有时您可能看不到分支名称。

如果您遇到此问题，请不要担心。在这种情况下，只需创建一个示例存储库并在进行一些更改后提交它。当 commit 命令执行一次时，终端会从那时开始找到 git branch。

* * *

[![截图：终端中的 Git 分支](https://i.stack.imgur.com/436Gw.png)](https://i.stack.imgur.com/436Gw.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-17T06:51:27.207

```
root:~/project#  -> root:~/project(dev)# 
```

将以下代码添加到 ~/.bashrc 的末尾

```
force_color_prompt=yes
color_prompt=yes
parse_git_branch() {
git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
}
if [ "$color_prompt" = yes ]; then
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[01;31m\]$(parse_git_branch)\[\033[00m\]\$ '
else
PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w$(parse_git_branch)\$ '
fi
unset color_prompt force_color_prompt 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-24T13:56:33.553

```
vim ~/.bash

parse_git_branch() {
     git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

export PS1="\u@\h \[\033[32m\]\w\[\033[33m\]\$(parse_git_branch)\[\033[00m\] $" 
```

要反映最新更改，请运行以下命令

```
source ~/.bashrc 
```

输出：-

```
chandrakant@NDL41104 ~/Chandrakant/CodeBase/LaravelApp (development) $ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-23T08:32:25.920

如果您使用[鱼壳](https://github.com/fish-shell/fish-shell)，则非常简单。fish 是一个带有很多好东西的交互式 shell。您可以使用`apt-get`.

```
sudo apt-get install fish 
```

然后，您可以使用更改提示设置

```
> fish_config 
Web config started at 'http://localhost:8001/'. Hit enter to stop.
Created new window in existing browser session. 
```

现在去`http://localhost:8001/` 打开提示选项卡并选择经典+ git选项

[![在此处输入图像描述](https://i.stack.imgur.com/0SEFO.png)](https://i.stack.imgur.com/0SEFO.png)

现在点击使用提示按钮，你就设置好了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-15T11:56:24.997

```
parse_git_branch() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}
export PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]$(parse_git_branch)\n\$ ' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-19T07:55:40.090

**按照以下步骤在 ubuntu 终端中显示您的 GIT 存储库的分支名称：**

**step1：**打开终端并使用以下命令编辑 .bashrc。

六.bashrc

**step2：**在 .bashrc 文件末尾添加以下行：

```
parse_git_branch() {
git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/' } 
```

`export PS1="\u@\h \W\[\033[32m\]\$(parse_git_branch)\[\033[00m\] $ "`

**step3：**通过执行以下操作在根（主）目录中获取.bashrc：

/根文件夹：~$`source .bashrc`

**Step4：**重启并打开终端，查看cmd。导航到您的 GIt 存储库目录路径，您就完成了。:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-07T10:01:49.343

这是我使用的一个简单的干净版本：[链接](https://gist.github.com/kfcobrien/c75a918682c6c9b11d3aa6dedb5d3928)

[![在此处输入图像描述](https://i.stack.imgur.com/6rqF0.png)](https://i.stack.imgur.com/6rqF0.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-09T02:11:27.133

我想要一个干净的解决方案，附加到现有提示而不是替换它。与其他解决方案一样，将其添加到 .bashrc 的底部

```
# function
parse_git_branch() {
  if [ -n "$(git rev-parse --git-dir 2> /dev/null)" ]; then
    echo "($(git rev-parse --abbrev-ref HEAD)) "
  fi
}

# environment customization
export PS1="$PS1\$(parse_git_branch)" 
```

一个典型的设置会产生一个提示，看起来像

`user@machine:/path/to/git/project$ (branch-name)`

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-07-04T18:58:35.237

我在 python 中尝试了一个位于 bin 文件夹中的小脚本......'gitprompt'文件

```
#!/usr/bin/env python
import subprocess, os
s = os.path.join(os.getcwd(), '.git')
def cut(cmd):
    ret=''
    half=0
    record = False
    for c in cmd:
        if c == "\n":
            if not (record):
                pass
            else:
                break
        if (record) and c!="\n":
            ret = ret + c
        if c=='*':
            half=0.5
        if c==' ':
            if half == 0.5:
                half = 1
        if half == 1:
            record = True
    return ret
if (os.path.isdir(s)):
    out = subprocess.check_output("git branch",shell=True)
    print cut(out)
else:
    print "-" 
```

使其可执行和东西

然后相应地调整 bash 提示，如：

```
\u:\w--[$(gitprompt)] \$ 
```

# jaydata - 如何手动将 jaydata 模型连接到（非 O-Data）restful 服务

> ID：15883423
> 
> 赞同：0
> 
> 时间：2013-04-08T15:42:10.427
> 
> 标签：jaydata

我喜欢 JayData 提供的所有功能。我想知道我何时偶尔拥有非 O-Data 宁静服务，是否有办法手动将 CRUD 操作连接到我现有的 jaydata 实体定义，这样我就可以利用随之而来的所有 kendoui/knockout 优点。

是否有任何示例将 jaydata 实体定义手动连接到类似于 jquery 方法的 restful 服务 url？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:13:34.163

我们的 webapi 提供商就是您所追求的。不用担心它的名字，webapi 是一个微软的rest apis 框架，因此得名，但它应该可以与其他restful 端点，php，java，ruby 等一起使用。当然它只对 crud 有好处，如过滤，分页, 排序和投影仅在 odata 中标准化。此外，对于分页 length() 是必需的，因此也必须在服务器端实现。试一试，告诉我们您的体验，无论好坏，我们都会为您提供帮助。或者考虑使用oData，JayData可以作为服务端的odata端点，我们也有托管odata服务。

# java - Java非常慢的方法

> ID：15883428
> 
> 赞同：0
> 
> 时间：2013-04-08T15:42:24.337
> 
> 标签：java

我注意到我的一种方法非常慢，通过分析我注意到它占用了总执行时间的 95%。

班上：

```
package gui;

import java.awt.Color;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;

/**
 *
 * @author Frank
 */
public abstract class CustomRectangle {
    protected final BufferedImage bufferedImage;
    protected final int width;
    protected final int height;
    protected final int xOffset;
    protected final int yOffset;
    protected final int borderSize;
    protected final boolean defaultOrientation;

    protected Color color;

    public CustomRectangle(final BufferedImage bufferedImage, final int width, final int height, final int xOffset, final int yOffset, final int borderSize, final boolean defaultOrientation) {
        this.bufferedImage = bufferedImage;
        this.width = width;
        this.height = height;
        if (defaultOrientation) {
            this.xOffset = xOffset;
            this.yOffset = yOffset;
        }
        else {
            this.xOffset = bufferedImage.getWidth() - 1 - xOffset;
            this.yOffset = bufferedImage.getHeight() - 1 - yOffset;
        }
        this.borderSize = borderSize;
        this.defaultOrientation = defaultOrientation;
    }

    abstract public void inBorder(final int dx, final int dy);

    abstract public void outBorder(final int dx, final int dy);

    public void draw() {
        if (defaultOrientation) {
            drawDefaultOrientation();
        }
        else {
            drawOppositeOrientation();
        }
    }

    private void drawDefaultOrientation() {
        int[] pixelArray = ((DataBufferInt)bufferedImage.getRaster().getDataBuffer()).getData();
        for (int x = 0; x < width; x++) {
            for (int y = 0; y < height; y++) {
                int dx = Math.min(x, width - 1 - x);
                int dy = Math.min(y, height - 1 - y);
                if (dx < borderSize || dy < borderSize) {
                    inBorder(dx, dy);
                }
                else {
                    outBorder(dx, dy);
                }
                pixelArray[(xOffset + x) + ((yOffset + y) * bufferedImage.getWidth())] = color.getRGB();
            }
        }
    }    

    private void drawOppositeOrientation() {
        for (int x = 0; x < width; x++) {
            for (int y = 0; y < height; y++) {
                int dx = Math.min(x, width - 1 - x);
                int dy = Math.min(y, height - 1 - y);
                if (dx < borderSize || dy < borderSize) {
                    inBorder(dx, dy);
                }
                else {
                    outBorder(dx, dy);
                }
                bufferedImage.setRGB(xOffset - x, yOffset - y, color.getRGB());              
            }
        }
    }  

    public void setColor(final Color color) {
        this.color = color;
    }
} 
```

缓慢的方法是 drawDefaultOrientation() 方法。然而，可怕的是，即使我省略了所有图像修改代码，它仍然很慢。

被调用者代码：

```
 new CustomRectangle(bufferedImage, 440, 180, 30, 490, 10, defaultOrientation) {
        @Override
        public void inBorder(final int dx, final int dy) {
            setColor(new Color(red, green, blue, 255 - (int)Math.round(0.5 * Math.min(dx, dy))));
        }

        @Override
        public void outBorder(final int dx, final int dy) {
            setColor(new Color(red, green, blue, 128 - (int)Math.round(0.5 * Math.min(dx, dy))));
        }
    }.draw(); 
```

一定有什么事情发生了，因为无论如何这段代码都不应该花这么长时间，即使它在 x 和 y 坐标上循环。

有人认为我认为它可能与匿名内部类 + 覆盖有关......

但希望有更多知识的人可以回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:09:04.847

试试这个：如果`red`，，不要改变，然后停止使用匿名类，并在你实现的子类中做：（注意，这可能不起作用，但基本想法应该是，如果你可以通过缓存所有颜色来避免`green`不断调用你可能需要）`blue``new Color`

```
private final Color[] colors;

public ImplementedCustomRectangle(...) {
    super(...); // ... is not real code, I just don't want to copy/paste

    colors = new Color[256];
    for (i = 0; i < 256; i++) {
        colors[i] = new Color(red, green, blue, i);
    }
}

@Override
public void inBorder(final int dx, final int dy) {
    int value = 255 - (int)Math.round(0.5 * Math.min(dx, dy));
    setColor(colors[value]);
}

@Override
public void outBorder(final int dx, final int dy) {
    int value = 128 - (int)Math.round(0.5 * Math.min(dx, dy);
    setColor(colors[value]);
} 
```

# jquery - 我可以使用 Jasmine 监视 jQuery.$ 吗？

> ID：15883430
> 
> 赞同：1
> 
> 时间：2013-04-08T15:42:27.057
> 
> 标签：jquery, jasmine

我想知道我是否可以使用 Jasmine 监视 jQuery 中的 $ 函数。

这是我要测试的代码。

```
var Wrapper = Wrapper || {};
Wrapper.Controls = {};
/**
 * Use an anonymous function to initialize all JavaScript
 */

(function($) {
    Wrapper.Controls.Utils = function() {
        var external = {
            showHide : function(namespace, controlNameStem){
                var stem = namespace + controlNameStem;
                $(stem  + 'Controller').click();
            }
        };
        return external;
    };
    return Wrapper.Controls.Utils;
}(Wrapper.jQuery)); 
```

Wrapper.jQuery 位于一个单独的文件中，该文件在加载 Wrapper 之前由 Jasmine 预加载。它包含一个存根 jQuery，其定义如下

```
var aliasjQuery = {};

var Wrapper = Wrapper || {};
Wrapper.jQuery = aliasjQuery; 
```

这意味着当 Wrapper 初始化时，aliasjQuery 是作为 Wrapper.jQuery 传递给匿名函数的对象

我的 Jasmine 测试规范如下所示：

```
describe("form control utils", function(){

var controlUtils = Wrapper.Controls.Utils();
var namespace = 'pluto_namespace';
var controlName = 'dualNationality';

it("showHide fires click event on controlNameController", function(){
    var control = { click : function(){}}; 
    spyOn(aliasjQuery, '$').andReturn(control);
    spyOn(control, 'click');
    controlUtils.showHide(namespace, controlName);
    expect(control.click).toHaveBeenCalled();
});

}); 
```

我欢迎任何评论，即使是那些类似于“你到底为什么要这样做？”的评论。和替代解决方案，因为我认为我花了太长时间盯着这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:47:10.640

你`spyOn(window, "$")`已经试过了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T16:32:28.360

而不是这个

```
var aliasjQuery = {}; 
```

我可以像这样创建一个间谍功能

```
var aliasjQuery = jasmine.createSpy(); 
```

然后让它像这样返回控制存根

```
aliasjQuery.and.returnValue(control); 
```

那么我可以做到这一点

```
expect(aliasjQuery).toHaveBeenCalledWith('pluto_namespacedualNationality'); 
```

# php - 文件 dbf 未标记代码页

> ID：15883431
> 
> 赞同：1
> 
> 时间：2013-04-08T15:42:30.623
> 
> 标签：php, dbf, visual-foxpro

我在 PHP 中使用 dbase_create() 函数创建了一个 dbf 文件。该文件已成功创建，但问题是每当我在visual foxpro 9中打开文件时，它都会说

“文件 mydbffile.dbf 未标有代码页”

然后我需要从代码页列表中进行选择。

有没有办法自动设置代码页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:06:17.830

您可以在创建表时为字符字段指定 NOCPTRANS。

```
CREATE TABLE mytable (field1 C(10) NOCPTRANS, field2 C(10) NOCPTRANS, memo1 M NOCPTRANS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:59:40.997

NOCPTRANS 与 DBF 文件代码页无关。您应该明确指定它，如在 CREATE TABLE 子句中。例如：

```
CREATE TABLE Table_Name CODEPAGE = 1251 (field1 C(10), field2 I(4)) 
```

# php - php svn 共享代码库

> ID：15883434
> 
> 赞同：2
> 
> 时间：2013-04-08T15:42:33.437
> 
> 标签：php, svn, version-control

所以我有一个共享代码库，它是 Laravel + 自定义包。

但是，我们部署了多个依赖于这个通用代码库的站点。我们将稳定版本标记到基础并使用标记来部署站点。到目前为止，一切都很好。

解决我制作新项目（新网站？）问题的最佳方法是`svn export`什么 还是我应该`svn checkout`稍后更新？

一些事实：

1.  我可以访问 php artisan
2.  我可以访问自己的开发服务器
3.  由于问题跟踪，我想继续使用 SVN
4.  我愿意使用 BUILD 选项或部署包。但这些似乎很难设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:31:03.603

我不会在源代码控制中处理这个问题，而是在打包或部署中处理。让部署脚本获取通用代码的版本，然后获取最新的（或其他任何版本）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T20:28:33.910

一种可能的解决方案是为新网站创建一个新的存储库，但通过`svn:externals`属性包含对包含公共代码库的存储库的外部引用。

[http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)

这样，您的新网站可以获得代码库的最新更改。但是，对代码库的任何更改都必须对直接从基本存储库而不是包含新网站的存储库中提取的工作副本进行，这可能是您想要的。

# ms-access - 访问 DB 一个 ID、多个班级和相关日期

> ID：15883443
> 
> 赞同：0
> 
> 时间：2013-04-08T15:43:02.983
> 
> 标签：ms-access, database-design

我正在为我的办公室创建一个数据库。我们有大约200名员工。每位员工都必须在被雇用后的 2 年内完成 12 门课程中的至少 1 门（因此每门课程的完成/资格日期不同，有些人已经在这里工作了 20 年，有些人只有 1 年）才能获得资格。有些人完成了多门课程。每门课程都必须定期更新（每个更新周期不同，并且基于上次更新日期）。我在桌子的布局上有问题。这是我的想法，但我想看看是否有一种不太忙的方式来布置数据。我希望能够运行一个查询，告诉我哪个人完成了哪个课程（因此它必须查看所有 3 个课程列）。我还希望能够知道他们的资格何时失效或即将到来。到目前为止，我

```
ID Name    Class1    Class2    Class3  QualDt-Cl1 QualDt-Cl2 QualDt-Cl3  LstRequal1 ...
1  Bob      Art      Spanish           3/17/1989   9/12/2010              3/8/2012
2  Sally    Math                       8/31/2012
3  George   Physics            History 2/6/2005               7/6/1996
4  Casey    History                    6/8/2000 
5  Joe      English  Sports    Physics 12/10/1993  10/15/2001 4/22/2006 
```

这些类列在它们自己的表中，每个类列都从中提取。qual date refresher 将是查询中基于上次更新日期的计算列。
有没有办法将一个人有资格参加的所有课程放在一个列中，并在另一列中为每个特定课程重新获得资格的相关日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:54:31.347

我认为，如果每个主题都有一张表格，并在每个主题下注册人名并注明日期，那将不会那么混乱。

此外，它可能有助于整理表格中的不完整信息，例如通过考试的确切日期，你可以做月份和年份，或者只是年份？如果 lee 的方式是 2 年，那可能更有意义 - 也使 qulified 计算更容易。

如果您按主题进行搜索，该查询可能会起作用吗？或者谁有资格在今年和明年做什么科目。

顺便说一句，这不是你会在这里问的问题 - 但希望答案有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:23:14.967

在设计数据库时，每当您发现自己添加了名称如`Class1`,的列时`Class2`，`Class3`您应该立即停下来考虑将这些列放在一个单独的子表中是否更有意义，该子表称为`Classes`父表的链接（关系）。这有几个原因，包括：

1.  当有人参加第四门课程时会发生什么？说“那永远不会发生”忽略了“永远不会是*很*长的时间”这一事实，我们谁也无法预测未来。

2.  当检查某人是否上过课程时，你真的需要检查`(Class1 IS NULL) OR (Class2 IS NULL) OR (Class3 IS NULL)`，这会变得*非常*乏味，这也意味着如果你*必须*添加`Class4`，那么所有的 SQL 代码都必须更正。

3.  同样，如果您想找到接受“心肺复苏术”的人，您必须寻找患有 `(Class1 = 'CPR') OR (Class2 = 'CPR') OR (Class3 = 'CPR')`. 呸。

所以，省去一些麻烦（真的很麻烦）并创建一个`Classes`表：

```
ID
ClassName
QualDate
(etc. ) 
```

...哪里`ID`是主表中的 ID 号（所谓的“外键”）。根据您的示例数据，您的`Classes`表格将如下所示：

```
ID  ClassName   QualDate
1   Art         3/17/1989
1   Spanish     9/12/2010
2   Math        8/31/2012
3   Physics     2/6/2005
3   History     7/6/1996
... 
```

# unit-testing - VS2012单元测试项目和MSFT Ent Lib 5.0

> ID：15883445
> 
> 赞同：0
> 
> 时间：2013-04-08T15:43:10.827
> 
> 标签：unit-testing, visual-studio-2012, enterprise-library

我对这个特定类型的项目和 Ent Lib 5.0 有以下（但非常烦人）问题。

我说它的原因在于它是一个与单元测试项目相关的事实，即相同的代码/配置可以在控制台应用程序中正常工作。

这是代码：

```
 ICacheManager cm = CacheFactory.GetCacheManager("TestCacheManager");
        cm.Add("max", 1); 
```

这是配置：

```
 <configuration>
           <configSections>
<section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
 <section name="cachingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.CacheManagerSettings, Microsoft.Practices.EnterpriseLibrary.Caching, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
</configSections>
<dataConfiguration defaultDatabase="Caching" />
<connectionStrings>
 <add name="Caching" connectionString="Data Source=.;Initial Catalog=Caching;Integrated Security=True"
    providerName="System.Data.SqlClient" />
</connectionStrings>
<cachingConfiguration defaultCacheManager="TestCacheManager">
 <cacheManagers>
  <add name="TestCacheManager" type="Microsoft.Practices.EnterpriseLibrary.Caching.CacheManager, Microsoft.Practices.EnterpriseLibrary.Caching, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
      expirationPollFrequencyInSeconds="60" maximumElementsInCacheBeforeScavenging="1000"
      numberToRemoveWhenScavenging="10" backingStoreName="TestStore" />
  </cacheManagers>
  <backingStores>
  <add name="TestStore" type="Microsoft.Practices.EnterpriseLibrary.Caching.Database.DataBackingStore, Microsoft.Practices.EnterpriseLibrary.Caching.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
      encryptionProviderName="" databaseInstanceName="Caching"
      partitionName="Name" />
  <add type="Microsoft.Practices.EnterpriseLibrary.Caching.BackingStoreImplementations.NullBackingStore, Microsoft.Practices.EnterpriseLibrary.Caching, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
      name="NullBackingStore" />
     </backingStores>
   </cachingConfiguration>
 </configuration> 
```

最后是我只在单元测试项目中得到的异常：

```
 Activation error occured while trying to get instance of type ICacheManager, key "TestCacheManager" 
```

# php - getJSON 函数，从多个 mysql 查询返回编码数组

> ID：15883452
> 
> 赞同：0
> 
> 时间：2013-04-08T15:43:38.080
> 
> 标签：php, jquery, mysql, ajax, json

我想知道是否可以将许多查询组合到一个数组中并返回它。问题是其中一些查询已经是数组......这就是我的意思：

JS：

```
function getNews() {
  $.getJSON(serviceURL + 'getmainnews.php', function(data) {
    $('#fnews li').remove();
    daily = data.items;
      $.each(daily, function(index, mnews) {
        //append the data to listview
      });
    }); 
```

这是带有查询的 php 文件：

```
<?php
  include 'connect_to_mysql.php';
  mysql_query("SET NAMES UTF8");
  $day = mysql_query("SELECT * FROM basket_news WHERE topic='daily' ORDER BY id DESC LIMIT 1");
  $daily = array();
  while ($r = mysql_fetch_assoc($day)){
    $daily[] = $r;
  }

  $sql = mysql_query("SELECT * FROM basket_news WHERE topic='' ORDER BY id DESC"); 
    $mainnews = array();
    while ($r = mysql_fetch_assoc($sql)){
      $mainnews[] = $r;
    }
?> 
```

如果我有更多这样的查询，我如何将它们收集在一起以便能够执行以下操作：

```
echo json_encode(array("items" => $daily, "allitems" => $mainnews)); 
```

我知道 $daily 有一个 LIMIT 1 ，但其他像 $mainnews 将是大数组。我将如何设置 PHP 回显并在 JS 中取回它？我想如果一切都失败了，我可以做多个 ajax 调用，但那将是一种浪费......

# java - 获取邮件接收日期 JavaMail

> ID：15883453
> 
> 赞同：4
> 
> 时间：2013-04-08T15:43:42.527
> 
> 标签：java, jakarta-mail

如何通过 JavaMail 获取电子邮件的接收日期？我想打印收到的日期作为输出。有什么方法可以调用收到的邮件日期并打印出来吗？

```
System.out.println(recievedDate); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:32:59.137

试试这个方法

[javax.mail.Message 类中的 getReceivedDate()](https://eclipse-ee4j.github.io/mail/docs/api/jakarta/mail/Message.html#getReceivedDate--)

# java - 对象序列化不起作用

> ID：15883459
> 
> 赞同：0
> 
> 时间：2013-04-08T15:43:54.800
> 
> 标签：java, serialization, bukkit

除了保存和/或加载数据之外，它会做所有需要做的事情。我假设问题出在加载上，即使 try/catch 没有异常。这些文件是由插件创建的，但它不会加载应该在关闭时保存的数据......

完整的课程可以在这里找到：http: [//pastebin.com/pK3NCPfM](http://pastebin.com/pK3NCPfM)

加载方法：

```
 public void getClans(){
        try { 
            // Load the Clans
            FileInputStream f_in = new FileInputStream("Clans.data");
            ObjectInputStream obj_in = new ObjectInputStream (f_in);
            @SuppressWarnings("unchecked")
            HashMap<String, Clan> Clans = (HashMap<String, Clan>) obj_in.readObject();
            obj_in.close();
            getLogger().info("Clans successfully loaded");
            } catch (Exception e) {
            getLogger().info("Error loading clan files...");
            getLogger().info(e.getMessage());
            } 
    }

    public void getPlayers(){
        try { 
            // Load the players that are in a clan
            FileInputStream f_in = new FileInputStream("clanPlayers.data");
            ObjectInputStream obj_in = new ObjectInputStream (f_in);
            @SuppressWarnings("unchecked")
            HashMap<String, String> clanPlayers = (HashMap<String, String>) obj_in.readObject();
            obj_in.close();
            getLogger().info("clanPlayers successfully loaded");
            } catch (Exception e) {
            getLogger().info("Error loading clanPlayer files...");
            getLogger().info(e.getMessage());
            } 
    } 
```

更新：我不确定为什么这不起作用。如果有人可以帮助我修复有问题的线路，我应该很高兴！

```
 public void getPlayers(){
        try { 
            // Load the players that are in a clan
            FileInputStream f_in = new FileInputStream("clanPlayers.data");
            ObjectInputStream obj_in = new ObjectInputStream (f_in);
            @SuppressWarnings("unchecked")
            clanPlayers = (HashMap<String, String>) obj_in.readObject(); // Error on this line. 
            //I want the HashTable ClanPlayers to be a copy of the object that was saved
            obj_in.close();
            getLogger().info("clanPlayers successfully loaded");
            } catch (Exception e) {
            getLogger().info("Error loading clanPlayer files...");
            getLogger().info(e.getMessage());
            } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:54:07.730

这些方法不返回任何内容，也不初始化任何字段：只有局部变量。所以它们基本上是复杂的noops。

另外，您不应该遇到异常。捕获 IOException，只有当你真的可以在这个地方处理异常时。否则，让异常传播，或将其转换为 runeim 异常并抛出运行时异常。

# java - 在普通 servlets 应用程序中使用 spring jdbc 模板进行数据库访问

> ID：15883463
> 
> 赞同：0
> 
> 时间：2013-04-08T15:44:07.750
> 
> 标签：java, spring, jdbctemplate

如果我有一个原始的 servlets 应用程序，将 spring 的 jdbc 模板集成到其中有多难？

我不想处理低级 jdbc 代码，所以我在考虑使用 jdbc 模板。

我不想将 spring 用作 IOC 或任何东西，只是想使用 jdbc 工具来使 db 访问不那么痛苦。

除了必要的罐子之外，它是否有任何依赖关系或假设其他东西已经到位？

我正在使用 tomcat 的 jdbc 池，所以我有一个数据源可以传递给它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:49:32.080

It is *very* simple to add and it does not require you use IOC. If you use maven or ivy, the dependencies are handled for you otherwise it is likely you will need spring-core and possibly spring-beans (i dont know the specifics off the top of my head). Also, if you want transactions, then you will want IOC as the container would create proxy beans that implement the transactional behavior.

# ipad - 改变方向改变ipad上的css

> ID：15883466
> 
> 赞同：1
> 
> 时间：2013-04-08T15:44:20.170
> 
> 标签：ipad, layout, screen-orientation

我正在使用媒体查询进行响应式布局并且工作得很好。当 ipad 改变方向时，虽然它没有根据媒体查询“刷新”布局。

# python - Python - 遍历字典中的特定变量

> ID：15883479
> 
> 赞同：0
> 
> 时间：2013-04-08T15:45:19.343
> 
> 标签：python

我正在尝试遍历字典 [1:] 中的所有内容，但不知道该怎么做，也找不到答案。

```
for value in self.legLocs.itervalues():
            print x 
```

我认为它会像

```
for value in self.legLocs.itervalues()[1:]:
            print x 
```

但这不起作用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:45:55.370

字典没有顺序，所以除了第一个之外，你不能真正遍历所有字典（因为没有真正定义哪个元素是第一个）。您可以遍历 dict 并排除特定键：

```
def dict_keys_without(d,excludes_set):
    return (k for k in d if k not in excludes_set) 
```

然后您可以使用：

```
for key in dict_keys_without(d,{'foo','bar'}):
    #do something with `k` or `d[k]`, etc. 
```

您可以轻松修改上述函数以使用`d.iteritems()`或`d.itervalues()`任何您想要的标准。

当然，总是有“使用 a `collections.OrderedDict`”的建议，它是一个 dict 子类，它知道它的顺序。如果您使用的是`OrderedDict`，那么您可以执行以下操作：

```
values = iter(od.values())
_ = next(values,None)  #scrap the first one
for value in values:
    pass #Do something with the next values. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:51:53.600

正如@mgilson 所提到的，`[1:]`真的没有任何意义`dict`......如果你很高兴只是忽略一些任意条目，那么你可以使用类似的东西：

```
def skipone(d):
    i = d()
    next(i, None)
    return i

d = {1:2, 3:4, 5:6}
for blah in skipone(d.iteritems): # or other function
    pass 
```

或者：

```
from itertools import islice
def skip(obj, n=1):
    i = obj() if callable(obj) else obj
    return islice(i, n, None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:47:42.433

如果你想遍历所有项目：

```
for k,v in self.legLocs.items():
    print "key",k
    print "value",v 
```

或像这样：

```
for kv in self.legLocs.items():
    k, v = kv
    print "key",k
    print "value",v 
```

如果您只想**对键**进行迭代：

```
for k in self.legLocs.keys():
    print "key",k 
```

如果您只想迭代**值**：

```
for v in self.legLocs.values():
    print "value",v 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:54:10.930

通过字典“迭代”，这样做：

```
for key in aDict.keys():
    if key != 'excluded':  # You can check to see if it is the one you want to leave off
        print(aDict[key]) 
```

# php - 在 url 地址中传递 php 变量

> ID：15883481
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:45:30.960
> 
> 标签：php, variables, header, parameter-passing

我知道我可以像这样传递一个常量参数：

header('位置：page.php?parameter=9999');

但是我怎么能用变量来做呢？像这样：

header('位置：page.php?parameter=$variable'); ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:49:01.240

That is correct or you can use session variables

```
<?php
sesion_start();
//set variable
$_SESSION['juanita'] = 'some value';
?>

<?php
session_start();
//get variable
$newVar = $_SESSION['juanita']; //'some value'
?> 
```

[http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

Just a note, when using variables inside strings use double quotes

```
header("Location: page.php?parameter=$variable"); 
```

It might be better concatenate like SeanWM answer

```
$variable = 9999;
header('Location: page.php?parameter=' . $variable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:48:22.760

```
$variable = 9999;
header('Location: page.php?parameter=' . $variable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:48:40.477

Just like you are doing, just set the variable before sending any headers:

```
<?php
  $variable = "Something";
  header("Location:page.php?paramter=" . $variable);
?> 
```

# iphone - phonegap 2.5.0 相机错误 exc_bad_access (code=1 address=0x0) ios

> ID：15883486
> 
> 赞同：1
> 
> 时间：2013-04-08T15:45:35.557
> 
> 标签：iphone, ios, cordova, memory-management, phonegap-plugins

我在我的项目中使用 phonegap 和 jquery mobile。我必须在一页上拍摄至少 12 张照片我正在使用下面的标准代码

```
navigator.camera.getPicture(function(imageURI){
            }, { quality : 30, 
                  destinationType : Camera.DestinationType.FILE_URI, 
                  sourceType : Camera.PictureSourceType.CAMERA, 
                  allowEdit : true,
                  encodingType: Camera.EncodingType.JPEG,
                  targetWidth: 200,
                  targetHeight: 200,
                  saveToPhotoAlbum: false }

        )}); 
```

但是在拍摄 3-4 张照片后，我的应用程序因错误 exc_bad_access (code=1 address=0x0) 而崩溃

谷歌的大多数链接都说这是一个错误，因为[内存中不再存在该对象](https://www.google.com.pk/#hl=en&output=search&sclient=psy-ab&q=exc_bad_access+%28code=1+address=0x0%29&oq=exc_bad_access+%28code=1+address=0x0%29&gs_l=hp.12..35i39l2j0i22i30l2.947.947.0.3614.1.1.0.0.0.0.387.387.3-1.1.0...0.0...1c.2.8.psy-ab.30N_Xdi6uSo&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.44770516,d.bmk&fp=6110f42ec8390390&biw=1278&bih=608)我没有触及本机 phonegap 代码，所以我不确定它为什么要释放该对象。我尝试了 phonegap 2.2.0 并遇到了同样的问题。

# c# - 无法构建 NuGet 包...包括源文件和符号文件

> ID：15883496
> 
> 赞同：1
> 
> 时间：2013-04-08T15:46:08.410
> 
> 标签：c#, nuget, nuget-package, nuspec

我在将静态内容打包为 NuGet 的一部分时遇到了问题。

我只想将 Javascript 文件打包为 NuGet 包的一部分。在 NuSpec 文件中包含以下条目，如下所示...

文件 src="*.js" 目标="内容\JS"

在 .Proj 文件中包含 csprok 和相应的 NuSpec 文件。

现在，当我尝试运行以下命令（***msbuild packaging.proj***）时，它会发出错误消息

**错误：构建包失败。确保“...NuSpec”包括源文件和符号文件**

不知道我是否在这里遗漏了什么......

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T17:16:15.633

终于想通了，我们可以使用“NuGet Package Explorer”来创建一个NuGet包。这样我们就可以只添加静态内容，它不会引发我之前遇到的任何问题。

# r - 访问 R 中的零元素有什么作用？

> ID：15883497
> 
> 赞同：3
> 
> 时间：2013-04-08T15:46:08.963
> 
> 标签：r

如果我有一个向量`a<-c(3, 5, 7, 8)`

然后跑`a[1]`，毫不奇怪，我会得到 3，但如果我会跑，`a[0]`我基本上会得到`numeric(0)`

这是什么意思？这有什么作用？出于正常原因，我该如何使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T15:52:25.517

其他人已经回答了什么`x[0]`，所以我想我会扩展它为什么有用：生成测试用例。这对于确保您的函数与用户有时会意外产生的异常数据结构变体一起工作非常有用。

例如，它可以轻松生成 0 行和 0 列数据帧：

```
mtcars[0, ]
mtcars[, 0] 
```

当子集出错时可能会出现这些情况：

```
mtcars[mtcars$cyl > 10, ] 
```

但是在您的测试代码中，标记您是故意这样做是很有用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T15:49:18.320

[http://cran.r-project.org/doc/manuals/r-release/R-lang.html#Indexing-by-vectors](http://cran.r-project.org/doc/manuals/r-release/R-lang.html#Indexing-by-vectors)

正如您所看到的：一个特殊情况是零索引，它具有无效效果：x[0] 是一个空向量，否则在正索引或负索引中包含零具有与省略它们相同的效果。

# ruby-on-rails - 如何修复rails中未定义的方法错误？

> ID：15883499
> 
> 赞同：0
> 
> 时间：2013-04-08T15:46:14.537
> 
> 标签：ruby-on-rails

我不断收到一条错误消息：#<#:0x007ff5edcd5330> 的未定义方法 `androids_path'。这是说错误在 new.html 的第 1 行。

该模型的名称是 Android，位于 android.rb。关于如何解决这个问题的任何建议？

在 androidapps_controller.rb 中：

```
def new
    @android = Android.new
end 
```

在 new.html 我有：

```
 <%= form_for(@android, validate:true) do |f| %>
<% @android.errors.full_messages.each do |msg| %>

<li><%= msg %></li>
<% end %>

  <p>
    <%= f.label :title %><br />
    <%= f.text_field :title %>
</p>

<%= f.submit %>
<% end %> 
```

路线.rb

```
Grabapp::Application.routes.draw do
root :to => 'iosapps#index'
get "static_pages/home"

get "static_pages/add"

get "static_pages/about"

devise_for :users
resources :iosapps
resources :androidapps 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:12:39.557

添加到您的 routes.rb 中：

```
resources :android 
```

您的错误是因为您已要求 form_for 进行基于资源的路由！

```
<%= form_for(@android, validate:true) do |f| %> 
```

但是您没有定义使其工作所需的基于资源的路由！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:20:48.497

您的模型和控制器不匹配（Android vs AndroidApp），因此需要在您的表单中指定正确的 url： `<%= form_for(@android, validate: true, url: androidapps_path) do |f| %>`

`<%= form_for(@android, validate:true) do |f| %>`使用表单的 HTML 标记自动设置正确的 HTTP 方法（通常是 POST 或 PUT）。它还假设您设置了一个`/androids`在 POST 和`/androids/:id`PUT 情况下调用的 url。因此，要使其正常工作，您需要告诉 rails 创建必要的路由。这是通过在中添加以下行来完成`config/routes.rb`的`resources :androids`。

这就是为什么最好匹配模型和控制器名称的原因，Rails 可以根据模型名称自动推断正确的控制器操作。

您需要阅读更多有关路由及其工作原理的信息。在这里做：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# php - 按其中一个元素重新排序数组的元素

> ID：15883500
> 
> 赞同：0
> 
> 时间：2013-04-08T15:46:16.213
> 
> 标签：php

我遇到了数组排序的问题。

我的数组结构是这样的：

```
array(4) {
  [1]=>
  array(5) {
    ["type"]=>
    string(4) "A"
    ["index"]=>
    int(1)
  }
  [2]=>
  array(5) {
    ["type"]=>
    string(4) "B"
    ["index"]=>
    int(4)
  }
  [3]=>
  array(5) {
    ["type"]=>
    string(4) "C"
    ["index"]=>
    int(2)
  }
  [4]=>
  array(5) {
    ["type"]=>
    string(4) "D"
    ["index"]=>
    int(3)
  }
} 
```

如您所见，在每个子数组中，都有一个键“索引”，其中的值不是按照正确的顺序 1-2-3-4 而是 1-4-2-3。

我如何对这个数组进行排序，以便它的子数组以正确的顺序列出？

PS：实际的数组比这个更大更复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:48:41.683

```
usort(
    $myArray,
    function ($a, $b) {
        if ($a['index'] == $b['index']) {
            return 0;
        }
        return ($a['index'] < $b['index']) ? -1 : 1;
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:49:56.170

您可以为此使用该功能[`usort()`](http://www.php.net/manual/en/function.usort.php)。它接受一个未排序的数组和一个回调函数作为它的参数。在回调函数中，您可以定义应该如何比较元素。这里有一个例子：

```
function compare($a, $b) {
    if($a['index'] === $b['index']) {
        return 0;
    }
    return $a['index'] < $b['index'] ? -1 : 1;
}

usort($array, 'compare'); 
```

注意：回调可以是匿名函数或常规函数的名称。我使用了@MarkBaker 使用匿名函数的函数名称。所以你有一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:48:55.260

用于重新索引数组的简单快速的解决方案。

```
$old ; // Your old array
$new = array() ;
foreach ($old as $child){
  $new[$child['index']] = $child ;
} 
```

# monodevelop - 如何关闭 MonoDevelop 4.0.3 中的“Warning as Error”选项？

> ID：15883502
> 
> 赞同：4
> 
> 时间：2013-04-08T15:46:22.867
> 
> 标签：monodevelop

我从 GitHub 获得了一个大型项目，我正在尝试编译，这些错误让我抓狂：

> 错误 CS0219：警告为错误：分配了变量“memberInfo”，但从未使用过它的值 (CS0219)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T16:10:57.403

它在项目选项中。打开项目选项并转到：

构建->编译器

有一个复选框：

作为错误的警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T21:35:59.227

在解决方案资源管理器中右键单击项目：选项 --> 构建 --> 编译器 --> 将警告级别设置为 2。

# vba - 在 Word 中查找样式更改

> ID：15883505
> 
> 赞同：1
> 
> 时间：2013-04-08T15:46:31.023
> 
> 标签：vba, ms-word

在对 MS Word 进行编程以列出文本中字符样式发生变化的点时，有什么方法吗？

我正在以编程方式尝试分析段落以检索具有相同样式的所有连续文本块 - 换句话说，在文本样式更改的点处拆分段落。目前我这样做的方式是获取每个字符并将其样式与前一个字符进行比较 - 如果样式的名称不同，我知道我已经找到了拆分结果的点。这可行，但效率极低（对于每个字符，您必须对样式名称进行完整的字符串比较）。我想知道 Word 对象模型中是否有一种方法可以在不比较每个字符的情况下解决这个问题？

我目前使用的大致代码如下（它是 C# 代码：我正在使用 COM 互操作来对抗 Word 2003，但我对 VBA 中的解决方案同样满意，因为一旦我原则上知道如何去做，转换到 C# 应该很容易。）

```
// used to store the results as we go
StringBuilder currentText = new StringBuilder();
string currentStyle = null;

// range contains the Range I want to split up
foreach (Range charRng in range.Characters)
{
    string style = charRng.get_Style().NameLocal;
    if (style == currentStyle)
    {
        currentText.Append(charRng.Text);
    }
    else
    {
              AddTextBlockToMyResults(currentStyle, currentText.ToString());
        currentText = new StringBuilder(charRng.Text);
        currentStyle = style;
    }
}
AddTextBlockToMyResults(currentStyle, currentText.ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:09:28.317

使用什么版本的 Office 来创建 Word 文档？

如果是 Office 2007 或更高版本（或者，您可以将文档转换为该格式），那么 Office 文档实际上只是一个 .zip 存档。如果您使用 WinRAR 等存档实用程序打开 .docx 文件，您会看到它具有如下目录结构：

```
_rels
customXml
docProps
word
|_ document.xml 
```

该 document.xml 是一个[Open Office XML](http://en.wikipedia.org/wiki/Office_Open_XML)文件，其中包含 Word 文档中的所有文本和样式引用。我敢打赌，你解析 XML 的速度比现在做的要快得多。

# jquery - 滚动到 div jQuery

> ID：15883507
> 
> 赞同：2
> 
> 时间：2013-04-08T15:46:35.533
> 
> 标签：jquery, html, scroll

我有两个功能，一个滚动到页面底部，另一个滚动到顶部。

我正在寻找添加另一个滚动到几乎在我的页面底部的特定 div 的功能。我在下面包含了我的两个功能滚动功能以及我的第三次尝试，但它不能正常工作。它滚动到我的页面底部，然后跳到 div。

```
 //works
   $('.btn1').click(function(){
     $('html, body').animate({scrollTop:0}, 750);
   });

   //works
   $('.btn2').click(function(){
     $('html, body').animate({scrollTop:$(document).height()}, 750);
     return false;
   });

   //doesn't work
   $('.btn3').click(function(){
     $('html, body').animate({scrollTop:$(".myDiv").offset().top}, 750);
     return false;
   }); 
```

任何意见或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:53:19.357

这是一个[小提琴](http://jsfiddle.net/trajce/kvF9e/1/) ，对我来说似乎很好。

我刚刚添加了示例 div

```
<span class="btn2">to bot</span>
<span class="btn3">to div</span>
<div class="myDiv"></div>
<span class="btn1">to top</span>
<span class="btn3">to div</span>
.myDiv
{
    height:500px;
    margin-top:500px;
    width:100%;
    background-color:#ccc;
} 
```

我留下了你的剧本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:58:43.537

html

```
<div class="btns">
<button class="btn1">One</button>
<button class="btn2">Two</button>
<button class="btn3">Three</button>
</div>
<p>stuff</p><p>stuff</p><p>stuff</p>
<p>stuff</p><p>stuff</p><p>stuff</p>
<p>stuff</p><p>stuff</p><p>stuff</p>
<p>stuff</p><p>stuff</p><p>stuff</p>
<p>stuff</p><p>stuff</p><p>stuff</p>
<p>stuff</p><p>stuff</p><p>stuff</p>
<div class="myDiv">My Div</div>
<p>stuff</p><p>stuff</p><p>stuff</p> 
```

css

```
.btns {
    position: fixed;
} 
```

javascript

```
 //works
   $('.btn1').click(function(){
     $('html, body').animate({scrollTop:0}, 750);
   });

   //works
   $('.btn2').click(function(){
     $('html, body').animate({scrollTop:$(document).height()}, 750);
     return false;
   });

   // works
   $('.btn3').click(function(){
     $('html, body').animate({scrollTop:$(".myDiv").offset().top}, 750);
     return false;
   }); 
```

[例子](http://jsfiddle.net/axrwkr/LXwDV)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:34:49.983

我的猜测（这就是我们所拥有的一切）是你混淆了一个类的 div id 并且有

`<div id='myDiv'>`

所以没有 .myDiv 可以滚动到。

将您的html更改为

`<div class='myDiv'>`

或者你的 jQuery （注意选择器中的#myDiv）

```
//should work
$('.btn3').click(function(){
  $('html, body').animate({scrollTop:$("#myDiv").offset().top}, 750);
  return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:52:45.663

如果您有一个 div 并在其上设置了一个 ID，您可以在 HTML 中执行此操作：

```
<a href="#yourDiv">Scroll to Div</a> 
```

那应该直接跳到 DIV，它会在页面的顶部。

# c# - C#如何使用文本框文本作为正则表达式或字符串

> ID：15883512
> 
> 赞同：0
> 
> 时间：2013-04-08T15:46:48.263
> 
> 标签：c#, regex

我有一个用户可以指定提示的应用程序......可能是正则表达式类型或字符串类型。

用户有一个复选框，如果他选中该复选框，则提示 var 将是字符串类型，如果不选中将是正则表达式。

然后我需要稍后在程序中引用它。

所以我想知道如何定义...

目前我有以下内容：

```
textbox1.text = "\[.*@.*\][\$|\#]"  < --- that is a Regex 
```

或者它可能是这样的：

```
textbox1.text = "#$"                < --- that would be a regular string... 
```

在我的应用程序的某个地方我需要使用该信息...

```
string userPrompt:
string rootPrompt;

if (userPromptIsText)
{
    userPrompt = textBoxp4RegPrompt.Text.Trim();
}
else
{
    // here how do I say that userprompt is a regex type?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:50:17.223

似乎您不应该将输入的正则表达式存储在字符串变量“userPrompt”中，而是存储在 Regex 中，以便您可以使用它：

```
System.Text.RegularExpressions.Regex regex = new System.Text.RegularExpressions.Regex(textBoxp4RegPrompt.Text.Trim()); 
```

然后您可以使用 regex 变量来执行匹配：

```
System.Text.RegularExpressions.Match results = regex.Match(stringToTest);  
MessageBox.Show(results.Groups[0].Value);
MessageBox.Show(results.Groups[1].Value); 
```

# jquery - add a class to iframe and select that class to display iframe

> ID：15883525
> 
> 赞同：0
> 
> 时间：2013-04-08T15:47:26.503
> 
> 标签：jquery

i have a jquery code that creates iframes base on how many records the code finds, a button that onclick re size the iframe, what i am trying to do is add a class to the iframe, so that i can only show the iframe the click on. this is the code that i have, but it keeps showing all the iframes

```
$("<iframe />" , {
        src: strTest,
        id: "myframe",
        width: '100%'       

    }).appendTo('.content');
    $("<button/>", {
      align: "center"
    })
    .text("Select Patient")    
    .click(function () { $("#myframe").attr("Height", "125%").addClass("selectedIframe"); }).appendTo('.content');
    $(".selectedIframe", window.parent).show();
  $("<hr />").appendTo('.content');
} 
```

can somebody help me or point me to the right direction thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:54:02.003

似乎您需要在创建 iframe 时添加该类：

```
$("<iframe />" , {
        src: strTest,
        id: "myframe",
        width: '100%'       

    }).appendTo('.content').addClass("selectedIframe"); 
```

而不是你现在正在做的地方（在点击处理程序中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:56:04.180

您可以在创建元素时添加类和内容等内容，如果使用变量，则可以在以后的函数中引用元素：

```
var iframe = $("<iframe />" , {src    : strTest, 
                               id     : "myframe", 
                               width  : '100%', 
                               'class': 'myIframe'
             }),
    button = $("<button />", {style: 'margin: 0 auto; position: relative',
                              text : 'Select Patient'
             });

$('.content').append(iframe, button);

button.on('click', function() {
    iframe.css({height: '125%'}).addClass('selectedIframe');
});

$(".selectedIframe", window.parent).show();
$("<hr />").appendTo('.content'); 
```

请注意，`class`使用这种方式应该被引用，因为它是一个保留的 javascript 关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:52:37.677

您需要为每个帧指定一个唯一的 ID。目前，您的代码似乎总是创建具有相同 id 的帧 -`myframe`

您可能可以通过`$(this)`在这行代码上使用来操纵它：

```
$(this).attr("Height", "125%").addClass("selectedIframe"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:00:48.890

尝试使用 onClick ：

```
var iframe = $("<iframe />" , {src    : strTest, 
                               id     : "myframe", 
                               width  : '100%', 
                               onclick: function(){ $(this).addClass('myIframe'); }
             }),
    button = $("<button/>", {style: 'margin: 0 auto; position: relative',
                             text : 'Select Patient'
             });

$('.content').append(iframe, button);

button.on('click', function() {
    iframe.css({height: '125%'}).addClass('selectedIframe');
});

$(".selectedIframe", window.parent).show();
$("<hr />").appendTo('.content'); 
```

# python - Python 模块中的 __name__ 变量是如何定义的？

> ID：15883526
> 
> 赞同：31
> 
> 时间：2013-04-08T15:47:29.590
> 
> 标签：python, python-module, python-internals

我知道[标准示例](http://docs.python.org/2/tutorial/modules.html#executing-modules-as-scripts)：如果您直接执行一个模块，那么它的`__name__`全局变量定义为`"__main__"`. 但是，我无法在文档中找到`__name__`在一般情况下如何定义的精确描述。模块[文档](http://docs.python.org/2/tutorial/modules.html)说...

> 在模块中，模块的名称（作为字符串）可用作全局变量的值`__name__`。

...但是“模块的名称”是什么意思？它只是模块的名称（已`.py`删除的文件名），还是包含完全限定的包名称？

`__name__`Python模块中变量的值是如何确定的？对于加分，请准确指出在 Python 源代码中执行此操作的位置。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-08T15:54:59.220

它设置为导入的模块的绝对名称。如果您将其导入为`foo.bar`，则`__name__`设置为`'foo.bar'`。

名称在[`import.c`](http://hg.python.org/cpython/file/tip/Python/import.c)模块中确定，但由于该模块处理各种不同类型的导入（包括 zip 导入、仅字节码导入和扩展模块），因此有*几个*代码路径可以跟踪。

通常，`import`语句被转换为对 的调用`__import__`，默认情况下[实现为对 的调用`PyImport_ImportModuleLevelObject`](http://hg.python.org/cpython/file/tip/Python/bltinmodule.c#l182)。请参阅[`__import__()`文档](http://docs.python.org/3/library/functions.html#__import__)以了解这些参数的含义。在[`PyImport_ImportModuleLevelObject`](http://hg.python.org/cpython/file/tip/Python/import.c#l1228)相对名称中已解析，因此您可以根据需要追踪`name`那里的变量。

模块的其余部分处理实际的导入，`PyImport_AddModuleObject`创建实际的命名空间对象并设置`name`键，但您可以将该`name`值追溯到`PyImport_ImportModuleLevelObject`. 通过创建一个模块对象，它的`__name__`值在[`moduleobject.c`对象构造函数](http://hg.python.org/cpython/file/tip/Objects/moduleobject.c#l17)中设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:53:57.160

`__name__`变量是可以通过名称访问的模块属性。

```
import os
assert os.__name__ == 'os' 
```

示例自我创建的模块，用于导入机制：

```
>>> import types
>>> m = types.ModuleType("name of module") # create new module with name
>>> exec "source_of_module = __name__" in m.__dict__ # execute source in module
>>> m.source_of_module
'name of module' 
```

来自类型模块的行：

```
import sys
ModuleType = type(sys) 
```

# knockout.js - Select another control in the same table row using Knockout.js

> ID：15883529
> 
> 赞同：0
> 
> 时间：2013-04-08T15:47:45.707
> 
> 标签：knockout.js

I'm having a bit of trouble getting my head around a problem I'm having.

What I'd like to do is, when typing in a textbox, to check if the checkbox in the same row is clicked or not.

Could anybody point me in the right direction please?

Thanks, John

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:08:24.603

[**例子**](http://jsfiddle.net/eyjk9/)

使用[subscribe](http://knockoutjs.com/documentation/observables.html)和[valueUpdate](http://knockoutjs.com/documentation/value-binding.html)（在按下键而不是模糊时触发事件）

```
var row = function (check, value) {
    this.selected = ko.observable(check);
    this.word = ko.observable(value);
    this.word.subscribe(function (value) {
        if (this.selected()) {
            alert("checked");   
        }
    }.bind(this));
};
var viewModel = {
    rows: ko.observableArray([new row(false, 'a'), new row(true, 'b'), new row(false, 'c')])
};

ko.applyBindings(viewModel); 
```

HTML 文本框绑定：

```
<input type="text" data-bind="value: word, valueUpdate: 'afterkeydown'" /> 
```

# android - Printing Bitmaps from android saved images

> ID：15883530
> 
> 赞同：0
> 
> 时间：2013-04-08T15:47:47.357
> 
> 标签：android, canvas, bitmap, outputstream

So I have a basic canvas painting app. I have a background image which acts as a template to which you paint within. I want to be able to save the image and then eventually print it.. either by forwarding it by email or some air printing..

However the issue is this. When I take the image template as it is on my computer and print it, it is fine. 100% scale . But after I save the image within my app before or after adjustments have been made with painting the image it can no longer be printed on one page of A4\. It has to be scaled to fit. It's very important that I dont scale to fit it on to a page as it fits fine before android saves it.

I'm guessing it has something to do with dpi or density of android screen or something along these lines.

Here is the code I use to create the bitmap

```
 templateBackground = BitmapFactory.decodeResource(getResources(),R.drawable.backgroundTemplate);

    Bitmap.Config conf = Bitmap.Config.ARGB_8888;

    bitmap_object = Bitmap.createBitmap(templateBackground.getWidth(),
            templateBackground.getHeight(), conf);
    bitmap_object.setDensity(Bitmap.DENSITY_NONE); 
```

Saving is done with a simple output stream to Private storage

```
b1.compress(CompressFormat.PNG,100,fo); 
```

If anyone has any ideas that would be great!

Weird thing is the resolution never changes before or after the save on android.. So I just dont understand why when I try to print it the size changes. .

# jquery - 向 Jquery $.extend 添加额外参数

> ID：15883532
> 
> 赞同：0
> 
> 时间：2013-04-08T15:47:54.397
> 
> 标签：jquery, jquery-plugins

我编写了一个 jQuery 插件来触发单击或更改元素时的模式。

```
$.fn.showInformationOverlay = function(options){
        var defaults = {
           fragments: "myfrag",
           ajaxSource: true,
           _eventId: "myfragEvent",
           formId: "#myform",
           event: "click"
        }

       var params = $.extend({},defaults, options);
       var $url = $(params.formId).attr("action");
       var $this = $(this);

       return $this.each(function(){
          $this.on(params.event,function(e){
               e.preventDefault();
               $.ajax({
                  type: "POST",
                  url:$url,
                  data:params,
                  success: function(data){
                    if (!!data) {
                           //Do something with data
                    }
                  }
              });
          });
       });
  }, 
```

我通过传递参数来调用这个插件，如下所示。在某些情况下，我传入了额外的参数。

```
$("#mydropdownElement").showInformationOverlay({
        fragments: "myfragmentforthissection",
        ajaxSource: true,
        _eventId: "myfragmentforthissectionEvent",
        includeChangedValue: true, //Additional Param
        nameForChangedValue: "mychangedValueKey",//Additional Param
        event: "change"
}); 
```

我的问题是

我怎样才能将一个对象“推”到`params`，键是`nameForChangedValue`，值`val()`是`$("#mydropdownElement")`。

所以我预期的对象数组应该是这样的。

```
 {
      fragments: "myfragmentforthissection",
      ajaxSource: true,
      _eventId: "myfragmentforthissectionEvent",
      formId: "#myform",
      event: "change",
      mychangedValueKey : "mydropdownvalue" //Key as the name I've passed in and the value is the value from the change event of the dropdown
   } 
```

希望问题很清楚。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:59:27.353

尝试

```
$.fn.showInformationOverlay = function(options){
        var defaults = {
           fragments: "myfrag",
           ajaxSource: true,
           _eventId: "myfragEvent",
           formId: "#myform",
           event: "click"
        }

       var params = $.extend({},defaults, options);
       var $url = $(params.formId).attr("action");
       var $this = $(this);

       return $this.each(function(){
          $this.on(params.event, function(e){
               var data;
               if(params.includeChangedValue){
                   data = $.extend({}, params);
                   data[params.nameForChangedValue] = $(this).val();
                   delete data.includeChangedValue;
                   delete data.nameForChangedValue;
               } else {
                   data = params;
               }
               e.preventDefault();
               $.ajax({
                  type: "POST",
                  url:$url,
                  data:data,
                  success: function(data){
                    if (!!data) {
                           //Do something with data
                    }
                  }
              });
          });
       });
} 
```

更新：
如您所见，我所做的唯一更改是

```
 var data;
           if(params.includeChangedValue){
               data = $.extend({}, params);
               data[params.nameForChangedValue] = $(this).val();
               delete data.includeChangedValue;
               delete data.nameForChangedValue;
           } else {
               data = params;
           } 
```

并使用 data 作为 ajax 请求的数据。

如果`includeChangedValue`没有像以前那样设置请求工作。

否则，我们创建对象的副本，`params`因为我们不希望使用`data = $.extend({}, params)`. 然后我们根据传递给`nameForChangedValue`输入控件的值添加一个附加属性，并使用 `data[params.nameForChangedValue] = $(this).val();`. 最后，我们从数据对象
中删除不需要的键。`includeChangedValue``nameForChangedValue`

# php - PHP 计算具有特定值的 Cookie 数

> ID：15883536
> 
> 赞同：0
> 
> 时间：2013-04-08T15:48:03.273
> 
> 标签：php, cookies, count

在这种情况下，我想计算具有特定值的 cookie 的数量，该值是“完整的”，但 cookie 键将是唯一的。所以可能有`key1 = complete`，`key 2 = complete`但我似乎无论如何都找不到`count($_COOKIE["ONLY THE VALUE"]);`

我确信这很明显，但经过几天试图弄清楚我是如何撞到树桩的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:50:54.040

您可以使用 a`foreach`来通过`$_COOKIE`

[foreach 手册](http://php.net/manual/en/control-structures.foreach.php "php手动foreach")

```
$counter = 0;

foreach($_COOKIE as $value)
{
  if($value == "some val")
  {
      ++$counter;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:52:42.373

使用[`array_count_values`](http://php.net/manual/en/function.array-count-values.php).

```
$count = array_count_values($_COOKIE);
echo $count["complete"]; // gives you the count for that value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:50:48.153

`count(array_search("complete", $_COOKIE))`应该管用。但是我还没有尝试过。

[http://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php) [http://www.php.net/manual/en/function.count.php](http://www.php.net/manual/en/function.count.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:50:54.013

你可以做 ：

```
count(array_unique($_COOKIE)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T15:54:26.340

您可以使用`array_count_values`

```
$cookie_count = array_count_values($_COOKIE);

echo $cookie_count ["complete"] ; 
```

有关 array_count_values 的更多信息可以在这里找到[http://www.php.net/manual/en/function.array-count-values.php](http://www.php.net/manual/en/function.array-count-values.php)

另一种方法是：

```
$string = implode(',', $_COOKIE);
$cookie_count = substr_count($string, 'complete');
echo $cookie_count; 
```

# ruby - How to write a complicated condition

> ID：15883541
> 
> 赞同：4
> 
> 时间：2013-04-08T15:48:19.187
> 
> 标签：ruby, coding-style, conditional-statements

Condition constructions are easy to write when you have a simple condition and a possibly complicated body:

```
if simple_condition_expressed_in_one_liner
  complicated_body_that_may_be_long
  complicated_body_that_may_be_long
  complicated_body_that_may_be_long
end 
```

but sometimes, you have a complicated condition and a simple body like this:

```
if condition1 and
condition2 and
condition3 and
some_more_complicated_condition_that_cannot_be_written_on_a_single_line and
still_some_more_complicated_condition_that_cannot_be_written_on_a_single_line
  simple_body
end 
```

In such case, is there a good way to write it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:14:21.927

我总是尝试重构为更小的描述性方法。

使用您的示例，而不是：

```
until (print "Username : "; gets.chomp == "user") and
      (print "Password : "; gets.chomp == "pa$$word")
  puts "Error, incorrect details"
end 
```

我会使用：

```
def correct_user
  print "Username : "
  gets.chomp == "user"
end

def correct_password
  print "Password : "
  gets.chomp == "pa$$word"
end

until correct_user and correct_password
  puts "Error, incorrect details"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:36:44.497

我个人把整个条件语句放到一个单独的方法中。这可能听起来很像已经建议的内容，但我将整个事情放入一个方法中，而不是分解它。

```
simple_body if complicated_condition

def complicated_condition
  condition1 and
  condition2 and
  condition3 and
  some_more_complicated_condition_that_cannot_be_written_on_a_single_line and
  still_some_more_complicated_condition_that_cannot_be_written_on_a_single_line
end 
```

我可能会也可能不会将条件分解为更多方法，具体取决于条件是什么以及我以后是否会最终使用这些方法（太多的方法只用于一个目的开始变成代码味道）。

它使代码可读（我可以浏览代码并查看它在做什么）和可维护（如果需要我可以更改条件并且我确切地知道它在哪里）。

如果我把它放到一个类中，我会把这个方法放在下面，`private`因为“外部”没有理由需要使用它。

**编辑：** 如果条件需要在条件中使用变量时的值，也许考虑传入`binding`方法。

```
opt = :mysql
simple_body if complicated_condition(binding)

opt = :oracle
simple_body if complicated_condition(binding)

def complicated_condition(b)
  condition1 and
  condition2 and
  condition3 and
  some_more_complicated_condition_that_cannot_be_written_on_a_single_line and
  still_some_more_complicated_condition_that_cannot_be_written_on_a_single_line and
  eval('opt', b) == :mysql
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:52:19.970

您应该考虑将其拆分为单独的方法。阅读代码时很难在脑海中映射条件：

```
if(condition1 and condition2 and ...) 
```

相对：

```
if(isValidCondition()).. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T19:25:37.400

[**Early returns**](http://blog.nerdbucket.com/the-horrible-cost-of-using-explicit-returns-in-ruby/article) might be a candidate when making the `complex_condition` a method call.

```
simple_body if complex_condition

def complex_condition
  condition1 or return # or return unless condition1 
  condition2 or return
  condition3 or return
  condition4 or return
  condition5
end

def condition4
  some_more_complicated_condition_that_cannot_be_written_on_a_single_line
end

def condition5
  still_some_more_complicated_condition_that_cannot_be_written_on_a_single_line
end 
```

I really appreciate your thoughts, feel free to comment!

# java - My label is not displaying in a GUI prefix expression program

> ID：15883543
> 
> 赞同：1
> 
> 时间：2013-04-08T15:48:24.610
> 
> 标签：java, swing, user-interface, label, expression

I'm using a GUI for a prefix expression program. The programme itself works fine, but the GUI is a bit problematic. When I run it, the result label doesn't show up. I've tried everything, but I don't know why it's not working. Any help would be greatly appreciated. Thanks!

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Scanner;
import java.util.Stack;
import java.util.StringTokenizer;
import javax.swing.*;

public class PrefixExpression extends JFrame
{
    private JPanel panel;
    private JTextField expression;
    private JLabel title;
    private JLabel instruction;
    private JLabel results;
    private final int WIDTH = 310;
    private final int HEIGHT = 175;
    private JButton calculateBtn;

    public PrefixExpression()
    {
        setTitle("Prefix Expression Calculator");
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        buildPanel();
        add(panel);
        setVisible(true);
    }

    private void buildPanel()
    {
        title = new JLabel("Calculating Prefix Expressions");
        instruction = new JLabel("Please enter your expression");
        expression = new JTextField(10);
        calculateBtn = new JButton("Calculate");
        calculateBtn.addActionListener(new ButtonListener());

        panel = new JPanel();
        panel.add(title);
        panel.add(instruction);
        panel.add(expression);
        panel.add(calculateBtn);

    }

    public static void main(String[] args)
    {
        PrefixExpression main = new PrefixExpression();
    }

    private class ButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            Stack <Integer> numberStack = new Stack <Integer>();
            Stack <Character> operatorStack = new Stack <Character>();

            String input = expression.getText();

            StringTokenizer strToken = new StringTokenizer(input, " ", false);

            while (strToken.hasMoreTokens())
            {
                String i = strToken.nextToken();
                int number;
                char operator;

                try
                {
                    number = Integer.parseInt(i);
                    numberStack.push(number);
                }
                catch (NumberFormatException nfe)
                {
                    operator = i.charAt(0);
                    operatorStack.push(operator);
                }
            }

            int answer = calculateMethod(numberStack, operatorStack);
            results = new JLabel("Here is your answer: " + answer); 
            panel.add(results);  //This is where the results label is added to panel
     }

        public int calculateMethod(Stack <Integer> numberStack, Stack <Character> operatorStack)
        {
            int result = 0;
            while(! numberStack.empty())
            {
                char operator = (char) operatorStack.pop();
                if (operator == '+')
                    result = addition(numberStack);
                else if (operator == '*')
                    result = multiplication(numberStack);
            }

            return result;
        }

        public int addition(Stack <Integer> numberStack)
        {
            int numb1 = (int) numberStack.pop();
            int numb2 = (int) numberStack.pop();
            int answer = numb1 + numb2;
            return answer;
        }

        public int multiplication(Stack <Integer> numberStack)
        {
            int numb1 = (int) numberStack.pop();
            int numb2 = (int) numberStack.pop();
            int answer = numb1 * numb2;
            return answer;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:55:54.507

> 面板。添加（结果）；//这是将结果标签添加到面板的位置

当您将组件添加到可见 GUI 时，您需要执行以下操作：

```
panel.revalidate();
panel.repaint(); 
```

这将调用布局管理器并适当地调整组件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:59:56.103

我会将 JPanel 的布局更改为流布局以外的其他布局，在计算结果之前创建结果 JLabel 并将其添加到您的面板中。然后你只需要使用`results.setText(answer);`, 来显示结果，在你完成之后，除非你想让你的所有结果都在面板中可见。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T18:42:55.717

```
 panel.add(results);  //This is where the results label is added to panel
        revalidate(); 
```

# filepicker.io - filepicker.io policy not working

> ID：15883547
> 
> 赞同：1
> 
> 时间：2013-04-08T15:48:34.693
> 
> 标签：filepicker.io, filepicker

I have the following PHP generated.

```
$policy = base64_encode(json_encode(array("maxsize"=>1, 'path'=>'tmp/', 'expiry'=>strtotime("+5 minutes"), 'extension'=>'.pdf', 'call'=>array('pick','store'))));
$sig = hash_hmac('sha256', $policy, FILEPICKER_SECRET); 
```

It is correct because when I turned on security, it did not complain wrong signature. The filepicker codes as below.

```
filepicker.pick(
                {policy: policy, signature:signature},
                function(fpfiles) {
                    console.log(fpfiles);
                }
            ); 
```

Now nothing seems to work. 1) all types of files can be uploaded 2) uploaded files does not resides in 'tmp' folder in s3 3) all file size can be uploaded

What am I missing here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:01:40.957

filepicker.io 策略不设置对话框的行为，只验证它。如果你想控制文件扩展名和路径，你应该在 filepicker.pick() 调用中指定这些参数。有关详细信息，请参阅[https://developers.filepicker.io/docs/security/ 。](https://developers.filepicker.io/docs/security/)

# c - 河内塔迭代与 n > 3 钉

> ID：15883551
> 
> 赞同：0
> 
> 时间：2013-04-08T15:48:44.217
> 
> 标签：c, algorithm

3 个钉子（或杆，或任何你称它们的名称）的迭代算法是重复以下两点：
1\. 将最小的圆盘向右/向左移动（如果奇数/偶数）
2\. 在不触及最小圆盘的情况下向左移动一次

我的问题是 - 对于 n > 3 钉有类似的算法吗？

我在互联网上找不到这个（至少是迭代的）。我一个人什么都想不出来。上面的算法不起作用——它无限地移动磁盘。

我知道我之前曾发布过 2 种相关问题，但您不太欢迎它们，所以在您投反对票之前 - 只需在评论中写下我，以便我自己研究更多信息，我将删除此线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:52:19.947

具有 n > 1 个磁盘的 3-peg Hanoi 问题的一般递归算法（n==1 的情况很简单）是：

1.  将 n-1 个磁盘从源 peg 移动到第三个 peg（不是源或目标的那个）
2.  将最大的磁盘移动到目标挂钩。
3.  将 n-1 个磁盘从第三个钉子移到目标钉子上。

超过 3 个钉子时，算法是相同的。只需将“第三个挂钩”替换为“任何未使用的挂钩”即可。

请注意，该算法不使用“左移”或“右移”之类的术语。

正如@nhahtdh 在评论中指出的那样，任何递归算法都可以通过标准方式转换为迭代算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:02:16.243

[来自维基百科关于河内塔的文章的](http://en.wikipedia.org/wiki/Tower_of_Hanoi#With_four_pegs_and_beyond)回答：**没有非暴力算法可以**找到可证明的最优解，尽管有一种算法可能是最优的。

> 尽管三钉版本具有如上所述的简单递归解决方案，但对于具有四钉的河内塔问题（称为雷夫之谜）的最优解，更不用说更多钉，仍然是一个悬而未决的问题。这是一个很好的例子，说明如何通过稍微放松其中一个问题约束，使一个简单的、可解决的问题变得更加困难。

# c++ - 从 C++ 流中读取特定数量的字符到 std::string

> ID：15883553
> 
> 赞同：6
> 
> 时间：2013-04-08T15:48:48.720
> 
> 标签：c++, iostream, stdstring

我对大多数 C++ 都非常熟悉，但我避免的一个领域是 IO 流，主要是因为我一直在不适合的嵌入式系统上使用它。然而，最近我不得不熟悉它们，并且我正在努力找出我认为应该简单的东西。

我正在寻找一种相对有效的方法来将固定数量的字符从 C++ 流读取到`std::string`. 我可以使用该方法轻松地读入一个临时`char`数组`read()`并将其转换为 a `std::string`，但这相当难看并且涉及浪费的副本。我还可以将整个流读入一个字符串，如下所示：

```
std::string getFile(std::fstream &inFile)
{
    std::stringstream buffer;
    buffer << inFile.rdbuf();
    return buffer.str();
} 
```

...但是无限制地读取内存通常不是一个好主意，所以我真的很想一次访问一个文件块，比如 4K 左右。我也可以一次读取字符，但这感觉比读取临时`char`数组更丑陋且效率更低。

那么，有没有一种简单的方法可以`std::string`直接从包含流中接下来的*N*个字符的流中获取 a？很可能根本没有办法做到这一点，但对我来说，这样的事情会丢失似乎很奇怪，所以我觉得我一定错过了一些明显的东西。

顺便说一句，我对 C 文件 IO API 非常熟悉，我并不是在寻找涉及它们的解决方案。`read()`我可以用and敲一些东西`write()`，但是我正在使用的代码大量使用流，我认为让我的代码添加保持一致的风格是一种很好的做法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T15:52:12.033

你在正确的轨道上。:)

```
mystring.resize( 20 );
stream.read( &mystring[0], 20 ); 
```

**编辑：**

在 C++11 中。这是明确且安全的。 **与** `data()`and不同`c_str()`，[`std::string::operator[]`](http://en.cppreference.com/w/cpp/string/basic_string/operator_at) 它提供对基础数据的*可变*引用。

在 C++03 中，它在实际意义上是安全的，但定义`std::string`太弱，无法*保证*这种安全性。 [C++03 允许](https://stackoverflow.com/a/1986974/16287)字符串数据不连续，但我不相信任何可用的实现都利用了这一点。

# backbone.js - 如何使用 SASS 处理 Backbone.js 所需的“#”

> ID：15883555
> 
> 赞同：0
> 
> 时间：2013-04-08T15:48:49.587
> 
> 标签：backbone.js, sass, compass-sass

我正在尝试使用带有指南针的 SASS 来创建图像精神。但是，我也在使用backbone.js，所以我的网址看起来像：`http://localhost/social/#/dashboard`

所以当我使用`@include arrow-sprite($name);`它时，它会给我一个像这样的网址：`http://localhost/social/#/images/sidebar_buttons/arrow-sa2b2afd371.png`

哪个 chrome 检查器给了我这个错误：`Resource interpreted as Image but transferred with MIME type text/html`

如果我从 url 中删除“#”，则图像加载正常。我的 config.rb 看起来像：

```
http_path = "/social/"
project_path = "C:/wamp/social"
css_dir = "styles/css"
sass_dir = "styles/sass"
images_dir = "images"
javascripts_dir = "js" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:39:14.997

在 config.rb 中启用相关资产：

```
relative_assets = true 
```

# wordpress - wordpress sidebar moves on tablets (atleast ipad)

> ID：15883556
> 
> 赞同：0
> 
> 时间：2013-04-08T15:48:49.693
> 
> 标签：wordpress, tablet, sidebar

My first webpage ([http://strandservice.fi](http://strandservice.fi)). A modified twentyeleven theme in WP (i know, should have created a childtheme).

My problem is that the sidebar moves down on phones and ipads, I understund that it does it on phones, but not why it does it on ipads. The sidebar seems to be working fine on computers when run on 1024 × 768, which is ipad2 resolution (it even works fine on 800 x 600). It is also working fine on ipad emulators I have used to test it.

Is there any somewhat easy solution to this? Can I force the page to keep the sidebar where it should be untill it reaches some min-resolution set by me?

Thank you in advance

# linux - 从 find+xargs+grep 管道中排除 .svn .git 文件

> ID：15883563
> 
> 赞同：0
> 
> 时间：2013-04-08T15:48:56.477
> 
> 标签：linux, find, xargs

我有一个 Emacs 函数`(fgf "thing")`，它创建一个如下所示的子进程：

```
find .  \( -type f -a \! -regex '\.(svn|git)' \) -print0 | xargs -0 grep -nH -e 'thing' 
```

基本上我不想`grep`看*任何*`.git`or`.svn`文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:50:41.413

```
find . -type d '(' -name .svn -o -name .git ')' -prune -o -type f -exec grep -nH -e 'thing' {} + 
```

使用`-prune`避免递归到`.svn`和`.git`目录比使用正则表达式更好。也`-exec`更可取`-print0 | xargs -0`。

# c - Reading from stdin

> ID：15883568
> 
> 赞同：48
> 
> 时间：2013-04-08T15:49:12.830
> 
> 标签：c, unix, stdin

What are the possible ways for reading user input using `read()` system call in Unix. How can we read from stdin byte by byte using `read()`?

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-08T15:52:23.510

您可以执行以下操作来读取 10 个字节：

```
char buffer[10];
read(STDIN_FILENO, buffer, 10); 
```

请记住[read()](http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html)不会添加`'\0'`终止以使其成为字符串（仅提供原始缓冲区）。

一次读取 1 个字节：

```
char ch;
while(read(STDIN_FILENO, &ch, 1) > 0)
{
 //do stuff
} 
```

并且不要忘记在此文件`#include <unistd.h>`中`STDIN_FILENO`定义为宏。

有三个标准 POSIX 文件描述符，对应于三个标准流，大概每个进程都应该有：

```
Integer value   Name
       0        Standard input (stdin)
       1        Standard output (stdout)
       2        Standard error (stderr) 
```

因此，`STDIN_FILENO`您可以使用 0。

**编辑：**
在 Linux 系统中，您可以使用以下命令找到它：

```
$ sudo grep 'STDIN_FILENO' /usr/include/* -R | grep 'define'
/usr/include/unistd.h:#define   STDIN_FILENO    0   /* Standard input.  */ 
```

注意评论`/* Standard input. */`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-08T15:53:41.280

从[男人那里读到](http://linux.die.net/man/2/read)：

```
#include <unistd.h>
ssize_t read(int fd, void *buf, size_t count); 
```

输入参数：

*   `int fd`文件描述符是一个整数而不是文件指针。的文件描述符`stdin`是`0`

*   `void *buf`指向缓冲区的指针，用于存储`read`函数读取的字符

*   `size_t count`要读取的最大字符数

因此，您可以使用以下代码逐字符读取：

```
char buf[1];

while(read(0, buf, sizeof(buf))>0) {
   // read() here read from stdin charachter by character
   // the buf[0] contains the character got by read()
   ....
} 
```

# iphone - backgroundTap 隐藏 didSelectRowAtIndexPath

> ID：15883573
> 
> 赞同：0
> 
> 时间：2013-04-08T15:49:26.630
> 
> 标签：iphone, cocoa-touch, uitableview, didselectrowatindexpath

我有一个带有一些 UITableViewCells 的 UITableView，其中包含带有建议的标签，以便将文本插入到 UITextView 中。我希望当用户点击一些带有文本建议的 uitableviewcell 时，该文本将进入 uitextview，但我也希望用户能够自己编辑 uitextview。

一切正常，直到我想在开始编辑文本视图后添加点击背景的功能，这导致隐藏键盘（resignFirstResponder）。但是当我实现 backgroundTap 时，对 didSelectRowAtIndexPath 的调用不再发生。

我该如何解决这个问题，以便当用户点击某个 uitableviewcell 时，调用将是 didSelectRowAtIndexPath 而不是 backgroundTap？

我对 backgroundTap 的实现是：

```
 -(void)backgroundTap:(UITapGestureRecognizer *)tapGR{
       //...some code here...
   } 
```

在 viewWillAppear 我添加了这一行：

```
[self.view addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(backgroundTap:)]]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:19:25.190

问题是点击手势识别器吃掉了用于表格视图的点击。请参阅[didSelectRowAtIndexPath: not being called](https://stackoverflow.com/questions/8952688/didselectrowatindexpath-not-being-called)。

手势识别器不仅适用于它所附加的视图（`self.view`在您的情况下），而且还适用于视图层次结构的所有视图的子视图。在这种情况下，这包括所有内容，包括您的表格视图单元格。

解决方案是使用手势识别器委托（iOS 5）或 UIView `gestureRecognizerShouldBegin:`（仅限 iOS 6）进行调解。

# ruby-on-rails - How do I display error messages in the same URL as the form URL in Rails forms?

> ID：15883578
> 
> 赞同：0
> 
> 时间：2013-04-08T15:49:49.037
> 
> 标签：ruby-on-rails, forms, url

(I've broken out the 2nd question that originally was part of this post into [a separate post](https://stackoverflow.com/questions/15935072/how-do-i-define-a-custom-url-for-a-form-confirmation-page))

I am creating a product landing page with Rails in which users can enter their email address to be notified when the product launches. (Yes, there are services/gems etc that could do this for me, but I am new to programming and want to build it myself to learn rails.)

On submit of the form, if there are errors, the app currently redirects to '/invites' I would like to instead display error messages on the same page/URL as the original form? (In my case, the form is located at root while the error messages are displaying at '/invites')

I have read the [Rails Guide on Routes](http://guides.rubyonrails.org/routing.html) and numerous stackoverflow posts on handling form errors nothing I've found seems to answer the question I have.

*Update: Based on the reply from [@rovermicrover](https://stackoverflow.com/users/1436131/rovermicrover) I would like to clarify that, while I'm open to an Ajax solution, I'm fine with a page refresh that displays the error message. (I was not able to get the recommendation by @rovermicrover to function as desired - see my response to that solution below for more details.)*

**What I did:**

Invite model:

```
 class Invite < ActiveRecord::Base
      attr_accessible :email

      validates :email, :presence => {:message => "Please enter an email address."}

    end 
```

My routes file:

```
SuggestionBoxApp::Application.routes.draw do
  root to: 'invites#new'
  resources :invites
end 
```

This is what I have in the Invites controller (I've only included the actions I'm referencing: new, create, show - it's basically the default of what Rails might generate):

```
class InvitesController < ApplicationController

      def show
      @invite = Invite.find(params[:id])

        respond_to do |format|
          format.html # show.html.erb
          format.json { render json: @invite }
        end
      end

      def new
        @invite = Invite.new

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @invite }
        end
      end

      def create
        @invite = Invite.new(params[:invite])

        respond_to do |format|
          if @invite.save
            format.html { redirect_to @invite }
            format.json { render json: @invite, status: :created, location: @invite }
          else
            format.html { render action: "new" }
            format.json { render json: @invite.errors, status: :unprocessable_entity }
          end
        end
      end
    end 
```

Please let me know if there is any additional info I can provide in helping to answer this question. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:19:27.337

使表单“远程”

```
form_for @invite, :remote => true
   .... 
```

然后在控制器中

```
def create
  @invite = Invite.new(params[:invite])
    respond_to do |format|
      if @invite.save
        format.html { redirect_to @invite }
        format.js { render :action => 'create_suc'}
      else
        format.html { render action: "new" }
        format.js { render :action => 'create_fail' }
      end
    end
  end 
```

/invites/create_suc.js.erb

```
$('#errors').remove()
$('#new_invite').prepend("<div class='Thanks'>Thanks for signing up</div>")
$('#new_invite').hide("") 
```

/invites/create_fail.js.erb

```
$('#new_invite').html('<%= escape_javascript render("form", :invite => @invite) %>'); 
```

Forms 是您的.... 表单的一部分，也是对@invite 上所有错误的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T05:18:37.057

从纯粹的 Ruby on Rails 角度来看，有一种方法可以做到这一点，而无需使表单“远程”提交。但是，只有在浏览器启用了 cookie 时，您才能执行此操作。

这个想法是将表单数据保存在会话信息中以防出错。只要记住在成功的情况下删除会话数据。

```
 def new
    @invite = Invite.new(session[:invite])

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @invite }
    end
  end

  def create
    @invite = Invite.new(params[:invite])

    respond_to do |format|
      if @invite.save
        session.delete(:invite)
        format.html { redirect_to @invite }
        format.json { render json: @invite, status: :created, location: @invite }
      else
        session[:invite] = params[:invite]
        format.html { render action: "new" }
        format.json { render json: @invite.errors, status: :unprocessable_entity }
      end
    end
  end 
```

# coldfusion - Coldfusion ApplicationStop 函数

> ID：15883579
> 
> 赞同：1
> 
> 时间：2013-04-08T15:49:50.617
> 
> 标签：coldfusion, coldfusion-9

我正在开发一个 CF9 应用程序，我们有一个有时需要调用的过程`applicationStop()`

我对这个功能的理解是它会关闭应用程序，并在下次请求时重新启动应用程序。

我正在使用它来重新加载一些应用程序范围的变量和第三方的东西，但是，看起来好像在函数完成处理`onApplicationStart()`之前调用了函数。`onApplicationEnd()`

谁能确认这是否是该功能的预期`applicationStop()`功能？它给我造成的问题是，`onApplicationEnd()`我正在重置一些我想重新初始化的应用程序范围的东西`onApplicationStart()`，但是如果它不等到`onApplicationEnd()`完成，那么我就会进入不一致的状态。

* * *

**编辑** 问题最初实际上更多是关于在 onApplicationEnd() 仍在执行时调用 onApplicationStart() 是否是预期行为，我打算通过在 onApplicationEnd() 中使用锁定来解决我的问题以确保它完成了重新加载。

但是，我添加了一个锁：

```
lock scope="application" type="exlusive" timeout="5" { 
```

而且它似乎忽略了整个块 - 没有执行任何代码（包括日志记录），也没有引发异常（如果在执行之前锁定超时，则会引发异常？）。我认为这与我们在 onApplicationEnd() 中并没有完整的应用程序范围有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:40:03.293

我不知道这个问题的答案，所以我[进行了适度彻底的研究并发表了我的发现](http://adamcameroncoldfusion.blogspot.co.uk/2013/04/onapplicationstart-will-run-whilst.html)。

底线是你*应该*期待它，因为它确实发生了。我不认为这是一个错误，因为`onApplicationStart()`/`onApplicationEnd()`方法是事件处理程序，而不是事件本身，因此一个需要一段时间才能运行，而另一个也可能在过渡期间被调用是完全合法的。

但是我认为实际上它们应该是同步的，因为每个代码同时运行是不可取的。

我没有检查锁定的东西，但可能会看看我在博客文章中提到的那杯咖啡。

# c++ - 仅调用派生类的析构函数

> ID：15883582
> 
> 赞同：1
> 
> 时间：2013-04-08T15:50:01.207
> 
> 标签：c++, inheritance, casting, type-conversion

查看 C++ 语言标准，有没有办法只调用派生类析构函数，而不调用基类的析构函数？

所以，对于类

```
class Base { public: virtual ~Base() {} };
class Derived : public Base { public: ~Derived();}; 
```

如果可以编写类似的代码

```
Base *basePtr = new Derived();
//do something with basePtr

// Now somehow destroy Derived while keeping Base - call ~Derived() only, 
// line below however will call both ~Derived() and ~Base() - how it can be done?
dynamic_cast<Derived*>(basePtr)->~Derived(); 
```

因此，执行上述代码后，basePtr 将仅指向 Base 对象，就像它是由

```
Base *basePtr = new Base(); 
```

加上在调用 new Derived() 和销毁 Derived 类之间操作 basePtr 引起的对 Base 对象的任何修改？

或者，这是禁止的，不可能做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:01:41.977

不，这是不可能的。该标准要求销毁 Derived 对象会销毁整个对象，包括 Base 子对象。根据 C++ 对对象生命周期的理解，其他任何事情都不会是破坏。

根据您要实现的目标，请考虑先将 Base 从派生中复制出来

```
std::unique_ptr<Base> basePtr(new Derived());
//do something with basePtr

basePtr.swap(std::unique_ptr<Base> (new Base(*basePtr))); //splice the Base part out of the derived object

//basePtr now points to the spliced Base object. 
```

另一种方法是将派生的附加成员保存在一个`boost::optional`（或只是一个pimpl）中并重置它以获得仍然具有其基类部分的“剥离”派生对象。然而，这不会影响虚函数调度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:56:48.640

析构函数以与构造相反的顺序自动调用。我不相信有任何方法可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:59:31.450

除非您的派生类与您的基类无关，否则这是不可能的。

析构函数以自动方式调用。显式调用析构函数可能会导致未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:18:18.790

当您提出问题时，不可能实现您的要求。除非您有内存泄漏，否则显式调用析构函数不会导致未定义行为的唯一情况是对象是由放置 new 创建的。即使这样，调用析构函数也会自动调用每个成员和基类的析构函数。

这是应该的。否则很难编写一个正确的容器类或内存管理器。

标准说对象的生命周期在它进入析构函数时就结束了。它不会成为基类对象。它不再是一个对象，完全。另外，如果不是这种情况，那么在这种技巧之后，从多个基派生的类的状态会是什么？

归根结底，对这种功能的“需求”是糟糕设计的标志。我猜你的用例更可能需要组合。看看你是否不能用一个新的类来解决它您当前的派生类。这样您就可以在不接触底座的情况下移除（和破坏）这些子对象。

# c++ - C++11的构造函数中的大括号参数是什么

> ID：15883586
> 
> 赞同：7
> 
> 时间：2013-04-08T15:50:13.213
> 
> 标签：c++, c++11

我从一些算法书籍中阅读了 Queue 的实现，有一个片段对我来说是新的/有趣的，但我不明白。我认为这是新的东西，比如 C++11 中向量的初始化列表，但由于代码的上下文，我没有那么自信。任何人都可以阐明或提供一些参考吗？

```
template <typename T>
class Queue {
    private:
        size_t head, tail, count;
        vector<T> data;
    public:
        Queue(const size_t &cap=8) : head(0),tail(0),count(0),data({cap}) {}
        //... more interfaces
        //...
} 
```

有问题的部分是数据（{cap}），这是什么？它将向量的大小调整为上限？（很明显，代码的作者打算在构造数据时给数据一个大小。）

编辑：阅读第一个答案和测试后，我们知道这本书的片段中有错误。它打算给出一个初始上限，但它使用了错误的 {}。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:55:33.957

那就是*统一初始化*，一个新的 C++11 特性。但是，可以说在您的示例中以正确的方式使用它。它应该是：

```
Queue(const size_t &cap=8) : head(0),tail(0),count(0),data(cap) {}
//                                                        ^^^^^ 
```

因为目的是调用`std::vector<>`接受向量初始大小的构造函数。以这种方式调用它：

```
data{cap} 
```

或者这样：

```
data({cap}) 
```

导致构造函数接受一个`std::initializer_list`被选取（初始化列表是 C++11 的另一个新特性，与大括号初始化密切相关），导致一个向量初始化为一个值为`cap`.

[您可以在此实时示例](https://ideone.com/kocJIk)中验证上述声明（代码报告如下）：

```
#include <vector>

struct X
{
    X(int s) : v1({s}), v2{s}, v3(s) { }
    std::vector<int> v1;
    std::vector<int> v2;
    std::vector<int> v3;
};

#include <iostream>

int main()
{
    X x(42);
    std::cout << x.v1.size() << std::endl; // Prints 1
    std::cout << x.v2.size() << std::endl; // Prints 1
    std::cout << x.v3.size() << std::endl; // Prints 42
} 
```

# .htaccess - 301 重定向 - 旧网址中的变量

> ID：15883595
> 
> 赞同：1
> 
> 时间：2013-04-08T15:50:57.457
> 
> 标签：.htaccess, mod-rewrite, joomla, http-status-code-301

我在 Joomla 网站上有几个已编入索引的 url，我需要 301 将它们重定向到一些新页面。旧 URL 的格式如下：

[http://www.mydomain.com/en/wfmenuconfig/family/family-disease/177-category-english?start=20](http://www.mydomain.com/en/wfmenuconfig/family/family-disease/177-category-english?start=20)

我希望它去：

[http://www.mydomain.com/en/family-members/family-disease](http://www.mydomain.com/en/family-members/family-disease)

我尝试使用：

```
RewriteCond %{QUERY_STRING} ^start=(.*)$
RewriteRule ^/en/wfmenuconfig/family/family-disease/177-category-english$ http://www.www.mydoamin.com/en/family-members/family-disease%1 [R=301,L] 
```

我在这里尝试了几个答案，但似乎没有任何效果。

[htaccess 301 重定向动态网址](https://stackoverflow.com/questions/1513164/htaccess-301-redirect-dynamic-url)

和

[301 基于 .htaccess 中的 GET 变量重定向 URL](https://stackoverflow.com/questions/871511/301-redirecting-urls-based-on-get-variables-in-htaccess)

有什么想法我接下来应该尝试什么？（我尝试过正常的重定向 301）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:25:38.643

新 URL 中没有查询字符串，因此它只是剥离了最后一个 URL 路径部分。如果你想要它硬编码

```
RewriteCond %{QUERY_STRING} ^start=
RewriteRule ^en/wfmenuconfig/family/family-disease/177-category-english$ /en/family-members/family-disease? [R,L] 
```

或者更灵活一点

```
RewriteCond %{QUERY_STRING} ^start=
RewriteRule ^en/wfmenuconfig/family/family-disease/.+$ /en/family-members/family-disease? [R,L] 
```

或者如果你只想在之后保持两个级别`en/wfmenuconfig`

```
RewriteCond %{QUERY_STRING} ^start=
RewriteRule ^en/wfmenuconfig/(.+?/.+?)/ /en/$1? [R,L] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:19:04.780

你几乎明白了。您需要从规则模式中删除前导斜杠，因为在从 htaccess 文件应用规则时，它已从 URI 中删除：

```
RewriteCond %{QUERY_STRING} ^start=(.*)$ 
RewriteRule ^en/wfmenuconfig/family/family-disease/177-category-english$ /en/family-members/family-disease%1? [R=301,L] 
```

您也不需要`http://www.www.mydoamin.com`钻头（2 套`www`）。在您的目标末尾，您有`family-disease%1`，这意味着如果`start=20`您的 URL 的末尾看起来像：`family-disease20`。那正确吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:58:09.417

如果您只想重定向`http://www.mydomain.com/en/wfmenuconfig/family/family-disease/177-category-english?start=$var`到`http://www.mydomain.com/en/family-members/family-disease`，那么您必须尝试以下指令：

```
# once per .htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{QUERY_STRING} start=([0-9]*)
RewriteRule ^en/wfmenuconfig/family/family-disease/177-category-english /en/family-members/family-disease [R=301,L] 
```

但如果这不是你想要的，而是重定向`http://www.mydomain.com/en/wfmenuconfig/family/family-disease/177-category-english?start=$var`到，`http://www.mydomain.com/en/family-members/family-disease$var`那么你可以检查这个：

```
# once per .htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{QUERY_STRING} start=([0-9]*)
RewriteRule ^en/wfmenuconfig/family/family-disease/177-category-english /en/family-members/family-disease%1 [R=301,L] 
```

* * *

现在，如果它可以工作，请再试一试。如果不是，请找出任何可疑的为什么此代码不起作用：

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /en/

RewriteCond %{QUERY_STRING} start=([0-9]*)
RewriteRule ^wfmenuconfig/family/family-disease/177-category-english /family-members/family-disease [R] 
```

如果`http://www.mydomain.com/en/wfmenuconfig/family/family-disease/177-category-english?start=$AnyNumber`它正在重定向`http://www.mydomain.com/en/family-members/family-disease`，请确保您的网络服务器具有**mod_rewrite**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T15:20:39.417

我只是想把它扔在那里，我也很难让 RewriteRule 工作。我有一个从 .asp 页面升级到 WordPress 支持的站点的客户端。我必须做的是在“# BEGIN WordPress”部分之前的 htaccess 文件中插入 RewriteCond 和 RewriteRule。现在它可以正常工作了。

这发布得很晚，但希望它可以帮助其他人遇到同样的问题。

不工作：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
RewriteCond %{QUERY_STRING} ^var=somestring$ [NC]
RewriteRule ^oldpage\.asp$ http://www.domain.com/newpage? [R=301,L] 
```

是否有效：

```
RewriteCond %{QUERY_STRING} ^var=somestring$ [NC]
RewriteRule ^oldpage\.asp$ http://www.domain.com/newpage? [R=301,L]
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

操作顺序必须很重要 =)

# ios - flexslider 停止滑动并在两个 ios 手机间隙中潜水图像

> ID：15883596
> 
> 赞同：0
> 
> 时间：2013-04-08T15:51:06.783
> 
> 标签：ios, cordova, slider, touch, flexslider

如果您正在使用小幻灯片，您会注意到它们经常在幻灯片中途停止。我使用幻灯片而不是褪色。我已经在基本的 flexslider 示例上对此进行了测试。如果您将图片滑动到 50% 并且将手指从幻灯片上移开，直接向下移动，那么它是否是一个大或小幻灯片并不重要，那么图像会被 50% 的图像卡住。这是一个错误还是有解决办法吗？在 ios 6 手机间隙上测试

编辑它必须是 50% 你它无处不在你开始滑动图像并将手指移出滑块然后滑动动画停止并且你被两个图像卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:15:23.923

解决方案：它目前是一个错误，根据 github 一个小错误，没有人能很快修复它。但是我在转换后的移动 div 上创建滑块时遇到了几个闪烁错误......

因此，我的解决方案是使用 iosslider。这是完美的！我尝试了所有的滑块，这个没有任何错误！！！..它免费供个人使用，但不能免费用于商业：/无论如何它是最好的，而且真的没有替代我需要滑块的替代品。

如果您继续下载 iosslider，请用 +1 表示感谢 :) 我保证您会满意的！

# c# - 访问 XSLT 文件作为来自同一项目的资源？

> ID：15883598
> 
> 赞同：6
> 
> 时间：2013-04-08T15:51:09.247
> 
> 标签：c#, .net, xml, visual-studio, xslt

我有一个要加载并用于转换 XML 文件的 XSLT 文件。我已将该文件添加到与使用它的代码相同的项目中，并将其放在“资源”文件夹中，并将构建操作设置为“资源”。

这是尝试访问该文件的代码：

```
 XslCompiledTransform myXslTransform = new XslCompiledTransform();

        myXslTransform.Load(@"[projectName];component/Resources/OrderManagement/OrderOverview.xslt"); 
```

... 其中 [projectName] 是项目的名称。但是，这似乎不起作用。我玩过不同的路径，但不知何故，我似乎没有做对。我确信这只是一件小事，但我在互联网（或这里）上找到的所有文章都没有帮助我。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:01:39.810

一位同事帮助我找到了解决方案。我们通过项目的属性添加了资源，以便我可以轻松访问其内容并使用以下代码。

```
using (var reader = new StringReader(Resources.OrderOverview)) {
  using (XmlReader xmlReader = XmlReader.Create(reader)) {
    myXslTransform.Load(xmlReader);
    myXslTransform.Transform(fileName, arguments, xmlTextWriter);
  }
} 
```

这与 outcoldman 建议的内容非常相似，只是资源访问方式不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T16:24:32.300

将构建操作从 Resource 更改为 Embedded Resource，之后您可以执行类似的操作

```
XslCompiledTransform myXslTransform = new XslCompiledTransform();

var assembly = typeof(SomeTypeFromAssemblyWithResource).Assembly;
using (var stream = assembly.GetManifestResourceStream("Resources.OrderManagement.OrderOverview.xslt"))
{
    using (var xmlReader = XmlReader.Create(stream))
    {
        myXslTransform.Load(xmlReader );
    }
} 
```

dll 中的资源名称可能很棘手，因此您可能想首先使用[Assembly.GetManifestResourceNames](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx)知道资源名称。编译器根据文件夹和程序集生成名称。

# android - Android SQCipher 我需要关闭数据库吗？

> ID：15883603
> 
> 赞同：4
> 
> 时间：2013-04-08T15:51:23.927
> 
> 标签：android, sqlite, sqlcipher

我已经阅读了很多关于在 android 中使用标准 SQLiteDatabase 的内容，似乎最好的方法是保留一个 SQLiteOpenHelper 实例，并且永远不要关闭返回的 SQLiteDatabase 对象，也不要关闭 SQLiteOpenHelper。问题是这些准则在使用 SQCipher 加密库时是否有效？似乎 SQCipher 包中 SQLiteOpenHelper 的 close() 方法不是空的，并且确实释放了一些东西。从不调用此方法是否安全？

[下面是来自 Github ( http://goo.gl/u4L0C](http://goo.gl/u4L0C) )的 SQLiteDatabase.close() 方法的实际代码：

```
public void close() {

    if (!isOpen()) {
        return; // already closed
    }
    lock();
    try {
        closeClosable();
        // close this database instance - regardless of its reference count value
        onAllReferencesReleased();
    } finally {
        unlock();
    }
}

private void closeClosable() {
    /* deallocate all compiled sql statement objects from mCompiledQueries cache.
     * this should be done before de-referencing all {@link SQLiteClosable} objects
     * from this database object because calling
     * {@link SQLiteClosable#onAllReferencesReleasedFromContainer()} could cause the database
     * to be closed. sqlite doesn't let a database close if there are
     * any unfinalized statements - such as the compiled-sql objects in mCompiledQueries.
     */
    deallocCachedSqlStatements();

    Iterator<Map.Entry<SQLiteClosable, Object>> iter = mPrograms.entrySet().iterator();
    while (iter.hasNext()) {
        Map.Entry<SQLiteClosable, Object> entry = iter.next();
        SQLiteClosable program = entry.getKey();
        if (program != null) {
            program.onAllReferencesReleasedFromContainer();
        }
    }
} 
```

# sql - SQL 浮点精度限制为 6 位

> ID：15883606
> 
> 赞同：5
> 
> 时间：2013-04-08T15:51:26.373
> 
> 标签：sql, excel, tsql, excel-formula

我在 excel 中有以下一组计算，我希望能够在存储过程中使用它们。

Excel

```
CellA: 45/448.2 = 0.100401606425703
CellB: 1-CellA = 0.899598393574297
CellC: 1-CellB = 0.100401606425703
CellD: CellC * 448.2 = 45.000000000000000 
```

在 SQL 中，我正在执行以下操作：

```
declare @a decimal(18,15) = 45/448.2  
declare @b decimal(18,15) = 1-@a
declare @c decimal(18,15) = 1-@b
declare @d decimal(18,15) = @c * 448.2 
```

我也尝试过在一行中运行计算

```
declare @e decimal(18,15) = (1-(1-(45/448.2)))*448.2 
```

当我返回值时，SQL 给了我以下信息：

```
@a: 0.100401000000000
@b: 0.899599000000000
@c: 0.100401000000000
@d: 44.999728200000000

@e: 44.999728200000000 
```

我已经尝试在 SQL 中调整小数的精度，但没有任何区别，它只返回小数的前 6 位。

Excel 在运行公式时是否进行任何优化？

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T16:09:55.343

即使只是您的第一行也足以说明问题：

```
declare @a decimal(18,15) = 45/448.2  
print @a 
```

给

```
---------------------------------------
0.100401000000000 
```

这是因为数据类型。当你说

```
448.2 
```

它（根据[文档](http://msdn.microsoft.com/en-us/library/ms179899.aspx)）被解释为类型的常量**`decimal`**，并且[也根据文档](http://msdn.microsoft.com/en-us/library/ms187746.aspx)，

> 在 Transact-SQL 语句中，带小数点的常量会自动转换为数字数据值，使用所需的最小精度和小数位数。例如，常数 12.345 被转换为精度为 5、小数位数为 3 的数值。

`448.2`也是如此`decimal(4,3)`。`45`is **`integer`**，当与 a 结合时，它`decimal` [被视为具有 10 的精度和 0 的比例](http://msdn.microsoft.com/en-us/library/ms179899.aspx)。当我们分开时，[规则](http://msdn.microsoft.com/en-us/library/ms179899.aspx)说

```
Operation     Result precision                        Result scale
e1 / e2       p1 - s1 + s2 + max(6, s1 + p2 + 1)      max(6, s1 + p2 + 1) 
```

在这种情况下，它给出了 的结果精度`10 - 3 + 0 + max(6, 0 + 3 + 1)`和比例`max(6, 0 + 3 + 1)`，得出`13`和`6`。

这个结果比例`6`就是为什么结果只有这六个小数位。

修复它的方法是在对它们进行操作之前将您的操作数转换为适当的类型；例如，这里有两种方法：

强制将数字视为浮点数：

```
declare @a decimal(18,15) = 45/448.2e0  
select @a

---------------------------------------
0.100401606425703 
```

显式提供小数刻度：

```
declare @a decimal(18,15) = 45/cast(448.2 as decimal(18,10))
select @a

---------------------------------------
0.100401606425703 
```

# javascript - 为什么我的 Dojo 切换监听器不起作用？注册表未定义错误

> ID：15883609
> 
> 赞同：0
> 
> 时间：2013-04-08T15:51:36.613
> 
> 标签：javascript, events, dojo, aop

我有一个 ID 为“universalPushSwitch”的开关我还有一个监听器，如果开关状态发生变化，它应该会发出警报：

```
dojo.require("dijit/registry");
dojo.require("dojo/ready");
dojo.require("dojox/mobile/ListItem");
dojo.require("dojo/aspect");

dojo.ready(function(){
  aspect.after(registry.byId("universalPushSwitch"), "onStateChanged", 
        function(newState){
        alert(newState);
    }
)}); 
```

但警报永远不会被触发。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:26:16.337

尝试

```
dojo.byId("universalPushSwitch") or dijit.registry.byId("universalPushSwitch") 
```

代替

```
registry.byId("universalPushSwitch") 
```

# c# - Directsound 对数音量到线性音量滑块

> ID：15883611
> 
> 赞同：1
> 
> 时间：2013-04-08T15:51:43.247
> 
> 标签：c#, directx, directsound

我正在使用 DirectX.DirectSound 开发音乐播放器。我的音量有问题。直接音量是对数。这意味着对于无声的声音，对幅度的微小变化比对大声的声音更敏感。这也意味着使用线性音量滑块，我们对音量变化有一种对数感觉，而这感觉不太对劲。我的问题是：我怎样才能使它成为线性的？直到这里我的代码是：

```
 if (trkBalance.Value == trkBalance.Minimum)
            {
                foreGroundSound.Volume = (int)DS.Volume.Min;

            }
            else if (trkBalance.Value == trkBalance.Maximum)
            {
                foreGroundSound.Volume = (int)DS.Volume.Max;
            }
            else
            {
               foreGroundSound.Volume = (int)(-5000 * Math.Log10(100 - trkBalance.Value));
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:52:05.750

有一个经验法则来确定感知响度：

> 10 dB (doubleValue) 的差异导致声音是原始源的两倍/一半。

考虑到这一点，我们可以创建一个将衰减映射到声压级的公式。

但首先我们必须计算实际衰减（作为分数）。DirectSound 可以将声音衰减 100 dB，即`1/2^(100/doubleValue)`. 这是最小轨迹栏值的值。最大值为 1（无变化）。所以总的来说：

```
doubleValue = 10;
minimumAttenuation = 1/2^(100/doubleValue)
attenuation = minimumAttenuation + trkBalance.Value / 100 * (1 - minimumAttenuation); 
```

现在我们有一个有效范围内的值。现在我们需要找到这种衰减的声压级。

我们知道响度每 10 分贝（doubleValue）翻一番：

```
attenuation = 2^(db/doubleValue) //ln
ln(attenuation) = db / doubleValue * ln(2)
db = doubleValue * ln(attenuation) / ln(2) 
```

而且由于 DirectSound 需要数百分贝，您可以使用

```
foreGroundSound.Volume = db * 100; 
```

* * *

这些只是基于维基百科信息的一些理论思想。它可能会或可能不会起作用。去尝试一下。

# delphi - delphi中的向导问题

> ID：15883613
> 
> 赞同：-1
> 
> 时间：2013-04-08T15:51:47.497
> 
> 标签：delphi, winapi

我正在使用delphi，我正在尝试制作一个向导界面。我正在考虑为向导的每个步骤制作单独的表单，并且当用户单击“下一步”时，活动表单。问题我已将窗口缩小到最大，然后在下一个表单上单击下一步，我无法查看底部的按钮，直到我调整表单大小。

我的问题是，如果我缩小表单并点击下一个按钮，它会将我带到另一个按钮（下一个、返回、完成），直到我调整第二个表单的大小

这就是问题的样子：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:07:54.110

在设计向导时，我更喜欢使用页面控件。

基本思想是：每个选项卡都是一个向导页面。当用户单击“下一步”时，您会在页面控件中显示下一个选项卡并隐藏前一个选项卡。

请注意，如果您的页面太多，管理它们将是一场噩梦。然后你可以使用 Frames 而不是 Page Control。

@David-Heffernan 在这里解释过：[在 delphi 7 中制作向导界面](https://stackoverflow.com/a/8384731/1022219)

为了使其可重用，您可以创建一个定义基本向导功能的接口，例如：

*   转到下一页
*   转到上一页
*   页面加载时
*   在页面卸载
*   在向导启动时
*   在向导结束时

等等

# html - 像 ios 主屏幕一样居中的 CSS 框

> ID：15883622
> 
> 赞同：0
> 
> 时间：2013-04-08T15:52:08.793
> 
> 标签：html, css

如果没有行中的最后一项，我如何获得此结果：

```
margin-right: 30px; 
```

在 CSS 中，现在我使用：

```
margin-right:                                                   30px;
margin-bottom:                                                  30px; 
```

它应该像 ios 主屏幕

[http://www4.picturepush.com/photo/a/12640862/img/12640862.png](http://www4.picturepush.com/photo/a/12640862/img/12640862.png) [http://www3.picturepush.com/photo/a/12640866/img/12640866.png](http://www3.picturepush.com/photo/a/12640866/img/12640866.png)

html:

```
<div class="home-main">
        <a href="t1home" class="item"><h1>Hallo</h1></a>
        <a href="t1home" class="item"><h1>Hallo</h1></a>
        <a href="t1home" class="item"><h1>Hallo</h1></a>
        <a href="t1home" class="item"><h1>Hallo</h1></a>
</div> 
```

CSS：

```
 .home-main {
    width:                                                          90%;
    max-width:                                                      960px;
    min-height:                                                     100px;
    margin:                                                         0 auto;
    overflow:                                                       hidden;
    text-align: center;
}
.home-main a {
    width:                                                          126px;
    min-height:                                                     126px;
    max-height:                                                     166px;
    margin-right:                                                   30px;
    margin-bottom:                                                  30px;
    background-color:                                               #777;
    float:                                                          left;
    color:                                                          #fff;
    text-decoration:                                                none;
}
.home-main a:nth-last-child(1){
    margin-right:                                                   0;
}
.home-main a h1 {
    width:                                                          100%;
    height:                                                         33px;
    margin:                                                         0;
    margin-top:                                                     126px;
    padding-top:                                                    7px;
    font-size:                                                      19px;
    text-align:                                                     center;
    background-color:                                               #222;
}
@media screen and (width:320px){
    .home-main a:nth-child(even) {
        margin-right:                                               0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:59:22.170

我将演示使用 JavaScript 完成的一些事情，因为这是 iOS 上的默认设置。我只使用 jQuery 来切换文档的就绪状态，但您也可以将其添加到 body-tag 中。之后，您将不需要 jQuery 本身。

我对 JavaScript 所做的是`left-padding`基于对仍然打开的剩余空间的划分添加额外的内容，因此它将浮动推到水平中间。

如果 JavaScript 有问题，我会删除答案。

这是[JSfiddle](http://jsfiddle.net/Allendar/xQegJ/5/)

**HTML**

```
<div id="wrapper">
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="floatClear"></div>
</div> 
```

**CSS**

```
* {
    box-sizing: border-box;
}

#wrapper {
    width: 90%;
    border: 1px solid red;
    padding: 5px;
}

.block {
    width: 130px;
    height: 170px;
    background-color: grey;
    float: left;
    margin: 5px 5px 5px 5px;
}

.floatClear {
    clear: both;
} 
```

**JavaScript**

```
$(document).ready(function () {
    var wrapper = document.getElementById('wrapper');

    var wrap_w = wrapper.offsetWidth - (5*2); // minus padding
    var block_w = wrapper.getElementsByTagName('div')[0].offsetWidth + (5*2); // plus margin

    var remainder = wrap_w % block_w;
    var left_add = Math.floor(remainder / 2); // what to add left

    wrapper.style.paddingLeft = (left_add + 5) + 'px';

    //console.log(remainder);
}); 
```

祝你好运！

# mysql - MySQL不正确的输出不确定查询有什么问题

> ID：15883623
> 
> 赞同：1
> 
> 时间：2013-04-08T15:52:10.633
> 
> 标签：mysql

尝试编写并执行一个 MySQL 查询来显示所有电影的电影编号、电影名称、电影成本和电影类型，这些电影要么是动作电影，要么是喜剧电影，而且成本低于 50 美元。按流派升序对结果进行排序。

```
mysql> select mv_no, mv_name, mv_cost, mv_genre from movie    
    -> where mv_genre = ('Action' or 'Comedy') and mv_cost < 50    
    -> order by mv_genre;

+-------+----------------------------+---------+----------+
| mv_no | mv_name                    | mv_cost | mv_genre |    
+-------+----------------------------+---------+----------+    
| 1245  | Time to Burn               | 45.49   | ACTION   |    
| 1237  | Beatnik Fever              | 29.95   | COMEDY   |    
| 1239  | Where Hope Dies            | 25.49   | DRAMA    |    
| 1234  | The Cesar Family Christmas | 39.95   | FAMILY   |    
+-------+----------------------------+---------+----------+
4 rows in set, 10 warnings (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:55:25.837

改成：

```
select mv_no, mv_name, mv_cost, mv_genre from movie

where (mv_genre = 'Action' or mv_genre = 'Comedy') and mv_cost < 50

order by mv_genre; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:55:08.333

您是否尝试过使用`IN`子句：

```
select mv_no, mv_name, mv_cost, mv_genre 
from movie
where mv_genre in ('Action', 'Comedy') 
  and mv_cost < 50 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/6654c/2)

或者您可以更改使用该`OR`子句的方式：

```
select mv_no, mv_name, mv_cost, mv_genre 
from movie
where (mv_genre = 'Action' or mv_genre= 'Comedy') 
  and mv_cost < 50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:55:34.797

该错误似乎出现在您的磨损条款中，您可以使用`IN`类似：

```
WHERE mv_genre IN ('Action', 'Comedy') 
```

您当前的子句 of`mv_genre = ('Action' or 'Comedy')`不计算`if the genre is 'Action' or the genre is 'Comedy'`它实际上只是意味着您要评估是否`'Action' OR 'Comedy'`为真，然后将结果与`mv_genre`永远不会返回您期望的结果进行比较。您可以使用列表轻松地与多个值进行比较，`IN`或者您可以更详细地进行比较，例如：

```
WHERE (mv_genre = 'Action' OR mv_genre = 'Comedy') 
```

无论您喜欢哪个并满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:56:08.207

您的查询应该是

```
mysql> select mv_no, mv_name, mv_cost, mv_genre from movie
   -> where mv_genre IN ('Action', 'Comedy') and mv_cost < 50
    -> order by mv_genre; 
```

# php - mySQL 复杂的条件连接查询以提高多个查询和 PHP 的效率

> ID：15883624
> 
> 赞同：0
> 
> 时间：2013-04-08T15:52:10.813
> 
> 标签：php, mysql, sql, codeigniter, join

奇怪的是，我用mySQL做了很多开发，今天遇到的一些事情从来没有遇到过。

所以，我有一个 user_items 表

```
ID | name
---------
1  | test 
```

然后我有一个 item_data 表

```
ID | item | added | info
-------------------------
1  | test | 12345 | important info
2  | test | 23456 | more recent important info 
```

然后我有一个电子邮件表

```
ID | added | email
1  | 12345 | old@b.com
2  | 23456 | a@b.com
3  | 23456 | b@c.com 
```

和一个 emails_verified 表

```
ID | email
-----------
1  | a@b.com 
```

现在我很欣赏这些表的设置可能效率不高，但这不能改变，而且比看起来要复杂得多。

我想要做的如下。我希望能够搜索用户项目并显示相关信息，以及相关的任何电子邮件，以及显示电子邮件是否已通过验证。

```
user_items.name = item_data.item
item_data.added = emails.added
emails.email = emails_verified.email 
```

因此，对于用户项目 1，进行测试。我希望能够返回其 ID、名称、**最新**信息、最新电子邮件及其验证状态。

所以我想回来

```
ID => 1
name => test
information => more recent important info
emails => array('0' => array('email' => 'a@b.com' , 'verified' => 'YES'),'1' => array('email' => 'b@c.com' , 'verified' => 'NO')) 
```

现在我可以相对轻松地使用多个查询来做到这一点。然而，我的研究表明，与使用一个（尽管非常复杂）带有大量连接语句的 mysql 查询相比，这要耗费更多的资源/时间。

使用一个查询的原因也将是有用的（我相信）是因为我可以相对容易地添加搜索功能 - 添加到查询复杂的 where 语句。

为了使事情更复杂，我正在使用 CodeIgniter。我不能太挑剔:) 所以任何无 CI 答案仍然非常有用。

到目前为止我得到的代码如下。然而，“我不太确定我在做什么”。

```
function test_search()
{
    $this->load->database();
    $this->db->select('user_items.*,item_data.*');
    $this->db->select('GROUP_CONCAT( emails.email SEPARATOR "," ) AS emails', FALSE);
    $this->db->select('GROUP_CONCAT( IF(emailed.email,"YES","NO") SEPARATOR "," ) AS emailed', FALSE);

    $this->db->where('user_items.name','test');
    $this->db->join('item_data','user_items.name = item_data.name','LEFT');
    $this->db->join('emails','item_data.added = emails.added','LEFT');
    $this->db->join('emailed','emails.email = emailed.email','LEFT');
    $this->db->group_by('user_items.name');
    $res = $this->db->get('user_items');

    print_r($res->result_array());
} 
```

对此的任何帮助将不胜感激。

这真的是复杂的 sql - 这真的是实现此功能的最佳方式吗？

谢谢

更新

继 Cryode 的出色回答之后。

唯一的问题是它只返回一封电子邮件。但是，通过使用 GROUP_CONCAT，我能够将所有电子邮件和所有 email_verified 状态转换为一个字符串，然后我可以使用 PHP 进行分解。

为了澄清是子查询，

```
SELECT item, MAX(added) AS added
            FROM item_data
            GROUP BY item 
```

本质上是创建一个临时表？

[与此处](http://murrayhopkins.wordpress.com/2008/10/28/mysql-left-join-on-last-or-first-record-in-the-right-table/)概述的类似

当然，子查询是必要的，以确保您只从 item_data 获得一行 - 最近的一行？

最后回答有关设计不佳的数据库的注释。

数据库是这样设计的，因为 item_data 会定期更改，但我们希望保留历史记录。

电子邮件是项目数据的一部分，但因为可以有任意数量的电子邮件，并且我们希望它们是可搜索的，所以我们选择了一个单独的表格。否则，电子邮件必须在 item_data 表中进行序列化。

emails_verified 表是独立的，因为一封电子邮件可以与多个项目相关联。

鉴于此，尽管（显然）查询很复杂，但它似乎仍然是一个合适的设置..？

谢谢

最后更新

Cryodes 答案通常是与数据库架构相关的非常有用的答案。

稍微概念化一下，如果我们将版本 ID 存储在 user_items 中，我们就不需要子查询。

因为版本之间的数据不一定一致，所以我们将废弃他的建议项目表（对于这种情况）。然后我们可以从 item_data 表中获取正确的版本我们还可以根据版本 id 获取 items_version_emails 行，并从我们的“电子邮件”表中获取相应的电子邮件。

IE 完美运行。

这样做的缺点是，当我在 item_data 中添加新版本数据时，我必须使用已插入的新版本更新 user_items 表。

这很好，但作为一个概括点，什么更快？我认为建议这种设置的原因是它更快 - 每次添加新数据时进行额外的更新是值得的，以在显示大量行时保存潜在的数百个子查询。尤其是考虑到我们显示的数据多于更新数据。

只是为了了解在未来设计数据库架构时是否有人有任何链接/一般指导，说明什么更快以及为什么这样我们都可以制作更好的优化数据库。

再次感谢 Cryode ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:55:26.787

使用您的数据库结构，这就是我想出的：

```
 SELECT ui.name, id.added, id.info, emails.email,
          CASE WHEN ev.id IS NULL THEN 'NO' ELSE 'YES' END AS email_verified
     FROM user_items AS ui
     JOIN item_data AS id ON id.item = ui.name
     JOIN (
            SELECT item, MAX(added) AS added
            FROM item_data
            GROUP BY item
        ) AS id_b ON id_b.item = id.item AND id_b.added = id.added
     JOIN emails ON emails.added = id.added
LEFT JOIN emails_verified AS ev ON ev.email = emails.email 
```

但正如其他人所指出的，数据库设计得很糟糕。此查询在具有大量数据的表上表现不佳，因为没有用于此目的的聚合函数。我知道在某些情况下，您几乎无法控制数据库设计，但如果您想真正创造最佳情况，您应该向任何*可以*控制它的人强调它可以改进。

可以进行的最大优化之一是将当前`item_data`ID 添加到`user_items`表中。这样子查询就没有必要了（因为现在我们基本上加入`item_data`了两次）。

由于子查询，将其转换为 CI 的查询构建器有点让人头疼。假设您只使用 MySQL 数据库，请坚持使用`$this->db->query()`.

**从您的编辑中添加：**

此查询每行返回一封电子邮件，它不会将它们组合在一起。我忽略了`CONCAT`这些东西，因为它是另一件减慢查询速度的事情——你的 PHP 可以更快地将电子邮件放在一起。

是的，子查询就是那一部分——查询中的查询（非常不言自明的名称：wink:）。我不会称它为创建临时表，因为这是您实际上可以做的事情。更像是检索表中的信息子集，并使用它有点像一个`WHERE`子句。子查询是在您的表中找到最新行的内容`item_data`，因为我们必须自己弄清楚（同样，正确的数据库设计会消除这一点）。

当我们说您可以优化您的数据库设计时，这并不意味着您不能以类似的方式对其进行设置。*您听起来好像根本*无法更改数据库。就整体方案而言，您的想法是正确的，只是实施得很差。

**数据库设计**

这就是我将如何布局。请注意，在不了解项目的全部范围的情况下，这可能需要修改。也可能不是 100% 世界上最好的优化——我愿意接受改进建议。你的旅费可能会改变。

### 用户项目

```
CREATE TABLE `users_items` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `item_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

定义基础项目和用户之间的关系。

### 项目

```
CREATE TABLE `items` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `item_name` varchar(50) NOT NULL DEFAULT '',
  `created_on` datetime NOT NULL,
  `current_version` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

您的项目表应该包含所有项目的基本信息——这些信息不会在每次修订的基础上发生变化。请注意该`current_version`列 - 这是您将存储版本表中的 ID 的位置，指示哪个是最新的（因此我们不必自己弄清楚）。

### 项目版本（历史）

```
CREATE TABLE `items_versions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `item_id` int(10) unsigned NOT NULL,
  `added` datetime NOT NULL,
  `info` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

这是您存储项目历史记录的地方——每次更新都会在此处创建一个新行。请注意，该`item_id`列将这一行与特定的基本项目联系起来。

### 电子邮件

```
CREATE TABLE `emails` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(100) NOT NULL DEFAULT '',
  `verified` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

由于电子邮件可以在多个产品之间共享，我们最终将使用所谓的**多对多**关系。电子邮件可以绑定到多个产品，一个产品可以绑定到多个电子邮件。在这里，我们定义了我们的电子邮件，并包含一`verified`列是否已通过验证。

### 项目电子邮件

```
CREATE TABLE `items_versions_emails` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `version_id` int(11) NOT NULL,
  `email_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

假设电子邮件与项目版本而非基础项目相关联，这就是您想要的结构。不幸的是，如果您有大量版本并且从不更改电子邮件，这将导致大量重复数据。所以这里有优化的空间。如果您将电子邮件绑定到基本项目，您将获得更少的重复数据，但您会丢失历史记录。所以有这个选项。但目标是展示如何建立数据库关系，而不是 100% 完美。

这应该为您提供一个如何更好地布置数据库结构的良好开端。

**另一个更新**

关于速度，插入一个新的项目版本，然后使用新版本 ID 更新相关的项目行将比要求子查询拉取最新更新提供更好的性能。您会注意到在原始结构的解决方案中，`item_info`表被连接了两次——一次连接最近的行，再次从最近的行中获取其余数据（由于工作方式`GROUP BY`，我们可以'不要在一个连接中得到它）。如果我们已经存储了最新版本的 ID，我们根本不需要第一次加入，这将显着提高您的速度（以及正确的索引，但这是另一课）。

我不建议放弃基`items`表，但这完全取决于您和您的应用程序的需求。如果没有基础项目，就没有真正的方法来跟踪该特定项目的历史。假设您要删除该`item_id`列，则版本中没有任何内容显示共同的祖先/历史。

# sql - 优化H2查询：SELECT COUNT(*) FROM table WHERE x=y

> ID：15883629
> 
> 赞同：0
> 
> 时间：2013-04-08T15:52:21.273
> 
> 标签：sql, h2

我有一个看起来像这样的查询：

```
EXPLAIN ANALYZE 
select count(*) from Table t 
where t.outcome='SUCCESS' 
```

“结果”列有一个索引。

H2 告诉我它使用索引，但我仍然得到接近全表扫描的结果，因为大多数行都设置了“成功”，并且基数非常低。

有没有办法加快这个速度？顺便说一句，正如文档所说，没有“WHERE”部分的查询非常快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:15:17.227

应该使用 3 个子查询：

```
select
  (select count(*) from table) - 
  (select count(*) from table where outcome<'SUCCESS') -
  (select count(*) from table where outcome>'SUCCESS')
as count 
```

这应该很快，因为第一部分是直接查找，另外两个查询应该很快（因为大多数`outcome`通常是“成功”）。

如果没有，您能否获取查询计划并将其添加到问题中（解释分析选择...）？

# php - 获取过去某个时间点 Facebook 对粉丝页面的点赞数

> ID：15883634
> 
> 赞同：0
> 
> 时间：2013-04-08T15:52:36.093
> 
> 标签：php, facebook, facebook-graph-api, facebook-like, java

我想**在过去的某个时间点计算 facebook 喜欢的粉丝页面**。我可以使用 facebook API 获得页面当前存在的喜欢的数量，但无论如何我可以在过去获得页面的喜欢。

现在，我正在使用 PHP 来获取当前存在的粉丝页面的喜欢我还想检查 java api 中是否有任何类似的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:15:29.593

对于您的第一个问题，简短的回答是否定的。页面所有者可以通过 Facebook Insights 查看此信息，但并非所有人都可以通过 API 使用这些信息。有关更多详细信息，请参阅此问题：

[如何通过 Graph API 或 FQL 获取历史“Facebook 页面点赞”数据](https://stackoverflow.com/questions/9405919/how-to-get-historical-facebook-page-likes-data-via-graph-api-or-fql)

对于第二个问题，您应该查看[Temboo](http://www.temboo.com)。Temboo 封装了 100 多个 API，包括 Facebook API，让您以您选择的语言访问这些 API。Temboo 目前拥有适用于 Java、PHP、Python、Ruby、Node.js、iOS 和 Android 的 SDK。

（全面披露：我在 Temboo 工作）

# c# - 将依赖属性绑定到当前 DataContext 属性

> ID：15883637
> 
> 赞同：1
> 
> 时间：2013-04-08T15:52:41.270
> 
> 标签：c#, wpf, mvvm, binding, dependency-properties

我一直试图在 WPF 中设置这个障碍，并且我认为我已经找到了一个解决方案，尽管它是一个丑陋的解决方案。

场景如下：

*   我有一个带有自定义依赖属性的自定义用户控件。
*   用户控件可以嵌套在我的其他用户控件中。
*   我的每个用户控件都有一个由定位器指定的数据上下文（我遵循 MVVM 模式）
*   我想将自定义依赖属性绑定到父视图模型中的值。

代码...

**父视图**

```
<UserControl DataContext="{Binding Source={StaticResource Locator}, Path=ParentControlLocator}">

    <my:Child Demo="{Binding Path=DataContext.DemoTextAlpha, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl, AncestorLevel=1}}" />

</UserControl> 
```

**父类视图模型**

```
public class ParentClassViewModel : BaseViewModel
{
    private string _demoTextAlpha = "Some Alpha text";

    public string DemoTextAlpha
    {
        get
        {
            return this._demoTextAlpha;
        }
        set
        {
            this._demoTextAlpha = value;
            this.NotifyPropertyChange("DemoTextAlpha");
        }
    }
} 
```

**子视图**

```
<UserControl DataContext="{Binding Source={StaticResource Locator}, Path=ChildControlLocator}">

    <TextBlock Text="{Binding Path=SomeProperty}" />

</UserControl> 
```

**子视图代码后面**

```
public partial class Child : UserControl
{
    public Child()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty DemoProperty =
           DependencyProperty.Register("Demo", 
                                       typeof(string), 
                                       typeof(Child),
                                       new FrameworkPropertyMetadata()
                                       {
                                           PropertyChangedCallback = OnDemoChanged,
                                           BindsTwoWayByDefault = true
                                       });

    public string Demo
    {
        get { return this.GetValue(DemoProperty).ToString(); }
        set { this.SetValue(DemoProperty, value); }
    }

    private static void OnDemoChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var control = (Child)d;
        var viewModel = (ChildViewModel)control.DataContext;

        viewModel.SomeProperty = (string)e.NewValue;
    }
} 
```

**子视图模型**

```
public class ChildViewModel : BaseViewModel
{
    private string _someProperty;

    public string SomeProperty
    {
        get 
        { 
            return _someProperty; 
        }
        set
        {
            _someProperty = value;
            this.NotifyPropertyChange("SomeProperty");
        }
    }
} 
```

好的，所以这个**WORKS**。我想要实现的是更好/更优雅的代码，特别是关于这个声明。

```
<my:Child Demo="{Binding Path=DataContext.DemoTextAlpha, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl, AncestorLevel=1}}" /> 
```

即使我可以忍受，就优雅而言，但现在困扰我的一件事是当我打字时

```
Path=DataContext.DemoTextAlpha 
```

当我尝试深入 DataContext 时，智能感知下降。所以我必须格外小心才能正确输入所有内容。

那么 - 是否有任何不同的方法可以使 DataContext 的属性出现在智能感知中，或者是否有另一种方法来实现我现在正在做的同样的事情？

谢谢。

**编辑澄清**

当我放这样的东西而不是像上面的例子中指定相对源时......

```
<my:Child Demo="{Binding DemoTextAlpha}"/> 
```

我收到一个错误...

```
System.Windows.Data Error: 40 : BindingExpression path error: 'DemoTextAlpha' property not found on 'object' ''ChildViewModel' (HashCode=34126977)'. BindingExpression:Path=DemoTextAlpha; DataItem='ChildViewModel' (HashCode=34126977); target element is 'Child' (Name=''); target property is 'Demo' (type 'String') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:57:38.777

（`DataContext`以及许多其他属性，例如`FontSize`）是沿可视树[“继承的” 。](http://msdn.microsoft.com/en-us/library/ms753197.aspx)因此：

```
<UserControl DataContext="{Binding Source={StaticResource Locator}, Path=ParentControlLocator}">
    <my:Child Demo="{Binding Path=DataContext.DemoTextAlpha, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl, AncestorLevel=1}}" />
</UserControl> 
```

与此完全相同：

```
<UserControl DataContext="{Binding Source={StaticResource Locator}, Path=ParentControlLocator}">
    <my:Child Demo="{Binding DemoTextAlpha}"/>
</UserControl> 
```

* * *

关于 Intellisense 支持，我不知道您使用的是哪个 VS 版本，但我使用的是带有 ReSharper 6.1 的 VS 2010 Pro，如果您指定`d:DataContext`值，它会添加 Intellisense 支持：

```
<UserControl x:Class="...etc."
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:TheViewModelNamespace"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" d:DataContext="{d:DesignInstance local:ViewModel}"> 
```

**编辑：**

好的..让我们分析一下你在这里做什么：

**1** - 将 UserControl 绑定到 ParentVM：

```
ParentVM -> UserControl 
```

**2** - 使用 RelativeSource 从 ParentVM 获取一些属性并将其放入您在 Child 控件中创建的自定义 DP

```
 ParentVM -> UserControl -> Child Control 
```

**3** - 在自定义 DP 的 OnPropertyChanged 中，将相同的值设置为 ChildVM

```
 ParentVM -> UserControl -> Child Control -> ChildVM 
```

您是否意识到您正在使用视图（用户控件、子控件）作为在 2 个视图模型之间共享某些属性的中间体？你为什么不只是

```
 ParentVM -> ChildVM 
```

哪个更容易、更干净、更真正的 MVVM？

要么直接从 ParentVM 引用 ChildVM，要么使用类似`Messenger`模式的东西在它们之间进行间接通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:58:46.110

DataContext 被继承：

```
<UserControl DataContext="{Binding Source={StaticResource Locator}, Path=ParentControlLocator}">

    <my:Child Demo="{Binding DemoTextAlpha}" />

</UserControl> 
```

如果在不同的情况下，您的子控件指定了不同的 DataContext 并且您仍然需要绑定到父控件的属性`DataContext`，则使用`ElementName`可能会更好：

```
<UserControl x:Name="Parent" DataContext="{Binding Source={StaticResource Locator}, Path=ParentControlLocator}">

    <my:Child Demo="{Binding Path=DataContext.DemoTextAlpha, ElementName=Parent}" />

</UserControl> 
```

# php - 上传图像并创建 zip 文件不起作用

> ID：15883638
> 
> 赞同：0
> 
> 时间：2013-04-08T15:52:41.933
> 
> 标签：php, mysql, zip

我试图上传一张图片并用这张图片创建一个 zip 文件，我在这里查看了任何代码，但我不太明白。请帮忙。

PHP

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<?
require('conecta.php');
$uploaddir = '/var/www/subirImagenBD/';
$fechaFoto=date('YmdHis').'_'.basename($_FILES['Foto']['name']);
   if (is_uploaded_file($_FILES['Foto']['tmp_name'])) {
        $uploadfile = $uploaddir . $fecha . $fechaFoto;
        move_uploaded_file($_FILES['Foto']['tmp_name'], $uploadfile);
    $cFoto=basename($_FILES['Foto']['name']);
   }
   echo $cFoto." guardada en ".$uploaddir. $fechaFoto."<br>";
   $cSQL="INSERT INTO FOTOS (NOMBRE,PIC) VALUES (?,?)";
   $stmt=$oConni->prepare($cSQL);
   $stmt->bind_param("ss", $fechaFoto, file_get_contents($uploaddir. $fechaFoto));
   $stmt->execute(); 
 /* 
   $zipFile = $fechaFoto;
$zipArchive = new ZipArchive();

if (!$zipArchive->open($zipFile, ZIPARCHIVE::OVERWRITE))
    die("Failed to create archive\n");

$zipArchive->addGlob($fechaFoto);
if (!$zipArchive->status == ZIPARCHIVE::ER_OK)
    echo "Failed to write local files to zip\n";

$zipArchive->close();*/

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:11:20.810

请参阅以下链接以获取压缩文件

[http://creativedev.in/2012/04/create-a-zip-file-in-php/](http://creativedev.in/2012/04/create-a-zip-file-in-php/)

希望能帮助到你

# javascript - Android Chrome 不断与我的 HTML5 网站崩溃 -- 如何调试它？

> ID：15883640
> 
> 赞同：4
> 
> 时间：2013-04-08T15:52:42.423
> 
> 标签：javascript, android, html, google-chrome

我已经建立了一个 HTML5 网站（或者更确切地说是您希望的 webapp），它在 Chrome 和 firefox 中运行良好。我想说唯一不同寻常的是，它使用

*   某些部分的 Google Closure（问题在最简单的非优化模式下仍然存在）
*   用于 2D 绘图的 HTML5 画布

现在我很好奇它是否会在我的 Galaxy Tab Tablett 上运行，而且确实如此。我能够设置远程调试工具[https://developers.google.com/chrome-developer-tools/docs/remote-debugging?hl=de](https://developers.google.com/chrome-developer-tools/docs/remote-debugging?hl=de)并调试我的代码以摆脱一些不起作用的东西适当地。但是我注意到，当我使用我的应用程序时，android-chrome 经常崩溃。然后我的桌面浏览器中的控制台抱怨 websocket 被关闭（这就是为什么我怀疑这确实是平板电脑端的问题）。

我想知道是什么让我的网站崩溃了，我有点担心我的 HTML/js 网站可以很容易地让像 chrome 这样的浏览器崩溃。我原以为它应该比这更稳定。

现在我想有一个调试问题的“入口”点：

*   是否有我可以以某种方式检查的 chrome for android 崩溃日志？
*   我可以以某种方式使其（通常是chrome或android）在错误消息上更加详细吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-30T10:54:47.627

您可以做几件事：

*   chrome://crashes 将列出它在选项卡崩溃时捕获的崩溃 - 您可能需要在设置中打开崩溃报告。您将无法修复它，但您可以向我们报告，以便我们查看是否存在问题。
*   使用 logcat 并查看跟踪输出中是否存在任何特定问题，例如 out of 错误消息。

# c++ - 需要改进我的代码的建议：搜索算法

> ID：15883645
> 
> 赞同：2
> 
> 时间：2013-04-08T15:53:04.710
> 
> 标签：c++, search, divide

我是 C++ 的新手，需要一些建议。在这里，我编写了一个代码来测量任意整数 x 在数组中出现的次数并输出所做的比较。

然而，我已经读过，通过使用多路分支（“分而治之！”）技术，我可以使算法运行得更快。

谁能指出我正确的方向我应该如何去做？

这是我所做的另一种方法的工作代码：

```
#include <iostream>
#include <cstdlib>
#include <vector>

using namespace std;

vector <int> integers;
int function(int vectorsize, int count);
int x;
double input;

int main()
{
cout<<"Enter 20 integers"<<endl;
cout<<"Type 0.5 to end"<<endl;

while(true)
{
cin>>input;

if (input == 0.5)
break;

integers.push_back(input);
}

cout<<"Enter the integer x"<<endl;
cin>>x;

function((integers.size()-1),0);

system("pause");

}

int function(int vectorsize, int count)
{
    if(vectorsize<0) //termination condition
{
    cout<<"The number of times"<< x <<"appears is "<<count<<endl;
    return 0;
}    

if (integers[vectorsize] > x)
{
    cout<< integers[vectorsize] << " > " << x <<endl;
}

if (integers[vectorsize] < x)
{
    cout<< integers[vectorsize] << " < " << x <<endl;
}
if (integers[vectorsize] == x)
{
    cout<< integers[vectorsize] << " = " << x <<endl;

    count = count+1;
}

return (function(vectorsize-1,count));
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:00:39.730

如果数组未排序，只需使用单个循环将每个元素与`x`. 除非您忘记告诉我们某些事情，否则我认为不需要任何更复杂的事情。

如果数组已排序，则存在具有更好渐近复杂度的算法（例如二进制搜索）。然而，对于一个 20 元素的数组，简单的线性搜索仍然应该是首选策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:00:59.053

如果您的数组是排序的，您可以使用分治策略：

[计算排序数组中键出现次数的有效方法](https://stackoverflow.com/questions/4322327/interview-question-efficient-way-to-count-occurences-of-a-key-in-a-sorted-array)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:48:25.380

分而治之算法只有在您可以消除一些工作，或者如果您可以在多个计算单元上并行化划分的工作部分时才有用。在您的情况下，第一个选项对于已经排序的数据集是可能的，其他答案可能已经解决了这个问题。

对于第二种解决方案，算法名称是 map reduce，它将数据集拆分为几个子集，将子集分配给尽可能多的线程或进程，并收集结果以“编译”它们（该术语实际上是“reduce”）有意义的结果。在您的设置中，这意味着每个线程将扫描自己的数组切片以计数项目，并将其结果返回给“reduce”线程，后者会将它们相加以返回最终结果。*不过，此解决方案仅对大型数据集有意义。*

在 SO 上有一些关于 mapreduce 和 c++ 的问题，但我会尝试在这里为您提供一个示例实现：

```
#include <utility>
#include <thread>
#include <boost/barrier>

constexpr int MAP_COUNT = 4;

int mresults[MAP_COUNT];

boost::barrier endmap(MAP_COUNT + 1);

void mfunction(int start, int end, int rank ){
    int count = 0;
    for (int i= start; i < end; i++)
        if ( integers[i] == x) count++;
    mresult[rank] = count;
    endmap.wait();
}

int rfunction(){
    int count = 0;
    for (int i : mresults) {
        count += i;
    }
    return count;
}

int mapreduce(){
    vector<thread &> mthreads;
    int range = integers.size() / MAP_COUNT;
    for (int i = 0; i < MAP_COUNT; i++ )
        mthreads.push_back(thread(bind(mfunction, i * range, (i+1) * range, i)));
    endmap.wait();
    return rfunction();
} 
```

`integers`填充向量后，调用上面定义的函数`mapreduce`，它应该返回预期的结果。如您所见，实现非常专业：

*   map 和 reduce 函数针对您的问题，
*   用于映射的线程数是静态的，
*   我按照你的风格使用了全局变量，
*   为方便起见，我使用了 a`boost::barrier`进行同步

但是，这应该让您对算法有所了解，以及如何将其应用于类似问题。

*警告：代码未经测试*。

# python - 使用 Python 命令模块的多行 shell 命令

> ID：15883651
> 
> 赞同：0
> 
> 时间：2013-04-08T15:53:22.877
> 
> 标签：python, gdal

我正在尝试编写一个 Python 函数，该函数使用 gdal 将给定的坐标系转换为另一个坐标系。问题是我试图将命令作为一个字符串执行，但在 shell 中，我必须在输入坐标之前按 enter。

```
x = 1815421
y = 557301

ret = []

tmp = commands.getoutput( 'gdaltransform -s_srs \'+proj=lcc +lat_1=34.03333333333333 
+lat_2=35.46666666666667 +lat_0=33.5 +lon_0=-118 +x_0=2000000 +y_0=500000 +ellps=GRS80 
+units=m +no_defs\' -t_srs epsg:4326 \n' + str(x) + ' ' + str(y) ) 
```

我尝试使用'\n'，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:29:14.783

我的猜测是您`gdaltransform`通过按 Enter 运行，并且程序本身从其标准输入读取坐标，而不是外壳：

```
from subprocess import Popen, PIPE

p = Popen(['gdaltransform', '-s_srs', ('+proj=lcc ' 
    '+lat_1=34.03333333333333 ' 
    '+lat_2=35.46666666666667 '
    '+lat_0=33.5 '
    '+lon_0=-118 +x_0=2000000 +y_0=500000 +ellps=GRS80 '
    '+units=m +no_defs'), '-t_srs', 'epsg:4326'],
    stdin=PIPE, stdout=PIPE, universal_newlines=True) # run the program
output = p.communicate("%s %s\n" % (x, y))[0] # pass coordinates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:04:57.137

```
from subprocess import *

c = 'command 1 && command 2 && command 3'
# for instance: c = 'dir && cd C:\\ && dir'

handle = Popen(c, stdin=PIPE, stderr=PIPE, stdout=PIPE, shell=True)
print handle.stdout.read()
handle.flush() 
```

如果我没记错的话，命令将通过“会话”执行，从而在命令之间保留您需要的任何信息。

更准确地说，使用`shell=True`（从我一直以来的观点）是，如果给定一串命令而不是列表，则应该使用它。如果您想使用列表建议，请执行以下操作：

```
import shlex
c = shlex.split("program -w ith -a 'quoted argument'")

handle = Popen(c, stdout=PIPE, stderr=PIPE, stdin=PIPE)
print handle.stdout.read() 
```

然后捕获输出，或者您可以使用开放流并使用`handle.stdin.write()`，但这有点棘手。

除非你只想执行、阅读和死亡，`.communicate()`是完美的，或者只是`.check_output(<cmd>)`

`Popen`在这里可以找到很好的信息n如何工作（虽然不同的主题）： [python subprocess stdin.write a string error 22 invalid argument](https://stackoverflow.com/questions/15650216/python-subprocess-stdin-write-a-string-error-22-invalid-argument)

# 解决方案

无论如何，这*应该*有效（**您必须重定向 STDIN**和 STDOUT）：

```
from subprocess import *

c = 'gdaltransform -s_srs \'+proj=lcc +lat_1=34.03333333333333 +lat_2=35.46666666666667 +lat_0=33.5 +lon_0=-118 +x_0=2000000 +y_0=500000 +ellps=GRS80 +units=m +no_defs\' -t_srs epsg:4326 \n' + str(x) + ' ' + str(y) + '\n'

handle = Popen(c, stdin=PIPE, stderr=PIPE, stdout=PIPE, shell=True)
print handle.stdout.read()
handle.flush() 
```

# c++ - 是否可以更改不受您控制的 dll 的默认线程堆栈大小 c++ win32

> ID：15883656
> 
> 赞同：2
> 
> 时间：2013-04-08T15:53:42.987
> 
> 标签：c++, multithreading, winapi

我有一个使用很多线程的应用程序。这些线程中的大多数都是由我无法控制的第三方 dll 创建的。

为了减少虚拟内存的使用，我将可执行文件的默认堆栈大小设置为 0.5MiB（而不是默认的 1MiB）。这减少了超过 500 MiB 的地址空间使用，这非常有用，因为 XP（不幸的是）有 2GiB 的虚拟内存限制。

我最近不得不将另一个第三方 dll 集成到应用程序中，这会导致此级别的堆栈溢出，因此我必须将默认堆栈大小设置回 1MiB。

DLL 正在创建一个单独的线程，这是导致问题的线程，因此我无法通过使用 CreateThread 选项在我的应用程序中使用 DLL 的线程上指定线程大小来控制它。

所以我的问题是无论如何要让 DLL 具有与可执行文件不同的内部线程的默认堆栈大小，因为我无法编辑该 Dll 的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:20:55.997

您可能需要使用[Detours](http://research.microsoft.com/en-us/projects/detours/)或其他 PE 挂钩代码将 DLL 的导入重定向`CreateThread()`到您自己的实现存根，该存根使用不同的`dwStackSize`参数值将蹦床导入原始导入函数。这样，您的主应用程序的线程可以使用 0.5MB，而 DLL 的线程可以使用 1.0MB。

# jquery - 使用 Jquery 动态设置选项卡标题

> ID：15883658
> 
> 赞同：0
> 
> 时间：2013-04-08T15:53:50.320
> 
> 标签：jquery, jquery-plugins, jquery-easyui

我有一个下拉菜单和三个选项卡，

根据我收到的值，我想设置标题和 ID，

```
 <select class="easyui-combobox" name="state" style="width:200px;">
  <option value="DN">Denmark</option>  
  <option value="SG">Singapore</option>  
  <option value="JP">Japan</option>    
    </select> 
```

如果值为 DN，则

```
<div class="easyui-tabs" style="..." >
<div title="Denamrk"><table id="dg1">...</table</div>
<div title="DAN"><table id="dg2">...</table</div>
<div title="Danish Currency"><table id="dg3">...</table</div>
</div> 
```

或者是否可以使用 url 并从服务器获取选项卡数据？tab 或 div 是否有数据选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:05:47.860

## 试试这个： -

**[http://jsfiddle.net/adioo7/fT5vt/2/](http://jsfiddle.net/adiioo7/fT5vt/2/)**

# JS：-

```
var arrValues = {
    "DN": {
        0: "Denmark",
        1: "DAN",
        2: "Danish Currency"
    },
        "SG": {
        0: "Singapore",
        1: "SG",
        2: "SG Currency"
    },
        "JP": {
        0: "Japan",
        1: "JP",
        2: "JP Currency"
    }
};

function updateTabs() {
    var selectedOption = $('#dropdown').combobox('getValue');
    for (var i = 0; i <= 2; i++) {
         var tab = $('#tabs').tabs('getTab',i);
        $('#tabs').tabs('update', {
            tab: tab,
            options: {
                title: arrValues[selectedOption][i]
            }
        });
    }
}

$(function () {
    $('#tabs').tabs();
}); 
```

# HTML:-

```
<select id="dropdown" class="easyui-combobox" data-options="  
        onSelect: updateTabs" name="state" style="width:200px;">
    <option value="DN">Denmark</option>
    <option value="SG">Singapore</option>
    <option value="JP">Japan</option>
</select>
<div id="tabs" class="easyui-tabs" style="...">
    <div title="Denmark">
        <table id="dg1">...</table>
    </div>
    <div title="DAN">
        <table id="dg2">...</table>
    </div>
    <div title="Danish Currency">
        <table id="dg3">...</table>
    </div>
</div> 
```

# php - CodeIgniter - 新闻存档功能

> ID：15883660
> 
> 赞同：0
> 
> 时间：2013-04-08T15:53:55.240
> 
> 标签：php, database, codeigniter

我正在 CodeIgniter 中进行某种存档，但我的代码有问题。它仅显示最新的“日期”（或“主题”，如果是这种情况）。

```
function archive($id){
    $this->db->select('date');
    $this->db->distinct('date');
    $query = $this->db->get_where('news', array('page' => $id));

    $q_arr = $query->result_array();

    foreach($q_arr as $q1){
        $query2 = $this->db->get_where('news', array('date' => $q1['date']));

        $q2_arr = $query2->result_array();

        $archive = array();

        foreach($q2_arr as $q2){
            $archive[$q1['date']][] = $q2;
        }

    }

    return $archive;
} 
```

在我的数据库中，我的 News 表中有一个名为 date 的 coloum，我在其中手动输入了日期。

我想要的是：

* * *

**3月19日**

消息

消息

消息

* * *

**3月15日**

消息

消息

消息

* * *

**真的希望有人能帮忙！！**

# php - jquery联系表并收到带有消息文本的电子邮件

> ID：15883663
> 
> 赞同：0
> 
> 时间：2013-04-08T15:54:00.683
> 
> 标签：php, jquery, contact-form

我根据[本](http://youhack.me/2010/07/22/create-a-fancy-contact-form-with-css-3-and-jquery/)教程制作了一个联系表格，但我无法让这个表格工作。当我点击提交按钮时，什么都没有发生（似乎页面正在刷新或在我的实时网站上它返回到 index.html）并且我没有收到电子邮件并且没有回复。我想收到一封包含用户填写的表单内容的电子邮件。

这是 ajaxSubmit.php：

```
<?php

$name = $_POST['name']; // contain name of person
$email = $_POST['email']; // Email address of sender 
$web = $_POST['web']; // Your website URL
$body = $_POST['text']; // Your message 
$receiver = "xxx@gmail.com" ; // hardcorde your email address here - This is the email address that all your feedbacks will be sent to 
if (!empty($name) & !empty($email) && !empty($body)) {
$body = "Name:{$name}\n\nWebsite :{$web}\n\nComments:{$body}";
$send = mail($receiver, 'Contact Form Submission', $body, "From: {$email}");
if ($send) {
    echo 'true'; //if everything is ok,always return true , else ajax submission won't work
}

}

?> 
```

当然，xxx@gmail.com 只是我常规电子邮件地址的占位符。

使用 html、js 和 css 的[FIDDLE 。](http://jsfiddle.net/sqeq/xX5rN/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:07:54.207

我建议使用 isset 来检查发布的变量是否实际存在，此外：我建议使用三元运算符来检查它们是否实际设置：

```
$name = isset($_POST['name']) ? $_POST['name'] : false;
$email = isset($_POST['email']) ? $_POST['email'] : false;
$web = isset($_POST['web']) ? $_POST['web'] : false;
$text = isset($_POST['text']) ? $_POST['text'] : false;

$receiver = "xxx@gmail.com"; // You forgot to close a whitespace here.

if(($name && $email && $web && $text) != false)
{
    // It's okay to send email now.
    // Checkpoint.
} 
```

我推荐使用这个垃圾邮件检查过滤功能：

```
function spamcheck($field)
{
    //address using FILTER_SANITIZE_EMAIL
    $field=filter_var($field, FILTER_SANITIZE_EMAIL);

    //address using FILTER_VALIDATE_EMAIL
    if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

我喜欢使用这个修改后的邮件功能：

```
// Usage:   sendMail($toEmail, $fromEmail, $subject, $message);
// Pre:     $toEmail is of type string and is a valid email address, 
//          indicating the receiver.
//          $fromEmail is of type string and is a valid email address, 
//          indicating the sender.
//          $subject is of type string, indicating the email subject.
//          $message is of type string, indicating the message to be send
//          via the email, from $fromEmail's address to $toEmail's address.
// Post:    An email containing $message and the subject $subject from 
//          $fromEmail's address to $toEmail's address if $fromEmail
//          does not indicate a spam email.
function sendMail($toEmail, $fromEmail, $subject, $message)
{
    $validFromEmail = spamcheck($fromEmail);
    if($validFromEmail)
    {
        mail($toEmail, $subject, $message, "From: $fromEmail");
    }
} 
```

所以你可以从我们放样的地方继续。首先：您实际上并不需要花括号。另外..您正在覆盖 $body 变量，将变量分开会更有意义。我还建议将主题存储在变量中。

```
$subject = 'Contact Form Submission'; // Place where we left of at Checkpoint.
$message = "Name: $name\n\nWebsite :$web\n\nComments:$body"; // Place where we left of at Checkpoint.
sendMail($email, $receiver, $subject, $message); // Place where we left of at Checkpoint. 
```

您还必须确保您可以访问 SMTP（简单邮件传输协议），因此如果您没有要使用的 SMTP 服务器，使用 localhost 可能还不够。如果你有一个，但它不工作，那么你可能需要配置 php ini 设置：

```
ini_set('SMTP' , 'smtp.yourwebsite.com');
ini_set('smtp_port' , '25');
ini_set('username' , 'example@example.com');
ini_set('password' , 'pass');
ini_set('sendmail_from' , 'example@example.com'); 
```

注意：最好把修改后的邮件函数实际设为RETURN邮件函数，这样你就可以检查它是否成功了。

# sql - (Perl) 使用 SQL::Abstract 为 DBI 创建查询

> ID：15883667
> 
> 赞同：1
> 
> 时间：2013-04-08T15:54:15.990
> 
> 标签：sql, perl, sqlite, perl-module, dbi

我想在 SQLite 上向 table1 添加新记录

```
use SQL::Abstract;
my %data = (
  id => \'max(id)', # it is doesn't work so which variant is right?
  record => 'Something'
);

my $sql = SQL::Abstract->new;

my ($stmt, @bind) = $sql->insert('table1', \%data);

...
my $sth = $dbh->prepare($stmt); 
```

如果我在 Catalyst 应用程序中使用 DBIx::Class 我会这样写：

`id => $c->model('Model')->get_column('id')->max()`

它会正常工作。那么我怎样才能达到相同的目标，但只使用 DBIx::Class 中使用的 SQL::Abstract。有人可以修复它吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:12:02.413

这是一段代码。如您所见，首先您需要获取最大 id+1，然后执行插入命令。我必须注意到这是不安全的，因为在多（用户、进程、线程）环境中，第二个进程可以执行相同的代码并获得竞争条件。但我假设你只是在学习 SQL::Abstract api，这个问题并不重要

```
use DBI;
use SQL::Abstract;

#create table TEST(ID integer, NAME varchar);
my $dbh = DBI->connect('dbi:SQLite:dbname=test.db', '', '', {AutoCommit=>1});

my $sql = SQL::Abstract->new;

my($stmt, @bind) = $sql->select("TEST", [ 'max(ID)+1 as ID' ] );
my $sth = $dbh->prepare($stmt);
$sth->execute(@bind);

my ($id) = $sth->fetchrow_array // 1;

print "Select ID: $id", "\n";
$sth->finish;

($stmt, @bind) = $sql->insert("TEST", { ID=>$id, NAME=>"test-name"} );
$sth = $dbh->prepare($stmt);
$sth->execute(@bind);

$dbh->disconnect; 
```

# javascript - 防止 iframe 中的 location.hash 在 Chrome 中滚动父窗口

> ID：15883669
> 
> 赞同：9
> 
> 时间：2013-04-08T15:54:20.623
> 
> 标签：javascript, jquery, css, google-chrome, browser

**场景：**

我正在构建一个在 Chrome 中运行的信息亭应用程序。在其中，我通过带有锚点的链接（http://www.whatever.com/#specific_content）将另一个域的 iframe 加载到模式中。

**问题：**

当该内容加载时，iframe 会跳转到#specific_content，但父页面也会跳转。

这是一个单页信息亭应用程序，因此父页面的位置非常重要。场景的实际细节比上面的要复杂一些：

1.  为了禁止在应用程序中滚动，我有 body {overflow:hidden;}
2.  为了允许定位，我使用了一个设置为视口大小的包装容器。
3.  为了模拟滚动，我要么绝对地重新定位包装器，要么绝对地定位包装器内的内容。

为了演示这个问题，我设置了一个 jsFiddle，但您需要查看没有 jsFiddle chrome 的输出才能看到问题的全部范围：

第 1 步）单击“链接到内容”，这将重新定位包装器

步骤 2) 单击“链接加载”，这将加载 iFrame 内容

演示：http: [//jsfiddle.net/w47GT/8/embedded/result/](http://jsfiddle.net/w47GT/8/embedded/result/)

小提琴：http: [//jsfiddle.net/w47GT/8/](http://jsfiddle.net/w47GT/8/)

**编码：**

CSS：

```
html, body { height:100%; padding:0; margin: 0;overflow:hidden; }
.background {
    width : 100%;
    height:400%;
    background:#333 url('http://incurablystircrazy.files.wordpress.com/2012/04/runner-at-sunset.jpg');
}
.wrapper { position:absolute;width:100%;height:200%; }
iframe  { width:50%;height:50%;position:fixed;top:25%;left:50%;margin-left:-25%;border:2px solid red;background-color:#ddd; }
.link   { width:100%;height:25px;position:absolute;top:25px;background-color:green; }
.anchor { position:absolute;top:400px;width:100%;height:25px;background-color:red; } 
```

HTML

```
<div class="wrapper">
    <div class="background"></div>

    <a class="link" href="#linked">Link to content</a>
    <a class="anchor" name="linked" href="http://www.smashingmagazine.com#footer" >Link to Load iFrame</a>
</div>
<iframe></iframe> 
```

JS

```
$(function(){
    $('.link').on('click',function(){ $('.wrapper').css({top:'-400px'}); });
    $('.anchor').on('click',function(e){
        e.preventDefault();
        var href = $(this).prop('href');
        $('iframe')
        .attr({
            src: href,
            name: 'testing'
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:34:27.050

可以在此处找到答案：[使用指定的#element 加载 iframe 会将父视点移动到同一位置](https://stackoverflow.com/questions/14465378/loading-iframe-with-an-element-specified-moves-the-parent-viewpoint-to-the-same)

**解决方案：**

隐藏 iFrame 直到它完全加载后绕过影响父页面的锚。

**演示：http:** [//jsfiddle.net/w47GT/12/embedded/result/](http://jsfiddle.net/w47GT/12/embedded/result/)

**小提琴：http:** [//jsfiddle.net/w47GT/12/](http://jsfiddle.net/w47GT/12/)

JS

```
$(function(){
    // Move the content wrapper up to simulate scroll
    $('.link').on('click',function(){ $('.wrapper').css({top:'-400px'}); });

    // Load iFrame content (previously hidden via CSS)
    $('.anchor').on('click',function(e){
        e.preventDefault();
        var href = $(this).prop('href');
        $('iframe')
        .attr({
            src: href,
            name: 'testing'
        }).on('load',function(){
            $(this).show();
        });
    });
}); 
```

感谢@DJdavid98 指出这个答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T17:14:05.590

我在这里有点摸不着头脑，但你有没有试过这样的东西附加到外部页面的 DOM 上？

```
$(window).on("hashchange", function(e) {
  e.preventDefault();
}); 
```

# asp.net-mvc - Mvc4 网站构建，但查看 Razor 文件时填充错误列表

> ID：15883677
> 
> 赞同：0
> 
> 时间：2013-04-08T15:54:43.597
> 
> 标签：asp.net-mvc, visual-studio-2012, intellisense

我有一个构建和运行良好的 Mvc4 网站，但是在 VS2012 中查看时，每个 Razor 内容页面都充满了错误。我收到`model`关键字和 ViewBag 对象不存在的错误，并且 Intellisense 只选择 and 之类的代码`Html.TextBox`，`Html.Hidden`而不是`Html.HiddenFor`or `Html.TextBoxFor`。

我的猜测是智能感知未注册 Web.Config 节点中的任何内容；有谁知道如何让这些命名空间再次正确注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:14:40.067

看起来这是 Views/Web.config 中没有指定版本的问题。这是更新后的配置部分现在的样子：

```
<configuration>
    <configSections>
        <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
            <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        </sectionGroup>
    </configSections>
</configuration> 
```

# python - Django REST Framework POST/PUT 的深度不同？

> ID：15883678
> 
> 赞同：11
> 
> 时间：2013-04-08T15:54:45.377
> 
> 标签：python, django, rest, django-rest-framework

我正在使用 Django REST Framework 为我的 Web 应用程序创建 API。我有一个班级“评论”，已`depth=2`在`Meta`班级中设置。`GET`这在ing时效果很好`Comments`。当我尝试发送`POST`or`PUT`请求时（即创建一个新的`Comment`），我被告知我需要包含对象而不是 ForeignKey ID。

这是我的序列化程序类：

```
class CommentSerializer(serializers.ModelSerializer):
    class Meta:
        model = Comment
        depth = 2 
```

该模型：

```
class Comment(models.Model):
    user = models.ForeignKey(User, null=True, blank=True,
        related_name='comments')
    budget = models.ForeignKey(Budget, related_name='comments')
    published = models.BooleanField(default=False)
    body = models.TextField()
    created = models.DateTimeField(auto_now_add=True) 
```

视图代码：

```
class Comments(generics.ListCreateAPIView):

    model = Comment
    serializer_class = CommentSerializer

    def pre_save(self, obj):
        obj.user = self.request.user 
```

输出（JSON）中显示的错误是：

```
{"user": ["This field is required."], "budget": [{"non_field_errors": ["Invalid data"]}]} 
```

发送此原始数据时：

```
{"budget": 2, "published": true, "body": "Another comment"} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-04T17:13:06.957

我知道这有点晚了，但我最终使用了 2 个序列化器，如下所示：

```
class CommentReadSerializer(serializers.ModelSerializer):
    class Meta:
        model = Comment
        depth = 2

class CommentWriteSerializer(serializers.ModelSerializer):
    class Meta:
        model = Comment 
```

然后像这样使用：

```
class Comments(generics.ListCreateAPIView):

    model = Comment
    serializer_class = CommentReadSerializer

    def create(self, request, *args, **kwargs):
        serializer = CommentWriteSerializer(data=request.DATA, files=request.FILES)
        if serializer.is_valid():
            self.pre_save(serializer.object)
            self.object = serializer.save(force_insert=True)
            self.post_save(self.object, created=True)
            headers = self.get_success_headers(serializer.data)
            serializer = CommentReadSerializer(serializer.object)
            return Response(serializer.data, status=status.HTTP_201_CREATED, headers=headers)

        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-08T12:49:11.630

您可以通过覆盖该`get_serializer_class()`函数来设置不同的序列化程序，如下所示：

`def get_serializer_class(self): method = self.request.method if method == 'PUT' or method == 'POST': return YourWriteSerializer else: return YourReadSerializer`

我想添加这个，因为一段时间后我从谷歌搜索来到这里。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-13T02:51:27.913

我相信定义引用外键关系的序列化器字段的正确方法是通过类似`serializers.PrimaryKeyRelatedField`. 我不相信模型序列化程序会自动使用此字段类，而无需在序列化程序类中明确定义它。

[http://www.django-rest-framework.org/api-guide/relations/#primarykeyrelatedfield](http://www.django-rest-framework.org/api-guide/relations/#primarykeyrelatedfield)

我想一个`PrimaryKeyRelatedField`序列化程序会像您在示例中使用的那样正确处理 JSON 数据提交。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-12-04T18:43:07.420

我有同样的问题，所以我解决了制作自定义通用方法。这是上述答案的更好实现

```
class CustomListCreateAPIView(mixins.ListModelMixin,
                              mixins.CreateModelMixin,
                              generics.GenericAPIView):
    """
    Concrete view for listing a queryset or creating a model instance.
    """
    def get_serializer_class(self):
        method = self.request.method
        if method == 'PUT' or method == 'POST':
            return self.writeSerializers
        else:
            return self.readSerializers

    def get(self, request, *args, **kwargs):
        return self.list(request, *args, **kwargs)

    def post(self, request, *args, **kwargs):
        return self.create(request, *args, **kwargs) 
```

同样的路德，

```
class CustomRetrieveUpdateDestroyAPIView(mixins.RetrieveModelMixin,
                                         mixins.UpdateModelMixin,
                                         mixins.DestroyModelMixin,
                                         generics.GenericAPIView):
    """
    Concrete view for retrieving, updating or deleting a model instance.
    """
    def get_serializer_class(self):
        method = self.request.method
        if method == 'PUT' or method == 'POST':
            return self.writeSerializers
        else:
            return self.readSerializers

    def get(self, request, *args, **kwargs):
        return self.retrieve(request, *args, **kwargs)

    def put(self, request, *args, **kwargs):
        return self.update(request, *args, **kwargs)

    def patch(self, request, *args, **kwargs):
        return self.partial_update(request, *args, **kwargs)

    def delete(self, request, *args, **kwargs):
        return self.destroy(request, *args, **kwargs)  # enter code here 
```

现在我只在 Views.py 中给出**writeSerializers**和**readSerializers**值

还有一种创建读写序列化器的简单方法。

```
class employeeWriteSerializer(serializers.ModelSerializer):
    class Meta:
        model = employee
        fields = ('username','email',..)

class employeeReadSerializer(serializers.ModelSerializer):
     class Meta(employeeWriteSerializer.Meta):
         depth = 1 
```

它可以节省时间和重复工作，您还可以在自定义通用 Api（Retitve 工作）中添加身份验证类。谢谢。

# php - 上传时保持图像的纵横比

> ID：15883679
> 
> 赞同：0
> 
> 时间：2013-04-08T15:54:46.277
> 
> 标签：php, image-uploading

我正在用 PHP 上传图像。在上传期间，我将图像从实际图像调整为所需大小。但是图像大小没有根据宽度进入其纵横比。

PHP 代码。

```
$size = getimagesize($_FILES["file"]["tmp_name"]);
$ratio = $size[0]/$size[1];
$req_width = 500;
$height = $req_width* $ratio*2;

//after this code for re-size image with above dimension and upload image code. 
```

**我在公式中做错了什么。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:59:18.547

你为什么要乘以2？又`$width`从何而来？

您应该能够将所需的宽度除以比率，以获得正确的结果。

```
$height = $req_width / $ratio; 
```

# sql-server - 如何在而不是触发器中执行原始命令

> ID：15883687
> 
> 赞同：1
> 
> 时间：2013-04-08T15:55:09.307
> 
> 标签：sql-server, triggers

我们正在将 DB2 迁移到 SQL Server，并且需要迁移许多 BEFORE 插入/更新。我们可以通过简单地使用命令“INSERT INTO TableName SELECT * FROM inserted”来使用 INSTEAD OF INSERT 来非常简单地处理插入。

但是，对于更新，它更难，因为您不能只执行“UDPATE TableName SELECT * FROM Inserted”之类的命令。相反，我们发现的唯一选择是为每个传入列声明变量，然后在UPDATE TableName SET ColumnName = @col1, etc. 不幸的是，这会导致相当多的手动工作，我想找到一个更自动化的解决方案。

一些问题：1）有没有一种方法可以在不知道特定列信息的情况下使用从触发器中插入来发出更新？
2) 有没有办法在触发器中编写一个循环，自动单步执行插入的列，并将这些列更新到数据库？3）有没有办法访问导致触发器的原始命令？所以我可以执行 EXEC @command 并以这种方式处理事情吗？

任何帮助将不胜感激！

谢谢！鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:52:05.303

1.  您必须在`UPDATE`
2.  您可以遍历目标表 (in [`sys.columns`](http://msdn.microsoft.com/en-us/library/ms176106.aspx)) 的元数据并动态构建`UPDATE`语句，但动态 SQL 在其自己的范围内执行，因此无法直接访问`inserted`和`deleted`表。尽管您可以通过首先将数据复制到本地临时表 ( `#inserted`) 来解决此问题，但总的来说，这似乎是一种非常尴尬的方法
3.  无法访问原始`UPDATE`语句

但我不确定你真正想要达到的目标。您的问题意味着触发器执行原始操作`INSERT`或`UPDATE`无论如何都不会修改任何数据。如果情况确实如此，您可能需要解释触发器的目的是什么，因为可能有另一种更简单的方法来做它正在做的任何事情。

我也对您的声明感到有些困惑，即您必须“为每个传入列声明变量，然后在`UPDATE TableName SET ColumnName = @col1`等 中使用这些变量”。SQL Server 中的触发器总是每条语句触发一次，因此您通常[`UPDATE`使用连接](https://stackoverflow.com/questions/1604091/update-a-table-using-join-in-sql-server)来处理`UPDATE`多行的情况。

您可能还会发现[`UPDATE()`](http://msdn.microsoft.com/en-us/library/ms187326.aspx)或[`COLUMNS_UPDATED()`](http://msdn.microsoft.com/en-us/library/ms186329.aspx)函数可用于限制您的触发器代码仅处理那些真正更新的列。

# c - 如何处理这些 C 警告？

> ID：15883694
> 
> 赞同：1
> 
> 时间：2013-04-08T15:55:16.650
> 
> 标签：c, warnings, variable-assignment, declaration, implicit

所以，在编译一个我不知道如何修复的 C 文件时，我收到了一些警告。

第一个警告来自以下代码：

```
char line[100];
char* carbonCopy;
char *currentWord;
wordlist *theList = malloc(sizeof(wordlist));
theList->head->string = NULL;
word *fromFile = malloc(sizeof(word));

while(fgets(line,99,file)){
    if(line != NULL){
        carbonCopy = line;

        while((currentWord = strsep(&line, " ")) !=NULL)
        {
            malloc(strlen(currentWord)*sizeof(char));
            fromFile->string = currentWord;
            fromFile->next = malloc(sizeof(word)); 
```

警告指出：

> 从不兼容的指针类型传递“strsep”的参数 1 [默认启用]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:56:36.050

您需要包含声明`strsep`和`strlen`

```
#include <string.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:55:20.803

`strsep()`期望 a`char **`作为第一个参数，但您的来源使用`char (*)[100]`.

修改你的代码，例如这样：

```
char line[100];
char * carbonCopy;

...

carbonCopy = line;
while((currentWord = strsep(&carbonCopy, " ")) !=NULL) 
```

请注意，这`carbonCopy`不是它的副本，`line`而只是对其的引用，也就是说，它指向`line`包含的数据。

* * *

这条线

```
malloc(strlen(currentWord)*sizeof(char)); 
```

没有效果，但是浪费内存。

# java - Spring Security 无效登录处理

> ID：15883698
> 
> 赞同：4
> 
> 时间：2013-04-08T15:55:24.563
> 
> 标签：java, spring, spring-mvc, spring-security

我是 Spring 安全的新手，所以我尝试使用 Spring MVC 来处理无效登录，但最终出现 Page Not Found 404

在我的 security-context.xml 中，我有这个`AuthenticationProvider`处理所有的身份验证登录，所以基本上只是检查用户的帐户和密码，但由于某些原因，`authentication-failure-url`只要有无效的登录尝试，它就会一直说找不到 404。

```
 <security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="AuthenticationProvider"/>
  </security:authentication-manager>

  <bean id="preAuthenticationFilter"
      class="authentication.PreAuthenticationFilter"
      p:authenticationManager-ref="authenticationManager" />

  <security:http auto-config="true">
    <security:intercept-url pattern="/member/**" access="MEMBER" requires-channel="https"/>
    <security:form-login login-page="/login"
                         username-parameter="email"
                         password-parameter="password"
                         default-target-url="/member/"
                         authentication-failure-url="/loginfailed" />
    <security:custom-filter position="PRE_AUTH_FILTER" ref="preAuthenticationFilter" />
  </security:http> 
```

但我确实有一个相应的控制器监听该 url 模式以处理无效登录。

```
@Controller
public class LoginController
{
    @RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
    public String loginError(ModelMap model)
    {     
         model.addAttribute("error", "true");
         return "login";
    }
} 
```

****** *** ****更新****** ** *** *****

 **在某些`AuthenticationProvider`时候，只要用户的凭据不正确，我就会验证用户并抛出异常（我不知道这是否重要）

```
@Component
public class AuthenticationProvider{
    private User validateUser(String userName, String password)
    {
        try{
            //authenticate user's info
            .......
        }
        catch (UnauthorizedAccessException e)
        {
             throw new BadCredentialsException(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:04:15.533

*（作为评论的后续。）*来自 j_spring_security_check 的 302 状态`BadCredentialsException`都是正确的。看起来您的控制器根本没有注册。您是否认为使用注释 bean`@Controller`不足以使其工作？[引用文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-controller)：

> 您可以使用调度程序上下文中的标准 Spring bean 定义显式定义带注释的控制器 bean。然而， `@Controller`构造型也允许自动检测，这与 Spring 对检测类路径中的组件类并为它们自动注册 bean 定义的一般支持相一致。
> 
> 要启用此类带注释控制器的自动检测，您需要将组件扫描添加到您的配置中。使用 spring-context 模式，如以下 XML 片段所示：
> 
> ```
> <?xml version="1.0" encoding="UTF-8"?>
> <beans xmlns="http://www.springframework.org/schema/beans"
>     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>     xmlns:p="http://www.springframework.org/schema/p"
>     xmlns:context="http://www.springframework.org/schema/context"
>     xsi:schemaLocation="
>         http://www.springframework.org/schema/beans
>         http://www.springframework.org/schema/beans/spring-beans.xsd
>         http://www.springframework.org/schema/context
>         http://www.springframework.org/schema/context/spring-context.xsd">
> 
>     <context:component-scan base-package="com.example"/>
> 
>     <!-- ... -->
> 
> </beans> 
> ```

（假设`LoginController`在 com.example 包中）。

可以使用简单的 bean 声明代替组件扫描：

```
<bean class="com.example.LoginController" /> 
```**

# asp.net - 使用 Visual Studio 2012 对本地文件系统或 FTP 进行增量 Web 发布和预览更改

> ID：15883699
> 
> 赞同：3
> 
> 时间：2013-04-08T15:55:24.997
> 
> 标签：asp.net, visual-studio-2012, publishing

我正在尝试为我正在处理的 ASP.NET 站点设置发布工作流。它将位于共享/网络文件夹中，我想从 Visual Studio 2012 发布。

我已经看到 VS 2012 在发布站点时有一些改进，例如预览更改和增量部署，但到目前为止我看到的所有教程都显示了 Windows Azure，例如：

[http://www.techbubbles.com/aspnet/web-publishing-features-in-visual-studio-2012/](http://www.techbubbles.com/aspnet/web-publishing-features-in-visual-studio-2012/)

VS 2012 是否支持更改预览和增量发布到本地文件系统或 FTP 或仅适用于 Azure？

如果没有，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T15:23:00.733

您还可以使用指向网络上 IIS 实例的 Web 部署发布配置文件来获取这些功能。这是[相关的 MSDN 文章](http://msdn.microsoft.com/en-us/library/dd465337.aspx)。

# yii - 如何在 yii 中编辑分页行为

> ID：15883701
> 
> 赞同：0
> 
> 时间：2013-04-08T15:55:26.073
> 
> 标签：yii

您好，我正在创建一个从 api 获取数据的搜索模块。现在我在 1 个 api 调用中获得所有结果，并将其作为数据提供者。这是代码..

```
$dataProvider = new CArrayDataProvider($result, array(          
                                                    'sort' => array(
                                                    'attributes' => array('name',
                                                            ),
                                                    ),
                                                    'pagination' => array(
                                                            'pageSize' => 10,
                                                    ),
                                            )); 
```

这工作正常并提供分页。我想要做的是使用 api 的限制和偏移量。例如考虑yelp api

```
 http://api.yelp.com/search?term="xxx"&location="xxx"&limit=10&ofset=0; 
```

我最初只想得到 10 个结果，当我单击分页 [2] 或下一个 > 时，我需要另一个 api 调用来获取下一组。

如何才能做到这一点 ？

我也需要专家意见。哪一个更好。？一次调用 api 并一次获取所有详细信息还是一个一个获取几个？预期结果将在200左右..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:31:26.510

Yelp 不允许以任何含义“缓存”其搜索结果[http://www.yelp.com/developers/getting_started/api_terms](http://www.yelp.com/developers/getting_started/api_terms)（第 6 节）。所以我相信你每次点击分页链接时都需要打电话。

为此，我将创建一些 YelpDataProvider 扩展[`CDataProvider`](http://www.yiiframework.com/doc/api/1.1/CDataProvider)并覆盖所需的抽象方法。

分页：

不确定我遇到了什么样的问题，但是如果您实现自己的数据提供者，您将可以访问[`CPagination`](http://www.yiiframework.com/doc/api/1.1/CPagination)类实例及其属性`pageSize`和`offset`. `pageSize`就是要映射到`limit`yelp请求参数，`offset`属性--直接`offset`请求参数。

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:09:32.163

[http://www.yiiframework.com/doc/api/1.1/CPagination](http://www.yiiframework.com/doc/api/1.1/CPagination)

```
$dataProvider = new CArrayDataProvider($result, array(          
    'sort' => array(
        'attributes' => array('name'),
    ),
    'pagination' => array(
        'pageSize' => 10,
        'offset' => 5
    ),
)); 
```

# c# - 为什么我们在使用 New 操作时不添加 try catch

> ID：15883706
> 
> 赞同：4
> 
> 时间：2013-04-08T15:55:40.747
> 
> 标签：c#, exception-handling

,在C#和C++中，没有人对运算符使用异常处理`new`，这是什么原因？是否保证呼叫将始终成功？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T15:58:14.330

> 是否保证呼叫将始终成功？

不，这不能保证。

话虽这么说，一般来说，处理您实际上可以做某事的异常只是一个好主意。 *按照惯例*，以尽量减少异常的方式设计对象构造是一个好主意。话虽如此，这并不总是可能的，而且在许多情况下，调用`new Foo()`很容易引发您可能想要捕获的异常。

例如，如果您尝试这样做，您肯定会引发异常，因为这比单维数组中允许的最大项目数长（即使有`gcAllowVeryLargeObjects`集合）：

```
var willCauseException = new double[int.MaxValue]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T16:08:23.217

好吧，*没有人*是一个强烈的表情。事实上，工业级应用程序应该检查这些错误。但这并不意味着应该*到处*检查错误。

除了构造函数本身可能引发的任何内存之外，尝试创建一个对象`new`可能会引发一个`std::bad_alloc`或一个`OutOfMemoryException`（取决于您的语言）。但是如果你发现了这个异常，你会怎么处理它呢？正确的做法是在一个集中的地方（可能在应用程序的主循环中）捕获这些异常并在那里处理它们。每次您看到其中一条消息说“您的内存不足：保存当前作业并退出应用程序”或类似消息时，这意味着这些异常之一已被捕获并处理（通常通过释放紧急情况内存块以允许优雅终止，然后警告用户）。

异常管理不在于`try-catch`到处写块；它们必须只存在于正确的位置，并且必须考虑到可能发生异常并且系统状态必须始终处于可恢复状态来编写其余代码。

# c#-4.0 - NUnit 未加载最新版本的控制台应用程序

> ID：15883712
> 
> 赞同：1
> 
> 时间：2013-04-08T15:56:03.340
> 
> 标签：c#-4.0, nunit, console-application

我正在重写一个控制台应用程序并尝试使用单元测试。我在 Windows 7 PC 上的 Visual Studio 2010 中使用 NUnit、C#、.NET Framework 4。

当我在应用程序中更改代码时，我的单元测试不会获取最新的更改。我可以看到 NUnit 正在重新加载，但由于某种原因它没有获得最新版本。让 NUnit 与最新版本一起工作的唯一方法是删除对控制台应用程序的引用，将其添加回来并编译。

有没有办法避免这样做？我认为问题在于控制台应用程序被编译为 EXE，而对于我已经单元测试过的大多数应用程序，它们往往是 DLL。

**编辑**

我曾希望这个问题：[Unit Testing a Console Application inside Visual Studio](https://stackoverflow.com/questions/10423267/unit-testing-a-console-application-inside-visual-studio)包含答案。如果您查看接受的答案，这就是我一直在进行的方式，但我的测试项目没有接受更改。我现在已经创建了一个类库，并且正在应用我的测试。我的控制台应用程序将简单地加载，然后调用这个类库。

**第二次编辑**

现在我的代码已经到了可以测试功能的阶段，并且我注意到我的控制台应用程序存在同样的问题。虽然它“说”它正在引用已编译的 DLL，但它只会在我删除并重新附加引用时获取最新的更改。所以，我认为问题不一定与 NUnit 相关，而是控制台应用程序的问题/怪癖。

# android - 无法实例化活动 ComponentInfo

> ID：15883715
> 
> 赞同：1
> 
> 时间：2013-04-08T15:56:06.860
> 
> 标签：android, eclipse

我正在使用从其他人那里导入的 Android 项目。我已经对所有依赖项进行了排序，项目中没有错误，但是当我尝试启动它时，我得到：

```
04-08 16:49:41.761: E/AndroidRuntime(19254): FATAL EXCEPTION: main
04-08 16:49:41.761: E/AndroidRuntime(19254): java.lang.RuntimeException: Unable to
      instantiate activity ComponentInfo{com.me.app/com.me.app.ui.ActivityDashboard}: 
      java.lang.ClassNotFoundException: Didn't find class 
      "com.me.app.ui.ActivityDashboard" 
      on path: /data/app/com.me.app-1.apk 
```

我的清单：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar">
    <activity
        android:name=".ui.ActivityDashboard"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
            <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    ...
</application> 
```

这似乎是一个常见问题，我已经阅读了我发现的所有其他问题并执行了以下操作，但均无济于事：

*   ADT 和 SDK 已全面更新
*   我正在构建针对 Android 2.3.3 (SDK 10)
*   这个在Android Build Target下选择，Library在Java Build Path中
*   清单中的所有类路径都是正确的，我已经仔细检查了它们。
*   所有活动都在清单中，具有正确的意图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:02:09.247

> 并且库位于 Java 构建路径中

这是不正确的。请取消此更改，然后将 JAR 移动到您的项目`libs/`目录中。

虽然手动添加 JAR 到你的构建路径会在编译时满足编译器，但它不会在运行时将 JAR 的内容添加到 APK 文件中，导致`ClassNotFoundException`s 之类的。

请注意，我指的是第三方 JAR，例如[您的屏幕截图中的前四个条目](http://i.imgur.com/6A38bKW.png)。这些似乎都没有`libs/`，而且都需要。

all-JARs-must-be-in-rule 的唯一例外`libs/`是：

1.  Android 自己的平台 JAR，通过选择构建目标附加到您的项目（原因：此 JAR 的内容具体不需要包含在您的 APK 中）

2.  Android 库项目，它们有自己的`libs/`目录来存放它们引用的任何第三方 JAR

您的核心错误是 that `com.me.app.ui.ActivityDashboard`is not found，这表明这是来自您的四个 JAR 之一，这些 JAR 不在`libs/`.

# r - 包 fpc 中的 prediction.strength

> ID：15883719
> 
> 赞同：0
> 
> 时间：2013-04-08T15:56:30.457
> 
> 标签：r

我正在使用`prediction.strength`带有 k-medoids 算法的 r Package fpc 中的函数。这是我的代码

```
prediction.strength(data,2,6,M=10,clustermethod=pamkCBI,DIST,krange=2:6,diss=TRUE,usepam=TRUE) 
```

不知何故我收到错误消息

```
Error in switch(method, kmeans = kmeans(xdata[indvec[[l]][[i]], ], k,  : 
EXPR must be a length 1 vector 
```

有人对这个 r 命令有经验吗？有一些简单的例子，比如

```
iriss <- iris[sample(150,20),-5]
prediction.strength(iriss,2,3,M=3,method="pam") 
```

但我的问题是我在 k-medoids 算法中使用了相异矩阵而不是数据本身。我不知道在这种情况下我应该如何更正我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T10:02:59.987

请注意，在包帮助中，为 prediction.strength 说明了以下内容：

xdats - 数据（可以强制转换为矩阵的东西）。**请注意，这目前不能是相异矩阵。**

恐怕你必须破解这个函数才能让它处理一个距离矩阵。我正在使用以下内容：

```
pred <- function (distance, Gmin = 2, Gmax = 10, M = 50, 
classification = "centroid", cutoff = 0.8, nnk = 1, ...) 
{
require(cluster)
require(class)
xdata <- as.matrix(distance)
n <- nrow(xdata)
nf <- c(floor(n/2), n - floor(n/2))
indvec <- clcenters <- clusterings <- jclusterings <- classifications <- list()
prederr <- list()
dist <- as.matrix(distance)
for (k in Gmin:Gmax) {
    prederr[[k]] <- numeric(0)
    for (l in 1:M) {
        nperm <- sample(n, n)
        indvec[[l]] <- list()
        indvec[[l]][[1]] <- nperm[1:nf[1]]
        indvec[[l]][[2]] <- nperm[(nf[1] + 1):n]
        for (i in 1:2) {
            clusterings[[i]] <- as.vector(pam(as.dist(dist[indvec[[l]][[i]],indvec[[l]][[i]]]), k, diss=TRUE))
            jclusterings[[i]] <- rep(-1, n)
            jclusterings[[i]][indvec[[l]][[i]]] <- clusterings[[i]]$clustering
    centroids <- clusterings[[i]]$medoids
            j <- 3 - i
            classifications[[j]] <- classifdist(as.dist(dist), jclusterings[[i]], 
              method = classification, centroids = centroids, 
              nnk = nnk)[indvec[[l]][[j]]]
        }
        ps <- matrix(0, nrow = 2, ncol = k)
        for (i in 1:2) {
            for (kk in 1:k) {
              nik <- sum(clusterings[[i]]$clustering == kk)
              if (nik > 1) {
                for (j1 in (1:(nf[i] - 1))[clusterings[[i]]$clustering[1:(nf[i] - 
                  1)] == kk]) {
                  for (j2 in (j1 + 1):nf[i]) if (clusterings[[i]]$clustering[j2] == 
                    kk) 
                    ps[i, kk] <- ps[i, kk] + (classifications[[i]][j1] == 
                      classifications[[i]][j2])
                }
                ps[i, kk] <- 2 * ps[i, kk]/(nik * (nik - 
                  1))
              }
            }
        }
        prederr[[k]][l] <- mean(c(min(ps[1, ]), min(ps[2, 
            ])))
    }
}
mean.pred <- numeric(0)
if (Gmin > 1) 
    mean.pred <- c(1)
if (Gmin > 2) 
    mean.pred <- c(mean.pred, rep(NA, Gmin - 2))
for (k in Gmin:Gmax) mean.pred <- c(mean.pred, mean(prederr[[k]]))
optimalk <- max(which(mean.pred > cutoff))
out <- list(predcorr = prederr, mean.pred = mean.pred, optimalk = optimalk, 
    cutoff = cutoff, method = clusterings[[1]]$clustermethod, 
    Gmax = Gmax, M = M)
class(out) <- "predstr"
out
} 
```

# asp.net-mvc - 使用 MVC 填充多个相同的模型

> ID：15883721
> 
> 赞同：0
> 
> 时间：2013-04-08T15:56:33.927
> 
> 标签：asp.net-mvc, vb.net

我有一个页面，我有一个文本框来填写 10 个玩家的信息（姓名、角色、杀戮、死亡、助攻），一旦我在该页面上单击“保存”，我想为每个玩家填充一个玩家模型，然后以某种方式在 Postback 操作中访问这些玩家，我将在其中将该数据插入到我的数据库中。我怎样才能做到这一点？

我知道我可以命名文本框：

*   玩家 1，角色 1，击杀 1...

*   玩家 2、角色 2、击杀 2...

*   ETC...

然后在 PlayerList 模型中包含所有这些字段，然后它会使用所有玩家信息自动填充 PlayerList 模型，但这似乎不是一个很好的方法。如果您有任何见解，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:04:07.120

您可以命名一个文本框 name="Player[1]" 并有一个

```
Dim Player As List(Of String) 
```

我很确定您也可以使用 name="Player[1].Name"

# javascript - 关于 JavaScript 内部工作原理的书籍/资料

> ID：15883725
> 
> 赞同：4
> 
> 时间：2013-04-08T15:56:36.930
> 
> 标签：javascript

几年前我开始学习 C++ 时，我阅读的很多书籍和文本都非常详尽地解释了编写的代码如何转化为硬件中的具体操作（如动态内存分配、指针算法等）。 ）。我发现这些解释对于完全理解语言非常有帮助。

现在我正在学习 JavaScript 并学习整个函数式编程范式，将函数作为第一类对象等等。我已经阅读了很多关于如何使用 JavaScript 的文本和书籍，但我还没有找到解释该语言低级内部工作原理的源代码（比如函数在内存中的表示方式，当使用 .apply() 调用函数并提供新的上下文等）。

我想你可能会说，我正在寻找的是编写 JS 编译器/VM 所需的知识..？

有谁知道在哪里可以找到涉及语言非常低级细节的书籍或文本？

# html - 语音气泡的 CSS '+ p' 定位

> ID：15883730
> 
> 赞同：0
> 
> 时间：2013-04-08T15:56:55.677
> 
> 标签：html, css, position, positioning

我使用了几个不同的来源来设计混合 CSS 语音气泡设置，但是在每个气泡下的标题定位方面遇到了困难（请参阅下面的屏幕截图以了解它的外观和我想要进行的更改）。

![在此处输入图像描述](https://i.stack.imgur.com/ZF0HS.png)

我[将此](http://forrst.com/posts/How_to_Make_a_Pure_CSS_Speech_Bubble_With_a_Drop-PU1)作为气泡本身的灵感，并将[其](http://nicolasgallagher.com/pure-css-speech-bubbles/demo/)作为将标题显示在气泡下方的灵感 - 在此非常感谢 Joshua Hibbert 和 Nicolas Gallagher 各自的工作。

CSS 看起来非常紧凑，`.bubble + p`但我无法让它在我的设置中正常工作。我已经尝试将`position`属性从来`relative`回更改，`absolute`但都没有按预期工作。Fiddle [here](http://jsfiddle.net/M9TZv/)（将 Fiddle 的 Result 滑块向左拖动以查看按预期显示的气泡）。谁能指出我能做什么？我是否正确地假设`+ p`CSS 中的 意味着该`<p>`元素从气泡元素继承其 CSS？

**HTML**

```
 <span class="bubble bubble-left">This is line 1 in speech bubble 1.<br/> 
    This is line 2 in a bubble,<br/> and this is line 3.</span>
    <p>Title for bubble 1</p>

  <span class="bubble bubble-right">This is ine 1 in a speech bubble 2.<br/> 
    This is line 2 in a bubble,<br/> and this is line 3.</span>
    <p>Title for bubble 2</p> 
```

**CSS**

```
.bubble {
background-color: #fff;
-webkit-border-radius:7px;
-moz-border-radius:7px;
border-radius: 7px;
border: 2px solid #DD4814;
-webkit-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5));
-moz-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5));
-ms-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5)); 
-o-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5));
box-shadow: inset 0 1px 1px hsla(0,0%,100%,.5), 4px 4px 0 hsla(0,0%,0%,.2);
color: #333;
display: inline-block;
font-family: Ubuntu, sans-serif;
font: 16px/25px;
padding: 15px 25px;
position: absolute;
}

.bubble + p {margin:15px 0 2em 85px; font-style:italic;}

.bubble:after, .bubble:before {
border-bottom: 25px solid transparent;
border-right: 25px solid #fff;
bottom: -25px;
content: '';
position: absolute;
right: 25px;
}
.bubble:before {
border-right: 25px solid hsla(0,0%,0%,.1);
bottom: -28px;
right: 22px;
z-index: 1;
}
.bubble:before {
border-right: 27px solid #DD4814;
border-bottom: 27px solid transparent;
bottom: -29px;
right: 23px;
z-index: 0;
}

.bubble-left {left: 25%;}
.bubble-right {right: 25%;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:01:39.470

我会在您的内部有语音气泡跨度，`<p>`然后代码将如下所示：

HTML：

```
<p>
    Title for bubble 1
    <span class="bubble bubble-left">
        This is line 1 in speech bubble 1.<br/> 
        This is line 2 in a bubble,<br/> 
        and this is line 3.
    </span>
</p> 
```

CSS：

```
p {
    position: relative;
}

span.bubble {
    position: absolute;
    /* Set width and height in relation to the p */
} 
```

# algorithm - 无需更换的重复采样

> ID：15883732
> 
> 赞同：0
> 
> 时间：2013-04-08T15:57:10.060
> 
> 标签：algorithm, r, random, sample

我想从人口 1:1000 中生成 10 个随机数，并且生成此数字的代码重复 10 次。我希望采样没有替换，这样 10 组 10 个随机数之间的交集为空。

首先，如果我在 r 中使用示例函数并将替换设置为 false，它并没有多大帮助，当我在网上搜索时，我发现了一个名为 urn 的函数，但我无法在 r 中下载包。所以简而言之，我想做完全像下面的代码：

[http://rss.acs.unt.edu/Rdoc/library/urn/html/urn.html](http://rss.acs.unt.edu/Rdoc/library/urn/html/urn.html) 但手动而不是使用 urn 包

我尝试了以下代码，但生成的样本不是唯一的，我从“数据”中随机选择行

```
for(j in 1:10) {
    x=unique(data[,2])
    tr=sample(length(x),0.9*length(x),replace=FALSE)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:02:48.163

考虑到@ElKamina 的评论，您可以使用生成 100 个数字`sample`并将它们分配到 10 x 10 矩阵中：

```
matrix(sample(1:1000, 100, FALSE), ncol=10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:11:58.290

我喜欢样本 100 个值，最好将它们放在 10 x 10 矩阵中，但另一种选择是从完整列表中对第一个 10 进行采样，然后用于`setdiff`计算没有已经选择的 10 个的集合，从中选择另一个 10分组，`setdiff`再次使用等

如果您不提前知道有多少样本或每个样本中有多少，这种方法可能会更好，但在这些情况下，您可以使用`sample`随机排列 1000 的整个列表，然后从排列列表中挑选组。

# variables - Maven：使用另一个类的默认值创建插件变量？

> ID：15883733
> 
> 赞同：1
> 
> 时间：2013-04-08T15:57:12.647
> 
> 标签：variables, maven, parameters, global-variables, default-value

我有一个正在创建的插件，它有一个像这样的参数：

```
/** 
 * Global variable as maven plugin parameter
 * @parameter expression="${plugin.var}" default-value=OtherClass.GLOBAL_VAR
 */
private int var; 
```

我有另一个类`OtherClass`，它有一个`public final static int GLOBAL_VAR;`.

我如何能够从实际插件软件的变量中设置默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:10:50.480

您可以省略默认值的声明并`OtherClass.GLOBAL_VAR`直接分配给`var`：

```
/** 
 * Global variable as maven plugin parameter
 * @parameter expression="${plugin.var}"
 */
private int var = OtherClass.GLOBAL_VAR; 
```

只要`${plugin.var}`没有定义，`var`就不会改变它的值。

# android - 如何在 Android 应用程序的 LinearLayout 中对齐按钮？

> ID：15883735
> 
> 赞同：0
> 
> 时间：2013-04-08T15:57:21.640
> 
> 标签：android, android-xml

我是一个初学者，正在尝试创建一个计算器。

我无法对齐单个 3 按钮`LinearLayout`。

我的 LinearLayout 的calculator.xml 代码是。

```
 <Button
        android:id="@+id/btnOne"
        android:layout_height="wrap_content"
        android:layout_weight="0.32"
        android:layout_width="107dp"
        android:background="@android:color/darker_gray"
        android:text="1" />

    <Button
        android:id="@+id/btnPlus"
        android:layout_height="wrap_content"
        android:layout_weight="0.24"
        android:layout_width="107dp"
        android:text="+" />

    <Button
        android:id="@+id/btnEquals"
        android:layout_width="107dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.31"
        android:text="=" />
</LinearLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/scMNr.png)

如何将 3 个按钮排成一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:59:52.547

`android:orientation="horizontal"`在`LinearLayout`包含`Button`s 的中使用。
就像是：

```
<LinearLayout
    android:orientation="vertical"     
    ..>

    <EditText>

    <LinearLayout
       android:orientation="horizontal" 
       ..>

          <Button .... />
          <Button .... />
          <Button .... />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:01:24.443

正如其他用户所说，您可以`android:orientation="horizontal"`在内部使用：`LinearLayout`

```
<LinearLayout 
    android:orientation="horizontal"
    ......>
<Button
    DockPanel.
    android:id="@+id/btnOne"
    android:layout_height="wrap_content"
    android:layout_weight="0.32"
    android:layout_width="107dp"
    android:background="@android:color/darker_gray"
    android:text="1" />

<Button
    android:id="@+id/btnPlus"
    android:layout_height="wrap_content"
    android:layout_weight="0.24"
    android:layout_width="107dp"
    android:text="+" />

<Button
    android:id="@+id/btnEquals"
    android:layout_width="107dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.31"
    android:text="=" />
</LinearLayout> 
```

或者您可以尝试将按钮插入`StackPanel`带有`Horizontal`方向的内部：

```
<StackPanel Orientation="Horizontal">
<Button
    DockPanel.
    android:id="@+id/btnOne"
    android:layout_height="wrap_content"
    android:layout_weight="0.32"
    android:layout_width="107dp"
    android:background="@android:color/darker_gray"
    android:text="1" />

<Button
    android:id="@+id/btnPlus"
    android:layout_height="wrap_content"
    android:layout_weight="0.24"
    android:layout_width="107dp"
    android:text="+" />

<Button
    android:id="@+id/btnEquals"
    android:layout_width="107dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.31"
    android:text="=" />
</StackPanel> 
```

我现在没有尝试代码，所以请告诉我这对你来说是否是一个好的解决方案。

您也可以使用`DockPanel`, 左右。我建议您阅读有关`Layouts`android 的任何好的教程。这将对您理解布局有很大帮助。

[任何布局教程（随机）](http://developer.android.com/guide/topics/ui/declaring-layout.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:02:00.797

在第一个内部使用第二个 LinearLayout。把它放在edittext下面。将其方向设置为水平并将所有按钮放入其中。将按钮设置为填充父级。将每个按钮的权重更改为 1。现在所有三个按钮的大小将相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:10:39.963

使用内部线性布局来做到这一点：

```
<LinearLayout
           android:orientation="horizontal" 
            ......>

          <Button .... />
          <Button .... />
          <Button .... />

</LinearLayout> 
```

# html - 如何在 iOS 主屏幕上为图标设置自定义 URL

> ID：15883736
> 
> 赞同：11
> 
> 时间：2013-04-08T15:57:22.803
> 
> 标签：html, iphone, mobile-safari, favorites

是否可以为 iOS 主屏幕上的图标创建自定义 URL？或者至少有办法让用户自己编辑 URL？

更新：更具体地说，这是客户所说的：

“由于我们使用了身份验证，[网站] 将您带到的登录页面的 URL 更改为带有会话 ID 的长 URL。现在，当我使用添加到主屏幕功能时，它会将图标与长 URL，由于会话 ID，几天后将无法工作。在调用添加到主屏幕功能之后或之前，有什么方法可以将 URL 更改为 [website]（我们的稳定和持久的 URL） "

此外，该网站不是网络应用程序，所以我不确定网络应用程序是否适用于此.....？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-12-05T12:52:30.850

我刚刚在 iPhone 6 上试过这个。

1.  转到设置并将飞行模式打开
2.  转到 Safari 并输入您想要为其添加图标的地址
3.  单击“前往”。该页面将无法加载，但地址将保持不变。
4.  单击 URL 输入栏旁边的 AirDrop 图标（横向模式），然后单击 + 按钮。
5.  将站点名称更改为您想要的图标标题
6.  转到设置并将飞行模式关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T21:07:54.493

如果您安装 iPhone 配置实用程序，[您可以使用自定义 URL 在主屏幕上制作自定义图标](http://www.ifans.com/forums/threads/custom-icons-without-jailbreak-or-internet.391089/)（包括应用程序 URL 方案，只要您可以先通过 Safari）。它不需要越狱或连接到 Internet。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-01T13:47:45.523

bcampolo 的解决方案适用于我的 8 plus ios 14.5。我不得不稍微调整一下并且没有使用空投。我开了飞行模式。将 URL 粘贴到 safari - 点击 go - （显然没有加载）然后点击共享图标（带有方形的向上箭头） - 添加到主屏幕 - （现在 URL 是正确的，而不是默认为网站主页面）删除标题“无法加载页面”（说了一些影响）输入我想要的图标的标题 - 此时图标缩略图为白色 - 关闭飞行模式 - 点击我刚刚制作的主屏幕图标......。它有效！它甚至将图标的图片从白色/空白更改为网站的正确图像/缩略图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T07:12:53.287

是的，您可以在 .mobileconfig 文件的帮助下创建自定义 URL 和图标。有一个技巧，首先使用“Apple Configurator 2”创建 mobileconfig 文件，并将其与您的 html 或网页（如按钮）链接。如果需要任何帮助，请告诉我...

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-08T16:56:13.770

这个答案不再有效。

* * *

不，由于安全限制，不可能这样做。您需要在 Web 应用程序端处理那些过期的会话 ID - 它通常通过重定向到身份验证页面来完成，大多数 Web 框架应该为您开箱即用地执行此操作。

相关：[可以自定义 iPhone Safari 上“添加到主屏幕”的 url 吗？](https://stackoverflow.com/questions/10887676/can-the-url-for-the-add-to-home-screen-on-iphone-safari-be-customized)

# spring - 如何使用 Spring REST API 进行文件上传并使用 RestTemplate 进行测试

> ID：15883738
> 
> 赞同：2
> 
> 时间：2013-04-08T15:57:28.897
> 
> 标签：spring, rest, resttemplate

我想要，

1)使用**Spring Rest API实现一些****REST 服务方法**，以便从我的远程 Web 客户端上传一些文件。

 **2) 使用我的基于**RestTemplate**的远程 Web 客户端进行测试。

如果有人有任何想法，请帮助我。谢谢。

我的一些 Spring REST API 基本方法如下，

```
@RequestMapping(value="user/create/{userRoleName}", method=RequestMethod.POST)
    public @ResponseBody User create(@RequestBody User user, @PathVariable String userRoleName, HttpServletResponse response) { } 
```

我的一些远程客户端的 Spring RestTemplate 基本代码如下，

```
Map<String, String> vars = new HashMap<String, String>();
            vars.put("userRoleName", userRoleName);
            ResponseEntity<User> REcreateUser = restTemplate.postForEntity(IMC_LAB_SKELETON_URL + "/user/create/{userRoleName}", newUser, User.class, vars);
            User createUser = REcreateUser.getBody(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:44:21.360

尝试这个：

```
public class FileUploadService { 
    @POST
    @Path("/file")
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    public Response upload(Attachment attachment,@Context HttpServletRequest request) {
            DataHandler handler = attachment.getDataHandler();
            try {
                InputStream stream = handler.getInputStream();
                MultivaluedMap map = attachment.getHeaders();
                OutputStream out = new FileOutputStream(new File(getFileName(map)));

                int read = 0;
                byte[] bytes = new byte[1024];
                while ((read = stream.read(bytes)) != -1) {
                    out.write(bytes, 0, read);
                }
                stream.close();
                out.flush();
                out.close();
            } catch(Exception e) {
              e.printStackTrace();
            }
        }

        return Response.ok("file uploaded").build();
    } 
```

这可以很容易地用`RestTemplate`.

**进口：**

*   [媒体类型](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/MediaType.html)
*   [附件](http://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxrs/ext/multipart/Attachment.html)
*   [多值映射](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/MultivaluedMap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T04:42:13.737

```
 HttpHeaders headers = new HttpHeaders();
 headers.setContentType(MediaType.MULTIPART_FORM_DATA);
 MultiValueMap<String, Object> bodyMap = new LinkedMultiValueMap<>();
 //Json Payload as String
 bodyMap.add("payload", payload);
 for (File file : fileArray) {
   bodyMap.add("file", new FileSystemResource(file));
 }
 HttpEntity<MultiValueMap<String, ?>> entity = new           
 HttpEntity<MultiValueMap<String, ?>>(bodyMap, headers); 
```**

# c# - ServiceStack：在处理程序中设置响应类型？

> ID：15883740
> 
> 赞同：1
> 
> 时间：2013-04-08T15:57:35.133
> 
> 标签：c#, servicestack

在独立模式下使用 ServiceStack，我在我的 Apphost 中为任意文件名定义了一个包罗万象的处理程序（它只会从数据目录中提供文件）。

它的核心方法是（`fi`是一个`FileInfo`成员变量，`ExtensionContentType`是一个`Dictionary`从扩展到MIME的类型）：

```
public class StaticFileHandler : EndpointHandlerBase
{
    protected static readonly Dictionary<string, string> ExtensionContentType;

    protected FileInfo fi;

    static StaticFileHandler()
    {
        ExtensionContentType = new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase) 
        {
            { ".text", "text/plain" },
            { ".js", "text/javascript" },
            { ".css", "text/css" },
            { ".html", "text/html" },
            { ".htm", "text/html" },
            { ".png", "image/png" },
            { ".ico", "image/x-icon" },
            { ".gif", "image/gif" },
            { ".bmp", "image/bmp" },
            { ".jpg", "image/jpeg" }
        };
    }

    public string BaseDirectory { protected set; get; }
    public string Prefix { protected set; get; }

    public StaticFileHandler(string baseDirectory, string prefix)
    {
        BaseDirectory = baseDirectory;
        Prefix = prefix;
    }

    private StaticFileHandler(FileInfo fi)
    {
        this.fi = fi;
    }

    public static StaticFileHandler Factory(string baseDirectory, string prefix, string pathInfo)
    {
        if (!pathInfo.StartsWith(prefix, StringComparison.InvariantCultureIgnoreCase))
        {
            return null;
        }

        var fn = baseDirectory + "/" + pathInfo.After(prefix.Length);

        Console.Write("StaticFileHandler.Factory fn=" + fn);

        Console.WriteLine("AbsoluteUri={0}", pathInfo);

        var fi = new System.IO.FileInfo(fn);

        if (!fi.Exists)
        {
            return null;
        }

        return new StaticFileHandler(fi);
    }

    public override void ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, string operationName)
    {
        using (var source = new System.IO.FileStream(fi.FullName, System.IO.FileMode.Open))
        {
            source.CopyTo(httpRes.OutputStream);
            //var bytes = source.ReadAllBytes();
            //httpRes.OutputStream.Write(bytes, 0, bytes.Length);
        }

        // timeStamp = fi.LastWriteTime;                        

        httpRes.AddHeader("Date", DateTime.Now.ToString("R"));
        httpRes.AddHeader("Content-Type", ExtensionContentType.Safeget(fi.Extension) ?? "text/plain");
        //httpRes.ContentType = ExtensionContentType.Safeget(fi.Extension, "text/plain");
    }

    public override object CreateRequest(IHttpRequest request, string operationName)
    {
        return null;
    }

    public override object GetResponse(IHttpRequest httpReq, IHttpResponse httpRes, object request)
    {
        return null;
    }
} 
```

当我使用标记为方法 1 或方法 2 的行运行时，未设置实际的 HTTP Response-Type 标头。使用 IE9 开发人员工具进行调试显示根本没有设置响应类型。

从包罗万象的处理程序设置内容类型（和流内容）的正确方法是什么？

这不是标准服务，所以我不能只返回一个自定义的`IHttpResponse`，这似乎是服务的正常方法。

附加信息：日期标题也未设置...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:12:52.377

我认为问题在于这条线`source.CopyTo(httpRes.OutputStream);`

如果您执行类似的操作，则应填充标题

```
public override void ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, string operationName)
{
    var bytes = File.ReadAllBytes(fi.FullName);                   
    httpRes.AddHeader("Date", DateTime.Now.ToString("R"));
    httpRes.AddHeader("Content-Type", "text/plain");
    httpRes.AddHeader("TestHeader", "SomeValue");
    httpRes.OutputStream.Write(bytes, 0, bytes.Length);
} 
```

**用于测试答案的简单控制台应用程序**

初始化 ServiceStack AppHost 并在控制台中运行它：

```
class Program
{
    static void Main(string[] args)
    {
        var appHost = new AppHost();
        appHost.Init();
        appHost.Start("http://*:1337/");
        System.Console.WriteLine("Listening on http://localhost:1337/ ...");
        System.Console.ReadLine();
        System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
    }
} 
```

一些虚拟服务......对于这个答案来说并不是必需的：

```
[Route("/Hello/{Name}")]
public class Hello
{
    public string Name { get; set; }
}

public class HelloService : Service
{
    public string Any(Hello request)
    {
        return request.Name;
    }
} 
```

配置 AppHost 并将“被测代码”添加到 CatchAllHanders：

```
public class AppHost : AppHostHttpListenerBase
{
    public AppHost() : base("Test Console", typeof(AppHost).Assembly) { }

    public override void Configure(Funq.Container container)
    {
        CatchAllHandlers.Add(StaticFileHandler.Factory);
    }

} 
```

修改了“被测代码”——主要需要到达 ProcessRequest() 并返回一个文件：

```
public class StaticFileHandler : EndpointHandlerBase
{
    protected static readonly Dictionary<string, string> ExtensionContentType;

    protected FileInfo fi;

    static StaticFileHandler()
    {
        ExtensionContentType = new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase) 
    {
        { ".text", "text/plain" },
        { ".js", "text/javascript" },
        { ".css", "text/css" },
        { ".html", "text/html" },
        { ".htm", "text/html" },
        { ".png", "image/png" },
        { ".ico", "image/x-icon" },
        { ".gif", "image/gif" },
        { ".bmp", "image/bmp" },
        { ".jpg", "image/jpeg" }
    };
    }

    public string BaseDirectory { protected set; get; }
    public string Prefix { protected set; get; }

    public StaticFileHandler(string baseDirectory, string prefix)
    {
        BaseDirectory = baseDirectory;
        Prefix = prefix;
    }

    private StaticFileHandler(FileInfo fi)
    {
        this.fi = fi;
    }

    public static StaticFileHandler Factory(string baseDirectory, string prefix, string pathInfo)
    {
        return new StaticFileHandler(new FileInfo(@"C:\Test.xml"));
    }

    public override void ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, string operationName)
    {
        var bytes = File.ReadAllBytes(fi.FullName);

        httpRes.AddHeader("Date", DateTime.Now.ToString("R"));
        httpRes.AddHeader("Content-Type", "text/plain");
        httpRes.AddHeader("Test", "SetThis");

        httpRes.OutputStream.Write(bytes, 0, bytes.Length);
    }

    public override object CreateRequest(IHttpRequest request, string operationName)
    {
        return null;
    }

    public override object GetResponse(IHttpRequest httpReq, IHttpResponse httpRes, object request)
    {
        return null;
    }
} 
```

# c - 从文件中读取字符并将它们存储在 C 中的变量中

> ID：15883743
> 
> 赞同：3
> 
> 时间：2013-04-08T15:57:48.170
> 
> 标签：c

我正在尝试从文件中逐字符读取并将字符存储在变量中。

只需要文件第一行的内容，所以我正在使用`\n`或`EOF`停止阅读。它也需要存储`SPACE`。

这是我的程序：

```
#include<stdio.h>
#include<string.h>

void main()
{
  FILE *fp;
  char ch;
  char txt[30];
  int len;
  fp=fopen("~/hello.txt","r");
  ch=fgetc(fp);
  while(ch != EOF || ch!="\n")
  {
    txt[len]=ch;
    len++;
    ch=fgetc(fp);
  }
   puts(txt);
} 
```

但是我在编译指针和整数之间的比较时收到警告。当我运行它时，我遇到了分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T15:59:48.517

你在比较错误的东西。尝试：

```
ch != '\n'
      ^  ^ 
```

此外，正如在其他答案中发现的那样，您在使用`len`时没有初始化它。

最后，您确实意识到`fgets`也可以做到这一点。您可以将其重写为：

```
if (fgets(txt, sizeof txt, fp))
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T16:01:31.110

1)`len`未启动

```
int len=0; 
```

2) 从[fgetc()](http://cplusplus.com/reference/cstdio/fgetc/)页面：

```
int fgetc ( FILE * stream ); 
```

所以`fgetc()`返回`int`而不是`char`所以你必须定义`ch`为`int`

```
int ch; 
```

3) 除了***cnicutar***备注外，`while`条件应检查与`&&`而不是`||`：

```
while(ch != EOF && ch!='\n') 
```

`txt`4）完成从文件读取后，您必须在缓冲区末尾添加空终止符。

`while`在循环之后添加这一行

```
txt[len]='\0'; 
```

* * *

**顺便说一句**`fscanf()`，您可以更轻松地阅读第一行。只需使用以下代码

```
fscanf(fp, "%29[^\n]", txt); 
```

将读取除字符之外的所有字符的`"%[^\n]"`方法，如果获取此字符，它将停止读取。因此， 它将读取所有字符，直到找到字符并将它们保存到最后带有空终止符字符的缓冲区中。`fscanf``fp``'\n'``fscanf``fp``'\n'``txt`

将读取所有字符的`"%29[^\n]"`方法，直到它找到字符或直到它达到 29 个读取的字符并将它们保存到最后带有空终止字符的缓冲区中。`fscanf``fp``'\n'``txt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:01:04.100

`len`未初始化，因此您可能正在尝试编写超出`txt`. 修复很简单 - 将其初始化为`0`声明

```
int len = 0; 
```

除了 cnicutar 指出的错误，你还应该检查`fopen`使用之前的返回值`fp`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:10:24.853

```
#include<stdio.h>
#include<string.h>

void main()
{
  FILE *fp;
  char ch;
  char txt[30];
  int len = 0;
  fp=fopen("~/hello.txt","r");
  if(!fp) {
    printf("Cannot open file!\n");
    return;
  }
  ch=fgetc(fp);
  while(ch != EOF && ch!= '\n' && len < 30)
  {
    txt[len] = ch;
    len++;
    ch=fgetc(fp);
  }
  txt[len] = 0;
  puts(txt);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-30T16:37:02.070

该程序可以帮助您解决问题。

```
 #include<stdio.h>

     int main()
     {
       FILE *fp;
       int ch;
       char txt[300];
       int len=0;
       fp=fopen("tenlines.txt","r");

       do{
           ch=fgetc(fp);
           txt[len]=ch;
           len++;
         } while(ch!=EOF && ch!='\n');
     fclose(fp);
     puts(txt);

     return 0;
    } 
```

# entity-framework - 带有 EF 6 的 Mono 3 - 有人有运气吗？

> ID：15883744
> 
> 赞同：7
> 
> 时间：2013-04-08T15:57:49.857
> 
> 标签：entity-framework, mono, entity-framework-6

我正在尝试获得一个概念验证应用程序，它使用 Entity Framework 6 和 Mono 3.0.6 - 经过 2 天的试验，我放弃了。我可以查看周围的任何示例应用程序吗？我用谷歌搜索 - 没有运气。

我试图使用来自 mono/GAC 的“EntityFramework.dll”库——在这种情况下，项目甚至没有进入 main() 函数——在那之前我得到了 IL 异常。

我尝试从 NuGet 下载 EF6 alpha 3 - 但随后项目在执行过程中崩溃：

```
System.NullReferenceException: Object reference not set to an instance of an object at System.Data.Entity.Core.SchemaObjectModel.EntityKeyElement.Validate () [0x00000] in <filename unknown>:0

at System.Data.Entity.DropCreateDatabaseIfModelChanges`1[MonoTest.EF.FooContext].InitializeDatabase (MonoTest.EF.FooContext context) [0x00000] in <filename unknown>:0

at System.Data.Entity.Internal.InternalContext+<>c__DisplayClassc`1[MonoTest.EF.FooContext].<CreateInitializationAction>b__b () [0x00000] in <filename unknown>:0

at System.Data.Entity.Internal.InternalContext.PerformInitializationAction (System.Action action) [0x00000] in <filename unknown>:0

at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization () [0x00000] in <filename unknown>:0

at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4 (System.Data.Entity.Internal.InternalContext c) [0x00000] in <filename unknown>:0

at System.Data.Entity.Internal.RetryAction`1[System.Data.Entity.Internal.InternalContext].PerformAction (System.Data.Entity.Internal.InternalContext input) [0x00000] in <filename unknown>:0 
```

所以我不确定发生了什么。Mono 团队说 EF 是半年前作为 Mono 的一部分发货的——有人用过吗？

我将不胜感激任何链接或源代码或提示让这件事继续下去。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:30:43.293

我相信这是 EF 中的一个错误。我[尝试](http://blog.3d-logic.com/2013/04/14/entity-framework-6-on-mono/)了 EF6 + Mono，并以相同的方法遇到了 NullReferenceException。我为此提交了一个[错误](https://entityframework.codeplex.com/workitem/1037)。您可能想要创建一个盗版并自行修复错误，直到它在产品中修复 - 我在帖子中描述了如何做到这一点。

# ssl - 将 ssl 证书导入 glassfish (pfx)

> ID：15883745
> 
> 赞同：0
> 
> 时间：2013-04-08T15:57:49.863
> 
> 标签：ssl, ssl-certificate, glassfish-3

我正在尝试将 ssl 证书导入 glassfish，但我不清楚这是如何完成的。

*   我有两个 pfx 文件，我们称它们为 cert1.pfx 和 cert2.pfx。
*   基于以下 stackoverflow 答案（[How to convert .pfx file to keystore with private key?](https://stackoverflow.com/questions/4217107/how-to-convert-pfx-file-to-keystore-with-private-key)），我在我的*domain-root* /config 文件夹下生成了两个 .jks 文件，cert1.jsk 和 cert2.jks。命令我用的是：

    ```
    keytool -importkeystore -srckeystore cert1.pfx -srcstoretype pkcs12 -destkeystore cert1.jks -deststoretype JKS 
    ```

    和

    ```
    keytool -importkeystore -srckeystore cert2.pfx -srcstoretype pkcs12 -destkeystore cert2.jks -deststoretype JKS 
    ```

*   这些证书现在位于 config 文件夹中，但我不确定如何让 glassfish 实际读取这些密钥库。

有人可以告诉下一步该怎么做吗？它与keytool和-import有关吗？

# c++ - 与c ++匹配的括号

> ID：15883746
> 
> 赞同：0
> 
> 时间：2013-04-08T15:57:52.367
> 
> 标签：c++, string, parsing, lex

我正在使用 c++ 读取文件并通过键名获取键值。关键是这个文件中的键名可能会重复很多次。它们的结构如下。

## 数据文件格式

请记住，现在我对原始代码没有太多控制权，这就是这个数据文件的格式。

```
dictName
{
    keyA 9;
    keyB 3;
    keyC 5;

    subDictName
    {
        keyD 0.57;
        keyE 5.23;
    }
}

anotherDictName
{
    keyG 6;
    keyC 1;

    subDictName
    {
        keyF 0.17;
        keyE 2.21;
    }
} 
```

我写了以下代码，但我发现它不够干净，有人知道在 C++ 中处理括号匹配的更好解决方案吗？

## 我写的代码

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>
#include <algorithm>

using namespace std;

int main()
{
    ifstream inf(fileName);
    istream_iterator<string> first(inf), last;
    vector<string> lines(first, last);

    for (unsigned i = 0; i < lines.size(); ++i)
    {
        if (size_t pos1 = lines[i].find(dictName) != string::npos)
        {
            size_t len1 = string(dictName).length();
            if (!isalnum(lines[i][pos1+len1+1]))
            {
                unsigned lineSta = 0;
                unsigned lineEnd = 0;
                for (unsigned j = i+1; j < lines.size(); ++j)
                {
                    if (lines[j].find("{") != string::npos)
                    {
                        lineSta = j+1;
                        break;
                    }
                }
                for (unsigned k = lineSta+1; k < lines.size(); ++k)
                {
                    if (lines[k].find("}") != string::npos)
                    {
                        lineEnd = k-1;
                        break;
                    }
                }
                for (unsigned l = lineSta; l <= lineEnd; ++l)
                {
                    if (size_t pos2 = lines[l].find(keyName) != string::npos)
                    {
                        size_t len2 = string(keyName).length();
                        if (!isalnum(lines[l][pos2+len2+1]))
                        {
                            outputStr = split(lines[l+1], ';')[0];
                            cout<< "outputStr = " << outputStr << endl;
                            break;
                        }
                    }
                }
            }
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:22:33.353

由于这是一种现有格式，我将首先寻找一个现有的程序或库来读取它。否则，传统的解决方案将是使用 Bison 和 Flex。我确信也可以使用 Boost 和其他现代工具，但我更熟悉 Bison 和 Flex。

为了展示原理，这里有一个使用 Bison 和 Flex 的最小解决方案，可以解析您的示例输入文件。我可能误解了您输入的格式，因此请谨慎使用。

首先是 Bison 文件，它指定输入的语法：

```
%{
#include <iostream>
extern int yylex();
extern void yyerror(char* message);
%}

%token ID INT FLOAT

%%

dicts : dicts dict | /* empty */ ;
dict : ID '{' keys subdict '}' { std::cout << "Done a dict.\n"; } ;
keys : keys key | /* empty */ ;
key : ID INT ';' { std::cout << "Done a key.\n"; };
subdict : ID '{' subkeys '}' { std::cout << "Done a subdict.\n"; } ;
subkeys : subkeys subkey | /* empty */ ;
subkey : ID FLOAT ';' { std::cout << "Done a subkey.\n"; };

%%

void yyerror(char* message) {
    std::cout << "Error: " << message << "\n";
}

int main() {
    std::cout << "Staring parser...\n";
    yyparse();
    std::cout << "Parser done.\n";
    return 0;
} 
```

然后是一个 Flex 文件，它定义了输入中各个标记的格式：

```
%{
#include "parser.tab.h"
%}

%%

[ \t\n]         { }
[0-9]+\.[0-9]+  { return FLOAT; }
[0-9]+          { return INT; }
[A-Za-z]+       { return ID; }
";"             { return ';'; }
"{"             { return '{'; }
"}"             { return '}'; }

%% 
```

我为您的输入文件得到此输出：

```
Staring parser...
Done a key.
Done a key.
Done a key.
Done a subkey.
Done a subkey.
Done a subdict.
Done a dict.
Done a key.
Done a key.
Done a subkey.
Done a subkey.
Done a subdict.
Done a dict.
Parser done. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:31:48.323

我不禁注意到，这与[Boost::property_tree](http://www.boost.org/doc/libs/release/libs/property_tree/)中的 INFO 解析器所支持的格式完全相同，但以分号结尾的值除外。以一种从键值中去除分号的方式包装它应该是微不足道的；无论如何，比自己编写输入/输出和处理函数要容易得多且不易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:32:23.963

您可能应该研究递归算法

这是一个 wiki 链接，它可能有助于[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)

实现起来比你的方法更复杂，但更干净、更强大

# vim - vim 两次执行 diff 命令

> ID：15883753
> 
> 赞同：2
> 
> 时间：2013-04-08T15:58:23.790
> 
> 标签：vim, diff

我发现我的 vim 有一个特殊的行为：它执行每个 diff 命令两次，我不知道为什么。

~~（我在 Windows 上运行它，我怀疑这与它有关。）~~根据答案，它没有。

所以我在我的 vimrc 中有这个：

```
set diffexpr=MyDiff()

function! DoubleQuoteCond(s)
  return a:s =~ ' ' ? '"' . a:s . '"' : a:s
endfunction

function! MyDiff()
   if &shell =~ '\<cmd'
    let prog = DoubleQuoteCond($VIMRUNTIME . '\diff')
  else
    let prog = substitute($VIMRUNTIME, ' ', '" ', '') . '\diff')
  endif

  let opt = '-a --binary'
  if &diffopt =~ 'icase' | let opt .= ' -i' | endif
  if &diffopt =~ 'iwhite' | let opt .= ' -b' | endif

  let file1 = DoubleQuoteCond(v:fname_in)
  let file2 = DoubleQuoteCond(v:fname_new)
  let file3 = DoubleQuoteCond(v:fname_out)

  let cmdline = join([prog, opt, file1, file2, '>', file3], ' ')

  " no silent execute for debugging reasons
  execute '!' . cmdline 
endfunction 
```

构建`cmdline`这样一个非常简单的函数：

```
"C:\Program Files\Vim\vim\diff" -a --binary C:\Temp\VIoCC20.tmp C:\Temp\VInCC21.tmp > C:\Temp\VIdCC22.tmp 
```

现在发生这种情况：

*   执行这个cmdline，弹出一个cmd窗口，文件`VIdCC22.tmp`就创建好了。
    由于不是，`silent execute`我必须按 Enter 键才能继续。
*   *在那之后 vim再次*执行相同的操作，就好像`MyDiff()`被调用了两次一样。
*   现在 vim 获取 diff 输出并按预期显示它。

当我设置`diffexpr`为`''`diff 时，shell 命令只执行一次。

第二次执行从何而来？我能做些什么来防止它（当然，除了不使用 custom `diffexpr`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:22:20.493

当你设置`'diffexpr'`

> 如果 diff 输出看起来没问题，Vim 会做一个测试。

（这是从`:help E810`。）

你无法避免这一点。但是，您可以检查测试，因为 Vim 传递恒定的虚拟文件内容（分别为“line1”和“line2”），并在这种情况下短路外部命令执行，如下所示：

```
if
\   getfsize(v:fname_in) <= 6 &&
\   getfsize(v:fname_new) <= 6 &&
\   readfile(v:fname_in, 0, 1)[0] ==# 'line1' &&
\   readfile(v:fname_new, 0, 1)[0] ==# 'line2'
    return
endif 
```

# android - android 生命周期 onActivityResult 与 onStop

> ID：15883754
> 
> 赞同：8
> 
> 时间：2013-04-08T15:58:24.203
> 
> 标签：android, android-lifecycle

如果活动A启动活动B的结果，我的印象是活动B的onStop方法在活动A的onActivityResult方法之前被调用。为什么不是这样？我刚刚使用设置的静态变量对其进行了测试，`B.onStop`但是当我在`A.onActivityResult`变量中读取它时，它直到为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:51:44.983

我认为您想要做的是 call `onPause`，但是，您不想在那里做太多事情。[这是文档所说的](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)：

> protected void onPause () 在 API 级别 1 中添加
> 
> 当活动进入后台但尚未（尚未）被杀死时，作为活动生命周期的一部分调用。onResume() 的对应项。
> 
> 当活动 B 在活动 A 之前启动时，将在 A 上调用此回调。在 A 的 onPause() 返回之前不会创建 B，因此请确保此处不要做任何冗长的事情。
> 
> 此回调主要用于保存活动正在编辑的任何持久状态，向用户呈现“就地编辑”模型，并确保如果没有足够的资源来启动新活动而没有首先杀死该活动，则不会丢失任何内容。这也是一个很好的地方来做一些事情，比如停止动画和其他消耗大量 CPU 的事情，以便尽快切换到下一个活动，或者关闭诸如相机之类的独占访问资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T22:55:42.550

我认为您的印象是错误的，`onActivityResult`之前调用过，并且在活动周期图之后的表格中的 http://developer.android.com/reference/android/app/Activity.html[的](http://developer.android.com/reference/android/app/Activity.html)`onResume`文档状态`onStop`

> 当活动不再对用户可见时调用，因为另一个**活动已恢复并正在覆盖该活动**。这可能是因为正在启动一项新活动，正在将现有活动带到这个活动之前，或者这个活动正在被破坏。

因此`onResume`，在 A 中被调用之前`onStop`，在 B 中被调用。

# java - 无法启动安卓模拟器

> ID：15883758
> 
> 赞同：0
> 
> 时间：2013-04-08T15:58:29.217
> 
> 标签：java, android, android-emulator, adt

我正在使用 Fedora 17。并且一直在使用 ADT 捆绑包。但是系统无法创建虚拟机。

```
Starting emulator for AVD 'AVD_for_Nexus_S_by_Google'
Failed to start emulator: Cannot run program "/home/anshul/LinuxUtilityLab/Android/adt-bundle-linux-x86_64-20130219/sdk//tools/emulator": error=2, No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:39:54.800

If you are running a 64-bit distribution on your development machine, you need to install the ia32-libs package using apt-get.

Open a terminal and type the following.

```
 apt-get install ia32-libs 
```

[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html). Check the the link under TroubleShooting linux

Edit

Try the below

[https://ask.fedoraproject.org/question/9556/how-do-i-install-32bit-libraries-on-a-64-bit-fedora/](https://ask.fedoraproject.org/question/9556/how-do-i-install-32bit-libraries-on-a-64-bit-fedora/)

[https://ask.fedoraproject.org/question/8969/installing-android-sdk-on-64-bit-fedora/](https://ask.fedoraproject.org/question/8969/installing-android-sdk-on-64-bit-fedora/)

```
sudo yum install libstdc++.i686
sudo yum install ncurses-libs.i686
sudo yum install zlib.i686 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:02:41.160

我在错误消息的路径中看到 sdk 和 tools 之间有两个斜杠，我将从那里开始。

.../sdk//工具/...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T08:40:31.963

您不再需要安装包！

在目录工具中，有很多类型`emulator`，而我的电脑使用`emulator64-arm`！我的系统是`Linux Mint 16 amd64`！祝你好运！

```
./emulator64-arm @yxphone -sdcard yxsd -scale 0.8 
```

# javascript - 使用 Trigger.io 和 Parse 登录 Facebook

> ID：15883761
> 
> 赞同：1
> 
> 时间：2013-04-08T15:58:38.630
> 
> 标签：javascript, trigger.io, parse-platform, hybrid-mobile-app

所以我正在尝试为我的 Trigger.io 应用程序实现 Facebook 登录，但我不知道从 Parse SDK 中使用哪种方法。

目前我在登录函数中使用 Trigger.io 的方法和一个不起作用的 Parse 方法：

```
function login() {
  forge.facebook.authorize(function (success) {
    Parse.FacebookUtils.logIn({
      authData: success
    });
  });
} 
```

我在成功回调变量中得到的是 Facebook 访问令牌以及访问何时到期。它们的访问方式如下：

```
success.access_token
success.access_expires 
```

有谁知道我需要调用以在 Parse 中登录/存储用户的正确方法和参数？

# android - 扫描android中打开的网络端口

> ID：15883764
> 
> 赞同：0
> 
> 时间：2013-04-08T15:58:44.767
> 
> 标签：android, networking

有没有办法通过android扫描开放的网络端口？例如，在阻止我通过某些端口发送 UDP 数据包的防火墙后面。那么有没有办法扫描哪些端口没有被防火墙阻止到互联网？也许是终端应用程序或以编程方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:08:38.490

是的，这是可能的，但绝非易事。您可以打开套接字并使用标准 TCP 网络。扫描端口完全是另一回事。

# php - 在 ZF2 中使用 ZfcUser 生成用户帐户

> ID：15883766
> 
> 赞同：3
> 
> 时间：2013-04-08T15:58:48.573
> 
> 标签：php, authentication, zend-framework2, zfcuser

我想使用[ZfcUser](https://github.com/ZF-Commons/ZfcUser)在 Zend Framework 2 中任意生成用户帐户，然后我可以使用激活链接或一些临时凭据通过电子邮件发送给用户。我不确定是否可以扩展 ZfcUser 以安全地执行此操作，因此我正在寻求帮助和建议。

我需要在我的推荐信功能申请中这样做。它由现有用户（以“正常”方式使用 ZfcUser 注册的人）通过提供该人的电子邮件地址来请求某人的推荐信来工作。那时，我想使用 ZfcUser 和给定的电子邮件生成一个帐户，并通知此人有人要求他们提供推荐信，他们应该登录并完成它。

我为每个信件请求提供了一个一次性使用链接，但我觉得为每封电子邮件和相关用户创建一个帐户更有意义，以便收到多个信件请求的人可以登录并成为在一个地方呈现他们的所有请求。我还认为将这些类型的用户帐户分隔到我的数据库中的不同用户表中可能是明智的，或者至少将一个标志字段附加到我当前的用户表模式中。

我应该注意，我目前还在将 CdliTwoStageSignup 与 ZfcUser 结合使用。我也不一定需要为此使用它，但它在工具包中。

我认为[ZfcUser 'state' 标志](https://stackoverflow.com/questions/15272279/what-exactly-is-the-user-state-in-zfcuser)在这里可能很有用，但这并不是我想要完成的真正困难的部分。

我还在Github 上的[ZfcUser wiki](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-store-custom-form-values-into-your-user-entity-at-registration)中找到了另一个关于如何做到这一点的线索。

我正在寻找使用 ZfcUser 完成此任务的技术帮助，但我绝对愿意接受设计理念或总体改进。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-05T22:18:12.090

如果有人正在寻找如何创建可以使用 ZfcUser 进行身份验证的通用用户，只需创建一个新用户，使用 $bcrypt 将明文密码转换为哈希并将其全部保存到您的用户表中。基本情况概述如下：

```
$newUser = new User();
$newUser->user_id = 'newUserId';
$newUser->email = 'newUser@gmail.com';
$password = 'newUserPassword'//This is extremely bad form, don't do it. You don't want any passwords hanging out in plaintext.

$bcrypt = new Bcrypt();
$bcrypt->setCost(14); 
$newUser->password = $bcrypt->create($password);
$userTable->saveUser($newUser); 
```

我在这里使用的 Bcrypt 成本是 14。您可以使用适合您的应用程序的任何内容，但最好从 ZfcUser 配置文件中提取您的设置。您也可以使用不同的值，Bcrypt 将毫无问题地处理它。

我不建议像在示例中那样在代码中创建帐户并以明文形式保留密码。您通常会立即获得用户输入并对其进行散列而不存储它。

为简洁起见，我省略了一些重要的部分，如用户状态和用户名和显示名等选项。如果您也使用 BjyAuthorize，请不要忘记用户角色。

# php - Wordpress rewrite_rules 未添加 index.php

> ID：15883777
> 
> 赞同：1
> 
> 时间：2013-04-08T15:59:36.163
> 
> 标签：php, wordpress, iis, iirf

不幸的是，我被困在运行 WordPress 网站的 Windows 服务器上。我的主机已安装`iirf`用于 URL 重写。

我终于得到了这个工作，有点小题大做。但是，在生成匹配规则时，`rewrite_rules`WordPress 内部并没有预先设置。`index.php`因此，当服务器发送类似 的请求时`index.php/foo/bar`，WordPress 会尝试将其与`foo/bar`.

我已经创建了一个解决方法，`index`在重新创建规则之前添加到规则中。

```
add_filter('rewrite_rules_array', 'add_index');
function add_index($rules){

foreach ($rules as $rule => $rewrite) {
   if(!strpos($rules[$rule],'index.php') !== false) {
       unset($rules[$rule]);
       $rules['index.php/' . $rule] = $rewrite;
    }

}

return $rules; 
```

}

目前这似乎运行正常，但似乎我正在掩盖一个潜在的问题。WordPress 不应该自动以这种方式创建规则，或者是否有一个我缺少的设置标记是否添加`index.php`？

# html - 在屏幕阅读器中暂停以获取可访问性

> ID：15883778
> 
> 赞同：11
> 
> 时间：2013-04-08T15:59:39.497
> 
> 标签：html, css, accessibility, screen-readers

我一直在使用 Mac OSX 的内置屏幕阅读器来测试我的网站，我知道这不是最好的，但它是我现在所拥有的。但是我发现它并没有在元素的末尾暂停……这是有道理的；但我发现自己放置了隐藏句点以使内容可读：

```
<div class="breakdown">
    <strong>35</strong> New<span class="visuallyhidden">.</span><br>
    <strong>4</strong> Overdue<span class="visuallyhidden">.</span>
</div> 
```

这样做我觉得很脏，但如果我不这样做，要么会破坏设计，要么会以无法理解的连续句子阅读。

有没有人有这种事情的经验可以提供？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T16:11:00.433

如果您在语义上格式化代码，它应该可以正常工作。从您的 HTML 结构的外观来看，您使用的`<br>`标签是出于展示目的。这不是换行符的用途，因此不是标记的语义使用。

您特别希望每一行都是分开的，因此您应该将它们放在包装块级标签中。您可以将每一行包装在一个`p`或`div`标记中，然后屏幕阅读器会正确地将它们分开。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-03-21T04:01:06.070

我建议`aria-label`在您希望屏幕阅读器说出与标签的 html 标记中包含的内容不同的内容时使用。

我会将您的代码更新为：

```
<div class="breakdown">
  <span aria-label="35 New.">
    <strong>35</strong> New
  </span>
  <br>
  <span aria-label="4 Overdue.">
    <strong>4</strong> Overdue
  </span>
</div> 
```

有了这个，屏幕阅读器将在每个周期完全停顿地说以下内容：

> 35 新。4 逾期。

我们专门针对 ChromeVox，但这应该适用于所有屏幕阅读器。

## 关于的想法`aria-label`

*   因为有两个字符串需要维护，所以如果开发人员错过了更新，它们可能会出现分歧。
*   本地化字符串时，使用的字符串将来自一个来源并被使用两次，从而减少了重复。
*   `aria-label`这就是我在其他项目中经常使用它的目的和方式。
*   这些`aria-label`字符串对于人类来说阅读/grok/编辑的速度更快。
*   `aria-label`使用比隐藏元素更少的标记。
*   可以更新测试以在`aria-label`. 快照也将捕获更改，但开发人员必须意识到这一点。

## 关于隐藏元素的思考

*   更少的字符串重复，预本地化。
*   使用 ChromeVox 快捷方式时，可以到达一个地方，当用户浏览时，配音将每个隐藏的逗号/句点视为一个单独的项目，而实际上它应该只是一个没有额外标记的句子。
*   带有大量 html 标记的字符串难以本地化，翻译人员也难以维护。
*   与`aria-label`. 如果用户在屏幕上选择文本，并且选择跨越隐藏元素中的内容，则隐藏内容将在用户执行命令时复制`copy`，并在用户执行命令时粘贴`paste`。

考虑到所有优点/缺点，从长远来看，我敢打赌，您会发现选择`aria-label`将提供最好的开发人员、翻译人员和用户可访问性体验。

如果元素由兄弟元素的文本内容描述，请考虑使用`aria-labeledby`to 链接元素。

* * *

这个答案是在被问到 6 年后才出现的……但希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T16:10:26.517

自从提出这个问题以来已经有一段时间了，但值得注意的是，问题中提出的技术没有任何问题。我可以确认 Jaws 的当前版本 Jaws 18.0 将暂停逗号或句点，这与直接宣布的冒号或项目符号等标记不同。 [当前版本的 iOS VoiceOver 也可以很好地暂停逗号](https://www.youtube.com/watch?v=VMkGrmJNzmM)。您的标点符号（如果它不是您的设计的一部分）可以通过上面建议[的仅屏幕阅读器 CSS](https://stackoverflow.com/questions/26032089/in-html-how-can-i-have-text-that-is-only-accessible-for-screen-readers-i-e-fo)隐藏，或者，在适当的情况下，aria-label 属性可以包含暂停的标点符号。

# c# - TextBox 具有焦点时 ((TextBox)sender) 的通用工具提示

> ID：15883784
> 
> 赞同：1
> 
> 时间：2013-04-08T16:00:06.423
> 
> 标签：c#, winforms, tooltip

我正在尝试为多个文本框实现工具提示。我目前有以下

```
//selects all text in current textbox on textbox selection and changes BackColor to show which textbox has focus
    private void txt_enter(object sender, EventArgs e)
    {
        ((TextBox)sender).SelectAll();
        ((TextBox)sender).BackColor = Color.LightBlue;
    } 
```

我尝试添加

```
ToolTip.Show("message", ((TextBox)sender)); 
```

但这不起作用，我敢肯定答案很简单，但我是新手，请多多包涵，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:43:57.050

ToolTip 是类的名称，可能不是实例的名称：

我的猜测是，试试这个：

```
toolTip1.Show("message", ((TextBox)sender)); 
```

当然，您需要记录“不工作”的含义。在您的代码或设计器中查找您用于 ToolTip 控件的名称。

# c# - 将默认字符串参数传递给属性导致的 C# 编译器错误

> ID：15883785
> 
> 赞同：2
> 
> 时间：2013-04-08T16:00:08.237
> 
> 标签：c#, asp.net, asp.net-mvc

为什么下面的代码会给我异常：

> CSC 错误 CS0182：属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

在我的构建服务器上？

```
/// Customer.cs...

[Search(SearchAttribute.SearchDisplay.Regular)] 
public Category Category
{
     get; set;
}

public enum Category : byte
{
    X = 0x01,
    Y = 0x02,
    ...
}

/// SearchAttribute.cs...

[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class SearchAttribute : Attribute
{
    public SearchDisplay Display { get; private set; }

    public enum SearchDisplay
    {
        None = (byte) 0x01,
        Regular = (byte) 0x02
    }

    public SearchAttribute(SearchDisplay display, string columnName = null)
        : base()
    {
        Display = display;
    }
} 
```

非常感谢。

令人生气的是，它在 VS2012 中构建良好。我不确定服务器上运行的是什么版本的编译器——但我很确定它不是 2012 版本的。

**更新**

感谢下面的回答者，我已经弄清楚了：

我使用的是 VS2012，但构建服务器仍在使用 VS2010 构建过程。当在属性中使用空值默认参数时[，VS2010 / C#4 编译器](https://stackoverflow.com/questions/8290853/attribute-argument-must-be-a-constant-error-when-using-an-optional-parameter-in)中存在一个错误。我可以通过以下三种方式解决：

1.  不要使用默认参数 -`public SearchAttribute(SearchDisplay display, string columnName)`
2.  使用空字符串 - public SearchAttribute(SearchDisplay display, string columnName = "")
3.  更新我的构建服务器。

我现在和2一起去。3 是我需要在其他时间考虑的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:18:30.667

我认为该`Customer.cs`文件位于一个单独的程序集（C# 项目）中，并且该程序集引用了所在的程序集（项目）`SearchAttribute.cs`。

为了使构造函数中的枚举`SearchDisplay`和可选参数正常工作，以正确的顺序重新编译*两个*`columnName`程序集至关重要。我怀疑您的构建服务器不是这种情况。依赖程序集可能是使用对所在程序集的旧版本的引用进行编译的。*`SearchAttribute`*

 ***更新**

查看右侧的所有链接线程。这是一个他们说在 Visual Studio 2012（C# 5 编译器）中修复的错误。仅当可选参数的默认值为 时才会发生`null`。在我的第一个测试中，我做出了使用另一个字符串（可以识别）的愚蠢决定，但它不会发生在另一个字符串上。（将在下面删除我的评论。）

当属性的使用与属性类本身在同一个程序集中时，它有助于为`null`文字提供显式类型，如下所示：

```
public SearchAttribute(SearchDisplay display, string columnName = (string)null)
... 
```

有了这个，只要所有用法都与上述构造函数在同一个程序集中，它似乎就可以工作。但是，在您的情况下，它们位于不同的程序集中。

如果您愿意使用空字符串，问题就会消失：

```
public SearchAttribute(SearchDisplay display, string columnName = "")
... 
```

否则，我建议您使用旧的 pre-C#-4 样式

```
[Search(SearchAttribute.SearchDisplay.Regular)] 
public Category Category
...

[Search(SearchAttribute.SearchDisplay.Regular, ColumnName = "Changed!")] 
public Category AnotherCategory
... 
```

`columnName`只要有一个类成员（实例属性或字段）称为`ColumnName`. 这`ColumnName`不能是只读的或只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:02:13.783

你不是说

```
 [Search(SearchAttribute.SearchDisplay.Regular)] 
```*

# netty - netty：channel.write() 不成功，原因为空

> ID：15883792
> 
> 赞同：1
> 
> 时间：2013-04-08T16:00:24.760
> 
> 标签：netty, channel

我有一个 netty 客户端，它基本上执行以下操作：

通过 TCP 连接到服务器后，程序调用以下代码段。第一次顺利，但第二次有以下症状 - 它永远循环。通道已连接。channelFuture.isDone() == false。channelFuture.isSuccess()==false 和 channelFuture.getCause()== null。我没有看到任何例外情况或任何有助于我了解问题所在的信息。有什么想法可以让我获得更多信息来调试这个问题吗？

```
 ChannelFuture channelFuture = null;

    while (channelFuture == null || !channelFuture.isSuccess()) {
        try {
            channelFuture = channel.write(content);
            channelFuture.await(1000);

        } catch (InterruptedException ex) {
            Logger.getGlobal().log(Level.SEVERE, "Interrupted ", ex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:51:24.730

我认为您对处理 ChannelFuture 的方式有疑问。

在您发布的代码中，如果循环的任何迭代导致写入失败，那么当循环的后续迭代开始（1000 毫秒后）时，此失败和原因将丢失，因为正在重新分配 channelFuture。此外，如果完成写入所需的时间超过 1000 毫秒，那么您将在下一次迭代中添加排队写入，并且由于 channelFuture 不断被替换，并且写入永远不会在您检查之前的 1000 毫秒内完成，因此每次迭代都会越来越落后通道未来.isSuccess()。

使用您发布的代码，您可以做的是读取的返回值`channelFuture.await(1000)`以查看写入是成功还是失败，而不是盲目地继续并丢弃 channelFuture。

但是，理想情况下，您根本不应该使用`ChannelFuture.await()`，而是使用`ChannelFuture.addListener()`添加一个在写入完成时将执行的侦听器。这是使用 Netty 和处理异步代码的正确方法。

# c - 如何检测作为参数传递的数组的大小？

> ID：15883793
> 
> 赞同：1
> 
> 时间：2013-04-08T16:00:25.280
> 
> 标签：c, arrays, pointers

在 sizeof 参数的帮助下创建数组后，我知道如何检测数组的大小：

```
int arr[10];
printf("%i",sizeof(arr)/sizeof(int)); 
```

但据我了解，当我将数组作为参数传递给函数时，我实际上是传递了一个指向数组第一个元素的指针，而不是实际的数组。因此，如果我将使用 sizeof 运算符，我将获得指针的大小。

我知道我可以通过搜索 '\0' 找到一个字符串（字符数组）的大小。所以让我们假设我们正在谈论 int 数组；

如何检测作为参数传递的数组的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:08:24.867

像往常一样，当被问到这个问题时，会出现很多答案，说您必须将元素的数量作为参数传递给函数。

这当然是不正确的。如果函数需要知道数组中元素的数量，则必须向函数提供信息，但可以通过多种方式提供。这最简单地通过一个参数，但它可能是通过零个或多个参数的任意组合、全局状态、由参数或全局状态直接或间接指向的信息、从先前函数调用中记住的静态信息、数组本身的某些质量（例如哨兵），编译时常量或几乎任何其他可以想象的方式，并且该数字可能明确存在于上述任何内容中，或者可能是从信息中计算或推导出来的。

您无法获取数组中元素数量的唯一方法是通过应用于传递的指针的标准 C 机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:01:27.000

你不能，你必须将尺寸作为附加参数发送给函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:24:41.333

你不能。在 C 中，当您将数组传递给函数时，就`decays`函数的作用域而言，它从数组传递给指向类型的指针。

所以，考虑一下：

```
int arr[16];
sizeof(arr);          // sizeof WORKS
myFunction(arr);      // Array decays to pointer, sizeof FAILS inside function
myFunction(&arr[0]);  // Array decays to pointer, sizeof FAILS inside function

void myFunction(int* ptr)
{
  // sizeof(ptr) will not give you what you would expect normally
} 
```

在 C 中执行此操作的传统方法是有一个额外的函数参数，即：

```
void myFunction(int* ptr, size_t mySize)
{
} 
```

或者，创建自己的结构来保存指向数组的指针及其大小，即：

```
typedef struct myType {
  int*   ptrToArray;
  size_t arraySize;
} myType_t;

int array[16] = { 0 };
myType_t data;
data.ptrToArray = array;
data.arraySize = 16;

void myFunction(myType_t data)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:11:30.133

您可以`NULL`通过每次递增一个变量来终止数组并循环，直到它达到`NULL`这将为您提供大小。

`int arr[10] = {1, 2, 3, 4, 5, NULL}`

或类似的东西。在您的情况下，您可能必须写入`NULL`当前索引 + 1。其他选项（例如创建`struct`保持大小的 a）可能会更好，因为它们的成本更低。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T17:19:48.960

与您可能期望的相反，以下程序以代码退出`1`（也是@K Scott Piel）

```
int f(int a[10])
{
        return sizeof(a)/sizeof(int);
}

int main(void)
{
        int     a[10];
        return f(a);
} 
```

这确实是其他几个人提到的：因为 C 中的参数数组只是一个指针。你可以检查你的编译器，也许它有绕过它的扩展，但它会使你的代码不可移植。

解决它的一种方法是将数组包装在`struct`. 以下程序确实以代码 10 退出。

```
typedef struct { int a[10]; } a10;
int f(a10 a)
{
        return sizeof(a)/sizeof(int);
}

int main(void)
{
        a10     a;
        return f(a);
} 
```

不过，要了解这些元素有点麻烦。如果你想支持不同大小的数组，你必须自己编程（正如其他人指出的那样）。请注意，它`sizeof`是在编译时计算的，并且就编译器而言是一个常量。它只能因平台而异。

哦，请注意，第二个示例中的数组是按值传递的，而在第一个示例中它是通过引用传递的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T16:02:02.470

您需要将其作为参数传递给函数。或者您需要声明要作为固定传递的数组的大小...

```
void myFunc( int* array, size_t numElements ); 
```

或者如果数组的大小是已知常数

```
void myFunc( int array[10] ); 
```

或任何其他使数组大小可用于函数的无数方法（全局变量等）。通过指针检测数组的大小不是 C 的内置函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T16:01:33.210

通过以空值结尾的数组，或通过传入元素的数量。在 C 中，无法判断数组中包含多少元素。

# java - Switch 语句 - charAt

> ID：15883795
> 
> 赞同：-1
> 
> 时间：2013-04-08T16:00:33.903
> 
> 标签：java, string, debugging, switch-statement

我在 String.charAt(int) 行出现调试错误：该行不可用
`ch = Ach.charAt(0);`

```
char ch;
String Ach;    
Scanner input = new Scanner(System.in);
printvehicleMAKE(services, input);

    do{
        System.out.println("\n    Service Item Recording Feature");
        System.out.println("      ------------------------------");
        System.out.println("\n\n A - Record Part Details");
        System.out.println("\n B - Add Labour Hours");
        System.out.println("\n X - Exit service item recording feature");
        System.out.print("\n\nEnter your selection: ");
        Ach = input.nextLine().toUpperCase();
        ch = Ach.charAt(0);
        switch(ch){
            case 'A':
                System.out.print("Enter registration number of vehicle: ");
                String inputREGO = input.nextLine();
                boolean flag = false;
                for(int i=0; i<6; i++){
                    if(inputREGO.equalsIgnoreCase(services[i].getregoNUMBER())){
                        System.out.print("Enter Part Description: ");
                        String parts = input.nextLine();
                        System.out.print("Enter Part Cost: ");
                        Double cost = input.nextDouble();
                        services[i].addPARTDETAILS(parts, cost);
                        flag = true;
                    }
                }
                if(!flag)
                    System.out.println("No registration number were found in the system.");

                break; 
            case 'B' :
                break;
            case 'X' :
                System.out.println("Exiting system......");
                break;
            default: System.out.println("Error - invalid selection entered!");
            break;
        }
    }while(ch!='X');

public static void printvehicleMAKE(ServiceAppointment[] services, Scanner
        input){
    System.out.print("Enter vehicle make: ");
    String make = input.nextLine();
    boolean flag = false;
    for (int i=0;i<6;i++){
        if (services[i].getvehicleMAKEMODEL().indexOf(make) != -1){
            System.out.printf("\n%-10s%-8s%10s", services[i].getregoNUMBER(),
                    services[i].getbuildYEAR(), services[i].getvehicleMAKEMODEL());
                    flag=true;
        }
    }if(!flag)
        System.out.println("No service appointments were found for vehicles " 
                + "made by " + make);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:04:15.480

如果问题是为什么行号不可用，那可能是您如何打包代码以供执行的功能。听起来调试信息已被剥离。

如果问题是您的代码在该行可能有什么问题，则答案是`Ach`长度可能为零（如果输入是空行）。因此`Ach.charAt(0)`将失败，因为没有第一个字符。您需要测试这种情况。

```
ch = Ach.length() > 0 ? Ach.charAt(0) : '\n'; 
```

# resharper - 为什么只有在运行 mspec.exe 时才找到此远程服务？

> ID：15883796
> 
> 赞同：1
> 
> 时间：2013-04-08T16:00:34.140
> 
> 标签：resharper, remoting, mspec

这仅在使用`mspec.exe`. 它们在 ReSharper 的测试运行器中运行良好。`Establish`and`Because`语句执行，然后在到达第一条语句后立即出现下面的异常`It`。

```
System.Runtime.Remoting.RemotingException occurred
Message=Requested Service not found
Source=System.Runtime.Remoting
StackTrace:
  Server stack trace: 
     at System.Runtime.Remoting.Channels.BinaryServerFormatterSink.ProcessMessage    (IServerChannelSinkStack sinkStack, IMessage requestMsg, ITransportHeaders requestHeaders, Stream requestStream, IMessage& responseMsg, ITransportHeaders& responseHeaders, Stream& responseStream)
Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Machine.Specifications.Runner.ISpecificationRunListener.OnSpecificationStart(SpecificationInfo specification)
   at Machine.Specifications.Runner.Impl.AggregateRunListener.<>c__DisplayClass11.<OnSpecificationStart>b__10(ISpecificationRunListener listener) in c:\OLDMSPEC\machine-machine.specifications-98b543c\Source\Machine.Specifications\Runner\Impl\AggregateRunListener.cs:line 49 
```

我尝试了这里所说的，但没有成功：[Spec 在由 mspec.exe 运行时失败，但在 TD.NET 运行时通过](https://stackoverflow.com/questions/2326847/spec-fails-when-run-by-mspec-exe-but-passes-when-run-by-td-net/2351703#2351703)

我想要一些一般性的想法，因为代码分为很多类并且有很多步骤，所以我很难提供示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:05:55.843

我从来没有遇到过 Requested Service not found 错误，我真的不知道是什么原因造成的。如果您的代码在特定版本上中断（并且之前一直在工作），那么复制将非常棒并提供一些信息。ReSharper 和控制台运行程序之间存在一些根本差异，即 ReSharper 使用自定义远程处理工具，而控制台运行程序使用 vanilla .NET 远程处理。我知道这可能很困难，但是能够隔离问题的复制会很棒。（我目前正在休假，从 4 月 20 日起可以提供帮助。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:28:35.307

我们有一个自定义的远程运行器。以下线程帮助我解决了这个问题。[未找到请求的服务](https://stackoverflow.com/questions/2651852/requested-service-not-found?rq=1)

亚历山大，谢谢你的帮助。

# asp.net - CalendarExtender 在日历外部单击时没有隐藏

> ID：15883797
> 
> 赞同：0
> 
> 时间：2013-04-08T16:00:36.087
> 
> 标签：asp.net, webforms, master-pages

我面临`CalendarExtendar`控制隐藏功能的问题。

我在图像点击上显示日历。如果我选择日期，它会隐藏；但是当我不想从日历中选择任何日期时它不会隐藏。

我发现这种情况只发生在我的应用程序中。我尝试在示例应用程序中使用相同的控件，它工作正常。

是不是因为我的项目已经`MasterPage`在里面实现了？

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:19:01.523

也可以尝试作为除了 dash 提供的解决方案之外的一个选项，如果您不想使用 ImageButton 而不是 Image 作为 PopupButton，则可以使用以下决定：将扩展程序上的 OnClientShowing 属性设置为“hideAnotherOpenedPoups”并添加到页面脚本以下。

```
// Array of BehaviorIds of each extender for those you use Image as PopupButton
var behaviorIds = ["CalendarExtender1", "CalendarExtender2"];

function hideAnotherOpenedPoups(sender) {
     for (var index = 0; index < behaviorIds.length; index++) {
          if (behaviorIds[index] !== sender.get_id()) {
               var extender = $find(behaviorIds[index]);
               if (extender.get_isOpen()) {
                    extender.hide.call(extender);
               }
          }
     } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:09:30.157

你可以试试这个 你需要处理 onmouseout 事件。你可以这样做：

[http://forums.asp.net/p/1182269/4708411.aspx/1?Re+Calendarextender+and+Lose+Focus+Or+Mouse+Out](http://forums.asp.net/p/1182269/4708411.aspx/1?Re+Calendarextender+and+Lose+Focus+Or+Mouse+Out)

或者您可以添加一些 javascript（通过 jQuery）并注入一个 onmouseout 事件：

向图像的 onmouseout 属性链接[添加额外的功能 向图像的 onmouseout 属性添加额外的功能](https://stackoverflow.com/questions/6897082/adding-extra-functions-to-an-images-onmouseout-attribute)

这也显示在 forums.asp.net 链接中，但基本上，在 onmouseout 事件中，您可以将日历扩展器的可见性设置为隐藏或无。

```
--------------------------OR CAN TRY BELOW CODE-----------------------------

    function calenderShow(sender,args){

        var calendar=$find('bi');
        calendar._container.onblur=function(){ 
         calendar.hide();
          };
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T12:43:32.180

我采用了一个文本框控件和一个日历控件，但是在单击日历日期页面后，发生了回发，并且在该日历没有隐藏之后。我尝试了所有方法，但它从来没有奏效。请找到以下代码。

```
<asp:TextBox ID="txtFromDateSubmit" runat="server" TabIndex="7" CssClass="calendar" OnTextChanged="txtFromDateSubmit_TextChanged" AutoPostBack="True" MaxLength="12" AutoCompleteType="Disabled"></asp:TextBox>
<asp:CalendarExtender ID="ceBatchDateSubmit" runat="server" Format="dd/MM/yyyy" TargetControlID="txtFromDateSubmit"></asp:CalendarExtender> 
```

在那之后，我错误地删除了**TabIndex**，它开始为我工作。如果你们有同样的问题并且它与我的代码匹配，你可以试试。

# ruby - 尝试通过 RUBY Fileutils 复制对象（而不是链接）

> ID：15883802
> 
> 赞同：2
> 
> 时间：2013-04-08T16:00:55.813
> 
> 标签：ruby, copy, symlink

我已经搜索了很长时间，但还没有找到答案。

我正在使用 RUBY 脚本将一些文件夹和内容从 Linux 站点复制到另一个站点。到目前为止，它是通过在 Windows 上调用 Xcopy 来完成的（通过系统）。

现在我可以看到两个 linux 站，所以我决定通过 Fileutils 进行常规复制。

我的问题是它有时会复制链接而不是对象本身：EG

```
drwxr-xr-x 2 lcs rme   512 Apr  8 16:50 .
drwxr-xr-x 3 lcs rme   512 Apr  8 16:49 ..
lrwxrwxrwx 1 lcs rme    67 Apr  8 16:50 FW123.h -> /rees/frme/pd/ccm_dbs1/frme/root/cache/source/#27/1681927
-rw-r--r-- 1 lcs rme 25968 Apr  8 16:50 FW123.o 
```

我尝试了几件事，但从未奏效。特别是我尝试使用 dereference_root option ，但它没有用。

你有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-19T12:35:51.580

您可以尝试[File.realpath(pathname)](https://ruby-doc.org/core-1.9.3/File.html#method-c-realpath) - 这将解析符号链接。

# java - 创建集合字段 JSP Java

> ID：15883822
> 
> 赞同：0
> 
> 时间：2013-04-08T16:01:38.020
> 
> 标签：java, spring, jsp, servlets

我正在使用 Spring 框架、JSP 页面来显示和验证表单。

我来自 PHP 世界，其中字段名称`somefield[]`由数组（`ArrayList`在 Java 中）表示。我想从表单中的输入中获取字符串集合。

我已经定义`private List<String> waypoints;`了完美的工作方式，但是在 JSP 中我必须保留符号`somefield[0]`, `somefield[1]`, `somefield[2]`, 等等...

**问题：**
这造成不便，导致只有两个字段的序列： `somefield[0]`，`somefield[9]`实际上生成 10 个字段。

我的简单代码显示现有字段的值。

```
<c:forEach items="${routeAddInput.waypoints}" var="waypoint" varStatus="status">
    <input name="waypoints[${status.index}]" type="text" value="${waypoint}"  placeholder="Enter name here" />
</c:forEach> 
```

**问题：**
是否可以由用户（在 UI 中）动态生成字段，其中索引无关紧要？如果用户添加该字段，我可以简单地计算下一个索引，但如果用户删除该字段，则列表中有一个间隙。

**问题上下文：**
我的 Servlet 验证表单的方法：

```
@RequestMapping(value = "/add", method = RequestMethod.POST)
public String step1ValidateForm(
    @ModelAttribute("routeAddInput")
    @Valid RouteAddInput form,
    BindingResult result, ModelMap model) {

    if (result.hasErrors()) {
        return "route/add";
    }

    return "redirect:addDetails";
} 
```

要验证的表格：

```
public class RouteAddInput {
    @NotNull
    @Length(min=1)
    private String locationSource;

    @NotNull
    @Length(min=1)
    private String locationDestination;

    private List<String> waypoints;

  public RouteAddInput() {
    setLocationSource("");
    setLocationDestination("");
    waypointsCoords = new ArrayList<String>();
  }

    public String getLocationSource() {
        return locationSource;
    }

    public void setLocationSource(String locationSource) {
        this.locationSource = locationSource;
    }

    public String getLocationDestination() {
        return locationDestination;
    }

    public void setLocationDestination(String locationDestination) {
        this.locationDestination = locationDestination;
    }

    public List<String> getWaypoints() {
        return waypoints;
    }

    public void setWaypoints(List<String> waypoints) {
        this.waypoints = waypoints;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:47:09.267

我已经设法解决了这个问题。关键是使用`LinkedHashMap`而不是`ArrayList`.

`LinkedHashMap`保留值顺序并**允许根据需要保留索引**。特别是整数。

所以在表单类中这个字段将是：private HashMap waypoints；

JSP 中也有区别`forEach`：

```
<c:forEach items="${routeAddInput.waypoints}" var="waypoint">
  <input name="waypoints['${waypoint.key}']" type="text" value="${waypoint.value}"  placeholder="Enter name here" />
</c:forEach> 
```

# ruby-on-rails - 在 Heroku 上的 Rails 中出现 PG::Error SSL SYSCALL 错误后重新连接

> ID：15883827
> 
> 赞同：3
> 
> 时间：2013-04-08T16:01:47.960
> 
> 标签：ruby-on-rails, heroku, rails-activerecord, rails-postgresql

我最近在 Heroku 上遇到了由`PG::Error SSL SYSCALL error: EOF detected`.

堆栈跟踪的相关部分包括：

```
2013-04-05T22:07:02+00:00 heroku[router]: at=error code=H12 desc="Request timeout" method=GET path=/things/3.json host=things.herokuapp.com fwd="184.72.72.117" dyno=web.2 connect=1ms service=30003ms status=503 bytes=0):
2013-04-05T22:07:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:294:in `dealloc'
2013-04-05T22:07:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:277:in `clear'
2013-04-05T22:07:58+00:00 app[web.1]: PG::Error (SSL SYSCALL error: EOF detected
2013-04-05T22:07:58+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:339:in `clear_cache!' 
```

Heroku 的文档列出[了此错误的常见原因](https://devcenter.heroku.com/articles/postgres-logs-errors#pgerror-ssl-syscall-error-eof-detected)。由于我没有使用 Resque 或 Unicorn，这似乎是由网络分区引起的。

相同的文档说：“当 Heroku 检测到崩溃时，我们会杀死该测功机并启动一个新的测功机，从而重新建立连接。” 这不是我的经验。该应用程序仅在我运行时恢复`heroku restart`。我宁愿在应用程序级别处理此错误，而不是依赖 Heroku 的测功机管理来拯救我。

有什么方法可以捕获“检测到 EOF”错误并自动重试，直到应用程序重新连接？

# wordpress - 在 WordPress 中调整动画 gif 的大小

> ID：15883829
> 
> 赞同：0
> 
> 时间：2013-04-08T16:01:53.007
> 
> 标签：wordpress, upload, resize, thumbnails, animated-gif

在 WordPress 中上传动画 gif 图像时，是否可以调整其大小？我已经看到了几个处理 ImageMagick 的线程以使其工作，但我只对围绕构建基于 WP 自己的调整大小工具的脚本而发展的 WP 解决方案感兴趣。非常感谢有关此主题的任何方向。

# html - 来自名称的 MailTo 在 Chrome 中不起作用

> ID：15883842
> 
> 赞同：4
> 
> 时间：2013-04-08T16:02:23.680
> 
> 标签：html, email, mailto

```
<a href="mailto:Nexus%20DJ%20Entertainment&lt;info@nexusdj.co.uk&gt;">info@nexusdj.co.uk</a> 
```

不适用于 Chrome，但适用于所有其他主要浏览器，包括移动 safari。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T21:51:50.833

很长一段时间以来，我一直在试图弄清楚如何解决这个问题，在阅读了几次规范之后，我相信我已经弄清楚了。

根据规范，`<a href='mailto:"Heckofa guy" <chart@chartlive.com>'>`它不是一个有效的 mailto 链接，它只能是一个普通的电子邮件地址。我猜除了 chrome 之外的所有浏览器都决定让它正常工作，即使它在技术上是无效的。

幸运的是，规范指出了答案，即指定`to`标题而不是列出电子邮件地址。

根据我的测试，这很好用（我在 Mac 上只尝试过 FF 和 Chrome）：

```
<a href='mailto:?to="Heckofa guy" <bob@bobby.com>'>not using to</a> 
```

这是规范，仅供参考： [http ://www.ietf.org/rfc/rfc2368.txt](http://www.ietf.org/rfc/rfc2368.txt)

我的测试代码：

```
<a href="mailto:&quot;Heckofa guy&quot;%20&lt;bob@bobby.com&gt;">with name</a> Doesn't work.<br>
<a href='mailto:"Heckofa guy" <bob@bobby.com>'>with name no encoding</a> Doesn't work.<br>
<a href="mailto:bob@bobby.com">without name</a> Works.<br>
<a href='mailto:?to="Heckofa guy" <bob@bobby.com>'>not using to</a> works?!?!?<br> 
```

这是一个 jsfiddle 显示它的实际操作：http: [//jsfiddle.net/kmkvP/](http://jsfiddle.net/kmkvP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:20:40.963

它在 chrome 26.0.1410.43 中工作

你也可以试试

```
<form action="mailto:info@nexusdj.co.uk" method="post">
    <input type="submit" name="mailSend" value="Contact Me" />
</form> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-08T16:12:00.370

如果没有看到您的 HTML 标记，我在这里帮不了您太多，除了显示标准语法是：

```
<a href="mailto:<email address>" > LINK BODY </a> 
```

也许 chrome 在执行 mailto 窗口之前会断言电子邮件地址是有效的？谷歌独有的优化可以解释为什么它只在 chrome 上失败而不是其他的。

# php - 在日期php中切换日期和月份

> ID：15883844
> 
> 赞同：1
> 
> 时间：2013-04-08T16:02:31.097
> 
> 标签：php, date

我有一个字符串，其中包含一个日期

```
$date_1 =   '24/12/2010 23:59:59'; 
```

我想把它转换成

```
 $dte_2 = '12/24/2010 23:59:59'; 
```

在php中执行此操作的最快方法是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:06:10.753

你可以做 ：

```
$date = DateTime::createFromFormat('d/m/Y H:i:s', '24/12/2010 23:59:59');

echo $date->format('m/d/Y H:i:s'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:13:56.990

如果模式总是 24/12/2010，您可以在 '/' 上分解数组，切换 [0] 和 [1] 的值，然后再次分解数组：

```
$date_1 = '24/12/2010 23:59:59';
$array = explode('/', $date_1);
$tmp = $array[0];
$array[0] = $array[1];
$array[1] = $tmp;
unset($tmp);
$date_2 = implode('/', $array); 
```

可能不是最优雅的解决方案，但如果 24/12/2010 模式是一致的，则可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:06:18.217

使用`date_parse_from_format`然后`strftime`在结果上使用适当的修饰符。

```
date('m/d/Y H:i:s',date_parse_from_format('d/m/Y H:i:s', $date_1)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T16:07:14.070

您可以执行以下代码：

```
date('m/d/Y h:i:s", strtotime($date_1)); 
```

# asp.net-mvc - MVC 4移动检测视图与布局不同

> ID：15883845
> 
> 赞同：4
> 
> 时间：2013-04-08T16:02:37.653
> 
> 标签：asp.net-mvc, asp.net-mvc-4, azure

我有一个非常奇怪的问题。更糟糕的是它只发生在生产（天蓝色）中，而不是在开发机器中。

我看到我的应用程序使用布局的 .Mobile 版本，但使用视图的桌面（而不是 .mobile）版本。我完全不知道如何解决这个问题..

它正在检测移动版本但它不是......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:25:02.377

引擎使用位于此处的文件 -`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\Browsers`

（或`\Framework64\`）

它们在任何一台机器上都可能不同。使用 Request.Browser.IsMobileDevice 找出哪些设备检测到什么。编写自定义显示模式也有帮助吗？

[http://weblogs.asp.net/gunnarpeipman/archive/2011/09/18/asp-net-mvc-4-display-modes.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2011/09/18/asp-net-mvc-4-display-modes.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T12:28:35.103

我认为我在下面给出的解决方案就是答案（它工作了一会儿），但一段时间后它仍然切换到错误的视图。

像互联网的其他部分一样，我[从 Nuget 安装了 51 Degrees](http://www.nuget.org/packages/51Degrees.mobi) 这运行良好，而且很容易设置

* * *

（下面对我不起作用，但也许对你有用） [http://www.nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes](http://www.nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)

看起来这是一个已知的错误：[http ://aspnetwebstack.codeplex.com/workitem/280?PendingVoteId=280](http://aspnetwebstack.codeplex.com/workitem/280?PendingVoteId=280)

根据上面的 codeplex 链接，请记住确保这一点：

> 对于自定义已注册视图引擎列表的一小部分项目（例如，在 Global.asax 中），您应该确保您引用的是 Microsoft.Web.Mvc.FixedRazorViewEngine 或 Microsoft.Web.Mvc.FixedWebFormViewEngine，而不是核心运行时二进制文件中的类

# wpf - 对于同一程序集中的 WPF 图像，pack 表示法是否更可取

> ID：15883848
> 
> 赞同：0
> 
> 时间：2013-04-08T16:02:47.643
> 
> 标签：wpf

如果我有一个从不打算本地化的应用程序并且资源在同一个程序集中，那么在引用图像时使用包表示法有什么好处吗？

我目前将所有图像都放在 Resource 文件夹中，并将它们的构建操作设置为 Resource 在同一个程序集中。我指的是这样（这是有效的）

`<Image Source="/Resources/Image1.png"/>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:17:36.893

严格来说，你已经在使用一个包 URI，你只是在使用一个相对的。

正如[MSDN 文档中有关该主题](http://msdn.microsoft.com/en-us/library/aa970069.aspx)的说明，Pack URI 表示法的目的是

> 为识别和加载这些类型的文件提供一致的机制

来自不同的位置，其中可能包括：

> *   当前程序集。
> *   引用的程序集。
> *   相对于装配的位置。
> *   应用程序的源站点。

为了提供这种一致性，URI 方案指定了如何声明绝对和相对 URI：

> 默认情况下，相对包 URI 被认为是相对于包含引用的标记或代码的位置。但是，如果使用前导反斜杠，则相对包 URI 引用将被视为相对于应用程序的根。

如果您询问绝对与相对包 URI 的好处，那么这个问题只能由您来回答。绝对 URI 的好处是它们始终解析到同一个位置，即使您移动引用 XAML 也是如此。相对 URI 的好处是您的 XAML 及其相关资源可以作为一个单元移动，而不会破坏相对路径。

如果您确定您引用的资源将始终与 XAML 源位于同一程序集中，那么可能是相对路径。如果您认为您可能想要将 XAML 与静态资源分开，那么您应该尽早使用绝对 URI 并使其工作，这是一个很好的论据。

# linux - 使用 get_wchan()

> ID：15883851
> 
> 赞同：0
> 
> 时间：2013-04-08T16:02:52.690
> 
> 标签：linux, linux-kernel

我有一个关于linux内核的问题。为了使用 get_wchan() 函数，我应该在模块中使用什么头文件？我试图找到，但似乎所有原型都是拱形敏感的。linux 2.6.32 是否提供 get_wchan() 的非拱敏感原型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:43:34.587

Linux 提供了 get_wchan() 的非架构敏感原型。为了使用它，应该包含 asm/processor.h 头文件。但它可以直接从内核使用（而不是从内核模块），因为内核没有为模块导出符号 get_wchan（我的意思是 EXPORT_SYMBOL）。

# .htaccess - 设置全局变量以重写一些 url - .htacess

> ID：15883853
> 
> 赞同：0
> 
> 时间：2013-04-08T16:02:56.957
> 
> 标签：.htaccess, url, mod-rewrite

也许它看起来很容易，但我的 .htaccess 有问题。我想重写我的网址，以便`<a href="/admin">some text</a>`可以重写为`<a href=""http://localhost:8888/madison/the-madison-project/admin/index">some text</a>`

所以我设置了这个：

```
SetEnv root:/madison/the-madison-project/
RewriteRule ^admin[/]?$ {%ENV:root}admin/index 
```

但它不起作用。

我该如何解决？

编辑：经过几次尝试，我发布整个 .htaccess 文件可能更简单

```
RewriteEngine On
ExpiresActive On

#Expire Header
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "now plus 7 days"
</FilesMatch>

ExpiresByType text/css "now plus 7 days"
ExpiresByType text/html "now plus 7 days"
ExpiresDefault "now plus 7 days"

AddOutputFilterByType DEFLATE text/plain text/html text/xml text/css

SetEnv root:/madison/the-madison-project/
#SetEnvIf Request_URI ^ root=/madison/the-madison-project/
#RewriteRule ^ - [E=root:/madison/the-madison-project/]

RewriteRule ^(assets|inc) - [L]

RewriteRule ^admin[/]?$                         %{ENV:root}admin/index

RewriteRule ^admin/edit/(.*)$                   %{ENV:root}index.php?type=admin&action=edit&page=$1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^admin/(.*)$                        %{ENV:root}index.php?type=admin&action=view&page=$1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^login$                             index.php?action=view&type=login&%1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^forgot-password$                   index.php?action=view&type=forgot-password&%1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^edit/user(/)?$                     index.php?action=edit&type=user&%1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^signup(/)?$                        index.php?action=edit&type=user&id=0&%1  [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^user/([0-9]+)(/)?                  index.php?action=view&type=note&user=$1&%1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^(suggestion|comment)/([0-9]+)(/)?  index.php?action=view&type=note&page=open&note_type=$1&note=$2&%1 [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^([0-9A-Za-z\-_]+)/(suggestion|comment)/([0-9]+)(/)?    index.php?action=view&type=note&page=$1&note_type=$2&note=$3&%1 [L]

#Catch All Pages
RewriteRule ^index\.php$ - [L]

RewriteCond %{QUERY_STRING} ^(.*)?$
RewriteRule ^([0-9A-Za-z\-_]+)(/)?          %{ENV:root}index.php?action=view&type=page&page=$1&%1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:58:14.090

有两个问题[`SetEnv`](http://httpd.apache.org/docs/current/mod/mod_env.html#setenv)

*   变量和值用空格而不是冒号分隔
*   **笔记**

    > 该指令设置的内部环境变量是在大多数早期请求处理指令运行后设置的，例如访问控制和 URI 到文件名的映射。如果您设置的环境变量是作为早期处理阶段的输入，例如 RewriteRule 指令，您应该改为使用[`SetEnvIf`](http://httpd.apache.org/docs/current/mod/mod_setenvif.html#%20setenvif).

例如，这将是

```
SetEnvIf Request_URI ^ root=/madison/the-madison-project/ 
```

或者，您可以使用非重写规则来设置环境变量

```
RewriteRule ^ - [E=root:/madison/the-madison-project/] 
```

最后，你必须把百分号`%`放在花括号前面

```
RewriteRule ^admin[/]?$ %{ENV:root}admin/index 
```

**PS**：如您所见，至少有三种形式将环境变量与其值分开

*   空白**变量值**
    [`SetEnv`](http://httpd.apache.org/docs/current/mod/mod_env.html#setenv)
***   等号（赋值）
    [`SetEnvIf`](http://httpd.apache.org/docs/current/mod/mod_setenvif.html#setenvif)条件**var=value***   冒号
    `RewriteRule`模式替换[`[E=var:value]`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_e)**

# django-templates - 在用户页面上显示用户名

> ID：15883857
> 
> 赞同：0
> 
> 时间：2013-04-08T16:03:30.033
> 
> 标签：django-templates

我想在他的页面上显示用户的名字。{{user.username}} / {{user.pk}} 给我当前授权的用户的名称或 ID，但不是那些，它是谁的页面。我必须在模板中写什么而不是 {{user.username}}？网址.py

```
url(r'^user/(?P<user_id>\d+)/$', 'user'), 
```

视图.py

```
def user(request, user_id):
context_instance=RequestContext(request)
user = get_object_or_404(User, pk=user_id)
return render_to_response('user.html',
                          {'var': 'value'},
                          context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:19:38.907

只需将用户对象传递给您的模板。

```
def user(request, user_id):

    user = get_object_or_404(User, pk=user_id)
    return render_to_response('user.html',
                      {'user': user,}, context_instance=RequestContext(request)) 
```

然后在您的模板中。

```
{{user.username}}  / {{user.pk}} 
```

# ruby - Sinatra：匹配任意数量的目录出现

> ID：15883862
> 
> 赞同：1
> 
> 时间：2013-04-08T16:04:08.563
> 
> 标签：ruby, regex, sinatra

我得到了这条路线：

```
get %r{/content.json/([\w]+)/([\w]+)/} do
  ...
end 
```

它匹配“/content.json/123/abc”。但我想匹配任意数量的目录，比如“/content.json/123/456/abc/def”，然后给我这样的参数：

```
{"splat":[],"captures":["123","456","abc","def"]} 
```

正则表达式需要如何编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:13:15.350

一种可能的方法是匹配单个组中的子目录，并将它们拆分到路由本身中：

```
get %r{/content.json/([\w\/]*)} do
  dirs = params[:captures][0].split("/");
  ...
end 
```

有了请求`/content.json/123/456/abc/def`，`dirs`就会包含数组`["123", "456", "abc", "def"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:14:32.613

那是不可能的。单个正则表达式只能有固定数量的捕获（尽管其中一些最终可能会捕获`nil`）。如果你对深度设置了一个限制，比如四个，那么你可以这样做：

```
%r{/content.json(?:/([\w]+))?(?:/([\w]+))?(?:/([\w]+))?(?:/([\w]+))?} 
```

# python - 如何使用 python 将准备好的语句用于“从 xxx where xxx 中选择”

> ID：15883863
> 
> 赞同：0
> 
> 时间：2013-04-08T16:04:11.093
> 
> 标签：python, mysql, sql, prepared-statement

我使用字典来存储条件，键的数量和值不固定，例如

```
dict = {}
dict['v1'] = 'abc'
dict['v2'] = 123
...
dict['vn'] = xxx 
```

我的sql格式是

> select * from tablename where v1 = 'abc' and v2 = 123 and ... vn = xxx

我试着先把sql变成这样：

> sql = "select * from tablename where v1 = %s and v2 = %s and ... vn = %s"

下面的格式可以避免sql注入，问题是我不知道值的个数，这个prepared statements怎么写。提前致谢。

> cursor.execute(sql, dict[v1], dict[v2], ..., dict[vn])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:17:35.643

也许矫枉过正，但您可以使用出色的[SqlAlchemy](http://www.sqlalchemy.org/)库：

```
from sqlalchemy.sql import select
from sqlalchemy import create_engine, MetaData, Table
engine = create_engine('mysql://your_connection_string')
meta = MetaData()
table = Table('table_name', meta, autoload=True, autoload_with=engine)
s = select([table])
for key, val in dict.items():
   s = s.where(getattr(table.c, key)==val)
for row in conn.execute(s):
    print row 
```

如果您打算在 Python 中执行大量 SQL，这可能是值得的。

[http://docs.sqlalchemy.org/en/latest/core/tutorial.html](http://docs.sqlalchemy.org/en/latest/core/tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:09:38.240

我会使用类似下面的东西来参数化执行函数：

```
def print_test(sql, param1, param2, param3, param4, param5):
    # just output some of the parameters..
    print param2, param3

print_test("whatever", *(i for i in range(5))) 
```

上面是一个简单的例子来说明 print_test 函数中发生了什么。我假设您想要某种排序，因此[OrderedDict](http://docs.python.org/3/library/collections.html?highlight=collections.ordereddict#collections.OrderedDict)非常适合您。然后，您可以简单地导出值并且顺序将保持一致。将它们转换为元组，执行函数将展开它需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:10:15.857

以下应该有效：

```
sql = 'select * from tablename where ' + ' and '.join(k + ' = %s' for k in data)
cursor.execute(sql, tuple(data.values())) 
```

确保在创建字符串和执行语句之间不对 dict 进行任何修改`sql`，因为如果这样做，顺序可能会改变。

请注意，我将您的 dict 重命名为`data`，您不应该将`dict`其用作变量名，因为它会掩盖内置类型。

我不完全确定是否需要转换为元组。

# firebug - Chrome DevTools / Firebug：如何通过缓存破坏来保持断点

> ID：15883866
> 
> 赞同：7
> 
> 时间：2013-04-08T16:04:17.627
> 
> 标签：firebug, browser-cache, google-chrome-devtools

我有非常简单的缓存破坏，用于开发我的 JavaScript 文件，因此每次我进行更改时，浏览器都有最新的版本。基本上：

```
cache_buster = ''
if is_development:
   cache_buster = '-' + file_modified_timestamp_of('/dev/myproject/js/myfile.js')
out += '<script src="/js/myfile' + cache_buster + '.js" />' 
```

（开发服务器将请求映射`/js/myfile-[0-9]+.js`到`/js/myfile.js`磁盘上）

我的问题是每次我在javascript文件中设置断点时，源文件更改时断点丢失。

有没有办法在 Chrome DevTools 或 Firebug 中记住或保留断点，可以在这种文件名更改中幸存下来？

或者是否有一种卓越的技术可以实现这两个相反的目标（缓存破坏和断点持久化）？

# sql - 如何对 oracle 表 id 重新排序

> ID：15883870
> 
> 赞同：1
> 
> 时间：2013-04-08T16:04:26.533
> 
> 标签：sql, database, oracle

我有一个这样的 Oracle 表：

```
fruit    id
-------- -----
apple     1
plum      9
pear      55
orange    104
.. 
```

id 列号错误。如何更新每行的 id 以重新排序，如下所示：

```
fruit    id
-------- -----
apple     1
plum      2
pear      3
orange    4 
```

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:11:00.987

```
update your_table
set id = rownum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:42:16.063

如果您需要保证旧订单，则应执行以下操作：

```
merge into the_table 
using
( 
   select rowid as rid, 
          row_number() over (order by id asc) as new_id
   from the_table
) t on (t.rid = the_table.rowid) 
when matched then 
  update set id = new_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T06:32:33.597

```
DECLARE
i INTEGER :=1;
BEGIN;
    FOR n IN (SELECT your_primary_id  FROM your_table_name ORDER BY your_primary_id);
    LOOP;
        UPDATE your_table_name 
          SET your_primary_id=i 
          WHERE your_primary_id = n.your_primary_id;
        i := i + 1;
    END LOOP;
END;
/ 
```

# java - aspectj：如何将库中的方面编织到用户代码中？

> ID：15883871
> 
> 赞同：0
> 
> 时间：2013-04-08T16:04:38.230
> 
> 标签：java, eclipse, aspectj, aspect

我有一个包含一些类和一些方面的库。Say`AspectedLib.jar`是包含此类定义的文件（在 eclipse 中创建，带有“export jar file with aspectj support”）。如果我导入`AspectedLib.jar`文件，甚至使用其中定义的一些类，它可以工作，但没有触发任何连接点，即不执行方面。

我怎样才能使这项工作？理想情况下，如何在 eclipse* 中进行设置？

* 版本：Juno Service Release 2；版本号：20130225-0426

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:57:14.300

您需要将 jar 添加到您的方面路径。在您的 Eclipse 项目首选项中，转到 AspectJ build -> Aspect Path 并添加 jar。

# sql - 如果存储过程中不存在记录，则插入

> ID：15883872
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:04:41.373
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在创建一个存储过程，如果尚未插入记录，则需要进行插入。

用户可以多次运行此存储过程。我正在使用 SQL Server 2008

我的查询如下。它没有给出任何错误，但也没有做任何事情。如果我删除 If not exist 并使用 select 进行简单的插入，它将第一次工作，然后由于记录已经存在而给出错误。

```
CREATE PROCEDURE LoadRecords
   @ADD_BY varchar(10)
  ,@YEAR varchar(4)
  ,@Inserted int OUTPUT

AS
BEGIN

DECLARE @OFF char(2)
DECLARE @Year char(4)
DECLARE @ID varchar(9)

set @Inserted =0

/*check if record exists or not */

IF NOT EXISTS(

Select F.OFF, (@YEAR ), F.ID, F.Form, @ADD_BY

from Table1 as F

Left Join Table2  R
ON F.ID = R.ID
and F.OFF = R.OFF
and F.Year = R.Year

where F.Year = (@Year -1 )

and @OFF= F.OFF
and @Year = F.Year
and @ID= F.ID
and @Form = F.Form
)
/*insert values if records do not exist */

INSERT INTO Table1 (
    OFF, YEAR, ID, Form ,ADD_BY)
Values(@OFF, @Year, @ID , @Form, @ADD_BY)   

SET @Inserted =@@ROWCOUNT

END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:13:11.200

我认为您在 上添加的条件有问题`IF NOT EXISTS`，特别是这些条件是相反的：

```
where F.Year = (@Year -1 )
and @Year = F.Year 
```

那将永远是错误的。

# jquery - jQuery 循环插件之上的 Div

> ID：15883873
> 
> 赞同：0
> 
> 时间：2013-04-08T16:04:44.817
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我正在使用 jquery 循环插件，我想在幻灯片上添加一个部分，人们可以在其中登录。这是我希望它看起来的示例。

[mycampus.astate.edu](http://mycampus.astate.edu)

我了解循环插件的工作原理，但我只是不知道如何将东西放在它上面。我非常感谢提供的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:42:34.503

您可以使用幻灯片的一些选项轻松实现此目的：

首先，让我们添加登录框，在我的示例中它有 id `login`，我们还将告诉插件根据选择器'> div.cycle-slide' 选择幻灯片，以便登录 div 不被视为幻灯片。最后，我们只需要确保并将登录框的 z-index 设置在幻灯片上方。

示例：http: [//jsfiddle.net/lucuma/87FUR/3/](http://jsfiddle.net/lucuma/87FUR/3/)

HTML：

```
 <div class="cycle-slideshow item" data-cycle-timeout="3000" data-cycle-speed="2000" data-cycle-slides="> div.cycle-slide" data-cycle-fx="fade">
    <div id="login">Your Login here</div>
    <div class="cycle-slide">
        <img src="http://placehold.it/550x550/" />

    </div>
    <div class="cycle-slide">
        <img src="http://placehold.it/550x550/ff0000" /> 

    </div>
    <div class="cycle-slide">
        <img src="http://placehold.it/550x550/" />

    </div>
</div> 
```

CSS：

```
div.cycle-slideshow {
    width: 550px;
    height: 550px;
}
#login {
    position: absolute;
    width: 200px;
    height: 400px;
    background-color:blue;
    top: 0;
    z-index: 99999;
    opacity: .5;
}
img {
    display:block;
    max-width:100%;
} 
```

# python - python flask - 提供静态文件

> ID：15883874
> 
> 赞同：13
> 
> 时间：2013-04-08T16:04:49.753
> 
> 标签：python, flask

我正在尝试使用烧瓶提供静态文件。我不知道如何使用 url_for 函数。我所有生成动态内容的路由都工作正常，我已经导入了 url_for，但是当我有这个代码时：

```
@app.route('/')
def home():
    return url_for('static', filename='hi.html') 
```

除了位于静态目录中的“hi.html”文件（其中包含一些基本的html）之外，我在加载页面时得到的实际上是这样的：

> /静态/hi.html

我只是错误地使用了 url_for 吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T16:14:56.380

`url_for`只是准确地返回该文件的 URL。听起来您想访问`redirect`该文件的 URL。相反，您只是将 URL 的文本作为响应发送给客户端。

```
from flask import url_for, redirect

@app.route('/')
def home():
    return redirect(url_for('static', filename='hi.html')) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T16:17:49.673

你正在为你正在做的事情获得正确的输出。 为您提供的参数`url_for`生成**url 。**在您的情况下，您正在为目录中的文件生成**url**。如果要实际输出文件，则需要`hi.html``static`

```
from flask import render_template, url_for

...

    return render_template(url_for("static", filename="hi.html")) 
```

但是此时，您的静态目录需要位于模板目录（配置为存在的位置）下。

如果您要提供这样的静态 html 文件，那么我的建议是通过将流量`/static/.*`直接从您的 Web 服务器路由到烧瓶应用程序之外为它们提供服务。网络上有很多使用 nginx 或 apache 执行此操作的示例。

# c# - Thread.Join() 更改 C# 中的程序输出

> ID：15883879
> 
> 赞同：1
> 
> 时间：2013-04-08T16:05:07.250
> 
> 标签：c#, multithreading

这是一个简单的 C# 示例程序的稍微修改版本：

```
using System;
using System.Threading;

namespace SemaphorTest
{
    class Program
    {
        static Semaphore gate = new Semaphore(3, 3);
        static void Main(string[] args)
        {
            for (int i = 0; i < 5; i++)
            {
                Thread t = new Thread(Enter);
                t.Start(i);
            }
        }

        public static void Enter(Object id)
        {
            Console.WriteLine("Thread " + id + " wants to enter.");
            gate.WaitOne();
            Console.WriteLine("Thread " + id + " is in.");
            Thread.Sleep(500 * (Int32)id);
            Console.WriteLine("Thread " + id + " leaving.");
            gate.Release();
        }
    }
} 
```

这将打印以下输出（似乎是随机顺序）：

```
Thread 0 wants to enter.
Thread 1 wants to enter.
Thread 1 is in.
Thread 0 is in.
Thread 2 wants to enter.
Thread 3 wants to enter.
Thread 0 leaving.
Thread 3 is in.
Thread 4 wants to enter.
Thread 2 is in.
Thread 1 leaving.
Thread 4 is in.
Thread 2 leaving.
Thread 3 leaving.
Thread 4 leaving. 
```

但是，如下添加 Thread.Join() 会极大地改变输出。即：

```
for (int i = 0; i < 5; i++)
            {
                Thread t = new Thread(Enter);
                t.Start(i);
                t.Join();
            } 
```

将输出更改为：

```
Thread 0 wants to enter.
Thread 0 is in.
Thread 0 leaving.
Thread 1 wants to enter.
Thread 1 is in.
Thread 1 leaving.
Thread 2 wants to enter.
Thread 2 is in.
Thread 2 leaving.
Thread 3 wants to enter.
Thread 3 is in.
Thread 3 leaving.
Thread 4 wants to enter.
Thread 4 is in.
Thread 4 leaving. 
```

为什么会这样？我知道这些线程默认是前台线程，并且主线程不需要等待它们完成（即使在 Main 完成后它们也会运行，因此它们在这里不需要 thread.Join()）。但我不明白是什么让它们按照更改后创建的顺序运行。有任何想法吗 ？

```
Thanks
Dileep Balakrishnan 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T16:07:35.373

> 为什么会这样？

因为你要求它！

您已经启动了一个线程，然后等待它完成，然后启动下一个线程等等。这正是`Thread.Join`它所做的：它阻塞当前正在执行的线程，直到您调用它的线程终止。

我感兴趣的是您*期望*该代码执行的操作...如果您只想等到所有线程完成后再让主线程完成，则需要启动所有线程，并在执行过程中记住它们，然后*依次*调用`Join`每个。例如：

```
List<Thread> threads = new List<Thread>();
// First start all the threads
for (int i = 0; i < 5; i++)
{
    Thread t = new Thread(Enter);
    t.Start(i);
    threads.Add(t);
}

// Then wait for them to finish
foreach (var thread in threads)
{
    thread.Join();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:07:24.260

您正在将每个线程与调用线程连接起来。这实际上将阻塞调用线程并等待每个线程依次结束。

在[文档](http://msdn.microsoft.com/en-gb/library/system.threading.thread.join.aspx)中它指出：

> 阻塞调用线程，直到线程终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:08:19.573

Thread.join() 不会让事情同时运行。它实际上通过阻塞当前线程直到它完成来强制执行您所看到的行为。这在文档中明确提到：http: [//msdn.microsoft.com/en-us/library/95hbf2ta.aspx](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)

# c++ - QList 元素的分段错误

> ID：15883883
> 
> 赞同：0
> 
> 时间：2013-04-08T16:05:25.913
> 
> 标签：c++, pointers, segmentation-fault, qlist, qfile

在我的应用程序中，我有一个指向 QFile 对象的指针列表：

```
QList<QFile*> files 
```

此函数将元素添加到列表中：

```
void MumuServer::openFiles(){
    QDir fileDir(QDir::toNativeSeparators(homeApp.path() + "/file"));
    std::cout << fileDir.path().toStdString() << std::endl;
    if(fileDir.exists()){ // there is files directory in the application home dir
    std::cout << "fileDir exists" << std::endl;
    QStringList filesList = fileDir.entryList();
    for(int index = 0; index < filesList.size(); index++){
        QString fileName = filesList.at(index);
        if(this->blackListFile.contains(fileName)){
            continue;
        }
        QString path = fileDir.path() + "/" + fileName;
        std::cout << path.toStdString() << std::endl;
        QFile file(QDir::toNativeSeparators(path));
        if(file.exists()){
            files.append(&file);
        }
    }
    std::cout << this->files.size() << " files found" << std::endl;
} 
```

在这个函数之后，QFile 指针被添加到 QList 上。但是，当我尝试使用函数 at(int) 操作列表元素上的某些内容时，会发生分段错误。

例子：

```
QFile * file = files.at(index);
std::cout << "File size = " << file->fileName() << std::endl; 
```

有人看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:11:58.287

您放入“文件”列表的对象已超出范围并被销毁。使用“新”运算符来分配它们。完成后请务必删除它们，否则会出现内存泄漏。

```
 QFile* file = new QFile(QDir::toNativeSeparators(path));
    if(file->exists()){
        files.append(file);
    } 
```

# javascript - 使用 CreateTextFile 时出现“找不到路径”

> ID：15883887
> 
> 赞同：0
> 
> 时间：2013-04-08T16:05:43.690
> 
> 标签：javascript, syntax, internet-explorer-8, text-files

我正在尝试创建一个文本文件，但出现`Path not found`错误。

我究竟做错了什么？

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
    var fo = fso.GetFolder("\\logs")
    var a = fo.CreateTextFile("testfile.txt", true);
    a.WriteLine("This is a test.");
    a.Close(); 
```

我在 IE8 中使用 javascript。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:23:57.140

您可以先尝试确保日志目录存在。接下来，尝试在源中包含日志目录的整个路径。这是因为 FileSystemObject 的默认路径是当前工作目录。

例如，如果日志位于 C:\logs\

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
    var fo = fso.GetFolder("C:\\logs")
    var a = fo.CreateTextFile("testfile.txt", true);
    a.WriteLine("This is a test.");
    a.Close(); 
```

# mysql - mysql查询引用不同表中1列的2列

> ID：15883889
> 
> 赞同：0
> 
> 时间：2013-04-08T16:05:57.913
> 
> 标签：mysql, join

抱歉，如果有人提出问题，但我无法将我找到的任何答案与我的情况联系起来。

我为这个问题创建了一个临时表：

```
describe temp;
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| id        | int(11)      | NO   |     | 0       |       |
| artist    | varchar(255) | NO   |     | NULL    |       |
| title     | varchar(255) | NO   |     | NULL    |       |
| id_genre  | int(11)      | NO   |     | NULL    |       |
| id_genre2 | int(11)      | NO   |     | NULL    |       |
+-----------+--------------+------+-----+---------+-------+ 
```

另一个相关表是流派列表。

我想创建一个导致这两个查询组合的查询。

```
select temp.title,genre.name
from temp
join genre on genre.id = temp.id_genre;

+------------------------+--------------+
| title                  | genre1       |
+------------------------+--------------+
| Tight Capris - 1958-B  | Rockabilly   |
| Endless Sleep - 1958-5 | MyFavourites |
| Daisy Mae - 1966       | Rockabilly   |
| Fire of love - 1966-58 | Rockabilly   |
| Stormy - 1963          | Pop          |
+------------------------+--------------+
5 rows in set (0.00 sec)

select temp.title,genre.name as genre2
from temp
join genre on genre.id = temp.id_genre2;

+------------------------+------------+
| title                  | genre2     |
+------------------------+------------+
| Tight Capris - 1958-B  | Rockabilly |
| Endless Sleep - 1958-5 | Rockabilly |
| Daisy Mae - 1966       | Rockabilly |
| Fire of love - 1966-58 | Rockabilly |
| Stormy - 1963          | Pop        |
+------------------------+------------+
5 rows in set (0.00 sec) 
```

注意1标题中的流派差异：无尽的睡眠

我想创建一个看起来像这样的结果，除了将genre.id替换为流派的名称：

```
+------------------------+----------+-----------+
| title                  | id_genre | id_genre2 |
+------------------------+----------+-----------+
| Tight Capris - 1958-B  |      163 |       163 |
| Endless Sleep - 1958-5 |      161 |       163 |
| Daisy Mae - 1966       |      163 |       163 |
| Fire of love - 1966-58 |      163 |       163 |
| Stormy - 1963          |       99 |        99 |
+------------------------+----------+-----------+
5 rows in set (0.00 sec) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:08:01.767

您需要连接表`Genre`两次，因为表上有两列`temp`依赖于它。

```
SELECT  temp.title,
        a.name GenreA,
        b.Name GenreB
FROM    temp
        INNER JOIN genre a 
            ON a.id = temp.id_genre
        INNER JOIN genre b 
            ON b.id = temp.id_genre2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2bec7/2)

输出

```
╔════════════════════════╦══════════════╦════════════╗
║         TITLE          ║    GENREA    ║   GENREB   ║
╠════════════════════════╬══════════════╬════════════╣
║ Tight Capris - 1958-B  ║ Rockabilly   ║ Rockabilly ║
║ Endless Sleep - 1958-5 ║ MyFavourites ║ Rockabilly ║
║ Daisy Mae - 1966       ║ Rockabilly   ║ Rockabilly ║
║ Fire of love - 1966-58 ║ Rockabilly   ║ Rockabilly ║
║ Stormy - 1963          ║ Pop          ║ Pop        ║
╚════════════════════════╩══════════════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:10:44.510

所以这就是你需要的吗？

```
SELECT
    title,
    genre1.name as genre1,
    genre2.name as genre2
FROM 
    temp
INNER JOIN genre as genre1
    ON genre1.id = id_genre
INNER JOIN genre as genre2
    ON genre2.id = id_genre2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:20:46.050

我同意 Stephan 的观点，即您需要加入*流派*表两次。但使用 LEFT JOIN 而不是 INNER JOIN 可能是个好主意：

```
SELECT  temp.title,
        a.name GenreA,
        b.Name GenreB
FROM    temp
        LEFT OUTER JOIN genre a 
            ON a.id = temp.id_genre
        LEFT OUTER JOIN genre b 
            ON b.id = temp.id_genre2 
```

如果您在 temp 中的记录在 id_genre 列之一中具有 NULL，或者具有与流派表中的行不匹配的 id，这将有所帮助。

添加：

关于“我如何用特定的流派进一步过滤它。例如 wheregenre1 = 'rockabilly' （这不起作用）。”：

在并添加

```
HAVING genre1 = 'rockabilly' 
```

# php - 修改从 PDO 和 PHP 生成的 json

> ID：15883890
> 
> 赞同：1
> 
> 时间：2013-04-08T16:05:59.650
> 
> 标签：php, mysql, json

我会很快用更多的代码少说话。

我有一个 mySQL DB，我想用 PHP 和 PDO 从中生成 json。

```
<?php
require("db.php");
$dsn = "mysql:host=localhost;dbname=$dbname";
$pdo = new PDO($dsn, $username, $password);
$rows = array();
    $stmt = $pdo->prepare("SELECT * FROM table");
    $stmt->execute();
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
echo '{"jsons":';
echo json_encode($rows);
echo "}";
?> 
```

上面的代码将返回

```
{"jsons":[{"date_time":"2012-09-06 20:55:44","name":"theOne","message":"i am god","ip":"","device":"HTC","device_type":"Phone","class":"class1","id":"1"}]} 
```

我想修改 php 代码，所以我的 json 输出将是

```
{"jsons":[{"date_time":"2012-09-06 20:55:44","name":"theOne","message":"i am god","ip":"","devs":{"device":"HTC","device_type":"Phone","class":"class1","id":"1"}}]} 
```

不同之处在于我想将 , 和 嵌套`device`到`device_type`开发`class`人员`id`中。

我无法做任何事情或从谷歌找到这样的任务。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:13:47.427

```
$push_in_devs = array("device","device_type","class","id") ;
$old_set = json_decode('{"jsons":[{"date_time":"2012-09-06 20:55:44","name":"theOne","message":"i am god","ip":"","device":"HTC","device_type":"Phone","class":"class1","id":"1"}]}') ;
$old_object = $old_set->jsons[0] ;

$new_set = new STDClass() ;
$new_set->jsons = array(0 => new STDClass) ;
$new_object = $new_set->jsons[0] ;

foreach($old_object as $name => $value){
  if (!in_array(strtolower($name), $push_in_devs))
    $new_object->$name = $value ;
}

$new_object->devs = array() ;

$dev = array() ;
foreach($push_in_devs as $name){
  $dev[$name] = $old_object->$name ;
}

$new_object->devs[] = $dev ;

echo json_encode($new_set) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:11:25.160

在该行之后运行此块`$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);`：

```
foreach ($rows as $key => $row) {
    foreach ($row as $column => value) {
        if ($column == 'device' || $column == 'device_type' || $column == 'class' || $column == 'id') {
            $row[$key]['devs'][$column] = $value;
        } else {
            $row[$key][$column] = $value;
        }
    }
} 
```

这会将值嵌套在每行的“devs”键下，然后再继续编码为 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:19:10.597

```
$results = array();

foreach ($rows as $row) {
 $result = array();

  foreach ($row as $key => $value) {

   if ($key === 'device' || $key === 'device_type' 
      || $key === 'class' || $key === 'id') {
      $result['devs'][] = $value;
   } else {
      $result[$key] = $value;
   }
  }
  $results[] = $result;
}

json_encode($results); 
```

# html - 如何通过向其发送带有参数的 POST 请求来更新网页并通过向其发送 GET 请求来获取最后检索到的参数值

> ID：15883891
> 
> 赞同：-1
> 
> 时间：2013-04-08T16:06:00.950
> 
> 标签：html, asp-classic

我需要编写一个可以通过参数 POST 更新的简单网页：

1.  使用参数向页面发送 POST 请求 - 将不断更新网页。
2.  向页面发送 GET 请求将返回参数的最后检索值

例如（可能每个请求都是不同的会话）：

```
POST /mypage.asp?param1=Hello

GET /mypage.asp  >>  Response: Hello

POST /mypage.asp?param1=Changed

GET /mypage.asp  >>  Response: Changed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:07:51.053

使用 $_SESSION

```
session_start();

if($_SERVER['REQUEST_METHOD'] == "POST")
    $_SESSION['last_val'] = $_POST['some_val'];
}

if($_SERVER['REQUEST_METHOD'] == "GET")
    echo $_SESSION['last_val'];
} 
```

[了解有关会议的更多信息](http://www.tizag.com/phpT/phpsessions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:52:06.077

Evan 的回答在概念上是正确的，但我认为他没有解决不同的会话，也没有使用“经典 ASP”（vbscript 或 jscript）。

要在会话和请求之间保留一个值，您需要某种形式的存储。可能最简单的选项是应用程序变量（我在下面显示）。其他选项是“线程安全”存储，如广泛可用的 CAPROCK DICTIONARY 或数据库。

编码：

```
<%@ Language="VBScript" %> 
<% 
If Request.ServerVariables("REQUEST_METHOD")= "POST" Then
 Application.Lock  
 Application("StoredValue") = Request.Form("param1") 
 Application.Unlock  
Else
 Application.Lock  
 Response.Write Application("StoredValue") 
 Application.Unlock
End If
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:06:41.080

```
<%
dim fileSystemObject,Text_File,Text_File_Content,NewValue

NewValue=Request.QueryString("MyParam")
set fileSystemObject=Server.CreateObject("Scripting.FileSystemObject")

If NewValue <> "" Then
    set Text_File=fileSystemObject.CreateTextFile("C:\MyPath\myTextFile.txt")
    Text_File.write(NewValue)
    Text_File.close
End If

if fileSystemObject.FileExists("C:\MyPath\myTextFile.txt")=true then
    set Text_File=fileSystemObject.OpenTextFile("C:\MyPath\myTextFile.txt",1,false)
    Text_File_Content=Text_File.ReadAll
    Text_File.close
else
    set Text_File=fileSystemObject.CreateTextFile("C:\MyPath\myTextFile.txt")
    Text_File.write("Please send GET request to this page with paramter MyParam!")
    Text_File.close
    set Text_File=fileSystemObject.OpenTextFile("C:\MyPath\myTextFile.txt",1,false)
    Text_File_Content=Text_File.ReadAll
    Text_File.close
end if

Response.Write(Text_File_Content)
%> 
```

# ios - 自定义核心数据 SectionNameKeyPath

> ID：15883892
> 
> 赞同：19
> 
> 时间：2013-04-08T16:06:08.367
> 
> 标签：ios, core-data, transient, sections

我是核心数据的新手，正在尝试弄清楚如何`sectionNameKeyPath`在我的`NSFetchedResultsController`. 我有一个托管对象，其属性名为`acctPeriod`. 它是一个`NSString`. 我想根据该字段的前 4 个字符创建部分。前4个字符代表会计期间的年份，不需要保存。

我浏览了这个站点并看到了有关瞬态属性的帖子，但我似乎无法让它们工作。基本上我想要这个，然后分配`periodYear`给我的`sectionNameKeyPath`.

```
@dynamic periodYear;

-(NSString *)periodYear
{
    return [self.acctPeriod substringToIndex:4];
} 
```

任何帮助，将不胜感激。

**更新：使用 Martin R. 的答案，我能够让它按预期工作。

```
- (NSFetchedResultsController *)fetchedResultsController
{
if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Billing" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Edit the sort key as appropriate.
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"acctPeriod" ascending:NO];
NSArray *sortDescriptors = @[sortDescriptor];

//Predicate
NSPredicate *pred = [NSPredicate predicateWithFormat:@"clients = %@", self.client];
NSLog(@"%@",pred);

//[fetchRequest setResultType:NSDictionaryResultType];
//[fetchRequest setReturnsDistinctResults:YES];

[fetchRequest setPredicate:pred];
[fetchRequest setSortDescriptors:sortDescriptors];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"periodYear" cacheName:nil];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error])
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return _fetchedResultsController;  
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-08T19:56:59.343

以下应该有效：`periodYear`在托管对象子类的类扩展中实现该方法（将用作“部分名称键路径”）：

```
@interface Event (AdditionalMethods)
- (NSString *)periodYear;
@end

@implementation Event (AdditionalMethods)
- (NSString *)periodYear {
    return [self.acctPeriod substringToIndex:4];
}
@end 
```

确保将`acctPeriod`其用作获取请求**的第一个（或唯一一个）排序描述符：**

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"acctPeriod" ascending:YES];
NSArray *sortDescriptors = @[sortDescriptor];
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

用于获取的结果控制器`periodYear`：`sectionNameKeyPath`

```
NSFetchedResultsController *_fetchedResultsController = [[NSFetchedResultsController alloc]
                  initWithFetchRequest:fetchRequest 
                   managedObjectContext:self.managedObjectContext 
                     sectionNameKeyPath:@"periodYear"
                              cacheName:nil];
_fetchedResultsController.delegate = self;
self.fetchedResultsController = _fetchedResultsController; 
```

最后添加默认`titleForHeaderInSection`方法：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo name];
} 
```

或者，您可以定义`periodYear`为托管对象的*瞬态属性*。在这种情况下，它也不会存储在数据库中，但可以通过按需计算和缓存值的方式实现。

Apple Developer Library 中的[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)示例项目演示了它是如何工作的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T18:02:01.377

我建议不要使用瞬态属性，`sectionNameKeyPath`因为它会导致获取请求获得的所有对象出错，因此该属性可以用作部分路径。
您最好定义一个持久性属性`year`并将其用作您的`sectionNameKeyPath`.
将您的 FRC 设置`sectionNameKeyPath`为`year`这样：

```
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:self.managedObjectContext
                                      sectionNameKeyPath:@"year"
                                               cacheName:nil/*your chioce*/]; 
```

要将部分名称显示为表格中的标题，请实现：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    id<NSFetchedResultsSectionInfo> sec = [self.fetchedResultsController sections][section];
    return [sec name];
} 
```

# java - TextInputFormat VS 非 UTF-8 编码

> ID：15883895
> 
> 赞同：3
> 
> 时间：2013-04-08T16:06:29.590
> 
> 标签：java, hadoop, mapreduce

我必须编写一个 map reduce 批处理（使用`org.apache.hadoop.mapreduce.*`API）来处理具有以下属性的文本文件：

*   [ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)编码。
*   类似 CSV
*   分隔符是`0xef`

我使用 a`TextInputFormat`因为我想自己执行字段拆分。然而，它似乎`TextInputFormat`只能处理 UTF-8 编码的文件。

根据[MA​​PREDUCE-232](https://issues.apache.org/jira/browse/MAPREDUCE-232)，自 2008 年以来有一个待处理的补丁，但我还没有找到解决方法。我有什么选择？事先以 UTF-8 格式转换文件不是一种选择。

**编辑**：在阅读 Hadoop 源代码时，我想出了一个可能的解决方法。`LineReader`& 朋友只处理字节。它们从不将字节转换为字符串，它们只匹配硬编码的行尾分隔符并填充字节缓冲区。由于 ISO_8859_1 和 UTF-8 共享相同的字节序列`\n`，因此可以使用：

```
public class MyMapper extends Mapper<IntWritable, Text, Text, Text> {

    public void map(IntWritable key, Text value, Context context) 
                   throws IOException, InterruptedException {
        String data = new String(value.getBytes(),
                                 0, value.getLength(), 
                                 Charsets.ISO_8859_1)
        // [...]
    }
} 
```

这个解决方案可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:37:36.127

我对 TextInputFormat 没有任何特别的经验，但如果你说的是真的（底层代码只寻找 的单字节值`\n`），那么使用你的示例代码将这些字节转换为字符串将是完全合法的。

更新：

您对依赖实现细节的担忧是有道理的，但是，这里有一些对您有利的观点：

1.  “错误修复”自 2008 年以来仍然开放，并被拒绝，因为它没有正确处理所有编码（又名，这是一个需要更多工作才能正确修复的难题）
2.  该类`Text`显式使用 utf-8 编码。以后很难在不破坏整个世界的情况下改变这一点。
3.  在第 2 点之后，由于您的目标编码具有与 utf-8 兼容的换行字节序列，只要您始终可以取回原始原始字节，就应该没问题。

# java - 绑定不匹配错误和java泛型方法

> ID：15883896
> 
> 赞同：5
> 
> 时间：2013-04-08T16:06:29.703
> 
> 标签：java, generics, selenium-webdriver

我收到以下错误：

```
Bound mismatch: The generic method constructPage(WebDriver, int, Class<T>) of type     
Page<T> is not applicable for the arguments (WebDriver, int, Class<HomePage>). The 
inferred type HomePage is not a valid substitute for the bounded parameter <T extends 
Page<T>> 
```

如果成功，我正在尝试登录并返回主页，如果不使用泛型，则返回登录页面。

我有一个基类 Page，它由 SecuredPage 扩展，用于登录墙后面的页面。我写了一个通用的辅助方法，可以构造任何类型的页面。此方法由 LoginPage 上的 login 方法使用。LoginPage 扩展 Page 和 HomePage 扩展 SecuredPage。SecuredPage 扩展了 Page。如果返回 LoginPage，则 login 方法有效，但在尝试返回 HomePage 时出现上述错误。由于 HomePage 是 page 的子类，因为它的父类扩展了 Page，我很困惑为什么 HomePage 不是有界参数的有效替代品`<T extends Page<T>>`。

```
public abstract class Page<T extends Page<T>> extends SlowLoadableComponent<T> {

    protected static final <T extends Page<T>> T constructPage(WebDriver driver, 
    int timeoutInSeconds, java.lang.Class<T> pageClass) 
    {
        Page<T> p = null;

        try {
            Constructor<T> pageConstructor = pageClass.getConstructor(
            WebDriver.class, String.class, Integer.TYPE);
            p = pageConstructor.newInstance(driver, driver.getCurrentUrl(), 
                timeoutInSeconds);
            p.get();

        } catch(Exception e) {

        }

        return pageClass.cast(p);       
    }
} 
```

这是 SecuredPage 类：

```
public class SecuredPage extends Page<SecuredPage> {

    .....
} 
```

这是主页：

```
public final class HomePage extends SecuredPage {
    ......
} 
```

这是登录页面：

```
public final class LoginPage extends Page<LoginPage>  {

    public final HomePage loginWithGoodCredentials(final User user) {
        return login(user, HomePage.class);
    }

    public final LoginPage loginWithBadCredentials(final User user) {
        return login(user, LoginPage.class);
    }

    public final <T extends Page<T>> T login(final User user, final Class<T>     
            expectedPage) {
        enterUsername(user.getUsername());
        enterPassword(user.getPassword());
         loginButton.click();

        return Page.constructPage(getDriver(), getTimeoutInSeconds(), 
        expectedPage);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:30:51.613

问题是它`HomePage`是 a`Page<SecuredPage>`而不是 a `Page<HomePage>`。该`login`方法`Page<HomePage>`将从其通用签名返回 a 。

您必须使泛型参数`HomePage`与自身相关，而不是`SecuredPage`. 这将解决编译器错误。保持`SecuredPage`通用，但要确保它的边界是 extends `SecuredPage<T>`。然后为中`HomePage`的泛型参数赋值。`T``HomePage`

```
class SecuredPage<T extends SecuredPage<T>> extends Page<T> {
...
}
class HomePage extends SecuredPage<HomePage>  {
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:25:18.810

调用`login(user, SecuredPage.class)`有效，但`login(user, HomePage.class)`无效。原因是：类型参数`T`in`SecuredPage`是`SecuredPage`. `HomePage`是 的子类`SecuredPage`，所以 的`T`类型参数`HomePage`也是`SecuredPage`。

现在，您`login`使用`Page<HomePage>`. 但是这样的类是不存在的。`HomePage`是 的子类`Page<SecuredPage>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:36:07.680

如果您仍然希望在存在***Bounded Generics***`HomePage`的情况下进行扩展，请将“ *Generic Substitution* ”传递到 HomePage。`SecuredPage`

 **不要将***Generic***替换为`SecuredPage`，而是 make `SecuredPage`as

```
public class  SecuredPage<T extends Page<T>> extends Page<T> {

} 
```

在创建`HomePage`时，像这样声明泛型的值，

```
public class HomePage extends SecuredPage<HomePage> {

} 
```

这应该基本上解决了错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T18:01:57.857

就您的`constructPage`方法而言，您可以使用

```
protected static final <T extends Page<?>> T constructPage(...) 
{
    Page<?> p = null;
    //...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-20T02:27:23.747

如果您仍然面临相同的错误，请从 Window > Preferences > Java > Compiler > "Compiler Compilation level" -> 1.8 更改编译器级别的 JDK 1.8 或最新版本**

# tableview - tableView 单元格 - 从另一个 tableView 中选择

> ID：15883899
> 
> 赞同：0
> 
> 时间：2013-04-08T16:06:34.320
> 
> 标签：tableview

我想知道是否以及如何使以下工作成为可能

从一个`tableView cell`我想`tableView`用 10 个不同的单元格进入另一个单元格，用户必须在其中选择，这个单元格是在前一个表格单元格中设置的。所以让我们说，即表格单元格是“选择” - 用 10 个不同的单元格触摸这个单元格 a`tableView`打开，用户可以选择其中一个。通过选择其中一个，它会回到初始`tableView`状态，并且单元格中充满了用户的选择。究竟如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T06:42:46.020

您好，您可以查看以下代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[tableView deselectRowAtIndexPath:indexPath animated:YES];
if(tableView == displayTableView)
{
//Implementation for choiceTableview
choiceTableview.hidden = FALSE;
displayTableView.hidden = TRUE;
[choiceTableview reloadData];
}
else
{
//Implementation for displayTableView
choiceTableview.hidden = TRUE;
displayTableView.hidden = FALSE;
[displayTableView reloadData];
}
} 
```

您必须在 tableview 方法中检查以下条件并根据 ti 显示数据：

```
if(tableView == displayTableView)
{
//Implementation for choiceTableview
}
else
{
//Implementation for displayTableView
} 
```

这将帮助您处理任意数量的表格视图。干杯...

# javascript - Javascript 不会正确打开 Phonegap 应用程序的文件浏览器 - 但 HTML 会

> ID：15883900
> 
> 赞同：0
> 
> 时间：2013-04-08T16:06:34.673
> 
> 标签：javascript, html, cordova

我是 HTML/Javascript/Jquery 的新手，所以这个问题可能看起来很基础。但是我在[网上](http://ramkulkarni.com/blog/file-chooser-dialog-for-phonegap-application/)找到了一个文件浏览器，我想在 Phonegap 的应用程序中使用它。问题是，我下载的示例使用此方法打开文件浏览器。

```
<a href="fileBrowser.html"  data-role="button" data-inline="true" id="browseBtn">Browse</a> 
```

但是我需要使用Javascript来打开它，因为我只需要长按按钮时才需要它。但是这些方法都不起作用：

```
window.location.href = ("fileBrowser.html");
window.open("fileBrowser.html"); 
```

我这样称呼它（只是为了测试它是否有效）：

```
<a onclick="test()"  data-role="button" data-inline="true" id="browseBtn">Browse</a> 
```

它应该是这样出来的：

![示例中的工作版本](https://i.stack.imgur.com/0977Y.png)

但不幸的是，当我使用 Javascript 时，结果是这样的： ![不工作，用javascript打开](https://i.stack.imgur.com/atxKC.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:14:47.570

看起来你使用 jQuery Mobile？

用这个：

```
$.mobile.changePage("fileBrowser.html"); 
```

# javascript - 随机图像只能应用一次

> ID：15883901
> 
> 赞同：1
> 
> 时间：2013-04-08T16:06:39.047
> 
> 标签：javascript

我希望我的网站显示一个随机背景图片（我已使用 javascript 设置），但我不希望它在用户在网站上时再次更改。目前，每次您单击链接时它都会更改，但我希望它仅在您单击“主页”按钮时更改。

我认为this other question是相似的，但由于我以前没有使用过php，我想知道是否有javascript替代品？（或者只是我在这里错过的一些愚蠢的东西？） [只选择一次随机值](https://stackoverflow.com/questions/14429795/choose-random-value-only-once)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:12:10.570

您可以使用[cookie](http://www.w3schools.com/js/js_cookies.asp)甚至`window.localStorage`通过导航在 Javascript 中存储信息（然后使用与链接中相同的逻辑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:13:31.360

## Javascript解决方案（完全客户端）：

采用`sessionStorage`

```
fileurls=["a.jpg","b,jpg"]// list of file URLS
function getFileURL(){
 if(sessionStorage.fileurl)
  return sessionStorage.fileurl;
 }else{
  sessionStorage.fileurl=fileurls[Math.floor(Math.rand()*fileurls.length)]
  return sessionStorage.fileurl;
 }
} 
```

现在，只需将`src`图像的设置为函数设置的任何内容：

```
document.body.style.background="url('"+getFileURL()+"')"; 
```

基本上，这会在浏览器存储中为会话放置一个随机文件 URL，并在需要时使用它。

* * *

## PHP 解决方案（完全服务器端）：

```
$fileurls = array('a.jpg','b,jpg');
if(!isset($_SESSION['fileurl'])) {
    $_SESSION['fileurl'] = $fileurls[rand(0, count($fileurls) - 1)];
} 
```

而且，无论`<body>`标签在哪里，都这样做：

```
 <body background="<?echo$_SESSION ['fileurl'];  ?>"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T16:10:07.310

使用 JavaScript 为 Home 按钮设置一个 onClickListener，单击该按钮将更改背景。

# mysql - MS Excel：导出为 csv 时如何获取更改的日期格式？

> ID：15883902
> 
> 赞同：0
> 
> 时间：2013-04-08T16:06:39.190
> 
> 标签：mysql, excel, date

我有一个 MS Excel 文件，其中一列包含格式为 m/d/yyyy 和 mm/dd/yyyy 的日期。我希望将所有这些日期导入到 MySQL 表中。

所以在 MS Excel 中，我将单元格格式更改为自定义日期 'yyyy-mm-dd' 并且在 excel 列中一切看起来都很好。当我将其导出为 .csv 时，所有日期都是原始格式，即 m/d/yyyy 和 mm/dd/yyyy，但不是“yyyy-mm-dd”。

请在这方面帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:17:37.477

就像 David 提到的那样，您可能必须在将文本导入 MySQL 表之前替换它。你可以试试这个公式：

`=TEXT(A2,"yyyy-mm-dd")`

并抄下来。然后复制->将值粘贴到原始日期列中。`Text()`然后用公式删除临时列。

替换文本后尝试导入它。它应该可以解决。

# lightbox - 让 Lightbox 字幕链接正常工作的 99% 方法……

> ID：15883908
> 
> 赞同：0
> 
> 时间：2013-04-08T16:06:59.013
> 
> 标签：lightbox

...或者至少是这样的感觉:)

我知道以前有人问过类似的灯箱链接问题，但我不确定它们是否完全适用于我的情况。我正在尝试对其进行设置，以便灯箱标题/标题中的链接打开完整尺寸的图像。换句话说，在我的页面上，我有一个缩略图，然后如果我点击它，它会打开一个详细信息（在灯箱中），然后在灯箱弹出窗口下方会是一些文本，以及一个查看更大图像的链接（理想情况下）作为一个灯箱弹出窗口。）我已经阅读了一堆其他线程并按照说明将 <> 更改为 html 值等，我想我快到了，但它不是很有效。该链接在我的代码中正确显示，当我将鼠标悬停在链接上时，我得到一个手指指针，但由于某种原因，当我单击它时没有任何反应。我可以右键单击并在新窗口中打开链接，这有效，

我想我想知道的是：

1.  这可能吗？
2.  是不是比较简单（我没有 Javascript/Jquery 的经验……）
3.  是否可以在灯箱弹出窗口中打开另一个灯箱弹出窗口中的链接？
4.  除了 Lightbox 之外，还有其他选项可以允许此操作（Colorbox？Slimbox？）

到目前为止，这是我的代码：

```
<a href="<?php echo dirname($image->url()); ?>/detail/<?php echo $image->name() ?>-detail.jpg" rel="lightbox[<?php echo $page->catalogue(); ?>]" title="&lt;a href='<?php echo dirname($image->url()); ?>/max/<?php echo $image->name() ?>-max.jpg' rel='lightbox'&gt;FULL SIZE&lt;/a&gt;"><img src="<?php echo $image->url() ?>" width="<?php echo $image->width() ?>" height="<?php echo $image->height() ?>" alt="<?php echo $image->name() ?>" /></a> 
```

这是它如何输出的示例：

```
<div class="item" style="width: 194px; margin: 3%;">
    <a href="http://www.chrissvensson.info/ces85/content/035-035/detail/DSC_3335-detail.jpg" rel="lightbox[035]" title="&lt;a href='http://www.chrissvensson.info/ces85/content/035-035/max/DSC_3335-max.jpg' rel='lightbox'&gt;MAXIMUM&lt;/a&gt;"><img src="http://www.chrissvensson.info/ces85/content/035-035/DSC_3335.jpg" width="194" height="300" alt="DSC_3335" /></a></div> 
```

澄清一下，我使用的是 Lightbox 2.5.1 ( [http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/) )

非常感谢您提供的任何帮助。再次，如果之前已经回答过这个问题，我深表歉意……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:38:47.560

如果不发布更多代码，很难准确地说出到目前为止你已经完成了什么，但我可以尝试了解你需要做的一些非常基础的事情。

首先，大多数灯箱样式插件都是基于 jQuery 的，这意味着您将在客户端运行一些 javascript 代码。

你的 PHP 会生成静态内容来设置所有内容，然后你需要运行 jQuery 插件，它会做很多魔法并将其转换为灯箱。由于您没有提及您使用的是哪个插件，所以我将使用 fancybox，因为我认为它有很多不错的选择： http: [//fancybox.net/howto](http://fancybox.net/howto)。我不会介绍所有无聊的设置细节，因为它们已经在网站上，但这里有两个最重要的部分：

*   您需要设置一个由链接封装的图像，如给出的示例。你的 PHP 应该动态生成这个，类似于你已经完成的。

`<a id="image_id" href="image_big.jpg"><img src="image_small.jpg" alt=""/></a>`

`image_small.jpg`在任何 javascript 之前，它只是链接到全尺寸的图像 ( ) 的缩略图( `image_big.jpg`)

*   现在要使其真正起作用，您需要将 javascript 插件指向您刚刚创建的链接。

我建议你通读一些基本的 jQuery 文档或类似的教程[，](http://jqfundamentals.com/chapter/jquery-basics)因为你会发现这个库真的很有用，但长话短说，要在 jquery 中通过 id 选择一个元素，你会使用这个：`$('#image_id')`。

然后，您需要做的就是在插件加载时在此链接上运行 fancybox： `$('#image_id').fancybox();`

放置它的最佳位置是在`$(document.ready(function(){/*your code in here*/})`页面加载时调用的 jQuery 中。

使用fancybox，要在窗口打开时添加标题/标题，您只需在您创建`caption="caption here"`的锚点中添加一个属性。`<a>`

关于您关于灯箱弹出窗口中的灯箱弹出窗口的问题，这*是*完全可能的，但您必须做一些额外的 javascript 魔法。我的建议是考虑用户体验并找到替代方案（也许只允许用户下载海量图像，或者寻找允许您放大某些内容的插件），因为打开两个模态对话对用户来说听起来很混乱！

无论如何，希望这会有所帮助。

# validation - Symfony2 表单验证 - 确保一个整数小于另一个

> ID：15883911
> 
> 赞同：0
> 
> 时间：2013-04-08T16:07:16.580
> 
> 标签：validation, symfony

我有一个案子给你。我有一个包含两个整数的实体。两者都在 0 到 100 之间，但一个是最小值，一个是最大值。因此，最大值应大于或等于最小值。

我看过[http://symfony.com/doc/current/book/validation.html](http://symfony.com/doc/current/book/validation.html)和[http://symfony.com/doc/current/cookbook/validation/custom_constraint.html](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)

在这些链接的最后一个中，我们有以下示例：

```
// src/Acme/DemoBundle/Validator/Constraints/ContainsAlphanumericValidator.php
namespace Acme\DemoBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class ContainsAlphanumericValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {
        if (!preg_match('/^[a-zA-Za0-9]+$/', $value, $matches)) {
            $this->context->addViolation($constraint->message, array('%string%' => $value));
        }
    }
} 
```

但这需要 $value，我需要将最小值和最大值相互比较。如何在“max”验证器中引用“min”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:19:15.310

您可以使用回调约束来使用您自己的逻辑来比较值并在需要时添加违规。请参阅[http://symfony.com/doc/current/reference/constraints/Callback.html](http://symfony.com/doc/current/reference/constraints/Callback.html)

# xcode - getch() 返回 \377！而不是阅读字符

> ID：15883913
> 
> 赞同：1
> 
> 时间：2013-04-08T16:07:25.270
> 
> 标签：xcode, curses, getchar, getch

我正在使用 Xcode 并使用 C 语言试图了解如何使用 Getch 函数来启动项目。我复制了一些有人编写的代码作为应该可以工作的示例，但是它不是等待我输入字符的代码，而是为我返回一个：

```
#include <midi_lib.h> <---------- this needs to be here for later
#include <curses.h>
int main() {
  keypad(stdscr, TRUE); /* I dont know if this is needed*/
  char c;
  puts("Enter a character\n");
  c = getch();
  printf("You just typed a %c! \n", c);
  getch();
} 
```

这是输出：

```
Enter a character

You just typed a \377! 
```

如果我使用 Getchar()，它可以工作，但我不想按 Enter。

我对编码真的很陌生，所以它可能很简单，但我不知道......

LT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T17:51:36.187

好吧，您甚至没有使用`initscr()`.

您确实缺少很多东西，因此我建议您阅读[Ncurses howto](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)，它向您解释了从初始化（例如，那`keypad(stdscr, true)`是什么）到输入等等的所有内容。

这是一个有效的示例：

```
#include <ncurses.h>

int main()
{
    int ch;

    initscr();
    cbreak();
    noecho();
    keypad(stdscr, TRUE);

    ch = getch();
    endwin();

    printf("The key pressed is %d\n", ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:24:39.457

试试这个让你开始

```
#include <midi_lib.h> <---------- this needs to be here for later
#include <curses.h>

int main()
{
    char c;

    keypad(stdscr, TRUE);  /* I dont know if this is needed*/

    puts("Enter a character\n");
    do {
        c = getch();   
    } while (c == (char)-1);

   printf("You just typed a %c! \n",c);
} 
```

请注意，getch() 不断地轮询键盘以获取输入，当没有输入时，它会得到 -1 并重试，直到有一些情况下它会退出 while 循环并继续。

这可能不是您应该编码的方式，但它确实回答了您的问题。计算机在不断轮询键盘时会处于忙碌状态。

# ios - 为开发 Xcode 配置新设备

> ID：15883914
> 
> 赞同：40
> 
> 时间：2013-04-08T16:07:27.550
> 
> 标签：ios, xcode, ios-provisioning

我是一名新的 iOS 开发人员，虽然我过去成功地配置了用于 Xcode 开发的设备，但我刚刚获得了一个新设备，并且很难让 Xcode 配置它并允许我在其上测试应用程序.

当我将新设备连接到 Xcode 时，Xcode 确实可以正确识别和识别设备，但是当我运行应用程序时，我收到以下错误消息：“找不到此可执行文件的有效配置文件。”

根据 Apple 文档，我应该首先使用以下步骤在 Xcode 中申请开发证书：

1.  选择“窗口”>“管理器”>“设备”
2.  选择配置文件。
3.  单击窗口底部的刷新按钮。
4.  输入您的用户名和密码，然后单击登录。
5.  登录到您的帐户后，会出现一个提示，询问 Xcode 是否应该请求您的开发证书。

**我重复执行了步骤 1 - 4，每次 Xcode 崩溃时，我都可以进入步骤 5。**我尝试完全关闭 xcode、分离设备、清理项目、重新启动计算机等。是否有另一种方法来申请开发证书在 Xcode 之外？

好的，那么文档说我应该使用以下步骤配置设备（当然，我假设此步骤取决于上一步的成功，但我无法实现，但我还是尝试了）：

1.  将您的设备连接到 Mac。
2.  打开设备管理器
3.  选择您的 iOS 设备。
4.  单击“用于开发”按钮。首次将设备 ID 添加到帐户时，Xcode 会使用 iOS 通配符应用 ID、开发证书和设备 ID 创建 iOS 团队配置文件。iOS Team Provisioning Profile 也安装在您的 iOS 设备上。如果该设备过去曾用于开发，则可能不会出现“用于开发”按钮。如果发生这种情况，请单击屏幕底部的“添加到门户”。

**所以“用于开发”按钮没有出现（它出现在我第一次尝试这个并且从那以后没有出现），所以我点击了“添加到门户按钮”。每次我这样做时，Xcode 都会崩溃。**

我目前将代码签名身份设置为 iPhone Developer（我的名字）。我也尝试将其设置为 iPhone 开发人员，甚至不使用代码签名。我还去了 iOS 开发中心并在那里添加了设备（不确定我是否需要这样做）。

无论如何，任何人都可以建议我可能遗漏的任何东西或任何其他方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T17:11:18.007

在我睡觉的时候，Apple 完全取消了 Portal，并创建了一个新的且明显损坏的界面。这就像一种邪恶的愚人节玩笑。无论如何，如果你去[https://developer.apple.com/account/ios/device/deviceList.action](https://developer.apple.com/account/ios/device/deviceList.action)有一个很大的标志告诉你必须“在添加任何新设备之前重置你的设备列表”。听起来它完全涵盖了您的情况。祝你好运。

![在此处输入图像描述](https://i.stack.imgur.com/D3pRf.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T17:14:42.400

> 我还去了 iOS 开发中心并在那里添加了设备（不确定我是否需要这样做）。

您需要在那里添加设备。

添加设备后需要执行的步骤：

1.  接下来再次重新下载移动配置文件。

2.  转到管理器并删除您拥有的旧移动配置文件。

3.  双击您刚刚下载的新移动配置文件，并看到它出现在管理器上。

4.  连接您的设备，您应该会看到设备名称，而不是 iOS 设备。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-25T20:16:10.063

如果您想绕过临时配置文件注册的“注册设备”部分，只需上传他们为您提供的“示例 .txt 文件”并上传即可。然后，您将被允许单击“下一步”以完成注册，这样您就不必输入设备 UID。

# android - 如何查看mapView是否被触摸？

> ID：15883921
> 
> 赞同：0
> 
> 时间：2013-04-08T16:07:44.537
> 
> 标签：android, android-mapview

这是一种情况，当：
`MotionEvent.ACTION_DOWN`完成。

但是用户不要拿走他的手指（没有`MotionEvent.ACTION_UP)`

mapView.isPressed() - 否:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:50:44.490

创建一个新类：

```
public class CustomOverlay extends Overlay
{
     @Override
     public boolean onTouchEvent(MotionEvent event, MapView mapview)
     {

         if (event.getAction()== MotionEvent.ACTION_DOWN)
         {
             //put your code;
         }
         return false;
     }
} 
```

在 MapActivity 中将此代码放在 onCreate 方法中：

```
MapView mapView = (MapView)findViewById(R.id.MapView);
CustomOverlay customOverlay = new CustomOverlay();
List<Overlay> listOverlay = mapView.getOverlays();        
listOverlay.add(customOverlay); 
```

我希望这对你有帮助。

# macos - 从我的应用程序中以编程方式启动 Mac Calendar.app（并选择特定日期）？

> ID：15883922
> 
> 赞同：4
> 
> 时间：2013-04-08T16:07:44.557
> 
> 标签：macos, cocoa, calendar, osx-mountain-lion

我想在我的 Mac 应用程序中包含一个按钮，按下该按钮将启动用户的默认日历应用程序。最好，我想让日历打开到某个日期。

这是针对 OS X Mountain Lion 的。

有没有通用的方法来做到这一点？

**编辑**：FWIW，这就是我现在正在做的事情：

```
- (IBAction)launchCalendarApp:(id)sender
{
    [[NSWorkspace sharedWorkspace] launchApplication:@"/Applications/Calendar.app"];
} 
```

我知道像这样对路径进行硬编码是一个坏主意，这就是我问这个问题的原因。

**更新**：这就是我最终做的：

```
- (IBAction)launchCalendarApp:(id)sender
{
    NSWorkspace *sharedWorkspace = [NSWorkspace sharedWorkspace];
    NSString *iCalPath = [sharedWorkspace absolutePathForAppBundleWithIdentifier:@"com.apple.iCal"];
    BOOL didLaunch = [sharedWorkspace launchApplication:iCalPath];
    if (didLaunch == NO) {
        NSString *message = NSLocalizedString(@"The Calendar application could not be found.", @"Alert box message when we fail to launch the Calendar application");
        NSAlert *alert = [NSAlert alertWithMessageText:message defaultButton:nil alternateButton:nil otherButton:nil informativeTextWithFormat:@""];
        [alert setAlertStyle:NSCriticalAlertStyle];
        [alert runModal];
    }
} 
```

听起来在开发出更好的 API 之前，所有可能的方法都是变通方法。我的解决方案类似于杰的建议。我使用捆绑标识符来获取路径，因为我认为它不那么脆弱。即使他们（或用户）决定重命名应用程序，Apple 也不太可能在未来更改捆绑 ID。不幸的是，这种方法不能让我到达一个特定的日期。当我有更多时间时，我将进一步研究其他一些建议（使用 ical:// 等）。

**更新 2**：NSGod 在下面有一个了不起的答案，如果您的应用程序没有被沙盒化，它还会将日历打开到特定日期。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T21:42:10.053

注意：当您更新您使用的内容时，我仍在研究这个，但我会添加这个 FWIW。

使用应用程序的包标识符通常是一种比单独使用名称更可靠的方式来引用应用程序，因为用户可以在 OS X 中移动或重命名应用程序，但他们不能轻易更改包标识符。此外，即使 Apple 将 iCal.app 重命名为 Calendar.app，`CFBundleIdentifier`它仍然是`com.apple.iCal`.

```
if (![[NSWorkspace sharedWorkspace]
                launchAppWithBundleIdentifier:@"com.apple.iCal"
                                      options:NSWorkspaceLaunchDefault
               additionalEventParamDescriptor:nil
                             launchIdentifier:NULL]) {
    NSLog(@"launching Calendar.app failed!");
} 
```

即使您的应用程序被沙盒化，上面的代码也可以工作。您可能会尝试创建一个自定义`NSAppleEventDescriptor`来指定类似于以下 AppleScript 代码的内容，但它可能会因为沙箱而被拒绝：

```
view calendar at date "Sunday, April 8, 2012 4:28:43 PM" 
```

如果您的应用程序不必被沙盒化，那么使用 Scripting Bridge 会容易得多，并且使用该方法可以选择特定的`NSDate`.

使用 ScriptingBridge 的示例项目：[OpenCalendar.zip](http://www.markdouma.com/developer/OpenCalendar.zip)

在该项目中，我使用以下代码：

```
SBCalendarApplication *calendarApp = [SBApplication
              applicationWithBundleIdentifier:@"com.apple.iCal"];
[calendarApp viewCalendarAt:[self.datePicker dateValue]]; 
```

这将启动 Calendar.app/iCal.app 并将日历更改为指定日期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T17:16:09.190

所以现在听起来你要么不得不诉诸硬连线的方法，例如

```
// Launches Calendar.app on 10.7+
[[NSWorkspace sharedWorkspace] launchApplication:@"Calendar"]; 
```

或者使用 OS X 上的 Calendar/iCal 支持的 URL 方案（NSGod 在下面的评论中指出）类似于[URL 方案在日期或事件打开 iCal 应用程序？](https://stackoverflow.com/questions/10598932/url-scheme-for-opening-the-ical-app-at-a-date-or-event) ：

```
// Launches iCal (works at least with 10.6+)
[[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:@"ical://"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:47:23.707

您可以尝试使用 EventKit 创建所需日期和时间的 EKCalendarItem 实例，打开该事件，然后立即将其删除。如果时机合适，它甚至可能不会在用户日历上明显闪烁/关闭。

这是另一个 kludge，但在 NSWorkspace 有一个 -openDate: 方法之前，kludges 是唯一的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:19:57.537

正如在这个线程上所讨论的，似乎没有启动 iCal 的 url 方案

[在某个日期或事件打开 iCal 应用程序的 URL 方案？](https://stackoverflow.com/questions/10598932/url-scheme-for-opening-the-ical-app-at-a-date-or-event)

# matlab - 在 matlab 中读取混合数字和非数字数据的 Fscanf 文件

> ID：15883926
> 
> 赞同：0
> 
> 时间：2013-04-08T16:07:52.837
> 
> 标签：matlab, file, file-io

我尝试从文件中读取数据，但我不知道如何正常使用 fscanf。有这样的文件

```
surname1 A.A.(16 char everytime) 23323 3232 232322 ....

surname2 A.A. 23322 3232 232322 ....

surname3 A.A. 23322 3232 232322 .... 
```

如何在这里使用 fscanf？

我愿意：

```
 fid=fopen( 'name.txt', 'rb' );
and variations of  S = fscanf(fid, '%16c,%s,%s,%s'); 
```

我应该写什么才能有工作程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:54:14.543

如果您只对数据感兴趣并且文本文件的格式始终与您显示的相同，您可以轻松地遵循以下两个命令行：

```
fid = importdata('yourfile.txt');
res = fid.data; 
```

希望这可以帮助。

# android - Android 权限 WRITE_APN_SETTINGS

> ID：15883933
> 
> 赞同：2
> 
> 时间：2013-04-08T16:08:20.173
> 
> 标签：android, android-4.0-ice-cream-sandwich

我想制作一个应用程序，如果我在 android<ICS 上写一些 APN 设置，否则会做其他事情。问题是，当我在清单中写：

```
<uses-permission android:name="android.permission.WRITE_APN_SETTINGS"/> 
```

清单返回一个错误，因为写入 apn 设置的权限仅适用于 sdk<14

我该怎么做才能在允许此权限的 android 版本上使用该权限以保持与 sdk>14 的兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:10:17.820

使用设置为支持的最低版本来构建您的应用程序`target-sdk`，在您的情况下应该是 v14 之前的版本

# prolog - Prolog中的否定是一种程序行为吗？

> ID：15883938
> 
> 赞同：1
> 
> 时间：2013-04-08T16:08:33.843
> 
> 标签：prolog, answer-set-programming, negation-as-failure

我对Prolog 语言中的**否定作为失败**有一个小问题：

这是一个比实际更理论的问题，因为我清楚这个例子是如何工作的。

所以我有以下Prolog程序：

```
/* Fatti che specificano quali esseri sono degli animali: */
animal(cat).
animal(dog).
animal(frog).
animal(horse).
animal(viper).
animal(boa).
animal(python).

/* Fatti che specificano quali esseri sono dei serpenti: */
snake(viper).
snake(boa).
snake(python).

/* X è un serpente, fallisce ed impedisce il backtracking quindi
   il predicato likes(mary,X) risulta essere falso: */
likes(mary,X) :- snake(X),
                 !,
                 fail.

/* Se X è un animale allora a mary piace: */
likes(mary, X) :- animal(X). 
```

在 Prolog 中，我不能简单地说：**“玛丽爱所有动物，但不是蛇”** ，我必须这样表述：**“如果 X 是一条蛇，那么玛丽不爱它。否则，如果X 它是一种动物，玛丽喜欢它”**

根据规则，先例程序正是这样做的：

```
likes(mary,X) :- snake(X),
                 !,
                 fail. 
```

Prolog 检查 X 是否是一条蛇，强制执行切割以避免回溯并强制谓词失败。

通过这种方式，如果`snake(X)`程序`TRUE`强制头部前导的失败`likes(mary,X)`和强加回溯避免了执行程序中其他规则的可能性（答案是真的，因为蛇也是动物）

我的问题是：**在我看来，Prolog 的这种使用超出了逻辑和声明范式，并且在某种程度上属于某种程序范式**

因为：

1.  我必须强加 2 谓词的顺序（所以在某种程度上我是说：如果第一个失败，请尝试第二个）。
2.  但我更想说的是：如果第一个规则匹配（X 它是一条蛇），则执行强制失败并且不强制回溯。

在我看来，这似乎更接近于程序意义，而不是经典逻辑意义......

是那个吗？是不是在这些情况下，Prolog 使用程序行为来克服逻辑的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:26:46.790

我不同意“逻辑的限制”。

同样是

```
likes(mary,X) :- not(snake(X)) , animal(X). 
```

因为 Prolog 使用深度优先搜索，所以可以以更短的方式表示某些内容，然后取决于深度优先搜索回溯算法。

```
x :- a, !, b.
x :- c.
x :- d. 
```

是相同的

```
x :- a, b.
x :- not(a), c.
x :- not(a), d. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T17:38:06.537

使用 cut (!) 的程序大部分时间都对目标和子句的顺序很敏感，而不仅仅是它们的终止，因此它们通常不是声明性的。

否定作为失败 (\+) 以某种方式封装了切割。它由大多数 Prolog 系统定义甚至实现如下：

```
\+ X :- X, !, fail.
\+ _ . 
```

尽管它暗示了逻辑意义和声明性，但作为失败的否定仍然对目标的排序很敏感。这是一个例子。假设我们有以下数据库：

```
p(a).
q(b,c). 
```

然后以下查询产生 X=a 作为解决方案：

```
?- p(X), \+ q(X,Y).
X = a. 
```

但是如果连词 (,)/2 的参数换边，就会得到不同的结果：

```
?- \+ q(X,Y), p(X).
false. 
```

因此，作为失败的否定本身并不是声明性的。对于论点的基本术语流，作为失败的否定在存在量词中偷偷摸摸。所以表格的查询：

```
 ?- A(X), \+ B(X,Y). 
```

本质上它的含义是它量化了否定中的新变量 Y：

```
 ?- A(X), ~ exists Y B(X,Y). 
```

所以在上面切换合取的例子中，否定中的新变量集作为失败发生变化，这就是为什么得到不同的解决方案。

再见

# php - 插入 mysql_num_rows 作为变量

> ID：15883939
> 
> 赞同：0
> 
> 时间：2013-04-08T16:08:37.523
> 
> 标签：php, mysql, insert, mysql-num-rows

我正在创建一个 CMS，当您在其中添加新页面时，display_order 将根据已经存在的行数自动获取下一个最高数字。这是我目前拥有的：

```
<?php

if(isset($_POST['updateContent'])){

    require ("connection.php");
    $sql = "SELECT * FROM pages";
    $result = $conn->query($sql) or die(mysqli_error());

    $content = $_POST['content'];
    $title = $_POST['title'];
    $id = $_POST['id'];

    $order = mysqli_num_rows($result);

    if (empty($id)){
        /** ADD NEW SLIDE*/
        $sql = "INSERT INTO pages (title, content, display_order, visible) VALUES ('".$title."', '".$content.", '".$order.", 0)";
    }else{
        /** UPDATE SLIDE*/
        $sql = "UPDATE pages SET content = '".$content."', title = '".$title."' WHERE id = '".$id."'";
    }

    if ($result){
        header("Location: admin.php");
    }
}

?> 
```

这段代码所做的是采用我在名为 edit.php 的页面中使用的 HTML 表单，并确定它是新页面还是只是正在更新的页面。我得到的错误是没有任何东西发布到数据库中。如果我删除`$sql`,`$result`和`$order`行.. 脚本工作正常，但 display_order 变量不会设置为下一个最高数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:16:13.110

您的查询中有错误：

```
INSERT INTO pages (title, content, display_order, visible)
VALUES ('".$title."', '".$content.", '".$order.", 0)";
                                     ^-- here 
```

应该：

```
INSERT INTO pages (title, content, display_order, visible)
VALUES ('".$title."', '".$content."', ".$order.", 0)";
                                   ^-- quote goes here 
```

此外， using`mysqli`并不能神奇地保护您免受 SQL 插入。逃避数据输入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:26:42.740

解决这种情况的常用方法是在 pages 表中使用 AUTO_INCREMENT 字段。依次插入，然后询问 LAST_INSERT_ID

php方式： http: [//php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

原生mysql方式：[http ://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

# java - java中年轻代和老代内存统计

> ID：15883942
> 
> 赞同：2
> 
> 时间：2013-04-08T16:08:44.837
> 
> 标签：java, memory, memory-management, garbage-collection

**在Java**中有什么方法可以让我们访问当前的内存状态，比如JVM 当前使用了多少**终身内存或年轻代内存。**

执行 Runtime.getRuntime().freeMemory(), totalMemory() 很有用，但我想知道是否有任何方法可以拆分总内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:13:06.503

可以在以下链接中找到这些 尝试`-XX:-PrintGC`和详细信息[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)`-XX:-PrintGCDetails;`

此链接包含与统计相关的更多信息 [http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:02:06.130

**GC 日志记录**是监控 Young 和 OldGen 占用的最佳方式。

并且，`jstat`是另一种监控堆大小的好方法，除了 GC 日志将向您显示的内容之外，jstat 将向您显示**Eden**和**Survivor**空间占用，请尝试：

```
 jstat -gcutil -t <pid> <interval> <number_of_samples> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T09:50:21.733

Manage Engine 的应用程序管理器完成这项工作。神奇的工具 [http://www.manageengine.com/products/applications_manager/](http://www.manageengine.com/products/applications_manager/)

# c - 为什么我能够在 Linux 内核模块中执行浮点运算？

> ID：15883947
> 
> 赞同：17
> 
> 时间：2013-04-08T16:09:10.063
> 
> 标签：c, linux, gcc, linux-kernel, x86

我在 x86 CentOS 6.3（内核 v2.6.32）系统上运行。

我将以下函数编译成一个基本的字符驱动模块作为实验，以了解 Linux 内核如何对浮点操作做出反应。

```
static unsigned floatstuff(void){
    float x = 3.14;
    x *= 2.5;
    return x;
}

...

printk(KERN_INFO "x: %u", x); 
```

编译的代码（这是意料之外的）所以我插入了模块并使用`dmesg`. 日志显示：`x: 7`。

这看起来很奇怪；我以为你不能在 Linux 内核中执行浮点运算——除了一些例外，比如`kernel_fpu_begin()`. 模块是如何进行浮点运算的？

这是因为我使用的是 x86 处理器吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-11-01T17:39:29.930

> 我以为你不能在 Linux 内核中执行浮点运算

您不能**安全**：使用失败`kernel_fpu_begin()`/`kernel_fpu_end()`并不意味着 FPU 指令会出错（至少在 x86 上不会）。

相反，它会默默地破坏用户空间的 FPU 状态。这是不好的; 不要那样做。

编译器不知道是什么`kernel_fpu_begin()`意思，因此它无法检查/警告编译为 FPU 开始区域之外的 FPU 指令的代码。

可能有一种调试模式，其中内核确实禁用`kernel_fpu_begin`/`end`区域之外的 SSE、x87 和 MMX 指令，但这会更慢并且默认情况下不会这样做。

但是有可能：设置`CR0::TS = 1`会使 x87 指令出错，因此可以进行惰性 FPU 上下文切换，并且 SSE 和 AVX 还有其他位。

* * *

有*很多*错误的内核代码会导致严重的问题。这只是众多之一。在 C 中，您几乎总是知道何时使用浮点数（除非拼写错误导致`1.`常量或实际编译的上下文中的某些内容）。

* * *

**为什么 FP 架构状态与整数不同？**

Linux 在任何时候进入/退出内核时都必须保存/恢复整数状态。所有代码都需要使用整数寄存器（除了一个巨大的 FPU 计算直线块，它以 a 结尾`jmp`而不是 a `ret`（`ret`修改`rsp`）。）

但是内核代码通常会避免 FPU，因此 Linux 在系统调用进入时不会保存 FPU 状态，仅在实际上下文切换到不同的*用户空间*进程或 on之前保存`kernel_fpu_begin`。否则，通常会返回到同一个内核上的同一个用户空间进程，因此不需要恢复 FPU 状态，因为内核没有触及它。（如果内核任务确实修改了 FPU 状态，就会发生损坏。我认为这是双向的：用户空间也可能损坏*您的*FPU 状态）。

整数状态相当小，只有 16 个 64 位寄存器 + RFLAGS 和段寄存器。即使没有 AVX，FPU 状态也是两倍多：8 个 80 位 x87 寄存器和 16 个 XMM 或 YMM，或 32 个 ZMM 寄存器（+ MXCSR 和 x87 状态 + 控制字）。MPX`bnd0-4`寄存器也与“FPU”集中在一起。此时“FPU 状态”仅表示所有非整数寄存器。在我的 Skylake 上，`dmesg`说`x86/fpu: Enabled xstate features 0x1f, context size is 960 bytes, using 'compacted' format.`

请参阅[了解 Linux 内核中的 FPU 使用](https://tthtlc.wordpress.com/2016/12/17/understanding-fpu-usage-in-linux-kernel/)；现代 Linux 默认情况下不会为上下文切换执行惰性 FPU 上下文切换（仅用于内核/用户转换）。（但那篇文章解释了 Lazy 是什么。）

大多数进程使用 SSE 在编译器生成的代码中复制/归零小块内存，并且大多数库字符串/memcpy/memset 实现使用 SSE/SSE2。此外，硬件支持的优化保存/恢复现在是一件事（[`xsaveopt`](http://felixcloutier.com/x86/XSAVEOPT.html)/xrstor），因此如果某些/所有 FP 寄存器实际上没有被使用，“急切”的 FPU 保存/恢复实际上可能会做更少的工作。例如，如果它们被清零，则只保存 YMM 寄存器的低 128b，`vzeroupper`以便 CPU 知道它们是干净的。（并在保存格式中仅用一位标记该事实。）

通过“急切”的上下文切换，FPU 指令始终保持启用状态，因此糟糕的内核代码可能随时破坏它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-01T13:39:16.157

**不要那样做！**

在内核空间中，FPU 模式由于以下几个原因而被禁用：

*   它允许 Linux 在没有 FPU 的架构中运行
*   它避免了在每次内核/用户空间转换时保存和恢复整个寄存器集（它可能会使上下文切换时间加倍）
*   基本上所有的内核函数都使用整数来表示十进制数 -> 你可能不需要浮点数
*   在 Linux 中，当内核空间在 FPU 模式下运行时，抢占被禁用
*   浮点数是邪恶的，[可能会产生非常糟糕的意外行为](https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

如果您真的想使用 FP 编号（并且您不应该），您必须使用`kernel_fpu_begin`和`kernel_fpu_end`原语以避免破坏用户空间寄存器，并且您应该考虑处理 FP 编号时所有可能的问题（包括安全性）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T16:57:02.017

不知道这种看法是从哪里来的。但是内核与用户模式代码在同一处理器上执行，因此可以访问相同的指令集。如果处理器可以进行浮点运算（直接或通过协处理器），内核也可以。

也许您正在考虑在软件中模拟浮点运算的情况。但即便如此，它也可以在内核中使用（好吧，除非以某种方式禁用）。

我很好奇，这种认知是从哪里来的？也许我错过了一些东西。

[找到了这个](https://stackoverflow.com/questions/13886338/use-of-floating-point-in-the-linux-kernel)。似乎是一个很好的解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-21T09:47:44.457

操作系统内核可以简单地在内核模式下关闭 FPU。

在 FPU 操作时，在浮点操作时内核将打开 FPU，然后关闭 FPU。

但是你不能打印它。

# java - 处理ajax请求后下载文件

> ID：15883948
> 
> 赞同：0
> 
> 时间：2013-04-08T16:09:11.457
> 
> 标签：java, spring, excel, model-view-controller

我正在根据 ajax 请求创建一个工作簿对象（excel 对象“org.apache.poi.ss.usermodel.Workbook”）。

如何将此文件从 servlet 发送到浏览器并让浏览器弹出一个下载框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:29:47.153

您必须将 Content-Type 设置为`application/x-msdownload`，将 Header 设置为`Content-Disposition`

例如：

```
 String fileName = URLDecoder.decode("MyBook.xlsx", "ISO8859_1");//Change if required
    response.setContentType("application/x-msdownload");            
    response.setHeader("Content-disposition", "attachment; filename="+ fileName);
//And just write output stream here 
```

由于您已更改响应标头，因此浏览器将自动显示弹出消息以下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:15:21.980

经过大量谷歌搜索后，我知道使用 ajax 请求很难做到。

所以我决定采用隐藏形式。在 javascript 中，我创建了一个隐藏表单并提交了表单所以我得到了 excel 下载弹出窗口。

我的 javascript 在下面给出。

```
 var form = document.createElement("form"); //created dummy form for submitting.
    var element1 = document.createElement("input"); 
    form.method = "POST";
    form.action = "/my/servlet/path";

    element1.value=values; //its a json string I need to pass to server.
    element1.name="data";
    element1.type = 'hidden'
    form.appendChild(element1);

    document.body.appendChild(form);

    form.submit(); 
```

# php - CodeIgniter 2.1, PHP, MySQL - 选择没有某些字符的地方

> ID：15883949
> 
> 赞同：0
> 
> 时间：2013-04-08T16:09:16.627
> 
> 标签：php, mysql, codeigniter

是否有某种方法可以使用 select 语句选择一个字段，但忽略某些字符。例如：

```
$string = 'first_title_ever';
(original title = First Title, Ever )
SELECT * FROM `article` WHERE 'title' = $string LIMIT 1; 
```

如果我通过 LIKE 选择，如果有标题**First Title, Ever 2**，就会有两个结果，依此类推。我怎样才能省略一些字符并获得需要的字段？有没有办法做到这一点？

# javascript - 使用 javascript 搜索有限且手动创建的索引

> ID：15883951
> 
> 赞同：0
> 
> 时间：2013-04-08T16:09:21.660
> 
> 标签：javascript, search-engine

我有几个包含多媒体内容（flash）的页面，我希望能够通过一个页面搜索它的内容。

由于它的内容不可搜索，并且我有一个文档，其中包含将出现在每个页面中的所有单词/图像描述，我正在考虑将这些内容写在几个页面中，将它们链接到带有多媒体内容的相应页面，并且使用搜索引擎来索引这些信息。

但这看起来过于复杂了。所以我虽然使用 javascript 并将每个页面的关键字插入到它自己的数组中，当用户搜索它时，它会与每个数组进行比较并打印：“此内容在以下页面中可用：”

这看起来很简单，但我想从更有经验的人那里得到一些意见： - 对于我将遇到的问题；- 或更好/更简单的解决方案。

我要求任何做出贡献的人都认为我对编程没有那么丰富的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:26:48.013

这听起来像是一份工作[`Array.prototype.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。
您还没有描述数据结构，所以我假设一个*Object**数组*。

 *假设你有这个数据结构，

```
var all_items = [
    {url: 'a', title:'First Entry', description:'Foo'},
    {url: 'b', title:'Second Entry', description:'Bar'},
    {url: 'c', title:'Third Entry', description:'FooBar'}
    // etc..
]; 
```

你可以写一个基于`.filter`这样的搜索功能

```
function search(arr, str, url /* =true */, title /* =true */, desc /* =false */) {
    var src_fnc;
    // set true defaults
    if (undefined === url) url = true;
    if (undefined === title) title = true;
    // toBool
    url = url && true || false;
    title = title && true || false;
    desc = desc && true || false;
    // make function
    src_fnc = function (e) {
        if (url && e.url.indexOf(str) >= 0) return true;
        if (title && e.title.indexOf(str) >= 0) return true;
        if (desc && e.description.indexOf(str) >= 0) return true;
        return false;
    };
    return arr.filter(src_fnc);
} 
```

然后调用它

```
search(all_items, 'ir');
/*  [
        {url: 'a', title:'First Entry', description:'Foo'},
        {url: 'c', title:'Third Entry', description:'FooBar'}
    ] */ 
```*

# java - DAO 命名约定

> ID：15883961
> 
> 赞同：4
> 
> 时间：2013-04-08T16:09:38.513
> 
> 标签：java, naming-conventions, dao, organization

我正在开发一个需要与数据库建立连接的应用程序。为了通过这个连接进行操作，我使用的是 DAO 模式。我的问题与代码的组织以及接口和实现的名称有关。当前的包结构是下一个：

> *   主包
> *   mainpackage.model -> 每个表的模型，以使用从数据库中获取的数据创建对象
> *   mainpackage.persistence -> ConnectionManager
> *   mainpackage.persistence.dao -> 接口和实现

关于接口的命名，我认为使用 ClassDAO 和 DefaultClassDAO 之类的东西来实现是个好主意，只要我不知道如何命名它。你怎么看？有什么约定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:15:21.797

我会使用“领域驱动设计”中描述的约定。

*   主包
*   mainpackage.model -> 包含“存储库”作为接口，如 UserRepository、ProfileRepository 描述管理存储中实体的操作（存储、查找等）。这样你就不会泄露你的存储是一个数据库。
*   mainpackage.model.db（或 sql 或其他）-> 包含 SqlUserRepository、SqlProfileRepository 实现 mainpackage.model 中的接口并命中数据库。

您甚至可以将 DB 类放在不同的子项目中。我认为重要的是不要将数据库放在设计的中心，而只是将其视为实现细节。

# backbone.js - 从视图和服务器中删除骨干集合

> ID：15883964
> 
> 赞同：0
> 
> 时间：2013-04-08T16:09:48.043
> 
> 标签：backbone.js, collections, coffeescript

努力使以下代码在管理主干集合的视图中工作：

```
class VGStream.Views.Scenarios.ScheduleRisks extends Backbone.View
  template: JST['backbone/templates/scenarios/schedule_risks']

  initialize: (options) ->
    super
    Backbone.pubsub.on 'allSchedulesRemoved', @removeAllScheduleRisks, @

  removeAllScheduleRisks: =>
    for risk in @risks.models
      risk.destroy
    @render()

  render: ->
    super
    @risks.fetch()
    @$el.html @template @
    @ 
```

我只是展示了 Coffeescript 类视图中的相关代码片段。这不会从数据库或列表视图本身中删除“风险”模型。我该怎么做？删除所有计划后，事件 allSchedulesRemoved 会正确触发。我希望从视图和数据库中删除相关的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:32:46.547

1.  你不必总是打电话`super`
2.  有内置的`@risks.each()`方法可以遍历集合。
3.  不建议放入`fetch()`。`render()`
4.  要清除集合，您可以执行几个操作`@risks.remove(risk)`，或者在销毁所有内容后，`reset`使用空对象执行集合。
5.  `risk.destroy`实际上向您的后端发送删除请求，因此是否在服务器中删除它取决于您的后端代码。

# php - 标头位置不适用于实时服务器，但适用于 localhost

> ID：15883968
> 
> 赞同：2
> 
> 时间：2013-04-08T16:09:56.677
> 
> 标签：php, header, location

如果用户在不相关的页面上设置下拉菜单的值来设置它，我有这段代码会将用户重新定位到 index.php，请检查我的代码。

```
if(isset($_GET['d'])&&empty($_GET['d'])===false){
        $cur_page=$_SERVER['PHP_SELF'];
        $current_page = substr($cur_page,1);
        $possible_page = array('terms.php','contact.php','about.php');

        if(in_array($current_page,$possible_page)){
               header('Location:/index.php?d='.$_GET['d'].'');
       exit();
    }else{
       echo $_GET['d'];
    } 
```

它在我的本地服务器上工作正常，但在实时服务器上却不行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:11:31.783

在 php 脚本的最开始添加`ob_start();`。如果它包含另一个文件，那么最后不要使用`?>`。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T05:38:34.193

我总是使用这个小方法，并且在所有情况下都能完美运行。

```
public static function Redirect($sec, $file)
{
    if (!headers_sent())
    {
        header( "refresh: $sec;url=$file" ); 
    }
    elseif (headers_sent())
    {
        echo '<noscript>';
        echo '<meta http-equiv="refresh" content="'.$sec.';url='.$file.'" />';
        echo '</noscript>';
    }
    else
    {
        echo '<script type="text/javascript">';
        echo 'window.location.href="'.$file.'";';
        echo '</script>';
    }
} 
```

在最后一种情况下，它肯定会重定向。

# css - 如何禁用 IE10 选择展开按钮

> ID：15883970
> 
> 赞同：1
> 
> 时间：2013-04-08T16:10:01.177
> 
> 标签：css, internet-explorer-10, html-select

我尝试使用禁用选择 html 元素样式（用于自定义样式）

```
background:none;
border:none;
outline:none; 
```

一切都是正确的，但不是在 IE10 中。我无法隐藏右侧带有箭头的可怕按钮...

任何人都可以帮忙吗？

# c - 使用 C 宏的分段错误

> ID：15883978
> 
> 赞同：0
> 
> 时间：2013-04-08T16:10:19.447
> 
> 标签：c, memory, segmentation-fault, free

在使用稍微修改过的 MobileC 构建时，我遇到了一个奇怪的问题。

我在宏中遇到分段错误，但是当我将*printfs*放入代码中时（否则无法调试，因为它被 C 干扰）我无法得到它发生的确切点。

这是代码：

```
...
printf("just to check there is no problem accessing "node" %d\n", node);\
printf("this will be printed\n"); \
node_type##_Destroy(node); \
printf("this will not be printed\n"); \
... 
```

Destroy 的代码如下：

```
int name##_Destroy( name##_p name ) \
{ \
printf("this will not be printed\n");    \
... 
```

我没有修改这部分代码（除了*printfs*），所以我想没关系。你知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:46:41.383

这段代码中有两个危险信号，但你还没有真正向我们展示足够的东西。

```
printf("just to check there is no problem accessing "node" %d\n", node);\
printf("this will be printed\n"); \
node_type##_Destroy(node); \
printf("this will not be printed\n"); \ 
```

这显然是一个宏，但它是一个多语句宏。这是搞砸宏的最简单方法，因为它可以这样调用：

```
#define MACRO() puts("A"); puts("B")
// prints "B"
if (0) MACRO(); 
```

其次，那个字符串常量非常可疑：

```
"just to check there is no problem accessing "node" %d\n", node 
```

请注意如何`node`据称是 an `int`，但它出现在两个字符串常量之间而没有编译错误。An`int`不应该这样做，所以`node`可能不完全是`int`. 这可能是一个完整的表达，谁知道呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:41:30.873

删除时的 Segfault 几乎总是指向损坏的堆。某些东西破坏了您的指针所在的堆（或者它正在跟踪 prev/next 指针的位置）并导致跳转到超空间。托管代码降低了这种可能性，但它仍然是我要开始的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:43:40.747

谢谢您的回答。现在我知道发生了什么。

Dietrich Epp，确实*node*不是*int*（我只是想知道访问它是否有问题，因为我被错误搞砸了并且不知道发生了什么）。感谢您警告我有关 C 宏的信息。我已经[阅读](http://gcc.gnu.org/onlinedocs/cpp/Macros.html)了一些内容，最后我弄清楚了发生了什么。

node_type 类型为*agent*。因此宏扩展为 agent_Destroy(node)。问题是在*Mobile C*代码中有一个名为 agent_Destroy(agent_p agent) 的函数。发生的事情是两个函数都执行了，而第一个函数是直接在代码中定义的存在分段错误的函数。

# hibernate - Hibernate 忽略属性名称中的大小写

> ID：15883980
> 
> 赞同：0
> 
> 时间：2013-04-08T16:10:28.777
> 
> 标签：hibernate, hibernate-criteria

我有以下内容：

```
@Entity
public class Person {

    @Id
    private long id;

    @Column
    private String firstName;

    // getters and setters
} 
```

我希望以下工作：

```
Criteria criteria = session.createCriteria(Person.class);

criteria.add(Restrictions.eq("firstName", "john"));

OR     

criteria.add(Restrictions.eq("FIRSTNAME", "john"));

OR 

criteria.add(Restrictions.eq("fiRstName", "john")); 
```

基本上，我有一个允许过滤后端对象的 Web 服务，我们试图忽略属性名称中的大小写。我不知道该怎么做。我搜索并查看了休眠文档和休眠源，但一无所获。Hibernate 的例外是

```
org.hibernate.QueryException: could not resolve property FIRSTNAME (or fiRstName) of com.abc.Person
at org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:81)
    at org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping.java:75)
    at org.hibernate.persister.entity.AbstractEntityPersister.getSubclassPropertyTableNumber(AbstractEntityPersister.java:1482)
    at org.hibernate.persister.entity.BasicEntityPropertyMapping.toColumns(BasicEntityPropertyMapping.java:62)
    at org.hibernate.persister.entity.AbstractEntityPersister.toColumns(AbstractEntityPersister.java:1457)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getColumns(CriteriaQueryTranslator.java:483)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.findColumns(CriteriaQueryTranslator.java:498)
    at org.hibernate.criterion.SimpleExpression.toSqlString(SimpleExpression.java:68) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:25:10.343

*   您可以尝试`MetaModel`为实体生成类。

    `criteria.add(Restrictions.eq(Person_.firstName, "john"));`

*   否则，通常，您可以尝试使用反射获取类中声明的字段。

    ```
    Field[] fields = Person.class.getDeclaredFields();      

     for(int i = 0; i < fields.length; i++){

        if(fields[i].getName().equalsIgnoreCase("FIRSTNAME")){

               criteria.add(Restrictions.eq(fields[i].getName(), "john"));      

               break;
        }
      } 
    ```

# javascript - 为什么 JavaScript 弹出后网格视图会缩放

> ID：15883985
> 
> 赞同：0
> 
> 时间：2013-04-08T16:10:42.440
> 
> 标签：javascript, asp.net, c#-4.0

我有一个简单的 ASP.NET 页面，其中包含一个网格视图（从 SQL-DB 中提取数据）、一个文本框和一个保存按钮。

添加信息；用户在文本框中输入信息并按保存按钮。当用户点击保存按钮时，他/她会看到一个 JavaScript 弹出窗口，上面写着“已保存”</p>

一切都运行良好；我唯一的问题是；在这个 JavaScript 弹出之后，网格视图只是缩放。

我该如何解决？

```
Response.Write("<script>alert('Saved')</script>"); 
```

## 缩放

网格视图中的联系人在大小上有所扩展，但是在页面刷新后会恢复正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:30:54.220

试试这个，而不是 Response.Write()

```
ClientScript.RegisterStartupScript(this.GetType(), "scriptSave", "alert('Saved');", true); 
```

# wpf - 托管在第三方应用程序中的 WPF 子窗口在 Windows 7 Aero 主题上不可见

> ID：15883987
> 
> 赞同：6
> 
> 时间：2013-04-08T16:10:47.340
> 
> 标签：wpf, winapi, windows-7, aero, childwindow

我有一个[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)窗口，它必须在第三方运行的应用程序中充当窗口的叠加层。我的 WPF 窗口必须大部分是透明的，带有一些可见的控件，始终位于 z 顺序中另一个窗口的正上方，随它移动等。简而言之：我希望它的行为像一个子窗口。

我已经回顾了[这里](https://stackoverflow.com/questions/10676649/attach-window-to-window-of-another-process)提供的技术（WPF HwndSource 技术）和[这里](https://stackoverflow.com/questions/10676649/attach-window-to-window-of-another-process)（WPF SetParent 技术）。HwndSource 技术根本不起作用。SetParent 技术适用于 Windows 7，但仅适用于基本主题。对于[Windows 7 Aero](http://en.wikipedia.org/wiki/Windows_Aero)主题，它不起作用：我的子窗口不可见。

我正在寻找适用于所有 Windows 7 主题的解决方案。

我的测试应用程序创建一个测试窗口并调用 SetParent 使其成为[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)窗口（硬编码 HWND 到）的子窗口。

在基本主题下，它看起来像这样：

![基本主题](https://i.stack.imgur.com/pxN1o.png)

在 Windows 7 主题下，我看不到它：

![航空主题](https://i.stack.imgur.com/MeU4N.png)

子窗口[XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)：

```
<Window x:Class="WpfApplication22.TestWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TestWindow" Height="300" Width="300" Background="#63000000" ShowInTaskbar="False" WindowStyle="None" Initialized="Window_Initialized" Loaded="Window_Loaded" AllowsTransparency="True">
    <Grid>
        <Ellipse Height="87" HorizontalAlignment="Left" Margin="12,12,0,0" Name="ellipse1" Stroke="Black" VerticalAlignment="Top" Width="167" Fill="#FFBE3A3A" />
    </Grid>
</Window> 
```

子窗口窗体加载处理程序代码：

```
 var parentHwnd = new IntPtr(0x01DE0DFC); // Running Notepad
    var guestHandle = new WindowInteropHelper(this).Handle;

    var style = WS_VISIBLE | WS_CLIPSIBLINGS | WS_CHILD | WS_POPUP;
    SetWindowLong(guestHandle, GWL_STYLE, (int)(style));
    SetParent(guestHandle, parentHwnd); 
```

（我试过取​​消设置 WS_POPUP 样式。它没有效果。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:02:28.913

不要使用 SetParent，而是将 WPF“子”窗口的 WindowInteropHelper.Owner 设置为要在上面显示的窗口。

请注意，在 .NET 3.5 中，如果您在任何“子”窗口的事件处理程序中执行此操作，即使早在 OnSourceInitialized 时，窗口所有者也不会真正设置。显然，此时设置所有者为时已晚。

相反，在调用 Show() 之前，在创建窗口的代码中设置 Owner。.NET 4 似乎允许从 SourceInitialized 中设置所有者。

*   杰克

# serial-port - 如何使用 ZigBee 通过 Arduino 串口发送多个变量

> ID：15883993
> 
> 赞同：2
> 
> 时间：2013-04-08T16:11:01.923
> 
> 标签：serial-port, arduino, zigbee, multiple-value

我想使用 Arduino通过[ZigBee发送五个电位器值（字节）。](http://en.wikipedia.org/wiki/ZigBee)我将电位器值存储在五个不同的变量（字节）中并使用

```
Serial.print(pot1);
Serial.print(pot2);
.
.
Serial.print(pot5); 
```

问题是，当我改变电位器值时，在接收器部分它会变成 49、55、57 等（总是在变化），而不是从 0-255 的某个恒定值。（我正在使用`Serial.read()`函数五次。）

我该如何解决这个问题？

q

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T01:28:33.167

好吧，当您改变电位器时，有理由认为您将在发生变化时读取不同的值，并且您的程序正在读取和发送变化的值。

我从您的问题中了解到，您只希望在更改后发送一个 ONE 值。我将此解释为，当您更改电位器时，不应发送值，而是应发送最终值。

最终价值是多少？只有您可以决定，但定义它的一种方法是：如果一秒钟前读取的最后一个值与现在读取的值相同，则发送该值。时间可以是您决定的任何时间，1 秒、1/2 秒等。

我想帮你写代码，但是你提交的代码很少，我不确定我理解你的意思。请说明您的要求。

# security - 在网站上注册用户的安全方法

> ID：15883994
> 
> 赞同：1
> 
> 时间：2013-04-08T16:11:03.010
> 
> 标签：security, registration, captcha

我有我的第一个网站。我遇到的首要任务之一是创建一个注册页面来注册一个新用户。我担心这样做的“安全”方法。本质上，注册页面是一个将数据库插入用户表的窗口。我担心脚本小子会拿到我的注册表并用错误的插入无情地冲击数据库。

我研究并努力解决的几件事：

*   Captchas：我真的希望能够在没有这些的情况下创建我的网站，因为根据我的研究，听起来它们在拒绝机器人方面的效率约为 20%，而它们肯定会激怒真正的人类用户。如果可能的话，我想让验证码要么在我的网站上不存在，要么在我似乎被脚本化时动态显示。

*   IP 欺骗 - 我玩弄了基于 IP 进行检查的想法，这样如果我从同一个 IP 收到很多连续的表单提交，我可以给他们一个验证码。但是，据我了解，欺骗 IP 地址是微不足道的，并且检查适当欺骗的人的重复提交是无效的。

*   通过电子邮件链接进行注册确认 - 您在论坛等上经常看到这种情况。用户注册后，您向他们发送带有唯一令牌的确认链接，以验证他们有一个真实的邮箱并且没有放入假邮箱（或者可能确实打错了）。虽然这可能会在验证用户是否“真实”方面增加一些价值，但您已经将其插入到用户表中，因此脚本小子在用无用信息填充数据库时占了上风。

站点开发人员如何防止脚本小子向他们的数据库发送大量无用用户的垃圾邮件？如果我上面所做的假设是正确的，我看不出有一种有效的方法来防止它。我曾*玩弄*过其他想法，但在我考虑它们之后都是废话。我目前使用的搜索词没有出现很多结果，所以如果这是一个被夸大的话题，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:57:18.920

我不完全同意消除该`captcha`部分，但是您可以将一些机器人困在蜜罐中。制作一个对最终用户不可见的输入字段，但对于机器人仍然存在。如果提交的表单包含`fake-field`值然后忽略它，真正的用户看不到不可见的字段！:)

例如：

```
// jQuery
$("#username").hide();

// HTML
<input type="text" name="real-username">
<input type="text" name="username" id="username">

// PHP
if (!empty($_REQUEST['username']))
    die('Oops!'); 
```

请记住，您需要忽略该`username`字段，您的真实用户名在`real-username`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:21:47.593

我找到了确认电子邮件，并结合清理任务（删除 x 天内未确认的所有注册）将有所帮助。您将无法阻止所有垃圾邮件注册，但在数据库中进行一些工作将有助于保持表格较小。

# facebook - Facebook PHP SDK 空相册

> ID：15883996
> 
> 赞同：0
> 
> 时间：2013-04-08T16:11:09.980
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在开发一个获取用户 Facebook 相册和图片的 Facebook 应用程序。我一切正常，但如果用户的相册中没有图片，我的应用程序会崩溃，因为它无法获取专辑封面和专辑图片计数。我试图逃避我使用的 foreach 但没有成功。它仅“迭代”空专辑之前的专辑。这是原始代码片段：

```
<?php
$albums = $facebook->api("/me/albums");
foreach ($albums['data'] as $album) {
    $album_id = $album['id'];
    $album_cover = $album['cover_photo'];
    $album_name = $album['name'];
    $album_count = $album['count'];
    $covers = $facebook->api("/" . $album_cover . "");
    $source = $covers['source'];
    ?> 
```

一些指导和建议非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:09:48.170

在获取任何数据之前测试您的相册是否有图片：

```
$albums = $facebook->api("/me/albums");
foreach ($albums['data'] as $album) {
  if (0 < $album['count'] {
    $album_id = $album['id'];
    ...
  }
} 
```

# java - Android View nullPointerException 由 setVisibility() 方法引起

> ID：15883997
> 
> 赞同：1
> 
> 时间：2013-04-08T16:11:11.877
> 
> 标签：java, android

我在更改按钮的可见性时遇到问题。每当我使用 setVisibility() 方法时，我都会得到一个 nullPointerException。这是我得到的错误：

```
04-08 15:59:02.529: E/AndroidRuntime(2807): FATAL EXCEPTION: main
04-08 15:59:02.529: E/AndroidRuntime(2807): java.lang.NullPointerException
04-08 15:59:02.529: E/AndroidRuntime(2807):     at com.android.Rides.RideTracking.onClick(RideTracking.java:307)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at android.view.View.performClick(View.java:4204)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at android.view.View$PerformClick.run(View.java:17355)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at android.os.Handler.handleCallback(Handler.java:725)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at android.os.Looper.loop(Looper.java:137)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at java.lang.reflect.Method.invoke(Method.java:511)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-08 15:59:02.529: E/AndroidRuntime(2807):     at dalvik.system.NativeStart.main(Native Method) 
```

这是代码：

```
 public View btnStart = null;
        public View btnPause = null;
        public View btnResume = null;

        case R.id.btnPauseRide:
            mLoggerServiceManager.pauseGPSLogging();

            setResult( RESULT_OK, intent );
            btnPause.setVisibility(View.GONE);
            btnResume.setVisibility(View.VISIBLE);
            break;

        case R.id.btnResumeRide: 
            mLoggerServiceManager.resumeGPSLogging();
            setResult(RESULT_OK, intent);

            btnResume.setVisibility(View.GONE);
            btnPause.setVisibility(View.VISIBLE);
        default:
                            break; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:12:37.950

这是因为

```
 public View btnPause = null; 
```

你设置`button`为`null`. 你需要分配它。假设你已经打电话`setContentView()`了`button``layout`

```
btnPause = (Button) findViewwById(R.id.button_id); 
```

你已经完成了所有`buttons`设置，`null`然后尝试在它们上调用一个方法，每次`setVisibility()`都会返回`null`

如果您想隐藏`Button`按下的那个，那么您可以这样做

```
 case R.id.btnPauseRide:
        mLoggerServiceManager.pauseGPSLogging();

        setResult( RESULT_OK, intent );
        btnPPauseRide.setVisibility(View.GONE);
        btnResume.setVisibility(View.VISIBLE);
        break; 
```

而不是创建这些新`View`的 s 除非你有其他事情发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:13:06.653

看起来您尝试访问的变量未设置。如果您设置并实际找到它，请检查您的 onCreate 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:14:27.020

您将获得空指针异常，因为您将视图分配为空。相反，尝试通过以下任一方式初始化视图：

```
public View btnPause = findViewById(R.id.btnPause); 
```

或者....

```
public View btnPause = new View(this); 
```