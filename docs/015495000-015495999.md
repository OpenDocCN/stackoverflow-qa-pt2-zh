# StackOverflow 问答 15495000-15495999

# c - 如果在 C 中退出（退出代码）会发生内存泄漏？

> ID：15495004
> 
> 赞同：2
> 
> 时间：2013-03-19T08:54:14.153
> 
> 标签：c, memory, memory-leaks, exit, exit-code

在 C 程序中，如果在程序执行后仍然没有释放动态分配的内存`exit(100);`，我们会遇到内存泄漏问题吗？例如：

```
int main (void) {
    char str1[] = "Hello World"
    char *str2;
    str2 = malloc(strlen(str1 + 1));

    if (str2) 
        exit(101); // memory leaks?

    free(str2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:55:27.583

不是在现代操作系统下，没有。当进程终止时，操作系统会自动收集所有内存。

事实上，如果程序无论如何都退出，释放内存实际上可能对性能有害。原因是调用`free`有时涉及大量工作——更新大量结构、接触缓存行等。通过简单地退出，您不会做所有这些用户空间的废话，操作系统会负责实际取消映射您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:56:31.433

使用分配的所有动态分配的内存都`malloc`需要通过调用显式释放`free`。当您的程序继续以这种方式运行未分配的内存时，可能会被称为泄漏（*前提是它根本没有被使用*）。但是，一旦您的程序/进程返回，操作系统就会简单地回收它分配给进程的内存。操作系统不理解***泄漏***它只是收回它给进程的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:56:51.217

这取决于操作系统。所有现代操作系统（据我所知）在完成执行后都会释放 C 程序未明确释放的内存。因此，在正常情况下，您可以摆脱这种情况而不会产生任何后果。事实上，有一些学派不建议在程序执行即将结束时释放内存，因为这是不必要的。但是，如果您碰巧正在处理可能很危险的旧的或不寻常的操作系统。在其中一些系统中，可能需要重新启动才能再次释放内存。

# mysql - 有没有办法将所有现有的表数据转换为 UTF8 排序规则？

> ID：15495008
> 
> 赞同：2
> 
> 时间：2013-03-19T08:54:28.257
> 
> 标签：mysql

我正在协助将数据库从 MySQL 4 升级到 MySQL 5.5。我的客户端的应用服务器也从 JDK 5 升级到了 JDK 7。应用程序运行但是在执行数据库操作时抛出了很多异常。

我发现升级后的数据库在表排序和/或表列排序中混合使用了 Latin1 generic、Latin1 Swedish 和 UTF8 generic，因此大多数 JOIN 查询都失败了。

有数百个表和数千个表字段，手动转换所有这些将非常困难。

有没有更方便的方法将所有数据表和所有列转换为相同的排序规则？

谢谢你。

编辑：显示 JOIN 查询失败的 SQLException 消息示例：

“用于操作'='的排序规则（latin1_general_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）的非法混合”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T09:00:26.290

字符集的混合不应导致查询失败，因为 MySQL 应根据需要在字符集之间进行转换。

但是，如[`ALTER TABLE`语法](http://dev.mysql.com/doc/en/alter-table.html)中所述：

> 要将表默认字符集和所有字符列 ( [`CHAR`](http://dev.mysql.com/doc/en/char.html), [`VARCHAR`](http://dev.mysql.com/doc/en/char.html), [`TEXT`](http://dev.mysql.com/doc/en/blob.html)) 更改为新字符集，请使用如下语句：
> 
> ```
> ALTER TABLE ***tbl_name*** CONVERT TO CHARACTER SET ***charset_name***;
> ```
> 
> 对于具有数据类型[`VARCHAR`](http://dev.mysql.com/doc/en/char.html)或其中一种类型的列[`TEXT`](http://dev.mysql.com/doc/en/blob.html)，`CONVERT TO CHARACTER SET`将根据需要更改数据类型，以确保新列足够长以存储与原始列一样多的字符。例如，一[`TEXT`](http://dev.mysql.com/doc/en/blob.html)列有两个长度字节，用于存储该列中值的字节长度，最大为 65,535。对于一`latin1` [`TEXT`](http://dev.mysql.com/doc/en/blob.html)列，每个字符都需要一个字节，因此该列最多可以存储 65,535 个字符。如果将列转换为`utf8`，则每个字符可能需要最多三个字节，最大可能长度为 3 × 65,535 = 196,605 字节。该长度不适合[`TEXT`](http://dev.mysql.com/doc/en/blob.html)列的长度字节，因此 MySQL 会将数据类型转换为[`MEDIUMTEXT`](http://dev.mysql.com/doc/en/blob.html)，它是长度字节可以记录的值为 196,605 的最小字符串类型。同样，[`VARCHAR`](http://dev.mysql.com/doc/en/char.html)列可能会转换为[`MEDIUMTEXT`](http://dev.mysql.com/doc/en/blob.html).
> 
> 为避免刚刚描述的类型的数据类型更改，请勿使用`CONVERT TO CHARACTER SET`. 相反，用于`MODIFY`更改单个列。例如：
> 
> ```
> ALTER TABLE t MODIFY latin1_text_col TEXT CHARACTER SET utf8;
> ALTER TABLE t MODIFY latin1_varchar_col VARCHAR(***M***) CHARACTER SET utf8;
> ```
> 
> 如果您指定`CONVERT TO CHARACTER SET binary`，则[`CHAR`](http://dev.mysql.com/doc/en/char.html)、[`VARCHAR`](http://dev.mysql.com/doc/en/char.html)和[`TEXT`](http://dev.mysql.com/doc/en/blob.html)列将转换为其对应的二进制字符串类型（[`BINARY`](http://dev.mysql.com/doc/en/binary-varbinary.html)、[`VARBINARY`](http://dev.mysql.com/doc/en/binary-varbinary.html)、[`BLOB`](http://dev.mysql.com/doc/en/blob.html)）。这意味着这些列将不再具有字符集，并且后续`CONVERT TO`操作将不适用于它们。
> 
> 如果***`charset_name`***是`DEFAULT`，则使用数据库字符集。
> 
> > ###  警告 
> > 
> > 该`CONVERT TO`操作在字符集之间转换列值。如果您在一个字符集中有一列（如 ），这*不是*您想要的，`latin1`但存储的值实际上使用了其他一些不兼容的字符集（如`utf8`）。在这种情况下，您必须对每个此类列执行以下操作：
> > 
> > ```
> > ALTER TABLE t1 CHANGE c1 c1 BLOB;
> > ALTER TABLE t1 CHANGE c1 c1 TEXT CHARACTER SET utf8;
> > ```
> > 
> > [`BLOB`](http://dev.mysql.com/doc/en/blob.html)这样做的原因是当您转换为列或从列转换时没有转换。

# javascript - 在拖放区域中拖动时替换元素

> ID：15495009
> 
> 赞同：0
> 
> 时间：2013-03-19T08:54:29.020
> 
> 标签：javascript, jquery, jquery-ui, cordova, drag-and-drop

我正在尝试编写 1 个具有一些“p”标签的应用程序可以拖动和 1 个“div”标签作为放置区域。

当我将“p”标签拖到放置区域时，它们会附加在放置区域中。

我可以拖动 10 个“p”标签甚至更多，但我希望当我拖动新的“p”标签时，旧的“p”标签必须删除或被替换

请给我一些建议！多谢

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>jQuery UI Touch Punch - Mobile Device Touch Event Support for jQuery UI</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    <link href="css/jquery-ui.css" rel="stylesheet">
    <link href="css/jquery-ui1.css" rel="stylesheet">

    <style>body { background:#fff; font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; }</style>

    <script src="js/cordova-2.5.0.js"></script>
    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/jquery.mobile-1.1.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.touch-punch.min.js"></script>

  </head>
  <body>
    <div class="container">
        <script>
        $(function() {

          var chu = ["aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","jjj","kkk","lll","mmm"];
          $("p").text(function(){
              return chu[ Math.floor((Math.random()*chu.length)+0)];
            });
          var c = 0;

          $('#dragSource p').draggable({
              helper: function(){
              var selected = $('#dragSource').parents('p');
              if (selected.length === 0) {
                selected = $(this);
              }
              var container = $('<div/>').attr('id', 'draggingContainer');
              container.append(selected.clone());
              return container;
            }
          });

          $('#c').droppable({
              tolerance: 'pointer',
              drop: function(event, ui){
                  $(this).append(ui.helper.children());
                  c++;
                  while(c == 2) {
                      $(this).find('p').remove();
                      c = 0;
                  }
            }
          });

        });
        </script>
      <div class="demo">
      <div id="dragSource" class="droppableContainer">
          <p></p>
          <p></p>
          <p></p>
          <p></p>
      </div>
      <input id="canvasDraw" type="button" value="New Game"/>
      <ul id="c" class="droppableContainer" style="display:inline;border:1px solid #d3d3d3;width: 150px; height: 150px;float:left;vertical-align: middle;">
      </ul>
      </div><!-- End demo -->
    </div>
    </body>
</html> 
```

**编辑：**

我改变了放置区域（从“ul”标签到“input”标签），但它的cobe不起作用；请给我一些建议！我是新手，对网络知之甚少！

这是我的改变：

```
<input id="c" class="droppableContainer" style="display:inline;border:1px solid #d3d3d3;width: 150px; height: 150px;float:left;vertical-align: middle;"/> 
```

和

```
 $('#c').droppable({
          tolerance: 'pointer',
          drop: function(event, ui){
              $(this).disable();
              $(this).find('p').remove();
              $(this).append(ui.helper.children());
              htmlOfDroppedElement = $(ui.draggable).html();
              pElementToBeReplaced = $(this).find('p');
              $(pElementToBeReplaced).html(htmlOfDroppedElement);
        }
      }); 
```

**编辑2：**

我已经这样做了

```
htmlOfDroppedElement = $(ui.draggable).html();
                $(this).val(htmlOfDroppedElement); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:08:56.880

```
$('#c').droppable({
    tolerance: 'pointer',
        drop: function(event, ui) {
            htmlOfDroppedElement = $(ui.draggable).html();
            pElementToBeReplaced = $(this).find('p');
            $(pElementToBeReplaced).html(htmlOfDroppedElement);
        }
    }); 
```

在这里，我只是将可放置`<p>`div 的`<p>`元素中的 html 替换为可拖动 div 的元素。

# java - 如何从庞大的数据库中搜索给定的单词？

> ID：15495012
> 
> 赞同：10
> 
> 时间：2013-03-19T08:54:38.067
> 
> 标签：java, algorithm, data-structures, search-engine

从字典数据库中搜索单词的最有效方法是什么。我搜索了答案，人们建议使用 trie 数据结构。但是为大量单词创建树的策略是加载主内存。我正在尝试为我的数据结构项目制作一个涉及此实现的 android 应用程序。谁能告诉我字典是如何工作的。

即使我在手机中使用 t9 词典，单词建议也会很快出现在屏幕上。很想知道它背后的算法和设计。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T09:05:27.750

您可以使用对搜索大字典最有用的[Trie 。](http://en.wikipedia.org/wiki/Trie)因为太多的词都在使用类似的启动，所以围绕常数因子搜索的尝试也可以在适当的位置使用，访问物理内存的次数有限。[你可以在网上](http://simplestcodings.blogspot.de/2012/11/trie-implementation-in-c.html)找到很多实现。

如果有人不熟悉 trie，我认为[这个](http://www.csse.monash.edu.au/~lloyd/tildeAlgDS/Tree/Trie/)网站很好，我只是在这里引用他们的示例：

> Trie（来自检索）是一种多路树结构，可用于在字母表上存储字符串。它已被用于在拼写检查程序和自然语言“理解”程序中存储大型英语（比如）单词词典。给定数据：
> 
> ```
> an, ant, all, allot, alloy, aloe, are, ate, be 
> ```
> 
> 相应的尝试将是： ![上述单词的示例 Trie](../Images/58a6451f52b3a92d7a8a8c7a6388bbb6.png)

这是 Java 中很好的实用 Trie 实现： [http ://code.google.com/p/google-collections/issues/detail?id=5](http://code.google.com/p/google-collections/issues/detail?id=5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:06:56.887

有很多方法可以做到这一点。我前段时间使用的一个（如果您不更改字典特别好）是创建一个前缀索引。

也就是说，您对条目进行词汇排序。然后，为不同的首字母保存范围的（结束）位置。也就是说，如果您的条目具有从 1 到 1000 的索引，并且单词“aardvark -- azerbaijan”的范围从 1 到 200，那么您在单独的表“a | 200”中创建一个条目，然后您首先执行相同的操作和第二个字母。然后，如果您需要查找某个特定的词，则大大缩小了搜索范围。就我而言，前两个字母的索引就足够了。

同样，此方法要求您使用数据库，如 SQLite，我认为它存在于 Android 上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-13T18:46:51.250

使用 trie 确实有空间意识，当我在加载 150,000 个单词后检查我的 RAM 使用情况时才意识到，使用量是 150 MB（Trie 是用 C++ 实现的）。**内存消耗很大程度上是由于指针**。我最终得到了三元尝试，它的内存浪费非常少，大约为 30 MB（与 150 MB 相比），但时间复杂度有所增加。另一种选择是使用“左孩子右兄弟”，其中内存浪费非常少，但时间复杂度高于三元特里树。

# jquery - 如何在上下文中选择具有指定类名的直接子级

> ID：15495021
> 
> 赞同：3
> 
> 时间：2013-03-19T08:55:14.667
> 
> 标签：jquery, css, jquery-selectors

所有，请原谅我不是 jquery 的专业人士，我一直坚持将选择器作为标题显示。请帮助我，谢谢。

我有这样的功能：

```
function (container)
{
   var selectContentDiv= $("....",container);//I just don't know how to working with the selector context.
} 
```

假设我们`container`包含如下的 html 结构：

```
 <div class="block-head">
       <h3>test</h3>
    </div>
    <div class="block-content"><!--I want to get this one-->
       <div class="block-head">
          <h3>test</h3>
       </div>
       <div class="block-content">
          ....
       </div>
    </div> 
```

我想知道如何获得具有`block-content`上下文命名的类的直接第一个孩子？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:58:47.043

```
<div class="block-content"><!--I want to get this one-->
       <div class="block-head">
          <h3>test</h3>
       </div>
       <div class="block-content">
          ....
       </div>
       <div class="block-head">
          <h3>test</h3>
       </div>
    </div> 
```

从上面的 HTML 如果你想找到的直接孩子`block-content`

```
$('.block-content > div.block-head') 
```

**根据 Dream Eater 评论编辑**

添加了上面的代码，例如哪里`.block-content`是父元素，哪里是`div.block-head`子元素。

所以完整的语法将是。

```
$('parent > child') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:05:21.407

要获取具有 .block-content 类的元素的第一个子元素，请使用以下命令：

```
$('div > .block-content'); 
```

我使用 div 作为你的父元素，你没有包含在你的 html 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:03:08.160

采用：

```
$('div > block-content') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:00:08.413

这将使您第一次出现带有 class 的 div 元素`block-content`：

```
$('div.block-content').first() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:05:28.200

试试这个 ：

```
$(".block-head").next(".block-content") 
```

这会给你第一个`.block-content`之后`.block-head`

# php - PHP：从证书中获取公钥 ID。

> ID：15495026
> 
> 赞同：0
> 
> 时间：2013-03-19T08:55:34.203
> 
> 标签：php, ssl, security, ssl-certificate

我正在构建一个站点，我需要用户使用名称、密码和证书登录。它应该工作的方式是在您第一次登录时上传证书。之后应该有一个带有公钥 ID（不是公钥）和名称和密码的 cookie，这样以后您就不再需要上传证书了。

我遇到了麻烦，特别是获取公钥 ID。我可以获取密钥，没问题，但我需要做的是获取公钥 ID 并将其保存为 cookie，然后连同用户名和密码一起保存到数据库中。

这是我提交表单的代码：

```
<?php
    $uploads_dir = '/home/path/to/certs/';
    $uploadfile = $uploads_dir . basename($_FILES['cert']['name']);

    if (move_uploaded_file($_FILES['cert']['tmp_name'], $uploadfile)) {
         $name = './'. $_FILES['cert']['name'];
         $pub_key = openssl_pkey_get_public(file_get_contents($name));
         $keyData = openssl_pkey_get_details($pub_key);   
         echo $keyData['key'];
    } else {
         echo "Nope!\n";
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:21:14.223

> 之后应该有一个带有公钥 ID（不是公钥）和名称和密码的 cookie，这样以后您就不再需要上传证书了。

从本质上讲，您正在实施一个根本不提供安全性的身份验证系统。

无论您称之为“公钥 ID”，本质上都是*公开*的。由于任何人都可以设置该 cookie，因此您实际上并没有对任何内容进行身份验证。

如果要使用证书中的公钥进行身份验证，请使用客户端证书身份验证。例如，您可以禁用 PKI 验证并使用手动验证证书中的公钥。

# ios - 有办法验证苹果证书吗？

> ID：15495027
> 
> 赞同：1
> 
> 时间：2013-03-19T08:55:38.897
> 
> 标签：ios, objective-c, certificate

一个大问题：在为 ios 开发应用程序时，有没有办法验证所有的苹果证书链？

我对推送通知有疑问：我做了所有必须做的事情，一切似乎都很顺利（并且在开发中一切都很顺利）但是现在应用程序在应用程序商店中，通知无法到达。我尝试了很多解决方案但没有运气，所以我认为是证书问题......但是我如何检查我生成的内容是否正确，或者至少检查为什么苹果服务器在它时不发送通知接听我的电话？

# php - CSV 输出到多列

> ID：15495030
> 
> 赞同：0
> 
> 时间：2013-03-19T08:55:45.187
> 
> 标签：php, excel, csv, export

一切正常，但我在将数据导出到 CSV 文件时遇到了问题。我尝试搜索类似的问题，但我没有找到任何可能与我的问题相关的问题。

这里的代码应该从 mySQL 数据库中导出整个数据库表。它做得很完美，但问题是，它将所有数据放在第一列 - 在不同的单元格中。单元格的位置没问题，但它应该将数据分布在几列（在我的例子中是 13 列）。

这是解释正在发生的事情的屏幕截图：

![在此处输入图像描述](../Images/b8022f153422c4ad81e907b3a9c4c3a2.png) 代码：

```
<?php
header("Content-type: application/vnd.ms-excel");
header("Content-disposition: filename=export.csv");

#$query=mysql_query("set names 'utf8'");
#mb_http_output('UTF-8');
#mb_http_input('UTF-8');
#mb_language('uni');
#mb_regex_encoding('UTF-8');
#ob_start('mb_output_handler');
#header('Content-type: text/html; charset=utf-8');

$conn = mysql_connect('localhost', 'root', 'asdasd') or die(mysql_error());
mysql_select_db('nooruse', $conn) or die(mysql_error($conn));

$query = sprintf('SELECT osakond as Osakond, soetusaasta as Soetusaasta, it_number as IT_Number, tooteruhm as Tooteruhm, mudeli_nimetus as Mudeli_nimetus, sn as SN, riigivara_nr as Riigivara_nr, inventaari_nr as Inventari_nr, maja as Maja, ruum as Ruum, vastutaja as Vastutaja, markus as Markus,kasutajanimi as Kasutajanimi FROM norse5_proov');
$result = mysql_query($query, $conn) or die(mysql_error($conn));

$row = mysql_fetch_assoc($result);
if ($row) {
    echocsv(array_keys($row));
}

while ($row) {
    echocsv($row);
    $row = mysql_fetch_assoc($result);
}

function echocsv($fields)
{   
    $separator = '';
    foreach ($fields as $field) {
        if (preg_match('/\\r|\\n|,|"/', $field)) {
            $field = '"' . str_replace('"', '""', $field) . '"';
        }
        echo $separator . $field;
        $separator = ',';
    }
    echo "\r\n";
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:18:44.400

问题是您假设 Excel 知道分号是分隔符。

对于某些机器，这可能有效，而其他机器则不行。

有人建议这与列表分隔符下控制面板中的区域设置有关。

我发现了一个建议，将以下内容添加为 CSV 的第一行，以告诉 excel 使用什么分隔符：

九月=;

没试过这个，但它似乎是合法的。

这是一个更好描述的链接（有关在 CSV 文件中设置分隔符以避免客户端计算机更改的方法，请参阅第 3 条评论）：

[使用 Excel 打开 CSV 文件时遇到问题？由于欧洲的区域设置，Excel 中的逗号和分号问题](http://hotware.wordpress.com/2009/12/16/trouble-with-opening-csv-files-with-excel-the-comma-and-semicolon-issue-in-excel-due-to-regional-settings-for-europe/)

# spring - JPA 测试框架

> ID：15495031
> 
> 赞同：1
> 
> 时间：2013-03-19T08:55:51.560
> 
> 标签：spring, jpa

我的应用程序使用 JPA (1.2)、Spring (3.1.2)、Spring Data (1.1.0) 和 Hibernate (4.1.7)。

我们需要编写 Junit 测试用例来测试实体和存储库，但我们无法找到正确的 Junit 示例和框架，这对于测试 JPA 的所有场景都是正确的。

请让我们知道哪个框架对于为 JPA 存储库和实体编写 Junit 是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:01:55.427

我建议使用 Spring Test 框架，它使开发人员能够使用测试引导依赖注入容器。然后，您可以将存储库自动连接到测试中。

这是我使用该框架的一个摘录测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:META-INF/spring/test-context.xml"})
@TransactionConfiguration(defaultRollback=false)
public class CommentRepositoryTest {

    @Autowired
    private CommentRepository repository;

    @Autowired
    PostRepository postRepository;

    @Test
    public void findOneTest(){
       Comment comment= repository.findOne(1);
       assertNotNull(comment);
       assertEquals("John Doe", comment.getAuthor());
    }

} 
```

注意`@ContextConfiguration`指向 Spring Beans 配置文件的方式。那就是被引导的依赖注入容器。`@Autowired`注释正在注入我的存储库进行测试。告诉 Spring 不要回滚测试，`@TransactionConfiguration`以便您可以针对沙盒数据库运行单元测试，这可能会暴露回滚功能隐藏的问题。

我有一个项目，它在[GitHub 上](https://github.com/kmb385/ToThoughtDataLayer)演示了此配置。

我还创建了一个视频教程，演示如何[使用 Spring Test 配置 jUnit 测试](http://tothought.cloudfoundry.com/post/3)。

我还有一个使用注释的[测试示例。](https://github.com/kmb385/ToThoughtDataLayer/blob/master/src/test/java/org/tothought/repositories/SkillRepositoryTest.java)`@Transactional`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T12:50:16.367

你可以看看我目前正在做的简单的 POC 项目：

[https://github.com/ndjordjevic/dental-rec](https://github.com/ndjordjevic/dental-rec)

您可以找到一些想法如何使用 jpa、spring、junit、dbunit 等测试 jpa 实体...

# java - 如何让 CommonsPoolTargetSource 池大小按需增长？

> ID：15495032
> 
> 赞同：1
> 
> 时间：2013-03-19T08:55:54.497
> 
> 标签：java, spring, spring-3, spring-aop, pool

我注意到当有很多请求并且达到最大池大小时，其他请求会等到资源可用。如何设置`CommonsPoolTargetSource`当它达到其最大池大小时，将创建新的对象实例？多余的资源也必须在使用后释放。

最初，我尝试寻找`minSize`房产，但发现`CommonsPoolTargetSource`没有`minSize`房产。下面是我的 web.xml 的正文：

```
<bean id="simpleBeanTarget" class="com.bean.SimpleBean" scope="prototype">        
</bean>

<bean id="poolTargetSource" class="org.springframework.aop.target.CommonsPoolTargetSource">
    <property name="targetBeanName" value="simpleBeanTarget" />
    <property name="maxSize" value="3" />
    <!-- How do I let the pool grow if more than 3 instances is needed? -->
    <!-- And how do I release the excess instances after usage? -->
</bean>

<bean id="simpleBean" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="targetSource" ref="poolTargetSource" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:08:52.713

尝试 `<property name="whenExhaustedActionName" value="WHEN_EXHAUSTED_GROW" />`

或者

```
<property name="whenExhaustedAction">
 <util:constant static-field="org.apache.commons.pool.impl.GenericObjectPool.WHEN_EXHAUSTED_GROW"/>
</property> 
```

# java - 更新休眠中的列

> ID：15495034
> 
> 赞同：0
> 
> 时间：2013-03-19T08:55:57.290
> 
> 标签：java, database, hibernate

我在更新表时遇到了休眠问题。我必须将任务从一个项目移动到另一个项目，并且我必须更新该项目中的任务 ID。我正在使用的线路是：

```
 Long taskCounter = destinationProject.getLastTaskID();
    session.createQuery("update Task tp set tp.projectKey.projectID = ? ,tp.projectKey.id = ?, tp.taskListID = ? where tp.taskListID = ? and tp.projectKey.projectID = ?")
            .setParameter(0, projectID).setParameter(1,++taskCounter).setParameter(2, newTaskListId).setParameter(3, taskListID).setParameter(4, sourceProjectID).executeUpdate(); 
```

当我有包含多个子任务的任务列表时，我得到一个重复的主键异常。我相信问题出在 setParamater(1,++taskCounter) 因为我相信它不会针对所选的每一行而递增。

我该如何解决这个问题？

# wysiwyg - Add wysiwyg editor successfully with image insert for magento 1.5.2

> ID：15495039
> 
> 赞同：2
> 
> 时间：2013-03-19T08:56:04.250
> 
> 标签：wysiwyg, magento-1.5

How can we add wysiwyg editor in magento custom module?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:56:04.250

1) open file Block_Adminhtml__Edit_Tab_Form

edit field

```
$form = new Varien_Data_Form();
  $this->setForm($form);
  $fieldset = $form->addFieldset('developerpage_form', array('legend'=>Mage::helper('developerpage')->__('Item information'))); 
```

/* add below code here */

```
 $configSettings = Mage::getSingleton('cms/wysiwyg_config')->getConfig();
  $configSettings['files_browser_window_url'] = $this->getBaseUrl().'admin/cms_wysiwyg_images/index/';
  Mage::getSingleton('cms/wysiwyg_config')->setConfig($configSettings); 
```

/* for fieldset add like below */

```
$fieldset->addField('detail', 'editor', array(
          'name'      => 'detail',
          'label'     => Mage::helper('developerpage')->__('Content'),
          'title'     => Mage::helper('developerpage')->__('Content'),
           'style'     => 'width:700px; height:500px;',
          'config'    => $configSettings,
          'required'  => true,

      )); 
```

2) open controllers/adminhtml/testcustomercontroller.php find editAction

in editAction find $this->loadLayout(); and paste the below code;

```
$this->getLayout()->getBlock('head')->setCanLoadExtJs(true);
        if (Mage::getSingleton('cms/wysiwyg_config')->isEnabled()) {
            $this->getLayout()->getBlock('head')->setCanLoadTinyMce(true);
        } 
```

3) open desing/adminhtml/default/default/yourmodule xml file and add below xml

```
 /* this is my module change with yours */
<developerpage_adminhtml_developerpage_edit>
     <update handle="editor" />
 </developerpage_adminhtml_developerpage_edit>

NOTE: Dont give field name or id name  "content" of editor field nor in Database

Call  editor content like below other wise directive  would't convert 

$_cmsHelper = Mage::helper('cms');
$_process = $_cmsHelper->getBlockTemplateProcessor();
echo $_process->filter(Here your database content); 
```

Now image can be insert. :)

# ruby-on-rails-3 - 思考狮身人面像 yml 文件未被读取

> ID：15495042
> 
> 赞同：0
> 
> 时间：2013-03-19T08:56:11.903
> 
> 标签：ruby-on-rails-3, yaml, sphinx, thinking-sphinx

Thinking Sphinx 在我的 Rails 应用程序（Rails 3.2.1，TS 3.0.1）上工作，但是当我在 config 文件夹中设置 sphinx.yml 文件时，它似乎没有读取形态说明。

该文件名为 sphinx.yml，位于 config 文件夹中。这是 yml 格式：

```
development:
  morphology: stem_en

production:
  morphology: stem_en 
```

我复制/粘贴了这个，以便缩进与我的代码中的内容相匹配。我不使用 libstemmer，也没有安装任何其他 wordform。

拜托，我保持手指交叉，当我难过时，有人可以帮我解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:18:47.793

答案是：阅读所有文档： [https ://github.com/pat/thinking-sphinx/blob/master/README.textile](https://github.com/pat/thinking-sphinx/blob/master/README.textile)

.yml 的新名称是 thinking_sphinx.yml

# undefined - IE10“__doPostBack 未定义”解决方案不起作用

> ID：15495043
> 
> 赞同：7
> 
> 时间：2013-03-19T08:56:12.707
> 
> 标签：undefined, asp.net-4.0, asp.net-2.0, internet-explorer-10, dopostback

我有一个运行 Windows Server R2 Standard 的 Web 服务器，并且遇到了这篇博文中描述的问题：[http ://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

简而言之，.Net 无法识别 IE10 并将其视为不支持 javascript 的低级浏览器 - 如果我正确理解了这个问题。

我尝试了以下流行的解决方案：

*   为 .Net 2 和 4 安装了两个修补程序。
*   手动更新 .Net 框架配置文件夹中的浏览器定义文件并运行 aspnet_regbrowsers.exe。
*   将新的浏览器定义文件放在 App_Browsers 目录中。

最后我升级到 .Net 4.5，它解决了在服务器上运行的 .Net 4 站点的问题，但是 .Net 2 站点仍然遇到这个问题。

因为这是一个实时网络服务器，它有很多尚未安装的 Windows 更新。我想也许有一个更新可以解决这个问题。所以我查看了更新，但没有任何描述似乎解决了这个问题，所以我不能证明安装它们并可能导致更多问题。

有没有人有任何其他解决方案或可能的原因导致这个问题不会消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:40:20.393

我有同样的问题，我无法弄清楚为什么没有一个修复工作。但是，我确实找到了一种可能对您有用的解决方法：将 Page.ClientTarget 属性设置为“uplevel”会覆盖 .NET 的浏览器功能检测。查看[http://msdn.microsoft.com/en-us/library/system.web.ui.page.clienttarget.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.clienttarget.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T11:05:43.317

经历了许多微软的热修复，他们在本地环境中工作，但在实时服务器中没有结果。

设置 Page.ClientTarget = "uplevel" （最好在页眉或页脚中）确实解决了这个问题。我认为这是最好的解决方案，因为您的 .net 应用程序将来可能不会检测到任何其他浏览器。但是，我们可能不得不拭目以待，这个修复是否有任何副作用。

# android - ProgressDialog 在 Ginger Bread 中不起作用，但在 ICS ad JB 中起作用

> ID：15495046
> 
> 赞同：0
> 
> 时间：2013-03-19T08:56:24.637
> 
> 标签：android, progressdialog

我有一个在我的应用程序中使用 webviews 的功能我使用了“ProgressDialog”api 它在我的手机（姜饼）中不起作用，但我在模拟器（ICS 和 JB）中尝试了同样的事情它工作正常。

```
public void onLoadResource (WebView view, String url) {
  if (progressDialog == null) {
    progressDialog = new ProgressDialog(activity);
    progressDialog.setMessage("Loading...Please wait");
    progressDialog.show();
  }
}

public void onPageFinished(WebView view, String url) {
  System.out.println("Loading...onPageFinished");

  if (progressDialog!=null && progressDialog.isShowing()) {
    progressDialog.dismiss();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:07:15.077

我自己通过在某些形式/博客中进行自我挖掘来解决。在我的代码中，关闭后没有将 progressDialog 设置为 null。如果有人想要进步或任何问题，请找到我更新的代码。`progressDialog = null;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:20:04.087

您应该使用[`onPageStarted`](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted%28android.webkit.WebView,%20java.lang.String,%20android.graphics.Bitmap%29)而不是`onLoadResource`：

```
public void onPageStarted (WebView view, String url, Bitmap favicon){
  if (progressDialog == null) {
    progressDialog = new ProgressDialog(activity);
    progressDialog.setMessage("Loading...Please wait");
    progressDialog.show();
  }
} 
```

并且一定要检查你`progressDialog`是否不为空并显示你的`Dialog`（如果你已经加载了一个 URL）

# python - 不知道从哪里开始使用这些参数

> ID：15495047
> 
> 赞同：0
> 
> 时间：2013-03-19T08:56:30.137
> 
> 标签：python, wxpython

我正在创建一个自定义模块来帮助我用更少的代码和更简洁的语法更快地编写 python。

目前我正在创建一个更简洁的 wx.Accelerator 版本的函数。

到此结束时，我希望：

```
accel_tbl = wx.AcceleratorTable([(wx.ACCEL_CTRL,  ord('O'), PUT_ID_HERE),
                                 (wx.ACCEL_CTRL,  ord('S'), PUT_ID_HERE)])

self.SetAcceleratorTable(accel_tbl) 
```

成为：

```
accelerate((wx.ACCEL_CTRL,'O',PUT_ID_HERE),
           (wx.ACCEL_CTRL,'S',PUT_ID_HERE)) 
```

唯一的问题是..我不知道从哪里开始....我知道如何通过参数处理信息，但我从来没有学会如何处理参数内包含动态信息的多个元组。

有人可以提供见解吗？谢谢你。

**编辑：**

当前代码：

```
## Create a cleaner accelerator
def accelerate(*args):
    accel_tbl = wx.AcceleratorTable(list(args))
    wx.SetAcceleratorTable(accel_tbl) 
```

当前通话：

```
import Sky

Sky.accelerate((wx.ACCEL_CTRL,'s',wx.ID_ANY),
               (wx.ACCEL_CTRL,'t',wx.ID_ANY)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:02:38.090

将此方法添加到您的自定义`wx.Window`类中：

```
def accelerate(self,*args):
    accel_tbl = wx.AcceleratorTable(args)
    self.SetAcceleratorTable(accel_tbl) 
```

然后按如下方式调用它：

```
win = YourCustomWindowClass(PUT_WINDOW_ARGUMENTS_HERE)
win.accelerate((wx.ACCEL_CTRL,'O',PUT_ID_HERE),(wx.ACCEL_CTRL,'S',PUT_ID_HERE)) 
```

或者，您可以将其定义为带`wx.Window`参数的函数，如下所示：

```
def accelerate(win,*args):
    accel_tbl = wx.AcceleratorTable(args)
    win.SetAcceleratorTable(accel_tbl) 
```

将`*args`所有位置参数表示为一个元组。如果`AcceleratorTable`确实需要一个列表，您可以使用`list(args)`它作为参数（即`accel_tbl = wx.AcceleratorTable(list(args))`）。

`*args` [你可以在这里](http://docs.python.org/2/reference/expressions.html#calls)了解一下。

# windows - Tesseract - 我应该如何处理多字体类型？

> ID：15495049
> 
> 赞同：0
> 
> 时间：2013-03-19T08:56:31.700
> 
> 标签：windows, image, ocr, tesseract

我有这样的文件输入（只有数字，但有多种字体类型）。所以如果我想使用 Tesseract 来训练数据。我应该在一个 tiff 文件中制作一组一种字体类型，还是在一个 tiff 文件中制作多种字体类型？

![在此处输入图像描述](../Images/34fd55419b29734a7bb9f93df92fffdd.png)

有什么更好的，请给我一些提示。感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:24:01.153

每个训练图像中的一种字体样式。[正方体训练 Wiki](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3)声明如下：

*   训练数据应按字体分组。理想情况下，单一字体的所有样本都应该放在一个 tiff 文件中，但这可能是多页 tiff（如果您安装了 libtiff 或 leptonica），因此单一字体的总训练数据可能有很多页和很多 10s数千个字符，允许对大字符集语言进行训练。

*   不要在图像文件中混合字体（准确地说是在单个 .tr 文件中
    。）这将导致特征在聚类时被丢弃，从而导致识别错误。

# java - Java 文件没有被编译

> ID：15495055
> 
> 赞同：0
> 
> 时间：2013-03-19T08:57:04.843
> 
> 标签：java, ant

当源文件是包的一部分并且源树的目录结构不遵循包层次结构时，`javac` `ant`任务无法编译 java 类。但是我看到在不同的机器上，相同的

> 构建.xml

文件运行良好。

例如，如果我有一个带有包的 java 文件，`com.abc.myapp.server.base`并且如果我的源文件放在`C:\mySource\base`文件夹下，`javac`则无法编译此类。但是，如果我将`.java`源文件移动到文件`C:\mySource\com\abc\myapp\server\base`夹下，一切都会好起来的。

我在**Windows 7上使用****ANT 1.8.0**版本和**JDK 1.7.0_17**版本。

 **请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:35:53.840

It sounds like you're not setting up your directory structure to match the packages of your java source files. The source for the class "org.example.abc.HelloWorld" should live in a directory like /src/org/example/abc.

Typically, you'd want your build.xml to be at the top-level of whatever project you're trying to build, and then the javac task inside it can reference the source directory where your package structure starts.

Something like this:

```
<project name="example" default="compile">
    <target name="compile" description="compiles">
        <mkdir dir="build"/>
        <javac srcdir="src" destdir="build"/>
    </target>
</project> 
```

This is obviously very over simplified, but should help get you started.

If you're still having trouble, post your build.xml and some description of your project's layout so we can help.**

# javascript - 如何使用 js 数组，查找和分组项目？

> ID：15495059
> 
> 赞同：3
> 
> 时间：2013-03-19T08:57:11.640
> 
> 标签：javascript, sorting, filter, grouping

谷歌搜索了一下，但无法解决如何处理这个问题。

我有/计划了一份物品清单。

```
var list1 = [
  [141,'AAA', 'A Group'],
  [262,'BBB', 'B Group'],
  [345,'CCC', 'B Group'],
  [136,'DDD'],
  [095,'EEE', 'A Group'],
  [175,'FFF'], and so on...
]; 
```

我的目标是打印这些项目。先分组，按字母顺序排列。之后无组。

所有项目按字母顺序排列。

最终结果将类似于：

```
<div>

<h2>A Group</h2>
<ul class="group">
    <li>
        <img src="/141">
        <h3>AAA</h3>
    </li>
    <li>
        <img src="/095">
        <h3>EEE</h3>
    </li>
</ul>

<h2>B Group</h2>
<ul class="group">
    <li>
        <img src="/262">
        <h3>BBB</h3>
    </li>
    <li>
        <img src="/345">
        <h3>CCC</h3>
    </li>
</ul>

<h2>No group</h2>
<ul class="non-group">
    <li>
        <img src="/136">
        <h3>DDD</h3>
    </li>
    <li>
        <img src="/175">
        <h3>FFF</h3>
    </li>
</ul>

</div> 
```

* * *

**关于如何解决这个问题的任何想法？**

* * *

找到这个，[https://stackoverflow.com/a/7596924/543365](https://stackoverflow.com/a/7596924/543365)

相当接近我可以使用的东西。虽然无法将它弯曲以供我使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:23:03.120

我建议研究**underscorejs**，但是，如果你想使用纯 javascript：

1.) 对列表进行排序，使具有组的项目排在第一位。

```
var i = 0,
    group_arr = [];
for (i = 0; i < list1.length; i++) {
    if (list1[i][2] !== undefined) {
        group_arr.append(list1.splice(i, 1)[0]);
    }
} 
```

2.) 现在所有有组的项目都在`group_arr`，没有的都在`list1`。我们现在需要`group_arr`按组按字母顺序进行排序：

```
group_arr.sort(function (item1, item2) {
    return (item1[2] > item2[2]) ? 1 : -1;
}); 
```

请注意，我们可以`group_arr`根据任意条件进行排序。如果您想按第二个条目的字母顺序排序，只需将比较器函数中传入的索引`Array.prototype.sort`。

3.) 现在中的项目`group_arr`按组按字母顺序排列，并且包含具有组的项目。中的项目`list 1`没有组，也没有排序。您现在可以遍历每个数组，创建 DOM 元素，然后插入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:28:22.333

维奈的回答很棒。像这样的东西也应该起作用：

```
var list1 = [
    [141,'AAA', 'A Group'],
    [262,'BBB', 'B Group'],
    [345,'CCC', 'B Group'],
    [136,'DDD'],
    [095,'EEE', 'A Group'],
    [175,'FFF']
];

var list1_new = list1.sort(function(a, b){
    if (a[2] == b[2]) {
        return 0; // Do nothing
    }

    if (a[2] > b[2]) {
        return 1; // Put a AFTER b
    }

    if (a[2] < b[2]) {
        return -1; // Put a BEFORE b
    }
});

console.log(list1_new); 
```

在检查索引（组）之后，您也可以重新运行该`sort()`函数来处理其他值`2`，以便一个又一个地对它们进行排序。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:31:05.767

我同意，Vinay 的回答很好，我也会建议下划线并让你成为[小提琴](http://jsfiddle.net/ybuBE/)。

```
var groups = _.filter(list1,function(entry){
    return entry.length == 3;
});

var groupsSorted = _.sortBy(groups,function(entry){
    return entry[2] + entry[1]; //sort by group name and second element
}); 
```

# c# - C# 枚举标志 -= 允许，但 += 需要强制转换为 int

> ID：15495063
> 
> 赞同：0
> 
> 时间：2013-03-19T08:57:28.187
> 
> 标签：c#, enums, flags

我有一个简短的问题要问你；为什么 -= 允许用于枚举，但 += 需要显式强制转换为 int？

```
EnumTest value = EnumTest.Two;
value += EnumTest.One; // Compile error
value += (int)EnumTest.One; // Valid operation
value -= EnumTest.One; // Valid operation

[Flags]
public enum EnumTest
{
    One = 1,
    Two = 2
} 
```

# asp.net - 捕获错误：不在列表中

> ID：15495072
> 
> 赞同：3
> 
> 时间：2013-03-19T08:58:12.780
> 
> 标签：asp.net, error-handling, selectedvalue

我怎样才能捕捉到这个错误？

```
DropdownList1.SelectedValue = strText; 
```

这是错误：

> DropdownList1 的选定值无效，因为它未出现在项目列表中。

我可以用 dropdownlist1 中的 strText 之类的东西来捕捉它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:00:12.043

您可以使用[DropDownList.Items.FindByValue](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbyvalue%28v=vs.80%29.aspx)

```
if( ItemCollection.FindByValue(strText) != null)
{
    DropdownList1.SelectedValue = strText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:06:03.220

你可以这样使用

```
 DropdownList1.SelectedIndex =    
                  DropdownList1.Items.IndexOf(DropdownList1.Items.FindByValue(strText)); 
```

以编程方式
[设置下拉列表选定项](https://stackoverflow.com/questions/3496456/setting-dropdownlist-selecteditem-programmatically)

# vb.net - 如何在 vb.net 中使用 openfiledialog 打开文件？

> ID：15495078
> 
> 赞同：2
> 
> 时间：2013-03-19T08:58:32.713
> 
> 标签：vb.net

如何使用 openfiledialog 打开文件

以下是我的代码：

```
Dim Fs As StreamReader
    With OpenFD
        .FileName = ""
        .Title = "Open Text File"
        .InitialDirectory = "c:\"
        .Filter = "Text files|*.txt"
        .ShowDialog()
    End With
    Dim path As String = OpenFD.FileName
    txtin.Text = OpenFD.FileName
    Fs = New StreamReader(path) 
```

我可以得到文件的路径。但无法打开文件。任何人都可以帮忙。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:24:51.657

如果要阅读整个文本文件，可以使用[`System.IO.File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx). 你可以这样做：

```
Dim readText() As String = System.IO.File.ReadAllLines(path) 
```

然后该文件将存储到您的字符串数组中，您可以按索引访问每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:21:51.860

尝试这个。它应该工作。

* * *

```
Dim sr As StreamReader

'Supposing you haven't already set these properties...
    With OFD
        .FileName = ""
        .Title = "Open a text file..."
        .InitialDirectory = "C:\"
        .Filter = "Text Files|*.txt"
    End With

    If OFD.ShowDialog() = DialogResult.OK Then
        Try
            sr = New StreamReader(OFD.Filename)
            txtInFile.Text = OFD.Filename
        Catch ex As Exception
            MsgBox("The file specified could not be opened." & VbNewLine & "Error message:" & VbNewLine & VbNewLine & ex.Message, MsgBoxStyle.OK, "File Could Not Be Opened!")
        End Try
    End If
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-15T12:24:39.380

不要使用流来读取文本文件，只需使用 File.ReadAllText()，这是我的代码对我有用

```
Private Sub OpenFileButton_Click(sender As Object, e As EventArgs) Handles OpenFileButton.Click
    OpenFileDialog1.Title = "Please Select TEXT File"
    OpenFileDialog1.Filter = "Text File|*.txt"
    OpenFileDialog1.FileName = "Query"
    If OpenFileDialog1.ShowDialog = DialogResult.OK Then
        RichTextBox1.Text = File.ReadAllText(OpenFileDialog1.FileName)
    End If
End Sub 
```

# html - 再次定位 Absolute FIREFOX vs CHROME

> ID：15495079
> 
> 赞同：0
> 
> 时间：2013-03-19T08:58:36.623
> 
> 标签：html, css

我在 Chrome 和 Firefox 中正确定位按钮时遇到问题。在 chrome 中，按钮向左移动，而在 Firefox 中，它应该在哪里（在输入按钮之后）

```
<td style="position: relative;">
<input type="text" id="search_box" value="" style="float: left; width: 160px;" name="search_term">
<input id="term_options_btn" style="z-index: 501; position:absolute;float: left;" type="button" class="client_ac_showall" value="▼" onclick="ShowTermOptions()">
<div style="clear:both;"></div>
<div style="margin-left: 73px; display: none;" class="term_options">
    <div><label><input type="checkbox" value="true" checked="checked" name="search_in_topics">Szukaj w tytule</label></div>
    <div><label><input type="checkbox" value="true" checked="checked" name="search_in_posts">Szukaj w postach</label></div>
</div> 
```

这是演示 [http://jsfiddle.net/4bZFT/](http://jsfiddle.net/4bZFT/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:05:09.553

只需`remove inline style`从按钮尝试此操作

```
<input id="term_options_btn" type="button" class="client_ac_showall" value="▼" onclick="ShowTermOptions()"> 
```

**它将在浏览器 mozilla 和 chrome 中显示按钮。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:02:30.560

只需删除`position:absolute`，`<input id="term_options_btn".../>`按钮就会出现在两个浏览器上文本输入的右侧。

[修改 JSFiddle](http://jsfiddle.net/4bZFT/6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:02:39.207

只需删除`position:absolute`.

请参阅[http://jsfiddle.net/4bZFT/5/](http://jsfiddle.net/4bZFT/5/)。

# php - 用 preg_split 分离一些东西

> ID：15495080
> 
> 赞同：3
> 
> 时间：2013-03-19T08:58:37.617
> 
> 标签：php, regex

对于我的生活，我无法弄清楚如何编写正则表达式来拆分它。

假设我们有示例文本：

```
15HGH(Whatever)ASD 
```

我想把它分成以下几组（数字、字母本身和括号内容）

```
15
H
G
H
Whatever
A
S
D 
```

它可以具有上述任意组合，例如：

```
15HGH
12ABCD
ABCD(Whatever)(test) 
```

到目前为止，我已经将数字/字母或括号部分分开。例如，在这种情况下：

```
<?php print_r(preg_split( "/(\(|\))/", "5(Test)(testing)")); ?> 
```

它会给我

数组（ [0] => 5 [1] => 测试 [2] => 测试）

我不确定在正则表达式中放入什么来匹配仅数字和单个字符组合时。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:19:46.990

我不知道 preg_match_all 是否满足你：

```
$text = '15HGH(Whatever)ASD';
preg_match_all("/([a-z]+)(?=\))|[0-9]+|([a-z])/i", $text, $out);
echo '<pre>';
print_r($out[0]);

Array
(
    [0] => 15
    [1] => H
    [2] => G
    [3] => H
    [4] => Whatever
    [5] => A
    [6] => S
    [7] => D
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:11:18.983

我有这个：[示例](http://regex101.com/r/aJ3aB4)（我不知道如何编写`\n`），但替换是有效的。

`(\d+|\w|\([^)]++\))`没有太多解释，首先尝试获取一个数字，然后是一个字符，如果那里没有任何内容，则尝试在括号之间获取一个完整的单词。（它们不能嵌套）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:19:59.717

[使用preg_match_all()](http://www.php.net/manual/en/function.preg-match-all.php)检查这一点：

```
$string = '15HGH(Whatever)(Whatever)ASD';
preg_match_all('/\(([^\)]+)\)|(\d+)|([a-z])/i', $string, $matches);

$results = array_merge(array_filter($matches[1]),array_filter($matches[2]),array_filter($matches[3]));
print_r($results); 
```

`\(([^\)]+)\)` **-->**匹配括号之间的所有内容

`\d+` **-->**仅限数字

`[a-z]` **-->**仅单个字母

`i` **-->**不区分大小写

# c++ - 如何从本机代码激活 ModernUI 应用程序？

> ID：15495081
> 
> 赞同：-2
> 
> 时间：2013-03-19T08:58:39.463
> 
> 标签：c++, api, microsoft-metro, x86, windows-store-apps

我在modernUI应用程序中执行本机代码（x86），我需要激活应用程序。我找不到这方面的 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:50:07.867

我终于找到了。**IApplicationActivationManager**应该可以解决问题。

# jquery - DataTables 警告：无法解析来自服务器的 JSON 数据。这是由 JSON 格式错误引起的。(ASP.NET)

> ID：15495083
> 
> 赞同：0
> 
> 时间：2013-03-19T08:58:41.547
> 
> 标签：jquery, asp.net-mvc, c#-4.0, datatables

我正在使用 ASP.NET VS2010 和 C#.NET 作为后端语言，我没有使用 MVC。我在从服务器端加载数据时遇到问题。它显示正确的行数但没有数据。我的 JSON 响应是有效的 Json 字符串。

任何人都知道如何解决这个问题？？？？？？？

这是我得到的响应字符串

```
{"sEcho": 1,"iTotalRecords": 2,"iTotalDisplayRecords": 2,"aaData": [{"Name":"IT","DescEn":"Information Technology","DescAr":"testing","CreatedOn":"18-03-2013","CreatedBy":"1"},{"Name":"HR","DescEn":"Human Resource","DescAr":"testing","CreatedOn":"18-03-2013","CreatedBy":"1"}]} 
```

这是html

```
<table id='example' class="datatable">
                <thead>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            DescEn
                        </th>
                        <th>
                            DescAr
                        </th>
                        <th>
                            CreatedOn
                        </th>
                        <th>
                            CreatedBy
                        </th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table> 
```

这是一个JS脚本

```
$(document).ready(function () {
            var oTable = $('#example').dataTable({
                "bProcessing": true,
                "bServerSide": true,
                "bDestroy": true,
                "sPaginationType": "full_numbers",
                "aaSorting": [[1, "desc"]],
                "sAjaxSource": '<%= Page.ResolveClientUrl("Request/GroupPage.aspx") %>',
                "aoColumns": [
           { "aaData": "Name" },
            { "aaData": "DescEn" },
            { "aaData": "DescAr" },
            { "aaData": "CreatedOn" },
            { "aaData": "CreatedBy" }
        ]
            });
        }); 
```

任何人都知道如何解决这个问题？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:09:42.657

请至少在谷歌上搜索解决方案。我想我不必在这里重复相同的答案。

[http://www.datatables.net/forums/discussion/4133/datatables-warning-json-data-from-server-could-not-be-parsed./p1](http://www.datatables.net/forums/discussion/4133/datatables-warning-json-data-from-server-could-not-be-parsed./p1)

[DataTables 警告：无法解析来自服务器的 JSON 数据。这是由 JSON 格式错误引起的](https://stackoverflow.com/questions/8330746/datatables-warning-json-data-from-server-could-not-be-parsed-this-is-caused-by)

[即使 echo 与 DataTables 匹配，JSON 格式错误](https://stackoverflow.com/questions/4221681/json-format-error-even-though-echo-matches-with-datatables)

[http://forums.asp.net/t/1674808.aspx/1](http://forums.asp.net/t/1674808.aspx/1)

[http://forums.xereo.net/threads/datatables-warning-json-data-from-server-not-could-be-parsed-this-is-caused-by-a-json-formatting-e.601/](http://forums.xereo.net/threads/datatables-warning-json-data-from-server-not-could-be-parsed-this-is-caused-by-a-json-formatting-e.601/)

[https://code.google.com/p/cpassman/issues/detail?id=211](https://code.google.com/p/cpassman/issues/detail?id=211)

# c# - 在上下文中的第一个引用处从数据库加载表

> ID：15495089
> 
> 赞同：0
> 
> 时间：2013-03-19T08:58:50.283
> 
> 标签：c#, wcf, entity-framework, entity-framework-4

我正在使用实体框架 4.0。我对数据库做了很多读取操作（数据分析）。不会保存任何数据。目前，尽管有延迟加载，但对数据库服务器的 I/O 操作数量会大大降低应用程序的速度。我决定将大部分小表加载到内存中（`.ToList()`），然后生成计算。有没有办法自动读取表中数据的上下文只是对它的第一次引用并且没有被生命上下文更新？这个想法是，进一步引用这个表并没有查询数据库，只有应用程序的内存。

现在，我使用以下代码：

```
public class cDBReader
{
        private List<RISK_T_MEMBERS> fMembers;

        public List<RISK_T_MEMBERS> Members
        {
            get
            {
                if (fMembers == null)
                    using (RiskEntities context = new RiskEntities(TConfiguration.connectionString))
                    {
                        context.RISK_T_MEMBERS.MergeOption = System.Data.Objects.MergeOption.NoTracking;
                        fMembers = context.RISK_T_MEMBERS.ToList();
                    }

                return fMembers;
            }
            set { fMembers = value; }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:11:18.177

您能否添加更多信息？当前的实施有什么问题？

似乎您需要的是某种缓存。[这是关于缓存](http://blogs.msdn.com/b/jkowalski/archive/2009/06/11/tracing-and-caching-in-entity-framework-available-on-msdn-code-gallery.aspx)的示例实现。

一个更简单（在我看来不太矫枉过正）的方式来实现缓存是[这样](http://blogs.msdn.com/b/alexj/archive/2009/04/22/tip-14-caching-entity-framework-reference-data.aspx)的。

最后但并非最不重要的是您的任何实现（例如您已经制作的那个）。也许单例模式可以在这里帮助你？这是一个单例对象，它全局保存您需要的所有数据，并通过提供当前活动的上下文来实现对数据的**获取，如果数据为空，应用程序将使用活动上下文来获取它们。**一段时间后删除和创建上下文也可以加快应用程序的速度（这就是我认为您应该为 getData 函数提供活动上下文的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:11:24.253

您可以先尝试急切加载而不是延迟加载，以完全控制 EF 加载的内容，然后手动预加载您需要的内容。加载的数据将在一个上下文生命周期内保持活动状态，如果您需要更多并确保数据库是只读的，您可以存储在某处，然后在创建新上下文时附加预加载的数据

# sql-server-2005 - SQL Server 2005 中的增量计数

> ID：15495097
> 
> 赞同：0
> 
> 时间：2013-03-19T08:59:03.770
> 
> 标签：sql-server-2005, counter

我正在使用 SQL Server 2005 处理 Raiser's Edge 数据库。我编写的 SQL 将生成一个包含直接借记分期付款详细信息的临时表。下面是一个小表格，其中包含我要问的问题的关键变量，以及一些虚构的数据：

```
Donor_ID    Instalment_ID    Instalment_Date    Amount 
1234        1111             01/01/2011         £5.00
1234        1112             01/02/2011         £0.00
1234        1113             01/03/2011         £5.00
1234        1114             01/04/2011         £5.00
1234        1115             01/05/2011         £0.00
1234        1116             01/06/2011         £0.00
2345        2111             01/01/2011         £0.00
2345        2112             01/02/2011         £5.00
2345        2113             01/03/2011         £5.00
2345        2114             01/04/2011         £0.00
2345        2115             01/05/2011         £0.00
2345        2116             01/06/2011         £0.00 
```

正如您将看到的，金额列中的一些值为 0.00 英镑。例如，当捐赠者的账户资金不足时，就会发生这种情况。

我想做的是编写一个 SQL 查询，该查询将创建一个字段，其中包含连续 0.00 英镑付款的增量计数，在非 0.00 英镑付款或 Donor_ID 更改后重置。我在下面复制了上面的数据，带有我想看的字段。

```
Donor_ID    Instalment_ID    Instalment_Date    Amount    New_Field
1234        1111             01/01/2011         £5.00     
1234        1112             01/02/2011         £0.00     1
1234        1113             01/03/2011         £5.00
1234        1114             01/04/2011         £5.00
1234        1115             01/05/2011         £0.00     1
1234        1116             01/06/2011         £0.00     2
2345        2111             01/01/2011         £0.00     1
2345        2112             01/02/2011         £5.00
2345        2113             01/03/2011         £5.00
2345        2114             01/04/2011         £0.00     1
2345        2115             01/05/2011         £0.00     2
2345        2116             01/06/2011         £0.00     3 
```

为了帮助澄清我在寻找什么，我认为我想要做的将类似于足球队成绩列表中的连胜场。例如：

```
Opponent     Score    Winning_Streak
Arsenal      1-0      1
Liverpool    0-0
Swansea      3-1      1
Chelsea      2-1      2
Fulham       4-0      3
Stoke        0-0      
Man Utd      1-3
Reading      2-1      1 
```

我考虑了各种选择，但没有取得任何进展。除非我遗漏了一些明显的东西，否则我认为可能需要比我当前的 SQL 编程水平更高级的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:05:23.793

如果我正确地考虑了这个问题，我相信当 Amount 为 0.00 磅时你想要一个行号。

```
Select 0 as As InsufficientCount
       , Donor_ID
       , Installment_ID
       , Amount
From [Table]
Where Amount > 0.00
Union
Select Row_Number() Over (Partition By Donor_ID Order By Installment_ID) 
       , Donor_ID
       , Installment_ID
       , Amount
From [Table]
Where Amount = 0.00 
```

此联合选择应仅在金额等于 0 时为您提供“等级”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:25:21.373

我打电话给你的新领域`streakAmount`

```
ALTER TABLE instalments ADD streakAmount int NULL; 
```

然后，更新值：

```
UPDATE instalments
SET streakAmount =
  (SELECT 
     COUNT(*)
   FROM 
     instalments streak
   WHERE 
     streak.donor_id = instalments.donor_id 
   AND
     streak.instalment_date <= instalments.instalment_date
   AND
   (streak.instalment_date >
    -- find previous instalment date, if any exists
    COALESCE(
      (
        SELECT
          MAX(instalment_date)
        FROM
          instalments prev
        WHERE
          prev.donor_id = instalments.donor_id
        AND
          prev.amount > 0
        AND 
          prev.instalment_date < instalments.instalment_date
      )
     -- otherwise min date
     , cast('1753-1-1' AS date))
    )
  )
WHERE
  amount = 0; 
```

[http://sqlfiddle.com/#!6/a571f/18](http://sqlfiddle.com/#!6/a571f/18)

# xslt - XSLT 1.0: XML to XML conversion - how to transform Unicode to HTML entity?

> ID：15495101
> 
> 赞同：1
> 
> 时间：2013-03-19T08:59:15.423
> 
> 标签：xslt, unicode

I have an input XML that comes from a Unicode system. I have names for products that look like this:

`<MAKTX>Bear &#38; Friends</MAKTX>`

My XSLT transforms XML to XML. In my output the above line looks like this: `<MAKTX>Bear&lt;(&gt;&amp;&lt;)&gt;Friends</MAKTX>`

But I expect `<MAKTX>Bear&amp;Friends</MAKTX>`

I can't change the input XML from my source system. How do I transform the Unicode `&#38;` to the HTML entity `&amp;`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:26:09.640

Firstly there is no need to change anything `&amp;` and `&#38;` are equivalent markup for a `&` in both XML and HTML.

If you use

```
<xsl:output method="html"/> 
```

Then some processors are more likely to use the named form but it is not under your direct control from XSLT just as you can not directly control whether `"` or `'` is used around attribute values, it is just a syntactic variation that no HTML system should care about.

# internet-explorer-9 - 当我在 ie9 的 tinymce 编辑器中粘贴一个单词时，它会进入下一行

> ID：15495108
> 
> 赞同：1
> 
> 时间：2013-03-19T08:59:23.513
> 
> 标签：internet-explorer-9, tinymce

在 ie9 的 tinymce 编辑器中键入一个单词并将其复制并粘贴到同一行，但粘贴适用于 ext 行。我希望该单词应该在同一行附近且位于同一行上。请给出解决方案

例如：输入'test job'并复制粘贴它..然后结果应该在testjobtest job中

但我明白了

```
<P>test job<p>
<p>test job</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:57:01.823

在这种情况下，您正在应对`<p>test job<p>`这将让编辑器创建一个新段落。看起来你想要的是摆脱不需要的标签。有关此任务的解决方案，请查看[此处](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text/4122969#4122969)。[您可以使用paste_preprocess 配置设置](http://www.tinymce.com/wiki.php/Plugin:paste)来定义粘贴内容会发生什么。

# hibernate - 具有非常量参数的自定义约束

> ID：15495111
> 
> 赞同：1
> 
> 时间：2013-03-19T08:59:28.000
> 
> 标签：hibernate, jakarta-ee, bean-validation

我想创建一个新约束来验证输入，但它需要知道相同形式的其他输入的值。我看到使用 @interface 注释创建的自定义约束只接受常量表达式作为参数。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:01:06.397

您可以编写类级别约束，也可以使用提到的@ScriptAssert。在前者中，您将约束置于类级别，并将整个实例传递给*isValid*。然后，您可以检查您喜欢的任何值并进行检查。

另一种方法是使用 @ScriptAssert 提供的 Hibernate Validator（再次在类级别，以便整个实例绑定到脚本上下文中）。然后，您可以使用您选择的脚本语言（例如 JavaScript）编写检查。当然，脚本引擎必须在您的运行时环境中可用。

# objective-c - 鉴于 UIBarButton 没有 Selected 属性，如何使 UIBarButton 用作开关

> ID：15495113
> 
> 赞同：0
> 
> 时间：2013-03-19T08:59:38.267
> 
> 标签：objective-c, xcode4.5, uibarbuttonitem

使用普通按钮，您可以做到

btn.selected = !btn.selected。

我将如何使用 UIBarButton 将其拉出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:10:08.637

您可以在 UIBarItem 中使用自定义按钮，只需使用您的按钮即可。

```
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:self.yourButton]

[self.navigationItem setRightBarButtonItem:barButton]; 
```

然后：

```
 self.yourButton.select = !self.yourButton.select; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:14:05.430

您可以使用自定义视图创建 UIBarButtonItem

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:normalImage forState:UIControlStateNormal];
[button setImage:selectedImage forState:UIControlStateSelected];
[button addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

然后

```
-(void)btnClick:(id)sender{
UIBarButtonItem *item = (UIBarButtonItem *)sender;
UIButton *button = (UIButton *)item.customView;
[button setIsSelected:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:08:01.723

想法 1\. 如果您在 IB 中创建界面，请尝试将标准 UIButton 对象拖到 UIToolbar 中。这应该将 UIButton 封装在 UIBarButton 中。将 UIBarButton 对象设置为普通的。像往常一样为一切创建出口。然后，您可以使用标准按钮以及工具栏中的所有可爱的标准内容，例如选定状态。

想法 2。我几乎放弃了使用工具栏，因为您发现控件不灵活。现在我只是用 UIViews 替换 UIToolbar 的实例，如果代码需要管理旋转、调整大小等，我会做少量的工作......我发现它更灵活，让我更轻松地包含其他控件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T09:14:12.903

不可能立即通过 UIBarButtonItem 获得选定的属性。但是您可以通过放置 UIButton 并像 UIBarbutton 一样对其进行自定义来实现这一点。此链接对您将更有用...[如何以编程方式获取 UIBarButtonItems 的状态？](https://stackoverflow.com/questions/11209689/how-do-i-programmatically-get-the-state-of-uibarbuttonitems)

# c++ - C ++实例化结构错误，为什么不允许这样做？

> ID：15495123
> 
> 赞同：1
> 
> 时间：2013-03-19T09:00:21.523
> 
> 标签：c++, mingw

我在我的程序中使用以下结构。

```
struct terminator{
    int id;
    string type;
    union{
        terminator *next;
        int empty;
    };
}; 
```

在主要我有以下代码：

```
int main(){
    terminator root = {0, "", NULL};
    root = {0, "", NULL}; //NOT ALLOWED WHY? Trying to set to its original value.
} 
```

这给出了以下错误消息：

```
g++ lab8.cc -std=c++11
lab8.cc: In function 'int main()':
lab8.cc:78:21: error: no match for 'operator=' in 'root = {0, "", 0}'
lab8.cc:78:21: note: candidates are:
lab8.cc:6:8: note: terminator& terminator::operator=(const terminator&)
lab8.cc:6:8: note:   no known conversion for argument 1 from '<brace-enclosed in
itializer list>' to 'const terminator&'
lab8.cc:6:8: note: terminator& terminator::operator=(terminator&&)
lab8.cc:6:8: note:   no known conversion for argument 1 from '<brace-enclosed in
itializer list>' to 'terminator&&' 
```

但这没关系：

```
int main(){
    terminator root = {0, "", NULL};
    root = *(new terminator);
    root.id=0;
    root.type="";
    root.next=NULL;
} 
```

为什么会这样？有什么办法绕过它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:03:15.907

在第一种情况下，您正在**初始化**结构。

在第二种情况下，您试图**分配**给已声明的变量，除非您的编译器支持复合文字作为扩展，否则这将不起作用。（即使是这样，你也需要写

```
root = (terminator){ 0, "", NULL }; 
```

使其真正发挥作用。）

**如果您可以使用 C++11**（您似乎可以使用），您还可以利用名为“初始化器列表”的新功能，该功能具有类似的语法：

```
root = terminator{ 0, "", NULL }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:02:45.397

您需要告诉编译器 RHS 的类型为`terminator`：

```
root = terminator{0, "", NULL}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:04:06.433

该行`terminator root = {0, "", NULL};`进行聚合初始化，这是在没有构造函数的情况下允许的一种构造形式。`=`那里并不真正意味着分配。在 C++11 中，您可以使用大括号语法构造类型为 的匿名临时对象`terminator`，然后您可以将其分配给`root`：

```
root = terminator{0, "", nullptr}; 
```

# android - 有什么方法可以从 SQLite 中提取查询？

> ID：15495128
> 
> 赞同：2
> 
> 时间：2013-03-19T09:00:33.430
> 
> 标签：android, sqlite, android-sqlite

我正在尝试在我的应用程序中创建某种备份和恢复功能。在此之前，我已经阅读了一段时间以了解是否可以实现，但我发现了这个问题： [Sqlite DB Android Backup/Restore](https://stackoverflow.com/questions/10401011/sqlite-db-android-backup-restore)

> 我能看到的唯一另一种方法是读取数据库的实际内容并生成一个包含可以从中恢复的 SQL 的文件，这显然是一个更复杂的并且不提供任何优势证明这种复杂性是合理的。

我认为，这个答案是实现这一目标的最佳方式；不探索 .db 文件，而是导出查询。

你知道; 当您从 mysql 导出 SQL 数据时，您会得到一个文件，其中包含创建结构的所有查询以及用数据填充结构的查询。

这就是我试图模仿的；从 .db 文件生成一个包含 sql 查询的文件。

你们认为有可能吗，我的意思是，是否有任何内置方法可以实现这一目标？

否则，如果它太难处理，你如何避免这个用户（[https://stackoverflow.com/a/10842043/1943607](https://stackoverflow.com/a/10842043/1943607)）正在谈论什么？

> 因此，我使用“PRAGMA journal_mode = DELETE”禁用了 WAL，然后我能够在浏览器中查看数据库并能够在我的测试设备上恢复它。

前一段，看不懂 这是您设置为 sqlite 的配置吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:30:58.840

我实际上并没有用 sqlite 尝试过这个，但是使用 mysql 你可以做一些事情，比如创建你的数据库的“转储”。这些转储包含您所描述的内容：一组查询，当它们一起执行时，重新创建数据库，包括内容。

从[http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)上的“sqlite3”文档（尤其是“将整个数据库转换为 ASCII 文本文件”部分）来看，您可以对 sqlite 执行相同的操作。由于您可以从 java 应用程序执行 shell 命令（使用 Runtime.getRuntime().exec() 方法），并且您是数据库的“所有者”（Linux 用户 ID），因此您应该能够运行这个“sqlite3 .转储”命令，即使在非根设备上。我从未见过没有安装 sqlite3 工具的 Android 设备，因此该命令应该始终可用。

此外，由于转储文件只是一个文本文件，因此您应该能够在其前面添加兼容性所需的任何 PRAGMA（如您引用的那个）。

我没有测试过这些，只是想和你一起思考这个有趣的话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:11:38.353

sqlite 数据库只是一个文件，因此您可以复制该文件，但我认为您可能在 android 中存在权限问题，阻止您访问数据库。

IMO 更好的解决方案是将您的数据同步到外部网站。将自定义同步适配器和帐户管理器与具有 RESTfull api 来接收和发送同步数据的网站或 Web 服务结合使用将是最可靠的方法。

[http://developer.android.com/training/id-auth/identify.html](http://developer.android.com/training/id-auth/identify.html)是设置客户经理的一个很好的介绍。

对于自定义同步适配器，这是一个很好的起点。 [http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/) 和[http://www.c99.org/2010/01/23/writing-an -android-sync-provider-part-2/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/)

最后解释一下它们是如何组合在一起 的[https://sites.google.com/site/andsamples/concept-of-syncadapter-androidcontentabstractthreadedsyncadapter](https://sites.google.com/site/andsamples/concept-of-syncadapter-androidcontentabstractthreadedsyncadapter) 上述方法将使用户能够同时切换手机并保留数据，并且数据将始终是最新的（如果您在适当的时间同步。

这似乎需要做很多工作，因为您需要设置 Web 服务，但这是确保数据安全可靠并且可以随时恢复和备份的最佳方式。

对于网络服务，您可以使用许多选项，包括云服务（例如 Google 文档）或编写自己的网站。Ruby on Rails 是开发您自己的网站的绝佳解决方案，因为您可以开箱即用地获得完整的 RESTfull api；只需几行代码，就可以很容易地将 Rails 网站保护/锁定给授权用户，并且使用 Heroku，您可以获得免费托管。

像往常一样，Android 开发中最简单的需求实际上最终是最难实现的，但是在数据安全至高无上的情况下，正确地完成它是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:54:38.830

这个问题太开放而无法回答，因为可能适用于 db 文件内容的更改是开放的，并且无法保证特定的行为。

从好的方面来说，sqlite 项目是一个开源项目，并且指定了 DB 文件的格式[Here](http://www.sqlite.org/fileformat.html)

**在那里看了之后，解析任何寻找Data Only**的 DB 文件并将其写入/转储到另一个功能性 db 文件似乎很有可能/不太复杂。

我相信这是解决手头问题的最快和最干净的解决方案。

所以总结一下：

*   每次要备份时复制数据库文件。
*   当您想要使用 Android API 恢复创建新数据库时。
*   从备份文件中解析数据并将它们写入新创建的数据库。

PS：关于如何使用

> PRAGMA journal_mode = DELETE

只需`db.exec("PRAGMA journal_mode = DELETE");`在创建数据库时使用

# java - 如何在使用大量记录时使用 Hibernate 更快地进行更新

> ID：15495132
> 
> 赞同：1
> 
> 时间：2013-03-19T09:00:51.370
> 
> 标签：java, sql-server-2008, hibernate, indexing, hql

我在使用具有大量记录的休眠更新 (Session.update()) 部分时遇到问题。它变得非常慢。但插入 (Session.insert()) 部分没有问题。有没有办法在我们更新十万条记录时进行更新部分。有没有办法调整 sql 服务器，以便更新变得更快。当我们向所有主要字段添加单独的索引时，删除部分需要时间。有没有更好的方法来调整 sql server 使其在插入、删除和更新方面表现良好。

谢谢你，赛义夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:12:16.210

对每条记录进行批量更新而不是单独更新。这样，您只需为所有记录访问数据库一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:25:51.310

当您进行保存时，仅将数据保存到数据库中，而当您更新记录时，它必须首先执行搜索操作然后更新记录，这就是为什么您在处理大量数据时面临更新问题而不是保存问题的原因的记录可以使用hibernate的**BATCH PROCESSING**来更新你的记录。这是从教程点开始在休眠中进行批处理的一个很好的链接：

[http://www.tutorialspoint.com/hibernate/hibernate_batch_processing.htm](http://www.tutorialspoint.com/hibernate/hibernate_batch_processing.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:26:01.197

可能还有其他解决方案，但我知道的一种方法是：

每当您通过 保存或更新实例时`session (e.g. session.save(), session.update(), session.saveOrUpdate() etc.)`，它也会更新实例 FK 关联。

因此，如果您的 POJO 有多个 FK 关联，它也会触发对这些表的查询。

因此，我建议不要以这种方式更新实例，而是使用 HQL（如果它适用于您的要求）来保存或更新实例。

# sql - 获取每件商品的最新价格

> ID：15495133
> 
> 赞同：1
> 
> 时间：2013-03-19T09:00:51.417
> 
> 标签：sql, ms-access, greatest-n-per-group

我有一张桌子：

```
ItemID PurchaseDate Price  
001 03/17/2013 19.00  
002 03/17/2013 14.00  
001 03/18/2013 13.00  
002 03/18/2013 15.00  
001 03/19/2013 17.00  
003 03/19/2013 19.00 
```

我需要编写一个`SQL query`来获取`Price`每个. 表中的条目可能不一定按日期顺序输入，如下所示： `PurchaseDate``ItemID`

```
ItemID PurchaseDate Price  
001 03/19/2013 17.00  
002 03/18/2013 15.00  
003 03/19/2013 19.00 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T09:03:25.167

子查询背后的想法是它分别获取`PurchaseDate`每个`ItemID`. 如果子查询的结果在两个条件下匹配，则它会重新连接到表中：`ItemID`和`PurchaseDate`。

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  ItemID, MAX(PurchaseDate) max_date
            FROM     TableName
            GROUP   BY ItemID
        ) b ON  a.ItemID = b.ItemID AND
                a.PurchaseDate = b.max_date 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:11:04.950

```
-- WITH clause, works with Oracle.
-- I added this clause to dynamically run the SELECT statement without any DDL.
-- Ignore this section for use on MS Access
WITH v AS (
  SELECT 001 ItemID, TO_DATE('03/17/2013', 'MM/DD/YYYY') PurchaseDate, 19.00 Price FROM dual
  UNION ALL
  SELECT 002, TO_DATE('03/17/2013', 'MM/DD/YYYY'), 14.00 FROM dual
  UNION ALL
  SELECT 001, TO_DATE('03/18/2013', 'MM/DD/YYYY'), 13.00 FROM dual
  UNION ALL
  SELECT 002, TO_DATE('03/18/2013', 'MM/DD/YYYY'), 15.00 FROM dual
  UNION ALL
  SELECT 001, TO_DATE('03/19/2013', 'MM/DD/YYYY'), 17.00 FROM dual
  UNION ALL
  SELECT 003, TO_DATE('03/19/2013', 'MM/DD/YYYY'), 19.00 FROM dual
)
-- The WITH clause was upto here.
-- Below starts the main query which works on most platforms including MS Access.
-- I have referenced to the same table "v" two times - v_in and v_out.
-- You will need to change the "v" with your table name.
  SELECT v_out.itemid, v_out.purchasedate, v_out.price
    FROM v v_out
   WHERE EXISTS (SELECT 1
                   FROM v v_in
                  WHERE v_in.itemid = v_out.itemid
               GROUP BY v_in.itemid
                 HAVING MAX(v_in.purchasedate) = v_out.purchasedate)
ORDER BY v_out.itemid
; 
```

# php - 将数据从网站发送到 Android 应用程序

> ID：15495134
> 
> 赞同：0
> 
> 时间：2013-03-19T09:00:52.590
> 
> 标签：php, android

我正在开发一个基于位置的 android 应用程序，我希望应用程序在我使用网页上的按钮请求时向我发送服务器上的位置数据。那么如何从我的网站向 android 应用程序发送信号，以便它仅在我发送请求时才开始运行？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:02:24.490

谷[歌云消息服务](http://developer.android.com/google/gcm/index.html)将是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:04:30.120

基本上，您的项目中需要[推送通知](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDgQFjAC&url=http%3A%2F%2Fwww.androidhive.info%2F2012%2F10%2Fandroid-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql%2F&ei=xSlIUenBEszprQfmx4DwBg&usg=AFQjCNFwsOBVunF1KdDkDjt1rVUfI4iN5w&bvm=bv.43828540,d.bmk&cad=rja)。推送通知将允许您从网站发送信号，该信号将在移动端捕获并执行相应操作。

# design-patterns - 观察者和一个主题的模式

> ID：15495135
> 
> 赞同：1
> 
> 时间：2013-03-19T09:00:54.860
> 
> 标签：design-patterns, observer-pattern

如果我只有一个观察者一直在观察一个主题，我还使用观察者模式吗？

还是有另一种更适合上述情况的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:10:20.453

观察者模式仍然适用。但是模式不是一成不变的，如果你不需要观察者的集合，你可以稍微简化一下：实现观察者-->主题关联为 1:1

# javascript - 跟踪详细用户行为的 Javascript 框架？

> ID：15495138
> 
> 赞同：3
> 
> 时间：2013-03-19T09:01:11.317
> 
> 标签：javascript, frameworks

是否有 Javascript 框架来跟踪网页上的详细用户行为？

比如用户点击哪个链接进入哪个页面，用户是否在输入控件中输入数据等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:04:34.300

有一个名为[Mixpanel](https://mixpanel.com/docs/integration-libraries/javascript#js)的流行服务可以满足您的需求。

> “Mixpanel 是一种高级分析服务，通过跟踪用户如何与他们互动和互动来帮助改进 Web 和移动应用程序。”

每个事件发送数据只需要 1 行代码。只需一点代码，您就可以轻松跟踪任何类型的用户交互，例如按钮点击、菜单使用或用户注册。

**这是使用 MixPanel 跟踪按钮点击的示例**：

```
$("#my_button").click(function() {
    // This sends us an event every time a user clicks the button
    mixpanel.track("Button clicked"); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:01:40.140

用谷歌分析怎么样？比如事件轨迹。 [谷歌分析](http://www.google.com/analytics/)

# nservicebus - 如何使用分发服务器配置二级重试

> ID：15495144
> 
> 赞同：0
> 
> 时间：2013-03-19T09:01:25.737
> 
> 标签：nservicebus

我是否必须在分发服务器上启用二级重试，或者在每个工作人员上启用二级重试就足够了？timeout-manager 正在分发服务器上运行，并且已在每个工作人员上禁用。我的理论是我只需要对工作人员启用二级重试，这些工作人员会将他们的重试发送到位于分配器上的超时管理器地址。分发器不作为主服务器运行，它只运行超时管理器并执行消息分发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:28:30.207

SLR 应该在工作节点上，因为它们与 FLR 一起工作。就像你说的那样，分发者就是这样做的——执行消息分发。分配器上不应该有任何实现/处理。最终，如果出现问题，您的消息将全部出现在所有工作人员的单个错误队列中。

# java - 反序列化时的 InvalidClassException 和 IllegalAccessException

> ID：15495148
> 
> 赞同：0
> 
> 时间：2013-03-19T09:01:38.987
> 
> 标签：java, android, serialization, deserialization

我序列化了一个扩展 LinearLayout 的类，如下面的代码片段所示。在反序列化时，我遇到了上述异常。在[这个](https://stackoverflow.com/questions/11908353/illegalaccessexception-serialization-of-object-that-inherits-from-non-serializ)链接中，序列化 ImageView 是不可能的（对于所有其他视图，我猜也是）。那么，是否有任何替代方案，或者我必须使用 SQLite 数据库本身？建议或线索表示赞赏。

```
public class MyClass extends LinearLayout implements java.io.Serializable {

private static final long serialVersionUID = 1L;

private String mThemeImageName;
private ArrayList<STCharacter> mCharacterList;
private String mStoryText;
private int mSceneNumber;
private boolean mIsSceneHasCharacters;

public STScene(Context context) {
    super(context);
}

public STScene(Context context, AttributeSet attrs) {
    super(context, attrs);
}

//getters and setters below 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:12:14.430

我认为这里的问题是您尝试序列化/反序列化复杂类，而不是使用“简单”数据类作为 LinearLayout 中的字段。

因此，引入一个数据持有者（类），您可以对其进行序列化/反序列化（并单独测试），并将其作为属性添加到线性布局中。

# linux - 用于测试的伪串行连接

> ID：15495149
> 
> 赞同：1
> 
> 时间：2013-03-19T09:01:42.610
> 
> 标签：linux, serial-port

有一个应用程序写入串行连接并从串行连接读取。我正在测试它，无法更改它。我的测试环境包含两台计算机和两台计算机上的应用程序通过串行连接相互发送一些东西。我想创建一个伪串行连接，以便仅在一台计算机上进行测试。因此，一个应用程序将写入该伪串行连接，而位于同一台计算机上的另一个应用程序将读取它。

这样的伪串行连接可能吗？我的测试计算机只有一个串行连接，但如果需要，我可以使用具有两个串行连接的虚拟机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:13:09.227

我找到了这个com0com。[http://sourceforge.net/projects/com0com/files/com0com/3.0.0.0/](http://sourceforge.net/projects/com0com/files/com0com/3.0.0.0/)

它将创建两个虚拟串行端口。您可以使用两个 Putty 窗口对其进行测试。只是选择了不同的 COM 端口。让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:45:26.553

您可以使用 USB 转 RS232 适配器来获得额外的 COM 端口。用零调制解调器电缆将两个 COM 端口连接在一起。然后您的测试程序可以打开一个端口并与您的被测应用程序通信。

# ruby-on-rails - Rails 路由 - 从已安装的引擎访问控制器

> ID：15495153
> 
> 赞同：1
> 
> 时间：2013-03-19T09:01:52.597
> 
> 标签：ruby-on-rails

我想在我的路线中使用控制器的操作。问题是控制器在引擎中。有可能这样做吗？

更具体地说：该应用程序曾经将博客功能作为插件，但在升级到 Rails 3.2 后，该功能被封装到引擎中。

它安装在“/blog”子域下。由于关于博客的“/blog”前缀 url 发生了变化，谷歌的 FeedBurner 似乎不支持博客 rss 提要的重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:52:18.713

您可以将您的收集操作包装在“/ blog”范围内，只是一个想法

```
scope '/blog' do
 get 'your_action' => "your_controller#collection_action"
end 
```

rake 路由

```
your_action GET    /blog/your_action(.:format)                                  {:action=>"collection-action", :controller=>"your_controller"} 
```

# java - JAXB - Java/ XMLValue & XMLElement 冲突

> ID：15495156
> 
> 赞同：5
> 
> 时间：2013-03-19T09:01:55.633
> 
> 标签：java, jaxb

我有下一个要解析的 html：

```
My input: 
<div>
    <span id="x1x1"> bla bla </span>
</div>
<span>
    <div> bla bla </div>
</span>

My output in java:
    jaxbContext = JAXBContext.newInstance(Div.class);
    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
    jaxbUnmarshaller.unmarshal(file);
    System.out.println("id " + div1.getSpan().get(0).get(id) + "value " + div1.getSpan().get(0).get(id))
    // should print: id = x1x1 value = bla bla 
```

我有下一节课：

```
public class Span
    List<Div> div;

    public List<Div> getDiv() {
        return div;
    }

    @XmlElement
    public void setDiv(List<Div> div) {
        for (int i = 0 ; i<div.size(); i++){
            System.out.print("element")}
        this.div = div;
    } 
```

和：

```
public class Div 
    List<Span> span = div1.get

    @XmlElement
    public void setSpan(List<Span> span) {
        for (int i = 0 ; i<span.size(); i++){
            System.out.print("element")}
        this.span = span;
    }

    public List<Button> getSpan() {
        return span;
    } 
```

现在，我还想要跨度的值（“bla bla”）。所以我添加到课程中`Span`：

```
String value;

public String getValue() {
    return value;
}

@XmlValue
public void setValue(String value) {
    this.value = value;
} 
```

它给了我下一个错误：

```
 If a class has '@XmlElement' property, it cannot have '@XmlValue' property. 
```

我尝试使用@XMLMixed，但没有成功。例如，我会很高兴使用代码示例。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T14:58:46.110

**更新**

可以同时具有文本和元素的子注释的任何元素都被称为具有混合内容。在 JAXB 中，这对应于`@XmlMixed`注解。 `@XmlMixed`可以在集合属性上单独使用（请参阅原始答案）或与`@XmlAnyElement`、`@XmlElementRef`或结合使用`@XmlElementRefs`。如果该元素可以是您将使用的任何元素`@XmlAnyElement`，如果它是您将使用的`@XmlElementRef`一种已知元素并且您使用的已知元素不止一种`@XmlElementRefs`。

**跨度**

如果`div`在同一个 span 元素中同时存在文本和元素，您可以通过同时使用`@XmlElementRef`和注释属性来执行以下操作`@XmlMixed`。注释上指定的元素名称`@XmlElementRef`必须直接对应于为目标类指定的根元素。

```
@XmlRootElement
public class Span {

    List<Object> items = new ArrayList<Object>();

    @XmlMixed
    @XmlElementRef(type=Div.class, name="div")
    public List<Object> getItems() {
        return items;
    }

    public void setItems(List<Object> mixed) {
        this.items = items;
    }

} 
```

**分区**

的元数据`Div`几乎与为 指定的元数据相同`Span`。

```
@XmlRootElement
public class Div {

    List<Object> items = new ArrayList<Object>();

    @XmlElementRef(name="span", type=Span.class)
    @XmlMixed
    public List<Object> getItems() {
        return items;
    }

    public void setItems(List<Object> items) {
        this.items = items;
    }

} 
```

**演示**

```
public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Span.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Span span = (Span) unmarshaller.unmarshal(new StringReader("<span>Text<div>Text2</div>Text3</span>"));
        System.out.println(span.getItems());

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(span, System.out);
    }

} 
```

**输出**

```
[Text, forum15495156.Div@289f6ae, Text3]
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<span>Text<div>Text2</div>Text3</span> 
```

* * *

**原始答案**

你可以在你的类中添加一个`List<String>`带有注释的属性：`@XmlMixed``Span`

**跨度**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Span {
    List<Div> div;
    List<String> mixed;

    @XmlMixed
    public List<String> getMixed() {
        return mixed;
    }

    public void setMixed(List<String> mixed) {
        this.mixed = mixed;
    }

    public List<Div> getDiv() {
        return div;
    }

    @XmlElement
    public void setDiv(List<Div> div) {
        for (int i = 0; i < div.size(); i++) {
            System.out.print("element");
        }
        this.div = div;
    }
} 
```

**演示**

```
import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Span.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Span span1 = (Span) unmarshaller.unmarshal(new StringReader("<span>bla bla bla</span>"));
        System.out.println(span1.getMixed());

        Span span2 = (Span) unmarshaller.unmarshal(new StringReader("<span><div/><div/></span>"));
        System.out.println(span2.getDiv());
    }

} 
```

**输出**

```
[bla bla bla]
elementelement[forum15495156.Div@1f80ce47, forum15495156.Div@4166a779] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:22:07.170

# 从示例 XML 文档创建带注释的 JAXB 类

通常，您需要与 JAXB 绑定的 XML 文档不附带内容的 XSD，但是如果您有 XSD，那么有一些很好的工具可以自动完成这项工作。这是我用来快速填补这一空白并获得高质量绑定代码的过程。希望这有助于回答这个问题，并为这类问题提供一个通用的解决方案。

## 高级流程

这是我用来为这段随机的 XML 创建代码的过程：

1.  获得一个高质量的例子。
2.  [使用名为Trang](http://www.thaiopensource.com/relaxng/trang.html)的工具从示例中创建一个 XSD 。
3.  从 XSD 生成绑定代码。

整个过程花了我不到 5 分钟的时间，预先安装了工具，并产生了高质量的结果。这是一个非常简单的示例，但是示例 XML 文档的复杂性很容易增加，而不会增加处理时间或降低质量。

## 创建一个高质量的例子

示例文档是此过程中最重要的部分。对于更复杂的结构，您可能需要多个文档来捕获您需要的信息，但我们将坚持使用单个文档案例。`<div/>`我们可以通过将提供的输入包装在, 中来创建一个名为 的文件来为问题举例`example.xml`：

```
<div>
  <div>
    <span id="x1x1"> bla bla </span>
  </div>
  <span>
    <div> bla bla </div>
  </span>
</div> 
```

此示例演示了`<div/>`s 和`<span/>`s 可以相互嵌套并包含内容。

> 注意：此 HTML 片段无效，因为块级元素不能嵌套在内联元素中。一个“现成的”模式，以及由此生成的代码，可能会在这个输入上窒息。

## 从示例创建 XSD

这是此过程中的伏都教步骤。手动创建 XSD 会带来大量工作和出错的可能性。如果没有自动化过程，您不妨放弃生成器的复杂性并手动编码注释。幸运的是，有一个名为[Trang](http://www.thaiopensource.com/relaxng/trang.html)的工具可以填补这一空白。

[Trang](http://www.thaiopensource.com/relaxng/trang.html)可以做很多事情，但它擅长的一项任务是从 XML 文档生成 XSD。对于简单的结构，它可以完全处理这一步。对于更复杂的输入，它可以帮助您完成大部分工作。

Trang 可从[Maven Central](http://search.maven.org/#search%7Cga%7C1%7Ctrang)在此向量中获得：

```
<dependency>
  <groupId>com.thaiopensource</groupId>
  <artifactId>trang</artifactId>
  <version>20091111</version>
</dependency> 
```

`example.xml`您可以使用以下命令下载和转换文档：

```
wget http://repo1.maven.org/maven2/com/thaiopensource/trang/20091111/trang-20091111.jar
java -jar trang-20091111.jar example.xml example.xsd 
```

这产生`example.xsd`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="div">
    <xs:complexType mixed="true">
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element ref="div"/>
        <xs:element ref="span"/>
      </xs:choice>
    </xs:complexType>
  </xs:element>
  <xs:element name="span">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" ref="div"/>
      </xs:sequence>
      <xs:attribute name="id" type="xs:NCName"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

对于简单的文档，通常只需要这些即可。对于更复杂的结构，您可能需要稍微编辑此文件，但至少您有一个可以工作的 XSD 作为起点。

## 从 XSD 生成绑定代码

现在我们有了 XSD，我们可以利用[XJC](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)工具并生成我们正在寻找的绑定代码。要运行 XJC，请将 XSD、要创建的包和 src 目录传递给它。这两个命令将`example.xsd`在一个名为的包中生成代码`example`：

```
mkdir src
xjc -d src -p example example.xsd 
```

现在，您将在目录中拥有以下文件`src`：

```
src/example/Div.java
src/example/ObjectFactory.java
src/example/Span.java 
```

我在本文末尾包含了文件的内容，但这是我们感兴趣的部分，来自`Span.java`：

```
@XmlElementRefs({
    @XmlElementRef(name = "div", type = Div.class),
    @XmlElementRef(name = "span", type = Span.class)
})
@XmlMixed
protected List<Object> content; 
```

尽管手动编码注释可以工作，但自动创建这些文件可以节省时间并提高质量。它还允许您访问所有可用于 XJC 工具的插件。

* * *

## XJC生成的完整文件

示例/Div.java：

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2013.03.22 at 01:15:22 PM MST 
//

package example;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlElementRefs;
import javax.xml.bind.annotation.XmlMixed;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for anonymous complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType>
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;choice maxOccurs="unbounded" minOccurs="0">
 *         &lt;element ref="{}div"/>
 *         &lt;element ref="{}span"/>
 *       &lt;/choice>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "content"
})
@XmlRootElement(name = "div")
public class Div {

    @XmlElementRefs({
        @XmlElementRef(name = "div", type = Div.class),
        @XmlElementRef(name = "span", type = Span.class)
    })
    @XmlMixed
    protected List<Object> content;

    /**
     * Gets the value of the content property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the content property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getContent().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link Div }
     * {@link String }
     * {@link Span }
     * 
     * 
     */
    public List<Object> getContent() {
        if (content == null) {
            content = new ArrayList<Object>();
        }
        return this.content;
    }

} 
```

例子/Span.java

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2013.03.22 at 01:15:22 PM MST 
//

package example;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlMixed;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlSchemaType;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.adapters.CollapsedStringAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

/**
 * <p>Java class for anonymous complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType>
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element ref="{}div" maxOccurs="unbounded" minOccurs="0"/>
 *       &lt;/sequence>
 *       &lt;attribute name="id" type="{http://www.w3.org/2001/XMLSchema}NCName" />
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "content"
})
@XmlRootElement(name = "span")
public class Span {

    @XmlElementRef(name = "div", type = Div.class)
    @XmlMixed
    protected List<Object> content;
    @XmlAttribute
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "NCName")
    protected String id;

    /**
     * Gets the value of the content property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the content property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getContent().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link Div }
     * {@link String }
     * 
     * 
     */
    public List<Object> getContent() {
        if (content == null) {
            content = new ArrayList<Object>();
        }
        return this.content;
    }

    /**
     * Gets the value of the id property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getId() {
        return id;
    }

    /**
     * Sets the value of the id property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setId(String value) {
        this.id = value;
    }

} 
```

示例/ObjectFactory.java

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2013.03.22 at 01:15:22 PM MST 
//

package example;

import javax.xml.bind.annotation.XmlRegistry;

/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the example package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: example
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link Div }
     * 
     */
    public Div createDiv() {
        return new Div();
    }

    /**
     * Create an instance of {@link Span }
     * 
     */
    public Span createSpan() {
        return new Span();
    }

} 
```

# c# - 部署已发布应用程序时出现 System.ArgumentException

> ID：15495160
> 
> 赞同：0
> 
> 时间：2013-03-19T09:02:19.120
> 
> 标签：c#, clickonce, syncfusion

我对已部署的应用程序有疑问，该问题似乎与某些 Syncfusion 组件有关。

```
Syncfusion.Core
Syncfusion.Shared.Wpf 
```

如果我没有将它们包含在我使用 Visual Studio (2012) 创建的已发布包中，那么当我部署并尝试运行该应用程序时，我会收到一条错误消息，指出需要在 GAC 中安装 Syncfusion.Core。

在 Synfusion 站点上，它说我可以安装到 GAC 或将 dll 包含在包中。因此，如果我在已发布的打包文件中包含 dll 文件，我现在在运行应用程序时会收到以下错误。

```
ERROR DETAILS
Following errors were detected during this operation.
* [19/03/2013 08:49:00] System.ArgumentException
    - Value does not fall within the expected range.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.NativeMethods.CorLaunchApplication(UInt32 hostType, String applicationFullName, Int32 manifestPathsCount, String[] manifestPaths, Int32 activationDataCount, String[] activationData, PROCESS_INFORMATION processInformation)
        at System.Deployment.Application.ComponentStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.SubscriptionStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.ApplicationActivator.Activate(DefinitionAppId appId, AssemblyManifest appManifest, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.ApplicationActivator.ProcessOrFollowShortcut(String shortcutFile, String& errorPageUrl, TempFile& deployFile)
        at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
        at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)

COMPONENT STORE TRANSACTION DETAILS
No transaction information is available. 
```

关于错误原因的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:33:17.563

是的，您可以将 Syncfusion 程序集安装到 GAC 位置，或者将程序集与软件包一起提供。

为了解决报告的错误，您能否参考下面提到的知识库文章？

[http://www.syncfusion.com/support/kb/2110](http://www.syncfusion.com/support/kb/2110)

注意：Syncfusion 已从 8.2.0.x 版本中删除了所有 Essential Studio 产品的运行时许可。因此，不需要在使用最新版本程序集的项目中嵌入 license.licx 文件。

如果您有任何疑问，请告诉我们。

问候， Sivaguru S

# c# - 如何以正确的方式初始化 KeyValuePair 对象？

> ID：15495165
> 
> 赞同：83
> 
> 时间：2013-03-19T09:02:30.167
> 
> 标签：c#, initialization

我在（除其他外）[这个问题](https://stackoverflow.com/questions/11694910/how-do-you-use-object-initializers-for-a-list-of-key-value-pairs)中看到人们想知道如何初始化*KeyValuePair*的实例，预计应该是这样的。

```
KeyValuePair<int, int> keyValuePair = new KeyValuePair<int, int>
{ 
  Key = 1,
  Value = 2
}; 
```

它不起作用，好像属性不存在一样。Intead，我需要像这样使用构造函数。

```
KeyValuePair<int, int> keyValuePair = new KeyValuePair<int, int>(1, 2); 
```

诚然，语法较短，但令我困扰的是我不能使用初始化程序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-19T09:08:16.547

你没有错，你必须使用初始化一个 keyValuePair

```
KeyValuePair<int, int> keyValuePair = new KeyValuePair<int, int>(1, 2); 
```

您不能使用对象初始化语法即 { Key = 1, Value = 2 } 的原因是因为 Key 和 Value 属性没有设置器，只有获取器（它们是只读的）。所以你甚至不能这样做：

```
keyValuePair.Value = 1; // not allowed 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-09-19T22:14:15.733

字典有紧凑的初始化器：

```
var imgFormats = new Dictionary<string, ChartImageFormat>()
{
    {".bmp", ChartImageFormat.Bmp}, 
    {".gif", ChartImageFormat.Gif}, 
    {".jpg", ChartImageFormat.Jpeg}, 
    {".jpeg", ChartImageFormat.Jpeg}, 
    {".png", ChartImageFormat.Png}, 
    {".tiff", ChartImageFormat.Tiff}, 
}; 
```

在这种情况下，我用来将文件扩展名与图表对象的图像格式常量相关联的字典。

可以从字典中返回单个键值对，如下所示：

```
var pair = imgFormats.First(p => p.Key == ".jpg"); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-19T09:06:12.303

`KeyValuePair<int, int>`是一个结构体，幸运的是，它是*不可变*结构体。特别是，这意味着它的属性是只读的。因此，您不能为它们使用对象初始化程序。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-06-12T20:48:08.810

好的，你有答案。作为替代方案，我更喜欢类似于`Tuple`类的工厂模式，用于类型推断魔法:)

```
public static class KeyValuePair
{
    public static KeyValuePair<K, V> Create<K, V>(K key, V value)
    {
        return new KeyValuePair<K, V>(key, value);
    }
} 
```

所以short变得更短：

```
var keyValuePair = KeyValuePair.Create(1, 2); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-06-05T20:06:21.160

这是一个完成这项工作的例子

```
KeyValuePair<int, int> kvp = new KeyValuePair<int, int>(1, 1); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-19T09:08:43.557

Key 和 Value 属性没有设置器。这就是为什么您不能在初始化程序中使用它们的原因。只需使用构造函数:) 你会没事的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-18T09:42:04.753

我也更喜欢工厂模式。但是当我必须在外面创建一对时，我发现这种方式更有用。这样我就可以支持任何简单到复杂的用例。

这样，我可以使用任何类型并根据其属性或任何我想要的谓词制作 KeyValue Pairs，但更干净。喜欢的方式类似`IEnumerable.ToDictionary(keySelector,valueSelector)`

```
 public static KeyValuePair<TKey, TValue> CreatePair<TSource, TKey, TValue>(
         this TSource source,
         Func<TSource, TKey> keySelector, 
         Func<TSource, TValue> valueSelector)
        {
            if (source is null)
            {
                throw new ArgumentNullException(nameof(source));
            }

            if (keySelector is null)
            {
                throw new ArgumentNullException(nameof(keySelector));
            }

            if (valueSelector is null)
            {
                throw new ArgumentNullException(nameof(valueSelector));
            }

            return new KeyValuePair<TKey, TValue>(
                         keySelector.Invoke(source), 
                         valueSelector.Invoke(source));
        } 
```

而你使用。

```
yourObject.CreatePair(
        x=> x.yourKeyPropery, 
        x=> SomeOperationOnYourProperty(x.yourValueProperty)); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-19T09:06:06.410

[Key](http://msdn.microsoft.com/en-us/library/ms224760%28v=vs.80%29.aspx)和[Value](http://msdn.microsoft.com/en-US/library/ms224761%28v=vs.80%29.aspx)属性是只读的，因此您不能在对象初始化程序中使用它们。

[请参阅C# 编程指南](http://msdn.microsoft.com/en-gb/library/vstudio/bb384062.aspx)中的此条目。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-19T09:06:52.593

你没有做错什么。KeyValuePairs 属性是只读的。你不能设置它们。此外，没有空的默认构造函数。您需要使用提供的构造函数。

# c# - 从源中分离对象

> ID：15495166
> 
> 赞同：-2
> 
> 时间：2013-03-19T09:02:31.867
> 
> 标签：c#

我目前正在尝试拆分一些用于在运行时更改我的应用程序行为的源。我必须解析它并动态执行它。我需要一种方法将源拆分为`object`. 这是一个示例脚本。

我试图将源分成不同的部分来解析它。

这是输入到我的应用程序的文本框中的单个源字符串。

```
object obj1 {

    event onCreate {
        set name "OBJ1"
        set x 150
    }

}

object obj2 {

    event onCreate {
        set name "OBJ2"
        set x 50
    }

} 
```

我需要将它们分成两个字符串，例如

字符串 obj1

```
object obj1 {

    event onCreate {
        set name "OBJ1"
        set x 150
    }

} 
```

字符串 obj2

```
object obj2 {

    event onCreate {
        set name "OBJ2"
        set x 50
    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:12:30.517

```
string strSource = @"Your code";
string objects = string.Split("object", StringSplitOptions.RemoveEmptyEntries); 
```

使用[string.Split()](http://msdn.microsoft.com/en-gb/library/system.string.split.aspx)得到你想要的。按关键字拆分`object`。显然，这将取决于您的源代码示例是否正确，因为如果您`object`的代码中有任何类型，它也会拆分这些类型。

如果你谷歌：

> 拆分字符串 c#

以上就是你会发现的。只需要一点研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:34:45.890

如果您认为您的代码在语法上是正确的（即它有正确数量的大括号），您可以从以下方法开始并改进它。它会在您的代码中查找打开和关闭括号，跟踪打开的括号并在每个打开的括号关闭后立即分隔字符串。

您不能简单地使用拆分，因为一旦您使用的标记（例如对象）不仅用作分隔符，它就不会起作用。

```
 public List<string> Split(string src)
    {
        List<string> result = new List<string>();
        int brk = src.IndexOf('{');
        if (brk < 0)
        {
            if (!string.IsNullOrEmpty(src.Trim()))
                result.Add(src);
            return result;
        }
        string cur = src.Substring(0, brk + 1);
        string remainder = src.Substring(brk + 1);
        int countBrk = 1;
        while (countBrk > 0)
        {
            int idxOpened = remainder.IndexOf('{');
            int idxClosed = remainder.IndexOf('}');
            if (idxOpened >= 0 && idxOpened < idxClosed)
            {
                countBrk++;
                cur = cur + remainder.Substring(0, idxOpened + 1);
                remainder = remainder.Substring(idxOpened + 1);
            }
            else
            {
                countBrk--;
                cur = cur + remainder.Substring(0, idxClosed + 1);
                remainder = remainder.Substring(idxClosed + 1);
            }
        }
        if (!string.IsNullOrEmpty(cur.Trim()))
            result.Add(cur);
        result.AddRange(Split(remainder));
        return result;
    } 
```

# c - gcc 内存分配问题 - 缓冲区溢出攻击

> ID：15495167
> 
> 赞同：15
> 
> 时间：2013-03-19T09:02:33.757
> 
> 标签：c, gcc

gcc 是否智能进行内存分配以防止缓冲区溢出攻击？

```
int function(char *str) {
    int a = 0;                 // See the
    char b[16] = "abcd";       // changes here

    if(!strcmp(b, str))
        a = 1;

    return a;
} 
```

和

```
int function(char *str) {
    char b[16] = "abcd";       // See the
    int a = 0;                 // changes here

    if(!strcmp(b, str))
        a = 1;

    return a;
} 
```

当我用 gdb 调试它时，它总是先分配内存给整数变量，然后是字符数组；**不管变量声明的顺序是什么**。即在上述两种情况下，编译器首先分配内存`a`到`b`.

```
(higher address)
  Memory
|        |
|        |
+--------+
|        |
|        |
|        |
|        |
+--------+ <----- b (16 bytes)
|        |
+--------+ <----- a (4 bytes)
|        |
(lower address) 
```

因此，即使我们在 中提供超过 16 个字符`str`，也不会影响`a`. 有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T09:20:48.517

是的，如果带着`-fstack-protector`国旗跑。

当使用该标志运行时，GCC 添加堆栈金丝雀，将数组变量排序到堆栈帧的最高部分，以使其更难以溢出和破坏其他变量，并将函数参数的副本与其他局部变量一起存储。

有关更多信息，请参阅[有关缓冲区溢出保护的 Wikipedia 页面](http://en.wikipedia.org/wiki/Buffer_overflow_protection#GCC_Stack-Smashing_Protector_.28ProPolice.29)和[ProPolice](http://www.research.ibm.com/trl/projects/security/ssp/)主页

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:43:40.777

即使 GCC 有这样的功能来防止缓冲区溢出，这里还有许多其他考虑因素可能会导致固定的变量声明顺序。在哪里进行声明并不重要，编译器将根据变量在运行时的使用时间和方式做出分配决定。

最重要的是，编译器希望在堆栈帧中分配变量时考虑到最佳对齐方式。这可以根据 CPU 和优化设置以完全不同的方式进行。与优化内存消耗相比，优化速度可能会给出完全不同的分配。最有可能的是，它会将一些变量放入 CPU 寄存器中，从而消除整个 RAM 分配需求。

因此，回答您的问题：GCC 根据编译器端口以各种方式分配变量。它是如何做到的，不是程序员需要过分关心的事情。可能有一些选项可以重新排列堆栈以防止缓冲区溢出攻击，但这仅在某些类型的应用程序中才有意义。据我们所知，甚至可能没有任何输入到特定系统。因此，编译器默认启用此安全功能是没有意义的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T09:14:28.097

> gcc 是否智能进行内存分配以防止缓冲区溢出攻击？

不，它没有。如果没有边界检查，就无法防止攻击或缓冲区溢出，这并不总是可能的。您有时只能在事后检测到溢出。

编译器最多可以在堆栈上的返回地址附近包含额外信息（所谓的[金丝雀值](http://en.wikipedia.org/wiki/Canary_value)），并且在从函数返回之前检查它是否完好无损并且没有由于缓冲区溢出而被覆盖。

# android - Google Maps Android v2 中的集群标记

> ID：15495171
> 
> 赞同：16
> 
> 时间：2013-03-19T09:02:39.310
> 
> 标签：android, google-maps-android-api-2, markerclusterer

我必须从 Google Maps Android v2 API 在 GoogleMap 上放置不同的标记。问题是多个标记被设置到相同的位置（纬度/经度），所以用户只能看到“最新”的标记。

是否有可能（在最好的情况下：图书馆）聚集来自同一区域的不同标记（相对于缩放级别）？

我已经阅读过*MarkerClusterer*，但这是为 JavaScript API 设计的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-02T00:48:31.193

Google 提供了一个实用程序来执行此操作，作为其 Google Maps Android API 实用程序库的一部分：

[https://developers.google.com/maps/documentation/android/utility/marker-clustering](https://developers.google.com/maps/documentation/android/utility/marker-clustering)

来源：

[https://github.com/googlemaps/android-maps-utils](https://github.com/googlemaps/android-maps-utils)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-19T20:43:56.433

我还没有机会尝试这个，但它看起来很有希望：

[http://code.google.com/p/android-maps-extensions/](http://code.google.com/p/android-maps-extensions/)

从[这个帖子](https://stackoverflow.com/a/15485388/1103584)

这是另一个库，其中包含一些非常酷的集群动画：

[https://github.com/twotoasters/clusterkraf](https://github.com/twotoasters/clusterkraf)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-28T22:43:20.213

我有点晚了，但是 Clusterkraf 是一个很棒的库，请查看：

[https://github.com/twotoasters/clusterkraf](https://github.com/twotoasters/clusterkraf)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-03T07:38:48.153

对于正在寻找实现自己的集群代码的其他人。请快速检查我的聚类算法，效果非常好。

我查看了各种库，发现它们非常复杂，一个词都看不懂，所以我决定制作自己的聚类算法。这是我在java中的代码。

```
 static int OFFSET = 268435456;
        static double RADIUS = 85445659.4471;
        static double pi = 3.1444;

    public static double lonToX(double lon) {
        return Math.round(OFFSET + RADIUS * lon * pi / 180);
    }

    public static double latToY(double lat) {
        return Math.round(OFFSET
                - RADIUS
                * Math.log((1 + Math.sin(lat * pi / 180))
                        / (1 - Math.sin(lat * pi / 180))) / 2);
    }

    public static int pixelDistance(double lat1, double lon1, double lat2,
            double lon2, int zoom) {
        double x1 = lonToX(lon1);
        double y1 = latToY(lat1);

        double x2 = lonToX(lon2);
        double y2 = latToY(lat2);

        return (int) (Math
                .sqrt(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2))) >> (21 - zoom);
    }

    static ArrayList<Cluster> cluster(ArrayList<Marker> markers, int zoom) {

        ArrayList<Cluster> clusterList = new ArrayList<Cluster>();

        ArrayList<Marker> originalListCopy = new ArrayList<Marker>();

        for (Marker marker : markers) {
            originalListCopy.add(marker);
        }

        /* Loop until all markers have been compared. */
        for (int i = 0; i < originalListCopy.size();) {

            /* Compare against all markers which are left. */

            ArrayList<Marker> markerList = new ArrayList<Marker>();
            for (int j = i + 1; j < markers.size();) {
                int pixelDistance = pixelDistance(markers.get(i).getLatitude(),
                        markers.get(i).getLongitude(), markers.get(j)
                                .getLatitude(), markers.get(j).getLongitude(),
                        zoom);

                if (pixelDistance < 40) {

                    markerList.add(markers.get(j));

                    markers.remove(j);

                    originalListCopy.remove(j);
                    j = i + 1;
                } else {
                    j++;
                }

            }

            if (markerList.size() > 0) {
 markerList.add(markers.get(i));                
Cluster cluster = new Cluster(clusterList.size(), markerList,
                        markerList.size() + 1, originalListCopy.get(i)
                                .getLatitude(), originalListCopy.get(i)
                                .getLongitude());
                clusterList.add(cluster);
                originalListCopy.remove(i);
                markers.remove(i);
                i = 0;

            } else {
                i++;
            }

            /* If a marker has been added to cluster, add also the one */
            /* we were comparing to and remove the original from array. */

        }
        return clusterList;
    }

Just pass in your array list here containing latitude and longitude then to display clusters. Here goes the function.

    @Override
    public void onTaskCompleted(ArrayList<FlatDetails> flatDetailsList) {

        LatLngBounds.Builder builder = new LatLngBounds.Builder();

        originalListCopy = new ArrayList<FlatDetails>();
        ArrayList<Marker> markersList = new ArrayList<Marker>();
        for (FlatDetails detailList : flatDetailsList) {

            markersList.add(new Marker(detailList.getLatitude(), detailList
                    .getLongitude(), detailList.getApartmentTypeString()));

            originalListCopy.add(detailList);

            builder.include(new LatLng(detailList.getLatitude(), detailList
                    .getLongitude()));

        }

        LatLngBounds bounds = builder.build();
        int padding = 0; // offset from edges of the map in pixels
        CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, padding);

        googleMap.moveCamera(cu);

        ArrayList<Cluster> clusterList = Utils.cluster(markersList,
                (int) googleMap.getCameraPosition().zoom);

        // Removes all markers, overlays, and polylines from the map.
        googleMap.clear();

        // Zoom in, animating the camera.
        googleMap.animateCamera(CameraUpdateFactory.zoomTo(previousZoomLevel),
                2000, null);

        CircleOptions circleOptions = new CircleOptions().center(point) //
                // setcenter
                .radius(3000) // set radius in meters
                .fillColor(Color.TRANSPARENT) // default
                .strokeColor(Color.BLUE).strokeWidth(5);

        googleMap.addCircle(circleOptions);

        for (Marker detail : markersList) {

            if (detail.getBhkTypeString().equalsIgnoreCase("1 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk1)));
            } else if (detail.getBhkTypeString().equalsIgnoreCase("2 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_2)));

            }

            else if (detail.getBhkTypeString().equalsIgnoreCase("3 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_3)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("2.5 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk2)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("4 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_4)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("5 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk5)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("5+ BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_5)));

            }

            else if (detail.getBhkTypeString().equalsIgnoreCase("2 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_2)));

            }
        }

        for (Cluster cluster : clusterList) {

            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inMutable = true;
            options.inPurgeable = true;
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.cluster_marker, options);

            Canvas canvas = new Canvas(bitmap);

            Paint paint = new Paint();
            paint.setColor(getResources().getColor(R.color.white));
            paint.setTextSize(30);

            canvas.drawText(String.valueOf(cluster.getMarkerList().size()), 10,
                    40, paint);

            googleMap.addMarker(new MarkerOptions()
                    .position(
                            new LatLng(cluster.getClusterLatitude(), cluster
                                    .getClusterLongitude()))
                    .snippet(String.valueOf(cluster.getMarkerList().size()))
                    .title("Cluster")
                    .icon(BitmapDescriptorFactory.fromBitmap(bitmap)));

        }

    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-04T20:22:05.150

您需要按照以下步骤操作：

1.  我们需要实现/安装[Google Maps Android API 实用程序库](http://googlemaps.github.io/android-maps-utils/)

安卓工作室/Gradle：

```
dependencies {
    compile 'com.google.maps.android:android-maps-utils:0.3+'
} 
```

2.  其次，您需要阅读 Google 的官方文档 -> [Google Maps Android Marker Clustering Utility](https://developers.google.com/maps/documentation/android/utility/marker-clustering)

**添加一个简单的标记聚类器**

> 按照以下步骤创建一个包含十个标记的简单集群。结果将如下所示，尽管显示/聚集的标记数量会根据缩放级别而变化：

![添加一个简单的标记聚类器](../Images/8dc155110441803b1b58ba8d401730bc.png)

以下是所需步骤的摘要：

1.  实现`ClusterItem`以在地图上表示标记。集群项将标记的位置作为 LatLng 对象返回。
2.  添加新`ClusterManager`的以根据缩放级别对集群项目（标记）进行分组。
3.  将地图设置`OnCameraChangeListener()`为`ClusterManager`, 因为`ClusterManager`实现了侦听器。
4.  如果要添加特定功能以响应标记单击事件，请将地图设置`OnMarkerClickListener()`为`ClusterManager`，因为`ClusterManager`实现了侦听器。
5.  将标记送入`ClusterManager`.

更详细地查看这些步骤：要创建包含十个标记的简单集群，首先创建一个`MyItem`实现`ClusterItem`.

```
public class MyItem implements ClusterItem {
    private final LatLng mPosition;

    public MyItem(double lat, double lng) {
        mPosition = new LatLng(lat, lng);
    }

    @Override
    public LatLng getPosition() {
        return mPosition;
    }
} 
```

在您的地图活动中，添加`ClusterManager`集群项目并将其提供给它。注意 type 参数`<MyItem>`，它将 ClusterManager 声明为 type `MyItem`。

```
private void setUpClusterer() {
    // Declare a variable for the cluster manager.
    private ClusterManager<MyItem> mClusterManager;

    // Position the map.
    getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(51.503186, -0.126446), 10));

    // Initialize the manager with the context and the map.
    // (Activity extends context, so we can pass 'this' in the constructor.)
    mClusterManager = new ClusterManager<MyItem>(this, getMap());

    // Point the map's listeners at the listeners implemented by the cluster
    // manager.
    getMap().setOnCameraChangeListener(mClusterManager);
    getMap().setOnMarkerClickListener(mClusterManager);

    // Add cluster items (markers) to the cluster manager.
    addItems();
}

private void addItems() {

    // Set some lat/lng coordinates to start with.
    double lat = 51.5145160;
    double lng = -0.1270060;

    // Add ten cluster items in close proximity, for purposes of this example.
    for (int i = 0; i < 10; i++) {
        double offset = i / 60d;
        lat = lat + offset;
        lng = lng + offset;
        MyItem offsetItem = new MyItem(lat, lng);
        mClusterManager.addItem(offsetItem);
    }
} 
```

**演示**

[https://www.youtube.com/watch?v=5ZnVraO1mT4](https://www.youtube.com/watch?v=5ZnVraO1mT4)

**Github**

如果您需要更多信息/已完成的项目，请访问：[https ://github.com/dimitardanailov/googlemapsclustermarkers](https://github.com/dimitardanailov/googlemapsclustermarkers)

如果您有更多问题，请与我联系。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-31T14:50:11.940

对于谁在使用*Clusterkraf*时遇到问题（我无法让它工作！）以及谁不能使用*android-maps-extension*因为它附带了自定义构建的 Play Services 库，我想建议这个其他库，即很小，写得很好，开箱即用：

> **集群**：[https ://github.com/mrmans0n/clusterer](https://github.com/mrmans0n/clusterer)

在尝试使用其他两个库之后，这个库拯救了我的一天！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-18T12:40:35.327

> 如果您只获得最新的标记，那么您需要对所有标记进行聚类

```
> private ClusterManager<MyItem> mClusterManager; 
```

> 添加项目后

```
mClusterManager.addItem("your item");
mClusterManager.cluster(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-11T16:09:13.613

对于那些在 Google Maps Android API 实用程序库的性能方面遇到问题的人，我们创建了自己的快速集群库：[https](https://github.com/sharewire/google-maps-clustering) ://github.com/sharewire/google-maps-clustering 。它可以轻松处理地图上的 20000 个标记。

# linux - 关于 sed 模式匹配的建议

> ID：15495175
> 
> 赞同：1
> 
> 时间：2013-03-19T09:02:49.900
> 
> 标签：linux, bash, sed

我必须`getzb="0" zztype="0"`用`getzb="2" zztype="1"`包含的行替换，`qsid="90"`或者`qsid="100"`我写了以下`sed`命令：

```
sed '/qsid="90"\|qsid="100"/s/\(getzb=\)"0" \(zztype=\)"0"'/\1"2" \2"1"/ 
```

看起来很丑，有没有人有好的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:05:46.670

尝试这个 ：

```
sed -r '
    /\bqsid="(90|100)"/{
        s/\bgetzb="0"/getzb="2"/g;
        s/\bzztype="0"/zztype="1"/g
    }
' 
```

## 样品测试

```
$ cat file
getzb="0" zztype="0" foobar
getzb="0" zztype="0" 
getzb="0" zztype="0" qsid="90" or qsid="100"

$ sed -r '
    /\bqsid="(90|100)"/{
        s/\bgetzb="0"/getzb="2"/g;
        s/\bzztype="0"/zztype="1"/g
    }
' file
getzb="0" zztype="0" foobar
getzb="0" zztype="0" 
getzb="2" zztype="1" qsid="90" or qsid="100" 
```

# openlayers - Openlayers：缩放 WFS 有时会返回到第一个缩放级别

> ID：15495176
> 
> 赞同：0
> 
> 时间：2013-03-19T09:02:50.660
> 
> 标签：openlayers, zooming

我有一个 GeoServer 服务器，它使用 GeoWebCache 提供我的图层。这工作正常。我还有一个 WFS 层，它使用过滤器（地址 ID）填充。大多数情况下，这个 WFS 图层的要素少于 5 个，但在某些情况下，它具有大约 20-30 个要素，但总是少于 100 个。我使用 OpenLayers 来显示图层，并且我有一个自定义搜索框供用户搜索地址。如前所述，这一切正常。

但是当我有一个大约有一个 WFS 层时。超过 10-15 个功能，并且我（或用户）在单击（可能太快）后单击默认 PanZoomBar 上的缩小按钮，缩放级别重置为 WFS 图层的原始缩放级别（缩放以适应）。当功能少于 10 个时，不会发生这种情况。

我没有任何可能导致这种行为的花哨的代码，它发生在 FireFox、IE 和 Chrome 中。

这是我创建 WFS 层的代码：

```
var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;
wfsLayer = new OpenLayers.Layer.Vector("Dakvlakken", { 
  renderers: renderer,
  displayInLayerSwitcher: true,
  strategies: [new OpenLayers.Strategy.BBOX()],
  filter: new OpenLayers.Filter.Comparison({ 
          type: OpenLayers.Filter.Comparison.EQUAL_TO,
          property: "adres_id",
          value: startAdresID}),
  protocol: new OpenLayers.Protocol.WFS({ 
    url: "http://MyIP/geoserver/wfs",
    featureType: "full",
    srsName: "EPSG:28992",
    geometryName: "geom_rd"
  })
}); 
```

这是我在用户选择不同地址后更改过滤器的方式：

```
function changeFilter(newValue, x, y, adres)
{ 
    wfsLayer.destroyFeatures();
    filter = new OpenLayers.Filter.Logical(
    { 
      type: OpenLayers.Filter.Logical.AND, 
      filters: [ 
        new OpenLayers.Filter.Comparison(
        { 
            type: OpenLayers.Filter.Comparison.EQUAL_TO, 
            property: "adres_id", 
            value: newValue 
        }), 
        new OpenLayers.Filter.Spatial(
        { 
            type: OpenLayers.Filter.Spatial.BBOX, 
            value: new OpenLayers.Bounds(x-50, y-50, x+50, y+50), 
            projection: "EPSG:28992" 
        }) 
      ]  
    });

    wfsLayer.filter = filter;
    wfsLayer.refresh({force: true});
  }
} 
```

我已经调试了好几天了，但我不知道如何解决这个问题。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:33:28.013

我发现了问题。我检查了缩放级别是否太高，如果是这样，我将其更改为预定义的级别。此检查是在一个只应调用一次以使用 WFS 图层的属性填充表的方法中进行的。每次缩放后都会以某种方式调用此方法。这是不正确的，我也会尝试解决这个问题。所以我最初的问题解决了，但我得到了一个新的作为回报；）

如果我再次陷入困境，我会发布一个新问题。

谢谢，

保罗

# android - 如何在单击的列表项上打开带有三个按钮的子窗口，如屏幕截图中的红色方块所示

> ID：15495178
> 
> 赞同：2
> 
> 时间：2013-03-19T09:02:58.643
> 
> 标签：android, blackberry-10, blackberry-android

我必须在单击的列表项上打开一个子窗口。此窗口包含三个按钮，这些按钮也是可点击的。请参阅屏幕截图。![在此处输入图像描述](../Images/45a9a7eb58fe54b9cff3d0cd945210a0.png)

在 iphone 中可以使用 TableRow。android中有没有像iphone这样的方式或任何不同的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:11:44.067

我认为您必须创建自己的样式并将该样式应用于您的对话框（/您称其为子窗口），并且 OnListItemClick 您必须显示此对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:23:02.293

创建布局，包括要在 ListItem Click 上显示的扩展视图

将以下代码添加到您的 LISTViewclick 侦听器中，实际希望使其可见

Count 是一个变量，用于检查单击的次数是偶数还是奇数，以便相应地使其可见和不可见。

```
IF((count%2)==0)
{
linearLayout.setvisibilty(View.GONE);
}
else
{
linearLayout.setvisibilty(View.VISIBLE);
} 
```

**这里的linearLayout** 是您在屏幕截图中所需的布局...（使用该布局设计并将其父布局可见性设置为`GONE`）

在开始时将其设置为不可见。并相应地使其在 itemclick 上可见

给您一个粗略的想法，您可以相应地自定义代码

希望能帮助到你。我曾多次使用相同的技巧来使此类事情发生

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:21:43.533

如果你想像上面的截图那样做，你必须让它成为列表项的一部分，在列表项的正常内容之上定义它，并将特定布局的可见性设置为`android:visibility="gone"`. 然后，当您单击更多按钮时，将布局可见性设置为`android:visibility="visible"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:26:51.070

[只需在这里](https://sites.google.com/site/androidappcourse/labs/lab-3)查看@一次..可能对您有帮助。

![在此处输入图像描述](../Images/18b46d920e49d575d2e3b075447803b2.png)

您可能正在寻找可扩展的项目。你能[看到这里](http://ahal.ca/blog/2011/android-expandablepanel/)吗？

另请参阅此处[如何在 Android 中实现可扩展面板？](https://stackoverflow.com/questions/5165682/how-to-implement-expandable-panels-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:30:59.237

首先，将 onItemClickListener 应用于您的列表视图。然后，在 onItemClicked() 中，调用我调用的新对话框。

您的列表视图：

```
ListView listView = (ListView) findViewById(R.id.listview);
listView.setOnItemClickListener(this); 
```

在 onItemClick 中：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    callDialog("Message");
} 
```

您的对话编码是：

```
public static void callDialog(String message){
    final Dialog dialog = new Dialog(context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.customdialog);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.WHITE));               

    TextView tvTitle = (TextView) dialog.findViewById(R.id.textview_dialog_title);
    tvTitle.setText("MyDialog..");

    TextView tvText = (TextView) dialog.findViewById(R.id.textview_dialog_text);
    tvText.setText(message);    

    Button buttonDialogYes = (Button) dialog.findViewById(R.id.button_dialog_yes);
    buttonDialogYes.setOnClickListener(new OnClickListener() {          
        public void onClick(View v) {
            // Do some thing.
            dialog.dismiss();
        }
    });

    Button buttonDialogNo = (Button) dialog.findViewById(R.id.button_dialog_no);
    buttonDialogNo.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //Do some thing
            dialog.dismiss();
        }           
    });
    dialog.show();
} 
```

为对话框开发自定义 xml，并将其设置为

```
dialog.setContentView(R.layout.customdialog); 
```

它会根据您的需要正常工作。

# java - 查询 LDAP 时使用 Com4j 指定最大结果

> ID：15495179
> 
> 赞同：1
> 
> 时间：2013-03-19T09:03:01.647
> 
> 标签：java, active-directory, ldap, com4j

我正在尝试使用 Com4j 查询 ldap 以检索所有内部员工。下面的代码有效，但总是返回 960 个结果，而应该有数千个结果。有办法指定最大结果大小还是我应该做一些不同的事情？

```
public class SearchInternalPersons {

private static final Logger LOGGER = LoggerFactory.getLogger(SearchInternalPersons.class);

private static final String DEFAULT_FIELDS = "sAMAccountName,givenName,sn,employeeType";

public static void main(final String[] args) throws Exception {
    final Map<String, String> AD2attribute = Maps.newHashMap();
    final StringTokenizer tokenizer = new StringTokenizer(DEFAULT_FIELDS, ",");
    while (tokenizer.hasMoreTokens()) {
        final String token = tokenizer.nextToken();
        AD2attribute.put(token, token);
    }
    final _Connection con = ClassFactory.createConnection();
    con.provider("ADsDSOObject");
    con.open("Active Directory Provider", StringUtils.EMPTY, StringUtils.EMPTY, -1);
    final _Command cmd = ClassFactory.createCommand();
    cmd.activeConnection(con);
    String command = createCommand();
    LOGGER.debug("Command=" + command);
    cmd.commandText(command);
    _Recordset rs = cmd.execute(null, Variant.getMissing(), -1);
    if (rs.eof()) {
        LOGGER.error("no users not found.");
    } else {
        System.out.println(rs.pageCount()); // prints 96
        System.out.println(rs.pageSize()); // prints 10
        System.out.println(rs.recordCount()); // prints 960
        for (int i=0;i<63;i++) {
            System.out.println(rs.properties(i).name() + ":" + rs.properties(i).value());
        }
        for (int i = 0; i < rs.recordCount(); i++) {
            final Fields userData = rs.fields();
            final Map<String, String> userDataAttributes = new HashMap<String, String>();
            for (int j = 0; j < userData.count(); j++) {
                final Field field = userData.item(j);
                final String attribute = AD2attribute.get(field.name());
                if (attribute != null && !attribute.isEmpty()) {
                    final Object value = field.value();
                    final String textValue = (value == null) ? StringUtils.EMPTY : value.toString();
                    LOGGER.debug(field.name() + "=" + textValue);
                    userDataAttributes.put(attribute, textValue);
                }
            }
            rs.moveNext();
        }
    }
    rs.close();
    con.close();
}

private static String createCommand() {
    final StringBuilder commandBuilder = new StringBuilder("<LDAP://");
    commandBuilder.append((String) COM4J.getObject(IADs.class, "LDAP://RootDSE", null).get("defaultNamingContext"));
    commandBuilder.append(">;(employeeType=employee);");
    commandBuilder.append(DEFAULT_FIELDS);
    commandBuilder.append(";subTree");
    return commandBuilder.toString();
}

} 
```

ResultSet 属性如下：

```
IAccessor:true
IColumnsInfo:true
IColumnsInfo2:true
IConvertType:true
IGetSession:true
IRow:false
IGetRow:true
IRowset:true
IRowsetIdentity:true
IRowsetInfo:true
IRowsetLocate:true
IRowsetScroll:true
Preserve on Abort:false
Blocking Storage Objects:true
Use Bookmarks:true
Skip Deleted Bookmarks:false
Bookmark Type:1
Fetch Backwards:true
Hold Rows:true
Scroll Backwards:true
Column Privileges:true
Preserve on Commit:false
Immobile Rows:true
Literal Bookmarks:false
Literal Row Identity:true
Maximum Open Rows:0
Maximum Pending Rows:0
Maximum Rows:0
Notification Phases:0
Column Set Notification:0
Row Delete Notification:0
Row First Change Notification:0
Row Insert Notification:0
Row Resynchronization Notification:0
Rowset Release Notification:0
Rowset Fetch Position Change Notification:0
Row Undo Change Notification:0
Row Undo Delete Notification:0
Row Undo Insert Notification:0
Row Update Notification:0
Bookmarks Ordered:true
Own Inserts Visible:false
Own Changes Visible:false
Quick Restart:true
Reentrant Events:true
Remove Deleted Rows:false
Report Multiple Changes:false
Row Privileges:false
Row Threading Model:1
Strong Row Identity:false
Asynchronous:false
Deref Aliases:0
Size Limit:0
Server Time Limit:0
Column Names only:false
SearchScope:2
Timeout:0
Page size:0
Time limit:0
Chase referrals:0
Sort On:null
Cache Results:true
Bookmarkable:true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:02:06.600

我可以通过更改属性“页面大小”来解决这个问题，如下所示：

```
cmd.properties("Page Size").value(50); 
```

当然，除 50 之外的其他值也是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:40:27.623

即使您的参数包括时间限制和大小限制等资源限制，这些值（称为客户端请求的资源限制）也不能覆盖服务器的限制。这是因为服务器保留了覆盖客户端请求资源限制的能力（由 LDAP 标准指定）。换句话说，客户端请求的资源限制永远不会覆盖服务器的限制，除非服务器支持不受任何资源限制或访问控制的根 DN 的概念，并且 LDAP 客户端使用它来验证其与服务器的连接根 DN。

另一种可能性是搜索请求参数过滤掉了您期望的一些条目。尝试使用已知良好的命令行工具，例如`ldapsearch`查询服务器并计算返回的条目数。

### 也可以看看

*   [LDAP 搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# java - SWT 中的 2D 变换 - 使用 Transform 转换坐标

> ID：15495186
> 
> 赞同：3
> 
> 时间：2013-03-19T09:03:18.093
> 
> 标签：java, swt, 2d, transform

假设我对 gc 应用了 2D 变换：

```
 Transform trRotated = new Transform(display);
  trRotated.rotate(-90);
  gc.setTransform(trRotated); 
```

坐标系逆时针旋转 - X achse 指向上方，Y achse 指向右侧。

假设我想处理坐标，就好像 Y 指向下方，而 X 指向右侧。

例如，我想在转换之前输入绿点的坐标，即 (2,3)。如果考虑转换，则应将其转换为坐标 (-3,2)。

**问题：** 我是否必须手动转换坐标，或者是否有办法自动进行转换，也许是使用可用的`transform`？

![在此处输入图像描述](../Images/511d60d66eed899ddf4d3eb51513779a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:04:04.417

我不确定您需要的旋转功能的上下文是什么。

但是，对于以 theta 度旋转矩形（例如 Math.toRadians(90)）可以使用：

```
AffineTransform transform = new AffineTransform();
transform.rotate(theta, rect.getX() + rect.width/2, rect.getY() + rect.height/2);
g2.transform(transform); 
```

# ios - UIWebView 中的文本不可见

> ID：15495191
> 
> 赞同：2
> 
> 时间：2013-03-19T09:03:30.847
> 
> 标签：ios, uiwebview

在我的应用程序中，我使用 UIWebView 作为关于屏幕。我已经使用使背景透明

```
webView.opaque = NO;
webView.backgroundColor = [UIColor clearColor]; 
```

但由于某种原因，UIWebView 中的文本很少（20 个中有 1 个）是不可见的。它仍然存在，因为滚动条是正确的，我也可以从中复制文本，但是您看不到它。如果我禁用透明背景，那很好。

有没有其他人经历过这种行为？

**更新：**刚刚禁用了透明度。这与它无关。所以实际上我有一个 UIWebView，有时文本是不可见的。

**解决方法：**我找到了一种解决方法，但我不知道它为什么有效。我在我的应用程序中所做的是在初始化期间预加载所有 UIWebViews，以便稍后当我打开这些视图时，不会有任何延迟。我通过调用 self.view = self.view 强制控制器触发 viewDidLoad。之后，作为我笔尖中的子视图的 UIWebView 被加载，我可以使用预加载 html

```
[_webView loadHTMLString:html baseURL:url]; 
```

那是我将 html 加载到我的 UIWebView 中的原始代码。现在我已经切换到

```
[_webView loadRequest:urlRequest]; 
```

这总是有效的。有时，当我足够快时，我可以看到尚未完全预加载的文本弹出视图。使用 loadHTML 时，有时文本似乎还没有加载，但弹出步骤不会被执行。

因此，似乎使用 loadHTMLString 进行预加载有时会导致文本未加载，而 loadRequest 总是会成功。谁能解释这种行为？我很好奇有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:14:06.757

在您的 HTML 或 CSS 中，您应该明确定义文本的颜色。请参阅下面的示例 HTML 代码。

```
<html>
<head>
<style css="text/css">
p {color: white}
</style>
</head>
<body style="background-color: transparent;">

<h3>

<p>
 YOUR TEXT WILL GO HERE...
</p> 

</h3>
</body>
</html> 
```

# php - 有人可以解释一下“新 PDO”中存储的内容吗

> ID：15495192
> 
> 赞同：-3
> 
> 时间：2013-03-19T09:03:31.663
> 
> 标签：php, pdo

我很难理解`$conn`我刚刚完成的教程中的内容。它来自 Tutsplus PHP 基础课程。

我已经到达以下代码：

```
<?php
require 'config.php';
$letter = 'J%';
try {
$conn = new PDO('mysql:host=localhost; dbname=practice', $config['DB_USERNAME'], $config['DB_PASSWORD']);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); //Switch to turn on error modes with errors displayed

$stmt = $conn->prepare('SELECT * FROM users WHERE username LIKE :placeholder');

$stmt->bindParam('placeholder', $letter, PDO::PARAM_INT);
$stmt->setFetchMode(PDO::FETCH_OBJ);
$stmt->execute();

while($row = $stmt->fetch()) {
    print_r($row);
}
} catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
} 
```

我理解这`:placeholder`部分。我不太了解的部分尤其是`$conn`这一行：

`$stmt = $conn->prepare('SELECT * FROM users WHERE username LIKE :placeholder');`

如果我现在理解`->`这意味着我们将变量传递给`$conn`函数`prepare()`并将结果存储在`$stmt`. 我没有得到的`$conn`是当前从 PDO 连接中保留的内容。我试着做`print $conn;`，但返回了一个错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T09:13:32.387

PDO（php 数据库对象）是一个标准库，使用面向对象的接口提供对不同数据库驱动程序的访问。

"$conn" 对象是 PDO 类的一个实例。

> “面向对象编程”中的对象本质上是数据结构及其相关的处理例程。

您至少应该学习 OOP 基础知识才能完全理解它是如何工作的。

[http://en.wikipedia.org/wiki/Object-oriented_programming](http://en.wikipedia.org/wiki/Object-oriented_programming)

> 如果我现在理解 -> 这意味着我们将变量 $conn 传递给函数 prepare()

号“->”运算符您调用对象“$conn”的函数“准备”

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-19T09:05:51.783

$conn 包含 PDO 类的对象。

# asp.net-mvc - 如何在 ASP.NET MVC 3.0 中会话超时时自动重定向到登录视图？

> ID：15495193
> 
> 赞同：0
> 
> 时间：2013-03-19T09:03:36.570
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session

伙计们！这些天我正在开发一个 ASP.NET MVC 3.0 项目，但是我不知道如何在会话超时时自动重定向到登录视图。有人告诉我尝试编写一个客户操作过滤器类，就像 Global.asax.cs 文件中的“SessionExpireFilterAttribute”一样，确实效果很好，但我必须将标签“[SessionExpireFilter]”添加到每个应该关注的操作。所以我认为这不是一个好的解决方案。有没有其他人提供另一种更好的解决方案来使其自动运行！先谢谢了！</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:13:35.260

操作过滤器*不必应用于每个操作*即可工作。

**您可以在控制器级别**添加属性，这将应用于该控制器中的所有操作。

请参阅：[了解操作过滤器](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

进一步的抽象步骤是将属性添加到所有控制器都继承自的“BaseController”。

操作筛选器是在 ASP.NET MVC 中实现此功能的标准方法。

# php - HTML5 日期格式 Android

> ID：15495194
> 
> 赞同：2
> 
> 时间：2013-03-19T09:03:38.677
> 
> 标签：php, javascript, android, html, datepicker

是否可以更改 HTML5 日期选择器的日期格式？

默认格式在 Chrome 和 iOS ( `dd-mm-yyyy`) 中看起来不错，但在 Android ( `mm-dd-yyyy`) 中则不行。我不能在提交后使用 php 函数来更改它，因为例如`04-05-2013`可能是`dd-mm-yyyy`或`mm-dd-yyyy`.

目前我使用这个代码：

```
<input type="date" name="dueDate" /> 
```

我查看了所有可能的属性，但没有像“格式”这样的东西......

也许用javascript？但是，那么我需要能够检查客户端的输入格式......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T09:17:29.520

我不认为来自 html5 的 input type="date" 与 android 完全兼容，正如您在此页面[http://www.quirksmode.org/html5/inputs_mobile.html中看到的那样](http://www.quirksmode.org/html5/inputs_mobile.html)

# asp.net-mvc-3 - MVC3 下拉菜单 - HttpPost 上的模型状态错误

> ID：15495206
> 
> 赞同：0
> 
> 时间：2013-03-19T09:04:08.320
> 
> 标签：asp.net-mvc-3, drop-down-menu

我在 [HttpPost] 方法上的下拉列表中收到以下错误。这些值正确绑定，这不是问题。但是模型状态一直存在错误。错误是：

**从类型“System.String”到类型“System.Web.Mvc.SelectListItem”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。**

在我的模型中，我使用以下内容。

```
 public class UploadDocumentViewModel    {

        [Display(Name = "Document Title")]
        public string DocumentTitle { get; set; }  

        public IEnumerable<SelectListItem> FileType { get; set; }

    } 
```

**文件类型视图模型：**

```
 public class FileTypeViewModel
    {
        public string FileTypeId { get; set; }
        public string FileTypeDescription { get; set; }
    } 
```

**在控制器 HttpGet**

```
[HttpGet]
        public ActionResult UploadDocument()
        {

            var fileTypes = iFileTypeRepository.GetFileTypes(); // This is for FileType DropDownlist of values

            UploadDocumentViewModel uploadDocumentViewModel = new UploadDocumentViewModel
            {

                FileType = fileTypes.Select(x => new SelectListItem
                {
                    Text = x.FileTypeDescription,
                    Value = Convert.ToString(x.FileTypeId)
                }).ToList()
             };
            return View(uploadDocumentViewModel);

        } 
```

**在 [HttpPost] 方法中**

```
public ActionResult UploadDocument(FormCollection form,UploadDocumentViewModel uploadDocumentViewModel )
        {

            //FileTypes
            string ddlFileTypeSelectedValue = Convert.ToString(form["FileType"]);
            var ddlFileType = iFileTypeRepository.GetFileTypes();
            uploadDocumentViewModel.FileType = new SelectList(ddlFileType, "FileTypeId", "FileTypeDescription", ddlFileTypeSelectedValue);        

            // No Errors, then Submit
            if (ModelState.IsValid)
            {
               -- Redirect to some other View
            }

            else
            {
                return View(uploadDocumentViewModel);
            }

        } 
```

**在视图中**

```
@model xxx.Core.Model.UploadDocumentViewModel
@{
    ViewBag.Title = "Upload Document";
}
<h2>
    Upload Client Document</h2>
@Html.ValidationSummary()
@using (Html.BeginForm("UploadDocument", "Document", "FormMethod.Post"))
{
       <div>
        <fieldset>
            <legend>Upload Client Document</legend>
                 <div class="editor-label">
                  @Html.LabelFor(model => model.DocumentTitle)
                 </div>
                 <div class="demo">
                  @Html.TextBoxFor(model => model.DocumentTitle, new { @id = "txtDocumentTitle" })
                  @Html.ValidationMessageFor(model => model.DocumentTitle)
                  </div>
                   <div>
                      @Html.LabelFor(model => model.FileType)
                   </div>
                    <div>
                      @Html.DropDownListFor(model => model.FileType, Model.FileType, "Please Select", new { @id = "ddlFileType" })

                   </div>
          </fieldset>
               </div>
              <br />       
}
@{Html.EndForm();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:30:19.280

更改此行

```
@Html.DropDownListFor(model => model.FileType, Model.FileType, "Please Select", new { @id = "ddlFileType" }) 
```

到

```
@Html.DropDownListFor(model => model.FileTypeId, Model.FileType, "Please Select", new { @id = "ddlFileType" }) 
```

并为您的模型添加一个字符串属性`FileTypeId`，以便在您发布时获得所选项目

# google-maps-api-3 - 在浏览器中向谷歌地图添加标记时出现问题

> ID：15495209
> 
> 赞同：0
> 
> 时间：2013-03-19T09:04:26.293
> 
> 标签：google-maps-api-3, marker

我想在谷歌地图上添加一个标记，我有这个代码

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=myKey&sensor=true">
</script>
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(56.33481154165235, 11.107177734375),
      zoom: 7,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
    setMarker();
  }

  // Function for adding a marker to the page.
function addMarker(location) {
    marker = new google.maps.Marker({
        position: location,
        map: map
    });
}

// Testing the addMarker function
function setMarker() {
       CentralPark = new google.maps.LatLng(55.671389288295465, 12.5601196289062);
       addMarker(CentralPark);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

这显示了地图，但不显示标记。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:52:58.273

试试下面的代码

```
<script type="text/javascript">
var marker,
    CentralPark = new google.maps.LatLng(55.671389288295465, 12.5601196289062);

function initialize() {
    var mapOptions = {
        center: new google.maps.LatLng(56.33481154165235, 11.107177734375),
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

    marker = new google.maps.Marker({
        position: CentralPark,
        map: map,
        animation: google.maps.Animation.DROP
    });
}

google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:12:37.817

问题是`map`初始化函数中的局部变量，因此其他函数无法使用它。使它成为一个全局变量。

或者将地图对象作为参数传递给您的 setMarker / addMarker 函数。

另外，我不确定为什么您将 addMarker 和 setMarker 作为单独的函数（除非您稍后将使用更多功能来扩展它们，这解释了为什么要以这种方式拆分它们）。我已在此答案中将它们合并为一个，尽管从技术上讲，您的方法没有任何问题（您的问题只是非全局性`map`的）。

尝试这个：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=myKey&sensor=true">
</script>
<script>
  // make this global:
  var map;

  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(56.33481154165235, 11.107177734375),
      zoom: 7,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
    addMarker();
  }

  // Function for adding a marker to the page.
function addMarker() {
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(55.671389288295465, 12.5601196289062),
        map: map
    });
}

google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

# cordova - W8 jQuery 事件不起作用

> ID：15495214
> 
> 赞同：0
> 
> 时间：2013-03-19T09:04:34.740
> 
> 标签：cordova, jquery-mobile, windows-phone-8

我的 PhoneGap W8 应用程序有一个奇怪的问题。我有以下代码，适用于 Firefox、Chrome、IE10 浏览器和 Android、iOS 设备：

```
$('#mainPage').bind("pageshow", function(data){
    alert("main pageshow");
}); 
```

当我开始使用 W8 模拟器调试我的应用程序时，上述事件不起作用。我知道jQuery 官方不支持W8，但是PhoneGap 使用的是IE10 浏览器，它实际上是jQuery Mobile 支持的。

你知道有什么解决办法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:34:11.473

哦等等，jQuery Mobile[还不支持 Windows 8](http://jquerymobile.com/gbs/)。

您是否尝试将`bind`事件更改为`live`或`on`？这可能会有所帮助。如下所示

```
$('#mainPage').on("pageshow", function(data){
    alert("main pageshow");
}); 
```

# android - 无法在 Eclipse 中创建 AppEngine 连接的 Android 项目？

> ID：15495216
> 
> 赞同：4
> 
> 时间：2013-03-19T09:04:49.857
> 
> 标签：android, google-app-engine, google-plugin-eclipse

我已经为 Eclipse 安装了谷歌插件。在使用**New > project > AppEngine Connected Android Project**创建项目时，向导卡在`Generating cloud endpoints library`. 在调查中，我发现正在抛出以下错误

```
RegisterActivity cannot be resolved to a type 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:53:31.000

“AppEngine Connected Android Project”是旧的。在我安装 Eclipse 4.2 和当前 GPE 时，我没有看到该选项。端点已经取代了它。

IMO，最简单的方法是创建一个 Android 项目，然后使用“生成 AppEngine 后端”向导（即在包资源管理器中选择 Android 项目，然后在 Google 子菜单中找到该向导）。

这将创建一个带有端点的 App Engine 项目，并将其配置为在您选择“生成云端点库”时自动将其端点库复制到您的 Android 项目。

# android - canvas.toDataURL 不会产生图像/jpeg 数据

> ID：15495221
> 
> 赞同：7
> 
> 时间：2013-03-19T09:05:19.840
> 
> 标签：android, cordova, html5-canvas, base64

我正在尝试使用 base64 + phonegap 2.5 将 html5 画布数据保存到服务器。

**平台**：windows phone 7 和 8，Android 和 IOS。

调整图像大小的基本需求是在通过服务器发送之前优化数据。

我对android平台base64响应方法有问题，如下

**问题**：

1.  Android 4.2：我写了这段代码`c.toDataURL("image/jpeg");` ，但我得到了这个`data:image/png;base64`
2.  Android 2.3：我无法检索 base64 数据

我做错什么了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-13T09:39:03.527

*   **Android 2.3：我无法检索 base64 数据**

旧 Android 版本不支持 canvas.toDataURL。

有一个 js 修复，但性能可能不是很好： [https ://code.google.com/p/todataurl-png-js/](https://code.google.com/p/todataurl-png-js/)

在这里查看更多信息： [toDataURL not working on android browsers](https://stackoverflow.com/questions/10488033/todataurl-not-working-on-android-browsers)

*   **Android 4.2：我写了这段代码 c.toDataURL("image/jpeg"); 但我得到了这个数据：image/png;base64**

Android 4.x 支持 canvas.toDataURL；但是，它不支持 jpeg 格式（如果您要求 jpeg，它将返回 png）。

更多细节： [https ://github.com/scottjehl/Device-Bugs/issues/33](https://github.com/scottjehl/Device-Bugs/issues/33)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:03:32.663

仅`image/png`受旧浏览器 (WebKit) 支持，这是您可以依赖的唯一编解码器。`img/jpeg`稍后添加，但许多浏览器仍然不支持。

对于 Android 2.3：尝试是否可以在 vanilla 浏览器中执行此操作。如果它在那里工作，那么它是一个 PhoneGap 问题，应该报告给作者。

# javascript - 没有 JQuery 的 JavaScript 幻灯片

> ID：15495229
> 
> 赞同：2
> 
> 时间：2013-03-19T09:05:43.097
> 
> 标签：javascript

有人可以帮我解决这个问题。首先让我把代码。

HTML：

```
<div id="FirstChild" style=" background-color: red; width: 100px; height: 50px; margin: 5px;"></div> 
```

JavaScript：

```
 window.onload = someThing;

 function someThing(){
    window.onclick = WidthChange;
 }

function WidthChange(){ 
    var presentWidth = parseInt(document.getElementById("FirstChild").style.width);
    document.getElementById("FirstChild").style.width = presentWidth + 1 +"px";
    setTimeout(WidthChange(), 3000);
} 
```

现在，当用户单击窗口时，我想在每 3 秒后将 div 的宽度增加 1 px。我希望这永远发生。但它不起作用。当我点击窗口时，宽度立即增加。我知道如何使用 jQuery animate() 来做到这一点，但我不想使用它。请只使用Javascript！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:16:21.283

with 立即增加，因为您没有设置对该函数的超时调用，而是设置对该 widthchange 函数的*返回值*的超时调用。替换`setTimeout(WidthChange(), 3000);`为`setTimeout(WidthChange, 3000)`。
当你在做的时候，也请考虑做一些事情：

```
presentWidth + 1 +"px"; 
```

您在这里同时做两件事：将整数相加*和*连接字符串。只要清楚你想先做什么：

```
(presentWidth +1) +"px"; 
```

或者只是将其分成两个语句。

最后：约定规定以大写字母开头的函数是构造函数，而不仅仅是函数/事件处理程序。所以也许也`WidthChange`改成`widthChange`？

*更新*和
之间的区别很简单。JS 将其视为一个表达式，需要将其解析为一个值（如数学中的断裂）。该表达式调用一个函数，因此可以将其解析*为该函数调用的返回值*。因此，该函数被立即调用，而不是在 3000 毫秒之后。 在没有括号的版本中，作为第一个参数传递给 setTimeout 的值是对函数的引用，无法进一步解析/简化。该函数将在超时到期后调用。如果您不清楚，只需谷歌（并将 MDN 加入书签）。`setTimeout(WidthChange, 3000)``setTimeout(WidthChange(), 3000)``WidthChange()` *`setTimeout``setTimeout MDN`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:20:10.913

**在您的代码中-**

```
 var presentWidth = parseInt(document.getElementById("FirstChild").style.width); 
```

**现在是时候 setTimeout -**

```
setTimeout(function() { document.getElementById('FirstChild').style.width = (presentWidth+1)+"px" },
               3000); 
```*

# php - 比较变量 foreach

> ID：15495242
> 
> 赞同：3
> 
> 时间：2013-03-19T09:06:16.490
> 
> 标签：php, variables, foreach, while-loop

此脚本扫描目录“上传”并列出其子文件夹。所有子文件夹都具有这种结构

YYYY-MM-DD_hh:mm:ss_text

例如

*   2013-03-18_23:59:59_cam1
*   2013-03-18_09:22:12_cam1
*   2013-03-17_19:05:02_cam2
*   2013-03-17_12:30:28_cam4

我想在新的一天制作单独的 UL TAGS（位置 9 和 10）。就像是

```
<ul><li>2013-03-18_23:59:59_cam1</li><li>2013-03-18_09:22:12_cam1</li></ul>
<ul><li>2013-03-17_19:05:02_cam2</li><li>2013-03-17_12:30:28_cam4</li></ul> 
```

我不知道如何在 foreach 语句中比较位置 9 和 10 并寻求帮助！谢谢！

这是我的脚本

```
<?php
// Name of directory 
$directory = "uploads/"; 
$action=opendir($directory);
    while($read=readdir($action)){
    $dat_array[] = $read;
    }   
    //sort array reverse
    rsort($dat_array);  
    foreach($dat_array as $read) {
        if(!preg_match("!(\.|\..)$!", $read)){      
echo '<ul><li><a href="dir.php?id='.$read.'"><span>'.$read.'</span><span></span></a></li></ul>'; 
        } 
    }   
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:16:30.457

试试这个代码：

```
// Name of directory 
$dat_array              = array();
$directory              = "uploads/"; 
$action                 = opendir($directory);
while($read             = readdir($action)){
  $exp                  = explode("_",$read);
  $dat_array[$exp[0]][] = $read;
}   
rsort($dat_array); 

foreach($dat_array as $val){
   echo "<ul>";
   foreach($val as $v){
      echo "<li>".$v."</li>";
   }
   echo "</ul>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:19:13.303

尝试：

```
<?php

// same as a glob() on a dir, just for testing
$data = array('2013-03-18_23:59:59_cam1',
    '2013-03-18_09:22:12_cam1',
    '2013-03-17_19:05:02_cam2',
    '2013-03-17_12:30:28_cam4');

$tmp = '';
foreach($data as $k => $v) {
    $day = substr($v,0,10);
    if ($day != $tmp) {
        $HTML .= '</ul><i>'.$day.'</i><ul>';
    }
    $HTML .= '<li>'.$v.'</li>';
    $tmp = $day;
}
// add a closing tag to the end
$HTML .= '</ul>';

// NOTE: must remove inital closing tag
echo '<p>Daily lisitng:</p>'.substr($HTML,5);
?> 
```

结果是：

每日清单：

*2013-03-18*

*   2013-03-18_23:59:59_cam1
*   2013-03-18_09:22:12_cam1

*2013-03-17*

*   2013-03-17_19:05:02_cam2
*   2013-03-17_12:30:28_cam4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:21:15.970

```
 <?php
    // Name of directory 
    $directory = "uploads/"; 
    $action=opendir($directory);
        while($read=readdir($action)){
        $dat_array[] = $read;
        }   
        //sort array reverse
        rsort($dat_array);  

        foreach($dat_array as $read) {
           $date1=explode("_",$read);
           if($date2!=$date1)
           {
           echo"<ul>";
           }
    echo '<li><a href="dir.php?id='.$read.'"><span>'.$read.'</span><span></span></a></li>';
          if($date2!=$date1)
           {
           echo"</ul>";
           }
     $date2=$date1;

        } 

    ?> 
```

# iis - IIS 应用程序池的内存使用过多

> ID：15495243
> 
> 赞同：2
> 
> 时间：2013-03-19T09:06:22.567
> 
> 标签：iis

我的 Windows Server 在 IIS 7.5 上运行 Web 应用程序。

我想知道为什么 IIS 应用程序池使用大量内存。

请参阅我从服务器捕获的屏幕截图。

![在此处输入图像描述](../Images/0cbf0656b53adc32618a192a95e03902.png)

在名为 TEST 2.0（.NET Framework 2.0 版）的应用程序池中，只有一个小型 Web 服务。但是，虚拟字节大约需要 3GB。

此外，在名为 TEST 4.0（.NET Framework 4.0 版）的应用程序池中，只有一个 Web 服务什么都不做。但是，它为虚拟字节分配了大约 9GB。

你知道为什么 IIS 7.5 会占用巨大的内存吗？有什么问题？

你有什么直观的想法吗？

为了给你更多的想法，这里是我的系统环境：

*   操作系统：Windows Server 2008 R2 Standard SP1
*   硬件：Intel(R) Xeon(R) CPU X5670 @ 2.93GHz 2.93GHz / 8.0GB RAM

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:10:54.600

简短的回答：没有错:)

您实际上并没有使用 2GB 的 RAM。这只是该进程允许的地址空间。**Private Bytes**是 RAM 使用量的度量（因此，在这种情况下为 90MB）。

来自虚拟字节的 PerfMon 定义：

**Virtual Bytes** - Virtual Bytes 是进程正在使用的虚拟地址空间的当前大小（以字节为单位）。使用虚拟地址空间并不一定意味着相应使用磁盘或主内存页面。虚拟空间是有限的，进程可能会限制其加载库的能力。

# javascript - 如何在加载该 URL 之前通过 JavaScript 小书签获取当前 URL？

> ID：15495249
> 
> 赞同：0
> 
> 时间：2013-03-19T09:06:38.987
> 
> 标签：javascript, url, firefox, bookmarklet

如果没有加载 URL 的页面，似乎 JS 小书签无法从浏览器地址栏中获取当前 URL。我尝试了以下但不工作。（在 FF 19.0.2 中）

1.  window.location.href
2.  文档.location.href
3.  self.location.toString()

是否可以在不加载的情况下从书签中加载 URL？</p>

# javascript - 自动刷新 IMG 的 src 属性

> ID：15495252
> 
> 赞同：1
> 
> 时间：2013-03-19T09:06:47.353
> 
> 标签：javascript, html

```
<html>
    <head>
        <link rel='stylesheet' type='text/css' href='css/style.css'>
        <base href='http://150.20.1.30'><base target='_self'>
            <title>PLC</title>
        <script>
            function change(pic){
            element_buts=document.getElementById("pic");
                element_buts.src=pic;       
            }
        </script>
    </head>
    <body>
        <div class='content'>
            <div class='left'>
                <img src='1.jpg' height='80%' id='pic'>
            </div>
            <div class='right'>
                <input type='button' class='buttons' value='PLC' onclick='change("1.jpg")'></br>
                <input type='button' class='buttons' value='Furnace Draft' onclick='change("9.jpg")'></br>
                <input type='button' class='buttons' value='Drum Level Graph' onclick='change("3.jpg")'></br>
                <input type='button' class='buttons' value='Boiler Blowdown Time Setup' onclick='change("10.jpg")'></br>
                <input type='button' class='buttons' value='Steam Press and Flow Graph' onclick='change("4.jpg")'></br>
                <input type='button' class='buttons' value='Boiler Drum and Dearator Level' onclick='change("5.jpg")'></br>
                <input type='button' class='buttons' value='Stack and Dearator Temperature' onclick='change("7.jpg")'></br>
                <input type='button' class='buttons' value='Steam Flow and Pressure Graphs' onclick='change("8.jpg")'></br>
                <div class='footer_right'>  
                </div>
            </div>
        </div>
    </body>
</html> 
```

以上是我的 html 和 javascript 代码 我对该函数的引用是[http://www.w3schools.com/js/tryit.asp?filename=tryjs_lightbulb](http://www.w3schools.com/js/tryit.asp?filename=tryjs_lightbulb)当您单击按钮时，此代码上的内容`<div class='right'>`将在之前更改函数的值`change()`，我的问题是我需要放置什么代码或函数以使图像刷新或自动刷新，示例我最后单击 PLC 按钮，我需要连续刷新以便 1.jpg pic 显示更新的图像. thx 对不起，我是 java 脚本中的新手 thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:26:34.447

我不知道我是否 100% 理解您的问题，但是如果您需要每 N 秒刷新一次图像，则必须通过添加问号来更改其 URL（`?` ) 和一些随机内容（例如时间戳）来更改其 URL .

此代码将为您工作：

```
// Let's set refresh time to 5 seconds
var N = 5;

// Function that refreshes image
function refresh(imageId, imageSrc) {
    var image = document.getElementById(imageId);
    var timestamp = new Date().getTime();
    image.src = imageSrc + '?' + timestamp;       
}

// Refresh image every N seconds
setTimeout(function() {
    refresh('pic', 'myImage.jpg');
}, N * 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:19:01.333

只是看着它，我很确定你的代码有效。好吧，我知道这样做。

```
<img id="pic" src="https://www.google.com.au/images/srpr/logo4w.png"/>
<input type="button" value ="Yahoo" onclick="change('http://l.yimg.com/ao/i/mp/properties/frontpage/eclipse/img/y7-logo_default.v1.png')" />
<input type="button" value ="Google" onclick="change('https://www.google.com.au/images/srpr/logo4w.png')" />    

<script>
    function change(src){
       document.getElementById('pic').src = src;
    }
</script> 
```

# javascript - jQuery如何实现动画？

> ID：15495260
> 
> 赞同：2
> 
> 时间：2013-03-19T09:07:12.787
> 
> 标签：javascript, jquery, performance, jquery-ui

jQuery 是否依赖于将 CSS 类应用于某个 DOM 元素来应用动画，例如拖放、调整大小等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:09:28.523

根据[文档](http://api.jquery.com/animate/)：

.animate() 方法允许我们在任何数字上创建动画效果`CSS property`。唯一需要`parameter`的是一个普通的`CSS`属性对象。

在这里我找到了方法[定义](http://www.w3schools.com/jquery/eff_animate.asp)那里面发生了什么。

# objective-c - 创建和存储用户定义的表单模板

> ID：15495262
> 
> 赞同：1
> 
> 时间：2013-03-19T09:07:16.857
> 
> 标签：objective-c, data-storage

我对 Xcode 中的 IOS 编程比较陌生，所以我希望在这里能得到一点帮助。目前，我正在开发一个让用户能够创建自己的表单模板的应用程序。（在屏幕上滑动控件并保存）

我想知道如何在技术上做到这一点。有没有可以找到类似示例的教程？（如何存储数据，如何存储添加到模板中的控件）

目前有 nog 后端（数据必须存储在本地），但将来会有。

# extjs - 如何在 ExtJS 的详细模型中设置网格数据索引？

> ID：15495271
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:07:56.093
> 
> 标签：extjs

我有两个模型，A 有一个 B 和一个商店。

```
Ext.create('Ext.grid.Panel', {
    标题：'列演示'，
    商店：我的商店，
    列： [
        {text: 'b_id', dataIndex:'record_of_A.b().id' }, // 比如这样
    ],
    宽度：400，
    forceFit：是的，
    renderTo: Ext.getBody()
});

```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:20:09.103

您可以使用渲染器实现此目的：

例如：

```
Ext.create('Ext.grid.Panel', {
    title: 'Column Demo',
    store: myStore,
    columns: [{
        text: 'b_id',
        renderer: function (value, meta, record) {
            return record.getb().get('id');
        }
    }],
    width: 400,
    forceFit: true,
    renderTo: Ext.getBody()
}); 
```

这是一个小提琴：http: [//jsfiddle.net/johanhaest/HRFZK/](http://jsfiddle.net/johanhaest/HRFZK/)

# phantomjs - PhantomJS、CasperJS - 请求、响应和文件下载

> ID：15495274
> 
> 赞同：2
> 
> 时间：2013-03-19T09:08:09.570
> 
> 标签：phantomjs, casperjs

我想在访问站点时查看通信流程。

到目前为止，我使用的是 page.onResourceRequested 和 page.onResourceReceived。例子：

```
page.onResourceReceived = function(R) {

    console.log(R.id+' '+R.status+' '+R.contentType+' '+R.redirectURL);
}; 
```

这起到了一种魅力。问题：看来我必须有能力下载某些文件（即查看响应正文，是图像还是 javascript 文件）。

原来 1.8.2 版没有这个功能，目前还不清楚 1.9 版是否会有。所以...... CasperJS 有“下载”方法。

但是将 PhantomJS 移植到 casperjs 变得很棘手。例如我可以使用：

```
casper.on("http.status.301", function(resource) {
    this.echo(resource.url + " is permanently redirected", "PARAMETER");
}); 
```

来自 casperjs 的示例 events.js

这实际上是一个 phantomjs 响应......但我必须监控所有请求/响应

所以我试着做：

```
var casper = require("casper").create(
  {
    verbose: true,
    logLevel: "debug",
    exitOnError: error,
    onResourceReceived: resRecv,
    onResourceRequested: resReq,
}

); 
```

有：函数 resRecv(R) {

```
console.log( R.id+' '+R.status+' '+R.contentType+' '+R.redirectURL); 
```

}

哪个不起作用，因为 R 不是响应？如何获得与 'casper.on("http.status.301" ...' 中的参数相同的参数？

或者也许我错了，PhantomJS 毕竟可以下载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T01:18:49.230

您使用的是哪个版本的 CasperJS？1.1 文档表明传递给 onResourceReceived 和 onResourceRequested 的第一个参数是对 casper 对象本身的引用。这对我有用：

```
 casper.options.onResourceRequested = function(R, req) { ... } 
```

其中 req 具有您正在寻找的对象属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:53:06.340

但我认为它只获得类型 3** 重定向，而不考虑具有元标记重定向和通过 javascript 重定向的网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T02:45:19.117

这是一个迟到的答案，也许不是你想要的，但我发现像[Charles](http://www.charlesproxy.com/)这样的网络代理在调试 PhantomJS / CasperJS 脚本时是一个非常宝贵的工具。它位于浏览器和远程站点之间，报告所有请求和响应。它精通 SSL，因此它以纯文本形式显示 HTTPS 交换。

唯一需要注意的是，您可能需要在`ignore-ssl-errors`设置为 true 的情况下运行，如下所示：

```
casperjs --ignore-ssl-errors=true --proxy=127.0.0.1:8888 ./casper-test.js 
```

# objective-c - 为已弃用的方法添加注释

> ID：15495276
> 
> 赞同：7
> 
> 时间：2013-03-19T09:08:13.137
> 
> 标签：objective-c, xcode, deprecated

我有几种方法要弃用。

我用以下方法做到这一点：

```
+(void)myMethod:(NSString*)abc __deprecated; 
```

这有效，但我如何添加消息？像“改用有条不紊的xyz”之类的东西......

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T07:30:50.137

正如尼古拉斯史密斯在评论中提到的那样。解决方案是：

```
__attribute((deprecated("use x method"))) 
```

如果你愿意，你也可以使用不那么复杂的：

```
__deprecated_msg("use x method") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-03T09:50:06.083

我倾向于使用这个：

```
__deprecated_msg("use method x instead") 
```

而不是：

```
__attribute((deprecated("use method x instead"))) 
```

它们在引擎盖下实际上是相同的，但第一个更清楚一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-01T08:07:41.270

## - 对于 SWIFT 代码：

把它放在方法的正上方： `@available(*, deprecated: <#Version#>, message: <#Message#>)`

例子：

```
@available(*, deprecated: 11, message: "Use color assets instead")
public struct ColorPaletteItemResource: ColorPaletteItemResourceType {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:11:52.377

我认为您需要使用文档生成器：Doxygen、Headerdoc 等。

我推荐你[Appledoc](http://gentlebytes.com/appledoc/)。它易于使用，有很好的文档记录并启用了降价样式。

# google-app-engine - 在python上保留选定的下拉值

> ID：15495281
> 
> 赞同：1
> 
> 时间：2013-03-19T09:08:29.657
> 
> 标签：google-app-engine, drop-down-menu, python-2.7

我使用带有 python 的谷歌应用引擎。我在 html 上有一个下拉菜单，但每次提交表单时，下拉菜单都会返回第一个选项。我发现教程只能用 php 来做到这一点。有没有办法用python做到这一点？

```
 {% for ctr in countries %}
          {% if ctr == sele_country %}
              <option selected="selected">ctr</option>
          {% else %}
              <option>ctr</option>
          {%endif%}
        {%endfor%} 
```

**更新：已解决**

我找到了解决方案。正确的代码是

```
{% for ctr in countries %}
          {% if ctr == sele_country %}
              <option selected="selected">{{ctr}}</option>
          {% else %}
              <option>{{ctr}}</option>
          {%endif%}
        {%endfor%} 
```

我不知道为什么，但是在循环内部，我需要在 ctr 上再次添加 bruckets。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:46:27.307

不要`selected_value`用大括号括起来，你会没事的：

```
{% for value in values %}
  {% if value == selected_value %}
     <option selected>{{value}}</option>
  {% else %}
     <option>{{value}}</option>
  {% endif %}
{% endfor %} 
```

# python-3.x - Python3乌龟如何等到按键

> ID：15495283
> 
> 赞同：0
> 
> 时间：2013-03-19T09:08:32.397
> 
> 标签：python-3.x, turtle-graphics

我有一个用 Python3 turtle 编写的简单游戏游戏完成后我想显示消息“继续？(y/n)' 并等待用户按下键盘上的按钮。任何想法如何实现等待功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:54:22.763

看看`textinput`方法：

```
def textinput(self, title, prompt):
    """Pop up a dialog window for input of a string.

    Arguments: title is the title of the dialog window,
    prompt is a text mostly describing what information to input.

    Return the string input
    If the dialog is canceled, return None.

    Example (for a TurtleScreen instance named screen):
    >>> screen.textinput("NIM", "Name of first player:")

    """
    return simpledialog.askstring(title, prompt) 
```

# java - Apacheds：在自定义分区中搜索

> ID：15495284
> 
> 赞同：0
> 
> 时间：2013-03-19T09:08:42.653
> 
> 标签：java, sql, ldap, apacheds

我有一个关系数据库，其中包含我想通过 LDAP 访问的用户/地址数据。我正在使用 apacheDS 并且正在编写一个自定义分区。我已经可以从我的数据库中返回条目，但我想知道实现搜索/过滤的最佳方法是什么。

这篇文章： [http](http://markmail.org/message/zxeu2xydfhspexbx#query:+page:1+mid:yxs6d7vnn7jqcmei+state:results) ://markmail.org/message/zxeu2xydfhspexbx#query:+page:1+mid:yxs6d7vnn7jqcmei+state:results表明过滤是一件非常复杂的事情（不仅仅是一些“ifs”）。它指向 DefaultSearchEngine [http://svn.apache.org/repos/asf/directory/apacheds/tags/1.5.5/xdbm-search/src/main/java/org/apache/directory/server/的实现xdbm/search/impl/](http://svn.apache.org/repos/asf/directory/apacheds/tags/1.5.5/xdbm-search/src/main/java/org/apache/directory/server/xdbm/search/impl/) 但我不明白如何使用它来搜索我的数据库。

我的问题是：

1.  有没有办法定义映射“LDAP 属性 -> SQL 表/列”（如“cn -> 表人，列 FirstName”），这样我就不必实现任何东西来使搜索工作？

2.  如果没有，是否有一个 API 可以为我解析过滤表达式（像这样： (&(cn=foo*)(sn=bar)) ），我只需要实现这样的方法： `boolean matches(ServerEntry e, String attributeName, String value, ... comparisonType)`

3.  如果没有，除了自己解析过滤表达式并实现所有与、非或逻辑和数据库搜索之外，还有其他明显/简单的方法来实现搜索吗？

我相信我不是唯一遇到此类问题的人，但我没有找到任何有用的文档或示例，并且只有一个 sourceforce 项目（penrose）没有任何源代码。我非常感谢您能提供的任何帮助。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:35:21.567

查看[此](http://markmail.org/message/wmye7pk73uqgjfwa)答案以了解非常相似的要求。您无需解析过滤器，它已经作为 ExprNode 可用，您只需要一个简单的 LDAP-SQL 转换层，具体取决于需要。

# ruby-on-rails-3 - 在 Ember 中单击时显示编辑模板

> ID：15495287
> 
> 赞同：1
> 
> 时间：2013-03-19T09:08:52.650
> 
> 标签：ruby-on-rails-3, ember.js

我的模板中有一个姓名列表

index.handlebars.js.coffee

```
<ul>
    {{#each income in controller}}
      <li {{action editIncome}}>{{income.name}}</li>
    {{/each}}
</ul>

{{#if isEdited}}
  // I want to edit clicked element here
{{else}}
  {{view EmberMoney.NewIncomeView}}
{{/if}} 
```

收入控制器.js.coffee

```
EmberMoney.IncomesIndexController = Ember.ArrayController.extend

  isEdited: false

  addIncome: ->
    EmberMoney.Income.createRecord(name: @get('newIncomeName'))
    @get('store').commit()
    @set('newIncomeName', "")

  editIncome: ->
    this.set('isEdited', true) 
```

router.js.coffee

```
EmberMoney.Router.reopen
  location: 'history'

EmberMoney.Router.map ->
  @resource 'incomes', ->

EmberMoney.IncomesIndexRoute = Ember.Route.extend
  model: -> 
    EmberMoney.Income.find() 
```

单击每个名称时，我不想在此页面上呈现编辑模板。因此，如果我单击列表下的名称“Kate”，它将生成一个编辑此记录的模板。

我不明白该怎么做。感谢帮助。

UPD：我的问题是我不明白如何在我想编辑元素的地方知道编辑的对象 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:42:20.893

尝试在您的路线中处理您的状态。

```
EmberMoney.Router.map ->
  @resource 'incomes', ->
    @route 'index' # this route is used for creating new records
    @route 'edit', { path: '/:income_id/edit' } # this route is used to edit a record

EmberMoney.IncomesRoute = Ember.Route.extend
  model: -> 
    EmberMoney.Income.find()

EmberMoney.IncomesEditRoute = Ember.Route.extend

  setupController: (controller, model) ->
    if model.get('transaction') == @get('store').get('defaultTransaction')
      transaction = @get('store').transaction()
      transaction.add model
    controller.set('content', model)

  deactivate: ->
    @modelFor('incomes.edit').get('transaction').rollback()

  events: 
    submit: (record) ->
      record.one 'didUpdateRecord', =>
        @transitionTo 'index'
      record.get('transaction').commit() 
```

现在将您的模板放入`incomes.handlebars`, 而不是`index`

```
<ul>
    {{#each income in controller}}
      <li>{{#linkTo "incomes.edit" income}} {{income.name}} {{/linkTo}}</li>
    {{/each}}
</ul>
{{outlet}} 
```

然后在`incomes/index`：

```
{{view EmberMoney.NewIncomeView}} 
```

并在`incomes/edit`：

```
<form {{action submit content on="submit"}}>
  {{view Ember.TextField valueBinding=name}}
</form> 
```

这里的优势是现在您已将状态存储在路线中。此外，您可以控制每个路线/状态内的事件。

我没有包含`IncomesIndexRoute`应该管理创建新记录的逻辑。`edit`但我想你可以遵循与路线类似的逻辑。

`IncomesIndexController`最后，如果您设法处理路线中的所有内容，您应该能够删除。

# jquery - HierarchyRequestError：尝试插入时出现 DOM 异常 3

> ID：15495289
> 
> 赞同：3
> 
> 时间：2013-03-19T09:08:53.053
> 
> 标签：jquery, domexception

尝试使用 insertbefore 插入选项时，出现此错误。未捕获的错误：HierarchyRequestError：DOM 异常 3

```
var target = $('#divA option:selected').prev().first();
    var options = $('#divA option:selected');
    if (options.prev().text() == target.text()) {
        return;
    }
    options.insertBefore(target); 
```

如果`options.length > 2` 出现这个错误，如果是1或者2都没有问题。当多选到顶部时，所有选定的项目都将消失。问题是什么？你可以帮帮我吗？

示例：http: [//jsfiddle.net/tHVsw/](http://jsfiddle.net/tHVsw/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T09:45:20.443

当不允许将元素插入到 DOM 中的特定点（*即不可能*）时，会引发此错误，您可以使用`if`语句来检查是否可以插入。

```
if ( !target.prev().length ) 
    target.parent().prepend(options);
else 
    target.before(options); 
```

如果`length`目标元素的前一个兄弟元素为0，则将元素添加到父元素之前，否则将其插入到目标元素之前。

[http://jsfiddle.net/fKx68/](http://jsfiddle.net/fKx68/)

# css - @font-face 没有正常工作

> ID：15495292
> 
> 赞同：0
> 
> 时间：2013-03-19T09:08:58.150
> 
> 标签：css, fonts, font-face

所以我使用了一些非常简洁的字体，而且我以前从未遇到过@font-face 的任何问题，但是，这些似乎不起作用。:( 任何想法出了什么问题？

CSS 路径：[http ://carlpapworth.com/friday-quiz/css/style.css](http://carlpapworth.com/friday-quiz/css/style.css)

[字体文件夹的路径： http](http://carlpapworth.com/friday-quiz/css/fonts) ://carlpapworth.com/friday-quiz/css/fonts

```
@font-face {
font-family: silverfake;
font-weight: 100;
font-style: normal;
src: url('fonts/silverfake.otf');
}

@font-face {
font-family: molesk;
font-weight: 100;
font-style: normal;
src: url('fonts/molesk.otf');
}

@font-face {
font-family: ballpark;
font-weight: 100;
font-style: normal;
src: url('fonts/ballpark.TTF') format("truetype");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:13:58.737

您可能没有正确链接到字体。它通常是小东西；

```
src: url('../fonts/silverfake.otf'); 
```

代替

```
src: url('fonts/silverfake.otf'); 
```

尝试使用[fontsquirrel webfont 生成器](http://www.fontsquirrel.com/tools/webfont-generator)来确保所有内容都正确链接，并且对浏览器友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:14:19.940

至少找到了让 Molesk 工作的答案：

```
@font-face {
font-family:"molesk";
src:url("molesk.eot?") 
format("eot"),url("molesk.woff") 
format("woff"),url("molesk.ttf") 
format("truetype"),url("molesk.svg#molesk") 
format("svg");
font-weight:normal;
font-style:normal;} 
```

# java - 如何使变量方法将单个数组作为可变参数数组的第一个值？

> ID：15495293
> 
> 赞同：6
> 
> 时间：2013-03-19T09:09:03.807
> 
> 标签：java, arrays, variadic-functions

给定变量：

```
Object[] ab = new Object[] { "a", "b" };
Object[] cd = new Object[] { "c", "d" }; 
```

调用以下方法时：

```
public static void m(Object... objects) {
    System.out.println(Arrays.asList(objects));
} 
```

使用：

```
m(ab, cd); 
```

我得到了预期的输出：

```
[[Ljava.lang.Object;@3e25a5, [Ljava.lang.Object;@19821f] 
```

但是使用时：

```
m(ab); 
```

我得到：

```
[a, b] 
```

自`strings <- ab`与非`strings[0] <- ab`。

如何*强制*编译器将`ab`数组作为数组的第一个值`strings`，然后输出：

```
[Ljava.lang.Object;@3e25a5 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T09:12:28.543

通过时输入它，你会得到你想要的 -

```
m((Object)ab); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:18:57.427

除了@Sudhansu 的建议。您可以如下定义变量，这样您就不必在传递单个数组时在方法调用中进行强制转换。

```
Object ab = new Object[] { "a", "b" };
Object cd = new Object[] { "c", "d" }; 
```

# c++ - CreateDirectory Windows API 问题

> ID：15495294
> 
> 赞同：-4
> 
> 时间：2013-03-19T09:09:14.007
> 
> 标签：c++, windows

我正在使用 CreateDirectory 给定路径，其中包含“d:\temp\s1\”该函数在 1000 次中失败一次，因为我击中相同 no 的概率较小，我认为这不是问题，但如果返回“ERROR_ALREADY_EXISTS”它仍然创建该目录

例如我有这个目录结构

```
d:\温度\s1\1002
d:\温度\s1\1009
.....................
.....................

```

等等说 30 个这样的文件夹，当 getLastError() 返回“ERROR_ALREADY_EXISTS”时，我继续循环并检查下一个随机数。我发现那些新目录正在无限创建，而这些目录以前不存在……这很奇怪，任何帮助都是最好的，因为它是非常随机的

代码是这样的...

```
int randNo = 0;
while(1)
    {
    randNo = rand(); 
    cnt++;
    sprintf(tempDirPath,"d:\\temp\\S1\\%d",randNo);

    mbstowcs(wBuf,tempDirPath,_MAX_PATH);
    bVal = CreateDirectory((LPCTSTR)wBuf,NULL);
    retVal = GetLastError();

    if( retVal == ERROR_ALREADY_EXISTS)
    {
        continue;                   
    }
    else if (retVal == ERROR_PATH_NOT_FOUND)
    {
        bVal = CreateFolder(tempDirPath); // i'm creating a folder for further use
    }
    break;      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:36:15.880

我想我可以猜出您的问题是什么：`GetLastError`即使没有错误，您也可以检查错误代码。`CreateDirectory`在检查错误代码之前，请务必检查返回的值。

这里发生的是`CreateDirectory`失败，设置错误代码。然后下次你调用`CreateDirectory`它成功但它不会清除错误代码，让它保持上次函数失败的状态。

不只是for `CreateDirectory`，*所有*可能失败的函数都会返回一个表示失败的值，只有这样你才能检查`GetLastError`错误是什么。

# mongodb - 如何从 mongoDB 中的 DBCursor 检索所有值

> ID：15495295
> 
> 赞同：1
> 
> 时间：2013-03-19T09:09:14.730
> 
> 标签：mongodb, mongodb-java

我不知道我的集合中的属性名称是什么。

```
DBCollection objDBC = db.getCollection(collectionName);
BasicDBObject searchQuery = new BasicDBObject();
searchQuery.put(attributeName, attributeValue);
DBCursor cursor = objDBC.find(searchQuery); 
```

现在从 DBCursor 如何检索所有属性的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:19:26.187

DBCursor[实际上](http://api.mongodb.org/java/2.0/com/mongodb/DBCursor.html)是一个结果迭代器，每个结果元素都是一个[DBObject](http://api.mongodb.org/java/2.0/com/mongodb/DBObject.html)，因此可以转换为一个映射；要检索所有值，您可以执行以下操作：

```
while(cursor.hasNext()) {
    DBObject resultElement = cursor.next();
    Map resultElementMap = resultElement.toMap();
    Collection resultValues = resultElementMap.values();
    //Do something with the values
} 
```

# sharepoint - 如何使用 CSOM 检索特定类型的站点？

> ID：15495302
> 
> 赞同：4
> 
> 时间：2013-03-19T09:09:34.027
> 
> 标签：sharepoint, csom

我正在制作一个连接到 SharePoint 2013 的应用程序。我正在使用 CSOM 来处理 SharePoint。我想显示当前用户关注的站点（团队站点）的新闻源。

要获取新闻源，我执行以下步骤：

*   首先，我从`SocialFollowingManager`.
*   接下来，通过站点信息，我获得了站点的新闻源信息。

在获取关注站点列表（上面的第一步）时，我可以获得博客站点以及团队站点。我只想获得团队网站。

有没有办法只获得团队网站（团队网站模板）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T20:25:32.360

```
ClientResult<SocialActor[]> socialActors = new SocialFollowingManager(clientContext).GetFollowed(SocialActorTypes.Sites | SocialActorTypes.ExcludeContentWithoutFeeds); 
```

这将为您提供每个站点，不包括没有提要的站点，即 TeamSites

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T19:22:18.597

不幸的是，社交 API 只为您提供网站列表。您必须从那里手动过滤以确定要显示的站点。这并不理想，但它是 API 的一个限制。

# proxy - 通过一个端口的隧道

> ID：15495304
> 
> 赞同：1
> 
> 时间：2013-03-19T09:09:41.267
> 
> 标签：proxy, port, tunnel

我的网络连接有限，只打开了几个端口（80,443，...），我也有没有这些限制的服务器，它超出了有限的网络。

有什么方法可以通过一个端口隧道连接到所有其他端口？我可以在我的服务器上安装任何我想要的东西——目前有 Ubuntu server 12。

你能建议我任何解决方案吗？如果有的话。

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:00:17.197

我将向您指出有关超级用户的这个问题：

*   [如何通过 SSH 隧道传输我的所有网络流量？](https://superuser.com/questions/62303/how-can-i-tunnel-all-of-my-network-traffic-through-ssh)

最重要的建议是尝试使用[sshuttle](https://github.com/apenwarr/sshuttle/)，因为您使用的是 Linux，这将是一个不错的选择。

但 Linux 也对此提供了内置支持，您可以使用以下命令找到详细信息`man ssh`：

```
 The following example would connect client network 10.0.50.0/24 with
 remote network 10.0.99.0/24, provided that the SSH server running on the
 gateway to the remote network, at 192.168.1.15, allows it:

   # ssh -f -w 0:1 192.168.1.15 true
   # ifconfig tun0 10.0.50.1 10.0.99.1 netmask 255.255.255.252 
```

没有提到的一件事是设置 VPN，但只有在您`1723`打开端口（对于 PPTP）时才能这样做。

# sql - 将 nvarchar 转换为 int 时出错

> ID：15495306
> 
> 赞同：1
> 
> 时间：2013-03-19T09:09:49.493
> 
> 标签：sql, sql-server-2008-r2

```
SELECT 
    New_accountid AS AccountId
FROM 
    BingMapsPlatform_MSCRM.dbo.FilteredAccount WITH (NOLOCK)
WHERE 
    new_islicensed = 1
    AND new_accountid NOT IN (SELECT DISTINCT CONVERT(INT,New_AccountId)
                              FROM BingMapsPlatform_MSCRM.dbo.New_keydenylistExtensionBase WITH (NOLOCK)
                              WHERE New_AccountId IS NOT NULL) 
```

我从这个脚本中得到这个错误。请帮我 。

> *错误消息：将 nvarchar 值“帐户 1”转换为数据类型 int 时，状态 1，第 1 行
> 转换失败。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:30:25.427

Id 是 int 吗？可以是 guid 或顺序 guid。如果不是，则将表分成两半，然后重新运行，等等，直到您确定产生错误的行（我会先尝试只用一行来检查是否有错误）。哦，先将表格内容复制到备份中（但你知道的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:27:26.033

此行导致错误：

```
CONVERT(INT,New_AccountId) 
```

使用过滤器在表格上进行常规选择：`where accountId = 'account 1'`更改此值并重试。

考虑使用[ISNUMERIC(input)](http://msdn.microsoft.com/en-us/library/aa933213%28v=sql.80%29.aspx)函数在转换之前确定其是否为数字，如果不是，则使用 0 或 -1 作为默认值（以查看[此答案](https://stackoverflow.com/a/2419469/395659)为例）。

# ios - 空且完全免费的串行队列

> ID：15495310
> 
> 赞同：1
> 
> 时间：2013-03-19T09:10:09.653
> 
> 标签：ios, objective-c, macos, objective-c-blocks, grand-central-dispatch

如何释放我的串行队列的块堆栈？我已经将异步执行的一些块放入队列中，并且在某些时候我想完全释放这个队列为空。我正在使用低级`dispatch_queue_t`。可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:21:49.447

你用的是什么队列？？

是 NSOperationQueue 吗？

然后`-[NSOperationQueue cancelAllOperations]`应该做的工作。

# version-control - Rational Team Concert：仅将选定的工作项从流合并到其子项。

> ID：15495319
> 
> 赞同：2
> 
> 时间：2013-03-19T09:10:26.750
> 
> 标签：version-control, rational-team-concert, ibm-rational

我们计划从集成流创建一个子流（针对每个主要版本，在发布时），并继续为该特定版本使用子流。

比如说，我们在 2013 年 2 月 1 日创建了这个子流。集成流上的开发继续进行，并且没有任何东西传递到子流中。因此，从 2 月 1 日到 4 月 30 日，我们将几个工作项交付给集成流，并且一些工作项被确定为也需要进入子流的更改。所有此类工作项都将标有特定标签。

现在，有没有办法只将与这些工作项关联的变更集从集成流传递到子流中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:29:05.873

> 有没有办法只将与这些工作项关联的更改集从集成流传递到子流中。

不容易，特别是考虑到交付一些变更集而不是其他变更集可能会以这些文件的历史记录中的空白结束（而且它们不[容易找到](https://jazz.net/forum/questions/103103/how-do-you-find-missing-changesets-if-there-is-a-gap-in-the-timeline)）。

您可以做的是选择这些工作项中列出的更改集，然后**`New -> Patch`**从上下文菜单中进行选择。
您将在补丁中转换这些更改集，您可以将其应用到您想要的任何地方。

![新补丁](../Images/438254e296a9830589dd1a9b30ecfec3.png)

诀窍是设法使用特定标签列出来自 WI 的所有更改集

# url - 在 Joomla 中允许 URL 参数

> ID：15495321
> 
> 赞同：1
> 
> 时间：2013-03-19T09:10:27.723
> 
> 标签：url, joomla, parameters

我正在使用内部 SEO URL 建立一个 Joomla (2.5) 网站。URL 如下所示[http://www.mydomain.com/category/article.htm](http://www.mydomain.com/category/article.htm)

在文章中，我使用一些自定义 php 代码从不同的数据库中获取数据并显示它。虽然我现在想链接到“报价”，但我想使用对 seo 友好的 url，但也使用 url 为目标 URL 站点提供一些参数，例如：

[http://www.mydomain.com/category/article.htm?id=100](http://www.mydomain.com/category/article.htm?id=100)

这样做时，我总是得到我定义的错误页面或回退到主站点。有没有办法允许 url 中的参数但仍然调用正确的页面？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:25:19.187

我在询问时找到了解决方案。

我在 href="" 属性中使用了 SEO-URL，例如

```
<a href="category/article.htm?id?<?php echo $row['id']; ?>"</a> 
```

虽然我需要使用绝对网址，例如

```
index.php?option=com_content&view=article&id=47&Itemid=155 and 
```

Joomla 识别了 URL，将其转换为 SEO-URL 并添加了没有后备的参数。

:)

# php - PHP 数组 JSON 到 Javascript

> ID：15495323
> 
> 赞同：0
> 
> 时间：2013-03-19T09:10:45.060
> 
> 标签：php, javascript, json

在php中

```
<?php
    $arr = array ('a'=>1,'b'=>2,'c'=>3,'d'=>4,'e'=>5);
    echo json_encode($arr); // {"a":1,"b":2,"c":3,"d":4,"e":5}
?> 
```

在 JavaScript 中，

```
$.getJSON('drivetracker2.php', function(data) {
    console.log(data);
}); 
```

我正在尝试访问通过 json 发送到 javascript 的 php 数组。
但它说数据未定义。
有谁知道为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:12:52.897

尝试这个

```
 $.post('drivetracker2.php', function(data) {
  console.log(data);
 },'json'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:17:10.347

在回显 json 之前添加它。

```
header('Content-Type: application/json'); 
```

# android - 当文本位于 ScrollView 内时，文本隐藏在 Webview 的软键盘下

> ID：15495328
> 
> 赞同：2
> 
> 时间：2013-03-19T09:11:02.860
> 
> 标签：android, webview

下面是我的 main.xml 文件，其中 Webview 放在 ScrllView 中，如果内容更多，则可以滚动。

```
<ScrollView
    android:id="@+id/svWriteScrollView"
    android:fillViewport="true"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<WebView
    android:id="@+id/webVi"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
 </ScrollView> 
```

我正在将带有 contenteditable TRUE 标志的 html 内容加载到上面的 WebView 中。

每当我用 softKeypad 输入更多文本时，输入低于 IME 的文本和任何输入都不可见。

如何在 IME 上方显示输入的文本。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:30:54.807

我认为将滚动视图放在滚动视图中被认为是“不好的做法”。

1.  尝试从您的布局中删除 ScrollView 并只保留 WebView （然后它将为您处理滚动）。

2.  如果您真的想要现在拥有的东西，那么作为最后的手段，我会尝试使用清单属性 android:windowSoftInputMode ，正如我在此处的回答中所描述的那样：

[网页可以知道android虚拟键盘吗](https://stackoverflow.com/questions/11264465/can-webpage-be-aware-of-android-virtual-keyboard/15389957#15389957)

这是一个不被接受的答案，但我认为这是最完整的答案。如果使用该清单属性对您没有帮助，请参阅 (1) :-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:33:14.037

Webview 自己处理滚动。不需要将其放在滚动视图中。它只会禁用 webview 中的滚动。正如 baske 所说，如果您删除滚动视图，Android 将自行处理滚动

# machine-learning - 机器学习中准确度的最佳衡量标准是什么

> ID：15495330
> 
> 赞同：2
> 
> 时间：2013-03-19T09:11:08.093
> 
> 标签：machine-learning, weka, roc

我一直在研究机器学习概念，但我仍然无法正确掌握我可以使用哪个属性来确定什么可以告诉我系统的真实准确性（如果它是 TPR 或正确分类的实例）

我也在寻找 ROC 和 Kappa Statistic 的一个很好的解释。据我所知，ROC 衡量系统正在学习多少，而 Kappa 衡量系统在猜测多少。不过，这些都是我们有多年经验的教授的解释。查看其他技术文档，我们无法弄清楚他所说的这些术语是什么意思。

所以，我只需要知道什么可以说明我的算法的准确性，以及如果算法好的需要支持哪些属性，例如 ROC 和 Kappa 统计量。

请帮忙！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:28:19.343

关于机器学习性能的两个基本标准是误报（错误警报）率和误报（错过目标）率。比方说，您正在寻找一种特定的对象类型，如果您在 100 个类别外的对象中检测到 10 个错误的对象作为目标，那么误报率为 10%。

如果在 100 个目标对象中将 10 个真实对象标记为超类，则误报率是 10%。

通常在这两个比率之间进行权衡，ROC 曲线的面积是一个很好的性能指标

# graph - 根据 SGPlot 中的数据值改变标记颜色 - SeriesPlot

> ID：15495336
> 
> 赞同：0
> 
> 时间：2013-03-19T09:11:22.123
> 
> 标签：graph, sas

有没有办法改变 SGPlot-seriesplot 中标记的颜色？变化的意思是，标记的颜色应该是*红色*、*黄色*或*绿色*，具体取决于数据集中变量的值，从*低*、*中*到*高*不等。另请注意，我需要一条连接所有标记的线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:22:29.047

不确定您是否可以仅使用 SGPLOT 来做到这一点，但是如果您添加一个注释数据集，用您自己想要的任何颜色的注释标记替换 SGPLOT 标记（然后您可以完全跳过）应该是微不足道的。如果它是单面板 SGPLOT，您可以使用`datavalue`绘图空间直接从数据集中放置 x/y 坐标，然后根据需要调整颜色（因为您有一个每个标记一行的数据集）。

有关更多信息，请参阅以下内容：http: [//support.sas.com/resources/papers/proceedings11/277-2011.pdf](http://support.sas.com/resources/papers/proceedings11/277-2011.pdf)

# sql - SQL 查询 - 选择具有至少两个重复值的行

> ID：15495340
> 
> 赞同：4
> 
> 时间：2013-03-19T09:11:37.240
> 
> 标签：sql, select, group-by

这是我的示例表：

```
|"id","singlesaleid","quantity"
-------------------------------------
| 1,   "00278e0f",    37
| 2,   "00278e0f",    38
| 3,   "002ebd2e",    37
| 4,   "00380783",    37
| 5,   "003b3c35",    37
| 6,   "003b3c35",    38
| 7,   "0042170b",    38
| 8,   "00421b89",    37
| 9,   "00421b89",    38
| 10,  "00587f02",    37
| 11,  "00799433",    38
| 12,  "00799433",    37 
```

如何选择仅选择和分组 singlesaleid 列中至少有两个重复值的行？

结果应该是：

```
|"id","singlesaleid","quantity"
-------------------------------------
| 1,   "00278e0f",      37
| 6,   "003b3c35",      38
| 9,   "00421b89",      38
| 12,  "00799433",      37 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:15:35.293

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  singlesaleid, MIN(quantity) min_val
            FROM    TableName
            GROUP   BY singlesaleid
            HAVING  COUNT(*) > 1
        ) b a.singlesaleid = b.singlesaleid AND
            a.quantity = b.Min_Val 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9be65/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:40:52.347

`singlesaleid's`如果您想要仅具有至少 2 个重复项的任何记录（仅一个），请尝试以下代码..

```
select * from table where rowid in 
(select min(rowid) from table
group by singlesaleid
having count(*)>=2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:22:32.423

您也可以将选项与[EXISTS()](http://msdn.microsoft.com/ru-ru/library/ms188336.aspx)运算符一起使用。虽然，我不太明白，应该从组中选择哪一行，在请求中选择了一个带有 MAX(t2.Id) 的行

```
SELECT *
FROM Tablename t1
WHERE EXISTS (
              SELECT *
              FROM Tablename t2
              WHERE t1.singlesaleid = t2.singlesaleid
              HAVING COUNT(*) > 1 AND MAX(t2.Id) = t1.id
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/eb399/1)上的演示[](http://sqlfiddle.com/#!3/eb399/1)

# html - 一个好的 Windows / .NET 静态站点生成器？（类似于鹈鹕、杰基尔等）

> ID：15495341
> 
> 赞同：9
> 
> 时间：2013-03-19T09:11:39.043
> 
> 标签：html, .net, razor, web

我目前正在构建一个静态网站模板，我需要一个网站生成器来生成模板 HTML 文件（我不想复制和粘贴公共部分，而是只将它们放在一个地方）

是否有适用于 Windows / .NET 开发人员的好的静态网站生成器？（类似于 Pelican、Jekyll 等）

我[通过 Code52 找到了 Pretzel，](https://github.com/Code52/pretzel)但 Github 页面似乎相当废弃（最后一次更改是 1 年前）。

Windows 有什么替代方案吗？最好基于 .NET 并使用 Razor 引擎？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-07-08T17:52:45.847

我知道这是一个老问题，但为了完整起见，我将添加[http://wyam.io](http://wyam.io)（开源 - 代码位于[https://github.com/Wyamio/Wyam](https://github.com/Wyamio/Wyam)）。它满足 .NET 和 Razor 的要求（它实际上使用了 ASP.NET v5 的 Razor 引擎的修改版本）并建立在模块化“管道”概念之上（类似于优秀的 Metalsmith JS 生成器）。

全面披露 - 我是 Wyam 的开发人员。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-29T08:55:21.240

pretzel 和 graze 是我所知道的仅有的两个：

[http://mikaelkoskinen.net/graze-static-site-generator-using-razor/](http://mikaelkoskinen.net/graze-static-site-generator-using-razor/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-06T16:55:16.470

我正在考虑将 champ 用于具有类似要求的项目：

[https://github.com/lukevenediger/champ](https://github.com/lukevenediger/champ)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-16T01:59:30.277

没试过，但[Mixture](http://mixture.io/)对我来说似乎是最好的。

### 更新：混合物现已停产。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-09T09:26:41.127

另一个静态站点生成器可以在这里找到： [http ://www.hilbert.dk/thomas/pub/dev/StaticSiteGenerator/](http://www.hilbert.dk/thomas/pub/dev/StaticSiteGenerator/)

代码位于此处： [https ://bitbucket.org/hilbert/staticsitegenerator/](https://bitbucket.org/hilbert/staticsitegenerator/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-22T18:04:52.400

看看 Lektor：[https ://www.getlektor.com](https://www.getlektor.com)

像 WordPress 这样的基于 Web 的 gui 来编写内容。很适合为非开发人员设置，但在后台具有足够的可定制性供开发人员配置

# javascript - 自定义一页滑块不起作用

> ID：15495342
> 
> 赞同：0
> 
> 时间：2013-03-19T09:11:40.677
> 
> 标签：javascript, jquery, html, slider

我正在开发一个单页网站。您滚动/浏览网站的方式是通过使用 javascript 的自定义“滑块”。然而，问题是页面没有按应有的方式滑动。

有时，当您加载页面时，它会开始集中在页面中间。除此之外，有时当您滑动时，页面根本不滑动，有时它不会向后滑动（等等）。

预览网址：[http ://edu.serialshop.nl/ivproject/achtergrond.htm](http://edu.serialshop.nl/ivproject/achtergrond.htm)

```
<!doctype html>
<html>
<head>
<title>Skullcandy mediacollege</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<meta charset="utf-8">
<style>
body{
    padding: 0;
    margin: 0;
    overflow-y: hidden;
    background-color: #3D3B3C;
}

.absolute{
    position: fixed;
    left: 20px;
    bottom: 75px;
    height: 233px;
    width: 255px;
}

body {
    overflow-x: hidden;
}
</style>
<script>
var pageSize = 1;
$(function(){
    $("#page-wrap").wrapInner("<table cellspacing='30'><tr>");
    $(".post").wrap("<td></td>"); 
    pageSize=$body.width();
    console.log($body.width());
});

function customScroll(amount)
{
    console.log("scrolleft: " + document.body.scrollLeft + " amount: " + amount);
    document.body.scrollLeft+=amount/10;
}
</script>
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.1-beta2.js"></script>
<script>
$(document).ready(function(){
    $(window).bind('resize',function() {
        window.location.href = window.location.href;
    });
});
</script>
</head>
<body onload="javascript:window.location.href='#bottom'">
    <div id="map">
        <img src="images/achtergrond.jpg" width="3568" height="800" id="achtergrond" usemap="#m_achtergrond" alt="" />
        <img class="absolute" src="images/skelet.png" alt="skullcandy logo op een skateboard">
        <map name="m_achtergrond" id="m_achtergrond">
            <area shape="rect" coords="3142,0,3418,636" href="#" alt="Review" />
            <area shape="rect" coords="1957,0,2230,635" href="#" alt="Muziek" />
            <area shape="rect" coords="769,0,1039,636" href="#" alt="About us" />
            <area shape="rect" coords="-2,4,295,640" href="#" alt="Over skullcandy" />
        </map>
    </div>
    <div id="slider" style="position:fixed; margin-left:30%; margin-top:-10%;"></div>
    <script>
      var stage = new Kinetic.Stage({
        container: 'slider',
        width: 578,
        height: 200
      });
      var layer = new Kinetic.Layer();
      var rectHeight = 50;
      var rectWidth = 200;
      var rectY = (stage.getHeight() - rectHeight) / 2;

      var hbox = new Kinetic.Text({
        x: -10,
        y: 70,
        fontSize: 24,
        fontFamily: 'Calibri',
        text: 'slider',
        fill: 'white',
        padding: 15,
        draggable: true,
        dragBoundFunc: function(pos) {
            customScroll(pos.x);
          return {
            x: pos.x,
            y: this.getAbsolutePosition().y
          }
        }
      });

      layer.add(hbox);
      stage.add(layer);

    </script>
    <span id="bottom">
    </span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:23:34.653

```
Uncaught ReferenceError: $body is not defined : /ivproject/achtergrond.htm:32 
```

更改或添加该行`$body`到您的块。`$('body')``var $body = $('body');``$(document).ready(function(){});`

# .htaccess - 将域名重定向到IP

> ID：15495346
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:11:48.627
> 
> 标签：.htaccess, redirect, dns, wamp

使用 Wamp 配置，我在根文件夹和子文件夹（www 和 www/myPage）中都有一个 .htaccess 文件

```
Options All -Indexes
Options +FollowSymLinks
RewriteEngine on
#
# Redirect all requests for all non-canonical domains to same page in www.example.com
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\.example\.com$
RewriteRule (.*) http://www.example.com/$1 [R=301,L]
DirectoryIndex index.php index.html index.htm 
```

在我的 webhotels DNS 配置中，我重定向到特定的 IP，但它不起作用，但当我在另一台计算机下拥有域时，它似乎工作。我希望对服务器直接 IP 和域的所有请求都以 www/myPage 结尾，但 URL 为： www.example.com 。

这个 .htaccess 是否会导致我陷入循环或有什么问题？搜索了几个类似的线程并测试了一些选项，这对我来说似乎是“最好的”，但仍然无法正常工作。重写模块已启用。

更新：

好的，现在我从根文件夹中删除了 htaccess 文件，我现在可以通过域名访问服务器。问题是我使用域名和 IP 地址进入根目录，因此我必须单击相应的文件夹，然后获取 url www.example.com/myPage 作为索引文件的地址。我应该在根文件夹中使用 htaccess 文件吗？我通过 apache 命令行添加了一个别名，但似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:18:14.980

您还必须在主配置或虚拟主机部分设置适当[`ServerAlias`](http://httpd.apache.org/docs/current/mod/core.html#serveralias)的 s。

# silverlight - 自定义共享点列表表单中的错误消息

> ID：15495349
> 
> 赞同：0
> 
> 时间：2013-03-19T09:12:08.380
> 
> 标签：silverlight, sharepoint-2010

我在共享点列表中有三个需要字段列。当我尝试在 newform.aspx/editform.aspx 中添加/编辑项目时。我收到错误消息，因为“您必须为所有三个指定必填字段的值”列。

如何自定义 Newform.aspx/Editform.aspx.. 中的要求字段错误消息？

提前致谢 ...！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:47:15.440

对 SharePoint 列表项中使用的必填字段进行自定义验证的两个步骤：

1.  转到列表设置 -> 验证设置，输入公式以验证公式框中所需的列和特定列的用户消息框中的自定义错误消息。
2.  转到列表设置 -> 在“列”部分下选择所需的列，然后展开“自定义验证”并编辑该列的公式、错误消息。单击保存。

它会工作......

# android - 使用gps计算速度时应用程序在一段时间后挂起？

> ID：15495353
> 
> 赞同：1
> 
> 时间：2013-03-19T09:12:27.070
> 
> 标签：android, geolocation, gps

我正在开发具有速度计的应用程序。它可以正常工作大约 15-20 分钟，但之后应用程序挂起并冻结。会是什么原因？

我为 GPS 数据编写了一个单独的类`GPSManager`，我从中调用了一个`onGPSUpdate()` 在`MainActivity`. 在该方法中，所有速度和位置计算都已完成。

下面是我的代码：

```
public class MainActivity extends ActionBarActivity implements    OnPageChangeListener,GPSCallback,OnClickListener 
{

public void onCreate(Bundle savedInstanceState) 
     {
        super.onCreate(savedInstanceState);
        gpsManager = new GPSManager();
        gpsManager.startListening(getApplicationContext());
        gpsManager.setGPSCallback(this);
     }
    public void onGPSUpdate(Location location) 
    {
        String directionString = "NORTH";
        float speedDigital = 0 ;

          if (location.hasSpeed())
          {
            speedDigital = location.getSpeed();

            final String speedString = "" + roundDecimal(convertSpeed(speedDigital),2);
            setSpeedText(R.id.textViewSpeed,speedString);
            if (location.hasBearing())
            {

              int bearingAngle = (int) location.getBearing();
              if ((bearingAngle > 337.5D) || (bearingAngle <= 22.5D))
                  directionString = "NORTH " + bearingAngle;
              if ((bearingAngle > 22.5D) && (bearingAngle <= 67.5D))
                  directionString = "N-EAST  "+ bearingAngle;
              if ((bearingAngle > 67.5D) && (bearingAngle <= 112.5D))
                  directionString = "EAST "+ bearingAngle;
              if ((bearingAngle > 112.5D) && (bearingAngle <= 157.5D))
                  directionString = "S-EAST "+ bearingAngle;
              if ((bearingAngle > 157.5D) && (bearingAngle <= 202.5D))
                  directionString = "SOUTH "+ bearingAngle;
              if ((bearingAngle > 202.5D) && (bearingAngle <= 247.5D))
                  directionString = "S-WEST "+ bearingAngle;
              if ((bearingAngle > 247.5D) && (bearingAngle <= 292.5D))
                  directionString = "WEST "+ bearingAngle;
              if ((bearingAngle > 292.5D) && (bearingAngle <= 337.5D))
                  directionString = "N-WEST "+ bearingAngle;
            }
            textViewCompass.setText(directionString);
          }
          else{
              setSpeedText(R.id.textViewSpeed, "0.0");
          }
            Geocoder gcd = new Geocoder(this, Locale.getDefault());
            List<Address> addresses = null;
            try {
                        textViewLocation.setText(currentLocation);
                        textViewLocation.setTextColor(Color.WHITE);
                         }
            } 
            catch (IOException e){
                e.printStackTrace();
            }
     }
         private void setSpeedText(int textid,String text){
        Double val = Double.parseDouble(text);
        Integer intVal = val.intValue(); 
        TextView tv = ((TextView)findViewById(textid));
        tv.setText(""+intVal);
    }
    }
    public class GPSManager{
          private static final int gpsMinTime = 1000;
          private static final int gpsMinDistance = 0; 
        private static LocationManager locationManager = null;
        private static LocationListener locationListener = null;
        private static GPSCallback gpsCallback = null;

        public GPSManager(){       
                GPSManager.locationListener = new LocationListener(){
                        @Override
                        public void onLocationChanged(final Location location) {        
                            if(GPSManager.gpsCallback != null){ 
                                GPSManager.gpsCallback.onGPSUpdate(location);
                            }
                        }

                        @Override
                        public void onProviderDisabled(final String provider){
                            Log.v("gps provider disabled ", provider);
                        }

                        @Override
                        public void onProviderEnabled(final String provider){
                            Log.v("gps provider enabled",provider);
                        }

                        @Override
                        public void onStatusChanged(final String provider, final int status, final Bundle extras){
                            Log.v("gps provider ststus", ""+status);
                        }
                };
        }
        public GPSCallback getGPSCallback() {
                return GPSManager.gpsCallback;
        }

        public void setGPSCallback(final GPSCallback gpsCallback){
                GPSManager.gpsCallback = gpsCallback;
        }

        public void startListening(final Context context) {
                if (GPSManager.locationManager == null){
                        GPSManager.locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
                }
            GPSManager.locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0L, 0.0F, GPSManager.locationListener); 
            };

        public void stopListening() {
                try {
                        if (GPSManager.locationManager != null && GPSManager.locationListener != null) {
                                GPSManager.locationManager.removeUpdates(GPSManager.locationListener);
                        }
                        GPSManager.locationManager = null;
                }
                catch (final Exception ex){
                }
        }} 
```

# asp.net - SqlMembershipProvider 中的哪些方法将 IsApproved 设置为 false？

> ID：15495358
> 
> 赞同：0
> 
> 时间：2013-03-19T09:12:34.603
> 
> 标签：asp.net, asp.net-membership, membership-provider, sqlmembershipprovider

我遇到了一个问题，我的一个用户的 IsApproved 标志被神奇地设置为 false，我想知道这可能是怎么发生的。

用户不会因为密码尝试失败而被锁定（不确定这是否会将 IsApproved 设置为 false），并且他们过去肯定已被批准。

SqlMembershipProvider（我用于成员资格的提供程序）中是否有任何设置 IsApproved 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:16:17.783

如果您使用[CreateUserWizard](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.aspx)，您可以将[DisableCreatedUser](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx)属性设置为 false 以强制`IsApproved`为新用户初始化为 false。

否则，它是一个可以手动设置的读写属性——所以要么你有一些代码已经完成了这个，要么某个地方已经更新了数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:50:52.277

当用户由此创建时，您可以手动设置Isapproved 属性。

Dim MU As MembershipUser = Membership.GetUser("ABC") MU.IsApproved = False

**Membership.UpdateUser(MU)**

# servlets - Spring-mvc servlet 映射，servlet 1 可以有“/”，servlet 2 可以有“/server/”吗？

> ID：15495361
> 
> 赞同：0
> 
> 时间：2013-03-19T09:12:40.323
> 
> 标签：servlets, spring-mvc, mapping, url-pattern

目前我有以下`web.xml`配置：

```
<servlet>
    <servlet-name>Website</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Website</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Server</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Server</servlet-name>
    <url-pattern>/server/</url-pattern>
</servlet-mapping> 
```

至于两个示例控制器：

```
@Controller
public class ApiRequests {
    protected final Logger logger = Logger.getLogger(ApiRequests.class);

    @RequestMapping(value = "api.json", produces = {"application/json"}, method = RequestMethod.GET)
    @ResponseBody
    public String handleActionJson(final HttpServletRequest request){
        return "{test: 'blaat'}";
    }
} 
```

和

```
@Controller
@RequestMapping("/")
public class IndexController {
    @RequestMapping("*.html")
    public void showIndex(){

    }
} 
```

现在我的问题是，当我尝试调用 /server/api.json url时，服务器不会给出 json 响应，而是给我以下错误：

```
PageNotFound:1108 - No mapping found for HTTP request with URI [/WorldDefense/server/api.json] in DispatcherServlet with name 'Website' 
```

这基本上意味着它试图在网站 servlet 而不是服务器 serlvet 中搜索 /server/api.json，至于我的问题：是否有可能让这个设置工作？（所以 /server/ 映射到服务器 servlet 和所有其他 url 组合到网站 servlet）

**编辑 1** 我更新了代码以反映 Costi Ciudatu 建议的更改，但它仍然不起作用。我删除了@RequestMapping("/server")，现在在handleActionJson 方法中只有@RequestMapping。两者都导致这些错误：

```
10:57:26,046  WARN PageNotFound:1108 - No mapping found for HTTP request with URI [/WorldDefense/server/server/api.json] in DispatcherServlet with name 'Website'
10:57:40,509  WARN PageNotFound:1108 - No mapping found for HTTP request with URI [/WorldDefense/server/api.json] in DispatcherServlet with name 'Website' 
```

根据tomcat日志映射：

服务器-servlet

```
11:03:49,655  INFO RequestMappingHandlerMapping:178 - Mapped "{[/api.json],methods=[GET],params=[],headers=[],consumes=[],produces=[application/json],custom=[]}" onto public java.lang.String com.world2.worlddefense.server.controllers.ApiRequests.handleActionJson(javax.servlet.http.HttpServletRequest)
11:03:50,125  INFO RequestMappingHandlerMapping:178 - Mapped "{[/api.json],methods=[GET],params=[],headers=[],consumes=[],produces=[application/json],custom=[]}" onto public java.lang.String com.world2.worlddefense.server.controllers.ApiRequests.handleActionJson(javax.servlet.http.HttpServletRequest) 
```

网站-servlet

```
11:03:50,380  INFO RequestMappingHandlerMapping:178 - Mapped "{[//*.html],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public void com.world2.worlddefense.website.controllers.IndexController.showIndex()
11:03:50,381  INFO RequestMappingHandlerMapping:178 - Mapped "{[/login],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.world2.worlddefense.website.controllers.TempTestController.showTest() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:39:43.347

`DispatcherServlet`您可以在同一个中定义多个s`web.xml`并根据需要映射它们。但是，servlet 映射不应反映在`@RequestMapping`您的控制器中。你的控制器总是映射到相对于 servlet 映射的路径；在您的情况下，我认为如果您尝试过，您可以获得 JSON 响应`/WorldDefence/server/server/api.json`...

如果您希望不同的控制器与两个调度程序相关联，您只需要确保在相应的应用程序上下文中加载了正确的控制器：`Website-servlet.xml`并且`Server-servlet.xml`如果您坚持这个约定。

长话短说，您的映射`ApiRequests`应该是“/”，而不是“/server”，并且该控制器应该只包含在“服务器”调度程序上下文中。

附带说明一下，从 3.2.x 开始，`.json`扩展由 ContentNegotiationManager 处理，因此您的控制器应该返回一些域对象，这些域对象将由 Spring HttpMessageConverter 机制透明地编组，因此能够生成 JSON 以外的媒体类型，没有努力。

# asp.net-mvc - 如何在 ASP.net MVC 中将实体类与我们的模型类一起使用

> ID：15495363
> 
> 赞同：2
> 
> 时间：2013-03-19T09:12:46.097
> 
> 标签：asp.net-mvc, asp.net-mvc-4

首先我想问一下 Entity Class 和我们的 Model Class 有什么区别？

当我使用在数据库方法中的实体框架生成的实体类上添加数据注释时，它在每次“从数据库更新”时消失，并且对于这个用户定义的模型类可以使用，但我不知道将它们与生成的实体类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:51:59.470

实体类是直接与真实对象相关联的类，并链接到业务逻辑并保存有关系统的信息。实体通常用于在对象和数据库中的表之间建立映射。

模型只是与定义或包含对象定义以及状态发生变化的视图和控制器相关联的类。这些可以保存您的数据注释以在进入业务/数据访问层之前进行验证......

这让我想到了你的下一个问题，如果使用 EF 使用“数据库优先”方法生成数据模型类，那么你不能将数据注释属性直接应用于你的类。由于 EF 设计器生成模型类，因此您对模型类所做的任何更改都将被覆盖，就像您所经历的那样。如果要将验证器与 EF 生成的类一起使用，则需要创建元数据类：http: [//blogs.microsoft.co.il/blogs/gilf/archive/2011/01/20/adding-metadata- to-entities-in-the-data-model.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2011/01/20/adding-metadata-to-entities-in-the-data-model.aspx)

希望有帮助。

丹尼

# qt - Qt3 到 Qt4 类更改

> ID：15495367
> 
> 赞同：1
> 
> 时间：2013-03-19T09:12:53.870
> 
> 标签：qt, user-interface, qt4, qt3

我正在将一些代码从 Qt3 转移到 Qt4。

我在 Qt 4 中找不到`QDockWindow`类。Qt4 中的对应类是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:17:43.870

`QDockWidget`是 Qt4 的等价物。

如果您正在经历升级的痛苦，那么现在升级到 Qt5 是否更有意义？

# mongodb - 在MongoDB中组合两个字段搜索

> ID：15495368
> 
> 赞同：1
> 
> 时间：2013-03-19T09:12:54.383
> 
> 标签：mongodb

我使用 Mongodb 和我的数据库模式，如下所示：

```
firstName: 'vahid',
lastName: 'kh',
age: 12 
```

我想找到名字+姓氏喜欢'vahid kh'的所有记录。在 SQL 中，这将是：

> Select * from table where firstName + lastName like '%vahid kh%'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:43:30.410

似乎这仅在今天发布的 2.4 中可用。

```
> db.temp.save({ "firstName" : "Bob", "lastName" : "Smith", Age : 12 });
> db.temp.find();
{ "_id" : ObjectId("5148a2a00477cddcdece1b34"), "firstName" : "Bob", "lastName" : "Smith", "Age" : 12 }
> db.temp.aggregate({ $project : { "name" : { $concat : [ "$firstName", " ", "$lastName" ] } } });
{
    "result" : [
       {
           "_id" : ObjectId("5148a2a00477cddcdece1b34"),
           "name" : "Bob Smith"
       }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:48:43.543

你可以使用`$regex`，这样你就可以使用部分匹配。像这样的东西：

```
db.collection.find( { field: /acme.*corp/i } ) 
```

这是与 php 中的答案有些相似的问题：[MongoRegex and search multiple rows in collection](https://stackoverflow.com/questions/11281671/mongoregex-and-search-multiple-rows-in-collection)

关于 mongoregex 的文档在这里：[http ://docs.mongodb.org/manual/reference/operator/regex/](http://docs.mongodb.org/manual/reference/operator/regex/)

**编辑：**

我刚刚在 sql 中使用查询阅读了您的评论。简单的解决方案可能是创建字段`fullname`并使用 搜索它`$regex`，这是一种数据库非规范化，您可以在其中存储一些冗余数据。

甚至更简单，这也应该可以完成工作：

```
db.collection.find( { firstName: /*vahid/i, lastName: /kh*/i } ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-24T21:57:09.300

要搜索两个或多个字段的组合，您需要使用[聚合框架](https://docs.mongodb.com/manual/aggregation/)。它允许您按字段组合进行排序，并且您不需要存储（非规范化）任何额外的字段：

```
db.collection.aggregate([
{
    $match: {
        // Optional criteria to select only some documents to process, such as...
        deleted: null
    }
},
{
    $addFields: {
        // Need to prefix fields with '$'
        fullName: { $concat: [ "$firstName", "$lastName" ] },
    }
},
{
    $search: { fullName: /.*vakid kh.*/ },
}
]); 
```

解释：

*   [$addFields](https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/)聚合管道阶段创建动态的动态字段
*   [$concat](https://docs.mongodb.com/manual/reference/operator/aggregation/concat/)`fullName`通过连接名字和姓氏来创建字段
*   `$search`执行[正则表达式 search](https://docs.mongodb.com/manual/reference/operator/query/regex/)，这是 MongoDB 等价于 SQL`LIKE`运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T06:32:44.360

我在 expressjs 代码聚合中的代码有点慢然后找到，所以我使用基于条件和使用正则表达式来查找真实结果，我正在与您分享 nodejs 代码，希望它对您或我的其他代码爱好者朋友有用。

```
router.get('/publisher/:q',function(req,res){

  var q = ucfirst( req.params['q'] );
  var qSplit = q.split(" ");
  var db = mongojs(CONNECTION_STRING, ['tags_helper','users']);
  var query = { "status" : 1, isAdmin : { $exists : false } };

  console.log(qSplit);

  if( qSplit.length > 1  )
  {

    query["firstName"] = new RegExp(qSplit[0],"i");
    query["lastName"] =  new RegExp(qSplit[1],"i");

  }
  else
  {
    qSplit[0] = new RegExp(qSplit[0],"i");
    qSplit[1] = new RegExp(qSplit[0],"i"); 

    //query.push( { $or : [  {"firstName": new RegExp(q,"i")},{"lastName": new RegExp(q,"i")} ]  } );
    query["$or"] = [  {"firstName": new RegExp(q,"i")},{"lastName": new RegExp(q,"i")} ];
  }

  db.users.find( query,{_id : 1,firstName:1,lastName:1,image:1,profileName:1}).limit(10,function (err, users) {

    //TODO your further code .. 

  });
}); 
```

祝您编码愉快。

# c# - 尝试创建用户时网站管理工具出错

> ID：15495369
> 
> 赞同：1
> 
> 时间：2013-03-19T09:12:57.313
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership

嗨，我正在尝试在 asp.net mvc 4 中使用默认的 asp.net 成员资格提供程序，但是在连接到数据库时似乎失败了。以下是我在 web.config 中所做的设置：

```
<add name="MembershipConnectionString" connectionString="Data
Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\aspnetdb.mdf;Integrated
Security=True" providerName="System.Data.SqlClient"/>

 <membership>
  <providers>
    <clear/>
    <add  name="AspNetSqlMembershipProvider"
          type="System.Web.Security.SqlMembershipProvider"
          connectionStringName="MembershipConnectionString"
          enablePasswordRetrieval="false"
          enablePasswordReset="true"
          requiresQuestionAndAnswer="false"
          requiresUniqueEmail="false"
          maxInvalidPasswordAttempts="5"         
          minRequiredNonalphanumericCharacters="0"
          passwordAttemptWindow="10"
          applicationName="/"
          passwordFormat="Hashed"
         />
  </providers>
</membership> 
```

我应该提到，当我添加连接时，我将从 asp.net 正则表达式生成的数据库升级到我当前的 SQL Server。

现在，当我尝试打开 ASP.NET 网站管理工具并转到安全性并尝试创建用户或角色时，出现此错误：

以下消息可能有助于诊断问题：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）在 ASP.security_users_adduser_aspx 的 System.Web.Administration.WebAdminPage.CallWebAdminHelperMethod(Boolean isMembership, String methodName, Object[] parameters, Type[] paramTypes)。 c:\Windows\Microsoft.NET\Framework64\v4.0.30319\ASP.NETWebAdminFiles\Security\Users\addUser.aspx 中的 PopulateCheckboxes()：c:\Windows\Microsoft.NET 中 ASP.security_users_adduser_aspx.Page_Load() 的第 28 行\Framework64\v4.0.30319\ASP.NETWebAdminFiles\Security\Users\addUser.aspx：System.Web.Util 的第 22 行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:37:16.647

你确定数据源是正确的吗？因为看起来问题不在于会员资格，但无法找到服务器。所以您应该先检查连接字符串。尝试先连接到没有成员资格的数据库，然后如果完成，您可以走得更远。

# java - Struts2 i18n 消息

> ID：15495371
> 
> 赞同：2
> 
> 时间：2013-03-19T09:13:08.347
> 
> 标签：java, validation, properties, struts2, internationalization

我正在使用 Struts 2，并按照我找到的教程创建了一个简单的应用程序。

我创建了一个`<MyActionClass>-validation.xml`文件，我想知道如何显示基于多种语言的验证消息？

```
<field name="password">
    <field-validator type="requiredstring">
        <param name="trim">true</param>
        <message>You have to enter a password.</message> 
    </field-validator>
</field> 
```

我可以从本地化`.properties`文件中获取消息还是必须使用其他类型的验证？

每个语言环境都应该有验证 XML 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:58:10.490

`key`消息由您本地化的属性检索。您不必为验证编写重复的代码。例如

```
<validators>
   <validator type="requiredstring">
     <param name="fieldname">field.name</param>
     <message key="field.key"/>
   </validator>
</validators> 
```

或使用注释

```
private String name;

@RequiredStringValidator(key = "field.key")
public void setName(String name) {
  this.name = name;
} 
```

`field.name`是字段标签的资源键，`field.key`而是错误消息的键。

在你写的属性中

```
field.name=MyName 
field.key=MyName required 
```

那是本地化的。

根据用户浏览器的区域设置或通过独立于浏览器设置的[I18N 拦截](https://struts.apache.org/core-developers/i18n-interceptor.html)`request_locale`器设置区域设置的参数自动检索消息。所以，确保你有它在堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:18:56.287

使用`getText`方法从属性文件中获取消息。

```
<message>${getText("enter.password")}</message> 
```

请参阅：[http](http://struts.apache.org/development/2.x/docs/validation.html#Validation-LocalizingandParameterizingMessages) ://struts.apache.org/development/2.x/docs/validation.html#Validation-LocalizingandParameterizingMessages 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:21:29.157

是的，您可以从属性文件中获取本地化消息，并且对于任何特定于语言环境的消息都不需要任何 validation.xml。

您需要指定 ResourceBundle，它只不过是扩展名为 .properties 的不同语言环境文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-21T07:04:16.727

只需`<message key="key_name"/>`在您的内部使用`ActionClass-validation.xml`

`key_name`然后你定义

```
global.properties
global_vn.properties 
```

确保你`request_locale`的堆栈中有。

# python - 在python中，如何只为函数存储一次“常量”？

> ID：15495376
> 
> 赞同：16
> 
> 时间：2013-03-19T09:13:22.120
> 
> 标签：python, global-variables, constants

某些函数需要不被参数化的“恒定”值（即不设计为以后重新定义）。[虽然每个函数](http://effbot.org/zone/default-values.htm)的默认参数只[存储一次](https://stackoverflow.com/a/10121437/611007)，但有些参数作为参数（即作为[签名](https://en.wikipedia.org/wiki/Signature_%28computer_science%29)的一部分）并不是很有意义。对于（不是很有用的）示例：

```
def foo(bar):
    my_map = {"rab": barType, "oof": fooType}
    return my_map.get(bar,defaultType)() 
```

为每次调用重新定义这样一个常量会浪费 CPU 时间和 RAM 空间。其他一些方法是将此类常量存储为模块级全局变量或使函数成为可调用类，但可能还有其他方法，也许？

在执行*模块级全局*方式时，我在我的（意为一个）常量变量前面加上一个“_”，以表明它*不*符合任何人的兴趣。我仍然觉得模块命名空间有点*“污染”*，更不用说使用[像全局变量这样不鼓励](https://stackoverflow.com/questions/14135345/)的东西的[耻辱了](http://xkcdsw.com/1394)：

```
_my_map = {"rab": barType, "oof": fooType}
def foo(bar):
    return _my_map.get(bar,defaultType)() 
```

或者*将其转换为类*方式。我制作了`__call__`一个[classmethod](https://stackoverflow.com/questions/12179271/)，以避免创建实例的需要：

```
class foo:
   my_map = {"rab": barType, "oof": fooType}
   @classmethod
   def __call__(cls,bar):
       return cls.my_map.get(bar,defaultType)() 
```

这些解决方案是否足够pythonic？

还有其他方法可以做到这一点吗？

使用这样的“常数”甚至可以作为一种做法吗？

**请注意**，我的示例中的这些对象不一定是实际*常量*，而是根据它们的目的使用（并且可以被认为是）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T09:18:13.217

将其设置为[函数的属性](https://www.python.org/dev/peps/pep-0232)：

```
def foo(bar):
    return foo.my_map.get(bar, defaultType)()
foo.my_map = {"rab": barType, "oof": fooType} 
```

IMO 可调用类或闭包不够简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T10:38:41.613

恕我直言，模块级常量没有任何问题。

请注意，根据[PEP 8](https://www.python.org/dev/peps/pep-0008)，常量应该全部大写，如下所示：

```
_MY_MAP = {"rab": barType, "oof": fooType}
def foo(bar):
    return _MY_MAP.get(bar,defaultType)() 
```

标准库中的正则表达式模块使用这种风格，许多成熟的第三方库也是如此。如果您不相信，只需转到您的`site-packages`目录并 grep：

```
egrep "^_?[A-Z]+ =" * 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T09:18:21.387

你也可以使用闭包：

```
def make_foo():
    my_map = {"rab": barType, "oof": fooType}
    def foo(bar):
        return my_map.get(bar,defaultType)()
    return foo
foo = make_foo() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T12:06:30.203

做一些尽可能独立的东西。您可以创建一个[函数对象](http://en.wikipedia.org/wiki/Function_object)（又名*functor*）类并给它一个`__call__()`方法*或*一个`classmethod`（但可能不是两者）：

```
class bazType(object): pass
class barType(object): pass
class fooType(object): pass

class Foo(object):
    _DEFAULT_TYPE = bazType
    _MY_MAP = {"rab": barType, "oof": fooType}

    def __call__(self, bar):
        return self._MY_MAP.get(bar, self._DEFAULT_TYPE)()

    @classmethod
    def foo(cls, bar):
        return cls._MY_MAP.get(bar, cls._DEFAULT_TYPE)()

# using classmethod
print Foo.foo("rab")

# using __call__ method
foo = Foo()
print foo("baz")

# alternative way to use classmethod
foo = Foo.foo
print foo("oof") 
```

另一种选择是定义 a `staticmethod`，我不会说明它，因为它与其他两个非常相似——但你明白我希望的想法。

# java - 使用映射键和值作为构造函数参数创建对象列表

> ID：15495383
> 
> 赞同：1
> 
> 时间：2013-03-19T09:13:42.433
> 
> 标签：java, object, map

```
NavigableMap<String, String> map; // this map contains e.g. 10 elements
MyObject foo = new MyObject("string as 1st parameter", "and as 2nd parameter"); 
```

现在我想做这样的事情：

```
List<MyObject> objects = new ArrayList<>();
objects.addAll(forEach(map) {new MyObject(map.key, map.value)}); 
```

我知道，我可以遍历地图：

```
for (String key : map.keySet()) {
  objects.add(new MyObject(key, map.get(key)));
} 
```

我的问题是，这是否可能以其他更时髦的方式:)（在 JAVA 7 中）

# iphone - 以编程方式访问 iOS 中的通讯簿？

> ID：15495387
> 
> 赞同：0
> 
> 时间：2013-03-19T09:14:02.480
> 
> 标签：iphone, ios, objective-c, ipad, device

目前我正在开发一个应用程序，它将利用设备地址簿中可用的联系人。

我想通过获取联系人列表。地址簿，除了每个联系人之外还有复选框选项。谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:25:01.750

查看`ABAddressBook`框架。获取联系人列表作为数组并将此列表填充到 UItableview 中，您可以使用它`UITableViewCellAccessoryCheckmark`来显示选定的联系人。

请参阅下面的代码。它返回一个包含联系人的数组。这里的 AddressObject 是一个模态类。

```
-(NSArray*)addressBookLoader
{
    CFErrorRef *error = NULL;

    NSMutableArray *arrayofAddressClassObjects =[[NSMutableArray alloc]init];

    ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL,error);

    ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
    CFArrayRef sortedPeople =ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByFirstName);

    //RETRIEVING THE FIRST NAME AND PHONE NUMBER FROM THE ADDRESS BOOK

    CFIndex number = CFArrayGetCount(sortedPeople);

    NSString *firstName;
    NSString *phoneNumber ;

    for( int i=0;i<number;i++)
    {

        ABRecordRef person = CFArrayGetValueAtIndex(sortedPeople, i);
        firstName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
        ABMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty);
        phoneNumber = (__bridge NSString *) ABMultiValueCopyValueAtIndex(phones, 0);

        if(phoneNumber != NULL)
        {

            AddressObject *obj = [[AddressObject alloc]init];
            obj.contactName = firstName;
            obj.contactNumber = phoneNumber;

            [arrayofAddressClassObjects addObject:obj];

        }

    }

    NSLog(@"x=%@",arrayofAddressClassObjects);

    return arrayofAddressClassObjects;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:15:38.920

要访问地址簿，请考虑使用[ABAddressBook。](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)

> ABAddressBook 不透明类型（其实例称为地址簿）为地址簿提供了一个编程接口 - 一个由多个应用程序使用的集中式数据库，用于存储有关人员的个人信息。地址簿数据库还支持包含一个或多个人的“组”的概念。人可能属于多个组，组也可能属于其他组。
> 
> ABAddressBook opaque 类型提供了创建对地址簿数据库的引用、保存更改、丢弃更改以及注册外部（由其他线程或进程）对数据库所做的更改的功能。

用地址簿的结果填充 a `UITableView`，然后以编程方式为每个 UITableViewCell 添加一个复选标记，如下所示：

```
cell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

# jboss - 带有 EJB 和 Web 服务运行状况监控和管理的 Jboss EAR

> ID：15495391
> 
> 赞同：0
> 
> 时间：2013-03-19T09:14:12.870
> 
> 标签：jboss, ejb-3.0, monitoring, jmx, jboss-esb

我正在使用 Jboss5.1，我部署了一个 EAR1，它有一个使用 @Stateless 注释实现的 EJB3 组件，并且相同的 EJB 也使用注释 @webservice 公开为 web 服务。

我想检查从部署开始到定期取消部署 EAR1 的 EJB 服务/管理服务 bean（打包在另一个 EAR2 中），如果 EJB 和 Web 服务已部署并正常运行并正常工作并且没有陷入死锁/无反应状态。

我研究了 JMX，并且能够获得 EJB 和 web 服务的创建和销毁通知，但是如何定期检查 EJB 和 web 服务是否正常工作并且没有处于死锁/无响应状态？

还有如何监控 Jboss ESB 服务？

[JMX是唯一的方法还是jboss提供任何其他API来监控JBOSS MONITORING](https://community.jboss.org/wiki/JBossMonitoring)怎么样

如果您正在查看此内容，请提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:09:41.990

特别是 JBoss AS5.x 使用所谓的配置文件服务 (PS) 作为与服务器交互的主要方式。不幸的是，PS 不是基于 JMX 的，另一方面，您在 Platform MBean 服务器中看不到所有 EJB。

[RHQ](http://jboss.org/rhq/)有一个插件来监控 AS5 中的 EJB 实例以及其他资源类型，如 JBoss ESB 或 Apache Tomcat，并且能够确定 EJB 的可用性。

> 但是如何定期检查 EJB 和 web 服务是否正常工作并且没有处于死锁/无响应状态？

这通常是您可以（仅）（*）通过点击相关的 bean/方法并评估结果来确定的。

*) 可以通过请求堆转储并定期查找死锁来确定处于死锁状态的 bean。

# php - 如何确定 PHP cURL 是否下载了整个 URL

> ID：15495395
> 
> 赞同：0
> 
> 时间：2013-03-19T09:14:26.383
> 
> 标签：php, curl

我正在使用 PHP，`curl_multi_exec`我注意到无法确定 URL 是否已完全下载。

我发现的唯一半工作方式是`curl_getinfo()`. 如果有，`download_content_length`我可以检查下载的文件是否大小相同。但是对于 PHP 和 CGI​​-BIN 页面，`download_content_length`报告为`-1`.

如果我使用`curl_errno()`，它在超时的情况下并不总是有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:14:26.383

我发现您需要在 curl 句柄中设置超时，而不是在 curl_multi_exec() 工作的循环中。

# windows-8 - 如何在windows 8 c#中选择录音区域图像的颜色代码

> ID：15495397
> 
> 赞同：0
> 
> 时间：2013-03-19T09:14:27.770
> 
> 标签：windows-8

我正在 Windows 8 中制作项目，我想在该图像中点击的任何位置选择图像的颜色代码。

我在 Windows 7 中完成了此操作，但 Windows 8 不支持这些类，因此它们给出了错误。

所以请帮我挑选颜色代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:09:55.277

首先你要找到录音区域的位置，然后你就可以得到那个区域的像素，你可以试试..

```
Point clickPoint = e.GetPosition(image1);
int x = Convert.ToInt32(clickPoint.X);
int y = Convert.ToInt32(clickPoint.Y); 
```

# dojo - 如何在 dijit.Calendar 上捕捉当月弹出窗口的 onChange 事件

> ID：15495407
> 
> 赞同：1
> 
> 时间：2013-03-19T09:14:41.653
> 
> 标签：dojo, calendar

如何在 dijit.Calendar 上捕捉当月弹出窗口的 onChange 事件。我在文档上没有找到任何东西。我使用 Dojo 1.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:05:52.337

日历使用由 引用的内部小部件`monthWidget`。此小部件正在调用 `_onMonthSelect`您日历中的函数。我还没有找到任何方法来获取该事件的事件处理程序（因为它是私有的），但是您当然可以通过执行以下操作来覆盖小部件的实现：

```
myCal._onOldMonthSelect = myCal._onMonthSelect;
myCal._onMonthSelect = function(a) {
    myCal._onOldMonthSelect(a); // The old behavior
    alert("Month changed"); // Your wanted behavior
} 
```

我做了一个示例[JSFiddle](http://jsfiddle.net/pDHj6/1/)作为概念证明，但我很确定这可以改进（例如通过扩展小部件）。

# html - 更好地使用 html li 标签进行 seo 优化

> ID：15495414
> 
> 赞同：1
> 
> 时间：2013-03-19T09:15:09.723
> 
> 标签：html, seo

如果我像 Example1 一样编码，这将如何影响 seo？（我的意思是第三个 li 标签的内容类型与其他标签的内容类型不同。）

示例 1：

```
<ul>
  <li>some description of html</li>
  <li>some description of css</li>
  <li>
    other update operation here...
    <input></input>
    <button></button>
  </li>
</ul> 
```

* * *

我认为Example2应该没问题。

示例 2：

```
<ul>
  <li>some description of html</li>
  <li>some description of css</li>
  <li>some description of js</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:29:35.627

需要一个更大的图景来决定，但我认为你不应该真正关心这一点。只需让您的网站对用户有用：

需要一个输入和一个按钮作为列表中的第三项？放在那里！这是相当常见的情况，尤其是当您使用无序列表而不是基于表格的布局并且最后一个*单元格*包含一些*操作*按钮/输入时。

# postgresql - 在 Symfony2 和 PostgreSQL 中调用存储过程？

> ID：15495415
> 
> 赞同：3
> 
> 时间：2013-03-19T09:15:13.547
> 
> 标签：postgresql, stored-procedures, symfony

如何在 Symfony2 中调用存储过程？

我在 PostgreSQL 中创建了一个名为的存储过程，`get_manhours_all()`它返回以下结果：

```
select
    sum(
        extract(epoch from end_time) - extract(epoch from begin_time)
    )/3600 as manhours
from timeslot; 
```

Symfony2 中是否有方法可以调用`get_manhours_all()`- 本机查询是`SELECT get_manhours_all();`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:03:03.237

不，没有 Symfony 2 方法来调用您的 SP，因为它存储在您的数据库中。您应该使用[Native SQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html)进行如下调用，

```
$conn      = $this->get('database_connection');
$statement = $conn->executeQuery('/*SQL Call to your stored procedure*/');
$results   = $statement->fetchAll(); 
```

# c# - c#无法显示RSS提要的图像

> ID：15495419
> 
> 赞同：0
> 
> 时间：2013-03-19T09:15:15.833
> 
> 标签：c#, rss

我正在为我的 Windows 8 应用程序 (c#) [http://www.skysports.com/rss/0,20514,11661,00](http://www.skysports.com/rss/0,20514,11661,00)使用这个 RSS 提要。我可以显示 Title 和 PubDate 但我卡在图像上。

![RSS订阅](../Images/17dacb1e56d1786fd34711f8a5553a0e.png)

```
 private async void LoadRSS()
    {
        SyndicationClient client = new SyndicationClient();
        Uri feedUri = new Uri("http://www.skysports.com/rss/0,20514,11661,00.xml");
        SyndicationFeed feed = await client.RetrieveFeedAsync(feedUri);
        FeedData feedData = new FeedData();
        foreach (SyndicationItem item in feed.Items)
        {
            FeedItem feedItem = new FeedItem();
            feedItem.Title = item.Title.Text;
            feedItem.PubDate = item.PublishedDate.DateTime;

            // Handle the differences between RSS and Atom feeds.
            if (feed.SourceFormat == SyndicationFormat.Atom10)
            {
                feedItem.Content = item.Content.Text;
                feedItem.Link = new Uri("http://www.skysports.com" + item.Id);
            }
            else if (feed.SourceFormat == SyndicationFormat.Rss20)
            {
                feedItem.Content = item.Summary.Text;
                feedItem.Link = item.Links[0].Uri;
            }
            feedData.Items.Add(feedItem);
        }

        ItemListView.DataContext = feedData.Items;
    } 
```

xml代码：

```
 <GridView x:Name="ItemListView" Grid.Column="2" Grid.Row="1" ItemsSource="{Binding}" ItemClick="Sports_ItemClick_1" IsItemClickEnabled="True" SelectionMode="None" >
        <GridView.ItemTemplate>
            <DataTemplate>

                <Grid  Width="400" Height="75" Margin="0,0,50,0" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="75"></ColumnDefinition>
                        <ColumnDefinition Width="325"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Border Background="#60BF89">
                        <Image Source="{Binding ImagePath, Mode=OneWay}" Stretch="None" Margin="5,15,0,0" VerticalAlignment="Top" HorizontalAlignment="Center" Width="500"/>
                    </Border>
                    <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                        <TextBlock Foreground="White" Text="{Binding Title}" FontSize="16" Margin="5,0,0,0" TextWrapping="Wrap" />
                        <TextBlock Foreground="White" Text="{Binding PubDate}" FontSize="12" Margin="5,0,0,0"/>

                    </StackPanel>
                </Grid>
            </DataTemplate>              
        </GridView.ItemTemplate>
    </GridView> 
```

我想要第一列中的图像。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:19:19.137

您没有在显示的代码示例中设置 ImagePath 属性，认为这是一个问题

# ios - UIWebView shouldStartLoadingWithRequest 方法调用完成后如何调用函数？

> ID：15495420
> 
> 赞同：2
> 
> 时间：2013-03-19T09:15:26.570
> 
> 标签：ios, uiwebview, delegates, uiwebviewdelegate

`UIWebView` `shouldStartLoadingWithRequest`在iOS中方法执行完成后如何调用函数？

我不想使用`performselector:afterdelay`，因为在网络低时可能无法给出准确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:22:01.997

使用这些方法可能对你有帮助，

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
       return YES;
    }

    - (void)webViewDidFinishLoad:(UIWebView *)webView {
      //this method will call after successful loading
    }

    - (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
      //this method will call after getting any error while loading the web view.
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:24:34.060

在`webViewDidFinishLoad:`Web 视图完成加载后调用此方法。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

**参数**

*   **webView**：
    Web 视图已完成加载。

*   **可用性**
    在`iOS 2.0`及以后可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:11:56.157

`UIWebViewDelegate Protocol`提供了一些可以在您的情况下使用的方法。

`shouldStartLoadWithRequest`之后调用的第一个方法`webViewDidStartLoad:`，就像它的名字所暗示的那样，一旦`WebView`开始加载框架就会被调用。从你的问题来看，这似乎是最合适的方法。

之前的答案中提供的其他选项分别在每次完成加载帧和加载帧失败时`webViewDidFinishLoad:`分别`webView:didFailLoadWithError:`调用。`UIWebView`

请注意，这意味着在实际完成加载之前，可能会多次调用上述所有方法`UIWebView`，因为无论何时将`UIWebView`要启动、刚刚启动、已完成或加载**页面上的每个帧失败，都会抛出它们。**

有关更多详细信息，请参阅[UIWebViewDelegate 协议文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html)。

# java - 如何在 actionbarsherlock 中使用默认项目？

> ID：15495422
> 
> 赞同：-3
> 
> 时间：2013-03-19T09:15:34.587
> 
> 标签：java, android

在我使用的 android 应用程序`actionbarsherlock`中，我在清单文件 android: 中将操作栏设置为主题，`theme = "@ style / Theme.Sherlock.Light"`我想点击默认栏上的徽标，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:23:49.067

`ActionBar mActionBar = getSupportActionBar();
mActionBar.setHomeButtonEnabled(true);
mActionBar.setDisplayShowHomeEnabled(true);`

# c# - 创建指向包含百分号的文件的链接

> ID：15495426
> 
> 赞同：1
> 
> 时间：2013-03-19T09:15:44.283
> 
> 标签：c#, asp.net-mvc-3, url

我正在用 C# 创建一个 MVC3 Web 应用程序。我必须实现一个搜索屏幕来显示来自 SQL 数据库的数据以及与这些数据对应的图片。在我的详细信息页面中，我创建了指向此文档的链接：

```
 @{
        string fullDocumentPath = "~/History/" + Model.PICTURE_PATH + "/" + Model.PICTURE_NAME.Replace("001", "TIF");
    }
    @if (File.Exists(Server.MapPath(fullDocumentPath)))
    {
        <a href="@Url.Content(fullDocumentPath)" >Click me for the invoice picture.</a>
    } 
```

问题是创建文档的系统（并在数据库中添加了对其路径的引用）选择在许多文件名中使用 % 。当我有这个链接时：`http://localhost:49823/History/044/00/aaau2vab.TIF`没关系。创建此链接时：`http://localhost:49823/History/132/18/aagn%8ab.TIF`失败并显示：

```
The resource cannot be found. 
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly.
Requested URL: /History/132/18/aagn�b.TIF 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:25:49.327

您尝试访问的 URL 不是 URL 编码的。您只能使用 ASCII 字符，因此对于特殊字符，您需要对路径进行 UrlEncode。您可以看到这些字符的列表，以及此列表中对应的 ASCII 字符：

[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

您可以使用 UrlEncode 方法将路径字符串转换为 URL 编码：

[http://msdn.microsoft.com/en-us/library/zttxte6w.aspx](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

如果你想再次解码，你可以使用 UrlDecode 方法：

[http://msdn.microsoft.com/en-us/library/6196h3wt.aspx](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:23:29.190

使用[Url.Encode()](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.encode%28v=vs.100%29.aspx)方法转义特殊字符：

```
@{
   string documentDirectoryPath = "~/History/" + Model.PICTURE_PATH + "/";
   string documentName = Model.PICTURE_NAME.Replace("001", "TIF");
}
@if (File.Exists(Server.MapPath(documentDirectoryPath + documentName)))
{
  <a href="@Url.Content(documentDirectoryPath + Url.Encode(documentName))" >Click me for the invoice picture.</a>
} 
```

# ios - 有没有办法 MPMovieplayerViewController 可以检测视频是否是流？

> ID：15495432
> 
> 赞同：1
> 
> 时间：2013-03-19T09:16:09.313
> 
> 标签：ios, cocoa-touch, mpmovieplayercontroller, http-live-streaming

我正在制作一个 iOS 视频播放器应用程序，它从 Web 服务获取一大堆视频 URL，并以`MPMoviePlayerViewController`.

大多数视频只是 .mp4 或 .mov 文件，但其中一些是实时 HTTP 流。我唯一拥有的是一个 URL，这些并没有表明它是文件还是流。

由于我使用的是`MPMovieControlStyleNone`我自己的视频控件，因此我需要能够检测视频是文件还是实时流，以便更改我的控件。

有什么办法可以检测到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:02:39.240

使用 HTTP HEAD 请求。如果 Content-Type 是`application/vnd.apple.mpegurl`，那么它是一个 http 直播流。

# amazon-s3 - AWS EC2 S3 和数千个目录，每个 s3cmd 中有几个文件

> ID：15495438
> 
> 赞同：0
> 
> 时间：2013-03-19T09:16:29.517
> 
> 标签：amazon-s3, amazon-ec2, vps, s3cmd

我在非 AWS VPS 上有数以万计的目录，每个目录中都有几个文件（大约 1TB 的数据）。我想将它们全部移至 S3。

我可以将它们压缩成 7GB 的块，移动（wget 或其他）到 EC2（8GB Ubuntu），解压缩并将它们 s3cmd 到 S3。

或者

使用 s3cmd 同步目录从我的 VPS 直接进入 S3？

哪种方法最适合性能和可靠性？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:51:12.057

有两个因素会为我做出决定。

1.  平均文件大小是多少？（数千个小文件可能比几个大文件花费更多时间）
2.  你能得到什么样的压缩？

如果您决定使用中间实例，则可以附加 1 TB EBS 卷来在传输时处理文件。它会增加一些成本，但是一旦完成，您就不需要保持音量。

# c# - 使用实体读取行值

> ID：15495441
> 
> 赞同：1
> 
> 时间：2013-03-19T09:16:35.027
> 
> 标签：c#, wpf

我正在创建一个饼图，并且正在从数据库中检索其名称-值对。

![在此处输入图像描述](../Images/908a9ed38e4739ab6790cdc1389fbe5a.png)

如何读取行详细信息以获取值并将其存储为一个属性？

```
public override void OnApplyTemplate()
    {

        Ram.DataContext = new List<UsageRAM>() 
          { new UsageRAM() { name = "Available" , value =/*how to get the value here*/ },
            new UsageRAM() { name = "Used" , value =/*how to get the value here*/ }};
        base.OnApplyTemplate();
    }

 public class UsageRAM
    {
        public string name { get; set; }
        public double value { get; set; }
    } 
```

**编辑**

--对我有用的答案--

```
 using (DB db = new DB())
        {
            var row = (from c in db.UsageRAMs
                       orderby c.UsageRamID descending
                       select c).First();

            Ram.DataContext = new List<UsageRAM>() 
              { new UsageRAM() { name = "Available" , value = row.Available},
               new UsageRAM() { name = "Used"  , value = row.Used }}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:20:35.187

如果您使用的是 EF，只需将新模型添加到您的项目并在此模型中包含所需的表。然后您可以使用新创建的实体对象来读取您的数据库值，如下所示：

```
var Rows = context.YourTableName.Where(YourCondition).ToArray(); 
```

然后，您可以使用 foreach 或其他方法遍历 Rows 集合。

如果您需要从单行读取值，您可能需要使用`First`而不是`Where`上面的。这将返回一个对象，其属性将映射到您的数据库字段，并且可以直接在您在问题中发布的示例代码中分配。

**例子**

假设您的模型的实体类名为 MyEntities，它包含表 UsageRam，该表有两个字段 Available 和 Used。然后它将采用以下代码：

```
using(MyEntities e = new MyEntities)
{
    var Row = e.MyTable.First(x => x.UsageRamID = **[ID]**);

    MessageBox.Show("Available=" + Row.Available.ToString() + ",Used=" + Row.Used.ToString();
} 
```

我刚刚在消息框中显示了值，您可以将它们分配给您想要的任何东西。

**另一个例子**

```
using(MyEntities e = new MyEntities)
{
    var Rows = e.MyTable.Where(x => x.UsageRamID > 10 &&  x.UsageRamID < 20);

    foreach(var Row in Rows)
        MessageBox.Show("Available=" + Row.Available.ToString() + ",Used=" + Row.Used.ToString();
} 
```

**例 3**

您更新后的帖子中的代码对我来说似乎很好，尽管我确实对数据库设计有一些疑问，但鉴于您的表在 RamUsageID 列上被索引，这应该会给您正确的结果，而不会对性能产生太大影响。我通常更喜欢 lambda 表达式而不是查询，所以我宁愿这样写：

```
db.RamUsage.OrderByDescending(x => x.RamUsageID).First() 
```

# asp.net - 图像在运行时不可见

> ID：15495442
> 
> 赞同：1
> 
> 时间：2013-03-19T09:16:44.240
> 
> 标签：asp.net, css

我正在尝试通过如下 CSS 在 html 标签的背景中应用图像。谁能告诉我为什么这个图像在运行时不可见？我可以在设计时看到它。另外，为什么我必须给出完整的路径？如果我只写图像名称，它是不可见的。

```
.small-heading 
    {
   background:url(C:\Users\Admin\Documents\Visual Studio 2010\Projects\WebApplication1 \WebApplication1\Images1\small-heading.gif);
   width: 105px;
    height: 20px;
  float: left;
 font-size: 0.9em;
line-height: 18px;
font-weight: normal;
color: #7a7a7a;
overflow: hidden;
padding: 0 0 0 3px;
}
<strong class="small-heading">
 <a href="#" id="lnkPassword" >Change Password</a></strong>
 </td> 
```

我的图像位于一个名为 Image1 的文件夹中，该文件夹直接位于根目录中。我试过用这个：

```
background:url(Images1\small-heading.gif); 
```

它不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:17:44.520

url 应该始终与您的网站或 http(s) 地址相关，而不是本地路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:25:49.183

你应该把相对路径。
在您的应用程序根文件夹中创建一个 Image 文件夹。
把你的图片放在那里（因为你们都准备好了图片1）
并像这样使用

```
background:url(Images1\small-heading.gif); 
```

注意文件路径。您放置 css-class 的 css 文件应该位于根文件夹中。
其他明智的改变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:45:27.967

感谢every1 不厌其烦。这最终对我有用：

```
.small-heading 
{
background-image:url('../../Images1/small-heading.gif');
width: 105px;
height: 20px;
float: left;
font-size: 0.9em;
line-height: 18px;
font-weight: normal;
color: #7a7a7a;
overflow: hidden;
padding: 0 0 0 3px;
} 
```

但是，如果这个 (../../) 有效， ~/Images1/....... 也应该有效。令人惊讶的是，它没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:12:50.097

尝试一件事-在浏览器中打开该图像并从浏览器复制路径，而不是整个路径，如果您的图像位于图像文件夹中，则仅从该文件夹中获取路径并尝试该路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T10:15:26.513

您可以使用背景： url("Images1/small-heading.gif");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T09:51:58.740

代替

`background:url(Images1\small-heading.gif);`

利用

`background:url('Images1/small-heading.gif');`

1.  您的图片应带有 .gif 扩展名
2.  将此代码放在 test.html 文件中，并将其放在文件夹名称中`root`
3.  里面`root`的文件夹 创建一个文件夹`Images1`
4.  将`small-heading.gif`图像放在此`Images1`文件夹中。
5.  用任何浏览器打开 test.html 并检查。

**完整代码**

```
<html>
    <head>        
<style type="text/css">
.small-heading{
    background:url('Images1/small-heading.gif');
    width: 105px;
    height: 20px;
    float: left;
    font-size: 0.9em;
    line-height: 18px;
    font-weight: normal;
    color: #7a7a7a;
    overflow: hidden;
    padding: 0 0 0 3px;
}
.small-heading a{
    color:white;
    width: 105px;
    height: 20px;
    display:block;
}

</style>
    </head>
<body>
<strong class="small-heading">
<a href="#" id="lnkPassword" >Change Password</a>
</strong>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-15T05:22:54.433

您可以使用“./Images/logo.jpg” 它会正常工作

# nsmutablearray - 变异方法发送到不可变对象错误

> ID：15495443
> 
> 赞同：0
> 
> 时间：2013-03-19T09:16:48.163
> 
> 标签：nsmutablearray, nsmutabledictionary

```
Im receiving the next error: 
```

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“ *** -[NSCFDictionary setObject:forKey:]: mutating method sent to immutable object”

```
.h file
    @property(nonatomic, retain) NSMutableArray *arrayOfBenchmarks;

.m file
- (void)viewDidLoad
{
    [super viewDidLoad];

    arrayOfBenchmarks = [[NSMutableArray alloc]init];
    arrayOfBenchmarks = [self.currentDrill valueForKey:@"benchmarks"];

    for (int i=0; i<[arrayOfBenchmarks count]; i++) {

        UIButton *benchmarkButton = [UIButton buttonWithType:UIButtonTypeCustom];
        benchmarkButton.tag = i;
        benchmarkButton.frame = CGRectMake(40,20+(i*55) , 240, 50);
        [benchmarkButton setBackgroundImage:[UIImage imageNamed:@"red_color.png"] forState:UIControlStateNormal];
        benchmarkButton.titleLabel.textColor = [UIColor blackColor];
        benchmarkButton.titleLabel.textAlignment = NSTextAlignmentCenter;
        benchmarkButton.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
        NSString *tempString = [[[arrayOfBenchmarks objectAtIndex:i] valueForKey:@"benchmarkTitle"]  stringByAppendingString:@"\n"];
        [benchmarkButton setTitle:[tempString stringByAppendingString:@"00:00:00"] forState:UIControlStateNormal];
        [benchmarkButton addTarget:self action:@selector(onTapBenchmarkButton:)
             forControlEvents:UIControlEventTouchUpInside];
//        benchmarkButton.enabled = false;

        self.btn_scrollView.contentSize = CGSizeMake(0, 50+[arrayOfBenchmarks count]*50);
        [arrayOfButtons addObject:benchmarkButton];
        [self.btn_scrollView addSubview:benchmarkButton];
        dynamicBtnCounter++;
    }
}

- (void)onTapBenchmarkButton:(id)sender{

    int index = [sender tag];
    NSLog(@"index %i", index);
    NSString *tempString = [[[arrayOfBenchmarks objectAtIndex:index] valueForKey:@"benchmarkTitle"]  stringByAppendingString:@"\n"];
    [sender setTitle:[tempString stringByAppendingString:[timerLabel text]] forState:UIControlStateNormal];
    [sender setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"green_color.png"]]];
//    [sender setBackgroundImage:[UIImage imageNamed:@"green_color.png"]];
    NSMutableDictionary *benchmark = (NSMutableDictionary *)[arrayOfBenchmarks objectAtIndex:index];
    [benchmark setValue:[timerLabel text] forKey:@"benchmarkPerformedTimer"]; //giving exception at this line
    [sender setEnabled:NO];

} 
```

这是我的基准课程

```
@interface Benchmark : NSObject

@property (nonatomic, retain) NSString *bid;
@property (nonatomic, retain) NSString *benchmarkTitle;
@property (nonatomic, retain) NSString *benchmarkDescription;
@property (nonatomic, retain) NSString *benchmarkPerformedTimer;

-(id)initWithCoder: (NSCoder *)coder;
-(void)encodeWithCoder:(NSCoder *)encoder;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:27:33.640

我通过添加可变副本来做到这一点：

```
NSMutableDictionary *benchmark = (NSMutableDictionary *)[[arrayOfBenchmarks objectAtIndex:index] mutableCopy];
    [benchmark setValue:[timerLabel text] forKey:@"benchmarkPerformedTimer"]; 
```

# eclipse - Eclipse 内容辅助弹出窗口

> ID：15495444
> 
> 赞同：1
> 
> 时间：2013-03-19T09:16:52.643
> 
> 标签：eclipse

通常，您可以使用 Ctrl-p/n 导航内容辅助弹出窗口（Eclipse emacs 键绑定）

![在此处输入图像描述](../Images/33f99f8fdac9b289a89a46004372685b.png)

（请注意，弹出窗口未激活，因为激活后您只能使用向上/向下键导航）。安装插件后，该功能丢失了，我一直只能使用向上/向下键导航。我尝试将eclipse恢复到以前的状态（通过安装历史）=>没有任何帮助。也许有人知道这是错误还是我应该更改一些设置？PS 这种行为对于习惯 emacs 的人来说是非常痛苦的。

# javascript - 为什么 ibooks 没有在固定布局 epub 中提供文本突出显示和添加注释功能？

> ID：15495447
> 
> 赞同：2
> 
> 时间：2013-03-19T09:17:09.003
> 
> 标签：javascript, ios, epub

是否可以在固定布局 epub 中添加文本高亮显示。我使用以下代码在规范化 epub 中添加了文本突出显示和注释：

```
 [webview stringByEvaluatingJavaScriptFromString:@" var selection = "";\
     var results = "";\
     var idspan = "";\
     "];
    [webview stringByEvaluatingJavaScriptFromString:@"if (window.getSelection) {\
     selection = window.getSelection();\
     }\
     if (selection.rangeCount > 0) {\
     var range = selection.getRangeAt(0);\
     var span = document.createElement(\"span\");\
     span.id = \"span_\" + range.startOffset + \"_\" + range.endOffset ;\
     span.setAttribute(\"class\",\"uiWebviewHighlight\");\
     span.setAttribute(\"onclick\",\"clickHandler(this)\");\
     span.style.backgroundColor  = \"skyblue\";\
     range.surroundContents(span);\
     selection.removeAllRanges();\
     selection.addRange(range);\
     results=span.id;\
     }"];

    [Span_id_Array addObject: [webview stringByEvaluatingJavaScriptFromString:@"results"]];

    - (void)textViewDidChange:(UITextView *)textView{
    NSLog(@"textViewDidChange:");
    [Selected_Notes_Array addObject:Notes_TxtView.text];
    [NotesDic setValue:[Selected_Notes_Array lastObject] forKey:[Span_id_Array lastObject]];
    // NSLog(@"Selected_Notes_Array:%@",NotesDic);
} 
```

我可以通过这种方式在规范化 epub 中存储和检索 Notes 和 Highlights。我在固定布局 epub 中遇到问题。我可以选择一个单词。但我想选择多个单词和段落。一些固定布局的 epub 书不允许选择，我不知道为什么。

如果有人知道这意味着请帮助我..提前谢谢...

# javascript - 如何防止文本区域的事件冒泡同时保持可编辑？

> ID：15495450
> 
> 赞同：1
> 
> 时间：2013-03-19T09:17:11.230
> 
> 标签：javascript, jquery-mobile, jquery-events

我在 jQuery mobile 中有一个列表视图，其中每个条目都包含几行文本。

单击该条目应该将文本的某些部分替换为 <textarea> 以使其可编辑。再次单击该条目应再次将 textarea 替换为纯文本（现已编辑）。

在编辑文本时，用户应该能够在文本框中单击以选择部分文本或移动光标。为了防止来自 textarea 的点击事件冒泡，我`stopPropagation()`在事件上使用，效果很好。

**然而，虽然这在 Chrome 和 Safari 中有效，但 Firefox 和 Internet Explorer 都不会移动光标，也不会让用户选择文本区域内的部分文本。**

我在这里缺少什么吗？（对于 Firefox，我在 Windows 7 上使用版本 19.0.2，如果相关的话。我尝试使用 preventDefault 或返回 false，但这不起作用 - 为什么要这样做？）

我在[这里创建了一个 JSFiddle](http://jsfiddle.net/7AvdX/6/)

html代码是

```
<ul id="listid" data-role="listview" data-filter="true" data-iconpos="center" data-split-icon="arrow-u" data-theme="c" data-split-theme="b" data-inset="true">
<li><a href="#" id="link1">
  <h2>Title</h2>
  <p>Here is some item<br />with several lines<br />
    <span id="comment1">And this line is supposed to be editable</span>
    <textarea style='display: none; width: 95%;' id="textarea1"></textarea>
   </p></a>
  <a href="#" onclick="alert('Something else happens here')">This does something else</a>
</li>
</ul> 
```

并且相应的 JavaScript 是（在这里加载在 body.onLoad 上，但这仅适用于 JsFiddle）：

```
window.toggled = false;

$("#link1").click( function(e){
    var textarea = $("#textarea1").toggle();
    var comment =  $("#comment1").toggle();
    if(window.toggled){
        comment.html(textarea.val());
    }
    else{
       textarea.val(comment.html());
    }
    toggled = !toggled;
});

$("#textarea1").click(function(e){
    if(console && console.log){ console.log(e);}
    e.stopPropagation();
}); 
```

请忽略切换文本区域的不太优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:49:10.570

IE 对锚标记内的文本区域不满意。见[http://jsfiddle.net/zCfRu/](http://jsfiddle.net/zCfRu/)

```
<a href="#" id="link1"> 
<h2>Title</h2>
<p>Here is some item<br />with several lines<br />
<span id="comment1">And this line is supposed to be editable</span>
</p>
</a>
<textarea style='display: none; width: 95%;' id="textarea1"></textarea> 
```

# php - 如何将数据传递给codeigniter中的视图？

> ID：15495452
> 
> 赞同：1
> 
> 时间：2013-03-19T09:17:24.787
> 
> 标签：php, codeigniter

我有一个像这样的控制器。它的数组比此处列出的要多：

```
$this->data['password'] = array(
    'name' => 'password',
    'id'   => 'password',
    'type' => 'password'
);
$this->data['password_confirm'] = array(
    'name' => 'password_confirm',
    'id'   => 'password_confirm',
    'type' => 'password'
); 
```

使用 phil sturgeon 模板将此数据传递给视图，如下所示：

```
$this->template
        ->title("Edit your Profile")
        ->set_theme('admin')
        ->set_layout('dashboard')
        ->set_partial('links','partials/links')
        ->set_partial('header','partials/header')
        ->set_partial('menu','partials/menu')
        ->set_partial('footer','partials/footer')
        ->build('auth/edit_user', $this->data); 
```

我的视图文件是：

```
Password: (if changing password)<br />
<?php echo form_input($password);?>

Confirm Password: (if changing password)<br />
<?php echo form_input($password_confirm);?> 
```

现在，当我刷新页面时，我会在字段中获取值，但在页面顶部也会出现错误消息：

```
Message:  Object of class stdClass could not be converted to string 
```

谁能告诉我怎么了？？PS 使用 codeingniter hmvc、phil sturgeon 模板和 ben edmunds ion auth....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:27:22.540

我做了类似于以下的事情来解决这个问题：

`$this->data = (array) $this->data;`

并将其放在前面`$this->template->build()`

# delphi - 将 VCL 组件导入 Firemonkey 应用程序

> ID：15495455
> 
> 赞同：3
> 
> 时间：2013-03-19T09:17:26.863
> 
> 标签：delphi, vcl, firemonkey, delphi-xe3

如何在 FMX 应用程序中使用 VCL 组件？

在部门，我想创建一个包含 Shockwave ActiveX 的 VCL 组件并将其加载到我的 firemonkey 表单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T09:36:01.937

RemObjects 扩展了他们的 Hydra 产品以允许混合 FireMonkey、VCL 和 .NET。

[http://www.remobjects.com/hydra/hosts.aspx](http://www.remobjects.com/hydra/hosts.aspx)

但是这个产品价格昂贵

# c# - 使用 Interlocked.CompareExchange 递增计数器直到一个值

> ID：15495459
> 
> 赞同：4
> 
> 时间：2013-03-19T09:17:34.177
> 
> 标签：c#, locking, task-parallel-library, task, atomic

我需要增加一个计数器，直到它达到一个特定的数字。我可以使用两个并行任务来增加数字。我没有使用锁来检查数字是否未达到最大允许值然后递增，而是以下列方式使用[Interlocked .CompareExchange：](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)

```
public class CompareExchangeStrategy
{
  private int _counter = 0;
   private int _max;

public CompareExchangeStrategy(int max)
{
    _max = max;
}

public void Increment()
{
    Task task1 = new Task(new Action(DoWork));
    Task task2 = new Task(new Action(DoWork));
    task1.Start();
    task2.Start();
    Task[] tasks = new Task[2] { task1, task2 };
    Task.WaitAll(tasks);

}

private void DoWork()
{
    while (true)
    {
        int initial = _counter;
        if (initial >= _max)
        {
            break;
        }
        int computed = initial + 1;
        Interlocked.CompareExchange(ref _counter, computed, initial);
    }
}

 } 
```

与锁定方法相比，此代码需要更多的执行时间（对于 _max= 1,000,000）：

```
public class LockStrategy
{
    private int _counter = 0;
    private int _max;

    public LockStrategy(int max)
    {
        _max = max;
    }

    public void Increment()
    {
        Task task1 = new Task(new Action(DoWork));
        Task task2 = new Task(new Action(DoWork));
        task1.Start();
        task2.Start();
        Task[] tasks = new Task[2] { task1, task2 };
        Task.WaitAll(tasks);

    }

    private void DoWork()
    {
        while (true)
            {
                lock (_lockObject)
                {
                    if (_counter < _max)
                    {
                        _counter++;
                    }
                    else
                    {
                        break;
                    }
                }
            }
    }

   } 
```

我使用 Interlocked.CompareExchange 的方式可能存在问题，但我无法弄清楚。有没有更好的方法来执行上述逻辑而不使用锁（又名互锁方法）？

* * *

**更新**
我能够提供一个性能与锁定版本一样好的版本（对于迭代 = 1,000,000 次，对于 > 1,000,000 次迭代更好）。

```
 SpinWait spinwait = new SpinWait();
    int lock =0;
                while(true)
                {

                    if (Interlocked.CompareExchange(ref lock, 1, 0) != 1)
                    {

                        if (_counter < _max)
                        {
                            _counter++;
                            Interlocked.Exchange(ref lock, 0);
                        }
                        else
                        {
                            Interlocked.Exchange(ref lock, 0);
                            break;
                        }

                    }
                    else
                    {
                        spinwait.SpinOnce();
                    }
                } 
```

差异是由旋转造成的。如果任务无法在第一次运行时增加变量，它会旋转，为任务 2 提供进一步进行的机会，而不是执行繁忙的旋转等待。

我怀疑锁的作用几乎相同，它可以采用一种策略来旋转并允许当前拥有锁的线程执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:42:36.217

这里的问题是你实际上在版本中做了更多的工作`Interlocked`——我的意思是更多的迭代。这是因为***很多***时候`CompareExchange` *没有做任何事情*，因为值被另一个线程改变了。您可以通过将总计添加到每个循环来看到这一点：

```
 int total = 0;
    while (true)
    {
        int initial = Thread.VolatileRead(ref _counter);
        if (initial >= _max)
        {
            break;
        }
        int computed = initial + 1;
        Interlocked.CompareExchange(ref _counter, computed, initial);
        total++;
    }
    Console.WriteLine(total); 
```

（注意我还添加了一个`VolatileRead`以确保`_counter`不在寄存器中）

我得到**的远**不止`total`你在这里可能期望的迭代（通过）。重点是这样使用`Interlocked`的时候，你需要添加一个策略，如果值改变了会发生什么，即重试策略。

例如，粗略的重试策略可能是：

```
 while (true)
    {
        int initial = Thread.VolatileRead(ref _counter);
        if (initial >= _max)
        {
            break;
        }
        int computed = initial + 1;
        if (Interlocked.CompareExchange(ref _counter, computed, initial)
                          != initial) continue;
        total++;
    } 
```

也就是说：继续重试，直到你让它工作 - 任何“正在做”的代码只会在检查*之后*`total++`发生（当前行所在的位置）。然而，这使得代码更加昂贵。

如果`lock`更便宜：使用`lock`. 没有什么问题`lock`，而且确实在内部进行了非常优化。无锁并不自动与“最快”或“最简单”相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T09:49:10.517

我已经设法使用以下代码实现了与 lockstrategy 几乎相同的性能：

```
public class CompareExchangeStrategy {
        volatile private int _counter = 0;
        private int _max;

        public CompareExchangeStrategy(int max) {
            _max = max;
        }

        public void Increment() {
            Task task1 = new Task(new Action(DoWork));
            Task task2 = new Task(new Action(DoWork));
            task1.Start();
            task2.Start();
            Task[] tasks = new Task[2] { task1, task2 };
            Task.WaitAll(tasks);

        }

        private void DoWork() {
            while(true) {
                if(Interlocked.Add(ref _counter, 1) >= _max)
                    break;
            }
        }
    } 
```

# api - presentRequestsDialogModallyWithSession 不起作用，但效果很好

> ID：15495462
> 
> 赞同：9
> 
> 时间：2013-03-19T09:17:37.360
> 
> 标签：api, facebook-ios-sdk, facebook-app-requests

当我将网络对话框用于好友请求时，一切都很好，除了没有请求或发出任何请求。编码：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   facebookFriend.id, @"to",
                                   nil];
    [FBWebDialogs presentRequestsDialogModallyWithSession:FBSession.activeSession 
                                                  message:NSLocalizedString(@"FB_FRIEND_INVITE_MESSAGE", @"Facebook friend invite message")       
                                                    title:NSLocalizedString(@"FB_FRIEND_INVITE_TITLE", @"Facebook friend invite title") 
                                               parameters:params 
                                                  handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                                                        }]; 
```

这是我得到的结果：

```
fbconnect://success?request=xxxxxxxxxxxx&to%5B0%5D=xxxxxxxx 
```

如何调试出了什么问题？

提前致谢。

路德

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-20T17:12:17.360

对于**SDK 3.2 或更高**版本，我们可以使用**FBWebDialogs**类来帮助我们显示一个弹出窗口以及好友列表，并从列表中选择一个或多个来发送邀请。

让我们一步一步来：

1) 下载并安装 [SDK 3.2](https://stackoverflow.com/questions/14157784/can-we-invite-people-to-use-our-app-or-send-friend-request-from-the-app-via-face/16605625#16605625)或更高版本。

2) 首先按照[这个](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)url 在 facebook 上设置你的应用程序。

3）然后使用随附的代码。

示例代码：（生成邀请好友请求）

```
-(void)inviteFriends
{
    if ([[FBSession activeSession] isOpen])
    {
        NSMutableDictionary* params =  [NSMutableDictionary dictionaryWithObjectsAndKeys:nil];
       [FBWebDialogs presentRequestsDialogModallyWithSession:nil
                                                      message:[self getInviteFriendMessage]
                                                        title:nil
                                                   parameters:params
                                                      handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error)
         {
             if (error)
             {
                 [self requestFailedWithError:error];
             }
             else
             {
                 if (result == FBWebDialogResultDialogNotCompleted)
                 {
                     [self requestFailedWithError:nil];
                 }
                 else if([[resultURL description] hasPrefix:@"fbconnect://success?request="]) 
                 {
                    // Facebook returns FBWebDialogResultDialogCompleted even user 
                    // presses "Cancel" button, so we differentiate it on the basis of
                    // url value, since it returns "Request" when we ACTUALLY
                    // completes Dialog
                     [self requestSucceeded];
                 }
                 else
                 {
                     // User Cancelled the dialog
                     [self requestFailedWithError:nil];
                 }
             }
         }
       ];

    }
    else
    {
        /*
         * open a new session with publish permission
         */
        [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObject:@"publish_stream"]
                                           defaultAudience:FBSessionDefaultAudienceFriends
                                              allowLoginUI:YES
                                         completionHandler:^(FBSession *session, FBSessionState status, NSError *error)
         {
             if (!error && status == FBSessionStateOpen)
             {
                 NSMutableDictionary* params =   [NSMutableDictionary dictionaryWithObjectsAndKeys:nil];
                 [FBWebDialogs presentRequestsDialogModallyWithSession:nil
                                                               message:[self getInviteFriendMessage]
                                                                 title:nil
                                                            parameters:params
                                                               handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error)
                  {
                      if (error)
                      {
                           [self requestFailedWithError:error];
                      }
                      else
                      {
                          if (result == FBWebDialogResultDialogNotCompleted)
                          {
                              [self requestFailedWithError:nil];
                          }
                          else if([[resultURL description] hasPrefix:@"fbconnect://success?request="])
                          {
                              // Facebook returns FBWebDialogResultDialogCompleted even user 
                              // presses "Cancel" button, so we differentiate it on the basis of
                              // url value, since it returns "Request" when we ACTUALLY
                              // completes Dialog
                              [self requestSucceeded];
                          }
                          else
                          {
                              // User Cancelled the dialog
                              [self requestFailedWithError:nil];
                          }

                      }
                  }];
             }
             else
             {
                 [self requestFailedWithError:error];
             }
         }];
    }

} 
```

这里是调用委托函数`OnFBSuccess`和的辅助函数`OnFBFailed`。

```
- (void)requestSucceeded 
{
    NSLog(@"requestSucceeded");
    id owner = [fbDelegate class];
    SEL selector = NSSelectorFromString(@"OnFBSuccess");
    NSMethodSignature *sig = [owner instanceMethodSignatureForSelector:selector];
    _callback = [NSInvocation invocationWithMethodSignature:sig];
    [_callback setTarget:owner];
    [_callback setSelector:selector];
    [_callback retain];

    [_callback invokeWithTarget:fbDelegate];
}

- (void)requestFailedWithError:(NSError *)error
{
    NSLog(@"requestFailed");
    id owner = [fbDelegate class];
    SEL selector = NSSelectorFromString(@"OnFBFailed:");
    NSMethodSignature *sig = [owner instanceMethodSignatureForSelector:selector];
    _callback = [NSInvocation invocationWithMethodSignature:sig];
    [_callback setTarget:owner];
    [_callback setSelector:selector];
    [_callback setArgument:&error atIndex:2];
    [_callback retain];

    [_callback invokeWithTarget:fbDelegate];
} 
```

所以调用方法的类`InviteFriend`必须具有以下功能：

```
-(void)OnFBSuccess
{
    CCLOG(@"successful");

    //  do stuff here  
    [login release];
}

-(void)OnFBFailed:(NSError *)error
{
    if(error == nil)
        CCLOG(@"user cancelled");
    else
        CCLOG(@"failed");

    //  do stuff here  
    [login release];
} 
```

**推荐阅读：**

[通过 Facebook 发送邀请](https://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)

[API 权限](https://developers.facebook.com/docs/reference/api/user/)

[一个例子](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

**笔记：**

1) 不要忘记在`plist`.

2）不要忘记调整`AppDelegate`以[处理 urls](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)。

部分摘录自第 2 点中的上述链接：

```
/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
 */
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
} 
```

希望能帮助到你！

**编辑**

这里：

fbDelegate 的声明是：

```
@property (nonatomic, assign) id <FBLoginDelegate> fbDelegate;

@protocol FBLoginDelegate <NSObject>

@required

-(void) OnFBSuccess;
-(void) OnFBFailed : (NSError *)error;

@end 
```

这就是您可以使用此代码的方式：

```
FBLoginHandler *login = [[FBLoginHandler alloc] initWithDelegate:self];   // here 'self' is the fbDelegate you have asked about
[login inviteFriends]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T14:31:41.560

我认为您的应用程序不适用于 Android 和 web 。而您正试图在网络或 Android 设备上获得通知。

要点：要在 Android 或 Web 上获得通知，您还必须为 Android 和 Web 启用您的应用程序。

**要在您的应用程序上启用 Android 和 Web：**转到您的应用程序 > 设置 > 单击**+ 添加平台**，添加必要的信息并保存。

让我们享受通知。:-)

# r - 使用 Auto.arima 预测多变量数据

> ID：15495465
> 
> 赞同：1
> 
> 时间：2013-03-19T09:17:48.900
> 
> 标签：r, forecasting

我正在尝试预测每周数据的销售量。数据由以下变量组成：周数、销售额、平均价格/单位、假期（该周是否包含假期）和促销（如果有促销活动），共 104 周。所以基本上最后 6 个 obs 的数据集看起来像：

```
 Week     Sales       Avg.price.unit Holiday    Promotion

  101     8,970             50       0         1

  102    17,000             50       1         1

  103    23,000             80       1         0

  104    28,000            180       1         0

  105                      176       1         0

  106                      75        0         1 
```

现在我想预测第 105 周和第 106 周。所以我使用 ts 函数创建了单变量时间序列 x ，然后通过发出命令运行 auto.arima 函数：

```
x<-ts(sales$Sales, frequency=7)
>  fit<-auto.arima(x,xreg=external, test=c("kpss","adf","pp"),seasonal.test=c("ocsb","ch"),allowdrift=TRUE)
>fit
ARIMA(1,1,1)                    

**Coefficients:
          ar1      ma1  Avg.price.unit   Holiday  Promotion

      -0.1497  -0.9180          0.0363  -10.4181    -4.8971

s.e.   0.1012   0.0338          0.0646    5.1999     5.5148

sigma^2 estimated as 479.3:  log likelihood=-465.09
AIC=942.17   AICc=943.05   BIC=957.98** 
```

现在，当我想预测过去 2 周（第 105 周和第 1o6 周）的值时，我提供第 105 周和第 106 周的回归变量的外部值：

```
forecast(fit, xreg=ext)

where ext consists of future values of regressors for last 2 weeks.

The output comes as:

 Point         Forecast    Lo 80    Hi 80    Lo 95    Hi 95

15.85714       44.13430 16.07853 72.19008 1.226693 87.04191

16.00000       45.50166 17.38155 73.62177 2.495667 88.50765 
```

输出看起来不正确，因为销售的预测值非常小，因为先前值（训练）值的销售值通常在数千范围内。

如果有人能告诉我为什么它会不正确/出乎意料，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:00:48.230

如果您事先知道一年中的某些周或一年中的某些事件可能很重要，您可以形成一个可能有用的传递函数。您可能必须包含一些 ARIMA 结构来处理短期自回归结构和/或一些 Pulse/Level Shift/Local Trends 来处理未指定的确定性序列（省略变量）。如果您想发布所有数据，我很乐意为您证明这一点，从而提供零基础帮助。或者，您可以通过 dave@autobox.com 将其通过电子邮件发送给我，我将对其进行分析并将数据和结果发布到列表中。关于这个问题的其他评论员可能也希望对比较分析做同样的事情。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-19T11:35:42.520

您的模型中的 51 个每周假人在哪里？没有它们，您将无法捕捉季节性。

# rest - 如何构建 EmberJS 应用程序以与 REST 后端交互

> ID：15495467
> 
> 赞同：0
> 
> 时间：2013-03-19T09:17:53.493
> 
> 标签：rest, ember.js, couchdb, web2py

我们有一个`web2py`要连接到`EmberJS`客户端的应用程序。这个想法是使用响应能力`EmberJS`来保持客户端更新，编写最少的代码。

我们有 ( `REST`) 原语负责创建/更新底层数据存储 ( `CouchDB`)。这些原语有时很复杂并且涵盖了极端情况，包括创建多个文档、连接它们、验证配置参数……这是在后端实现的。我们希望避免在我们的`EmberJS`应用程序中复制数据的完整建模，并避免复制这些原语实现的逻辑。

我有一些疑问：

*   `EmberJS`仅对文档中的数据子集进行建模是否有意义？我们只会为用户能够与之交互的少量属性创建模型。客户不会看到完整的`CouchDB`文档，只会看到显示/交互所需的数据。
*   是否可以连接`EmberJS`到`REST`接口，而不必对数据库中的基础数据进行完全建模？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:53:25.923

> 在 EmberJS 中仅对文档中的数据子集进行建模有意义吗？

是的。无需为用户不需要与之交互的对象/属性创建 ember 模型。

> 是否可以将 EmberJS 连接到 REST 接口，而无需对数据库中的底层数据进行完全建模？

这绝对是可能的，这是一个相当常见的用例。开始的最佳方式是构建一个仅适用于几个模型的小型 MVP。一旦你把它连接起来，添加更多的域对象就很容易了。

棘手的部分（尤其是一开始）是将您的 REST 端点映射到 ember-data REST 适配器。该适配器将与一些 REST 端点一起工作 - 请参阅[REST 适配器](http://emberjs.com/guides/models/the-rest-adapter/)- 但连接 CouchDB 数据存储可能需要一些自定义。用于此的工具仍在不断发展，请查看[ember-data 集成测试](https://github.com/emberjs/data/tree/master/packages/ember-data/tests/integration)以了解可用的工具。

# android-layout - 如何使用安卓定时器

> ID：15495468
> 
> 赞同：0
> 
> 时间：2013-03-19T09:17:54.257
> 
> 标签：android-layout, timer

我正在开发一个 android 应用程序。在我的主要活动中，我有两个布局。第一个具有可见性的相对布局，然后是可见的一个 LinerLayout。在我的活动类中，我想设置计时器，以便在 3 秒后我的 LinerLayout 应该消失，RelativeLayout 应该是可见的。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:23:10.467

你可以用来`java.util.Timer`实现这一点。

对于重复任务，请使用以下内容：

`new Timer().scheduleAtFixedRate(task, after, interval);`

对于任务的单次运行，请使用以下命令：

`new Timer().schedule(task, after);`

task：您要执行的方法。
after：定时器初始执行的时间间隔。（以毫秒为单位）
interval：重复报警的中间时间

供你参考：

```
class UpdateTimeTask extends TimerTask {
public void run() {
   firstLinearLayout.setVisibility(View.VISIBLE);
   secondRelativeLayout.setVisibility(View.VISIBLE);
}
} 
```

要启动计时器：

```
timer = new Timer();
timer.schedule(new UpdateTimeTask(), 3000); 
```

# android - 如何在android中为imageview的一部分着色

> ID：15495470
> 
> 赞同：0
> 
> 时间：2013-03-19T09:18:06.723
> 
> 标签：android, imageview, bar-chart

我有一个`ImageView`如下所示：

```
 <ImageView
    android:id="@+id/barchart"
    android:layout_width="100dp"
    android:layout_height="6dp"
    android:layout_below="@+id/stats"
    android:layout_marginTop="9dp"
    android:layout_toRightOf="@+id/model"
    android:background="@android:color/white" /> 
```

*所以，这个图像基本上会以白色横条*的形式来表示。现在，我想根据*动态*值为其宽度**着色。**如果值为 30dp，则图像的 30dp 将为一种颜色，其余 70dp 将为白色。`ImageView`

 *所以，目的基本上是用条形图的形式来表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:30:18.490

最简单的方法是覆盖 View 类并手动绘制条形图。甚至可能不是一个条纹，而是整个图表。这很容易做到。像这样的东西：

```
class ChartView extends View {
    Paint paint = new Paint();
    List<Rect> stripes = new ArrayList<Rect>();
    List<Integer> colors = new ArrayList<Integer>();

    public ChartView(Context context) {
        super(context);
    }

    @Override
    public void draw(Canvas canvas) {
        super.draw(canvas);
        for (Rect r : stripes) {
            paint.setColor(colors.get(stripes.indexOf(r)));
            canvas.drawRect(r, paint);
        }
    }
} 
```

当然，使用 rects 存储条形图是一个相当糟糕的主意。此外，您必须更改绘图部分以实现双色条，但我希望您明白这一点。

[http://developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html) [http://developer.android.com/reference/android/graphics/Paint.html](http://developer.android.com/reference/android/graphics/Paint.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:30:44.530

可能重复：[带两种颜色的带状背景？](https://stackoverflow.com/questions/8727238/banded-background-with-two-colors/8731177#8731177)

您可以看到`xml`创建它的`dynamic`方式和设置它的方式。*

# azure - Microsoft.WindowsAzure.targets "指定的路径、文件名或两者都太长"

> ID：15495471
> 
> 赞同：5
> 
> 时间：2013-03-19T09:18:07.020
> 
> 标签：azure, publish

我正在尝试将项目发布到 Windows Azure，但在生成的 Microsoft.WindowsAzure.targets 文件中出现与路径长度和文件名相关的错误。如何确定哪个是有问题的路径或文件名。该错误与生成文件中的“”标签有关谢谢马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T10:38:45.087

已经是较早的帖子 - 你检查过这个帖子吗？ [构建 Windows azure 服务时出现路径太长错误](https://stackoverflow.com/questions/5739347/path-too-long-error-when-building-a-windows-azure-service)

这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T13:35:55.593

由于多年后这对我来说仍然是一个问题，并且上述不适用于 Azure SDK v2.8，因此我能够通过创建指向我的项目文件夹的符号链接来解决它。以管理员身份打开命令提示符并运行：

```
mklink /D C:\Dev C:\Users\danzo\Source\Workspaces 
```

显然，您可以将“C:\Dev”更改为您想要的任何内容，并且您需要将上面较长的路径更改为您的解决方案/项目文件夹的根目录。

# android - Android 解析一个非常简单的 XML Array

> ID：15495478
> 
> 赞同：0
> 
> 时间：2013-03-19T09:18:40.527
> 
> 标签：android

这听起来可能很愚蠢，但我只需要逻辑方面的帮助，我有一个非常简单的 XML 数组：

```
<plist version="1.0">
<array>
    <string>Lisa Jackson</string>
    <string>Elisabeth Hartmann</string>
    <string>C. J. Sansom</string>
    <string>Irmengard Gabler</string>
    <string>Oliver Pötzsch</string>
    <string>Ulla Illerhaus</string>
    <string>Christopher J. Sansom</string>
    <string>Nina Blazon</string>
    <string>Nicholas Lessing</string>
    <string>Johannes Steck</string>
    <string>Peter Kaempfe</string>
    <string>Dimeter Inkiow</string>
    <string>Barbara Sher</string>
    <string>Ulrike Hübschmann</string>
    <string>Otfried Preußler</string>
    <string>Ulla Illerhaus</string>
    <string>Annette Kurth</string>
</array>
</plist> 
```

但是当我尝试以这种方式解析它时：

```
static final String KEY_ITEM = "string";
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL); // getting XML
Document doc = parser.getDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName(KEY_ITEM);

for (int i = 0; i < nl.getLength(); i++) {
    HashMap<String, String> map = new HashMap<String, String>();
    Element e = (Element) nl.item(i);
    map.put(KEY_ITEM, parser.getValue(e, KEY_ITEM));
    menuItems.add(map);
} 
```

它根据 XML 文件中给定的数量（17 个列表项）显示列表，但不显示任何内容，如“Lisa Jackson”、“Elisabeth Hartmann”等。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T04:03:26.303

```
element.getTextContent(); 
```

这将获得所需的文本值。

或者

```
for (int in = 0; in < numberOfChildren; in++) {
    Node node = nl.item(in);
    Log.d("skt",node.getNodeName() + " = " + node.getTextContent());
    //node.getTextContent() has the text. Add it to map
} 
```

# php - 邀请用户系统中已存在的 Facebook 好友

> ID：15495479
> 
> 赞同：0
> 
> 时间：2013-03-19T09:18:42.207
> 
> 标签：php, facebook

在过去的几天里，我一直在阅读 Facebook 文档。我无法开始工作的是如何制作一个工作脚本，以便用户可以邀请他们的 Facebook 朋友，作为我系统中的朋友，他们已经在我的网站上注册，通过我使用 Facebook SDK 制作的社交连接脚本。我很想给你们一些代码来使用，但我需要说实话：无法以任何方式弄清楚这项工作。我的下一步是在 Google 和 GitHub 上进行搜索。我确实找到了类似的东西，但不是*那么*好。所以目前我最后的希望是 Stackoverflow 上的一些 IT 专家。想法、提示和链接将非常有帮助。

编辑：

我的目的是使用电子邮件使其工作。

* * *

如果您不理解该问题或有一些问题 - 请随时提问。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:06:05.453

您应该根据 Facebook 用户 ID 执行此操作，而不是电子邮件。

将 FB 用户 id 保存到您的数据库中，当新用户在您的网站上注册时，从 Facebook 中提取他们朋友的 id 并将其与数据库中的 id 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:22:32.620

您可以通过`email address`.

您网站上的用户使用他们的电子邮件地址，Facebook 的用户也使用他们的电子邮件地址。

您可以检查是否有人从 Facebook 邀请他的朋友。比脚本检查您的数据库中可用或不可用的电子邮件地址。您可以通过他/她的电子邮件显示可用的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:45:03.763

您可以从这里获取代码， [http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/,where) ，您可以使用“to”字段来选择要邀请的朋友。

# c# - 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“学生”中插入标识列的显式值

> ID：15495488
> 
> 赞同：0
> 
> 时间：2013-03-19T09:19:10.290
> 
> 标签：c#, asp.net, sql, sql-server

将值插入数据库时​​出现此错误。我已经在 SQL Sever Management Studio 中将身份规范属性设置为 ON，但我仍然面临这个错误。我也试过这种方式`SET IDENTITY_INSERT Student ON`，在我的 SQL 命令中添加这一行，但它没有运行。

`Default.aspx.cs`：

```
protected void btnsubmit_Click1(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(@"Data Source=INAFFFP1IT004W\MYSQL;Initial Catalog=test;User ID=sa;Password=test@1234;");
    con.Open();

    string SId = tbid.Text;
    string FirstName = tbfirstname.Text;
    string LastName = tblastname.Text;
    string StartDate = tbstart.Text;
    string EndDate = tbend.Text;

    using (SqlCommand cmd = con.CreateCommand())
    {
     cmd.CommandText = "insert into Student(SId,FirstName,LastName,StartDate,EndDate) values('" + SId + "','" + FirstName + "','" + LastName + "','" + StartDate + "','" + EndDate + "')";
        cmd.Parameters.AddWithValue("@SId", tbid.Text);
        cmd.Parameters.AddWithValue("@FirstName", tbfirstname.Text);
        cmd.Parameters.AddWithValue("@LastName", tblastname.Text);
        cmd.Parameters.AddWithValue("@StartDate", tbstart.Text);
        cmd.Parameters.AddWithValue("@EndDate", tbend.Text);
        cmd.ExecuteNonQuery();
    }
    con.Close();
    tbid.Text = "";
    tbfirstname.Text = "";
    tblastname.Text = "";
    tbstart.Text = "";
    tbend.Text = "";
    tbid.Focus();
}

 **Default.aspx**:

 <head runat="server">

<script type="text/javascript">
  window.onload = function () {
    new JsDatePick({
        useMode: 2,
        target: "tbstart",
        dateFormat: "%M/%d/%Y"
    });
    new JsDatePick({
        useMode: 2,
        target: "tbend",
        dateFormat: "%M/%d/%Y"
    });
 };
</script>
<title></title>

<style type="text/css">
    .style1
    {
        width: 64px;
    }
</style>

</head>
<body>
<form id="form1" runat="server">
<div>

</div>
<table cellpadding="2" cellspacing="5">
    <tr>
        <td>
            <asp:Label ID="lblId" runat="server" Text="SId"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tbid" runat="server"></asp:TextBox>
        </td>
        <td class="style1">
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblname" runat="server" Text="FirstName"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tbfirstname" runat="server"></asp:TextBox>
        </td>
        <td class="style1">
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lbllastname" runat="server" Text="LastName"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tblastname" runat="server"></asp:TextBox>
        </td>
        <td class="style1">
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblstart" runat="server" Text="StartDate"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tbstart" runat="server"></asp:TextBox>
        </td>
        <td class="style1">
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblend" runat="server" Text="EndDate"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="tbend" runat="server"></asp:TextBox>
        </td>
        <td class="style1">
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            <asp:Button ID="btnupdate" runat="server" onclick="btnupdate_Click" 
                Text="Update" Width="63px" />
        </td>
        <td>
            <asp:Button ID="btnsubmit" runat="server" Text="Submit" 
                onclick="btnsubmit_Click1" Width="102px" />
        </td>
        <td class="style1">
     <asp:Button ID="btnsearch" runat="server" onclick="Button1_Click" Text="Search" />
        </td>
    </tr>
</table>
<br />

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T09:22:19.523

SQL 命令

```
SET IDENTITY_INSERT <table> ON 
```

有一个会话范围。您需要在 C# 代码中发送到数据库的查询中包含此内容。

请注意，您只能有一个带有 identity_insert 的表。MSDN：

> 在任何时候，会话中只有一个表可以将 IDENTITY_INSERT 属性设置为 ON。如果一个表已经将此属性设置为 ON，并且为另一个表发出了 SET IDENTITY_INSERT ON 语句，Microsoft® SQL Server™ 将返回一条错误消息，指出 SET IDENTITY_INSERT 已经为 ON，并报告它设置为 ON 的表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:25:20.890

您可以尝试执行此命令文本。

```
 cmd.CommandText = "SET IDENTITY_INSERT Student ON;" + 
                   "insert into Student(SId,FirstName,LastName,StartDate,EndDate) " + 
                    "values(@id, @firstname, @lastname, @startdate, @enddate);" + 
                    "SET IDENTITY_INSERT Student OFF;" ;
 cmd.Parameters.AddWithValue("@id", SId);
 cmd.Parameters.AddWithValue("@firstname", FirstName);
 cmd.Parameters.AddWithValue("@lastname", LastName);
 cmd.Parameters.AddWithValue("@startdate", StartDate);
 cmd.Parameters.AddWithValue("@enddate", endDate); 
```

另请注意，应使用前缀“@”将 a 参数插入命令文本中，而不是连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:54:16.250

您需要在您的程序或 SQL Server 管理工作室中添加以下代码。有关更多信息，请查看[此处的 msdn 网站](http://msdn.microsoft.com/en-us/library/ms188059.aspx)

> SET IDENTITY_INSERT 学生开启
> 
> 去
> 
> 插入学生（ID，姓名）值（31，'sss'）

# javascript - 查找设备宽度

> ID：15495489
> 
> 赞同：-5
> 
> 时间：2013-03-19T09:19:10.850
> 
> 标签：javascript

如何使用视口元标记查找设备宽度。

还想在控制台中显示设备宽度

java脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:22:43.387

`viewport`尺寸可以通过对象获得`window`：

```
var viewport = {
    width  : $(window).width(),
    height : $(window).height()
};

//can access dimensions like this:
//viewport.height 
```

虽然你不会总是得到完美的结果，但不同的设备表现不同，这给出了`viewport`尺寸，而不是屏幕尺寸。

有关[**`post`**](https://stackoverflow.com/questions/9477028/how-to-programmatically-find-the-device-width-in-phonegap-jquery-mobile)如何检查`data-role="page"`元素的宽度以找到`device-width`

# linux - 编译linux内核时如何解决这个错误

> ID：15495490
> 
> 赞同：0
> 
> 时间：2013-03-19T09:19:13.427
> 
> 标签：linux, linux-kernel, archlinux

我正在尝试在我的 Ubuntu 机器上编译 Linux 内核源代码 2.6.38.4，但经过将近一小时的过程低于给定错误

```
 VDSOSYM arch/x86/vdso/vdso32-int80-syms.lds
    VDSOSYM arch/x86/vdso/vdso32-sysenter-syms.lds
    VDSOSYM arch/x86/vdso/vdso32-syms.lds
     LD      arch/x86/vdso/built-in.o
     LD      arch/x86/built-in.o
     LD      vmlinux.o
     MODPOST vmlinux.o
     WARNING: modpost: Found 7 section mismatch(es).
     To see full details build your kernel with:
     'make CONFIG_DEBUG_SECTION_MISMATCH=y'
      GEN     .version
      CHK     include/generated/compile.h
      UPD     include/generated/compile.h
      CC      init/version.o
      LD      init/built-in.o
      LD      .tmp_vmlinux1
      arch/x86/built-in.o: In function `xen_hvm_post_suspend':
      /home/amit/Linux_Kernel_Study/linux-2.6.38.4/arch/x86/xen/suspend.c:34:   undefined   reference to `xen_unplug_emulated_devices'
      make: *** [.tmp_vmlinux1] Error 1 
```

我试图在谷歌上查看，但在那里找不到太多线索，谁能告诉我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:41:30.527

一小时编译内核很奇怪（或者你正在旧硬件上编译）。编译时尝试使用**-j选项：**

```
make -j8 
```

它运行多个进程来编译您的源代码。

回到你的问题。可能您在内核配置中遗漏了一些东西。使用**make xconfig**并查找 xen 选项。如果您不需要 Xen，只需从配置中删除所有 xen-things（这也将在编译期间节省时间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:16:10.527

这是一个链接器错误。函数 xen_hvm_post_suspend 调用 xen_unplug_emulated_devices 但链接器在目标文件中找不到它。

试着找出这个函数是在哪里定义的，也许你的配置没有包含所有必要的选项。如果可能，请使用 2.6.38.8 内核，也许该错误已修复。无论如何，您为什么不使用更新的内核版本？

# ruby-on-rails-3 - rails 3验证关联属性的唯一性

> ID：15495500
> 
> 赞同：0
> 
> 时间：2013-03-19T09:19:31.817
> 
> 标签：ruby-on-rails-3, validation, client-side-validation, validates-uniqueness-of

我有一个名为 Fund 的模型和一个名为 Company .. 的模型，其中基金属于一家公司。

我的基金表中有此验证：

```
validates :name, presence: true, uniqueness: true 
```

[这适用于使用client_side_validations](https://github.com/bcardarella/client_side_validations)的服务器端和客户端。但我希望我的基金名称在 fund.name 值和 fund.company.name 值中都是唯一的。而且我想以一种可以与[client_side_validations](https://github.com/bcardarella/client_side_validations)一起使用的方式来做到这一点。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:18:01.723

最终创建了一个非常具体的验证器并将其添加到客户端验证中。这是故障

在模型/fund.rb

```
validates_fund_name_not_company_name :name 
```

config/initializers/validators 中的新文件 .. 名为 fund_name_not_company_name_validator.rb

```
class FundNameNotCompanyNameValidator < ActiveModel::EachValidator
  def validate_each(record, attr_name, value)
    if ::Company.exists?(name: value)
      record.errors.add(attr_name, :fund_name_not_company_name, options.merge(:value => value))
    end
  end
end

# This allows us to assign the validator in the model
module ActiveModel::Validations::HelperMethods
  def validates_fund_name_not_company_name(*attr_names)
    validates_with FundNameNotCompanyNameValidator, _merge_attributes(attr_names)
  end
end

module ClientSideValidations::Middleware
  class FundNameNotCompanyName < ClientSideValidations::Middleware::Base
    def response
      if ::Company.exists?(name: request.params[:name])
        self.status = 404
      else
        self.status = 200
      end
      super
    end
  end
end 
```

然后在 app/assets/javascripts/rails.validations.custom.js clientSideValidations.validators.remote['fund_name_not_company_name'] = function(element, options) { if ($.ajax({ url: '/validators/fund_name_not_company_name', data : { name: element.val() }, // async*必须*为 false async: false }).status == 404) { return options.message; } }

[这](https://github.com/bcardarella/client_side_validations#custom-validators)帮助很大

# java - 如何在 android/ANDROID 中将图像从 SDcard 共享到 gmail？

> ID：15495504
> 
> 赞同：0
> 
> 时间：2013-03-19T09:19:46.700
> 
> 标签：java, android, android-intent, share

我正在做这个主题的研发。

我从图库中获取图像并能够在图像视图中查看。

通过长按该图像视图，我可以分享。

但问题是我没有将附加图像作为输出..

```
 public class Facebookhome extends Activity {

Button share;

ImageView img;

Uri screenshotUri;

private static final int SELECT_PICTURE = 1;

private String selectedImagePath;

@Override

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_facebookhome);

    share = (Button) findViewById(R.id.button1);

    img = (ImageView) findViewById(R.id.imageView1);

    share.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Intent intent = new Intent();

            intent.setType("image/*");

            intent.setAction(Intent.ACTION_GET_CONTENT);

            startActivityForResult(

                    Intent.createChooser(intent, "Select 

 Picture"),

                    SELECT_PICTURE);

        }

    });

    img.setOnLongClickListener(new View.OnLongClickListener() {

        public boolean onLongClick(View v) {

            shareimage();

            return true;

        }

    });

}

public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {

        if (requestCode == SELECT_PICTURE) {

            Uri selectedImageUri = data.getData();

            selectedImagePath = getPath(selectedImageUri);

            System.out.println("Image Path : " + selectedImagePath);

            img.setImageURI(selectedImageUri);

        }

    }

}

public String getPath(Uri uri) {

    String[] projection = { MediaStore.Images.Media.DATA };

    Cursor cursor = managedQuery(uri, projection, null, null, null);

    int column_index = cursor

            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

    cursor.moveToFirst();

    return cursor.getString(column_index);

}

public void shareitem() {

    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);

    sharingIntent.setType("text/plain");

    String shareBody = "Here is the share content body";

    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,

            "Subject Here");

    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);

    startActivity(Intent.createChooser(sharingIntent, "Share via"));

}

public void shareimage() {

    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);

    screenshotUri = Uri.parse(selectedImagePath);

    sharingIntent.setType("image/jpg");

    sharingIntent.putExtra(android.content.Intent.EXTRA_STREAM,

            screenshotUri);

    startActivity(Intent.createChooser(sharingIntent, "Share image using"));

    // Toast.makeText(getBaseContext(), "FB Last",

    // Toast.LENGTH_LONG).show();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:36:03.853

```
private static int RESULT_LOAD_IMAGE = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
    buttonLoadImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent i = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
       Uri screenshotUri = Uri.parse(picturePath);
        cursor.close();

        Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("image/jpg"");
        i.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "aa@gmail.com" });
        i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
        i.putExtra(Intent.EXTRA_STREAM, screenshotUri);
        startActivity(Intent.createChooser(i, "Send mail..."));

    }

} 
```

# c# - 要使操作 UploadPhotoStream 中的请求成为流，该操作必须具有一个类型为 Stream 的参数

> ID：15495506
> 
> 赞同：5
> 
> 时间：2013-03-19T09:19:47.777
> 
> 标签：c#, wcf, rest, soap

我一直在寻找这个问题，但仍然无法找到确切的解决方案。

代码：

```
namespace StackSample.Logic
{
    [ServiceHeaderBehavior]
    [MerchantHeaderBehavior]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Merchant : Interfaces.IMerchant
    {
        public bool UploadPhotoStream(string productid, string photoid, Stream fileData)
        {
            Logic.Components.Product ca = new Logic.Components.Product();
            return ca.UploadPhotoStream(Common.UserValues().Merchant, productid, photoid, fileData);
        }
    }
}

namespace StackSample.Interfaces
{
    [ServiceContract]
    public interface IMerchant
    {
        [OperationContract]
        [WebInvoke(UriTemplate = "UploadPhotoStream?productid={productid}&photoid={photoid}", Method = "POST")]
        bool UploadPhotoStream(string productid, string photoid, Stream fileData);
    }
} 
```

配置：

```
<bindings>
  <basicHttpBinding>
    <binding name="SOAPSecure">
      <security mode="None" />
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2097152" maxBytesPerRead="4096" maxNameTableCharCount="2097152" />
    </binding>
    <binding name="SOAPSecureTransfer" transferMode="Streamed" closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:15:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
      </security>
    </binding>
  </basicHttpBinding>
  <webHttpBinding>
    <binding name="RESTSecure">
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
      </security>
    </binding>
    <binding name="RESTSecureTransfer" transferMode="Streamed" closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:15:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
      </security>
    </binding>
  </webHttpBinding>
</bindings>
<!-- behaviors -->
<behaviors>
  <endpointBehaviors>
    <behavior name="JSON">
      <webHttp defaultOutgoingResponseFormat="Json" />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="Default">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />

<services>  
  <service behaviorConfiguration="Default" name="StackSample.Logic.Merchant">
    <endpoint address="soap" binding="basicHttpBinding" bindingConfiguration="SOAPSecureTransfer" contract="StackSample.Interfaces.IMerchant" />
    <endpoint address="rest" behaviorConfiguration="JSON" binding="webHttpBinding" bindingConfiguration="RESTSecureTransfer" contract="StackSample.Interfaces.IMerchant" />
  </service>
</services> 
```

当我尝试运行时`http://localhost:64039/Merchant/Merchant.svc`
它显示错误：

```
For request in operation UploadPhotoStream to be a stream the operation must have a single parameter whose type is Stream. 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:12:04.630

对于未来的观众，如果你想实现这个目标，你将能够将多个参数放在一起`Stream`，你需要做的是避免使用`SVC`文件来创建 Rest 或 Soap 服务。而是将其添加到您的服务项目、`Global.asax`文件、make 路由表中，例如：

```
public class Global : System.Web.HttpApplication
{
    RouteTable.Routes.Add(new ServiceRoute("MyApp/rest/Photo", new WebServiceHostFactory(), typeof(PhotoComponent)));
} 
```

**在您的网络服务中：**

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class PhotoComponent : Interfaces.IPhotoComponent
{
    public bool UploadPhotoStream(string productid, string photoid, Stream fileData)
    {
        // some code....
    }
}

[ServiceContract]
public interface PhotoComponent
{
    [OperationContract]
    [WebInvoke(UriTemplate = "UploadPhotoStream/{productid}/{photoid}", Method = "POST")]
    bool UploadPhotoStream(string productid, string photoid, System.IO.Stream fileData);
} 
```

**在 web.config 里面：**

```
<services>  
  <service behaviorConfiguration="Default" name="StackSample.Logic.PhotoComponent">
    <endpoint behaviorConfiguration="JSON" binding="webHttpBinding" bindingConfiguration="RESTSecureTransfer" contract="StackSample.Interfaces.PhotoComponent" />
  </service>
</services> 
```

**并称之为：**

```
https://127.0.0.1/MyApp/rest/Photo/UploadPhotoStream/{productid}/{photoid} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T17:46:57.870

您需要在操作中有一个参数，该参数接受一个包含您需要的属性的对象。

例如，请参见下面的代码：

```
public interface IMerchant
{
    bool UploadPhotoStream(UploadData request);
}

public class YourService : IMerchant
{
    public bool UploadPhotoStream(UploadData request)
    {
        throw new NotImplementedException();
    }
}

[DataContract]
public class UploadData
{
    [DataMember]
    string ProductId { get; set; }

    [DataMember]
    string PhotoId { get; set; }

    [DataMember]
    System.IO.Stream FileData { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T06:32:36.817

您应该在 web.config 中按以下方式配置服务。然后，您可以发送带有更多 URL 参数的流。Stream 参数应该是函数中的最后一个参数。

```
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="ServiceBehavior" name="YourServiceClassWithNamespace">
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="webHttpBindingWithJSON" contract="YourServiceInterfaceWithNamespace" behaviorConfiguration="EndpointBehavior" />
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBindingWithJSON" crossDomainScriptAccessEnabled="true" maxReceivedMessageSize="67108864"
             openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="EndpointBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

# php - 获取推荐人 ID

> ID：15495509
> 
> 赞同：2
> 
> 时间：2013-03-19T09:19:54.063
> 
> 标签：php, mysql, wordpress, referrals

我试图修改我的这个 wordpress 插件来跟踪引用当前登录用户的名称。

到目前为止，我设法构建了下面的代码，但我对任何类型的编码都很陌生，如果我能得到一些帮助，我将非常感激。

这个想法是从当前用户那里获取“parent_user_id”（推荐人ID），他们使用这个ID来获取login_ID。

**实际上这段代码正在输出：“Referred by: Array”**

```
function wpmlm_display_referrer() {
    global $wpdb, $user_ID, $current_user;
    if(isset($_GET['current_user_id']) && !empty($_GET['current_user_id'])) {
        $current_user_id = $_GET['current_user_id'];
    } else {
        $current_user_id = $current_user->ID;
    }

    # Logged in user
    if ( is_user_logged_in() == true ) {            

        $get_id = "SELECT parent_user_id FROM mlm WHERE user_id=%d".$current_user_id;
        $get_name = "SELECT login_id FROM mlm WHERE user_id=%d".$get_id;
        $ref = $wpdb->get_results($get_name);

        return 'Referred by: '.$ref;    
    }
} 
```

感谢您在这种情况下提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:34:13.617

请试试这个：

```
$get_id = "SELECT parent_user_id FROM mlm WHERE user_id='".$current_user_id ."'";
$get_name = "SELECT login_id FROM mlm WHERE user_id='".$get_id ."'"; 
```

我刚刚编辑了查询。现在第二件事是 $get_id 是包含查询的变量，所以如果你想编写子查询，如下所示：

如果子查询中的 parent_user_id 将返回 1 个值，则您在下方

```
$query = "SELECT login_id FROM mlm WHERE user_id=(SELECT parent_user_id FROM mlm WHERE user_id='".$current_user_id ."')"; 
```

如果子查询将返回多个值，请在下面使用：

```
$query = "SELECT login_id FROM mlm WHERE user_id IN (SELECT parent_user_id FROM mlm WHERE user_id='".$current_user_id ."')"; 
```

然后尝试`print_r($ref);`

你会得到数组中的值。并且一旦您看到该值，请使用数组的正确索引来获取该值。

# ajax - 使用 PUT 方法的 Ajax 调用

> ID：15495526
> 
> 赞同：0
> 
> 时间：2013-03-19T09:20:48.077
> 
> 标签：ajax, json

我正在尝试使用 PUT 方法进行 ajax 调用。下面是代码，但我收到错误**XML Parsing Error: no element found Location: moz-nullprincipal:{c847a4af-f009-4907-a103-50874fcbbe35} 第 1 行，第 1 列：**

```
$.ajax({
            type: "PUT",
            async: true,
            url: "http://localhost:8080/karthick/update",
            data: JSON.stringify(params),
           contentType: "application/json",
           dataType: "JSON",
           processdata: true,
           success: function (json) {  //On Successfull service call

               },
               error: function (xhr) {
                alert(xhr.responseText);
               }
           });

           return false;
       };

   function ServiceFailed(xhr) {
       alert(xhr.responseText);
       if (xhr.responseText) {
           var err = xhr.responseText;
           if (err)
               error(err);
           else
               error({ Message: "Unknown server error." })
       }
       return;
   } 
```

但是这项服务与 Rest-client jar 一起工作得很好。我的 POST 方法在我的浏览器中也可以正常工作。请帮助我。

问候卡西克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:55:23.590

通常，在发出跨浏览器请求时会出现此错误。试试 data: JSONP 看看是否有帮助。

# java - android中的Asyntask中的json解析错误

> ID：15495533
> 
> 赞同：0
> 
> 时间：2013-03-19T09:21:02.473
> 
> 标签：java, android, json, android-asynctask, rest-client

我在我的应用程序中收到此错误“有时”，我使用了 Asyntask：

```
03-19 08:10:05.768: E/AndroidRuntime(280): FATAL EXCEPTION: main
03-19 08:10:05.768: E/AndroidRuntime(280): java.lang.NumberFormatException: unable to   parse 'null' as integer
 03-19 08:10:05.768: E/AndroidRuntime(280):     at   java.lang.Integer.parseInt(Integer.java:406)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at java.lang.Integer.parseInt(Integer.java:382)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at java.lang.Integer.valueOf(Integer.java:682)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at Dic.proj.pkg.notifService$1$1$1$1.onPostExecute(notifService.java:76)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at Dic.proj.pkg.notifService$1$1$1$1.onPostExecute(notifService.java:1)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at android.os.AsyncTask.finish(AsyncTask.java:417)
03-19 08:10:05.768: E/AndroidRuntime(280):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-19 08:10:05.768: E/AndroidRuntime(280):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-19 08:10:05.768: E/AndroidRuntime(280):  at android.os.Handler.dispatchMessage(Handler.java:99)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at android.os.Looper.loop(Looper.java:123)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at java.lang.reflect.Method.invokeNative(Native Method)
 03-19 08:10:05.768: E/AndroidRuntime(280):     at java.lang.reflect.Method.invoke(Method.java:521)
  03-19 08:10:05.768: E/AndroidRuntime(280):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
  03-19 08:10:05.768: E/AndroidRuntime(280):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
  03-19 08:10:05.768: E/AndroidRuntime(280):    at dalvik.system.NativeStart.main(Native Method) 
```

我在计时器内调用我的 Asyntask。这是我的 Asyntask：

```
 // fetch new notifications
class fetch_last_asyn extends AsyncTask<Void, Integer, Boolean> {
    @Override
    protected Boolean doInBackground(Void... arg0) {
        RestClient client = new RestClient(
                "http://myaddress.org/api/get_last.php");
        client.AddParam("last", String.valueOf(last_notif_no));
        try {
            client.Execute(RequestMethod.GET);
        } catch (Exception e) {
            e.printStackTrace();
        }
        String response = client.getResponse();
        last_notifs = response.toString();
        return true;
    }
} 
```

在我的应用程序中，我发送我的 Asyntask 结果以解析为代码（parse_get_update），就是这样：

```
 public static String[][] parse_get_update(String jsonResponse) {
    String[][] notifs = new String[3000][10];
    try {
        JSONArray jsonArray = new JSONArray(jsonResponse);
        for (int index = 0; index < jsonArray.length(); index++) {
            JSONObject json = jsonArray.getJSONObject(index);

            // get name & id here
            String id = json.getString("id");
            String notifno = json.getString("notifno");
            String title = json.getString("title");
            String description = json.getString("description");

            notifs[index][0] = id;
            notifs[index][1] = notifno;
            notifs[index][2] = title;
            notifs[index][3] = description;

            // notif_count++;
        }
        cnt2 = jsonArray.length();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return notifs;
} 
```

为什么我会收到此错误？什么是空值？我无法理解这一点。

我使用 ResClient 来解析 JSON。这个错误*有时*只发生，大约 10% 的时间......

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:27:47.557

该错误意味着您正在尝试解析其中没有任何内容的字符串。为了证明你正在做如下的事情。

```
String s = "";   
int i = Integer.parseInt(s); 
```

你需要有一个像下面这样的条件，这样它就不会解析字符串是否为空。你甚至可以使用 try catch 块。

```
if(s is not null) {
  then do parse here
}
else {
  assign a default value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:27:57.910

在您的`postExecute()`方法中，某处，您正在解析 a`String`以`Integer`使用它 -`Integer.parseInt(str);`

大多数时候这`str`是一个有效的数字，因此，它的工作。但是在这**10%**的情况下，这`str`可能会丢失或作为`emtpy`String 来自 the `JSON`，因此 a`null`被传递给`Integer.parseInt(null)`，这会导致**java.lang.NumberFormatException**。

识别那段代码，并对其进行`null`检查，然后再将其解析为`Integer`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:38:36.330

发生这种情况是因为您将 String 解析为 Integer 请参阅此[答案](https://stackoverflow.com/questions/3377529/could-not-parse-java-lang-numberformat-exception)。

# css - 如何在同一行显示两个带有 p 标签的 div

> ID：15495535
> 
> 赞同：0
> 
> 时间：2013-03-19T09:21:05.187
> 
> 标签：css, html, image

我需要在同一行显示 2 个 div，但它们都有 p 标签，其中一个有图像，我需要它，所以我无法摆脱它们，所以我需要解决问题的方法提前谢谢;)

见下面的代码：

HTML

```
<div class="MainMenu">
        <a href="home.php"><p>HOME</p></a>
        <a href="#"><p>ABOUT</p></a>
        <a href="store.php"><p>STORE</p></a>        
    </div>

    <div class="MainMenuBasket">
        <img src="../Images/jigsoar-icons/PNG/light/64px/64_cart.png" width="px" height="px" />

        <a href="#"><p>BASKET</p></a>
    </div> 
```

CSS

```
.MainMenu{width: 680px; float: left; margin-top:25px;}
.MainMenu a{text-decoration: none; color: #FFF; }
.MainMenu a:link {color: #FFF; text-decoration: none;}
.MainMenu a:active {color: #; text-decoration: none;}
.MainMenu a:hover {background-color: #7D3B05; text-decoration: none;}
.MainMenu a:visited {color: #; text-decoration: none;}
.MainMenu p{display: inline; font-size: 18px; padding-left: 20px;}

.MainMenuBasket{float: left; margin-top:25px;}
.MainMenuBasket a{text-decoration:none; color: #FFF;}
.MainMenuBasket a:link {color: #FFF; text-decoration: none;}
.MainMenuBasket a:active {text-decoration: none;}
.MainMenuBasket a:hover {background-color: #7D3B05; text-decoration: none;}
.MainMenuBasket a:visited {text-decoration: none;}
.MainMenuBasket p {display: inline; font-size: 18px;  padding left: 20px;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:26:05.793

改变宽度`.MainMenu`

```
.MainMenu {
    float: left;
    margin-top: 25px;
    width: 250px;
} 
```

**工作示例：http:** [//jsfiddle.net/qY642/1/](http://jsfiddle.net/qY642/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:26:08.860

将属性“position:absolute”和“float:right”添加到 .MainMenuBasket。现在玩这个类的属性“left”。它应该在右侧正确对齐。

将来尝试使用 CSS 库引导程序[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)。用它很容易创建这样的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:32:18.283

这是你需要的吗？

**CSS**

```
.MainMenu{width: 680px; float: left; margin-top:25px; background:violet;float:left; width:300px;}
.MainMenu a{text-decoration: none; color: #FFF;display: inline; font-size: 18px; padding-left: 20px; }
.MainMenu a:link {color: #FFF; text-decoration: none;}
.MainMenu a:active {color: #; text-decoration: none;}
.MainMenu a:hover {background-color: #7D3B05; text-decoration: none;}
.MainMenu a:visited {color: #; text-decoration: none;}
.MainMenuBasket{float: left; margin-top:25px; background:maroon}
.MainMenuBasket a{text-decoration:none; color: #FFF;display: inline; font-size: 18px;  padding left: 20px;}
.MainMenuBasket a:link {color: #FFF; text-decoration: none;}
.MainMenuBasket a:active {text-decoration: none;}
.MainMenuBasket a:hover {background-color: #7D3B05; text-decoration: none;}
.MainMenuBasket a:visited {text-decoration: none;} 
```

**HTML**

```
<div class="MainMenu">
    <a href="home.php">HOME</a>
    <a href="#">ABOUT</a>
    <a href="store.php">STORE</a>        
</div>

<div class="MainMenuBasket">
    <img src="../Images/jigsoar-icons/PNG/light/64px/64_cart.png" width="px" height="px" />
    <a href="#">BASKET</a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:28:49.163

如果您希望两者都`div`在同一行，则需要设置`float:left`第一个 div 和`float:right`第二个 div。

**尝试这个 ：**

```
.MainMenuBasket{float: right; margin-top:25px;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:29:03.923

删除、`width`添加`display:table-cell`和`.MainMenu`删除`float:left``.MainMenuBasket`

```
.MainMenu{display:table-cell; margin-top:25px; background:violet} 
```

**[演示](http://jsfiddle.net/2cZUw/3/)**

# ruby-on-rails - 嵌套哈希和 rake 任务

> ID：15495536
> 
> 赞同：0
> 
> 时间：2013-03-19T09:21:15.647
> 
> 标签：ruby-on-rails, ruby, hash, nested

我必须从文件中加载很多带有电话号码的客户

我的模型客户：名称 has_many ：telnumbers

电话号码 :number, :comment

所以我完成了 rake 任务

```
desc "Loads file clients from excell"
task :loadclientsfromfile do
require 'csv'  
require 'active_support/core_ext/hash'  

csv_text = File.read('c:\ddd1.csv')
csv = CSV.parse(csv_text, :headers => true)
csv.each do |row|
  telnumbers = row.to_hash.slice("number","comment")
  raw = row.to_hash.slice("name")
  raw = raw.to_hash.symbolize_keys
  telnumbers = telnumbers.to_hash.symbolize_keys
  telnumber1 = {}
  telnumber1["0"] = telnumbers
  raw[:telnumbers_attributes] = telnumber1
  Client.create!(raw)
end 
```

还有我的 CSV 文件：

```
name,number,comment
Second CLient,2343262,home 
```

我想得到哈希`{:name=>"Second Client", :telnumbers_attributes=>{"0"=>{:number=>"2343262",:comment=>"home"}}}`

但我的代码不像我。请帮我把它擦干。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:56:47.240

试试这个

```
desc "Loads file clients from excell"
task :load_clients_from_file do 
  file_path = 'c:\ddd1.csv'  
  lines = IO.readlines(file_path, :encoding => 'ISO-8859-1')
  header = lines.shift.strip
  keys = header.split(/,/)
  lines.each do |line|
    values = line.strip.split(/,/)
    tel_hash = { "0" => {keys[1].to_sym => values[1], keys[2].to_sym => values[2]}}
    raw = {keys[0].to_sym => values[0], :telnumbers_attributes => tel_hash}
    Client.create!(raw)
  end
end 
```

这里哈希的输出如下所示

```
{:name=>"Second CLient", :telnumbers_attributes=>{"0"=>{:number=>"2343262", :comment=>"home"}}} 
```

# html - 表格与 ul / li

> ID：15495538
> 
> 赞同：4
> 
> 时间：2013-03-19T09:21:37.263
> 
> 标签：html, html-lists, html-table

我一直在使用不同的方式来显示数据，并且一直在研究从表格中取出实际数据并将其显示在 UL 中。这让我可以更灵活地处理加价。

但是，我正在考虑一个问题-如何使行（或在这种情况下为 UL）可单击？

我不想使用任何 JavaScript，所以我的第一个想法是这样的：

```
<div class="liTable">
<ul class="headerRow">
    <li class="cell col-1">title1</li>
    <li class="cell col-2">title2</li>
    <li class="cell col-3">title3</li>
    <li class="cell col-3">title4</li>
</ul>
<a href=”myURL”&gt;
    <ul class="row">
        <li class="cell col-1">1</li>
        <li class="cell col-2">2</li>
        <li class="cell col-3">3</li>
        <li class="cell col-3">4</li>
    </ul>
</a></div> 
```

但是这个标记是非法的，因为你不能放置 ul 的内部链接。

关于最佳实践的任何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:13:14.413

请将表格数据放入表格，将数据放入列表，毕竟这就是它们的用途。

您可以通过添加使任何元素调用 URL

```
 onclick="location.href='http://www.example.com';" 
```

到标签，但请注意，没有右键单击选项，您需要设置元素的样式以使其明显是一个链接。

你可以在这里测试它：http: [//jsfiddle.net/WguUR/](http://jsfiddle.net/WguUR/)

* * *

但是像这样将表格字段的内容用“a”括起来还不够吗？

```
<table border="1">
  <tr>
    <th>Month</th>
    <th>Savings</th>
  </tr>
  <tr>
    <td><a href="http://www.example.com">January</a></td>
    <td>$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

# visual-studio-2012 - 我无法通过 FTP 发布我的网站 - 没有打开被动模式的选项

> ID：15495542
> 
> 赞同：5
> 
> 时间：2013-03-19T09:21:44.540
> 
> 标签：visual-studio-2012, publishing-site

从历史上看，我总是通过 FTP 上传我的网站，因为我的服务器没有首页扩展，也不会。

使用最新版本的 Visual Studio 2012（11.0.51106.01 更新 1）（虽然我认为这个问题适用于 2012 年的全部），我无法发布我的网站！

错误信息是

> 2>无法将“文件”添加到网站。FTP 被动模式不可用

我还要指出，我的连接是有效的，所以我不认为错误消息是清晰而有意义的！

所以，我有3个问题。

1.  这是我做错了什么还是 Visual Studio 2012 有问题？
2.  我应该尝试通过被动模式执行此操作，还是应该更新我的 Web 服务器以启用“主动模式”？
3.  FTP 仍然是一种可接受的方法，还是我应该研究 Web 部署选项？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T17:11:08.253

1.  打开您的发布配置文件`Properties\PublishProfiles\your_profile_name.pubxml`

2.  添加`<FtpPassiveMode>False</FtpPassiveMode>`到`<PropertyGroup>`

3.  保存文件并再次发布。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T09:32:20.953

作为一种解决方法，将站点发布到文件系统（即，将其保存在本地），然后使用另一个 FTP 客户端传输它。这一点都不好，但是，如果你绝望并且没有选择，那么它可能是一个解决方案，无论多么暂时。

作为一个实际的修复，它取决于服务器来启用它。在我的情况下，它原来是一个防火墙问题（向 FileZilla 服务器授予传入权限），而不是在 FileZilla 服务器中使用自定义端口范围（在被动下）！这表明这是一个端口问题！

但是，这并不能解释为什么您可以或不能在 VS 2012 中关闭/打开被动模式，但在早期版本中可以。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-29T18:36:15.640

你也可以这样做（我得到了和你一样的错误）：

1 - `Build > Publish 'project'`。

2 - 取消选中`Passive Mode`.

[![在此处输入图像描述](../Images/1df0808509e77fc7f7a8b7d666c5550e.png)](https://i.stack.imgur.com/KkKq8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T11:54:23.793

它应该在 5 个简单的步骤 (IIS7.5) 后工作：

1.  确保选择被动模式
2.  确保在 IIS 应用程序 FTP 防火墙支持部分配置数据通道端口范围（例如 5000-6000）
3.  确保在防火墙上打开端口范围 5000-6000（允许端口范围 5000-6000 上的入站连接）
4.  网络停止 ftpsvc
5.  网络启动 ftpsvc

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-08T00:38:50.000

就我而言，在我检查日志文件后，它表明部署一直超时。我重新启动计算机，该错误消息消失了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-30T08:28:19.943

如果您有权访问服务器。您必须将 svchost.exe 添加到 Windows 防火墙中的“允许的程序”中。

看看这部电影。它在最后。 [优酷电影](http://www.youtube.com/watch?v=QsGPqkobCs8)

这对我有用。

# wpf - 串口 WPF 组合框数据绑定

> ID：15495543
> 
> 赞同：5
> 
> 时间：2013-03-19T09:21:45.277
> 
> 标签：wpf, data-binding, combobox

我想将可用串行端口列表绑定到组合框。目前，我手动添加可用的串口。像这样，

```
 foreach (string s in SerialPort.GetPortNames())
        {
            ComboBoxItem cbi = new ComboBoxItem();
            cbi.Content = s;
            myComboBox.Items.Add(cbi);
        } 
```

myComboBox 是我的组合框名称。我该如何进行绑定？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T09:45:34.400

您可以使用 ObjectDataProvider 绑定到方法。

```
<Window x:Class="SerialPortBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ports="clr-namespace:System.IO.Ports;assembly=System"
        Title="MainWindow" SizeToContent="WidthAndHeight">
    <Window.Resources>
        <ObjectDataProvider ObjectType="{x:Type ports:SerialPort}" MethodName="GetPortNames" x:Key="portNames"/>
    </Window.Resources>
    <ComboBox ItemsSource="{Binding Source={StaticResource portNames}}"/>
</Window> 
```

# symfony - 如何使用 capifony [Net::SSH::AuthenticationFailed] 将 Symfony2.1 本地网站部署到远程服务器？

> ID：15495558
> 
> 赞同：1
> 
> 时间：2013-03-19T09:22:40.373
> 
> 标签：symfony, deployment, capistrano, capifony

我在 /Sites/mywebsite 中有我的 Symfony2.1 网站文件夹，其中有 git。我想使用 capifony 将我的网站快速部署到我的远程服务器（我目前正在使用 ftp）。所以我安装了 capifony，并在我的项目中使用启动 capifony`capifony .`

我使用这里描述的第二种解决方案[http://capifony.org/](http://capifony.org/)（部署->通过复制生产），所以我像这样设置我的deploy.rb文件：

```
set :application, "mywebsite"
set :domain,      "199.178.832.3:8534"
set :deploy_to,   "git/mywebsite.git"
set :app_path,    "app"

set :repository,  "file:///Users/me/Sites/mywebsite"
set :scm,         :git
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `subversion`, `mercurial`, `perforce`, or `none`

set :model_manager, "doctrine"
# Or: `propel`

role :web,        domain                         # Your HTTP server, Apache/etc
role :app,        domain                         # This may be the same as your `Web` server
role :db,         domain, :primary => true       # This is where Symfony2 migrations will run

set :use_composer, true

set :use_sudo,      false
set :keep_releases,  3
set :shared_files,      ["app/config/parameters.yml"]
set :shared_children,   [app_path + "/logs", web_path + "/uploads", "vendor"]

set :deploy_via, :rsync_with_remote_cache
ssh_options[:forward_agent] = true
ssh_options[:keys] = ["~/.ssh/id_rsa"]

# Be more verbose by uncommenting the following line
logger.level = Logger::MAX_LEVEL 
```

但是当我运行时`cap deploy:setup`，出现以下错误：

```
 * 2013-03-19 10:52:06 executing `deploy:setup'
  * executing "mkdir -p git/mywebsite.git git/mywebsite.git/releases git/mywebsite.git/shared"
    servers: ["199.178.832.3"]
Password: 
connection failed for: 199.178.832.3:8534 (Net::SSH::AuthenticationFailed: me) 
```

它要求输入密码，我不明白是哪一个以及为什么，因为我将我的公钥添加到我的远程服务器中的 authorized_keys 并且我没有为此公钥设置密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:00:12.607

确保您可以使用该密钥和用户名自己通过 SSH 连接`me`。如果仍然是同样的问题，则启用更详细的输出并启用[Pseudo Terminal](http://justinmaccarthy.org/?p=99)：

```
ssh_options[:verbose] = :debug
default_run_options[:pty] = true 
```

# python - 在 Tkinter 中接受用户的输入

> ID：15495559
> 
> 赞同：8
> 
> 时间：2013-03-19T09:22:57.153
> 
> 标签：python, tkinter

**目标**

1.  给用户一个文本字段。
2.  将他在字段中输入的文本按到外壳下方的按钮后打印出来。

使用 Tkinter 怎么可能？

**Linux Mint 14 上的 Python 2.7**规范****

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T09:22:57.153

我们将使用`Entry`小部件从用户那里获取文本。然后我们将定义一个函数，从这个小部件中提取文本并在 shell 中打印出来。

```
def printtext():
    global e
    string = e.get() 
    print string   

from Tkinter import *
root = Tk()

root.title('Name')

e = Entry(root)
e.pack()
e.focus_set()

b = Button(root,text='okay',command=printtext)
b.pack(side='bottom')
root.mainloop() 
```

首先创建窗口实例。然后`Entry`打包一个小部件。之后，另一个按钮小部件也被打包。该`focus_set`方法确保在运行时键盘焦点位于文本字段上。按下按钮时，它将转到使用该方法从小`Entry`部件中提取文本的功能。`get`

您可以在此处找到有关`Entry`小部件及其方法的更多信息：

[条目小部件](http://effbot.org/tkinterbook/entry.htm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-12-19T09:04:08.990

```
from tkinter import *

root = Tk()
root.title("lol")
root.geometry("400x400")

input = Entry(root)
input.pack()

root.mainloop() 
```**

# sencha-touch - Sencha touch 排除所有 senchas sass/css 文件以进行定制设计？

> ID：15495561
> 
> 赞同：0
> 
> 时间：2013-03-19T09:22:58.007
> 
> 标签：sencha-touch, sass, sencha-touch-theming

我有一个快速的问题，希望有人能回答我。我正在为一家为 ios 和 android 开发 sencha-touch 应用程序的公司实施定制设计。

当我第一次来的时候，到处都是 !importants 和覆盖，我无法触摸任何东西，而不必在设置属性之前回溯 10 分钟。

现在我们有一个超级用户设计的新项目，我正在认真考虑尽可能多地排除 senchas sass/css 文件的所有内容，除了 maby loading-spinner 或类似的东西。

或者您是否建议至少保留一些煎茶小部件？因为我也不想弄乱煎茶逻辑。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:43:51.293

Sencha 组件的许多属性都与 sass 函数或特定的 css 相关联。例如，布局和布局类型将在运行时转换为 css。我发现，如果您要使用 Sencha 框架，则更容易遵循它们提供的自定义路径，例如它们包含的 cls 属性（baseCls、innerCls、cls、inputCls 等），然后简单地覆盖所有他们的 x-type 类或使用！important。我建议您保留 sencha 小部件并在这些 cls 属性中提供您自己的 sass/css。

# php - SQL 追随者和追随者

> ID：15495570
> 
> 赞同：2
> 
> 时间：2013-03-19T09:23:28.690
> 
> 标签：php, mysql, sql

好的，我有两张表，一张名为`account_members`，另一张名为`account_follows`. 我想要一个 Twitter 风格的关注系统，其中 account_members 可以互相关注。

```
Account Follows Table Structure:

id
account_name
followed_name
time

Account Members Table Structure:

id
Account_name
status (Account active or not) 
```

我想我可以通过一个简单的查询来获得所有被关注的帐户：

```
public function following($account_name)
{
    $sql = "SELECT 

    F.id, F.account_name, F.followed_name, F.time, 
    M.account_name AS session_name, M.status 

    FROM account_follows F
    LEFT JOIN account_members M ON F.account_name = M.account_name

    WHERE F.account_name = :account_name 
    AND M.account_name = :account_name

    ORDER BY id DESC LIMIT 5";
} 
```

这将显示所有正在关注的 account_members（`$account_name`通过 url 设置）

我遇到的问题是允许登录的 account_member 能够关注或取消关注他们关注的朋友的朋友。我通过执行以下操作对登录的 account_member 进行简单检查，以取消关注其列表中的任何人：

```
if($_SESSION['account_name'] == $row['account_name'])
{
    echo'<a href="" id="..." class="...">Unfollow</a>';
} 
```

以上工作正常，但我想对登录的帐户关注者关注者做类似的事情......如果这有意义吗？

所以**Bob**已登录，**Bob**查看他的关注列表并单击**mike**并查看**mike**关注的人，并且从该列表中可以关注/取消关注**mike**关注的人（其中一些 Bob 可能关注）

任何帮助或指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:27:51.017

您的查询将适用于传入的任何成员的帐户名，但查询本身不考虑当前登录的成员的关注，因此您需要将他们的数据加入其中。

该查询返回指定帐户的 url 所关注的成员列表。这有点告诉登录用户是否也在关注该成员。使用该位来决定您是否需要回显关注或取消关注链接。

```
SELECT 
        theirFollows.id, theirFollows.account_name, 
        theirFollows.followed_name, theirFollows.time, 
        M.account_name AS member_name, M.status, 
        case 
            when myFollows.followed_name is null then 0
            else 1
        end as sessionMemberIsFollowing
FROM    account_members M
        LEFT JOIN account_follows theirFollows
          ON theirFollows.account_name = M.account_name
        LEFT JOIN 
            (
                select followed_name
                from account_follows 
                where account_name = :session_account_name
            ) myFollows
            on myFollows.followed_name = theirFollows.followed_name

WHERE   M.account_name = :account_name 
```

您选择的列之一被标记为 session_name，但这有点误导，因为传入的 account_name 来自 url。此外，您只需要其中一个 where 子句，因为那是您要加入的列。

# iphone - 如何使用 ARC 在 iOS 中处理自动释放的对象

> ID：15495573
> 
> 赞同：3
> 
> 时间：2013-03-19T09:23:32.713
> 
> 标签：iphone, ios, objective-c, nsmutablearray, autorelease

我正在创建一个启用了 ARC 的 iPhone 应用程序，在这种情况下我遇到了这种情况。

在应用程序的每个页面中，都会发生 Web 服务调用。在这种方法中，我在从服务器添加新值之前从数组中删除所有对象。一切正常，但有时应用程序在`[self.myArray removeAllObjects]`.

我为 myArray 设置了@property`@property (strong, nonatomic) NSMutableArray myArray;`

我在想的是，当我使用 ARC 时，对象 ,`myArray`在某个时候被释放，我尝试从同一个数组中删除所有对象。这导致崩溃，我不确定，但我没有看到任何其他原因。

因此，我正在考虑在删除其中的对象之前检查数组是否有效。我写了一个示例代码来检查不同的场景。这里是：

```
NSMutableArray *testArray = [[NSMutableArray alloc]initWithObjects:@"1", @"2", @"3", @"4", nil];

if (testArray) {
    NSLog(@"i am alive");
}

[testArray release];

if (testArray) { //here how to check whether this array is valid or not?
    NSLog(@"i am alive: %@", testArray);
}else{
    NSLog(@"I am dead");
    testArray = [[NSMutableArray alloc]initWithObjects:@"5", @"6", @"7", @"8", nil];
}

[testArray release];
[testArray removeAllObjects]; 
```

我知道这会导致崩溃，但这只是为了检查。在这里，如何检查数组是否有效？这是一个正确的方法还是别的什么？

请指导我。
谢谢。

**实际代码：**

```
- (void)getFriendsList{

    BOOL netIsAvailable = [self connected];

    if (netIsAvailable) {
        @try {
            NSString *accessToken = [self getAccessToken];
            NSString *tokenEncoded = [accessToken stringByReplacingOccurrencesOfString:@"\"" withString:@""];
            NSString *finalUrl = [NSString stringWithFormat:@"%@FriendsnSongs/%@",CommonWebServiceUrl,tokenEncoded];
            NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:finalUrl] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:10];
            NSURLResponse *response = nil;
            NSError *error = nil;
            NSData *currentResult = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
//            NSString* responseString = [[NSString alloc] initWithData:currentResult encoding:NSUTF8StringEncoding];

            if (currentResult != nil) {
                NSDictionary* json = [NSJSONSerialization
                                      JSONObjectWithData:currentResult
                                      options:kNilOptions
                                      error:&error];
                NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
                int statusCode = [httpResponse statusCode];

                NSMutableArray *match = [json valueForKey:@"FriendsnSongsResult"];
                if (statusCode == 200) {
                    if (self.userGuidArray) {
                        [self.albumNameArray removeAllObjects];  //here got crash
                        [self.artistNameArray removeAllObjects];
                        [self.deviceNameArray removeAllObjects]; //here also got crash once
                        [self.nickNameArray removeAllObjects];
                        [self.userProfileImageArray removeAllObjects];
                        [self.songTitleArray removeAllObjects];
                        [self.songStatusArray removeAllObjects];
                        [self.userGuidArray removeAllObjects];
                    }

                    for(NSArray *player in match) {
                        [self.albumNameArray addObject:[(NSArray *)player valueForKey:@"AlbumName"]];
                        [self.artistNameArray addObject:[(NSArray *)player valueForKey:@"Artist"]];
                        [self.nickNameArray addObject:[(NSArray *)player valueForKey:@"NickName"]];
                        [self.userProfileImageArray addObject:[(NSArray *)player valueForKey:@"ProfileImage"]];
                        [self.songStatusArray addObject:[(NSArray *)player valueForKey:@"Status"]];
                        [self.songTitleArray addObject:[(NSArray *)player valueForKey:@"Title"]];
                        [self.userGuidArray addObject:[(NSArray *)player valueForKey:@"UserGuid"]];
                        [self.deviceNameArray addObject:[(NSArray *)player valueForKey:@"DeviceName"]];
                    }
                    //Start timer for updating the friends list
                    if (timerActivated)
                        [self performSelectorOnMainThread:@selector(backgroundFriendsListUpdate) withObject:nil waitUntilDone:NO];
                    //Update table if the table not in search mode
                    if (!isSearching)
                        [self performSelectorOnMainThread:@selector(updateTable) withObject:nil waitUntilDone:YES];
                }
            }
        }
        @catch (NSException *exception) {
            NSLog(@"Exception: %@",exception.name);
        }
    }
    [DejalActivityView removeView];
} 
```

重要的一点是，在这个类中，每 30 秒运行一个后台线程。它将调用相同的方法来刷新表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:33:56.463

如果您正在使用，请从您的代码中`ARC`删除这一行，因为要*处理它*。否则写入方法。`[testArray release];`*`ARC`*`[testArray release];``-(void)dealloc`

在删除数组值之前给出条件

```
if(myArray.count > 0)// because sometime it is good logic for us.
  [myArray removeAllObjects]; 
```

然后将数据插入`myArray`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:09:24.333

正如您在评论中建议的那样，使用临时数组是个好主意。以下代码将填充一个临时数组并使用它来替换主线程中的数组。

```
NSMutableArray *tempAlbumArray = [NSMutableArray array];
//fill your array
[tempAlbumArray addObject:<#some object#>];
dispatch_async(dispatch_get_main_queue(), ^{
    //replace your array with the new one
    //this code will be executed in main thread
    self.albumNameArray = tempAlbumArray;
}); 
```

# android - Android GStreamer mp4 文件错误

> ID：15495578
> 
> 赞同：1
> 
> 时间：2013-03-19T09:23:44.637
> 
> 标签：android, media-player, gstreamer

我在 Windows 平台上使用 Eclipse Juno。我在eclipse中配置了gstreamer。[我从这里](http://docs.gstreamer.com/display/GstSDK/Installing+for+Android+development)下载了 gstreamer 。

我正在研究 gst-sdk 文件夹中提供的教程 5。当我尝试播放 mp4 文件时，出现错误：

```
amcvideodec-omxgoogleh264decoder Internal data stream error 
```

我检查了 plugins.mk 文件，它包含播放 mp4 文件所需的所有插件。我想执行任何传输流文件。但即使是 mp4 文件也无法播放。需要帮助。

# javascript - $.mobile.changePage 不工作

> ID：15495579
> 
> 赞同：0
> 
> 时间：2013-03-19T09:23:45.063
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试使用`$.mobile.changePage`，但它不起作用。这是我的代码

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">    
         <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css">
         <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
         <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    </head>
    <body>
        <div data-role="page" id="p1">
            <div data-role="header"><h2>DKT</h2></div>
            <div data-role="content">
                <div id="sw1"></div>
                <div id="sw2"></div>
            </div>
            <div data-role="footer">...</div>
        </div>
        <script>
            $.mobile.changePage("#qu");
        </script>
        <div data-role="page" id="qu">
            <div data-role="header"><h2>DKT</h2></div>
            <div data-role="content">
                <fieldset class="ui-grid-a">
                    <div class="ui-block-a"><button>Nein</button></div>
                    <div class="ui-block-b"><button>Kaufen</button></div>
                </fieldset>
            </div>
        </div>
    </body>
</html> 
```

我已经收到错误`TypeError: 'undefined' is not an object (evaluating 'i.trigger')`

我已经尝试更改为“ [http://www.google.com](http://www.google.com) ”：仍然出现相同的错误

**编辑：**

## 谢谢大家。但问题实际上出在我代码的另一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:25:45.203

将您的 jquery 代码包含在`document.ready`处理程序中，如下所示：

```
$(document).ready(function() {
   $.mobile.changePage("#qu");
}); 
```

因为否则您没有给 DOM 加载时间，因此`#qu`在尝试获取它时该元素不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:26:22.183

之后添加您的脚本

```
 <div data-role="page" id="qu"> 
```

或在正文标签结束后

像这样 ：

```
 <script>
             $.mobile.changePage("#qu");
         </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:27:19.207

更改您的代码如下

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">    
         <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css">
         <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
         <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    </head>
    <body>
        <div data-role="page" id="p1">
            <div data-role="header"><h2>DKT</h2></div>
            <div data-role="content">
                <div id="sw1"></div>
                <div id="sw2"></div>
            </div>
            <div data-role="footer">...</div>
        </div>
        <script>
            $('#p1').live('pageshow', function(event){
                $.mobile.changePage("#qu");            
            });
        </script>
        <div data-role="page" id="qu">
            <div data-role="header"><h2>DKT</h2></div>
            <div data-role="content">
                <fieldset class="ui-grid-a">
                    <div class="ui-block-a"><button>Nein</button></div>
                    <div class="ui-block-b"><button>Kaufen</button></div>
                </fieldset>
            </div>
        </div>
    </body>
</html> 
```

在您的代码中，`$.mobile.changePage("#qu");`在启动 dom 之前调用。您可以使用许多其他事件，例如等。有关更多信息`pagebeforeshow`，`pagecreate`请查看 jQuery Mobile[文档](http://api.jquerymobile.com/)。

确保你没有使用`$(doucment).ready(function(){});`。

# iphone - 如何在 UIImageView iOS 中使用 gif 图像

> ID：15495581
> 
> 赞同：1
> 
> 时间：2013-03-19T09:23:49.167
> 
> 标签：iphone, image, uiimageview, show

我有一个包含 4 个图像的 gif 图像文件，我喜欢在 UIImage 视图中逐行显示这些图像 image.animation 。请指导是否可以显示或我应该使用交替告诉我。

谢谢你 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-08T05:17:15.147

[FLAnimatedImage](https://github.com/Flipboard/FLAnimatedImage)是适用于 iOS 的高性能开源动画 GIF 引擎：

*   以与桌面浏览器相当的播放速度同时播放多个 GIF
*   尊重可变帧延迟
*   在记忆压力下表现优雅
*   消除第一个播放循环期间的延迟或阻塞
*   以与现代浏览器相同的方式解释快速 GIF 的帧延迟

这是我编写的一个经过充分测试的组件，用于[为 Flipboard 中的所有 GIF 提供支持](http://engineering.flipboard.com/2014/05/animated-gif/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:12:58.013

它将帮助你，对于 gif 链接.. [https://github.com/mayoff/uiimage-from-animated-gif](https://github.com/mayoff/uiimage-from-animated-gif)更多帮助请随时询问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T04:29:58.313

是的，在 iOS 中是可能的，我在下面附上了一个 URL。请参考这个作为你的概念，即使我是在这个链接的帮助下做到的。

[https://github.com/mayoff/uiimage-from-animated-gif](https://github.com/mayoff/uiimage-from-animated-gif)

希望我抱着你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-24T08:11:07.000

试试这样...

```
- (void)viewDidLoad {
        [super viewDidLoad];

        NSURL *url = [[NSBundle mainBundle] URLForResource:@"loading" withExtension:@"gif"];
        UIImage *loadingImage = [UIImage animatedImageWithAnimatedGIFData:[NSData dataWithContentsOfURL:url]];
        self.dataImageView.animationImages = loadingImage.images;
        self.dataImageView.animationDuration = loadingImage.duration;
        self.dataImageView.animationRepeatCount = 1;
        self.dataImageView.image = loadingImage.images.lastObject;
        [self.dataImageView startAnimating];
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-10T04:43:52.817

首先，您可以将这 4 个图像添加到一个 Plist 中并执行以下代码。我希望它会工作

```
 NSDictionary *picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"PhotesArray" ofType:@"plist"]];
NSArray *imageNames = [picturesDictionary objectForKey:@"Photos"];
NSMutableArray *images = [[NSMutableArray alloc] init];
for (int i=0; i<[imageNames count]; i++) {
    [images addObject:[UIImage imageNamed:[imageNames objectAtIndex:i]]];
}
//Normal animation
self.dataImageView.animationImages = images;
self.dataImageView.animationDuration = 3.0;
[self.dataImageView startAnimating]; 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中创建代码模板？

> ID：15495585
> 
> 赞同：0
> 
> 时间：2013-03-19T09:23:58.443
> 
> 标签：visual-studio-2010, code-templates

如果您在 Visual Studio 中使用 C# 进行编程并键入“prop”并按 Enter，IDE 会生成一个属性。Eclipse 也[具有此功能](http://viralpatel.net/blogs/eclipse-tip-add-code-template-eclipse/)，用户可以定义扩展为自定义代码的自定义命令。这在 Visual Studio 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:41:51.977

感谢 leppie 的评论，我设法自己找到了解决方案：http: [//msdn.microsoft.com/en-us/library/ms165392 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms165392(v=vs.80).aspx)

# python - 传播龙卷风 iostream 错误/异常

> ID：15495589
> 
> 赞同：2
> 
> 时间：2013-03-19T09:24:12.937
> 
> 标签：python, sockets, tornado

我目前正在为 tornado 中的 hl7 协议编写一个异步 tcp 转发器（本质上，消息被转发到另一个端点并返回，而套接字保持打开）。

目前，实现是 TCPServer 的一个实例，其通道连接到另一个目的地。所以有套接字，s1 <--> s2 和 s3 <--> s4，其中 s1 是客户端，s2 是 TCPServer 实例接受的套接字，s3 是转发器，s4 是我们要与之交谈的实际端点。

现在假设 s4 发出错误并关闭通道。在 IOStream 的套接字对象 s3 中，错误设置为例如 ECONNREFUSED。

如何传播此错误以告诉客户端 s1 发生了什么。本质上，我想用错误（或任何其他错误）关闭套接字 s2 以指示发生了什么。它不一定是 ECONNREFUSED，因为在设置通道时会上升，并且这已经在 s1 和 s2 之间发生。

谢谢马库斯

# java - 寻找服务器发送事件规范的客户端的 Java 实现。

> ID：15495591
> 
> 赞同：8
> 
> 时间：2013-03-19T09:24:28.620
> 
> 标签：java, server-sent-events

我有一个桌面客户端和一个服务器端都用 Java 实现。服务器端位于 Tomcat 上。

现在我希望使用服务器发送事件进行检查，虽然 Tomcat 可以在服务器上使用它，但我不知道如何从它的客户端执行它。所有实现都使用 Javascript，如果您的客户端是 Javascript 客户端，这很好。我的不是。

所以，我的问题是——SSE 规范的客户端是否有任何 Java 实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-30T02:02:02.777

我遇到了同样的问题并找到了解决方案。Jersey 有一个 SSE 客户端（它不是标准发行版的一部分，您还需要 jersey-media-sse jar，您可以在 Maven 存储库中找到它。

```
 public static void consumeEventStream(String url, Consumer consumer) throws Exception {
    Client client = ClientBuilder.newBuilder().register(new SseFeature()).build();
    WebTarget target = client.target(url);
    EventInput e = null;
    while (true) {
        Thread.sleep(1000);
        if (e==null || e.isClosed()) {
            // (re)connect
            e = target.request().get(EventInput.class);

            e.setChunkType("text/event-stream");
        }

        final InboundEvent inboundEvent = e.read();
        if (inboundEvent == null) {  
            break;
        }
        else {
           String data = inboundEvent.getData();
           // do something here - notify observers, parse json etc
        }

    }
    System.out.println("connection closed");
} 
```

setChunkType 的调用是为了处理 Jersey 中的一个错误——如果 char 编码是内容类型的一部分，则 jersey 将无法识别事件类型。另一方面，规范和浏览器期望设置内容类型。会计。对 jira 来说，这已经解决了，但在最新版本的 jersey-media-sse-2.2.jar 中肯定还没有工作，另见[https://java.net/jira/browse/JERSEY-2062](https://java.net/jira/browse/JERSEY-2062)。

希望这会有所帮助，詹斯

# ios - 当我使缩放中心移动到左下角时

> ID：15495592
> 
> 赞同：1
> 
> 时间：2013-03-19T09:24:29.827
> 
> 标签：ios, objective-c, zooming

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我正在使用相机，我想进行缩放。为此，我有以下代码：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self setUpVideo];
}

- (void)setUpVideo
{
    NSLog(@"Set up video");
    UIView *view = [self videoPreviewView];
    CALayer *viewLayer = [view layer];

    [viewLayer setMasksToBounds:YES];

    AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:DataExchanger.cameraManager.captureSession];
    CGRect bounds = [view bounds];

    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    CGAffineTransform t;

    if (orientation == UIInterfaceOrientationLandscapeRight)
    {
        t = CGAffineTransformMakeRotation(-M_PI_2);
        bounds = CGRectMake(bounds.origin.x, bounds.origin.y,
                                bounds.size.height, bounds.size.width);
    }

    [newCaptureVideoPreviewLayer setFrame:bounds];
    [newCaptureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

    newCaptureVideoPreviewLayer.position = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));
    newCaptureVideoPreviewLayer.affineTransform = t;

    [viewLayer insertSublayer:newCaptureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

    CGAffineTransform currentTransform = CGAffineTransformIdentity;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, 2.0f, 2.0f);
    view.transform = newTransform;
} 
```

但是我看到缩放图像和没有缩放的相同图像之间存在差异。在不移动相机的情况下，当我进行缩放时，我看到中心向左下方移动。

也许我必须`videoView`使用使用比例计算其新中心的公式来移动中心。

**你知道怎么解决吗？**

# video - Flash 全屏应用程序，里面有视频

> ID：15495593
> 
> 赞同：0
> 
> 时间：2013-03-19T09:24:33.980
> 
> 标签：video, fullscreen, flash-cs6

我想在 flash 应用程序中添加一个视频（使用 flash 专业 CS6 开发）。一切看起来都很好，我的视频在右上角，因为我将应用程序的其余部分用于其他目的。

当我进入全屏时，视频也是全屏的，隐藏了我所有的应用程序！我想全屏显示（我的应用全屏显示），但视频在右上角的框中。

那可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:27:40.463

找到了，

我用过：flvplay.fullScreenTakeOver = false;

这就是我需要的:)

# imagemagick - RMagick 溶解平铺

> ID：15495595
> 
> 赞同：0
> 
> 时间：2013-03-19T09:24:35.930
> 
> 标签：imagemagick, rmagick

我有一张纸的图片，我想让它透明，覆盖它并将它平铺在另一个图像的顶部。但是，dissolve 不会平铺它，composite_tile 不会使其透明。有关如何执行此操作的任何提示？目前，我有

```
image = Magick::Image::from_blob(open(image_path).read)
image = image.composite_tiled(paper_texture_image) 
```

但是，这会用纸完全覆盖图像，因此您只能看到纸。我希望这张纸是透明的并且仍然是平铺的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:43:57.440

刚刚想通了。你必须做这样的事情

```
paper_texture_image.opacity=0.5*QuantumRange 
```

这将产生一个有点透明的纹理。

# java - ID 类型字符串错误的实体

> ID：15495596
> 
> 赞同：0
> 
> 时间：2013-03-19T09:24:46.207
> 
> 标签：java, jpa, eclipselink, derby

当我做持久化时，我有以下实体我得到转储，我移动到字段字符串值（这是模型定义的 ID 类型字符串的值，例如（假期，WORK_ACCIDENT ...所以我不能改变它），错误是

INTEGER 类型的字符串格式无效。

```
@Entity
public class LeaveReType {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private String id; 
```

我有另一个 ID 类型字符串的实体，当我移到它的编号时，持久性工作正常，我可以使用一些 ID 注释来忽略这个限制吗？

```
Exception in thread "main" javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLDataException: Invalid character string format for type INTEGER.
Error Code: 20000
Call: INSERT INTO LESTTYPE (ID, AVAILABLEBALANCE, ENTITLEMENT, NAME, PENDINGITEMS) VALUES (?, ?, ?, ?, ?)
    bind => [5 parameters bound]
Query: InsertObjectQuery(LESTTYPE [id=WORK_ACCIDENT, name=Work Accident, entitlement=n/a, availableBalance=n/a, pendingItems=0 pending items]) 
```

我也试过了，我得到了同样的错误

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@TypeConverter(dataType = Long.class, name = "id")
private String id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:24:28.160

如果您的数据库类型是 NUMBER，您是否希望您的对象类型是 String，您应该使用 Converter 来转换类型。

即@TypeConverter(dataType=Long.class)

但实际上，如果您的数据库类型是 NUMBER，那么您应该在 Java 中使用数字类型。如果您愿意，您仍然可以拥有采用 String 的 get/set 方法。在 String 类型上使用 @GeneratedValue 也很奇怪。

# jquery - 获取 href 链接并通过 jQuery 为其添加值

> ID：15495598
> 
> 赞同：3
> 
> 时间：2013-03-19T09:24:51.700
> 
> 标签：jquery, html

我制作了一个代码，当用户输入他想要的产品数量时，我试图在其中添加产品的数量。问题是我无法选择`anchor`通过 jquery 来获取`href`链接，以便我可以为其添加新值。

我的代码：

```
$('.mival').keyup(function(event) {
    var i=$(this).parents(".cart").next('.milink').attr('href');
    alert(i);
}); 
```

当我试图提醒它说`undefined`

我的 html 标记：

```
<div class="cart">
       <div><strong>Price:</strong> <span>$20.30</span></div>
            <div><strong> Qty:</strong><span>
                <input type="text" class="mival" value="1" />
             </span></div>
<a class="milink" href="http://example.com/vid=3">Add to Cart </a> </div> 
```

我还没有编写将值添加到我可以做到的链接的代码。问题是如何从这个标记的`a`元素中获取价值，以便我可以获得`href`链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:27:17.167

您确实`not`有任何具有 class 的父级`cart`，使用 div 代替可以解决问题。或者，您可以使用`closest('.container')`

**[现场演示](http://jsfiddle.net/EySrB/)**

```
$('.mival').keyup(function(event) {
    var i=$(this).parents("div").next('.milink').attr('href');
    alert(i);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:27:28.777

`>`你在结尾处也有一个缺失`<div class="container"`。

```
$(this).closest(".container").children('a.milink') 
```

前任：

```
$('.mival').keyup(function(event) {
    var i = $(this).closest(".container").children('a.milink').attr('href');
    alert(i);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/BgrsJ/)

# vba - 在 Outlook 2010 中从 VBA 访问“发件人：”

> ID：15495599
> 
> 赞同：0
> 
> 时间：2013-03-19T09:24:52.523
> 
> 标签：vba, outlook

我在 Outlook 2010 中配置了帐户“me@domain.com”。我撰写了一封邮件并打开了“发件人：”的下拉菜单。我选择“其他电子邮件地址...”并输入“bingo@bongo.com”。我收到一个弹出窗口，询问是否通过“me@domain.com”帐户从“bingo@bongo.com”发送消息。我“好的”。当我现在向“someone@domain.com”发送消息时，收件人会看到

发件人：bingo@bongo.com

奇怪的是，当我去检查 me@domain.com/Sent Items 时，我看到的只是

来自：me@domain.com

我对这种行为感到非常沮丧，因为我希望根据发送帐户移动已发送的项目。最初，我研究了创建发送规则。令人恼火的是，没有选项可以根据“发件人：”采取任何行动。所以我潜入VBA。我得到了大部分代码来移动这些东西，但是当我查看邮件项目对象（在本地窗口中）时，我找不到任何声明“bingo@bongo.com”的属性。

谁能建议如何从外发邮件中提取回复（我猜是）地址？

很奇怪，这封电子邮件的 Outlook 收件人会看到

发件人：me@domain.com 代表 bingo@bongo.com 发送

但是 Outlook 邮件项中的 SendOnBehalf 属性只是读取“me@domain.com”。

非常感谢任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T17:51:53.167

尝试像这样设置 SentOnBehalf

```
Option Explicit

Sub SetSentOnBehalf()

Dim objMsg As MailItem

Set objMsg = Application.CreateItem(0)

objMsg.SentOnBehalfOfName = "bingo@bongo.com"

objMsg.Display

MsgBox " SentOnBehalfOfName in the From: " & objMsg.SentOnBehalfOfName

Set objMsg = Nothing

End Sub 
```

# php - 如何通过同时拨打两个电话来停止同一用户

> ID：15495610
> 
> 赞同：1
> 
> 时间：2013-03-19T09:25:31.357
> 
> 标签：php

我想阻止用户同时拨打两个电话。因为如果同时有两个调用，它会在我的应用程序中创建错误并更新错误信息。如果用户尝试同时拨打两个电话，我希望它完成用户的第一个活动并给出错误。

我正在表中记录所有用户活动->

表格**提要**->

```
......................................................
id   ! user  !  value  !  start !  finished ! timestamp
......................................................
7    !  22   !  100000 !    ok  !    ok     ! -------- 
......................................................
6    !  22   !  251632 !    ok  !    ok     ! --------
......................................................
5    !  53   !  125469 !    ok  !    ok     ! --------
......................................................
4    !  20   !  458962 !    ok  !    ok     ! --------
......................................................
3    !  19   !  124587 !    ok  !    ok     ! --------
......................................................
2    !  17   !  321457 !    ok  !    ok     ! -------- 
...................................................... 
```

我正在以这种方式记录数据。

*   当用户活动开始时，它会更新：**用户，值并****开始**正常
***   **当用户完成活动**时，它会更新：正常**完成****

 ****现在我很困惑如何同时检查和停止同一用户的两个请求。

我正在使用 php 和 mysql

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:52:49.767

在您的数据库中，创建一个类似“alreadyInUse”的列，当用户拨打电话时将其标记为真，当用户完成时将其标记为假。在处理其他用户时，请始终检查 alreadyInUse 是否为假，如果为假，则继续进行。我建议您在 PHP 中使用线程和同步，以获得更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:23:34.527

我是第二个建议继续线程和同步，但不要认为你需要一个额外的专栏，因为你的开始可以达到同样的目的，也可以为你节省一些内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:06:11.187

您可以使用 select 进行更新锁定读取，例如：

```
$mysqli->autocommit(FALSE);
$result = $mysqli->query("SELECT * FROM feed WHERE id = ? FOR UPDATE")->fetch_array();

//do stuff

$mysqli->commit(); 
```

或命名锁：

```
$result = $mysqli->query('SELECT GET_LOCK(?, 5) AS feedlock')->fetch_array();

if($result['feedlock'] != 1)
{
  //handle lock error or timeout
  return;
}

 //do stuff

$result = $mysqli->query('SELECT RELEASE_LOCK(?)')->fetch_array(); 
```****

# php - JS $('form').change(function() 仅在第一个表单项上触发

> ID：15495611
> 
> 赞同：0
> 
> 时间：2013-03-19T09:25:40.653
> 
> 标签：php, javascript, html

继我昨天的问题之后，我现在让下面的代码有些成功。它允许我更改第一个表单项并将其提交到后台的“process.php”并将该字段变为绿色。但是，触发器仅适用于第一个表单项，在本例中为“cstate”。更改“位置”时不会触发。如果您更改 clocation 然后 cstate 那么两个表单都可以正常提交，因此只是 .change 函数在 clocation 更改时不会触发。我在 JS（总 JS 菜鸟）方面还不够好，不知道为什么它不起作用，所以我很感激你能给我的任何帮助。

谢谢！

```
 $sql = "select * from `$table1`";
 $result = mysql_query ($sql) or die(mysql_error());
 while ($row = mysql_fetch_array($result)) 
 { 
   $carid = $row["car_id"]; 
   $carnum = $row["carnum"]; 
   $carlocation = $row["carlocation"];
   $carstate = $row["carstate"];

  $formname = "#form".$carid;

  print '<script type="text/javascript">';
  print "        var cnum;";
  print "        cnum = '$formname',";
  print "        

  $('form').change(function() 
  {
  console.log(cnum);
  $.ajax({ 
  type: 'post',
  url: 'process.php',
  data: $(this).serialize(),
  success: function() {
  }
   });
  return false;
   }); 
  </script>";

   echo "<table>";
   echo "<tr id='$carid'>";
   echo "<td>$carnum</td>";
   echo "<td><form action='' method='post' id='form$carid'>";
   echo "<select id='popup' name='cstate'>";
   echo "<option value='In-Service-Bay'>In Service Bay</option>";
   echo "<option value='Awaiting-Service'>Awaiting Service</option>";
   echo "<option value='Service-Complete'>Service Complete</option>";
   echo "</select></td>";
   echo "<select id='popup' name='clocation'>";
   echo "<option value='Carpark-1'>Carpark-1</option>";
   echo "<option value='Carpark-2'>Carpark-2</option>";
   echo "<option value='Carpark-3'>Carpark-3</option>";
   echo "</select></td>";
   echo "</form></tr>";
  }
  echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:29:56.217

在里面使用`.on()`和包装代码`document.ready.`

```
$(document).ready(function(){
  $('form').on('submit',function() 
  {
     //code here
  });
}); 
```

也将此代码放在`while`循环之外。表单也没有更改事件尝试使用`.submit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:59:25.143

通过为每个输入选择使用单独的表单来解决它。现在工作得很好。

感谢所有试图提供帮助的人。

亚当

# c++ - 正确使用 VERSIONINFO 资源

> ID：15495613
> 
> 赞同：2
> 
> 时间：2013-03-19T09:25:46.537
> 
> 标签：c++, visual-c++, versioninfo, application-name

我在我的 version.rc 文件中设置了我的版本表信息，如下所示：

```
+-----------------+-----------------------------------------+
|       Key       |                  Value                  |
+-----------------+-----------------------------------------+
|   CompanyName   | MyCompany
| FileDescription | A test application that does something. |
|  InternalName   | TestApp                                 |
|   FileVersion   | 1.0.0                                   |
| OriginalFilename| TestApp.exe
|  ProductVersion | 1.0.0                                   |
|   ProductName   | Test Application                        |
+-----------------+-----------------------------------------+ 
```

每当我的应用程序崩溃或弹出一些防病毒消息请求许可或基本上任何显示我的应用程序名称的事件发生时，应用程序名称都会显示为**“A test application that do something”**，即`FileDescription`作为应用程序名称。我使用[这篇文章](http://msdn.microsoft.com/en-us/library/aa381058.aspx)作为我的参考。

### 我所看到的：

![我所看到的](../Images/1809cc032ac36a07e9292506414452ed.png)

### 我想看的：

![我想看的](../Images/fd46b96dca4877ef13a93dc8ff239601.png)

为了实现第二张图片，我编辑`FileDescription`为**"Test Application"**。

但是，现在在任务管理器中（以及使用描述的其他区域），

### 编辑`FileDescription`到“测试应用程序”后：

![将“文件描述”编辑为](../Images/114fd2b144bb817c8d7a249b074c3cfc.png)

### 编辑前`FileDescription`：

![在编辑“文件描述”之前](../Images/bb0b1d53033fa488ea842d265e0490a4.png)

我想知道是否有某种方法可以指定操作系统`ProductName`在上面的第一种情况（和其他类似情况）和`FileDescription`上面的第二种情况（和其他类似情况）中使用。

# openssl - 使用 OpenSSL 从 CA 生成私钥

> ID：15495614
> 
> 赞同：0
> 
> 时间：2013-03-19T09:25:46.787
> 
> 标签：openssl, private-key, ca

我正在尝试使用 OpenSSL 创建与某个 CA（PEM 文件）匹配（的公钥？）的私钥，但我不知道使用什么命令来实现这一点。

如果我只是创建一个随机私钥并尝试将它与 CA 一起使用，我会收到“没有证书匹配私钥”错误。

最终我想在这里使用我的私钥：http: [//gazelle.ihe.net/pki/details/assemble.seam](http://gazelle.ihe.net/pki/details/assemble.seam)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:39:01.170

无法从公钥生成私钥。这就是加密的全部意义所在。有关加密的更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Public-key_cryptography/)。

对于您想要做的事情，您必须使用 OpenSSL 生成公钥和私钥，并让您的公钥由 CA 签名。有关如何使用 openssl 生成公钥/私钥对的更多信息，请参阅[http://www.openssl.org/docs/HOWTO/keys.txt](http://www.openssl.org/docs/HOWTO/keys.txt)。确保在提示输入密码时不要输入密码，否则，每次服务器/服务重新启动时，都会提示您输入密码，这可能会导致应用程序停机。

# ruby-on-rails - 设置 SSL 时出现问题，不断收到“没有给出有效的、非密码保护的密钥”错误

> ID：15495617
> 
> 赞同：7
> 
> 时间：2013-03-19T09:25:49.340
> 
> 标签：ruby-on-rails, ruby, ssl, heroku, ssl-certificate

我在 StartSSL.com 上获得了安全证书，并严格按照 Heroku 上的步骤进行操作。我获得了中间证书和根证书。

我尝试了不同的方法来链接这些文件，但我得到了这个错误（见截图）

[http://i.imgur.com/8WVmAVu.jpg](https://i.imgur.com/8WVmAVu.jpg)

我该如何解决这个错误？

我下载的文件是：

```
ca.pem (root cert)
sub.class1.server.ca.pem (intermediate cert)
copy and pasted the private key as server.key
copy and pasted the certificate as server.orig.crt
There's also the ca-bundle.pem that I tried using but no luck 
```

我刚刚重新下载了所有文件并运行了这个“cat server.orig.crt sub.class1.server.ca.pem ca-bundle.pem > server.crt”然后运行 ​​heroku certs:add server.crt server.key得到这个错误

```
Unable to read server.crt file 
```

此外，我只是在没有任何 CAT 的情况下尝试过，只是“heroku certs:add ca-bundle.pem server.key”，我得到了这个错误

```
No certificate given is a domain name certificate 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-20T03:38:10.760

适合安装在 heroku 上的 pem 编码证书链应按顺序包括：站点、中间证书，然后是根 pem 编码证书。

```
cat server.orig.crt sub.class1.server.ca.pem ca.pem > heroku.crt 
```

在我看来，这更像是您的私钥的问题——您需要确保 pem 文件没有使用密码加密，并且它与用于生成证书的密钥对相同。如果加密，私钥的头部将如下所示：

```
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
... 
```

而不仅仅是：

```
-----BEGIN RSA PRIVATE KEY-----
MIICaQIBAAKBhACxlzv7H57F+vapTjqS9qdfDg20RjwFFU1B3yK8SqN7rX0jpjsW
H3B2lhCqKPWd2To2LoOolhnsFbr5qlKK3ep/nuUZfkx1aOIg4L0FgzbuCSJfKE5B
... 
```

在前一种情况下，运行（linux、mac os）：

```
openssl rsa -in server.key -out server.unencrypted.key 
```

并在提示时输入密码。然后在对 heroku 的调用中使用 server.unencrypted.key 添加证书。

# iphone - 音频文件无法从服务器播放

> ID：15495619
> 
> 赞同：0
> 
> 时间：2013-03-19T09:25:56.287
> 
> 标签：iphone, objective-c, ipad, avaudioplayer

我正在从服务器播放音频文件，但如果我播放本地文件则它不播放，那么它在这里播放是我的代码。

```
 //NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]];

NSURL *url = [NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/productivo/1.mp3"];

NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;

if (audioPlayer == nil)
    NSLog([error description]);             
else 
    [audioPlayer play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:38:59.223

使用此代码解决您的问题...

```
NSData *_objectData = [NSData dataWithContentsOfURL:[NSURL URLWithString:http://celeritas-solutions.com/pah_brd_v1/productivo/1.mp3]];
NSError *error;

audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
audioPlayer.numberOfLoops = 0;
audioPlayer.volume = 1.0f;
[audioPlayer prepareToPlay];

if (audioPlayer == nil)
    NSLog([error description]); 
else
    [audioPlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:48:51.397

尝试使用`MPMoviePlayerController`而不是`AVAudioPlayer`

```
NSURL *url = [NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/productivo/1.mp3"];

mv = [[MPMoviePlayerController alloc] initWithContentURL:url];
mv.movieSourceType = MPMovieSourceTypeUnknown;
[self.view addSubview:mv.view];
[mv play]; 
```

# ios - 如何从 ABAddressBookRegisterExternalChangeCallback 获取更新的联系人列表？

> ID：15495621
> 
> 赞同：2
> 
> 时间：2013-03-19T09:26:04.223
> 
> 标签：ios, cocoa-touch, abaddressbook

我`ABAddressBookRegisterExternalChangeCallback`用来在 ios 通讯录联系人更改时获取通知。

如何从回调中获取更新（添加/删除/修改）联系人列表？我不想再次重新加载我的整个联系人列表。

我似乎无法在文档中的任何地方找到它。谁能指导我，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:58:09.717

你不能。您可以做的是这将为您提供“在给定时间内修改”的联系人列表，例如：

```
void MyAddressBookExternalChangeCallback (ABAddressBookRef notifyAddressBook,CFDictionaryRef info,void *context)
{        
    //The addressbook object get's updated.

    CFArrayRef peopleRefs = ABAddressBookCopyArrayOfAllPeopleInSource(notifyAddressBook, kABSourceTypeLocal);

    ABAddressBookRevert(notifyAddressBook);

    CFIndex count = CFArrayGetCount(peopleRefs);

    for (CFIndex i=0; i < count; i++) {
        ABRecordRef ref = CFArrayGetValueAtIndex(peopleRefs, i);
        NSDate* datemod = (__bridge_transfer NSDate *)(ABRecordCopyValue(ref, kABPersonModificationDateProperty));

        NSTimeInterval distanceBetweenDates = [[NSDate date] timeIntervalSinceDate:datemod];

        int seconds = round(distanceBetweenDates);

        if(seconds < 60){

            ABCPerson * person = [[ABCFacade sharedABCFacade] convertABRecordRef:ref];
            NSLog(@"modifactiondate: %@", [person modificationdate]);

            [[ABCFacade sharedABCFacade] replacePersonInPersonListWithPerson:person];

        }
    }

    NSLog(@"Yes it does get called by this change %@", context);

    [[ABCFacade sharedABCFacade] ABRefresh];   
} 
```

# mongodb - MongoDB：根据多个条件更新多个字段

> ID：15495628
> 
> 赞同：0
> 
> 时间：2013-03-19T09:26:25.537
> 
> 标签：mongodb, atomic, upsert

我是 Mongo 的新手。我想根据多个标准自动更新文档。该文档如下所示：

```
 {_id:..., hourOfTime:..., total:..., max:..., min:..., last:...} 
```

这基本上是按小时聚合的项目的点击次数，由`_id`。每五秒钟将每个项目的点击从应用程序刷新到 MongoDB。因此，文档需要每五秒更新一次。

情况就是这样。让我们说在`t=t0`，`{_id:"nike", total:123, max:10, min:3, last:9}`然后在`t=t1`，我收到消息`{_id:"nike", count: 12}`。现在，对于`_id="nike"`，我需要执行以下操作，

1.  增量`total`_`12`
2.  如果`max < 12`，更新`max=12`
3.  如果`min > 12`，更新`min=12`
4.  更新`last=12`

我希望所有这些操作都是原子的。我无法在一个查询中转换它。任何帮助/提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:18:42.977

这不能通过单个查询来完成。这是我的做法：

1.  在文档上有一个名为`locked`. 如果字段为 false，则运行 a`findAndModify`以获取文档`locked`，并将锁定的字段设置为`Date()`它被锁定的位置。这将阻止其他应用程序实例修改文档，前提是它们也检查该`locked`字段。
2.  修改文档应用端，然后原子更新，设置`locked`为false。只要修改文档的任何内容都`findAndModify`在该`locked`字段上运行，那么整个修改应该是原子的。

确保有一个锁定超时的阈值，这样如果机器发生故障，文档就不会被无限期锁定。这意味着当第二次更新文档（并释放锁）时，应用程序应该确保文档中的日期是它所期望的，以确保它仍然拥有锁。

# php - 某些 URL 查询变量在 PHP 中不起作用

> ID：15495646
> 
> 赞同：0
> 
> 时间：2013-03-19T09:27:18.463
> 
> 标签：php, jquery, ajax, ajaxform, concrete5

我的网址：`http://www.capstonehomes-mn.com/index.php?cID=127&ccm_token=1363683205:04db0d40a58c3559286c525f299e1fce".`

该站点是使用`concrete5`. 此 url 传递 2 个查询变量并使用 jquery ajax 表单调用此页面。此 url 不显示查询变量及其值。有什么问题？

我想在此屏幕截图中获取所有查询变量值：http: [//my.jetscreenshot.com/14061/20130319-prv0-77kb.jpg](http://my.jetscreenshot.com/14061/20130319-prv0-77kb.jpg)`at the time of printing` $_REQUEST`。

一些 URL 工作正常。

我在目标页面中的 PHP 代码：

```
print_r($_REQUEST);
echo $_SERVER['REQUEST_URI']; 
```

$_SERVER['REQUEST_URI'] 工作正常。

如果我将此 URL 粘贴到浏览器地址栏中查询变量是否正常工作。但不是在 ajax 调用中。我看到在 ajax 调用中找不到页面（[http://my.jetscreenshot.com/14061/20130319-iami-27kb.jpg](http://my.jetscreenshot.com/14061/20130319-iami-27kb.jpg)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:48:01.643

一些框架对请求部分使用自己的 API。在某些情况下，他们会取消设置全局 $_GET、$_POST 和 $_REQUEST 变量。

如果您查看[具体的文档](http://www.concrete5.org/documentation/developers/system/request/)，您会发现该框架使用了这样的 API。我想如果你使用`$req = Request::get();`那么你可以打印请求变量。

# heroku - 让 Heroku 将资产预编译到 Amazon aws s3

> ID：15495647
> 
> 赞同：0
> 
> 时间：2013-03-19T09:27:22.480
> 
> 标签：heroku, amazon-web-services, sinatra, assets, rake-task

让 AWS S3 为我的 heroku 应用程序提供静态资产的问题几乎就在那里

一切都在本地工作，我运行我的 rake 任务，然后将资产预编译到 AWS（尽管终端中从来没有任何输出？）

然后到heroku，我在这里设置我的ENV变量

```
heroku config:add  aws_access_key=mysecretkey aws_secret_key=mypublickey aws_bucket=mybucketname 
```

我有两个桶，一个用于开发，一个用于生产。我是否需要在 heroku:config 中设置任何其他内容？

这是我到目前为止所拥有的

配置文件

```
AssetSync.configure do |con|
con.fog_provider = 'AWS'
con.fog_region = 'eu-west-1'
con.fog_directory = ENV['aws_bucket']
con.aws_access_key_id = ENV['aws_access_key']
con.aws_secret_access_key = ENV['aws_secret_key']
con.prefix = "assets"
con.public_path = Pathname("./public")
end 
```

这里的问题是，heroku 将读取和使用多少，我知道我必须在 heroku 中明确设置 ENV，但它会读取其余部分并执行其余任务，即它会读取前缀、public_path 等吗？

耙文件

```
require 'bundler/setup'
Bundler.require(:default)
require 'active_support/core_ext'
require './config/env' if File.exists?('config/env.rb')
require './config/config'

namespace :assets do
desc "Precompile assets"
task :precompile do
 AssetSync.sync
end 
```

结尾

跑步时

```
heroku run rake assets:precompile 
```

我得到输出

```
`rake assets:precompile` attached to terminal...up, run.2942 The source :rubygems is deprecated because HTTP requests are insecure. Please change your source to 'https://rubygems.org  (in /app) 
```

然后它只是返回到终端，我期望在执行任务时列出所有要编译的资产的列表。在aws中检查我的存储桶后，它是空的

编辑

heroku 日志后的输出 --tail

```
 2013-03-19T10:55:50+00:00 heroku[api]: Starting process with command `bundle exec rake assets:precompile` by richlewis14@gmail.com
 2013-03-19T10:55:52+00:00 heroku[run.6701]: State changed from starting to up
 2013-03-19T10:55:53+00:00 heroku[run.6701]: Awaiting client
 2013-03-19T10:55:53+00:00 heroku[run.6701]: Starting process with command `bundle exec rake assets:precompile`
 2013-03-19T10:55:59+00:00 heroku[run.6701]: Client connection closed. Sending SIGHUP to all processes
 2013-03-19T10:56:00+00:00 heroku[run.6701]: Process exited with status 0
 2013-03-19T10:56:00+00:00 heroku[run.6701]: State changed from up to complete 
```

大约 15 分钟后添加了更多

```
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

 Error:       An existing connection was forcibly closed by the remote host
(Errno::ECONNRESET)

  Command:     heroku logs --tail
  Version:     heroku-gem/2.35.0 (i386-mingw32) ruby/1.9.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:32:27.337

This is a bundler error due to the source stated in the Gemfile. It is not related to the asset compilation per se.

Specify

```
source 'https://rubygems.org' 
```

at the top of your Gemfile.

# fft - 将音乐 wav 文件转换为文本符号

> ID：15495651
> 
> 赞同：3
> 
> 时间：2013-03-19T09:27:38.120
> 
> 标签：fft, pitch-tracking, audio

我想提供一个音频 wav 文件（乐器 - 小提琴等）作为输入，我想检测所有频率音调并在文本序列中更新，以便它们被播放。我认为我应该定期使用 fft 频谱来获取它们的频率值。帮助我了解如何进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:44:29.950

这是一个非常困难的问题，您需要对信号处理有很好的了解才能获得任何可用的结果。没错，FFT 是一个很好的起点，但您应该阅读这里的其他一些帖子和网络上的论文。搜索“音高估计”。“音高检测”或“音乐转录”。您需要了解复杂的声音是如何由多个相关频率（“谐波”）的正弦曲线组成的，以及如何获得 FFT 的峰值并不一定会给您提供音高（某些乐器的频谱中的基本频率（即音高）不是最大的峰值。

[音高检测](http://en.wikipedia.org/wiki/Pitch_detection_algorithm)的维基百科页面提供了一个很好的起点。我建议阅读一些关于自相关方法和谐波和谱的论文。

*   [https://stackoverflow.com/search?q=pitch+estimation](https://stackoverflow.com/search?q=pitch+estimation)

# shell - Shell 脚本从 CLI 运行，但不是从 Crontab

> ID：15495657
> 
> 赞同：2
> 
> 时间：2013-03-19T09:27:47.503
> 
> 标签：shell, ubuntu, cron, crontab, cron-task

我有一个shell脚本，它遍历目录中的每个JSon文件并使用phantomJS创建一个highchart png。

当安排一个 cron 任务来运行这个脚本时，问题就出现了——（最初我使用了 inotifywait 但得到了同样的错误）。

shell 脚本如下所示：

```
#!/bin/sh
for i in *.json; do
    filename="${i%.*}"
    phantomjs /var/www/highcharts.com/exporting-server/phantomjs/highcharts-convert.js -infile $i -outfile img/$filename.png -scale 2.5 -width 300 -constr Chart -callback /var/www/highcharts.com/exporting-server/phantomjs/callback.js
done 
```

cron 任务如下所示：

```
* * * * * /var/www/highcharts.com/exporting-server/phantomjs/test/createGraphs.sh >> /var/www/highcharts.com/exporting-server/phantomjs/highcharts.log 
```

在日志文件中，我收到错误：

“无法打开文件 '*.json'”

从命令行运行时，shell 脚本运行良好，但在尝试安排它时出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:36:40.097

Cron 在你的主目录中运行你的命令。我假设 json 文件不在您的主目录中，因此您的脚本因该错误而失败。

将您的 cron 作业更改为 cd 到目录：

```
* * * * * cd /path/to/json && /var/www/highcharts.com/exporting-server/phantomjs/test/createGraphs.sh >> /var/www/highcharts.com/exporting-server/phantomjs/highcharts.log 
```

或者在脚本中指定 json 文件的路径：

```
#!/bin/sh
for i in /path/to/json/*.json; do
    filename="${i%.*}"
    phantomjs /var/www/highcharts.com/exporting-server/phantomjs/highcharts-convert.js -infile $i -outfile img/$filename.png -scale 2.5 -width 300 -constr Chart -callback /var/www/highcharts.com/exporting-server/phantomjs/callback.js
done 
```

# css - Symfony 调试栏和 IE8

> ID：15495658
> 
> 赞同：0
> 
> 时间：2013-03-19T09:27:51.573
> 
> 标签：css, symfony

我正在使用 symfony 2 项目。我在开发环境中，symfony 调试栏在除 IE8 之外的任何浏览器上都能很好地显示。看起来这个栏的 css 没有加载 IE。

经调查，问题出现在2.0版本之后（所以对于2.1和2.2）...可能web debug bar css是CSS3，对Sensio Labs来说是相当错误的..我不相信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:08:58.807

这确实是一个问题，Symfony 2.0 以上版本的一个错误：Web 调试工具栏在 IE8 中无法正常显示。

已报告此问题，并给出了解决方案

[https://github.com/symfony/symfony/issues/7422#issuecomment-15112627](https://github.com/symfony/symfony/issues/7422#issuecomment-15112627)

# json - Magento Json 用新行编码（漂亮/回车）

> ID：15495659
> 
> 赞同：0
> 
> 时间：2013-03-19T09:27:53.533
> 
> 标签：json, magento, printing, encode

我将数组编码为 json 并得到

```
{"payment_providers":[{"name":"ccsave","revenue":[{"date":"2013-03-18","sales":"51.00","items":"2","median_item_price":"20.50"}]},{"name":"checkmo","revenue":[{"date":"2013-03-18","sales":"79.00","items":"5","median_item_price":"8.00"}]},... 
```

但是我需要：

```
{
    "payment_providers":[
       {"name":"ccsave",
        "revenue":[
            {"date":"2013-03-18","sales":"51.00","items":"2","median_item_price":"20.50"}
         ]
        },
        {"name":"checkmo","revenue":[
           {"date":"2013-03-18","sales":"79.00","items":"5","median_item_price":"8.00"}
         ]
        }, ... 
```

我怎样才能让 Json 看起来很漂亮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:37:42.823

有一个 PHP 函数 json-encode，在这里查看文档：http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

并在这里检查类似的问题：[Pretty-Printing JSON with PHP](https://stackoverflow.com/questions/6054033/pretty-printing-json-with-php)

# r - 如何在 R 中对基因组数据执行 dist 和 kNN？

> ID：15495661
> 
> 赞同：0
> 
> 时间：2013-03-19T09:27:56.350
> 
> 标签：r, knn

我有缺失值的基因组数据，我想通过使用可用值来计算每对基因的表达水平之间的距离。然后我想发现 K 个最近的邻居来填补空白？我怎么能在 R 中做到这一点？

```
gene sample 1   sample 2    sample 3    sample 4
1      5555        NA          2151       5484    
2      5564        NA            NA        NA
3      4544       4656         14546       45455   
4      NA         54654           NA        NA 
```

...我如何计算欧几里德距离？我当时只需要使用一排吗？

抱歉，我是基因组数据的新手，我无法在任何地方找到此信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:21:52.927

我猜你想要做的是缺失值的 knn 插补，而不是 knn 分类。有一个现成的函数可以`impute.knn`从. 使用前请仔细阅读帮助文件。`impute``bioconductor`

```
source("http://bioconductor.org/biocLite.R")
biocLite("impute")
require(impute)

x <- rnorm(1000, 50, 5)  # 1000 random samples
x[sample(1:1000, 50)] <- NA  # 50 are randomly made NA
x <- matrix(x, nrow = 10)  # make a matrix
impute.knn(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:01:46.890

谷歌搜索`R k nearest neighbor`将我带到`knn`类包中的函数。关于你的第二个问题，计算欧几里得距离很简单：

```
sqrt((sample1_x - sample1_y)^2 + ... + (sample4_x - sample4_y)^2) 
```

where`x`和`y`是要计算之间距离的行的索引。但是，您的数据中有很多 NA，我不确定您需要如何处理，因为当涉及 NA 时，欧几里德距离是未定义的。

# javascript - 谷歌浏览器原生表单错误事件

> ID：15495666
> 
> 赞同：1
> 
> 时间：2013-03-19T09:28:04.400
> 
> 标签：javascript, html, google-chrome

当字段在提交时无效时，谷歌浏览器和任何其他浏览器是否会触发事件？例如，如果电子邮件地址字段是无效的电子邮件，谷歌浏览器将启动一个弹出窗口，显示“请输入电子邮件地址”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:22:35.987

'invalid' 事件被调度。请参阅[约束验证](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#constraint-validation)

# c# - 修改特定孩子的班级

> ID：15495667
> 
> 赞同：0
> 
> 时间：2013-03-19T09:28:06.200
> 
> 标签：c#, unity3d

我有这个抽象类，它包含一个名为 Hierarchy 的类，其中包含一些变量（unity3d 不会在检查器窗口上显示结构）。

这个抽象类有一些孩子，虽然对于他们中的大多数人来说，这个 Hierarchy 类是合适的，但对于其中一个人来说却不是。所以我想知道是否可以为这个孩子设置一个特定的 Hierarchy 类，而其余的孩子仍然使用父 Hierarchy 类？

```
 public class Hierarchy
{   
public Points points;
}

public class Points
{   
public GameObject[] pointsToActivateOnCorrectAnswer;
public GameObject[] pointsToDeactivateOnCorrectAnswer;

public GameObject[] pointsToActivateOnWrongAnswer;
public GameObject[] pointsToDeactivateOnWrongAnswer;
}
public Hierarchy hierarchy; 
```

更具体地说，我想为一个孩子而不是其他孩子修改 Points 类的内容，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:21:19.917

我建议使用泛型类。像这样的东西...

```
public class Points
{
    ...
}

public class TextAndButton
{
    ...
}

public class Hierarchy<T>
{
    T Value { get; set; }
    Hierarchy<T> Hierarchy { get; set; }
} 
```

因此，您可以`Hierarchy<Point>`像使用`Hierarchy<TextAndButton>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:38:03.467

我可能跑题了，但这看起来是接口的完美用例。所有类（如您的 Point 类）都可以实现一个通用接口，我们称其为 IChild，它引用了 Hierarchy 需要更新或访问的通用方法和变量。然后，您的 Hierarchy 类期望 IChild 成员而不是特定类，例如 Point。

当您只需要访问常用方法时，您可以引用为 IChild，当您需要特定类（如 Point）时，您只需访问它即可。

# iphone - 如何在 iPhone 中获取经纬度界限？

> ID：15495670
> 
> 赞同：0
> 
> 时间：2013-03-19T09:28:19.147
> 
> 标签：iphone, ios, mkmapview

如何使用两个 NE 和 SW 纬度经度坐标在 iPhone 中创建经纬度界限，我想检查我当前的纬度经度是否在我的纬度经度界限内。

我使用以下纬度经度坐标创建了一个界限：

```
double minLng = 7.880571
double maxLng = 8.357336
double minLat = 49.108775
double maxLat = 49.288638 
```

我想检查我的其他纬度经度是否在此范围内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:55:01.603

像这样试试

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
[locationManager startUpdatingLocation];

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    if(newLocation.coordinate.latitude>=49.108775 && newLocation.coordinate.latitude<=49.288638 && newLocation.coordinate.longitude>=7.880571 && newLocation.coordinate.longitude<=8.357336 ) {

         // It is in the bounds

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:37:01.570

如果当前是指设备的当前位置，则需要查看[CLLocationManager](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)类及其委托方法，即`location`包含有关当前纬度和经度信息的属性。其余的非常简单。

# javascript - AngularJS：如何使用 $destroy 方法删除元素

> ID：15495671
> 
> 赞同：0
> 
> 时间：2013-03-19T09:28:20.287
> 
> 标签：javascript, angularjs

非常新的 Angular 并且非常困惑如何使用 $destroy 方法来删​​除 API 文档中提到的元素：

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$rootScope.Scope

这是我尝试过的 HTML：

```
<div ng-controller="TodosController">
    <div class="tasks" ng-show="todos">
        <ul ng-repeat="todo in todos">
            <li>              
                    <button ng-click="todos.$destroy(todo)">Delete</button>
                    <b>{{todo.name}}</b>                
            </li>
        </ul>
    </div>
</div> 
```

和 JS：

```
var myApp = angular.module('myApp', []);

function TodosController($scope) {
    $scope.todos = [{
        name: "Learn angular",
        estimate: 8,
        done: true},
    {
        name: "Install java",
        estimate: 2,
        done: false},
    {
        name: 'Uninstall ruby',
        estimate: 3,
        done: false}];
} 
```

这是我上面的小提琴：http: [//jsfiddle.net/5Mzda/26/](http://jsfiddle.net/5Mzda/26/)

在旧版本的 Angular 中，可以使用 $remove 方法删除元素。

```
<script type="text/javascript" ng:autobind src="http://code.angularjs.org/0.9.16/angular-0.9.16.js"></script>

<div ng:controller="TodosController">
    <div class="tasks" ng:show="todos">
        <ul ng:repeat="todo in todos">
            <li>              
                <div ng:controller="TodoEditorController">
                    <button ng:click="todos.remove(todo)">Delete</button>
                        <b>{{todo.name}}</b>
                </div>

            </li>
        </ul>
    </div>
</div> 
```

以上在这个小提琴中工作：

[http://jsfiddle.net/bpTXe/195/](http://jsfiddle.net/bpTXe/195/)

但是，在更高版本的 Angular 中使用`$destroy()`、`$remove()`和`remove()`不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T09:52:08.907

$destroy 用于销毁 $scopes。

array.$remove 已在版本[0.10.6 bubblewrap-cape (2012-01-17)中删除](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#0106-bubblewrap-cape-2012-01-17)

您可以使用 array.splice：

```
<button ng-click="todos.splice(key,1)">Delete</button> 
```

# jqplot - jqplot中的双轴图

> ID：15495674
> 
> 赞同：3
> 
> 时间：2013-03-19T09:28:40.500
> 
> 标签：jqplot

是否可以使用 jqplot 制作双轴图

任何人都可以分享同样的例子吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T02:53:30.930

有可能的。

* * *

### 代码示例：

```
$(document).ready(function(){
    $.jqplot('chart1', [
            [54551.94,15192.79,37937.26,11417.67,11799.59,18377.53,49207.82,168235.42,16654.29,62145.78],
            [132.19,2.99,6.09,50.38,1.44,4.41,25.25,3.37,68.60,2.14]
        ], {
        seriesDefaults : {
            renderer : $.jqplot.BarRenderer,
            rendererOptions : {  
                highlightMouseOver : true,
                barWidth : 10
            }
        },  
        legend : {
            show : true,
            placement : 'outsideGrid'
        },                  

        axes : {                 
            xaxis : {
                renderer : $.jqplot.CategoryAxisRenderer,
                tickOptions : {
                  angle : 45    
                },
                ticks : ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']
            },
            yaxis : {
                label : 'axis1',
                renderer : $.jqplot.LogAxisRenderer                        
            },
            y2axis : {
                label : 'axis2'                      
            }
        },
        series : [{
            yaxis : 'yaxis',
            label : 'dataForAxis1'
        }, {
            yaxis : 'y2axis',
            label : 'dataForAxis2'
        }]
    });
}); 
```

* * *

### JSFiddle 示例：

**[例子](http://jsfiddle.net/6kCw6/22/)**

* * *

### 文档：

[**请参阅此处**](http://www.jqplot.com/tests/rotated-tick-labels.php)以获取参考。

从上往下看第三个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:39:26.630

是的，有可能。一个开始的例子可以是：

```
var yaxis_data = [1,2,3,4];
var y2axis_data = [2,4,6];
var myjqplot = $.jqplot('chart1', [yaxis_data, y2axis_data], {
  series: [
   { yaxis: "yaxis" },
   { yaxis: "y2axis" }
  ]
}); 
```

**编辑：**有关系列的进一步说明，请参见[此处](http://www.jqplot.com/docs/files/jqplot-core-js.html#Series)

# scala - 展平 Scala 尝试

> ID：15495678
> 
> 赞同：16
> 
> 时间：2013-03-19T09:29:00.720
> 
> 标签：scala, try-catch, scala-2.10

有没有一种简单的方法来展平一组 try 以给出 try 值的成功，或者只是失败？例如：

```
def map(l:List[Int]) = l map {
  case 4 => Failure(new Exception("failed"))
  case i => Success(i)
}

val l1 = List(1,2,3,4,5,6)
val result1 = something(map(l1))

result1: Failure(Exception("failed"))

val l2 = List(1,2,3,5,6)
val result2 = something(map(l2)) 

result2: Try(List(1,2,3,5,6)) 
```

您将如何处理集合中的多个故障？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T13:00:07.800

对于失败优先操作，这非常接近最低限度：

```
def something[A](xs: Seq[Try[A]]) =
  Try(xs.map(_.get)) 
```

（到了你不应该费心创建方法的地步；只需使用`Try`）。如果你想要所有的失败，一个方法是合理的；我会使用`Either`：

```
def something[A](xs: Seq[Try[A]]) =
  Try(Right(xs.map(_.get))).
  getOrElse(Left(xs.collect{ case Failure(t) => t })) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T10:55:55.780

少一点冗长，更安全：

```
def sequence[T](xs : Seq[Try[T]]) : Try[Seq[T]] = (Try(Seq[T]()) /: xs) {
    (a, b) => a flatMap (c => b map (d => c :+ d))
} 
```

结果：

```
sequence(l1) 
```

> res8: scala.util.Try[Seq[Int]] = Failure(java.lang.Exception: failed)

```
sequence(l2) 
```

> res9: scala.util.Try[Seq[Int]] = Success(List(1, 2, 3, 5, 6))

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-19T10:29:48.067

也许不像您希望的那么简单，但这有效：

```
def flatten[T](xs: Seq[Try[T]]): Try[Seq[T]] = {
  val (ss: Seq[Success[T]]@unchecked, fs: Seq[Failure[T]]@unchecked) =
    xs.partition(_.isSuccess)

  if (fs.isEmpty) Success(ss map (_.get))
  else Failure[Seq[T]](fs(0).exception) // Only keep the first failure
}

val xs = List(1,2,3,4,5,6)
val ys = List(1,2,3,5,6)

println(flatten(map(xs))) // Failure(java.lang.Exception: failed)
println(flatten(map(ys))) // Success(List(1, 2, 3, 5, 6)) 
```

`partition`请注意，正如注释所证明的那样，使用的类型并不安全`@unchecked`。在这方面，`foldLeft`累积两个序列`Seq[Success[T]]`的a`Seq[Failure[T]]`会更好。

如果你想保留所有的失败，你可以使用这个：

```
def flatten2[T](xs: Seq[Try[T]]): Either[Seq[T], Seq[Throwable]] = {
  val (ss: Seq[Success[T]]@unchecked, fs: Seq[Failure[T]]@unchecked) =
    xs.partition(_.isSuccess)

  if (fs.isEmpty) Left(ss map (_.get))
  else Right(fs map (_.exception))
}

val zs = List(1,4,2,3,4,5,6)

println(flatten2(map(xs))) // Right(List(java.lang.Exception: failed))
println(flatten2(map(ys))) // Left(List(1, 2, 3, 5, 6))
println(flatten2(map(zs))) // Right(List(java.lang.Exception: failed, 
                           //            java.lang.Exception: failed)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-19T12:59:55.633

作为对 Impredicative 的回答和评论的补充，如果您的依赖项中同时具有[scalaz-7](https://github.com/scalaz/scalaz/tree/scalaz-seven)和[scalaz-contrib](https://github.com/typelevel/scalaz-contrib) /scala210 ：

```
> scala210/console
[warn] Credentials file /home/folone/.ivy2/.credentials does not exist
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.10.0 (OpenJDK 64-Bit Server VM, Java 1.7.0_17).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import scala.util._
import scala.util._

scala> def map(l:List[Int]): List[Try[Int]] = l map {
     |   case 4 => Failure(new Exception("failed"))
     |   case i => Success(i)
     | }
map: (l: List[Int])List[scala.util.Try[Int]]

scala> import scalaz._, Scalaz._
import scalaz._
import Scalaz._

scala> import scalaz.contrib.std.utilTry._
import scalaz.contrib.std.utilTry._

scala> val l1 = List(1,2,3,4,5,6)
l1: List[Int] = List(1, 2, 3, 4, 5, 6)

scala> map(l1).sequence
res2: scala.util.Try[List[Int]] = Failure(java.lang.Exception: failed)

scala> val l2 = List(1,2,3,5,6)
l2: List[Int] = List(1, 2, 3, 5, 6)

scala> map(l2).sequence
res3: scala.util.Try[List[Int]] = Success(List(1, 2, 3, 5, 6)) 
```

您需要 scalaz 来获取（隐藏在`Applicative` [实例](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/List.scala#L14)中）的实例，以获取方法。您需要 scalaz-contrib 的[实例](https://github.com/typelevel/scalaz-contrib/blob/master/scala210/main/scala/Try.scala#L25)，这是的类型签名所必需的。 存在于 scalaz 之外，因为它只出现在 scala 2.10 中，并且 scalaz 旨在交叉编译到早期版本）。`List``MonadPlus`[`sequence`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Applicative.scala#L39)`Traverse` `Try``sequence``Try`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-19T23:53:05.243

从 开始`Scala 2.13`，大多数集合都提供了一种[`partitionMap`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#partitionMap%5BA1,A2%5D(f:A=%3EEither%5BA1,A2%5D):(CC%5BA1%5D,CC%5BA2%5D))方法，该方法基于返回`Right`或的函数来划分元素`Left`。

在我们的例子中，我们可以调用一个将s 转换为s ( )`partitionMap`的函数，以便将es 划分为s 并将s 划分为s。`Try``Either`[`Try::toEither`](https://www.scala-lang.org/files/archive/api/current/scala/util/Try.html#toEither:scala.util.Either%5BThrowable,T%5D)`Success``Right``Failure``Left`

然后，只需根据是否存在左侧来匹配生成的左侧和右侧分区元组：

```
tries.partitionMap(_.toEither) match {
  case (Nil, rights)       => Success(rights)
  case (firstLeft :: _, _) => Failure(firstLeft)
}
// * val tries = List(Success(10), Success(20), Success(30))
//       => Try[List[Int]] = Success(List(10, 20, 30))
// * val tries = List(Success(10), Success(20), Failure(new Exception("error1")))
//       => Try[List[Int]] = Failure(java.lang.Exception: error1) 
```

中间`partitionMap`步骤的详细信息：

```
List(Success(10), Success(20), Failure(new Exception("error1"))).partitionMap(_.toEither)
// => (List[Throwable], List[Int]) = (List(java.lang.Exception: error1), List(10, 20)) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-19T12:23:04.787

看看liftweb Box monad。在`tryo`构造函数的帮助下，它为您提供了您正在寻找的抽象。

有了`tryo`您可以将功能提升到`Box`. 然后，该框要么包含函数的结果，要么包含错误。然后，您可以使用通常的 monadic 辅助函数（flatMap、filter 等）访问该框，而无需担心该框是否包含错误或函数的结果。

例子：

```
import net.liftweb.util.Helpers.tryo

List("1", "2", "not_a_number") map (x => tryo(x.toInt)) map (_ map (_ + 1 )) 
```

结果到

```
List[net.liftweb.common.Box[Int]] = 
  List(
    Full(2), 
    Full(3), 
    Failure(For input string: "not_a_number",Full(java.lang.NumberFormatException: For input string: "not_a_number"),Empty)
  ) 
```

您可以跳过错误的值`flatMap`

```
List("1", "2", "not_a_number") map (x => tryo(x.toInt)) flatMap (_ map (_ + 1 )) 
```

结果

```
List[Int] = List(2, 3) 
```

还有多种其他辅助方法，例如用于组合框（在链接错误消息时）。你可以在这里找到一个很好的概述：[Box Cheat Sheet for Lift](http://nerd.kelseyinnis.com/blog/2012/05/16/box-cheat-sheet-for-lift/)

您可以单独使用它，无需使用整个升降机框架。对于上面的示例，我使用了以下 sbt 脚本：

```
scalaVersion := "2.9.1"

libraryDependencies += "net.liftweb" %% "lift-common" % "2.5-RC2"

libraryDependencies += "net.liftweb" %% "lift-util" % "2.5-RC2" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-08T12:22:40.483

这些是我的 2cents：

```
def sequence[A, M[_] <: TraversableOnce[_]](in: M[Try[A]])
  (implicit cbf:CanBuildFrom[M[Try[A]], A, M[A]]): Try[M[A]] = {
    in.foldLeft(Try(cbf(in))) {
      (txs, tx) =>
        for {
          xs <- txs
          x <- tx.asInstanceOf[Try[A]]
        } yield {
          xs += x
        }
    }.map(_.result())
  } 
```

# javascript - 在加载和点击时调用 ajax 函数

> ID：15495680
> 
> 赞同：0
> 
> 时间：2013-03-19T09:29:02.080
> 
> 标签：javascript, ajax

假设有 2 个 ajax 函数 f1 和 f2 包含一个具有 10 次迭代的 for 循环，并且我想调用 f1 onload 并且同时执行 f1 时我想在单击按钮时调用 f2 以便同时显示这两个函数。这两个函数在 for 循环中都包含一个警报消息，并且两个函数都是相同的，只是名称不同。

我们可以这样做吗？如果是怎么办？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:41:42.800

Yes we can do this by calling 2nd function in onload i.e

```
 window.onload=function()
   {
      f1()('onload');    //call 1 
      f2(); 
    } 
```

# visual-studio - 如何在 Visual Studio 2010 中恢复已删除的选项卡

> ID：15495682
> 
> 赞同：0
> 
> 时间：2013-03-19T09:29:04.080
> 
> 标签：visual-studio

我不小心删除了 Visual Studio 2010 设计模式中的数据选项卡。怎么带回来？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:31:54.450

您可以检索`View`VS 选项卡下的任何窗口，您可能正在寻找`Solution Explorer`

编辑：右键单击您的工具箱并选择`Show all`或`Reset toolbox`

# php - 如何使用 jquery 刷新 php 中的特定元素？

> ID：15495686
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:29:11.373
> 
> 标签：php, jquery, ajax

我有一个选择框。在更改它的事件时，我调用确认框。当我单击取消按钮时，仍然保持更改值。所以我只想刷新选择框而不是整个页面。

```
function statusChanged(obj,id){
    $(obj).change(function() {
        var answer = confirm ("Are you sure update Status?");
        var status;
        if(answer){
            status=$(this).val();
            //alert(status);
            ajaxUpdate("service-providers.php", {action:"updatestatus",'status': status,'id':id}, function(data) {
            if(data.type=="success") {
                    $("#notify").notification({caption:"Status Updated  Successfully.", type:"information", sticky:false ,onhide:function(){
                    window.location="service-providers.php";
                }
                }); 
            }
            });
        }
        else{
            // here i want to refresh select box
        }
});
} 
```

html代码：

```
<select id="status1" name="status1"  style="width:140px;" onChange="statusChanged(this,<?php echo $applicationid; ?>);">        
                                                    <?php
                                                        if($status==3 || $status==4)
                                                            echo "<option value='4'>Submitted</option>";
                                                        else
                                                            echo "<option value='0'>Select</option>";
                                                    ?>
                                                    <option value="2" <?php if($status==2) echo "selected='selected'"; ?> >Approved</option>
                                                    <option value="3" <?php if($status==3) echo "selected='selected'"; ?> >Rejected</option>
                                               </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:37:49.687

使用此代码，否则它只会重置选择框。

这将起作用

```
$('#SELECTBOX_ID').prop('selectedIndex',0); 
```

请参阅[http://jsfiddle.net/TmJCE/10/](http://jsfiddle.net/TmJCE/10/)工作演示。

我也在我的本地实现了这段代码我主要做了两个更改，我从选择中删除了 onchange，第二个是我没有使用 ajax 因为你只想在确认框上单击取消。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
      jQuery(document).ready(function () {
         jQuery("#status1").change(function() {
         var answer = confirm ("Are you sure update Status?");
         var status;
         if(answer){
           status=$(this).val();
            //I have did not call ajax
         }
         else{
          jQuery('#status1').prop('selectedIndex',0);
         }
     });
  });
 </script>
 <?php
    $status = 0; // I temporary added t 
  ?>
  <select id="status1" name="status1"  style="width:140px;" >
  <?php
     if($status==3 || $status==4)
        echo "<option value='4'>Submitted</option>";
     else
      echo "<option value='0'>Select</option>";
    ?>
     <option value="2" <?php if($status==2) echo "selected='selected'"; ?> >Approved</option>
     <option value="3" <?php if($status==3) echo "selected='selected'"; ?> >Rejected</option>
   </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:38:35.237

页面加载后执行：

```
$('select').each(function() {
 $(this).attr('original_data', $(this).val());
}); 
```

在你的函数中做

```
$(this).val(this.attr('original_data')); 
```

检查。完美运行。

# c# - 从数据表中按日期选择

> ID：15495689
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:29:19.440
> 
> 标签：c#

![在此处输入图像描述](../Images/165d7047baa66dbec581bf1382988d65.png)

我有一个包含图像中数据的数据表我可以从中选择包含相同日期的所有行。例如所有具有“2013 年 3 月 18 日”的行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:31:32.530

如果您`CHAT_DATE`的类型是，您可以使用以下内容`DateTime`

```
var query = from t in dataTable.AsEnumerable()
            where t.Field<DateTime>("CHAT_DATE").Date == new DateTime(2013,03,18)
            select t; 
```

如果您`CHAT_DATE`的类型是字符串，那么您必须首先使用 DateTime.ParseExact 将其转换为 DateTime，然后进行如下查询：

```
var query = from t in dataTable.AsEnumerable()
            where DateTime.ParseExact(t.Field<string>("CHAT_DATE"), "MMM d yyyy h:mmtt", CultureInfo.InvariantCulture).Date ==
            new DateTime(2013,03,18)
            select t; 
```

您可能会看到：[LINQ to DataSet 中的查询](http://msdn.microsoft.com/en-us/library/bb552415.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:32:02.490

```
select * from tlbName where CHAT_DATE like 'Mar 18 2013'% 
```

试试这个。

# jquery - 如何从下拉列表中选择特定值

> ID：15495691
> 
> 赞同：1
> 
> 时间：2013-03-19T09:29:40.033
> 
> 标签：jquery, jsp, drop-down-menu, jquery-selectors

我正在尝试从下拉菜单中选择一个值。我的代码目前看起来像这样：

```
var pnam= $(this).parent().parent().find("td").eq(1).html().trim();
    $("#parentModule_name").find("option").each(function(){
          if ($(this).text()==pnam) {
              $(this).attr('selected','selected');
          }
    }); 
```

流程进入正确选择属性的内部循环。但是没有达到预期的结果。有趣的是，在我的页面上，当我检查元素时，这就是我得到的

```
<select id="parentModule_name" name="parentId">
                        <option value="0">Please Select</option>                                    
                                    <option value="12">Admin</option>

                                    <option value="13">Util</option>

                                    <option value="15" selected="selected">Vendor</option>

                                    <option value="16">Shubham</option>

                        </select> 
```

如你所见。该值被正确选择但未显示在页面上。任何帮助，将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:33:35.560

The markup (or at least the selection portion of it) and script appear to be working: [http://jsfiddle.net/7RGgA/](http://jsfiddle.net/7RGgA/)

If you are executing this on page load, have you wrapped your script with `$(document).ready();`

```
$(document).ready(function(){
   var pnam= $(this).parent().parent().find("td").eq(1).html().trim();
    $("#parentModule_name").find("option").each(function(){
          if ($(this).text()==pnam) {
              $(this).attr('selected','selected');
          }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:47:55.013

另一种方法是过滤选项并简单地设置选定的属性；

```
$('#parentModule_name > option')
    .filter(function() { return $(this).text() == pnam; })
    .prop('selected', true); 
```

## [jsFiddle 演示](http://jsfiddle.net/7RGgA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:08:36.853

$(文档).ready(函数 () {

```
 $("#parentModule_name").change(function () {
              var temp=  $(this).find("option:selected").text();
              alert(temp);
               });
        }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T09:35:53.240

Try this

```
$(function(){
      $('#parentModule_name')
      .find('option[text="'+ pnam +'"]')
      .attr('selected','selected');
}); 
```

# iphone - Urban Airship 未创建设备令牌

> ID：15495696
> 
> 赞同：0
> 
> 时间：2013-03-19T09:30:05.847
> 
> 标签：iphone, objective-c, xcode, push-notification, urbanairship.com

为什么我没有设备令牌？

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary      *)launchOptions {

 //Create Airship options dictionary and add the required UIApplication launchOptions
 NSMutableDictionary *takeOffOptions = [NSMutableDictionary dictionary];
[takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

// Call takeOff (which creates the UAirship singleton), passing in the launch options so the
// library can properly record when the app is launched from a push notification. This call is
// required.
//
// Populate AirshipConfig.plist with your app's info from https://go.urbanairship.com
[UAirship takeOff:takeOffOptions];

// Set the icon badge to zero on startup (optional)
[[UAPush shared] resetBadge];

// Register for remote notfications with the UA Library. This call is required.
[[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                                     UIRemoteNotificationTypeSound |
                                                     UIRemoteNotificationTypeAlert)];

// Handle any incoming incoming push notifications.
// This will invoke `handleBackgroundNotification` on your UAPushNotificationDelegate.
[[UAPush shared] handleNotification:[launchOptions valueForKey:UIApplicationLaunchOptionsRemoteNotificationKey]
                   applicationState:application.applicationState];

  2013-03-19 04:22:44.202 MyApp[1070:907] [D] -[UAPush applicationDidBecomeActive] [Line 555]        Checking registration status after foreground notification
  2013-03-19 04:22:44.204 MyApp[1070:907] [D] -[UAPush applicationDidBecomeActive] [Line 561]           Checking registration on app foreground disabled on app initialization
  2013-03-19 04:22:44.241 MyApp[1070:907] [D] -[UAUser listenForDeviceTokenReg] [Line 931]   ListenForDeviceTokenReg
  2013-03-19 04:22:44.270 MyApp[1070:907] [D] -[UAUser userCreated:] [Line 467] User created:   201:{"username": null, "alias": null, "tags": [], "user_id": "xK4v5lARRDCAvekt25TeqA",   "user_url": "https://device-api.urbanairship.com/api/user/xK4v5lARRDCAvekt25TeqA/",   "device_tokens": [], "password": "oZeZFMO9SpyDZw3lM", "apids": [], "device_pins": [],  "ua_device_id": "2A6651E5-6D23-4FAD-B53C-4D6356D7A2AA"}
  2013-03-19 04:22:44.336 MyApp[1070:907] [D] -[UAUser updateDefaultDeviceToken] [Line 978] Updating device token.
 2013-03-19 04:22:44.338 MyApp[1070:907] [D] -[UAUser updateDefaultDeviceToken] [Line 981] Skipping device token update: no token, already up to date, or user is being updated.
 2013-03-19 04:22:58.766 F 
```

我的 AirshipConfig.plist 中有 DEVELOPMENT_APP_SECRET 和 DEVELOPMENT_APP_KEY 以及 APP_STORE_OR_AD_HOC = NO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:52:27.577

我认为，配置时缺少一些步骤：

请查看[https://docs.urbanairship.com/display/DOCS/Getting+Started:+iOS:+](https://docs.urbanairship.com/display/DOCS/Getting+Started:+iOS:+Push)再次推送

并尝试在 AppDelegate 中记录您的令牌：

```
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
NSLog(@"My token is: %@", deviceToken);
[[UAPush shared] registerDeviceToken:deviceToken];
} 
```

同时更新 AirshipConfig.plist 文件

这可能是错误配置的证书/配置文件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T12:06:36.920

我有同样的问题。虽然您有 DEVELOPMENT_APP_SECRET 和 DEVELOPMENT_APP_KEY，但我猜 UrbanAirship 库需要 PRODUCTION_APP_SECRET 和 PRODUCTION_APP_KEY。当我将它们添加到我的 AirshipConfig.plist 中时，问题得到了解决，我能够通过 UrbanAirship 发送推送消息。

# c# - Nadio 对象序列化

> ID：15495697
> 
> 赞同：1
> 
> 时间：2013-03-19T09:30:12.250
> 
> 标签：c#, serialization, naudio

我正在尝试序列化一个 Naudio 对象，但我收到了这个 erreu 消息`[SerializationException: the type 'NAudio.Wave.BufferedWaveProvider' dans l'assembly 'NAudio, Version=1.6.0.0, Culture=neutral, PublicKeyToken=null' is not marked as serializable.]`

我正在使用 Naudio.dll 这就是为什么我不能添加 [Serializable()]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:37:09.660

那么，你不能序列化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:40:44.287

我想不出你想要序列化的充分理由`BufferedWaveProvider`，但 NAudio 是[开源](http://naudio.codeplex.com)的，所以没有什么能阻止你这样做。只需将代码复制`BufferedWaveProvider`到您自己的项目中，添加`Serializable`属性，将其命名为类似的名称`SerializableBufferedWaveProvider`并使用它。

# hadoop - 如何为 Opencl 应用程序使用 hadoop MapReuce 框架？

> ID：15495698
> 
> 赞同：0
> 
> 时间：2013-03-19T09:30:15.877
> 
> 标签：hadoop, mapreduce, opencl, gpu, hadoop-partitioning

我正在 opencl 中开发一个应用程序，其基本目标是在 GPU 平台上实现数据挖掘算法。我想使用 Hadoop 分布式文件系统并想在多个节点上执行应用程序。我正在使用 MapReduce 框架，我将基本算法分为两部分，即“Map”和“Reduce”。

我以前从未在 hadoop 中工作过，所以我有一些问题：

1.  我是否已经在 java 中编写了我的应用程序以使用 Hadoop 和 Mapeduce 框架？
2.  我在 opencl 中为 map 和 reduce 编写了内核函数。是否可以将 HDFS 文件系统用于非 Java GPU 计算应用程序？（注意：我不想使用 JavaCL 或 Aparapi）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:07:19.740

HDFS是一个文件系统；您可以使用任何语言的 HDFS 文件系统。

HDFS 数据分布在多台机器上，在 GPU 计算中处理数据具有很高的可用性。

有关更多信息，请参阅[Hadoop 流](http://hadoop.apache.org/docs/stable/streaming.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:35:29.653

您可以使用 Hadoop Streaming，只要您的代码可以从 stdio 读取并写回它，您就可以使用任何您想要的语言编写映射器和化简器。为了获得灵感，您可以参考[R 如何与 Hadoop Streaming 一起使用的示例](http://weblogs.java.net/blog/manningpubs/archive/2012/10/10/r-and-streaming-hadoop-practice)

# c# - 开发 Windows 服务以在 SQL Server 数据库和 Web 服务之间进行通信

> ID：15495700
> 
> 赞同：-3
> 
> 时间：2013-03-19T09:30:23.813
> 
> 标签：c#, .net, sql-server, windows-services

我们开发了一个 iPhone 应用程序，它通过托管在公共服务器上的 asp.net 与 SQL 服务器数据库进行通信。我们已经完成了所有的开发，我们需要使用实时服务器数据进行测试。

现在我们了解到实时服务器数据库正在使用动态端口，并且无法从我们的 asp.net 脚本中访问。数据库管理员反对更改动态端口，因为他们担心安全威胁。我们试图要求他们通过授予对我们托管 asp.net Web 服务的服务器的访问权限来改变这一点，但他们不愿意这样做。

他们要求的解决方案是开发一个 Windows 服务，作为他们的 SQL 服务器数据库和我们的 Web 服务之间的中间件。他们已准备好打开端口以在其服务器上运行该 Windows 服务。我们的 iphone 应用程序需要从数据库中获取值并将值插入到数据库中。

我们需要知道开发Windows服务是否可行，如果可以，有人可以指导我们如何开发吗？

他们的服务器运行的是 windows 2003，SQL server 版本是 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:30:24.373

这是关于如何开始创建窗口服务的好读物

[http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.80).aspx)

[http://tech.pro/tutorial/895/creating-a-simple-windows-service-in-csharp](http://tech.pro/tutorial/895/creating-a-simple-windows-service-in-csharp)

# sql - SQL Server 2008 创建/上次更新触发器问题

> ID：15495707
> 
> 赞同：0
> 
> 时间：2013-03-19T09:30:34.170
> 
> 标签：sql, sql-server-2008, datetime, triggers

我正在使用此触发器来填充表中的`CreatedDate`和`LastUpdated`列（类型`datetime`）：

```
CREATE TRIGGER trCreatedDate ON [LasMTest]
FOR INSERT 
AS
    UPDATE [LasMTest] 
    SET [LasMTest].Created = getdate(),
        [LasMTest].LastModified = getdate()
    FROM [LasMTest] 
    INNER JOIN Inserted ON [LasMTest].[ID] = Inserted.[ID]
GO 
```

当我检查表格时，日期只差了几分之一秒。

```
Created LastModified    ID
2013-03-19 09:24:32.920 2013-03-19 09:24:32.930 4
2013-03-19 09:26:39.890 2013-03-19 09:26:39.900 5 
```

如何修改触发器以使它们都是准确的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:40:59.513

*这是导致问题的两个*触发器的相互作用。

相反，如果您将两列都设置为默认*值*`getdate()`并放弃您的`insert`触发器，它应该可以工作 -`INSERT`也不会导致`UPDATE`.

另一种方法是将`INSERT`触发器编写为`INSTEAD OF`执行 an`INSERT`而不是 an的触发器`UPDATE`（因此，也避免了`UPDATE`触发器触发）。

* * *

如果你确实想把它写成`INSTEAD OF`触发器，它会是这样的：

```
CREATE TRIGGER trCreatedDate ON [LasMTest]
INSTEAD OF INSERT 
AS
    INSERT INTO LasMTest (/* Column List */,Created,LastModified)
    SELECT /* Column List */,getdate(),getdate() from inserted
GO 
```

`INSERT`s 到触发器中的触发表中`INSTEAD OF`不会（谢天谢地）导致触发器被递归触发。如果`ID`是一`IDENTITY`列，那么它应该出现在上面的列列表中（它还没有生成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:35:52.090

试试这个：

```
CREATE TRIGGER trCreatedDate ON [LasMTest]

FOR INSERT 

AS
Declare @CurrentDate Datetime
Set @CurrentDate=getdate()
UPDATE [LasMTest] SET [LasMTest].Created=@CurrentDate,[LasMTest].LastModified=@CurrentDate

FROM [LasMTest] INNER JOIN Inserted ON [LasMTest].[ID]= Inserted.[ID]

GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:58:57.973

从 INSERT 进行更新时，您基本上希望避免 UPDATE 触发器。这称为[嵌套触发器](http://msdn.microsoft.com/en-us/library/ms190739.aspx)。一种简单的解决方案是用于[`CONTEXT_INFO()`](http://msdn.microsoft.com/en-us/library/ms187768.aspx)与嵌套的 UPDATE 触发器代码进行通信，您已经在 INSERT 触发器中，因此它会自我抑制：

```
CREATE TRIGGER trCreatedDate ON [LasMTest]
FOR INSERT 
AS
    SET CONTEXT_INFO 0xDEADBEEF;
    UPDATE [LasMTest] 
    SET [LasMTest].Created = getdate(),
        [LasMTest].LastModified = getdate()
    FROM [LasMTest] 
    INNER JOIN Inserted ON [LasMTest].[ID] = Inserted.[ID];
    SET CONTEXT_INFO NULL;
GO

CREATE TRIGGER trModifiedDate ON [LasMTest]
FOR UPDATE
AS
    DECLARE @context varbinary(128);
    SET @context = CONTEXT_INFO();
    IF @context is NULL
    BEGIN
       UPDATE [LasMTest] 
          SET [LasMTest].LastModified = getdate()
        FROM [LasMTest] 
        INNER JOIN Inserted ON [LasMTest].[ID] = Inserted.[ID];
    END
GO 
```

然而，这种方法是脆弱的。异常可以保留 context_info 设置并抑制会话中的所有后续 UPDATE 触发器。这需要添加 TRY/CATCH 块。而且您总是冒着应用程序`CONTEXT_INFO`为*自己的*目的使用并破坏您的计划的风险。

另一个解决方案是使 UPDATE 触发器更智能。如果列被修改，它可以检查[`UPDATE(Created)`](http://msdn.microsoft.com/en-us/library/ms187326.aspx)UPDATE 触发器的内部并抑制任何操作。`Created`这是按惯例工作的，因为您知道更新`Created`列的唯一位置是 INSERT 触发器：

```
CREATE TRIGGER trModifiedDate ON [LasMTest]
FOR UPDATE
AS
    IF NOT UPDATE(Created)
    BEGIN
       UPDATE [LasMTest] 
          SET [LasMTest].LastModified = getdate()
        FROM [LasMTest] 
        INNER JOIN Inserted ON [LasMTest].[ID] = Inserted.[ID];
    END
GO 
```

# php - 字符串函数 php

> ID：15495708
> 
> 赞同：-2
> 
> 时间：2013-03-19T09:30:36.797
> 
> 标签：php, string, function

我得到一个字符串`0699245221`，我想要这个结果`06-99-24-52-21`，你知道最好的解决方案吗？（忘记循环，或其他，我确定 php 有这个“功能”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:33:03.667

[http://www.php.net/manual/es/function.wordwrap.php](http://www.php.net/manual/es/function.wordwrap.php)

```
$str = "0699245221";
$str = wordwrap($str, 2, '-', true); 
```

输出：06-99-24-52-21

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:37:57.093

```
 $string  = '0699245221';
 $modified_string = wordwrap($string, 2, '-', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:32:50.937

试试这个 ：

```
$str  = '0699245221';
echo $res  = implode("-",str_split($str, 2)); 
```

或者

```
$str  = '0699245221';
echo $res  = chunk_split ($str, 2, '-'); 
```

第二个有一个问题，它`-`在最后添加了一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T09:33:17.280

试试这个

```
<?php
    $value  = '0699245221';
    echo $res  = implode("-",str_split($value, 2));
?> 
```

**输出**

```
06-99-24-52-21 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T09:34:34.733

有很多方法可以做到这一点。你可以使用这样的东西：

```
function addDashes($str) {
    $str = str_split($str, 2);
    $str = implode("-", $str);
    return $str;
} 
```

或这个：

```
function addDashes($str) {
    $str = chunk_split($string, 2, "-");
    $str = substr($str, 0, -1);
    return $str;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-23T10:18:00.200

这是尝试过的完美解决方案，他给你这样的结果 06-99-24-52-21

```
<?php
$str = "0699245221";
$str1= chunk_split($str,2,"-");
$str1=rtrim($str1,"-");
echo $str1;
?> 
```

# node.js - 在 node.js 中如何获取当前模块中其他模块函数的结果？

> ID：15495710
> 
> 赞同：1
> 
> 时间：2013-03-19T09:30:44.400
> 
> 标签：node.js, redis, socket.io

我需要当前模块中其他模块功能的结果。我该怎么做。

模块1.js

```
 var module2=require('./lib/module2');
         module2.getValue(); 
```

现在我希望在 getValue 方法中返回“真”。我怎样才能到达这里。

在其他语言中，以下代码将起作用

```
var result=module2.getValue(); 
```

但是在 node.js 中，我们必须使用回调方法来获取该值。我该怎么做。

模块2.js

```
exports.getValue=function(){

   console.log('getValue method called.');
   return true;

}; 
```

最后我也改变了我的module1代码，但我没有得到这个结果。下面是我更新的module1代码

```
 var module2=require('./lib/module2');
     module2.getValue(); 
```

下面是我的确切代码

服务器.js

```
 var express = require('express')
   , http = require('http');

     var app = express();

   app.configure(function(){
    app.use(express.static(__dirname + '/public'));
});

   var server = http.createServer(app);

   var io = require('socket.io').listen(server);

    server.listen(8000);

   var cradle=require('cradle');

     new(cradle.Connection)('https://mydomain.iriscouch.com/', 5984, {
                cache: true,
                raw: false
            });

            cradle.setup({
                host: 'mydomain.iriscouch.com',
                cache: true,
                raw: false
              });

              var c = new(cradle.Connection);
              exports.connObj=c;

                 var notifications=require('./lib/Notifications');
                 var notificationId="89b92aa8256cad446913118601000feb";
                 console.log(notifications.getNotificatiosById(notificationId)); 
```

通知.js

```
 var appModule=require('../server');
        var connectionObj=appModule.connObj;
        var db = connectionObj.database('notifications');

        exports.getNotificatiosById=function(notificationId){

        db.get(notificationId, function (err, doc) {
    console.log(doc);//im getting output for this line while running server.js file
        return true;
  });

     }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:50:06.737

所以你有这个方法：

```
exports.getNotificatiosById = function (notificationId) {

  db.get(notificationId, function (err, doc) {
    console.log(doc); //im getting output for this line while running server.js file
    return true;
  });

}; 
```

有内部回调函数。在这种情况下，不可能`getNotificatiosById`从内部返回值`db.get`。您可能应该阅读[这篇](https://stackoverflow.com/q/9596276/1637178)文章。

我不知道您使用的是哪个数据库系统，但可能在 API 中有一个同步版本，即`db.getSync`. 然后我们可以做这样的事情：

```
exports.getNotificatiosById = function (notificationId) {

  return db.getSync(notificationId);

}; 
```

但基本上在 NodeJS 中，由于执行脚本的非阻塞方式，我们几乎总是使用（并且想要使用）回调函数。无论您对这些东西了解多少，我都推荐[Node.js 简介](http://www.youtube.com/watch?v=jo_B4LTHi3I)视频，其中节点的创建者解释了很多。

# c - 获取系统输出（“insmod mmodule.ko”）

> ID：15495711
> 
> 赞同：0
> 
> 时间：2013-03-19T09:30:50.063
> 
> 标签：c, system, insmod

我想在 C 程序中运行 shell 命令并获得标准输出。

我在这个函数中做到了：

```
int run_shell_cmd_nout(const char* cmd)
{
    FILE *fp;
    char out[4096]     = {0};
    char str[256]       = {0};
    char full_cmd[1024] = {0};
    int result = 0;

    // Compose full shell command
    if (!sprintf(full_cmd, "/system/bin/%s", cmd))
    {
        printf("Failed to compose full shell command\n");
        return -1;
    }

    // Open the command for reading.
    fp = popen(full_cmd, "r");
    if (fp == NULL)
    {
        printf("Failed to run command\n");
        return -1;
    }

    // Read the output a line at a time - output it.
    while(!feof(fp))
    {
         if(fgets(str, 256, fp) != NULL)
         {
             result = -1;
             strcat(out, str);
         }
    }

    pclose(fp);

    if (result != 0)
    {
        printf("%s\n", out);
        return -1;
    }

    return 0;
} 
```

但它不适用于 insmod。

调用insmod时有什么方法可以拦截所有输出吗？

# asp.net - 更改第一项下拉列表

> ID：15495713
> 
> 赞同：1
> 
> 时间：2013-03-19T09:30:55.690
> 
> 标签：asp.net, data-binding

我有一个数据绑定的下拉列表，但我想更改第一个值。
但这不起作用

```
var Movies = Directory
                             .GetFiles(MapPath("~\\Movies\\" ), "*.mp4")
                             .Select(p => Path.GetFileNameWithoutExtension(p))
                             .ToArray();

                Dropdownlist1.DataSource = Movies;
                Dropdownlist1.DataBind();
                Dropdownlist1.Items[0].Value = "Choose one"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:36:02.597

您可能正在尝试在下拉项的零索引处插入新值，您需要使用`Dropdownlist1.Items.Insert`在第一个位置添加元素。

```
Dropdownlist1.DataSource = Movies;
Dropdownlist1.DataBind();
Dropdownlist1.Items.Insert(0, new ListItem("Choose one", "Choose one")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:36:11.453

只需在下拉列表中将 AppendDataBoundItems 属性设置为 true。然后在您的 aspx 代码中添加一个新的列表项，例如

```
 <asp:DropDownList ID="ddlInstallTypes" runat="server" 
            DataSourceID="odsTreatyInstallTypes" DataTextField="DisplayText" AppendDataBoundItems="true"
            DataValueField="Value"> <asp:ListItem Text="- Select -" Value="0"></asp:ListItem>
        </asp:DropDownList> 
```

这样一个新的列表项将被添加到顶部的列表中。

# google-maps - 将按钮添加到 infoWindow

> ID：15495719
> 
> 赞同：0
> 
> 时间：2013-03-19T09:31:06.447
> 
> 标签：google-maps, button, google-maps-api-3, kml, infowindow

我正在使用 geoxml inn 来解析包含点数的 kml 文件。每个标记都有一个包含一些信息的信息窗口。现在我想要为每个信息窗口添加一个按钮，然后单击我将能够在文本框中显示该特定信息窗口中的信息。

现在我的问题是我怎样才能添加这样的按钮，点击我会得到信息窗口的信息？

以下是信息窗口的图像：

![在此处输入图像描述](../Images/dbf018af57c20167b1156580e5113e6d.png)

这是我到目前为止所做的代码：

```
 function initialize() {

                var mapOptions = {
                    center: new google

.maps.LatLng(35.898737028438, 14.5133403246687),
                zoom: 17,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            infowindow = new google.maps.InfoWindow({});

        }

        function displayKml() {
            initialize();

            parser = new geoXML3.parser({
                map: map,
                infoWindow: infowindow,
                singleInfoWindow: true,
                zoom: true,
                markerOptions: { optimized: false }
             });
            parser.parse("Uploads/" + document.getElementById('<%= text2.ClientID %>').value);

        } 
```

kml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>route</name>
    <Placemark>
      <name>188</name>
      <description>museum</description>
      <Point>
        <coordinates>14.5104009086433,35.8994513796904</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>196</name>
      <description>museum</description>
      <Point>
        <coordinates>14.5105859971021,35.8991906966932</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>349</name>
      <description>museum</description>
      <Point>
        <coordinates>14.5126379237713,35.8969782492105</coordinates>
      </Point>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:35:48.560

一种方法：覆盖 createMarker 函数：

```
function displayKml() {
    geo = new geoXML3.parser({
        map: map,
        zoom: true,
        singleInfoWindow: true,
        infoWindow: infowindow,
        createMarker: createMarker 
    });
    geo.parse(document.getElementById('kmlFile').value);
}

function createMarker(placemark, doc) {
  // create a Marker to the map from a placemark KML object

    // Load basic marker properties
    var markerOptions = {
      map: map,
      position: new google.maps.LatLng(placemark.Point.coordinates[0].lat, placemark.Point.coordinates[0].lng),
      title:    placemark.name,
      zIndex:   Math.round(placemark.Point.coordinates[0].lat * -100000)<<5,
      icon:     placemark.style.icon,
      shadow:   placemark.style.shadow 
    };

    // Create the marker on the map
    var marker = new google.maps.Marker(markerOptions);
    if (!!doc) {
      // doc.markers.push(marker);
    }

    // Set up and create the infowindow
    var infoWindowOptions = {
      content: '<div class="geoxml3_infowindow"><h3>' + placemark.name + 
               '</h3><div>' + placemark.description + '</div>'+
               '<input type="button" onclick="displayInfo(\''+placemark.name+'\',\''+placemark.description+'\');" value="populate div"></input>',
      pixelOffset: new google.maps.Size(0, 2)
    };
    infowindow.setOptions(infoWindowOptions);
    marker.infoWindowOptions = infoWindowOptions;
    marker.infoWindow = infowindow;
    // Infowindow-opening event handler
    google.maps.event.addListener(marker, 'click', function() {
      this.infoWindow.close();
      marker.infoWindow.setOptions(this.infoWindowOptions);
      this.infoWindow.open(this.map, this);
    });
    placemark.marker = marker;
    return marker;
} 
```

添加一个函数以在外部 div 中显示数据：

```
function displayInfo(name,description){
  document.getElementById('info').innerHTML = name+"<br>"+description;
} 
```

[工作示例](http://www.geocodezip.com/geoxml3_test/v3_simpleMap_geoxml3_button.html)

# assembly - FMUL 不会清除 STATUS 寄存器中的溢出

> ID：15495720
> 
> 赞同：2
> 
> 时间：2013-03-19T09:31:08.153
> 
> 标签：assembly, floating-point, x86, x87

我有这个 Win32 代码：

```
fld x
fmul y
fstsw ax 
```

似乎`fmul`没有清除 FPU 状态寄存器位，即如果溢出已经设置（`ax`& 8），那么它将在之后保持设置`fmul`。这是正确的行为吗？是否需要在 FPU 操作之后或之前清除状态？

即我想`fmul`会设置这个位，但它应该重置它吗？我在网上找不到答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T09:40:00.890

你敢打赌这是正确的行为。

来自`8.1.3.3 x87 FPU Floating-Point Exception Flags`，`Intel® 64 and IA-32 Architectures Software Developer’s Manual`第 1 卷：

> 异常标志是“粘性”位（一旦设置，它们将保持设置直到明确清除）。它们可以通过执行 FCLEX/FNCLEX（清除异常）指令、使用 FINIT/FNINIT 或 FSAVE/FNSAVE 指令重新初始化 x87 FPU 或使用 FRSTOR 或 FLDENV 指令覆盖标志来清除。

如果禁用 FPU 异常，则不需要重置这些标志。

# wordpress - do_action / add_action 多次触发

> ID：15495727
> 
> 赞同：0
> 
> 时间：2013-03-19T09:31:28.517
> 
> 标签：wordpress

试图弄清楚我做错了什么。我正在尝试在 wordpress 初始化时将一行插入到 db 中。

所以，我在做：

```
<?php
add_action( 'demo_init', 'demo_do', 1 );
do_action( 'demo_init');

function demo_do(){
  # print(did_action( 'demo_init' )); # = 1 time called
  ### some more code ###
  global $wpdb;
  $wpdb->demo_log   = $wpdb->prefix . 'demo_log';
  $result = $wpdb->insert( $wpdb->demo_log, array( 'date' => $event['date'], 'ip' => $event['ip']));
} 
```

这给了我 2 - 4 条记录同一事件的记录。试图使用“init”/“send_headers”钩子或全局变量来计算函数的运行次数，但一切都适用于每次运行都是唯一的......

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:54:47.543

尝试`init`直接挂钩：

```
function demo_do(){
  #Your function
}

add_action('init', 'demo_do'); 
```

# javascript - 在此 Date 函数中添加 Days 有什么问题？

> ID：15495728
> 
> 赞同：1
> 
> 时间：2013-03-19T09:31:28.713
> 
> 标签：javascript, date

这是我的代码：

```
var dat = new Date("24/03/2013");
dat.setDate(dat.getDate() + 7);
console.log(dat) 
```

但它打印`Tue Jan 06 2015 00:00:00 GMT+0100`？

日期错误：应该是 2013 年 3 月 31 日（我想以这种格式打印）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:38:58.403

我的浏览器（Chrome）打印“无效日期”，但显然您的以 mm/dd/yyyy 格式而不是 dd/mm/yyyy 格式解释初始化日期。因此它认为它是 2013 年 24 月的第 3 天，即 2015 年 1 月 3 日。

我不确定如果您添加 7 天，它为什么会在 1 月 6 日打印出来。

最安全的方法是明确给出数字：

```
var dat = new Date( 2013, 2, 24 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:38:00.140

将日期格式更改为月份*之后*的日期：

```
var dat = new Date("03/24/2013");
dat.setDate(dat.getDate() + 7);
console.log(dat) 
```

对我来说，这会返回：

```
Sun Mar 31 2013 00:00:00 GMT+0000 (GMT Standard Time) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:49:32.400

您应该首先给出月份编号。然后你会得到正确的答案

试试这个代码

```
var dat = new Date("03/24/2013");
dat.setDate(dat.getDate() + 7);
var curr_date = dat.getDate();
var curr_month = dat.getMonth() + 1; //Months are zero based
var curr_year = dat.getFullYear();
console.log(curr_date + "/" + curr_month + "/" + curr_year); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:33:25.590

您应该在添加七个*之前*打印出您的日期。我怀疑它被设置为 2013 年第 24 个月的第 3^天，这相当于接近 2015 年 1 月的某个地方。

这就是为什么您的日期比当前日期提前了很多。为什么它给你 6 ^(th) of January 而不是 10 ^(th)，我不确定，但你可以通过将输入字符串更改为美国格式`mm/dd/yyyy`或使用[更明确的构造函数来修复它，不会被误解](http://www.w3schools.com/jsref/jsref_obj_date.asp)：

```
var d = new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:44:31.740

试试这个！！！

```
var aDate = new Date(2013,3,24);
        aDate.setDate(aDate.getDate() + 7); 
        var dateString = aDate.getDate() + "-" + aDate.getMonth() + "-" + aDate.getFullYear(); 
        alert(dateString); 
```

# python - 在字符串中查找第一个非重复字符的最佳方法

> ID：15495731
> 
> 赞同：10
> 
> 时间：2013-03-19T09:31:40.053
> 
> 标签：python, algorithm

为像这样的字符串找到第一个非重复字符的最佳空间和时间效率解决方案是`aabccbdcbe`什么？

这里的答案是d。所以让我印象深刻的一点是，它可以通过两种方式完成：

1.  对于每个索引，我循环 i-1 次并检查该字符是否再次出现。但这不是有效的：这种方法的增长是 O(N^2) 其中 N 是字符串的长度。
2.  另一种可能的好方法是，如果我可以形成一棵树或任何其他 ds，以便我可以根据权重（出现次数）对角色进行排序。这可能只需要我一个长度为 N 的循环通过字符串来形成结构。这只是 O(N) + O（构建树或任何 ds 的时间）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T17:34:56.650

这是一个非常简单的`O(n)`解决方案：

```
def fn(s):
  order = []
  counts = {}
  for x in s:
    if x in counts:
      counts[x] += 1
    else:
      counts[x] = 1 
      order.append(x)
  for x in order:
    if counts[x] == 1:
      return x
  return None 
```

我们遍历字符串一次。当我们遇到一个新字符时，我们将其存储`counts`为`1`，并将其附加到`order`。当我们遇到以前见过的字符时，我们会在`counts`. 最后，我们循环`order`直到找到一个值为`1`in的字符`counts`并返回它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T09:40:11.227

如果字符只出现一次，列表推导会按照它们出现的顺序为您提供字符：

```
In [61]: s = 'aabccbdcbe'

In [62]: [a for a in s if s.count(a) == 1]
Out[62]: ['d', 'e'] 
```

然后只返回这个的第一个条目：

```
In [63]: [a for a in s if s.count(a) == 1][0]
Out[63]: 'd' 
```

如果您只需要第一个条目，生成器也可以工作：

```
In [69]: (a for a in s if s.count(a) == 1).next()
Out[69]: 'd' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-19T10:03:51.517

我认为从字符串中删除重复字符可能会显着减少操作次数。例如：

```
s = "aabccbdcbe"
while s != "":
    slen0 = len(s)
    ch = s[0]
    s = s.replace(ch, "")
    slen1 = len(s)
    if slen1 == slen0-1:
        print ch
        break;
else:
    print "No answer" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-19T13:36:49.527

搜索速度取决于几个因素：

*   字符串的长度
*   之前没有一次性字符的位置
*   此位置之后的字符串大小
*   字符串中出现的不同字符的数量

.

在下面的代码中，我首先在 两个字符串`s`
的帮助下定义了一个字符串`random.choice()`和一组名为 的一次性出现的字符`unik` ，并将其连接起来： 其中：
`s1``s2``s1 + s2`

*   `s1`是一个长度字符串，`nwo`其中没有任何一次性出现的字符
*   `s2`是一个长度字符串，`nwi`其中有一次性出现的字符

.

```
#### creation of s from s1 and s2 #########

from random import choice

def without(u,n):
    letters = list('abcdefghijklmnopqrstuvwxyz')
    for i in xrange(n):
        c = choice(letters)
        if c not in unik:
            yield c

def with_un(u,n):
    letters = list('abcdefghijklmnopqrstuvwxyz')
    ecr = []
    for i in xrange(n):
        c = choice(letters)
        #ecr.append('%d %s  len(letters) == %d' % (i,c,len(letters)))
        yield c
        if c in unik:
            letters.remove(c)
    #print '\n'.join(ecr)

unik = 'ekprw'
nwo,nwi = 0,500
s1 = ''.join(c for c in without(unik,nwo))
s2 = ''.join(c for c in with_un(unik,nwi))
s = s1 + s2

if s1:
    print '%-27ss2 : %d chars' % ('s1 : %d chars' % len(s1),len(s2))
    for el in 'ekprw':
        print ('s1.count(%s) == %-12ds2.count(%s) == %d'
               % (el,s1.count(el),el,s2.count(el)))
    others = [c for c in 'abcdefghijklmnopqrstuvwxyz' if c not in unik]
    print 's1.count(others)>1 %s' % all(s1.count(c)>1 for c in others)
else:
    print "s1 == ''     len(s2) == %d" % len(s2)
    for el in 'ekprw':
        print ('   -         s2.count(%s) == %d'
               % (el,s2.count(el)))
print 'len of s  == %d\n' % len(s) 
```

然后是基准测试。
改变数字`nwo`，`nwi`我们可以看到对速度的影响：

```
### benchmark of three solutions #################

from time import clock

# Janne Karila
from collections import Counter, OrderedDict
class OrderedCounter(Counter, OrderedDict):
    pass
te = clock()
c = OrderedCounter(s)
rjk = (item for item, count in c.iteritems() if count == 1).next()
tf = clock()-te
print 'Janne Karila  %.5f    found: %s' % (tf,rjk)

# eyquem
te = clock()
candidates = set(s)
li = []
for x in s:
    if x in candidates:
        li.append(x)
        candidates.remove(x)
    elif x in li:
        li.remove(x)
rey = li[0]
tf = clock()-te
print 'eyquem        %.5f    found: %s' % (tf,rey)

# TyrantWave
te = clock()
rty = (a for a in s if s.count(a) == 1).next()
tf = clock()-te
print 'TyrantWave    %.5f    found: %s' % (tf,rty) 
```

.

一些结果

对于`s1`空长度，nwo = 0 和 nwi = 50：

```
s1 == ''     len(s2) == 50
   -         s2.count(e) == 1
   -         s2.count(k) == 1
   -         s2.count(p) == 1
   -         s2.count(r) == 1
   -         s2.count(w) == 1
len of s  == 50

Janne Karila  0.00077    found: e
eyquem        0.00013    found: e
TyrantWave    0.00005    found: e 
```

TyrantWave 的解决方案更快，因为第一个出现的字符会在字符串的第一个位置快速找到

.

使用 nwo = 300 和 nwi = 50
（以下为 401 个字符，`s1`因为在构造 of 期间未保留一次性出现的字符`s1`，请参阅函数 without() ）

```
s1 : 245 chars             s2 : 50 chars
s1.count(e) == 0           s2.count(e) == 1
s1.count(k) == 0           s2.count(k) == 1
s1.count(p) == 0           s2.count(p) == 1
s1.count(r) == 0           s2.count(r) == 1
s1.count(w) == 0           s2.count(w) == 1
s1.count(others)>1 True
len of s  == 295

Janne Karila  0.00167    found: e
eyquem        0.00030    found: e
TyrantWave    0.00042    found: e 
```

这次 TyrantWave 的解决方案比我的要长，因为它必须计算第一部分中所有字符的出现次数，`s`也就是说`s1`其中没有一次性出现的字符（它们在第二部分中`s2`）
但是，要用我的解决方案获得更短的时间，`nwo`需要明显大于`nwi`

.

nwo = 300 和 nwi = 5000

```
s1 : 240 chars             s2 : 5000 chars
s1.count(e) == 0           s2.count(e) == 1
s1.count(k) == 0           s2.count(k) == 1
s1.count(p) == 0           s2.count(p) == 1
s1.count(r) == 0           s2.count(r) == 1
s1.count(w) == 0           s2.count(w) == 1
s1.count(others)>1 True
len of s  == 5240

Janne Karila  0.01510    found: p
eyquem        0.00534    found: p
TyrantWave    0.00294    found: p 
```

如果增加了长度`s2`，那么 TyrantWave 的解决方案又会更好。

.

总结你想要的

.

### 编辑

罗马的好主意！
我在基准测试中添加了 Roman 的解决方案，它赢了！

我还做了一些微小的修改来改进他的解决方案。

```
# Roman Fursenko
srf = s[:]
te = clock()
while srf != "":
    slen0 = len(srf)
    ch = srf[0]
    srf = srf.replace(ch, "")
    slen1 = len(srf)
    if slen1 == slen0-1:
        rrf = ch
        break
else:
    rrf = "No answer"
tf = clock()-te
print 'Roman Fursenko %.6f    found: %s' % (tf,rrf)

# Roman Fursenko improved
srf = s[:]
te = clock()
while not(srf is ""):
    slen0 = len(srf)
    srf = srf.replace(srf[0], "")
    if len(srf) == slen0-1:
        rrf = ch
        break
else:
    rrf = "No answer"
tf = clock()-te
print 'Roman improved %.6f    found: %s' % (tf,rrf)

print '\nindex of %s in the string :  %d' % (rty,s.index(rrf)) 
```

.

结果是：

.

```
s1 == ''     len(s2) == 50
   -         s2.count(e) == 1
   -         s2.count(k) == 1
   -         s2.count(p) == 1
   -         s2.count(r) == 1
   -         s2.count(w) == 1
len of s  == 50

Janne Karila   0.0032538    found: r
eyquem         0.0001249    found: r
TyrantWave     0.0000534    found: r
Roman Fursenko 0.0000299    found: r
Roman improved 0.0000263    found: r

index of r in the string :  1 
```

```
s1 == ''     len(s2) == 50
   -         s2.count(e) == 1
   -         s2.count(k) == 0
   -         s2.count(p) == 1
   -         s2.count(r) == 1
   -         s2.count(w) == 1
len of s  == 50

Janne Karila   0.0008183    found: a
eyquem         0.0001285    found: a
TyrantWave     0.0000550    found: a
Roman Fursenko 0.0000433    found: a
Roman improved 0.0000391    found: a

index of a in the string :  4 
```

>

```
s1 : 240 chars             s2 : 50 chars
s1.count(e) == 0           s2.count(e) == 1
s1.count(k) == 0           s2.count(k) == 0
s1.count(p) == 0           s2.count(p) == 1
s1.count(r) == 0           s2.count(r) == 1
s1.count(w) == 0           s2.count(w) == 1
s1.count(others)>1 True
len of s  == 290

Janne Karila   0.0016390    found: e
eyquem         0.0002956    found: e
TyrantWave     0.0004112    found: e
Roman Fursenko 0.0001428    found: e
Roman improved 0.0001277    found: e

index of e in the string :  242 
```

```
s1 : 241 chars             s2 : 5000 chars
s1.count(e) == 0           s2.count(e) == 1
s1.count(k) == 0           s2.count(k) == 1
s1.count(p) == 0           s2.count(p) == 1
s1.count(r) == 0           s2.count(r) == 1
s1.count(w) == 0           s2.count(w) == 1
s1.count(others)>1 True
len of s  == 5241

Janne Karila   0.0148231    found: r
eyquem         0.0053283    found: r
TyrantWave     0.0030166    found: r
Roman Fursenko 0.0007414    found: r
Roman improved 0.0007230    found: r

index of r in the string :  250 
```

感谢 Roman 的代码，我学到了一些东西：
`s.replace()`创建一个新字符串，因此我认为这是一种缓慢的方法。
但是，我不知道是什么原因，这是一种非常快速的方法。

.

### 编辑 2

Oin 的解决方案是最糟糕的：

```
# Oin
from operator import itemgetter
seen = set()
only_appear_once = dict()
te = clock()
for i, x in enumerate(s):
  if x in seen and x in only_appear_once:
    only_appear_once.pop(x)
  else:
    seen.add(x)
    only_appear_once[x] = i
  fco = min(only_appear_once.items(),key=itemgetter(1))[0]
tf = clock()-te
print 'Oin            %.7f    found: %s' % (tf,fco) 
```

结果

```
s1 == ''     len(s2) == 50
Oin            0.0007124    found: e
Janne Karila   0.0008057    found: e
eyquem         0.0001252    found: e
TyrantWave     0.0000712    found: e
Roman Fursenko 0.0000335    found: e
Roman improved 0.0000335    found: e

index of e in the string :  2

s1 : 237 chars             s2 : 50 chars
Oin            0.0029783    found: k
Janne Karila   0.0014714    found: k
eyquem         0.0002889    found: k
TyrantWave     0.0005598    found: k
Roman Fursenko 0.0001458    found: k
Roman improved 0.0001372    found: k

index of k in the string :  246

s1 : 236 chars             s2 : 5000 chars
Oin            0.0801739    found: e
Janne Karila   0.0155715    found: e
eyquem         0.0044623    found: e
TyrantWave     0.0027548    found: e
Roman Fursenko 0.0007255    found: e
Roman improved 0.0007199    found: e

index of e in the string :  244 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-19T10:09:21.053

`collections.Counter`有效计数（*）并`collections.OrderedDict`记住第一次看到项目的顺序。让我们使用多重继承来组合好处：

```
from collections import Counter, OrderedDict

class OrderedCounter(Counter, OrderedDict):
    pass

def first_unique(iterable):
    c = OrderedCounter(iterable)
    for item, count in c.iteritems():
        if count == 1:
            return item

print first_unique('aabccbdcbe')
#d            
print first_unique('abccbdcbe')            
#a 
```

`Counter`使用它的超类`dict`来存储计数。定义方法解析顺序之间的`class OrderedCounter(Counter, OrderedDict)`插入，增加记住插入顺序的能力。`OrderedDict``Counter``dict`

(*) 从这个意义上说，这是 O(n) 和高效的，但不是最快的解决方案，如基准所示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T10:04:20.233

这是一种使用`good`一组字符和`bad`一组字符（出现多次）的方法：

```
import timeit
import collections
import operator
import random

s = [chr(i) for i in range(ord('a'), ord('z')) for j in range(100)] + ['z']

random.shuffle(s)
s = ''.join(s)

def good_bad_sets(s):
    setbad = set()
    setgood = set()
    for char in s:
        if(char not in setbad):
            if(char in setgood):
                setgood.remove(char)
                setbad.add(char)
            else:
                setgood.add(char)
    return s[min([s.index(char) for char in setgood])] if len(s) > 0 else None

def app_once(s):
    seen = set()
    only_appear_once = set()
    for i in s:
      if i in seen:
        only_appear_once.discard(i)
      else:
        seen.add(i)
        only_appear_once.add(i)
    return s[min([s.index(char) for char in only_appear_once])] if len(only_appear_once) > 0 else None

print('Good bad sets: %ss' % timeit.Timer(lambda : good_bad_sets(s)).timeit(100))
print('Oin\'s approach: %ss' % timeit.Timer(lambda : app_once(s)).timeit(100))
print('LC: %ss' % timeit.Timer(lambda : [a for a in s if s.count(a) == 1][0]).timeit(100)) 
```

我将它与 LC 方法进行了比较，大约 50 个字符，`good`并且`bad`设置方法变得更快。这种方法与[Oin](https://stackoverflow.com/a/15496238/1974792)与 LC 的比较：

```
Good bad sets: 0.0419239997864s
Oin's approach: 0.0803039073944s
LC: 0.647999048233s 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-19T09:56:18.137

所以从问题的定义来看，很明显你需要一个 O(n) 的解决方案，这意味着只遍历列表一次。所有使用计数形式的解决方案都是错误的，因为它们在该操作中再次遍历列表。因此，您需要自己跟踪计数。

如果您在该字符串中只有字符，那么您无需担心存储，您可以将字符用作字典中的键。该 dict 中的值将是字符串 s 中字符的索引。最后，我们必须通过计算字典值的最小值来查看哪个是第一个。这是一个（可能）比第一个更短的列表上的 O(n) 操作。

总数仍为 O(c*n)，因此为 O(n)。

```
from operator import itemgetter

seen = set()
only_appear_once = dict()

for i, x in enumerate(s):
  if x in seen and x in only_appear_once:
    only_appear_once.pop(x)
  else:
    seen.add(x)
    only_appear_once[x] = i

first_count_of_one = only_appear_once[min(only_appear_once.values(), key=itemgetter(1))] 
```

# html - 根据屏幕大小防止下载不必要的内容

> ID：15495732
> 
> 赞同：5
> 
> 时间：2013-03-19T09:31:41.450
> 
> 标签：html, css, responsive-design, modx-revolution

我正在建立一个响应式网站，上面有一个新闻部分。根据访问者屏幕大小，此部分有 2、3 或 4 个新闻项目。目前，cms (modx) 总是提供 4 个新闻项目，如果用户应该有一个小的视口，我会用媒体查询隐藏额外的新闻项目。

这似乎不是很有效（它为小屏幕的人使用了额外的带宽）。同样使用上述方法，我遇到了“较新帖子”，“较旧帖子”类型导航的问题（因为单击“旧帖子”总是会加载 4 个旧帖子，而有些人可能只需要 2 或 3 个）。

有没有更好、更可靠的方法来做到这一点？是否有可能使新闻项目的服务更具响应性？换句话说：如何根据屏幕大小防止下载不必要的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:40:30.477

一种方法是对你正在做的事情采取相反的路线：生成只有 1 个新闻项目的页面，然后在必要时填充更多（而不是生成 4 个然后隐藏它们）

您可以检测用户的视口是否允许使用 JS 显示更多故事，然后使用 ajax 获取它们（同时可能还有“加载更多..”动画）。

这样，移动用户的带宽就不会用完，并且对于非 JS 用户它也降级为 1 个新闻故事（您还可以通过“点击查看更多”链接为非 JS 用户提供大视口）

# eclipse - Eclipse Juno pom 编辑器底部选项卡不可见

> ID：15495743
> 
> 赞同：1
> 
> 时间：2013-03-19T09:32:06.583
> 
> 标签：eclipse, tabs, editor, pom.xml, eclipse-juno

我从 Eclipse Indigo 切换到 Juno，我遇到了一个非常恼人的问题。当我打开一个 pom 编辑器时，主窗口下的选项卡是不可见的（这些带有依赖层次结构等）。同样的事情是当我使用 JPDL 编辑器时......有没有人有同样的问题并且知道解决方案？我的操作系统是 Ubuntu 12.04，我使用的是经典的 Ubuntu 主题。当我在 Eclipse 中使用 CSS spy 时，选项卡以红色突出显示，但没有显示。

# android - Phonegap - Android - localStorage 数据丢失

> ID：15495745
> 
> 赞同：3
> 
> 时间：2013-03-19T09:32:12.547
> 
> 标签：android, cordova, local-storage

我使用 Phonegap 编写了一个 Android 应用程序，它在“离线”时将数据存储在 localStorage 中，并允许用户在 GSM 或 WiFi 可用时上传数据。

一切 [通常] 运行良好，我已经在各种手机和平板电脑以及从 Gingerbread 到 JellyBean 的多个 Android 版本上进行了测试，并且该应用程序已在试用期间被多个人使用。但是我有两次在运行 Honeycomb 的摩托罗拉 XOOM2 ME 上，所有 localStorage 数据突然无缘无故消失。

问题#1：其他人有这个问题，对原因有什么想法吗？

问题 #2：数据是否仍在设备上的某个地方，如果是，是否可以访问？

任何线索/帮助都会很棒。

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:24:48.897

如果您发现使用它有任何困难，请使用 sqlite 数据库进行离线使用而不是 localStorage

# mpi - MPI Fox的算法非阻塞发送和接收

> ID：15495749
> 
> 赞同：0
> 
> 时间：2013-03-19T09:32:25.977
> 
> 标签：mpi

我是 MPI 的新手，我正在尝试编写 Fox 算法的实现（AxB=C，其中 A 和 B 是维度 nxn 的矩阵）。我的程序运行良好，但我想看看我是否可以通过在矩阵 B 中的块移动期间与乘积矩阵的计算重​​叠通信来特别加速它（B 的块矩阵在算法）。根据算法，二维笛卡尔网格中的每个进程都有一个来自矩阵 A、B 和 C 的块。我目前拥有的是这个，它在 Fox 的算法中

```
if (stage > 0){  

   //shifting b values in all proccess

    MPI_Bcast(a_temp, n_local*n_local, MPI_DOUBLE, (rowID + stage) % q , row_comm);
    MPI_Isend(b, n_local*n_local, MPI_DOUBLE, nbrs[UP], 111, grid_comm,&my_request1);   
    MPI_Irecv(b, n_local*n_local, MPI_DOUBLE, nbrs[DOWN], 111, grid_comm,&my_request2);                         
    MPI_Wait(&my_request1, &status);
    MPI_Wait(&my_request2, &status);
    multiplyMatrix(a_temp,b,c,n_local);
} 
```

子矩阵 a_temp、b、b_temp 是指向块 n/numprocess*n/numprocesses 的 double 类型的指针（这是块矩阵的大小，例如 b = (double *) calloc(n/numprocess*n/numprocesses, sizeof （双倍的）） ）。

我想在 MPI_Wait 调用之前使用 multiplyMatrix 函数（这将构成通信和计算的重叠），但我不知道该怎么做。我是否需要有两个单独的缓冲区并在不同阶段交替使用它们？

（我知道我可以使用 MPI_Sendrecv_replace 但这对重叠没有帮助，因为它使用阻塞发送和接收。MPI_Sendrecv 也是如此）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:43:06.147

我实际上想出了如何做到这一点。这个问题可能应该被删除。但是由于我是 MPI 的新手，所以我会在这里发布这些解决方案，如果有人有改进建议，我会很高兴他们分享。方法一：

```
// Fox's algorithm
 double * b_buffers[2];
 b_buffers[0] = (double *) malloc(n_local*n_local*sizeof(double));
 b_buffers[1] = b;
 for (stage =0;stage < q; stage++){
       //copying a into a_temp and Broadcasting a_temp of each proccess to all other proccess in its row
        for (i=0;i< n_local*n_local; i++)
            a_temp[i]=a[i];
        if (stage == 0) {
           MPI_Bcast(a_temp, n_local*n_local, MPI_DOUBLE, (rowID + stage) % q , row_comm);
           multiplyMatrix(a_temp,b,c,n_local);
           MPI_Isend(b, n_local*n_local, MPI_DOUBLE, nbrs[UP], 111, grid_comm,&my_request1);    
           MPI_Irecv(b, n_local*n_local, MPI_DOUBLE, nbrs[DOWN], 111, grid_comm,&my_request2);
           MPI_Wait(&my_request2, &status);
           MPI_Wait(&my_request1, &status);
      }

       if (stage > 0)
       {        
           //shifting b values in all procces
            MPI_Bcast(a_temp, n_local*n_local, MPI_DOUBLE, (rowID + stage) % q , row_comm);
            MPI_Isend(b_buffers[(stage)%2], n_local*n_local, MPI_DOUBLE, nbrs[UP], 111, grid_comm,&my_request1);    
            MPI_Irecv(b_buffers[(stage+1)%2], n_local*n_local, MPI_DOUBLE, nbrs[DOWN], 111, grid_comm,&my_request2);
                multiplyMatrix(a_temp, b_buffers[(stage)%2], c, n_local);           
            MPI_Wait(&my_request2, &status);
            MPI_Wait(&my_request1, &status);

     }      
} 
```

方法二：

```
// Fox's algorithm

 for (stage =0;stage < q; stage++){
       //copying a into a_temp and Broadcasting a_temp of each proccess to all other proccess in its row
        for (i=0;i< n_local*n_local; i++)
            a_temp[i]=a[i];
        if (stage == 0) {
           MPI_Bcast(a_temp, n_local*n_local, MPI_DOUBLE, (rowID + stage) % q , row_comm);
           multiplyMatrix(a_temp,b,c,n_local);
           MPI_Isend(b, n_local*n_local, MPI_DOUBLE, nbrs[UP], 111, grid_comm,&my_request1);    
           MPI_Irecv(b, n_local*n_local, MPI_DOUBLE, nbrs[DOWN], 111, grid_comm,&my_request2);
           MPI_Wait(&my_request2, &status);
           MPI_Wait(&my_request1, &status);
      }

       if (stage > 0)
       {        
           //shifting b values in all proccess
            memcpy(b_temp, b, n_local*n_local*sizeof(double));
                MPI_Bcast(a_temp, n_local*n_local, MPI_DOUBLE, (rowID + stage) % q , row_comm);
            MPI_Isend(b, n_local*n_local, MPI_DOUBLE, nbrs[UP], 111, grid_comm,&my_request1);   
                MPI_Irecv(b, n_local*n_local, MPI_DOUBLE, nbrs[DOWN], 111, grid_comm,&my_request2);
                multiplyMatrix(a_temp, b_temp, c, n_local);         
               MPI_Wait(&my_request2, &status);
                MPI_Wait(&my_request1, &status);

     } 
```

这两种方法似乎都有效，但正如我所说，我是 MPI 的新手，如果您有任何意见或建议，请分享。

# android - How to structure folders for resources and layouts for the same size device but different DisplayMetrics.densityDpi?

> ID：15495753
> 
> 赞同：1
> 
> 时间：2013-03-19T09:32:29.050
> 
> 标签：android

We are using two different tablets with following display specs:

**Tablet A:**

```
Screen size -- 7"; 480 x 800

Taskbar height -- 36px 
```

**Tablet B:**

```
Screen size -- 7"; 480 x 800
taskbar height -- 48px 
```

`DisplayMetrics.xdpi` and `DisplayMetrics.ydpi` for both tablets are same and equal to 160 and 160.42 respectively. However, `DisplayMetrics.densityDpi` for tablet A is being shown as DENSITY_LOW while for Tablet B it is being shown as DENSITY_MEDIUM. The folders (for drawables and layouts) accessed by the two tablets match the densityDpi values.

The questions are: 1) How can these two devices have different pixel density? 2) What is best way of structuring folders for resources and layouts in such a situation?

I find the second issue extremely confounding as a genuinely LDPI screen with a smaller size will access resources and layouts from the same folders as Tablet A but will, most probably, the result will be displayed badly.

# django - 带有来自模型的自定义验证消息的 Django 1.5 基于类的视图

> ID：15495755
> 
> 赞同：1
> 
> 时间：2013-03-19T09:32:44.667
> 
> 标签：django, django-templates, django-class-based-views, django-1.5

我正在我的 django 应用程序中编写一个相当简单的 CRUD 来进行项目管理。我有以下设置（为简洁起见，省略了各种进口等）：

```
#models.py:
class Project(models.Model):
    name = models.CharField('Name', max_length=250, error_messages={'required': 'Please enter a name for your project.'})
    description = models.TextField()

#views.py
class ProjectUpdateView(UpdateView):
    model = Project

#templates/projects/project_form.html
<form action="" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" />
</form> 
```

当我访问我的更新页面时，表单会显示我的两个字段（名称和描述）。如果我省略了名称，那么提交表单会返回一个错误

```
This field is required 
```

而不是

```
Please enter a name for your project. 
```

我可以显示模型中定义的自定义错误消息而不是通用的“此字段是必需的”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:41:08.863

这是一张关于您遇到的问题的 Django 票：[https ://code.djangoproject.com/ticket/13693](https://code.djangoproject.com/ticket/13693)

看起来它已被接受，但尚未修复。现在最好的选择是在表单类中显式处理验证。

# c++ - 如何找到文件夹内所有文件的大小？

> ID：15495756
> 
> 赞同：15
> 
> 时间：2013-03-19T09:32:44.780
> 
> 标签：c++, c++, windows, filesystems, directory

[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")中是否有任何 API用于获取指定文件夹的大小？

如果没有，我怎样才能得到一个文件夹的总大小，包括所有子文件夹和文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T11:14:30.210

让操作系统为你做这件事怎么样：

```
long long int getFolderSize(string path) 
{
    // command to be executed
    std::string cmd("du -sb ");
    cmd.append(path);
    cmd.append(" | cut -f1 2>&1");

    // execute above command and get the output
    FILE *stream = popen(cmd.c_str(), "r");
    if (stream) {
        const int max_size = 256;
        char readbuf[max_size];
        if (fgets(readbuf, max_size, stream) != NULL) {
            return atoll(readbuf);
        }   
        pclose(stream);            
    }           
    // return error val
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T14:06:07.833

> 其实我不想使用任何第三方库。只想用纯c++实现。

如果您使用 MSVC++，您将拥有[`<filesystem>`“作为标准 C++”。](http://msdn.microsoft.com/en-us/library/hh874694.aspx) 但是使用 boost 或 MSVC - 两者都是“纯 C++”。

如果您不想使用 boost，而只有 C++ std:: library 这个答案有点接近。正如您[**在此处看到的，有一个 Filesystem Library Proposal (Revision 4)**](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3505.html)。在这里你可以阅读：

> 该库的 Boost 版本已经广泛使用了十年。该库的 Dinkumware 版本基于 N1975（相当于 Boost 库的第 2 版），随 Microsoft Visual C++ 2012 一起提供。

为了说明使用，我改编了@Nayana Adassuriya的答案，做了非常小的修改（好吧，他忘了初始化一个变量，我使用了`unsigned long long`，最重要的是使用：`path filePath(complete (dirIte->path(), folderPath));`在调用其他函数之前恢复完整路径）。我已经测试过，它在 Windows 7 中运行良好。

```
#include <iostream>
#include <string>
#include <filesystem>
using namespace std;
using namespace std::tr2::sys;

void  getFoldersize(string rootFolder,unsigned long long & f_size)
{
   path folderPath(rootFolder);                      
   if (exists(folderPath))
   {
        directory_iterator end_itr;
        for (directory_iterator dirIte(rootFolder); dirIte != end_itr; ++dirIte )
        {
            path filePath(complete (dirIte->path(), folderPath));
           try{
                  if (!is_directory(dirIte->status()) )
                  {
                      f_size = f_size + file_size(filePath);                      
                  }else
                  {
                      getFoldersize(filePath,f_size);
                  }
              }catch(exception& e){  cout << e.what() << endl; }
         }
      }
    }

int main()
{
    unsigned long long  f_size=0;
    getFoldersize("C:\\Silvio",f_size);
    cout << f_size << endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T10:36:43.303

您可以通过这种方式使用 boost。您可以尝试更深入地优化它。

```
#include <iostream>
#include <string>
#include <boost/filesystem.hpp>
#include <boost/filesystem/operations.hpp>
#include <boost/algorithm/string.hpp>

    using namespace std;
    namespace bsfs = boost::filesystem; 

    void  getFoldersize(string rootFolder,long & file_size){
        boost::replace_all(rootFolder, "\\\\", "\\");   
        bsfs::path folderPath(rootFolder);                      
        if (bsfs::exists(folderPath)){
            bsfs::directory_iterator end_itr;

            for (bsfs::directory_iterator dirIte(rootFolder); dirIte != end_itr; ++dirIte )
            {
                bsfs::path filePath(dirIte->path());
                try{
                    if (!bsfs::is_directory(dirIte->status()) )
                    {

                        file_size = file_size + bsfs::file_size(filePath);                      
                    }else{
                        getFoldersize(filePath.string(),file_size);
                    }
                }catch(exception& e){               
                    cout << e.what() << endl;
                }
            }
        }

    }

    int main(){
        long file_size =0;
        getFoldersize("C:\\logs",file_size);
        cout << file_size << endl;
        system("pause");
        return 0;
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-19T09:36:00.357

[文件夹中文件的大小](http://www.daniweb.com/software-development/cpp/code/249201/how-to-get-size-of-all-files-in-a-directory) 请查看此链接

```
#include <iostream>
#include <windows.h>
#include <string>
using namespace std;

__int64 TransverseDirectory(string path)
{
    WIN32_FIND_DATA data;
    __int64 size = 0;
    string fname = path + "\\*.*";
    HANDLE h = FindFirstFile(fname.c_str(),&data);
    if(h != INVALID_HANDLE_VALUE)
    {
        do {
            if( (data.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) )
            {
                // make sure we skip "." and "..".  Have to use strcmp here because
                // some file names can start with a dot, so just testing for the 
                // first dot is not suffient.
                if( strcmp(data.cFileName,".") != 0 &&strcmp(data.cFileName,"..") != 0)
                {
                    // We found a sub-directory, so get the files in it too
                    fname = path + "\\" + data.cFileName;
                    // recurrsion here!
                    size += TransverseDirectory(fname);
                }

            }
            else
            {
                LARGE_INTEGER sz;
                // All we want here is the file size.  Since file sizes can be larger
                // than 2 gig, the size is reported as two DWORD objects.  Below we
                // combine them to make one 64-bit integer.
                sz.LowPart = data.nFileSizeLow;
                sz.HighPart = data.nFileSizeHigh;
                size += sz.QuadPart;

            }
        }while( FindNextFile(h,&data) != 0);
        FindClose(h);

    }
    return size;
}

int main(int argc, char* argv[])
{
    __int64 size = 0;
    string path;
    size = TransverseDirectory("c:\\dvlp");
    cout << "\n\nDirectory Size = " << size << "\n";
    cin.ignore();
    return 0;
} 
```

更多详情请点击[这里](http://www.daniweb.com/software-development/cpp/code/249201/how-to-get-size-of-all-files-in-a-directory)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-22T19:49:43.023

这样的事情会更好地避免添加符号（软）链接：

```
std::uintmax_t directorySize(const std::filesystem::path& directory)
{
    std::uintmax_t size{ 0 };
    for (const auto& entry : std::filesystem::recursive_directory_iterator(directory))
    {
        if (entry.is_regular_file() && !entry.is_symlink())
        {
            size += entry.file_size();
        }
    }
    return size;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T14:25:44.407

文件系统函数是每个操作系统的组成部分，主要是用 C 和汇编程序而不是 C++ 编写的，为此的每个 C++ 库实现都以某种方式封装了这些函数。考虑一下努力，如果您不会在不同的操作系统中使用您的实现，那么直接使用这些功能并节省一些开销和时间可能是一个好主意。

最好的祝福。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-25T13:43:24.620

我有我的类型定义文件：

```
typedef std::wstring String;
typedef std::vector<String> StringVector;
typedef unsigned long long uint64_t; 
```

代码是：

```
uint64_t CalculateDirSize(const String &path, StringVector *errVect = NULL, uint64_t size = 0)
{
    WIN32_FIND_DATA data;
    HANDLE sh = NULL;
    sh = FindFirstFile((path + L"\\*").c_str(), &data);

    if (sh == INVALID_HANDLE_VALUE )
    {
        //if we want, store all happened error  
        if (errVect != NULL)
            errVect ->push_back(path);
        return size;
    }

    do
    {
        // skip current and parent
        if (!IsBrowsePath(data.cFileName))
        {
            // if found object is ...
            if ((data.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) == FILE_ATTRIBUTE_DIRECTORY)
                // directory, then search it recursievly
                size = CalculateDirSize(path + L"\\" + data.cFileName, NULL, size);
            else
                // otherwise get object size and add it to directory size
                size += (uint64_t) (data.nFileSizeHigh * (MAXDWORD ) + data.nFileSizeLow);
        }

    } while (FindNextFile(sh, &data)); // do

    FindClose(sh);

    return size;
} 

bool IsBrowsePath(const String& path)
{
    return (path == _T(".") || path == _T(".."));
} 
```

如果需要，这使用 UNICODE 并返回失败的目录。

调用使用：

```
StringVector vect;
CalculateDirSize(L"C:\\boost_1_52_0", &vect);
CalculateDirSize(L"C:\\boost_1_52_0"); 
```

但永远不会通过`size`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-26T22:46:47.177

```
//use FAT32   
#undef UNICODE        // to flag window deactive unicode
#include<Windows.h>  //to use windows api
#include<iostream>
#include<iomanip>
#include<cstring>
#include<string>
#include<algorithm>
using namespace std;
#pragma pack(1)  //tell compiler do'nt do prag
struct BPB
{
BYTE            JMP[3];
BYTE            OEM[8];
WORD            NumberOfBytesPerSector;
BYTE            NumberOfSectorsPerCluster;
WORD            NumberOfReservedSectors;
BYTE            NumberOfFATs;
WORD            NumberOfRootEntries16;
WORD            LowNumbferOfSectors;
BYTE            MediaDescriptor;
WORD            NumberOfSectorsPerFAT16;
WORD            NumberOfSectorsPerTrack;
WORD            NumberOfHeads;
DWORD           NumberOfHiddenSectors;
DWORD           HighNumberOfSectors;

DWORD           NumberOfSectorsPerFAT32;
WORD            Flags;
WORD            FATVersionNumber;
DWORD           RootDirectoryClusterNumber;
WORD            FSInfoSector;
WORD            BackupSector;
BYTE            Reserver[12];
BYTE            BiosDrive;
BYTE            WindowsNTFlag;
BYTE            Signature;
DWORD           VolumeSerial;
BYTE            VolumeLabel[11];
BYTE            SystemID[8];
BYTE            CODE[420];
WORD            BPBSignature;
};
//-----------------------------------------------------------
struct DirectoryEntry
{
BYTE Name[11];
BYTE Attributes;
BYTE Reserved;
BYTE CreationTimeTenth;
WORD CreationTime;
WORD CreationDate;
WORD LastAccessTime;
WORD HiClusterNumber;
WORD WriteTime;
WORD WriteDate;
WORD LowClusterNumber;
DWORD FileSize;   //acual size of file
};
//---------------------------------------------------
void dirFunction(string s){
string path = "\\\\.\\" + s + ":";
HANDLE hFile = CreateFile(path.c_str(), GENERIC_READ|GENERIC_WRITE,
    FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, 0);//open partition 
BPB bootSector;//var from bootSector structure
DWORD readBytes = 0;
if (hFile == INVALID_HANDLE_VALUE)
{
    cout << "Error " << GetLastError()<<endl;
    return;
}
ReadFile(hFile, (BYTE*)&bootSector, sizeof(bootSector), &readBytes, 0);//read partition and load bootSector information inside our structure
LONG t = 0;
ULONG distance = bootSector.NumberOfReservedSectors +
    bootSector.NumberOfFATs*bootSector.NumberOfSectorsPerFAT32;//distance from begine until Root Directory or content of partetion
distance *= bootSector.NumberOfBytesPerSector;//convert distance number to bytes value

SetFilePointer(hFile, distance, &t, FILE_BEGIN);//set pointer to root directory begine or begine of data
int clusterSize = bootSector.NumberOfBytesPerSector*bootSector.NumberOfSectorsPerCluster; //cluster size 
int NumberOfEntries = clusterSize / sizeof(DirectoryEntry); //number of record inside cluster
DirectoryEntry*  root = new DirectoryEntry[NumberOfEntries];//descripe the partetion
ReadFile(hFile, (BYTE*)root, clusterSize, &readBytes, 0);
DWORD clusterNumber;
for (int i = 0; i < NumberOfEntries; i++)
{
    if (root[i].Name[0] == 0)//there no entery after this
        break;
    if (root[i].Name[0] == 0xE5)
        continue;
    if ((root[i].Attributes & 0xF) == 0xF)
        continue;
    for (int j = 0; j < 8; j++)
        cout << root[i].Name[j];
    if((root[i].Attributes & 0x10) != 0x10){
        cout<<".";
    for (int j = 8; j < 11; j++)
        cout << root[i].Name[j];
    }
    if ((root[i].Attributes & 0x10) == 0x10){
        cout << "\t<Folder>" ;
    }else{

        cout<<"\t<File>" ;
    }
    clusterNumber = root[i].HiClusterNumber << 16;
    clusterNumber |= root[i].LowClusterNumber;
    cout <<"\t"<<root[i].FileSize<<"bytes" << "\t" << clusterNumber<<"cluster" << endl;
}

CloseHandle(hFile);
}
//---------------------------------------------------------------
string convertLowerToUpper(string f){

string temp = "";
for (int i = 0; i < f.size(); i++){

    temp += toupper(f[i]);
}

return temp;
}
//---------------------------------------------------------------
string getFileName(BYTE filename[11]){
string name = "";
for (int i = 0; i < 8; i++){
    if (filename[i] != ' ')
        name += filename[i];
    }
return (name);

}
//------------------------------------------------------------------
int findEntryNumber(DirectoryEntry*  root, int NumberOfEntries, string required){
string n;
int j = 0;
for (int i = 0; i < NumberOfEntries; i++){

    if (strcmp((getFileName(root[i].Name).c_str()), convertLowerToUpper(required).c_str()) == 0){

        return i;
    }

}

return -1;
}
//---------------------------------------------------------------
void typeFunction(string fileName, string s){
string path = "\\\\.\\" + s + ":";
HANDLE hFile = CreateFile(path.c_str(), GENERIC_READ|GENERIC_WRITE,
    FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, 0);//open partition 
BPB bootSector;//var from bootSector structure
DWORD readBytes = 0;
if (hFile == INVALID_HANDLE_VALUE)
{
    cout << "Error " << GetLastError()<<endl;
    return;
}
ReadFile(hFile, (BYTE*)&bootSector, sizeof(bootSector), &readBytes, 0);//read partition and load bootSector information inside our structure
LONG t = 0;
ULONG distance = bootSector.NumberOfReservedSectors +
    bootSector.NumberOfFATs*bootSector.NumberOfSectorsPerFAT32;//distance from begine until Root Directory or content of partetion
distance *= bootSector.NumberOfBytesPerSector;//convert distance number to bytes value

SetFilePointer(hFile, distance, &t, FILE_BEGIN);//set pointer to root directory begine or begine of data
int clusterSize = bootSector.NumberOfBytesPerSector*bootSector.NumberOfSectorsPerCluster; //cluster size 
int NumberOfEntries = clusterSize / sizeof(DirectoryEntry); //number of record inside cluster
DirectoryEntry*  root = new DirectoryEntry[NumberOfEntries];//descripe the partetion
ReadFile(hFile, (BYTE*)root, clusterSize, &readBytes, 0);
DWORD clusterNumber;
int index = findEntryNumber(root, NumberOfEntries, fileName);
if (index == -1){

    cout << "File is not found" << endl;
    return;
}
if (((root[index].Attributes & 0x10) == 0x10) ){

    cout << "Is not file name" << endl;
    return;
}
clusterNumber = root[index].HiClusterNumber << 16;
clusterNumber |= root[index].LowClusterNumber;
ULONG temp = (clusterNumber - 2) * clusterSize;
distance += temp;
t = 0;
SetFilePointer(hFile, distance, &t, FILE_BEGIN);
BYTE* buffer = new BYTE[clusterSize];
readBytes = 0;

    ReadFile(hFile, (BYTE*)buffer, clusterSize, &readBytes, 0);

    for (int i = 0; i < root[index].FileSize; i++){

        cout << buffer[i];
    }

    cout << endl;
    CloseHandle(hFile);

}
 //----------------------------------------------------------------------
void delFunction(string filename, string s){
string path = "\\\\.\\" + s + ":";
HANDLE hFile = CreateFile(path.c_str(), GENERIC_READ|GENERIC_WRITE,
    FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, 0);//open partition 
BPB bootSector;//var from bootSector structure
DWORD readBytes = 0;
if (hFile == INVALID_HANDLE_VALUE)
{
    cout << "Error " << GetLastError()<<endl;
    return;
}
ReadFile(hFile, (BYTE*)&bootSector, sizeof(bootSector), &readBytes, 0);//read partition and load bootSector information inside our structure
LONG t = 0;
ULONG distance = bootSector.NumberOfReservedSectors +
    bootSector.NumberOfFATs*bootSector.NumberOfSectorsPerFAT32;//distance from begine until Root Directory or content of partetion
distance *= bootSector.NumberOfBytesPerSector;//convert distance number to bytes value

SetFilePointer(hFile, distance, &t, FILE_BEGIN);//set pointer to root directory begine or begine of data
int clusterSize = bootSector.NumberOfBytesPerSector*bootSector.NumberOfSectorsPerCluster; //cluster size 
int NumberOfEntries = clusterSize / sizeof(DirectoryEntry); //number of record inside cluster
DirectoryEntry*  root = new DirectoryEntry[NumberOfEntries];//descripe the partetion
ReadFile(hFile, (BYTE*)root, clusterSize, &readBytes, 0);
DWORD clusterNumber;
readBytes = 0;
t = 0;
int index = findEntryNumber(root, NumberOfEntries, filename);
if (index == -1){

    cout << "FIle is not found" << endl;
    return;
}
if ((root[index].Attributes & 0x10) == 0x10){

    cout << "Is not file name" << endl;
    return;
}

//delete file
root[index].Name[0] = 0xE5;
SetFilePointer(hFile, distance, &t, FILE_BEGIN);
WriteFile(hFile, (BYTE*)root, clusterSize, &readBytes, 0);
cout<<filename<<" is deleted\n";

CloseHandle(hFile);

}
//----------------------------------------------------------------------
string removeExtention(string s){

string t = "";

for (int i = 0; i < s.size(); i++){

    if (s[i] == '.')break;
    t += s[i];
}

return t;

}
//-------------------------------------------------------------------
void main()
{
string swich_value;
string directory;
string file_name;
//dirFunction("G");
cout<<"plz, Enter single Partition character ------> example E or G\n\n";
cin>>directory;
string path = "\\\\.\\" + directory + ":";
cout<<"current directory is "<<path<<endl;
cout<<"Enter Options: \n1- dir \n2- type file_name.extention \n3- del file_name.extention\n\n";
again:
cin>>swich_value;

if(swich_value.at(1)!='i')
    cin>>file_name;
string answer;
switch(swich_value.at(1)){  
case 'i':
    dirFunction(directory);
    cout<<"\nare  you want to do another process: y or n?";
    cin>>answer;
    if (answer.at(0)=='y')
        goto again;
    break;
case 'y':
    typeFunction(removeExtention(file_name), directory);
    cout<<"\nare  you want to do another process: y or n?";
    cin>>answer;
    if (answer.at(0)=='y')
        goto again;
    break;
case 'e':
    delFunction(removeExtention(file_name), directory);
    cout<<"\nare  you want to do another process: y or n?";
    cin>>answer;
    if (answer.at(0)=='y')
        goto again;
    break;

}
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-05T05:18:40.300

您可以使用**“boost::filesystem”**

```
#include <boost/filesystem.hpp>

namespace fs = boost::filesystem;

unsigned long long int get_directory_size(const fs::path& directory){
    if (!fs::exists(directory)) return 0;

    if (fs::is_directory(directory)){
        unsigned long long int ret_size = 0;
        fs::directory_iterator m_dir_itr(directory);

        for (m_dir_itr = fs::begin(m_dir_itr); m_dir_itr != fs::end(m_dir_itr); ++m_dir_itr){
            fs::directory_entry m_dir_entry = *m_dir_itr;
            if (fs::is_regular_file(m_dir_entry.path())){
                ret_size += fs::file_size(m_dir_entry.path());
            }else if (fs::is_directory(m_dir_entry.path())){
                ret_size += get_directory_size(m_dir_entry.path());
            }
        }

        return ret_size;
    } else if (fs::is_regular_file(directory)){
        return fs::file_size(directory);
    }

    return 0;
}

#include <stdio.h>

int main(int /*argc*/, char** /*argv*/) {
    // Assuming 'C:/Folder' be any directory then its size can be found using
    auto folder_size = get_directory_size("C:/Folder");
    printf("Size of 'C:/Folder' is %d\n",folder_size);
    return 0;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-27T11:49:24.127

随着 的引入`std::filesystem`，您不再需要使用任何系统 API 或任何外部库。

```
#include <filesystem>
namespace n_fs = ::std::filesystem;
double archive::getFolderSize(std::string path)
{
        double r = 0.0;
        try{
           if (!n_fs::is_directory(path))
           {
                r += (double)n_fs::file_size(path);
           }
           else
           {
                for(auto entry: n_fs::directory_iterator(path))
                getFolderSize(entry.path().string());
            }
        } 
        catch(exception& e)
        { 
            std::cout << e.what() << std::endl();
        }
        return r;
}

int main(){
    double folderSize = getFolderSize("~/dev/"); //Replace with your path
    std::cout << "Size of Folder: " << folderSize;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-19T10:54:18.480

尝试使用 GetFileSizeEx 函数。以下是一些示例代码。不过，您需要从 LARGE_INTEGER 联合中获取大小。

```
#include <iostream>
#include <windows.h>
#include <stdio.h>
#include <io.h>
using namespace std;
int main()
{
    FILE *fp;
    fp = fopen("C:\test.txt","r");
    int fileNo = _fileno(fp);
    HANDLE cLibHandle = (HANDLE)_get_osfhandle(fileNo);
    long int fileSize = 0;
    LARGE_INTEGER fileSizeL;
    GetFileSizeEx(cLibHandle, &fileSizeL);
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-08T17:16:07.957

5 年，而不是标准 C++ 的简单解决方案，这就是为什么我想为这个问题贡献我的解决方案：

```
uint64_t GetDirSize(const std::string &path)
{
    uint64_t size = 0;
    for (const auto & entry : std::experimental::filesystem::directory_iterator(path))
    {
        if(entry.status().type() == std::experimental::filesystem::file_type::regular)
            size += std::experimental::filesystem::file_size(entry.path());
        if (entry.status().type() == std::experimental::filesystem::file_type::directory)
            size += GetDirSize(entry.path().generic_string());
    }
    return size;
} 
```

例如， `GetDirSize("C:\\dir_name")` 如果您使用的是 Windows，请通过调用来使用它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-15T21:28:47.883

在 Windows 上计算文件夹大小（以字节为单位）。

```
size_t GetFolderSizeInBytes(std::wstring path)
{
    size_t result = 0;
    WIN32_FIND_DATA findData;
    HANDLE hFileHandle;
    std::wstring sourcePath(path);

    if (GetFileAttributes(sourcePath.c_str()) & FILE_ATTRIBUTE_DIRECTORY)
        sourcePath.push_back(L'\\');

    std::wstring fileName(sourcePath);
    fileName.append(L"*");

    hFileHandle = FindFirstFileEx(
            fileName.data(),
            FindExInfoStandard,
            &findData,
            FindExSearchNameMatch,
            NULL,
            FIND_FIRST_EX_ON_DISK_ENTRIES_ONLY);

    if (hFileHandle != INVALID_HANDLE_VALUE)
    {
        do
        {
            if (!wcscmp(findData.cFileName, L".") || !wcscmp(findData.cFileName, L".."))
                continue;

            if ((findData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) != 0)
            {
                // Folder
                std::wstring newPath = path + L"\\" + findData.cFileName;
                result += GetFolderSizeInBytes(newPath);
            }
            else
            {
                // File
                unsigned long high = findData.nFileSizeHigh;
                unsigned long low = findData.nFileSizeLow;
                size_t size = size_t(high * (MAXWORD + 1)) + low;
                result += size;
            }
        } while (FindNextFile(hFileHandle, &findData));

        FindClose(hFileHandle);
    }

    return result;
} 
```

# tidesdk - TideSDK 中的 UI.ImageView？

> ID：15495757
> 
> 赞同：0
> 
> 时间：2013-03-19T09:32:47.427
> 
> 标签：tidesdk

几年前，我一直在使用 Titanium Desktop 为 Mac 制作应用程序。很满意我最近又回到了另一个项目，但显然 Titanium Desktop 现在是 TideSDK。

查看参考资料，似乎很多东西都消失了，我主要期待 UI 中有更多元素，如 ScrollView、ImageView 等。

他们只是从这个新版本中消失了，还是没有完整记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:19:21.843

首先我需要明确一点，TideSDK 不是 Titanium Desktop。虽然它始于遗留代码，但已经提交了超过 100 万行代码更改，并且 SDK 已经存在近一年了。您会发现一个不同的命名空间但 API 兼容性。

代码库完全不同，并且一直在进行重大的重组和改进。也就是说，对于最终用户来说，它使用起来同样友好。我们不想回到过去讨论过去，因为我们提供了允许开发人员在当今现代操作系统上运行 TideSDK 的代码体。这只是 TideSDK 贡献者大量努力和持续开发的结果。如果您遇到任何问题，请将它们提交到我们在 github 上的问题跟踪器上。

# jquery - combining slideToggle successfully with min-height

> ID：15495760
> 
> 赞同：3
> 
> 时间：2013-03-19T09:32:56.620
> 
> 标签：jquery, slidetoggle, css

I currently have a nicely hidden section at the top of my site which slides down upon click. The animation works great with slideToggle but I'd also like the div to cover at least the window height.

I have managed to set the window height as a variable and alter the css to reflect this but combining it with the slideToggle makes the animation jumpy.

```
jQuery(document).ready(function($) {
  var win = $(window).height();
  $("#hidden").css("min-height", win);
  $("a#toggle").click(function() {
   var txt = $("#hidden").is(':visible') ? 'Show' : 'Hide';
   $("#toggle").text(txt);
   $("#hidden").slideToggle(500);
  });
}); 
```

Here is a fiddle [http://jsfiddle.net/HZACf/](http://jsfiddle.net/HZACf/)

If you remove the first two lines of the jQuery, it slides as normal.

Thanks for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:38:43.913

尝试`animate`：

```
jQuery(document).ready(function ($) {
    var $hidden = $("#hidden"),
    currentHeight = $hidden.height(),
    newHeight = $(window).height();

    newHeight = (currentHeight > newHeight) ? currentHeight : newHeight;

    $("#hidden").css("height", newHeight);

    $("a#toggle").click(function () {
        var txt = $("#hidden").is(':visible') ? 'Show' : 'Hide';
        $("#toggle").text(txt);
        $("#hidden").animate({
            height : "toggle"
        }, 500);
    });
}); 
```

我已经使用过`animate`，但您可以使用`slideToggle`，因为我们现在只处理元素`height`。

[在这里](http://jsfiddle.net/HZACf/4/)提琴

# jquery - jquery, my variable has 2 values

> ID：15495761
> 
> 赞同：0
> 
> 时间：2013-03-19T09:33:00.077
> 
> 标签：jquery, variables, load

in a page test.php I'm loading content.php like this:

```
$(document).on('click', '.test', function () {
        $('#content').load('content.php');
}); 
```

in content.php I have this Jquery code:

```
$(function() {
   var nb = 10;
   $(document).on('click', '.trigger', function () {
         alert(nb);
         nb +=10;
   });
   $(document).on('click', '.exit', function () { $('#content').html(''); });
}); 
```

when I'm clicking for the first time on #content nb as the value 10 and I can increment it by clicking on it, for exemple I'm clicking 3 times on it so its value is 40\. Then I'm closing the div by clicking on .exit, and I'm reloading content.php by clicking on #content. Now I have two alert: nb as the value 10 but it also has the value 40, how come it still has the value 40?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:37:48.180

您正在执行您的匿名函数两次。`nb`所以在不同的范围内有两个变量。加载视图后，您的事件处理程序将再次绑定。所以先解绑：

```
$(document).off('click.MyEventHandler').on('click.MyEventHandler', '.trigger', function () {
     alert(nb);
     nb +=10;
}); 
```

我将事件放在命名空间`.MyEventHandler`中以避免禁用其他点击事件。但实际上你最好使用最近的父内容作为事件监听器。所以：

```
$('#content').off('click.MyEventHandler').on('click.MyEventHandler', '.trigger', function () {
     alert(nb);
     nb +=10;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:38:17.537

这是因为当您删除时`#content`，您并没有删除已注册的事件处理程序。

[你可以通过使用.off](http://api.jquery.com/off/)来做到这一点

```
$(function() {
    var fn = function() {
        alert(nb);
        nb += 10;
    };

    var nb = 10;

    $(document).on('click', '.trigger', fn);
    $(document).on('click', '.exit', function() {
        $('#content').html('');
        $(document).off('click', '.trigger', fn);
    });
}); 
```

# javascript - linking nodes of variable radius with arrows

> ID：15495762
> 
> 赞同：7
> 
> 时间：2013-03-19T09:32:59.780
> 
> 标签：javascript, graph, svg, d3.js

I have some circles/nodes of different radius and I have to connect them with paths having arrow ends.

Here's the code for the marker:

```
svg.append("svg:defs").selectAll("marker")
    .data(["default"])
  .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 5)
    .attr("refY", -1.5)
    .attr("markerWidth", 10)
    .attr("markerHeight", 10)
    .attr("orient", "auto")
    .append("svg:path")
    .attr("d", "M1,-5L10,0L0,5"); 
```

I have stored the radius of circles in an array. Here's the screen shot:

![enter image description here](../Images/6dacd7e4ac5127a6814a58e26eb261f9.png)

The arrow is actually "inside" the circles. How do I get the arrows to be at the surface of the circles?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-28T19:08:43.243

这是一个老问题，但是如果您希望箭头位于节点的边缘而不是在它们的顶部或下方，这是我的解决方案。我的方法也是绘制连接节点的路径，使端点位于节点的边缘而不是节点的中心。从 Mobile Patent Suits 示例 ( [http://bl.ocks.org/mbostock/1153292](http://bl.ocks.org/mbostock/1153292) ) 开始，我将 linkArc 方法替换为：

```
function linkArc(d) {
    var sourceX = d.source.x;
    var sourceY = d.source.y;
    var targetX = d.target.x;
    var targetY = d.target.y;

    var theta = Math.atan((targetX - sourceX) / (targetY - sourceY));
    var phi = Math.atan((targetY - sourceY) / (targetX - sourceX));

    var sinTheta = d.source.r * Math.sin(theta);
    var cosTheta = d.source.r * Math.cos(theta);
    var sinPhi = d.target.r * Math.sin(phi);
    var cosPhi = d.target.r * Math.cos(phi);

    // Set the position of the link's end point at the source node
    // such that it is on the edge closest to the target node
    if (d.target.y > d.source.y) {
        sourceX = sourceX + sinTheta;
        sourceY = sourceY + cosTheta;
    }
    else {
        sourceX = sourceX - sinTheta;
        sourceY = sourceY - cosTheta;
    }

    // Set the position of the link's end point at the target node
    // such that it is on the edge closest to the source node
    if (d.source.x > d.target.x) {
        targetX = targetX + cosPhi;
        targetY = targetY + sinPhi;    
    }
    else {
        targetX = targetX - cosPhi;
        targetY = targetY - sinPhi;   
    }

    // Draw an arc between the two calculated points
    var dx = targetX - sourceX,
        dy = targetY - sourceY,
        dr = Math.sqrt(dx * dx + dy * dy);
    return "M" + sourceX + "," + sourceY + "A" + dr + "," + dr + " 0 0,1 " + targetX + "," + targetY;
} 
```

请注意，此代码要求节点数据中包含“r”或半径属性。为了将箭头的点放置在正确的位置，我更改了 refX 和 refY 属性，使箭头的点位于节点的边缘：

```
svg.append("defs").selectAll("marker")
    .data(["suit", "licensing", "resolved"])
  .enter().append("marker")
    .attr("id", function(d) { return d; })
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 10)
    .attr("refY", 0)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
  .append("path")
    .attr("d", "M0,-5L10,0L0,5"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T10:20:35.520

这真的很有趣；我昨天刚刚解决了这个问题。

我所做的是在节点边缘结束路径，而不是在中心。我的情况更复杂，因为我使用的是贝塞尔曲线，而不是直线，但这可能会对您有所帮助：

```
svg.append("svg:defs").selectAll("marker")
    .data(["default"])
  .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -3 6 6")
    .attr("refX", 5.0)
    .attr("refY", 0.0)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
  .append("svg:path")
    .attr("d", "M0,-2.0L5,0L0,2.0"); 

    links
      .attr("fill", "none")
      .attr("d", function(d) {
        var tightness = -3.0;
        if(d.type == "straight")
            tightness = 1000;

        // Places the control point for the Bezier on the bisection of the
        // segment between the source and target points, at a distance
        // equal to half the distance between the points.
        var dx = d.target.x - d.source.x;
        var dy = d.target.y - d.source.y;
        var dr = Math.sqrt(dx * dx + dy * dy);
        var qx = d.source.x + dx/2.0 - dy/tightness;
        var qy = d.source.y + dy/2.0 + dx/tightness;

        // Calculates the segment from the control point Q to the target
        // to use it as a direction to wich it will move "node_size" back
        // from the end point, to finish the edge aprox at the edge of the
        // node. Note there will be an angular error due to the segment not
        // having the same direction as the curve at that point.
        var dqx = d.target.x - qx;
        var dqy = d.target.y - qy;
        var qr = Math.sqrt(dqx * dqx + dqy * dqy);

        var offset = 1.1 * node_size(d.target);
        var tx = d.target.x - dqx/qr* offset;
        var ty = d.target.y - dqy/qr* offset;

        return "M" + d.source.x + "," + d.source.y + "Q"+ qx + "," + qy 
                + " " + tx + "," + ty;  // to "node_size" pixels before
                //+ " " + d.target.x + "," + d.target.y; // til target
      }); 
```

顺便一提; 你必须对“源”箭头做同样的事情（我只有在目标处）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T10:52:47.943

您可以订购 svg 元素，以便首先渲染圆圈，然后渲染带有箭头的线条（在 d3 中有一个`.order`方法，[请参阅此处了解详细信息。为了记录，](https://stackoverflow.com/questions/13595175/updating-svg-element-z-index-with-d3)[此处讨论](https://stackoverflow.com/questions/6566406/svg-re-ordering-z-index-raphael-optional)了 raphael api 的相应部分）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T08:51:04.373

我在网上搜索，没有一个答案有效，所以我自己做了：

这是代码：

```
 //arrows
svg.append("defs").selectAll("marker")
    .data(["suit", "licensing", "resolved"])
    .enter().append("marker")
    .attr("id", function(d) { return d; })
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 9)
    .attr("refY", 0)
    .attr("markerWidth", 10)
    .attr("markerHeight", 10)
    .attr("orient", "auto")
    .append("path")
    .attr("d", "M0,-5L10,0L0,5 L10,0 L0, -5")
    .style("stroke", "#4679BD")
    .style("opacity", "0.6"); 

  //Create all the line svgs but without locations yet
var link = svg.selectAll(".link")
   .data(forceData.links)
   .enter().append("line")
   .attr("class", "link")
   .style("marker-end", "url(#suit)");

//Set up the force layout
var force = d3.layout.force()
    .nodes(forceData.nodes)
    .links(forceData.links)
    .charge(-120)
    .linkDistance(200)
    .size([width, height])
    .on("tick", tick)
    .start();

function tick(){
    link.attr("x1", function (d) { return d.source.x; })
        .attr("y1", function (d) { return d.source.y; })
        .attr("x2", function (d) { 
            return calculateX(d.target.x, d.target.y, d.source.x, d.source.y, d.target.radius); 
        })
        .attr("y2", function (d) { 
            return calculateY(d.target.x, d.target.y, d.source.x, d.source.y, d.target.radius);
        });

    d3.selectAll("circle")
        .attr("cx", function (d) { return d.x; })
        .attr("cy", function (d) { return d.y; });

    d3.select("#forcelayoutGraph").selectAll("text")
        .attr("x", function (d) { return d.x; })
        .attr("y", function (d) { return d.y; });
}
function calculateX(tx, ty, sx, sy, radius){
    if(tx == sx) return tx;                 //if the target x == source x, no need to change the target x.
    var xLength = Math.abs(tx - sx);    //calculate the difference of x
    var yLength = Math.abs(ty - sy);    //calculate the difference of y
    //calculate the ratio using the trigonometric function
    var ratio = radius / Math.sqrt(xLength * xLength + yLength * yLength);
    if(tx > sx)  return tx - xLength * ratio;    //if target x > source x return target x - radius
    if(tx < sx) return  tx + xLength * ratio;    //if target x < source x return target x + radius
}
function calculateY(tx, ty, sx, sy, radius){
    if(ty == sy) return ty;                 //if the target y == source y, no need to change the target y.
    var xLength = Math.abs(tx - sx);    //calculate the difference of x
    var yLength = Math.abs(ty - sy);    //calculate the difference of y
    //calculate the ratio using the trigonometric function
    var ratio = radius / Math.sqrt(xLength * xLength + yLength * yLength);
    if(ty > sy) return ty - yLength * ratio;   //if target y > source y return target x - radius
    if(ty < sy) return ty + yLength * ratio;   //if target y > source y return target x - radius
} 
```

# javascript - XmlHttprequests

> ID：15495767
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:33:20.737
> 
> 标签：javascript, jquery, ajax

Hi i am trying to get xmlhttp requests to a local server which inturn connects to outside network.i chrome i am getting an error **XMLHttpRequest cannot load [http://mydomain.com:58947](http://mydomain.com:58947) Origin [http://mydomain.com](http://mydomain.com) is not allowed by Access-Control-Allow-Origin.** This is not a cross domain request since it is same domain but different port numbers. I am getting a response of 0 instead of 200 in ff and chrome,but in IE its working perfectly. Any help regarding this issue will save me!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:35:48.907

You need to give relative path instead of begin with [http://mydomain.com](http://mydomain.com)

# matlab - How to convole 1d image array as getting same result with 2d filtering

> ID：15495770
> 
> 赞同：0
> 
> 时间：2013-03-19T09:33:43.297
> 
> 标签：matlab, image-processing, filtering

I try to convert 2d image to 1d and the filter as well than I want to filter that image with the 1d filter and getting the same corresponding pixel responses as in the 2d convolving.

I have done

```
I1 = I(:)
filter1 = filter(:);
response = imfilter(I1,filter1,'conv')
response2d = imfilter(I,filter,'conv'); 
```

but `response` and `response2d` are not same with the matching entries.

How could solve that problem? Any suggestion?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:09:21.580

一般情况下是不可能的。**然而**，对于一类非常重要的过滤器内核，它不仅是可能的，而且非常有效。这是所谓的*可分离内核*的类别，它包括均值（也称为框模糊）滤波器、高斯模糊和其他所有内核，其矩阵*K*可以表示为两个向量的*外积*K = u * v ，即具有与 K 一样多的行的列向量*u和具有与**K*一样多的列的行向量*v*的乘积。

 *如果是这种情况，图像*I*与核*K*的 2D 卷积在数学上等于两个 1D 卷积的序列，即*I*的列与*u*的卷积，然后是与结果的*v*的卷积第一次卷积。[在此处](http://blogs.mathworks.com/steve/2006/10/04/separable-convolution/)查看有关可分离过滤器的更多信息。

如果您使用的是通用 2D 内核*K*，并且不知道它是否可分离，则测试它的方法是计算其奇异值分解 ( [SVD](http://en.wikipedia.org/wiki/Singular_value_decomposition) ) *K* = *U* * *S* * *V*，您可以使用许多图书馆中的任何一个。然后，您会看到除了第一个 S(1,1) 之外，矩阵*S*的所有对角项（*K*的*奇异值）是否都非常接近于零。*SVD 库通常会按从大到小的排序顺序生成奇异值，因此您只需验证*S(1,1) > 0*和*S(2,2) / S(1,1) << 1*。如果是这样的话，那就是****u == U(:,1) ，* *U*的第一列，*v == V(1,:)*，矩阵*V*的第一行。***

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:01:59.783

卷积 2D 信号在数学上不等于卷积 1D 信号。所以它不能产生相同的结果。

例如，如果您有一个均值过滤器，假设：

```
A = [1/9 1/9 1/9;
    1/9 1/9 1/9;
    1/9 1/9 1/9] 
```

然后对于一个像素`P(i,j)`，结果强度将受以下值的影响：

```
R(i,j) = 
1/9 * 
( P(i-1,j-1) + P(i-1,j) + P(i-1,j+1) +
P(i,j-1) + P(i,j) + P(i,j+1) +
P(i+1,j-1) + P(i+1,j) + P(i,j+1) 
) 
```

如果将滤波器内核和信号按列展开，那么，如果我们说（为简单起见）像素`P(i,j)`位于行中间的某个位置，而不是靠近末端，那么新值将是：

```
R(i,j) = 
1/9 * (
R(i-4,j) + R(i-3,j) + R(i-2,j) + R(i-1,j) +
R(i,j) +
R(i+1,j) + R(i+2,j) + R(i+3,j) + R(i+4,j)
) 
```

当然，在新的 1D 信号中，索引不会是二维 的，而是因为信号被分散而`R(i,j)`变为二维的。`R( i + j*imageHeight )`

很明显，第二种情况下每个像素的值是使用**不同的邻居**计算的，因此对于任何任意图像都不能相等，可能仅适用于具有特定周期信号的特殊场合。***

# ruby-on-rails - 如何查看资产管道处理的中间文件？

> ID：15495779
> 
> 赞同：0
> 
> 时间：2013-03-19T09:34:24.997
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我有一些由 Rails 资产管道处理的文件*.js.coffee.erb文件。*我的 ERB 代码返回了一些无法被 Coffee 解析的字符串，导致 SyntaxError 异常。我想查看生成的*somefile.js.coffee*文件，或者一般来说资产管道处理的任何中间文件。

我试图检查 Sprockets 但没有运气：

```
environment = Sprockets::Environment.new
MyApplication::Application.config.assets.paths.each {|p| environment.append_path p}
rerb = environment['somefile.js.coffee.erb']
rerb.source #=> it's already preprocessed 
```

或者查看*\tmp\cache\assets*但也只有经过预处理的文件，另外还被指纹名称所掩盖。

也许有一种方法可以连接到资产管道我不知道如何..

为什么我需要 ERB？[使用 KnockoutJS ( https://github.com/dnagir/knockout-rails](https://github.com/dnagir/knockout-rails) extended -> [https://github.com/KrzysztofMadejski/knockout-rails](https://github.com/KrzysztofMadejski/knockout-rails) )生成具有字段和验证匹配 Rails 模型的客户端模型存根。

我正在使用 Rails '~> 3.2.12'，链轮（2.2.2）。

**编辑**：我最终在 ### 注释中注入了 erb 代码，以便在 coffeescript 文件仍在编译时偷偷查看生成的代码：

```
###
<%= somefun() %>
### 
```

尽管如此，我还是建议使用@Semyon Perepelitsa 答案，因为它会生成咖啡编译器看到的咖啡脚本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:15:01.700

只需暂时从文件扩展名中删除“咖啡”：somefile.js.erb。您将在 /assets/somefile.js 中看到它的中间状态，因为它不会被 CoffeeScript 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:46:47.153

我想知道你是否可以把它放在`<% binding.pry %>`这条线之前，然后乱来，直到你把它弄对为止。从未在编译期间尝试过，也不要使用咖啡脚本。从理论上讲，只要您放入`gem pry`Gemfile 并`bundle`首先运行，它就应该可以工作（或值得一试）。

# python - 将小部件定位到 QBoxLayout

> ID：15495781
> 
> 赞同：0
> 
> 时间：2013-03-19T09:34:30.910
> 
> 标签：python, pyqt, pyside

我正在使用 PySide 构建一个 GUI

我有一个 QBoxLayout，我添加了一些小部件，问题是我想控制我无法做到的位置，我尝试了文档页面中提供的内容

```
addWidget( widg, int streatch, int alignment) 
```

但这并没有给我想要的东西，所以我想要的最终外观是这样的

* * *

-------------------------------------------------- ---------- ^^ ****** &&&&&&

如果线***_* ___**代表整个窗口/布局，我希望我`wid`在代码中命名的小部件就像虚线 -------- 并且滑块与 ^^ ​​位于同一位置，最后要在 &&&&& 中的按钮

我的第二个问题是我想为滑块和组合框添加一些标签，我想确定位置我该怎么做

这是我的代码

```
 self.wid = GLWidget()

    mainLayout = QtGui.QHBoxLayout()
    mainLayout.addWidget(self.wid)

    self.xSlider = self.createSlider()
    self.ySlider = self.createSlider()

    mainLayout.addWidget(self.xSlider)
    mainLayout.addWidget(self.ySlider)

    self.btn = QtGui.QPushButton('OK')
    self.btn.resize(self.btn.sizeHint())

    mainLayout.addWidget(self.btn)

    self.combo = QtGui.QComboBox()

    mainLayout.addWidget(self.combo)

    self.setLayout(mainLayout)
    self.setWindowTitle(self.tr("Hello GL"))
    self.setGeometry(350, 350, 1000, 1000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:56:11.590

您可以使用 QGridLayout 而不是 QHBoxLayout 并使用 QGridLayout 的[setColumnMinimumWidth](http://srinikom.github.com/pyside-docs/PySide/QtGui/QGridLayout.html#PySide.QtGui.PySide.QtGui.QGridLayout.setColumnMinimumWidth)方法来指定所需的小部件宽度。就像这样：

```
mainLayout = QtGui.QGridLayout()
mainLayout.setColumnMinimumWidth(0, 100) #set column 0 width to 100 pixels
button = QtGui.QPushButton('OK')
mainLayout.addWidget(button, 0, 0) #adds the button to the widened column 
```

然后继续添加其余的小部件。

# cordova - Sencha Touch 2 旋转木马方向改变

> ID：15495787
> 
> 赞同：0
> 
> 时间：2013-03-19T09:34:55.857
> 
> 标签：cordova, sencha-touch-2

我在管理`carousel`显示[ImageViewer](https://github.com/SunboX/ST2_ImageViewer)项目列表的方向更改的 Sencha Touch 2 / Phonegap 应用程序中遇到问题。

当我打开`carousel`一切都很好。如果我更改设备的方向（无论是在 Chrome 中通过 Ripple 插件还是在 iPhone4S 上），布局都会正确调整。

改变方向后我滑动到下一张图像时出现问题。那已经被预加载并位于一个容器中，该容器的尺寸是针对前一个方向的，所以布局被弄乱了。

![在此处输入图像描述](../Images/3b4ce84645c4fdeb31d2e5f97970c4f0.png) ![在此处输入图像描述](../Images/d5e7a1e9155a8f94107c8c70afbbd37d.png)

请注意，如果我继续滑动到下一个图像布局再次正确，因为我`carousel`只预加载了单个图像。

我设法拦截`changeorientation`事件`Ext.Viewport`以对轮播采取行动以修复此行为，我尝试在轮播和 ImageViewer 上触发调整大小事件，但没有成功。我还尝试`changeorientation`在每次轮播的 activeItem 更改时触发该事件，`Ext.Viewport`但这也不起作用。你有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:29:21.710

我通过遍历轮播中的每个项目并在 Viewport 上触发orientationchange 后调用ImageViewer 项目的resize() 方法来解决它。我的功能如下所示：

```
handleOrientationChange: function(viewport, orientation, width, height){
    var items = this.getItems();
    for (var i=0;i<items.getCount();i++){
        var obj = items.getAt(i);
        if (obj instanceof Ext.view.ux.ImageViewer){
            console.log("Resize");
            obj.resize();
        }
    }
} 
```

您需要验证该项目是否为 Imageviewer。轮播指示器也会在 ItemCollection 中返回。

我不是 100% 确定这是最有效的方法，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T13:42:14.623

您可以将其添加到您的 .css 文件中

```
.my-carousel-item{background:url(images/loading.png) no-repeat center center}@media screen and (orientation: portrait){.my-carousel-item-img{background-size:100% auto}}@media screen and (orientation: landscape){.my-carousel-item-img{background-size:auto 100%}}.x-portrait .my-carousel-item-img{background-size:100% auto}.x-landscape .my-carousel-item-img{background-size:auto 100%}.my-carousel-item-img{background-position:center center}.x-carousel-indicator>*{background-color:orange !important;opacity:0.4}.x-carousel-indicator>.x-carousel-indicator-active{opacity:1} 
```

# image-processing - 图像信噪比 (SNR) 和图像质量

> ID：15495788
> 
> 赞同：3
> 
> 时间：2013-03-19T09:34:59.157
> 
> 标签：image-processing, signal-processing, noise

我刚刚在这里阅读了一个关于如何计算信噪比 (SNR) 的[问题](https://stackoverflow.com/questions/2734670/using-matlab-to-calculate-signalnoise-ratio)，我只是想知道如何将 SNR 与图像质量联系起来。更具体地说，我想知道我们可以判断出图像质量差的 SNR 级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:14:47.387

有几个图像质量指标 - 与 SNR 最密切相关的是 PSNR（峰值 SNR）。[你可以在这里](http://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio)阅读更多关于它的信息。

对您的问题感兴趣：

> “有损图像和视频压缩中 PSNR 的典型值在 30 到 50 dB 之间，越高越好。无线传输质量损失的可接受值被认为是大约 20 dB 到 25 dB。”

但总的来说，PSNR 只是人类对图像质量感知的近似值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T11:10:22.340

信噪比 (SNR) 在成像中用作（数字或胶片）成像系统灵敏度的物理量度。行业标准以功率分贝 (dB) 为单位测量 SNR，因此将 10 log 规则应用于“纯”SNR 比率（例如，1:1 的比率产生 0 分贝）。反过来，产生“敏感性”。行业标准根据 ISO 胶片速度当量来衡量和定义灵敏度；

*   SNR：32.04 dB = 出色的图像质量
*   SNR：20 dB = 可接受的图像质量

[在维基百科](https://en.wikipedia.org/wiki/Signal-to-noise_ratio_(imaging))上查找详细信息

# jquery - How do I change hover to click?

> ID：15495789
> 
> 赞同：-2
> 
> 时间：2013-03-19T09:34:59.723
> 
> 标签：jquery

Right now it works on hover. I need to make it work on click only so it works properly on a mobile device.

.nav needs to be #access, but I get lost after that. What do I change .nav to match up with my css which is from wordpress?

I'm trying to get [http://webdesigntutsplus.s3.amazonaws.com/tuts/378_tessa/tessa-lt-dropdowns-21c7868/index.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/378_tessa/tessa-lt-dropdowns-21c7868/index.html) to work with wordpress.

[http://jsfiddle.net/scottbotkins/dbW2Q/](http://jsfiddle.net/scottbotkins/dbW2Q/)

```
 var ww = document.body.clientWidth;

$(document).ready(function() {
    $(".nav li a").each(function() {
        if ($(this).next().length > 0) {
            $(this).addClass("parent");
        };
    })

    $(".toggleMenu").click(function(e) {
        e.preventDefault();
        $(this).toggleClass("active");
        $(".nav").toggle();
    });
    adjustMenu();
})

$(window).bind('resize orientationchange', function() {
    ww = document.body.clientWidth;
    adjustMenu();
});

var adjustMenu = function() {
    if (ww < 768) {
        $(".toggleMenu").css("display", "inline-block");
        if (!$(".toggleMenu").hasClass("active")) {
            $(".nav").hide();
        } else {
            $(".nav").show();
        }
        $(".nav li").unbind('mouseenter mouseleave');
        $(".nav li a.parent").unbind('click').bind('click', function(e) {
            // must be attached to anchor element to prevent bubbling
            e.preventDefault();
            $(this).parent("li").toggleClass("hover");
        });
    } 
    else if (ww >= 768) {
        $(".toggleMenu").css("display", "none");
        $(".nav").show();
        $(".nav li").removeClass("hover");
        $(".nav li a").unbind('click');
        $(".nav li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
            // must be attached to li so that mouseleave is not triggered when hover over submenu
            $(this).toggleClass('hover');
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:57:21.193

一个简单的解决方法就像删除

```
 #access ul li:hover > ul {
    display: block;
} 
```

从 CSS 和

添加这个 jQuery 代码

```
$('#menu-navigation li').click(function(){
       $(this).find('.sub-menu').show();
        $(this).siblings().find('.sub-menu').hide();
}); 
```

您必须更改代码才能获得所需的内容。

# javascript - Javascript: order of "for" cycle through object props

> ID：15495792
> 
> 赞同：1
> 
> 时间：2013-03-19T09:35:17.783
> 
> 标签：javascript

If I have an object an cycle through its properties:

```
var obj = {a: 1, b: 2, c: 3}

for (var prop in obj){
   console.log(obj[prop])
} 
```

Will I inevitably always get: 1, 2, 3 as a result? On what it may depend? Is other result practically real?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:35:55.690

No, there is no guarantee in the language regarding the order of iteration in object properties.

From [the MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in) :

> A for...in loop iterates over the properties of an object in an arbitrary order (see the delete operator for more on why one cannot depend on the seeming orderliness of iteration, at least in a cross-browser setting)

and

> Although ECMAScript makes iteration order of objects implementation-dependent, it may appear that all major browsers support an iteration order based on the earliest added property coming first (at least for properties not on the prototype). However, in the case of Internet Explorer, when one uses delete on a property, some confusing behavior results, preventing other browsers from using simple objects like object literals as ordered associative arrays. In Explorer, while the property value is indeed set to undefined, if one later adds back a property with the same name, the property will be iterated in its old position--not at the end of the iteration sequence as one might expect after having deleted the property and then added it back.
> 
> So if you want to simulate an ordered associative array in a cross-browser environment, you are forced to either use two separate arrays (one for the keys and the other for the values), or build an array of single-property objects, etc.

If you want a guarantee, you have to use an array. You may construct it by sorting the property key if you like.

# javascript - 在ajax中使用参数调用onreadystatechange回调函数

> ID：15495793
> 
> 赞同：1
> 
> 时间：2013-03-19T09:35:24.867
> 
> 标签：javascript, jquery, ajax

我在 SOF 中找到了一个关于此的问题..但没有找到解决方案..

这是我的代码..

```
 if (mefofftasksxmlhttp!=null)
        {
            mefofftasksxmlhttp.onreadystatechange=sasi_ready(taskId);
            mefofftasksxmlhttp.open("GET",url,true);
            mefofftasksxmlhttp.send(null);
        } 
```

**回调函数**

```
function sasi_ready(tskId)
        {
            if (mefofftasksxmlhttp.readyState==4)
            {
               if (mefofftasksxmlhttp.status==200)
                {
                    alert('Task Moved to completed Tasks');
                    $('#'+tskId).hide();
                }
                else
                {
                    alert("Problem retrieving XML data");
                }
            }
        } 
```

当我在回调函数中传递参数时，此代码不允许我进入回调..但是当我删除参数时..那工作正常..

我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:57:33.763

正如@Beetroot-Beetroot 已经说过的那样：您需要将函数引用传递给onreadystatechange。如果你想传递一个参数，你仍然可以用这个参数调用一个函数，只要这个函数会返回一个函数引用

```
function sasi_ready(tskId) {
   return function() {
        if (mefofftasksxmlhttp.readyState==4)
        {
           if (mefofftasksxmlhttp.status==200)
            {
                alert('Task Moved to completed Tasks');
                $('#'+tskId).hide();
            }
            else
            {
                alert("Problem retrieving XML data");
            }
        }
   }
} 
```

# r - Detecting rows with the same combination of numbers in the first two columns, and selecting the one with the highest number in the third column

> ID：15495795
> 
> 赞同：2
> 
> 时间：2013-03-19T09:35:33.483
> 
> 标签：r, postgresql, dataframe

I have a `data.frame` with only three columns but with many thousands of rows. The first and the second columns report numerical ID, and their combination indicate a link (e.g. A-B equal to B-A).

Now, I'd like to delete all rows that are duplicates for the link, selecting the row with the highest value in the third column.

Below a short example:

My input `data.frame`:

```
1   2    100
102 100  20000
100 102  23131
10  19 124444
10  15   1244
19  10   1242
10  19   5635
2   1    666
1   2     33
100 110     23 
```

what I aim to get:

```
100 102  23131
10  19 124444
10  15   1244
2   1    666
100 110     23 
```

I' trying to find the solution in `R`, otherwise `postgreSQL` would be fine too. Thanks a lot!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:44:13.597

[**The idea is similar to this one**](https://stackoverflow.com/questions/15487151/aggregate-a-data-frame-based-on-unordered-pairs-of-columns/15487403#15487403). You can create two additional columns using `pmin` an `pmax` to group as follows:

A `data.table` solution. But if you don't want data.table, then you can still use the idea. However, it is highly improbable you get faster than data.table solution with just R code.

```
# assuming your data.frame is DF
require(data.table)
DT <- data.table(DF)
# get min of V1,V2 on one column and max on other (for grouping)
DT[, `:=`(id1=pmin(V1, V2), id2=pmax(V1, V2))]
# get max of V3
DT.OUT <- DT[, .SD[which.max(V3), ], by=list(id1, id2)]
# remove the id1 and id2 columns
DT.OUT[, c("id1", "id2") := NULL]

#     V1  V2     V3
# 1:   2   1    666
# 2: 100 102  23131
# 3:  10  19 124444
# 4:  10  15   1244
# 5: 100 110     23 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:56:58.450

Here is an option in base R, mostly for sharing alternatives. As it involves transposing and sorting, it is, indeed, likely to be slow on your "thousands of rows" dataset. It assumes your `data.frame` is called "mydf":

```
myAggs <- as.data.frame(t(apply(mydf[1:2], 1, sort)))
mydf[1:2] <- myAggs
aggregate(V3 ~ ., mydf, max)
#    V1  V2     V3
# 1   1   2    666
# 2  10  15   1244
# 3  10  19 124444
# 4 100 102  23131
# 5 100 110     23 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:59:14.287

In postgresql ..

If your original table was constructed with three columns of integers - a, b, c - then you can use conditional functions to establish a unique key of max(a, b), min(a, b):

```
select 
 case when a>=b then a else b end as key1, 
 case when a>=b then b else a end as key2,  
 c from table; 
```

You can then use 'group' to get the maximum C for each key (key1, key2):

```
select 
 key1, 
 key2, 
 max(c) as max_c 
 from (
  select 
  case when a>=b then a else b end as key1, 
  case when a>=b then b else a end as key2,  
  c from table
 ) query
 group by key1, key2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:14:12.890

Postgresql:

```
select distinct on (1, 2)
    least(a, b), greatest(a, b), c
from data_frame
order by 1, 2, c desc 
```

# codeigniter - Paypal pro Recurring billing gets suspended in sandbox

> ID：15495796
> 
> 赞同：0
> 
> 时间：2013-03-19T09:35:42.360
> 
> 标签：codeigniter, paypal, paypal-sandbox

I am using angelleye PayPal library for creating recurring profile in CodeIgniter.

Profile gets successfully created and I am getting profile id.

I have kept billing period each day. But the auto-bill for the same profile get suspended.

I get sandbox notification with this heading :

"An automatic payment from testperson new failed" and inside its subject this is written "The automatic payment from testperson new has failed".

So what could be the reason. I have used dummy credit card details on creating recurring profile.

Thanks

# c++ - Cplex C++ 多维决策变量

> ID：15495805
> 
> 赞同：2
> 
> 时间：2013-03-19T09:35:56.503
> 
> 标签：c++, variables, cplex

我是使用 cplex 的新手，我尝试在互联网上查找一些信息，但没有找到明确的内容来帮助我解决问题。

我有 P[k] k 将等于 1 到 4

我有一个决策变量 x[i][k] 必须等于 0 或 1（也是 p[k]）

i 介于 1 到 5 之间

现在我喜欢这样

```
 IloEnv env;
  IloModel model(env);
  IloNumVarArray p(env);
  p.add(IloNumVar(env, 0, 1));
  p.add(IloNumVar(env, 0, 1));
  p.add(IloNumVar(env, 0, 1));
  IloIntVar x(env, 0, 1);

  model.add(IloMaximize(env, 1000 * p[1] + 2000 * p[2] + 500 * p[3] + 1500 * p[4]));

   for(int k = 1; k <= 4; k++){
    for(int i = 1; i <= 5; i++){
      model.add(x[i][k] + x[i][k] + x[i][k] + x[i][k] + x[i][k] => 2 * p[k]; );
    }} 
```

循环应该做这样的事情：

x[1][1] + x[2][1] + x[3][1] + x[4][1] + x[5][1] => 2 * p[1];

x[1][2] + x[2][2] + x[3][2] + x[4][2] + x[5][2] => 2 * p[2];

x[1][3] + x[2][3] + x[3][3] + x[4][3] + x[5][3] => 2 * p[3];

x[1][4] + x[2][4] + x[3][4] + x[4][4] + x[5][4] => 3 * p[4];

但我离这个结果还很远。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:20:17.427

您可能想要使用 IloNumExpr

```
for(int k = 0; k < 4; k++){
   IloNumExpr sum_over_i(env);
   for(int i = 0; i < 5; i++){
        sum_over_i += x[i][k];
   }
   model.add(sum_over_i >= 2 * p[k]; );
} 
```

您还需要将 x 声明为二维数组。

```
IloArray x(env, 4);
for (int k = 0; k < 4; ++k)
      x[k] = IloIntVarArray(env, 5, 0, 1); 
```

此外，在 C++ 中，数组索引是从 0 到 size-1，而不是从 1 到 size。你的目标应该写

```
model.add(IloMaximize(env, 1000 * p[0] + 2000 * p[1] + 500 * p[2] + 1500 * p[3])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-13T18:15:31.073

Usertfwr 已经给出了一个很好的答案，但我想给出另一个版本的解决方案，它可以帮助您以更通用的方式编写 CPLEX 应用程序。首先，我建议您使用文本文件来保存将输入程序的所有数据（目标函数系数）。在您的情况下，您只需将以下矩阵（如数据）复制到记事本并将其命名为“coef.dat”：

[1000、2000、500、1500]

现在是完整的代码，让我知道是否难以理解任何陈述：

```
 #include <ilcplex/ilocplex.h>
  #include <fstream>
  #include <iostream>
  ILOSTLBEGIN

  int main(int argc, char **argv) {
    IloEnv env; 
    try {
        const char* inputData = "coef.dat";

        ifstream inFile(inputData);   // put your data in the same directory as your executable
        if(!inFile) {
            cerr << "Cannot open the file " << inputData << " successfully! " <<endl;
            throw(-1);
        }

        // Define parameters (coef of objective function)
        IloNumArray a(env); 

        // Read in data
        inFile >> a; 

        // Define variables 
        IloBoolVarArray p(env, a.getSize());  // note that a.getSize() = 4 
        IloArray<IloBoolVarArray> X(env, 5);  // note that you need a 5x4 X variables, not 4x5
        for(int i = 0; i < 5; i++) {
            X[i] = IloBoolVarArray(env,4);
        }

        // Build model
        IloModel model(env);

        // Add objective function 
        IloExpr  objFun (env); 
        for(int i = 0; i < a.getSize(); i++){
            objFun += a[i]*p[i];
        }

        model.add(IloMaximize(env, objFun));  

        objFun.end();  

        // Add constraints -- similar to usertfwr’s answer
        for(int i = 0; i < 4; k++){
            IloExpr sumConst (env);
            for(int j = 0; j < 5; i++){
                    sumConst += x[j][i];
            }
            // before clearing sumConst expr, add it to model
            model.add(sumConst >= 2*p[i]);
            sumConst.end(); // very important to end after having been added to the model
        }

        // Extract the model to CPLEX 
        IloCplex cplex(mod);

        // Export the LP model to a txt file to check correctness
        //cplex.exportModel("model.lp");

        // Solve model 
        cplex.solve();

    }
    catch (IloException& e) {
        cerr << "Concert exception caught: " << e << endl;
    }
    catch (...) {
           cerr << "Unknown exception caught" << endl;
    }
        env.end();
} 
```

# python - python编码风格的单词分隔符？

> ID：15495817
> 
> 赞同：1
> 
> 时间：2013-03-19T09:36:28.607
> 
> 标签：python, vim

PEP8`_`用作单词分隔符，例如，名为`get_context_data`.

`caw`当你想改变的时候真是太酷`get_context_data`了`set_context_data`。

我用谷歌搜索并添加`set iskeyword-=_`到我的 vimrc。

但是这个更改带来了另一个问题，我可以在键入时自动完成方法名称`get_`，菜单显示我`context`不是`context_data`我想要的，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:53:05.533

通过更改`'iskeyword'`设置，您会影响（并可能破坏）很多事情；其中包括*词*动（`w`、`e`等）、补全（你的问题在这里）和语法高亮。

我建议保留原始设置（毕竟，`get_context_data`单个变量可能也应该由单个*单词*表示）。你可以使用我的[camelcasemotion 插件](http://www.vim.org/scripts/script.php?script_id=1905)来处理下划线分隔的片段。使用该插件，您可以覆盖原始动作和文本对象，或`ca,w`使用`caw`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:03:15.210

最好不要更改 iskeyword 选项。有很多命令需要它。如果您只是想让编辑下划线连接字符串 ( `a_b_c_d`) 更容易，您可以尝试以下映射：

```
onoremap iu :<c-u>normal! T_vt_<cr>
onoremap au :<c-u>normal! F_vf_<cr> 
```

使用此映射，（iu 表示在下划线中，您可以更改它）。你可以例如

```
get_cont[I]ext_data ( [I]:cursor) 
```

你输入`ciu`你得到`get_[I]_data`的， `diu`会做删除，`au`也会对包裹的下划线做操作。

但是，对于这些情况，上述映射不起作用**（**或**意外工作 ^_***）

```
g[I]et_context_data -> [I]_context_data  (you could do bct_ instead)
get_context_dat[I]a -> get_context_[I]   (you could do ecT_ or T_cw instead) 
```

因为映射不能按字操作。但是，您可以使其适合您的需要。

# javascript - 使用多个提交按钮识别单击的提交按钮的值

> ID：15495820
> 
> 赞同：7
> 
> 时间：2013-03-19T09:36:34.700
> 
> 标签：javascript, web-applications

我有一种情况，我需要跟踪哪个提交按钮单击，以便根据它设置变量。下面是测试代码，

```
<script>
function submitForm(form) {
    alert(document.getElementById('sb').value);
    if (document.getElementById('sb').value=="One") {
        //Do something
    }
    return true;
}
</script>

<form action="" method="get" onsubmit="return submitForm(this);">
    <input type="submit" name="sb" value="One">
    <input type="submit" name="sb" value="Two">
    <input type="submit" name="sb" value="Three">
</form> 
```

即使我单击按钮二或三，警报也始终显示一。但是 url 会随着可点击参数的变化而变化。如何提醒可点击提交按钮中的值？

注意：我想要一个没有 JQuery 的解决方案

编辑：我更改了 onsubmit 调用 submitForm(this); 的代码位 问题甚至是使用 document.forms[0].sb.value 它的 undefined 因为 document.forms[0].sb 返回所有提交按钮的节点列表，与 document.getElementById('sb') 相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:45:47.070

我建议您使用按钮，而不是多个提交按钮。在按钮的 onclick 属性中，使用 javascript 提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T11:51:15.310

你可以这样试试

```
 <form>
        <input class="myButton" type="submit" name="sb" value="One">
        <input class="myButton" type="submit" name="sb" value="Two">
        <input class="myButton" type="submit" name="sb" value="Three">
    </form>

    <script type="text/javascript">
        $(".myButton").on('click', function() {
        alert($(this).val());
        });
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-11T06:48:55.200

我对javascript有点陌生；如果我错了，请原谅我。如果您的 if 语句有第三个`=`符号，这不会有什么不同吗？

应该是：

```
if (document.getElementById('sb').value === "One") {
  //Do something
}
return true; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-15T14:21:05.133

这是我认为解决此问题的更简单方法。它不需要任何额外的事件。

```
<script>
function submitForm(form) {
    console.log(document.activeElement.value);
    if (document.activeElement.value == 'One') {
       console.log("Have one.");
       return false;
    }
    return true;
}

</script>

<form action="" method="get" onsubmit="return submitForm(this);">
    <input type="submit" name="sb" value="One">
    <input type="submit" name="sb" value="Two">
    <input type="submit" name="sb" value="Three">
</form> 
```

[jsfiddle](https://jsfiddle.net/gam3/do1sujqL/10/)

我想要回答的是表单如何将查询设置为“？sb = {value}”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:46:43.987

您可以尝试使用 jquery，例如：

```
$(":submit").live('click', function() {
    alert($(this).val());
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T09:53:36.297

继续上面的答案：

```
<script>
function m(value) {
alert(value);
}
</script>

<input type="button" value="One" onClick="m(this.value)">
<input type="button" value="Two" onClick="m(this.value)">
<input type="button" value="Three" onClick="m(this.value)"> 
```

你当然可以看到 id 是什么：

```
<input type="button" id='myId' value="Three" onClick="m(this.id)"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-12T01:45:00.597

这是一个非 jquery 的简单解决方案，用于检测单击了哪个提交按钮。

```
 <script>
function submitForm(form) {
    console.log(document.getElementById('btn_clicked').value);
    if (document.getElementById('btn_clicked').value === 'One') {
       console.log("Have one.");
       return false;
    }
    return true;
}
</script>

<form action="" method="get" onsubmit="return submitForm(this);" ;">

    <input type="hidden" name="btn_clicked" id="btn_clicked" value="">
    <input type="submit" name="sb" value="One" onclick="document.getElementById('btn_clicked').value='One';">
    <input type="submit" name="sb" value="Two" onclick="document.getElementById('btn_clicked').value='Two';">
</form> 
```

# c# - 在mvc中复制原始图像

> ID：15495823
> 
> 赞同：0
> 
> 时间：2013-03-19T09:36:41.993
> 
> 标签：c#, asp.net-mvc

我作为参数图像上传进入控制器，我需要复制该图像，以便我可以在副本而不是原始图像上进行操作。如何在 mvc 中复制图像？

```
[HttpPost]
public ActionResult Create(HttpPostedFileBase photo)
{
  var copiedImage = ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:41:33.033

您可以使用该类的`SaveAs()`功能`HttpPostedFileBase`将图像存储在服务器上的单独位置，然后对其进行操作。

请参阅此 SO 帖子

[文件上传 ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)

在第二篇文章中有一段代码可以将文件复制到另一个流

```
 using (MemoryStream ms = new MemoryStream()) {
     file.InputStream.CopyTo(ms);
     byte[] array = ms.GetBuffer(); } 
```

# android - 设计一个与智能手机和平板电脑兼容的应用程序

> ID：15495826
> 
> 赞同：1
> 
> 时间：2013-03-19T09:36:47.147
> 
> 标签：android, android-layout, android-fragments, android-tabhost, android-tabactivity

我的应用程序由使用 Tabhost 和 Activity 组的选项卡组成。目前运行良好。但是，我被告知扩展应用程序以支持平板电脑。当前的应用程序似乎可以在平板电脑上运行，空间利用率较低。我被告知在几个屏幕中使用拆分视图。

因此，我对扩展设计进行了严格的研究。一种建议是使用[片段](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)。这最终需要进行重大的设计更改并消耗更多时间。另一种是调整现有代码以扩展支持，这远不推荐。

该应用旨在支持 2.2 以上的所有 Android 版本

谁能指导我一个更好的解决方案？

**编辑：**

我已经在使用新的布局命名约定。

```
layout-sw600dp
layout-sw800dp 
```

例如，对于当前的智能手机版本，屏幕的列表视图为

```
Item A
Item B
Item C 
```

点击任何项目会在显示详细信息的活动组中打开一个新活动。

但在平板电脑中，上述两个功能使用拆分视图被带到一个布局中。

```
Item A   |
Item B   |   Item details
Item C   | 
```

我坚持实现上述功能。我可以在 ActivityGroup 中使用片段吗？

# c - 如何锁定文件以进行 O_RDWR 的读写访问

> ID：15495828
> 
> 赞同：1
> 
> 时间：2013-03-19T09:36:50.990
> 
> 标签：c, linux, locking, fcntl

我找不到有关如何锁定文件以进行读写的答案。

```
lock.l_type = F_WRLCK //for write.
lock.l_type = F_RDLCK //for read
lock.l_type = F_RDLCK|F_WRLCK //maybe for read/write???? 
```

下面的代码是否正确？

```
fd=MyOpenWrite(name,O_RDWR);  //for read/write
//(open file for read/write, but lock for write)
...
fd=MyOpenRead(name,O_RDONLY);  //open and lock for read
...
fd=MyOpenWrite(name,O_CREAT|O_WRONLY|O_TRUNC); //for write
...
fd=MyOpenWrite(name,O_WRONLY|O_APPEND);  //for append

int MyOpenRead(char *name,int flags) {
    int fd;
    struct flock    lock;
    fd = open(name,flags);
    if (fd<0) return -1;
    lock.l_type = F_RDLCK;
    lock.l_start = 0;
    lock.l_whence = SEEK_SET;
    lock.l_len = 0;
    fcntl(fd,F_SETLKW,&lock);
    return fd;
}

int MyOpenWrite(char *name,int flags) {
    int fd;
    struct stat st;
    fd = open(name,flags,S_IREAD|S_IWRITE|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH);
    if (fd<0) return -1;

    lock.l_type = F_WRLCK;
    lock.l_start = 0;
    lock.l_whence = SEEK_SET;
    lock.l_len = 0;
    fcntl(fd,F_SETLKW,&lock);
    return fd;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:47:24.610

写锁也会阻塞读者。它是一个排他锁，因此只有所有者*可以访问锁定的字节，其他人无法访问这些字节，无论是通过读取还是写入。

* fcntl() 锁是咨询锁。因此，如果其他人不合作，打开文件的任何人都可以自由地读/写它，并且还使用 fcntl() 来获取锁。如果您需要强制锁定，请参见[此处](https://www.kernel.org/doc/Documentation/filesystems/mandatory-locking.txt)

# c++ - 一般QThread理解：quit()和isRunning()

> ID：15495832
> 
> 赞同：0
> 
> 时间：2013-03-19T09:37:10.013
> 
> 标签：c++, qt

当我在 Qt 中执行我的线程时，`start()`我可以检查它是否正在运行`QThread::isRunning ()`。`true`如果线程仍在运行，它会返回。打电话后`quit()`我可以退出我的线程。

现在我的问题：

调用后`quit()`，我的`isRunning ()`查询应该返回`false`，对吗？同样`QThread::isFinished ()`应该返回`false`。

带着这个问题，我只想确认我理解了 QThread 的主要原则之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:49:40.933

我可能是错的，但文档告诉我们 quit 和 exit(int) 完成线程事件循环。但是退出线程事件循环并不意味着线程已经完成。您甚至可以通过子类化和重新实现 run 方法来运行另一个 qthread，甚至无需启动事件循环。所以调用quit方法并不意味着线程isFinished()返回true。只需将自己连接到 finished() 信号并使用完成的线程做你想做的事。

# javascript - Jquery 总是恢复可拖动对象有效

> ID：15495833
> 
> 赞同：1
> 
> 时间：2013-03-19T09:37:13.807
> 
> 标签：javascript, jquery, html, drag-and-drop

我有一个拖放示例，当它被拖放到可拖放的 div 中时，它会将可拖动对象恢复到其原始位置。

我的问题是，当我的可拖动对象上的还原有效时，我可以将对象拖动到页面上的不同位置，我的可拖动对象只有在我将它们放入可放置 div 时才会还原。

无论您将它们拖到页面的哪个位置，我都希望我的可拖动对象恢复原状？

我已经尝试过这个工作但不起作用。

```
{
revert: 'vaild',
stop: function(){
    $(this).draggable('option','revert','invalid');
} 
```

我的问题是，当我将可拖动对象放入可放置 div 时，我的可拖动对象会还原但不会还原。

```
 <script>
        $(function() {
        $( "#draggable" ).draggable({ revert: "valid" });
        $( "#draggable1" ).draggable({ revert: "valid" });
        $( "#droppable" ).droppable({
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
        var dragElemId = ui.draggable[0].id;
        var imgPath = $('#' + dragElemId).attr("des-image");
        $( this )
            .find( ".drop-image" ).removeAttr("src").attr("src",imgPath);
        }
        });
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T09:49:47.730

将`revert`属性设置为`true`将导致它们始终还原。

```
 $( "#draggable" ).draggable({ 
       revert: true
   });
   $( "#draggable1" ).draggable({ 
       revert: true
   });
   $( "#droppable" ).droppable({
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
             //ommited for brevity
        }
    }); 
```

**工作示例：http:** [//jsfiddle.net/yLuvv/](http://jsfiddle.net/yLuvv/)

# jquery - jQuery UI 外部标签插件问题

> ID：15495836
> 
> 赞同：0
> 
> 时间：2013-03-19T09:37:18.850
> 
> 标签：jquery, html, jquery-ui, jquery-ui-tabs, flexigrid

在我链接了一个外部 html - 这是一个 flexigrid 表之后 - 所有的 flexigrid 格式和功能都变得非常有问题。有没有人以前遇到过这个问题或有什么建议？

这就是我链接外部 html 文档的方法：

```
 <div id = "tabs">

 <li><a href="#paymentsTab">Transaction History</a></li><

 <div id = "paymentsTab"></div>

 </div>

 </div>

<script>

    $(function() {
            $('#tabs').tabs();
            $('#paymentsTab').load('financialTransactions.html');
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:38:18.807

这就是我为解决它所做的：

```
 $(function() {
            $( "#tabs" ).tabs({
                    beforeLoad: function( event, ui ) {
                            ui.ajaxSettings.dataTypes[0] = "html"; //very important!
                            ui.jqXHR.error(function() {
                                    ui.panel.html(
                                    "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                                    "If this wouldn't be a demo." );
                            });
                    }
            });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:40:32.327

你正在做的事情并不重要 这样做：

```
<div id="tabs">
 <ul>
  <li><a href="financialTransactions.html">Transaction History</a></li>
 </ul>
</div>

<script>
    $(function() {
            $('#tabs').tabs();
    });
</script> 
```

查看[文档](http://jqueryui.com/tabs/#ajax)。这个例子和你喜欢做的一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:41:56.417

尝试：

```
$(document).ready(function(){
            $('#tabs').tabs();
            $('#paymentsTab').load('financialTransactions.html');
        }); 
```

# c# - 在 WPF 的列表框中打印大数据

> ID：15495840
> 
> 赞同：4
> 
> 时间：2013-03-19T09:37:25.783
> 
> 标签：c#, wpf

我在使用“printDlg.PrintVisual("lblView","List box printing") 打印大值时遇到一些问题。只有可见的列表的第一部分才出现在打印的文档中。有些部分被剪裁了。

如何打印整行？

我的 WPF 应用程序中有一个列表框，我正在将大数据填充到此列表框。

```
<ListBox Grid.Row="1" Margin="2,2,2,2" ItemsSource="{Binding datas}" 
                  Visibility="{Binding Checked,Converter={StaticResource BooleanToNegationVisibility}}"
                 x:Name="lblView" FontFamily="Courier New" FontSize="12" >
................
............
</listox> 
```

请指教

提前致谢，

罗希尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:27:42.483

```
 PrintDialog printDlg = new PrintDialog();
 printDlg.PrintVisual(ListBox1, "Listbox Printing."); 
```

# git - GitLab git 用户密码

> ID：15495843
> 
> 赞同：57
> 
> 时间：2013-03-19T09:37:32.120
> 
> 标签：git, gitlab

我刚刚安装了 GitLab。

我创建了一个名为 project-x 的项目。

我创建了几个用户并将其分配给项目。

现在我尝试克隆：

```
 git clone git@192.168.0.108:project-x.git 
```

它提示我输入密码。

我应该使用什么密码？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-08-17T11:18:51.257

与当前情景不严格相关。有时当您被提示输入密码时，这是因为您添加了错误的*源格式（HTTPS 而不是 SSH）

**HTTP(S)**协议通常用于具有强用户名+pass 的公共存储库
**SSH**身份验证更常见于内部项目，您可以使用 ssh-key-file 和简单的密码短语进行身份验证
**GitLab**用户更有可能使用**SSH**协议

查看您的远程信息

```
git remote -v 
```

如果您看到**HTTP(S)**地址，这是将其更改为**SSH**的命令：

```
git remote set-url origin git@gitlab.my_domain.com/example-project.git 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-03-19T09:52:51.093

> 它提示我输入密码。

它不应该。
如果您拥有代表有权访问的用户的正确公钥/私钥`project-x`，那么 gitlab 不会要求您提供任何东西。

但这假设`ssh -vT git@192.168.0.108`首先起作用。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-19T13:08:59.193

[https://github.com/gitlabhq/gitlab-shell/issues/46](https://github.com/gitlabhq/gitlab-shell/issues/46)的解决方案对我有用。

通过设置权限：

```
chmod 700 /home/git/.ssh
chmod 600 /home/git/.ssh/authorized_keys 
```

密码提示消失。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-30T15:31:48.423

使用 4096 位密钥时，我遇到了同样的问题：

> $ ssh-keygen -t rsa -C "GitLab" -b 4096
> $ ssh -vT git@gitlabhost
> ...
> debug1：提供公钥：/home/user/.ssh/id_rsa
> debug1：可以继续的身份验证：公钥，密码
> debug1：尝试私钥：/home/user/.ssh/id_dsa
> debug1：尝试私钥：/home/user/.ssh/id_ecdsa
> debug1：下一个验证方法：密码
> git@gitlabhost的密码：
> 连接被主机关闭

但是使用 2048 位密钥（默认大小），ssh 连接到 gitlab 而不提示输入密码（在将新的 pub 密钥添加到用户的 gitlab ssh 密钥之后）

> $ ssh-keygen -t rsa -C "GitLab"
> $ ssh -vT git@gitlabhost
> 欢迎来到 GitLab，Joe 用户！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-04T20:37:43.980

如果主机名称中包含“-”，则可能会发生这种情况。（即使根据[RFC 952](https://www.rfc-editor.org/rfc/rfc952 "RFC 952")这是合法的。）（使用 git 2.13.2 在 Windows 10 下使用 Git Bash 进行测试。）

ssh 提示我输入名称中恰好有“-”的任何主机的密码。这似乎纯粹是 ssh 配置文件解析的问题，因为向 ~/.ssh/config 添加别名（并在我的 git 远程 url 中使用该别名）解决了这个问题。

换句话说，尝试在您的 C:/Users/{username}/.ssh/config 中添加类似以下内容

```
Host {a}
    User git
    Hostname {a-b.domain}
    IdentityFile C:/Users/{username}/.ssh/id_rsa 
```

并且您在哪里有表格的遥控器

```
origin  git@a-b.domain:repo-name.git 
```

更改 url 以使用以下表单

```
git remote set-url origin git@a:repo-name.git 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-11-04T17:30:23.530

我的问题是我有一个 DNS 条目`gitlab.example.com`指向我的负载均衡器。所以当我尝试命令时，`ssh git@gitlab.example.com`我真的连接到了错误的机器。

我在我的`~/.ssh/config`文件中做了一个条目：

```
Host gitlab.example.com
    Hostname 192.168.1.50 
```

这浪费了很多时间...

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-09-16T20:05:31.170

在 GitLab 中添加新的 SSH 密钥后，检查 SSHD 中是否包含“git”组`AllowGroups`（对于 Debian `/etc/ssh/sshd_config`）。如果没有，添加它并重新启动 sshd ( `systemctl restart ssh`)。

按照上面的建议进行测试`ssh -vT git@192.168.8.2`。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-05-10T10:43:46.687

在列表中添加另一个原因......在我的情况下，我发现这个问题是由服务器上的 SELinux 权限问题引起的。如果您的服务器正在运行 Fedora / CentOS / Red Hat，这是值得检查的。要测试这种情况，您可以运行：

客户端：`ssh -vT git@<gitlab-server>` --要求输入密码
**服务器**：`sudo setenforce 0`
客户端：`ssh -vT git@<gitlab-server>` --成功
**服务器**：`sudo setenforce 1`

在我的情况下，gitlab/git 用户的`authorized_keys`文件具有错误的 SELinux 文件上下文，并且 ssh 服务被拒绝读取它的权限。我在服务器端修复了这个问题，如下所示：

```
sudo semanage fcontext -a -t ssh_home_t /gitlab/.ssh/
sudo semanage fcontext -a -t ssh_home_t /gitlab/.ssh/authorized_keys
sudo restorecon -F -Rv /gitlab/.ssh/ 
```

然后我就可以`git clone`按预期在客户端了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-02-04T15:35:20.043

我有正确的公钥/私钥，但似乎它无论如何都不起作用（出现相同的错误，提示输入 git-user 密码）。重新启动计算机后，它仍然有效！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-01-15T15:48:41.127

在我的情况下，我使用了一对没有默认名称的键`id_rsa`和`id_rsa.pub`.

生成具有这些名称的密钥解决了这个问题，实际上我发现它是在查看`ssh -vT my_gitlab_address`. 奇怪的事实：它可以在一台装有 Ubuntu 的计算机上运行，​​但不能在其他具有不同发行版和旧版本 OpenSSH 的计算机上运行。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-02T02:30:08.377

Windows机器的相同解决方案：

1.  生成 SSH 密钥并将密钥添加到 Git 实验室服务器
2.  确保 2 个 SSH 密钥文件位于 /.ssh 文件夹中（例如 C:\Users\xxx.ssh）

克隆应该是成功的，不需要密码。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-05T13:06:10.910

我正在使用一个安装在centos 服务器上的**mac.gitlab 。**

我已经尝试了上述所有方法，并为我找到了最终答案：

错误的：

```
ssh-keygen -t rsa 
```

对：

```
 ssh-keygen -t rsa -C "your.email@example.com" -b 4096 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-08-14T22:07:58.127

在使用 VS Code 下的终端的 Windows 10 上，我在尝试执行以下操作时收到“git@gitlab 的密码：”提示：

```
git push -u origin --all 
```

我已经在 windows 和 gitlab 中建立了我的 ssh 凭据，但我使用了 Windows 10 bash key-gen 来执行此操作。然后解决方案是在 VS 代码终端中调用 bash，然后再次发出命令。

```
bash
git push -u origin --all 
```

它成功了。

为了避免手动使用 bash/git，我在 windows .ssh/id_rsa 和 bash shell .ssh/id_rsa 之间放置了一个符号链接：

```
C:\Users\bruce\.ssh>mklink id_rsa C:\Users\bruce\AppData\Local\lxss\home\bruce\.ssh\id_rsa 
```

VS Code Git 菜单操作（推送、拉取等）现在可与 gitlab 一起使用

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-06-18T04:17:28.997

就我而言，事实证明 gitlab 正在运行`docker`，并且端口映射为 4022/22。

因此我必须通过编辑`~/.ssh/config`来指定端口`Port 4022`，例如：

```
Host gitlab-local
    Hostname        192.168.1.101
    User git
    Port 4022
    IdentityFile    ~/.ssh/id_rsa.pub
    # LogLevel DEBUG3 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-01-25T12:36:17.020

当`git clone`要求输入密码时，您的本地计算机可能存在问题。我的问题是我正在使用自定义路径来保存 ssh 密钥，并且该路径对 git 不可见。使用向您建议的默认路径或使用将文件添加到自定义位置`ssh-add <file>`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-28T07:53:17.447

我遇到了同样的问题，我花了很多时间寻找！

我有使用 Eclipse 从 GitLab 导入项目的想法。

正确导入项目后，我对以下配置进行了比较：

*   我导入到 Eclispe 中的项目 Git 存储库（“在 Eclipse 中”，Git 存储库，在 myprojectRepo / 工作目录 / .git / config 中）
*   在.git / config中制作的那个，我想用git推送我的项目：git push ...并要求我输入密码。

惊喜：遥控器在两种情况下都不相同。我在 Eclipse 中提交了相同的内容，并且一切正常。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-14T17:05:10.537

在 Windows 10 中遇到了同样的问题（不知道这是否相关）。一切设置正确，`ssh -vT git@myserver`命令成功，但 Gitlab 仍然要求我输入密码。

在 Gitlab 中删除然后重新创建密钥是我的诀窍。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-04T10:22:33.177

在我的 Windows 10 机器上，这是因为 SSH_GIT 环境变量未设置为使用我在机器上安装的 putty plink。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-03-20T12:03:18.223

通常，如果您在系统上通过 ssh 设置了多个密钥（我的设备运行的是 Windows 10），您会遇到此问题，修复方法是：

前提条件：按照 GitLab 的指示设置 SSH 密钥

1.  使用 Notepad++ 或您喜欢的编辑器打开 /c/Users//.ssh/config 文件
2.  将以下内容粘贴到其中。 **主机身份文件 ~/.ssh/**

请注意，第二行之前有一个空格，避免此解决方案不起作用非常重要。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-15T05:51:39.803

如果您确定已将 key.pub 的内容上传到 GitLab，则： 1- 打开 Git Bash “Not CMD” 2- 浏览到解决方案文件夹 “CD 路径” 3- Type `Git Init` 4- Type `Git Add .` 4- Type `Git Commit` 6- Type`Git Push`

它会工作.. 另一个提示：确保您复制密钥的文件的路径是正确的，并且与创建密钥时在 CMD 上显示的路径相同

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-08-13T11:03:48.093

以防万一有人遇到和我一样的问题。我在 docker env 中运行 GitLab 服务器，我想将 ssh 连接端口设置为 2202，而不是 22，所以我将主机的 2202 端口绑定到 docker 容器的 2202 端口。我22岁没做。

然后我忘记了我必须更改ssh的默认连接端口......所以我和这个问题作者有同样的错误。

首先，我打开了#22端口，它工作了，然后，我将ssh连接端口更改为2202，一切正常。

我自己很愚蠢，但它可能会帮助其他傻瓜:)

# php - 生成用户并发送发送密码

> ID：15495854
> 
> 赞同：0
> 
> 时间：2013-03-19T09:37:58.267
> 
> 标签：php, security, hash

我有这样的问题。我需要从 CVS 数据生成用户，然后用他的登录名和密码向用户发送电子邮件，而不是在生成的那一刻。问题是，密码是散列的，我只能检查它，而不是从数据库中获取它。我只有另一个表/库的解决方案，只有电子邮件的登录名/密码，没有散列，但从安全性的角度来看这是错误的。也许有人有这样的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:39:59.800

向他们发送一个链接，他们将能够在其中设置新密码 - 我想这将是最安全的。

# mysql - 在数据库中插入文本如何处理'

> ID：15495858
> 
> 赞同：0
> 
> 时间：2013-03-19T09:38:03.250
> 
> 标签：mysql, sql, sqlite, android-sqlite

嗨，我正在动态地将一般评论插入到我的数据库中。我的查询如下所示：

```
String sql = "insert into table (comment) values('"+ dynamic_comment + "');"; 
```

当使用插入如下内容时出现错误：

> 我很好

因为当时我的查询变成：

```
insert into table (comment) values('I'm doing great'); 
```

***'我很好'***

```
Error: Caused by: android.database.sqlite.SQLiteException: near "t": 
syntax error (code 1): , while compiling: 
insert into timeline(comment) values('Can't belive it really works'); 
```

有人能告诉我如何克服这个问题，以及在使用数据库时我会面临多少其他类似的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:42:59.520

您需要使用准备好的语句，很长一段时间以来，将原始字符串连接到查询中一直是不好的做法。

从[这里](https://stackoverflow.com/questions/433392/how-do-i-use-prepared-statements-in-sqlite-in-android)：

```
SQLiteDatabase db = dbHelper.getWritableDatabase();
SQLiteStatement stmt = db.compileStatement("insert into table (comment) values(?)");
stmt.bindString(1, dynamic_comment);
stmt.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:41:42.433

您需要在插入之前转义字符串变量。

```
String sql = "insert into table (comment) values('"+ DatabaseUtils.sqlEscapeString(dynamic_comment) + "');"; 
```

* * *

上述方法容易受到 SQL 注入攻击。为了更安全，请了解有关使用[参数语句](http://www.devart.com/dotconnect/sqlite/docs/Parameters.html)的更多信息。

与您的查询相同的示例将是：

```
SQLiteDatabase db = dbHelper.getWritableDatabase();
SQLiteStatement stmt = db.compileStatement("INSERT INTO `table` (`comment`) values(?)");
stmt.bindString( 1, dynamic_comment );
stmt.execute(); 
```

# python - 在python中留下第一行和最后一行元素

> ID：15495862
> 
> 赞同：2
> 
> 时间：2013-03-19T09:38:17.477
> 
> 标签：python

我有一个 CSV 文件，用于绘制图形。我想从 csv 文件中删除第一行和最后一列，因为第一行包含命名，最后一行包含空格。一旦我删除了第一行和最后一行，程序就可以正常工作。如何删除这个提取文件中的行。我需要进行哪些更正才能自动运行

```
import csv
import matplotlib.pyplot as plt

plt.figure()

file =open("graph.csv","r+")
reader = csv.reader(file)
TS=[]
TIME=[]
ACT_ANGLE=[]
DES_ANGLE=[]
for line in reader:

       TS.append(line[12])
       TIME.append(line[5])
       ACT_ANGLE.append(line[7])
       DES_ANGLE.append(line[6])

x=TS
z=ACT_ANGLE
#print x
y=DES_ANGLE

plt.plot(x,y)
plt.xlabel('Time in Sec')
plt.ylabel('Actual angle in degree')
plt.show()
plt.savefig("example.png") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:49:23.530

要删除第一行，您可以改用 csv.DictReader，这也将使您的代码更具可读性，允许您按名称而不是按索引获取值。对于最后一行，这样的事情会起作用：

```
for line in [line for line in reader][:-1]: 
```

...但这会立即将整个文件读入内存以创建列表。由于您已经在重新分配值，因此只需简单更改为

```
x=TS[:-1]
z=ACT_ANGLE[:-1]
y=DES_ANGLE[:-1] 
```

应该做，并且

```
x=TS[1:][:-1]
z=ACT_ANGLE[1:][:-1]
y=DES_ANGLE[1:][:-1] 
```

如果您不想使用 dictreader，也会删除第一行。但是，与第一种方法相比，这会导致更多的代码重复。

# xslt - 创建 xslt 文件

> ID：15495870
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:38:37.263
> 
> 标签：xslt

我对 xslt 真的很陌生，但我接到了一项任务。这里实际上需要将下面的 xml 转换为表格格式。请帮帮我。也请给我一些好的网站来参考。

```
 <toc-div>
            <toc-item>
                <toc-title>CHAPTER 1 INTRODUCTION</toc-title>
                <toc-subitem num="1.">
                    <toc-title>The British Virgin Islands</toc-title>
                    <toc-pg>1.001</toc-pg>
                </toc-subitem>
                <toc-subitem num="2.">
                    <toc-title>History and early constitutional developments</toc-title>
                    <toc-pg>1.003</toc-pg>
                </toc-subitem>
                <toc-subitem num="3.">
                    <toc-title>Development as a financial centre</toc-title>
                    <toc-pg>1.008</toc-pg>
                </toc-subitem>
                <toc-subitem num="4.">
                    <toc-title>Common Law and Equity</toc-title>
                    <toc-pg>1.015</toc-pg>
                </toc-subitem>
                <toc-subitem num="5.">
                    <toc-title>Statutes</toc-title>
                    <toc-pg>1.017</toc-pg>
                </toc-subitem>
                <toc-subitem num="6.">
                    <toc-title>Taxation</toc-title>
                    <toc-pg>1.022</toc-pg>
                </toc-subitem>
            </toc-item>
</toc-div> 
```

我想要一个标题为 1 的表格输出，第二个是数字，第三个是另一个标题，最后是 toc-pg。

以下是我尝试过的（这是部分的，因为我被卡住了）

```
 <?xml version="1.0" encoding="utf-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ntw="Number2Word.uri" exclude-result-prefixes="ntw" version="1.0">
    <xsl:output method="html"/>
    <xsl:variable name="ThisDocument" select="document('')"/>
    <xsl:template match="/">
        <html>
            <head>
                <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
                <title>
                    <xsl:value-of select="chapter/title"/>
                </title>
                <link href="er:#css" rel="stylesheet" type="text/css"/>
            </head>
            <body>
                <xsl:apply-templates/>

            </body>
        </html>
    </xsl:template>
    <xsl:template match="toc-item" name="x">
        <table>
            <tr>
              <td>
                <xsl:value-of select="toc-title"/>

    </td>
    <xsl:apply-templates/>
            </tr>
        </table>

    </xsl:template>
    <xsl:template match="toc-subitem/*" mode="a" name="a">
        <td><xsl:value-of select="toc-title"/></td>
    <xsl:apply-templates></xsl:apply-templates>
    </xsl:template>
    <xsl:template match="toc-subitem" name="b">
        <xsl:variable name="z">
            <xsl:value-of select="@num"/>
        </xsl:variable>
        <td><xsl:value-of select="$z"/></td>
   <xsl:call-template name="c"></xsl:call-template>
</xsl:template>

    <xsl:template match="toc-subitem" name="c" mode="c">
        <xsl:for-each select="toc-title">
        <td>
            <xsl:value-of select="current()"/>
        </td>
        </xsl:for-each>
    <xsl:apply-templates/>
</xsl:template>
    <xsl:template match="toc-pg" name="pg">
        <td>
    <xsl:value-of select="current()"/>    
    </td>
    </xsl:template>
    <!-- Namespace ntw-->
    <ntw:nums num="1" word="first"/>
    <ntw:nums num="2" word="second"/>
    <ntw:nums num="3" word="third"/>
    <ntw:nums num="4" word="forth"/>
    <ntw:nums num="5" word="fifth"/>
    <ntw:nums num="6" word="sixth"/>
    <ntw:nums num="7" word="seventh"/>
    <ntw:nums num="8" word="eighth"/>
    <ntw:nums num="9" word="nighth"/>
    <ntw:nums num="10" word="tenth"/>
    <!-- Namespace ntw ends -->
</xsl:stylesheet> 
```

我希望我的 html 格式如下

```
 <table>
         <tr>
            <td class="Main">CHAPTER 1 INTRODUCTION</td>
            <td><tr>
                <td class="a">1.</td>
                <td class="b">The British Virgin Islands</td>
                <td class="c">1.001</td>
            </tr></td>
            <td><tr>
                <td class="a">2.</td>
                <td class="b">History and early constitutional developments</td>
                <td class="c">1.003</td>
            </tr></td>
        <td><tr>
            <td class="a">3.</td>
            <td class="b">Development as a financial centre</td>
            <td class="c">1.008</td>
       </tr> </td>
        <td><tr>
            <td class="a">4.</td>
            <td class="b">Common Law and Equity</td>
            <td class="c">1.015</td>
        </tr></td>
        <td><tr>
            <td class="a">5.</td>
            <td class="b">Statutes</td>
            <td class="c">1.017</td>
        </>tr</td>
        <td>
<tr>
            <td class="a">6.</td>
            <td class="b">Taxation</td>
            <td class="c">1.022</td>
    </tr>    </td>
         </tr>
      </table> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:36:14.293

这应该这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:ntw="Number2Word.uri" 
                exclude-result-prefixes="ntw" version="1.0">
  <xsl:output method="html" omit-xml-declaration="yes"/>
  <xsl:template match="/">
    <html>
      <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <title>
          <xsl:value-of select="chapter/title"/>
        </title>
        <link href="er:#css" rel="stylesheet" type="text/css"/>
      </head>
      <body>
        <table>
          <xsl:apply-templates/>
        </table>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="toc-title">
    <tr>
      <td class="Main" colspan="3">
        <xsl:value-of select="."/>
      </td>
    </tr>
  </xsl:template>
  <xsl:template match="toc-subitem" >
    <tr>
      <td class="a">
        <xsl:value-of select="@num"/>
      </td>
      <td class="b">
        <xsl:value-of select="toc-title"/>
      </td>
      <td class="c">
        <xsl:value-of select="toc-pg"/>
      </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>
    </title>
    <link href="er:#css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <table>

    <tr>
        <td class="Main" colspan="3">CHAPTER 1 INTRODUCTION</td>
      </tr>
    <tr>
        <td class="a">1.</td>
        <td class="b">The British Virgin Islands</td>
        <td class="c">1.001</td>
      </tr>
    <tr>
        <td class="a">2.</td>
        <td class="b">History and early constitutional developments</td>
        <td class="c">1.003</td>
      </tr>
    <tr>
        <td class="a">3.</td>
        <td class="b">Development as a financial centre</td>
        <td class="c">1.008</td>
      </tr>
    <tr>
        <td class="a">4.</td>
        <td class="b">Common Law and Equity</td>
        <td class="c">1.015</td>
      </tr>
    <tr>
        <td class="a">5.</td>
        <td class="b">Statutes</td>
        <td class="c">1.017</td>
      </tr>
    <tr>
        <td class="a">6.</td>
        <td class="b">Taxation</td>
        <td class="c">1.022</td>
      </tr>

</table>
  </body>
</html> 
```

# python - 将长复杂的字符串转换为 json 或字典

> ID：15495871
> 
> 赞同：0
> 
> 时间：2013-03-19T09:38:42.263
> 
> 标签：python, json

是否可以将以下内容`string`转换为字典或`json`对象：

> {“created_at”：“Thu Feb 19 11:28:52 +0000 2009”，“description”：“Le p\u00f4le de comp\u00e9titivit\u00e9 de la fili\u00e8re des contenus et services num\u00e9riques。http [:/ /www.capdigital.com](http://www.capdigital.com) // [http://www.facebook.com/capdigitalparisregion](http://www.facebook.com/capdigitalparisregion) ", "favourites_count": 7, "followers_count": 5996, "friends_count": 671, "geo_enabled": true, "id": 21290877 ，“lang”：“en”，“listed_count”：344，“location”：“Paris”，“name”：“Cap Digital”，“profile_background_color”：“920707”，“profile_background_tile”：true，“profile_image_url”： “ [http://a0.twimg。](http://a0.twimg.com/profile_images/2263411541/cap_square_normal.png)com/profile_images/2263411541/cap_square_normal.png ", "profile_link_color": "0084B4", "profile_sidebar_fill_color": "[http://a0.twimg.com/profile_background_images/157539330/xad3a63c73eff9ba8f89f81e01c10a4d.jpg](http://a0.twimg.com/profile_background_images/157539330/xad3a63c73eff9ba8f89f81e01c10a4d.jpg) ", "profile_text_color": "333333", "protected": false, "screen_name": "Cap_Digital", "status": {"created_at": "Mon Mar 18 16:23:05 +0000 2013", "favorited": false, "id": 313687008188956672, "retweet_count": 5, "retweeted": false, "source": "http://clocktweets.com /\" rel=\"nofollow\">Clocktweets", "text": "Plus que quelques jours avant @5Plus_Forum, conf\u00e9rence sur la ville intelligencee！ [http](http://t.co/GV5o6fiqUh) ://t.co/GV5o6fiqUh ", "截断": false}，“statuses_count”：2121，“time_zone”：“巴黎”，“url”：“ [http://www.capdigital.com](http://www.capdigital.com) ”，“utc_offset”：3600}

我试过`json.load()`它给出了以下回溯：

```
Traceback (most recent call last):
  File "C:\Users\schatterjee\workspace\twittermining\main.py", line 82, in <module>
    treat_files()      
  File "C:\Users\schatterjee\workspace\twittermining\main.py", line 74, in treat_files
    d = json.load(row[0])
  File "C:\Python27\lib\json\__init__.py", line 274, in load
    return loads(fp.read(),
AttributeError: 'str' object has no attribute 'read' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:42:54.887

您应该使用`json.loads()`(with an `s`for "string") 而不是`json.load()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:44:54.267

您提供的字符串中有两个错误，修改后的字符串被正确解析为 JSON

```
{'created_at': 'Thu Feb 19 11:28:52 +0000 2009',
 'description': 'Le p\\u00f4le de comp\\u00e9titivit\\u00e9 de la fili\\u00e8re des contenus et services num\\u00e9riques. http://www.capdigital.com // http://www.facebook.com/capdigitalparisregion',
 'favourites_count': 7,
 'followers_count': 5996,
 'friends_count': 671,
 'geo_enabled': True,
 'id': 21290877,
 'lang': 'en',
 'listed_count': 344,
 'location': 'Paris',
 'name': 'Cap Digital',
 'profile_background_color': '920707',
 'profile_background_tile': True,
 'profile_image_url': 'http://a0.twimg.com/profile_images/2263411541/cap_square_normal.png',
 'profile_link_color': '0084B4',
 'profile_sidebar_fill_color': 'http://a0.twimg.com/profile_background_images/157539330/xad3a63c73eff9ba8f89f81e01c10a4d.jpg',
 'profile_text_color': '333333',
 'protected': False,
 'screen_name': 'Cap_Digital',
 'status': {'created_at': 'Mon Mar 18 16:23:05 +0000 2013',
            'favorited': False,
            'id': 313687008188956672L,
            rel=\\"nofollow\\">Clocktweets", # here
            'retweet_count': 5,
            'retweeted': False,
            'source': 'http://clocktweets.com/\\',
            'text': 'Plus que quelques jours avant @5Plus_Forum, conf\\u00e9rence sur la ville intelligente ! http://t.co/GV5o6fiqUh',
            'truncated': False},
 'statuses_count': 2121,
 'time_zone': 'Paris',
 'url': 'http://www.capdigital.com',
 'utc_offset': 3600} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:43:05.153

您可以先将字符串转换为类似文件的缓冲区：

```
json.load(StringIO.StringIO(your_string)) 
```

# ruby - ci_reporter 无法生成 xml 输出

> ID：15495872
> 
> 赞同：1
> 
> 时间：2013-03-19T09:38:42.763
> 
> 标签：ruby, xml, jenkins, report

我已经安装了 Ruby 2.0.0 和 Ruby 1.8.7、ci_reporter 1.8.4、测试单元 2.5.4、rake 10.0.3 和 pik，以便能够在我的 2 个 ruby​​ 版本之间切换。我正在使用 Jenkins 1.501 进行“自动化测试”。

这是我的 rakefile ：

```
require 'rake'
require 'rake/testtask'
require 'rake/packagetask'
gem 'ci_reporter'
gem 'test-unit' 
require 'test/unit' 
require 'ci/reporter/rake/test_unit'  #http://juretta.com/log/2008/11/11/hudson_test_drive_part_1_rails/
require 'ci/reporter/rake/rspec'

task :test do
  ruby "test/test1.rb"
end 
```

我看到有些人通过更改解决了这个问题：

```
require 'test/unit' 
require 'ci/reporter/rake/test_unit' #http://juretta.com/log/2008/11/11/hudson_test_drive_part_1_rails/ 
```

经过 ：

```
gem 'ci_reporter'
require 'ci/reporter/rake/test_unit_loader' 
```

但它给了我一个错误。

我有以下文件：

```
require 'test/unit'

class Test1 < Test::Unit::TestCase

  def test_add
    s = 4 + 1
    assert_equal(5, s)
  end

end 
```

我的詹金斯配置是：

build --> 执行 windows 批处理 cmd --> rake ci:setup:testunit test CI_REPORTS=results post-action-build --> 发布 junit 报告 --> results/*.xml （这里我有以下警告`'results / *. xml' does not match anything: even 'results' not exist`：）

文件夹“结果”是自己创建的吗？

最后是我的控制台输出：

```
C:\Jenkins\jobs\Jenkins TestLink Ruby\workspace>rake ci:setup:testunit test CI_REPORTS=reports 
rm -rf reports
C:/Ruby200-x64/bin/ruby.exe test/test1.rb
Loaded suite test/test1
Started
.

Finished in 0.001 seconds.

1 tests, 1 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications
100% passed

1000.00 tests/s, 1000.00 assertions/s
Recording of test results
No test report file was not found. Configuration error?
Build step 'Publish the report of the results of JUnit tests' changed build result to FAILURE
Finished: FAILURE 
```

没有文件夹结果，也没有 xml 输出。关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:03:15.243

我用这个解决了我的问题：

*   将以下要求添加到我的 test.rb ：`require 'test/unit'`

    `require 'ci/reporter/rake/test_unit_loader'` `gem 'test-unit'`

*   将以下要求添加到我的 rakefile.rb ：`require 'ci/reporter/rake/test_unit' #http://juretta.com/log/2008/11/11/hudson_test_drive_part_1_rails/`

*   使用 cmd 执行：`rake CI_REPORTS=reports test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:59:56.460

首先，要回答您关于报告目录的问题，它应该在您的命令第一次成功运行后创建。警告只是詹金斯让你知道它当时不存在。

其次，我认为您的 CI 报告未生成的原因是因为您的`CI_REPORTS`环境变量在命令中的位置错误：它应该位于行首，例如

```
CI_REPORTS=reports rake ci:setup:testunit test 
```

### 更新

这会导致 OP 出错，尽管它在大多数 shell 中都有效。为了达到同样的目的，将环境变量导出为单独的命令：

```
export CI_REPORTS=reports
rake ci:setup:testunit test 
```

希望有帮助。

# java - 异步 URL 获取（如果失败则重试而不阻塞）

> ID：15495874
> 
> 赞同：1
> 
> 时间：2013-03-19T09:38:50.527
> 
> 标签：java, multithreading, google-app-engine

我正在使用异步 url 获取调用来访问来自外部服务器的信息，同时进行其他处理。如果原始异步 url 获取调用失败而没有返回原始（主）线程，因为它忙于做其他事情，我希望能够重试调用或将 url 更改为备份 url。这样做的最佳方法是否只是生成一个执行同步 url 获取的辅助线程（我猜为了这个工作我必须暂停/恢复在两个线程之间切换，因为应用程序引擎不是多核的）？或者在重试 url 获取操作之前等待主线程完成它正在做的所有事情会更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:08:35.677

在您的用例中，使用运行同步 URLFetch 的辅助线程会很好。从开发人员的角度来看，拥有非多核 CPU 不会影响线程的操作，因为 JVM 和/或操作系统会为您处理。

一个小警告，因为 GAE 是一个沙盒环境，您需要通过 Google 的 API 创建线程。如果您还没有，您可以在[此处](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)查看有关如何生成 App Engine 线程的简短文档。

请注意，生成的线程的生命周期仅限于原始请求的生命周期。（即前端实例请求 60 秒）另一个好主意是使用辅助线程上[的请求计时器](https://developers.google.com/appengine/docs/java/runtime#The_Request_Timer)定期检查剩余的可用时间，然后再进行第二次 URLFetch 调用，这样您就可以调整超时限制或让您的请求正常终止如果没有足够的剩余时间。

# java - 使用 JPA (Eclipselink) 在 H2 数据库中执行全文搜索

> ID：15495875
> 
> 赞同：1
> 
> 时间：2013-03-19T09:38:58.740
> 
> 标签：java, jpa, full-text-search, eclipselink, h2

在我的项目中，我使用嵌入式 H2 数据库和 JPA (eclipselink)。我需要进行这样的查询：`SELECT * FROM products WHERE title like '%the_name%'` 前导 % 消除了使用索引，因此 H2 执行全表扫描。我必须提高该查询的性能。我发现的可能解决方案是在该列上创建全文索引并进行全文搜索。必须使用以下参数创建数据库：

```
properties.put("eclipselink.ddl-generation", "create-tables");
properties.put("eclipselink.ddl-generation.output-mode", "database"); 
```

如何使用 JPA 和 H2 来做到这一点？如何从 JPA 制作索引和查询？请举个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:18:49.257

您可以执行自己的 DDL 来创建全文索引，可以通过自己的脚本，也可以在应用启动时通过 JPA，例如使用 SessionCustomizer 或 SessionEvent。

要调用全文函数，您可以使用 JPQL FUNC 或 FUNCTION 运算符。

请参阅， [如何在 java 中使用 H2 数据库的全文搜索功能？](https://stackoverflow.com/questions/6611764/how-to-use-full-text-search-in-h2)

# database - 如何使用多个 if 语句将记录插入数据库

> ID：15495877
> 
> 赞同：0
> 
> 时间：2013-03-19T09:38:58.910
> 
> 标签：database, if-statement

我是一名精益程序员，我想根据值将记录插入数据库。如果值为 1，则插入特定列，如果值为 2，则插入另一列，依此类推。这是if代码，但我不知道sql语句会是什么样子。如果我能得到帮助，我将不胜感激。

```
 if($dm_file_owner == 1){

        $me = $dm_file_owner;
    }

    elseif ($dm_file_owner == 2){

        $office = $dm_file_owner;
    }

    elseif ($dm_file_owner == 3){

        $department = $dm_file_owner;
    }

    elseif ($dm_file_owner == 4){

        $directorate = $dm_file_owner;

    } 
```

如果 $dm_file_owmer 等于 1，则插入列 me，如果 2，则插入列 office，如果 3，则插入列部门，依此类推。我不知道如何编写sql代码，如果我能得到帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:02:58.170

只需初始化所有变量并执行类似于以下语句的 SQL 插入语句。

```
INSERT INTO your_table_name (your_column1,your_column2,your_column3,your_column4,...) VALUES ('$me','$office','$department','$directorate',...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:12:18.817

我想说只为每个 IF 语句编写单独的 INSERT 语句。然后把对应的INSERT放在IF里面就好了。

如果您正在寻找所需的确切 INSERT，正如 blueszc 已经说过的那样，我们需要有关您如何连接到数据库的更多信息。考虑到您是新手这一事实，您可能正在使用[mysql_query](http://www.php.net/manual/en/function.mysql-query.php)（您应该远离）或[PDO](http://www.php.net/manual/en/pdo.prepared-statements.php)。

# android - 当我尝试从一个片段导航到另一个片段时，ViewPager 不工作

> ID：15495881
> 
> 赞同：0
> 
> 时间：2013-03-19T09:39:03.620
> 
> 标签：android, android-fragments, android-viewpager

我正在使用`ViewPager`我有 5 个的应用程序`Fragments`，我有两种从一种导航`Fragment`到另一种的方法，一种是使用`ViewPager`水平交换，第二种是我可以`button`通过单击在每个页面中进行导航，我可以导航`Fragments`，但是当我正在使用导航`Button`我`ViewPager`不工作意味着我无法执行水平交换。是否有人知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:47:34.707

```
((ViewPager) mView.findViewById(R.id.viewpager_id)).setCurrentItem(youId); 
```

使用此方法更改您的选项卡`ViewPager`，而不是创建`new Fragment`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:27:36.877

是的，我解决了我自己的问题，只是我必须调用`FragmentActivity`在其中添加片段的`viewpager`. 像这样

```
public void OnClick(View v){
Intent i=new Intent(getActivity(),MyFragmentActivity.class)
startIntent(i); 
```

但问题是它总是会从头开始页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:49:50.207

您需要添加`implements ViewPager.OnPageChangeListener`到您的主要活动以及以下功能。

```
@Override
public void onPageScrollStateChanged(int arg0) {
}

@Override
public void onPageScrolled(int arg0, float arg1, int arg2) {
}

@Override
public void onPageSelected(int index) {
    //Log.d(TAG, "ConnectProfileActivity::onPageSelected");
    final ActionBar bar = getActionBar();
    bar.getTabAt(index).select();        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:24:05.397

在您的 OnClick 函数中放入以下代码

ViewPager vp=(ViewPager) getActivity().findViewById(ViewPagerId);

# java - 在 liferay 中上传和显示数据库中的图像

> ID：15495888
> 
> 赞同：0
> 
> 时间：2013-03-19T09:39:19.130
> 
> 标签：java, mysql, liferay, liferay-6, image-uploading

我已经编写了用于在 java 中上传和显示图像的代码。我正在使用liferay。因为据我所知，liferay`service.xml`没有通过修改文件`Blob`来使用替代方法。最初用于存储图像的字段是字符串，在上述文件中`portlet-model-hints.xml`已更改为。`Clob`构建服务后，它变成了长文本。我将图像存储为长文本，当我尝试显示文本时显示。我应该如何尝试显示存储在 mysql 数据库中的图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:12:14.957

创建一个钩子，将字段的值呈现为图像（从最初将其存储为文本的操作向后转换）

您应该查看 liferay jackrabit 配置，也许它可以帮助您首先将图像存储在数据库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:00:14.203

我正在查看`service.xml`与文档库内容相关的内容（[在此处在线查看](http://grepcode.com/file/repo1.maven.org/maven2/com.liferay.portal/portal-impl/6.1.0/com/liferay/portlet/documentlibrary/service.xml)），并且...

```
...
<column name="repositoryId" type="long" />
<column name="path" type="String" />
<column name="version" type="String" />
<column name="data" type="Blob" />
... 
```

所以它有`Blob`类型。
我希望这可以帮助你。

# java - 如何使用 Derby SQLState 常量

> ID：15495892
> 
> 赞同：3
> 
> 时间：2013-03-19T09:39:36.390
> 
> 标签：java, derby

我的 Java 应用程序正在与 Apache Derby 10.8.1.2 DB 通信。我捕获了 SQL 异常并想测试一个特定的情况：`LANG_DUPLICATE_KEY_CONSTRAINT` 我找不到正确的 .jar 来导入`org.apache.derby.shared.common.reference`据说包含这个常量的文件。

甚至 Derby Developer's Guide 也建议进行如下测试：

```
if ( SQLState.equals( "23505" ) ) 
```

问题是，为什么要测试静态字符串而不是常量？我希望是这样的：

```
if ( SQLState.equals( SQLState.LANG_DUPLICATE_KEY_CONSTRAINT ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T04:05:47.290

你可能不喜欢这个答案......但这里是：

SqlState 故意不包含在任何 jar 文件中，以尽量减少 Derby 的大小。引用包描述：

> **包 org.apache.derby.shared.common.reference 描述**
> 
> Java 编译器将内联的有用常量。包含原始或字符串常量的引用接口的集合。这些常量将由 Java 编译器内联，希望比对字段的引用所需要的占用空间更小。接口中的字段自动是公共的、静态的和最终的，因此是常量。
> 
> 这些类不需要随任何 Derby jar 文件一起提供。如果附带一个 Jar 文件，那么它很可能意味着表示常量的字段是非字符串对象（例如 new Integer(1)），或者最终字段是一个计算值，无法由Java 编译器。

# php - 将变量从ajax传递给php

> ID：15495893
> 
> 赞同：5
> 
> 时间：2013-03-19T09:39:37.923
> 
> 标签：php, jquery, ajax, variables, post

我有 1 个 php 文件名 index.php。在该文件中，我想将一个变量从 ajax 传递给 php。

```
var elem = document.getElementById("mydiv").value;
(function($)
{
    $(document).ready(function()
    {   
        $.ajax(
        {   
            type:"POST",
            url: window.location.href,
            data: 'action='+elem,
            beforeSend: function() {
                $('#cctv').hide();
            },
            complete: function() {
                $('#cctv').show();
            },
            success: function() {
                $('#cctv').show();
            }
        });
        var $container = $("body");
        $container.load('findAllPath.php',{'function': 'findAllPath'});
        var refreshId = setInterval(function()
        {
            $container.load('findAllPath.php',{'function': 'findAllPath'});
        }, 10000);
    });
})(jQuery); 
```

和我的 php

```
if (isset ($_POST['action']))
{   
    echo $_POST['action'];
} 
```

在萤火虫中，我可以看到 ajax 已经发布了 'action=value' 但在 php 中，$_POST['action'] 是空的。任何人都可以帮助我，我的代码有什么问题？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:44:18.433

尝试使用这样的数据

```
data: {action: elem}, 
```

例如

```
$.ajax({
   type: "POST",
   url: "some.php",
   data: { name: "John", action: "save" }
   }).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

printr whole $_REQUEST 并检查您是否正在采取行动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:42:41.143

将此设置为 json 对象：

```
data: {action: elem} 
```

并且不要将 jquery 与纯 js 混合使用。

```
var elem = $('#myDiv').val(); 
```

正如上面的朋友所说。可能会出现 js 在整个页面加载之前尝试获取 value 属性的情况。您应该在文档就绪块中执行所有操作。

你也可以这样做：

```
data: {
action: $('#myDiv').val()
} 
```

您将确定您在表格上拥有最新的数据！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T09:59:24.247

看看这个，找到你错过的东西

```
 $.ajax({
        type: "POST",
        url: "some.php",
        data: { action: elem}
        beforeSend: function() {
            $('#cctv').hide();
        },
        complete: function() {
            $('#cctv').show();
        },
        success: function() {
            $('#cctv').show();
        }
    });
    var $container = $("body");
    $container.load('findAllPath.php',{'function': 'findAllPath'});
    var refreshId = setInterval(function()
    {
        $container.load('findAllPath.php',{'function': 'findAllPath'});
    }, 10000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T11:16:13.450

```
if (!empty($_POST['action']))
{   
echo $_POST['action'];
} 
```

试试这个代码...

# mysql - 重新启动数据库

> ID：15495902
> 
> 赞同：3
> 
> 时间：2013-03-19T09:40:22.397
> 
> 标签：mysql, database, connection, restart

我在哪里输入命令来重新启动mysql数据库？

它在PHP文件中吗？还是进入数据库本身？我使用 Heidi SQL 连接到数据库。

像这样的命令

```
= killall -9 mysqld
= service mysql stop
=cp var/lib/mysql/mysql.sock var/lib/mysql/mysql.sock_backup
= rm -f /var/lib/mysql/mysql.sock
= service mysql start
= ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock
= /scripts/restartsrv mysql 
```

因为我收到这个错误

```
 Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:09:11.127

为什么需要重启数据库？它不应该被要求自动完成。

如果您碰巧弄乱了数据库，您可以通过终端（ubuntu 等）重新启动它。我不确定您对终端了解多少，但您应该能够了解更多关于它们的信息，否则请询问您的网络提供商如何去做吧。

如果您依赖于按计划重新启动数据库，那么您的代码中的某些内容显然会对数据库造成错误，应该予以修复。

[例子](http://theos.in/desktop-linux/tip-that-matters/how-do-i-restart-mysql-server/)

```
/etc/init.d/mysqld restart
# or
/etc/init.d/mysql restart 
```

# .net - HashSet 的 DataContract 序列化

> ID：15495903
> 
> 赞同：2
> 
> 时间：2013-03-19T09:40:27.400
> 
> 标签：.net, serialization, hashset

我正在尝试将 HashSet 序列化为以下代码。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.Serialization;
using System.Text;

namespace ConsoleApplication20
{
    class Program
    {
        static void Main(string[] args)
        {
            var sr = new DataContractSerializer(typeof(Test));
            var t = new Test();
            var mem = new MemoryStream();
            sr.WriteObject(mem, t);

        }

    }

    [DataContract]
    public class Test
    {
        [DataMember]
        public ISet<int> TestSet = new HashSet<int>();
    }
} 
```

但是这段代码失败了：

*键入“System.Collections.Generic.HashSet`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]”，数据合同名称为“ArrayOfint: [http://schemas.microsoft。 com/2003/10/Serialization/Arrays](http://schemas.microsoft.com/2003/10/Serialization/Arrays) '不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中*

我绝对不想碰这条线：

```
 public ISet<int> TestSet = new HashSet<int>(); 
```

除此之外，由于某些其他原因（该类型实际上不是哈希集），我不允许 HashSet 作为这种情况下的已知类型。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:07:35.730

我不确定为什么会出现异常，因为将 TestSet 更改为另一种类型（如`IEnumerable<int>`）不会导致异常。但添加

```
[KnownType(typeof(HashSet<int>))] 
```

到你的班级解决你的问题。

```
[DataContract]
[KnownType(typeof(HashSet<int>))]
public class Test
{
    [DataMember]
    public ISet<int> TestSet = new HashSet<int>();
} 
```

另请参阅这篇[文章](https://stackoverflow.com/questions/800358/why-am-i-getting-this-wcf-error-message)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:53:47.017

我建议根据您的哈希集创建一个公共属性。

```
public ISet<int> TestSet = new HashSet<int>();

[System.Runtime.Serialization.DataMember]
public int[] TestArray
{
    get { return TestSet.ToArray(); }
    set { TestSet = new HashSet<int>(value); }
} 
```

# java - Vaadin Widgetset 编译工作流程

> ID：15495915
> 
> 赞同：0
> 
> 时间：2013-03-19T09:41:10.050
> 
> 标签：java, continuous-integration, workflow, vaadin

vaadin 小部件集编译的最佳工作流程是什么？

小部件集不会经常更改，因此在 CI 中每次签入时都编译它似乎很浪费。另一方面，我不确定在源代码管理中签入（本质上应该编译的内容）是否明智。

您的 vaadin 小部件集编译工作流程是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:33:48.140

在我的工作区中，我构建了“按需”的小部件集 - 即我知道（或我的 IDE - IntelliJ - 知道）何时需要重建小部件集，因此我手动启动构建。

在我们的 CI 服务器上，我们每次都构建一切——包括小部件集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:36:32.813

您可以制作一个 Maven 多模块项目，其中一个子模块是小部件集。如果您将其与服务器端应用程序分开进行版本控制，您的 CI 将不必为服务器端更改重新编译它。例如，请参阅我在 GitHub/jojule 上的 iPad CRM 演示应用程序

# javascript - 使用视图框时在 Raphael.js 中拖放一组路径

> ID：15495919
> 
> 赞同：2
> 
> 时间：2013-03-19T09:41:29.993
> 
> 标签：javascript, drag-and-drop, raphael, viewbox

我有一个关于 Raphaël 2.1.1 拖放的问题。当我使用[此处](https://stackoverflow.com/questions/7837831/drag-paths-in-raphaeljs-when-rotation-or-scale-is-changed)提供的代码时，我能够成功地拖动路径。

但是，当我添加 viewbox 方法时，拖放功能无法正常工作。我觉得解决方案是在转换中对其进行补偿，但我是使用 SVG 的新手，不知道要调整什么。

在我的代码中，我的论文的起始参数是 800 X 800。当我使用视图框时，我使用参数 1200 X 1200。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:22:46.643

我想到了。你需要用你的 viewbox 的增加比率来补偿你的 dx 和 dy 值。

对于 800 X 800 的纸张，如果您使用 1200 X 1200 的视图框，则将 move 方法中的 dx 和 dy 值乘以 1.5。这就是它的全部。

一旦你知道怎么做，一切都很容易。

# sql - 如何使用正确的文件扩展名将（全部）SQL Server 图像数据类型保存到文件系统

> ID：15495925
> 
> 赞同：2
> 
> 时间：2013-03-19T09:41:50.733
> 
> 标签：sql, sql-server, image, binary, file-extension

我在表中有不同类型的文件（txt、doc、jpg 等），我想将它们全部保存到我的文件系统中。我知道如何逐个文件地执行此操作，但这没有用，我必须执行一个循环，一次保存所有具有正确扩展名的文件。有什么建议吗？

我现在这样做：

```
DECLARE @ObjectToken INT
EXEC sp_OACreate 'ADODB.Stream', @ObjectToken OUTPUT
EXEC sp_OASetProperty @ObjectToken, 'Type', 1
EXEC sp_OAMethod @ObjectToken, 'Open'
EXEC sp_OAMethod @ObjectToken, 'Write', NULL, <this is where binary data goes>
EXEC sp_OAMethod @ObjectToken, 'SaveToFile', NULL, 'd:/file.txt', 2
EXEC sp_OAMethod @ObjectToken, 'Close'
EXEC sp_OADestroy @ObjectToken 
```

所以，我的问题是有没有办法一次为 db 表中的所有记录（保存所有文件）执行此操作，并为每个保存的文件设置正确的文件扩展名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:33:23.340

根据[我在评论中提到的代码](http://heidibrebels.be/blog/archives/2011/save-image-sql-server-file-sql)，并且假设您使用 SQL Server 2005 或更高版本，此解决方案应该适合您

```
DECLARE 
    @FileContent VARBINARY(MAX),
    @FileName VARCHAR(MAX),
    @ObjectToken INT,
    @FileID BIGINT

DECLARE cFiles CURSOR FAST_FORWARD FOR
SELECT Id, FileName, Image_Data from MyFileTable
OPEN cFiles

FETCH NEXT FROM cFiles INTO @FileID, @FileName, @FileContent

WHILE @@FETCH_STATUS = 0 BEGIN

    -- CHOOSE 1 of these SET statements:

    -- if FileName is unique, then just remove special characters
    SET @FileName = REPLACE(REPLACE(@FileName, '\', ' '), ':', ' ')
    -- if FileName without path information is unique
    SET @FileName = SUBSTRING(@FileName,
        len(@FileName)+2-CHARINDEX('\',REVERSE(@FileName)),len(@FileName))
    -- if you just take ID + extensions
    SET @FileName = 'c:\path\to\' + CAST(@FileID AS varchar) + 
        SUBSTRING(@ap_description,len(@ap_description)+1
            -CHARINDEX('.',REVERSE(@ap_description)),len(@ap_description))

    EXEC sp_OACreate 'ADODB.Stream', @ObjectToken OUTPUT
    EXEC sp_OASetProperty @ObjectToken, 'Type', 1
    EXEC sp_OAMethod @ObjectToken, 'Open'
    EXEC sp_OAMethod @ObjectToken, 'Write', NULL, @FileContent
    EXEC sp_OAMethod @ObjectToken, 'SaveToFile', NULL, @FileName, 2
    EXEC sp_OAMethod @ObjectToken, 'Close'
    EXEC sp_OADestroy @ObjectToken

    FETCH NEXT FROM cFiles INTO @FileID, @FileName, @FileContent
END

CLOSE cFiles
DEALLOCATE cFiles 
```

`image`应该自动转换为`varbinary(max)`.

（`'\'`打破 SO 语法高亮显示。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:49:03.280

我解决了这个问题。我发现将数据库从 SQL Server 2000 迁移到 2005 真的不容易。唯一可行的解​​决方案是这个 - [http://tek-works.com/fixing-there-is-already-an-object-named- sysnsobjs-in-the-database/](http://tek-works.com/fixing-there-is-already-an-object-named-sysnsobjs-in-the-database/)

完成这些步骤后，您只需将 Compatibility level 设置为 90。（右键单击 database > Properties > Compatibility level）

然后您可以使用 VARBINARY(MAX) 并将完整的图像数据类型二进制文件保存到文件系统。

祝移民顺利！

# java - Apache Solr 中是否有任何 MySQL 的存储过程替代方案？

> ID：15495927
> 
> 赞同：0
> 
> 时间：2013-03-19T09:41:52.897
> 
> 标签：java, search, solr, search-engine, solrj

实际上，我已经创建了广泛使用 MySQL 存储过程的 Web 应用程序。现在我们想将 Apache Solr 集成到我们的 Web 应用程序中。

在现有应用程序中，存储过程采用登录用户ID等**动态参数**结合其他复杂查询。

那么 Apache Solr 有什么方法/替代方法吗？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:11:04.677

您可以索引 Solr 中的所有数据，并使用用户 ID 和所有其他动态参数查询 Solr。
Solr 提供[DIH](http://wiki.apache.org/solr/DataImportHandler)，允许您与 DB 集成并将数据导入 Solr。Solr 查询和过滤功能应该允许您取回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:45:06.457

如果您有一些不能或不应被索引的东西 - 例如 LDAP 系统中的公司结构 - 但需要过滤结果 - 例如确定用户是否可以看到结果 - 您可以使用[Solr 的 PostFilter 接口](http://lucene.apache.org/solr/4_2_0/solr-core/org/apache/solr/search/PostFilter.html)。但是，这仅限于过滤，您无法添加结果。

具有多个内置后置过滤器的贡献是[空间搜索](http://wiki.apache.org/solr/SpatialSearch)。例如，它定义了一个名为“geofilt”的后过滤器，您可以像这样使用它 - 如果您有一个适合的模式：

> q=your+query&fq={!geofilt sfield=store}&pt=45.15,-93.85&d=5

后过滤器调用放在大括号内。

这是一个相当高级的话题，但有几篇关于它的好文章。我特别推荐第一个。

*   [http://searchhub.org/2012/02/22/custom-security-filtering-in-solr/](http://searchhub.org/2012/02/22/custom-security-filtering-in-solr/)
*   [http://hokiesuns.blogspot.de/2012/11/using-solrs-postfiltering-to-collect.html](http://hokiesuns.blogspot.de/2012/11/using-solrs-postfiltering-to-collect.html)

# c# - 检查 datarowview.row.itemarray 中的不同值而不是空字符串

> ID：15495928
> 
> 赞同：0
> 
> 时间：2013-03-19T09:41:54.233
> 
> 标签：c#, datarowview

我通过以下代码获取datarowview

```
DataRowView s = grdSampleData.GetRow(grdSampleData.FocusedRowHandle) as DataRowView; 
```

我如何在此处检查 s.Row.ItemArray 中的所有值是否不同。如果 value 为 null 或空字符串，它应该跳过不同的性质，即 ItemArray 中可以有多个 null 值或空字符串，但没有其他相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:52:27.660

您可以使用 LINQ[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)来检查不同的：

```
 bool flag = s.row.ItemArray.Where(x => x != null)
            .Where(x => (x is string) && !string.IsNullOrEmpty((string) x))
            .GroupBy(x => x).Any(g => g.Count() > 1); 
```

这个怎么运作：

为简化起见，假设您的项目数组具有：[1, 1, 3, 3]。`GroupBy(x => x)`将您的数组分为两组：

```
[ [1, 1], [3, 3] ] 
```

要知道它是否不同，只需检查任何组是否`Count`> 1，如果是，则它不是不同的。这里的例子并不明显

# c# - 如何通过单击删除装饰器？

> ID：15495931
> 
> 赞同：1
> 
> 时间：2013-03-19T09:42:01.580
> 
> 标签：c#, wpf, adorner

我的装饰器是使用 OnRender 中的 drawingContext 在代码中绘制的。我希望用户能够单击装饰器或上面的按钮来关闭它。我会在装饰者的 MouseButtonEventHandler 中做什么来做到这一点？

我想我需要将它从装饰控件的装饰层中删除，但我看不出我是如何从装饰器本身触发它的。

在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:40:27.433

找到了一个更好的解决方案 - 允许用户将装饰器（在本例中为便笺）拖到一边。

# java - Java.util.Date 比较 ">="

> ID：15495932
> 
> 赞同：1
> 
> 时间：2013-03-19T09:42:08.827
> 
> 标签：java, date

在`java.util.Date`函数`after()`== ">"

有没有办法将日期比较为 ">=" ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T09:43:21.573

怎么用

```
!thisDate.before(thatDate) 
```

实现 ">=" 功能。不是很好，我很感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T09:45:56.790

“以前没有”怎么办？

> 布尔结果 = !date.before(otherDate)

此外，[Joda Time](http://joda-time.sourceforge.net/)可以为您节省大量时间 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:03:30.940

`Date`implements `Comparable`，因此您可以使用以下`compareTo`方法：

```
if (date.compareTo(otherdate) >= 0) { ... } 
```

基本上`compareTo`是用于将对象与 等进行比较的 Java 方式`>`，`<=`并且在很多情况下都可以使用。的`after`和`before`方法`Date`之所以存在，只是因为它们是在`compareTo`添加之前引入的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:44:42.820

不......Java不支持......相反，您可以使用

[`Date#equals()`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html#equals%28java.lang.Object%29)和[`Date#after()`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html#after%28java.util.Date%29)

我也更喜欢[Joda Time](http://joda-time.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:43:49.973

`if (!date.before(otherdate)`- 与“不之后或等于”具有相同的效果

# c# - 解决方案的单个配置文件

> ID：15495935
> 
> 赞同：10
> 
> 时间：2013-03-19T09:42:15.690
> 
> 标签：c#, web-config, projects-and-solutions

现在我以前在 SO 上以不同的方式看到过这个问题，但令人惊讶的是不是这种形式：

我有一个包含多个需要相互通信的 Web 服务（项目）的解决方案。在发布这些 Web 服务中的每一个之后，最终可能会在具有不同数据库的不同机器上结束。为了告诉每个 Web 服务所有其他 Web 服务在哪里，我想在开发过程中维护一个配置文件。

我希望在发布配置后会出现在每个已发布的项目中。而且我希望配置文件在发布后是可编辑的，这样我就可以快速迁移某个 Web 服务，然后只需编辑其他 Web 服务的所有配置文件。

我不想在数据库中执行此操作，因为配置文件本身也应该保存与数据库的连接设置。

我遇到了以下想法/想法/问题：

*   我有一个名为“common”的 dll 项目，它被其他项目引用。让我们给它一个 shared.config 并在该项目中构建一个类，该类可用于读取 shared.config `System.Configuration.ConfigurationManager.OpenExeConfiguration("shared.config")`。只需要确保 shared.config 将与 DLL 一起发布。

我喜欢这个解决方案，因为它还可以让我在每个项目中保留一个 web.config，其中只有项目特定的设置。并让 shared.config 具有共享设置。但是我在 SO 上读到，这不应该被轻视，并且可能会产生一些不需要的副作用，例如文件访问问题；虽然我想知道这是否适用于我的情况。另外，我想请你帮忙看看如何实际实现这一点，因为我认为 Visual Studio 不支持开箱即用的 DLL 项目的 app.config。

*   我还考虑在解决方案项中创建一个 shared.config 文件。然后在每个项目中链接该文件。并在每个项目的Web.config中，添加：`<appSettings configSource="shared.config" />`指向该项目中的链接文件。

虽然我找不到任何不这样做的理由，但第一次实施失败了。似乎（至少在开发过程中），c# 找不到链接的 shared.config 文件。我猜链接文件不会立即完成，也不会在创建链接文件后维护，但文件仅在我发布时复制到项目中。从而使文件在开发过程中丢失。这个对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:06:07.527

配置文件是特定于应用程序的。这意味着您可以将配置文件添加到类库，但该文件将被引用该库的应用程序（Windows 服务、Web 服务等）使用。

external 也是一样`configSource`，这也是特定于应用程序的，需要包含在使用它的项目中。因此，如果您的解决方案由 2 个项目组成，那么您需要 2 个配置文件。每个项目一个。

对于基于 Windows 的应用程序（服务、winforms），配置文件的预期文件夹是`bin`目录，对于基于 Web 的项目，该目录是虚拟目录的根文件夹。

这就是说，使用共享配置文件看起来更简单（并且您不必为每个项目从类库中复制 app.config）。以下是步骤：

*   创建解决方案文件夹。
*   将配置文件添加到其中。
*   添加该文件作为每个需要它的项目的参考。右键单击项目并***添加现有项目***- >选择文件并***添加为链接***
*   通过使用“始终复制”设置复制选项（文件的属性），确保始终复制文件。

此时，您应该在每次编译解决方案时将配置文件部署到项目目录中。

编辑：

*   我会避免在 web 应用程序中查看配置文件的 bin，约定是文件应该在根目录中，所以我会避免第一个选项。
*   构建项目后，链接的文件最终会在 bin 中。尝试导入文件的相同步骤，但这次只需添加它（**而不是链接**），它将作为内容部署在您网站的根目录中，因此它始终可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:10:39.157

如果您在 IIS 中托管，则可以在根站点级别拥有一个 web.config 文件，但 Giorgio 是正确的，因为 app.config 文件是特定于应用程序的。可以使用自定义构建步骤来自动跨多个项目复制配置文件，所以我个人会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:11:36.200

这实际上让我有点发疯。最后我把它修好了：

*   在 dll 项目“common”中创建了一个 Shared.config 文件，其内容看起来像任何普通的 web.config/app.config。
*   将文件设置为 Content and Copy Always，这样它肯定会被复制到所有引用项目 common 的项目中。（虽然配置文件确实会在`bin`文件夹中结束。
*   `SharedConfiguration`在公共项目中创建了类。真正棘手的部分是必须使用 Open `Mapped`ExeConfiguration() 并获取可执行目录的路径（包括 bin，并且前面没有 file://）。
*   现在，当我想从共享设置中访问设置时，我会使用`SharedConfiguration.instance.AppSettings.Settings["CubilisEntryPointUrl"].Value`.

`SharedConfiguration.instance.AppSettings["CubilisEntryPointUrl"]`（因为[这个问题](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/01a8e5f6-d54e-4a81-9300-61f8472e0835)，我不能直接使用）

.

```
public static class SharedConfiguration
{
    public static readonly Configuration instance = GetConfiguration("Shared.config");
    private static Configuration GetConfiguration(string configFileName)
    {
        ExeConfigurationFileMap exeConfigurationFileMap = new ExeConfigurationFileMap();
        Uri uri = new Uri(Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase));
        exeConfigurationFileMap.ExeConfigFilename = Path.Combine(uri.LocalPath, configFileName);
        return ConfigurationManager.OpenMappedExeConfiguration(exeConfigurationFileMap, ConfigurationUserLevel.None);
    }
} 
```

# html - textarea onresize 不起作用

> ID：15495936
> 
> 赞同：4
> 
> 时间：2013-03-19T09:42:22.153
> 
> 标签：html, textarea, onresize

根据 w3 学校的`<textarea>`支持`onresize`，但它不起作用。

[http://www.w3schools.com/jsref/event_onresize.asp](http://www.w3schools.com/jsref/event_onresize.asp)

浏览器尝试：

铬 25.0.1364.172

Safari 6.0.3 (7536.28.10)

火狐19.0

小提琴：http : [//jsfiddle.net/btevfik/5abR3/](http://jsfiddle.net/btevfik/5abR3/)

**更新**

当我吸取教训不要100％信任w3schools时，我发现了这个

[https://developer.mozilla.org/en-US/docs/DOM/element.onresize](https://developer.mozilla.org/en-US/docs/DOM/element.onresize)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-02T15:19:16.613

大多数浏览器只会在 body 元素上触发 onresize。

到目前为止，我发现的最佳解决方案是在漂亮的 hack 中使用溢出和下溢事件侦听器。

[http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/](http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/)

它是纯 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:07:01.077

Textareas 不会在大多数（全部）中调整大小，在这种情况下，浏览器的 **onresize**事件不适**用于**窗口对象，您可以使用 jQuery UI 插件：

```
$("idoftextarea").resizable({
    resize: function() {
        $("id").append("yourcode");
    }
}); 
```

参考：http: [//jqueryui.com/resizable/](http://jqueryui.com/resizable/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-27T02:21:01.253

一个小解决方法：

```
$('textarea').bind('mouseup', function() {
    console.log('resized');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-11T14:47:38.263

只是对 ravula 答案的更新（我的声誉太低，无法发表评论）：

JQuery 为可调整大小的元素添加了一堆 div。就我而言，这破坏了整个布局。您可以使用以下方法摆脱额外的边距/填充：

```
.ui-wrapper {
	padding:0px !important;
	margin:0px !important;

}
```

这当然不是很干净，也是我的问题，但它在我的情况下有效。如果我遇到任何问题，我会更新这篇文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-29T05:36:33.163

无论出于何种原因，我都喜欢坚持使用香草 js。所以这是香草的一个简单解决方案：

```
<textarea
  onmousedown="storeDimensions(this)"
  onmouseup="onresizeMaybe(this)"
></textarea>

<script>
  function storeDimensions(element){
    element.textWidth = element.offsetWidth;
    element.textHeight = element.offsetHeight;
    element.value = "is it gonna change? we don't know yet...";
  }

  function onresizeMaybe(element){
    if (element.textWidth===element.offsetWidth
     && element.textHeight===element.offsetHeight) 
      element.value = "no change.\n";
    else element.value ="RESIZED!\n";

    element.value +=
       `width: ${element.textWidth}\n`
      +`height: ${element.textHeight}`;
  }
</script>
```

对于家庭作业，使用`onmousemove`触发调整大小事件而不是`onmouseup`（在我的特定情况下我不需要）。

:) 希望有一天它对某人有所帮助......看看这个问题现在已经有 5 年历史了。

# javascript - Greasemonkey 脚本在单击几下后停止设置复选框？

> ID：15495937
> 
> 赞同：1
> 
> 时间：2013-03-19T09:42:22.370
> 
> 标签：javascript, jquery, firefox, checkbox, greasemonkey

我使用一个网站，它有很多复选框来启用/禁用不同的选项。但是有一个缺点：要勾选复选框，需要点击复选框，但我希望能够点击标签，因为这样更容易。所以我决定写一个 Greasemonkey 脚本来添加这个功能

```
$("div.option").click(function() {
    $checkbox = $(this).children("input");
    isChecked = $checkbox.is(":checked");
    $checkbox.attr("checked", !isChecked);
}); 
```

我启用了这个脚本，然后我访问了网页。首先，我单击该选项，然后复选框选中！然后我再次单击，它取消选中。但进一步的点击不会做任何事情。这适用于网页上的所有选项，它适用于前两次点击，但随后停止工作。如何修复脚本以使其永久工作？

我在 Ubuntu 12.10 上使用 Firefox 19.0.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:08:10.493

您不能像那样切换*属性的**值*。该属性与选中的*属性*/*状态*不同。`checked`

 ***在 jQuery 中执行此操作的正确方法是使用`.prop()`，如下所示：

```
$("div.option").click ( function () {
    var $checkbox = $(this).children ("input");
    var isChecked = $checkbox.is (":checked");
    $checkbox.prop ("checked", !isChecked);
} ); 
```

请参阅[“如何使用 jQuery 或 JavaScript 检查复选框？”](https://stackoverflow.com/a/426276/331508)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:58:58.497

使用标签`label`而不是 JS

纯 html 这里[http://jsfiddle.net/RAkjk/](http://jsfiddle.net/RAkjk/)***

# java - 带有图像和文本的 Android 选择器

> ID：15495939
> 
> 赞同：7
> 
> 时间：2013-03-19T09:42:22.910
> 
> 标签：java, android, button, imagebutton, android-xml

我有一个按钮，我给它一个颜色、图像和文本，如下所示：

```
android:background="@color/green"
android:drawableLeft="@drawable/custom_routes_start_button_icon"
android:text="@string/custom_route_start" 
```

这是未选中的状态，希望选中的状态是这样的：

```
android:background="@color/red"
android:drawableLeft="@drawable/custom_routes_stop_button_icon"
android:text="@string/custom_route_stop" 
```

据我所知，不可能为选择器中的项目提供文本或 drawableLeft（仅可绘制）。有人知道实现这一目标的好方法吗？也许te选择器也可以引用另一个xml文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-01T07:23:44.620

我不确定 ToggleButton（甚至复选框）是否适合您的用例。您确实可以为您的可绘制对象使用选择器（左、右、上、下），使用带选择器的背景，甚至为您的两个状态使用不同的文本。

实际上，您可以为您的背景定义一个选择器（/res/color/custom_color.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:color="@color/green"
          android:state_checked="true" />
    <item android:color="@color/red"
        android:state_checked="false"/>
 </selector> 
```

一个用于您的 drawableLeft(/res/drawable/custom_drawable.xml)。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@color/custom_routes_start_button_icon"
          android:state_checked="true" />
    <item android:drawable="@color/custom_routes_stop_button_icon"
        android:state_checked="false"/>
 </selector> 
```

最后你的 ToggleButton 定义为

```
android:background="@color/custom_color"
android:drawableLeft="@drawable/custom_drawable"
android:textOn="@string/custom_route_start"
android:textOff="@string/custom_route_stop" 
```

您可能必须使用样式以使其显示为您想要的。

虽然这是一个迟到的答案，但希望有人觉得它有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:55:48.073

您应该使用两个按钮，并且只显示其中一个。`android:visibility`在 XML 中使用并`setVisibility()`显示/隐藏按钮。

因此，首先使开始按钮可见并隐藏停止按钮。当用户按下开始按钮时，隐藏开始按钮并显示停止按钮。当用户按下停止按钮时，将其隐藏并再次显示开始按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:04:38.170

您可以通过代码更改它：

在xml文件中写入以下代码：

```
 android:background="@color/green"
 android:drawableLeft="@drawable/custom_routes_start_button_icon"
 android:text="@string/custom_route_start" 
```

和 buttonClick 事件：

```
 yourButton = (TextView) findViewById(R.id.yourButton);

    yourButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Drawable checkImg = getApplicationContext().getResources().getDrawable(
                       R.drawable.custom_routes_stop_button_icon);
            yourButton.setCompoundDrawablesWithIntrinsicBounds(checkImg, null, null,
            null);
            yourButton.setBackgroundColor(red);
            yourButton.setText(custom_route_stop);
        }
    }); 
```

您也可以将此代码放在 Touchlistener 上：

```
 yourButton.setOnTouchListener(new OnTouchListener() {
        boolean isTouch = false;

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                Drawable checkImg = getApplicationContext().getResources().getDrawable(
                       R.drawable.custom_routes_stop_button_icon);
                yourButton.setCompoundDrawablesWithIntrinsicBounds(checkImg, null, null, null);
                yourButton.setBackgroundColor(red);
                yourButton.setText(custom_route_stop);  
            }
            else {
                Drawable checkImg = getApplicationContext().getResources().getDrawable(
                       R.drawable.custom_routes_start_button_icon);
                yourButton.setCompoundDrawablesWithIntrinsicBounds(checkImg, null, null, null);
                yourButton.setBackgroundColor(green);
                yourButton.setText(custom_route_start);
            }
            return false;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:56:10.190

你的意思是如果你点击按钮，你想改变按钮的背景颜色？是的，你可以做到

首先定义状态

```
private int btnState = 1;
private final static int BUTTON_STATE_SELECTED = 0;
private final static int BUTTON_STATE_UNSELECTED = 1; 
```

然后将 id 设置为您的按钮

```
android:id="@+id/btnRoute"
android:background="@color/green"
android:drawableLeft="@drawable/custom_routes_start_button_icon"
android:text="@string/custom_route_start" 
```

在您的活动中声明按钮

```
Button btnRoute = (Button) findviewbyid(R.id.btnRoute); 
```

之后创建一个 onclick 侦听器，它将根据状态更改按钮颜色

```
private View.OnClickListener mOnClickBtnRoute = new View.OnClickListener() {
switch(btnState) {
case BUTTON_STATE_SELECTED:
btnRoute.setBackgroundColor(green);
btnRoute.setText(start);
Drawable img = getContext().getResources().getDrawable( R.drawable.custom_routes_start_button_icon );
btnRoute.setCompoundDrawablesWithIntrinsicBounds( img, null, null, null );
btnState = BUTTON_STATE_UNSELECTED;
break;
case BUTTON_STATE_UNSELECTED:
btnRoute.setBackgroundColor(red);
btnRoute.setText(stop);
Drawable img = getContext().getResources().getDrawable( R.drawable.custom_routes_stop_button_icon );
btnRoute.setCompoundDrawablesWithIntrinsicBounds( img, null, null, null );
btnState = BUTTON_STATE_SELECTED;
break;
}
}; 
```

然后不要忘记将侦听器设置为按钮

```
btnRoute.setOnClickListener(mOnClickBtnRoute); 
```

请记住所有代码都在这里编码所以可能会有错误输入所以请不要只是复制粘贴而是尝试理解这个概念:) 如果您对我的回答有任何疑问，请随时在评论中提问！

# android - 查看 XML 的图形布局时 Eclipse 中的 XML 错误

> ID：15495941
> 
> 赞同：3
> 
> 时间：2013-03-19T09:42:32.230
> 
> 标签：android, android-layout, android-emulator, android-widget

这是我在布局 XML 文件中遇到的错误：

```
Exception raised during rendering: 0
Exception details are logged in Window > Show View > Error Log
The following classes could not be found:
- View (Change to android.view.View, Fix Build Path, Edit XML) 
```

我的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list_view_main_lin_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#00FFFFFF"
android:orientation="vertical" >

<ViewFlipper
    android:id="@+id/search_view_flipper"
    android:layout_width="fill_parent"
    android:visibility="gone"
    android:layout_height="@dimen/list_view_row_size" >

    <LinearLayout
        android:id="@+id/search_lin_layout"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical" >

        <TextView
            android:id="@+id/search_text_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:drawableLeft="@drawable/search_ico"
            android:drawablePadding="10dp"
            android:gravity="center_vertical"
            android:text="@string/search_text_view"
            android:textColor="#FF37200e"
            android:textSize="@dimen/text_view_left_menu" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/search_edit_text_relative_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <EditText
            android:id="@+id/search_edit_text"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:background="@drawable/rounded_edittext"
            android:drawableLeft="@drawable/searchgray_ico"
            android:drawablePadding="05dp"
            android:textCursorDrawable="@null"
            android:hint="@string/search_text_view"
            android:imeOptions="actionDone"
            android:paddingLeft="10dp"
            android:paddingRight="35dp"
            android:singleLine="true"
            android:textSize="@dimen/text_view_left_menu"
            android:textColor="#000000" />

       <ImageButton
            android:id="@+id/cancel_search_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/search_edit_text"
            android:layout_centerVertical="true"
            android:layout_marginRight="2dp"
            android:src="@drawable/cross"
            android:background="#00000000"
            android:padding="10dp" />
    </RelativeLayout>
</ViewFlipper>

<View
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:background="@drawable/listview_divider" />

<LinearLayout
    android:id="@+id/featured_lin_layout"
    android:layout_width="match_parent"
    android:layout_height="@dimen/list_view_row_size"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/featured_text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:text="@string/featured_text_view"
        android:textColor="#FF37200e"
        android:textSize="@dimen/text_view_left_menu" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:contentDescription="@string/featured_text_view"
        android:src="@drawable/featured_ico" />
</LinearLayout>

<View
    android:id="@+id/view_featured_divider"
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:background="@drawable/listview_divider" />

<LinearLayout
    android:id="@+id/favorites_lin_layout"
    android:layout_width="match_parent"
    android:layout_height="@dimen/list_view_row_size"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/favorites_text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:text="@string/favorites_text_view"
        android:textColor="#FFb2661A"
        android:textSize="@dimen/text_view_left_menu" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:contentDescription="@string/favorites_text_view"
        android:src="@drawable/favorites_active_ico" />
</LinearLayout>

<View
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:background="@drawable/listview_divider" />

<ListView
    android:id="@+id/main_list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:divider="@android:color/transparent"
    android:smoothScrollbar="true"
    android:cacheColorHint="#00000000"
    android:dividerHeight="0dp"
    android:fadingEdge="none"
    android:scrollbars="none" >
</ListView> 
```

我正在使用 Eclipse **Juno**。目前我的项目构建目标是**android 4.1**。我也尝试过降低 API 级别，但这对我没有帮助。

因此，我无法看到我的 XML 文件的图形布局。请任何人帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T09:45:27.917

您的目标 SDK 版本和您的图形布局目标之间存在不匹配，应该很容易解决。

如果您不知道，您可以通过右键单击您的项目名称，转到“属性”，选择“Android”，然后在“带有复选标记的行的“平台”列。

然后在 XML 文件的图形布局中，在区域设置选择器和创建按钮之间的右上角是 Android 版本的下拉菜单。更改它以匹配您的项目，错误应该消失，图形预览将正确呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T13:00:50.993

它非常简单

您所要做的就是更改用于在 Eclipse 中呈现布局的 android 版本

[用于渲染布局Button的android版本](http://i.stack.imgur.com/QEooW.png)

希望对你有所帮助。

# java - 同步方法是否在与 UI 线程 (Android) 不同的线程上运行？

> ID：15495946
> 
> 赞同：0
> 
> 时间：2013-03-19T09:42:49.983
> 
> 标签：java, android, android-asynctask, synchronized

第一次在这里发问题。刚开始编程和编写我的第一个应用程序。

我有一个具有 fetchUpdates() 方法的应用程序类文件：

```
public synchronized void fetchUpdates() {
    String[] mURLs = getURLs();
    new DownloadJSONData().execute(mURLs[0], mURLs[1]);
} 
```

DownloadJSONData 是一个`asyncTask`从服务器获取更新的方法，该`onPostExecute`方法使用来自服务器的 JSON 数组更新 sqlite 数据库。

应用程序的不同组件（小部件和活动）调用此方法从服务器获取更新以更新数据库。

问题：同步方法是否在与 UI 线程不同的线程上运行？`DownloadJSONData`如果是这样，将代码中的代码移动到同步方法应该没有问题`fetchUpdates()`吧？如果在连接服务器或从服务器下载数据时出现阻塞，它不应该阻塞 UI 线程，对吧？

动机：我正在尝试更改`fetchUpdates()`方法以返回一个布尔值，指示数据库是否已更新。但是，现在（我认为）方法在'`fetchUpdates()`方法之前完成，因此，方法无法指示调用是否更新了数据库。如果数据库在调用后更新，我需要调用该方法的应用程序组件表现不同。`asyncTask``onPostExecute``fetchUpdates()``DownloadJSONData()``fetchUpdates()`

PS因为我是编程新手，所以简单而详细的解释会很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T09:47:21.783

不，同步方法在同一个线程中运行。但是，没有其他线程可以在执行时执行（同一对象的）另一个同步方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:56:21.850

使用`AsyncTask`意味着大多数时候调用方法不会立即知道结果 - 除非您调用`AsyncTask.get()`但您不想这样做并失去异步方面。假设您想在数据库更新时向用户显示一条消息，您应该做的是启动`AsyncTask`并让它通过覆盖正确的方法来处理数据库更新的返回状态。我还将在两个不同的任务中分离对服务器的请求和数据库更新：

```
 public class CallServer extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... params) {
        // Do your request to the server
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        if (result == SUCCESS) {
            // Display message to indicate successful request
            new UpdateDatabase().execute(params);
        } else {
            // Display error message or whatever you want to do 
        }
    }
}

public class UpdateDatabase extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... params) {
        // Update the DB
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        if (result == SUCCESS) {
            // Display success message or whatever you want to do 
        } else {
            // Display error message or whatever you want to do 
        }
    }
} 
```

主要思想是`AsyncTask`应该处理错误/成功案例而不是它的调用者。

# python - 创建仍需要身份验证的私有 S3 文件的链接

> ID：15495949
> 
> 赞同：1
> 
> 时间：2013-03-19T09:42:59.053
> 
> 标签：python, file, amazon-s3, boto

我在处理 S3 文件时遇到问题。我有一些使用 boto 将文件上传到 S3 的 python 代码，我想写入日志文件链接到我创建的文件以供将来参考。

我似乎找不到一种方法来生成仅对经过身份验证的人有效的链接。我可以使用 generate_url 方法创建一个链接，但是任何单击该链接的人都可以访问该文件。创建 URL 的任何其他操作都会创建一个即使我已登录也不起作用的链接（获取拒绝访问的 XML）。

有人知道这样做的方法吗？最好是永久链接，但我只能处理在给定时间后过期的临时链接

谢谢， 奥菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:17:56.223

不，如果不在点击链接的人和 S3 对象之间提供某种服务，真的没有任何方法可以做到这一点。

原因是对 S3 内容的访问由您的 AWS access_key 和 secret_key 决定。无法使用这些凭证“登录”，并且登录 AWS Web 控制台使用一组不同的凭证，这些凭证仅对控制台有用。它不会使用 S3 服务对您进行身份验证。

# facebook - Facebook 分享按钮在移动网站上不起作用

> ID：15495950
> 
> 赞同：3
> 
> 时间：2013-03-19T09:42:59.110
> 
> 标签：facebook, share, facebook-sharer

我在移动网站中实现了 Facebook 分享按钮，以便在 Facebook 上分享带有图片名称和网址的图片。该按钮在桌面站点上运行良好 - 它发布图像、图像名称和 url。该按钮也适用于 iPad，但不适用于移动平台，这似乎是 m.facebook 和 m.oursitename 之间的冲突，因为当我点击分享 facebook 按钮时，我会进入 facebook 页面，但 facebook 会问我一个网址想分享，但我已经在代码中实现了 url。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-12T09:54:08.350

Facebook jdk加载成功了吗？

我正在使用波纹管代码，对我来说效果很好

```
<script src="//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.8"></script> 
```

使用上面的代码而不是 Facebook 分享按钮第 2 步：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.8";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-01T17:00:10.547

当您访问 FB 开发者网站时，您必须取消选中移动 Iframe 选项。当我这样做时，我能够生成适用于移动和桌面的按钮。

# jquery-cycle - 循环功能在一段时间后停止工作

> ID：15495953
> 
> 赞同：1
> 
> 时间：2013-03-19T09:42:59.897
> 
> 标签：jquery-cycle

我的页面上有两个循环功能要使用。它工作几分钟，然后停止工作。

脚本 1：

```
 <script type='text/javascript'>          
                   function pageLoad(sender, args){$('#Vertical').cycle({ 
                   fx: '" + Effect + "'
                   ,sync: 0,
                   prev:'#Verticalprev',
                   next:'#Verticalnext'
                    if (Easing != "0")
                       ,easing: '" + Easing + "'

                   });
                    //On mouseover pause the slider
                   $('#Vertical').mouseover(function() {
                   $('#Vertical').cycle('pause');
                   return false;
                   });

                    //On mouseout start the slider
                   $('#Vertical').mouseout(function() { 
                   $('#Vertical').cycle('resume');
                   }); 

                   }</script> 
```

脚本 2：

```
 <script type='text/javascript'>                       
                   function pageLoad(sender, args){$('#Horizontal').cycle({ 
                   fx: '" + Effect + "'
                   ,sync: 0,
                   prev:'#prev',
                   next:'#next'
                    if (Easing != "0")
                       ,easing: '" + Easing + "'

                   });

                    //On mouseover pause the slider
                   $('#Horizontal').mouseover(function() {
                   $('#Horizontal').cycle('pause');
                   return false;
                   });

                    //On mouseout start the slider
                   $('#Horizontal').mouseout(function() { 
                   $('#Horizontal').cycle('resume');
                   }); 

                   }</script> 
```

谁能帮我这个？

# c - C - 从文件中大量读取

> ID：15495954
> 
> 赞同：1
> 
> 时间：2013-03-19T09:43:02.720
> 
> 标签：c, file, floating-point

我有一个包含大量数字的文件，例如`-7.47004e-16`，我正在尝试使用将其读入浮点数组

```
fscanf(rhs, "%f", &numbers[i]);" 
```

这是在一个while循环中。但是当我们有一个上面提到的数字时，这不起作用。

由于数量太大，这不起作用吗？还是数字格式中的“e”不起作用？

您能推荐一些正确执行此操作的方法吗？

谢谢。

注意：Numbers 是一个浮点数组，rhs 是文件名。该文件每行有一个数字，一些数字与上面的格式相同，一些数字小得多，例如`-1.88493`.

这是代码：

```
int main( int argc, char *argv[])
{
    FILE *rhs, *output;
    int niter, n, n1;
    // counters
    int i = 0, j = 0, k, m, p;

    rhs = fopen(argv[1], "r");
    // ab+ opens file for writting and creates the file if need be
    output = fopen(argv[2], "ab+");
    niter = atoi(argv[3]);

    // check if files open up or not, if not exit.
    if((rhs == NULL) || (output == NULL))
    {
        printf("Error Opening files.\n");
        exit(1);
    }

    // read in N
    fscanf(rhs, "%d", &n);

    // initialize n1
    n1 = n + 1;

    // generate array to hold values from rhs file
    long double *numbers = (long double *)malloc(sizeof(long double) * ((n1)*(n1)));
    long double *y = (long double *)malloc(sizeof(long double) * ((n1)*(n1)));
    long double *f = (long double *)malloc(sizeof(long double) * ((n1)*(n1)));
    long double *yp = (long double *)malloc(sizeof(long double) * ((n1)*(n1)));

    // get numbers and store into array
    for(i = 0; i <= n; i++)
    {
        for(j = 0; j <= n; j++)
        {
            fscanf(rhs, "%Lf", &numbers[i]);
            printf("i = %d, number = %Lf\n", i, numbers[i]);
        }
    }

    for(k = 0; k < niter; k++)
    {
        smooth(n, y, yp, f);
    }

    fclose(rhs);
    free(numbers);
    free(y);
    free(f);
    free(yp);

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T09:58:46.187

### SSCCE（[简短、独立、正确的示例](http://sscce.org/)）

```
#include <stdio.h>

int main(void)
{
    FILE *rhs = stdin;
    int i = 0;
    float numbers[2];

    if (fscanf(rhs, "%f", &numbers[i]) != 1)
        printf("Failed to convert anything\n");
    else
        printf("Got: %13.6e\n", numbers[i]);
    return 0;
} 
```

示例运行：

```
$ ./flt
-7.47004e-16
Got: -7.470040e-16
$ 
```

注意代码检查转换是否成功；您应该始终这样做，并且正确的测试如图所示 - 您是否获得了正确数量的成功转换。您可能会在没有遇到 EOF 的情况下转换失败，因此针对 EOF 的测试是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:51:50.793

这个特定的数字对于 IEEE754 单精度浮点数来说并不算大，所以应该没问题。

我`double`只是为了增加范围和精度而使用自己，但这是个人喜好。

我想澄清一件事：你说那`rhs`是一个文件*名。*我希望它真的是一个从返回的文件句柄`fopen`，否则会带来一个大问题:-)

另外，我假设您的意思是文件每*行有一个数字，*而不是每个文件。

举例来说，看下面的脚本，它显示了一个输入文件、C 程序使用`fscanf`和输出，看看这个方法应该可以正常工作：

```
pax> cat qq.in
    -7.47004e-16
    3.14159
    2.718281828459
    42

pax> cat qq.c
    #include <stdio.h>
    #include <math.h>

    int main (void) {
        float f;
        FILE *fin = fopen ("qq.in", "r");
        while (fscanf (fin, "%f", &f) == 1)
            printf ("    %f %e\n", f, f);
        fclose (fin);
        return 0;
    }

pax> ./qq
    -0.000000 -7.470040e-16
    3.141590 3.141590e+00
    2.718282 2.718282e+00
    42.000000 4.200000e+01 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:55:21.773

我不认为这是 float 的大小限制，因为它最多可以表示`2e−126`, about `1.18 *10e−38`。也许您在打印出来时没有指出浮点数的精度？

尝试像这样打印出来：

```
printf("%.30f\n", f); 
```

# java - 搜索地图或列表

> ID：15495958
> 
> 赞同：0
> 
> 时间：2013-03-19T09:43:10.013
> 
> 标签：java, database, gwt, search

我在 CMS 中部署我的 GWT 应用程序，其中“数据”来自 CMS“结构”，然后处理成 Javascript DB（我使用 TaffyDB）。

该 JS DB 被处理以插入 GWT 映射并变为：

```
Map<Long, Product> mp; 
```

产品数量不会那么多，我认为浏览器可以处理它。我可以在此地图中搜索特定`Product`属性的可能性有多大？然后返回一个`Map`or `List`of `Product`s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:47:13.533

第一个简单的方法应该是迭代 Map 并获得`Product`匹配的 s 。如果这太慢，您可以创建专门的地图，以便更容易（更快）找到您正在寻找的东西。这些地图的外观取决于您的“查询”。

例如

```
Map<String, Collection<Product>> colorMap; // maps colors to Products 
```

或者

```
Map<Integer, Collection<Product>> ratingMap; // maps user rating to Products 
```

您应该最初创建这些。所以你只需要迭代整个地图一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:46:03.383

> 我可以在此地图中搜索特定产品属性的可能性有多大？

好消息是这是可能的。坏消息是它将涉及线性时间搜索。换句话说，您必须检查地图的每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:32:21.283

第一种方法很简单，正如前面所说

```
List<Product> matchingPrds = new ArrayList<Product>();

foreach(Product pr : mp.Values())
{
    if(pr.getAttribute() == yourValue)
    {
        matchingPrds.add(pr);
    }
}

return pr; 
```

不过，迭代地图是个坏主意。如果您希望多次执行此操作，您可以迭代一次保存到一个新集合。这不是内存密集型的，因为集合只保存指针，并且对象实例基本相同。

因此，根据使用情况，您可以使用 user714965 解决方案

例子

```
Map<String,Map<Int,List<Product>> attrValueProductsMap = new HashMap<String,Map<Int,List<Product>>(); 
```

其中String是属性，即宽度，int是300，List包含这个Attribute的所有产品，Int。类型可能因实现而异。

# java - 使用 Java 反射加载接口

> ID：15495960
> 
> 赞同：0
> 
> 时间：2013-03-19T09:43:20.403
> 
> 标签：java, reflection, interface

有人可以指导我吗？我有一个类加载器，我可以使用 Java 反射加载一个类。但是，无论如何我可以将我的对象转换为接口吗？我知道有一个`ServiceLoader`，但我读过它，强烈不推荐。

```
//returns a class which implements IBorrowable
public static IBorrowable getBorrowable1()  
{
    IBorrowable a;  //an interface
     try
        {
            ClassLoader myClassLoader = ClassLoader.getSystemClassLoader();
            a = (IBorrowable) myClassLoader.loadClass("entityclasses.Books");

        }
    catch (Exception e ){
        System.out.println("error");
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:52:57.343

我唯一能看到您在这里可能做错的事情是使用系统类加载器。它可能无法看到您的实现类。

```
public static IBorrowable getBorrowable1()  //returns a class which implements IBorrowable
{
    IBorrowable a;  //an interface
     try
        {
            a = (IBorrowable) Class.forName("entityclasses.Books");
        }
    catch (Exception e ){
        System.out.println("error");
    }
    return a;
} 
```

作为旁白`ServiceLoader`，强烈推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:58:51.067

看起来您缺少对象实例化。

`myClassLoader.loadClass("entityclasses.Books")`不返回 的实例，*而是*`IBorrowable`返回Class 对象的实例，它指的是 Books。您需要使用`newInstance()`方法创建加载类的实例

这是固定版本（假设`Books`有默认构造函数）

```
public static IBorrowable getBorrowable1()  //returns a class which implements IBorrowable
{
     try {
        ClassLoader myClassLoader = ClassLoader.getSystemClassLoader();
        Class<IBorrowable> clazz = (IBorrowable) myClassLoader.loadClass("entityclasses.Books");
        return clazz.newInstance();
    } catch (Exception e) {
        System.out.println("error");
    }
    return null;
} 
```

# html - 在 Eclipse 项目中保存图片的位置

> ID：15495961
> 
> 赞同：0
> 
> 时间：2013-03-19T09:43:20.520
> 
> 标签：html, eclipse, jakarta-ee

我的 eclipe J2EE 项目中有简单的 Html 页面，我正在使用 Tomcat 服务器来部署它。问题是当我使用 eclipse 内部 Web 浏览器运行项目时，所有图片都变得可见。但是当我使用相同的部署系统默认外部浏览器图像未加载？/

```
<img src="E:\\Wallpapers\\12.jpg" align="left" alt="Scene1" > 
```

我的磁盘中有所有其他图像..我应该将图像保存在哪里来解决问题？/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:45:57.137

您应该将图像放在与 WEB-INF 文件夹平行的 Web 内容文件夹中，并使用相对 url 引用它们

```
<img src="12.jpg" align="left" alt="Scene1" > 
```

# google-apps-script - GAS : setFormula 和 IF : 语法正确吗？

> ID：15495964
> 
> 赞同：0
> 
> 时间：2013-03-19T09:43:34.927
> 
> 标签：google-apps-script, google-sheets

当包含 IF 函数时，setFormula 的正确语法是什么？

我想在 GAS 中调整这个公式：

```
=IF(AE2="","",((R2/Q2)-1)) 
```

我已经尝试过了（感谢[GAS：setFormula 括号或引号丢失？](https://stackoverflow.com/questions/15290675/gas-setformula-parenthesis-or-quotes-missing)）：

```
for (var j = 2; j<=sheetold.getLastRow(); j++){

sheetold.getRange("AD"+j).setFormula('=IF'(AE'+j="","",((R'+j+'\/Q'+j+')-1))'); 
```

唉，我有一个*“参数列表后缺少）”*错误。

我搞不清楚了 ！

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:15:45.987

试试看：

```
for (var j = 2; j<=sheetold.getLastRow(); j++){
  sheetold.getRange("AD"+j).setFormula('=IF(AE'+j+'="";"";((R'+j+'/Q'+j+')-1))');
} 
```

区别在于：

如果'(AE --> 如果(AE

和

, --> ;

# qt - 重建 Qt 应用程序不会更改字符串

> ID：15495966
> 
> 赞同：1
> 
> 时间：2013-03-19T09:43:45.700
> 
> 标签：qt, qt5

请认为我是 Qt 的新手。我为按钮单击事件编写了以下代码。

```
void dbCheck ()
{
    db = QSqlDatabase::addDatabase("QSQLITE");

    QString dbPath(QDir::home().path());

    dbPath.append("/Desktop/jk/sample.sqlite");
    qDebug () <<"Path Name is "<<dbPath;
    .......
} 
```

一段时间后，我将以下行更改为

```
dbPath.append("/Desktop/jk/Newsample.sqlite"); 
```

当我运行代码时，它仍然会打印上一个路径，即`sample.sqlite`.

我清理了项目，并重建了相同的项目，但没有用，我仍然得到相同的结果。真的很奇怪。

我在这里错过了什么吗？我该如何解决这个问题？有什么与缓存有关的吗？好心提醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:25:09.133

小心混合源内构建和“影子构建”。如果您转到源目录并运行`qmake`和`make`. 另一方面，Qt Creator 默认使用单独的构建目录，也就是“影子构建”，当然你也可以自己做。在实践中，这是`qmake`通过将构建目录创建为源目录的*兄弟*，去那里并`qmake ../myproject`在影子构建目录中生成生成文件来完成的。

现在的问题是，*make*程序实际上并没有单独构建目录的概念，如果您执行了源内构建，那么这些构建的文件也可以*访问*。然后当你认为你正在做影子构建时，*make 会*在源目录下找到那些构建的文件并使用它们而不是创建新的。

如果这是问题，**以下应该会有所帮助**：

在 Qt SDK 命令提示符处转到源目录，然后运行

```
make clean distclean 
```

注意：顺序很重要，`distclean`也会删除任何makefile，因此必须最后完成。也替换`make`为`nmake`or`mingw32-make`或您实际使用的任何内容。如果该命令没有找到生成文件，那么您可能没有在`qmake`那里运行并且问题是其他问题，但是您可以通过运行`qmake`生成生成文件来验证这一点，并且`make clean distclean`可以工作。

如果您使用版本控制（并且没有意外签入生成的文件......），删除额外文件的替代方法是使用版本控制工具从版本控制目录中删除所有额外文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:41:56.450

请重新检查您的环境：您真的清除了所有内容吗？确保您没有`*.o`, `moc_*.cpp`,`ui_*.h`来自以前的版本。尝试删除`.user`文件并重新配置您的项目以构建到不同的文件夹。

此外，您可以通过这种方式使用字符串连接：

```
QString dbPath = QString("%1%2")
        .arg( QDir::home().path() )
        .arg( "/Desktop/jk/Newsample.sqlite" ) ); 
```

Offtop，但不要忘记**原生分隔符**（[http://qt-project.org/doc/qt-4.8/qdir.html#separator](http://qt-project.org/doc/qt-4.8/qdir.html#separator)和[http://qt-project.org/doc/qt-4.8/qdir .html#toNativeSeparators](http://qt-project.org/doc/qt-4.8/qdir.html#toNativeSeparators) ) - 如果您编写跨平台软件。

# javascript - 如何在不刷新整个页面的情况下重新加载 DIV 内容

> ID：15495967
> 
> 赞同：4
> 
> 时间：2013-03-19T09:43:47.027
> 
> 标签：javascript, jquery, html, ajax

我只想用我得到的内容替换 DIV 内容。在我使用 ajax 向服务器发出 get 请求之后。

```
 $.ajax({
    type: "GET",
    url: "http://127.0.0.1:8000/result/?age="+ ageData +"&occasion="+ 
    occasionData     +"&relationship="+ forData +"#",

    success: function () {

        $("#testDIV").load();
    }
}); 
```

“testDIV”是我要替换从服务器获取的内容的 div 的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:45:39.953

如果您正在寻找`<div>`从脚本返回的内容来填充：

```
$.ajax({
    type: "GET",
    url: "http://127.0.0.1:8000/result/?age="+ ageData +"&occasion="+ 
    occasionData     +"&relationship="+ forData +"#",

    success: function (data) {

        $("#testDIV").html(data);
        //Puts response data inside <div id="testDIV"></div>
    }
}); 
```

`http://`哦，请注意前缀中的句号。除非您使用我们许多人都不知道的新协议 - 您会希望它消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:47:22.203

```
 $.ajax({
type: "GET",
url: "ht.tp://127.0.0.1:8000/result/?age="+ ageData +"&occasion="+ 
occasionData     +"&relationship="+ forData +"#",

success: function (response) {

    $("#testDIV").html(response);
}
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T09:45:06.083

使用带有内容的成功处理程序的第一个参数，并使用以下函数将您的 div 内容替换为它`.html()`：

```
success: function (data) {
    $("#testDIV").html(data);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T09:48:43.933

这是正确的成功功能：

```
success: function(htmlFromServer) {
     $("#testDIV").html(htmlFromServer);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T09:44:48.077

试试这个，

```
success: function (data) {
    $("#testDIV").html(data);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T09:45:52.227

```
 var url = "ht.tp://127.0.0.1:8000/result/?age="+ ageData +"&occasion="+ 
    occasionData+"&relationship="+ forData +"#";
    $('#testDIV').load(url); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T10:18:51.923

完成此操作的最简单方法是使用该`.load`函数

```
var url = "http://127.0.0.1:8000/result/?age="+ ageData +"&occasion=" + occasionData     +"&relationship="+ forData +"#";
$("#testDIV").load(url); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-19T11:04:48.353

以数字“5”开头的响应状态代码表示服务器知道它遇到错误或无法执行请求的情况。除了响应 HEAD 请求时，服务器应该包含一个实体，其中包含对错误情况的解释，并指出它是暂时的还是永久的。同样，用户代理应该向用户显示任何包含的实体。这些响应代码适用于任何请求方法。

# c# - JQuery MVC3 内联 Jquery 代码

> ID：15495974
> 
> 赞同：0
> 
> 时间：2013-03-19T09:44:08.453
> 
> 标签：c#, javascript, jquery, asp.net-mvc

所以，我有我的 MVC 3 视图（Razor），带有一个表单。现在它加载了加载它使用的所有脚本的模板，我把它放在表单的顶部：

```
<script type="text/javascript">
    $(function () {
        $('#App_RunFromUSB').change(function () {
            alert($('#App_RunFromUSB').val());
        });
    });
</script> 
```

这基本上意味着，如果选中表单上的复选框，则提醒用户其值。

很简单，那为什么它在警告框中一直显示为真......

我把它放在小提琴里，它做同样的事情，[JS Fiddle](http://jsfiddle.net/Dwb7N/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:48:47.403

值不会更改，因为它是一个复选框。这是被更改的属性`checked`，您可以使用以下方法检查它：

```
 $('#App_RunFromUSB').change(function () {
     alert($('#App_RunFromUSB').is(':checked'));
 }); 
```

请参阅以下 DEMO：http: [//jsfiddle.net/Dwb7N/2/](http://jsfiddle.net/Dwb7N/2/)进行确认。所以价值始终保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:48:50.613

如果您只是想根据复选框是否被选中来提醒真/假，那么将您的代码更新为；

```
alert($('#App_RunFromUSB').is(':checked')); 
```

可以在此处找到更改代码的示例[http://jsfiddle.net/Dwb7N/3/](http://jsfiddle.net/Dwb7N/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:48:50.130

```
<script type="text/javascript">
    $(function () {
        $('#App_RunFromUSB').change(function () {
            alert($('#App_RunFromUSB').is(':checked'));
        });
    });
</script> 
```

# c# - 创建许多位图时如何防止内存问题？

> ID：15495975
> 
> 赞同：1
> 
> 时间：2013-03-19T09:44:12.367
> 
> 标签：c#, .net, 64-bit

我需要在短时间内处理许多位图，我使用线程来执行。现在，我记得要处理所有这些，我没有内存泄漏。通常，我的应用程序会打开几个线程（我控制它们的数量 - 现在我同时只执行 4 个），并且每个线程都处理一个大位图并进行一些额外的图形处理。

一切正常，直到我处理让我说 - 最多连续 100 个位图。我的应用程序使用 opendialog，所以我打开 100 个第一个位图，然后我的应用程序会自动处理它们。完成后，我打开下一批 100 个位图，依此类推（所以在这些批次之间有一个明显的停顿）。这工作正常。该应用程序一直处于打开状态。我没有看到内存泄漏，在处理完最后一批后它保持稳定，我可以处理更多。

当我在一个批次中选择更多位图时出现问题 - 超过 300 个，因此我的应用程序处理所有这些位图时没有一秒钟的暂停。接近尾声时，我收到 GDI+ Out of Memory 错误，我的应用程序因消耗 1.7 GB 内存而挂起。

我的猜测是系统无法在这么短的时间内释放内存（而且我的应用程序正在保留更多）。是否可以？如何处理？我不想只是在过程中添加一个愚蠢的延迟。我想管理它。

更新：原因很简单，该应用程序被错误地编译为 32 位，因此只有 ~2GB 可用内存。虽然 GC 需要时间来释放内存，而应用程序仍在为更多位图保留更多内存，但应用程序达到了限制并挂起。

我将应用程序编译为 64 位，它可以完美运行。此外，我将控制内存使用，因此它不像现在这样无人看管。感谢所有提示和有趣的改进点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:49:54.637

要看你说的那个“短时间”有多长，你绝对可以看[Memory Mapped Files](http://msdn.microsoft.com/en-us/library/vstudio/dd997372%28v=vs.100%29.aspx)。使用它们可以*显着*降低 RAM 内存压力，并且不会降低速度。但是，正如我首先所说，这取决于您需要它们处理多快。

所以我肯定会建议也看看这个选项，测量一下它是否符合你的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:05:45.910

您的应用程序是否编译为 32 位进程？如果是这样，无论机器有多少 RAM，您都会在 2Gb 时耗尽内存。编译为 64 位将允许您充分利用所有系统内存，并且如果您开始用完 RAM，将使用交换空间（这当然会减慢应用程序的速度，但可能是一个比扔掉更好的解决方案内存异常）。

# javascript - textPath 上的 SVG 圆形文本（居中对齐）

> ID：15495978
> 
> 赞同：8
> 
> 时间：2013-03-19T09:44:24.863
> 
> 标签：javascript, svg, raphael, geometry

我遇到了与 SVG 相关的带圆圈文本的问题。我的目标是创建一个路径，让我可以在上面写字，但也可以使文本居中，仍然与我的路径保持一致——从圆圈的顶部开始。

**例子**

[这就是它的样子](http://i.imgur.com/AtmrTUG.png)（内图）

**问题**

目前我正在使用 textPath + path 组合来生成路径并在其上写入。

```
<svg>
<defs>
<path id="textPath" d="M 200 175 A 25 25 0 0 0 182.322 217.678" />
</defs>
<text x="25" y="0"><textPath xlink:href="#textPath" startOffset="0" >here goes my text</textPath></text>
</svg> 
```

我也尝试过 Raphael 库来管理它的工作，但严重的是我不能做我想做的事。这里有人真正设法使它工作吗？或者有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-19T10:09:54.007

将您的文本路径定义为要绘制的椭圆弧的完整上半球：

```
<path id="textPath" d="M 250 500 A 250,150 0 1 1 750,500" /> 
```

并将`startOffset`你的设置`textPath`为 50%。请注意，您的 svg 文件格式不正确，因为它缺少 xlink 的命名空间定义。以下是一个独立的工作示例：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- SO: http://stackoverflow.com/questions/15495978/svg-circled-text-on-textpath-center-align  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
   xmlns:xhtml="http://www.w3.org/1999/xhtml"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   version="1.1"
   width="20cm" height="20cm"
   viewBox="0 0 1000 1000"
   preserveAspectRatio="xMinYMin"
   style="background-color:white; border: solid 1px black;"
>
<defs>
<path id="textPath" d="M 250 500 A 250,150 0 1 1 750,500"/>
</defs>
<text x="0" y="0" text-anchor="middle" style="font-size:30pt;"><textPath xlink:href="#textPath" startOffset="50%" >here goes my text</textPath></text>
</svg> 
```

回复：评论一个解决方案以绕圈走：要点是定义文本路径以沿整个圆周延伸，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- SO: http://stackoverflow.com/questions/15495978/svg-circled-text-on-textpath-center-align  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
   xmlns:xhtml="http://www.w3.org/1999/xhtml"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   version="1.1"
   width="20cm" height="20cm"
   viewBox="0 0 1000 1000"
   preserveAspectRatio="xMinYMin"
   style="background-color:white; border: solid 1px black;"
>
<defs>
<path id="textPath" d="M 250 500 A 250,250 0 1 1 250 500.0001"/>
</defs>
<text x="0" y="0" text-anchor="middle" style="font-size:30pt;"><textPath xlink:href="#textPath" startOffset="50%" >this is a merry-go-round of all my text wrapped around a circle, a vbery big one</textPath></text>
</svg> 
```

# android - 为什么我的 BroadcastReceiver onReceive() 运行两次？

> ID：15495984
> 
> 赞同：0
> 
> 时间：2013-03-19T09:44:41.183
> 
> 标签：android

我的应用程序中有一个自定义广播接收器，用于在网络连接发生更改时接收意图。但是，出于某种原因，每当连接发生变化时，它就会运行两次，我不知道为什么。

**如何解决此问题，使其仅在网络更改时触发一次？**

注意：不，它不在清单中两次。

谢谢！

**编辑：** 这是接收器代码：

```
public class NetworkStateReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
        // Do stuff; This is running twice! 
    }
} 
```

这是清单中的内容：

```
<receiver android:name="NetworkStateReceiver">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T14:59:15.710

接收多个广播是设备特定的问题。有些手机只发送一个广播，而其他手机发送 2 或 3 个。但有一种解决方法：

假设您在 wifi 断开连接时收到断开消息，我猜第一个是正确的，而其他 2 个只是出于某种原因的回声。

要知道消息已被调用，您可以有一个静态布尔值，在连接和断开之间切换，并且仅在您收到连接并且布尔值为真时才调用您的子例程。类似于： public class ConnectionChangeReceiver extends BroadcastReceiver { private static boolean firstConnect = true;

```
@Override
public void onReceive(Context context, Intent intent) {
    final ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo();
    if (activeNetInfo != null) {
        if(firstConnect) { 
            // do subroutines here
            firstConnect = false;
        }
    }
    else {
        firstConnect= true;
    }
} 
```

}

# c++ - C++抽象用户界面设计

> ID：15495986
> 
> 赞同：0
> 
> 时间：2013-03-19T09:44:44.113
> 
> 标签：c++, oop, model-view-controller, user-interface

我正在为各种目标编写一个跨平台的 UI 工具包，其中一些是嵌入式的。其中一些平台支持“保留”渲染模式，其中一些更“即时”，所以我认为对于我的视觉效果我有两棵树 - 伪代码：

```
abstract class Visual 
{
    Visual( Widget widget ) { this.widget = widget; }
}

abstract class RetainedVisual : Visual
{
    abstract void Setup( Renderer r );
    abstract void Teardown( Renderer r );
}

abstract class ImmediateVisual : Visual
{
    abstract void Paint( Renderer r );
} 
```

到目前为止，一切都很好。但现在我也有`ContainerVisual`对小部件层次结构进行编码的类：

```
abstract class ContainerVisual : Visual
{
    void AddChild( Visual child ) {}
} 
```

哪种迫使我拥有一个`ImmediateContainerVisual`和一个`RetainedContainerVisual`开始看起来臃肿的课程。更好设计的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:25:38.553

最好的选择是将 3 个类组合到同一个 Visual 类：

```
class Visual {
   Visual(Widget w);
   bool SupportsSetupTearDown();
   bool SupportsPaint();
   abstract void Setup(Renderer r);
   abstract void TearDown(Renderer r);
   abstract void Paint(Renderer r);
}; 
```

那么容器小部件就不会有任何问题。所有的视觉都应该实现这两种渲染方法，当目标改变时，系统将开始调用不同的函数。这也允许有条件地不实现一种方式，并且可以构建特殊的视觉效果，从 SetupTearDown 转换为 Paint，从 Paint 转换为 SetupTearDown。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:42:21.830

如果没有更多信息，很难决定走什么路：保留/立即在功能方面有什么区别？容器有什么作用？

但是，尽管如此，在 C++ 中，您可能会考虑将类模板用于诸如 Container 之类的东西：

```
template <typename BaseType>
class ContainerVisual : public BaseType
{
public:
    void AddChild(BaseType & /*or smart pointer or whatever*/ child ) {}
} 
```

# c# - MVC 实体框架 - 处置 DbContext 的实例？

> ID：15495994
> 
> 赞同：2
> 
> 时间：2013-03-19T09:45:05.243
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4, code-first

我已经阅读过其他类似的帖子，但仍然不清楚。我希望没有人介意重新唤醒一个主题，而不是让旧的东西死去并希望得到回应。

问题是何时处置 DbContext。这是我的 MVC 应用程序上的控制器示例

```
 public ActionResult Index()
        {
          using (var db = new TheCurve.Models.TheCurveDb())
           {
              var result = db.GetTopArticles().ToList();
              return View(result);
           }

        } 
```

在此示例中，Razor 视图会引发异常，因为 DbContext 已因使用块而被释放。

如果我不处理 DbContext，当 Razor 视图尝试访问模型上的属性（例如这段代码）时，它会抛出错误“已经有一个与此命令关联的打开的数据读取器”。

```
var type = Model.ArticleType.Type;
    switch (type)
    {
        case "Example":
            defaultTitleImage = "Content/themes/base/images/example.png";
            break;

        case "Download":
            defaultTitleImage = "Content/themes/base/images/download.png";
            break;

        case "Link":
            defaultTitleImage = "Content/themes/base/images/link.png";
            break;

        case "Article":
            defaultTitleImage = "Content/themes/base/images/article.png";
            break;

    } 
```

我知道 DbContext 在检索数据后会关闭连接，但这是否意味着它不需要处理？

非常感谢

-编辑

显示文章概述的局部视图。

```
 @model TheCurve.Models.Article

@{
    //Shorten description for Article overview
    var strDescription = Model.Description.Length > 250 ? Model.Description.Substring(0, 250) + "..." : Model.Description + "...";

    //Decide which image to show on overview.
    string defaultTitleImage = null;
    if (Model.TitleImage == null)
    {
        var type = Model.ArticleType.Type;
        switch (type)
        {
            case "Example":
                defaultTitleImage = "Content/themes/base/images/example.png";
                break;

            case "Download":
                defaultTitleImage = "Content/themes/base/images/download.png";
                break;

            case "Link":
                defaultTitleImage = "Content/themes/base/images/link.png";
                break;

            case "Article":
                defaultTitleImage = "Content/themes/base/images/article.png";
                break;

        }

    }
    else
    {
        defaultTitleImage = Model.TitleImage;
    }

}

<article class="clear-fix">

<div class="float-left">
    <img src="@defaultTitleImage" alt="The Curve - Article Type"/>
</div>
<div class="float-left articleoverview">
    @Html.ActionLink(Model.Title.TrimStart(), "Details","Code", new {articleId = Model.Id}, null)
    <p>@strDescription</p>
    <p><i>By @Model.Author On @Model.DateCreated.ToString("dd/MM/yyyy")</i></p>

</div>
</article> 
```

这是使用上述部分的 Razor 视图。

```
@model IEnumerable<TheCurve.Models.Article>
@{
    ViewBag.Title = "Code Samples & Technology Blog";
}
    <section>
        <h3>Currently Viewing Most Recent Entries</h3>
        @foreach (var item in Model)
        {
            @Html.Partial("_ArticleOverview", item)
        }
    </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:48:45.500

如果您正在使用此连接到 SQL 服务器（我想是这样），则在您的连接字符串中添加 MultipleActiveResultsets=true。这允许多个打开的 datareader 连接到 SQL 服务器。

有关更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms131686.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:32:31.680

我一直在寻找的答案是 DbContext 应该始终位于 Using Block 中。为了防止在访问对象时处理 DbContext 的错误，我需要使用 .ToList 或 .ToArray 来实现 IEnumerable。

解决方案的另一部分实际上是由 von 通过推荐使用平面模型来辅助的。

# java - 正则表达式混淆

> ID：15495997
> 
> 赞同：7
> 
> 时间：2013-03-19T09:45:15.857
> 
> 标签：java, regex

我是 Java 正则表达式概念的新手。

谁能告诉我应该用于以下字符串的正确正则表达式 -

`String exp = "ABCD_123_abc".`

我用于上述字符串的正则表达式是：

`regExp = "([a-zA-Z]+)_([0-9]+)_([a-z]+)"`

但是下面代码的输出是`"**No Match Found**"`

```
Public static void main()
{
   String exp = "ABCD_123_abc";
   String regExp = "([a-zA-Z]+)_([0-9]+)_([a-z]+)";
   Pattern pattern = Pattern.compile(exp);
   Matcher matcher = pattern.matcher(regExp);
   if(matcher.matches())
   {
     System.out.println("Match found");
   }
   else
   {
     System.out.println(" NO Match found");
   }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T09:46:42.063

问题是：您不小心交换了使用正则表达式模式和要检查的表达式

```
String exp = "ABCD_123_abc";
String regExp = "([a-zA-Z]+)_([0-9]+)_([a-z]+)"; 
```

应该使用

```
Pattern pattern = Pattern.compile(regExp);
Matcher matcher = pattern.matcher(exp); 
```

[Pattern.compile(String regex)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String%29)函数接受正则表达式。

**编辑**

抱歉，我的第一个解决方案确实是绝对**不能，*永远*不能做的**事情：变量的名称与其值的含义相矛盾......这意味着痛苦和眼泪，以及在被大喊大叫的同时被愤怒的同事打在。**并且对这种罪行**没有有效的辩护......

**EDIT2您可以通过**[Matcher.group(int)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28int%29)函数 获取各个匹配组：

```
String matchedStringpart matcher.group(2); 
```

注意：我用作`2`参数：

*   `0`表示输入序列匹配
*   `1`表示第一组（`ABC`在这种情况下）
*   ... 等等

如果您只需要该`123`部分，为了清楚起见，我会重写正则表达式：

```
regExp = "[a-zA-Z]+_([0-9]+)_[a-z]+"; 
```

但是，在这种情况下，`group()`必须使用 调用`1`，因为现在第一个（也是唯一的）匹配组是第一个：

```
String matchedStringpart matcher.group(1); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T09:47:54.000

您没有编译正则表达式。你需要

```
Pattern pattern = Pattern.compile(regExp);
Matcher matcher = pattern.matcher(exp); 
```

即您上面的代码混淆了正则表达式和输入字符串。但是，您的实际正则表达式是正确的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T09:47:44.693

您的正则表达式**非常好**。

问题来自您在代码中交换`exp`的事实。`regExp`该函数`compile`将正则表达式作为参数，而该函数`matcher`将表达式进行匹配。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-19T10:04:43.287

您的（已编辑）正则表达式很好。

如果要提取`123`，可以使用`matcher.group(2)`. 该方法**只能**在or**之后** 调用。返回第 n 个。捕获组是您的正则表达式的一部分，用括号括起来。返回匹配的字符串。`matches``find``matcher.group(n)``capture group``matcher.group(0)`

例子

```
if(matcher.matches()) {
  System.out.println(matcher.group(0));
  System.out.println(matcher.group(1));
  System.out.println(matcher.group(2));
  System.out.println(matcher.group(3));
} 
```

印刷

```
 ABCD_123_abc
 ABCD
 123
 abc 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T09:47:25.437

`if(exp.matches(regExp))`

仅此一项就足够了。除非您有其他需求，否则您不需要 Pattern/Matcher。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T10:07:04.433

在这种情况下，如果您想检索 123，请使用以下代码：

```
 System.out.println(matcher.group(2)); 
```

这将输出打印为：**123**

您的正则表达式非常好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T10:10:50.280

此模式将起作用 - 它匹配任意数量的大写或小写字母，然后是下划线，然后是任意数量的数字，然后是下划线，然后是任意数量的大写或小写字母。如果您想更具体，您可以使用`{n}`而不是`+`匹配特定数量的字符。

```
public static void main(String[] args) {
    final String myString = "ABCD_123_abc";
    final Pattern p = Pattern.compile("^[A-Za-z]++_(\\d++)_[A-Za-z]++$");
    final Matcher matcher = p.matcher(myString);
    if (matcher.matches()) {
        System.out.println(matcher.group(1));
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-19T09:48:17.710

首先编译正则表达式，然后使用 matcher 进行比较..

```
Pattern pattern = Pattern.compile(regExp);
Matcher matcher = pattern.matcher(exp); 
```

# wix - 自定义操作为 64 位进程

> ID：15495998
> 
> 赞同：2
> 
> 时间：2013-03-19T09:45:18.930
> 
> 标签：wix, wix3.5

我有一个用于 64 位平台的设置。在该设置中，我引用了一个 64 位构建的 C# 自定义操作项目。在其中一个函数中，我注意到进程是 32 位而不是 64 位。为什么会这样，我怎样才能使它成为 64 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:37:40.883

您的托管自定义操作 ( `SfxCA.dll`) 的主机是根据`$(Platform)`您的自定义操作项目选择的。您可以看到在 .dll 中选择了适当的 .dll `wix.ca.targets`。的位数`SfxCA.dll`将控制自定义操作服务器的位数。Windows 安装程序将自动选择正确的自定义操作服务器。

因此，这一切都取决于您`$(Platform)`是否设置为`x64`获取 64 位自定义操作服务器。

注意：64 位包可以携带和执行 32 位自定义操作，但当然不能反过来。