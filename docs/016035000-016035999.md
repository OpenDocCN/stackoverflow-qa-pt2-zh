# StackOverflow 问答 16035000-16035999

# java - 来自 Apache Httpclient 的 DefaultServiceUnavailableRetryStrategy 构造函数

> ID：16035011
> 
> 赞同：2
> 
> 时间：2013-04-16T10:43:05.697
> 
> 标签：java, apache-httpclient-4.x

来自 Apache Httpclient v.4的类[DefaultServiceUnavailableRetryStrategy](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultServiceUnavailableRetryStrategy.html#DefaultServiceUnavailableRetryStrategy%28int,%20int%29)有一个接受两个参数的构造函数。第一个，`int maxRetries`，是明确的；第二个`int retryInterval`有明确的范围，但我不明白它是否必须代表分钟、秒或其他东西。该文档没有具体说明这一点。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:43:53.963

你是对的，*有时*文档没有很好的记录。无论如何，我这里有源代码。我只是在类中复制并粘贴字段声明 `DefaultServiceUnavailableRetryStrategy`：

```
/**
 * Retry interval between subsequent requests, in milliseconds. Default
 * value is 1 second.
 */
private final long retryInterval; 
```

如您所见，它是**毫秒**，而默认值为 1000（即 1 秒）。

我也相信*毫秒*是时间的标准！但我不太确定这一点！

# php - 正则表达式用于匹配 img 标记的开始和结束尖括号内的所有文本

> ID：16035039
> 
> 赞同：2
> 
> 时间：2013-04-16T10:43:59.703
> 
> 标签：php, regex

我想创建正则表达式，以匹配开头内的文本及其匹配的 html img 标记与 PHP 的右尖括号。假设我在变量 $searchThis 中有 html 文本

```
$searchThis = "<html><div></div><img src='/relative/path/img1.png'/></div>
<img src='/relative/path/img2.png'/><div></div></div>
<img src='/relative/path/img3.png'/><ul><li></li></ul></html>"; 
```

我想匹配省略号替换的标签中的内容。结果必须是以下匹配项：

```
src='/relative/path/img1.png'
src='/relative/path/img2.png'
src='/relative/path/img3.png' 
```

这就是我想象的模式应该是这样的，实际上对我不起作用：

```
$pattern = "<img([^\/]+)\/>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:50:31.490

永远不要尝试使用正则表达式解析 HTML。解析 HTML 使用[**DOM Parser**](http://php.net/manual/en/book.dom.php)。考虑这样的代码：

```
$html = <<< EOF
<html><div></div><img src='/relative/path/img1.png'/></div>
<img src='/relative/path/img2.png'/><div></div></div>
<img src='/relative/path/img3.png'/><ul><li></li></ul></html>
EOF;
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$nodelist = $xpath->query("//img");
for($i=0; $i < $nodelist->length; $i++) {
    $node = $nodelist->item($i);
    $src = $node->attributes->getNamedItem('src')->nodeValue;
    echo "src='$src'\n";
} 
```

**输出：**

```
src='/relative/path/img1.png'
src='/relative/path/img2.png'
src='/relative/path/img3.png' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:47:50.153

**尝试：**

```
preg_match_all("`<img (.*)/>`Uis", $searchThis, $results);
print_r($results); 
```

打印结构`$results`将向您显示其内容。

**注意：**如果您希望更准确，我建议您`src=`在搜索中包含并一直到结束引号，以便仅选择图像地址。然后您可以在之后添加缺少的文本 ( `src=`)。
这样，即使您的图像标签看起来不像预期的那样，您仍然可以获得相对路径（即标签中还有其他内容，例如`alt="Smiley face" height="42" width="42"`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:54:42.280

[使用simplehtmldom](http://simplehtmldom.sourceforge.net/)解析示例

```
 <?php
    include("simplehtmldom/simple_html_dom.php");
    // Create DOM from URL or file
    $html = str_get_html("<html><div></div><img src='/relative/path/img1.png'/></div>
    <img src='/relative/path/img2.png'/><div></div></div>
    <img src='/relative/path/img3.png'/><ul><li></li></ul></html>");

    // Find all images
    foreach($html->find('img') as $element)
           echo $element->src . '<br>';
    ?> 
```

# cakephp-1.3 - 如何访问控制器中的数组

> ID：16035040
> 
> 赞同：0
> 
> 时间：2013-04-16T10:44:02.117
> 
> 标签：cakephp-1.3

嘿，我需要一个帮助我有“产品”表和“服务”表。这两个表之间存在关联。“产品”属于“服务”，“服务”有很多“产品”。我必须为所有“产品”找到其对应的所有“Service_id”。

我的代码是：-

```
$products = $this->Product->query('select name from products');//retrives all products
for ($p=0; $p<count($products); $p++)
                {
                  $serviceid = $this->Product->query("select service_id from products where name = $products[$p][name]");//for each product finding its all corresponding service_id

                } 
```

在上面的代码中 $product[$p][name] 不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:59:25.153

更改`$this->Product->query('select name from products');`for a cake 方法：`find('all');`

由于我不是 的粉丝`$recursive != -1`，因此如果您想避免这种递归，我会将代码放在这里：

查找所有具有其对应服务的产品

```
$products = $this->Product->find('all', array('recursive'=>-1,
                                              'contain'=>array('Service'))); 
```

要查找与其对应产品的所有服务，几乎相同

```
$services = $this->Service->find('all', array('recursive'=>-1,
                                              'contain'=>array('Product'))); 
```

一定要为这种事情阅读[cake 的方法，](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#retrieving-your-data)当你掌握它时，它们会为你节省大量时间和 sql 相关的头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T06:35:27.410

一些重要的事情..

**[IMP] 不要在循环中触发任何查询。这是非常糟糕的做法，会将您的应用程序性能降至最低。**

1.  在 cake 中，您可以找到关联表的记录，因为您提到了 products Belongs To Service。因此您的查询应该看起来像

    $this->Product->find('all');

如我所见，您正在寻找 NAME 和 SERVICE_ID，因此查询将是

```
$this->Product->find('all',array('fields'=>array('Products.name','Service.id'))); 
```

这种情况下你不需要用户递归，因为它需要

```
$this->Product->recursive = 2; 
```

希望这对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:50:01.340

首先请不要这样做：

`for ($p=0; $p<count($products); $p++) {...`

始终将计数分配给变量：

`$productsCount = count($products);`

接着：

`for ($p=0; $p<$productsCount; $p++) {...`

当你的计数在你的循环中时，它每次都会被调用。这对执行该语句所需的时间有巨大的影响！这个计数只是您需要的静态整数值，您肯定不需要每次都计算它。

**关于你的问题：**

你可以通过 ORM 做到这一点，因为你已经有了模型之间的关联，对吧？这将为您提供所有相关服务的所有产品记录：

```
$this->Product->recursive = 1;
$this->Product->find('all'); 
```

您也可以“反其道而行之”，但`ServiceModel`必须在 Controller ( `Controller::$uses`) 中可用。

```
$this->Service->recursive = 1;
$this->Service->find('all'); 
```

[您可以在此处](http://api.cakephp.org/2.3/class-Model.html#_find)`Model::find()`添加条件、要获取的字段等。

@Jueecy.new 我已经对这种方式发表了评论，但是您示例中的最后一点绝对容易发生 SQLInjection！只需尝试`DROP DATABASE someDB`通过 HTML 输入字段并观察 DB 死掉... CakePHP 不会像那样清理混乱。这是该方法的一个特定功能`Model::query`- 它用于手写查询。

# python - 如何避免在 SQLAlchemy - python 的多对多关系表中添加重复项？

> ID：16035043
> 
> 赞同：17
> 
> 时间：2013-04-16T10:44:06.123
> 
> 标签：python, sqlalchemy, many-to-many, duplicates, unique

我正在处理与 sqlalchemy 的多对多关系。我的问题是如何避免在多对多关系表中添加重复的对值。

为了让事情更清楚，我将使用官方 SQLAlchemy 文档中的示例。

```
Base = declarative_base()

Parents2children = Table('parents2children', Base.metadata,                                                                                                                                                                                                     
  Column('parents_id', Integer, ForeignKey('parents.id')),                                                                                                                                                                                                       
  Column('children_id', Integer, ForeignKey('children.id'))
)

class Parent(Base):
    __tablename__ = 'parents'
    id = Column(Integer, primary_key=True)
    parent_name = Column(String(45))
    child_rel = relationship("Child", secondary=Parents2children, backref= "parents_backref") 

    def __init__(self, parent_name=""):
        self.parent_name=parent_name
    def __repr__(self):
        return "<parents(id:'%i', parent_name:'%s')>" % (self.id, self.parent_name)

class Child(Base):
    __tablename__ = 'children'
    id = Column(Integer, primary_key=True)
    child_name = Column(String(45))

    def __init__(self, child_name=""):
        self.child_name= child_name
    def __repr__(self):
        return "<experiments(id:'%i', child_name:'%s')>" % (self.id, self.child_name)

###########################################

def setUp():
    global Session
    engine=create_engine('mysql://root:root@localhost/db_name?charset=utf8', pool_recycle=3600,echo=False)
    Session=sessionmaker(bind=engine)

def add_data():
    session=Session()
    name_father1=Parent(parent_name="Richard")
    name_mother1=Parent(parent_name="Kate")
    name_daughter1=Child(child_name="Helen")
    name_son1=Child(child_name="John")

    session.add(name_father1)
    session.add(name_mother1)

    name_father1.child_rel.append(name_son1)
    name_daughter1.parents_backref.append(name_father1)
    name_son1.parents_backref.append(name_father1)

    session.commit()
    session.close()

setUp()
add_data()
session.close() 
```

使用此代码，插入到表中的数据如下：

*父母表*：

```
+----+-------------+
| id | parent_name |
+----+-------------+
|  1 | Richard     |
|  2 | Kate        |
+----+-------------+ 
```

*儿童桌*：

```
+----+------------+
| id | child_name |
+----+------------+
|  1 | Helen      |
|  2 | John       |
+----+------------+ 
```

*双亲表*

```
+------------+-------------+
| parents_id | children_id |
+------------+-------------+
|          1 |           1 |
|          1 |           2 |
|          1 |           1 |
+------------+-------------+ 
```

如您所见，最后一个表中有重复项...如何防止 SQLAlchemy 添加这些重复项？

*我试图把*relationship("Child", secondary=..., **collection_class=set** )*但显示此错误：*

```
AttributeError: 'InstrumentedSet' object has no attribute 'append' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T11:11:59.110

将[PrimaryKeyConstraint](http://docs.sqlalchemy.org/en/latest/core/constraints.html#primary-key-constraint)（或[UniqueConstraint](http://docs.sqlalchemy.org/en/latest/core/constraints.html#unique-constraint)）添加到您的`relationship`表中：

```
Parents2children = Table('parents2children', Base.metadata,                                                                                                                                                                                                     
  Column('parents_id', Integer, ForeignKey('parents.id')),                                                                                                                                                                                                       
  Column('children_id', Integer, ForeignKey('children.id')),
  PrimaryKeyConstraint('parents_id', 'children_id'),
) 
```

当您尝试提交从双方添加的关系时，您的代码将生成错误。非常推荐这样做。

为了不产生错误，只需先检查：

```
if not(name_father1 in name_son1.parents_backref):
    name_son1.parents_backref.append(name_father1) 
```

# memcached - SASL 创建用户失败

> ID：16035055
> 
> 赞同：2
> 
> 时间：2013-04-16T10:44:36.640
> 
> 标签：memcached, sasl

我正在尝试将新用户添加到 SASL 数据库：

```
 saslpasswd2 -a memcached -c <new_user>. 
```

一旦我重复密码，我会收到以下错误：

```
 saslpasswd2: generic failure 
```

我无法在网上找到任何解决方案...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T11:02:21.287

如果有人有类似的问题，解决方案是在`sudo`之前添加`saslpasswd2`...

```
sudo saslpasswd2 -a memcached -c <new_user> 
```

# ruby - var = Watir::Browser.start 'url' 后不能在 IRB 中使用变量

> ID：16035059
> 
> 赞同：5
> 
> 时间：2013-04-16T10:44:43.690
> 
> 标签：ruby, watir, watir-webdriver, irb

```
1.9.3-p327 :001 > require 'watir-webdriver'
=> true 
1.9.3-p327 :002 > b = Watir::Browser.new 
```

然后Firefox启动，我无能为力。我的 IRB 不允许我输入新命令。

尝试了浏览器初始化的不同变体：

```
b = Watir::Browser.new :opera
b = Watir::Browser.new :firefox
b = Watir::Browser.start 'url' 
```

应该出现如下内容：

```
=> #<OperaWatir::Browser:0x1496e57 @active_window=#<OperaWatir::Window:0x1eb1db2
@browser=#<OperaWatir::Browser:0x1496e57 ...>>,@driver=#
Java::ComOperaCoreSystems::OperaDriver:0xeabd2f>> 
```

但控制台中没有输出。60 秒后浏览器关闭，我得到以下输出：

```
1.9.3-p327 :002 > b = Watir::Browser.new
Selenium::WebDriver::Error::WebDriverError: unable to obtain stable firefox connection
in 60 seconds (127.0.0.1:7055) 
```

试过chrome，firefox，浏览器打开，但irb锁。

操作系统：Ubuntu

Ruby：2.0.0（也在 1.9.3 上尝试过）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:41:28.163

***`Selenium::WebDriver::Error::WebDriverError unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055)`***- 这通常发生在您的浏览器版本和`web-driver`版本不匹配时。我个人也观察到了同样的情况。唯一的解决方案是同步`watir-webdriver`官方网站中记录的浏览器版本。

这里有一些关于事实的好资源：

[`resource1`](https://stackoverflow.com/questions/14303161/unable-to-obtain-stable-firefox-connection-in-60-seconds-127-0-0-17055)

[`resource2`](https://groups.google.com/forum/?fromgroups=#!topic/watir-general/YdJ4x4eF_qg)

[`resource3`](https://stackoverflow.com/questions/7263564/unable-to-obtain-stable-firefox-connection-in-60-seconds-127-0-0-17055)

希望它会帮助你。

# ios - NSRegularexpression 多行和堆栈

> ID：16035061
> 
> 赞同：1
> 
> 时间：2013-04-16T10:44:50.093
> 
> 标签：ios, regex, nsregularexpression

我找不到具有平衡标签的正则表达式，一个用于打开，一个用于关闭。标签必须包含多行文本；和标签是动态的，不是在编译时定义的

我无法匹配开始标签对应的结束标签，例如 {{home}} -> {{/home}} 和 {{hello}} -> {{/hello}}；它匹配 {{home}} 到 {{/hello}} 任何帮助将不胜感激

任何帮助将不胜感激

格雷戈里

ps：我评论了非工作正则表达式

```
 NSString * string;
    NSError* error = nil;
    NSRegularExpression* regex;
    NSArray* matches;

    string =
    @" The {{demo}}following tables describe the {{/demo}}character expressions"
    " used by the regular expression to match patterns within "
    " a string,{{home}} the pattern operators that specify how many"
    " times a pattern is matched and additional matching"
    " restrictions, and the last {{/home}}table specifies flags"
    " that can be included in the regular ";

    regex = [NSRegularExpression regularExpressionWithPattern:
             @"\\{\\{demo\\}\\}"
             "(.*)?"
             "\\{\\{(//|/demo)\\}\\}"
                                                      options:NSRegularExpressionDotMatchesLineSeparators
                                                        error:&error];

//    regex = [NSRegularExpression regularExpressionWithPattern:
//             @"\\{\\{.*\\}\\}"
//             "(.*)?"
//             "\\{\\{(//|/.*)\\}\\}"
//                                                      options:NSRegularExpressionDotMatchesLineSeparators
//                                                        error:&error];

    matches = [regex matchesInString:string
                             options:NSRegularExpressionDotMatchesLineSeparators
                               range:NSMakeRange(0, [string length])];

    for ( NSTextCheckingResult* match in matches )
    {
        NSLog(@"### %@ ###", [string substringWithRange:[match range]]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:56:02.530

您可以使用此模式

```
\{\{([^/]*?)\}\}(.*?)\{\{(/\1|//)\}\}
    -------     ----     --------
       |          |          |->matches closing tag having value same as group 1 or //
       |          |->content in group 2
       |->matches the opening tag value and captures it in group1 
```

# java - 使用 Java 解析 XML 文件

> ID：16035064
> 
> 赞同：0
> 
> 时间：2013-04-16T10:44:58.423
> 
> 标签：java, xml-parsing

我需要在 Java 中解析我的 XML 文件并根据条件检查一些支持。我尝试为此使用 DOM。

```
 <Config>
      <Configuration>
        <Descriptor>
          <e id="0">
            <family>Rest</family>
            <supportedList>
              <_length>5</_length>
              <_type>TypeX[]</_type>
              <e id="0">value-1</e>
              <e id="1">value-2</e>
              <e id="2">value-3</e>
              <e id="3">value-4</e>
              <e id="4">value-5</e>
            </supportedList>
          </e>
          <e id="1">
            <family>Rest1</family>
            <supportedList>
              <_length>5</_length>
              <_type>TypeX[]</_type>
              <e id="0">value1-1</e>
              <e id="1">value1-2</e>
              <e id="2">value1-3</e>
              <e id="3">value1-4</e>
              <e id="4">value1-5</e>
            </supportedList>
          </e>
          </Descriptor>
      </Configuration>
    </Config> 
```

在上面的XML文件中，我需要遍历“e”块，然后是Descriptor块，然后搜索Family - Rest1，然后遍历supportedList。检查supportedList 是否包含用户提供的值，如果存在则返回true。

我尝试使用 DOM 解析器，但无法正确解析文件。我正在处理的实际 XML 文件有 20K 行，并且数据太多。对此有任何简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:02:51.767

```
 XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();
    xPathExpression = xpath.compile("//family[text()='Rest1']/e");

    NodeList list = (NodeList) xPathExpression
        .evaluate(xml, XPathConstants.NODESET); 
```

在 XPath 语法上，搜索“XPath 备忘单”左右就足够了。

# perl - suid 位脚本 perl

> ID：16035067
> 
> 赞同：0
> 
> 时间：2013-04-16T10:45:18.550
> 
> 标签：perl, sudo, chmod, chown, suid

我正在制作一个 perl 脚本来改变亮度。我必须在设置为只读的文件“亮度”中写入。我想使用 SUID 位，所以我做到了。

```
$> sudo chown root:root brightness
$> sudo chmod 4755 brightness
$> ls -l brightness
-rwsr-xr-x 1 root root 698 Apr 15 23:22 brightness
$> ./bightness -20
No open bightness
$> sudo ./brightness -20
Done 
```

为什么它不适用于普通用户？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:43:24.547

SUID 不适用于普通的 perl 脚本。您要么必须使用包装器，要么使用`suidperl`. 此外，SUID 脚本强制使用该`-T`标志。

> [http://www.perlmonks.org/?node_id=130671](http://www.perlmonks.org/?node_id=130671)

请注意，在 SUID 模式下运行脚本是不安全的！

> [http://www.perlmonks.org/?node=perlsec](http://www.perlmonks.org/?node=perlsec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:38:45.967

太疯狂了：/我只使用本机perl ..

我在 Archlinux 上找不到 suidperl，而且包装器看起来很不稳定，不是吗？

# php - 无法使用 Cakephp 获取 facebook 用户详细信息

> ID：16035069
> 
> 赞同：0
> 
> 时间：2013-04-16T10:45:26.877
> 
> 标签：php, cakephp, facebook-php-sdk

我正在尝试将 facebook connect webtechnick 插件与我的 Cakephp 应用程序集成。我的登录和注销工作正常，但我无法获取 Facebook 用户详细信息，如用户名、用户 ID、名字、姓氏等。

这是我在 Appcontroller 中的代码：

```
public $components = array(
            'Session','Facebook.Connect'=>array('model' => 'User'));

public function beforeFilter() {

$this->set('facebook_user', $this->Connect->user());

 } 
```

当我在我看来尝试这个时，我`<?php echo debug($facebook_user);?>` 得到了空值

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T13:52:20.247

`$this->Connect->user()`当您拨打电话时，您的用户可能已注销`FB->api('/me')`。根据您在 /Config/core.php 和 php.ini 设置中设置的调试级别`html_errors = On`，如果是这种情况，您应该会抛出异常，并且会解释为什么您会收到空响应。

就个人而言，我在 AppController.php 中使用：

```
public function beforeFilter(){
    if($this->Connect->FB->getUser() != 0){
        $this->set('facebookUser', $this->Connect->user());
    }
} 
```

这样，如果我没有授予对非通用详细信息（id、名称、生物等）访问权限的访问令牌，它不会尝试调用 api。FB->getUser() 答案为 0 意味着用户没有授予此应用程序对其数据的访问权限，因此不允许 user_token 调用`api(/me)`.

无论如何，您应该尝试从控制器内部调试问题，尝试`var_dump($this->Connect->uid, $this->Connect->me);`在 beforeFilter() 的末尾添加并查看您得到的结果。

# django - 仅将上下文处理器用于特定应用程序

> ID：16035070
> 
> 赞同：3
> 
> 时间：2013-04-16T10:45:27.287
> 
> 标签：django

我已经找了几天了，是否可以为特定范围的 url 设置上下文处理器。但到目前为止我还没有发现任何东西。

我想计算列表中对象的数量，所以我可以在我的模板中放入

```
<ul>
<li><a href="{%url unread_mails %}">Unread mails (42)</a></li>
<li><a href="{%url deleted_mails %}">Deleted mails (5)</a></li>
</ul> 
```

但是，这仅对同一应用程序中的 5 个视图（将来可能更多）是必需的。是否可以仅为此应用启用上下文处理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-01T13:15:35.750

就我而言，我希望我的上下文处理器仅在点击管理仪表板时运行，否则不运行。所以我实现了类似的东西

```
def custom_context_processor(request,*args,**kwargs):
if '/' in request.META['PATH_INFO']:
    return {"something"}
else:
    #do something 
```

这个对我有用

# iphone - 我怎么知道第一次没有在设备 iPhone 上安装应用程序

> ID：16035072
> 
> 赞同：1
> 
> 时间：2013-04-16T10:45:34.283
> 
> 标签：iphone, ios, objective-c, xcode

我想在第一次安装应用程序时存储一些价值。因此，当用户删除并重新安装该应用程序时。读取该值并采取相应措施。有什么办法吗？

场景：第一次安装的应用程序在某处存储价值。用户从 iPhone 中删除应用程序。重新安装应用程序。读取该存储值。?

这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:01:12.727

要实现您想要的，您可以直接参考Apple 文档中的[Keychain Data](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html#//apple_ref/doc/uid/TP40007072-CH9-SW30)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:47:49.463

使用钥匙串存储您的数据，因为即使应用程序被卸载或删除，钥匙串项目也不会被删除。这个 Api 会有很大帮助[Link](https://github.com/kishikawakatsumi/UICKeyChainStore)，看看

# javascript - 如何让这个脚本工作

> ID：16035075
> 
> 赞同：-3
> 
> 时间：2013-04-16T10:45:43.673
> 
> 标签：javascript, html

请访问此[页面](http://www.myfxbook.com/forex-broker-spreads)。我想在我的网站上放置一个指向这个的链接。但是，当用户单击并转到页面时，我希望默认选中包含佣金复选框。

知道如何完成这项工作吗？

![在此处输入图像描述](https://i.stack.imgur.com/uqcZO.png)

更新 - 以下是我尝试过的代码，但事件没有发生我收到错误

```
<iframe id="forex"src="http://www.myfxbook.com/forex-broker-spreads" width="100%" height="100%" frameborder="0"> <p>Your browser does not support iframes.</p></iframe>

<script type="text/javascript">

    $(document).ready(function() { //want to trigger it from outside the iframe
        $("#forex").load(function(){
        $("#forex").contents().find("#includeCommission").trigger("click");
        });
      });

</script> 
```

![在此处输入图像描述](https://i.stack.imgur.com/7Cfpb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:09:11.757

在浏览器中禁止跨域访问。所以你不能访问属于另一个域的 iframe 中的元素。为此，父级和 iframe 源应位于同一域中。[在这里检查](https://stackoverflow.com/questions/11020479/iframe-crossdomain-cannot-interact)

# java - 删除引用以帮助 GC 是一种好习惯吗？

> ID：16035076
> 
> 赞同：5
> 
> 时间：2013-04-16T10:45:44.067
> 
> 标签：java, garbage-collection

我想知道您是否认为删除对`null`对象的引用（将它们设置为 ）以帮助 Java 垃圾收集器是一种好习惯。

例如，假设您有一个包含两个字段的类，其中一个非常消耗内存。如果你知道你只需要它进行特定的处理，你可以在帮助 GC 之后立即将其设为空。

假设我真的需要这两个字段，而不仅仅是内部变量，所以`heavyObject1`不能在方法结束时超出范围。

你会这样做作为一般做法吗？

```
public class TestClass {

   public static Object heavyObject1;
   public static Object object2;

   private static void action() {
    object2 = doSomething(heavyObject1);

    heavyObject1 = null; //is this good?
   }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T10:50:13.973

通常它是不需要的。

在以下特定情况下，这是一个好主意：

*   物体很大（即*大到足以让您关心*）
*   您确定*不再需要该对象*
*   否则该对象*不会超出范围*（例如，您知道周围的对象*不会*被垃圾收集）

但是，如果您发现自己处于这种情况，我怀疑您无论如何都有设计气味：为什么内部对象与封闭对象具有如此不同的范围/生命周期？这让我很怀疑，因为通常当您使用组合构建对象图时，您希望组合对象具有相似的生命周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:52:56.873

在大多数情况下，您不需要将对象设置为 null 即可进行垃圾回收。**如果您在适当的范围内（方法级别、实例级别或类级别）对对象进行 decalre，则该对象在使用后将立即无法访问，并且有资格进行垃圾回收。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:49:12.457

如果您不想再使用该对象，分配给引用肯定**不是**坏习惯。`null`但是，指望 GC在程序执行期间的任何时候很快*或根本就收集它们***是不好的做法。**

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:49:46.483

不，这是不必要的。只要heavyObject1 超出范围，它就会被标记为GC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:23:37.867

`null`不，这对田野或当地人来说通常不是好的做法。

在大多数情况下，您要清空其字段的对象在 GC 运行之前将变得不可访问。如果发生这种情况，您将对象字段归零所花费的 CPU 周期将被浪费。

唯一需要/对`null`字段/本地人有益的情况是：

1.  当GC 运行时，父对象*可能*仍然可以访问，并且
2.  子对象（图）足够大，以使保留的内存量很大……相对于总堆大小。

如果您正在实现一个*旨在*用于各种情况的类，您也可以这样做......其中一些情况可能符合上述标准。（例如，实例可能会变大的数据结构实现。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T11:26:33.067

除非您的类正在管理自己的内存或您的类正在缓存资源，否则取消引用对象是不必要的，那么应该消除过时的引用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T11:03:12.167

作为*一般*做法，不，因为它不是必需的。

有一些特殊情况——我可以想象一个长期存在的类，例如，它有一个长长的内存消耗对象列表，它使用这些对象执行一次操作，然后等待一段时间，然后再用另一个列表替换该列表。最好在等待时将列表清空，不会伤害任何东西，并且可能会阻止程序不得不同时结束两个列表。

但这又是“不需要”的原则。您不能指望 GC 在特定时间段内运行，因此程序需要支持同时将这两个列表放在堆上，因此如果以前不是这样，它不会使您的程序可行。

请不要鼓励人们对此制定“规则”。当我想到我读过的所有代码时，有人将“final”放在（几乎）所有（他们认为）在初始化后不会改变的变量之前，这使得代码的可读性降低并让我相信程序员有不了解他们所谓的速度改进......*

# bash - 如何解压缩内部只有一个目录的存档并将其重命名为常量名称

> ID：16035077
> 
> 赞同：0
> 
> 时间：2013-04-16T10:45:44.513
> 
> 标签：bash, archive, tar

大多数 tar 软件版本确实包含一个包含版本的目录，例如`product-1.2.3`，我正在寻找一个简单的 bash 解决方案来将此类存档解压缩到不包含该版本的目录。

请注意，tar 存档名称与其中包含的目录不同。

显然，一种方法是在之后重命名它，但为了做到这一点，您需要知道原始目录名称是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:56:28.823

这里有两个有用的选项：

```
File name transformations:
       --strip-components=NUMBER
              strip NUMBER leading components from file names on extraction
Common options:
       -C, --directory=DIR
              change to directory DIR 
```

例如

```
[user@host tmp]$ mkdir test-0.0.2
[user@host tmp]$ echo Hello > test-0.0.2/README
[user@host tmp]$ tar zvcf mytarball.tgz test-0.0.2
test-0.0.2/
test-0.0.2/README
[user@host tmp]$ mkdir targetdir
[user@host tmp]$ tar zxvf mytarball.tgz --strip-components=1 -C targetdir
test-0.0.2/README
[user@host tmp]$ ls targetdir/
README
[user@host tmp]$ 
```

# php - 获取运行频率数据并转换为有效时间的最有效方法

> ID：16035081
> 
> 赞同：0
> 
> 时间：2013-04-16T10:45:51.427
> 
> 标签：php, sql-server-2008, datetime, time

这是一个有点令人困惑的问题。希望我能用一种有意义的方式来表达它。

在我的 sql server 2008 r2 数据库中，我有一个名为的表`expectedTimes`，它告诉任务运行的频率以及开始和结束时间。它看起来像下面

```
| taskID | startTime | endTime | freq |
|________|___________|_________|______|
|    1   |    08:00  |   13:45 |  30  |
|    2   |    00:00  |   23:59 |  15  |
|    3   |    06:35  |   20:20 |  10  |
|    4   |    08:00  |   09:00 |  5   |
|________|___________|_________|______| 
```

我将每 15 分钟运行一次脚本，检查预期运行的任务。返回以下显示该内容的最有效方式是什么`8:36`。我需要一种有效的方法来执行此操作的原因是表中有 1500 行`expecteTimes`。必须每 15 分钟乘以多少次才能到达当前时间似乎非常耗费资源

```
| taskID | expected |
|________|__________|
|    1   |   08:30  |
|    2   |   08:30  |
|    3   |   08:25  |
|    3   |   08:35  |
|    4   |   08:25  |
|    4   |   08:30  |
|    4   |   08:35  | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:08:50.877

所以我写了这个sql - 希望有用。

```
create table temp
(
  taskID int,
  starttime time,
  EndTime time,
  freq int 
)
insert into temp (taskID,starttime,EndTime,freq)
select 1   ,    '08:00'  ,   '13:45' ,  30  
union all
select 2   ,    '00:00'  ,   '23:59' ,  15  
union all
select 3   ,    '06:35'  ,   '20:20' ,  10  
union all
select 4   ,    '08:00'  ,   '09:00' ,  5   

    Declare @date datetime
    SELECT @date = Getdate() 

    ;with src as (
    SELECT  
    convert(datetime2(0),cast(cast(getdate() as date) as nvarchar)+' '+cast(starttime as nvarchar),102) startDate,
    convert(datetime2(0),cast(cast(getdate() as date) as nvarchar)+' '+cast(Endtime as nvarchar),102) endDate
    ,* FROM    temp
    )

    SELECT 
    case when @date between startDate and endDate then dateadd(minute,(datediff(minute,startdate,getdate())/freq+1)*15,startDate)
    else dateadd(d,1,startDate) end as NextRun,
    *
    FROM    src 
```

# templates - 如何在 Excel 中更改默认字体打开 CSV

> ID：16035082
> 
> 赞同：2
> 
> 时间：2013-04-16T10:45:51.517
> 
> 标签：templates, csv, excel-2010

我正在使用 Excel 2010 编辑 CSV 文件。出于美学原因，我想让它使用 Courier New 字体作为默认字体，而不是 Calibri。我找到了创建 book.xlt 的过程，它成为打开**新**电子表格的默认模板，但是有没有办法创建一个在打开现有 CSV 文件时将被引用/应用的模板？

# jquery - 出现模态窗口底部

> ID：16035083
> 
> 赞同：0
> 
> 时间：2013-04-16T10:45:51.657
> 
> 标签：jquery, twitter-bootstrap, joomla2.5

我的应用程序中有这个模态窗口，这个工作正常

```
 <div id="modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

但是当模态出现时，它出现在我的窗口顶部，我想出现在底部

该应用程序是 joomla 3.0！我使用了[Meet Gavern的模板](http://www.gavick.com/joomla-templates/meet-gavern,93.html)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:04:26.867

我找到了解决方案

我在 Bootstrap 中修改了 de css

```
.modal.fade {

  top:-25%;
  -webkit-transition:opacity .3s linear, bottom .3s ease-out;
  -moz-transition:opacity .3s linear, bottom .3s ease-out;
  -ms-transition:opacity .3s linear, bottom .3s ease-out;
  -o-transition:opacity .3s linear, bottom .3s ease-out;
  transition:opacity .3s linear, bottom .3s ease-out;
} 
```

# html - 改变重叠画布的位置

> ID：16035087
> 
> 赞同：1
> 
> 时间：2013-04-16T10:45:56.537
> 
> 标签：html, canvas, onclick

我在每个上面分层了 4 个画布，但是我希望能够单击一个按钮，链接的画布将出现在顶部。

[http://jsfiddle.net/5g3Fe/](http://jsfiddle.net/5g3Fe/)显示了我目前所拥有的。我尝试将以下代码放入按钮单击功能中。但是这不起作用。

```
function canvasView1()
{
document.getElementById("canvas1").style.z-index="1";
document.getElementById("canvas2").style.z-index="0";
document.getElementById("canvas3").style.z-index="0";
document.getElementById("canvas4").style.z-index="0";

} 
```

任何人都可以建议一种能够通过单击按钮获得特定画布的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:14:00.850

由于某种原因，jsFiddle 忽略了您的 JavaScript[代码](https://stackoverflow.com/questions/5431351/simple-example-doesnt-work-on-jsfiddle)。您可以通过选择`No wrap - in <body>`左侧选项来解决此问题。

那么你的问题是在你使用的 javascript 中设置 z-index`.style.zIndex`而不是`.style.z-index`.

[在这里工作小提琴](http://jsfiddle.net/5g3Fe/4/)

或者[更简洁的代码版本在这里](http://jsfiddle.net/5g3Fe/3/)

# java - java.lang.IllegalStateException：文件已被移动 - 无法再次传输

> ID：16035103
> 
> 赞同：3
> 
> 时间：2013-04-16T10:46:51.100
> 
> 标签：java, spring-mvc, file-upload, spring-3, apache-commons-fileupload

我正在尝试上传文件并将其保存在服务器上。但我得到：

```
java.lang.IllegalStateException: File has already been moved - cannot be transferred again 
```

我正在使用 Commons FileUpload jar（CommonsMultipartFile）。我得到 IllegalStateException 的声明： `user.getFileData().transferTo(new File("/home/xavier/uploads/" + user.getFileData().getOriginalFilename()));`

这里`user`是豆子。它最初对我有用，但是当我通过从上传文件夹中删除文件再次进行测试时，它抛出了上述异常。

堆栈跟踪：

```
java.lang.IllegalStateException: File has already been moved - cannot be transferred again
    at org.springframework.web.multipart.commons.CommonsMultipartFile.transferTo(CommonsMultipartFile.java:126)
    at com.raistudies.controllers.RegistrationController.processForm(RegistrationController.java:113)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:69)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-21T01:43:16.520

您在问题中引用的异常指出：“文件已被移动 - 无法再次读取”。这是因为我们试图从多部分文件中多次读取输入流。

我也曾经遇到过这个问题，就我而言，首先我验证了文件的内容，然后我尝试使用 Spring MultiPart 中的“transferTo”方法保存它。当我尝试使用“transferTo”方法时会出现此异常。在这里，我要求输入流两次。

当文件太小时，我不会遇到这个问题。在“transferTo”方法中有一个“isAvailable”方法的内部调用。请遵循以下代码段：

```
protected boolean More ...isAvailable() {
        // If in memory, it's available.
    if (this.fileItem.isInMemory()) {
        return true;
    }
    // Check actual existence of temporary file.
    if (this.fileItem instanceof DiskFileItem) {
        return ((DiskFileItem) this.fileItem).getStoreLocation().exists();
    }
    // Check whether current file size is different than original one.
    return (this.fileItem.getSize() == this.size);
} 
```

链接： http: [//grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.2.1.RELEASE/org/springframework/web/multipart/commons/CommonsMultipartFile.java#CommonsMultipartFile。可用%28%29](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.2.1.RELEASE/org/springframework/web/multipart/commons/CommonsMultipartFile.java#CommonsMultipartFile.isAvailable%28%29)

观察：

如果它太小，spring 将它保存在内存中，当我们请求文件时，它会从内存中检索。我们可以多次请求它，因为文件在内存中。

如果它足够大，Spring 会将其保存为一个我们不知道位置的临时文件，但是在我们读取 inputstream 后，该文件可能会被 Spring 在内部删除。然后，当我们第二次询问时，该错误显示“无法再次读取”。

所以我的解决方案是首先我必须使用“transferTo”方法将其保存在服务器位置，并检索该本地文件以进行验证或任何其他第二次需要。

我认为在“multipartResolver”bean 中增加“maxUploadSize”是不好的，因为如果文件太大，它会消耗更多的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:56:03.820

该文件似乎不能作为临时文件使用（例如）。

只需看一下引发异常的`transferTo()`方法和调用方法的代码：`isAvailable`

[http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.2.1.RELEASE/org/springframework/web/multipart/commons/CommonsMultipartFile.java#CommonsMultipartFile.isAvailable% 28%29](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.2.1.RELEASE/org/springframework/web/multipart/commons/CommonsMultipartFile.java#CommonsMultipartFile.isAvailable%28%29)

在其他情况下，不会抛出此异常。

# xpages - 在 Xpage 中使用时，带有 @DocChildren 的 Notes 视图列返回奇怪的信息

> ID：16035107
> 
> 赞同：1
> 
> 时间：2013-04-16T10:46:59.413
> 
> 标签：xpages

以下适用于Domino 8.5.3 FP3 UP1，使用同版本的Designer进行设计。

我有这个 Notes 视图，其中有一列返回 DocChildren 的数量。列公式是这样的：

```
glViewTitle + " - " + @DocChildren("No comments"; "1 comment"; "% comments"); 
```

在 Notes 客户端中使用此视图会返回预期结果，如

![DocChildren 视图，Notes 客户端](https://i.stack.imgur.com/YLXkN.png)

使用标准 domino http 显示视图也可以正常工作：

![DocChildren 视图，Domino http](https://i.stack.imgur.com/fU9t6.png)

然而，在 Xpage 中使用视图会以一种非常意想不到的方式显示 @DocChildren 信息：

![DocChildren 视图，Xpages](https://i.stack.imgur.com/TA5bv.png)

我玩了一下，发现如果我在列公式中使用@DocDescendants，Xpage 代码会显示“D”而不是“C”。字母后面的数字显然是指@Function 使用的参数数量（0 .. 3）。

直到今天，我都相信 NotesXspViewEntry 会返回我们在相应的 Notes 视图中看到的所有内容，但显然情况并非如此。

顺便说一句：此行为不仅适用于视图面板等，还适用于使用 Xpages 风格的 @DbLookup 等返回的值。

这里有一些问题：

*   这可能是某种错误吗？还是我以错误的方式使用它？
*   *除了在没有*DocChildren 信息的情况下构建 Notes 视图然后使用之外，我还有哪些其他选择`NotesXspViewEntry.getChildCount()`？
*   还有其他东西可以在标准列公式中使用，但不能在 Xpage 上下文中使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:21:11.640

还有其他功能不起作用：

*   @DocDescendants
*   @DocLevel
*   @DocNumber
*   @DocParentNumber
*   @IsCategory
*   @IsExpandable

我认为如果在计算列公式期间该值未知，则每个受影响的@Formula 都充当*“占位符” 。*

# javascript - 在 Ant 中使用 JavaScript

> ID：16035108
> 
> 赞同：4
> 
> 时间：2013-04-16T10:47:02.493
> 
> 标签：javascript, ant

我`<script>`在 Ant 中使用标签时遇到问题，希望有人能提供帮助。我想在我的 Ant 中使用 JavaScript `build.xml`。类似于以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="java" default="main" basedir=".">
  <target name="main">
    <script language="javascript"> <![CDATA[
 println("hello, world")
    ]]> </script>
  </target>
</project>* 
```

不幸的是，这只显示和错误：

> build.xml:4：无法创建任务或类型类型：脚本。

我已经找到了所需的 jar 文件 ( `js.jar`) 以使其工作并将其移至`ANT_HOME/lib`，但我仍然不知道如何让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:57:47.233

除了`js.jar`，您还需要将`bsf.jar`和添加`commons-logging-*.jar`到 ANT_HOME/lib。在您的 Ant 发行版中，有一个名为`docs/manual/install.html`. 此 HTML 文件的**Library Dependencies部分记录了您可以下载这些文件的位置。**

`println`JavaScript 不支持。相反，请使用以下内容：

```
<project name="jsTest" default="main">
  <target name="main">
    <script language="javascript"> <![CDATA[
        var echo = jsTest.createTask("echo");
        echo.setMessage("hello, world");
        echo.perform();
    ]]> </script>
  </target>
</project> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-13T05:35:53.920

您还可以在需要时通过 Rhino(JRE pre 1.8) 或 Nashorn(JRE 1.8+) 在 Javascript 中实例化和使用 Java 类。

```
<script language="javascript">
  with(new JavaImporter(java.lang, java.io)){
    System.out.println("hello, world");// <--!!!
  }
</script> 
```

您可以创建和使用自己的 JavaScript 函数。

```
<script language="javascript">
  with(new JavaImporter(java.lang, java.io)){
    var fun = function(a,b){
      System.out.println(a+b);
    };
    fun(1,2);
  }
</script> 
```

打印上面的代码

```
3.0 
```

循环、递归和你梦寐以求的一切......除了强类型检查:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:27:26.990

除了两个语法错误 - 缺少';' 在 println.. 和关闭项目标记后尾随 '*' - 您应该将您的 ant 安装升级到版本 >= 1.7.x 以及 jdk >= 6 以便能够使用内置的 javascript 引擎。
当使用 jdk >=6 时使用 println 是没有问题的，见：

```
import javax.script.*;
public class ExecuteJS {
 public static void main(String[] args) throws Exception {
 ScriptEngineManager factory = new ScriptEngineManager();
 ScriptEngine engine = factory.getEngineByName("JavaScript");
 engine.eval("print('Line1')");
 engine.eval("println('Line2')");
 engine.eval("print('Line3')");
 engine.eval("println('Line4')");
 }
} 
```

输出 ：

```
Line1Line2
Line3Line4 
```

和

```
<project>
 <script language="javascript">
  println("hello, world");
 </script>
</project> 
```

但是用 Ant 1.9.0 / Win7（我的 linux 机器现在已经关闭）/jdk1.7.0_21 进行了进一步的测试，发现了一些奇怪的地方：

```
<project>
 <script language="javascript">
  println("hello, world");
 </script>
</project> 
```

作品

```
<project default="foo">
<target name="foo"> 
 <script language="javascript">
  println("hello, world");
 </script>
</target>
</project> 
```

也有效

```
<project name="whatever" default="foo">
<target name="foo"> 
 <script language="javascript">
  println("hello, world");
 </script>
</target>
</project> 
```

也有效，而

```
<project name="java" default="foo">
<target name="foo"> 
 <script language="javascript">
  println("hello, world");
 </script>
</target>
</project> 
```

结果是

```
BUILD FAILED
javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot read property "PrintWriter" from undefined (print#8) in print at line number 8 
```

奇怪的 ！？
似乎是一个错误，所以最后升级 ant >= 1.7.x 和 jdk >= 1.6 并且
不要在项目的 name 属性中使用 'java' :-)

# objective-c - 以编程方式在 UIView 中添加 UIScrollView

> ID：16035115
> 
> 赞同：8
> 
> 时间：2013-04-16T10:47:22.183
> 
> 标签：objective-c, uiview, uiscrollview

我有一个问题，如何在 UIView 中添加 UIScrollView，以便 UIScrollView 可以正常工作。

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, container.frame.size.width/2, container.frame.size.height/2)];
scroll.pagingEnabled = YES;
scroll.scrollEnabled = YES;
[scroll setBackgroundColor:[UIColor redColor]];
NSInteger numberOfViews = 3;
for (int i = 0; i < numberOfViews; i++)
{
    CGFloat xOrigin = i * container.frame.size.width/2;
    UIView *awesomeView = [[UIView alloc] initWithFrame:CGRectMake(xOrigin, 0, container.frame.size.width, container.frame.size.height)];
    awesomeView.backgroundColor = [UIColor colorWithRed:0.5/i green:0.5 blue:0.5 alpha:1];
    [scroll addSubview:awesomeView];
    [awesomeView release];
}
scroll.contentSize = CGSizeMake(container.frame.size.width/2 * numberOfViews, container.frame.size.height);
[container addSubview:scroll]; 
```

以上代码来自教程： http: [//idevzilla.com/2010/09/16/uiscrollview-a-really-simple-tutorial/](http://idevzilla.com/2010/09/16/uiscrollview-a-really-simple-tutorial/) 但它对我不起作用。

**编辑：**

如果您有一个问题，您已正确设置滚动视图但它不起作用，请确保您没有与另一个 UIView 覆盖您的滚动视图。那是我的问题。 **解决了！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-29T03:56:42.267

您可以使用以下代码在 yourView 上添加 UIScrollView ：-

步骤1：

```
Delegate "UIScrollViewDelegate" to your ViewController.h

for example:
  @interface yourViewController:UIViewController<UIScrollViewDelegate> 
```

第2步：

```
//create you UIScrollView
UIScrollView  *MyScrollVw= [[UIScrollView alloc]initWithFrame:CGRectMake(0 ,0 ,320 ,480)]; 
MyScrollVw.delegate= self;
[MyScrollVw setShowsHorizontalScrollIndicator:NO];
[MyScrollVw setShowsVerticalScrollIndicator:YES];
MyScrollVw.scrollEnabled= YES;
MyScrollVw.userInteractionEnabled= YES;
[yourView addSubview:MyScrollVw];
MyScrollVw.contentSize= CGSizeMake(320 ,1500);//(width,height) 
```

第 3 步：

你想在 ViewController.m 中实现 scrollView Delegates

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
   return imgView;
}
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{
   NSLog(@"Did end decelerating");
   //do your code here
}   
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
   NSLog(@"Did scroll");
   //do your code here
}
-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{
    NSLog(@"Did end dragging");
   //do your code here
}
-(void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView{
    NSLog(@"Did begin decelerating");
   //do your code here
}
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
   NSLog(@"Did begin dragging");
   //do your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:11:07.397

您的

```
scroll.contentSize = CGSizeMake(container.frame.size.width * numberOfViews, container.frame.size.height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:12:04.827

```
[container addSubview:scroll]; 
```

在你的 for 循环之前添加这一行。

# python - Python NameError：未定义名称“哈里斯”

> ID：16035116
> 
> 赞同：0
> 
> 时间：2013-04-16T10:47:23.637
> 
> 标签：python, nameerror

如果在某个地方有我的相同线程，我会提前道歉。
我是 Python 编程的新手，并试图从**Jan Erik Solem**编写的“**使用 Python 编程计算机视觉**”中计算一个示例。

 **这是示例的代码（保存在名为“harris.py”的文件中）：

[https://github.com/jesolem/PCV/blob/master/pcv_book/harris.py](https://github.com/jesolem/PCV/blob/master/pcv_book/harris.py)

（请注意，我的代码在第 70 行结束）

在对这段代码进行了很好的解释后，书中写道：“尝试运行以下命令：”

```
im = array(Image.open(’empire.jpg’).convert(’L’))
harrisim = harris.compute_harris_response(im)
filtered_coords = harris.get_harris_points(harrisim,6)
harris.plot_harris_points(im, filtered_coords) 
```

我遇到的问题有两个：

1.  我不确定在 harris.py 或单独的 python 文件中在哪里运行最后几行代码。
2.  在我运行它的任何文件中，都会显示以下错误：

    `harrisim = harris.compute_harris_response(im)`
    `NameError: name 'harris' is not defined`

我不明白为什么会显示这个错误，因为'harris' 应该调用 python 脚本 harris.py。还是我错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:49:07.690

它意味着进入一个单独的文件，但您需要先导入*模块*`harris`：

```
import harris 
```

在模块可用于您的代码之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:58:58.240

您的脚本中不存在 Harris 名称（在使用它之前的任何时候都没有初始化它，因此 Python 不知道 harris 是什么）。如果`import harris`不起作用，那是因为您没有以这种方式调用的任何模块。**

# ios - 在 UITextField 中键入时自动附加小数

> ID：16035124
> 
> 赞同：0
> 
> 时间：2013-04-16T10:47:49.573
> 
> 标签：ios

我有一个 UITextField，其中我将字符数限制为小数点前 4 个和小数点后 3 个。我已经通过

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range
     replacementString:(NSString *)string{
        if (textField == txt_weightKg)
        {
        NSString *newString = [textField.text stringByReplacingCharactersInRange:range 
        withString:string];

        NSString *expression = @"^([0-9]{1,4}+)?(\\.([0-9]{1,3})?)?$";

        NSRegularExpression *regex = [NSRegularExpression 
         regularExpressionWithPattern:expression

                                                                                                                   options:NSRegularExpressionCaseInsensitive
                                                                                 error:nil];
        NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                            options:0
                                                              range:NSMakeRange(0,
       [newString length])];
         if (numberOfMatches == 0)
            return NO;
        }

     return YES;
  } 
```

这只是为了保持验证，但现在我真正想要的是，一旦我开始在 UITextfield 中输入，就会自动在数字后面附加一个小数。第二个条件是，当我达到 4 位数字时，下一个数字应该在小数点后。例如：-

如果我输入 1 它应该看起来像 1\. ，对于 2 位 11\. 这必须持续到 4 位，然后一旦我输入第五位数字，它应该将小数点后的第 5 位数字作为 1111.1 继续到 3小数点后的位。

如果有人可以帮助我，那将不胜感激！如有困惑，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:16:40.877

我认为我通过以下代码实现了您的要求：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range     replacementString:(NSString *)string

{
  //create character set containing numbers only
  NSCharacterSet * set = [[NSCharacterSet    characterSetWithCharactersInString:@"0123456789"] invertedSet];

      if (textField.text.length >= 8  && range.length == 0)
      {
         return NO;
      }
      else
      {

         if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
              return NO;
         }
         else
         {
           int length = [textField.text length];
           //append a decimal after 4 digits
           if([textField.text length] ==4 && string.length != 0)
           {
              textField.text = [NSString stringWithFormat:@"%@.",textField.text];
           }
           return YES;
        }
     }

} 
```

请确认您对此的回应。

# pthreads - 一个线程对另一个线程（消费者/生产者）表现出兴趣

> ID：16035127
> 
> 赞同：1
> 
> 时间：2013-04-16T10:47:55.497
> 
> 标签：pthreads, mutex, semaphore, condition-variable

我希望有可能让线程（消费者）在另一个线程（生产者）制作某些东西时表达兴趣。但并非总是如此。

基本上我想做一个一次性的消费者。理想情况下，生产者会愉快地处理其业务，直到一个（或多个）消费者表示他们想要某些东西，在这种情况下，生产者会将一些数据推送到变量中并表示它已经这样做了。消费者将等到变量被填充。

还必须是这样，一次性消费者可以决定它等待的时间太长并放弃等待（a la `pthread_cond_timedwait`）

我一直在阅读许多关于同步线程的不同方法的文章和 SO 问题。目前我倾向于使用条件变量方法。

我想知道这是否是一个好方法（作为线程编程的新手，我可能有很多错误），或者在这种情况下（ab）使用信号量是否会更好？还是完全不同的东西？如果可用，只是对指针变量的原子分配？我目前看不到这些如何安全工作，可能是因为我试图保持安全，这个应用程序应该运行几个月，而不会锁定。我可以不使用生产者中的互斥锁吗？即：只是发出一个条件变量的信号？

我当前的代码如下所示：

```
consumer {
   pthread_mutex_lock(m);

   pred = true; /* signal interest */

   while (pred) {
       /* wait a bit and hopefully get an answer before timing out */
       pthread_cond_timedwait(c, m, t);

       /* it is possible that the producer never produces anything, in which
          case the pred will stay true, we must "designal" interest here,
          unfortunately the also means that a spurious wake could make us miss
          a good answer, no? How to combat this? */
       pred = false;
   }

   /* if we got here that means either an answer is available or we timed out */
   //... (do things with answer if not timed out, otherwise assign default answer)

   pthread_mutex_unlock(m);
}

/* this thread is always producing, but it doesn't always have listeners */
producer {
   pthread_mutex_lock(m);

   /* if we have a listener */
   if (pred) {
      buffer = "work!";

      pred = false;

      pthread_cond_signal(c);
   }

   pthread_mutex_unlock(m);
} 
```

注意：我使用的是现代 linux，如有必要，可以使用特定于平台的功能 注意 2：我使用了看似全局的变量 m、c 和 t。但这些对于每个消费者来说都是不同的。

## 高层回顾

**我希望一个线程能够注册一个事件，等待它指定的时间然后继续。**理想情况下，应该可以同时注册多个线程，并且所有线程都应该获得相同的事件（在时间跨度内出现的所有事件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:35:39.403

你想要的是类似于`std::future`c++ 中的 a （[doc](http://en.cppreference.com/w/cpp/thread/future)）。消费者请求生产者使用特定功能执行的任务。该函数创建一个名为*future*（或*promise*）的结构，其中包含一个互斥锁、一个与任务关联的条件变量以及一个用于结果的 void 指针，并将其返回给调用者。它还将该结构、任务 ID 和参数（如果有）放入由生产者处理的工作队列中。

```
struct future_s {
    pthread_mutex_t m;
    pthread_cond_t c;
    int flag;
    void *result;
};

// basic task outline
struct task_s {
    struct future_s result;
    int taskid;
};

// specific "mytask" task
struct mytask_s {
    struct future_s result;
    int taskid;
    int p1;
    float p2;
};

future_s *do_mytask(int p1, float p2){
     // allocate task data
     struct  mytask_s * t = alloc_task(sizeof(struct mytask_s));
     t->p1 = p1;
     t->p2 = p2;
     t->taskid = MYTASK_ID;
     task_queue_add(t);
    return (struct future_s *)t;
} 
```

然后生产者将任务拉出队列，处理它，一旦终止，将结果放入未来并触发变量。

消费者可能会等待未来或做其他事情。

对于可取消的期货，在结构中包含一个标志以指示任务已取消。那么未来是：

*   已交付，消费者是所有者，必须解除分配
*   取消，生产者仍然是所有者并处置它。

因此，生产者必须在触发条件变量之前检查未来是否被取消。

对于“共享”的未来，旗帜变成了许多订阅者。如果数字大于零，则必须交付订单。拥有结果的消费者由所有消费者决定（先到先得？结果是否传递给所有消费者？）。

对未来结构的任何访问都必须是互斥的（这与条件变量配合得很好）。

关于队列，它们可以使用链表或数组来实现（对于容量有限的版本）。由于创建*期货*的函数可能会被同时调用，因此必须使用锁来保护它们，这通常使用互斥锁来实现。

# eclipse - 如何在 Eclipse EE 中创建新的 Java 项目？

> ID：16035131
> 
> 赞同：0
> 
> 时间：2013-04-16T10:48:07.293
> 
> 标签：eclipse

我使用 Eclipse IDE for Java 开发人员来制作 Java 项目。我想在 Eclipse Java EE 上尝试同样的事情。但是，它没有任何这样的选项。看起来它只允许你创建像 servlet、JPA、EJB 等 EE 项目。

是否可以在 Eclipse EE 中创建标准 Java 项目？

下面的答案有效，我看到了屏幕 -

![在此处输入图像描述](https://i.stack.imgur.com/IyhUi.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:01:11.763

你试过点击`File -> New -> Other`吗？菜单是上下文相关的，当你切换*视角*时它会改变。
“其他”将打开“新建”向导，在这种情况下，您可以`Java -> Java Project`从列表中进行选择。

您也可以从列表中单击`Windows -> Perspective -> Open perspective -> Other`（或`Java`）切换回默认的 Java 透视图。这样，您的 IDE 将在“Java 开发人员”版本中看起来像。

编辑：如果您之前没有注意到 Eclipse 的这些 UI 技巧，您可能需要阅读本[教程部分的 Eclipse 透视图](http://agile.csc.ncsu.edu/SEMaterials/tutorials/eclipse/eclipse_tutorial_3.5.html#section5_0)。

# java - 在 ubuntu 中创建跨平台应用程序

> ID：16035136
> 
> 赞同：2
> 
> 时间：2013-04-16T10:48:29.353
> 
> 标签：java, .net, cross-platform, smartphone

我在我的电脑上使用 Ubuntu，我不想切换到另一个操作系统。

我正在寻找一种软件，它可以让我用一种编程语言编写跨平台应用程序（用于智能手机）。

我更喜欢 .NET 语言。是的，我看过 Mono，但他们只在 Windows 和 Mac 中提供他们的软件。

是否有软件可以让我构建跨平台应用程序？（我不喜欢 Java，但 JavaScript 是我可以处理的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:59:54.550

MONO 不仅适用于 Mac 和 Windows。它在 Ubuntu 中运行，可以从[这里](http://monodevelop.com/Developers/Articles/Building_MonoDevelop_on_Ubuntu)获得说明。

遗憾的是，没有 xcode 就无法构建 iOS 应用程序，但编码可以很容易地在 Ubuntu 和 Mac 之间重用。[Xamarin](http://xamarin.com/)是一种结账软件，它允许您使用 c# 开发 iPhone 和 Android 应用程序。我在 .Net 中编码已经有一段时间了，我不得不说，当我不得不做一个 unix 类项目时，MONO 和 Xamarin 救了我的命

注意：我知道您的问题明确表示您不喜欢像在 MONO 中那样切换平台的想法，但我对此进行了大量研究，并确定它是我的最佳选择，如果您愿意使用 Mac 或 PC，我认为它对您有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:05:54.840

> 我正在寻找一种软件，它可以让我用一种编程语言编写跨平台应用程序（用于智能手机）。

如果您正在寻找一些用于开发智能手机跨平台应用程序的工具，我建议您使用[PhoneGap](http://phonegap.com/)

> 是否有软件可以让我构建跨平台应用程序？（我不喜欢 Java，但 JavaScript 是我可以处理的）

您正在使用 ubuntu 并想使用 .Net，不，这不是一个方便的解决方案。如果您想要一种独立于平台的语言，我绝对建议您使用 JAVA ;)

请注意：Java**不是**JavaScript，它们彼此没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T19:40:26.420

我有同样的问题。我确实遇到了[Appcelerator](https://www.appcelerator.com/)。似乎他们以前支持 Linux，您可以编写的单一语言是 Javascript。

它不是开源的。您必须注册一个帐户才能下载和安装它，但有针对独立开发者的免费版本。我宁愿使用[Kivy](https://kivy.org/#home)在 Python 中开发；）

祝你好运。

# javascript - JavaScript 到 jQuery 语法构建自定义 CSS 水平菜单

> ID：16035139
> 
> 赞同：0
> 
> 时间：2013-04-16T10:48:51.573
> 
> 标签：javascript, jquery

这是一个使用传统 JavaScript 的水平菜单。

```
function createcssmenu()
{
    var ultags = document.getElementById("navmenu").getElementsByTagName("ul");
    for (var t = 0; t < ultags.length; t++)
    {
        ultags[t].style.top = ultags[t].parentNode.offsetHeight -1 + "px";
        ultags[t].parentNode.onmouseover = function()
        {
            this.style.zIndex = 100;
            this.getElementsByTagName("ul")[0].style.visibility = "visible";
            this.getElementsByTagName("ul")[0].style.zIndex = 0;
        }
        ultags[t].parentNode.onmouseout = function()
        {
            this.style.zIndex = 0;
            this.getElementsByTagName("ul")[0].style.visibility = "hidden";
            this.getElementsByTagName("ul")[0].style.zIndex = 100;
        }
    }
}

if (window.addEventListener)
    window.addEventListener("load", createcssmenu, false);
else if (window.attachEvent)
    window.attachEvent("onload", createcssmenu); 
```

我需要使用 jQuery 语法重写它。

这就是我来到的地方：

```
$(document).ready(function ()
{
    $('#navmenu ul').css('top', $('#navmenu ul').parent().height() - 1 + "px");

    $('#navmenu ul').parent().bind('mouseover', function ()
    {
        $(this).css('z-index', 100);
        $('#navmenu ul').css({ 'visibility': 'visible', 'z-index': 0 });
    });

    $('#navmenu ul').parent().bind('mouseout', function ()
    {
        $(this).css('z-index', 0);
        $('#navmenu ul').css({ 'visibility': 'hidden', 'z-index': 100 });
    });
}); 
```

它不正确。

我还是有`this.getElementsByTagName("ul")[0]`线路问题。

看看 JSfiddle [http://jsfiddle.net/sublay/HCajr/](http://jsfiddle.net/sublay/HCajr/)

它应该可以正常工作。

谢谢！

相关问题[JavaScript to jQuery syntax Still need help on Converting](https://stackoverflow.com/questions/16025815/javascript-to-jquery-syntax-still-need-help-on-converting)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:00:54.973

而不是试图重写上面的javascript，你总是可以简化它。

看看这个小提琴 - **[http://jsfiddle.net/DeHQ5/](http://jsfiddle.net/DeHQ5/)**

```
$(document).ready(function () {
    $('#navmenu ul').css('top', $('#navmenu ul').parent().height() - 1 + "px");

    $('#navmenu > li').bind('mouseover', function () {
        $(this).children('ul').css({
            'visibility': 'visible',
            'z-index': 0
        });
    });

    $('#navmenu > li').bind('mouseout', function () {
        $(this).children('ul').css({
            'visibility': 'hidden',
            'z-index': 100
        });
    });
}); 
```

主要变化是初始兄弟选择器`#navmenu > li`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:01:57.440

我想这就是你想要[的 FIDDLE](http://jsfiddle.net/rajesh007/HCajr/17/)

```
$(document).ready(function ()
{
    $('#navmenu ul').css('top', $('#navmenu ul').parent().height() - 1 + "px");
    $('#navmenu ul').each(function(){
        $(this).css('top', $(this).parent().height() - 1 + "px")
    });

    $('#navmenu ul').parent().bind('mouseover', function ()
    {
        $(this).css('z-index', 100);
        $('ul',this).css({ 'visibility': 'visible', 'z-index': 0 });
    });

    $('#navmenu ul').parent().bind('mouseout', function ()
    {
        $(this).css('z-index', 0);
         $('ul',this).css({ 'visibility': 'hidden', 'z-index': 100 });
    });
}); 
```

# mysql - MySQL 查询耗时太长——索引应该是什么？

> ID：16035141
> 
> 赞同：3
> 
> 时间：2013-04-16T10:48:59.253
> 
> 标签：mysql, sql, indexing

这是我的查询：

```
CREATE TEMPORARY TABLE temptbl (
  pibn INT UNSIGNED NOT NULL, page SMALLINT UNSIGNED NOT NULL)
  ENGINE=MEMORY;
INSERT INTO temptbl (
  SELECT pibn,page FROM mytable
  WHERE word1=429907 AND word2=0);
ALTER TABLE temptbl ADD INDEX (pibn,page);
SELECT word1,COUNT(*) AS aaa
  FROM mytable a
  INNER JOIN temptbl b
  ON a.pibn=b.pibn AND a.page=b.page
  WHERE word2=0
  GROUP BY word1 ORDER BY aaa DESC LIMIT 10;
DROP TABLE temptbl; 
```

问题是`SELECT word1,COUNT(*) AS aaa`，特别是计数。该选择语句需要 16 秒。

解释 说：

```
+----+-------------+-------+------+---------------------------------+-------------+---------+-------------------------------------------------------------+-------+---------------------------------+
| id | select_type | table | type | possible_keys                   | key         | key_len | ref                                                         | rows  | Extra                           |
+----+-------------+-------+------+---------------------------------+-------------+---------+-------------------------------------------------------------+-------+---------------------------------+
|  1 | SIMPLE      | b     | ALL  | pibn                            | NULL        | NULL    | NULL                                                        | 26778 | Using temporary; Using filesort |
|  1 | SIMPLE      | a     | ref  | w2pibnpage1,word21pibn,pibnpage | w2pibnpage1 | 9       | const,db.b.pibn,db.b.page                                   |     4 | Using index                     |
+----+-------------+-------+------+---------------------------------+-------------+---------+-------------------------------------------------------------+-------+---------------------------------+ 
```

使用的索引 (w2pibnpage1) 为：

```
word2,pibn,page,word1,id 
```

我已经为此苦苦挣扎了好几天，为索引尝试了不同的列组合（这很烦人，因为重建需要一个小时 - 数百万行）。

我的索引应该是什么，或者我应该怎么做才能让这个查询在几分之一秒内运行（应该如此）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:05:02.050

这是一个建议。

大概临时表很小。您可以删除该表上的索引，因为那里可以进行全表扫描。事实上，这就是你想要的。

然后，您希望在大表上使用索引。首先索引需要匹配连接条件，然后匹配`where`条件，最后匹配`group by`条件。所以，建议是：

```
mytable(pibn, page, word2, word1, aaa) 
```

我正在`order by`列中，因此它不必从原始数据中获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:24:12.760

如果你的 temptbl 很小，你想首先限制更大的表（mytable），然后将它（最终通过索引）加入你的 temptbl。

现在，MySQL 认为最好使用更大表的索引来连接。

你可以通过直接加入来解决这个问题：

```
 SELECT word1,COUNT(*) AS aaa
    FROM mytable a
    STRAIGHT_JOIN temptbl b
      ON a.pibn=b.pibn AND a.page=b.page
  WHERE word2=0
  GROUP BY word1 
  ORDER BY aaa DESC LIMIT 10; 
```

这应该使用 mytable 中的索引作为 where 子句，并通过 temptbl 中的索引将 mytable 连接到 temptbl。

如果 MySQL 还想与众不同，可以使用 FORCE INDEX 让它使用索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:48:56.357

无论您做什么，如果不更改架构，您的数据量都不会快速工作。

如果我理解正确，您正在寻找`429907`在同一页面上出现的热门词。

您现在的模型需要在每次运行查询时重新计算所有这些单词。

为了加快速度，您需要创建一个额外的统计表：

```
CREATE TABLE word_pairs
        (
        word1_1 INT NOT NULL,
        word1_2 INT NOT NULL,
        cnt BIGINT NOT NULL,
        PRIMARY KEY (word1_1, word1_2),
        INDEX (word1_1, cnt),
        INDEX (word1_2, cnt)
        ) 
```

并在每次将记录插入大表时更新它（增加`cnt`新插入的单词和它在同一页面上的所有单词）。

这对于单个服务器来说可能太慢了，因为这样的更新需要一些时间，所以你还需要跨多个服务器分片该表。

如果你有这样一个表，你可以运行：

```
SELECT  *
FROM    word_pairs
WHERE   word1_1 = 429907
ORDER BY
        cnt DESC
LIMIT   10 
```

这将是即时的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:53:27.500

我想出了这个：

```
CREATE TEMPORARY TABLE temp1 (
  pibn INT UNSIGNED NOT NULL, page SMALLINT UNSIGNED NOT NULL)
  ENGINE=MEMORY;
INSERT INTO temp1 (
  SELECT pibn,page FROM mytable
  WHERE word1=429907 AND word2=0);
CREATE TEMPORARY TABLE temp2 (
  word1 MEDIUMINT UNSIGNED NOT NULL)
  ENGINE=MEMORY;
INSERT INTO temp2 (
SELECT a.word1
  FROM mytable a, temp1 b
  WHERE a.word2=0 AND a.pibn=b.pibn AND a.page=b.page);
DROP TABLE temp1;
CREATE INDEX index1 ON temp2 (word1) USING BTREE;
CREATE TEMPORARY TABLE temp3 (
  word1 MEDIUMINT UNSIGNED NOT NULL, num INT UNSIGNED NOT NULL)
  ENGINE=MEMORY;
INSERT INTO temp3 (SELECT word1,COUNT(*) AS aaa FROM temp2 USE INDEX (index1) GROUP BY word1);
DROP TABLE temp2;
CREATE INDEX index1 ON temp3 (num) USING BTREE;
SELECT word1,num FROM temp3 USE INDEX (index1) ORDER BY num DESC LIMIT 10;
DROP TABLE temp3; 
```

需要 5 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:26:56.940

查询需要很长时间，但昂贵的部分似乎正在访问“mytable”（你没有提供这个的结构）但是优化器似乎认为它只需要使用索引从中获取 4 行 - 这应该非常快。即数据似乎非常倾斜 - 最后一个查询检查了多少行（计数）？

如果不了解数据的确切分布，就很难确定——当然，您可能需要提示查询以使其有效工作。设计索引的问题在于它们应该使*所有*查询更快——或者至少给出一个合理的权衡。

查看您提供的查询中的谓词...

```
WHERE word1=429907 AND word2=0 
```

最好由 word1,word2,.... 或 word2,word1,..... 上的索引提供服务

```
ON a.pibn=b.pibn AND a.page=b.page
WHERE a.word2=0 
```

最好通过 mytable 上的索引来提供最佳服务，其中 word2+pibn+page 在前导列中。

mytable.word1 和 mytable.word2 有多少不同的值？如果 word2 的不同值数量较少（少于 20 个左右），那么它不会为索引增加太多选择性，可以省略。

word2,pibn,page,word1 上的索引为您提供第二个查询的覆盖索引。

# javascript - IE 的数组 indexOf 和过滤器实现给出其他问题

> ID：16035143
> 
> 赞同：1
> 
> 时间：2013-04-16T10:49:00.190
> 
> 标签：javascript, jquery

我正在使用以下实现

```
if (!('forEach' in Array.prototype)) {
            Array.prototype.forEach= function(action, that /*opt*/) {
                for (var i= 0, n= this.length; i<n; i++)
                    if (i in this)
                        action.call(that, this[i], i, this);
            };
        }

        if (!('filter' in Array.prototype)) {
            Array.prototype.filter= function(filter, that /*opt*/) {
                var other= [], v;
                for (var i=0, n= this.length; i<n; i++)
                    if (i in this && filter.call(that, v= this[i], i, this))
                        other.push(v);
                return other;
            };

        } 
```

但是当我为 ex 使用 for 循环时，它的行为有点奇怪

```
var conditionJSONObject=new Array();
var conditionCombiner=new Array();
var combiner ;
combiner = jQuery.trim(jQuery(conditionTable.rows[i+1].cells[4].children[0]).select().val());
for(var index in conditionJSONObject)
{               
    if(conditionCombiner[index].combiner.toUpperCase() == 'AND')
    {/*Some code of mine*/}
} 
```

这段代码给出了错误，虽然最初它工作正常，同样的代码在 FF 上也能正常工作。当我检查索引值是“ForEach”时......是因为使用原型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:58:47.707

`Array.prototype.forEach = ...`确实`forEach`为所有数组添加了一个属性。`for(.. in ..)`您可以在这样的循环中避免它：

```
for(var index in array) {
    if(!array.hasOwnProperty(index)) continue;
    ...//loop body
} 
```

或者你也可以像这样缩进使用它：

```
array.forEach(function(value,index) {
    ...//loop body
}); 
```

# wordpress - WordPress | 上传文件并调整它们的大小

> ID：16035147
> 
> 赞同：2
> 
> 时间：2013-04-16T10:49:09.110
> 
> 标签：wordpress, wordpress-theming

我开发了一个脚本，允许注册的前端用户创建自己的帖子，每个帖子都有一张特色图片。

虽然我已经完成了整个过程，但现在的问题是图像大小调整。

处理图像的脚本如下：

```
if(isset($files['rcp_user_logo']) && $files['rcp_user_logo']['error'] == 0)
{
    $uploadDir      =   wp_upload_dir();
    $updoadBase     =   $uploadDir['basedir'];
    $uploadURL      =   $uploadDir['baseurl'];
    $uploadLogos    =   $updoadBase . DIRECTORY_SEPARATOR . 'LfirmLogos' . DIRECTORY_SEPARATOR;
    $uploadLogosURL =   $uploadURL . '/LfirmLogos/';
    $dir_exists     =   false;                          //  Flag for directory existance

    if(($dir_exists = is_dir($uploadLogos)) == false)   //  If the upload dir is not exists
    {
        $dir_exists =   mkdir($uploadLogos, 0755);      //  Try to create the dir with 0755 permissions
                                                        //  If the dir will be successfully created
                                                        //  the $dir_exists will be set to true
                                                        //  otherwise will be set to false
    }
    else
    {
        $dir_exists = true;                             //  If upload dir exists then set
                                                        //  the $dir_exists to true
    }

    if($dir_exists  == true)
    {
        //  Set the tmpFile to the temporary uploaded file path
        $tmpFile    =   $files['rcp_user_logo']['tmp_name'];
        //  Set the new file to upload directory and name the file after the custom post ID
        $newFile    =   $uploadLogos . $new_id . '-' . $files['rcp_user_logo']['name'];
        //  Set the new file URL to updaload directory URL and name the file after the custom post ID
        $newFileURL =   $uploadLogosURL . $new_id . '-' . $files['rcp_user_logo']['name'];

        if(move_uploaded_file($tmpFile, $newFile))      //  If file has been
        {
            $wp_filetype    =   wp_check_filetype($files['rcp_user_logo']['name']);

            $attachment = array(
                'guid'           => $newFileURL,
                'post_mime_type' => $wp_filetype['type'],
                'post_title'     => sanitize_title($files['rcp_user_logo']['name']),
                'post_status'    => 'inherit'
            );

            $attachment_id = wp_insert_attachment($attachment, $newFileURL, $new_id);

            if($attachment_id != 0 )
            {
                if(!function_exists('wp_generate_attachment_metadata'))
                {
                    include( ABSPATH . 'wp-admin/includes/image.php' );
                }

                $attachment_data    =   wp_generate_attachment_metadata($attachment_id, $newFileURL);
                $result = wp_update_attachment_metadata($attachment_id, $attachment_data);
                $result = update_post_meta($new_id,   '_thumbnail_id',    $attachment_id);
            }
        }
    }
} 
```

**注意：**为了让我的徽标与默认的 WordPress 图像分开，我在 /wp-content/uploads/ 下创建了自己的目录，我不知道这是否是阻止图像调整大小的原因。

**注意：** $new_id 是以编程方式在预览代码中创建的帖子的 ID。

**注意：**我也使用了插件“AJAX Thumbnail Rebuild”，但对图像仍然没有影响。它也无法调整图像大小。

**注意：**管理区域上传的图像已正确调整大小。

关于如何解决这个问题有什么想法吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:59:25.113

我建议你使用 php 的 GD 图像，因为 wordpress 也使用它：http: [//php.net/manual/en/function.imagecopyresized.php](http://php.net/manual/en/function.imagecopyresized.php)

这是取自该页面的代码片段，它将图像大小调整为百分比，在示例中为 0.5：

```
<?php
// File and new size
$filename = 'test.jpg';
$percent = 0.5;

// Content type
header('Content-Type: image/jpeg');

// Get new sizes
list($width, $height) = getimagesize($filename);
$newwidth = $width * $percent;
$newheight = $height * $percent;

// Load
$thumb = imagecreatetruecolor($newwidth, $newheight);
$source = imagecreatefromjpeg($filename);

// Resize
imagecopyresized($thumb, $source, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

// Output
imagejpeg($thumb);
?> 
```

**注意：** AJAX Thumbnail Rebuild 它是一个从 wordpress 媒体管理器重建缩略图的插件。

# c# - 如何处理windows窗体上动态添加复选框的事件

> ID：16035148
> 
> 赞同：1
> 
> 时间：2013-04-16T10:49:09.500
> 
> 标签：c#, winforms

我能够在 Windows 窗体上动态添加复选框并将数据值添加到其文本属性。单击任何复选框时，我已经运行了一个程序，该程序将使某些其他复选框被禁用。

我无法找到它的事件处理程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:07:58.863

你试过这个

```
 CheckBox check = new CheckBox();
        check.Checked = true;
        check.AccessibleName = checkName;
        check.Location = new System.Drawing.Point(340, 40);
        check.CheckedChanged +=new EventHandler(check_CheckedChanged);

        this.Controls.Add(check); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:05:32.330

```
 private void custom_event_handler(object sender, EventArgs e)
  {
       ....
  } 
```

然后像这样添加复选框：

```
 CheckBox cb = new CheckBox();
 cb.CheckedChanged += new EventHandler(custom_event_hahndler); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:44:16.630

如果动态添加的复选框名称为c，则答案如下：

```
c.CheckedChanged += c_CheckedChanged; 
```

和 c_CheckedChanged 如下：

```
 private void c_CheckedChanged(object sender, EventArgs e)
    {
       if (((CheckBox)sender).Checked)
       {
          ((CheckBox)(this.Controls.Find("c1", false))[0]).Enabled = false;
       }
    } 
```

其中 c1 是您要禁用的复选框的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:50:50.273

以编程方式创建复选框时添加事件处理程序。它的处理程序你可以做你的代码逻辑。

```
CheckBox dynamicCheckBox = new CheckBox();
dynamicCheckBox.CheckedChanged +=new EventHandler(dynamicCheckBox_CheckedChanged);

private void dynamicCheckBox_CheckedChanged(object sender, EventArgs e)
{
    // Your code
} 
```

# json - 格式错误的 JSON 字符串，编码问题？

> ID：16035153
> 
> 赞同：1
> 
> 时间：2013-04-16T10:49:26.160
> 
> 标签：json, perl

我正在请求 Web 服务并获取 JSON 数据，如下所示。但是，我不断收到以下错误：

> 格式错误的 JSON 字符串，既不是数组、对象、数字、字符串也不是原子，在 /usr/share/perl5/JSON/ 的字符偏移量 0 处（在 "\x{feff}\x{feff}{"ur..." 之前）任何.pm

http请求：

```
Date: Tue, 16 Apr 2013 10:41:03 GMT
Server: nginx/0.7.67
Content-Type: application/json; charset=utf-8
Client-Date: Tue, 16 Apr 2013 10:41:03 GMT
Client-Peer: 127.0.1.1:80
Client-Response-Num: 1
Client-Transfer-Encoding: chunked 
```

json数据：

`{"url":"http:\/\/example.com\/service\/rest.htm?req_data=<auth_req><request_token>20130416f186a9c0480e2501e73d19dbcd79d354<\/request_token> <\/auth_req>&user=208860&service=auth.execute&sid=0001&format=xml&v=2.0& sign=pn9xjQjzTgQuAMarLDtiZCMaGZm4bSo8aUTGtkSt1GrxPGtK29oIL1DgHveVMwf2n7rxLHzyWrNd%2BYU6%2BxZCzs56JkMtxQMPxEJ%2Bu9Eqk5SRL6EAjWMeKheix5frPyHi0hQ4nnbiVm%2Bx3bF0KFq3cORvVCeq8wBoZU1HQXD%2BuuY%3D"}`

我怀疑某种编码问题，因为 JSON 字符串在 jslint JSON 验证器中验证得很好。但我不知道还要寻找什么。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:52:41.153

\x{feff} 是一个 BOM（字节顺序标记）。我不确定它是否允许在 JSON 的开头，但绝对不应该重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:03:56.900

感谢 choroba 提示我寻找 BOM。Greped 3rd 方库文件生成`url`并肯定在其中找到了 BOM。

1.  `grep -rl $'\xEF\xBB\xBF' .` # 有物料清单吗？
2.  `perl -pi -nle 's/^\xEF\xBB\xBF//' *.lib` # 删除它们！

干杯。

# android - 将 SSL 添加到 NFC 连接

> ID：16035158
> 
> 赞同：1
> 
> 时间：2013-04-16T10:49:32.013
> 
> 标签：android, ssl, nfc

我正在编写一个使用 NFC 标签来传输一些信息的 Android 应用程序。目前我有读取 NFC 标签内容的读取功能：

```
protected NdefMessage[] getNdefMessages(Intent intent) {
    // Parse the intent
    NdefMessage[] msgs = null;
    String action = intent.getAction();
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)
        || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {
        Parcelable[] rawMsgs = 
            intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if (rawMsgs != null) {
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        } else {
            // Unknown tag type
            byte[] empty = new byte[] {};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[] {
                record
            });
            msgs = new NdefMessage[] {
                msg
            };
        }
    } else {
        finish();
    }
    return msgs;
} 
```

现在，我想为通信添加安全性，即 SSL。但是，我真的不知道我必须采取哪些步骤才能实现此功能。是否有一些 NFCSecurity 类或类似的东西，可以为您完成所有工作？

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:50:35.150

Android NFC API 使您可以访问（低级）标签通信和标签上（或通过 Android Beam 传输）的（高级）NDEF 消息存储。增加安全性，同时仍然保留自动读取和写入 NDEF 消息的好处，例如，可以通过加密`NdefRecord`您使用的有效负载来完成。

SSL/TLS 适用于连接级别。据我所知，没有支持这种东西的标签。您可以考虑将 SSL/TLS 添加到 NFC 对等通信，但目前不存在。这将涉及修改 Android NFC 堆栈并构建自定义 Android 系统映像（如果可能的话）。它不是应用程序可以添加到 Android Beam 之上的东西。

# java - 如何在原型之间共享实例（Spring LoC）

> ID：16035161
> 
> 赞同：4
> 
> 时间：2013-04-16T10:49:41.317
> 
> 标签：java, spring, spring-ioc

要在其中运行作业，`TaskExecutor`我需要实例化实现`Runnable`接口的新作业。为了解决这个问题，我将[创建一个名为 Job "on Demand" 的新 Spring Prototype Bean](http://java.dzone.com/articles/creating-new-spring-beans)。

但是在我的应用程序中 a`Job`有两个字段`LocationChanger`和`QueryTyper`. 这两个应该共享由 a 创建**的同一个`WebDriver`实例**`WebDriverFactory`。

现在的问题是如何用 Spring 设计这个？

![架构的 UML](https://i.stack.imgur.com/31xCP.png)

这是相关代码：

```
@Component
@Scope("prototype")
public class Job implements Runnable {

    @Autowired
    LocationChanger locationChanger;

    @Autowired
    QueryTyper queryTyper;

    @Override
    public void run() {
        // at this point the locationChanger and
        // queryTyper should share the same instance
    }

}

@Component
@Scope("prototype")
public class LocationChanger {

    @Autowired
    @Qualifier(...) // For every new Job Created, the same WebDriver instance should be injected.
    WebDriver webDriver
}

@Component
@Scope("prototype")
public class QueryTyper {

    @Autowired
    @Qualifier(...) // For every new Job Created, the same WebDriver instance should be injected.
    WebDriver webDriver
}

public class WebDriverFactoryBean implements FactoryBean<WebDriver> {
    @Override
    public WebDriver getObject() throws Exception {
        return // createdAndPrepare...
    }

    @Override
    public boolean isSingleton() {
        return false;
    }
} 
```

非常感谢！

**更新 1：** 一种可能的解决方案可能是**仅**`WebDriver`在 Job中自动装配，然后将此 WebDriver 注入到and中。但后来我用手接线。**`@PostConstruct``LocationChanger``QueryTyper`**

 **```
@Component
@Scope("prototype")
public class Job implements Runnable {

    @Autowired
    LocationChanger locationChanger;

    @Autowired
    QueryTyper queryTyper;

    @Autowired
    WebDriver webDriver;

    @PostConstruct
    public void autowireByHand() {
        locationChanger.setWebDriver(this.webDriver);
        queryTyper.setWebDriver(this.webDriver);
    }
}

// + remove all @Autowired WebDriver's from LocationChanger and QueryTyper 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:59:20.483

如果我理解您的要求，您需要`WebDriver`在 a`Job`和`LocationChanger`. 所以它不是`prototype`范围，也不是`singleton`范围。为了解决这个问题，我认为您要么必须按照您的建议手动完成，要么您可以尝试实现自己的范围，如[Spring 参考文档中所述](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-scopes)

**编辑**

顺便说一句，我认为您的“手动接线”解决方案看起来并不那么糟糕。**

# layout - 自定义组件中的 joomla 布局处理

> ID：16035163
> 
> 赞同：1
> 
> 时间：2013-04-16T10:49:50.830
> 
> 标签：layout, joomla, components

如果被调用，我在哪里可以在以下函数中设置所需的布局

```
$input = JFactory::getApplication()->input;
$input->set('view', $input->getCmd('view', 'Myview')); 
```

我想被重定向到例如`/views/tmpl/edit.php`

**找到了**

需要通过url结构声明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:11:19.113

您可以`&layout=edit`在 URL 中使用，也可以在视图中使用`$this->setLayout('edit');`

# iphone - iOS 是否支持蓝牙 SPP？

> ID：16035166
> 
> 赞同：1
> 
> 时间：2013-04-16T10:49:57.710
> 
> 标签：iphone, ios, ios5, ios4

我想开发一个 ios 应用程序，通过蓝牙 SPP 与另一个支持蓝牙的设备进行通信。

iOS 是否支持 SPP？

我检查了 iOS 支持的配置文件，但看不到任何关于 SPP 的信息。

[http://support.apple.com/kb/ht3647](http://support.apple.com/kb/ht3647)

那么，还有其他使用 SPP 的方法吗？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:09:13.620

不，很遗憾 Apple (iOS) 蓝牙不支持 SPP。为了与 iOS 设备进行串行电缆通信，您必须使用身份验证协处理器。我猜出于这个原因，蓝牙不支持有线通信仿真，因为您将没有“正版 iPod 设备”iAP 协议（​​MFI 规范）的身份验证

# android - 有没有办法将密钥保存到Android

> ID：16035167
> 
> 赞同：0
> 
> 时间：2013-04-16T10:49:59.257
> 
> 标签：android

有没有一种方法可以在 Android 中保存密钥，这样即使它已被植根，任何人都无法检索到该密钥。不是共享偏好，而是其他将密钥置于 Android 中高度安全的位置的东西。

基本上是为了保存从服务器发送的动态密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:00:48.223

正如有人提到的，您可以使用 AES/DES 密钥对其进行加密。为了更加安全，您可以为其添加唯一的设备 ID。例如：

```
String secureString = "some text";
String aesKey;
String uniqueKey = app.getUniqueDeviceID() + aesKey;
//encrypt using uniqueKey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:57:19.733

> 有没有办法在 android OS 中保存密钥，这样即使它被植根，任何人都无法检索到密钥。

一般来说，没有。你只能通过[混淆](http://en.wikipedia.org/wiki/Obfuscation)使它变得更难。

但你永远不会有 100% 的保证。可以说我是我设备上的根用户。你在我的记忆中保存了一些东西。我总能看到我记忆中的东西。如果我有足够的耐心，我可以找到你的钥匙或任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:49:43.503

我有一个解决方案，我做了这个解决方案来保存私人消息......如果你喜欢这个你可以尝试......我已经使用 Base 64 将消息转换为加密形式，或者你也可以使用 AES/DES 算法......加密人类无法读取表单，因此它是保存密钥的最安全方法。当您想要密钥时，只需将其解密即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:52:10.757

我不这么认为。root 用户可以访问系统可以访问的任何地方，因此您可以尝试隐藏该密钥，但我认为您无法控制它的访问权限。

# c# - 在 PresentationFramework.dll 中发生 System.Reflection.TargetInvocationException'

> ID：16035170
> 
> 赞同：0
> 
> 时间：2013-04-16T10:50:09.327
> 
> 标签：c#, wpf, exception, webbrowser-control

我运行一个`C# WPF application`使用嵌入其中的浏览器的简单程序。当浏览器导航到给定的 url 时，我创建了一个事件。但是这个错误是在运行时出现的：

> PresentationFramework.dll 中出现“System.Reflection.TargetInvocationException”类型的未处理异常

附加信息：调用的目标已引发异常。代码如下，

```
public MainWindow()
{
    // Some initialisation
    webBrowser.Navigate(requiredUrl);
}

private void webBrowser_Navigated(object sender, NavigationEventArgs e)
{
    // Actions related to navigation
} 
```

它的投掷`Exception`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:25:02.293

没关系，问题解决了。。

将 webBrowser.Navigate(requiredUrl) 移动到 Windows_Loaded 事件。

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
       {
         // Some code
          webBrowser.Navigate(requiredUrl);
       } 
```

现在工作正常。

我认为正如安迪所说，窗口需要一个有效的浏览器句柄。

所以它不能在 MainWindow() 函数中工作，因为浏览器的句柄没有在其中创建。

# asp.net - web api调用路由到错误的方法

> ID：16035174
> 
> 赞同：0
> 
> 时间：2013-04-16T10:50:20.203
> 
> 标签：asp.net, web-services, asp.net-mvc-4, asp.net-web-api

我有一个 webapi 控制器，它违反默认的 webapi 约定来公开一些不同的“get”方法

```
 [HttpGet]
    [WebAPIValidateAntiForgeryTokenAttribute]
    public Manufacturer[] GetManufacturers()
    {
        var profiler = MiniProfiler.Current; 
        using (profiler.Step("WCF Service Call: GetManufacturers"))
        {
            return IvService.GetManufacturers();
        }
    }

    [HttpGet]
    [WebAPIValidateAntiForgeryTokenAttribute]
    public Range[] GetRanges(string manufacturer_code)
    {
        var profiler = MiniProfiler.Current;
        using (profiler.Step("WCF Service Call: GetRanges"))
        {
            return IvService.GetRanges(manufacturerCode);
        }
    } 
```

它们是非常简单的方法，从 Javascript 调用并通过 WCF 再次调用外部系统，然后返回结果。这在 dev 上运行良好一段时间，但最近停止运行 - 从 javascript 到 GetManufacturers 和 GetRanges 的调用现在都在 GetManufacturers 中达到相同的断点。我检查了提琴手，它肯定调用了正确的网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:50:20.203

已经进行了一些重构以强制执行一些与参数名称有关的编码标准，并且来自 javascript 的调用已调整为 from

```
VehicleController/GetRanges?manufacturer_code=AB 
```

至

```
VehicleController/GetRanges?manufacturerCode=AB 
```

无需调整相应的webapi方法。起初我怀疑这是一些奇怪的路由问题，但事实证明，因为参数名称不再包含它识别的任何内容，它解析为唯一不需要任何参数的方法，这是有道理的，但让我摸不着头脑一小会儿！

# iphone - 未找到 QuartzCore/CATransform3D.h 文件

> ID：16035177
> 
> 赞同：0
> 
> 时间：2013-04-16T10:50:32.590
> 
> 标签：iphone, ios, objective-c, xcode, quartz-core

我收到了一些奇怪的错误`XCode 4.6.1`。

当我尝试在我的*iPad*（版本 6.1.3）上运行应用程序时，它给了我错误。但是当我使用*iPhone 6.1 模拟器*时它工作！

错误指向`UICollectionViewLayout.h`。我不知道这个文件是从哪里来的？我什至没有在我的项目中使用这个名称创建文件（*UICollectionViewLayout*）

请参阅下面链接中的图片 [错误](http://www4.picturepush.com/photo/a/12705047/img/Anonymous/Screen-Shot-2013-04-16-at-12.57.00-PM.png)

当我去构建阶段并尝试添加框架（`QuartzCore/CATransform3D`）时，我找不到它！！！

我不知道这些问题是从哪里来的，我很快就会发疯:(请有人帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:52:16.957

将 Quartz 库添加到您的项目中

[将quartzcore添加到xcode 4 for iOS](https://stackoverflow.com/questions/6956432/adding-quartzcore-to-xcode-4-for-ios)

相反，coregraphics.h 在您的代码中包含这一行以使用 QuartzCore

 **```
 #import <QuartzCore/QuartzCore.h> 
```**

# android - 如何在android中监控数据库的访问？

> ID：16035178
> 
> 赞同：-5
> 
> 时间：2013-04-16T10:50:35.563
> 
> 标签：android, database

我想开发一个用于监控 SQLite 数据库访问的 Android 应用程序

任何应用程序打开数据库时是否会生成任何事件？我应该如何监控 SQLite 数据库上其他应用程序执行的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:58:26.907

不，没有 API、回调、事件或广播来监控其他应用程序的数据库访问。

数据库本身只是应用程序数据文件夹中的一个文件，根据定义，没有其他应用程序可以访问它。

# sql - 如何找到交叉使用的ID

> ID：16035188
> 
> 赞同：0
> 
> 时间：2013-04-16T10:50:54.813
> 
> 标签：sql

假设有一个名为 Stack 的表；

```
Id       StackId
-------------------
.             .
1             10
2             12
3             10
4             10
5             11
11            5
.             .
.             . 
```

如何学习cross id之类的？

```
Id = 5
StackId = 11

Id = 11
StackId = 5 
```

我不能写给我看的sql语句

```
5,11
11,5 
```

我不知道数字，因为表格有 1.000.000+ 行，所以我想找到喜欢 5,11 的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:55:18.490

用于带有条件`JOIN`的表本身：`s1.Id = s2.StackId AND s1.StackId = s2.Id`

```
SELECT s1.Id, s1.StackId
FROM Stack s1
JOIN Stack s2 ON s1.Id = s2.StackId AND s1.StackId = s2.Id 
```

因为`INNER JOIN`已使用（默认情况下）没有相应`s2`值的行将不会被返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:57:18.903

请试试：

```
select a.* from 
    YourTable a inner join YourTable b on a.Id=b.StackId 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:02:09.753

您可以使用聚合和连接来解决此问题。这是一种方法：

```
select (case when id < StackId then id else StackId end) as FirstVal,
       (case when id < StackId then StackId else id end) as SecondVal
from t
group by (case when id < StackId then id else StackId end),
         (case when id < StackId then StackId else id end)
having count(distinct id) = 2 
```

如果您有一个带有 a`least()`和`greatest()`函数的数据库，并且您知道表中现在有重复项，则可以将其改写为：

```
select least(id, StackId) as FirstVal, greatest(id, StackId) as SecondVal
from t
group by least(id, StackId), greatest(id, StackId)
having count(*) = 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T11:04:44.143

另一种解决方案：

```
select *
from Stack s
where exists (select 1 from Stack where Id = s.StackId and StackId = s.Id) 
```

# c# - 使用 POST 参数打开 Internet Explorer 浏览器

> ID：16035191
> 
> 赞同：0
> 
> 时间：2013-04-16T10:51:09.527
> 
> 标签：c#, windows-phone-7, post, xna, windows-phone

我想在 Internet Explorer 中打开一个网页，`WebBrowserTask`但我也想传递一个 POST 参数。

这可以使用`WebBrowserTask`吗？

编辑：我忘了提到这是 XNA 项目的一部分。我想做的就是显示一个网页并通过请求传递 POST 参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:17:47.737

`WebBrowserTask`只能导航到特定页面并调用 GET 请求。您可以使用 来模拟 POST 请求`HttpWebRequest`，但我怀疑这会对您尝试做的事情有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:02:07.230

这对于 是不可能的`WebBrowserTask`，但是使用`WebBrowser`控件是可能的。

具体查看[`Navigate`方法](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff626636%28v=vs.105%29.aspx)。`WebBrowser`

这需要`byte[]`您的 POST 数据。

```
public void Navigate(
Uri uri,
byte[] postData,
string additionalHeaders) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:01:27.000

您也可以使用 WebClient 对象来完成此操作，尽管它更加晦涩难懂。Webclient 是 HTTPRequest 的包装器。这就像简单模式下的 HTTPRequest。权衡是，如果你想发送帖子数据，那么你需要对它很狡猾。您可以在 WebClient 中创建新标头并将其名称设置为您需要的名称。然后，当您拨打电话时，它会将它们作为发布数据发送出去。听起来很复杂，但在实施时实际上非常简单和干净。比 HTTPRequest 更干净。

# javascript - 使用 Phonegap 在 Android 上启动语音识别器

> ID：16035194
> 
> 赞同：3
> 
> 时间：2013-04-16T10:51:13.633
> 
> 标签：javascript, android, cordova, speech-recognition

目前我正在制作一个Phonegap 应用程序。我想将增强现实与语音输入结合起来。Phonegap 有一个名为 SpeechRecognizer 的插件，但我无法让它工作。

我的标题：

```
<script type="text/javascript" src="cordova-2.6.0.js"></script>
    <script type="text/javascript" src="SpeechRecognizer.js"></script>
    <script type="text/javascript" charset="utf-8">
        document.addEventListener("deviceready", onDeviceReady, false);

        function speechOk() {
            alert('speech works');
        }

        function speechFail() {
            alert("speech doesn't work");
        }

        function onDeviceReady() {
            window.plugins.speechrecognizer.init(speechOk, speechFail);
        }

        $("#micButton").bind("touchstart", function() {     
            var requestCode = 4815162342;
            var maxMatches = 1;
            var promptString = "What do you want?";
            window.plugins.speechrecognizer.startRecognize(speechOk, speechFail, requestCode, maxMatches, promptString);
        });
    </script> 
```

项目图片（config.xml）： ![在此处输入图像描述](https://i.stack.imgur.com/TjZzS.png)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T19:40:29.693

不是你的错，`SpeechRecognizer.java`里面有一个错误。

我有同样的问题，我只是用`Speech Recognizer`旧版本（如）替换插件解决了它`2.0.0`，你可以从[github](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SpeechRecognizer/v2.0.0)下载它。

它对我有用`Phonegap 2.5.0`，猜猜它适用于`2.6.0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:44:06.230

有一些问题。首先，SDK 版本不对。如果您使用新的cordova，您还必须使用最新版本的插件。此版本需要 SDK 15 或更高版本。（安卓清单-> `<uses-sdk android:minSdkVersion="15" android:targetSdkVersion="17" />`）。之后，由于某种原因，插件 init 没有返回任何内容。我刚刚触发了：window.plugins.speechrecognizer.startRecognize(); 单击按钮即可执行此功能，然后执行。

javascript（此代码需要 jQuery）：

```
 $("#micButton").bind("touchstart", function() {        
        var requestCode = 4815162342;
        var maxMatches = 1;
        var promptString = "What do you want?";
        window.plugins.speechrecognizer.startRecognize(speechOk, speechFail, requestCode, maxMatches, promptString);
    });

    function speechOk(result) {
        var match, respObj;
        if (result) {
            respObj = JSON.parse(result);
            if (respObj) {
                var response = respObj.speechMatches.speechMatch[0];
                $("#searchField").val(response);
                $("#searchButton").trigger("touchstart");
            } 
        }
    }

    function speechFail(m) {
        navigator.notification.alert("Sorry, I couldn't recognize you.", function() {}, "Speech Fail");
    } 
```

'#micButton' 是您必须按下才能启动 android 语音识别的按钮

'#searchField' 是一个输入字段，它从语音识别中获取结果

感谢 MrBillau 的好建议。

# php - 如何从 html 页面中删除第一个 div，包括使用 jquery 的 iframe

> ID：16035197
> 
> 赞同：2
> 
> 时间：2013-04-16T10:51:37.263
> 
> 标签：php, javascript, jquery, codeigniter

**我使用iframe**在我的 CI 项目中添加了一个 html 页面。现在我想从包含的页面中**删除第一个 div 。**该div没有ID。我写了一个 jquery 代码，但它**删除了整个 iframe**。这里是

```
$(document).ready(function(){
  $("iframe").load(function(){
    //$('div:first').remove(); 
      $("body").find("div:first-child").remove();   
  });
}); 
```

html

```
<div class="span12">
                <iframe id="patrolIframe" width="100%" height="900" frameborder="0" scrolling="yes" allowtransparency="true" 
                src="http://...../map.html"></iframe>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:55:18.867

```
$(document).ready(function(){
  $("iframe").load(function(){
      $('div')[0].remove(); 
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:54:46.753

尝试

```
$(document).ready(function(){
  $("iframe").load(function(){
    //$('div:first').remove(); 
      $(this).find("div:first-child").remove();   
  });
}); 
```

您的 $("body") 选择器选择您的 jquery 加载到的页面的正文，即整个页面。我猜你的 iframe 在那个页面的第一个 div 里面，所以它被删除了。我不使用 iframe，但我认为这种情况下的 $(this) 是指 iframe，所以它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:56:22.540

尝试

```
 $(document).ready(function(){
   $("iframe").load(function(){
   $("body",this).find("div:first-child").remove();   
  });
}); 
```

# basic4android - 安装basic4android的方法是什么

> ID：16035199
> 
> 赞同：0
> 
> 时间：2013-04-16T10:51:37.680
> 
> 标签：basic4android

我完美地安装了 jre7 和 jdk1.7 以及 android sdk 和 avd 管理器，我的模拟器工作正常但是当我运行我编写的程序时它显示

```
Compiling code.                         0.11
Compiling layouts code.                 0.02
Generating R file.                      0.00
Compiling generated Java code.          Error
javac 1.7.0_17
javac: file not found: src\com\empire\designerscripts\*.java
Usage: javac <options> <source files>
use -help for a list of possible options 
```

我新格式化我的系统安装了这些

我在我的笔记本电脑上使用 basic4android 没有任何问题，但如果是我的桌面系统，它会显示上述错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T19:30:57.587

我从 Erel 了解到，Basic4Android v2.50 或更高版本已解决此问题。也可以安装最新的 Java 6 版本并将其用于编译。在我的案例中，Java 6 的使用是成功的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-11T17:32:29.707

我认为问题出在您正在运行的 jdk 上。尝试使用 jdk1.6.0_25。我使用这个并且从不更新这个版本，因为版本 7 存在一些安全问题。

# knockout.js - 淘汰赛减少 DOM 操作

> ID：16035206
> 
> 赞同：4
> 
> 时间：2013-04-16T10:52:04.830
> 
> 标签：knockout.js

我想知道有没有办法减少对 Knockoutjs 的 Dom 操作 - 我有一个大的可观察数组，我看到在 foreach 中它需要分配时间。

在研究了代码并对其进行了调试后，我发现淘汰赛将每个元素都放入了 dom 中，而不是将所有元素放在一个中。

有没有一种快速的方法让敲除在 foreach 语句中创建一个所有子节点的长字符串，然后将该字符串写入 DOM 一次？

我的代码：

```
self.items = ko.observableArray([]);     
function generateModel(data) {
            var mapped = $.map(data, function (d) { return new item(d); });
            self.items(mapped);
        }

<!--ko foreach:{data:items}-->
some template in here
<!--/ko--> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:32:49.287

如果你愿意，你可以在这里找到一些好的提示： [http ://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)

更好的是，您可以在这里找到一个有趣的自定义对象实现，名为 pauseableObservableArray（伟大的名字：）来自一个巨大的开发人员：rpniemeyer） [http://jsfiddle.net/rniemeyer/fYnjG/](http://jsfiddle.net/rniemeyer/fYnjG/)

除此之外，对于第一个简单的方法，您是否尝试从 DOM 中删除带有`if`绑定的元素？

例如。html:

```
<!-- ko ifnot: isWorking -->
<div data-bind="foreach: blogs">
    <span data-bind="text: id"></span>
</div>

<!-- /ko --> 
```

视图模型：

```
function BlogViewModel() {
    var self = this;
    self.blogs = ko.observableArray([{id:'qwe'}]);

    self.isWorking= ko.observable(false);

    self.populateBlogs = function () {
        self.isWorking(true);

        var tmp =  self.blogs();

        for (var i = 0; i < 100000; i++) {
            tmp.push({id:i});
        }

        self.blogs(tmp);
        self.isWorking(false);
    }

} 
```

[更新] 可能，如果您需要改进更多的渲染时间，您需要实现类似于我建议的[小提琴](http://jsfiddle.net/rniemeyer/fYnjG/)中实现的东西，或者实现自定义绑定处理程序来“手动”完成所有事情。例如，类似于：

html:

```
<div data-bind="quickForEach: blogs"></div> 
```

视图模型：

```
ko.bindingHandlers.quickForEach = {

    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        var blogs = valueAccessor()();
        var innerText='';
        for (var i = 0; i < blogs.length; i++) {
            //very dirty code!In production, concatenate strings in a smarter way
            innerText += blogs[i].id;
        }
        $(element).text(innerText);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:54:40.490

是的，有一种使用油门扩展器的方法：请参阅[http://knockoutjs.com/documentation/throttle-extender.html上的文档](http://knockoutjs.com/documentation/throttle-extender.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T00:41:08.100

绑定在`foreach`渲染大型数组时效率不高。它旨在有效地处理动态数组（可以小幅修改）。

有一些解决方案可能对您有所帮助：

1.  使用基于字符串的模板。[使用 Underscore](http://knockoutjs.com/documentation/template-binding.html#note_7_using_the_underscorejs_template_engine)的示例在 Knockout 文档中。

2.  使用生成特定 HTML 内容并将其添加到 DOM 的自定义绑定。这种技术的一个例子是我的[`table`绑定](https://github.com/mbest/knockout-table)。

3.  使用`foreach`我的 binding 之类的更快样式的[`repeat`绑定](https://github.com/mbest/knockout-repeat)。

# c# - 异步方法不返回 asp.net mvc 4

> ID：16035210
> 
> 赞同：8
> 
> 时间：2013-04-16T10:52:36.637
> 
> 标签：c#, asp.net, asp.net-mvc, asynchronous

我实现的异步方法有问题。该方法基本上向资源发出 HttpRequest 并在请求成功时反序列化字符串。我为该方法编写了一个测试，它有效。但是当我从控制器调用它时，该方法永远不会返回？

```
 public async Task<IEnumerable<T>> Get()
    {
        try
        {
            var resourceSegmentUri = new Uri(_uri, UriKind.Relative);

            var response = await _client.GetAsync(resourceSegmentUri);

            if (response.IsSuccessStatusCode)
            {
                var submission = await response.Content.ReadAsStringAsync();
                return JsonConvert.DeserializeObject<IEnumerable<T>>(submission);
            }

            if (response.Content != null)
            {
                var message = response.Content.ReadAsStringAsync();
                throw new WebException(message.Result, (WebExceptionStatus)response.StatusCode);
            }

        }
        catch (WebException e)
        {
            Logger.Error("GET Request failed with status: {0}", e.Status);
            throw;
        }

        throw new Exception();
    } 
```

永不返回的代码：

```
public ActionResult Index()
{
   var api = new Api();
   var test = api.Get().Result; //Never returns
   return View();
} 
```

测试有效：

```
[Test]
public void GetShouldReturnIfSuccessfulRequest()
{
    var api = new Api();
    var submission = api.Get();

    Console.WriteLine(JsonConvert.SerializeObject(submission));
    Assert.NotNull(submission);
} 
```

有谁知道这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T11:03:22.230

您遇到了死锁，因为您正在调用`.Result`控制器操作。

如果您使用`async/await`，那么您也必须使用异步操作。

所以这样的事情应该解决它：

```
public async Task<ActionResult> Index()
{
  var api = new Api();
  var test = await api.Get(); // Should return
} 
```

这里有一篇关于这个的综合文章：[*在 ASP.NET MVC 4 中使用异步方法*](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

# javascript - 在 Javascript 中解析 html 以进行画布渲染

> ID：16035217
> 
> 赞同：1
> 
> 时间：2013-04-16T10:53:08.827
> 
> 标签：javascript, html, canvas

我有以下简单的html：

```
<h1><i>This is a test</i> <span class="wysiwyg-color-red">Hello world</span></h1> 
```

我想使用一组基本样式和**strokeText** html5 画布 API 方法创建一个文本 html 到画布转换器。

获取节点值的“树”和 html html 元素的列表会很有用。

```
{ 
  "This is a test": ["i", "h1"],
  "Hello world": ["span class="wysiwyg-color-red", "h1"]
} 
```

由此我将能够生成适当的画布文本样式。

**回答：**

[http://jsfiddle.net/AUTJs/4/](http://jsfiddle.net/AUTJs/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:06:33.393

最好的方法是将其放在隐藏容器中的 DOM 上，让浏览器协调 html 中的错误（未关闭的标签等），然后简单地迭代该容器中的元素。最好使用 jQuery。对于你得到的每个节点，你可以让 jquery 给你标签名、类名、样式属性或任何你需要的东西、里面的文本、宽度和高度以及你需要的所有东西。将其绘制到画布上，然后使用该元素的子节点，依此类推，直到完成。HTML2Canvas 库做同样的事情。它依靠浏览器告诉它字体大小和颜色以及 z-index 和节点顺序等等。

即使对于像您这样的简单 html，这样做也会为您节省大量时间和麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:57:58.967

也许您只需要可以在`canvas`元素上呈现 HTML 的东西？这样页面的“屏幕截图”就会绘制在`canvas`.

查看[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)和[http://experiments.hertzen.com/jsfeedback/](http://experiments.hertzen.com/jsfeedback/)。

# javascript - 如何使用jquery查找上一个元素的高度

> ID：16035219
> 
> 赞同：0
> 
> 时间：2013-04-16T10:53:15.000
> 
> 标签：javascript, jquery

我有一个定义如下的表：

```
<table>
    <tr>
        <td>
            <label>First</label>
        </td>
        <td>
            <input type='text' style='widht:200px; height:100px;' />
        </td>
        <td>
            <button class='but'></button>
        </td>
    </tr>
    <tr>
        <td>
            <label>Second</label>
        </td>
        <td>
            <select style='widht:100px; height:150px;'>
                <option>one</one>
            </select>
        </td>
        <td>
            <button class='but'></button>
        </td>
    </tr>
    <tr>
        <td>
            <label></label>
        </td>
        <td>
            <input type='text' style='widht:200px; height:100px;' />
        </td>
        <td>
            <button class='but'></button>
        </td>
    </tr>
    <tr>
        <td>
            <label>Third</label>
        </td>
        <td>
            <textarea style='widht:500px; height:200px;'></textarea>
        </td>
        <td>
            <button class='but'></button>
        </td>
    </tr>
</table> 
```

然后在按钮上单击我想获得前一个控件的高度。所以我写了这段代码：

```
 $(".but").live('click',function(){
     alert($(this).prev().css('width'));
     alert($(this).prev().css('height'));
 }); 
```

但是警报将值显示为未定义。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:01:02.947

利用：

```
var input = $(this).parent().prev().find("input");
if(input) { // You have a select, so this won't be found in all circumstances
    alert(input.css('width'));
    alert(input.css('height'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:59:36.313

实际上，您的按钮没有以前的目标。

如果你想要 TD 高度，你应该调用 .parent() 代替。

请注意您的 HTML ！

编辑：小提琴更新：http: [//jsfiddle.net/jVsRW/4/](http://jsfiddle.net/jVsRW/4/)

```
$(".but").on('click', function() {
    // Of course display null for the first button that do not have a previous form element.
    alert($(this).closest('tr').prev().find('input, select, textarea').height());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:56:47.790

使用 real`width()`获取元素的实际宽度，而不是 css ( `.css('width')`) 中定义的宽度。这同样适用于高度：

```
$(".but").live('click',function(){
    alert($(this).prev().width());
    alert($(this).prev().height());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:10:02.520

你可以试试： [jsFiddle](http://jsfiddle.net/F7b37/)

```
$(".but").live('click',function(){
     alert($(this).closest("tr").find('input').css('width')); 
     // OR
     //alert($(this).closest("tr").find('select').css('width'));     
}); 
```

# jquery - 在 IE 中异步加载 jQuery 时使用`.noConflict()`

> ID：16035228
> 
> 赞同：-3
> 
> 时间：2013-04-16T10:53:35.387
> 
> 标签：jquery, internet-explorer

我有一个项目，我必须像这样动态加载 jQuery：

```
(function() {

  var scriptOnLoad = function() {
    jQuery.noConflict();

    // Do my stuff here
  };

  var script = document.createElement('script');
  script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js";
  script.onload = scriptOnLoad;
  script.onreadystatechange = function () { 
  if ( script.readyState == 'loaded' || script.readyState == 'complete' ) 
    scriptOnLoad(); 
  };
  document.getElementsByTagName('head')[0].appendChild(script);
})(); 
```

该站点还使用 Prototype，应使用`.noConflict()`.

但是在 IE9 中，有时会发生使用该变量的其他一些 JS 代码（不是我的，我无法控制它）`$`失败，因为它仍然设置为 jQuery 而不是 Prototype 的函数。

我认为这是一个时间问题，IE 在加载 jQuery 和执行`readystatechange`事件处理程序之间执行其他 JavaScript。任何人都可以确认是否是这种情况？

有什么办法可以解决这个问题？我唯一能想到的就是使用我自己修改过的 jQuery 副本，它`$`一开始就不会覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T18:22:24.733

你可以连接 jquery 和 jQuery.noConflict(); 在一个文件中并在不需要脚本加载处理程序的情况下加载它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-16T11:13:13.900

不确定，但您可以尝试在 $j = jQuery.noConflict() 之类的变量中初始化 jquery，并将 $j 用于您的代码。

# php - 增加/减少phpcassa中的值

> ID：16035232
> 
> 赞同：1
> 
> 时间：2013-04-16T10:54:04.103
> 
> 标签：php, nosql, cassandra, phpcassa

有没有使用phpcassa在cassandra中简单增加/减少整数值的方法？也许是 CounterColumn，但我没有找到任何关于如何使用它的信息。

基本上，我只想增加一些动作计数器，任何提示或代码示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:32:10.613

你见过这个[例子](https://github.com/thobbs/phpcassa/blob/master/examples/counters.php)吗。ColumnFamily::add() 是增加计数器的最简单方法

`$count_cf->add("key1", "col1", 10);`

# git - 为什么`git describe -dirty`在描述干净结账时要添加`-dirty`后缀？

> ID：16035240
> 
> 赞同：8
> 
> 时间：2013-04-16T10:54:40.183
> 
> 标签：git, git-describe

我刚刚发现了这个`--dirty`选项`git describe`，它看起来应该做一些非常有用的事情，即`git describe`在工作树脏时的输出中附加一个后缀，但是在我的一些存储库中似乎并非如此：

```
$ git status
# On branch 8.30
nothing to commit (working directory clean)
$ git describe --dirty
8.30rel-8-g9c1cbdb-dirty 
```

我认为这可能是因为工作目录*相对于 tag*很脏，但似乎也不是这样：

```
$ git status
# On branch 1.4
nothing to commit (working directory clean)
$ git describe --tags --dirty --long
1.4rel-0-gfedfe66-dirty 
```

`hg id`当我[使用 Mercurial](https://stackoverflow.com/q/2386440/42473)时，我曾经广泛使用过，并且喜欢它的默认行为是为`+`它为脏存储库报告的任何提交哈希添加后缀，因此一直在寻找`git`等效的东西，但`git describe --dirty`没有t 似乎做了我所期望的文档：

> ```
>  --dirty[=<mark>]
>        Describe the working tree. It means describe HEAD and appends
>        <mark> (-dirty by default) if the working tree is dirty. 
> ```

我是否误解了`--dirty`应该做什么，或者我没有正确使用它？

万一有什么不同，所有的 git 存储库都通过[buckminster](http://www.eclipse.org/buckminster/)部署，因此不涉及*子模块*，文件系统是`nfs`共享的。

* * *

**更新：**我发现了一种解决方法，但我完全不知道这可能会产生什么影响。

如果我`git diff --quiet HEAD`在 repo 上运行，那么突然之间就会`git describe`像我预期的那样工作：

```
$ git status
# On branch 8.30
nothing to commit (working directory clean)
$ git describe --dirty
8.30rel-8-g9c1cbdb-dirty
$ git diff --quiet HEAD
$ git describe --dirty
8.30rel-8-g9c1cbdb 
```

我还发现，当`git describe`报告存储库`dirty`时，`gitk`还显示“本地未提交的更改，未签入索引”，然后列出工作目录中的每个文件，但没有针对它们的差异，只有`---- filename ----`行。

* * *

**进一步更新：**由于这仍然是一个问题，我最终编写了一个`git-describe-dirty`脚本，该脚本首先运行，`git describe --dirty`但如果它发现存储库很脏，则`git update-index -q --refresh`在再次尝试并获取第二个结果之前运行。

当迭代数百个存储库时，与每次`git describe-dirty`运行相比，使用并仅运行最初表明它是脏的存储库的索引更新可以节省大量`git update-index -q --refresh ; git describe --dirty`时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-08T23:01:47.200

如果您运行的是 git 1.7.6 或更早版本，则需要`git update-index --refresh`在 using 之前运行`git describe --dirty`，因为索引可能已过时。您使用的解决方法`git diff --quiet HEAD`有效，因为“git diff”是一个瓷器命令，并且可能会更新索引本身。

为 git 1.7.7[修复此](https://github.com/git/git/commit/bb571486)问题的git commit 描述了该问题：

> 运行 git describe --dirty 时，应刷新索引。以前缓存的索引会导致 describe 认为索引是脏的，而实际上它只是陈旧的。

请注意，您描述的确切步骤顺序不应该有这个问题，因为`git status`更新索引。但我仍然认为您会看到同样的问题，因为您描述的解决方法匹配。以下是我演示该问题的方式：

```
% git describe --tags --dirty
v1.0.0
% touch pom.xml
% git describe --tags --dirty
v1.0.0-dirty
% git status
# On branch dev
nothing to commit (working directory clean)
% git describe --tags --dirty
v1.0.0 
```

在这里运行“git status”会更新索引作为副作用并修复“git describe”输出，就像您的解决方法一样。git 1.7.6 及更早版本的正确管道修复将是：

```
% touch pom.xml
% git describe --tags --dirty
v1.0.0-dirty
% git update-index --refresh
% git describe --tags --dirty
v1.0.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-20T01:14:43.110

请注意`git describe --dirty`，大约一年前还有另一个关于 的错误修复：[https ://github.com/git/git/commit/a1e19004e11dcbc0ceebd92c425ceb1770e52d0b](https://github.com/git/git/commit/a1e19004e11dcbc0ceebd92c425ceb1770e52d0b)

> "git --work-tree=$there --git-dir=$here describe --dirty" 没有正常工作，因为它没有注意用户指定的工作树的位置

如果出现此错误，此处显示的解决方法不起作用，因此我们必须升级我们的安装。截至今天（2020 年 2 月 20 日）， Debian *buster*似乎没有现成的修复程序，但 Debian *Bullseye*主要 git 软件包现在与 buster 兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-12T21:39:09.053

Git 2.13（2017 年第 2 季度）对该`--dirty`标志进行了`--broken`一些改进，因为`git describe --dirty`当无法确定工作树中的状态是否与 HEAD 的状态匹配（例如损坏的存储库或损坏的子模块）时，“”会死掉。

请参阅[Stefan Beller (](https://github.com/stefanbeller) [)的](https://github.com/stefanbeller)[提交 b0176ce](https://github.com/git/git/commit/b0176ce6b5d954a747dc4d0c5a8593ed576714c4)（2017 年 3 月 21 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 844768a](https://github.com/git/git/commit/844768a29864cac01d55463a8858457f4908d91e))^(中，2017 年 3 月 27 日）)[`stefanbeller`](https://github.com/stefanbeller)
^([`gitster`](https://github.com/gitster))

> ## `builtin/describe`: 介绍`--broken`标志
> 
> `git-describe`告诉您当前的版本号或错误，例如，当您在存储库之外运行它时，下载 tar 球而不是使用 git 获取源代码时可能会发生这种情况。
> 
> 为了保持这种只出错的特性，当不在存储库中时，必须将严重的（子模块）错误降级为温和地报告它们，而不是`git-describe`完全出错。

为了实现这`--broken`一点，引入了一个标志 ' '，它与 ' `--dirty`' 相同，但使用一个实际的子进程来检查脏度。当那个孩子意外死亡时，我们将附加 ' `-broken`' 而不是 ' `-dirty'`。

# windows-8 - 寻找 VoIP 解决方案以集成到 Windows 商店应用程序中

> ID：16035246
> 
> 赞同：3
> 
> 时间：2013-04-16T10:54:51.120
> 
> 标签：windows-8, windows-runtime, microsoft-metro, windows-store-apps, voip

我希望我的 Windows 商店应用程序（Windows 8 + Windows rt）能够与应用程序的其他用户（又名 VoIP）**集成**实时语音对话。是否有任何应用内通信解决方案或 SIP 客户端？

我知道 Windows Phone 8 的解决方案，但我正在寻找 Windows 8/RT 的解决方案：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206983.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206983.aspx)

我将能够托管服务器（例如 FreeSwitch）并在需要时为产品付费。我的条件是它集成在 Windows 商店应用程序（兼容 WinRT）中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T17:52:25.627

我很确定您已经查看了[Windows 8 实时通信示例](http://code.msdn.microsoft.com/windowsapps/Simple-Communication-Sample-eac73290)！？

如果您已经检查过，请分享您的经验。我正在尝试将它用于我的应用程序的视频聊天功能，但这个示例“不是很成熟”——委婉地说。祝您的 voip 解决方案好运！

# bash - 在make中未设置变量时获取默认值

> ID：16035247
> 
> 赞同：18
> 
> 时间：2013-04-16T10:54:54.490
> 
> 标签：bash, gnu-make, variable-expansion

（编辑：基于@Michael反馈的问题更准确）

在 bash 中，我经常使用[参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)：以下命令在未设置`default value`时打印“” `$VARNAME`，否则打印 VARNAME 内容。

```
echo ${VARNAME:-default value}  #if VARNAME empty => print "default value" 
echo ${VARNAME-default value}   #if VARNAME empty => print "" (VARNAME string) 
```

我[没有](http://www.gnu.org/software/make/manual/html_node/Using-Variables.html)在 GNU 上找到类似的功能`make`。我终于在我的`Makefile`：

```
VARNAME ?= "default value"
all:
        echo ${VARNAME} 
```

但我对这个解决方案不满意：它总是创建变量`VARNAME`，这可能会改变某些 makefile 的行为。

**有没有更简单的方法来获取未设置变量的默认值？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-16T12:31:46.883

如果你想使用 GNU make 变量的扩展，如果它是非空的，如果它是空的，则使用默认值，但不设置变量，你可以这样做：

```
all:
        echo $(or $(VARNAME),default value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:25:51.423

如果要测试变量是否具有非空值，可以使用：

```
ifeq ($(VARNAME),)
        VARNAME="default value"
else
        do_something_else
endif 
```

要检查变量是否已定义，请使用`ifdef`.

有关更多信息，请参阅手册中[的条件句法。](http://www.gnu.org/software/make/manual/make.html#Conditional-Syntax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T19:19:50.827

我有一个类似的情况，过滤 shell 命令的结果可能是单个单词或空字符串。当为空时，它应该回退到默认单词。在下面的示例中，APPLE_LINUX 在 macOS 上将是“apple”，在其他平台上将是“linux”。MSG 将设置为适合平台的消息。示例意图避免使用`ifeq`.

```
MACHINE         := $(shell $(COMPILE.cpp) -dumpmachine)
MACHINE_APPLE   := $(findstring apple,$(MACHINE))
APPLE_LINUX     := $(firstword $(MACHINE_APPLE) linux)
apple.MSG       := You are building on macOS
linux.MSG       := You are building on Linux or another OS
MSG             := $($(APPLE_LINUX).MSG) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T11:28:16.560

只需删除冒号。如果您`:-`在替换中使用默认值，则如果变量为空、空字符串或不存在，则将使用默认值，但仅`-`在未定义变量的情况下单独使用将仅替换默认值。

```
# var1=default
# var2=

# echo var2 is ${var2:-$var1}
var2 is something
# echo var3 is ${var3:-$var1}
var3 is something

# echo var2 is ${var2-$var1}
var2 is
# echo var3 is ${var3-$var1}
var3 is something 
```

# mysql - 关于 MySQL 事务的几个问题

> ID：16035248
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:54:56.553
> 
> 标签：mysql, transactions

我是 MySQL 新手，想了解更多。我正在阅读 myseql doc，目前很难理解。

* * *

你能解释一下，这些是真的还是假的？

**1** - 在 MySQL 中，无法撤消已发生的更新或删除查询。例如，过去 24 小时内有 1900 个查询。没有一个是可以撤消的。

**2** - 只能回滚 MySQL 中的当前事务。

**3** - 事务结束后保存点被销毁。换句话说，今天上午 10 点无法创建存档点。

**4** - 保存点和回滚仅在当前事务中有效，并且在提交完成后它们会死掉。

**问题：**

**1** - 如果只能回滚当前事务，那么回滚或事务有什么意义？

如果事务是错误的，为什么要运行它？

* * *

编辑：

我创建了一个这样的保存点：

```
start transaction;
savepoint behnam;
commit; 
```

然后运行了一些更新和删除查询。然后尝试回滚到该保存点：

```
rollback to savepoint behnam 
```

我得到：

```
#1305 - SAVEPOINT behnam does not exist 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:06:25.780

1.  如果您在插入数据时存储时间戳，则可以触发查询以删除过去 24 小时。但是您无法撤消它们。

2.  是的，在某些情况下它是可能的。请参考[回滚和提交](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

3.  我认为保存点只有在被覆盖时才会被删除，所以如果您使用与前一个保存点相同的保存点进行事务，它将覆盖最后一个保存点，因此您无法返回

4.  是的，当前事务提交后，所有保存点都将被删除。参考这个 [保存点](http://dev.mysql.com/doc/refman/5.5/en/savepoint.html "保存点")

# c++ - STL 容器和不可复制（和不可移动）的对象

> ID：16035250
> 
> 赞同：8
> 
> 时间：2013-04-16T10:54:59.630
> 
> 标签：c++, stl

由于 STL 容器要求所有内容都是可复制和可分配的，那么在处理不可复制对象时，首选的习惯用法是什么？

我可以想到两种不同的方法：

1.  存储（智能）指针而不是 STL 容器中的对象。

2.  摆脱 STL 容器并实现我自己的列表（例如，每个对象必须包含指向下一个对象的指针）。

第二种方法的主要缺点是析构函数的实现（是否应该以递归方式在当前对象之前销毁“下一个”对象？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:56:37.013

> 由于 STL 容器要求所有内容都是可复制和可分配的，那么在处理不可复制对象时，首选的习惯用法是什么？

好吧，实际上对于 C++11，它们要求对象是可移动的。由于`emplace_*`方法，只有某些操作需要它们是可分配的。

> 我可以想到两种不同的方法：
> 
> 1.  存储（智能）指针而不是 STL 容器中的对象。
>     
>     
> 2.  摆脱 STL 容器并实现我自己的列表（例如，每个对象必须包含指向下一个对象的指针）。

这两种方法当然是可行的。

`std::unique_ptr<YourObject>`在 C++11 中，带有元素的 STL 容器可能是最佳选择。从头到尾都是标准的。基于节点的容器可能存在*轻微*的性能问题，因为节点和它们指向的元素将是不同的内存区域；但它通常是难以察觉的。

如果它是可感知的，或者如果你不能使用 C++11，那么你应该学习*侵入式容器*，它包括用钩子增加你的对象，以便它们可以将自己排列到列表中。显然，有一个 Boost 库：[Boost.Intrusive](http://www.boost.org/doc/libs/1_53_0/doc/html/intrusive.html)。

> 你说的不可移动？

老实说，我会挑战大多数认为不应移动对象的设计。移动的唯一问题与对象身份有关，以及使指向被移动对象的指针无效的潜在问题（因此在后面存在悬空指针）。这通常可以通过智能指针和/或工厂方法来解决。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T11:16:02.953

我会选择方法#1：即在STL 容器中存储指向对象的*智能指针。*

请注意，可以在 STL 容器中存储非拥有的原始指针（例如*观察*原始指针），但存储*拥有*的原始指针是一种*“泄漏”*：使用**`shared_ptr`**或新的 C++11**`unique_ptr`**代替。

至于 #2，从头开始编写自己的容器需要大量时间和精力，而且我相信您无法在合理的时间范围内匹配完整的商业质量 STL 库实现的丰富性。

# prolog - 我可以使用 setof 谓词从有重复的列表开始构建没有重复的列表吗？

> ID：16035260
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:55:27.567
> 
> 标签：prolog

我正在使用 SWI Prolog 为大学考试学习 Prolog，并且我有以下练习：

> 编写从 ListWithDuplicates 列表（允许重复的列表）开始构建 ListWithoutduplicates （包含上一个列表中的相同元素但没有重复的元素）的重复谓词：
> 
> **重复（ListWithDuplicates，ListWithoutduplicates）。**

我认为我必须使用**setof**内置谓词来解决它，因为我在与此参数相关的部分中找到了这个练习，并且因为 setof 创建了一个没有重复的有序列表。

问题是我总是使用**setof**放入一个订单列表而不重复某些由事实表示的对象，而且我不知道如何处理一个列表......

我尝试过这样的事情（但这是错误的，我知道）：

```
/* FACT (BASE CASE): If the ListWithDuplicates is empty it is TRUE that the
                     ListWithoutDuplicates is empty:
*/
duplicates([], []).

duplicates(ListWithDuplicates, ListWithoutDuplicates) :-
                         setof(_, ListWithDuplicates, ListWithoutDuplicates). 
```

我尝试将其分为两种情况：基本情况：从空列表开始创建的没有重复的列表它是一个空的欲望和与 ListWithDuplicates 不为空的情况相关的规则，因此 ListWithoutDiplicares 必须是列表中允许重复的集合的结果...

我不知道使用 setof 来解决这个练习……有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:44:54.893

```
setof(X, member(X,List), SortedList). 
```

但这只是一种迂回的说法

```
sort(List, SortedList). 
```

# c++ - 在 netbeans 中包含 hdf5 的库

> ID：16035282
> 
> 赞同：0
> 
> 时间：2013-04-16T10:56:43.673
> 
> 标签：c++, netbeans, include, hdf5

我正在尝试用我的程序编写一些 HDF5 文件。为了学习如何做，我查看了教程并获取了一个示例[文件](http://www.hdfgroup.org/HDF5/doc/cpplus_RM/create_8cpp-example.html)。然而，我的问题是我无法让它运行，因为我不知道要包含什么。到目前为止我所做的是：

*   properties>Build>Additional Library Directories - 包括 HDF5 文件夹以及它的 bin 和 include 文件夹
*   属性>C++ 编译器>包含目录 - 与上述相同

不知何故，我在某个地方错过了一些东西，但我无法找出我到底错过了什么。

任何帮助将不胜感激。

你的麻姑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:40:27.360

您必须向链接器指定您正在使用的库：

*   构建 > 链接器 > 库
*   添加库文件
*   **在 HDF5 lib 目录（不是 bin**）中选择适当的 .a 文件

当您使用 C++ 编程时，这些文件应该是 libhdf5.a 和 libhdf5_cpp.a

# c# - 使用域外的 AD 登录详细信息对 SQL 连接进行身份验证

> ID：16035284
> 
> 赞同：7
> 
> 时间：2013-04-16T10:56:49.237
> 
> 标签：c#, .net, sql

我正在尝试从域外部连接到 SQL 服务器。

我有以下连接字符串：

```
SqlConnection("SERVER=Server;DATABASE=Database;User ID=Domain\User;Password=password"); 
```

当我尝试在域外使用它时，这将失败，因为它尝试使用 SQL 身份验证登录。

有没有办法将命令传递到字符串中以使用 Active Directory 身份验证。

使用域外的活动目录详细信息连接到 SQL 服务器还有哪些其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:52:09.780

您要么需要：

1.  在您的连接字符串中使用集成安全性，并在您的资源域（SQL 服务器所在的位置）和您的帐户域（帐户所在的位置）之间创建域信任关系。或者...
2.  在 SQL Server 中创建一个帐户，并在连接字符串中使用该帐户作为用户名和密码。

您通过将域凭据放入用户/密码中进行了无效组合，甚至没有信任关系。

编辑：

注释表明需要将 SQL 帐户与 AD 凭据同步。这不是必需的。sql 帐户只是 SQL 范围内的用户名和密码，它特定于 SQL 服务器，与域凭据无关。如果您使用 SQL 帐户，那么这些将成为您应用程序中的配置设置，用于构建正确的连接并通过网络发送。SQL 服务器在本地对这些凭据进行身份验证，而不涉及 AD。

是否创建 2 层（胖客户端直接访问 sql）或 3 层（客户端访问访问 sql 的中间层应用服务器）也很有趣。如果是后者，您的应用程序对用户进行身份验证和授权，然后，它使用带有 sql 特定用户/密码的配置设置来访问 sql。如果是前者并且您使用的是 sql 帐户，那么每个客户都需要一个，这是一个问题。

# prestashop - Prestashop 将我重定向到安装/

> ID：16035286
> 
> 赞同：1
> 
> 时间：2013-04-16T10:57:15.273
> 
> 标签：prestashop

我已经设置了 prestashop CMS 并删除了安装目录，但是当我尝试打开我的站点链接 www.mydomain.com 时，我已重定向到 www.mydomain.com/install/ 并且 CMS 说找不到该页面（404）。

但如果我打开 www.mydomain.com/index.php 一切正常！

为什么 CMS 不会自动将我从 www.mydomain.com 重定向到 www.mydomain.com/index.php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:23:45.827

因为我不知道是什么可能导致此问题，但请执行以下步骤。一个可以解决你的问题。

1) 清除浏览器缓存。2) 在 PS admin 中转到 Preferences -> SEO & Urls。在页面下方，您将有一些三个选项

a) 友好的 URL

b) 自动重定向到规范 URL

c) 禁用 apache 多视图

交替启用/禁用它们并尝试加载页面。

此外，在启用/禁用这些功能后，最好在加载首页之前清除浏览器缓存。

有时我自己遇到这样的问题，我像这样修复它们，它对我有用，但我仍然不知道为什么会出现这个问题：P

希望这会有所帮助。如果它不起作用，请告诉我。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T01:29:57.153

我认为在您的 htaccess 文件中创建了不正确的规则。（它在根文件夹中）

打开 htaccess 文件（在桌面上保留一份副本），#Dispatcher 中的代码应如下所示：

```
# Dispatcher
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^www.yoursite.com$
RewriteRule ^.*$ - [NC,L]
RewriteCond %{HTTP_HOST} ^www.yoursite.com$
RewriteRule ^.*$ %{ENV:REWRITEBASE}index.php [NC,L]
</IfModule> 
```

只需检查并告诉我。

# date - TYPO3 有条件的夏令时

> ID：16035288
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:57:16.590
> 
> 标签：date, conditional, conditional-statements, typoscript

我使用的是 TYPO3 系统。

欧洲夏令时结束`March 31`并结束`October 27`。有没有办法在打字稿中创造条件，或者

```
[condition] 
```

使用`if`, 来检测我们是否在这些日期之间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:10:34.200

由于无法嵌套排版条件，我会说不。我建议使用用户功能：

```
<?php

function user_isSummertime() {
  /* check whether it is summertime */
  if ($summertime) {
     return true;
  }
  return false;
}
?> 
```

这进入你的local.conf：

require_once('fileadmin/path/to/script/my_userfunc.php');

```
[userFunc = user_isSummertime()]
  #typoscript
[global] 
```

在这里我找到了一种检查夏令时的 php 方法： http://phpsnips.com/113/Calculate-Central-European-Summer-Time-(CEST)# [.UW1c1aDrFyA](http://phpsnips.com/113/Calculate-Central-European-Summer-Time-%28CEST%29#.UW1c1aDrFyA)

# asp.net - 如何使用 ViewBag 创建 BaseController

> ID：16035296
> 
> 赞同：19
> 
> 时间：2013-04-16T10:57:52.217
> 
> 标签：asp.net, asp.net-mvc

我需要执行以下操作：我已经准备好并正在运行一些控制器，但现在我想创建一个`BaseController`. 我的每个人都`Controllers`应该像这样继承它：

```
public class MySecondController : BaseController 
```

到目前为止，那已经在运行了。**现在的问题：**

我想在`ViewBag`这个基本控制器中添加一个。这`ViewBag`应该可以从我的控制器中调用的每个视图访问。

如何实现这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-16T11:03:13.917

您可以在重写方法中重写[OnActionExecuting](https://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuting(v=vs.118).aspx)方法，您可以将数据写入[`ViewBag`](https://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.viewbag(v=vs.118).aspx)字典。

```
public abstract class BaseController : Controller
{
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        ViewBag.someThing = "someThing"; //Add whatever
        base.OnActionExecuting(filterContext);
    }
} 
```

**.net Core 2019 更新：**

```
using Microsoft.AspNetCore.Mvc.Filters;

public abstract class BaseController : Controller
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        ViewBag.someThing = "someThing"; //Add whatever
        ViewData["someThingElse"] = "this works too";
        TempData["anotherThing"] = "as does this";
        base.OnActionExecuting(filterContext);
    }
} 
```

# php - 使用 adwords API 在我的客户中心运行已定义的“客户报告”

> ID：16035298
> 
> 赞同：-1
> 
> 时间：2013-04-16T10:58:00.853
> 
> 标签：php, google-ads-api

我目前正在研究是否有任何方法可以使用 API 在 Google AdWords 的“我的客户中心”的“客户报告”部分中“运行”手动创建的报告。

我正在考虑在 PHP 中执行此操作，因为我在该语言方面最有经验，但我不知道这是否可以完成。

我发现有一种方法可以通过 .xml 定义您自己的报告，然后使用 PHP 运行它作为来自 API 的报告请求，但我真的很想如果我只能获得可用的“客户报告”列表" 并通过 PHP 运行它（获取一个 .csv 文件）。

那么这甚至可能吗？如果是的话，你能指出我正确的方向吗？

抱歉，如果这没有意义，我是 AdWords 的新手，一切似乎都很复杂。如果您想了解更多细节，请告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:04:07.947

无法再下载在 Web 界面中定义的报告。但是 ad-hoc 报告界​​面非常简单，可以使用普通的同步 HTTP 请求轻松访问。看看这两个文件：

*   [https://developers.google.com/adwords/api/docs/guides/reporting](https://developers.google.com/adwords/api/docs/guides/reporting)
*   [https://developers.google.com/adwords/api/docs/guides/uireports](https://developers.google.com/adwords/api/docs/guides/uireports)

# wpf - 使 WPF 图像加载异步

> ID：16035300
> 
> 赞同：7
> 
> 时间：2013-04-16T10:58:15.487
> 
> 标签：wpf, image, asynchronous

我想加载 Gravatar-Images 并将它们从后面的代码设置为 WPF Image-Control。所以代码看起来像

```
imgGravatar.Source = GetGravatarImage(email); 
```

GetGravatarImage 的样子：

```
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.UriSource = new Uri( GravatarImage.GetURL( "http://www.gravatar.com/avatar.php?gravatar_id=" + email) , UriKind.Absolute );
bi.EndInit();
return bi; 
```

不幸的是，当网络连接缓慢时，这会锁定 GUI。有没有办法分配图像源并让它在后台加载图像而不阻塞 UI？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-16T12:24:22.677

我建议您对来自 XAML 的 imgGravatar 使用绑定。在其上设置**IsAsync=true**，WPF 将自动利用线程池中的线程来拉取图像。您可以将解析逻辑封装到 IValueConverter 中，并将电子邮件绑定为 Source

在 XAML 中：

```
<Window.Resouces>
    <local:ImgConverter x:Key="imgConverter" />
</Window.Resource>

...

<Image x:Name="imgGravatar" 
       Source="{Binding Path=Email, 
                        Converter={StaticResource imgConverter}, 
                        IsAsync=true}" /> 
```

在代码中：

```
public class ImgConverter : IValueConverter
{
    public override object Convert(object value, ...)
    {
        if (value != null)
        {
             BitmapImage bi = new BitmapImage();
             bi.BeginInit();
             bi.UriSource = new Uri( 
                 GravatarImage.GetURL(
                     "http://www.gravatar.com/avatar.php?gravatar_id=" + 
                      value.ToString()) , UriKind.Absolute 
                 );
             bi.EndInit();
             return bi;                
        }
        else
        {
            return null;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-16T16:04:11.470

我不明白为什么您的代码会阻止 UI，因为 BitmapImage 支持在后台下载图像数据。这就是为什么它有一个[`IsDownloading`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.isdownloading.aspx)属性和一个[`DownloadCompleted`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.downloadcompleted.aspx)事件。

无论如何，以下代码显示了一种完全在单独的线程（来自`ThreadPool`）中下载和创建图像的简单方法。它使用[`WebClient`](http://msdn.microsoft.com/en-us/library/tt0f69eh.aspx)实例下载整个图像缓冲区，然后从该缓冲区创建 BitmapImage。创建 BitmapImage 后，它会调用[`Freeze`](http://msdn.microsoft.com/en-us/library/ms557735.aspx)以使其可从 UI 线程访问。最后，它`Source`通过`Dispatcher.BeginInvoke`调用在 UI 线程中分配 Image 控件的属性。

```
ThreadPool.QueueUserWorkItem(
    o =>
    {
        var url = GravatarImage.GetURL(
           "http://www.gravatar.com/avatar.php?gravatar_id=" + email);
        var webClient = new WebClient();
        var buffer = webClient.DownloadData(url);
        var bitmapImage = new BitmapImage();

        using (var stream = new MemoryStream(buffer))
        {
            bitmapImage.BeginInit();
            bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
            bitmapImage.StreamSource = stream;
            bitmapImage.EndInit();
            bitmapImage.Freeze();
        }

        Dispatcher.BeginInvoke((Action)(() => image.Source = bitmapImage));
    }); 
```

* * *

编辑：今天你将只使用异步方法：

```
var url = GravatarImage.GetURL(
    "http://www.gravatar.com/avatar.php?gravatar_id=" + email);
var httpClient = new HttpClient();
var responseStream = await httpClient.GetStreamAsync(url);
var bitmapImage = new BitmapImage();

using (var memoryStream = new MemoryStream())
{
    await responseStream.CopyToAsync(memoryStream);

    bitmapImage.BeginInit();
    bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
    bitmapImage.StreamSource = memoryStream;
    bitmapImage.EndInit();
    bitmapImage.Freeze();
}

image.Source = bitmapImage; 
```

# c# - 如何加载 DLL 文件以确定其依赖的程序集名称？

> ID：16035306
> 
> 赞同：-2
> 
> 时间：2013-04-16T10:58:41.097
> 
> 标签：c#, reflection

在运行时，我想加载一个程序集并需要找到它的依赖程序集的名称，以便我可以确定执行给定的 DLL 文件需要哪些程序集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:08:01.310

您需要将程序集（DLL 文件）加载到[Reflection-Only context 中](http://msdn.microsoft.com/en-us/library/ms172331.aspx)。

之后，您可以使用[`GetReferencedAssembles`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies%28v=vs.90%29.aspx)查找依赖项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T11:18:04.443

我前段时间在一段讨厌的代码中使用了它：

在您加载程序集的地方，注册 resolve 事件：

```
AppDomain.CurrentDomain.AssemblyResolve += Assemblies_AssemblyResolve;
Assembly.LoadFile("<path to your assembly>");
AppDomain.CurrentDomain.AssemblyResolve -= Assemblies_AssemblyResolve; 
```

为每个引用的 dll 调用解析事件处理程序。在这里我尝试加载程序集。

```
Assembly Assemblies_AssemblyResolve(object sender, ResolveEventArgs args)
{
    if (args.RequestingAssembly != null)
    {
        return LoadAssemblyFromPath(new AssemblyName(args.Name), args.RequestingAssembly.Location);
    }

    if (assemblyTryPath != null)
    {
        return LoadAssemblyFromPath(new AssemblyName(args.Name), assemblyTryPath);
    }

    return null;
} 
```

还有一个实际加载发生的小帮手：

```
private Assembly LoadAssemblyFromPath(AssemblyName assemblyName,string fullPath)
{
    if (assemblyName == null||fullPath==null)
        return null;

    string path = Path.GetDirectoryName(fullPath);
    string dllName = assemblyName.Name + ".dll";
    string fullPath2Try = Path.Combine(path, dllName);

    Assembly loadedAssembly = Assembly.LoadFrom(fullPath2Try);

    return loadedAssembly;
} 
```

希望，这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:54:29.670

我找到了答案。如果我们想找到卸载程序集的引用程序集，我们可以通过以下方式找到。

```
Assembly _Assembly = Assembly.ReflectionOnlyLoadFrom(@"H:\Account.dll");
AssemblyName[] _AN = _Assembly.GetReferencedAssemblies(); 
```

# php - NFS drupal 实现

> ID：16035307
> 
> 赞同：0
> 
> 时间：2013-04-16T10:58:42.800
> 
> 标签：php, drupal, nfs, multiserver

我发现 NFS 是 Drupal 文件共享中多服务器设置的最佳方式

有人可以告诉我这是如何工作的。

我有两台带有 Drupal 文件的服务器连接到第三台服务器中的公共数据库

我还有一个文件服务器我应该如何链接这两个使用 NFS 的 Drupal 服务器以及 NFS 如何工作？

当用户从第一个 drupal 服务器上传文件时，它会在 Shared Server 中制作副本还是制作一个

两个drupal服务器中的符号（软）链接并将文件添加到共享服务器中？

有人可以告诉我并给我一个链接来为我的 MultiServer Drupal 设置实现 NFS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:32:10.290

让我们假设 Server-A (ip:aaaa) 是您要保存文件的服务器，Server-B(ip: bbbb) 和 Server-C (ip: cccc) 将具有 drupal。在 Server-A 中，您可能将文件存储在 /store 文件夹中。这将被挂载到 Server-B 和 Server-c 中的文件夹 /mnt/store。

为此，您需要在 Server-A 中安装 nfs-kernal-server，并在所有三台服务器上安装 nfs-common 和 portmap。NFS 依赖于远程过程调用 (RPC)，并且需要端口映射服务将 RPC 请求映射到正确的服务。

在 Server-A 中执行以下配置：

```
sudo apt-get install nfs-kernel-server portmap nfs-common
sudo mkdir -p /mnt/nfstest
sudo chmod 777 /mnt/nfstest
sudo mount  --bind /store /mnt/nfstest 
```

`sudo vi /etc/default/nfs-kernel-server`在这个文件集中 `NEED_SVCGSSD=no`

`sudo vi /etc/default/nfs-common`在这个文件集中：`NEED_IDMAPD=yes`和`NEED_GSSD=no`

`sudo vi /etc/idmapd.conf`在这个文件下`[Mapping]`设置`Nobody-User = nobody`和`Nobody-Group = nogroup`

`sudo vi /etc/hosts.deny`添加这个：`portmap mountd nfsd statd lockd rquotad : ALL`

`sudo vi /etc/hosts.allow`添加这个：`portmap mountd nfsd statd lockd rquotad : b.b.b.b, c.c.c.c`{ipaddresses}

`sudo vi /etc/exports`添加这个：`/mnt/nfstest b.b.b.b(rw,sync,no_subtree_check,fsid=0)`和 `/mnt/nfstest c.c.c.c(rw,sync,no_subtree_check,fsid=0)`

```
sudo exportfs -ra
sudo /etc/init.d/portmap restart
sudo /etc/init.d/nfs-kernel-server restart 
```

在 Server-B 和 Server-C 中执行此操作

```
sudo apt-get install portmap nfs-common
sudo vi /etc/hosts.deny SET: `portmap : ALL` 
```

`sudo vi /etc/hosts.allow`SET: `portmap : a.a.a.a`{Server-A 的 ipaddress}

`sudo vi /etc/default/nfs-common`设置：`NEED_IDMAPD=yes`和`NEED_GSSD=no`

`sudo vi /etc/idmapd.conf`在`[Mapping]`添加`Nobody-User = nobody`和`Nobody-Group = nogroup`

```
modprobe nfs
mkdir /mnt/store
sudo mount -t nfs4 a.a.a.a:/ /mnt/store 
```

# node.js - 如何使用 MongoDB 的 '$match' 聚合运算符与嵌入文档的 id 匹配？

> ID：16035309
> 
> 赞同：0
> 
> 时间：2013-04-16T10:58:46.973
> 
> 标签：node.js, mongodb, mongodb-query, database

**场景**：考虑 MongoDB 中名为“MyCollection”的集合中的文档

```
 {
         "_id" : ObjectId("512bc95fe835e68f199c8686"),
         "author": "dave",
         "score" : 80,
         "USER" : {
                   "UserID": "Test1",
                   "UserName": "ABCD"
                  }
       },
       { "_id" : ObjectId("512bc962e835e68f199c8687"),
         "author" : "dave",
         "score" : 85,
         "USER" : {
                   "UserID": "Test2",
                   "UserName": "XYZ"
                  }
       },
       ... 
```

我知道`UserID`并希望基于此获取。

**问题**：我使用 Node.js + MongoDB-native 驱动程序尝试了以下代码：

```
 db.Collection('MyCollection', function (err, collection) {
        if (err) return console.error(err); 
        collection.aggregate([
                         { $match: { '$USER.UserID': 'Test2'} }, 
                        {$group: {
                            _id: '$_id' 
                        }
                    },
                        {
                            $project: {
                                _id: 1 
                            }
                        }
                      ], function (err, doc) {
                          if (err) return console.error(err);
                          console.dir(doc); 
                      });
           }); 
```

但它没有按预期工作。

**问题**：谁能知道如何`$match`在 MongoDB 查询中对运算符执行相同操作？

* * *

**更新**：我没有收到任何错误。但是对象将是空白的，即`[]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:38:12.627

我在 shell 中尝试过，但您的`$match`陈述是错误的 - 在 shell 中尝试

```
> db.MyCollection.find()
{ "_id" : ObjectId("512bc95fe835e68f199c8686"), "author" : "dave", "score" : 80, "USER" : { "UserID" : "Test1", "UserName" : "ABCD" } }
{ "_id" : ObjectId("512bc962e835e68f199c8687"), "author" : "dave", "score" : 85, "USER" : { "UserID" : "Test2", "UserName" : "XYZ" } }
> db.MyCollection.aggregate([{$match: {"$USER.UserID": "Test2"}}])
{ "result" : [ ], "ok" : 1 }
> db.MyCollection.aggregate([{$match: {"USER.UserID": "Test2"}}])
{
    "result" : [
        {
            "_id" : ObjectId("512bc962e835e68f199c8687"),
            "author" : "dave",
            "score" : 85,
            "USER" : {
                "UserID" : "Test2",
                "UserName" : "XYZ"
            }
        }
    ],
    "ok" : 1
} 
```

所以完整的聚合将是：

```
db.MyCollection.aggregate([
  {$match: {"USER.UserID": "Test2"}},
  {$group: {"_id": "$_id"}},
  {$project: {"_id": 1}}
]) 
```

（您不需要额外的`$project`，因为您只在项目`_id`中进行项目，`$group`但同样`_id`是独一无二的，您应该只拥有`$project`并删除`$group`）

# python - 从python中的随机点绘制的随机定向线

> ID：16035313
> 
> 赞同：1
> 
> 时间：2013-04-16T10:58:54.740
> 
> 标签：python, random, line, intersection, turtle-graphics

我正在尝试创建具有几条垂直线的python程序，这些垂直线充当随机生成的点或“点”（如代码中所指）以随机程度绘制直线的边界。如果直线与垂直“边界”之一相交，我想让它改变颜色。我有一张我正在努力实现的目标的图片，这可能会更清楚地解释我的情况。我在下面发布的代码绘制了“垂直边界”并在该区域内随机生成了点，但这就是我卡住的地方。

我的目标是：

[程序示例](http://i.stack.imgur.com/ofd7f.png)

我目前的代码：

```
setup(750,750)
screen_size = 750
max_coord = (screen_size - 30) / 2
### change the number of dots you have via that variable
num_dots = 500
bgcolor('yellow')
dot_size=5

reset() # Create an empty window 
pi = Turtle()
hideturtle()

def parallel_lines(number):
    pi.pensize(2)
    pi.pencolor('black')
    width = pi.window_width()
    height = pi.window_height()
    pi.setheading(90)
    pi.penup()
    pi.setposition(width/-2, height/-2)
for i in range(1, number +2):
    pi.pendown()
    pi.forward(height)
    pi.penup()
    pi.setposition(width/-2+i*(width/(number+1)),height/-2)
parallel_lines(7)

## centre turtle back in the middle of the page
goto(0,0)

### list to hold the dots
x_coords = []
y_coords = []
### Draw the dots via randomint

penup()
color("blue")
for dot_num in range(num_dots):
    dot_pos_x = randint (-max_coord, max_coord)
    dot_pos_y = randint (-max_coord, max_coord)
    goto(dot_pos_x, dot_pos_y)
    dot(dot_size)
    x_coords.append(dot_pos_x)
    y_coords.append(dot_pos_y)

done() 
```

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-11T04:26:51.747

这是OP描述的程序的实现。如果有一条线相交，它会使用 Python 3 turtle 的*撤消*功能来移除这条线并以备用颜色重新绘制它：

```
from turtle import Turtle, Screen
from random import randint, randrange

SCREEN_SIZE = 750
PLANK_COUNT = 8
PINHEAD_SIZE = 5

FLOOR_COLOR = "yellow"
DEFAULT_COLOR = "blue"
CROSSING_COLOR = "red"

screen = Screen()
screen.setup(SCREEN_SIZE, SCREEN_SIZE)
screen.bgcolor(FLOOR_COLOR)

# configure numbers to replicate Lazzarini's setup

NUMBER_PINS = 3408
PIN_LENGTH = 78.125
PLANK_WIDTH = screen.window_width() / PLANK_COUNT

def parallel_lines(turtle, width, height):

    turtle.penup()
    turtle.setheading(90)

    turtle.sety(height / -2)

    x_coordinates = []

    for i in range(PLANK_COUNT + 1):
        x = i * PLANK_WIDTH - width / 2

        turtle.setx(x)
        turtle.pendown()
        turtle.forward(height)
        turtle.penup()
        turtle.left(180)

        x_coordinates.append(x)

    return x_coordinates

pi = Turtle(visible=False)
pi.speed("fastest")

x_coordinates = parallel_lines(pi, screen.window_width(), screen.window_height())

def crosses(x0, x1, coordinates):
    for coordinate in coordinates:
        if x0 <= coordinate <= x1 or x1 <= coordinate <= x0:
            return True
    return False

previous_crossings = crossings = 0

max_coord = screen.window_width() / 2

for pin in range(NUMBER_PINS):
    x0, y0 = randint(-max_coord, max_coord), randint(-max_coord, max_coord)

    pi.color(DEFAULT_COLOR)
    pi.goto(x0, y0)
    pi.dot(PINHEAD_SIZE)
    pi.setheading(randrange(360))
    pi.pendown()
    pi.forward(PIN_LENGTH)

    if crosses(x0, pi.xcor(), x_coordinates):
        pi.undo()
        pi.color(CROSSING_COLOR)
        pi.dot(PINHEAD_SIZE)
        pi.forward(PIN_LENGTH)

        crossings += 1

    pi.penup()

    if previous_crossings != crossings:
        estimate = (2 * PIN_LENGTH * pin) / (PLANK_WIDTH * crossings)
        print(estimate)
        previous_crossings = crossings

screen.exitonclick() 
```

**现在讲故事的其余部分。** OP 没有提到的是，这是地板上的木板图，我们在上面放针，跟踪地板上有多少交叉线，作为估计 PI 值（π ）！

阅读有关[布冯的针](https://en.wikipedia.org/wiki/Buffon's_needle)的详细信息。要点是引脚穿过线的概率是 PI 的函数，因此我们可以将等式反过来，删除实际（或虚拟）引脚，以估计 PI。

[![在此处输入图像描述](https://i.stack.imgur.com/2JBn3.png)](https://i.stack.imgur.com/2JBn3.png)

该程序基于到目前为止丢弃的引脚将 PI (π) 的运行估计值输出到控制台：

```
...
3.121212121212121
3.1215970961887476
3.1370772946859904
3.134418324291742
3.131768953068592
3.1381381381381384
3.1384892086330933
3.1358467983243568
3.1451612903225805
3.1454979129397733
3.1458333333333335
3.1491384432560903
3.1465005931198102
3.1438721136767316
3.144208037825059
3.144542772861357
3.1419316843345113 
```

# c# - C# 发送 .htm 电子邮件模板

> ID：16035316
> 
> 赞同：0
> 
> 时间：2013-04-16T10:58:59.240
> 
> 标签：c#, email, smtp

使用下面的简单 SMTP C# 代码发送电子邮件，我如何发送电子邮件模板？

```
 System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
    message.To.Add(toEmailAddress);
    message.Subject = "subject";
    message.From = new System.Net.Mail.MailAddress(from);
    message.Body = "http://www.yoursite.com/email.htm";
    message.IsBodyHtml = true;
    System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("server");
    smtp.Send(message); 
```

目前，正如预期的那样，收到的电子邮件仅包含模板的 URL。我怎样才能让它发送模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:11:03.900

```
System.Net.WebClient client = new System.Net.WebClient();
string html = client.DownloadString("http://www.yoursite.com/email.htm");

System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
message.To.Add(toEmailAddress);
message.Subject = "subject";
message.From = new System.Net.Mail.MailAddress(from);
message.Body = html;
message.IsBodyHtml = true;
System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("server");
smtp.Send(message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:11:35.623

您的问题实际上是关于从 url 读取字符串，可能的答案之一是：

```
var url = "http://www.yoursite.com/email.htm";
var body = "";

using(var client = new WebClient()) {
   body = client.DownloadString(url);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T15:11:59.133

如果文件是本地文件，而不是使用下载，您可以简单地使用 System.IO 读取它，例如

```
 string html;
    System.IO.StreamReader fstream;
    fstream = File.OpenText("yourpathgoeshere.html");
    html = fstream.ReadToEnd();
    fstream.Close(); 
```

在此之后，只需按照其他帖子中的建议分配其余属性。如果你要的html文件存储在本地，这可能会更好，或者如果它会被频繁访问，那么将它存储在本地并使用这种方法可能会更好。

请注意，您需要导入 System.IO 才能正常工作。

# perl - Perl LWP::UserAgent 请求不使用 http1.1 返回但使用 http1.0 工作正常！？为什么？

> ID：16035324
> 
> 赞同：2
> 
> 时间：2013-04-16T10:59:27.223
> 
> 标签：perl, openssl, lwp, lwp-useragent, http-1.1

我有一个非常简单的脚本（在 SLES11 系统上）将 http1.1 请求发送到服务器。这工作了很长时间。几天后它停止工作。我不知道为什么。经过一番调查，我发现强制脚本使用 http1.0 它又可以工作了。我不知道为什么。我想知道为什么它不能在默认的 http1.1 模式下工作。

据我所知，我已经启用了调试（请参见下面的代码）。但我什么也没看到——我的脚本挂了。没有网络活动。我看不到一个套接字将是openend（netstat -a），我也看不到服务器上来自我的客户端的任何传入流量。（“telnet myserver myport”工作正常。）

有人可以帮我解决这个问题吗？如何启用更多调试以查看真正的问题在哪里？

```
#!/usr/bin/perl -w

use strict;
use warnings;
use Data::Dumper;
use HTTP::Request::Common;
use LWP::Debug qw(+);
use LWP::UserAgent;

# Workaround: forcing http1.0 instead of using http1.1, it works again!
use LWP::Protocol::https10 ();
LWP::Protocol::implementor('https', 'LWP::Protocol::https10');
# EO workaround

my $ua        = LWP::UserAgent->new;
$ua->ssl_opts( verify_hostname => 0 );
my $response  = $ua->request(
    POST 'https://myuser:mypassword@myserver:8888/service/myservice',
    Connection   => 'close',     # Edit: added, see comments below
    Content_Type => 'text/xml',
    Content      => '... my content ...'
); 
```

$ua->request() 不返回！我需要杀死/^C 脚本！

编辑：好的，似乎没有人知道如何继续。所以我开始使用 perl 调试器调试它。

```
LWP::UserAgent::post(/usr/lib/perl5/site_perl/5.10.0/LWP/UserAgent.pm:418):
418:        return $self->request( HTTP::Request::Common::POST( @parameters ), @suff ); 
```

所以我可以看到它没有从 request() 返回。

无论如何，由于`LWP::UserAgent`调用`HTTP::Request::Common`我将上面的示例代码更改回用于`HTTP::Request::Common`在调试时跳过该步骤的事实。

好的...新结果：

```
LWP::Protocol::implementor(/usr/lib/perl5/site_perl/5.10.0/Net/HTTPS.pm:26):
26:         eval { require IO::Socket::SSL; }; 
```

在 request() 里面它挂在`IO::Socket::SSL`. 意味着，此*脚本*足以进行进一步调试：

```
#!/usr/bin/perl
require IO::Socket::SSL; 
```

此声明不会回来。

再往下，里面`IO::Socket::SSL`挂着：

```
IO::Socket::SSL::CODE(0x1274370)(/usr/lib/perl5/site_perl/5.10.0/IO/Socket/SSL.pm:92):
92:             Net::SSLeay::SSLeay_add_ssl_algorithms(); 
```

啊啊啊！已经有一个关于这个问题的错误报告：[Net-SSLeay 挂在 Suse 11 P2 上，](https://rt.cpan.org/Public/Bug/Display.html?id=83890)指向[错误 #81575](https://rt.cpan.org/Public/Bug/Display.html?id=81575)，上面写着：

> 我在安装了 openssl-0.9.8j 的 SLES 11 SP2 上遇到了同样的问题。升级到 openssl-0.9.8r 确实解决了这个问题。... 0.9.8r 的包可以在这个存储库中找到：http: [//download.opensuse.org/repositories/security :/fips/](http://download.opensuse.org/repositories/security:/fips/)

猜就是了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:10:23.697

已经有一个关于这个问题的错误报告：[Net-SSLeay 挂在 Suse 11 P2 上，](https://rt.cpan.org/Public/Bug/Display.html?id=83890)指向[错误 #81575](https://rt.cpan.org/Public/Bug/Display.html?id=81575)，上面写着：

我在安装了 openssl-0.9.8j 的 SLES 11 SP2 上遇到了同样的问题。升级到 openssl-0.9.8r 确实解决了这个问题。... 0.9.8r 的包可以在这个存储库中找到：http: [//download.opensuse.org/repositories/security :/fips/](http://download.opensuse.org/repositories/security:/fips/)

猜就是了！

# android-tabhost - Android 如何在 Android 3.0 plus 中获取带有图标和文本的选项卡

> ID：16035326
> 
> 赞同：1
> 
> 时间：2013-04-16T10:59:33.483
> 
> 标签：android-tabhost, android-tabs, android-tablelayout, android-tabactivity

我正在使用 sdk 最低版本 API 11 开发 Android 选项卡，目标是 API 17。我编写了这样的代码。

```
public class MainScreenActivity extends TabActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_screen);  

        TabHost tabHost = getTabHost();

        Intent homeIntent = new Intent(this, HomeScreenView.class);

        tabHost.addTab(tabHost.newTabSpec("Home")
                .setIndicator("Home", getResources().getDrawable(R.drawable.home_states))
                .setContent(homeIntent));

    }
} 
```

我正在使用这样的标准 Tab xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_alignParentBottom="true" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </RelativeLayout>
</TabHost> 
```

我没有得到选项卡的图标，并且选项卡文本也以大写字母显示。如果我设置 sdkminVersion 8 并删除目标，那么它可以正常工作。请帮帮我。

# java - x分钟后如何关闭活动？

> ID：16035328
> 
> 赞同：0
> 
> 时间：2013-04-16T10:59:36.207
> 
> 标签：java, android

我正在寻找在 x 分钟后关闭已打开活动的最简单方法。android提供倒计时课程还是我必须自己做一个？

我已经尝试过这段代码，但它不起作用

```
Thread isOnDisplayThread = new Thread(new Runnable() {
            @Override
            public void run() {
                Timer mTimer = new Timer();
                mTimer.schedule(new TimerTask() {    
                    @Override
                    public void run() {
                        Log.d(TAG, (isApplicationOnDisplay) ? "Application on display" : "APPLICATION ON BACKGROUND");

                        if (!isApplicationOnDisplay) {
                            notOnDisplayTime++;
                            if (notOnDisplayTime >= 10) {

                                Process.killProcess(Process.myPid());
                            }
                        } else {
                            notOnDisplayTime = 0;
                        }
                    }
                }, 0, 1000);
            }
        });

        isOnDisplayThread.run(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:04:34.103

```
Handler handler = new Handler();
    Runnable r=new Runnable() {
              @Override
              public void run() {
                finish();
              }         
            };
        handler.postDelayed(r, 2000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T11:01:50.780

永远永远永远*调用`run()`Java 的方法`Thread`。调用它的`start()`方法，这会导致 Java*在新线程*`run()`中为您调用它的方法。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T11:01:47.050

馊主意：

> Process.killProcess(Process.myPid());

您应该在 UI 线程中调用 finish() 函数。例如，使用 runOnUiThread()：[链接](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T11:03:59.277

它不起作用，因为您正在调用 run 方法。它不会启动线程。所以需要调用start方法来调用线程

```
 isOnDisplayThread.start(); 
```

还要完成你需要调用的线程

```
 finish() ///method of the Activity class 
```

如果代码在 Activity 类中，则只需调用 finish() 方法

```
 if (notOnDisplayTime >= 10) {

            finish();
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T11:14:08.093

```
private final long startTime = 200000;
private final long interval = 1000;
countDownTimer = new MalibuCountDownTimer(startTime, interval);
    countDownTimer.start();
public class MalibuCountDownTimer extends CountDownTimer{
        public MalibuCountDownTimer(long startTime, long interval){
            super(startTime, interval);
        }
            @Override
            public void onFinish(){
                txttimer.setText("Time's up!");                 
                    //timeElapsedView.setText("Time Elapsed: " + String.valueOf(startTime));
            }
            @Override
            public void onTick(long millisUntilFinished) {
                    //text.setText("Time remain:" + millisUntilFinished);
                    //timeElapsed = startTime - millisUntilFinished;
                    String format = String.format("%%0%dd",2);  
                    String seconds = String.format(format, millisUntilFinished/1000 % 60);  
                     String minutes = String.format(format, (millisUntilFinished /(1000*60))%60);  
                     String hours = String.format(format, (millisUntilFinished /(1000*60*60))%24);  
                     String time =  hours + ":" + minutes + ":" + seconds;  
                     txttimer.setText("Time Remaining:" + time);
                            TimeUnit.MILLISECONDS.toMinutes(timeElapsed) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(timeElapsed)),
                            TimeUnit.MILLISECONDS.toSeconds(millis) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(timeElapsed)));
                    System.out.println(hms);
                    //text.setText("Time remain:" + h+":"+m+":"+s);
                    //timeElapsedView.setText("Time Elapsed: " + String.valueOf(timeElapsed));   
                }
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T11:04:19.477

简单的使用`Handler.postDelayed`方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T11:03:01.287

声明 Timer 和 Call `finish()`。它将在一定时间后关闭您的活动。

```
 //Declare the timer
  Timer t = new Timer();
  //Set the schedule function and rate
  t.schedule(new TimerTask() {

@Override
public void run() {
     finish(); 
}

 },
  //Set how long before to start calling the TimerTask (in milliseconds)
0,
//Set the amount of time between each execution (in milliseconds)
 1000); 
```*

# ef-code-first - 如何从头开始删除和重新创建现有的 EF Code First 数据库

> ID：16035333
> 
> 赞同：98
> 
> 时间：2013-04-16T10:59:59.043
> 
> 标签：ef-code-first, entity-framework-migrations

我在 VS 2012 中使用 EF Code First 和 EF 5。我使用 PM`update-database`命令，并且我有一个简单的种子方法来用示例数据填充一些表。

我想删除并重新创建我的 x.mdb。更新历史似乎不同步。如果我在我的上下文中注释掉我的所有 DBSet，`update-database`运行时不会出错，但会在数据库中留下一些表。由于我在数据库中没有有价值的数据，因此重置所有内容似乎是最简单的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-18T12:05:41.817

如果我理解正确...

如果你想`start clean`：

1）**手动删除您的数据库**-无论它在哪里（我假设您已对连接进行排序），或将其清空，但更容易/更安全的是将其全部删除-因为有`system __MigrationHistory`表-您也需要将其删除。

2）**删除所有`migration files`**- 下`Migrations`- 并命名为数字等 - 将它们全部删除，

3）**重建**包含迁移（和其余部分）的项目 - 并确保您的项目设置（配置）以自动构建（有时可能会导致问题 - 但不太可能），

4）`Add-Migration Initial`再次运行 - 然后`Update-Database`

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-02-25T10:52:48.123

如果您使用该命令以正确的方式创建迁移，`Add-Migration "Name_Of_Migration"`那么您可以执行以下操作以获得一个*干净的开始*（重置，**当然会丢失数据**）：

1.  `Update-database -TargetMigration:0`

    通常，由于执行了 down 方法，您的数据库现在是空的。

2.  `Update-database`

    这会将您的数据库重新创建到您当前的迁移中

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2018-06-02T13:44:41.130

对于 EntityFrameworkCore，您可以使用以下内容：

```
Update-Database -Migration 0 
```

这将从数据库中删除所有迁移。然后你可以使用：

```
Remove-Migration 
```

删除您的迁移。最后，您可以重新创建迁移并将其应用于数据库。

```
Add-Migration Initialize
Update-Database 
```

在 EFCore v2.1.0 上测试

对于 dotnet ef CLI 工具也是如此：

```
dotnet ef database update 0 [ --context dbcontextname ]
dotnet ef migrations add Initialize
dotnet ef database update 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2015-09-27T14:14:29.573

从包管理器控制台删除、创建和播种的单行：

```
update-database -TargetMigration:0 | update-database -force 
```

卡布姆。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-09T07:15:29.770

怎么样 ..

```
static void Main(string[] args)
{
    Database.SetInitializer(new DropCreateDatabaseIfModelChanges<ExampleContext>());  
    // C
    // o
    // d
    // i
    // n
    // g
} 
```

我从[Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) , Pg 28 First Edition 中选择了这个。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-11-14T17:45:51.537

删除数据库或更新现有数据库的方法有很多，只需切换到以前的迁移即可。

```
dotnet ef database update previousMigraionName 
```

但是某些数据库有限制，例如在创建关系后不允许修改，这意味着您没有权限从 ef 核心数据库提供程序中删除列，但大多数时间在 ef 核心删除数据库中是允许的。所以您可以使用 drop 命令删除数据库，然后您再次使用以前的迁移。

```
dotnet ef database drop
PMC command 
PM> drop-database 
```

或者您可以手动删除数据库并进行迁移。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-08T16:10:24.017

如果您按照本教程创建了数据库：[https ://msdn.microsoft.com/en-au/data/jj193542.aspx](https://msdn.microsoft.com/en-au/data/jj193542.aspx)

...那么这可能会起作用：

1.  删除项目目录中的所有`.mdf`和`.ldf`文件
2.  转到查看/SQL Server 对象资源管理器并从 (localdb)\v11.0 子节点中删除数据库。另请参阅[https://stackoverflow.com/a/15832184/2279059](https://stackoverflow.com/a/15832184/2279059)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-12T16:02:35.360

dbctx.Database.EnsureDeleted(); dbctx.Database.EnsureCreated();

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-06-19T14:08:40.313

将 EF6 与 ASP.Net Core 5 一起使用，我发现在数据库的第一次初始化期间这些命令很方便：

```
Remove-Migration -force; Add-Migration InitialMigration; Update-Database; 
```

它删除最后一次迁移（应该是唯一的），再次创建它，然后刷新数据库。`Package Management Console`因此，您可以在编辑后将这三个命令在一行中输入`DbContext`，它将更新`InitialMigration`和数据库。

有点烦人的是它会连续编译你的项目三次，但至少不需要进一步的手动步骤（比如删除迁移文件）。

* * *

当您删除实体时，您需要`Remove-Database`在更新之前发出。所以这条线变成了：

```
Remove-Migration -force; Add-Migration InitialMigration; Remove-Database; Update-Database; 
```

这里有问题：您需要确认删除数据库 + 4 次重建。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-02-17T15:34:04.697

我正在使用 .net Core 6，此代码直接从 Program.cs 中删除

```
using Microsoft.EntityFrameworkCore;

namespace RandomProjectName
{
    public class Program
    {
        public static async Task<int> Main(string[] args)
        {
            var connectionString = "Server=YourServerName;Database=YourDatabaseName;Integrated Security=True;";

            var optionsBuilder = new DbContextOptionsBuilder<YourDataContext>();
            optionsBuilder.UseSqlServer(connectionString);

            var db = new YourDataContext(optionsBuilder.Options);
            db.Database.EnsureDeleted();
            db.Database.Migrate();
        }
    }
} 
```

您至少应该进行初始迁移才能使其正常工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-06T12:58:25.850

采取以下步骤：

1.  删除那些应该从上下文中删除的对象 //`Dbset<Item> Items{get;set;}` 并在 Nuget 控制台中运行这些命令
2.  添加迁移 [contextName]
3.  更新数据库-详细

它将删除上下文中不存在但已在数据库中创建的表

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-25T13:51:32.733

让我在这里帮助更新答案，因为新用户会发现它很有用。我相信目的是删除数据库本身并使用 EF Code First 方法重新创建它。1.使用“.sln”扩展名在 Visual Studio 中打开您的项目。2.选择Server Explorer（经常在左边） 3.选择SQL Server Object Explorer。4.您要删除的数据库将列在任何localDB下。右键单击它并选择删除。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2020-05-28T16:11:57.203

由于新的 EF Core 用户有一天会点击这个问题，而且我发现最重要的答案有些不必要的破坏性，因此我将向您展示一种“重新开始”的方法。请注意，这会删除您的所有数据。

1.  删除 MS SQL 服务器上的所有表。同时删除 __EFMigrations 表。
2.  类型`dotnet ef database update`
3.  EF Core 现在将从零开始重新创建数据库，直到您最近一次迁移。

# asp.net-mvc-4 - MvcSiteMapProvider 不根据 RouteData 解析

> ID：16035336
> 
> 赞同：2
> 
> 时间：2013-04-16T11:00:07.933
> 
> 标签：asp.net-mvc-4, sitemap, mvcsitemapprovider, routedata

我正在尝试将 MvcSiteMapProvider 与 MVC 4 站点一起使用，并且在具有（例如）项目**列表**页面和子项目**详细信息**页面的站点部分中遇到问题。

当您访问详细信息页面时，从列表中选择的实体的 ID 在 URL 中指定，例如： `~/Project/2/Detail`

我没有将详细信息页面设置为动态节点，因为我不希望站点地图提供程序提供任何增强的功能。本质上，我希望站点地图提供程序*忽略*URL 参数，`projectID`并且始终只映射到 Detail 操作。

不幸的是，我遇到了以下问题：

*   如果应用程序以针对列表页面的第一个请求开始，则用户可以单击进入任何项目，并且站点地图与详细信息页面匹配得很好。
*   如果应用程序以对 Detail 页面的请求开始，则 SiteMap 仅在 URL 包含第一个请求的 ProjectID 时匹配 Detail 页面，即如果您访问任何其他 Project，则 SiteMap currentnode 为空。

我曾尝试禁用缓存，启用长时间缓存，甚至一直在挖掘源代码但没有成功。不一致的行为表明这是一个错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:53:58.790

此问题已解决。

请参阅 MvcSiteMapProvider 的 github 上的线程：

[https://github.com/maartenba/MvcSiteMapProvider/issues/154](https://github.com/maartenba/MvcSiteMapProvider/issues/154)

# jquery - 水平列表或可以根据视口大小滑动的列表

> ID：16035337
> 
> 赞同：0
> 
> 时间：2013-04-16T11:00:12.417
> 
> 标签：jquery, html, css

我目前正在尝试创建一个有水平列表的网站。在正常视口中，我希望它们彼此相邻分组，但是一旦视口达到某个阈值，我希望列表成为轮播。这可能吗？过去几个小时我一直在寻找可能的解决方案，但找不到任何适合我需要的东西。

下图展示了我需要它做什么。

[http://i.stack.imgur.com/4XqZI.png](http://i.stack.imgur.com/4XqZI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:41:44.983

您可以使用 jQuery 来查询视口大小，然后如果您处于较小的尺寸之一，则加载一个为它们设置动画的函数。

它会涉及一些 CSS，例如将您的元素说成浮动（`float:left;`等）并绝对定位它们，以便它们都在同一个位置 - 如果您愿意，您可以然后交叉淡入淡出。另一种方法是让它们从可见区域进入。

然后在较小的尺寸下，您只需要调用轮播函数来更改页面的 CSS 和一个函数来为其设置动画。

# c# - 如何在 ASP.NET 的更多网页中拆分 Gridview？

> ID：16035340
> 
> 赞同：0
> 
> 时间：2013-04-16T11:00:22.397
> 
> 标签：c#, asp.net, gridview, webpage

我想知道如何在**ASP.NET中使用****GridView**从我的数据库中打印出一个表，例如：

 **```
SqlCommand command = new SqlCommand("SELECT * FROM PERSOANE", myConn);
SqlDataAdapter sqlDA = new SqlDataAdapter(command);

DataSet ds = new DataSet();
sqlDA.Fill(ds, "PERSOANE");

GridView.AutoGenerateColumns = true;
GridView.DataSource = ds;
GridView.DataBind(); 
```

但我想将**它跨越页面**，所以如果数据库包含**1000 个条目**，则应该有**100 个页面**，每页有**10 个条目**，但我不想手动（或就此而言以编程方式）制作页面，而是发送页面中需要的信息，例如 www.domainname.domain/LoadView.aspx?page=2 ，但**我不知道如何告诉网格视图负载从第 10 项到第 20 项**。这就是我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:02:27.590

您可以尝试设置 gridview 的 GridViewSample.PageIndex = 2 ；或任何值（page=2），您将其作为 QueryString 传递。**

# wolfram-mathematica - 柯西主值和 Kramers-Kronig 关系

> ID：16035345
> 
> 赞同：1
> 
> 时间：2013-04-16T11:00:45.930
> 
> 标签：wolfram-mathematica

我正在摆弄 Kramers-Kronig 关系，为此我需要使用 Principal Value。我有以下笔记本，我在其中获取色散`disp`并使用 Kramers-Kronig 关系从中找到吸收。

当我将得到的吸收与吸收的解析表达式进行比较时，我发现归一化后的宽度不一样——它们应该是一样的。是否有我缺少的设置/参数？

```
\[CapitalGamma] = 50 10^3;
disp[\[CapitalDelta]_] := 
  1/\[Pi] \[CapitalDelta]/(\[CapitalDelta]^2 + (\[CapitalGamma]/(4 \
\[Pi]))^2/4);
abs[\[CapitalDelta]_] := 
  1/\[Pi] (\[CapitalGamma]/(4 \[Pi]))/(\[CapitalDelta]^2 + (\
\[CapitalGamma]/(4 \[Pi]))^2);

absKK[\[CapitalDelta]_] := -NIntegrate[disp[x]/(
     x - \[CapitalDelta]), {x, -Infinity, \[CapitalDelta], Infinity}, 
     Method -> PrincipalValue, Exclusions -> Automatic, 
     MaxRecursion -> 100] // Quiet;

max = \[CapitalGamma];
step = 100;

absVals = {}; dispVals = {};
For[i = -step, i < step + 1, i++,
  \[Delta] = max*i/step;
  absVals = Append[absVals, {\[Delta], absKK[\[Delta]]}]];

Show[
 ListLinePlot[absVals, PlotRange -> Full, PlotStyle -> {Red, Dashed}],
 Plot[-6.5 abs[\[CapitalDelta]], {\[CapitalDelta], -\[CapitalGamma], \
\[CapitalGamma]}, PlotRange -> Full]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:30:25.770

我不确定你的吸收分析表达式是从哪里得到的，但它可能是错误的吗？如果换成`\Delta`问题`2 \Delta`好像解决了

```
1/\[Pi] (\[CapitalGamma]/(4 \[Pi]))/((2 \[CapitalDelta])^2 + (\[CapitalGamma]/(4 \[Pi]))^2); 
```

# html - 一个部分在 JSF 中应该如何显示？HTML5 还是 XHTML？

> ID：16035349
> 
> 赞同：14
> 
> 时间：2013-04-16T11:00:55.297
> 
> 标签：html, jsf, browser, jsf-2, doctype

这只是我现在的好奇心。例如，在 Eclipse 中，这是在*New Facelet 模板*`<head>`上定义的部分，但对于大多数模板来说，都是一样的：

 *```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
  ..
</head> 
```

我想在上面使用更*清晰*的代码，所以我改为：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
  ..
</head> 
```

它在开发中运行良好，但我想知道这种方法是否会在未来通过许多浏览器或设备（移动设备）产生任何问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T11:24:22.850

那是 HTML5 文档类型，它应该在所有浏览器中都能正常工作，包括 IE6。

JSF 被正式指定为生成符合 XHTML 1.0 的标记（[在](http://java.net/jira/browse/JAVASERVERFACES-433)实现中[只有](http://java.net/jira/browse/JAVASERVERFACES-1450)少数违规行为在 JSF 2.2 中得到修复和/或可由上下文参数管理）。JSF 在设计上不能产生非 XML sytnax（例如`<br>`代替`<br/>`），因此旧的 HTML4 文档类型与 JSF 产生的 HTML 输出决不兼容（也就是说，当您尊重标准和/或害怕[W3 验证器](http://validator.w3.org/)时；但是，如果不是所有的浏览器都非常宽容）。与旧的 HTML4 文档类型相反，HTML5 文档类型允许 XML 语法，因此与 XHTML 文档类型兼容。因此，JSF 页面可以使用 HTML5 文档类型进行创作。

doctype 仅对 webbrowser 如何解释和呈现 HTML 标记很重要（在您的特定情况下由 JSF 生成，但 HTML 不一定需要由 JSF 生成，因此浏览器的呈现在技术上与 JSF 完全无关）。尤其是 Microsoft IE 在某些 doctype 方面存在重大问题，或者完全没有 doctype。[在此页面的底部，](http://hsivonen.iki.fi/doctype/#handling)您可以找到结合某些文档类型的浏览器行为的简明概述。有以下三种标准行为：

*   Q - 怪癖模式。你真的不想拥有那个。它会触发IE 中的[框模型错误](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)。CSS`width`然后`height`错误地覆盖了`padding`and `border`。
*   A - 几乎标准模式。经济实惠，只有表格单元格的垂直尺寸不符合 CSS2 规范。如果您想避免[表格单元格中图像的神秘间隙，](https://developer.mozilla.org/en/images,_tables,_and_mysterious_gaps)这很有用。
*   S - 标准模式。浏览器尝试完全符合 w3 HTML/CSS 标准。首选模式，因为它是唯一一种模式，您可以或多或少地确定您的网站在所有浏览器中看起来都完全相同。

在您的特定情况下，随着从 XHTML 1.0 过渡文档类型到 HTML5 文档类型的更改，Firefox、Chrome、Safari 和 IE>=8 将从“A”变为“S”。因此，如果您想要一个像素完美的设计，您绝对应该查看浏览器对您网站的展示，以了解表格单元格中的图像填充。

关于文档类型在 IE 中的重要性，这里有一段 HTML 演示了 IE6-9 中“Q”触发的盒子模型错误（注意，这不再在 IE10 中体现）：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Remove DOCTYPE to trigger quirksmode</title>
        <style>
            #box { 
                background: yellow; 
                width: 100px;
                padding: 20px; 
                border: 20px solid black; 
                margin: 20px;
            }
        </style>
    </head>
    <body>
        <div id="box">box</div>
    </body>
</html> 
```

复制'n'粘贴'n'运行它。现在`<!DOCTYPE html>`，您将看到一个矩形。如果没有 doctype 行，您将看到一个真正的正方形（在 IE10 中，您需要在 webdeveloper 工具集中（按 F12）将“浏览器模式”更改为例如 IE9 才能看到它）。

![在此处输入图像描述](https://i.stack.imgur.com/WPpKQ.png)

### 也可以看看：

*   [JavaServer Faces 2.2 和 HTML5 支持，为什么还在使用 XHTML](https://stackoverflow.com/questions/19189372/javaserver-faces-2-2-and-html5-support-why-is-xhtml-still-being-used)
*   [是否可以在 HTML 4/5 中使用 JSF+Facelets？](https://stackoverflow.com/questions/2935759/is-it-possible-to-use-jsffacelets-with-html-4-5)
*   [我应该从 HTML 还是 XHTML 开始？](https://stackoverflow.com/questions/1989500/should-i-start-with-html-or-xhtml/1989527#1989527)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:16:48.003

最好的解决方案是在索引模板中只使用一次详细声明，并在其中包含标题和正文模板。如果这不可能，您可以离开此声明。这是“标准”，但不是真正必要的！*

# sql-server - 使用 patindex 在 select 语句中将 varchar 转换为 int

> ID：16035350
> 
> 赞同：1
> 
> 时间：2013-04-16T11:00:56.813
> 
> 标签：sql-server, casting, substring, patindex

我的查询是将 varchar 转换为字符串，

```
select top(5)'Insert into jobs(minexperience,maxexperience)values('+

cast(substring(Experience as varchar(50)),0,patindex('%to%',Experience))*365*24*60*60,

cast(substring(Experience as      

varchar(50)),patindex('%to%',Experience)+2,patindex('%Years%',Experience)-patindex('%to%',Experience)-2)*365*24*60*60+')'

from requirementsdetailsfororganization 
```

在下面的查询中，我有一个错误**“关键字'AS'附近的语法不正确。”**

我想将字符串转换为整数。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:06:01.493

可能这对您有帮助-

```
SELECT TOP(5) 'INSERT INTO dbo.jobs(minexperience,maxexperience) VALUES(' +
    CAST(SUBSTRING(
          CAST(r.Experience AS VARCHAR(50))
        , 0
        , r.ToExperience) * 31536000 
    AS VARCHAR(50))

    + ',' +

    CAST(SUBSTRING(
          CAST(r.Experience AS VARCHAR(50))
        , r.ToExperience + 2
        , patindex('%Years%', r.Experience) - r.ToExperience - 2) * 31536000 
    AS VARCHAR(50))
+')'
FROM (
    SELECT 
          r.Experience
        , ToExperience = PATINDEX('%to%', r.Experience)
    FROM dbo.requirementsdetailsfororganization r
) r 
```

# php - 如果在 php 查询中没有选择，则选择所有复选框

> ID：16035353
> 
> 赞同：0
> 
> 时间：2013-04-16T11:01:09.250
> 
> 标签：php, checkbox

我有一个脚本，用户可以从数据库中找到练习，我有复选框供用户查找特定练习 当从每个复选框组中选择至少 1 个复选框时，该脚本可以正常工作，但是我希望如果没有选中任何复选框然后它将是所有复选框的结果。

我的复选框表单看起来像这样

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="criteria">
    <p><strong>MUSCLE GROUP</strong></p>
    <input type="checkbox" name="muscle[]" id="abdominals" value="abdominals"/>Abdominals<br />
    <input type="checkbox" name="muscle[]" id="biceps" value="biceps" />Biceps<br />
    <input type="checkbox" name="muscle[]" id="calves" value="calves" />Calves<br />
     ect...
    <br /><p><strong>EQUIPMENT (please select a least one)</strong></p>
    <input type="checkbox" name="equipment[]" id="equipment" value="bands"/>Bands<br />
    <input type="checkbox" name="equipment[]" id="equipment" value="barbell" />Barbell<br />
    <input type="checkbox" name="equipment[]" id="equipment" value="dumbbell" />Dumbbell<br />
     ect....
    <input type="submit" name="sub" value="Generate Query" />
    </form> 
```

这是我的脚本

```
 <?php

      if(isset($_POST['muscle']) && !empty($_POST['muscle'])){   
if(isset($_POST['equipment']) && !empty($_POST['equipment'])){   

//get the function
 include ($_SERVER['DOCUMENT_ROOT'] .'/scripts/functions.php');    
 $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
       $limit = 14;
       $startpoint = ($page * $limit) - $limit;

  // Runs mysql_real_escape_string() on every value encountered.
       $clean_muscle = array_map('mysql_real_escape_string', $_REQUEST['muscle']);
       $clean_equipment = array_map('mysql_real_escape_string', $_REQUEST['equipment']);

  // Convert the array into a string.
       $muscle = implode("','", $clean_muscle);
       $equipment = implode("','", $clean_equipment);

 $options = array();
       if(array($muscle))
       {
       $options[] = "muscle IN ('$muscle')";
       }
      if(array($equipment))
       {
      $options[] = "equipment IN ('$equipment')";
 }

      $fullsearch = implode(' AND ', $options);

      $statement = "mytable";
      if ($fullsearch <> '') {
      $statement .= " WHERE " . $fullsearch;
      }

     if(!$query=mysql_query("SELECT * FROM {$statement} LIMIT {$startpoint} , {$limit}"))
     {
     echo "Cannot parse query";
 }
 elseif(mysql_num_rows($query) == 0) {
 echo "No records found";
 }

else {
echo "";

while($row = mysql_fetch_assoc($query)) {
echo "".$row['name'] ."</br>           
            ".$row['description'] ."";
        }
    }
         echo "<div class=\"new-pagination\">";
        echo pagination($statement,$limit,$page);
        echo "</div>";
        }
    } 
```

我是 php 新手，所以我的代码可能不是最好的。如果有人可以帮助我或指出我正确的方向，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:07:10.653

好的-我想我已经弄清楚了。你是对的 - 主要问题在于你的`isset`和`isempty`电话。我在您的文件上创建了一些变体，这显示了正在发生的事情。注意 - 因为我没有你的一些“其他”功能，所以我只展示你的功能外部部分出了什么问题。

# 第 1 部分：验证函数

在下面的代码中，我在输入表单中添加了两个 JavaScript 函数；这些大致基于您在谷歌“JavaScript 验证复选框”时可以找到的脚本。该`oneBoxSet(groupName)`函数将查看所有文档元素；找到 type 的那些`checkBox`，看看其中一个是否被选中，如果是，则确认它属于`groupName`。目前，它返回“true”或“false”。调用函数`validateMe(formName)`运行您的验证。它是通过添加调用的

```
onclick="validateMe('criteria'); return false;" 
```

到`submit`按钮的代码。这基本上是说“用这个参数调用这个函数来验证表单”。在这种情况下，函数“修复”数据并提交；但是您可以想象它返回“false”，在这种情况下，提交操作将被取消。

在`validateMe`函数中，我们检查每组中是否至少有一个框被选中；如果不是，则相应地设置“all[]”组中的隐藏框。

我稍微更改了代码——它调用了一个不同的脚本（`muscle.php`）而不是`<?php echo $_SERVER['PHP_SELF']; ?>`你的......显然原理是一样的。

在此初始代码之后，我们将查看我添加的一些内容，`muscle.php`以确认您最初的问题是什么。

```
<html>
<head>
<script type="text/javascript">

// go through all checkboxes; see if at least one with name 'groupName' is set
// if so, return true; otherwise return false
function oneBoxSet(groupName)
{
    var c=document.getElementsByTagName('input');
    for (var i = 0; i<c.length; i++){
        if (c[i].type=='checkbox')
        {
           if (c[i].checked) {
             if (c[i].name == groupName) {
               return true; // at least one box in this group is checked
               }
           }
        }
    }
    return false; // never found a good checkbox
}

function setAllBoxes(groupName, TF)
{
    // set the 'checked' property of all inputs in this group to 'TF' (true or false)
    var c=document.getElementsByTagName('input');
    // alert("setting all boxes for " + groupName + " to " + TF);
    for (var i = 0; i<c.length; i++){
        if (c[i].type=='checkbox')
        {
            if (c[i].name == groupName) {
            c[i].checked = TF;
            }
        }
    }
    return 0;
}

// this function is run when submit is pressed:
function validateMe(formName) {
  if (oneBoxSet('muscle[]')) {
    document.getElementById("allMuscles").value = "selectedMuscles";
    //alert("muscle OK!");
    } 
  else { 
    document.getElementById("allMuscles").value = "allMuscles";
    // and/or insert code that sets all boxes in this group:
    setAllBoxes('muscle[]', true);
    alert("No muscle group was selected - has been set to ALL");
    }
  if (oneBoxSet('equipment[]')) {
    document.getElementById("allEquipment").value = "selectedEquipment";
    //alert("equipment OK!");
    }
  else  {
    document.getElementById("allEquipment").value = "allEquipment";
    // instead, you could insert code here that sets all boxes in this category to true
    setAllBoxes('equipment[]', true);
    alert("No equipment was selected - has been set to ALL");
    }
  // submit the form - function never returns
  document.forms[formName].submit();  
}

</script>
</head>

<body>
    <form action="muscle.php" method="post" name="criteria">
        <p><strong>MUSCLE GROUP</strong></p>
        <input type="checkbox" name="muscle[]" id="abdominals" value="abdominals"/>Abdominals<br />
        <input type="checkbox" name="muscle[]" id="biceps" value="biceps" />Biceps<br />
        <input type="checkbox" name="muscle[]" id="calves" value="calves" />Calves<br />
        <input type="hidden"   name="all[]" id="allMuscles" value="selectedMuscles" />
        etc...<br>
        <br /><p><strong>EQUIPMENT (please select a least one)</strong></p>
        <input type="checkbox" name="equipment[]" id="equipment" value="bands"/>Bands<br />
        <input type="checkbox" name="equipment[]" id="equipment" value="barbell" />Barbell<br />
        <input type="checkbox" name="equipment[]" id="equipment" value="dumbbell" />Dumbbell<br />
        <input type="hidden"   name="all[]" id="allEquipment" value="selectedEquipment" />
        <br>
        <input type="submit" name="sub" value="Generate Query" onclick="validateMe('criteria'); return false;" />
    </form>
</body>
</html> 
```

# 第 2 部分：PHP 出了什么问题？

现在这是 php 脚本的新开始。它检查您在原始脚本开始时测试的条件，并演示`if`如果未在其中一个组中设置复选框，您永远不会超过初始语句。我建议您完全放弃这些测试，而是从我编写的代码中获取灵感来解决任何问题。例如，您可以测试是否`equipmentAll`已`muscleAll`设置，并相应地创建适当的查询字符串。

```
<?php

    echo 'file was called successfully<br><br>';
    if(isset($_POST['muscle'])) {
       echo "_POST[muscle] is set<br>";
       print_r($_POST[muscle]);
       echo "<br>";

       if (!empty($_POST['muscle'])) {
         echo "_POST[muscle] is not empty!<br>";
         }
         else {
         echo "_POST[muscle] is empty!<br>";
         }
         }
    else {
      echo "_POST[muscle] is not set: it is empty!<br>";
    }
    if(isset($_POST['equipment'])) {
       echo "_POST[equipment] is set<br>";
       print_r($_POST['equipment']);
       echo "<br>";

       if (!empty($_POST['equipment'])) {
         echo "_POST[equipment] is not empty!<br>";
         }
         else {
         echo "_POST[equipment] is empty!<br>";
         }
         }
    else {
      echo "_POST[equipment] is not set: it is empty!<br>";
    }

    if(isset($_POST['all'])) {
      echo "this is what you have to do:<br>";
      print_r($_POST['all']);
      echo "<br>";
      }

//    if(isset($_POST['muscle']) && !empty($_POST['muscle'])){
//        if(isset($_POST['equipment']) && !empty($_POST['equipment'])){ 
```

如果你在没有选中复选框的情况下调用它，你会得到两个对话框（'not OK!'），然后是以下输出：

```
file was called successfully

_POST[muscle] is not set: it is empty!
_POST[equipment] is not set: it is empty!  
this is what you have to do:  
Array ( [0] => allMuscles [1] => allEquipment ) 
```

如果您在第一组中选择了几个框，而在第二组中没有选择：

```
file was called successfully

_POST[muscle] is set
Array ( [0] => abdominals [1] => calves )
_POST[muscle] is not empty!
_POST[equipment] is not set: it is empty!
this is what you have to do:
Array ( [0] => selectedMuscles [1] => allEquipment ) 
```

我并没有声称自己写出了漂亮的代码；但我希望这是功能性的，能让你摆脱你所处的修复状态。祝你好运！

# ios - 从 ECSlidingViewController 呈现模态视图控制器

> ID：16035359
> 
> 赞同：1
> 
> 时间：2013-04-16T11:01:34.830
> 
> 标签：ios, objective-c, xcode, ecslidingviewcontroller

在我的应用程序中，我`ECSlidingViewController`通过`Storyboard`. 在我的 AppDelegate 的`didFinishLaunchingWithOptions`方法中，我如上实例化它：

```
self.slidingController = [[UIStoryboard storyboardWithName:@"AppStoryboard" bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:@"ECSlidingViewController"]; 
```

我想要的是能够显示一个全局模式视图控制器（例如，当应用程序处于活动状态时推送通知到达时）而不知道当前哪个控制器在滑动控制器中处于顶部。

我所做的是（在我的 AppDelegate 中）：

```
[self.slidingController.topViewController presentModalViewController:controller animated:YES]; 
```

但它似乎不起作用。

无论哪个控制器是 topViewController，有什么方法可以从我的滑动控制器中呈现模态控制器？

PS。如果不是，是否有可能我想要的东西可以`SWRevealViewController`代替`ECSlidingViewController`？如果值得，我会走痛苦的路转行。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:31:35.617

如果 ECSlidingViewController 设置为故事板中的初始视图控制器，那么为什么要在应用程序委托代码中实例化另一个？通过这样做，您在 ECSlidingViewController 的另一个实例上调用您的方法，而不是故事板放在屏幕上的那个实例。这可能是您的问题的根源。相反，获取对您的 ECSlidingViewController 的引用，如下所示：

```
self.slidingController = self.window.rootViewController; 
```

然后尝试，

```
self.slidingController.topViewController presentModalViewController:controller animated:YES]; 
```

或者

```
self.slidingController presentModalViewController:controller animated:YES]; 
```

我没有使用过 ECSlidingViewController，所以我不知道其中哪些可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:12:39.017

尝试这个

```
UIViewController *rootViewController = self.window.rootViewController;
// You now have in rootViewController the view with your "Hello world" label and go button.

// Get the navigation controller of this view controller with:
UINavigationController *navigationController = rootViewController.navigationController;

[navigationController.topViewController presentModalViewController:controller animated:YES]; 
```

# javascript - 检查ajax调用完成

> ID：16035362
> 
> 赞同：0
> 
> 时间：2013-04-16T11:01:48.830
> 
> 标签：javascript, jquery, ajax

我在使用 ajax 填充和访问全局变量时遇到问题。我有以下代码（精简了一点）：

```
var answers;

$(document).ready(function() {

   showResults();

   console.log(answers);

}

function showResults(){
    $.ajax({
        url: "/wp-content/themes/hoekiesikeenschool/question-storage.php",
        data: { action: "get_results" },
        type: "post",
        dataType: "json"
    }).done(function (data) {

        answers = data.questionary; 
        return answers;

    }); 
} 
```

我的问题如下：当我登录`answers`该`done`函数时，它给了我一个很好的数组。这意味着`array`变量已被填充。但是当我从 记录它时`$(document).ready`，它返回一个空变量。这可能是因为 AJAX 调用是异步的，并且在填充变量之前执行了日志。

但是，我需要在另一个页面上使用该变量，因此我需要从`$(document).ready`...访问它关于如何检查变量是否已填充的任何想法？或者什么时候`showResults()`完成？在此先感谢您的帮助！

*   编辑 -

感谢您的回复！但我仍然在努力解决以下问题：据我所知，我可以从 ajax 回调中调用另一个函数，并将数据传递给它。问题是，在调用之后我必须对它做很多不同的事情，而我现在可以让它工作的唯一方法是在 ajax 回调中调用一个函数，然后从那个回调中调用另一个函数，等等。 ..

所以我最终在 中获得了智慧`showResults();`，`doc.ready`然后执行了很多“链接”在一起的功能。无论如何我可以将数据返回到变量中，以便在其他地方使用？我希望我已经说清楚了，英语不是我的母语，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:05:35.830

`answers`在 AJAX 调用之后执行依赖于数组的功能。从内部调用您的函数`done(..)`

一个非常粗略的想法：

```
var answers;

function functionalityDependentOnAnswers() {
   //the code dependent on answers array.
}

$(document).ready(function() {

   showResults();

   //Move code here to functionalityDependentOnAnswers()
}

function showResults(){
    $.ajax({
        url: "/wp-content/themes/hoekiesikeenschool/question-storage.php",
        data: { action: "get_results" },
        type: "post",
        dataType: "json"
    }).done(function (data) {

        answers = data.questionary; 
        functionalityDependentOnAnswer();

    }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:05:53.360

您可以使用`when`jQuery 提供的方法（查看[此 SO 链接](https://stackoverflow.com/questions/3709597/wait-until-all-jquery-ajax-request-are-done)）。

或查看[此 SO 链接](https://stackoverflow.com/questions/287188/how-to-know-when-all-ajax-calls-are-complete)，其中解释了类似情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:04:05.683

检查文档是否成功：这只会在成功回调完成时执行。

```
var answers;

$(document).ready(function() {
   showResults();
}

function showResults(){
    $.ajax({
        url: "/wp-content/themes/hoekiesikeenschool/question-storage.php",
        data: { action: "get_results" },
        type: "post",
        dataType: "json"
    }).when(function (data) {
       console.log(answers);
        answers = data.questionary; 
        return answers;

    }); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-25T07:52:55.557

想法：有一个隐藏的输入字段并为其添加更改侦听器。

```
<input type="hidden" id="answers_input" /> 
```

现在有一个听众。

```
var answers;

$(document).ready(function() {
    $('#answers_input').on('change', function() {
     // trigger your custom code
     console.log(answers);
    })
   showResults();

   console.log(answers);

}

function showResults(){
    $.ajax({
        url: "/wp-content/themes/hoekiesikeenschool/question-storage.php",
        data: { action: "get_results" },
        type: "post",
        dataType: "json"
    }).done(function (data) {
        answers = data.questionary; 
        $('#answers_input').val(answers);
    }); 
} 
```

解决方案有点像黑客，让我知道这是否适合你

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T11:07:45.003

你是在正确的方式。

在 DOM 回调中处理答案。

```
var answers;
$(document).ready(function() {
   showResults();
}

function showResults(){
    $.ajax({
        url: "/wp-content/themes/hoekiesikeenschool/question-storage.php",
        data: { action: "get_results" },
        type: "post",
        dataType: "json"
    }).done(function (data) {
        answers = data.questionary;
        console.log(answers);
        // Manage answers here
    }); 
} 
```

# vb.net - 如何根据数据集中的 ID 列合并两个数据表

> ID：16035364
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:01:51.467
> 
> 标签：vb.net, datatable, dataset

我有一个包含两个数据表的数据集，定义如下：

```
Datatable: Suppliers
SupplierId SupplierName SupplierDUNS

Datatable: SupplierPortal
SupplierId SupplierName SupplierDUNS 
```

我必须将下面的列绑定到网格

```
Suppliers.SupplierId
Suppliers.SupplierName
Suppliers.SupplierDUNS
SupplierPortal.SupplierDUNS 
```

如何根据 ID 合并两个数据表？我正在使用 VS2005，所以我无法使用 Linq。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:21:05.173

看看[DataTable.Merge](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge%28v=vs.80%29.aspx)

*“将指定的 DataTable 与当前的 DataTable 合并。”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T06:35:32.180

您可以使用数据集 Designer.cs 并将真实值发送到合并函数

```
this.Merge(ds, **true**, global::System.Data.MissingSchemaAction.Add); 
```

# java - 是否可以使用 PowerMock 模拟新文件的创建？

> ID：16035365
> 
> 赞同：9
> 
> 时间：2013-04-16T11:01:53.923
> 
> 标签：java, powermock

我想介绍一个逻辑，它创建带有单元测试的文件。是否可以模拟 File 类并避免实际创建文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T09:12:39.010

模拟构造函数，就像在这个示例代码中一样。**不要忘记**将调用“new File(...)”的类放在**@PrepareForTest**

```
package hello.easymock.constructor;

import java.io.File;

import org.easymock.EasyMock;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.easymock.PowerMock;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest({File.class})
public class ConstructorExampleTest {

    @Test
    public void testMockFile() throws Exception {

        // first, create a mock for File
        final File fileMock = EasyMock.createMock(File.class);
        EasyMock.expect(fileMock.getAbsolutePath()).andReturn("/my/fake/file/path");
        EasyMock.replay(fileMock);

        // then return the mocked object if the constructor is invoked
        Class<?>[] parameterTypes = new Class[] { String.class };
        PowerMock.expectNew(File.class, parameterTypes , EasyMock.isA(String.class)).andReturn(fileMock);
        PowerMock.replay(File.class); 

        // try constructing a real File and check if the mock kicked in
        final String mockedFilePath = new File("/real/path/for/file").getAbsolutePath();
        Assert.assertEquals("/my/fake/file/path", mockedFilePath);
    }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-26T00:16:07.347

试试 PowerMockito

```
import org.mockito.Mockito;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;

@PrepareForTest(YourUtilityClassWhereFileIsCreated.class)
public class TestClass {

 @Test
 public void myTestMethod() {
   File myFile = PowerMockito.mock(File.class);
   PowerMockito.whenNew(File.class).withAnyArguments().thenReturn(myFile);
   Mockito.when(myFile.createNewFile()).thenReturn(true);
 }

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T11:04:12.660

我不确定是否可以，但是我有这样的要求，我通过创建一个`FileService`界面来解决它。因此，您不是直接创建/访问文件，而是添加一个抽象。然后你可以在你的测试中轻松地模拟这个接口。

例如：

```
public interface FileService {

    InputStream openFile(String path);
    OutputStream createFile(String path);

} 
```

然后在你的课堂上使用这个：

```
public class MyClass {

    private FileService fileService;

    public MyClass(FileService fileService) {
        this.fileService = fileService;
    }

    public void doSomething() {
        // Instead of creating file, use file service
        OutputStream out = fileService.createFile(myFileName);
    }
} 
```

在你的测试中

```
@Test
public void testOperationThatCreatesFile() {
    MyClass myClass = new MyClass(mockFileService);
    // Do your tests
} 
```

这样，您甚至可以在没有任何模拟库的情况下模拟它。

# matlab - Matlab数字格式？

> ID：16035369
> 
> 赞同：0
> 
> 时间：2013-04-16T11:02:02.390
> 
> 标签：matlab, complex-numbers

我在处理一些数字时遇到了一些困难。我得到的结果是这样的：

```
0.000093145+1.6437e-011i
0.00009235+4.5068e-009i 
```

我已经尝试使用`format long`and 作为替代传递给字符串，然后`str2num`也没有好的结果。尽管无法按照我的意愿正确转换它们（例如，转换为 9 位小数）如果没有人能够帮助我，至少如果有人能告诉我如何解释 i 基数的含义，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:04:58.703

您在谈论[虚数单位 i](http://www.mathworks.se/help/matlab/ref/i.html)。如果你只是使用实数，你可以忽略虚部（它非常小）。因此，尝试：

```
real(0.000093145+1.6437e-011i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-15T10:38:01.517

服用后，`real()`您还可以通过以下方式控制小数位格式`sprintf`：

```
sprintf('%0.2f', pi) 
```

将导致：

```
'3.14' 
```

将 9 而不是 2 放置在小数点后 9 位。

# python - Django 休息框架

> ID：16035370
> 
> 赞同：3
> 
> 时间：2013-04-16T11:02:02.993
> 
> 标签：python, django, django-rest-framework

我正在编写一个基于 Django 休息框架的休息 API 应用程序。我想以 JSON 形式返回我的模型数据

我的模型是：

```
from os import path
from django.db import models
from django.contrib import admin
from django.core.files.storage import FileSystemStorage

#------------------------------------------------------------------------------ 

projectDirPath = path.dirname(path.dirname(__file__)) 
storeImageDir = FileSystemStorage(location=projectDirPath + '/couponRestApiApp/stores')

class tags(models.Model):
    """ This is the tag model """
    tag = models.CharField(max_length=15)               # Tag name
    tagDescription = models.TextField()                 # Tag Description
    tagSlug = models.CharField(max_length=400)          # Extra info can be added to the existing tag using this field
    createdAt = models.DateTimeField(auto_now_add=True) # Time at which tag is created
    updatedAt = models.DateTimeField(auto_now=True)     # Time at which tag is updated

    def __unicode__(self):
        """Method to display string correctly"""
        return unicode(self.tag)
    class Meta:
        """Meta class to control display Behavior of the Model name """
        verbose_name_plural = "Tags"

class stores(models.Model):
    """ This is the store model """
    storeName = models.CharField(max_length=15)                                          # Store Name
    storeDescription = models.TextField()                                                # Store Description
    storeURL = models.URLField()                                                         # Store URL
    storePopularityNumber = models.IntegerField(max_length=1)                            # Store Popularity Number  
    storeImage = models.ImageField(upload_to="images")                                   # Store Image 
    storeSlug = models.CharField(max_length=400)                                         # This is the text you see in the URL
    createdAt = models.DateTimeField(auto_now_add=True)                                  # Time at which store is created
    updatedAt = models.DateTimeField(auto_now=True)                                      # Time at which store is updated
    storeTags = models.ManyToManyField(tags)                                             # All the tags associated with the store

    def __unicode__(self):
        """Method to display string correctly"""
        return unicode(self.storeName)
    def StoreTags(self):
        return '\n'.join([s.tag for s in self.storeTags.all()])
    def StoreImage(self):    
        return '<img src="/media/couponRestApiApp/stores/%s" height="150"/>' % (self.storeImage)
    StoreImage.allow_tags = True
    class Meta:
        """Meta class to control display Behavior of the Model name """
        verbose_name_plural = "Stores"

class coupons(models.Model):
    """ This is the coupon model """
    couponValue = models.CharField(max_length=4)                              # Coupon value in RS.
    couponDescription = models.TextField()                                    # Coupon Description
    couponURL = models.URLField()                                             # Coupon click URL
    couponStore = models.ForeignKey(stores)                                   # Key of coupon to store
    tagName = models.ForeignKey(tags,on_delete=models.PROTECT)                # Tag names associated to coupon
    success = models.TextField()                                              # Count of the number of times people have made it work
    failures =  models.TextField()                                            # Count of the number of times this has failed
    lastTested = models.DateTimeField(auto_now=True)                          # When was the coupon last tested
    createdAt = models.DateTimeField(auto_now_add=True)
    updatedAt = models.DateTimeField(auto_now=True)
    class Meta:
        """Meta class to control display Behavior of the Model name """
        verbose_name_plural = "Coupons"

class app(models.Model):
    """ This is the application model which is using the API """
    appName = models.CharField(max_length=20)                       # Application name
    appDomain = models.CharField(max_length=20)                     # Application description
    appKey =  models.TextField()                                    # Application Key 
    createdAt = models.DateTimeField(auto_now_add=True)             # Time at which Application is added is created
    updatedAt = models.DateTimeField(auto_now=True)                 # Time at which Application details are updated
    class Meta:
        """Meta class to control display Behavior of the Model name """
        verbose_name_plural = "Apps"

class subscriptions(models.Model):    
    """ These are the emails that are subscribing """  
    app =  models.CharField(max_length=20)                                # The application where the email came from
    store = models.CharField(max_length=20)                               # The optional store on which the email wants an update
    tag =   models.CharField(max_length=20)                               # The optional tag on which the email wants an update
    emailID = models.EmailField()                                         # EmailID of the registered user
    active =  models.BooleanField(default=True)                           # They may have unsubscribed
    createdAt = models.DateTimeField(auto_now_add=True)                   # Time at user subscribed to the alerts
    updatedAt = models.DateTimeField(auto_now=True)                       # Time at which user updated its subscription 
    class Meta:
        """Meta class to control display Behavior of the Model name """
        verbose_name_plural = "Subscriptions"     

class tagsAdmin(admin.ModelAdmin):
    list_display = ('tag', 'tagDescription', 'tagSlug')

class storesAdmin(admin.ModelAdmin):
    list_display = ('storeName','storeDescription','storeURL',
                    'storePopularityNumber','StoreImage',
                    'storeSlug','createdAt','createdAt','StoreTags'
                    )

class couponsAdmin(admin.ModelAdmin):
    list_display = ('couponValue','couponDescription','couponValue',
                    'couponURL', 'couponStore','tagName','success',
                    'failures','createdAt','updatedAt'
                    )

class appsAdmin(admin.ModelAdmin):
    list_display = ('appName','appDomain','appKey',
                    'createdAt','updatedAt'                    
                    )

class subcriptionsAdmin(admin.ModelAdmin):
    list_display = ('app','store','tag','emailID',
                    'active','createdAt','updatedAt'
                    )

admin.site.register(tags,tagsAdmin)
admin.site.register(stores,storesAdmin)
admin.site.register(coupons,couponsAdmin)
admin.site.register(app,appsAdmin)
admin.site.register(subscriptions,subcriptionsAdmin)

#------------------------------------------------------------------------------ 
```

我在views.py中写了一个类：

```
from rest_framework import status
from rest_framework.views import View
from rest_framework.response import Response
from couponRestApiApp.models import app,coupons,stores,subscriptions,tags 
```

# -------------------------------------------------- ----------------------------

```
class getAllStores(View):
    """
    Provides access to all orders within the system.
    """

    def get(self, request):
        """
        Return a list of all orders.
        """ 
        storeResponse = [i.storeName for i in stores.objects.all()]
        print storeResponse
        return (storeResponse) 
```

我的 URL.py 是：

```
from django.contrib import admin
from couponRestApiApp.views import getAllStores
from django.conf.urls import patterns, include, url
#------------------------------------------------------------------------------

admin.autodiscover()

urlpatterns = patterns('',

    url(r'^admin/', include(admin.site.urls)),
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve',
         {'document_root': "/home/vaibhav/TRAC/coupon-rest-api/couponRestApi/", 'show_indexes': False}),
    url(r'^stores/$',getAllStores.as_view(), name='getAllStores'),
) 
```

但如果我提出要求`(http://localhost:8000/stores/) the following error is thrown:'list' object has no attribute 'status_code'`

请告诉我如何使用 rest-framework 将模型数据序列化为 JSON 对象......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T05:58:26.947

```
class getAllStores(generics.ListAPIView,APIView):
    """
    Provides access to all orders within the system.
    """

    model = stores # Model name
    serializer_class = getAllStoresDetailSerializer # Call serializer

    def get_queryset(self):    
        return stores.objects.filter() 
```

序列化器：

```
class getAllStoresDetailSerializer(serializers.ModelSerializer):

    storeTags = serializers.Field(source='StoreTags')
    storeImage = serializers.Field(source='storeImage')

    class Meta:
        model = stores
        fields = ('storeName','storeDescription',
                  'storeURL','storePopularityNumber','storeImage','storeTags',
                    'storeSlug','createdAt','updatedAt','StoreCoupons'
                 ) 
```

我认为您必须修改 storeImage 方法才能在服务器上提供图像的路径......或者为此定义新方法......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:01:14.877

您需要返回 a `Response`，而不仅仅是返回一个列表。

```
ret = [i.storeName for i in stores.objects.all()]
return Response(ret) 
```

# ajax - Struts2 ajax 主题在 IE10 中不起作用

> ID：16035375
> 
> 赞同：1
> 
> 时间：2013-04-16T11:02:21.723
> 
> 标签：ajax, struts2, dojo, internet-explorer-10

我们正在开发一个**struts 2**应用程序，因为我们使用**dojo ajax 主题**来保存和检索数据。

这适用于除 iE10 之外的所有主要浏览器。在 IE10 中，根本不会调用 ajax 请求。

它只是显示空白。

我已经尝试了 ajax 主题的各种组合，但我可以得到想要的结果！

在我们的应用程序中，我们使用的是 struts 2.0.14 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:38:49.690

当我寻找解决方案时，我遇到了这个链接

[https://issues.apache.org/jira/browse/WW-3969?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab](https://issues.apache.org/jira/browse/WW-3969?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab)

这样，Dojo 插件已被弃用，因此 IE-10 不会出现问题修复，我们需要采用/迁移其他一些插件/框架，例如用于**ie10****的 struts2-jquery 插件**。

 **我将对此进行处理，并用我的发现/解决方案更新这个答案。**

# vb.net - vb.net 加我。提到对象时

> ID：16035376
> 
> 赞同：2
> 
> 时间：2013-04-16T11:02:21.963
> 
> 标签：vb.net

只是一个学习者的快速问题。

加我有什么好处。东西有？

例如 me.picturebox1.imagelocation... 与 picturebox1.imagelocation。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:04:55.170

真的不多。唯一重要的是是否存在与属性或字段同名的局部变量。更好的解决方案是重命名其中一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:06:18.503

me 是当前类的实例。没有必要添加，但有时您需要它来为编译器做出明显的区别。例如，在构造函数中，如果参数与您要初始化的类变量同名！在 c# 中（这个）：

```
class Class
{
    private int number;

    public Class(int number)
    {
        this.number = number;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:05:21.287

当您有与类型属性或字段同名的局部变量时，它很有用。

在 C# 中也有同样的*问题*，`this`在这里得到了很好的回答：[什么时候使用“this”关键字？](https://stackoverflow.com/questions/23250/when-do-you-use-the-this-keyword)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:06:49.217

我想我会帮助系统了解当您有多个表单时应该执行哪个控件。例如，在 2 个表单中，您有同一个名为 txtFirstname 的文本框，系统可能无法理解在需要时应该使用哪个文本框来捕获值。使用 me.txtFirstname 将指定将使用当前编码形式的文本框。我希望我给了你正确的答案，因为这就是我使用我的方式。到目前为止

# javascript - 如何使用 html5 localstorage 存储列表的顺序？

> ID：16035377
> 
> 赞同：2
> 
> 时间：2013-04-16T11:02:22.097
> 
> 标签：javascript, jquery, html, local-storage

我有一个无序列表，可排序的 jquery ui，我想知道如何存储

*   被拖入列表后。当用户刷新页面时*   停留在它被拖到的地方。

    这是我的例子：

    ```
    <!DOCTYPE html>
    <head>
    <title>Untitled Document</title>
    <script type="text/javascript"
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript"
        src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css"
        href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
    </head>

    <body>
    <ul id="uli">
      <li id="lit1" class="ui-state-default" style="width:100px; height:100px; list-style-type:none"><div>1</div></li>

      <li id="lit2" class="ui-state-default" style="width:100px; height:100px; list-style-type:none"><div>2</div></li>

      <li id="lit3" class="ui-state-default" style="width:100px; height:100px; list-style-type:none"><div>3</div> </li>

    </ul>

    <script>

    $(function() {
        $( "#uli" ).sortable();
        $( "#uli" ).disableSelection();
      });

    </script>
    </body>
    </html> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:17:20.593

[http://api.jqueryui.com/sortable/#method-serialize](http://api.jqueryui.com/sortable/#method-serialize)

```
$( "#uli" ).sortable({
  update: function( event, ui ) {
    var sorted = $( this ).sortable( "serialize", { key: "sort" } );
    localStorage['sorted'] = sorted ;
  }
}); 
```

# vba - 错误 13：类型不匹配

> ID：16035378
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:02:26.593
> 
> 标签：vba, add-in, adobe-indesign

我有一个 excel 插件示例：我将对象 InDesign 称为：

```
 Private Sub btnStart_Click()
    Dim pCnt As Integer
    Dim myInDesign As InDesign.Application
    Dim myDoc As InDesign.Document
    Dim myPage As InDesign.Page

    ActiveWorkbook.Colors(17) = RGB(255, 204, 255)
    Set myInDesign = CreateObject("InDesign.Application")
    Set myDoc = myInDesign.ActiveDocument

    Set myInDesign = Nothing
    Set myDoc = Nothing

    Unload Me
End Sub 
```

显示`Error 13: Type mismatch`在 `Set myInDesign = CreateObject("InDesign.Application")`

为什么？如何修复？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:55:51.447

[我在http://forums.adobe.com/thread/834780](http://forums.adobe.com/thread/834780)找到答案

删除文件 C:\ProgramData\Adobe\InDesign\Version 6.0\en_US\Scripting Support\6.0\Resources for Visual Basic.tlb 并以管理员权限运行 excel 和 indesign

# android - Android - 多屏支持

> ID：16035379
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:02:27.527
> 
> 标签：android, screen

假设我只将图像放在 drawable-xhdpi 中，并尝试在具有 mdpi 密度的设备中访问它。然后它运行正常。

但我只在 layout-large 中创建了一个 xml。我尝试在具有正常屏幕的设备中运行它，然后我得到**android.content.res.Resources$NotFoundException**。是否必须在布局文件夹中创建一个 xml 文件。任何人都可以知道它为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:59:01.473

[从这里](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)的文档

> 注意：如果您的所有资源都使用大于当前屏幕的尺寸限定符，系统将不会使用它们并且您的应用程序将在运行时崩溃（例如，如果所有布局资源都使用 xlarge 限定符标记，但设备是正常尺寸的屏幕）。

我认为这可以回答您的问题

# mysql - MySQL5 文本的 JPA 实体数据类型

> ID：16035380
> 
> 赞同：0
> 
> 时间：2013-04-16T11:02:28.943
> 
> 标签：mysql, jpa

MaxOSX10.7.5 MySQL5 JDK6 JPA2

我刚刚开始 JPA 并有一个实体类。它有一个字符串成员映射到 MySQL 文本类型，如下所示：

```
@Entity
@Table(name="Device")
public class Device {

    @Column(name="notes")
    public String notes; 

} 
```

MySQL定义：

```
`notes` text CHARACTER SET utf8 
```

当我尝试进行单元测试时，出现错误：

... 对于列注释。找到：文本，预期：长文本

我添加了@Lob 注释，但它没有用。我把长度属性像 length=2000|10000|20000 但没有运气。除了 @Lob + length 属性但相同。

我该如何解决这个问题？

提前致谢。

# python - 崇高文本创建新视图

> ID：16035385
> 
> 赞同：4
> 
> 时间：2013-04-16T11:02:38.123
> 
> 标签：python, sublimetext2

只是看看 Sublime Text 2 以扩展它。我用 CTRL '弹出了控制台，并尝试这样做：

```
>>> x = window.new_file()
>>> x 
<sublime.View object at 0x00000000032EBA70>
>>> x.insert(0,"Hello") 
```

确实打开了一个新窗口，但我的插入似乎不起作用：

```
Traceback (most recent call last):   File "<string>", line 1, in <module> Boost.Python.ArgumentError: Python argument types in
        View.insert(View, int, str) did not match C++ signature:
        insert(class SP<class TextBufferView>, class SP<class Edit>, __int64, class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> >) 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:05:40.417

该`.new_file()`调用返回一个`View`对象，因此该`.insert()`方法接受*3 个*参数：

> `insert(edit, point, string)`
> `int`
> `string`将给定的缓冲区 插入到指定的`point`. 返回插入的字符数：如果在当前缓冲区中将制表符转换为空格，这可能会有所不同。

请参阅[`sublime.View`API 参考](http://www.sublimetext.com/docs/2/api_reference.html#sublime.View)。

`edit`参数是一个对象[`sublime.Edit`](http://www.sublimetext.com/docs/2/api_reference.html#sublime.Edit)；您需要调用`view.begin_edit()`创建一个，然后调用`view.end_edit(edit)`demarque 可撤消的编辑：

```
edit = x.begin_edit() 
x.insert(edit, 0, 'Hello')
x.end_edit(edit) 
```

该`Edit`对象是一个标记，用于将编辑分组为可以在一个步骤中撤消的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:08:31.093

```
>>> x = window.new_file()
>>> e = x.begin_edit()
>>> x.insert(e,0,"Hello")
5
>>> x.end_edit(e) 
```

# datatables - MongoDB 查找与使用聚合指定的任何条件匹配的文档

> ID：16035389
> 
> 赞同：1
> 
> 时间：2013-04-16T11:02:56.197
> 
> 标签：datatables, aggregation, mongodb-php

我正在使用聚合在数据表中创建文本搜索功能。

```
$ops = array(      
  array(
    '$match' => array(                              
        "status" => "A",                    
        '$or' => array(
                array("team" => "Golz"),
                array("rank" => "freshmen")
        )                   
  )
) 
```

翻译成mysql，它是“select * from dbname where status='A' AND (team='Golz' OR rank='freshmen')。

DB什么也不返回，它应该返回几个项目。

什么似乎是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:45:21.697

我似乎有一个解决方法，这就是我的做法。

在返回游标 obj 的 find() 中使用 $or。使用游标 obj，我将 id 传递给匹配聚合的 or 内部。所以在我的匹配数组中我有这样的东西：

```
 '$match' => array(                              
    "status" => "A",                    
    '$or' => array(
            array("id" => "1"),
            array("id" => "2"),
            array("id" => "3")
    ) 
```

# c# - 添加具有非主键的导航属性

> ID：16035396
> 
> 赞同：3
> 
> 时间：2013-04-16T11:03:17.907
> 
> 标签：c#, entity-framework, navigation-properties

这是我的简化方案。

我有 2 个数据库表

```
Customer
Order 
```

两个表都有预期的 Id 主键（CustomerId 和 OrderId）。

一个客户可以有多个订单。

在数据库中，没有配置外键，并且由于遗留原因，客户参考订单不是通过 OrderId 字段，而是通过另一个名为 OrderRef 的字段

转发到 EF 并首先编写代码...

我有一个客户和订单 POCO

我需要类似以下的东西......

```
 public class Customer
    {
        public ICollection<Order> Orders {get; set;}
    } 
```

我的问题是如何告诉 EF 使用 Orders 表上的 OrderRef 字段作为查找的参考？

我意识到数据库设计很糟糕 - 但它不是我的数据库，它是一个遗留数据库，它无法更改。

# javascript - SignalR 与 Breeze 结合

> ID：16035397
> 
> 赞同：9
> 
> 时间：2013-04-16T11:03:21.547
> 
> 标签：javascript, signalr, breeze

我有一个项目，我现在已经用 BreezeJS 建立了一个项目。不知道 BreezeJS 内部发生了什么，但只是接受了它的工作原理，我基本上通过这个简单的命令将我的项目显示在屏幕上。

```
export function getProjects(projectsObservable, errorObservable)
{
return breeze.EntityQuery.from("Projects")
       .using(manager).execute()...then/fail.
} 
```

我现在想让它对使用 signalR 编辑相同项目的用户做出响应。这意味着我此时在 javascript 结束时触发了回调，说 guid = xxxxxxx 的对象已更改（guid 是关键）。

我如何在不再次查询服务器的情况下利用 Breeze 更新项目，也不将其视为需要发送回服务器的更新。请记住，我刚刚从信号 r 获得了更新。

我是否应该首先采取另一条路径，如果我可以在一开始就从 signalR 集线器返回数据，是否有理由创建 WebApi？用 Breeze 而不是 WebApi 设置它会很容易吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T06:28:19.437

我们 IdeaBlade 期待为使用 SignalR 的 Breeze 应用程序提供良好的指导。

我目前的想法是 SignalR 适合***通知***客户感兴趣的数据的更改，但我**不会使用 SignalR 将更改的数据传递给客户端**。我让客户端决定是否（或不......或何时）从服务器获取更改的数据。

我的推理基于这样一种观点，即 SignalR 应该是一种快速、轻量级的通知机制，而不是向可能或可能尚未准备好（或愿意）应对大量变化的订阅客户喷射大量数据的消防水带数据强加给他们。

也许您可以详细说明为什么您的想法不同。我当然愿意接受另一种观点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-04T16:47:53.753

我完全同意沃德贝尔

**如果您想知道如何做到这一点**：例如在 Angular 应用程序中，您可以像这样订阅微风实体跟踪机制

![在此处输入图像描述](https://i.stack.imgur.com/12Av1.jpg)

然后您可以在其他地方设置一个SignlarR Hub，将这些更改传输给所有客户端

然而，由于微风.js 的强大功能， **我不推荐它**，因为正如 Ward 指出的那样：“这将是向订阅客户端喷射大量数据的消防水带”。想一想，考虑一下您的应用程序将有 30 个并发用户进行交易，想象一下将创建的所有网络流量。那将是糟糕的软件架构。

您可能考虑这样做的唯一原因是，如果您需要更新从实时数据提供的仪表板，但您仍然需要更加简洁、注意、了解、了解数据流量和服务器利用率。

```
 function setupEventForHasChangesChanged() {
        EntityManager.hasChangesChanged.subscribe(function (eventArgs) {
            $rootScope.$emit('dataservice.hasChangesChanged', eventArgs);
        });
    }

    function setupEventForEntitiesChanged() {
        EntityManager.entityChanged.subscribe(function (changeArgs) {
            if (changeArgs.entityAction === breeze.EntityAction.PropertyChange) {
                $rootScope.$emit('dataservice.entitiesChanged', changeArgs);
            }
        });
    } 
```

# cuda - CUDA 上的“错误包含 cudart 标头”错误

> ID：16035401
> 
> 赞同：1
> 
> 时间：2013-04-16T11:03:30.197
> 
> 标签：cuda, compiler-errors, runtime-error

对于数学运算，我添加到头文件

```
#include <math_functions.h>
#include <device_functions.h> 
```

但是当我编译它时，它开始出现以下错误。我应该怎么办？

**ps：** CUDA 5.0，VS2010

> NVIDIA GPU Computing Toolkit\CUDA\v5.0\include\crt/func_macro.h(50): 致命错误 C1189: #error : -- 错误包含 cudart 头文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T06:23:49.360

你只需要像这样用#define 和#undef 包装#include "math_functions.h"：

```
#define __CUDA_INTERNAL_COMPILATION__
#include "math_functions.h"
#undef __CUDA_INTERNAL_COMPILATION__ 
```

似乎 math_functions.h 可能不包含在 .cpp 文件中。

# php - 组合框问题的 Extjs4 自动完成

> ID：16035403
> 
> 赞同：2
> 
> 时间：2013-04-16T11:03:41.693
> 
> 标签：php, autocomplete, combobox, extjs4

我正在使用 extjs+php 自动完成组合框属性。我的视图为-

```
Ext.define('Balaee.view.kp.Word.Word',  {
    extend:'Ext.form.Panel',
    id:'WordId',
    alias:'widget.Word',
    title:'Dictionary',

    items:[
    {

        xtype : 'combobox',
        fieldLabel : 'Enter the word',
        name : 'wordtext',
        displayField: 'word',
        valueField: 'word',
        allowBlank : false,
        emptyText : 'Enter the word',
        enableKeyEvents : true,
        autoSelect: true,
        id : 'wordtext',
        triggerAction:'all',
        typeAhead:true,
        typeAheadDelay:100,
        mode:'remote',
        minChars:1,
        forceSelection:true,
        hideTrigger:true,
        store:'kp.WordStore',
        listeners:  {
                specialkey: function (f,e) {    
                     if (e.getKey() == e.ENTER) {
                     this.up().down('button[action=SearchAction]').fireEvent('click');
                    }
                }
            }
        },
        {
            xtype:'button',
            formBind: true,
            fieldLabel:'Search',
            action:'SearchAction',
            text:'Search',
        }
    ]
}); 
```

绑定到上述组合框的商店正在从具有以下功能的服务器读取功能 URL：

```
public function actionGetword()
        {
             $record1=Word::model()->findAll();
             foreach($record1 as $record)
             {
             $main[]=array("wordId"=>$record->wordId,"word"=>$record->word);
             }
             echo "{ \"data\":".CJSON::encode($main)."} ";} 
```

所以存储绑定到上面的组合框是将所有单词存储在数据库中。如果我试图在上面的字段中插入单词“table”。当我写“ta”时，它会在下拉列表中为我提供建议。但它显示所有单词。但我只想在建议框中输入以“ta”开头的单词。那么我该如何修改呢？有人能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:53:26.520

你有两种方法可以做你想做的事。您可以像现在一样一次加载所有数据，然后在客户端进行过滤，或者在服务器端过滤数据。解决方案 1 将仅触发一个 HTTP 请求，该组合将非常被动。

## 服务器端过滤

如果要在服务器上进行过滤，则应捕获 HTTP 请求的参数“查询”。这可以`queryParam`通过组合框的选项进行配置。

例如：

```
$query = isset($_REQUEST['query']) ? $_REQUEST['query'] : false;

$record1 = Word::model()->findAll();
$main = array();
foreach($record1 as $record) {
    // Only add data for records matching the query
    if ($query === false || substr($record->word, 0, strlen($query)) === $query) {
        $main[]=array("wordId"=>$record->wordId,"word"=>$record->word);
    }
}
echo "{ \"data\":".CJSON::encode($main)."} "; 
```

使用这样的服务器，客户端代码应如下所示：

```
var store = Ext.create('Ext.data.JsonStore', {
    fields: ['wordId', 'word']
    ,proxy: {
        // TODO...
    }
});

Ext.widget('combo', {
    renderTo: 'comboCt'
    ,queryMode: 'remote' // you have this one wrong, 'mode' was in Ext 3
    ,triggerAction: 'all'
    ,displayField: 'word'
    ,idField: 'wordId'
    ,minChars: 1
    ,store: store

    // not needed because 'query' is the default, but you could customize that here
    ,queryParam: 'query'
}); 
```

## 客户端过滤

方案一，即加载一次，本地过滤，必须设置`queryMode`为'local'，独立加载store。您可以使用`store.load()`方法或`autoLoad`选项。

应该与您的服务器一起使用的示例客户端代码：

```
var store = Ext.create('Ext.data.JsonStore', {
    fields: ['wordId', 'word']
    ,proxy: {
        // TODO...
    }

    // Load the store once
    ,autoLoad: true
});

Ext.widget('combo', {
    renderTo: 'comboCt'
    // local means the combo will work with data in the store buffer
    ,queryMode: 'local'
    ,triggerAction: 'all'
    ,displayField: 'word'
    ,idField: 'wordId'
    ,store: store
    ,minChars: 1
}); 
```

# css - 是否有 CSS 'sibling contains' 选择器？

> ID：16035404
> 
> 赞同：0
> 
> 时间：2013-04-16T11:03:43.620
> 
> 标签：css, css-selectors

有什么方法可以使用 CSS 来设置元素的样式，这取决于子元素的类（如果它的兄弟姐妹）？还是其父母兄弟姐妹的孩子？

例如，假设我有这张表：

```
<table>
    <tr><td><span class='red'>A</span></td><td><span class='blue'>B</span></td></tr>
    <tr><td><span class='red'>C</span></td><td><span class='red'>D</span></td></tr>
</table> 
```

我想选择任何具有“红色”类的 SPAN，但前提是相邻（在同一行中）TD 元素包含具有“蓝色”类的跨度。所以，它会影响单元格 A，但不会影响单元格 C。这可能吗？根据兄弟姐妹的属性，我最接近选择元素的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:10:34.527

> 是否有 CSS 'sibling contains' 选择器？

CSS 中没有“包含”或父选择器，因此反过来也没有“同级包含”或“同级是”选择器的父级。

> 我想选择任何具有“红色”类的 SPAN，但前提是相邻（在同一行中）TD 元素包含具有“蓝色”类的跨度。所以，它会影响单元格 A，但不会影响单元格 C。这可能吗？根据兄弟姐妹的属性，我最接近选择元素的方法是什么？

兄弟组合器只允许您使用您已经可用的东西（例如 ID、类、伪类和属性），根据同一级别的兄弟元素来匹配元素。

在您的情况下，您的`span`元素根本不是彼此的兄弟姐妹，但它们的 parent`td`是。但是由于没有提到的父选择器，您不能`td`根据其兄弟的孩子来选择第一个的孩子。因此，对于您当前的标记，仅使用 CSS 是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:24:44.607

有相邻的 ( `+`) 和通用 ( `~`) 同级选择器，但正如 @BoltClock 所解释的那样，这仍然不会帮助您使用当前的标记。但是，如果您将标记更改为：

```
<table>
    <tr><td class="red><span>A</span></td><td class="blue"><span>B</span></td></tr>
</table> 
```

IE。将您的课程移动到`<td>`s 而不是`<span>`s 您应该有更多的运气：

`td.red + td.blue`*将*选择`td.blue`元素后面的所有元素。*`td.red`*

# android -

> ID：16035405
> 
> 赞同：8
> 
> 时间：2013-04-16T11:03:47.887
> 
> 标签：android

我在 Play Store 上发布了我的应用程序，但它不适用于平板电脑。我在 Google Play 商店中检查了应用程序的功能，经过一些研究发现我的应用程序具有一些电话功能，我认为这是有罪的一方。这是我的清单文件。

```
<uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission>
    <uses-permission android:name="android.permission.SEND_SMS" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <permission
        android:name=".permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name=".permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive data message. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- Keeps the device on vibrating mode when a message is received. -->
    <uses-permission android:name="android.permission.VIBRATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black.NoTitleBar" >

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />

        <activity
            android:name=".Splash"
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".MainActivity"
            android:screenOrientation="portrait">
        </activity>

           <activity
            android:name=".SelectedArticlePush"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".ActusScreen"
            android:screenOrientation="portrait">
        </activity>

          <activity
            android:name=".MentionLegale"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".SelectedArticle"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="stateAlwaysHidden|adjustPan">>
        </activity>

        <activity
            android:name=".ReglementScreen"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".SelectedReglementation"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".FavoriteScreen"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".AlertScreen"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".ClubScreen"
            android:screenOrientation="portrait">
        </activity>

         <activity
            android:name="ClubMi"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".DisplayWeb"
            android:screenOrientation="portrait">
        </activity>

         <activity
            android:name=".Contact"
            android:screenOrientation="portrait">
        </activity>

         <activity
            android:name=".tab.TabClubMi"
            android:screenOrientation="portrait">
        </activity>

        <activity
            android:name=".SMS"
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Transparent" >
        </activity>

    </application>

     <supports-screens 
          android:largeScreens="true" 
          android:normalScreens="true" 
          android:smallScreens="true" 
          android:resizeable="true" 
          android:anyDensity="true" /> 
```

我相信`<uses-permission android:name="android.permission.SEND_SMS" />`会激活电话功能。但是我需要这个权限才能发送短信。如果在平板电脑中运行，任何人都可以告诉我是否有另一种方法可以绕过它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T11:38:43.787

将 uses-feature 块添加到您的清单中：

```
<uses-feature
    android:name="android.hardware.telephony"
    android:required="false" >
</uses-feature> 
```

以上告诉设备您的应用程序中使用了此功能。`android:required="false"`但是，确保这不是严格的要求，并且无论支持该功能的设备如何，都将安装应用程序`android.hardware.telephony`。

然而，这产生了一个新*问题*。不用担心。解决方案如下。:-)

当不支持该`android.hardware.telephony`功能的设备尝试以任何方式使用该功能时会发生什么？在您的情况下，发送短信。一个简单的解决方案是检查设备是否具有使用电话功能的能力。

```
TelephonyManager tm = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
if (tm.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE)  {
    // SHOW A DIALOG, A TOAST OR A NOTIFICATION TO TELL THE USER THAT THE FEATURE IS MISSING
} else {
    // RUN THE CODE TO SEND OUT THE SMS
} 
```

我认为这是一种解决方法，以防运行它的设备是 CDMA 设备。

```
String strTM = ((TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE)).getLine1Number();
if (strTM == null)  {
    // SHOW A DIALOG, A TOAST OR A NOTIFICATION TO TELL THE USER THAT THE FEATURE IS MISSING
} else {
    // RUN THE CODE TO SEND OUT THE SMS
} 
```

上面的任何一个代码块都需要`READ_PHONE_STATE`权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

`PackageManager.hasSystemFeature(PackageManager.FEATURE_TELEPHONY)`如果设备具有上述功能，还有另一种检查（使用）的方法。我个人从来没有测试过它，但 OP 表明它有效。[https://stackoverflow.com/a/6568243/450534](https://stackoverflow.com/a/6568243/450534)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:05:56.127

您忘记`xlargeScreens`将`Manifest`.

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" /> 
```

**编辑：**`<uses-permissions>`标签不会在设备上强制执行任何硬件或功能，只是标签`<uses-feature>`强制执行功能，当`required`设置为`true`.

# java - 将MouseListener 添加到Rubber Banding 中的画布

> ID：16035407
> 
> 赞同：0
> 
> 时间：2013-04-16T11:03:56.097
> 
> 标签：java, mouselistener, java-canvas

我正在尝试解决[斯坦福 CS106A](http://see.stanford.edu/see/courseinfo.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111)的橡皮筋问题。根据[addMouseListener() 上的 Java Doc，](http://www-cs-faculty.stanford.edu/~eroberts/jtf/javadoc/student/acm/program/GraphicsProgram.html#addMouseListeners%28%29)需要一个侦听器才能使用它。根据这个问题的解决方案，没有使用监听器，但是当我在没有任何监听器的情况下使用它时，我收到以下错误：

> Component 类型中的方法 addMouseListener(MouseListener) 不适用于 arguments()

**如何创建一个侦听器以使其侦听整个画布？**

```
/**
 * This program allows users to create lines on the graphics canvas by clicking 
 * and dragging the mouse. The line is redrawn from the original point to the new
 * end point, which makes it look as if it is connected with a rubber band.
 */

package Section_3;

import java.awt.Color;
import java.awt.event.MouseEvent;

import acm.graphics.GLine;
import acm.program.GraphicsProgram;

public class RubberBanding extends GraphicsProgram{

private static final long serialVersionUID = 406328537784842360L;

public static final int x = 20;
public static final int y = 30;
public static final int width = 100;
public static final int height = 100;
public static final Color color = Color.RED;
public void run(){
    addMouseListener();
}

/** Called on mouse press to create a new line */
public void mousePressed(MouseEvent e) {
    double x = e.getX();
    double y = e.getY();
    line = new GLine(x, y, x, y);
    add(line);
}
/** Called on mouse drag to reset the endpoint */
    public void mouseDragged(MouseEvent e) {
    double x = e.getX();
    double y = e.getY();
    line.setEndPoint(x, y);
}
/* Private instance variables */
private GLine line;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T10:59:41.040

我试图将 addMouseListeners() 添加到 run() 方法，这就是问题所在。我上面添加 GCanvas 并收听它的解决方案也可以，但不需要。addMouseListeners() 应该使用 init() 而不是在 run() 中初始化。我之前无法使用 init()，因为我正在从 [Stanfrod CS106A](http://see.stanford.edu/see/courseinfo.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111)学习 Java，它使用了自定义的 Karel.jar 库参考。该库已将 init() 方法设为最终方法，因此我无法在任何程序中引用它。在我删除 Karel.jar 库并使用 jtf 中的 acm.jar 之后，我能够使用 init() 并且还能够将 addMouseListeners() 直接用于画布，而无需在已绘制的画布上添加任何其他画布。 **所以整个问题是 Karel.jar ！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T17:02:21.620

```
public class RubberBanding extends GraphicsProgram implements MouseListener {
    public void run() {
        GCanvas c = getGCanvas();
        c.addMouseListener(this); 
    }

    @Override 
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseDragged(MouseEvent e) {}

} 
```

您可以像我在上面所做的那样在类级别实现 MouseListener。您还可以创建一个单独的具体类来实现它，并将它的实例传递给画布而不是 this。您甚至可以使字段变量等于实现侦听器的匿名类并将其传递给 Canvas 对象。

```
MouseListener listener = new MouseListener() {
    @Override 
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseDragged(MouseEvent e) {}
}

class MyMouseListener implements MouseListener {
    @Override 
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseDragged(MouseEvent e) {}
}

public void run() {
    GCanvas c = getGCanvas();
    c.addMouseListener(listener); 

    // OR

    GCanvas c = getGCanvas();
    c.addMouseListener(new MyMouseListener()); 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:35:45.313

解决方案是添加一个 GCanvas 对象并在该对象上使用 addMouseListener()。

```
 GCanvas c = getGCanvas();   //Creates a GCanvas component so that addMouseListener could be applied to it.
        c.addMouseListener(this);   //Tracks mouse event for the canvas 
```

然后我可以通过实现 @madprogrammer 所告诉的 MouseInputListener 来跟踪画布的鼠标事件。

# html - 使用绝对定位子 div 时如何扩展绝对定位包装器 div？

> ID：16035409
> 
> 赞同：0
> 
> 时间：2013-04-16T11:03:58.053
> 
> 标签：html, css

我已经在网站上搜索了这个问题的答案，据我所知，其他问题不涉及家长`div`使用`position:absolute;`

这是我的代码：

```
<div id="wrapper">

    <div id="child">
    Here are the contents to be displayed.
    </div>

</div> 
```

这是我的CSS：

```
#wrapper {width:1024px; height:auto; position:absolute; top:0px; left:0px; border:solid 1px #000;}

#child {width:500px; height:1000px; position:absolute; top:35px; left:15px; border:solid 1px #FF0000;} 
```

这是一个小提琴：[jsfiddle](http://jsfiddle.net/aEbFv/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:12:11.893

如果父母不能是相对的，那么孩子必须是相对的（您将获得相同的行为）。如果两者都是绝对的，那么它们就没有关系，因此父母无法适应孩子（反之亦然）。您还必须向父级添加 padding-bottom 以修补子级的完整大小（至少是子级的顶部+您想要的任何填充）

更新小提琴示例：http: [//jsfiddle.net/aEbFv/8/](http://jsfiddle.net/aEbFv/8/)

```
#wrapper {
    ....
    padding-bottom: 60px; /* 35px from childs top + 25px for padding */
}
#child {
    ....
    position:relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:08:07.140

现在给

```
 #wrapper{
position:relative;
position:absolute; // remove this line
}
    .child{
    position:absolute;
    left:0;
    right:0;
    width:500px; // remove this line
    } 
```

总是给给定的**父 div** `position relative`和**子 div**`absolute`

更多**[关于职位](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)**

# database - 如何在 .asp 经典页面中列出多条记录

> ID：16035415
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:04:17.307
> 
> 标签：database, asp-classic, vbscript, insert, records

[数据库截图](http://i49.tinypic.com/2yxem3k.png)

这是我试图链接到 .asp 经典页面的数据库。我想知道是否有办法在同一个 .asp 页面中输入多个记录和/或在需要时将特定记录输入到页面中。我正在使用 ASP VBScript。请注意，我正在尝试从数据库 (.mdb/.accdb) 文件中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:54:37.183

```
Set conn = Server.CreateObject("ADODB.Connection") 

b_use_dsn = false   
if (b_use_dsn=false) then
    'SQL_server_string = "Provider=SQLOLEDB; Data Source=myMachine; Initial Catalog=pubs; User ID=sa; Password="
    path_to_db = application("path_to_db")
    if (path_to_db = "") then path_to_db = "../data"
    Access_string = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & server.mappath(path_to_db) & "/hotkey.mdb"
else
    Access_string = "DSN=casemodo"
end if
ConnectionString = Access_string
conn.Open ConnectionString

s_table = request.querystring("s_table")
if (s_table="") then s_table = session("s_table")
session("s_table") = s_table

ID_page = request.querystring("ID_page")
if (isnull(ID_page) or ID_page="") then ID_page=session("ID_page")
if (isnull(ID_page) or ID_page="") then ID_page=0
session("ID_page") = ID_page

s_field_order = "i_order"
if (s_table="page_image_stack") then s_field_order = "i_build_image_layer DESC"

on error resume next
'open recordset
s = "SELECT"
s = s & " *"
s = s & " FROM " & s_table
if (ID_page<>"") then
s = s & " WHERE ID_page=" & ID_page
end if
s = s & " ORDER BY " & s_field_order
set rs=conn.execute(s)
if (err.number<>0) then
    if (err.number=-2147217904) then
        s = "SELECT"
        s = s & " *"
        s = s & " FROM " & s_table
        's = s & " ORDER BY ID"
        set rs=conn.execute(s)
    else
        msg = "Error on admin_data_show.asp line 26<hr>s=<br>" & s & "<hr>err.description=" & err.description & "<hr>err.number=" & err.number
        session("msg")=msg
        conn.close
        set conn=nothing
        response.redirect("error_report.asp?send_email=yes")
    end if
end if
i_columns = rs.fields.count

dim array_fields()
redim array_fields(i_columns)

for x=0 to i_columns-1
    s_name = rs(x).name
    array_fields(x) = s_name
    's_fields=s_fields & s_name & ","
    'n_columns = n_columns + 1
next

'Set rs = server.createObject("ADODB.recordset")
'rs.open s, conn, 0, 1 '0=forward only, 1=lock read only

s_main = "Secure Area"
s_title = "Manage data"
%>
<br>Table: <%=ucase(s_table)%>

<table border='0' width='<%=application("n_page_width")%>' cellspacing='0' cellpadding='0'>
<tr>
<td align='center' valign='middle'>
    <table border='0' width='100%' cellspacing='0' cellpadding='0'>
    <tr>
    <td align='left' valign='middle'>
        <br>
        <table border='1' width='100%' cellspacing='0' cellpadding='1' bgcolor='<%=application("s_color_bg_table")%>'>
<%
if (rs.BOF and rs.EOF) then
        Response.Write("<tr>")
        Response.Write("<td colspan='6' align='center'>")
        Response.Write("<table width='70%'>")
        Response.Write("<tr>")
        Response.Write("<td>")
        Response.Write("<br><b>There are no data.<br>Use the menu on the left to add one.</b><br><br>")
        Response.Write("</td>")
        Response.Write("</tr>")
        Response.Write("</table>")
        Response.Write("</td>")
        Response.Write("</tr>")
else
    response.write("<tr>" & vbCrLf)
    response.write("<td align='left' valign='bottom'>edit</td>")
    type_markers=0

    for x=0 to i_columns-1
        response.write("<td align='left' valign='bottom'>")
        s_field = array_fields(x)
        if (len(s_field)>2) then
            part_to_look_at = left(s_field,2)
            if (instr(1,part_to_look_at,"_",1)>0) then
                type_markers = 1
                s_caption = replace(right(s_field,len(s_field)-2),"_"," ")
            else
                s_caption = s_field 
            end if
        else
            s_caption = s_field         
        end if
        s_type=lcase(left(s_field,1)) 'this gives us "s" for string, "d" for date, etc
        response.write(s_caption)
        response.write("</td>" & vbCrLf)
    next
    response.write("<td align='left' valign='bottom'>del</td>") 
    response.write("</tr>" & vbCrLf)

    rs.movefirst
    do while not rs.EOF
        Response.Write("<tr>")

        Response.Write("<td class='small' align='left' valign='top'>")
        Response.Write("<a href='admin_data_add.asp?s_mode=edit&ID=" & rs(0) & "'><img src='images/btn_edit.png' border='0' alt='Edit " & rs(0) & " record'></a>")
        Response.Write("</td>")

        for x=0 to i_columns-1
            response.write("<td class='small' align='left' valign='top'>")
            response.write(rs(x))
            response.write("</td>" & vbCrLf)
        next

        Response.Write("<td class='small' align='left' valign='top'>")
        Response.Write("<a href='admin_data_delete.asp?ID=" & rs(0) & "'><img src='images/btn_delete.gif' border='0' alt='Delete this record'></a>")
        Response.Write("</td>")

        Response.Write("</tr>")

        rs.MoveNext
    loop
end if
rs.close
set rs = nothing
conn.close
set conn=nothing
%>
        </table>

    </td>
    </tr>
    </table>
</td>
</tr>
</table><br> 
```

# eclipse - Eclipse安装报错——系统找不到指定的路径？

> ID：16035418
> 
> 赞同：1
> 
> 时间：2013-04-16T11:04:22.417
> 
> 标签：eclipse

我下载了 eclipse-java-juno-SR2-win32-x86_64.zip 文件并将其解压缩。在解压缩过程中，我看到一个错误 - 系统找不到指定的路径。这是什么，为什么会这样？

这是详细信息-

```
!   C:\abc\eclipse-se.zip: Cannot create eclipse\features
 \org.eclipse.recommenders.feature.completion.rcp.intellig_1.0.3.v20130211-0152-   
 b208\META-INF\maven\org.eclipse.recommenders.feature
 \org.eclipse.recommenders.feature.completion.rcp.intellig\pom.properties
 The system cannot find the path specified.

!   C:\abc\eclipse-se.zip: Cannot create eclipse\features 
\org.eclipse.recommenders.feature.completion.rcp.subwords_1.0.3.v20130211-0152-
b208\META-INF\maven\org.eclipse.recommenders.feature
\org.eclipse.recommenders.feature.completion.rcp.subwords\pom.properties
The system cannot find the path specified. 
```

甚至需要这些文件吗？他们很重要吗？

**编辑 -**

我在 Windows 7 64 位机器上使用 winRAR 解压缩此文件。当我按原样解压缩时，我看到了“文件名太大（或类似的东西）”错误。然后，我将 zip 文件名缩短为 eclipse abc。大多数错误消失了，但上述错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:05:58.650

你用的是哪个解压工具？这可能是因为路径名太长，并且某些工具不适用于长路径。

* * *

众所周知，Winrar 是不适用于长路径的“那些工具”之一。正如下面 Adrian 建议的那样，使用 7-zip 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T08:36:20.467

**一个更简单的解决方案：**

当它询问解压文件夹名称时，只需删除默认值并给出一个简短的名称，例如

**C：**

然后它会在下面解压

**c:\eclipise\~....**

它不会有像“eclipse-java-juno-SR2-win32-x86_64”这样的长文件夹。我希望这是一个更简单的解决方案。

（债务人）<><

# android - 受密码保护的安卓应用。重置密码功能？

> ID：16035427
> 
> 赞同：1
> 
> 时间：2013-04-16T11:04:49.190
> 
> 标签：android, email, passwords, protection

我为我的 Android 应用实现了一个简单的密码保护。我将用户定义的密码存储在 SharedPreferences 中。我可以通过不混淆它来恢复它。

如果用户忘记密码，恢复对应用程序的访问权限的最佳方法是什么？通过邮件发送密码是个好主意吗？这甚至可以在 Android 应用程序中实现吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:16:15.227

商业方面，我想为用户提供多个选项，因为如果用户没有密码，应用程序将无法使用。

选项 1：提供安全问题的答案（用户需要事先注册），然后您可以重置密码。为此，解决方案将在应用程序中进行编码。

如果选项 1 失败（用户不记得答案）

选项 2：询问用户的电子邮件地址/登录 ID，并向他发送密码重置详细信息。现在这将需要一个网络服务（发送电子邮件地址）和一个数据库（您将在其中根据存储的用户记录验证电子邮件地址）。这显然意味着您必须创建一个小型服务器端 Web 服务。

那当然是理想的情况。如果您没有选项 2 的带宽/资源，则必须跳过该选项。

# javascript - 在javascript中根据时间对数组进行排序

> ID：16035434
> 
> 赞同：3
> 
> 时间：2013-04-16T11:05:02.527
> 
> 标签：javascript, jquery

我有一个格式为的数组

```
["09-02-2010", " 05-08-2010", "11-11-2010",  "27-09-2010", "10-12-2010", "09-09-2010", "03-09-2010", "13-08-2010", , "11-10-2010","09-06-2010", "08-06-2010", "07-06-2010" ] 
```

我正在尝试根据日期的降序对数组进行排序..

```
 dateArray.sort( mdyOrdD);

     var dateRE = /^(\d{2})[\/\- ](\d{2})[\/\- ](\d{4})/;

      function mdyOrdD(a, b){
       a = a.replace(dateRE,"$3$1$2");
       b = b.replace(dateRE,"$3$1$2");
       if (a>b) return -1;
       if (a <b) return 1;
       return 0; } 
```

bt 这并没有完全解决我们的问题。可能出了什么问题，还有其他好的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:17:08.143

由于您的日期是`DD-MM-YYYY`格式，并且您希望它们`YYYYMMDD`按字母顺序排序，请使用

```
 a = a.replace(dateRE,"$3$2$1");
   b = b.replace(dateRE,"$3$2$1"); 
```

反而。

# javascript - 在字符串javascript中放置单引号

> ID：16035436
> 
> 赞同：1
> 
> 时间：2013-04-16T11:05:10.113
> 
> 标签：javascript, html, string

目前我使用javascript动态绑定表..

我需要单引号来分隔字符串..

代码 ：-

```
var str ="";
str += "<td><a onclick='showFlightsByName("+val.Name+")' href='javascript:;'><span>" + val.Name + "</span></a></td>"; 
```

当前输出：-

```
<a onclick="showFlightsByName(AirTran Airways)" href="javascript:;"><span>Airways Airways</span></a> 
```

期望输出：-

```
<a onclick="showFlightsByName('AirTran Airways')" href="javascript:;"><span>Airways Airways</span></a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:07:00.843

```
"<td><a onclick='showFlightsByName("+val.Name+")' href='javascript:;'><span>" + val.Name + "</span></a></td>" 
```

应该

```
"<td><a onclick=\"showFlightsByName('"+val.Name+"')\" href=\"javascript:;\"><span>" + val.Name + "</span></a></td>" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:08:04.030

尝试这个：

```
var str ="";
str += "<td><a onclick=\"showFlightsByName('"+val.Name+"')\" href=\"javascript:;\"><span>" + val.Name + "</span></a></td>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T11:09:52.543

通常在使用 HTML 时，它比字符串更容易使用`'`，如下所示：`"`

```
var str = '<td><a onclick="showFlightsByName("' + val.Name + '")" href="javascript:;"><span>' + val.Name + '</span></a></td>'; 
```

但是，你有没有考虑过使用 JS 来构建 DOM 对象？

```
var a = document.createElement("a");
a.href = "javascript:;";
a.onclick = "showFlightsByName(" + val.Name + ")";
a.appendChild(document.createElement("span").innerHTML(val.name));
var td = document.createElement("td");
td.appendChild(a); 
```

那可能不是100%。自从我用纯 JS 编码以来已经有一段时间了。JQuery 让它太容易了。

编辑：在那张纸条上......

```
var $a = $('<a>').append($('<span>').text(val.Name)).click(function() {
    showFlightsByName(val.Name); 
});
$('<td>').append($a).appendTo("WHEREVER"); 
```

# python - 如何使用 python 在一个面板中为四个图创建模板？

> ID：16035437
> 
> 赞同：0
> 
> 时间：2013-04-16T11:05:11.340
> 
> 标签：python, python-2.7

我已经使用 python 为四个单图编写了脚本。另外出于某种原因，我想将所有四个组合到一个面板中。我想创建一个模板。如何使用 python 创建模板以在单个面板中显示四个图？

```
import cdms2,vcs,cdutil,cdtime,os,sys,time
f=cdms2.open('/home/alagu/Desktop/data/1xco2.cam2.h0.0001-01.nc')
data=f('Z3')    
v=vcs.init()
v.plot(data)
v.gs('Z3.jpg',device='jpeg', orientation='p') 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:12:55.810

您可以使用[Python 图像库](http://www.pythonware.com/library/pil/handbook/index.htm)。

*   创建一个空图像，其宽度和高度至少是 vcs 创建的最大绘图的两倍。
*   然后加载 vcs 生成的图像并将它们粘贴到空图像中。
*   将新映像写入磁盘。

像这样：

```
from PIL import Image

srcs = []
srcs.append(Image.open('Z1.jpg'))
srcs.append(Image.open('Z2.jpg'))
srcs.append(Image.open('Z3.jpg'))
srcs.append(Image.open('Z4.jpg'))

xoffs = max([i.size[0] for i in srcs])
yoffs = max([i.size[0] for i in srcs])

combined = Image.new('RGBA', (2*xoffs, 2*yoffs))

combined.paste(srcs[0], (0,0))
combined.paste(srcs[1], (xoffs,0))
combined.paste(srcs[2], (0,yoffs))
combined.paste(srcs[3], (xoffs,yoffs))

combined.write('combined.jpg') 
```

# perl - perl中如何正确使用全局变量

> ID：16035441
> 
> 赞同：5
> 
> 时间：2013-04-16T11:05:31.073
> 
> 标签：perl

我是perl的新手。我试图通过编写一些程序来理解它。perl 中的作用域让我很难过。

我写了以下内容：

```
use 5.16.3;
use strict;
use Getopt::Long;

Getopt::Long::Configure(qw(bundling no_getopt_compat));
&ArgParser;
our ($sqluser,$sqlpass);

$sqluser="root";
$sqlpass="mypassword";

sub ArgParser {
    print "Username is ".$sqluser." Password is ".$sqlpass."\n";
    my $crt='';
    my $delete='';
    GetOptions ('create|c=s' => \$crt,
        'delete|d=s' => \$delete
    );
    if ($crt) {
        &DatabaseExec("create",$crt);   
    } elsif ($delete) {
        &DatabaseExec("delete",$delete);    
    } else {
    print "No options chosen\n";
    }
}

sub DatabaseExec {
    use DBI;
    my $dbname=$_[1];
    print "Username is ".$sqluser." Password is ".$sqlpass."\n";
    my $dbh = DBI->connect("dbi:mysql:", $sqluser,$sqlpass);
    my $comand=$_[0];
    if ($_[0] eq "create") {
        my $db_com="create database ".$dbname;
        print 1 == $dbh->do($db_com) ? "Database created\n":"An error occured while creating database. Maybe it exists?\n";
        #print "Executing: ".$db_com."\n";
    } elsif ($_[0] eq "delete") {
        my $db_com="DROP DATABASE ".$dbname;
        #print "Executing: ".$db_com."\n";
        print 1 == $dbh->do($db_com) ? "Database deleted\n":"An error occured while creating database. Maybe it exists?\n";
    }
} 
```

我的理解是，我们会将这些声明为全局变量，以供主代码和子程序使用。然而，这给出了以下输出：

```
#~/perlscripts/dbtest.pl -c hellos
Use of uninitialized value $sqluser in concatenation (.) or string at /root/perlscripts/dbtest.pl line 20.
Use of uninitialized value $sqlpass in concatenation (.) or string at /root/perlscripts/dbtest.pl line 20.
Username is  Password is
Use of uninitialized value $sqluser in concatenation (.) or string at /root/perlscripts/dbtest.pl line 44.
Use of uninitialized value $sqlpass in concatenation (.) or string at /root/perlscripts/dbtest.pl line 44.
Username is  Password is
DBI connect('','',...) failed: Access denied for user 'root'@'localhost' (using password: NO) at /root/perlscripts/dbtest.pl line 45.
Can't call method "do" on an undefined value at /root/perlscripts/dbtest.pl line 50. 
```

我不想将这些作为参数传递给 sub，而是将它们用作全局变量。有人可以帮我确定我对范围界定的误解吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T11:11:50.177

调用子例程时未声明变量：

```
&ArgParser;                 # subroutine call
our ($sqluser,$sqlpass);    # declaration

$sqluser="root";            # assignment
$sqlpass="mypassword"; 
```

为了在子程序中使用这些全局变量，将子程序放在变量声明之后。

但是，使用全局变量是一件坏事，您应该尽可能避免使用它。您可以改为这样做，例如：

```
my $sqluser = "root";
my $sqlpass = "mypass";

ArgParser($sqluser, $sqlpass);    # you should not use & in subroutine calls 
```

然后在子程序内部：

```
sub ArgParser {
    my ($sqluser, $sqlpass) = @_;
    ... 
```

通过这种方式，您的变量被很好地封装并且不会被意外操作。

关于`&`子例程调用中的 & 符号，这记录在[perldoc perlsub](http://perldoc.perl.org/perlsub.html)中：

```
To call subroutines:

NAME(LIST);   # & is optional with parentheses.
NAME LIST;    # Parentheses optional if predeclared/imported.
&NAME(LIST);  # Circumvent prototypes.
&NAME;        # Makes current @_ visible to called subroutine. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T14:43:33.257

Perl 没有*全局*变量。Perl 有：

*   包变量。
*   词法范围的变量。

包是一个*命名空间*。在 Perl 中，命名空间有时称为*包*。您的默认包名称是`main`. 例如。这是完全合法的：

```
use strict;
use warnings;

$main::variable = "What? Where's my 'our' or 'my' declaration?";

print "Look, I can print $main::variable without using 'my' or 'our'!"; 
```

我只是在我的包变量名称前面加上一个包，然后就搞定了！他们存在！

这让我惊愕：

```
use strict;
use warnings;

$variable = "What? Where's my 'our' or 'my' declaration?";

print "I'm not going to print 'cause you're going to get a compilation error"; 
```

使用`use strict;`，您必须将变量声明为`our`或`my`，或者在其前面加上它所在的*包*的名称。

包变量最容易理解。包变量实际上存储在 Perl 变量结构中，因此一旦声明它们就始终可用：

```
use strict;
use warnings;

if ( 1 == 1 ) {  #Yes, I know this is always true
    our $foo = "I have a value!";
}

say "Looks like $foo has a value"; 
```

词法范围的变量更难理解。基本上，一个词法范围的变量在它定义的*块*的范围内，但是一旦你离开那个块就超出了范围。它也可用于子块：

```
use strict;
use warnings;

my $foo = "Foo has a value";

if ( $foo ) {   #Always true
    my $bar = "bar has a value";
    print "$foo\n";    # $foo has a value. This is a sub-block
    print "$bar\n";    # $bar has a value. It was defined in this block
}

print "$foo\n";    # $foo still has a value.
print "$bar\n";    # You'll get en error here. $bar out of scope here 
```

这里有一些建议：

*   您不需要预先声明子例程。那只是自找麻烦。
*   如果您在程序的开头定义变量，则可以使用`my`变量，并且它们将在您的子例程中可用，因为它们仍在范围内。
*   离开`&`子程序调用。它们会导致子例程的工作方式发生细微的变化，而这些*细微的变化*可能不是您想要的。标准只是调用子程序。
    *   避免使用`? ... : ...`，尤其是在您不使用空格的情况下。它使您的程序更难阅读，并且不会节省任何执行时间。
    *   调用子程序后立即将子程序参数拉入变量。
*   Perl 为您插入变量。Perl 有很多问题。它没有真正的面向对象。它不是面向异常的语言。它有很多杂物。最大的优势之一是您不必通过各种诡计来打印变量值。当你在 Python 粉丝周围闲逛时，使用它并自豪地抬起头来。
*   使用空格使您的代码更易于阅读。
*   也许你真正想要的是*常量*。`my`变量会起作用，但常量会确保这些值不会在程序中被意外更改。

这是您重写的代码。请注意，常量前面没有印记。这些通常不能插入到字符串中。但是，如果你用 包围它们`@{[...]}`，你也可以对它们进行插值。我在下面两种方式都做了：

```
use 5.16.3;
use strict;
use Getopt::Long;

use constant {
    SQL_USER => "root",
    SQL_PASS => "mypassword",
};

Getopt::Long::Configure qw(bundling no_getopt_compat);

sub ArgParser {
    print "Username is " SQL_USER . " Password is " . SQL_PASS . "\n";
    my $crt;
    my $delete;
    GetOptions (
        'create|c=s' => \$crt,
        'delete|d=s' => \$delete,
    );
    if ( $crt ) {
        DatabaseExec( "create", $crt );   
    }
    elsif ( $delete ) {
        DatabaseExec( "delete", $delete );    
    }
    else {
        print "No options chosen\n";
    }
}

sub DatabaseExec {
    use DBI;

    my $comand = shift;
    my $dbname = shift;

    print "Username is @{[SQL_USER]} Password is @{[SQL_PASS]}\n";

    my $dbh = DBI->connect(
        "dbi:mysql:",
        SQL_USER,
        SQL_PASS
    );

    if ( $command eq "create" ) {
        my $db_com = "create database $dbname";
        if ( $dbh->do( $db_com ) ) {
            print "Database created\n"
        }
        else {
            print "An error occured while creating database. Maybe it exists?\n";
        }
    } elsif ( $command eq "delete" ) {
        my $db_com = "DROP DATABASE $dbname";
        #print "Executing: ".$db_com."\n";
        if ( $dbh->do($db_com) ) {
            print "Database deleted\n";
        }
        else {
            print "An error occured while creating database. Maybe it exists?\n";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:19:14.713

我推荐阅读的关于变量作用域的经典资源是Mark-Jason Dominus 的[Coping with scoping](http://www.plover.com/FAQs/Namespaces.html)：它描述了 Perl 变量族（包和词法变量）的基本划分，并警告初学者可能会遇到的一些不良做法。

# php - Webservice 不解析 JSON 请求中的欧元和其他货币符号

> ID：16035444
> 
> 赞同：3
> 
> 时间：2013-04-16T11:05:35.063
> 
> 标签：php, ios, xcode, json

我正在发送带有以下符号“€”、“£”和“¥”的 json 请求。该服务返回“无法解析 json”错误。知道如何解决这个问题吗？

# delphi - Delphi & Finalbuilder EMBA 版

> ID：16035448
> 
> 赞同：1
> 
> 时间：2013-04-16T11:05:46.777
> 
> 标签：delphi, finalbuilder

我可以从另一个 FinalBuilder 脚本文件执行 FinalBuilder 构建文件 (*.fbz7) 吗？

为什么：

脚本#1（我的主脚本）应该包含一个脚本循环脚本#2 多次或基于给定变量我可以在脚本#3 或脚本#4 之间进行选择以执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:36:29.857

使用[包含项目](http://help.finalbuilder.com/Index.htm?includeproject.htm)操作，它允许您指定脚本。您实际上可以运行旧版本脚本，因此如果您有版本 6 和 7，则两者都可以运行在版本 6 中创建的脚本。

我知道您指定了 Embarcadero 版本。完整版当然有这个选项——如果限量版没有，那么升级显然会很容易。

# popup - 在检票口中关闭表单提交的弹出窗口？

> ID：16035456
> 
> 赞同：1
> 
> 时间：2013-04-16T11:06:01.800
> 
> 标签：popup, wicket

我创建了一个检票口弹出窗口，单击下面的链接会打开

新的 BookmarkablePageLink("popupLink", Popup.class)

这个 Popup 类里面有一个需要提交的表单，并且弹出窗口也关闭了。使用 PopupCloseLink 我可以关闭弹出窗口，但不会提交表单。如果我使用 AjaxSubmitButton 我如何在 onSubmit() 中关闭此弹出窗口？这可以在不使用 ModalWindow 类的情况下完成吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:19:07.443

您可以在 AjaxSubmitButton 的 onSubmit 期间附加 PopupCloseLink 添加的 javascript（请参阅：PopupCloseLink$ClosePopupPage.html）

```
 AjaxSubmitLink close = new AjaxSubmitLink("close") {
        @Override
        protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
            super.onSubmit(target, form);
            target.appendJavaScript("javascript:self.close()");
        }
    }; 
```

# c# - 在 c# 中为 OdbcConnection (System.Data.Odbc) 设置 ConnectionTimeout 不起作用

> ID：16035457
> 
> 赞同：4
> 
> 时间：2013-04-16T11:06:07.710
> 
> 标签：c#, .net, sql-server, timeout, odbc

我有一个 .net 4.0 c# 应用程序，它需要与 mssql 2008 的 odbc 连接。该连接通常运行良好。但是，当我运行一个通常运行几分钟的查询时（不，在项目的这一点上我无法优化查询运行时）我会在 30 秒后超时：

> 错误 [HYT00] [Microsoft][SQL Server Native Client 10.0]查询超时已过期

我已经尝试更改 odbc 连接的驱动程序（sqlsrv32.dll、sqlncli10.dll、sqlncli11.dll），但我总是遇到类似的错误。

这是我为模拟问题而构建的虚拟代码：

```
using (
    OdbcConnection conn =
        new OdbcConnection("DSN=d3FA;uid=sa;pwd=1234;MARS_Connection=yes;Connection Timeout=37;"))
{
    conn.ConnectionTimeout = 37;
    conn.Open();

    OdbcCommand myCommand = new OdbcCommand("WAITFOR DELAY '00:00:45'", conn);
    myCommand.ExecuteNonQuery();
} 
```

如您所见，我已经在连接字符串中设置了连接超时，并且还设置了连接的属性。但似乎这个信息（37 秒）只是从查询执行中被忽略了。超时仍会在 30 秒后发生。

从 Microsoft 我得到了 Windows ODBC API 提供[SQLSetStmtAttr-Function](http://msdn.microsoft.com/en-us/library/ms712631%28VS.85%29.aspx)的信息，这将允许设置 SQL_ATTR_QUERY_TIMEOUT 属性。也许设置这个属性可以解决我的问题 - 但我找不到任何解决方案如何通过.net设置这个值。

结论：有人知道如何增加超时值吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T11:14:50.967

使用 OdbcCommand 对象的 CommandTimeout 属性，例如

```
myCommand.CommandTimeout=37; 
```

# java - 将用户输入添加到数组

> ID：16035461
> 
> 赞同：0
> 
> 时间：2013-04-16T11:06:31.373
> 
> 标签：java, arrays, swing, jtextfield

得到了一个程序，它从 JTextFeld 获取用户输入并将它们添加到 JTextArea。这是动作监听器类：

```
/**
 * Action listener class for reading in data and processing it
 * when the Add reading button is clicked.
 */
class AddReadingListener implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
        // Fetch the new reading details

            int newDay = Integer.parseInt(dayEntryField.getText());
            double newRain = Double.parseDouble(rainEntryField.getText());

            // Clear the input
            dayEntryField.setText("");
            rainEntryField.setText("");
            dataArea.append(newDay + ": " + newRain + " cm" + "\n");
        }
    }
} 
```

我创建了一个数组来存储用户输入，但是我不知道如何将 JLabel 中的值存储到数组中？我假设它在按下按钮时需要在动作侦听器类中实现？

```
public void getRain()
{
    double[] rArray = new double[32];
    for(int c = 0;c<rArray.length;c++)
    {
        rArray[1] = Integer.parseInt(""+dayEntryField);
    }
} 
```

怀疑数组是否正确，但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:28:49.167

你可以尝试这样的事情：

```
 public class RainApplet extends JFrame {

   public RainApplet(){

   final JTextField rainEntryField = new JTextField("0", 10);

   final JTextField dayEntryField = new JTextField("0", 10);

   final JTextArea dataArea = new JTextArea("", 10, 10);

         rainEntryField.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e) {
                      // Fetch the new reading details

                    int newDay = Integer.parseInt(dayEntryField.getText());
                    double newRain = Double.parseDouble(rainEntryField.getText());

                    // Clear the input
                    dayEntryField.setText("");
                    rainEntryField.setText("");
                    dataArea.append(newDay + ": " + newRain + " cm" + "\n");

                    arr.add(newRain);
                                 }

    // end of ActionListener
        });

        // create new JPanel 'content' and add all components using BorderLayout
        JPanel content = new JPanel();
        content.setLayout(new BorderLayout(5, 5));

        // placing components around the JPanel
        content.add(rainEntryField , BorderLayout.NORTH);
        content.add(  dayEntryField, BorderLayout.EAST );
        content.add(  dataArea , BorderLayout.EAST );

        // set desirable properties for panel
        this.setContentPane(content);
        this.pack();
        this.setTitle("Rain Applet");
        this.setResizable(false);
        this.setLocationRelativeTo(null);
        this.setVisible(true);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);

           }

             private ArrayList<Double> arr = new ArrayList<Double>();

            public void addRain(Double d)  
            {
               arr.add(d); 
              }
               } 
```

这应该可以解决问题并使用上面的数组，原因由@John Snow 解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:12:57.953

您的问题没有说明您是否希望以任何方式链接这两个输入。如果你这样做，你应该使用一个`HashMap`（或者如果你觉得更容易，你可以使用两个 ArrayLists）。

您当前使用的方法不起作用。我将在下面解释：

```
public void getRain() //if you create a method that adds something, it should be named addRain() instead
{
    double[] rArray = new double[32]; //This creates a array with size 33
    for(int c = 0;c<rArray.length;c++) // here you create a loop that will run 33 times
    {
        rArray[1] = Integer.parseInt(""+dayEntryField); // This will input the value thats in the variable dayEntryField in index 1 of the array.
                                                        //This is not what you want since it will overwrite the current value thats in index 1 each time.
    }
} // End of method. Since you have added the value to an array that was created inside this method, the array will be removed by the garbage collector at this point. Hence your data will not be saved! 
```

你需要做什么：

```
//Create the list outside the method
private ArrayList<Double> arr = new ArrayList<Double>();

public void addRain() // You could also design the method to take an array as parameter, and add the data to that list (which is normally what you do(
{
   arr.add(dayEntryField); //altho, since adding element is a one-liner this could easily be done inside your listener. If you have your arraylist inside a class you will need a method tho.
} 
```

这是我可以在不查看更多代码的情况下为您提供的尽可能多的帮助。但要记住：

1.  使用`ArrayList`over 数组，因为它是动态的并且更易于使用
2.  确保arraylist在方法之外被初始化（如果你使用方法来添加值）
3.  确保您的方法的名称与他们正在做的事情相对应

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:32:13.337

使用 an`ArrayList<Double>`而不是`double`数组，并返回它。

# tsql - 在 SQL 表中存储树

> ID：16035465
> 
> 赞同：0
> 
> 时间：2013-04-16T11:06:39.490
> 
> 标签：tsql, adjacency-list

我有一张如下表，

```
Create Table Entries
(
    EntryID int,
    ParentEntryID int, // -1 if root node
    EntryText nvarchar(100)
) 
```

我需要编写一个存储过程，它接受一个*叶子* `EntryID`并从该叶子条目开始通过根条目返回所有条目。最好的方法是什么？

我想要的存储过程如下所示，

```
CREATE PROCEDURE dbo.GetPath
    @leafEntryID int
AS     
    // what to do...
GO 
```

我搜索了一下，发现了两种方法：

1.  使用临时表并基本上使用`for`循环向其中插入新行。（我不确定如何准确实现它。）
2.  使用游标。（我对这种方式不太了解，这是更好的方法吗？）

PS：我使用的是 Microsoft SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:09:35.273

您使用的模型称为[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)，它需要递归查询来处理。

在`SQL Server`和其他几个引擎中，这可以通过使用所谓的递归 CTE（公用表表达式）来实现：

```
WITH    q AS
        (
        SELECT  *
        FROM    entries
        WHERE   entryId = @leafEntryId
        UNION ALL
        SELECT  e.*
        FROM    q
        JOIN    entries e
        ON      e.entryId = q.parentEntryId
        )
SELECT  *
FROM    q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:19:48.673

[您可以在StackOverflow Wiki](https://stackoverflow.com/q/4048151/1048105)上阅读有关存储分层数据的不同方法 ，我也建议您查看这个 MS SQL 数据类型[hierarchyId](http://msdn.microsoft.com/en-us/library/bb677290.aspx)

当然，对于 MS SQL 中的邻接列表模型，您应该使用为您编写的递归 CTE [Quassnoi](https://stackoverflow.com/a/16035518/1048105)。

# sql - in 子句的表值参数比简单 in 子句慢

> ID：16035466
> 
> 赞同：4
> 
> 时间：2013-04-16T11:06:45.000
> 
> 标签：sql, sql-server, table-valued-parameters

我有一些带有一些`IN`子句的 sql 查询。为了改进查询计划缓存，我决定使用表值参数。这是示例`WHERE ID IN (SELECT ID FROM @P1)`。@P1 是以下类型的变量：

```
CREATE TYPE [dbo].[Ids] AS TABLE(
    [ID] [int] NOT NULL,
    PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (IGNORE_DUP_KEY = OFF)
) 
```

但我注意到一些查询变得更慢。这是查询示例：

```
select * from SomeTable s where ((s.SomeForeignId in (select id from @p1)) or s.SomeForeignId is null) 
```

在我的数据库上执行 2.1 秒。

和旧查询：

```
select * from SomeTable s where ((s.SomeForeignId in (1,2,3.....)) or s.SomeForeignId is null) 
```

在 1.8 秒内执行。

我注意到查询计划的差异。第一个查询的计划由两部分组成（一个用于空检查，一个用于 in 子句），然后是连接。而第二个计划只是索引搜索。

有什么方法可以改进我的参数化查询以更快地执行？

PS 这只是示例提炼查询，我想知道这`in (select id from @p1)`部分是否有任何不正确之处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:37:10.157

几个建议：

1.  [不要使用`SELECT *`- 只需列出您实际需要的列](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)。

2.  [始终使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)。

3.  使用`EXISTS`而不是`IN`（因为前者可以短路）：

    ```
    SELECT cols FROM dbo.SomeTable AS s 
      WHERE EXISTS (SELECT 1 FROM @p1 WHERE ID = s.SomeForeignId)
      OR SomeForeignId IS NULL; 
    ```

4.  上面的内容可能仍然以连接结束（本质上意味着 a `UNION`），但您可以尝试编写自己的内容`UNION ALL`以避免`OR`：

    ```
    SELECT cols FROM dbo.SomeTable AS s 
      WHERE EXISTS (SELECT 1 FROM @p1 WHERE ID = s.SomeForeignId)
    UNION ALL
    SELECT cols FROM dbo.SomeTable
      WHERE SomeForeignId IS NULL; 
    ```

令我困扰的是，您现有的任何一种变体都需要将近两秒钟。请确保有一个索引`SomeTable.SomeForeignId`- 不仅仅是一个外键约束，而是一个实际的非聚集索引。您的问题不清楚这是您寻求的索引。

# r - 从数据集中删除提及太少的项目

> ID：16035475
> 
> 赞同：2
> 
> 时间：2013-04-16T11:07:08.047
> 
> 标签：r, dataset

我是**R**用户，我有一个关于我遇到的问题的问题：

*   非常大的数据集（几乎 800k 行）
*   该数据集列出了对美国 90 年代政治家的所有捐款

经过一些数据清理后，我需要将列表减小到更易于管理的大小。由于我对多次捐赠的贡献者感兴趣，因此我决定尝试像这样限制数据集的大小。

数据集加载为“cont”

我的意图：

1.  地图提及频率：

    ```
    > table(cont$contributor_name) -> FreqCon
    > subset(FreqCon,Freq>4) -> FMI 
    ```

2.  插入一个额外的列作为 cont[,43]，名称为“include”，表示 TRUE 或 FALSE 是否应该对其进行子集化

    ```
    for(i in 1:dim(FMI)[1]){
    + ifelse(cont[i,11] %in% FMI[,1],cont[i,43] <- TRUE, cont[i,43] <- FALSE) } 
    ```

3.  子集数据集基于`cont$include`

我希望这是所有相关信息。如果需要，我很乐意提供更多信息！还：`cont[,11] = cont$contributor_name`

*问题*：目前，**R**工作非常努力，但似乎没有改变列中的任何内容。我对自己做错了什么感到困惑，因为我没有收到任何`warnings()`错误。

也许我正在尝试重新发明轮子，所以任何完成我打算做的事情的方式都会非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:24:05.880

你不需要循环。这就是矢量化旨在解决的问题。

```
FreqCon <- table(cont$contributor_name)
FMI <- names(FreqCon)[FreqCon > 4]
small_cont <- subset(cont, contributor_name %in% FMI) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:23:25.343

听起来您只是想按频率进行子集化。如果是这种情况，应该可以使用以下方法：

```
mydf[mydf$V1 %in% names(which(table(mydf$V1) > 1)), ]
#    V1          V2
# 4   s -0.30538839
# 5   e  1.51178117
# 7   s -0.62124058
# 11  e -0.01619026 
```

逻辑是只运行`table`“V1”列（您的数据集的“contributor_name”），然后确定哪些符合您的条件（这里我将其设置为任何多次出现的“V1”）。

无需创建另一列作为中间步骤。

如果这确实是您所追求的，并且您有大量数据，您可能需要考虑使用该`data.table`包：

```
> library(data.table)
> DT <- data.table(mydf)
> DT[, N := .N, by = "V1"][N > 1]
   V1          V2 N
1:  s -0.30538839 2
2:  e  1.51178117 2
3:  s -0.62124058 2
4:  e -0.01619026 2 
```

在上面，`.N`就像`table`for`data.table`并且*确实*创建了一个新列（在这种情况下，命名为“N”）。语法与基本 R 有点不同，但它应该对大数据更有效。

* * *

对于这些示例，`mydf`定义如下：

```
set.seed(1)
mydf <- data.frame(V1 = sample(letters[1:20], 12, replace = TRUE), 
                   V2 = rnorm(12))
#    V1          V2
# 1   f  0.48742905
# 2   h  0.73832471
# 3   l  0.57578135
# 4   s -0.30538839
# 5   e  1.51178117
# 6   r  0.38984324
# 7   s -0.62124058
# 8   n -2.21469989
# 9   m  1.12493092
# 10  b -0.04493361
# 11  e -0.01619026
# 12  d  0.94383621 
```

# php - 如何从其他 PHP 文件运行 PHP 文件？

> ID：16035477
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:07:21.670
> 
> 标签：php, html, containers

我有一个可以自行正常工作的 PHP 文件，但我需要它在我的主页的某个名为 file.php 的部分上运行。

我希望 myfile.php 在 file.php 中运行，我正确地将容器划分到我需要它的位置并尝试了`<?php include("myfile.php"); ?>`它的工作原理，但我想要它的自动大小。

假设 myfile.php 的表格宽度大小为 900px，但是当我打开 file.php 时，myfile.php 中的表格大小变小了。尺寸变为低于 900 像素。如何在 myfile.php 中使用 div 容器在 file.php 中运行的那个表仍然是 900px？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:13:41.840

您可以使用 php “包含”

```
<div id="container">
<?php include("myfile.php"); ?>
</div> 
```

顺便说一句，你想用大小做什么，我相信你需要 CSS 来做到这一点，而不是 php。

也许这样

我的文件.php

```
<table style="width:900px">
<tr><td></td></tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:35:01.630

第一个：index3.php

```
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>JS Change Class</title>
<script language="JavaScript" src="js/adspreview.js"type="text/javascript" xml:space="preserve"></script>
</head>
<body>
<div id="container">
        <?php include("test.php"); ?>
</div>
</body>
</html> 
```

二：teste.php

```
<table border="1" width="100%">
    <tr>
    <td bgcolor="#0000FF" colspan="2">
        <p align="center"><font color="#FFFFFF" face="Arial"><b>Test</b></font>
    </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
</table> 
```

CTRL+C + CTRL+V ^^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:48:29.263

此代码 index3.php 与 div

```
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>JS Change Class</title>
<script language="JavaScript" src="js/adspreview.js"type="text/javascript" xml:space="preserve"></script>

<div id="container">
        <td><?php include("test.php"); ?>
</div>
</html> 
```

这里是我想在 index3.php 中运行的代码

```
<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Test</title>
</head>

<body>

<table border="1" width="100%">
    <tr>
        <td bgcolor="#0000FF" colspan="2">
        <p align="center"><font color="#FFFFFF" face="Arial"><b>Test</b></font></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table>

</body>

</html> 
```

请尝试一下，我对此感到困惑。谢谢您的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:11:52.533

**在文件.php**

`include "path/to/myfile.php"`;

# wordpress - Wordpress W3 Total Cache CDN 图片问题 (timthumb)

> ID：16035478
> 
> 赞同：1
> 
> 时间：2013-04-16T11:07:26.327
> 
> 标签：wordpress, cdn, timthumb

我有一个wordpress 网页trendbasket.net，它使用了一个名为goodnews 的主题。我正在经历可怕的加载时间，我正在尝试使用名为 W3 Total Cache 的插件优化网页。

我最近注册了一个 CDN 网络（机架空间），我希望用它来减少由大图像文件引起的服务器负载。我正在使用的主题有两个选项，您可以将 timthumb 设置为打开或关闭。

问题是当你设置 timthumb 时它不能与 CDN 一起使用，它生成的代码是“ [http://0bd5ef55b96f0f7e0583-2ef896d8828e2bc0b67d5908a513e0bd.r93.cf1.rackcdn.com/en/wp-content/themes/goodnews47/framework/ scripts/timthumb.php?src=http://www.trendbasket.net/en/wp-content/uploads/2013/04/dariosaric.jpg&h=340&w=615&zc=1](http://0bd5ef55b96f0f7e0583-2ef896d8828e2bc0b67d5908a513e0bd.r93.cf1.rackcdn.com/en/wp-content/themes/goodnews47/framework/scripts/timthumb.php?src=http://www.trendbasket.net/en/wp-content/uploads/2013/04/dariosaric.jpg&h=340&w=615&zc=1) "你可以看到它仍然尝试使用在根站点上传的图像文件，而且我认为我的 cdn 不支持执行 php 文件，所以 timthumb 是死路一条。

据我了解，当您关闭 timthumb 时，主题是使用另一个名为 aqua resizer 的调整器。但是那个问题是 Wordpress 不会将这个创建的图像上传到 CDN。只有 wordpress 创建的普通媒体文件会上传到 CDN（150x150、300x300 和原始文件），但主题要求 0bd5ef55b96f0f7e0583-2ef896d8828e2bc0b67d5908a513e0bd.r93.cf1.rackcdn.com/en/wp-content/uploads/2013/ 04/haberici_dwighthoward2-150x150-100x73.jpg 不在 CDN 服务器中。

我需要帮助以某种方式设置我的 CDN，我可以同时禁用 aqua resizer 和 timthumb 或使用你们可能建议的任何其他插件。现在我迷路了，不知道要改变什么，所以感谢您的帮助。

# c# - 自定义下拉列表的好方法是什么？（需要它在提供的屏幕截图中看起来像 DDL）

> ID：16035481
> 
> 赞同：0
> 
> 时间：2013-04-16T11:07:36.893
> 
> 标签：c#, jquery, asp.net

我正在寻找一种方法，将 ASP.NET C# 中的常规 DropDownList 控件变为下拉列表的样式，如下面的屏幕截图所示。

![在此处输入图像描述](https://i.stack.imgur.com/sMebD.png)

经过搜索，我的理解是可以通过添加 CSS 来实现，尽管我对此表示怀疑。另一个可行的选择是使用 JQuery，尽管我是这方面的新手。

我的下拉列表已经存在，我只是想将它们的外观调整为屏幕截图中的外观。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:24:46.040

其中，[“Chosen”插件](http://harvesthq.github.io/chosen/)是与您的问题相近的[插件。](http://www.noupe.com/jquery/50-useful-jquery-plugins-to-enhance-your-forms.html)

为所有 DropDownList 提供任何样式名称，然后使用该名称将它们全部初始化，一个简单的示例：

```
<script>
jQuery(document).ready(function() 
{
    jQuery(".chzn-select").chosen();
});
</script>

<asp:DropDownList ID="ddlAnyId" runat="server" CssClass="chzn-select" /> 
```

# javascript - 什么 (function($) {...})(jQuery); 做？

> ID：16035487
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:07:50.517
> 
> 标签：javascript, jquery, cookies

有人可以解释一下这段代码是做什么的吗？

```
(function($) {
    $.cookie = function(key, value, options) {
         // Body of the function here
    }
})(jQuery); 
```

以这种方式声明不是更简单吗？

```
function cookie(key, value, options) {
     // Body of the function here
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T11:10:07.607

这称为闭包以避免与正在使用的其他库发生冲突`$`。这样，您可以确保`$`在该函数中使用并`jQuery`作为参数传递。

```
(function ($) {
   $(function () {
    .......
   });
})(jQuery); //<----passing jquery to avoid any conflict with other libraries. 
```

像*Mootools*，*原型*等库也使用`$`这个闭包来避免任何冲突。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T11:11:03.720

您正在创建一个接受 的匿名函数`$`，并立即调用它，传递`jQuery`. 这会创建一个闭包 where `$`is `jQuery`。也就是说，如果您知道`jQuery`在执行时它将是一个 jQuery 实例，那么您也知道这`$`将是该闭包中的一个 jQuery 实例。这是针对可能还定义`$`.

# c# - 在json中转换列表并在jquery中使用它

> ID：16035492
> 
> 赞同：1
> 
> 时间：2013-04-16T11:07:58.817
> 
> 标签：c#, jquery, asp.net, json

我有这样的结构

```
 public class CJsonFeatureQuestion
 {
    public string QuestionName { get; set; }
    public string Url { get; set; }
 }
 public class CJsonFeatureProps
 {
    public string FeatureName { get; set; }
    public string IsActive { get; set; }
    public string Url { get; set; }
    public List<CJsonFeatureQuestion> FeatureQuestion;
    public CJsonFeatureProps()
    {
        FeatureQuestion = new List<CJsonFeatureQuestion>();
    }
} 
```

并在以下帮助下将其发送到转换为 json

```
JavaScriptSerializer 
```

将其更改为 json。

它会工作还是不工作。我无法遍历 jquery 中的内部集合。

## 更新 1

```
 success: (function Success(data, status) {
                $("#loading").hide();
                for (var i = 0; i < data.length; i++) {
                    var innerData = data[i];
                    for (var j = 0; i < innerData.length; j++) {     
                   }
                }
            }), 
```

`innerData`是`object Object`，但长度未定义。

## 更新 2

jQuery 调用

```
 contentType: "application/json; charset=utf-8",
 dataType: "json", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:51:01.777

问题出在内部循环中

```
for (var j = 0; i < innerData.length; j++) {     
} 
```

它应该是

```
 for (var j = 0; j < data[i].FeatureQuestion.length; j++) {
 } 
```

问题内部循环适用于列表中的每个数据。但只有一个属性是列表类型。
所以我只在那个属性上循环然后砰的一声……
它开始工作了。

# javascript - 动态创建的图层上的 onSelect 事件

> ID：16035493
> 
> 赞同：0
> 
> 时间：2013-04-16T11:08:00.673
> 
> 标签：javascript, openlayers

我正在动态地创建不同的图层，其中包含各种功能，一切都是即时的，并且在选择每个特定功能时我需要做一些事情。我不能在这里粘贴实际的源代码，因为它有依赖关系，而且它也很长，但你可以想象如下：

```
if (e.Bubbles) {
     jQuery.each(e.Bubbles, function (i, obj) {
         jQuery.each(obj, function (n, el) {

             /* features and layers ... */
             var point = new OpenLayers.Geometry.Point(el[1],el[0]);

             /* some code here ... */
         });

         layer = new OpenLayers.Layer.Vector(i, {styleMap: e.Style});
         map.addLayer(layer);
         e.Layers.push(layer);

         /* etc. */ 
```

当我尝试将`onSelect`事件绑定到图层时，它可以工作，但它会替换上一层的行为，因此`loop`当您单击功能时，最后一层可以正常工作，但只有最后一层。这是我的代码（在循环内）：

```
selectControl = new OpenLayers.Control.SelectFeature(
    Layer,
    {
        clickout: false, 
        toggle: false,
        multiple: false, 
        hover: false,
     }
 );

selectControl.activate();

layer.events.on({
    "featureselected": function(event) {
        console.log(event.feature);
    }
}); 
```

因此，`selectControl`每次都会在循环内替换，并且它将失去以前的功能，并且仅适用于最新层。

我也尝试将所有层作为数组传递（这应该可以工作）但没有任何成功。

```
selectControl = new OpenLayers.Control.SelectFeature(
    e.Layers,
    {
        clickout: false, 
        toggle: false,
        multiple: false, 
        hover: false,
        onSelect: function(event) {
            console.log(event.feature);
        },
    }
);

selectControl.activate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:38:19.330

所以，这就是答案！

```
if (typeof selectControl == "object") {
    selectControl.setLayer(map.getLayersByClass("OpenLayers.Layer.Vector"));

} else {

    selectControl = new OpenLayers.Control.SelectFeature(
        layer,
        {
            clickout: false, 
            toggle: false,
            multiple: false, 
            hover: false,
        }
    );

    map.addControl(selectControl);
    selectControl.activate();               
}

layer.events.on({
    "featureselected": function(event) {
        console.log(event.feature);
    }
}); 
```

# mysql - 您不能在 FROM 子句中指定目标表 '' 进行更新

> ID：16035495
> 
> 赞同：0
> 
> 时间：2013-04-16T11:08:02.270
> 
> 标签：mysql

我正在尝试在 mysql 中运行此查询

```
UPDATE studentassessment sa SET sa.issubmitted=FALSE WHERE 
sa.studentassessmentid <> 
    (SELECT studentassessmentid FROM studentassessment sa1 WHERE 
    sa.StudentId=sa1.StudentId
    AND sa.AssessmentPeriodId=sa1.AssessmentPeriodId 
    ORDER BY sa1.studentassessmentid DESC LIMIT 0, 1) 
AND sa.studentid=568; 
```

这给了我这个错误

> 您不能在 FROM 子句中指定目标表 'sa' 进行更新

我发现了这类问题的数量，但它们特定于他们被问到的查询，所以对我没有多大帮助，从 SO 我试图改变这样的查询的答案之一

```
UPDATE studentassessment sa SET issubmitted=FALSE WHERE 
sa.studentassessmentid <> 
    (
      SELECT studentassessmentid FROM 
        (
          SELECT studentassessmentid FROM studentassessment sa1 WHERE 
              sa.StudentId=sa1.StudentId
          AND sa.AssessmentPeriodId=sa1.AssessmentPeriodId 
          ORDER BY sa1.studentassessmentid DESC LIMIT 0, 1
         )  AS T
    )
AND sa.studentid=568; 
```

然后我开始收到这个错误

> “where 子句”中的未知列“sa.StudentId”

有什么帮助吗？

**编辑**

这也不起作用

```
UPDATE studentassessment sa
INNER JOIN 
(SELECT studentassessmentid FROM studentassessment sa1 WHERE 
    sa.StudentId=sa1.StudentId
    AND sa.AssessmentPeriodId=sa1.AssessmentPeriodId 
    ORDER BY sa1.studentassessmentid DESC LIMIT 0, 1) T
ON sa.studentassessmentid<>T.StudentAssessmentId 
SET sa.issubmitted=0
WHERE sa.studentid=568; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:15:40.923

[MySQL 有这个限制](http://dev.mysql.com/doc/refman/5.0/en/update.html)；您无法更新您从中选择的表格，并且您对此无能为力。

> 目前，您无法在子查询中更新表并从同一个表中进行选择。

但是，您可以这样做：

```
CREATE TEMPORARY TABLE studentassessmentids (
    `id` INT,
    PRIMARY KEY (`id`)
);

LOCK TABLE studentassessment WRITE;
INSERT INTO studentassessmentids (SELECT ... prepare your ids);

UPDATE studentassessment sa
SET sa.issubmitted=FALSE
WHERE sa.studentassessmentid NOT IN (
    SELECT id
    FROM studentassessmentids AS ids
    WHERE ids.id = sa.studentassessmentid
)

UNLOCK TABLES;
DROP TEMPORARY TABLE studentassessmentids; 
```

我从上面写了代码，所以它不能直接工作，但希望你能够采用这个想法。

如果您可以将查询重写为一组`JOIN`语句，例如（来自 mysql.com 的示例）：

```
UPDATE items,month SET items.price=month.price
WHERE items.id=month.id; 
```

它应该可以工作，但我看不出如何在`NOT IN`不编写难以阅读的代码的情况下使用连接来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:34:35.440

找到了答案

```
 UPDATE studentassessment dest,
    (
       SELECT studentassessmentid,assessmentperiodid 
        FROM studentassessment sa WHERE sa.studentid=568
        AND sa.studentassessmentid<>
            (
               SELECT studentassessmentid FROM studentassessment s 
                WHERE s.studentid=568 
                AND sa.assessmentperiodid=s.assessmentperiodid
                ORDER BY studentassessmentid DESC LIMIT 1
            )

    )src

    SET dest.issubmitted=FALSE 
    WHERE dest.studentassessmentid=src.studentassessmentid 
```

# html - 对 display:inline 和 float:left 感到困惑

> ID：16035499
> 
> 赞同：2
> 
> 时间：2013-04-16T11:08:07.330
> 
> 标签：html, css

假设我有两个元素：

```
<span class="b">This is inline element</span>
<div class="a"></div>

.a {
   width:100px;
   height:100px;
   background: red;
   float: left;
} 
```

元素在`span`float元素之后：<a href="http://jsfiddle.net/YVW6Y/1/" rel="nofollow">demo

但我认为内联元素是标准流程，所以它的位置不应该受到浮动元素的影响？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:20:32.923

[规范可能会为您解决这个](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)问题

> 在块格式化上下文中，每个框的左外边缘接触包含块的左边缘（对于从右到左的格式化，右边缘接触）。即使存在浮点数也是如此……除非该框建立了新的块格式化上下文

至于内联元素

> 一般来说，线框的左边缘接触其包含块的左边缘，而右边缘接触其包含块的右边缘。但是，浮动框可能会出现在包含块边缘和行框边缘之间。因此，尽管在同一行内格式化上下文中的行框通常具有相同的宽度（包含块的宽度），但如果可用的水平空间因浮动而减少，它们的宽度可能会有所不同

还有[一节专门介绍“花车旁边”。](http://www.w3.org/TR/CSS2/visuren.html#bfc-next-to-float)

本质上，块级元素创建了一个新的块上下文，将浮动向下推到下一行。 `inline`元素不会创建新的块上下文，因此浮动可以存在于同一行。请注意，只有在两个元素都有空间的情况下才会出现这种情况：http: [//jsfiddle.net/YVW6Y/3/](http://jsfiddle.net/YVW6Y/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:13:26.200

内联格式是文本通常得到的。非正式地，这意味着事物被填充成行。

浮点数是在当前行向左或向右移动的框。浮动最有趣的特征是内容可以沿着它的一侧流动。

所以浮点数是第三类格式化模型。它与 inline 相关，非正式地说，是一种布局模型。

# json - 如何从 Store.sync() 上的服务器获取响应消息

> ID：16035501
> 
> 赞同：1
> 
> 时间：2013-04-16T11:08:19.677
> 
> 标签：json, extjs

我有一家商店，我想`sync()`用服务器。

`Store.sync()`方法有`success`和`failure`属性函数，它们有`Ext.data.Batch`和`options`作为参数。

如果我从服务器收到这样的响应：

```
{
  success: false,
  msg: "test error!"
} 
```

`failure`方法调用。

如何`msg`从`failure`方法内访问响应属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T12:22:54.277

```
 store.sync({
        failure: function(batch, options) {
            alert(batch.proxy.getReader().jsonData.msg);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-03T21:40:00.320

> Store.sync() 方法具有成功和失败属性函数，它们具有 Ext.data.Batch 和选项作为参数。

`batch.exceptions`数组内收集的任何失败操作。它有你需要的一切。只需通过失败的操作，处理它们。

操作失败消息（“测试错误！”）将在里面 - **operation.error**

```
store.sync({
    failure: function(batch, options) {
        Ext.each(batch.exceptions, function(operation) {
            if (operation.hasException()) {
                Ext.log.warn('error message: ' + operation.error);
            }
        });
    }
}); 
```

代理在[processResponse](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.proxy.Server-method-processResponse)方法中设置它：

```
operation.setException(result.message); 
```

在哪里：

*   Operation 的[setException](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.Operation-method-setException)方法设置其`error`属性（出现错误消息）。
*   `result`是[Ext.data.ResultSet](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.ResultSet)并且`result.message`if 由代理的阅读器填充，使用阅读器的`messageProperty`

但是，默认情况下 reader 的 message 属性是`messageProperty: 'message'`. 在您的情况下，您应该使用正确的 messageProperty 配置阅读器，例如：

```
reader: {
    ...
    messageProperty: 'msg'
} 
```

`metadata`或从带有配置属性的服务器响应返回，例如：

```
{
    "success": false,
    "msg": "test error!", 
    "metaData": {
        ...
        "messageProperty": 'msg'
    }
} 
```

[Json 阅读器 - 响应元数据（文档部分）](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.reader.Json)

# c# - 在 windows phone 7 中，导航服务是特定于页面的。如何从外部页面调用？

> ID：16035502
> 
> 赞同：0
> 
> 时间：2013-04-16T11:08:26.303
> 
> 标签：c#, windows-phone-7, windows-phone-8, navigationservice

我的应用程序从 mainpage.xaml 收集用户名和密码并向服务器发出 httprequest。如果来自服务器的响应是 PASS，那么我希望将控件导航到另一个 xaml 页面。我使用了以下代码

```
 if ((rs1[0].Trim()).Equals("PASS"))
       {
          NavigationService.Navigate(new Uri("/SecondPage.xaml", UriKind.Relative));
                     }
       else
       {
           MessageBox.Show(rs);
       } 
```

其中 rs1 是一个字符串数组。

但我得到一个 NullReferenceException。请建议任何替代方式。提前致谢。

完整代码如下：

```
namespace aquila1
{
    public partial class MainPage : PhoneApplicationPage
    {
        static string username;
        static string password;
        static string rs;

        static NavigationService ns = new NavigationService();

        // Constructor
        public MainPage()
        {
            InitializeComponent();

        }

        private static ManualResetEvent allDone = new ManualResetEvent(true);

       private void HyperlinkButton_Click_1(object sender, RoutedEventArgs e)
       {
           username = textbox1.Text;
           password = textbox2.Text;
           System.Diagnostics.Debug.WriteLine(username);
           System.Diagnostics.Debug.WriteLine(password);

           HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://60.243.245.181/fms_tracking/php/mobile_login.php?username=" + username + "&password=" + password);

           request.ContentType = "application/x-www-form-urlencoded";

           // Set the Method property to 'POST' to post data to the URI.
           request.Method = "POST";

           // start the asynchronous operation
           request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

           // Keep the main thread from continuing while the asynchronous 
           // operation completes. A real world application 
           // could do something useful such as updating its user interface. 
           allDone.WaitOne();

       }

        private static void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {

            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            Stream postStream = request.EndGetRequestStream(asynchronousResult);

            // Console.WriteLine("Please enter the input data to be posted:");
            string postData = username + "+" + password;
            System.Diagnostics.Debug.WriteLine(postData);
            // Convert the string into a byte array. 
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            // Write to the request stream.
            postStream.Write(byteArray, 0, postData.Length);
            postStream.Close();

            // Start the asynchronous operation to get the response
            request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
        }

        private static void GetResponseCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamRead = new StreamReader(streamResponse);
           string responseString = streamRead.ReadToEnd();
            rs = responseString; 
            System.Diagnostics.Debug.WriteLine(responseString);
            System.Diagnostics.Debug.WriteLine("@@@@@");
            System.Diagnostics.Debug.WriteLine(rs);

            // Close the stream object
            streamResponse.Close();
            streamRead.Close();

            // Release the HttpWebResponse
            response.Close();
            move2();

            allDone.Set();

        }

       private static void move2()
       {

           string[] rs1 = rs.Split(':');
           if ((rs1[0].Trim()).Equals("PASS"))
           {

               ns.Navigate(new Uri("/SecondPage.xaml", UriKind.Relative));
           }
           else
           {
               MessageBox.Show(rs);
           }
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-28T19:00:49.957

我很确定您无法在 Silverlight 中初始化 a `new NaviagtionService()`，您只能从属性中获取一个实例。`PageInstance.NavigationService`

（参见[http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice(v=vs.95).aspx)）

您可以使用 获取当前页面`(Application.Current.RootVisual as Frame).Content as PhoneApplicationPage`，因此您可以`PageInstance.NavigationService`访问它。

但是更简单的方法是直接调用，`Navigate()`就可以了。`Frame``(Application.Current.RootVisual as Frame).Navigate(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:14:29.307

@user2090226 你的 SecondPage.xaml 在根目录下吗？只是问你，因为人们犯了愚蠢的错误。否则尝试使用 uri 进入完整路径。最好检查您的导航。您创建了一个对象而不是工厂方法。前任：

```
new Uri("/MyProject;component/AllPageFolder/SecondPage.xaml",Urikind.Relative); 
```

对于在根目录中创建的页面，请使用以下示例：

```
NavigationService.Navigate(new Uri("/Photography;component/SlideShow.xaml", UriKind.Relative)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:12:57.470

我的心理调试能力告诉我，您已经在其中编写了代码： - 静态构造函数 - 构造函数 - 在调用之前调用的方法`OnNavigatedTo`

一般来说，`NavigationService`是`null`在你输入之前的`OnNavigatedTo`方法。您可能希望将该逻辑从其当前位置移动。

无论如何，它现在位于哪里？

# authentication - 使用已知凭据向 Youtube REST 进行身份验证

> ID：16035504
> 
> 赞同：0
> 
> 时间：2013-04-16T11:08:32.960
> 
> 标签：authentication, youtube, youtube-api

我正在开发一个网络平台，不同的用户可以将视频上传到我的 youtube 频道。

所以我认为是以下流程：

在服务器上，我使用我已知的凭据对 Youtube REST API 进行身份验证，然后将之前从用户上传的视频上传到我的服务器。

但似乎我无法以这种方式验证自己。在文档中总是有 OAuth2 并且用户必须授予对其帐户的访问权限。但我只想授予对我帐户的访问权限。上传此视频的用户与此过程无关，也不需要 youtube 帐户。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:47:08.013

找到了答案：

有一个已弃用的功能仍然存在：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_clientlogin#Authentication](https://developers.google.com/youtube/2.0/developers_guide_protocol_clientlogin#Authentication)

# c# - 将结构转换为对象以进行空比较不会导致装箱？

> ID：16035505
> 
> 赞同：7
> 
> 时间：2013-04-16T11:08:37.747
> 
> 标签：c#, performance, casting, nullable, boxing

我在做一些基准测试时遇到了这个问题。

```
bool b;
MyStruct s;
for (int i = 0; i < 10000000; i++)
{
    b = (object)s == null;
} 
```

> 调试：200 毫秒
> 
> 释放：5 毫秒

```
bool b;
MyStruct? s = null;
for (int i = 0; i < 10000000; i++)
{
    b = (object)s == null;
} 
```

> 调试：800 毫秒
> 
> 释放：800 毫秒

我可以理解这个结果，因为将可空结构转换为该结构`object`的盒装类型。**但是为什么不强制`struct s`转换`object`为进行空比较（如在第一种方法中）导致相同的性能？**编译器是否正在优化调用以`false`始终返回，因为结构不能为空？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T11:10:25.637

是的，编译器正在优化它。

它知道结构永远不能为空，因此将其转换为对象的结果永远不能为空 - 所以它只会`b`在第一个示例中设置为 false。事实上，如果你使用*Resharper*，它会警告你表达式总是错误的。

当然，第二个可以为空的可以为空，因此它必须进行检查。

（您也可以使用`Reflector`检查编译器生成的 IL 代码来验证这一点。）

原始测试代码不好，因为编译器知道可空结构将始终为空，因此也会优化该循环。不仅如此，而且在发布版本中，编译器意识到`b`没有使用并优化整个循环。

为了防止这种情况发生，并展示在更真实的代码中会发生什么，像这样测试它：

```
using System;
using System.Diagnostics;

namespace ConsoleApplication1
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            bool b = true;
            MyStruct? s1 = getNullableStruct();
            Stopwatch sw = Stopwatch.StartNew();

            for (int i = 0; i < 10000000; i++)
            {
                b &= (object)s1 == null; // Note: Redundant cast to object.
            }

            Console.WriteLine(sw.Elapsed);

            MyStruct s2 = getStruct();
            sw.Restart();

            for (int i = 0; i < 10000000; i++)
            {
                b &= (object)s2 == null;
            }

            Console.WriteLine(sw.Elapsed);
        }

        private static MyStruct? getNullableStruct()
        {
            return null;
        }

        private static MyStruct getStruct()
        {
            return new MyStruct();
        }
    }

    public struct MyStruct {}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:19:58.767

事实上，两个循环在编译时都会有一个空的主体！

要使第二个循环正常运行，您必须删除`(object)`铸件

这就是我编译你的代码时的样子，

```
public struct MyStruct
{ 
}

class Program
{
    static void Main(string[] args)
    {
        test1();
        test2();
    }

    public static void test1()
    {
        Stopwatch sw = new Stopwatch();
        bool b;
        MyStruct s;
        for (int i = 0; i < 100000000; i++)
        {
            b = (object)s == null;
        }
        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds);
        Console.ReadLine();
    }

    public static void test2()
    {
        Stopwatch sw = new Stopwatch();
        bool b;
        MyStruct? s = null;
        for (int i = 0; i < 100000000; i++)
        {
            b = (object)s == null;
        }
        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds);
        Console.ReadLine();
    }
} 
```

伊利诺伊：

MyStruct （因为您没有提供任何内容，所以为空）

```
.class public sequential ansi sealed beforefieldinit ConsoleApplication1.MyStruct
extends [mscorlib]System.ValueType
{
    .pack 0
    .size 1

} // end of class ConsoleApplication1.MyStruct 
```

您示例中的第一个循环

```
.method public hidebysig static 
void test1 () cil managed 
{
// Method begins at RVA 0x2054
// Code size 17 (0x11)
.maxstack 2
.locals init (
    [0] valuetype ConsoleApplication1.MyStruct s,
    [1] int32 i
)

IL_0000: ldc.i4.0
IL_0001: stloc.1
IL_0002: br.s IL_0008
// loop start (head: IL_0008)
    IL_0004: ldloc.1
    IL_0005: ldc.i4.1
    IL_0006: add
    IL_0007: stloc.1

    IL_0008: ldloc.1
    IL_0009: ldc.i4 100000000
    IL_000e: blt.s IL_0004
// end loop

IL_0010: ret
} // end of method Program::test1 
```

第二个循环

```
.method public hidebysig static 
void test2 () cil managed 
{
// Method begins at RVA 0x2074
// Code size 25 (0x19)
.maxstack 2
.locals init (
    [0] valuetype [mscorlib]System.Nullable`1<valuetype ConsoleApplication1.MyStruct> s,
    [1] int32 i
)

IL_0000: ldloca.s s
IL_0002: initobj valuetype [mscorlib]System.Nullable`1<valuetype ConsoleApplication1.MyStruct>
IL_0008: ldc.i4.0
IL_0009: stloc.1
IL_000a: br.s IL_0010
// loop start (head: IL_0010)
    IL_000c: ldloc.1
    IL_000d: ldc.i4.1
    IL_000e: add
    IL_000f: stloc.1

    IL_0010: ldloc.1
    IL_0011: ldc.i4 100000000
    IL_0016: blt.s IL_000c
// end loop

IL_0018: ret
} // end of method Program::test2 
```

# c# - 在 C# (asp.net MVC3) 中用逗号和小数格式化数字

> ID：16035506
> 
> 赞同：54
> 
> 时间：2013-04-16T11:08:40.600
> 
> 标签：c#, asp.net-mvc-3, formatting, number-formatting

我需要用逗号和小数点显示一个数字。

例如：案例 1：十进制数是 432324（这没有逗号或小数点）。
需要显示为：**432,324.00**。
不是：432,324

案例 2：十进制数是 2222222.22（这没有逗号）。
需要显示为：**2,222,222.22**

我试过`ToString("#,##0.##")`了，但它的格式不正确。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-06-21T10:16:15.420

```
int number = 1234567890;
Convert.ToDecimal(number).ToString("#,##0.00"); 
```

你会得到结果`1,234,567,890.00`。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-16T11:48:39.097

也许您只是想要标准格式字符串`"N"`，如

```
number.ToString("N") 
```

它将使用千位分隔符和固定数量的小数。千位分隔符的符号和小数点的符号取决于`CultureInfo`您使用的格式提供程序（通常是 ），小数位数也是如此（通常为 2，根据您的需要）。

如果格式提供程序指定了不同的小数位数，并且您不想更改格式提供程序，则可以在 之后给出小数位数`N`，如`.ToString("N2")`.

编辑：逗号之间的组的大小由

```
CultureInfo.CurrentCulture.NumberFormat.NumberGroupSizes 
```

数组，假设您没有指定特殊的格式提供程序。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-21T16:40:16.680

我有同样的问题。我想像电子表格中的“常规”格式那样格式化数字，这意味着如果它们很重要则显示小数，但如果不重要则将它们去掉。换句话说：

> 1234.56 => 1,234.56
> 
> 1234 => 1,234

它需要支持小数点后的最大位数，但如果不需要，不要在尾随零或点，当然，它需要文化友好。我从来没有真正想出单独使用[String.Format的干净方法，但是 String.Format 和](http://msdn.microsoft.com/en-us/library/system.string.format%28v=vs.110%29.aspx)[Regex.Replace的组合以及](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace%28v=vs.110%29.aspx)[NumberFormatInfo.CurrentInfo](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currentinfo%28v=vs.110%29.aspx)的一些文化帮助完成了这项工作（LinqPad C# 程序）。

```
string FormatNumber<T>(T number, int maxDecimals = 4) {
    return Regex.Replace(String.Format("{0:n" + maxDecimals + "}", number),
                         @"[" + System.Globalization.NumberFormatInfo.CurrentInfo.NumberDecimalSeparator + "]?0+$", "");
}   

void Main(){
    foreach (var test in new[] { 123, 1234, 1234.56, 123456.789, 1234.56789123 } )
        Console.WriteLine(test + " = " + FormatNumber(test));
} 
```

产生：

```
123 = 123
1234 = 1,234
1234.56 = 1,234.56
123456.789 = 123,456.789
1234.56789123 = 1,234.5679 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-02-14T13:42:28.997

尝试

```
ToString("#,##0.###") 
```

产生：

> 1234.55678 => 1,234.556
> 
> 1234 => 1,234

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-04-16T11:21:12.590

尝试

```
ToString("#,##0.00") 
```

来自 MSDN

*“0”自定义格式说明符用作零占位符符号。如果正在格式化的值在格式字符串中出现零的位置有一个数字，则该数字将复制到结果字符串中；否则，结果字符串中将出现零。小数点前最左边的零和小数点后最右边的零的位置决定了结果字符串中始终存在的数字范围。

**“00”说明符使值四舍五入到小数点前最接近的数字，其中始终使用从零开始的四舍五入。例如，使用“00”格式化 34.5 将产生值 35。***

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-07-22T17:14:45.933

对于剃刀视图：

```
$@string.Format("{0:#,0.00}",item.TotalAmount) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-05-10T14:09:04.730

```
CultureInfo us = new CultureInfo("en-US");
TotalAmount.ToString("N", us) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-16T11:20:31.313

您的问题不是很清楚，但这应该可以实现您想要做的事情：

```
decimal numericValue = 3494309432324.00m;
string formatted = numericValue.ToString("#,##0.00"); 
```

然后`formatted`将包含：**3,494,309,432,324.00**

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-20T23:31:16.547

所需要的只是“#,0.00”，其余的由 c# 完成。

Num.ToString("#,0.00"")

*   "#,0" 格式化千位分隔符
*   “0.00”强制两位小数

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-14T01:17:32.517

如果您使用字符串变量，您可以直接使用`:`然后指定格式（例如 N0、P2 等）来格式化字符串。

```
decimal Number = 2000.55512016465m;
$"{Number:N}" #Outputs 2,000.55512016465 
```

您还可以通过在末尾添加一个数字来指定要显示的小数位数，例如

```
$"{Number:N1}" #Outputs 2,000.5
$"{Number:N2}" #Outputs 2,000.55
$"{Number:N3}" #Outputs 2,000.555
$"{Number:N4}" #Outputs 2,000.5551 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-23T11:42:52.657

```
string Mynewcurrency = DisplayIndianCurrency("7743450.00");
        private string DisplayIndianCurrency(string EXruppesformate) 
        { 
        string fare = EXruppesformate;
        decimal parsed = decimal.Parse(fare, CultureInfo.InvariantCulture);
        CultureInfo hindi = new CultureInfo("en-IN");
     // string text = string.Format(hindi, "{0:c}", parsed);if you want <b>Rs 77,43,450.00</b>
    string text = string.Format(hindi, "{0:N}", parsed); //if you want <b>77,43,450.00</b>
      return ruppesformate = text;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-06T12:45:05.547

对于现在正在查看此内容并在使用时获得“方法 'ToString' 没有重载需要 1 个参数”的任何人：

```
TotalNumber.ToString("N") 
```

我的解决方案是使用：

```
TotalNumber.Value.ToString("N") 
```

当直接在 MVC 视图中工作时，我经常会遇到这个问题，以下方法不起作用：

```
@Model.Sum(x => x.Number).ToString("N") 
```

而这有效：

```
@Model.Sum(x => x.Number).Value.ToString("N") 
```

# red5 - Red5 连接不会在客户端断开连接时关闭

> ID：16035510
> 
> 赞同：1
> 
> 时间：2013-04-16T11:09:04.780
> 
> 标签：red5

我有一个 Red5 1.0 下的应用程序。客户端连接丢失后，服务器不会检测到它并且不会断开此客户端。此代码解决了一个问题

```
 for(Set<IConnection> listConnection : connections) { 
        Iterator<IConnection> it = listConnection.iterator(); 
        while (it.hasNext()) { 
                IConnection con = it.next();
                ((IServiceCapableConnection)con).ping();
        } 
}   } 
```

我只是每 5 分钟调用一次此代码。

知道为什么 Red5 不自己检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T03:31:12.947

检查设置

```
rtmp.ping_interval=1000
rtmp.max_inactivity=5000 
```

在配置文件中`/usr/local/red5/conf/` **`red5.properties`**

# android - 内部保存文件

> ID：16035513
> 
> 赞同：0
> 
> 时间：2013-04-16T11:09:13.860
> 
> 标签：android, file, save, output

当我遇到以下代码时，我正在关注来自 Google 的有关保存文件的[Android教程：](http://developer.android.com/training/basics/data-storage/files.html "安卓")

```
String filename = "myfile";
String string = "Hello world!";
FileOutputStream outputStream;

try {
  outputStream = openFileOutput(filename, Context.MODE_PRIVATE);
  outputStream.write(string.getBytes());
  outputStream.close();
} catch (Exception e) {
  e.printStackTrace();
} 
```

“openFileOutput”给出一个错误说是“未定义”所以我创建了一个

```
Context fileContext; 
```

在相同的方法上，但它给出了一个错误，说我应该初始化它。我应该如何初始化它？或者我应该在类中声明它，因为如果我将它从方法中取出并在类中声明它不会给我一个错误。

我的代码：

```
public class DataManager
{
private static DataManager _instance;
private Context fileContext;
public String[] arraySentences;

private DataManager()
{}

public static DataManager getInstance()
{
    if (_instance == null)
    {
        _instance = new DataManager();
    }

    return _instance;
}

public void saveSentences(String jsonData)
{
    String filename = "myfile";
    FileOutputStream outputStream;

    try
    {
        outputStream = fileContext.openFileOutput(filename, Context.MODE_PRIVATE);
        outputStream.write(jsonData.getBytes());
        outputStream.close();
    } 
    catch (Exception e)
    {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:33:46.513

试试这个方法。。

```
public void createFile(Context c) throws IOException{
     String FILENAME = timeStamp();
     String string = "hello world!";

     FileOutputStream fos = c.openFileOutput(FILENAME, Context.MODE_PRIVATE);
    fos.write(string.getBytes());
    fos.close();

} 
```

调用上述方法

```
createFile(myActivity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:13:52.950

假设您在扩展 Context 的类（如 Activity）中声明此方法，因此您可以在不声明任何附加 Context 对象的情况下调用它。

问候。

# java - 在 Java 中使用原始包装类

> ID：16035517
> 
> 赞同：0
> 
> 时间：2013-04-16T11:09:29.713
> 
> 标签：java

以下两种方式声明整数有什么区别

```
Integer Age = 25;
Integer Age = new Integer(25); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T11:12:29.133

第一个整数来自整数池，`==`检查将返回 true

```
 Integer age = 25;
        Integer a = 25;
        System.out.println(a == age); 
```

第二个每次都会创建新对象，并且`==`检查将返回 false。

```
 Integer age = new Integer(25);
        Integer a = new Integer(25);
        System.out.println(a == age); 
```

我必须补充一点，默认情况下仅缓存通过 -128 -> 127 的整数，因此以下代码段也将返回 false。您可以通过将属性设置为`java.lang.Integer.IntegerCache.high`高于 127 的值来调整它，它会返回 true。

```
 Integer age = 129;
        Integer a = 129;
        System.out.println(a == age); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:12:44.210

第一个使用自动装箱，而第二个每次都会创建一个新对象。如果您可以使用 Integer.valueOf() 最好，如果它已经在缓存中可用，它将从 Integer 类中维护的本地缓存中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:12:01.953

是的！

不要使用这一行，因为它会创建一个重复的对象：

```
Integer Age = new Integer(25); 
```

就像使用这样的东西一样：

```
String age = new String("old"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:17:47.487

两者是不同的我们知道age是引用变量并且存储在堆栈中第一行的25将存储在堆栈中，我们可以说25是你在第二行创建的堆中对象的地址，并且地址位置 25 处的堆值是整数 25

# javascript - 为特定日期设置默认值

> ID：16035519
> 
> 赞同：0
> 
> 时间：2013-04-16T11:09:40.370
> 
> 标签：javascript

我在我的网站上使用来自[http://jsfiddle.net/urQc4/](http://jsfiddle.net/urQc4/)的脚本来显示/编辑商店营业时间。该脚本工作正常，但我想在 JavaScript 中添加一些行来为特定日期/时间设置一些默认值。

当我将此添加到 JavaScript 的第 47 行时，它可以工作

```
$('#Sunday .from').val(["12"]); 
```

但是当我尝试添加代码来设置小时、分钟和上午/下午时它不起作用

```
$('#Sunday .from').val(["12"]);
$('#Sunday .from').val([":30"]);
$('#Sunday .from').val(["PM"]); 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:15:45.400

我想那是你`selectors`的不对。

您必须更具体并选择正确的下拉菜单。

*我得到了这个片段来工作：*

```
$('#Sunday .from.hour').val(["12"]);
$('#Sunday .from.min').val([":30"]);
$('#Sunday .from.ampm').val(["PM"]); 
```

`.from.hour`确保元素同时具有和`from`css`hour`类。

# autocomplete - 区分大小写的自动完成

> ID：16035521
> 
> 赞同：0
> 
> 时间：2013-04-16T11:09:44.207
> 
> 标签：autocomplete, primefaces

请我在自动完成primefaces中对大小写敏感有一个大问题。

例如，假设我的列表有`Alcatel`，`ABost`

当我输入时`a`，`Alcatel1 是自动完成的唯一结果

但是当我输入时`A`，两者`Alcatel`都`ABost`显示出来。

> 我应该怎么做才能自动完成以列出这两种情况下的两个项目？

公共列表完成（字符串查询）{

列表结果 = new ArrayList();

```
 for (int i = 0; i<list.size(); i++) {  

        if(list.get(i).getNomFabricant().contains(query))
        results.add(list.get(i).getNomFabricant());  
    }  

    return results;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:39:49.430

可以知道 Thx 以任何方式为您提供帮助 :) 这是代码

```
public List<String> complete(String query) {  
        List<String> results = new ArrayList<String>();  

        for (int i = 0; i<list.size(); i++) {          
            if(list.get(i).getNomFabricant().toUpperCase().contains(query.toUpperCase()))
            results.add(list.get(i).getNomFabricant());  
        }  

        return results;  
    } 
```

# bitbake - bitbake 如何区分多台机器的单个包

> ID：16035522
> 
> 赞同：3
> 
> 时间：2013-04-16T11:09:47.073
> 
> 标签：bitbake

我正在使用 yocto 项目的 1.1.1 版本。Bitbake：BitBake Build Tool Core 版本 1.13.3，bitbake 版本 1.13.3。

我有我自己的层：meta-mine。我在 meta-mine/conf/machine/ 中定义了三台机器让我们称它们为 ab.conf 和 cd.conf 和 ef.conf

一切正常，但我想创建一个对于我对 bitbake 了解不多的食谱来说有点太复杂的食谱。

我为 ab end cd 机器创建了不同的 initscripts，我也需要它们来用于 ef。不幸的是，我不知道如何做到这一点。

**想法1**
我在想什么：
。
.
.
PACKAGES = "${PN} ${PN}-ab ${PN}-cd"
COMPATIBLE_MACHINE_${PN}-ab = "ab ef"
COMPATIBLE_MACHINE_${PN}-karo = "cd ef"
FILES_${PN}- ab = "${sysconfdir}/init.d/absript"
FILES_${PN}-cd = "${sysconfdir}/init.d/cdsript"

```
inherit update-rc.d

INITSCRIPT_PACKAGES = "${PN} ${PN}-ab ${PN}-cd"

INITSCRIPT_NAME_${PN}-ab = "abscript"
INITSCRIPT_PARAMS_${PN}-ab = "start 93 S ."

INITSCRIPT_NAME_${PN}-cd = "cdscript"
INITSCRIPT_PARAMS_${PN}-cd = "start 11 S ." 
```

我还没有尝试过，但即使它有效.. 我希望得到完整的服务，所以当我将 mycomplicatepackage 添加到我的 IMAGE_EXTRA_INSTALL 时，我希望它为当前机器安装正确的 initscripts。（在 build/conf/local.conf 中）

抱歉我的英语不好，我希望我能解释一下我想要什么。

**想法2：**
我在某个地方看到过：

```
TARGET_ab = "xy"
TARGET_cd = "yz"  
.  
.  
INITSCRIPT_NAME_xy = "abscript"
INITSCRIPT_PARAMS_xy = "S 93 ."

INITSCRIPT_NAME_yz = "cdscipt"
INITSCRIPT_PARAMS_yz = "start 11 S ." 
```

我不知道 TARGET 变量是如何工作的，也找不到任何相关文档。（也许我没有足够努力......）但是它没有显示如何为 ef 机器安装两个脚本。

我真的很感激任何建议或解决方案。询问我是否需要更多详细信息以了解我想要什么:)

# blackberry - 我们在黑莓推送中有令牌吗？

> ID：16035528
> 
> 赞同：0
> 
> 时间：2013-04-16T11:10:03.800
> 
> 标签：blackberry, push-notification, push

我正在尝试为实现推送通知的 OS < 7.X 开发应用程序。

我终于使它使客户端/服务器示例工作。但是，我根本不明白推送是如何工作的。在服务器示例中，我唯一指定的是 RIM 提供的用户名/密码凭据，然后是 device_id 和名为 push_id 的东西（可以是我已经测试过的任何字符串）。

那么服务器提供的token在哪里呢？我们不需要令牌来发送 BB 推送吗？如果没有，我在服务器上保留什么？

device_id 是否作为我们在 iOS、WP7 和 Android 中使用的“令牌”工作？我很确定我在这里遗漏了一些东西，因为这看起来很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:49:30.350

要发送推送通知，您不需要任何令牌。设备`PIN`编号足以发送推送消息。只保留 PIN 码。对于服务器端代码，请参阅此[链接](https://stackoverflow.com/questions/7481122/push-notification-in-blackberry/9427411#9427411)

# vba - VBA WORD：删除双段落标记

> ID：16035530
> 
> 赞同：1
> 
> 时间：2013-04-16T11:10:08.097
> 
> 标签：vba, ms-word

尝试通过此过程移动过多的段落间隙。

```
Sub RemoveGaps()
    wrdDoc.Content.Select

    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting

    With Selection.Find
        .Text = "^13^13"
        .Replacement.Text = "^p"

        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = True
        .MatchWildcards = True
    End With

    Selection.Find.Execute Replace:=wdReplaceAll
    If Selection.Find.Found = True Then
        Call RemoveGaps
    End If

End Sub 
```

在我运行它之后，循环永远不会结束，我最终会在文档底部形成这种形式。请注意，它确实工作了一段时间然后卡住了。

![在此处输入图像描述](https://i.stack.imgur.com/7R4GE.png)

**编辑：** 我最后有两个段落中断，它们只是用另外两个替换。我实际上是手动尝试选择和替换它们..同样的事情，它们只是出于某种原因用额外的替换。我不知道那是什么，也许它是一个不同的特殊字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:52:23.790

```
Sub RemoveGaps()

    Dim oFnd As Find

    Set oFnd = ThisDocument.Content.Find
    oFnd.ClearFormatting
    oFnd.Replacement.ClearFormatting

    With oFnd
        .Text = "^13^13"
        .Replacement.Text = "^p"

        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = True
        .MatchWildcards = True
    End With

    Do
        oFnd.Execute Replace:=wdReplaceAll
    Loop Until Not oFnd.Execute Or oFnd.Parent.End = ThisDocument.Content.End

End Sub 
```

我不知道为什么 KazJaw 的作品 - 它仍然在最后留下两个段落标记，但 Execute 返回 False。当我到达最后一个 GoTo 时，我会在即时窗口中得到它。

```
?selection.Find.Execute
False
?selection = string(2,chr$(13))
True 
```

仅此而已，为什么它找不到两个回车符？奇怪的。无论如何，我不喜欢更改选择或 GoTo，所以我包含了我的版本。当 Find 找不到任何内容或位于 Document 末尾时，它会退出。

如果你知道一行中有多少段的上限，你可以用不同的方式来做。例如，如果您知道不超过 10 个空白段落，您可以这样做：

```
Sub RemoveGaps2()

    Dim i As Long

    For i = 10 To 2 Step -1
        With ThisDocument.Content.Find
            .Text = "[^13]{" & i & ",}"
            .Replacement.Text = Chr$(13)
            .MatchWildcards = True
            .Execute , , , , , , , , , , wdReplaceAll
        End With
    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:31:52.280

尝试这个

```
Sub RemoveGaps()
    wrdDoc.Content.Select

    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting

    With Selection.Find
        .Text = "^p^p" '<~~~ See this
        .Replacement.Text = "^p"

        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = True
        .MatchWildcards = False '<~~ Set this to false
    End With

    Selection.Find.Execute Replace:=wdReplaceAll

    If Selection.Find.Execute = True Then
        Call RemoveGaps
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:51:50.393

您不需要触发整个子程序，但可以像这样返回几行：

```
Sub RemoveGaps()
Dim wrdDoc As Document
Set wrdDoc = ActiveDocument
    wrdDoc.Content.Select

    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting

    With Selection.Find
        'oryginal
        .Text = "^13^13"
        .Replacement.Text = "^p"
        .Forward = True

    End With

GoHere:
    Selection.Find.Execute Replace:=wdReplaceAll

    If Selection.Find.Execute = True Then
        GoTo GoHere
    End If

End Sub 
```

我对其进行了测试，它适用于我的 Word 2010。

# android - 将值设置为空的编辑文本

> ID：16035532
> 
> 赞同：0
> 
> 时间：2013-04-16T11:10:16.170
> 
> 标签：android

我有六对编辑文本，不是所有的都必须编辑，但至少一对必须编辑。我想要做的是将空的设置为零，这样数学就可以解决，但编辑文本中没有显示 0，所以用户不必继续删除零

我现在得到的并不理想

```
if (width1.getText().toString().equals("")
            || height1.getText().toString().equals("")
            || width2.getText().toString().equals("")
            || height2.getText().toString().equals("")
            || width3.getText().toString().equals("")
            || height3.getText().toString().equals("")
            || width4.getText().toString().equals("")
            || height4.getText().toString().equals("")
            || width5.getText().toString().equals("")
            || height5.getText().toString().equals("")
            || width6.getText().toString().equals("")
            || height6.getText().toString().equals("")) {
        width1.setText("0");
        width2.setText("0");
        width3.setText("0");
        width4.setText("0");
        width5.setText("0");
        width6.setText("0");
        height1.setText("0");
        height2.setText("0");
        height3.setText("0");
        height4.setText("0");
        height5.setText("0");
        height6.setText("0");
    }

    calc.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (width1.getText().toString().equals("0")
                    || height1.getText().toString().equals("0")) {
                Toast msg = Toast.makeText(getBaseContext(),
                        "Please enter measurements", Toast.LENGTH_LONG);
                msg.show();
            }

            else {

                Intent sender = getIntent();
                int result100 = sender.getExtras().getInt("Result100");
                int result215 = sender.getExtras().getInt("Result215");
                int result325 = sender.getExtras().getInt("Result315");

                a = Double.parseDouble(width1.getText().toString());
                b = Double.parseDouble(height1.getText().toString());
                c = Double.parseDouble(width2.getText().toString());
                d = Double.parseDouble(height2.getText().toString());
                e = Double.parseDouble(width3.getText().toString());
                f = Double.parseDouble(height3.getText().toString());
                u = Double.parseDouble(width4.getText().toString());
                v = Double.parseDouble(height4.getText().toString());
                w = Double.parseDouble(width5.getText().toString());
                x = Double.parseDouble(height5.getText().toString());
                y = Double.parseDouble(width6.getText().toString());
                z = Double.parseDouble(height6.getText().toString());

                if (getIntent().hasExtra("Result100")) {
                    total = (result100) - (a * b) + (c * d) + (e * f)
                            + (u * v) + (w * x) + (y * z) * 60;
                } else if (getIntent().hasExtra("Result215")) {
                    total = (result215) - (a * b) + (c * d) + (e * f)
                            + (u * v) + (w * x) + (y * z) * 120;
                } else if (getIntent().hasExtra("Result315")) {
                    total = (result325) - (a * b) + (c * d) + (e * f)
                            + (u * v) + (w * x) + (y * z) * 180;

                }
                Intent intent = new Intent(MinusOpes.this,
                        Wl2Amounts.class);
                intent.putExtra("Result", total);
                startActivity(intent);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:15:31.063

除了将每个字段都设置为 0，您还可以：

```
if (TextUtils.isEmpty(width1.getText().toString())) {
    a = 0;
} else {
    a = Double.parseDouble(width1.getText().toString());
} 
```

# java - 如何让 2 个 Java 应用程序相互通信？

> ID：16035533
> 
> 赞同：2
> 
> 时间：2013-04-16T11:10:18.293
> 
> 标签：java, windows, sockets, communication

我有 2 个 Java 应用程序。首先，我可以尽可能多地进行编辑，但稍后我会将其编译为机器代码。第二个我无法编辑，但我可以为它写一个插件。我需要使该插件能够与第一个应用程序交谈。通常只是简单地相互发送字符串。进程的输入和输出流对我来说不是一个选项。我正在考虑使用 tcp 套接字客户端/服务器或将充当缓冲区的文件。但是这两种方式对我来说似乎有点难看，有人能给我一个更好的主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:15:39.720

这取决于您要传输的数据类型。

如果它只是字符串，那么：如果`number of process = 2`你确定它，那么`stdin`&8`stdout`是最好的前进方式。您可以创建一个`Process`using`ProcessBuilder`然后让流进行通信。其他进程可以只是`System.out`为了传输消息。这比 Socket 更受欢迎，因为您不必处理套接字的优雅关闭等。（如果它失败并且端口未成功取消绑定，这可能是一个大麻烦）

如果说`number of process > 2`，您可能可以使用 Sockets 并通过 Socket 进行通信。这应该可以很好地工作，尽管在优雅地管理套接字方面需要付出额外的努力。`less than``10`

如果`number of process`是`Large`，那么`JMS`应该使用。它做了很多你不需要处理的事情。如果进程数较少，则任务太大。

所以在你的情况下，过程是最好的前进方式。

如果您要传输的数据，甚至可以是对象。`RMI`可以在进程数较少的情况下使用。如果更多，请`JMS`再次使用。

编辑：现在对于以上所有内容，都涉及很多肮脏的工作。作为改变，如果你正在寻找新的和令人兴奋的东西，我会建议 akka。它是一个基于actor的模型，使用消息相互通信。

美妙之处在于，演员可以在同一个 JVM 或另一个（非常少的配置）上，而 akka 会为您处理其余的事情。我还没有看到比这样做更清洁的方法:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:14:41.560

使用 JMS 怎么样？

您可以根据需要使用 Publish/Sunbscribe 或点对点模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:40:58.337

另一种方法是使用数据库表来存储您的数据，一个进程可以插入，而另一个进程可以在需要时读取它。当您使用 JMS 时，可能会丢失数据，但存储在 db 中将是故障安全且面向未来的。

# android - 如何制作一个强大的预定事件？

> ID：16035539
> 
> 赞同：0
> 
> 时间：2013-04-16T11:10:39.560
> 
> 标签：android

我希望我的应用程序在给定时间触发事件。目前我正在使用AlarmManager。但是如果用户的手机重新启动，或者用户使用任务杀手或使用 android 任务管理器结束应用程序，这将丢失。

那么最好的方法是什么。我是否应该只使用警报并在服务中重复设置它，以便在删除时立即恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:31:42.997

您可以在启动完成时使用唤醒警报服务，以便在重新启动后重新安排所有任务。您可以将警报 ID 和详细信息存储在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:35:25.397

对于您需要的东西可能有点过分，但请查看 CommonWare 的 WakefulIntentService： [https ://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)

即使您不想在触发警报时启动整个 IntentService，他的代码也应该让您了解如何在设备重新启动时保持警报。

# php - 需要通过带有单个删除按钮的复选框删除选定的行

> ID：16035544
> 
> 赞同：-2
> 
> 时间：2013-04-16T11:11:01.690
> 
> 标签：php, jquery

好的，现在这是更新后的主 php 页面，我清除了我以前的帖子以使其干净，仅供参考……我在这里发布的只是我的测试页面，它是我实际页面的精确副本……只是有不同的 php 页面名称...

```
 <link href="jquery-ui-1.10.2.custom/css/dark-hive/jquery-ui-1.10.2.custom.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery-ui-1.10.2.custom/js/jquery-1.9.1.js" ></script>
    <script type="text/javascript" src="jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.js" ></script>
    <script type="text/javascript" src="jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js" ></script>

    <link rel="stylesheet" href="style.css" />
    <script type="text/javascript" src="SMP1_deletefromDB.js"></script>
    <script>

   $(document).ready(function(){
      $("#results").show();
    });
    </script>
    <script type="text/javascript">
         $(document).ready(function(){
            $("#RetrieveList").on('click',function() {
                var xid = $('#XiD').val();
                var date = $('#Date').val();
                $.post('resultgenerator_test.php',{xid:xid, date:date}, function(data){
                $("#results").html(data);
                });
                return false;
            });
             });

        //post to delete.php file. In delete.php you can get the id's in $_POST['id'] as multidimensional array. You can handle the delete operation based on that
         $(document).ready(function(){
         $("#DeletefromDB").on('click',function() {
         //get all the checked values from checkboxes
         var ids = $('input[name=checkbox]:checked').map(function () {
             return this.value;
         }).get(); 

         if (ids.length === 0) 
             return false; //show some error message

         //post to delete.php file. In delete.php you can get the id's in $_POST['id'] as multidimensional array. You can handle the delete operation based on that
         $.post('deletedata.php',{id : ids}, function(data){
         $("#results").html(data);
             //handle the message based on success or error
         });

          return false;
    });
     });

    </script>

    </head>

    <body class="oneColFixCtrHdr">

    <div id="container" style="width:auto">
      <div id="header" style="background-color:#7BD12E">
        <h1 align="left" style="color:#FFF; font-family: Arial, Helvetica, sans-serif;">PIS  Ticket Tracking System</h1>
      <!-- end #header --></div>
       <div id="mainContent">
        <h1 style="font-size:9"></h1>
        <form id="form1" name="form1" method="post" action="">
          <p>
            <label for="Back"></label>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" name="Back" id="Back" value="Back To Main" href="#" onclick="return backAway();" />
          </p>
        </form>
        <form id="form2" name="form2" method="post" action="">

          <table width="741" border="0" align="center">
            <tr>
              <th colspan="9" align="center" style="font-size:12px" scope="col">Xid, Name:<span>
                <select name="XiD" id="XiD">

                  <option value="AAA">AAA</option>
                  <option value="BBB">BBB</option>
                  <option value="CCC">CCC</option>
                  <option value="DDD">DDD</option>
                  <option value="EEE">EEE</option>
                  <option value="FFF">FFF</option>
                  <option value="" selected="selected"></option>
                </select>
              </span><span style="font-size:12px">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="date">Date:</label>
              <input type="text" name="Date" id="Date" />
              </span></th>
            </tr>
            <tr>
              <th colspan="9" scope="col">&nbsp;</th>
            </tr>
            <tr>
              <th colspan="9" scope="col">
                <div align="center">
                  <input name="action" type="button" id="RetrieveList" value="Retrieve List" />
                  <input name="action" type="button" id="DeletefromDB" value="Delete from DB" />
                  <input name="Clear" type="reset" id="Clear" value="Clear" />
                </div>
                <label for="Clear"></label>
                <div align="center"></div></th>
            </tr>

          </table>
    </form>
        <div id="results">
        </div>
      </div> 
```

这是我的第二个 php 页面，它将数据回显为表格格式：请阅读下面的评论，因为我需要它来澄清......

```
 jQuery(document).ready(function () {
  jQuery("input[name=checkall]").click(function () {
    jQuery('input[name=checkall]').prop('checked', this.checked);
    jQuery('input[name=checkbox]').prop('checked', this.checked);
  });

  // if all checkbox are selected, check the selectall checkbox
  // and viceversa
  jQuery("input[name=checkbox]").click(function(){

    if(jQuery("input[name=checkbox]").length == jQuery("input[name=checkbox]:checked").length) {
        jQuery("input[name=checkall]").prop("checked", true);
    } else {
        jQuery("input[name=checkall]").prop("checked", false);
    }
  });
});

</script>
<?php
require 'include/DB_Open.php';

$xid = $_POST['xid'];
$date = $_POST['date'];

$sql="SELECT ars_no, phone_number, category_1, category_2, status, create_date, resolved_date, trouble_type_priority, ban_type, employee_id_name 
        FROM tbl_main
        WHERE employee_id_name = '" . $xid . "' AND resolved_date = '" . $date . "'";
$myData = mysql_query($sql);

echo "<table width='auto' cellpadding='1px' cellspacing='0px' border=1 align='center'>
<tr>
<th align='center'><input id=checkall name=checkall type=checkbox value='' /></th>
<th align='center'>Remedy Ticket No.</th>
<th align='center'>Phone/Incident No.</th>
<th align='center'>Category 2</th>
<th align='center'>Category 3</th>
<th align='center'>Status</th>
<th align='center'>Create Date</th>
<th align='center'>Severity</th>
<th align='center'>Ban Type</th>
<th align='center'>Resolved Date</th> 
```

// ***我添加了这个标题，以便我也获取employee_id_name，但只是隐藏它，以便我可以从我的第三个php中删除它......我使用了以下但仍然在Xid列上显示一个非常小的单元格...... ***

```
<th align='center' style='display:none'>XiD</th>
</tr>"; 

while($info = mysql_fetch_array($myData)) 
{ 
echo "<form action='resultgenerator_test.php' method='post'>";

echo"<tr>"; 
echo "<td align='center'>" . "<input type=checkbox name=checkbox value=" . " </td>";
echo  "<td align='center'>" . $info['ars_no'] . "<input type=hidden name=ars_no value=" . $info['ars_no'] . " </td>";
echo  "<td align='center'>" . $info['phone_number'] . "<input type=hidden name=phone_number value=" . $info['phone_number'] . " size='11' maxlength='11' /> </td>"; 
echo  "<td align='center'>" . $info['category_1'] . "<input type=hidden name=category_1 value=" . $info['category_1'] . "' /> </td>"; 
echo  "<td align='center'>" . $info['category_2'] . "<input type=hidden name=category_2 value=" . $info['category_2'] . "' /> </td>";
echo  "<td align='center'>" . $info['status'] . "<input type=hidden name=status value=" . $info['status'] . "' /> </td>"; 
echo  "<td align='center'>" . $info['create_date'] . "<input type=hidden name=create_date value=" . $info['create_date'] . "' /> </td>";
echo  "<td align='center'>" . $info['trouble_type_priority'] . "<input type=hidden name=trouble_type_priority value=" . $info['trouble_type_priority'] . " size='1' maxlength='1' /> </td>"; 
echo  "<td align='center'>" . $info['ban_type'] . "<input type=hidden name=ban_type value=" . $info['ban_type'] . " size='1' maxlength='1' /> </td>";
echo  "<td align='center'>" . "<input type=text name=resolved_date value=" . $info['resolved_date'] . " size='8' maxlength='8' /> </td>";
echo  "<td align='center'>" . "<input type=hidden name=employee_id_name value=" . $info['employee_id_name'] . "' /> </td>";
echo "</tr>"; 
echo "</form>";
} 
echo "</table>"; 

include 'include/DB_Close.php';
?>
</body>
</html> 
```

现在看看我按照你的建议和解释创建的第三个 php 页面......如果你在代码上看到任何错误，请更正：

**最新更新删除 php：**

```
<?php
require 'include/DB_Open.php';

$id = $_POST['id'];
$idtodelete = "'" . implode("','",$id) . "'";

$query = "DELETE FROM tbl_main WHERE ars_no in (" . $idtodelete . ")";
$myData = mysql_query($query);

include 'include/DB_Close.php';
?> 
```

感谢所有的帮助... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:40:08.887

对于您的第一个问题，请为您的提交按钮（例如：'action'）提供相同的名称，并在提交后在服务器端检查值：`if ($_POST['action'] == 'Retrieve List') {} else if ($_POST['action'] == 'Delete from DB')`

第二个问题，复选框的名称是关键：

```
<input type="checkbox" name="checkbox[]" value="{$info['ars_no']}"/> 
```

然后在服务器端：

```
foreach($_POST['checkbox'] as $checkbox) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:56:01.087

在这里，您需要做的是使用提交按钮名称来处理更新和删除操作。您需要做的是创建两个名称相同但值不同的提交按钮。

这是你的表格：

```
<form action="" method="post">
    <input name="action" type="submit" id="RetrieveList" value="RetrieveList" />
    <input name="action" type="submit" id="DeletefromDB" value="DeleteFromDB" />
    <input name="Clear" type="reset" id="Clear" value="Clear" />
</form> 
```

我给`action`这两个`submit`按钮取了相同的名字。提交此表单后，您可以`$_POST['action']`在服务器端进行检查。

你可以这样做：

```
if ($_POST['action'] == 'RetrieveList') {
    //retreive list functionality
} elseif ($_POST['action'] == 'DeleteFromDB') {
    //delete from dB functionality.
} 
```

**更新：**

您需要像这样更改表单：

```
echo "<form action='resultgenerator.php' method='post'>";
    echo '<input name="action" type="submit" id="DeletefromDB" value="Delete from DB" />';
    echo "<table width='auto' cellpadding='1px' cellspacing='0px' border=1 align='center'>
            <tr>
            <th align='center'><input id=checkall name=checkall type=checkbox value='' /></th>
            <th align='center'>Remedy Ticket No.</th>
            <th align='center'>Phone/Incident No.</th>
            <th align='center'>Category 2</th>
            <th align='center'>Category 3</th>
            <th align='center'>Status</th>
            <th align='center'>Create Date</th>
            <th align='center'>Severity</th>
            <th align='center'>Ban Type</th>
            <th align='center'>Resolved Date</th>
            </tr>"; 

    while($info = mysql_fetch_array($myData)) { 
        echo"<tr>"; 
            echo "<td align='center'>" . "<input type='checkbox' name='checkbox[]' value='add the id here which needs to be deleted'/></td>";
            echo  "<td align='center'>" . $info['ars_no'] . "<input type=hidden name=ars_no value=" . $info['ars_no'] . " </td>";
            echo  "<td align='center'>" . $info['phone_number'] . "<input type=hidden name=phone_number value=" . $info['phone_number'] . " size='11' maxlength='11' /> </td>"; 
            echo  "<td align='center'>" . $info['category_1'] . "<input type=hidden name=category_1 value=" . $info['category_1'] . "' /> </td>"; 
            echo  "<td align='center'>" . $info['category_2'] . "<input type=hidden name=category_2 value=" . $info['category_2'] . "' /> </td>";
            echo  "<td align='center'>" . $info['status'] . "<input type=hidden name=status value=" . $info['status'] . "' /> </td>"; 
            echo  "<td align='center'>" . $info['create_date'] . "<input type=hidden name=create_date value=" . $info['create_date'] . "' /> </td>";
            echo  "<td align='center'>" . $info['trouble_type_priority'] . "<input type=hidden name=trouble_type_priority value=" . $info['trouble_type_priority'] . " size='1' maxlength='1' /> </td>"; 
            echo  "<td align='center'>" . $info['ban_type'] . "<input type=hidden name=ban_type value=" . $info['ban_type'] . " size='1' maxlength='1' /> </td>";
            echo  "<td align='center'>" . "<input type=text name=resolved_date value=" . $info['resolved_date'] . " size='8' maxlength='8' /> </td>";
        echo "</tr>"; 
    } 

    echo "</table>";

echo "</form>"; 
```

现在在您的**resultgenerator.php**文件中，您可以检查：

```
if ($_POST['action'] == 'DeleteFromDB') {
    $ids_to_be_deleted = isset($_POST['checkbox']) ? $_POST['checkbox'] : array();
    //$ids_to_be_deleted will contain all the checked id's from the other page. You can get all those values in the array. Handle the remaining operation for delete here.
} 
```

**新更新：**

因此，如果您使用 jQuery 提交表单，那么最好将表单提交绑定更改为按钮上的单击功能。您可以将表格更改为：

```
 <link href="jquery-ui-1.10.2.custom/css/dark-hive/jquery-ui-1.10.2.custom.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery-1.9.1.min.js" ></script>
<script type="text/javascript" src="jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.js" ></script>
<script type="text/javascript" src="jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js" ></script>

<link rel="stylesheet" href="style.css" />
<script type="text/javascript" src="SMP1_deletefromDB.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $("#RetrieveList").on('click',function() {
            var xid = $('#XiD').val();
            var date = $('#Date').val();
            $.post('resultgenerator.php',{xid:xid, date:date}, function(data){
            $("#results").html(data);
            });
            return false;
        });

        $("#DeletefromDB").on('click',function() {
            //get xid for delete like you do above. create a page delete.php or something and make an ajax call to some page to delete data
            return false;
        });
    });
</script>
</head>

<body class="oneColFixCtrHdr">

<div id="container" style="width:auto">
  <div id="header" style="background-color:#7BD12E">
    <h1 align="left" style="color:#FFF; font-family: Arial, Helvetica, sans-serif;">PIS  Ticket Tracking System</h1>
  <!-- end #header --></div>
   <div id="mainContent">
    <h1 style="font-size:9"></h1>
    <form id="form1" name="form1" method="post" action="">
      <p>
        <label for="Back"></label>
        <input type="button" name="Back" id="Back" value="Back To Main" href="#" onclick="return backAway();" />
      </p>
    </form>
    <form id="form2" name="form2" method="post" action="">

      <table width="741" border="0" align="center">
        <tr>
          <th colspan="9" align="center" style="font-size:12px" scope="col">Xid, Name:<span>
            <select name="XiD" id="XiD">

              <option value="AAA">AAA</option>
              <option value="BBB">BBB</option>
              <option value="CCC">CCC</option>
              <option value="DDD">DDD</option>
              <option value="EEE">EEE</option>
              <option value="FFF">FFF</option>
              <option value="" selected="selected"></option>
            </select>
          </span><span style="font-size:12px">
          <label for="date">Date:</label>
          <input type="text" name="Date" id="Date" />
          </span></th>
        </tr>
        <tr>
          <th colspan="9" scope="col">&nbsp;</th>
        </tr>
        <tr>
          <th colspan="9" scope="col">
            <div align="center">
              <input name="action" type="button" id="RetrieveList" value="RetrieveList" />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="action" type="button" id="DeletefromDB" value="DeleteFromDB" />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="Clear" type="reset" id="Clear" value="Clear" />
            </div>
            <label for="Clear"></label>
            <div align="center"></div></th>
        </tr>

      </table>
      <p>&nbsp;</p>
    </form>
    <div id="results">
    </div>
  </div>
 </body>
</html> 
```

在这里，我所做的是更改了表单提交上的绑定事件并绑定了输入类型按钮的单击事件。我将类型提交更改为按钮。

现在您可以检查每个按钮的单击事件并处理操作。

**更新：**

假设您在结果 div 中有检索到的列表。当用户选中复选框并单击删除按钮时，您可以使用以下脚本处理它：

```
$("#DeletefromDB").on('click',function() {
     //get all the checked values from checkboxes
     var ids = $('input[name=checkbox]:checked').map(function () {
         return this.value;
     }).get(); 

     if (ids.length === 0) 
         return false; //show some error message

     //post to delete.php file. In delete.php you can get the id's in $_POST['id'] as multidimensional array. You can handle the delete operation based on that
     $.post('delete.php',{id : ids}, function(data){
         //handle the message based on success or error
     });

      return false;
}); 
```

**更新 ：**

这可以是您的**delete.php**文件

```
$ids = isset($_POST['id']) ? $_POST['id'] : '';

if (!empty($ids)) {
   //implode the id's separated by commaas
   $ids_to_be_deleted = implode(',', $ids);

   $query = "DELETE FROM your_table WHERE field_to_be_checked IN ($ids_to_be_deleted)";
   //now run your query using mysql_query

} 
```

**NB:** : mysql* 函数从 PHP 5.5.0 开始被弃用，并且将在未来被删除。相反，应该使用[**MySQLi**](http://www.php.net/manual/en/book.mysqli.php)或[**PDO_MySQL扩展**](http://www.php.net/manual/en/ref.pdo-mysql.php)

希望这可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:28:50.483

您可以使用下拉列表来选择是否要检索或删除：

```
<select name='choseaction'>
<option value="RetrieveList">Retrieve List</option>
<option value="DeletefromDB">Delete from DB</option>
</select> 
```

然后使用单个提交按钮。

```
<INPUT TYPE ="Submit" Name ="Submit" VALUE ="Submit"> 
```

之后，您可以像这样验证：

```
 if ($_POST['choseaction']=='RetrieveList')
   {
   ...
   } else if ($_POST['choseaction']=='DeletefromDB')
     {
     ...
     } 
```

希望这可以帮助！再会。

# php - 嘲弄 shouldReceive()->once() 似乎不起作用

> ID：16035549
> 
> 赞同：15
> 
> 时间：2013-04-16T11:11:18.953
> 
> 标签：php, mockery

我试图让 Mockery 断言给定方法至少被调用一次。

我的测试课是：

```
use \Mockery as m;

class MyTest extends \PHPUnit_Framework_TestCase
{

    public function testSetUriIsCalled()
    {
        $uri = 'http://localhost';
        $httpClient = m::mock('Zend\Http\Client');
        $httpClient->shouldReceive('setUri')->with($uri)->atLeast()->once();
    }

} 
```

如您所见，有一个测试（希望）创建了一个期望 setUri 将被调用的测试。由于没有涉及任何其他代码，我无法想象它*可以*被调用而我的测试通过了。谁能解释为什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-30T20:53:32.750

您需要致电`Mockery:close()`以验证您的期望。它还为下一个测试用例处理模拟容器的清理。

```
public function tearDown()
{
    parent::tearDown();
    m::close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-27T14:58:18.033

为了避免在每个测试类中调用 close 方法，您可以像这样将 TestListener 添加到您的 phpunit 配置中：

```
<listeners>
    <listener class="\Mockery\Adapter\Phpunit\TestListener"></listener>
</listeners> 
```

这种方法在[文档](http://docs.mockery.io/en/latest/reference/phpunit_integration.html)中进行了解释。

链接文档中要注意的一件事是：

确保 Composer 或 Mockery 的自动加载器存在于引导文件中，否则您还需要定义指向上述 TestListener 类文件的“文件”属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-15T05:57:56.330

只是一个旁注：如果你使用 Laravel：make:test --unit 会生成一个测试类，它扩展了原始的 PhpUnit Testcase 类，而不是包含的 Tests\Testcase，它会加载 laravel 应用程序并运行 Mockery::close()。如果您在测试的单元中使用 Laravel 特定代码（如缓存、数据库或存储），这也是在某些情况下测试失败的原因。

因此，如果您需要使用 Laravel 特定代码测试单元，只需换出“扩展测试用例”，无需手动调用 Mockery::close()

# asp.net-mvc - Html.Raw 未解码

> ID：16035559
> 
> 赞同：0
> 
> 时间：2013-04-16T11:11:52.360
> 
> 标签：asp.net-mvc

只是一个查询，我以前使用`@Html.Raw(Item.sometext)`过它，它正确解码了 html 标签，我从 remore 源获取了一些 json 格式的数据，但是当显示在页面上时，我发现 Html.raw 没有解码 html 标签。

要解决我使用的问题：

```
@Html.Raw(HttpUtility.HtmlDecode(Item.sometext)) 
```

所以我的问题是，谁能告诉我为什么会这样，因为我很好奇原因。我使用 mvc4 和 asp.net 4.5

谢谢

乔治

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:41:53.847

这是我的回答，试图更好地解释我的意思（在评论中）。

例如，您的 JSON 格式（您已提供）如下所示：

```
<p><b>Location. <\/b> <br \/>... 
```

但是，这不是有效的 HTML。请注意用于斜杠“/”的转义字符。因此，如果您将此值传递给`Html.Raw`它将（应该）输出它，但它不是有效的 HTML，因此不太可能正确显示（如果它显示任何内容）。

这个转义字符问题可以使用`Html.Decode`它将有效地返回以下内容来修复：

```
<p><b>Location. </b> <br />... 
```

这是有效的 HTML，因此可以`Html.Raw`毫无问题地传递给

* * *

注意：`Html.Raw`不进行任何编码/解码，实际上它明确指示不应该对提供的值进行编码，因为它已经是原始 HTML。这[在此处得到确认](http://msdn.microsoft.com/en-us/library/gg568896%28v=vs.99%29.aspx)：

> 当指定的文本表示不应编码的实际 HTML 片段并且您希望将其呈现为 HTTP 响应的标记时，请使用 Raw 方法。

# django - Django：负索引和“str”对象不能解释为整数

> ID：16035562
> 
> 赞同：0
> 
> 时间：2013-04-16T11:11:54.957
> 
> 标签：django, list, python-3.x

好的，所以我想找到数据库中不存在的数字列表，其中最大的数字是最大的。我有这个代码：

```
numbers_objects = Numbers.objects.all().filter(series=1).order_by('number')
numbers_all = number_objects.values_list('number', flat=True).order_by('number')
numbers_missing = [n for n in range(67,numbers_all[-1]) if n not in numbers_all] 
```

这会产生错误`Negative indexing not allowed`。好的，所以我查看了文档并尝试了：

```
numbers_missing = [n for n in range(67,numbers_all[number_all.count()-1]) if n not in numbers_all] 
```

这会产生错误`'str' object cannot be interpreted as an integer`。谁能告诉我，如果 pythonic 方式和文档化方式都不起作用，Django 认为我们应该如何访问列表中的最后一个元素？

# javascript - 检查是否有互联网连接

> ID：16035577
> 
> 赞同：8
> 
> 时间：2013-04-16T11:12:41.710
> 
> 标签：javascript, dom-events

如何在Javascript中检查是否有互联网连接？我在 Google 中搜索过，但没有找到解决问题的好方法。

我已经有两个事件处理程序：

```
document.body.addEventListener("offline", function () {
    //alert("offline")
    masterViewModel.online(false)
}, false);
document.body.addEventListener("online", function () {
    //alert("online")
    masterViewModel.online(true);
}, false); 
```

但是如果我在线，如何检查“onload”功能？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-16T11:20:13.700

在 HTML5 中，[根据规范](http://www.w3.org/TR/offline-webapps/#related)：

```
var online = navigator.onLine; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:23:32.587

嗨，你可以这样做：

```
var connectionMessage = "internet connection";
var noConnectionMessage = "No internet connection.";
window.onload = checkInternetConnection;
function checkInternetConnection() {
  var isOnLine = navigator.onLine;
   if (isOnLine) {
      alert(connectionMessage);
   } else {
     alert(noConnectionMessage);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-15T08:18:14.893

`var online = navigator.onLine;`并非每次都有效。有时您的连接已启用，但即使您在线，您也无法从 Internet 获取数据或无法访问站点...因此在线时间返回 true，因为您在线。那个时间“导航器。在线”不可用。

" 您可能会得到误报，例如计算机运行的虚拟化软件具有始终“连接”的虚拟以太网适配器。因此，如果您真的想确定浏览器的在线状态，您应该开发额外的检查方法。要了解更多信息，请参阅 HTML5 Rocks 文章，“ [检查这篇文章](https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine.onLine)

你必须使用ajax请求来检查......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-04T17:38:11.567

为什么不直接对众所周知的地址进行 ajax 调用，比如 StackOverflow。如果你没有得到 404，你就在线。

# oauth - 服务器到服务器应用程序的 OAuth 2.0：两个或三个参数？（或者：一些谷歌工程师可能数不过三吗？:)

> ID：16035580
> 
> 赞同：1
> 
> 时间：2013-04-16T11:12:51.163
> 
> 标签：oauth, oauth-2.0, google-oauth, google-client

我正在尝试为服务帐户获取 Google OAuth 2.0 访问令牌，但收到`invalid_grant` [错误](https://stackoverflow.com/search?q=invalid_grant)消息。我已经检查了我的各种工件（私钥等）和时钟计时，但到目前为止还没有解决这个问题。

有一个可能相关的项目看起来很奇怪：谷歌的[文档](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)说

> *HTTPs POST 中需要三个*参数，如下所示

接下来是一个包含*两*行的表，指定*了两个*参数（`grant_type`和`assertion`）。是否还需要第三个（我已经看到了也`assertion_type`以某种方式使用的示例）？会不会是（某些）Google 工程师（或者真的是你的工程师）数不过三？:)

总结：合适的参数是什么？从谷歌当前的文档中似乎还不清楚。

**更新：**这里有一些进一步的信息：我不能使用谷歌 API 客户端库，因为我的应用程序需要的语言不是谷歌目前不支持的语言。因此，我必须实现创建和签署 JWT 等的逻辑，这通常是不鼓励的。我已经确认我的服务帐户工件是有序的：我可以将它们与用于 Java 的 Google API 客户端库一起使用来访问同一个日历（从我的目标平台之外的另一个平台，即）。特别是，我的“client_id”的形式是“...@developer.gserviceaccount.com”，我的密钥是 128 位 RSA 私钥，两者都是从[Google APIs Dashboard](https://code.google.com/apis/console)获得的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:32:39.050

我现在已经能够确认它是两个参数，而不是三个。Google 的[文档](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)似乎是正确的，因为它将这两个参数 (`grant_type`和`assertion`) 命名为正确，但在将它们称为*三个*参数时是错误的。

两个参数的证据来自当前的[Internet 草案](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-jwt-bearer-04#section-2.1)（*JSON Web Token (JWT) Bearer Token Profiles for OAuth 2.0 ），它定义了*[RFC 6749](https://www.rfc-editor.org/rfc/rfc6749#section-4.5)（*OAuth 2.0 授权框架*）下的扩展授权类型。

证据还包括在我的（非 Java）实现中尝试了由 Google API 客户端库获得的逐字访问令牌（并通过日志记录显示）：使用此访问令牌已使`invalid_grant`错误消失。

（现在在我的代码中显然存在关于形成 SHA256withRSA 签名的问题，但这是另一个问题......）

# android - 新的 Nexus 7 未出现在 Eclipse/AVD 管理器上

> ID：16035582
> 
> 赞同：2
> 
> 时间：2013-04-16T11:13:07.103
> 
> 标签：android, eclipse, adb, avd, nexus-7

我在将 Nexus 7 连接到 Eclipse 时遇到了问题……而且真的不知道该怎么做才能让它运行。我的电脑的操作系统是 Windows 7 64 位。
另一台 Nexus 7，安卓版本完全相同，但内存较少，之前连接成功；我不知道这是否可能是问题的原因？不知何故，关于这个的数百万个话题都没有解决我的麻烦。
我已经做了什么：

*   Nexus 7 处于开发者模式
*   USB 调试处于活动状态
*   我作为 PTP 设备连接
*   当我在命令行上运行 adb devices 时，它确实出现了。当我拔下它时，它成功地从 adb 设备中消失，杀死 adb 服务器，然后重新启动
*   尽管如此，if 拒绝在 AVD Manager 中显示为设备！

奇怪的是，我几周前删除的一个模拟器仍然出现在 adb devices 中，但至少它是离线的......
关于我错过了什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:17:16.550

谷歌并没有将“开发者”从其 Nexus 产品线中剔除，而且短期内也不会。但是这些设置在设置菜单中被隐藏起来了。以下是如何让他们回来：

1.  转到设置菜单，然后向下滚动到“关于手机”。点击它。
2.  再次向下滚动到底部，您会看到“内部版本号”。（您的内部版本号可能与我们这里的不同。）
3.  点击它七 (7) 次。第三次点击后，您会看到一个有趣的对话框，说您距离成为开发人员还有四次点击。（如果只是这么简单，嗯？）继续点击，然后*噗*，你已经恢复了开发人员设置。

这是链接

[在 Android 4.2 中恢复开发者选项菜单](http://howto.cnet.com/8301-11310_39-57549207-285/restore-the-developer-options-menu-in-android-4.2/)

[如何在 Android 4.2 上启用开发者设置](http://www.androidcentral.com/how-enable-developer-settings-android-42)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T14:15:52.167

打开 Windows 设备管理器（右键单击我的电脑并选择管理）

卸载 Android Composite ADB Interface（删除驱动程序），这样当您重新连接 Nexus 7 时，它将显示为其他设备。选择它并选择使用您自己选择的驱动程序更新驱动程序软件，例如 android/extra/google/usb_driver 或从 ASUS [http://support.asus.com/download/ModelList.aspx?SLanguage=en&keyword=nexus%下载的驱动程序207&类型=1](http://support.asus.com/download/ModelList.aspx?SLanguage=en&keyword=nexus%207&type=1)

为我工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:16:57.213

为您的设备更新驱动程序

[http://developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

# php - PHP：通过字符串选择器查找数组元素

> ID：16035584
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:13:14.203
> 
> 标签：php, arrays, search, multidimensional-array

我试图了解使用“选择器”在多维数组中查找元素的方式。

```
$vars = array(
    'site' => 'Stackoverflow',
    'menu' => array(
        'items' => array('Questions', 'Tags', 'Users', 'Badges', 'Unanswered'),
    ),
    'sidebar' => array(
        'tags' => array(
            'c_sharp' => 68,
            'java' => 62,
            'javascript' => 52,
            'jquery' => 50
        )
    )
); 
```

我想要一些功能`mixed find(string $selector, array $array)`。

**用法**

```
$site = find('site', $vars);
// result: "Stackoverflow"

$menuItems = find('menu.items', $vars);
// result: ["Questions", "Tags", "Users", "Badges", "Unanswered"]

$tags = find('sidebar.tags', $vars);
// result: ["c_sharp" => 68, "java" => 62, "javascript" => 52, "jquery" => 50]

$javascriptQuestionsCount = find('sidebar.tags.javascript', $vars);
// result: 52

$undefinedElement = find('footer.copyright.year', $vars);
// result: null 
```

谁能建议我一种实现这种功能的方法，或者有一些现成的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:17:04.327

Laravel 有一个函数可以做到这一点，它被称为[array_get()](https://github.com/laravel/laravel/blob/master/laravel/helpers.php#L59-78)

您可能想忽略该`value()`功能，但您可以`return $default;`改为。

* * *

```
/**
 * Get an item from an array using "dot" notation.
 *
 * <code>
 *      // Get the $array['user']['name'] value from the array
 *      $name = array_get($array, 'user.name');
 *
 *      // Return a default from if the specified item doesn't exist
 *      $name = array_get($array, 'user.name', 'Taylor');
 * </code>
 *
 * @param  array   $array
 * @param  string  $key
 * @param  mixed   $default
 * @return mixed
 */
function array_get($array, $key, $default = null)
{
    if (is_null($key)) return $array;

    // To retrieve the array item using dot syntax, we'll iterate through
    // each segment in the key and look for that value. If it exists, we
    // will return it, otherwise we will set the depth of the array and
    // look for the next segment.
    foreach (explode('.', $key) as $segment)
    {
        if ( ! is_array($array) or ! array_key_exists($segment, $array))
        {
            return value($default);
        }

        $array = $array[$segment];
    }

    return $array;
}

/**
 * Return the value of the given item.
 *
 * If the given item is a Closure the result of the Closure will be returned.
 *
 * @param  mixed  $value
 * @return mixed
 */
function value($value)
{
    return (is_callable($value) and ! is_string($value)) ? call_user_func($value) : $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:23:55.323

像这样的东西：

```
 <?php
$vars = array(
    'site' => 'Stackoverflow',
    'menu' => array(
        'items' => array('Questions', 'Tags', 'Users', 'Badges', 'Unanswered'),
    ),
    'sidebar' => array(
        'tags' => array(
            'c_sharp' => 68,
            'java' => 62,
            'javascript' => 52,
            'jquery' => 50
        )
    )
);

function find ($key, $array){
  $keys = explode(".",$key);
    $currArr = $array;
    for ($i=0; $i<count($keys);$i++){
        if (isset($currArr[$keys[$i]])){
          $currArr = $currArr[$keys[$i]];
        }else{
          return null;
        }
    }

    return $currArr;
}

$site = find('site', $vars);
print_r($site);
echo "<br />";

$menuItems = find('menu.items', $vars);
print_r($menuItems);
echo "<br />";

$tags = find('sidebar.tags', $vars);
print_r($tags);
echo "<br />";

$javascriptQuestionsCount = find('sidebar.tags.javascript', $vars);
print_r($javascriptQuestionsCount);
echo "<br />";

$undefinedElement = find('footer.copyright.year', $vars);
print_r($undefinedElement);
echo "<br />";
?> 
```

输出：

```
Stackoverflow
Array ( [0] => Questions [1] => Tags [2] => Users [3] => Badges [4] => Unanswered ) 
Array ( [c_sharp] => 68 [java] => 62 [javascript] => 52 [jquery] => 50 ) 
52
null 
```

小提琴：

[http://phpfiddle.org/lite/code/u7u-8jx](http://phpfiddle.org/lite/code/u7u-8jx)

无需任何库即可工作，只需简单的 PHP。

# microsoft-metro - 屏幕中央的 Winjs Flyout

> ID：16035591
> 
> 赞同：2
> 
> 时间：2013-04-16T11:13:29.863
> 
> 标签：microsoft-metro, winjs

当我单击一个按钮时，我刚刚单击的按钮顶部会出现一个 Flyout 以供确认。

我试过这个：

```
 flyout.alignment="center" 
```

但对齐是通过按钮。我想在屏幕中央显示我的弹出窗口。我在问这是否可能`Winjs.UI.Flyout`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:05:24.097

Flyout 始终与作为第一个参数传递的元素对齐。如果您需要让浮出控件不与元素对齐，而是在屏幕中心，可以通过在屏幕中心放置一个隐藏元素并将浮出控件与其对齐来完成。

```
_oncmdclick: function oncmdclick(event)
{
    // assume an element with class hidden in the page and placed at center of the screen
    var hiddenElement = this.element.querySelector('.hidden');
    var myFlyoutElement = ...; // myFlyoutElement is the flyout element
    this.newItemFlyoutElement.winControl.show(hiddenElement, 'top', 'center');
}, 
```

html:

```
<div class="hidden" style="visibility: collapse"></div> 
```

CSS：

```
// in this case, I had used 1x1 -ms-grid for the section of the page
.mypage.fragment section[role=main] {
    display: -ms-grid;
    -ms-grid-rows: 1fr;
    -ms-grid-columns: 1fr;
}
// center the hidden element in the page grid
.mypage.fragment section[role=main] .hidden
{
    -ms-grid-column-align: center;
    -ms-grid-row-align: center;
} 
```

# android - 如何在 Android 中播放任意时间的视频？

> ID：16035592
> 
> 赞同：1
> 
> 时间：2013-04-16T11:13:32.783
> 
> 标签：android, android-videoview

我想在 Android 中的 videoview 任意时间播放视频

```
 _player.setVideoURI(Uri.parse(uri));
    MediaController mc = new MediaController(this);
    _player.setMediaController(mc);
    _player.start(); 
```

现在我要设置时间：10:20 寻找文件并播放（10 分 20 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:16:45.307

请参阅[VideoView.seekTo(int msec)](http://developer.android.com/reference/android/widget/VideoView.html#seekTo%28int%29)方法

[还要注意文档](http://developer.android.com/reference/android/media/MediaPlayer.html#seekTo%28int%29)中的一件事

> 可以通过调用 seekTo(int) 来调整播放位置。尽管异步 seekTo(int) 调用以正确的方式返回，但实际的搜索操作可能需要一段时间才能完成，尤其是对于正在流式传输的音频/视频。当实际的查找操作完成时，如果已通过 setOnSeekCompleteListener(OnSeekCompleteListener) 预先注册了 OnSeekCompleteListener，则内部播放器引擎将调用用户提供的 OnSeekComplete.onSeekComplete()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T22:28:07.257

您必须等到视频准备好寻找。

```
int seekTimeMs = (10 * 60 + 20) * 1000; // 10:20
mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mediaPlayer.seekTo(seekTimeMs);
    }
}); 
```

# google-glass - 您附近的人能否在 Google Glass 中看到您所看到的并听到您所听到的？

> ID：16035599
> 
> 赞同：0
> 
> 时间：2013-04-16T11:13:56.420
> 
> 标签：google-glass

我只是想知道谷歌眼镜为佩戴者提供了多少“本地物理隐私”，将其与手机进行比较。

许多人担心谷歌眼镜的隐私（这是正确的），因为它可能会侵犯谷歌的隐私。但我认为，与今天的大屏幕手机相比，这种新的可穿戴设备还可能为佩戴者提供增强的身体隐私。

任何有实际使用谷歌眼镜经验的人都可以回答这个问题吗？另一个与隐私相关的问题是“骨传导传感器”对你周围的人有多大的噪音，你附近的人能听到多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:00:20.427

你说得对，谷歌眼镜增强了身体隐私。

您周围的人很难听到 Glass 对您说什么。在一片死寂和很近的情况下，人们可能会听到 Glass 正在以难以理解的柔和噪音的形式输出音频。我想说的是，在环境噪音和个人空间（如办公室）中等水平的环境中，没有人会注意到。

屏幕也是隐私方面的可喜变化。当他们的注意力集中在手机或平板设备上时，很容易从别人的肩膀上看过去。在使用 Glass 时，由于屏幕的大小，其他人很难分辨出您正在查看的内容。屏幕靠近您的眼睛的某些东西也会阻止人们凝视得太用力。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T15:00:06.387

如果您附近的人仔细观察显示屏，他们可能会大致辨认出您在看什么。从外部看，它是一个大约 1mm x 1mm 的反转图像。例如，当它显示电池充电图标时，我可以看到，当我没有佩戴它时。但是我无法阅读文字。

有人将耳朵靠近您的耳朵可能会听出一些音频。Glass 带有一个您可以使用的听筒，但这会排除这种可能性。

# filter - Yii CGridview 过滤日期选择器

> ID：16035600
> 
> 赞同：2
> 
> 时间：2013-04-16T11:13:59.543
> 
> 标签：filter, yii, cgridview

我已经阅读了关于制作自定义 cgridview 的论坛。我想让过滤器使用 datetimepicker。

日期时间选择器：

我已经可以包含 datetimepicker，但是当我选择日期时，它变成了错误。:(.. 我在数据库上的日期数据类型是“时间戳” ![日期](https://i.stack.imgur.com/ed9w0.jpg) ![错误](https://i.stack.imgur.com/N3Fge.jpg)

这是代码

```
<?php
$this->breadcrumbs=array(
    'Events'=>array('index'),
    'Manage',
);

$this->menu=array(
    array('label'=>'List Event','url'=>array('index')),
    array('label'=>'Create Event','url'=>array('create')),
);

Yii::app()->clientScript->registerScript('search', "
$('.search-button').click(function(){
    $('.search-form').toggle();
    return false;
});
$('.search-form form').submit(function(){
    $.fn.yiiGridView.update('event-grid', {
        data: $(this).serialize()
    });
    return false;
});
");
?>

<h1>Manage Events</h1>

<p>
You may optionally enter a comparison operator (<b>&lt;</b>, <b>&lt;=</b>, <b>&gt;</b>, <b>&gt;=</b>, <b>&lt;&gt;</b>
or <b>=</b>) at the beginning of each of your search values to specify how the comparison should be done.
</p>

<?php echo CHtml::link('Advanced Search','#',array('class'=>'search-button btn')); ?>
<div class="search-form" style="display:none">
<?php $this->renderPartial('_search',array(
    'model'=>$model,
)); ?>
</div><!-- search-form -->

<?php $this->widget('bootstrap.widgets.TbGridView',array(
    'id'=>'event-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'afterAjaxUpdate'=>"function(){jQuery('#event_date_search').datepicker({'dateFormat': 'yy-mm-dd'})}",
    'columns'=>array(
        array(
            'type' => 'raw',
            'name'=> 'event_image',
            'value' => 'CHtml::image("'.Yii::app()->request->baseUrl.'/uploads/event/$data->event_image", "event_image" ,array("width"=>100))',
            'filter'=> false,
        ),
        'event_name',
        array(
            'name' => 'event_date',
            'type' => 'raw',
            'filter'=>$this->widget('zii.widgets.jui.CJuiDatepicker', array(
                'model'=>$model,
                'attribute'=>'event_date',
                'htmlOptions' => array(
                    'id' => 'event_date_search'
                ), 
                'options' => array(
                    'dateFormat' => 'yy-mm-dd'
                )
            ), true)
        ),
        array(
            'name'=>'published',
            'filter'=>CHtml::dropDownList('Event[published]', '',  
                array(
                    ''=>'',
                    '1'=>'Published',
                    '0'=>'Not Published',
                )
            ),
            'value' =>'($data->published==1)?"Published":"Not Published"',
        ),
        array(
            'class'=>'bootstrap.widgets.TbButtonColumn',
        ),
    ),
)); 

?> 
```

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T08:38:04.617

你能替换你的代码吗

```
'options' => array(
   'dateFormat' => 'yy-mm-dd'
) 
```

和

```
'defaultOptions' => array(
   'showOn' => 'focus', 
   'dateFormat' => 'yy-mm-dd',
   'showOtherMonths' => true,
   'selectOtherMonths' => true,
   'changeMonth' => true,
   'changeYear' => true,
   'showButtonPanel' => true,
) 
```

希望这有帮助

有关详细信息，请查看此链接[http://www.yiiframework.com/wiki/318/using-cjuidatepicker-for-cgridview-filter/](http://www.yiiframework.com/wiki/318/using-cjuidatepicker-for-cgridview-filter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:09:33.690

您可以更改模型类的 search() 函数。它可以是这样的：

```
public function search() {
     ....
     $criteria->addCondition('DATE_FORMAT(time_field, \'%Y-%m-%d\') = ' . $this->time_field);
     ....
} 
```

但可能需要转换 $this->time_field 的输入值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T14:50:49.780

昨天我遇到了完全相同的问题，由于某种未知原因，我移动了

`'dateFormat' => 'yy-mm-dd'`

从选项到 htmloptions 解决了我的问题。老实说，我在 htmloptions 和 options 中都有它，到目前为止没有任何问题

```
'htmlOptions' => array(
                    'id' => 'event_date_search',
                    'dateFormat' => 'yy-mm-dd'
                     ), 

 'options' => array(
                    'dateFormat' => 'yy-mm-dd'
                   ), 
```

希望这可以帮助

# php - 将 int 60 转换为 60 分钟的时间值

> ID：16035604
> 
> 赞同：2
> 
> 时间：2013-04-16T11:14:27.813
> 
> 标签：php, datetime, casting

这似乎应该很简单，但我找不到我需要的时间格式。

来自数据库的值为 240。这意味着 240 分钟。如何将其存储在 php 变量中，以便 php 知道它的分钟数。所以稍后在脚本中我可以将它添加到一个`HH:MM`值？

（我编辑了下面的代码以反映其中一个答案）

```
$startTime = new datetime($row['startTime']);  #08:07:00.0000000
$endTime = new datetime($row['endTime']);      #12:10:00.0000000
$everyMinutes = new dateInterval('P'.$row['everyMinutes'].'M'); #60?
$updatedTime = $startTime->add($everyMinutes); # this should read 09:07:00.0000000 
```

进入的日期`$row`来自sql。startTime 和 endTime 是`time(7)`数据类型

```
| taskID |    startTime     |     endTime      | freq |
|________|__________________|__________________|______|
|   1    | 08:07:00.0000000 | 12:10:00.0000000 |  60  |
|   2    | 08:10:00.0000000 | 17:40:00.0000000 |  30  |
|   3    | 08:40:00.0000000 | 14:49:00.0000000 |  60  |
|   4    | 08:43:00.0000000 | 14:49:00.0000000 |  60  |
|   5    | 09:05:00.0000000 | 15:05:00.0000000 |  180 |
|   6    | 10:00:00.0000000 | 22:00:00.0000000 |  5   | 
```

使用此代码，我遇到了两个问题之一。抛出`new datetime()`的错误是`Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct() expects parameter 1 to be string, object given'`

没有`new datetime()`抛出的错误是`Notice: Object of class DateTime could not be converted to int`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:17:10.073

你应该阅读[这个页面](http://php.net/manual/en/datetime.add.php)。

```
$date = new DateTime($row['startTime']);
$myInterval = new DateInterval('P'.$row['everyMinutes'].'M');
$date->add($myInterval);
echo $date->format('Y-m-d') . "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:20:01.323

使用此功能

```
function convertToHoursMins($time, $format = '%d:%d') {
settype($time, 'integer');
if ($time < 1) {
    return;
}
$hours = floor($time/60);
$minutes = $time%60;
return sprintf($format, $hours, $minutes);
} 
```

像这样打发时间

```
convertToHoursMins(240); 
```

# java - 用 Java 创建 SOAP Web 服务客户端应用程序

> ID：16035612
> 
> 赞同：0
> 
> 时间：2013-04-16T11:15:00.033
> 
> 标签：java, web-services, soap, client, cxf

我已经在 Eclipse 中使用**Apache CXF**在 Java 中创建了一个 Webservice ，现在我必须创建一个 WebService 客户端应用程序来使用和调用它。我一直在寻找一种方法，我发现客户端总是依赖于服务器的 Java 类。

问题是我必须在其他 Java 环境中开发一个客户端类。我的问题是：有没有办法开发一个独立于 web 服务服务器包的客户端类，只使用**WSDL**文件？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:26:54.490

您可以将请求作为 XML 请求发送到 Web 服务 API。只有您需要使用正确的标题和正文来构造 SOAP 投诉请求。通过使用 SoapUI，您可以生成 XML 请求结构，然后在您的应用程序中重用它。

如果你使用 Jax-RS(REST APIs)，即使是 http 方法也可以

**[更新]**

如果您对如何创建客户端类感到困惑，那么您将遵循此

1.  使用 wsimport

    ```
    >  http : //hostname :port/wsdl.url on command line to create proxy classes 
    ```

2.  创建jar文件生成代理类

3.  将jar文件添加到类路径
4.  使用 Service API 构建端点，然后调用服务。
5.  下面给出了示例测试客户端。

    ```
    try {

        URL wsdlURL = new URL("http://localhost:8082/cxf/services/yourservice?wsdl");

        QName SERVICE_NAME = new QName("http://package.name/","PORTNAme");

        Service service = Service.create(wsdlURL, SERVICE_NAME);

        client = service.getPort(PORTInterface.class);

        client.executeYourMethod()

    } catch (Exception e) {

        // TODO Auto-generated catch block

        e.printStackTrace();

    } 
    ```

1.  网址是 WSDL 网址
2.  要创建 QName，需要提供服务接口的命名空间（通常是包的名称）和端口名称，您可以在绑定部分的 WSDL 中找到这些名称。
3.  还需要识别代理类（名称类似于端口名称）

干杯萨西什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:25:03.983

您可以借助`Apache CXF` [Link](http://cxf.apache.org/docs/wsdl-to-java.html) wsdl to java 工具。`wsdl2java`- 获取 WSDL 文档并生成完全注释的 Java 代码，从中实现服务。

您也可以借助 eclipse 插件。

[Eclipse插件生成java类](http://sourceforge.net/projects/wsdl2javawizard/)

# r - r 中的相对频率（按因子）

> ID：16035614
> 
> 赞同：1
> 
> 时间：2013-04-16T11:15:18.313
> 
> 标签：r, statistics, frequency, tapply

我想获得一个跨其他因子变量的变量的前 10 个绝对频率和相对频率的表格。我有一个包含 3 列的数据框：1 列是因子变量，第 2 列是我需要计算的其他变量，3 是作为约束的逻辑变量。（真实数据库有超过 400 万个观测值）

```
dtf<-data.frame(c("a","a","b","c","b"),c("aaa","bbb","aaa","aaa","bbb"),c(TRUE,FALSE,TRUE,TRUE,TRUE))
colnames(dtf)<-c("factor","var","log")
dtf

factor var   log
1      a aaa  TRUE
2      a bbb FALSE
3      b aaa  TRUE
4      c aaa  TRUE
5      b bbb  TRUE 
```

所以我需要在“因子”的每个因子中找到“var”的最高绝对和相对频率，其中“log”==TRUE。

我已经用绝对频率尝试过这个（在真实的数据库中我提取了前 10 名，这里我得到了 2 行）：

```
t1<-tapply(dtf$var[dtf$log==T],dtf$factor[dtf$log==T],function(x)(head(sort(table(x),decreasing=T),n=2L)))
# Returns array of lists: list of factors containing list of top frequencies
t2<-(t1, ldply)
# Split list inside by id and freq
t3<-do.call(rbind, lapply(t2, data.frame))
# Returns dataframe of top "var" values and corresponding freq for each group in "factor"
# Factor variable's labels are saved as row.names in t3 
```

以下函数有助于查找整个数据库的相对频率，而不是按因素分组：

```
getrelfreq<-function(x){
v<-table(x)
v_rel<-v/nrow(dtf[dtf$log==T,])
head(sort(v_rel,decreasing=T),n=2L)} 
```

但是我有相对频率的问题，因为我需要将绝对频率除以“var”的行数除以每个因子，而不是“var”的总行数，其中“log”==T。我不知道如何在 tapply 循环中使用它，这样每个因素的分母都会不同。我还想在 1 个 tapply 循环中使用这两个函数，而不是生成许多表并合并结果。但是不知道如何将这两个功能放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:04:54.527

如果我对您的理解正确，您可以执行我在下面写的内容。用于`dcast`获取 each 中每个 的频率`var`，`factor`然后`rowSums()`将它们相加以获得所有因子中每个 var 的绝对频率。您可以使用`prop.table`来计算`var`每个`factor`. 请注意，我对您的示例数据进行了轻微更改，以便您可以了解每个阶段发生的情况（我为when添加了一个`'bbb'`值）。试试这个：`factor` `b``log == TRUE`

```
#Data frame (note 2 values for 'bbb' for factor 'b' when log == TRUE)
dtf<-data.frame(c("a","a","b","c","b","b"),c("aaa","bbb","aaa","aaa","bbb","bbb"),c(TRUE,FALSE,TRUE,TRUE,TRUE,TRUE))
colnames(dtf)<-c("factor","var","log")
dtf
#     factor var   log
#1      a aaa  TRUE
#2      a bbb FALSE
#3      b aaa  TRUE
#4      c aaa  TRUE
#5      b bbb  TRUE
#6      b bbb  TRUE

library(reshape2)

# Find frequency of each var across each factor using dcast
mydat <- dcast( dtf[dtf$log==TRUE , ] , var ~ factor , sum )
#  var a b c
#1 aaa 1 1 1
#2 bbb 0 2 0

# Use rowSums to find absolute frequency of each var across all groups
mydat$counts <- rowSums( mydat[,-1] )
# Order by decreasing frequency and just use first 10 rows
mydat[ order( mydat$counts , decreasing = TRUE ) , ]
#  var a b c counts
#1 aaa 1 1 1      3
#2 bbb 0 2 0      2

# Relative proportions for each var across the factors
data.frame( var = mydat$var , round( prop.table( as.matrix( mydat[,-c(1,ncol(mydat))]) , 1 ) , 2 ) )
#  var    a    b    c
#1 aaa 0.33 0.33 0.33
#2 bbb 0.00 1.00 0.00 
```

# html - 带有浮动内部元素的元素中的自动换行文本

> ID：16035615
> 
> 赞同：0
> 
> 时间：2013-04-16T11:15:21.230
> 
> 标签：html, css

我的页面上有用户贡献的文本/图像帖子。由于该站点具有响应性，因此我无法完全控制后包装器的宽度。现在，如果用户输入的单词太长而无法直接显示在图像上，它会漂浮在图像下方，即使我启用了“ `word-wrap: break-word;`”我知道 css-property 适用于固定宽度的元素，但它似乎不起作用带有浮动的内部元素。

是否有任何非hacky的跨浏览器解决方案？

这是我的示例示例：http: [//jsfiddle.net/Yvwzq/](http://jsfiddle.net/Yvwzq/)

# javascript - 在元素的onclick函数属性中传递一个字符串动态创建的元素

> ID：16035617
> 
> 赞同：9
> 
> 时间：2013-04-16T11:15:30.857
> 
> 标签：javascript, html

我正在尝试在动态创建的锚元素的 onClick 事件处理函数的参数中传递一个字符串，请参阅小提琴[http://jsfiddle.net/shmdhussain/bXYe4/](http://jsfiddle.net/shmdhussain/bXYe4/)。

我无法将字符串传递给函数，但我能够将数字整数传递给函数。请帮助我。提前致谢。

html:

```
<DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>test</title>
        <link rel="stylesheet" href="mystyle.css" class="cssfx"/>

        <script src="/jquery.min.js"></script>
        <script src="colon.js"></script>
    </head>

    <body>

        <div class="mytest">

        </div>

    </body>
</html>
</html> 
```

Javascript：

```
var elem=[  {"name":"husain","url":"http://google.com","age":21},
            {"name":"ismail","url":"http://yahoo.com","age":22},
            {"name":"nambi","url":"http://msn.com","age":23}
         ]

jQuery(function($){
    var str="";
    for(i=0;i<elem.length;i++){
        str+="<a href='#' onclick='test('"+elem[i].url+"')'>dd</a><br><br>"
        console.log(str);

    }
    $('.mytest').html(str);

});

function test(url){
    console.log("url is "+url);
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T11:18:53.130

您必须使用正确的字符串语法。这

```
"<a href='#' onclick='test('"+elem[i].url+"')'>dd</a><br><br>" 
```

将导致

```
<a href='#' onclick='test('http://domain.tld')'>dd</a><br><br> 
```

您不能将 ' 用于 onclick 和 test 的参数。使用 \" 代替。

```
"<a href='#' onclick='test(\""+elem[i].url+"\")'>dd</a><br><br>" 
```

这导致

```
<a href='#' onclick='test("http://domain.tld")'>dd</a><br><br> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:25:05.360

你的问题是，这`str+="<a href='#' onclick='test('"+elem[i].url+"')'>dd</a><br/><br/>";`将返回一个字符串，如`"<a href='#' onclick='test('your_url')'>dd</a><br/><br/>"`. 这将生成一个像这样的html：

```
<a href='#' onclick='test('your_url')'>dd</a><br/><br/> 
```

在这种情况下，onclick 属性仅包含 'test('。

试试这个：

```
str+="<a href='#' onclick='test(\""+elem[i].url+"\")'>dd</a><br/><br/>"; 
```

这将生成一个像这样的html：

```
<a href='#' onclick='test("your_url")'>dd</a><br/><br/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:11:07.023

直接使用：

```
test('"+elem[i].url+"') 
```

代替：

```
'test('"+elem[i].url+"')' 
```

在方法中传递字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:38:37.173

如果我没有误解你的问题，这是你的答案；

```
var elem=[  {"name":"husain","url":"http://google.com","age":21},
    {"name":"ismail","url":"http://yahoo.com","age":22},
    {"name":"nambi","url":"http://msn.com","age":23}
]

jQuery(function($){
    var str="";
    for(i=0;i<elem.length;i++){
        var a =$('<a>',{href:'#',text:'dd'});
        a.click(function(e){
               test(elem[i].url)
        });
        $('.mytest').append(a).append($('</br>')).append($('</br>'));

    }
});

function test(url){
    console.log("url is "+url);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-06T05:02:37.880

为了传递多个参数，您可以通过将字符串与 ASCII 值连接来转换字符串，例如，对于单引号，我们可以使用`&#39;`

```
var str= "&#39;"+ str+ "&#39;"; 
```

您可以将相同的参数传递给事件。这`onclick(str)`在我们传递多个参数的情况下很有帮助。它适用于每个浏览器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-22T05:20:00.780

直接使用：

```
test('elem[i].url') 
```

代替：

```
test('"+elem[i].url+"') 
```

在方法中传递字符串。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-12T18:24:30.970

```
var funcName = "SelectPickerBtnSelectEvent('" + str + "')";
$(".btn.dropdown-toggle.btn-light").attr("onclick", funcName); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-13T05:32:31.690

也许相反，使用元素上的数据属性来保存字符串。然后在函数中检索数据。

# mysql - MySQL 附近的正确语法

> ID：16035620
> 
> 赞同：0
> 
> 时间：2013-04-16T11:15:34.770
> 
> 标签：mysql

```
select c.*
from costs c
where 32 between c.x and c.x + c.deltax and 34 between c.y + c.deltay
order by priority desc
limit 1 
```

一直说`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'order by priority desc limit 1' at line 4`。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:17:21.130

您的第二个`between`只有一个条件要检查，它缺少`and`：

```
34 between c.y + c.deltay 
```

你想用吗？

```
34 between c.y and c.y + c.deltay 
```

# perl - 解析日志文件，然后将输出重定向到其他文件

> ID：16035623
> 
> 赞同：0
> 
> 时间：2013-04-16T11:15:40.493
> 
> 标签：perl

我正在尝试在我的脚本中解析一些文件并将输出重定向到其他文件。请帮帮我，我做错了什么。因为我正在为每个输出创建单独的文件，但它正在创建一个通用的 .txt 文件，并且我的代码不起作用。

下面是创建输出文件的代码：

```
open( $m1logFIle, "> $m1log.txt" ) || die "\n Could not create write file.\n\n";
open( $g1logFIle, "> $g1log.txt" ) || die "\n Could not create write file.\n\n";
open( $V1logFIle, "> $VOD1og.txt") || die "\n Could not create write file.\n\n"; 
```

我使用以下代码将其打印到文件中：

```
print $V1logFIle  "-V1 Success @ $curr_exectime(ms)\n\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:36:55.877

我将在这里做一些假设。

1.  您没有使用`use strict`and `use warnings`，这就是为什么您无法弄清楚为什么会发生这种情况的原因。
2.  当您说时`but its creating a common file .txt file`，您实际上是指它正在创建一个具有该名称的文件`.txt`。
3.  你的variables`$m1log`和不知何故未定义。`$g1log``$VOD1og`

因此，要解决此问题，请添加

```
use strict;
use warnings; 
```

到您的脚本并修复出现的错误和警告。如果您的问题仍然存在，请确保您的变量实际上包含您认为它们所做的事情，例如通过使用`Data::Dumper`模块打印它们：

```
use Data::Dumper;
...
print Dumper $VOD1og; 
```

你会发现这`Data::Dumper`是一个很好的调试工具。

**TL;博士：**

```
my $VOD1og;         # undefined variable
print "> $VOD1og";  # prints "> " because $VOD1og is empty 
```

如果没有`use warnings`，则不会发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:19:58.727

如果存在一个变量`$m1log`，那么它应该是

```
open( $m1logFIle, ">", $m1log.".txt" ) || die "\n Could not create write file.\n\n"; 
```

# php - phpMyAdmin：PHP 致命错误 - 无法重新声明 PMA_checkLink()

> ID：16035625
> 
> 赞同：4
> 
> 时间：2013-04-16T11:15:44.620
> 
> 标签：php, mysql, apache, phpmyadmin

我最近开始在尝试访问我托管的 phpMyAdmin 时遇到问题。我在尝试访问它时收到 500 内部服务器错误，并且正如预期的那样，在我的浏览器中只得到一个空白页面。

我查看了 phpMyAdmin 的错误日志并注意到出现以下错误：

```
PHP Fatal error:  Call to undefined function PMA_sanitize() in /usr/share/phpMyAdmin/libraries/Message.class.php on line 541 
```

首先，我重新安装了 phpMyAdmin，在此之后，在我再次遇到同样的问题之前能够正常访问它一段时间。

我浏览了网络，并在[此处找到](http://avastechnology.wordpress.com/2013/01/02/error-with-phpmyadmin-3-5-4-showing-blank-screen/)了以下博客，该博客可能会解决此问题。我按照博客的建议做了，并添加了以下内容：

```
require_once('./libraries/sanitizing.lib.php'); 
```

在以下文件的顶部：

/usr/share/phpMyAdmin/libraries/Message.class.php

这工作了一段时间，但随后又出现了 500 个内部服务器错误。所以我再次检查了错误日志并收到以下错误消息：

```
PHP Fatal error:  Cannot redeclare PMA_checkLink() (previously declared in /usr/share/phpMyAdmin/libraries/sanitizing.lib.php:15) in /usr/share/phpMyAdmin/libraries/sanitizing.lib.php on line 35 
```

除了这些致命错误之外，我还收到以下警告消息，但不确定这些是否与问题有关：

```
PHP Warning:  Unknown: Unable to allocate memory for pool. in Unknown on line 0

PHP Warning:  require_once(): Unable to allocate memory for pool. in /usr/share/phpMyAdmin/index.php on line 13

PHP Warning:  require(): Unable to allocate memory for pool. in /usr/share/phpMyAdmin/libraries/common.inc.php on line 52

PHP Warning:  require_once(): Unable to allocate memory for pool. in /usr/share/phpMyAdmin/libraries/Error_Handler.class.php on line 12

PHP Warning:  require_once(): Unable to allocate memory for pool. in /usr/share/phpMyAdmin/libraries/Error.class.php on line 12 
```

我正在使用 PHP 5.3.3 版、Apache 2.2.15 版、mysql 5.1.61 版和 phpMyAdmin 3.5.7 版运行专用 Centos 6 服务器

如果有人能对此有所了解，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:12:24.580

`require_once(): Unable to allocate memory for pool.`意味着没有足够的内存来包含来自 PhpMyAdmin 的一些声明文件。

这些文件未被包括在内，它们包含的定义未被加载。因此你的第一个错误`Call to undefined function PMA_sanitize()`。

您链接到的博客文章建议在可疑位置添加包含，从而导致您在不应该包含一些定义文件。因此你的第二个错误`Cannot redeclare PMA_checkLink()`。

如果我是你，我会回滚 PhpMyAdmin 代码中的所有更改并尝试解决第一个问题。[这个问题](https://stackoverflow.com/questions/3723316/what-is-causing-unable-to-allocate-memory-for-pool-in-php)可能会为您提供正确的程序。

# sql - SQL 连接帮助 - 连接前对表求和并应用过滤器

> ID：16035628
> 
> 赞同：0
> 
> 时间：2013-04-16T11:15:50.053
> 
> 标签：sql, join, filter, sum

我有一个库存视图（列出所有单个库存和库存日期）和一个销售视图（列出所有销售和销售发生的日期）。

库存视图：

```
+----+------+-----+------------+
| ID | Item | Qty |    Date    |
+----+------+-----+------------+
|  1 | A    |   3 | 01/01/2000 |
|  2 | A    |   2 | 02/02/2000 |
|  3 | D    |   9 | 05/06/2000 |
|  4 | F    |  22 | 09/01/2001 |
|  5 | A    |  10 | 01/04/2001 |
|  6 | C    |  12 | 01/01/2002 |
+----+------+-----+------------+ 
```

销售视图：

```
+------+-----+------------+
| Item | Qty |    Date    |
+------+-----+------------+
| B    |   3 | 01/01/2001 |
| B    |  77 | 01/12/2001 |
| C    |   9 | 02/02/2002 |
| A    |  10 | 03/03/2002 |
| G    |   2 | 05/06/2002 |
| C    |   3 | 09/10/2012 |
+------+-----+------------+ 
```

我想加入这些表..但在这样做之前：

股票视图需要在 2 个日期参数 @StockFrom 和 @StockTo 之间进行过滤

销售视图需要在 2 个日期参数 @SalesFrom 和 @SalesTo 之间进行过滤

然后，销售视图需要按项目分组并汇总数量（因此尽管正在过滤日期字段，但需要删除它），然后在项目字段上加入库存视图。

因此，从本质上讲，我希望查看库存视图（但按日期过滤），并带有一个额外的列，显示该项目在 2 个日期之间发生的销售。

期望的输出：

```
+----+------+-----+------------+-------+
| ID | Item | Qty |    Date    | Sales |
+----+------+-----+------------+-------+
|  1 | A    |   3 | 01/01/2000 |    10 |
|  2 | A    |   2 | 02/02/2000 |    10 |
|  3 | D    |   9 | 05/06/2000 |     0 |
|  4 | F    |  22 | 09/01/2001 |     0 |
|  5 | A    |  10 | 01/04/2001 |    10 |
|  6 | C    |  12 | 01/01/2002 |    12 |
+----+------+-----+------------+-------+ 
```

提前感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:27:20.413

```
SELECT
  Stock.*,
  IFNULL(SUM(Sales.Qty),0) AS Sales
FROM Stock
LEFT JOIN Sales ON Stock.Item=Sales.Item
WHERE Stock.Date BETWEEN @StockFrom AND @StockTo
AND (
  Sales.Date BETWEEN @SalesFrom AND @SalesTo
  OR Sales.Date IS NULL
)
GROUP BY Stock.ID 
```

这是针对 MySQL 的，因为您没有指定方言。[SQLfiddle](http://sqlfiddle.com/#!2/5ac16)

**编辑**

```
SELECT
  Stock.ID AS ID,
  MIN(Stock.Item) AS Item,
  MIN(Stock.Qty) AS Qty,
  MIN(Stock.Date) AS Date,
  CASE WHEN SUM(Sales.Qty) IS NULL THEN 0 ELSE SUM(Sales.Qty) END AS Sales
FROM Stock
LEFT JOIN Sales ON Stock.Item=Sales.Item
WHERE Stock.Date BETWEEN @StockFrom AND @StockTo
AND (
  Sales.Date BETWEEN @SalesFrom AND @SalesTo
  OR Sales.Date IS NULL
)
GROUP BY Stock.ID 
```

适用于 MS SQL ( [SQLfiddle](http://sqlfiddle.com/#!3/070ae/10) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:33:25.810

请尝试以下查询 MS Sql Server：

```
SELECT DISTINCT
    a.ID, 
    a.Item, 
    a.Qty, 
    a.Date, 
    ISNULL(SUM(b.Qty) OVER (PARTITION BY a.Item, a.[Date]), 0) Sales
FROM 
    StockView a LEFT JOIN SalesView b on a.Item=b.Item 
```

# django - Django 自定义 manage.py 命令在应用程序中调用函数

> ID：16035635
> 
> 赞同：0
> 
> 时间：2013-04-16T11:16:15.720
> 
> 标签：django, django-1.3

我有一个命令用于从 API 下载数据，然后将其存储到本地数据库中，它目前是我的应用程序的一部分，但我想添加从 manage.py 命令运行它的能力。

目前我只是想在我的应用程序中使用正确的参数调用它，但我得到一个与模型相关的错误

错误：

```
 File "C:\xxx\Development\working folder\appdata\globaltags\boughtintags.py", line 2, in <module>
    import appdata.boughtin.models as models
AttributeError: 'module' object has no attribute 'models' 
```

我正在使用的当前代码：

```
class Command(BaseCommand):
    args = '<queryset_uuid queryset_item_uuid>'
    help = 'Downloads arbitrary items using a download script'

    def handle(self, *args, **options):
        for queryset_uuid, queryset_item_uuid in args:

            if download_queryset(queryset_uuid=queryset_uuid, queryset_item_uuid=queryset_item_uuid):
                self.stdout.write('Successfully downloaded "%s"\n' % queryset_item_uuid)
            else:
                raise CommandError('Unable to download "%s"\n' % queryset_item_uuid) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:37:51.610

尝试更改`import appdata.boughtin.models as models`为`boughtintags.py`

```
from appdata.boughtin import models 
```

# android - 如何在android中获取连接到同一Wi-Fi网络的系统的所有IP地址

> ID：16035636
> 
> 赞同：3
> 
> 时间：2013-04-16T11:16:40.673
> 
> 标签：android

有人可以告诉我如何以编程方式在 Android 中找到连接到同一网络的所有系统的 IP 地址。DHCPInfo 类仅提供分配给我们的 android 设备的 IP 地址，但不提供连接到同一网络的其他设备的 IP 地址。如何获取连接到同一网络的其他设备的IP地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-13T12:40:37.147

首先通过这个获取主机ip

```
public String   s_dns1 ;
   public String   s_dns2;     
   public String   s_gateway;  
   public String   s_ipAddress;    
   public String   s_leaseDuration;    
   public String   s_netmask;  
   public String   s_serverAddress;
   TextView info;
   DhcpInfo d;
   WifiManager wifii;

    wifii = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        d = wifii.getDhcpInfo();

        s_dns1 = "DNS 1: " + String.valueOf(d.dns1);
        s_dns2 = "DNS 2: " + String.valueOf(d.dns2);
        s_gateway = "Default Gateway: " + String.valueOf(d.gateway);
        s_ipAddress = "IP Address: " + String.valueOf(d.ipAddress);
        s_leaseDuration = "Lease Time: " + String.valueOf(d.leaseDuration);
        s_netmask = "Subnet Mask: " + String.valueOf(d.netmask);
        s_serverAddress = "Server IP: " + String.valueOf(d.serverAddress); 
```

d.dns1 是主机 ip

现在通过这个获取连接的ips

```
String connections = "";
        InetAddress host;
        try
        {
            host = InetAddress.getByName(intToIp(d.dns1));
            byte[] ip = host.getAddress();

            for(int i = 1; i <= 254; i++)
            {
                ip[3] = (byte) i;
                InetAddress address = InetAddress.getByAddress(ip);
                if(address.isReachable(100))
                {
                    System.out.println(address + " machine is turned on and can be pinged");
                    connections+= address+"\n";
                }
                else if(!address.getHostAddress().equals(address.getHostName()))
                {
                    System.out.println(address + " machine is known in a DNS lookup");
                }

            }
        }
        catch(UnknownHostException e1)
        {
            e1.printStackTrace();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
       System.out.println(connections); 
```

**整顿**

```
public String intToIp(int i) {
        return (i & 0xFF) + "." +
                ((i >> 8 ) & 0xFF) + "." +
                ((i >> 16) & 0xFF) + "." +
                ((i >> 24) & 0xFF);
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T12:00:43.653

```
private class Task extends AsyncTask<void void="">{

     InetAddress[] inetAddress = null;
     List<string> hostList = new ArrayList<string>();

  @Override
  protected Void doInBackground(Void... arg0) {

   doTest();
  }

  @Override
  protected void onPostExecute(Void result) {

    ArrayAdapter<string> adapter
    = new ArrayAdapter<string>(
      AndroidInetActivity.this,
      android.R.layout.simple_list_item_1,
      hostList);

    resultList.setAdapter(adapter);
   }

  private void doTest(){

      String host = hostinput.getText().toString();
    inetAddress = InetAddress.getAllByName(host);

    for(int i = 0; i < inetAddress.length; i++){

     hostList.add(inetAddress[i].getClass() + " -\n"
       + inetAddress[i].getHostName() + "\n"
       + inetAddress[i].getHostAddress());
       }

     }
    }
} 
```

# search - Solr - 最常见的搜索词

> ID：16035642
> 
> 赞同：5
> 
> 时间：2013-04-16T11:16:55.343
> 
> 标签：search, solr, lucene

我正在尝试组织一个 solr 搜索引擎。我已经设置了拼写错误系统和建议。

但是我似乎无法找到如何检索 solr/lucene 中搜索最多的前 10 个单词/术语/关键字。我怎样才能得到这个？我想在我的主页上显示这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:29:24.680

Solr 不提供这种开箱即用的功能。有[StatsComponent](http://wiki.apache.org/solr/StatsComponent)，它为您提供各种统计信息，但所有这些都只是数字。

根据您访问 solr 的方式（直接或通过您自己的应用程序），您可以拦截所有调用并记录查询字符串。我在最近的一个项目中做到了这一点，我在其中记录了对数据库的查询。如果您将所有关键字提交到您的 solr 服务器上的其他核心，您可以按照 Hyque 的描述对您的搜索字词进行分面查询

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:32:40.107

您可以使用 facet 来检索 Top X 单词，如下所示：

```
http://yourservergoeshere/solr/select?q=*&wt=xml&indent=true&facet=true&facet.query=*&facet.field=message&facet.limit=10&facet.minCount=1 
```

facet.field 的值取决于您要搜索的字段。使用 facet.limit，您将（显然）将结果数量限制为 10。您将在结果末尾找到构面结果，从“facet_counts”

编辑：我真的应该早点睡觉。我没有在您的问题中看到“搜索最多”。对此感到抱歉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-18T22:20:56.433

到目前为止，Apache Solr 不提供任何此类功能。对此有一个愿望，并有一个与之对应的 JIRA 票。如果您希望有一天在 Solr 中看到它，您可以投票支持它：[https](https://issues.apache.org/jira/browse/SOLR-10359) ://issues.apache.org/jira/browse/SOLR-10359 。

stats 组件提供有关统计信息的信息，但它本质上主要是数字。您可以解析服务器日志并想出一种方法来构建经常搜索的术语（例如，将这些日志泵入 SiLK 或 Kibana 以进行可视化）。

如果您能够更改前端并向 UI 添加一些 javascript 代码，或者可以拦截搜索请求并对 API 进行异步或批量调用以进行跟踪，则可以使用[SearchStax Analytics](https://www.searchstax.com/cloud-search-service/search-analytics/)，它提供了 Search Analytics 来跟踪搜索、点击、购物车操作、收入等。

# javascript - jQuery .clone() 更改引用

> ID：16035649
> 
> 赞同：0
> 
> 时间：2013-04-16T11:17:05.060
> 
> 标签：javascript, jquery

我有一段由 jQuery 生成的 XML。

## 我想要的是

```
<booklists>
    <booklist>
        <userid>0</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
    <booklist>
        <userid>1</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
    <booklist>
        <userid>2</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
    <booklist>
        <userid>3</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
    <booklist>
        <userid>4</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
</booklists> 
```

## 我得到了什么

```
<booklists>
    <booklist>
        <userid>0</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
    <booklist>
        <userid>4</userid>
        <userid>3</userid>
        <userid>2</userid>
        <userid>1</userid>
        <book>Foo</book>
        <book>Bar</book>
    </booklist>
</booklists> 
```

## 我的代码

```
lists = $('<booklists />')
books = $('<booklist />');

book = $('<book>Foo</book>');
books.append(book);

book = $('<book>Bar</book>');
books.append(book);

temp = books.clone();

for (var i = 0; i < 5; i++) {
    books.prepend('<userid>' + i + '</userid>');
    lists.append(books);
    books = temp;
}

$('.output').html(lists); 
```

## 例子

[http://jsfiddle.net/q6Q4A/](http://jsfiddle.net/q6Q4A/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:21:32.190

```
books = temp; 
```

需要是

```
books = temp.clone(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:22:14.067

似乎您想将`.clone()`呼叫移入循环：

```
var lists = $('<booklists />'),
    books = $('<booklist />');
books.append('<book>Foo</book>').append('<book>Bar</book>');

for (var i = 0; i < 5; i++) {
    var temp = books.clone();
    temp.prepend('<userid>' + i + '</userid>');
    lists.append(temp);
}

$('.output').html(lists); 
```

顺便说一句，我认为您不应该尝试在 HTML 文档中创建 XML 节点 - 它可能不适用于每个浏览器。

# matlab - 提取特定数字

> ID：16035653
> 
> 赞同：0
> 
> 时间：2013-04-16T11:17:11.333
> 
> 标签：matlab

如果一个字符串只有 1(s) 和 2(s) 的组合，你如何提取所有 2(s)。

我在下面尝试过这段代码，但不起作用。

```
C=textscan(trigs,'%2d.',2); 
```

有人能指出我正确的方向吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:21:59.377

您可以像这样获得所有 2 的位置：

```
str = '11221212';
strfind(str,'2') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:26:31.517

什么？只需找到 str 中带有“2”的元素的位置？我不认为你那么努力，因为至少有几种方法我可以看到我的头顶。

```
C = find(str == '2'); 
```

或者，

```
C = strfind(str,'2'); 
```

（还有 findstr，但该工具显然会在某个时候过时/丢弃。）

或者，

```
C = regexp(str,'2') 
```

或者，

```
C = find(ismember(str,'2')); 
```

我敢打赌还有更多的方法。看看这个的输出：

```
help strfun 
```

# css - 带有LESS的字符串内的多个函数

> ID：16035654
> 
> 赞同：11
> 
> 时间：2013-04-16T11:17:14.717
> 
> 标签：css, less

不久前我问了一个[类似](https://stackoverflow.com/questions/15322900/use-function-inside-string-with-less)的问题，并得到了很好的答案。不幸的是，这一次的答案是不够的，而且问题稍微复杂一些。

我目前正在使用[LESS](http://lesscss.org/)和[LESSHat](http://lesshat.com/)混合来构建主题。我已经将许多颜色定义为变量，目前正在尝试使用 LESSHat 的`.gradient()`mixin 定义渐变。问题是 mixin 接受一个字符串作为单个参数，而不是每个梯度参数的一系列参数，例如：

```
#element {
    .gradient(~"linear-gradient(90deg, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%)");
} 
```

以上一切都很好，我可以使用字符串插值（即`@{color-var}`）在字符串中使用我的变量。但是，我还想对变量运行一些函数，如下所示：

```
.gradient(~"linear-gradient(top, @{green} 0%, @{green} 50%, darken(@green, 10%) 50%, darken(@green, 10%) 100%)"); 
```

问题是它`darken(@green, 10%)`永远不会被编译，并且一些浏览器只是将这种颜色解释为`green`. 有谁知道在`darken()`上面的字符串中包含函数的返回而不为此创建单独的变量的正确方法？

作为参考，我尝试了以下方法无济于事：

```
.gradient(~"linear-gradient(top, @{green} 0%, @{green} 50%, "darken(@green, 10%)" 50%, "darken(@green, 10%)" 100%)");
.gradient(~"linear-gradient(top, @{green} 0%, @{green} 50%, {darken(@{green}, 10%)} 50%, {darken(@{green}, 10%)} 100%)"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T16:41:00.050

这应该可行，就像您的第一种方法一样，但您还应该包括`~`：

```
.gradient(~"linear-gradient(top, @{green} 0%, @{green} 50%, " darken(@green, 10%) ~" 50%, " darken(@green, 10%) ~" 100%)"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:47:45.340

您是否尝试过先将变暗的颜色保存到变量中？像这样：

```
@darkened-green: darken(@green, 10%);
.gradient(~"linear-gradient(top, @{green} 0%, @{green} 50%, @{darkened-green} 50%, @{darkened-green} 100%)"); 
```

# python - 用 Python 将两个字典相互写入 MySQL 表的最快方法是什么？

> ID：16035656
> 
> 赞同：0
> 
> 时间：2013-04-16T11:17:17.667
> 
> 标签：python, mysql, insert

我有以下字典格式：

```
{ File1:{name1:2,name2:4},
  File2:{name3:3, name2:5},
  File3:{name5:6}  } 
```

我想将它们插入到具有以下格式的 MySQL 表中：

```
Id|File_name|Name|#of Seen
1   File1    name1  2
2   File1    name2  4
3   File3    name3  3
4   File2    name2  5
5   File3    name5  6 
```

我写了下面的代码，但我的表格行（S）中不断出现“null”（现在只有一行）。

```
connect = MySQLdb.connect(host = "127.8.2.3", port=3377, user = "root",  db="info")
with connect: 

    cur = connect.cursor()
    for i in maindict.items():
        keys=i[0]
        for k,v in innerdict.items():
            k=i[1]
            v=i[2]

            query="INSERT INTO TABLE names_info (id,filename,name) VALUES (%(id)s,% (filename)s, %(name)s)"
            cursor.execute(query) 
```

有谁知道它为什么不起作用或者我如何从我的数据中获取上表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:24:31.983

好吧，进行字典迭代的一种简单方法是......

```
maindict = {'File1': {'name1': 2, 'name2': 4},
            'File2': {'name3': 3, 'name2': 5},
            'File3': {'name5': 6}}

for filename, name_and_number in maindict.iteritems():
    for name, number in name_and_number.iteritems():
        print filename, name, number 
```

...您可能应该替换这些行...

```
query="INSERT INTO TABLE names_info (id,filename,name) VALUES (%(id)s,% (filename)s, %(name)s)"
cursor.execute(query) 
```

......更像这样的东西......

```
query = "INSERT INTO TABLE names_info (id,filename,name) VALUES (%s,%s,%s)"
cursor.execute(query, [id, filename, name]) 
```

...以避免任何潜在的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)问题。

# php - 在简单的 WordPress 简单的 Paypal 购物车中使用 PHP

> ID：16035658
> 
> 赞同：-4
> 
> 时间：2013-04-16T11:17:20.667
> 
> 标签：php, wordpress

我对wordpress领域一无所知，所以如果这个问题很愚蠢，请原谅我。我正在构建一个即时 JavaScript 计算器来计算您的成本。然后，如果您单击一个按钮，它将重定向到带有 Simple Paypal 购物车的页面。我希望简单的 Paypal 购物车表单的字段由计算器中的信息自动填充。我想使用 PHP 来做到这一点。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:19:57.353

我认为您确实需要先尝试一下，然后提出问题，要求某人为您做这件事并不是真正的前进方向。然而，这是在 5 秒谷歌搜索中找到的链接：

[http://www.jquery4u.com/plugins/10-jquery-based-shopping-carts/](http://www.jquery4u.com/plugins/10-jquery-based-shopping-carts/)

# ruby-on-rails - 使用 Rails RefineryCMS 在 Heroku 上的高响应队列时间

> ID：16035660
> 
> 赞同：2
> 
> 时间：2013-04-16T11:17:34.630
> 
> 标签：ruby-on-rails, heroku, refinerycms, newrelic

我正在 Heroku 上运行 RefineryCMS 应用程序。它在两个网络测功机上，但对于当前每分钟 13 个请求的可忽略流量，实际测功机负载低于 10%（如果我正确阅读 New Relic）。

但是，我的应用服务器平均响应时间在 800 毫秒，几乎所有时间都花在了请求排队上。每个其他请求都会遭受 3000 毫秒（或更多）的请求队列峰值，而其他一些请求将在 200-300 毫秒内正常加载，这要归功于积极的内存缓存。

如何找出问题的根本原因是什么？

**编辑：**在对日志进行进一步调查后，我不得不问自己一个问题：这是预期的 RefineryCMS 在 Amazon S3 行为上的资产托管吗？

```
heroku[router]: method=GET path=/system/images/W1siZiIsIjIwMTMvMDQvMTQvMTUvMTAvMDkvNzY4L0pFQU5fQ0xBVURFX1BFTk5FVElFUi5qcGciXSxbInAiLCJ0aHVtYiIsIjI1MHgiXV0/JEAN-CLAUDE%20PENNETIER.jpg service=1061ms status=200 bytes=11232
heroku[router]: method=GET path=/system/images/W1siZiIsIjIwMTMvMDQvMTQvMTUvMTEvMzkvMjI3L01BUklTU19KQU5TT05TLmpwZyJdLFsicCIsInRodW1iIiwiMjUweCJdXQ/MARISS%20JANSONS.jpg service=1161ms status=200 bytes=14358
heroku[router]: method=GET path=/system/images/W1siZiIsIjIwMTMvMDQvMTQvMTUvMjEvNDAvOC9TaXJfTkVWSUxMRV9NQVJSSU5FUi5qcGciXSxbInAiLCJ0aHVtYiIsIjI1MHgiXV0/Sir%20NEVILLE%20MARRINER.jpg service=5412ms status=200 bytes=23191 
```

这些文件是否在本地托管，因此会影响请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:36:29.570

这听起来像是运行缓慢的请求。查看您的日志以获取更多信息，但我怀疑您会看到一堆 H12 错误。

如果您还没有，我会考虑使用 Unicorn 和 Rack::Timeout。通常，快速请求会因其他长时间运行的请求引起的队列而减慢。通过查看使用 Rack::Timeout，您可以终止任何长时间运行的请求（例如 15 秒），而使用 Unicorn 将允许您一次处理多个请求。

当然，这是假设您在 Cedar 上运行。如果你不是，我会尽快升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:06:34.610

您是否尝试过切换到使用独角兽网络服务器？

它允许您从一个测功机同时处理多个请求。

[有关设置的详细信息，请点击此处](https://blog.heroku.com/archives/2013/2/27/unicorn_rails)。

# java - JPA2、左连接、标准 API

> ID：16035662
> 
> 赞同：0
> 
> 时间：2013-04-16T11:17:37.437
> 
> 标签：java, jpa-2.0, eclipselink

我有以下情况 SQL，我需要在我的标准构建器中实现动态查询创建。

```
select t1.ticketnr 
from tbl_ticket t1 
left join tbl_tickets_updates t2 on t1.ticketnr = t2.ticketnr 
where t1.description ilike '%EXAMPLE%' or t2.description ilike '%EXAMPLE%'; 
```

在我的代码中，我有以下内容：

tbl_ticket = Tickets.class PK = ticketnr

tbl_tickets_updates = TicketsUpdates.class 和 TicketsUpdatesPK.class PK = ticketnr, updatedby, timeofupdate

```
 CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery<Tickets> query = builder.createQuery(Tickets.class);
        EntityType<Tickets> type = em.getMetamodel().entity(Tickets.class);
        Root<Tickets> root = query.from(Tickets.class);
        List<Predicate> predicatesAnd = new ArrayList<Predicate>();
...
    if (text.length() != 0) {
                    predicatesAnd.add(builder.or(
                            builder.like(
                            builder.lower(
                            root.get(
                            type.getDeclaredSingularAttribute("description", String.class))), "%" + text.toLowerCase() + "%"),
                            builder.like(
                            builder.lower(
                            root.get(
                            type.getDeclaredSingularAttribute("summary", String.class))), "%" + text.toLowerCase() + "%")));
                    Join<Tickets, TicketsUpdates> tupdates = root.join("ticketnr", JoinType.LEFT);
                    predicatesAnd.add(builder.like(builder.lower(tupdates.get("description").as(String.class)), "%" + text.toLowerCase() + "%"));
                } 
```

我的代码在左连接失败：**java.lang.IllegalStateException: CAN_NOT_JOIN_TO_BASIC**

我相信这是因为复合 PK 有一个单独的类，但到目前为止我还没有找到正确实现它的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:03:14.597

根据克里斯的评论，我提供了列名而不是实体类中的关系名称（在实体类中标记为映射）

```
 CriteriaBuilder builder = em.getCriteriaBuilder();
            CriteriaQuery<Tickets> query = builder.createQuery(Tickets.class);
            EntityType<Tickets> type = em.getMetamodel().entity(Tickets.class);
            EntityType<TicketsUpdates> typeTU = em.getMetamodel().entity(TicketsUpdates.class);
            Root<Tickets> root = query.from(Tickets.class);
            Root<TicketsUpdates> rootTicketsUpdates = query.from(TicketsUpdates.class);

            Join<Tickets,TicketsUpdates> tupdates = rootTicketsUpdates.join("tickets"); 
```

我不得不添加第二个（它丢失了）并将我的查询更改为：

```
if (text.length() != 0) {
                predicatesAnd.add(builder.or(
                        builder.like(
                        builder.lower(
                        root.get(
                        type.getDeclaredSingularAttribute("description", String.class))), "%" + text.toLowerCase() + "%"),
                        builder.like(
                        builder.lower(
                        root.get(
                        type.getDeclaredSingularAttribute("summary", String.class))), "%" + text.toLowerCase() + "%"),
                        builder.like(
                        builder.lower(
                        tupdates.get(
                        typeTU.getDeclaredSingularAttribute("description", String.class))), "%"+text.toLowerCase()+"%")
                        ));
            }

    query.orderBy(builder.desc(root.get("startdate")));
    query.distinct(true); 
```

现在一切都按预期工作！

# iphone - didFinishPickingMediaWithInfo 未返回图像：在 ipad 中

> ID：16035664
> 
> 赞同：1
> 
> 时间：2013-04-16T11:17:45.943
> 
> 标签：iphone, ios, uiimagepickercontroller, uiinterfaceorientation

在 ipad 上使用 `- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info` 方法不给出图像。信息字典是

```
> dic = {
>     UIImagePickerControllerMediaType = "public.image";
>     UIImagePickerControllerReferenceURL = "assets-library://asset/asset.JPG?id=1D8618CC-CDF1-478C-A36D-455A66501A02&ext=JPG";
> } 
```

[所以我在这个](https://stackoverflow.com/questions/8171713/image-not-returned-by-didfinishpickingmediawithinfo)问题中使用了referenceURL 。我的代码是

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    editPhoto=YES;
    [self dismissModalViewControllerAnimated:YES];
        NSLog(@"dic = %@",info);
        defaultImageView.image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];
        if(defaultImageView.image == nil)
        {
            NSLog(@"image from assets");
            NSURL *imageSource = [info objectForKey:@"UIImagePickerControllerReferenceURL"];
            [self findLargeImage:imageSource];
        }

        NSLog(@"image picked in block");

}

-(UIImage*)findLargeImage :(NSURL*)path
{
    __block UIImage * largeimage=nil;
    ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
    {
        ALAssetRepresentation *rep = [myasset defaultRepresentation];
        CGImageRef iref = [rep fullResolutionImage];
        if (iref) {

            largeimage =[UIImage imageWithCGImage:iref];
            defaultImageView.image = [ImageOreintation fixOrientation:largeimage];
            int width = defaultImageView.image.size.width;
            int height = defaultImageView.image.size.height;
            int frameWidth = (158.0/height) * width;
            if(frameWidth>212)
            {
                defaultImageView.frame = CGRectMake(26, 10, 212, 158);
            }
            else
            {
                defaultImageView.frame = CGRectMake(132-frameWidth/2, 10, frameWidth, 158);
            }

            NSLog(@"in find large image3");
        }
    };
     NSLog(@"in find large image4");
    ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
    {
        NSLog(@"booya, cant get image - %@",[myerror localizedDescription]);
    };

    ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];

    [assetslibrary assetForURL:path resultBlock:resultblock failureBlock:failureblock];

   return largeimage ;
} 
```

我以这种方式获得图像，但图像方向是颠倒的。

请帮助直接从选择器获取图像或更改我从 url 获取的图像的方向。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:14:11.847

您可以尝试使用此类别来修复图像的方向。

头文件

```
#import <UIKit/UIKit.h>

@interface UIImage (Orientation)

- (UIImage *)fixOrientation;

@end 
```

实施文件

```
#import "UIImage+Orientation.h"

@implementation UIImage (Orientation)

- (UIImage *)fixOrientation {

  if (self.imageOrientation == UIImageOrientationUp) return self;

    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (self.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width,   self.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, self.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,
                                         CGImageGetBitsPerComponent(self.CGImage), 0,
                                         CGImageGetColorSpace(self.CGImage),
                                         CGImageGetBitmapInfo(self.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (self.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:

            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height),  self.CGImage);
            break;
    }

    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:04:57.303

我得到了这个方向的解决方案。从 ALAssetRepresentation *rep 获取图像时，我使用了 fullResolutionImage。取而代之的是，我使用了 fullScreenImage，它解决了这个问题。这是该方法的代码。

```
-(UIImage*)findLargeImage :(NSURL*)path
{
    __block UIImage * largeimage=nil;
    ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
    {
        ALAssetRepresentation *rep = [myasset defaultRepresentation];
        largeimage = [UIImage imageWithCGImage:[rep fullScreenImage] scale:[rep scale] orientation:0];

        }
    };
     NSLog(@"in find large image4");
    ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
    {
        NSLog(@"cant get image - %@",[myerror localizedDescription]);
    };

    ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];

    [assetslibrary assetForURL:path resultBlock:resultblock failureBlock:failureblock];

   return largeimage ;
} 
```

# c++ - 我试图生成随机数，但每次我收到错误'ranf'都没有在这个范围内声明

> ID：16035667
> 
> 赞同：0
> 
> 时间：2013-04-16T11:17:55.943
> 
> 标签：c++, random, numbers, generator

这是在此范围内未声明错误“ranf”的代码。该代码是关于生成具有初始位置和速度的随机数。我无法配置如何解决问题。

```
#include<iostream>
#include<fstream>
#include<vector>
#include<cstdlib>
#include<cmath>
#include<ctime>
#include<map>
using namespace std;

const int N= 3000, nstep= 20000000, nps= 50000, nprint =1000, noverlap= 10000;
const double R=1, eps=0.95, Lbox=150,pssize= 500;
const double infty= 1e20, null= 1e-10;

vector<double> x(N), y(N), vx(N), vy(N);
vector<double> clist[N];
double Time = 0;
map<double, pair<int,int> > cseq;

void init(double tol)
{
bool overlap;
int i, j;
x[0]= ranf(Lbox-R-tol);
y[0]= ranf(Lbox-R-tol);
vx[0]=ranf(1);
vy[0]=ranf(1);

for(i=1;i<N;i++)
 {
   if(!(1 % 100)) cout << "Init " << i << endl;
  do {
   overlap = false;
  x[i]= ranf(Lbox-R-tol);
  y[i]= ranf(Lbox-R-tol); 
  j=0;
   do {
   overlap = ((x[i]-x[j])*(x[i]-x[j])+ (y[i]-y[j])*(y[i]-y[j]) < 4*(R+tol)*(R+tol));
  }
  while((++j<i) && !overlap);
 }
 while(overlap);
 vx[i]=ranf(1);`enter code here`
vy(i)=ranf(1);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:20:52.027

您调用的`ranf`函数以我所知道的任何方式都没有标准化，因此它是未定义的，因为它根本不存在。你需要先定义它。像这样的东西应该工作：

```
double ranf(double max)
{
  return (((double)rand())/RAND_MAX)*max;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:20:07.330

你确定你有正确的功能吗？它实际上`rand`定义在`cstdlib`. 请参阅[此处](http://www.cplusplus.com/reference/cstdlib/rand/)以获取参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:53:56.887

该函数`ranf`似乎旨在返回 (0, x) 范围内的随机浮点数。

您可以查看[C++ 随机浮点数生成](https://stackoverflow.com/questions/686353/c-random-float)并推出自己的`ranf`：

```
/**
 * ranf - return a random double in the [0,m] range.
 * @param m      maximum value to be returned
 * @return       a random double in the [0,m] range
 */
double ranf(double m) {
    return (m*rand())/(double)RAND_MAX;
} 
```

或者也

```
#define ranf(m)   (((m)*rand())/(double)RAND_MAX) 
```

请记住调用`srand`初始化随机数生成器，否则程序的每次运行将始终返回相同的“随机”数序列。（不过，这对于调试很有用）。

# google-visualization - GVIZ：连续轴的自定义标签（日期时间）

> ID：16035673
> 
> 赞同：0
> 
> 时间：2013-04-16T11:18:30.117
> 
> 标签：google-visualization

我有一个折线图，我们在其中`datetime`根据 x 轴上的值绘制一些数字。由于`datetime`在列类型上使用 value 会将其呈现为 a `continuous axis`，因此列标签是自动生成的。

我们只得到时间分量作为列标签，而不是日期。我能做些什么来获得整个日期时间作为标签吗？

（注意：我不想将数据类型更改为字符串，因为我不希望数据点中的间距均匀。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:36:14.340

是的。您需要查看使用[ICU SimpleDateFormat子集的](http://icu-project.org/apiref/icu4c/classSimpleDateFormat.html#_details)[格式化程序](https://developers.google.com/chart/interactive/docs/reference#dateformatter)。

以下是它们如何工作的示例：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'Date');
  data.addRows([
    [new Date(2012,1,5)],
    [new Date(2012,2,10)],
    [new Date(2012,3,15)],
    [new Date(2012,4,20)]
  ]);

  alert(data.getFormattedValue(3,0));

  var formatter1 = new google.visualization.DateFormat({pattern: 'yyyy, MMM'});

  formatter1.format(data,0);

  alert(data.getFormattedValue(3,0));
} 
```

调整以适应您的数据和需求，然后马上！你让它工作。

# javascript - 在jade客户端中使用flot显示动态图表时表达应用程序抛出错误

> ID：16035675
> 
> 赞同：0
> 
> 时间：2013-04-16T11:18:38.643
> 
> 标签：javascript, node.js, express, pug, flot

尝试使用浮点图显示实时数据时，客户端代码中出现以下错误

```
 Uncaught Invalid dimensions for plot, width = 1584, height = 0 
```

无法弄清楚为什么高度 = 0。我认为我的 index.jade 文件有问题。似乎它在 index.jade 中的以下语句中抛出错误

```
var plot = $.plot($("#placeholder"), [ getInitData() ], options); 
```

这是我的 app.js、index.js、index.jade 和 style.css。

**应用程序.js**

```
var express = require('express');
var routes = require('./routes');
var user = require('./routes/user');
var http = require('http');
var path = require('path');

var app = express();

app.configure(function(){
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
app.use(express.errorHandler());
});

app.get('/', routes.index);

var httpServer = http.createServer(app).listen(app.get('port'), function(){
console.log("Express server listening on port " + app.get('port'));
});

var io = require('socket.io').listen(httpServer);   
io.sockets.on('connection', function(socket) {
socket.emit('welcome', {'salutation':'TMP36 Sensor output!'});      
}); 
```

**index.js 文件**

```
exports.index = function(req, res){  
res.render('index', { title: 'Temperature Monitor',
          domain: 'localhost'  });
}; 
```

**索引.jade**

```
doctype 5
html
  head
    title= title
    script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js')       
script(type='text/javascript', src='/javascripts/flot/jquery.js')
script(type='text/javascript', src='/javascripts/flot/jquery.flot.js')      
script(type='text/javascript', src='./socket.io/socket.io.js')  
script
  $(document).ready(function(){ 
    var socket = io.connect();
    var val = 10;
    var temp;
    var totalPoints = 300;
    var res = [];      
    function getInitData() {// zip the generated y values with the x values
      for (var i = 0; i < totalPoints; ++i){
        res.push([i, 0]);        
      }
      return res;        
    }      
    // Options for Flot plot        
    var options = {        
        series: { shadowSize: 0 }, // drawing is faster without shadows        
        yaxis: { min: 0, max: 50, color: "#bbbb00" },            
        xaxis: { show: false },   
    };  
    var plot = $.plot($("#placeholder"), [ getInitData() ], options);
    socket.on('welcome', function(data) {  
      val = data.salutation ;
      res.push([totalPoints, val]); // push on the end side
      res.shift(); // remove first value to maintain 300 points
      for (i=0;i<totalPoints;i++) { res[i][0] = i; }
      plot.setData([ res ]);
      plot.draw(); 
      $('#temperature').text("Current Temperature: :" + val );          
    });        
  });
link(rel='stylesheet', href='/stylesheets/style.css')
  body
    h1= title
    p Welcome to #{title}
    #placeholder
    p graph here
    #temperature
    p temperature val 
```

**Style.css** h1, h2, h3 { font-size: 22px; 颜色：#464646；}

```
body {
  padding: 50px;
  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
}

a {
  color: #00B7FF;
}
placeholder {
  width:600px;
  height:300px;
} 
```

我有一个 index.jade 的等效 html 客户端，它工作正常。我在将客户端的html版本转换为jade时遇到了上述错误。客户端的 html 版本是 -

**索引.html**

```
<!--!DOCTYPE html-->
<html lang='en'>
<head>
    <title>Data Collector</title>
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js'></script>      
    <script language="javascript" type="text/javascript" src="../3rdParty/flot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../3rdParty/flot/jquery.flot.js"></script>        
    <script src='/socket.io/socket.io.js'></script>     
    <script>
    $(document).ready(function(){
        var socket = io.connect();
        var val = 10;
        var temp ;          
        var totalPoints = 300;
        var res = [];
        function getInitData() {
            // zip the generated y values with the x values
            for (var i = 0; i < totalPoints; ++i){
                res.push([i, 0]);
            }
            return res;
        }
        // Options for Flot plot
        var options = {
            series: { shadowSize: 0 }, // drawing is faster without shadows
            yaxis: { min: 0, max: 50, color: "#bbbb00" },
            xaxis: { show: false },             
        };
        var plot = $.plot($("#placeholder"), [ getInitData() ], options);           
        socket.on('welcome', function(data) {
            // Convert value to integer
            //val = ((parseInt(data.salutation) / 1023)*100)*10;
            val = data.salutation ;
            // Push new value to Flot Plot
            res.push([totalPoints, val]); // push on the end side
            res.shift(); // remove first value to maintain 300 points
            // reinitialize the x axis data points to 0 to 299.
            for (i=0;i<totalPoints;i++) { res[i][0] = i; }
            // Redraw the plot
            plot.setData([ res ]);
            plot.draw();                
            $('#temperature').text("Current Temperature: :" + val );                                
        });
    });
    </script>       
</head>
<body>      
    <h1>Temperature Monitor</h1>        
    <div id="placeholder" style="width:600px;height:300px;"></div>
    <div id='temperature'><p>Temperature</p></div>      
</body> 
```

这是html客户端的输出![在此处输入图像描述](https://i.stack.imgur.com/MaVWi.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:58:01.433

Flot 需要能够读取占位符 div 的宽度和高度。您的 Jade 输出会生成一个占位符，它没有设置高度，也没有从任何父元素或子元素派生的高度。因此它的高度为零，这阻止了 Flot 使用它。

您的 HTML 示例有效，因为您使用内联样式设置了宽度和高度。

# codeigniter - 在codeigniter中使用phpexcel

> ID：16035683
> 
> 赞同：1
> 
> 时间：2013-04-16T11:18:53.170
> 
> 标签：codeigniter, phpexcel

我正在使用 phpexcel 库将我的报告导出到 excel 文件。但我想拥有自己的 excel 文件并将其与 phpexcel 一起使用。这是我使用的代码：

```
public function event_reportexcel($id)
{
    $this->load->library('excel');
    $this->excel->setActiveSheetIndex(0);
    $this->excel->getActiveSheet()->setTitle('test worksheet');
    $this->excel->getActiveSheet()->setCellValue('A1', 'This is just some text value');
    $this->excel->getActiveSheet()->getStyle('A1')->getFont()->setSize(20);
    $this->excel->getActiveSheet()->getStyle('A1')->getFont()->setBold(true);
    $this->excel->getActiveSheet()->mergeCells('A1:D1');
    $this->excel->getActiveSheet()->getStyle('A1')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);

    $filename='just_some_random_name.xls'; //save our workbook as this file name
    header('Content-Type: application/vnd.ms-excel'); //mime type
    header('Content-Disposition: attachment;filename="'.$filename.'"'); //tell browser what's the file name
    header('Cache-Control: max-age=0'); //no cache

    $objWriter = PHPExcel_IOFactory::createWriter($this->excel, 'Excel5');  
    //force user to download the Excel file without writing it to server's HD
    $objWriter->save('php://output');
} 
```

它会将我的数据放入一个新的 excel 文件中，但我需要此功能才能使用 excel 文件作为模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:31:32.880

您可以打开文件并根据需要进行编辑，然后保存

```
$fileType = 'Excel5';
$fileName = 'testFile.xls';

// Read the file
$objReader = PHPExcel_IOFactory::createReader($fileType);
$objPHPExcel = $objReader->load($fileName);

// Change the file
$objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A1', 'Hello')
            ->setCellValue('B1', 'World!');

// Write the file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, $fileType);
$objWriter->save($fileName); 
```

您可以查看此[帖子](https://stackoverflow.com/questions/8797103/how-to-open-an-excel-file-with-phpexcel-for-both-reading-and-writing#)了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-26T13:11:26.200

这会帮助你

```
 public function export(){

        $this->load->model('authors_model');
        $this->load->library('excel');

        $object = new PHPExcel();

        $object->setActiveSheetIndex(0);

         $table_columns = array('ID','first_name','last_name','Email','BirthDate','Added');

         $column = 1;

         foreach ($table_columns as $dd) {
            $object->getActiveSheet()->setCellValueByColumnAndRow($column,1, $dd);
              $column++;
         }

         $employee_data = $this->authors_model->get_all_data();

         $row_no = 2 ;
         foreach ($employee_data as  $value) {

                $object->getActiveSheet()->setCellValueByColumnAndRow(0 ,$row_no,$value->id );
                $object->getActiveSheet()->setCellValueByColumnAndRow(1 ,$row_no,$value->first_name );
                $object->getActiveSheet()->setCellValueByColumnAndRow(2 ,$row_no,$value->last_name );
                $object->getActiveSheet()->setCellValueByColumnAndRow(3 ,$row_no,$value->email );
                $object->getActiveSheet()->setCellValueByColumnAndRow(4 ,$row_no,$value->birthdate );
                $object->getActiveSheet()->setCellValueByColumnAndRow(5 ,$row_no,$value->added );

                $row_no++;
         }

             ob_end_clean(); 
              header('Content-Type: application/vnd.ms-excel'); //mime type

            header("Content-Disposition: attachment; filename=\"filename.xls\"");
            header("Cache-Control: max-age=0");
            $objWriter = PHPExcel_IOFactory::createWriter($object, 'Excel5');
              $objWriter->save('php://output');

} 
```

# ios - 如何以 PDF 格式获取 UITableView 的快照

> ID：16035685
> 
> 赞同：8
> 
> 时间：2013-04-16T11:19:00.373
> 
> 标签：ios, uitableview, pdf-generation

我有一个`UITableView`填充了一些数据的数据，但是由于它包含的数据比屏幕的可视区域多，所以我只设法获得了它的快照，我想知道是否还有其他方法可以获得pdf中的整个tableview快照..这是我尝试过的谢谢

```
- (IBAction)clickMe:(id)sender
{
    UIView *viewToRender = self.myTableView;
    CGPoint contentOffset = self.myTableView.contentOffset;

    UIGraphicsBeginImageContext(viewToRender.bounds.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();

    //  KEY: need to translate the context down to the current visible portion of the tablview
    CGContextTranslateCTM(ctx, 0, -contentOffset.y);

    [viewToRender.layer renderInContext:ctx];

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIImageView *myImage=[[UIImageView alloc]initWithImage:image];

    UIGraphicsEndImageContext();

    [self createPDFfromUIViews:myImage saveToDocumentsWithFileName:@"PDF Name"];

}

- (void)createPDFfromUIViews:(UIView *)myImage saveToDocumentsWithFileName:(NSString *)string
{
    NSMutableData *pdfData = [NSMutableData data];

    UIGraphicsBeginPDFContextToData(pdfData, myImage.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [myImage.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:string];

    NSLog(@"%@",documentDirectoryFilename);
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-16T12:25:58.740

```
UIGraphicsBeginImageContext(self.myTableView.contentSize);
[self.myTableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
[self.myTableView.layer renderInContext:UIGraphicsGetCurrentContext()];

int rows = [self.myTableView numberOfRowsInSection:0];
int numberofRowsInView = 4;
for (int i =0; i < rows/numberofRowsInView; i++) {
    [self.myTableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:(i+1)*numberofRowsInView inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
    [self.myTableView.layer renderInContext:UIGraphicsGetCurrentContext()];

}
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIImageView *myImage=[[UIImageView alloc]initWithImage:image];
UIGraphicsEndImageContext();

[self createPDFfromUIViews:myImage saveToDocumentsWithFileName:@"PDF Name"]; 
```

我不知道，但这段代码对我来说就像一个魅力..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-08T15:29:12.713

这是不滚动表格视图的方法。只需将滚动视图的高度增加到 contentSize。如果您不通过`UIImage`. 这是来自我`UITableView`在 Swift 中的扩展。代码是从这里那里偷来的，所以评论并不总是我的。

```
func toPDF(fileName: String) -> String {
    // Don't include scroll indicators in file
    self.showsVerticalScrollIndicator = false

    // Creates a mutable data object for updating with binary data, like a byte array
    let pdfData = NSMutableData()

    // Change the frame size to include all data
    let originalFrame = self.frame
    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.contentSize.width, self.contentSize.height)

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, self.bounds, nil)
    UIGraphicsBeginPDFPage()
    let pdfContext = UIGraphicsGetCurrentContext();

    // Draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData
    self.layer.renderInContext(pdfContext!)

    // Remove PDF rendering context
    UIGraphicsEndPDFContext()

    // Retrieves the document directories from the iOS device
    let documentDirectories: NSArray = NSSearchPathForDirectoriesInDomains(.DocumentDirectory, .UserDomainMask, true)

    let documentDirectory = documentDirectories.objectAtIndex(0)
    let documentDirectoryFilename = documentDirectory.stringByAppendingPathComponent(fileName);

    // Instructs the mutable data object to write its context to a file on disk
    pdfData.writeToFile(documentDirectoryFilename, atomically: true)

    // Back to normal size
    self.frame = originalFrame

    // Put back the scroll indicator
    self.showsVerticalScrollIndicator = true

    return documentDirectoryFilename
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T11:39:22.807

没有屏幕外单元格，因为它们一旦滚动出可见屏幕就会被回收。您应该考虑使用 Core Text 创建 PDF 版本，而不是截屏 UITableView。也许你可以修改这个[例子](https://github.com/erica/iOS-6-Advanced-Cookbook/tree/master/C03%20-%20Typesetting/08%20-%20PDF)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-23T01:51:25.383

基于 Vin 的回答（也可用于 UIScrollViews 的快照）：

```
 UIGraphicsBeginPDFContextToData(pdfData, CGRectMakeWithSize(0, 0, self.productsTable.contentSize), nil);
    UIGraphicsBeginPDFPage();
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    [self.productsTable scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:NO];
    [self.productsTable.layer renderInContext:UIGraphicsGetCurrentContext()];

    CGFloat screensInTable = self.productsTable.contentSize.height / self.productsTable.height;

    for (int i = 1; i < screensInTable; i++) {
        CGPoint contentOffset = CGPointMake(0, i * self.productsTable.height);
        [self.productsTable setContentOffset:contentOffset animated:NO];
        [self.productsTable.layer renderInContext:UIGraphicsGetCurrentContext()];
    }

    UIGraphicsEndPDFContext(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-27T13:00:45.240

我想每个人都忘记了那毕竟`UITableView`是一个。`UIScrollView`无需计算单元格、高度等。您可以简单地在上下文中使用`contentSize`、设置`tableView.frame.size = tableView.contentSize`和渲染来创建上下文。

请看这个例子

```
 UIGraphicsBeginImageContext(tableView.contentSize)
        let context = UIGraphicsGetCurrentContext()

        let cachedOffset = CGPoint(x:tableView.contentOffset.x , y:tableView.contentOffset.y)
        let cachedFrame = tableView.frame

        tableView.contentOffset = .zero
        tableView.frame = CGRect(x: 0, y: 0, width: tableView.contentSize.width, height: tableView.contentSize.height)
        tableView.layer.render(in: context)

        tableView.frame = cachedFrame
        tableView.contentOffset = cachedOffset

        if let image = UIGraphicsGetImageFromCurrentImageContext() {
            let imageView = UIImageView(image: image)
            self.createPDF(fromUIViews:myImage saveToDocumentsWithFileName:"PDF Name")
        }

        UIGraphicsEndImageContext() 
```

# javascript - 从 javascript 表单发送数据

> ID：16035687
> 
> 赞同：0
> 
> 时间：2013-04-16T11:19:09.747
> 
> 标签：javascript

我正在发送一些数据，它位于表格和表格中。我的问题是它将发送表格中的整个变量。目标 IP 是一个微控制器，我需要发送一些变量而不是整个变量。

```
<html>
<head>
  </head>
 <body>
<form name=myForm onsubmit=return validateForm() method=post>
<table>  <tr>
     <td>Device Info :</td>
 <td><input type=text name=dev-info id=01  size=3  value= ></td>
  <td> <input type=submit value=Apply/change></td>
  </tr>
  <tr>
    <td>MAC Adress :</td>
   <td><input type=text name=mac-addr id=02 size=3  value= ></td>
  <td> <input type=submit  value=Apply/change></td>
 </tr>
  <tr>
    <td>IP Adress :</td>
    <td><input type=text name=ip-addr id=03 size=3  value= ></td>
  <td> <input type=submit value=Apply/change></td>
 </tr>
 <tr>
    <td>Gateway Adress :</td>
    <td><input type=text name=gate-addr id=04 size=3  value= ></td>
  <td> <input type=submit value=Apply/change></td>
 </tr>
 <tr>
    <td>Subnet Mask :</td>
     <td><input type=text name=sub-msk id=05 size=3  value= ></td>
  <td> <input type=submit value=Apply/change></td>
 </tr>
 <tr>
 <td>Ntp Server IP :</td>
   <td><input type=text name=ntp-ip id=06 size=3  value= ></td>
  <td> <input type=submit value=Apply/change></td>
 </tr>
 </table>
<input type=submit action=http://192.168.1.250 value=Apply/Reboot>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:30:36.777

R`name="ntp-ip"`从

`<input type=text name="ntp-ip" id=06 size=3>`

如果您不想在表单提交时发布该值。休息时也这样做。

# java - docx 模板 Docx4j 替换 Java 中的文本

> ID：16035688
> 
> 赞同：0
> 
> 时间：2013-04-16T11:19:11.090
> 
> 标签：java, templates, text, replace, docx4j

我是 Docx4j 的新手，我的任务是替换 docx 模板的一些文本。我阅读了 docx4j 的入门指南，但我认为我没有完全理解整个概念。好吧无论如何...我已经尝试过[Docx4j的解组模板] [1]，它适用于给定的docx，但是当我在自己的[模板](http://www.docx4java.org/forums/docx-java-f6/umarshallfromtemplate-doesn-t-work-t897.html)上尝试时遇到了同样的问题 例外情况说，HashMap没有包含有效的键或值，因此它不会替换占位符。

我更换了

```
<w:proofErr w:type="spellEnd"/> 
```

通过禁用拼写检查，但它仍然没有工作......而且运行该应用程序也需要相当长的时间。

不理解 Getting_Started.pdf 中的数据绑定示例，所以我用完了选项...

如何简单地替换 docx 中的一些字符串文本？

编辑：我发现如果我将一些文本添加到 unmarshallFromTemplate.docx 并保存它，它不会替换新的文本行。- 标签以某种方式分成多个标签：

```
<w:p w:rsidR="002512F8" w:rsidRDefault="002512F8" w:rsidP="002512F8"><w:r><w:t>My</w:t></w:r><w:r w:rsidR="001A5174"><w:t xml:space="preserve"> favourite ice cream is ${DEGREE</w:t></w:r><w:r><w:t>}.</w:t></w:r><w:bookmarkStart w:id="0" w:name="_GoBack"/><w:bookmarkEnd w:id="0"/></w:p> 
```

编辑 document.xml 中的文本，并添加缺少的信息并没有多大帮助。

无论如何，这里是我使用的 Template.docx 的 document.xml：http: [//uploaded.net/file/vz4qr23o](http://uploaded.net/file/vz4qr23o)

编辑2：

好吧，伙计们。我找到了一个非常适合自己的解决方法，但不知道为什么花了这么长时间才弄清楚。正如我所说：运行分裂的地方，我认为这是 ${} 的原因。因此，我只是在占位符之前使用了 # 并重写了每个占位符，这样就可以一次运行了。

不得不多次切换到 document.xml 并重写段落，但它工作了。然后我简单地使用了一个 replace(placeholder, xml) 并替换了编组后的 document.xml 的文本，然后我再次解组它。工作。故事结束，他妈的夜间构建或映射。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:38:59.227

docx4j 源代码在 GitHub 上已经有一段时间了；该 svn 存储库已过时。

等效示例现在称为[VariableReplace](https://github.com/plutext/docx4j/blob/master/src/samples/docx4j/org/docx4j/samples/VariableReplace.java)。该代码效率更高，但您需要自己构建，或使用当前的夜间构建。

您可能会发现运行[VariablePrepare](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/model/datastorage/migration/VariablePrepare.java)可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T13:17:47.163

docx4j 内置的占位符搜索和替换代码工作得很好，但是如果您遇到占位符被`rsid`实体分解的问题，您需要确保在保存“模板”时禁用语法和拼写检查（即来源）文件。这将有助于防止您的文本运行变得支离破碎（请注意，您可能也希望禁用校对，因为它会在此处和任何地方插入书签标签）。

完成搜索和替换并拥有新/更新的文档后，您可以轻松地重新启用拼写检查。这个线程有更多关于 RSID 的内容：[在生成的 xml 中关闭 rsid 的拼写检查和语法检查](http://www.docx4java.org/forums/docx-java-f6/turnoff-rsid-s-spell-check-grammar-check-in-generated-xml-t46.html)

# objective-c - 等待 永远发射

> ID：16035689
> 
> 赞同：3
> 
> 时间：2013-04-16T11:19:12.500
> 
> 标签：objective-c, xcode4.5

我不能再在模拟器或 iPhone 上运行我的程序了。

它编译得很好。没有任何问题。但后来我收到了消息

等待启动

它永远发生。

![在此处输入图像描述](https://i.stack.imgur.com/5JvGL.png)

这只发生在一个项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:21:15.673

我，终于通过使用 xproj 文件的备份解决了这个问题

问题出在 xproj 文件中。然而，我不知道是什么。

我仍在等待更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-21T10:15:30.643

我在 xcode 上遇到了同样的问题，解决方案是打开另一个项目，然后再试一次。即使重新安装 xcode 也不行

# windows-phone-7 - 如何在 Windows Phone 7 中增加 HttpWebRequest 超时

> ID：16035691
> 
> 赞同：0
> 
> 时间：2013-04-16T11:19:13.443
> 
> 标签：windows-phone-7, httpwebrequest, windows-phone

有没有办法在 Windows Phone 7 应用程序中增加 HttpWebRequest 的超时？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:56:41.227

如果您不是在多线程程序中执行此操作，那么您可以这样做。(C#) 示例。

```
 HttpWebRequest webReq = (HttpWebRequest)HttpWebRequest.Create(url);
 webReq.Timeout = 7000;
 HttpWebResponse response = (HttpWebResponse)webReq.GetResponse(); 
```

# asp.net - asp.net 路由错误页面

> ID：16035693
> 
> 赞同：0
> 
> 时间：2013-04-16T11:19:19.663
> 
> 标签：asp.net, routing, asp.net-4.5, asp.net-routing

有谁知道使用 ASP.NET（不是 MVC）路由处理错误页面的最佳方法是什么？

我已经设置了路由并且运行良好，但是如果我访问一个不存在的页面，我会得到标准的 404 错误页面。

我想知道是否有一种方法可以使用类似以下的路由来捕获这些错误，显然 404 将替换为给定的代码。

```
RouteTable.Routes.MapPageRoute("errors", "{*url}", "~/error.aspx"); 
```

使用上面的代码也会弄乱我现有的路由，所以我假设 {*url} 捕获了所有 URL。

提前致谢。

# c# - 如何使用 facebook api 以编程方式获取身份验证令牌？

> ID：16035697
> 
> 赞同：0
> 
> 时间：2013-04-16T11:19:32.477
> 
> 标签：c#, facebook, facebook-graph-api

我在 facebook 中创建了一个应用程序，并且我有 AppID 和 AppSecret 密钥。现在我想获取该应用程序的身份验证令牌。我可以使用 facebook 提供的图形 api 工具来获取令牌，但我想使用 facebook api 以编程方式获取令牌。我也想在不实际登录 facebook 帐户的情况下获取令牌。有没有办法使用 facebook api 以编程方式获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:54:53.557

据了解，如果不实际登录 Facebook，您将无法获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:02:43.620

如果不通过 Facebook 的 OAuth 流程（Graph Explorer 工具令牌将在两小时后过期），您将无法生成长期访问令牌。

OAuth 过程可以在一定程度上自动化，但有一部分要求用户单击按钮来授权您的应用程序访问他们的 Facebook 帐户。因此，Facebook OAuth 是一个两步过程：

1.  显示授权 URL 并让用户单击“允许”
2.  用户单击“允许”后检索访问令牌

Temboo SDK 将 Facebook OAuth 流程分解为两个步骤 -`InitializeOAuth`并且`FinalizeOAuth`- 您可以在您的应用程序中使用它们。这些步骤映射到我上面概述的过程。[您可以在此处](https://www.temboo.com/library/Library/Facebook/OAuth/)了解有关如何通过 Temboo 处理 Facebook OAuth 的更多信息。要查看此行为的实际效果，您可以查看 Temboo[示例](https://www.temboo.com/examples)页面上的实时示例（提供源代码）。

（全面披露：我在 Temboo 工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T06:11:05.970

不，如果没有登录 Facebook，您就不能拥有长期访问令牌，因为对于长期访问令牌，您需要拥有短期访问令牌，您将在下面的 Facebook 图形 API 中需要它：

**最后一页访问令牌的步骤**

1-您必须通过此 API 获取用户的页面访问令牌：

```
https://graph.facebook.com/{User-id}/accounts?access_token={access-token} 
```

2- 然后你必须通过下面的 API 刷新保存令牌，这将持续 60 天：

```
https://graph.facebook.com/oauth/access_token?client_id={your-client-id}&client_secret={client-secret}&grant_type=fb_exchange_token&fb_exchange_token={previous-access-token} 
```

# asp.net - 如何将 Commandfield ButtonType 的工具提示添加为图像

> ID：16035699
> 
> 赞同：2
> 
> 时间：2013-04-16T11:19:38.533
> 
> 标签：asp.net, css

我必须为我的 gridview 编辑图像按钮添加工具提示。我编码为 Commandfield。

```
<asp:CommandField ButtonType="Image"  
    HeaderStyle-HorizontalAlign="center"
    EditText="Edit" UpdateText="Edit" 
    ShowEditButton="True"  
    ItemStyle-VerticalAlign="Top"
    EditImageUrl="~/Images/edit.png"    
    UpdateImageUrl ="~/Images/Save.png" CancelImageUrl ="~/Images/cancel.png" 
    ItemStyle-Width="15px" ControlStyle-Width="15px">
</asp:CommandField> 
```

是否可以在 gridview 命令字段按钮类型中添加工具提示作为图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:43:19.303

以下代码运行良好：

```
protected void gvResourceEditor_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            try
            {
                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    e.Row.Cells[4].ToolTip = "Edit Resource Details";
                    if (e.Row.RowState == DataControlRowState.Edit || e.Row.RowState.ToString() == "Alternate, Edit")
                    {
                        int i = 0;
                        foreach (TableCell cell in e.Row.Cells)
                        {
                            if (e.Row.Cells.GetCellIndex(cell) == 4)
                            {
                                ((System.Web.UI.WebControls.ImageButton)(e.Row.Cells[4].Controls[0])).ToolTip = "Update Resource Details";
                                ((System.Web.UI.LiteralControl)(e.Row.Cells[4].Controls[1])).Text = "&nbsp;";
                                ((System.Web.UI.WebControls.ImageButton)(e.Row.Cells[4].Controls[2])).ToolTip = "Close Resource Details";
                            }
                            i++;
                        }
                    }
                }
            }
            catch (Exception _e)
            {
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T12:53:54.827

或者你可以

1.  定义 gridview 命令字段的 EditText 属性（如您所做的那样），它将呈现为标记 `alt`的属性：`<input type='image' alt='Edit' />``<asp:CommandField ButtonType="Image" EditText="Edit" etc />`

2.  然后添加一个脚本标记以`title`使用以下代码设置属性：

VB：

```
Protected Sub gvResourceEditor_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvResourceEditor.RowDataBound
    Dim strScript as String = "$('#" + gvResourceEditor.ClientID + " input[type=image]').each(function(key, el) {el.title=el.alt;});"
    Page.ClientScript.RegisterStartupScript(Me.GetType, "SetEditButtonTitle", strScript, True)
End Sub 
```

CS：

```
protected void gvResourceEditor_RowDataBound(object sender, GridViewRowEventArgs e) {
    string strScript = "$('#" + gvResourceEditor.ClientID + " input[type=image]').each(function(key, el) {el.title=el.alt;});"
    Page.ClientScript.RegisterStartupScript(this.GetType(), "SetEditButtonTitle", strScript, true);
} 
```

当然，您可能需要将 javascript 定制到您的网格中。此脚本将设置所有`input`标签的标题属性`type=image`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T23:24:29.763

我没有尝试`Sekaran`and提出的解决方案，而是`Show`采取了一些不同的方法，因为我不愿意依赖`JavaScript`；认为这可能值得分享。

A Show 在他的解决方案中提到`EditText`，Edit 按钮的属性将呈现为**`alt`**图像的属性；这意味着它也应该存储为**`AlternateText`**.NET 对应的版本。就我而言；我有`Edit`,和按钮，`Update`我想对所有按钮做同样的事情。`Delete``Cancel``CommandField`

所以（本地化的）文本是`AlternateText`按钮的属性；我正在遍历每个按钮并将这个值放入`ToolTip`属性中。这是我的代码。

```
protected void myGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        foreach (Control ctrl in e.Row.Cells[2].Controls)
        {
            if (ctrl.GetType().BaseType == typeof(ImageButton))
                ((ImageButton)ctrl).ToolTip = ((ImageButton)ctrl).AlternateText;
        }
    }
} 
```

我在我的代码中硬编码了 Cell Id“2”，因为它是众所周知的。每个*图像按钮*控件都是`System.Web.UI.WebControls.DataControlImageButton`不可访问的类型。因此我使用了它的 BaseType 应该是`ImageButton`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T22:40:00.740

@show 答案的 RegisterStartupScript 部分不需要在 RowDataBound 期间运行。在网格数据绑定过程中，它将为每一行运行完全相同的事情。您可以将这两行放入页面的 OnPreRender 事件中，它会产生相同的效果，但只会在服务器上的代码执行期间发生一次。

# php - 堆叠 PHP 代码？

> ID：16035702
> 
> 赞同：0
> 
> 时间：2013-04-16T11:19:53.977
> 
> 标签：php, javascript, html

我已经完成了一个项目，现在需要更改以便如果变量在数组中则显示一个 div，如果它不在数组中则显示不同的 div。

通常我会做

```
<?php $quartermonths = array("February","May","August","November");
if (in_array($month,$quartermonths))
{echo "quarter code in here";}
else
{echo "nonquarter code in here";}
?> 
```

并且走在我快乐的路上，但是我得到的代码已经包含了大量的 html 和 php 代码，它们不喜欢封装在另一个 PHP 块中（据我所知？）例如

```
<?php $quartermonths = array("February","May","August","November");
if (in_array($month,$quartermonths))
{echo "Quarter HTML CODE
<?php quarter phpcode ?>";}
else
{echo "Non-Quarter HTML CODE
<?php non-quarter phpcode ?>";}
?> 
```

所以我的问题是，解决这个问题的最佳方法是什么？是否只是在满足变量时执行 javascript hide div A 并在不满足变量时隐藏 divB ，还是有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:32:39.413

```
<?php
if (in_array($month,$quartermonths))
{ ?>

Quarter HTML CODE
<?php quarter phpcode ?>

<?php } ?> 
```

像这样从 php 代码中拆分您的 html 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:24:35.577

听起来您只想连接`quarter phpcode`. 假设它是一个单一的功能，`quarter_phpcode()`. 你可以这样做：

```
{ echo "Quarter HTML CODE" . quarter_phpcode(); } 
```

# xml - urn 的命名空间模式：uuid:C2F41010-65B3-11d1-A29F-00AA00C14882

> ID：16035704
> 
> 赞同：2
> 
> 时间：2013-04-16T11:19:55.273
> 
> 标签：xml, xsd, ado, xml-namespaces

在 Microsoft 平台上生成的 XML 文件的 XML 架构定义会导入命名空间`uuid:C2F41010-65B3-11d1-A29F-00AA00C14882`。但是，我找不到与此命名空间关联的元素的 XML 模式定义。

# jquery - 谷歌地图信息窗口方向链接

> ID：16035705
> 
> 赞同：2
> 
> 时间：2013-04-16T11:19:56.593
> 
> 标签：jquery, google-maps, infowindow

我已将谷歌地图包含在我的主页中，以便我的客户能够轻松找到我。我的问题是我找不到像这里这样包含方向链接的方法：

![直接链接示例](https://i.stack.imgur.com/oW71s.jpg)

我的代码：

```
jQuery(document).ready(function(){ 
    var myLatlng = new google.maps.LatLng(48.562944, 16.079245);
    var myOptions = {
      center: myLatlng,
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"),  myOptions);
    var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title:"Mehr Informationen!"
    });

var infowindow = new google.maps.InfoWindow({});

google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent("<b>Company</b><br>Street<br>Town"); //sets the       content of your global infowindow to string "Tests: "
    infowindow.open(map,marker); //then opens the infowindow at the marker
});
marker.setMap(map);
}); 
```

我是一个没有经验的用户，正在努力学习和理解。我希望你能帮助我解决我的问题。

# f# - 让 WebSharper 生成简单的字段访问

> ID：16035713
> 
> 赞同：3
> 
> 时间：2013-04-16T11:20:13.727
> 
> 标签：f#, websharper

我需要一种将被转换为普通 JS 对象的类型，以便将 F# 字段访问转换为简单的 JS 字段访问（这是必要的，因为对象将通过 发送`postMessage`，因此它将丢失所有方法）。

再次，我需要

```
let x = a.b 
```

被翻译成

```
var x = a.b; 
```

没有任何方法调用。

下面是 F# 参考中稍作修改的示例：

```
namespace T

open IntelliFactory.WebSharper

[<JavaScript>]
module A =
    type MyClass =
        val a : int
        val b : int
        new(a0, b0) = { a = a0; b = b0; }

    let myClassObj = new MyClass(35, 22)
    let x = myClassObj.b 
```

这不会翻译为

> x：错误：无法转换属性访问：b。

好的，让我们让这些`val`s 可变：

```
namespace T

open IntelliFactory.WebSharper

[<JavaScript>]
module A =
    type MyClass =
        val mutable a : int
        val mutable b : int
        new(a0, b0) = { a = a0; b = b0; }

    let myClassObj = new MyClass(35, 22)
    let x = myClassObj.b 
```

这将被成功翻译，但是……`MyClass.New`返回一个空对象。现在问题开始看起来很像错误报告，对吗？所以，回到问题。

还有其他方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:06:53.487

记录样式构造函数“{x = y}”还有其他问题。我将不得不在 F# 3.0 上再次研究这个问题，较旧的 F# 没有为这些提供合理的引用，我们在 WebSharper 中做了一些部分解决方法。现在你的例子打破了。所以这是使用静态方法而不是构造函数的工作代码：

```
type MyClass private () =

    [<DefaultValue>]
    val mutable a : int

    [<DefaultValue>]
    val mutable b : int

    static member Create(a0, b0) =
        let c = MyClass()
        c.a <- a0
        c.b <- b0
        c

let test () =
    let myClassObj = MyClass.Create(35, 22)
    let x = myClassObj.a
    let y = myClassObj.b
    JavaScript.Log(x, y) 
```

微不足道，记录也可以。

在某些情况下，如果您想达到非常低的级别，您可以使用 Inline 属性注释成员。当开销太大时，您可以使用无类型 API：

```
let x = obj ()
x?a <- 1
let y = x?a
JavaScript.Log(x, y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:01:32.757

尝试这个：

```
type MyClass (a, b) =
    member val A = a with get
    member val B = b with get

let myClassObj = new MyClass(35, 22)
let x = myClassObj.B 
```

# java - 将不可序列化的对象（其类在 JAR 中）写入文件

> ID：16035715
> 
> 赞同：2
> 
> 时间：2013-04-16T11:20:19.050
> 
> 标签：java, serialization

我正在尝试在 Java 中序列化一个不可序列化的对象。一个标准的解决方案是为该类实现 writeObject 和 readObject 方法。

但是，在我的情况下，要序列化的对象的类位于 JAR 文件中，因此我无法更改它以实现 readObject 和 writeObject 方法。

此外，JAR 中的类是最终类。

在这种情况下有没有办法序列化一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:26:10.037

像这样扩展jar类

```
public class YourSerializableClass extends Jar Class implements Serializable 
```

基本上你需要继承你的 jar 类并使其实现可序列化

更新：-

如果类是最终的，您可以尝试删除该修饰符，然后使用上述方法，否则您可能需要使用字节码操作。这是可以为您提供删除最终修饰符的指针的链接

[使用反射更改静态最终 File.separatorChar 进行单元测试？](https://stackoverflow.com/questions/2474017/using-reflection-to-change-static-final-file-separatorchar-for-unit-testing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:27:46.650

`readObject`您可以使用 AspectJ 或一种使用 BCEL 或 ASM 等工具的字节码操作形式，通过和`writeObject`方法增强该类。

# javascript - 打开jQuery对话框时保持滚动位置

> ID：16035723
> 
> 赞同：1
> 
> 时间：2013-04-16T11:20:47.787
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-dialog

我正在使用 Jquery UI Dialog 来显示一个弹出框

我有一个带有网格的页面。每行都有一个图标来打开一个对话框

如果有很多行并且您需要向下滚动并单击底部的一行，那么当对话框打开时它也会再次将页面滚动到顶部

有没有办法防止这种情况发生？

我只想打开对话框并保持页面的滚动位置

```
$('#AmendLineDialogBox').dialog({
            autoOpen: true,
            modal: true,
            closeOnEscape: true,
            buttons:
                {
                    'Ok': function () {
// ...snip
                            $(this).dialog("close");                  
                    },
                    'Cancel': function () {
                        $(this).dialog("close");
                    }
                },
            position: 'center',
            title: 'Amendment'
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:25:54.070

您可以像这样进行链接：

```
$('#AmendLineDialogBox').click(function(e){
   e.preventDefault(); //<--------------^-------prevent the default behaviour
}).dialog({
        autoOpen: true,
        modal: true,
        closeOnEscape: true,
        buttons:
            {
                'Ok': function () {
 // ...snip
                        $(this).dialog("close");                  
                },
                'Cancel': function () {
                    $(this).dialog("close");
                }
            },
        position: 'center',
        title: 'Amendment'
    }); 
```

# iis - IIS 7.5 模拟的安全性？

> ID：16035730
> 
> 赞同：0
> 
> 时间：2013-04-16T11:21:08.970
> 
> 标签：iis, iis-7, web-config, iis-7.5, impersonation

我之前在这里发布了这个问题：[https](https://security.stackexchange.com/questions/34405/iis-7-5-impersonation-threat) ://security.stackexchange.com/questions/34405/iis-7-5-impersonation-threat但我想如果可以的话我也会在这里尝试。

我正在使用 IIS 7.5，我想在 Intranet 环境中为我的不同应用程序模拟用户。为此，我正在考虑使用 asp.net 机制和 web.config 中的用户/密码（加密），但我不确定一些可能的威胁。我会用一个概念来解释它（我知道我的例子没用，但它代表了我的情况，所以请多多包涵）

假设我有 2 个目录：

*   一个空目录 (DirectoryA)，它允许访问所有用户（ntfs 权限）并包含一个模拟 UserA 的 web.config

*   一个目录 (DirectoryB) 包含我要限制访问的网站，其中还包含一个模拟 UserA 的 web.config（与 DirectoryA 相同的用户，不是错字）

要在 DirectoryB 上进行模拟，我需要授予 ntfs 权限以允许 DirectoryB 中的 UserA。

我的问题是：是否有人可以访问 DirectoryA（这将冒充他为 UserA），然后使用冒充的 UserA 以某种方式访问​​ DirectoryB 上的站点？如果是，怎么做？

感谢您的任何见解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:12:45.110

两个进程不相互通信，因此 DirectoryA 不可能与 DirectoryB 通信，除非程序员编写喜欢的代码。

> 是否有人可以访问 DirectoryA（这将冒充他为 UserA），然后以某种方式使用冒充的 UserA 访问 DirectoryB 上的站点？如果是，怎么做？

唯一可能的方法是 DirectoryA 专门实现直接访问 DirectoryB 的功能。否则是安全的。

**但是**，您确实应该为每个进程使用不同的身份，因为 DirectotyB 网站将使用 UserA 身份访问其资源。有人可以使用 DirectoryA 网站访问 DirectoryB 使用的相同资源……如果它是这样编码的。

# c - C语言进程同步

> ID：16035732
> 
> 赞同：1
> 
> 时间：2013-04-16T11:21:10.690
> 
> 标签：c, process, synchronization, fork, semaphore

我尝试将牵引进程（子进程和父进程）与信号量同步，但我的尝试失败了。

C源代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <semaphore.h>
#include <fcntl.h>
#include <sys/stat.h>

int compteur=0;
sem_t *sem;

int main()
{
        void *ret;
        sem = sem_open("/sem", O_CREAT, 0644, compteur);
        sem_init(sem, 0, 0);
        pid_t pid;
        pid=fork();
        switch (pid)
        {
            case -1:
                printf("Erreur: echec du fork()\n");
                exit(1);
                break;
            case 0:
                /* PROCESSUS FILS */
                printf("Processus fils : pid = %d\n", getpid() );
                sem_post(sem);
                break;
            default:
                sem_wait(sem);
                /* PROCESSUS PERE */
                printf("Ici le pere%d: le fils a un pid=%d\n",getpid(),pid);
                printf("Fin du pere.\n");
    }   
} 
```

我认为问题在于信号量在子进程中不可见。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:36:29.503

你`sem_init`应该是：

```
sem_init(sem, 1, 0); 
```

也就是说，第二个参数应该是非零的。
因为对于：

```
#include <semaphore.h>
int sem_init(sem_t *sem, int pshared, unsigned int value); 
```

（来自`man sem_init`）

```
If  pshared  has  the  value 0, then the semaphore is shared between the threads of a process...
If pshared is nonzero, then the semaphore is shared between processes... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T11:30:27.257

0 是主进程，-1 是错误，任何大于 0 的值都是子进程。您必须有机会切换到 >0 才能获得孩子。

# java - 如何访问打印机的状态？

> ID：16035739
> 
> 赞同：3
> 
> 时间：2013-04-16T11:21:34.143
> 
> 标签：java, printing

我需要知道打印机状态。我需要使用 Java 程序控制打印机状态。例子

1.  检查打印机状态，天气是否接受作业，
2.  没纸了
3.  打印机队列
4.  碳粉
5.  等等..

我知道有一种方法可以检查基本信息，例如名称、颜色是否支持。但我找不到任何检查纸张、碳粉、作业队列的示例。我想知道是否可以使用 Java API。我找到了用于打印机功能的大 API，但他们没有给出如何使用它的简单示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:37:05.660

看看这个[PrinterStateReason](http://docs.oracle.com/javase/6/docs/api/javax/print/attribute/standard/PrinterStateReason.html)。还有[javax.print](http://docs.oracle.com/javase/6/docs/api/javax/print/package-summary.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T18:21:54.573

有人告诉我可以通过这种方式检查打印机状态：

```
PrintService printService = PrintServiceLookup.lookupDefaultPrintService();
AttributeSet attributes = printService.getAttributes();
String printerState = attributes.get(PrinterState.class).toString();
String printerStateReason = attributes.get(PrinterStateReason.class).toString();

System.out.println("printerState = " + printerState); // May be IDLE, PROCESSING, STOPPED or UNKNOWN
System.out.println("printerStateReason = " + printerStateReason); // If your printer state returns STOPPED, for example, you can identify the reason 

if (printerState.equals(PrinterState.STOPPED.toString()) {

    if (printerStateReason.equals(PrinterStateReason.TONER_LOW.toString()) {

        System.out.println("Toner level is low.");
    }
} 
```

可悲的是，我的打印机似乎不支持printerState，所以我无法测试它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T11:36:38.650

无法获得打印机的完整状态。打印机有一个能够请求服务的本机驱动程序，但是因为有很多可能的打印机功能，Java 只支持它的一个子集。

您实际上可以通过调用为用户提供修改状态

```
PrinterJob pj = PrinterJob.getPrinterJob();
pj.printDialog() 
```

它显示了本机打印机对话框。尽管 javax.print API 中提供了可以检查打印机状态的信息，但*我无法为我的打印机执行此操作*！。（佳能）。

要检查的代码：

```
import javax.print.*;
import javax.print.attribute.DocAttributeSet;
import javax.print.attribute.PrintServiceAttributeSet;
import javax.print.attribute.standard.PrinterStateReason;
import javax.print.attribute.standard.PrinterStateReasons;
import javax.print.attribute.standard.Severity;
import javax.print.event.*;
import java.awt.*;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import java.io.*;
import java.util.Set;

/**
 * PrintTest
 */
public class PrintTest implements PrintServiceAttributeListener,PrintJobListener,Doc, Printable, PrintJobAttributeListener {

  private static final transient String TEXT = "12345";

  public static void main(String[] args) {
    PrintTest test = new PrintTest();
    test.checkPrinters();
  }

  public void checkPrinters() {
    Thread newThread = new Thread(new Runnable() {
      public void run() {
    PrintService ps = PrinterJob.getPrinterJob().getPrintService();

    DocFlavor[] myFlavors = ps.getSupportedDocFlavors();
    ps.addPrintServiceAttributeListener(PrintTest.this);
    DocPrintJob docJob = ps.createPrintJob();
      docJob.addPrintJobAttributeListener(PrintTest.this, null);
    docJob.addPrintJobListener(PrintTest.this);
    try {
      docJob.print(PrintTest.this,null);
    }
    catch (PrintException e) {
      e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
    } });

    newThread.start();
    /**
    PrintServiceAttributeSet attSet = ps.getAttributes();
    PrinterStateReasons psr = ps.getAttribute(PrinterStateReasons.class);

    if (psr != null) {
      Set<PrinterStateReason> errors = psr.printerStateReasonSet(Severity.REPORT);
      for (PrinterStateReason reason : errors)
        System.out.printf(" Reason : %s",reason.getName());
      System.out.println();
    }          */
  }

  public void attributeUpdate(PrintServiceAttributeEvent psae) {
    System.out.println(psae.getAttributes());
  }

  public void printDataTransferCompleted(PrintJobEvent pje) {
    System.out.println("Transfer completed");
  }

  public void printJobCompleted(PrintJobEvent pje) {
    System.out.println("Completed");
  }

  public void printJobFailed(PrintJobEvent pje) {
    System.out.println("Failed");
    PrinterStateReasons psr = pje.getPrintJob().getPrintService().getAttribute(PrinterStateReasons.class);
    if (psr != null) {
      Set<PrinterStateReason> errors = psr.printerStateReasonSet(Severity.REPORT);
      for (PrinterStateReason reason : errors)
        System.out.printf(" Reason : %s",reason.getName());
      System.out.println();
    }
  }

  public void printJobCanceled(PrintJobEvent pje) {
    System.out.println("Canceled");
  }

  public void printJobNoMoreEvents(PrintJobEvent pje) {
    System.out.println("No more events");
  }

  public void printJobRequiresAttention(PrintJobEvent pje) {
    System.out.println("Job requires attention");
    PrinterStateReasons psr = pje.getPrintJob().getPrintService().getAttribute(PrinterStateReasons.class);
    if (psr != null) {
      Set<PrinterStateReason> errors = psr.printerStateReasonSet(Severity.REPORT);
      for (PrinterStateReason reason : errors)
        System.out.printf(" Reason : %s",reason.getName());
      System.out.println();
    }
  }

  public DocFlavor getDocFlavor() {
    return DocFlavor.SERVICE_FORMATTED.PRINTABLE;  //To change body of implemented methods use File | Settings | File Templates.
  }

  public Object getPrintData() throws IOException {
    return this;
  }

  public DocAttributeSet getAttributes() {
    return null;  //To change body of implemented methods use File | Settings | File Templates.
  }

  public Reader getReaderForText() throws IOException {
    return null; //To change body of implemented methods use File | Settings | File Templates.
  }

  public InputStream getStreamForBytes() throws IOException {
    return null;  //To change body of implemented methods use File | Settings | File Templates.
  }

  public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
    return pageIndex == 0 ? PAGE_EXISTS : NO_SUCH_PAGE;  //To change body of implemented methods use File | Settings | File Templates.
  }

  public void attributeUpdate(PrintJobAttributeEvent pjae) {
    System.out.println("Look out");
  }
} 
```

我试图通过故意打开机箱或取出纸张来获得 PrinterReasonsState，但我没有成功。也许其他人可以展示它是如何实现的，但到目前为止，API 似乎提供了更多实际上不可用的功能。

或者简而言之：它不起作用，至少不适用于我的打印机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T14:33:33.027

**更新：** 而不是查询 WMI“win32_printer”对象，我建议直接像这样使用 Powershell，它的 API 更简洁：

```
Get-Printer | where PrinterStatus -like 'Normal' | fl 
```

要查看所有打印机和状态：

```
Get-Printer | fl Name, PrinterStatus 
```

查看所有属性：

```
Get-Printer | fl 
```

您仍然可以在 Java 中使用 ProcessBuilder，如下所述。

**更新前：**

仅适用于 Windows 的解决方案。在 Windows 中，您可以查询 WMI "win32_printer" 类，因此您可以检查操作系统层上的状态：[Win32_Printer 类](https://msdn.microsoft.com/en-us/library/aa394363(v=vs.85).aspx)

在 Java 中，您可以像这样使用 ProcessBuilder 来启动 PowerShell 并像这样执行 PS 脚本：

```
String printerName = "POS_PRINTER";
ProcessBuilder builder = new ProcessBuilder("powershell.exe", "get-wmiobject -class win32_printer | Select-Object Name, PrinterState, PrinterStatus | where {$_.Name -eq '"+printerName+"'}");

String fullStatus = null;
Process reg;
builder.redirectErrorStream(true);
try {
    reg = builder.start();
    fullStatus = getStringFromInputStream(reg.getInputStream());
    reg.destroy();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}
System.out.print(fullStatus); 
```

将 InputStream 转换为 String 后，您应该得到类似的结果：

```
Name        PrinterState PrinterStatus
----        ------------ -------------
POS_PRINTER            0             3 
```

状态和状态应根据各种情况（打印机关闭、缺纸、盖板打开……）而变化。

这应该可以，但取决于打印机和驱动程序。我将它与带有 ESDPRT 端口的 EPSON TM 打印机一起使用，我可以获得如下信息：无纸、盖板打开、打印机离线/关闭、打印机暂停。

这里有更全面的答案：-[我的 StackOverflow 对类似问题的回答](https://stackoverflow.com/a/45439734/8070550)。

# facebook - 如何通过fql或graph获取facebook粉丝专页私信

> ID：16035740
> 
> 赞同：0
> 
> 时间：2013-04-16T11:21:56.280
> 
> 标签：facebook, facebook-graph-api, user-interface, facebook-javascript-sdk, facebook-messages

我已经尝试过[页面消息](https://developers.facebook.com/docs/reference/api/page/#conversations)

具有所有必需的权限，即 read_mailbox、read_page_mailboxes 等（所有扩展权限）

最后我被尝试为

```
https://graph.facebook.com/456330641095467/conversations?access_token=BAAGgcfpJgfUBAHdKaE6KxMWo4rU6VU7psX7Ip4cLbG1yIvX80fkkTXm3ZApdYHmcISmqfnns1gPYZAHXWD2cXX7nMBcj4AK31uptfqJUjNAGXan1ftOK4Tw3sY1WsZD 
```

但我得到回应

```
{
   "error": {
      "message": "(#210) Subject must be a page.",
      "type": "OAuthException",
      "code": 210
   }
} 
```

我无法找出问题所在。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:44:47.490

只需使用页面的 access_token 即可

你的输出是这样的

```
{
   "data": [
      {
         "id": "t_id.615971188431960",
         "snippet": "ok fine reply on test 5:15",
         "updated_time": "2013-04-16T12:15:12+0000",
         "message_count": 8,
         "tags": {
            "data": [
               {
                  "name": "inbox"
               },
               {
                  "name": "read"
               },
               {
                  "name": "seen"
               },
               {
                  "name": "sent"
               },
               {
                  "name": "source:web"
               }
            ]
         },
         "participants": {
            "data": [
               {
                  "name": "Pragati Singh",
                  "email": "100000441901858\u0040facebook.com",
                  "id": "100000441901858"
               },
               {
                  "name": "Devdemo",
                  "email": "456330641095467\u0040facebook.com",
                  "id": "456330641095467"
               }
            ]
         },
         "senders": {
            "data": [
               {
                  "name": "Devdemo",
                  "email": "456330641095467\u0040facebook.com",
                  "id": "456330641095467"
               },
               {
                  "name": "Pragati Singh",
                  "email": "100000441901858\u0040facebook.com",
                  "id": "100000441901858"
               }
            ]
         }, 
```

# python - 返回标签包裹文本的位置（tkinter）

> ID：16035743
> 
> 赞同：0
> 
> 时间：2013-04-16T11:21:58.157
> 
> 标签：python, text, tkinter, label

我想知道是否可以返回标签包装文本的位置或字符，因为我想在所述字符之后在标签中打印的字符串中附加一个“\n”。信不信由你，我确实有充分的理由这样做，尽管解释起来有些复杂。

# c++ - SQLite 将参数绑定到通配符

> ID：16035755
> 
> 赞同：1
> 
> 时间：2013-04-16T11:22:47.993
> 
> 标签：c++, sql, sqlite

我创建了一个查询，如果它们符合某些条件，则从我的表中删除行。

```
sqlite3_prepare(sqlite->db, "DELETE FROM test WHERE field1=? AND field2=? AND field3=? AND field4=? AND field5=?", -1, &sqlite->deleteSymbol, 0); 
```

然后我将它们绑定到以 NULL 结尾的字符串。但是，如果我的函数调用者传递的任何字符串为 NULL，那么这意味着给定列的任何值都应该匹配。

即，如果`field1`和`field3`为`field5`NULL，则查询将等价于

```
DELETE FROM test WHERE field2=? AND field4=? 
```

这可以在重用 sqlite3_prepare 的输出时实现，而不为 NULL/非 NULL 字符串的每个组合创建单独的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:17:10.973

参数总是替换一个特定的值，或者`NULL`。您想要做的是更改`=`运算符的语义，但这不可能通过更改其操作数值之一来实现。

只需准备一个新`DELETE`命令。准备这样一个简单的语句没有太大的开销。

# hibernate - 使用 Hibernate 调用数据库视图

> ID：16035757
> 
> 赞同：0
> 
> 时间：2013-04-16T11:22:53.710
> 
> 标签：hibernate

我正在使用 Hibernate 在 Spring MVC 中做项目，我正在使用 MySQL DB。在我的数据库中，我已经创建了一个视图，我想使用休眠调用该视图。

所以我在这里引用[了这篇文章](https://stackoverflow.com/questions/8875368/why-hibernate-can-not-find-my-view)作为答案，你会看到`"<class name="SomeThing" table="some_thing"/>"`，

类名`Something`是一个java类，它的属性是数据库视图中的列，对吗？

我需要`<property>`在映射中添加映射的其他部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:30:34.350

您必须使用与其他实体类相同的 View 类。您也可以使用注释、属性、映射和其他关系。在我的项目中，我们使用了相同的但 db 是 PostgreSQL。那没关系。

# ruby-on-rails - nil:NilClass 的未定义方法“name/each”，同时使用关联测试索引视图

> ID：16035758
> 
> 赞同：0
> 
> 时间：2013-04-16T11:22:54.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, factory-bot, rspec-rails

我有“一个客户有很多书”的联想。

我没有显示书籍的索引视图，而是`client_id => 1`对其进行了编辑以显示客户的姓名；它有效，但测试表明不同。

我正在尝试使用示例客户端和书籍为测试数据库播种，但我似乎无法使其正常工作。

你能看出我哪里错了吗？

我认为这与“nil:NilClass”有关。

**规范/视图/书籍/index.html.erb_spec.rb**

```
require 'spec_helper'

describe "books/index" do
  before(:each) do
    assign(:clients, [
      stub_model(Client,
        :name => "Name",
        :email => "Email Address",
      )
    ])
    assign(:books, [
      stub_model(Book,
        :title => "Title",
        :client_id => 1
      )
    ])
  end

  it "renders a list of books" do
    render
    # Run the generator again with the --webrat flag if you want to use webrat matchers
    assert_select "tr>td", :text => "Title".to_s, :count => 2
    assert_select "tr>td", :text => 1.to_s, :count => 2
  end
end 
```

**应用程序/模型/book.rb**

```
class Book < ActiveRecord::Base
  belongs_to :client

  attr_accessible :title, :client_id

  validates :title, presence: true

end 
```

**应用程序/模型/client.rb**

```
class Client < ActiveRecord::Base
  has_many :books

  attr_accessible :name, :email

  before_save { |user| user.email = email.downcase }

  validates :name,  presence: true, length: { maximum: 50 }

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
    uniqueness: { case_sensitive: false }

end 
```

**应用程序/控制器/books_controller.rb**（片段）

```
class BooksController < ApplicationController

  # GET /books
  # GET /books.json
  def index
    @books = Book.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @books }
    end
  end

end 
```

**app/views/books/index.html.erb**

```
<h1>Listing books</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Client Name</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @books.each do |book| %>
  <tr>
    <td><%= book.title %></td>
    <td><%= book.client.name %></td>
    <td><%= link_to 'Show', book %></td>
    <td><%= link_to 'Edit', edit_book_path(book) %></td>
    <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Book', new_book_path %> 
```

**测试输出**

```
 1) books/index renders a list of books
     Failure/Error: render
     ActionView::Template::Error:
       undefined method `name' for nil:NilClass
     # ./app/views/books/index.html.erb:15:in `_app_views_books_index_html_erb__##########_#####'
     # ./app/views/books/index.html.erb:12:in `_app_views_books_index_html_erb__##########_#####'
     # ./spec/views/books/index.html.erb_spec.rb:20:in `(root)' 
```

* * *

# 使用工厂

如果改为使用 FactoryGirl，我会收到类似的错误“nil:NilClass 的未定义方法 'each'”。

**规范/视图/书籍/index.html.erb_spec.rb**

```
require 'spec_helper'

describe "books/index" do
  before do
    FactoryGirl.create(:book)
  end

  it "renders a list of books" do
    render
    # Run the generator again with the --webrat flag if you want to use webrat matchers
    assert_select "tr>td", :text => "Title".to_s, :count => 2
    assert_select "tr>td", :text => 1.to_s, :count => 2
  end
end 
```

**测试输出**

```
 1) books/index renders a list of books
     Failure/Error: render
     ActionView::Template::Error:
       undefined method `each' for nil:NilClass
     # ./app/views/books/index.html.erb:12:in `_app_views_books_index_html_erb___##########_#####'
     # ./spec/views/books/index.html.erb_spec.rb:9:in `(root)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-22T15:58:45.743

我们遇到了同样的问题并意识到`undefined method `each' for nil:NilClass` 错误消息的发生可能是因为 rspec 试图在单个对象上调用每个，因此向书籍模型添加更多书籍应该可以解决错误，这里是一个示例

```
let(:books) { [Book.create!(title: "Stackoverflow for beginners"), 
  Book.create!(title:"hackeranks for intermediates")] }

before do
  assign(:book, books)
end 
```

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T11:49:09.907

## 第一个错误

```
undefined method `name' for nil:NilClass
     # ./app/views/books/index.html.erb:15:in `_app_views_books_index_html_erb__##########_#####' 
```

这指的是第 15 行`app/views/books/index.html.erb`，是因为没有一个名为“名称”的输入字段。所以解释器会寻找一个类似名称的方法，但找不到；因此出现“未定义的方法”错误。没有具有该字段名称的条目的原因是因为该条目在测试开始时未能保存 - 提供的电子邮件“电子邮件地址”不是有效的电子邮件地址。你会看到在第 11 行有一个验证器`app/models/client.rb`。

* * *

## 使用工厂错误

```
undefined method `each' for nil:NilClass
     # ./app/views/books/index.html.erb:12:in `_app_views_books_index_html_erb___##########_#####' 
```

引用第 12 行`app/views/books/index.html.erb`是因为在第 5 行只创建了一个 book 条目`spec/views/books/index.html.erb_spec.rb`。`.each`正如@chrisgeeq 指出的那样，需要使用不止一个。

# asp.net-mvc - ASP.NET MVC 部分控件

> ID：16035759
> 
> 赞同：0
> 
> 时间：2013-04-16T11:22:58.790
> 
> 标签：asp.net-mvc

我是 mvc 的新手。我已经使用 Winforms 进行了相当多的开发，现在我正在开发一个 MVC 项目。在我们的 winforms 项目中，我们有标准控件，例如显示所有员工的下拉列表控件。该控件知道如何获取员工并显示他们。它公开了一个属性，该属性提供了选定的员工。表单只需要把这个控件放在上面并使用它。

现在我的问题是如何在 aps.net MVC 中实现这一点（在视图中）。我尝试了部分视图，但是如何将所选值公开给父视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:45:25.113

在 MVC 中，`Views`不应包含除显示逻辑之外的任何逻辑。

`Controller`应该是“知道如何获取员工”或创建一个员工，`Model`然后将其传递给`View`知道如何显示员工的人，在大多数情况下，它将是严格类型`View`的 type `Employee`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:55:14.087

我认为这就是您要实现的目标：

说，在您的模型中，您有一个 Employee（或列表，或列表）：

```
Employee Employee { get; set; } 
```

所以，你的主视图应该有这个：

```
@Html.DisplayFor(Model => Model.Employee); 
```

但是，你问我怎么做模板呢？

在这个阶段你应该退后一步，考虑制作一个新的 ViewModel，一个 EmployeeViewModel（在你看来，这应该是你的“局部视图”）。

所以现在你将拥有：

```
EmployeeViewModel Employee { get; set; } 
```

现在，在 Views/Shared 中创建一个名为 DisplayTemplates 的文件夹并创建 EmployeeViewModel.cshtml。需要明确的是，您现在将拥有 / `Views/Shared/DisplayTemplates/EmployeeViewModel.cshtml`。

最上面一行应该是：

```
@model YourNamespace.EmployeeViewModel 
```

现在您可以简单地在此视图中使用：

```
@Html.LabelFor(model => model.EmployeeName) // or whatever properties you have 
```

这应该足以让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T07:58:10.273

PartialView 对你来说很好。所以通过关键字'PartialView'搜索一些内容

# database-design - 数字属性的维度表中的空值

> ID：16035761
> 
> 赞同：2
> 
> 时间：2013-04-16T11:22:59.907
> 
> 标签：database-design, data-warehouse, star-schema

处理维度表中缺失值的最佳方法是什么？

**在文本列的情况下，很容易写“NA: Missing”，但是对于保留特定值**很重要的数字列应该怎么做。注意：我不想要使用带状值的解决方案（例如，“0-50”、“50-100”、“NA：缺失”的文本列）。

例如，客户维度可能有出生年份。错过出生年份应该如何处理？让它为空？添加任意数字作为占位符，例如 1900？

有时，可能很难找到占位符编号。例如，如果迄今为止的销售额为非负数，但可以为零，我不想将“0”作为 null 的占位符。我可以使用负值，例如“-1”，但这会破坏使用总和的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T23:14:51.820

在您的事实表中，您永远不会对外键使用空值，但您*可以*并且*应该*在适当的情况下为指标使用空值。聚合时，空值将给出准确的结果，而默认值则不会。

出于同样的原因，在维度表中，属性也可以并且应该在适当的地方为空。虽然对维度值进行聚合不太常见，但它确实会发生，所以当它发生时它应该是*正确的*。

如果您需要一个维度中的空值，那么该维度应该有一行用于此目的。例如，日期维度可能有 3 或 4 个特殊行 - `no value`、`unknown`、`past`并且`future`是合理的特殊值行，具体取决于您的需要。

通过这种方式，您将在 BI 层中为自己省去很多痛苦。

# c# - 添加内存中 DataTable 中的列的值

> ID：16035766
> 
> 赞同：0
> 
> 时间：2013-04-16T11:23:16.000
> 
> 标签：c#, winforms, linq, datatable, add

我有一个包含 Amount（十进制）、Bank（String）和 AccountNo（string）列的 DataTable。该表在运行时存储在内存中，所以我想添加表中所有行的数量并将其存储到变量中

例如：金额包含值 1000,5000,7000,6000 然后我想添加所有这些值并将答案存储在变量中

任何帮助表示赞赏，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:30:23.750

您可以使用[`Enumerable.Sum`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)：

```
decimal totalAmount = table.AsEnumerable().Sum(r => r.Field<decimal>("Amount")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:35:28.307

您可以使用 Expression 属性为该属性创建一个数据列。[在这里](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.71%29.aspx)了解更多

```
DataColumn c = new DataColumn();
c.Expression = "Sum(Amount)"; 
```

并在变量中使用它。

使用表达式的优点是每次添加一行时都不需要计算 sum。

或者您可以对行运行 linq 查询并找到总和：

```
dataTable.AsEnumerable().Select(t=> Convert.ToInt32(t["Amount"])).Sum(); 
```

有很多编写 linq 的方法，您可以[在此处](http://msdn.microsoft.com/en-us/library/vstudio/bb397933.aspx)和[此处](http://msdn.microsoft.com/en-us/library/vstudio/bb397947.aspx)了解有关 linq 语句的信息。

# css - CSS——在 chrome 中工作的线性渐变——但在其他浏览器中不行？

> ID：16035767
> 
> 赞同：0
> 
> 时间：2013-04-16T11:23:19.883
> 
> 标签：css, linear-gradients

以下代码仅适用于 Firefox。

我需要改变什么才能在所有浏览器中工作......

```
background: linear-gradient(#FFFFFF, #E6E6E9) repeat scroll 0 0 transparent; 
```

任何建议将不胜感激和感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:24:41.607

由于一些旧浏览器仍然需要供应商前缀，因此您可能需要`-webkit`chrome 或`-o`opera、`-moz`firefox 等...检查下面的链接，您将获得总的跨浏览器渐变语法

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:25:12.010

线性渐变不完全跨浏览器兼容；相反，它具有特定于浏览器的前缀 ( `-o`,`-moz`等`-webkit`)

我建议使用这样的工具[来](http://www.colorzilla.com/gradient-editor/)创建 CSS 渐变，这一切都为你完成了！

# objective-c - 基于超类中的 NSInteger 属性使用 NSPredicate 过滤对象数组

> ID：16035775
> 
> 赞同：4
> 
> 时间：2013-04-16T11:23:42.370
> 
> 标签：objective-c, nsarray, nspredicate, kvc

我有以下设置：

```
@interface Item : NSObject {
    NSInteger *item_id;
    NSString *title;
    UIImage *item_icon;
}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, assign) NSInteger *item_id;
@property (nonatomic, strong) UIImage *item_icon;

- (NSString *)path;

- (id)initWithDictionary:(NSDictionary *)dictionairy;

@end 
```

和

```
#import <Foundation/Foundation.h>
#import "Item.h"

@interface Category : Item {

}

- (NSString *)path;

@end 
```

我有一个包含类别实例（称为“类别”）的数组，我想根据它的 item_id 取出单个项目。这是我使用的代码：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"item_id == %d", 1]; 
NSArray *filteredArray = [categories filteredArrayUsingPredicate:predicate]; 
```

这会导致以下错误：

> ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：此类与键 item_id 的键值编码不兼容。”

我该如何解决这个问题，我做错了什么？属性已合成，我可以在 Category 实例上成功访问和设置 item_id 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:47:33.977

您已将该`item_id`属性声明为*指针*。But`NSInteger`是标量类型（32 位或 64 位整数），因此应将其声明为

```
@property (nonatomic, assign) NSInteger item_id; 
```

*备注：*从 LLVM 4.0 编译器（Xcode 4.4）开始，两者`@synthesize`和实例变量都是自动生成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:28:31.953

第一件事是 NSArray 不能包含原始类型的对象，如 1、2、3。但是，确实包含对象。因此，当您创建谓词时，您应该以与它获取对象相同的方式创建它。上面的谓词应该改成这样才能起作用；

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"item_id == %@", @(1)]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T11:38:04.793

```
NSString *str = [NSString stringWithFormat:@"%i",yourIntVariable];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"item_id == %@", str]; 
NSArray *filteredArray = [categories filteredArrayUsingPredicate:predicate]; 
```

# iphone - SLComposeViewController 视图发送回应用程序并变得无响应

> ID：16035778
> 
> 赞同：5
> 
> 时间：2013-04-16T11:24:01.800
> 
> 标签：iphone, ios, slcomposeviewcontroller

我的应用程序中有一个按钮可以调出一个`SLComposeViewController`用于 Twitter 的按钮。当视图呈现时，它会正确动画并消失。我发现当它消失时，它会被发送到当前视图的后面，我无法将它带回来。我试过手动将所有视图在代码中发送到后面，但没有成功。我觉得我的应用程序出现了根本性的问题，因为这种行为在应用程序中的导航控制器的任何级别都可以看到。下面是`SLComposeViewController`应用程序中作为导航栏的屏幕截图，我让 ViewController 的视图具有 Alpha 值`0.0f`来说明我的观点：

![在此处输入图像描述](https://i.stack.imgur.com/Jw3M4.png)

我真的不知道这里发生了什么，任何帮助将不胜感激。我用来呈现的代码`SLComposeViewController`非常标准，我已经在另一个应用程序中对其进行了测试并且工作正常：

```
NSString *message = [NSString stringWithFormat:@"#%@", [twitterInfo objectForKey:@"hashtag"]];

if ([appDelegate isSocialAvailable]) {
    // code to tweet with SLComposeViewController
    SLComposeViewController *twitter = [[SLComposeViewController alloc] init];
    twitter = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    [twitter setInitialText:[NSString stringWithFormat: @"%@", message]];
    [self presentViewController:twitter animated:YES completion:nil];        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T13:48:29.887

感谢您发布此信息，我也发生了同样的事情，因为我在窗口中添加了一个 CAShapeLayer 以获得渐变效果。你的帖子帮助我弄清楚这就是问题所在。

看起来发生这种情况是因为他们正在将视图层添加到窗口的子层中——我可能会在索引 0 处添加！这与您所期望的相反，即他们会将其视图作为子视图添加到呈现视图控制器的视图中。

他们一定只是认为人们不会在他们的窗口中添加图层，并且他们想确保他们不会与您的视图堆栈竞争。他们为什么将其放入索引 0 一定只是因为`-[CALayer insertLayer:layer atIndex:0]`我想有人习惯这样做。

我不确定，但我猜这可能是任何模态视图控制器的情况。

修复非常简单：

```
[viewController presentViewController:facebookViewController
                             animated:YES
                           completion:^{
    facebookViewController.view.layer.zPosition = 1000;
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:51:29.347

经过一周的努力寻找解决方案后，我在应用程序中找到了有问题的代码，这是一个使整个应用程序的角落变圆的小技巧，通过在其中添加图像使角落看起来像圆角：

```
UIImage *bottomOverlayImage = [UIImage imageNamed:@"bottom_overlay.png"];
CALayer *bottomOverlay = [CALayer layer];
bottomOverlay.frame = CGRectMake(0, self.window.frame.size.height - 9, bottomOverlayImage.size.width, bottomOverlayImage.size.height);
bottomOverlay.contents = (id)bottomOverlayImage.CGImage;
bottomOverlay.zPosition = 1;
[self.window.layer addSublayer:bottomOverlay]; 
```

如果有人能告诉我为什么这段代码会弄乱 Twitter 视图，这对将来的参考很有帮助。此代码放置在应用程序委托中并在首次加载时运行。

# java - 如何有效地形成后缀数组？

> ID：16035780
> 
> 赞同：4
> 
> 时间：2013-04-16T11:24:03.980
> 
> 标签：java, string

我正在寻找在 Java 中制作后缀数组的方法。
我发现了两种能力变体。此外，我想更深入地了解这些变体之间的差异。
包括 `running time`& `space`。

**代码（后缀）：**

```
public static String[] suffixes(String s)
{
int N = s.length();
String[] suffixes = new String[N];
for (int i = 0; i < N; i++)
suffixes[i] = s.substring(i, N);
return suffixes;
} 
```

**代码（StringBuilder 后缀）：**

```
public static String[] suffixes(String s)
{
int N = s.length();
StringBuilder sb = new StringBuilder(s);
String[] suffixes = new String[N];
for (int i = 0; i < N; i++)
suffixes[i] = sb.substring(i, N);
return suffixes;
} 
```

**问题：**

*   如何有效地形成后缀数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:27:28.437

您描述的两种执行方式之间没有明显的区别：由于`String`Java中的 s 是*不可变*的，因此将为每个后缀创建一个新对象。与设置新字符串对象所需的分配和复制相比，从`String`vs.创建子字符串不会给您带来太大的性能差异。`StringBuilder`

当您查找后缀时，不需要传递结束索引：使用采用单个的重载`int`代替：

```
for (int i = 0; i < N; i++)
    suffixes[i] = s.substring(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:30:40.087

您的代码片段之间的唯一区别是使用 String 或 StringBuilder，您也仅使用它来检索子字符串。
`subString()`从 StringBuilder 做

```
 new String(offset + beginIndex, endIndex - beginIndex, value); 
```

`subString()`从 String 开始

```
 new String(offset + beginIndex, endIndex - beginIndex, value); 
```

两者都相同并创建新字符串，因此性能不会有任何差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:39:32.623

你可以这样做，这避免了 substring 方法，

```
public String[] suffix(String s)
{
    String[] suffixes = new String[s.length()];
    String suffix = null;
    for (int i = 0 ; i < s.length() ; i++)
    {
        suffix = suffix == null ? "" + s.charAt(i) : suffix + s.charAt(i);
        suffixes[i] = suffix;
    }

    return suffixes;
} 
```

不确定它是否更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:27:05.070

最后，您总是需要 n + 1 个字符串来完成此任务。唯一可以优化的是创建这些对象的时间。

您可以将字符串表示形式创建为 char 数组，然后惰性（按需）返回后缀。

您可以使用 Iterable 和 Iterator 接口来做到这一点：

```
public class StringSufixies implements Iterable<String> {

    private final String input; 

    public StringSufixies(String input) {
        this.input = input;
    }

    @Override
    public Iterator<String> iterator() {
        return new SuffixStringIterator(input);
    }

    private static class SuffixStringIterator implements Iterator<String> {

        private final String input;
        private final int size;
        private int suffixId;

        private SuffixStringIterator(String input) {
            this.input = input;
            this.size  = input.length();
            this.suffixId = 1;
        }

        @Override
        public boolean hasNext() {
            return suffixId <= size;
        }

        @Override
        public String next() {
            return input.substring(0, suffixId++); //At this point we create new String
        }

        @Override
        public void remove() {
            //Add throw or other impl
        }

    }

} 
```

您可以通过 char 数组实现关键功能。

```
private static class SuffixCharIterator implements Iterator<String> {

private final char[] charSequence;
private final int size;
private int suffixId = 0;

private SuffixCharIterator(char[] charSequence) {
    this.charSequence = charSequence;
    this.size = charSequence.length;
}

@Override
public boolean hasNext() {
    return suffixId <= size;
}

@Override
public String next() {
    return new String(charSequence, 0, suffixId++); //At this point we create a new String
}

@Override
public void remove() {

}

} 
```

但恕我直言，更复杂，我们一无所获。

此解决方案的优点是您可以处理结果并决定在创建所有前缀之前停止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:37:39.277

最有效的方法是使用 char 数组。但是，它不会那么重要，因为最昂贵的操作是创建 String 对象。

```
String s = "foobarbaz"; 
char[] cha = s.toCharArray();
int length = cha.length;
String[] suffixes = new String[length];
for (int i = 0; i < length; ++i)
  suffixes[i] = new String(cha, i, length-i); 
```

# java - FTP的junit测试用例

> ID：16035784
> 
> 赞同：0
> 
> 时间：2013-04-16T11:24:16.543
> 
> 标签：java, unit-testing, junit, ftp, code-coverage

有人可以告诉我如何为以下代码编写一个 junit 测试用例。我写的那个没有进入尝试正文。为什么..？？

代码：-

```
public void dataImport ( String scheme , String dataSource , String savePath ) throws ImportException {
    LOG.debug("Entered");
    final InputStream inputStream = null ;

    try {
            String host = "localhost";
            String user = "user";
            String pass = "pass";
            String filePath ="/A/a1.txt";     ( this are actually extracted from dataSource )
            FTPClient ftpClient = new FTPClient();
          ftpClient.connect(host, 21);
          ftpClient.login(user, pass);
          inputStream = ftpClient.retrieveFileStream(filePath);

          //saving it to the file System

          }

    catch (final IOException ex) { 
          throw new ImportException(ex.getMessage(), ex);
          }

    finally {
          try {
            if (inputStream != null) {
              inputStream.close();
            }
          } catch (final IOException e) {
            throw new ImportException(e.getMessage(), e);
          }
        }
        } 
```

Junit测试用例：-

```
 @Test(expected=NullPointerException.class)
  public void testImportData () throws ImportException , IOException {
  FTPImporter fi = new FTPImporter();
  try{ 
  fi.dataImport("ftp" , "ftp://user:pass@localhost/A/a1.txt" , "desti" );
  fail("ere");
  }
  catch(ImportException e ){
  assertNotNull(e.getMessage());
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:01:02.533

你确定`FTPImporter`构造函数成功了吗？检查您的日志，在 IDE中
调试方法或包装在 try-catch 块中并记录异常，如下所示：`testImportData``new FTPImporter()`

```
FTPImporter fi = null;
try {
    fi = new FTPImporter();
} catch (Exception e) {
    e.printStackTrace();
    fail("Error!");
} 
```

机会是您的构造函数抛出`NullPointerException`，这是该测试所预期的。

# java - 线程“AWT-EventQueue-2”中的异常 java.lang.NoClassDefFoundError

> ID：16035789
> 
> 赞同：0
> 
> 时间：2013-04-16T11:24:41.643
> 
> 标签：java, eclipse, noclassdeffounderror

我在 Eclipse 签名的 Web 小程序中收到上述错误。我将不胜感激任何帮助..

它指出找不到我的课程：

```
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: com/dermalog/common/exception/DermalogException 
```

虽然我有图像作为它包含在构建中的证据：

[图像 1 图像](http://s13.postimg.org/pz83ik5d3/image.jpg) [2](http://s13.postimg.org/m44pfzm7b/image.jpg)

我如何添加我的 jar 文件：

1.  制作了一个“lib”文件夹
2.  将jar文件复制到“lib”文件夹中
3.  单击项目上的“属性”
4.  去构建路径，库
5.  添加了jar参考

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:09:36.150

在大多数情况下，在Eclipse 项目中将jar 添加到项目Java Build Path 仅意味着将其添加到用于编译的类路径中。在 Eclipse 中运行应用程序或小程序时，在构建路径上设置的项目也用于创建类路径。

然而，当它在不同的上下文中运行时，例如在网页上，构建路径并没有说明您的小程序的类路径。在那里，需要确保类路径包含运行应用程序所需的所有 jar。

有两种简单的方法可以做到这一点：

*   [将清单文件添加](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)到您的 JAR 并在其中指定类路径（必需的 JAR）。然后，在将 JAR 部署/复制到它被调用的位置时，也要复制依赖项 JAR。
*   将您的applet 所依赖的JAR 中的所有类包含到您的applet 的JAR 中。Eclipse 的导出功能允许这样做。

编辑：好的，我检查了你的 jar 文件，发现了这个：

*   MANIFEST.MF 没有类路径定义。它应该包含如下一行：

`Class-path: dermalog.afis.drawing.compression.jar dermalog.afis.fingercode.jar dermalog.imaging.capturing.jar`

*   依赖 jar 不应打包在依赖 jar 中。相反，它们应该被放置在同一个目录中（或在一个子目录中——但随后在类路径中也使用该子目录）。

我上面链接的页面解释了这一点。

# javascript - 如何提取在javascript文件中声明的全局变量

> ID：16035792
> 
> 赞同：0
> 
> 时间：2013-04-16T11:24:47.743
> 
> 标签：javascript

是否有任何工具可以提取在 javascript 文件中声明的全局变量？变量和函数。

# javascript - JayData 上传文件

> ID：16035796
> 
> 赞同：0
> 
> 时间：2013-04-16T11:25:03.077
> 
> 标签：javascript, file-upload, wcf-data-services, jaydata

我有一个正在运行的 WCF 数据服务和 JayData 作为客户端。我现在想上传一个文件，然后把它放在数据库中的一个 blob 中。我为文件名创建了一个具有二进制标量属性和字符串属性的实体。

JaySvcUtil 创建我的 JayDataContext.js 就像这样：

```
$data.Entity.extend('Entities.Plugin', {
    'Id': { 'key':true,'type':'Edm.Int32','nullable':false,'computed':true },
    'Data': { 'type':'Edm.Binary','nullable':false,'required':true },
    'FileName': { 'type':'Edm.String','nullable':false,'required':true }
  }); 
```

有人知道如何使用 Javascript 将文件上传到 WCF 数据服务吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:47:15.773

Data field can be field can be set with Base64 string - JayData 1.3 可能提供其他选项，但 base64 是当前稳定版本 (1.2.7) 的方式。您可以使用 HTML5 File API 从本地文件中获取 Base64 字符串。我希望这有帮助！让我知道你的结果。

# php - 使用 GCM 向多个设备发送通知

> ID：16035804
> 
> 赞同：0
> 
> 时间：2013-04-16T11:25:13.103
> 
> 标签：php, google-cloud-messaging

我需要通过服务器向多个设备发送通知，但它对我不起作用，它对一个设备正常工作。所以我在得到所有设备后尝试创建一个循环，`gcm_regid`但它不起作用。这是我的代码：函数在主页上：

```
function sendPushNotificationToAll(){
 var data = $('#form').serialize();      
$.ajax({
 url: "send_message(all).php",
type: 'GET',
data: data,
 beforeSend: function() {
},
success: function(data, textStatus, xhr) {
 $('.txt_message').val("");
 },
error: function(xhr, textStatus, errorThrown) {
}
 });
return false;
} 
```

和 send_message(all).php ：

```
include_once './config.php';
if (isset($_GET["message"])) {
$message = $_GET["message"];

mysql_connect("localhost","root","");
mysql_select_db("gcm");
$fetch=mysql_query("SELECT * FROM gcm_users");
$ids_array=array();
while($row = mysql_fetch_array($fetch))
{
    $ids_array[]=$row['gcm_regid'];
}
$url = 'https://android.googleapis.com/gcm/send';
$fields = array(
'registration_ids' => $ids_array,
data' =>  $message,         
);
$headers = array(
'Authorization: key=' . GOOGLE_API_KEY,
'Content-Type: application/json'
);

// Open connection
$ch = curl_init();
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);
if ($result === FALSE) {
ie('Curl failed: ' . curl_error($ch));
}
// Close connection
curl_close($ch);

    echo $result;
} 
```

当我点击发送时，没有任何反应。

**更新** 好的，所以回答我自己的问题：此代码在线缺失，即：

```
$message = array("price" => $message); 
```

就这样！

# android - setRetainInstance(true) 与后台活动

> ID：16035805
> 
> 赞同：3
> 
> 时间：2013-04-16T11:25:19.063
> 
> 标签：android, android-fragments, android-activity

如果我有一个`Activity`托管一个片段，`setRetainInstance(true)`如果这个活动在后台被杀死会发生什么，即另一个`Activity`在它的顶部。`Fragment`当 Activity 被杀死时，它也会被破坏吗？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:47:59.070

是的，所有 Activity 保留的 Fragment 都会被销毁，retain 功能可以帮助您保留 Fragment 对象，仅用于 Activity 轮换等配置更改，而不是当操作系统在需要回收内存时杀死 Activity 时。

# android - Android HoloEverywhere：mChildFragmentManager 无法解析为变量

> ID：16035808
> 
> 赞同：4
> 
> 时间：2013-04-16T11:25:24.093
> 
> 标签：android, actionbarsherlock, android-theme, android-holo-everywhere

我密切关注[这一点](https://stackoverflow.com/questions/10608539/error-importing-holoeverywhere/10888882#10888882)，并成功地将 ActionBarSherlock 库添加到我的项目和 HoloEverywhere 中。但是，当我构建 HoloEverywhere 库时，我遇到了这些错误：

在*android.support.v4.app*包中，_HoloFragment.java：

```
mChildFragmentManager cannot be resolved to a variable 
```

在*android.support.v4.app*包中，_HoloFragmentInflater.java：

```
mParentFragment cannot be resolved or is not a field

The method moveToState(Fragment, int, int, int) in the type FragmentManagerImpl is not applicable for the arguments (Fragment, int, int, int, boolean)

The method getChildFragmentManager() is undefined for the type Fragment 
```

我几乎尝试了一切来让它工作，但没有成功。请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T11:29:30.353

您需要将库中的支持库 v4 更新`ActionBarSherlock`到修订版 11 或修订版 12。

您可以通过在 SDK 管理器中下载最新版本来执行此操作。转到 SDK Manager > Extras 然后下载`Android Support Library.`

在您的 Android 目录中，转到并从此处`\extras\android\support\v4`复制到您的库中。现在应该构建良好。`android-support-v4.jar``ActionBarSherlock``HoloEverywhere`

我有同样的错误并在这里发布问题：

[mChildFragmentManager 无法解析为变量](https://github.com/Prototik/HoloEverywhere/issues/353)

# c++ - 如何在llvm中实现列表

> ID：16035815
> 
> 赞同：3
> 
> 时间：2013-04-16T11:25:41.063
> 
> 标签：c++, list, vector, stl, llvm

我正在创建自己的编译器，使用 LLVM 作为后端，并用我的语言为最终用户提供一个列表，该列表的操作类似于 Java 中的 ArrayList。我可以使用 llvm 的 ArrayType，但在创建时我必须指定大小，所以当我想扩展它时会出现问题（我可以重新分配它）。此外，我需要手动实现所有操作（插入、删除等）。

我认为也许我可以使用 std::vector，但还有另一个问题 - std::vector 是一个模板类，所以我必须在将其编译为 llvm 字节码之前指定类型。是否有一些解决方案可以动态指定该类型？

在 llvm 中实现这些东西的最佳方法是什么？

我将不胜感激任何解决方案或提示。

# javascript - jquery .ajax 调用不执行成功函数

> ID：16035817
> 
> 赞同：0
> 
> 时间：2013-04-16T11:25:45.127
> 
> 标签：javascript, jquery

下面是调用 json web 服务的 jquery 代码。

```
 function getMajorGroups(){

    var element = $(".item-group-button");
    var response = $.ajax({
        type:"GET",
        url:"http://localhost:6458/posApplication/touch/getAllMajorGroupsForTouch",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data:{}
    });

    response.done(function(data){
        alert(data);
    });

    response.fail(function() {
        $("#item-groups").empty();
    });
} 
```

我连接到本地主机中的服务，并且 URL 如上所述！当我删除 http:// 时，response.fail 只会运行。当我添加 http:// 成功或失败都不会运行。我写的这个方法是错误的还是有什么遗漏。我在这里调用 JSON Web 服务！

当我在浏览器中尝试时，网络服务返回一个 JSON 字符串！我正在调用 GET 类型的服务方法。

更新 ：

这是我在浏览器中直接使用 URL 时的 Json 响应。

```
{"majorGroups":[{"update":"false","hasMore":"false","status":"A","description":"Beverage","majorGroupId":"48","code":"Beverage"},{"update":"false","hasMore":"false","status":"A","description":"Laundry","majorGroupId":"51","code":"Laundry"},{"update":"false","hasMore":"false","status":"A","description":"Cigarette","majorGroupId":"50","code":"Cigarette"},{"update":"false","hasMore":"false","status":"A","description":"Food","majorGroupId":"47","code":"Food"},{"update":"false","hasMore":"false","status":"A","description":"Health Center","majorGroupId":"52","code":"Health Center"}],"failure":"false"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:48:18.013

在使用 dataType=json 时，有一个可能导致失败的问题：

根据[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> json"：将响应评估为 JSON 并返回一个 JavaScript 对象。以严格的方式解析 JSON 数据；拒绝任何格式错误的 JSON 并引发解析错误。从 jQuery 1.9 开始，也拒绝空响应；服务器应该返回 null 或 {} 的响应。

您可以采取的另一种方法是使用`.getJSON`函数，请参阅[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) 再次记下（来自`.getJSON`doc）：

> 重要提示：从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败...

在 Firefox 上，添加 FireBug 插件并检查网络选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-24T00:31:04.917

我有同样的问题。在我的情况下，这是因为我使用了 MySQL 的“日期”并且某些东西被破坏了。我只需要事先格式化该字段，就是这样。

# linux - Bash 脚本终止，关闭其子进程

> ID：16035820
> 
> 赞同：0
> 
> 时间：2013-04-16T11:25:54.237
> 
> 标签：linux, bash, process

我在 Linux（3.2.0-29-generic）上运行一个 bash 脚本，以循环生成大约 200 个后台进程，每个进程中都有 10 个线程。我观察到，一旦计数超过 175，脚本就会自行终止，并且所有生成的进程也会终止。如果 bash 脚本终止，我无法理解为什么子进程应该消失，除非操作系统认为脚本违反了规则并决定终止整个进程链。我没有捕获脚本中任何命令的返回值。

'ulimit -a' 的输出表明我在最大进程数的限制范围内。

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 15882
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 15882
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

该系统具有双核 CPU 和 2GB RAM，其他情况下未加载。

下面给出的是我正在使用的脚本：

```
#!/bin/bash
local_port=1700
remote_port=1700
for i in `seq 0 200`;
do
    sudo tunctl -u uml-net -g uml-net -t tap$i
    sudo brctl addif br0 tap$i
    sudo ifconfig tap$i up
    sudo ./openwrt-uml-vmlinux ubd0=cow$i,openwrt-uml-ext4.img con0=null con=fd:0,fd:1 \
    eth0=tapng,,tap$i
eth1=l2tpv3,,10.x.y.z,$local_port,,$remote_port,0xabab9876abab9876,0xabcd1234abcd1234,2 \
    cgroup_disable=memory mem=24M umid=cow$i init=/etc/preinit > UML_output$i.txt 2>&1 &
    echo "Created UML $i"
    let local_port=local_port+1
    let remote_port=remote_port+1
    sleep 2 
done 
```

知道有什么问题吗？

# oracle - Oracle Apex 4.1 复选框更新穿梭

> ID：16035832
> 
> 赞同：0
> 
> 时间：2013-04-16T11:26:43.167
> 
> 标签：oracle, plsql, oracle-apex

我对 APEX 还很陌生，需要一些帮助。我在 11g 数据库上运行 Apex 4.1。

我有复选框字段 P6_LOCATION，其中包含位置列表，并且为字段分配了动态操作。**单击**时的动态操作应使用所选位置的属性列表（可以是一个或多个）**刷新穿梭。**所以我可以看到，在单击穿梭时会“闪烁”，就好像它刷新了一样，但它不会改变显示的元素数量。但是，如果我提交页面，shuttle 会显示不同（更新）数量的元素。班车代码：

```
 SELECT name||' '||NEIGHBOURHOOD,property_id 

FROM property_table

where

instr(':'||:P6_location||':',':'||to_number(location)||':') > 0 
```

此代码确实有效，但在我调用它时无效。从会话的角度来看，我可以看到 P6_LOCATION 值正在改变......

任何帮助，指导非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:01:39.217

问题可能是，尽管航天飞机刷新它并不“知道”新的复选框值，因此使用相同的选择进行刷新。

这是一个似乎处理相同问题的讨论： [https ://forums.oracle.com/forums/thread.jspa?threadID=2171164&start=0&tstart=0](https://forums.oracle.com/forums/thread.jspa?threadID=2171164&start=0&tstart=0)

不确定您是否在该线程中找到答案。

# javascript - 在父元素之外定义文本环绕点？

> ID：16035833
> 
> 赞同：2
> 
> 时间：2013-04-16T11:26:45.693
> 
> 标签：javascript, jquery, css

是否有可能，使用 CSS/JS/jQuery/等。为父元素外的文本定义包装点？

我问这个的原因是我希望能够将文本拆分成更小的部分，同时仍然给人一种它全部包含在一个元素中的印象。例如，想象一个 300px 宽和高的 div，其内容为文本。我希望能够将此 div 拆分为 3 x 3 div 的网格，这些 div 都是 100px x 100px 但通过操纵较小 div 内的文本定位来呈现连续文本的外观。

由于这有点难以解释，这里是我的意思的图像：

![在此处输入图像描述](https://i.stack.imgur.com/tYuNJ.png)

我想这样做的原因是因为我希望能够对文本进行一些 CSS3 3D 转换而不变成图像，例如参见[http://www.joelambert.co.uk/flux/](http://www.joelambert.co.uk/flux/) --> Tiles3D

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:35:28.403

如果要实现分块的3D变换效果，可能还有另一种解决方案：

您可以将 text-div 复制到每个 div 块中，并将其`position: absolute;`放置在每个块中并使用`overflow: hidden;`. 然后，您将再次感觉到这是一个大文本块。

然后，您就可以按块转换这些 div。

我构建了一个简短的 Fiddle 来向您展示我的意思，应该可以很好地工作：

> **[JS-小提琴](http://jsfiddle.net/7pXZZ/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:36:18.343

也许 CSS3 Columns 可以提供帮助：

```
#con{background-color: #DDDDDD;
padding: 10px;
font-family: Verdana, Geneva, sans-serif;
font-size: 12pt;
color: #888888;
text-align: left;
-webkit-column-count: 3;
-moz-column-count: 3;
column-count: 3;
-webkit-column-gap: 35px;
-moz-column-gap: 35px;
column-gap: 35px;
} 
```

[**jsFiddle**](http://jsfiddle.net/EZutY/3/)

# graph - 我可以将 neo4j 密码与 orienddb 等其他数据库一起使用吗？

> ID：16035837
> 
> 赞同：0
> 
> 时间：2013-04-16T11:26:55.850
> 
> 标签：graph, neo4j, cypher

是否可以使用 cypher 查询其他供应商的数据库，例如 OriendDB？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:39:03.867

不，Cypher 仅适用于 Neo4j。您可以使用 Gremlin 作为两者的查询语言，查看[Tinkerpop 蓝图主页](https://github.com/tinkerpop/gremlin/wiki)。

[维基百科](https://en.wikipedia.org/wiki/Graph_database#Graph_database_features)也很好地概述了图形数据库及其支持的查询语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T14:12:05.377

[Pixy](https://github.com/lambdazen/pixy/wiki)是一种声明式图形查询语言，适用于任何与蓝图兼容的图形数据库。项目文档包括[针对 Cypher 用户的 Gremlin+Pixy 介绍。](https://github.com/lambdazen/pixy/wiki/Pixy-for-Cypher-users).

# jquery - 如何让带有js函数的jquery对象在一个页面中同时工作

> ID：16035851
> 
> 赞同：0
> 
> 时间：2013-04-16T11:27:59.620
> 
> 标签：jquery, function, object

我需要 jquery 对象和非 jquery 函数才能在单个页面中工作。这就是我的想法

```
<script src="jquery.js" type="text/javascript">
    $('a.mini-view').click(function(){
        var clicked = $(this).attr("clicked");
        var value = $(this).attr("data-student");
        if (!clicked){
            var newValue = $('#hiddenfield').val() + "," + value;
            $('#hiddenfield').val(newValue);
            $(this).attr("clicked", true);
        }
    });
</script>

<script type="text/javascript">
     function toggle2(showHideSpan, switchTextSpan) {
             var ele = document.getElementById(showHideSpan);
             var text = document.getElementById(switchTextSpan);
             if(ele.style.display == "block") {
                             ele.style.display = "none";
                     text.innerHTML = "Answer";
             }
             else {
                     ele.style.display = "block";
                     text.innerHTML = "Hide";
             }
     }
</script> 
```

jquery 不工作。我该怎么做呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:29:30.547

您需要关闭 jQuery 脚本标签并将其保留为空：

```
<script src="jquery.js" type="text/javascript"></script> 
```

此外，如果您希望将它们视为字符串，则无需在 Javascript 中转义引号。

```
<script>
    $('a.mini-view').click(function(){
        var clicked = $(this).attr("clicked");
        var value = $(this).attr("data-student");
        if (!clicked){
            var newValue = $('#hiddenfield').val() + "," + value;
            $('#hiddenfield').val(newValue);
            $(this).attr("clicked", true);
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:35:23.120

你需要把你的jquery代码放在ready函数中

```
$(document).ready(function() {
$('a.mini-view').click(function(){
    var clicked = $(this).attr("clicked");
    var value = $(this).attr("data-student");
    if (!clicked){
        var newValue = $('#hiddenfield').val() + "," + value;
        $('#hiddenfield').val(newValue);
        $(this).attr("clicked", true);
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:37:38.050

一个`<script>`标签可能没有`src`属性（用于加载外部文件）*和*脚本内容。它只能有一个或另一个。

此外，不需要该`type`属性 - 现在它是隐含的。

# php - 在非对象 PDO 上调用成员函数 fetchColumn()

> ID：16035858
> 
> 赞同：0
> 
> 时间：2013-04-16T11:28:18.243
> 
> 标签：php, pdo

**尝试为我的项目获取列，从未在 PDO 中这样做过，尝试查看文档，但它并没有真正帮助。**

```
 $sql = $CONNECT_TO_DATABASE->query("SELECT COUNT(*) FROM comments");
    $result = $sql->fetch(PDO::FETCH_ASSOC);
    $r = $result->fetchColumn(); 
```

我做错了什么？

致命错误：在第 6 行的 C:\xampp\htdocs\project\events.php 中的非对象上调用成员函数 fetchColumn()

```
$r = $result->fetchColumn(); 
```

*谢谢！*

联系：

```
<?php
/**
* Connect to Database
* @Author Jony <artemkller@gmail.com>
**/
    ##################CHANGE THIS####################
        /**                                         #   
        * MYSQL HOST HERE (Example: localhost)      #
        **/                                         #
                                                    #
        DEFINE ("MYSQL_HOST", "localhost");         #
                                                    #
        /**                                         #
        * MYSQL USER HERE (Example: root)           #
        **/                                         #
                                                    #
        DEFINE ("MYSQL_USER", "root");              #
                                                    #   
        /**                                         #       
        * MYSQL PASSWORD HERE (Example: password)   #
        **/                                         #           
                                                    #   
        DEFINE ("MYSQL_PASSWORD", "");              #
                                                    #   
    #################################################

    # Connect to the database using PDO.
    $CONNECT_TO_DATABASE = new PDO('mysql:host='.MYSQL_HOST.';dbname=project', MYSQL_USER, MYSQL_PASSWORD);

    # See if theres an error while connecting to the database
    try {
        $CONNECT_TO_DATABASE->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }
    catch(PDOException $ERROR_MESSAGE)
    {
        echo 'ERROR: ' . $ERROR_MESSAGE->getMessage();
    }

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:33:47.740

您的`$result`变量只是一个*数组*，没有任何方法。

您不需要第二次 fetch 调用。使用 fetch 或 fetchColumn。在您的情况下，您需要后一个：

```
$sql = $CONNECT_TO_DATABASE->query("SELECT COUNT(*) FROM comments");
$count = $sql->fetchColumn(); 
```

顺便说一句，你不觉得`$CONNECT_TO_DATABASE`有点长吗？怎么做呢`$pdo`？

当您发布连接代码时，它必须是这样的：

```
# Set PDO connection options
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
# Connect to the database using PDO.
$dsn = 'mysql:host='.MYSQL_HOST.';dbname=project';
$pdo = new PDO($dsn, MYSQL_USER, MYSQL_PASSWORD); 
```

就这样。PHP 已经可以处理该`echo 'ERROR:`业务。无需干预

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:36:13.340

假设您的 PDO 构造是准确的，请尝试此操作。

```
 $sql = $CONNECT_TO_DATABASE->prepare("SELECT COUNT(*) FROM comments"); // Prepare your query with PDO
 $sql->execute(); // Once it is prepared execute it

    if ($sql) { // Check if $sql is executed will return TRUE or FALSE
        if ($sql->rowCount() > 0 ) { // If you get any rows back then
           $r = $sql->fetchColumn(); // Get your results
        }
    } 
```

# jquery - jQuery 将所有子 LI 元素设置为父 LI 类

> ID：16035859
> 
> 赞同：1
> 
> 时间：2013-04-16T11:28:19.817
> 
> 标签：jquery

我想`<LI>`使用父元素的类之一设置所有子元素`<LI>`。在下面的示例“父样式”中。有人可以帮助我朝着正确的方向实现这一目标。谢谢

```
<li class="current sub-menu parent-style"><a id="drop-a" href="/features.aspx">
 <div>Features <span>Out of the Box</span></div>
</a>
<ul class="sub-menuitem sf-js-enabled" style="display: none; visibility: hidden;">
  <li class="sub-menu"><a id="drop-a" href="/features/feature-01.aspx">
    <div>Feature 01</div>
    </a>
    <ul class="sub-menuitem sf-js-enabled" style="display: none; visibility: hidden;">
      <li><a id="drop-a" href="/features/feature-01/feature-01-a.aspx">
        <div>Feature 01 a</div>
        </a></li>
    </ul>
  </li>
  <li><a id="drop-a" href="/features/feature-02.aspx">
    <div>Feature 02</div>
    </a></li>
 </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:35:07.920

```
$("li.parent-style").find ("li").addClass("parent-style"); 
```

这应该是不言自明的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:34:10.530

这个问题真的不清楚你想要什么，但是要为`<li>`列表下的所有元素添加一个类，你可以这样做：

```
$('#listId').find("li").addClass("parent-style"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:32:14.733

为什么需要在 jQuery 中执行此操作？你为什么不用 CSS 来做呢？（我假设它用于样式，因为类是“父*样式*”）。

```
.parent-style ul li{
    /* styles */
} 
```

# arrays - 这个集合/数组操作有名字吗？

> ID：16035862
> 
> 赞同：17
> 
> 时间：2013-04-16T11:28:33.953
> 
> 标签：arrays, algorithm, math, powerset, set-theory

给定输入数组

```
[a,b,c,d,e] 
```

和一个“加入”功能`(a,b) => (a+b)`

我的代码返回以下数组数组，其中包含通过将连接函数应用于各种元素对同时保持顺序而获得的每个可能的变化：

```
[
  [a,b,c,d,e],
  [a,b+c,d,e],
  [a,b+c+d,e],
  [a,b,c+d,e],
  [a+b,c,d,e],
  [a+b,c+d,e],
  [a+b+c,d,e],
  [a+b+c+d,e],
  [a,b,c,d+e],
  [a,b+c,d+e],
  [a,b+c+d+e],
  [a,b,c+d+e],
  [a+b,c,d+e],
  [a+b,c+d+e],
  [a+b+c,d+e],
  [a+b+c+d+e],
] 
```

在视觉上，我想要做的是：

![有序分区图](https://i.stack.imgur.com/8IIX0.png)

该代码有效，但我不知道该怎么称呼它 - 如果存在这样的名称，我想使用其他熟悉此操作的开发人员会理解的名称。它不是一个幂集，但它是类似的……这个特定的集合/数组操作有名字吗？

编辑：好的。它们不是**排列**；排列都将是不同顺序的 5 元素数组`[[a,b,c,d,e], [e,d,c,b,a], [a,d,b,c,e], ...]`

它们不是**partitions**，因为任何子集只能包含输入的相邻元素。- 换句话说，分区将允许这样做：

![描述非相邻元素分区的图表](https://i.stack.imgur.com/Y7HUG.png)

（这可能源于没有有序集合概念的纯集合论。）

它们不是**组合**，因为输出的每个元素只使用输入集的每个成员一次。

我认为`myArray.OrderedPartitions((a,b) => (a+b))`可能是一个适当简洁和解释性的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:30:43.093

After your edit - these are all **partitions** of an array (and their count is 2^(n-1), because you can replace any divider(colon) by joiner(+)).

Note - these are array partitions, not set partitions.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T17:02:10.457

正如 mbeckish 在评论中所说，这些集合（一旦原始集合上的顺序固定）同构于顺序相关的整数分区，这显然通常被称为[composition](http://en.wikipedia.org/wiki/Composition_%28number_theory%29)。每组恰好有 2 ^(n-1 个)组合。对于每个`1`≤ `k`≤ `n`，都有元素组成`(n-1) choose (k-1)`集合，保持你开始时集合的顺序。为了将其可视化，请考虑按顺序排列的集合中的元素以及按该顺序相邻的元素之间的空间；将您的示例视为. 您会注意到确实存在可能的边界。要创建 k-composition，您只需选择`n``k``A|B|C|D|E``n-1``k-1`在那些可能的边界中，这可能是也可能不是您生成集合的方式。`(n-1) choose (k-1)`对`k`from`1`到`n`then求和，我们得到 2 ^(n-1)作为可能组合的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:42:53.543

[张贴者的主要编辑使我的答案过时了，这是关于发布的原始问题：] 整数序列的在线百科全书将这些简短地提到为“区间子集”。（[http://oeis.org/A000124](http://oeis.org/A000124)）我会坚持这个，它很有描述性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:16:52.120

It's a directed tree that points away from the root node:

![在此处输入图像描述](https://i.stack.imgur.com/3rAfz.png)

It's important to note that you do not declare the order of your sets important, only that order is maintained with each set. The python code to generate your "partitions" via your "join":

```
A = map(list, list('abcde'))

def join(A):
    B = []
    for x1,x2 in zip(A,A[1:]):
        B.append((x1,x2,sorted(list(set(x1+x2)))))
    return B
def label(x):
    return '+'.join(x)

# Draw the graph with networkx
import networkx as nx
G = nx.DiGraph()

while len(A)>1:
    B = join(A)
    for x1,x2,pair in B:
        print label(x1), label(pair)
        G.add_edge(label(x1),label(pair))
        G.add_edge(label(x2),label(pair))
    A = [x[2] for x in B]

nx.write_dot(G,'test.dot')

# Render the graph to an image
import os
os.system('dot -Tpng test.dot > test.png') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T15:17:59.533

How about myArray.possibleChainings() or myArray.possibleLinkings() ?

The idea is that it looks like you are chaining or linking at least two elements together. I find it also intuitive because you cannot chain or link elements together which are not neighbors.

# actionscript-3 - 使用 LeadBolt 广告在 AIR 中放置广告和 Stagewebview

> ID：16035871
> 
> 赞同：1
> 
> 时间：2013-04-16T11:28:51.450
> 
> 标签：actionscript-3, air, ads, leadbolt, stagewebview

在 Adob​​e Air 中使用 ActionScript3 构建的应用程序中，我们无法在屏幕中央放置来自 LeadBolt 的广告。

我们使用带有简单 HTML 代码的 StageWebView 来包围与 LeadBolt 一起使用的脚本。广告按应有的方式加载，因此在那里没有问题。

我们的设置是将 SWF 设置为 width=800 和 height=480，并使用 StageScaleMode.EXACT_FIT 和 StageAlign.TOP_LEFT。我们尝试为 viewPort 设置的矩形设置几个不同的值。例如，我们尝试了 (0, 0, 800, 480) 以及 0, 0 和 Capabilities.screenResolutionX/Y。

```
_adWindow.viewPort = new Rectangle(startX,startY,bannerWidth,bannerHeight); 
```

然后我们尝试在发送到 loadString() 的 HTML 中使用 css-margin 调整广告本身的位置。我们尝试使用 _marginLeft 静态和动态地设置边距（在我们尝试高度之前只尝试使用 marginleft）。

```
_marginLeft = (Main.screenResX * 0.5) - (1.875 * Main.screensDPI * 0.5); 
```

这是我们尝试获取 _marginLeft 值的设置。1.875 是英寸宽度的值，因为广告似乎在所有设备上始终具有此静态宽度。它应该是 w:300px 但这不会发生？

这是我们使用 loadString() 调用字符串的代码）

```
_htmlString = "<!DOCTYPE HTML>";
_htmlString += "<html><body style='margin:0 0 0 " + _marginLeft + "px;padding:0;'>";
_htmlString += "<script type='text/javascript' src='http://ad.leadboltads.net/show_app_ad.js?section_id=xxxxxxx'></script>";
_htmlString += "</body></html>"; 
```

它只是无法正常工作。我们可以将广告动态放置在 10.1 英寸标签的中间，但随后广告被错误地放置在 4 英寸手机上。该选项卡的 DPI 为 160（或者实际上是制造商的 149，但功能显示不正确），手机的 DPI 为 320（这是正确的值）。

似乎 stagewebview 中的像素与我们发送到 viewPort 的值之间可能存在某种失真？可能与 w:800 和 Capabilties.screenResolutionX 比率有关吗？

任何帮助表示赞赏:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:11:44.427

正如怀疑的那样，似乎是 StageScaleMode.EXACT_FIT 把事情搞砸了。

StageScaleMode.NO_SCALE 解决了这个问题。在那之后，

```
adWindow.viewPort = new Rectangle(stage.fullScreenWidth * 0.5 - adWidth * 0.5, 
stage.fullScreenHeight * 0.5 - adHeight * 0.5,
bannerWidth,bannerHeight); 
```

奇迹般有效 ：-）

# visual-c++ - 将 WinUSB 与 USB 设备模拟器一起使用

> ID：16035877
> 
> 赞同：0
> 
> 时间：2013-04-16T11:29:17.233
> 
> 标签：visual-c++, winusb

我正在开发 USB 客户端应用程序，并希望使用 WinUSB 函数来读取和写入 USB 通道。我也想用WinDDK自带的usbsamp驱动和SoftUSBLoopback.dll来实现USB设备的模拟端。我已按照说明（**WinUSB (Winusb.sys** ) 安装）将 usbsamp“Intel 82930 USB 测试板”驱动程序 (usbsamp.sys) 更新为 WinUSB (winusb.sys) 驱动程序，以便我可以在我的客户端应用程序中使用它。我已经修改了我的 inf 文件（如下所示），并且更新成功完成，但是当我调用 WinUsb_Initialize 时，它​​总是返回 0。问候，Janusz

```
;
;
; Installs WinUsb
;

[Version]
Signature = "$Windows NT$"
Class     = USBDevice
ClassGUID = {88BAE032-5A81-49f0-BC3D-A4FF138216D6}
Provider  = %ManufacturerName%
CatalogFile = WinUSBInstallation.cat
DriverVer=04/16/2013,13.54.20.543

; ========== Manufacturer/Models sections ===========

[Manufacturer]
%ManufacturerName% = Microsoft,NTAMD64

[Standard.NTamd64]
%DeviceName% =USB_Install, USB\VID_045E&PID_930A   ; Intel 82930

; For XP and later
[Microsoft.NTAMD64]
%DeviceName%=USB_Install, USB\VID_045E&PID_930A   ; Intel 82930
; ========== Class definition ===========

[ClassInstall32]
AddReg = ClassInstall_AddReg

[ClassInstall_AddReg]
HKR,,,,%ClassName%
HKR,,NoInstallClass,,1
HKR,,IconPath,%REG_MULTI_SZ%,"%systemroot%\system32\setupapi.dll,-20"
HKR,,LowerLogoVersion,,5.2

; =================== Installation ===================

[USB_Install]
Include = winusb.inf
Needs   = WINUSB.NT

[USB_Install.Services]
Include =winusb.inf
Needs   = WINUSB.NT.Services

[USB_Install.HW]
AddReg=Dev_AddReg

[Dev_AddReg]
HKR,,DeviceInterfaceGUIDs,0x10000,"{00873fdf-61a8-11d1-aa5e-00c04fb1728b}"

; [DestinationDirs]
; If your INF needs to copy files, you must not use the DefaultDestDir directive here.  
; You must explicitly reference all file-list-section names in this section.

; =================== Strings ===================

[Strings]
ManufacturerName            = "Microsoft"
ClassName                   = "Sample Device"
DeviceName                  ="Fx2 Learning Kit Device"
REG_MULTI_SZ

            = 0x00010000 
```

# web-analytics - SiteCatalyst 中的跨域跟踪。如何跟踪两个域的访问

> ID：16035878
> 
> 赞同：2
> 
> 时间：2013-04-16T11:29:22.077
> 
> 标签：web-analytics, web-analytics-tools, adobe-analytics

**情况：**

我正在将 SiteCatalyst 用于 www.my-company.com 上的网站。该网站还“包含”许多页面，这些页面位于完全独立的域 www.about-my-company.com 上。这些页面的外观和感觉与 www.my-company.com 上的页面完全相同，因此就用户而言，它是同一个网站。在 SiteCatalyst 中，我们希望报告发生在单独域上的页面视图和转换，就好像它们在主网站上一样（因此是一次访问/会话的一部分）。

**它在 Google Analytics 中的工作原理**

我有谷歌分析背景，它被称为“跨域跟踪”。Google Analytics 中的“跨域跟踪”基本上可以分解为：

1) 每当用户点击从域 A 到域 B 的链接时，所有 cookie 信息（包括会话 cookie）都会使用查询字符串传递给域 B。

2）域B页面上的一段javascript解释这个URL，并将信息写入cookies（包括会话cookie）。因此，尽管用户从域 A 转到域 B，会话仍保持不变。

**我的问题：**

SiteCatalyst 是否也可以做到这一点，如果可以，怎么做？我一直在寻找有关此问题的文档，但我感觉找不到它，因为它要么非常容易，要么几乎不可能。

**到目前为止我发现了什么：**

唯一听起来像我想要实现的目标是：

*...您更有可能将 www​.abc​-rocks​.com 视为与 www​.abc​.com 没有什么不同。为此，SiteCatalyst 在管理控制台中提供了一个内部 URL 过滤器区域。*

[http://blogs.adobe.com/digitalmarketing/analytics/admin-console-tips-inside-omniture-sitecatalyst/](http://blogs.adobe.com/digitalmarketing/analytics/admin-console-tips-inside-omniture-sitecatalyst/)

但是，我看不到 SiteCatalytist 界面中的某些设置如何帮助访问者“维护他们的会话”。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:45:37.963

快速简便的方法是为这两个站点使用友好的第三方 cookie。例如，如果您有 www.about-my-company.com 和 www.my-company.com 都使用 metrics.other-company.com 的跟踪服务器，那么跨各个域的任何导航都将保持相同的会话那个访客。s.trackingServer 值是设置访客 ID cookie 的位置。

现在，如果您对每个站点都使用第一方 cookie，那么您将遇到问题。例如，如果 www.about-my-company.com 使用 metrics.about-my-company.com 的跟踪服务器，而 www.my-company.com 使用 metrics.my-company.com 的跟踪服务器，那么您是当该访问者跨域时注册一个新会话。Adobe 目前没有为此发布的解决方案。我已经看到了一些可行的 hacky 解决方案，但我不会觉得推荐它们。

每当在您的站点上单击链接时，s_code.js 文件中的功能将检查 s.linkInternalFilters 变量中列出的任何项目是否出现在单击的链接 URL 中。如果在单击的 URL 中找到来自 s.linkInternalFilters 变量的值，则认为它是内部导航，不会发生任何其他事情。如果在单击链接的 URL 中找不到 s.linkInternalFilters 变量中列出的任何项目，则代码假定访问者正在离开站点并且将触发退出链接调用。**这是 s.linkInternalFilters 变量的唯一用途。**

对于进入 SiteCatalyst 的每个信标，它们通常包含一个当前 URL 值和一个引用 URL 值。您在管理控制台的内部 URL 过滤器中输入的值将根据来自信标的引用 URL 值进行检查。如果没有匹配项，SiteCatalyst 将认为这是一个外部引荐来源网址，其值将用于引荐来源网址和引荐域报告中。**这是内部 URL 过滤器的唯一用途。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:48:37.577

默认情况下，SiteCatalyst 使用自己的第 3 方 cookie，这将在跨域跟踪访问者方面发挥作用。一种“更友好”的方法是使用您自己的第 3 方 cookie。请注意，Adobe 将此称为“第一方 cookie 跟踪”，但实际上它仍然是第 3 方 cookie 跟踪；不同之处在于 cookie 存储在您自己的域中，而不是 Adob​​e 的域中。Adobe 确实允许为每个域设置第一方 cookie，但正如 vabeachkevin 所提到的，这实际上是在使用多个 cookie，它不会在站点之间传输访问者数据。

即使您使用 Adob​​e 或您自己的第 3 方 cookie，它也只会保留访问者 ID。它不会继承某些 Adob​​e 插件或您可能拥有的其他自定义代码使用的其他 cookie。Adobe 对此没有官方解决方案，但公平地说，GA 也没有。

基本上有三种方法可以处理将任意数据从一个站点传递到另一个站点：

1) 将数据作为查询字符串参数传递给所有链接或重定向。这种方法几乎不值得一提。除非你所有的网站都是超级基础的，有标准/硬编码的链接，而且你只有很少的数据要传递，否则这个解决方案是不可行的。甚至 GA 也不会自动将其访问者 cookie 信息附加到链接以进行跨域跟踪（您必须在链接点击时显式调用其功能之一）。

2) 使用具有持久数据层的标签管理器系统。这是*最简单*的解决方案，但大多数标签管理器都值得一试，实际上可以做到这一点需要花钱才能使用。

3）创建自己的解决方案。基本上这个想法是创建一个服务器端脚本，它将接收任意数据并将其放入 cookie 或服务器端的某个地方，如平面文件或数据库（您仍然会使用 cookie 来存储某种 ID 来查找数据在后一种情况下）。然后脚本还将任意数据输出为 javascript 变量。该脚本将作为 javascript 标记包含在您的全能代码之前。通常在这个初始包含中，您不会将任何内容传递给要设置的脚本；它只会输出当前存储的内容。然后，您可以围绕这些输出值创建 SiteCatalyst 代码。设置本地 cookie 等，然后在 SiteCatalyst 脚本执行后，再次调用服务器端脚本，如果有的话，传递更新的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:56:33.647

你已经得到了答案的一部分。

你只需要：

1) 更新 s_code.js 以整合正确的内部域名： s.linkInternalFilters="tel:,javascript:,www.my-company.com,www.about-my-company.com" ；

2) 转到您的 sitecatalyst 管理控制台，在“内部 URL 过滤器”部分添加新域名

3) 使用与 www.my-company.com 相同的 s_code 和相关页面跟踪标记 www.about-my-company.com 上托管的页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T11:46:14.767

根据更新代码的第二个响应，在两个域上使用相同的代码。这将设置两个 cookie 和会话 ID 以及一个备用 ID。

数据将在 adobe 中全部设置到同一个服务器集群，然后处理规则会将这两个会话链接在一起。

如果您想对此进行测试，请将#crosssesiontest 添加到第一页的入口网址，然后进行特定的旅程。

大约需要 2 小时，然后此数据将显示在报告套件中，构建一个细分以仅显示包含带有 #crosssesiontest 的 URL 的会话，然后您可以查看您的数据。

这假设您希望将数据发送到同一个报表包等。

# c# - 如何使用 Linq 过滤和排序 Dictionary 对象

> ID：16035886
> 
> 赞同：-2
> 
> 时间：2013-04-16T11:29:39.503
> 
> 标签：c#, linq, dictionary

我的字典对象中有以下数据。

```
List<KeyValuePair<String, Component>> lstCountry = new List<KeyValuePair<string, Component>>();

//Sample data in above dictionary object

ASIA, Component object(India)
ASIA, Component object(China)
ASIA, Component object(Sri Lanka)
ASIA, Component object(Bangladesh)
..
..
..
EUROPE, Component object(United Kingdom)
EUROPE, Component object(Germany)
EUROPE, Component object(France)
..
.. 
```

现在我想将这些值添加到另一个主国家字典中，该字典将包含以下示例数据：

```
Dictionary<String, List<Component>> dicCountries = new Dictionary<string, List<Component>>();

//ASIA, List<Component> Object of all the ASIA countries
//AFRICA, List<Component> Object of all the AFRICA countries
//EUROPE, List<Component> Object of all the EUROPE countries
... 
```

...

请建议是否可以使用 LINQ 或我们可以通过简单的 C# 编码来实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:36:32.710

假设输入不是字典（没有意义）而是 a `List<KeyValuePair<String, Component>>`，这有效：

```
Dictionary<String, List<Component>> dicCountries = lstCountry
        .GroupBy(kv => kv.Key)
        .OrderBy(g => g.Key) // added OrderBy because of your title although it's not clear
        .ToDictionary(g => g.Key, g => g.Select(kv => kv.Value).ToList()); 
```

如果您还想订购组件，您必须`OrderBy`在`ToList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:38:00.983

```
List<KeyValuePair<String, Component>> dataNotGrouped;
var grouped = dataNotGrouped.GroupBy(e=>e.Key); 
```

完毕。

然后您可以将其转换为`Dictionary<String, List<Component>>`或转换为`List<KeyValuePair<String, Component>>`您想要的任何东西！您的列表正在按 Key 分组！

# python - 如何使用变量执行用户定义的 python 方法，从 Excel 表中读取

> ID：16035887
> 
> 赞同：0
> 
> 时间：2013-04-16T11:29:48.347
> 
> 标签：python, selenium, python-2.7, selenium-webdriver, xlrd

我已经为**ClickLink**、**TypeInTextBox**等构建了可重用的框架库，它位于不同的 python 模块中。

当我直接在主类中使用这些方法时，`ClickLink('CP_SignIn_Link')`它工作正常。

但是，当我尝试从 excel 中读取它并使用如下相同的内容时，我收到以下错误：

```
Keyword(wd_handle,Arguments)

print Keyword = ClickLink
print Arguments = 'CP_SignIn_Link'

Keyword(wd_handle,Arguments,Value) 
```

`TypeError: 'unicode' object is not callable`

```
Sample TC Excel Document:
======================

User_Keyword    | Keyword_Arguments         | Value
----------------------------------------------------------------------------------
ClickLink       | 'CP_SignIn_Link'          |
TypeInTextBox   |'CP_EmailAddress_TextBox'  |'ABC@D.COM'    
TypeInTextBox   |'CP_Password_TextBox'      |'test' 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:33:10.010

我尝试使用 globals() 关键字并且它有效:)

其中 User_Keyword 变量将评估为与包中方法名称等效的字符串。

示例： `def ExecuteKeyword(driver, User_keyword, Argument) # User_keyword = ClickLink , Argument = SignInLink function = globals()[User_Keyword] function(driver,Arguments) # Equivalent to ClickLink(driver,SingnInLink)` 希望这对其他人有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:05:02.497

我坚信您将“关键字”作为字符串获取，但您试图将其称为函数。例子 ：

> > > k = os.system
> > > k('pwd')

/home/test/kelvin/pythonall
0

## 但是如果我们这样尝试：

> > > k ='os.system'
> > > k('pwd')
> > > Traceback（最近一次调用最后一次）：
> > > 文件“”，第 1 行，
> > > 类型错误：'str' 对象不可调用

这里 ClickLink 以字符串形式出现

# java - 如何在 Java 中读取 PDF 文件？

> ID：16035892
> 
> 赞同：-2
> 
> 时间：2013-04-16T11:30:07.777
> 
> 标签：java, pdf

我从服务器收到 pdf 文件。我想以只读方式打开该 pdf 文件。没有编辑选项。所以我不能使用文件操作。

哪个图书馆最适合阅读pdf文件？

如何在java中读取pdf文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:35:10.523

使用[PDFBOX](http://pdfbox.apache.org/userguide/text_extraction.html)或[iText](http://itextpdf.com/)

我在使用 PDFBOX 时使用下面的代码。

```
try
    {
    document = PDDocument.load(f);
    document.getClass();
if( document.isEncrypted() )
{
try
{
document.decrypt( "" );
}
catch( InvalidPasswordException e )
{
System.err.println( "Error: Document is encrypted with a password." );
System.exit( 1 );
}
}

PDFTextStripperByArea stripper = new PDFTextStripperByArea();
stripper.setSortByPosition( true );
PDFTextStripper stripper = new PDFTextStripper();
String st = stripper.getText(document);

System.out.println(st); 
```

# magento - Magento 会话数据缓存

> ID：16035893
> 
> 赞同：2
> 
> 时间：2013-04-16T11:30:14.620
> 
> 标签：magento, session, caching, message

我使用此示例创建了会话消息：

[如何在 Magento 中自己的会话变量中保存值？](https://stackoverflow.com/questions/3340982/how-do-i-save-value-in-my-own-session-variable-in-magento)

这是我的代码：

//这是在观察者中调用的

```
$inputMessage = 'Hello ' . $customerName;
Mage::getSingleton('core/session')->setWelcomeMessage($inputMessage); 
```

这在标题模板中调用

```
Mage::getSingleton('core/session')->getWelcomeMessage(); 
```

我在启用客户注销和缓存时遇到问题 - getWelcomeMessage() 输出缓存的 $inputMessage 值；

有没有办法只为 WelcomeMessage 禁用缓存？我正在使用 Magento EE 1.11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:07:05.027

看起来您启用了 FPC。

我建议您先禁用 FPC 并检查此问题是否仍然存在。

如果它消失了，则使用 FPC 相关的排除缓存技巧检查此 URL： [如何在打开全页缓存的情况下在产品页面中包含动态块？](https://stackoverflow.com/questions/9120413/how-do-i-include-a-dynamic-block-in-the-product-page-with-full-page-caching-turn/9125519#9125519)

# c# - 如何在 GTK TextView 中自动滚动到底部

> ID：16035894
> 
> 赞同：1
> 
> 时间：2013-04-16T11:30:16.303
> 
> 标签：c#, gtk

我在 GTK textview 中发现了奇怪的异常，希望有人能解释一下。

有一个简单的功能可以滚动到窗口底部：

```
richTextBox.ScrollToIter(richTextBox.Buffer.EndIter, 0, true, 0, 0); 
```

在大多数情况下，这可能应该有效。但有时它会使用 MemoryAccessViolation（Linux 中的 SIGSEGV）使整个应用程序崩溃

每次我向 TreeView 插入文本时，我的应用程序都会调用它，这样我就可以一直处于关闭状态（您正在向某个窗口插入文本，并且您想查看最新的文本，例如在聊天中）

文本仅从主线程插入，并且此函数也仅在主线程中调用，因此这与我自己的应用程序中的多线程无关，但是我发现 TextView 正在与应用程序的其余部分异步呈现文本。就像负责绘制和处理文本的线程并不是真正的主线程一样。例如，如果我将一个巨大的文本加载到 TextView 中，我的应用程序正在响应，即使 TextView 以某种方式加载了文本。

出于这个原因，我相信 TextView 实际上正在使用自己的单独线程，并且当我尝试滚动窗口时，该线程正在更改文本。正在更改的文本使 iter 无效，因此在我传递`richTextBox.Buffer.EndIter`给 TextView ScrollToBottom 函数的 IL 代码之间的某个地方，文本可能被这个外部线程更改并且 iter 无效，这就是我得到这个内存访问异常的原因。

这甚至可能是 GTK 中的一个错误，但我使用的是非常稳定的版本 (2.1.20)，它随所有单声道版本一起提供，直到 mono3，甚至适用于所有 windows gtk# 版本。

有没有其他方法可以“安全地”向下滚动

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T12:09:24.233

这似乎有效：

连接滚动到`SizeAllocated`事件的函数：

```
this.tv.SizeAllocated += new SizeAllocatedHandler(Scroll2); 
```

创建滚动函数

```
public void Scroll2(object sender, Gtk.SizeAllocatedArgs e)
{
    tv.ScrollToIter(tv.Buffer.EndIter, 0, false, 0, 0);
} 
```

我不知道它是否正确，但到目前为止它并没有让我崩溃，并且一旦渲染完成它总是滚动到底部

# pointers - 这个语法的含义

> ID：16035901
> 
> 赞同：0
> 
> 时间：2013-04-16T11:31:08.810
> 
> 标签：pointers, constants

请你描述一下是什么意思：

> 常量字符* 常量*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:51:19.700

这使得内部指针只读（const）：

虽然这将编译：

```
char *foo = NULL;
const char** bar = NULL;
bar[0] = foo; 
```

这不会：

```
char *foo = NULL;
const char* const* bar = NULL;
bar[0] = foo; 
```

因为不允许设置内部指针。

# matlab - 金融时间系列 tohour, to30min 等

> ID：16035903
> 
> 赞同：0
> 
> 时间：2013-04-16T11:31:16.337
> 
> 标签：matlab

在金融时间序列工具箱中，有许多方法可以将基本序列转换为每日、每周、每月等...

是否有任何功能可以转换为 5 分钟、30 分钟、每小时等......？

# python - 获取完整的异常类型/消息和堆栈跟踪

> ID：16035904
> 
> 赞同：8
> 
> 时间：2013-04-16T11:31:24.637
> 
> 标签：python, exception, python-3.x

我编写了一个 API，它以以下格式返回 Json ......

```
{"Success": true, Result: {...}}

{"Success": false, ExceptionId: "(some uuid)"} 
```

记录异常。原则上，允许某人在我们不告诉他们错误是什么（作为安全措施）的情况下讨论错误是可以的。在调试期间，我还想输出错误消息以阻止我一直引用数据库。

就目前而言，问题是从异常中获取有用的信息（返回或登录数据库）

我正在做这样的事情......

```
try:
    Ret['Result'] = <Blah>
    Ret['Success'] = True
except Exception as e:
    # ... Logging/ExceptionId
    if Settings.DebugMode: 
        Ret['Exception'] = str(e) 
```

如果我在最后一行设置断点并`e`在 eclipse 的监视窗口中进行检查，我会得到`KeyError: 'Something'`，但`str(e)`结果`'Something'`非常无益。

我用谷歌搜索，我找不到任何方法从异常中获取正确的消息。显然在 v<2.4 中曾经有 a `.message`，但这对我在 3.3 中没有帮助

作为替代方案，我尝试这样做：

```
Ret['Exception'] = str(type(e)) + ": " + str(e) 
```

这导致`<class 'KeyError'>: 'job'`which 更接近一点，但它开始感觉越来越 hackish。

我还想包含一个堆栈跟踪，但那里的运气更差 - 我可以得到`__traceback__`但当然它不是可序列化的，并且调用`str()`它只会导致对象的描述，例如`<traceback object at 0x0000000004024E48>`

如何获得体面/全面的错误消息？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T11:38:43.697

你可能想要`repr`：

```
Ret['Exception'] = repr(e) 
```

对于回溯，请使用[回溯模块](http://docs.python.org/dev/library/traceback.html)：

```
from traceback import format_exc
Ret['Traceback'] = format_exc() 
```

# matlab - libsvm svmpredict 方法输出模型文件

> ID：16035905
> 
> 赞同：2
> 
> 时间：2013-04-16T11:31:25.490
> 
> 标签：matlab, libsvm

我使用 libsvm svmpredict 方法对 Matlab 上的图像进行分类。我需要扩展名为“.model”的 svmpredict 方法的输出模型文件。但我无法创建它。我的用法是，

```
model = svmtrain(train_label_set_libsvmformat, train_data_set_libsvmformat, '-t 2 -c 0.3 -g 0.01');
[predict_label, accuracy, prob_values] = svmpredict(test_label_set_libsvmformat, test_data_set_libsvmformat, model, 'output.model'); 
```

我等待创建这个文件“output.model”，但它不存在。对我来说有什么不对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:32:09.637

来自[https://sites.google.com/site/kittipat/libsvm_matlab](https://sites.google.com/site/kittipat/libsvm_matlab)

```
% Train the SVM
model = svmtrain(trainLabel, trainData, '-c 1 -g 0.07 -b 1');
% Use the SVM model to classify the data
[predict_label, accuracy, prob_values] = svmpredict(testLabel, testData, model, '-b 1'); % run the SVM model on the test data 
```

的最后一个参数`svmpredict`不是文件名，而是要传递给`svmpredict`. 如果要将模型保存到文件中，通常在`svmtrain`. 如果您使用 的命令行版本`svm-train`，则模型文件是一个附加参数。

从我为 MATLAB 制作的 libsvm 源代码来看，执行`svmtrain`命令得到的模型只是 MATLAB 中的一个标量，因此没有内置方法来获取模型文件。

如果你想要一个模型文件，你必须使用 libsvm 的命令行版本。

# c# - 在 C# 中监控应用程序

> ID：16035906
> 
> 赞同：0
> 
> 时间：2013-04-16T11:31:26.730
> 
> 标签：c#, windows, windows-services, scheduled-tasks, monitoring

我正在**用 c# 制作一个控制台应用程序，**用于监控公司 pc 中的使用，该应用程序运行良好，但我的问题是，如果工作人员关闭它，我想这样做，我想要么禁止关闭它（虽然我已经阅读无法避免他从任务监视器中关闭它）或重新启动它。

我的方法是编写一个 Windows 服务来检查应用程序是否正在运行，但是当从服务启动时，应用程序没有正确记录用户活动（甚至允许服务与桌面交互，通过在服务控制选项卡上检查它）。

我还考虑过制定计划任务，监控应用程序是否正在运行并在需要时重新启动它。

我的问题是，在用户（普通用户，而不是管理员权限）登录并且不能被他关闭时，让应用程序继续运行的最佳方法是什么？

PD：如果他关闭应用程序，他可能无法工作，这将不是它的康斯坦斯；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:15:51.867

无论如何，一旦用户关闭程序，您的 Windows 窗体应用程序将收到 WM_CLOSE 消息。在此消息的处理程序中，您可以将 .bat 文件写入硬盘驱动器，该文件仅再次运行您的应用程序。然后你只需要在片刻之后安排你的 .bat 文件。因此，一旦您的应用程序关闭，它就会由 Windows 再次启动。您还可以使用前面提到的其他 Windows 服务。这是更可靠的方法。您只需要以特殊的桌面用户身份运行您的程序。有几种方法可以实现这一目标，例如：

```
System.Diagnostics.Process.Start(filenameToStart, username, password, domain); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:20:46.177

只需确保您可以控制该`Process`实例。如果你有你提到的服务，你可以从它启动真正的监视器应用程序。

然后你可以做这样的事情：

```
public void StartProcess()
{
      var process = new Process();
      process.EnableRaisingEvents = true;
      process.Exited += new EventHandler(process_Exited);
      process.Start();
} 
```

你的`process_Exited`事件可以循环回到`StartProcess();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:14:06.943

> 我的方法是编写一个 Windows 服务来检查应用程序是否正在运行

这是监视在用户上下文中运行的守护程序应用程序的最简单（也可能是最干净）的方法。Terje 的回答解决了这个问题。

> 但是当从服务启动时，应用程序不会正确记录用户活动（甚至允许服务与桌面交互，通过在服务控制选项卡上检查它）。

这是因为您的应用程序正在服务桌面上运行。选中服务控制选项卡上的框只会在用户桌面上显示服务本身创建的窗口。

您需要在登录用户的默认桌面上启动应用程序。请参阅[在 C++ 中启动交互式客户端进程](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379608%28v=vs.85%29.aspx)

对于 Windows 服务，检索用户的令牌非常简单：

在服务中处理[OnSessionChange](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onsessionchange.aspx)事件以在用户登录/注销时检索用户的会话 ID。获得会话 ID 后，您可以检索[用户令牌](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383840%28v=vs.85%29.aspx)并在用户桌面上启动监控应用程序。

现在您所要做的就是使用以下 STARTUPINFO调用[CreateProcessAsUser 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)

```
var si = new STARTUPINFO();
si.cb = Marshal.SizeOf(si);
si.lpDesktop = "Winsta0\\default";//this is the user's desktop. 
```

有关完整示例源，请参阅Henry Chong 的这篇[博客文章](http://henry-chong.com/2012/03/getting-the-current-active-user-in-c-sharp/)

# java - 从函数java返回变量和数组

> ID：16035909
> 
> 赞同：1
> 
> 时间：2013-04-16T11:31:31.117
> 
> 标签：java, function, sorting, return

我有一个排序功能。我想返回两个值，我认为如果我返回 vaiable 和数组会更好。但我不知道该怎么做。

```
public static int[] bubbleSort(int[] allatal)
{
    //En variabel för att man ska lagra info i den 
    //Tillfällig lagring. 
    int temp;

    //Variabel för förlyttningar
    int forFlyttningar = 0;

    //Loopar, loopen är inte mer än storleken på arrayen
    for(int i=0;i<allatal.length-1;i++ )
    {
       //En till loop
       for(int j=i+1;j<allatal.length;j++)
        { 
           //Om talet peckaren pekar på större än det andra
           //talet så ska programmet
           if (allatal[i] > allatal[j])
           {
               //Lagrar värdet array "i" i temp 
               temp = allatal[i];
               //Överför "j" till "i"
               allatal[i] = allatal[j];
               //temp värdet överförs till "i"
               allatal[j] = temp;
               forFlyttningar++;
            }
         }
    }
    return allatal, forFlyttningar;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:33:27.673

你不能。要么将其作为包含两个元素的数组返回，要么创建一个自定义对象来返回这两个特定元素。

```
public class Result {
    public int forFlyttningar;
    public int[] allatal;

    public Result(int forFlyttningar, int[] allatal) {}
}

// Snip
return new Result(forFlyttningar, allatal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:41:46.363

您可以使用对象来保存数组和值，也可以返回包含数组和值的向量，但最佳做法是使用对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:36:36.187

Java 框架不允许这样的事情。但是，您可以（任何一个都可以）：

*   创建一个包装类，它接受一个数组和整数。在您的方法中，使用您想要返回的任何值创建此包装类的实例并产生它。
*   看看 Apache 的[`Tuple`](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/tuple/package-summary.html)类。
*   您应该能够通过方法本身修改数组的结构，而无需返回它。您可以利用它来发挥自己的优势，并拥有一个只需要返回 1 个值的方法。查看[之前](https://stackoverflow.com/questions/7231042/java-arrays-sort)的 SO 帖子以获取更多信息。

# javascript - jQuery：处理跨域 jsonp 错误请求错误

> ID：16035912
> 
> 赞同：2
> 
> 时间：2013-04-16T11:31:42.467
> 
> 标签：javascript, jquery, ajax, error-handling, jsonp

我无法使用我的 jquery 代码捕获错误的请求错误。

```
$.get('http://example.com/', {}, function () {}, 'jsonp')
 .done(function () {
   // never fires
 })
 .fail(function () {
   // never fires
 })
 .always(function () {
   // never fires
 }); 
```

我只是得到错误

> GET [http://example.com?callback=jQuery17102424617672804743_1366109250123&_=1366111087274](http://example.com?callback=jQuery17102424617672804743_1366109250123&_=1366111087274) 404（未找到）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:07:04.207

您不能`.get`用来调用其他域。您需要使用**jsonp**调用`.ajax`。

但这还不足以产生错误。您还需要指定`timout`属性。没有它，您**将不会**出错。

```
$.ajax({
  url: 'http://hq.am/asdasdasdasd?callback=?',
  timeout: 3000,
  dataType: "json",
  error: function(data){
      alert('error');
  }
}); 
```

[样本](http://jsfiddle.net/narekmarkosyan/wJcMy/)

# java - JSONArray 将日期作为对象返回？

> ID：16035914
> 
> 赞同：0
> 
> 时间：2013-04-16T11:31:46.970
> 
> 标签：java, javascript, json

我正在使用服务器端的java和客户端的javascript进行Web开发......我使用返回json的post方法访问一个java函数......在返回时我通过json数组获取所有值但日期字段返回为[对象对象] ...如何将该对象转换为日期？

```
List<LocateOffice> officeList = commonService.searchoffice(office, company, ocity, state, area);
            request.setAttribute("officeList",officeList);

if(officeList!=null)
            {
                JSONArray jsonArray = JSONArray.fromObject(officeList);
                response.getWriter().print(jsonArray.toString());
            } 
```

之后，当我使用 for 循环访问 officelist json 时，在 javascript 中

```
alert(officelist[i].createdDate); 
```

此警报返回 [Object object]

更新：我的问题不是关于 alert() 只是为了你理解的目的，我输入了这样的代码，无论我在哪里使用该 json，日期都会返回一个对象......如何将该对象转换为 javascript 日期或字符串......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:07:16.937

我认为您的问题在于不兼容的字段类型`List<LocateOffice>`

该`JSONArray.fromObject(Object object)`方法会将您的“对象”转换为`JSONArray`对象。该方法的工作方式是检查要转换的对象的类型。`JSONArray`对象只接受`Boolean`, `JSONArray`, `JSONObject`, `Number`, `String`, 或 . 类型的值`JSONNull object`。

`JSONObject`只接受相同的类型，所以我认为您需要手动检查您的列表并将任何不兼容的对象转换为兼容的对象（例如将您的`Date`转换为 a`String`然后将其放入`JSONArray`）。

希望有帮助。

# java - 读取对象时出现 EOFException

> ID：16035915
> 
> 赞同：2
> 
> 时间：2013-04-16T11:31:49.733
> 
> 标签：java, exception, networking, serialization

当我尝试通过 Java 中的服务器套接字发送对象时，我得到一个 EOFException。

这是发送部分的代码：

```
public static void sendObject(Object Object, InetAddress IP, int Port){
    try{
        Socket receivingSocket = new Socket(IP, Port);
        OutputStream OS = receivingSocket.getOutputStream();
        ObjectOutputStream OOS = new ObjectOutputStream(OS);

        OOS.writeObject(Object);
        OOS.close();
        OS.close();
        receivingSocket.close();
    }
    catch(Exception e){
        System.err.println("Failed to send object to: " + IP + " on port: " + Port);
        System.err.println(e);
    }
} 
```

我尝试将对象转换为特定对象，但没有成功。问题实际上出现在接收端，如下所示：

```
public Downloader(int PortStart, int PortStop, Loading_State loading_state){
    this.loading_state = loading_state;

    for(int i = PortStart;i<PortStop;i++){
        try {
            SS = new ServerSocket(i);
            break;
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public void run(){
    try {
        S = SS.accept();
        IS = S.getInputStream();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    while(!destroy){
        while(active){
            try {
                OIS = new ObjectInputStream(IS);
                Character Char = (Character)OIS.readObject();
                loading_state.setChar(Char);
                pause();
            }
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

因此，当我启动下载时，控制台立即吐出：

```
java.io.EOFException
at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.readShort(Unknown Source)
at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
at java.io.ObjectInputStream.<init>(Unknown Source)
at input_output.network.Downloader.run(Downloader.java:68) 
```

编辑：该对象确实实现`Serializeable`

```
public class Character implements Serializable{
private static final long serialVersionUID = -6390272842934614484L; 
```

大编辑！：

我不知道为什么或如何，但我认为下载工作但现在它不能将接收到的对象投射到我的对象！

```
Character Char = (Character)OIS.readObject();
java.lang.ClassCastException: server.database.account.Character cannot be cast to database.Character 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:35:15.853

你的对象是可序列化的吗？该对象应实现可序列化接口：

```
class MyClass implements Serializable {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:55:15.997

您只发送一个对象，但您正在循环期望读取多个对象。那没有意义。要么发送更多对象，要么只读取一个。如果您发送和读取多个对象，当您读取多于发送的对象时，您将始终收到 EOFException。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T12:49:14.093

我解决了！

第一个问题是我在启动线程下载的同时发送了一个请求（我认为）所以我所做的是我稍后发送请求，突然 EOF facepalm 异常消失了......

现在我留下了转换异常，问题是我必须在与发送方完全相同的包层次结构中拥有类（对象）字符，因为 java 是愚蠢的。

谢谢您的帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T12:06:48.817

两件事情，

1.  While 循环应该涵盖整个运行方法（我相信看到代码）
2.  由于它的无限循环可以收集空输入，因此您也应该处理它。

    公共无效运行（）{

    ```
    while(!destroy){

        while(active){
            try{
                S = SS.accept();
                IS = S.getInputStream();
                if(IS!=null && IS.available()>0){
                    OIS = new ObjectInputStream(IS);
                    Character Char = (Character)OIS.readObject();
                    loading_state.setChar(Char);
                    pause();
                }
            }
            catch(Exception e){  ..}
        }
    } 
    ```

    }

# matlab - Matlab图形始终可见

> ID：16035918
> 
> 赞同：2
> 
> 时间：2013-04-16T11:31:53.540
> 
> 标签：matlab, matlab-figure

我写了一个 matlab 函数，它在一个图形上做了很多事情。

现在，问题是在程序终止执行之前不会显示图形，但我希望在程序运行时实时显示图形，并进行所有修改，并且始终在前台显示。

我怎么能做到这一点？`figure('visible','on')`不排序任何效果，也不 set() 命令。

代码片段：

```
set(gcf,'visible','on')
parfor (i=1:n, 8)

    if norm(A(i,:))<1
        countr=countr+1;
    end
    hold on;
    plot(A(i,1),A(i,2),'+')

end 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:37:13.887

我不推荐它，但我认为你需要添加一些`drawnow`语句，它会同步视觉和计算线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:44:05.913

该语句`figure('visible','on')`创建一个**新**图形，但您想让已经存在的图形可见，因此使用：

```
set(gcf,'visible','on') 
```

**编辑 2**

我无法重现该问题（可能该示例不是一个好示例）：

```
A = rand(100,2);
set(gcf,'visible','on')
hold on
parfor (i=1:100, 8)
        plot(A(i,1),A(i,2),'+')
        pause(0.01)
end 
```

**旧编辑**Parfor 和图形（来源“[如何在 parfor 期间查看绘图](http://www.mathworks.co.uk/matlabcentral/newsreader/view_thread/294212)”）：

根据消息来源，快速的答案是您无法在其中更新屏幕输出，`parfor`但是`drawnow`这违背了 parfor 的目的。因此，您是否严格需要 parfor？

但是，请参阅我的**EDIT 2**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:37:11.703

默认情况下，图形必须是可见的；否则你应该修改这个属性。因此，尝试查找任何包含`wait`. 其他选择是尝试`figure(gcf)`将焦点放在您想要的图形上。

# java - Java 32位系统BitSets的内存大小

> ID：16035924
> 
> 赞同：1
> 
> 时间：2013-04-16T11:32:15.700
> 
> 标签：java, memory, bitset

如何在 C++中[计算内存。`new BitSet(n)`](https://stackoverflow.com/a/12459988/655860)

在 Java中需要什么[内存。`new BitSet(1024)`](http://vanillajava.blogspot.ie/2011/07/java-how-much-memory-do-different.html)

但似乎 Java 的公式不同。我想计算花费的内存`new BitSet(100000)`，你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:51:19.103

BitSet 被打包成“单词”数组。一个词（在当前的实现中）很长。内部的单个位将被检索/设置使用掩码；因此，它在内部将 64 位打包在一个 long 值中，并使用一个 long 数组来保存您需要的所有位。

数组的维度将是 N (100000) / 64 字节，或 1563 个长整数，或 12504 字节，加上 BitSet 内部结构/记账所需的固定开销。

见[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/BitSet.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/BitSet.java)的实现；计算字段并总结它们需要的空间（一个 int：4 个字节；一个 long：8 个字节，依此类推），您可以了解固定开销是多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:51:10.547

它比 100000/8 多一点，这与 C++ 中的基本相同，假设 N 是位数。要准确测量它，您可以对其进行测试。

```
public static void main(String... ignored) {
    BitSet warmup = new BitSet(10000);    // load the class etc.

    long before = memoryUsed();
    BitSet bs = new BitSet(100000);
    long size = memoryUsed() - before;
    if (size == 0)
        throw new AssertionError("You need to run this with -XX:-UseTLAB for accurate accounting");
    System.out.printf("BitSet(100000) used %,d bytes%n", size);
}

public static long memoryUsed() {
    return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
} 
```

`-XX:-UseTLAB`在命令行上打印

```
BitSet(100000) used 12,544 bytes 
```

创建了两个对象（BitSet 和 long[]），这与预期的差异很小。

# mule - 当 mule 项目转换为 Web 应用程序时，在 mule ajax 连接器中使用的 app.home 不起作用

> ID：16035925
> 
> 赞同：0
> 
> 时间：2013-04-16T11:32:21.700
> 
> 标签：mule, mule-studio

在 mule 中，工作室航班预订示例在我使用 web 应用程序转换它时正在工作`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID">
 <!--Mule configuration (Mule format)-->
  <context-param>
    <param-name>org.mule.config</param-name>
    <param-value>flight-config.xml</param-value>
  </context-param>
  <listener>
    <listener-class>
    org.mule.config.builders.MuleXmlBuilderContextListener
    </listener-class>
  </listener>
  <servlet>
    <servlet-name>muleServlet</servlet-name>
    <servlet-class>org.mule.transport.servlet.MuleReceiverServlet</servlet-class>
    <load-on-startup>100</load-on-startup>
  </servlet>
 <!--Mule configuration ends-->
</web-app> 
```

在骡子应用中

```
<ajax:connector name="ajaxServer" serverUrl="http://0.0.0.0:9092/reservation" resourceBase="${app.home}/docroot" doc:name="Ajax"/> 
```

上述连接器正常工作，但在 Web 应用程序中显示错误

```
 HTTP ERROR 404
    Problem accessing /reservation/. Reason: 
        NOT_FOUND
--------------------------------------------------------------------------------
Powered by Jetty:// 
```

在 WebContent 中，我创建了一个文件夹`docroot`并相应地在其中创建了文件，我在 Web 应用程序中使用的连接器是

```
<ajax:connector name="ajaxServer" serverUrl="http://0.0.0.0:9092/reservation" resourceBase="/docroot" doc:name="Ajax"/> 
```

但这不起作用。此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:47:03.700

我是这样做的：

添加了一个扩展 MuleXmlBuilderContextListener 的 ContextListener，它执行以下操作

```
ServletContext context = event.getServletContext();
    System.setProperty("rootPath", context.getRealPath("/"));
    initialize(context); 
```

并像这样使用这个rootPath：

```
<ajax:connector name="ajaxServer" serverUrl="http://0.0.0.0:9092/reservation" resourceBase="${rootPath}WEB-INF/docroot" doc:name="Ajax"/> 
```

现在应用程序正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:14:22.623

var ${app.home} 由 mule 独立容器设置，因此当您将它嵌入到 webapp 中运行时，您有两个选项：

1.  自己设置变量
2.  将其更改为相对于您的 webapp 位置的路径

# ios - 通过 API 向服务器发送 https POST 请求时遇到问题，出现“需要 HTTPS”

> ID：16035927
> 
> 赞同：1
> 
> 时间：2013-04-16T11:32:24.653
> 
> 标签：ios, objective-c, nsurlconnection, nsurlrequest

在我正在构建的应用程序中，我需要向 API 发送一个安全的 POST 请求。请求的主体是 JSON。指定请求如下：

```
NSMutableURLRequest *urlRequest=[NSMutableURLRequest
                                     requestWithURL:
                                     [NSURL URLWithString: @"https://testserver.test:443/userinfo"]
                                     cachePolicy:NSURLRequestUseProtocolCachePolicy
                                     timeoutInterval:60.0];

[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setValue:delegate.currentUser.token forHTTPHeaderField:@".ASPXAUTH"];

[urlRequest setHTTPMethod:@"POST"];

[urlRequest setHTTPBody:postData];
NSURLConnection* connection = [[NSURLConnection alloc] 
                                initWithRequest:urlRequest delegate:self]; 
```

这通常有效，但有时无效，然后会收到 400: HTTPS Required 消息。在服务器端，即使我在 URL 中指定了端口，这些尝试也显示请求被发送到端口 80 而不是 443（这甚至是必要的吗？）。

有什么我可能在这里遗漏的想法吗？

编辑：这是发生这种情况时我得到的响应

```
headers: {
"Cache-Control" = "no-cache";
"Content-Length" = 14;
"Content-Type" = "text/plain; charset=utf-8";
Date = "Tue, 16 Apr 2013 12:31:02 GMT";
Expires = "-1";
Pragma = "no-cache";
Server = "Microsoft-IIS/7.5";
"Set-Cookie" = "ARRAffinity=ed9f________________________________8ac4;Path=/;Domain=testserver.test:443, WAWebSiteSID=c390_________________0; Path=/; HttpOnly";
"X-AspNet-Version" = "4.0.30319";
"X-Powered-By" = "ASP.NET, ARR/2.5, ASP.NET"; 
```

}

编辑2：想法。

1.  我是否必须以某种方式配置 NSMutableURLRequest 以确保它使用安全连接？还是 NSURLConnection？
2.  为什么它有时有效，有时无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:32:39.017

服务器端是否有多台服务器，其中一台未正确设置 HTTPS？由于该问题仅在某些时候出现，因此不太可能是客户端问题。您不需要在 url 中指定端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:35:27.780

`REST`是一个非常高级的概念。事实上，它甚至根本没有提到 HTTP！

如果您对如何在 HTTP 中实现 REST 有任何疑问，可以随时查看[Atom 发布协议 (AtomPub)](http://atomenabled.org/developers/protocol/atom-protocol-spec.php)规范。AtomPub 是一种使用 HTTP 编写 RESTful Web 服务的标准，由许多 HTTP 和 REST 杰出人士开发，其中一些输入来自 REST 的发明者和 HTTP 本人的（共同）发明者 Roy Fielding。

事实上，您甚至可以直接使用 AtomPub。虽然它来自博客社区，但绝不限于博客：它是一种通用协议，用于通过 HTTP 与任意（嵌套）任意资源集合进行 RESTful 交互。如果您可以将您的应用程序表示为资源的嵌套集合，那么您可以只使用 AtomPub，而不必担心是使用 PUT 还是 POST，返回什么 HTTP 状态代码以及所有这些细节。

[这就是 AtomPub 关于资源创建的说法：](http://atomenabled.org/developers/protocol/atom-protocol-spec.php#crwp)

要将成员添加到集合中，客户端将 POST 请求发送到集合的 URI。

希望这可以帮助。

# nginx - nginx代理传递到目录

> ID：16035929
> 
> 赞同：0
> 
> 时间：2013-04-16T11:32:31.007
> 
> 标签：nginx

我正在尝试为 wordpress 安装 Participad，这首先需要在 yourdomain.com/etherpad/ 中安装 etherpad。我已经正确安装了 etherpad，当我通过 ssh 端口转发直接连接到它时它正在工作。但是当我在 nginx 中重新配置我的虚拟主机以添加：

```
location /etherpad/ {
proxy_pass http://localhost:9001/;
proxy_set_header    Host $host;
proxy_buffering     off; 
```

然后我无法加载css文件，当我直接连接到它时，可以在/static/custom/index.css下找到它，但是通过nginx我得到一个404。所以我可以加载索引页面但没有css（而且我猜javascript也不起作用，甚至还没有尝试过。）

我习惯用 nginx 代理 /，而不是文件夹。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:55:23.967

像这样在 /etc/nginx/sites-enabled/default 或 nginx.conf 中定义 js 和 css 的位置块，以您系统上的任何一个为准

```
 location ~ \.js$ {
    root /pathtoJSFiles;
    }       

    location ~ \.css$ {
    root /pathtoCSSFiles;
    } 
```

# c++ - 很多 QGraphicsItem

> ID：16035930
> 
> 赞同：1
> 
> 时间：2013-04-16T11:32:34.843
> 
> 标签：c++, qt

我正在尝试使用 Qt Graphics Framework 绘制具有大量节点（2000+）的图形。使用`QGraphicsView`和`QGraphicsScene`我可以很容易地用这个方法画出大量的椭圆`addEllipse()`，但是改变项目的颜色`setBrush()`太慢了。我也尝试过使用`QGraphicsPixmapItem`然后切换像素图来改变颜色，但这也不起作用。你能给我任何建议如何做到这一点吗？使用 OpenGL 是获得更好性能的唯一方法吗？

非常感谢。

编辑：我没有画笔示例。稍后会发布。代码只是交换椭圆的画笔而已，

编辑：像素图示例（代码在 python 中与 PyQt）：

```
def startTest(self):
    self.n = 1000
    self.c = 1
    self.scene = QtGui.QGraphicsScene()
    self.scene.setSceneRect(0,0,500,500)
    self.graphicsView.setScene(self.scene)
    self.redPix = QtGui.QPixmap(5, 5)
    self.redPix.fill(QtGui.QColor(255,0,0))
    self.blackPix = QtGui.QPixmap(5, 5)
    self.blackPix.fill(QtGui.QColor(0,0,0))

    for i in range(0,self.n):
        temp = QtGui.QGraphicsPixmapItem(self.redPix)
        temp.setPos(random.uniform(10, 490),random.uniform(10, 490))
        self.scene.addItem(temp)

def updateNodes(self):

        if self.c:
            for i in self.scene.items():
                i.setPixmap(self.blackPix)
            self.c = 0
        else:
            for i in self.scene.items():
                i.setPixmap(self.redPix)
            self.c = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:52:13.883

好吧，可能它不会是真正受欢迎的答案.. 但根据我的经验，我认为 QGraphicsScene/View 方式不适用于具有 1000k+ 对象的东西。这是一个很棒的框架，它有很多不错的特性，但是它的设计方式使得它对于大量对象来说真的很慢。

你必须自己做的大量代码（如果你想用这么多对象获得不错的性能）/我的意思是剪辑/过滤/可能泛化/如果你自己制作依赖于任务的渲染核心，这真的太多了。

多年来，我经常使用 Qt，并尝试将 View/Scene 用于严肃的图形组件（不同的地图格式视图 SDK、2D 图形设计视图），每次我最终都使用自制的渲染引擎。

主要原因是 Qt 试图为您提供非常通用*的，并且它是处理图形对象的非常好的*方法。他们有很好的变换矩阵概念，*双*基坐标，常见的样式方法，但代价是他们缺少所有最常见的*重*图形视图优化原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:51:18.620

您是否尝试过使用方法的`brush`参数指定`addEllipse()`？

```
QBrush blueBrush = QBrush(Qt::blue);
QPen noPen;
scene.addEllipse(x, y, w, h, noPen, blueBrush); 
```

# java - SunToolkit.awtLock：是否需要在 EDT 上调用需要这种锁的代码

> ID：16035933
> 
> 赞同：8
> 
> 时间：2013-04-16T11:32:40.137
> 
> 标签：java, swing, awt

我正在调查死锁，并在线程转储中看到以下内容

```
at sun.awt.SunToolkit.awtLock(SunToolkit.java:229)
at sun.awt.X11.XRobotPeer.setup(Native Method)
- locked <0x00000000a633fbd0> (a java.lang.Class for sun.awt.X11.XRobotPeer)
at sun.awt.X11.XRobotPeer.<init>(XRobotPeer.java:24)
at sun.awt.X11.XToolkit.createRobot(XToolkit.java:683)
at java.awt.Robot.init(Robot.java:119)
at java.awt.Robot.<init>(Robot.java:77) 
```

这是由于调用`Robot robot = new Robot();`

这个调用需要一个`SunToolkit.awtLock`锁`new Robot()`（顾名思义，它由单线程的 AWT 使用。如果 EDT 上的某些东西也使用了这个锁（例如 Swing 组件），那么当我`Robot`在 EDT 之外创建它时，我遇到死锁的机会就会增加。

另一方面，正如在[这个问题](https://stackoverflow.com/q/10468432/1076463)中所讨论的那样，许多`Robot`方法被设计为在 EDT 上调用时抛出异常。如果您最好`Robot`在 EDT 上创建实例，这会很烦人。

存在同样的问题，`Toolkit.getDefaultToolkit().getScreenResolution()`因此无需只关注`Robot`类：

```
at sun.awt.SunToolkit.awtLock(SunToolkit.java:229)
at sun.awt.X11.XToolkit.getScreenResolution(XToolkit.java:999) 
```

所以我要澄清的是：

*   谁是那把锁的利益相关方？
*   该锁是否可能只是为了使 Swing/AWT 多线程（或至少多一点线程安全）而引入的，但推荐的方法是避免在 EDT 之后将该锁放在另一个线程上吗？
*   是否有任何官方的 Oracle/Sun 文档（类似于 Swing 中的并发指南）可供我查阅？我的谷歌技能让我失望了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T09:26:19.930

在此处查看 SunToolkit.java 的源代码：http: [//www.docjar.com/html/api/sun/awt/SunToolkit.java.html](http://www.docjar.com/html/api/sun/awt/SunToolkit.java.html) 第 208 行解释了 AWT_LOCK 的用途。

这是页面消失时的摘录：

> ```
> /** 
>  * The AWT lock is typically only used on Unix platforms to synchronize
>  * access to Xlib, OpenGL, etc.  However, these methods are implemented
>  * in SunToolkit so that they can be called from shared code (e.g.
>  * from the OGL pipeline) or from the X11 pipeline regardless of whether
>  * XToolkit or MToolkit is currently in use.  There are native macros
>  * (such as AWT_LOCK) defined in awt.h, so if the implementation of these
>  * methods is changed, make sure it is compatible with the native macros.
>  *   
>  * Note: The following methods (awtLock(), awtUnlock(), etc) should be
>  * used in place of: 
>  *     synchronized (getAWTLock()) {
>  *         ... 
>  *     }   
>  *   
>  * By factoring these methods out specially, we are able to change the 
>  * implementation of these methods (e.g. use more advanced locking
>  * mechanisms) without impacting calling code.
>  *   
>  * Sample usage:
>  *     private void doStuffWithXlib() {
>  *         assert !SunToolkit.isAWTLockHeldByCurrentThread();
>  *         SunToolkit.awtLock();
>  *         try {
>  *             ... 
>  *             XlibWrapper.XDoStuff();
>  *         } finally {
>  *             SunToolkit.awtUnlock();
>  *         }   
>  *     }   
>  */ 
> ```

# android - android捕获应用程序启动和退出

> ID：16035934
> 
> 赞同：0
> 
> 时间：2013-04-16T11:32:50.800
> 
> 标签：android, android-launcher

嗨，我正在做一个 sdk 项目。我需要在应用程序中跟踪时间。因为这是一个 sdk 项目，我不知道开始和退出活动，我无法从他们那里获得时间。使用应用程序类的用户必须将我的扩展应用程序的类添加到清单中的应用程序标记。

有没有办法捕捉应用程序的启动和退出？

# c - 在 OSX 上将 Mosquitto 与 gcc 链接

> ID：16035935
> 
> 赞同：1
> 
> 时间：2013-04-16T11:32:58.483
> 
> 标签：c, gcc, gcc-warning, llvm-gcc, mqtt

我是 Mosquitto 的新手，我想写一个简单的 C 客户端连接到 Mosquitto 的测试服务器：[http ://test.mosquitto.org/](http://test.mosquitto.org/)

这是简单 C 客户端的代码，它是 Mosquitto 网站上示例的 99.9%：http: [//pastie.org/private/orwicqjfjz8g8biurznca](http://pastie.org/private/orwicqjfjz8g8biurznca)

编辑1：

我按照评论写了一个makefile而不是做

```
gcc -o test test.c 
```

生成文件如下所示：

```
CC = gcc
CFLAGS = -I
DEPS = mosquitto.h

LIBS = -llibmosquitto

%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

make: test.c
    $(CC) -m32 -Wall -o $@ $^ $(CFLAGS) $(LIBS)

.PHONY: clean 
```

这是我得到的输出，这似乎是将 mosquitto 库与 gcc 链接起来的一些问题：

```
Undefined symbols for architecture i386:
  "_mosquitto_connect", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_connect_callback_set", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_destroy", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_lib_cleanup", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_lib_init", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_log_callback_set", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_loop", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_message_callback_set", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_new", referenced from:
  _main in cc6Blyda.o
  "_mosquitto_subscribe", referenced from:
  _my_connect_callback in cc6Blyda.o
  "_mosquitto_subscribe_callback_set", referenced from:
  _main in cc6Blyda.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
make: *** [make] Error 1 
```

注意：我使用自制软件安装 mosquitto，所以 lib 的路径是

```
/usr/local/Cellar/mosquitto/1.1/ 
```

感谢任何帮助！

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:54:46.890

我通过我的makefile中的一些试验错误解决了链接问题。

这是最终的 makefile 的样子，它不会产生任何链接问题：

```
CC = gcc

LIBS = -lmosquitto

%.o: %.c 
    $(CC) -c -o $@ $< 

make: test.c
    $(CC) -Wall -o test $^ $(LIBS)

.PHONY: clean 
```

谢谢

# php - Ajax 请求重定向到 index.html

> ID：16035937
> 
> 赞同：0
> 
> 时间：2013-04-16T11:33:08.547
> 
> 标签：php, javascript, jquery, asp.net, ajax

我编写了下面的代码来向链接发出 ajax 请求，如下面的代码所示。而不是使用 POST 请求进行 ajax 调用。页面通过地址栏中代码中的链接重定向到 index.html .. 为什么会这样？请帮忙

```
<script type="text/javascript" language="javascript">

$(document).ready(function() {

  $("#button").click(function() {
    $("#form1").validationEngine();
    if($('div input[type=text]').val() != "")
    {
      var textfield2=document.getElementById("textfield2").value;
      var textarea=document.getElementById("textarea").value;
      var urls="http://a_webite.com/pp.php?textfield2="+encodeURIComponent(textfield2)+"&textarea="+encodeURIComponent(textarea);
      //alert(url);
      $.ajax({
        type: "POST",
        url: urls,
        success: function(result) {
          $("#Sales_Body").empty().html("<h2>Your request has been received ");
        }
      });
    }
  }); 
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:35:21.373

`event`未定义。将其添加为单击处理程序的参数。

```
$("#button").click(function(event){
     event.preventDefault(); 
```

目前点击处理程序失败，我假设表单被正常提交，而不是通过 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:18:17.267

一种简单的方法是将按钮输入类型更改为按钮，而不是提交。

```
 <input type="button" value="Hit me /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:33:52.013

如果所有数据都通过 url 传递，为什么要将 type 设置为“POST”？您可以使用“GET”类型，仅将 url 设置为“ [http://a_webite.com/pp.php](http://a_webite.com/pp.php) ”并添加数据参数：

```
 $.ajax({
    type: "GET",
    url: "http://a_webite.com/pp.php",
    data: {'textfield2': $('#textfield2').val(), 'textarea': $('#textarea').val()},
    success: function(result) {
      $("#Sales_Body").empty().html("<h2>Your request has been received ");
    }
  }); 
```

# excel - 运行时错误 91 - 在 Excel 中使用饼图时未设置对象变量或块变量

> ID：16035938
> 
> 赞同：0
> 
> 时间：2013-04-16T11:33:11.793
> 
> 标签：excel, vba

我的代码：

```
Sub PieSourceData()
    Sheets("ReportSummary").ChartObjects("Chart 5").Activate
    Sheets("DataSheet").Select
    ActiveChart.SetSourceData Source:=Range("A245:B249")
End Sub 
```

它失败了：

```
ActiveChart.SetSourceData Source:=Range("A245:B249") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:37:40.527

罪魁祸首是这条线

```
 Sheets("DataSheet").Select 
```

如果您选择该工作表，那么图表如何处于活动状态；）

因此我总是建议避免使用`.Select`. 请参阅此[链接](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select/10718179#10718179)。

尝试这个

```
Sub PieSourceData()
    Sheets("ReportSummary").ChartObjects("Chart 1").Activate
    ActiveChart.SetSourceData Source:=Sheets("DataSheet").Range("A245:B249")
End Sub 
```

# asp.net-mvc - 无法在 ASP.NET MVC 项目中添加控制器

> ID：16035939
> 
> 赞同：2
> 
> 时间：2013-04-16T11:33:14.643
> 
> 标签：asp.net-mvc, entity-framework, visual-studio-2012, asp.net-mvc-controller

我正在尝试在我的 ASP.NET MVC 项目中添加一个控制器。

我使用的是 Entity Framework Code First (5.0)，当我右键单击项目中的*Controllers*文件夹并选择*Add Controller*时：

![在此处输入图像描述](https://i.stack.imgur.com/VprR9.png)

在使用实体框架和其他设置选择*具有读/写操作和视图的 MVC 控制器*后，我收到以下消息：

> 生成“{0}”时出错。尝试重建您的项目。

![在此处输入图像描述](https://i.stack.imgur.com/mMqLa.png)

## 更新

似乎我添加到的特殊构造函数`DbContext`导致了问题。注释掉构造函数后，它又恢复了，但是出现了这条消息：

![在此处输入图像描述](https://i.stack.imgur.com/JqIc3.png)

无论如何，我检查了活动日志并没有发现有关该问题的信息或发生时间线上的任何记录，如果您知道这是怎么回事，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:52:25.743

似乎我添加到的特殊构造函数`DbContext`导致了问题。在注释掉构造函数并重新编译后，它又恢复了。

也许我应该将构造函数的内容包装在一个在设计时跳过的条件语句中，同时注释掉对我来说就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T07:23:38.353

“在继续下一步之前构建应用程序。如果不构建应用程序，添加控制器时会出错。” “如果出现错误，您可能没有在开始添加控制器之前构建应用程序。” 您必须运行项目，概率。 [http://www.asp.net/mvc/overview/getting-started/introduction/accessing-your-models-data-from-a-controller](http://www.asp.net/mvc/overview/getting-started/introduction/accessing-your-models-data-from-a-controller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T10:44:50.583

`DbContext`添加控制器时只有一个空的子类。然后它会为你工作得很好......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T10:26:00.660

如果您使用的是 Windows 操作系统，请按 **CTRL + SHIFT + B**构建应用程序，然后再次尝试添加控制器

# lua - lua - 如何让小数四舍五入

> ID：16035944
> 
> 赞同：3
> 
> 时间：2013-04-16T11:33:34.700
> 
> 标签：lua, rounding

我目前正在使用此功能进行舍入：

```
function round(val, decimal)
  if (decimal) then
    return math.floor( (val * 10^decimal) + 0.5) / (10^decimal)
  else
    return math.floor(val+0.5)
  end
end 
```

该功能完美运行，除了当一个数字落在 0.5 上时，如 5.5 或 1000.5 或 7.5，我需要它向下舍入而不是向上舍入。为了实现这一点，我必须对函数进行哪些更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:16:32.783

```
function round(val, decimal)
  local exp = decimal and 10^decimal or 1
  return math.ceil(val * exp - 0.5) / exp
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:59:35.270

```
function round(val, decimal)
  local rndval = math.floor(val)
  local decval = val - rndval
  if decimal and decimal ~= 0 then
    decval = decval * 10 ^ decimal
    return rndval + (decval % 1 > 0.5 and math.ceil(decval) or math.floor(decval)) / 10 ^ decimal
  else
    return decval > 0.5 and rndval + 1 or rndval 
  end
end 
```

我的懒惰。无法访问解释器来测试它，但应该没问题。不知道，如果性能还可以...

编辑：在 LuaJIT 上，对该函数的 10 亿次调用大约需要半秒。在普通 Lua 上，它是每半秒 100 万次（Core i7/3610 移动版）。

# mdx - MDX 添加计算成员以获得平均值

> ID：16035945
> 
> 赞同：1
> 
> 时间：2013-04-16T11:33:35.497
> 
> 标签：mdx, average

我有一个工作查询，我想稍微改变一下。

工作查询为我提供了用户参与的每个活动的计算度量值。

由于在这个查询示例中，有 2 个计算值 0 和该用户参与的 2 个活动的每个 7，我应该能够转换查询以显示具有两个值的平均值的单个用户行，例如 3.5 。

这就是我卡住的地方。有谁知道如何将结果中的 [Day Diff Exposure to Download] 添加到 [Avg Day Diff...] 计算？

非常感谢您的帮助。

这是原始的工作查询：

```
with
member [measures].FirstEventDate as CDate(Head(NonEmpty([DIM DATE].[Date].[Date], ([Measures].[Count], [DIM USER].[Email].CurrentMember, [DIM CAMPAIGN].[Campaign].CurrentMember))).item(0).member_caption)
member [measures].[Day Diff Exposure to Download] as ([DIM EVENT].[Event].[Event Name].&[download], [measures].FirstEventDate) - ([DIM EVENT].[Event].[Event Name].&[exposure], [measures].FirstEventDate)
select
[measures].[Day Diff Exposure to Download] on columns,
NonEmpty (
    {([DIM USER].[Email].[User Email].&[100000@mail.com],
    [DIM CAMPAIGN].[CampaignTypeName].[Campaign Name])},
    [DIM EVENT].[Event].[Event Name].&[download]
) on rows
from [MyCube] 
```

这是我目前升级查询的失败尝试：

```
with
member [measures].FirstEventDate as CDate(Head(NonEmpty([DIM DATE].[Date].[Date], ([Measures].[Count], [DIM USER].[Email].CurrentMember, [DIM CAMPAIGN].[Campaign].CurrentMember))).item(0).member_caption)
member [measures].[Day Diff Exposure to Download] as ([DIM EVENT].[Event].[Event].&[download], [measures].FirstEventDate) - ([DIM EVENT].[Event].[Event].&[exposure], [measures].FirstEventDate)
member [measures].[Avg Day Diff] as
Avg(
    NonEmpty(
        {[DIM CAMPAIGN].[Campaign].[Campaign]},
        (
            [DIM USER].[Email].CurrentMember,
            [DIM EVENT].[Event].[Event].&[download]
        )
    ),
    [measures].[Day Diff Exposure to Download]
)
select
[measures].[measures].[Avg Day Diff] on columns,
NonEmpty (
    {[DIM USER].[Email].[Email].&[100000@mail.com]},
    [DIM EVENT].[Event].[Event].&[download]
) on rows
from [MyCube] 
```

不幸的是，目前尝试的查询没有返回值 3.5，而是返回 -13738.3333333。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:13:42.213

您可能还需要在 nonEmpty 集中指定度量值；就像是：

```
NonEmpty( [measures].FirstEventDate * { ... } ) 
```

# java - ehcache 如何确定“更改的数据”？

> ID：16035950
> 
> 赞同：0
> 
> 时间：2013-04-16T11:33:59.363
> 
> 标签：java, replication, ehcache

我相信 ehcache 只复制更改的数据（增量）？

我的问题是它如何计算增量？假设我有一个具有 5 个属性的 java 对象，其中只有一个被更改。该对象的类只实现了可序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:17:59.097

如果您询问 Ehcache 和 Hibernate 集成，则不会发送任何增量。发生的情况是 Ehcache 发送了一个包含对象缓存键的失效事件。

然后在远程节点上，该条目被刷新并在下一次请求时再次从数据库中重新加载。

# c - 如何使用 malloc 在 ANSI-C 中声明动态整数数组并将输入整数放入其中？

> ID：16035952
> 
> 赞同：1
> 
> 时间：2013-04-16T11:34:02.647
> 
> 标签：c, arrays, pointers, malloc, ansi

首先，我希望用户输入所需数组的大小。所以我正在使用：

```
int size;
scanf("&d",&size); 
```

现在我想使用指针和 malloc 函数创建一个整数数组。这就是我所做的：

```
int *p1 = (int*)malloc(sizeof(int)*size); 
```

据我了解，这就像使用：

```
int p1[size]; 
```

但是我如何像数组一样使用它呢？

**问题**1：现在我希望用户输入与他写入这个“数组”一样多的整数。但我不能使用 p[0] 因为它不是一个数组，它是一个指针。

**问题**2：我想将此数组“发送”到一个获取整数数组的函数。再说一次，这不是一个数组，我怎么能把它“给”给函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:43:06.297

**回答第一个问题：**

```
for(i = 0; i < size; i++ )
{
   scanf("%d",&p[i]); 
   /*p[i] is the content of element at index i and &p[i] is the address of element 
at index i */
} 
```

或者

```
for(i = 0; i < size; i++ )
{
   scanf("%d",(p+i)); //here p+i is the address of element at index i
} 
```

**回答第二个问题：**

要将此数组发送到函数，只需像这样调用函数：

```
function(p); //this is sending the address of first index of p

void function( int *p ) //prototype of the function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:36:09.133

*   问题 1：一维数组和指向正确分配内存的指针几乎是一回事。
*   问题 2：将数组传递给方法时，实际上是在传递该数组的第一个元素的地址

*数组实际上是指向数组第一个元素的指针*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:38:09.137

您可以使用`subscript`- 语法来访问指针的元素。

```
p1[3] = 5; // assign 5 to the 4th element 
```

但是，这个语法实际上被转换成以下

```
*(p1+3) = 5; // pointer-syntax 
```

对于第二个问题，定义一个函数并传递一个指针

```
int* getarray(int* p1, size_t arraysize){ } //define the function

int* values = getarray(p1, size); // use the function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-28T04:59:27.987

很抱歉打扰大家，但 Upasana 小姐是对的，这是使用动态数组的正确方法。通过 malloc 声明您的数组后，您可以直接将其完全用作数组，如下所示：

```
 for(int i = 0; i < size; i++ )
    {
       scanf("%d",p+i); 
       /*p+i denoting address of memory allocated by malloc */
    } 
```

第二个答案：现在只需将此地址传递给任何函数使用地址即可找到如下值：

```
function(int *p)
/* access as &p for first value &p+2 for second p+4 for third and so on*/ 
```

# html - 实际菜单后面的下拉 CSS 菜单（z-index）

> ID：16035953
> 
> 赞同：0
> 
> 时间：2013-04-16T11:34:05.413
> 
> 标签：html, css, drop-down-menu, z-index

我遇到隐藏在下一行菜单后面的子菜单的问题。 ![菜单](https://i.stack.imgur.com/wQFTD.png) 对比 ![子菜单打开](https://i.stack.imgur.com/YZfu1.png)

我搜索了很多主题和问题，基本上每个人都说我需要将 z-index > 100 添加到我的子菜单中。我在所有地方都尝试过，子菜单存在但没有任何效果。

你知道如何让它正常工作吗？

这是我的代码：

```
#header #nav{
    float:right;
    margin:0px;
    position:relative;
    z-index:100;
}

#header #nav > li {
    display:inline-block;
    margin:0;
    position:relative;
    z-index:100;
}

#header #nav > li > a{
    color:#727272;
    border:none;
    background:none;
    font-size:11px;
    font-weight:700;
    height:60px;
    line-height:59px;
    display:block;
    padding:0 15px;
    background:none center bottom;
    position:relative;
}

#header #nav > li > a:hover{
    color: #0073fe;
}

#nav li ul.sub-menu{
    width:210px;
    background:#fff;
    position:absolute;
    border:1px solid #ececec;
    border-top:2px solid #0073fe;
    margin:0;
    top:96%;
    padding:0 15px;
    display:none;
    -webkit-box-shadow:  0px 2px 50px 10px rgba(0, 0, 0, 0.05);
    box-shadow:  0px 2px 50px 10px rgba(0, 0, 0, 0.05);
    margin-top:2px;        
}

#nav li ul.sub-menu > span{
    position:absolute;
    top:-6px;
    left:30px;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 6px solid #0073fe;
}

#nav li ul.sub-menu > li{
    margin:0;
    width:100%;
    display:block;
}

#nav li ul li a{
    font-size:11px;
    font-weight:700;
    display:block;
    padding:7px 0px;
    color:#727272;
    border:none;
    border-bottom:1px solid #ececec;
}

#nav li ul li a:hover{
    color: #0073fe;
}

#nav li ul li:last-child a{
    border-bottom:none !important;
}

#nav li ul li ul.sub-menu{
    margin-left: 190px !important;
    margin-top: -35px !important;
}

.slogan{
    font-family: 'Open Sans', Helvetica, Arial, sans-serif;
    font-size:34px;
    line-height:35px;
    text-align:center;
    font-weight:300;
    letter-spacing: -0.01em;
    color:#000;
    padding:0px 30px 30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:47:54.563

所以你想要: `submenu > menu`; 意思是：`#nav li ul.sub-menu > #header/#nav`

问题是您将菜单设置为高 z-index 而不是子菜单（并导致：）`submenu < menu`。

z-index 定义了一个“设置一个层”，你的元素将在哪里，如果它设置得比另一个高，那么它将出现在它的顶部。

您需要删除 and 的 z-index `#header #nav`，`#header #nav>li`而是将高 z-index 放到`#nav li ul.sub-menu`.

```
#nav li ul.sub-menu {
    z-index: 50; //It doesn't have to be a hundred, 50 should do, or even 5...
} 
```

# jquery - 如何在另一个引导模式位置上显示引导模式对话框

> ID：16035955
> 
> 赞同：0
> 
> 时间：2013-04-16T11:34:18.280
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, modal-dialog

**如何在另一个引导模态上显示引导模态对话框** 我在模态按钮单击时有一个模态对话框 我打开另一个模态窗口，该窗口在该窗口之后和第一个模态上显示？我尝试使用 z-index 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:37:37.900

你应该看看这个回购：[https ://github.com/jschr/bootstrap-modal/](https://github.com/jschr/bootstrap-modal/)

它扩展了 Bootstrap'modal 插件以允许多个模式（和其他东西）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T12:20:26.127

添加这些 css 类：

```
 .first-level-dialog {
    z-index: 1060;
}

.second-level-dialog {
    z-index: 1040 !important;
} 
```

第一个添加到您希望在第一个计划中拥有的对话框容器（这个具有模态 css 类）（高于其他）。

最后为对话框事件添加处理程序：

```
$(document).on('shown.bs.modal', '#modalid', function (e) {
        $('.modal:not(.first-level-dialog)').addClass('second-level-dialog');
    });

    $(document).on('hide.bs.modal', '#modalid', function (e) {
        $('.modal').removeClass('second-level-dialog');
    }); 
```

作为您希望在第一个计划中拥有的模式的#modalid 设置 id（指定了第一级对话框 css 类的模式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T15:41:29.440

这个解决方案很脏，我的场景是模态中的表单通过 ajax 提交，如果响应迟到了，我想放置另一个叠加层和另一个模态 saiyng “对不起，我迟到了”

```
$('body').prepend('<div id="signup-box" class="ajax-is-late widget-box modal-dialog visible"><div class="modal-content"><div class="modal-body"><span style="font-size:25px; margin-left:20px;">bla bla bla...</span></div></div></div><div class="my-dirty-solution modal-backdrop fade in" style="z-index: 1041;"></div>'); 
```

如您所见，我正在创建的叠加层的 z 布局高于标准引导模式之一（1040）

```
<div class="my-dirty-solution modal-backdrop fade in" style="z-index: 1041;"></div> 
```

我添加的叠加层和模态都可以使用

```
$('.my-dirty-solution').remove(); 
```

你可以通过这种方式看到它的作用：

*   用 Chrome 打开页面
*   打开真正的引导模式
*   打开 Chrome 开发者控制台
*   粘贴我的代码并按 ENTER

请记住，这是一个非常肮脏和厚颜无耻的解决方案......;）

# mysql - Amazon RDS MySQL 实例执行速度非常慢

> ID：16035958
> 
> 赞同：32
> 
> 时间：2013-04-16T11:34:24.933
> 
> 标签：mysql, amazon-web-services, amazon-s3, phpmyadmin, amazon-rds

我已经在 Amazon EC2（新加坡地区）上发布了我的网站，并使用 MySQL RDS 实例进行数据存储。除了性能，一切都很好。

我似乎认为，我的所有查询，尤其是 select 语句，都执行得很慢。如果我在本地 PC 上检查此问题，它运行得非常好。但是当我试图从 RDS 实例中获取数据时，它非常慢。一些 select 语句需要 2-3 秒来获取数据。

我已经正确调整了所有表索引，并根据需要进行了规范化/反规范化。我已经对 RDS 自定义参数组（例如*max_connection*、*缓冲区*等）进行了所有必要的设置。我不知道我是否遗漏了一些东西，但这对我没有用 - 性能没有提高。

那么，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-01-08T15:52:59.007

值得注意的是，无论出于何种原因，RDS 中 MySQL 查询缓存默认是关闭的。本周，我们自己学会了这一点。

这无助于您的初始查询的性能，但总体上可能会加快速度。

要重新启用查询缓存：

1.  登录 RDS 控制台
2.  单击您的 RDS 实例以查看其详细信息
3.  编辑数据库参数组
4.  请务必同时设置`query_cache_size`和`query_cache_type`

（免责声明：我不是 DBA，所以我可能在这里遗漏了其他东西）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-15T16:01:51.320

重要的是让您的 RDS 和 EC2 实例不仅在同一个区域，而且在同一个可用区，以最大限度地减少延迟。

我在爱尔兰的 EC2 上托管了一个 API，并将数据库移动到美国弗吉尼亚州的一个 MySQL 集群，我们为另一个项目设置了该集群，每个 SQL 查询的往返都使 API 无法使用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-12-08T14:14:58.067

对我来说，这与 MySQL 无关，而是我所在的实例类型`t2.medium`。问题是我用完了 CPU 积分，因为数据库上的负载太高，余额一直下降，直到最后，我每小时获得的积分远远少于需要的积分。

这是我在 RDS CloudWatch 中的 CPU Credit Usage 下看到的内容：

[![在此处输入图像描述](https://i.stack.imgur.com/yyg1M.png)](https://i.stack.imgur.com/yyg1M.png)

如果您有同样的问题，可能是时候切换到不同的实例了。以下是实例类型列表：

[https://aws.amazon.com/rds/instance-types/](https://aws.amazon.com/rds/instance-types/)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T06:41:19.817

假设系统具有更高的读取率，可以通过以下方式提高 RDS MySQL 性能：

1.  使用更大的实例类型，它们具有更好的 NW 带宽。示例 AWS Quadruple EXL 带有 1,000 Mbps 带宽。
2.  使用 PIOPS 存储，您可以从 MySQL DB 中提取 16KB 的 12,500 IOPS
3.  如果执行大量读取，请添加一个或多个只读副本以提高读取性能
4.  应用标准做法，例如：调整查询、应用索引等

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-12T08:04:39.153

首先，我强烈建议使用查看这些查询

> 显示完整的进程列表

您可以在[SHOW FULL PROCESSLIST上阅读更多相关信息](http://dev.mysql.com/doc/refman/5.7/en/show-processlist.html)

这将显示每个查询花费的时间。

然后你可以使用

> 解释

你可以阅读更多关于它的[解释](http://dev.mysql.com/doc/refman/5.7/en/explain.html)

这将显示您是否需要对查询进行一些增强

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-25T09:45:05.307

您可以使用分析来检查查询在哪里花费时间。使用以下查询：

1.  设置分析=1
2.  执行您的选择查询
3.  显示个人资料

这将告诉您查询的状态以及查询花费的时间。如果分析返回的所有时间的总和小于查询的实际执行时间，那么可能是其他因素（如网络带宽）可能是导致它的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-01T17:00:01.023

我发现迁移到 RDS 后，我所有的数据库索引都消失了！它们没有与架构和数据一起迁移。确保您的索引在那里。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-24T16:15:17.467

始终应将 source 和 rds 部署在同一 AWS 可用区以降低网络延迟，并应在 VPC 中创建私有端点链接，以便 RDS 通过内部网络连接 RDS 端点，而不是通过 Internet 路由。

参考：[https ://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/vpc-interface-endpoints.html](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/vpc-interface-endpoints.html)

# php - PHP UTF8 preg_match 输出在实时服务器上不同

> ID：16035962
> 
> 赞同：0
> 
> 时间：2013-04-16T11:34:47.800
> 
> 标签：php, utf-8, preg-match, utf

当使用`preg_match('/^[\w-]+$/u', $value)`我的开发服务器 ( `5.3.15`) 时，对于变音符号返回 true。我的实时服务器 ( `5.3.2-1ubuntu4.19`) 返回 false。

我必须做些什么才能使实时服务器的行为与我的开发服务器相同？（不幸的是，我不能简单地更新 php 版本。）

两台机器上的代码完全相同。两者都以 UTF8 格式提供页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:46:31.433

`\w`被定义为`[A-Za-z0-9_]`iirc。

试试吧`preg_match('/^[\pL-]+$/u', $value)`。

[http://php.net/manual/en/regexp.reference.unicode.php](http://php.net/manual/en/regexp.reference.unicode.php)

# android - AnimatedSprite 内的 AnimatedSprite onAreaTouch 没有被移除 Andengine

> ID：16035964
> 
> 赞同：0
> 
> 时间：2013-04-16T11:35:02.733
> 
> 标签：android, andengine

我是 Andengine 的新手。我已经检查了关于 stackoverflow 的所有删除精灵问题，但我的情况有点不同。我有两个动画精灵。我正在制作简单的动画错误，它正在移动。当玩家点击虫子时，血液会从中流出。所以我有两个动画精灵，虫子和血。

在虫子精灵的 onAreaTouched 中，我将血精灵附在其中。一切正常，但动画后我没有从中删除血精灵。

### 注意：我也检查过 onAnimationEnd 功能

# 请帮忙！谢谢

```
final AnimatedSprite bug= new AnimatedSprite(10, 10, 48, 64, this.mBugTextureRegion, this.getVertexBufferObjectManager()){
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

            final AnimatedSprite blood= new AnimatedSprite(pSceneTouchEvent.getX(), pSceneTouchEvent.getY(), mBloodTextureRegion, this.getVertexBufferObjectManager());

            //removing bug
            scene.detachChild(this);

            blood.setScale(2);
            blood.animate(100, false);
            scene.attachChild(blood);
            //blood.dispose();
            //this.dispose();
            //this=null;

            if(blood.getCurrentTileIndex() == 6){
                runOnUpdateThread(new Runnable() {
                @Override                
                public void run() {
                    //face.dispose();

                    //scene.unregisterTouchArea(blood);
                    scene.detachChild(blood);

                }
               });                
            }

            return true;
        }
    };

 04-16 21:44:10.440: D/AndEngine(6272): FPS: 57.68 (MIN: 9 ms | MAX: 33 ms)
 04-16 21:44:11.361: I/ActivityManager(194): Starting: Intent {     act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.sonyericsson.home/.HomeActivity } from pid 194
 04-16 21:44:11.371: D/AndEngine(6272): PathModifierExample.onPause @(Thread: 'main')
 04-16 21:44:11.391: D/AndEngine(6272): PathModifierExample.onPauseGame @(Thread: 'main')
 04-16 21:44:11.451: I/WindowManager(194): Setting rotation to 0, animFlags=1
 04-16 21:44:11.451: I/ActivityManager(194): Config changed: { scale=1.0 imsi=410/6 loc=en_US touch=3 keys=1/1/2 nav=3/1 orien=1 layout=34 uiMode=17 seq=133 themeResource=null}
 04-16 21:44:11.631: W/IInputConnectionWrapper(6272): showStatusIcon on inactive InputConnection
 04-16 21:44:11.822: I/ActivityManager(194): No longer want com.google.android.gm (pid 2712): hidden #16
 04-16 21:44:11.852: W/SurfaceComposerClient(194): Destroying surface while a transaction is open. Client 0x1954c0: destroying surface 135, mTransactionOpen=1
 04-16 21:44:13.944: D/dalvikvm(194): GC_EXPLICIT freed 246K, 44% free 6159K/10887K, external 5271K/6582K, paused 117ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:41:14.587

==在下面的评论之后编辑==我认为条件语句

```
 if(blood.getCurrentTileIndex() == 6){ 
```

只被调用一次，就在加血之后。如果血液当时不在瓷砖索引 6 上，它将永远不会被移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:35:28.770

好，我知道了。可能对其他人有帮助。

```
 final AnimatedSprite bug= new AnimatedSprite(10, 10, 48, 64, this.mBugTextureRegion, this.getVertexBufferObjectManager()){
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

            final AnimatedSprite blood= new AnimatedSprite(pSceneTouchEvent.getX(), pSceneTouchEvent.getY(), mBloodTextureRegion, this.getVertexBufferObjectManager());
            //final EngineLock engineLock = this.getEngineLock();
            //engineLock.lock();

            /* Now it is save to remove the entity! */
            scene.detachChild(this);

            scene.attachChild(blood);
            blood.setScale(2);
            blood.animate(100, false , new IAnimationListener (){

                @Override
                public void onAnimationStarted(
                        AnimatedSprite pAnimatedSprite,
                        int pInitialLoopCount) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationFrameChanged(
                        AnimatedSprite pAnimatedSprite, int pOldFrameIndex,
                        int pNewFrameIndex) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationLoopFinished(
                        AnimatedSprite pAnimatedSprite,
                        int pRemainingLoopCount, int pInitialLoopCount) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationFinished(
                        AnimatedSprite pAnimatedSprite) {
                    // TODO Auto-generated method stub
                    runOnUpdateThread(new Runnable() {
                        @Override
                        public void run() {
                            scene.detachChild(blood);
                        }
                });

                }});

            return true;
        }
    }; 
```

# javascript - WordPress 的 JavaScript 依赖管理？

> ID：16035968
> 
> 赞同：1
> 
> 时间：2013-04-16T11:35:18.120
> 
> 标签：javascript, wordpress, requirejs, dependency-management

我将编写一个小型图表库（具有条形图、饼图、折线图等图表类型）以在 WordPress 上下文中使用。该库可能依赖于外部库，例如 D3.js、underscore.js 等。理想情况下，我不必在每个页面上包含所有图表和所有依赖项。

管理跨 WordPress 页面和帖子的这些图表的实例化以及它们的依赖项加载的好方法是什么？Require.js 示例、原生 WP 加载资源或类似的非常受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:05:53.703

查看 WordPress 的[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)和[wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)函数。这是将脚本和样式链接到页面的推荐方法。您可以创建一个自定义函数，使用条件语句检查正在显示的页面模板或页面，并相应地加载相关脚本。这样您就不会在每个页面上加载它们。

```
function load_my_scripts() {
    if (is_page('Charts')) {
        wp_register_script('custom_script', 'path/to/script/',, '1.0', true);
        wp_enqueue_script('custom_script')
    }
}
add_action( 'wp_enqueue_scripts', 'load_my_scripts' ); 
```

注意：该`wp_enqueue`函数还有一个依赖参数。有关更多详细信息，请参阅 Codex 页面。最后的 'true' 告诉它在页脚中加载脚本，在结束`</body>`标记之前

# qt - 在异构数据层次结构的不同视图之间拖放

> ID：16035969
> 
> 赞同：3
> 
> 时间：2013-04-16T11:35:18.117
> 
> 标签：qt, design-patterns, model-view-controller, user-interface, hierarchy

我有一个分层数据结构，可以在几个 Qt 视图（或小部件）中可视化。数据层次结构由异构元素类型组成，例如：

```
House
 |- Floor
 |   |- Room
 |   |   |- Window
 |   |   |- ...
 |   |- Room
 |   |   |- ...
 |- ... 
```

所有元素（House、Floor、Room、...）都有可以显示的属性。请注意，这是一个简化的示例。层次结构由各种视图绘制。例如，模板列表中的房间标识符（QListView/Widget）、自定义视图（每个元素的 QWidget 子类的层次结构）、编辑楼层属性的详细视图（QWidget 子类或 QWizard）。

也可以在多个实例之间拖放元素。例如将房间搬到不同的楼层。可以将特定楼层声明为模板并从模板列表中拖动楼层，例如自定义视图（组成房屋的位置）。

Qt 使用[模型/视图架构](http://qt-project.org/doc/qt-4.8/model-view-programming.html)来分离数据、模型和视图。因为我有完全不同类型的视图，我假设每个视图都需要一个对应的模型。在我的自定义层次结构视图中，每个元素都有自己的可视化，因此层次结构存在（但不应该存在）三个：数据层次结构、模型层次结构和视图层次结构。这变得非常混乱，因为如果一个元素被拖放、删除或复制，每个层次结构都必须更新。更好的方法是[Presentation-Abstraction-Control](http://en.wikipedia.org/wiki/Presentation%E2%80%93abstraction%E2%80%93control)图案。但是，PAC 不适用，因为必须设置 QWidget 的父级，才能将子级嵌入到父级视图中。因此，QWidget 不能引用负责对层次结构建模的代理。

在我看来，Qt 在表示同类数据类型（如字符串）的列表、表格和树方面非常出色。在我的例子中，每个元素都有一组单独的属性，不能简单地以表格的形式表示。在这个[讨论](http://qt-project.org/forums/viewthread/15462)中，不鼓励将方形钉子强行插入圆孔中。意思是，不要在表格表示中强制任何设计。

我的问题的核心是将以下功能统一在一个设计概念中： 具有不同细节级别的分层数据的可视化。支持视图之间的拖放，复制数据并生成适当的模型/视图组件。支持视图中的拖放，这会影响数据、模型和视图层次结构（我想避免实现三次）。我不能为一个包含所有子组件的房子提供一个模型，因为地板和房间太复杂了。我发现为一个拖放、删除或复制操作管理三个（或更多）层次结构很笨拙。

是否有最佳实践、设计模式或解决我的问题的不同方法？Qt可以解决这个问题吗？

我感谢每一个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:28:55.380

I had a similar issue for a while with my hierarchical structure. Everything in Qt's model-view-delegate architecture hinges on how you organize your data and how complex you're willing to get. For very simple applications, it makes sense to implement things from an item-based approach, editing item display at the View level. This gets very messy very fast.

Sounds like you're willing to get pretty complex, so I'd recommend taking a model-based approach. You can control nearly everything at the model level, including some basic display elements, data organization, and (most importantly) heirarchies.

I found it helpful when getting started to have my objects inherit [QStandardItem](http://doc-snapshot.qt-project.org/4.8/qstandarditem.html) and subclassing [QStandardItemModel](http://doc-snapshot.qt-project.org/4.8/qstandarditemmodel.html), since `QStandardItem` already had the parent-child hierarchy and indexing set up for me. I like incrementing `Qt::UserRole` and assigning an `enum` value to each of my custom data types. For example:

```
enum FloorProperties
{
    DAT_CARPETING = Qt::UserRole +100,
    DAT_AREA = Qt::UserRole +101,
    DAT_FLOORNUM = Qt::UserRole +102
} 
```

Even if you don't want to associate a stored value with every data role (using the convenient [QStandardItem::setData()](http://doc-snapshot.qt-project.org/4.8/qstandarditem.html#setData)), you can customize [QStandardItemModel::data()](http://doc-snapshot.qt-project.org/4.8/qstandarditemmodel.html#data) to return a computed value, stored value, whatever. Customizing *the model* allows you to think about each item as an *object*, rather than a single cell in the table/list.

The standard views should give you most of what you need on a general basis. Customize display for certain data types (Floors, Windows, integers, strings, etc) using delegates. Hope that makes some sense.

# java - JUNIT 条件测试可能吗？

> ID：16035973
> 
> 赞同：3
> 
> 时间：2013-04-16T11:35:26.860
> 
> 标签：java, junit

我有一系列数据，每个数据都包含 info_A 和 info_B。我想：

```
if(info_A) {
  run Test A
} else if(!info_A) {
  run Test B
} 
```

只有实际运行的测试才会显示在 JUnit GUI 树中，这一点非常重要。我怎样才能做到这一点？

以下解决方案**不起作用**：

*   如果我使用`Assume.assumeTrue(conditon)`，我可以`Ignore`进行测试，但它*仍然显示*为通过测试。
*   这样做：
    `Result result = JUnitCore.runClasses(TestStep1.class);`
    导致正确的结果，*但未*构建 JUnit 树。
*   使用@Catagories 也会显示*失败*的测试，这也是我不想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:43:26.993

您可以[使用`Assume`](http://junit.sourceforge.net/javadoc/org/junit/Assume.html)有条件地打开/关闭测试：

> 一组方法，可用于陈述有关测试有意义的条件的假设。失败的假设并不意味着代码被破坏，而是测试没有提供有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:53:17.103

您可以使用 JUnit 规则来做到这一点。

这里有一整篇博客文章专门针对您的问题[，](http://www.mikereedell.com/2011/12/15/JUnit-Conditional-Ignore-Using-Rules.html)但简而言之，您可以执行以下操作：

1.  创建一个实现`org.junit.rules.TestRule`接口的类。该接口包含以下方法：
    `Statement apply(Statement base, Description description);`
    参数`base`实际上是您的测试，您可以通过调用来运行它`base.execute()`——好吧，该`apply()`方法实际上返回一个`Statement`匿名实例来执行此操作。在您的匿名`Statement`实例中，您将添加逻辑以确定是否应该运行测试。请参阅下面的实现示例，该示例`TestRule`除了执行您的测试之外什么都不做——是的，它并不是特别简单。
2.  创建`TestRule`实现后，您需要将以下行添加到您的 JUnit 测试类中： 请记住，该字段*必须*是公共的。
    `@Rule
    public MyTestRuleImpl conditionalTests;`

 *就是这样。祝你好运——正如我所说，你可能需要稍微破解一下，但我相信博文中有相当多的解释。否则，互联网上应该有其他信息（或在 JUnit 源代码中）。

这是一个不做任何事情的 TestRule 实现的快速示例。

```
public abstract class SimpleRule implements TestRule {
    public Statement apply(final Statement base, final Description description) {
        return new Statement() {
            public void evaluate() throws Throwable {
                try {
                    base.evaluate();
                } catch (Throwable t) { 
                    t.printStackTrace();
                }
            }
        };
    }
} 
```*

# wordpress - 显示具有限制帖子数量的特定帖子格式

> ID：16035976
> 
> 赞同：0
> 
> 时间：2013-04-16T11:35:29.047
> 
> 标签：wordpress, loops, post, format

我在 Wordpress 中创建了一个循环，条件如下：

1.  显示特定的帖子格式（例如：视频）

2.  限制帖子数量。在这种情况下，我只想显示 2 个帖子。

这是我的代码：

```
 <?php $i = 1; if (have_posts()) : while (have_posts() && $i < 3) : the_post(); ?>
 <?php get_template_part( 'content-video', get_post_format() ); ?>
 <?php $i++; endwhile; ?>
 <?php else : ?>
 <?php get_template_part( 'content', 'none' ); ?>
 <?php endif; ?> 
```

我已经有了文件名 content-video.php。

不幸的是，循环不起作用。仅显示第一个帖子，而不是带有 content-video.php 模板的特定帖子（视频帖子格式）。

感谢任何帮助或替代代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:21:34.393

最好的方法是从查询中获取“视频”帖子格式的帖子，但我不确定如何:)

作为一种解决方法，您可以在循环内执行此操作：

```
 if (!has_post_format('video'))
   continue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:03:02.570

我不确定我要在这里写什么，但这只是我对您的代码的评论：

1.  我认为你的`if else while`陈述包装不好。如果你的方法是正确的，你最后会错过一个`endif`。

2.  为什么在代码中使用`i`变量，因为您可以在 WP 中自定义任何查询，特别是对于使用参数的帖子数`posts_per_page`。

3.  为什么不使用里面的循环`content-video.php` 并且只写：`get_template_part('content-video', get_post_format());`就像在`single.php and loop-single.php`wordpress 安装提供的主题中一样（二十个主题）。

如果我错了，请不要投反对票。祝你好运

# vector - 验证点是否在椭圆锥内

> ID：16035977
> 
> 赞同：0
> 
> 时间：2013-04-16T11:35:30.813
> 
> 标签：vector, 3d, geometry

我正在尝试找到一种方法来确定 3D 点`P(x,y,z)`是否位于带有椭圆底的圆锥体的侧面。

我已经给出了顶点`V(x,y,z)`、底的中心 、`B(x,y,z)`椭圆的短轴和长轴的长度`a`和`b`，形成了圆锥的底。

有没有办法得到一个描述圆锥的解析方程？我找到[了这个](https://stackoverflow.com/questions/10768142/verify-if-point-is-inside-a-cone-in-3d-space)答案，它处理了圆锥体的问题，但是我无法将它扩展到解决我的问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:23:41.623

取通过 V 和 P 的线，求这条线与锥底平面的交点。测试此交点是否在基本椭圆内。

编辑：我刚刚扩展了评论 - 托马斯所说的。

# linux - crontab 没有运行

> ID：16035983
> 
> 赞同：3
> 
> 时间：2013-04-16T11:35:58.677
> 
> 标签：linux, cron

我的 crontab 没有运行，我试图找出原因。我在其中创建了一个符号`/etc/cron.d`链接`/var/www/mysite.crontab`

```
user@ip-xxxxxxxxxx:/etc/cron.d$ ll
total 20
drwxr-xr-x  2 root root 4096 Apr 11 03:48 ./
drwxr-xr-x 96 root root 4096 Apr 16 00:50 ../
lrwxrwxrwx  1 root root   30 Apr 11 03:47 mysite.crontab -> /var/www/mysite.crontab
-rw-r--r--  1 root root  124 Feb 27  2012 drupal7
-rw-r--r--  1 root root  544 Sep 12  2012 php5
-rw-r--r--  1 root root  102 Apr  2  2012 .placeholder 
```

实际的 cron 文件是...

```
#Purge old deals
4 1 * * * www-data wget -q -O- http://www.mysite.com/cron/clean > /dev/null 2>&1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:10:44.457

奇怪的是，问题出在文件名上。不允许在目录中使用 a`.`作为文件名的一部分`/etc/cron.d`。

其逻辑在[`database.c`](http://anonscm.debian.org/gitweb/?p=pkg-cron/pkg-cron.git;a=blob;f=database.c;h=b05e3b6679c38873e02298f5d2f5a2429bc3f2bb;hb=refs/heads/master#l531)文件中，在函数中`valid_name`。将文件重命名为 mysite_crontab 之类的名称应该可以解决问题。

一般来说，文件名可能只是一个简单的名称`mysite`，它在这个目录中的事实意味着它已经是一个 cron 文件。

指向的文件必须由 root 拥有，在手册页中说明了该`/etc/cron.d`目录的支持：

> `/etc/cron.d`cron 守护程序本身包含对 的支持 ，它将这个位置作为系统范围的 crontab 假脱机处理。这个目录可以包含任何文件定义任务遵循使用的格式`/etc/crontab`，即与用户 cron spool 不同，这些文件必须提供用户名来运行任务定义中的任务。
> 
> 此目录**中的文件必须由 root 拥有**，不需要可执行（它们是配置文件，就像`/etc/crontab`）并且必须符合 run-parts(8) 使用的相同命名约定：它们必须仅由 upper - 和小写字母、数字、下划线和连字符。这意味着它们**不能包含任何点**。如果将`-l`选项指定为 cron（此选项可以通过 设置，见下文），则它们必须符合 LSB 命名空间规范，与run-parts`/etc/default/cron`中的选项完全相同。`--lsbsysinit`
> 
> 此功能的预期目的是允许需要比`/etc/cron.{hourly,daily,weekly,monthly}`目录更精细地控制其调度的软件包将 crontab 文件添加到 /etc/cron.d。此类文件应以提供它们的软件包命名。

# jakarta-ee - 将两个参数传递给命名查询

> ID：16035984
> 
> 赞同：3
> 
> 时间：2013-04-16T11:36:00.283
> 
> 标签：jakarta-ee, jpa, ejbql

我对我的实体“干预”有以下命名查询：

```
 @NamedQuery(name = "Intervention.findNextMission", query = " SELECT i FROM Intervention  i       WHERE i.heureDebut> :DateToBeSpecified and i.idAgent= :idAgent")` 
```

我不知道如何通过传递两个参数在我的代码中调用此查询：日期、ID。通常它应该是这样的：

```
List <Intervention> ListOfInterventions = em.createNamedQuery("Intervention.findNextMission").setParameter().getResultList(); 
```

在 setParameter() 的括号之间放什么？

这里遵循我的实体干预的代码：

```
 @Entity
@Table(name = "intervention")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Intervention.findAll", query = "SELECT i FROM Intervention i"),
    @NamedQuery(name = "Intervention.findByIdIntervention", query = "SELECT i FROM Intervention i WHERE i.idIntervention = :idIntervention"),
    @NamedQuery(name = "Intervention.findByHeureDebut", query = "SELECT i FROM Intervention i WHERE i.heureDebut = :heureDebut"),
    @NamedQuery(name = "Intervention.findByHeureFin", query = "SELECT i FROM Intervention i WHERE i.heureFin = :heureFin"),
    @NamedQuery(name = "Intervention.findNextMission", query = " SELECT i FROM Intervention i WHERE i.heureDebut> :DateToBeSpecified and i.idAgent= :idAgent")})
public class Intervention implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "IdIntervention", nullable = false, length = 50)
    private String idIntervention;
    @Basic(optional = false)
    @NotNull
    @Column(name = "HeureDebut", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date heureDebut;
    @Basic(optional = false)
    @NotNull
    @Column(name = "HeureFin", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date heureFin;
    @Lob
    @Size(max = 65535)
    @Column(name = "NotesGeneral", length = 65535)
    private String notesGeneral;
    @JoinColumn(name = "IdValidation", referencedColumnName = "IdValidation", nullable = false)
    @ManyToOne(optional = false)
    private Tablevalidation idValidation;
    @JoinColumn(name = "IdNatureIntervention", referencedColumnName =  "IdNatureIntervention", nullable = false)
    @ManyToOne(optional = false)
    private Tablenatureintervention idNatureIntervention;
    @JoinColumn(name = "IdAgent", referencedColumnName = "IdAgent", nullable = false)
    @ManyToOne(optional = false)
    private Agent idAgent;
    @JoinColumn(name = "RefContrat", referencedColumnName = "RefContrat", nullable = false)
    @ManyToOne(optional = false)
    private Projet refContrat;

    public Intervention() {
    }
    //getters and setters 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:44:43.833

`setParameter`接受`(int position,Object value)`或 `(String parameterName,Object value)`。因此，您的代码可能如下所示：

```
Date aDate=....
Long anId=....   
List ListOfInterventions = em.createNamedQuery("Intervention.findNextMission")
  .setParameter("DateToBeSpecified",aDate,avax.persistence.TemporalType,DATE)
  .setParameter("idAgent",anId).getResultList(); 
```

请注意，当您使用 a 时，`Date`您应该指定`TemporalType`预期的。

# c# - 3 灵活的父 div 中的灵活 div

> ID：16035987
> 
> 赞同：1
> 
> 时间：2013-04-16T11:36:10.993
> 
> 标签：c#, asp.net, html, css

我试图让 3 个灵活的图像水平排列并保持在具有灵活背景的灵活 div 容器的范围内，

容器的背景和 3 个图像都应该在位置上保持相互关联，以便它们始终在彼此之上。它们应该随着浏览器窗口的大小而变大和变小，但宽度不超过 800 像素。

我遇到的问题是背景和页脚向左猛击，按钮 div 向右移动。

[我的 JSFIDDLE](http://jsfiddle.net/trapline/ZBJPF/2/)

HTML：

```
<div id="container">
<div id="footer">
    <div id="left">
        <input type="image" name="MyLeftButton" id="MyLeftButton" class="imgstretch" src="Images/MyLeftImage.png" style="border-width:0px;">
    </div>
    <div id="middle">
        <input type="image" name="MyMiddleButton" id="MyMiddleButton" class="imgstretch" src="Images/MyMiddleImage.png" style="border-width:0px;">
    </div>
    <div id="right">
        <input type="image" name="MyRightButton" id="MyRightButton" class="imgstretch" src="Images/MyRightImage.png" style="border-width:0px;">
    </div>
  </div>
</div> 
```

CSS：

```
#container {
margin: 0em auto 0em auto;
width: 100%;
max-width: 800px;
}

#footer {
width: 100%;
max-width: 800px;
max-height: 80px;
float: left;
text-align: center;
position: fixed;
bottom: 0em;
background-color: #009FC1;
}

#left {
float: left;
max-height: 80px;
max-width: 294px;
width: 36%;
margin-left: 20px;
display: inline-block;
background-color: #CCCCCC;
}

#middle {
max-height: 80px;
width: 25%;
float: left;
max-width: 202px;
display: inline-block;
background-color: #889FC1;
}

#right {
max-height: 80px;
max-width: 294px;
width: 36%;
float: left;
display: inline-block;
background-color: #9999DD;
}

.imgstretch {
width:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:02:49.100

你有几件事正在发生。

1）页脚设置为固定位置，使其忽略父元素并将自身固定到窗口。我不知道这是否是您的布局问题，但需要注意。

2) 您在已经为其定义类的元素上设置了内联样式。似乎没有必要。

3）您的尺寸计算与您的百分比和像素有关。36% 应该是 (0.36 * 800)，它会显示为 288 像素，而不是 294 像素，然后加上 20 像素的边距。

我已经叉了你的小提琴。 [http://jsfiddle.net/ZBJPF/8/](http://jsfiddle.net/ZBJPF/8/)

```
html {
    margin: 0;
    padding: 0;
}
body {
    margin: 0;
    padding: 0;
}
#container {
    margin: 0 auto;
    width: 100%;
    max-width: 800px;
}
#footer {
    width: 100%;
    max-width: 780px;
    max-height: 80px;
    margin: 0 auto;
    padding-left: 20px;
    text-align: center;
    position: fixed;
    bottom: 0;
    background-color: #009FC1;
}
.footer-element-lg {
    float: left;
    width: 36%;
    max-width: 280px; 
    position: relative;
}
.footer-element-sm {
    float: left;
    width: 28%;
    max-width: 220px;
    position: relative;
}
#left {
    background-color: #CCCCCC;
}
#middle {
    background-color: #889FC1;
}
#right {
    background-color: #9999DD;
}
.imgstretch {
    width:100%;
    border: none;
}

<div id="container">
    <div id="footer">
        <div id="left" class="footer-element-lg">
            <input type="image" name="MyLeftButton" id="MyLeftButton" class="imgstretch" src="Images/MyLeftImage.png">
        </div>
        <div id="middle" class="footer-element-sm">
            <input type="image" name="MyMiddleButton" id="MyMiddleButton" class="imgstretch" src="Images/MyMiddleImage.png">
        </div>
        <div id="right" class="footer-element-lg">
            <input type="image" name="MyRightButton" id="MyRightButton" class="imgstretch" src="Images/MyRightImage.png">
        </div>
    </div>
</div> 
```

为了连续性，我删除了 20px 的边距并将间距设置为 20px 的填充。

# memory-management - 其他内存区域（堆栈和堆除外）？

> ID：16035990
> 
> 赞同：1
> 
> 时间：2013-04-16T11:36:15.710
> 
> 标签：memory-management, heap-memory, stack-memory

我知道[Stack](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)和[Heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)的基础知识，但是 PC 内存中是否还有其他区域可供程序访问和存储临时数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:45:02.320

通常，您在堆栈上分配小型临时变量。您从堆中请求内存以获得更大的块。但您也可以[将文件映射到内存中](http://en.wikipedia.org/wiki/Memory-mapped_file)。

下面是按种类表示的系统内存。
**资料来源：**这篇解释得很好的文章：[理解记忆](http://www.ualberta.ca/CNS/RESEARCH/LinuxClusters/mem.html)应该回答你的大部分问题。

![在此处输入图像描述](https://i.stack.imgur.com/3pUZz.png)

# hadoop - 将 mahout 集成到 solr 时出错

> ID：16035991
> 
> 赞同：2
> 
> 时间：2013-04-16T11:36:18.143
> 
> 标签：hadoop, solr, mahout

我正在尝试将 mahout 集成到 solr 中（使用 updateRequestProcessor 链）但是每当我尝试初始化 classifierContext 时，都会出现以下错误。

信息：模型路径：/home/bayes-model

```
java.lang.IllegalStateException: /home/bayes-model/trainer-weights/Sigma_j/part-*
    at org.apache.mahout.common.iterator.sequencefile.SequenceFileDirIterable.iterator(SequenceFileDirIterable.java:79)
    at org.apache.mahout.classifier.bayes.SequenceFileModelReader.loadFeatureWeights(SequenceFileModelReader.java:72)
    at org.apache.mahout.classifier.bayes.SequenceFileModelReader.loadModel(SequenceFileModelReader.java:46)
    at org.apache.mahout.classifier.bayes.InMemoryBayesDatastore.initialize(InMemoryBayesDatastore.java:72)
    at org.apache.mahout.classifier.bayes.ClassifierContext.initialize(ClassifierContext.java:44)
    at solr.mypkg.CategorizeDocumentFactory.init(CategorizeDocumentFactory.java:67)
    at org.apache.solr.core.SolrCore.createInitInstance(SolrCore.java:449)
    at org.apache.solr.core.SolrCore.initPlugins(SolrCore.java:1569)
    at org.apache.solr.update.processor.UpdateRequestProcessorChain.init(UpdateRequestProcessorChain.java:57)
Caused by: javax.security.auth.login.LoginException: unable to find LoginModule 
class: org.apache.hadoop.security.UserGroupInformation$HadoopLoginModule
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:808)
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186)
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)
    at javax.security.auth.login.LoginContext.login(LoginContext.java:579)
    at org.apache.hadoop.security.UserGroupInformation.getLoginUse 
```

我的代码如下： params = SolrParams.toSolrParams((NamedList) args);

```
BayesParameters p = new BayesParameters();
String modelPath = params.get("model");
File file=new File(modelPath);

p.set("basePath",file.getAbsolutePath());
LOG.info("model path :"+file.getAbsolutePath());

p.set("classifierType","bayes");
p.set("dataSource","hdfs");

Datastore ds = new InMemoryBayesDatastore(p);
Algorithm alg = new BayesAlgorithm();
ctx = new ClassifierContext(alg,ds);
ctx.initialize(); 
```

可能是什么原因？

# mysql - 在mysql中使用字符串中的like搜索数字

> ID：16035994
> 
> 赞同：0
> 
> 时间：2013-04-16T11:36:23.990
> 
> 标签：mysql, sql

字段值 - 29,21,30,28,32,35,49,50,137

```
SELECT *
FROM `smartspace_pickups`
WHERE `cat_id` LIKE '%37%'    
LIMIT 0 , 30 
```

我有一个字段，其中 id 以逗号分隔，现在我尝试使用上述查询获取数据，但它给了我 ID 为 137 和 371 的值。我只想要字符串中 ID 为 37 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:39:11.790

```
SELECT *
FROM `smartspace_pickups`
WHERE FIND_IN_SET('37',`cat_id`)
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:39:38.863

您可以使用`FIND_IN_SET(str,strlist)`

```
SELECT *
FROM `smartspace_pickups`
WHERE FIND_IN_SET('37', `cat_id`)  > 0
LIMIT 0 , 30 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:45:34.757

使您的 ids 字段像这样（在开头和结尾添加逗号）

```
,29,21,30,28,32,35,49,50,137, 
```

并将您的查询更改为

```
LIKE '%,37,%' 
```

# sql - 在 VBA ACCESS 中更新表

> ID：16035995
> 
> 赞同：3
> 
> 时间：2013-04-16T11:36:24.183
> 
> 标签：sql, ms-access, vba

我需要帮助解决我的 vba 更新语句问题：

在我的表单中，我有一个单击表单，当我单击它时执行此过程：

```
Dim strSQL As String
 Dim rst As New ADODB.Recordset

  strSQL = "UPDATE dbo.Firma_test SET Fax = " & Me![subforma_companie].Form!fax & _
          "[E-mail] = " & Me![subforma_companie].Form!email & _
          "WHERE Company_Code = " & Me![subforma_companie].Form!Cod 
```

当我执行时，我告诉我他没有看到电子邮件字段，我该怎么办？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:38:39.167

`WHERE`子句前需要一个空格：

```
strSQL = "UPDATE dbo.Firma_test SET Fax = " & Me![subforma_companie].Form!fax & _
      ", [E-mail] = '" & Me![subforma_companie].Form!email & _
      "' WHERE Company_Code = " & Me![subforma_companie].Form!Cod 
```

此外，您可能需要考虑某种形式的预防措施，`SQL Injection`以防万一用户`DROP TABLE db.Firma_test`输入`subforma_companie form`

# c# - 除单个控件外，使背景变黑

> ID：16035999
> 
> 赞同：1
> 
> 时间：2013-04-16T11:36:35.663
> 
> 标签：c#, .net, wpf, vb.net, xaml

我有这个：

```
<Window x:Class="MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <StackPanel Orientation="Horizontal">
            <StackPanel Width="100" Margin="20">
                <CheckBox x:Name="cbFoo1" Content="Foo"/>
                <TextBlock Text="Foo"/>
                <TextBox />
            </StackPanel>
            <StackPanel Width="100" Margin="20">
                <CheckBox x:Name="cbFoo2" Content="Foo"/>
                <TextBlock Text="Foo"/>
                <TextBox />
            </StackPanel>
        </StackPanel>
        <Rectangle Fill="#BF000000" x:Name="rOverlay"/>
    </Grid>
</Window> 
```

我想制作一个`foo`带有参数的函数，`argControls()`它可以`rOverlay`覆盖窗口中的每个控件，除了`argControls()`. 有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:05:07.753

## 选项 1 - 抽奖顺序

虽然有点小技巧，但完成此操作的最简单方法可能是将您希望覆盖的控件放置在矩形之前，并将您希望在矩形之后可见的控件放置。

更好的一步（而不是黑客）将改为使用该`Panel.ZIndex`属性。这允许您控制 UI 元素的绘制顺序，而不管它们的定义顺序如何。这可以通过`Panel.ZIndex`如下设置来实现：

*   rOverlay 到某个任意值（如 1）
*   控件被覆盖到低于 rOverlay 的东西（如 0）
*   控件对高于 rOverlay 的东西可见（如 2）

但是应该注意，控件的任何透明区域仍将在其后面显示黑色矩形。这可以是指定背景颜色，也可以使用此处提供的另一个选项。

## 选项 2 - 剪辑

另一种更复杂的方法是将矩形的 Clip 属性设置为仅包含您希望填充的区域的几何图形。这很可能通过使用[带有 Exclude 的 CombineMode 的 CombinedGeometry 类](http://msdn.microsoft.com/en-us/library/system.windows.media.combinedgeometry.geometrycombinemode.aspx)的实例来完成。这将防止矩形在剪切区域之外的区域上绘制任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:28:03.673

当您想隐藏控件时，如何将控件的可见性设置为 Collapsed。