# StackOverflow 问答 12518000-12518999

# c# - 页面生命周期让我困惑？

> ID：12518000
> 
> 赞同：0
> 
> 时间：2012-09-20T17:46:30.913
> 
> 标签：c#, javascript, event-handling, page-lifecycle

我单击了一个按钮，然后在按钮单击事件之前调试输入页面加载如果单击此按钮，我想检查页面加载

我使用了 hiddenfield 和 javascript 函数，比如

```
 <script type="text/javascript">
 function CheckClicked() {
     form1.HiddenField2.Value = span1.innerHTML;
      alert(form1.HiddenField2.Value);

   }
  </script> 
```

这是我的按钮

```
<asp:Button id="cmd_Edit" CssClass="button rnd-sml" runat="server" text="edit" OnClick="cmd_Edit_Click" Visible="False" onclientclick="CheckClicked()" /> 
```

单击警报弹出窗口时确定，其值为 true

当我签入 page_load 事件时

```
 if (HiddenField2.Value!="True")
            {
                FillData();
            } 
```

HiddenField2.Value =null 我不知道为什么它的值（真）在页​​面加载时警报中为真为空

我需要知道我的按钮在进入按钮点击事件之前是否被点击的方法吗？请问我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:51:32.257

在处理回发值之前引发页面加载事件。

尝试在 OnPreRender 事件上调用“FillData”以防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:50:34.100

首先，您是否检查了页面上隐藏字段的实际名称？Asp .net 喜欢将它们更改为您认为的样子，因此对于 javascript，名称可能会有所不同。另外，尝试`document.getElementById('whatever_the_id_is').value = document.getElementById('your_span').innerHTML;`使用 ID 而不是名称。

# android - Android 支持库直接下载链接

> ID：12518002
> 
> 赞同：18
> 
> 时间：2012-09-20T17:46:33.800
> 
> 标签：android

是否有下载Android支持库版本8的直接链接？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-20T18:20:24.667

尽管未发布，但旧版本（回到 support_r04.zip）似乎仍然可以从下载站点的同一目录中获得[，与 addon.xml 中指定](https://dl-ssl.google.com/android/repository/addon.xml)的最新版本（support_r10.zip）相同。

所以对于 R8，URL 是[https://dl-ssl.google.com/android/repository/support_r08.zip](https://dl-ssl.google.com/android/repository/support_r08.zip)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-08-03T13:34:10.850

[乔的答案](https://stackoverflow.com/a/12518544/1908296)是正确的答案。

**一般来说，**这个[Android 官方页面](http://developer.android.com/tools/support-library/index.html)列出了所有 Android 支持库只需选择您的库版本并使用 Google 存储库网址：

```
https://dl-ssl.google.com/android/repository/ 
```

例子：

对于 Android 支持库修订版 19：

```
https://dl-ssl.google.com/android/repository/support_r19.zip 
```

对于 Android 支持库修订版 19.0.1：

```
https://dl-ssl.google.com/android/repository/support_r19.0.1.zip 
```

对于 Android 支持库修订版 19.1.0：

```
https://dl-ssl.google.com/android/repository/support_r19.1.zip 
```

**请注意**，您可以像[Joe](https://stackoverflow.com/a/12518544/1908296)一样下载的最旧的 Android 支持库是 Android 支持库修订版 4：

```
https://dl-ssl.google.com/android/repository/support_r04.zip 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T23:15:26.923

以下链接中包含几乎完整的 android SDK 和其他所需工具列表，甚至是指导材料。下载您想要的并将它们解压缩到您的 android SDK 主页：http: [//downloads.puresoftware.org/files/android/](http://downloads.puresoftware.org/files/android/)

这对于那些使用 SDK 管理器有下载问题或导致 Google 对某些国家/地区实施制裁等的用户非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-30T12:57:10.677

对于 Android 支持库修订版 20.0.0：

[https://dl-ssl.google.com/android/repository/support_r20.zip](https://dl-ssl.google.com/android/repository/support_r20.zip)

对于 Android 支持库修订版 21.0.0：

[https://dl-ssl.google.com/android/repository/support_r21.zip](https://dl-ssl.google.com/android/repository/support_r21.zip)

# webm - webm视频，视频播放器

> ID：12518003
> 
> 赞同：1
> 
> 时间：2012-09-20T17:46:38.203
> 
> 标签：webm

我在 ms word 中为 WEBM 视频创建了一个超链接。该视频以 chrome 运行。但是在单击超链接时，它会要求播放默认视频播放器。不在 Windows 媒体播放器中播放。但是视频在浏览器中运行，但仅单击 word 上的超链接不会播放此内容。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:09:41.510

Webm 视频是一种专为 HTML5 设计的音频-视频格式。如果没有外部软件，Windows Media Player 将无法播放 .webm 视频 - 您必须安装多个过滤器和编解码器才能使格式正常工作。

如需教程，请访问此[网站](http://www.afterdawn.com/guides/archive/how_to_play_webm_files_page_2.cfm)。

# html - 使用 CSS 进行模拟

> ID：12518004
> 
> 赞同：0
> 
> 时间：2012-09-20T17:46:40.020
> 
> 标签：html, css, hyperlink

 是否可以通过 CSS 将链接行为更改为 target="_top"？

**编辑：** 很快，我的朋友们，很快。:)

```
a[target="_top"],
area[target="_top"],
form[target="_top"]
  { target: root } 
``` 

[http://www.w3.org/TR/css3-hyperlinks/](http://www.w3.org/TR/css3-hyperlinks/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:48:15.940

不，这是不可能的。CSS 用于演示。

**编辑**：[CSS3 超链接演示模块](http://www.w3.org/TR/css3-hyperlinks/#the-target)谈到了使这成为可能，但它只是一个工作草案，不受任何浏览器的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:53:13.783

不，但您可以`class="top"`在`a`标签中设置 a，然后使用 javascript（通过 jQuery）更改其行为：

```
$(function() {
  $('.top').attr('target','_top');
});​ 
```

jsfiddle：http: [//jsfiddle.net/brRHP/3/](http://jsfiddle.net/brRHP/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:49:11.703

`<div id="top"></div>`不，但在正文顶部添加一个。然后让您的锚点引用 index.php#top（如果您的页面名称是 index.php）

# ruby-on-rails - 如何在 Rails 中处理和生成大文件？

> ID：12518007
> 
> 赞同：0
> 
> 时间：2012-09-20T17:46:46.280
> 
> 标签：ruby-on-rails, file, download

我在 Rails 世界中很新，今天我遇到了以下问题：

我必须生成一个非常大的 json。起初我试图在内存中做，但没有足够的所以我生成了一个文件并将所有行存储在那里。现在我必须从客户端下载这个文件。我怎样才能用rails做到这一点？

我是否使用了最好的方法？我在一些博客中看到他们推荐使用 Amazon S3。

有任何想法吗？？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:54:03.397

我不确定我是否完全*理解您的问题*，但我会尝试给您一些提示：

如果文件生成需要很长时间（cpu 密集型），您可能需要查看排队。

这些技术“允许您创建作业并将它们放在队列中，然后稍后将这些作业从队列中拉出并处理它们。” 因此，当文件生成放入队列时，您的 ruby​​/rails 进程仍然可以处理传入的请求。

*   [https://github.com/defunkt/resque](https://github.com/defunkt/resque)

S3 是来自 Amazon 的存储选项，类似于网络的外部硬盘驱动器。它对于存储大量数据（如图像或 json 文件）很有用。

因此，只有在您需要在线存储大 json 文件时，S3 才会为您提供帮助。

再说一遍：我不确定您的问题到底出在哪里，但我的印象是您有点困惑，希望这会有所帮助。

# vb.net - vb.net 中的 SQL 异常

> ID：12518015
> 
> 赞同：0
> 
> 时间：2012-09-20T17:47:24.637
> 
> 标签：vb.net

我在 SQL 数据库中有两个表。一个表正在引用另一个表。

我正在从 VB.NET 程序的表中添加数据。我想写一个`try...catch`块来捕获在将数据添加到可能发生违规`SQLException`的表时抛出的问题。`Foreign Key`我该怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:01:21.327

您可以尝试使用此代码

```
Try
  ...

Catch ex As Exception
   MsgBox("Your exception" & ex.Message)
End Try 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/0yd65esw%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/0yd65esw%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:09:41.217

```
 Try
      'Do your stuff
 Catch ex as SqlException
      Dim errors = ex.Errors
      ' inspect errors to decide if this is the condition you want to catch
      Dim shouldCatch As Boolean = ... 
         ' Code that acts on the specific error condition
      If shouldCatch Then
      Else
         Throw ' rethrow everything we're not interested in
      End If
 End Try 
```

# compiler-construction - PL/SQL CONSTANT 变量ś 编译考虑

> ID：12518023
> 
> 赞同：0
> 
> 时间：2012-09-20T17:47:44.390
> 
> 标签：compiler-construction, plsql, oracle11g

参考[Oracle 11g PL/SQL Positions of CONTANT variables in PACKAGE](https://stackoverflow.com/questions/12517632) PL/SQL 编译器如何处理这种方法：

```
 FUNCTION PARSER(IN_VALUE IN VARCHAR2) RETURN VARCHAR2 IS
    LC_PARAM CONSTANT VARCHAR2(10) := 'USERNAME';
    LC_MSG   CONSTANT VARCHAR2(80) := REPLACE('Hello USERNAME! How are you today?', LC_PARAM, IN_VALUE);
  BEGIN
    RETURN REPLACE(LC_MSG, LC_PARAM, LC_PARAM);
  END PARSER; 
```

甚至这个：

```
 FUNCTION PARSER(IN_PARAM IN VARCHAR2,
                  IN_VALUE IN VARCHAR2) RETURN VARCHAR2 IS
    LC_MSG CONSTANT VARCHAR2(80) := REPLACE('Hello USERNAME! How are you today?', IN_PARAM, IN_VALUE);
  BEGIN
    RETURN REPLACE(LC_MSG, IN_PARAM, IN_PARAM);
  END PARSER; 
```

# javascript - Javascript window.location.replace：如何确保它清除 IE 中的缓存

> ID：12518025
> 
> 赞同：0
> 
> 时间：2012-09-20T17:47:51.813
> 
> 标签：javascript

在我的代码中，我使用`window.location.replace(url)`将用户重定向到不同的网页。

我还想确保当用户访问该页面时，浏览器将从服务器获取最新代码，而不仅仅是使用缓存。上面的代码似乎在 Firefox 中运行良好。它将从服务器获取最新代码。但在 IE 中，它似乎正在使用用户上次访问的缓存值。我该如何解决这个问题？

我知道您可以使用 location.reload(true) 进行强制刷新。但是我只想在用户使用上面的代码被重定向时刷新网页。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:53:12.007

如果您将时间戳附加到 url 的末尾，您的浏览器*应该*绕过缓存。例如，

```
function goToPageWithoutCachedData(urlToGoTo) {
    urlToGoto += '?_=' + new Date();
    window.location = urlToGoto;
} 
```

# iphone - 如何在 iPhone 5 中获得黑色边框

> ID：12518026
> 
> 赞同：5
> 
> 时间：2012-09-20T17:47:53.773
> 
> 标签：iphone, ios, xcode, ios6, iphone-5

当我第一次更新 Xcode 并在 iPhone 5 模拟器中测试我的应用程序时，该应用程序运行完美，顶部和底部都有黑色边框。然后，弹出了一些东西，询问我是否希望 Xcode 自动调整应用程序的大小以使其适合整个屏幕。我点击是，现在一切都搞砸了。有没有办法恢复边界？我想尽快为我的应用提交更新。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T17:50:54.960

从您的项目中删除文件 Default-568h@2x.png。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T18:31:57.857

4个步骤：

*   在 File Inspector 窗格中取消选中 Default-568h@2x.png 文件的 Target Membership（或仅删除该文件）。
*   在目标上执行（选项键）清理构建文件夹，以及常规清理。
*   从模拟器中删除应用程序。
*   重建应用程序并运行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-06T13:05:00.277

请注意，从 5 月 1 日起，Apple 需要在您的应用程序中使用 Default-568h@2x.png 图像才能提交到 App Store。如果没有该图像，您将收到无效的二进制拒绝。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T18:03:19.293

一个干净的构建文件夹可能很难找到。通常，您只会在 Project > Clean 下看到。但是，当您按住 ALT 键时，它将变为 Clean Build 文件夹！

# css - pictonic 是如何工作的？

> ID：12518031
> 
> 赞同：1
> 
> 时间：2012-09-20T17:48:07.350
> 
> 标签：css, fonts, web

谁能向我解释[https://pictonic.co/](https://pictonic.co/)是如何工作的？我对创建自己的无图像图标很感兴趣，但我不确定解决这个问题的最佳策略是什么，知道他们使用什么技术似乎是一个很好的起点。谁能从他们的演示中看出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:29:53.080

我是 pictonic 的首席开发人员。

我们的设计师最近写了一篇文章，描述了他用于设计图标的技术，这可能有助于回答您的问题：

[http://blog.pictonic.co/post/31265656514/designing-icons-for-use-in-icon-fonts](http://blog.pictonic.co/post/31265656514/designing-icons-for-use-in-icon-fonts)

其输出是一堆 svg。我们有自己的技术来处理这些，但本质上，我会向您指出 www.w3.org 的 svg 字体规范：

[http://www.w3.org/TR/SVG/fonts.html](http://www.w3.org/TR/SVG/fonts.html)

祝你好运！: >

# email - Magento - CMS 语法 - 布局句柄更新参数

> ID：12518034
> 
> 赞同：0
> 
> 时间：2012-09-20T17:48:13.533
> 
> 标签：email, magento, syntax, content-management-system

当 Magento 调用时：

```
{{layout handle="sales_email_order_items" order=$order}} 
```

在电子邮件模板中，'order=$order' 位是否只是一个参数对？是否将整个 $order 对象作为 $this->getOrder() 传递给 phtml 模板文件？

我知道我曾一度知道这个问题的答案，但后来忘记了。=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:42:35.090

这完全取决于特定指令的实施。在您的示例中，该`layout`指令在

```
#File: app/code/core/Mage/Core/Model/Email/Template/Filter.php
public function layoutDirective($construction)
{
    ...
} 
```

$construction 参数包含模板标签的属性列表。这些被解析成参数

```
$params = $this->_getIncludeParameters($construction[2]); 
```

实例化一个**新**的布局对象

```
$layout = Mage::getModel('core/layout'); 
```

然后对于新布局对象中的每个块，将每个参数分配为数据参数

```
foreach ($layout->getAllBlocks() as $blockName => $block) {
    /* @var $block Mage_Core_Block_Abstract */
    foreach ($params as $k => $v) {
        if (in_array($k, $skipParams)) {
            continue;
        }

        $block->setDataUsingMethod($k, $v);
    }
} 
```

以上假设 Magento 1.7.x。

# devexpress - DevExpress SpinEdit 不递增？

> ID：12518041
> 
> 赞同：0
> 
> 时间：2012-09-20T17:48:47.527
> 
> 标签：devexpress, xtraeditors

我在 a`SpinEdit`上放置了一个控件`WinForm`，当我单击向上和向下箭头时，它什么也不做。我更改的唯一属性是：

```
IsFloatValue is false  
MinValue is 1
MaxValue is 99
EditMask = 'N00' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T11:33:11.590

您必须将您的父控件设置为可编辑，并且您将能够增加/减少旋转的值...

# python - Numpy 索引：返回其余部分

> ID：12518043
> 
> 赞同：26
> 
> 时间：2012-09-20T17:48:50.397
> 
> 标签：python, arrays, numpy, indexing, scipy

一个简单的 numpy 索引示例：

```
In: a = numpy.arange(10)
In: sel_id = numpy.arange(5)
In: a[sel_id]
Out: array([0,1,2,3,4]) 
```

如何返回未由 sel_id 索引的数组的其余部分？我能想到的是：

```
In: numpy.array([x for x in a if x not in a[id]])
out: array([5,6,7,8,9]) 
```

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T18:17:28.363

对于这个简单的一维案例，我实际上会使用一个布尔掩码：

```
a = numpy.arange(10)
include_index = numpy.arange(4)
include_idx = set(include_index)  #Set is more efficient, but doesn't reorder your elements if that is desireable
mask = numpy.array([(i in include_idx) for i in xrange(len(a))]) 
```

现在你可以得到你的价值观：

```
included = a[mask]  # array([0, 1, 2, 3])
excluded = a[~mask] # array([4, 5, 6, 7, 8, 9]) 
```

请注意，`a[mask]`这不一定会产生与该场景中输出`a[include_index]`的事项顺序相同`include_index`的结果（它应该大致相当于`a[sorted(include_index)]`）。但是，由于您的排除项目的顺序没有明确定义，这应该可以正常工作。

* * *

**编辑**

创建蒙版的更好方法是：

```
mask = np.zeros(a.shape,dtype=bool)
mask[include_idx] = True 
```

*（感谢seberg）*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T20:33:19.837

你可以用布尔掩码很好地做到这一点：

```
a = numpy.arange(10)

mask = np.ones(len(a), dtype=bool) # all elements included/True.
mask[[7,2,8]] = False              # Set unwanted elements to False

print a[mask]
# Gives (removing entries 7, 2 and 8):
[0 1 3 4 5 6 9] 
```

加法（取自@mgilson）。创建的二进制掩码可以很好地用于取回原始切片，但是只有在对原始索引进行*排序*`a[~mask]`时才相同。

 ** * *

*编辑：*向下移动，因为我必须意识到`np.delete`此时我会考虑越野车（2012 年 9 月）。

您也可以使用`np.delete`，尽管掩码功能更强大（将来我认为这应该是一个不错的选择）。然而，目前它比上面的要慢，并且会产生带有负索引的意外结果（或给定切片时的步骤）。

```
print np.delete(a, [7,2,8]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T18:07:12.900

它更像是：

```
a = numpy.array([1, 2, 3, 4, 5, 6, 7, 4])
exclude_index = numpy.arange(5)
include_index = numpy.setdiff1d(numpy.arange(len(a)), exclude_index)
a[include_index]
# array([6, 7, 4])

# Notice this is a little different from
numpy.setdiff1d(a, a[exclude_index])
# array([6, 7] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T22:24:32.187

我会用布尔掩码来做这件事，但有点不同。这具有在 N 维中工作的好处，具有连续或非索引。内存使用情况取决于是否为掩码数组创建了视图或副本，我不确定。

```
import numpy
a = numpy.arange(10)
sel_id = numpy.arange(5)
mask = numpy.ma.make_mask_none(a.shape)
mask[sel_id] = True
answer = numpy.ma.masked_array(a, mask).compressed()
print answer
# [5 6 7 8 9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T18:17:15.287

此外，如果它们是连续的，请使用 [N:] 语法来选择其余部分。例如， arr[5:] 将选择数组中倒数第 5 个元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-06T08:02:52.417

这是另一种方式，使用 numpy 的`isin()`函数：

```
import numpy as np

a = np.arange(10)
sel_id = np.arange(5)

a[~np.isin(np.arange(a.size), sel_id)] 
```

解释：

`np.arange(a.size)`给出 的所有索引`a`，即`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`

`np.isin(np.arange(a.size), sel_id)`返回一个布尔掩码`[ True, True, True, True, True, False, False, False, False, False]`，其`True`索引为 in`sel_id`和`False`其他。由于我们想要获取不在其中的索引，因此`sel_id`我们使用按位 NOT 运算符`~`来反转布尔掩码。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-20T17:55:30.503

`numpy.setdiff1d(a, a[sel_id])`应该做的伎俩。不知道有没有比这更简洁的东西。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-20T21:21:32.383

假设这`a`是一个一维数组，您可以从索引列表中弹出您不想要的项目：

```
accept = [i for i in range(a.size) if i not in avoid_list]
a[accept] 
```

你也可以尝试使用类似的东西

```
accept = sorted(set(range(a.size)) - set(indices_to_discard))
a[accept] 
```

这个想法是在你不想要的索引集的互补上使用花哨的索引。*

# php - 压缩 PHP 生成的动态 HTML

> ID：12518045
> 
> 赞同：0
> 
> 时间：2012-09-20T17:49:06.653
> 
> 标签：php, html, html-compression

我正在使用 PHP 创建一些动态网站。我遇到了各种优化技术来优化我的网页。其中之一是 HTML 压缩。因为我的网页中有很多 JS、CSS 和内联脚本。生成的源代码 (HTML) 的总大小约为 150KB。

但是，如果我保存生成的页面源，并使用[http://htmlcompressor.com/compressor.html](http://htmlcompressor.com/compressor.html)之类的网站对其进行压缩，则输出文件大约为 90KB（其中删除了空换行符和空格）。那么有没有办法在页面生成时动态地做到这一点呢？有没有可用的助手或图书馆？对此主题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:57:29.543

您可以做的最好的事情之一是删除任何不需要内联的内联脚本。

我在我的 PHP 文件的顶部有这个：

```
ob_start();
ob_implicit_flush(0); 
```

然后我包括这个功能：（我的笔记没有说我从哪里偷来的）

```
function print_gzipped_page() {
  $HTTP_ACCEPT_ENCODING = $_SERVER["HTTP_ACCEPT_ENCODING"];
  if( headers_sent() )
    $encoding = false;
  else if( strpos($HTTP_ACCEPT_ENCODING, 'x-gzip') !== false )
    $encoding = 'x-gzip';

  // *** I can't recall why I disabled this one ***
  // I had some device that it didn't work with.

  //else if( strpos($HTTP_ACCEPT_ENCODING,'gzip') !== false )
  //  $encoding = 'gzip';
  else {
    $encoding = false;
  }

  $contents = ob_get_clean();

  if ($encoding)
  {
    $_temp1 = strlen($contents);
    if ($_temp1 < 2048) {   // no need to waste resources in compressing very little data
      print($contents);
    } else {
      header('Content-Encoding: '.$encoding);
      print("\x1f\x8b\x08\x00\x00\x00\x00\x00");
      $contents = gzcompress($contents, 9);
      $contents = substr($contents, 0, $_temp1);
      print($contents);
    }
  }
  else {
    print($contents);
  }
} 
```

在页面的最底部，我只是调用：

```
print_gzipped_page(); 
```

正如代码所说，如果您已经发送了标头 - 如果您已经发送了任何输出，基本上，那么此代码*不会*为您压缩任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:49:07.883

您提到的网站已经为您提供了解决方案。想想看，不是压缩 PHP 文件的 HTML 输出，而是让它们生成已​​经压缩的 HTML。这样，您就不会在压缩输出时浪费额外的资源，因为您已经这样做了。

我使用 HTMLCompressor 来压缩 WordPress 主题 PHP 文件，它就像一个魅力。只需从代码类型列表中选择*x/html + PHP 。*

请注意，它不会压缩 PHP 字符串中包含的 HTML 代码，因此如果您的 PHP 文件以这种方式生成代码：

```
<?php
echo '<div>';
echo '    <b> Some number is ' . $num . ' </b>';
echo '</div>';
?> 
```

将其更改为：

```
<div>
    <b> Some number is <?php echo $num; ?> </b>
</div> 
```

它将被正确压缩；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:58:08.237

我遇到了一个称为[动态网站压缩器](http://codecanyon.net/item/dynamic-website-compressor/2838376)的脚本，它可以在 FLY 上压缩您的“HTML - 内联 CSS - 内联 JS”（意味着您网站的每个页面）。

它不会修改您的实际服务器文件中的任何内容，或者换句话说，它不会修改您的文件并且不需要修改。我希望它可以帮助你

# c# - ASP.NET 网站保存生成文件的位置

> ID：12518050
> 
> 赞同：0
> 
> 时间：2012-09-20T17:49:11.707
> 
> 标签：c#, asp.net, file-location

我有一个 ASP.Net 网站，在某些情况下，它会生成 .pdf 文件和 .csv 文件供用户下载。

现在我的问题是：在网络服务器上保存这些文件的默认目录是什么？有没有像 App_... 之类的 ASP.NET 文件夹？

你能推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:04:27.617

如果您不想重复使用文件，请直接流式传输文件而不将其保存到磁盘。

如果将其保存到磁盘，则必须问自己是否该文件的内容对所有用户都可用，或者其他用户可以访问这些文件是否是个坏主意。如果这是一个坏主意，则应该通过相应地设置访问权限来使用户无法使用您放置文件的文件夹。您可以通过将文件夹放在网站目录之外或通过在文件系统或 Web 服务器上设置安全设置来执行此操作。

您基本上可以将文件放在任何对编写文件的用户（通常是 ASP.NET 应用程序池用户）可写的文件夹中。IIRC App_data 文件夹默认情况下对于 ASP.NET 用户是可写的，因此这可能是一个候选者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:52:58.240

这真的取决于你！我建议您将它们放在解决方案的子文件夹中，以便它们是独立的，您可以轻松控制安全性，而无需担心树下的文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:03:42.250

文件夹是你告诉它的任何东西。如果您的音量很小，您可以只从内存中流式传输文件，这样它们就不会存储在服务器上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T17:52:31.977

您可以为此需要创建适当的文件夹

这里的特定文件夹列表（但你不需要）：

```
App_GlobalResources, 
App_LocalResources, 
App_Resources
App_Themes
App_WebReferences)
App_Code
App_Data
App_Browsers 
```

这里是关于项目结构的 MSDN 链接

链接：http: [//msdn.microsoft.com/en-us/library/ex526337%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ex526337%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:54:24.320

考虑是否要拥有多个 Web 服务器以及在集群中拥有服务器也很重要。要为这种情况做好准备，最好不要将文件保存在 Web 应用程序文件夹下，也不要相对于应用程序路径访问它们，而是将文件保存在您可以轻松暴露的单独文件夹中（仍然会有是安全问题）作为网络路径。

# excel - 为什么这个 Excel VBA 脚本向下复制并重复直到最后一个选定的单元格？

> ID：12518052
> 
> 赞同：0
> 
> 时间：2012-09-20T17:49:20.380
> 
> 标签：excel, vba

为什么这会将数据复制到下一个空白单元格直到下一个完整单元格，然后获取该单元格的数据并重新开始？

```
Option Explicit

Sub CopyDown()

    Dim wsPOD As Worksheet
    Dim lastrow

    Set wsPOD = Sheets("PO Data")

With wsPOD
    lastrow = wsPOD.Range("F" & Rows.Count).End(xlUp).Row
            wsPOD.Range("A2:D" & lastrow).Select
            Selection.SpecialCells(xlCellTypeBlanks).Select
            Selection.FormulaR1C1 = "=R[-1]C"
    End With
End Sub 
```

我了解大部分脚本，但我不了解这部分：

```
 Selection.SpecialCells(xlCellTypeBlanks).Select
        Selection.FormulaR1C1 = "=R[-1]C" 
```

最后一部分对我来说尤其是胡言乱语，有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:59:22.017

根据我的评论，您可以使用

选项显式

```
Sub CopyDown()

    Dim wsPOD As Worksheet
    Dim lastrow as long
    Dim EmptyCells as range

    Set wsPOD = Sheets("PO Data")

With wsPOD
    lastrow = .Range("F" & .Rows.Count).End(xlUp).Row
            set EmptyCells = .Range("A2:D" & lastrow).SpecialCells(xlCellTypeBlanks)
            EmptyCells.FormulaR1C1 = "=R[-1]C"
    End With
End Sub 
```

# regex - 用于解析变量名的正则表达式

> ID：12518055
> 
> 赞同：0
> 
> 时间：2012-09-20T17:49:32.113
> 
> 标签：regex

我正在尝试获取变量名称并将其存储在一个列表中，但是我在提出正则表达式时遇到了麻烦。所以，我有一个文件，如下所示：

```
float func(float a, float b, float c)
{
   float i, j,           k;
   float2 w;
} 
```

我想做的是获取函数的名称以及参数var和local var。所以，我希望我的正则表达式返回`func` `a` `b` `c` `i` `j` `k` `w`

我目前的正则表达式是`\bfloat*\d* +\w*\b`

发现`float func` `float a` `float b` `float c` `float i` `float w`. 我不确定如何分隔浮点部分，并且只使用正则表达式获取 var 名称（我想我可以使用捕获组）但我不确定当同一行上有多个 var 名称时该怎么办。另外，我只对浮点类型的变量感兴趣。任何提示都会有所帮助。

**编辑** 我刚刚想出了这个正则表达式`\bfloat*\d* +\w*[ *,* *\w]*\b`，它符合我的需要，但是我可以只用一个正则表达式来获得组中的名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:02:32.177

这是您可以分两步执行此操作的方法，因为我很确定在单个正则表达式中执行此操作是不可能的：

```
import re

data = '''float func(float a, float b, float c)
{
   float i, j,           k;
   float2 w;
   float a, int b;
}'''
regex = re.compile(r'\bfloat2?\s+(\w+(?:,\s*(?!\w+\s+\w+)\w+)*)')
var_list = []
for vars in regex.findall(data):
    vars = (v.strip() for v in vars.split(','))
    var_list.extend((v for v in vars if v))

print var_list
# ['func', 'a', 'b', 'c', 'i', 'j', 'k', 'w', 'a'] 
```

这仅对您的正则表达式进行了微小的更改，以便捕获组包含所有逗号分隔`float`值，然后在`for`循环中我们拆分逗号分隔值并将它们添加到结果列表中。

# php - 使用 WHERE 子句将 PHP 数组插入 MySQL

> ID：12518057
> 
> 赞同：0
> 
> 时间：2012-09-20T17:49:47.387
> 
> 标签：php, mysql

我已经阅读[了使用 WHERE 子句将数组传递给查询](https://stackoverflow.com/questions/907806/php-mysql-using-an-array-in-where-clause)，这基本上是我正在做的，但使用字符串而不是整数。我对 WHERE 子句有疑问。

```
$codes_imp = "'" . implode("','", $codes) . "'";
$passwords_imp = "'" . implode("','", $passwords) . "'";
$comments_imp = "'" . implode("','", $comments) . "'";

$set_pass_query = "INSERT INTO users (password, comments) VALUES ($passwords_imp, $comments_imp) WHERE Code IN ($codes_imp)"; 
```

执行时，查询如下所示：

```
INSERT INTO users (password, comments) 
VALUES ('password1', 'password2', 'password3', 'comment1', 'comment2', 'comment3') 
WHERE Code IN ('code1', 'code2', 'code3') 
```

表中的所有列都是类型`VARCHAR`。显然我有一个语法错误（正如它告诉我的那样），但我不确定如何正确构建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:52:56.343

您正在尝试使用子句约束`INSERT`查询。`WHERE`这是一个很大的禁忌。

要么你想`UPDATE`，要么你需要放弃`WHERE`

你到底想完成什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:59:30.570

您需要使用`UPDATE`and not`INSERT`来更改现有的数据库行。您可以使用像循环这样的循环构造`foreach`。例如：

```
foreach($codes_imp as $key=>$code){
   $query="UPDATE users SET password='$passwords_imp[$key]', comments='$comments_imp[$key]' WHERE Code='$code'"
   [Code to execute the query goes here]
} 
```

***注意：***我们需要使用循环结构，因为`UPDATE`查询一次只能在一个数据库行上运行。

***替代方法：***

`CASE WHEN ELSE END`您可以使用Mysql 中的语法，而不是使用循环。
要知道如何使用它，请参考：

*   [https://stackoverflow.com/a/2528188/749232](https://stackoverflow.com/a/2528188/749232)
*   [http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html](http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html)

# html - 里面的叠加图 导致文本下移

> ID：12518061
> 
> 赞同：1
> 
> 时间：2012-09-20T17:50:03.587
> 
> 标签：html, css

我有`<div>`一个`border:15px`。它在小提琴中给出的左角有一个图像

[http://jsfiddle.net/user1212/e7Gez/17/](http://jsfiddle.net/user1212/e7Gez/17/)

现在，此图像正在从顶部向下推文本。我怎样才能让文字得到`margin-top:0;`

我不想使用图像，`background-image`因为它`15px border`与它重叠。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:55:34.373

只需`float: left;`在您的图像上使用，请参阅[更新的 Fiddle](http://jsfiddle.net/e7Gez/18/)。您也可以`margin-right`在其上使用负号以防止其将文本推向左侧，但随后您需要将`z-index`其和其余内容弄乱，这意味着需要额外的 HTML 标记以用于样式目的；看到[这个小提琴](http://jsfiddle.net/e7Gez/24/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:36:48.503

好的，我将把我的另一个答案作为一个更直接的“这就是你如何按照自己的方式解决问题”的答案，但我认为这里更好的方法是使用`position: absolute;`- 这样可以更轻松地实现效果.

[小提琴](http://jsfiddle.net/e7Gez/38/)

我将图像样式设置如下：

```
img#post-backgrnd {
    position: absolute;
    top: -1px;
    left: 0px;
} 
```

这会强制图像移动到左上角，这就是我们想要的位置（这`top: -1px;`是因为图像与边框略微未对齐），并且`position: absolute;`意味着它不占用空间，因此它不会推动文本一点也不。但是，这样做时，图像会覆盖文本。这里更好的解决方案是编辑图像，修复对齐问题（并转到`top: 0;`），并使白色部分实际上是透明的。

如果由于某种原因无法完成，您可以使用 解决此重叠问题`z-index`，但这意味着您的父级、您的图像和文本需要三个不同的`z-index`值，这意味着您需要一个新的文本元素。有关此示例，请参阅[此 Fiddle](http://jsfiddle.net/e7Gez/45/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T17:57:12.677

只需添加`vertical-align:top`到您的`<div>`喜欢：

```
.content {
  width: 500px;
  height: 500px;
  border: 15px solid #E4EAF3;
  /*  background: #ffffff url('http://smitra.net76.net/post-bg.jpg') no-repeat top left;*/
  margin-top:0;
  padding-top:0;
  vertical-align:top;
} 
```

[**在jsfiddle**](http://jsfiddle.net/e7Gez/25/)中看到它[](http://jsfiddle.net/e7Gez/25/)

# linux - sighandler 和其他线程

> ID：12518064
> 
> 赞同：0
> 
> 时间：2012-09-20T17:50:05.920
> 
> 标签：linux, multithreading, signals

1.  当前处理另一个信号时是否可以处理 sighandler？
2.  当前处理另一个线程执行时是否可以处理 sighandler？

谢谢， 埃亚尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:11:39.037

一些答案在[此处的文档中是正确的](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)

> 进程导向的信号可以被传递到当前没有阻塞信号的任何一个线程。如果多个线程的信号被解除阻塞，那么内核选择一个任意线程来传递信号。

# php - Codeigniter 2 活动记录 — 如何创建临时表以应用第二个排序顺序？

> ID：12518069
> 
> 赞同：0
> 
> 时间：2012-09-20T17:50:49.230
> 
> 标签：php, sql, database, codeigniter, activerecord

我正在更新旧网站。我正在做的一件事是重写数据库查询，因为我已经更改了数据库的结构，使其更加灵活，并且可以从管理员那里进行配置。

我之前使用了以下查询（以及许多其他类似的查询），它依赖于一个临时表：

```
$query = $this->db->query("SELECT * FROM (SELECT * FROM Links WHERE Cat LIKE ('$c') AND Type LIKE ('%$x%') LIMIT $s, $l) AS T ORDER BY $sort $o"); 
```

因为查询变得更加复杂并且现在涉及很多连接，所以我决定使用活动记录语法来使它们更易于阅读。问题是我找不到有关如何制作临时表以使用活动记录对数据应用第二次排序的任何信息；这肯定是可能的吗？

这是我的新查询：

```
 $this->db
        ->select('*')
        ->from('item_categories')
        ->where('item_categories.cat_id', $c)
        ->or_where('item_categories.parent_id', $c)
        ->or_where('item_categories.gparent_id', $c)
        ->join('item_categories_rel', 'item_categories_rel.cat_id = item_categories.cat_id', 'right')
        ->join('item_entries', 'item_entries.item_id = item_categories_rel.item_id','right')
        ->join('ratings_total', 'ratings_total.item_id = item_entries.item_id')
        ->order_by("item_name", "asc")
        ->limit($l, $s);
        // up to here I want to store as a temporary table then apply next order
        //->order_by($sort, $o); - ideally I want to apply a second order like this
    $result = $this->db->get(); 
```

我想应用“order by”两次，但这不起作用——活动记录不是那种切割器（或者更可能是模棱两可的），我怎样才能在活动记录中做到这一点？

任何帮助深表感谢。如果活动记录方法失败，谁能建议我如何对结果对象应用排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:59:47.530

尝试检查生成的 SQL: `print $this->db->_compile_select()`。还有一个附加信息：CI 不支持子查询。

# php - 使用 ModRewrite 会导致网页刷新吗？

> ID：12518071
> 
> 赞同：0
> 
> 时间：2012-09-20T17:50:55.410
> 
> 标签：php, session, mod-rewrite, redirect

我的网站有问题，我有点不确定如何解决，只是因为它不是经常发生的。有时会，有时不会。

该问题与会话和重定向有关。我正在做的是，当用户完成一项任务时，他们会被重定向。当他们被重定向时，$_SESSION 会设置一条消息，说明他们所做的事情已经完成。一旦加载了用户被重定向到的页面，并且没有显示消息，则包含该消息的会话变量将被取消设置，因为页面在最终显示给用户之前会刷新。奇怪的是，对于一个特定的重定向（当用户使用 Facebook Connect 登录时）它可以工作，但对于所有其他重定向它却不起作用。

我关于为什么会发生这种情况的最新想法是因为我正在使用 mod_rewrite。mod_rewrite 会导致页面在浏览器中显示之前刷新吗？

这是我用于 URL 重写的代码：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*) index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:01:19.383

不。 mod_rewrite 告诉 apache 接受与您的规则匹配的传入请求（在向您发送响应之前），并将其路由到特定目的地。这就像邮件转发——你不会两次收到这封信，你只是在不同的地方收到它。

**更新以添加解决方案**

`header`在调用重定向之后，您可能会执行一些操作。添加对`exit`after的调用`header`，您的问题应该得到解决。

# linux - 归档文件的归档

> ID：12518075
> 
> 赞同：0
> 
> 时间：2012-09-20T17:51:03.193
> 
> 标签：linux, static-libraries, unix-ar

> **可能重复：**
> [如何将两个“ar”静态库合并为一个](https://stackoverflow.com/questions/3821916/how-to-merge-two-ar-static-libraries-into-one)

我有多个存档文件如下

```
folder1/libfolder1.a
folder2/libfolder2.a
folder3/libfolder3.a 
```

所有这些库都有一堆 obj 文件。

我想为所有这些库创建一个存档。

```
ar -rcs libGlobal.a folder1/libfolder1.a folder2/libfolder2.a folder3/libfolder3.a 
```

但它不起作用。它说我需要提取所有这些 .a 文件，一旦我拥有所有这些 obj 文件，我可以像下面那样做

```
ar -rcs `ls *.o` 
```

但我不想做所有这些讨厌的事情。我想要明确的解决方案，例如

```
ar -rcs libGlobal.a `ar -x folder1/libfolder1.a` `ar -x folder2/libfolder2.a` `ar -x folder3/libfolder3.a` 
```

我想要的解决方案与此类似，因为我在此示例中给出的文件夹结构并不是那么简单。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:34:20.537

虽然它没有表示为单个命令，但这应该可以工作：

```
pushd folder1; ar -x libfolder1.a; popd
pushd folder2; ar -x libfolder2.a; popd
pushd folder3; ar -x libfolder3.a; popd
ar -rcs libGlobal.a folder1/*.o folder2/*.o folder3/*.o
rm folder1/*.o folder2/*.o folder3/*.o 
```

# c++ - 使用 Visual Studio 11 RC 调试时未找到 DLL 依赖项

> ID：12518082
> 
> 赞同：14
> 
> 时间：2012-09-20T17:51:45.910
> 
> 标签：c++, dll, visual-studio-2012, fmod

我的项目是一个独立的 C++ 应用程序，它使用 FMOD 播放声音。我之前用 Visual Studio 2010 开发过相同的项目没有任何问题，但是 2012 给了我一个经典错误：“程序无法启动，因为您的计算机中缺少 fmodex.dll。尝试重新安装程序以解决此问题。 " 该项目似乎可以很好地加载其他 DLL（例如 Direct3d 相关文件和 d3d 着色器编译器）。

仅当尝试从 IDE 调试或运行程序时才会出现此问题，而不是当我使用 DLL 将可执行文件复制到适当的目录并手动运行它时。如果我从程序中删除所有对 FMOD 的引用，则调试和运行正常。我已经确保我在项目设置中有正确的工作目录（除了它在同一目录中加载所有其他文件就好了）。我最初是从 Visual Studio 2010 转换项目，但尝试从头开始创建一个新项目，但没有成功。我还修改了所有可能的编译器和链接器设置，谷歌搜索似乎也没有帮助。

我猜这个问题与新的 Metro 风格应用程序有关，它是处理外部依赖的方式，但我也关闭了“Metro 风格应用程序支持”。我开始认为我真的已经尽我所能尝试了，但不知道下一步该尝试什么。获得更多诊断信息的指导也将不胜感激！谢谢！

**编辑：**我使用的 Visual Studio 版本是 Visual Studio Ultimate 2012 RC，版本 11.0.50706.0 QRELRC，2012 年 7 月

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-21T05:55:34.983

转到项目的属性：

```
Configuration Properties | Debugging | Environment 
```

并添加以下项目：

```
PATH=c:\path\where\the\dll-is;$(Path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T05:34:50.190

我的同情，我最近似乎生活在 DLL 地狱中。两个建议：

1.  `devenv`您可以从带有`/useenv`开关的命令行驱动 IDE 。

    > "... 使用 PATH、INCLUDE、LIBPATH 和 LIB 环境变量，而不是 VC++ 构建的 IDE 路径。

2.  `dumpbin /dependents [*.exe] [*.dll]`将向您显示 DLL 依赖项。

    `dumpbin /dependents openssl.exe`

> Microsoft (R) COFF/PE Dumper 版本 10.00.40219.01 版权所有 (C) Microsoft Corporation。版权所有。文件转储 openssl.exe
> 
> 文件类型：可执行图像
> 
> 图像具有以下依赖项：
> 
> ```
> SSLEAY32.dll
> LIBEAY32.dll
> WSOCK32.dll
> MSVCR80.dll
> KERNEL32.dll
> 
> Summary
> 
>      4000 .data
>     14000 .rdata
>      1000 .rsrc
>     33000 .text 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:25:36.330

可能是 VS 正在使用与手动运行应用程序时不同的当前目录运行应用程序。

VS 通常将当前目录设置为项目文件夹，该文件夹通常与构建的二进制文件所在的文件夹不同。当您手动运行它时，您可能是从后者而不是前者运行它。

如果这是问题所在，那么加载 fmodex.dll 的代码必须取决于 DLL 搜索路径中的当前目录，这可能会带来很大的安全风险（查找“DLL 种植”或 DLL“预加载”），并且被某些 Windows 配置主动阻止。

# android - 应用程序可以读取 DNS TXT 记录吗？

> ID：12518084
> 
> 赞同：2
> 
> 时间：2012-09-20T17:51:52.740
> 
> 标签：android, ios, windows, windows-phone

我想知道以下移动操作系统：IOS、Android、Windows 是否允许应用程序发出 DNS TXT 记录请求。

我计划在 TXT 记录中添加一些信息，这些信息会不时更新，并希望构建一个可以读取该信息的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:54:59.880

是的，它可以，甚至有一个应用程序可以做到这一点：https: [//play.google.com/store/apps/details?id=com.kodholken.dnslookup](https://play.google.com/store/apps/details?id=com.kodholken.dnslookup)

但是，我认为您真正的问题不是“应用程序可以读取 DNS TXT 记录吗？” 而是“如何？”，因为我不是网络专家，所以我没有答案。

# mysql - 将这两个查询合并为一个的正确方法是什么？

> ID：12518085
> 
> 赞同：0
> 
> 时间：2012-09-20T17:51:53.030
> 
> 标签：mysql, sql

```
select gmt from history.cachemap order by gmt asc limit 0,1;
..this returns gmt: 2012-05-03
select gmt from history.cachemap order by gmt desc limit 0,1;
..this returns gmt: 2012-09-15 
```

关于我正在使用的数据库的一些背景知识，我正在尝试从数百万条记录的列表中获取最早和最新的日期字段。

本周早些时候，我发布了这个问题：

[如何将三个 MySQL 查询合二为一？](https://stackoverflow.com/questions/12469931/more-than-one-mysql-query)

这个问题得到了完美的回答，但不适用于这种类型的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:54:08.897

```
(select gmt from history.cachemap order by gmt asc limit 0,1)
UNION
(select gmt from history.cachemap order by gmt desc limit 0,1) 
```

文档：[UNION 语法](http://dev.mysql.com/doc/refman/5.5/en/union.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:55:49.590

```
select 
    (select min(gmt) from history.cachemap),
    (select max(gmt) from history.cachemap) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:57:40.007

更有效的方法，但返回两列而不是一列，将是：

```
select MIN(gmt) AS mingmt, MAX(gmt) AS maxgmt
   FROM history.cachemap; 
```

使用索引`gmt`，在 MySQL 中，它应该是即时的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T17:58:32.173

我认为最好的方法是使用 max 和 min 函数。您可以将结果作为一行获得：

```
select min(gmt), max(gmt)
from history.cachemap 
```

这是最有效的解决方案，因为它只涉及一次数据传递。

或者，您可以使用 union all 将其分成两行：

```
select 'min' as which, min(gmt)
from history.cachemap union all
select 'max', max(gmt)
from history.cachemap 
```

UNION/UNION ALL 不会以指定的顺序返回行，因此您应该包含有关哪个是哪个的信息（或显式排序）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T17:58:34.857

这可以在单个查询中完成，如下所示：

```
SELECT MIN(gmt), MAX(gmt) FROM history.cachemap 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T17:55:25.750

你可以这样做：

```
SELECT GMT FROM HISTORY.CACEMAP ORDER BY GMT DESC LIMIT 0,1 UNION SELECT GMT FROM HISTORY.CACEMAP ORDER BY GMT ASC LIMIT 0,1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T17:58:11.447

如果 history.cachemap 包含数百万条记录（行），使用它可能会更好

```
SELECT gmt FROM history.cachemap WHERE gmt = max(gmt) OR gmt = min(gmt) ... 
```

类似的东西..注意，使用 UNION 你实际上对同一个表执行了两次相同的查询，其中包含数百万条记录。

# c++ - g++ 致命错误：没有输入文件窗口

> ID：12518087
> 
> 赞同：0
> 
> 时间：2012-09-20T17:51:57.430
> 
> 标签：c++, compilation, g++, cmd

我正在尝试为 c++ 设置 Windows 编程环境。我使用 Visual Studio 编写代码，但我的大学希望我使用 g++ 编译器。到目前为止，我设法使用 cmd 将 g++ 与 PATH 链接，但这还不是全部。我必须使用 linux 中的别名：

```
p1++="g++ -ansi -Wall -O2 -DNDEBUG -Wextra -Werror -Wno-uninitialized -Wno-sign-compare -Wshadow 
```

我使用命令 doskey 尝试了相同的操作：

```
doskey p1=g++ -ansi -Wall -O2 -DNDEBUG -Wextra -Werror -Wno-uninitialized -Wno-sign-compare -Wshadow 
```

它可以工作，但每当我使用例如：

```
p1++ hello.cpp 
```

它说

```
g++: fatal error: no input files
compilation terminated. 
```

但如果我使用：

```
g++ hello.cc 
```

它确实可以编译，所以我的问题是所有这些代码是什么意思，我怎样才能摆脱这个错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:13:58.223

test.cpp（假设存在于 C:\test.cpp）：

```
#include <iostream>
int main(void) { std::cout << "hello" << std::endl; return 0; } 
```

这是在我的 Windows CMD 提示符下的样子：

注意：别名中没有引号，并且假定它`g++`已经在您的`PATH`.

```
C:\>set p1++=g++ -ansi -Wall -O2 -DNDEBUG -Wextra -Werror -Wno-uninitialized -Wno-sign-compare -Wshadow

C:\>%p1++%
g++: fatal error: no input files
compilation terminated.

C:\>%p1++% test.cpp

C:\>a.exe
hello

C:\>doskey p1++=%p1++% $*

C:\>p1++ test.cpp

C:\>a.exe
hello 
```

如果您想让`%p1++%`环境变量在 CMD 提示中保持不变，那么您需要将环境变量添加到您的 Windows 用户配置文件中。

在 Windows 7 上：

```
Control Panel => System => Advanced System Settings => Environment Variables. 
```

`p1++`使用 name =和 value =创建一个新的用户变量`g++ -ansi -Wall -O2 -DNDEBUG -Wextra -Werror -Wno-uninitialized -Wno-sign-compare -Wshadow`。

# php - 在 Symfony 中更改当前用户的用户对象让我退出

> ID：12518088
> 
> 赞同：0
> 
> 时间：2012-09-20T17:52:05.980
> 
> 标签：php, symfony

我有以下代码：

```
public function editAction(Request $request)
{
    $user = $this->get('security.context')->getToken()->getUser();

    // Get the user
    $user2 = $this->getDoctrine()
        ->getRepository('OpinionsUserBundle:User')
        ->findOneById($user->id);

    echo $user->email . '<br>'; // Echo me@example.org
    echo $user2->email . '<br>'; // Echo me@example.org

    $user2->email = 'blah';

    echo $user->email; // Echoes blah
    die();
} 
```

所以我知道 Doctrine 必须对引用做一些事情。问题是我有一个表单，用户可以在其中更改他们的姓名和电子邮件，但如果电子邮件已经在使用中，我想显示一个错误。然而，当我检查验证时，Symfony 将数据绑定到用户对象，因此会话正在以某种方式更新为新的用户对象，让我退出或更改我的用户。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:30:08.303

如果我的表单验证失败，我最终使用的解决方案是刷新用户模型（将其恢复到原始状态）。

```
// Reset to default values or else it will get saved to the session
$em = $this->getDoctrine()->getManager();
$em->refresh($user); 
```

# single-sign-on - facebook-ios-sdk 是否使用 iOS 6 Facebook 集成来支持登录而不打开本机 Facebook 应用程序？

> ID：12518092
> 
> 赞同：3
> 
> 时间：2012-09-20T17:52:24.147
> 
> 标签：single-sign-on, ios6, facebook-ios-sdk

我试图弄清楚最新的 facebook-ios-sdk (v3.0.8) 是否应该自动利用新的 iOS 6 Facebook 集成来支持“使用 Facebook 登录”而不委托给原生 Facebook 应用程序。

[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)上的帖子说：“在 iOS 6 中，Apple 正在将 Facebook 集成直接引入 iOS，这进一步简化了流程”和“当您尝试使用 Facebook 登录时，iOS 版 Facebook SDK 将自动选择最佳选项”。

在我在 iOS 6 上的应用程序中，Facebook 登录仍然委托给 Facebook 应用程序（我在 iOS 设置屏幕中登录到 Facebook，我相信其他一切都正常）。有谁知道 Facebook 登录在 iOS 6 上的具体行为？该过程是否应该与 iOS 5 上的不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:40:01.047

在[https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)上显示以下消息：

> 升级到 3.0 SDK。在接下来的几周内，我们将添加对 SDK 中备受期待的 iOS 6 集成的支持。

所以，不幸的是，看起来我们必须要有耐心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:37:33.253

这是来自 Facebook 的 Shireesh。正如 Robin 所说，与 iOS 6 集成的 iOS SDK 更新将在未来几周内很快发布。它将支持从 iOS 6 设置进行本机登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:22:00.920

它于今天发布，Facebook iOS SDK 3.1 带有原生登录和原生分享。

# r - 使用 Ecdf 的绘图的错误标记轴

> ID：12518094
> 
> 赞同：1
> 
> 时间：2012-09-20T17:52:27.853
> 
> 标签：r

我正在尝试使用以下代码绘制图表：

```
Require(Hmisc)
Ecdf(ceac_primary,xlab="axis label",xlim=c(5000,50000),q=c(0.9,0.1),
ylab="Probability of Success",main="CEAC") 
```

其中 ceac_primary 是具有 1 个变量的 90k 观测值的数据框。

当我包含 'xlab="axis label"' 时，我不断收到以下错误：

```
Error in Ecdf.default(v, group = group, weights = weights, normwt = normwt,  : 
formal argument "xlab" matched by multiple actual arguments 
```

但是，如果我排除代码的 x 轴标签部分，它会很好地绘制图形。

这是一个已知问题吗？如果是，是否有其他方法来绘制 x 轴标签？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:05:40.003

在源代码中挖掘`Ecdf.data.frame`（将 data.frame 传递给时调用的方法`Ecdf`），看起来该函数创建了一个稍后传递给`xlab`参数的对象。因此，在使用 data.frame`xlab`运行时，不应将其作为用户提供的参数。`Ecdf`这是创建`lab`传递给`xlab`within的对象的代码`Ecdf.data.frame`：

```
lab <- if (vnames == "names") 
        nam[j]
    else label(v, units = TRUE, plot = TRUE, default = nam[j]) 
```

然后`Ecdf`用 调用`xlab = lab`，但省略号中的任何参数`Ecdf.data.frame`也传递给`Ecdf`。由于`xlab`不是 的正式论点`Ecdf.data.frame`，这就是您得到错误的原因。

要绕过它，请尝试以下任一方法：

将您的 data.frame 转换为适当类的向量（我想是数字），然后运行

```
Ecdf(ceac_primary_Vec, xlab = "axis label") 
```

或者，您可以使用包`label`中的函数为data.frame 中的一列创建标签`Hmisc`。如果该列被调用`myCol`，您可以运行

```
label(ceac_primary$myCol) <- "axis label"
Ecdf(ceac_primary) 
```

这应该可以正确打印您的轴标签。

# php - PHP session_start 作为安全性

> ID：12518095
> 
> 赞同：0
> 
> 时间：2012-09-20T17:52:30.393
> 
> 标签：php, security, session

我正在为一个项目制作注册/登录页面。

今天听说`mysql_`扩展已经派发了，我最好不要使用`PDO`. 所以我明白了我对PHP的一点了解已经很老了。

现在我有点困惑是否可以`sessions`用作安全性。

寻找会话的替代方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:56:31.817

If you mean whether its save to trust the information you've put in the $_SESSION: yeah, it is.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:59:19.207

我想你和饼干搞混了。登录会话是必不可少的。他们应该是安全的。记住我的系统使用持久登录 cookie，如果操作不正确，这些cookie 有时会受到安全漏洞的影响。但是一个正常的登录系统不应该需要那个。

[http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:20:59.263

会话本质上不是安全的。在 PHP 中使用会话时，您必须关注基本的会话安全性：

*   公开数据
    *   特别是在共享主机环境中
*   会话固定
*   会话劫持

我建议您阅读[Chris Shiflett 撰写的 Essential PHP Security 的第 4 章](http://phpsecurity.org/contents#ch04)。

# python - 由于 /backends/_macosx.so 导致“导入 matplotlib.pylab”失败原因：找不到图像

> ID：12518098
> 
> 赞同：0
> 
> 时间：2012-09-20T17:52:44.467
> 
> 标签：python, osx-snow-leopard, matplotlib

### 系统和软件版本：

*   OSX 10.7.4
*   用于 Python 2.7 和 OSX 10.6 的 matplotlib 1.1.1，通过 .mpkg 安装。
*   Python 2.7.3，通过 .mpkg 安装。

    > > > 导入 matplotlib.pylabTraceback（最近一次调用最后）：文件“”，第 1 行，在文件“/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7.egg/matplotlib/pylab.py”中，第 265 行，从 matplotlib.pyplot 导入 * 文件“/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7.egg/matplotlib/pyplot.py”，第 97 行，在 new_figure_manager，draw_if_interactive , _show = pylab_setup() 文件“ **/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7.egg/matplotlib/backends/init**.py”，第 25 行，在 pylab_setup globals(),locals(),[backend_name]) 文件“/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7.egg/matplotlib/backends/ backend_macosx.py”，第 21 行，从 matplotlib.backends import _macosx ImportError: dlopen(/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7.egg/matplotlib/backends/_macosx.so, 2）：库未加载：/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText 引用自：/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7.egg/matplotlib /backends/_macosx.so 原因：找不到图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:12:52.240

另见：

[http://www.zqna.net/qna/knuzvt-i-am-getting-this-error-on-using-matplotlib.html](http://www.zqna.net/qna/knuzvt-i-am-getting-this-error-on-using-matplotlib.html)

我的解决方案：

我有 OS X 10.7.5，运行 python 2.7.1，numpy-1.8.0.dev_4600b2f_20130131-py2.7-macosx-10.8-intel.egg，scipy-0.12.0.dev_b69fe18_20130131-py2.7-macosx-10.8-英特尔.egg

以前我得到了你上面列出的错误，matplotlib 1.3 无法找到 CoreText.framework，但是当我恢复到 matplotlib 1.2 时，错误消失了，我能够很好地运行它——我刚刚编辑了 easy_install.pth文件（不确定这是否是解决问题的正确方法，但是我不需要创建符号链接，因为旧的 1.2 版本工作得很好）

简单的安装是 2013 年 2 月 8 日从 fonnesbeck scipy superpack 重新安装的，自去年秋天以来，我一直在努力让所有东西都焕然一新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T16:58:58.850

这对我有用：

```
brew install pkg-config
brew link pkg-config
brew install pygtk
brew install freetype
brew install libpng

sudo ln -s /usr/local/Cellar/freetype/*/lib/pkgconfig/freetype2.pc /usr/local/lib/pkgconfig/freetype2.pc

git clone git@github.com:matplotlib/matplotlib.git
cd matplotlib
python setup.py build
python setup.py install 
```

参考：

[http://blog.caoyuan.me/2012/08/matplotlib-error-mac-os-x/](http://blog.caoyuan.me/2012/08/matplotlib-error-mac-os-x/) [http://matplotlib.org/faq/installing_faq.html#install-from-git](http://matplotlib.org/faq/installing_faq.html#install-from-git) [http://www.tapir .caltech.edu/~dtsang/python.html](http://www.tapir.caltech.edu/~dtsang/python.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:10:13.887

您是否安装了 numpy 1.4 版或更高版本？其他先决条件可以在[http://matplotlib.org/users/installing.html](http://matplotlib.org/users/installing.html)找到。

当我缺少依赖项时，我收到了类似的模棱两可的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:20:49.107

我自己安装 MatplotLib 包时遇到了一些麻烦。在这里查看我的答案我是如何解决的：

[如何检查我的机器上是否安装了 IPython 以及安装这些库的顺序？](https://stackoverflow.com/questions/12361500/how-to-check-whether-i-have-ipython-installed-on-my-machine-and-what-sequence-to/12361575#12361575)

# python - 无法使用 mechanize 使用 python 选择表单

> ID：12518102
> 
> 赞同：2
> 
> 时间：2012-09-20T17:52:57.213
> 
> 标签：python, forms, mechanize-python

我正在尝试使用 python 选择一个表单，但它不起作用。

我正在使用的页面是：http: [//www.safilonet.safilo.com/](http://www.safilonet.safilo.com/)

```
def login(self):
    url = self._baseUrl + '/webapp/commerce/safilo/jsp/logon.jsp'
    self._br.open(url, timeout=30.0)
    self._br.select_form('logon')   
    self._br.form['login'] = self._username
    self._br.form['password'] = self._password
    self._br.submit() 
```

出现的错误是：

```
File "build\bdist.win32\egg\mechanize\_mechanize.py", line 524, in select_form
mechanize._mechanize.FormNotFoundError: no form matching name 'logon' 
```

你能帮我么？谢谢

# android - 旋转设备后，EditText.getText() 在 onPause 中从不同视图返回文本

> ID：12518104
> 
> 赞同：2
> 
> 时间：2012-09-20T17:53:01.350
> 
> 标签：android

我在这里有一个 EditText 视图的奇怪问题。在方向更改后的 onPause() 中，EditText 视图通过从未分配给它的 getText() 返回文本。

事实上，所讨论的 EditText 对象只分配了一个空字符串。在错误情况下，它返回分配给*不同*TextView 的部分文本（！）。

但是，如果通过按“返回”键触发 onPause，则*不会*发生这种情况。

任何人都可以给我一个线索吗？我不明白这里发生了什么：

我的活动：

```
package com.example.rotationtest;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    private final String LOG_TAG = "Test";
    private EditText mEditText;
    private TextView mTextView;
    private EditOk mEditOk;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mTextView = (TextView) findViewById(R.id.title);
        mEditText = (EditText) findViewById(R.id.editText);
        mEditText.setText("");

        mEditOk = new EditOk() {

            @Override
            public void ok(String result) {
                mTextView.setText(result);
            }
        };

        editTextDialog(R.string.dialog_title, (CharSequence)getString(R.string.dialog_title), mTextView.getText().toString(), mEditOk);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    abstract class EditOk {
        abstract public void ok(String result);
    }

    void editTextDialog(int titleId, CharSequence message, String text,
            final EditOk ok) {
        LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.edittext_dialog,
                                       (ViewGroup) findViewById(R.id.layout_root));

        TextView messageView = (TextView) layout.findViewById(R.id.text);
        messageView.setText(message);
        final EditText input = (EditText) layout.findViewById(R.id.editTextDialog);
        Log.d(LOG_TAG, "input = " + input);
        input.setTransformationMethod(android.text.method.SingleLineTransformationMethod.getInstance());
        input.setText(text);
        new AlertDialog.Builder(this)
            .setTitle(titleId)
            .setView(layout)
            .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            String newName = input.getText().toString();
                            if (newName.length() != 0) {
                                ok.ok(newName);
                            }
                        }})
            .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    setResult(RESULT_CANCELED);
                    finish();
                }
            })
            .create().show();
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.d(LOG_TAG, "onPause: editText is " + mEditText.getText());
    }
} 
```

和布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="false"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <EditText
        android:id="@+id/editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/title"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="22dp"
        android:ems="10"
        android:inputType="textMultiLine" />

</RelativeLayout> 
```

有一个 AlertDialog 涉及它的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root" android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:paddingLeft="20dp" android:paddingRight="20dp" android:paddingBottom="20dp" android:paddingTop="15dp" android:layout_gravity="top">
    <TextView android:id="@+id/text" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:textColor="#FFF"
        android:gravity="top" android:textSize="16sp" android:paddingBottom="20dp"/>

    <EditText
        android:id="@+id/editTextDialog"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <requestFocus></requestFocus>
    </EditText>
</LinearLayout> 
```

现在的步骤是：

*   纵向开始活动。弹出一个对话框，其中包含一个 EditText，预填充“Hello World！”
*   将“zzz”附加到“Hello world！”

![在此处输入图像描述](../Images/6a3f11091389bbdcda5cb92344d420d7.png)

*   按确定。“Hello world！zzz”现在分配给 Activity 上的 TextView。

![在此处输入图像描述](../Images/9aef92c4c2c23d1d9753f8207da3d556.png)

*   现在将设备旋转到横向。在 onPause 中，mEditText.getText() 现在返回“zzz”，尽管 mEditText 根本没有被触及。

有任何想法吗？我的期望是 mEditText.getText() 总是返回“”。如果您重复这些步骤，但通过按下而不是旋转设备来触发 onPause()，getText() 确实会按预期返回 ""。为什么不旋转设备时？

附加说明：我注意到软键盘似乎是问题出现所必需的。在具有“键盘支持 = 是”的模拟器上，问题不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T07:26:53.687

我对 EditText 有同样的问题。在论坛中，我发现设置`android:inputType="textNoSuggestions"`解决了这个问题，我不知道它是如何工作的，但它在摩托罗拉 Et1 平板电脑（Android 2.3）上运行良好。

# math - 如何根据个人概率查找丢弃的物品数量？

> ID：12518105
> 
> 赞同：0
> 
> 时间：2012-09-20T17:53:04.080
> 
> 标签：math, random, sum, probability

我的目标是独立计算敌人被杀死后会掉落的物品数量。例如，假设有 50 种药水，每种药水都有 50% 的几率掉落，我想根据独立试验随机返回一个从 0 到 50 的数字。

目前，这是我正在使用的代码：

```
int droppedItems(int n, float probability) {
    int count = 0;
    for (int x = 1; x <= n; ++x) {
        if (random() <= probability) {
            ++count;
        }
    }
    return count;
} 
```

其中probability 是从0.0 到1.0 的数字，random() 返回0.0 到1.0，n 是要丢弃的最大项目数。这是在 C++ 代码中，但是，我实际上使用的是 Visual Basic 6 - 所以没有库可以帮助解决这个问题。

这段代码完美无缺。但是，我想对此进行优化，以便如果 n 恰好是 999999，它不会永远花费（它目前确实如此）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:56:54.470

Use the binomial distribution. [Wiki - Binomial Distribution](http://en.wikipedia.org/wiki/Binomial_distribution)

Ideally, use the libraries for whatever language this pseudocode will be written in. There's no sense in reinventing the wheel unless of course you are trying to learn how to invent a wheel.

Specifically, you'll want something that will let you generate random values given a binomial distribution with a probability of success in any given trial and a number of trials.

**EDIT :**

I went ahead and did this (in python, since that's where I live these days). It relies on the very nice numpy library (hooray, abstraction!):

```
>>>import numpy
>>>numpy.random.binomial(99999,0.5)
49853
>>>numpy.random.binomial(99999,0.5)
50077 
```

And, using `timeit.Timer` to check execution time:

```
# timing it across 10,000 iterations for 99,999 items per iteration
>>>timeit.Timer(stmt="numpy.random.binomial(99999,0.5)", setup="import numpy").timeit(10000) 
0.00927[... seconds] 
```

**EDIT 2 :**

As it turns out, there isn't a simple way to implement a random number generator based off of the binomial distribution.

There is an algorithm you can implement without library support which will generate random variables from the binomial distribution. [You can view it here as a PDF](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CCsQFjAB&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.47.8407%26rep%3Drep1%26type%3Dpdf&ei=hm5bUPeREcTj0QHrpYF4&usg=AFQjCNEbbjcA3zKUsq9v0j76nZkzKToRTw)

My guess is that given what you want to use it for (having monsters drop loot in a game), *implementing the algorithm is not worth your time*. There's room for fudge factor here!

I would change your code like this (note: this is not a binomial distribution):

1.  Use your current code for small values, say `n` up to `100`.
2.  For `n` greater than one hundred, calculate the value of `count` for `100` using your current algorithm and then multiply the result by `n/100`.

Again, if you really want to figure out how to implement the BTPE algorithm yourself, you can - I think the method I give above wins in the trade off between effort to write and getting "close enough".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:46:06.020

正如@IamChuckB 已经指出的那样，关键词是二项分布。当伯努利试验的数量（您的示例中的项目数量）足够大时，[泊松分布](http://en.wikipedia.org/wiki/Poisson_distribution)是一个很好的近似值，它的计算和绘制数字要简单得多（确切的算法在链接的维基百科文章中有详细说明）。

# sql-server - VB.Net 和存储过程的日期时间问题

> ID：12518106
> 
> 赞同：0
> 
> 时间：2012-09-20T17:53:10.613
> 
> 标签：sql-server, vb.net

我正在使用 vb 运行 SQL Server 2000 和经典 asp。我对一个接受名为 start 和一个名为 end 的日期时间的存储过程感到非常头疼。我试图将今天的日期减去一周作为 date1 发送到存储过程，但我什至无法让它发送今天的日期。

```
If date1 = "" Then
    date1 = now() 'eventually want to subtract 7 days from this
End If
If date2 = "" Then
    date2 = now()
End If 
```

对于除日期之外的其他输入参数，我的存储过程运行良好。这是我附加开始日期的地方。

```
 .Parameters.Append cmdTmp2.CreateParameter("start",135,1,,date1) '129=adChar, 1=adParamInput
    .Parameters.Append cmdTmp2.CreateParameter("end",135,1,,date2) '129=adChar, 1=adParamInput 
```

我收到一个错误：将数据类型 char 转换为日期时间时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:59:43.667

`DateTime.Now`会给出今天的日期和时间。Date.Today 将给出今天的日期。 `DateAdd(DateInterval.Day,-7, Date.Today)`会在今天前 7 天做。

编辑：您的存储过程需要什么类型的参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:18:41.110

您需要将实际`Date`对象传递给该`CreateParameter`方法。`date1`由于在声明and时没有指定类型`date2`，因此它们可以引用任何类型的对象，这使事情变得复杂。最简单的做法是将它们声明为`Date`类型变量，例如：

```
Dim date1 As Date
Dim date2 As Date
If date1 = Date.MinValue Then
    date1 = Date.Today.AddDays(-7)
End If
If date2 = Date.MinValue Then
    date2 = Date.Today
End If 
```

如果你这样做，它应该可以正常工作。如果由于某种原因您需要它们作为基本对象类型，那么您必须`Date`在传递它们之前解析它们或将它们转换为适当的对象（取决于它们的类型）。

# ruby-on-rails - 使 fields_for 块有条件

> ID：12518109
> 
> 赞同：0
> 
> 时间：2012-09-20T17:53:30.073
> 
> 标签：ruby-on-rails, ruby, forms, devise, haml

我有一个用户模型和一个讲师模型。用户和讲师之间存在一对一的关系。有些用户将成为讲师，有些则不会。因此，我有一个注册表单，它使用 fields_for 方法写入两者。

**只有在他们说自己是讲师的情况下，我如何才能写信给讲师表，例如通过复选框。当他们写信时，我想保持对表格的验证以及表格的其余部分**

理想情况下，如果我可以通过模型做到这一点，这将是最好的，但我愿意接受所有建议。

教练模式

```
class Instructor < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :school_url, :etc...
  attr_accessible :school_url, :etc...
end 
```

用户模型

```
class User < ActiveRecord::Base
  has_one :instructor, :dependent => :destroy

  validates_uniqueness_of :email
  validates :email, :confirmation => true

  accepts_nested_attributes_for :instructor

  attr_accessible :email, :password, :instructor_attributes, :etc
end 
```

HAML 中的表格

```
- resource.build_instructor
- form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
  = hidden_field_tag :destination, { :value => destination}
    .field
      = f.label :firstname, "First Name"
      = f.text_field :firstname
    .field
      = f.label :lastname, "Last Name"
      = f.text_field :lastname
    .field
      = f.label :email, "E-Mail"
      = f.email_field :email
    .field
      = f.label :email_confirmation, "Confirm E-Mail"
      = f.email_field :email_confirmation
    .field
      = f.label :password
      = f.password_field :password
    .field 
      = f.label :password_confirmation, "Confirm Password"
      = f.password_field :password_confirmation
  #instructor-box
    %p
      %span.bold Are you an instructor?
      = check_box_tag :instructor_check
      %span Yes, I am an instructor
    = f.fields_for :instructor do |i|
      = render "/users/registrations/instructor", :form => i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:24:07.743

我解决了这个问题。现在看来一切都太明显了。为了使 fields_for 被取消，我所要做的就是删除由控制器中的表单创建的instructor_attributes。例如：

创造

```
# params[:user] => {:email => "justin@example.edu", ..., :instructor_attributes => { :school_url => "www.example.edu", ...}
# params[:instructor_check] => "0" 
```

鉴于传递了这些参数，我可以轻松删除要保存的属性，并且 rails 不再尝试为要与用户关联的讲师创建新记录。这实际上是我使用的代码。不是最优雅的，但它有效。

```
params[:user].delete :instructor_attributes if params[:instructor_check] = "0" 
```

这表明没有为用户创建教师资料，因此不会写入表。在它发回空白属性和验证失败之前。

# posix - pathconf(..., _PC_NAME_MAX) 提供什么保证？

> ID：12518110
> 
> 赞同：4
> 
> 时间：2012-09-20T17:53:39.647
> 
> 标签：posix, readdir

**语境：**

该[`readdir_r`](http://linux.die.net/man/3/readdir_r)函数用于从 a 读取下一个条目`DIR*`（还有`readdir`，但这不是线程安全的）。`readdir_r`接受一个指向用户分配缓冲区的指针来保存输出`dirent`。手册页指出此缓冲区所需的大小在不同系统上可能不同，并提供了如何在运行时找到安全长度的示例：

```
len = offsetof(struct dirent, d_name) + pathconf(dirpath, _PC_NAME_MAX) + 1; 
```

（警告：上面有一个竞争条件，可以通过使用`dirfd`获取打开的文件描述符`DIR*`并使用`fpathconf`而不是来避免`pathconf`）

**问题：**

查看联机帮助页[`pathconf`](http://linux.die.net/man/3/pathconf)，它指出：

> **_PC_NAME_MAX** 返回允许进程创建的目录路径或 fd 中文件名的最大长度。对应的宏是_POSIX_NAME_MAX。

但是，在注释部分中，它指出：

> 名称长度长于名称等于 _PC_NAME_MAX 的返回值的文件可能存在于给定目录中。

这个注释是真的吗？如果是这样，`readdir_r`手册页中的示例代码是否不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:10:33.157

对 {NAME_MAX} 的解释不符合 POSIX。POSIX 表示，实现必须将长于 {NAME_MAX} 的名称视为错误，并且`d_name`{NAME_MAX}+1 字节的缓冲区就足够了。

另一种选择（POSIX.1-2008）是使用`scandir()`线程安全的，并从调用者那里抽象出这个问题。不幸的是，没有`scandirat()`或`fscandir()`在任何版本的 POSIX 中。

`readdir()`在许多系统上，只要对返回的最后一次访问`struct dirent`发生在下一次调用之前`readdir()`（这遵循对结构有效性的现有要求），使用它也是安全的。我认为 POSIX 没有理由不允许这样做。`readdir_r()`需要相当多的额外代码，这会使事情变得更慢和更复杂。

# c++ - 如何在 GLUT 上加载 bmp 以将其用作纹理？

> ID：12518111
> 
> 赞同：18
> 
> 时间：2012-09-20T17:53:41.003
> 
> 标签：c++, opengl, textures, glut, bmp

我一直在寻找一个简单的解决方案，以在 c++ 中将精灵添加到我的 OpenGL GLUT 简单月球着陆器游戏中，看来我必须使用 bmp，因为它们最容易加载并将它们用作矩形上的纹理。

我如何才能将 bmp 加载为纹理呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-21T03:54:17.397

看我简单的 c 实现函数来加载纹理。

```
GLuint LoadTexture( const char * filename )
{
  GLuint texture;
  int width, height;
  unsigned char * data;

  FILE * file;
  file = fopen( filename, "rb" );

  if ( file == NULL ) return 0;
  width = 1024;
  height = 512;
  data = (unsigned char *)malloc( width * height * 3 );
  //int size = fseek(file,);
  fread( data, width * height * 3, 1, file );
  fclose( file );

  for(int i = 0; i < width * height ; ++i)
  {
    int index = i*3;
    unsigned char B,R;
    B = data[index];
    R = data[index+2];

    data[index] = R;
    data[index+2] = B;
  }

  glGenTextures( 1, &texture );
  glBindTexture( GL_TEXTURE_2D, texture );
  glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,GL_MODULATE );
  glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_NEAREST );

  glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR );
  glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,GL_REPEAT );
  glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,GL_REPEAT );
  gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height,GL_RGB, GL_UNSIGNED_BYTE, data );
  free( data );

  return texture;
} 
```

上面的函数返回纹理数据。将纹理数据存储在变量中

```
GLuint texture;
texture= LoadTexture( "your_image_name.bmp" ); 
```

现在您可以使用 glBindTexture 绑定纹理

```
glBindTexture (GL_TEXTURE_2D, texture); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T17:59:13.823

从 OpenGL_3_2_Utils 查看我的 TextureLoader (TextureLoader.h + TextureLoader.cpp)：

[https://github.com/mortennobel/OpenGL_3_2_Utils](https://github.com/mortennobel/OpenGL_3_2_Utils)

这两个文件不依赖于任何其他文件，并且应该在任何版本的 OpenGL（和任何平台）上无缝工作。示例用法可以在文件注释中找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T02:23:00.940

您可以使用库 GLAUX 和[SOIL(Simple OpenGL Image Library)](http://www.lonesock.net/soil.html)。还有[其他用于 OpenGL 的图像库](http://www.opengl.org/wiki/Image_Libraries)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-01T10:43:14.160

> 如何在 GLUT 上加载 bmp 以将其用作纹理？

另一个非常简单的解决方案是使用[STB 库](https://stb.handmade.network/)，它可以在[GitHub-nothings/stb](https://github.com/nothings/stb)中找到。

所需要的只是一个源文件，即头文件“stb_image.h”。它不需要链接任何库文件或编译任何其他源文件。

包含头文件并通过设置预处理器定义启用图像读取`STB_IMAGE IMPLEMENTATION`：

```
#define STB_IMAGE_IMPLEMENTATION
#include <stb_image.h> 
```

图像文件可以通过函数读取`stbi_load`：

```
const char *filename = .....; // path and filename
int         req_channels = 3; // 3 color channels of BMP-file   

int width = 0, height = 0, channels = 0;
stbi_uc *image = stbi_load( filename, &width, &height, &channels, 3 ); 
```

当图像加载到纹理对象时，[`GL_UNPACK_ALIGNMENT`](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glPixelStore.xhtml)必须设置为 1。
默认`GL_UNPACK_ALIGNMENT`为 4，因此假定图像的每一行对齐为 4 个字节。一个 BMP 文件的共同像素大小为 3 个字节，并且被紧密打包，这会导致错位。
加载图像后，可以通过以下方式释放内存`stbi_image_free`：

```
GLuint texture_obj = 0;
if ( image != nullptr )
{
    glGenTextures(1, &texture_obj);
    glBindTexture(GL_TEXTURE_2D, texture_obj);

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, image);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 4); // default

    stbi_image_free( image );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-23T10:38:34.803

改良版

```
GLuint LoadTexture(GLuint tex, const char * filename, int width, int height)
{
//bmp 24 bit
unsigned char * data;
unsigned char R,G,B;
FILE * file;

//open .bmp
file = fopen(filename, "rb");

if(file == NULL)return 0;
//get memory for data
data =(unsigned char *)malloc(width * height * 3);
//data skip offset 
fseek(file,128,0);
//read file to data
fread(data, width * height * 3, 1, file);
//close file
fclose(file);

//transpose R,G,B values
int index;
for(int i = 0; i < width * height ; ++i)
    {
    index = i*3;
    B = data[index]; G = data[index+1]; R = data[index+2];
    data[index] = R; data[index+1] = G; data[index+2] = B;
    }

//create a texture
glGenTextures(1, &tex);
glBindTexture(GL_TEXTURE_2D, tex);
gluBuild2DMipmaps(GL_TEXTURE_2D, 3, width, height,GL_RGB, GL_UNSIGNED_BYTE, data);

//texture filtering
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
//glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

//free memory
free(data);
return 0;
}

void init(void)
{
//texture loading, bmp 24 bit
LoadTexture(1, "01.bmp", 316, 316);
LoadTexture(2, "02.bmp", 316, 316);
LoadTexture(3, "05.bmp", 316, 316);
LoadTexture(4, "03.bmp", 316, 316);
LoadTexture(5, "06.bmp", 316, 316);
LoadTexture(6, "04.bmp", 316, 316);

. . . . . . . . . . . . 
```

[![在此处输入图像描述](../Images/2de70e098c1095cff12cd45c52f533fc.png)](https://i.stack.imgur.com/ZWWpR.png)

Linux

gcc cube.c -o cube -lglut -lGL -lGLU

视窗

tcc cube.c -o cube.exe -LC:\tcc\lib -lopengl32 -lglu32 -lglut32 -Wl,-subsystem=windows

# java - 如何在javascript中访问java包

> ID：12518113
> 
> 赞同：0
> 
> 时间：2012-09-20T17:53:44.177
> 
> 标签：java, javascript

我正在编写简单的 javascript。脚本是

```
document.write("Before script");
var test=new java.lang.String();
test="Test"
document.write(test); 
```

对于上面的脚本得到以下错误

```
Uncaught ReferenceError: java is not defined 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:53:56.970

你不能做这样的声明：

```
var test=new java.lang.String(); 
```

在 JavaScript 中。Javascript 不共享 Java API，它是一种完全不同的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:55:39.037

You cannot access Java objects (without some other in between) from JavaScript since they are two different languages. It should also be noted "var" does not stand for "variable" but rather for "variant" since it can hold many different types in itself. This means you don't need to create a new string or int before setting it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:56:13.130

JavaScript, despite the name, is not a scripting language for Java. They have little relation to each other besides the syntax. You'll have to learn a new language to write JavaScript programs.

Your script in particular should be:

```
document.write("Before script");
var test = "Test";
document.write(test); 
```

# java - 将jena模型导出到json文件

> ID：12518115
> 
> 赞同：2
> 
> 时间：2012-09-20T17:53:54.300
> 
> 标签：java, json, jena

嘿，我正在尝试制作 Web 服务，并且正在使用 Jena distibition。目前我已经创建了我的模型并以 RDF/XML 格式打印出来。我想将我的数据保存在我的硬盘中的 JSON 文件中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:43:00.127

1.  `org.openjena.riot.out.RDFJSONWriter`编写 Talis 风格的 RDF/JSON（即不是 JSON-LD）。
2.  寻找 JSON-LD 编写器（我认为有读取 RDF 并编写 JSON-LD 的编写器）
3.  使用 SPARQL JSON 结果格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:42:46.043

现在 Jena RIOT 阅读器/编写器也支持 RDF/JSON 序列化；那么您只需要执行以下操作：

```
org.openjena.riot.RIOT.init(); //wires RIOT readers/writers into Jena
java.io.OutputStream os = null;
// Serialize over an outputStream
os = new java.io.ByteArrayOutputStream();
model.write(os, "RDF/JSON", relativeUriBase); 
```

# linux - Linux 查找命令

> ID：12518116
> 
> 赞同：3
> 
> 时间：2012-09-20T17:53:57.150
> 
> 标签：linux, command, find, wildcard

FIND 命令我做错了什么？我不知道为什么会这样：

```
find /home/michael/foxpro/mount/A1/[12][0-9][0-9][0-9] "*.dbf" -type f -exec ln -s {} \;
find /home/michael/foxpro/mount/AF/[12][0-9][0-9][0-9] "*.dbf" -type f -exec ln -s {} \;
find /home/michael/foxpro/mount/AV/[12][0-9][0-9][0-9] "*.dbf" -type f -exec ln -s {} \; 
```

但这不是：

```
find /home/michael/foxpro/mount/[A1][AF][AV]/[12][0-9][0-9][0-9] "*.dbf" -type f -exec ln -s {} \; 
```

我的文件夹结构如下所示：

```
...../mount/A1/2012/file1.dbf
...../mount/A1/2011/file2.dbf
...../mount/A1/2010/file3.dbf
...../mount/AF/2012/file4.dbf
...../mount/AF/2011/file5.dbf
...../mount/AF/2010/file6.dbf
... 
```

当我硬编码倒数第二个目录时的第一个脚本查找扫描我所有的年份目录但在我的第二个脚本中它只是给我一个“没有这样的文件或目录”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:58:29.247

该模式`[A1][AF][AV]`匹配以下文件/目录：AAA、AAV、AFA、AFV、1AA、1AV、...</p>

要匹配目录`A1`, `AF`, `AV`，请使用模式`A[1FV]`or `{A1,AF,AV}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:57:21.070

尝试：

```
find /home/michael/foxpro/mount/A[1FV]/[12][0-9][0-9][0-9] -name '*.dbf' -type f -exec ln -s {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:58:05.543

这不是 find 的问题，而是 shell 语法的问题。这是问题所在：

```
[A1][AF][AV] 
```

这为您提供了 AAA、1FV、AFV 等组合。括号语法匹配每个组中的一个字符，它不是组之间的选择。

就您而言，我认为这应该可行：

```
/home/michael/foxpro/mount/A[1FV]/[12][0-9][0-9][0-9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:01:38.447

我相信问题出在你的正则表达式上。您所拥有的是：/[A1][AF][AV]/ 它将匹配 AAA、AAV、AFA、AFV、1AA、1AV、1FA 和 1FV。你真正需要的是这个，因为每个字母块 [] 匹配一个字符：/A[1FV]/

由于您的每个示例都以字母 A 开头，因此您不需要在 [] 中使用它。

# c# - 如何获取指向 IShellView2 接口的指针

> ID：12518118
> 
> 赞同：2
> 
> 时间：2012-09-20T17:54:05.650
> 
> 标签：c#, windows, shell32

我们需要在我们的应用程序中托管类似资源管理器的浏览器窗口。由于需要保持与 Windows XP 的兼容性，我们不能使用新的 IExplorerBrowser。

主要问题是我们需要默认以“大图标”模式显示项目。不幸的是，使用 FOLDERSETTINGS.viewMode = 0x1 /* LargeIcon */ 调用 IShellVIew.CreateViewWindow() 不会将视图模式更改为所需的。但我可以通过窗口中的上下文菜单手动执行此操作。

所以我们需要设置“大图标”查看模式。我没有找到任何以编程方式获取视图本身的上下文菜单的方法。

然后，我发现 IShellView2 似乎需要走的路 - IShellView2.CreateViewWindow2() 接收视图模式作为 GUID 而不是预定义的 const。但是无法访问界面！

IShellFolder.CreateViewObject(hwndOwner, typeof(IShellView).GUID) 返回正确的实例。但是当我尝试 IShellFolder.CreateViewObject(hwndOwner, typeof(IShellView2).GUID) 我有异常“指定的演员表无效”。

如何获取 IShellView2 接口的对象？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:50:51.330

调用 IShellView 对象上的 QueryInterface 方法来向它询问 IID_IShellView2。

# ruby-on-rails - devise_current_user 和 current_user 问题

> ID：12518122
> 
> 赞同：1
> 
> 时间：2012-09-20T17:54:44.270
> 
> 标签：ruby-on-rails, devise

在我的 ApplicationController 类中，我需要覆盖设备的 current_user 以使用我自己的定义，但在某些情况下，我还需要设备的 current_user。我尝试了类似的东西

```
alias_method :devise_current_user, :current_user
def current_user 
```

但这似乎不起作用。我在 alias_method 行上得到了一个未定义的方法 current_user。我已经在别处问过这个问题（[Override current_user in ApplicationController throws undefined method error](https://stackoverflow.com/questions/12465324/override-current-user-in-applicationcontroller-throws-undefined-method-error)）但由于没有回答，我想知道我是否可以做类似的事情：

```
def devise_current_user
  return Devise::Controllers::Helpers.current_user
end 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:15:31.453

你应该能够做你所做的：

```
def devise_current_user
  current_user
end 
```

# android - 带有 2 个以上按钮的对话框

> ID：12518124
> 
> 赞同：3
> 
> 时间：2012-09-20T17:54:58.183
> 
> 标签：android, button, dialog

我有一个对话框：标题、消息和 2 个按钮（中性和否定）我试图放置另一个中性或否定按钮，但它只显示每个按钮（中性和否定），所以有没有办法放置一个按钮或我必须创建对话框的自定义布局吗？如果是这样，该怎么做？

代码：

```
 AlertDialog.Builder dialogo = new AlertDialog.Builder(this);      
    dialogo.setMessage(msg);
    dialogo.setTitle(titulo);
    dialogo.setNeutralButton("OK", null);
    dialogo.setNegativeButton("Delete", deletar);
    dialogo.show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:56:54.877

您可以使用添加第三个按钮，`setPositiveButton`但除此之外，您必须设置自定义视图。要设置自定义视图，您只需`setView(yourView)`使用`AlertDialog.Builder`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T17:56:57.473

默认情况下，您最多可以有三个按钮，即 Neutral、Negative 和 Positive。除此之外，您要么需要在对话框中使用自定义布局，要么创建自己的对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T14:45:14.170

您可以使用带有可点击选项列表的默认 Android 对话框。

```
 String[] dialogOptions = new String[]{ "Option 0", "Option 1", "Option 2", "Option 3"};
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle("DIALOG TITLE")
           .setItems(dialogOptions, new DialogInterface.OnClickListener() {
                 public void onClick(DialogInterface dialog, int which) {
                      switch (which){
                           case 0:
                                //Option #0 picked, do something
                                break;
                           case 1:
                                //Option #1 picked, do something
                                break;
                           case 2:
                                //Option #2 picked, do something
                                break;
                           case 3:
                                //Option #3 picked, do something
                                break;
                      }
                 }
           })
           .create()
           .show(); 
```

**注意：**在我的测试中，setMessage() 和 list 不能一起工作，所以我建议你只使用 setTitle() 并跳过 setMessage()。来源：[https ://developer.android.com/guide/topics/ui/dialogs#AddingAList](https://developer.android.com/guide/topics/ui/dialogs#AddingAList)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-12T17:41:47.787

## 简单的 ...

```
void multiPopup() {
    AlertDialog.Builder ad = new AlertDialog.Builder(context);
    ad.setTitle("Choose one...");
    ad.setItems(
      new String[] {"red", "green", "blue", "cancel"},
      new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            Log.i("dev", "clicked .. " + which);
        }
    });
    ad.create().show();
} 
```

[![在此处输入图像描述](../Images/80454824eb5a6801a78901e052a4b643.png)](https://i.stack.imgur.com/MHKuU.png)

# node.js - Modifying Express.js Request Object

> ID：12518132
> 
> 赞同：43
> 
> 时间：2012-09-20T17:55:28.863
> 
> 标签：node.js, express

In express.js, I would like to provide an additional attribute on the request object for each of my URI listeners. This would provide the protocol, hostname, and port number. For example:

```
app.get('/users/:id', function(req, res) {
  console.log(req.root); // https://12.34.56.78:1324/
}); 
```

I could of course concatenate req.protocol, req.host, and somehow pass around the port number (seems to be missing from the req object) for each one of my URI listeners, but I'd like to be able to do it in a way that all of them could access this information.

Also, the hostname can vary between request (the machine has multiple interfaces) so I can't just concatenate this string when the application launches.

The goal is to provide URI's to the consumer which point to further resources in this API.

Is there some sort of way to tell Express that I want req objects to have this additional information? Is there a better way to do this than what I'm outlining?

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-20T18:13:49.417

您可以添加一个自定义中间件，为每个请求设置属性：

```
app.use(function (req, res, next) {
    req.root = req.protocol + '://' + req.get('host') + '/';
    next();
}); 
```

用于[`req.get`](http://expressjs.com/api.html#req.get)获取`Host`标头，如果需要，该标头应包括端口。

请务必在之前添加它：

```
app.use(app.router); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-23T23:11:18.200

您可以扩展`express.request`原型。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T18:12:50.267

修改请求对象的最好方法是在 app.router 声明之前添加自己的中间件函数。

```
 app.use(function(req, res, next){
      // Edit request object here
      req.root = 'Whatever I want';
      next();
    });
    app.use(app.router); 
```

这将修改请求对象，并且每个路由都可以访问*req.root*属性，所以

```
 app.get('/',function(req, res, next){
      console.log(req.root); // will print "Whatever I want";
    }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-20T18:13:12.507

您可以使用中间件。将此添加到您的`app.configure`块中：

```
app.use(function (req, res, next) {
  req.root = 'WHAT YOU WANT';
  next();
}); 
```

每个请求都会执行此功能，然后通过`next()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-19T09:38:37.420

响应对象支持`res.locals`. 见[http://expressjs.com/en/4x/api.html#res.locals](http://expressjs.com/en/4x/api.html#res.locals)

这对打字稿用户特别有用。该`locals`属性已键入`Record<string, any>`

# assembly - better method for displaying result in Decimal - TASM

> ID：12518134
> 
> 赞同：1
> 
> 时间：2012-09-20T17:55:30.440
> 
> 标签：assembly, x86, tasm

I wanted to write a program that adds two Numbers and show the result in Decimal form, initially it was looking a piece of cake but as it turned out, it wasn't !!! because there is just 0-9 characters in decimal and when we want to add any number greater than those we've to perform some mathematics,

Here is what i've done, I wanted to add two numbers 35 and 39,

**`35 + 39 = 74`**

```
MOV BL,35H
MOV AL,39H
ADD AL,BL

DAA ;Decimal after Addition => the result of it would be 0074H

PUSH AX     ;PRESERVE 0074H

; Separating the two numbers

AND AL,00001111B ; AL => 0000 0100 
ADD AL,30H       ; ; AL => 0004H + 30H = 4 of Decimal

POP AX ;AX = 74H => 01110100

ROR AL,1
ROR AL,1
ROR AL,1
ROR AL,1

AND AL,00001111B ;AL => 0000 0111
ADD Al,30H       ;A: => 0007H + 30H = 7 of Decimal
MOV DL,AL 

MOV AH,4CH ;Return Control to the DOS
INT 21H 
```

**I recovered both the numbers but now how to show the result as '74' ???**

Also , this method is so time consuming, is there any better and more efficient way to do this ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:51:08.180

```
MOV BL,35H
MOV AL,39H
ADD AL,BL

DAA          # al = 74h = 0111.0100

XOR AH,AH    # ah = 0 (just in case it wasn't)
             # ax = 0000.0000.0111.0100

ROR AX,4     # ax = 0100.0000.0000.0111 = 4007h
SHR AH,4     # ax = 0000.0100.0000.0111 = 0407h
ADD AX,3030h # ax = 0011.0100.0011.0111 = 3437h = ASCII "74" (reversed due to little endian) 
```

现在您只需将 AX 复制到缓冲区并打印它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T23:53:59.240

您可以将结果打印为单个字符（'7' 表示 7，'4' 表示 4）或将这些字符组合成一个字符串，在其上附加 '$' 字符并打印该字符串（终端 '$' 不会'不打印）。

DOS 具有打印单个字符（`ah`=2，`dl`=ASCII 字符代码）和以 $ 结尾的字符串（`ah`=9，`ds`：`dx`=$ 结尾字符串的地址）的功能。

# java - Java printing API: java.lang.ClassCastException on custom media size

> ID：12518135
> 
> 赞同：2
> 
> 时间：2012-09-20T17:55:31.347
> 
> 标签：java

The following code throws java.lang.ClassCastException

```
PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
aset.add(new MediaSize(60,80,Size2DSyntax.MM)); 
```

I suspect I did line 2 incorrectly, but I cannot find detailed documentation for Java printing services. What is the proper way to define custom media size?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:24:11.053

`MediaSize`没有实现`PrintRequestAttribute`，因此出现错误。

相反，我认为，你需要使用类似的东西

```
aset.add(new MediaPrintableArea(5, 5, 50, 80, MediaPrintableArea.MM)); 
```

反而...

您可以查看[MediaPrintableArea](http://docs.oracle.com/javase/7/docs/api/javax/print/attribute/standard/MediaPrintableArea.html)了解我的详细信息。

# rotation - Unity single joystick prefab

> ID：12518137
> 
> 赞同：-1
> 
> 时间：2012-09-20T17:55:35.790
> 
> 标签：rotation, unity3d, joystick

I would like to controll movement and rotation ans cant seem to find an answer. Im working with 3.4 Unity

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:37:00.413

试试优秀的统一教程“Penelope”。是很好的人物控制介绍。

[佩内洛普教程](http://unity3d.com/support/resources/tutorials/penelope)

# iphone - Autorotation in iOS6

> ID：12518138
> 
> 赞同：3
> 
> 时间：2012-09-20T17:55:36.320
> 
> 标签：iphone, ios, ios6, xcode4.5

I am updating my app for iOS 6 and having issues with the changes to autorotation. My app has a bunch of view controllers and all of them should only support the portrait layout except 1 which should support all 3 orientations except upside down.

If I add the `application:supportedInterfaceOrientationsForWindow:` method to the app delegate do I have to add conditions there to check if im displaying the one VC I want to be able to rotate?

The documentation states that if I implement `supportedInterfaceOrientations` on a VC it should override the app delegate method but this doesn't appear to be the case. I have an log statement in the method on the child VC and it is called once when the VC loads but its not called when I rotate the device, but the method in the app delegate is.

If I completely remove the method from the app delegate the orientation of my VC's seems to be completely dependent on my apps supported interface orientation settings. This of course seems to be due to the method `supportedInterfaceOrientations` being called once on creation of the VC but never when the device is rotated.

Does anyone have any ideas or suggestions? It would be much appreciated.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T06:24:03.073

替换 `[window addSubview:viewController.view];` 为 `window.rootViewController = viewController;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T17:57:55.417

您还需要覆盖 - (BOOL) shouldAutorotate 并返回“YES”。这使得您可以使用“supportedInterfaceOrientations”声明您的 VC 支持的方向，然后在旋转时它应该调用“shouldAutorotate”。如果您有任何导航控制器或标签栏，您可能需要对它们进行子类化以在其中执行相同的操作。我自己最近也有这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:34:56.990

尝试这个...

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{

    if (UIInterfaceOrientationIsLandscape(interfaceOrientation))  
    { 
        // here to  implement landscope code
    }
    else
    {  
        // here to  implement setframePortrait
    }
} 
```

# c - ansi c - auto clean up ugly code

> ID：12518139
> 
> 赞同：1
> 
> 时间：2012-09-20T17:55:38.487
> 
> 标签：c, ansi

I'm dealing with some code written in manner that is really, honestly, ugly. Is there a way to auto enforce proper tabs and remove all of the random multi-line white space entries?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:02:02.060

老 Unix 人对一切都有解决方案，包括懒惰的程序员。输入[GNU 缩进。](http://www.gnu.org/software/indent/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:02:28.363

您可以使用任何编辑器，但我更喜欢使用 Vim，使用 vim 您实际上可以通过在可视模式下选择所有代码然后选择“=”来提供适当的选项卡。您还必须为仅 3 个空格相等的制表符设置 sw=3 - 大多数代码中的首选间距。还要设置 expandtabs 这将确保代码看起来与将 '\t' 替换为 3 个空格相同

# java - Reorder queue in Java's ThreadPoolExecutor

> ID：12518143
> 
> 赞同：8
> 
> 时间：2012-09-20T17:55:56.733
> 
> 标签：java, multithreading

> **Possible Duplicate:**
> [Java Executors: how can I set task priority?](https://stackoverflow.com/questions/3198660/java-executors-how-can-i-set-task-priority)

I have a ThreadPoolExecutor built using a LinkedBlockingDequeue and I want to manipulate the underlying queue, however reading this in the documentation makes me very nervous.

> Queue maintenance
> 
> Method getQueue() allows access to the work queue for purposes of monitoring and debugging. Use of this method for any other purpose is strongly discouraged. Two supplied methods, remove(java.lang.Runnable) and purge() are available to assist in storage reclamation when large numbers of queued tasks become cancelled.

Specifically I want to be able to

1.  Check the queue to see if an element already exists. I assume this is fine as no locking should be necessary to just view the elements in the queue.
2.  I want to reorder the queue based on some signal. This can obviously be troublesome. I was wondering if there is a preferred way to do this so that I won't mess up the queue for other uses.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:33:21.887

`getQueue()`将始终返回`BlockingQueue<Runnable>`您传递给`ThreadPoolExecutor`.

文档担心的是，如果您不能保证`BlockingQueue`. 如果您使用`PriorityBlockingQueue`, 并且只使用`remove`and `add`（或者，更直接地，`offer`），那么您将是安全的，您甚至可以直接从`getQueue()`.

换句话说，每当您的信号告诉您 some`Runnable`的优先级已更改时，您就应该`remove`检查删除的结果（`true`如果已删除），并且只有当它实际上已被删除时，您才应重新添加它。您不能保证在这些操作之间不会拾取某些东西，但至少可以保证您不会重复运行，如果使用-> ->`Runnable`完成，这很容易发生。`contains``remove``add`

要么这样，要么您可以编写自己的 a 实现，该实现`BlockingQueue`使用 a `Comparator`（如`PriorityBlockingQueue`），在要求新数据时找到最高优先级。考虑到所涉及的各种接口，这听起来需要做更多的工作。

# iphone - Facebook white screen issue loading fbGraph API in webView?

> ID：12518144
> 
> 赞同：2
> 
> 时间：2012-09-20T17:56:01.040
> 
> 标签：iphone, xcode, facebook-graph-api, fb-graph

I am facing a strange issue: I am using the **fbGraph API** to get Facebook related data, when I load Facebook to log in, in my `webView` it shows blank white screen.

Has anyone had this issue before? Does anyone know how to resolve it?

I have searched a lot on Google but everyone is talking about clearing the browser cache in Safari, Firefox, Chrome and cookies, no one has talked about the **iPhone browser** or the **fbGraph API**.

Any help would be appreciated.

# haskell - With Haskell and Gtk2hs, how would I create a new widget and associated events?

> ID：12518149
> 
> 赞同：4
> 
> 时间：2012-09-20T17:56:13.840
> 
> 标签：haskell, gtk2hs

I have an application that I am working on, and I'm basically self-teaching GUI programming. I asked a fairly [involved question](https://softwareengineering.stackexchange.com/questions/165382/how-do-i-organize-a-gui-application-for-passing-around-events-and-for-setting-up) over on programmers.stackexchange. This question is about the mechanics of an idea I had not tried.

I have three widgets: a TreeView, a TextField, and a DrawingArea. Each of the three widgets interacts very intimately with events on one necessarily triggering actions on the other. Those three widgets largely do not interact with the rest of the application *except* (so far) by reading an MVar containing the global application state.

Currently I can think of no case in which the larger application should ever interact directly with any of those three widgets. Further, that identical pattern would be replicated to review other data that has the same form. So, it seems to me that it would make sense to actually bind these three widgets together into a larger composite widget that can interact with GTK's normal event queue. So, for instance

```
type MyDataViewWidget = (TreeView, TextField, DrawingArea)
data DataUpdatedSignal a = DataUpdatedSignal a
data RedrawEvent a = RedrawEvent a 
```

So, the widget would use DataUpdatedEvent to indicate to the rest of the application that something inside MyDataViewWidget changed, and RedrawEvent would tell the widget that it needs to redraw or re-read the source data.

(technically, I have not thought through semantically what the various actions in the composite widget would do... whether the widgets would just have a read-only copy of the application data and need to receive new read-only copies with the RedrawEvent or perhaps the widgets would have the MVar itself and be allowed to change the data in the MVar, etc... I'm just interested at the moment in how to actually do this)

Are there any examples of doing something like this? Basically, what instances do I need to implement to create the new widget and the two signals? I'd prefer to stick to Haskell, but I could drop to C in order to build up the new widget.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:15:11.843

不幸的是，目前没有（正确）实现`Widget`类型类的纯 Haskell 方法。您需要在 C 中实现您的小部件，然后通过 FFI 导入它。有很多这样的例子——基本上所有的 gtk+/gtk2hs 都是数百个这样做的例子的集合。

# ios5 - DropBox IOS SDk retrieving access token and secret is invalid once user is Authenticated

> ID：12518151
> 
> 赞同：3
> 
> 时间：2012-09-20T17:56:20.773
> 
> 标签：ios5, dropbox, dropbox-api

Cross authentication of a dropbox user using Access token and secret not happening.

Elaborating my Question:

1.  authenticate the user in my IOS app
2.  In Ios app , I retrieve access token and secret from MPOAuthCredentialConcreteStore *credentials.
3.  get the access token from credentials->acccessToken and similarly the secret.

4.  Now if I feed these values into another app outside IOS which uses python sdk for dropbox. I get a error message "Invalid token".

But, interestingly the reverse process from step 1 to 4 works. i.e get access token and secret from python SDK and feed it to my IOS app by using

```
[dbSession updateAccessToken:@"xxxxxxxxx" accessTokenSecret:@"YYYYYYYYYYY" forUserId:@"12345678"]; 
```

and now i can assess user's dropbox account. Any idea as to whats going wrong? Is there a difference between MPoauth and Oauth? I believe MPoauth is just a wrapper right?

is there any other way to get the access token and secret?

Thanks for the help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:42:13.553

我找到了解决方法。这是一个简单的错误。基本上我使用的编辑器在最后添加了一个新行字符。对于遇到相同问题的人，请确保最后没有换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:37:03.013

您可以`Access token`通过使用此委托来获取您的

```
(BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *) url {

    if ([[DBSession sharedSession] handleOpenURL:url]) { 
        if ([[DBSession sharedSession] isLinked]) { 
            // At this point you can start making API calls

            NSLog(@"App linked successfully!");

        }
        // Add whatever other url handling code your app requires here 
     } 

     return NO;
 } 
```

给定的 url 有访问令牌、秘密令牌和用户 ID

# asp.net-mvc - MVC4 便携式区域？

> ID：12518159
> 
> 赞同：0
> 
> 时间：2012-09-20T17:56:56.713
> 
> 标签：asp.net-mvc, asp.net-mvc-4, portable-areas

MVC4 是否删除了 MVCContrib 要求以实现可移植区域？或者这仍然是必需的？

我在没有 MVCContrib 的情况下试了一下，不幸的是，我遇到了一个典型的“*未找到视图‘索引’或其主控，或者没有视图引擎支持搜索到的位置。* ”异常。

搜索到的位置列表包括“ *~/Areas/Inbox/Views/Default/Index.cshtml* ”，这在技术上是正确的，但只是没有找到视图。

一些解释：

我有一个主 MVC4 应用程序和一个“插件”（如果你愿意的话）MVC4 应用程序，其中包含一个名为 Inbox 的区域，其中包含一个名为 Default 的控制器和视图。我在主应用程序中引用了这个插件应用程序，我可以在返回视图的 DefaultController 的 Index 方法中打一个断点 - 所以我知道主应用程序正在使用插件应用程序并将请求路由到正确的控制器等等。不运行时，如果我将光标悬停在 DefaultController 中的 return View() 语句上，气球会显示所需的视图，它只是在运行时找不到。

有没有人遇到过这个？我确信这对我来说是非常简单和愚蠢的疏忽，但经过数小时的尝试，我找不到解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:12:48.160

MvcContrib 不是 MVC 的一部分，所以不是。MVC4 不包括便携式区域。MvcContrib 与 MvcFutures 不同，它很可能在某些时候将代码滚动到主项目中。这是由第三方提供的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:46:48.633

对于每个视图，编辑**Properties**并将**Build Action**设置为**Embedded Resource**。

# java - How can I simulate OK button click on a Jface dialog

> ID：12518161
> 
> 赞同：1
> 
> 时间：2012-09-20T17:57:04.347
> 
> 标签：java, swt, jface

I am new to SWT and JFace. I have a Dialog with a `TableViewer` attached to it. I added a filter to the `TableViewer`. My requirement is that when the search returns multiple items the Dialog should show them and let the user select the one he wants and afterwards click OK so that the selected value is passed back to the parent function.

I implemented it without any problem. But when the search returns only one value, this value should be passed back to the parent window and the Dialog should close.

I am having problem in closing the dialog through code. I tried to use `okPressed()` when the condition is met.

This is where I am calling `okPressed()`:

```
if(!searchStr.isEmpty()){
    dialogSearch();
    if(tableViewer.getTable().getItems().length == 1){
        TableItem[] itemSelected = tableViewer.getTable().getItems();
        pojoRefType = (Object)itemSelected[0].getData();
        this.okPressed();
    } 
} 
```

> java.lang.IllegalArgumentException: Argument not valid at org.eclipse.swt.SWT.error(Unknown Source) at org.eclipse.swt.SWT.error(Unknown Source)

Can anyone please suggest how to handle the condition?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:01:03.133

要关闭对话框，只需调用：

```
this.setReturnCode(OK);
this.close(); 
```

这就是所有要做的...

你也可以试试：

```
super.okPressed(); 
```

# javascript - Javascript - Get the width of an undefined element

> ID：12518162
> 
> 赞同：3
> 
> 时间：2012-09-20T17:57:10.237
> 
> 标签：javascript, jquery, css, dimensions

I have a div element, that has no defined width or height. It holds other elements, and molds on their size. I need to get the final size of the div, without being able to check the sizes of the elements inside of it (dynamic elements).

I tried parsing all the properties of the object, but found nothing, all were "undefined".

Any thoughts?

Many thanks

Later edit:

I have

```
<div id="xxx" style="position:relative;">  
    aaaa
</div> 
```

I tried:

```
var a = mydiv.style.width; 
```

But it did not work.

I also tried:

```
var getKeys = function (obj) {  
    var keys = [];

    for(var key in obj){  
        document.write(key+"="+obj.key+"<br>");  
    }  

    return keys;  
}  

getKeys(mydiv.style); 
```

To show all the properties, but none had any info.

The jQuery solution works perfectly, but `getComputedStyle` was what I was looking for, as I can't use jquery here.

Sorry for the short information.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T17:59:29.600

基于没有任何关于你在做什么的信息，我建议你应该（如果可能的话）使用这种`window.getComputedStyle()`方法，它可以找到浏览器呈现的对象的属性：

```
var elem = document.getElementById('elemId'),
    properties = window.getComputedStyle(elem, null),
    height = properties.height,
    width = properties.width; 
```

如果您有可用的 jQuery，那么您可以简单地使用`width()`and `height()`（或`outerWidth()`/ `outerHeight()`）方法：

```
var height = $('#elem').height(),
    width = $('#elem').width(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T18:00:12.420

你没有提供很多信息。我建议您使用您尝试使用的实际代码编辑您的帖子。

但是，使用 JQuery：

```
$(DOMElement).width()           //-- Element width.
$(DOMElement).innerWidth()      //-- Element width + padding.
$(DOMElement).outerWidth()      //-- Element width + padding & border.
$(DOMElement).outerWidth(true)  //-- Element width + padding, border, and margin. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:00:19.347

`$('div').width()`将返回宽度...

# powershell - Merge 2 CSV by Value "Name" and merge Count (Powershell)

> ID：12518164
> 
> 赞同：1
> 
> 时间：2012-09-20T17:57:15.030
> 
> 标签：powershell, csv, merge, count

So at the momemt I'm searching for a way to merge 2 CSV files.

Here is an example for what I mean:

CSV1

```
"Name","Count"
"Klaus","3"
"Hans","2"
"Gerhard","1"
"Nina","6"
"Julia","10"
"Caro","19" 
```

CSV2

```
"Name","Count"
"Klaus","2"
"Hans","1"
"Gerhard","1"
"Nina","1" 
```

Now if I merge both, the output/result should be:

```
"Name","Count"
"Klaus","5"
"Hans","3"
"Gerhard","2"
"Nina","7"
"Julia","10"
"Caro","19" 
```

I tried a lot, but I´ve never had suscess; I always had wrong results. Does anyone have an idea how to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:12:12.433

您可以使用`Group-Object`(alias `group`) 按`Name`属性对所有内容进行分组。然后你只需要总结`Count`小组中每个人的财产。 `Measure-Object`（别名`measure`）将为您计算总和。

```
$grouped = Import-Csv .\csv1.csv, .\csv2.csv | group Name
$combined = $grouped |%{ 
   New-Object PsObject -Prop @{ Name = $_.Name; Count = ($_.Group | measure -sum -prop Count).Sum }
}
$combined | Export-Csv .\combined.csv -NoType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:59:55.630

导入 CSV 文件并将每个文件转换为哈希表，然后找到常用名称：

```
$csv1 = Import-Csv -Path csv1.csv
$csv2 = Import-Csv -Path csv2.csv

$HashCSV1 = @{}
$HashCSV2 = @{}
$HashMerge = @{}

foreach($r in $csv1)
{
    $HashCSV1[$r.Name] = $r.Count
}

foreach($r in $csv2)
{
    $HashCSV2[$r.Name] = $r.Count
}

foreach ($key in $HashCSV1.Keys) { 
    if ($HashCSV2.ContainsKey($key)) {
        $HashMerge[$key] = [int]$HashCSV1[$key] + [int]$HashCSV2[$key]
    } else {
        $HashMerge[$key] = $HashCSV1[$key]
    }
}

foreach ($key in $HashCSV2.Keys) { 
    if (-not $HashCSV1.ContainsKey($key)) {
        $HashMerge[$key] = $HashCSV2[$key]
    }
}

&{$HashMerge.getenumerator() |
  foreach {new-object psobject -Property @{Name = $_.name;Count=$_.value}}
  } | export-csv merge.csv -notype 
```

# gnuradio - GNU 无线电历史

> ID：12518171
> 
> 赞同：3
> 
> 时间：2012-09-20T17:57:34.497
> 
> 标签：gnuradio

我有一个通用的工作功能，我将使用 GNU Radio 的历史功能。在块的构造函数中，我调用`set_history( m )`. 我以标准方式转换输入缓冲区：

```
 const float *in = (const float *) input_items[0]; 
```

我的问题是`in[0]`缓冲区中的位置。对我来说，这`noutput_items`是块要消耗的*新*项目的数量，`ninput_items[0]`是指缓冲区中的数据总数。因此，`in[noutput_items-1]`是数组的最后一个元素，`in[0]`是*新*项目`in[-m]`的开始， 是指历史块的开始。因此，`ninput_items[0]`大于或等于`m + noutput_items`。

我不知道这个假设是否正确，如果有人知道这是如何工作的，我会很高兴。GNU Radio API 在这方面有些模糊。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:53:56.983

[Tom Rondeau 在GNU Radio wiki](http://gnuradio.org)上帮助回答了这个问题。`in[0]`指历史的开端。为了使`in[0]`引用*新*数据的开始，`in`这样声明：

```
const float *in = (const float *) &((const float*)input_items[0])[history()-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T15:59:06.767

只是为了@Chris 的完整性，`set_history()`指的是**items**的数量，就像`noutput_itmes`参数一样。

`in[0]`指历史的第一项。为了跳过历史并获得第一个新项目，这是正确的方法：

`const <TYPE> *in = (const <TYPE> *) &((const <TYPE>*)input_items[0])[(history()-1) * VEC_SIZE];`

`VEC_SIZE`指在输入签名处指定的类型的样本数。

例如，如果一个块的输入签名是

`io_signature::make(1, 1, vec_len * sizeof(float))`

每个项目都是由`vec_len`浮点数构成的。可以通过以下方式正确跳过历史记录：

`const float *in_new = (const float *) &((const float*)input_items[0])[(history()-1) * vec_len]`;

# jquery - 下拉菜单关闭问题

> ID：12518177
> 
> 赞同：0
> 
> 时间：2012-09-20T17:57:59.947
> 
> 标签：jquery, css

我创建了这个在点击时起作用的下拉菜单，但是当您点击下一个链接时，第一个下拉框保持打开状态。另外，当我从数据库中提取内容并且页面不刷新时，当单击孩子时如何关闭菜单。

```
 $(document).ready(function(){
 $("#top-nav li").toggle(function(){
 $("ul",this).show();
 $("a.top-nav-link", this).addClass('selected');

            }, function(){$('ul',this).hide();
    $("a.top-nav-link", this).removeClass('selected');
            }); });
    <ul id="top-nav">
<li>
    <a href="#" class="top-nav-link">INDIAN</a>
     <ul>
      <li>
                <div class=" one-wrap set-column">
              <a href="#" >INDIAN</a>
             <a href="#" >CHINESE</a>
             <a href="#" >ITALIAN</a>
             <a href="#" >PUB FOOD</a>
             <a href="#" ></a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
                  <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
              <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>

           </div>
       </li>

    </ul>

  </li>
           <li>
               <a href="#" class="top-nav-link">CHINESE</a>

               <ul>
               <li>
                  <div class=" two-wrap set-column">
              <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
                  <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
              <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
             <a href="#" >Menu</a>
           <a href="#" >Menu</a>
           </div>
           </li>
           </ul>
           </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:03:16.813

单击链接时，您可以关闭所有现有的下拉菜单，然后向下滑动现在应该向下滑动的菜单：

```
$("#link").click(function() { 
  $(".dropdown").slideUp(); #slides up the currently slided down drop-down menu, if any
  $(".dropdown#specific_to_this_link").slideDown();
}); 
```

关于您的第二个问题，如果您希望在单击菜单中的一个链接时折叠父菜单，请执行以下操作：

```
$(".dropdown .child").live('click', function() {
 $(this).parent().slideUp();
}); 
```

您可以使用`on`的最新版本`live`，该版本现已折旧。

# java - 可执行 jar 不显示应用程序中使用的图标/图像

> ID：12518187
> 
> 赞同：0
> 
> 时间：2012-09-20T17:58:38.510
> 
> 标签：java, image, swing, embedded-resource, executable-jar

在编写我的应用程序（使用 Eclipse 作为我的 IDE）时，我没有意识到我的图像最终不会捆绑在 jar 中的问题。现在在完成项目并创建可执行 jar 之后，我遇到了这个问题。我有大约 50 个 java 类，并且我在大多数这些类中广泛使用了图像/图标（例如，在菜单中、作为`JLabel`图标、在按钮中、作为选项卡图标等）。`ImageIcon`在大多数情况下，我都使用了API。一个例子：

```
JLabel myHeaderImage = new JLabel(new ImageIcon("images/myHeader.jpg")); 
```

拉入罐子中图像的最佳方法是什么。我需要改变我在项目中使用图像的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:14:58.030

使用`getResource()`：

```
JLabel myHeaderImage = new JLabel(new ImageIcon(getClass().getResource("/images/myHeader.jpg"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T20:50:07.380

只需为您的图像添加**完整路径**，例如在我的情况下：

ImageIcon icon = new ImageIcon("X:/ProjektyNetBeans/GUITest/src/data/world.png");

然后清理并构建。文件 .jar 可以正常工作。祝你好运。

# ruby-on-rails - 如何使用 ActiveRecord 3.1 在不停机的情况下删除列？

> ID：12518192
> 
> 赞同：7
> 
> 时间：2012-09-20T17:59:02.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在使用 ActiveRecord 运行应用程序时从表中删除列会导致错误，因为 ActiveRecord 会缓存列名。

其他版本的 ActiveRecord 的解决方法是覆盖模型中的 #columns 方法并在迁移之前过滤掉不推荐使用的列名（基本上 - 从 AR 中隐藏这些列）。这很有效，因为所有与列名相关的方法都基于 #columns 调用

在 ActiveRecord 3.1 中，表结构的缓存被移动到 ConnectionPool，并且所有与列名相关的值（例如 coluumns_hash）都被独立缓存（3.2 使用 ModelSchema.columns 使其再次工作）

有没有什么方法（除了混凝土适配器的深度破解）来实现 ActiveRecord 3.1 中的安全列下降？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:46:47.380

TST Media 的 Luke Ludwig 在[这里](http://pulse.sportngin.com/news_article/show/85364?referrer_id=308069)提供了一个解决方案。本质上，它们“覆盖了列被删除的类的 ActiveRecord::Base.columns 方法”。

（解决方案适用于除 3.1 之外的所有版本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T15:21:25.353

如果您有多个应用程序服务器，以便您可以一次关闭一个而无需停机，则以下方法将起作用：

1.  删除用户修改您要删除的列的能力。
2.  一次重新启动一个应用程序。
3.  启动一个新数据库，它是现有数据库的主控。
4.  停止从新数据库复制。
5.  将列放到新的数据库服务器上。
6.  一次重新配置每个应用程序服务器以使用新的数据库服务器并重新启动。
7.  为您的新数据库重新打开复制。
8.  原始服务器恢复正常后，重新配置应用程序以再次使用该数据库服务器（通过适当的重新启动）。
9.  停止复制并关闭新的数据库服务器。

# java - 连接四胜利检查不起作用Java

> ID：12518202
> 
> 赞同：1
> 
> 时间：2012-09-20T17:59:40.813
> 
> 标签：java, algorithm

我编写了一个完整的程序来玩连接四，但是检查谁赢了（每回合之后）的算法不起作用，我不知道为什么。当我编译它时，我不断收到一条奇怪的消息（异常 ArrayIndexOutOfBoundsException）。任何帮助表示赞赏。

这是代码：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class connectFourDemo extends Applet
    implements MouseListener, MouseMotionListener {
    private static final long serialVersionUID = 1L;

    int[][] myGrid = new int[7][6];
    // If piece is 0, white. If 1, red. If 2, black.

int xCoord, yCoord; // X and Y co-ordinates for mouse navigation.
int width, height;
int playerTurn = 1; // Player's turn. Default is 1 since red goes first.
int mx, my;  // The mouse coordinates.
boolean isButtonPressed = false;

public void init() {
    width = getSize().width;
    height = getSize().height;
    setBackground(Color.yellow);

    mx = width / 2;
    my = height / 2;     

    addMouseListener(this);
    addMouseMotionListener(this);   
}

private int getXValue(int xValue) {
    if (xValue < width / 7) return 0;

    else if (xValue < width / 7 * 2) return 1;

    else if (xValue < width / 7 * 3) return 2;

    else if (xValue < width / 7 * 4) return 3;

    else if (xValue < width / 7 * 5) return 4;  

    else if (xValue < width / 7 * 6) return 5;

    else return 6;
}

private int getYValue(int yValue) {
    if (yValue < width / 6) return 0;

    else if (yValue < width / 6 * 2) return 1;

    else if (yValue < width / 6 * 3) return 2;

    else if (yValue < width / 6 * 4) return 3;

    else if (yValue < width / 6 * 5) return 4;  

    else return 5;
}

public void verticalCheck(int x, int y) {
    if (myGrid[x][y] == 1) {
        int counter = 1;

        for (int i = 5; i >= 0; i--) {
            if (myGrid[xCoord][i] == 1) {
                System.out.println("Counter one in vertical check is " + counter + ".");
                if (myGrid[xCoord][i - 1] == 1 && (i - 1 >= 0)) counter++;
            }
        }

        if (counter == 4) {
            System.out.println("Player 1 has won Connect Four vertically!");
        }
    }

    else if (myGrid[x][y] == 2) {
        int counter = 1;

        for (int i = 5; i >= 0; i--) {
            if (myGrid[xCoord][i] == 2) {
                System.out.println("Counter two in vertical check is " + counter + ".");
                if (myGrid[xCoord][i - 1] == 2 && (i - 1 >= 0)) counter++;
            }
        }

        if (counter == 4) {
            System.out.println("Player 2 has won Connect Four vertically!");
        }
    }
}

public void horizontalCheck(int x, int y) {
    if (myGrid[x][y] == 1) {
        int counter = 1;

        for (int i = 0; i <= 6; i++) {
            if (myGrid[i][y] == 1) {
                System.out.println("Counter one in horizontal check is " + counter + ".");
                if (myGrid[i + 1][y] == 1 && (i + 1 <= 6)) counter++;
            }
        }

        if (counter == 4) {
            System.out.println("Player 1 has won Connect Four horizontally!");
        }           
    }

    else if (myGrid[x][y] == 2) {
        int counter = 1;

        for (int i = 0; i <= 6; i++) {
            if (myGrid[i][y] == 2) {
                System.out.println("Counter two in horizontal check is " + counter + ".");
                if (myGrid[i + 1][y] == 2 && (i + 1 <= 6)) counter++;
            }
        }

        if (counter == 4) {
            System.out.println("Player 2 has won Connect Four horizontally!");
        }
    }
}

public void diagonalCheckRight(int x, int y) {
    if (myGrid[x][y] == 1) {
        int counter = 1;

        for (int i = 0; i <= 6; i++) {
            for (int j = 5; j >= 0; j--) {
                if (myGrid[i][j] == 1) {
                    System.out.println("Counter one in diagonal check right is " + counter + ".");
                    if (myGrid[i + 1][j + 1] == 1 && (i + 1 <= 6) && (j + 1 <= 5)) counter++;
                    else if (myGrid[i - 1][j + 1] == 1 && (i - 1 >= 0) && (j + 1 <= 5)) counter++;
                }
            }
        }

        if (counter == 4) {
            System.out.println("Player 1 has won Connect Four diagonally!");
        }
    }

    else if (myGrid[x][y] == 2) {
        int counter = 1;

        for (int i = 0; i < 6; i++) {
            for (int j = 0; j < 5; j++) {
                if (myGrid[i][j] == 2) {
                    System.out.println("Counter two in diagonal check right is " + counter + ".");
                    if (myGrid[i + 1][j + 1] == 1 && (i + 1 <= 6) && (j + 1 <= 5)) counter++;
                    else if (myGrid[i - 1][j + 1] == 1 && (i - 1 >= 0) && (j + 1 <= 5)) counter++;
                }
            }
        }

        if (counter == 4) {
            System.out.println("Player 2 has won Connect Four diagonally!");
        }
    }
}

public void diagonalCheckLeft(int x, int y) {
    if (myGrid[x][y] == 1) {
        int counter = 1;

        for (int i = 0; i < 6; i++) {
            for (int j = 0; j < 5; j++) {
                if (myGrid[i][j] == 1) {
                    System.out.println("Counter one in diagonal check left is " + counter + ".");
                    if (myGrid[i - 1][j - 1] == 1 && (i + 1 <= 6) && (j - 1 >= 0)) counter++;
                }
            }
        }

        if (counter == 4) {
            System.out.println("Player 1 has won Connect Four diagonally!");
        }
    }

    else if (myGrid[x][y] == 2) {
        int counter = 1;

        for (int i = 0; i < 6; i++) {
            for (int j = 0; j < 5; j++) {
                if (myGrid[i][j] == 2) {
                    System.out.println("Counter one in diagonal check left is " + counter + ".");
                    if (myGrid[i - 1][j - 1] == 2 && (i <= 6) && (j >= 0)) counter++;
                }
            }
        }

        if (counter == 4) {
            System.out.println("Player 2 has won Connect Four diagonally!");
        }
    }
}

public void mouseEntered( MouseEvent e ) {
    // Called when the pointer enters the applet's rectangular area.
}

public void mouseExited( MouseEvent e ) {
    // Called when the pointer leaves the applet's rectangular area.
}

public void mouseClicked( MouseEvent e ) {
    // Called after a press and release of a mouse button with no motion in between.

    mx = e.getX();
    my = e.getY();

    xCoord = getXValue(mx);
    yCoord = getYValue(my);

    if (myGrid[xCoord][yCoord] == 0 && playerTurn == 1) { // Drop from top, fall to bottom and vice versa.
        for (int y = 5; y >= yCoord; y--) {
            if (myGrid[xCoord][y] == 0) {
                myGrid[xCoord][y] = 1;
                y = yCoord - 1;
            }
        }

        verticalCheck(xCoord, yCoord);
        horizontalCheck(xCoord, yCoord);
        diagonalCheckRight(xCoord, yCoord);
        diagonalCheckLeft(xCoord, yCoord);

        playerTurn = 2;
    }

    else if (myGrid[xCoord][yCoord] == 0 && playerTurn == 2) {          
        for (int y = 5; y >= yCoord; y--) {
            if (myGrid[xCoord][y] == 0) {
                myGrid[xCoord][y] = 2;
                y = yCoord - 1;
            }
        }  

        verticalCheck(xCoord, yCoord);
        horizontalCheck(xCoord, yCoord);
        diagonalCheckRight(xCoord, yCoord);
        diagonalCheckLeft(xCoord, yCoord);

        playerTurn = 1;
    }
}

public void mousePressed(MouseEvent e) {  // Called after a button is pressed down.
    repaint();
    // "Consume" the event so it won't be processed in the
    // default manner by the source which generated it.
    e.consume();
}

public void mouseReleased(MouseEvent e) {  // Called after a button is released.
    repaint();
    e.consume();
}

public void mouseMoved(MouseEvent e) {  // Called during motion when no buttons are down.
    mx = e.getX();
    my = e.getY();

    mx = mx / 50; // Divides applet width by the width of each oval (50).
    my = my / 50; // Divides applet height by the height of each oval (50).

    showStatus("Mouse in column " + (mx + 1) + ", row " + (my + 1) + ".");
}

public void mouseDragged(MouseEvent e) {  // Called during motion with buttons down.
}

public void paint(Graphics g) {
   for (int y = 0; y < 6; y++) {
       for (int x = 0; x < 7; x++) {
            if (myGrid[x][y] == 0) {
                g.setColor(Color.white);
            }

            if (myGrid[x][y] == 1) {
                g.setColor(Color.red);
            }

            if (myGrid[x][y] == 2) {
                g.setColor(Color.black);
            }

            g.fillOval((width / 7) * x + 2, (height / 6) * y + 1, (width / 7) - 4, (height / 6) - 4);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:12:22.730

运行代码，您的问题出在“diagonalCheckRight”，即本节：

```
for (int i = 0; i <= 6; i++) {
            for (int j = 5; j >= 0; j--) {
                if (myGrid[i][j] == 1) {
                    System.out.println("Counter one in diagonal check right is " + counter + ".");
                    if (myGrid[i + 1][j + 1] == 1 && (i + 1 <= 6) && (j + 1 <= 5)) counter++;
                    else if (myGrid[i - 1][j + 1] == 1 && (i - 1 >= 0) && (j + 1 <= 5)) counter++;
                }
            }
        } 
```

您的`j`索引从 5 开始，如果您这样做`myGrid[i+1][j+1]`，这意味着在您访问的第一次迭代`myGrid[1][6]`中，但是您定义`myGrid`为大小`[7][6]`，因此您超出了范围，因为有效索引是：[0..6] [0..5]。

下次查看错误消息时，我的控制台显示： java.lang.ArrayIndexOutOfBoundsException: 6 at Main.diagonalCheckRight(Main.java:134)

我将该类重命名为 Main，而 134 正是我发现错误的行号。

# c# - 尝试克隆用户控件时使用 XamlWriter.Save() 时出现 StackOverflowException

> ID：12518210
> 
> 赞同：1
> 
> 时间：2012-09-20T18:00:27.810
> 
> 标签：c#, wpf, clone, treeviewitem

我正在使用下面的方法来尝试克隆 TreeViewItem，但是一旦它命中`XamlWriter.Save()`它就会给我一个 StackOverflowException。

触发此的代码是：

```
 var b = Clone<TreeViewItem>(ViewTree.ItemContainerGenerator.ContainerFromIndex(0) as TreeViewItem); 
```

其中 ViewTree 是我的 TreeView 的名称。

```
 public static T Clone<T>(T from) {
    string objStr = System.Windows.Markup.XamlWriter.Save(from);
    System.IO.StringReader stringReader = new System.IO.StringReader(objStr);
    System.Xml.XmlReader xmlReader = System.Xml.XmlReader.Create(stringReader);
    object clone = System.Windows.Markup.XamlReader.Load(xmlReader);

    return (T)clone;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:31:58.277

检查这个 TreeView 中是否有一些循环。例如：某些树视图节点（或其子节点的子节点）有一个指向父节点的子节点。StackOverflowException 通常用于内存不足的递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T16:30:09.750

这对我有用：

```
 System.Xaml.XamlServices.Save(obj); 
```

从 System.Xaml.dll

它正确处理循环引用。

# iphone - iOS 应用删除：还剩下什么？

> ID：12518212
> 
> 赞同：2
> 
> 时间：2012-09-20T18:00:38.273
> 
> 标签：iphone, ios, ipad

据我所知，删除应用程序时，唯一可以留下的残留物是与钥匙串相关的，对吧？

我不是在谈论位没有被清零的硬件级别，而是在软件级别。

如果我对应用程序进行删除/全新安装，那么旧应用程序在物理上留下的唯一东西就是钥匙串的东西，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:24:41.743

根据我的经验，你是对的，只剩下钥匙链。如果您的应用程序支持 iCloud 键值存储，我想数据将保留在 iCloud 服务器上。但是任何数据库、文件、额外的 plist、NSUserDefaults 中的值都会被抹去。

# .htaccess - 如何重写像 http://189.3.xxx.xxx/index.php?p=home 这样的 URL

> ID：12518214
> 
> 赞同：0
> 
> 时间：2012-09-20T18:00:48.577
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在尝试重写我的 URL，但没有成功。`mod_rewrite`已启用。我正在使用这个规则：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteRule ^(.*)$ index.php?p=$1
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:05:17.313

你需要防止它循环，尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteRule ^(.*)$ index.php?p=$1 [L] 
```

# php - 如何将行添加到我的表中，该行是自动递增的，会影响我的主键

> ID：12518215
> 
> 赞同：0
> 
> 时间：2012-09-20T18:00:51.810
> 
> 标签：php, mysql, sql

我怎样才能在我的桌子上添加这个 '2' 的 id，我已经有一个 '2' 的 id 我想询问关于身份的问题

```
 INSERT INTO `f4`.`tbl_te` (
`id` ,
`name` ,
`quantity` ,
`price` ,
`subtotal`
)
VALUES (
'2', 'Mushroom Omelet', '1', '55', '55'
) 
```

`#1062 - Duplicate entry '2' for key 'PRIMARY'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:03:39.730

如果它是主键，则它必须是唯一的 - 您需要更改您尝试添加的 ID。或者，如果它是 auto_increment，则根本不需要在 INSERT 中指定它：

```
 INSERT INTO `f4`.`tbl_te` (
`name` ,
`quantity` ,
`price` ,
`subtotal`
)
VALUES (
'Mushroom Omelet', '1', '55', '55'
) 
```

这将为它分配下一个可用的键。

如果您只想更改现有值：

```
UPDATE `f4`.`tbl_te` SET
    `name`='Mushroom Omelet',
    `quantity`='1',
    `price`='55',
    `subtotal`='55',
WHERE
    id=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:03:43.353

插入时，不要插入主键字段：

```
INSERT INTO `f4`.`tbl_te` (
`name` , `quantity` , `price` ,`subtotal` )
VALUES ( 'Mushroom Omelet', '1', '55', '55' ) 
```

插入后，您还可以使用 LastInsertID 函数查看数据库为您的插入分配的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:07:20.847

要将行插入具有自动增量字段的表中，您需要传递 a`NULL`来代替自动增量字段，例如

```
 INSERT INTO `f4`.`tbl_te` (
`id` ,
`name` ,
`quantity` ,
`price` ,
`subtotal`
)
VALUES (
NULL, 'Mushroom Omelet', '1', '55', '55'
) 
```

这将插入具有自动递增数字的行。

如果要更新现有行，请使用通常的更新查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:08:00.377

```
UPDATE f.tbl_te
SET 
 name = 'Mushroom Omlet',
 quantity = '1',
 price = '55',
 subtotal = '55'
WHERE
    id = 2; 
```

如果要替换该 ID，请更新相同的记录。你不能有多个，所以如果它存在，更新它。虽然这不是必需的，但如果你真的想改变 id 2 是什么，这就是方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T18:08:29.687

目前尚不清楚您要做什么，如果您想将`INSERT`新记录添加到具有自动增量的表中，则不包括该字段：

```
 INSERT INTO `f4`.`tbl_te` 
 (
    `name` ,
    `quantity` ,
    `price` ,
    `subtotal`
)
VALUES 
(
    'Mushroom Omelet', 
    '1', 
    '55', 
    '55'
) 
```

但是，如果您想要`UPDATE`该值，`id`那么您可以使用`UPDATE`：

```
UPDATE `f4`.`tbl_te` 
    SET `name`  = 'Mushroom Omelet',
    `quantity` = '1',
    `price` = '55',
    `subtotal`= '55'
WHERE `id` = 2 
```

# coldfusion - 在读取之前连接 ColdFusion 变量

> ID：12518216
> 
> 赞同：1
> 
> 时间：2012-09-20T18:00:58.960
> 
> 标签：coldfusion, coldfusion-9

我不确定这是否可能。我可以连接两个代表变量名称的字符串，然后从中读取变量值吗？例如：

```
<cfloop index="person" from="0" to="#numberAuthorized - 1#">
  //USING 'thePerson' DIDN'T WORK EITHER
  <cfset thePerson = 'authorized_name' & person>
  <cfquery name="qAddAuthorizedPeople" datasource="#thedb#" blockfactor="100">
    INSERT INTO people (requestid, fullname)
    VALUES ('#requestid#', '#authorized_name & 1#')
  </cfquery>
</cfloop> 
```

我需要阅读的变量是`authorized_name0, authrozied_name1, etc.`. 所以我正在循环，所以我可以增加一个索引并将其附加到变量名的末尾。然后像这样插入我的数据库。显然，这是行不通的。我之前也尝试过连接并将其设置为变量（thePerson）并放入`#thePerson#`查询中，但这也不起作用。我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:33:00.203

**编辑**我不确定你是如何传递这些变量的。但是说它们在`FORM`范围内...... FORM 也是一个结构。对于任何结构，您都可以使用关联数组表示法动态访问键。（另外，请确保正确确定变量的范围。）

```
<cfloop from="0" to="#numberAuthorized - 1#" index="counter">
  <!--- extract value of authorized_name0, authorized_name1, ... --->
  <cfset variables.fullName = FORM["authorized_name"& counter]>

  <cfquery name="qAddAuthorizedPeople" datasource="#thedb#" blockfactor="100">
    INSERT INTO people (requestid, fullname)
    VALUES (
      <cfqueryparam value="#requestid#" cfsqltype="cf_sql_varchar">
      , <cfqueryparam value="#variables.fullName#" cfsqltype="cf_sql_varchar">
    )
  </cfquery>
</cfloop> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:13:30.217

如果您从查询中获取名称列表，那么您将如何循环并将它们添加到 INSERT 到数据库中：

```
<cfloop from="1" to="#structCount(numberAuthorized)#" index="person">
    <cfquery name="qAddAuthorizedPeople" datasource="#thedb#" blockfactor="100">
    INSERT INTO people (requestid, fullname)
    VALUES ('#requestid#', '#numberAuthorized["authorized_name"][person]#')
    </cfquery>
</cfloop> 
```

在上面的示例中，“authorized_name”假定为您从中获取名称的表或结构的列的名称。这可以很容易地来自某种结构。

如果这是传入的表单结构的名称，我将范围更改为使用 structCount(numberAuthorized)。如果表单名称的每个名称的末尾都附加了值，例如“authorized_name_0”和“authorized_name_1”，那么在在每次插入之前设置这些变量的代码，这样就很清楚你在做什么。例子：

```
<cfloop from="1" to="#structCount(numberAuthorized)#" index="person">
  <cfset counter = counter + 1>
  <cfset newFullname = numberAuthorized["authorized_name_" & counter]>
  <cfquery name="qAddAuthorizedPeople" datasource="#thedb#" blockfactor="100">
  INSERT INTO people (requestid, fullname)
  VALUES ('#requestid#', '#numberAuthorized["authorized_name"][person]#')
  </cfquery>
</cfloop> 
```

目前尚不清楚您是在使用结构还是在使用什么，因此语法需要根据它进行更改。从这个角度考虑上面更多的伪代码。

# python - Python - 1 程序，在不同端口但在同一主机上发送和接收，这可能吗？

> ID：12518219
> 
> 赞同：4
> 
> 时间：2012-09-20T18:01:06.323
> 
> 标签：python, sockets, udp, localhost

使用 Python，是否可以在本地主机和某个端口上发送 UDP 数据，然后在同一个程序中同时监听本地主机上的不同端口？我不断收到错误 48'address already in use' 并尝试使用 python 的重用地址，尽管我很确定它无论如何都不适用于此应用程序。

背景：我对软件开发一无所知，更不用说Python了，这只是有人在工作中要求的。

我很感激任何帮助。

```
from threading import Thread
import time
import socket

HOST = 'localhost'
PORT = 5455
PORT1 = 5457
data1 = "1"

s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((HOST,PORT1))

a = 0
def myfunction(string, *args):
    while 1:
        cmd = int( raw_input("send message: ") )
        if (cmd == 1):
            s.sendto(data1, (HOST,PORT))
            time.sleep(1)

def myfunction2(string, *args):
    while 1:
        print s.recv(30)
        time.sleep(.5)

if __name__=='__main__':

    try:
        Thread(target=myfunction, args=(a, 1)).start()
        Thread(target=myfunction2, args=(a, 1)).start()
    except Exception, errtxt:
        print errtxt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:03:18.103

是的。任何语言。您可能正在两次监听同一个端口；TCP 和 UDP 端点的特征在于 IP 地址和端口。“地址已在使用中”只会出现在完全匹配、相同地址*和*相同端口的情况下。

此外，请确认侦听端口尚未与`netstat`.

**更新**（感谢 l4mpi）：如果您在没有超级用户权限的情况下尝试使用低于 1024 的端口，您将收到“拒绝访问”。

**更新**

我稍微修改了你的代码；您遇到的问题之一是关于发送和接收套接字的一些混淆，这是“客户端”功能，哪个是“服务器”。

我冒昧地查询了消息正文而不是“1”，但是如果需要，很容易将其放回原处。

```
from threading import Thread
import time
import socket

CONN = ('localhost', 5455)

def fn_client(string, *args):
    cs = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
    cs.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    while 1:
        cmd = int( raw_input("command (1 to send): ") )
        if (cmd == 1):
            data = raw_input("message to send: ")
            cs.sendto(data, CONN)
            time.sleep(1)

def fn_server(string, *args):
    ss = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
    ss.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    ss.bind(CONN)
    while 1:
        print "Server received '%s'" % (ss.recv(30))
        time.sleep(.5)

if __name__=='__main__':

    a = 0
    try:
        Thread(target=fn_client, args=(a, 1)).start()
        Thread(target=fn_server, args=(a, 1)).start()
    except Exception, errtxt:
        print errtxt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:38:07.083

你的代码对我有用，只要它不产生`Address already in use`.

但是您的线程代码不是太干净，`KeyboardInterrupt`没有在线程中处理。这是多线程的一个常见问题，请参阅[此答案](https://stackoverflow.com/a/3788243/1599111)或[此配方](http://code.activestate.com/recipes/496735-workaround-for-missed-sigint-in-multithreaded-prog/)以获取有关如何缓解它的示例。

这意味着您不能使用`CTRL-C`. 相反，您可能不得不求助于使用类似的东西`kill [pid]`，甚至可能使用`-9`? 我的猜测是你从之前运行的程序中得到了剩余的连接，导致`Address already in use`. 使用类似的东西`netstat -anp | grep 5457`来确定该端口上是否仍有连接。

另请参阅[Doug Hellman 的文章](http://www.doughellmann.com/PyMOTW/threading/)，以获得对线程的良好介绍。

# sml - 使用模式匹配在 SML 中添加

> ID：12518221
> 
> 赞同：0
> 
> 时间：2012-09-20T18:01:07.843
> 
> 标签：sml, smlnj

我是第一次学习sml，对模式匹配的语法不太确定。

作为实践，我尝试制作一些关于二进制数的简单程序。

```
datatype Digit = Zero | One
type Nat = Digit list

fun inc [] = One::[]
| inc (Zero::rest) = (One::rest)
| inc (One::rest) = Zero::inc(rest)

fun dec [] = []
| dec (One::rest) = (Zero::rest)
| dec (Zero::rest) = One::dec(rest)

fun add (ds1, ds2) =
    let 
    fun addition ([],[],Zero) = []
            | addition (ds1, [], Zero) = ds1
            | addition ([], ds2, Zero) = ds2
            | addition (One, Zero, Zero) = (One::ds1)
            | addition (One, Zero, One) = Zero::addition(ds1,ds2,One)
            | addition (Zero, One, Zero) = (One::ds1)
            | addition (Zero, One, One) = Zero::addition(ds1,ds2,One)
            | addition (Zero, Zero, Zero) = (Zero::ds1)
            | addition (Zero, Zero, One) = (One::ds1)
            | addition (One, One, Zero) = Zero::addition(ds1,ds2,One)
            | addition (One, One, One) = One::addition(ds1,ds2,One)
    in
      addition(ds1, ds2, Zero)
    end 
```

前两项工作找到了，但我无法获得额外的工作。第三个函数的重点是添加二进制数并返回一个数字列表。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:44:40.753

错误`addition`在于`One`and`Zero`不是列表，因此它们与`[]`,`ds1`等不兼容。

`inc`你用and做得很好`dec`。我认为您可以使用相同的模式`add`并利用`inc`您创建的模式：

```
fun add (ds1, []) = ds1
  | add ([], ds2) = ds2
  | add (Zero::ds1, d::ds2) = d::add(ds1, fs2)
  | add (One::ds1, Zero::ds2) = One::add(ds1,ds2)
  | add (One::ds1, One::ds2) = Zero::inc(add(ds1,ds2)) 
```

# php - 带有数据解析的 JQuery $.post

> ID：12518222
> 
> 赞同：1
> 
> 时间：2012-09-20T18:01:11.993
> 
> 标签：php, jquery, ajax, json

我正在尝试使用 JQuery 基于使用 json_encode(array) 从外部 PHP 文件发送的数组来填充文本框。选中的选择框选项确定将哪个选项值发送到外部 PHP 文件。不幸的是，我的文本框总是空的。我一直在尝试使用 Firebug 和 lint 站点进行调试，但我无法弄清楚为什么没有人口。***请忽略这里的安全部分***

主索引页面片段：

```
function loadDoc()
{
   $('#verb').live('change', function()
   {
      $.post("loadTextBox.php", {verb_value: $(this).val()},
      function(data)
      {
         $("#textbox").html(data.first);
         $("#textbox2").html(data.second);
         $("#textbox3").html(data.third);
         $("#textbox4").html(data.fourth);
         $("#textbox5").html(data.fifth);
         $("#textbox6").html(data.sitxh);
      },"json");
   });
} 
```

外部PHP文件代码：

```
<?php

header('Content-Type:application/json;charset=utf-8');

$file_absolute = "---placeholder for correct file path---";
include_once($file_absolute);
$mysql = new mysqli($db_host, $db_username, $db_password, $db_name);
$verb_value = $_POST['verb_value'];

$mysql->query("SET CHARACTER SET 'utf8'");

$result = $mysql->query("SELECT present_tense FROM $verb_value");

$queryResult = array();

while ($row = $result->fetch_object())
{
    $queryResult[] = $row->present_tense;
}
$textboxValue = $queryResult[0];
$textboxValue2 = $queryResult[1];
$textboxValue3 = $queryResult[2];
$textboxValue4 = $queryResult[3];
$textboxValue5 = $queryResult[4];
$textboxValue6 = $queryResult[5];
$array = array('first'=>$textboxValue,'second'=>
$textboxValue2,'third'=>$textboxValue3,'fourth'=>
$textboxValue4,'fifth'=>$textboxValue5,'sixth'=>
$textboxValue6);
echo json_encode($array);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:05:44.280

如果您有文本框，请考虑使用[`.val()`](http://api.jquery.com/val/)而不是`.html`. `.val()`应该用于设置表单元素的值。

此外，该[`.live()`](http://api.jquery.com/live/)方法已被弃用，因此请停止使用它。

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:05:47.783

您使用错误的 jquery 方法将值放入文本框中

替换这个

```
$("#textbox").html(data.first); 
```

和

```
$("#textbox").val(data.first); 
```

希望这能解决您的问题。

# android - 匹配父布局的高度

> ID：12518223
> 
> 赞同：4
> 
> 时间：2012-09-20T18:01:16.570
> 
> 标签：android

我想要一个视图来匹配其父级的高度，如下所示：

```
<RelativeLayout
    layout_height="wrap_content">

    <LinearLayout
        id="@+id/A"
        layout_height="wrap_content"
        layout_alignParentTop="true">
        ...
    </LinearLayout>

    <LinearLayout
        id="@+id/B"
        layout_height="match_parent"   <-- possible?
        layout_alignParentTop="true">
        ...
    </LinearLayout>

</RelativeLayout> 
```

所以线性布局 A 会膨胀到 100dp。线性布局 B 膨胀到大约 50 dp 高。但我希望它与父母的高度相匹配，在这种情况下应该是 100dp 以容纳 A。有没有办法做到这一点？我的布局如上，但 B 没有延伸到 A 为父容器设置的全高。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T18:20:48.723

所以，match_parent 替换了 fill_parent。我发现了这个由 Romain Guy 回答的问题。

[结合父级的 wrap_content 和子级的 fill_parent](https://stackoverflow.com/questions/4606613/combining-wrap-content-on-parent-and-fill-parent-on-child)

他说这不应该起作用，但他们使它适用于 LinearLayout，并且他最近使它适用于 Honeycomb 的 FrameLayout。

基于此，我推测这可能不适用于RelativeLayout？

尝试使用 LinearLayout 或 FrameLayout 而不是 RelativeLayout 看看是否可行？

*编辑*这是我所做的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <FrameLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent">

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            >
            <TextView  
                android:layout_width="match_parent" 
                android:layout_height="wrap_content" 
                android:text="@string/hello"
                />
        </LinearLayout>

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            >
            <Button 
                android:layout_height="match_parent"
                android:layout_width="match_parent"
                android:text="TEST"/>
        </LinearLayout>

    </FrameLayout>

</LinearLayout> 
```

字符串的值：

```
<string name="hello">Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game! Hello World, Game!</string> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-20T15:40:32.667

Why don't you simply set alignParentTop & alignParentBottom to be true? It should work for you.

# facebook - 使用 fql 从friend_list 获取朋友ID

> ID：12518225
> 
> 赞同：0
> 
> 时间：2012-09-20T18:01:16.127
> 
> 标签：facebook, facebook-fql

如果之前已经回答过，请原谅我，但是看着提出的问题，我没有在 StackOverlow 中看到我的答案。我是一位经验丰富的 PHP 程序员，开始了解 Facebook API。我认为 FQL 的实现非常酷。我对 SQL 语句的了解将使学习体验非常顺畅。然而，Facebook 的文档似乎多次否定了这一点。我看到了一个可以查询的对象列表，但我觉得该列表缺少某些关系对象。例如：我希望获得经过身份验证的用户的friend_list 列表以及与每个列表相关的用户朋友的列表。我可以成功检索经过身份验证的用户的朋友列表和他们的朋友列表，但是我如何获得与他的每个friend_lists 对象相关的经过身份验证的用户的朋友列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:59:16.707

使用以下 fql：

```
SELECT flid, owner, name FROM friendlist WHERE owner=me() 
```

更多细节，

[http://developers.facebook.com/docs/reference/fql/friendlist/](http://developers.facebook.com/docs/reference/fql/friendlist/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:37:20.060

好的，所以进一步的研究使我找到了 FQL 数据库的表部分的完整列表。这可以在这里找到：http: [//developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)在左侧是一个表格列表，你瞧，有一个名为friendlist_member 的朋友和朋友列表的关系表。因此，此时我可以获取经过身份验证的用户创建的好友列表列表，然后执行另一个查询以获取该好友列表中用户的 ID 列表。最后，我进行最后一次查询，以获取这些用户的姓名和照片等详细信息。

# orm - “as”中的 Doctrine2 本机查询水合器错误

> ID：12518227
> 
> 赞同：0
> 
> 时间：2012-09-20T18:01:19.410
> 
> 标签：orm, symfony, doctrine, doctrine-orm

我想使用使用'as'子句的本机查询来设置类属性：

```
public function findIntersects($id,$pontos){

$em = $this->getEntityManager();

 $sql = "SELECT p.imovel,p.id,ST_Area(ST_Intersection(p.location,'POLYGON((".$pontos."))')) as area_int, ST_Area(p.location) as area from propriedades p where ST_Intersects(p.location,'POLYGON((".$pontos."))') and id !=:id";

$rsm = new ResultSetMapping;
$rsm->addEntityResult('Incra\PropriedadesBundle\Entity\Propriedades', 'o');
$rsm->addFieldResult('o', 'id', 'id');
$rsm->addFieldResult('o', 'imovel', 'imovel');
$rsm->addFieldResult('o', 'area_int', 'area_int');
$rsm->addFieldResult('o', 'area', 'area');

 $qns = $this->_em->createNativeQuery($sql, $rsm);
$qns->setParameter("id", $id);
$qns->setParameter("pontos", $pontos);

  return $qns->getResult();

} 
```

我在我的班级中有这个属性，但没有 orm 的注释

我得到一个错误：

> 注意：未定义索引：/var/www/incra/vendor/doctrine/lib/Doctrine/ORM/Internal/Hydration/AbstractHydrator.php 第 205 行中的 area_int

我的课： http: [//pastebin.com/jd3gcr93](http://pastebin.com/jd3gcr93)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:13:04.227

您尚未标记`area_int`为数据列（您班级的第 120 行）。由于您已`area_int`在字段结果 ( `$rsm->addFieldResult('o', 'area_int', 'area_int');`) 中列出，因此 Doctrine 尝试将该列映射到实体，但找不到它。尝试修改你的类

```
/**@ORM\Column(name="area_int", type="int")*/
private $area_int; 
```

另外，只是为了安全/性能/goo代码样式/等。您直接注入`$pontos`查询字符串。这会使您的代码受到 SQL 注入的影响。稍后，您添加`$pontos`为参数。这两种方法是多余的，因此您最好删除其中一种。我肯定会尝试使用参数方法，所以你的查询变成了

```
SELECT p.imovel,p.id,ST_Area(ST_Intersection(p.location,'POLYGON((:pontos))')) as area_int, 
       ST_Area(p.location) as area from propriedades p 
where ST_Intersects(p.location,'POLYGON((:pontos))') and id !=:id 
```

如果它不起作用，您可以删除`$qns->setParameter("pontos", $pontos);`，但是您应该执行尽可能多的完整性检查和验证以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:38:26.280

使用executeQuery 使用native 没有dql

# java - eclipse更新出错

> ID：12518228
> 
> 赞同：0
> 
> 时间：2012-09-20T18:01:20.297
> 
> 标签：java, android, eclipse, error-handling

我在更新plz帮助时遇到了这个问题

收集要安装的项目时发生错误会话上下文是：(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect,operand=, action=)。无法在[http://dl-ssl.google.com/android/eclipse/plugins/com.android.ide.eclipse.adt_20.0.3.v201208082019-427395.jar](http://dl-ssl.google.com/android/eclipse/plugins/com.android.ide.eclipse.adt_20.0.3.v201208082019-427395.jar)读取存储库。读取超时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:13:29.707

检查您的代理设置（使用 - 窗口 -> 首选项 -> 常规 -> 网络连接

如果您直接连接到 Internet，则选择直接，否则请为 HTTP 代理提供适当的信息（如果您在代理后面）

如果设置正确，那么它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:18:57.623

我修复此错误第 1 步转到安装新软件第 2 步删除**dl-ssl.google.com/android/eclipse/plugins**第 3 步通过单击添加重新安装它而不是更新您想要的任何包

# html - CSS3 Firefox 径向渐变消失

> ID：12518230
> 
> 赞同：0
> 
> 时间：2012-09-20T18:01:22.990
> 
> 标签：html, firefox, css, radial-gradients

我有一个 HTML5 页面，其背景为：

```
background: -moz-radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%); 
```

这工作正常，直到页面变长（15000 像素左右），此时背景在 Firefox 上完全消失。

寻找其他地方为我提供了两种不适用于此的解决方案。他们将使用 html & body height 100% 或 background-attachment:fixed。两者都将渐变高度与视口匹配，而不是文档高度。

这适用于较短的页面，但在较长的页面上会中断 FF。有没有我可以在不重组我的html的情况下使用的CSS技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:49:10.523

在我的情况下，以前的答案没有解决它，但我找到了一个解决方案：

```
 background: -moz-radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%) no-repeat; 
```

一旦我指定“不重复”，它将尊重 100%，而不管文档高度变化（无限滚动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:25:52.140

`min-height`尝试在 HTML 节点上指定 a ：

演示：http: [//jsfiddle.net/SO_AMK/76cyn/](http://jsfiddle.net/SO_AMK/76cyn/)

CSS：

```
html {
    min-height: 100%;
}

body {
    background: radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%);
    background: -o-radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%);
    background: -ms-radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%);
    background: -moz-radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%);
    background: -webkit-radial-gradient(center, ellipse cover,  #868c93 0%, #28343b 100%);
} 
```

或者，如果你想要一个固定的背景：http: [//jsfiddle.net/SO_AMK/76cyn/1/](http://jsfiddle.net/SO_AMK/76cyn/1/)

# ruby-on-rails-3 - 如何在另一个插件中从 Rails 3 插件安装数据库模式

> ID：12518232
> 
> 赞同：0
> 
> 时间：2012-09-20T18:01:48.530
> 
> 标签：ruby-on-rails-3, ruby-on-rails-plugins

我正在编写一个 Rails 3 插件，它使用我最近编写的另一个 Rails 3 插件。我们称它们为七月和八月。所以在 8 月的 gemspec 中，我添加了一行：

```
s.add_dependency "july", "~> 0.0.1" 
```

我跑`bundle install`。然后我创建了一些模型和固定装置。接下来我需要迁移数据库：

```
$ cd test/dummy
$ rake august:install:migrations
$ rake db:migrate 
```

现在，August（我正在创建的插件）表在开发和测试数据库中，但 July 表不在。但是我的八月表有我七月表的外键，所以在我可以运行任何测试之前，我需要创建七月表并编写适当的夹具。我希望跑去`rake -T`看看

```
rake august:install:migrations
rake july:install:migrations 
```

但我看到的只是`august`rake 任务。那么如何创建 7 月份的数据库表（除了创建一个新的迁移，这将违反 DRY，因为我已经在我的 7 月份代码库中这样做了）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:36:52.293

Dummy App 必须直接依赖于“july”才能加载“july”的 rake 任务。所以我需要将它包含在 Gemfile 中，而不是 gempspec 中。`bundle install`但是，当我在 Gemfile/gemspec 中放入“august”之后，将它放入 Gemfile 不会强制安装真正的（非虚拟）应用程序 7月。

所以我需要在两个地方都包含它——在 Gemfile 中用于 rake 任务（这可以在一个`:development`组中），并在 gemspec 中（使用`add_dependency`or `add_runtime_dependency`）来强制安装依赖项。这就是解决方案，但我不明白为什么。

我试着在我的评论中解释我对此的想法，[但](https://stackoverflow.com/questions/7517524/understanding-the-gemfile-lock-file/12524057#12524057)并没有真正指出任何解释这种设计方法的逻辑。有人可以解释一下真正的原因吗？

# c++ - 尝试访问对象的成员数据 - 即使在启动后也未定义，有什么问题？

> ID：12518236
> 
> 赞同：0
> 
> 时间：2012-09-20T18:02:06.167
> 
> 标签：c++, class, object

```
if(GetKeyState(VK_SPACE) && Player1.canFire == true)
{
    Player1.canFire = false;
    Player1.hasFired = true;
    Bullet Bullet1((Player1.Xpos + (Player1.Skin->GetWidth() / 2)), 
                    Player1.Ypos - ProjectileSkin->GetHeight() );
}
if(Player1.hasFired = true)
{
    Bullet1.Projectile->CopyTo(m_Screen, Bullet1.m_xPos, Bullet1.m_yPos);
    Bullet1.m_yPos -= 5;
} 
```

在我说的地方`Bullet1.Projectile->CopyTo`，我得到了`Bullet1`未定义的错误，但我已经在上面的 if 块中实例化了它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:04:18.850

当它到达第 9 行时，您`Bullet1`的内容超出了范围。您需要将`Bullet1`变量声明移到`if`语句之外。

但是，如果您无论如何都需要初始化，我根本不明白放置第二个`if`语句的意义。`Bullet1`所以，

```
if(GetKeyState(VK_SPACE) && Player1.canFire == true)
{
    Player1.canFire = false;
    Player1.hasFired = true;
    Bullet Bullet1((Player1.Xpos + (Player1.Skin->GetWidth() / 2)), 
                Player1.Ypos - ProjectileSkin->GetHeight() );
    Bullet1.Projectile->CopyTo(m_Screen, Bullet1.m_xPos, Bullet1.m_yPos);
    Bullet1.m_yPos -= 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:04:35.017

```
Bullet Bullet1((Player1.Xpos + (Player1.Skin->GetWidth() / 2)), 
                    Player1.Ypos - ProjectileSkin->GetHeight() ); 
```

你的子弹是一个局部变量。它将以 } 结尾。可能的解决方案是不在本地创建。或将其作为参数发送给两个函数。

这里还有一个严重的错误：

如果（Player1.hasFired = true）

应该是==

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:04:50.247

的范围`Bullet1`仅在`IF`块内。如果您也想在其他`IF`块中使用它，请在外部定义它，如下所示：

```
Bullet Bullet1((Player1.Xpos + (Player1.Skin->GetWidth() / 2)), 
                Player1.Ypos - ProjectileSkin->GetHeight() );
if(GetKeyState(VK_SPACE) && Player1.canFire == true)
{
    Player1.canFire = false;
    Player1.hasFired = true;
}
if(Player1.hasFired = true)
{
    Bullet1.Projectile->CopyTo(m_Screen, Bullet1.m_xPos, Bullet1.m_yPos);
    Bullet1.m_yPos -= 5;
} 
```

# iphone - 如何使用 XIB 文件从另一个 UIView 获取值？

> ID：12518240
> 
> 赞同：0
> 
> 时间：2012-09-20T18:02:22.453
> 
> 标签：iphone, objective-c, ios, ipad

我有两个 XIB 文件。第一个带有我的应用程序视图，然后用户可以填写所需的信息。第二个是表单，用户可以开始输入一些名称，我的表格视图将像一个自动填充字段。

问题是，如何打开第二个视图以允许用户进行研究，然后将用户发送回另一个屏幕并显示所选信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:24:18.333

您可以通过多种方式管理这些数据。

1）您可以使用您的单例数据类来处理数据。

2）您可以使用 appDelegate 处理数据。

3）您可以让数据对象说`NSDictionary`，以便从第二个视图打开退出，数据被发送到第一个视图。

在我看来，使用第三个选项，在第一个视图中有一个方法，比如..

```
-(void)setData(NSDictionary*)data
{
enter code here
} 
```

设置数据，并将第一个视图的指针设置为第二个视图，同时`alloc`呈现第二个视图。

在退出第二个视图时，使用该指针使用该方法发送数据..

# for-loop - 循环的批处理脚本不会设置变量

> ID：12518242
> 
> 赞同：11
> 
> 时间：2012-09-20T18:02:37.587
> 
> 标签：for-loop, batch-file, anthill

我有一个批处理脚本试图从蚁丘中执行以获取包含要编译的 plsql 的文件夹名称。

```
for /F %%a in ('dir /b D:\AHP_WorkDir\var\jobs\projects\rprt_test\rprt_test\plsql') do (
  set FOLDER=%%a
  echo *** PROCESSING FOLDER %FOLDER% ***
) 
```

这呼应 *** PROCESSING FOLDER ***

好像变量没有设置，在花了太长时间验证它之后我很确定这是真的

所以......我做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T18:09:03.307

*这本质上是[今天早些时候提出的问题](https://stackoverflow.com/questions/12513691/cmd-get-string-from-file-and-set-it-as-a-variable-to-use-in-cd)的重复。这是我对上述问题的回答......*

您需要查看批处理文件的[EnableDelayedExpansion](http://ss64.com/nt/delayedexpansion.html)选项。从上述链接：

> 使用 FOR 循环时，延迟变量扩展通常很有用。通常，即使它跨越批处理脚本的多行，整个 FOR 循环也会作为单个命令进行评估。

所以你的脚本最终看起来像这样：

```
@echo off
setlocal enabledelayedexpansion

for /F %%a in ('dir /b D:\AHP_WorkDir\var\jobs\projects\rprt_test\rprt_test\plsql') do (
  set FOLDER=%%a
  echo *** PROCESSING FOLDER !FOLDER! ***
) 
```

作为替代方案，只需`%%a`在内部循环中使用变量，而不是创建新变量。

# plone - 您没有在 Plone 的 [genericsetupprofile 注册] 中为 ... 指定 i18n 翻译域

> ID：12518245
> 
> 赞同：4
> 
> 时间：2012-09-20T18:02:40.717
> 
> 标签：plone, zope

在 Plone 启动时，我收到来自定制产品的警告

```
/Users/mikko/code/buildout-cache/eggs/zope.configuration-3.7.4-py2.7.egg/zope/configuration/fields.py:416:
UserWarning: You did not specify an i18n translation domain for the 'title' field in /Users/mikko/code/xxx-dev/src/xxx-eggs/Products.xxxExternal/Products/xxxExternal/configure.zcml 
```

不过`configure.zcml`里面有`i18:domain`设置。我还直接设置了一些额外的属性，以确保：

```
<configure  xmlns="http://namespaces.zope.org/zope"
    xmlns:five="http://namespaces.zope.org/five"
    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:i18n="http://namespaces.zope.org/i18n"
    i18n:domain="xxxPatient"
    >

  <include package=".browser" />
  <include package="plone.app.z3cform" />

    <!-- Register the installation GenericSetup extension profile -->
    <genericsetup:registerProfile
      name="default"
      title="xxxExternal"
      directory="profiles/default"
      provides="Products.GenericSetup.interfaces.EXTENSION"
      i18n:attributes="title; description"
      i18n:domain="xxxPatient"
      />

</configure> 
```

这是给出警告的相关代码：

```
def fromUnicode(self, u):
    context = self.context
    domain = getattr(context, 'i18n_domain', '')
    if not domain:
        domain = 'untranslated'
        import pdb ; pdb.set_trace()
        warnings.warn(
            "You did not specify an i18n translation domain for the "\
            "'%s' field in %s" % (self.getName(), context.info.file )
            )
    v = super(MessageID, self).fromUnicode(u) 
```

知道为什么 i18n:domain 没有出现或如何摆脱警告吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:50:12.260

请注意，代码`i18n_domain`使用下划线查找，但您将其指定为`i18n:domain`命名空间值。

以下作品：

```
<configure  xmlns="http://namespaces.zope.org/zope"
    xmlns:five="http://namespaces.zope.org/five"
    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
    xmlns:browser="http://namespaces.zope.org/browser"
    i18n_domain="xxxPatient"
    >

  <include package=".browser" />
  <include package="plone.app.z3cform" />

    <!-- Register the installation GenericSetup extension profile -->
    <genericsetup:registerProfile
      name="default"
      title="xxxExternal"
      directory="profiles/default"
      provides="Products.GenericSetup.interfaces.EXTENSION"
      />

</configure> 
```

ZCML 在国际化方面与 ZPT 不同。:-)

# ruby - 使用来自另一个模块的方法时，Selenium::WebDriver:Module 的未定义方法“find_element”

> ID：12518253
> 
> 赞同：1
> 
> 时间：2012-09-20T18:03:09.983
> 
> 标签：ruby, variables, selenium, methods, scope

您好，我是使用 Ruby 对 Selenium 进行编程的新手，但遇到了一些麻烦。我试图从另一个模块中的一个类中调用一个方法，这样我就可以创建一种方法库，每次我返回错误时，`NoMethodError: undefined method 'find_element' for Selenium::WebDriver:Module`我都有 require_relative "LeadForm" 来要求另一个模块，并且当我放代码时代码可以正常工作方法直接进入我正在使用它的类，但我真的很想只写一次，因为这是我将经常使用的东西。

代码是

> def self.progCNA
> 
> Selenium::WebDriver::Support::Select.new(@driver.find_element(:name, "area_of_study")).select_by(:text, "Health & Medical / Nursing") Selenium::WebDriver::Support::Select .new(@driver.find_element(:name, "concentration")).select_by(:text, "护理助理 (CNA)")
> 
> 结尾

当我在运行测试的类中调用它时

> LeadForm.progCNA

它似乎可以识别并运行该方法，但随后该方法出错。

任何帮助将不胜感激，因为这一直是很多挫折的根源，我无法终生在线找到解决方案。我向上、向下和侧身看。如果您需要我提供更多信息，请告诉我，我会尽快给您！非常感谢。

我正在使用 Windows 7 Pro sp1 JetBrains RubyMine 4.5.3 Ruby 1.9.3 selenium-webdriver 2.25.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:36:09.530

如果我理解这种情况，我认为你有一个可变范围问题。

如果你想保持你的类结构不变，我会用......更新你的方法

> def self.progCNA（驱动程序）
> 
> Selenium::WebDriver::Support::Select.new(driver.find_element(:name, "area_of_study")).select_by(:text, "Health & Medical / Nursing") Selenium::WebDriver::Support::Select. new(driver.find_element(:name, "concentration")).select_by(:text, "护理助理 (CNA)")
> 
> 结尾

...并调用它

> LeadForm.progCNA(@driver)

您可以...改为使 $driver 全局...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T06:56:04.767

```
WebElement element = driver.find_Element(:xpath=>regisCodePath)
String passcode=element.getAttribute('value'); 
```

# pdf - 未找到 PDF 标题签名，iText

> ID：12518254
> 
> 赞同：2
> 
> 时间：2012-09-20T18:03:11.970
> 
> 标签：pdf, itext

您好我正在尝试阅读 servlet 上传的 PDF 文件。

这是代码

```
//out = byte array
out = readInItem(item);
fileToUpload = new ByteArrayInputStream(out.toByteArray());

Map<String, AcroFields.Item> pdfBoxNames = new HashMap<String, AcroFields.Item>();
PdfReader reader = new PdfReader(fileToUpload);
ByteArrayOutputStream os = new ByteArrayOutputStream();
PdfStamper stamper = new PdfStamper(reader, os);
AcroFields acroFields = stamper.getAcroFields();
pdfBoxNames = acroFields.getFields(); 
```

我的 pdf 像这样开始 %PDF-1.6

错误消息是 java.io.IOException: PDF header signature not found。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T17:00:38.850

面临同样的异常！确保你已经包含了`TableHeader`和一个作家`PageEvent`集。我只是把它们加起来，这个异常就消失了！希望对你有帮助

```
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(filePath));
TableHeader includeHeader = new TableHeader();
writer.setPageEvent(includeHeader); 
```

# thrift - 生成的 Java 代码 Thrift 0.8.0 上的编译错误

> ID：12518255
> 
> 赞同：1
> 
> 时间：2012-09-20T18:03:15.470
> 
> 标签：thrift

我正在试验一个简单的 Thrift 服务器，并想用 java 编写客户端。我运行了命令

->节俭-gen java BLT.thrift

生成的 java 文件 Optimization.java 在 Eclipse IDE 中显示以下错误。

```
public static class Client extends org.apache.thrift.TServiceClient implements Iface 
```

> 错误：类型 TServiceClient 不能是 Client 的超类；超类必须是类

```
public Client(org.apache.thrift.protocol.TProtocol prot)
{
  super(prot, prot);
} 
```

> 构造函数 Object(TProtocol, TProtocol) 未定义。......

我仍然继续编译它。

```
->mvn clean install

Optimization.java:[38,54] no interface expected here
[ERROR] /thrift/Optimization.java:[39,83] type parameter model.thrift.Optimization.Client is not within its bound
[ERROR] /thrift/Optimization.java:[68,6] cannot find symbol
symbol  : method
sendBase(java.lang.String,com.model.thrift.Optimization.maximizeRevenue_args)
location: class model.thrift.Optimization.Client
[ERROR] /thrift/Optimization.java:[74,6] cannot find symbol
symbol  : method
receiveBase(model.thrift.Optimization.maximizeRevenue_result,java.lang.String)
location: class model.thrift.Optimization.Client
[ERROR] /thrift/Optimization.java:[98,97] cannot find symbol
symbol  : variable ___protocolFactory
location: model.thrift.Optimization.AsyncClient
[ERROR] /thrift/Optimization.java:[98,117] cannot find symbol
symbol  : variable ___transport
location: class model.thrift.Optimization.AsyncClient
[ERROR] /thrift/Optimization.java:[99,10] cannot find symbol
symbol  : variable ___currentMethod
location: class model.thrift.Optimization.AsyncClient
[ERROR] /thrift/Optimization.java:[100,6] cannot find symbol
symbol  : variable ___manager
location: class thrift.Optimization.AsyncClient
[ERROR] /thrift/Optimization.java:[387,23] cannot find symbol
symbol  : method getScheme()
location: class org.apache.thrift.protocol.TProtocol
[ERROR] /thrift/Optimization.java:[391,23] cannot find symbol
symbol  : method getScheme()
location: class org.apache.thrift.protocol.TProtocol
[ERROR] /thrift/Optimization.java:[665,23] cannot find symbol
symbol  : method getScheme()
location: class org.apache.thrift.protocol.TProtocol
[ERROR] /thrift/Optimization.java:[669,23] cannot find symbol
symbol  : method getScheme()

-> mvn dependency:tree | grep -i thrift
[INFO] \- org.apache.thrift:libthrift:jar:0.8.0:compile

-> thrift -version java
Thrift version 0.8.0 
```

我确实找到了这个线程，但推荐的解决方案对我不起作用 [Maven Thrift 存储库](https://stackoverflow.com/questions/2582085/maven-thrift-repository)

我还对用于生成代码的 jar 和使用上面的 pom 提取的 jar 进行了校验和。有谁知道为什么这些会有所不同

```
->md5sum /usr/local/lib/libthrift-0.8.0.jar
fff7102558cb0ab1c103b62752166ce8  /usr/local/lib/libthrift-0.8.0.jar

->md5sum ~/.m2/repository/org/apache/thrift/libthrift/0.8.0/libthrift-0.8.0.jar
d68695bb2406cb2ab5fbae6ff6e27d7e
/home/nipun/.m2/repository/org/apache/thrift/libthrift/0.8.0/libthrift-0.8.0.jar 
```

任何帮助/见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:47:39.843

看起来您链接的 libthrift 版本错误：org.apache.thrift.TServiceClient 在 0.8.0 中定义如下：

```
public abstract class TServiceClient 
```

在 0.6.1 中：

```
public interface TServiceClient 
```

我建议检查旧 libthrift jar 项目中是否存在传递依赖项。

# angularjs - 对表格行使用 ng-repeat

> ID：12518259
> 
> 赞同：25
> 
> 时间：2012-09-20T18:03:19.437
> 
> 标签：angularjs

我正在尝试将模型中的数据插入到模板中，但我想在每 7 次重复后添加一个新的表格行。使用基于字符串的模板，我可以很容易地使用迭代索引和模数来做到这一点，但我不太清楚如何使用 Angular 的 DOM 模板来做到这一点。

这是HTML：

```
<div ng-controller="MyCtrl">
  <table cellspacing="0" cellpadding="0">
   <colgroup span="7"></colgroup>

   <tbody>
     <tr class="days">
       <th scope="col" title="Monday">Mon</th>
       <th scope="col" title="Tuesday">Tue</th>
       <th scope="col" title="Wednesday">Wed</th>
       <th scope="col" title="Thursday">Thu</th>
       <th scope="col" title="Friday">Fri</th>
       <th scope="col" title="Saturday">Sat</th>
       <th scope="col" title="Sunday">Sun</th>
     </tr>
     <tr>
         <td ng-repeat="date in dates">
             {{ date }}
             <!-- After seven iterations a new `<tr>` should be aded -->
        </td>
     </tr>
 </tbody>
 </table>
</div> 
```

而 javascript 它类似于：

```
myApp = this.angular.module('myApp', []);

var monthDays = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1516, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31];

myApp.controller('MyCtrl', function($scope) {
  return $scope.dates = monthDays;
});​ 
```

您可以在此处查看 JSFiddle 中的代码：http: [//jsfiddle.net/3zhbB/2/](http://jsfiddle.net/3zhbB/2/)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T18:23:03.343

用天制作`$scope.dates`一个数组。

它里面的每个数组都是一行，行数组里面的每一天都是一天

请参阅此更新的 JSFiddle [http://jsfiddle.net/6aqtj/1/](http://jsfiddle.net/6aqtj/1/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T20:44:00.590

如果您想保留作用域数据的原样（作为数组），您可以编写一个指令，并在那里封装所有 HTML 生成，因此：

```
<div ng-controller="MyCtrl">
    <calendar></calendar>
</div>

myApp.directive('calendar', function() {
// Requires that scope contains a 'monthDays' array.
// Adds 'weeks' to scope.
return {
    restrict: 'E',
    replace: true,
    template: '<table cellspacing="0" cellpadding="0">'
    + ...
    + '<th scope="col" title="Sunday">Sun</th></tr>'
    + '<tr ng-repeat="week in weeks">'
    + '<td ng-repeat="day in week">{{day}}</td>'
    + '</tr></tbody></table>',
    link: function(scope) {
        scope.weeks = [];
        for (var i = 0; i < scope.monthDays.length; i++) {
            if (i % 7 == 0) {
                scope.weeks.push([]);
            }
            scope.weeks[scope.weeks.length-1].push(scope.monthDays[i]); 
```

小提琴：http: [//jsfiddle.net/mrajcok/dGpsr/](http://jsfiddle.net/mrajcok/dGpsr/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T22:39:32.693

您可以使用当前数据轻松完成此操作。我刚刚添加了一个简单的过滤器：http: [//jsfiddle.net/3zhbB/6/](http://jsfiddle.net/3zhbB/6/)

不过，这并不是最好的解决方案，因为它的效率很低。它必须创建一个新数组并进行大量切片。但它仍然很酷:-D

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-20T18:46:24.347

我同意 Renan 对数组数组的看法，并试图让它更像日历。假设您想要空白表格单元格，并且您希望月份从一周中正确的一天开始（0-6）。看看这个函数：

```
function generateWeeks(startDay, numDays){
  var weeks = [];
  var numWeeks = (numDays + startDay) / 7;
  for(var i=0; i<numWeeks; i++){
    weeks[i] = [];
    for(var j=0; j<7; j++){
      if(i==0 && j<startDay){
        weeks[i].push('');
      }else{
        var day = (j-startDay+1)+(i*7);
        weeks[i].push(day<=numDays ? day : '');
      }
    }
  }
  return weeks;
} 
```

对于当前月份，我会调用 generateWeeks(5,30)。九月有 30 天，从星期六开始（你的日历周是星期一 - 星期日）。

```
<tr ng-repeat="week in weeks">
  <td ng-repeat="day in week">{{day}}
</tr> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T23:40:50.260

我自己刚遇到这个问题。不过，我将在单个“天”集合上使用无序列表而不是 html 表，并使用 css 使其看起来像一个表。因此，如果每个元素的宽度为 14%，它将自动换行到 7。

这就是我的方法的起源： [只用 CSS 创建三列表？（没有表格元素）](https://stackoverflow.com/questions/3474737/creating-three-column-table-with-css-only-no-table-element)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-19T14:26:03.847

您可以使用条件 like`$index % 7 == 0`来编写`</tr><tr>`

我刚刚创建了一个像这样的简单表：

```
<style type="text/css">
    .selectable.year {
        display:inline-block; 
        width:25%;
        border-right-width:0px;
        text-align: center;
    }
    .selectable.year.first {
        margin-left:0;
    }
    .selectable.year.lastcol, .selectable.year:last-child {
        border-right-width:1px;
    }
</style>
<div class="calendar">
    <div class="selectable year" 
        ng-class="{ 'firstcol' : $index % 4 == 0 , 'lastcol' : $index % 4 == 3 }"
        ng-repeat="year in search.yearList"
        <span class="caption">{{ year }}</span>
    </div>
</div> 
```

正如你所看到的，它包裹着.. 它不是一张桌子，真的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-07T06:26:49.607

对于 angular 5+，使用 ngFor 而不是 ng-repeat。

```
 <tr *ngFor="let mi of mileages; let i = index">
                            <td>{{mi.fromAddress}}</td>
</tr> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-29T17:07:41.107

这是一个古老的问题，但现在有一个明确的答案！`ng-repeat-start`使用and极大地改进了以角度重复复杂部分的整个过程，`ng-repeat-end`您可以在此处详细阅读：

[http://www.undefinednull.com/2015/04/10/repeating-multiple-elements-using-ng-repeat-start-and-ng-repeat-end-in-angularjs/](http://www.undefinednull.com/2015/04/10/repeating-multiple-elements-using-ng-repeat-start-and-ng-repeat-end-in-angularjs/)

# .htaccess - .htaccess 语言子域影响其他规则

> ID：12518261
> 
> 赞同：1
> 
> 时间：2012-09-20T18:03:36.090
> 
> 标签：.htaccess, mod-rewrite, subdomain

我知道有很多这样的问题，但我仍然无法解决问题。

我正在使用以下 .htaccess 代码来更改语言：

```
RewriteCond %{HTTP_HOST} ^(en|us)\.domain\.com$
# Create an environment variable to remember the language:
RewriteRule (.*) - [QSA,E=LANGUAGE:%1]
# Now check if the LANGUAGE is empty (= doesn't exist)
RewriteCond %{ENV:LANGUAGE} ^$
# If so, create the default language (=en):
RewriteRule (.*) - [QSA,E=LANGUAGE:en]
# WHATEVER THE LANGUAGE ADD IT TO THE URI:
RewriteRule (.*) $1?language=%{ENV:LANGUAGE} [QSA] 
```

这会添加`?language=variable`到地址的末尾。

但由于某种原因，像这样的其余规则会产生内部服务器错误：

```
RewriteRule ^([0-9]+)/([^/]+)(|/)$ code.php?id=$1&title=$2 [L] 
```

与此类似的简单规则（不添加变量）可以正常工作：

```
RewriteRule ^stats(|/)$ stats.php [L] 
```

我希望有人能够告诉我问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:08:25.457

您需要包含一个`QSA`或您的语言参数丢失：

```
RewriteRule ^([0-9]+)/([^/]+)(|/)$ code.php?id=$1&title=$2 [L,QSA] 
```

该规则没有任何问题，500错误可能是由`code.php`

* * *

看起来您拥有的语言规则就是循环的内容，除了将 a`QSA`添加到添加到查询字符串的其他规则之外，您还需要在已经拥有它时排除附加“语言 =”。因此，在最后一条语言规则之上，添加以下内容：

```
RewriteCond %{QUERY_STRING} !language 
```

所以它看起来像：

```
RewriteCond %{QUERY_STRING} !language
# WHATEVER THE LANGUAGE ADD IT TO THE URI:
RewriteRule (.*) $1?language=%{ENV:LANGUAGE} [QSA] 
```

# ipad - 如何调整视图大小以避开 iPad 的键盘？

> ID：12518268
> 
> 赞同：1
> 
> 时间：2012-09-20T18:03:52.607
> 
> 标签：ipad, on-screen-keyboard

我在模态表单中呈现视图。它可以工作，但是键盘在横向时会挡住屏幕的下半部分（在纵向时会挡住屏幕的一小部分）。如何补偿 iPad 上的键盘？

UI 基本上是一个位于屏幕左侧 3/4 处的大文本框，以及在 tableview 中沿右边缘的一条照片。我需要调整表格视图的大小，以便用户可以滚动查看最后一个。

（我已经阅读了如何在 iPhone 上执行此操作，但相同的代码在 iPad 上不起作用。）

![笔记用户界面](../Images/6ea78da8da795654acfd52d707abecd4.png)

（键盘下方有 3.5 张照片，但如果您尝试向下滚动，表格视图会弹回该位置。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:48:16.610

我的问题是由于在`viewWillAppear`. 此时，键盘通知会触发，但其中的坐标一旦转换为新视图就无效，因为视图实际上并没有出现。

所以不要这样做：

```
- (void)viewWillAppear: (BOOL)animated {
    [super viewWillAppear: animated];

    // register for keyboard events here

    [_field becomeFirstResponder];
} 
```

我现在正在这样做：

```
- (void)viewWillAppear: (BOOL)animated {
    [super viewWillAppear: animated];

    // register for keyboard events here

    dispatch_async(dispatch_get_main_queue(), ^{
        [_field becomeFirstResponder];
    });
} 
```

否则，问题就很简单了：找到键盘框架，将其转换为本地坐标，调整视图以避开它。

我在github上发布了一个测试项目： [Keyboard Ducker](https://github.com/tewha/Keyboard-Ducker)

# clojure - 如何仅返回真实值作为映射操作的结果

> ID：12518270
> 
> 赞同：3
> 
> 时间：2012-09-20T18:03:54.543
> 
> 标签：clojure

我在下面有一个函数来返回元音。但是我只想返回真实值，我该怎么做？

```
(map #{\a \e \i \o \u} (seq (char-array "Hello"))) => (nil \e nil nil \o) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T21:39:04.297

`filter identity (map f ...`= `(keep f ...`。

```
> (keep #{\a \e \i \o \u} (seq (char-array "Hello")))
(\e \o) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T18:07:05.463

过滤非零的

```
(filter (comp not nil?)
    (map #{\a \e \i \o \u} (seq (char-array "Hello")))
(\e \o) 
```

您可以像这样对真实性进行一般过滤：

```
 (filter #(if % true false) (map #{\a \e \i \o \u} "Hello"))
 (\e \o) 
```

值得注意的是，集合实现了一个可调用接口，如果项目在集合中，则返回 true，因此您可以直接使用集合作为谓词进行过滤，因此对于您的初始示例，答案可以直接用 filter 表示（尽管这是一个不同的问题）

```
(filter #{\a \e \i \o \u} "Hello")
(\e \o) 
```

ps：字符串已经是序列，因此您并不严格需要该`(seq (char-array "Hello"))`位，尽管它并没有真正的伤害。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T19:13:18.630

[我想这与只计算集合中的真值](https://stackoverflow.com/questions/12518320/counting-only-truthy-values-in-a-collection)相同，因此请使用`identity`带有过滤器的函数：

```
(filter identity (map #{\a \e \i \o \u} (seq (char-array "Hello"))) 
```

# ios - 通过情节提要和 xcode 正确创建手动 segue

> ID：12518271
> 
> 赞同：18
> 
> 时间：2012-09-20T18:03:56.967
> 
> 标签：ios, xcode, storyboard

我对 xcode 很陌生，我正在尝试开发一个示例应用程序，它基本上是一个具有多个级别的嵌入式 tableview。我有一个 plist 存储每个 tableview 的单元格。如果单元格没有孩子，那么我希望能够在按下单元格后转到一个详细视图。最终，我希望能够根据数据类型转到不同的详细视图。为此，我从情节提要创建了一个详细视图，将视图控制器拖到我的详细视图以创建手动“Push”segue，并将 segue 标记为“segue1”。

**编辑：**[这里的](http://www.4shared.com/zip/ufktZ6kq/DrillDown2.html?)源代码

![构建手册 Segue](../Images/b2bec8514eedbb0fe551071b8ea24a52.png)

接下来，我填充了我认为它工作的必要函数，即调用`[self performSegueWithIdentifier:@"segue1" sender:myString];`myString 是我选择的单元格的标题。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Check the dictionary to see what cell was clicked
    NSDictionary *dict = [self.tableDataSource objectAtIndex:indexPath.row];
    NSString *myString = [dict objectForKey:@"Title"];
    NSDictionary *dictionary = [self.tableDataSource objectAtIndex:indexPath.row];

    NSArray *children = [dictionary objectForKey:@"Children"];

    //If there is no children, go to the detailed view
    if([children count] == 0)
    {
        [self performSegueWithIdentifier:@"segue1" sender:myString];

    }
    else{
        //Prepare to tableview.
        DrillDownViewController *rvController = [[DrillDownViewController alloc] initWithNibName:nil bundle:[NSBundle mainBundle]];

        //Increment the Current View
        rvController.CurrentLevel += 1;

        //Set the title;
        rvController.CurrentTitle = [dictionary objectForKey:@"Title"];

        //Push the new table view on the stack
        [self.navigationController pushViewController:rvController animated:YES];

        rvController.tableDataSource = children;

    }

} 
```

最后，我调用了 prepare for segue 来寻找标记为 segue1 的 segue。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"segue1"])
    {
        DrillDownDetailController *dvController = [[segue destinationViewController] visibleViewController];
        //DrillDownDetailController *dvController = [[DrillDownDetailController alloc] initWithNibName:nil bundle:[NSBundle mainBundle]];
        [dvController setItemName:(NSString *)sender];
        [self.navigationController pushViewController:dvController animated:YES];
    }
} 
```

我认为这会起作用，但由于某种原因，每当代码到达时`[self performSegueWithIdentifier:@"segue1" sender:myString];`，它就会因错误而中断

*****终止应用程序由于未捕获的异常'NSInvalidArgumentException'，原因： '接收器（）没有赛格瑞具有标识符'segue1'' ***第一掷调用堆栈：（0x14b4022 0xeb4cd6 0xdf61b 0x3590 0xa85c5 0xa87fa 0x93d85d 0x1488936 0x14883d7 0x13eb790 0x13ead84 0x13eac9b 0x139d7d8 0x139d88a 0x17626 0x23ed 0x2355 0x1）终止调用抛出异常（lldb）**

我不明白为什么它告诉我当它已经在故事板和代码中定义时它找不到 segue1。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T21:05:49.007

实际上有几个问题：

**首先**，在您为我们上传的那个项目中，segue 不*带有*“segue1”标识符：

![无标识符](../Images/e03c03fee57637b3df52781a699b07ec.png)

如果您还没有填写该标识符，则应填写该标识符。

**其次**，当您从表视图推送到表视图时，您正在调用`initWithNibName`创建视图控制器。你真的想用`instantiateViewControllerWithIdentifier`.

因此，这行说：

```
DrillDownViewController *rvController = [[DrillDownViewController alloc] initWithNibName:nil bundle:[NSBundle mainBundle]]; 
```

应该说：

```
DrillDownViewController *rvController = [self.storyboard instantiateViewControllerWithIdentifier:@"TableView"]; 
```

**第三**，你`prepareForSegue`是：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"segue1"])
    {
        dvController = [[segue destinationViewController] visibleViewController];
        [dvController setItemName:self->nameToSend];
    }
} 
```

并且应该简化以消除对 的引用`visibleViewController`，例如：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"segue1"])
    {
        dvController = segue.destinationViewController;
        dvController.itemName = nameToSend;
    }
} 
```

**第四**，你`DrillDownDetailController.m`有这个方法：

```
-(void) setItemName:(NSString *)itemName
{
    if(!itemName)
    {
        itemName = [[NSString alloc] initWithString:itemName];
    }
    label.text = itemName;
} 
```

这里有很多问题，但您根本不应该更新`label.text`这里（因为它可能尚未创建！）。您应该完全消除此自定义设置方法（只需让 Xcode 为您合成标准设置方法）并将您的更改`viewDidLoad`为如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    label.text = self.itemName;
} 
```

`viewDidLoad`确保在!之前不要更新 UI 对象。

我还没有完成整个程序，但是通过这四个更正，我可以点击“SubItem1”，然后是“Cars”，然后是“BMW”，我会看到一个显示“BMW”的详细信息屏幕。我认为您的 plist 在其他项目上存在一些问题（例如，鞋子条目是字符串，而不是字典条目，您会收到错误消息......我想您只是没有完全填写您的 plist），但上述修复纠正更重要的编码问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:41:50.713

主要问题在这里，您正在创建一个空白的 DrillDownViewController，而不是重用情节提要中的那个，请参阅下面代码中的注释

```
 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        if([[segue identifier] isEqualToString:@"segue1"])
        {
             [segue.destinationViewController setItemName:(NSString*)sender];
        }
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        //Check the dictionary to see what cell was clicked
       NSDictionary *dict = [self.tableDataSource objectAtIndex:indexPath.row];
NSString *titleName = [dict objectForKey:@"Title"];
NSDictionary *dictionary = [self.tableDataSource objectAtIndex:indexPath.row];

NSArray *children = [dictionary objectForKey:@"Children"];

if([children count] == 0)
{
    [self performSegueWithIdentifier:@"segue1" sender:titleName];

}
        else{
    //Prepare to tableview.

    //THE MAIN ISSUE IS HERE, you were creating a blank DrillDownViewController, not reusing the one from storyboards so it did not have a segue at all defined. instead do this:
    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                  bundle:nil];
    DrillDownViewController *rvController = [sb instantiateViewControllerWithIdentifier:@"DDVC"];       
    //Increment the Current View
    rvController.CurrentLevel += 1;

    //Set the title;
    rvController.CurrentTitle = [dictionary objectForKey:@"Title"];

    //Push the new table view on the stack
    [self.navigationController pushViewController:rvController animated:YES];

    rvController.tableDataSource = children;

}

    } 
```

# delphi - 断开连接时的 IdHTTP 访问冲突

> ID：12518273
> 
> 赞同：5
> 
> 时间：2012-09-20T18:04:01.990
> 
> 标签：delphi, authentication, indy, disconnect, idhttp

印地 10：

两个线程，线程 1 在 TIdHTTP 上调用 Get 并阻止读取数据。线程 2 将在同一个 TIdHTTP 上调用 disconnect 以中断 Get。

我在 TIdHTTP 上使用 Digest Authentication，我偶尔会得到一个 AV。

线程 1 的调用栈：

```
40491D [system.pas][System][@ClassDestroy][8989]
69EF2B [..\..\common\IdAuthenticationDigest.pas][IdAuthenticationDigest][TIdDigestAuthentication.Destroy][109]
404567 [system.pas][System][TObject.Free][8313]
6A2B69 [..\..\Common\IdHTTP.pas][IdHTTP][TIdCustomHTTP.DoOnDisconnected][1587]
534574 [IdTCPConnection.pas][IdTCPConnection][TIdTCPConnection.Disconnect][532]
534B3B [IdTCPConnection.pas][IdTCPConnection][TIdTCPConnection.Disconnect][767]
6A3FB3 [..\..\Common\IdHTTP.pas][IdHTTP][TIdCustomHTTP.DoRequest][2101] 
```

线程 2 的调用堆栈：

```
402BA3 [system.pas][System][@FreeMem][2477]
404521 [system.pas][System][TObject.FreeInstance][8294]
40491D [system.pas][System][@ClassDestroy][8989]
69EF2B [..\..\common\IdAuthenticationDigest.pas][IdAuthenticationDigest]        [TIdDigestAuthentication.Destroy][109]
404567 [system.pas][System][TObject.Free][8313]
6A2B69 [..\..\Common\IdHTTP.pas][IdHTTP][TIdCustomHTTP.DoOnDisconnected][1587]
534574 [IdTCPConnection.pas][IdTCPConnection][TIdTCPConnection.Disconnect][532]
534B3B [IdTCPConnection.pas][IdTCPConnection][TIdTCPConnection.Disconnect][767] 
```

基本上在 DoRequest 结束时它会断开连接。似乎在尝试释放 Request.Authentication 的断开连接上存在竞争条件。

下载了 Indy 10 的最新代码并查看了我认为行为应该相同的代码。

我相信从另一个线程调用断开连接是推荐的使用模式，我错了吗？这是印地的一个错误吗？似乎有必要锁定断开连接，但很难看到可能会产生什么死锁。还有其他人遇到这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:05:17.440

是的，您遇到的是一种竞争条件，`Request.Authentication`当套接字断开连接时，两个线程都试图释放同一个对象两次。给定堆栈跟踪，两个线程必须同时断开套接字，因为只有在仍然打开`Disconnect()`时才调用，并且在调用之前关闭。`DoOnDisconnect()``IOHandler``IOHandler``DoOnDisconnect()`

您可以尝试做的是使用该`OnStatus`事件进入状态中的临界区或互斥锁等线程安全锁`hsDisconnecting`，并将锁留在`hsDisconnected`状态中。 `IOHandler.Close()`并`DoOnDisconnect()`在这些状态之间被调用，这样可以有效地序列化你的线程，这样它们就不能再同时断开套接字并释放`Request.Authentication`对象了。

# .net - 如何在数据绑定组合框中选择新添加的项目？

> ID：12518274
> 
> 赞同：1
> 
> 时间：2012-09-20T18:04:01.637
> 
> 标签：.net, vb.net, winforms, data-binding, combobox

如果我将一个项目添加到数据绑定组合框（通过添加到数据库并刷新 TableAdapter），我该如何选择新添加的项目？

```
Private Sub button_Click(etc etc) etc
  Dim frm As New FormName()
  frm.ShowDialog()
  'On this form I add an entry to the database

  If frm.DialogResult = Windows.Forms.DialogResult.OK Then
    'Refill TableAdapter
    'Now I want to select the new item!
    Combo.SelectedText = frm.TextBox.Text  'doesn't work - what's the best way to do this?
  End If
End Sub 
```

它不仅仅是最后一个索引，因为组合框项目按字母顺序排序，它可能位于列表中的任何位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:10:13.810

您可以尝试使用此代码

```
ComboBox.Items.IndexOf(ComboBox.Items.Count - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:09:48.740

嗯，这是个建议。您可以做的是在将值添加到数据库之前，为该值添加一个变量。在回发时（我相信我们正在谈论 Web 应用程序），您确实在`IsPostBack`子句中设置了值。可能有更好的方法来实现这一点。但这是我的第一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:10:31.370

如果你将它添加到你的数据库然后重新绑定组合框，你不能在写的时候保存 ID，然后选择与 ID 值对应的项目吗？

# sql-server-2005 - 跨单向网关的 SQL Server 复制

> ID：12518276
> 
> 赞同：0
> 
> 时间：2012-09-20T18:04:11.563
> 
> 标签：sql-server-2005, transactional-replication, secure-gateway

我们希望在一个非常安全的 Process LAN 和一个不太安全的 Business LAN 之间通过一个单向网关复制一个 SQL Server 2005 数据库。有人知道吗：

1.  如果有一种方法可以让 SQL Server 在不与商业 LAN 上的目标 SQL Server/DB 握手的情况下执行复制？
2.  如果有第三方产品或软件库可用，这将有助于实现所需的功能？

源数据库和目标数据库都在 Windows Server 2003 或 2008 操作系统上。

任何替代解决方案或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:20:58.110

> 如果有一种方法可以让 SQL Server 在不与商业 LAN 上的目标 SQL Server/DB 握手的情况下执行复制？

SQLServer 本机复制不能通过硬件强制的单向通信通道使用，抱歉。本机 SQLServer 复制在网络堆栈的不同级别使用各种确认机制。

> 如果有第三方产品或软件库可用，这将有助于实现所需的功能？

Waterfall 和 Owl 都有硬件强制的单向产品，专注于将信息从 Process LANs 发送到 Business LANs。只有 Waterfall 有 SQLServer 复制产品。

> 源数据库和目标数据库都在 Windows Server 2003 或 2008 操作系统上。任何替代解决方案或建议将不胜感激。

Waterfall 解决方案可在两个操作系统上运行。

# javascript - Openx 2.8.10 本地图像/横幅目标网址不起作用

> ID：12518277
> 
> 赞同：0
> 
> 时间：2012-09-20T18:04:12.413
> 
> 标签：javascript, html, openx, banner-ads

我在我的 openx 上创建了一个类型为“banner Local”的横幅。

在我输入的目标网址中`http://www.delphifontes.com.br/?pagina=pparceiros.`

我自己网站中的一个简单页面，但是当我单击它时，它会带我：

```
http://www.delphifontes.com.br/openx/www/delivery/http%3A%2F%2Fwww.delphifontes.com.br%2F%3Fpagina%3Dpparceiros 
```

请问，我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:28:00.747

您应该检查位于 openx **/var**文件夹中的 openx 站点配置文件。该文件名为**yourdomain.conf.php**，因此您的文件应命名为**www.delphifontes.com.br.conf.php**

该文件包含几个部分，每个部分都以括号中的部分名称开头，即 [file]、[webpath]、... - 类似于旧的 Windows 3 ini 文件。

我假设，**[file]**部分缺少**点击**脚本的值，一行内容如下：

**点击="ck.php"**

结果，openx 的渲染引擎无法构建正确的 click-Urls。完整的“文件”部分通常应如下所示：

```
[file]
click="ck.php"
conversionvars="tv.php"
content="ac.php"
conversion="ti.php"
conversionjs="tjs.php"
flash="fl.js"
google="ag.php"
frame="afr.php"
image="ai.php"
js="ajs.php"
layer="al.php"
log="lg.php"
popup="apu.php"
view="avw.php"
xmlrpc="axmlrpc.php"
local="alocal.php"
frontcontroller="fc.php"
singlepagecall="spc.php"
spcjs="spcjs.php"
xmlrest="ax.php" 
```

# c# - 在 C# 中检索 AutoCAD 对象的属性

> ID：12518281
> 
> 赞同：4
> 
> 时间：2012-09-20T18:04:23.593
> 
> 标签：c#, autocad, autocad-plugin

我正在尝试从 C# 询问 AutoCAD 对象。我对能够获取给定对象的所有属性并输出它们很感兴趣。例如，在下面的代码片段中，我循环浏览屏幕上的所有项目，并仅反映它们的一流属性。我关心的对象通常具有一流的 AcadObject 属性，它似乎包含我所追求的数据。问题是这是一个 __ComObject 并且它的许多嵌套属性对象不通过反射提供属性。例如，obj.AcadObject.Connectors 似乎是一个连接器对象的集合，我对此非常感兴趣。我可以使用调试器反映到那个深度，但从那里我只能猜测 Connectors 集合的属性和它的对象（. 网络调试器确实显示了一个 Count 属性，它提示了我）。使用 C# 的动态关键字和 .Net 4 中内置的 DLR/COM 绑定器，我可以探测这些对象。例如，我可以使用动态表达式来抓取 obj.AcadObject.Connectors[0].Name，猜测它具有 name 属性。我愿意使用动态表达式来获取这些属性，但我首先需要知道这些属性是什么。我进行了很多研究，似乎缺少对这些对象外观的参考。还有一些其他的对象挂在 AcadObject 上，我想导出它们。我愿意使用动态表达式来获取这些属性，但我首先需要知道这些属性是什么。我进行了很多研究，似乎缺少对这些对象外观的参考。还有一些其他的对象挂在 AcadObject 上，我想导出它们。我愿意使用动态表达式来获取这些属性，但我首先需要知道这些属性是什么。我进行了很多研究，似乎缺少对这些对象外观的参考。还有一些其他的对象挂在 AcadObject 上，我想导出它们。

```
var currentDocument = Application.DocumentManager.MdiActiveDocument;
var editor = currentDocument.Editor;
var database = editor.Document.Database;

var result = editor.SelectAll();

using (var transaction = database.TransactionManager.StartTransaction())
{
    foreach (var id in result.Value.GetObjectIds())
    {

        var obj = transaction.GetObject(id, OpenMode.ForRead);

        var properties = TypeDescriptor.GetProperties(obj.AcadObject).Cast<PropertyDescriptor>().OrderBy(prop => prop.Name);

        writer.WriteLine("{0} ID:{1}", obj.GetType().Name, obj.Id);
        writer.WriteLine("\r\n\r\n");

        foreach (var property in properties)
        {
            var propertyObject = property.GetValue(obj.AcadObject);
            writer.WriteLine("  {0} = {1}", property.Name, propertyObject);
        }

        writer.Write("\r\n\r\n\r\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:44:32.660

如果要从数据库中获取所有项目，请使用它：

```
// Get all items from drawing Database. All ObjectIds will grouped by types;
Database db = Application.DocumentManager.MdiActiveDocument.Database;           
Dictionary<string, List<ObjectId>> dict = new Dictionary<string, List<ObjectId>>();
using (Transaction t = db.TransactionManager.StartTransaction()) {
    for (long i = db.BlockTableId.Handle.Value; i < db.Handseed.Value; i++) {
        ObjectId id = ObjectId.Null;
        Handle h = new Handle(i);
        if (db.TryGetObjectId(h, out id)) {
            string type = id.ObjectClass.Name;
            if (!dict.Keys.Contains(type))
                dict.Add(type, new List<ObjectId>());
            dict[type].Add(id);
        }
    }
    t.Commit();
} 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:38:19.113

在探索给定图形的数据库时，您可能会发现[**MgdDbg**](http://through-the-interface.typepad.com/through_the_interface/2010/02/the-stephen-and-fenton-show-adn-devcast-episode-1.html)实用程序特别有用...取决于您所追求的内容，以及您的 AutoCAD 版本，因为事件等是硬编码的，而不是动态的，正如 Tony[**在这里**](http://www.theswamp.org/index.php?topic=42938.msg481827#msg481827 "更多关于 MgdDbg")所说.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:29:13.337

这不是一个完美的答案，但我会把它放在这里，以便它可以帮助其他人。使用即时窗口，我将 obj.Acad 转换为动态，然后向下引用到有问题的对象，例如 Connectors[0]。那时我将它重铸成一个物体，并能够用手表检查它。示例代码，因为它将在立即窗口中运行，并在 obj 集之后带有调试中断：

```
dynamic acad = obj.AcadObject;
object connector0 = (object)acad.Connectors[0]; 
```

我能想到的最好的结果是 DLR 的 COM 绑定器正在为我整理内容，然后一旦我将其转换回 .Net 调试器就可以找出属性。我正在努力让这个发现与反射一起工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T20:40:39.417

您可以尝试使用此实用程序来获取有关您的 COM 对象的更多信息：http: [//www.codeproject.com/Articles/523417/Reflection-with-IDispatch-based-COM-objects](http://www.codeproject.com/Articles/523417/Reflection-with-IDispatch-based-COM-objects)

# php - Mysql 选择一组记录并更新它们

> ID：12518286
> 
> 赞同：0
> 
> 时间：2012-09-20T18:04:42.630
> 
> 标签：php, mysql

我想知道在查询中选择它们之后是否有任何方法可以更新一组记录。我的意思是我需要获取一组记录，并根据获取的集合，将“读取”字段更新为 1。

我可以在唯一的查询中进行还是需要单独进行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:06:42.850

您根本**不必**选择**它们**。如果您知道`WHERE`要选择什么，则可以使用相同的 WHERE 进行更新。

假设您将选择您的记录：

```
select foo, bar from foobar where foo like '%fo' 
```

然后你会像这样更新记录

```
update foobar set bar='new' where foo like '%fo' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:11:42.257

示例：根据需要更改 where 子句中的表名、条件。

```
update abc 
set read = 1
where a in (select p from pqr where p=q) 
```

根据您对问题的最新评论，您需要 2 个查询：

```
 $rs = mysql_query("select p from pqr where p=q"); 
```

将第二个查询放入循环中，遍历第一个查询的结果集

```
 foreach( $rs as $v)  
 mysql_query("update abc set read = 1 where a = $v"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:34:56.620

为什么你试图只使用一个查询？如果是一致性，请尝试使用带有事务的数据库，或者至少在发出两个查询之前锁定表。但最终，两个查询是可以的——它应该与单个查询具有相同的时间复杂度。不要害怕双重查询！:D

# javascript - javascript 中的 self() 属性

> ID：12518287
> 
> 赞同：2
> 
> 时间：2012-09-20T18:04:46.243
> 
> 标签：javascript

我知道在 Javascript 中，我可以调用函数 self.close() 来关闭当前窗口。我想知道如果不是关闭我想提醒“foo”的窗口，这可能吗？

在这种情况下，我的代码看起来像

```
 function funky(){
alert("foo");
} 
```

我可以在我的 html 中执行此操作吗

```
self.funky() 
```

调用时髦？换句话说，我想在用户关闭浏览器之前提醒他们一条消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:05:47.320

全局属性“self”只是`window`（在某些浏览器中）的别名。`window`因此，也可以通过“self”访问任何属性。

如果您声明一个全局函数，那么它也将成为 "self"/ 的一个属性`window`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:09:53.850

self 和 window 是同一个对象

```
 self === window  // true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:10:22.233

`self`除了它最初设置为 reference 之外没有什么特别之处`window`。同样，在全局上下文中`this`也指`window`. 在函数中，`this`将被定义为函数的上下文，并且`self`通常用于保存上下文：

```
function Foo() {
    var self;
    self = this;
    setTimeout(function () {
        self.bar(); //here `self` references the Foo instance
    }, 1000);
}
Foo.prototype = {
    bar: function () {
        self.console.log('bar!'); //here `self` references `window`
    }
}
new Foo(); 
```

# symfony - 学说 2 停止事件传播

> ID：12518293
> 
> 赞同：0
> 
> 时间：2012-09-20T18:05:10.907
> 
> 标签：symfony, doctrine-orm

我在 Symfony2/Doctrine2 中使用 postPersist/postUpdate/postRemove 事件。例如：

```
public function postPersist(LifecycleEventArgs $args){

} 
```

我的问题是：如何阻止事件进一步传播？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:30:38.013

好像你不能这样做。查看**UnitOfWork::executeInserts**方法和**EventManager::dispatchEvent**方法。没有休息，也没有尝试/抓住它。

你确定要这样做吗？这样做可能会损害您的项目。例如，FOSUserBundle 正在监听此事件以更新用户信息。强制传播停止可以破坏用户登录功能。

# sql-server-2008 - SQL Server 查询以从表中提取组合值

> ID：12518294
> 
> 赞同：0
> 
> 时间：2012-09-20T18:05:14.073
> 
> 标签：sql-server-2008

我有一个如下表T。

我想选择一个拥有其身份`Processed, InProgress`组合的客户。

请你帮忙，我该怎么做？

**桌子**

```
ClientId    ClientName  Status
1           A           Processed
1           A           Processed
2           b           InProgress
2           b           Processed
3           c           Processed
3           c           Processed
4           d           InProgress
4           d           Processed
5           e           InProgress
5           e           Processed 
```

**结果应该是**

```
ClientId    ClientName  Status
2           b           InProgress
2           b           Processed
4           d           InProgress
4           d           Processed
5           e           InProgress
5           e           Processed 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:11:02.247

你在找这个吗？

```
SELECT * FROM T 
WHERE 
    clientId IN 
    (
        SELECT T1.clientId 
        FROM 
            T t1 JOIN T t2 
            ON t1.clientId = t2.clientId 
        WHERE 
            (t1.status = 'Processed' AND t2.status = 'InProgress') OR 
            (t2.status = 'Processed' AND t1.status = 'InProgress')
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:14:28.017

如果我理解正确，我会这样做以获得结果

```
select ClientId, ClientName, Status From Table T
where Status IN ('Processed', 'InProgress') 
```

# r - R中的置信区间

> ID：12518298
> 
> 赞同：4
> 
> 时间：2012-09-20T18:05:27.423
> 
> 标签：r, linear-regression

我应该计算不同的置信区间，我发现在 R 中，我可以使用 predict-command 来做到这一点。但是我在理解我真正要做的事情方面遇到了问题。我应该计算 3 个不同的置信区间：1）回归线上的一个点 2）预测（未来）y 值 3）整个回归线。好的..到目前为止我所做的：

```
fm <- lm(alcohol~beers) 
```

因此，要获得整个回归线的置信区间，我会尝试：`predict(fm,data.frame(beers = newbeers), level = 0.9, interval = "confidence")` 但我真的不知道 data.frame 的作用。好的，我确实知道置信区间在 90% 的时间里保持实际值（这里是因为 0.9）。那么这是否意味着它在 90% 中拥有最佳回归线？除了一个点和一个预测值之外，我无法完全理解任何东西的含义。另外，我只知道这种计算方式，那么我如何以其他两种方式计算呢？另外，我得到的输出给出了间隔的几个上限和下限。这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T06:22:54.723

您`data.frame(beers = newbeers)`在`predict`函数中使用了，这意味着它是一个**预测区间**。请注意，这`newbeers`是一个由新数据而不是原始数据（用于拟合线性模型）组成的数据框。

对于置信区间，只需使用`confint`函数，它（默认情况下）为每个回归系数（在本例中为截距和斜率）提供 95% CI。

有关回归线上的一点，请在[此处](http://www.maths.otago.ac.nz/home/resources/stat110/2012_Overheads_etc/Lecture_36_-_Regression_Confidence_Intervals_-_DT.pdf)查看最后两张幻灯片。单个点的置信区间必须大于回归线的置信区间。

希望这可以帮助！

# php - 添加wordpress过滤器错误

> ID：12518302
> 
> 赞同：0
> 
> 时间：2012-09-20T18:05:37.437
> 
> 标签：php, wordpress

我在我的 function.php 文件中声明了这个过滤器：

```
<?php
add_filter('next_posts_link_attributes', 'posts_link_attributes');

function posts_link_attributes() {
    return 'class="styled-button"';
}
?> 
```

但把这个拿回来：

> 致命错误：无法重新声明 posts_link_attributes()（之前在 index.php 中的 functions.php 中声明）

因为我在 index.php 中使用 next_post_link()

有解决方案吗？这不起作用的原因是什么？

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:07:20.393

使回调更具体。

```
<?php
add_filter('next_posts_link_attributes', 'posts_link_attributes_style_button');

function posts_link_attributes_style_button() {
    return 'class="styled-button"';
}
?> 
```

测试函数是否存在：

```
if(function_exists('posts_link_attributes')){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:07:40.740

将您的函数名称更改为其他名称：

```
<?php
add_filter('next_posts_link_attributes', 'my_posts_link_attributes');

function my_posts_link_attributes() {
    return 'class="styled-button"';
}
?> 
```

# c++ - Autotools & Libtool - 如何从多个源目录编译共享库？

> ID：12518307
> 
> 赞同：1
> 
> 时间：2012-09-20T18:05:50.590
> 
> 标签：c++, autotools, automake, libtool, linkage

我正在尝试从 Autotools (Automake/Libtool) 构建一个库

我的目录结构是：

```
src/MyLib/*some_sources*.cpp/.h + a Makefile.am
src/MyLib/Parsers/*some_other_sources.cpp/.h Makefile.am 
```

当我将所有源文件放在同一目录中时（因此，没有“Parsers”子目录），一切正常。（编译，然后从其他程序链接）

但是当我尝试我的“理想结构”（基本源文件夹+“解析器”子目录）时，当我尝试使用库编译程序时出现链接错误：

```
<< usr/local/lib/mylib.so: undefined reference to <a function from "/Parsers" subdir > >> 
```

似乎 Libtool 在编译期间没有静态链接我的子目录“Parsers”（也许将其视为外部共享库？）

这是我的基础“Makefile.am”：

```
lib_LTLIBRARIES = mylib.la
SUBDIRS = Parsers .
mylib_la_SOURCES = <base_dir_source_files> 
```

还有我在 Parsers subdir 中的“Makefile.am”：

```
mylib_la_SOURCES = <parsers_dir_source_files> 
```

当然，在创建“Parser”子目录之后，我 libtoolize-d，autoreconf-ed allthing。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:30:05.097

在您的情况下，最简单的事情就是不要将`Makefile.am`文件添加到 Parsers 目录。相反，将源文件名添加到`MyLib/Makefile.am`前缀`$(srcdir)/Parsers/`（最好使用变量）。

像这样的东西：

```
src/
|
\--MyLib/
   |
   |--Makefile.am
   |--base.cpp
   |--base.h
   \--Parsers/
      |
      |--parser.cpp
      \--parser.h 
```

在 src/MyLib/Makefile.am 中：

```
PARSERS=$(srcdir)/Parsers
foo_SOURCES: base.cpp base.h \
    $(PARSERS)/parse.cpp $(PARSERS)/parse.h 
```

# c# - 防止 MEF 扩展使 Visual Studio 崩溃

> ID：12518319
> 
> 赞同：2
> 
> 时间：2012-09-20T18:06:27.353
> 
> 标签：c#, visual-studio, crash, mef

我已经使用 MEF 部署了 Visual Studio 语言服务。它现在在内部处于测试阶段，并且很容易时不时地崩溃。

我一直在努力保护代码免受崩溃，但有人告诉我除非我有办法确保 100% 稳定性，否则人们将停止使用它。

所以我问：**如果 MEF 扩展崩溃，有没有办法阻止它关闭 Visual Studio？**有人告诉我，它不可能使 VS 崩溃。我知道这有点遥不可及，但这是我必须要做的。我尽可能积极地编写代码，但是有很多人在底池中……奇怪的错误仍然存​​在，用户认为这是不可接受的。

# clojure - 只计算集合中的真实值

> ID：12518320
> 
> 赞同：8
> 
> 时间：2012-09-20T18:06:29.660
> 
> 标签：clojure

> **可能重复：**
> [如何仅返回真实值作为映射操作的结果](https://stackoverflow.com/questions/12518270/how-to-return-only-truthy-values-as-the-result-of-a-map-operation)

我有一个包含虚假和真实值的集合。我只想计算真实值，有没有办法做到这一点？

> (计数 (1 2 3 nil nil)) => 5

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T19:07:30.183

如果你想保持真实值只需要使用`identity`函数：

```
 (count (filter identity '(1 2 3 nil nil false true))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T00:38:24.023

我建议使用 reduce 执行此操作，如下所示：

```
(defn count-truthy [coll]
  (reduce (fn [cnt val] (if val (inc cnt) cnt)) 0 coll)) 
```

以这种方式使用reduce的原因：

*   它可能会更高效，并将受益于 Clojure 的新 reducers 功能，该功能可以在许多集合上实现事实归约
*   它避免了创建中间序列（如果您使用像过滤器这样的惰性序列函数会发生这种情况）

如果您已经有一个已实现的序列，那么以下也是一个不错的选择，因为它将受益于循环中的原始算术：

```
(defn count-truthy [coll]
  (loop [s (seq coll) cnt 0]
    (if s
      (recur (next s) (if (first s) (inc cnt) cnt))
      cnt))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T18:09:16.213

只需删除您不想计算的值。

```
(count (remove nil? [1 2 3 nil nil])) => 3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T19:28:47.950

```
(defn truthy-count [coll] 
   (reduce + 0 
     (map #(if % 1 0) coll))) 
```

虽然我承认我更喜欢 dAni 的解决方案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T20:10:47.480

一般模式是过滤序列并计算结果

```
(count (filter #(if % %) [1 2 3 nil nil false]))
3 
```

这`#(if % %)`只是对真实性的简短测试，仅当项目为真实或虚假（nil）时才返回项目

# opengl - OpenGL - 显示循环迭代的每个点

> ID：12518321
> 
> 赞同：1
> 
> 时间：2012-09-20T18:06:32.930
> 
> 标签：opengl, loops, while-loop

我目前正在绘制 3D 空间中的 lorenz 吸引子，并尝试在屏幕上绘制动画。我在我的显示函数中编写了以下 while 循环，认为它会按我的预期进行。

```
 int i;
    float x = 0, y = 1, z = 0;
    glBegin(GL_LINE_STRIP);

    while (i < initialIterations) {
        glColor3f(0,1,0);
        // compute a new point using the strange attractor equations
        float dx = sigma*(y-x);
        float dy = x*(r-z) - y;
        float dz = x*y - b*z;

        // save the new point
        x = x + dx*dt;
        y = y + dy*dt;
        z = z + dz*dt;        

        glVertex3f(x/50,y/50,z/50);
        i++;
    }

    glEnd(); 
```

但是它只是绘制了整个吸引子的图表，并没有显示每次迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:15:01.777

如果您的上下文是**双缓冲的**，那么将无法看到此动画，因为它会在屏幕外绘制所有内容，然后在调用 swapbuffers 后将图片翻转到屏幕上。

如果你想解决这个问题，而不是绘制整个吸引子，设置一个循环计数器，这样在第 0 帧，你只画点 0，在第 1 帧你画点 0 到 1，在第 2 帧你画点 0 到 2 ， ETC。

如果您的上下文是**单缓冲的**，您可以在绘制时看到它的动画，尽管它可能非常快以至于您永远无法看到它动画。它可能在大约一毫秒内完成绘制该循环。如果您希望动画对人眼可见，则需要在每个循环之间放置某种等待或睡眠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:54:16.050

试一试：

```
#include <GL/glut.h>
#include <vector>

struct Vertex
{
    Vertex( float x, float y, float z ) : x(x), y(y), z(z) {}
    float x;
    float y;
    float z;
};
std::vector< Vertex > verts;

void fillVerts()
{
    // calculate vertices
    // http://paulbourke.net/fractals/lorenz/
    int N = 10000;
    int i = 0;
    double x0, y0, z0, x1, y1, z1;
    double h = 0.01;
    double a = 10.0;
    double b = 28.0;
    double c = 8.0 / 3.0;

    x0 = 0.1;
    y0 = 0;
    z0 = 0;
    for( i = 0; i < N; i++ ) 
    {
        x1 = x0 + h * a * (y0 - x0);
        y1 = y0 + h * (x0 * (b - z0) - y0);
        z1 = z0 + h * (x0 * y0 - c * z0);
        x0 = x1;
        y0 = y1;
        z0 = z1;

        if( i > 100 )
        {
            verts.push_back( Vertex( x0, y0, z0 ) );
        }
    }
}

void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glTranslatef( 0, 0, -10 );

    // spin
    static float angle = 0;
    angle += 0.1;
    glRotatef( angle, 1, 1, 1 );

    // resize
    float s = 1 / 10.0f;
    glScalef(s,s,s);

    // animate index
    static size_t curIdx = 0;
    curIdx += 2;
    if( curIdx >= verts.size() )
        curIdx = 0;

    // draw curve
    glEnableClientState( GL_VERTEX_ARRAY );
    glVertexPointer( 3, GL_FLOAT, 0, &verts[0] );
    glDrawArrays( GL_LINE_STRIP, 0, curIdx );
    glDisableClientState( GL_VERTEX_ARRAY );

    glutSwapBuffers();
}

void reshape(int w, int h)
{
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective( 60, (double)w / (double)h, 1.0, 10000.0 );
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);

    glutInitWindowSize(800,600);
    glutCreateWindow("Attractor");

    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutTimerFunc(0, timer, 0);

    fillVerts();
    glutMainLoop();
    return 0;
} 
```

它用于`glutTimerFunc()`每隔 16 毫秒左右戳一下显示函数，此时它会绘制接下来的两个 Lorenz 顶点。

# asp.net - 控制标记应该出现在渲染页面上的什么位置？

> ID：12518322
> 
> 赞同：0
> 
> 时间：2012-09-20T18:06:34.547
> 
> 标签：asp.net, custom-controls, page-lifecycle, extending

我正在构建一个扩展器控件。此控件源自普通控件。它的目的是在指定的目标控件之前/之后注入一些文本。我想这类似于 AJAX 日历扩展器的工作方式。所以它具有诸如`TargetControlID`等之类的属性。

我不确定要连接目标控件的哪个事件，以便我可以在控件呈现之前/之后插入我的评论。

以图形方式表示我要完成的工作：

![在此处输入图像描述](../Images/af1ca2a96bdaea170759319ee754279c.png)

我只想在出现绿色破折号的地方发表评论。反正我可以控制...？

到目前为止我尝试过的源代码......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Text;
using System.IO;

namespace DropDownSubstitute
{
    /// <summary>
    /// 
    /// </summary>
    public class DropDownListExtender : Control
    {
        public string TargetControlID { get; set; }
        System.Web.UI.WebControls.DropDownList _ddl;
        protected override void OnInit(EventArgs e)
        {
            _ddl = this.Page.FindControl(this.TargetControlID) as DropDownList;
            if(_ddl == null) 
                throw new InvalidOperationException("TargetControlID for DropDownListExtender must be a valid ASP.NET DropDownList control");
            _ddl.PreRender += new EventHandler(RenderDropDown);

        }

        void RenderDropDown(object sender, EventArgs e)
        {
                //Desperately wanting to put a comment before the DropDownList renders
                // to the response 
        }

    }

} 
```

# xslt - 在coldfusion中解析XML

> ID：12518323
> 
> 赞同：0
> 
> 时间：2012-09-20T18:06:40.300
> 
> 标签：xslt, coldfusion, xml-parsing

我有一个来自第三方的传入 XML 包 - 他们提供了一个 XSL 来转换包的“部分”......

我需要使用 CF(10) 从包中“提取”节点（带子节点）

包看起来像这样（减小了大小 - btu 可以在主数据节点内包含多个“数据”节点......幸运的是，主数据节点有一个已知字符串的 ID（本例中为“X_STUFF”） - 所以我特别想抓住那个带有孩子的节点......

```
<trip>
<eventTS>2012-09-19T14:54:42.0Z</eventTS>   
<eventX>0</eventX>
<eventY>10</eventY>
<eventType>driverRouteRequest</eventType>
<data id="X_STUFF">
    <datum name="A" value="..."/>
    <datum name="B" value="..."/>
    <data id="...">
        <datum name="a" value="0"/>
        <datum name="b" value="0"/>
        <datum name="c" value=""/>
    </data>
</data>
</trip> 
```

如果我尝试转换整个包，我会从第一个节点 - “trip”节点 - 或任何没有属性的节点 - 我对 XSL 不太了解 - 但它会收到一个“零长度”字符串错误对我来说似乎是这样-我将在此处包含 XSL 仅供参考-显然，可以通过重写 XSL 以容纳不是“数据”节点的节点来解决“问题”（我没有命名它们数据/数据，对不起，如果这让事情变得混乱）..或者我可以拉出带有孩子的“主要数据”节点......正如我上面提出的那样（这会更简单，并且从我的角度来看更“可维护” - 至少直到我可以了解有关 XSL 的更多信息）

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<xsl:template match="//*">
    <xsl:comment>Translated with datum-to-elements v1.0</xsl:comment>
    <xsl:element name="returnMessage">
        <xsl:call-template name="processChildren">
        </xsl:call-template>
    </xsl:element>
</xsl:template>

<xsl:template name="processChildren">
    <xsl:param name="branch"/>
    <xsl:variable name="AValue" select="./datum[@name='A']/@value" />
    <xsl:variable name="aValue" select="./datum[@name='a']/@value" />

    <xsl:variable name="newElementName">
        <xsl:choose>
            <xsl:when test="string-length($AValue) > 0">
                <xsl:value-of select="$AValue"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$aValue"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="skipAttributeName">
        <xsl:choose>
            <xsl:when test="string-length($AValue) > 0">
                <xsl:text>A</xsl:text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:text>a</xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:element name="{$newElementName}">
        <xsl:for-each select="child::*">
            <xsl:choose>
                <xsl:when test="count(child::*) > 0 ">
                    <xsl:call-template name="processChildren">
                        <xsl:with-param name="branch" select="child::*"/>
                    </xsl:call-template>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:if test="@name != $skipAttributeName">
                        <xsl:element name="{@name}">
                            <xsl:choose>
                                <xsl:when test="@value = 'y' or @value = 'Y'">true</xsl:when>
                                <xsl:when test="@value = 'n' or @value = 'N'">false</xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="@value"/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:element>
                    </xsl:if>
                </xsl:otherwise>
            </xsl:choose>

        </xsl:for-each>
    </xsl:element>

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:05:50.860

```
<cfscript> 

myxmldoc = XmlParse("C:/ColdFusion10/cfusion/wwwroot/test.xml"); 

myContent = XmlSearch(myxmldoc, "//*[@id='X_STUFF']"); 

writeDump(myContent);

</cfscript> 
```

xPath 字符串也归功于@Miguel-F

# ios - 在 iOS6 中处理手势识别器

> ID：12518328
> 
> 赞同：14
> 
> 时间：2012-09-20T18:06:57.490
> 
> 标签：ios, ios6, uigesturerecognizer

`UIButton`显然，当您在同一个地方有一个手势识别器和一个被激活的相同手势时，iOS 6 会尝试自动处理这种情况。

当您想要单击按钮而不是激活手势识别器时，这种新的自动处理解决了该问题，但是当您希望手势识别器起作用时**会产生一个新问题。**

在 iOS 5 中，您可以实现：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
```

将动作转移到`UIButton`发生冲突时。

这似乎在 iOS 6 中不起作用。此外，反转此方法的行为（因为现在`UIButton`具有优先级而不是手势识别器）将不起作用。

* * *

完整方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if ([touch.view isKindOfClass:[UIControl class]]){
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:40:41.680

我这样做是为了解决这个问题，根据您的需要进行更改：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
      [self MyCommonSelector];// this will work for ios 5
      return Yes;
 } 
```

在您声明的按钮中添加目标，以便在 iOS 6 中调用：

```
[self.myButton addTarget:self action:@selector(MyCommonSelector)
  forControlEvents:UIControlEventTouchUpInside]; 
```

在这个方法中做你的事情，这也将在按钮点击和你需要调用的手势中被调用：

```
-(void)MyCommonSelector
 {
    //Do your stuff here what you want to do with Gesture too.
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:27:26.767

虽然我不知道如果您不希望 UIButtons 被点击，为什么要将它们放在那里，但您可以通过覆盖`-hitTest:withEvent:`包含视图的方法来防止子视图接收触摸。

`-hitTest:withEvent:`默认情况下返回*“包含指定点的视图层次结构（包括其自身）中接收器的最远后代”*，因此默认情况下，当点击其中一个按钮时，您的包含视图将返回该按钮。

您的实现应如下所示：

```
- (UIView *)hitTest:(CGPoint)aPoint withEvent:(UIEvent *)event {
    if ([self pointInside:aPoint]) {
        return self;
    } else {
        return nil;
    }
} 
```

因此，如果正在调用的容器视图包含触摸点，它会返回自身，并且附加到它的手势识别器将获得触摸。

因为这个实现从不返回任何子视图，所以没有一个 UIButton 有机会响应触摸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:39:14.017

我知道这看起来很简单，但是您是否考虑过将 UIButton 的 userInteractionEnabled 属性设置为“NO”？这应该会自动将其从命中测试和手势识别系统中删除。

# delphi - 如何在 Delphi XE 中制作 activeX dll 并将其添加到 Excel VBA 项目中，就像参考一样

> ID：12518336
> 
> 赞同：1
> 
> 时间：2012-09-20T18:07:08.817
> 
> 标签：delphi, excel, activex, vba

我有个问题。如何在 Delphi XE 中制作 activeX dll 并将其添加到 Excel VBA 项目中作为参考。

我制作了通常的activeX库（文件->新的->其他->activeX->activeX库）。在里面写了几个函数和程序。并建造。所以我有“SomeActiveXLibrary.dll”

现在我想在excel的vba项目中使用我的dll。在 vba IDE 中，我按下 tools->references->browse->"SomeActiveXLibrary.dll" 并看到“无法添加对指定文件的引用”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:59:37.870

正如 Ken White 所说，您只完成了制作可行的 ActiveX DLL 所需的一半。您创建了 DLL 本身，但没有在其中放入 ActiveX 对象。使用“文件 > 新建 > 其他 > ActiveX > ActiveX 库”后，您需要使用“文件 > 新建 > 其他 > ActiveX > COM 对象”将 ActiveX/COM 对象添加到库中。然后，您可以根据需要使用自定义函数充实生成的 TypeLibrary 和实现类，编译 DLL 并注册它。那么VB/VBA应该就可以使用了。

# forms - Spring Form Tag：表单标签如何将值绑定到您的 DTO？

> ID：12518341
> 
> 赞同：1
> 
> 时间：2012-09-20T18:07:21.270
> 
> 标签：forms, spring, dto, taglib, inject

样品形式：

```
<form:form commandName="loginDTO" action="/login">
<form:input path="username"/>
<form:input path="password"/>
</form:form> 
```

样品控制器

```
@RequestMapping(value = "/login")
public String loginUser(LoginDTO loginDTO, BindingResult bindingResult, Model uiModel){
    //some code
} 
```

我想知道Spring是如何自动注入到指定的LoginDTO的。Spring 是否访问 setter 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:27:45.023

默认情况下，Spring 使用 setter 方法进行数据绑定，但您可以将其配置为使用直接字段访问，方法是`DataBinder.initDirectFieldAccess()`在配置 a 时调用`DataBinder`：

```
@InitBinder
public void configureBinder(WebDataBinder binder) {
    binder.initDirectFieldAccess();
} 
```

# php - Azure 如何覆盖 php 应用程序中的 MySQL 连接字符串？

> ID：12518342
> 
> 赞同：4
> 
> 时间：2012-09-20T18:07:23.237
> 
> 标签：php, mysql, wordpress, azure, azure-sql-database

我知道 Azure 使用一些运行时魔法来覆盖我的 .NET 应用程序的连接字符串。但是，我正在尝试通过 wordpress 博客进行移植，并且连接信息似乎存储在一个名为 wp-config.php 的文件中。如果我将博客的正确值输入到该文件中，那么一切正常，但我想从公共 github 存储库进行部署。如何从 wp-config.php 中排除连接信息并允许 azure 在运行时覆盖它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:08:25.830

除非您的存储库是私有的，否则您需要将 wp-config.php 文件存储在您的 Windows Azure 实例上（或者在事后以某种方式上传）。然后，当文件从 Github 拉入该目录时，wp-config.php（假设 repo 中没有 wp-config.php 文件）文件将已经存在，其中包含连接详细信息。

如果您有一个私有的 Github 存储库，那么将 wp-config.php 文件和值保留在存储库本身中可能是安全的，因为只有您授予该存储库访问权限的用户才能看到它。

# android - requestlayout，使行为无效

> ID：12518343
> 
> 赞同：0
> 
> 时间：2012-09-20T18:07:30.787
> 
> 标签：android, android-layout, user-interface, paint

在以编程方式更改某些 TextView 的 Paint 对象的字体后，使更改在屏幕上可见的正确方法是什么？

```
@Override
protected void onResume()
{
    super.onResume();
    mMainController.grads(mLytHowToPlay, true, FaceTypes.FACEIT, GradTypes.NONE, 8);
    mLytHowToPlay.requestLayout();
        mLytHowToPlay.invalidate();
} 
```

上面的 grads() 方法调用是递归处理 mLytHowToPlay 的孩子并对其 Paint 对象进行更改的方法。我还尝试了 onCreate() 和 onStart() 中的这个序列，效果相同 - 直到 Activity 被导航离开然后再次导航回，更改才可见。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:53:26.133

在您的 onCreate() 方法结束时，创建一个如下所示的线程。

```
Handler mHandler = new Handler();
mHandler.postDelayed(new Runnable() {
    public void run() {
        mMainController.grads(mLytHowToPlay, true, FaceTypes.FACEIT, GradTypes.NONE, 8);
        mLytHowToPlay.requestLayout();
        mLytHowToPlay.invalidate();

    }
},2000); 
```

这将在创建应用程序后等待 2 秒，然后运行您的进程。您应该能够根据需要调整时间并降低或提高时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:21:23.230

[在这里](https://stackoverflow.com/questions/10302803/android-which-method-gets-called-the-moment-the-activity-is-fully-layed-out-an)查看西蒙的回答和我的评论。我一直在寻找的实际上是在布局过程完成后触发的回调。

# java - 尝试在指定时间后更改活动后出错 - “不幸的是，应用程序已停止”

> ID：12518344
> 
> 赞同：1
> 
> 时间：2012-09-20T18:07:34.287
> 
> 标签：java, android, android-intent, android-activity

我在 android 编程方面完全是绿色的。我只是想做一个“启动”屏幕，几秒钟后会变成主要活动。那是我用过的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView txt = (TextView) findViewById(R.id.diavlo_font);  
    Typeface font = Typeface.createFromAsset(getAssets(), "DiavloBlack-Regular.ttf");  
    txt.setTypeface(font);  

    final Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
      public void run() {
        //Do something after time
          Intent intent = new Intent(MainActivity.this, SecondActivity.class);

        startActivity(intent);
      }
    }, 5000);

} 
```

我很确定，问题出在我试图调用另一个活动时。事实上，我只是在“按下按钮后”使用它，但现在我无法让它运行：/对不起，也许这是愚蠢而容易的事情，但我已经尝试解决这个问题几天了，不幸的是我发现没有什么。将非常感谢任何提示如何解决它。PS对不起我的英语:)

编辑：很抱歉没有添加日志，希望它们是正确的。

```
09-20 17:49:10.740: E/AndroidRuntime(715): FATAL EXCEPTION: main
09-20 17:49:10.740: E/AndroidRuntime(715): java.lang.RuntimeException: Unable to start        activity ComponentInfo{com.example.czolgi.ii.ws/com.example.czolgi.ii.ws.SecondActivity}: java.lang.NullPointerException
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.os.Looper.loop(Looper.java:137)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-20 17:49:10.740: E/AndroidRuntime(715):  at java.lang.reflect.Method.invokeNative(Native Method)
09-20 17:49:10.740: E/AndroidRuntime(715):  at java.lang.reflect.Method.invoke(Method.java:511)
09-20 17:49:10.740: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-20 17:49:10.740: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-20 17:49:10.740: E/AndroidRuntime(715):  at dalvik.system.NativeStart.main(Native Method)
09-20 17:49:10.740: E/AndroidRuntime(715): Caused by: java.lang.NullPointerException
09-20 17:49:10.740: E/AndroidRuntime(715):  at com.example.czolgi.ii.ws.SecondActivity.onCreate(SecondActivity.java:15)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.Activity.performCreate(Activity.java:5008)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-20 17:49:10.740: E/AndroidRuntime(715):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-20 17:49:10.740: E/AndroidRuntime(715):  ... 11 more 
```

添加第二个活动：

```
package com.example.czolgi.ii.ws;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class SecondActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_second, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

**解决方案：**

所以这个问题的解决方法就是在getActionBar().setDisplayHomeAsUpEnabled(true);之前加上// 或者干脆抹去它。第二个活动不起作用，因为我尝试使用设置“@android:style/Theme.NoTitleBar.Fullscreen”显示操作栏。所以我只需要删除那些行或将样式更改为不全屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:41:30.057

您的错误在以下行：

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

我的猜测是您正在尝试在不存在[ActionBar的 Android 版本上运行您的应用程序，即低于 API 11。](http://developer.android.com/reference/android/app/ActionBar.html)

在尝试 getActionBar() 之前，您还可以尝试将以下内容添加到您的 onCreate() 中：

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR); 
```

如果它仍然不起作用，则您的应用程序使用的主题中没有 ActionBar。这里有一篇关于如何识别和解决这个问题的巨大博[文](http://blog.perpetumdesign.com/2011/08/strange-case-of-dr-action-and-mr-bar.html)。

[如果您想在 Honeycomb (API 11) 以下的应用程序中使用ActionBar](http://actionbarsherlock.com/)，那么您应该考虑使用可以提供此功能的 ActionBarSherlock。

# ruby-on-rails - 将引导程序的 CSS 导入现有站点

> ID：12518347
> 
> 赞同：0
> 
> 时间：2012-09-20T18:07:39.233
> 
> 标签：ruby-on-rails, twitter-bootstrap, sprockets

我在将 Bootstrap 导入现有站点时遇到问题。我执行以下操作：

在 Gemfile 中（已经有：）`gem 'sass-rails', '~> 3.2.3'`：添加

```
 gem 'bootstrap-sass', '~> 2.1.0.0' 
```

在cli：

```
bundle install 
```

在 application.css 添加到顶部：

```
@import "bootstrap"; 
```

在 application.js 中（这部分工作正常），添加

```
//= require jquery
//= require bootstrap 
```

重启 Webrick

在布局中，所有的 javascript 都在那里（编译发生在 development.log 中）；没有任何CSS。

我究竟做错了什么？或者我接下来应该看什么？我应该看到引导文件 /app/assets/stylesheets 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:35:50.190

确保添加**config.rb**：

```
require 'bootstrap-sass'
compass install bootstrap 
```

来源：[https ://github.com/thomas-mcdonald/bootstrap-sass#existing-project](https://github.com/thomas-mcdonald/bootstrap-sass#existing-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:55:03.460

application.css 必须是 application.css.scss

# c++ - 如何在作为地图键的向量的 2 个数组中搜索公共元素？

> ID：12518349
> 
> 赞同：0
> 
> 时间：2012-09-20T18:07:42.707
> 
> 标签：c++, map, vector, c++11

我有一张地图，它以`vector<int>`大小为 3 的 a 作为键，以一个字符串作为值。该映射包含大约 2000 个从文件中解析的条目。我需要检查向量 1 中的每个元素是否存在于向量 2 中。

```
int index;
map<vector<int>,string>::iterator i2;

for ( i2=my_map.begin() ; i2 != my_map.end(); i2++)
{
    int id_cnt = (*i2).first.at(0);
    int prev_cnt = (*i2).first.at(1);

    for (index=0; index < my_map.size(); index++)
    {
        if (prev_cnt==id_cnt[index])                     //error
        {
            //code to do something
        }
    }

    cout << "hi" <<endl;
    cout << (*i2).second << endl;
} 
```

我得到的错误是：

> “下标值不是数组、指针或向量。

一周以来我一直在研究 C++，但我什么都不懂！:(

编辑：

我有 4 列：

```
4 6 65 gdsg
6 1 64 sggg
1 2 34 wetw
7 4 25 wtwt
8 5 25 heyq
5 7 23 fheh
2 5 12 fetd 
```

我必须检查第 1 列中的每个数字是否存在于第 2 列中。因此，对于第 1 列的第一个元素：第 2 列中存在 4。现在我取相应的第 3 列编号 (25) 并放置它在第 20 个元素下的 26 个字母的向量中。20th 因为我需要获取相应字符串的最后一个字符（wtwt）。T 是第 20 个字母。

我必须对第 1 列中的元素执行此过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:52:35.910

根据您的编辑，我建议您将数据结构更改为以下内容：

```
struct Entry {
  int next;
  int index;
  string text;
};

typedef map<int, Entry> MyMap;

for(MyMap::iterator i = my_map.begin(); i < my_map.end(); ++i) {
  MyMap::iterator next = my_map.find(i->second.next);
  if(next == my_map.end()) {
    // not found!
    break;
  }
} 
```

您的第一列进入下一个，您的第三列进入索引。第二列是地图键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:15:16.967

建议您在定义地图时也传递比较功能。

请看地图的定义

[http://www.cplusplus.com/reference/stl/map/map/](http://www.cplusplus.com/reference/stl/map/map/)

# bash - 使用 expect 来生成带有包含空格的参数的命令

> ID：12518354
> 
> 赞同：15
> 
> 时间：2012-09-20T18:08:05.260
> 
> 标签：bash, automation, automated-tests, expect

我想用来通过 ssh`expect`运行一个简单的命令。`cat /tmp/id_rsa.pub`

在 shell 中，我可以运行这个问题，（手动输入密码）

```
ssh root@localhost 'cat /tmp/id_rsa.pub' 
```

我想用`expect`. 我的`expect`剧本是

```
#!/usr/bin/expect
eval spawn ssh root@localhost 'cat /tmp/id_rsa.pub'
expect "password:"
send "123456"
expect eof 
```

它抛出错误`bash: cat /tmp/id_rsa.pub: no such file or directory`。我觉得很奇怪。可能的原因是什么？

编辑：经过一些测试，我发现这很常见，不仅在`cat`. 如果 spawned 命令的参数带有空格（即使它在引号中），它也会有问题。例如，用`cat /tmp/id_rsa.pub`空格替换其他命令，如

```
eval spawn ssh root@localhost 'which java' 
```

它抱怨`bash: which java: command not found`。但是，如果将其替换为`pwd`，例如

```
eval spawn ssh root@localhost 'pwd' 
```

它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-16T12:02:44.067

与 sh 和其他兼容的 shell 不同，单引号 ( `'`) 对 Expect 没有特殊含义。
这意味着你的陈述

```
spawn ssh root@localhost 'cat /tmp/id_rsa.pub' 
```

被解析成以下单词：

*   `spawn`
*   `ssh`
*   `root@localhost`
*   `'cat`- 直到另一个单引号。
*   `/tmp/id_rsa.pub'`

sh 中的用法是将其分组为单个参数。在 Tcl 中，您可以使用双引号 ( `"`) 或大括号 ( `{}`)。在双引号内，Tcl 变量将被替换，而里面的内容`{}`被传递而没有任何替换¹。

**tl;dr** sh 的 Expect/Tcl 等价物`'`是`{}`.

^(^(换行前的1) A`\`仍将被替换。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T10:33:19.857

正如约翰内斯所说，使用`'`是行不通的。
我遇到了类似的问题，但我想执行更多命令，然后仍然获得登录 shell。我设法使它与`"`：

```
expect -c "
   set timeout 5;
   spawn ssh -XY $user@$host -t \"cat /etc/motd; bash -l\"
   expect {
      -re \"^Warning.*\" {exp_continue}
      -re \"^.*sword: \" {send \"${PASSWORDS[$user]}\r\"; interact}
   }
" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:14:55.757

我想你不需要`eval`那里。删除它并检查。

检查此[期望示例链接](http://en.wikipedia.org/wiki/Expect#Examples)以获取有关“如何使用`expect`？”的详细示例 .

希望这可以帮助。

# filesystems - 大小与磁盘大小

> ID：12518355
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:08:07.510
> 
> 标签：filesystems, size, filesize, disk, diskspace

我读过字节与集群理论，但我认为它不适用于我的情况； ![wtf](../Images/4fb6049953d1494f03b9fc65d9e0aca1.png)

* * *

似乎与“一堆小文件”无关；
![在此处输入图像描述](../Images/ee6a4bf844696b85b27d6c8d84ed2ded.png)

```
.
├── [ 11K]  2ndVisit_Checklist.xlsx
├── [ 35K]  2ndVisit FTS_Timetable.xlsx
├── [ 34K]  2ndVisit_Roomlist.pdf
├── [ 27K]  2ndVisit_Teilnehmer.xlsx
├── [9.5K]  Belgian Pupils for European Parliament.xlsx
├── [4.0K]  Brussel EU
│   ├── [ 64K]  Checkliste.doc
│   ├── [144K]  Plan A73.doc
│   ├── [ 38K]  TN Liste EP.docx
│   └── [108K]  TN Liste EP V02.doc
├── [ 12K]  Financial overview second visit.xlsx
├── [ 43K]  getting to know each other.doc
├── [ 62K]  Hotel_confirmation_dinner.pdf
├── [204K]  Letter_Parents_Agreement.docx
├── [239K]  Letter_Parents_Costs.docx
├── [ 17K]  Ouders regeling.docx
├── [ 12K]  Pictures
│   ├── [5.7M]  DSC_0007.JPG
│   ├── [7.3M]  DSC_0015.JPG
│   ├── [8.0M]  DSC_0017.JPG
│   ├── [8.5M]  DSC_0040.JPG
│   ├── [5.8M]  DSC_0041.JPG
│   ├── [5.2M]  DSC_0042.JPG
│   ├── [5.4M]  DSC_0046.JPG
│   ├── [6.2M]  DSC_0066.JPG
│   ├── [5.9M]  DSC_0074.JPG
│   ├── [8.2M]  DSC_0077.JPG
│   ├── [6.1M]  DSC_0080.JPG
│   ├── [8.7M]  DSC_0083.JPG
│   ├── [8.8M]  DSC_0086.JPG
│   ├── [8.5M]  DSC_0087.JPG
│   ├── [7.3M]  DSC_0094.JPG
│   ├── [4.6M]  DSC_0102.JPG
│   ├── [7.5M]  DSC_0120.JPG
│   ├── [7.8M]  DSC_0121.JPG
│   ├── [8.3M]  DSC_0123.JPG
│   ├── [7.6M]  DSC_0125.JPG
│   ├── [5.7M]  DSC_0130.JPG
│   ├── [8.5M]  DSC_0138.JPG
│   ├── [6.6M]  DSC_0164.JPG
│   ├── [7.2M]  DSC_0165.JPG
│   ├── [6.5M]  DSC_0169.JPG
│   ├── [6.9M]  DSC_0174.JPG
│   ├── [8.5M]  DSC_0196.JPG
│   ├── [7.0M]  DSC_0200.JPG
│   ├── [7.8M]  DSC_0214.JPG
│   ├── [8.5M]  DSC_0245.JPG
│   ├── [8.2M]  DSC_0258.JPG
│   ├── [8.2M]  DSC_0264.JPG
│   ├── [7.8M]  DSC_0270.JPG
│   ├── [7.9M]  DSC_0271.JPG
│   ├── [7.3M]  DSC_0273.JPG
│   ├── [5.9M]  DSC_0287.JPG
│   ├── [7.8M]  DSC_0293.JPG
│   ├── [7.9M]  DSC_0298.JPG
│   ├── [8.0M]  DSC_0299.JPG
│   ├── [7.5M]  DSC_0300.JPG
│   ├── [7.9M]  DSC_0304.JPG
│   ├── [6.1M]  DSC_0322.JPG
│   ├── [6.7M]  DSC_0330.JPG
│   ├── [7.1M]  DSC_0333.JPG
│   ├── [7.9M]  DSC_0338.JPG
│   ├── [7.2M]  DSC_0343.JPG
│   ├── [7.0M]  DSC_0348.JPG
│   ├── [6.5M]  DSC_0350.JPG
│   ├── [7.5M]  DSC_0359.JPG
│   ├── [7.2M]  DSC_0370.JPG
│   ├── [7.7M]  DSC_0399.JPG
│   ├── [8.4M]  DSC_0404.JPG
│   ├── [8.4M]  DSC_0409.JPG
│   ├── [8.5M]  DSC_0417.JPG
│   ├── [7.8M]  DSC_0424.JPG
│   ├── [8.0M]  DSC_0426.JPG
│   ├── [6.3M]  DSC_0429.JPG
│   ├── [7.6M]  DSC_0435.JPG
│   ├── [6.0M]  DSC_0443.JPG
│   ├── [6.7M]  DSC_0450.JPG
│   ├── [7.5M]  DSC_0453.JPG
│   ├── [6.9M]  DSC_0465.JPG
│   ├── [6.2M]  DSC_0475.JPG
│   ├── [7.6M]  DSC_0479.JPG
│   └── [6.2M]  DSC_0487.JPG
├── [ 80K]  Presentation First day.pptx
├── [ 12K]  price calculation activities 2nd visit.xlsx
├── [9.6K]  Prices in Turnhout.xlsx
├── [9.9K]  Regular lessons during visit for SO Zenit pupils.xlsx
└── [ 24K]  rules and stuff.doc

2 directories, 85 files 
```

* * *

有问题的目录是一个 NTFS 文件系统，带有来自 EXT4 文件系统的符号链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:22:42.117

我不确定为什么 byte vs cluster 在这里不适用。

文件的总大小表示实际文件的大小（以字节为单位）。当文件存储在磁盘上时，它们通常会占用更多空间，因为它们会用完完整的集群，即使文件要小得多。

基于这是一个 SVN 目录，通常包含大量非常小的文件，这可以解释为什么磁盘上的大小要大得多。我的文件中只有 10 个字节，根据您的集群大小，它可能需要 2KB 的磁盘空间。

群集大小取决于文件系统和硬盘驱动器的大小。

# javascript - 可以进行不返回的 AJAX 调用吗？

> ID：12518363
> 
> 赞同：8
> 
> 时间：2012-09-20T18:08:51.823
> 
> 标签：javascript, jquery, ajax

是否可以在没有任何响应的情况下发送 jQuery.ajax 调用或等效调用？当我使用 onbeforeunload 命令离开页面时，我想在服务器上触发一些东西，但这不是我需要反馈给客户端的东西，所以我只想发送命令而不等待响应。

那可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T18:11:40.073

**每个请求都有响应。** 即使服务器抛出错误，也会返回带有错误的响应。

如果您不想添加`success`回调，则可以忽略响应。

```
$.ajax({
    url: "theURL",
    data: theData
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-29T23:23:37.517

[您可以使用此堆栈溢出答案](https://stackoverflow.com/a/56682830/3281032)中引用或直接链接到[此处](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon#Return_values)的导航器 sendBeacon API 。

根据网站上的描述，它异步发送一些数据，并检查它是否能够将数据排队等待发送。卸载处理程序不应像处理其他异步 XMLHttpRequest 那样忽略该请求。

> navigator.sendBeacon(url, data) - 如果用户代理能够成功地将数据排队等待传输，则 sendBeacon() 方法返回 true，否则返回 false。

...

> 确保在卸载文档期间已发送数据对于开发人员来说传统上是一件困难的事情，因为用户代理通常会忽略在卸载处理程序中生成的异步 XMLHttpRequest。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:12:30.720

如果您试图尽快返回响应，我认为这更像是服务器架构决定。您可以将请求涉及的实际工作卸载给代理或其他什么，以便您可以尽快返回给用户？我不认为只发送单向消息是可行的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T18:15:28.503

假设你正在使用这样的东西：

```
$.ajax({
   url: "test.html",
   context: document.body
}) 
```

（借用`http://api.jquery.com/jQuery.ajax/`和编辑），您可以丢弃响应。

# java - 如何将 Android 应用程序连接到 API 并在列表中显示数据？

> ID：12518364
> 
> 赞同：2
> 
> 时间：2012-09-20T18:08:53.823
> 
> 标签：java, android, json, api

我正在尝试制作一个连接到 API（通过 URL）的应用程序来检索过去研讨会的会话。API 以 JSON 格式返回所有数据。我试过做一些教程（使用 twitter API），但它们不起作用。这是教程的链接：[http ://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-03T06:41:33.240

我想重新开始使用 Retrofit。更少的代码并获得更好的性能。 [http://square.github.io/retrofit/](http://square.github.io/retrofit/)

您可以找到许多代码示例和支持。

您可以在接口中定义您的 API

```
public interface GitHubService {
  @GET("users/{user}/repos")
  Call<List<Repo>> listRepos(@Path("user") String user);
} 
```

并设置您的 API 的主要 URL

```
Retrofit retrofit = new Retrofit.Builder()
    .baseUrl("https://api.github.com/")
    .build();

GitHubService service = retrofit.create(GitHubService.class); 
```

最后一步，Retrofit 会将响应 Json 转换为正确的 Collection

```
Call<List<Repo>> repos = service.listRepos("octocat"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:13:45.243

试试 Marakana 教程。这是 Youtube 上的一套完整的视频教程。JSON 解析已通过 Twitter 时间线示例进行了解释。我忘记了那个特定教程的视频编号，但稍微摆弄一下你肯定会找到它。

第一个教程的链接：

[http://www.youtube.com/watch?v=5RHtKIo_KDI](http://www.youtube.com/watch?v=5RHtKIo_KDI)

# c# - MVC3 帐户登录自动附加 ReturnUrl

> ID：12518365
> 
> 赞同：0
> 
> 时间：2012-09-20T18:09:00.130
> 
> 标签：c#, .net, asp.net-mvc-3

我有一个设置为使用内置角色提供程序进行身份验证的 .NET MVC3 应用程序。问题是，我将身份验证应用程序拆分为一个单独的应用程序，并将其用作单点登录系统。

一切正常，我唯一的问题是我将返回 URL 硬编码到 web.config 中，例如：

```
<authentication mode="Forms">
      <forms loginUrl="http://localhost:59179/Account/LogOn/?ReturnUrl%3Dhttp%3A%2F%2Flocalhost%3A64361%2F" timeout="2880" />
    </authentication> 
```

这行得通，问题是第二个 returlUrl 参数被附加到查询字符串的末尾，这打破了第一个 returnUrl。

有没有办法可以防止第二个 &returnUrl 自动附加到末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:44:44.697

我相信 ReturnUrl 是由 AuthorizeAttribute 附加的。您可以派生自己的 AuthorizeAttribute，然后添加您想要的任何 ReturnUrl（或根本不添加）。

[这是](https://stackoverflow.com/questions/379506/forms-authentication-asp-net-mvc-absolute-returnurl)有关如何在授权过滤器中手动附加返回 url 的答案。

# objective-c - 我如何获得可可中给定字体系列的支持字体

> ID：12518373
> 
> 赞同：2
> 
> 时间：2012-09-20T18:09:21.593
> 
> 标签：objective-c, macos, cocoa

我有一个字体系列弹出按钮，可让用户选择一种字体。我的 UI 中也有相应的字体弹出按钮和字体大小组合按钮。当用户更改字体系列时，我想使用该字体系列支持的面/特征更新字体弹出按钮的菜单。有人可以让我知道这是如何完成的。

TextEdit 似乎做到了，我不知道怎么做。我附上了 textedit 工具栏字体弹出窗口的屏幕截图。我想在我的应用程序中模仿这些控件。

![在此处输入图像描述](../Images/34513ef72777d935ca1e067e89f44411.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:13:53.473

用于`-[[NSFontManager sharedFontManager] availableMembersOfFontFamily:]`获取指定字体系列中的字体描述数组（不是 的实例`NSFont`）。如果您已经有一种字体并且想要它的字体系列，请使用`-[NSFont fontFamily]`.

[返回数组的](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSFontManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFontManager/availableMembersOfFontFamily%3a)`NSFontManager`具体格式见.

# installation - golang: go install 尝试 /usr/local 而不是 GOPATH

> ID：12518374
> 
> 赞同：15
> 
> 时间：2012-09-20T18:09:23.980
> 
> 标签：installation, go, local

这在某种程度上是对我最后一个问题的跟进：[golang：在本地目录中安装软件包](https://stackoverflow.com/questions/12514037/golang-installing-packages-in-a-local-directory)

我已`GOPATH`设置为`$HOME/prog/go/gopath`并且此路径存在三个目录：

```
~/prog/go/gopath$ ls
bin  pkg  src 
```

现在我尝试安装一个[模块来访问](https://github.com/alphazero/Go-Redis)要求我运行的 redis 数据库

```
go install 
```

在源目录中。但是命令`go install`给了我

```
~/prog/go/gopath/src/redis (go1)$ go install
go install flag: open /usr/local/go/pkg/darwin_amd64/flag.a: permission denied
~/prog/go/gopath/src/redis (go1)$ echo $GOPATH 
<myhomedir>/prog/go/gopath 
```

（`<myhomedir>`有效路径在哪里）

问题1：为什么不`go install`考虑`$GOPATH`？问题2：如何说服`go install`使用`$GOPATH`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T18:38:33.323

不确定您的设置方式，但它可能需要从 std 库构建包，但由于权限而不能。你可以试试

```
cd /usr/local/go/src
sudo ./all.bash 
```

这应该构建标准库并运行测试以确保一切正常。

确保您有适当的权限在必要时从 $GOROOT 读取和执行。就我个人而言，我只是从 golang.org 下载存档并将其保存在 ~/local/go 下并适当地设置 GOROOT。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-21T08:12:24.660

这里有类似的问题。当我检查我的 $GOROOT 时，我发现所有的库都已经在那里构建了。但由于某些原因，它试图重建所有库。所以我只是做了一个小技巧：

```
find /usr/lib/go/pkg/ -name "*.*" | sudo xargs touch 
```

然后一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T02:38:37.070

我认为您需要的命令是“go get”：

```
go get github.com/alphazero/Go-Redis 
```

将下载 Go-Redis 库并将其放入您的 $GOPATH/src 目录。

go install 在您自己的源代码上执行编译和安装。

我必须承认，我在整个概念上挣扎了一会儿，但是仔细重新阅读“[如何编写 Go](http://golang.org/doc/code.html#GOPATH) ”和代码组织部分包含您需要了解的有关 go 命令如何工作的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T08:26:03.413

解决方案是从您的 .bash_profile 中删除 GOROOT。然后 go 命令会将其安装到您的 GOPATH 目录中。如此奇怪的是：当我再次在我的 .bash_profile 中设置 GOROOT 并创建一个新的 shell 时，它也可以工作。

# jquery - 使用 jQuery 的 JSONP 请求会绕过 Varnish 吗？

> ID：12518376
> 
> 赞同：0
> 
> 时间：2012-09-20T18:09:35.087
> 
> 标签：jquery, jsonp, varnish

我正在使用前面有 Varnish 的第三方 Web 服务。Varnish 存在是因为它是只读的，并且未缓存的请求相当慢。

我正在使用 jQuery 和 JSONP 查询网络服务。通常，[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)通过带有 JSONP 的额外 GET 参数（根据 docs for [`$.ajax`](http://api.jquery.com/jQuery.ajax/)）使用 cachebusting。由于我的网络服务是只读的，我想要缓存的结果，所以我正在打电话

```
$.ajax({
  url: "http://example.com/json/callback=?",
  dataType: "jsonp",
  cache: true,
  data: data,
  success: callback
}); 
```

我可以通过 Chrome 中的网络选项卡看到请求发出，它们看起来像

`http://example.com/json?callback=jQuery171047077397373504937_1348163237407&arg1=foo&arg2=bar`

因为`cache=true`，我没有`&_=[TIMESTAMP]`在请求中得到额外的“”。

`callback=`回复非常非常慢，所以我认为由于请求的一部分，我有效地绕过了 Varnish 。

换句话说，假设 Varnish 考虑每个请求不同是否准确，因为 jQuery 为每个调用使用唯一的回调键，因此我永远不会取回缓存的结果？

在我要求第三方更改他们的 Varnish 之前，我想确保我已经确定了正确的问题，ala [Ignoring GET parameters in Varnish VCL](https://serverfault.com/questions/112531/ignoring-get-parameters-in-varnish-vcl)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:28:06.203

只有您的回调字符串不是获取变量，而只是请求 URL 的一部分。为了简化清漆配置，您可以添加一个？到该 URL 以使其成为 [http://example.com/json/?callback=jQuery171047077397373504937_1348163237407&arg1=foo&arg2=bar](http://example.com/json/?callback=jQuery171047077397373504937_1348163237407&arg1=foo&arg2=bar)

或者，您可以在清漆配置中的 req.url 上使用 regsub() ，例如：

```
set req.url = regsub(req.url, "callback=jQuery\d+_\d+&", ""); 
```

# javascript - 将表单操作作为整个 url 发送而不中断

> ID：12518380
> 
> 赞同：2
> 
> 时间：2012-09-20T18:09:45.310
> 
> 标签：javascript, jquery, ajax, forms, url

我想要整个字符串[http://mywebsite.com?u=http://othersite.com?thisis](http://mywebsite.com?u=http://othersite.com?thisis)立即发送。如果我把它放在像 bit.ly 这样的 URL 缩短器中，它就可以工作，但如果我把它保持原样，它就会坏掉。

```
<script>
  function go(){
    window.frames[0].document.body.innerHTML='<form target="_parent" action="http://mywebsite.com?u=http://othersite.com?thisis"></form>';
    window.frames[0].document.forms[0].submit()
  }    
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:11:49.423

您必须转义嵌套的 URL[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)以使 URL 有效。

这意味着做这样的事情。

```
function go(){
    var uri = 'http://mywebsite.com?u=' 
        + encodeURIComponent('http://othersite.com?thisis');

    window.frames[0].document.body.innerHTML = 
        '<form target="_parent" action="' 
        + uri 
        + '"></form>';
    window.frames[0].document.forms[0].submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:13:00.440

尝试

```
<script>
  function go(){
    window.frames[0].document.body.innerHTML='<form target="_parent" action="http://mywebsite.com?u=' + encodeURIComponent('http://othersite.com?thisis') + '"></form>';
    window.frames[0].document.forms[0].submit()
  }    
</script> 
```

# r - 我可以在 R 中创建一个空的 ggplot2 图吗？

> ID：12518387
> 
> 赞同：45
> 
> 时间：2012-09-20T18:10:26.163
> 
> 标签：r, ggplot2

[这个问题](https://stackoverflow.com/questions/1395105/getting-latex-into-r-plots)演示了如何将方程放入 ggplot2 qplot。

```
q <- qplot(cty, hwy, data = mpg, colour = displ)
q + xlab(expression(beta +frac(miles, gallon))) 
```

我怎样才能创建一个空的 ggplot2 绘图，以便我可以将标签添加到一个空的画布？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-20T18:12:02.687

```
df <- data.frame()
ggplot(df) + geom_point() + xlim(0, 10) + ylim(0, 100) 
```

并且基于@ilya 的建议，`geom_blank`非常适合您已经拥有数据并且可以基于该数据设置比例而不是明确定义它。

```
ggplot(mtcars, aes(x = wt, y = mpg)) + geom_blank() 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-04-17T07:52:26.853

```
ggplot() + theme_void() 
```

无需定义数据框。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-05-27T16:31:19.213

由于没有一个答案明确说明如何制作仅包含标签的情节，因此我想我会发布它，以现有答案为基础。

## 在`ggplot2`：

```
ggplot() +
    theme_void() +
    geom_text(aes(0,0,label='N/A')) +
    xlab(NULL) #optional, but safer in case another theme is applied later 
```

制作这个情节：

[![在此处输入图像描述](../Images/b6122670db2be15d498710e36ba4d6ef.png)](https://i.stack.imgur.com/5fhHQ.png)

当绘图窗口调整​​大小时，标签将始终显示在中心。

## 在`cowplot`：

```
cowplot::ggdraw() +
    cowplot::draw_label('N/A') 
```

`ggdraw()``draw_label`在中间绘制标签时制作空白图：

[![在此处输入图像描述](../Images/a7e886edc1bb66332ebaa7484ff718ba.png)](https://i.stack.imgur.com/8jzQm.png)

# asp.net-mvc-4 - MVC 4：自定义路由

> ID：12518388
> 
> 赞同：2
> 
> 时间：2012-09-20T18:10:30.130
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

ASP.NET MVC 4 网站。

有一个名为“Locations”的数据库表，它只包含三个可能的位置（例如“CA”、“NY”、“AT”）默认路由是：

```
http://server/Location/  --- list of Locations
http://server/Location/NY --- details of NY-Location 
```

如何在没有 /Location/ - 位的情况下创建自定义路线？（我觉得更好一点）

以便

```
http://server/NY - details of NY
http://server/AT - details of AT
.... etc... 
```

和

```
http://server/Location  --- list of Locations 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T18:42:12.290

一种解决方案是使用路由约束进行自定义路由：（顺序很重要）

```
routes.MapRoute(
    name: "City",
    url: "{city}",
    constraints: new { city = @"\w{2}" },
    defaults: new { controller = "Location", action = "Details", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

使用匹配的控制器：

```
public class LocationController : Controller
{
    //
    // GET: /Location/
    public ActionResult Index()
    {
        return View();
    }

    //
    // GET: /{city}
    public ActionResult Details(string city)
    {
        return View(model:city);
    }
} 
```

如果您只想允许 NY、CA 和 AT，您可以编写路由约束，例如：

```
constraints: new { city = @"NY|CA|AT" } 
```

（小写也可以）。另一个更通用的解决方案而不是使用路由约束是实现你自己的`IRouteConstraint`. 看[我之前的回答](https://stackoverflow.com/questions/7570237/mvc-3-routing-help-with-dynamic-route/7570543#7570543)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:17:00.203

您需要在控制器内指定路由。查看本教程，了解如何指定路由约束：

[http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)

> 您使用路由约束来限制与特定路由匹配的浏览器请求。您可以使用正则表达式来指定路由约束。

另请看这篇文章：[如何将 /News/5 的路由映射到我的新闻控制器](https://stackoverflow.com/questions/9332026/asp-net-mvc-4-route-news-5)

# bash - 用于汇总统计的 Bash 脚本

> ID：12518390
> 
> 赞同：0
> 
> 时间：2012-09-20T18:10:34.693
> 
> 标签：bash

我有一个`csv`客户数据文件，我想根据过去的行为找出他们购买产品的概率。

该表如下所示：

```
custId         prodId       purchased
   001           0001          0
   002           0001          0
   006           1001          1
   001           0501          0
   012           8001          0
   189           0071          0
   487           0001          1
   ...           ...          ... 
```

`custId`是客户 ID，`prodId`是产品，列既不是唯一的，也不是`custId-prodId`唯一的，因为客户可以多次显示相同的产品。

理想的输出是这样的：

```
 custId         purchased
   001           .0999
   002           0
   006           1
   012           0
   189           .75
   487           1
   ...          ... 
```

我正在考虑这样做，`bash`因为文件太大而无法放入内存。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:24:59.723

由于 Jonah Bishop 和 choroba 都在上面评论说你应该使用 Perl，我倾向于同意，这是一个使用 Perl 来执行此操作的 Bash 命令：

```
perl -e \
  ' use warnings;
    use strict;
    my %custCounts;
    my %custSums;
    while(<>)
    {
      m/^(\d{3}),\d{4},([01])$/
        or die "ruakh doesn'"'"'t understand your CSV file format";
      ++$custCounts{$1};
      ++$custSums{$1} if $2;
    }
    foreach my $custId (sort keys %custCounts)
    {
      print "$custId,", ($custSums{$custId}||0) / $custCounts{$custId}, "\n";
    }
  ' < customerData.csv 
```

以上假设您的 CSV 文件如下所示：

```
001,0001,0
002,0001,0
006,1001,1
001,0501,0
012,8001,0
189,0071,0
487,0001,1 
```

字段分别为三位数、四位数和`0`或`1`。如果不是这种情况，那么您需要调整以`m/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:25:19.423

这是一个使用的快速示例`awk`：

```
awk '{++shown[$1]; if ($3 > 0) ++purchased[$1];}END{for (cust in purchased) print cust, purchased[cust]/shown[cust]}' datafile 
```

没有错误检查，所以如果你的输入有偏差，它就会死掉；此外，您必须进行预处理以删除任何标题等。如果您的字段分隔符不是空格，请使用 'awk -F, ...' 将字段分隔符设置为 ',' 或其他。

此外，这仅打印具有非零百分比的条目，以包括所有客户，更改`for (cust in purchased)`为`for (cust in shown)`.

# jquery - 在悬停弹出窗口中，带有菜单

> ID：12518391
> 
> 赞同：1
> 
> 时间：2012-09-20T18:10:57.953
> 
> 标签：jquery, popup

我被问到在 jquery 中编写这样的代码的最优雅的解决方案

[http://jsfiddle.net/lucaguglielmi/z3PKm/](http://jsfiddle.net/lucaguglielmi/z3PKm/)

当然，使用鼠标，您应该能够将鼠标悬停在弹出窗口上并单击一个按钮。

优雅意味着干净的代码具有良好的性能和最大的可用性，没有鼠标悬停/移出错误。如果鼠标悬停出现错误并且没有其他插件然后 jquery，用户应该有一些时间回到弹出窗口。

我们也可以更改 HTML，但 3 按钮必须保留。

关于如何进行的任何建议？也许使用计时器？

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:19:17.173

[http://jsfiddle.net/z3PKm/12/](http://jsfiddle.net/z3PKm/12/)

向弹出菜单本身添加一些弹出规则（并且它必须触摸按钮）（使用 div 包装使其透明并位于按钮上方） - 或使用超时功能关闭`.choose`

这是我认为最简单的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:51:18.330

我对这样的 UX 元素的经验是，它会导致用户沮丧；因此，您可能需要完全重新考虑您的方法，以便有另一种显示两个按钮的方式不依赖于将鼠标悬停在元素上。支持重构设计的另一个论点是它不能在平板电脑或手机等触控设备上工作，因为没有“悬停”的概念。

但是，如果您确实想这样做，我认为使用计时器是您的最佳选择。Alex 的解决方案通过消除按钮和容器之间的间隙来工作，但这也会导致挫败感：例如，如果用户的鼠标悬停在按钮上，然后沿对角线移动到现在可见的容器上，首先越过背景，容器就会消失。此外，从设计的角度来看，消除两个元素之间的视觉差距可能是不可取的。

但是，仅使用 并不是一件简单的事情`setTimeout`，因为如果您将鼠标悬停在按钮上，然后转到弹出窗口，如果您按下任何按钮的速度不够快，它仍然会消失。因此，您还必须`clearTimeout`在他们进入弹出窗口时使用，并且大概在他们离开时隐藏弹出窗口。所以，这就是你需要的：

首先，声明一个变量来保存超时 ID（为简单起见，我使用了一个全局变量，但您可能希望在其中一个元素上使用属性）：

```
var hidePopupTimeoutId; 
```

然后像这样修改你的`.choose`事件：

```
$(".choose").live("mouseover", function () {
    // no need to check if hidePopupTimeoutId is undefined; clearTimeout
    // will fail silently
    clearTimeout( hidePopupTimeoutId );
    $(".popup").show();
});

$(".choose").live("mouseout", function () {
    // we don't hide the popup immediately, but give the user a reasonable
    // amount of time to mouse over it
    hidePopupTimeoutId = setTimeout( function() {
        $(".popup").hide();
    },500);
}); 
```

请注意，我们必须清除`mouseover`事件的超时：否则，如果您将鼠标悬停在按钮上，鼠标移出，然后再将鼠标移回，即使您的鼠标悬停在按钮上，它也会消失！

接下来，我们添加一些逻辑以确保在鼠标悬停时弹出窗口保持可见：

```
$(".popup").live("mouseenter", function() {
    clearTimeout( hidePopupTimeoutId );
});

$(".popup").live("mouseleave", function() {
    $(".popup").hide();
});​ 
```

请注意，我们使用 jQuery 的`mouseenter`and`mouseleave`事件而不是`mouseover`and `mouseout`; 这是因为`mouseout`当您将鼠标悬停在弹出窗口的其中一个子元素（如按钮）上时将被调用，并且弹出窗口将消失！

你有它。这是一个 jsFiddle 演示：http: [//jsfiddle.net/z3PKm/15/](http://jsfiddle.net/z3PKm/15/)

# java - org.apache.jasper.JasperException：PWC6033：JSP 的 Javac 编译出错

> ID：12518396
> 
> 赞同：4
> 
> 时间：2012-09-20T18:11:26.913
> 
> 标签：java, jsp, jakarta-ee, glassfish-3

我正在运行此代码，但它不工作。我正在使用带有 Eclipse 的 Glassfish 无法使用 GlassFish Server Open Source Edition 3.1.2.2 编译 jsp，它在此处显示以下异常代码

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ page language="java" import="java.sql.*" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>GlassFish JSP Page</title>

  </head>
  <body>

  <%
   try {     
            Class.forName("com.mysql.jdbc.Driver").newInstance();            
        Connection C =DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root",""); 
            }       catch (Exception E) { 
      System.err.println("Unable to load driver."); 
      E.printStackTrace(); 
            } 

           try{
            Statement stmt=null;
            int val=stmt.executeUpdate("insert into reg(Name,Fname)       values('"+haroon+"','"+hussain+"')");
        if(val==1){
            System.out.println("Data has been inserted :)");
        }else {

            System.out.println("data has not been inserted. :( ");
        }

    } catch (Exception e) {
        e.printStackTrace();
        System.out.println("Cant inserted");
    }

  %>

  </body>
</html> 
```

glassfish 显示的异常

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message

descriptionThe server encountered an internal error () that prevented it from     fulfilling this request.

exception 
org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP

 PWC6197: An error occurred at line: 15 in the jsp file: /index.jsp
PWC6199: Generated servlet error:
string:///index_jsp.java:72: cannot find symbol
symbol  : variable haroon
location: class org.apache.jsp.index_jsp

PWC6197: An error occurred at line: 15 in the jsp file: /index.jsp
PWC6199: Generated servlet error:
string:///index_jsp.java:72: cannot find symbol
symbol  : variable hussain
location: class org.apache.jsp.index_jsp

 note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2.2 logs. 
```

请任何人解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:13:31.560

您正在使用变量`haroon`，`hussain`并且您从未在 JSP 中声明它们。编译器无法在生成的 servlet 代码中的任何位置找到该变量。

* * *

[出于这些众所周知的各种原因](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)，我强烈**反对**编写脚本（除非您这样做是为了学习目的）。

关于这一点，如果您将一个变量传递到您的 JSP 页面，并且您想将它保存到您的数据库中，那么这样就足够了：

```
<%
    String haroon = request.getParameter("haroon");
    String hussain = request.getParameter("hussain");
%> 
```

*（在进行数据库连接之前添加标签）*。您现在可以通过在URL（调用 JSP）上附加 2 个参数 (`haroon`和) 来传递值。`hussain`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-28T07:21:33.840

就我而言，我试图在 jsp 中初始化 TreeSet。

```
TreeSet<String> treeCategories = new TreeSet<>(); 
```

这将得到：org.apache.jasper.JasperException：PWC6033：JSP 的 Javac 编译出错||PWC6199：生成的 servlet 错误...因为“钻石”或“<>”。

我不记得确切的 java 术语或用法，但 <> 是某种模板或泛型或类似的东西，当 java 真正需要时，至少在我的情况下，知道它是什么：

```
TreeSet<String> treeCategories = new TreeSet<String>(); 
```

那可行。

# asp.net-mvc - 在 ASP.NET MVC 中的控制器之前创建视图

> ID：12518401
> 
> 赞同：0
> 
> 时间：2012-09-20T18:11:41.530
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, razor, convention-over-configur

我通过在 Views 文件夹下的解决方案中创建一个新文件夹来创建 Razor 视图，然后右键单击该文件夹并选择“添加视图”。

后来，我转到我的控制器文件夹并右键单击它，选择“添加控制器”。但是，现在我想将我创建的视图附加到我的控制器，当我这样做时，Visual Studio 无法识别我的视图存在：

```
return View("MyViewName"); 
```

如何让 Visual Studio 识别我已经存在的视图？我宁愿不使用 Resharper 创建我的 Razor 视图来解决问题（因为我已经创建了视图）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:21:17.070

不需要写东西，你的文件夹必须命名为控制器。如果您想要其他文件夹名称，请输入完整路径：

```
return View("~/Views/MyCustomFolder/MyViewName.cshtml"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:29:47.647

这是对 ASP.NET MVC[配置](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://en.wikipedia.org/wiki/Convention_over_configuration&ei=M19bUPqUB8rYqgHlmoGACA&usg=AFQjCNEanUn1HhJxMPMNNPZjHdKHtkDOaQ&sig2=7CvUqeYV-Uxrui9jufD7nQ)概念的约定 您的控制器操作应与视图相同：

```
public class MyBeautifulController : Controller
{
  public ActionResult MyActionIndex()
  {
    return View();
  }
} 
```

谢谢你的视图应该被调用并位于这样的位置：`~/Views/MyBeautiful/MyActionIndex.cshtml`

基本上你在你的控制器类名中删除了最后一个“控制器”。

这就是 COC（配置上的约定）。现在，如果您想调用一个不像您的操作那样调用的视图，您将在您的操作中执行以下操作：

```
public class MyBeautifulController : Controller
{
  public ActionResult MyActionIndex()
  {
    return View("ViewCalledDifferently", new MyModel());
  }
} 
```

在这种情况下，您的视图将被调用并定位如下： `~/Views/MyBeautiful/ViewCalledDifferently.cshtml`并将接受 MyModel 作为模型类型。

希望这可以帮助。

# iphone - 是否需要自定义实现才能在 iO 中创建通知，例如 twitter 应用程序使用的“Tweet Sent”通知？

> ID：12518403
> 
> 赞同：0
> 
> 时间：2012-09-20T18:11:45.893
> 
> 标签：iphone, ios

每当您使用推特应用程序发送推文时，屏幕顶部的状态栏会翻转以显示“正在发送推文”......然后是“已发送推文”，并且屏幕顶部的工具栏会重新出现。我猜这是一个自定义实现，而不是内置在 sdk 中。例如隐藏显示这些消息视图的状态栏，然后取消隐藏导航栏。

我只是想确保它是一个自定义实现，然后再走上类似的道路。它做得很好，看起来它是操作系统的一部分。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:36:14.293

这绝对是一个自定义实现，Apple 已经允许它在许多应用程序中使用，即使根据人机界面指南它是一个轻微的灰色区域。它确实更倾向于反对 HIG，但他们仍然允许这样做。

这是一个优秀指南的链接：

[[iOS] 自定义状态栏 - Shell 中的 Cocoa](http://www.cocoaintheshell.com/2010/11/custom-status-bar-ios/)

# jquery - 使用 jQuery 对添加新元素执行一些操作

> ID：12518404
> 
> 赞同：0
> 
> 时间：2012-09-20T18:11:48.380
> 
> 标签：jquery

我在页面中有几个搜索控件。现在我正在使用 jQuery 对页面上可用的控件执行一些初始化。对于ajax添加的控件，在页面加载完成后，我写了一个函数，通过将新创建的id传递给函数来完成这个初始化。但是对于这个问题是否有更好的解决方案，比如在页面加载后添加元素的情况下我们可以在（实时）上使用的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:17:24.367

您可以附加到加载事件：

```
$('#id').load(function (event) {
    // init control
}); 
```

# asp.net - 从 Asp.Net 应用程序调用程序函数

> ID：12518406
> 
> 赞同：1
> 
> 时间：2012-09-20T18:11:50.653
> 
> 标签：asp.net, wpf

我需要编写一个小型 c# WPF 应用程序。它执行的某些进程需要由 ASP.Net 应用程序调用。

我的问题是如何设置 Web 应用程序可以调用的东西并将 wpf 应用程序设置为工作？

或者我应该创建一个单独的类库来执行进程并在两个应用程序中引用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:14:43.853

是的; 您应该创建一个单独的类库。

类库不应引用 WPF 或 ASP.Net 程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:17:33.627

如果两个单独的应用程序需要一组通用功能，那么您将无法将通用代码重构到两者都引用的库中。我想你以后会用这种方式省去很多麻烦。

我的公司有一些库，它们从我们的 webapp、windows 服务，甚至是奇怪的计划任务或控制台应用程序中调用。这些来源中的每一个都有不同的安全要求、不同的操作模型（例如，使用 ASP .Net Membership 用户的无状态公共网站与作为域用户或服务帐户运行的有状态私有控制台应用程序），并且托管在不同的机器或机器类型上（例如，云与本地）。正确设置您的解决方案和项目参考意味着 MSBuild 可以为您执行部署，而不必担心跨越上述所有各种边界。

# ubuntu - ec2 密钥的什么权限是好的

> ID：12518410
> 
> 赞同：1
> 
> 时间：2012-09-20T18:12:22.163
> 
> 标签：ubuntu, ssh, amazon-ec2

我得到了一个 key.pem 文件，权限是 664。我用

```
ssh -i key.pem xxx.xxx.xxx.xxx -l ec2-user 
```

登录到 ec2 实例。但是返回了一个错误：

```
Permissions 0664 for '/path/to/key.pem' are too open.
It is required that your private key files are NOT accessible by others.
This private key will be ignored. 
```

然后我尝试了400，它给了我

```
Permission denied (publickey). 
```

应该设置 key.pem 的什么权限才能 ssh 到 ec2？

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:15:48.737

这些是关于不同事物的错误消息。

400 仅用于文件所有者的 rw，这没关系（.ssh 通常是 rwx）。

```
Permission denied (publickey). 
```

这实际上应该来自服务器，您没有正确添加公钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T09:08:01.420

```
chmod 600 key.pem xxx.xxx.xxx.xxx 
```

好像pemkey只能自己用，其他人不能用

# css - 带有多个项目的 Twitter Bootstrap 响应式轮播

> ID：12518412
> 
> 赞同：13
> 
> 时间：2012-09-20T18:12:23.980
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试使用多个项目设置 Twitter Bootstrap 轮播，同时保持响应能力。

我有一个用于测试设置的 jsfiddle [http://jsfiddle.net/Va8Un/](http://jsfiddle.net/Va8Un/)

我想要发生的是在轮播窗格中显示 4 个带有标题的图像，每个图像都带有标题以保存项目标题等，并且应该调整它们的大小以适应屏幕以始终保持在同一行上。现在它完全忽略了我为调整屏幕图像大小所做的任何尝试，我认为设置 img`max-width:100%;`可以解决问题，但似乎没有效果。此外，第四张图像被推到第二行，因为图像没有调整大小：

![在此处输入图像描述](../Images/a5021de545c2d009c934c85759e6b866.png)

有什么方法可以用纯 CSS 解决这个问题，还是我应该寻找 Twitter Bootstrap 之外的选项？

你可以在这里查看结果：http: [//jsfiddle.net/Va8Un/embedded/result/](http://jsfiddle.net/Va8Un/embedded/result/)

这是HTML：

```
<div class="container">
    <div class="carousel slide" id="myCarousel">
        <div class="carousel-inner">
          <div class="item active">
                <ul class="thumbnails span12">
                    <li>
                        <div class="caption">
                            <h5>Caption</h5>
                        </div>
                        <div class="thumbnail">
                            <img src="http://placehold.it/260x180" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="caption">
                            <h5>Caption</h5>
                        </div>
                        <div class="thumbnail">
                            <img src="http://placehold.it/260x180" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="caption">
                            <h5>Caption</h5>
                        </div>
                        <div class="thumbnail">
                            <img src="http://placehold.it/260x180" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="caption">
                            <h5>Caption</h5>
                        </div>
                        <div class="thumbnail">
                            <img src="http://placehold.it/260x180" alt="">
                        </div>
                    </li>
                </ul>
          </div>         
          <div class="item">
               ...
          </div>
          <div class="item">
               ...
          </div>

        </div>
        <a data-slide="prev" href="#myCarousel" class="left carousel-control">‹&lt;/a>
        <a data-slide="next" href="#myCarousel" class="right carousel-control">›&lt;/a>
    </div>
</diV> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-20T19:59:48.583

您可以单独使用引导流体网格来执行此操作，只需指定一个`.container-fluid`容器和`.row-fluid`一行，并为包含图像的每个列表项指定一个`.span*`类，在本例中为 3 (3*4=12)。

```
.container {
  margin-top: 10px;
}

img
{
  max-width:100%;   
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.0/bootstrap.min.js"></script>
<link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet" />

<div class="container-fluid">
  <div class="row-fluid">
    <div class="carousel slide" id="myCarousel">
      <div class="carousel-inner">
        <div class="item active">
          <ul class="thumbnails">
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
          </ul>
        </div>
        <div class="item">
          <ul class="thumbnails">
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
          </ul>
        </div>
        <div class="item">
          <ul class="thumbnails">
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
            <li class="span3">
              <div class="caption">
                <h5>Caption</h5>
              </div>
              <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
              </div>
            </li>
          </ul>
        </div>
      </div>
      <a data-slide="prev" href="#myCarousel" class="left carousel-control">‹&lt;/a>
      <a data-slide="next" href="#myCarousel" class="right carousel-control">›&lt;/a>
    </div>
  </div>
</div>
```

演示：http: [//jsfiddle.net/Va8Un/10/](http://jsfiddle.net/Va8Un/10/)

编辑：这是带有更正的演示 [http://jsfiddle.net/Va8Un/550/](http://jsfiddle.net/Va8Un/550/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:57:36.227

我使用 Twitter Bootstrap 做到了这一点：

```
<!-- Images Thumbnails -->
<div style="position:absolute;top:430px;height:115px;width:350px;margin:10px 0 0 10px;">
    <p style="margin:0;">Images</p>                     
    <!-- Product Images Carousel -->
    <div id="ImagesCarousel" class="carousel slide">
          <!-- carousel items -->
          <div class="carousel-inner">
                <div class="active item">
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>    
                </div>
                <div class="item">
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                </div>
                <div class="item">
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                    <?php include 'ryan_thumbnail_carousel_productimages.html'; ?>
                </div>
          </div>
          <!-- Carousel nav -->
          <a class="carousel-control left" href="#ImagesCarousel" data-slide="prev">&lsaquo;</a>
          <a class="carousel-control right" href="#ImagesCarousel" data-slide="next">&rsaquo;</a>
    </div>
</div> 
```

'ryan_thumbnail_carousel_productimages.html' 是：

```
<div class="thumbnail" style="float:left;margin:10px 15px 0 0;width:70px;height:70px; position:relative;"></div> 
```

# javascript - HTML5 Track Element Cue 事件有问题吗？

> ID：12518413
> 
> 赞同：2
> 
> 时间：2012-09-20T18:12:29.957
> 
> 标签：javascript, node.js, html, html5-audio

我正在尝试将函数动态分配给 HTML5 的`cue.onenter`事件。这是一个非常新的功能，目前仅在启用了特定标志的 Chrome 中支持（请参阅[此处](http://www.html5rocks.com/en/tutorials/track/basics/)的 HTML5 Rocks 示例）。

但是，由于早期开发，它确实存在错误，或者我做错了什么。基本上，我在普通的 HTML 页面上有一个 track 元素。没什么怪异的。

```
<audio id="audiocast" controls oncanplay="setReadyToPlay();">
            <source id="audiosource" src="SomeWorkingUrlwithaudio" ></source>
            <track kind="metadata" id="audioTrack" label="slides" src="/data.vtt" default >
            </track>
            Your Browser does not support HTML5
        </audio> 
```

我通过 JavaScript 访问它，如下所示：

```
//(...)
var trackElements = $("#audiocast")[0].children("track")[0];
        _track = trackElements.track;
        _cues = _track.cues;

        for (var j = 0; j < _cues.length; ++j) {
            var cue = _cues[j];
            cue.onenter = getOnEnter(j);
        }

//(...)
function getOnEnter(idx) {
    return function() {
        setCueIdx(idx);
        updateURL(idx);
        var json = JSON.parse(this.text);

        _currImgSrc = json.src;
        drawIt();
    }
}; 
```

但是，这仅在某些时候有效。有时我必须重新加载浏览器 3 次才能使其工作（例如，当我在输入提示时绘制图像时），或者*当*它工作时，它会随机工作，直到达到 10 个提示中的第 4 个，然后停止工作。

这只是没有意义，但也许你们中的一些人知道如何为此提供回退和稳定性解决方案。

附加信息：这作为 Node.js 应用程序运行。处理提示的媒体播放器的完整来源如下。

请注意，由于 Stack Overflow 的脚本沙盒化，该代码段将不起作用。

```
/*
 * slideCastController.js
 * © by pschne2s, nkopp2s, 2012
 *
 * Basically encapsulates the Media Player Object, handling the function of the HTML5-Player
 */

/****************************OBJECT DEFINITION***********************************/

CanvasRenderingContext2D.prototype.clear = CanvasRenderingContext2D.prototype.clear ||
  function(preserveTransform) {
    if (preserveTransform) {
      this.save();
      this.setTransform(1, 0, 0, 1, 0, 0);
    }

    this.clearRect(0, 0, this.canvas.width, this.canvas.height);

    if (preserveTransform) {
      this.restore();
    }
  };

var mediaPlayer = (function() {
  //Members
  var _cueIdx = 0;
  var _cues = [];
  var _target;
  var _track;
  var _readyToPlay = false;
  var _currImgSrc;

  function setupCues() {
    if (_readyToPlay) {
      if (_track === undefined) {
        // var trackElements = document.getElementById("audioTrack");
        var trackElements = $(_target).children("track")[0];
        _track = trackElements.track;
      }
      _cues = _track.cues;

      $("#maxcues").text(_cues.length - 1);
      for (var j = 0; j < _cues.length; ++j) {
        var cue = _cues[j];
        cue.onenter = getOnEnter(j);
      }

      _track.oncuechange = function() {
        //updateURL(mediaPlayerInfo.cueIdx);
      };

      checkFragments();
    } else {
      setTimeout(setupCues, 1);
    }
  };

  function getOnEnter(idx) {
    return function() {
      setCueIdx(idx);
      updateURL(idx);
      var json = JSON.parse(this.text);

      _currImgSrc = json.src;
      drawIt();
    }
  };

  function drawIt() {
    var ctx = $("#slide")[0].getContext('2d');
    ctx.clear();

    var tmpImg = new Image();
    tmpImg.onload = function() {
      ctx.drawImage(tmpImg, 0, 0, 592, 256);
    }

    tmpImg.src = _currImgSrc;

  }

  function checkFragments() {
    var fragments = purl(window.document.URL);
    var slide = fragments.fparam("slide");
    if (slide !== undefined) {
      gotoCue(slide);
    }
    var action = fragments.fparam("action");
    if (action == "play") {
      _target.play();
    }
  };

  function setCueIdx(idx) {
    //alert("Cue idx set to: " + idx);
    _cueIdx = idx;
    $("#cueidx").text(idx);
  };

  function gotoCue(index) {
    if (index >= 0 && index < _cues.length) {
      _cueIdx = index;
      var audioElement = $("#audiocast").get(0);
      //mediaPlayerInfo.cues[mediaPlayerInfo.cueIdx].onenter();
      audioElement.currentTime = _cues[index].startTime;
    }
  };

  var updateURL = (function() {
    // set Base-URL (without query/hash-String)
    var url = location.protocol + "//" + location.host + location.pathname;
    var html5 = window.history.replaceState !== undefined ? true : false;

    return function(slideIdx) {
      if (html5)
        window.history.replaceState(null, document.title + " | Slide #" + slideIdx, url + "#slide=" + slideIdx);
      else
        location.href = url + "#slide=" + slideIdx;
      // No nice browser history
    };
  })();

  return {
    init: function() {
      setupCues();
    },
    setTarget: function(obj) {
      _target = obj;
    },
    setTrack: function(obj) {
      _track = obj;
    },
    setReadyToPlay: function() {
      _readyToPlay = true;
    },
    gotoNextCue: function() {
      gotoCue(_cueIdx + 1);
    },
    gotoPrevCue: function() {
      gotoCue(_cueIdx - 1);
    }
  };
})();

$(document).ready(function() {
  // "Unobstrusive" Function-Bindings
  $("#btnPrevCue").bind("click", mediaPlayer.gotoPrevCue);
  $("#btnNextCue").bind("click", mediaPlayer.gotoNextCue);

  mediaPlayer.setTarget($("#audiocast")[0]);
  mediaPlayer.init();
});

window.setReadyToPlay = mediaPlayer.setReadyToPlay;
// does not work using other ways atm
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T18:15:41.020

**从原始问题复制的内容**

* * *

显然，音频/轨道元素确实有很多问题。然而，“oncuechange”似乎运作良好。我现在是这样的：

```
var _cueLookup = new Object();

_cues = _track.cues;  //track-element cues.
for (var j = 0; j < _cues.length; ++j) {
            var cue = _cues[j];
            //cue.onenter = getOnEnter(j);
            _cueLookup[cue.id] = j;
            //alert(_cueLookup[cue.id]);
        }

_track.oncuechange = function() {
            // "this" is a textTrack
            var cue = this.activeCues[0]; // assuming there is only one active cue 
```

# delphi - 为什么包含 FastMM 会导致 EInvalidTypecast 错误？

> ID：12518416
> 
> 赞同：2
> 
> 时间：2012-09-20T18:12:39.020
> 
> 标签：delphi, fastmm

这是使用 Delphi XE2 和 FastMM 4.99 以及 Win7-64 机器上的 32 位程序。

我试图使用 FastMM 来检查我一直在研究的一个小程序。该程序包括一个数据模块，该模块位于项目的自动创建表单列表中。数据模块只包含一个 TADOConnection 对象。

当我在 FastMM 中启用 FullDebugMode 时，退出程序时出现无效的类型转换错误。罪魁祸首似乎在于释放数据模块（错误发生在 中`TADOConnection.GetADODataSet`）。谁能建议为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:19:29.577

事实证明，问题只是 FastMM 暴露的问题，而不是由它引起的。

具体来说，我将子类`TADOQuery`化以与数据模块一起使用。我记得为该类编写了一个析构函数覆盖，但未能调用继承的 dtor。可能这导致了`TADOConnection`做一些未定义的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:18:09.930

没有更多信息，很难准确地说出来，但是当你在释放某些东西时遇到问题，通常是因为它试图释放已经被释放的东西。尝试放置几个断点以查看是否有任何涉及的类在您看到此错误之前被释放。如果是这样，那应该可以帮助您追踪它。

# database - 有没有比在 SQlite 数据库中查询 HTML 数据更有效的方法？

> ID：12518417
> 
> 赞同：2
> 
> 时间：2012-09-20T18:12:40.783
> 
> 标签：database, django, sqlite, database-design, document-oriented-db

也许我的问题将被关闭，因为它不够“建设性”，但无论如何......我已经搜索过答案，但其中大多数都太笼统了。对于我的硕士论文项目，我必须抓取大量（即数千个）网页并将它们完全存储在数据库中。这是必要的，因为我必须以不同的方式分析它们，尝试几种机器学习算法并以不同的方式解析它们。目前，我正在为此使用 SQlite 数据库，并结合 Django 作为首选的 Web 框架。

我已将单个网页的整个 HTML 数据放入 Django`TextField`中，即对于每个网页，数据库表中都有单独的行，所有网页的内容都存储在表的单个列中。现在的问题是查询和排序数据，尤其是迭代数据非常慢。到目前为止，我已经抓取了大约 1000 个网页，并且数据库文件的大小已经超过 2 GB。此外，我的 4 GB RAM 被完全填满，我的电脑（Macbook Pro 2009 年中，Core2Duo 2.26 Ghz，500 GB 硬盘，OSX 10.8）变得无响应。如果我限制要预缓存的项目数量，那么处理数据会变得更慢，因为查询数量会增加。由于我必须抓取更多数据，因此我当前的设置无法很好地扩展。

**我现在的问题是：** 如何更有效地存储我的 HTML 数据，以便更快地查询数据？切换到另一个 RDBMS（如 MySQL 或 PostgreSQL）是否有意义？或者你会推荐一个面向文档的数据库系统，比如 MongoDB？到目前为止，我只有使用 SQlite 的经验，所以我真的不知道该使用什么。随着我硕士论文的截止日期越来越近，我没有时间尝试许多不同的设置。

为了帮助您帮助我，这里有一些进一步的要求：

*   与 SQlite 相比，查询大型 HTML 数据的性能更高，同时不会占用我计算机的所有内存（工作负载无法分配到其他计算机）
*   与 Django 或多或少的良好集成
*   这只是研究工作，因此它永远不会在生产环境中运行，而只能在我的计算机上运行（也许也在我教授的计算机上）

如果你能帮助我决定我应该走哪个方向，那就太好了，因为我对这些巨大的可能性感到不知何故迷失了方向。非常感谢您！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:33:49.907

这只是一个答案，但您应该考虑的建议。您的问题远不能通过代码片段或提示来解决。

**第一**：尽量减少获取的数据。这就是说，为什么要存储完整的HTML代码，我猜你只对网页上发布的文本（又名内容）感兴趣。因此，在抓取期间从 HTML 内容中剥离数据并存储纯信息。如果我错了，并且您对其他内容感兴趣，请随时纠正我。

**第二**：尝试产生可查询的数据。您的爬虫应该以您可以更轻松地处理数据的方式将数据写入数据库。map-reduce 方法可能是要走的路。这将花费更多时间进行爬网，但之后可以快速检索数据。这几乎只存储了您所爬取的所有页面的地图，而不是完整的内容，或者至少，您的查询不会触及完整的数据表，并且首先仅依赖于 mapreduce 的内容。

**第三**：升级你的硬件——你想处理很多数据吗？做好准备（或带上时间）。尽可能多地插入你想要的内存，并且可以到你的 Macbook（你可以把内存放在里面吗？！请说你可以升级苹果的内存..）因为它真的很便宜

**第四**：SQLite 是 hdd-heavy 因为它依赖于操作系统 io-cache 等，有时需要很长时间才能重新获取数据。如果您可以尝试将它放在 SSD 驱动器上（从长远来看，这对 SSD 来说是不健康的 ;-)）或使用快速连接到您的 PC 的远程数据库，因此 hdd->ram->cpu 周期是不是你的限制，但只有 RAM 和 CPU（我猜你的程序不是多核的，对吧？）

**五分之一和决赛：**尽管我讨厌现在到处都在使用花哨的词，但请看一下 IBM 关于[hadoop的文章](http://www.ibm.com/developerworks/java/library/j-javadev2-15/index.html)

# properties - 是否可以用额外的属性标记 elixir/sqlalchemy 字段/列？

> ID：12518419
> 
> 赞同：0
> 
> 时间：2012-09-20T18:12:43.427
> 
> 标签：properties, tags, sqlalchemy, python-elixir

我想将我的实体中的某些列标记为可搜索——理想情况下，以一种干净的方式，以每列为基础。是否可以“标记”或向类中的列定义添加属性？在代码的其他地方，我希望能够选择可在任何实体上搜索的列，而无需知道它具体是什么类。

例如：

```
class Foo(Entity):
  bar = Field(Integer, default = -1, searchable = True)

..

if foo.bar.searchable:
  # do something 
```

显然上面的例子不起作用——但有没有办法做到这一点？我不是这方面的专家，几天的搜索/文档拖网显示没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:28:49.703

Monkeypatching 有效（至少在 sqlalchemy 声明性模型中，我没有用 Elixir 尝试过），尽管它让您接触到 Monkeypatching 的所有标准问题（主要问题是不能保证您对 bar 的修改将保持不变） . 但它基本上可以工作，如果您的应用程序非常简单，它可能是一个可行的解决方案。

```
class Foo(Entity):
    bar = Field(Integer, default=-1)
    bar.searchable = True 
```

如果您的应用程序更复杂，和/或它需要在很长一段时间内保持健壮/可靠/可多次维护，则上述技术不是可行的方法。理想情况下，您希望引入一些其他对象来存储此附加信息，该对象完全在您的控制范围内，而不是受 sqlalchemy 对您的数据模型类所做的所有幕后工作的摆布。

为此，有很多方法可以走。一个简单的选择是创建一个简单的结构，该结构将保存附加信息（布尔“可搜索”属性以及您可能想要添加的任何其他内容），以便您可以在需要时轻松查找。例如，定义一个非常简单的类，它使用嵌套的 dict() 来存储由模型类、字段名称和属性名称索引的任意数量的附加属性。然后创建此类的单个实例，并在整个应用程序中共享它。

设置了这样的结构后，您可以像这样使用它：

```
if extra_props[foo]['bar']['searchable']:
    # do something 
```

# c++ - PyRun_String 在任何错误后停止将结果发送到标准输出

> ID：12518435
> 
> 赞同：2
> 
> 时间：2012-09-20T18:13:36.647
> 
> 标签：c++, python, c

我正在用 C++ 编写 Python 终端 GUI。我正在使用以下代码运行用户键入的 Python 命令行：

```
void RunTerminalCommand (char * line) 
{

    PyObject *py_main, *py_dict;
    py_main = PyImport_AddModule("__main__");
    py_dict = PyModule_GetDict(py_main);
    PyObject * PyRes = PyRun_String(line, Py_single_input, py_dict, py_dict);

    return 0;
} 
```

它工作得很好，命令行被执行，结果通过标准输出打印在输出窗口上。但是每当 Python 命令行导致 Python 错误时，它就会停止工作：我的标准输出没有收到任何数据

笔记：

*   PyRes 总是返回 NULL，甚至在错误行被注入之前

*   我不知道我是否应该每次都调用 PyImport_AddModule。但它似乎以这种方式工作。

*   如果我使用**PyRun_SimpleString(line)** insted of **PyRun_String(line, Py_single_input, py_dict, py_dict)**，它总是有效的，我仍然通过 stdout/stderr 收到错误消息。但是这个调用不会将命令行评估的结果发送到标准输出，所以我不想使用它。例如，当我使用 PyRun_String 时，命令行“2+2”将在标准输出上打印“4”，但在我使用 PyRun_SimpleString 时不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:16:45.120

我遇到了类似的问题，并通过在用户命令行之后使用 Py_Run_SimpleString 添加“\n”（回车）来解决它，如示例所示：

```
PyRun_String(line, Py_single_input, py_dict, py_dict);
PyRun_SimpleString("\n"); 
```

如果在 PyRun_String 的末尾添加“\n”，它将不起作用。它需要是对 PyRun_SimpleString 的单独调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:10:35.820

首先在文档中有这个`PyImport_AddModule`：

> 首先检查模块字典是否存在，如果没有，则创建一个新的并将其插入到模块字典中。返回 NULL 并在失败时设置异常。

您不会首先检查该模块是否已经在字典中。

在文档中`PyRun_String`有这样的：

> 返回作为 Python 对象执行代码的结果，如果引发异常，则返回 NULL。

你永远不会检查它是否成功。

您的代码中还缺少其他一些内容。我认为重点是你去**阅读文档**并确保你理解它所说的内容并编写检查错误条件等所需的代码......

# ruby-on-rails - 如何在 Gem 中获取 rails config.cache_store 配置？

> ID：12518437
> 
> 赞同：0
> 
> 时间：2012-09-20T18:13:47.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以，我正在开发我的第一个 gem，它需要与 rails 建立真正的联系。它需要知道 config.cache_store 中配置了什么。我如何获得这些信息？

关于它的更多背景知识：它是一个 memcached 管理器（仅与 Dalli gem 兼容，在它的第一个版本上），例如 resque-web for resque。我尝试阅读 resque 代码，但情况不同，因为它有一个初始化程序，并且 Redis 配置是从 yml 文件加载的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:37:25.297

config.cache_store 被加载到两个不同的地方：

```
Rails.cache
ActionController::Base.cache_store 
```

...它们都是 config.cache_store 的默认值，但可以选择单独配置。您应该能够根据在运行时确定缓存配置所需的内容来检查其中的一个/两个。

# html - 调整图像大小以适合 TD 的尺寸

> ID：12518441
> 
> 赞同：15
> 
> 时间：2012-09-20T18:14:15.760
> 
> 标签：html, css, internet-explorer-9

该表有 2 列 5 行；在每个单元格中，我放置了一个图像，并且我需要该图像以适合`td`尺寸。

这是我的 HTML 和 CSS 代码：

```
#menu{
        float:right;
        width:200px;
        height:650px;
        border-bottom:none;
        border-left:solid 1px;

}

#menu img{
        width:100%; height:auto;;
}

td{
  border:solid 1px;
}

<table id="menu" cellspacing="0">
<tr><td class="item"><img src="../mke.jpg"/></td><td class="item"><img src="../mke.jpg"/></td></tr>
<tr><td class="item"><img src="../mke.jpg"/></td><td class="item"><img src="../mke.jpg"/></td></tr>
<tr><td class="item"><img src="../mke.jpg"/></td><td class="item"><img src="../mke.jpg"/></td></tr>
<tr><td class="item"><img src="../mke.jpg"/></td><td class="item"><img src="../mke.jpg"/></td></tr>
</table> 
```

我得到的是这样的：

![在此处输入图像描述](../Images/dbdba06dbb0eb026b2232cc0ef81f874.png)

图像不适合所有单元格。

如何重新调整这些图像的大小？我需要一个适用于 IE9 的建议。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-20T18:27:21.910

只需将图像宽度设置为 100% 并将高度设置为自动以防止图像看起来失真

所以像

```
#menu img{
      display:block; width:100%; height:auto;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:18:35.867

如果您希望它完全适合，请使用`width:100%`and `height:100%`。

属性`max-width`并`max-height`没有**设置**元素的尺寸，它们**限制**了尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-14T18:53:25.013

字体大小和显示块

```
<td style="font-size:0px">
   <img src="IMG_URL" width="XXX" style="display:block;"> 
</td> 
```

# c# - 使用WinAPI在c#中发送组合键后如何制作虚拟键

> ID：12518443
> 
> 赞同：0
> 
> 时间：2012-09-20T18:14:25.760
> 
> 标签：c#, winapi, keyboard

我在 c# 中使用 winapi 发送组合键时遇到了奇怪的问题。我的目标是创建一个发送两个键的方法，fe SHIFT + HOME：

```
 private const int WM_KEYDOWN = 0x0100;
 private const int WM_KEYUP = 0x0101;

 [DllImport("user32.dll")]
 static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, UIntPtr dwExtraInfo);

 public static void SendKey(byte key1, byte key2)
 {
      //SHIFT down
      keybd_event(key1, 0, WM_KEYDOWN, UIntPtr.Zero);
      //press HOME
      keybd_event(key2, 0, WM_KEYDOWN, UIntPtr.Zero);
      keybd_event(key2, 0, WM_KEYUP, UIntPtr.Zero);
      //SHIFT up
      keybd_event(key1, 0, WM_KEYUP, UIntPtr.Zero);
 } 
```

问题是在方法完成执行后仍然按下 key1 (SHIFT)。换句话说，附加的方法调用将从上一次运行中按下的 SHIFT 开始。它看起来非常简单，但我找不到使它工作的解决方案。我查看了许多相关的 SO 问题并尝试了它们，但问题仍然存在。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:02:57.393

检查[`keybd_event`文档！](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)特别是第三个参数的标志。在您的代码中，您一直按每个键两次，也没有释放。

将您的窗口消息常量替换`KEYEVENTF_KEYUP (0x2)`为按下并简单地为零键。

此外，您可能想查看[.NETs`SendKeys`类。](http://msdn.microsoft.com/en-us/library/k3w7761b.aspx)

# c# - 在回调中使用 await

> ID：12518444
> 
> 赞同：1
> 
> 时间：2012-09-20T18:14:26.943
> 
> 标签：c#, asp.net-mvc, asynchronous, callback, websocket

我通过回调内部的 websocket 发送几条消息。问题是，如果一个发送未完成而另一个发送启动，则功能超出异常。由于`socket.SendAsync()`是异步的，我可以用`await`. 一旦我使用，`await`我将不得不将我的 lambda 表达式声明为`async`. 但是一旦我这样做，就永远不会调用回调。有谁知道为什么或对此有解决方案/解决方法？

示例代码：

```
queue.QueueCompleted += async (s, eA) =>
    {
        z = dr.Start + 1;
        while (z < (dr.Start + 1 + dr.Limit))
        {
            string path = AppDomain.CurrentDomain.BaseDirectory + @"DCM\" + dr.Code.Replace('.', '_') + @"\IMAGE" + z.ToString() + ".jpg";
            Image image = null;
            image = Image.FromFile(path);
            ImageConverter ic = new ImageConverter();
            byte[] buffer = (byte[])ic.ConvertTo(image, typeof(byte[]));
            try
            {
                if (socket != null && socket.State == WebSocketState.Open)
                {
                    Debug.WriteLine("REACHED");
                    await socket.SendAsync(new ArraySegment<byte>(buffer), WebSocketMessageType.Binary, true, CancellationToken.None);
                    image.Dispose();
                }
            }
            catch (Exception e)
            {
                image.Dispose();
                break;
            }
            z++;
        }
    }; 
```

回调很简单`EventHandler`，被称为`if(QueueCompleted != null) QueueCompleted(e, null);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:17:25.440

可能不是最有效的，但这是我用于内联异步代码的模式：

```
queue.QueueCompleted += (s, eA) =>
            {
                Task.Run(async ()=>{
                    //blah
                });
            }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:18:13.723

你可以试试

```
queue.QueueCompleted += (a, b) => { Task.Run(async ()=> { ....   });  }; 
```

链接：http: [//msdn.microsoft.com/en-us/library/hh195051.aspx](http://msdn.microsoft.com/en-us/library/hh195051.aspx)

# android - 为什么我们不应该将所有包含的 Android XML 布局包装在一个 一对？

> ID：12518446
> 
> 赞同：7
> 
> 时间：2012-09-20T18:14:27.357
> 
> 标签：android, android-layout, include, code-reuse

[作为这个问题](https://stackoverflow.com/q/8834898/403455)的后续，我想不出有什么好的理由不应该将每个包含的 XML 布局包装成一`<merge>`对。

这让我想知道，为什么 ADT 团队不将其设为默认行为？

有没有人不想要这种行为的情况？

顺便说一句，[Android 文档](http://developer.android.com/training/improving-layouts/reusing-layouts.html#Merge)中对`<merge>`标签的解释比最糟糕的法律协议中的措辞还要糟糕：

> 当在另一个布局中包含一个布局时，该`<merge />`标签有助于消除视图层次结构中的冗余视图组。例如，如果您的主布局是垂直`LinearLayout`的，其中两个连续的视图可以在多个布局中重复使用，那么放置两个视图的可重复使用的布局需要它自己的根视图。但是，使用另一个`LinearLayout`作为可重用布局的根会导致一个垂直`LinearLayout`内的一个垂直`LinearLayout`。嵌套`LinearLayout`除了降低您的 UI 性能之外没有任何实际用途。

罗曼，你在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T07:16:38.683

标签的主要目的`include`（我看到它的方式）是允许开发人员创建可重用的 xml 组件，以便在同一个活动或/和应用程序中的许多活动中多次使用。为了使该可重用组件真正有用，它需要是自包含的，并且尽可能减少外部连接。从我的角度来看，如果您要`merge`在每个包含的布局中使用标签，这将降低`include`标签的整体实用性。这是我认为会发生这种情况的一个例子：

考虑您想要实现一个可重用的`ActionBar`xml 组件以嵌入到您的每个活动中。它将包含水平放置的 a`TextView`和 a 。`Button`这样做的布局是：

**R.layout.actionbar**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/actionbar_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/actionbar_action"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

现在假设您的应用程序中有两个活动，一个是根视图`LinearLayout`（方向垂直），另一个是根视图`RelativeLayout`。上面的布局可以很容易地包含在`LinearLayout`（只要把它放在你想要的地方），同样可以使用`RelativeLayout`，当然考虑到当前元素`RelativeLayout`（请记住，你**必须**设置`layout_width/height`（例如，复制从包含的布局的根）为`include`标签，以便`layout_*`考虑其他属性）。

现在考虑你的提议。布局将变为：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <TextView
        android:id="@+id/actionbar_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/actionbar_action"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</merge> 
```

查看我们的`ActionBar`布局并不能告诉我们太多，您只需将 a`TextView`和 a`Button`包含在某处。现在考虑根是垂直方向的活动`LinearLayout`。`R.layout.actionbar`不能简单地包含布局，因为这会破坏我们的`ActionBar`，我们需要`LinearLayout`为我们的布局添加一个额外的（方向水平）以使其看起来符合要求。如您所见，您处于上述情况（没有`merge`标签的布局），但现在您必须记住将包含的布局包装在一个`LinearLayout`方向为水平的位置，而父根是一个`LinearLayout`方向为垂直的。

当根为 a 时，情况会变得更糟`RelativeLayout`，您不能简单地将`include`标签与`merge`a一起使用`RelativeLayout`（阅读[如何让 RelativeLayout 与合并和包含一起工作的好问题？](https://stackoverflow.com/questions/2316465/how-to-get-relativelayout-working-with-merge-and-include)）。再次，选项是嵌入`include`在`LinearLayout`没有标签的情况下`merge`（但现在添加的问题比解决的问题更多）。还阅读此链接[http://code.google.com/p/android/issues/detail?id=2863](http://code.google.com/p/android/issues/detail?id=2863)`include`的最后一部分可能会揭示该标签的其他错误。

从我上面的示例中可以看出，`merge`默认情况下使用标签可能会在某些情况下导致一些问题。此外，当前系统代表了一种更一致的布局方式（您可以为`include`标签创建布局，就像使用 root 创建普通布局一样`View`）。此外，`merge`标签是一种优化，我认为您不应该尝试优化，直到您开始看到一些性能问题（或者您真的想以复杂性为代价挤压每一次性能下降）。大多数应用程序在当前系统下都可以正常运行，具有大量视图的三四级深度布局可以在没有`merge`优化的情况下完全没有问题。

标签的另一个问题`merge`是，以膨胀为根的布局`merge` 需要在膨胀时将其自身附加到父级。如果要膨胀`R.layout.actionbar`布局，则必须将其附加到父级：

```
View actionBar = getLayoutInflater().inflate(R.layout.actionbar, root, true); 
```

我不知道这是否是一个真正的限制，也许在某些罕见的情况下它可能会破坏交易。

只是我对`include`-`merge`对使用的看法。

# javascript - JavaScript：在我的函数中避免全局变量

> ID：12518448
> 
> 赞同：0
> 
> 时间：2012-09-20T18:14:32.967
> 
> 标签：javascript

我试图了解可用于避免在 JavaScript 中使用全局变量的各种技术。

考虑以下代码，它在倒数计时器后执行重定向到 URL：

```
var _redirectTimer;
function startRedirectTimer() {
    clearTimeout(_redirectTimer);

    var redirectTimer = function(timeLeft) {
    if(timeLeft == 0) {
        // redirect to application path
        var redirectURL = window.location.protocol+"//"+window.location.host + "/" + location.pathname.split("/")[1];
        window.location.replace(redirectURL);
        return;
    } else {
        timeLeft--;
        _redirectTimer = setTimeout(function () {redirectTimer(timeLeft)}, 1000);
    }   
}   
redirectTimer(60); 
```

}

我的客户代码只调用过`startRedirectTimer()`. 但是，`_redirectTimer`是一个我宁愿不公开的全局变量。理想情况下，我希望这个变量成为 中的“状态”变量`startRedirectTimer()`，类似于在单例 Java 类中拥有私有方法的方式。有人可以建议我如何实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:35:22.813

好吧，解决变量的快速方法只是在有问题的部分周围包装一个额外的函数：

```
(function()
{//wrapper function
    var _redirectTimer;
    function startRedirectTimer()
    {
        clearTimeout(_redirectTimer);
        var redirectTimer = function(timeLeft) {
        if(timeLeft == 0)
        {
            // redirect to application path
            var redirectURL = window.location.protocol+"//"+window.location.host + "/" + location.pathname.split("/")[1];
            window.location.replace(redirectURL);
            return;
        }
        else
        {
            timeLeft--;
            _redirectTimer = setTimeout(function () {redirectTimer(timeLeft)}, 1000);
        }   
    }   
    redirectTimer(60);  
})();//call wrapper function 
```

与往常一样，您可以通过将超时函数公开给全局对象来选择何时调用超时函数。但是，如果我理解正确，您正在寻找一种方法以某种方式包含`_redirectTimer`或链接到`startRedirectTimer`函数（显然在每次调用后它不会丢失其状态）。这可以通过多种方式实现：

```
function startRedirectTimer()
{
    //as you would, only: add this line
    var _redirectTimer = startRedirectTimer._redirectTimer;
}
startRedirectTimer._redirectTimer;//functions are objects, so assign properties and methods at will 
```

这些属性和方法与函数一样存在，因此它们的值不会在每次调用后重置。缺点：它们是可公开访问的，并且可以意外重新定义。
闭包最适合这种情况：

```
var startRedirectTimer = (function()
{
    var _redirectTimer,timeLeft = 60;//initial value here
    var redirectURL = window.location.protocol+"//"+window.location.host + "/" + location.pathname.split("/")[1];//
    return function ()
    {
        clearTimeout(_redirectTimer);
        if (timeLeft === 0)
        {
            return window.location.replace(redirectURL);
        }
        timeLeft--;
        _redirectTimer = setTimeout(startRedirectTimer,1000);//just call the main function again
    }
})();//return value of this function will be the actual startRedirectTimer function 
```

要使用上面的代码进行设置，只需调用`startRedirectTimer()`一次，它应该可以工作。这是未经测试的代码，这个，我今天有点发烧，但它*应该*。IMO，更少的代码，更高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:18:26.630

您可以将其封闭在一个闭包中：

```
(function() {
    var _redirectTimer, redirectTimer;
    window.redirectTimer = redirectTimer = function() {
        // ......
    }
    redirectTimer(60);
})(); 
```

如果您不需要`redirectTimer`在此关闭之外，您可以删除该`window.redirectTimer =`部分。

# jquery - JQuery html() 函数无法与表一起正常工作

> ID：12518450
> 
> 赞同：0
> 
> 时间：2012-09-20T18:14:39.703
> 
> 标签：jquery, html-table

```
<script type="text/javascript">
    $(document).ready(function(){
        console.log($('#list_table_template').html());
    });
</script>

<div id="list_table_template" style="display: none;">
    <table id="list_table" cellpadding="0" cellspacing="0">
        <p>123</p>
        <tr id="lt_header">
            <!--#lt_header#-->
        </tr>
        <!--#lt_listing#-->
        <tr id="lt_footer">
            <td colspan="5">Footer Placeholder</td>
        </tr>
    </table>
</div> 
```

此代码未返回预期结果。

虽然我期待日志显示：

```
 <table id="list_table" cellpadding="0" cellspacing="0">
        <p>123</p>
        <tr id="lt_header">
            <!--#lt_header#-->
        </tr>
        <!--#lt_listing#-->
        <tr id="lt_footer">
            <td colspan="5">Footer Placeholder</td>
        </tr>
    </table> 
```

但它给了我：

```
<p>123</p><table id="list_table" cellpadding="0" cellspacing="0">

    <tbody><tr id="lt_header">
        <!--#lt_header#-->
    </tr>
    <!--#lt_listing#-->
    <tr id="lt_footer">
        <td colspan="5">Footer Placeholder</td>
    </tr>
</tbody></table> 
```

注意p标签乱了，跳到表格前面了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T18:16:04.087

`<th>`除非段落位于or`<td>`标记内，否则不能将段落嵌套在表格内。它是无效的 HTML，因此您的浏览器将其重新定位到表格之外，而 jQuery 只能读取浏览器已解析的内容。

最好的解决方案可能是将 替换为`p`，[`caption`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption)这是有效的 HTML。但是，如果您希望段落出现在表格内，则需要先将其包装在`<tr><td>`...中`</td></tr>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:24:40.883

您的浏览器无法`<p>`解析`<table>`. 因此，它将被解析。

# mysql - 从表中获取所选日期每个月的结果集

> ID：12518452
> 
> 赞同：0
> 
> 时间：2012-09-20T18:14:52.897
> 
> 标签：mysql, sql

如何从表格中获取所选日期每个月的结果集？例如：我希望从表中获取一个结果集，以了解某个特定日期的每个月何时发生事件（假设每个月的 10 日）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:17:08.657

使用 DAY() 函数

```
SELECT *
FROM   your_table
WHERE  DAY(your_field) = 10 
```

# python - facebook应用程序填充错误

> ID：12518457
> 
> 赞同：1
> 
> 时间：2012-09-20T18:15:08.317
> 
> 标签：python, facebook, padding

我已经在 facebook 上的应用程序上创建，但我面临填充问题。问题如下。

```
 Traceback (most recent call last):
  File "/app/lib/python2.7/site-packages/flask/app.py", line 1306, in __call__
    return self.wsgi_app(environ, start_response)
  File "/app/lib/python2.7/site-packages/flask/app.py", line 1294, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/app/lib/python2.7/site-packages/flask/app.py", line 1292, in wsgi_app
    response = self.full_dispatch_request()
  File "/app/lib/python2.7/site-packages/flask/app.py", line 1062, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/app/lib/python2.7/site-packages/flask/app.py", line 1060, in full_dispatch_request
    rv = self.dispatch_request()
  File "/app/lib/python2.7/site-packages/flask/app.py", line 1047, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/app/exampleapp.py", line 167, in index
    access_token = get_token()
  File "/app/exampleapp.py", line 134, in get_token
    data = json.loads(urlsafe_b64decode(str(encoded_data[1])))
  File "/usr/local/lib/python2.7/base64.py", line 112, in urlsafe_b64decode
    """
  File "/usr/local/lib/python2.7/base64.py", line 76, in b64decode

TypeError: Incorrect padding 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:23:34.790

你能用 pdb 告诉我们 exampleapp.py 第 134 行中的 encoded_data[1] 是什么吗？

这只是 base64 编码的一些问题，可能是一些必须使用 .strip() 去除的空格（我会尝试）。但如果没有看到它的价值，就很难猜到。（对不起，这是评论而不是答案，但我还不能评论）。

# php - 棘手的 gotHtml 无法加载内容

> ID：12518458
> 
> 赞同：0
> 
> 时间：2012-09-20T18:15:09.463
> 
> 标签：php, javascript, html

我有一个出色的“gotHtml”代码，可以在我的 php 页面中为我提供其他 php 页面的内容。但是当我想从“index.php”中调用这些“href”而不是“service.php”时，我无法加载页面和内容，有什么想法吗？

```
/here is the php part
<p id="serv-tabs">
<a href="#serv/acse">Accounting Services</a><br/>
<a href="#serv/compA">Company Administration</a><br/>
 ........
 ........</p>

<div id="serv-content"> 
.....
</div>

/here is the script
$(document).ready(function() {
$("#serv-tabs a").click(function() {
    var page= this.hash.substr(1);
    $.get(page+".php",function(gotHtml) {
        $("#serv-content").html(gotHtml);
    });
    return false;
});}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:19:28.003

你不能`substr()`在那里使用，你应该分割你的页面名称`/`并使用第二个值：

```
$(document).ready(function() {
    $("#serv-tabs a").click(function() {
        var page = this.hash.split('/');
        $.get(page[1]+".php",function(gotHtml) {
            $("#serv-content").html(gotHtml);
        });
        return false;
    });
}); 
```

我猜您正在`service.php`使用相同的原则加载，在这种情况下，您应该重新初始化绑定以绑定对新元素的点击：

```
function reBind(element, content){
    $("#"+element+" a").click(function() {
        var page = this.hash.split('/');
        $.get(page[1]+".php",function(gotHtml) {
            $("#"+content).html(gotHtml);
        });
        return false;
    });
}

$(document).ready(function() {
    $("#page-tabs a").click(function() { // assuming your service.php is called in same way like subpages in services are called, I've added page-tabs as main pages
        var page = this.hash.split('/');
        $.get(page[1]+".php",function(gotHtml) {
            $("#page-content").html(gotHtml);
        }).success(function(){
            if(page[1] == 'service'){
                reBind('serv-tabs', 'serv-content');
            }
        });
        return false;
    });
}); 
```

# c - GCC - memcpy 自动复制空字符？

> ID：12518463
> 
> 赞同：3
> 
> 时间：2012-09-20T18:15:41.840
> 
> 标签：c, gcc

来自[cplusplus.com](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)关于`memcpy`：“该函数不检查源中的任何终止空字符 - 它总是精确复制 num 个字节。”

所以下面的代码应该给出一个运行时错误，不是吗？

```
char str1[20] = "";
char str2[20] = "Another Text---";

memcpy(str1, str2, strlen(str2));
printf("%s\n%s", str1, str2); 
```

但是我总是用我的 gcc 编译器从这段代码中得到正确的输出。这是否意味着 memcpy 实际上从末尾复制空字符，`str2`或者它只是一个随机情况？

**编辑：**我得到与 相同的行为`str1[20] = "A"`，因为一些答案指出`str1[20] = ""`正在用所有 NULL 字符初始化字符串。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T18:20:40.637

谜题中的关键成分是初始化器`""`。这等同于：

```
char str1[20] = { 0 }; 
```

这又与（至少在 GCC 中，并且始终在 C++ 中）相同：

```
char str1[20] = { }; 
```

或者

```
char str1[20] = { 0, 0, 0, ..., 0 };   // 20 times 
```

所有这些初始化程序都将数组初始化为包含 20 个零。

该`memcpy`调用不会*复制*空终止符（因为`strlen`不计算它），但目标数组首先被正确清零，所以一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:17:40.257

memcpy 正在将 strlen(str2) （但这并不意味着将空字节复制）字节从 str2 复制到 str1。由于 str1 中有足够的空间容纳这么多字节，因此它可以工作。*memcpy完全*按照它所说的复制内存。

如果您尝试将超过 20 的任何内容从一个复制到另一个，则会出现错误。您也不应该在任一变量中存储超过 19 个字符。

正如 kerrek 解释的那样，它还可以帮助您将 str1 初始化为空值，因为在这种特定情况下您不必担心空值终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:19:11.863

您已经告诉它复制 strlen(str2) 字符数，这恰好是字符串的长度（空索引）。

它与使用 strcpy() 相同。它想说的是，如果您*需要*复制 NULL，您可以使用 memcpy，因为 strcpy() 将在它找到的第一个 null 处停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:27:54.800

**用大于**`str1`的字符串初始化并再试一次，你会看到它是如何不复制空值的。你只是幸运的是零填充。我更改了代码以显示输出对内容的依赖性： **`str2``str1``str1`**

 **```
#include <stdio.h>
#include <string.h>

int main()
{
    char str1[20] = "xxxxxxxxxxxxxxxxxxx";
    char str2[20] = "Another Text---";

    memcpy(str1, str2, strlen(str2));
    printf("%s\n%s", str1, str2);

    return 0;
} 
```

输出将是：

```
Another Text---xxxx
Another Text--- 
```**

# mysql - MYSQL 将表的存储引擎从 INNODB 更改为 MISAM

> ID：12518469
> 
> 赞同：1
> 
> 时间：2012-09-20T18:15:51.933
> 
> 标签：mysql, phpmyadmin

我在一个表中有大约 1000 万条数据记录（innodb 作为存储）。当我执行大量编辑、插入和添加时，我通常会超过最大锁定数。在阅读了一些帮助提示后，我想将表格转换为 MyISAM，看看是否会有一些改进。

但是当我尝试在 phpmyadmin 中将存储类型从 innodb 更改为 myisam 时，出现“超出锁数错误”

1.  改成myIsam好不好？
2.  我使用什么程序来避免获得“最大编号”。锁超出错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:20:13.723

更改为 MyISAM 可能是一个非常糟糕的主意。您将失去事务支持并且数据库不会被记录，这意味着崩溃很容易损坏它而无法恢复。

您可以调整服务器的锁定超时参数，以延长操作完成时间。对于批处理操作，这是必不可少的。这是`innodb_lock_wait_timeout`您可以手动调整或在 中设置的配置参数`my.cnf`。这通常非常低，通常为 50 秒，因此除非更改此设置，否则许多大型操作将失败。

您还应该注意删除任何不是严格要求的索引，因为这可能是很多延迟的根源。`SHOW TABLE STATUS`将让您了解与您的表相关联的索引空间。较大的索引维护成本更高，尤其是在进行批量插入时。

# java - OSX glassfish 在 netbeans 中使用 malloc 崩溃

> ID：12518473
> 
> 赞同：1
> 
> 时间：2012-09-20T18:16:04.713
> 
> 标签：java, macos, netbeans, glassfish, malloc

有没有其他人看到这个错误（或它的一些变体）？

> java(575,0x1086b4000) malloc: *** 对象 0x10869fa71 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

从 OSX（10.8.2）中的 netbeans 7.2 启动 glassfish（或 tomcat）时，我得到了这个。

我正在使用 java 1.7 update 7（也发生在 update 4 中）。

# mysql - SQL 使用今天的日期计算任务的状态

> ID：12518474
> 
> 赞同：3
> 
> 时间：2012-09-20T18:16:06.740
> 
> 标签：mysql, sql

我将如何编写使用今天的日期并计算任务状态的 SQL 语句。

我认为这应该返回：

```
1 = complete task (status = completed)
2 = pending task (in the future and not status=completed) 
3 = overdue task (in the past and set to pending) 
```

表 SQL：

```
CREATE TABLE IF NOT EXISTS `tasks` (
  `task_id` int(10) NOT NULL AUTO_INCREMENT,
  `task_date` date DEFAULT NULL,
  `task_status` enum('pending','approved','complete','cancelled') NOT NULL
  PRIMARY KEY (`task_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:03:10.937

如果这只是关于使用动态计算的`'overdue'`状态扩展预定义的状态集，那么只有一个条件的 CASE 表达式就足够了：

```
SELECT
  ...
  CASE
    WHEN task_status = 'pending' AND task_date > CURDATE()
    THEN 'overdue'
    ELSE task_status
  END AS task_status,
  ...
FROM tasks
WHERE
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:25:43.340

这些行中的一些东西：

```
SELECT 
    CASE 
        WHEN task_status = 'complete' THEN 'Complete Task'
        WHEN status != 'complete' AND task_date > NOW() THEN 'Pending Task'
        WHEN status = 'pending' AND task_date < NOW() THEN 'Overdue Task'
FROM 
    tasks 
```

`NOW()`如果需要，需要用 MySQL 等效替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:35:33.827

我会使用以下内容：

```
SELECT task_id, task_date, 
  CASE 
    WHEN task_status = 'complete' THEN 'completed task'
    WHEN task_status != 'complete' AND task_date > CURDATE() THEN 'pending task'
    WHEN 
      (task_status != 'complete' AND task_date <= CURDATE()) 
      OR (task_status = 'pending') THEN 'pending task'
  END AS task_status_str
FROM 
  tasks 
```

# css - DDMenu：使子菜单中的项目可见

> ID：12518484
> 
> 赞同：0
> 
> 时间：2012-09-20T18:17:12.257
> 
> 标签：css, drop-down-menu

我正在尝试在我的网站中放置一个基于 HTML/CSS/Javascript 的下拉菜单。我在网上找到了一个很棒的图书馆“ddmenu”。我能够破解 *.css 文件来获取菜单，主要是在我想要的位置。

我的问题是当我将鼠标悬停在帮助上时，我无法显示 ABC > 帮助子菜单链接。

我不太了解 CSS，我发现 ddmenu.css 令人困惑。

有什么想法可以解决这个问题吗？

所有相关文件都粘贴在下面

非常感谢史蒂夫

**我的 menu.html 文件**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
     <title>Menu Experiment</title>
     <style type="text/css">
        .nav_user_menu
        {
            float: right;
            color: black;
            text-decoration: none;
            font-weight:bold; 
        }
    </style>
    <link rel="StyleSheet" href="search_files/ddmenu.css" type="text/css">
    <script language="JavaScript" "text="" javascript"="" src="search_files/ddmenu.js"></script>
</head>

    <body>

            <ul id="ddmenu">

                <li>
                    <a href="#">ACME</a>
                </li>

                <li>
                    <a href="#">ABC</a>
                    <ul>
                        <li><a href="#">Add Staff</a></li>
                        <li><a href="#">Search Profiles Celeberties Yo</a></li>
                        <li>
                            <a href="#">Help</a>
                                <ul>
                                    <li><a href="#">Personal HELP </a></li>
                                    <li><a href="#">National HELP </a></li>
                                    <li><a href="#">Global HELP</a></li>
                                </ul>
                        </li>
                     </ul>
                </li>    

            </ul>

</body>
</html> 
```

**ddmenu.css 文件：**

```
/* ---------------------------------------------
Keyboard accessible dropdown menu
Author:Adriana Palazova
Version:22 February 2009
last rev.: 19 October 2009
gratitude to Matthew Carroll - http://carroll.org.uk/sandbox/suckerfish/bones2.html
and
Alan Gresley and Duncan Hill - http://css-class.com/articles/ursidae/
------------------------------------------------ */
#ddmenu {font: bold 10pt Arial,Helvetica;border: 2px solid gray;}

/*#ddmenu a:link {text-decoration:none}*/

/*#ddmenu a:visited {text-decoration:none}*/

#ddmenu a:hover, #ddmenu a:focus, #ddmenu a:active {text-decoration:underline}

/* --- TOP LEVEL MENU STYLES --- */
#ddmenu li{list-style-type:none;}

#ddmenu 
{
    float:left; 
    display:inline; 
    width:100%; 
    padding:0; 
    background:#fff0ca; /*#414141;*/
}

#ddmenu li 
{
    position:relative; 
    float:left; 
    /*border-right:1px solid /*#fff; */
    background:#fff0ca;/*#414141; */
    font-weight:bold

}

#ddmenu li a 
{
    display:block; 
    white-space: nowrap;
    /*width:7em; */
    padding:5px 0.7em 7px;
    border: 1px solid gray;
    border-top: 0px;
    border-bottom:0px;
    /*border-style:solid;
    border-width:1px;*/
    /*border-width:1px 1px 0; 
    border-style:solid; */
    /*border-color:#3e8ebe #0b3965 #003 #3e8ebe;*/
    /*color:#fff*/
}

/* --- SUB MENU ITEMS --- */

#ddmenu li li 
{
    border:0 none; 
    font-weight:normal; 
    z-index:20
} /* no width here because of IE */

#ddmenu li li a 
{
    /*width:11em; */
    padding:5px 0.5em 7px; 
    border-width:1px
} 

#ddmenu ul > li 
{
    display:block; 
    float:none;
    text-align:left;

} /* for Opera */

/* --- SUB MENU FIRST LEVEL INITIAL POSITION --- */  

#ddmenu ul 
{
    position:absolute; 
    left:-9999px; 
    top:100%; 
    /*width:12em; */
    padding:0; 
    border:1px solid #003

}

/*for modern browsers:*/
#ddmenu li > ul  
{
    top:auto; 
    width:auto
}

/*see the conditional comments for IE7*/

/* --- SHOW FIRST LEVEL SUB MENU --- */

/*For ie6:*/
#ddmenu li.sfhover ul,
#ddmenu li a:active ul,
#ddmenu li.sffocusparent ul,
#ddmenu li a.sffocus ul {left:0}

/* for modern browsers + IE7:*/
#ddmenu li:hover > ul,
#ddmenu li.sfhover > ul,
#ddmenu li.sffocusparent > ul,
#ddmenu li a:active > ul,
#ddmenu li a:focus + ul,
#ddmenu li a.sffocus + ul {left:auto}

/* --- SUB MENU SECOND LEVEL and following levels UNHOVERED POSITION --- */  

#ddmenu li:hover ul ul,
#ddmenu li:active ul ul,
#ddmenu a:focus ul ul,
#ddmenu li.sfhover ul ul,
#ddmenu a.sffocus ul ul,
#ddmenu li.sffocusparent ul ul,
#ddmenu li.sffocus ul ul {left:-9999px}

/* --- SHOW SECOND LEVEL SUB MENU --- */

/* For ie6: */
#ddmenu ul li a:hover ul, #ddmenu ul li.sfhover ul,
#ddmenu ul li a:active ul,
#ddmenu ul li.sffocusparent ul,
#ddmenu ul li.sffocus ul {margin-left:12em; top:-1px; left:1px}

/* for modern browsers + IE7: */
#ddmenu ul li:hover > ul,
#ddmenu ul li.sfhover > ul,
#ddmenu li li a.sffocus + ul,
#ddmenu li li.sffocus > ul {margin-left:12em; top:-1px; left:1px}

/* --- SUB LEVEL positions for JavaScript  OFF - thanks http://css-class.com/articles/ursidae/ --- */ 

/* --- The focus position for submenu anchors --- */
#ddmenu.jsoff li li a:focus, #ddmenu.jsoff li li a:active { /* --- THE FOCUS POSITION FOR FIRST SUB MENU ANCHORS --- */
    position:relative;
    left:9999px;
    top:-1px;
    z-index:21;
}
#ddmenu.jsoff li li li a:focus, #ddmenu.jsoff li li li a:active { /* --- THE FOCUS POSITION FOR SECOND SUB MENU ANCHORS --- */
    left:19999px;
    margin-left:12em;
    top:-2.9em;
}

/* --- The hovered position for submenu anchors when the anchor is in focus --- */
#ddmenu.jsoff li:hover li a:focus, #ddmenu.jsoff li:hover li a:active { 
    position:relative; left:auto; top:-1px; margin-left:0}

#ddmenu.jsoff li:hover a:focus + ul { /* --- THE POSITION OF FIRST LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED AND HOVERED --- */
    margin-left:0px;
}
#ddmenu.jsoff li li a:focus + ul { /* --- THE POSITION OF SECOND LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED FOR JavaScript  OFF --- */
    top:-1px;
    left:12em;
    margin-left:10000px;
}
#ddmenu.jsoff li:hover li a:focus + ul { /* --- THE POSITION OF SECOND LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED AND HOVERED --- */
    left:12em;
    margin-left:1px;
}

/* --- BACKGROUND IMAGES OF PARENT ITEMS --- */

#ddmenu li a.mum {
  BACKGROUND: url(../images/down.gif);
  background-repeat: no-repeat;
  background-position: 95% 50%;
}
#ddmenu ul li a.mum 
{
    BACKGROUND: url(../images/right.gif);
}

/* --- LINK HOVER STYLES --- */

#ddmenu li a:link, #ddmenu li a:visited  {background-color:transparent}
#ddmenu li a:hover, #ddmenu li:hover a, #ddmenu li a:focus, #ddmenu li a:active, 
#ddmenu li.sfhover a, #ddmenu li a.sffocus, #ddmenu li.sffocusparent a {background-color:#fff0ca/*#135*/}/* top level background hover color */

#ddmenu li li a:link, #ddmenu li li a:visited  {background-color:transparent}
#ddmenu ul li a:hover, #ddmenu ul li:hover a, #ddmenu ul li a:focus, #ddmenu ul li a:active, 
#ddmenu ul li.sfhover a, #ddmenu ul li a.sffocus, #ddmenu ul li.sffocusparent a {background-color:blue;color:#fff0ca;}

#ddmenu li li li a:link, #ddmenu li li li a:visited  {background-color:transparent} 
#ddmenu li li li a:hover, #ddmenu li li li:hover a, #ddmenu li li li a:focus, #ddmenu li li li a:active, 
#ddmenu li li li.sfhover a, #ddmenu li li li a.sffocus, #ddmenu li li li.sffocusparent a {background-color:blue;color:#fff0ca;} /*{background-color:#135}*/

/* <!--[if IE 7]> */

#ddmenu li > ul  {top:100%}

#ddmenu a
{
    background: url(../images/down.gif) no-repeat -95% -50%;
}

#ddmenu ul li:hover > ul, #ddmenu ul li.sfhover > ul, 
#ddmenu li li a.sffocus + ul, #ddmenu ul li.sffocusparent > ul {left:0} 
```

**ddmenu.js 文件：**

```
var menuID = 'ddmenu';
/* --- gratitude to Matthew Carroll - http://carroll.org.uk/ - http://carroll.org.uk/sandbox/suckerfish/bones2.html
  based on http://www.htmldog.com/articles/suckerfish/dropdowns/ --- */
function accessible_menus_ie() {
  var sfEls = document.getElementById(menuID).getElementsByTagName('LI');
  for (var i=0; i<sfEls.length; i++) {
    sfEls[i].onmouseover=function() {
      this.className+=(this.className.length>0? ' ': '') + 'sfhover';
      this.parentNode.className+=(this.parentNode.className.length>0? ' ': '') + 'sfhover';
    }
    sfEls[i].onmouseout=function() {
      this.className=this.className.replace(new RegExp('( ?|^)sfhover\\b'), '');
      this.parentNode.className=this.parentNode.className.replace(new RegExp('( ?|^)sfhover\\b'), '');
    }
  }
}
function accessible_menus() {
  var ddMenu = document.getElementById(menuID);
  ddMenu.className = ddMenu.className.replace(new RegExp('(^|\\s)jsoff(\\s|$)'), '');
  var mcEls = document.getElementById(menuID).getElementsByTagName('A');
  for (var i=0; i<mcEls.length; i++) {
    mcEls[i].onfocus=function() {
      this.className = this.className ? this.className + ' sffocus' : 'sffocus'; //a:focus
      this.parentNode.className = this.parentNode.className ? this.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < a:focus
      this.parentNode.parentNode.className = this.parentNode.parentNode.className ? this.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < a:focus
      if(this.parentNode.parentNode.parentNode.nodeName == 'LI') { //li < ul < li < a:focus
        this.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < ul < li < a:focus
        this.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < ul < li < a:focus
        if(this.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == 'LI') {  //li < ul < li < ul < li < a:focus
          this.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < ul < li < ul < li < a:focus
          this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className ?this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < ul < li < ul < li < a:focus
        }
      }
    }
    mcEls[i].onblur = function() {
      this.className = this.className.replace(new RegExp('(^|\\s)'+'sffocus'+'(\\s|$)'), '');
      this.parentNode.className = this.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
      this.parentNode.parentNode.className = this.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
      if(this.parentNode.parentNode.parentNode.nodeName == 'LI') {
        this.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
        this.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
        if(this.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == 'LI') {
          this.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
          this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');

        }
      }
    }
  }
}

// only ie needs the sfHover script. all need the accessibility script...

// thanks Brothercake - Generic onload - GO1.1 - http://www.brothercake.com/site/resources/scripts/onload/
if(typeof window.addEventListener != 'undefined') { //.. gecko, safari, konqueror and standard
    window.addEventListener('load', accessible_menus, false);}
else if(typeof document.addEventListener != 'undefined') { //.. opera
    document.addEventListener('load', accessible_menus, false);}
else if(typeof window.attachEvent != 'undefined') { //.. win/ie
    window.attachEvent('onload', accessible_menus_ie);
    window.attachEvent('onload', accessible_menus);}
//** remove this condition to degrade older browsers
else {  //.. mac/ie5 and anything else that gets this far
  if(typeof window.onload == 'function') { //if there's an existing onload function
    var existing = window.onload; //store it
    window.onload = function() { //add new onload handler
      existing(); //call existing onload function
      //call generic onload function
      accessible_menus_ie();
      accessible_menus();
    };
  } else {
    window.onload = function() { //setup onload function
      accessible_menus_ie();
      accessible_menus();
    };  
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:49:43.273

更新小提琴：http: [//jsfiddle.net/ar9TU/3/](http://jsfiddle.net/ar9TU/3/)

二级菜单（第一个下拉菜单）项目的链接悬停样式覆盖了三级菜单（第二个下拉菜单）的链接颜色，因为二级菜单的 CSS 选择器包括：

```
#ddmenu ul li a:hover, #ddmenu ul li:hover a, #ddmenu ul li a:focus, #ddmenu ul li a:active, 
#ddmenu ul li.sfhover a, #ddmenu ul li a.sffocus, #ddmenu ul li.sffocusparent a {background-color:blue;color:#fff0ca;} 
```

特别要注意这部分：

```
#ddmenu li li li:hover a 
```

它说“在当前处于该状态`a`的元素的子元素的所有元素上设置以下属性”（因为它们是 的后代）。这包括*所有*后代元素，包括那些可能在任何子菜单中的元素......因此出现了问题。`li``hover``li:hover``#ddmenu li li`*`a`*

 *有两种方法可以修复它：如果您不需要 IE6 支持，您可以将上面的内容更改为“直接子”选择器 ( `>`)，如下所示：

```
#ddmenu li li li:hover > a 
```

以便它仅将颜色应用于作为悬停`a`元素的*直接子*`li`元素的元素。

或者，您可以显式设置第三级子菜单`color`中所有元素的属性，如下所示：`a`

```
#ddmenu li li li a:link, #ddmenu li li li a:visited  {background-color:transparent; color: #00f;} 
```

（CSS 规则已经在原始代码中；我只是添加了`color`分配。）

那里选择器的增加的[特异性](http://css-tricks.com/specifics-on-css-specificity/)（因为它`li`列出了更多元素）将覆盖父菜单的`:hover`选择器，将锚颜色设置回蓝色。*

# android - 虚拟键盘出现时如何让页面内容不上滑 - Android / PhoneGap

> ID：12518487
> 
> 赞同：2
> 
> 时间：2012-09-20T18:17:20.670
> 
> 标签：android, cordova, keyboard, slide

我有这行... android:windowSoftInputMode="adjustPan" ...在我的 AndroidManifest.xml 中解决以下问题： 1\. 虚拟键盘已打开 2\. 页面向上滑动 3\. 虚拟键盘已关闭 4.页面不会再次向下滑动 <- 问题

AndroidManifest.xml 中的新行已经解决了上述问题，但给了我一个新问题……现在页面内容随着键盘的出现/隐藏而向上/向下滑动——这是我不想要的。

我怎样才能使页面内容始终保持原样，以便键盘有效地滑过内容而不是将内容向上推？

# css - Code Igniter 简单的基本 url css

> ID：12518488
> 
> 赞同：1
> 
> 时间：2012-09-20T18:17:23.653
> 
> 标签：css, codeigniter, url, helper

我想将我的外部 css 连接到页面中。放置的css `C:\wamp\www\QBCI\Style\syle.css`，我正在使用自动加载助手`$autoload['helper'] = array("html","form","url");`

所以，我这样写css连接器`<link href="<?php echo base_url(); ?>Style/style.css" type="text/css" rel="stylesheet" />`，现在这里是视图

```
<html>
<head>
    <link href="<?php echo base_url(); ?>style/style.css" type="text/css" 
rel="stylesheet" />
</head>

<body>

    <div class ="header">
        http://localhost/QBCI/  //i was echoing base_url() 
    </div>

    <div class ="content">

    </div>

</body> 
```

最后，这是我在 config.php 的基本网址 `$config['base_url'] = 'http://localhost/QBCI';`

![结构](../Images/055cae5aad4792d8ec49e04b2cad12a6.png)

为什么 style.css 没有加载？我做错了什么 ？

解决了，我制作了css文件“syle.css”而不是“style.css”对不起各位，谢谢大家的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:24:57.407

尝试

```
<link href="<?php echo base_url('style/style.css'); ?>" type="text/css" rel="stylesheet" /> 
```

确保您的`.htaccess`作品和`style/`目录位于正确的位置（大多数情况下与**index.php位于同一文件夹中）。**

当您使用子文件夹 ( *QBCI* ) 时，请确保将它放在`.htaccess`重写路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:26:50.930

您需要在值中添加一个斜杠`base_url`：

```
$config['base_url'] = 'http://localhost/QBCI/'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:21:16.710

你确定`$config['base_url'] = '';`在你的`config/config.php`?

此外，文档建议您将`base_url`路径传递给函数而不是连接它，它不应该有那么大的区别，但是.. [http://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-07T17:35:15.530

您的文件位于 Style/syle.css 而不是 style.css 您必须重命名文件，因为您在

# css - 两个div之间莫名其妙的空格

> ID：12518491
> 
> 赞同：2
> 
> 时间：2012-09-20T18:17:26.303
> 
> 标签：css, html

问题是第 4 和第 5 div 之间的空格，可以在这里看到： [JSFiddle.1](http://jsfiddle.net/Sm2xs/)

如果我结合第一个和最后一个 div，这个空间就会消失： [JSFiddle.2](http://jsfiddle.net/MHQGj/)

这种行为的原因可能是什么？

**更新：** ![这个](../Images/79e559ef9f25c73052e3f112cf025342.png) 它*应该*是什么样子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:39:35.720

出于对飞行意大利面怪物的喜爱，*请正确格式化您的代码！*

在任何情况下，你`inline-block`的 s 不工作的原因是因为你没有`font-size: 0;`在他们的容器上设置。

[这是您更新的 jsFiddle。](http://jsfiddle.net/jezen/Sm2xs/3/)

这是您的代码的一个更漂亮的版本：

**HTML**

```
<div id="listLeft">
    <div id="Left" class="pluginAdd">
        <p>left</p>
    </div>
</div>

<div id="listMiddle">
    <div id="Middle" class="pluginAdd">
        <p>middle</p>
    </div>
</div>

<div id="listRight">
    <div id="Right" class="pluginAdd">
        <p>right</p>
    </div>
</div>

<div id="listBottom">
    <div id="Bottom" class="pluginAdd">
    </div>
</div>
​ 
```

**CSS**

```
body {font-size: 0;}

.pluginAdd {
    background-color: #ffd800;
    width: 70px;
    height: 15px;
    margin: 0 auto;
    display: block;
    font-size: 12px;
    background: url('/Images/pluginAdd.png') no-repeat center;
} 

#listTop {background: #b6ff00; width:100%; margin:0 auto; display:block;}
#listLeft {background: #4cff00; width:25%;  margin:0 auto; display:inline-block;}
#listMiddle {background: #00ff21; width:50%;  margin:0 auto; display:inline-block;}
#listRight {background: #00ff90; width:25%;  margin:0 auto; display:inline-block;}
#listBottom {background-color: #0ff; width:100%; margin:0 auto; display:block;}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:22:18.763

这是由`line-height`大于`inline-block`元素的高度引起的。

要修复，`line-height:1px`请在元素的容器上设置。如果这些元素中有文本，则可能需要`line-height: 1.2em`在元素本身上添加（默认）。

# database - 使用 rownum 的 Oracle 查看性能

> ID：12518494
> 
> 赞同：5
> 
> 时间：2012-09-20T18:17:34.853
> 
> 标签：database, performance, oracle, view, rownum

我正在使用 Oracle 10g，并且我有一个连接两个大表（数百万条记录）的视图。我正在尝试为用户选择有限的“样本”数据，如下所示：

```
select * from VIEW_NAME where ROWNUM < 5; 
```

它很慢，我认为不应该，因为我只需要几行结果，所以Oracle不应该计算全连接。

要求是用户应该能够以交互方式指定返回的行数（结果中的哪些行并不重要）。有什么办法可以做到这一点？（使用 rownum 或使用其他方法）

（我可以更改视图定义或最终 SQL 的构建方式，但据我所知，我无法将有关所需行数的信息动态传递给视图）

编辑：视图定义非常简单，如下所示：

```
CREATE OR REPLACE VIEW VIEW_NAME AS
(
    select
    e.id as ID,
    e.somefield as something,
    ... (some similar selects from e)
    c.field as anotherthing,
   ... (lots of other fields from c)
    from SCHEMA.TABLE1 e
    inner join SCHEMA.TABLE2 c on e.key = c.key
) 
```

解释计划提到了两个表的全表访问，这并不奇怪，因为只返回前几行应该不会花费很长时间。

EDIT2：这是完整的计划

```
SQL> select * from table(dbms_xplan.display);

PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 2644394598

----------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                 | Name        | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |    TQ  |IN-OUT| PQ Distrib |
----------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT          |             |     4 |  1252 |       | 43546   (1)| 00:08:43 |       |       |        |      |            |
|*  1 |  COUNT STOPKEY            |             |       |       |       |            |          |       |       |        |      |            |
|   2 |   PX COORDINATOR          |             |       |       |       |            |          |       |       |        |      |            |
|   3 |    PX SEND QC (RANDOM)    | :TQ10002    |   696K|   207M|       | 43546   (1)| 00:08:43 |       |       |  Q1,02 | P->S | QC (RAND)  |
|*  4 |     COUNT STOPKEY         |             |       |       |       |            |          |       |       |  Q1,02 | PCWC |            |
|*  5 |      HASH JOIN BUFFERED   |             |   696K|   207M|    49M| 43546   (1)| 00:08:43 |       |       |  Q1,02 | PCWP |            |

PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------------------------------------------------------------------------
|   6 |       BUFFER SORT         |             |       |       |       |            |          |       |       |  Q1,02 | PCWC |            |
|   7 |        PX RECEIVE         |             |   696K|    90M|       |  5137   (1)| 00:01:02 |       |       |  Q1,02 | PCWP |            |
|   8 |         PX SEND HASH      | :TQ10000    |   696K|    90M|       |  5137   (1)| 00:01:02 |       |       |        | S->P | HASH       |
|   9 |          TABLE ACCESS FULL| TABLE1      |   696K|    90M|       |  5137   (1)| 00:01:02 |       |       |        |      |            |
|  10 |       PX RECEIVE          |             |   892K|   149M|       |  5260   (1)| 00:01:04 |       |       |  Q1,02 | PCWP |            |
|  11 |        PX SEND HASH       | :TQ10001    |   892K|   149M|       |  5260   (1)| 00:01:04 |       |       |  Q1,01 | P->P | HASH       |
|  12 |         PX BLOCK ITERATOR |             |   892K|   149M|       |  5260   (1)| 00:01:04 |     1 |   140 |  Q1,01 | PCWC |            |
|  13 |          TABLE ACCESS FULL| TABLE2      |   892K|   149M|       |  5260   (1)| 00:01:04 |     1 |   140 |  Q1,01 | PCWP |            |
----------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):

PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------

   1 - filter(ROWNUM<5)
   4 - filter(ROWNUM<5)
   5 - access("E"."KEY"="C"."KEY")

27 rows selected. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:56:32.940

`/*+ NOPARALLEL */`根据 GuiGi 的回答，我会看到提示的作用。要尝试的另一件事是查看为此生成的计划：

```
select /*+ FIRST_ROWS(10)*/ * from VIEW_NAME where ROWNUM < 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T23:33:11.077

您可以尝试向查询添加 NOPARALLEL 提示。

```
select /*+ NOPARALLEL */ * from VIEW_NAME where ROWNUM < 5; 
```

这是一种选择并行执行但可能不利于性能的情况，因为它会使用更多的 CPU 和 I/O。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T23:49:07.810

你有连接索引吗（索引嵌套循环应该是优化器选择的访问路径）？尝试禁用 hash_join（与 sort_merge_join 一起）以查看替代平面的成本是多少，如果您看到普通的嵌套循环，那么优化器由于某种原因忽略了索引。

在使用视图内联视图定义调整查询时，请尝试提示您想要的访问路径。当您发现魔术提示（例如基数）时，有时可以将它们移到外部查询块中（对于以后的 oracle 版本尤其如此）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T14:56:04.060

你也可以试试：

```
select * FROM 
(SELECT rownum ROW_NUMBER, YOUR_VIEW.* FROM  YOUR_VIEW) 
WHERE ROW_NUMBER> 2 
```

# php - 写在页面中间

> ID：12518495
> 
> 赞同：-2
> 
> 时间：2012-09-20T18:17:36.610
> 
> 标签：php, css, wordpress, paging

我使用以下代码在页面底部的中间写入页码。但是这些代码将在页面底部而不是中间显示页码。

```
 <?php
if($GLOBALS['wp_query']->max_num_pages > 1){
echo '<div>';
get_paged_navigation();
echo '</div>';
}
?> 
```

另外，如果可能的话，请告诉我如何在页脚的顶部写下它，因为它显示了页脚的底部。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:29:22.797

设置 div 的宽度，并使用 'margin:auto' 将其置于页面中心

```
echo '<div style="width:500px;margin:auto;">';
get_paged_navigation();
echo '</div>'; 
```

# java - 绘制图形直方图

> ID：12518496
> 
> 赞同：3
> 
> 时间：2012-09-20T18:17:37.610
> 
> 标签：java, histogram

我正在做一个项目，我想显示一个看起来像条形图的单线直方图，除了条形图中的每条线代表一个像素及其灰度值。

我有一个充满灰度值的数组，我只需要将它们放入此直方图中并让它显示代表值的线条..有点像这样

```
IMAGE             [minimize][maximize][close]

    picture                histogram

                          I
   (Loaded Picture)       I       I
                          I  I    I
                          I  I  I I  

[open][save] 
```

下面是加载数组的代码......我只需要获取一些将使用这些灰度值并将它们表示为像上面一样的条形的代码。

```
 public void showImage(File fileName) {
        Scanner scan;
        try {
            scan = new Scanner(fileName);
            typefile = scan.next();
            iname = scan.next();       
            width = scan.nextInt();
            height = scan.nextInt();
            maxshade = scan.nextInt();
            array = new int[width][height];

            for(int r = 0; r < array.length; r++){
                for(int c = 0; c < array[r].length; c++){
                    array[r][c] = scan.nextInt();                       

            imageArray = array;         
            repaint();                  

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

 } 
```

我知道我必须做类似...

```
 int hist[] = new int[256];
     for (int r = 0; r < array.length; r++)
            for (int c = 0; c < array[r].length; c++)
                hist[array[r][c]]++; 
```

但我不知道从那里去哪里或如何绘制我的图表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T20:06:27.363

就像是

![在此处输入图像描述](../Images/2aa2aa5443c59e057ce376e888bbf3dc.png)

也许？？

就个人而言，我仍然会使用[JFreeChart 之](http://www.jfree.org/jfreechart/)类的东西，但这是一个有趣的小练习......

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Rectangle2D;
import java.util.Map;
import java.util.TreeMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class TestHisogram {
//http://stackoverflow.com/a/12520104/714968

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestHisogram();
            }
        });
    }

    public TestHisogram() {
        // For this example, I just randomised some data, you would
        // Need to load it yourself...
        int width = 256;
        int height = 256;
        int[][] data = new int[width][height];
        for (int c = 0; c < height; c++) {
            for (int r = 0; r < width; r++) {
                data[c][r] = (int) (256 * Math.random());
            }
        }
        Map<Integer, Integer> mapHistory = new TreeMap<Integer, Integer>();
        for (int c = 0; c < data.length; c++) {
            for (int r = 0; r < data[c].length; r++) {
                int value = data[c][r];
                int amount = 0;
                if (mapHistory.containsKey(value)) {
                    amount = mapHistory.get(value);
                    amount++;
                } else {
                    amount = 1;
                }
                mapHistory.put(value, amount);
            }
        }
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(new JScrollPane(new Graph(mapHistory)));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    protected class Graph extends JPanel {

        protected static final int MIN_BAR_WIDTH = 4;
        private Map<Integer, Integer> mapHistory;

        public Graph(Map<Integer, Integer> mapHistory) {
            this.mapHistory = mapHistory;
            int width = (mapHistory.size() * MIN_BAR_WIDTH) + 11;
            Dimension minSize = new Dimension(width, 128);
            Dimension prefSize = new Dimension(width, 256);
            setMinimumSize(minSize);
            setPreferredSize(prefSize);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (mapHistory != null) {
                int xOffset = 5;
                int yOffset = 5;
                int width = getWidth() - 1 - (xOffset * 2);
                int height = getHeight() - 1 - (yOffset * 2);
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setColor(Color.DARK_GRAY);
                g2d.drawRect(xOffset, yOffset, width, height);
                int barWidth = Math.max(MIN_BAR_WIDTH,
                        (int) Math.floor((float) width
                        / (float) mapHistory.size()));
                System.out.println("width = " + width + "; size = "
                        + mapHistory.size() + "; barWidth = " + barWidth);
                int maxValue = 0;
                for (Integer key : mapHistory.keySet()) {
                    int value = mapHistory.get(key);
                    maxValue = Math.max(maxValue, value);
                }
                int xPos = xOffset;
                for (Integer key : mapHistory.keySet()) {
                    int value = mapHistory.get(key);
                    int barHeight = Math.round(((float) value
                            / (float) maxValue) * height);
                    g2d.setColor(new Color(key, key, key));
                    int yPos = height + yOffset - barHeight;
//Rectangle bar = new Rectangle(xPos, yPos, barWidth, barHeight);
                    Rectangle2D bar = new Rectangle2D.Float(
                            xPos, yPos, barWidth, barHeight);
                    g2d.fill(bar);
                    g2d.setColor(Color.DARK_GRAY);
                    g2d.draw(bar);
                    xPos += barWidth;
                }
                g2d.dispose();
            }
        }
    }
} 
```

# python - pip ignores dependency_links in setup.py

> ID：12518499
> 
> 赞同：80
> 
> 时间：2012-09-20T18:17:42.387
> 
> 标签：python, pip, setuptools, distutils, easy-install

I have dependency_links in my setup.py:

```
...
dependency_links = ['http://github.com/robot-republic/python-s3/tarball/master.tar.gz#egg=python-s3'],
... 
```

But it doesn't work. However install_requires works fine. Maybe there are another method to set up git repo as required for setup.py?

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-27T15:40:20.647

[This answer](https://stackoverflow.com/questions/3472430/how-can-i-make-setuptools-install-a-package-thats-not-on-pypi) should help. In a nutshell, you need to specify the version (or "dev") for the `#egg=python-s3` so it looks like `#egg=python-s3-1.0.0`.

Updates based on @Cerin's comment:

*   Pip 1.5.x has a flag to enable dependency-links processing: [`--process-dependency-links`](https://pip.pypa.io/en/stable/reference/pip_install/#cmdoption-process-dependency-links). I haven't tested it because I agree with the point below.
*   [This discussion](https://groups.google.com/forum/#!topic/pypa-dev/tJ6HHPQpyJ4) seems to indicate that using dependency-links for pip is a bad practice. Although this feature was enlisted for deprecation, it's not anymore. There's a valid use case for private packages.

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2019-01-16T11:30:56.127

since pip version 18.1 [PEP 508 URL](https://www.python.org/dev/peps/pep-0508/) is supported. That means you don't need the deprecated dependency_links anymore. You write the dependency directly in the install_requires list instead. The example from @Chad looks like this:

```
setup(
    name='yourpackage',
    version='1.7.5',
    packages=[],
    url='',
    license='',
    author='',
    author_email='',
    description='',
    install_requires=[
        'somepackage==1.2.0',
        'repo @ https://github.com/user/archive/master.zip#egg=repo-1.0.0',
        'anotherpackage==4.2.1'
    ],
) 
```

To install your package you can simply write:

```
pip install yourpackage 
```

(without --process-dependency-links)

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2016-06-26T21:58:09.180

I realize this is an old question, but, just in case you find yourself here like I did, this is what worked for me.

I've got a package on GitHub (not registered with pypi) that relies on other GitHub (non-pypi) packages. I spent an inordinate amount of time trying to figure out how to get pip to handle this correctly. I will include what I did to fix it here.

Putting dependencies in a requirements.txt file is the preferred method of listing dependencies. However, you also need to populate install_requires in setup. It was at this stage that I ran into a roadblock with pip not wanting to install dependencies from GitHub.

Most places, including answers to this question, tell you to populate the dependency_links section of setup. **However, you also need to populate the install_requires field with the name of the package referenced in dependency_links.**

For example, if your requirements.txt contains the following.

```
somepackage==1.2.0
https://github.com/user/repo/tarball/master#egg=repo-1.0.0
anotherpackage==4.2.1 
```

Then, your setup call should look like this:

```
setup(
    name='yourpackage',
    version='1.7.5',
    packages=[],
    url='',
    license='',
    author='',
    author_email='',
    description='',
    install_requires=[
        'somepackage==1.2.0',
        'repo==1.0.0',
        'anotherpackage==4.2.1'
    ],
    dependency_links=[
        'https://github.com/user/repo/tarball/master#egg=repo-1.0.0'
    ]
) 
```

Ok, so now we've got our package configured; installing it is the next task. This is where I spent a lot of time. I could not figure out why specifying dependency_links apparently did nothing. The trick is that in some cases, you need to set the allow-all-external (can be more specific) flag for pip. For example:

```
pip install git+https://github.com/user/anotherrepo.git
--process-dependency-links --allow-all-external 
```

You're done and it works!

DISCLAIMER: dependency_links and the flags process-dependency-links and allow-all-external are deprecated, so they will be removed soon. In the time I spent, I could not locate a better, prefered method and still have pip function properly.

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-08-31T16:50:39.103

A couple of notes on some issues I found, in particular for installing from private repos.

Installing from pip & setuptools have some subtle differences; but this way should work for both.

```
from setuptools import setup
import os
# get deploy key from https://help.github.com/articles/git-automation-with-oauth-tokens/
github_token = os.environ['GITHUB_TOKEN']

setup(
    # ...
    install_requires='package',
    dependency_links = [
    'git+https://{github_token}@github.com/user/{package}.git/@{version}#egg={package}-0'
        .format(github_token=github_token, package=package, version=master)
        ] 
```

A couple of notes here:

*   For private repos, you need to authenticate with GitHub; the simplest way I found is to create an oauth token, drop that into your environment, and then include it with the URL
*   You need to include *some* version number (here is `0`) at the end of the link, even if there's no package on PyPI. This has to be a actual number, not a word.
*   You need to preface with `git+` to tell setuptools it's to clone the repo, rather than pointing at a zip / tarball
*   `version` can be a branch, a tag, or a commit hash
*   You need to supply `--process-dependency-links` if installing from pip

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-06-17T16:40:44.817

First upgrade your pip version as this is a new syntax.

```
pip install pip --upgrade 
```

Then do the following:

```
install_requires=[
    'bleualign-git @ https://github.com/rsennrich/Bleualign/archive/<commit-hash or branch-name>.zip#egg=bleualign-git-1.0.0'
] 
```

*   Version 1.0.0 and name "bluealign-git" are randomly chosen.
*   The version number is necessary.
*   We advisedly used the name "bleualign-git" to distinguish it from the main repository version.

Hope this helps.

Comments:

Good answer (upvoted). Also want to mention that the actual result would likely depend on the platform and/or pip version, though. I've seen [when it works](https://travis-ci.org/AzureAD/microsoft-authentication-extensions-for-python/jobs/556986485#L142-L143), or [seemingly works but did not really pull the dependency from the specified link](https://travis-ci.org/AzureAD/microsoft-authentication-extensions-for-python/jobs/556986481#L509-L511), or simply [being rejected](https://travis-ci.org/AzureAD/microsoft-authentication-extensions-for-python/jobs/556986482#L494). So I would probably just use this as a short time workaround only. Stick with the mainstream way whenever possible.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-09T02:58:41.090

None of the above solutions worked for me in their respective explicit forms. I am adding this as another solution for certain specific cases. OP has a tarball in their remote repo, but I ended up here for a related case: only source code in the remote repo.

I have a dependency that is a remote private repository on Azure DevOps. I would like to use `pip` to install a local python package and also automatically install the remote dependency. The remote repository is a python package with a `setup.py` and some source code. The repo doesn't have build artifacts like eggs/wheels/tarballs, just `.py` files. I am able to manually install the remote dependency with `pip install git+https://...`, hence I suspected correctly that the remote repository doesn't *need* to contain eggs/wheels/tarballs.

Here is the relevant line of my `setup.py` file

```
setup.py

...

install_requires=["packagename @ git+https://dev.azure.com/.../_git/packagename"] 
```

# ruby-on-rails - Rails 中的 flash 消息一直保留到下一个网页

> ID：12518500
> 
> 赞同：3
> 
> 时间：2012-09-20T18:17:48.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies, ruby-on-rails-3.2, flash-message

当我在控制器中使用 rails 的`redirect_to`方法并将`notice`消息传递给它时，一切正常。该通知显示在重定向到的页面的顶部，然后在访问下一页时消失。

但是，如果我改为设置一条 flash 消息，然后简单地呈现一个页面，则会显示 flash 消息，但它***也会显示在下一个访问的页面上***：

```
flash[:alert] = 'Please fix mistakes outlined in red'
render action: 'show' 
```

如何不在访问的下一页上显示警报消息。我**只**希望呈现此页面上显示的警报消息。

使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T18:24:11.483

使用[`now`方法](http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-now)：

```
flash.now[:alert] = 'Please fix mistakes outlined in red' 
```

# batch-file - 批处理脚本获取远程文件的最后修改日期

> ID：12518501
> 
> 赞同：0
> 
> 时间：2012-09-20T18:17:58.703
> 
> 标签：batch-file

我正在尝试运行一个批处理脚本来查找特定文件的最后修改日期。我正在使用类似于以下脚本的内容：

```
@echo off

set mainDir=\\subdomain.myintranet.net\c$
set txtFile=%mainDir%\tmp.txt
set txtFile2=%mainDir%\tmp2.txt
set "bodyText=^<p^>Hello,^<br /^>^<br /^>"

if exist %txtFile% (
    for %%X in (%txtFile%) do (set fileDate=%%~tX)
    set "bodyText=%bodyText%tmp.txt file updated as of %fileDate%^<br /^>"
) else (
    set "bodyText=%bodyText%Warning: Issues finding %txtFile%.^<br /^>"
)

if exist %txtFile2% (
    for %%X in (%txtFile2%) do (set fileDate2=%%~tX)
    set "bodyText=%bodyText%tmp2.txt file updated as of %fileDate2%^<br /^>"
) else (
    set "bodyText=%bodyText%Warning: Issues finding %txtFile2%.^<br /^>"
)

set "bodyText=%bodyText%^</p^>"

echo %bodyText% > %mainDir%\mylog.txt 
```

测试这个示例代码，我发现它有时有效，有时无效。发生的事情是找到文件，但`fileDate`变量返回空白。

我也尝试`fileDate=`在脚本的开头放置一个空变量，但这不起作用。

如果重要：我将批处理脚本连接到每天运行的 SQL Server 2000 作业。批处理文件和日志文件与数据库驻留在同一台服务器上，但是批处理脚本完全限定了我在示例中显示的文件位置（这是因为如果我想从我的桌面运行批处理文件，它将检查/更新正确的文件）。

在此先感谢，约瑟夫

**编辑：**

输出应如下所示：

```
Hello,

tmp.txt file updated as of 9/19/2012 2:24 PM 
tmp2.txt file updated as of 9/19/2012 10:02 AM 
```

而我有时得到的是：

```
Hello,

tmp.txt file updated as of 
tmp2.txt file updated as of 
```

其他时候我可能会得到：

```
Hello,

tmp.txt file updated as of 9/19/2012 2:24 PM 
tmp2.txt file updated as of 
```

弄清楚出了什么问题是令人困惑的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:38:31.410

呻吟...

这一定是 Windows 批处理开发中最常见的错误。您正在尝试扩展在同一代码块中设置的变量。但是当整个代码块被解析时，变量会被扩展，所以你得到的是在代码块被执行之前存在的值。这显然是行不通的。

在命令提示符下键入`HELP SET`或`SET /?`并阅读处理延迟扩展的部分。这向您展示了解决问题的一种方法。

但在你的情况下，你根本不需要变量，所以你不需要延迟扩展。当您附加到 bodyText 时，只需直接使用 FOR 变量：

```
@echo off

set mainDir=\\subdomain.myintranet.net\c$
set txtFile=%mainDir%\tmp.txt
set txtFile2=%mainDir%\tmp2.txt
set "bodyText=^<p^>Hello,^<br /^>^<br /^>"

if exist %txtFile% (
    for %%X in (%txtFile%) do set "bodyText=%bodyText%tmp.txt file updated as of %%~tX^<br /^>"
) else (
    set "bodyText=%bodyText%Warning: Issues finding %txtFile%.^<br /^>"
)

if exist %txtFile2% (
    for %%X in (%txtFile2%) do set "bodyText=%bodyText%tmp2.txt file updated as of %%~tX^<br /^>"
) else (
    set "bodyText=%bodyText%Warning: Issues finding %txtFile2%.^<br /^>"
)

set "bodyText=%bodyText%^</p^>"

echo %bodyText% > %mainDir%\mylog.txt 
```

**编辑**

有更多的简化空间，应该使代码更容易维护。由于您正在准备 HTML 文件，因此无需担心额外的换行符，因此您不必将所有文本放入一个变量中。您可以使用多个 ECHO 语句。我会将您的代码构造如下（未经测试，但概念是合理的）：

```
@echo off
setlocal
set "mainDir=\\subdomain.myintranet.net\c$"
set "br=^<br /^>"
set "p=^<p^>"
set "/p=^</p^>"
>"%mainDir%\mylog.txt" (
  echo %p%Hello,%br%%br%"
  for %%F in (
    "%mainDir%\tmp.txt"
    "%mainDir%\tmp2.txt"
  ) do (
    if exist %%F (
      echo %%~nxF file updated as of %%~tF%br%"
    ) else (
      echo Warning: Issues finding %%~nxF.%br%"
    )
  echo %/p%
) 
```

# asp.net-mvc - 调用 $.get() Telerik MVC3 Grid 时的 .ClientTemplate 问题

> ID：12518503
> 
> 赞同：1
> 
> 时间：2012-09-20T18:18:02.513
> 
> 标签：asp.net-mvc, jquery, telerik-grid

所以，最终意图是拥有一个标准化的网格。这意味着我想存储一个 ID，但在主网格中显示该值（作为文本字段，而不是组合框）。

所以我尝试使用 .ClientTemplate 来解决这个问题。我的 Grid 是 AJAX 绑定的，给我留下了客户端模板：

```
columns.Bound(fs => fs.ID2).ClientTemplate("<#= fixId(ID2) #>") 
```

和一个 Javascript 调用：

```
function fixId(e) {
    var idValue= "ears";
    $.get("/controller/_Action", { Id: e }, function (data) {
        idValue= data;
    });
    return idValue;
} 
```

但是该值永远不会设置为数据返回结果（即 JSON），并且我验证它是正确的数据，因为我可以执行警报（数据），这就是我想要的。

我猜这是因为它是一个双 AJAX 调用，但我不知道有什么办法解决这个问题。

我尝试将它放在 onDataBound 或 onRowDataBound 之类的 clientEvents 上。如果网格有数据，则可以使用，但在添加新数据时会引发 Javascript 错误。以及减慢电网的加载时间。

任何帮助都会很棒！谢谢 ：）

# javascript - 播放框架解析错误。不支持的语法：CONST

> ID：12518504
> 
> 赞同：2
> 
> 时间：2012-09-20T18:18:05.033
> 
> 标签：javascript, playframework, constants

在 Play Framework 2 项目中，如果我有任何带有这样简单语句的 javascript 代码：

```
const num = 3; 
```

我得到错误：
解析错误。不支持的语法：CONST

我看到 Play Framework 有一个 Javascript 编译器，并且据我所知，它会自动缩小您的 javascript，但真的不支持 consts 吗？它是基本的语言语法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:22:14.343

`const`在 JavaScript 中为将来保留；你不能使用它。

[JavaScript 保留字](http://javascript.about.com/library/blreserved.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:50:30.353

> 请注意，虽然“const”被 ECMAScript 规范保留为未来的关键字，但 Mozilla 和大多数其他浏览器将其作为非标准扩展实现，可能会在未来版本的 ECMAScript 中标准化。

[来源](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

如果你真的希望它是不可编辑的（**我不推荐**这样做），你可以使用 getter 和 setter：

```
window.__defineGetter__('num', function () {
    return 3;
});

window.__defineSetter__('num', function () {
    // nada, it's a constant
}); 
```

[http://jsfiddle.net/tp2HU/](http://jsfiddle.net/tp2HU/)

# youtube - 使用 OAuth2 进行身份验证时删除 YouTube 收藏夹

> ID：12518505
> 
> 赞同：0
> 
> 时间：2012-09-20T18:18:08.000
> 
> 标签：youtube, oauth-2.0, gdata, favorite

我正在尝试使用 YouTube API 删除收藏夹。由于 Google 最近弃用了 AuthSub 身份验证方法，我决定选择官方推荐的 OAuth2 身份验证方法。

我可以将视频设置为收藏，但是当我尝试使用[文档中描述的方法](https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites#Deleting_a_favorite_video)删除它时，响应是：

```
Only the favorite owner can remove it. 
```

我正在使用[Google OAuth2 Playground](https://developers.google.com/oauthplayground/)，并且可以将视频设置为收藏夹，因此我非常确定身份验证没有错误，但仍然无法正常工作。

我提出的要求如下：

```
DELETE /feeds/api/users/default/favorites/nq3gs6PG8-E HTTP/1.1
Host: gdata.youtube.com
X-gdata-key: key=DEVELOPER_KEY
Content-length: 0
Authorization: OAuth ACCESS_TOKEN
----------------------------------------
HTTP/1.1 403 Forbidden
Content-length: 38
X-xss-protection: 1; mode=block
X-content-type-options: nosniff
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Reason: Forbidden
Via: HTTP/1.1 GWA
X-gdata-user-country: US
Cache-control: private, max-age=0
Date: Thu, 20 Sep 2012 17:53:19 GMT
X-frame-options: SAMEORIGIN
Content-type: text/html; charset=UTF-8
Expires: Thu, 20 Sep 2012 17:53:19 GMT

Only the favorite owner can remove it. 
```

我确实将“nq3gs6PG8-E”视频设置为收藏，我的 DEVELOPER_KEY 和 ACCESS_TOKEN 是正确的。

我想知道是否有修复，或者我错过了什么？我不想回滚已弃用的身份验证方法，那不安全，但我有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:33:00.940

请参阅[https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites#Deleting_a_favorite_video](https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites#Deleting_a_favorite_video)

具体来说，这个注释：

> 您用于删除收藏视频的 ID 不是该视频的 ID，而是一个不同的值，用于将该视频与将其标记为收藏的用户唯一关联。要删除收藏的视频，请始终将 DELETE 请求发送到收藏的视频供稿为视频指定的编辑 URL。

# django - request.POST.get('sth') vs request.POST['sth'] - 区别？

> ID：12518517
> 
> 赞同：92
> 
> 时间：2012-09-20T18:18:38.717
> 
> 标签：django

和有什么区别

```
request.POST.get('sth') 
```

和

```
request.POST['sth'] 
```

没有找到类似的问题，两者对我来说都是一样的，假设我可以单独使用它们，但也许我错了，这就是我问的原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-09-20T18:20:03.540

`request.POST['sth']``KeyError`如果`'sth'`不在`request.POST`. _

`request.POST.get('sth')``None`如果`'sth'`不在，将返回`request.POST`。

此外，`.get`允许您提供默认值的附加参数，如果键不在字典中，则返回该参数。例如，`request.POST.get('sth', 'mydefaultvalue')`

这是任何 python 字典的行为，并不特定于`request.POST`.

* * *

## 这两个片段在功能上是相同的：

**第一个片段：**

```
try:
    x = request.POST['sth']
except KeyError:
    x = None 
```

**第二个片段：**

```
x = request.POST.get('sth') 
```

* * *

## 这两个片段在功能上是相同的：

**第一个片段：**

```
try:
    x = request.POST['sth']
except KeyError:
    x = -1 
```

**第二个片段：**

```
x = request.POST.get('sth', -1) 
```

* * *

## 这两个片段在功能上是相同的：

**第一个片段：**

```
if 'sth' in request.POST:
    x = request.POST['sth']
else:
    x = -1 
```

**第二个片段：**

```
x = request.POST.get('sth', -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-04T06:40:57.337

**Request.POST 示例**

```
req.POST['name_your_desired_field'] 
```

如果 'name_your_desired_field' 不在 req.POST 中，这将引发 KeyError 异常。

```
request.POST.get('name_your_desired_field') 
```

如果 'name_your_desired_field' 不在 req.POST 中，这将返回 None。

虽然，.get 允许您提供默认值的附加参数，如果键不在字典中，则返回该参数。例如，

```
req.POST.get('name_your_desired_field', 'your_default_value') 
```

这是任何 python 字典的行为，并不特定于 req.POST

**请求.GET 示例**

```
request.GET.get('name_your_desired_field') 
```

如果 'name_your_desired_field' 不在 req.GET 中，这将返回 None。

尽管如此， .get 允许您提供默认值的附加参数，如果键不在字典中，则返回该参数。例如，

```
req.GET.get('name_your_desired_field', 'your_default_value') 
```

这是任何 python 字典的行为，并不特定于 req.GET

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-03T17:37:39.797

普通字典访问和使用 .get() 访问它的主要区别在于

使用类似的东西 `request.POST['sth']`会出现一个关键错误是如果 ket 'sth' 不存在。但是使用 get() 方法字典也会为您提供更好的错误处理

```
request.POST.get('sth') 
```

将返回 none 是键 'sth 不存在' 并且通过将第二个参数提供给 get() 将返回它作为默认值。

```
data = request.POST.get('sth','my_default_value') 
```

如果 'sth' 键不存在，数据中的值将为`my_default_value`. 这就是使用 get() 方法优于普通字典访问的优势。

# android - Android Sqlite关于排序的查询

> ID：12518520
> 
> 赞同：0
> 
> 时间：2012-09-20T18:18:43.600
> 
> 标签：android, sqlite, android-sqlite

我根据部门对员工进行排序的查询是这样的

```
public Cursor fetchDept(String dept)throws SQLException
{
Cursor c=mDb.query(DATABASE_TABLE, new String[] {KEY_NAME,KEY_DESGN,KEY_PHONE}, KEY_DEPT + "=" ,new String[]{dept}, null, null, null, KEY_DEPT);
if (c!= null) {
    c.moveToFirst();
}
return c; 
```

}

我已经像这样将活动类的值传递给这个查询

```
 {
        db.open();
        Cursor c=db.fetchDept(dept);

        if (c!= null) {
            c.moveToFirst();
            do
            {
            if(dept.equals(c.getString(3)))
            {

        Toast.makeText(this,"found",Toast.LENGTH_LONG).show();
        return;
            }
            //c.getString(1) +c.getString(2)+ c.getString(4)
            else
            {
                Toast.makeText(this,"No dept",Toast.LENGTH_LONG).show();
                return ;
            }
            }while(c.moveToNext());
        } 
```

运行此应用程序时会强制关闭。如果有人可以帮忙，请帮忙！上面的传递参数和调用 db.query 是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:23:59.837

你还没有发布 LogCat，但有一些事情让我很震惊：

**首先，**如果您使用的是`whereArgs`参数，则需要使用`?`替换字符：

```
Cursor c=mDb.query(DATABASE_TABLE, new String[] {KEY_NAME,KEY_DESGN,KEY_PHONE},
        KEY_DEPT + "=?", new String[]{dept}, null, null, null, KEY_DEPT);
// You forgot this:  ^ 
```

（次要观点：您只要求一个`KEY_DEPT`，因此对结果进行排序`KEY_DEPT`是无效的。）

**其次，**您要的是*第四*列：

```
dept.equals(c.getString(3)) 
```

但是您的光标只有三列：

```
new String[] {KEY_NAME,KEY_DESGN,KEY_PHONE}
//  Columns:     0    ,   1     ,   2     ,  no column 3 
```

**第三，** [SQLiteDatabase#query()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)将始终返回一个光标。此 Cursor 可能为*空*，但不会`null`。此外，您的查询仅返回`KEY_DEPT`equals的结果`dept`，因此您无需再次检查...请尝试以下代码：

```
db.open();
Cursor c=db.fetchDept(dept);

// Check any rows that were returned
if(c.getCount() > 0) {
    Toast.makeText(this,"found "+c.getCount()+" matches",Toast.LENGTH_LONG).show();
    while (c.moveToNext()) {
        // Do something extra with each result
    }
}
// The Cursor is empty (No departments does not exist with the name in dept) 
else {
    Toast.makeText(this,"No dept",Toast.LENGTH_LONG).show();
} 
```

（完成后不要忘记关闭光标和数据库！）

# amazon-s3 - Amazon S3 将目录复制到另一个目录

> ID：12518524
> 
> 赞同：20
> 
> 时间：2012-09-20T18:18:58.640
> 
> 标签：amazon-s3, directory, amazon, move

如何使用 PHP API 将包含子文件夹和文件的文件夹复制/复制到 S3 存储桶中的另一个目录中？

`$s3->copy_object`只复制文件夹，而不复制里面的文件和子文件夹。

我是否必须使用`$s3->list_objects`来获取所有文件和目录并`$s3->copy_object`在每个文件/目录上运行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T02:16:50.993

S3 不是文件系统，它是对象存储。文件夹实际上并不存在于任何有形的意义上。文件夹只是您可以称为共享前缀的东西。换句话说，如果你创建`path/to/one`and `path/to/two`，它也不会导致`path`and`path/to`存在。如果您看到它们，那是因为某些组件获取了一个对象列表，将它们的键拆分为`/`，并决定将该列表显示为层次结构。

您想“将一个文件夹复制到另一个文件夹中”。将其重新表述为 S3 术语，您希望“将具有相同前缀的所有对象复制到具有不同前缀的对象中”。这么说使方法变得清晰：获取带有一个前缀的对象列表，然后复制它们中的每一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-10T16:58:42.433

scala 的代码（在一个存储桶中的文件夹之间复制）：

```
def copyFolders(bucketName: String, srcFolder: String, targetFolder: String): Unit = {
import scala.collection.JavaConversions._
val transferManager: TransferManager = TransferManagerBuilder.standard.build
try {

  for (file <- s3.listObjects(bucketName, s"$srcFolder/").getObjectSummaries) {
    val fileName = file.getKey.replace(s"$srcFolder/", "")
    if (!fileName.isEmpty) {
      val transferProcess: Copy = transferManager.copy(bucketName, file.getKey,
        bucketName, s"$targetFolder/$fileName")
      log.info(s"Old key = ${file.getKey}")
      log.info(s"New file Key = $targetFolder/$fileName")
      transferProcess.waitForCompletion()
    }
  }
} catch {
  case e: AmazonServiceException =>
    log.error(e.getErrorMessage, e)
    System.exit(1)
  case e: AmazonClientException =>
    log.error("Amazon client error: " + e.getMessage, e)
    System.exit(1)
  case e: InterruptedException =>
    log.error("Transfer interrupted: " + e.getMessage, e)
    System.exit(1)
}
} 
```

用法：

```
copyFolders("mybucket", "somefolder/srcfolder", "somefolder/targetfolder") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T20:18:17.350

这是从亚马逊获取的一些代码。此代码将项目 a 三次复制到目标，您需要做的是更改它，以便它循环遍历每个键并将其添加到批处理中。

```
<?php

// Include the AWS SDK using the Composer autoloader.
require 'vendor/autoload.php';

use Aws\S3\S3Client;

$sourceBucket = '*** Your Source Bucket Name ***';
$sourceKeyname = '*** Your Source Object Key ***';
$targetBucket = '*** Your Target Bucket Name ***';

// Instantiate the client.
$s3 = S3Client::factory();

// Copy an object.
$s3->copyObject(array(
    'Bucket'     => $targetBucket,
    'Key'        => "{$sourceKeyname}-copy",
    'CopySource' => "{$sourceBucket}/{$sourceKeyname}",
));

// Perform a batch of CopyObject operations.
$batch = array();
for ($i = 1; $i <= 3; $i++) {
    $batch[] = $s3->getCommand('CopyObject', array(
        'Bucket'     => $targetBucket,
        'Key'        => "{$sourceKeyname}-copy-{$i}",
        'CopySource' => "{$sourceBucket}/{$sourceKeyname}",
    ));
}
try {
    $successful = $s3->execute($batch);
    $failed = array();
} catch (\Guzzle\Service\Exception\CommandTransferException $e) {
    $successful = $e->getSuccessfulCommands();
    $failed = $e->getFailedCommands();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T00:00:07.943

一种方法是使用列表对象并逐个移动每个对象。另一种方法是使用 s3fuse，它将您的 s3 存储桶作为本地目录，然后您可以应用简单的命令（如“mv”）来移动文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-15T13:01:09.010

对于那些使用 aws sdk 寻找 java 解决方案的人：

```
public static void copyAllFilesWithPrefix(AmazonS3 s3Client,
                                          String srcBucket,
                                          String srcPrefix,
                                          String destBucket,
                                          String destPrefix) {
    ObjectListing objectListing = s3Client.listObjects(srcBucket, srcPrefix);
    for (S3ObjectSummary objectSummary : objectListing.getObjectSummaries()) {
        S3Object srcFile = s3Client.getObject(srcBucket, objectSummary.getKey());
        String destKey = srcFile.getKey().replace(srcPrefix, destPrefix);
        if (!s3Client.doesObjectExist(destBucket, destKey)) {
            copyFile(s3Client, srcFile, destBucket, srcFile.getKey().replace(srcPrefix, destPrefix));
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-19T21:03:03.597

使用`@aws-sdk/client-s3`，这里是完整的 js 代码：

```
import {
    S3Client,
    CopyObjectCommandInput,
    CopyObjectCommand,
    ListObjectsCommandInput,
    ListObjectsCommand
} from '@aws-sdk/client-s3';

const s3Client = new S3Client({ region: 'us-east-1' });

const listS3Objects = async (input: ListObjectsCommandInput) => {
     const command = new ListObjectsCommand(input);
     return await s3Client.send(command);
}

const copyS3Object = async (input: any) => {
    const command = new CopyObjectCommand(input);
    return await s3Client.send(command);
};

export const copyFolder = async (fromBucket:string, fromFolderKey:string, toBucket:string, toFolderKey: any) => {

try {
    const listObjectsResponse = await listS3Objects({
        Bucket: fromBucket,
        Prefix: `${fromFolderKey}/`
    })

    const fromObjectKeys = listObjectsResponse.Contents.map(content => content.Key)

    for (let fromObjectKey of fromObjectKeys) {
        const toObjectKey = fromObjectKey.replace(fromFolderKey, toFolderKey);

       await copyS3Object({
          Bucket: toBucket,
          CopySource: `${fromBucket}/${fromObjectKey}`,
          Key: toObjectKey,
       })
    }
  } catch (error) {
     throw new Error(error)
  }
} 
```

# javascript - Rails 中的 j 函数有什么作用？

> ID：12518526
> 
> 赞同：55
> 
> 时间：2012-09-20T18:19:03.403
> 
> 标签：javascript, ruby-on-rails, ajax, partial-views

我刚刚看到一个博客，其中提到了`j`Rails 中的一个函数。他们使用它来进行 ajax 样式的页面更新。

```
$('#cart').html("<%=j render @cart %>"); 
```

我知道他们正在使用局部来渲染`cart`局部，但是有什么意义`j`呢？我发现一些文章说它将字符串转换为 JavaScript 可以接受的东西，但这是什么意思？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-20T18:35:16.883

彼得实际上发布了正确的答案。但我会尝试详细说明：

我猜你对ajax的基本概念很熟悉吧？假设您希望能够以 ajaxy 方式创建评论。在 Rails 中，您可以通过以下方式响应*POST*请求`CommentsController`：

```
def create
  @comment = Comment.new(params[:comment])
  respond_to do |format|
    render.js
  end
end 
```

这意味着如果来自客户端的 ajax 请求（通过 jquery/javascript）提交给**`CommentsController`**它，它将识别格式 ( `.js`) 并以**_create.js.erb**部分响应。然后，部分将使用以下内容呈现新评论：

```
$('.comments').append("<%=j render @comment %>"); 
```

**现在进入 j 或 escape_javascript 方法：** 一些*邪恶*的用户可能会提交包含（恶意）javascript 的评论，**除非**您使用该`j`方法，否则该评论将在您的页面上执行

> 为 JavaScript 段转义回车和单引号和双引号。

因此阻止在浏览器中执行代码。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-09-20T18:20:45.390

> **`escape_javascript(javascript)`**
> 
> 为 JavaScript 段转义回车和单引号和双引号。
> 
> 也可以通过别名 j() 获得。

来自[rails 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html)。

# jquery - CSS：选择带有背景图像的 td

> ID：12518527
> 
> 赞同：0
> 
> 时间：2012-09-20T18:19:04.117
> 
> 标签：jquery, css, css-selectors

我在 Volusion 工作，并且有这些可怕的选择器组合：

```
div#content_area table tr td table tr td table tr td, div#content_area table tr td table tr td table tr, div#content_area table tr td table tr td table 
```

现在，我必须定位表中第一行的第一个 td，但前提是该 td 具有 Divider_Horizo​​ntal.gif 的背景图像。

我会满足于第一个带有背景的 tr 的第一个 td 。由于此图像是在 td 上设置的背景图像，因此我无法通过正常方式控制高度，因为 Volusion 使用转换为 asp 的 VB 脚本。太可怕了。我无法阅读脚本，因为它会出现乱码。

所以，我只是打算使用一个覆盖的 css 声明来为特定的 td 添加高度，但我不知道如何指定“仅具有背景”部分。

我也可以使用 jquery，但即便如此，我也不确定如何指定实际的内容部分，因为它不是真正的 html，并且点击 td 的属性似乎不起作用。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:30:18.697

你可以试试`filter`方法：

```
$('div#content_area table tr td:first').filter(function(){
    return $(this).css('background-image') === 'url(Divider_Horizontal.gif)'
}).foo() 
```

# ruby-on-rails - 使用线程安全时未在延迟作业中加载模型类

> ID：12518529
> 
> 赞同：8
> 
> 时间：2012-09-20T18:19:15.197
> 
> 标签：ruby-on-rails, delayed-job

我有一个应用程序已经运行了很长时间。我正在打开线程安全！，现在延迟作业不起作用，说它找不到我的模型文件之一。

```
作业加载失败：未定义的类/模块 Foo

```

这不是我在 /lib 中定义的自定义作业类，这是 app/models 中的模型文件

什么可能导致此类无法加载？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T18:04:33.050

正如您记录的问题上所发布的那样，以防其他人首先找到此 SO 帖子：

我也遇到了这个问题......这就是我发现的：如果应用程序是通过 rake 任务加载的，Rails 不会急切加载类（这就是 DJ 的工作方式）。

所以我所做的是我的这段代码`production.rb`：

```
# Enable threaded mode, unless a rake task (likely Delayed Job) is running:
config.threadsafe! unless defined?($rails_rake_task) && $rails_rake_task 
```

Rails 在 rake 任务加载时设置该全局变量。丑陋，但现在似乎对我来说很好......当然，如果您有多线程的 rake 任务，那么这并不理想，您可能应该调用 Rails.application.eager_load！对于那些任务。不过，我猜多线程 rake 任务很少见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T01:59:10.220

**即使在使用pat**不使用 threadsafe 进行 rake 作业的方法之后，我的作业仍然失败。

我最终不得不使用[GitHub Wiki 页面](https://github.com/collectiveidea/delayed_job/wiki/Common-problems#jobs-are-silently-removed-from-the-database)上的以下手动加载技术：

```
# file: config/initializers/custom.rb
require 'my_custom_class' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:20:54.733

不是真的相关，但我今天有完全相同的错误消息与延迟作业，没有启用线程安全。

原因和解决方案要简单得多——我们的服务器上有另一个 ruby​​ 产品使用延迟作业，它的工作人员没有命名队列，所以他们从我设置的队列中抓取随机作业。

# sql-server - 转换为与 SQL Server 兼容的 Access 的双重功能

> ID：12518532
> 
> 赞同：0
> 
> 时间：2012-09-20T18:19:20.357
> 
> 标签：sql-server, ms-access

我的 Access 数据库中有一个数据类型的列，`Text`而存储在其中的值通常是数字。我说通常是因为用户需要能够输入诸如`<MDL`或`<0.0095`但也需要能够输入，更常见的是，诸如`1.25`实际数字之类的东西。因此，该列必须适应文本。此外，（直到今天）从来没有真正的理由对该专栏进行任何数学运算。数据只是被传递给用户查看，所以`Text`是一个不错的选择。

现在我的问题是我需要进行交叉表查询并取该列的平均值作为值字段。我可以使用`Val`or`Cdbl`函数进行强制转换，但是当客户端最终想要将这个东西切换到 SQL Server 时，我需要去将该函数更改为 a`CAST(column as float)`据我所知。

是否有我可以使用的 Access 和 SQL 服务器共有的功能，这样当我们切换数据库引擎时，我就不需要经过并对我的查询进行这样的更改？

我不确定他们正在运行什么版本的 SQL 服务器，但我假设是 2005 年，除非另有说明。

# sql - 加快计数

> ID：12518533
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:19:24.993
> 
> 标签：sql, sql-server, tsql

如果您要查看此页面： http: [//www.storeboard.com/directory/california/sanfrancisco/](http://www.storeboard.com/directory/california/sanfrancisco/)，您会发现一个几乎无法访问的页面，因为它可能需要 30 多秒才能加载。原因是有一个计数器可以计算每个类别中的业务成员数量。我想知道是否有一种方法可以加快我现有的脚本，因为现在我们有超过一百万的成员，并且当前状态下的脚本是无用的。这是我当前的脚本：

```
SELECT COUNT(MemberID) AS MembersInCountyCat
FROM Member
WHERE NYKACountyID = @NYKACountyID
AND (
        NYKACatID IN (
            SELECT NYKACatID
            FROM NYKACat
            WHERE ParentID = @NYKACatID
        )
        OR
        NYKACatID = @NYKACatID
    )
AND ProfileTypeID <> 1 
```

任何关于如何加快 sql 脚本速度的建议将不胜感激。

提前谢谢了，

新杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:05:49.367

请试一试。将 NYKACat 条件移动到连接中可能会有所帮助，我认为它不会伤害它。如果 NYKACat.ParentID = @NYKACatID 或 NYKACat.NYKACatID = @NYKACatID 消除了 NYKACat 中的大部分行，那么它可以预先执行此操作。

with (nolock)
如果您不能接受脏读，则允许脏读，然后将其关闭

```
SELECT COUNT(Member.MemberID) AS MembersInCountyCat
FROM  Member  with (nolock) 
JOIN  NYKACat with (nolock)
  on  NYKACat.NYKACatID = Member.NYKACatID
 and (NYKACat.ParentID = @NYKACatID or NYKACat.NYKACatID = @NYKACatID)
WHERE Member.NYKACountyID = @NYKACountyID
  and Member.rofileTypeID <> 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:28:09.880

```
SELECT COUNT(MemberId) AS MembersInCountyCat
FROM Member
    INNER JOIN NYKACat ON Member.NYKACatId = NYKACat.NYKACatId 
WHERE NYKACountyId = @NYKACountyId
    AND (NYKACat.NYKACatId = @NYKACatId OR NYKACat.ParentId = @NYKACatId)
    AND ProfileTypeId <> 1 
```

确保您有关于 ProfileTypeID、Member.NYKACountyId 和 Member.NYKACatId 的索引。

# jquery - 为什么此代码在 Firefox 中有效，但在 Google Chrome 中无效

> ID：12518534
> 
> 赞同：0
> 
> 时间：2012-09-20T18:19:25.763
> 
> 标签：jquery, google-chrome, firefox

我无法让这个脚本在 Chrome 中运行，它在 Firefox 中运行良好。它的作用是在 Tweetdeck 中每一列的顶部放置一个“清除”按钮。它显示按钮，但单击它时没有任何反应。

```
 // ==UserScript==
    // @name           TweetDeck Clear Button
    // @namespace      http://dvdbng.com
    // @description    Adds a clear column button directly accesible
    // @include        https://web.tweetdeck.com/*
    // ==/UserScript==

    var $ = unsafeWindow.jQuery;
//Places the "clean" button on top of header 
    unsafeWindow.TD_mustaches["column/column_header.mustache"] = unsafeWindow.TD_mustaches["column/column_header.mustache"].replace('<div class="options-nav">','<div class="options-nav"><a class="GS_clean">clean</a>');   
    $(document.body).delegate(".GS_clean","click",function(){
//This does navigation to get to the "Clear Column" button
        $(this).parents(".column")
            .find("a[data-action=options]").click().end()
            .find("input[data-action=clear]").click().end()
            .find("a[data-action=options]").click()
    }); 
```

# css - DDMenu：使子菜单显示指向左侧而不是右侧

> ID：12518540
> 
> 赞同：3
> 
> 时间：2012-09-20T18:19:56.513
> 
> 标签：css, drop-down-menu

我正在尝试在我的网站中放置一个基于 HTML/CSS/Javascript 的下拉菜单。我在网上找到了一个很棒的图书馆“ddmenu”。我能够破解 *.css 文件来获取菜单，主要是在我想要的位置。

子菜单显示向右移动。我怎样才能让它显示向左移动？

我不太了解 CSS，我发现 ddmenu.css 令人困惑。

所有相关文件都粘贴在下面

非常感谢史蒂夫

**我的 menu.html 文件**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
     <title>Menu Experiment</title>
     <style type="text/css">
        .nav_user_menu
        {
            float: right;
            color: black;
            text-decoration: none;
            font-weight:bold; 
        }
    </style>
    <link rel="StyleSheet" href="search_files/ddmenu.css" type="text/css">
    <script language="JavaScript" "text="" javascript"="" src="search_files/ddmenu.js"></script>
</head>

    <body>

            <ul id="ddmenu">

                <li>
                    <a href="#">ACME</a>
                </li>

                <li>
                    <a href="#">ABC</a>
                    <ul>
                        <li><a href="#">Add Staff</a></li>
                        <li><a href="#">Search Profiles Celeberties Yo</a></li>
                        <li>
                            <a href="#">Help</a>
                                <ul>
                                    <li><a href="#">Personal HELP </a></li>
                                    <li><a href="#">National HELP </a></li>
                                    <li><a href="#">Global HELP</a></li>
                                </ul>
                        </li>
                     </ul>
                </li>    

            </ul>

</body>
</html> 
```

**ddmenu.css 文件：**

```
/* ---------------------------------------------
Keyboard accessible dropdown menu
Author:Adriana Palazova
Version:22 February 2009
last rev.: 19 October 2009
gratitude to Matthew Carroll - http://carroll.org.uk/sandbox/suckerfish/bones2.html
and
Alan Gresley and Duncan Hill - http://css-class.com/articles/ursidae/
------------------------------------------------ */
#ddmenu {font: bold 10pt Arial,Helvetica;border: 2px solid gray;}

/*#ddmenu a:link {text-decoration:none}*/

/*#ddmenu a:visited {text-decoration:none}*/

#ddmenu a:hover, #ddmenu a:focus, #ddmenu a:active {text-decoration:underline}

/* --- TOP LEVEL MENU STYLES --- */
#ddmenu li{list-style-type:none;}

#ddmenu 
{
    float:left; 
    display:inline; 
    width:100%; 
    padding:0; 
    background:#fff0ca; /*#414141;*/
}

#ddmenu li 
{
    position:relative; 
    float:left; 
    /*border-right:1px solid /*#fff; */
    background:#fff0ca;/*#414141; */
    font-weight:bold

}

#ddmenu li a 
{
    display:block; 
    white-space: nowrap;
    /*width:7em; */
    padding:5px 0.7em 7px;
    border: 1px solid gray;
    border-top: 0px;
    border-bottom:0px;
    /*border-style:solid;
    border-width:1px;*/
    /*border-width:1px 1px 0; 
    border-style:solid; */
    /*border-color:#3e8ebe #0b3965 #003 #3e8ebe;*/
    /*color:#fff*/
}

/* --- SUB MENU ITEMS --- */

#ddmenu li li 
{
    border:0 none; 
    font-weight:normal; 
    z-index:20
} /* no width here because of IE */

#ddmenu li li a 
{
    /*width:11em; */
    padding:5px 0.5em 7px; 
    border-width:1px
} 

#ddmenu ul > li 
{
    display:block; 
    float:none;
    text-align:left;

} /* for Opera */

/* --- SUB MENU FIRST LEVEL INITIAL POSITION --- */  

#ddmenu ul 
{
    position:absolute; 
    left:-9999px; 
    top:100%; 
    /*width:12em; */
    padding:0; 
    border:1px solid #003

}

/*for modern browsers:*/
#ddmenu li > ul  
{
    top:auto; 
    width:auto
}

/*see the conditional comments for IE7*/

/* --- SHOW FIRST LEVEL SUB MENU --- */

/*For ie6:*/
#ddmenu li.sfhover ul,
#ddmenu li a:active ul,
#ddmenu li.sffocusparent ul,
#ddmenu li a.sffocus ul {left:0}

/* for modern browsers + IE7:*/
#ddmenu li:hover > ul,
#ddmenu li.sfhover > ul,
#ddmenu li.sffocusparent > ul,
#ddmenu li a:active > ul,
#ddmenu li a:focus + ul,
#ddmenu li a.sffocus + ul {left:auto}

/* --- SUB MENU SECOND LEVEL and following levels UNHOVERED POSITION --- */  

#ddmenu li:hover ul ul,
#ddmenu li:active ul ul,
#ddmenu a:focus ul ul,
#ddmenu li.sfhover ul ul,
#ddmenu a.sffocus ul ul,
#ddmenu li.sffocusparent ul ul,
#ddmenu li.sffocus ul ul {left:-9999px}

/* --- SHOW SECOND LEVEL SUB MENU --- */

/* For ie6: */
#ddmenu ul li a:hover ul, #ddmenu ul li.sfhover ul,
#ddmenu ul li a:active ul,
#ddmenu ul li.sffocusparent ul,
#ddmenu ul li.sffocus ul {margin-left:12em; top:-1px; left:1px}

/* for modern browsers + IE7: */
#ddmenu ul li:hover > ul,
#ddmenu ul li.sfhover > ul,
#ddmenu li li a.sffocus + ul,
#ddmenu li li.sffocus > ul {margin-left:12em; top:-1px; left:1px}

/* --- SUB LEVEL positions for JavaScript  OFF - thanks http://css-class.com/articles/ursidae/ --- */ 

/* --- The focus position for submenu anchors --- */
#ddmenu.jsoff li li a:focus, #ddmenu.jsoff li li a:active { /* --- THE FOCUS POSITION FOR FIRST SUB MENU ANCHORS --- */
    position:relative;
    left:9999px;
    top:-1px;
    z-index:21;
}
#ddmenu.jsoff li li li a:focus, #ddmenu.jsoff li li li a:active { /* --- THE FOCUS POSITION FOR SECOND SUB MENU ANCHORS --- */
    left:19999px;
    margin-left:12em;
    top:-2.9em;
}

/* --- The hovered position for submenu anchors when the anchor is in focus --- */
#ddmenu.jsoff li:hover li a:focus, #ddmenu.jsoff li:hover li a:active { 
    position:relative; left:auto; top:-1px; margin-left:0}

#ddmenu.jsoff li:hover a:focus + ul { /* --- THE POSITION OF FIRST LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED AND HOVERED --- */
    margin-left:0px;
}
#ddmenu.jsoff li li a:focus + ul { /* --- THE POSITION OF SECOND LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED FOR JavaScript  OFF --- */
    top:-1px;
    left:12em;
    margin-left:10000px;
}
#ddmenu.jsoff li:hover li a:focus + ul { /* --- THE POSITION OF SECOND LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED AND HOVERED --- */
    left:12em;
    margin-left:1px;
}

/* --- BACKGROUND IMAGES OF PARENT ITEMS --- */

#ddmenu li a.mum {
  BACKGROUND: url(../images/down.gif);
  background-repeat: no-repeat;
  background-position: 95% 50%;
}
#ddmenu ul li a.mum 
{
    BACKGROUND: url(../images/right.gif);
}

/* --- LINK HOVER STYLES --- */

#ddmenu li a:link, #ddmenu li a:visited  {background-color:transparent}
#ddmenu li a:hover, #ddmenu li:hover a, #ddmenu li a:focus, #ddmenu li a:active, 
#ddmenu li.sfhover a, #ddmenu li a.sffocus, #ddmenu li.sffocusparent a {background-color:#fff0ca/*#135*/}/* top level background hover color */

#ddmenu li li a:link, #ddmenu li li a:visited  {background-color:transparent}
#ddmenu ul li a:hover, #ddmenu ul li:hover a, #ddmenu ul li a:focus, #ddmenu ul li a:active, 
#ddmenu ul li.sfhover a, #ddmenu ul li a.sffocus, #ddmenu ul li.sffocusparent a {background-color:blue;color:#fff0ca;}

#ddmenu li li li a:link, #ddmenu li li li a:visited  {background-color:transparent} 
#ddmenu li li li a:hover, #ddmenu li li li:hover a, #ddmenu li li li a:focus, #ddmenu li li li a:active, 
#ddmenu li li li.sfhover a, #ddmenu li li li a.sffocus, #ddmenu li li li.sffocusparent a {background-color:blue;color:#fff0ca;} /*{background-color:#135}*/

/* <!--[if IE 7]> */

#ddmenu li > ul  {top:100%}

#ddmenu a
{
    background: url(../images/down.gif) no-repeat -95% -50%;
}

#ddmenu ul li:hover > ul, #ddmenu ul li.sfhover > ul, 
#ddmenu li li a.sffocus + ul, #ddmenu ul li.sffocusparent > ul {left:0} 
```

**ddmenu.js 文件：**

```
var menuID = 'ddmenu';
/* --- gratitude to Matthew Carroll - http://carroll.org.uk/ - http://carroll.org.uk/sandbox/suckerfish/bones2.html
  based on http://www.htmldog.com/articles/suckerfish/dropdowns/ --- */
function accessible_menus_ie() {
  var sfEls = document.getElementById(menuID).getElementsByTagName('LI');
  for (var i=0; i<sfEls.length; i++) {
    sfEls[i].onmouseover=function() {
      this.className+=(this.className.length>0? ' ': '') + 'sfhover';
      this.parentNode.className+=(this.parentNode.className.length>0? ' ': '') + 'sfhover';
    }
    sfEls[i].onmouseout=function() {
      this.className=this.className.replace(new RegExp('( ?|^)sfhover\\b'), '');
      this.parentNode.className=this.parentNode.className.replace(new RegExp('( ?|^)sfhover\\b'), '');
    }
  }
}
function accessible_menus() {
  var ddMenu = document.getElementById(menuID);
  ddMenu.className = ddMenu.className.replace(new RegExp('(^|\\s)jsoff(\\s|$)'), '');
  var mcEls = document.getElementById(menuID).getElementsByTagName('A');
  for (var i=0; i<mcEls.length; i++) {
    mcEls[i].onfocus=function() {
      this.className = this.className ? this.className + ' sffocus' : 'sffocus'; //a:focus
      this.parentNode.className = this.parentNode.className ? this.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < a:focus
      this.parentNode.parentNode.className = this.parentNode.parentNode.className ? this.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < a:focus
      if(this.parentNode.parentNode.parentNode.nodeName == 'LI') { //li < ul < li < a:focus
        this.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < ul < li < a:focus
        this.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < ul < li < a:focus
        if(this.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == 'LI') {  //li < ul < li < ul < li < a:focus
          this.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < ul < li < ul < li < a:focus
          this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className ?this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < ul < li < ul < li < a:focus
        }
      }
    }
    mcEls[i].onblur = function() {
      this.className = this.className.replace(new RegExp('(^|\\s)'+'sffocus'+'(\\s|$)'), '');
      this.parentNode.className = this.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
      this.parentNode.parentNode.className = this.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
      if(this.parentNode.parentNode.parentNode.nodeName == 'LI') {
        this.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
        this.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
        if(this.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == 'LI') {
          this.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
          this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');

        }
      }
    }
  }
}

// only ie needs the sfHover script. all need the accessibility script...

// thanks Brothercake - Generic onload - GO1.1 - http://www.brothercake.com/site/resources/scripts/onload/
if(typeof window.addEventListener != 'undefined') { //.. gecko, safari, konqueror and standard
    window.addEventListener('load', accessible_menus, false);}
else if(typeof document.addEventListener != 'undefined') { //.. opera
    document.addEventListener('load', accessible_menus, false);}
else if(typeof window.attachEvent != 'undefined') { //.. win/ie
    window.attachEvent('onload', accessible_menus_ie);
    window.attachEvent('onload', accessible_menus);}
//** remove this condition to degrade older browsers
else {  //.. mac/ie5 and anything else that gets this far
  if(typeof window.onload == 'function') { //if there's an existing onload function
    var existing = window.onload; //store it
    window.onload = function() { //add new onload handler
      existing(); //call existing onload function
      //call generic onload function
      accessible_menus_ie();
      accessible_menus();
    };
  } else {
    window.onload = function() { //setup onload function
      accessible_menus_ie();
      accessible_menus();
    };  
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:06:05.857

您想要的相关 CSS 是 ddmenu.css 的这一部分：

```
/* --- SHOW SECOND LEVEL SUB MENU --- */

/* For ie6: */

#ddmenu ul li a:hover ul, #ddmenu ul li.sfhover ul,
#ddmenu ul li a:active ul,
#ddmenu ul li.sffocusparent ul,
#ddmenu ul li.sffocus ul { margin-left:12em; top:-1px; left:1px}

/* for modern browsers + IE7: */
#ddmenu ul li:hover > ul,
#ddmenu ul li.sfhover > ul,
#ddmenu li li a.sffocus + ul,
#ddmenu li li.sffocus > ul { margin-left:12em; top:-1px; left: 1px } 
```

特别是，您希望将值更改为`margin-left`负值，以便将第二个子菜单向左移动。（现在，`margin-left:12em;`子菜单在主菜单的右侧发生了颠簸。）但是，我不知道有一种方法可以轻松地使其适用于动态宽度子菜单，因此您要么必须设置宽度明确地（如下面的规则），或者通过 Javascript 检测它并以这种方式设置负边距，或者找到比我更擅长 CSS 的人。:)

对于您的特定示例， 8em 似乎或多或少是正确的宽度，所以我这样做了：

```
...
#ddmenu ul li.sffocus ul { width: 8em; margin-left:-8em; top:-1px; left:1px}

...
#ddmenu li li.sffocus > ul { width: 8em; margin-left:-8em; top:-1px; left: 1px } 
```

这是一个带有上述更改[的jsfiddle 。](http://jsfiddle.net/ar9TU/)（看起来子菜单上的悬停样式/链接颜色仍然存在一些问题，但这些在原始菜单中存在，所以我不理会它。）

# google-drive-api - Google Picker API：setAppId 的使用

> ID：12518545
> 
> 赞同：2
> 
> 时间：2012-09-20T18:20:36.870
> 
> 标签：google-drive-api, google-picker

Google 选择器 api[示例](https://developers.google.com/picker/docs/index)有一个未设置应用程序 ID (setAppId) 的文件打开示例和一个上传示例。

我想得到澄清：

*   什么时候需要设置api id？
*   我可以让一个网络应用程序使用没有应用程序 ID 的文件选择器从 Google 驱动器下载文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:44:53.613

对于 Google Drive SDK，请始终设置 App ID。

[https://developers.google.com/drive/integrate-open](https://developers.google.com/drive/integrate-open)

# android - 应用程序被销毁时执行自定义代码

> ID：12518554
> 
> 赞同：0
> 
> 时间：2012-09-20T18:21:07.343
> 
> 标签：android, android-activity, android-service

我有一个磁盘缓存，当应用程序关闭时我需要关闭它。最好的地方在哪里？

- 覆盖活动 onDestroy 方法并检查它是否是任务根：

```
 @Override
    protected void onDestroy () {
        if (this.isTaskRoot()) {
            //I only want to close it if this is the last activity of the app
            CloseCache();
        }
        super.onDestroy();
    } 
```

根据文档， Activity.onDestroy() 可能不会在系统刚刚杀死应用程序时被调用，因此在这种情况下，这将使缓存保持打开状态。

- 使用在同一进程中运行的服务并从其 onDestroy 回调中关闭缓存？Service.onDestroy() 是否总是在进程销毁时由系统调用？

-我不知道的其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:33:09.590

您可以考虑在 onStop() 方法中执行此步骤，该方法是“当您不再对用户可见时调用。您接下来将收到 onRestart()、onDestroy() 或什么也没有，具体取决于以后的用户活动。” 然后在您的 onRestart() 方法中，您可以根据需要回收缓存。

[http://developer.android.com/reference/android/app/Activity.html#onStop%28%29](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)

# python - 多路复用器

> ID：12518559
> 
> 赞同：6
> 
> 时间：2012-09-20T18:21:28.790
> 
> 标签：python, linux, serial-port, pty

我正在尝试对 linux 上的串行端口进行多路访问。我正在使用一个只有一个串行端口的嵌入式系统，如果有多个进程与之通信会很好。

常见的用例是：

*   一个主程序运行测试（发送命令和接收输出）；
*   另一个记录所有串口活动；
*   在测试期间出现一些错误后，用户终端打开以发送其他命令和/或执行事后分析。

首先，我制作了一个简单的 python 脚本来打开 n 个伪终端对（加上串口），并使用 poll 语句将输入/输出定向到正确的位置：

```
# Removed boiler plate and error checking for clarity

##### Serial port setup
ttyS = serial.Serial(device, baudrate, width, parity, stopbits, 1, xon, rtc)
ttyS.setTimeout(0) # Non-blocking

##### PTYs setup
pts = []
for n in range(number_of_slave_terminals):
    master, slave = os.openpty()
    # Print slave names so others know where to connect
    print >>sys.stderr, 'MUX > fd: %d pty: %s' % (slave, os.ttyname(slave))
    pts.append(master)

##### Poller setup
poller = select.poll()
poller.register(ttyS.fd, select.POLLIN | select.POLLPRI)
for pt in pts:
    poller.register(pt, select.POLLIN | select.POLLPRI)

##### MAIN
while True:

events = poller.poll(500)

for fd, flag in events:

    # fd has input
    if flag & (select.POLLIN | select.POLLPRI):
        # Data on serial
        if fd == ttyS.fd:
            data = ttyS.read(80)
            for pt in pts:
                os.write(pt, data)

        # Data on other pty
        else:
            ttyS.write(os.read(fd, 80)) 
```

如果每个 pty 都已连接，则此方法非常有效。如果有一些未连接的 pty，最终它的缓冲区会填满并在写入时阻塞。似乎我需要知道连接了哪些从站或某种按需 pty 开放。

[我在这个问题](https://stackoverflow.com/questions/3486491/how-can-i-detect-when-someone-opens-the-slave-side-of-a-pty-pseudo-terminal-in)上找到了一个巧妙的技巧，这个人只需要从串口部分读取数据，所以我修改了我的脚本：

```
##### Serial port setup
ttyS = serial.Serial(device, baudrate, width, parity, stopbits, 1, xon, rtc)
ttyS.setTimeout(0) # Non-blocking

##### PTYs setup
pts = []
for n in range(number_of_slave_terminals):
    master, slave = os.openpty()

    # slaves
    print >>sys.stderr, 'MUX > fd: %d pty: %s' % (slave, os.ttyname(slave))
    os.close(slave) # POLLHUP trick

    # masters
    pts.append(master)

##### Poller setup
reader = select.poll()
writer = select.poll()

reader.register(ttyS, select.POLLIN | select.POLLPRI)
for pt in pts:
    reader.register(pt, select.POLLIN | select.POLLPRI)
    writer.register(pt, select.POLLIN | select.POLLPRI | select.POLLOUT)

def write_to_ptys(data):
    events = writer.poll(500)

    for fd, flag in events:

        # There is someone on the other side...
        if not (flag & select.POLLHUP):
            os.write(fd, data)

##### MAIN
while True:
    events = reader.poll(500)

    for fd, flag in events:

    if flag & (select.POLLIN | select.POLLPRI):
        # Data on serial
        if fd == ttyS.fd:
            write_to_tty(ttyS.read(80))
        # Data on other pty
        else:
            ttyS.write(os.read(fd, 80)) 
```

哪个有效，但使用了 100% 的 CPU，因为读取器轮询充满了 POLLHUP 事件。

我想如果我使用 TCP 套接字而不是伪终端，我可以得到我想要的。缺点是我必须修改所有其他已经与终端一起使用的脚本才能使用套接字（我知道我可以使用 socat，我只是想要更简单的东西）。此外，还有所有的网络开销......

那么，有什么想法吗？

我不介意使用其他工具，只要设置简单。我也不介意使用其他语言，我最喜欢 Python。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T16:08:58.287

最后，我写了一个简单的 TCP 服务器，就像我说我不想……但它确实很好用。它使用与问题代码相同的通用架构，但使用 TCP 套接字而不是伪终端。

我把它贴在[这里](https://github.com/marcelomd/mux_serial)以防有人想使用它。

调用它：

```
md:mux_serial> ./mux_server.py --device /dev/ttyS0 --baud 115200 --port 23200
MUX > Serial port: /dev/ttyS0 @ 115200
MUX > Server: localhost:23200 
```

我`socat`在另一个终端上使用直接访问端口...

```
md:~> socat -,raw,echo=0,escape=0x0f TCP4:localhost:23200 
```

...或创建一个伪终端以在需要这些脚本的内部使用：

```
md:~> socat -d -d pty,raw,echo=0 TCP4:localhost:23200
2012/10/01 13:08:21 socat[3798] N PTY is /dev/pts/4
2012/10/01 13:08:21 socat[3798] N opening connection to AF=2 127.0.0.1:23200
2012/10/01 13:08:21 socat[3798] N successfully connected from local address AF=2 127.0.0.1:35138
2012/10/01 13:08:21 socat[3798] N starting data transfer loop with FDs [3,3] and [5,5] 
```

# django - Django 使用另一个表中的数据更新表

> ID：12518560
> 
> 赞同：25
> 
> 时间：2012-09-20T18:21:36.017
> 
> 标签：django, django-orm, django-database

我有 2 个表`products`并`catagories`通过外键连接。我需要`products.new_cost`使用`catagories.price_markup`以下字段更新字段：

```
UPDATE products p
INNER JOIN categories c ON p.category_id = c.id
SET p.new_cost = ROUND(p.pleer_cost * (1 + c.price_markup/100), -1)
WHERE p.update = 1 
```

在 SQL 中这很容易，但是如何使用 Django ORM 来做到这一点？

我的简化尝试不起作用`Cannot resolve keyword 'category.price_markup' into field.`：

```
Product.actived.select_related('category').filter(update=1)).update(new_cost=F('pleer_cost') * F('category.price_markup')) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2018-05-28T08:06:00.787

You cannot use F, but you can use Subquery and OuterRef:

```
from django.db.models import Subquery, OuterRef

cost = Category.objects.filter(
    id=OuterRef('category_id')
).values_list(
    'price_markup'
)[:1]

Product.objects.update(
    new_cost=Subquery(cost)
) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-21T09:46:15.467

## 注意：我的答案现在已经过时了，Django 1.11[引入了](https://docs.djangoproject.com/en/1.11/ref/models/expressions/#subquery-expressions) `OuterRef` 它实现了这个特性。检查安德烈贝伦达的答案。

根据[文档](https://docs.djangoproject.com/ja/1.9/topics/db/queries/#updating-multiple-objects-at-once)，不支持使用连接子句的更新，请参阅：

> 但是，与 filter 和 exclude 子句中的 F() 对象不同，当您在更新中使用 F() 对象时，您不能引入连接 - 您只能引用正在更新的模型的本地字段。如果您尝试使用 F() 对象引入连接，则会引发 FieldError：
> 
> ```
> # THIS WILL RAISE A FieldError
> >>> Entry.objects.update(headline=F('blog__name')) 
> ```

另外，根据这个[问题](https://code.djangoproject.com/ticket/14104)，这是设计使然，近期内没有改变它的计划：

> 这里的实际问题似乎是在 update() 语句中不允许加入 F() 子句。这是设计使然；由于在一般情况下支持它们的固有复杂性，对 update() 子句中的连接的支持被明确删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T21:27:14.703

```
rows = Product.objects.filter(old_field__isnull=False)
for row in rows:
     row.new_field = row.old_field.subfield
Product.objects.bulk_update(rows, ['new_field']) 
```

# objective-c - 是什么导致 iOS 中的 CBCentralManagerStateUnknown？

> ID：12518562
> 
> 赞同：11
> 
> 时间：2012-09-20T18:21:49.953
> 
> 标签：objective-c, ios, core-bluetooth

为什么我`CBCentralManagerStateUnknown`在使用这个简单的代码时会使用 iPad 2？

```
- (BOOL)viewDidLoad {

    bluetoothManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];

    if ([manager state] == CBCentralManagerStatePoweredOff) NSLog(@"CBCentralManagerStatePoweredOff");
    if ([manager state] == CBCentralManagerStatePoweredOn) NSLog(@"CBCentralManagerStatePoweredOn");
    if ([manager state] == CBCentralManagerStateResetting) NSLog(@"CBCentralManagerStateResetting");
    if ([manager state] == CBCentralManagerStateUnauthorized) NSLog(@"CBCentralManagerStateUnauthorized");
    if ([manager state] == CBCentralManagerStateUnknown) NSLog(@"CBCentralManagerStateUnknown");
    if ([manager state] == CBCentralManagerStateUnsupported) NSLog(@"CBCentralManagerStateUnsupported");

} 
```

我无法弄清楚是什么`CBCentralManagerStateUnknown`意思。我该怎么办？[苹果文档](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CBCentralManager_Class/translated_content/CBCentralManager.html)只是说：

> 状态未知，即将更新。

我在连接蓝牙设备时收到此响应，并且在蓝牙关闭时也收到此响应。如果我尝试运行类似的东西`[manager retrieveConnectedPeripherals]`，我也会在控制台中收到此消息：

```
CoreBluetooth[WARNING] <CBConcreteCentralManager: ...> is not powered on 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-30T16:15:55.447

我知道为什么从不调用委托。因为对象是从内存中删除的。只做强属性

`@property (strong, nonatomic) DiscoverBluetoothDevices *btDevices;`

并在初始化

```
@implementation DiscoverBluetoothDevices
- (id) init
{
    self = [super init];
    if(self) {
        centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:dispatch_get_main_queue()];
        [centralManager scanForPeripheralsWithServices:nil options:@{CBCentralManagerScanOptionAllowDuplicatesKey: @YES}];

    }
    return self;
} 
```

现在委托被正确调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:26:43.137

`CBCentralManagerStateUnknown`只是意味着iOS已经启动了BLE进程，但还没有完成初始化。稍等片刻，状态就会改变。

通常，您将通过检测`CBCentralManagerDelegate`委托处理程序中的状态变化来“给它一点时间”，而不是在初始化调用之后立即查看它。您将实施

```
- (void) centralManagerDidUpdateState: (CBCentralManager *) central; 
```

有一些很好的例子可以证明这一点，例如 Apple 的[心率监测器](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/HeartRateMonitor_HeartRateMonitorAppDelegate_m.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-06T21:19:30.107

如果中央的状态变为`CBCentralManagerStateUnsupported`（而设备支持低功耗蓝牙），则很可能意味着该应用程序对 CoreBluetooth 做了一些坏事。

检查[iOS 蓝牙诊断日志](http://developer.apple.com/bluetooth)记录。

例如，如果您这样做...

`_cm1 = [[CBCentralManager alloc] initWithDelegate:self queue:nil options:@{ CBCentralManagerOptionRestoreIdentifierKey: @"not_unique" }]; _cm2 = [[CBCentralManager alloc] initWithDelegate:self queue:nil options:@{ CBCentralManagerOptionRestoreIdentifierKey: @"not_unique" }];`

...第二中央的状态将变为`CBCentralManagerStateUnsupported`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T06:32:16.857

实际答案（我知道的老问题）；开始扫描外围设备，这将启动 BT LE，您的代表将被回调。在我这样做之前，我的代表和州信息没有改变。

一种。如下设置您的 cbcentralmanager b。在您的代码和 .h 文件中使用 -central* 代表 c。NSLog 或在屏幕上使用新状态更新标签。还有……成功。

```
cManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];

[cManager scanForPeripheralsWithServices:nil options:@{CBCentralManagerScanOptionAllowDuplicatesKey: @YES}]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-28T12:52:23.323

您需要保留`CBCentralManager`实例（将其放在 ivar 或私有属性中）并等待调用状态更改委托。（如果您在实例化管理器后立即检查状态，则该状态始终为“未知”。真实状态将暂时出现在委托方法中。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-10T19:24:25.550

就我而言，我确实使用 AppDelegate 作为代表

```
CBCentralManagerDelegate 
```

和无方向的

```
 AVCaptureMetadataOutputObjectsDelegate. 
```

一次。

1）注意线程。采用

```
dispatch_get_main_queue() 
```

或者

```
[NSThread mainThread] 
```

与BLE一起工作。

2) 注意在 1 个对象上使用这 2 个委托。因为硬件**不是主题和上下文**保存

# caching - 缓存和更新我的网站

> ID：12518565
> 
> 赞同：0
> 
> 时间：2012-09-20T18:22:03.297
> 
> 标签：caching, proxy, safari, browser-cache

[我在这里](http://palizine.plynt.com/issues/2008Jul/cache-control-attributes/)学到了一些关于缓存的好东西。我目前`proxy-revalidate`与`max-age`.

如果我对我的网站进行了重要更改，我希望所有人都能看到，即使 max-age 没有用完怎么办？他们将如何看待变化？

例如，在 Safari 中，除非我强制重新加载页面，否则不会发生更改。简单地再次访问该 URL 不会导致检索到更改。

我认为主要的解决方法是使用`must-revalidate`而不是`proxy-revalidate`，但这不是那么有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:29:34.167

这里有几件事在起作用。

首先，它取决于用户浏览器的缓存方式。请记住，网络上的指令仅是*建议*。如果浏览器不想缓存（或释放缓存），无论您将标头设置为什么，它都不会。

另一个考虑因素是，如果您的页面已被路由器或防火墙缓存，则无论用户的浏览器如何，清除缓存都可能需要一些时间。

如果您的网站有部分需要更新（例如，股票行情或类似的东西），那么缓存破坏（谷歌它）javascript/css/iframe/whatever。

不然我也不会太担心。如果您有一个低流量的网站，您的访问者很可能不会缓存内容。缓存有助于减少第*一个*页面请求后的外部文件负载，而不是长时间维护内容。

# jms - 低延迟消息队列

> ID：12518567
> 
> 赞同：4
> 
> 时间：2012-09-20T18:22:13.283
> 
> 标签：jms, activemq, rabbitmq, apache-zookeeper, jgroups

基本上我有一个在工作节点之间分配任务的主节点。工作人员的数量可能会改变，这意味着工作人员不能在服务器端进行硬编码。Master 向队列提交一个任务，其中一个工作人员接受这个任务，处理它并返回结果。最关键的方面是低延迟。工作节点上的典型处理时间约为 100-300 毫秒，这意味着消息系统不应该对处理时间增加明显的延迟。

目前我正在研究请求-响应 JMS 模式。这意味着 master 会将任务提交到共享队列，worker 将从队列中取出任务并将结果提交到另一个由 master 节点侦听的队列。Master 会将响应与请求相关联。

恐怕JMS可能会给系统带来延迟，这是不能接受的。也许我应该看看其他解决方案？比如 RabbitMQ、JGroups 还是 ZooKeeper？

如果 JMS 适合这里，你能推荐最快的 JMS 代理吗？目前我正在看 ActiveMQ

该解决方案的另一个要求是它应该能够在云中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-31T03:22:10.343

基于 JMS 的解决方案不能保证低延迟，因为所有供应商都使用固有的消息批处理技术，无论是 Rabbit、Hornet 还是 ActiveMQ，以实现高吞吐量。IBM 和 Mule 等供应商已经为这项工作发布了特定的低延迟产品。

但是一切都取决于您的负载和产生的任务数量以及消耗的工人数量。因此，通过调整，您可以获得您的个性化号码。

基于 LMAX Disruptor 的 CoralQueue 绝对值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T00:08:56.480

我想您正在寻找 Java 解决方案（来自 JMS）

对于高吞吐量低延迟内存队列功能，您可以考虑 Hazelcast ( [http://hazelcast.org/](http://hazelcast.org/) )

它可能会......这取决于工人离开/加入集群的频率。非常频繁地添加/删除集群成员会降低效率。

此外，如果您需要持久化队列或复杂的队列管理，这也可能很麻烦。

非 Java 客户端会出现问题，因为您需要购买许可证。

但是，如果您只想要一个低延迟的 Java 队列 - 它会成功

为了快速查看它是否适合您的目的，请看这里：http: [//docs.hazelcast.org/docs/latest/manual/html/queue.html](http://docs.hazelcast.org/docs/latest/manual/html/queue.html)

确保您也有良好的网络配置。如果可以的话 10gig，1gig 可以，但请确保您使用信誉良好的交换机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:04:38.980

你应该看看这里 [1]，Rabbitmq 有一篇很好的性能文章和关于延迟的讨论。

快速恢复，我不得不说 Rabbitmq 在某些压力情况下可以采用 400ms 的延迟值，但通常在发送速率较低的情况下，它最接近 40ms 或更少。看一下（尝试发送速率与延迟图表）

顺便说一句，您还应该考虑您的网络延迟。该基准测试显示了本地主机性能。

[1] [http://www.rabbitmq.com/blog/2012/04/17/rabbitmq-performance-measurements-part-1/](http://www.rabbitmq.com/blog/2012/04/17/rabbitmq-performance-measurements-part-1/)

# javascript - 尝试获取复选框标签，但获取对象

> ID：12518570
> 
> 赞同：0
> 
> 时间：2012-09-20T18:22:13.730
> 
> 标签：javascript, jquery

我正在使用几行简单的代码来获取选中复选框的标签并提醒值。但是由于某种原因，警报会为每个复选框而不是其标签显示 [object Object]。我究竟做错了什么？

```
function validate(){
    var interests="";
    $('input[type=checkbox]').each(function () {
           if (this.checked){
               var id=$(this).attr('id');
               interests += $("#"+id).next()
           }
    });
    alert(interests);

}​ 
```

[**jsFiddle**](http://jsfiddle.net/WFzS7/)：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:24:27.913

使用`.text()`：

```
interests += $("#" + id).next().text(); 
```

请注意，您可以使用一行代码获得相同的结果：

```
$('input:checked').next().text(); 
```

[**一行代码jsFiddle**](http://jsfiddle.net/WFzS7/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:25:54.237

```
var id=$(this).attr('id');
interests += $("#"+id).next() 
```

等等，所以您正在创建一个 jQuery 对象，获取元素的 ID……然后使用该 ID 通过该 ID 选择一个 jQuery 对象？这有什么意义？

除此之外，`[object Object]`是一个包含标签的 jQuery 对象。

要获取实际的标签元素，您可能需要执行以下操作：

```
var label = $("[for="+this.id+"]")[0] 
```

`[0]`如果您确实想要一个包含标签的 jQuery 对象，请删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:25:02.117

您正在将返回的对象转换`next()`为字符串，这导致`[object Object]`您需要调用`.text()`以获取内容的文本：

```
interests += $(this).next().text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:26:49.223

`.next()`给你一个 jQuery 对象，它在转换为字符串时给你“[object Object]”。您可能需要选项的文本：

```
interests += $("#"+id).next().text() 
```

[http://jsfiddle.net/WFzS7/1/](http://jsfiddle.net/WFzS7/1/)

# php - imagick 与远程 url

> ID：12518572
> 
> 赞同：0
> 
> 时间：2012-09-20T18:22:33.623
> 
> 标签：php, imagick

这里 imagick 适用于存储在服务器中的图像.. 但是如果我用 $paths 数组中的远程 url 替换我不知道如何工作

```
$background = new Imagick('back.jpg');
    $paths  = array(
        "img/1.jpg",
        "img/2.jpg",
        "img/3.jpg",
        "img/4.jpg",
    );

    $images = new Imagick($paths);
    foreach($images as $image){
      $image->thumbnailImage($width, NULL);
      $background->compositeImage($image, Imagick::COMPOSITE_OVER, $x ,$y );
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:24:23.330

尝试使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)和[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)将图像临时存储在本地服务器上：

```
<?php
$remote_image = file_get_contents("http://foo.com/remote_image.jpg");
file_put_contents("/tmp/remote_image.jpg", $remote_image);
$image = new Imagick("/tmp/remote_image.jpg");
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-11T08:34:45.047

我知道它很旧，但为了记录，这是一种更好的方法，无需保存到磁盘：

```
$image_url = 'http://example.com/input.jpg';
$imageBlob = file_get_contents($image_url);

$imagick = new Imagick();
$imagick->readImageBlob($imageBlob); 

header("Content-Type: image/jpeg");
echo $imagick->getImageBlob(); //for animated gifs - getImagesBlob() 
```

# ios - XCode 中的 Clang 错误

> ID：12518579
> 
> 赞同：8
> 
> 时间：2012-09-20T18:22:57.963
> 
> 标签：ios, xcode, cordova

我的应用程序在 xcode 4.4.1 中运行良好，但我刚刚更新到 4.5，现在遇到了 clang 错误。甚至不确定它在说什么，以前有没有人经历过这种情况，或者可以阐明我如何修复它？这是确切的错误：

```
Ld /Users/natehamilton/Library/Developer/Xcode/DerivedData/LCBCChurch-hacgcivdmhbavlecueatfvjbekxn/Build/Intermediates/LCBCChurch.build/Debug-iphoneos/LCBCChurch.build/Objects-normal/armv7s/LCBCChurch normal armv7s
    cd "/Users/natehamilton/Desktop/Current Projects/Work/Projects/Mobile App/LCBCChurch"
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/natehamilton/Library/Developer/Xcode/DerivedData/LCBCChurch-hacgcivdmhbavlecueatfvjbekxn/Build/Products/Debug-iphoneos -F/Users/natehamilton/Library/Developer/Xcode/DerivedData/LCBCChurch-hacgcivdmhbavlecueatfvjbekxn/Build/Products/Debug-iphoneos -F/Users/Shared/Cordova/Frameworks -filelist /Users/natehamilton/Library/Developer/Xcode/DerivedData/LCBCChurch-hacgcivdmhbavlecueatfvjbekxn/Build/Intermediates/LCBCChurch.build/Debug-iphoneos/LCBCChurch.build/Objects-normal/armv7s/LCBCChurch.LinkFileList -dead_strip -weak_framework UIKit -weak_framework AVFoundation -weak_framework CoreMedia -weak_library /usr/lib/libSystem.B.dylib -fobjc-link-runtime -miphoneos-version-min=5.1 -framework Foundation -framework UIKit -framework CoreGraphics -framework AddressBook -framework AddressBookUI -framework AudioToolbox -framework AVFoundation -framework CoreLocation -framework MediaPlayer -framework QuartzCore -framework SystemConfiguration -framework MobileCoreServices -framework CoreMedia -framework Cordova -o /Users/natehamilton/Library/Developer/Xcode/DerivedData/LCBCChurch-hacgcivdmhbavlecueatfvjbekxn/Build/Intermediates/LCBCChurch.build/Debug-iphoneos/LCBCChurch.build/Objects-normal/armv7s/LCBCChurch

ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/Shared/Cordova/Frameworks/Cordova.framework/Cordova for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-21T14:49:45.673

将“仅构建活动架构”更改为是，它会起作用 :) 干杯！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:27:15.673

该`armv7s`架构是 iPhone 5 中使用的新处理器类型。看起来您的 Cordova 框架尚未更新以支持该新处理器，因此当 clang 将 Cordova 链接到您的 iPhone 5 二进制应用程序时，它不能这样做成功。您需要获取 Cordova 的更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T23:36:56.563

**我通过在**我的项目和引用的 CordovaLib 项目的“构建设置”的“有效架构”字段下添加对各种架构的引用来使其工作。附上截图。（我使用 Xcode 来完成此操作，而不是按照 Jira 案例中某人的建议在文本编辑器中编辑 pbxproj 文件）。

唯一需要注意的是，此方法需要 Cordova 2.0+，因为这是第一个引用 Cordova 项目和源代码的版本。您需要使用这些设置构建 Cordova。如果您使用的是以前的版本并且不想升级，则必须获取源代码并通过对架构构建设置的此更改自行构建它。

更多信息：[https ://issues.apache.org/jira/browse/CB-1360](https://issues.apache.org/jira/browse/CB-1360)

![截屏](../Images/b75a536442cda45a6864e9a57c468dad.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T21:11:03.297

还没有为我解决任何问题，但是一些开发人员在[这个 url上取得了成功](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ywoc9wNydZ8)

# subclass - JavaScript - 创建派生类

> ID：12518584
> 
> 赞同：2
> 
> 时间：2012-09-20T18:23:12.887
> 
> 标签：subclass, derived-class

```
<html><head><script>
function Pet(){                                        // Base Class
    var owner = "Mrs. Jones";
    var gender = undefined;
    this.setOwner = function(who) { owner=who; };        //1
    this.getOwner = function(){ return owner; }
    this.setGender = function(sex) { gender=sex; }
    this.getGender = function(){ return gender; }
}

function Cat(){}                                       //subclass constructor
Cat.prototype = new Pet();  
Cat.prototype.constructor=Cat;
Cat.prototype.speak=function speak(){
    return("Meow");                                      //2
    };                                                   //3

function Dog(){};                                        //4     
Dog.prototype= new Pet();
Dog.prototype.constructor=Dog;
Dog.prototype.speak = function speak(){
    return("Woof");
    };                                                   //5

</script></head>
<body><script>

var cat = new Cat;
var dog = new Dog;
cat.setOwner("John Doe");
cat.setGender("Female");
dog.setGender("Male");
document.write(
     "<br>The cat is a "+ cat.getGender()+ " owned by "
     + cat.getOwner() +" and it says " + cat.speak());
document.write(
    "<br>The dog is a "+ dog.getGender() + " "
    + " owned by " + dog.getOwner() + " and it says " + dog.speak());
</script></body> 
```

1.  `//1`为什么在上面的代码中标记为、、、`//2`和`//3`的行的右花括号后有`//4`分号`//5`？
2.  何时将`Cat.prototype = new Pet();`被`Dog.prototype = new Pet();` 执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:01:34.320

嗯... JavaScript 不会自己在代码中的任何位置放置分号，编写脚本的人会这样做，对吗？然而，JavaScript 所做的是在你错过的空格中自动插入分号（不在你的代码中，至少不可见。它读取你的代码，然后它的行为就像你在编写它时有那些自动插入的分号一样）。这有时会产生意想不到的结果。

我建议在每条语句后使用分号，如这篇精彩的[文章中所述](http://remysharp.com/2007/11/21/javascript-style-why-its-important/)。

如果我正确理解了您的第二个问题，那么它是这样的：
Javascript 根据对象 Pet 的原型实例化新对象。然后将 Cat.prototype 指向这个新创建的对象。在 Dog 的情况下也会发生同样的事情。

# php - 使用 Youtube API 获取 JSON 时，使用的是哪个 IP？主机的还是用户的？

> ID：12518588
> 
> 赞同：0
> 
> 时间：2012-09-20T18:23:35.167
> 
> 标签：php, javascript, youtube, ip

我使用 Youtube API。我使用 Youtube API 和 javascript 请求即时搜索 Youtube 以获取 JSON 格式。它是使用用户的 IP 还是我的主机的 IP 来获取该信息？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:25:38.520

服务器端所做的一切都将使用您的服务器地址。客户端所做的一切都会有客户端地址。

如果您从用户的浏览器调用 JS，将使用用户的 IP 进行请求。

# asp.net-mvc - Telerik Menu 在菜单项（列表）中显示 Telerik Treeview

> ID：12518589
> 
> 赞同：0
> 
> 时间：2012-09-20T18:23:44.373
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

问题：我需要在具有
菜单显示名称的 Telerik 菜单项中呈现此 Telerik 树视图控件：位置。你能告诉我如何在 Telerik
菜单项中放置 Telerik 树视图控件（下面的确切代码），菜单名称为：'Locations'

示例：出于说明目的，“位置”是用虚线包围的菜单项，以便您理解。TreeView 控件是当我单击位置时将显示在菜单项（列表）中的控件。

* * *

地点

* * *

```
 TreeView Control 
```

当我单击菜单项位置时，树视图控件会显示。

这是 Telerik 控件的代码

**Telerik Treeview 的代码：**

```
 Html.Telerik().TreeView()
                               .Name("TreeView1")
                               .ShowCheckBox(true)
                               .BindTo(Model.SessionProvider.GetAvailableLocations, mappings =>
                            {
                                mappings.For<RegionEntity>(binding => binding
                                    .ItemDataBound((item, region) =>
                                                       {
                                                           item.Text = region.RecordName;
                                                           item.Value = region.ID.ToString();
                                                           //if (checkedNodes != null)
                                                           //{
                                                           //    var checkedNode = checkedNodes.Where(e => e.Value.Equals(employee.EmployeeID.ToString())).FirstOrDefault();
                                                           //    item.Checked = checkedNode != null ? checkedNode.Checked : false;
                                                           //} item.Expanded = true;
                                                       }).Children(location => location.Location));
                                mappings.For<LocationEntity>(binding => binding
                                                                            .ItemDataBound((item, location) =>
                                                                                               {
                                                                                                   item.Text = location.Name;
                                                                                                   item.Value =
                                                                                                       location.Number.ToString();
                                                                                               }));
                            }).Render(); 
```

**Telerik 菜单的代码。**

```
 Html.Telerik().Menu()
                                .OpenOnClick(false)
                                .Name("Locations")
                                .Items(parentItems=>
                                           {
                                               parentItems.Add().Content();

                                           }
                                           )
                                .HtmlAttributes(new { @class = "tab", style = "zIndex:9999;padding-right:3px;" })

                                .Render(); 
```

几分钟前我尝试执行以下操作，只要列表中有另一个文本项，树视图控件就会呈现，但它向右对齐：

```
<% Html.Telerik().Menu()
             .OpenOnClick(false)
           .Name("locations").HtmlAttributes(new { style = "background-color:transparent;min-height:150px" })
            .HtmlAttributes(new { @class = "tab", style = "zIndex:9999;padding-right:3px;" })
           .Items(items => 
           {
            items.Add()
                 .Text("Locations")
                 .Content(() => 
                 { 
                 %>
                <% Html.Telerik().TreeView()
                       .Name("TreeView1")
                       .ShowCheckBox(true)
                       .BindTo(Model.SessionProvider.GetAvailableLocations, mappings =>
                    {
                        mappings.For<RegionEntity>(binding => binding
                            .ItemDataBound((item, region) =>
                                               {
                                                   item.Text = region.RecordName;
                                                   item.Value = region.ID.ToString();
                                                   //if (checkedNodes != null)
                                                   //{
                                                   //    var checkedNode = checkedNodes.Where(e => e.Value.Equals(employee.EmployeeID.ToString())).FirstOrDefault();
                                                   //    item.Checked = checkedNode != null ? checkedNode.Checked : false;
                                                   //} item.Expanded = true;
                                               }).Children(location => location.Location));
                        mappings.For<LocationEntity>(binding => binding
                                                                    .ItemDataBound((item, location) =>
                                                                                       {
                                                                                           item.Text = location.Name;
                                                                                           item.Value =
                                                                                               location.Number.ToString();
                                                                                       }));
                    }).Render();%>   
                 <% 
                 });
       })
       .Render(); 
```

但如果没有“hello”（文本项），则树视图控件不会显示在菜单项列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:12:14.753

不确定这是否适用于菜单，但是当我实现嵌套网格时，我使用了一个文本块，其中包含我在 DetailView 属性中需要的其他控件。

也许您可以以相同的方式使用菜单项对象的 Text 或 Content 属性。

```
 Html.Telerik().Grid(model)
    .Name("grid")
    .ClientEvents(events => events.OnRowSelect("grid_onRowSelect"))
    .DataKeys(d => d.Add(a => a.ID).RouteKey(("Id")))
    .Columns(columns =>
            {
                columns.Bound(s => s.Name);
                columns.Bound(s => s.Type);
                columns.Bound(s => s.ID);
            })
    .DetailView(detailView => detailView.Template(
        @<text>
             @(Html.Telerik().Grid(item.T)
                .Name("T_" + item.ID )
                .Columns(columns =>
                {
                    columns.Bound(t => t.TemplateName)
                        .Template(t => Html.ActionLink(t.Name, "Index","Editor", new {id = t.ID},null));
                    columns.Bound(t => t.ID);
                })

             ) 
         </text>
        ))
    .Selectable()
    .Render(); 
```

# php - MySQL搜索两个表的价格

> ID：12518590
> 
> 赞同：2
> 
> 时间：2012-09-20T18:23:45.510
> 
> 标签：php, mysql, sql

我在编写查询时遇到问题，我有两个表。

1.  属性表（属性）

    *   ID
    *   property_name
    *   财产种类
    *   价格

有两种类型的财产，商业或住宅。如果类型是住宅，则价格是整个物业的价格。但是如果是商业类型，每个公寓的价格都不一样，比如一楼，一楼，二楼，三楼。等等。所以我做了第二张桌子

1.  物业价格表 (price_for_commerical_prop)，包含以下字段

    *   ID
    *   property_id
    *   floor_id
    *   价格

此表可能包含一个属性的多行，具体取决于该属性的单位数量。floor_id 包含值 0 表示一楼，1 表示一楼，依此类推。

我的问题是这样的。我有一个搜索字段来根据价格搜索房产。所以如果用户输入价格，我必须在第一张表和第二张表的价格字段中搜索价格。并根据搜索条件返回行。任何人都可以阐明如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:26:22.157

要搜索 10 到 20 的价格范围，您可以：

```
select  *
from    Property p
left join
        price_for_commerical_prop pfcp
on      p.id = pfcp.property_id
where   case 
        when p.property_type = 'residential' then p.price
        when p.property_type = 'commercial' then pfcp.price
        end between 10 and 20 
```

`case`返回`Property`住宅价格和商业价格`price_for_commerical_prop`。

# mysql - 在多个数组上生成熵并输出到 MySQL

> ID：12518591
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:23:52.827
> 
> 标签：mysql, perl, entropy

我有一个基于 MySQL 数据生成数组哈希的程序。每个数组中都有数值。使用 Perl，如何生成每个数组的熵并将结果输出到单独的 MySQL 表中？新表应具有以下列：

```
 ID         Array           Entropy
 -----      -----           -----
 1          topic(key)      entropy of all values belonging to the topic 
```

这是生成数组哈希的当前程序：

```
my %values_by_topic; 
my $sth = $dbh->prepare('SELECT Topic, Value FROM Table'); 
$sth->execute(); 
while (my $row = $sth->fetch()) {    
   my ($topic, $value) = @$row;     
   push @{ $values_by_topic{$topic} }, $value; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:06:34.420

你问了两个问题：

*   如何生成每个数组的熵？
*   如何在单独的 MySQL 表中输出结果？

首先是您告诉我们，我们帮助您实施。

第二个回答如下。

```
my $sth_select = $dbh->prepare('
   SELECT Topic,
          Value
     FROM Table1
    ORDER BY Topic
');

my $sth_insert = $dbh->prepare('
   INSERT INTO Table2
             Topic,
             Entropy
          ) VALUES (
             ?, ?
          )
'); 
```

```
my $last_topic;
my @values;
$sth_select->execute();
while (my $row = $sth_select->fetch()) {
    my ($topic, $value) = @$row;

    if (@values && $topic ne $last_topic) {
        my $entropy = calculate_entropy(@values);
        $sth_insert->execute($last_topic, $entropy);
        @values = ();
    }

    $last_topic = $topic;
    push @values, $value;
}

if (@values) {
    my $entropy = calculate_entropy(@values);
    $sth_insert->execute($last_topic, $entropy);
    @values = ();
} 
```

### 笔记：

对于给定的数据库句柄，某些数据库不能有两个打开的语句句柄。如果 MySQL 是这样的，只需创建两个数据库句柄。

锁定和事务留给读者作为练习。（或者有人可以编辑它。）

# actionscript-3 - Flex Bitmapimage Graphic 鼠标点击错误

> ID：12518593
> 
> 赞同：0
> 
> 时间：2012-09-20T18:23:55.253
> 
> 标签：actionscript-3, apache-flex

我添加了一个 BitmapImage 作为图形元素：

```
var bmp:BitmapImage = new BitmapImage();
var g:Graphic = new Graphic();

g.addElement(bmp);
myCanvas.addChild(g); 
```

现在，在 BitmapImage 左侧或顶部的 Mouse Click 事件中，`event.target`将`g`其作为目标而不是画布。当我不单击 BitmapImage 时，为什么`event.target`指向`g`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:32:13.407

event.target 不必总是指向您单击的对象。使用 event.currentTarget 获取发生点击交互的对象的引用。请参阅 livedocs.adobe.com 了解更多详细信息。

# python - 尝试从 MySql 获取所有行时获取 TypeError

> ID：12518594
> 
> 赞同：0
> 
> 时间：2012-09-20T18:23:56.250
> 
> 标签：python, mysql, python-3.x

我是 Python 的半新手，需要一些帮助。谷歌搜索没有发现太多。我在 python3 中使用 pymysql。我可以连接和查询我的数据库。当我尝试获取表中的所有行并遍历它们时，我得到了 erro `TypeError: 'int' does not support the buffer interface`。

```
query = conn.cursor()
query.execute("SELECT * FROM wp_options")
for row in query:
    print(row)
query.close() 
```

该表包含字符串和整数。理想情况下，我想遍历每一行并搜索一个值，但现在我什至无法获得该行。看起来异常是从`struct.unpack`in抛出的`unpack_int24`。任何帮助将不胜感激

**编辑**

在解决了一些问题后，我发现一列是`longtext`. 其他每个都可以正常使用此代码。如果我尝试从长文本字段中获取所有行，那么它会出错。为什么mysql中的Longtext会导致python错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:30:58.737

我相信您需要`rows = query.fetchall()`在查询对象上使用（或 fetchone() 或 fecthmany(n)）（在执行查询之后）以返回您现在将对其进行迭代的行：

```
query = conn.cursor()
query.execute("SELECT * FROM wp_options")
rows = query.fetchall()
for row in rows:
    print(row)
query.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:05:08.373

这是我找到的答案。当我尝试查询`longtext`包含大量数据的列的记录时，问题就出现了。问题是我正在使用的 mysql 适配器的一部分`pymysql`

看起来在 Python3 中 unpack_24、unpack_32、unpack_64 都失败了，因为它们得到的是字节而不是像 python2 这样的字符串。长数据抛出错误，没有异常处理。在这里找到了解决方案[http://code.google.com/p/pymysql/issues/detail?id=55](http://code.google.com/p/pymysql/issues/detail?id=55)

# php - 检查变量是否返回 true

> ID：12518597
> 
> 赞同：8
> 
> 时间：2012-09-20T18:24:14.823
> 
> 标签：php

如果变量为真，我想回显“成功”。（我最初写的“返回真”仅适用于函数。

```
$add_visits = add_post_meta($id, 'piwik_visits', $nb_visits, true);
if($add_visits == true){
         echo 'success';
} 
```

这是否相当于

```
$add_visits = add_post_meta($id, 'piwik_visits', $nb_visits, true);
if($add_visits){
         echo 'success';
} 
```

或者 $add_visits 是 'true' 还是 'false' 是否存在；

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T18:32:28.243

您可能要考虑：

```
if($add_visits === TRUE){
     echo 'success';
} 
```

这将检查您的值是否为 TRUE 和布尔类型，这样更安全。照原样，如果 $add_visits 以字符串“fail”的形式返回，您的代码将回显成功，这很容易导致您的数据库在发送请求后失败。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-20T18:26:15.643

测试`$var == true`不仅仅是测试`$var`。

您可以在比较运算符上阅读[此 SO 问题。](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)您还可以阅读有关此主题的[PHP 手册。](http://php.net/manual/en/language.operators.comparison.php)

注意：变量不*返回* `true`。是，或者**计算结果****为** 。但是，函数**返回**.`true`**`true` **`true`****

 ***** * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T18:26:47.480

他们是一样的。

这个...

```
if ($add_visits == true)
    echo 'success'; 
```

...是相同的：

```
if ($add_visits)
    echo 'success'; 
```

以同样的方式，您还可以像这样测试条件是否为假：

```
if (!$add_visits)
    echo "it's false!"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T18:27:36.650

是的，那会很好。

```
//true
if($variable) echo "success";
if($variable == true) echo "success";

//false
if(!$variable) echo "failure";
if($variable == false) echo "failure"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T18:35:39.440

```
if($add_visits === TRUE) 
```

应该做的伎俩。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-28T19:15:38.887

最安全的方法是使用 php 验证。如果 ajax 发布到 php：

```
$isTrue=filter_var($_POST['isTrue'], FILTER_VALIDATE_BOOLEAN); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-18T02:13:36.923

不合规代码示例

```
if ($booleanVariable == true) { /* ... */ }
if ($booleanVariable != true) { /* ... */ }
if ($booleanVariable || false) { /* ... */ } 
```

做某事（！假）；

```
Compliant Solution
if ($booleanVariable) { /* ... */ }
if (!$booleanVariable) { /* ... */ }
if ($booleanVariable) { /* ... */ } 
```

做某事（真）；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-06T19:47:48.153

```
if (isset($add_visits) && $add_visits === TRUE){
     echo 'success';
} 
```

可能看起来是多余的，但是 PHP 会抛出一个`Notice`if `$add_visits`is not set。这将是测试变量是否为真的最安全方法。****

# java - 如何协调多个类对私有对象的同步

> ID：12518599
> 
> 赞同：2
> 
> 时间：2012-09-20T18:24:19.463
> 
> 标签：java, multithreading, synchronization, synchronized

众所周知，建议在**最终[私有](https://stackoverflow.com/questions/442564/avoid-synchronizedthis-in-java)对象**上进行同步（而不是在`this`数据`protected`成员上同步）。

但是当我的应用程序中有多个类（模块）需要在一个公共对象上同步时会发生什么？

有没有办法调和这两个看似矛盾的要求？

为了更好地解释，如果我有一个类的私有数据成员`Owner`定义为：

```
private final Object $01pfo = new Object[0]; 
```

然后任何方法都`Owner`可以简单地使用它：

```
 protected void anyMethod()  {
    synchronized ($01pfo) {
          // do your thing
    }
  } 
```

但是如果我想`$01pfo`从不同的类（比如`User`）同步，我唯一的选择是`$01pfo`保护还是公开？

```
protected final Object $01pfo = new Object[0]; 
```

有更好的方法吗？或解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:42:21.613

我考虑使用关键字的包隐私`protected`作为黑客。在您的用例中，这些类似乎正在协作以同步方式执行特定任务。我将在启动此任务的类/方法中定义一个 Lock 对象，并通过作为构造函数参数传递，显式地将[Lock对象提供给所有涉及的类。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:20:48.980

如果同步块没有分布在多个对象中，它们会很好地工作。

如果您需要在多个类中使用单个锁来同步操作 - 最好查看 [Lock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)实现。

它将为您提供更多的自由来细化对多个线程中的资源的访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:55:03.897

您提供的链接清楚地说明了考虑私有最终而不是这种情况的情况：

*   我们正在谈论实例同步；
*   如果您需要除 synchronized(this) 之外的锁定粒度，则 synchronized(this) 不适用，因此这不是问题。

当您需要另一个粒度时，请随意使用另一个同步对象。顺便说一句，在你的例子中，

```
 private final Object $01pfo = new Object() 
```

就足够了。

# php - CodeIgniter中替换字符串的命令是什么

> ID：12518600
> 
> 赞同：-5
> 
> 时间：2012-09-20T18:24:20.410
> 
> 标签：php, html, codeigniter

例如在 CodeIgniter 中替换字符串的命令是什么

原始字符串是 www.example.com/imges/fraudsite.html

替换字符串是 www.example.com/imges/fraudsite.zip

只想在（点）之后全部替换

谢谢 Sodmeb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:31:13.347

你应该更准确地解释你想要什么。如果您想要一条路线 - 使用`routes.php`文件将原始 URL 重新路由到您的替代品，或者使用 @vascowhite 在他对您的问题的评论中建议的内容。

如果它是您需要的路由，请在应用程序`routes.php`文件夹中的文件中添加一行：`config`

```
$route['imges/fraudsite.zip'] = "imges/fraudsite.html"; 
```

如果它只是你想要的字符串：

```
$string = "www.example.com/imges/fraudsite.html";
$string = str_replace(".html", ".zip", $string); 
```

正如您在评论中指出的那样，您需要将超出最后一个点的所有内容更改为`zip`，您必须使用：

```
$str = "www.example.com/imges/fraudsite.html";
$str = substr($str, 0, strrpos($str, '.', -1)).".zip"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:31:52.060

$test = "你好世界！";

```
$test = word_censor($test,"Hello","Bye");

echo $test;

//Bye world! 
```

# c - 在 OpenGL 中更改投影

> ID：12518603
> 
> 赞同：0
> 
> 时间：2012-09-20T18:24:38.497
> 
> 标签：c, opengl, glut

我在调整 GLUT 窗口大小时遇到​​问题。我想打印一个矩形，但是当我使用调整大小功能时，我似乎无法在窗口中绘制和塑造。我有以下代码，我想在调整窗口大小时改变正方形的宽度，但如果调整高度，我不希望它的高度改变。

```
#include <GLUT/glut.h>
#include <stdio.h>
#include <stdlib.h>
/* globals */
GLsizei wh = 500, ww = 500; 
/* initial window size */ 
GLfloat size = 3.0; 
/* half side length of square */

void myinit(void)
{
    glClearColor(0.0,0.0,1.0,1.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0,1,0,1.0,-1.0,1.0);
    glViewport(0,0,ww,wh);
}

/* display callback -- required by GLUT 3.0 */
void renderScene(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor3f(1.0,.5,.7);
    glBegin(GL_POLYGON);
        glVertex3f (0.25, 0.25, 0.0);
        glVertex3f (0.75, 0.25, 0.0);
        glVertex3f (0.75, 0.75, 0.0);
        glVertex3f (0.25, 0.75, 0.0);
    glEnd();

    glFlush();
}

void mouse(int button, int state, int x, int y) {
    if(button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN) {
       glMatrixMode(GL_PROJECTION);
       glLoadIdentity();
       glOrtho(0.0,500,0.0,500,0.0,1.0);
   }
}
/*app quits if q is pressed*/
void keyboard(unsigned char key, int x, int y) {
     if(key == 'Q' | key == 'q')
        exit(0);
}

/* The main program -- note that there is no "flow of control" -- the program merely calls          functions to handle interactions */
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitWindowSize(ww,wh);
    glutInitWindowPosition(100,100);
    glutCreateWindow("Square");

    myinit();

    glutMouseFunc(mouse);
    glutKeyboardFunc(keyboard);
    glutDisplayFunc(renderScene);
    //glutReshapeFunc(changeSize);
    glutMainLoop();
    return 0;
} 
```

我做了一个测试 changeSize 函数，当我使用它时，它只会显示一个空的蓝色窗口，其中没有矩形

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:37:48.677

您的问题在于对正交矩阵使用固定值：

`glOrtho(0.0,500,0.0,500,0.0,1.0);`

这就是说，不管我的窗口有多大，将地图的顶点位置`0`映射到窗口的底部，并`500`映射到窗口的顶部。

因此，如果您有一个 500 像素高的窗口，并且您绘制了一个覆盖 100 个单位的正方形，这将映射到窗口中的 100 像素。

但是，如果您将窗口拉伸到 1000 像素高，那么现在您有一个从 0 到 500 的区域映射到高度为 1000 像素的窗口。因此，以前覆盖 100 像素高度的同一个正方形现在覆盖了 200 像素高度。

如果您希望它在调整大小时始终保持相同大小，则需要更新正交矩阵以将更大的区域映射到新的更大窗口。因此，如果您更改正交矩阵以将区域映射`0 to windowHeight`到窗口，则 100 个单位的正方形将始终填充完全相同的高度。

```
glOrtho( 0.0, //left
         500, //right
         0.0, //bottom
         height_in_pixels, //top
         0.0,   //near 
         1.0);  //far 
```

# puppet - 将域用户帐户添加到本地组 Windows Puppet

> ID：12518604
> 
> 赞同：1
> 
> 时间：2012-09-20T18:24:43.753
> 
> 标签：puppet

我正在尝试为本地管理员组设置一个 Windows 域用户帐户，根据 puppet 文档是可能的。

```
user { 'DOMAIN\user':
    groups => ['Administrators'],
} 
```

我尝试使用 SID 没有结果。我正在使用最新的 Puppet 2.7.19

```
err: /Stage[main]/Teamcity_base/User[S-1-5-21-1759977473-2015113658-625696398-26
038]/ensure: change from absent to present failed: User update failed: SetInfo
    OLE error code:8007089A in Active Directory
      The specified username is invalid.

    HRESULT error code:0x80020009
      Exception occurred. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T17:31:25.410

我当前的解决方法是使用“net localgroup”命令运行批处理文件的自定义模块：

```
net localgroup administrators domain\user /add 
```

我的 init.pp 使用 subscribe 检测到批处理文件的更改：

```
class admin {
  $exe_name = "add_admin_users.bat"
  $location = "puppet:///modules/${module_name}/${exe_name}"
  $on_disk = 'C:\add_admin_users.bat'

  file { $on_disk:
    ensure => file,
    source => $location,
    mode   => '750',
  }

  exec { $on_disk:
    subscribe => File[$on_disk],
    refreshonly => true
  }

} 
```

不理想，因为它不会在尝试添加之前检查用户是否存在，而是关闭。

# python - 显示文本的 PyGTK 对象

> ID：12518609
> 
> 赞同：0
> 
> 时间：2012-09-20T18:25:00.993
> 
> 标签：python, textview, pygtk, statusbar, glade

我正在搜索显示文本（仅一行）的 GTK 对象，但我需要文本比状态栏中的文本更大（也许我可以更改字体和斜体/粗体等）。

通常，我创建了一个 GTKStatusbar，当我单击按钮时会显示文本。（我用 Glade 创建了程序）：

```
self.statusbar = self.builder.get_object("statusbar")
self.searchbutton = self.builder.get_object("searchbutton")

def on_searchbutton_clicked(self, widget):
    self.statusbar.push(1, "Hello world!") 
```

但是使用这种方法，我无法显示更大字母大小的文本。

你能帮我解决我的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:22:06.077

A`Gtk.Label`有一个名为的属性`"use-markup"`，可让您在标签中使用[Pango 文本标记](http://developer.gnome.org/pango/stable/PangoMarkupFormat.html)。例如：

```
label = Gtk.Label()
label.set_use_markup(True)
label.set_markup("<big>This is bigger text</big>") 
```

您可以将`GtkLabel`用作状态栏（用于非常非常简单的状态栏），也可以将`GtkStatusbar`标签扩展并打包到其中。

# c# - XML 文档 System.Net.WebException

> ID：12518612
> 
> 赞同：0
> 
> 时间：2012-09-20T18:25:05.690
> 
> 标签：c#, exception

我的这部分代码抛出异常。我该如何解决？

```
XmlDocument locrequest = new XmlDocument();
locrequest.Load(String.Format("http://api.geoips.com/ip/{0}/key/.myapikey./output/xml/", player.IP));
XmlNode root = locrequest.DocumentElement;
string from = root.SelectSingleNode("country_name").InnerText.ToLower(); 
```

> System.Net.WebException：错误：ConnectFailure（没有足够的缓冲区空间可用）

完全错误[http://pastebin.com/8u6MpeWS](http://pastebin.com/8u6MpeWS)

编辑：如果我添加 `locrequest.XmlResolver = null;` 它会引发另一个异常：

> System.NullReferenceException：对象引用未设置为对象的实例

那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:27:35.973

您可以使用`WebRequest`类来加载文件

链接：http: [//msdn.microsoft.com/library/system.net.webrequest.aspx](http://msdn.microsoft.com/library/system.net.webrequest.aspx)

```
WebRequest request = WebRequest.Create ("...");
// If required by the server, set the credentials.
request.Credentials = CredentialCache.DefaultCredentials;
// Get the response.
WebResponse response = request.GetResponse ();
// Display the status.
Console.WriteLine (((HttpWebResponse)response).StatusDescription);
// Get the stream containing content returned by the server.
Stream dataStream = response.GetResponseStream ();
..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:35:01.777

以阿吉拉斯的帖子为基础...

返回的流是不可搜索的流，因此您需要使用类似于以下的函数读取到它的末尾：

```
static byte[] readFullStream(Stream st)
    {
        Array Buffer = (byte[])Array.CreateInstance(typeof(byte), 32768);
        System.Int32 Size;
        bool eof = false;
        MemoryStream ms = new MemoryStream();
        while (!eof)
        {
            Size = st.Read((byte[])Buffer, 0, Buffer.Length);
            if (Size > 0)
            {
                ms.Write((byte[])Buffer, 0, Size);
            }
            else
            {
                eof = true;
            }
        }
        return ms.ToArray();
    } 
```

然后，一旦您从上面的函数中获得字节数组，就可以使用它加载您的 XmlDocument。

请记住，我们从 Aghilas 代码的底部开始......

```
byte[] buffer = readFullStream(dataStream);
XmlDocument locrequest = new XmlDocument();
locrequest.LoadXML(new UFT8Encoding().GetString(buffer)); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:05:00.047

英戈，

[在您针对此问题的](https://stackoverflow.com/questions/12504562/how-to-extract-a-value-of-a-http-xml-answer/12504707)原始帖子的基础上，也许这会为您更清楚地组合在一起。假设手头有一些更基本的连接失败，而不仅仅是服务器出于某种原因不接受连接，您可以绕过 XmlDocument 类的默认 Load() 机制，正如 Aghilas 指出的那样， WebRequest 对象。

WebRequest 对象联系您指定的 URL，然后使用 Request/Response 模型创建一个 Response 对象。从该 Response 对象，您可以通过 GetResponseStream() 方法获取响应数据的*流；*这就是阿吉拉斯所展示的。然后，您可以将该流放在他的示例中的变量 dataStream 中，并将其传递给需要 Stream 的 XmlDocument.Load() 方法的重载：

```
 //assuming prior code from Aghilas is here as appropriate...
   Stream dataStream = response.GetResponseStream();
   XmlDocument locRequest = new XmlDocument();
   locRequest.Load(dataStream); 
```

希望这可以帮助。

# python - 我正在尝试将 Python 列表导出到 .txt 文件，但文本文件的行数太少

> ID：12518615
> 
> 赞同：1
> 
> 时间：2012-09-20T18:25:12.297
> 
> 标签：python, export

我有一个包含 4196 个元素的列表（列表），全部等于 -1 或 1。我想将列表导出到 .txt 文件。这是我使用的代码：

```
file = open('file.txt','w')
for item in List:
     print>>file, item 
```

出于某种原因，.txt 文件只有 2870 个元素。（当我尝试另一种导出列表的方式时发生了同样的事情，但我知道有 4196 个元素！）

谢谢你的帮助，

扎克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T18:34:35.123

您需要关闭该文件。您不能轻易地从行数中分辨出来，但我希望文件的大小为 4096 或 8192，这表明只有整数个块已被刷新。调用后`file.close()`，应写入其余数据。

您可以使用`with`语句[自动关闭文件](http://docs.python.org/library/stdtypes.html#file.close)：

```
with open('file.txt','w') as file:
    for item in List:
        print>>file, item 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T18:37:15.637

像这样的东西？

```
List = open("file.txt").read()
new = []
ff = open("new_file.txt", 'w')
for i in List:
    new.append(i)
ff.write(str(new))
ff.close() 
```

# java - 将 JSON 反序列化为现有对象 (Java)

> ID：12518618
> 
> 赞同：48
> 
> 时间：2012-09-20T18:25:19.523
> 
> 标签：java, json, jackson, deserialization

我想知道如何让 Jackson JSON 库将 JSON 反序列化为现有对象？我试图找到如何做到这一点；但它似乎只能接受一个类并自己实例化它。

或者如果不可能，我想知道是否有任何 Java JSON 反序列化库可以做到这一点。

这似乎是 C# 的相应问题：[Overlay data from JSON string to existing object instance](https://stackoverflow.com/questions/5157079/overlay-data-from-json-string-to-existing-object-instance)。JSON.NET 似乎有一个 PopulateObject(string,object)。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-11-22T20:19:44.060

您可以使用 Jackson 执行此操作：

```
mapper.readerForUpdating(object).readValue(json); 
```

另请参阅[使用 Jackson 合并两个 JSON 文档](https://stackoverflow.com/questions/9895041/merging-two-json-documents-using-jackson)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:17:43.477

如果您可以使用另一个库而不是 Jackson，您可以尝试 Genson [http://owlike.github.io/genson/](http://owlike.github.io/genson/)。除了其他一些不错的功能（例如使用不带任何注释的非空构造函数进行反序列化、反序列化为多态类型等）之外，它还支持将 JavaBean 反序列化为现有实例。这是一个例子：

```
BeanDescriptorProvider provider = new Genson().getBeanDescriptorFactory();
BeanDescriptor<MyClass> descriptor = provider.provide(MyClass.class, genson);
ObjectReader reader = new JsonReader(jsonString);
MyClass existingObject = descriptor.deserialize(existingObject, reader, new Context(genson)); 
```

如果您有任何问题，请不要犹豫，使用它的邮件列表[http://groups.google.com/group/genson](http://groups.google.com/group/genson)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-06T07:25:55.107

如果您使用的是 spring 框架，您可以使用 BeanUtils 库来完成此任务。首先正常反序列化您的 json 字符串，然后使用 BeanUtils 将此对象设置在父对象中。它还期望在父对象内设置对象的变量名。这是代码片段：

```
childObject = gson.fromJson("your json string",class.forName(argType))
BeanUtils.setProperty(mainObject, "childObjectName", childObject); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T18:23:49.937

我使用 Jackson + Spring 的 DataBinder 来完成这样的事情。此代码处理数组但不处理嵌套对象。

```
private void bindJSONToObject(Object obj, String json) throws IOException, JsonProcessingException {
    MutablePropertyValues mpv = new MutablePropertyValues();
    JsonNode rootNode = new ObjectMapper().readTree(json);
    for (Iterator<Entry<String, JsonNode>> iter = rootNode.getFields(); iter.hasNext(); ) {
        Entry<String, JsonNode> entry = iter.next();
        String name = entry.getKey();
        JsonNode node = entry.getValue();
        if (node.isArray()) {
            List<String> values = new ArrayList<String>();
            for (JsonNode elem : node) {
                values.add(elem.getTextValue());
            }
            mpv.addPropertyValue(name, values);
            if (logger.isDebugEnabled()) {
                logger.debug(name + "=" + ArrayUtils.toString(values));
            }
        }
        else {
            mpv.addPropertyValue(name, node.getTextValue());
            if (logger.isDebugEnabled()) {
                logger.debug(name + "=" + node.getTextValue());
            }
        } 
    }
    DataBinder dataBinder = new DataBinder(obj);
    dataBinder.bind(mpv);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T18:25:19.523

一种解决方案是解析一个新的对象图/树，然后统一复制到现有的对象图/树中。但这当然效率较低，工作量更大，尤其是在具体类型因类型信息可用性较低而不同的情况下。（所以不是真正的答案。希望有更好的答案，只是想避免其他人以这种方式回答。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T12:34:35.960

flexJson 也可以帮助你做同样的事情。

这是从[FlexJson Doc复制的示例](http://flexjson.sourceforge.net/#Deserialization)

deserializeInto 函数获取您的字符串和对现有对象的引用。

```
 Person charlie = new Person("Charlie", "Hubbard", cal.getTime(), home, work );
 Person charlieClone = new Person( "Chauncy", "Beauregard", null, null, null );
 Phone fakePhone = new Phone( PhoneNumberType.MOBILE, "303 555 1234");
 charlieClone.getPhones().add( fakePhone ); 
 String json = new JSONSerializer().include("hobbies").exclude("firstname", "lastname").serialize( charlie ); 
 Person p = new JSONDeserializer<Person>().deserializeInto(json, charlieClone); 
```

请注意，在 p 中返回的引用与 charlieClone 相同，只是具有更新的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-16T20:44:15.680

总是可以加载到一个虚拟对象中并使用反射来传输数据。如果您一心只想使用 gson

例子。假设此代码在您要将数据复制到的对象中

```
 public void loadObject(){
Gson gson = new Gson();
//make temp object
YourObject tempStorage = (YourObject) gson.fromJson(new FileReader(theJsonFile), YourObject.class);
//get the fields for that class
ArrayList<Field> tempFields = new ArrayList<Field>();
ArrayList<Field> ourFields = new ArrayList<Field>();
getAllFields(tempFields, tempStorage.getClass());
getAllFields(thisObjectsFields, this.getClass());
for(Field f1 : tempFields){
    for(Field f2 : thisObjectsFields){
        //find matching fields
        if(f1.getName().equals(f2.getName()) && f1.getType().equals(f2.getType())){
            //transient and statics dont get serialized and deserialized.
            if(!Modifier.isTransient(f1.getModifiers())&&!Modifier.isStatic(f1.getModifiers())){
                //make sure its a loadable thing
                f2.set(this, f1.get(tempStorage));
            }
        }
    }
} 
```

}

```
public static List<Field> getAllFields(List<Field> fields, Class<?> type) {
    for (Field field : type.getDeclaredFields()) {
        fields.add(field);
    }
    if (type.getSuperclass() != null) {
        fields = getAllFields(fields, type.getSuperclass());
    }
    return fields;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-19T04:38:03.527

您可以使用我的存储库:)。

```
Object yo = //yourObject
String js = //json source

Map remote = Object$.remoteMap(yo, false); //or you can use Bean.forInstance(yo);
Reader reader = new StringReader(js);//you can replace this with any reader :)
AtomicReference buffer = new AtomicReference(remote);

try {
    JSON.global.parse(buffer, reader, null, null);
} catch (IOException ignored) {
    //If any exception got thrown by the reader
} 
```

这样，JSON 会将值解析为它在缓冲区中找到的映射。如果地图包含一个列表，并且 JSON 值也有一个列表。地图上的列表不会被替换。相反，它将用于包含值。

如果你使用`Bean.forInstance(yo)`返回的远程地图会有一些额外的功能。

**存储库：**

实用程序仓库（必需）：[`github.com/cufyorg/util`](https://github.com/cufyorg/util)

基础回购（必需）：[`github.com/cufyorg/base`](https://github.com/cufyorg/base)

JSON 存储库（必需）：[`github.com/cufyorg/json`](https://github.com/cufyorg/json)

豆回购（可选）：[`github.com/cufyorg/beans`](https://github.com/cufyorg/beans)

# sql - 是否可以在 sqlalchemy 中搜索字符串范围

> ID：12518624
> 
> 赞同：0
> 
> 时间：2012-09-20T18:25:30.143
> 
> 标签：sql, sql-server, string, sqlalchemy, range

我有一个将 HOUSENUM 作为字符串的表。数字可以是 200 或 200A（带有恰当字母的数字）。我需要使用一系列门牌号码过滤表格中的结果，即。100-450。刚开始我尝试过：

```
request=request.filter(table.HOUSENUM.between ('100', '450')) 
```

它返回一切。

添加到数字中的字母使其更具挑战性。知道如何获得范围之间的所有数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:11:10.670

我无法在 sqlalchemy 中做我想做的事，所以我使用以下代码库在 MSSQL 中的表中添加了一个列：

```
Declare @X     varchar(100)
Select     @X=    '11AA'

select 
cast(
case  
    WHEN @x NOT LIKE '%[0-9]%'   THEN 0 --Needed to check if accidental letters only
    when SubString(@X,0,PATINDEX('%[^0-9]%',@X))> 0  --returns 0 if no letters after number
    then SubString(@X,0,PATINDEX('%[^0-9]%',@X))  -- returns just numbers if letters after number
    else @X
end
  as int)
     as number 

--// shows result '11' 
```

如果数字前有字母，则可以使用以下方法去除数字前的字母：SubString(@X,PATINDEX('%[0-9]%',@X),Len(@X))

源自帖子：[http ://forums.asp.net/post/1035324.aspx](http://forums.asp.net/post/1035324.aspx)

# ruby-on-rails - 在Rails 3中保存之前获取多态父级的属性？

> ID：12518625
> 
> 赞同：0
> 
> 时间：2012-09-20T18:25:33.750
> 
> 标签：ruby-on-rails, ruby, polymorphism

我有车辆，每个可以有很多预订。每个预订可以有许多事件。当我针对现有车辆验证新的预订和活动时，就会出现这个问题。

在验证 Event 模型时，我需要遍历 Vehicle 并找到所有 Bookings 和任何可能与新的 Bookings 冲突的 Event，然后才实际保存新的 Bookings 和 Event。

```
Class Event < ActiveRecord::Base
  belongs_to :eventable, :polymorphic => true
end

Class Booking < ActiveRecord::Base
  belongs_to :vehicle
  has_many :events, :as => :eventable
end

Class Vehicle < ActiveRecord::Base
  has_many :bookings
end 
```

创建预订时，它具有车辆 ID。如何在 Event 模型中获取 vehicle_id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:31:05.473

您通常会将 validates_uniqueness_of 与 :scope 一起使用，但此处的连接关联不会那样工作。这是自定义唯一性验证器的示例：

```
class Booking
  # Create a custom validation
  validate :verify_unique_vehicle_date

private
  def verify_unique_vehicle_date
    if booking = Booking.includes(:events).where('vehicle_id = ? AND events.date IN (?)', self.vehicle_id, self.events.map(&:date)).first
      errors.add(:vehicle, "already booked on #{booking.events.map(&:date).join(',')}")
    end
  end
end 
```

# jquery - jqueryUI autoComplete，如何检查是否没有返回数据

> ID：12518633
> 
> 赞同：0
> 
> 时间：2012-09-20T18:25:59.190
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我让 jQueryUI 自动完成工作。现在我需要添加另一个警报框，如果没有返回结果。我想说

```
alert("sorry, no data found"); 
```

我不确定如何将它添加到我现有的代码中。

```
 $("#searchbox").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/SearchIngredients",
                    dataType: 'json',
                    data: request,
                    success: function (data) {
                        response(data.map(function (value) {
                            return {
                                'label': value.Value,
                                'value': value.Value,
                                'id': value.Id
                            };
                        }));
                    }
                });
            },
            minLength: 2,
            select: function (event, ui) {
                $("#searchItemId").val(ui.item.id);
                $("#searchItemName").val(ui.item.value);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:33:44.930

```
 $("#searchbox").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Home/SearchIngredients",
                dataType: 'json',
                data: request,
                success: function (data) {
                    if(data.length == 0){
                      alert("no data");
                    }
                    else
                    response(data.map(function (value) {
                        return {
                            'label': value.Value,
                            'value': value.Value,
                            'id': value.Id
                        };
                    }));
                }
            });
        },
        minLength: 2,
        select: function (event, ui) {
            $("#searchItemId").val(ui.item.id);
            $("#searchItemName").val(ui.item.value);
        }
    }); 
```

# jquery - 带有交替输入的Jquery Datepicker内联

> ID：12518637
> 
> 赞同：0
> 
> 时间：2012-09-20T18:26:15.227
> 
> 标签：jquery, jquery-ui-datepicker

我正在尝试设置一个内联 DatePicker，它将在选择时更新 #StartDate altField，然后在下一次选择时更新 #EndDate altField。

因此，它使用相同的内联日历来更新本质上是具有两个输入的日期范围。这方面似乎有很多资源，但没有一个与内联日期选择器有关。

我正在努力让第二个 altField 更新。每个选择只更新第一个 altField。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:04:59.620

您可以使用 onSelect 事件处理程序在每次选择日期时更新 datepicker 的 altField：

```
 $( "#datepicker" ).datepicker({
            inline:true,
            altField: "#startDate",
            onSelect: function(date, ui){
                ui.settings.altField = (ui.settings.altField=="#startDate") ? "#endDate" : "#startDate";
            }
        }); 
```

不过，我会小心你如何使用它。这似乎很容易使用户界面混乱。

# excel - microsoft excel添加相互依赖的单元格

> ID：12518639
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:26:20.377
> 
> 标签：excel, cells

有没有办法在 Excel 中添加两个单元格，其中一个单元格是根据另一个单元格中输入的内容计算的？基本上类似于提供原始基值的值和百分比字段。

例子：

```
Cell 1 - Original Value
Cell 2 - Set Value amount
Cell 3 - Set Percentage 
```

因此，如果 Cell 1 预设为 1000，而 Cell 2 和 Cell 3 为空。

*   在单元格 2 中输入 350 计算单元格 3 并将其设置为 35%
*   在单元格 3 中输入 35% 计算单元格 2 并将其设置为 350

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:28:51.687

调用可以包含公式或值。如果您需要更高级的东西，我相信您必须在特定于您的项目的 VBA 中进行设置。

# css - 如何删除 div 上的边框部分以使左侧导航看起来与主要内容部分无缝？

> ID：12518642
> 
> 赞同：2
> 
> 时间：2012-09-20T18:26:31.203
> 
> 标签：css, twitter-bootstrap

我正在尝试删除活动菜单项与右内容 div 相遇的左边框。

见[http://d.pr/i/hfRZ+](http://d.pr/i/hfRZ+)

所以看起来活动元素与主要内容div的级别相同，就像这个[http://dribbble.com/shots/663779-Left-navigation](http://dribbble.com/shots/663779-Left-navigation)

如果重要的话，我正在使用 twitter bootstrap。

任何指针都非常感谢！

编辑：这里是 HTML/CSS 的链接

**查看：** [http ://codepen.io/anon/full/Asrnm](http://codepen.io/anon/full/Asrnm)

**编辑** [http://codepen.io/anon/pen/Asrnm](http://codepen.io/anon/pen/Asrnm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:09:53.620

您不能部分移除边框，您只能将它们遮盖起来。您需要使所选项目与边框重叠（或有一个脚本将另一个元素放在边框上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:43:48.897

我拍了一个演示：[http ://dabblet.com/gist/3762742](http://dabblet.com/gist/3762742)

使用 :after 与父级的 1px 宽度和背景颜色重叠右框的边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:16:10.137

您可以让所选项目只有一个顶部和底部边框

```
.selected-item
{
    border-top: 1px solid rgba(0, 0, 0, 0.5);
    border-bottom: 1px solid rgba(0, 0, 0, 0.5);
} 
```

或者

```
.selected-item
{
    border: 1px solid rgba(0, 0, 0, 0.5);
    border-left: 0px;
    border-right: 0px;
} 
```

并且为了避免框阴影逃离父容器，您可以将其替换为

```
.selected-item:after
{
    display: block;
    position: absolute;
    height: 10px;
    background: url("gradient.gif") top left repeat-x;
} 
```

这样，您会在元素下方获得一致的水平阴影，一直到但不超过父元素及其边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T14:02:06.973

```
.selected-item {
  border-left: 0px;
  border-top: 0px;
  border-right: 0px;
  border-bottom: 0px
} 
```

# jquery - 悬停在链接上的 jQuery 显示隐藏的 div

> ID：12518646
> 
> 赞同：1
> 
> 时间：2012-09-20T18:26:36.570
> 
> 标签：jquery

当链接悬停时，我试图显示一些隐藏的内容。每个链接的内容都是唯一的。我让它工作正常，但我知道 jQuery 代码很糟糕。我认为“.this”是秘密，但我无法让它发挥作用。有什么想法吗？这是有史以来最丑陋的低效废话 jQuery，但我正在努力解决这个问题。谢谢！

jQuery

```
 $(document).ready
      (
        function(){
            $(".short-term-trigger").hover(function(){
             $(".short-term").toggleClass("visible");
             });
          }
    )

    $(document).ready
      (
        function(){
            $(".medium-term-trigger").hover(function(){
             $(".medium-term").toggleClass("visible");
             });
          }
    )

    $(document).ready
      (
        function(){
            $(".long-term-trigger").hover(function(){
             $(".long-term").toggleClass("visible");
             });
          }
    )

    $(document).ready
      (
        function(){
            $(".retirement-trigger").hover(function(){
             $(".retirement").toggleClass("visible");
             });
          }
    ) 
```

HTML

```
<ul id="goal-btns">
            <li><a class="short-term-trigger" href="#">Short-Term Gains</a></li>
            <li><a class="medium-term-trigger" href="#">Medium Term Goals</a></li>
            <li><a class="long-term-trigger" href="#">Long Term Goals</a></li>
            <li><a class="retirement-trigger" href="#">Retirement</a></li>
        </ul>

        <div class="talk-bubble hang-left short-term">
            <p class="bubble-text">I’ll need the money is less than 12 months.</p>
        </div><!--/short-gains-->

        <div class="talk-bubble hang-right medium-term">
            <p class="bubble-text">I don’t need the money immediately but may need it within the next 6-10 years.</p>
        </div><!--/short-gains-->

        <div class="talk-bubble hang-right long-term">
            <p class="bubble-text">I’m investing for the long-term.</p>
        </div><!--/short-gains-->

        <div class="talk-bubble hang-right retirement">
            <p class="bubble-text">I’m investing for my retirement.</p>
        </div><!--/short-gains--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:36:42.003

尝试以下操作：

```
$(document).ready(function() {
    $('#goal-btns li a').hover(function() {
        var cls = this.className.replace('-trigger', '');
        $("."+cls).toggleClass("visible");
    });
}) 
```

[http://jsfiddle.net/2NnX9/](http://jsfiddle.net/2NnX9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:39:50.420

Nowadays, the usage of `data-*` attributes is common for hold relevant information about the events associated to an element.

First you could use an data-attribute to keep track of the elements you want to apply an action to, `data-linker`.

```
<a data-linker href="#">Retirement</a> 
```

And an alternative data-attribute holding a relevant information i.e. options related to the action to be applied, `data-linker-target`.

```
<a data-linker data-linker-target=".retirement" href="#">Retirement</a> 
```

A basic jQuery function may be:

```
$.fn.linker = function(){
  return this.each(function(){
    var $this = $(this), data = $this.data(), $target = $(data.linkerTarget);
    $this.hover(function(){
      $target.toggleClass("visible");
    });
  });
}; 
```

Usage:

```
$("[data-linker]").linker(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:36:36.177

除了所有文档准备就绪之外，您并没有那么兴奋。

[这是一个小提琴。](http://jsfiddle.net/xCSbR/)

这是代码。

```
$(document).ready(function(){
            $(".short-term-trigger").hover(function(){
                 $(".short-term").toggle();
            });

      $(".medium-term-trigger").hover(function(){
                $(".medium-term").toggle();
            });

     $(".long-term-trigger").hover(function(){
             $(".long-term").toggle();
             });

      $(".retirement-trigger").hover(function(){
             $(".retirement").toggle();
             });
 }) 
```

但是如果你真的想优化，你会使用[这个](http://jsfiddle.net/xCSbR/2/).

```
 $(document).ready(function(){
            $("#goal-btns li a").hover(function(){
                 $('div.' + $(this).attr('data-ref')).toggle();
            });

 }) 
```

您只需要向您的元素添加一个属性 data-ref。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:36:48.270

这是减少所有 jQuery 的一种方法：

```
$(document).ready(function() {
    $(".short-term-trigger,.medium-term-trigger,.long-term-trigger,.retirement-trigger").hover(function() {
        $("." + $(this).attr('class').slice(0, -8)).toggleClass("visible");
    });
});​ 
```

**[​jsFiddle 示例](http://jsfiddle.net/j08691/VrWTX/)**

# scala - Pig-Scala UDF 异常 - 未找到 ScalaObject

> ID：12518652
> 
> 赞同：2
> 
> 时间：2012-09-20T18:26:55.620
> 
> 标签：scala, classpath, classnotfoundexception, apache-pig

我有一个 scala .class 文件，我将其转换为 jar 并尝试转换为`register`pig 脚本。它现在能够找到该类，但它会抛出一个`ClassNotFoundException`for `scala.ScalaObject`。

我注意到文件夹中的`scala-library`jar 中有一个 scala.ScalaObject.class 条目`littlepiggy/lib`。

**问题 1**

无论如何，这个罐子不应该直接访问吗？或者我是否必须将此路径添加到相当于 Pig 的 CLASSPATH 中？

**问题2**

在此之后，我也强行注册了那个 jar。

我收到了这个错误：

```
java.lang.NoSuchMethodError: scala.collection.JavaConversions$.asScalaIterator(Ljava/util/Iterator;)Lscala/collection/Iterator 
```

这对我来说不合适。有任何想法吗？

PS - 这个消息来源建议我应该包含 scala-library jar，但 Pig 应该已经能够找到它，无论如何，它对我来说并不真正有用。(http://mehack.com/levenshtein-distance-function-for-pig-and-had-0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:38:09.827

答案就在这里。应该检查出一组更详尽的关键字。

[尝试将 java 隐式转换为 scala 集合时出现 NoSuchMethodError](https://stackoverflow.com/questions/4393946/nosuchmethoderror-when-attempting-to-implicitly-convert-a-java-to-scala-collecti)

我使用不同的 scala 版本来构建类文件，然后在 pig 中。

谢谢！

# android - 插入时出现 SQLite 错误

> ID：12518653
> 
> 赞同：0
> 
> 时间：2012-09-20T18:26:56.213
> 
> 标签：android, sqlite

我正在尝试将 android 设备上的值插入到 sqlite 数据库中。

但是有时会抛出以下错误：

```
android.database.sqlite.SQLiteException: near ",": syntax error: , while compiling: INSERT INTO sensor_event (created_at, updated_at, type, x, y, z, time) VALUES (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?) 
```

不幸的是，我不知道为什么查询没有通过。还有谁？

干杯，

戈登

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:36:49.437

您提供的不是有效的 sqlite 语法。SQLite 在一定程度上支持单指令中的多个插入，但它的完成方式略有不同。见[这里](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)。

您如何生成查询以及有时在您的问题中意味着什么 - 对我来说，每次您尝试这样的查询时都会发生错误。

像这样重写您的查询：

```
INSERT INTO sensor_event
SELECT ? as created_at, ? as updated_at, ? as type, ? as x, ? as y, ? as z, ? as time
UNION SELECT ?, ?, ?, ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?, ?, ?, ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:37:53.227

SQLite 从 3.7.11 版本开始允许复合插入语句

自 4.1 版以来，Android 使用 3.7.11，如 Boris Strandjev 所述，早期版本将失败。

android 版本中的 SQLite 版本： [Android 中使用的 SQLite 版本？](https://stackoverflow.com/questions/2421189/version-of-sqlite-used-in-android)

# java - 为什么 Joda 对象是不可变的？

> ID：12518654
> 
> 赞同：15
> 
> 时间：2012-09-20T18:26:56.380
> 
> 标签：java, jodatime

我已经读过，Java 版本低于 7，Joda Time 对象比 Java 的内置对象更可靠。一个被引用的原因是 Joda 对象是不可变的。为什么这是有益的？如果我想更改 Joda DateTime 对象的年、小时和时区，我需要制作三份！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T18:30:22.530

> 如果我想更改 Joda DateTime 对象的年、小时和时区，我需要制作三份！

确实是的。或者，您当然可以使用旧对象中您喜欢的所有字段创建*一个新对象。*

这是一件非常好的事情——因为这意味着当你想依赖一个不改变的对象时，它不会改变。考虑这个伪代码：

```
private static final Instant EARLIEST_ALLOWED_ARTICLE = ...;

private Instant creationTimestamp;

public Article(Instant creationTimestamp, ...) {
    if (creationTimestamp.isBefore(EARLIEST_ALLOWED_ARTICLE)) {
        throw new IllegalArgumetnException(...);
    }
    this.creationTimestamp = creationTimestamp;
    ...
} 
```

这很好，因为`Instant`它是不可变的。如果它是可变的，那么构造函数中的验证将毫无价值——除非您在那时创建了一个防御性副本。

根据我的经验，您希望传递引用并知道值的变化不会超过您对现有对象的实际更改，因此不变性会导致更少的错误（对于可变对象，您可能会*忘记*获取副本，并且任何验证都是无用的）并且制作的副本更少。

*基本上，它允许您在本地*推理您的代码，而无需复制您接受和存储的所有内容，或返回到其他代码。当*只有您的代码*可以更改对象的状态时，计算随着时间的推移会发生什么要简单得多。

Joda Time 实际上有些失败，因为它同时具有可变*和*不可变类型 - 如果您只是对*接口*进行编程（例如`ReadableInstant`），那么您将无法获得这些保证。这就是为什么在[Noda Time](http://noda-time.googlecode.com)中我将所有类型都设为真正不可变的原因。

出于兴趣，你想要`String`可变吗？如果没有，请尝试考虑这两种情况之间是否存在真正的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:30:03.947

最简单的答案是，一旦你创建了一个对象，你就知道它*不能*改变。这意味着您不会遇到数据以意外方式更改的情况（可能在代码的其他部分或不同的线程中）。

这使得对象的行为更加可预测和可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:43:12.473

不幸的是，DateTime 的实现不是不可变的[1]，因为没有`final`使用。

[https://github.com/JodaOrg/joda-time/blob/master/src/main/java/org/joda/time/DateTime.java](https://github.com/JodaOrg/joda-time/blob/master/src/main/java/org/joda/time/DateTime.java)

[1] 术语“不可变”通常被理解为“线程安全的不可变”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T18:32:09.990

可能有很多原因，但一个很好的原因是关于散列。不可变对象可用于散列数据结构（例如 HashSet、HashMap 中的键等），因为它们的散列码和“相等”语义不会改变。可变对象不适合散列，因为突变可能会改变它们的散列码或相等性。

通过使 Joda 日期不可变，它们现在可以用于散列数据结构。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T18:34:05.133

我认为这是由于：

想象一下，您有一个 java.util.Date 对象，它在多个类中使用。我在一个课程上做开发，你在另一个课程上。然后，我决定我需要预测未来，但我没有创建一个新的日期对象，而是取我已经拥有的那个，你认为代表某个时间点的那个，然后我增加了三个小时。现在，您的代码可能会在运行时遇到严重问题。这一切都可以使用不可变对象来避免，因为你不能改变它的状态，你不能为其他人搞砸它。

# php - CakePHP - html helper 如何关闭转义？

> ID：12518655
> 
> 赞同：0
> 
> 时间：2012-09-20T18:26:57.087
> 
> 标签：php, cakephp

我使用 Cake 2.2.2，并使用 HtmlHelper 构建链接。

```
<?php echo $this->Html->link('Link',array('controller' => 'mycontroller', 'action' => 'myAction', '3'."#map"), array('escape' => false));?> 
```

我需要将值 3 传递给我的控制器，并且我还需要链接具有#map（html 锚）。

但是尽管我使用了array('escape' => false)，但输出似乎被转义了，#map 变成了 3%23map。

我在哪里做错了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:31:45.703

[http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::url](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::url)

你需要使用

```
<?php echo $this->Html->link('Link', array(..., '#' => 'map'), ...);?> 
```

# c - 减少 While 循环中的时钟周期计数以实现粒度

> ID：12518658
> 
> 赞同：1
> 
> 时间：2012-09-20T18:27:06.703
> 
> 标签：c, performance, while-loop, msp430

我有一个`while`用 C 语言为 MSP430 处理器实现的循环，目前看起来像这样：

```
register unsigned int sw_loop_count = 0U;
...

while (TACCL0 & CCIE)
{
    ++sw_loop_count;
}

...
#pragma vector=TIMERA0_VECTOR
__interrupt void Timer_A(void)
{
    // Disable the timer interrupt flag and enable.
    TACCTL0 &= ~CCIFG;
    TACCTL0 &= ~CCIE;
} 
```

我将此循环用于校准目的，我认为它的上下文对我的问题不太重要。我计算出循环的每次迭代，包括检查`TACCL0 & CCIE`需要 11 个时钟周期。出于粒度的目的，我真的希望这个数字尽可能低，如果可能的话以编程方式。我可能是一个彻头彻尾的白痴，但我想不出减少循环周期数的方法，所以任何建议都将不胜感激。我需要`sw_loop_count`价值，一种或另一种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:43:14.870

嗯，在我发表评论后，我意识到您*可能*可以做一些事情；-) 在您的`while()`情况下，您正在检查*两个*值。从外观上看，这两个值都*必须*定义为，`volatile`以便每次使用它们时都可以从内存中准备好......

你能把这两个减少成一个吗？让您的中断处理程序进行必要的比较并设置一个*您*将在循环中检查的标志。

或者您可以变得非常花哨并以*另一种方式进行*操作，例如：

```
// signed and global (or you can pass it's address into your interrupt's routine)
volatile signed int sw_loop_count = 0; 
```

然后是你的“测量”循环：

```
while(++sw_loop_count) {} 
```

在你的中断程序中：

```
if(TACCL0 & CCIE)
{
  real_count = sw_loop_count; // save the value for future use before we destroy it
  sw_loop_count = -1; // this will turn into 0 in that while's pre-increment, ending the loop
} 
```

OTOH...引入`volatile`内存访问可能会受到很大影响，实际上它可能会减慢*循环速度*`while()`。它确实完全取决于您的实际架构（取决于内存控制器和缓存控制器的类型），我仍然认为您最好通过汇编程序模式运行它并查看编译器正在做什么。

# sql-server - row_number() 分组依据？

> ID：12518659
> 
> 赞同：48
> 
> 时间：2012-09-20T18:27:07.087
> 
> 标签：sql-server, tsql, unique, row-number

我有一个包含 、 和 列的`Date`数据`Cat`集`QTY`。我想要做的是添加一个唯一列，它只`Cat`在计算行数时计算唯一值。这就是我希望我的结果集看起来的样子：

![在此处输入图像描述](../Images/eb1449e2c17b7db721ecd4cfece61d56.png)

通过使用下面的 SQL 查询，我可以使用该`row_number()`函数获取行。

但是，我无法获得上面描述的那个独特的列。当我将 group by 添加到`OVER`子句时，它不起作用。有人对我如何让这个独特的计数列起作用有任何想法吗？

```
SELECT 
   Date,    
   ROW_NUMBER() OVER (PARTITION BY Date ORDER By Date, Cat) as ROW,
   Cat,
   Qty
FROM SOURCE 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-21T10:42:05.180

这是一个解决方案。

您不必担心 Cat 的订购。使用以下 SQL，您将能够获得日期和猫组合的唯一值。

```
SELECT 
   Date,    
   ROW_NUMBER() OVER (PARTITION BY Date, Cat ORDER By Date, Cat) as ROW,
   Cat,
   Qty
FROM SOURCE 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-20T18:35:20.950

```
DENSE_RANK() OVER (PARTITION BY date ORDER BY cat) 
```

# centos - CentOS 6.3 Samba 通过互联网共享无法正常工作

> ID：12518661
> 
> 赞同：2
> 
> 时间：2012-09-20T18:27:10.957
> 
> 标签：centos, samba

**概括：**

这是一个两部分的问题。一个带有路由器的 ISP 上的简单 Samba 共享不起作用，而另一个具有不同路由器的 ISP 设置相同并且具有相同 Samba 配置的类似服务器工作。

似乎是路由器没有转发端口，尽管它成功地转发了 SSH 和其他端口，或者 ISP 以某种方式阻止了标准的 Samba 端口。它仍然困扰着我，我无法弄清楚为什么它不起作用，我仍然会尝试缩小原因。

第二个问题是我正在寻找一种商业用途，简单，易于使用（对于最终用户），为少数人和文件安全共享，在内部托管并在 Internet 上从外部访问，在 Windows 7、XP、 Mac 和 linux 服务器，为最终用户提供简单的客户端。

stackoverflow 之外的一位新朋友帮助使用 sshfs 作为解决方案。在 CentOS 上 ssh 已经支持 sshfs。Windows 客户端[win-sshfs](http://code.google.com/p/win-sshfs/)运行良好，我将尝试使用 OSXFUSE 和 UO 中描述的[MACFusion](https://systems.cs.uoregon.edu/wiki/index.php?n=Help.AppsSSHMacSSHFS)。

此外，为每个人设置 linux 用户。要允许 linux 组中的每个人都可以写入，请更改 /etc/ssh/sshd_config 中此问题中描述的 umask [serverfault](https://serverfault.com/questions/70876/how-to-put-desired-umask-with-sftp)。人们首先进入他们的主目录，我在其中放置了指向设置了粘性位的共享文件夹的链接，因此他们无法删除该文件夹。他们可以删除链接，但这很容易恢复。我能看到的唯一问题是缺乏文件锁定和缺乏自动刷新。

* * *

**原始问题：**

我似乎无法通过互联网让 Samba 在 Centos 6.3 服务器上工作。我在另一个互联网连接上有一个类似的测试服务器，在完全相同的设置下工作正常。我已经浏览了[http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/diagnosis.html](http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/diagnosis.html)两次，确保端口被转发到互联网（虽然不确定如何测试它们是否真正打开），仔细检查 samba 配置，它现在只是共享 /tmp。用户帐户已设置，它可以 ssh 进入并访问 /tmp，并且 samba 密码设置相同。我无法 ping 服务器，但那是因为路由器或 IP 设置为无法被所有者/工作 ping 通。SSH 和 HTTPS apache 在服务器上运行良好，端口转发方式相同。由于我不在那里，我还无法在本地网络中测试共享，但我认为它应该在内部工作。当尝试从 Windows 7 连接时，它只是超时，没有提示并且它从未连接，而我自己的 Internet 连接上的测试服务器始终在内部和外部工作。

任何帮助将不胜感激。

该要求是一种易于使用的内部托管共享文件夹，可替代使用“dropbox”在通过外部 Internet 连接工作的 Windows 7、XP、mac 和 linux 服务器之间使用。它不会被大量使用，但应该快速、易于在客户端访问/设置，并且对业务来说是安全的。如果有任何替代方案可以安装在 CentOS 上，那也很棒。

谢谢！安德鲁

编辑，细节：

转发端口：

（我有一张图片，但作为新用户，我不能发布）137、138、139、445 都通过 TCP 和 UDP 转发，现在进行测试。

smb.conf 设置简单且与工作测试服务器完全相同：

```
# cat /etc/samba/smb.conf
[global]
workgroup=WORKGROUP
log level = 3
log file = /var/log/samba/log.%m
max log size = 50
security = user
passdb backend = tdbsam

[tmp]
comment = temporary files
path = /tmp
read only = yes 
```

Samba 重新启动以进行良好的衡量：

```
# service smb restart
Shutting down SMB services:                                [  OK  ]
Starting SMB services:                                     [  OK  ] 
```

尝试以 \ 访问共享时，Windows 7 超时，这与测试服务器配合良好：

（我有截图但新用户不能发布）

搜索错误 0x80004005 会导致[http://answers.microsoft.com/en-us/windows/forum/windows_vista-networking/cannot-access-network-share-get-unspecified-error/9f840844-9d5b-e011- 8dfc-68b599b31bf5](http://answers.microsoft.com/en-us/windows/forum/windows_vista-networking/cannot-access-network-share-get-unspecified-error/9f840844-9d5b-e011-8dfc-68b599b31bf5)

我检查了工作组、共享设置并重新启动了窗口。由于测试共享有效，我认为 Windows 机器正在工作。我将继续详细介绍。

再次编辑：

再次遵循故障排除指南：

将 smb.conf 简化为：

```
# cat /etc/samba/smb.conf
[tmp]
comment = temporary files
path = /tmp
read only = yes 
```

/etc/resolv.conf 正在使用 ISP 服务器并且它们可以工作。它们与工作服务器的 DNS 不同，但位于不同的 ISP 上：

```
# nslookup google.com
Server:         71.242.0.12
Address:        71.242.0.12#53

Non-authoritative answer:
Name:   google.com
Address: 74.125.228.2 
```

我正在使用 IP 地址做所有事情，所以我不知道 DNS 会发挥作用。

为了好玩，我将 dns proxy = no 添加到 smb.conf 中，但这并没有帮助。

/var/log/samba/log.smbd 不会报告与工作服务器不同的任何内容：

```
[2012/09/20 16:59:41,  0] smbd/server.c:1141(main)
  smbd version 3.5.10-125.el6 started.
  Copyright Andrew Tridgell and the Samba Team 1992-2010
[2012/09/20 16:59:41.484699,  0] param/loadparm.c:7648(lp_do_parameter)
  Global parameter dns proxy found in service section!
[2012/09/20 16:59:41.486645,  0] printing/print_cups.c:109(cups_connect)
  Unable to connect to CUPS server localhost:631 - Connection refused
[2012/09/20 16:59:41.486809,  0] printing/print_cups.c:468(cups_async_callback)
  failed to retrieve printer list: NT_STATUS_UNSUCCESSFUL
[2012/09/20 16:59:41.507198,  0] smbd/server.c:501(smbd_open_one_socket)
  smbd_open_once_socket: open_socket_in: Address already in use
[2012/09/20 16:59:41.507407,  0] smbd/server.c:501(smbd_open_one_socket)
  smbd_open_once_socket: open_socket_in: Address already in use
[2012/09/20 17:00:39,  0] smbd/server.c:1141(main)
  smbd version 3.5.10-125.el6 started.
  Copyright Andrew Tridgell and the Samba Team 1992-2010
[2012/09/20 17:00:39.513793,  0] printing/print_cups.c:109(cups_connect)
  Unable to connect to CUPS server localhost:631 - Connection refused
[2012/09/20 17:00:39.513955,  0] printing/print_cups.c:468(cups_async_callback)
  failed to retrieve printer list: NT_STATUS_UNSUCCESSFUL
[2012/09/20 17:00:39.535458,  0] smbd/server.c:501(smbd_open_one_socket)
  smbd_open_once_socket: open_socket_in: Address already in use
[2012/09/20 17:00:39.535689,  0] smbd/server.c:501(smbd_open_one_socket)
  smbd_open_once_socket: open_socket_in: Address already in use 
```

但是，工作服务器会在名为 log 的目录中创建一个日志文件。非工作服务器没有。

测试参数：

```
# testparm
Load smb config files from /etc/samba/smb.conf
rlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)
Processing section "[tmp]"
Loaded services file OK.
Server role: ROLE_STANDALONE
Press enter to see a dump of your service definitions

[global]

[tmp]
        comment = temporary files
        path = /tmp 
```

继续……

继续：

nmb 也在运行：

```
# service nmb restart
Shutting down NMB services:                                [  OK  ]
Starting NMB services:                                     [  OK  ] 
```

路由器上的“响应 Internet 端口上的 Ping”通常处于关闭状态。我在 Windows 客户端和服务器上都打开了它。互相能ping通，共享还是不行。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\xxxx>ping xxxx

Pinging xxxx with 32 bytes of data:
Reply from xxxx: bytes=32 time=25ms TTL=51
Reply from xxxx: bytes=32 time=23ms TTL=51
Reply from xxxx: bytes=32 time=26ms TTL=51
Reply from xxxx: bytes=32 time=24ms TTL=51

Ping statistics for xxxx:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 23ms, Maximum = 26ms, Average = 24ms

# ping xxxx -c 5
PING xxxx (xxxx) 56(84) bytes of data.
64 bytes from xxxx: icmp_seq=1 ttl=251 time=20.7 ms
64 bytes from xxxx: icmp_seq=2 ttl=251 time=24.6 ms
64 bytes from xxxx: icmp_seq=3 ttl=251 time=21.4 ms
64 bytes from xxxx: icmp_seq=4 ttl=251 time=25.3 ms
64 bytes from xxxx: icmp_seq=5 ttl=251 time=22.9 ms

--- xxxx ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4029ms
rtt min/avg/max/mdev = 20.776/23.022/25.319/1.764 ms 
```

继续……

继续：

iptables 关闭：

```
# iptables -L -v
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination 

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination 

Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination 
```

SELinux 已关闭：

```
# sestatus
SELinux status:                 disabled 
```

**smbclient**使用 samba 中的用户设置从 samba 服务器工作到其本地 IP 和其外部 IP。Windows 客户端获得：

```
Connection to <ip addr> failed (Error NT_STATUS_UNSUCCESSFUL) 
```

Samba 作为守护程序/服务运行，而 netbios-ssn 处于侦听模式：

```
# netstat -a|grep netbios-ssn
tcp        0      0 *:netbios-ssn               *:*                         LISTEN 
```

继续...

继续：

我们不限制连接或使用 inetd。

log.nmbd 不报告任何问题。

nmblookup -B BIGSERVER **SAMBA**使用服务器的名称工作

nmblookup -B ACLIENT *在所有使用 Windows 客户端名称或外部 IP 地址的日志文件上都**失败**

nmblookup -d 2 `*'。**失败**

“如果您的 PC 和服务器不在同一子网中，则需要使用 -B 选项将广播地址设置为 PC 子网的地址。

如果您的子网掩码和广播地址不正确，此测试可能会失败。（请参阅上面的测试 3 注释）。”

我不确定，因为我们要通过互联网，我们需要这些来匹配和工作吗？

smbclient //BIGSERVER/TMP 工作

在客户端：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\xxxx>net view \\xxxx (ip addr)
System error 53 has occurred.

The network path was not found.

C:\Users\xxxx> 
```

net use 也有同样的问题，即使提供用户和密码也是如此。

nmblookup -M WORKGROUP 返回网络上的本地 Windows 机器，而在我的测试服务器上，它返回测试机器本地的客户端。也许工作组在另一台机器上存在问题，但如果这是问题，其他人将如何从其他网络连接？

我也试过首选 master = yes。

接下来是 samba howto 的第 2 页。

更新：一位新朋友说尝试使用 nmap 来查看端口：

```
# nmap -sS -P0 -sV -O xxxx

Starting Nmap 5.51 (  ) at 2012-09-21 11:09 EDT
Nmap scan report for xxxx (xxxx)
Host is up (0.024s latency).
Not shown: 995 filtered ports
PORT     STATE SERVICE    VERSION
22/tcp   open  ssh        OpenSSH 5.3 (protocol 2.0)
25/tcp   open  smtp       Postfix smtpd
110/tcp  open  pop3       Dovecot pop3d
443/tcp  open  ssl/http   Apache httpd 2.2.15 ((CentOS))
9100/tcp open  jetdirect?
Warning: OSScan results may be unreliable because we could not find at
least 1 open and 1 closed port
OS fingerprint not ideal because: Missing a closed TCP port so results
incomplete
No OS matches for host
Service Info: Host:  xxxx 
```

由于 Samba 端口没有显示，我认为路由器或 ISP 此时没有转发/阻止端口。

至于共享的解决方案，我正在尝试使用 windows 和 mac 客户端的 sshfs。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:33:59.647

回答您的原始问题，测试您的 ISP 是否没有阻止列出的端口的好方法是：

```
# yum -y install tcpdump
# tcpdump -i eth0 "port 137 or port 138 or port 139 or port 445" 
```

（将 eth0 替换为连接到 Internet 的接口的名称）。

然后您应该尝试访问共享（网络视图/网络使用/Windows Shell）。如果端口被正确转发，您应该会看到类似的内容：

```
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes
01:25:48.631173 IP 192.168.0.10.54032 > 192.168.0.1.microsoft-ds: Flags [S], seq 4008761512, win 5840, options [mss 1460,sackOK,TS val 136010468 ecr 0,nop,wscale 7], length 0
01:25:48.631198 IP 192.168.0.1.microsoft-ds > 192.168.0.10.54032: Flags [S.], seq 2220435566, ack 4008761513, win 14480, options [mss 1460,sackOK,TS val 15507714 ecr 136010468,nop,wscale 7], length 0
01:25:48.631397 IP 192.168.0.10.54032 > 192.168.0.1.microsoft-ds: Flags [.], ack 1, win 46, options [nop,nop,TS val 136010468 ecr 15507714], length 0
01:25:48.642171 IP 192.168.0.10.54032 > 192.168.0.1.microsoft-ds: Flags [P.], seq 1:184, ack 1, win 46, options [nop,nop,TS val 136010479 ecr 15507714], length 183SMB PACKET: SMBnegprot (REQUEST)
... 
```

如果您什么都看不到，则意味着您的 ISP（或中间路由器）正在阻止到这些端口的数据包，而且很可能是这种情况 — SMB 协议被证明对于开放式 Internet 部署非常不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T14:00:21.847

在文件`/etc/samba/smb.conf`中，在该部分下`[global]`，在工作组行下方添加以下两行：

```
client min protocol = NT1  
client max protocol = SMB3 
```

# android - Android 谷歌地图：双击 MapView

> ID：12518667
> 
> 赞同：3
> 
> 时间：2012-09-20T18:27:32.910
> 
> 标签：android, click, maps, double

这个问题已经被问过好几次了，我已经彻底阅读并遵循了答案/评论。结果，我能够生成下面的代码，但代码仅响应`onDown()`, `onShowPress()`, `onLongPress()`。以下是我打算启用以捕获双击或双击的唯一类。

```
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.view.View;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class GoogleAndroidMapsActivity extends MapActivity implements OnGestureListener, OnDoubleTapListener {

private GestureDetector gestureDetector;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //To allow zooming along with panning around, enable it
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true); 

    gestureDetector = new GestureDetector(this, this);
    gestureDetector.setOnDoubleTapListener(this);

    mapView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    }); 
 }

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public boolean onDoubleTap(MotionEvent e) {
    Log.d("GMaps", "Double Tap");
    return true;
}

@Override
public boolean onDoubleTapEvent(MotionEvent e) {
    Log.d("GMaps", "Double Tap Event");
    return true;
}

@Override
public boolean onSingleTapConfirmed(MotionEvent e) {
    Log.d("GMaps", "Single Tap Confirmed");
    return true;
}

@Override
public boolean onDown(MotionEvent e) {
    Log.d("GMaps", "Down");
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    Log.d("GMaps", "Fling");
    return false;
}

@Override
public void onLongPress(MotionEvent e) {
    Log.d("GMaps", "Long Press");
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    Log.d("GMaps", "Scroll");
    return false;
}

@Override
public void onShowPress(MotionEvent e) {
    Log.d("GMaps", "Show Press");
}

@Override
public boolean onSingleTapUp(MotionEvent e) {
    Log.d("GMaps", "Single Tap Up");
    return false;
}
} 
```

但我不明白为什么`onDoubleTap()`，`onDoubleTapEvent()`也从来没有被叫过。事实上，唯一被调用的是`onDown()`, `onShowPress()`, `onLongPress()`。

我什至尝试如下所示扩展 MapView，然后在我的主类中使用，`GoogleAndroidMapsActivity.java`但无济于事。我`main.xml`相应地改变以反映`AdvMapView.java`。

```
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.View;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.GestureDetector.OnGestureListener;

import com.google.android.maps.MapView;

public class AdvMapView extends MapView implements OnGestureListener, OnDoubleTapListener{

private GestureDetector gestureDetector;

public AdvMapView(Context context, AttributeSet attrSet) {
    super(context, attrSet);
    gestureDetector = new GestureDetector(context, this);
    gestureDetector.setOnDoubleTapListener(this);

    this.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    });        
}

@Override
public boolean onDoubleTap(MotionEvent e) {
    Log.d("GMaps", "Double Tap");
    return false;
}

@Override
public boolean onDoubleTapEvent(MotionEvent e) {
    Log.d("GMaps", "Double Tap Event");
    return false;
}

@Override
public boolean onSingleTapConfirmed(MotionEvent e) {
    Log.d("GMaps", "Single Tap Confirmed");
    return false;
}

@Override
public boolean onDown(MotionEvent e) {
    Log.d("GMaps", "Down");
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    Log.d("GMaps", "Fling");
    return false;
}

@Override
public void onLongPress(MotionEvent e) {
    Log.d("GMaps", "Long Press");
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    Log.d("GMaps", "Scroll");
    return false;
}

@Override
public void onShowPress(MotionEvent e) {
    Log.d("GMaps", "Show Press");
}

@Override
public boolean onSingleTapUp(MotionEvent e) {
    Log.d("GMaps", "Single Tap Up");
    return false;
}

} 
```

然后使用 in `GoogleAndroidMapsActivity`as

```
import android.os.Bundle;
import android.view.GestureDetector;

import com.google.android.maps.MapActivity;

public class GoogleAndroidMapsActivity extends MapActivity{

private GestureDetector gestureDetector;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //To allow zooming along with panning around, enable it
    AdvMapView mapView = (AdvMapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true); 

 }

@Override
protected boolean isRouteDisplayed() {
    return false;
}

} 
```

此外，`onDown()`,仅在我第一次单击/双击时被调用`onShowPress()`。`onLongPress()`在我的日志中获得“向下”、“显示按下”和“长按”后，单击/双击无效。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:41:59.337

我有同样的问题。具体来说，我想覆盖地图上的默认双击（SupportMapFragment）。我解决它的方法（它实际上是一种解决方法）是：
我创建了一个框架布局，它填充了与我的地图片段完全相同的区域，但它是在那之后完全渲染的。

```
<FrameLayout
    android:id="@+id/fragment_container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<FrameLayout
    android:id="@+id/fragment_wrapper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

然后我在“覆盖”fragment_wrapper 中添加了一个手势监听器，我能够捕捉到双击：

```
GestureDetector gestureDetector = new GestureDetector(this, new DoubleTapDetector());
fragmentWrapper.setOnTouchListener(new OnTouchListener(){
    @Override
    public boolean onTouch(View v,MotionEvent event){
        gestureDetector.onTouchEvent(event);
        return true;
    }
}); 
```

DoubleTapDetector 类是：

```
public class DoubleTapDetector extends GestureDetector.SimpleOnGestureListener {

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        Log.d("DoubleTapDetector", "Double Tap!");
                //DO ACTIONS HERE
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:55:01.250

我是这样做的，只需将此括号放入扩展 MapView 类的类主体中

```
{
 final GestureDetector gd = new GestureDetector(new SimpleOnGestureListener() {
  @Override
  public boolean onDoubleTap(MotionEvent e) {
    getController().zoomInFixing((int) e.getX(), (int) e.getY());
    return true;
  }
});

this.setOnTouchListener(new OnTouchListener() {
  @Override
  public boolean onTouch(View v, MotionEvent event) {
    return gd.onTouchEvent(event);
  }
});
} 
```

# database - 休眠数据库事件

> ID：12518677
> 
> 赞同：0
> 
> 时间：2012-09-20T18:27:59.127
> 
> 标签：database, hibernate, events

我正在使用休眠来访问数据库。我正在使用休眠查询缓存，因为在 95% 的情况下只进行了 3 个查询。现在一旦对 db 进行初始化更新操作非常罕见。所以我只想在任何插入/更新时使缓存过期/delete 等非只读操作是在 db 上完成的。hibernate 可以吗？如果可以，怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:07:45.257

您是指通过 Hibernate 完成的“插入/更新/删除 [...] 操作”吗？如果是这样，那已经是这样了。

还是您的意思是在 Hibernate 不知道的情况下对数据库执行“插入/更新/删除 [...] 操作”？在这种情况下，Hibernate 无法知道这一点。你需要告诉 Hibernate。有很多方法可以解决这个问题。最简单的是驱逐查询缓存区域：

```
sessionFactory.getCache().evictDefaultQueryRegion() 
```

或者

```
sessionFactory.getCache().evictQueryRegion( "region-name-you-supplied-to-Query" ) 
```

或者

```
sessionFactory.getCache().evictQueryRegions() 
```

# asp.net - 使用 SQL 数据填充 Dropbox

> ID：12518678
> 
> 赞同：0
> 
> 时间：2012-09-20T18:28:03.157
> 
> 标签：asp.net, vb.net, visual-studio-2010, sql-server-2008

关于我的最新项目，我还有一些问题。我觉得在过去的几天里我取得了一些相当不错的进步，但我仍然在 SQL 库的一些核心概念上苦苦挣扎，即从特定列读取和删除整行。

在上周，我能够构建一个 web 表单，将 excel 文件保存到服务器，打开这些文件并将数据导出到特定的 SQL 表中，并根据用户通过下拉列表选择的内容将数据绑定到特定的数据网格。

我想要完成的是：另一个下拉列表的动态填充取决于用户从第一个下拉列表中选择的内容。更具体地说，我有 4 个表，在每个表的第一列中我有序列号，如果用户在第一个下拉列表中选择 Table2，我希望第二个下拉列表显示 Table2 的 column1 中的所有序列号。然后，如果用户从第二个淹没中选择一个特定的序列号，它会使用该相关行的第 1-5 列填充一个数据网格。

第二部分是创建一个删除按钮，用户可以在数据网格中显示信息后按下该按钮，从该表中删除序列号条目的整行。

这就是我从其他示例中设法将弗兰肯斯坦放在一起的内容：

```
 Protected Sub DropDownList1_SelectedIndexChanged(sender As Object, e As System.EventArgs)
    DropDownList2.Enabled = True 'its remains disabled until the user selects something from the first box
    Using con As New SqlClient.SqlConnection
        con.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=" & AppPath & "App_Data\DeviceDatabase.MDF;Integrated Security=True;User Instance=True;"
        Using cmd As New SqlClient.SqlCommand
            cmd.Connection = con
        End Using
        Dim cmdSQL As New SqlCommand()
        cmdSQL.CommandType = Data.CommandType.Text
        cmdSQL.CommandText = "SELECT Fieldname1 FROM " & """" & DropDownList1.SelectedItem.ToString & """" 'Im pretty sure this isnt right, and the reason I use """"" is because some of the items in the dropdown have spaced words.

        Dim adptSQL As New SqlClient.SqlDataAdapter(cmdSQL)
        Dim myDataSet As New DataSet()
        adptSQL.Fill(myDataSet)

        With myDataSet.Tables(DropDownList1.SelectedIndex) 'I think this is right
            For rowNumber As Integer = 0 To .Rows.Count - 1
                With .Rows(rowNumber)
                    DropDownList2.Items.Add(col1.rowNumber) 'This is obviously not working 
                End With
            Next
        End With
    End Using
End Sub 
```

然后，我不太确定如何使用所选行填充数据表，尽管目前我可以使用以下方法完成整个表：

```
Private Sub GenTables(ByVal DropList As Object)
    If DropList.SelectedIndex = 0 Then
        GridView1.DataSourceID = Nothing
    ElseIf DropList.SelectedIndex = 1 Then
        GridView1.DataSourceID = "SqlDataSource1"
    ElseIf DropList.SelectedIndex = 2 Then
        GridView1.DataSourceID = "SqlDataSource2"
    ElseIf DropList.SelectedIndex = 3 Then
        GridView1.DataSourceID = "SqlDataSource3"
    ElseIf DropList.SelectedIndex = 4 Then
        GridView1.DataSourceID = "SqlDataSource4"
    End If
    GridView1.DataBind()
End Sub

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:DeviceDatabaseConnectionString1 %>" 
        ProviderName="<%$ ConnectionStrings:DeviceDatabaseConnectionString1.ProviderName %>" 
        SelectCommand="SELECT [Device:] AS column1, [SWversion:] AS column2, [Date:] AS column3, [Tester:] AS column4, [Wifi Preferred InCov:] AS column5 FROM [Galaxy Nexus]">
    </asp:SqlDataSource>

'there are 3 more of these. 
```

但是我将这些表“硬编码”到应用程序中，显然我不能对每个表行都这样做。那么如何在不提前在 asp 中设置 SQLDataSource 的情况下填充数据网格呢？

最后，单击按钮删除与数据网格中显示的信息相关的行。如果第一部分能得到一点帮助，我相信我能弄清楚第二部分。

所以我要问的是：如何用来自 Coloumn1 的所有项目填充下拉列表？以及如何从特定行填充数据网格？

任何和所有的帮助总是非常感谢。多谢你们

扎克

## *编辑*

嗯，我想我让这件事变得更难了，现在我正在处理这个：

```
 Protected Sub BindDrop_Click(sender As Object, e As System.EventArgs)
        DropDownList2.DataSourceID = "SqlDataSource5"
        DropDownList2.DataBind()      
      End Sub

<asp:SqlDataSource ID="SqlDataSource5" runat="server" 
        ConnectionString="<%$ ConnectionStrings:DeviceDatabaseConnectionString1 %>" 
        ProviderName="<%$ ConnectionStrings:DeviceDatabaseConnectionString1.ProviderName %>" 
        SelectCommand="SELECT [Device:] AS column1 FROM [Galaxy Nexus]"> 
```

它不太正确，但它更接近并且在 1/10 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:46:20.807

好吧，伙计们，我想通了，我需要使用 ExecuteReader 函数（这太疯狂了，我在自动填充中找不到一篇使用此方法的文章）。希望在写/回答这个问题时，我会让某人的生活更轻松。

```
 Protected Sub DropDownList2_SelectedIndexChanged(sender As Object, e As System.EventArgs)
    DropDownList3.Enabled = True
    DropDownList3.Items.Clear()
    Dim newsqlcommand As String = "Select [SWversion:] FROM " & """" & DropDownList2.SelectedItem.ToString & """"       
    Using con As New System.Data.SqlClient.SqlConnection(connexstring)
        con.Open()
        Using cmd As New SqlCommand(newsqlcommand, con)
            Dim myReader As SqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
            While myReader.Read()            
                DropDownList3.Items.Add(myReader.GetString(0))
            End While
            myReader.Close()
            cmd.Dispose()
        End Using
        con.Close()
        con.Dispose()
    End Using
    Dbind()    
End Sub 
```

这成功地读取了“SWVersion”列中的所有项目，并将它们添加到 dropdown3 的下拉列表中。享受！

# asp.net-mvc - MVC3/4 有免费的 DataList 或 Repeater 类型帮助器吗？

> ID：12518681
> 
> 赞同：0
> 
> 时间：2012-09-20T18:28:15.400
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在为我的 MVC4 eStore 应用程序寻找类似 WebForms DataList 或 Repeater 控件的东西，以显示上下重复的产品部分视图，并带有分页。分页实际上只是一个不错的选择，所以我可以退回到一个普通的水平 ul 结构，但我希望有一个快速和免费的改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:44:00.453

是的，看`EditorTemplate`和`DisplayTemplate`。您创建局部视图，然后`@Html.EditorFor`将完成所有工作。[ASP.NET MVC 3 – 如何使用 EditorTemplates](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)

# ruby-on-rails - 请求数据污染测试输出

> ID：12518682
> 
> 赞同：0
> 
> 时间：2012-09-20T18:28:17.927
> 
> 标签：ruby-on-rails, ruby, rspec, cucumber

当我运行我的 rspec-rails 和 cucumber-rails 测试时，每次发出请求时，有关它的信息都会出现在日志输出中，因此很难理解和阅读。

```
Thing::SearchController
  logs data about searches
Processing by Thing::SearchController#index as HTML
  Parameters: {"q"=>"thingamabob"}
  Rendered vagas/pesquisas/_empty.html.erb (0.2ms)
  Rendered vagas/pesquisas/_facets.html.erb (0.6ms)
  Rendered shared/_check_lang.html.erb (0.9ms)
  Rendered shared/_footer_links.html.erb (1.0ms)
  Rendered shared/_footer.html.erb (3.1ms)
Completed 200 OK in 100ms (Views: 21.4ms | ActiveRecord: 0.0ms | Search: 67.8ms)
  another test 
```

关于如何删除它的任何想法？

这是我的 Gemfile 以防万一：

```
source 'http://rubygems.org'
gem 'rails', '~>3.2'
gem 'mereghost-rails_sql_views'
gem 'tiny_tds'
gem 'activerecord-sqlserver-adapter'
gem 'will_paginate'
gem 'capistrano'
gem 'jquery-rails'
gem 'jqueryui_rails'
gem 'nokogiri'
gem 'rabl'
gem 'exception_notification', require: 'exception_notifier'

gem 'tire'
gem 'yajl-ruby', require: 'yajl/json_gem'
gem 'tire-contrib', git: 'https://github.com/karmi/tire-contrib.git', branch: :master

gem 'devise'
gem 'uuid'

group :assets do
  gem 'sass-rails'    
  gem 'coffee-rails'
  gem 'uglifier'
end

group :production, :sitedev do
  gem 'therubyracer'
end

group :production, :development, :sitedev do
  gem 'newrelic_rpm'
end

group :development, :test do
  gem 'rspec-rails'
  gem 'simplecov'
  gem 'guard'
  gem 'guard-rspec'
  gem 'guard-bundler'
  gem 'guard-cucumber'
  gem 'sprinkle'
  gem 'hitch'
  gem 'launchy'
  gem 'ruby-prof'
  gem 'rb-inotify'
end

group :test do
  gem 'cucumber-rails', require: false
  gem 'database_cleaner'
  gem 'factory_girl_rails'
  gem 'vcr'
  gem 'webmock'
end

gem 'omniauth-linkedin'
gem 'omniauth-facebook', '1.4.0'
gem 'mongo'
gem 'bson_ext' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:19:45.793

它可能在您的代码或测试助手中。

```
grep -irn puts *
grep -irn Rails.logger * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:03:55.290

您可以通过设置来减少日志中的详细信息`Rails.logger.level`，如[Debugging Rails Applications 指南中所述](http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels)

# google-chrome-extension - chrome 扩展选项更改默认 popup.html

> ID：12518683
> 
> 赞同：2
> 
> 时间：2012-09-20T18:28:29.480
> 
> 标签：google-chrome-extension

我有一个 chrome 扩展，其中 popup.html 只是有一个加载页面的 iframe。

我希望允许用户选择他们的语言，并且由于我正在帮助慈善机构这样做，每个语言页面都非常不同，因为他们需要基于国家/地区的非常不同的内容！

因此，我不能像谷歌开发者页面示例那样只替换一些字段；我需要更改 iframe 中加载的页面。

例如，在存储页面的目录中，我有english.html、german.html、spanish.html，所有这些都是完全不同的页面。

默认情况下，english.html 页面在 iframe 中加载，但用户应该能够进入选项文件并选择德语，因此当他们单击扩展名时，每次默认加载 German.html。

这是显示我目前在 popup.html 和 popup.js 中的内容的 jsfiddle：http: [//jsfiddle.net/hemang2/EDV82/](http://jsfiddle.net/hemang2/EDV82/)

您会看到调用了 flickr API，但这只是因为我不知道如何摆脱它！

所以基本上我的问题是如何链接选项文件以更改 iframe 中加载的默认 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:41:02.827

使用 setPopup 方法：http: [//developer.chrome.com/extensions/browserAction.html#method-setPopup](http://developer.chrome.com/extensions/browserAction.html#method-setPopup)

它允许您将任何 html 文件设置为弹出窗口。

# rabbitmq - rabbitmq 中多个 VHost 的性能损失？

> ID：12518685
> 
> 赞同：8
> 
> 时间：2012-09-20T18:28:32.397
> 
> 标签：rabbitmq

与许多交易所相比，运行许多虚拟主机是否会降低性能？我必须支持数千个不同的客户端，并且我正在尝试决定每个客户端是否应该接收自己的虚拟主机，或者我应该拥有一个虚拟主机并且每个客户端都有自己的交换。相对于性能和资源利用率，哪个是更好的选择？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T12:50:13.640

收到来自 RabbitMQ 的答复。虚拟主机实际上仅作为安全上下文存在，因此它们几乎没有开销，因此使用许多虚拟主机的开销应该很小。

# sql-server-2008 - 动态 SQL 语句（需要 unicode 编码？）

> ID：12518686
> 
> 赞同：1
> 
> 时间：2012-09-20T18:28:34.643
> 
> 标签：sql-server-2008

我有以下动态 SQL 代码，其中插入了 4 列作为参数以及表名。

```
set @SQL = 'select EVENTID, RATE,' + @LossColumn + ',' + @ExpColumn + ',' + @StdDevIndep + ',' + @StdDevCorr + ', '''','''', '''','''' 
from Catastrophe.dbo.' + @CatTableName 
insert into AnalyticsV2.dbo.ResultCSVCat
execute sp_executesql @SQL 
```

我不确定这是否正确或者是否因为参数（'select 语句之前的 N）需要 unicode 编码？如果我指定所有列和表名，它工作正常，因为没有参数。如果它确实需要 unicode，我不太确定如何更改它，因为我在 Microsoft SQL 中使用的不多。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:53:04.523

是的，动态 SQL 字符串应始终声明为 NVARCHAR，并且您应始终使用 N 前缀。

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'select EVENTID, RATE,' 
  + QUOTENAME(@LossColumn)  -- QUOTENAME is safer
  + ',' + QUOTENAME(@ExpColumn) 
  + ',' + QUOTENAME(@StdDevIndep) 
  + ',' + QUOTENAME(@StdDevCorr) 
  + ', '''','''', '''',''''  -- not sure I understand this, 
                             -- trying to insert empty strings?
FROM Catastrophe.dbo.' + QUOTENAME(@CatTableName) + ';';

INSERT INTO AnalyticsV2.dbo.ResultCSVCat -- no column list?
EXEC sp_executesql @sql; 
```

# regex - 正则表达式不允许数字 - 只是阿拉伯字母

> ID：12518689
> 
> 赞同：16
> 
> 时间：2012-09-20T18:28:46.873
> 
> 标签：regex, arabic

我找到了这个阿拉伯字母的正则表达式，但它也允许带字母的数字。我怎样才能改变它让它只允许字母？

```
/[\u0600-\u06FF]/ 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-20T18:37:29.063

可能您必须检查数字匹配的范围并将其排除（正式不包括在括号表达式中）。

[在这里](http://www.alanwood.net/unicode/arabic.html)，我找到了另一个有用的来源。

我建议仅用于字母

```
/[\u0600-\u065F\u066A-\u06EF\u06FA-\u06FF]/ 
```

因为这仅匹配阿拉伯数字

```
/[\u0660-\u0669\u06F0-\u06F9]/ 
```

编辑：

我发现 unicode 中的阿拉伯数字和阿拉伯印度数字有两个范围。

如果你需要一个正则表达式来匹配一行，当它包含阿拉伯字母和数字时 - 使用这个：

```
/^[\u0600-\u06FF]*$/ 
```

如果您还想阻止阿拉伯数字 - 使用这个：

```
/^[\u0600-\u065F\u066A-\u06EF\u06FA-\u06FF]*$/ 
```

如果要匹配子字符串，而不仅仅是整行，请使用以下命令：

```
/\b[\s\u0600-\u065F\u066A-\u06EF\u06FA-\u06FF]*\b/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-24T00:20:52.840

我尝试了此处提供的所有解决方案，但没有任何效果，最后一个解决方案仅适用于阿拉伯字母

```
^[\u0621-\u064A\040]+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-03T07:27:37.480

```
[RegularExpression(@"^[\u0621-\u064A\u0660-\u0669a-zA-Z]+$", ErrorMessage = "You can enter Arabic or English characters only")] 

[RegularExpression(@"^[0-9]+$", ErrorMessage = "You can enter numbers only")]

[RegularExpression(@"^[a-zA-Z\0-9]+$",ErrorMessage = "You can enter numbers or english characters only")]

[RegularExpression(@"^[\u0621-\u064A\u0660-\u0669\0-9]+$", ErrorMessage = "You can enter numbers or arabic characters only")]

[RegularExpression(@"^[\u0621-\u064A\u0660-\u0669]+$", ErrorMessage = "You can enter arabic characters only")]

[RegularExpression(@"^[a-zA-Z]+$",ErrorMessage = "You can enter english characters only")] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:38:01.223

[首先，关于 unicode 中的阿拉伯语编码，您可能需要在此处](http://www.utf8-chartable.de/unicode-utf8-table.pl)参考此表

至于您给出的正则表达式，`[\u0600-\u06FF]`是 unicode 列表中所有阿拉伯字符的范围，肯定包括偶数字母、控制字符、空格和数字。

我的建议是：

```
/[\u0600-\u06FF&&[^\U06F0-\06F9]]/ 
```

它涵盖了减去阿拉伯数字（0-9）的所有内容。

从“超级”范围中减去一个范围。我只是不确定您的目标正则表达式方言是否支持这一点。

# sql-server - varchar 条目 5118 导致 SQL Server 存储过程失败

> ID：12518692
> 
> 赞同：1
> 
> 时间：2012-09-20T18:29:05.303
> 
> 标签：sql-server, tsql, stored-procedures, triggers

并提前感谢

我有一个非常基本的存储过程，可以在表中插入一行。直到今天它一直完美无缺

这是脚本

```
(
@emp varchar(16),
@logdate date,
@logtime time,
@term char(20),
@SSID char(16)
)
AS
INSERT INTO AccessLog (EmployeeID, LogDate, LogTime, TerminalID, InOut, ChangedBy) 
VALUES (@emp, @logdate, @logtime, @term, 3, @SSID) 
```

当 5118 的字符串传递给它时，插入将失败。在此插入完成后，有几个触发器会触发。

这是奇怪的部分。您可以为`@emp`变量传递任何其他数字，它工作得很好，但传递它 5118，它会失败。

我收到的错误如下：

> *消息 241，级别 16，状态 1，过程 UpdateTimeWorked，第 27 行
> 从字符串转换日期和/或时间时转换失败。*

这是失败的过程 - 突出显示的行是第 27 行

```
TRIGGER [dbo].[UpdateTimeWorked] ON [dbo].[TimeLog]
FOR UPDATE
AS
SET NOCOUNT ON
DECLARE @ID int;
DECLARE @RCDIDIN int;
DECLARE @RCDIDOUT int;
DECLARE @ComboIn datetime;
DECLARE @ComboOut datetime;
SELECT @ID = ID FROM INSERTED;
SELECT @ComboIn = LoginCombo FROM INSERTED;
SELECT @ComboOut = LogoutCombo FROM INSERTED;
SELECT @RCDIDIN = RCDIDIN FROM INSERTED;
SELECT @RCDIDOUT = RCDIDOUT FROM INSERTED;

**IF ( UPDATE(LogoutCombo))**
BEGIN
    IF (@RCDIDOUT != 0)
    BEGIN
        UPDATE TimeLog
            SET LogOutRND = (select CAST(dbo.roundtime(LogOutRND,0.25) AS TIME))
            WHERE ID = @ID
        UPDATE TimeLog
            SET LogOutComboRND = CAST(CAST(LogOutDate AS DATE) AS SMALLDATETIME) + CAST(LogOutRND AS TIME)
            WHERE ID = @ID
        UPDATE TimeLog
            SET TimeWorked = dbo.gettime(DATEDIFF(ss,LogInComboRND,LogoutComboRND))
            WHERE ID = @ID AND LogInEntered = 1 AND LogOutEntered = 1
        UPDATE TimeLog
            SET TimeWorked = (select CAST(dbo.roundtime(TimeWorked,0.25) AS TIME)), Rounded = 1
            WHERE ID = @ID AND LogInEntered = 1 AND LogOutEntered = 1
    END
END

IF ( UPDATE(LoginCombo))
BEGIN
    IF (@RCDIDIN != 0)
    BEGIN
        UPDATE TimeLog
            SET LogInRND = (select CAST(dbo.roundtime(LogInRND,0.25) AS TIME))
            WHERE ID = @ID
        UPDATE TimeLog
            SET LogInComboRND = CAST(CAST(LogInDate AS DATE) AS SMALLDATETIME) + CAST(LogInRND AS TIME)
            WHERE ID = @ID
        UPDATE TimeLog
            SET TimeWorked = dbo.gettime(DATEDIFF(ss,LogInComboRND,LogoutComboRND))
            WHERE ID = @ID AND LogInEntered = 1 AND LogOutEntered = 1
        UPDATE TimeLog
            SET TimeWorked = (select CAST(dbo.roundtime(TimeWorked,0.25) AS TIME)), Rounded = 1
            WHERE ID = @ID AND LogInEntered = 1 AND LogOutEntered = 1
    END
END

GO 
```

我完全无法想出为什么这不起作用。

有人有想法么？

正如我所说，将@emp 的任何其他条目传递给它，它会运行良好。我什至可以通过它'5118'，它会工作，但不是 5118。

# jquery - 尝试使用 jquery/masonry 避免水平滚动

> ID：12518695
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:29:38.130
> 
> 标签：jquery, jquery-masonry

这是我第一次发帖 ：）

我对 Web 开发非常陌生，就在几天前，当我决定开始为我的乐队建立一个新网站时，我真的什么都不知道。因此，如果代码不是最好的，请不要怪我，现在我希望网站看起来不错并且适用于任何屏幕分辨率（=> 1920x1080 和智能手机）到目前为止，我已经能够实现一切我想要，但现在我在尝试了一整天后被卡住了：

请看一下这个网站[http://www.unstuc.de/test/band_site_for_stackoverflow.html](http://www.unstucc.de/test/band_site_for_stackoverflow.html)（这是我到目前为止所取得的成就的当前快照）

如果您禁用 javasript 并水平调整浏览器大小，您会看到每个乐队成员的那些“框”移动，因此它们始终完全可见。你永远不必水平滚动，除非你的屏幕真的很小。如果您水平放大浏览器并且右侧有足够的空间放置另一个“框”，则下一个“框”会向上跳一行。我喜欢这种行为，我想保留它。但是砌体破坏了这种行为，你可以看到如果你启用了javascript。要查看位于右侧的乐队成员，您必须水平滚动到右侧。我怎样才能配置砌体以尊重这种预期的行为，但仍然在定位“盒子”方面发挥它的魔力？我想让砖石把它们放在正确的位置，因为它看起来好多了，因为“盒子”

我希望我的描述足够清楚，英语不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:02:29.330

你的绝对定位

```
<div id="left"> 
```

推动整个 Masonry 容器

```
<div id="band_right"> 
```

到屏幕右侧，因此需要滚动。如果您总是希望“CD 封面/社交网络图标”元素出现在左上方，请使用简单的 Masonry 左角图章技巧：将该元素设为您的第一个 .masonry-brick，然后摆脱这些元素

```
left: 420px; 
```

在您的 Masonry 容器 CSS 上，它将起作用。只需禁用 left: 420px; 在 Chrome 的 devtools 中，你会明白我的意思。

# javascript - 以面向对象的方式实现我的应用程序时遇到问题

> ID：12518699
> 
> 赞同：0
> 
> 时间：2012-09-20T18:30:02.973
> 
> 标签：javascript

我一直在编写 JS 代码，但我从未做过任何面向对象的事情。我通常只是在顶部定义所有变量，然后全部使用它们。我一遍又一遍地听到要使用 OO，但现在我不能做我想做的事，也得不到任何帮助。

这是一个小提琴，以及半相同的代码：

[http://jsfiddle.net/zDeAJ/1/](http://jsfiddle.net/zDeAJ/1/)

```
var App = {
    options: {

        /* ------------------------------------
             Options (PREFERABLY DONT CHANGE)
        --------------------------------------- */

        baseDomain     : 'google.com',
        apiVersion     : '/api/v1'

    },
    state: {

        current: App.options.baseDomain + App.options.apiVersion

    }
} 
```

所以做 App.options.baseDomain（或 this.options.baseDomain）对我不起作用。如果我不能基于它们定义其他应用程序级别值，那么定义应用程序级别变量有什么用处？我知道这是一个模糊的问题，但我真的不知道我在问什么......我只是有一个问题，我很容易用一堆变量来完成，这些变量不仅包含设置，还包含状态在我的应用程序中，以我对 Javascript OO 模式的了解并不容易......编辑：好的，这就是我想要做的：

[http://i.imgur.com/ak5YD.png](http://i.imgur.com/ak5YD.png)

但我不知道这些限制......所以我需要一种解决方法，它尽可能接近和优雅地实现这个实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:46:23.293

你的问题很笼统；您应该更具体地说明您要完成的工作。

除此之外，请阅读有关对象的文档；

取自[w3schools：](http://www.w3schools.com/js/js_objects.asp)

> 使用 JavaScript，您可以定义和创建自己的对象。
> 
> 创建新对象有两种不同的方法：
> 
> ```
> 1\. Define and create a direct instance of an object.
> 2\. Use a function to define an object, then create new object instances. 
> ```

方式一：

```
personObj=new Object();
personObj.firstname="John";
personObj.lastname="Doe";
personObj.age=50;
personObj.eyecolor="blue"; 
```

方式二：

```
function person(firstname,lastname,age,eyecolor)
{
    this.firstname=firstname;
    this.lastname=lastname;
    this.age=age;
    this.eyecolor=eyecolor;

    this.changeName=changeName;
    function changeName(name) {
        this.lastname=name;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:48:59.447

JavaScript 是一种解释型语言。这意味着您的代码是从内向外评估的，或者最内部的表达式被评估并传递给下一个外部表达式。

在您的示例中，`options`首先评估 get 的值，然后评估`state`. 问题是您无法`App`在完全评估之前访问关联数组 ，而在评估 的值期间并非如此`state`。

`EDITED`

抱歉没有正确回答。这是您的第二个改进的方法：

```
var App = {
    options: {

        /* ------------------------------------
             Options (PREFERABLY DONT CHANGE)
        --------------------------------------- */

        baseDomain     : 'google.com',
        apiVersion     : '/api/v1',
        blah: ''

    },
    blah: function(){

        return App.options.baseDomain + App.options.apiVersion;

    }
}

console.log(App.blah()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:17:30.813

你们中没有一个人回答我的问题....我考虑了一下...我可以在文字中使用命名函数来访问它...如果我愿意（不必要），我什至可以将其分配回去到选项对象

[http://jsfiddle.net/zDeAJ/9/](http://jsfiddle.net/zDeAJ/9/)

```
var App = {
    options: {

        /* ------------------------------------
             Options (PREFERABLY DONT CHANGE)
        --------------------------------------- */

        baseDomain     : 'google.com',
        apiVersion     : '/api/v1',
        blah: ''

    },
    state: function(){

        this.options.blah = this.options.baseDomain + this.options.apiVersion;

    }
}

App.state();
console.log(App.options.blah); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:38:19.973

您可以将您的方法视为创建一个名为 App 的“实例”对象。

这是一种略有不同的方法。

```
function App () {
    // Save a reference to the object
    var that = this;

    that.options = {
        baseDomain: "google.com",
        apiVersion: "/api/v1"
    };

    that.state = {
        current: that.options.baseDomain + that.options.apiVersion
    };
}

var myApp = new App();
// Write the current state to the screen
document.write(myApp.state.current); 
```

这是 JSFiddle：http: [//jsfiddle.net/zDeAJ/1/](http://jsfiddle.net/zDeAJ/1/)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T18:41:15.430

您可以执行以下操作（在 JavaScript 中，函数是对象）：

```
function App () {
    // Save a reference to the object
    this.options = {
        baseDomain: "google.com",
        apiVersion: "/api/v1"
    };

    this.state = {
        current: this.options.baseDomain + this.options.apiVersion
    };
}

var myApp = new App();
console.log(myApp); 
```

# css - 在水平滚动页面上水平居中

> ID：12518702
> 
> 赞同：1
> 
> 时间：2012-09-20T18:30:08.263
> 
> 标签：css, horizontal-scrolling, alignment

我正在尝试开发一个水平滚动网站，其中单击导航中的链接会将页面滚动到链接的 div 的右侧。

问题是我希望它滚动到的元素在浏览器窗口中水平居中。我认为这可以使用 javascript 来完成，但我不知道如何去做。

这是我的 HTML 的 pastebin 链接：http: [//pastebin.com/YxajLvtW](http://pastebin.com/YxajLvtW) 这是 CSS： http: [//pastebin.com/JpaJC2Yg](http://pastebin.com/JpaJC2Yg)

我知道如何实现javascript，但不一定读/写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:33:29.970

这应该会有所帮助：[http ://www.arvindandrion.com/jquery/horizo​​ntal-scroll-using-jquery-scrollto/](http://www.arvindandrion.com/jquery/horizontal-scroll-using-jquery-scrollto/)

一般建议：使用像[jQuery](http://jquery.com/)这样的 Javascript 框架来编写 Javascript 功能。它让生活变得更轻松:)

也许也看看这个： http: [//api.jquery.com/scrollLeft/](http://api.jquery.com/scrollLeft/)

# asp.net - 实体框架代码首先已经打开数据阅读器？

> ID：12518703
> 
> 赞同：3
> 
> 时间：2012-09-20T18:30:17.350
> 
> 标签：asp.net, .net, entity-framework, ef-code-first, entity-framework-4.3

我在我的应用程序中为代码优先实体添加了一个简单的方法，该方法`TopicCount`接受一个布尔值。它计算导航属性中的项目数，并根据传入的布尔值是 true 还是 false 进行不同的过滤。

```
public class Board
{
    public short BoardID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public bool Hidden { get; set; }
    public bool ModsOnly { get; set; }
    public bool Locked { get; set; }
    public bool Anonymous { get; set; }
    public bool AllTopics { get; set; }

    public virtual ICollection<Topic> Topics { get; set; }

    public long TopicCount(bool isModerator)
    {
        if (isModerator)
            return this.Topics.ToList().Count;
        else
            return this.Topics
                .Where(x => !x.ModsOnly)
                .Where(x => !x.Board.ModsOnly)
                .Where(x => !x.Board.Hidden)
                .Count();
    }
} 
```

当我调用此`TopicCount`方法时，它会失败（无论布尔值是真还是假），并出现以下错误：

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:18:59.567

This is also a symptom of streaming the results of multiple commands on a single context (ala lazy loading). You can set “MultipleActiveResultSets=True" in your connection string to get around that.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:36:55.707

我认为最快的我解决了我自己的问题。原来我正在迭代一个延迟加载的`Board`实体集合。在该迭代中，我随后迭代了 Board 的导航属性，它是另一个数据读取器。

The simple fix was to call `.ToList()` on the collection of boards and iterate over the in-memory collection.

# performance - vim 是否将整个文件读入内存

> ID：12518705
> 
> 赞同：6
> 
> 时间：2012-09-20T18:30:20.430
> 
> 标签：performance, memory, vim, slowdown

当我打开一个文件时，vim 是否将其全部读入内存？当我打开大文件时，我的速度明显变慢。还是它忙于计算某些东西（例如，行号）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:46:23.633

禁用语法高亮、光标线、行号等功能将大大减少负载并使 Vim 在这些情况下更快捷。

甚至还有[一个插件](http://www.vim.org/scripts/script.php?script_id=1506)可以为你处理这个问题，还有[一个 Vim 提示](http://vim.wikia.com/wiki/Faster_loading_of_large_files)可以提供一些背景信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T18:16:32.103

是的，Vim 将整个文件加载到内存中。

如果您`htop`在另一个窗格中运行，您可以实时观看它发生的情况。

如果您没有足够的可用内存，它将开始命中交换，这使得它需要更长的时间。

您可以禁用插件和重要功能（如语法突出显示）以提高性能（`-u`有效地告诉 vim 不要加载您的`~/.vimrc`.

`vim -u NONE mysqldump.sql`

但是，除非您真的需要*编辑*文件，否则我更喜欢使用不同的工具。我通常使用`less`. 我主要在 vim 中搜索文件`/`并`less`支持它。

`less mysqldump.sql`

# mysql - Mysql JOIN with IN 和 RIGHT 表的多个结果

> ID：12518710
> 
> 赞同：0
> 
> 时间：2012-09-20T18:30:40.400
> 
> 标签：mysql, join, left-join, outer-join, group-concat

左表（简化）是：

```
id
name (ex:Bob)
tags (ex:1,4,6) 
```

右表是：

```
id
tag (ex:Sailing) 
```

我想像这样得到 LEFT 表的结果：

```
row 1:
   name: Bob
   tags: Sailing,Snowboard,... 
```

我得到的最接近的是：

```
SELECT `name`, GROUP_CONCAT(`right`.`tag`) AS tags
FROM (`left`)
LEFT OUTER JOIN `right` ON `right`.`id` IN(left.tags)
ORDER BY `name` asc 
```

但是由于 GROUP_CONCAT()，这给了我一行。没有它，它会给我所有的结果，但只有逗号分隔列表中的第一个标签。我知道我已经很接近了，但我在这方面浪费了太多时间。任何帮助表示赞赏。

我知道我可以创建第三个表 left_right，其中包含行（id、left_id、right_id）以使其工作，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:45:46.717

尝试添加一个 GROUP BY 名称字段，您应该能够选择所有名称及其标签的列表。

```
SELECT `name`, GROUP_CONCAT(`right`.`tag`) AS tags
FROM (`left`)
LEFT OUTER JOIN `right` ON `right`.`id` IN(left.tags)
GROUP BY `name`
ORDER BY `name` ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:41:30.237

首先，bažmegakapa 说的是正确的，还有更多。如果我正确理解了您描述的设置，那么您已经在浪费大量空间（和性能）。

你可以这样做：

```
CREATE TABLE pleft ( id integer, name varchar(20), tags integer );
CREATE TABLE pright ( id integer, tag varchar(20));

INSERT INTO pleft VALUES ( 1, 'Bob', 1 ), ( 9, 'Bob', 4 ), ( 15, 'Bob', 6 );
INSERT INTO pleft VALUES ( 2, 'Ann', 1 ), ( 3, 'Joe', 4 ), ( 4, 'Joe', 6 );

INSERT INTO pright VALUES ( 1, 'Sailing' ), ( 4, 'Snowboarding' ), ( 6, 'Skiing' );

SELECT pleft.name, GROUP_CONCAT(pright.tag)
    FROM pleft JOIN pright ON ( pleft.tags = pright.id )
    GROUP BY pleft.name ORDER BY pleft.name;

+------+-----------------------------+
| name | GROUP_CONCAT(pright.tag)    |
+------+-----------------------------+
| Ann  | Sailing                     |
| Bob  | Sailing,Skiing,Snowboarding |
| Joe  | Snowboarding,Skiing         |
+------+-----------------------------+ 
```

...但请注意名称在`pleft`表格的每一行中是如何不必要地重复的。理想情况下，您将有一张表对人进行建模：(id=1, name="Bob")，一张表对标签进行建模 (id=6, value="Skiing") 和一张包含它们的关系的表。这将确保，例如，Bob 决定使用“Robert”，您不必对整个标签表进行 de-bob，而只需对涉及 Bob 的一行进行 de-bob。

**更新**

`tags`持有“1,4,6”的 varchar 字段也是如此。同样的逻辑也适用，但现在我们必须在重新组合之前拆分字段。你不能使用像“1 in tags”这样的东西，因为“11”会返回true（“1”毕竟包含在“11”中）。（这是被称为“Jaywalking”的 SQL 反模式：参见例如[https://groups.google.com/forum/?fromgroups=#!topic/django-users/5j4AmQE6nTk](https://groups.google.com/forum/?fromgroups=#!topic/django-users/5j4AmQE6nTk)）

```
SELECT pleft.name, GROUP_CONCAT(pright.tag)
FROM pleft JOIN pright
    ON ( CONCAT(',',pleft.tags,',') LIKE CONCAT('%,',pright.id,',%' ))
GROUP BY pleft.name ORDER BY pleft.name; 
```

另一种方法是使用存储过程：请参阅[http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/)。

```
CREATE TABLE pleft ( id integer, name varchar(20), tags varchar(20) );
INSERT INTO pleft VALUES ( 1, 'Bob', '1,4,6' ), ( 2, 'Jill', '4,1' );
SELECT pleft.name, GROUP_CONCAT(pright.tag)
    FROM pleft JOIN pright
        ON ( CONCAT(',',pleft.tags,',') LIKE CONCAT('%,',pright.id,',%' ))
    GROUP BY pleft.name ORDER BY pleft.name;
+------+-----------------------------+
| name | GROUP_CONCAT(pright.tag)    |
+------+-----------------------------+
| Bob  | Sailing,Snowboarding,Skiing |
| Jill | Sailing,Snowboarding        |
+------+-----------------------------+ 
```

# jquery - 如何使用 jquery 将 ajax 获取结果导入 SQLite

> ID：12518712
> 
> 赞同：0
> 
> 时间：2012-09-20T18:30:46.290
> 
> 标签：jquery, ajax, sqlite, get

我开发了一个移动应用程序，我想在 SQLite db 中导入一个文本文件的内容。

我使用下面的代码来读取文本文件

```
function billtxt()
{
    var billjson = '{"posts" : [', 
        i, 
        line = 0,
        bill = 0,
        Amountint,
        Amountdec;

        jQuery.ajaxSetup({
                'beforeSend' : function(xhr) {
                     xhr.overrideMimeType('text/plain; charset=iso-8859-7');
                },
        });

        jQuery.get('Bill.txt',function(data){
            alert(data.length);
            line=0;

            for (i = 1; i <= ((data.length)/156); i += 1) {
                billjson += '{"Id" :' + '"' + data.substr((line+0), 10).trim() + '"'  + ',';
                billjson += '"Code" :' + '"' + data.substr((line+10), 5).trim() + '"'  +  ',';
                billjson += '"Address" :' + '"' + data.substr((line+14), 40).trim() + '"'  +  ',';
                billjson += '"Name" : ' + '"'  + data.substr((line+54), 50).trim() + '"'  +  ',';
                billjson += '"Description" : ' + '"'  + data.substr((line+104), 8).trim() + '"'  +  ',';
                billjson += '"EntrySeason" : ' + '"'  + data.substr((line+112), 23).trim() + '"'  +  ',';
                billjson += '"Period" : ' + '"'  + data.substr((line+135), 11).trim() + '"'  +  ',';
                Amountint = data.substr((line+146), 7).trim();
                Amountdec = data.substr((line+153), 2).trim();
                billjson += '"Revenue" : ' + '"'  + Amountint + '.' + Amountdec + '"'  +  '}';
                line = i * 156;
                if (line == data.length)
                {
                    billjson += ']';
                }
                else 
                {
                    billjson += ',';
                }
            }

            if (line == 0)
            {
                billjson += ']';
            }

            billjson += "}";
            var mybilljson = jQuery.parseJSON( billjson );
        });
} 
```

我将读数转换为 JSON，但我认为这不是合适的解决方案......

将读数导入 SQLite 需要做什么？

# scons - 如何过滤 SCons Glob 结果？

> ID：12518715
> 
> 赞同：3
> 
> 时间：2012-09-20T18:30:57.583
> 
> 标签：scons

我有时想从 SCons 的 Glob 结果中排除某些源文件。通常是因为我想用不同的选项编译那个源文件。像这样的东西：

```
objs = env.Object(Glob('*.cc'))
objs += env.Object('SpeciallyTreatedFile.cc', CXXFLAGS='-O0') 
```

当然，这给 SCons 带来了问题：

```
scons: *** Two environments with different actions were specified
       for the same target: SpeciallyTreatedFile.o 
```

我通常使用以下成语解决此问题：

```
objs = env.Object([f for f in Glob('*.cc')
  if 'SpeciallyTreatedFile.cc' not in f.path]) 
```

但这很丑陋，如果要过滤掉多个文件，那就更丑陋了。

有没有更清晰的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T18:30:57.583

我厌倦了`[f for f in Glob ...]`在几个地方重复表达式，所以我编写了以下帮助方法并将其添加到构建环境中：

```
import os.path

def filtered_glob(env, pattern, omit=[],
  ondisk=True, source=False, strings=False):
    return filter(
      lambda f: os.path.basename(f.path) not in omit,
      env.Glob(pattern))

env.AddMethod(filtered_glob, "FilteredGlob"); 
```

现在我可以写了

```
objs = env.Object(env.FilteredGlob('*.cc',
  ['SpeciallyTreatedFile.cc', 'SomeFileToIgnore.cc']))
objs += env.Object('SpeciallyTreatedFile.cc', CXXFLAGS='-O0') 
```

使用这种模式很容易编写类似的东西，例如，使用正则表达式过滤器作为`omit`参数，而不是简单的文件名列表，但这很适合我当前的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-01T17:47:31.600

这是一个老问题，但值得更新，因为它仍然出现在搜索中。

SCons 2.3.5 为 引入了`exclude`关键字参数`Glob`，因此以下内容现在有效：

```
objs = env.Object(Glob('*.cc'), exclude=['SpeciallyTreatedFile.cc'])
objs += env.Object('SpeciallyTreatedFile.cc', CXXFLAGS='-O0') 
```

由于`exclude`需要一个列表，因此可以包含许多排除项，并且排除列表本身可能包含与 glob 相同类型的通配符。用户文档列出了以下示例：

```
sources = Glob('*.cpp', exclude=['os_*_specific_*.cpp']) + Glob('os_%s_specific_*.cpp'%currentOS) 
```

# iphone - UIWebView 加载被覆盖但不刷新的本地图像

> ID：12518716
> 
> 赞同：1
> 
> 时间：2012-09-20T18:30:58.217
> 
> 标签：iphone, html, ios, image, uiwebview

我的问题是这个

我正在将 html 字符串加载到 UIWebView 中，在其中我从应用程序的 Documents 文件夹中引用本地图像。

```
<html><body><img src="image.png"/></body></html> 
```

它加载得很好，baseUrl 或任何东西都没有问题。问题是当我做一些事情并生成一个具有相同名称的新图像并将其保存在同一个 Documents 文件夹中时，覆盖旧图像（如果存在旧图像，我将删除它并保存新图像）。

现在，UIWebView 仍然加载在屏幕上，如果我执行 [webview reload] 或再次手动加载 html 字符串，我仍然会得到旧图像，即我刚刚覆盖的图像。

我已经在模拟器文件夹中检查了，image.png 确实是新图像，而不是旧图像。而且我已经做了所有可以想象的事情来阻止 webview 缓存。

当然，如果我用不同的名称保存新图像，比如“image2.png”，然后用 src="image2.png" 重新加载 html 字符串，一切正常。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T11:36:27.623

尝试将随机查询字符串附加到您的图像源。IE。

```
function ImageSource(src){
  return src + "?time=" + (new Date()).getTime().toString();
}
function ForceImageReloads(){
  var images = document.getElementsByTagName("img");
  for (var i=0;i<images.length;i++){
    var img = images[i];
    var s = img.getAttribute("src");
    img.src = ImageSource(s);
  }
}
ForceImageReloads(); 
```

或类似的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:34:16.037

这可能是模拟器的问题。我曾经有过类似的事情。尝试在真实设备上运行您的代码。对我来说，模拟器似乎懒得重新加载同名的数据。

# php - 将数组插入数据库

> ID：12518719
> 
> 赞同：0
> 
> 时间：2012-09-20T18:31:09.800
> 
> 标签：php, mysql

我正在创建一个检查功能，使我能够检查特定的数据`id`并且`categoryid`已经存在于数据库中：

```
$fields['Occupation'] = array(3) { [0]=> string(1) "1" [1]=> string(1) "6" [2]=> string(1) "7" } 
```

**有问题的线路：**

```
$occCheck = Jojo::selectQuery("SELECT * FROM {refocus_candidate_category} WHERE canid=? AND categoryid=?", array($emailCheck['id'], $fields['Occupation'])); 
```

**为什么会出现此错误以及如何解决：**

```
Unknown column 'Array' in 'where clause' 
```

**全面检查功能**：

```
 if($occCheck != FALSE)
    {
        Jojo::updateQuery("UPDATE {refocus_candidate_category} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?", array($emailCheck['id'], $fields['Occupation']));
    }else{
        Jojo::insertQuery("INSERT INTO {refocus_candidate_category} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?", array($emailCheck['id'], $fields['Occupation']));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:41:02.387

它看起来`$fields['Occupation']`是一个数组，它将被替换为`categoryid=>?< category ID`. 为每个类别一步一步地向数据库提出问题怎么样？

或者

```
$occCheck = Jojo::selectQuery("SELECT * FROM {refocus_candidate_category}
                               WHERE canid=".$emailCheck['id']."
                               AND categoryid in
                                 (".implode(",",$fields['Occupation']).")"); 
```

如果 `$emailCheck['id']`不是数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:40:16.737

您是否有特定原因将 an 传递`Array`给`...Query(`函数而不是单独的参数？PHP 将一个参数传递给数据库 - 数据库将其解释为字符串 - 因此您的查询实际上是在搜索单词“Array”。

试试这个：

```
$occCheck = Jojo::selectQuery("SELECT * FROM {refocus_candidate_category}".
                              " WHERE canid=? AND categoryid=?",
                              $emailCheck['id'], $fields['Occupation']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:40:50.197

当您正在编写这些奇怪的值时，您在查询中尝试做什么并不完全清楚`SET canid=?`。

但是您面临的问题是，您在 SQL 查询字符串中连接整个数组。尝试`echo`一个数组，然后你会看到它被打印为`Array`. 这就是您的问题查询的来源被扩展为`someField=Array`. 现在它`Array`甚至不在单引号中，所以 mysql 假设它是一个列。因此你的错误。

删除那个`array($emailCheck['id'], $fields['Occupation'])`。并且刚刚设置`$emailCheck['id'], $fields['Occupation'][0]`。你的`field['Occupation']`是和整个阵列，所以根据你的需要选择一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:42:03.430

您必须确定要查询的职业：

```
$occCheck = Jojo::selectQuery("
   SELECT * FROM {refocus_candidate_category} WHERE canid=? AND categoryid=?",
   array($emailCheck['id'], $fields['Occupation'][1])); 
```

在这种情况下，我使用索引为 1 的职业，这将导致选择职业 6。

# windows - 不需要安装任何框架/依赖项的 Windows 编程语言 (GUI)

> ID：12518725
> 
> 赞同：0
> 
> 时间：2012-09-20T18:31:44.173
> 
> 标签：windows, programming-languages

我大部分时间都使用 C#/VB.NET 来编写 Windows 应用程序。

但是，当我的客户需要一个不需要在目标系统上安装框架（例如**.Net 4 ）的应用程序时，就会发生这种情况。**所以exe文件可以在不安装任何依赖项的情况下运行。

我知道**C/C++**，但在其中编写 GUI 应用程序非常困难。我听说过**D**语言，但它似乎很新鲜，根本没有（不够）文档。

也有**德尔福**，但它是如此昂贵。

还有其他东西吗？

注意：我更喜欢编译语言而不是解释语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:01:05.000

如果成本是一个因素，既然你拒绝 Delphi，那么 FreePascal 和 Lazarus IDE 怎么样。它刚刚达到 1.0 版，并且具有很高的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:41:45.363

是的。

了解库 (DLL) 的要点：避免*每次都*必须将常用函数/方法/类捆绑到应用程序中。考虑到这一点，我会问*为什么不要求在目的地安装库？*

是磁盘空间吗？需要努力吗？恐惧/偏执狂？（缺乏）专业知识？

我希望解决这个“要求”的*根本原因*，而不是试图解决它。

有一些方法可以静态链接任何函数/方法/类/等。您的代码需要直接进入您的二进制文件。

如果您离开 .NET 并进入[Windows 汇编编程的美妙世界](https://www.grc.com/smgassembly.htm)（警告：接近垂直的学习曲线），您可以编写不需要外部任何东西的极小应用程序（我们说的是几 K）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T01:26:20.423

如果您想要一个不使用框架的 Windows 的 GUI 编译器，那么您需要 Visual Basic 版本 6，它自 1998 年以来一直没有更新。

如果您想要一种不使用框架的 Windows 网络脚本语言，那么您需要 Classic ASP，遗憾的是它自 2000 年以来就没有更新过。

经典的 ASP 震撼。它比 .NET 框架好几英里。微软是由白痴经营的。Perl 和 PHP 只是 Classic ASP 的继子。经典 ASP 是微软制作的最后一款优秀的开发工具。什么样的白痴会认为霸道的框架适用于所有软件开发？.NET 框架是一个丑陋、臃肿的自动生成代码的马戏团，它给真正的开发人员的裤子浇了冰。

# java - 在 Java -D 中，D 代表什么？

> ID：12518728
> 
> 赞同：46
> 
> 时间：2012-09-20T18:31:46.367
> 
> 标签：java, properties

D在什么

```
-Dproperty=value 
```

设置系统属性值。

[Java 应用程序启动器](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/java.html#options)代表什么？出于某种原因，它一直困扰着我，为什么是 D？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-20T18:33:18.127

我一直认为它是*定义*属性的值......可能是 C 编译器的遗留物，它通常在代码中使用`-D`类似于。`#define`

编辑：目前我最接近的来源是[一些JDK 1.1文档](http://www.tns.lcs.mit.edu/manuals/java-1.1.1/tooldocs/win32/java.html)，它将标志指定为：

> **重新定义**属性值。propertyName 是您要更改其值的属性的名称，而 newValue 是要将其更改为的值。[...]

至少包含接近“定义”的“重新定义”一词:)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-20T19:12:22.330

在 C/C++ 编译器中，类似的语法用于从命令行定义预处理器宏：

```
#include <stdio.h>
int main(int argc, char* argv[]) {
    printf(GREETING);
    return 0;
} 
```

.

```
gcc hello.c -DGREETING="\"Hello, world\"" 
```

Java 没有预处理器，但是`-D`用 唯一的区别是在 Java 中我们在运行时而不是在编译时传递它们：

```
public class Hello {
    public static void main(String[] args) {
        System.out.println(System.getProperty("greeting"));
    }
} 
```

.

```
java -Dgreeting="Hello, world" Hello 
```

我认为这种相似性是相似语法的来源。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-20T18:34:02.067

原因是**D**代表**DEFINE**，因为该命令开关所做的是定义变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T18:35:34.710

可能是 for `Define`，因为您正在定义一个属性

# php - 使用自己的上下文资源的 Coral CDN 的 file_get_contents 将不起作用

> ID：12518731
> 
> 赞同：1
> 
> 时间：2012-09-20T18:31:56.010
> 
> 标签：php, http, proxy, cdn

我正在尝试使用[Coral CDN](http://www.coralcdn.org/)加载 URL，但如果我使用自己的上下文资源，我无法使其工作。

```
<?php
$url = 'http://www.stackoverflow.com/';
echo substr(htmlentities(file_get_contents($url)),0,100); // works OK

echo '<hr />';

$url = 'http://www.stackoverflow.com.nyud.net/'; // CORAL content distribution network
echo substr(htmlentities(file_get_contents($url)),0,100); // works OK

echo '<hr />';

$options = array(
      'http'=>array(
        'method'=>"POST",
        'header'=>
            "Host: www.stackoverflow.com.nyud.net\r\n".
            "Connection: keep-alive\r\n".
            "Content-Length: 3\r\n".
            "Cache-Control: max-age=0\r\n".
            "Origin: http://www.stackoverflow.com.nyud.net\r\n".
            "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1\r\n".
            "Content-Type: application/x-www-url-form-encoded\r\n".
            "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n".
            "Accept-Encoding: gzip,deflate,sdch\r\n".
            "Accept-Language: en-US,en;q=0.8\r\n".
            "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3",
         'content'=>'a=1'
    ));
$context = stream_context_create($options);
echo file_get_contents($url,false,$context); // 405 error?
?> 
```

这是我得到的实际错误：

> **警告**：file_get_contents(http://www.stackoverflow.com.nyud.net/) [function.file-get-contents]：打开流失败：HTTP 请求失败！**C:\...\lab\php-exec\index.php(4)**中的 HTTP/1.0 405 ：第**29**行的 eval() 代码

 **我知道[curl](http://www.php.net/curl)可能有效，但我坚持使用[file_get_contents()](http://www.php.net/file_get_contents)，您认为我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:03:58.953

好吧，我认为您**无法**向网站发送 POST 请求`*.nyud.net`，请参阅[基本帖子](http://hurl.eu/hurls/d28d4dfecd59d672b1bc150b324f337dceb73995/b2293f58f42d54676ce28cdfdae53bdd58804bd3)。

要求：

```
POST / HTTP/1.1
Host: www.stackoverflow.com.nyud.net
Accept: */*
Content-Length: 3
Content-Type: application/x-www-form-urlencoded

a=1 
```

回复：

```
HTTP/1.0 405
date: Thu, 04 Oct 2012 21:53:32 GMT
server: CoralWebPrx/0.1.20 (See http://coralcdn.org/)
content-type: text/html
connection: close 
```

这似乎很正常，因为它充当**任何**网站的 CDN，无论该网站是否正常。

由于 POST 请求意味着您想向网站提交内容、创建、更新或其他任何内容，CoralCDN 无法处理它，因为它无法**代表它**向其他网站提交内容。这可能是一个安全问题。没有人可以匿名将他们想要的内容发布到网站...

如果您想向请求发送参数，请将它们放在 url 中（GET 请求是可以的），但是即使使用 cURL，也没有任何解决方案可以向 CoralCDN 发送 POST 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:19:06.270

错误 405 表示“不允许此请求方法”。

您可以将请求方法从 POST 更改为 GET 。它可能有效。

```
<?php
$url = 'http://www.stackoverflow.com.nyud.net/';
$options = array(
        'http'=>array(
        'method'=>"GET",
        'header'=>"Accept-language: en\r\n"
  )
);

$context = stream_context_create($options);
echo file_get_contents($url,false,$context); //works 
```**

# jquery - 奇怪，罕见但有问题的行为在单击按钮时访问 jquery UI 输入自动完成的值

> ID：12518733
> 
> 赞同：0
> 
> 时间：2012-09-20T18:32:02.873
> 
> 标签：jquery, html, jquery-ui, jquery-autocomplete, onchange

基本上，我有时很难从带有自动完成功能的 jquery UI 输入中获得正确的值。Iv 创建了一个 jsfiddle 来演示该行为。很难解释确切的问题，但这是小提琴：

[http://jsfiddle.net/B4mXH/14/](http://jsfiddle.net/B4mXH/14/)

要重现，请完全按照以下步骤操作，同时打开浏览器开发工具 js 控制台：

1.  专注于文本输入
2.  将鼠标移离输入
3.  c型
4.  按键盘上的向下箭头选择“abc”
5.  将鼠标悬停在选项“cde”上
6.  单击按钮。

错误：我不会得到任何价值。undefined 被记录到控制台。预期：输入框中的任何值。请=）

如果重要的话，我正在使用 chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:45:32.873

如果您将`change`处理程序换成`blur`一个，它将按预期工作：

```
$('#autocomplete').blur(function(event, ui) {
    value = $(this).val();
}); 
```

我不确定为什么，但我假设 UI 以编程`change`方式触发影响存储`value`变量结果的事件。

此外，如果您想始终获取文本输入的当前值，您可以在使用时查询它，而不是将其存储在变量中：

```
$('#button').click(function() {
    console.log("clicked with : " + $('#autocomplete').val());
}); 
```

您的项目可能有一些限制，您不能使用它，但如果您可以使用它，它是最防弹的方法。

# php - 致命错误：未捕获的 SoapFault 异常：[Client] SOAP-ERROR: Encoding: string '\xa3...' is not a valid utf-8 string

> ID：12518736
> 
> 赞同：3
> 
> 时间：2012-09-20T18:32:13.747
> 
> 标签：php, soap, encoding

我正在尝试将 mySQL 数据库中的数据传递到第 3 方 Web 服务，该服务位于 Windows 平台上，使用 PHP 中的 SoapClient 但是如果我发送一个包含井号 (£) 的字段，则会收到一条错误消息：

SOAP-ERROR: Encoding: string '\xa3...' is not a valid utf-8 string

我认为这与字符编码有关，我是否正确地认为如果我将 utf8_encode() 包裹在每个字段周围这将解决问题？我刚刚从我的最后尝试过，我不再收到错误，但直到明天才能在第 3 方结束时检查它，因为我现在没有访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T08:02:40.860

这个问题看起来是一样的：[SOAP-ERROR: Encoding: string ... is not a valid utf-8 string](https://stackoverflow.com/questions/8006274/soap-error-encoding-string-is-not-a-valid-utf-8-string)

我建议使用 mb_substr 而不是 substr，或者您可以在 php.ini 中将 mbstring_overload 设置为 2 或更多。它应该可以帮助你。

# javascript - 确定在 mousedown 事件期间是否按下 Shift 键

> ID：12518741
> 
> 赞同：22
> 
> 时间：2012-09-20T18:32:23.013
> 
> 标签：javascript, d3.js

是否可以确定在 mousedown d3.event 期间是否按下了 Shift 键？如果可能的话，可以告诉我一种方法，请尝试查看 API，但找不到有用的东西

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-20T18:59:05.613

你应该能够使用这样的东西：

```
d3.select(window).on("click", function() {
    if (d3.event.shiftKey) {
        alert("Mouse+Shift pressed");
    }
}); 
```

演示：http: [//jsfiddle.net/SO_AMK/NTGKG/1/](http://jsfiddle.net/SO_AMK/NTGKG/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-12T09:48:50.180

也许有必要使用：

```
if (d3.event.sourceEvent.shiftKey) {
  console.log("shift pressed");
} 
```

# asp.net-mvc - mvvm viewmodel vs asp.net mvc viewmodel

> ID：12518742
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:32:26.793
> 
> 标签：asp.net-mvc, viewmodel

不，这不是重复的！

```
In MVVM viewModel a PersonViewModel wraps a Person model.
In MVC  viewModel a PersonViewModel does/should not wrap a Person. 
```

相反，使用 Automapper 否则它将是**混合 PersonViewModel**。

所以关于**SO的****mvc alpha 极客**说

 **视图模型包装模型的 mvc 不允许/不想要的原因是什么？

**我的问题的背景是这样的：**

当我不将模型包装在视图模型中时，我必须将所有模型属性分配给控制器中的视图模型属性。那是一团糟。然后人们告诉使用 AutoMapper，这部分很好，部分很糟糕，因为现在我在 AutoMapper 配置文件类中有 viewModel 逻辑，并且我在属于那里的 viewmodels 中有 viewModel 逻辑。

现在我必须测试自动映射器和视图模型。我希望有一个一致的架构，我只测试视图模型，但我必须包装我的模型。

这就是我的问题的起源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:42:11.403

这是完全*允许*的，但它不是 MVC 结构的一部分。如果您开始使用视图模型包装数据模型，那么您就开始遵守 MVVM。

您使用哪种模式取决于许多因素，并且通常很大程度上取决于您的个人喜好。因此，使用一种模式而不是另一种模式并没有本质上的*错误*，但这样做的重点是遵守特定的一组原则以实现一致的架构。**

# ios - 在 XCode 4.5 中无法模拟

> ID：12518746
> 
> 赞同：4
> 
> 时间：2012-09-20T18:32:41.597
> 
> 标签：ios, simulator, xcode4.5

自从更新到 XCode 4.5 后，我无法在模拟器中打开我的应用程序。

它说“在 iPhone 5.0 模拟器上运行完成”。

有时，在重试两次或三次之后，模拟器终于启动了，但应用程序从未在其中启动。

我对这个新版本的 XCode 感到很生气。

我已经用一个简单的“Hello World”视图开始了一个全新的项目。即使是一个干净的全新项目也无法解决问题。

我真的错过了隐藏在配置中的东西吗？

谢谢

莱昂内尔

**编辑 9/21**

当我尝试在装有 iOS 5.1 的 iPad 2 上运行时，出现以下错误，可能与上述内容有关：

“选择具有受支持架构的目标，以便在此设备上运行。”

*   我的项目部署目标是 5.0
*   我的项目构建设置：有效架构 = armv7 armv7s
*   我的 Target 部署目标是 5.0
*   我的目标基础 SDK 是 6.0
*   我的目标有效架构是：armv7 armv7s

在我的 iPhone 4 上更新到 iOS 6：同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:07:00.997

再次，我从头开始，从应用程序中删除所有信息并小心地放回每个文件，一切都可以无缝运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:56:46.213

不太可能是您的任何设置。Xcode 有时会进入一种奇怪的状态。通常的修复是强制退出 Xcode、强制退出模拟器、重启。

# .net - 对通用列表进行排序

> ID：12518749
> 
> 赞同：0
> 
> 时间：2012-09-20T18:32:46.870
> 
> 标签：.net, vb.net, linq, generics, sorting

我有一个`MyObject`包含`CreationDate As Date`属性的类。

获得排序依据的最佳方法是`CreationDate` `List(Of MyObject)`什么？

更快的方式和最高效的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:35:06.940

使用 LINQ，您可以使用：

```
Dim sorted = unsorted.OrderBy(Function(x) x.CreationDate) _
                     .ToList() 
```

编辑：如果您已经有了一个`List(Of T)`，您可以将就地`Sort`方法与自定义比较器一起使用。那*可能*会更快。它可能不会。我怀疑这不太可能在性能上有*显着*差异，这是您应该关注的。

根据经验，我建议：

*   找出什么是“足够”的表现
*   以最易读的方式编写代码（可能是 LINQ 而不是自定义比较器，IMO）
*   测量该代码
*   如果速度*不够*快，请尝试另一种方法，并对其进行测量。将性能差异与可读性/可维护性差异进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:44:52.657

列表有一个排序方法。它的一个重载允许指定一个比较

```
unsorted.Sort(Function(x, y) x.CreationDate.CompareTo(y.CreationDate)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:42:07.973

您可以实现该`IComparer`接口并定义它的`Compare`方法来检查您的`MyObject`对象的日期：

```
public class MyObjectComparer<T> : IComparer<T>
{
    public int Compare(MyObject firstObject, MyObject secondObject)
    {
        return firstObject.CreationDate.Compare(secondObject.CreationDate);
    }
} 
```

注意：我假设您`CreationDate`是类型`DateTime`，但您可以根据需要实现比较功能。

然后根据您的比较器对您的列表进行排序：

```
myListObject.Sort(new MyObjectComparer<MyObject>()); 
```

# javascript - 阻止 javascript 执行并等待 UI 中触发的事件

> ID：12518754
> 
> 赞同：1
> 
> 时间：2012-09-20T18:33:02.410
> 
> 标签：javascript, google-chrome-extension

我有一个方法，我想停止执行（不返回），等待 UI 触发的事件，然后继续该方法。

```
chrome.webRequest.onBeforeSendHeaders.addListener(
    function(details) {

        var newHeaders;
        //I need to stop here, wait on some user event, update the `newHeaders` variable with
        //the content set by the user on the page

        return {requestHeaders:newHeaders};
    },
    {urls: ["<all_urls>"]},
    ["blocking", "requestHeaders"]
); 
```

我在做什么：开发一个[拦截请求](http://developer.chrome.com/stable/extensions/webRequest.html#event-onBeforeSendHeaders)的chrome插件，通过用户从html的输入修改它们，然后发送请求。根据文档，我假设我必须直接在方法中修改它并返回它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:52:55.783

我希望这会为您指明正确的方向：

[位于http://developer.chrome.com/trunk/extensions/webRequest.html](http://developer.chrome.com/trunk/extensions/webRequest.html)的文档说：

> 如果可选的 opt_extraInfoSpec 数组包含字符串 'blocking'（仅允许用于特定事件），则同步处理回调函数。这意味着请求被阻塞，直到回调函数返回。在这种情况下，回调可以返回一个 BlockingResponse，它决定了请求的进一步生命周期。根据上下文，此响应允许取消或重定向请求 (onBeforeRequest)、取消请求或修改标头 (onBeforeSendHeaders、onHeadersReceived)，或提供身份验证凭据 (onAuthRequired)。

我的猜测是您可以指定“阻止”，然后从您的用户那里收集信息。

# android - 安卓游戏的“拖动控制”

> ID：12518755
> 
> 赞同：0
> 
> 时间：2012-09-20T18:33:06.273
> 
> 标签：android

我对android开发不是很熟悉，所以问题可能与开发过程无关。

我注意到在一堆不同的游戏中我可以拖动圆圈并以这种方式移动单位。

这是来自某个库的默认控件，还是每个开发人员都写了类似的东西？

我可以在哪里获得它的任何示例或教程？

![在此处输入图像描述](../Images/2a2fbbabaf07d1fc80c5a85d2e20fe87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:38:08.203

这称为模拟控制器，大多数游戏开发框架（如[AndEngine](http://www.andengine.org/)和[LibGDX）](http://code.google.com/p/libgdx/)都提供它。这两个引擎都是开源的，AndEngine 框架中这个组件的代码可以在[这里](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/engine/camera/hud/controls/AnalogOnScreenControl.java)找到。

但是，您可能需要考虑在您的应用程序中使用游戏引擎本身，而不是拾取其中的一部分并编写自己的。

# xcode - 安装 GLEW 并将其与 Xcode 一起使用

> ID：12518757
> 
> 赞同：2
> 
> 时间：2012-09-20T18:33:16.817
> 
> 标签：xcode, opengl, glut, glew

所以我已经从网站下载了最新的 glew v. 1.9 并在终端中制作，我不知道如何将它成功添加到 GLUT OpenGL Xcode 项目中。我可以很容易地添加 OpenGl 和 GLUT 框架，但我找不到任何 glew 框架或类似的东西。

主要问题是我的一个文件有#include GL/glew.h 并且找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T05:22:33.233

虽然使用“框架”是 Apple 的做事方式，但 XCode 将允许您指定标头路径和共享库（如 Nixlike 环境中的约定）。

1）转到目标的属性，2）查找标题搜索路径字段并将您的 Glew 标题添加到该字段。3) 然后在编译 GLEW 的目录中查找 GLEW 共享库（通常是“.a”或“.so”文件）。将此目录添加到目标的库搜索路径和 4) 然后最后在依赖项列表中链接到此库。

# algorithm - 如何在不使用决策结构的情况下在 python 中将负数更改为零

> ID：12518760
> 
> 赞同：34
> 
> 时间：2012-09-20T18:33:21.250
> 
> 标签：algorithm, python-3.x, validation, negative-number

我有一个程序可以确定您每天获得的积分数，为期 5 天。

源代码：

```
total=0

for x in range (5):
    points=int(input('How many points did you get today?'))
    total=total+points

print ('You got {0} points this event'.format(total)) 
```

我的问题是如何在不使用决策语句的情况下将任何低于或等于零的数字设为 0（如果是，案例，我认为 while 或 for 循环也是不允许的）

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-09-20T18:40:46.003

可以使用内置函数吗？因为这通常使用以下方法完成：

```
max(0, points) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-21T08:09:29.177

```
>>> f=lambda a: (abs(a)+a)/2         
>>> f(a)
0
>>> f(3)
3
>>> f(-3)
0
>>> f(0)
0 
```

# c - 返回 C 返回数组时遇到问题

> ID：12518762
> 
> 赞同：0
> 
> 时间：2012-09-20T18:33:32.747
> 
> 标签：c

我全局声明 hws 并尝试在此方法中返回它，但出现指针错误。我想知道是否有人知道这是为什么并且可以提出解决方案？Randomize 只是得到一个随机数。

```
extern int hws[100][20];

int randomize()
{

    int value;
    int tru_fals = 0;
    value = -1;
    while ( tru_fals != 1 )
    {
        value = rand();
        if ( 0 < value )
        {
            if( 101 > value )
            {
                tru_fals = 1;
            }
        }
    }
    return value;

}
int *populate()
{

    int i, j;

    i = 0;
    j = 0;
    while( i < 20 )
    {
        while ( j < 100)
        {
            int temp = randomize();
            hws[i][j] = temp;
            j++;
        }
        i++;
    }
    return hws;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:38:16.727

你定义`extern int hws[100][20];`.
这不会创建任何数组。它只是说在程序的某个地方，应该有一个。

为了使其工作，其他一些源文件必须真正定义数组 - `int hws[100][20];`（不带`extern`）。然后，如果你编译两者并链接在一起，它应该可以工作。

如果您只想要一个源文件，那就容易多了——只需删除`extern`.

**但是：**刚刚注意到[Serge 的回答](https://stackoverflow.com/a/12518852/1111371)，这实际上是问题的真正原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:40:45.097

有一个错误：数组被声明为 100x20，但是你像 20x100 一样迭代它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:59:52.720

除非它是`sizeof`, `_Alignof`, 或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of”类型的*表达式*`T`将被转换（“decay”）为“pointer to `T`”类型的表达式，其值将是数组中第一个元素的地址（[6.3.2.1/3](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)）。

在行`return hws;`中`populate`，表达式的类型`hws`是“100 元素数组的 20 元素数组`int`”；根据上面的规则，它将被转换为类型“指向 20 元素数组的指针`int`”，或者`int (*)[20]`. 因此，正确的声明`populate`需要是

```
int (*populate())[20]
{
   ...
   return hws;
} 
```

读作

```
 populate           -- populate
      populate()         -- is a function
     *populate()         -- returning a pointer
    (*populate())[20]    -- to a 20-element array
int (*populate())[20]    -- of int. 
```

并且您返回结果的任何类型也需要是`int (*)[20]`。

话说回来...

出于多种原因，强烈建议不要以这种方式使用全局变量。最好将数组`populate`作为参数传递，如下所示：

```
void populate(int (*arr)[20], size_t rows)
{  
  size_t i, j;

  for (i = 0; i < rows; i++)
  {
    for (j = 0; j < 20; j++)
    {
      arr[i][j] = randomize();
    }
  }
} 
```

你可以简单地称之为

```
populate(hws, sizeof hws / sizeof hws[0]); 
```

如果您使用的是支持可变长度数组的编译器（C99 编译器或未定义`__STDC_NO_VLA__`或将其定义为 0 的 C2011 编译器），您可以将函数定义为

```
void populate(size_t cols, size_t rows, int (*arr)[cols]) // cols must be declared
{                                                         // before it can be used
  size_t i, j;                                            // to declare arr

  for (i = 0; i < rows; i++)
  {
    for (j = 0; j < cols; j++)
    {
      arr[i][j] = randomize();
    }
  }
} 
```

并将其称为

```
size_t rows = sizeof hws[0] / sizeof hws[0][0];  // dividing the size of the array
size_t cols = sizeof hws / sizeof hws[0];        // by the size of the first element
populate(cols, rows, hws);                       // gives the number of elements 
```

所以你不会在任何地方对 20 进行硬编码。

如果您没有使用支持可变长度数组的编译器，并且不想硬编码函数原型中的行数，则可以执行以下操作：

```
void populate(int *arr, size_t rows, size_t cols)
{
  size_t i, j;
  for (i = 0; i < rows; i++)
  {
    for (j = 0; j < cols; j++)
    {
      arr[i * rows + j] = randomize();
    }
  }
} 
```

并将其称为

```
// rows and cols calculated as above
populate(&hws[0][0], rows, cols); 
```

在这种情况下，我们不是传递指向数组的指针，而是传递指向第一个元素的指针（地址值相同，但类型`int *`不是`int (*)[20]`. 所以`populate`函数将其视为一维数组，并计算偏移量与`i * rows + j`. 请注意，此技巧仅适用于已连续分配的 2D 数组。

这也意味着它`populate`可以处理任何大小的数组，而不仅仅是 Nx20。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:36:30.550

hws 是一个矩阵，这意味着它和 int **

您正在返回并且 int * 所以您的指针类型不匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T18:38:34.587

首先，它不需要返回，因为它是全局的。其次，它是一个指向 int 的指针。它是一个数组的数组。

# http - 我的重写引擎解析了 HTTP 标头的哪一部分？

> ID：12518763
> 
> 赞同：0
> 
> 时间：2012-09-20T18:33:34.400
> 
> 标签：http, url-rewriting, header, http-headers, rewrite

鉴于以下标题：

```
GET /resources/css/jquery-ui.css HTTP/1.1
Host: site.com
Connection: keep-alive
Cache-Control: no-cache
Pragma: no-cache
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Accept: text/css,*/*;q=0.1
Referer: http://site.com/ 
```

头文件的哪一部分被重写引擎解析？（我主要关心 Nginx）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:35:56.743

GET 部分，即`/resources/css/jquery-ui.css`在您的示例中。

# wxpython - wxPython添加具有多选选项的框架

> ID：12518767
> 
> 赞同：0
> 
> 时间：2012-09-20T18:33:51.973
> 
> 标签：wxpython

![在此处输入图像描述](../Images/de4c9d21e392a4b3fdc04647a81dedbf.png)我需要创建一个 Python 框架，如附图所示。

让我知道如何完成它。

![在此处输入图像描述](../Images/66ee55dd80cd989ca7d640cf8d6a3d79.png)

总共有3个块.. 1.header 2.Navigation 3.Main content..

导航块应该是多帧..每次选择一个选项时都需要更改..

它必须更像菜单导航

导入随机导入wx

#

类 TabPanel1(wx.Panel): #----------------------------------------- ----------------------------------------- def **init** (self, parent): """""" wx.Panel。**初始化**（自我，父母=父母）

```
 colors = ["red", "blue", "gray", "yellow", "green"]
    self.SetBackgroundColour(random.choice(colors))

panel1 = wx.Panel(self,size=(400,100))
panel1.SetBackgroundColour('#4f5049')

panel1gs = wx.GridSizer(2,2,1,2)

panel1gs.AddMany( [ (wx.StaticText(self,label='FirstLabel'),0,wx.EXPAND),
        (wx.StaticText(self,label='SecondLabel'),0,wx.EXPAND),
        (wx.StaticText(self,label='ThirdLabel'),0,wx.EXPAND),
        (wx.StaticText(self,label='FourthLabel'),0,wx.EXPAND)
        ] )

panel1.SetSizer(panel1gs)

panel2 = wx.Panel(self,size=(400,100))
panel2.SetBackgroundColour('#4f5042')

panel3 = wx.Panel(self,size=(400,100))
panel3.SetBackgroundColour('#4f5042')

    btn = wx.Button(self, label="Press Me")
    sizer = wx.BoxSizer(wx.VERTICAL)
    sizer.Add(btn, 0, wx.ALL, 5)
sizer.Add(panel1, 0, wx.ALL, 5)
sizer.Add(panel2, 0, wx.ALL, 5)
sizer.Add(panel3, 0, wx.ALL, 5)

    self.SetSizer(sizer) 
```

类 TabPanel2(wx.Panel): #----------------------------------------- ----------------------------------------- def **init** (self, parent): """""" wx.Panel。**初始化**（自我，父母=父母）

```
 colors = ["red", "blue", "gray", "yellow", "green"]
    self.SetBackgroundColour(random.choice(colors))

    btn = wx.Button(self, label="Press Me")
    sizer = wx.BoxSizer(wx.VERTICAL)
    sizer.Add(btn, 0, wx.ALL, 10)

    self.SetSizer(sizer) 
```

#

class DemoFrame(wx.Frame): """ 包含所有其他小部件的框架 """

```
#----------------------------------------------------------------------
def __init__(self):
    """Constructor"""        
    wx.Frame.__init__(self, None, wx.ID_ANY, 
                      "Notebook Tutorial",
                      size=(800,600)
                      )
    panel = wx.Panel(self)

    notebook = wx.Notebook(panel)
    tabOne = TabPanel1(notebook)
    notebook.AddPage(tabOne, "Tab 1")

    tabTwo = TabPanel2(notebook)
    notebook.AddPage(tabTwo, "Tab 2")

    sizer = wx.BoxSizer(wx.VERTICAL)
    sizer.Add(notebook, 1, wx.ALL|wx.EXPAND, 5)
    panel.SetSizer(sizer)
    self.Layout()

    self.Show() 
```

# -------------------------------------------------- --------------------

如果**name** == " **main** ": app = wx.App(False) frame = DemoFrame() app.MainLoop()

最新更改 Newcode.py

```
import random
import wx

########################################################################
class PanelTextCombo(wx.Panel):
     def __init__(self,parent):
    wx.Panel.__init__(self,parent=parent,size=(400,100))

    self.SetBackgroundColour('blue')

    panel1gs = wx.GridSizer(2,2,1,2)

    panel1gs.AddMany( [ (wx.StaticText(panel1,label='FirstLabel'),0),
            (wx.StaticText(panel1,label='SecondLabel'),0),
            (wx.StaticText(panel1,label='ThirdLabel'),0),
            (wx.StaticText(panel1,label='FourthLabel'),0)
            ] )

    panel1.SetSizer(panel1gs)

class TabPanel1(wx.Panel):
    #----------------------------------------------------------------------
    def __init__(self, parent):
        """"""
        wx.Panel.__init__(self, parent=parent)

        colors = ["red", "blue", "gray", "yellow", "green"]
        #self.SetBackgroundColour(random.choice(colors))
    self.SetBackgroundColour('RED')

    #panel1 = wx.Panel(self,size=(400,100))
    #panel1.SetBackgroundColour('blue')

    #panel1gs = wx.GridSizer(2,2,1,2)

    #panel1gs.AddMany( [ (wx.StaticText(panel1,label='FirstLabel'),0),
    #       (wx.StaticText(panel1,label='SecondLabel'),0),
    #       (wx.StaticText(panel1,label='ThirdLabel'),0),
    #       (wx.StaticText(panel1,label='FourthLabel'),0)
    #       ] )

    #panel1.SetSizer(panel1gs)
    panel1 = PanelTextCombo(TabPanel1)
    #panel2 = wx.Panel(self,size=(400,100))
    #panel2.SetBackgroundColour('green')

    #panel3 = wx.Panel(self,size=(400,100))
    #panel3.SetBackgroundColour('#4f5042')

        btn = wx.Button(self, label="Press Me")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(btn, 0, wx.ALL, 5)
    sizer.Add(panel1, 0, wx.ALL, 5)
    #sizer.Add(panel2, 0, wx.ALL, 5)
    #sizer.Add(panel3, 0, wx.ALL, 5)

        self.SetSizer(sizer)

class TabPanel2(wx.Panel):
    #----------------------------------------------------------------------
    def __init__(self, parent):
        """"""
        wx.Panel.__init__(self, parent=parent)

        colors = ["red", "blue", "gray", "yellow", "green"]
        self.SetBackgroundColour(random.choice(colors))

        btn = wx.Button(self, label="Press Me")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(btn, 0, wx.ALL, 10)

        self.SetSizer(sizer)

########################################################################
class DemoFrame(wx.Frame):
    """
    Frame that holds all other widgets
    """

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""        
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "Notebook Tutorial",
                          size=(800,600)
                          )
        panel = wx.Panel(self)

        notebook = wx.Notebook(panel)
        tabOne = TabPanel1(notebook)
        notebook.AddPage(tabOne, "Tab 1")

        tabTwo = TabPanel2(notebook)
        notebook.AddPage(tabTwo, "Tab 2")

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(notebook, 1, wx.ALL|wx.EXPAND, 5)
        panel.SetSizer(sizer)
        self.Layout()

        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = DemoFrame()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:21:00.953

使用 wx.StaticText 作为顶部的标签，然后使用 wx.Notebook（或其他“书”小部件之一）作为其余部分。请参阅以下教程：

*   [http://www.blog.pythonlibrary.org/2009/12/03/the-book-controls-of-wxpython-part-1-of-2/](http://www.blog.pythonlibrary.org/2009/12/03/the-book-controls-of-wxpython-part-1-of-2/)
*   [http://www.blog.pythonlibrary.org/2010/09/15/wxpython-a-simple-notebook-example/](http://www.blog.pythonlibrary.org/2010/09/15/wxpython-a-simple-notebook-example/)

# objective-c - 手动调用 UITableViewCell 的重新排序控件

> ID：12518774
> 
> 赞同：0
> 
> 时间：2012-09-20T18:34:20.687
> 
> 标签：objective-c, ios, cocoa-touch

在当前的 UITableView 功能中，您可以将单元格设置为可编辑并单击并拖动其重新排序控件。反正有没有调用这个重新排序控制并可能把它放在整个单元格上？

# javascript - 如何检查客户端是否可以通过端口 843 连接？

> ID：12518782
> 
> 赞同：3
> 
> 时间：2012-09-20T18:35:22.933
> 
> 标签：javascript, socket.io

使用 socket.io，**端口 843**似乎对防火墙等问题的影响最小，因为 flash 使用该端口。

但是，许多网络阻塞了**端口 843**，因此它们根本无法连接。

我设置了一个负载均衡器，可以将 http 流量从**端口 80**重定向到**843**，所以这些人，但我的问题是我想不出如何测试某人是否阻止 了端口**843 。**

有任何想法吗？

或者，如果我可以更改 socket.io 的**XHR**方法以始终使用备用连接 url，那可能是最理想的。我更厌倦了做任何有超时的测试，因为这会更多地延迟连接。在 websocket 连接尝试超时后更改某些内容是理想的。

我在想的是..

```
var socket = io.connect('http://example.com:843', {'connect timeout':5000}); 

socket.on('connect_failed', function(){
    // change socket to connect to port 80
} 
```

但我不确定那时我将如何更改连接 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:02:34.330

Not tested but wouldn't re-initialize socket to port 80 work?

```
var socket = io.connect('http://example.com:843', {'connect timeout':5000}); 

socket.on('connect_failed', function(){
    // change socket to connect to port 80
    socket = io.connect('http://example.com:80', {'connect timeout':5000});
} 
```

# mysql - 创建自定义订单属性

> ID：12518783
> 
> 赞同：0
> 
> 时间：2012-09-20T18:35:25.087
> 
> 标签：mysql, magento, attributes

在我的模块（名称=支付）中，我试图在订单中创建一个自定义属性，但我的代码不起作用。

我的文件 pay_setup/mysql4-install-1.0.0.php

```
$installer = new Mage_Sales_Model_Mysql4_Setup;
$installer->startSetup();
$attribute  = array(
    'type'          => 'text',
    'backend_type'  => 'text',
    'frontend_input' => 'text',
    'is_user_defined' => true,
    'label'         => 'My Attr',
    'visible'       => true,
    'required'      => false,
    'user_defined'  => false,   
    'searchable'    => false,
    'filterable'    => false,
    'comparable'    => false,
    'default'       => ''
);
$installer->addAttribute('order', 'myattr', $attribute);
$installer->endSetup(); 
```

我的 config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Myspacework_Pay>
            <version>1.0.0</version>
        </Myspacework_Pay>
    </modules>
    <frontend>
        <routers>
            <pay>
                <use>standard</use>
                <args>
                    <module>Myspacework_Pay</module>
                    <frontName>pay</frontName>
                </args>
            </pay>
        </routers>
        <layout>
            <updates>
                <pay>
                    <file>pay.xml</file>
                </pay>
            </updates>
        </layout>
    </frontend>
    <global>
        <fieldsets>
            <sales_convert_quote_payment>
                <celphone_no>
                    <to_order_payment>*</to_order_payment>
                </celphone_no>
            </sales_convert_quote_payment>
        </fieldsets>
        <models>
            <pay>
                <class>Myspacework_Pay_Model</class>
                <resourceModel>pay_mysql4</resourceModel>
            </pay>
        </models>
        <resources>
            <pay_setup>
                <setup>
                    <module>Myspacework_Pay</module>
                    <class>Mage_Sales_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </pay_setup>
            <pay_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </pay_write>
            <pay_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </pay_read>
        </resources>
        <blocks>
            <pay>
                <class>Myspacework_Pay_Block</class>
            </pay>
        </blocks>
        <helpers>
            <pay>
                <class>Myspacework_Pay_Helper</class>
            </pay>
        </helpers>
    </global>
    <default>
        <payment>
            <pay>
                <active>1</active>
                <model>pay/standard</model>
            </pay>
        </payment>
    </default>
</config> 
```

我在数据库中没有发现“我的属性”的踪迹。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:27:54.780

我得到了它

```
$installer = $this;
$installer->startSetup();

$installer->addAttribute('order_payment', 'my_attr', array());

$installer->endSetup(); 
```

如何在我的 attr 中设置数据。

```
$order->getPayment()->setMyAttr(utf8_encode($data));
$order->getPayment()->save(); 
```

# macros - Visual Studio 2012 中的“打开包含文件夹”热键

> ID：12518787
> 
> 赞同：7
> 
> 时间：2012-09-20T18:35:47.150
> 
> 标签：macros, keyboard-shortcuts, visual-studio-2012

在 2012 年之前的 Visual Studio 版本中，我能够创建一个热键来为当前活动的文本文件执行“打开包含文件夹”。我通过创建一个分配了按键的宏来实现这一点。

Visual Studio 2012 没有宏。我将如何在此版本中完成上述操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T05:55:26.617

不幸的是，您现在需要下载 VSSDK 并创建一个 VSPackage 来执行此操作，因为宏已从 IDE 中删除。

[现在最接近宏的是 PowerShell script](http://www.wintellect.com/CS/blogs/jrobbins/archive/2012/03/30/using-nuget-powershell-to-replace-missing-macros-in-dev-11.aspx)，您可以从控制台运行它，但我不知道有任何方法可以为其分配键盘快捷键。

在 IDE 之外运行 PS 是一种选择（通过配置了键盘快捷键的外部工具命令），但在进程之外获取 EnvDTE 可能会很复杂。

**编辑：**有一个更简单的解决方案。我不敢相信我一开始就没有意识到！

只需进入*工具...选项...环境...键盘* 定位`File.OpenContainingFolder`并分配一个快捷方式。此命令将打开活动文档的包含文件夹。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-11T05:49:00.247

我找到了**打开包含文件夹**的键盘快捷键：`Alt`++`-``O`

当你按`Alt`+`-`时它会打开`Tab Context Menu`然后你看到***O*** *pen Containing Folder*的快捷键是**O**键，那么你应该按**O**。

[![菜单](../Images/d515365ed40fdba701d5be9ade7eac5a.png)](https://i.stack.imgur.com/EFxdA.png)

# mysql - 在同一张表中查询sql select两次

> ID：12518790
> 
> 赞同：0
> 
> 时间：2012-09-20T18:36:02.800
> 
> 标签：mysql, sql

我必须在同一个表中选择两个`project.project_dates`（一个用于开始，一个用于结束）我有两个字段`project.start = true`并`project.end = true`用于识别它

SQL 查询应该是什么样的？

我试过了：

```
SELECT 
    pz.cognome AS Cognome,
    (select s.presa_in_carico_data from tbl_progetto s where s.is_progetto = 1 AND                    
        s.cc_id_fk = cc.cc_id) as Start,
    (select e.presa_in_carico_data from tbl_progetto e where e.is_dimissione = 1 AND 
        e.cc_id_fk = cc.cc_id) as End, 
    trf.trf_note AS "Tipo trattam.",
    trf.trf_prezzou as Retta,
    COUNT(tra.trt_id) AS "N.GG." /*<-- this is normal count from date range select from user(#) */
FROM
    tbl_progetto p 
    JOIN tbl_cartellaclinica cc ON cc.cc_id = p.cc_id_fk
    JOIN tbl_paziente pz ON pz.id = cc.pz_fk_id
    JOIN tbl_distretti_sanitari di ON pz.distretto_appartenenza = di.dss_id
    JOIN tbl_trattamenti tra ON p.pr_id = tra.pr_fk_id    
WHERE
    tra.trt_data BETWEEN '2012-08-01' AND '2012-08-31' AND
    p.pr_faseriab_fk = 4
GROUP BY cc_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:43:07.890

```
select p.id as ProjectId,
(select s.date from project_dates s where s.start = true and s.project_id = p.id) as StartDate,
(select e.date from project_dates e where e.end = true and e.project_id = p.id) as EndDate
into #temp
from Project p 
```

更新：

为了回答您的评论，我必须再次假设您的数据库中的情况，但我会做这样的事情：

创建一个临时表来存储上述查询的结果（参见更改）。然后：

```
select p.id
       (select count(1) from Meeting m where m.date between '2012-01-01' and '2012-08-31' and m.project_id = p.id) as Count1
       (select count(1) from Meeting m where m.date between (select StartDate from #temp where ProjectId = p.id) and (select EndDate from #temp where ProjectId = p.id) and m.project_id = p.id) as count2
from Project p 
[where p.id = <something>] 
```

# java - 缺少 maxOccurs 是否表示无界

> ID：12518796
> 
> 赞同：1
> 
> 时间：2012-09-20T18:36:24.133
> 
> 标签：java, web-services, soap, axis2

我正在使用 Axis2 创建一个 SOAP Web 服务，并在响应中返回一个复杂类型。当 Axis2 生成 wsdl 时，它将 1 分配给 minOccurs 但是 maxOccurs 找不到。这是否意味着缺少的 maxOccurs 是无界的，或者它是像 1 这样的默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:41:10.860

正如在[w3cshool](http://www.w3schools.com/schema/schema_complex_indicators.asp)中所写，它是 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:39:19.403

> minOccurs 和 maxOccurs 属性的默认值为**1**

从

[XML Schema 第 0 部分：入门第二版](http://www.w3.org/TR/xmlschema-0/)

# grails - 获取结果时需要禁用 Grails 延迟加载

> ID：12518802
> 
> 赞同：0
> 
> 时间：2012-09-20T18:36:42.050
> 
> 标签：grails

以下是我的域类

```
class Sender {

String senderFname;
String senderLname;
String senderPhone;

Collection receivers

static hasMany = [receivers: Receiver]
}

class Receiver {

String receiverFname;
String receiverLname;
String receiverPhone;

    static belongsTo = [sender: Sender]
} 
```

我正在为简单的搜索功能编写逻辑。

```
def customers() {

    println 'customers params '+params
    //def senderCriteria = Sender.createCriteria()
    def senderList = Sender.withCriteria {

        if(params.senderfname)
            like('senderFname',params.senderfname)
        if(params.senderlname)
            like('senderLname',params.senderlname)          
        if(params.senderphone)
            like('senderPhone',params.senderphone)

        createAlias("receivers", "t")

        //receivers {
            if(params.receiverfname)
                like('t.receiverFname',params.receiverfname)
            if(params.recieverlname)
                like('t.receiverLname',params.receiverlname)
            if(params.recieverphone)
                like('t.receiverPhone',params.receiverphone)
        //}

    }

    println "senderList "+senderList;

    senderList.each{ it->  println 'sender '+it
        println 'receivers '+it.receivers

    }
    //senderList = senderList.unique()
    println "senderList "+senderList;
    render(view: 'customers', model: [senderList: senderList])

} 
```

从发送者到接收者存在一对多的关系。我想过滤发送者对象及其相应的接收者对象。

主要的 createCriteria 返回发送者对象的预期结果。但是当我访问发送者对象以获取相应的接收者时，它会再次从数据库中加载所有接收者。

有没有办法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:54:42.170

您可以在创建别名时指定连接类型。

```
 createAlias("receivers", "t", org.hibernate.criterion.CriteriaSpecification.LEFT_JOIN) 
```

# c# - 在类中按双精度对列表进行排序

> ID：12518803
> 
> 赞同：0
> 
> 时间：2012-09-20T18:36:46.277
> 
> 标签：c#, list, sorting

我有一个列表，winningCombos，类型为winningCombo，它有一个类型为spin。像这样：

```
 public List<winningCombo> winningCombos;

  public class winningCombo
    {
        public List<spin> winningSymbols; 
        public double cumulativeValue;
    }

  public class spin
    {
        public string Name;
        public double Value;
    } 
```

按每个类winningCombo中的双cumaltiveValue的值对列表winningCombos进行排序的有效方法是什么？其中一些具有相同的价值。所以winingCombos[0] 应该是double cumaltiveValue 中的最小值，并且一直向上。感谢您的任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:40:04.060

这可以通过[`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)如下方式进行排序：

```
winningCombos.Sort( (l, r) => l.cumulativeValue.CompareTo(r.cumulativeValue)); 
```

您还可以使用 LINQ 来获取排序结果：

```
var sorted = winningCombos.OrderBy(wc => wc.cumulativeValue); 
```

（请注意，后者不会更改原始集合，而是返回一个新的、排序的`IEnumerable<winningCombo>`。）

# iphone - 如何在特定方向连续移动多个 UIButton？

> ID：12518807
> 
> 赞同：0
> 
> 时间：2012-09-20T18:36:51.920
> 
> 标签：iphone, xcode, uibutton, core-animation

我的应用程序中有五个 UIButton。所有这些 UIButton 都存储在 Array 中。如下面的代码所示

```
 NSMutableArray *Buttons = [NSMutableArray arrayWithObjects:btn1, btn2, btn3,btn4,btn5, nil]; 
```

现在我想连续移动所有这些 UIButtons 在特定方向。如下图所示

![在此处输入图像描述](../Images/c28486df428baf230d4e9f2592ecad16.png)

我已经在 CAkeyframeAnimation 中做了一些动画，但是作为一个 iOS 初学者，我很难使用 CAKeyframeAnimation 在多个 UIButtons 上执行这些类型的连续动画。有人可以帮我解决这个问题。任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:06:22.700

如果你试图移动这些按钮以使它们对用户触摸做出反应，那么直接使用 Core Animation 可能不是你最好的选择。我下面的回答是基于这个假设。

当基于 Core Animation 的动画运行时，您看到在屏幕上移动的层（“表示层”——有关此的更多信息，请参见[此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/CoreAnimationArchitecture.html)）不会在其当前位置注册触摸，而只会在动画的最终位置注册，这对用户是不可见的。因此，移动按钮在大多数情况下都会表现得好像它被禁用一样。虽然可以破解这个问题，但它不是很方便，也不打算以这种方式使用。

另一个缺点是`CAAnimation`一旦创建就不是很灵活，例如，如果您需要，将按钮的移动停止在其当前位置会很乏味。

相反，您应该`UIButtons`手动计算和移动帧。要将移动与显示刷新率同步并获得流畅的动画，请使用[`CADisplayLink`](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)，这是一个非常易于使用的类，您可以使用它来注册一个方法，该方法将在每次刷新显示时回调。在这种方法中，您应该根据所需的视图行为更新视图框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:21:48.250

我不知道你已经做了什么，但你可以使用 UIView 动画，然后确保启用设置 UIViewAnimationOptionAllowUserInteraction 选项。

然后，您可以在按钮上放置一个手势识别器。

要让它动画化，只需使用 UIView 的基于块的动画，只需要完成 4 个，并让它们重复。这很繁琐，但它是一个快速而肮脏的解决方案。

# php - 在codeigniter的自定义库中使用自定义库？

> ID：12518811
> 
> 赞同：2
> 
> 时间：2012-09-20T18:37:02.933
> 
> 标签：php, codeigniter, libraries

我遇到的问题是我正在尝试在我在 codeigniter 中创建的另一个自定义库中使用自定义库。它们都在库文件夹中，CodeIgniter 告诉我必须首先加载我所做的 CI 实例......

```
class MyClass {

public function __construct()
{
    $CI =& get_instance();
    $CI->load->library("OtherClass");
} 
```

现在在这个类中的一个函数内部，我正在尝试使用我的其他库..

```
public function my_function()
{
      $CI->otherclass->function_inside_this_class();
} 
```

我得到的错误是

```
A PHP Error was encountered
Severity: Notice
Message: Undefined variable: CI
Filename: libraries/MyClass.php
Line Number: 20 
```

在声明 codeigniter 实例本身方面有什么我遗漏的吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T18:41:54.007

您的 CI 变量范围目前仅限于构造函数。您可以创建一个具有类范围的类变量，并且可以通过`$this->variable`该类中的所有函数访问。

```
class MyClass {

private $_CI; // make a private class variable here. 

public function __construct()
{
    $this->_CI =& get_instance();
    $this->_CI->load->library("OtherClass");
}
public function my_function()
{
    $this->_CI->otherclass->function_inside_this_class();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:38:13.643

我认为你不应该使用 CI。在 中包含`second_library.php`并创建一个新类`first_library.php`。还是不可能？

# asp.net - VB6 和 ASP.NET 互操作性

> ID：12518819
> 
> 赞同：1
> 
> 时间：2012-09-20T18:38:15.143
> 
> 标签：asp.net, vb.net, vb6

我支持安装在 Web 服务器上的 ASP.NET 应用程序和安装在不同应用程序服务器上的 VB6 应用程序。VB6 应用程序和 ASP.NET 应用程序中存在代码重复。我想在 VB6 的 ASP.NET 应用程序中使用一些代码。我相信我有三个选择：

1.  在 ASP.NET Web 服务中公开所需的功能。VB6 应用程序将使用 Web 服务。
2.  在 .NET 中重写一小部分 vb6 应用程序并扩展 asp.net 应用程序。这将消除一些代码重复。
3.  为 ASP.NET 应用程序设置一个类库。在 Web 服务器上安装 vb6 应用程序。在类型库中从类库中公开所需的功能。

哪个选项最好？我相信选项2是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:43:31.703

选项 1。这会将您共享的、已经测试过的代码留在最现代的平台上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:02:50.847

这很难回答，因为它因每家公司和每种情况而异。

作为一般规则，我非常赞成在可能的情况下使用 Web 服务，特别是如果多个应用程序出于以下原因使用相同的逻辑时：

*   如果我必须更改逻辑，我可以在一个地方完成并修复所有依赖它的应用程序
*   对于数据库连接字符串等也可以这样说。
*   错误修复通常也可以在一个地方修复。

    *   我在处理需要处理的***特定数据库时遇到了困难，供应商的更新往往会破坏他们的 .NET 适配器。***我不得不两次修改/重新编译大量应用程序来解决这个问题。从那时起，我们将仅通过 Web 服务连接到该数据库作为一项政策，因此我将来只需要更新***一个***应用程序。
*   在开发移动应用程序时，我们已经在 Web 服务中拥有了所有代码这一简单事实使得编写严格的 UI 应用程序并将业务/数据库访问逻辑保留在现有 Web 服务中变得更加容易。

所有这些都是 SOA 方法的“标准”论据。

考虑到所有因素，我的第一个建议是，不知道您的具体情况将是选项#1。

还有第四个选项 - 完全重写 VB6 应用程序，如果可行，并且您可以说服那些控制预算和时间分配的人。即使这样，您也可以使用面向服务的架构并将大部分逻辑拆分为 Web 服务。

# c++ - C++ sscanf 空格分隔字符串

> ID：12518820
> 
> 赞同：1
> 
> 时间：2012-09-20T18:38:15.947
> 
> 标签：c++

这是我的练习代码：

```
int integer_part;

char* string_part = (char*)malloc(sizeof(1000));

char* input_string = (char*)malloc(sizeof(1000)+sizeof(int));

cin>>input_string;

sscanf(input_string, "%s %d", string_part, &integer_part);

printf("scan: %s %d", string_part, integer_part); 
```

我正在使用此代码进行输入，`abc 2012`但结果将是`abc 0`

遗憾的是我没有看到问题出在哪里。任何人都可以帮我解决这个问题吗？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:43:39.343

这仅读取第一个空格分隔的字符串：

```
cin>>input_string; 
```

使用这种方式：

```
cin>> string_part >> integer_part; 
```

不要混合使用 C++ 和 C 从流中读取的方式。

您可以使用这种方式来读取没有空格分隔的字符串：

```
cin.read ( input_string, sizeof(1000)+sizeof(int) - 1);
size_t read_Len = cin.gcount();
input_string[read_Len] = '\0'; 
```

我可以理解您需要`scanf`以给定格式读取数据的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:41:39.820

你在滥用`sizeof`. 如果你想要 1,000 个字符的空间，你不想要 1,000 本身的大小，你想要一个字符大小的 1,000 倍。您可以使用`1000 * sizeof(char)`. 由于`sizeof`返回字符（因此`sizeof(char)`必须为 1），您可以只使用`1000`.

# objective-c - 为什么这个类别有效？类别与类扩展

> ID：12518828
> 
> 赞同：1
> 
> 时间：2012-09-20T18:38:50.847
> 
> 标签：objective-c, categories, class-extensions

这就是我在我的一个类的实现文件中的内容......

代码设置 #1

```
@interface MyViewController (PrivateMethods)
- (NSString *)myPrivateMethod;
@end

@implementation MyViewController
- (void)viewDidLoad
{
    NSString *myString = [self myPrivateMethod];
    NSLog(@"%@", myString);
}

- (NSString *)myPrivateMethod
{
    return @"someString";
}
@end 
```

使用此代码，一切正常，并记录“someString”。

但是我的代码不应该以某种方式看起来不同吗？我实际上是偶然使用该类别的（我复制/粘贴了一些东西，但没有注意到“PrivateMethods”在那里；我的意思是使用类扩展）。

我的代码不应该看起来像以下之一：

代码设置 #2

```
@interface MyViewController ()
- (NSString *)myPrivateMethod;
@end

@implementation MyViewController
.... 
```

或者：

代码设置#3

```
@interface MyViewController (PrivateMethods)
- (NSString *)myPrivateMethod;
@end

@implementation MyViewController (PrivateMethods)
.... 
```

在这种情况下发生的事情背后的细微差别是什么？代码设置 #1 与代码设置 #2 有何不同？

编辑：关于设置 #3 的问题

像这样设置它会完成什么？这甚至会“工作”吗？

```
@interface MyViewController (PrivateMethods)
- (NSString *)myPrivateMethod;
@end

@implementation MyViewController
- (void)viewDidLoad
{
    NSString *myString = [self myPrivateMethod];
    NSLog(@"%@", myString);
}
@end

@implementation MyViewController (PrivateMethods)
- (NSString *)myPrivateMethod
{
    return @"someString";
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:42:22.193

选择器只是在运行时被推入同一个平面命名空间。编译器没有添加额外的代码来区分选择器是在类别中定义的方法（当消息传递时）——它都是平面的。

类别的符号以不同的方式导出，但这对于加载后的运行时并不重要。

您通常应该使用设置 #3：如果在类别中声明了方法，则应在类别的`@implementation`. 编译器偶尔会救你，它是一个更纯粹的结构。（当然，不是每个方法都属于一个类别）。类似地，在`@interface`对应的声明中应该定义`@implementation`，并且类延续（`@interface MONClass ()`）中声明的定义也应该出现在primary中`@implementation`：

```
@implementation MONClass
// add your @interface MONClass definitions here
// also add your @interface MONClass () definitions here
@end 
```

**更新的问题**

是的，那会很好。您需要做`#import`的就是包含`@interface MyViewController (PrivateMethods)`. 我实际上在某些课程中这样做是为了按主题分类/组织。

通常，“私有方法”在类延续中声明，但没有必要这样做（ivars/properties OTOH…）。

# java - Java String.getBytes("UTF8") JavaScript 模拟

> ID：12518830
> 
> 赞同：4
> 
> 时间：2012-09-20T18:39:05.213
> 
> 标签：java, javascript, string, utf-8, byte

[字节到字符串和向后](https://codereview.stackexchange.com/questions/3569/pack-and-unpack-bytes-to-strings)

在那里编写的函数可以正常工作，即`pack(unpack("string"))`产生`"string"`. 但我希望`"string".getBytes("UTF8")`得到与 Java 相同的结果。

问题是如何使一个函数在 JavaScript 中提供与 Java getBytes("UTF8") 相同的功能？

对于上面提到的文章中的拉丁字符串，除了为奇数位置添加之外，它`unpack(str)`提供了相同的结果。但是对于非拉丁字符串，它在我看来完全不同。有没有办法像 Java 一样在 JavaScript 中处理字符串数据？`getBytes("UTF8")``0`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-30T17:37:07.900

您无需编写完整的 UTF-8 编码器；有一个更简单的 JS 习惯用法可以将 Unicode 字符串转换为表示 UTF-8 代码单元的字节字符串：

```
unescape(encodeURIComponent(str)) 
```

（这是有效的，因为`escape`/`unescape`使用的奇数编码使用`%xx`十六进制序列来表示带有该代码的 ISO-8859-1 字符，而不是 URI 组件转义使用的 UTF-8。类似地`decodeURIComponent(escape(bytes))`朝另一个方向发展。）

因此，如果您想要一个数组，它将是：

```
function toUTF8Array(str) {
    var utf8= unescape(encodeURIComponent(str));
    var arr= new Array(utf8.length);
    for (var i= 0; i<utf8.length; i++)
        arr[i]= utf8.charCodeAt(i);
    return arr;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T10:37:24.367

您可以使用此功能（[要点](https://gist.github.com/3760795)）：

```
function toUTF8Array(str) {
    var utf8 = [];
    for (var i=0; i < str.length; i++) {
        var charcode = str.charCodeAt(i);
        if (charcode < 0x80) utf8.push(charcode);
        else if (charcode < 0x800) {
            utf8.push(0xc0 | (charcode >> 6), 
                      0x80 | (charcode & 0x3f));
        }
        else if (charcode < 0xd800 || charcode >= 0xe000) {
            utf8.push(0xe0 | (charcode >> 12), 
                      0x80 | ((charcode>>6) & 0x3f), 
                      0x80 | (charcode & 0x3f));
        }
        else {
            // let's keep things simple and only handle chars up to U+FFFF...
            utf8.push(0xef, 0xbf, 0xbd); // U+FFFE "replacement character"
        }
    }
    return utf8;
} 
```

使用示例：

```
>>> toUTF8Array("中€")
[228, 184, 173, 226, 130, 172] 
```

如果你想要超过 127 的值的负数，就像 Java 的字节到整数转换一样，你必须调整常量并使用

```
 utf8.push(0xffffffc0 | (charcode >> 6), 
                      0xffffff80 | (charcode & 0x3f)); 
```

和

```
 utf8.push(0xffffffe0 | (charcode >> 12), 
                      0xffffff80 | ((charcode>>6) & 0x3f), 
                      0xffffff80 | (charcode & 0x3f)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-01T03:55:30.103

`TextEncoder`是[Encoding Living Standard](http://encoding.spec.whatwg.org/)的一部分，根据 Chromium Dashboard 的[Encoding API](http://www.chromestatus.com/features/5714368087982080)条目，它在 Firefox 中发布，并将在 Chrome 38 中发布。还有一个[文本编码](https://github.com/inexorabletash/text-encoding)polyfill 可用于其他浏览器。

下面的 JavaScript 代码示例返回一个`Uint8Array`填充了您期望的值。

```
(new TextEncoder()).encode("string") 
// [115, 116, 114, 105, 110, 103] 
```

一个更有趣的例子表明 UTF-8 将`in`in`string`替换为`îñ`：

```
(new TextEncoder()).encode("strîñg")
[115, 116, 114, 195, 174, 195, 177, 103] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T08:35:31.910

下面的函数将处理 U+FFFF 以上的那些。

因为javascript文本是UTF-16的，所以在一个字符串中使用了两个“字符”来表示BMP之上的一个字符，charCodeAt返回对应的代理码。fixedCharCodeAt 处理这个问题。

```
function encodeTextToUtf8(text) {
    var bin = [];
    for (var i = 0; i < text.length; i++) {
        var v = fixedCharCodeAt(text, i);
        if (v === false) continue;
        encodeCharCodeToUtf8(v, bin);
    }
    return bin;
}

function encodeCharCodeToUtf8(codePt, bin) {
    if (codePt <= 0x7F) {
        bin.push(codePt);
    } else if (codePt <= 0x7FF) {
        bin.push(192 | (codePt >> 6), 128 | (codePt & 63));
    } else if (codePt <= 0xFFFF) {
        bin.push(224 | (codePt >> 12),
            128 | ((codePt >> 6) & 63),
            128 | (codePt & 63));
    } else if (codePt <= 0x1FFFFF) {
        bin.push(240 | (codePt >> 18),
            128 | ((codePt >> 12) & 63), 
            128 | ((codePt >> 6) & 63),
            128 | (codePt & 63));
    }
}

function fixedCharCodeAt (str, idx) {  
    // ex. fixedCharCodeAt ('\uD800\uDC00', 0); // 65536  
    // ex. fixedCharCodeAt ('\uD800\uDC00', 1); // 65536  
    idx = idx || 0;  
    var code = str.charCodeAt(idx);  
    var hi, low;  
    if (0xD800 <= code && code <= 0xDBFF) { // High surrogate (could change last hex to 0xDB7F to treat high private surrogates as single characters)  
        hi = code;  
        low = str.charCodeAt(idx+1);  
        if (isNaN(low)) {  
            throw(encoding_error.invalid_surrogate_pair.replace('%pos%', idx));
        }  
        return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;  
    }  
    if (0xDC00 <= code && code <= 0xDFFF) { // Low surrogate  
        // We return false to allow loops to skip this iteration since should have already handled high surrogate above in the previous iteration  
        return false;  
        /*hi = str.charCodeAt(idx-1); 
          low = code; 
          return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;*/  
    }  
    return code;  
} 
```

# php - 获取用户在类外定义的所有变量的列表

> ID：12518831
> 
> 赞同：0
> 
> 时间：2012-09-20T18:39:10.313
> 
> 标签：php

我有这样的事情：

```
class foo
{
   //code
}

$var = new foo();
$var->newVariable = 1; // create foo->newVariable
$var->otherVariable = "hello, im a variable";  //create foo->otherVariable 
```

我可以在 foo 类中获取用户在外部定义的所有变量的列表（newVariable、otherVariable 等）？像这样：

```
class foo
{
   public function getUserDefined()
   {
      // code

   }
}

$var = new foo();
$var->newVariable = 1; // create foo->newVariable
$var->otherVariable = "hello, im a variable";  //create foo->otherVariable
var_dump($var->getUserDefined()); // returns array ("newVariable","otherVariable"); 
```

谢谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:42:58.433

是的，使用[get_object_vars()](http://php.net/manual/en/function.get-object-vars.php)和[get_class_vars()](http://www.php.net/get_class_vars)：

```
class A {
var $hello = 'world';
}
$a = new A();
$a->another = 'variable';
echo var_dump(get_object_vars($a));
echo '<hr />';
// Then, you can strip off default properties using get_class_vars('A');
$b = get_object_vars($a);
$c = get_class_vars('A');
foreach ($b as $key => $value) {
    if (!array_key_exists($key,$c)) echo $key . ' => ' . $value . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:42:46.377

你的问题虽然不清楚。

```
$var->newVariable = 1; 
```

上述表达式有两种可能的上下文

**1）**您正在访问类公共变量。

像

```
class foo
{
  public $foo;
  public function method()
  {
     //code
   }
}
 $obj_foo = new foo();
 $obj_foo->foo = 'class variable'; 
```

**或者**

**2）**您正在使用[_ *get*](http://php.net/manual/en/language.oop5.overloading.php#object.get)*和定义类变量运行时*[_放](http://php.net/manual/en/language.oop5.overloading.php#object.set)

```
class foo
{
  public $foo;
  public $array = array();
  public function method()
  {
     //code
  }
  public function __get()
  {
    //some code
  }
  public function __set()
  {
    // some code
  }

}
 $obj_foo = new foo();
 $obj_foo->bar= 'define class variable outside the class'; 
```

那么您的问题是在哪种情况下讨论的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:50:17.410

你的目标是什么？海事组织这不是很好的做法（除非你真的知道你在做什么）。也许考虑创建一些像“$parameters”这样的类属性，然后为此创建setter和getter并以这种方式使用它是个好主意：

```
class foo {
    private $variables;

    public function addVariable($key, $value) {
        $this->variables[$key] = $value;
    }

    public function getVariable($key) {
        return $this->variables[$key];
    }

    public function hasVariable($key) {
        return isset($this->variables[$key]);
    }

    (...)
 }

$var = new foo();

$var->addVariable('newVariable', 1); 
$var->addVariable('otherVariable', "hello, im a variable"); 
```

然后你可以随心所欲地使用它，例如获取定义的变量：

```
$var->getVariable('otherVariable'); 
```

要检查是否已经定义了某个 var：

```
$var->hasVariable('someVariable') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:55:53.780

`get_class_vars()` [http://php.net/manual/en/function.get-class-vars.php](http://php.net/manual/en/function.get-class-vars.php)

# android - Android：对常规数字使用 DatePicker 控件

> ID：12518832
> 
> 赞同：1
> 
> 时间：2012-09-20T18:39:16.897
> 
> 标签：android, input, datepicker, picker, android-controls

我真的很喜欢 Android 提供的 DatePicker 控件的外观：http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

但是我还没有找到一种方法来对其他实体（常规数字、字符串等）使用这种控件。这可能吗？如果是这样，怎么做？

# java - 拆开一个字符串并替换它

> ID：12518835
> 
> 赞同：2
> 
> 时间：2012-09-20T18:39:23.517
> 
> 标签：java, regex

我最近一直在思考，似乎无法弄清楚如何从这个字符串中提取“文本”并用这些单词替换找到的模式。

```
Pattern searchPattern = Pattern.compile("\\[\\{(.+?)\\}\\]"); 
Matcher matcher = searchPattern.matcher(sb); 
```

`sb`是包含这些模式的几次出现的字符串，这些模式以 开头`[{`和结尾`]}`。

```
[{ md : {o : "set", et : _LU.et.v.v }, d : {t : _LU.el.searchtype, l : _LU[_LU.el.searchtype].nfts.l, v : _LU[_LU.el.searchtype].nfts.v}}, { md : {o : "set", et : _LU.et.v.v }, d : {t : _LU.el.topicgroup, l : "Books", v : "ETBO"}}] 
```

返回为

```
md : {o : "set", et : _LU.et.v.v }, d : {t : _LU.el.searchtype, l : _LU[_LU.el.searchtype].nfts.l, v : _LU[_LU.el.searchtype].nfts.v}}, { md : {o : "set", et : _LU.et.v.v }, d : {t : _LU.el.topicgroup, l : "Books", v : "ETBO"} 
```

注意缺少`[{`和`}]`。我设法找到了上述模式，但是我将如何找到这些单词`set`，`Book`然后只用这些单词替换原始找到的模式。如果字符串包含`"`通过，我可以搜索它

```
while (matcher.find()) {
        matcher.group(1).contains("\""); 
```

但我真的只需要一些关于如何去做的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:44:19.717

这是您正在寻找的（基于您的第一条评论的答案）？

> 它实际上相当大..但遵循“你好，我的名字是，等等，等等，等等，[{ md : {o : "set", et : _LU.et.vv }, d : {t : _LU .el.searchtype, l : _LU[_LU.el.searchtype].nfts.l, v : _LU[_LU.el.searchtype].nfts.v}}, { md : {o : "set", et : _LU .et.vv }, d : {t : _LU.el.topicgroup, l : "Books", v : "ETBO"}}] ，这里还有一些文字，还有一些" -> [{ }] 部分应该在这种情况下被替换为其中的文本 set, books, etbo... 导致最终字符串“你好，我的名字是，等等，等等，set set Books ETBO，这里还有一些文本，还有更多"

```
// text from your comment
String sb = "hello my name is, etc, etc, etc, [{ md : "
        + "{o : \"set\", et : _LU.et.v.v }, d : {t : "
        + "_LU.el.searchtype, l : _LU[_LU.el.searchtype].nfts.l, "
        + "v : _LU[_LU.el.searchtype].nfts.v}}, { md : {o : "
        + "\"set\", et : _LU.et.v.v }, d : {t : _LU.el.topicgroup, "
        + "l : \"Books\", v : \"ETBO\"}}] , "
        + "some more text here, and some more";

Pattern searchPattern = Pattern.compile("\\[\\{(.+?)\\}\\]");
Matcher matcher = searchPattern.matcher(sb);

// pattern that finds words between quotes
Pattern serchWordsInQuores = Pattern.compile("\"(.+?)\"");

// here I will collect words in quotes placed in [{ and }] and separate 
// them with one space
StringBuilder words = new StringBuilder();

// buffer used while replacing [{ xxx }] part with words found in xxx
StringBuffer output = new StringBuffer();

while (matcher.find()) {// looking for [{ xxx }]
    words.delete(0, words.length());

    //now I search for words in quotes from [{ xxx }]
    Matcher m = serchWordsInQuores.matcher(matcher.group());
    while (m.find())
        words.append(m.group(1)).append(" ");

    matcher.appendReplacement(output, words.toString().trim());
    //trim was used to remove last space
}
//we also need to append last part of String that wasn't used in matcher
matcher.appendTail(output);

System.out.println(output); 
```

输出：

> 你好，我的名字是，等等，等等，set set Books ETBO，这里还有一些文字，还有更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:05:06.363

**最新版本**

关于如何遍历具有多个边界的字符串并在每个级别替换的示例

```
public static String replace(CharSequence rawText, String oldWord, String newWord, String regex) {
    Pattern patt = Pattern.compile(regex);
    Matcher m = patt.matcher(rawText);
    StringBuffer sb = new StringBuffer(rawText.length());
    while (m.find()) {

        String text = m.group(1);
        if(oldWord == null || oldWord.isEmpty()) {
            m.appendReplacement(sb, Matcher.quoteReplacement(newWord));
        } else {
            if(text.matches(oldWord)) {
                m.appendReplacement(sb, Matcher.quoteReplacement(newWord));
            }
        }
    }
    m.appendTail(sb);
    return sb.toString();
}

public static void main(String[] args) throws Exception {
    String rawText = "[{MY NAME IS \"NAME\"}]";
    rawText += " bla bla bla [{I LIVE IN \"SOME RANDOM CITY\" WHERE THE PIZZA IS GREAT!}]";
    rawText += " bla bla etc etc [{I LOVE \"A HOBBY\"}]";
    System.out.println(rawText);
    Pattern searchPattern = Pattern.compile("\\[\\{(.+?)\\}\\]");
    Matcher matcherBoundary = searchPattern.matcher(rawText);

    List<String> replacement = new ArrayList<String>();
    replacement.add("BOB");
    replacement.add("LOS ANGELES");
    replacement.add("PUPPIES");
    int counter = 0;

    while (matcherBoundary.find()) {

        String result = Test.replace(matcherBoundary.group(1), null, replacement.get(counter), "\"([^\"]*)\"");
        System.out.println(result);
        counter++;
    }
} 
```

我得到的输出是：

```
**Raw Text**
[{MY NAME IS "NAME"}] bla bla bla [{I LIVE IN "SOME RANDOM CITY" WHERE THE PIZZA IS GREAT!}] bla bla etc etc [{I LOVE "A HOBBY"}]
**In Every Loop**
MY NAME IS BOB
I LIVE IN LOS ANGELES WHERE THE PIZZA IS GREAT!
I LOVE PUPPIES 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:13:42.507

好的，我认为您需要分三遍执行此操作，第一次匹配 之间的部分`[{ }]`，第二次通过匹配进行替换，第三次将匹配替换为您从第二遍获得的字符串。

您已经有了第一次匹配的模式，当您用第二次传递的结果替换它时，您只需再次将其用于第三次匹配。

对于第二次传球，您将需要`replaceAll`在第一场比赛中进行。像这样的东西：

```
Pattern searchPattern = Pattern.compile("\\[\\{(.+?)\\}\\]"); 
Matcher matcher = searchPattern.matcher(sb);
while ( matcher.find() )
{
    matcher.replaceFirst(matcher.group(1).replaceAll("[^\"]*\"([^\"]*)\"", "$1"));
} 
```

第一遍由 完成`matcher.find()`。下一个由 完成`matcher.group().replaceAll()`，然后传递到`matcher.replaceFirst()`第三遍。第三遍有点奇怪：它替换了`[{ }]`. 但是，由于我们从头开始并继续前进，那将是我们刚刚找到的那个，我们不会再次匹配它，因为它将被不匹配的字符串替换。文档建议在 之后重置匹配器`replaceFirst()`，但我*认为*它在这里是安全的，因为它会在替换之后继续，这正是我们想要的。

我要指出，这*并不是*特别有效。我认为您最好手动执行更多操作而不是使用正则表达式。

# login - 登录表单中的用户名和密码错误时如何清除

> ID：12518840
> 
> 赞同：1
> 
> 时间：2012-09-20T18:39:49.873
> 
> 标签：login, joomla, passwords

我有个问题

当用户输入错误的用户名和/或密码并且 joomla 显示有关此错误的消息并且我想清除这两个字段时，我该怎么做？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:08:43.027

从那里转到您的 Joomla 根文件夹：

*   去：`/templates/[your template]/html/mod_login`
*   备份default.php：`cp default.php default.php.org`
*   编辑 default.php：`vi default.php`
*   这是棘手的部分，您必须更改的内容对于每个模板都不同，例如，在`atomic`模板中您应该查找以下行：

所以`id`在这种情况下这个字段的 是：`"modlgn_username"`。现在您可以使用[jQuery](http://api.jquery.com/jQuery.removeData/) / [Javascript](https://stackoverflow.com/questions/2984311/delete-default-value-of-an-input-text-on-click)并“清理”该值。

# android - API 级别列表 - android 中的设备和 SDK 版本

> ID：12518843
> 
> 赞同：3
> 
> 时间：2012-09-20T18:39:55.630
> 
> 标签：android, components, versions

是否有明确的功能列表及其假定的 API 和 SDK 版本以及支持的移动设备？

基本上，当我想使用某个功能时，比如说`Tabs`or `SwipeViews`，我想看看 Gingerbread 版本等是否支持它。简单！

如果有一个页面/站点，列出或允许我搜索，那就是我正在寻找的。

即使在 Android 文档页面中，我也很难找到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T18:47:20.567

通过查看文档，您可以轻松查看添加了哪些 API。

例如，在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)文档中，您可以看到它自 API 3 以来就存在，正如它在屏幕右边缘提到的那样，与标题在同一行：

![在此处输入图像描述](../Images/0c7406d4e603fb64a37117f395d5e060.png)

对于单个方法和常量等，您可以向下滚动到它们的文档并查看它们的添加时间：

![在此处输入图像描述](../Images/ee27d7d6704ab4608380de37fc7f15f4.png)

在这里你可以看到[SERIAL_EXECUTOR](http://developer.android.com/reference/android/os/AsyncTask.html#SERIAL_EXECUTOR)和[THREAD_POOL_EXECUTOR](http://developer.android.com/reference/android/os/AsyncTask.html#THREAD_POOL_EXECUTOR)是在 API 11 中添加的，而[构造函数](http://developer.android.com/reference/android/os/AsyncTask.html#AsyncTask%28%29)和[cancel()](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)从 API 3 就已经存在

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T18:45:10.387

对于 API/SDK 版本，您可以使用[此 Wikipedia 页面](http://en.wikipedia.org/wiki/Android_%28operating_system%29)（向下滚动到第 5.1 节“使用共享”）。

然后使用[Android Device Gallery](http://www.android.com/devices/)并按版本号浏览设备以获取支持的设备。（注意：按版本号过滤设备的选项包含在看起来像 Android 设备的溢出菜单的微调器中）。

# java - SpinnerModel的实现

> ID：12518848
> 
> 赞同：1
> 
> 时间：2012-09-20T18:40:20.220
> 
> 标签：java, swing, number-formatting, jspinner

我想创建一个`JSpinner`在板球比赛中循环播放的内容。

所以价值观应该去：

```
0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 
1.1, 1.2, 1.3, 1.4, 1.5, 1.6,
2.1, 2.2, 2.3, 2.4, 2.5, 2.6 etc. 
```

`SpinnerNumberModel`只会让我有一个 0.1 的常规步长，这意味着我必须包括 0.7、0.8、0.9、1.0 等。

所以我想创建我自己的`SpinnerModel`来完成这个序列。我想我已经对上一个和下一个值进行了排序：

```
@Override
public Object getNextValue() {
    if( (Double)getValue() == ((numOvers-1) + 0.6) ){
        return null;
    }else if((Double)getValue() % 1 == 0.6){
        return (Double)getValue() + 0.5;
    }else{
        return (Double)getValue() + 0.1;
    }
}

@Override
public Object getPreviousValue() {
    if( (Double)getValue() == 0.1 ){
        return null;
    }else if((Double)getValue() % 1 == 0.1){
        return (Double)getValue() - 0.5;
    }else{
        return (Double)getValue() - 0.1;
    }
} 
```

但我无法弄清楚我实际上是如何设置值的..（我必须实施`getValue()`，`setValue()`不是吗？）

# python - pyqt QtGraphicsView 不会在循环内更新

> ID：12518855
> 
> 赞同：2
> 
> 时间：2012-09-20T18:40:55.290
> 
> 标签：python, pyqt

我有一个基于 PyQt 构建的 GUI 程序，GUI 有一个 QtGraphicsView 小部件，它有一个 GraphicsScene，它有一个要显示和更新的 Pixmap 项目，例如，我使用以下行来执行此操作

```
view.scene().items().setPixmap(QPixmap.fromImage(qimage)) 
```

每次，我都会修改 qimage 并调用此行来更新图像显示，并且效果很好。后来我想添加一个循环来不断更新图像：

```
for i in xrange(10):
    qimage = .... #make some changes to qimage
    view.scene().items().setPixmap(QPixmap.fromImage(qimage)) 
```

好吧，图像不会在循环内更新。视口只显示第一个图像（i = 0）和最后一个图像（i = 9），我认为这是因为 GraphicsView 小部件的 ViewportUpate 选项，但在我使用后它仍然不起作用：`setViewportUpdateMode(QGraphicsView.FullViewportUpdate)`......任何想法? 真的感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:55:27.660

好吧，我想我发现了我必须在循环中再添加一行的问题`QApplication.processEvents()`，否则循环将占用处理时间并使程序没有机会更新

```
for i in xrange(10):
    qimage = .... #make some changes to qimage
    view.scene().items().setPixmap(QPixmap.fromImage(qimage))  
    QApplication.processEvents() 
```

现在它可以工作了。无论如何，谢谢大家！

# java - JAVA接口中实例变量的公共静态最终声明

> ID：12518859
> 
> 赞同：10
> 
> 时间：2012-09-20T18:41:04.473
> 
> 标签：java, interface

为什么我们`public static final`在 Java 接口中使用实例变量的声明？
所有变量都隐含`public static final`在 Java 接口中。尽管在接口中声明了常量变量，但在常量变量
中使用它是一种好的编码习惯吗？`public static final`

**例如 ：**

```
public interface TestInterface{

public static final String EX_CONSTANT = "ABC";
public static final int EX_INT_CONSTANT = 5;
public static final double EX_DOUBLE = 5.0;
public static final Integer EX_INTEGER = 10;

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T18:49:43.763

在类和接口中使用统一的语法可以简化重构。

您可能希望将来将您的字段转换`interface`为`class`某个地方，或者将这些字段移动到一个类中，如果您忽略了一些未定义的字段，您将获得语义上的差异`public static final`（当然，我们有重构工具，但仍然如此）。

我认为这与 Java 6 中引入的接口中声明的方法实现的注释支持是一样的`@Overriden`——它在当前形式中是多余的，但在重构的情况下可能会变得有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T18:45:33.687

我不这么认为。所有*接口*变量都是隐式的 public static final 因此没有意义将它们标记为相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-18T10:29:13.180

来自 JOshua Bloch 的《Effective java》一书

> **第 19 条：只使用接口来定义类型**
> 
> 当一个类实现一个接口时，该接口充当一种可用于引用该类实例的类型。因此，一个类实现了一个接口应该说明客户端可以对类的实例做什么。为任何其他目的定义接口是不合适的。
> 
> 一种未通过此测试的接口是所谓的常量接口。这样的接口不包含任何方法；它仅由静态最终字段组成，每个字段都导出一个常量。使用这些常量的类实现接口以避免使用类名来限定常量名。这是一个例子：

```
// Constant interface antipattern - do not use!
public interface PhysicalConstants {
    // Avogadro's number (1/mol)
    static final double AVOGADROS_NUMBER = 6.02214199e23;
    // Boltzmann constant (J/K)
    static final double BOLTZMANN_CONSTANT = 1.3806503e-23;
    // Mass of the electron (kg)
    static final double ELECTRON_MASS = 9.10938188e-31;
} 
```

> 常量接口模式是接口使用不当。一个类在内部使用一些常量是一个实现细节。实现一个常量接口会导致这个实现细节泄漏到类的导出 API 中。类实现一个常量接口对类的用户来说无关紧要。事实上，它甚至可能使他们感到困惑。更糟糕的是，它代表了一种承诺：如果在未来的版本中修改了类以使其不再需要使用常量，它仍然必须实现接口以确保二进制兼容性。如果一个非最终类实现了一个常量接口，那么它的所有子类的命名空间都会被接口中的常量污染。
> 
> Java 平台库中有几个常量接口，例如 java.io.ObjectStreamConstants。这些接口应被视为异常，不应被模仿。
> 
> 如果要导出常量，有几种合理的选择。如果常量与现有的类或接口紧密相关，则应将它们添加到类或接口中。例如，所有装箱的数值基元类（如 Integer 和 Double）都导出 MIN_VALUE 和 MAX_VALUE 常量。如果最好将常量视为枚举类型的成员，则应该使用枚举类型导出它们（第 30 条）。否则，您应该使用不可实例化的实用程序类（第 4 项）导出常量。这是上面 PhysicalConstants 示例的实用程序类版本：

```
// Constant utility class
package com.effectivejava.science;

public class PhysicalConstants {
    private PhysicalConstants() {
    } // Prevents instantiation

    public static final double AVOGADROS_NUMBER = 6.02214199e23;
    public static final double BOLTZMANN_CONSTANT = 1.3806503e-23;
    public static final double ELECTRON_MASS = 9.10938188e-31;
} 
```

> 通常，实用程序类要求客户端使用类名来限定常量名，例如 PhysicalConstants.AVOGADROS_NUMBER。如果您大量使用实用程序类导出的常量，则可以通过使用 1.5 版中引入的静态导入工具来避免使用类名限定常量：

```
// Use of static import to avoid qualifying constants
import static com.effectivejava.science.PhysicalConstants.*;
public class Test {
    double atoms(double mols) {
        return AVOGADROS_NUMBER * mols;
    }
...
// Many more uses of PhysicalConstants justify static import
} 
```

> 总之，接口应该只用于定义类型。它们不应该用于导出常量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T18:44:28.813

IMO，接口是一份合同。一旦变量被声明或定义，它们就不会改变。这就是我们通常制作它们的原因`public static final`。

可读性是使声明变得多余的另一个因素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T18:45:52.523

诚然，这是多余的。通常人们只是不知道他们是隐含`public static final`的并且无论如何都要声明它。与声明类似：

```
public abstract interface Test { // Interfaces are always abstract
    public void testMethod(); // Interface methods are always public
    abstract void anotherTestMethod(); // Also redundant
} 
```

通常归结为人们不知道他们不必*以*一种或另一种方式声明它。我曾经和一个人（他是一位经验丰富的程序员）交谈过，他认为这个`default`案例`switch`是必需的，否则它不会编译。

话虽这么说，添加它们的唯一论据是它们阐明了它们的实际可见性和实际上是什么。这是一个可读性和澄清性的问题，是否包含它们与它的实际行为方式无关。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-20T19:07:41.087

当您在一个程序员团队中工作时，您会发现初级程序员不知道默认情况下接口中的变量是**public static final**的事实，并且看到以这种方式声明的变量将为他们提供有关接口的额外信息和使用它的变量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-20T23:31:49.230

你是对的：它是多余的。我不喜欢随时添加多余的语法。然而，这种做法确实有它的拥护者。有些人还喜欢在 return 表达式周围添加括号，理由是它就像一个“if”语句。额外的括号来“澄清”三年级学生可以理解的算术表达式；等等。这都是丰富的生活挂毯的一部分。

# ruby-on-rails-3 - rails 通过 :id 或 :name 路由可选参数类型

> ID：12518862
> 
> 赞同：1
> 
> 时间：2012-09-20T18:41:13.513
> 
> 标签：ruby-on-rails-3, url, testing, routes, custom-routes

场景：我想要一个 url 路径，您可以在其中通过`:id`or查找某人`:name:`。
For `user/5`or `/user/tom`will all 指向同一个用户

**路线.rb**

```
controller 'user' do  
    get 'user/:id'  
    get 'user/:name'  
end 
```

**测试/路由/user_routes.rb**

```
test "/user/:id" do  
  assert_routing "/user/5", :controller => "user", :action => "find_by_id", :id=>"5"  
end  

test "/user/:name" do  
  assert_routing "/user/tom", :controller => "user", :action => "find_by_name", :name=>"tom"  
end 
```

我不确定这是否是使用 URL 路径的正确设计决策。
寻求指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:19:03.887

我不认为你正在做的事情会奏效，因为你给出的路线是模棱两可的，因为 rails 路线不能说像 user/15 这样的 url 有名称或 id。

当然有一种方法可以做到这一点，通过指定正则表达式。由于 id 总是一个数字，我们可以对其进行正则表达式检查

```
controller 'user' do  
    get 'user/:id', :id => /\d+/
    get 'user/:name', :name => /[A-Za-z][\w\s]+/
end 
```

上述语句对正则表达式进行了约束。在您的控制器中，您可以检查

```
if params[:id]
# Get by id
else
# Get by name 
```

您也可以通过传递 get 参数并以相同的方式在控制器中处理它来做到这一点。

谢谢

# ruby - 正则表达式，如何在 ruby 中查找文件？

> ID：12518865
> 
> 赞同：2
> 
> 时间：2012-09-20T18:41:19.723
> 
> 标签：ruby, regex

我有两个 Ruby 文件：

```
db/migrate/20120920180336_create_admin_pages.rb
db/migrate/20120920150716_devise_create_users.rb 
```

此文件中有一个常量变量：`_create_admin_pages.rb`

如何在文件中找到它并使以下命令正常工作？

```
gsub_file "db/migrate/*_create_admin_pages.rb", "t.boolean :published", "t.boolean :published, :default => false" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:47:28.607

```
ruby -pe 'gsub("t.boolean :published", "t.boolean :published, :default => false")' < db/migrate/*_create_admin_pages.rb 
```

Ruby 可以使用多个选项运行。这里的`-pe`选项（实际上是两个选项）让 Ruby 执行这个循环：

*   直到不再输入：
*   读取一行输入，
*   `-pe`在作为代码之后运行字符串，
*   打印结果。

全部使用隐式变量`$_`，最后读取的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T05:44:15.407

你可以试试这个：

```
gsub_file Dir['db/migrate/*_create_admin_pages.rb'].first, "t.boolean :published", "t.boolean :published, :default => false" 
```

# html - 如何更改谷歌应用引擎中的快捷方式图标

> ID：12518874
> 
> 赞同：2
> 
> 时间：2012-09-20T18:41:59.923
> 
> 标签：html, google-app-engine

当前出现在我 www.bad-coder.appspot.com 页面顶部的快捷方式图标是默认的飞机引擎图标 ico。虽然我确实将 favicon ico 更改为我的自定义图标，但它没有出现在 chrome 中，而它确实出现在 Firefox 中。我已经禁用了缓存并在 chrome 中删除了以前的缓存，但选项卡上的快捷方式图标仍然没有改变。

我如何更改它？

我已经在标题中写了这个

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Facebook Connect Demo</title>
<link rel="shortcut icon" href="http://www.bad-coder.appspot.com/favicon.ico"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:50:03.053

您拥有的一种选择是使用 app.yaml 配置文件。将此添加到`app.yaml`文件中（在您的 gae 目录下）：

```
- url: /favicon.ico
static_files: static/images/favicon.ico
upload: static/images/favicon.ico 
```

并将您`favicon.ico`或其他任何东西放在指定的路径中：`static/images/favicon.ico`在这种情况下。

如果您已经这样做了，并且它仍然存在，那么我想这可能需要一个不同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:57:51.807

您还应该能够在标题中链接您的网站图标，只要它所在的目录配置为中的静态目录`app.yaml`，例如：

```
- url: /static
  static_dir: static 
```

如果将图像放在名为 的目录中`/static`，

```
<link rel="shortcut icon" href="http://www.bad-coder.appspot.com/static/favicon.ico"> 
```

应该管用。原始链接不会，因为您的根目录未配置为提供静态文件。这是[关于](https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml)`app.yaml`. 这是一个非常简单的文件，位于应用程序的根目录中并处理一些常见设置。

# file - 如何检查Go中是否存在文件？

> ID：12518876
> 
> 赞同：563
> 
> 时间：2012-09-20T18:42:02.137
> 
> 标签：file, go, standard-library

Go 的标准库没有专门用于检查文件是否存在的函数（如 Python 的[`os.path.exists`](http://docs.python.org/library/os.path.html#os.path.exists)）。**惯用**的方法是什么？

* * *

## 回答 #1

> 赞同：872
> 
> 时间：2012-09-20T18:42:02.137

检查文件是否不存在，相当于 Python 的`if not os.path.exists(filename)`：

```
if _, err := os.Stat("/path/to/whatever"); errors.Is(err, os.ErrNotExist) {
  // path/to/whatever does not exist
} 
```

检查文件是否存在，相当于 Python 的`if os.path.exists(filename)`：

编辑：根据最近的评论

```
if _, err := os.Stat("/path/to/whatever"); err == nil {
  // path/to/whatever exists

} else if errors.Is(err, os.ErrNotExist) {
  // path/to/whatever does *not* exist

} else {
  // Schrodinger: file may or may not exist. See err for details.

  // Therefore, do *NOT* use !os.IsNotExist(err) to test for file existence

} 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2014-03-18T14:54:36.450

**Caleb Spare**的回答发布在[gonuts](https://groups.google.com/forum/#!msg/golang-nuts/Ayx-BMNdMFo/4rL8FFHr8v4J)邮件列表中。

> [...] 实际上并不经常需要它，并且 [...]`os.Stat`在需要它的情况下使用起来很容易。
> 
> [...] 例如：如果您要打开文件，没有理由先检查它是否存在。该文件可能会在检查和打开之间消失，无论如何您都需要检查`os.Open`错误。因此，您只需`os.IsNotExist(err)`在尝试打开文件后调用，并在那里处理它的不存在（如果需要特殊处理）。
> 
> [...]您根本不需要检查现有的路径（而且您不应该）。
> 
> *   `os.MkdirAll`无论路径是否已经存在都有效。（您还需要检查该调用的错误。）
>     
>     
> *   而不是使用`os.Create`，你应该使用`os.OpenFile(path, os.O_RDWR|os.O_CREATE|os.O_EXCL, 0666)`。这样，如果文件已存在，您将收到错误消息。此外，这与制作文件的其他东西没有竞争条件，这与您的版本不同，它事先检查是否存在。

取自：[https ://groups.google.com/forum/#!msg/golang-nuts/Ayx-BMNdMFo/4rL8FFHr8v4J](https://groups.google.com/forum/#!msg/golang-nuts/Ayx-BMNdMFo/4rL8FFHr8v4J)

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-09-21T09:10:44.313

您应该使用`os.Stat()`和`os.IsNotExist()`函数，如下例所示：

```
func Exists(name string) (bool, error) {
    _, err := os.Stat(name)
    if err == nil {
        return true, nil
    }
    if errors.Is(err, os.ErrNotExist) {
        return false, nil
    }
    return false, err
} 
```

edit1：修复了在某些情况下返回 true 的问题。
edit2：从 os.IsNotExist() 切换到使用 errors.Is()，许多人说这是[最佳实践](https://github.com/golang/go/issues/38198)，[在这里](https://stefanxo.com/go-anti-patterns-os-isexisterr-os-isnotexisterr/)

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2021-02-28T01:41:00.220

首先要考虑的是，您很少只想检查文件是否存在。在大多数情况下，如果文件存在，您会尝试对文件执行某些操作。在 Go 中，任何时候你试图对一个不存在的文件执行一些操作，结果应该是一个特定的错误（）`os.ErrNotExist`，最好的办法是检查返回`err`值（例如，当调用像.`os.OpenFile(...)``os.ErrNotExist`

过去推荐的方法**是**：

```
file, err := os.OpenFile(...)
if os.IsNotExist(err) {
    // handle the case where the file doesn't exist
} 
```

但是，**由于`errors.Is`在 Go 1.13**（2019 年末发布）中添加[了，新的建议是使用`errors.Is`](https://github.com/golang/go/blob/5ff7ec98b7727b3641df25200345b1aa50b6ff35/src/os/error.go#L90-L91)：

```
file, err := os.OpenFile(...)
if errors.Is(err, os.ErrNotExist) {
    // handle the case where the file doesn't exist
} 
```

* * *

**通常最好避免`os.Stat`在尝试对文件进行操作之前检查文件是否存在，因为在您执行操作之前的时间窗口内，文件总是有可能被重命名、删除等它。**

但是，如果您对这个警告没有意见，并且您真的，真的只是想检查文件是否存在，而不是继续对它做一些有用的事情（作为一个人为的例子，假设您正在编写一个毫无意义的 CLI 工具告诉您文件是否存在然后退出`¯\_(ツ)_/¯`），那么推荐的方法是：

```
if _, err := os.Stat(filename); errors.Is(err, os.ErrNotExist) {
    // file does not exist
} else {
    // file exists
} 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2019-09-04T15:24:14.950

其他答案遗漏的是，给函数的路径实际上可能是一个目录。以下函数确保路径确实是一个文件。

```
func fileExists(filename string) bool {
    info, err := os.Stat(filename)
    if os.IsNotExist(err) {
        return false
    }
    return !info.IsDir()
} 
```

需要指出的另一件事：此代码仍可能导致竞争条件，其中另一个线程或进程删除或创建指定的文件，而 fileExists 函数正在运行。

如果您担心这一点，请在线程中使用锁，序列化对该函数的访问，或者如果涉及多个应用程序，请使用进程间信号量。如果涉及其他应用程序，超出您的控制范围，我猜您就不走运了。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2014-03-17T23:19:38.597

[user11617](https://stackoverflow.com/a/12527546/4907533)的例子不正确；即使文件不存在，它也会报告该文件存在，但存在其他类型的错误。

签名应该是 Exists(string) (bool, error)。然后，碰巧的是，呼叫站点也好不到哪里去。

他写的代码最好是：

```
func Exists(name string) bool {
    _, err := os.Stat(name)
    return !os.IsNotExist(err)
} 
```

但我建议这样做：

```
func Exists(name string) (bool, error) {
  _, err := os.Stat(name)
  if os.IsNotExist(err) {
    return false, nil
  }
  return err != nil, err
} 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-06-29T02:58:11.110

```
 _, err := os.Stat(file)
    if err == nil {
        log.Printf("file %s exists", file)
    } else if os.IsNotExist(err) {
        log.Printf("file %s not exists", file)
    } else {
        log.Printf("file %s stat error: %v", file, err)
    } 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2020-09-15T15:43:28.623

基本上

```
 package main

import (
    "fmt"
    "os"
)

func fileExists(path string) bool {
    _, err := os.Stat(path)
    return !os.IsNotExist(err)
}

func main() {

    var file string = "foo.txt"
    exist := fileExists(file)

    if exist {
        fmt.Println("file exist")
    } else {

        fmt.Println("file not exists")
    }

} 
```

[运行示例](https://play.golang.org/p/8vbIzc2P8Fj)

另一种方式

使用 os.Open

```
package main

import (
    "fmt"
    "os"
)

func fileExists(path string) bool {
    _, err := os.Open(path) // For read access.
    return err == nil

}

func main() {

    fmt.Println(fileExists("d4d.txt"))

} 
```

[运行](https://play.golang.org/p/_WfVKlGFcRs)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-12-11T05:51:52.893

函数示例：

```
func file_is_exists(f string) bool {
    _, err := os.Stat(f)
    if os.IsNotExist(err) {
        return false
    }
    return err == nil
} 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2018-04-18T06:47:37.977

让我们先看几个方面，`os`package of提供的功能`golang`都不是实用程序而是错误检查器，我的意思是它们只是一个处理跨平台错误的包装器。

所以基本上，`os.Stat`如果这个函数没有给出任何错误，这意味着文件存在，如果它确实需要检查它是什么类型的错误，这里就使用这两个函数`os.IsNotExist`和`os.IsExist`.

这可以理解为`Stat`文件抛出错误，因为它不存在，或者它是因为它存在并且存在一些问题而抛出错误。

这些函数采用的参数是 type `error`，尽管您可以将其传递`nil`给它，但它没有意义。

这也表明`IsExist is not same as !IsNotExist`，它们是两种不同的东西。

因此，现在如果您想知道给定文件是否存在于 go 中，我希望最好的方法是：

```
if _, err := os.Stat(path/to/file); !os.IsNotExist(err){
   //TODO
} 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2020-05-20T18:51:17.793

检查文件是否存在的最佳方法：

```
if _, err := os.Stat("/path/to/file"); err == nil || os.IsExist(err) {
    // your code here if file exists
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2020-06-03T09:48:13.793

正如其他答案中提到的，可以通过使用不同的标志来构建所需的行为/错误`os.OpenFile`。事实上，`os.Create`这只是一个明智的默认简写：

```
// Create creates or truncates the named file. If the file already exists,
// it is truncated. If the file does not exist, it is created with mode 0666
// (before umask). If successful, methods on the returned File can
// be used for I/O; the associated file descriptor has mode O_RDWR.
// If there is an error, it will be of type *PathError.
func Create(name string) (*File, error) {
    return OpenFile(name, O_RDWR|O_CREATE|O_TRUNC, 0666)
} 
```

您应该自己组合这些标志以获得您感兴趣的行为：

```
// Flags to OpenFile wrapping those of the underlying system. Not all
// flags may be implemented on a given system.
const (
    // Exactly one of O_RDONLY, O_WRONLY, or O_RDWR must be specified.
    O_RDONLY int = syscall.O_RDONLY // open the file read-only.
    O_WRONLY int = syscall.O_WRONLY // open the file write-only.
    O_RDWR   int = syscall.O_RDWR   // open the file read-write.
    // The remaining values may be or'ed in to control behavior.
    O_APPEND int = syscall.O_APPEND // append data to the file when writing.
    O_CREATE int = syscall.O_CREAT  // create a new file if none exists.
    O_EXCL   int = syscall.O_EXCL   // used with O_CREATE, file must not exist.
    O_SYNC   int = syscall.O_SYNC   // open for synchronous I/O.
    O_TRUNC  int = syscall.O_TRUNC  // truncate regular writable file when opened.
) 
```

根据您选择的内容，您会得到不同的错误。

下面是一个示例，它要么截断现有文件，要么在文件存在时失败。

```
openOpts := os.O_RDWR|os.O_CREATE
if truncateWhenExists {
    openOpts |= os.O_TRUNC // file will be truncated
} else {
    openOpts |= os.O_EXCL  // file must not exist
}
f, err := os.OpenFile(filePath, openOpts, 0644)
// ... do stuff 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-06-26T19:08:13.277

这就是我检查文件是否存在于`Go 1.16`

```
package main

import (
    "errors"
    "fmt"
    "io/fs"
    "os"
)

func main () {
    if _, err:= os.Stat("/path/to/file"); errors.Is(err, fs.ErrNotExist){
        fmt.Print(err.Error())
    } else {
        fmt.Print("file exists")
    }
} 
```

# iphone - 为 iPhone 5 扩展应用程序 - 最佳实践

> ID：12518879
> 
> 赞同：13
> 
> 时间：2012-09-20T18:42:09.873
> 
> 标签：iphone, iphone-5

现在**Apple**即将开始发布 iPhone 5，我正在考虑扩展我的应用程序，以便它们在**iPhone 5**上全屏显示。我在模拟器上运行我的应用程序，即使是那些`UITableView`延伸到屏幕底部的应用程序，黑条也会出现在屏幕的顶部和底部。

这是我的问题：为**iPhone 5**扩展应用程序的最佳做法是什么？

我现在应该为**3.5**和**4**英寸的屏幕制作一个单独的笔尖，还是在代码中扩展所有内容？

我正在尝试使过渡尽可能顺利，因此我呼吁了解 SO 来引导我了解为两个屏幕构建的最佳方法是什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T18:51:48.267

在您的应用程序中利用完整的 4" 屏幕似乎就像添加一个名为`Default-568h@2x.png`640 x 1136 的新默认图像一样简单。Xcode 4.5 实际上会通过添加适当大小的黑色图像和为您的项目命名。

对于使用标准 UI 组件（例如表格视图）的应用程序，表格会神奇地扩展以填满屏幕。我更新了一个工作应用程序，它实际上就是这么简单，只有几个与我自己的代码和 UI 设置相关的小问题。但总而言之，非常容易。

将此与我（为我自己）开发的另一个应用程序进行对比，该应用程序除了 UIViews 之外不使用任何标准 UI 组件。为了同时处理 3.5" 和 4" 屏幕，我不得不花费大量时间重构代码，这些代码需要了解应用程序的各种操作的屏幕尺寸。（在这种情况下，应用程序更像是一个游戏/模拟器，而不是生产力应用程序。）

因此，您的里程可能会因支持 4 英寸屏幕所需的工作量而异。正如*我*所发现的，这取决于您的应用程序的复杂程度和“非标准”程度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T14:03:53.970

在为大屏 iphone 5 更新现有应用程序时，您可能还会发现屏幕底部不是“可点击”的。例如，如果您在屏幕底部有一个工具栏，则该工具栏将正确显示，但按钮不会对触摸做出反应。如果是这种情况，您需要告诉应用程序该窗口正在使用全屏。

如果你有`MainWindow.xib`，打开它，`window`在属性检查器中选择并确保选中“启动时全屏”。

如果您的项目中没有（并且大多数较新的项目没有），那么您需要在应用程序委托`MainWindow.xib`中添加一行：`applicationDidFinishLaunching`

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    [window setFrame:[[UIScreen mainScreen] bounds]];
    ...
} 
```

我把它放在方法的开头。像魅力一样工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T05:34:59.213

您将在模拟器**XCode->Targets->Summary->iPhone/iPod Deployment Info( Retina 4-inch )中找到此路径**

您需要添加尺寸为 640 x 1136 的默认图像。

`AppDelegate`在您的文件中应用此代码

```
mainWindow = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];

mainWindow.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

您将获得窗口的主屏幕尺寸。每当您想签入您的类文件时，还有一件事只需添加此代码

```
if ([UIScreen mainScreen].bounds.size.height > 500.0f) 
```

对于您的视图控制器，只需添加一个属性`autoresizingMask`

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

这对我来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-24T01:34:05.040

我正在寻找同样的问题，试图让 iPhone 5 (4") 将我的 xib 文件呈现为全屏，我找到了这个答案，它说你只需要添加`Default-568h@2x.png`图像来告诉 iOS 它需要呈现你的应用程序在 4 英寸全屏。只是添加这个解决了我的问题。

[为什么 [UIScreen mainScreen].bounds] 没有返回全屏尺寸？](https://stackoverflow.com/questions/17761967/why-uiscreen-mainscreen-bounds-is-not-returning-full-screen-size/17762141#answer-17762141)

# symfony - Symfony2：为什么路由组件中没有包含查询字符串参数？

> ID：12518882
> 
> 赞同：4
> 
> 时间：2012-09-20T18:42:13.643
> 
> 标签：symfony

我正在将一个遗留应用程序移植到 Symfony2 并且我正在苦苦挣扎，因为路由不包含查询字符串参数。一些简单的示例：假设您有一个书籍搜索页面，您可以在其中根据条件过滤结果：

`http://www.bookstore.com/books?author=Stephen+King&maxPrice=20`

在这种情况下，查询字符串参数的好处是您可以拥有任意数量的过滤器，将您想要的过滤器用于任何给定的请求，并且不会用您不使用的过滤器将 URL 塞满。

假设我们使用 Symfony2 路由组件重写了上述查询的路由。它可能看起来像这样：

`http://www.mybookstore.com/book/any_title/stephen%20king/any_release_date/max_price_20/any_min_price/any_format/any_category`

即使不考虑不干净的 URL 有多长，我仍然认为它不那么直观，因为该路由的每个“段”不是键值对，而只是一个值（例如`author=Stephen+King`> `/stephen%20king/`）。

您当然可以通过将 Request 对象传递到操作方法（例如`indexAction(Request $request) {`）来访问控制器中的查询字符串参数，但随后验证它们并将它们传递到应用程序的其他部分变得很麻烦（即我现在发现自己的地方）。如果您使用 Knp Menu Bundle 构建侧边栏，并且希望`.current`根据查询字符串参数将部件标记为？没有任何功能，只有与 Symfony2 路由集成的功能。

以及如何验证您的查询字符串参数是否可以接受？我目前正在考虑像表单一样验证它们，然后将它们传递到数据库中以生成查询。也许这就是 Symfony2 团队设想的处理方式？如果是这样，我真的很想知道为什么。感觉就像我在与应用程序作斗争。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:13:33.693

我最终在 Symfony Live San Francisco 2012 上向 Fabien 提出了这个问题。在同一个会议上关于这个问题还有另一个演讲，我将在这里与你分享幻灯片：

[http://www.slideshare.net/Wombert/phpjp-urls-rest#btnNext](http://www.slideshare.net/Wombert/phpjp-urls-rest#btnNext)

基本上在幻灯片中，您可以看到作者同意我的观点，即查询字符串参数应该用于过滤。它们不应该用于确定内容源。因此，路由应指向产品（或其他），然后应在控制器中使用查询字符串参数来应用过滤该内容源所需的任何逻辑（根据 Fabien）。

我最终在我的应用程序中创建了一个实体，我将所有查询字符串参数绑定到然后进行操作，这与处理表单的方式非常相似。事实上，当你考虑它时，它基本上是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:56:13.973

就像在 Symfony1 中一样，查询字符串独立于路由参数。

如果您将路径定义为`@Route("/page/{id}", name="single_page")`，则可以在视图中创建一个路径，如下所示：

`{{ path('single_page', { id: 3, foo: "bar" }) }}`

生成的 URL 将是`/page/3?foo=bar`.

# c# - 在 PageLoad 上将 TreeViewNode 设置为选中

> ID：12518887
> 
> 赞同：0
> 
> 时间：2012-09-20T18:42:24.863
> 
> 标签：c#, asp.net

我有一个在 PageLoad 事件上动态加载的树视图。这是我的树视图和数据源：

```
<asp:TreeView ID="tv" runat="server" DataSourceID="xds"
    SelectedNodeStyle-ForeColor="Red" NodeStyle-ForeColor="Black">   
    <DataBindings>
        <asp:TreeNodeBinding DataMember="Node"
            ValueField="Id" TextField="Title"  />
    </DataBindings>
</asp:TreeView>
<asp:XmlDataSource ID="xds" runat="server" EnableCaching="false" /> 
```

这是我在 PageLoad 上运行的代码

```
StringBuilder sb = new StringBuilder();
XmlWriter xw = XmlWriter.Create(sb);

WriteTreeViewXml(xw);
xw.Flush();
xw.Close();

xds.Data = sb.ToString();
xds.DataBind();

tv.Nodes[0].Selected = true;  // error here 
```

这工作正常，树视图被正确加载。现在我正在尝试向 SelectedNode 添加样式。这在我单击特定节点时有效，但在页面加载时根节点未设置样式。所以我试图将根节点设置为在 PageLoad 上选中

当我尝试将根节点设置为选中时出现此错误：

> **指数超出范围。必须是非负数且小于集合的大小。参数名称：索引**

由于某种原因，我绑定数据源后树视图为空。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:32:38.977

在控件的事件运行之前，数据不存在`DataBinding`，这可能会或可能不会在事件期间`Load`发生。您应该将任何需要数据/节点存在的代码放入`DataBound`控件的事件中。请参阅[此文档](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx#data_binding_events_for_databound_controls)：

> 数据绑定
> 
> 在数据绑定控件中的数据绑定操作结束时引发。在 GridView 控件中，所有行和任何子控件的数据绑定都是完整的。
> 
> 使用此事件来格式化数据绑定内容或在其他控件中启动数据绑定，这些控件依赖于当前控件内容中的值。（有关详细信息，请参阅本主题前面的已添加控件的追赶事件。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:34:48.583

您需要在调用 xds.DataBind() 的行之后调用 tv.Databind(); 否则控件不会绑定到数据源。如果您以声明方式设置 XmlDataSource（例如，设置为静态文件），我相信它会为您执行此操作，但由于您手动填充它，因此您还需要手动调用控件的 DataBind 方法。

# excel - 使用 Excel 中图表的目标工作表数据将图表从一个工作表复制到另一个工作表

> ID：12518900
> 
> 赞同：9
> 
> 时间：2012-09-20T18:43:08.073
> 
> 标签：excel, vba

我有几个工作表，它们具有不同的数据，但以相同的方式组织（相同的列数和行数）。我在 sheet1 中创建了几个图表，我想将其复制到 sheet2。虽然正常复制/粘贴将图表复制到 sheet2，但图表仍然引用 sheet1 中的数据，而不是 sheet2 中的数据。如何在复制后自动让他们使用 sheet2 数据而不是 sheet？

作为一种解决方法，我尝试复制 sheet1 并将其命名为 sheet2（复制所有数据和图表），然后将真实的 sheet2 数据复制并粘贴到这个新工作表中。这可行，但我希望有一种更快的方法，也许还有一个宏可以将所有图表从 sheet1 复制到 sheet2 并自动更新参考。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-29T14:52:07.173

将图表复制到另一个工作表并让图表链接到新工作表上的数据的最简单方法不是复制图表。最简单的方法是复制包含图表的工作表，然后更改复制工作表上的数据。

第二种最简单的方法，如果图表的数据组织简单，是使用功能区或右键菜单中的选择数据，并更改对话框顶部的图表数据范围参考编辑中指示的范围。

一种繁琐的方法是更改​​所有图表系列公式中的所有工作表引用，例如，将以下公式中 Sheet1 的所有实例更改为 Sheet2： =SERIES(Sheet1!$B$1,Sheet1!$A$2:$ A$4,Sheet1!$B$2:$B$4,1)

正如@sancho.s 指出的那样，您也可以使用我的[Change Series Formula](http://peltiertech.com/change-series-formula-improved-routines/)教程中发布的代码使用 VBA 执行此操作。这些算法内置在我的商业 Excel 插件软件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-10T13:24:53.323

我经常使用 Jon Peltier 的[Change Series Formula](http://peltiertech.com/WordPress/change-series-formula-improved-routines/)（它实际上链接在 GGuess 的答案中提供的页面中间）。它是可以在[此处](http://peltiertech.com/images/Zips/PTS_ChangeSeriesFormula.zip)获得的加载项。

它非常有用，它可能涵盖了大多数此类情况的需求。它提供了一个方便的界面（用户窗体）来搜索和替换图表系列公式中的字符串。它实际上比“更改源工作表”更通用，因为可以使用搜索和替换来一次更改多个系列的系列公式的其他部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:05:32.237

所以这样的事情对我有用。CopyCharts 将所有图表从源工作表复制到目标工作表。然后 SetChartRef 将目标中图表的引用设置为我想要的。在这个例子中，我知道哪个图表编号是什么。我想它可以改进，以便它使用图表名称。

此外，由于某种原因，如果我在复制和粘贴之间没有延迟，则会出现运行时错误，因此会出现等待功能。

```
 Sub DeleteEmbeddedCharts(target As String)

    Dim wsItem As Worksheet
    Dim chtObj As ChartObject
        For Each chtObj In ThisWorkbook.Worksheets(target).ChartObjects
            chtObj.Delete
        Next
End Sub

Sub SetChartRef(target As String)

    Dim cht As ChartObject
    Dim i As Integer

    'i specifies which chart to set its data references
    i = 0
    For Each cht In ThisWorkbook.Worksheets(target).ChartObjects
        If i = 0 Then
            cht.Chart.SeriesCollection(1).Values = "=" & target & "!$I$2:$I$12"
            cht.Chart.SeriesCollection(2).Values = "=" & target & "!$J$2:$J$12"
        ElseIf i = 1 Then
             cht.Chart.SeriesCollection(1).Values = "=" & target & "!$I$14:$I$25"
             cht.Chart.SeriesCollection(2).Values = "=" & target & "!$J$14:$J$25"
        ElseIf i = 2 Then
            cht.Chart.SeriesCollection(1).Values = "=" & target & "!$I$26:$I$37"
            cht.Chart.SeriesCollection(2).Values = "=" & target & "!$J$26:$J$37"
        ElseIf i = 3 Then
            cht.Chart.SeriesCollection(1).Values = "=(" & target & "!$H$2," & target & "!$H$14," & target & "!$H$26," & target & "!$H$38)"
            cht.Chart.SeriesCollection(1).XValues = "=(" & target & "!$E$2," & target & "!$E$14," & target & "!$E$26," & target & "!$E$38)"
         ElseIf i = 4 Then
            cht.Chart.SeriesCollection(1).Values = "=(" & target & "!$H$2," & target & "!$H$14," & target & "!$H$26," & target & "!$H$38)"
            cht.Chart.SeriesCollection(1).XValues = "=(" & target & "!$E$2," & target & "!$E$14," & target & "!$E$26," & target & "!$E$38)"
        ElseIf i = 5 Then
            cht.Chart.SeriesCollection(1).Values = "=" & target & "!$I$38:$I$49"
            cht.Chart.SeriesCollection(2).Values = "=" & target & "!$J$38:$J$49"
        End If
        i = i + 1
    Next

End Sub

Sub CopyCharts(source As String, target As String)

    Dim chtObj As ChartObject
    'First delete all charts from target sheet
    DeleteEmbeddedCharts (target)

    'Some delay
    Application.Wait Now + TimeSerial(0, 0, 1)

    For Each chtObj In ThisWorkbook.Worksheets(source).ChartObjects
        With ThisWorkbook.Worksheets(target)
            .Activate
            chtObj.Copy
            'Paste in row T1+i
            Range("T1").Offset(i).Select
            .Activate
            Application.Wait Now + TimeSerial(0, 0, 1)
            .Paste
            Application.Wait Now + TimeSerial(0, 0, 1)
            i = i + 10
            .Activate
        End With
    Next chtObj

    'Set the data references to target sheet
    SetChartRef (target)

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-13T17:32:21.507

Pelter 对如何使用宏编辑绘图方程以引用当前工作表中的数据进行了很好的讨论。请参阅[http://peltiertech.com/WordPress/make-a-copied-chart-link-to-new-data/上的文章](http://peltiertech.com/WordPress/make-a-copied-chart-link-to-new-data/)

# c - 在 C 中使用宏来改变其他 C 文件中的行为

> ID：12518904
> 
> 赞同：0
> 
> 时间：2012-09-20T18:43:19.067
> 
> 标签：c, macros

是否可以在 C 文件中定义宏，然后使用此定义更改另一个 C 文件的行为？

例如，假设我们有一个名为 的文件`b.c`：

```
#include <stdio.h>
#define ABC

void function() {
    printf("b.c\n");
} 
```

另一个文件名为`a.c`：

```
#include <stdio.h>

int main() {
    #ifdef ABC
        printf("b.c defined this\n");
    #endif
    printf("a.c\n");
} 
```

这些文件一起编译。`b.c`我想影响ABC 的定义`a.c`。

我知道我应该使用头文件，但我不想这样做。还有另一种方法可以实现这一目标吗？

在我的场景中，`b.c`是一种子应用程序，它将补充 的行为`a.c`，并且它还应该能够覆盖其中的行为。

有没有替代宏可以实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:44:22.440

使用全局变量或使用回调。“最佳”解决方案取决于您需要多大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:47:31.253

正如其他人所说，你不能这样做。

您的选择：
1\. 不要使用宏。一般来说，这是一个很好的建议。有些事情没有宏就无法完成，但通常你看不到它们。没有宏你会得到更好的代码。
2\. 在两个C 文件都包含的头文件中定义宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:49:01.163

它不像你描述的那样工作。

`#define ABC`只定义文件`ABC`范围内`b.c`，不影响其他文件（除非`b.c`是`#include`d）。

在没有头文件的文件`ABC`范围内定义的唯一方法是使用编译器的命令行参数进行定义：`a.c``ABC``gcc -D ABC ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:45:18.883

不，这是不可能的。但是您可以指示编译器使用命令行选项定义符号

# signalr - 如何加密 SignalR 自托管集线器

> ID：12518906
> 
> 赞同：2
> 
> 时间：2012-09-20T18:43:25.763
> 
> 标签：signalr, signalr-hub

我正在尝试找出利用**SignalR**中的自托管集线器进行加密的最佳方法。具体来说，我不想让数据包嗅探器发生在纯文本中查看函数调用。**我知道如果通过IIS**托管，有一些方法可以利用**IIS**类型加密，但我们需要一个自托管解决方案。

 **有没有沿着这条路走下去的建议或人？

有没有办法自托管加密集线器？

否则最初的想法是加密/解密通过函数调用的**JSON对象？**但是您仍然对函数调用进行分组嗅探...

是否可以使用**SSL**自托管？

客户端如何连接？

有什么建议么？

谢谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:03:10.673

最佳做法是使用 SSL 以及组。除非它们属于该组，否则没有人能够嗅探数据包。除此之外，加密 json 必须由 SignalR 框架本身完成，据我所知，目前尚不可用。**

# javascript - 动态 Javascript 层次结构循环

> ID：12518910
> 
> 赞同：0
> 
> 时间：2012-09-20T18:43:46.240
> 
> 标签：javascript, loops, dynamic-data, javascript-objects

以下代码构建具有 3 个固定级别（3 个节点）的节点层次结构：

```
 function createNode(name) {
     return({name: name, children: []});
     }
     function addChild(node, child) {
     node.children.push(child);

      return node;
      }
      var tree = createNode("");
      var subChild = createNode("");
      addChild(subChild, createNode("A31"));

      addChild(tree, subChild); 
```

如何更改此代码，以使层次结构中创建的级别数不固定。我如何使节点的创建动态化，因为节点的数量是未知的，并且会根据传递的一些数据而变化。如何完成以便可以动态构建和定义层次结构大小。可以在上面的代码中应用循环来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:07:04.663

```
/**
 * Just parses a string in a specific format
 * @return object
 * {
 *    name, // Name of the node
 *    childens // Array of child nodes IN STRING REPRESENTATION
 * }
 */
function parseNodeStr(str) {
  // @to-do
}

function createNode(defStr) {
  var node = false;,
      nodeParsed = parseNodeStr(defStr);

  if (nodeParsed) {
    node = {};
    node.name = nodeParsed.name;
    node.childrens = [];
    for (child in nodeParsed.childs) {
       addChild(node, createNode(child);
    }
  }

  return node;
}

function addChild(node, child) {
  if (child) {
    node.childrens.push(child);
  }

  return node;
}

var node = createNode("(node1,[(node2,[(n3),(n4)])])"); 
```

我希望它对你有帮助。

# java - 带有 JSF 2 的 Spring Webflow 2.0 - 动态流可能吗？

> ID：12518913
> 
> 赞同：3
> 
> 时间：2012-09-20T18:44:02.180
> 
> 标签：java, spring, jsf, jsf-2, spring-webflow-2

我是 Spring Webflow 的新手，所以我有一个关于（或更多）流的问题。

我想在 JSF 中构建一些 facelets 和一个起始页面，它可以在 ui-include 中具有不同的 ui-params，这取决于我以后要在流程中添加的内容。

示例 application.xhtml：

```
`<ui:include src="start.xhtml">
<ui:param name="page1" value="page1.xhtml" />
<ui:param name="page2" value="page2.xhtml" />
<!-- page 3 should be ignored -->
<!-- <ui:param name="page3" value="page3.xhtml" /> -->
<ui:param name="page4" value="page4.xhtml" />
</ui:include>` 
```

现在我有我想要检查的 start-flow.xml，页面得到了哪个 ui:params。但我不知道怎么做，我在网上找不到类似的东西。所以我认为，这可能是错误的做法:-)

谁能帮我吗？

我的目标是有一个流程（独立于硬编码的 facelets，所以我可以检查一个 ui:params 列表我有什么 facelets 并使用它们，比如：

```
`<view-state id="start" view="${flowScope.allViews[0]}">
<!-- assuming every facelet has a next-action -->
<transition on="next" to="${flowScope.allViews[1]}" />
</view-state>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:58:45.613

很确定你不能只在 Spring Webflow 中获得 JSF 包含/参数的列表。

最接近它的方法是获取 FacesContext 并尝试通过它们的 id 定位已知组件：

```
 boolean haveComponent1 = (FacesContext.getCurrentInstance().getViewRoot().findComponent("component1") != null); 
```

假设您知道 webflow 中包含页面中的组件 ID，您可以执行以下操作：

```
<decision-state id="doSomSink">
    <on-entry>
        <evaluate expression='FacesContext.getCurrentInstance().getViewRoot().findComponent("component1") != null)'  result="flowScope.haveComponent1" result-type="bool"></evaluate>
    </on-entry>
    <if test="flowScope.haveComponent1" then="doIt" else="doNothing"/>
</decision-state> 
```

# c# - Google AdWords v201206 DotNet Client GetClientReport 故障

> ID：12518918
> 
> 赞同：0
> 
> 时间：2012-09-20T18:44:23.020
> 
> 标签：c#, .net, google-ads-api

这就是我正在做的事情：

```
Selector selector = new Selector();
selector.fields = new string[] {"CampaignId", "AdGroupId", "Id", "CriteriaType", "Criteria", "CriteriaDestinationUrl", "Clicks", "Impressions", "Cost"};
Predicate predicate = new Predicate();
predicate.field = "Status";
predicate.@operator = PredicateOperator.IN;
predicate.values = new string[] { "ACTIVE", "PAUSED" };
selector.predicates = new Predicate[] { predicate };

ReportDefinition definition = new ReportDefinition();
definition.reportName = "criteria report";
definition.reportType = ReportDefinitionReportType.CRITERIA_PERFORMANCE_REPORT;
definition.downloadFormat = DownloadFormat.XML;
definition.dateRangeType = ReportDefinitionDateRangeType.YESTERDAY;
definition.selector = selector;
definition.includeZeroImpressions = true;

_handler.RunReport(new AdWordsUser(), definition); 
```

这是我的处理程序方法：

```
public void RunReport(AdWordsUser user, ReportDefinition definition)
{

    if (definition != null)
    {

        string reportContents = string.Empty;

        try
        {
            ReportUtilities utilities = new ReportUtilities(user);
            utilities.ReportVersion = "v201206";
            ClientReport report = utilities.GetClientReport(definition);
            reportContents = report.Contents.ToString();
        }
        catch (Exception ex)
        {
            _errorHandler.AddError(ex);
        }
    }
} 
```

在我逐步完成的地方出现此错误：

```
Report contents are invalid. - !!!2|||-1|||[ReportDefinitionError.CUSTOMER_SERVING_TYPE_REPORT_MISMATCH @ selector]??? 
```

一直在寻找几个小时试图找到解决方案。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:01:50.087

看来问题确实需要传入customerClientID。

[这份文件](https://developers.google.com/adwords/api/docs/guides/reporting)帮助我描绘了正在发生的事情。

我最终像这样修改了我的代码：

```
var configOptions = new Dictionary<string,string>();
configOptions.Add("clientCustomerID", customerID.ToString());
_handler.RunReport(new AdWordsUser(configOptions), definition); 
```

# apache - 缺少即时证书但仍然有效

> ID：12518921
> 
> 赞同：0
> 
> 时间：2012-09-20T18:44:29.263
> 
> 标签：apache, certificate

我的服务器上有这个证书：

DigiCert -> DigiCert High Assurance EV CA-3 -> wildcard.mydomain.com

如果客户端计算机上未安装“DigiCert High Assurance EV CA-3”，我将收到来自浏览器的错误消息，即服务器证书无效。如果我手动安装它，它工作正常。

但是如果我去 ie [https://github.com](https://github.com)我可以在浏览器中看到这个证书链：

DigiCert -> DigiCert High Assurance EV CA-1 -> github.com

如果我通过 certmgr.msc 签入我的用户证书存储，我可以找到根 CA (DigiCert)，但找不到直接证书。为什么这行得通？

也许我可以设置 Apache 将即时证书发送到浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:09:40.480

您可以使用[`SSLCertificateChainFile`](http://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslcertificatechainfile)向浏览器提供中间证书。

# java - Android 应用为空

> ID：12518926
> 
> 赞同：0
> 
> 时间：2012-09-20T18:45:05.493
> 
> 标签：java, android, xml, eclipse, adt

如果你们需要查看此代码的代码，如果不是很明显，请告诉我，我显然在最后一个问题上发布了太多代码。我一直在eclipse中开发android应用程序，运行时，在标题下方，我的应用程序是空的。只有空白，我的控件/用户界面都不可见。

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
<RelativeLayout
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content"
 android:padding="5dp">
 <TextView
        android:id="@+id/textViewChan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="@string/channel"/>

 <SeekBar
        android:id="@+id/seekBarChan"
        android:layout_below="@+id/textViewChan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:max="4"
        android:paddingBottom="10dp" />
 <Button
        android:id="@+id/btnChoose"
        android:layout_below="@+id/seekBarChan"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/choose"/>
 <Button
        android:id="@+id/btnRandom"
        android:layout_below="@+id/btnChoose"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/random"/>
 <TextView
        android:id="@+id/textViewRed"
        android:layout_below="@+id/btnRandom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/Red" />
    <SeekBar
        android:id="@+id/seekBarRed"
        android:layout_below="@+id/textViewRed"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
    <TextView
        android:id="@+id/textViewGreen"
        android:layout_below="@+id/seekBarRed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/Green" />
    <SeekBar
        android:id="@+id/seekBarGreen"
        android:layout_below="@+id/textViewGreen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
    <TextView
        android:id="@+id/textViewBlue"
        android:layout_below="@+id/seekBarGreen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/Blue" />
    <SeekBar
        android:id="@+id/seekBarBlue"
        android:layout_below="@+id/textViewBlue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
    <Spinner
        android:id="@+id/spinnerMode"
        android:layout_below="@+id/seekBarBlue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/mode_array"
        android:prompt="@string/mode_prompt" />
    <TextView
        android:id="@+id/textViewSide"
        android:layout_below="@+id/spinnerMode"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="@string/side" />

      <RadioButton
          android:id="@+id/radio0"
          android:layout_below="@+id/textViewSide"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="left"
          android:layout_marginLeft="10dp"
          android:checked="true"
          android:onClick="onRadioButtonClicked"
          android:text="@string/left" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_below="@+id/textViewSide"
            android:layout_toRightOf="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:onClick="onRadioButtonClicked"
            android:text="@string/right" />
        <TextView
        android:id="@+id/textViewBand"
        android:layout_below="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/band" />
        <SeekBar
        android:id="@+id/seekBarBand"
        android:layout_below="@+id/textViewBand"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="5"
        android:paddingBottom="10dp" />
        <TextView
        android:id="@+id/textViewSens"
        android:layout_below="@+id/seekBarBand"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:paddingTop="10dp"
        android:text="@string/sens" />
        <SeekBar
        android:id="@+id/seekBarSens"
        android:layout_below="@+id/textViewSens"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="255"
        android:paddingBottom="10dp" />
        <Button
        android:id="@+id/btnApply"
        android:layout_below="@+id/seekBarSens"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/apply"/>
        <Button
        android:id="@+id/btnSave"
        android:layout_below="@+id/btnApply"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="@string/save"/>

</RelativeLayout>
</ScrollView> 
```

该应用程序不完整，但我应该能够看到我的控件。

MainActivity.java

```
package com.hyperspacemg.showstopper;

import com.hyperspacemg.showstopper.ColorPickerDialog.OnColorChangedListener;

import android.os.Bundle;
import android.app.Activity;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.RadioButton;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity implements OnColorChangedListener
    {
    public static final String PREFS_NAME = "ShowStopperPrefsFile";

    SeekBar seekbarChan, seekbarRed, seekbarGreen, seekbarBlue, seekbarBand, seekbarSens;
    TextView valueChan, valueRed, valueGreen, valueBlue, side, valueBand, valueSens, valueSave;
    private static int Chan = 0;
    private static int Rset = 0;
    private static int Gset = 0;
    private static int Bset = 0;
    private static int Side = 0;
    private static int Band = 0;
    private static int Sens = 24;
    private static int Save = 0;

    String chanFinal = null;
    String redFinal = null;
    String greenFinal = null;
    String blueFinal = null;
    String modeFinal = null;
    String sideFinal = null;
    String bandFinal = null;
    String sensFinal = null;
    String saveFinal = null;
    String message = "<HMG" + chanFinal + ":" + redFinal + ":" + greenFinal + ":" + blueFinal + ":" + modeFinal + ":" + sideFinal + ":" + bandFinal + ":" + sensFinal + ":" + saveFinal + ">"; 

    public void MainActivity(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);

        valueChan = (TextView) findViewById(R.id.textViewChan);
        seekbarChan = (SeekBar) findViewById(R.id.seekBarChan);
        valueRed = (TextView) findViewById(R.id.textViewRed);
        seekbarRed = (SeekBar) findViewById(R.id.seekBarRed);
        valueGreen = (TextView) findViewById(R.id.textViewGreen);
        seekbarGreen = (SeekBar) findViewById(R.id.seekBarGreen);
        valueBlue = (TextView) findViewById(R.id.textViewBlue);
        seekbarBlue = (SeekBar) findViewById(R.id.seekBarBlue);
        valueBand = (TextView) findViewById(R.id.textViewBand);
        seekbarBand = (SeekBar) findViewById(R.id.seekBarBand);
        valueSens = (TextView) findViewById(R.id.textViewSens);
        seekbarSens = (SeekBar) findViewById(R.id.seekBarSens);

        int sbar_chan_position = settings.getInt("seekbar_chan_pref", 0);
        seekbarChan.setProgress(sbar_chan_position);
        valueChan.setText("Channel: " + sbar_chan_position);
        Chan = sbar_chan_position;

        int sbar_red_position = settings.getInt("seekbar_red_pref", 0);
        seekbarRed.setProgress(sbar_red_position);
        valueRed.setText("Red: " + sbar_red_position);
        Rset = sbar_red_position;

        int sbar_green_position = settings.getInt("seekbar_green_pref", 0);
        seekbarGreen.setProgress(sbar_green_position);
        valueGreen.setText("Green: " + sbar_green_position);
        Gset = sbar_green_position;

        int sbar_blue_position = settings.getInt("seekbar_blue_pref", 0);
        seekbarBlue.setProgress(sbar_blue_position);
        valueBlue.setText("Blue: " + sbar_blue_position);
        Bset = sbar_blue_position;

        int sbar_band_position = settings.getInt("seekbar_band_pref", 0);
        seekbarBand.setProgress(sbar_band_position);
        valueBand.setText("Band: " + sbar_band_position);
        Band = sbar_band_position;

        int sbar_sens_position = settings.getInt("seekbar_sens_pref", 0);
        seekbarSens.setProgress(sbar_sens_position);
        valueSens.setText("Sensitivity: " + sbar_red_position);
        Sens = sbar_sens_position;

        seekbarChan.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueChan.setText("Channel: " + progress);

                Chan = progress;

                String chanFinal = "" + Chan;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarRed.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueRed.setText("Red: " + progress);

                Rset = progress;

                String redFinal = "" + Rset;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarGreen.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueGreen.setText("Green: " + progress);

                Gset = progress;

                String greenFinal = "" + Gset;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarBlue.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                valueBlue.setText("Blue: " + progress);

                Bset = progress;

                String blueFinal = "" + Bset;

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarBand.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                    String audB = null;
                    switch(progress)
                    {
                    case 0:
                    audB = "63Hz";
                    break;
                    case 1:
                    audB = "160Hz";
                    break;
                    case 2:
                    audB = "400Hz";
                    break;
                    case 3:
                    audB = "1kHz";
                    break;
                    case 4:
                    audB = "2.5kHz";
                    break;
                    case 5:
                    audB = "6.25kHz";
                    break;
                    case 6:
                    audB = "16kHz";
                    break;
                    }
                valueBand.setText("Band: " + audB);

                Band = progress;

                String bandFinal = "" + Band;

            }
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

seekbarSens.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                    int sensitivity = progress + 1;
                valueSens.setText("Sensitivity: " + sensitivity);

                Sens = progress;

                String sensFinal = "" + Sens;

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void colorChanged(int color) {

        int sbar_red_position = Color.red(color);
        int sbar_green_position = Color.green(color);
        int sbar_blue_position = Color.blue(color);

        seekbarRed.setProgress(sbar_red_position);
        valueRed.setText("Red: " + sbar_red_position);
        Rset = sbar_red_position;

        seekbarGreen.setProgress(sbar_green_position);
        valueGreen.setText("Green: " + sbar_green_position);
        Gset = sbar_green_position;

        seekbarBlue.setProgress(sbar_blue_position);
        valueBlue.setText("Blue: " + sbar_blue_position);
        Bset = sbar_blue_position;

    }

    @Override
    public void onStart() {
        super.onStart();
        }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt("seekbar_red_pref", Rset);
        editor.putInt("seekbar_green_pref", Gset);
        editor.putInt("seekbar_blue_pref", Bset);
        editor.commit();
    }

    @Override
    public void onStop() {
        super.onStop();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    public void onClickColorPicker(View v) {
        new ColorPickerDialog(this, this, Color.rgb(Rset, Gset, Bset)).show();
    }

    public void onRadioButtonClicked(View v) {
        // When radio button is clicked

        // dumb stuff to make these radio group
        RadioButton rb = (RadioButton) v;

        RadioButton rb0 = (RadioButton) findViewById(R.id.radio0);
        RadioButton rb1 = (RadioButton) findViewById(R.id.radio1);

        rb0.setChecked(false);
        rb1.setChecked(false);
        rb.setChecked(true);
        // end dumb stuff

        int checkedRadioButton = rb.getId();

        String radioButtonSelected = "";

        switch (checkedRadioButton) {
        case R.id.radio0:
            radioButtonSelected = "0";
            break;
        case R.id.radio1:
            radioButtonSelected = "1";
            break;
        }
        String audS = radioButtonSelected;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:56:38.463

```
//You need to have R.layout.yourFileName
setContentView(R.layout.main); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:02:23.400

```
public void MainActivity(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
```

本来应该：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
```

但是Eclipse“帮助了我”。一如既往，谢谢大家！

# c# - 使用 c# 修改 WFFM 信息

> ID：12518929
> 
> 赞同：1
> 
> 时间：2012-09-20T18:45:20.843
> 
> 标签：c#, sitecore, sitecore6, web-forms-for-marketers

我们在我们的 Sitecore 6.4.0 网站上使用面向营销人员的 Web 表单设置了一个简单的表单。该表单可以很好地记录信息，我们编写了一个页面以允许最终用户查看结果，使用的代码来自[http://r-coding-sitecoreblog.blogspot.com/2011/11/extracting-data-主要来自-sitecore-wffm.html](http://r-coding-sitecoreblog.blogspot.com/2011/11/extracting-data-from-sitecore-wffm.html)。

进程的下一步是允许用户批准/拒绝提交，并将该表单提交的信息传递给一个方法，或者一起删除该表单提交。

有没有办法使用 c# 从 WFFM 数据库中删除表单提交？我试过这个`Sitecore.Forms.Data.DataManager.DeleteForms()`方法没有运气，我怀疑它会删除整个表单，而不仅仅是单个表单提交。

编辑：此外，我什至可以处理在单个表单提交上设置一个标志，将其标记为已批准/拒绝，并且只处理我的代码中的显示/隐藏逻辑。因此，在特定表单提交上设置一个值也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:14:17.170

随时欢迎您在我的博客上发布与使用我的代码示例相关的问题 :-)

使用 Datamanager 类，您走在了正确的轨道上。这是一个删除表单的所有记录/提交的示例（一个一个）。

它不会删除它自己的表单。仅提交数据库条目。

```
 string formID = ConfigurationManager.AppSettings["FormDataUploadID"].ToString(); 

        List<GridFilter> args = new List<Sitecore.Web.UI.Grids.GridFilter>();
        args.Add(new GridFilter("storageName", string.Empty, GridFilter.FilterOperator.Contains));
        args.Add(new GridFilter("dataKey", formID, GridFilter.FilterOperator.Contains));

        var submits = Sitecore.Forms.Data.DataManager.GetForms().GetPage(new PageCriteria(0, 0x7ffffffe), null, args);

        /// Create a Collection to Loop
        List<IForm> formlist = submits.ToList();

        /// Loop all forms from Database and delete each entry.
        foreach (IForm frm in formlist)
        {
            Sitecore.Forms.Data.DataManager.DeleteForms(new Sitecore.Data.ID(frm.FormItemId), frm.StorageName);
        } 
```

# ios - 无法恢复存档数据

> ID：12518930
> 
> 赞同：1
> 
> 时间：2012-09-20T18:45:21.567
> 
> 标签：ios, nskeyedarchiver, nscoding

好的，上周我已经超过了一百万次，但我就是不明白。（是的，我读过 Apple 的文档。）

我正在归档我的对象，它似乎正在正确归档（我可以看到写入文件系统的文件，如果我检查它，我可以在其中看到我的数据）。但是，当我重新启动我的应用程序时，我的数据没有被恢复。我读到的每个例子都告诉我这是多么容易，但我就是不明白。一个独特的事情是我的对象是一个单例，它用于在视图控制器之间传递数据。

我真的很感激一些明智的建议。提前致谢。

这是我的标题：

```
#import <Foundation/Foundation.h>

@interface SharedAppDataObject : NSObject <NSCoding>
{
    NSMutableDictionary *apiKeyDictionary;
    NSString *skuFieldText;
    NSIndexPath *checkmarkIndex;
}

+ (SharedAppDataObject *)sharedStore;

@property (nonatomic, copy) NSString *skuFieldText;
@property (nonatomic, copy) NSIndexPath *checkmarkIndex;
@property (nonatomic, copy) NSMutableDictionary *apiKeyDictionary;

-(void)setValue:(NSString *)apiKey forKey:(NSString *)name;

-(void)setSkuField:(NSString *)s;
-(void)setCheckmarkIndex:(NSIndexPath *)p;

-(NSMutableDictionary *)apiKeyDictionary;
-(BOOL)saveChanges;

@end 
```

这是我的实现：

```
#import "SharedAppDataObject.h"

@implementation SharedAppDataObject

@synthesize skuFieldText;
@synthesize checkmarkIndex;
@synthesize apiKeyDictionary;

    //create our shared singleton store
+(SharedAppDataObject *)sharedStore {

    static SharedAppDataObject *sharedStore = nil;

    if (!sharedStore) {
        sharedStore = [NSKeyedUnarchiver unarchiveObjectWithFile:[SharedAppDataObject archivePath]];

        if(!sharedStore) 
            sharedStore = [[super allocWithZone:NULL] init];
    }
    return sharedStore;
}

-(id) init {
    self = [super init];
    if (self) {
    } 
    return self;
}

-(void)setValue:(id)apiKey forKey:(NSString *)name {
        [apiKeyDictionary setObject:apiKey forKey:name];
}

-(void)setSkuField:(NSString *)s {
    skuFieldText = s;
}

-(NSMutableDictionary *)apiKeyDictionary {  
    return apiKeyDictionary;
}

-(void)setCheckmarkIndex:(NSIndexPath *)p {
    checkmarkIndex = p;   
}

-(void)encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:skuFieldText forKey:@"skuFieldText"];
    [aCoder encodeObject:checkmarkIndex forKey:@"checkmarkIndex"];
    [aCoder encodeObject:apiKeyDictionary forKey:@"apiKeyDictionary"];
}

-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    if (self) {
        [self setSkuFieldText:[aDecoder decodeObjectForKey:@"skuFieldText"]];
        [self setCheckmarkIndex:[aDecoder decodeObjectForKey:@"checkmarkIndex"]];
        [self setApiKeyDictionary:[aDecoder decodeObjectForKey:@"apiKeyDictionary"]];
    }
    return self;
}

+(NSString *)archivePath {
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [documentDirectories objectAtIndex:0];
    return [documentDirectory stringByAppendingPathComponent:@"bbyo.archive"];
}

-(BOOL)saveChanges {      
    return [NSKeyedArchiver archiveRootObject:self toFile:[SharedAppDataObject archivePath]];  
}

@end 
```

来自 App Delegate 的保存方法：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    BOOL success = [[SharedAppDataObject sharedStore] saveChanges];

    if (success) {
        NSLog(@"Saved all the data");
    } else {
        NSLog(@"Didn't save any of the data");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:27:56.830

我不能给你答案，但有一些想法可以解决这个问题。采取这条线：

```
sharedStore = [NSKeyedUnarchiver unarchiveObjectWithFile:[SharedAppDataObject archivePath]]; 
```

因此，如果 sharedStore 为 nil，则说明有问题 - 请对其进行测试。如果什么都没有，那么记录路径，并使用 NSFileManager 方法查看文件是否存在，它的大小等。如果你发现文件在那里并且有大小，但你不能取消归档它，那当然是一个问题。在这种情况下，请在创建文件后添加特殊调试代码：

```
-(BOOL)saveChanges {      
    BOO ret =  [NSKeyedArchiver archiveRootObject:self toFile:[SharedAppDataObject archivePath]];
    id foo = [NSKeyedUnarchiver unarchiveObjectWithFile:[SharedAppDataObject archivePath]];
    // check if foo is not nil, if its the proper class, etc.
} 
```

如果您在保存文件时可以很好地取消存档，但在重新启动应用程序时无法解压，则说明文件有问题。所有这些信息都应该指向解决方案。

另一个想法——当你对数据进行编码时，记录它，以确保它不是零——但即使是这样，解档也应该起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:49:41.060

`sharedStore = [NSKeyedUnarchiver unarchiveObjectWithFile:[SharedAppDataObject archivePath]];`中初始化`application:didFinishLaunchingWithOptions:`。此方法用于初始化数据结构并恢复以前的应用程序状态。

另外，`static SharedAppDataObject *sharedStore = nil;`从`sharedStore`. 如果保存文件存在，`[ShareAppDataObject sharedStore]`将始终取消归档不必要的文件。它可以在初始化期间取消归档一次。

这是一个可以回答您问题的帖子：http: [//bit.ly/PJO8fM](http://bit.ly/PJO8fM)

# cakephp - 带有 GET 参数的 CakePHP 路由

> ID：12518932
> 
> 赞同：1
> 
> 时间：2012-09-20T18:45:39.050
> 
> 标签：cakephp, get, routes

我目前正在将一个网站从 WordPress 移植到 CakePHP，并且我在 WP 版本中使用的其中一个路由存在问题。

我必须路由`http://example.com/?specific_key=value`到，`http://example.com/controller/action`但在默认主页路由捕获它之前，我找不到使用参数捕获 url 的方法。

非常感谢任何建议或指示。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T01:15:37.753

尝试将以下内容添加到您的路线文件的顶部。检查参数是否设置了该值并将“/”连接到您需要路由到的位置。这样，它将在页面控制器路由之前匹配您的路由。

```
if (isset($_GET['specific_key']) && $_GET['specific_key'] === 'value') {
    Router::connect('/', array(whatever controller/action you need));
}

// the rest of your routes 
```

您还可以在 htaccess 文件中为其创建重写规则：

```
RewriteCond %{QUERY_STRING} ^specific_key=value$ [NC]
RewriteRule / /controller/action? [R=301,L] 
```

第三个选项：使用自定义路由类：[https ://gist.github.com/3763800](https://gist.github.com/3763800)

创建文件`APP/Lib/Route/QueryStringRoute.php`并将上述链接的内容放入其中。

然后在您的路线中执行以下操作：

```
App::uses('QueryStringRoute', 'Route');
Router::connect('/', array('controller' => 'your_controller'), array(
    'routeClass' => 'QueryStringRoute', 
    'query' => array('specific_key' => 'value')
)); 
```

同样，它需要在您的家乡路线之前。

编辑：添加了第三个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:52:12.347

无法基于 GET 参数设置路由。

编辑：至少使用内置的 CakeRoute 类。

# flash - 在 OpenLaszlo 应用程序中禁用 Flash Player 默认上下文菜单

> ID：12518938
> 
> 赞同：1
> 
> 时间：2012-09-20T18:45:56.693
> 
> 标签：flash, contextmenu, openlaszlo, lzx

当使用 SWF10/11 运行时部署 OpenLaszlo 应用程序时，是否可以完全禁用台式计算机上的 Flash Player 上下文菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:27:13.227

这只能从 Flash Player 11.2 开始。我已经使用基于 flex4.6 分支的 OpenLaszlo 修改版本进行了测试运行，为 OpenLaszlo 编译器添加了 Flash 11.2+ 支持。使用以下 LZX 代码，我设法完全删除了默认的 Flash Player 上下文菜单：

```
<canvas width="100%" height="800" proxied="false">

    <passthrough when="$as3">
        import flash.events.MouseEvent;
    </passthrough>

    <handler name="oninit">
        if ($as3) {
            Debug.info(MouseEvent.RIGHT_CLICK);
            var sprite = this.getDisplayObject();
            sprite.addEventListener(MouseEvent.RIGHT_CLICK, doSomething);
        }
    </handler>

    <method name="doSomething" args="p">
        Debug.inspect(p);
    </method>

</canvas> 
```

目前，我不愿意为 OpenLaszlo 贡献更多代码，因为过去 2 年中 Laszlo 和 Critical Path 一直不尊重社区。我可能会创建一个 OpenLaszlo 的私有分支，在其中添加新功能和错误修复，也许这可以变成由社区维护的版本。

因此，无法将此示例代码与 OpenLaszlo 的已发布版本或几乎构建的版本一起使用。

# three20 - armv7s three20 xcode 4.5

> ID：12518940
> 
> 赞同：3
> 
> 时间：2012-09-20T18:46:02.113
> 
> 标签：three20, ios6, xcode4.5

我如何`three20`与新的一起使用`xcode 4.5`？

我收到了这条消息：

```
(null): Symbol(s) not found for architecture armv7s 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:28:14.010

进入框架设置，将目标从 armv6/armv7 更改为“armv7 armv7s”并再次编译。

# xml - XSLT、CDATA、javascript

> ID：12518947
> 
> 赞同：0
> 
> 时间：2012-09-20T18:46:34.057
> 
> 标签：xml, xslt, cdata

我正在使用 Visual Studio 2008。我有一个 xsl 文档，其中包含我希望在 xslt 转换期间不处理的文本。为此，我使用 CDATA 标记。但是文本在 CDATA 中以某种方式处理。所有`<`和`>`都转换为`&lt;`和`&gt;`这是我的意思的一个例子：

```
<![CDATA[
<p>What is going on?</p>
]]> 
```

去

```
&lt;p&gt;What is going on?&lt;/p&gt; 
```

其实我的目标是让javascript像这样：

```
<script type="text/javascript">
//<![CDATA[
    for(i = 0; i < 3; i++)
    document.write("XSLT will you marry me?");
//]]>
</script> 
```

在 XSL 转换中未经处理。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:07:56.627

```
&lt;p&gt;What is going on?&lt;/p&gt; 
```

相当于

```
<![CDATA[
<p>What is going on?</p>
]]> 
```

[CDATA 部分](http://en.wikipedia.org/wiki/CDATA#CDATA_sections_in_XML)不是一种使部分 XML 保持“未处理”的方法。它只是一种对 XML 文档的编辑器有用的便利（替代语法）。

* * *

要将 JavaScript 代码单独包装在 CDATA 中，您必须添加此行

```
<xsl:output method="html"/> 
```

在您的样式表中。[HTML 输出方法不应该对http://w3.org/TR/xslt#section-HTML-Output-Method](http://w3.org/TR/xslt#section-HTML-Output-Method)中指定的`script`and元素的内容执行转义。`style`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-14T21:06:37.057

输出方法对我不起作用（IE 打开 XML，它引用 XSLT），但在我的 xslt 文件中，在 <head> 中，这确实有效，例如：

```
<script type="text/javascript">
      <xsl:text disable-output-escaping ="yes">
        <![CDATA[
        var showLogs = function() {
          var logs = document.getElementsByClassName('log');
          for (var i=0; i < logs.length; i++) {
            logs[i].style.display='block' ;      
          }
        };
        ]]>
      </xsl:text>
</script> 
```

现在，例如，< 出现在 xslt 中，最终的 html 和 showLogs() 可以被调用。

# python - 地理编码时 Geopy ValueError“找不到完全匹配”

> ID：12518950
> 
> 赞同：5
> 
> 时间：2012-09-20T18:46:50.510
> 
> 标签：python, django, google-maps-api-3, geocode, geopy

在 Django 中，我一直在尝试获取一个搜索字段来对位置进行地理编码，并从我的数据库中吐出一个按距离排序的列表。到目前为止，一切正常，除了当我搜索谷歌返回多个结果表单的位置时，例如“安阿伯，MI”。我收到 ValueError “没有找到确切的地标！（找到 2。）”这是我的 views.py

```
from django.shortcuts import render_to_response
from models import CampSite
from geopy import geocoders
from django.contrib.gis.geos import *
from django.contrib.gis.measure import D
from campsites.forms import SearchForm
from django.http import HttpResponseRedirect

def results(request):
    query = request.GET['q']
    g = geocoders.Google(resource='maps')
    location, (lat, lon) = g.geocode(query) 
    pnt = fromstr("POINT(%s %s)" % (lon, lat))
    distance_from_point = {'mi':'2000'}
    results = CampSite.objects.filter(lonlat__distance_lte=(pnt,D(**distance_from_point))).distance(pnt).order_by('distance')
    return render_to_response('results.html',{'location': location, 'lat': lat, 'lon': lon, 'results':results}) 
```

* * *

我在网上找到的常见解决方案是更改

`location, (lat, lon) = g.geocode(query)`

* * *

到

* * *

`location, (lat, lon) = g.geocode(query, exactly_one=False)`

但是，这会产生新的 ValueError“字符串或 unicode 输入无法识别为 WKT EWKT 和 HEXEWKB”。

这是我在教程之外做的第一个 django 项目，所以谢谢你是外邦人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T00:46:15.333

在 Python 中，解释器是你最好的朋友。

```
>>> g.geocode('ann arbor, MI', exactly_one=False)
[(u'Ann Arbor, MI, USA', (42.2808256, -83.743037799999996)),
 (u'Ann Arbor, MI, USA', (42.307649300000001, -83.8473015))] 
```

如果您尝试使用您的代码片段，您会意识到当与 exact_one=False 一起使用时，该方法返回一个元组列表，而不是单个元组 - 因此您的代码需要相应地重构。

```
results = []
geocodes = g.geocode(query, exactly_one=False)
for geocode in geocodes:
    location, (lat, lon) = geocode
    pnt = fromstr("POINT(%s %s)" % (lon, lat))
    distance_from_point = {'mi':'2000'}
    results.append(
        CampSite.objects.filter(
             lonlat__distance_lte=(
                  pnt,
                  D(**distance_from_point)
             )
        ).distance(pnt).order_by('distance')
    ) 
```

以上内容未经测试，但在循环之后，您应该得到一个结果列表。然后你应该决定做什么：

*   只显示第一个 ( `geocodes[0]`, `results[0]`)
*   要求用户从列表中选择
*   `zip(geocodes, results)`显示所有结果（在模板中迭代）

# jquery - 动态设置的 iframe 源适用于某些 url，不适用于其他

> ID：12518952
> 
> 赞同：1
> 
> 时间：2012-09-20T18:46:58.617
> 
> 标签：jquery, iframe, dynamic

我正在尝试使用 jquery 设置动态插入的 iframe 的源，它适用于一个源，但不适用于谷歌地图。

谷歌地图 url 与页面中已经存在的 iframe 一起使用。

我在 jsfiddle 上设置了我的案例，我使用三个变量进行测试，'src1' 有效，但 'src2' 和 'src3' 无效。

[http://jsfiddle.net/RG8YK/1/](http://jsfiddle.net/RG8YK/1/)

请有人帮帮我，我一直在拉扯我的头发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:52:44.883

显然这是谷歌地图的问题。将参数 output=embed 添加到 src 并且它可以工作：http: [//jsfiddle.net/RG8YK/2/](http://jsfiddle.net/RG8YK/2/)

更多信息：[克服“X-Frame-Options 禁止显示”](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)

# javascript - 无键数组输入上的 serializeArray

> ID：12518954
> 
> 赞同：0
> 
> 时间：2012-09-20T18:47:11.960
> 
> 标签：javascript, jquery, forms, serialization, multidimensional-array

如果我有一个无键数组作为名称之一的表单，如下所示：

```
<form id="form">
    <input name="array[]" type="text" value="zero" />
    <input name="array[]" type="text" value="one" />
    <input name="array[]" type="text" value="two" />
    <input name="array[]" type="text" value="three" />
    <input name="single" type="text" value="something" />
</form> 
```

我最终想在 PHP 中变成一个多维数组，如下所示：

```
Array ( [array] => Array ( [0] => zero [1] => one [2] => two [3] => three ) [single] => something ) 
```

如何在不发布表单数据的情况下在 Javascript/jQuery 中做到这一点？

注意：我将通过 Ajax 将我通过 jQuery 获得的任何数据发送到 PHP，并且不需要这部分的帮助。实际上，我所需要的只是一种以最终可以使用 PHP 读取的方式打包表单数据的方法。似乎 serializeArray() 或 serialize() 不能解决问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:49:37.517

使用`$('#form').serialize()`with`$.post`来完成您需要做的事情。

例如：

```
$.post(url, $("#form").serialize()); 
```

我不确定在**不**发布表单数据的情况下如何**发布**表单数据！

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:52:20.633

像这样的东西会起作用：

```
$.ajax({
    url: 'submit.php',
    data: $('#form').serialize()
}); 
```

或者

```
$.post('submit.php',
    $('#form').serialize()
); 
```**

# java - 如何建立一个矩阵来评估网格上的两个数字（基本打击区）？

> ID：12518958
> 
> 赞同：0
> 
> 时间：2012-09-20T18:47:25.863
> 
> 标签：java

我需要有人帮助我度过这个难关。

我正在做一个评估棒球场的项目。在程序中，有一个由数字 1 - 25 表示的网格，表示打击区的区域。如下：

```
/*------------------------*
 |  1 |  2 |  3 |  4 |  5 |
 |  6 | *7 | *8 | *9 | 10 |
 | 11 |*12 |*13 |*14 | 15 |
 | 16 |*17 |*18 |*19 | 20 |
 | 21 | 22 | 23 | 24 | 25 |
 *------------------------*/ 
```

据我所知，7,8,9,12,13,14,17,18,18 是罢工，1,2,3,4,5,6,10,11,15,16,20,21,22, 23,24,25 是球。等等

我需要评估两个数字，即预期的单元格和实际的单元格，并返回意图来自执行的单元格的数量。

IE：用于单元格 12 的间距实际上浮动到单元格 15 将返回 3，因为在网格上 15 距离 12 3 个单元格。进一步的示例，7 个预期和 6 个实际将返回 1，因为 6 仅是 7 个单元格。1 个预期并且 25 实际将返回 4，因为它距离 4 个单元格等。

我这样做是为了扩展我的 Java 知识的自我练习，但我无法自己管理它。我需要一个方法来评估两个参数 cellIntended 和 cellActual，查阅这个矩阵并返回相隔的单元格数。

如果这是错误的位置，我很抱歉，但我想我会把它扔在那里。非常感谢任何尝试或咨询解决方案的人。你们读到这里都很棒。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:56:25.813

我建议解构地考虑它：

1）在上面的网格上找到可以用来确定距离的点的表示。（例如，通常如何计算距离？想想几何）

2) 将您的数字参考 (1-25) 转换为您在 1) 中使用的表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:58:23.663

尝试这样的事情：

```
int rowAim = (cellAim-1) / 5;
int colAim = (cellAim-1) % 5;
int rowHit = (cellHit-1) / 5;
int colHit = (cellHit-1) % 5;
float distance = Math.sqrt((rowAim - rowHit) * (rowAim - rowHit) + (colAim - colHit) * (colAim - colHit)); 
```

那是那里的欧几里得距离，您可以使用其他东西（例如曼哈顿距离）。

# c# - Response.End() 错误

> ID：12518967
> 
> 赞同：2
> 
> 时间：2012-09-20T18:48:02.623
> 
> 标签：c#, asp.net, html, thread-safety

我一直在尝试使用 Response.End() 方法，但我不断收到此错误；

```
[System.Threading.ThreadAbortException] = {Unable to evaluate expression because the code is optimized or a native frame is on top of the call stack.} 
```

我用谷歌搜索了这个，从我看到的有两种解决方案，一种是使用`HttpContext.Current.ApplicationInstance.CompleteRequest();`，另一种是捕获异常并且什么都不做。

首先，“捕获并且什么都不做”似乎是一种非常“糟糕”的方式，我们当然应该实际处理异常或做一些事情以使异常不会发生？这肯定是好习惯吗？我不希望我的代码充满大量的尝试捕获。

另一种方法`HttpContext.Current.ApplicationInstance.CompleteRequest();`似乎不起作用。

这是我的代码片段：

```
Response.Clear();
Response.ClearHeaders();
Response.AddHeader("Content-Type", "text/html");
Response.Write("Blocked IP");
Response.Flush();
HttpContext.Current.ApplicationInstance.CompleteRequest();
return; 
```

我要做的就是输出文本'Blocked IP'，但使用该`HttpContext.Current.ApplicationInstance.CompleteRequest();`方法，aspx页面的其余部分会打印在它下面，如下所示：

```
Blocked IP

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head><title>

    </title></head>
    <body>
        <form method="post" action="Email.aspx" id="form1">
    <div class="aspNetHidden">
    <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZIELtfylTwZMU8vGWe9UrhWClqN3i4rMTvAp8otze+6G" />
    </div>

        <div>

        </div>
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:49:50.030

这是有意的。它旨在引发此异常，以便 asp.net 知道停止当前执行。

来自[HttpResponse.End](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end%28v=vs.90%29.aspx)。

```
Calls to the End, Redirect, and Transfer methods throw a ThreadAbortException exception when the current response ends prematurely. 
```

它旨在用于让我们说`Reponse.End()`在内部调用的地方`Page_Init`，它不会让 ASP.NET 调用`Page_Load`以及页面生命周期中的其余事件。

# java - 由于Java中的一个类不能扩展多个类。我怎么能得到这个？

> ID：12518972
> 
> 赞同：4
> 
> 时间：2012-09-20T18:48:20.747
> 
> 标签：java, class, interface, extends, implements

我有两个类需要扩展一个类。我收到编译器错误，因为这在 Java 中不会发生。我知道您可以在 Java 中实现任意数量的接口，但只能扩展一个其他类。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T18:51:04.677

使用“has A”关系而不是“is An”。

```
class A
class B 
```

你（认为）你想要：

```
class C extends A, B 
```

相反，请执行以下操作：

```
class C {
  A theA;
  B theB;
} 
```

多重继承几乎总是被滥用。将类扩展为导入其数据和方法的简单方法是不合适的。如果你扩展一个类，它应该是真正的“is An”关系。

例如，假设你有课，

```
class Bank extends Financial
class Calculator 
```

如果您想使用`Calculator`in的功能，您可以这样做`Bank`，

```
class Bank extends Calculator, Financial 
```

但是， a`Bank`绝对不是 a `Calculator`。A Bank*使用*a `Calculator`，但它本身不是一个。当然，在 java 中，无论如何您都不能这样做，但是您可以使用其他语言。

如果您不购买其中的任何一个，并且您真的希望 的功能`Calculator`成为`Bank`'s 接口的一部分，则可以通过 Java 接口来实现。

```
interface CalculatorIntf {
  int add(int a, int b);
}

class Calculator implements CalculatorInf {
  int add(int a, int b) { return a + b };
}

class Bank extends Financial implements CalculatorIntf
  Calculator c = new Calculator();

  @Override // Method from Calculator interface
  int add(int a, int b) { c.add(a, b); }
} 
```

一个类可以实现任意数量的接口。请注意，这在技术上仍然是“具有 A”关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:50:31.857

“两个类扩展一个类”是合法的。

“一个类扩展两个类”是违反语言规范的。如果不想考虑接口，那是做不到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:50:56.443

为了避免[菱形问题](http://www.programmerinterview.com/index.php/c-cplusplus/diamond-problem)，Java 不支持通过类进行多重继承，但它支持使用接口。

所以你可以使用`Association`关系。例如

```
Class A {}
Class B {}
Class C implements SomeInterface {
  A a;
  B b;
  // setter getter for a and b and other methods
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:53:08.907

两个类扩展一个类？像这样：

```
class A{ }
class B extends A{ }
class C extends A{ } 
```

在这里，B 和 C（两个类）扩展 A（一个类）。但我相信你的意思是一个类扩展两个独立的类（多重继承）。解决方法：您可以制作一个具有两个单独对象（Has-A 关系）的复合对象，如下所示：

```
class A { }
class B { }
class C extends A { /*define new functionality here */ }
class D extends B { /*define new functionality here */ }
class E { private C cObj; private D dObj; } 
```

# c++ - 与 Boost (Homebrew) Mac c++ 链接

> ID：12518973
> 
> 赞同：21
> 
> 时间：2012-09-20T18:48:22.453
> 
> 标签：c++, boost, g++, makefile

您好我正在尝试与 boost 链接以使用线程库，但似乎无法构建它。

我用 HomeBrew（mac 包安装程序）安装了 boost，它在`/usr/local/Cellar/boost/1.50.0`目录中。

我的主文件现在很简单......

```
#include <iostream>
#include <boost/thread.hpp> 
```

我的make文件是这样的：

```
CC = g++

BASE_FLAGS = -m32 -wAll

# INCLUDE BASE DIRECTORY AND BOOST DIRECTORY FOR HEADERS
LDFLAGS = -I/usr/local/Cellar/boost/1.50.0/include -I/opt/local/include

# INCLUDE BASE DIRECTORY AND BOOST DIRECTORY FOR LIB FILES
LLIBFLAGS = -L/usr/local/Cellar/boost/1.50.0/

# SPECIFIY LINK OPTIONS
LINKFLAGS = -l boost_thread-mt -lboost_system

# FINAL FLAGS -- TO BE USED THROUGHOUT
FLAGS = $(BASE_FLAGS) $(LLIBFLAGS) $(LDFLAGS) $(LINKFLAGS)

# NOTE FOR BOOST -- YOU ONLY NEED TO INCLUDE THE PATH BECAUSE IT ONLY INSTALLS HEADER FILES
main: main.cpp
    $(CC) $(FLAGS) -o main.out main.cpp 
```

当我运行它时，我得到了一个找不到 boost_system 的库。如果我取出 boost_system，则会收到如下所示的错误：

```
ld: warning: ignoring file /usr/local/lib/libboost_thread-mt.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /usr/local/lib/libboost_thread-mt.dylib
Undefined symbols for architecture i386:
  "boost::system::system_category()", referenced from:
      __static_initialization_and_destruction_0(int, int)in ccKwJWzr.o
  "boost::system::generic_category()", referenced from:
      __static_initialization_and_destruction_0(int, int)in ccKwJWzr.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T17:39:55.340

如果您刚刚使用`brew install boost`没有选项，这将构建一个 64 位二进制文​​件 - 静态和动态。

上面代码的罪魁祸首是使用了`-m32`选项，删除它，你应该没问题。这意味着您正在尝试将 32 位构建链接到 64 位库。

Boost 库符号链接到`/usr/local/Cellar/`- (`/usr/local/lib`和`/usr/local/include`) 中的实际二进制文件和头文件。你的 PATH 应该包括这些，所以不需要在你的 makefile 中指定这些。

请注意，brew（通过扩展 gcc）通常默认构建 64 位二进制文​​件，从您的错误输出中构建了 Boost 库。（您可以使用这些工具检查库的架构`otool`，`file`或者`lipo`）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-23T12:10:44.643

正如 Jesse Good 所指出的，您的 -mt 后缀有问题。对于所有再次运行的人（即使在 Windows 上）：

事实证明，-mt 后缀（代表多线程支持）不用于 Linux boost 安装，而是用于 Mac 和其他系统。Linux 上的 Boost 仍然支持多线程，这只是一个命名约定。另请参阅[https://stackoverflow.com/a/2310892](https://stackoverflow.com/a/2310892)。

这就是为什么您必须在 Mac 和 Windows 上的链接选项中的所有 boost 库中添加 -mt 后缀，而不是在 Linux 上。如果您正在与 Linux 合作开发者一起使用 CMake（就像我一样），您可以像这样修改 CMakeLists.txt：

```
if(APPLE OR WIN32)
    target_link_libraries([other libs..] boost_thread-mt boost_system-mt)
else()
    target_link_libraries([other libs..] boost_thread boost_system)
endif() 
```

# hibernate - 从两个表中选择数据

> ID：12518974
> 
> 赞同：-5
> 
> 时间：2012-09-20T18:48:41.207
> 
> 标签：hibernate, postgresql

我正在使用休眠来创建这两个表。我有桌子`student(id, username, loginame)`和另一张桌子`class(id, classname, studentname)`

在这里，我的常见列是学生表*username*和班级表*studentname*。

现在我的问题是我该如何选择

`id, username and classname`

从这两个表。

**笔记：**

1.  我的列名需要相同，请不要给出更改列名之类的建议。
2.  我在这两个表之间没有任何关系。如果我有我可以使用连接。我唯一的关系是我将姓名存储在 student.username 和 class.studentname 中。
3.  我正在使用 postgresql 8.4。

有关更多详细信息，您可以查看此链接

> [https://dba.stackexchange.com/questions/22703/how-can-i-get-data-from-two-tables/22719#22719](https://dba.stackexchange.com/questions/22703/how-can-i-get-data-from-two-tables/22719#22719)。

这是我的基本问题。如果我使用两个表而不相互连接来实现这一点（发布问题），那么我可以轻松获得预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:55:54.347

您可以在学生和班级之间使用普通连接。

就像是

```
SELECT  s.id, 
        c.id, 
        s.username, 
        c.classname          
FROM    student s INNER JOIN              
        class c ON s.username = c.studentname 
```

看一下

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!11/bff7e/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:54:48.587

```
SELECT student.id, student.username, class.classname 
    FROM student LEFT JOIN class ON username = studentname; 
```

# javascript - MediaWiki API：编辑部分而不破坏标题

> ID：12518980
> 
> 赞同：1
> 
> 时间：2012-09-20T18:49:28.020
> 
> 标签：javascript, mediawiki-api

我正在尝试编辑维基百科页面上的一个部分，但是当我这样做时，整个部分都会被我通过 URL 发送的任何文本甚至标题所取代，因此它不再是一个部分。有没有办法在不删除标题的情况下编辑部分？

到目前为止，我正在使用的功能（承认是从文档页面中窃取的）如下：

```
function editSection(section, summary, content, editToken) {
    $.ajax({
        url: mw.util.wikiScript('api'),
        data: {
            format: 'json',
            action: 'edit',
            title: mw.config.get('wgPageName'),
            section: section,
            summary: summary,
            text: content,
            token: editToken
        },
        dataType: 'json',
        type: 'POST',
        success: function(data) {
            if (data && data.edit && data.edit.result == 'Success') {
        window.location.reload();
            } else if (data && data.error) {
                alert('Error: API returned error code "' + data.error.code + '": ' + data.error.info);
            } else {
                alert('Error: Unknown result from API.');
            }
        },
        error: function(xhr) {
            alert('Error: Request failed.');
        }
    });
} 
```

要获得我的编辑令牌，我使用

```
function getEditToken() {
    $.getJSON(
        'http://en.wikipedia.org/w/api.php?', {
            action: 'tokens',
            type: 'edit',
            format: 'json'
        },
        function(data) {
            if (data.tokens) {
                wgEditToken = data.tokens.edittoken;
            }
        }
    )
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:35:11.427

是的，标题是该部分的一部分。因此，如果您不想替换（甚至删除）它，则需要将其作为文本的一部分发送。但是，如果您不想完全覆盖某个部分，那么您已经查询了该部分的文本[内容]，不是吗？

顺便说一句：您可以使用`mw.user.tokens`地图来获取令牌，而不是手动检索它。

# intellij-idea - 如何从 IntelliJ 中的项目根目录中排除子目录？

> ID：12518986
> 
> 赞同：1
> 
> 时间：2012-09-20T18:49:40.603
> 
> 标签：intellij-idea

我正在探索一个模型，我`.iml`在 IntelliJ 中为每个包生成一个文件。例如，假设我有包`com.example.foo`、`com.example.foo.bar`和`com.example.foo.baz`。这意味着在`.iml`文件中`com.example.foo`，我需要：

```
<content url="file://$MODULE_DIR$">
  <sourceFolder url="file://$MODULE_DIR$"
                isTestSource="false"
                packagePrefix="com.example.foo" />
  <excludeFolder url="file://$MODULE_DIR$/bar" />
  <excludeFolder url="file://$MODULE_DIR$/baz" />
</content> 
```

每次我添加一个新的“子包” `com.example.foo`，我都必须添加一个新`<excludeFolder>`元素到`<content>`. 有什么办法可以避免这种情况，只说“我的源目录是直接目录而不是子目录？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:49:30.330

源根配置是递归的，不可能只将一个目录配置为源，而排除其所有子目录。

# nonetype - Python：TypeError：“NoneType”对象不可迭代

> ID：12518989
> 
> 赞同：0
> 
> 时间：2012-09-20T18:49:48.750
> 
> 标签：nonetype

我是 python 新手，我正在尝试编写一个代码来处理扑克牌并检查拍拍冲洗。下面是我尝试运行它时的代码和外壳。根据我的教授的说法，`True`如果手中只有一套西装，即只有一套“西装”中的一个条目，`False`否则这应该返回，但我不断收到此错误消息。有人可以帮我解释一下吗？

```
from random import *

suits = {'H','C','D','S'}   #hearts, clubs, diamonds, spades
ranks = {'a','2','3','4','5','6','7','8','9','10','j','q','k'}  #card values
deck = [r +s for r in ranks for s in suits]
hand = []

def deal (n):
    '''deals n hands'''

    for n in range (0,n):
        hand = sample (deck,5)

        for x in hand:
            deck.remove (x)

        print (hand)

def is_flush (hand):
    '''checks for pat flush hands'''
    suits = {c[-1] for c in hand}
    return len(suits) == 1

RUN

>>> is_flush (5)

['10S', 'qD', '8H', '8D', '3S']
['5C', 'jC', 'kS', '4C', '2H']
['2S', '7C', '7H', '7S', '9S']
['8C', '8S', 'aH', '5S', '2D']
['9D', '6S', '4D', 'qS', '9H']

Traceback (most recent call last):
  File "<pyshell#17>", line 1, in <module>
    is_flush (5)

  File "K:/stalter_3.py", line 19, in is_flush
    suits = {c[-1] for c in hand}

TypeError: 'NoneType' object is not iterable

>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:55:46.987

你在打电话`is_flush(5)`。如果我对您的理解正确，那么该值 5 是`hand`您尝试迭代的变量（就好像它是一只手一样） in `c[-1] for c in hand`，但您不能迭代整数。我感到困惑的原因是我希望它说它是一个 IntType，而不是一个 NoneType。

# django - Django South 克隆项目

> ID：12518991
> 
> 赞同：3
> 
> 时间：2012-09-20T18:49:58.403
> 
> 标签：django, django-south

我刚刚开始使用 South（终于），它确实是一个很棒的工具。我开始了一个项目并进行了一些初步迁移以感受南方的感觉。我现在刚刚将这个项目克隆到一台新机器上。在没有数据库数据，因为还没有数据输入。

我的问题是重建数据库的步骤是什么？

我试过了：

```
 ./manage.py schemamigration <myapp> --auto 
```

和：

```
 ./manage.py migrate <myapp> 
```

但它说似乎什么都没有改变。

我还需要运行初始同步数据库吗？南迁历史会完好无损吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:11:44.583

是的，您首先需要运行syncdb 来加载南迁移历史表

> 编辑您的 settings.py 并将“south”放入 INSTALLED_APPS（假设您已将其安装到正确的位置）
> 
> 运行 ./manage.py syncdb 将 South 表加载到数据库中。请注意，syncdb 现在看起来不同了 - South 对其进行了修改。
> 
> 运行 ./manage.py convert_to_south myapp - South 将自动进行并假装应用您的第一次迁移。

请参阅[转换应用程序](http://south.readthedocs.org/en/latest/convertinganapp.html#converting-an-app)

# jsf - 使用 jQuery 在 JSF 中异步加载 t:dataTable

> ID：12518993
> 
> 赞同：0
> 
> 时间：2012-09-20T18:50:05.347
> 
> 标签：jsf, jquery

```
<t:panelTab label="Detailed View" styleClass="tabFont" rendered="true" id="DetailedView">
    <t:dataTable value="#{MyFinanceBB.amendDataList}" id="DetailedViewGrid" forceId="true"
                var="myVo" rowIndexVar="gridExpRowNo"......>
    ...............
      <t:inputText value="#{myVo.myval}" styleClass="BodyFont" forceId="true" id="myId2"
                                    onchange="getTotalMyValAjax('myId2[#{gridExpRowNo}]',#{gridExpRowNo});"> 
```

/ *-------------------------------------------------- ---------------* /

```
function getMyAmountTotalGrid(myidVar,count){   

            var myAmt=document.getElementById(myidVar).value;

            var id = 'myForm\\:targetView';

                $j.ajax({
                    async:"false",
                    cache:"false",
                    type: "POST",
                    url:"/myProj/myController",
                    data:{myAmt:myAmt,count:count},
                    error:function(){
                        alert('Error Occurred.Please try later');
                        },  
                    success:function(output){
                                alert('SUCCESS');
                                 $j('#'+id).load("/pagesmyProj/Home/dingDongHome.jsf");
                                alert('after reloading grid');                                          
                        }
                    }); 
        } 
```

* * *

当我执行代码警报消息时，SUCCESS 正在打印并且所有服务器端变量都正在更新。（我是通过 sysouts 知道的）。但是网页中并没有真正改变。“重新加载网格后”的警报消息也被打印出来。但是网格没有重新加载。服务器端的更改不会反映在浏览器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:00:34.163

首先，您应该添加`\\`到您的 id

代替`var id = 'myForm:targetView';`

否则按 id编写`var id = 'myForm\\:targetView';`jquery 选择器将不起作用（您需要转义`:`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:57:26.377

你在引用

```
$j('#'+id)... 
```

只需删除“j”，例如。$('#'+id)...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:54:42.703

经过长时间的斗争，我得到了错误。给jquery加载函数的url不正确，应该改变它。