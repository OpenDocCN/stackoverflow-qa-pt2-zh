# StackOverflow 问答 13134000-13134999

# php - 更改php中的日期格式？

> ID：13134006
> 
> 赞同：-5
> 
> 时间：2012-10-30T06:49:12.667
> 
> 标签：php, date, formatting

目前我有这样的日期格式：

```
2012-07-24 
```

我想将其更改为这种格式：

```
July 07, 2012, Friday 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:52:35.283

您可以使用以下任何一种方法：

```
//1
echo date('F d, Y, l',strtotime('2012-07-24'));
//2
$date = date_create('2012-07-24');
echo date_format($date, 'F d, Y, l');
//3
$date = new DateTime('2012-07-24');
echo $date->format('F d, Y, l'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:50:47.827

利用

```
echo date("F d, Y, l"); 
```

阅读本文了解更多信息：

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:01:09.350

```
<?php

    function changedateformat($date)
{
    $date1=explode("-",$date);

    $mktime=mktime(0,0,0,$date1[1],$date1[2],$date1[0]);
    return date('F d, Y, l',$mktime);
}

$date1="2012-07-24";
echo changedateformat($date1);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:51:32.073

使用`date_create_from_format`，然后使用`date_format`

```
date_format(date_create_from_format("2012-07-24","Y-m-d"),"F D, Y, l") 
```

# javascript - 是否可以在 Javascript 中创建文件以上传到其他地方？

> ID：13134008
> 
> 赞同：0
> 
> 时间：2012-10-30T06:49:18.680
> 
> 标签：javascript, file, amazon-s3

我想在浏览器中创建一个文件，特别是带有字符串化 JSON 对象的文本文件，然后将其上传到我的 Amazon S3 帐户。我可以使用现有的库吗？如果没有，我该怎么做？我以前曾将客户的文件上传到 S3，但从未即时创建过。

干杯。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-30T06:58:28.803

[在 JavaScript 中创建文本文件](https://stackoverflow.com/questions/8178825/create-text-file-in-javascript)

使用 window.open 的方法值得一试……您可能需要先保存文件才能进行上传。

我认为您还可以编写一个包含动态文件信息的表单数据并将其发送...

# c# - 如何快速复制二进制文件的一部分？

> ID：13134009
> 
> 赞同：0
> 
> 时间：2012-10-30T06:49:17.987
> 
> 标签：c#, binaryfiles, binary-data

我需要在二进制文件的中间进行一些操作（更改字符串值、布尔值或 int32）并将其他所有内容保持原样。如何在不处理每个二进制对象的情况下快速跳过不需要使用的项目并获得所需的内容（其中有很多而且速度很慢）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:00:45.813

这完全取决于文件的结构。实际上，您是否*可以*更改值将取决于文件的结构 - 如果您需要进行更改以使文件更大或更小，您可能需要创建一个新文件，因为您可以'不仅仅是从文件中间插入或删除字节。

[`Stream.Position`](http://msdn.microsoft.com/en-us/library/system.io.stream.position.aspx)如果您的文件具有固定长度的记录格式，您可以通过查找（例如使用属性）跳到正确的位置。如果您的文件*没有*固定长度的格式，您可能需要完全处理所有内容。在每条记录都带有长度前缀的情况下，存在“中间”的可能性：您不需要实际处理所有内容，但您仍然需要阅读每条记录的标头以跳过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:02:33.113

Stream中有一个Seek函数，或许，你可以直接Seek到你想改变的位置，然后用Write方法修改文件？但是，如果您需要在中间添加字节而不仅仅是替换它们，您可能会遇到问题——在这种情况下，您需要重写文件的其余部分（以抵消现有内容）。

# .htaccess - htaccess 重写后 CSS 和图像不显示

> ID：13134011
> 
> 赞同：0
> 
> 时间：2012-10-30T06:49:29.560
> 
> 标签：.htaccess

我需要设置我的 htaccess 文件，因此当用户输入 www.example.com/post/54 时，它会呈现为 www.example.com/post.php?id=54

我这样设置规则：

```
RewriteRule ^post/(.*)$  post.php?id=$1 [L] 
```

当我在本地主机上对其进行测试时，该页面仅将其显示为 html 并且不捕获图像或 CSS 文件。我的目录设置为 C:/MyWebsites/example 并且看起来文件不是在目录中而是在 C:/MyWebsite 文件夹中加载。这会是什么原因...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:21:59.283

浏览器尝试使用请求的 URI 来确定 URI 基础。所以当浏览器请求时`http://www.example.com/post/54`，URI 是`/post/54`，BASE 是`/post/`。有了这个基础，**所有相对链接都会在链接的前面附加这个**，这使得它与 css 之类的东西的相对链接有错误的基础。

您需要将所有链接更改为绝对链接，或添加

```
<base href="/"> 
```

到`post.php`页面的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:53:57.270

预先`/example/`添加到您的 CSS 和图像路径..

# twitter-bootstrap - 如何使用 Bootstrap 滚动间谍？

> ID：13134013
> 
> 赞同：26
> 
> 时间：2012-10-30T06:49:33.273
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

我不能完全让滚动间谍与垂直导航一起正常工作。您可以在下面找到我使用的代码。出于某种原因，只有“二”被激活。

任何人都知道出了什么问题？

```
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Twitter Bootstrap Scroll Spy Playground</title>
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span3">
            <ul class="navbar nav nav-list affix">
              <li class="active"><a href="#one">One</a></li>
              <li><a href="#two">Two</a></li>
            </ul>
        </div>
        <div class="span1" data-spy="scroll">
            <section id="one">
            <h1>One</h1>
            <h2>Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. </h2>
            </section>
            <section id="two">
            <h1>Two</h1>
           <h2>Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.</h2>
            </section>   
        </div>
      </div>
    </div>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-28T15:14:50.457

在为自己整理出来时，我发现被监视的元素*需要有一个滚动条*。

看看这个小提琴：http: [//jsfiddle.net/adamp/qgU6h/1/](http://jsfiddle.net/adamp/qgU6h/1/)

您可以直接监视 body 元素 ( `$('body').scrollspy()`) 或为您的内容指定明确的高度并强制其显示滚动条。

（如果您查看 Bootstrap[文档示例](http://getbootstrap.com/2.3.2/javascript.html#scrollspy)，它会执行固定高度的技巧。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T00:34:02.610

谢谢杰雷克，我能够在以下帮助下制作我的作品

```
height: 100%; 
```

在我的 CSS的**正文选择器中**

也正如 Bootstrap [http://getbootstrap.com/javascript/#scrollspy的人所推荐的](http://getbootstrap.com/javascript/#scrollspy)

我也加`position: relative;`在了正文里。

我的 CSS 中正文选择器的开头是这样的：

```
body {
    position: relative;
    height: 100%;
    /* … */
} 
```

在`<body>`HTML 中我必须删除

```
data-offset="0" 
```

所以现在是这样的

```
<body data-spy="scroll" data-target="#navigation"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T06:52:29.400

你可以这样做[http://jsfiddle.net/mCxqY/](http://jsfiddle.net/mCxqY/)

```
<body data-spy="scroll" data-target="#navbar">
    <div id="post1" class="box">
        <h1>Post 1</h1>
        <p> Scroll Down↓&lt;/p>
    </div>
    <div id="post2" class="box"><h1>Post 2</h1></div>
    <div id="post3" class="box"><h1>Post 3</h1></div>

    <div id="navbar">
        <ul class="nav">
            <li><a href="#post1">Post 1</a></li>
            <li><a href="#post2">Post 2</a></li>
            <li><a href="#post3">Post 3</a></li>
        </ul>
    </div>

    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-scrollspy.js"></script>
</body>​ 
```

css

```
@import url(http://twitter.github.com/bootstrap/assets/css/bootstrap.css);
.box{
    margin: 20px; padding: 15px;
    background: #eee;
    height: 500px;
}
#navbar{
    position: fixed;
    bottom: 0; left: 20px;
    width: 100%;
    background: #fff;
}
.nav li a{
    float: left;
    width: 80px;
    padding: 15px 0;
}
.nav li a:hover{
    color: #f33 !important;
    background: none;
}
.nav li.active a{
    color: #f55;
    text-decoration: underline;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-18T01:15:21.767

我必须做两件事才能让 scrollspy 为我工作。

首先，我必须给`<body>`元素一个高度：

```
<style>

  .body
  {
    height: 100%;
  }

</style>    

<body data-spy="scroll" data-target="#scrollElement" data-offset="0"> 
```

我*认为*这是因为 scroll-spy 正在尝试获取您正在监视的元素的高度，但是如果没有为您的元素指定高度，它会传递一个 null（或 0？）值，这似乎打破了脚本的计算。

其次，我必须确保我的 id 元素之间有足够的垂直空间（导航锚点指向）。

我无法确定所需的确切空间量（它确实取决于 data-offset 属性，所以它可能与此有关），但我认为如果你为你的 spy 元素设置了高度并且scrollspy 仍然无法正常工作 - 只需在您的 id 元素之间添加更多内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-12T20:16:40.633

经过数小时的挫折和研究，​​我发现很多人对 Bootstrap Affix 的文档 ( [www.mtjhax.wordpress.com](http://mtjhax.wordpress.com/2013/02/11/twitter-bootstraps-scrollspy-plugin-needs-better-docs/) ) 也不满意。虽然环顾四周，但 Bootply 上的这个解决方案对我有用：http: [//bootply.com/63937](http://bootply.com/63937)

假设您的导航的 id 为“navbar”，正文应如下所示：

```
<body data-spy="scroll" data-target="#navbar">
    ...
</body> 
```

导航栏本身应该如下：

```
<div class="navbar" id="navbar">
    <ul class="nav navbar-nav">
        <li>...</li>
        <li>...</li>
        <li>...</li>
    </ul>               
</div> 
```

然后你初始化插件......

```
$('#nav').affix({
    offset: {top: 0}
}); 
```

...并为导航提供适当的样式：

```
#nav.affix {
    position: fixed;
    top: 0;
    width: 100%
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-23T12:14:27.303

```
$(window).scroll(function() {
    if ($(".navbar").offset().top > 50) {
        $(".navbar-fixed-top").addClass("top-nav-collapse");
    } else {
        $(".navbar-fixed-top").removeClass("top-nav-collapse");
    }
});

//jQuery for page scrolling feature - requires jQuery Easing plugin
$(function() {
    $('a.page-scroll').bind('click', function(event) {
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500, 'easeInOutExpo');
        event.preventDefault();
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-25T23:43:03.510

我是这样做的。对于数据目标，我使用类名**.navbar**

```
 <body data-spy="scroll" data-target=".navbar" data-offset="50">
       <nav class="navbar navbar-default navbar-fixed-top" > 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-04T10:12:32.373

考虑使用基于 Bootstrap 5的[`HxScrollspy`组件。](https://havit.blazor.eu/components/HxScrollspy)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-26T22:56:37.097

```
.nameClasse {
  position: relative;
  overflow: auto;
  height: 330px;
}

<div data-spy="scroll" data-target="#navbarVertical" data-offset="0" class="nameClass"> 
```

# c# - 错误处理不起作用 asp.net

> ID：13134016
> 
> 赞同：1
> 
> 时间：2012-10-30T06:50:08.737
> 
> 标签：c#, asp.net, logging

我有以下代码来处理我的错误

Application_Error 中的 Global.asax.cs

```
Exception exception = Server.GetLastError();
if (exception != null)
{
    //Log the error
} 
```

但是，我也有自定义错误页面，我重定向到上面以及来自 web.config - 我这样做是因为 Application_Error 似乎没有捕获所有发生的错误？

所以在我的 Page_Load 错误页面中我有这个代码

```
Exception exception = Server.GetLastError();                
string exInnerExp = "";
if (exception != null)
{
    exInnerExp = exception.InnerException.ToString();
    //Log error
} 
```

这永远行不通？我不知道为什么，对此的任何帮助都非常感谢。

谢谢

**编辑** 在我的 web.config 我有以下代码：

```
<customErrors mode="RemoteOnly">
   <error redirect="http://www.example.com/errorpages/404.aspx" statusCode="404" />
   <error redirect="http://www.example.com/errorpages/siteerror.aspx" statusCode="500" />
</customErrors> 
```

也

```
<httpErrors>
   <remove statusCode="500" subStatusCode="-1" />
   <remove statusCode="404" subStatusCode="-1" />
   <error statusCode="404" prefixLanguageFilePath="" path="/errorpages/404.aspx" responseMode="ExecuteURL" />
   <error statusCode="500" prefixLanguageFilePath="" path="/errorpages/siteerror.aspx" responseMode="ExecuteURL" />
    </httpErrors> 
```

**编辑**

最初我虽然 Application_Error 没有被击中，但后来我发现一段代码只有在 Server.GetLastError() 不为空时才实际运行。所以现在我的问题略有改变，Server.GetLastError() 在 Application_Error 事件中为空。例如，这可能发生在哪里：

我有一个完美运行的已构建项目，如果我转到 UserControl 并更改 asp:TextBox 的 ID，则页面将不会加载并抛出错误，不会捕获此错误。

# android - http post方法将空值传递给服务器

> ID：13134019
> 
> 赞同：6
> 
> 时间：2012-10-30T06:50:27.950
> 
> 标签：android, http

```
 try 
         {

            url= new URL(ConstantsClass.VENDOR_FOLLOW + "?UID=" +android_id+"&URL='"+resultfinal+"'&device=android");

                connection = (HttpURLConnection) url.openConnection();
                connection.setDoOutput(true);
                connection.setRequestMethod("POST");

                request = new OutputStreamWriter(connection.getOutputStream());
                request.flush();
                request.close();
                request.write("Hello!!!");

                String line = "";
                InputStreamReader isr = new InputStreamReader(connection.getInputStream());
                BufferedReader reader = new BufferedReader(isr);

                StringBuffer sb = new StringBuffer();

                while((line=reader.readLine())!=null) {
                    sb.append(line + "&");
                }

                response = sb.toString();
                //response.getEntity().getContent();

                Log.i("Test", "updated response: " + response);

            }
         catch (IOException e) {
              e.printStackTrace();
          }

            Log.i("Test", "**************url list********************" + url);
         tag_text.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent in=new Intent(context,LinkWebView.class);
                    in.putExtra("vendorUrl", resultfinal);
                    context.startActivity(in);      
                    //postData();
                }
            });
             }

    tag_text.setTextSize(16);
    return view;

} 
```

嗨，我是 android 新手，我正在尝试将值从 url 传递到服务器，但我在服务器端传递了空值。更新响应为空。我的服务器端值没有给我任何值。我需要从上面给出的 url 传递 url、android_id 和设备。我也尝试了httpclient，但它也给了我空值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T07:13:30.197

你应该试试下面的代码，它对我来说运行得很好。

```
 // ADD YOUR REQUEST DATA HERE  (you can pass number of variable).
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("Your_var_1", value));
    nameValuePairs.add(new BasicNameValuePair("Your_var_2", value)); 
```

现在建立您的网络连接，例如

# (1) 向服务器发送简单字符串

```
 try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("your url only ex:www.google.com/abc");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpParams httpParameters = new BasicHttpParams();
        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) 
    {   
        Log.e("Loading Runnable Error in http connection  :", e.toString());
    } 
```

# (2) 向服务器发送 JSON Encode 字符串

```
HttpClient client = new DefaultHttpClient();
HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
HttpResponse response;
JSONObject json = new JSONObject();

try {
HttpPost post = new HttpPost(URL);
json.put("user_name", "chintan");
json.put("password", "khetiya");
StringEntity se = new StringEntity( json.toString());  
se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
post.setEntity(se);
response = client.execute(post);

 /*Checking response */
if(response!=null){
is = response.getEntity().getContent(); //Get the data in the entity
 }

} catch(Exception e) {
e.printStackTrace();
createDialog("Error", "Cannot Estabilish Connection");
} 
```

# 两种情况下的响应都相同

```
try 
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    }
    catch (Exception e) 
    {   
        Log.e("Loading Runnable Error converting result :", e.toString());
    } 
```

现在最终结果包含整个输出字符串，这取决于您将如何读取数据。使用 json 或其他。我正在使用 json 所以放它的示例代码可能对你有帮助。

```
JSONObject json_data = new JSONObject(result);// its a string var which contain output. 
        my_output_one = json_data.getString("var_1"); // its your response var form web.
        my_output_two = json_data.getString("var_2"); 
```

现在它结束了，您有两个变量，它们具有任何类型的值并使用任何类型。

现在这将对您有所帮助。如果您有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:57:20.320

请在写入后调用刷新并在 finally 块中关闭流。查看以下代码：

```
 try 
         {

            url= new URL(ConstantsClass.VENDOR_FOLLOW + "?UID=" +android_id+"&URL='"+resultfinal+"'&device=android");

                connection = (HttpURLConnection) url.openConnection();
                connection.setDoOutput(true);
                connection.setRequestMethod("POST");

                request = new OutputStreamWriter(connection.getOutputStream());
                request.write("Hello!!!");

                request.flush();

                String line = "";
                InputStreamReader isr = new InputStreamReader(connection.getInputStream());
                BufferedReader reader = new BufferedReader(isr);

                StringBuffer sb = new StringBuffer();

                while((line=reader.readLine())!=null) {
                    sb.append(line + "&");
                }

                response = sb.toString();
                //response.getEntity().getContent();

                Log.i("Test", "updated response: " + response);

            }
         catch (IOException e) {
              e.printStackTrace();
          }

            Log.i("Test", "**************url list********************" + url);
         tag_text.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent in=new Intent(context,LinkWebView.class);
                    in.putExtra("vendorUrl", resultfinal);
                    context.startActivity(in);      
                    //postData();
                }
            });
             }

    tag_text.setTextSize(16);
    return view;

}finally{
              try{
                request.close();
              }catch(Exception e){}
 } 
```

# iphone - 针对 iPhone 5 进行了优化

> ID：13134023
> 
> 赞同：1
> 
> 时间：2012-10-30T06:51:16.100
> 
> 标签：iphone, objective-c, ios, iphone-5

我检查了 iTunes 上的一些应用程序，在受支持的设备中，有些应用程序显示“针对 iPhone 5 进行了优化”，而在某些设备中，它是普通的 iPhone 5。这两者之间是否存在差异。

iTunes 将如何知道应用程序是否针对 iphone 5 进行了优化。

我的应用在 iPhone 5 模拟器上运行良好。这是否意味着我的应用程序针对 iPhone 5 进行了优化。

编辑：我还没有在设备上测试我的应用程序。在小屏幕尺寸的模拟器 bcoz 上，我必须滚动才能看到整个屏幕。如何针对 iphone 5 优化我的应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:03:07.860

针对 iPhone 5 优化的应用程序是利用 iPhone 5 中的整个屏幕区域的应用程序。普通应用程序仍与 iPhone 5 兼容，屏幕顶部和底部都有一个黑色条带，以补偿额外的屏幕空间。您需要`Default-568h@2x.png`在代码中包含在 iPhone 5 中获得全屏显示的代码。当然，由于 iPhone 5 的高度更高，因此您需要以编程方式处理 iphone 4 和 iphone 5 的所有屏幕更改。如果不添加`Default-568h@2x.png` ，它将在 iPhone 5 的屏幕顶部和底部显示一个黑色条带，以显示与 iPhone 4 中可用的应用程序大小相同的应用程序。有关更多详细信息，请查看[如何为 iPhone 5 开发或迁移应用程序屏幕分辨率？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)为了在模拟器中查看应用程序，请转到硬件菜单 -> 设备 -> 选择 iPhone（Retina - 4 英寸）并运行您的应用程序。像这样启动模拟器后，您可以按`command button + 2 or 3`使其变小以适合您的屏幕。你不必那样滚动。要使其返回大视图，请按`command + 1`。可以通过窗口菜单 -> 缩放选项更改相同的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:53:20.907

为 iPhone 5 优化的应用程序占据了所有屏幕，其他的有上下两个黑条。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:37:28.360

在 iOS 模拟器上运行应用程序，在菜单中打开硬件 > 设备 > 4 英寸视网膜。如果没有条，则您的应用已针对 iphone 5 进行了优化。

PS：如果您已经针对 4 英寸屏幕优化了您的应用程序，也可以尝试旋转模拟器。（如果您的应用程序中有这样的功能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-27T04:59:12.580

请选择：“不使用资产目录”，然后在支持文件中添加启动图像。

启动图像的命名约定为：

*   Default-568h@2x.png (640*1136) 4寸iPhone

*   Default@2x.png (640*960) 3.5 英寸 iPhone Retina 显示屏

*   Default.png (320*480) 3.5 英寸 iPhone 非 Retina 显示屏

# asp.net-mvc-2 - 如何在单个方法中处理异常而不是在 mvc2 (.net) 中的每个方法中处理

> ID：13134025
> 
> 赞同：1
> 
> 时间：2012-10-30T06:51:20.773
> 
> 标签：asp.net-mvc-2

我可以用单一方法处理整个页面或整个控制器的异常。

这是我的代码

```
 public ActionResult BindProductDetails(string StartIndex, string EndIndex, string HeaderName, string SortBy, string Search, string OrderstoDisplay)
    {
        List<Products> objProduct = new List<Products>();

        try
        {
            objProduct = objProductsModel.GetProductsList(Convert.ToInt32(Session["MerchantID"]), Convert.ToInt32(StartIndex), Convert.ToInt32(EndIndex), HeaderName.Trim(), SortBy, Search, Convert.ToInt32(Session["userID"]), Convert.ToInt32(OrderstoDisplay), Session["ConnectionString"].ToString());
            ViewData["ProductCount"] = ProductsModel.ProductCount;
            ViewData["OrdersToDisplay"] = ProductsModel.OrdersToDisplay;
            CurrentProductCount = ProductsModel.CurrentCount;
            return PartialView("PVProducts", objProduct);
        }
        catch (Exception ex)
        {
           Logger.WriteToLog(objUserDetails.ErrorType, objUserDetails.MerchantName, objUserDetails.UserName, "ProductsController.BindProductDetails()", ex.Message, null, objProduct);
            return null;
        }
    }

    #region GetWarehouseDetails
    public string GetWarehouseDetails()
    {
        string strMerchantWarehouses = string.Empty;
        ProductDetails objUsersWarehouse = new ProductDetails();
        try
        {
            objUsersWarehouse = objProductsModel.GetWarehouseInfo(Convert.ToInt32(Session["MerchantID"]), Session["ConnectionString"].ToString());
            strMerchantWarehouses = json.toJshon(objUsersWarehouse);
        }
        catch (Exception ex)
        {
           Logger.WriteToLog(objUserDetails.ErrorType, objUserDetails.MerchantName, objUserDetails.UserName, "ProductsController.GetWarehouseDetails()", ex.Message, null, objUsersWarehouse);
        }
        return strMerchantWarehouses;
    }
    #endregion 
```

每次我在每种方法中处理异常。我需要替代方法，

单个方法处理单个控制器或整个应用程序异常，例如（Actionfilter）for（会话处理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:13:51.320

您应该覆盖 Global.asax.cs 中的 Applicaion_Error 将您的代码放在此方法中

# android - 如何创建对等连接？

> ID：13134034
> 
> 赞同：7
> 
> 时间：2012-10-30T06:52:05.913
> 
> 标签：android, p2p, live-streaming

在阅读了有关如何创建 P2P 网络功能的更多信息后，我想开始自己的`peer-to-peer`套接字创建。

我正在为 android 平台开发一些应用程序，但我遇到的问题是我不太确定如何处理，而且两者都密切相关。

*   如何将一个相对较小的数据文件从一个 android 设备发送到另一个（客户端到客户端）？
*   是否可以创建一个`temporary p2p live data stream`从一个 android 设备到另一个？

    我想将视频、音频和图像文件从手机 A 传递到手机 B。

如果可能的话，如果可能的话，我将非常感谢在任何一个问题上指出正确的方向（文件传输或实时数据传输）给我任何示例应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:17:57.830

带蓝牙插座

[http://homepages.ius.edu/RWISMAN/C490/html/Android-Bluetooth.htm](http://homepages.ius.edu/RWISMAN/C490/html/Android-Bluetooth.htm)

在此之后，您可以从以下链接下载文件，我创建了一个用于 PC 的蓝牙服务器和一个 Android 客户端来传输文件，但首先仔细阅读上一个答案，然后下载文件，然后阅读 Read Me first.txt 文件安装说明

[https://rapidshare.com/files/3100729241/Read%20Me%20First.rar](https://rapidshare.com/files/3100729241/Read%20Me%20First.rar)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T21:50:22.520

在 SIP 上下文中，P2P 网络提供分布式对等位置和服务广告服务。对等点在 P2P 网络上宣传和了解彼此的位置和服务，而无需代理服务器。

因此，您的两个问题都不是特定于 SIP 的。您需要使用多种技术之一来定位和加入 P2P 覆盖。了解对等位置后，您可以继续发送 SIP 消息。

SIP 是一种信令协议。它提供了一套机制来帮助建立会话。在您的情况下，数据流传输与 SIP 无关。SIP/SDP 中文件传输的详细信息记录在[RFC5547](https://www.rfc-editor.org/rfc/rfc5547)中。

要了解 SIP，最好的起点是[RFC3261](https://www.rfc-editor.org/rfc/rfc3261)。[RFC3665](https://www.rfc-editor.org/rfc/rfc3665)有非常有用的调用流程图。[RFC5441](https://www.rfc-editor.org/rfc/rfc5411)列出了 SIP 相关的 RFC。还要检查[P2PSIP WG](http://datatracker.ietf.org/wg/p2psip/)的[RELOAD](https://datatracker.ietf.org/doc/html/draft-ietf-p2psip-base-22)协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:28:48.357

使用 Peerdroid。

[http://code.google.com/p/peerdroid/](http://code.google.com/p/peerdroid/)

“Peer Droid 是 JXME 协议对 Android 平台的移植。它允许 Android 开发者为 Android 平台创建应用程序，利用 JXTA 系统的特性和 Android 潜力，与其他移动终端和其他传统对等点（个人计算机）交互。”

# sql - 在 SQL 数据库中存储 DICOM 图像的文件位置

> ID：13134037
> 
> 赞同：3
> 
> 时间：2012-10-30T06:52:13.817
> 
> 标签：sql, database

我想将`DICOM`图像存储在某个目录中，创建与`DICOM`图像相关的特定参数的数据库，并将`DICOM`文件的相对位置添加到数据库中。

如何在设计视图中执行此操作而不是显式编码？（我对数据库/SQL 这类事情比较陌生，这就是为什么我至少一开始更喜欢在设计视图中这样做）。

我已经搜索了与该主题相关的问题，但是我想出的只是一些帖子，讨论是将图像本身存储在数据库中还是指向位置的指针更好。

有人可以确切地告诉我如何去做，而不是不同方法的优缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:09:21.273

我是名为[XNAT](http://www.xnat.org/)的成像平台的开发人员之一。我们的系统具有您描述的功能（以及其他功能），我们的实现使用“指针”方法。这个决定对我们来说效果很好，我们没有改变它的计划。

特别是如果您是 SQL 新手，我建议您使用指针方法——存储/检索会更简单，因为您将存储字符串而不是（可能很大的）图像。

您提到想要在设计视图中做事 - 您是否在 .NET/Visual Studio 环境中工作？如果是这样，[ADO.NET](http://msdn.microsoft.com/en-us/library/h43ks021.aspx)应该对您有用。或者，如果您希望设计视图为您生成一些 ADO.NET 代码，[此链接](http://msdn.microsoft.com/en-us/library/8bw9ksd6.aspx)包含在 GUI 中创建数据集的提示。

当然，我也鼓励你看看[XNAT](http://www.xnat.org/)。我们的平台是基于 Java 的，而不是 .NET，但它是开源的并且免费提供。它说 DICOM 开箱即用，可以充当 C-STORE SCP（这意味着您可以直接从扫描仪向它发送数据）。

# simulation - Verilog 与下一个信号的争用

> ID：13134043
> 
> 赞同：0
> 
> 时间：2012-10-30T06:52:30.483
> 
> 标签：simulation, verilog, synthesis, mismatch, contention

我正在尝试实现以下代码：

```
reg [7:0] next_busy;

always @* begin
    next_busy = busy; //default assignment

    if (condition determined by module input) begin
        next_busy[0]= 1'b1;
    end
end //always @*

always @(posedge clock) begin
    if (reset) begin
        busy <= 8'b0;
    end else begin
        busy <= next_busy;
    end
end //always @(posedge clock) 
```

这在模拟中工作得很好，但在综合中似乎对 next_busy 信号存在某种争用。也就是说，如果busy 不是1（比如前一个周期有一个复位），那么它输出一个x（如果满足输入条件）。但是，如果busy 已经为1（并且满足输入条件），则next_busy 被正确分配为1。所以我只是想知道是否有一种正确的方法来做我想做的事情，这样它也可以在综合中起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:18:37.570

您通常将复位包含在触发器的敏感度列表中。对于低电平有效复位`always @(posedge clock or negedge reset)`

在提供的示例中，busy 没有定义，假设它是`reg [7:0] busy;`.

我将按照以下方式实施：

```
reg [7:0] busy;

always @(posedge clock or negedge reset) begin
    if (reset == 1'b0) begin
        busy    <= 8'b0;
    end
    else if (condition determined by module input) begin
        busy[0] <= 1'b1; // busy <= 8'b1;
    end
    else begin
        busy    <= next_busy;
    end
end //always @(posedge clock) 
```

# opencart - 在 Opencart 中获取有关当前用户的信息

> ID：13134044
> 
> 赞同：10
> 
> 时间：2012-10-30T06:52:30.930
> 
> 标签：opencart

我一直在使用 Opencart 开发一个模块，我想知道如何获取当前用户信息。

我在想这样的事情：`$this->getuserid();`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T06:54:51.117

我刚刚发现：

```
$this->customer->getFirstName();
$this->customer->getLastName();
$this->customer->getEmail();
$this->customer->getTelephone();
$this->customer->getFax(); 
```

等等。

源代码（包括其他可用方法）位于[`system/library/customer.php`](https://github.com/opencart/opencart/blob/master/upload/system/library/customer.php)文件中。

您可以在任何地方使用这些方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-19T01:17:18.950

客户和用户之间是有区别的。要获取当前用户 ID（管理员、经理等），请执行以下操作：

```
$this->session->data['user_id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-22T06:02:11.897

另一种获取当前登录用户id的方法

```
$this->user->getId(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-17T09:35:08.830

在 oc3

您可以在中获取库文件夹

```
your_project/system/library/cart/customer.php 
```

在 customer.php 文件中，您将获得可以在控制器中调用并检查的所有函数。

```
$this->customer->getId(); 
```

获取您的客户 ID 等，您可以从 customer.php 文件中获取它。

谢谢。

# java - 什么时候需要重写 equals 和 hashcode 方法？

> ID：13134050
> 
> 赞同：13
> 
> 时间：2012-10-30T06:53:08.390
> 
> 标签：java, equals

> **可能重复：**
> [在 Java 中覆盖 equals 和 hashCode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

如果我有

```
class A {
    int x = 1;
}
...
A a1 = new A();
A a2 = new A();
a1.equals(a2); 
```

如果我比较 A 的 2 个实例而不覆盖 equals 方法，我会得到预期的结果吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-30T06:55:19.003

> 如果我比较 A 的 2 个实例而不覆盖 equals 方法，我会得到预期的结果吗？

这取决于你的期望:)

默认实现将为您提供*引用相等性*- 换句话说，当您比较两个引用时，`equals`只有当它们是对同一对象的引用时才会返回 true。

您通常会重写`equals`以实现“值相等”——两个不同的对象被视为相等，通常是因为它们本身具有相等的字段值。相等的确切含义将取决于您的设计 - 例如，这两个对象仍然可以通过其他方式区分。

如果您覆盖`equals`，您*还*应该覆盖`hashCode`以与 一致`equals`，例如如果`a.equals(b)`为真，则`a.hashCode() == b.hashCode()`。这将允许您的类的实例用作基于哈希的集合（例如）中的键，以便您可以根据*等于*`HashMap`原始键的键查找值，而不必使用对确切的引用原始关键对象。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T07:09:18.260

> 如果我比较 A 的 2 个实例而不覆盖 equals 方法，我会得到预期的结果吗？

不，因为您已经明确创建了两个不同的实例。

*为什么？*equals 的默认实现检查两个相关对象是否指向 java 虚拟内存中的相同内存位置（并且此默认行为在 java.lang.Object.equals() 中定义）

> 什么时候需要重写 equals 和 hashcode 方法？

程序员同时覆盖 equals() 和 hashcode() 的最常见情况是，如果您需要使用相关类的实例作为

1.  java.util.Map 实现中的键
2.  java.util.Set 实现中的值
3.  您想检查同一类的两个不同实例之间的值是否相等（在这种情况下重写 equals() 是强制性的， hashcode() 不是 - 但这是一个很好的编程习惯）

equals 和 hashcode 的一般合约是：

```
if a1.equals(a2)
    it is mandatory that a1.hashcode() == a2.hashcode()
if a1.hashcode() == a2.hashcode()
    it is not mandatory that a1.equals(a2) 
```

我想有足够的数据来处理一天:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T06:55:30.187

`equals`测试变量是否引用同一个对象的默认实现。如果这不是您想要的，那么您需要覆盖`equals`. 当您覆盖时，`equals`您通常需要覆盖`hashcode`该对象才能在哈希表（或其他使用哈希码的数据结构）中使用。*

# android - 谷歌分析不显示实时数据

> ID：13134055
> 
> 赞同：3
> 
> 时间：2012-10-30T06:53:42.223
> 
> 标签：android

我在我的 android 应用程序中集成了谷歌分析，但在 GA 的仪表板上它没有显示任何用户。请帮助我在哪里出错。

我正在编写如下代码

```
public void onCreate(Bundle icicle) 
{

tracker=GoogleAnalyticsTracker.getInstance();

tracker.startNewSession(TRACKER_ID,20,this); 
```

//也想知道这个第二个参数是做什么用的。我正在使用 20 秒，但我不为什么要使用该参数。正如 GA 中所写，它会在 20 秒后自动调度，对吗？

```
tracker.trackPageView("MyPage");

}

@Override
    public void onDestroy()
{

    super.onDestroy();
    tracker.stopSession();  
} 
```

并且我的应用程序中有多个活动在所有活动中使用相同类型的代码。

仍然没有关于 GA 的任何数据。将 GA 集成到我的应用程序后 24 小时完成。请帮助为什么 GA 数据不来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:49:10.310

如果您在应用程序中集成谷歌分析时遇到问题，但未显示实时数据。在谷歌分析中为您的网站制作个人资料。它与 app 相同。为您提供相同的 UA-xxxxxxxx-1，然后将其集成到您的应用中，与[Android 应用中的 Google Analytics 集成相同](https://developers.google.com/analytics/devguides/collection/android/devguide)

它对我有用，我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:59:37.873

// 以手动调度模式启动跟踪器...

```
tracker.startNewSession(Tracker_Id, MainActivity.this); 
```

`tracker.dispatch();`跟踪 pageView 后，您需要用于在 Google Analytical 上发送数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T15:59:17.377

在您的 Google Analytics 上，您必须激活 Property MObile 应用程序，它有 2 个不同的视图，移动端和网络端，尽管它们共享相同的 ID

# c - OpenGL三角形未显示

> ID：13134058
> 
> 赞同：0
> 
> 时间：2012-10-30T06:53:49.857
> 
> 标签：c, opengl

我目前正在学习有关现代 OpenGL 的教程。我从上述教程中复制了一个代码并尝试了它。下面的代码应该显示一个三角形，但只出现一个空白窗口。我在此之前尝试了教程，其中一个点出现在屏幕上并且它工作但这个不起作用。可能是什么问题呢？

```
#include <stdio.h>
#include <GL/glew.h>
#include <GL/freeglut.h>

GLuint VBO;

static void RenderSceneCB()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);

    glutSwapBuffers();
}

static void InitializeGlutCallbacks()
{
    glutDisplayFunc(RenderSceneCB);
}

static void CreateVertexBuffer()
{
    static const GLfloat Vertices[] = {
        -1.0f, -1.0f, 0.0f,
        1.0f, -1.0f, 0.0f,
        0.0f,  1.0f, 0.0f,
    };

    glGenBuffers(1, &VBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);
    glutInitWindowSize(1024, 768);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("Tutorial 03");

    InitializeGlutCallbacks();

    // Must be done after glut is initialized!
    GLenum res = glewInit();
    if (res != GLEW_OK) {
        fprintf(stderr, "Error: '%s'\n", glewGetErrorString(res));
        return 1;
    }

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

    CreateVertexBuffer();

    glutMainLoop();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:14:12.650

我没有看到任何着色器的证据。`glVertexAttribPointer`如果没有着色器，您将无法使用。

您复制并粘贴此代码的教程可能在某处包含着色器。你应该使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T03:34:03.197

我自己在 Ubuntu 12.04 上遇到了这个问题。如果您没有安装当前的图形驱动程序，也会出现此问题，因为它会尝试使用 OpenGL 1.x。更新您的视频驱动程序，以便您的系统使用现代 OpenGL，然后再试一次。

据我所知，缺少着色器不是问题，因为它“应该”自动使用默认着色器。虽然那可能只是我。

# php - 在服务器上存储大量图像的建议 [PHP]

> ID：13134061
> 
> 赞同：3
> 
> 时间：2012-10-30T06:53:58.293
> 
> 标签：php, image

我有一个图片库网站。我想在服务器上存储数百万张照片。所以请建议我如何存储图像，以便轻松检索和存储...

我应该去数据库还是存储到目录中。我不会去数据库，检索数据会惊慌失措。如果使用目录结构，如果1000开始上传操作就会有问题，那么就会有问题..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:23:57.337

尝试键值存储 一个不错的键值存储是[redis](http://www.redis.io)，它快速且易于学习，可以快速存储和检索图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:29:53.400

如果您的问题是关于在服务器上存储图像的最佳方式，我建议您将图像文件存储在目录中，并将这些图像的链接保存在数据库中。

# .net - 在asp.net中提交页面后按F5？

> ID：13134065
> 
> 赞同：0
> 
> 时间：2012-10-30T06:54:09.020
> 
> 标签：.net

我有带有提交按钮的网页，当用户按 F5 刷新页面提交页面后，它会执行上次请求所做的事情。

我通过在自身后面的 C# 代码中的 submit_click 函数中再次重定向同一页面来省略这一点。

但我觉得当用户点击数增加时会产生一些性能问题。

我也尝试过 Server.Transfer。但它们都不是防止问题的正确解决方案。

有什么解决方案可以解决这个问题吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:03:56.793

您可以使用**[Post/Redirect/Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)**来最大程度地减少表单重新提交的问题。

但是，这并不完全安全。用户仍有可能通过单击后退按钮并再次重新加载来重新提交表单。不过，浏览器会在重新提交之前进行确认。

**[有用的文章。](http://blog.andreloker.de/post/2008/06/Post-Redirect-Get.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:54:42.167

您可以尝试为用于提交表单的按钮添加一个值，例如 value="isClicked"。

在处理请求之前，您可以检查该按钮是否具有值。

```
if (Request.Form["answer-thread"] != null && String.Equals(Request.Form["answer-thread"], "isClicked"))

{
 var answerText = Request.Form["answer-text"].ToString();
.... do your form logic. 
} 
```

刷新页面时，该按钮将为空。希望这对你有用

最好的问候亨里克

# multithreading - 有没有 Executor 连接到 Broker？

> ID：13134066
> 
> 赞同：0
> 
> 时间：2012-10-30T06:54:09.717
> 
> 标签：multithreading, scala

我需要在给定的毫秒内尽可能多地执行相同的任务。所以我使用 scala.actors.threadpool.Executors 作为以下代码。

```
import actors.threadpool.{TimeUnit, Future, Executors}
import collection.mutable.ListBuffer

object TaskRepeater {

  def repeat(task: Runnable, millisecs: Long): Int = {
    val exector = Executors.newCachedThreadPool
    val remover = Executors.newCachedThreadPool

    val queue = ListBuffer[Future]()
    def removeDone() {
      (queue filter (_.isDone)) foreach { f =>
        queue.remove(queue indexOf f)
      }
    }

    val lock = new EasyLock()

    val maxQueueSize = scala.collection.parallel.availableProcessors

    val queueAvaiable = lock.mkCondition(queue.size < maxQueueSize)

    var cnt = 0

    val start = System.nanoTime()

    while(System.nanoTime() - start < millisecs * 1000000) {
      lock {
        queueAvaiable.waitUntilFulfiled()

        cnt += 1
        val r = exector.submit(task)
        queue += r

        remover.submit(runneble {
          r.get()
          lock {
            removeDone()
            queueAvaiable.signalIfFulfilled()
          }
        })
      }
    }

    exector.shutdown()
    remover.shutdown()

    assert(exector.awaitTermination(1, TimeUnit.SECONDS))

    cnt
  }

  def runneble(f: => Unit) = new Runnable {
    def run() {
      f
    }
  }
}

import actors.threadpool.locks.{Condition, ReentrantLock}

class EasyLock {
  val lock = new ReentrantLock

  def mkCondition(f: => Boolean): EasyCondition = {
    new EasyCondition(lock.newCondition(), f)
  }

  def apply(f: => Unit) {
    lock.lock()
    try {
      f
    } finally {
      lock.unlock()
    }
  }
}

class EasyCondition(c: Condition, condition: => Boolean) {

  def waitUntilFulfiled(f: => Unit) {
    while (!condition) {
      c.await()
    }
    f
  }

  def signalAllIfFulfilled() {
    if (condition) c.signalAll()
  }

  def signalIfFulfilled() {
    if (condition) c.signal()
  }
} 
```

但这有点复杂。相反，我认为 Twitter 的 Broker 和一些与 Broker 连接并将完成的任务发送给 Broker（如果存在）的 Executor 可以使其更容易。

以下是伪代码

```
val b = new Broker
val e = new Executor // connects with the broker anyway
e.runTask
val o = b.recv
o.sync() // wait until the task finishes 
```

有没有这样的执行者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:20:46.540

如果我对您的理解正确，您可以这样使用`FuturePool`：

```
val b = new Broker[T]
val futurePool = FuturePool.defaultPool // or some other pool
futurePool(task).onSuccess { b ! _ } 
```

# c# - radgridview 跳转

> ID：13134068
> 
> 赞同：0
> 
> 时间：2012-10-30T06:54:14.257
> 
> 标签：c#, wpf, telerik, radgridview

我有这个 xaml：

```
<Window x:Class="WPFExample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WPFExample"
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
    Title="MainWindow" Height="350" Width="525"
    xmlns:sys="clr-namespace:System;assembly=mscorlib">
<Window.Resources>
    <x:ArrayExtension Type="{x:Type local:Model}" x:Key="Models">
        <local:Model StringProp="Some value" Int32Prop="3" />
        <local:Model StringProp="Another one" Int32Prop="12" />
        <local:Model StringProp="The same" Int32Prop="132" />
        <local:Model StringProp="Tired..." Int32Prop="-5" />
        <local:Model StringProp="End it" Int32Prop="43" />
        <local:Model StringProp="..." Int32Prop="11" />
        <local:Model StringProp="the end." Int32Prop="12" />
    </x:ArrayExtension>
</Window.Resources>
<ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Auto">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <telerik:RadGridView  x:Name="grid" ItemsSource="{StaticResource Models}">
            <telerik:RadGridView.Columns>
                <telerik:GridViewColumn >
                    <telerik:GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox Width="200">
                                <ComboBox.Items>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                </ComboBox.Items>
                            </ComboBox>
                        </DataTemplate>
                    </telerik:GridViewColumn.CellTemplate>
                </telerik:GridViewColumn>
            </telerik:RadGridView.Columns>
        </telerik:RadGridView>

        <telerik:RadGridView x:Name="grid1" Grid.Row="1" ItemsSource="{StaticResource Models}">
            <telerik:RadGridView.Columns>
                <telerik:GridViewDataColumn>
                    <telerik:GridViewDataColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox Width="200">
                                <ComboBox.Items>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                </ComboBox.Items>
                            </ComboBox>
                        </DataTemplate>
                    </telerik:GridViewDataColumn.CellTemplate>
                </telerik:GridViewDataColumn>
            </telerik:RadGridView.Columns>
        </telerik:RadGridView>

        <telerik:RadGridView x:Name="grid2" Grid.Row="2" ItemsSource="{StaticResource Models}">
            <telerik:RadGridView.Columns>
                <telerik:GridViewDataColumn>
                    <telerik:GridViewDataColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox Width="200">
                                <ComboBox.Items>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                    <sys:String>String 1</sys:String>
                                </ComboBox.Items>
                            </ComboBox>
                        </DataTemplate>
                    </telerik:GridViewDataColumn.CellTemplate>
                </telerik:GridViewDataColumn>
            </telerik:RadGridView.Columns>
        </telerik:RadGridView>
    </Grid>
</ScrollViewer> 
```

这只是一个带有三个 radgridviews 的简单窗口，都是一种。

问题：如果其中一个 radgridview 不完全可见并且我单击此 radgridview 中的组合框，则它首先跳转到视图中，然后组合框单击处理。我怎样才能消除这种行为，因为我不需要 radgridview 完全可见？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:36:34.663

现在我使用这个解决方法

```
private void RadGridView_RequestBringIntoView(object sender, RequestBringIntoViewEventArgs e)
{
    e.Handled = true;
} 
```

# sql - 处理excel vba sql查询中的单引号

> ID：13134070
> 
> 赞同：1
> 
> 时间：2012-10-30T06:54:35.930
> 
> 标签：sql, vba, excel

我正在使用 excel sql 查询根据我在下拉框中所做的选择从后端获取数据。但是，在下拉框值中有单引号（'）的情况下，我的 sql 查询不起作用。例如——男装。请给我一个解决这个问题的方法

```
 SQL = "select Segment,Weeks,Value from [Category performance data$] where       Departments='" &       Sheet3.Range("Dept_name").Value & _
     "' and Metric ='Total Spend' group by Segment,Weeks,Value"
    Call execQry 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:55:14.963

```
Departments='" & replace(Sheet3.Range("Dept_name").Value, "'", "''") & _ "' and Metric 
```

# oracle - 如何解决数值或数值错误？

> ID：13134072
> 
> 赞同：-1
> 
> 时间：2012-10-30T06:54:36.863
> 
> 标签：oracle, plsql, oracle10g, oracle11g, plsqldeveloper

在下面的程序中，procedure('newprocedure') 已成功创建，因为它返回 Success 但这一行 >>>> oresult oot = odb.ExecuteSQL("Begin newprocedur(:ENAME,:ROLLNO); End;"); 它失败并出现此错误>>>> ORA-06502：PL/SQL：数字或值错误：字符到数字转换错误“。请帮助我解决问题。

我的桌子看起来像这样

电子表格

卷名 1 凯特 3 扎克

```
`int _tmain(int argc, _TCHAR* argv[])
  {
   OStartup();
   ODatabase odb;
   oresult res = odb.Open("MICROSOFT", "OMNIPOS", "OMNIPOS");
   char pSqlStmt[500];
   memset(pSqlStmt,0,sizeof(pSqlStmt));
   OSqlStmt osql;
   ///////////////////////////////procedure Creation/////////////////
   strcpy(pSqlStmt,"create or replace PROCEDURE newprocedure(inEmpName IN VARCHAR2 ,outEmpno   OUT NUMBER)\n AS \n"); 
  strcat(pSqlStmt,"BEGIN\n"); 
  strcat(pSqlStmt,"select ROLL into outEmpno from Egtable WHERE NAME = inEmpName;\n"); 
 // strcat(pSqlStmt,"dbms_output.put_line('Roll'+outEmpno);\n");
  strcat(pSqlStmt,"outEmpno:=outEmpno+1;\n");
  strcat(pSqlStmt,"update Egtable set ROLL = outEmpno WHERE NAME = inEmpName;\n");
  strcat(pSqlStmt,"END;\n");
  oresult ot = odb.ExecuteSQL(pSqlStmt);

  if (ot == OSUCCESS) 
  {  
   OValue val;
   odb.GetParameters().Add("ENAME","Zac", OPARAMETER_INVAR, OTYPE_VARCHAR2);
   odb.GetParameters().Add("ROLLNO",0, OPARAMETER_OUTVAR, OTYPE_NUMBER); 
   oresult oot = odb.ExecuteSQL("Begin newprocedure(:ENAME,:ROLLNO); End;");
   oresult i = odb.GetParameters().GetParameter("ROLLNO").GetValue(&val);
   cout<< "value is " << (const char*) val<<endl;
  }
  else
  { 
   cout<<"ERR:"<<odb.GetServerErrorText(); 
  } 
  odb.Close();
  OShutdown();
  } 
```

`

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:24:34.663

这是一个简单的语法错误。Oracle 仅使用“+”进行算术运算。所以在这行代码中......

```
dbms_output.put_line('Roll'+outEmpno) 
```

...它试图添加`outEmpno`到'Roll'，这是一个字符串。这就是你的程序抛出 ORA-06502 的原因。

解决方案是使用正确的连接运算符，它是一个双管道：

```
dbms_output.put_line('Roll '||outEmpno) 
```

还有其他连接字符串的方法，文档中列出了这些方法。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/operators003.htm#sthref817)。

# erlang - 我可以陷阱退出（自我（），杀死）？

> ID：13134078
> 
> 赞同：3
> 
> 时间：2012-10-30T06:54:54.570
> 
> 标签：erlang

当我从 learnyousomeerlang.com 阅读一篇文章时，我有一个问题。 [http://learnyousomeerlang.com/errors-and-processes](http://learnyousomeerlang.com/errors-and-processes)

它说：

> **异常来源：** `exit(self(), kill)`
> 
> **未捕获的结果：** `** exception exit: killed`
> 
> **被困结果：** `** exception exit: killed`
> 
> 哎呀，看那个。看来这一个实际上是不可能被困住的。让我们检查一下。

但它不符合我用代码测试的内容：

```
 -module(trapexit).
  -compile(export_all).
  self_kill_exit()->
  process_flag(trap_exit,true),
  Pid=spawn_link(fun()->timer:sleep(3000),exit(self(),kill)  end),
  receive
    {_A,Pid,_B}->io:format("subinmain:~p output:~p~n",[Pid,{_A,Pid,_B}])
  end. 
```

输出为：**4> trapexit:self_kill_exit()。

subinmain:<0.36.0> 输出：{'EXIT',<0.36.0>,killed}**

并且不符合 Trapped Result: ** exception exit: kill 之前所说的。哪个是对的？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:31:07.707

`self`作为参数传递给的函数体中的调用`spawn_link`不会返回进程调用`spawn_link`。它正在新生成的进程中进行评估，因此它将返回其 pid。进行以下更改。

```
-module(trapexit).
-compile(export_all).
self_kill_exit()->
  process_flag(trap_exit,true),
  Self=self(),
  Pid=spawn_link(fun()->timer:sleep(3000),exit(Self,kill)  end),
  receive
    {_A,Pid,_B}->io:format("subinmain:~p output:~p~n",[Pid,{_A,Pid,_B}])
  end. 
```

现在它应该按预期工作。

```
10> c(trapexit).            
{ok,trapexit}
11> trapexit:self_kill_exit().
** exception exit: killed 
```

书是对的。诱捕`exit(self(), kill)`是不可能的。

# image - 从 struts2 应用程序发送“带有图像的电子邮件”。如何在 Action 类中访问图像位置

> ID：13134079
> 
> 赞同：1
> 
> 时间：2012-10-30T06:54:56.973
> 
> 标签：image, url, struts2, jakarta-mail

我在一个 Struts 应用程序上！

我在应用程序根目录的文件夹中有一张图片。IE，

```
ApplicationName--> webContent --> images-->logo.jpg 
```

我正在使用 javamail 发送邮件。我想使用图像来创建电子邮件的正文。

我正在使用 multipart 能够在没有图像 Image 的情况下完美发送邮件。但是不知道如何实现邮件正文中带有logo.jpg图片的邮件~

请有人指定如何：

1.  从操作访问图像以将其附加到电子邮件中。

请有人帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:45:12.007

这很简单：

这样做：

```
HttpServletRequest request = (HttpServletRequest) ActionContext.getContext().get(ServletActionContext.HTTP_REQUEST);
String imgPath = request.getSession().getServletContext().getRealPath("/path/to/your/img");
File img = new File(imgPath); 
```

然后你得到img文件。`/path/to/your/img`应该是你的 img 的相对路径。在这种情况下，它应该是`/images/logo.jpg`

# visual-studio - 数线。适用于 8 的 Visual Studio

> ID：13134080
> 
> 赞同：0
> 
> 时间：2012-10-30T06:54:58.370
> 
> 标签：visual-studio

在 Visual Studio for Windows 8 应用程序的代码编辑器中，如何启用行号？

例如，而不是

```
this
is
my
code 
```

到

```
1\. this
2\. is 
3\. my
4\. code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:08:30.257

1.在菜单栏上，选择工具、选项。

2.在选项窗口左侧的类别列表中，展开文本编辑器节点。

3.展开 All Languages 子文件夹，然后选择 General 以全局设置此选项。

4.在显示部分，选中行号复选框。

[微软回答](http://msdn.microsoft.com/en-us/library/ms165340.aspx)

# php - drupal - 删除图像、内容和标签文本

> ID：13134082
> 
> 赞同：2
> 
> 时间：2012-10-30T06:55:05.993
> 
> 标签：php, drupal, drupal-7, drupal-taxonomy

我刚刚注意到，在查看单个节点时，它似乎是`Image:`，`Content:`并且`Tags:`作为渲染函数的结果嵌入。有谁知道如何删除这些？（谷歌什么都没有，就像大多数 Drupal 问题一样）

问候

编辑：

假设我有一个将分类节点加载到轮播中的页面。如果我查看该页面，它看起来与预期的差不多。如果我单独查看每个节点 /taxonomy/node 它显示为：

图片：[图片] 内容：[内容] 标签：[标签列表]

如果不是像当前那样加载节点而不是上一页，我也是这样做的：

```
$ids = taxonomy_select_nodes(array(1));
$professional_nodes = node_load_multiple($ids);
foreach( $professional_nodes as $view ) {
    echo '<li>' . drupal_render(node_view($view) ) . '</li>';
} 
```

我得到同样的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:49:08.380

有几种方法可以做到这一点，这是一个快速的解决方案

尝试打印节点的预告片版本，并从`manage display`页面自定义预告片的外观`admin/structure/types/manage/page/display/teaser`。

您只需添加`teaser`第二个参数`node_view`即可打印预告片版本。

```
$ids = taxonomy_select_nodes(array(1));
$professional_nodes = node_load_multiple($ids);
foreach( $professional_nodes as $view ) {
    echo '<li>' . drupal_render(node_view($view, "teaser")) . '</li>'; // the edited line.
} 
```

希望这行得通……穆罕默德。

# afnetworking - 如何为不同的请求方法创建具有不同参数编码的 AFHttpClient？

> ID：13134093
> 
> 赞同：1
> 
> 时间：2012-10-30T06:55:56.910
> 
> 标签：afnetworking

我是 AFNetworking 的新手，但到目前为止喜欢抽象。

我正在创建 AFHttpClient 的子类，我想将参数编码设置为 JSON，但仅适用于 POST 请求，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:10:05.597

您可以通过覆盖`requestWithMethod:path:parameters:`并根据指定设置参数编码来做到这一点`method`。由于客户端创建的所有请求都通过此方法，因此它将按预期工作。

# iphone - iPhone 中的 twitter 和 facebook 等模态弹出视图

> ID：13134094
> 
> 赞同：1
> 
> 时间：2012-10-30T06:55:58.610
> 
> 标签：iphone

我想创建一个模式弹出视图，其中包含一些 UIControls，如按钮、图像、文本字段等。

这是我想要的一个例子：

![在此处输入图像描述](../Images/bf7c07dc5763bbe440f00c2a063a2cf2.png)

我应该使用什么？UIAlertView 或 UIView 或其他什么...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:22:19.640

你尝试使用 REComposeViewController [https://github.com/romaonthego/REComposeViewController](https://github.com/romaonthego/REComposeViewController)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:58:13.367

您应该使用`UIView`并自定义它。:) `UIAlertView`具有默认外观。

# ant - 如何使用 ant 编译 NSIS 脚本？

> ID：13134096
> 
> 赞同：0
> 
> 时间：2012-10-30T06:56:00.500
> 
> 标签：ant, nsis

我已经为我的java项目创建了NSIS脚本。我已经在我的eclipse中安装了nsis插件。使用插件我已经创建了nsi文件。现在我想编译nsi文件。我尝试在eclipse中使用Ant。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="test" default="nsis" basedir=".">
    <property name="build.path" value="build"/> 
        <property name="deploy.dir" value="/opt/test"></property>
    <path id="library.classpath">
            <fileset dir="lib">
                <include name="nsisant-1.2.jar"/>
            </fileset>
        </path>
    <target name="nsis" description="compile nsis script">
        <mkdir dir="${build.path}/nsis"/>
        <nsis script="setup.nsi">
            <classpath refid="library.classpath"/>
        </nsis>
    </target>
    </project> 
```

但它会引发以下错误。

```
 BUILD FAILED
    build.xml:12: Problem: failed to create task or type nsis
    Cause: The name is undefined.
    Action: Check the spelling.
    Action: Check that any custom tasks/types have been declared.
    Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

我不知道为什么会这样？？如何使用ant编译nsi文件？或者有没有其他方法可以在不使用 ant 的情况下进行编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:29:54.127

使用专门的`nsis`任务似乎是最好的方法，但也许不是最简单的。我只是`makensis.exe`使用这样的语法执行：

```
<exec executable="C:\Program_Files\NSIS\makensis.exe" failonerror="true" >
  <!-- providing some nsis definitions -->
  <arg value="/DPROJECT_NAME=${ant.project.name}"/>
  <!-- passing the script -->
  <arg value="${basedir}\raport.nsi"/>
</exec> 
```

至于你的第二个问题：是的，你可以在没有 ant 的情况下编译 nsis 脚本。例如：

```
C:\Program_Files\NSIS\makensis.exe /DPROJECT_NAME=this-project my-script.nsi 
```

在 Linux 上，你也应该有`makensis`某个地方。

这些`PROJECT_NAME`东西是我的定制。在最简单的情况下，您不提供任何定义，省略该部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:12:10.850

您是否使用[Nsis Ant Sourceforge 项目](http://danielreese.com/nsis-ant/)中的 NSIS Ant 任务？安装后，您可以将其用作

```
<taskdef name="nsis" classname="net.sf.nsisant.Task">
    <classpath location="nsisant-{version}.jar">
</taskdef> 
```

# ios - 以编程方式访问配置 iPhone 的电子邮件 ID

> ID：13134097
> 
> 赞同：2
> 
> 时间：2012-10-30T06:56:02.800
> 
> 标签：ios

> **可能重复：**
> [如何以编程方式确定 iOS 中的默认电子邮件帐户/地址？](https://stackoverflow.com/questions/12646018/how-to-programmatically-determine-default-email-account-address-in-ios)

是否有任何公共 API 以编程方式获取用户 iPhone 上配置的所有电子邮件 ID，如 gmail、yahoo、hotmail 等？我不想让用户在注册时在我的应用程序的文本字段中填写电子邮件 ID，而是用户可以从下拉列表中选择他的电子邮件。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:02:07.840

没有公共 API 可以获取用户的电子邮件地址或有关他们设置的任何电子邮件帐户的任何信息。您必须询问用户。

# opengl - OpenGL - 旋转后翻译

> ID：13134107
> 
> 赞同：1
> 
> 时间：2012-10-30T06:56:49.030
> 
> 标签：opengl, glrotate

我试图在原点旋转对象后在世界空间中平移对象。问题是，当我在原点旋转一个对象后，它的局部坐标系也会旋转，所以它的轴不再与世界坐标轴平行。因此，例如，如果我需要在围绕 y 轴旋转对象后将对象平移到点 (3, 0, 5)，我将无法执行此操作，因为对象的局部坐标系不是与世界坐标系相同。例如：

```
glRotatef(45, 0.0, 1.0, 0.0);
glTranslatef(3.0, 0.0, 5.0);
glutSolidCube(1);               // This won't be at (3,0,5) like how I need it 
```

我该如何克服呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:59:50.383

这与其说是 OpenGL 的属性，不如说是矩阵数学。

当您将顶点发送到 OpenGL 固定函数管道时，它会被矩阵模型视图和投影转换，即

```
 v_eye = MODELVIEW · v
v_clip = PROJECTION · v_eye 
```

现在模型视图矩阵由所有这些子变换组成。而且它们是不可交换的，即操作顺序很重要。例如

```
MODELVIEW = T_0 · R_0 · R_1 · T_1 · S_1 · R_2 
```

现在您可以将上面的 v_eye 计算重写为

```
v_eye = T_0 · ( R_0 · ( R_1 · (T_1 · (S_1 · (R_2 · v))))) 
```

如您所见，v 从右到左乘以（就像矩阵一样）到您组成模型视图的矩阵堆栈上。

然而，在 OpenGL 中发生的事情是，计算一个矩阵“MODELVIEW”，并且 v 仅使用 4×4 数字方案进行转换。OpenGL 不会“重新执行”所有矩阵乘法步骤。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T07:05:29.757

opengl 语句以相反的顺序在 GPU 上运行。

所以先翻译再旋转。

# android - 无法在 android 上创建 Spotify 会话

> ID：13134115
> 
> 赞同：0
> 
> 时间：2012-10-30T06:57:34.210
> 
> 标签：android, android-ndk, java-native-interface, spotify

我正在尝试在 android 上运行提供的 Spotify 存根示例，但本机代码在尝试创建会话时似乎“崩溃”。这是我的代码的样子。

本机代码：

```
JNIEXPORT int JNICALL
Java_com_test_spotify_SpotifyActivity_spotifyInit( JNIEnv*  env, jobject  this,jstring     username, jstring     password,jstring cache,jstring tracefile)
{

const char* name = (*env)->GetStringUTFChars(env, username, NULL);
const char* pwd = (*env)->GetStringUTFChars(env, password, NULL);
const char* cache_location = (*env)->GetStringUTFChars(env, cache, NULL);
const char* trace_file = (*env)->GetStringUTFChars(env, tracefile, NULL);

if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "User name: %s", name);
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "Password: %s", pwd);
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "Cache %s", cache_location);
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "Trace file %s", trace_file);

return spotify_init(name,pwd,cache_location,trace_file);
}

int spotify_init(const char *username,const char *password,const char* cache_location,const char* trace_file)
{
int next_timeout = 0;
pthread_mutex_init(&notify_mutex, NULL);
pthread_cond_init(&notify_cond, NULL);

sp_session_config config;
sp_error error;
sp_session *session;

config.api_version = SPOTIFY_API_VERSION;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "SPOTIFY_API_VERSION: %d",config.api_version);

config.cache_location = cache_location;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "config.cache_location: %s",config.cache_location);

config.settings_location = cache_location;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "config.settings_location: %s",config.settings_location);

config.tracefile = trace_file;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "config.tracefile: %s",config.tracefile);

config.application_key = g_appkey;

config.application_key_size = g_appkey_size;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "g_appkey_size: %d",config.application_key_size);

config.user_agent = USER_AGENT;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "USER_AGENT: %s",config.user_agent);

// Register the callbacks.
config.callbacks = &callbacks;
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "defined callbacks");
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "creating session...");
error = sp_session_create(&config, &session);

if (SP_ERROR_OK != error) {
    fprintf(stderr, "failed to create session: %s\n",
                    sp_error_message(error));
    if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "error code: %d",error);
    return 2;
}
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "Session created!");

// Login using the credentials given on the command line.
error = sp_session_login(session, username, password, 0,NULL);

if (SP_ERROR_OK != error) {
    fprintf(stderr, "failed to login: %s\n",
                    sp_error_message(error));
    if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "error code: %d",error);
    return 3;
}
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotifyInit", "User is logged in!");

g_session = session;
//session has been created

pthread_mutex_lock(&notify_mutex);
    for (;;) {
        if (next_timeout == 0) {
            while(!notify_events)
                pthread_cond_wait(&notify_cond, &notify_mutex);
        } else {
            struct timespec ts;

    #if _POSIX_TIMERS > 0
            clock_gettime(CLOCK_REALTIME, &ts);
    #else
            struct timeval tv;
            gettimeofday(&tv, NULL);
            TIMEVAL_TO_TIMESPEC(&tv, &ts);
    #endif

            ts.tv_sec += next_timeout / 1000;
            ts.tv_nsec += (next_timeout % 1000) * 1000000;

            while(!notify_events) {
                if(pthread_cond_timedwait(&notify_cond, &notify_mutex, &ts))
                    break;
            }
        }

        // Process libspotify events
        notify_events = 0;
        pthread_mutex_unlock(&notify_mutex);

        do {
            sp_session_process_events(g_session, &next_timeout);
        } while (next_timeout == 0);

        pthread_mutex_lock(&notify_mutex);
    }
    return 0;
} 
```

安卓活动：

```
public class SpotifyActivity extends Activity {
EditText logText;

static {
System.loadLibrary("spotify");
System.loadLibrary("spotifystub");
}

public native int spotifyInit(String username, String password, String cacheLocation, String traceFile);

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
logText = (EditText) findViewById(R.id.editTextLog);

String cache = File.separator + "data" + File.separator + "data" + File.separator + "com.test.spotify" + File.separator + getCacheDir().getName();//set to empty string to disable cache
String traceFile = cache + File.separator + "trace_file.txt";

try {
    File dir = new File(cache);
    if (!dir.exists()) {
    dir.mkdir();
    }
    File f = new File(traceFile);
    if (!f.exists()) {
    Log.w(getClass().getSimpleName(), "trace file does not exist, creating...");
    f.createNewFile();
    }
    int response = spotifyInit("test@mail.com", "testpwd", cache, traceFile);
    if (response == 0) {
    log("Session created!, code: " + response);
    } else {
    log("Something went wrong!, code: " + response);
    }
} catch (Exception e) {
    e.printStackTrace();
}

}

private void log(String logString) {
logText.append(logString);
logText.append("\n");
}
} 
```

所以当我运行应用程序时，这是我得到的 logcat 输出，然后是崩溃

```
10-30 09:27:42.390: INFO/spotifyInit(552): User name: test@mail.com
10-30 09:27:42.390: INFO/spotifyInit(552): Password: testpwd
10-30 09:27:42.390: INFO/spotifyInit(552): Cache /data/data/com.test.spotify/cache
10-30 09:27:42.390: INFO/spotifyInit(552): Trace file /data/data/com.test.spotify/cache/trace_file.txt
10-30 09:27:42.400: INFO/spotifyInit(552): SPOTIFY_API_VERSION: 12
10-30 09:27:42.400: INFO/spotifyInit(552): config.cache_location: /data/data/com.test.spotify/cache
10-30 09:27:42.400: INFO/spotifyInit(552): config.settings_location: /data/data/com.test.spotify/cache
10-30 09:27:42.400: INFO/spotifyInit(552): config.tracefile: /data/data/com.test.spotify/cache/trace_file.txt
10-30 09:27:42.400: INFO/spotifyInit(552): g_appkey_size: 321
10-30 09:27:42.400: INFO/spotifyInit(552): USER_AGENT: spotifydemo
10-30 09:27:42.400: INFO/spotifyInit(552): defined callbacks
10-30 09:27:42.400: INFO/spotifyInit(552): creating session...
10-30 09:27:42.520: INFO/DEBUG(28): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
10-30 09:27:42.520: INFO/DEBUG(28): Build fingerprint: 'generic/sdk/generic/:2.1-update1/ECLAIR/35983:eng/test-keys'
10-30 09:27:42.520: INFO/DEBUG(28): pid: 552, tid: 552  >>> com.test.spotify <<<
10-30 09:27:42.520: INFO/DEBUG(28): signal 11 (SIGSEGV), fault addr 000000a9
10-30 09:27:42.520: INFO/DEBUG(28):  r0 0000000b  r1 80000000  r2 80808080  r3 00000073
10-30 09:27:42.520: INFO/DEBUG(28):  r4 bec56894  r5 80dd9740  r6 000000a9  r7 bec566c8
10-30 09:27:42.520: INFO/DEBUG(28):  r8 00118638  r9 bec56888  10 001239e0  fp 00000000
10-30 09:27:42.520: INFO/DEBUG(28):  ip 006f6d65  sp bec566b8  lr 80d6b8bc  pc 80d6b8dc  cpsr 20000010
10-30 09:27:42.622: INFO/DEBUG(28):          #00  pc 0016b8dc  /data/data/com.test.spotify/lib/libspotify.so
10-30 09:27:42.622: INFO/DEBUG(28):          #01  lr 80d6b8bc  /data/data/com.test.spotify/lib/libspotify.so
10-30 09:27:42.622: INFO/DEBUG(28): code around lr:
10-30 09:27:42.622: INFO/DEBUG(28): 80d6b8ac e3560000 0a0000fd e1a00006 ebfaa9c2 
10-30 09:27:42.622: INFO/DEBUG(28): 80d6b8bc e3500c01 8a0000f9 e5d63000 e3530000 
10-30 09:27:42.622: INFO/DEBUG(28): 80d6b8cc 0a0000f6 e5946024 e3560000 0a00000d 
10-30 09:27:42.622: INFO/DEBUG(28): stack:
10-30 09:27:42.630: INFO/DEBUG(28):     bec56678  c2e19b5e  
10-30 09:27:42.630: INFO/DEBUG(28):     bec5667c  7e587492  
10-30 09:27:42.630: INFO/DEBUG(28):     bec56680  4a7d74f0  
10-30 09:27:42.630: INFO/DEBUG(28):     bec56684  57b1fb47  
10-30 09:27:42.630: INFO/DEBUG(28):     bec56688  1c3e3207  
10-30 09:27:42.630: INFO/DEBUG(28):     bec5668c  e0fcf49a  
10-30 09:27:42.630: INFO/DEBUG(28):     bec56690  47ff6b89  
10-30 09:27:42.630: INFO/DEBUG(28):     bec56694  24bc6c79  
10-30 09:27:42.630: INFO/DEBUG(28):     bec56698  bbe6e9ce  
10-30 09:27:42.641: INFO/DEBUG(28):     bec5669c  dc9e8379  
10-30 09:27:42.641: INFO/DEBUG(28):     bec566a0  58221fd4  
10-30 09:27:42.641: INFO/DEBUG(28):     bec566a4  d3460398  
10-30 09:27:42.641: INFO/DEBUG(28):     bec566a8  bec56894  [stack]
10-30 09:27:42.641: INFO/DEBUG(28):     bec566ac  80dd9740  /data/data/com.test.spotify/lib/libspotify.so
10-30 09:27:42.641: INFO/DEBUG(28):     bec566b0  df002777  
10-30 09:27:42.641: INFO/DEBUG(28):     bec566b4  e3a070ad  
10-30 09:27:42.641: INFO/DEBUG(28): #00 bec566b8  00000007  
10-30 09:27:42.641: INFO/DEBUG(28):     bec566bc  0000098c  
10-30 09:27:42.641: INFO/DEBUG(28):     bec566c0  4003c290  /dev/ashmem/mspace/dalvik-heap/zygote/0 (deleted)
10-30 09:27:42.641: INFO/DEBUG(28):     bec566c4  bec56664  [stack]
10-30 09:27:42.650: INFO/DEBUG(28):     bec566c8  7362696c  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566cc  69746f70  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566d0  74207966  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566d4  65636172  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566d8  6f726620  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566dc  3231206d  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566e0  352e312e  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566e4  38672e31  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566e8  32396336  
10-30 09:27:42.650: INFO/DEBUG(28):     bec566ec  20333462  
10-30 09:27:42.660: INFO/DEBUG(28):     bec566f0  656c6552  
10-30 09:27:42.660: INFO/DEBUG(28):     bec566f4  20657361  
10-30 09:27:42.660: INFO/DEBUG(28):     bec566f8  72646e41  
10-30 09:27:42.660: INFO/DEBUG(28):     bec566fc  2d64696f 
```

查看 logcat 输出，代码运行到我们想要创建会话的位置 (error = sp_session_create(&config, &session);) ，然后它崩溃了。我花了几个小时试图让这个简单的例子工作，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:02:52.303

确保`sp_session_config`在使用之前将结构设置为 0。否则，你会得到一个充满垃圾的结构，这会导致崩溃。

例如：

```
sp_session_config config;
memset(&config, 0, sizeof(config)); 
```

对所有结构执行此操作是最佳实践。

# android - 创建新联系人时如何设置 RAW_CONTACT_ID

> ID：13134118
> 
> 赞同：4
> 
> 时间：2012-10-30T06:58:00.130
> 
> 标签：android

当我想创建一个新联系人时，我想我必须设置一个 RAW_CONTACT_ID。如果不是，这些代码如何表现良好。我对吗？如果不是，它怎么知道这些数据属于同一个联系人。如果是，如何设置 RAW_CONTACT_ID？也许问题可以这样说：我怎样才能获得不存在的新 RAW_CONTACT_ID？然后发布我的代码（我将 0 设置为 RAW_CONTACT_ID）：

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

    ops.add(ContentProviderOperation
            .newInsert(ContactsContract.RawContacts.CONTENT_URI)
            .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
            .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
            .build());

    // ------------------------------------------------------ Names
    if (displayName != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                        displayName).build());
    }

    // ------------------------------------------------------ Mobile Number
    if (mobileNumber != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER,
                        mobileNumber)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
                .build());
    }
    context.getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:31:36.300

您必须使用 int rawContactInsertIndex = ops.size() 如下。

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        int rawContactInsertIndex = ops.size();

        ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI).withValue(RawContacts.ACCOUNT_TYPE, null).withValue(RawContacts.ACCOUNT_NAME, null).build());

        ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI).withValueBackReference(Data.RAW_CONTACT_ID, rawContactInsertIndex).withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
                .withValue(StructuredName.DISPLAY_NAME, personalVcard.getFirstName()).build()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:20:20.697

我想我在 JB 上发现了一些奇怪的问题，其代码在以前版本的 android 上运行良好。当您要求创建共享相同基本名称的联系人时，创建过程并没有按照应有的方式进行，并且 withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0) 返回的原始联系人 ID 似乎相同。

例如，尝试创建 Contact1、Contact2 和 Contact3：奇怪的东西开始了。您很可能看不到任何联系人，但尝试使用 API 删除联系人将导致告诉您该联系人确实存在。

我不确定这是否是破坏我的果冻豆平台的结果，或者它是否是 android 版本的常见问题。请注意，我指的是正在开发的平台。

有没有人看到这个，例如在 4.1.2 上？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T03:03:14.810

此代码块将使用手机号码保存联系人姓名。

```
private void saveContact() { 
  this.sessionpref.setPreference("Saved", "Done");
  ArrayList<ContentProviderOperation> ops = new ArrayList();
  ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
      .withValue("account_type", null).withValue("account_name", null).build()); 

  if (this.DisplayName != null) {
    ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
        .withValueBackReference("raw_contact_id", 0)
        .withValue("mimetype", "vnd.android.cursor.item/name")
        .withValue("data1", this.DisplayName)
        .build());
  } else {
    Toast.makeText(getApplicationContext(), "Contact Exist", 3000).show(); 
  } 

  if (this.MobileNumber != null) {
    ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
        .withValueBackReference("raw_contact_id", 0)
        .withValue("mimetype", "vnd.android.cursor.item/phone_v2")
        .withValue("data1", this.MobileNumber).withValue("data2", Integer.valueOf(2))
        .build()); 
  } else { 
    Toast.makeText(getApplicationContext(), "Contact Exist", 3000).show(); 
  } 
  try { 
    getContentResolver().applyBatch("com.android.contacts", ops); 
  } catch (Exception e) { 
    e.printStackTrace(); 
  }
} 
```

# java - 从jsp向Javascript传递参数

> ID：13134121
> 
> 赞同：0
> 
> 时间：2012-10-30T06:58:11.850
> 
> 标签：java, javascript, jsp

我有一个 javascript 函数，我需要在单击删除按钮时调用它 -

JavaScript：

```
function test(var1) {
    alert(var1);
} 
```

JSP 代码（`logs`长度`ArrayList`为 10）：

```
<table>
<%
for(int i=0; i<len; i++)
{
%>
    <tr>
    <td><%out.println(logs[i].getItemName());%></td>
    <td><%out.println(logs[i].getItemDesc()); %></td>
    <td> <input class="submit" type="submit" value="Delete" onclick="test(<%logs[i].getItemName();%>);"/></td>
    </tr>

<%
}
%>
</table> 
```

这会将输出打印为 -

```
Name1        Description1       Delete_Button

Name2        Description2       Delete_Button

.

.

Name10        Description10     Delete_Button 
```

当我单击相应行的删除按钮时，我不知道如何将正确的 itemname 值发送到 JavaScript。目前，当我单击任何删除按钮时，我在 JavaScript 警报中得到未定义的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:59:44.520

```
onclick='test("<%=logs[i].getItemName();%>");' 
```

# mysql - 根据时间关联两个 MySQL 表

> ID：13134123
> 
> 赞同：0
> 
> 时间：2012-10-30T06:58:17.920
> 
> 标签：mysql, group-by

我有以下表格

```
Actions: actionID, time, type
States: stateID, time, type 
```

我需要找出执行操作时的当前状态。

所以我从类似的东西开始

```
SELECT actions.actionID, states.stateID
FROM actions, states
WHERE states.time < actions.time 
```

这给了我一个结果表，其中包含在给定操作发生之前存在的所有状态。但我只需要动作之前的最后一个状态。

所以我需要某种基于 max(states.stateID) 的 GROUP BY 但老实说我不知道​​如何解决这个问题！

**编辑**

因此，如果操作表包含以下内容：

```
actionID  time                   type
1         '2012-10-30 02:05:00'  100
2         '2012-10-30 02:11:00'  200 
```

状态表包含以下内容：

```
stateID  time                   type
11       '2012-10-30 02:00:00'  A
12       '2012-10-30 02:10:00'  B
13       '2012-10-30 02:15:00'  A 
```

我想要以下结果：

```
actionID  stateID
1         11          // Because before action 1, the state that prevailed was 11
2         12          // Because before action 2, the state that prevailed was 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:07:35.503

试试这个：

```
select t.actionID,t.stateID,a.type action_type,s.type state_type  from 

(SELECT actions.actionID,max(states.stateID) stateID
FROM actions, states
WHERE states.time < actions.time
group by actions.actionID)as t

join 

actions a on t.actionID=a.actionID

join

states s on t.stateID=s.stateID 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/75162/26)

# java - 字符串的第一个字符大写

> ID：13134127
> 
> 赞同：-5
> 
> 时间：2012-10-30T06:58:37.167
> 
> 标签：java

> **可能重复：**
> [字符串替换方法不起作用](https://stackoverflow.com/questions/13133803/string-replace-method-is-not-working)

```
 public static String capitalise(String str)
    {
     if (str != null || !"".equals(str))
      {
       char chr=str.charAt(0);
       String check= Character.toString(chr);
       String check1= check.toUpperCase();
       char chr1=check1.charAt(0);
       str=str.replace(chr, chr1);
       return str;

     }
     else
     {
         System.out.println("Not a valid String");
     }
     return str;
 } 
```

我只想将第一个字符大写，但它将第一个字符大写，例如在大写字符串 = shashank 变为 ShaShank 之后...我应该为它做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:01:08.323

`str.replace(chr, chr1);`替换该字符串中*所有*出现的字符。在您的情况下，它将全部更改`s`为`S`。

用户`substring`将大写的第一个字符与字符串的其余部分连接起来。

* * *

这是您评论中附加问题的简单解决方案。它将在单个（！）空格后大写每个字符。您可能希望增强它以允许多个空格或多个白字符。

```
public static void main(final String[] args) {

    String s = "some words";
    StringBuilder result = new StringBuilder();
    boolean capitalizeNextLetter = true;
    for (char c : s.toCharArray()) {
        if (capitalizeNextLetter) {
            result.append(Character.toUpperCase(c));
            capitalizeNextLetter = false;
        } else {
            if (c == ' ') {
                capitalizeNextLetter = true;
            }
            result.append(c);
        }
    }

    System.out.println(result.toString());

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:03:05.737

怎么样：

```
public static String capitalize(String str) {
    return str.substring(0, 1).toUpperCase() + str.substring(1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:05:59.103

为什么不简单地跟随

```
str= Character.toUpperCase(str.charAt(0)) + str.substring(1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T07:11:35.787

尝试这个

```
 public static String capitalise(String str)
    {
      if (str != null || !"".equals(str))
      {
        char chr = str.charAt(0);           
        String capsString  = Character.toString(chr).toUpperCase() + str.substring(1);
        return capsString;
      }
      else
      {
        System.out.println("Not a valid String");
      }
    return str;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T07:14:19.030

在您的代码中，替换方法将全部替换`'s'`为`'S'`.
因为 char 包含`'s'`;
试试这个答案

```
public static String capitalise(String str)
{
 String test = str.substring(0,1);
 test=test.toUpperCase();
 System.out.println(test);
 String new1= test+str.substring(1,str.length());       
 return new1;    
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T07:05:15.993

您可以使用以下。

```
char chr1=check1.charAt(0);
str = chr1 + str.substring(1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T07:06:17.250

使用**ReplaceFirst**方法。

```
str=str.replaceFirst(check, chreck1); 
```

[替换优先](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceFirst)

此外，您应该将您的`if`条件更改为以下内容：

```
if (str != null && !"".equals(str)) 
```

这样就不会处理空字符串。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T07:06:56.187

试试这个。只需更改一行。

```
public static String capitalise(String str)
{
 if (str != null || !"".equals(str))
  {
   char chr=str.charAt(0);
   String check= Character.toString(chr);
   String check1= check.toUpperCase();       
   str=check1+str.substring(1);
   return str;
 }
 else
 {
     System.out.println("Not a valid String");
 }
 return str;
} 
```

# c# - 将 ConcurrentBag 设为可通知是否安全？

> ID：13134141
> 
> 赞同：1
> 
> 时间：2012-10-30T06:59:46.347
> 
> 标签：c#, concurrent-programming

我需要将 ConcurrentBag 设置为可通知的。我需要知道它安全吗？该类的代码是

```
public class NotifiableConcurrentBag<T> : ConcurrentBag<T>, INotifyCollectionChanged where T : class
{
    public NotifiableConcurrentBag()
    {
        dispatcher = Dispatcher.CurrentDispatcher;
    }
    private Dispatcher dispatcher;
    public event NotifyCollectionChangedEventHandler CollectionChanged;
    public new void Add(T item)
    {
        base.Add(item);
        if (CollectionChanged != null)
        {
            if (Thread.CurrentThread == dispatcher.Thread)
                CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, item));
            else
                dispatcher.BeginInvoke((Action)(() =>
                {
                    CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, item));
                }
                ));
        }

    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:21:50.350

基本上不，这种方法不安全：抛开线程安全问题（我没有评估它的线程安全），它留下了许多可能性，可以在不实际调用通知的情况下将项目添加到集合中。考虑以下更简单的实现：

```
public class NotifiableConcurrentBag<T> : ConcurrentBag<T> where T : class {
    public int CountOfAdditions { get; set; }

    public new void Add(T item) {
        base.Add(item);
        Console.WriteLine("Overloaded!");
        CountOfAdditions++;
    }   
} 
```

现在有人编写了一个棘手的代码，它不仅将这个集合用作一个`NotifiableConcurrentBag`，而且还简单地`ConcurrentBag`（继承），甚至更糟糕的是`IProducerConsumerCollection`（通过继承实现`ConcurrentBag`）：

```
NotifiableConcurrentBag<string> s = new NotifiableConcurrentBag<string>();
Console.WriteLine("CHANGE --->");
s.Add("s");

ConcurrentBag<string> o = (ConcurrentBag<string>) s;
Console.WriteLine("CHANGE --->");
o.Add("s");

IProducerConsumerCollection<string> col = (IProducerConsumerCollection<string>) s;
Console.WriteLine("CHANGE --->");
col.TryAdd("s");

Console.WriteLine("Overloaded called {0} times", s.CountOfAdditions);
Console.WriteLine("In fact collection has {0} items", s.Count); 
```

该程序的输出如下：

```
CHANGE --->
Overloaded!
CHANGE --->
CHANGE --->
Overloaded called 1 times
In fact collection has 3 items 
```

这意味着您的实现将留下两个添加项而没有任何通知。为了实现真正安全，您可能需要包装 ConcurrentBag 而不是继承它，并以始终调用通知的方式实现所需的接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:58:17.673

您正在使用方法隐藏：`public new void Add(T item) { ... }`。因此，当客户端代码获取对实例的引用时，`NotifiableConcurrentBag<T>`将调用(for ) 方法`ConcurrentBag<T>`的错误版本。`Add()``ConcurrentBag<T>`

我想建议你提取`IConcurrentBag<T>`接口。

```
public interface IConcurrentBag<T> : IProducerConsumerCollection<T>
{
    void Add(T item);
    bool TryPeek(out T result);
    bool IsEmpty { get; }
} 
```

`INotifiableConcurrentBag<T>`然后引入实际支持接口的新扩展`INotifyCollectionChanged`接口：

```
public interface INotifiableConcurrentBag<T> : IConcurrentBag<T>, INotifyCollectionChanged 
{
} 
```

之后只需实现`NotifiableConcurrentBag<T>`类（更喜欢组合而不是继承）。插入通知逻辑而不是 TODO 标记。

```
public class NotifiableConcurrentBag<T> : INotifiableConcurrentBag<T>
{
    private readonly ConcurrentBag<T> _concurrentBag;

    public NotifiableConcurrentBag()
    {
        _concurrentBag = new ConcurrentBag<T>();
    }

    public NotifiableConcurrentBag(IEnumerable<T> collection)
    {
        _concurrentBag = new ConcurrentBag<T>(collection);
    }

    #region Implementation of IEnumerable

    /// <summary>
    /// Returns an enumerator that iterates through a collection.
    /// </summary>
    /// <returns>
    /// An <see cref="T:System.Collections.IEnumerator"/> object that can be used to iterate through the collection.
    /// </returns>
    /// <filterpriority>2</filterpriority>
    IEnumerator IEnumerable.GetEnumerator()
    {
        lock (((ICollection)this).SyncRoot)
        {
            return ((IEnumerable)_concurrentBag).GetEnumerator();
        }
    }

    #endregion

    #region Implementation of IEnumerable<T>

    /// <summary>
    /// Returns an enumerator that iterates through the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </summary>
    /// <returns>
    /// An enumerator for the contents of the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </returns>
    IEnumerator<T> IEnumerable<T>.GetEnumerator()
    {
        lock (((ICollection)this).SyncRoot)
        {
            return ((IEnumerable<T>)_concurrentBag).GetEnumerator();
        }
    }

    #endregion

    #region Implementation of ICollection

    /// <summary>
    /// Copies the elements of the <see cref="T:System.Collections.ICollection"/> to an <see cref="T:System.Array"/>, starting at a particular <see cref="T:System.Array"/> index.
    /// </summary>
    /// <param name="array">The one-dimensional <see cref="T:System.Array"/> that is the destination of the elements copied from <see cref="T:System.Collections.ICollection"/>. The <see cref="T:System.Array"/> must have zero-based indexing. </param><param name="index">The zero-based index in <paramref name="array"/> at which copying begins. </param><exception cref="T:System.ArgumentNullException"><paramref name="array"/> is null. </exception><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index"/> is less than zero. </exception><exception cref="T:System.ArgumentException"><paramref name="array"/> is multidimensional.-or- The number of elements in the source <see cref="T:System.Collections.ICollection"/> is greater than the available space from <paramref name="index"/> to the end of the destination <paramref name="array"/>.-or-The type of the source <see cref="T:System.Collections.ICollection"/> cannot be cast automatically to the type of the destination <paramref name="array"/>.</exception><filterpriority>2</filterpriority>
    void ICollection.CopyTo(Array array, int index)
    {
        lock (((ICollection)this).SyncRoot)
        {
            ((ICollection)_concurrentBag).CopyTo(array, index);
        }
    }

    /// <summary>
    /// Gets the number of elements contained in the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </summary>
    /// <returns>
    /// The number of elements contained in the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </returns>
    int ICollection.Count
    {
        get
        {
            lock (((ICollection)this).SyncRoot)
            {
                return _concurrentBag.Count;
            }
        }
    }

    /// <summary>
    /// Gets an object that can be used to synchronize access to the <see cref="T:System.Collections.ICollection"/>.
    /// </summary>
    /// <returns>
    /// An object that can be used to synchronize access to the <see cref="T:System.Collections.ICollection"/>.
    /// </returns>
    /// <filterpriority>2</filterpriority>
    object ICollection.SyncRoot
    {
        get { return ((ICollection)_concurrentBag).SyncRoot; }
    }

    /// <summary>
    /// Gets a value indicating whether access to the <see cref="T:System.Collections.ICollection"/> is synchronized (thread safe).
    /// </summary>
    /// <returns>
    /// true if access to the <see cref="T:System.Collections.ICollection"/> is synchronized (thread safe); otherwise, false.
    /// </returns>
    /// <filterpriority>2</filterpriority>
    bool ICollection.IsSynchronized
    {
        get { return ((ICollection)_concurrentBag).IsSynchronized; }
    }

    #endregion

    #region Implementation of IConcurrentBag<T>

    /// <summary>
    /// Adds an object to the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </summary>
    /// <param name="item">The object to be added to the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>. The value can be a null reference (Nothing in Visual Basic) for reference types.</param>
    void IConcurrentBag<T>.Add(T item)
    {
        lock (((ICollection)this).SyncRoot)
        {
            _concurrentBag.Add(item);
            // TODO: Implement notification!
        }
    }

    /// <summary>
    /// Attempts to return an object from the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> without removing it.
    /// </summary>
    /// <returns>
    /// true if and object was returned successfully; otherwise, false.
    /// </returns>
    /// <param name="result">When this method returns, <paramref name="result"/> contains an object from the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> or the default value of <paramref name="T"/> if the operation failed.</param>
    bool IConcurrentBag<T>.TryPeek(out T result)
    {
        lock (((ICollection)this).SyncRoot)
        {
            return _concurrentBag.TryPeek(out result);
        }
    }

    /// <summary>
    /// Gets a value that indicates whether the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> is empty.
    /// </summary>
    /// <returns>
    /// true if the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> is empty; otherwise, false.
    /// </returns>
    bool IConcurrentBag<T>.IsEmpty
    {
        get
        {
            lock (((ICollection)this).SyncRoot)
            {
                return _concurrentBag.IsEmpty;
            }
        }
    }

    #endregion

    #region Implementation of IProducerConsumerCollection<T>

    /// <summary>
    /// Attempts to remove and return an object from the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </summary>
    /// <returns>
    /// true if an object was removed successfully; otherwise, false.
    /// </returns>
    /// <param name="result">When this method returns, <paramref name="result"/> contains the object removed from the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> or the default value of <paramref name="T"/> if the bag is empty.</param>
    bool IProducerConsumerCollection<T>.TryTake(out T result)
    {
        lock (((ICollection)this).SyncRoot)
        {
            bool takeResult = _concurrentBag.TryTake(out result);
            if (takeResult)
            {
                // TODO: Implement notification!
            }
            return takeResult;
        }
    }

    /// <summary>
    /// Copies the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> elements to an existing one-dimensional <see cref="T:System.Array"/>, starting at the specified array index.
    /// </summary>
    /// <param name="array">The one-dimensional <see cref="T:System.Array"/> that is the destination of the elements copied from the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>. The <see cref="T:System.Array"/> must have zero-based indexing.</param><param name="index">The zero-based index in <paramref name="array"/> at which copying begins.</param><exception cref="T:System.ArgumentNullException"><paramref name="array"/> is a null reference (Nothing in Visual Basic).</exception><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="index"/> is less than zero.</exception><exception cref="T:System.ArgumentException"><paramref name="index"/> is equal to or greater than the length of the <paramref name="array"/> -or- the number of elements in the source <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> is greater than the available space from <paramref name="index"/> to the end of the destination <paramref name="array"/>.</exception>
    void IProducerConsumerCollection<T>.CopyTo(T[] array, int index)
    {
        lock (((ICollection)this).SyncRoot)
        {
            _concurrentBag.CopyTo(array, index);
        }
    }

    /// <summary>
    /// Copies the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/> elements to a new array.
    /// </summary>
    /// <returns>
    /// A new array containing a snapshot of elements copied from the <see cref="T:System.Collections.Concurrent.ConcurrentBag`1"/>.
    /// </returns>
    T[] IProducerConsumerCollection<T>.ToArray()
    {
        lock (((ICollection)this).SyncRoot)
        {
            return _concurrentBag.ToArray();
        }
    }

    /// <summary>
    /// Attempts to add an object to the <see cref="T:System.Collections.Concurrent.IProducerConsumerCollection`1"/>.
    /// </summary>
    /// <returns>
    /// true if the object was added successfully; otherwise, false.
    /// </returns>
    /// <param name="item">The object to add to the <see cref="T:System.Collections.Concurrent.IProducerConsumerCollection`1"/>.</param><exception cref="T:System.ArgumentException">The <paramref name="item"/> was invalid for this collection.</exception>
    bool IProducerConsumerCollection<T>.TryAdd(T item)
    {
        lock (((ICollection)this).SyncRoot)
        {
            bool addResult = ((IProducerConsumerCollection<T>)_concurrentBag).TryAdd(item);
            if (addResult)
            {
                // TODO: Implement notification!
            }
            return addResult;
        }
    }

    #endregion

    #region Implementation of INotifyCollectionChanged

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    #endregion
} 
```

# backbone.js - 永远不会调用主干更改触发器

> ID：13134142
> 
> 赞同：0
> 
> 时间：2012-10-30T06:59:57.830
> 
> 标签：backbone.js, eventtrigger

我正在尝试一些backbone.js 示例，但无法使更改触发器起作用。“欢迎来到这个世界”警报按预期显示，但从未显示“将我的名字更改为”。使用 firefox 调试代码会得到相同的结果，第二个警报上的断点永远不会被命中。

有什么想法有什么问题吗？

这是我的代码：

main.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>hello-backbonejs</title>
</head>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

    <script src="model.js" type="text/javascript"></script>

</body>
</html> 
```

模型.js

```
Person = Backbone.Model.extend({
    defaults: {
        name: 'Fetus',
        age: 0
    },
    initialize: function(){
        alert("Welcome to this world");
        this.on("change:name", function(model){
            var name = model.get("name"); // 'Stewie Griffin'
            alert("Changed my name to " + name );
        });
    }
});

var person = new Person({ name: "Thomas", age: 67});
person.set({name: 'Stewie Griffin'}); // This triggers a change and will alert() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:43:21.390

为了获得正确版本的 js 库，我必须将 main.html 更改为此

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>hello-backbonejs</title>
</head>
<body>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>

    <script src="model.js" type="text/javascript"></script>

</body>
</html> 
```

# eclipse - 如何在 Ubuntu 中卸载 opencv？

> ID：13134151
> 
> 赞同：3
> 
> 时间：2012-10-30T07:00:49.590
> 
> 标签：eclipse, ubuntu, opencv, uninstallation, ubuntu-12.04

我有以下系统：

Linux 64 位 LTS 12.04

1.  我在系统上安装了多个 opencv 库。
2.  我想知道从系统中删除所有 opencv 库的过程。
3.  通过 Eclipse IDE 执行程序时遇到问题。

虽然我可以在尝试执行项目时构建项目，但它给出了以下错误：

```
OpenCV Error: Assertion failed (k == STD_VECTOR_MAT) in release, file /build/buildd    /opencv-2.3.1/modules/core/src/matrix.cpp, line 1364
terminate called after throwing an instance of 'cv::Exception'
what():  /build/buildd/opencv-2.3.1/modules/core/src/matrix.cpp:1364: error: (-215) k == STD_VECTOR_MAT in function release 
```

令人困惑的是我无法找到错误中指定的路径，即

```
/build/buildd/opencv-2.3.1/modules/core/src/matrix.cpp 
```

我可以使用命令行工具 gcc 和 pkg-config 编译相同的源代码。但是我无法通过 Eclipse IDE 做同样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-24T14:56:46.253

也可以从终端到opencv的“build”文件夹目录卸载，执行如下

```
make uninstall
cd ..
sudo rm -r build
sudo rm -r /usr/local/include/opencv2 /usr/local/include/opencv /usr/include/opencv /usr/include/opencv2 /usr/local/share/opencv /usr/local/share/OpenCV /usr/share/opencv /usr/share/OpenCV /usr/local/bin/opencv* /usr/local/lib/libopencv* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T17:46:57.507

我记得我前一阵子用这个命令来删除所有与opencv相关的东西。它是交互式的，可促使您删除文件。选择 y 或 n 取决于。慢慢来，小心

```
$> sudo find / -name "*opencv*" -exec rm -i {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T15:03:30.347

正确的方法`cd /path/to/cv/build`是`sudo make uninstall`。当然，您必须随身携带源代码

我尝试了 exec rm 的东西，但没有任何改变。仅供参考，`sudo apt-get remove libopencv-*`没有为我删除 openCV

# php - 如何在 PHP 中打印 PHP 文件内容？

> ID：13134155
> 
> 赞同：-3
> 
> 时间：2012-10-30T07:01:19.727
> 
> 标签：php

由于我是 PHP 新手，我想知道如何在 PHP 中打印文件内容？
实际上，我的项目由表单组成，从中选择要在报表上打印数据，但我希望表单上的打印按钮可以直接打印报表内容。有人可以帮忙吗？这是我的代码.. 我使用过 CSS、html 和 PHP，它有两个按钮查看和打印

```
<?php
       if ($_POST["submit"] == "View") {
?>      
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <head>
                <style type="text/css" media="all">
                    * {
                        margin:0px;
                        padding:0;
                    }
                    body {
                        margin:0px;
                        padding:0px;
                        font-family:Verdana, Arial, Helvetica, sans-serif;
                        font-size:12px;
                    }

                    span {
                        font-size:12px;
                    }

                    th, td {
                        width: 100mm;
                        height: 33.5mm;
                    }
                    table {
                        border-collapse:collapse;
                    }
                </style>
                <title>Hotel Label -  <?php echo $_SESSION["tourname"]; ?></title>
            </head>
            <body>
                <div style="margin:0px; padding:0; width:210mm; margin-top:12mm; margin-bottom:12mm; margin-left:0.5cm; margin-right:0cm; ">
<?php
        //echo $getno;
   /* } // View Tag Close
    else {

         ini_set("memory_limit", "50M");
         ob_start();*/

?>
            <style type="text/css" media="all">
                <!--
                body {
                    margin:0px;
                    font-family:Verdana, Arial, helvetica, sans-serif;
                    font-size:12px;
                }

                span {
                    font-size:12px;
                }

                td {
                    width: 100mm;
                    max-width: 100mm;
                    height: 33.5mm;
                    max-height:33.5mm;
                    top:0mm;
                }
                table {
                    border-collapse:collapse;
                }
                -->
            </style>
            <page backtop="13mm" backbottom="1mm" backleft="5mm" backright="5mm" style="font-size: 10px; font-family: Verdana;">
<?php

?>
                <?php

                $ctr16 = 0;
                $ctr16_2 = 0;
                $nctr = 0;
                $ctr = 0;
                $mctr = 0;
                $lblctr = 0;
                while ($lbl = mysql_fetch_assoc($get)) {
                    $ctr16++;
                    $ctr16_2++;
                    $nctr++;
                    $ctr++;
                    $lblctr++;
                    $getno--;

                    if ($ctr == 1) {
                        echo "<table border=\"0\" align=\"left\" style =\"width: 210mm;\">";
                        echo "\n <tr> \n ";
                        echo "\n <tr> \n ";
                        echo "\n <td style=\"width: 100mm; max-width: 100mm; height:33.5mm; padding-left:1mm;\" valign=\"top\"> \n";

                        if ($lblctr > 16) {
                         echo "<br>";
                         echo "<br>";
                        $lblctr = 1;
                    }

                    if ($ctr16 > 64) {
                        echo "<br>";
                        echo "<br>";
                        $ctr16 = 1;
                    }

                    }
                    else {
                        echo "\n <td style=\"width: 100mm; max-width: 100mm; height:33.5mm; padding-left:15mm;\" valign=\"top\"> \n";
                        if ($nctr > 16) {
                         echo "<br>";
                         echo "<br>";
                         $nctr = 1;
                    }
                    if ($ctr16_2 > 64) {
                        echo "<br>";
                        echo "<br>";
                        $ctr16_2 = 1;
                    }

                    }
                    echo "<br />". "<span><font size='3px'><b>$lbl[hotelname]</b></font>";
// echo "<font size='2px'>$lbl[hotelname]";

echo "<br />"."<br />"."<font size='2px'>Haji No.-$lbl[hajino]</font>";
echo "<br />"."$lbl[suffix] $lbl[surname] $lbl[name]$lbl[midname] <br />";

echo "<br />"."<font size='2px'><b>Room No - $lbl[roomno] &nbsp;&nbsp;&nbsp; Bus No - $lbl[busname]</font></b>";
echo "<br />";

echo "<br />";
echo "<br />";
echo "</span> ";

                   // echo "<br />";
                    echo "</td>";
                    if ($ctr == 2 || $getno == 0) {
                    echo '<br />';
                    $ctr = 0;
                    echo "</table>";

                    }
                }
                mysql_free_result($get);
                ?>

            </div>
        </body>
    </html>
  <?php

 } else($_POST["submit"]== "Print"){

     $filecontents = file_get_contents("hotel_label_print.php");
     print $filecontents;
 } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:03:28.407

您可以使用`file_get_contents()` （[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)）

```
<?php
$homepage = file_get_contents('filename.txt');
echo $homepage;
?> 
```

# php - 文件上传未定义索引

> ID：13134158
> 
> 赞同：-2
> 
> 时间：2012-10-30T07:01:39.493
> 
> 标签：php, file-upload

我有下一个代码：

这在其他页面上效果很好。但不是在这个

```
<tr><td>Upload Terms and Condition <br />(pdf, doc, docx, xls, txt)</td>
    <td><input type = "file" name = "termspdf" id = "termspdf"/></td>
</tr> 
```

下一个代码是：

```
// PDF SECTION ...
if (is_uploaded_file($_FILES['termspdf']['tmp_name'])) {
    $pdf = $_FILES["termspdf"]["name"];
    $pdfSize = $_FILES["termspdf"]["size"];

    if ($_FILES['termspdf']['type'] != "application/pdf") {
        echo $lang['var464'];
    } else {
        $path="images/products/pdf/";
        $newPdf = time().".pdf";
        $newPDFPath=$path.$newPdf;

        $result = move_uploaded_file($_FILES['termspdf']['tmp_name'], $newPDFPath);
        chmod($newPDFPath, 0777);
    }
}

Array
(
) 
```

> 注意：未定义索引：第 25 行 /home/user678/public_html/users/_edit.php 中的 termspdf

我得到任何结果。有什么问题？

```
print "<pre>";
    print_r($_FILES);
    print "</pre>"; 
```

没有 ..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:05:41.477

您的表单可能不是多部分表单：

```
<form enctype="multipart/form-data" action= "<?=BASE_URL?>/user.php?do=edit" method="POST"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:23:12.300

也许你的文件太大了？见 php.ini`upload_max_filesize`和 post_max_size

你也可以检查`$_FILES['termspdf']['error']`

# openxml-sdk - FormFieldData 的文本

> ID：13134160
> 
> 赞同：2
> 
> 时间：2012-10-30T07:01:50.193
> 
> 标签：openxml-sdk

我正在尝试使用打开的 xml 在 word 中填充 FormFieldData 的文本，我使用此代码从 word 文档中获取 formFieldData 列表及其 FormFieldName：

```
 var FormFieldDataList= wordDoc.MainDocumentPart.Document.Body.Descendants<FormFieldData>();
foreach (FormFieldData block in x2)
        {
            if (block != null)
            {
                FormFieldName tag = block.ChildElements.OfType<FormFieldName>().ElementAt(0);

            }
        } 
```

但我无法在文档中填写他们的文字

# c++ - 如何在带有 stl 向量的 C++ 中使用类似 matlab 的运算符

> ID：13134169
> 
> 赞同：1
> 
> 时间：2012-10-30T07:02:45.290
> 
> 标签：c++, stl, vector, operators

在 matlab 中，我们可以使用 matlab 运算符，如下所示：

```
M=[1 2 3 4, 5 6 7 8, 9 10 11 12]
M[:,1] = M[:,2] + M[:,3] 
```

将相同的操作应用于矩阵的所有行我想知道我们是否可以应用相同的操作来将值设置为一系列值，`std::vector`就像使用冒号（:) matlab 的运算符所做的那样。实际上，我使用向量来存储矩阵值。

```
vector<int> M; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:28:40.837

有一些 C++ 库可以像 matlab 一样处理矩阵（也允许[**SIMD**](http://en.wikipedia.org/wiki/SIMD)矢量化）；例如，您可能需要考虑[eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)。

如果您不想依赖外部库，您可能需要考虑[`std::valarray`](http://www.cplusplus.com/reference/std/valarray/)哪些已被明确考虑用于代数计算（`valarray`您可以使用 s[`std::slices`](http://www.cplusplus.com/reference/std/valarray/slice/)来根据需要提取子矩阵）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:08:32.987

您可以定义一个以`std::vector<int>`参数为参数的“自由”运算符：

```
std::vector<int> operator +(const std::vector<int> &a, const std::vector<int> &b)
{
    std::vector<int> result(a); // Copy the 'a' operand.

    // The usual matrix addition is defined for two matrices of the same dimensions.
    if (a.size() == b.size())
    {
        // The sum of two matrices a and a, is computed by adding corresponding elements.
        for (std::vector<int>::size_type i = 0; i < b.size(); ++b)
            // Add the values of the 'b' operand.
            result[i] += b[i];

        return result;
    }
}

int main(int argc, char **argv)
{
    std::vector<int> a;
    std::vector<int> b;

    // The copy constructor takes care of the assignement.
    std::vector<int> c(a + b);

    return 0;
} 
```

的实现`operator +`是相当幼稚的，但只是一个想法。当心！，我在添加操作之前放置了一个 ckeck，如果检查未通过，`a`则返回操作数的副本，我认为这不是您想要的行为。

我已将运算符放在同一个文件中，`main`但您可以将其放置在您想要的任何位置，只要它在执行操作的位置可见即可。

当然，你可以定义你想要的操作符，以链式操作来实现一些更复杂的操作。

我的数学概念很老了，但我希望它有所帮助。

# xml - 在复杂的 PL/SQL 中使用 Oracle XMLElement

> ID：13134170
> 
> 赞同：2
> 
> 时间：2012-10-30T07:02:46.097
> 
> 标签：xml, oracle, plsql, oracle10g

使用 Oracle 10gR2，我需要从存储在标准关系表中的数据生成类似于以下伪示例的内容。

```
<product>
  <productName>p1</productName>
  <productNumber>100</productNumber>
  <productObsoletes>
     <obsoletedProduct label=1>50</obsoletedProduct>
     <obsoletedProduct label=2>55</obsoletedProduct>
  </productObsoletes>
</product> 
```

问题是，我需要使用包含数据的行进行决策。我的数据库（我继承的）设计不佳，决定包含行所需的逻辑很复杂。不幸的是，重新设计数据库不是一种选择。我在这里大大简化了逻辑，因此不能使用简单的连接或 where 子句。数据和数据格式定义有一个复杂的层次结构。

在伪代码中，过于简化的决定看起来像：

```
BEGIN
   --select our basic attributes

     select XMLEMENT("product",XMLELEMENT("productName",name),XMLELEMENT("productNumber",product_number))
into xml_output from products where product_number = 100;

   --now process our obsolete rows
   select XMLELEMENT("productObsoletes") into xml_output from dual;
   FOR c_row in (select * from product_obsoletes where id=100)
   LOOP
       IF c_row.display = 'YES' THEN
        select XMLELEMENT("obsoletedProduct", XMLATTRIBUTES(c_row.label as "label"), c_row.obsoleted_product_id) into xml_output from dual;
       ELSE
          CONTINUE;
       END IF;
   END LOOP;
END; 
```

显然，这是行不通的。首先，XMLElement 总是放置一个结束标记，所以除非您可以制定一个包含所有元素的选择语句，否则它不会起作用。其次，在本例中，我将覆盖先前的 XMLELEMENT 输出。我无法连接，因为 XMLELEMENT 已经关闭了标签。

此时我能想到的唯一解决方案是将我需要的各种 XMLElement 片段选择到不同的 VARCHARS 中，然后使用字符串操作函数找到插入各个片段的正确位置。丑陋的大写字母U。

还有其他解决方案吗？有没有办法阻止 XMELEMENT 关闭标签，以便您可以使用复杂的循环逻辑？或者另一个 Oracle 构造，它允许我实现构建此 XML 的目标，而无需使用单个 select 语句？

我最后的方法是从另一种语言（如 Java 或 Perl）生成 XML，我可以在其中简单地获取数据，然后在那里进行复杂的处理和 XML 生成。但是，我更喜欢只有一个 SQL 函数，它可以将正确的 XML 作为字符串返回，所以如果可以在 PL/SQL 中完成，那将是我的首选路线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:33:18.330

我认为这可以作为一个查询来完成，你必须结合`xmlagg` `xmlelement`起来`xmlforest`

这是一个例子：

```
select XMLELEMENT("product",(XMLForest( p.product_name as "productName",
                            p.product_number as "productNumber",
                  xmlagg(
  XMLELEMENT("obsoletedProduct", 
             XMLATTRIBUTES(po.label as "label"), 
             po.obsoleted_product_id)) as "productObsoletes")))
from products p 
join product_obsoletes po on p.product_number=po.id
group by p.product_name, p.product_number 
```

[这](http://www.sqlfiddle.com/#!4/d84d1/24)是小提琴

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:17:29.790

使用 XMLDOM（一个不同的内置包）来创建 XML 怎么样？

您可能需要编写更多代码，但如果您的逻辑足够复杂，这就是您无论如何都必须要做的事情。

* * *

这是您可以使用的一些选项（包括 XMLDOM）的一个很好的快速总结，并附有示例：

[http://www.akadia.com/services/ora_gen_xml.html](http://www.akadia.com/services/ora_gen_xml.html)

# c++ - C++11 std::threads vs posix 线程

> ID：13134186
> 
> 赞同：172
> 
> 时间：2012-10-30T07:03:53.290
> 
> 标签：c++, multithreading, c++11, pthreads

为什么在实践中我应该更喜欢一个或另一个？`std::thread`除了是一个类之外，还有什么技术差异？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-10-30T08:47:40.597

如果您想在许多平台上运行代码，请选择 Posix Threads。它们几乎随处可见，并且非常成熟。另一方面，如果您只使用 Linux/gcc`std::thread`则完全没问题——它具有更高的抽象级别、非常好的接口并且可以与其他 C++11 类很好地配合使用。

`std::thread`不幸的是，即使 C++11 似乎可用，C++11类也不能（还）在每个平台上可靠地工作。例如，在原生 Android`std::thread`或 Win64 中，它只是无法正常工作或存在严重的性能瓶颈（截至 2012 年）。

一个很好的替代品是`boost::thread`- 它与（实际上它来自同一作者）非常相似`std::thread`并且工作可靠，但是，当然，它引入了来自第三方库的另一个依赖项。

* * *

编辑：截至 2017 年，`std::thread`主要适用于原生 Android。一些类，如`std::timed_mutex`仍未实现。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-10-30T08:15:43.060

该`std::thread`库是在支持 pthread 的环境中的 pthread 之上实现的（例如：libstdc++）。

我认为两者之间的最大区别是抽象。`std::thread`是一个 C++ 类库。该`std::thread`库包含许多抽象特性，例如：作用域锁、递归互斥锁、future/promise 设计模式实现等。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-10-30T07:09:03.960

`std::thread`提供跨不同平台的可移植性，如 Windows、MacOS 和 Linux。

正如@hirshhornsalz 在下面的评论和相关答案[https://stackoverflow.com/a/13135425/1158895](https://stackoverflow.com/a/13135425/1158895)中提到的，`std::thread`可能尚未在所有平台上完成。即使如此，（它将在不久的将来）它应该比`pthread`'s 更受青睐，因为它应该使您的应用程序更加面向未来。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-07-20T05:01:37.090

对我来说，决定性的技术差异是 std 中没有信号处理原语，而不是 pthreads。无法单独使用 std 在 Unix 进程中正确指示信号处理是 AFAIK 使用 std::thread 时的一个令人衰弱的缺陷，因为它禁止设置真正的多线程信号处理模式来处理专用的所有信号线程并在其余部分阻止它们。您被迫假设 std::thread 是使用 pthreads 实现的，并希望在使用 pthread_sigmask 时获得最好的结果。在企业的 Unix 系统编程中，正确处理信号是不可协商的。

截至 2016 年，std::thread 是一个玩具；就那么简单。

# r - 使用 BIG DATA 进行 SVM 建模

> ID：13134188
> 
> 赞同：1
> 
> 时间：2012-10-30T07:03:56.380
> 
> 标签：r, svm, bigdata

为了在 R 中使用 SVM 进行建模，我使用了带有 Windows Xp 操作系统和 2 GB RAM 的 kernlab 包（ksvm 方法）。但是有更多的数据行如 201497，我不能提供更多的内存来处理数据建模（遇到问题：不能分配大于 2.7 GB 的向量大小）。

因此，我使用亚马逊的微型和大型实例进行单片机建模。但是，它与本地机器有同样的问题（不能分配大于 2.7 GB 的向量大小）。

谁能建议我用大数据建模解决这个问题，或者这有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:33:09.653

如果没有可重现的示例，很难说数据集是否太大，或者脚本的某些部分是否次优。一些通用的指针：

*   查看[High Performance Computing Taskview](http://cran.open-source-solution.org/web/views/HighPerformanceComputing.html)，它列出了与使用 BigData 相关的主要 R 包。
*   您使用整个数据集来训练您的模型。您可以尝试获取一个子集（例如 10%）并在其上拟合您的模型。重复此过程几次将深入了解模型拟合是否对您使用的数据子集敏感。
*   一些分析技术，例如 PCA 分析，可以通过迭代地处理数据来完成，即以块的形式。这使得对非常大的数据集（>> 100 gb）的分析成为可能。我不确定这是否可行`kernlab`。
*   检查您使用的 R 版本是否为 64 位。
*   [这个较早的问题](https://stackoverflow.com/questions/12767432/how-can-i-tell-when-my-dataset-in-r-is-going-to-be-too-large/12767576#12767576)可能很有趣。

# visual-c++ - 如何在 C++/Cx 中使用 ConverterParameter？

> ID：13134189
> 
> 赞同：0
> 
> 时间：2012-10-30T07:04:03.597
> 
> 标签：visual-c++, windows-runtime, converter, ivalueconverter, c++-cx

我在 Visual Studio 中启动了一个新的 Visual C++ 项目，作为模板的一部分，我得到了一个 BooleanToVisibilityConverter。这工作正常，但它似乎不尊重 ConverterParameter=Invert 指定时。

**XAML：**

```
<UserControl.Resources>
    <local:IntToVisibilityConverter x:Name="IntToVisibilityConverter" />
    <common:BooleanToVisibilityConverter x:Name="BoolToVisibilityConverter" />
</UserControl.Resources>

...

<Image Width="24" Height="24" Source="/Assets/DisclosureTriangleDown.png" Visibility="{Binding Disclosed, Converter={StaticResource BoolToVisibilityConverter}}" />
<Image Width="24" Height="24" Source="/Assets/DisclosureTriangleRight.png" Visibility="{Binding Disclosed, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert}" /> 
```

**C++：**

```
Object^ BooleanToVisibilityConverter::Convert(Object^ value, TypeName targetType, Object^ parameter, String^ language)
{
    (void) targetType;  // Unused parameter
    (void) parameter;   // Unused parameter
    (void) language;    // Unused parameter

    auto boxedBool = dynamic_cast<Box<bool>^>(value);
    auto boolValue = (boxedBool != nullptr && boxedBool->Value);
    return (boolValue ? Visibility::Visible : Visibility::Collapsed);
}

Object^ BooleanToVisibilityConverter::ConvertBack(Object^ value, TypeName targetType, Object^ parameter, String^ language)
{
    (void) targetType;  // Unused parameter
    (void) parameter;   // Unused parameter
    (void) language;    // Unused parameter

    auto visibility = dynamic_cast<Box<Visibility>^>(value);
    return (visibility != nullptr && visibility->Value == Visibility::Visible);
} 
```

我假设我需要对`Object^ parameter`变量做一些事情，但是什么？为什么内置项目模板不处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:01:11.677

转换器参数是一个可选的附加参数，XAML 使用者将传递给转换器以指定转换的特定于上下文的详细信息。

作为转换器的作者，您可以指定该参数的工作方式（并使用该参数实现其逻辑）。基本上，您需要将`Object^`参数转换为 a `String^`，然后将其与“Invert”进行比较（然后将 Convert 函数的行为更改为相应的行为）。

这篇博文有更多信息；它是关于 WPF 但概念是相同的：http: [//zamjad.wordpress.com/2010/01/08/passing-parameters-to-value-converter/](http://zamjad.wordpress.com/2010/01/08/passing-parameters-to-value-converter/)

# ruby-on-rails - 如何使用 ActiveRecord 为一个应用程序生成数据库模式图？

> ID：13134191
> 
> 赞同：8
> 
> 时间：2012-10-30T07:04:14.663
> 
> 标签：ruby-on-rails, ruby, database, activerecord, schema

我想生成图表来描述使用 ActiveRecord 的应用程序中的关系，是否有一些 gem 可以实现这一点？

比如这个 [![数据库图](../Images/f9dda20a03c069752e6c615445a46003.png)](https://web.archive.org/web/20140228075425/http://upload.wikimedia.org:80/wikipedia/commons/3/36/Mediawiki_database_Schema.svg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-21T09:59:22.837

有一个很好的宝石：[https ://github.com/amatsuda/erd](https://github.com/amatsuda/erd)

但正如我所见，它最后一次更新是在 2 年前。

根据自述文件，它具有以下功能：

*   Erd 根据您应用的数据库和模型绘制 ER 图
*   您可以拖动和排列每个模型的位置
*   您可以操作 DB 模式操作，例如`add column`、`rename column`、`alter column`、`create model (as well as table)`和`drop table`
*   然后，Erd 在服务器上生成迁移文件
*   您可以在浏览器上运行每个迁移

# c - 使用 fgets + 动态内存分配

> ID：13134193
> 
> 赞同：0
> 
> 时间：2012-10-30T07:04:17.953
> 
> 标签：c, fgets, dynamic-memory-allocation

我有一个需要帮助的家庭作业问题。我需要实现一个功能`char *getStrFromFile(FILE*);`。我只是不明白。我试图弄清楚这个问题。

> 此函数从 fpin 指向的打开文件中安全地读取未知长度的完整行。它返回的行最多比保持该行所需的最小值长 CHUNKSZ-1 个字符。它最初分配一个 DEFLEN 字符数组来保存字符串，如果这个空间不足以保存字符串，它会迭代地创建一个 CHUNKSZ 更大的新字符串，将旧字符串复制到它释放旧字符串，然后读取从文件中输入更多字符，并继续此操作，直到可以返回任意长度的整行。
> 
> 返回：如果 fpin 中没有剩余字符，则返回 NULL，否则：指向已分配数组的指针至多 CHUNKSZ-1 个字符长于从文件 fpin 中保存任意长行所需的最小值

```
 int main(int nargs, char *args[])
 {
    FILE *fpin;
    char *getStrFromFile(FILE*);
    if (nargs != 2)
    {
       fprintf(stderr, "USAGE: %s <file>\n", args[0]);
       exit(1);
    }
    fpin = fopen(args[1], "r");
    while(1)
    {
       char *ln;
       ln = getStrFromFile(fpin);
       if (!ln)
          break;
       printf("%s", ln);
       free(ln);
    }
    fclose(fpin);
    return(0);
 } 
```

这是我必须使用的主要方法。这是我到目前为止所知道的。

```
char *getStrFromFile(FILE *fpin)
{
  char string[DEFLEN];
  if(fgets(string, CHUNKSZ, fpin) != NULL) {
    int l = lstr(string);
    if(string[l-1] = '\n') {
      return string;
    } else {
      int size = 1;
      int end = 0;
      while (string[l-1] != '\n') {
        size += CHUNSZ;
        char *s2 = (char*)malloc(sizeof(char)+size);
        for(i = 0+end; i < lstr(string); i++) {
          s2[i] = string[i];
        }
        end += lstr(string);
        fgets(string, size + end, fpin);
        return s2; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:45:34.203

这是不正确的。

```
if(string[l-1] = '\n') 
```

肯定是

```
if(string[l-1] == '\n') 
```

# android - 使用 adb shell 发送多个 keyevent

> ID：13134196
> 
> 赞同：2
> 
> 时间：2012-10-30T07:04:27.810
> 
> 标签：android

我想使用 adb 发送多个 keyevent。

谷歌搜索后我可以知道，`adb shell input keyevent 65`但使用这个命令我只能发送一个关键事件。

我想模拟“SHIFT_KEY + 特殊字符”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-06T04:43:54.453

样本 ：

adb shell input keyevent 22 66 表示：按发送并按回车

# css - 是否可以通过在 CSS 中单击图像来“调出”图像？

> ID：13134199
> 
> 赞同：1
> 
> 时间：2012-10-30T07:04:46.327
> 
> 标签：css

我正在使用用户样式表来修改网页，因为我将所有图像都移到了最右边。它正在工作，除了在 r​​eddit 上我还使用[RES](http://redditenhancementsuite.com/)的拖动缩放和其他一些事情变得有点混乱的网站：http: [//i.stack.imgur.com/nJUyK.png](http://i.stack.imgur.com/nJUyK.png)

所以我想知道我是否可以点击一张图片从那一堆密集的图片中“调出”。在 CSS 中是否可能（因为我只使用 CSS 用户样式表）但我对任何替代方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:20:33.450

您可以使用重新设置样式的复选框/单选按钮来做到这一点
（来源： http: [//www.inserthtml.com/2012/04/css-click-states/](http://www.inserthtml.com/2012/04/css-click-states/)）

将要显示的图像和一个复选框（根据需要设置样式）放入容器中

```
<form class="clickable"> 
  <label for="the-checkbox">Click Me!</label>
  <!-- Radiobuttons should do it, too! -->
  <input type="checkbox" id="the-checkbox" /> 
  <!-- This is the div we want to appear and disappear -->
  <div class="appear">Some text(image to appear</div>
</form> 
```

现在您可以使用伪选择器切换图像的可见性（或您的情况下的 z-Index）`:checked`。

```
.clickable .appear { 
  display: none;
}

.clickable input:checked ~ .appear {
  /* Or change the z-Index here */
  display: block;
} 
```

查看上面链接的文章底部的“快速演示”。
使用 id 代替分类或标签名称作为 CSS 选择器也是可能的。所以切换多个图像应该不是问题。
使用单选按钮的魅力在于，当您单击下一个按钮时，最后一个选择的按钮会被取消选择（未经测试，只是一个想法；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:48:27.967

如果你可以使用 CSS3，你可以看看这个：[http ://designshack.net/tutorialexamples/HoverEffects/Ex2.html](http://designshack.net/tutorialexamples/HoverEffects/Ex2.html)

基本上

```
img {
height: 100px;
width: 300px;
-webkit-transition: all 1s ease;
-moz-transition: all 1s ease;
-o-transition: all 1s ease;
}

and 

img:hover {
height: 133px;
width: 400px;
margin-left: -50px;
} 
```

# log4php - 可互操作的 log4php 和 Chainsaw/远程日志查看器

> ID：13134203
> 
> 赞同：0
> 
> 时间：2012-10-30T07:05:06.670
> 
> 标签：log4php, apache-chainsaw

我需要一个远程日志查看器，例如`chainsaw`for `log4php`。当我使用`log4j`时，电锯是我的第一选择，虽然`log4php`与 相同`log4j`，`chainsaw`但反应不佳。

例如，我给了这个配置

```
log4php.appender.A3=LoggerAppenderSocket 
log4php.appender.A3.remoteHost=cin10050
log4php.appender.A3.port=4445
log4php.appender.A3.layout=LoggerLayoutXml 
```

`Chainsaw`在中生成一条日志消息`chainsaw-logs`：

```
Connection lost! :: invalid stream header: 3C6C6F67 
```

有没有人有办法解决吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:33:53.317

Chainsaw provides an XMLSocketReceiver, which could be used to receive events from log4php, but I don't think they send events in a format that the receiver can process.

I'd suggest logging to a regular text log file and using the latest developer snapshot of Chainsaw, available here: [http://people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

Use the 'File,Load Chainsaw configuration' option and select 'process a log file'. Then hit the 'open file' to browse to your log file location, and then specify your 'log file format'. A simple one that will always work is: MESSAGE

That format will just make the entire log line the 'message' field. If you'd like Chainsaw to parse your levels and timestamps etc, that's possible, you just need to use the keywords and match up your format.

Then, click the 'always start Chainsaw with this configuration' check box, and then hit the 'save configuration as' button and save your chainsaw configuration to something like log4php-chainsaw-config.xml.

When you hit ok, you should get a new tab with your log file contents.

Scott

# javascript - javascript 数字中的 Stange 功能

> ID：13134207
> 
> 赞同：4
> 
> 时间：2012-10-30T07:05:23.973
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript 中错误地舍入大数字](https://stackoverflow.com/questions/1379934/large-numbers-erroneously-rounded-in-javascript)

在 javascript 中处理数字时，我遇到了一些奇怪的行为。当我使用以下代码时：

```
<a href="javascript:console.log({'id':9200000000032337}.id);"> CLICK HERE </a> 
```

我在控制台中得到数字 920000000003233 **6**。我认为它最有可能是数字的四舍五入或最大值，但我并不完全理解。任何人？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T07:09:30.990

我不是 Javascript 专家，但听起来您的号码被存储为 IEEE-754 64 位浮点数。当然，这就是我从 C# 代码中得到的，它将显示 a 的确切值`double`：

```
double d = 9200000000032337;
Console.WriteLine(DoubleConverter.ToExactString(d)); 
```

（使用我自己的`DoubleConverter`类。）我的输出与您的相同：9200000000032336

浮点值只能准确地保存一定数量的有效数字 - 当数字变得足够高时，即使是整数也无法准确存储。

[ECMA-262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)似乎证实了这一点：

> **4.3.19** 对应于双精度 64 位二进制格式 IEEE 754 值的
> 数值原始值

并从第 7.8.3 节（数字文字）：

> 数字文字代表 Number 类型的值。该值分两步确定：首先，从字面量导出一个数学值（MV）；其次，该数学值按如下所述四舍五入。

第 8.5 节包含更多细节。

# javascript - Backbone.js：查看状态和路由

> ID：13134209
> 
> 赞同：3
> 
> 时间：2012-10-30T07:05:28.947
> 
> 标签：javascript, backbone.js, views, url-routing

我正在考虑构建我的 Backbone 应用程序的最佳方式。问题是我有各种复杂的状态，每一个都是由一些视图显示而其他所有的都是隐藏的。

在 Backbone 中处理此问题的规范方法是什么？我想到的两件事是通过路由器控制状态（调用视图隐藏/显示方法）或让视图监听路由事件。

第一种方法的问题是路由器必须知道应用程序中存在的所有视图。

第二个解决方案的问题是我必须让*所有*视图监听*所有*事件并隐藏其中任何一个，但有几个让它们显示。

感谢您向我指出一个精益解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:03:36.917

我使用 FSM 机器来更改应用程序的状态。每个状态显示和隐藏相应的视图。我的视图使用过渡来动画进出，因此更改状态更复杂，然后是简单的显示/隐藏 - 它从一种状态进出动画到另一种状态。我已经分叉了[https://github.com/fschaefer/Stately.js](https://github.com/fschaefer/Stately.js)以满足我的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:05:04.647

我可以分享我个人遇到这样一个问题的经验。我不知道这是否是最好的解决方案，但它对我有用。

我的问题更糟，因为我有几个路由器，每个路由器都应该隐藏/显示属于它的视图。我选择的解决方案与您考虑的第一个选项相似。

在我的路由器中有一个包含所有现有视图的数组。当状态改变和路由回调执行时，所有其他视图都被这个简单的代码隐藏，`view[i].hide()`并显示正确的视图。如果您想拥有更多控制权，可以制作 View 模型和 Views 集合。

我认为这是一个更好的解决方案，因为当您添加新路由时，您不必将路由事件添加到所有视图。此外，您的视图与路由器保持分离，他们甚至可能不知道它的存在。

# jquery - 在 Jquery datetimepicker 中仅显示第一行

> ID：13134215
> 
> 赞同：2
> 
> 时间：2012-10-30T07:06:12.553
> 
> 标签：jquery, jquery-ui

我尝试创建 jquery 日历，我只需要显示前一个导航的第一行。我很努力地删除了除第一行之外的所有行，但找不到任何解决方案。

现在我完成了这样的[**事情**](http://jsfiddle.net/XZtLz/)。

```
$(document).ready(function() {
  $(function() {
    $( '#datepicker' ).datepicker({
      showOtherMonths: true,
      selectOtherMonths: true
    });             
  });
}); 
```

我在 jquery.ui 上搜索并没有找到关于此功能的任何选项。你可以参考[**图片**](http://i.stack.imgur.com/f1YPX.jpg)。（*不管我会照顾css*）

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:20:11.923

这个需求是这个插件的开发者有点特殊，所以他们没有提供API，我查了一下，发现你要隐藏的元素有不同的类，你可以编写代码手动隐藏它们。或者您可以设置限制日期范围，以便用户无法选择日期的那一部分，这样更有意义。请参阅此限制日期范围：http://jqueryui.com/datepicker/#min-max

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:26:58.360

您可以将此功能绑定到每个月的上一个和下一个按钮：

```
$('.ui-datepicker-calendar tbody tr').each(function(index){

    if(index>0){
       $(this).hide();            
    }            

}); 
```

并在文档准备功能中。无论如何，这只会隐藏与第一行不同的所有行，但这样你每个月只会得到第一行。

如果你想跨行点击下一个和上一个，我相信，这也是可能的：

1.  您应该为当前月份的下一行和上一行添加两个单独的按钮。
2.  编写一个简单的函数（并将其绑定到新按钮）。如果按下“下一个”，选择当前显示的行，隐藏它，并显示下一个。使用“prev”按钮 - 反向逻辑。

# vb.net - Crystal Report SUM 函数与 CASE

> ID：13134230
> 
> 赞同：0
> 
> 时间：2012-10-30T07:07:46.390
> 
> 标签：vb.net, crystal-reports

我的水晶报表中有以下列值：

```
|Code |Unit |
|A    |2    |
|B    |3    |
|C    |2    |
|D    |3    |
|E    |1    |
|F    |1    |
|G    |4    |
|H    |(3)  | 
```

我想总结除具有代码 H、J、K 和 L 的单位之外的单位。代码：H、J、K 和 L 包含带括号的单位。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:46:08.600

如果您只想省略带有“（”的单位，只需将此字段转换为数字使用

```
Val ({Unit}) 
```

这将为非数字文本返回 0，为数字创建数字总和，您将得到您想要的

如果你不想使用任何特殊的然后创建这样的公式字段

```
if {fa_rep_vr_Main.CustomTitle} not in('A','B','C') then
    0
else
    val({Unit}) 
```

使用这个的总和

如果您想要 NewPriceAD 的总和，请在保留字段中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:28:30.543

如果您想从汇总中排除任何行或值，可以通过在***运行总计字段中使用******评估下******的公式***字段来完成， 请参考下图... 不满足条件的行或字段将可从摘要评估中跳过。 试试这个并得到结果！ **![概括](../Images/bec7a581f4a6bc71d7c3e6623b387823.png)**

# c# - 在 asp.net 中发送电子邮件时无法连接到远程服务器

> ID：13134234
> 
> 赞同：1
> 
> 时间：2012-10-30T07:08:10.260
> 
> 标签：c#, asp.net, smtpclient

使用电子邮件发送代码时出现上述错误我的代码是

```
string fromAddress = "mymail";
string fromPassword = "mypassword";
var smtp = new System.Net.Mail.SmtpClient();
smtp.Host = "smtp.gmail.com";
smtp.Port = 587;
smtp.EnableSsl = true;
smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
smtp.Timeout = 20000;
smtp.Send(fromAddress, toAddress, MailSubject, Body); 
```

我用谷歌搜索了很多次，但没有得到正确的解决方案。端口 587 已启用，防火墙也没有阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:18:38.397

```
try
   {
      MailMessage mail = new MailMessage();
      mail.To.Add("sender id");
      mail.From = new MailAddress("your id");   
      mail.Subject = "Mail from my web page";
      mail.Body ="Body Content";
      mail.IsBodyHtml = true;
      SmtpClient smtp = new SmtpClient();
      smtp.Host = "smtp.gmail.com";
      //Or your Smtp Email ID and Password  
      smtp.Credentials = new System.Net.NetworkCredential
      ("XYZ", "XXXXX");
      smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
      smtp.EnableSsl = true;
      smtp.Send(mail);
   }

catch (Exception ex)
    {
        //display exception             

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:25:44.780

这段代码对我有用。试试这个。

```
 MailMessage mM = new MailMessage();
        mM.From = new MailAddress("YourGmail@gmail.com");
        mM.To.Add(Email);
        mM.Subject = "Your Sub";
        mM.Body = "Your Body" ;
        mM.IsBodyHtml = true;
        mM.Priority = MailPriority.High;
        SmtpClient sC = new SmtpClient("smtp.gmail.com");
        sC.Port = 587;
        sC.Credentials = new NetworkCredential("YourGmail", "YourPassword");
        //sC.EnableSsl = true;
        sC.EnableSsl = true;
        sC.Send(mM); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:52:30.363

感谢您的回复。我得到了解决方案，好像您正在使用任何防病毒软件一样检查它的日志以查看是否是因为防病毒软件。当 McAffee 阻止我的邮件时，我遇到了同样的问题（有一个安全策略 - 防止群发邮件蠕虫发送邮件）。编辑此策略并将您的应用程序添加到例外列表中。就我而言，这解决了问题。请检查它是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:21:04.333

我对 Gmail 使用以下代码：

```
Function SendMail_Gmail(ByVal strFrom As String, ByVal strTo As String, ByVal strSubject As String, ByVal strBody As String) As Boolean

        Dim mailmsg As New System.Net.Mail.MailMessage()    
        mailmsg.From = New MailAddress(strFrom)    
        mailmsg.To.Add(strTo)    
        mailmsg.Subject = strSubject    
        mailmsg.IsBodyHtml = True    
        mailmsg.Body = strBody    
        mailmsg.Priority = System.Net.Mail.MailPriority.Normal

        Dim client As New System.Net.Mail.SmtpClient()

        client.Host = "smtp.gmail.com"
        client.Port = "587"    
        client.Credentials = New System.Net.NetworkCredential("youremailid@gmail.com", "Yourpassword")

       client.EnableSsl = True

        Dim userstate As Object = mailmsg   

        client.Send(mailmsg)
        Return True
    End Function 
```

# vb.net - 将阅读器项目存储在数组中

> ID：13134240
> 
> 赞同：0
> 
> 时间：2012-10-30T07:08:31.817
> 
> 标签：vb.net

```
Dim myReader As OleDbDataReader
Dim Index As Integer
Dim status As Array
Index = 0
cmd.CommandText = "SELECT CPALLOCATIONTIME from RECORDMASTER where ID='" & TxtID.Text & "'"
cmd.CommandType = CommandType.Text
myReader = cmd.ExecuteReader()

Do While myReader.Read()
     status(Index) = myReader.Item(0)
     Index = Index + 1
Loop

myReader.Close()

If (Index = 2) Then
If ((status(0) = "Fp" Or status(0) = "Op") And status(1) = "OXp") Then
    qText = TxtSTS.Text + "X"
    Update = True
    ApplicationStatus = 2
ElseIf ((status(0) = "Fp" Or status(0) = "Op") And status(1) = "FXp") Then
    qText = TxtSTS.Text + "X"
    Update = True
    ApplicationStatus = 2
End If 
```

有人可以帮我解决 `status(Index) = myReader.Item(0)`一下转换错误吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:20:31.470

1.  您希望您的数组随着元素的添加而*增长*。这不是数组的用途。改用 a `List(Of T)`。（有关确切语法，请参阅[MSDN 上的示例。）](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

2.  确保从阅读器读取的数据具有正确的数据类型。你有两种方法可以做到这一点：

    1.  投射它（例如`DirectCast(myReader(0), String)`）或
    2.  （更好）使用已经返回正确数据类型的读取器方法，例如`myReader.GetString(0)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:12:04.763

尝试

```
status(Index) = myReader.Item(0).ToString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:13:49.483

```
Redim status(0) ' < -- declare like this 
```

然后在循环中

```
Redim preserve status(index)
status(Index) = myReader("Column_name")
index = index + 1 
```

# android - setContentView(view) 与 setContentView(R.layout..)

> ID：13134244
> 
> 赞同：0
> 
> 时间：2012-10-30T07:08:56.283
> 
> 标签：android, android-layout, android-view

您好，我想制作一个使用多点触控支持的应用程序。

对于多点触控，我正在使用[此代码](https://code.google.com/p/android-multitouch-controller/)

现在您可以看到**org.metalev.multitouch.photosortr.PhotoSortrActivity** Activity 代码如下所示

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setTitle(R.string.instructions);
    photoSorter = new PhotoSortrView(this);
    setContentView(photoSorter);
} 
```

它会正常工作

但是如果我想在我的视图中添加这个视图而不是这个，我会写上面的代码，如下所示......

我制作了一个名为 activity_main.xml 的 XML 文件

```
<org.metalev.multitouch.photosortr.PhotoSortrView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</org.metalev.multitouch.photosortr.PhotoSortrView> 
```

在 onCreate 方法中，我进行了如下更改

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setTitle(R.string.instructions);
    photoSorter = new PhotoSortrView(this);
    setContentView(R.layout.activity_main);
} 
```

如果我喜欢这种方式，我会在下面得到一个错误是 logcat

```
10-30 12:15:29.319: E/AndroidRuntime(6652): java.lang.NullPointerException
10-30 12:15:29.319: E/AndroidRuntime(6652):     at org.metalev.multitouch.photosortr.PhotoSortrView$Img.draw(PhotoSortrView.java:274)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at org.metalev.multitouch.photosortr.PhotoSortrView.onDraw(PhotoSortrView.java:86)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.View.draw(View.java:6914)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.View.draw(View.java:6917)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-30 12:15:29.319: E/AndroidRuntime(6652):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644) 
```

在 PhotoSortrView.java 文件中，代码如下所示，我收到此错误

```
public void draw(Canvas canvas) {
    canvas.save();
    float dx = (maxX + minX) / 2;
    float dy = (maxY + minY) / 2;
    ---->drawable.setBounds((int) minX, (int) minY, (int) maxX, (int) maxY); // HERE getting drawable == NULL
    canvas.translate(dx, dy);
    canvas.rotate(angle * 180.0f / (float) Math.PI);
    canvas.translate(-dx, -dy);
    drawable.draw(canvas);
    canvas.restore();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:50:57.327

唯一的原因可能是类中`drawable`使用`draw()`的`Img`为空，因为`canvas`是由系统传递的，而方法中的其余变量是原语。该变量在 class 中初始化，`load()`而`Img`class 又从 class 中`loadImages()`调用`PhotoSortrView`。

现在，我猜你是`loadImages()`从`photoSorter`Activity 调用变量`onResume()`。但是还有另一个`PhotoSortrView`实例是通过膨胀布局创建的。确保您也调用`loadImages()`该实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:17:51.493

给僚机的建议我已经解决了如下方式：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setTitle(R.string.instructions);
    setContentView(R.layout.activity_main);
    photoSorter = (PhotoSortrView)findViewById(R.id.photoSortView);
}

@Override
protected void onResume() {
    super.onResume();
    photoSorter.loadImages(this);
} 
```

在 PhotosorterView.java 文件中的代码如下。

```
 public PhotoSortrView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public PhotoSortrView(Context context) {
    super(context);
    init(context);
}

public PhotoSortrView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
} 
```

# ruby-on-rails - URL 参数中的嵌套数组

> ID：13134246
> 
> 赞同：7
> 
> 时间：2012-10-30T07:09:01.583
> 
> 标签：ruby-on-rails

嗨，我想做以下工作：

```
http://localhost:3000/reviews/new?ticket[]=token[]=109u11 
```

可以认为是意义`params[:ticket][:token] = 109u11`

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-30T07:48:41.820

您需要像这样更改网址：

```
http://localhost:3000/reviews/new?ticket[token]=109u11 
```

# php - PHP 数组操作/重排

> ID：13134249
> 
> 赞同：-1
> 
> 时间：2012-10-30T07:09:11.943
> 
> 标签：php, arrays, cakephp

我有以下数组：

```
Array
(
[0] => Array
    (
        [User] => Array
            (
                [firstname] => Chris
                [lastname] => Willis
            )

    )

[1] => Array
    (
        [User] => Array
            (
                [firstname] => Test
                [lastname] => Willis
            )

    )
   ... 
```

我需要将其转换为类似于此的结构：

```
Array
{
   'Chris-Willis' => 0
   'Test-Willis' => 1
   .... 
```

有哪些数组函数可以帮助做到这一点？

所以它需要是：

```
 firstname-lastname => id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:14:16.230

```
$grouped = array();
foreach ($users as $i => $user) {
    $grouped["{$user['User']['firstname']}-{$user['User']['lastname']}"] = $i;
} 
```

* * *

如果数组完全如上所示，这也应该这样做：

```
$grouped = array_combine(array_map(function ($u) { return join('-', current($u)); }, $users), array_keys($users)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:15:40.713

```
foreach $original_array as $key=>$temp
{

    $some_other_array[$temp['USER']['firstname']."-".$temp['USER']['lastname']] = $key;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T21:15:57.183

CakePHP 有[Set::combine()](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3acombine)方法来帮助处理这种情况。

我假设您希望数组值是用户的数据库 ID，而不是数组索引。

```
$users = $this->User->find('all', array(
  'fields' => array('id', 'firstname', 'lastname'),
));
$usersMap = Set::combine(
  $users,
  array('%1$s-%2$s', '{n}.User.firstname', '{n}.User.lastname') // sprintf() formatting
  '{n}.User.id',
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:45:02.127

以下代码应该可以解决问题

//$names 是你的数组的名称

`$namesId = array();`

`foreach ($names as $k=>$v)` `{`

`$temp = $v["User"]["firstname"] . "-" . $v["User"]["lastname"];`
`$namesId[$temp] = $k;`

`}`

# database - 两个查询：按列分组、减去相似列、显示总计

> ID：13134250
> 
> 赞同：0
> 
> 时间：2012-10-30T07:09:17.127
> 
> 标签：database, ms-access, report, ms-access-2010

我在 Access 中设置了以下两个查询。每个查询每个组织只有 1 行，并且两个查询的组织名称是一致的。

查询 A（基于表 A 的预算模型）

```
Org, Jan, Feb, ... Dec, Total
-----------------------------
A,   $68, $25, ... $51, $809
B,   $23, $39, ... $13, $423
...
E,   $11, $90, ... $84, $789 
```

查询 B（基于表 B 的预算模型）

```
Org, Jan, Feb, ... Dec, Total
-----------------------------
A,   $67, $25, ... $70, $821
B,   $23, $39, ... $13, $423
...
E,   $15, $45, ... $71, $755 
```

如何创建包含以下所有信息的报告？我很难将两个查询组合在一起，减去它们的值，然后最终在同一个报告/查询中显示总计行。

```
 Jan, Feb, ...  Dec,   Total
Org A:

    Model A: $68, $25, ..., $51,   $809
    Model B: $67, $25, ..., $70,   $821
    A - B  : $ 1, $ 0, ..., ($19), ($12)

Org B:

    Model A: $23, $39, ..., $13,   $423
    Model B: $23, $39, ..., $13,   $423
    A - B  : $ 0, $ 0, ..., $ 0,   $  0

...

Org E:

    Model A: $11, $90, ..., $84,   $789
    Model B: $15, $45, ..., $71,   $755
    A - B  :($ 4),$45, ..., $13,   $ 34

-------------------------------------------
Totals:

    Model A: $102, $154, ..., $148,   $2021
    Model B: $105, $109, ..., $154,   $1999
    A - B  :($ 3), $45, ..., ($ 6),   $  22 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:52:45.867

如果您使用一组值乘以 -1 创建一个 UNION 查询，则可以使用组织上的组和来获得报告中的减法。报告向导将为您执行此操作。

```
SELECT "a" as Source, qa.Org, 
       qa.Jan, qa.Feb, qa.Dec, qa.Total
FROM qa
UNION ALL 
SELECT "b" as Source, qb.Org, 
       qb.Jan * -1, qb.Feb * -1, qb.Dec * -1, qb.Total * -1
FROM qb 
```

您可以按来源分组以创建可以作为子报告包含的摘要。

# wordpress - 如何在我的 pod 中添加自定义选择字段？

> ID：13134253
> 
> 赞同：1
> 
> 时间：2012-10-30T07:09:28.640
> 
> 标签：wordpress, podscms

我正在使用 Podsframework。我创建了一个名为“媒体”的 pod。在我的 pod 中，我想添加一个带有多个选项的选择字段（如“在线”、“离线”、“按下”）。因此，每当有人创建新媒体时，他/她都必须选择其中一个选项。我尝试使用助手但没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:02:50.813

为什么不使用自定义简单选项的关系字段？

我们经常看到该用例，因此我们将其构建到 Pods 2.0 中

# ios - 是否有任何天气 api 提供图像

> ID：13134265
> 
> 赞同：4
> 
> 时间：2012-10-30T07:11:00.553
> 
> 标签：ios, weather-api

我在stackoverflow上搜索过，几乎得到了一些不错的天气预报API，但我想知道的是这些API是否根据天气状况为我提供图像（例如，如果下雨，它应该显示带有云与雨滴）还是我必须自己创建图像并以编程方式使用它们并根据天气条件切换图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:43:28.713

我见过的大多数 API 都允许任何一种选择。我工作的公司有一个消费网站 ( [WeatherTrends360](http://www.weathertrends360.com/ "WeatherTrends360") )，该网站目前有一个私人测试版的 API - 如果您有兴趣注册测试版，请发送电子邮件以支持@该域 - 我们会返回一个完整的 URL 到相应的图标托管在我们的 CDN 上以及表示天气分类的字符串，可用于指向您的应用程序使用的图标。

[Weather Underground 的 API](http://www.wunderground.com/weather/api/d/docs?d=data/forecast "Weather Underground 的 API")做同样的事情。

# wcf-security - 用于与 ACS 的主动和被动联合的通用自定义 STS

> ID：13134266
> 
> 赞同：2
> 
> 时间：2012-10-30T07:11:02.113
> 
> 标签：wcf-security, wif, acs

我有一个用于被动联合方案的自定义 IP-STS（非 ADFS）。对于活动客户端，我为活动联合创建了自定义 IP-STS，参考[http://msdn.microsoft.com/en-us/library/hh446531.aspx](http://msdn.microsoft.com/en-us/library/hh446531.aspx)。但是，我想为被动和主动客户端使用单个 IP-STS。我们如何使用通用的 FederationMetadata.xml 来处理这个问题，因为 entityIds(endpoints) 对于主动和被动场景应该是不同的？为了对两者都使用一个 STS，我们需要进行哪些更改？

被动联合端点：“https://localhost/MyCustomIdp” - 客户端将被重定向到登录页面。

活动联合端点：“https://localhost/MyCustomIdp/Service.svc” - 客户端将凭据传递给此服务。该服务有一个 ws2007HttpBinding 端点，并在验证后返回给定凭据的 SAML 令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:31:31.130

查看 ADFS 元数据 - 您将看到被动和主动端点。

关于如何实现它，看看[Thinktecture IdentityServer](http://thinktecture.github.com/)。

# common-lisp - 使用 CMUCL 时出错

> ID：13134270
> 
> 赞同：1
> 
> 时间：2012-10-30T07:11:33.453
> 
> 标签：common-lisp, quicklisp

使用 quicklisp 凝视 cmucl 时，出现以下错误：

```
Error in KERNEL::UNDEFINED-SYMBOL-ERROR-HANDLER:  the function GENERATE-CRC32-TABLE is undefined.
[Condition of type UNDEFINED-FUNCTION]

Restarts:
0: [CONTINUE       ] Return NIL from load of #P"/home/***/.cache/common-lisp/cmu-19f__19f_-freebsd-x86/home/***/quicklisp/quicklisp/deflate.sse2f".
1: [TRY-RECOMPILING] Recompile deflate and try loading it again
2: [RETRY          ] Retry Loading component: ("quicklisp" "deflate").
3: [ACCEPT         ] Continue, treating
                   Loading component: ("quicklisp" "deflate") as having
                   been successful.
4:                   Return NIL from load of #P"home:quicklisp/setup.lisp".
5:                   Return NIL from load of "home:.cmucl-init".
6: [ABORT          ] Skip remaining initializations.

Debug  (type H for help)

(KERNEL::UNDEFINED-SYMBOL-ERROR-HANDLER "<error finding name>"
    #.(SYSTEM:INT-SAP #x47FD70D4)
    #<Alien (*
        SYSTEM:SYSTEM-AREA-POINTER) at #x47FD6DC0>
    (16))
Source: Error finding source: 
Error in function DEBUG::GET-FILE-TOP-LEVEL-FORM:  Source file no longer exists:
   target:code/interr.lisp. 
```

我该如何解决它，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:20:56.517

最简单的解决方法是使用最新版本的 CMUCL。

# html - HTML5 CSS3元素不在内部居中 元素

> ID：13134273
> 
> 赞同：1
> 
> 时间：2012-10-30T07:11:47.687
> 
> 标签：html, css, alignment

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:23:22.897

这是一个[**工作演示**](http://jsfiddle.net/qvpUW/)

在您的 CSS 中执行此操作 -

```
.buttons { text-align: center;
    position: absolute;
    display: block;
    width: 70px;
    height: 70px;
    font-family: DancingScript-Regular;
    font-size: 100%;
    padding-top: 50px;
    background-color: rgba(255,255,255,.0);
    padding: 15px 15px;
    border: 5px solid white;
    border-radius: 70px;
    box-shadow: 0px 0px 5px 5px #000000, 0 0 5px 5px #888 inset;
    left: 15%;
    -webkit-transition: all .3s ease-in-out;
    -moz-transition: all .3s ease-in-out;
}

.buttonText { /*    
    width:  70px;
    height: 70px;*/
    display: inline-block;    
    padding: 18px 0 0 0;
    font-size: 100%;
    text-decoration: none;
    color: black;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:23:14.317

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:28:08.943

这会将您的文本垂直和水平居中在按钮的中心。

```
.buttonText {
    text-align: center;
    line-height: 70px;
    vertical-align:middle; 
    display: block;
    margin: auto auto;
    font-size: 100%;
    text-decoration: none;
    color: white;
} 
```

希望这可以帮助！

（编辑：将行高调整为按钮的高度。`vertical-align:middle;`将其垂直居中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:23:27.003

### 在你的 CSS 中删除它：

```
.buttonText {padding: 25px;} 
```

使它成为：

```
.buttonText {padding: 0;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T07:56:07.730

谢谢大家的建议....我终于可以使用它了：

```
.buttonText {
    margin-left: -23px;
    margin-top: -23px;
    position: absolute;
    text-align: center;
    padding: 28px;
    padding-top: 50px;
    padding-bottom: 50px;
    font-size: 100%;
    text-decoration: none;
    color: white;
} 
```

不知道为什么这个让我这么难……我在做这样的按钮时通常没有问题。

# java - 如何将 GWT 查询转换为小部件？

> ID：13134279
> 
> 赞同：2
> 
> 时间：2012-10-30T07:12:23.553
> 
> 标签：java, gwt, gwtquery, gquery

我刚开始使用 GWT Widgets。我熟悉 jQuery 和 GWT Query 是相似的，因此我对它很满意。

我需要在 GWT 中制作一个自定义小部件，其中包含我在 GQuery 中制作的功能。

我知道 GWT 小部件需要包含在面板中，但我在 GQuery 中有一个现有元素。所以我想我需要先将该元素转换为小部件。我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:39:39.467

使用 GQuery (1.2.1-SNAPSHOT) 中的最后一个代码，您应该能够使用 panel() 方法将任何元素转换为 gwt 面板。

```
GQuery myGQueryWidget = $("<div><h1>Hello</h1>World</div>");
Panel myGwtWidget = myGQueryWidget.as(Widgets.Widgets).panel(); 
```

当然，您可以将此面板用作可以添加到任何其他 gwt 面板的任何小部件，甚至可以将其他 gwt 小部件添加到其中。

您必须注意事件，因为如果您将 gwt 事件添加到面板，它将删除使用 gquery 添加的事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:21:35.590

您可以使用 GWTQuerys `WidgetsHtmlPanel`( [http://gwtquery.googlecode.com/svn/trunk/gwtquery-core/javadoc/com/google/gwt/query/client/plugins/widgets/WidgetsHtmlPanel.html](http://gwtquery.googlecode.com/svn/trunk/gwtquery-core/javadoc/com/google/gwt/query/client/plugins/widgets/WidgetsHtmlPanel.html) ) 将 HTML 内容转换为 Panel。

这应该可以解决问题。

# scala - Japid 和 Scala 哪个更好？

> ID：13134281
> 
> 赞同：-5
> 
> 时间：2012-10-30T07:12:44.513
> 
> 标签：scala, playframework-2.0, japid

Japid 是一个由 play 框架支持的快速模板引擎（可能快 2 到 20 倍），但它是否足够好或足够稳定以用于生产环境？如果 japid 比为什么在 scala 中播放已发布的示例项目更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:12:33.480

Japid 并不快，因为它是用 Java 编写的。它更快是因为编写它的人决定花精力让它更快。Scala 可以同样快。

它也是~~较新~~的插件，它解释了为什么它不用于 Play 的核心示例。

# mysql - 使用从计算另一个表中提取的值更新 mysql 行

> ID：13134282
> 
> 赞同：0
> 
> 时间：2012-10-30T07:12:44.453
> 
> 标签：mysql, sql, sql-update

我有以下查询：

```
SELECT int_intrebari.id, COUNT( id_raspuns ) AS nr_raspunsuri
FROM int_intrebari, int_raspunsuri
WHERE int_intrebari.id = int_raspunsuri.id
GROUP BY id 
```

是否可以使用查询中的 nr_raspunsuri 更新第一个表，而无需编写 foreach 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:21:02.297

你可以[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)这样`JOIN`：

```
UPDATE int_intrebari i1
INNER JOIN
(
    SELECT id, COUNT( id_raspuns ) AS nr_raspunsuri
    FROM int_intrebari
    GROUP BY id 
) i2 ON i1.id = i2.id
SET i1.nr_raspunsuri = i2.nr_raspunsuri 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:22:18.067

你可以这样做 -

```
update int_intrebari left join int_raspunsuri on int_intrebari.id =int_raspunsuri.id
set int_intrebari.column_to_update = int_raspunsuri.column_from_update_second_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:17:20.637

```
UPDATE
  (SELECT int_intrebari.id, COUNT( id_raspuns) AS nr_raspunsuri
   FROM int_intrebari, int_raspunsuri
   WHERE int_intrebari.id = int_raspunsuri.id
   GROUP BY id) t1,
  int_raspunsuri t2
SET
  t2.nr_raspunsuri=t1.nr_raspunsuri
WHERE
  t1.id=t2.id 
```

# jquery - 将javascript日期变量传递给rails控制器

> ID：13134283
> 
> 赞同：1
> 
> 时间：2012-10-30T07:12:46.207
> 
> 标签：jquery, ruby-on-rails-3.1, fullcalendar

我有一个实现 jquery fullcalendar 的应用程序。在点击当天，我需要将选定的日期作为参数传递给 rails 控制器。当我在 dayclick 函数中提醒日期时，我得到的日期格式为“Tue Oct 30 2012 12:40:20 GMT+0530 (IST)”.. 但是当我在 jquery ajax 中作为参数传递给 rails 控制器时，它正在传递空白。我如何成功地在 Rails 控制器中获取它。请在下面找到我的 dayclick 代码。

```
dayClick: function(date, allDay, jsEvent, view) {
  var date = $('#calendar').fullCalendar('getDate');
  alert(date);
  $.get("<%=update_projects_admins_users_path%>",
    {
      id:'<%=params[:user]%>',
      date_selected: date
    },
    function(data) {
      $('.active_projects').html(data);
      //alert("Data: " + data + "\nStatus: " + status);
    }
  );
  if (allDay) {
    alert('Clicked on the entire day: ' + date);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:37:38.670

尝试使用手动构建的 url 字符串进行 $.get 调用：

```
 $.getScript("/controller/action/params") 
```

所以这方面的一个例子是这样的：

```
 $.getScript("/posts/increment_view_count.js?id="+id) 
```

这会将请求路由到“posts”控制器和“increment_view_count”操作。

在实现这个时你需要记住一些事情：

1.  您需要确保您在 routes.rb 文件中有一个匹配 http 动词（get、post 等）的路由，以允许 javascript 访问控制器操作。

2.  您必须确保控制器操作将响应 javascript 请求。默认情况下，控制器不会这样做，因此您可以通过以下方式使控制器中的所有操作都可以访问 javascript 请求：

    ```
    respond_to :html, :js 
    ```

在控制器的顶部。或者在方法中创建一个 respond_to 块，如下所示：

```
def index
 @people = Person.find(:all)

 respond_to do |format|
  format.html
  format.js
 end
end 
```

我还使用“$.getScript”而不是“$.get”，这可能是您想要查看的其他内容。

# javascript - Javascript 没有运行

> ID：13134285
> 
> 赞同：0
> 
> 时间：2012-10-30T07:13:09.367
> 
> 标签：javascript, html, ruby-on-rails

我创建了一个页面来显示新闻并添加了一些 javascript，它工作正常。但是当我在我的页面中添加一些越南语内容时，javascript 不再起作用了。如何解决这个问题？好的，这是我的html

```
.row
  .span7.offset2
    .box-model-news
      .row  
        .span3
          %h5
            = @news[0].title
      .row.hot_news
        - 3.times do |i|
          .span2
            - if @news.length > i+1  
              .fixed-box
                = image_tag @news[i+1].asset.url(:small)
              %h6
                = link_to @news[i+1].title, "#"
  .span3
    .box-model-news
      - rest_news = @news[4..@news.length-1]
      - if rest_news
        - rest_news.each do |rn|
          = link_to rn.title,"#" 
```

和javascript：

```
= javascript_tag do
  :erb
    alert("hi"); 
```

@news[0].title : 标题包含一些越南语单词

html代码

```
<div class="row">
<div class="span7 offset2">
<div class="box-model-news">
<div class="row">
<div class="newest-news">
<div class="span3">
<img alt="375649_373983335965607_104188519611758_1224852_274911402_n" src="/system/bbook_news/assets/000/000/011/medium/375649_373983335965607_104188519611758_1224852_274911402_n.jpg?1351583899">
</div>
<div class="span3">
<h5>
<a href="#">Vietnamese word: Xin Chào mọi người</a>
</h5>
</div>
</div>
</div>
<div class="row hot_news">
<div class="span2">
<div class="fixed-box">
<img alt="301806_293504937402115_112083275544283_698768_1122549180_n" src="/system/bbook_news/assets/000/000/012/small/301806_293504937402115_112083275544283_698768_1122549180_n.jpg?1351584751">
</div>
<h6>
<a href="#">Không chạy được </a>
</h6>
</div>
<div class="span2">
<div class="fixed-box">
<img alt="380269_296696787082930_112083275544283_706587_1195153490_n" src="/system/bbook_news/assets/000/000/013/small/380269_296696787082930_112083275544283_706587_1195153490_n.jpg?1351584787">
</div>
<h6>
<a href="#">fala</a>
</h6>
</div>
<div class="span2">
<div class="fixed-box">
<img alt="402580_344754638902723_100001045697946_1105971_1493945266_n" src="/system/bbook_news/assets/000/000/014/small/402580_344754638902723_100001045697946_1105971_1493945266_n.jpg?1351584806">
</div>
<h6>
<a href="#">yeah~!</a>
</h6>
</div>
</div>
</div>
</div>
<div class="span3">
<div class="box-model-news more-news">
<ul>
<li>
<a href="#">21212121</a>
</li>
<li>
<a href="#">So?</a>
</li>
</ul>
</div>
</div>
</div> 
```

javascript代码与上面的相同 alert("hi")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:51:33.783

在大多数情况下，无法运行 JS 是由于语法错误。

检查您的 javascript 控制台是否有任何错误消息

# visual-c++ - 作为实例变量创建的对象是否会自动引用计数？

> ID：13134289
> 
> 赞同：0
> 
> 时间：2012-10-30T07:13:48.393
> 
> 标签：visual-c++, reference, windows-runtime, c++-cx

我的类中的一个实例变量是另一个 ref 类的对象。据我所知，这很好用，但我担心如果没有明确调用`ref new Foo(...)`，引用计数将无法正确初始化。我的担心是对的，还是我很清楚？

**示例代码**

```
 ref class Foo {
     public:
         Foo();
         virtual ~Foo();
 }

 ref class Bar {
     public:
         Bar();
         virtual ~Bar();

         Foo _myNewFoo;
 } 
```

_myNewFoo 会导致泄漏吗？或者这样好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:00:17.710

Hans Passant 用一个合适的答案评论了最初的问题：

> 它是 C++/CX。这段代码没有问题，_myNewFoo 的引用计数将被正确初始化。

# jquery - 更改 iOS/ipad 上链接的 URL（应用内）

> ID：13134295
> 
> 赞同：0
> 
> 时间：2012-10-30T07:14:15.823
> 
> 标签：jquery, ios, ipad, click

我正在编辑嵌入在 ipad 应用程序中的 web 视图。它包含我无法用标签包装的各种多媒体元素。因此，我在页面上有一个元素，并根据用户的操作动态更改 href，然后强制点击发生。

这实际上很好，但动态性质却没有。两者都可以在 ipad 上的 Safari 中使用，但只有第一个可以在应用程序中使用。

```
HTML:
<a class="mylink" href="http://www.google.com">Test Click</a>

javascript (on touchend):
$('.mylink')[0].click(); 
```

* * *

以上工作。但这不会：

```
HTML:
<a class="mylink" href="http://www.google.com">Test Click</a>

javascript (on touchend):
var url = 'http://mywebsite.com/' + somethingDynamic;
$('.mylink').attr('href',url);
$('.mylink')[0].click(); 
```

如果我在分配 href 属性后发出警报，我已经确认它已被正确更改。在后一种情况下，点击甚至永远不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:17:25.280

`$('.mylink')[0]` 会将其转换为**DOM 对象**，并且它没有**click()**方法..

而是试试这个

```
$('.mylink:eq(0)').click();  // This is a jQuery Object 
```

还为其分配一个新的href并**触发click事件不会重定向**到新链接..您必须明确点击链接..

而是尝试使用**window.location重定向它**

```
window.location = url 
```

# yii - 在 YII 框架结构中放置“通用”类的位置？

> ID：13134300
> 
> 赞同：3
> 
> 时间：2012-10-30T07:14:33.000
> 
> 标签：yii

我需要创建一些类，并希望在 YII 框架中的位置方面得到一些帮助。我知道如果我创建一个模型，它必须放在“模型”目录中。通过同样的逻辑，我知道“视图”、“控制器”等会去哪里。但是，以下内容将放在我的 Web 应用程序中的什么位置：

1.  一个包含各种“数字”函数的类，例如货币转换、公制转换等？
2.  与 REST API 交互的类？（它与数据库交互）

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:29:52.293

要开始在 YII 上添加自定义类，您可以查看以下链接。

[http://www.yiiframework.com/wiki/165/understanding-autoloading-helper-classes-and-helper-functions/](http://www.yiiframework.com/wiki/165/understanding-autoloading-helper-classes-and-helper-functions/)

希望它会帮助你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:26:42.317

你可以在这里找到一个例子，我认为它非常详细：

[Yii项目站点的目录结构](http://www.yiiframework.com/wiki/155/the-directory-structure-of-the-yii-project-site/#hh3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:58:46.067

通常你可以在 Yii 中使用任何 PHP 类。您可以将它放在模型文件夹中（与 Yii 生成的模型一起）并直接访问它们，如下所示：

```
$myclass = new MyClass;
$myclass->methodname; 
```

或者（或者如果您遇到任何问题），您可以将它放在目录结构中的任何位置，并将其包含在主 index.php（在根目录中）中，如下所示：

```
$myclass = dirname(__FILE__).'/myclass.php'; 
require_once($myclass); 
```

# facebook - 如何将 http://apps.facebook.com/domain 更改为 https://facebook.com/domain

> ID：13134301
> 
> 赞同：0
> 
> 时间：2012-10-30T07:14:36.080
> 
> 标签：facebook

我在 facebook 内创建迷你网站，迷你网站的网址是

[http://apps.facebook.com/domain](http://apps.facebook.com/domain)

我想把它改成

[https://facebook.com/domain](https://facebook.com/domain)

我想从 url 地址中取出字符串“apps”。

我怎样才能做到这一点

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:31:01.260

**apps**子域用于画布应用程序。**www**子域用于配置文件和页面。将您的应用程序放在 www 子域上的唯一方法是将其作为选项卡应用程序安装在某个实体（如企业、产品等）的页面上。

如果您将应用安装为选项卡，则 URL 将类似于：[https ://www.facebook.com/activatedrinks/app_431623466868678](https://www.facebook.com/activatedrinks/app_431623466868678)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:25:25.767

我认为你已经在 Facebook 上创建了一个应用程序，据我所知，它不可能从 URL 中删除应用程序作为 Facebook 的默认子域来定义应用程序 URL 和 URL “http://www.facebook.com/xyz " 是用户识别的 URL。

您可以通过“http://www.facebook.com/username”轻松找到任何用户，因此我认为该 URL 默认用于识别用户而不是任何应用程序/站点。

# android - 在 android 中更改小部件的样式（editTextPreference、listPreference、dialogPreference）

> ID：13134304
> 
> 赞同：1
> 
> 时间：2012-10-30T07:14:52.083
> 
> 标签：android, android-theme

我创建了一个应用程序，在其中应用了主题 Theme.Holo.Light。现在我想将 PreferenceActivity 中的编辑文本和对话框的外观更改为 Theme.Dark 中的外观。如何将不同的主题应用于这个特定的小部件？

# c++ - 数字递增测试

> ID：13134310
> 
> 赞同：13
> 
> 时间：2012-10-30T07:15:32.050
> 
> 标签：c++, c, algorithm, logic

如果一个数字等于 n + nn + nnn + ... 对于 1 和 9 之间的某个数字 n，则称为数字递增。例如，24 是数字递增的，因为它等于 2 + 22（这里 n = 2）。

实际上，我的一个朋友问我这个问题，我一直在思考这个问题，但到目前为止找不到确切的解决方案。任何人都可以帮忙吗？如果数字增加，我需要返回 true 的函数，否则返回 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:33:31.483

具有此性质的数字相对较少：在`unsigned long long`（64位）范围内，只有172个数字递增数字。

**因此，就实际解决方案而言，将它们全部预先计算并将它们**放入哈希中是有意义的。这里是 Python 代码：

```
# Auxiliary function that generates
# one of the 'nnnn' elements
def digits(digit,times):
  result = 0
  for i in range(times):
    result += digit*(10**i)
  return result

# Pre-computing a hash of digit-increasing
# numbers:
IncDig = {}
for i in range(1,30):
  for j in range(1,10):
    number = reduce(lambda x,y:x+y,[digits(j,k) for k in range(1,i+1)])
    IncDig[number] = None 
```

那么实际的检查函数只是在哈希中查找：

```
def IncDigCheck(number):
  return (number in IncDig) 
```

这实际上是 O(1)，并且预先计算所花费的时间和空间是最小的，因为只有 9 个不同的数字（零不计算在内），因此只有`K*9`类型`n + nn + ...`的组合才能得到 length 的总和`K`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T09:35:37.460

一般表示为：

> n + (n*10 + n) + (n*100+n)...

如果数字看起来像相同数字的总和，那么任何数字都可以表示为

> (1+111+...) * base_digit

. 假设我们可以使用简单的算法：

```
bool isDigitIncreasing(const int num)
{
    int n = 1;
    int sum = 1; //value to increase n
    while (n <= num) {
        //if num is (111...) * base_digit and base_digit is < 10
        if (num % n == 0 && n * 10 > num) return true;
        sum = sum * 10 + 1; //N*10+N where n is 1 as was assumed
        n += sum;  //next step
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T09:17:25.580

Simplest possible way is do the addition (bottom-up), I'll use simple for loop:

```
List<int> numbersSum = new List<int>{1,2,3,4,5,6,7,8,9};
List<int> lastNumber = new List<int>{1,2,3,4,5,6,7,8,9};
for(int i=0;i<= lg n + 1;i++)
{

   for(int j=0;j<9;j++)
   {
      if(list[j] < n)
      {
          var lastNumberJ = lastNumber[j]*10+j+1;
          list[j] += lastNumberJ; // add numbers to see will be same as n.
          if (list[j] == n)
            return j+1;
          lastNumber[j] = lastNumberJ;
      }
   }   
}

return -1; 
```

The important part is you just need at most `log n` iteration and also you can return sooner if all numbers are bigger than given number, this is `O(log n)` algorithm.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T09:14:59.347

简单的详尽搜索将起作用。

```
def is_digit_increasing_number(x):
    # n = 1, 1+11, 1+11+111, ...
    n = 1
    i = 1
    while n <= x:
        if x % n == 0 and n * 10 > x:
            return True
        i += 1
        n = n * 10 + i
    return False 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T03:36:07.500

这是一个python代码。这里的基本逻辑是，如果一个数字递增数除以1-9之间的特定数字，则得到一个仅由1组成的数字递增数。1的所有数字递增数都遵循特定模式，即12345678。 ..

```
import sys
for n in range(1,10):
    a=1
    if k%n!=0:
        a=0
    else:
        g=str(k/n)
        j=int(g[0])
        for i in range(1,len(g)):
            if int(g[i])==j+1:
                j=int(g[i])
            else:
                a=0
                break
    if a==1:
        print "Yes,it is a digit increasing number"
        sys.exit(0)
print "No,it is not a digit increasing number" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T09:51:52.270

我已经这样做了。退房一次。

```
int sum = 0, count =0;
bool flag = false;

public bool isDigitIncreasing(int input_number)
{
int  n= get_number_of_digit(input_number); // Gets number of digits
int sum = 0;
    for(int i=0;i<n;i++)
    {
        sum = sum*10+1;
        count = count + sum;
    }

    for(int i=1; i<=9;i++)
    {
        if((input_number)==count*i)
        {
            flag = true;
            break;
        }
        else
        flag = false;
    }
    return flag;

}

    public int get_number_of_digit(int num)
    {

        int size = 0;
        do
        {
            num = num/10;
            size++;
        }while(num>0);
        return size;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-19T18:45:04.940

这是最短的解决方案

```
 public static int isDigitIncreasing (int n)
        {       
            if(n<10)
            {
                return 1;
            }

            for(int i=1;i<=9;i++)
            {
                int tempsum=i;
                int previous=i;
                while(tempsum<=n)
                {
                    previous=previous*10 + i;
                    tempsum=tempsum + previous;
                    if(tempsum==n)
                    {
                        return 1;
                    }
                }
            }

            return 0;
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T09:18:30.860

**歧义：**值 1-9 是否重复？（懒得自己google）

如果 1-9 重复，那么以下应该有效。如果不是，并且您希望代码仅适用于大于 10 的值，那么您可以`mult`使用 10 进行初始化。

```
int i, mult = 1, result, flag;

for( i=1; i<9; i++ )
{
    flag = 0;

    while( result < TARGET )
    {
        result = result+(i*mult);
        mult   = mult*10;

        if( result == TARGET )
        {
            flag = 1;
            break;
        }
    }
    if( flag == 1 )
        break;
} 
```

执行后，如果值为 1，`i`则必须包含 RESULT 为重复数的`flag`值。如果执行后 flag 为零，则 TARGET 不是重复数。

我想知道一个数字是否可能重复多个值，只是好奇。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-30T09:34:57.450

这`num`是数字，`n`是数字

```
#include<stdio.h>

int f(int num,int n)
{
 int d=n;
 while(num>0)
 {
        num-=n;
        n=d+n*10;
 }
 if(num==0)
        return 1;
 else
        return 0;
}

int main()
{
 int num;
 int n;
 int flag;
 printf("Enter the number :");
 scanf("%d",&num);
 printf("Enter the digit :");
 scanf("%d",&n);
 flag = f(num,n);
 if(flag == 1)
        printf("It's in n+nn+nnn+...\n");
 if(flag ==0)
        printf("It's not\n");
 return 0;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-08T19:43:53.767

```
// Example program
#include <iostream>
#include <string>

int isDigitIncreasingNo(int n) {

    if(n<=0)
      return 0;

    int len = std::to_string(n).length();

    int vector1 = 0;
    int vector2 = 0;

    for(int i=1;i<=len;i++)
       vector2 = (vector2*10)+i;

    vector1 = vector2/10;

    if(n % vector2 == 0 && (n / vector2)<=9  )
        return 1;

    if(n % vector1 == 0 && (n / vector1)<=9  )
        return 1;

    return 0;
}

int main()
{
  for (int i=0; i<10000000; i++) {
        if (isDigitIncreasingNo(i)) {
            printf("%d\n", i);
        }
    }
    return 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-19T19:25:22.943

令 d(k) 为 1+11+111+...+(11...11) ，其中最后一个数字有 k 位。那么d(1)=1，d(k+1)=10d(k)+k+1。

我们想测试是否 d(k)*i = n，对于一些 k，对于一些 i=1..9。

如果我们已经计算了 d(k)，那么 i（如果存在）必须是 n/d(k)。我们可以通过将 n 与 ((n/d(k))%10)*d(k) 进行比较来检查 n/d(k) 是否正确。如果 i 大于 9，%10 会使测试失败。

这为我们提供了一个相对简洁的解决方案：计算后续的 d(k)，直到它们大于 n，并在每个点检查 n 是否是 d(k) 的数字倍数。

这是该想法的一个非常简单的代码实现：

```
#include <stdio.h>

int is_digit_increasing(int n) {
    for(int d=1,k=1;d<=n;d=d*10+ ++k)if(n==(n/d)%10*d)return 1;
    return 0;
}

int main(int argc, char**argv) {
    for (int i=0; i<10000; i++) {
        if (is_digit_increasing(i)) {
            printf("%d\n", i);
        }
    }
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-11-10T09:27:31.480

```
 public boolean isDigitIncreasing(int number)

 {
  int sum;
  int size=calculateNumberOfDigits(number);

  for(int i=1;i<=9;i++)
   {
      sum=0;
      int temp=size;
      while(temp>=1)
        {
            for(int j=temp;j<=1;j--)
             {
                sum=sum+i*(int)Math.pow(10,j-1);
             }
            temp--;
         }
      if(sum==number)
       {
          return true;//Its a digit increasing
        }
    }

     return false;
  }

 public int calculateNumberOfDigits(int number)
  {
     int size=0;
     do
       {
             number=number/10;
             size++;
        }while(size>0);

       return size;
  } 
```

# javascript - string.Format 不适用于字符串行类型参数？

> ID：13134311
> 
> 赞同：-1
> 
> 时间：2012-10-30T07:15:32.023
> 
> 标签：javascript, jquery

我必须将两个参数传递给 CallSome()

```
string.Format("CallSome({0},'{1}');", someId, someName); 
```

但是 someName 不适用于这种有空间的值。喜欢

它适用于'123'，'name'

但不是因为这个“我的名字”它在“我的”之后给出了一个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:45:43.333

假设您使用的是 C#，并且您希望将其输出到 ASP.NET 或类似 Web 技术中的 Web 响应，那么......您的代码应该可以工作。

例如，给定`someId`= 123 和`someName`= "word, word"：

```
CallSome(123,'word, word'); 
```

只是，检查您在网页中获得的输出代码，它会揭示真相。

* * *

**除非它被插入到被单引号包围的地方。**

例如，给定`someId`= 123 和`someName`= "word, word"：

```
var something = 'CallSome(123, 'word, word')'; 
```

因此，就浏览器而言，第一个单引号看起来像是文本的结尾。在这种情况下，您应该使用双引号，如下所示：

```
var something = "CallSome(123, 'word, word')"; 
```

或这个：

```
var something = 'CallSome(123, "word, word")'; 
```

或者，您可以转义单引号：

```
var something = 'CallSome(123, \'word, word\')'; 
```

* * *

**除非它在论点中有引号。**

例如，给定`someId`= 123 和`someName`= "word' word"：

```
var something = 'CallSome(123, 'word' word')'; 
```

同样，就浏览器而言，第一个单引号看起来像是文本的结尾。这种情况有点复杂，因为它需要以一种方式转义引号：

```
var something = "CallSome(123, 'word\' word')"; 
```

或其他：

```
var something = 'CallSome(123, "word\' word")'; 
```

* * *

**除非它有一个新行、一个 javascript 注释，或者我不知道参数中还有什么。**

只是没有那些！

* * *

现在，在 C# 中，您需要转义引号。要输出双引号，您可以这样做：

```
string.Format("CallSome({0},\"{1}\");", someId, someName); 
```

这给出了：

```
CallSome(123,"word, word"); 
```

另一方面，如果你真的需要使用单引号（我不这么认为，考虑到错误），那么你将不得不在输出 javascript 中转义它们：

```
string.Format("CallSome({0},\\'{1}\\');", someId, someName); 
```

这给出了：

```
CallSome(123, \'word, word\'); 
```

如果它是引用字符串的一部分，这是可以的，如我上面的示例：

```
var something = 'CallSome(123, \'word, word\')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:30:38.107

**尝试这个**

> string.Format("CallSome({0},''{1}'');", someId, someName);

您需要通过在 start 和 end 中添加额外的单引号来转义*单**引号*。

# javascript - Node.js 作为前端应用程序的后端服务器

> ID：13134315
> 
> 赞同：0
> 
> 时间：2012-10-30T07:15:45.213
> 
> 标签：javascript, node.js, socket.io

我想使用 Node.js 作为后端服务器运行来服务前端**socket.io**请求。

我发现的示例似乎只能从 Node.js 服务器运行页面。

```
<script src="/socket.io/socket.io.js"></script> 
```

上面的 js include 是由 Node.js 提供的，如果前端是不同的应用程序（例如 PHP 或静态页面），如何包含它？我是否需要包含所有依赖的 socket.io js 库才能使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:46:10.383

我目前正在与 node.js/socket.io 一起运行 apache/php 如果这是您想要做的，您可以通过在与 apache 所服务的端口不同的端口上提供 socket.io 来实现（假设为 80） .

在 node.js 中，在端口 8080 上初始化 socket.io 侦听器，例如：

```
var io = require('socket.io').listen(8080); 
```

我相信，默认情况下，socket.io 也会方便地为您提供其静态客户端文件，这样在您的 html 中，您可以：

```
<script src="http://yourhost:8080/socket.io/socket.io.js"></script> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:20:38.100

这完全取决于您的服务器配置。您可以选择不被任何其他资源使用的 Node.js 后端路径，并配置您的 Web 服务器以服务其他所有内容。

例如，对于 Apache，我使用 ProxyPass 指令来启用与不同端口上的本地 Node.js 的连接（以绕过本地端口限制），但可能不是您的选择：

```
ProxyPass /help/server/ http://localhost:8002/ connectiontimeout=1500ms 
```

# c# - 在 C# 中读取 XML 值

> ID：13134316
> 
> 赞同：-1
> 
> 时间：2012-10-30T07:15:48.057
> 
> 标签：c#, .net, xml

我有想要通过 C# 中的 xpath 读取的 XML 文件

我的 XML 将如下所示：

```
<?xml version="1.0"?>
<doc>
     <members>
        <member test="testing" name="T:QuexstBase.Tools.RegistryHelper.RegistryHelper">
            <summary>
            RegistryHelper class to use registry operations.
            </summary>
        </member>
        <member test="testing" name="F:QuexstBase.Tools.RegistryHelper.RegistryHelper.baseKey">
            <summary>
            private member base key
            </summary>
        </member>
        <member  test="tester"  name="F:QuexstBase.Tools.RegistryHelper.RegistryHelper.subKey">
            <summary>
            default sub key
            </summary>
        </member>
    </members>
</doc> 
```

我想读**/members/member/@test**的值是测试。我不想为这些使用 foreach 或 for 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:21:13.543

```
var xDoc = XDocument.Parse(xml);//or XDocument.Load(fileName)
var members = xDoc.XPathSelectElements("//member[@test='testing']")
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:41:15.450

尝试使用`XmlDocument`：

```
XmlDocument document = new XmlDocument();
document.LoadXml("your xml string");
var nodes = document.SelectNodes("/members/member/@test");
//or for single node  
var node = document.SelectSingleNode("/members/member/@test"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:31:11.603

```
var xml = @"<doc>
        <members>
        <member test=""testing"" name=""T:QuexstBase.Tools.RegistryHelper.RegistryHelper"">
            <summary>
            RegistryHelper class to use registry operations.
            </summary>
        </member>
        <member test=""testing"" name=""F:QuexstBase.Tools.RegistryHelper.RegistryHelper.baseKey"">
            <summary>
            private member base key
            </summary>
        </member>
        <member  test=""tester""  name=""F:QuexstBase.Tools.RegistryHelper.RegistryHelper.subKey"">
            <summary>
            default sub key
            </summary>
        </member>
    </members>
</doc>";

var ms = new System.IO.MemoryStream(System.Text.Encoding.UTF8.GetBytes(xml));
var doc = new XPathDocument(ms);
var nav = doc.CreateNavigator();
var nodes = nav.Select("//member[@test='testing']"); 
```

**更新**：看看这篇文章[XDocument 或 XmlDocument](https://stackoverflow.com/questions/1542073/xdocument-or-xmldocument)

# spring - Bean 属性“myDataSource”不可写或设置方法无效

> ID：13134319
> 
> 赞同：1
> 
> 时间：2012-10-30T07:16:06.397
> 
> 标签：spring

在 Spring bean 中使用此配置获取以下错误：

```
<bean name="/login.htm" class="com.virtusa.web.EmployeeController">
  <property name="service" ref="service"></property>
</bean>

<bean id="service" class="com.virtusa.service.ServiceIMP">
  <property name="dao" ref="EmployeeDAO"></property>
</bean> 

<bean id="EmployeeDAO" class="com.virtusa.dao.EmployeeDAO">
  <property name="myDataSource" ref="myDataSource" />
</bean> 
```

我的弹簧配置文件如下：

```
private DataSource myDataSource;
private JdbcTemplate jdbcTemplate;

public void setDataSource(DataSource myDataSource) {
    this.myDataSource = myDataSource;
     this.jdbcTemplate = new JdbcTemplate(myDataSource);
 } 
```

我的道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:11:57.020

既然你有`property name="myDataSource"`，你的 setter 需要被命名`setMyDataSource()`而不是`setDataSource()`.

# tsql - 在 TSQL 中组合多个 CTE

> ID：13134320
> 
> 赞同：0
> 
> 时间：2012-10-30T07:16:11.393
> 
> 标签：tsql, common-table-expression

我有两个 CTE，我想将它们组合在一起。我尝试了很多，但我遇到了语法错误。第一部分：

```
declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

     with TimeRanges as (
  select @Start as StartTime, @Start + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime  < @Finish ) 
```

这是第二部分：

```
;with cte as
(
    select SessionStartTime as changetime,1 as CC from Calls
    union all
    select SessionCloseTime,-1 from Calls
)
    select top 1 changetime,rt from
    (
    select * from cte
        cross apply 
        (select SUM(cc) as rt from cte c where c.changetime<=cte.changetime) rt         
    ) v
    order by rt desc 
```

我想做的事：

```
 @Start datetime, 
    @Finish datetime,
    @TimeRange time
AS
BEGIN

    SET NOCOUNT ON;
    declare @res int SET @res = 0

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

    with TimeRanges as 
     (  select @Start as StartTime, @Start + @TimeRange as EndTime
        union all  
        select StartTime + @TimeRange, EndTime + @TimeRange
        from TimeRanges
        where EndTime  < @Finish ),

    cte as
    (
    select SessionStart as changetime,1 as CC from TimeRanges
    union all
    select SessionEnd,-1 from TimeRanges
    )
    select top 1 changetime,rt from
    (
    select * from cte
        cross apply 
        (select SUM(cc) as rt from cte c where c.changetime<=cte.changetime) rt         
    ) v
    order by rt desc

    select StartTime, EndTime,cte.rt
    from TimeRanges as TR left outer join
      dbo.Test as Test on TR.StartTime <= Test.SessionStartTime 
      and Test.SessionCloseTime < TR.EndTime      
    where Test.ScenarioID = 24 
    group by TR.StartTime, TR.EndTime,cte.rt    
END 
```

第一个 CTE，根据 StartTime 和 EndTime 之间的 @timerange 对时间进行分组或拆分。例如，StartTime 11:00 EndTime 11:10 和 TimeRange 05:00（5 分钟）然后将它们分成两部分：11:00 - 11:05 和 11:05 - 11:10。第二个 CTE 为每个这些范围计算一些东西。在这里不重要。我试图将它们结合起来，但出现错误：

列名“SessionStart”无效

无效的对象名称“时间范围”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:23:54.960

因为在`TimeRanges`CTE 中，您对列的命名不同：

```
with TimeRanges as 
 (  select @Start as StartTime, @Start + @TimeRange as EndTime --StartTime and EndTime
    union all  
    select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime  < @Finish ),

cte as
(
select StartTime as changetime,1 as CC from TimeRanges --StartTime, not SessionStart
union all
select EndTime,-1 from TimeRanges --EndTime
)
select top 1 changetime,rt from
(
select * from cte
    cross apply 
    (select SUM(cc) as rt from cte c where c.changetime<=cte.changetime) rt         
) v
order by rt desc 
```

但是您随后尝试在第二个查询中再次引用 CTE。您不能这样做 - 每个 CTE 都适用于单个查询。

你可以重复一遍：

```
with TimeRanges as 
 (  select @Start as StartTime, @Start + @TimeRange as EndTime --StartTime and EndTime
    union all  
    select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime  < @Finish )
select StartTime, EndTime,cte.rt
from TimeRanges as TR left outer join
  dbo.Test as Test on TR.StartTime <= Test.SessionStartTime 
  and Test.SessionCloseTime < TR.EndTime      
where Test.ScenarioID = 24 
group by TR.StartTime, TR.EndTime,cte.rt 
```

# iphone - 子类 UIButton 在 iphone 中使用自定义 TableCell 保留选中的检查

> ID：13134321
> 
> 赞同：0
> 
> 时间：2012-10-30T07:16:12.797
> 
> 标签：iphone, cocoa-touch, uitableview

我有一个**TableView**并且我正在使用**自定义 TableCell**。在 TableCell 中我有一个按钮。现在在 TableView 中，我创建了一个**Bool 值**来检查 Check 按钮是否被选中。问题是当我**滚动表格时，单元格会被重用**，因此按钮会自动取消选择。

```
 if (checkButton.selected==NO) {
        NSLog(@"ooo");
        checkButton.selected=YES;
        checkSelected=YES;
   }
    else {
        NSLog(@"Okkkkk");
       checkButton.selected=NO;
       checkSelected=NO;
    } 
```

我有一个想法，**使用 BOOl 的自定义属性对 UIButton**进行子类化。但我不知道要锻炼。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:26:49.293

```
@interface CustomButton : UIButton
@property(nonatomic) BOOL isSelected;
// DO NOT FORGET TO SYNTHESIZE MY isSelected
@end 
```

因为您使用的是自定义单元格。您可以在自定义单元格中创建一个属性 CustomButton 。

```
@interface YourCustomCell : UITableViewCell
@property(nonatomic, strong) CustomButton *button;
@end 
```

在你的 cellForRowAtIndexPath 方法中

```
 -(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {

   YourCustomCell *cell = (YourCustomCell*)[tableView dequeueReusableCellWithIdentifier:cellType];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:cellType owner:nil options:nil];
        cell = (YourCustomCell*)[nib objectAtIndex:0];
    }
    //you can add a target to your button here
    cell.button addTarget:self action:@selector(changeButtonState:).....
    if(cell.button.isSelected == YES)
          NSLog(@"selected");
    else
          NSLog(@"not selected");

-(void)changeButtonState:(CustomButton*)button
{
   if(button.isSelected) button.isSelected = NO;
   else                  button.isSelected = YES;
   [yourTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:22:55.720

您可以跟踪使用数组选择的按钮。选择按钮时，只需在特定索引处设置值 1。并在取消选择时将其设置为 0。

然后在创建单元格时，您可以按如下方式签入：

```
if ([[arr_Check objectAtIndex:indexPath.row] isEqualToString:@"0"])
    checkButton.selected=NO;
else
    checkButton.selected=YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:29:40.373

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%i%i",indexPath.section,indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    }
    else
    {
        NSArray *cellSubs = cell.contentView.subviews;
        for (int i = 0 ; i < [cellSubs count] ; i++)
        {
            [[cellSubs objectAtIndex:i] removeFromSuperview];
        }
    }

    UICheckBox *checkBox = [[UICheckBox alloc] initWithFrame:CGRectMake(0, 0, 44.0, 44.0)];
    checkBox.tag = indexPath.row;
    checkBox.titleLabel.tag = indexPath.section;
    [checkBox addTarget:self action:@selector(checkBoxPressed:) forControlEvents:UIControlEventTouchUpInside];
    for (NSIndexPath *temp in selectedObjects) {
        if ([temp isEqual: indexPath]) {
            checkBox.selected = TRUE;
        }
    }
    [cell.contentView addSubview:checkBox];

    return cell;
}

-(void)checkBoxPressed:(UICheckBox*)sender
{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:sender.tag inSection:sender.titleLabel.tag];
    if (sender.selected) 
        [selectedObjects removeObject:indexPath];
    else
        [selectedObjects addObject:indexPath];
    sender.selected = !sender.selected;
    NSLog(@"\n\n%@",selectedObjects);
} 
```

这`selectedObjects`是一个全局`NSArray`，`UICheckBox`是一个子类`UIButton`

# blackberry - 如何将黑莓模拟器与 BES 连接并配置 Gmail？

> ID：13134322
> 
> 赞同：0
> 
> 时间：2012-10-30T07:16:23.260
> 
> 标签：blackberry, blackberry-simulator

我想在黑莓模拟器中配置 GMail id。为此，首先我必须与 BES 建立联系。为此，我尝试使用 BlackBerry MDS Simulator 和 Blackberry BBM 模拟器。但每次都说：“**激活请求失败。服务连接不可用**”

任何人都可以在黑莓模拟器中配置邮件帐户吗？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:24:00.053

我不确定您是否能够连接真实帐户（从未尝试过），但请阅读以下内容：http: [//supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-email-simulation-support-in-the -BlackBerry-MDS/ta-p/446113](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-email-simulation-support-in-the-BlackBerry-MDS/ta-p/446113)

但是您可以使用 ESS 进行电子邮件接收发送测试： http: [//www.blackberryforums.com/general-blackberry-discussion/62205-please-help-ess-email-server-simulator.html](http://www.blackberryforums.com/general-blackberry-discussion/62205-please-help-ess-email-server-simulator.html)或 [http://code-dojo .blogspot.nl/2010/04/how-to-send-email-in-blackberry.html](http://code-dojo.blogspot.nl/2010/04/how-to-send-email-in-blackberry.html)

# c# - Windows Mobile 中的 BitmapData 大小

> ID：13134323
> 
> 赞同：0
> 
> 时间：2012-10-30T07:17:00.203
> 
> 标签：c#, bitmap, windows-mobile, bitmapdata, libpng

我正在尝试使用本机函数读取图像。为此，我尝试使用以下代码：

```
 var result = new Bitmap((int)info.width,(int)info.height,PixelFormat.Format24bppRgb);
        var data = result.LockBits(new Rectangle(0, 0, result.Width, result.Height), ImageLockMode.WriteOnly, PixelFormat.Format24bppRgb);
        bool success = ReadFullImage(data.Scan0, ref info, ref png);
        result.UnlockBits(data);
        if (!success)
            return null;
        else
        {
            return result;
        } 
```

其中`info`包含图像的高度和宽度，`png`is`png_struct`和`ReadFullImage`is wrapper around `png_read_image`。但是，我遇到了访问冲突（异常代码 0xc0000005）。

之后，我查看了值`data`持有，我发现了这一点：

```
 data    {System.Drawing.Imaging.BitmapData} System.Drawing.Imaging.BitmapData
    Height  1557    int
        m_bmpdata   {Microsoft.AGL.Drawing.AGL_BITMAPDATA} Microsoft.AGL.Drawing.AGL_BITMAPDATA
    PixelFormat Format24bppRgb  System.Drawing.Imaging.PixelFormat
        Scan0   1638432 System.IntPtr
    Stride  1512    int
    Width   503 int 
```

其中似乎存在问题。正在写入的行的大小为 2012 字节，但只有 1512 字节可用，不久之后就会在分配的内存之外进行写入尝试。

问题是，为什么行的大小只有 1512=503*3+3，尽管格式是每像素 24 位，以及如何分配足够的内存并将其馈送到位图中？

或者，可以以兼容的方式使用 libpng 读取 png 吗？

更新：ReadFullImage 是一个 DllImport

```
extern "C" void read_image_full( unsigned char * buffer,pngImageInfo* info,pngDataStructures* png)
{
    png_bytepp  row_pointers = new png_bytep[info->height];
    for (unsigned int i = 0;  i < info->height;  ++i)
        row_pointers[i] = buffer + i*info->rowbytes;
    png_read_image(png->png_struct_field, row_pointers);
    return true;
} 
```

并且通过 png_get_rowbytes 检索行字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:51:30.180

首先，据我所知，**24/8 = 3**，所以**503*(24/8)=1509**，那么*Stride*值是正确的。

另一件事是**png_read_image**使用指针数组，而**Scan0**不是指针数组。这意味着**png_read_image**正在从*Scan0***读取**数据（但它是只写的）并将此数据解释为指针。

 *您可以尝试以下（未测试）。您需要修改*ReadFullImage*的第一个参数（现在它将是一个***int[]***）：

```
var result = new Bitmap((int)info.width,(int)info.height,PixelFormat.Format24bppRgb);
var data = result.LockBits(new Rectangle(0, 0, result.Width, result.Height), ImageLockMode.WriteOnly, PixelFormat.Format24bppRgb);
int y, ptr = data.Scan0.ToInt32();
int[] lines = new int[result.Height];
for (y = 0; y < lines.Length; y++)
{
    lines[y] = ptr;
    ptr += data.Stride;
}
bool success = ReadFullImage(lines, ref info, ref png);
result.UnlockBits(data);
if (!success)
    return null;
else
{
    return result;
} 
```

我假设这是一个**32 位**应用程序。*

# macos - 在 Mac 中通过网络访问 postgresql 服务器

> ID：13134325
> 
> 赞同：5
> 
> 时间：2012-10-30T07:17:09.587
> 
> 标签：macos, postgresql

我已经在我的 Mac 上安装了[Postgres 应用程序](http://postgresapp.com/)并且正在运行一个数据库。

我可以使用命令从终端连接它`psql -h localhost`

现在我想从同一网络上的另一台机器访问这个服务器。

当我`psql -h <hostname> -U <username>`从另一台机器上做时，我得到了错误

```
psql: could not connect to server: Connection refused
    Is the server running on host "my hostname" (xx.xx.xx.xxx) and accepting
    TCP/IP connections on port 5432? 
```

在运行服务器的机器上，`lsof -i | grep LISTEN`我得到了以下结果。

```
postgres  3196 sudarm    5u  IPv6 0x1caf6120      0t0  TCP localhost:5432 (LISTEN)
postgres  3196 sudarm    6u  IPv4 0x14678db0      0t0  TCP localhost:5432 (LISTEN)
postgres  3196 sudarm    7u  IPv6 0x1caf6a80      0t0  TCP localhost:5432 (LISTEN) 
```

我是否需要做任何其他事情才能从另一台机器连接到服务器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T07:33:24.300

错误消息提出了正确的问题：服务器是否接受端口 5432 上的连接？您提供的`lsof`输出表明不，不是。PostgreSQL 正在监听`localhost:5432`，这意味着它只会接受来自数据库服务器本身的连接。

打开服务器的`postgresql.conf`，设置`listen_addresses = '*'`，然后重新启动 PostgreSQL。然后它将侦听所有接口上的连接，从而接受网络上的连接。

从这里开始，您可能会遇到的下一个问题是身份验证。（PostgreSQL 将接受连接，但您可能没有告诉它一旦通过网络建立连接后该做什么。）确保服务器`pg_hba.conf`有一个匹配您的数据库/用户/源地址组合的条目——类似的东西`host all all 10.0.0.0/8 md5`可能是合适的-- 并根据需要重新加载 PostgreSQL 以应用更改。

该`md5`部分告诉 PostgreSQL 尝试使用密码进行身份验证，因此如果您还没有设置密码，您还需要为相关用户设置密码。但是，您通常管理您的数据库（例如`psql template1`在数据库服务器上），例如`ALTER USER whomever WITH PASSWORD 'your_new_password'`.

# c# - c#: 将带有命名空间的 xml 反序列化为 clr 对象

> ID：13134329
> 
> 赞同：1
> 
> 时间：2012-10-30T07:17:22.857
> 
> 标签：c#, xml, deserialization

我需要一些有关 XmlSerializer 的帮助。我必须关注 xml 片段：

```
<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet href="http://www.blogger.com/styles/atom.css" type="text/css"?>
<feed xmlns='http://www.w3.org/2005/Atom' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:georss='http://www.georss.org/georss' xmlns:gd='http://schemas.google.com/g/2005' xmlns:thr='http://purl.org/syndication/thread/1.0'>
  <id>tag:blogger.com,1999:blog-4233645339430781865.archive</id>
  <updated>2012-10-22T07:00:02.139+03:00</updated>
  <title type='text'>Code !t</title>      
  <link rel='alternate' type='text/html' href='http://www.etabakov.com/'/>
  <author>
    <name>Емил Табаков</name>
    <email>noreply@blogger.com</email>
    <gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='32' height='32' src='//lh5.googleusercontent.com/-TbRwL19G85U/AAAAAAAAAAI/AAAAAAAAFxg/NRV6ZYqd9Wg/s512-c/photo.jpg'/>
  </author>
  <generator version='7.00' uri='http://www.blogger.com'>Blogger</generator>
  <entry>
    <id>tag:blogger.com,1999:blog-4233645339430781865.post-513753811167440871</id>
    <published>2012-10-12T11:22:35.759+03:00</published>
    <updated>2012-10-12T11:22:35.759+03:00</updated>
    <category scheme='http://schemas.google.com/g/2005#kind' term='http://schemas.google.com/blogger/2008/kind#comment'/>
    <title type='text'>Great post indeed. I really like that you are prov...</title>
    <content type='html'>Great post indeed. I really like that you are providing information on .NET for freshers , Being enrolled  at http://www.wiziq.com/course/57-fresher-training-projects i found your information very helpful indeed. Thanks for it.</content>
    <link rel='edit' type='application/atom+xml' href='http://www.blogger.com/feeds/4233645339430781865/8317071019326278340/comments/default/513753811167440871'/>        
    <author>
      <name>sarabjeet</name>
      <uri>http://www.blogger.com/profile/11223974173581186160</uri>
      <email>noreply@blogger.com</email>
      <gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='http://img2.blogblog.com/img/b16-rounded.gif'/>
    </author>
    <thr:in-reply-to href='http://www.etabakov.com/2012/06/net-guy-velocityconf-2012-day-1.html' ref='tag:blogger.com,1999:blog-4233645339430781865.post-8317071019326278340' source='http://www.blogger.com/feeds/4233645339430781865/posts/default/8317071019326278340' type='text/html'/>
    <gd:extendedProperty name='blogger.itemClass' value='pid-899300522'/>        
  </entry>
</feed> 
```

而且我还有以下 c# 对象：

饲料.cs

```
[XmlRoot(ElementName = "feed", Namespace = "http://www.w3.org/2005/Atom"), XmlType("feed")]
public class Feed
{
    [XmlElement("id")]
    public string Id { get; set; }

    [XmlElement("title")]
    public string Title { get; set; }

    [XmlElement("author")]
    public Author Author { get; set; }

    [XmlElement("entry")]
    public List<Entry> Entry;
}
public class Entry
{
    [XmlElement("id")]
    public string Id { get; set; }

    [XmlElement("title")]
    public string Title { get; set; }

    [XmlElement("content")]
    public string Content { get; set; }

    [XmlElement("published")]
    public DateTime Published { get; set; }

    [XmlElement("updated")]
    public DateTime Updated { get; set; }

    [XmlElement("category")]
    public List<Category> Categories;

    [XmlElement("author")]
    public Author Author { get; set; }

    [XmlElement(ElementName = "in-reply-to", Namespace = "thr", Type = typeof(ReplyTo), IsNullable = true)]
    public ReplyTo ReplyTo { get; set; }
}

public class ReplyTo
{
    [XmlAttribute("ref")]
    public string Id { get; set; }
} 
```

到目前为止，一切都运行良好，除了 ReplyTo 属性始终保持为空。我需要从

如果有人告诉我我缺少什么，我会非常高兴。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:21:53.053

您需要的命名空间是“http://purl.org/syndication/thread/1.0”

“thr” 只是*别名*- 由`xmlns:thr`顶部的声明。

所以：

```
[XmlElement(ElementName = "in-reply-to", Namespace = "http://purl.org/syndication/thread/1.0", Type = typeof(ReplyTo), IsNullable = true)]
public ReplyTo ReplyTo { get; set; } 
```

# android - 无法检测到在 Android 中何时接听了拨出电话

> ID：13134331
> 
> 赞同：26
> 
> 时间：2012-10-30T07:17:25.493
> 
> 标签：android, broadcastreceiver

为了检测拨出电话何时得到应答，我尝试从[这个问题](https://stackoverflow.com/questions/2250455/detect-if-an-outgoing-call-has-been-answered)`PhoneStateListener`创建一个并监听`TelephonyManager`'s `CALL_STATE_RINGING`,`CALL_STATE_OFFHOOK`和, 但它似乎不起作用，如下所述。`CALL_STATE_IDLE`

首先，我在清单中注册了以下权限：

```
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /> 
```

然后，每当进行拨出呼叫时都会捕获事件的被`BroadcastReceiver`调用`OutCallLogger`：`NEW_OUTGOING_CALL`

```
<receiver android:name=".listener.OutCallLogger">
    <intent-filter>
        <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
    </intent-filter>
</receiver> 
```

接下来，我的`OutCallLogger`. 我设置了一个布尔值`noCallListenerYet`，以避免在调用时附加一个新`PhoneStateListener`的。`TelephonyManager``onReceive()`

```
public class OutCallLogger extends BroadcastReceiver {

    private static boolean noCallListenerYet = true;

    @Override
    public void onReceive(final Context context, Intent intent) {
        number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
        if (noCallListenerYet) {
            final TelephonyManager tm = (TelephonyManager) context.getSystemService(
                    Context.TELEPHONY_SERVICE);
            tm.listen(new PhoneStateListener() {
                @Override
                public void onCallStateChanged(int state, String incomingNumber) {
                    switch (state) {
                        case TelephonyManager.CALL_STATE_RINGING:
                            Log.d(This.LOG_TAG, "RINGING");
                            break;
                        case TelephonyManager.CALL_STATE_OFFHOOK:
                            Log.d(This.LOG_TAG, "OFFHOOK");
                            break;
                        case TelephonyManager.CALL_STATE_IDLE:
                            Log.d(This.LOG_TAG, "IDLE");
                            break;
                        default:
                            Log.d(This.LOG_TAG, "Default: " + state);
                            break;
                    }
                }
            }, PhoneStateListener.LISTEN_CALL_STATE);
            noCallListenerYet = false;
        }
    }

} 
```

现在，当我在我的设备中拨打电话时，`CALL_STATE_RINGING` **永远不会调用。**当另一条线路开始响铃时，我总是只打印“IDLE”到“OFFHOOK”，接听电话时什么也没有，当通话结束时再次打印“IDLE”。

我怎样才能可靠地检测到在 Android 中何时接听了拨出电话，或者这是否可能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-07T11:46:44.923

从 Android 5.0 开始，这对于系统应用程序是可能的。但是您需要使用隐藏的 Android API。

我让它像这样工作：

```
<uses-permission android:name="android.permission.READ_PRECISE_PHONE_STATE" /> 
```

```
<receiver android:name=".listener.OutCallLogger">
    <intent-filter>
        <action android:name="android.intent.action.PRECISE_CALL_STATE" />
    </intent-filter>
</receiver> 
```

```
public class OutCallLogger extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        switch (intent.getIntExtra(TelephonyManager.EXTRA_FOREGROUND_CALL_STATE, -2) {
            case PreciseCallState.PRECISE_CALL_STATE_IDLE:
                Log.d(This.LOG_TAG, "IDLE");
                break;
            case PreciseCallState.PRECISE_CALL_STATE_DIALING:
                Log.d(This.LOG_TAG, "DIALING");
                break;
            case PreciseCallState.PRECISE_CALL_STATE_ALERTING:
                Log.d(This.LOG_TAG, "ALERTING");
                break;
            case PreciseCallState.PRECISE_CALL_STATE_ACTIVE:
                Log.d(This.LOG_TAG, "ACTIVE");
                break;
        }
    }
} 
```

[您可以在PreciseCallState.java](https://android.googlesource.com/platform/frameworks/base.git/+/master/telephony/java/android/telephony/PreciseCallState.java#26)中找到所有可能的呼叫状态，在[TelephonyRegistry.java](https://android.googlesource.com/platform/frameworks/base/+/4f868ed/services/core/java/com/android/server/TelephonyRegistry.java#1242)中找到意图包含的所有额外内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T16:08:27.843

看起来只有来电才能达到 RINGING 状态。拨出电话从 IDLE 变为 OFFHOOK，因此查看电话状态可能无法实现这一点。

我认为可以使用内部函数，看看这个：[Android电话堆栈中不同的呼叫状态代表什么？](https://stackoverflow.com/questions/6290347/what-does-the-different-call-states-in-the-android-telephony-stack-represent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T15:57:59.987

请关注：

```
tm.listen(new PhoneStateListener() {
            @Override
            public void onCallStateChanged(int state, String incomingNumber) {
                switch (state) {
                    case TelephonyManager.CALL_STATE_RINGING:
                        Log.d(This.LOG_TAG, "RINGING");
                        break;
                    case TelephonyManager.CALL_STATE_OFFHOOK:
                        Log.d(This.LOG_TAG, "OFFHOOK");
                        break;
                    case TelephonyManager.CALL_STATE_IDLE:
                        Log.d(This.LOG_TAG, "IDLE");
                        break;
                    default:
                        Log.d(This.LOG_TAG, "Default: " + state);
                        break;
                }
            }
        }, PhoneStateListener.LISTEN_CALL_STATE); 
```

你看到“incomingNumber”参数了吗？是的，只有当您的设备有来电时，该代码才能检测到您的电话状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T22:32:12.127

也许尝试使用CallManager？查看[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/com/android/internal/telephony/CallManager.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/com/android/internal/telephony/CallManager.java)。我还在我计算机上的 SDK 文件中找到了 CallManager.java。链接页面中的以下文本似乎很有希望：

```
Register for getting notifications for change in the Call State Call.State This is 
called PreciseCallState because the call state is more precise than the Phone.State 
which can be obtained using the android.telephony.PhoneStateListener Resulting events 
will have an AsyncResult in Message.obj. AsyncResult.userData will be set to the obj 
argument here. The h parameter is held only by a weak reference.

1051
1052    public void registerForPreciseCallStateChanged(Handler h, int what, Object obj){
1053        mPreciseCallStateRegistrants.addUnique(h, what, obj);
1054    } 
```

我没有尝试编写任何代码，所以真的不知道它是否可以做你想做的事，但我很想知道。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-02T17:04:14.790

您可以执行以下操作...不是很精确，但可以解决问题：

1.  您将接收器用于**android.intent.action.NEW_OUTGOING_CALL**操作
2.  当接收器被调用时，您将 NEW_OUTGOIN_CALL 状态和发生这种情况的时间（即 new Date().getTime()）存储在某处（例如静态变量）
3.  您将另一个接收器用于**android.intent.action.PHONE_STATE**并在 onReceive 中执行以下操作：

    ```
    if (intent.getAction().equals("android.intent.action.PHONE_STATE")) {
        TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        telephony.listen(new PhoneStateListener() {
            public void onCallStateChanged(int state, String incomingNumber) {
                  switch(state) {
                    case TelephonyManager.CALL_STATE_IDLE:
                    break;
                    case TelephonyManager.CALL_STATE_OFFHOOK:
                    break;
                    case TelephonyManager.CALL_STATE_RINGING:
                    break;
                   }
            } 
        }, PhoneStateListener.LISTEN_CALL_STATE);

    } 
    ```

在 CALL_STATE_OFFHOOK 情况下，您检查最后存储的状态是 NEW_OUTGOING_CALL 并且不超过 aprox。自上次状态更改以来已过去 10 秒。这意味着电话最多在 10 秒前发起呼叫，现在他处于摘机状态（即通话中），没有经过空闲或振铃。这可能意味着呼叫已被应答。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-30T07:27:51.567

在这里，您的答案是您在 OutGoingCallReceiver 中实现了 CallStateListener ，这是错误的。您必须在 PhoneStateListener 中实现 CallStateListener

我在早期的项目中也尝试过这个东西，我遇到了同样的问题，然后我解决了它，如下所示。我参加了以下3节课。

1.  AutoCallReceiver：注册 TelephonyManager`PhoneStateListener.LISTEN_CALL_STATE`

2.  CallStateListener 侦听三个状态为`TelephonyManager.CALL_STATE_IDLE`, `TelephonyManager.CALL_STATE_OFFHOOK`,`TelephonyManager.CALL_STATE_RINGING`

3.OutGoingCallReceiver 处理去电

```
public class OutGoingCallReceiver extends BroadcastReceiver {  
    /* onReceive will execute on out going call */
    @Override  
    public void onReceive(Context context, Intent intent) {  
        Toast.makeText(context, "OutGoingCallReceiver", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

```
public class CallStateListener extends PhoneStateListener {  
    String number=""; // variable for storing incoming/outgoing number
    Context mContext; // Application Context

    //Constructor that will accept Application context as argument
    public CallStateListener(Context context) {
        mContext=context;
    }

    // This function will automatically invoke when call state changed
    public void onCallStateChanged(int state,String incomingNumber)
    {
        boolean end_call_state=false; // this variable when true indicate that call is disconnected
        switch(state) {
            case TelephonyManager.CALL_STATE_IDLE:  
                // Handling Call disconnect state after incoming/outgoing call 
                Toast.makeText(mContext, "idle", Toast.LENGTH_SHORT).show();
                break;  

            case TelephonyManager.CALL_STATE_OFFHOOK:     
                // Handling outgoing call  
                Toast.makeText(mContext, "OFFHOOK", Toast.LENGTH_SHORT).show();
                // saving outgoing call state so that after disconnect idle state can act accordingly
                break;  

            case TelephonyManager.CALL_STATE_RINGING: 
                Toast.makeText(mContext, "RINGING", Toast.LENGTH_SHORT).show();     
                break;
        }
    }
} 
```

* * *

```
public class AutoCallReceiver extends BroadcastReceiver {       
    /* onReceive will execute on call state change */
    @Override  
    public void onReceive(Context context, Intent intent) { 

    // Instantiating PhoneStateListener
    CallStateListener phoneListener=new CallStateListener(context);  

    // Instantiating TelephonyManager
        TelephonyManager telephony = (TelephonyManager)   
                         context.getSystemService(Context.TELEPHONY_SERVICE);  

            // Registering the telephony to listen CALL STATE change
        telephony.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);  
    }
} 
```

* * *

```
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/>
<application ...>
    <receiver android:name=".OutGoingCallReceiver">
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver>
    <receiver android:name=".AutoCallReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
</application> 
```

# sql - SSRS 日期时间选择器：允许用户选择时间组件

> ID：13134334
> 
> 赞同：2
> 
> 时间：2012-10-30T07:17:30.403
> 
> 标签：sql, datetime, reporting-services

我想使用日期时间选择器来选择日期*和*时间组件。日历允许我选择日期，但无法选择特定时间。

我想选择开始和结束时间，从大量数据中选择一个子集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T01:51:12.457

我在当前的项目中遇到了类似的问题。我的解决方案是添加日期字段（日期/时间类型）和时间字段。时间字段将显示一个下拉列表，其中包含 24 小时文本供用户选择（请参阅下面的附加屏幕截图）。

![在此处输入图像描述](../Images/67a890ebc654553dc3c0a52cc3e0e5b7.png)

创建下拉列表的步骤很简单：

1.  打开报表时间参数的属性
2.  选择可用值（请参阅下面的附加屏幕截图）

![在此处输入图像描述](../Images/578b3446cb4a0f2dcbe1774554df4a4b.png)

3.  选择指定值并添加值以表示 24 小时。

请注意，您还可以从查询中设置可用值。

此外，检索报告数据的存储过程应将从报告传递的日期和时间转换为 datetime 类型以使其工作。下面显示了一个示例：

```
@StartDateTime = CONVERT(datetime, convert(nvarchar, @StartDate) + 
          ' ' + CONVERT(nvarchar(12), @starttime)) 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-18T00:03:02.190

我相信我们现在都找到了解决这个问题的方法，但是这是我的解决方案。

```
CREATE PROCEDURE [ssrs].[Params_GetTimeTable]
(
    @hr_from int = 0,
    @hr_to int = 24,
    @min_interval int = 15
)
AS
BEGIN
-- Internal Variables
declare @hr int = @hr_from
declare @min int = 0
declare @timetable table
(
    hhmm varchar(5)
)

-- Populate the @timetable
    while @hr < @hr_to
    begin
        while @min < 60
        begin
            insert into @timetable(hhmm)
            select 
                case 
                    when @hr < 10 then '0' + cast(@hr as varchar(2)) + ':' + case when @min < 10 then '0' + cast(@min as varchar(2)) else cast(@min as varchar(2)) end
                    else cast(@hr as varchar(2)) + ':' + case when @min < 10 then '0' + cast(@min as varchar(2)) else cast(@min as varchar(2)) end
                end
            set @min = @min + @min_interval
        end
        set @hr = @hr + 1
        set @min = 0
    end

--  Add a finishing time to the output table
    insert into @timetable(hhmm)
    select 
        case 
            when @hr < 10 then '0' + cast(@hr as varchar(2)) + ':00'
            else cast(@hr as varchar(2)) + ':00'
        end

-- Return the output
 select hhmm from @timetable

END 
```

通过以下方式测试结果：

```
EXEC [ssrs].[Params_GetTimeTable] 0, 24, 15 
```

输出 ：

```
hhmm
00:00
00:15
00:30
00:45
01:00
01:15
...
23:00
23:15
23:30
23:45
24:00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:02:49.740

使用标准 SSRS 日历选择器，选择日期后，您可以单击文本框并在所选日期旁边手动输入时间值。我知道这不是很直观，但它确实有效。我有同样的问题，并且正在寻找一个对用户更友好的解决方案，但这是我目前所能想到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T13:52:54.137

我使用这个 SQL，它在 9:00 到 21:00 之间每 15 分钟生成一次，people 就是任何至少有足够行的表，即 12 或 24。

```
select time1
from
(
  select hr || ':' || mm time1
  from  
  (
    select  '09' hr
    from  dual
    union
    select  cast(rownum + 9 as varchar(2)) hr 
    from  people 
    where rownum < 12
    order by hr
  )hr,
  (
    select  '00' mm
    from  dual
    union
    select  '15' mm
    from  dual
    union
    select  '30' mm
    from  dual
    union
      select  '45' mm
    from  dual
  )mm
  union
  (
  select  '21:00' time1
  from  dual
  )
)T1
order by time1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-11T10:53:31.380

我将其用作整数参数，然后您可以将分钟数添加到所选日期

```
DECLARE @interval INT = 15
;WITH cteM AS (
  SELECT 0 M UNION ALL
  SELECT M+@interval FROM cteM
  WHERE M+@interval <= 59
), 
cteH AS (
  SELECT 0 H UNION ALL
  SELECT H+1 FROM cteH
  WHERE H+1 < 24
)
SELECT
    RIGHT('0' + CAST(cteH.H AS varchar(2)), 2) + ':' + RIGHT('0' + CAST(cteM.M AS varchar(2)), 2) Label,
    cteH.H*60 + cteM.M Value
FROM cteM CROSS JOIN cteH 
```

# node.js - 如何在nodejs中检索调用者函数js文件全局变量值

> ID：13134336
> 
> 赞同：0
> 
> 时间：2012-10-30T07:17:54.590
> 
> 标签：node.js

来自 nodejs 的示例代码：

来自 JS1.js 的代码：

```
var js2=require("../../util");
var dataName="Billy";
function hello1(){
   js2.hello2("message");
} 
```

来自 JS3.js 的代码：

```
var js2=require("../../util");
var dataName="Tom";
function hello3(){
   js2.hello2("message");
} 
```

来自 JS2.js 的代码：

```
exports.hello2=hello2;
function hello2(arg1){
   console.log(arg1);
   //Here I need the data in global variable "dataName" of file JS1.js or JS3.js
} 
```

我需要访问调用者 js 文件的全局变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:07:24.677

`global`所有模块在 node.js 中共享一个对象。所以在 JS1.js ...

```
global.dataName = "Billy"; 
```

...然后在 JS2.js 中：

```
console.log(global.dataName); 
```

`global`然而，以这种方式使用通常被认为是糟糕的形式也就不足为奇了。除非您有特定的理由不希望 JS2 依赖于 JS1，否则最好将 JS2 导出`dataName`作为`module.exports`.

# achartengine - 不同列中的多个 Y 刻度

> ID：13134342
> 
> 赞同：0
> 
> 时间：2012-10-30T07:18:36.930
> 
> 标签：achartengine

我有多个 y 比例尺，效果很好。但是，如果 y 值显示在靠近 y 轴的单独列中，效果会更好。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:41:20.163

有一种方法可以做类似于您需要的事情，但可能不完全是这样。您可以对齐右侧的第一个比例和左侧的第二个比例，例如值不重叠：

```
renderer.setYLabelsAlign(Align.RIGHT, 0);
renderer.setYLabelsAlign(Align.LEFT, 1); 
```

# java - 如何连接到远程一致性缓存

> ID：13134347
> 
> 赞同：0
> 
> 时间：2012-10-30T07:18:41.640
> 
> 标签：java, caching, oracle-coherence

我们正在使用一致性缓存。但是在 Junit 测试期间，因为缓存在本地设置并且需要大量时间来加载（因为每次我从 Junit 运行它都是一个新的缓存），因此将单元测试延迟了 1.5 小时。我们还有使用部署在服务器盒上的缓存的测试环境，并且由于大部分数据都加载到这些缓存盒上，因此具有良好的性能。是否有任何方法/配置，以便我的 Junit 测试可以引用服务器上的缓存。这将大大减少我的测试工作。

预先感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T23:51:45.050

有2个选项

1）由于这与 JUnit 相关，因此使用模拟来复制您想要的行为。

2）您始终可以创建指向现有一致性网格的单元测试特定一致性配置文件，并在单元测试期间使用它们。

# java - 在行中搜索字符串

> ID：13134348
> 
> 赞同：0
> 
> 时间：2012-10-30T07:18:55.237
> 
> 标签：java, string, text-files

我在处理一行中的字符串时遇到问题，例如，我在 .txt 文件中有以下行：

```
ussdserver link from host /127.0.0.1:38978(account smpp34) is up|smpp34|2012-10-28 17:02:19
ussdserver link from host localhost/127.0.0.1:8088(account callme) is up|callme|2012-10-28 17:02:20 
```

我需要我的代码来获取“account”之后的单词（在第一行是 smpp34）和单词“up”（在“is”单词之后）。

我考虑过使用`String.charAt()`方法，但在这里不起作用，因为我需要的单词可以在不同的地方，如上例所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:36:33.247

尝试使用以下方法形成[`String`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)类。

```
String inputStr = "ussdserver link from host /127.0.0.1:38978(account smpp34) is up|smpp34|2012-10-28 17:02:19";
int index1 = inputStr.indexOf("account");
int index2 = inputStr.indexOf(')',index1);
String accountName = inputStr.substring(index1+8,index2); // you get smpp34

index1 = inputStr.indexOf("|");
index2 = inputStr.lastIndexOf(' ', index1);
String state = inputStr.substring(index2+1, index1) // you get up 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:37:46.873

是的，在这种情况下最好使用正则表达式。但是可以专门针对**上述情况**使用更简单的方法。只需尝试从**)**拆分，然后阅读直到 string-5 的长度到 length 将为您提供第一个单词并尝试类似的第二个单词..

如果并且仅当上面的字符串模式永远不会改变..否则将推荐使用正则表达式..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:51:30.247

像这样尝试正则表达式。

> ```
>  Pattern pattern = Pattern.compile(".*account\\s([^\\s]*)\\)\\sis\\s([^|]*)|.*");
>   Matcher matcher = pattern.matcher("ussdserver link from host /127.0.0.1:38978(account smpp34) is up|smpp34|2012-10-28 17:02:19");
>   while (matcher.find()) {
>     System.out.println(matcher.group(1));//will give you 'smpp34'
>     System.out.println(matcher.group(2));//will give you 'up'
>     return;
>   } 
> ```

# jquery - Jquery UI自动完成只给出一次建议

> ID：13134349
> 
> 赞同：0
> 
> 时间：2012-10-30T07:18:55.283
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-autocomplete

我在我的标签文本框中使用 jquery ui 自动完成，它工作正常，但问题是它只提供一次建议，例如，当我第一次输入一个字符时，它显示建议我从建议中选择一些内容并将其附加到文本框中用逗号但是当我再次输入一个字符时它什么也不显示

我的代码如下

**查询**

```
 function split(val) {
        return val.split(/,\s*/);
    }
    function extractLast(term) {
        return split(term).pop();
    }

    $("#tagsss")
    // don't navigate away from the field on tab when selecting an item
        .bind("keydown", function (event) {
            if (event.keyCode === $.ui.keyCode.TAB &&
                    $(this).data("autocomplete").menu.active) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function (request, response) {
                $.ajax({
                    url: "/Home/LookUpTag",
                    dataType: "json",
                    data: "searchterm=" + request.term,
                    success: function (data) {
                        response($.map(data, function (item) {
                            //  alert(data.length);
                            return {
                                label: item.Name,
                                value: item.Name,
                                Name: item.Name
                            };
                        }));
                    }
                });
            },
            focus: function () {
                // prevent value inserted on focus
                return false;
            },
            select: function (event, ui) {
                var terms = split(this.value);
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push(ui.item.value);
                // add placeholder to get the comma-and-space at the end
                terms.push("");
                this.value = terms.join(",");
                return false;
            }
        }); 
```

我在控制器中的功能

**控制器**

```
public JsonResult LookUpTag(string searchterm)
    {

        var tags = context.tagService.Query().Where(x => x.name.Contains(searchterm)).Select(x => x.name).ToList();
        var list = tags.Select(item => new SearchJsonModel
        {
            Name = item,
            Value = item
        }).Select(model => (model)).ToList();
        return Json(list, JsonRequestBehavior.AllowGet);
    } 
```

我做了很多工作，但没有发现任何错误，请告诉我这段代码有什么问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:02:24.930

不确定，但您是否错过了打电话给您`extractLast()`以检索输入中的最后一个词？

源参数

```
source: function (request, response) {
                $.ajax({
                    url: "/echo/json/",
                    dataType: "json",
                    data: "searchterm=" + extractLast(request.term),
                    success: function (data) {
                        response($.map(data, function (item) {
                            //  alert(data.length);
                            return {
                                label: item.Name,
                                value: item.Name,
                                Name: item.Name
                            };
                        }));
                    }
                });
            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-08T10:58:22.883

绑定 keydown 和自动完成.......问题是

```
.bind("keydown", function (event) {

$('########').live("keydown.autocomplete", function() {
$inputbox = $(this);
$inputbox.autocomplete({
source: function(req, add){
$.ajax({
type: "POST",
url: #########################,
dataType: "json",
data: { place_of_loading_code: $inputbox.val() }
}).done(function( msg ) {
resultArr = eval(msg);
add(resultArr);
});
}
});
}); 
```

# ios - 如何获取 ios 应用程序的代码签名应用程序证书信息

> ID：13134350
> 
> 赞同：1
> 
> 时间：2012-10-30T07:19:16.477
> 
> 标签：ios, certificate, ipa

我们有一个适用于 ios 的应用程序 最后——我们进行了代码设计，但我想在可执行文件本身内添加一个额外的安全检查。

我知道苹果已经签署了应用程序。如何在我的应用程序中获取苹果签署的信息？比如苹果公钥还是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:09:07.397

您不应该尝试对 Apple 的 Fairplay DRM 做出假设，假设您打算验证它，如果没有 Apple 的密钥，您将无法做到这一点，但我认为您正在寻找其他篡改/盗版指标.

有几种方法可以检查您的应用程序是否已被篡改。假设 Apple 的 Fairplay DRM 是安全的，那么如果您检测到您的应用程序未加密运行，那么它很可能被篡改，更有可能是盗版。您可以检查段中的`cryptid`位`LC_ENCRYPTION_INFO`（更多信息请参见[此处](http://iphonedevwiki.net/index.php/Crack_prevention)）。但请记住，现在盗版工具要复杂得多，许多会`cryptid`在运行时修补价值。您可能会使用`dyld_*`API 检查加载的库，如果`cryptid`加载了黑客，您的应用程序可能已被入侵。他们当然可以更改库的名称，而您又回到了原点。他们总是可以改变`cryptid`在应用程序运行时在磁盘上位，并在应用程序终止时将其切换回来。

因此，尽管您有多种途径可以探索，但实际上，您无能为力。苹果曾试图通过技术和法律措施防止越狱，但都失败了。而且只要能越狱，就可以通过这些方式篡改二进制文件。

# jquery - Jquery inline datepicker - kieth wood 日期选择器

> ID：13134351
> 
> 赞同：0
> 
> 时间：2012-10-30T07:19:19.440
> 
> 标签：jquery, datepicker

```
$(function() {
    $('#defaultInline').datepick({

       dateFormat: 'yyyy-mm-dd',
       onSelect: showDate

    });
    function showDate(date) {
       var dates2 = $('#defaultInline').datepick('getDate');  // this works 
       var dates3 =  $.datepick.formatDate('yyyy-mm-dd',dates2) /// this give an error 
    alert('The date chosen is ' + dates2);
    }

}); 
```

警报（dates2）有效，但日期 3 给出错误......有什么想法吗？基本上我只想从内联日历中以特定格式获取日期....现在它显示为 Tue Oct 30 2012 12:00:00 GMT+0530 (India Standard Time) 但我想要的只是 2012- 10-30 ....

我得到的错误是： TypeError: g.getFullYear is not a function

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:51:34.470

```
$(function() {
    $('#defaultInline').datepick({

       dateFormat: 'yyyy-mm-dd',
       altField: '#scb_date', // this is what i added 
      onSelect: showDate

    });
    function showDate() {
          var date2=$("#scb_date").val();
          alert(date2);
    }

}); 
```

scb 是一个隐藏的输入字段......并且可以从中读取值......现在我知道有更好的方法来做我正在做的事情......但这是我发现的最简单的......如果你有什么最好请告诉我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:30:59.513

这应该有效：

```
var date = $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }).val(); 
```

有关更多信息[jQuery UI DatePicker - 更改日期格式](https://stackoverflow.com/questions/1328025/jquery-ui-datepicker-change-date-format)

# python - 在 Python 中重构循环的方法？

> ID：13134352
> 
> 赞同：4
> 
> 时间：2012-10-30T07:19:23.673
> 
> 标签：python, loops, refactoring

例如，有两个类似的代码：

第一个是：

```
 for chrom in bins:
     for a_bin in bins[chrom]:
         for pos in a_bin:
             pos = pos+100 
```

第二个是：

```
 for chrom in bins:
     for a_bin in bins[chrom]:
         for pos in a_bin:
             if chrom=="chr1":
                 pos = pos*100 
```

我想知道是否有办法重构循环，这样我就不需要重复编写具有相同结构的代码..

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:20:16.267

这可以通过[生成器功能](http://en.wikipedia.org/wiki/Generator_%28computer_science%29)来实现。

```
def gen():
    for chrom in bins:
        for a_bin in bins[chrom]:
           for pos in a_bin:
               yield pos 
```

您可以遍历由 生成的项目`gen()`，尽管没有构建“项目列表”——相反，它是按需构建的：

```
for pos in gen():
    pass # add loop code here 
```

这也意味着，如果您提前退出循环，该`gen()`方法将被中止（有一个例外）。看看[协程](http://en.wikipedia.org/wiki/Coroutine)以了解它是如何实现的。

# python - 设置默认编码 Openerp/Python

> ID：13134353
> 
> 赞同：0
> 
> 时间：2012-10-30T07:19:28.600
> 
> 标签：python, encoding, openerp

你们知道如何更改 openerp 文件的默认编码吗？

我试过添加`# -*- coding: utf-8 -*-`但它不起作用（是否有忽略此命令的设置？只是一个疯狂的猜测）。当我尝试`sys.getdefaultencoding()`仍然以 ASCII 执行时。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T08:40:24.013

注释`# -*- coding: utf-8 -*-`告诉 python 解析器源文件的编码。它影响字节码编译器如何转换源代码中的 unicode 文字。它对运行时环境没有影响。

将字符串转换为 unicode 时，应明确定义编码。如果您收到`UnicodeDecodeError`，请发布您的问题场景，我会尽力提供帮助。

# fonts - Mathematica：在 Plot 或 Listplot 中同时更改所有文本字体

> ID：13134354
> 
> 赞同：2
> 
> 时间：2012-10-30T07:19:39.433
> 
> 标签：fonts, styles, plot, wolfram-mathematica, font-size

我想用一个命令更改 Plot 和 ListPlot 中所有文本的字体大小。我记得过去对每个（ListPlot 和 Plot）调用一个 SetOptions[Plot, ...]等等。

有针对这个的解决方法吗？我真的记得几周前做过这个，但忘记了！！

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T08:04:32.940

经过一个小时的搜索，我想我找到了BaseStyle的答案，所以它看起来像这样：

```
SetOptions[Plot, BaseStyle -> FontSize -> 18] 
```

不管怎么说，还是要谢谢你 ：）

如果你觉得这个答案没有说服力，请评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:59:36.003

根据您的需要，您可能更喜欢使用`GraphicsBoxOptions`. 有关示例，请参见以下答案：

[在整个笔记本文件中保持文本大小相同](https://mathematica.stackexchange.com/a/1983/121)

[设置输出的默认字体](https://mathematica.stackexchange.com/a/10779/121)

此选项以及其他 Box 类型的相关选项，根据低级 Box 输出的类型设置样式，例如`GraphicsBox`（boxes 是发送到 Front End 进行显示的数据）。如果您想一次影响所有 2D 图形输出的样式，而不是通过函数（`Plot`、`LogPlot`等），这就是这样做的方法。

# ruby - 哈希到 JSON，然后在 Ruby 中加入另一个 JSON

> ID：13134355
> 
> 赞同：2
> 
> 时间：2012-10-30T07:19:41.020
> 
> 标签：ruby, json

我有一个这样的 JSON：

```
[
  {
    "Low": 8.63,
    "Volume": 14211900,
    "Date": "2012-10-26",
    "High": 8.79,
    "Close": 8.65,
    "Adj Close": 8.65,
    "Open": 8.7
  },
  {
    "Low": 8.65,
    "Volume": 12167500,
    "Date": "2012-10-25",
    "High": 8.81,
    "Close": 8.73,
    "Adj Close": 8.73,
    "Open": 8.76
  },
  {
    "Low": 8.68,
    "Volume": 20239700,
    "Date": "2012-10-24",
    "High": 8.92,
    "Close": 8.7,
    "Adj Close": 8.7,
    "Open": 8.85
  }
] 
```

并计算了每天收盘价的简单移动平均线，并将其称为变量`sma9day`。我想将移动平均值与原始 JSON 结合起来，所以我每天都会得到这样的结果：

```
 {
   "Low": 8.68,
   "Volume": 20239700,
   "Date": "2012-10-24",
   "High": 8.92,
   "Close": 8.7,
   "Adj Close": 8.7,
   "Open": 8.85,
   "SMA9": 8.92
  } 
```

使用 sma9day 变量，我这样做了：

```
h = { "SMA9" => sma9day }
sma9json = h.to_json
puts sma9json 
```

输出这个：

```
{"SMA9":[8.92,8.93,8.93]} 
```

如何将其以与 JSON 兼容的格式放置并加入两者？我需要从上到下“匹配/加入”，因为 JSON 中的最后 8 条记录不会有 9 天移动平均值（在这些情况下，我仍然希望密钥在那里（SMA9），但是有 nil 或零作为值。

谢谢你。

# 最近更新：

我现在有了这个，这让我非常接近，但是它返回 JSON 中 SMA9 字段中的整个字符串......

```
require json
require simple_statistics

json = File.read("test.json")
quotes = JSON.parse(json)

# Calculations
def sma9day(quotes, i)
close = quotes.collect {|quote| quote['Close']}
sma9day = close.each_cons(9).collect {|close| close.mean}
end

quotes = quotes.each_with_index do |day, i|
  day['SMA9'] = sma9day(quotes, i)
end

p quotes[0]

 => {"Low"=>8.63, "Volume"=>14211900, "Date"=>"2012-10-26", "High"=>8.79, "Close"=>8.65, "Adj Close"=>8.65, "Open"=>8.7, "SMA9"=>[8.922222222222222, 8.93888888888889, 8.934444444444445, 8.94222222222222, 8.934444444444445, 8.937777777777777, 8.95, 8.936666666666667, 8.924444444444443, 8.906666666666666, 8.912222222222221, 8.936666666666666, 8.946666666666665, 8.977777777777778, 8.95111111111111, 8.92, 8.916666666666666]} 
```

当我尝试在计算结束之前执行 sma9day.round(2) 时，它会给出一个方法错误（可能是因为数组？），而当我执行 sma9day[0].round(2) 时，它会正确舍入，但当然每条记录都有相同的 SMA。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:07:36.860

[我听取了您的意见并在此要点](https://gist.github.com/3979626)中编写了一个解决方案。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:31:57.997

大概是为了在 ruby​​ 中进行计算，你以某种方式解析了 json，并从中得到了一个 ruby​​ 哈希。

为了弄清楚这一点，您有一个 sma9day 值数组和一个对象数组，并且您想要遍历它们。

要做到这一点，这样的事情应该让你开始：

```
hashes = JSON.parse( json )
sma9day_values = [9.83, 9.82, etc... ]

hashes.each_with_index do |hash, index|
  if index >= 9
    hash["SMA9"] = sma9day_values[index-9]
  else
    hash["SMA9"] = 0
  end
end

puts hashes.to_json 
```

编辑：

你真的需要尝试开始 ruby​​ 教程。问题是您在数组上调用 round(2) 。函数中的变量 i`sma9day(quotes, i)`未使用（提示）。也许尝试类似的东西`sma9day[i].round(2)`

另外 each_with_index 的返回值也不是要分配的。不要那样做，只需在数组上调用 each_with_index 即可。IE

```
quotes = quotes.each_with_index do |day, i| #bad
quotes.each_with_index do |day, i| #good 
```

# android - PhoneGap - Android 上的 Cordova 2.1 地理位置不一致

> ID：13134356
> 
> 赞同：1
> 
> 时间：2012-10-30T07:19:46.070
> 
> 标签：android, cordova, geolocation

我遇到了一个大问题，Android 设备之间的地理位置非常不一致。

我的 Android 平板电脑上的地理位置正在工作（三星 Galaxy），而在我最新的设备三星 Galaxy S3 上 - 它甚至不返回响应（除非我启用 enableHighAccuracy，但随后它会阻止其他设备工作）。我已经在浏览器和谷歌地图应用程序中测试了返回正确响应（和即时响应）的地理位置。在 HTC 上它也可以正常工作

我的清单设置如下

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.wifi" />
<uses-feature android:name="android.hardware.location" />
<uses-feature android:name="android.hardware.location.gps" />
<uses-feature android:name="android.hardware.location.network" /> 
```

我应该对 PhoneGap 进行任何代码更改以更好地支持 GeoLocation 吗？即使在 DEFAULT 示例上对其进行测试也会产生完全相同的结果。

测试设备

*   三星 Galaxy 平板电脑 (Android 4.0.3) 。地理位置工作正常

*   三星 Galaxy S3 手机 (Android 4.1.1)。地理位置仅适用于 PhoneGap 上的 enableHighAccuracy。在没有启用 GPS 的情况下使用 GoogleMaps 工作，并在 Internet 浏览器上工作

*   宏达电 (Android 2.3.3) 。地理位置工作正常

*   Apple iPad、iPhone 和 iPod（我希望 Android 能够像 Apple 一样控制硬件 :()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T11:43:25.043

尝试重新启动您的设备。为我工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:51:15.260

根据给出的信息，它是带有 PhoneGap 2.1 特定问题的 OS 4.1.x。谷歌简单搜索了一下，这是一个已知问题，目前还没有解决办法。建议直接向 PhoneGap 团队报告错误，尽管他们正忙于迁移到新的 repo。

参考：[https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/ESrHAjFHgFU](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ESrHAjFHgFU)

# sharepoint-2010 - 自定义 ASPX 表单有什么更好的方法

> ID：13134363
> 
> 赞同：1
> 
> 时间：2012-10-30T07:20:17.177
> 
> 标签：sharepoint-2010

我使用 SharePoint 2010（标准版）开发了一个门户。我想使用 Visual Studio 2010 开发一个主从“申请”表单。我不希望用户访问列表并单击“添加新”来访问表单。我想在门户主页上创建一个链接，例如“申请表”，当用户单击该链接时，它应该在那里打开表单。

我应该创建一个 Visual WebPart ..然后创建新页面并将 Web 部件嵌入那里吗？或者我应该开发 WebPart 页面..我从来没有做过 webpart 页面，那么更好的方法是什么？并且要编辑页面，我是否需要使用 Gridview 控件创建另一个可视化部分并填写当前登录的用户申请，包括项目 ID 并将其传递给 MyCustomRequisitionEditForm.aspx ？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:32:28.727

Why don't you customize standard new form of the list with Sharepoint Designer or InfoPath? You can create a link to this form on the homepage of your portal.

# html - 用于 HTML 表单的开源动态表单构建器？

> ID：13134370
> 
> 赞同：8
> 
> 时间：2012-10-30T07:20:49.883
> 
> 标签：html, forms, jotform

我正在寻找像[http://www.jotform.me/](http://www.jotform.me/)这样的开源动态表单构建器，但免费且开源，并且最终表单必须是 HTML 而非 XHTML。他们有什么可用的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T09:11:57.623

编辑：谢谢[@Stefan Steiger](https://stackoverflow.com/users/155077/stefan-steiger)
更好的尝试：[alpacajs.org](http://www.alpacajs.org/)，你可以在 github 上找到：[github.com/gitana/alpaca](https://github.com/gitana/alpaca)

你试过FormTools吗？
[https://formtools.org/](https://formtools.org/)试试这个链接可能会有所帮助。

# if-statement - struts2中显示列标签中的IF ELSE

> ID：13134377
> 
> 赞同：-4
> 
> 时间：2012-10-30T07:21:20.753
> 
> 标签：if-statement, struts2

嗨，我在 struts2 中使用显示列标记。并希望根据数据格式化行...

例如列 hs 布尔值。如果值为真，我想以红色字体显示行。其他黑色字体。

那么如何在struts2的显示列标签中实现if else条件呢？

我已经在网上检查过，给定 ar 的 bt 解决方案谁能给我同样的代码示例？？？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:34:13.733

请检查此[链接并获取示例](http://www.aoiblog.com/struts2-if-else-and-elseif-condition/)

```
 <s:if test="%{column ==true}">
 // do stuff to change row color
 </s:if>
 <s:else>
 // do stuff to change black font 
 </s:else> 
```

# c# - 如果值为 null 然后 GrieView.Visible.Equals(false) 如何检查 GirdView 中的单元格值

> ID：13134380
> 
> 赞同：0
> 
> 时间：2012-10-30T07:21:38.733
> 
> 标签：c#, sql-server-2008

如果任何行为空，我想检查 GridView 中 Checkbox 的值，然后下一个 GridView 无法显示。

```
//Checkbox GridView1
        foreach (GridViewRow rowItem in GridView1.Rows)
        {
            CheckBox chk = (CheckBox)(rowItem.Cells[4].FindControl("chkSelected1"));
            if (chk.Checked == false)
            {
                GridView2.Visible.Equals(false);
                break;
            }
            else
            {
                GridView2.Visible.Equals(true);
             }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:23:00.060

您需要将 false 分配给可见属性。目前你正在比较它，如果它等于假。这样做：

```
GridView2.Visible = false; 
```

您当前的代码返回一个`bool`值，**它没有设置**gridview的 Visible 属性

```
GridView2.Visible.Equals(false); 
```

您的代码中的上述行比较了该`GridView2.Visible`属性是否设置为 false。它不会更新`Visible`gridview 的属性。

类似地使网格视图可见，将其设置为 true，如：

```
GridView2.Visible = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:44:33.853

```
GridView2.Visible = false;

GridView2.Visible = true; 
```

会做这项工作

# javascript - jquery库如何实现jquery-1.xxjs源码中的$("")？

> ID：13134383
> 
> 赞同：1
> 
> 时间：2012-10-30T07:21:55.660
> 
> 标签：javascript, jquery

最近开始研究jquery，对jquery库如何实现**$**感到困惑，浏览jquery源码还是看不懂。

为什么**$( "#xid" )**等同于**getElementById("xid")**？

你能根据**jquery的源代码为我解释一下*****$***吗？

 **谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:26:26.873

### 快速回答

`$`只是一个函数名。简单来说，它只是模仿了 DOM 选择器。

```
function $(selector)
{
    if (selector[0] == "#")
        return document.getElementById(substr(selector, 1));
    else if (selector[0] == ".")
        return document.getElementsByClassName...
    else
        return document.getElementsByTagName...
} 
```

在选择器类似于`#hello`的地方，`selector[0]`描述了第一个字符，`#`在这种情况下是 a。`#`用于表示元素的 ID 。类似地，`.`用于表示类名，其他用于标记。希望很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:17:22.853

jQuery 大致这样做：

```
if (the selector is a dom object){
  wrap the dom object;
}
else if (the selector is a string){
  if (it starts with `<` and ends with `>`){
    assume this is HTML;
  }else{
    run a complex regex to classify the selector;
  }
  if (the selector is HTML){
    create a new DOM element and return;
  } else if (the selector is an ID selector and there is no context) {
    use document.getElementByID;
  } else {
    if there is no context, use the jQuery root as the context;
    jQuerify the context if neccessary and use context.find;
  }
}
if (the selector is a function){
  assume document.ready;
} 
```

基本上，它处理特殊情况并将其余的委托给 ，而后者`$.fn.find`又委托给`$.find`，这就是我迷路的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:19:30.863

这是一件棘手的事情。如果参数 to`$()`是一个不以 '<' 开头且不包含 '>' 的字符串，它将与此正则表达式匹配

```
/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/ 
```

`#myid`如果像结果数组这样的 id将是

```
var match = ['#myid', undefined, 'myid'] 
```

所以`match[1]`将是未定义的。在这种情况下，jQuery 将立即评估`getElementById(match[2])`

来源：jQuery-1.7.1 代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:27:41.520

```
document.getElementById('id'); //returns a HTML DOM Object
$('#id');  //returns a jQuery Object 
```

对于 id 选择器，jQuery 使用 JavaScript 函数`document.getElementById()`，非常高效。当另一个选择器附加到 id 选择器时，例如 h2#pageTitle，jQuery 在将元素识别为匹配之前执行额外的检查。

[来源](http://api.jquery.com/id-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T07:27:57.820

$ 代表 jQuery 函数，实际上是 jQuery 的简写别名。（与大多数语言不同，$ 符号不是保留的，可以用作变量名。）它通常用作选择器（即返回在DOM 中找到的一组元素的函数）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T08:26:13.200

用于定义/访问 jQuery 的 $ 符号。

这意味着，

$ 作为一个变量，它是 jQuery 对象的别名。

jQuery 使用 $ 符号作为 jQuery 的快捷方式。

其他一些 JavaScript 库也使用美元符号来表示它们的功能。

jQuery noConflict() 方法指定了一个自定义名称（如 jq），而不是使用美元符号。

以下链接将为您提供帮助

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)**

# iphone - 我想知道视图何时出现 IOS 6 的设备方向

> ID：13134389
> 
> 赞同：0
> 
> 时间：2012-10-30T07:22:32.040
> 
> 标签：iphone

我想知道视图何时出现的设备方向。以前可以使用该`shouldAutorotateToInterfaceOrientation`方法，但在 IOS 6 中已弃用。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (interfaceOrientation==UIInterfaceOrientationPortrait ||interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown ) {
        DashBtn.hidden=NO;
    }
    else
    {
        DashBtn.hidden=YES;
        if (self.popoverControllerMain) {
            [self.popoverControllerMain dismissPopoverAnimated:YES];
        }

    }
    return YES;
} 
```

我检查了所有的帖子，即制作 rootviewcontroller 和

```
- (BOOL)shouldAutorotate {
    return NO;
}// this method is not called

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:33:07.437

尝试使用

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

代替

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

有关详细信息，请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:14:34.050

创建 UINavigationController 的类别并添加以下代码 @implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate { return [[self.viewControllers lastObject] shouldAutorotate]; }

-(NSUInteger)supportedInterfaceOrientations { return [[self.viewControllers lastObject] supportedInterfaceOrientations]; }

*   (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation { return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation]; }

@结尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:35:14.653

了解设备方向的最佳选择是

```
[[UIApplication sharedApplication] statusBarOrientation] 
```

# zend-framework - 如何在 zend 中从 index.phtml 中分配会话值？以及如何在zend中使用会话功能地创建注销？

> ID：13134392
> 
> 赞同：0
> 
> 时间：2012-10-30T07:22:54.493
> 
> 标签：zend-framework, session-variables

我正在尝试使用 Login 和 Logout 学习**Zend_session** 。我使用了两个控制器，即 IndexController 和 DashboardController。我的登录功能存在于**IndexController**中，我在 index.phtml 中设计了登录表单，我想从 index.phtml 中保存会话值并希望将其转发到下一个帐户页面，即**DashboardController。**

当用户登录帐户并转到**DashboradController**时，它应该能够访问在**IndexContrller 中创建的 Session 的值。**

我的问题是如何从**index.phtml**分配会话值？

我的第二个问题是，当用户单击注销时，它应该被**重定向到主页，并且不应该通过按返回按钮来进行帐户..如何实现它？？？**

# android - Android 设置应用首选项文件

> ID：13134395
> 
> 赞同：1
> 
> 时间：2012-10-30T07:23:02.867
> 
> 标签：android, android-preferences

我已经阅读了 Android 的[设置](http://developer.android.com/guide/topics/ui/settings.html)教程，并希望使用新的“标题”功能来完成类似左图的操作。确切地说，我想要一个全局的“启用”复选框，在它下面有一些首选项标题，周围有一个类别标题。

![](../Images/1d9cd80b59ce2452bb63c0414033a586.png)

我可以通过使用 XML 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:51:07.623

是的，可以通过编写自己的处理标头的适配器类来实现。我发现这个不错的非常简单 的[示例](http://xgouchet.fr/android/index.php?article4/master-on-off-preferences-with-ice-cream-sandwich#c1352542579-1)，用于看起来像偏好的本机设置。

它适用于手机，但不适用于平板电脑（应用程序在尝试使用两窗格布局时崩溃）。

# vba - 如何将 PowerPoint 形状导出为高质量的图像文件

> ID：13134400
> 
> 赞同：2
> 
> 时间：2012-10-30T07:23:28.670
> 
> 标签：vba, graphics, powerpoint

我正在尝试生成数百个基本图形，其中形状文本和背景颜色基于文本字符串。

为此我选择使用 PowerPoint，因为我觉得图像样式对于我的功能来说非常全面。我知道如何做到这一点的唯一程序是 Adob​​e Photoshop，但是我没有那个软件。

我可以使用导出图像功能，但是导出图形的图像质量很差

我怎样才能用更好的图像处理器来完成这项工作？

可以看出，我有一个带有文本框的 powerpoint 幻灯片来保存字符串值（矩形 5）和我的“形状”，它将由文本字符串中的两个 RGB 值设置样式。字符串值具有以下格式（管道分隔）

*   文本框 4.名称 | 圆角矩形 7.Color | 圆角矩形 3.Color

![在此处输入图像描述](../Images/ed31e1df563ebb349fb61bf62815725d.png)

使用的代码：

```
Private Sub btnProcess_Click()
Dim i As Integer
Dim StringsArray As Variant
Dim StringItems As Variant
    ' Call getlines to break all lines into separate records in stringsarray
    StringsArray = getlines()
    For i = 0 To UBound(StringsArray)
       StringItems = Split(StringsArray(i), "|")
       ActivePresentation.Slides("Slide1").Shapes("TextBox 4").TextFrame.TextRange.Text = StringItems(0)
       ActivePresentation.Slides("Slide1").Shapes("Rounded Rectangle 7").Fill.ForeColor.RGB = StringItems(1)
       ActivePresentation.Slides("Slide1").Shapes("Rounded Rectangle 3").Fill.ForeColor.RGB = StringItems(2)
       ActivePresentation.Slides("Slide1").Shapes("Group 6").Export "C:\temp\file.emf", ppShapeFormatEMF, 150, 150, ppRelativeToSlide
    Next i
End Sub

Function getlines() As Variant
Dim mylines As Variant
Dim mytext As String
    mytext = ActivePresentation.Slides("Slide1").Shapes("Rectangle 5").TextFrame.TextRange.Text
    mylines = Split(mytext, vbCr)
    getlines = mylines
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:22:11.703

在 PowerPoint 幻灯片上看到的基于矢量图形的 PPT 对象不受比例影响，因此在所有缩放级别上，对象都不会出现扭曲。

我找不到将对象图形输出为真正元文件的方法，即使 ppShapeFormatEMF 格式不生成基于矢量的 EMF，只是生成更大的图像。

最后我最好的解决方案是增加 PPT 对象的基本大小并使用 ppShapeFormatPNG 格式导出形状对象，从而提高图像的细节水平。

有点明显。

![在此处输入图像描述](../Images/ea55168b3cac70df7f6dff1b7309b513.png)

# c# - 无法在 sharepoint 2010 中激活作业

> ID：13134402
> 
> 赞同：0
> 
> 时间：2012-10-30T07:23:45.357
> 
> 标签：c#, sharepoint

此代码是该行中的错误`oJob.Update();`

```
string JOB_NAME = "TestJob";
using (SPSite oSite = new SPSite("http://mysite", SPUserToken.SystemAccount))
{
NotifyJob oJob = new NotifyJob(JOB_NAME, oSite.WebApplication);
SPMinuteSchedule schedule = new SPMinuteSchedule();
schedule.BeginSecond = 0;
schedule.EndSecond = 59;
schedule.Interval = 30;
oJob.Schedule = schedule;
oSite.AllowUnsafeUpdates = true;
SPSecurity.RunWithElevatedPrivileges(delegate()
{
oJob.Update();
});
oSite.AllowUnsafeUpdates = false;
}

Error: System.Security.SecurityException: Access denied.
 at Microsoft.SharePoint.Administration.SPPersistedObject.BaseUpdate()
 at Microsoft.SharePoint.Administration.SPJobDefinition.Update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:59:11.973

首先，请检查此解决方案是否适用于您的场景。从您的代码中，我猜您是从某种 webpart/page 执行它。

[http://unclepaul84.blogspot.com/2010/06/sppersistedobject-xxxxxxxxxxx-could-not.html](http://unclepaul84.blogspot.com/2010/06/sppersistedobject-xxxxxxxxxxx-could-not.html)

第二件事是`RunWithEvelatedPrivileges`在应用程序池身份下执行代码。如果您从正常的 SharePoint 内容网站集执行它，该网站集在不同的应用程序池（和帐户 - 它应该如何）上运行，然后中央管理，您仍然可能无法访问需要农场管理员权限的计时器作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:50:37.950

不要从 SPSite/SPWeb 构造函数获取站点或网站。你应该从 SPFeatureReceiverProperties 中获取它

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
{
    SPWeb web = properties.Feature.Parent as SPWeb;
    NotifyJob oJob = new NotifyJob("TestJob", web.Site.WebApplication);
    SPMinuteSchedule schedule = new SPMinuteSchedule();
    schedule.BeginSecond = 0;
    schedule.EndSecond = 59;
    schedule.Interval = 30;
    oJob.Schedule = schedule;
    oJob.Update();
} 
```

或者

```
SPSite site = properties.Feature.Parent as SPSite; 
```

如果您的功能范围是站点

# c# - 捕获数据集中的特定值

> ID：13134407
> 
> 赞同：0
> 
> 时间：2012-10-30T07:24:16.760
> 
> 标签：c#, asp.net, dataset

如何捕获数据集中的特定值并将其分配给gridview中的标签？

```
 DataSet ds = new DataSet();
        Label lblName = e.Row.FindControl("Label1") as Label;
        ds = Common.RunByDate(lblName.Text);
        DropDownList ddl = e.Row.FindControl("DropDownList1") as DropDownList;

        ddl.DataTextField = "RunDate";
        ddl.DataValueField = "RunDate";
        ddl.DataSource = ds;
        ddl.DataBind();
        var items = ddl.Items; 
```

在 DS 中，我得到三个值，我必须捕获一个特定的值

```
TempName    Rundate   RunBy  

test    2012-10-11  chandu 
```

当我从数据集中获取三个值时，我如何才能捕获 RunBy 名称？我该如何过滤它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:32:52.383

使用[DataView](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)类和它的[RowFilter](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)属性，您可以在其中推送有效`SQL`查询以根据您定义的某些逻辑过滤记录。像绑定一样分配`DataView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:33:41.410

你有很多选择

```
var items = ddl.Items; 
```

[按文本查找](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbytext.aspx)

```
var result = items.FindByText(text); 
```

[按值查找](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbyvalue.aspx)

```
var result = items.FindByValue(value); 
```

# mysql - 无法从自索引数据库对象中删除记录

> ID：13134410
> 
> 赞同：0
> 
> 时间：2012-10-30T07:24:40.757
> 
> 标签：mysql, database

我无法从数据库对象中删除一行。在我的情况下，数据库对象具有自索引。
字段 roo​​t_id 与 key_id（主键）具有外键关系。参照完整性设计为`ON UPDATE NO ACTION AND ON DELETE NO ACTION`。即使我仍然无法删除。

```
CONSTRAINT `fk_MyTab` FOREIGN KEY (`root_id`) REFERENCES `MyTab` (`key_id`) ON DELETE NO ACTION ON UPDATE NO ACTION) 
```

我必须从此表中删除记录`WHERE key_id = root_id`。
当我尝试删除时，我得到以下信息。

> 错误代码：1451。无法删除或更新父行：外键约束失败（`MyTab`, CONSTRAINT `fk_MyTab` FOREIGN KEY (`root_id`) REFERENCES `MyTab` (`key_id`) ON DELETE NO ACTION ON UPDATE NO行动）

给我指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:27:44.877

就是这样`NO ACTION`做的，它可以防止删除带有任何子行的行。如果您也想删除孩子，请使用`CASCADE`.

您还可以通过将数据设置为 来保留数据`ON DELETE SET NULL`，在这种情况下，如果删除父行，则子行的外键列将设置为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:32:17.187

我认为当您设计具有大量外键的数据库时，这是一个很好的做法。如果您有带有 ON DELETE CASCADE 选项的表与其他字段链接到其他表，则删除级联选项将失败（因为 mysql 无法按照您创建表的相同顺序删除）“。这种情况的解决方案是声明其他外键中的子句 ON DELETE SET NULL

# java - 免费的开源 Java 库，用于转换 PDF - 图像、PDF - HTML、PDF - 提取图像和文本

> ID：13134413
> 
> 赞同：3
> 
> 时间：2012-10-30T07:24:52.243
> 
> 标签：java, open-source, pdfbox

我需要 Java 库来执行以下任务 1) 将 Pdf 页面转换为图像 2) 从 PDF 页面中提取 html 文本并在页面上有位置 3) 从 PDF 页面中提取图像

我已经试过了

1.  PDFBox - 它失败并出现错误 -- 不支持/禁用操作：BDC 和 EMC
2.  icePDF - 它适用于任务 1) 和 3)，但又是付费的。
3.  PDFRenderer - 它失败了
4.  BFO - 它的付费图书馆，但能够执行任务 1) 和 3)

任何人都可以提出更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:08:23.843

你试过[JOD 转换器](http://code.google.com/p/jodconverter/)吗？它是自启动 Open Office Server 的 Java API。

要查看它是否转换为您想要的格式，只需安装 Open Office，打开一个文件，然后尝试“另存为”您需要的格式，看看它是否受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:21:20.977

我已按照以下步骤解决 Ubuntu Enviornment 中的问题

步骤 1) 使用 pdftohtml 库将 pdf 转换为 html

步骤 2）在步骤 1 中使用 Jsoup 从 html 中提取具有样式和位置的文本）

步骤 3) 使用 CutyCapt 生成 HTML 快照（如果需要）

我们也可以使用 pdftoppm 命令直接从 pdf 中提取图片

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-05T07:48:47.337

您可以使用 PDFBox 完成所有这些操作。但是为了获得这个职位，没有 API。下载最新的[PDFBox](http://pdfbox.apache.org/download.html)。转到以下链接以查找您的解决方案。

1.  [将 Pdf 页面转换为图像](http://pdfbox.apache.org/commandlineutilities/PDFToImage.html)
2.  [从 PDF 页面中提取图像](http://svn.apache.org/repos/asf/pdfbox/branches/before-maven-layout/src/org/pdfbox/ExtractImages.java)
3.  从具有页面位置的 PDF 页面中提取 html 文本略有不同。使用 API，您将无法获取位置信息。但是您可以使用 PDFBox 获取所有位置信息。

请看一下[这个链接](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/TextPosition.html)。在那里你可以看到 getTextPos() 函数。getTextPos().getXPosition()、getTextPos().getYPosition() 将为您提供 X 和 Y 坐标。

# emacs24 - elpa和init.el的加载顺序

> ID：13134415
> 
> 赞同：5
> 
> 时间：2012-10-30T07:24:54.253
> 
> 标签：emacs24

我从[https://github.com/technomancy/emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit)中提取了入门套件，它安装在`~/.emacs.d/elpa`. 按照 的说明`starter-kit.el`，我将用户特定的自定义设置在`~/.emacs.d/$USER.el`：

```
(require 'color-theme-solarized)
(color-theme-solarized-dark)
(require 'auto-complete)
(global-auto-complete-mode) 
```

但是当我开始使用 emacs 时，它说

```
File error: Cannot open load file, color-theme-solarized 
```

我检查了`load-path`变量，发现路径`color-theme-solarized`不在其中。所以我在“要求”它之前添加了这个：

```
 (add-to-list 'load-path "~/.emacs.d/elpa/color-theme-solarized-20120301) 
```

但是错误仍然发生。然后我参考了elpa的wiki，它说所有的包都在`init.el`加载后初始化。然后我阅读`starter-kit.el`并发现**被`$USER.el`添加到`after-init-hook`**，这意味着错误不应该发生，因为在`$USER.el`初始化结束时加载了。我拼命地把我所有的定制移到最后`init.el`，令我惊讶的是，它工作得很好。似乎`init.el`是最后而不是首先加载的。除了将它写在`init.el`? 我不想做的`init.el`太长。

ps：我已经把`(require 'package)`和`(package-initialize)`放在开头，`init.el` 它没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T11:20:56.513

ELPA 为您的包添加自动加载。我不使用主题，但通常你会做类似的事情`(eval-after-load "color-theme" (quote (color-theme-solarized)))`，或者，如果你希望它在它刚刚自动加载（但没有完全加载）之后运行， `(eval-after-load "color-theme-autoloads" (quote (color-theme-solarized)))`.

# c++ - 类内c ++中实现g枚举的错误

> ID：13134416
> 
> 赞同：0
> 
> 时间：2012-10-30T07:24:57.157
> 
> 标签：c++, enums, compiler-errors

我正在尝试制作一个代表卡片的类。但我在编译时遇到了这个错误。

> 错误：预期的 `;' 在“西装”之前。

任何人都可以帮助此代码有什么问题吗？

```
#include<string>
using namespace std;
class Card {

private:
       Card::Suit suit;
       Card::CardName cardName;
public:
    enum Suit {Clubs, Diamonds, Hearts, Spades, UNKNOWN_SUIT};
    enum  CardName {Ace, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, UNKNOWN_CARDNAME};
    class NotInitalised : public exception{};
    Card ();
    Card (int card);
    Card (Card::Suit s, Card::CardName n);
    void setCard(Card::Suit, Card::CardName);
    Card::Suit getSuit();
    Card::CardName getCardName();
    Card::CardName getCardName(int);
    int getCardValue();
    string toString();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:35:14.997

您需要在使用枚举定义之前移动它们。例如：

```
#include<string>
using namespace std;
class Card {

public: 
    enum Suit {Clubs, Diamonds, Hearts, Spades, UNKNOWN_SUIT};
    enum  CardName {Ace, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, UNKNOWN_CARDNAME};
private:
       Card::Suit suit;
       Card::CardName cardName;
public:
    class NotInitalised : public exception{};
    Card ();
    Card (int card);
    Card (Card::Suit s, Card::CardName n);
    void setCard(Card::Suit, Card::CardName);
    Card::Suit getSuit();
    Card::CardName getCardName();
    Card::CardName getCardName(int);
    int getCardValue();
    string toString();
}; 
```

应该管用。

此外，您不需要限定类定义中枚举的使用，即代替

```
Card::Suit suit; 
```

您可以使用

```
Suit suit; 
```

我通常在私有元素之前声明一个类的所有公共元素，因为我想在查看它时拥有该类的公共接口，但这只是一种风格偏好，其他人可能不同意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:27:29.180

在 C++ 中，您需要在使用之前声明某些内容。因此，您必须将 enum Suit 的定义移到西装成员的声明之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:31:29.833

在使用该类型之前删除范围解析运算符并移动类型声明

您的课程将如下所示：

```
using namespace std;
class Card {

private:
    enum Suit {Clubs, Diamonds, Hearts, Spades, UNKNOWN_SUIT};
    enum  CardName {Ace, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, UNKNOWN_CARDNAME};

     Suit suit;
     CardName cardName;
public:
    class NotInitalised : public exception{};
    Card ();
    Card (int card);
    Card (Suit s, CardName n);
    void setCard(Suit, CardName);
    Suit getSuit();
    CardName getCardName();
    CardName getCardName(int);
    int getCardValue();
    string toString();
}; 
```

# php - Malihu 自定义滚动条 Ajax 内容 .mCSB_container 宽度未更新

> ID：13134419
> 
> 赞同：2
> 
> 时间：2012-10-30T07:25:04.280
> 
> 标签：php, mysql, jquery

问题是在加载网站时，.mCSB_container 类的宽度还可以，但是当我点击一个链接时，例如“项目”链接，它会触发一个 ajax 函数，即使内容不是那样，.mCSB_container 的宽度也不会改变很多。单击链接时不会加载网页。我尝试使用“更新”功能，但似乎它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T21:43:25.347

好的，我使用这个插件，我有同样的问题，但检查一下：

```
<script type="text/javascript">
$(function() {
    $("#content").mCustomScrollbar({
        scrollButtons:{
            enable:true
        },
        advanced:{
            updateOnContentResize: true    // <- the solution 
        }
    }); 

    // get ajax  link
    $('.Link').click(function(){
        $.get(this.href, function(data) {
            $("#content .mCSB_container").html(data);  // fill .mCSB_container  
            $("#content").mCustomScrollbar("update");   
            $("#content").mCustomScrollbar(
                "scrollTo"
                ,"top"
                ,{scrollInertia:200}
            ); // go to Top content
        });
        return false;
    });
});
</script> 
```

# maven - 当我安装 ojdbc6.jar 时，我得到了这个错误，我不知道如何解决它

> ID：13134420
> 
> 赞同：0
> 
> 时间：2012-10-30T07:25:04.317
> 
> 标签：maven, sakai, ojdbc

我想安装oracle插件--ojdbc6.jar。当我运行这些命令时：

```
cd D:\sakai3\nakamura\contrib\oracle-jdbc-6
mvn install:install-file -DgroupId=com.oracle-jdbc-6 -DartifactId=ojdbc6 -Dversion=10.2.0.1.0 -Dpackaging=jar -Dfile=org.sakaiproject.nakamura.ojdbc.jar
mvn -P 10.2.0.1.0 clean install
cd D:\sakai3\nakamura
mvn clean install
cd D:\sakai3\nakamura\contrib\csu
mvn clean package 
```

当我运行最后一个命令时，出现此错误：

```
[ERROR] Failed to execute goal on project edu.nyu.launchpad: Could not resolve d
ependencies for project edu.nyu:edu.nyu.launchpad:jar:1.4.2: The following artif
acts could not be resolved: org.apache.sling:maven-launchpad-plugin:jar:app:2.1.
0, org.sakaiproject.nakamura:org.sakaiproject.nakamura.ojdbc:jar:app:1.4.0, edu.
nyu:edu.nyu.launchpad:jar:app:1.4.2: Could not find artifact org.apache.sling:ma
ven-launchpad-plugin:jar:app:2.1.0 in maven repo (http://repo1.maven.org/maven2/
) -> [Help 1] 
```

这是我的pom：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://maven.apache.org/POM/4.0.0">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.sakaiproject.nakamura</groupId>
        <artifactId>base</artifactId>
        <version>1.4.2</version>
    </parent>

    <groupId>edu.nyu</groupId>
    <artifactId>edu.nyu.launchpad</artifactId>
    <name>NYU Launchpad</name>

    <properties>
        <nakamura.version>1.4.0</nakamura.version>
        <ux.version>1.4.0</ux.version>
    </properties>

    <packaging>jar</packaging>

    <build>
        <resources>
            <resource>
                <directory>../../app/src/main/resources</directory>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.sling</groupId>
                <artifactId>maven-launchpad-plugin</artifactId>
                <executions>
                    <execution>
                        <id>prepare-package</id>
                        <goals>
                            <goal>prepare-package</goal>
                        </goals>
                        <configuration>
                            <defaultBundleList>
                                <groupId>org.sakaiproject.nakamura</groupId>
                                <artifactId>org.sakaiproject.nakamura.app</artifactId>
                                <version>${nakamura.version}</version>
                            </defaultBundleList>
                            <jarWebSupport>
                                <groupId>org.sakaiproject.nakamura</groupId>
                                <artifactId>org.sakaiproject.nakamura.jetty-config</artifactId>
                                <version>${nakamura.version}</version>
                                <startLevel>5</startLevel>
                            </jarWebSupport>
                            <additionalBundles>
                                <bundle>
                                    <groupId>org.sakaiproject.nakamura</groupId>
                                    <artifactId>org.sakaiproject.nakamura.ojdbc6</artifactId>
                                    <version>${nakamura.version}</version>
                                    <startLevel>1</startLevel>
                                </bundle>
                                <bundle>
                                    <groupId>org.sakaiproject.nakamura</groupId>
                                    <artifactId>org.sakaiproject.nakamura.uxloader</artifactId>
                                    <version>${ux.version}</version>
                                    <startLevel>30</startLevel> </bundle>
                            </additionalBundles>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                        <manifest>
                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>org.apache.sling</groupId>
            <artifactId>org.apache.sling.launchpad.base</artifactId>
            <version>2.3.0</version>
            <classifier>webapp</classifier>
            <type>war</type>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.sling</groupId>
            <artifactId>maven-launchpad-plugin</artifactId>
            <version>2.1.0</version>
            <classifier>app</classifier>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project> 
```

我对我的英语感到非常抱歉。我是中国人。请原谅我蹩脚的英文和不清楚的表达。对不起！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:40:04.717

首先，您可以删除对`maven-launchpad-plugin`. 我根本看不出有任何合理的理由将其捆绑在一起。还是我错过了什么？你得到的错误很清楚：

```
Could not find artifact org.apache.sling:maven-launchpad-plugin:jar:app:2.1.0 
```

该插件在您的构建过程中*使用*，不需要作为依赖项。**删除**以下内容：

```
<dependency>
    <groupId>org.apache.sling</groupId>
    <artifactId>maven-launchpad-plugin</artifactId>
    <version>2.1.0</version>
    <classifier>app</classifier>
    <scope>provided</scope>
</dependency> 
```

作为一个侧面标记​​，您不应该像这样在项目之外获取资源：

```
<resources>
    <resource>
        <directory>../../app/src/main/resources</directory>
    </resource>
</resources> 
```

资源应包含在项目中。

# c# - 在 Asp.Net Gridview 中对数据进行分组

> ID：13134427
> 
> 赞同：11
> 
> 时间：2012-10-30T07:25:53.847
> 
> 标签：c#, asp.net, gridview

我有两个存储过程，它们返回两组相关数据。数据是这样的。第一个过程返回这样的数据

```
ISSUE_ID          ISSUETYPE          
-------------------------------------
1            ISSUE 1 TYPE
2            ISSUE 2 TYPE
3            ISSUE 3 TYPE
4            ISSUE 4 TYPE 
```

Second Procedure 根据 ISSUE_ID 返回这样的数据

```
HEADER ID          HEADER NAME            ISSUE_ID       
-----------------------------------------------------
 1                 HEADER 1 NAME               1   
 2                 HEADER 2 NAME               1
 3                 HEADER 3 NAME               2   
 4                 HEADER 4 NAME               2   
 5                 HEADER 5 NAME               3 
```

事情是我如何可以基于这个`ISSUE_ID`分组并使用两个存储过程在gridview中分组显示它。我在很多论坛上搜索过，发现选项是嵌套的 gridview。我可以在不使用此嵌套网格视图的情况下实现这一点吗？

最后我想像这样在gridview中显示。

```
ISSUE 1 TYPE
-----------------------------
            HEADER 1 NAME                 
            HEADER 2 NAME 
ISSUE 2 TYPE
-----------------------------
            HEADER 3 NAME                 
            HEADER 4 NAME                  
ISSUE 3 TYPE
-----------------------------
            HEADER 5 NAME 
```

提前感谢一百万..需要一些建议来实现这一目标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-20T11:46:50.333

> **ASP.Net GridView 中的分组示例**

```
<asp:GridView ID="grdViewOrders" CssClass="serh-grid" runat="server" AutoGenerateColumns="False" 
              TabIndex="1" Width="100%" CellPadding="4" ForeColor="Black" GridLines="Vertical" 
              BackColor="White" BorderColor="#DEDFDE" BorderStyle="None" BorderWidth="1px"
              OnRowDataBound="grdViewOrders_RowDataBound" OnRowCommand="grdViewOrders_RowCommand" 
              OnRowCreated="grdViewOrders_RowCreated">
    <Columns>       
        <asp:BoundField DataField="OrderID" HeaderText="OrderID" SortExpression="OrderID" />            
        <asp:BoundField DataField="ProductName" HeaderText="ProductName" SortExpression="ProductName" />            
        <asp:BoundField DataField="UnitPrice" HeaderText="UnitPrice" SortExpression="UnitPrice" />          
        <asp:BoundField DataField="Quantity" HeaderText="Quantity" SortExpression="Quantity" />         
        <asp:BoundField DataField="Discount" HeaderText="Discount" SortExpression="Discount" />         
        <asp:BoundField DataField="Amount" HeaderText="Amount" SortExpression="Amount" />                       
    </Columns>      
    <FooterStyle BackColor="#CCCC99" />     
    <SelectedRowStyle CssClass="grid-sltrow" />     
    <HeaderStyle BackColor="#6B696B" Font-Bold="True" ForeColor="White" BorderStyle="Solid" BorderWidth="1px" BorderColor="Black" />        
</asp:GridView> 
```

[![ASP.Net GridView 中的分组](../Images/9bd387cf9e4f99f0561a95452bfd7188.png)](https://i.stack.imgur.com/RVVwL.jpg)

**笔记：**

*   主要逻辑在GridView的RowCreated和RowDataBound事件中。

*   在遍历我的所有行时

    *   查看 CustomerId（主索引）并检查其他行。
    *   跟踪正在运行的总计
    *   跟踪正在运行的小计
*   在遍历结果集时，主索引的每一点都会发生变化：

    *   添加小计行
    *   为下一组重置小计
*   标题在 GridView 中显示为新行。

> **GridView 助手**

**使用 GridViewHelper**

下面我们将看到一些 GridViewHelper 示例。首先，我们显示将创建组和摘要的网格。样本数据来自 Northwind 数据库，稍作修改：

[![在此处输入图像描述](../Images/1c718cd701689ee773108aab17a2f36e.png)](https://i.stack.imgur.com/CTuI9.jpg)

要为 ItemTotal 列创建摘要，我们只需要承诺的 2 行代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterSummary("ItemTotal", SummaryOperation.Sum);
} 
```

首先，我们创建 GridViewHelper 设置它将在构造函数中作用的网格。然后我们注册摘要，指定列名和要执行的摘要操作。结果如下：

[![在此处输入图像描述](../Images/c269709bb300c77495be631a0d69cb03.png)](https://i.stack.imgur.com/QcEvA.jpg)

在此示例中，添加了一个新行来显示摘要。另一种选择是使用页脚行来显示摘要，而不是创建一个新的。将新行添加到网格时，只会创建显示汇总列所需的单元格。使用页脚，创建所有单元格。在组摘要的情况下，生成所有单元格或仅生成所需的单元格是组属性。

现在我们将创建一个组。代码如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterGroup("ShipRegion", true, true);
    helper.ApplyGroupSort();
} 
```

RegisterGroup 方法的第一个参数定义了必须创建组的列。也可以创建一个复合组，由一组列组成。第二个参数指定组是否是自动的。在这种情况下，将为组标题自动创建一个新行。第三个参数指定是否必须隐藏组列。ApplyGroupSort 方法将网格的排序表达式设置为组列，在本例中为 ShipRegion。这是分组正常工作所必需的，除非数据是从数据库中订购的。

在上面的示例中，列 ShipRegion 已被隐藏：

[![在此处输入图像描述](../Images/227e4f03109fecdc39961a80feabb632.png)](https://i.stack.imgur.com/rpdd7.jpg)

让我们做一些更有趣的事情，让我们为创建的组添加一个摘要。我们只需要多一行就可以将摘要注册到组中：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterGroup("ShipRegion", true, true);
    helper.RegisterSummary("ItemTotal", SummaryOperation.Sum, "ShipRegion");
    helper.ApplyGroupSort();
} 
```

这一次，RegisterSummary 方法采用了另一个参数。该参数指定必须创建摘要的组的名称。组名是根据组列名自动生成的。如果组只有一列，则组名将是该列的名称。如果组有多个列，组名称将是组成组的列的有序连接，并用加号 (“+”) 连接：“ShipRegion+ShipName”。

我们可以在网格下方看到分组和组摘要：

[![在此处输入图像描述](../Images/e9765f75a9c27e6d832ff7ed3c1f0641.png)](https://i.stack.imgur.com/fidNa.jpg)

可以在网格中创建多个组，模拟分层分组，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterGroup("ShipRegion", true, true);
    helper.RegisterGroup("ShipName", true, true);
    helper.ApplyGroupSort();
} 
```

结果：

[![在此处输入图像描述](../Images/062c2ff1cc1c582f735bcc6bd3a8545a.png)](https://i.stack.imgur.com/LXrf3.jpg)

当有多个组时，可视化会受到影响。GridViewHelper 具有允许轻松实现视觉或功能调整的事件。事件列表如下：

*   GroupStart：在新组开始时发生，这意味着在组列中找到新值时。
*   GroupEnd：发生在组的最后一行
*   GroupHeader：为组添加自动标题行时发生。如果组不是自动的，则不会触发事件。
*   GroupSummary：为组生成摘要行时发生。如果该组不是自动的，则不会触发该事件，但如果该组是一个抑制组，则会触发该事件（稍后会看到）。
*   GeneralSummary：在计算一般摘要之后发生。如果摘要是自动的，则在添加摘要行和将摘要值放置在行中之后发生事件。
*   FooterDataBound：发生在页脚数据绑定中。

通过多几行代码，我们可以改善网格的视觉效果：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterGroup("ShipRegion", true, true);
    helper.RegisterGroup("ShipName", true, true);
    helper.GroupHeader += new GroupEvent(helper_GroupHeader);
    helper.ApplyGroupSort();
}

private void helper_GroupHeader(string groupName, object[] values, GridViewRow row)
{
    if ( groupName == "ShipRegion" )
    {
        row.BackColor = Color.LightGray;
        row.Cells[0].Text = "&nbsp;&nbsp;" + row.Cells[0].Text;
    }
    else if (groupName == "ShipName")
    {
        row.BackColor = Color.FromArgb(236, 236, 236);
        row.Cells[0].Text = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + row.Cells[0].Text;
    }
} 
```

化妆品后的格子：

[![在此处输入图像描述](../Images/c068ec6d851c08ecfd2fb94143438906.png)](https://i.stack.imgur.com/3YYYm.jpg)

**更多分组选项**

还有两个更有趣的示例。第一个提出了一个复合组。第二个定义了一个抑制组，它具有与 sql GROUP BY 子句相同的行为。重复值被抑制，并对其他列执行汇总操作。

下面我们可以看到复合组的代码和网格外观：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    string[] cols = new string[2];
    cols[0] = "ShipRegion";
    cols[1] = "ShipName";
    helper.RegisterGroup(cols, true, true);
    helper.ApplyGroupSort();
} 
```

[![在此处输入图像描述](../Images/341c10b8f0b9ebaa440015bfb9b1b30b.png)](https://i.stack.imgur.com/gPfqo.jpg)

我们可以向组中添加摘要。这次我们将定义一个平均操作并添加一个标签来表示该操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    string[] cols = new string[2];
    cols[0] = "ShipRegion";
    cols[1] = "ShipName";
    helper.RegisterGroup(cols, true, true);
    helper.RegisterSummary("ItemTotal", SummaryOperation.Avg, "ShipRegion+ShipName");
    helper.GroupSummary += new GroupEvent(helper_GroupSummary);
    helper.ApplyGroupSort();
}

private void helper_GroupSummary(string groupName, object[] values, GridViewRow row)
{
    row.Cells[0].HorizontalAlign = HorizontalAlign.Right;
    row.Cells[0].Text = "Average";
} 
```

[![在此处输入图像描述](../Images/37c551b1aafe0113348a2210d2b43df0.png)](https://i.stack.imgur.com/Naxjf.jpg)

最后一个示例将创建一个抑制组。值得一提的是，如果定义了抑制组，则不能创建其他组。同样，如果已经定义了一个组，我们不能创建一个抑制组，如果我们尝试它会引发异常。

下面我们可以看到抑制组的代码和网格外观：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.SetSuppressGroup("ShipName");
    helper.RegisterSummary("Quantity", SummaryOperation.Sum, "ShipName");
    helper.RegisterSummary("ItemTotal", SummaryOperation.Sum, "ShipName");
    helper.ApplyGroupSort();
} 
```

[![在此处输入图像描述](../Images/2021161118e45e9fb65bf2e5ef56a649.png)](https://i.stack.imgur.com/Y8pG9.jpg)

对于未定义汇总操作的列，不显示任何值。这是有道理的，因为 GridViewHelper 不知道如何继续将在组行中找到的值汇总为唯一值。这提醒了某些已知消息：

“列 'column_name' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。”

显示没有汇总操作的列是没有意义的，要隐藏它们我们需要调用一个方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.SetSuppressGroup(rdBtnLstGroup.SelectedValue);
    helper.RegisterSummary("Quantity", SummaryOperation.Sum, "ShipName");
    helper.RegisterSummary("ItemTotal", SummaryOperation.Sum, "ShipName");
    helper.SetInvisibleColumnsWithoutGroupSummary();
    helper.ApplyGroupSort();
} 
```

我知道，这是一个很大的名字！生成的网格如下所示：

[![在此处输入图像描述](../Images/6cfa7d7c901875a813a84c2b07876dae.png)](https://i.stack.imgur.com/32sXg.jpg)

**汇总操作**

GridViewHelper 内置了三个汇总操作：求和、平均和行数。一个非常有用的功能是可以定义自定义汇总操作。为此，我们需要向 GridViewHelper 提供两种方法。将为网格（或组）中找到的每一行调用一个方法，并调用另一个方法来检索汇总操作的结果。下面我们有一个自定义汇总操作的示例。半虚拟操作将返回找到的最小值：

```
private List<int> mQuantities = new List<int>();

protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterSummary("Quantity", SaveQuantity, GetMinQuantity);
}

private void SaveQuantity(string column, string group, object value)
{
    mQuantities.Add(Convert.ToInt32(value));
}

private object GetMinQuantity(string column, string group)
{
    int[] qArray = new int[mQuantities.Count];
    mQuantities.CopyTo(qArray);
    Array.Sort(qArray);
    return qArray[0];
} 
```

在上面的代码中，我们可以看到所需的方法签名。两者都接收汇总的组和列名称。如果摘要与组无关，则 group 参数将为空。为网格中找到的每一行调用的方法还接收当前行中列的值。

生成的网格如下所示：

[![在此处输入图像描述](../Images/1e486c12aa4eb04e8546d867a59b23df.png)](https://i.stack.imgur.com/x6oGb.jpg)

**限制**

在一个示例中，我们说我们可以模拟分层分组。尽管网格似乎呈现出分层分组，但实际实现并不是分层的。没有组或子组。只有顺序注册的组。如果我们需要为内部组创建摘要，这将成为一个问题。下面我们可以看到在这种情况下会发生什么：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridViewHelper helper = new GridViewHelper(this.GridView1);
    helper.RegisterGroup("ShipRegion", true, true);
    helper.RegisterGroup("ShipName", true, true);
    helper.RegisterSummary("ItemTotal", SummaryOperation.Sum, "ShipName");
    helper.RegisterSummary("ItemTotal", SummaryOperation.Sum);
    helper.GroupSummary += new GroupEvent(helper_Bug);
    helper.ApplyGroupSort();
}

private void helper_Bug(string groupName, object[] values, GridViewRow row)
{
    if (groupName == null) return;

    row.BackColor = Color.Bisque;
    row.Cells[0].HorizontalAlign = HorizontalAlign.Center;
    row.Cells[0].Text = "[ Summary for " + groupName + " " + values[0] + " ]";
} 
```

[![在此处输入图像描述](../Images/1a1664bcaf69e28fd7eedcdbf5ee2eb8.png)](https://i.stack.imgur.com/HMARc.jpg)

如我们所见，摘要是在外部组的标题之后创建的。发生这种情况是因为事件顺序是：

```
Group1_Start
Group1_End
Group2_Start
Group2_End 
```

对于分层分组，事件顺序应该是：

```
Group1_Start
Group2_Start
Group2_End
Group1_End 
```

**执行**

GridViewHelper 被实现为独立类而不是继承类。这使得可以将 GridViewHelper 与任何 GridView 一起使用，并且不会强制开发人员继承特定的 GridView，这可能会影响类设计。解决方案中还有另外四个类：GridViewSummary、GridViewGroup、GridViewSummaryList 和 GridViewGroupList。创建“列表”类以允许字符串索引器访问：helper.GeneralSummaries["ItemTotal"].Value。

创建 GridViewHelper 时，会保存对目标 GridView 的引用，并将 RowDataBound 事件绑定到完成这项工作的方法：

```
public GridViewHelper(GridView grd, bool useFooterForGeneralSummaries, SortDirection groupSortDirection)
{
    this.mGrid = grd;
    this.useFooter = useFooterForGeneralSummaries;
    this.groupSortDir = groupSortDirection;
    this.mGeneralSummaries = new GridViewSummaryList();
    this.mGroups = new GridViewGroupList();
    this.mGrid.RowDataBound += new GridViewRowEventHandler(RowDataBoundHandler);
} 
```

GridViewHelper 内部使用的一些方法被定义为公共的，因为它们提供了一些自定义可能需要的有用功能。还有一些其他选项未在示例中显示，但可以使用 Visual Studio 智能感知轻松验证。

**已知的问题**

值类型的过度装箱和拆箱可能会影响性能。为了解决这个问题，我们可以使用泛型实现内置的汇总操作，但这并不像我们希望的那样容易，正如在 Using Generics for Calculations 中看到的那样。另一种可能性：使用泛型的运算符重载。在现实生活中，这不会影响应用程序，除非有一百万行，或者有数千个用户同时对数据进行分组和汇总。

在线示例将 GridView EnableViewState 保持为 false。这是必需的，因为当 EnableViewState 为 true 时，如果页面处于 PostBack 中，则 GridView 将从 ViewState 中重建，并且不会触发 RowDataBound 事件。我们可以在 ASP.Net 2.0 中安全地禁用 ViewState，因为 ControlState 仍将被保存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-23T22:14:38.673

这并不能完全回答问题，这里我使用的是非规范化结果集而不是问题中的结果集，但是调整数据不应该是这里的主要问题。

这是我如何进行分组，首先我附加到绑定到查找组的行数据，然后我劫持了渲染委托：

```
readonly Dictionary<Control, string> _groupNames = new Dictionary<Control, string>();
private Group _lastGroup;
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var obj = (Obj)e.Row.DataItem;
        if (obj.Group != _lastGroup)
        {
            e.Row.SetRenderMethodDelegate(RenderGridViewRowWithHeader);
            _lastGroup = obj.Group;

            // Cache group description for this row, note that you might
            // like to implement this differently if you have your data normalized.
            _groupNames[e.Row] = obj.Group.Description;                 }
        }
    }
} 
```

然后在渲染方法中：

```
private void RenderGridViewRowWithHeader(HtmlTextWriter output, Control container)
{
    // Render group header
    var row = new TableRow { CssClass = "groupingCssClass" };
    row.Cells.Add(new TableCell());
    row.Cells.Add(new TableCell
    {
        ColumnSpan = ((GridViewRow)container).Cells.Count - 1,
        Text = _groupNames[container]
    });
    row.RenderControl(output);

    // Render row
    container.SetRenderMethodDelegate(null); // avoid recursive call
    container.RenderControl(output);
} 
```

我知道这是一个 hack，但是当您深入了解 ASP.NET 时，这就是全部。此解决方案对控件状态非常友好，在运行时向网格添加行可能会导致异常行为。

# visual-c++ - 关于 GDI 对象

> ID：13134432
> 
> 赞同：0
> 
> 时间：2012-10-30T05:30:48.707
> 
> 标签：visual-c++

Windows 7 中一个进程的 GDI 对象上限是多少？

我读了很多文章，才知道 10k 是硬限制。

我尝试了所有解决方法，但未能成功增加 GDI 对象限制。有没有可用的热修复？请建议任何解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:48:40.000

我不认为 GDI 将允许您配置它。

无论如何，应该以其他方式解决。通常如此大的数字仅仅意味着需要重新设计。

# jquery - jQuery：如果它已经不存在，如何在多个 SELECT 元素中添加一个 OPTION？

> ID：13134444
> 
> 赞同：1
> 
> 时间：2012-10-30T07:27:15.753
> 
> 标签：jquery, option

我会用代码解释我的情况。

HTML：

```
<div class="list1">
  <select class="select250">
    <option class="temp" selected="selected" name="filter[]">Select</option>
    <option class="" value="George" name="filter[]">George</option>
    <option class="" value="Ben" name="filter[]">Ben</option>
  </select>
</div>
<div class="list2">
  <select class="select251">
    <option class="temp" selected="selected" name="filter[]">Select</option>
    <option class="" value="Sarah" name="filter[]">Sarah</option>
    <option class="" value="Alex" name="filter[]">Alex</option>
    <option class="" value="Natalie" name="filter[]">Natalie</option>
  </select>
</div>
<div class="list3">
  <select class="select252">
    <option class="temp" selected="selected" name="filter[]">Select</option>
    <option class="" value="Mobile" name="filter[]">Mobile</option>
    <option class="" value="Car" name="filter[]">Car</option>
    <option class="" value="Computer" name="filter[]">Computer</option>
  </select>
</div> 
```

JS（在 PHP 中使用）：

```
<script type="text/javascript">
  $('.select<?php echo $sid?>').change(function() {
    $('.temp', this).remove();  // THIS IS FINE
    if ($('option').siblings('.temp')) { } 
    else { $('select').prepend('<option name="filter[]" selected="selected" class="temp">Select</option>');  // THIS IS NOT WORKING 
    }
  });
</script> 
```

What I wanted to do is - whenever an option is selected, it should remove the "Select" option within that list but still keep "Select" option on other lists. 这部分似乎工作正常。接下来要做的是 - 当在另一个列表中选择一个选项时，它应该在所有其他列表上恢复选择，除了它被选择的列表。如您在上面看到的，我尝试为它编写代码，但无法超越它。如果有人能引导我朝着正确的方向前进，那就太棒了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:42:19.613

试试这个..这仍然可以优化..

```
$('[class^=select]').on('change', function() {
    $('.temp', this).remove();
    var $that = $(this);
    $('select').not($that).each(function() {
        if (!$(this).find('option.temp').length > -1) {
            $(this).prepend('<option name="filter[]" selected="selected" class="temp">Select</option>');
        }
    });
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/qk9MG/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:46:13.517

像这样的东西怎么样：

```
$('select').not($(this)).each(function() {
 if ($(this).find('.temp').size() > 0) continue;

 $(this).prepend('<option class="temp" ... </option>');
}); 
```

# jquery - 如何通过jquery删除与活动元素关联的子元素（单选按钮及其关联文本）

> ID：13134445
> 
> 赞同：0
> 
> 时间：2012-10-30T07:27:16.167
> 
> 标签：jquery, hide, element, live, show

我有一个由 jquery 创建的选择框，其类是“classTypex”。

我想使用此功能显示/隐藏其子元素，但它不适用于隐藏元素..

根据下面的代码，我添加了一个 textarea 和 3 个单选按钮.. 使用其他部分中的代码我可以隐藏 textaraea 但不是单选按钮.. 请帮助

```
// To display radio button selections for DD typex
$(".classTypex").live("change", function () {
   var id = $(this).attr("id").split("colTypex").join(""); 
   var opt = $("#colTypex" + id + " option:selected").val(); 

   if(opt == 'DD') {

       // append a text area for none selection
       $(this).after('<p>');
       $(this).after('<textarea name="ddOptions'+id+'" id="ddOptions'+id+'" rows="4" cols="40">');
       $(this).after('</p>');

       // append radio buttons here
       $(this).after('<p id="preTag'+id+'">');
       $(this).after('Set Users as options');
       $(this).after('<input type="radio" class="columnTypex" id="radioDD'+id+'" name="radioDD'+id+'" value="befree_user" />');
       $(this).after('Set Entities as options');
       $(this).after('<input type="radio" class="columnTypex" id="radioDD'+id+'" name="radioDD'+id+'" value="entity_data" />');
       $(this).after('None');
       $(this).after('<input type="radio" class="columnTypex" id="radioDD'+id+'" name="radioDD'+id+'" value="none" checked />');
       $(this).after('</p>');

   }
   else {
       $('#ddOptions'+id).hide();
       $('#preTag'+id).hide();
   }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:04:50.367

您的代码不起作用，因为每个（！）调用`.after()`都会创建一个完整的标签，因此第一个标签`<p>`将与其结束标签一起创建，甚至在您调用`.after('</p>')`.

您应该首先创建完整的 HTML 字符串，然后附加它。

```
var newHTML = '<p><textarea name="ddOptions'+id+'" id="ddOptions'+id+'" rows="4" cols="40"></p>';
$(this).after(newHTML); 
```

# android - 当我按下后退按钮时，我在 android 中发现了空白活动

> ID：13134446
> 
> 赞同：0
> 
> 时间：2012-10-30T07:27:22.317
> 
> 标签：android, android-intent, android-webview

在我的第一个视图中，我有 4 个图标，如 facebook、twitter 等。当我按下其中一个图标时，它会将我带到相关网站。但是当我按下后退按钮时，它首先向我显示一个空白活动，然后我必须再次按下后退按钮才能到达我的第一个活动。

有什么帮助吗？提前致谢

```
 public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
    case R.id.button1:
        web_bundle=new Bundle();
        web_bundle.putInt("icon_position", 1);
        web_intent=new Intent(Recipe.this,WebViewActivity.class);
        web_intent.putExtras(web_bundle);
        startActivity(web_intent);
        break;
    case R.id.button2:
        web_bundle=new Bundle();
        web_bundle.putInt("icon_position", 2);
        web_intent=new Intent(Recipe.this,WebViewActivity.class);
        web_intent.putExtras(web_bundle);
        startActivity(web_intent);

        break;
    case R.id.button3:
        web_bundle=new Bundle();
        web_bundle.putInt("icon_position", 3);
        web_intent=new Intent(Recipe.this,WebViewActivity.class);
        web_intent.putExtras(web_bundle);
        startActivity(web_intent);

        break;
    case R.id.button4:
        web_bundle=new Bundle();
        web_bundle.putInt("icon_position", 4);
        web_intent=new Intent(Recipe.this,WebViewActivity.class);
        web_intent.putExtras(web_bundle);
        startActivity(web_intent);

        break;
    }
}

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    webview=(WebView)findViewById(R.id.webView1);
    webview.getSettings().setJavaScriptEnabled(true);

    Intent get_icon=getIntent();
    Bundle get_bundle=get_icon.getExtras();
    int icon_id=get_bundle.getInt("icon_position");
    if(icon_id==1){
        webview.loadUrl("http://www.facebook.com");
    }
    if(icon_id==2){
        webview.loadUrl("http://www.twitter.com");
    }
    if(icon_id==3){
        webview.loadUrl("http://www.plus.google.com");
    }
    if(icon_id==4){
        webview.loadUrl("http://www.blogger.com");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:29:41.900

据我所知，当我第一次按下后退按钮时，我面临同样的问题，它首先停止加载该 URL，或者我们可以说该 facebook 站点。然后再次按下返回按钮，它会让你回到你的应用程序。

# jquery - 如何使用两个数据（“自动完成”），即一起渲染和调整大小

> ID：13134447
> 
> 赞同：0
> 
> 时间：2012-10-30T07:27:26.433
> 
> 标签：jquery, jquery-ui, jquery-plugins, autocomplete, jquery-autocomplete

```
$(".someClassWithMultipleItemsOnDOM").autocomplete({

        minLength:2,
        source .....(ajax call)
        .....   
}).focus( function() {
            /*some code*/

        })
.data( "autocomplete" )._renderItem = function( ul, item ) {
/*render item for making search text bold*/

};
.data("autocomplete")._resizeMenu = function () {
        /*resize code to set the size of autocosearch drop down box*/
        }; 
```

我在调整大小菜单行时收到错误，即存在语法错误，有没有办法同时使用这两个功能。以类似的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:43:35.963

您可以像这样使用 _renderItem 和 _resizeMenu。

```
 var tag = $("#domId").autocomplete({
              source:...........
   });
  tag.data("autocomplete")._renderItem = function (ul, item) {
              /* Your code*/
   };
  tag.data("autocomplete")._resizeMenu = function () {
              /* Your code*/
   }; 
```

看看这个网站[JQFAQ](http://jqfaq.com/)，它将对 jQuery 开发人员更有用。

# c# - TCPClient 没有收到数据

> ID：13134458
> 
> 赞同：3
> 
> 时间：2012-10-30T07:28:07.180
> 
> 标签：c#, tcpclient

我想使用 StreamReader 和 StreamWriter 通过 TCPClient.NetworkStream 接收和发送数据。代码如下图所示：
客户端代码：

```
 using (TcpClient client = new TcpClient())
            {
                IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 9001);
                client.Connect(localEndPoint);
                client.NoDelay = true;

                using(NetworkStream stream = client.GetStream())
                {                    
                    using (StreamWriter writer = new StreamWriter(stream))
                    {
                        writer.AutoFlush = true;
                        using (StreamReader reader = new StreamReader(stream))
                        {    

                            string message = "Client says: Hello";
                            writer.WriteLine(message);

                // If I comment the line below, the server receives the  first message
                // otherwise it keeps waiting for data
                           string response = reader.ReadToEnd();
                           Console.WriteLine(response);
                        }
                       ;
                    }
                }
            } 
```

**注意：如果我评论 reader.ReadToEnd(); 然后服务器接收到消息，否则服务器一直等待来自客户端的数据。ReadToEnd 是问题吗？**

服务器代码异步接受连接，但以同步方式处理数据：

```
class Program
    {
        private static AsyncCallback tcpClientCallback;
        static void Main(string[] args){

            IPEndPoint localEndPoint =  new IPEndPoint(IPAddress.Parse("127.0.0.1"),9001);
            TcpListener listener = new TcpListener(localEndPoint);

            listener.Start();

            tcpClientCallback = new AsyncCallback(ConnectCallback);
            AcceptConnectionsAysnc(listener);

            Console.WriteLine("Started Aysnc TCP listener, press any key to exit (server is free to do other tasks)");
            Console.ReadLine();
        }

        private static void AcceptConnectionsAysnc(TcpListener listener)
        {
            listener.BeginAcceptTcpClient(tcpClientCallback, listener);
        }

        static void ConnectCallback(IAsyncResult result)
        {
            Console.WriteLine("Received a conenct request");
            TcpListener listener = (TcpListener)result.AsyncState;

            // We are starting a thread which waits to receive the data
            // This is not exactly scalable
            Task recieveTask = new Task(() => { HandleRecieve(result, listener); });
            recieveTask.Start();

            AcceptConnectionsAysnc(listener);
        }

        // This makes a blocking call - that means until the client is ready to
        // send some data the server waits
        private static void HandleRecieve(IAsyncResult result, TcpListener listener)
        {
            Console.WriteLine("Waiting for data");

            using (TcpClient client = listener.EndAcceptTcpClient(result))
            {
                client.NoDelay = true;

                using (NetworkStream stream = client.GetStream())
                {
                    using (StreamReader reader = new StreamReader(stream))
                    {
                        using (StreamWriter writer = new StreamWriter(stream))
                        {
                            writer.AutoFlush = true;
                            Stopwatch watch = new Stopwatch();
                            watch.Start();
                            string data = reader.ReadToEnd();
                            watch.Stop();
                            Console.WriteLine("Time: " + watch.Elapsed.TotalSeconds);
                            Console.WriteLine(data);

// Send a response to client
                                writer.WriteLine("Response: " + data);
                            }

                        }
                    }            

                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T07:37:53.707

流在关闭之前不会*结束*。目前，客户端和服务器都保持他们的连接*打开*，并且都试图从另一个读取**到最后**- 当他们这样做时，它们会关闭自己。这是一个僵局：两者都不会走到尽头，所以也永远不会关闭（这将允许对方走到尽头）。

选项：

*   使用原始套接字，并让客户端在发送后关闭*出站*流：

    ```
    socket.Shutdown(SocketShutdown.Send); 
    ```

    这让*服务器*读取完成，让服务器关闭，让客户端读取完成；关闭出站套接字后，客户端仍然可以从*入站流中读取。*

*   使用与`ReadToEnd`;不同的终止隐喻 对于基于文本的协议，行尾是最常见的（所以：）`ReadLine`；对于二进制协议，消息的长度前缀是最常见的。这允许每一端读取*下一条消息*，而不必读取到流的末尾。*在这种情况下*，它只是一条消息，但该策略仍然有效。

*   如果您发现上述问题很棘手，请使用不同的协议；http 适合单请求/响应操作，可以在服务器上通过`HttpListener`.

`ReadToEnd`此外，在服务器（甚至）上使用时我会非常小心`ReadLine`——这可能是锁定服务器上线程的好方法。如果服务器需要处理高吞吐量和大量连接，则首选基于原始套接字的异步 IO。

# angularjs - 如何使用 Bamboo 的 Karma（以前是 Testacular）运行 Jasmine 测试？

> ID：13134463
> 
> 赞同：10
> 
> 时间：2012-10-30T07:28:38.367
> 
> 标签：angularjs, jasmine, karma-runner, bamboo

在使用 AngularJS 构建单页应用程序时，我正在尝试将 Jasmine 测试集成到我的构建中。

我之前使用 Maven Jasmine 插件做过类似的事情，但我不喜欢将我的项目包装在 maven 中只是为了运行 Jasmine 测试。以某种方式使用 Karma（是 Testacular）似乎更清洁。

我很高兴我会从 shell 命令运行东西，我的猜测是我可以从 Bamboo 运行命令。

我的问题：

*   我在正确的轨道上吗？
*   我怎样才能最好地使脚本构建失败，或者 Bamboo 是否会自动识别 Karma 输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T16:10:39.847

好问题。确保 testacular.conf.js 配置为输出 junit xml 供竹子使用

```
junitReporter = {
  // will be resolved to basePath (in the same way as files/exclude patterns)
  outputFile: 'test-results.xml'
}; 
```

您可以将 Testacular 配置为在许多浏览器上运行，并且预先配置为使用 Chrome，我们选择开始使用 PhantomJS 进行无头测试来进行单元测试。睾丸内已经有茉莉花。

对于 CI，我们遵循

```
// Continuous Integration mode
// if true, it capture browsers, run tests and exit
singleRun = true; 
```

如果你经常使用 Ant（我们确实如此），有时你只想坚持你所知道的……所以你可能想查看[ANT、Windows 和 NodeJS 模块。](http://www.jonnyreeves.co.uk/2012/ant-windows-and-nodejs-modules/)运行节点模块（即 testacular）。

请注意，如果您在 Windows 上运行 testacular，则 testacular 的 npm install 在hiredis 模块上失败，这似乎只是 *nix 友好的。所以，到目前为止，没有它它工作得很好。

我们花了几个小时来证明所有这些工作。希望这可以帮助

- 担

# login - Facebook 登录按钮显示“未定义”而不是“登录”

> ID：13134468
> 
> 赞同：1
> 
> 时间：2012-10-30T07:28:54.460
> 
> 标签：login, oauth, facebook-opengraph, facebook-login

在我的网站中实现的 facebook 登录按钮在 Windows 7 中的 Firefox 最新版本中将文本显示为“未定义”而不是“登录”。所以为了解决这个问题，我去[https://developers的插件页面获取最新代码.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)。

它也在预览按钮中显示“未定义”。应该怎么做才能修复它？

我已准备好使用给出的最新代码，但对我来说这似乎是 facebook JS 的问题。

对不起！我没有足够的代表来发布图片：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:42:28.680

我把它报告给 fb 并参考了 Ravi 的截图。这是我的错误报告，如果你想订阅 - [https://developers.facebook.com/bugs/383067995106570](https://developers.facebook.com/bugs/383067995106570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T09:30:11.960

这个问题曾经让我很沮丧，我在许多网站上寻找解决方案。我发现一个站点对我很有帮助，因为我的问题已经解决并且解决方案很容易理解。所以我和你们分享。只需访问[www.facebookloginhelp.net](http://facebookloginhelp.net)即可解决您的问题。

# networking - 以编程方式检测 Windows 上的连接网络速度

> ID：13134472
> 
> 赞同：3
> 
> 时间：2012-10-30T07:29:18.147
> 
> 标签：networking, wmi, ethernet

如何检测我的 NIC 建立的以太网连接类型？也就是说，我的网卡是千兆以太网设备，但由于它是自动感应的，它可能以千兆速度或快速以太网速度连接。

我如何知道它的连接速度是多少？

我尝试使用 WMI 的`Win32_NetworkAdapter`, `CIM_NetworkAdapter`, even `wmic NET get Name,Speed`，但它们都为 Speed 返回空白。

顺便说一句，我正在使用 Windows XP Pro SP3。但我想要一个也适用于 Windows Server 2003（标准和企业版）、Windows Server 2008 和 Windows Server 2008 R2 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:06:59.750

一个代号为“mystifeid”的神秘人在这个网站上解决了这个难题，第三个帖子下来： [http ://social.msdn.microsoft.com/Forums/uk-UA/scripting/thread/e3936dff-7395-4a6a-ab35-aa1aab0bcd71](http://social.msdn.microsoft.com/Forums/uk-UA/scripting/thread/e3936dff-7395-4a6a-ab35-aa1aab0bcd71)

这是他们可爱的代码：

```
Dim strQuery, strQuery2, objLocator, objWMI, objItem, objItem2, colItems, colItems2, resultString, nicName
strQuery = "SELECT * FROM Win32_PerfFormattedData_Tcpip_NetworkInterface"
strQuery2 = "SELECT * FROM Win32_NetworkAdapter"
Set objLocator = CreateObject( "WbemScripting.SWbemLocator" )
Set objWMI = objLocator.ConnectServer( ".", "root\CIMV2" )
objWMI.Security_.ImpersonationLevel = 3
Set colItems2 = objWMI.ExecQuery( strQuery2, "WQL", 0 )
Set colItems = objWMI.ExecQuery( strQuery, "WQL", 0 )
resultString = ""
For Each objItem2 In colItems2
 If objItem2.NetConnectionStatus = 2 Then
  nicName = Mid(objItem2.Name, 1, 5)
  resultString = resultString & "Adapter Name : " & objItem2.Name & VbCrLf
  resultString = resultString & "MAC Address : " & objItem2.MACAddress & VbCrLf
  For Each objItem In colItems
   If Mid(objItem.Name, 1, 5) = nicName Then
    resultString = resultString & "CurrentBandwidth : " & objItem.CurrentBandwidth & VbCrLf
   End If
  Next
 End If
Next
Set objLocator = Nothing
Set objWMI = Nothing
Set colItems = Nothing
Set colItems2 = Nothing
WScript.Echo resultString 
```

PS-我很快就会对 Win7 和 Win2008 进行审查，并让大家知道。

# android - Android列表视图项目对齐

> ID：13134476
> 
> 赞同：1
> 
> 时间：2012-10-30T07:29:30.087
> 
> 标签：android, listview

我有一个列表视图，可以在其中动态添加项目。我希望某些项目（我选择的）应与左侧对齐，而某些与右侧对齐。Android的ListView可以做到这一点吗？

//适配器

```
if (convertView == null) {
                holder = new EventViewHolder();
                if (type == 1) {
                    convertView = inflater.inflate(
                            R.layout.multi_line_list_item, null);
                    holder.mtvMessage = (TextView) convertView
                    .findViewById(R.id.tvMessage);
                    holder.mtvMessage.setGravity(Gravity.LEFT);
                    holder.mtvMessage.setBackgroundResource(R.drawable.chatbluebox);
                    convertView.setTag(holder);
                }else{
                    convertView = inflater.inflate(
                            R.layout.multi_line_list_item, null);
                    holder.mtvMessage = (TextView) convertView
                    .findViewById(R.id.tvMessage);
                    holder.mtvMessage.setGravity(Gravity.RIGHT);
                    holder.mtvMessage.setBackgroundResource(R.drawable.chatgreenbox);
                    convertView.setTag(holder);

            } 
```

请让我知道是否可以完成并建议我一个好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:36:04.620

```
android:stackFromBottom="true"
android:transcriptMode="alwaysScroll" 
```

在您的 listView xml 条目中添加这些行......

对于左右对齐，维护两个布局 xmls 一个右对齐，另一个左对齐（无论你想要什么），然后在 listAdapter 的 getView() 方法中设置一些条件并根据需要膨胀这些 xml

```
if (convertView == null)
    if(some condition)
        convertView = mInflater.inflate(R.layout.rightxml, null);
    else
        convertView = mInflater.inflate(R.layout.leftxml, null);
    .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:34:33.863

查看 ListView 模式[stackFromBottom](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3astackFromBottom)和[transcriptMode](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3atranscriptMode) ，它们可能会为您完成大部分工作。

要左右对齐单元格中的项目，您可以，例如在适配器 getView 方法中将重力设置为左右。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:35:19.510

使用以下。

```
adapter.notifyDataSetChanged(); 
```

进而

```
listView.setSelection(items.size()-1); 
```

对于重力您需要在您的`getview()`方法中动态设置重力。

例如 ：-

```
textview1.setGravity(Gravity.RIGHT); 
```

# xml - vba：将结果 xml 文件保存到某个路径

> ID：13134478
> 
> 赞同：1
> 
> 时间：2012-10-30T07:29:35.833
> 
> 标签：xml, vba

我在下面写了一个脚本：

```
...
Set fs = CreateObject("Scripting.FileSystemObject")
Set a = fs.CreateTextFile("XXXX.xml", True)

a.write......

a.close 
```

我想将 xml 文件“a” - xxxx.xml 保存到指定路径。我搜索“Scripting.FileSystemObject”的功能，应该有选择保存路径的方法。

但我尝试后没有找到答案。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:47:36.277

您只需将路径添加到文件名：

```
Set a = fs.CreateTextFile("C:\Temp\XXXX.xml", True) 
```

# java - java - 如何通过跨上下文在java中使用http访问远程文件夹？

> ID：13134479
> 
> 赞同：0
> 
> 时间：2012-10-30T07:29:35.657
> 
> 标签：java, file, tomcat7, contextpath

以下是片段：

```
 File folder = new File("http://10.155.6.108:9292/downloads/EA0005632_000000000/");
            File file[] = folder.listFiles(); 
```

上下文是`tomcat 7`在远程系统的 server.xml 文件中定义的`10.155.6.108`。它是 windows。

```
<Context docBase="E:/EAPP_BSLI_TAB_DOCS" crossContext="true" path="/downloads" /> 
```

当我在浏览器中输入此网址时，我能够下载图像`http://10.155.6.108:9292/downloads/EA0005632_000000000/abc.jpg`

访问未共享的远程文件夹的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:43:39.037

在 Tomcat（或任何其他应用程序服务器）中无法以这种方式访问​​远程文件夹。远程文件夹需要通过该主机上的某些服务（如 Web 服务）公开。

# javafx - 在 JavaFX2.2 中的两个 FXML 文件之间更改更改侦听器

> ID：13134483
> 
> 赞同：2
> 
> 时间：2012-10-30T07:29:44.663
> 
> 标签：javafx

我是 JavaFX 编程的新手。我有一个应用程序，其中包含一个简单的登录页面，如此处示例中所述[，](http://docs.oracle.com/javafx/2/get_started/css.htm)我将 StringProperty 添加到 actiontarget 元素。因此，当 actiontarget 中的文本发生更改时，我想要一个内部带有 webview 的新 FXML 文件，从 FXMLLoader 加载并在屏幕上显示。下面是我得到的例外。我可以加载任何其他 fxml 文件，其中没有 webview，没有问题。在此先感谢。下面的代码示例异常：

```
java.lang.IllegalStateException: Not on FX application thread; currentThread = Thread-3
at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:237)
at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:397)
at com.sun.webpane.sg.prism.InvokerImpl.checkEventThread(InvokerImpl.java:33)
at com.sun.webpane.platform.WebPage.<init>(WebPage.java:189)
at com.sun.webpane.sg.ImplementationManager.createPage(ImplementationManager.java:57)
at com.sun.webpane.sg.ImplementationManager.createPage(ImplementationManager.java:51)
at javafx.scene.web.WebEngine.<init>(WebEngine.java:704)
at javafx.scene.web.WebEngine.<init>(WebEngine.java:691)
at javafx.scene.web.WebView.<init>(WebView.java:245)
at student.WebBrowser.<init>(WebBrowser.java:31)
at Login.Login.replaceSceneContent(Login.java:171)
at Login.Login.access$000(Login.java:66)
at Login.Login$2.changed(Login.java:143)
at Login.Login$2.changed(Login.java:137)
at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:196)
at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:100)
at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(StringPropertyBase.java:121)
at javafx.beans.property.StringPropertyBase.markInvalid(StringPropertyBase.java:128)
at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:161)
at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:67)
at javafx.scene.text.Text.setText(Text.java:188)
at Login.Client.run(Client.java:66) 
```

首先我的听众：

```
// Add change listener
    sp.addListener(new ChangeListener<String>() {
        @Override
        public void changed(ObservableValue<? extends String> ov, String t, String t1) {

            if(t1.equalsIgnoreCase("user authenticated successfully")){
                try {
                    replaceSceneContent(cb.getSelectionModel().getSelectedItem().toString()+".fxml",primaryStage);
                    System.out.println("everything ok");
                } catch (Exception ex) {
                    System.out.println("something went wrong");
                    ex.printStackTrace();
                }
            }
        }
    }); 
```

第二个我的方法：replaceSceneContent(String fxml, Stage stage)

```
private Parent replaceSceneContent(String fxml, Stage stage) throws Exception {
    Parent page = (Parent) FXMLLoader.load(getClass().getResource("/FXML_Files/"+fxml), null, new JavaFXBuilderFactory());      
    Scene scene = stage.getScene();
    if (scene == null) {
        scene = new Scene(page, 700, 450);
        stage.setScene(scene);
    } else {
        stage.getScene().setRoot(page);
    }
    if(fxml.equalsIgnoreCase("Student.fxml")){
        Pane spane = (Pane) page.lookup("#pane");
        WebBrowser wb = new WebBrowser();           
        spane.getChildren().add(wb);            
    }
    return page;
} 
```

和我的 WebBrowser 类类似 NetBeans7.2 中的例子：

```
public class WebBrowser extends Pane {

    public WebBrowser() {

        WebView view;
        final WebEngine eng;    
        view = new WebView();
        view.setMinSize(10, 10);
        view.setPrefSize(500, 400);
        eng = view.getEngine();
        eng.load("http://www.oracle.com/us/index.html");

        VBox.setVgrow(this, Priority.ALWAYS);
        setMaxWidth(Double.MAX_VALUE);
        setMaxHeight(Double.MAX_VALUE);

        final TextField locationField = new TextField("http://www.oracle.com/us/index.html");
        locationField.setMaxHeight(Double.MAX_VALUE);
        Button goButton = new Button("Go");
        goButton.setDefaultButton(true);
        EventHandler<ActionEvent> goAction = new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent event) {
                eng.load(locationField.getText().startsWith("http://") ? locationField.getText() :
                        "http://" + locationField.getText());
            }
        };

        goButton.setOnAction(goAction);
        locationField.setOnAction(goAction);
        eng.locationProperty().addListener(new ChangeListener<String>() {
            @Override public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue) {
                locationField.setText(newValue);
           }
        });
        GridPane grid = new GridPane();
        ButtonsEvents be = new ButtonsEvents();
        TilePane tp = be;
        tp.setAlignment(Pos.CENTER);
        grid.setVgap(5);
        grid.setHgap(5);
        GridPane.setConstraints(locationField, 0, 0, 1, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.SOMETIMES);
        GridPane.setConstraints(goButton,1,0);
        GridPane.setConstraints(view, 0, 1, 2, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.ALWAYS);
        GridPane.setConstraints(tp, 0, 2, 2, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.NEVER);
        grid.getColumnConstraints().addAll(
                new ColumnConstraints(100, 100, Double.MAX_VALUE, Priority.ALWAYS, HPos.CENTER, true),
                new ColumnConstraints(40, 40, 40, Priority.ALWAYS, HPos.CENTER, true)
        );
        grid.getChildren().addAll(locationField, goButton,view, tp);
        getChildren().add(grid);
    }

    @Override 
    protected void layoutChildren() {
        List<Node> managed = getManagedChildren();
        double width = getWidth();
        double height = getHeight();
        double top = getInsets().getTop();
        double right = getInsets().getRight();
        double left = getInsets().getLeft();
        double bottom = getInsets().getBottom();
        for (int i = 0; i < managed.size(); i++) {
            Node child = managed.get(i);
            layoutInArea(child, left, top,
                           width - left - right, height - top - bottom,
                           0, Insets.EMPTY, true, true, HPos.CENTER, VPos.CENTER);
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:47:37.540

如例外中所述，JavaFX 场景图中的更改只能在 JavaFX 应用程序线程中进行。要确保您的代码在此线程中运行，请尝试以下操作：

```
Platform.runLater(new Runnable() {
             @Override
             public void run() {
                 // This method is invoked on JavaFX thread
                 replaceSceneContent(cb.getSelectionModel().getSelectedItem().toString()+".fxml",primaryStage);
             }
         }); 
```

javafx 管理器将在未来某个时间点在正确的线程上运行此代码。

更多信息： [http ://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

# jquery - 在谷歌应用引擎中使用引导输入自动完成

> ID：13134486
> 
> 赞同：1
> 
> 时间：2012-10-30T07:30:10.543
> 
> 标签：jquery, python, google-app-engine, twitter-bootstrap, bootstrap-typeahead

我在 Google App Engine 应用程序中使用 Bootstrap typeahead，但它不起作用。

我的 HTML：

```
<div class="well">
  <input type="text" class="span3" id="search" name="search"
         data-provide="typeahead" data-items="4" />
</div>
<script>  
  $('#search').typeahead({
    ajax: { url: '/SearchCity', 
    triggerLength: 1 }
 });
</script> 
```

还有我的 Python 代码：

```
class SearchCity(webapp2.RequestHandler):
    def post(self):
        data = ['cat','dog','bird', 'wolf']
        data = json.dumps(data)         
        self.response.out.write(data) 
```

为什么自动完成不起作用？这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:34:54.707

typeahead 期望选择在一个`options`变量中。将您的视图转换为：

```
class SearchCity(webapp2.RequestHandler):
    def post(self):
        data = ['cat','dog','bird', 'wolf']
        data = json.dumps({'options': data}) #Changed line
        self.response.out.write(data) 
```

此外，您的 HTML 可能需要进行一些更改，请尝试以下操作：

```
$('#id_chain').typeahead({
  minLength: 1,
  source: function (query, process) {
    return $.get('/SearchCity', function (data) {
      return process(data.options);
    });
  }
}); 
```

这里的免责声明是您没有指定您正在使用的 Bootstrap 版本......这适用于框架的 v2+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:42:21.847

正如[引导程序的文档](http://twitter.github.com/bootstrap/javascript.html#typeahead)所说，这看起来更像：

```
function get_data_async(query, callback) {
    $.ajax({
          url: '/SearchCity/',
          data: query,
          dataType: 'json',
          type: 'POST',
          success: callback
    })
}

$('#search').typeachead({source: get_data_async}) 
```

# jquery - jQuery ui Sortable 可以表现得像gridster吗？

> ID：13134487
> 
> 赞同：3
> 
> 时间：2012-10-30T07:30:17.447
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

是否有可能让[jQuery ui 可排序网格](http://jqueryui.com/sortable/#display-grid)表现得像[gridster](http://gridster.net/)？

为什么不使用gridster？因为它不适用于IE9以下的任何东西。

查看 jQuery ui Sortable 示例，如果将数字 5 拖动到数字 1，数字 1 会向右移动。当我对 gridster 执行相同的操作时，1 号将移动到 5 号的位置。即使使用不同大小的元素，它也能继续工作。

是否有可能让 jQuery ui Sotables 网格以类似的方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:24:02.727

几乎不。jQuery 的 sortable 所做的只是改变父元素中元素的顺序。该演示中显示的“网格行为”只是浏览器的布局引擎行为正常（从左到右放置元素，同时它们适合父元素`width`，然后从上到下）。另一方面，gridster 模拟了一个独立于其元素的网格：即使您从一列中删除所有图块，它仍会占用屏幕上的空间。列上的元素是有序的，但行会根据需要添加/删除。

完全复制这种行为将是很多工作。最接近[gridster demo](http://gridster.net/)的行为是[连接列表](http://jqueryui.com/sortable/#connect-lists)示例，您可以将其设置为网格（[示例](http://jsfiddle.net/UhTt7/)），但每个元素的大小相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:04:09.627

如果你知道如何使用 jQuery 库，有一个名为 Isotope 的 jQuery 插件，它的工作方式类似：http: [//isotope.metafizzy.co/demos/fluid-responsive.html](http://isotope.metafizzy.co/demos/fluid-responsive.html)

如果您需要添加拖动事件，您可以按照以下说明扩展同位素小部件：http: [//jstarrdewar.com/blog/2011/10/28/extend-jquery-draggable-to-work-with-isotope](http://jstarrdewar.com/blog/2011/10/28/extend-jquery-draggable-to-work-with-isotope)

# java - 如何扩展 URL 类以支持 java (android) 中的其他协议？

> ID：13134488
> 
> 赞同：4
> 
> 时间：2012-10-30T07:30:26.300
> 
> 标签：java, android, url, url-encoding

我想对具有不受支持的 url 协议（方案）的字符串进行 url 编码。因此，在第 3 行，将引发异常。无论如何让 URL 类支持“mmsh”或任何其他“custom_name”方案？

编辑：我不想为我的应用程序注册一些协议。我只想能够在没有“不支持的协议”异常的情况下使用 URL 类。我使用 URL 类只是为了解析和整理 url 字符串。

```
String string="mmsh://myserver.com/abc";

String decodedURL = URLDecoder.decode(string, "UTF-8");
URL url = new URL(decodedURL);
URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:12:17.810

我根据提供的代码创建了示例程序 [`URL to load resources from the classpath in Java`](https://stackoverflow.com/questions/861500/url-to-load-resources-from-the-classpath-in-java) ，[`Custom URL protocols and multiple classloaders`](https://web.archive.org/web/20150507125111/http://www.cooljeff.co.uk:80/2009/12/12/custom-url-protocols-and-multiple-classloaders/)它似乎工作正常。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    URL url;
    try {

        url = new URL(null, "user:text.xml", new Handler());
        InputStream ins = url.openStream();
        ins.read();
        Log.d("CustomURL", "Created and accessed it using custom handler ");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}
public static class Handler extends URLStreamHandler {
    @Override
    protected URLConnection openConnection(URL url) throws IOException {
        return new UserURLConnection(url);
    }

    public Handler() {
    }

    private static class UserURLConnection extends URLConnection {
        private String fileName;
        public UserURLConnection(URL url) {
            super(url);
            fileName = url.getPath();
        }
        @Override
        public void connect() throws IOException {
        }
        @Override
        public InputStream getInputStream() throws IOException {

            File absolutePath = new File("/data/local/", fileName);
            return new FileInputStream(absolutePath);
        }
    }
} 
```

# java - Apache-POI在excel中对行进行排序

> ID：13134490
> 
> 赞同：14
> 
> 时间：2012-10-30T07:30:42.303
> 
> 标签：java, excel, sorting, row, apache-poi

我想按字符串列之一对工作表中的行进行排序。我试图使用 Sheet.shiftRows 方法来实现这一点，但我无法做到这一点。它不会在我的方法中切换行的位置。我的代码有什么问题？或者也许有更好的方法来按 excel 中的任何字符串列对行进行排序？

```
/**
 * Sorts (A-Z) rows by String column
 * @param sheet - sheet to sort
 * @param column - String column to sort by
 * @param rowStart - sorting from this row down
 */
private void sortSheet(Sheet sheet, int column, int rowStart) {
    boolean sorting = true;
    int lastRow = sheet.getLastRowNum();
    while (sorting == true) {
        sorting = false;
        for (Row row : sheet) {
            // skip if this row is before first to sort
            if (row.getRowNum()<rowStart) continue;
            // end if this is last row
            if (lastRow==row.getRowNum()) break;
            Row row2 = sheet.getRow(row.getRowNum()+1);
            if (row2 == null) continue;
            String firstValue = (row.getCell(column) != null) ? row.getCell(column).getStringCellValue() : "";
            String secondValue = (row2.getCell(column) != null) ? row2.getCell(column).getStringCellValue() : "";
            //compare cell from current row and next row - and switch if secondValue should be before first
            if (secondValue.compareToIgnoreCase(firstValue)<0) {                    
                sheet.shiftRows(row2.getRowNum(), row2.getRowNum(), -1);
                sheet.shiftRows(row.getRowNum(), row.getRowNum(), 1);
                sorting = true;
            }
        }
    }
} 
```

知道如何管理工作表中的行排序吗？

**更新**上述方法从 Apache-POI 3.9 版本开始有效。

编辑：添加了缺少的括号 -helvio

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:52:54.940

Poi 没有内置的排序机制，当然你远不是第一个有这种需求的人。

我认为你遇到了麻烦，因为你正在移动你正在迭代的行。我已经运行了上面的代码，似乎正在发生的事情是在代码执行结束时行正在从工作表中消失。

该问题试图对读入表进行就地修改。我相信创建第二张输出表会更合适。

因此，基本方法是读取工作表，在 java 中进行排序，就像处理任何其他排序问题一样，写入输出工作表。如果您对您感兴趣的列的字符串值唯一的行号进行了映射，那么您可以按值对映射进行排序。如果您只预见到需要对单个列进行排序，这种方法将起作用。无论如何，这并不像从 excel 中选择排序菜单选项那么简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:12:14.467

现在我现在为什么它不起作用。shiftRows 方法中有一个错误。当第三个参数（要移动的行数）为负时，它会引起麻烦。

这在这里描述：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=53798](https://issues.apache.org/bugzilla/show_bug.cgi?id=53798)

**更新** 此错误已从版本 3.9 修复

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-20T07:57:12.067

要对行进行排序，您需要：

*   将所有行复制到临时
*   对 temp 中的行进行排序
*   从工作表中删除所有行
*   使用来自 temp 的已排序行的值创建新行

代码：

```
import org.apache.commons.compress.utils.Lists;
import org.apache.poi.hssf.usermodel.HSSFOptimiser;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.util.CellRangeAddress;

import java.util.List;

public static void sortSheet(Workbook workbook, Sheet sheet) {
        //copy all rows to temp
        List<Row> rows = Lists.newArrayList(sheet.rowIterator());
        //sort rows in the temp
        rows.sort(Comparator.comparing(cells -> cells.getCell(0).getStringCellValue()));
        //remove all rows from sheet
        removeAllRows(sheet);
        //create new rows with values of sorted rows from temp
        for (int i = 0; i < rows.size(); i++) {
            Row newRow = sheet.createRow(i);
            Row sourceRow = rows.get(i);
            // Loop through source columns to add to new row
            for (int j = 0; j < sourceRow.getLastCellNum(); j++) {
                // Grab a copy of the old/new cell
                Cell oldCell = sourceRow.getCell(j);
                Cell newCell = newRow.createCell(j);

                // If the old cell is null jump to next cell
                if (oldCell == null) {
                    newCell = null;
                    continue;
                }

                // Copy style from old cell and apply to new cell
                CellStyle newCellStyle = workbook.createCellStyle();
                newCellStyle.cloneStyleFrom(oldCell.getCellStyle());
                newCell.setCellStyle(newCellStyle);

                // If there is a cell comment, copy
                if (oldCell.getCellComment() != null) {
                    newCell.setCellComment(oldCell.getCellComment());
                }

                // If there is a cell hyperlink, copy
                if (oldCell.getHyperlink() != null) {
                    newCell.setHyperlink(oldCell.getHyperlink());
                }

                // Set the cell data type
                newCell.setCellType(oldCell.getCellType());

                // Set the cell data value
                switch (oldCell.getCellType()) {
                    case BLANK:
                        newCell.setCellValue(oldCell.getStringCellValue());
                        break;
                    case BOOLEAN:
                        newCell.setCellValue(oldCell.getBooleanCellValue());
                        break;
                    case ERROR:
                        newCell.setCellErrorValue(oldCell.getErrorCellValue());
                        break;
                    case FORMULA:
                        newCell.setCellFormula(oldCell.getCellFormula());
                        break;
                    case NUMERIC:
                        newCell.setCellValue(oldCell.getNumericCellValue());
                        break;
                    case STRING:
                        newCell.setCellValue(oldCell.getRichStringCellValue());
                        break;
                }
            }

            // If there are are any merged regions in the source row, copy to new row
            for (int j = 0; j < sheet.getNumMergedRegions(); j++) {
                CellRangeAddress cellRangeAddress = sheet.getMergedRegion(j);
                if (cellRangeAddress.getFirstRow() == sourceRow.getRowNum()) {
                    CellRangeAddress newCellRangeAddress = new CellRangeAddress(newRow.getRowNum(),
                            (newRow.getRowNum() +
                                    (cellRangeAddress.getLastRow() - cellRangeAddress.getFirstRow()
                                    )),
                            cellRangeAddress.getFirstColumn(),
                            cellRangeAddress.getLastColumn());
                    sheet.addMergedRegion(newCellRangeAddress);
                }
            }
        }

    }

    private static void removeAllRows(Sheet sheet) {
            for (int i = 0; i < sheet.getLastRowNum(); i++) {
                sheet.removeRow(sheet.getRow(i));
            }
        } 
```

# android - 纹理不会出现使用本机代码在android上使用opengl es加载它

> ID：13134491
> 
> 赞同：1
> 
> 时间：2012-10-30T07:30:49.793
> 
> 标签：android, opengl-es, android-ndk

我正在尝试从本机端将纹理应用于 opengl es 中的对象，但我不知道为什么它没有出现。我在屏幕上随机绘制了几个对象，它们都是可见的。我使用 glColor4f 将颜色应用于某些形状，效果很好。我正在尝试在最后一个绘制的对象上使用纹理，但它最终与前一个对象的颜色相同。

我最初是从 png 加载纹理，但我决定通过从包含原始 RGB 数据的文件加载它来简化事情。它是 16 像素 x 16 像素，我尝试了最大 512 x 512 的尺寸，结果相同。

这是我初始化所有内容的方式：

```
bool Activity::_initGL () {
  const EGLint attribs[] = {
    EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
    EGL_BLUE_SIZE, 8,
    EGL_GREEN_SIZE, 8,
    EGL_RED_SIZE, 8,
    EGL_NONE
  };
  EGLint dummy, format;
  EGLint numConfigs;
  EGLConfig config;

  display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
  eglInitialize(display, 0, 0);
  eglChooseConfig(display, attribs, &config, 1, &numConfigs);
  eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format);
  ANativeWindow_setBuffersGeometry(app->window, 0, 0, format);
  surface = eglCreateWindowSurface(display, config, app->window, NULL);
  context = eglCreateContext(display, config, NULL, NULL);

  if (eglMakeCurrent(display, surface, surface, context) == EGL_FALSE) {
    LOGE("Unable to eglMakeCurrent");
    return false;
  }

  eglQuerySurface(display, surface, EGL_WIDTH, &width);
  eglQuerySurface(display, surface, EGL_HEIGHT, &height);
  glViewport(0,0, width, height);
} 
```

然后我启用必要的东西并尝试创建纹理：

```
void postInit () {
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
  glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST);
  glDisable( GL_BLEND );
  glDisable( GL_LIGHTING );
//   glEnable(GL_CULL_FACE);
  glEnable( GL_TEXTURE_2D );

  glShadeModel(GL_SMOOTH);
  glDisable(GL_DEPTH_TEST);

  glClearColor(0,0,0,1);
  glEnableClientState(GL_VERTEX_ARRAY);
  glEnableClientState(GL_TEXTURE_COORD_ARRAY);

//   glTexEnvx( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );
  glMatrixMode( GL_MODELVIEW );

  GLuint texIDarray[1];
  glGenTextures( 1, texIDarray );
  glActiveTexture( GL_TEXTURE0 );
  glBindTexture( GL_TEXTURE_2D, texIDarray[0] );
  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, (GLsizei)16, (GLsizei)16, 0, GL_RGB, GL_UNSIGNED_BYTE, protData);

} 
```

总有一天，这里是纹理被绘制的地方：

```
void drawImpl () {
  glClear(GL_COLOR_BUFFER_BIT); 
  glLoadIdentity();
//  glDisable(GL_TEXTURE_2D);
//  glTexEnvx( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );
//  glEnableClientState(GL_VERTEX_ARRAY);
//  glViewport(0, 0, wid, hei);

#define fX(x) ((int)(x * (1  << 16)))
  static int verts[6] = {
    0,0,
    65536,0,
    0,30000
  };
  glVertexPointer(2, GL_FIXED, 0, verts);
//   glColor4f(1,0,1,1);
  glDrawArrays(GL_TRIANGLES, 0, 3);

  static int poo[12] = {
    40000,-5000,
    40000,-30000,
    60000,-5000,

60000,-5000,
40000,-30000,
60000,-30000    
  };
  glVertexPointer(2, GL_FIXED, 0, poo);
 // glColor4f(1,1,1,1);
  glDrawArrays(GL_TRIANGLES, 0, 6);

  static int pee[12] = {
    40000, 5000,
    60000, 5000,
    60000,30000,

40000, 5000,
60000,30000,
40000,30000 
  };
  glVertexPointer(2, GL_FIXED, 0, pee);
//    glColor4f(1,0,1,1);
  glDrawArrays(GL_TRIANGLES, 0, 6);

  glEnable(GL_TEXTURE_2D);
  static int squareVerts[12] = {
0,0,
fX(1),0,
0,fX(1),

0,fX(1),
fX(1),0,
fX(1),fX(1)
  };

  static int texCoords[12] = {
0,0,
fX(1),0,
0,fX(1),

0,fX(1),
fX(1),0,
fX(1),fX(1)
  };

  //glTranslatef( (float)-.25, (float)-.5, (float)0);

 // glColor4f(0,0,0,0);
//  glEnableClientState(GL_TEXTURE_COORD_ARRAY);
  glActiveTexture( GL_TEXTURE0 );
//  glBindTexture(GL_TEXTURE_2D, texID);
  glTexEnvx( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );
  glTexParameterx( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
  glTexParameterx( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
  glVertexPointer(2, GL_FIXED, 0, squareVerts);

  glTexCoordPointer(2, GL_FLOAT, 0, texCoords);
 // glEnableClientState(GL_TEXTURE_COORD_ARRAY);
  glEnable( GL_TEXTURE_2D );
  glDrawArrays(GL_TRIANGLES, 0, 6);

//    glDisableClientState(GL_VERTEX_ARRAY);
//    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
} 
```

我故意留下一些注释掉的东西来展示我尝试做的其他事情。
我现在完全处于死胡同。如果有人有任何建议或任何事情，那会让我非常高兴，那很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:12:47.197

好像你搞砸了你的纹理坐标。它们应该在 0 和 1 之间，而不是在 0 和 1<<16 之间。另一件事是您的“glColor4f”也会通过调制它来影响您的纹理，并且对于正常的纹理绘制，它需要设置为 (1,1,1,1)。

# asp.net-mvc-3 - ASP.NET MVC 在 runAllManagedModulesForAllRequests=false 时停止执行操作

> ID：13134493
> 
> 赞同：1
> 
> 时间：2012-10-30T07:30:52.010
> 
> 标签：asp.net-mvc-3

当我设置`runAllManagedModulesForAllRequests=false`提高 MVC 性能时，MVC 停止执行诸如`[ActionName("membership.asp")]`. 我得到`404`错误`IIS7.5`。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:42:52.763

我自己找到了解决方案。只需将扩展名添加到应该由 MVC 处理的 web.config 文件。

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="false" />
    <handlers>
      <add name="ClassicASP" path="*.asp" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="File" preCondition="integratedMode" />
    </handlers> 
```

# java - 无法打开编辑器错误

> ID：13134508
> 
> 赞同：1
> 
> 时间：2012-10-30T07:31:57.623
> 
> 标签：java, eclipse, eclipse-plugin, editor

我用编辑器编写了一个简单的 Eclipse 插件来扩展`.myfile`. 当我运行它时，我收到以下错误消息：

> 无法打开无法打开编辑器：无法实例化编辑器类。这通常表示缺少无参数构造函数或编辑器的类名在 plugin.xml 中输入错误。

我`plugin.xml`有这个声明：

```
<plugin>
    <extension point="org.eclipse.ui.editors">
        <editor     
            class="com.intel.editor.MyyEditor"
            extensions="myfile"
            icon="icons\sample.gif"
            id="com.intel.editor.MyyEditor"
            name="MyEditor">
        </editor>
    </extension>
</plugin> 
```

当我`public class MyyEditor extends EditorPart`有时，我在日志中看到的错误是：

```
java.lang.ClassNotFoundException: com.dal.editor.DalManifestEditor
  at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
  at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
  at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
  at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
  at java.lang.ClassLoader.loadClass(Unknown Source)
  at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:345)
  at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
  at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1207)
  at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
  at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
  at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
  at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
  at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:260)
  at org.eclipse.ui.internal.registry.EditorDescriptor.createEditor(EditorDescriptor.java:235)
  at org.eclipse.ui.internal.EditorManager.createPart(EditorManager.java:875)
  at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:609)
  at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
  at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
  at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289)
  at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2945)
  at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850)
  at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842)
  at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2793)
  at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
  at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789)
  at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773)
  at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2764)
  at org.eclipse.ui.ide.IDE.openEditor(IDE.java:651)
  at org.eclipse.ui.ide.IDE.openEditor(IDE.java:610)
  at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:355)
  at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:164)
  at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
  at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
  at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
  at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
  at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376)
  at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538)
  at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
  at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
  at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
  at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
  at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
  at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
  at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
  at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
  at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
  at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
  at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
  at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
  at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
  at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
  at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
  at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2696)
  at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2660)
  at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2494)
  at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:674)
  at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
  at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:667)
  at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
  at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
  at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
  at java.lang.reflect.Method.invoke(Unknown Source)
  at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
  at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
  at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
  at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:50:32.063

检查两件事：

*   您应该在类中有一个默认构造函数`MyyEditor`。
*   日志中有任何错误吗？UI 中的错误消息后是否有“详细信息”按钮？单击时是否显示堆栈跟踪？

# wordpress - 对 WordPress 多站点用户管理的怀疑

> ID：13134520
> 
> 赞同：1
> 
> 时间：2012-10-30T07:33:01.180
> 
> 标签：wordpress, wpmu

我有一个项目，将使用 WordPress 的多站点功能。我对此有几个问题：

*   如果我为主站点添加用户，它会共享所有站点的用户吗？

*   如果我创建的那个用户登录到主站点，会话是否会为子站点共享？

例如：

> 1.  我登录到主站点`domain.com`
>     
>     
> 2.  然后我搬到另一个网站`site1.domain.com`

会话是否从主站点和子站点共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:49:48.763

是的，网络的一个站点中的用户被识别为这样，并且`subscriber`在所有网络中都具有能力（阅读和发表评论）。

如果他们登录了网络的一个站点，他们将在访问其他站点时看到管理栏。

如果他们尝试访问其他网站的仪表板，他们会收到以下通知：

[![多站点管理员通知](../Images/690959110dfd909b9be615e830b5b169.png)](https://i.stack.imgur.com/oJUqO.png)

检查我刚刚在 SO 中给出的其他答案：[Wordpress WPMU 跨多站点网络登录一致性](https://stackoverflow.com/q/9786831/1287812)

# android - 在android中按下后退按钮清除listview

> ID：13134523
> 
> 赞同：1
> 
> 时间：2012-10-30T07:33:15.170
> 
> 标签：android, listview, back-button

我不知道如何清除动态列表视图[来自数据库]..如果我点击后退按钮并再次搜索，搜索显示列表视图有一个活动..以前的搜索数据将保持原样，新的搜索数据添加到该列表..这意味着列表视图没有在重新搜索时清除，相同的数据不断地一次又一次地显示..

我试图在按下后退按钮时完成活动，仍然没有清除列表视图，并且相同的记录显示多次，因为我搜索该记录的次数..任何解决方案..?? 任何帮助将不胜感激...谢谢..

# java - Java：通过 Spring 创建基于 OCP 的工厂？

> ID：13134526
> 
> 赞同：1
> 
> 时间：2012-10-30T07:33:36.470
> 
> 标签：java, spring, factory

我有以下代码：

```
public IFoo getFoo(Type type) // Type is an enum containing A, B etc.
{
    switch(type)
    {
        case A: return new Foo1(); // implements IFoo
        case B: return new Foo2(); // implements IFoo
        etc.
    } 
} 
```

这显然违反了OCP，所以我需要重构；另外，我现在需要返回由 Spring 容器管理的原型 bean。为此，我可以考虑以下选项：

1）使这个类AppContextAware；创建一个 Map<Type, String> ，其中 String 是 bean id；在 Spring Config 中将这些 bean 定义为原型，并在 Spring config 中定义此 Map 并将其注入此类，然后从该映射中获取给定枚举的 bean id 并使用它从 AppContext 中获取 bean，

2) 类似的方法，但对于 Map 中的值，使用 TargetSource，它有一个我调用的抽象方法，我`getTarget()`将定义的原型 bean`lookup-method`用作每个 TargetSource 定义的抽象方法，

3) 类似的方法，但我使用 FactoryBean 而不是 TargetSource。

在 #1 中，我的课程依赖于 AppContext，而在其他方法中则不依赖。所以我倾向于#2 或#3，但是选择哪一个呢？或者有没有其他更好的方法我没有想到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:14:37.250

无论如何，我最终还是使用了 #1，因为它是最简单的，并且创建的 bean 数量较少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:38:14.653

看看[FactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html)，可能就是您要找的东西。看看[这里](https://stackoverflow.com/questions/4970297/how-to-get-beans-created-by-factorybean-spring-managed)的例子。

*hth*

# javascript - 将锚点动态添加到段落元素不起作用

> ID：13134527
> 
> 赞同：0
> 
> 时间：2012-10-30T07:33:37.983
> 
> 标签：javascript, html

```
<!DOCTYPE html>
<html>

<head>
    <title></title>
</head>
<body>
<div>
    <p id="test"></p>
</div>
<script>
    var newLink = document.createElement('a'); // #1
    newLink.href = 'http://google.fr'; // #2
    document.getElementById('test').appendChild(newLink); // #3
</script>

</body>
</html> 
```

这不起作用，我不明白为什么。

1.  我创建了一个新元素`<a>`
2.  我将 href 添加到此元素 ( `<a href="http://google.fr">`)
3.  我告诉 JS 去查找`test`并将这个元素添加到作为 ID 的`<p>`标签中。`test`

**为什么它不工作？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T07:35:13.250

`.innerHTML`尝试通过设置属性向元素添加一些内容。就像现在一样，您只是添加一个空锚。尝试这样的事情：

```
var newLink = document.createElement('a');
newLink.href = 'http://google.fr';
newLink.innerHTML = 'My anchor';
document.getElementById('test').appendChild(newLink); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-30T07:57:56.300

使用`innerHTML`属性将您创建的标签附加到段落标签内。

# php - 无法打开与服务器的套接字连接

> ID：13134533
> 
> 赞同：1
> 
> 时间：2012-10-30T07:34:11.927
> 
> 标签：php, connect

尝试连接到第三方服务器时，我在 php 文件中收到以下错误消息。

> HTTP 错误：无法在 connect() 之前打开与服务器 http://xxxxxxxx 的套接字连接。这通常是查找主机名的问题。

我知道地址是正确的。此错误最常见的问题是什么？会不会是服务器只接受某些 IP 进行连接？

# .net - 如何在 VB.NET 中使用 IsNullOrEmpty？

> ID：13134534
> 
> 赞同：17
> 
> 时间：2012-10-30T07:34:11.320
> 
> 标签：.net, vb.net, string, isnullorempty

为什么以下内容不能在 VB.NET 中编译？

```
Dim strTest As String
If (strTest.IsNullOrEmpty) Then
   MessageBox.Show("NULL OR EMPTY")
End if 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-30T07:36:20.543

IsNullOrEmpty 是“共享的”，所以你应该这样使用它：

```
If String.IsNullOrEmpty(strTest) Then 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T13:59:45.843

您实际上可以与空字符串进行比较：

```
If strTest = "" Then
    MessageBox.Show("NULL OR EMPTY")
End If 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T07:36:55.023

[String.IsNullOrEmpty](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)是一个共享（或静态，在 C# 中）方法。

```
Dim strTest As String
If (String.IsNullOrEmpty(strTest)) Then
   MessageBox.Show("NULL OR EMPTY")
End if 
```

# iphone - 在后台线程中绘制文本 ios

> ID：13134537
> 
> 赞同：0
> 
> 时间：2012-10-30T07:34:13.633
> 
> 标签：iphone, objective-c, ios, core-graphics, grand-central-dispatch

# 我正在努力完成的事情

我有一个 UICollectionView，我试图在后台渲染所有绘图，然后在动画淡入完成后显示。

我已经在图像方面做得很好，但有些绘图只是文本。我需要适当地调整文本的大小，然后在背景中绘制它。

它可能有很多文本，并且在主线程上完成时会产生口吃。

# 我是如何做到的

我用`CGBitmapContextCreate`的是图像，所以我也尝试用文本来做：

```
-(void)drawTextFromBundle
{
     UIFont * font = [UIFont AvenirLTStdBlackObliqueWithSize:35]; //custom font

     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
         CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
         CGContextRef context = CGBitmapContextCreate(NULL, 250, backgroundHeight - 112, 8, 250 * 4, colorSpaceRef, kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
         CGColorSpaceRelease(colorSpaceRef);
         [_text drawInRect:CGRectMake(0, 0, 250, backgroundHeight - 112) withFont:font];
          CGImageRef outputImage = CGBitmapContextCreateImage(context);
          imageRef = outputImage;
         [self performSelectorOnMainThread:@selector(finishDrawingImage) withObject:nil waitUntilDone:YES];
         CGContextRelease(context);
         CGImageRelease(outputImage);
   });
} 
```

# 细节

这显然不是正确的方法，因为我遇到了很多错误，都涉及 Core Graphics 文本函数，类似于`<Error>: CGContextSetFont: invalid context 0x0`

我知道有，`UIGraphicsGetCurrentContext`但我不确定这是否是线程安全的，因为我听说不是。

需要注意的是，这个方法确实是从一个`-drawRect:`方法中调用的。相同的确切上下文参数适用于我的图像。

我该怎么做才能将文本绘制到我想要的任何自定义中，所有这些都在后台安全地完成？如果您能告诉我如何在缩小文本以适合适当大小的同时执行此操作，则可以加分。

再次感谢 SO 团队。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-30T07:50:57.367

当您更改 UI 时，您需要在主线程（主队列）中。

尝试将以下内容放在主队列中

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, 250, backgroundHeight - 112, 8, 250 * 4, colorSpaceRef, kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
    CGColorSpaceRelease(colorSpaceRef);

    dispatch_async(dispatch_get_main_queue(), ^{
        [_text drawInRect:CGRectMake(0, 0, 250, backgroundHeight - 112) withFont:font];
        CGImageRef outputImage = CGBitmapContextCreateImage(context);
        imageRef = outputImage;
        [self performSelectorOnMainThread:@selector(finishDrawingImage) withObject:nil waitUntilDone:YES];
    });

    CGContextRelease(context);
    CGImageRelease(outputImage);
}); 
```

# android - Android：用户选择的微调器

> ID：13134538
> 
> 赞同：2
> 
> 时间：2012-10-30T07:34:16.767
> 
> 标签：android, android-spinner

我尝试将 on select 事件附加到我的 Android`android.widget.Spinner`

我知道`Spinner.setOnItemSelectedListener`存在但不能按我的意愿工作，问题`setOnItemSelectedListener`是在使用适配器加载微调器时调用方法，并且选择预定义项目。

我想要一个界面来获取事件，而“用户”通过使用触摸屏从 Spinner 中选择一个项目。还有一个事件，仅在使用选择项目而不是程序选择项目时调用。

我想要一个在使用从这个微调器对话框中选择一个项目时调用的事件。

![在此处输入图像描述](../Images/45909905f8683fb682510ee5876c9c01.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:00:56.873

[通过查看http://www.oschina.net/code/explore/android-4.0.1/core/java/android/widget/Spinner.java](http://www.oschina.net/code/explore/android-4.0.1/core/java/android/widget/Spinner.java)上的代码，我终于找到了适合我的解决方案

我发现了如何防止或将更多代码附加到这个运行的代码部分，而使用将显示下拉列表，然后创建我的一个 Spinner 实例。

我的微调器类有一个使用定义接口`OnSelectSpinnerListener`，当用户触摸微调器然后从微调器列表中选择一个项目时，该接口将运行。

```
/**
 * Create a DropDown Spinner/Select List, that also has some event for detect
 * action do by the use and action do by the system.
 *
 * Use {@link OnSelectSpinnerListener} for attach a listener to this
 * SelectSpinner.
 */
public class SelectSpinner extends Spinner {

    public interface OnSelectSpinnerListener {

        /**
         * Call before the drop down menu is show that allow use to select one
         * of the item from the Spinner.
         */
        public void onOpenSelectMenu();

        /**
         * Call while the use press a button or item for select this. This will
         * not be call while the system set a select value for the spinner. Use {@link SelectSpinner#setOnItemSelectedListener(android.widget.AdapterView.OnItemSelectedListener)}
         * for get all event while a item is set to the spinner.
         *
         * @param index Select item as Index
         * @param object Select item as Object
         */
        public void onItemSelectByUser(int index, Object object);
    }
    private OnSelectSpinnerListener onSelectSpinnerListener;

    public SelectSpinner(Context context) {
        super(context);

    }

    public SelectSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SelectSpinner(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public OnSelectSpinnerListener getOnSelectSpinnerListener() {
        return onSelectSpinnerListener;
    }

    public void setOnSelectSpinnerListener(OnSelectSpinnerListener onSelectSpinnerListener) {
        this.onSelectSpinnerListener = onSelectSpinnerListener;
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        super.onClick(dialog, which);
        if (this.onSelectSpinnerListener != null) {
            Object item = super.getItemAtPosition(which);
            this.onSelectSpinnerListener.onItemSelectByUser(which, item);
        }
    }

    @Override
    public boolean performClick() {
        if (this.onSelectSpinnerListener != null) {
            this.onSelectSpinnerListener.onOpenSelectMenu();
        }
        return super.performClick();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-10T14:44:22.897

正如在[这](https://stackoverflow.com/a/7686867/2290538)件事中提到的那样，`onClick()`开始时不起作用，但最近版本的 android （我在 4.0 的某些版本上对其进行了测试）。

所以我为这个在较新版本的android中工作的[FIG-GHD742调整了答案（在4.1和4.3上测试）：](https://stackoverflow.com/a/13144091/2290538)

```
public class SelectSpinner extends Spinner {

    public interface OnSelectSpinnerListener {

        public void onOpenSelectMenu();

        public void onItemSelectByUser(AdapterView<?> parent, View view,
                int position, long id);
    }

    private boolean isUserOpen = false;

    private List<OnSelectSpinnerListener> onSelectSpinnerListeners;
    private OnItemSelectedListener onItemSelectedListener;

    public SelectSpinner(Context context) {
        super(context);
        registerEvents();
    }

    public SelectSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        registerEvents();
    }

    public SelectSpinner(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        registerEvents();
    }

    /**
     * Register default events
     * */
    private void registerEvents() {
        // overrides the default event for android OnItemSelectedListener
        super.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                if (onItemSelectedListener != null) {
                    // call onItemSelected default event in android
                    onItemSelectedListener.onItemSelected(parent, view,
                            position, id);
                }
                // checks if the spinner selection is opened by the user and has event listener
                if (isUserOpen && onSelectSpinnerListeners != null) {
                    for (OnSelectSpinnerListener listener : onSelectSpinnerListeners) {
                        listener.onItemSelectByUser(parent, view, position, id);
                    }
                    isUserOpen = false;
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {
                if (onItemSelectedListener != null) {
                    // call onNothingSelected default event in android
                    onItemSelectedListener.onNothingSelected(parent);
                }
            }
        });
    }

    public void addOnSelectSpinnerListener(
            OnSelectSpinnerListener onSelectSpinnerListener) {
        if (this.onSelectSpinnerListeners == null) {
            this.onSelectSpinnerListeners = new ArrayList<SelectSpinner.OnSelectSpinnerListener>();
        }
        this.onSelectSpinnerListeners.add(onSelectSpinnerListener);
    }

    @Override
    public void setOnItemSelectedListener(OnItemSelectedListener listener) {
        this.onItemSelectedListener = listener;
    }

    @Override
    public boolean performClick() {
        // isUserOpen variable set to true, to indicate that there was user interaction
        isUserOpen = true;
        if (this.onSelectSpinnerListeners != null) {
            for (OnSelectSpinnerListener listener : this.onSelectSpinnerListeners) {
                // call onOpenSelectMenu event
                listener.onOpenSelectMenu();
            }
        }
        return super.performClick();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:04:06.737

```
spinner.setOnItemSelectedListener(this)
@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    //here arg2 will return the number of option which user select 
```

spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

```
 switch (arg2) {
            case 0:

                // do something for london
                Toast.makeText(getApplicationContext(), "London",Toast.LENGTH_SHORT).show();
                break;
            case 1:
                // do something for Paris
                Toast.makeText(getApplicationContext(), "Paris",Toast.LENGTH_SHORT).show();
                break;
            case 2:
                // do something for Stockholm
                Toast.makeText(getApplicationContext(), "Stockholm",Toast.LENGTH_SHORT).show();
                break;

            default:
                break;
            }

        }
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub enter code here
} 
```

# mysql - 将嵌套选择转换为连接

> ID：13134540
> 
> 赞同：1
> 
> 时间：2012-10-30T07:34:31.370
> 
> 标签：mysql, sql

我的查询是

```
select COUNT(*) from result 
where test_id in (select test_id 
                    from test_schedule 
                    where scheduler_id in (select user_id 
                                           from users 
                                           where user_type=1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:38:24.787

尝试这个：

```
SELECT COUNT(r.*)
FROM result r
INNER JOIN test_schedule s ON r.test_id = s.test_id
INNER JOIN users u ON s.scheduler_id  = u.user_id
WHERE u.user_type = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:44:48.667

```
SELECT COUNT(r.*)
FROM result r
RIGHT JOIN test_schedule s USING(test_id)
RIGHT JOIN users u ON s.scheduler_id  = u.user_id
WHERE u.user_type = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:53:03.123

```
SELECT COUNT(*)
FROM result r
JOIN (SELECT DISTINCT test_id
      FROM test_schedule s
      JOIN users u ON s.scheduler_id = u.user_id
      WHERE u.user_type = 1) s
USING (test_id) 
```

DISTINCT 是必要的，以防止行与匹配的其他表中的所有行相乘。

# eclipse - 如何在 flex 项目中使用 .swc 文件

> ID：13134544
> 
> 赞同：0
> 
> 时间：2012-10-30T07:34:42.540
> 
> 标签：eclipse, apache-flex, swc

我有一个弹性项目，我需要`as3xls library (.swc file)`在我的项目中。现在我已经下载了该 swc 文件并将其包含在 f 中`lex-sdk\frameworks\libs`，并且我可以使用该 swc 文件的 .as 文件。

现在，如果我试图将 swc 文件放在我的本地项目中，例如在我的一个组件包中并将其添加到类路径（使用`eclipse project properties -> flex build path`）并尝试从该位置使用它，但我无法编译项目因为它无法导入 .as 文件。

任何人都可以建议我应该添加`.swc`文件并在我的项目中使用它的位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:46:00.427

如果您使用的是 Flash Builder，我一般会在项目下创建一个*libs*文件夹：

> ![文件夹层次结构](../Images/ff51911d83af6711be4fdfb712db1020.png)

*然后，通过选择项目Properties*、*ActionScript Build Path*来引用 SWC ，您可以在其中添加单独的 SWC 或 SWC 文件夹：

> ![特性](../Images/02575d19eacd0c0a4e4208fedd8f3ca7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:01:41.543

查看我关于[如何使用 SWC](https://www.flextras.com/blog/index.cfm/2009/12/18/What-do-you-do-with-a-SWC?event=PurchaseHistory)的博客文章。

以下是重点：

> 您可以通过三种不同的方式使用驻留在 SWC 文件中的类：
> ***项目属性中的库路径**：这是我最常使用 SWC 的方式。
> * **Libs 文件夹**：libs 文件夹是在 Flex Builder 3 中引入的。如果您将 SWC 放入 libs 文件夹，它会自动添加到您的库路径中，并且 SWC 中的所有类都可以从您的项目中获得
> ***库路径命令行参数**：您可以将[库路径参数](http://livedocs.adobe.com/flex/3/html/compilers_19.html#158337)用于 mxmlc 命令行编译器。

# php - PHP Tile-Based map -> drawing from top left

> ID：13134549
> 
> 赞同：0
> 
> 时间：2012-10-30T07:35:12.500
> 
> 标签：php, javascript, html, mysql

I am having trouble drawing a tile-based map :( the map however is only going to show what is **VISIBLE to the player** I have a `canvas` element on which i draw one layer. On the `canvas`, i use javascript to attach an image 32x32px. The image's position is based on: `$tr` `$tc`

as shown below:

```
for($tr = 0; $tr < count($mapArray)-1; $tr++) {
for($tc = 0; $tc < count($mapArray[$tr])-1; $tc++) {
    if($mapArray[$tr][$tc]!== null){
        echo "attachImage(" . $mapArray[$tr][$tc]. "," . $tc . "," . $tr . ",context);";
    }
}
} 
```

I don't know how I would go about making the it draw tiles from 0,0\. it always starts drawing tiles from the same location on the array (ex 3,2). Maybe i'm over thinking this or im too tired... i can't find out any way :(

here's the javascript part

```
function attachImage(tile, x, y, canvasContext)
{
  var base_image = new Image();
  base_image.onload = function(){
    canvasContext.drawImage(base_image, 32*(x-0),32*(y-0));
  }
  base_image.src = 'Images/tiles/'+(tile-1)+'.png';
} 
```

to reiterate, i want it to start drawing from 0px,0px because i want to only display the tiles around the player.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:03:37.773

i dont know how to delete this question, but i found out the answer

```
$c = 0;
for($tr = $drawy; $tr < $drawy2; $tr++) {
    $r = 0;
    for($tc = $drawx; $tc < $drawx2; $tc++) {
        if($mapArray[$tr][$tc] !== null)
        {
            $tile = $mapArray[$tr][$tc];
            echo "attachImage(" . $tile . "," . $r . "," . $c . ",context);";
        }
        $r++;
    }
    $c++;
}

for($tr = 0; $tr < count($mapArrayy)-1; $tr++) {
    for($tc = 0; $tc < count($mapArrayy[$tr])-1; $tc++) {
        if($mapArrayy[$tr][$tc]!== null){
            echo "attachImage(" . $mapArrayy[$tr][$tc]. "," . $tc . "," . $tr . ",context2);";
        }
    }
} 
```

i added $c and $r in the first loop. that's all. now it draws from 0px,0px.

# sql-server-2008 - sql server 中的子查询

> ID：13134555
> 
> 赞同：1
> 
> 时间：2012-10-30T07:35:21.987
> 
> 标签：sql-server-2008

我有两张桌子：

```
create table sales (
    unitcode int ,
    categorycode smallint ,
    ddate varchar(10) ,
    price float
) 
```

和

```
create table timetable (
    year varchar(4) ,
    month varchar(11) ,
    ddate varchar(10)
) 
```

我想写一个子查询来查找：在每年的每个月中，哪 2 个产品（unitcode，categorycode）的价格最高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:56:13.157

尝试这个

```
;WITH cte AS (
SELECT  unitcode,categorycode,t.ddate,price,ROW_NUMBER() OVER (PARTITION BY t.[year],t.[month] ORDER BY price desc) AS price_order,t.[year],t.[month]
FROM  sales s 
INNER JOIN timetable t 
    ON t.ddate = s.ddate
)
SELECT  *
FROM    cte
WHERE price_order <= 2
ORDER BY [year] ASC,[month] ASC,price DESC 
```

# android - 是否可以将pdf文件转换为android中的图像

> ID：13134557
> 
> 赞同：1
> 
> 时间：2012-10-30T07:35:25.137
> 
> 标签：android, pdf

我想将pdf文件转换为android中的图像。虽然我尝试使用 java 进行转换，但它工作得很好，但在 android 中它不接受缓冲类。

我读了这么多开源文件 iText、PDFReader 和 PDfViewer，但没有一个能完美地完成这项工作。有人能在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:46:11.813

```
import com.sun.pdfview.PDFFile;

import com.sun.pdfview.PDFPage;

import java.awt.Graphics;

import java.awt.GraphicsConfiguration;

import java.awt.GraphicsDevice;

import java.awt.GraphicsEnvironment;

import java.awt.HeadlessException;

import java.awt.Image;

import java.awt.Rectangle;

import java.awt.Transparency;

import java.io.*;

import java.nio.ByteBuffer;

import java.nio.channels.FileChannel;

import javax.swing.*;

import javax.imageio.*;

import java.awt.image.*;

public class ImageMain {

// This method returns a buffered image with the contents of an image
public static BufferedImage toBufferedImage(Image image) {
    if (image instanceof BufferedImage) {
        return (BufferedImage) image;
    }
    // This code ensures that all the pixels in the image are loaded
    image = new ImageIcon(image).getImage();
    // Determine if the image has transparent pixels; for this method's
    // implementation, see e661 Determining If an Image Has Transparent
    // Pixels
    boolean hasAlpha = hasAlpha(image);
    // Create a buffered image with a format that's compatible with the
    // screen
    BufferedImage bimage = null;
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    try {
        // Determine the type of transparency of the new buffered image
        int transparency = Transparency.OPAQUE;
        if (hasAlpha) {
            transparency = Transparency.BITMASK;
        }
        // Create the buffered image
        GraphicsDevice gs = ge.getDefaultScreenDevice();
        GraphicsConfiguration gc = gs.getDefaultConfiguration();
        bimage = gc.createCompatibleImage(image.getWidth(null), image.getHeight(null), transparency);
    } catch (HeadlessException e) {
        // The system does not have a screen
    }
    if (bimage == null) {
        // Create a buffered image using the default color model
        int type = BufferedImage.TYPE_INT_RGB;
        if (hasAlpha) {
            type = BufferedImage.TYPE_INT_ARGB;
        }
        bimage = new BufferedImage(image.getWidth(null), image.getHeight(null), type);
    }
    // Copy image to buffered image
    Graphics g = bimage.createGraphics();
    // Paint the image onto the buffered image
    g.drawImage(image, 0, 0, null);
    g.dispose();
    return bimage;
} 
```

公共静态无效设置（）抛出 IOException {

```
 File file = new File("p.pdf");

    RandomAccessFile raf = new RandomAccessFile(file, "r");

    FileChannel channel = raf.getChannel();

    ByteBuffer buf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());

    PDFFile pdffile = new PDFFile(buf);

    int numPgs = pdffile.getNumPages();

    for (int i = 0; i < numPgs; i++) {

        // draw the first page to an image

        PDFPage page = pdffile.getPage(i);

        // get the width and height for the doc at the default zoom
        Rectangle rect = new Rectangle(0, 0, (int) page.getBBox().getWidth(), (int) page.getBBox().getHeight());

        // generate the image

        Image img = page.getImage(rect.width, rect.height, // width & height
                rect, // clip rect
                null, // null for the ImageObserver
                true, // fill background with white
                true // block until drawing is done
                );

        // save it as a file

        BufferedImage bImg = toBufferedImage(img);

        File yourImageFile = new File("page_" + i + ".png");

        ImageIO.write(bImg, "png", yourImageFile);

    }

}

public static boolean hasAlpha(Image image) {
    // If buffered image, the color model is readily available
    if (image instanceof BufferedImage) {
        BufferedImage bimage = (BufferedImage) image;
        return bimage.getColorModel().hasAlpha();
    }
    // Use a pixel grabber to retrieve the image's color model;
    // grabbing a single pixel is usually sufficient
    PixelGrabber pg = new PixelGrabber(image, 0, 0, 1, 1, false);
    try {
        pg.grabPixels();
    } catch (InterruptedException e) {
    }
    // Get the image's color model
    ColorModel cm = pg.getColorModel();
    return cm.hasAlpha();
}

public static void main(final String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            try {
                ImageMain.setup();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    });
} 
```

}

使用的 JAR 文件：PDF RENDERER.jar。

此 Java 代码可以将 pdf 页面转换为图像。但是当我尝试转换为 android 代码时。我收到 java.awt.Rectangle 和 java.awt.graphics 不支持的错误。

我在网上搜索了一个 jtar.jar，它只是删除了错误并运行了 projext，但是当运行异常时说矩形和图形不支持..我犯了什么错误..？有任何想法吗..？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:24:18.630

I found it..I used *ghostscript* in my webserver and converted to images then store in webfolder.

**refer this to convert using ghostscript** [http://view.samurajdata.se/](http://view.samurajdata.se/)

Then you have to count the files.

Then i retrieved my images to my app using URL with the help of for loop and displayed in an bitmap format..

**The code i used to retrieve from url:**

public String Downloadfromurl(String Url)

```
{

 String filepath=null;

 try {

  URL url = new URL(Url);

  //create the new connection

  HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

  //set up some things on the connection
  urlConnection.setRequestMethod("GET");

  urlConnection.setDoOutput(true); 

   //and connect!

  urlConnection.connect();

  //set the path where we want to save the file
  //in this case, going to save it on the root directory of the
  //sd card.

  folder = new File(Environment.getExternalStorageDirectory().toString()+"/img");

  folder.mkdirs();

  //create a new file, specifying the path, and the filename
  //which we want to save the file as.

  String filename= "page"+no+".PNG";   

  file = new File(folder,filename);

  if(file.createNewFile())

  {

   file.createNewFile();

  }

  //this will be used to write the downloaded data into the file we created
  FileOutputStream fileOutput = new FileOutputStream(file);

  //this will be used in reading the data from the internet
  InputStream inputStream = urlConnection.getInputStream();

  //this is the total size of the file
  int totalSize = urlConnection.getContentLength();
  //variable to store total downloaded bytes
  int downloadedSize = 0;

  //create a buffer...
  byte[] buffer = new byte[1024];
  int bufferLength = 0; //used to store a temporary size of the buffer

  //now, read through the input buffer and write the contents to the file
  while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
   //add the data in the buffer to the file in the file output stream (the file on the sd card
   fileOutput.write(buffer, 0, bufferLength);
   //add up the size so we know how much is downloaded
   downloadedSize += bufferLength;
   //this is where you would do something to report the prgress, like this maybe
   Log.i("Progress:","downloadedSize:"+downloadedSize+"totalSize:"+ totalSize) ;
  }
  //close the output stream when done
  fileOutput.close();
  if(downloadedSize==totalSize)  
      filepath=file.getPath();

 //catch some possible errors...
 } catch (MalformedURLException e) {
  e.printStackTrace();
 } catch (IOException e) {
  filepath=null;
  e.printStackTrace();
 }
 Log.i("filepath:"," "+filepath) ;

 return filepath;

} 
```

I hope this might be useful.

# javascript - jstree 无限树

> ID：13134558
> 
> 赞同：0
> 
> 时间：2012-10-30T07:35:28.017
> 
> 标签：javascript, jquery, html, ajax, jstree

Jstree 代码 -

```
$("#jstree").jstree({ 
   "json_data" : {
       "ajax" : {
           "url" : "Servlet?action=view&docId=100,
       }
   },
}); 
```

现在，发生的事情是当我展开任何叶节点时，整个树都会在其下构建。

这里也观察到同样的问题 - [http://www.jstree.com/documentation/json_data#demo2](http://www.jstree.com/documentation/json_data#demo2)
尝试展开“独生子女”节点，整个树就在它下面构建。

我可以从节点扩展中删除 ajax 请求吗，因为在我的情况下，所有树都是一次加载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:31:55.073

您应该`state:leaf`用于未打开的节点。每次您在 jstree 中打开一个节点时，它都会使用打开的节点参数触发一个 ajax 请求，因此您会得到一个无限树。

# c++ - 在 OSG 中创建动态球体

> ID：13134560
> 
> 赞同：0
> 
> 时间：2012-10-30T07:35:34.740
> 
> 标签：c++, qt, openscenegraph

我想在 OSG 中创建一个动态球体，通过鼠标左键单击该位置（中心）和鼠标指针当前位置到中心的距离的动态半径来创建（移动）......

我知道出于这个原因，我需要创建一个 osgGA::GUIEventHandler 对象并实现虚拟句柄功能，但我错过了其他细节，例如从场景中找到它自己的球体对象并更改其属性。

我还尝试更改[A Picking 示例](http://osgqsg.googlecode.com/svn-history/r2/trunk/Examples/Picking/PickingMain.cpp)，但未能检测到 nodePath 中的球体或创建新球体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:21:46.177

我可能会首先创建一个从 osgGA Manipulator 类之一派生的自定义类。

你会想用这样的东西覆盖 handle() 方法：

```
bool CustomManipulator::handle(const osgGA::GUIEventAdapter& ea, osgGA::GUIActionAdapter& aa)
{
    using namespace osgGA;

    if (ea.getEventType()==GUIEventAdapter::FRAME)
    {
        if (_thrown) aa.requestRedraw();
    }
    else if (ea.getEventType()==GUIEventAdapter::PUSH)
    {
        // check if your sphere is picked using LineSegmentIntersector
        // (like in the picking example) and set a flag
    }
    else if (ea.getEventType()==GUIEventAdapter::DRAG)
    {
        // update the position and radius of your sphere if the flag was set
    }
    else if (ea.getEventType()==GUIEventAdapter::RELEASE)
    {
        // release the sphere, unset the flag
    }   
    return false;
} 
```

然后记得在查看器上使用 setCameraManipulator() 来添加它而不是默认的 TrackballManipulator。

# css - 如何创建径向 css3 边框渐变阴影

> ID：13134561
> 
> 赞同：7
> 
> 时间：2012-10-30T07:35:48.917
> 
> 标签：css, border-shadow

我有两列可以拉伸到不同的高度，设计师希望在两列之间有一个阴影，但是你可以看到图像在顶部和底部淡出。这意味着我不能只使用在右侧列中左对齐的 CSS 的背景图像。

![中间有径向阴影的列](../Images/09b6220606ca573b124f92a4df7ed6c5.png)

那么我也许可以使用具有径向渐变的 css 3 边框阴影。我可能会使用表格单元格来执行此操作，因为我需要将阴影拉伸到最高列的高度。我该怎么做呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T22:36:17.193

以前的答案并没有真正回答您的问题：*“如何创建径向 css3 边框渐变阴影”*

您可以使用径向渐变来模拟没有图像的边框阴影。

演示：http: [//jsfiddle.net/sonic1980/wRuaZ/](http://jsfiddle.net/sonic1980/wRuaZ/)

![在此处输入图像描述](../Images/b3b714cf829202bdd534bf102cbc438d.png)

```
background: -webkit-radial-gradient(50% 0%, 50% 5px, #aaa 0%, white 100%);
                                    |       |        |        |
                                    |       |        |        +--> color end     
                                    |       |        +--> color start
                                    |       +--> size of gradient ellipse (x-axis, y-axis)
                                    +---> position of ellipse center 
```

很容易修改使其垂直或使用 :before 或 :after 伪类实现。

另一个例子，`<hr>`带有阴影的标签：http: [//jsfiddle.net/sonic1980/65Hfc/](http://jsfiddle.net/sonic1980/65Hfc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:56:25.930

我有一个建议，你不需要使用 css3，你可以使用两个不同的类，一个是普通的，另一个是有背景的。并且当页面加载完成，调用js方法，settimeout延迟几秒，切换类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:09:06.733

另一种解决方案实际上允许动态高度列，但它仅支持 IE8+。

您要做的是将`background-image`定位应用到最高柱的边缘。然后你可以使用`:before`和`:after`伪元素，分别设置为和的`absolute`定位，在阴影上设置“帽子”。`top:0;``bottom:0`

那有意义吗？这是一个[JSFiddle](http://jsfiddle.net/R3rFz/)，它使用边框和文本而不是图像来显示它。

当然，JSFiddle中的`height`参数无关紧要；`div`它可能存在`min-height`或不存在。我只是将它设置为给出`div`一些大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:02:24.380

我想我只是要使用图像，并在 div 上设置最小高度 :-)

```
.column.right {
  padding-left: 30px;
  background: url(/img/shadow.png) no-repeat left top;
  min-height: 265px;
} 
```

# java - JSON 字符串到对象映射

> ID：13134563
> 
> 赞同：3
> 
> 时间：2012-10-30T07:36:07.180
> 
> 标签：java, json, cxfrs

我有一个 JSON 响应，我需要将相应的 JSON 字符串映射到特定的响应类。是否有任何工具或框架可以做同样的事情。

响应类是：

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "0")
@XmlAccessorType(XmlAccessType.FIELD)
public class Student {

     @XmlElement(name="0")
     private String firstName;
     @XmlElement(name="1")
     private String lastName;

     public String getFirstName() {
         return firstName;
     }
     public void setFirstName(String firstName) {
         this.firstName = firstName;
     }
     public String getLastName() {
         return lastName;
     }
     public void setLastName(String lastName) {
         this.lastName = lastName;
     }
} 
```

Json 响应字符串为 {"0":{"0":"Rockey","1":"John"}}

我正在使用带有 Jettison 的 Apache CXF 框架，因为 JSON 提供程序还使用 JAXB 将数据连接到低带宽客户端。

请记下我想将数字表示转换为相应的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:38:30.353

您可以参考 Google-GSON 库 - [https://github.com/google/gson](https://github.com/google/gson)

您还可以参考之前的 stackoverflow 答案 - [Convert a JSON string to object in Java ME?](https://stackoverflow.com/questions/1395551/convert-a-json-string-to-object-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:42:31.923

杰蒂森可以做到这一点。[在此处](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)找到使用 JAXB 将 JSON 解组为对象的示例代码：

```
JAXBContext jc = JAXBContext.newInstance(Customer.class);

JSONObject obj = new JSONObject("{\"customer\":{\"id\":123,\"first-name\":\"Jane\",\"last-name\":\"Doe\",\"address\":{\"street\":\"123 A Street\"},\"phone-number\":[{\"@type\":\"work\",\"$\":\"555-1111\"},{\"@type\":\"cell\",\"$\":\"555-2222\"}]}}");
Configuration config = new Configuration();
MappedNamespaceConvention con = new MappedNamespaceConvention(config);
XMLStreamReader xmlStreamReader = new MappedXMLStreamReader(obj, con);

Unmarshaller unmarshaller = jc.createUnmarshaller();
Customer customer = (Customer) unmarshaller.unmarshal(xmlStreamReader); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:12:23.250

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

`Student`下面是您如何使用EclipseLink JAXB (MOXy) 注释的类来支持您的用例。

**演示**

```
import java.io.StringReader;
import java.util.*;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put("eclipselink.media-type", "application/json");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Student.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader json = new StringReader("{\"0\":{\"0\":\"Rockey\",\"1\":\"John\"}}");
        Student student = (Student) unmarshaller.unmarshal(json);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(student, System.out);
    }

} 
```

**输出**

```
{
   "0" : {
      "0" : "Rockey",
      "1" : "John"
   }
} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

* * *

**MOXy 和 JAX-RS**

对于 JAX-RS 应用程序，您可以利用`MOXyJsonProvider`该类来启用 JSON 绑定（请参阅：[http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html ）。

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# wordpress - 如何即时进行 *USD 到 INR* 货币转换？- WooCommerce

> ID：13134574
> 
> 赞同：4
> 
> 时间：2012-10-30T07:37:18.523
> 
> 标签：wordpress, e-commerce, payment-gateway, woocommerce, ccavenue

我们商店的基础货币是美元，我们为国际客户使用 PayPal。我们希望使用 ccAvenue (INR) 作为印度客户的支付网关。不幸的是，ccAvenue 不读取货币。所以 12 美元将从我们的网站上推出，ccAvenue 会将其读取为 12 卢比，而不是正确的金额 ~ 600 卢比。

如何即时转换金额（从美元到印度卢比），以便我们的网站向 ccAvenue 发送正确的金额？最好这应该在插件中使用实时货币转换服务来完成。但是，我们对粗略的解决方法持开放态度 - 例如每周两次手动更新转化率等。这是[免费 ccavenue woocommerce 插件](http://wordpress.org/extend/plugins/ccavenue-payment-gateway-woocommerce/)的链接。

任何帮助将非常感激。

这是插件的 index.php：

```
<?php
/*
Plugin Name: WooCommerce CCAvenue gateway
Plugin URI: http://mrova.com/
Description: Extends WooCommerce with mrova ccavenue gateway.
Version: 1.1
Author: mRova
Author URI: http://mrova.com/

    Copyright: © 2009-2012 mRova.
    License: GNU General Public License v3.0
    License URI: http://www.gnu.org/licenses/gpl-3.0.html
 */

add_action('plugins_loaded', 'woocommerce_mrova_ccave_init', 0);

function woocommerce_mrova_ccave_init() {

    if ( !class_exists( 'WC_Payment_Gateway' ) ) return;

    /**
     * Localisation
     */
    load_plugin_textdomain('wc-mrova-ccave', false, dirname( plugin_basename( __FILE__ ) ) . '/languages');

    /**
     * Gateway class
     */
    class WC_Mrova_Ccave extends WC_Payment_Gateway {
    protected $msg = array();
        public function __construct(){
            // Go wild in here
            $this -> id = 'ccavenue';
            $this -> method_title = __('CCAvenue', 'mrova');
            $this -> icon = WP_PLUGIN_URL . "/" . plugin_basename(dirname(__FILE__)) . '/images/logo.gif';
            $this -> has_fields = false;
            $this -> init_form_fields();
            $this -> init_settings();
            $this -> title = $this -> settings['title'];
            $this -> description = $this -> settings['description'];
            $this -> merchant_id = $this -> settings['merchant_id'];
            $this -> working_key = $this -> settings['working_key'];
            $this -> redirect_page_id = $this -> settings['redirect_page_id'];
            $this -> liveurl = 'https://www.ccavenue.com/shopzone/cc_details.jsp';
            $this -> msg['message'] = "";
            $this -> msg['class'] = "";
            add_action('init', array(&$this, 'check_ccavenue_response'));
            add_action('valid-ccavenue-request', array(&$this, 'successful_request'));
            add_action('woocommerce_update_options_payment_gateways', array(&$this, 'process_admin_options'));
            add_action('woocommerce_receipt_ccavenue', array(&$this, 'receipt_page'));
            add_action('woocommerce_thankyou_ccavenue',array(&$this, 'thankyou_page'));
        }

        function init_form_fields(){

            $this -> form_fields = array(
                'enabled' => array(
                    'title' => __('Enable/Disable', 'mrova'),
                    'type' => 'checkbox',
                    'label' => __('Enable CCAvenue Payment Module.', 'mrova'),
                    'default' => 'no'),
                'title' => array(
                    'title' => __('Title:', 'mrova'),
                    'type'=> 'text',
                    'description' => __('This controls the title which the user sees during checkout.', 'mrova'),
                    'default' => __('CCAvenue', 'mrova')),
                'description' => array(
                    'title' => __('Description:', 'mrova'),
                    'type' => 'textarea',
                    'description' => __('This controls the description which the user sees during checkout.', 'mrova'),
                    'default' => __('Pay securely by Credit or Debit card or internet banking through CCAvenue Secure Servers.', 'mrova')),
                'merchant_id' => array(
                    'title' => __('Merchant ID', 'mrova'),
                    'type' => 'text',
                    'description' => __('This id(USER ID) available at "Generate Working Key" of "Settings and Options at CCAvenue."')),
                'working_key' => array(
                    'title' => __('Working Key', 'mrova'),
                    'type' => 'text',
                    'description' =>  __('Given to Merchant by CCAvenue', 'mrova'),
                ),
                'redirect_page_id' => array(
                    'title' => __('Return Page'),
                    'type' => 'select',
                    'options' => $this -> get_pages('Select Page'),
                    'description' => "URL of success page"
                )
            );

        }
        /**
         * Admin Panel Options
         * - Options for bits like 'title' and availability on a country-by-country basis
         **/
        public function admin_options(){
            echo '<h3>'.__('CCAvenue Payment Gateway', 'mrova').'</h3>';
            echo '<p>'.__('CCAvenue is most popular payment gateway for online shopping in India').'</p>';
            echo '<table class="form-table">';
            $this -> generate_settings_html();
            echo '</table>';

        }
        /**
         *  There are no payment fields for CCAvenue, but we want to show the description if set.
         **/
        function payment_fields(){
            if($this -> description) echo wpautop(wptexturize($this -> description));
        }
        /**
         * Receipt Page
         **/
        function receipt_page($order){
            echo '<p>'.__('Thank you for your order, please click the button below to pay with CCAvenue.', 'mrova').'</p>';
            echo $this -> generate_ccavenue_form($order);
        }
        /**
         * Process the payment and return the result
         **/
        function process_payment($order_id){
            $order = &new woocommerce_order($order_id);
            return array('result' => 'success', 'redirect' => add_query_arg('order',
                $order->id, add_query_arg('key', $order->order_key, get_permalink(get_option('woocommerce_pay_page_id'))))
            );
        }
        /**
         * Check for valid CCAvenue server callback
         **/
        function check_ccavenue_response(){
            global $woocommerce;
            if(isset($_REQUEST['Order_Id']) && isset($_REQUEST['AuthDesc'])){
                $order_id_time = $_REQUEST['Order_Id'];
                $order_id = explode('_', $_REQUEST['Order_Id']);
                $order_id = (int)$order_id[0];
                if($order_id != ''){
                    try{
                        $order = new woocommerce_order($order_id);
                        $merchant_id = $_REQUEST['Merchant_Id'];
                        $amount = $_REQUEST['Amount'];
                        $checksum = $_REQUEST['Checksum'];
                        $AuthDesc = $_REQUEST['AuthDesc'];
                        $Checksum = $this -> verifyCheckSum($merchant_id, $order_id_time, $amount, $AuthDesc, $checksum, $this -> working_key);
                        $transauthorised = false;
                        if($order -> status !=='completed'){
                            if($Checksum=="true")
                            {

                                if($AuthDesc=="Y"){
                                    $transauthorised = true;
                                    $this -> msg['message'] = "Thank you for shopping with us. Your account has been charged and your transaction is successful. We will be shipping your order to you soon.";
                                    $this -> msg['class'] = 'success';
                                    if($order -> status == 'processing'){

                                    }else{
                                        $order -> payment_complete();
                                        $order -> add_order_note('CCAvenue payment successful<br/>Bank Ref Number: '.$_REQUEST['nb_bid']);
                                        $order -> add_order_note($this->msg['message']);
                                        $woocommerce -> cart -> empty_cart();

                                    }

                                }else if($AuthDesc=="B"){
                                    $this -> msg['message'] = "Thank you for shopping with us. We will keep you posted regarding the status of your order through e-mail";
                                    $this -> msg['class'] = 'info';

                                    //Here you need to put in the routines/e-mail for a  "Batch Processing" order
                                    //This is only if payment for this transaction has been made by an American Express Card
                                    //since American Express authorisation status is available only after 5-6 hours by mail from ccavenue and at the "View Pending Orders"
                                }
                                else{
                                    $this -> msg['class'] = 'error';
                                    $this -> msg['message'] = "Thank you for shopping with us. However, the transaction has been declined.";
                                    //Here you need to put in the routines for a failed
                                    //transaction such as sending an email to customer
                                    //setting database status etc etc
                                }
                            }else{
                                $this -> msg['class'] = 'error';
                                $this -> msg['message'] = "Security Error. Illegal access detected";

                                //Here you need to simply ignore this and dont need
                                //to perform any operation in this condition
                            }
                            if($transauthorised==false){
                                $order -> update_status('failed');
                                $order -> add_order_note('Failed');
                                $order -> add_order_note($this->msg['message']);
                            }
                            add_action('the_content', array(&$this, 'showMessage'));
                        }}catch(Exception $e){
                            // $errorOccurred = true;
                            $msg = "Error";
                        }

                }

            }

        }
        function showMessage($content){
            return '<div class="box '.$this -> msg['class'].'-box">'.$this -> msg['message'].'</div>'.$content;
        }
        /**
         * Generate CCAvenue button link
         **/
        public function generate_ccavenue_form($order_id){
            global $woocommerce;
            $order = &new woocommerce_order($order_id);
            $redirect_url = ($this -> redirect_page_id=="" || $this -> redirect_page_id==0)?get_site_url() . "/":get_permalink($this -> redirect_page_id);
            $order_id = $order_id.'_'.date("ymds");
            $checksum = $this -> getCheckSum($this -> merchant_id, $order -> order_total, $order_id, $redirect_url, $this -> working_key);
            $ccavenue_args = array(
                'Merchant_Id' => $this -> merchant_id,
                'Amount' => $order -> order_total,
                'Order_Id' => $order_id,
                'Redirect_Url' => $redirect_url,
                'Checksum' => $checksum,
                'billing_cust_name' => $order -> billing_first_name .' '. $order -> billing_last_name,
                'billing_cust_address' => $order -> billing_address_1,
                'billing_cust_country' => $order -> billing_country,
                'billing_cust_state' => $order -> billing_state,
                'billing_cust_city' => $order -> billing_city,
                'billing_zip' => $order -> shipping_postcode,
                'billing_cust_tel',
                'billing_cust_email' => $order -> billing_email,
                'delivery_cust_name' => $order -> shipping_first_name .' '. $order -> shipping_last_name,
                'delivery_cust_address' => $order -> shipping_address_1,
                'delivery_cust_country' => $order -> shipping_country,
                'delivery_cust_state' => $order -> shipping_state,
                'delivery_cust_tel' => '',
                'delivery_cust_notes' => '',
                'Merchant_Param' => '',
                'billing_zip_code' => $order -> billing_postcode,
                'delivery_cust_city' => $order -> shipping_city,
                'delivery_zip_code' => $order -> shipping_postcode);

            $ccavenue_args_array = array();
            foreach($ccavenue_args as $key => $value){
                $ccavenue_args_array[] = "<input type='hidden' name='$key' value='$value'/>";
            }
            return '<form action="'.$this -> liveurl.'" method="post" id="ccavenue_payment_form">
                ' . implode('', $ccavenue_args_array) . '
                <input type="submit" class="button-alt" id="submit_ccavenue_payment_form" value="'.__('Pay via CCAvenue', 'mrova').'" /> <a class="button cancel" href="'.$order->get_cancel_order_url().'">'.__('Cancel order &amp; restore cart', 'mrova').'</a>
                <script type="text/javascript">
jQuery(function(){
    jQuery("body").block(
            {
                message: "<img src=\"'.$woocommerce->plugin_url().'/assets/images/ajax-loader.gif\" alt=\"Redirecting…\" style=\"float:left; margin-right: 10px;\" />'.__('Thank you for your order. We are now redirecting you to CCAvenue to make payment.', 'mrova').'",
                    overlayCSS:
            {
                background: "#fff",
                    opacity: 0.6
        },
        css: {
            padding:        20,
                textAlign:      "center",
                color:          "#555",
                border:         "3px solid #aaa",
                backgroundColor:"#fff",
                cursor:         "wait",
                lineHeight:"32px"
        }
        });
        jQuery("#submit_ccavenue_payment_form").click();

        });
                    </script>
                </form>';

        }

        /**
         *  CCAvenue Essential Functions
         **/
        private function getCheckSum($MerchantId,$Amount,$OrderId ,$URL,$WorkingKey)
        {
            $str ="$MerchantId|$OrderId|$Amount|$URL|$WorkingKey";
            $adler = 1;
            $adler = $this -> adler32($adler,$str);
            return $adler;
        }

        private function verifyCheckSum($MerchantId,$OrderId,$Amount,$AuthDesc,$CheckSum,$WorkingKey)
        {
            $str = "$MerchantId|$OrderId|$Amount|$AuthDesc|$WorkingKey";
            $adler = 1;
            $adler = $this -> adler32($adler,$str);

            if($adler == $CheckSum)
                return "true" ;
            else
                return "false" ;
        }

        private function adler32($adler , $str)
        {
            $BASE =  65521 ;

            $s1 = $adler & 0xffff ;
            $s2 = ($adler >> 16) & 0xffff;
            for($i = 0 ; $i < strlen($str) ; $i++)
            {
                $s1 = ($s1 + Ord($str[$i])) % $BASE ;
                $s2 = ($s2 + $s1) % $BASE ;
                //echo "s1 : $s1 <BR> s2 : $s2 <BR>";

            }
            return $this -> leftshift($s2 , 16) + $s1;
        }

        private function leftshift($str , $num)
        {

            $str = DecBin($str);

            for( $i = 0 ; $i < (64 - strlen($str)) ; $i++)
                $str = "0".$str ;

            for($i = 0 ; $i < $num ; $i++)
            {
                $str = $str."0";
                $str = substr($str , 1 ) ;
                //echo "str : $str <BR>";
            }
            return $this -> cdec($str) ;
        }

        private function cdec($num)
        {

            for ($n = 0 ; $n < strlen($num) ; $n++)
            {
                $temp = $num[$n] ;
                $dec =  $dec + $temp*pow(2 , strlen($num) - $n - 1);
            }

            return $dec;
        }
        /*
         * End CCAvenue Essential Functions
         **/
        // get all pages
        function get_pages($title = false, $indent = true) {
            $wp_pages = get_pages('sort_column=menu_order');
            $page_list = array();
            if ($title) $page_list[] = $title;
            foreach ($wp_pages as $page) {
                $prefix = '';
                // show indented child pages?
                if ($indent) {
                    $has_parent = $page->post_parent;
                    while($has_parent) {
                        $prefix .=  ' - ';
                        $next_page = get_page($has_parent);
                        $has_parent = $next_page->post_parent;
                    }
                }
                // add to page list array array
                $page_list[$page->ID] = $prefix . $page->post_title;
            }
            return $page_list;
        }

    }

    /**
     * Add the Gateway to WooCommerce
     **/
    function woocommerce_add_mrova_ccave_gateway($methods) {
        $methods[] = 'WC_Mrova_Ccave';
        return $methods;
    }

    add_filter('woocommerce_payment_gateways', 'woocommerce_add_mrova_ccave_gateway' );
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:19:02.590

使用第三方机构提供的货币转换API，并封装到wordpress函数中。

[公开汇率](http://openexchangerates.org/)

[XE 数据馈送](http://www.xe.com/dfs/)

请参阅下面使用谷歌金融 API 的示例代码。

```
//get the exchange rate from google finance
function get_exchange_rate($from='USD', $to='INR') {
    $url = "http://www.google.com/ig/calculator?hl=en&q=1%s=?%s";   //url for the currency convertor
    $result = wp_remote_retrieve_body($response = wp_remote_get(sprintf($url, $from, $to))); // fetches the result from the url
    if(is_wp_error( $response )) {
        return FALSE;
    }
    $result = explode('"',$result);
    $result = str_replace(chr(160), '', substr( $result[3], 0, strpos($result[3], ' ') ) );
    return ( $result == 0 ) ? FALSE : $result;
} 
```

# c# - C#数据表如何使用linq垂直连接两个表行

> ID：13134575
> 
> 赞同：0
> 
> 时间：2012-10-30T07:37:19.637
> 
> 标签：c#, linq, datatable

如何使用 linq 从两个表中垂直连接行，我已经为此编写了一个查询，但它在第一行旁边添加，因此我的列数加倍，但我想通过下一行连接。

```
var dd4 = from tbl in dataTb.AsEnumerable()
                      join dpi in rawDataTable.AsEnumerable() on tbl["Account_No"] equals dpi["Account_No"]
                      select tbl.ItemArray.Concat(dpi.ItemArray).ToArray(); 
```

它给了我这样的结构

col1 col2 col3 .... col24 但我的表只有 12 列，所以它添加在它旁边，但是我如何在 12 列结束之后添加，然后应该开始新行。

dataTb 表数据：

```
chNo Chunit  val1  val2  val3 val4
 1    kwh    2010  2011  2012 2009
 2    kvarh  2012  2011  2008 2009 
```

rawDataTable 数据：

```
chNo Chunit  val1  val2  val3 val4
 1    kw     2.2   2.1   2.1  2.0
 2    kvar   1.2   1.1   1.1  1.0 
```

它是这样添加的：

```
1    kwh    2010  2011  2012 2009  1    kw     2.2   2.1   2.1  2.0
1    kwh    2010  2011  2012 2009  2    kvar   1.2   1.1   1.1  1.0
2    kvarh  2012  2011  2008 2009  1    kw     2.2   2.1   2.1  2.0
2    kvarh  2012  2011  2008 2009  2    kvar   1.2   1.1   1.1  1.0 
```

但我想要这样：

```
1    kwh    2010  2011  2012 2009
1    kw     2.2   2.1   2.1  2.0
2    kvar   1.2   1.1   1.1  1.0
2    kvarh  2012  2011  2008 2009
1    kw     2.2   2.1   2.1  2.0
2    kvar   1.2   1.1   1.1  1.0 
```

目前正在得到：但想要像上面那样（对于 Yograj）

```
1    kwh    2010  2011  2012 2009
2    kvarh  2012  2011  2008 2009
1    kw     2.2   2.1   2.1  2.0
2    kvar   1.2   1.1   1.1  1.0
1    kw     2.2   2.1   2.1  2.0
2    kvar   1.2   1.1   1.1  1.0 
```

谢谢，@nag。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:07:53.043

你应该试试这个查询

```
var dd4 = from tbl in dataTb.AsEnumerable()
          join dpi in rawDataTable.AsEnumerable() 
          on tbl["Account_No"] equals dpi["Account_No"]
          select new {datarows = new []{ tbl, dpi}};

var resultDataTable = dd4.SelectMany(x=>x.datarows).CopyToDataTable(); 
```

您可以从第二个实现重复，但不能从第一个实现。

```
var resultDataTable = dd4.Select(x=>x.datarows.First()).Distinct()
                      .Concat(dd4.Select(x=>x.datarows.Last()))
                      .CopyToDataTable(); 
```

试试这个以获得所需的输出

```
var records = from x in dd4
              group x by x.datarows.First() into y
              select y;

List<DataRow> rows = new List<DataRow>();

foreach(var item in records)
{
   rows.Add(item.Key);
   rows.AddRange(item.ToList().Select(x=>x.datarows.Last()));
}

var resultDataTable = rows.CopyToDataTable(); 
```

希望它会有所帮助。

# sql - 如何在 SQL Server 中使用带有联接的更新语句

> ID：13134585
> 
> 赞同：1
> 
> 时间：2012-10-30T07:38:13.763
> 
> 标签：sql, sql-server-2008-r2

下面的代码适用于 MS Access，但我无法使其适用于 SQL Server 2008。

```
UPDATE Borrow INNER JOIN BorrowDetails 
ON Borrow.BorrowID = BorrowDetails.BorrowID 
SET BorrowDetails.Returned = True 
WHERE BookID = 1 AND MemberID = 1 
```

请有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:41:06.433

```
UPDATE BorrowDetails
SET BorrowDetails.Returned = True 
FROM BorrowDetails
INNER JOIN Borrow ON Borrow.BorrowID = BorrowDetails.BorrowID 
WHERE BookID = 1 AND MemberID = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:39:33.787

试试这个：

```
UPDATE bd
SET bd.Returned = 1
FROM BorrowDetails bd
INNER JOIN Borrow b ON bd.BorrowID = b.BorrowID    
WHERE b.BookID = 1 AND b.MemberID = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:58:11.790

```
UPDATE x
SET x.Returned = True 
FROM (
      SELECT Returned 
      FROM Borrow INNER JOIN BorrowDetails ON Borrow.BorrowID = BorrowDetails.BorrowID 
      WHERE BookID = 1 AND MemberID = 1
      ) x 
```

# javascript - 通过对象初始化可观察对象

> ID：13134587
> 
> 赞同：1
> 
> 时间：2012-10-30T07:38:17.107
> 
> 标签：javascript, jquery, data-binding, knockout.js, observable

如何创建由对象初始化的可观察对象？

```
function Company(object) {
    this.Code = object != undefined && object.Code != undefined ? ko.observable(object.Code) : ko.observable();
    this.Name = object != undefined && object.Name != undefined ? ko.observable(object.Name).extend({ required: { message: "Nom de la companie est obligatoire" } }) : ko.observable().extend({ required: { message: "Nom de la companie est obligatoire" } });  
}; 
```

//查看模型

```
 var company = new AddedCompany();
  self.company = ko.observable(company); 
```

我在控制台中没有收到任何异常，但绑定无法正常工作。
首先可以用对象初始化可观察对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:45:02.833

是的，但是您需要使用 with 绑定将上下文更改为子视图模型（在本例中为公司）

```
<!-- ko with: company -->
<div data-bind="text: Name"></div>
<!-- /ko --> 
```

with 绑定可以与虚拟元素一起使用，也可以不与虚拟元素一起使用

# jquery - 根据前一个单元格隐藏/显示表格单元格

> ID：13134588
> 
> 赞同：0
> 
> 时间：2012-10-30T07:38:23.570
> 
> 标签：jquery

我想根据前一个单元格中的值显示/隐藏一个表格单元格。如果前一个单元格的值比显示其他隐藏。Jquery 应该为每一行评估这个。我现在有以下代码：

```
 jQuery(document).ready(function() {
    jQuery('input[name^="OS"]').hide();
    jQuery('input[name^="OF"]').on('keyup', function(){ 
        jQuery('table#form_er tr').each(function(){ 
            if(!jQuery('input[name^="OF"]').val()){
                jQuery('input[name^="OS"]').hide();}
            else {jQuery('input[name^="OS"]').show();}
        });
    });
}); 
```

现在的结果是，即使填充了 OF，所有 OS 单元都被隐藏，如果我填充一个空的 OF，所有 OS 单元都将显示，并且当我清除 OF 单元时，没有任何变化。有人可以指出我正确的方向吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:49:33.547

尝试使用**jQuery(this)**和**最接近的('tr')**仅针对当前行中的单元格..

```
jQuery(document).ready(function() {
    jQuery('input[name^="OS"]').hide();
    jQuery('input[name^="OF"]').on('keyup', function() {
        jQuery('table#form_er tr').each(function() {
            if (jQuery(this).val() != '') {
                jQuery(this).closest('tr').find('input[name^="OS"]').hide();
            }
            else {
                jQuery(this).closest('tr').find('input[name^="OS"]').show();
            }
        });
    });
});​ 
```

如果您要定位的单元格是下一个单元格..那么您也可以这样做..

```
jQuery(this).closest('td').next('td').find('input[name^="OS"]').hide(); 
```

**编辑**

替换`!jQuery(this).val()` **为** `jQuery(this).val() != ''`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:48:05.357

我认为您的代码是正确的，但可能 $('input[name^="OS"]').val() 为空。

# objective-c - 为什么目标也需要启用用户交互而不仅仅是按钮？

> ID：13134596
> 
> 赞同：0
> 
> 时间：2012-10-30T07:39:26.563
> 
> 标签：objective-c, xcode, uiview, user-interaction

```
UIButton * newButton = [UIButton buttonWithType:UIButtonTypeCustom];
newButton.imageObject= someImage;
UIImage * imagePut  = someImage.imageBlob;
imagePut = [imagePut roundedCornerImage:20 borderSize:0];
[newButton setImage:imagePut forState:UIControlStateNormal];

newButton.frame= CGRectMake(column * self.distanceBetweenButton +marginBetweenButtons, row *self.distanceBetweenButton+marginBetweenButtons, self.sizeOfButtons, self.sizeOfButtons);
newButton.backgroundColor = [UIColor clearColor];
PO(@(newButton.userInteractionEnabled));
newButton.userInteractionEnabled=YES;
[newButton addTarget:self action:@selector(someImageGotPressed) forControlEvents:UIControlEventTouchUpInside];
PO(@([newButton allControlEvents]));
PO(newButton.allTargets);
[self.collectionOfButton addObject:newButton]; 
```

简单的按钮。问题是 someImageGotPressed 从未被调用过。

newButton 当然默认有 userInteractionEnabled。但是， someImageGotPressed 仍然没有被调用。

目标是一个 UITableViewCell。我关闭了该 uiTableViewCell 的 userinteractionenabled，因为我希望人们与按钮进行交互。

我把它重新打开，它的工作原理。

然而，有些事情让我感到困惑。addTarget 中的目标可以是任何正确的。它甚至不必是 UIView 或 UIViewController。那么，为什么目标的 userInteractionEnabled 很重要呢？

这是因为 UITableViewCell 是按钮的超级视图，而关闭视图的 userInteractionEnabled 将在所有超级视图或类似的东西中关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:56:22.160

当您将超级视图的`userInteractionEnabled`( `UITableViewCell`) 设置为 NO 时，也会导致忽略对其子视图的所有触摸事件。

# android - Android：同一类中两个方法之间的时间延迟

> ID：13134601
> 
> 赞同：0
> 
> 时间：2012-10-30T07:39:45.797
> 
> 标签：android

我有一个按钮 - 按下它，我正在播放声音并进入下一个活动。声音片段为 4 秒。我希望完全播放声音，然后转到下一个活动。现在发生的事情是单击按钮，活动将移至下一个，并且还会播放声音，但无法根据我的需要工作。

我的代码

```
final ImageButton circleButton=(ImageButton)findViewById(R.id.circleCircle);
    circleButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            /* Code for playing the "Very Good" sound */    
            MediaPlayer mediaPlayer = MediaPlayer.create(shapeActivity.this, R.raw.wow);
            mediaPlayer.start();    

            Intent myintent1 = new Intent(shapeActivity.this,shapeSquareActivity.class);
            myintent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(myintent1);
        }}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:46:38.793

使用 mediaplayer oncomplete 侦听器方法，一旦声音完成而不是移动到下一个意图

```
mediaPlayer.setOnCompletionListener( new OnCompletionListener() {
         public void onCompletion(MediaPlayer mp) {
             Intent myintent1 = new Intent(shapeActivity.this,shapeSquareActivity.class);
             myintent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(myintent1);
    }} ); 
```

# asp.net - 创建在不同PC上创建的数据库的连接字符串

> ID：13134602
> 
> 赞同：0
> 
> 时间：2012-10-30T07:39:46.417
> 
> 标签：asp.net, sql, sql-server, ssms

我正在尝试使用我朋友发送的数据库。他使用*Sql Server Management Studio*创建了它。在包含该*`.mdf`*文件时，我收到一条错误消息（我在答案末尾提到了该错误）。我认为这是因为连接字符串的不同。我是 .NET 的新手，所以我只是更改了连接字符串中的名称，

**从，**

```
 <add name="ApplicationServices" connectionString="Data Source=sheroz;Initial Catalog=FLEXIFORMDB;integrated security=SSPI"/>
  </connectionStrings> 
```

**至，**

```
 <add name="ApplicationServices" connectionString="Data Source=Fahad-PC\Fahad;Initial Catalog=FLEXIFORMDB;integrated security=SSPI"/>
  </connectionStrings> 
```

请帮助我让它工作。提前致谢。

## 错误

```
An exception occurred while executing a Transact-SQL statement or batch. (Microsoft.SqlServer.ConnectionInfo)

------------------------------
Program Location:

   at Microsoft.SqlServer.Management.Common.ServerConnection.ExecuteNonQuery(String sqlCommand, ExecutionTypes executionType)
   at Microsoft.SqlServer.Management.Common.ServerConnection.ExecuteNonQuery(StringCollection sqlCommands, ExecutionTypes executionType)
   at Microsoft.SqlServer.Management.Smo.ExecutionManager.ExecuteNonQuery(StringCollection queries)
   at Microsoft.SqlServer.Management.Smo.Server.AttachDatabaseWorker(String name, StringCollection files, String owner, AttachOptions attachOptions)
   at Microsoft.SqlServer.Management.Smo.Server.AttachDatabase(String name, StringCollection files)

===================================

Unable to open the physical file "D:\FlexiFormWF\FlexiFormWF\FlexiFormDB.mdf". Operating system error 5: "5(Access is denied.)". (.Net SqlClient Data Provider)

------------------------------
For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.00.1600&EvtSrc=MSSQLServer&EvtID=5120&LinkId=20476

------------------------------
Server Name: FAHAD-PC\MSSQL
Error Number: 5120 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:45:51.003

我认为你有你的权限。至少，您的错误消息中的这句话表明：

> 操作系统错误 5：“5（拒绝访问。）”

# cocos2d-iphone - Box2d 如何将身体移动到像 CCMoveTo 一样的位置

> ID：13134604
> 
> 赞同：0
> 
> 时间：2012-10-30T07:40:10.993
> 
> 标签：cocos2d-iphone, box2d, move

您好，如何将身体移动到准确的位置，例如 cocos2d 中的 CCMoveTo 动作。我想出了如何用 SetLinearVelocity 做到这一点

```
b2Vec2 force = (t * endPosition) - body->GetLinearVelocity();
        [self runAction: [CCSequence actions: [CCCallBlock actionWithBlock:^{
                                                                                body->SetLinearVelocity( force );
                                                                           }],
                                              [CCDelayTime actionWithDuration: (1.0f / t)],
                                              [CCCallBlock actionWithBlock:^{
                                                                                body->SetLinearVelocity( b2Vec2_zero );
                                                                            }],nil]]; 
```

我在论坛上找到了这段代码，但它对我没有帮助..

```
b2Vec2 currentPosition = body->GetPosition();
b2Vec2 desiredPosition = ...;
b2Vec2 necessaryMovement = desiredPosition - currentPosition;
float necessaryDistance = necessaryMovement.Length();
necessaryMovement.Normalize();
float forceMagnitude = b2Min(maxAllowableForce, necessaryDistance);
b2Vec2 force = forceMagnitude * necessaryMovement;
body->ApplyForce( force, body->GetWorldCenter() ); 
```

同样的问题不能在目标点停止身体..所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:38:12.213

您必须运行在更新调用中找到的代码。每次更新，您都会将对象稍微移向“desiredPosition”

```
float pForce = 10;

b2Vec2 forceDir = b2Vec2( ( desiredPosition.x - body->GetPosition().x ) * pForce  , 
         ( desiredPosition.y - body->GetPosition().y ) * pForce ); 
```

将 foreDir 应用到您的身体并使用 pForce

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T15:18:38.057

我发现如果你需要移动，例如，火箭或类似的东西向目标移动，那么最好使用 KinematicBody 并在每一帧设置身体的线速度。

如果您将 Vector2 视为您想要移动的物体的线速度，则 Chakalaka 给出的公式可以正常工作。

# c++ - C++11 标准布局违规的影响

> ID：13134608
> 
> 赞同：1
> 
> 时间：2012-10-30T07:40:29.790
> 
> 标签：c++, c++11, standard-layout

> **可能重复：**
> [为什么不能在 C++ 中的非 POD 结构上使用 offsetof？](https://stackoverflow.com/questions/1129894/why-cant-you-use-offsetof-on-non-pod-strucutures-in-c)

我有两节课：

```
struct A{
  double one;
  float two;
};

struct B : public A{
  float three;
}; 
```

如果我正确地解释了 C++11 标准布局限制，那么 B 不是标准布局，因为 B 和 A 都具有非静态数据成员。我想结合 HDF5 使用像 B 这样的结构，这需要使用**offsetof**宏，（据我所知）仅限于标准布局对象。我的问题是，可能会出现什么问题，表达如下

```
offsetof(B, three) 
```

它适用于 gcc-4.6，但有没有人在类似情况下遇到过意外行为？如果是这样，哪个和哪个编译器？最坏的情况是什么？

问候克拉斯

# sql - SQL Server 2005 查询 XML 数据类型相关

> ID：13134610
> 
> 赞同：1
> 
> 时间：2012-10-30T07:40:59.980
> 
> 标签：sql, xml, sql-server-2005

我从同一个表中选择了 2 组列，如下所示。

```
select (select a, b, c from T1 FOR XML RAW('CAT1')),
       (select d, e, f from T1 FOR XML RAW('CAT2'))
for XML PATH('Parent') 
```

查询的结果是

```
<Parent>&lt;CAT1 a="Data1" b="Data2', c="Data3" &gt;&lt;CAT2 d="Data4" e="Data5" f="Data6"&gt;</Parent> 
```

如何避免？我会被包含在一个适当的父 xml 中吗？

预期结果

```
<Parent>
   <CAT1 a="Data1" b="Data2', c="Data3">
   <CAT2 d="Data4" e="Data5" f="Data6">
</Parent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:08:59.663

用于`TYPE`指定子查询应返回 XML。

```
select (select a, b, c from T1 FOR XML RAW('CAT1'), TYPE),
       (select d, e, f from T1 FOR XML RAW('CAT2'), TYPE)
for XML PATH('Parent') 
```

[FOR XML 查询中的 TYPE 指令](http://msdn.microsoft.com/en-us/library/ms190025%28v=sql.90%29.aspx)

# c - 如何在 Windows 上编译 memcached？

> ID：13134616
> 
> 赞同：5
> 
> 时间：2012-10-30T07:41:47.527
> 
> 标签：c, windows, memcached, mingw, libevent

我正在尝试`memcached`在 Windows 上运行。我已经下载`memcached`了最新的稳定版并在 Windows 7 下使用 Mingw 编译它。配置失败并出现错误，

> 检查 libevent 目录...配置：错误：需要 libevent。您可以从[http://www.monkey.org/~provos/libevent/获得它](http://www.monkey.org/~provos/libevent/)
> 
> ```
>  If it's already installed, specify its path using --with-libevent=/dir/ 
> ```

然后我下载`libevent`并编译它。这产生了 3 个 DLL，libeventcore、libevent-extra 和 libevent-2.0.5。

`memcached`我使用选项再次运行配置`--with-libevent`。但是由于某种原因，它再次失败并出现相同的错误。我不知道它为什么会失败。谁能帮我解决这个问题？还是有更好的方法`memcached`在 Windows 上运行？我见过很多为 Windows 预先构建的二进制文件。但他们都使用旧版本的`memcached`. `memcached`和 AFAIK，Windows在较新的版本中得到正式支持。

我正在使用带有 MinGW 的 Windows7 64 位版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:49:32.813

`make`在dir 中运行后，`libevent`您可以准备好文件，但要充分利用它，必须安装它们。所以`make install`需要一步。如果您使用前缀配置它，它将位于您选择的目录中。否则就是`/usr/local`。

所以也许`make install`在 libevent dir 中运行并在`configure`没有参数的情况下从 memcache 运行就足够了。

如果您在通过配置阶段仍有问题，请查看`config.log`. 它显示了源文件和失败的 gcc 命令。

不幸的是，成功`configure`并不是一切。**后来它**在包含`sys/socket.h`,`netinet/in.h`并且`netdb.h`可能还有`-pthread`gcc 参数时失败。恐怕它不会在 mingw 上编译。至少不是没有认真的移植工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T22:46:01.277

我意识到迟到了，但答案是使用：

```
$ export LIBS=-lws2_32 
```

这将放置`$LIBS`在编译调用的末尾，以便它链接到`libws2_32.a`或 winsocks2，但这可能意味着您没有正确配置您的构建，并且您将出现后续错误，例如`#include <sys/socket.h>`找不到标头等。

见[mingw-linker-error-winsock](https://stackoverflow.com/questions/2033608/mingw-linker-error-winsock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:44:27.830

据我所知，从来没有一个官方的 Windows 的 Memcached 端口（是的，很少有个人的努力。最后知道的移植工作可以在[这里](http://code.jellycan.com/files/memcached-1.2.6-win32-bin.zip)找到 1.2.6 版本）在 Couchbase 上使用 Memcached Bucket 的 Memcached 的最著名实现。

# iphone - 为什么 iPhone GPS 箭头出现在状态栏中，即使我没有在位置管理器上调用 startUpdatingLocation？

> ID：13134617
> 
> 赞同：1
> 
> 时间：2012-10-30T07:41:51.927
> 
> 标签：iphone, ios, core-location

除了在 CLLocationManager 上调用 startUpdatingLocation 或 startUpdatingHeading 之外，还有什么会导致 GPS 箭头出现在状态栏中？

当您使用 CLLocationManager 或 CLLocation 对象进行任何操作时，它是否会出现，例如计算两个 CLLocation 之间的距离？

如果是这样，这是否代表任何功耗，就像使用 GPS 时启动更新位置一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:07:39.793

如果你实例化 CLLocationManager，然后在其上调用 location，就会出现 GPS 箭头。

# regex - awk 正则表达式比较文件扩展名

> ID：13134620
> 
> 赞同：0
> 
> 时间：2012-10-30T07:42:15.043
> 
> 标签：regex, file, awk

我正在尝试查找扩展名为 sh、xls 等的文件，如下面的 FILTER 变量所示。

以下是 ls -ltr 的输出，下面脚本的输出是 hourly_space_update.sh 和 kent.ksh，但我不想要 .ksh 文件，请你告诉我的正则表达式哪里出错了。

```
[root@SVRVSVN ~]# ls -ltr
total 20
-rw-r--r--  1 root sqaadmin   44 Oct  9 18:24 hourly_space_update.sh
-rw-r--r--  1 root sqaadmin    0 Oct 30 12:34 kent.ksh
-rw-r--r--  1 root sqaadmin    0 Oct 30 12:34 a.abc
-rw-r--r--  1 root sqaadmin    0 Oct 30 13:02 hh.h
#!/bin/sh

ls -ltr | awk '
BEGIN {
FILTER=".(sh|xls|xlsx|pdf)$"
}
{
for (i = 1; i < 9; i++) $i = ""; sub(/^ */, "");

if(match(tolower($1),FILTER))
{
   print $1
}
}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:57:09.160

试试这个正则表达式：

```
\.(sh|xls|xlsx|pdf)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:48:37.280

在 bash/ksh/zsh 中，您可以使用[大括号扩展](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)：

```
ls *.{sh,xls,xlsx,pdf} 
```

也[不要解析 ls](http://mywiki.wooledge.org/ParsingLs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:25:54.783

请参阅我在您迄今为止获得的答案中所做的评论，但更重要的是 - 您测试其中一个字段的方法对于包含空格的文件名将失败，并且如果其中一个空格是换行符，任何管道解决方案都将失败。你应该只使用 shell 作为：

```
ls -tr *.sh *.xls *.xlsx *.pdf 
```

并且完全不需要过滤器。

但是，如果您必须保留一个 awk 脚本，那么如果您可以保证您的文件名不包含任何空格，那么编写它的方法就是：

```
ls -ltr | awk 'BEGIN{FILTER="\\.(sh|xlsx?|pdf)$"} tolower($NF) ~ FILTER { print $NF }' 
```

请注意，我将您的 RE 缩写为“xslx?”。将匹配“xls”或“xlsx”。

但是，在我为您提供包含空格或换行符的文件名的解决方案之前 - 如果您只想处理文件名，为什么要使用“ls -ltr”而不是简单的“ls -tr”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:52:50.910

尝试使用 ( **\bsh\b|\bxls\b|\bxlsx\b|\bpdf\b** ) 过滤器。

在您的过滤器中，您需要 .ksh 文件，因为它包含 sh 序列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T10:40:22.353

您的代码实际上可以在我在 cygwin 下运行的 gawk 4.0.1 中运行。

但是你怎么不想做：

```
awk 'BEGIN {FILTER=".(sh|xls|xlsx|pdf)$"}{if(match(tolower($9),FILTER)){print $9}}' 
```

这将使 for 循环变得多余，并稍微清理一下代码。我猜`ls -ltr`每次执行时使用相同格式的输出。:)

不幸的是，我无法使用 clean`awk`命令进行测试，但您也可以尝试双重转义，`\\.`如果那是您的问题`awk`。提示是`print $1`在 if 语句之前确保它包含您期望的内容。

# objective-c - 想要 2000 年 1 月或 2000 年 1 月的 NSDateformatter

> ID：13134621
> 
> 赞同：0
> 
> 时间：2012-10-30T07:42:16.697
> 
> 标签：objective-c, nsdateformatter

我有一个 2012 年 1 月的日期。我需要一个`NSDateFormatter`这样的日期。

这是我的代码...

```
//Array of Date-formatter Strings
NSArray *dateFormatterList = [
    NSArray arrayWithObjects:
        @"yyyy-MM-dd'T'HH:mm:ss'Z'", 
        @"yyyy-MM-dd'T'HH:mm:ssZ",
        @"yyyy-MM-dd'T'HH:mm:ss", @"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'",
        @"yyyy-MM-dd'T'HH:mm:ss.SSSZ", @"yyyy-MM-dd HH:mm:ss",
        @"MM/dd/yyyy HH:mm:ss", @"MM/dd/yyyy'T'HH:mm:ss.SSS'Z'",
        @"MM/dd/yyyy'T'HH:mm:ss.SSSZ", @"MM/dd/yyyy'T'HH:mm:ss.SSS",
        @"MM/dd/yyyy'T'HH:mm:ssZ", @"MM/dd/yyyy'T'HH:mm:ss",
        @"yyyy:MM:dd HH:mm:ss", @"yyyyMMdd", @"dd-MM-yyyy",
        @"dd/MM/yyyy", @"yyyy-MM-dd", @"yyyy/MM/dd",
        @"dd MMMM yyyy", @"MMddyyyy", @"MM/dd/yyyy", 
        @"MM-dd-yyyy",@"d'st' MMMM yyyy",
        @"d'nd' MMMM yyyy", @"d'rd' MMMM yyyy",
        @"d'th' MMMM yyyy", @"d'st' MMM yyyy",
        @"d'nd' MMM yyyy", @"d'rd' MMM yyyy",
        @"d'th' MMM yyyy", @"d'st' MMMM",
        @"d'nd' MMMM", @"d'rd' MMMM",
        @"d'th' MMMM", @"d'st' MMM",
        @"d'nd' MMM", @"d'rd' MMM",
        @"d'th' MMM",@"MMMM yyyy",nil];

NSString *targetDateFormatString  = @"dd-MM-yyyy";

count++; 

if (resultString) {
    for (NSString *dateFormatterString in dateFormatterList) {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:dateFormatterString];
        NSDate *originalDate = [dateFormatter dateFromString:resultString];

        if (originalDate) {
            [dateFormatter setDateFormat:targetDateFormatString];
            myDateString = [dateFormatter stringFromDate:originalDate];
            [finalDateArray addObject:myDateString];
            //NSLog(@"Converted date String is %@", myDateString);
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:42:30.910

2000 年 1 月

尝试，

```
@"MMMM, yyyy" 
```

和 2000 年 1 月

尝试

```
@"MMMM yyyy" 
```

我也更新了我对您其他问题的回答，请[在此链接中查看我的回答](https://stackoverflow.com/a/13118199/1730272)

**更新：**

在上面有问题的代码中设置`resultString = @"January 2000"`并重试。我把它当作`"01-01-2000"`. 我已经更新了对您问题的其他答案，以使其成为一种方法。使用该方法并将其称为`[self dateStringFromString:@"January 2000" destinationFormat:@"dd-MM-yyyy"]`. 请注意，由于原始字符串中不存在日期参数，因此您将看到`01`默认日期。

# python - 在 python 中重构生成器的第一次迭代

> ID：13134627
> 
> 赞同：1
> 
> 时间：2012-10-30T07:42:39.223
> 
> 标签：python, loops, refactoring

我想知道是否有办法重构以下代码

```
 first_run = True
 for i in gen:
        if first_run:
            last_head = i[1]
            last_tail = i[2]
            last_chrom = i[0]
            first_run = False
        else:
            func(i[1], last_head)
            func(i[1], last_tail)
            last_head = i[1]
            last_tail = i[2]
            last_chrom = i[0] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:33:12.697

循环的要点似乎是对可迭代的连续元素对执行一些操作。因此，我会查看[模块文档](http://docs.python.org/2/library/itertools.html#recipes)`pairwise`中给出其定义的函数：[`itertools`](http://docs.python.org/2/library/itertools.html#recipes)

```
def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b) 
```

请注意，这不是实际`itertools`功能，您必须将实现复制并粘贴到您的代码中。无论如何，有了这个函数，你的循环可以像这样实现：

```
for a, b in pairwise(gen):
    func(b[1], a[1])
    func(b[1], a[2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:48:13.423

这应该简化循环

```
first_run = True
for i in gen:
    if first_run == False:
        func(i[1], last_head)
        func(i[1], last_tail)

     last_head, last_tail, last_chrom  = i[1], i[2], i[0]
     first_run = False 
```

更新了答案...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:57:14.950

我会删除**if** / **else**并通过切片列表分配 - 除非**func**的参数是由它更新的对象：如果 gen 是生成器：

```
my_gen = gen
values = my_gen.next()
last_chrom, last_head, last_tail = values[:3]
for values in my_gen:
    func(last_head, last_head)
    func(last_head, last_tail)
    last_chrom, last_head, last_tail = values[:3] 
```

编辑：刚刚注意到我的错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:57:23.010

如果您在循环后不需要变量 last_head、last_tail 和 last_chrom，则可以采用以下解决方案：

```
for index, val in enumerate(gen[:1]):
    func(val[1], gen[index-1][1])
    func(val[1], gen[index-1][2]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T09:43:24.173

我最喜欢以特殊方式处理“第一项”的方法是一次性循环`break`：

```
def gen():
    for x in range(5):
        yield x

def first_special(g):
    for item in g:
        print 'first', item
        break
    for item in g:
        print item

 first_special(gen())
 # prints "first 0, 1,2,3,4 
```

请注意，这适用于单元素或空迭代器。为了也`first_special`可以使用任意迭代，我通常会`iter()`向它添加一个安全调用：

```
def first_special(g):
    g = iter(g)
    for item in g:
        print 'first', item
        break
    for item in g:
        print item 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T08:46:16.217

```
it = iter(gen) # make sure we have an iterator
_, last_head, last_tail = next(it, [None]*3) # assume iterator returns 3 values
for _, head, tail in it:
    func(head, last_head)
    func(head, last_tail)
    last_head, last_tail = head, tail 
```

如果您不能假设迭代器一次返回 3 个值，那么：

```
it = iter(gen)
last = next(it, None)
for x in it:
    func(x[1], last[1]) # head, last_head
    func(x[1], last[2]) # head, last_tail
    last = x 
```

您还可以使用[@David](https://stackoverflow.com/a/13135251/4279)建议的[`itertools`'`pairwise()`](http://docs.python.org/2/library/itertools.html#recipes)食谱：

```
for last, x in pairwise(gen):
    func(x[1], last[1]) # head, last_head
    func(x[1], last[2]) # head, last_tail 
```

# android - 在 Android 中 - 如何在不打开 Tweet 对话框（消息对话框）的情况下直接向 android 中经过身份验证的用户的关注用户发布推文

> ID：13134629
> 
> 赞同：3
> 
> 时间：2012-10-30T07:42:51.173
> 
> 标签：android, twitter

我想向 Authenticate 用户的关注用户发布推文。为了使用**Twitter-4j 库**进行身份验证。我得到了关注用户的列表（名称和 ID），但在没有打开对话框的情况下无法发布推文。我正在使用[此链接进行身份验证](http://www.mokasocial.com/2011/07/writing-an-android-twitter-client-with-image-upload-using-twitter4j/)

问题-**如何在未打开推文对话框（消息对话框）的情况下直接将推文发布到 android 中经过身份验证的用户的关注用户**

**1.在twitterButton上点击一个新的Activity，用webview打开**

```
 twitterButton=(Button) findViewById(R.id.twitter);
    twitterButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        mTwitter = new TwitterFactory().getInstance();
        mRequestToken = null;
        mTwitter.setOAuthConsumer(TwitterConstants.CONSUMER_KEY,
                TwitterConstants.CONSUMER_SECRET);
        String callbackURL = getResources().getString(
                R.string.twitter_callback);
        try {
            mRequestToken = mTwitter.getOAuthRequestToken(callbackURL);
            System.out.println("URL"
                    + mRequestToken.getAuthenticationURL());
        } catch (TwitterException e) {
            e.printStackTrace();
        }
        Intent i = new Intent(MMSExampleActivity.this,
                TwitterScreen.class);
        i.putExtra("URL", mRequestToken.getAuthenticationURL());
        System.out.println("Url ==== "
                + mRequestToken.getAuthenticationURL());
        startActivityForResult(i, TWITTER_AUTH);

    }
       }); 
```

**2.在onActivityResult(int requestCode, int resultCode, Intent data)方法中**

```
 if (resultCode == Activity.RESULT_OK) {
                String oauthVerifier = (String) data.getExtras().get(
                        "oauth_verifier");
                AccessToken at = null;
                try {
                    // Pair up our request with the response
                    at = mTwitter.getOAuthAccessToken(mRequestToken,
                            oauthVerifier);

                    accessToken = at.getToken();
                    System.out.println("access token" + accessToken);
                    accessTokenSecret = at.getTokenSecret();

                    getFollowers();

                    Intent twitterFriendIntent=new Intent(MMSExampleActivity.this,TwitterFriends.class);
                    twitterFriendIntent.putExtra("twitterfriends", twitterFriends);
                    startActivity(twitterFriendIntent);
                } catch (TwitterException e) {
                    System.out.println("e........");
                    e.printStackTrace();

                }
            } 
```

**3.获取关注用户列表**

```
 public void getFollowers()
                    {
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthConsumerKey(TwitterConstants.CONSUMER_KEY);
        builder.setOAuthConsumerSecret(TwitterConstants.CONSUMER_SECRET);
        builder.setOAuthAccessToken(accessToken);
        builder.setOAuthAccessTokenSecret(accessTokenSecret);
        Configuration conf = builder.build();
         twitter = new TwitterFactory(conf).getInstance();

        try {

            long lCursor = -1;
            IDs friendsIDs = twitter.getFriendsIDs(twitter.getId(), lCursor);
            IDs followersIds=twitter.getFollowersIDs(twitter.getId(), lCursor);
            System.out.println(twitter.showUser(twitter.getId()).getName());
            System.out.println("==========================");
            do
            {
              for (long i : friendsIDs.getIDs())
               {

                  FriendList friendListObj=new FriendList();
                  friendListObj.setTwitterId(i);
                  friendListObj.setTwitterUsername(twitter.showUser(i).getName());
                  friendListObj.setTwitterUrl(twitter.showUser(i).getScreenName());
                  twitterFriends.add(friendListObj);

                   System.out.println("follower ID #" + i);
                   System.out.println(twitter.showUser(i).getName());
                   System.out.println(twitter.showUser(i).getProfileImageURL());
                   System.out.println(twitter.showUser(i).getURL());

               }
            }while(friendsIDs.hasNext());

        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

**4\. 发布推文的代码**

```
 public void updateStatus( String messageToPost) {

    ConfigurationBuilder builder = new ConfigurationBuilder();
    builder.setOAuthConsumerKey(TwitterConstants.CONSUMER_KEY);
    builder.setOAuthConsumerSecret(TwitterConstants.CONSUMER_SECRET);
    builder.setOAuthAccessToken(accessToken);
    builder.setOAuthAccessTokenSecret(accessTokenSecret);
    Configuration conf = builder.build();
    Twitter twitter = new TwitterFactory(conf).getInstance();

    System.out.println("in update status");
    try {
        // twitter.updateStatus("Hello World!");
        StatusUpdate status = new StatusUpdate(messageToPost);
        System.out.println("Length of Message is = = = "
                + messageToPost.trim().length());
        System.out.println("App" + file);
        status.setMedia(file);
        System.out.println("App" + file.exists());
        twitter.updateStatus(status);
        System.out.println("App" + file);
    } catch (TwitterException e) {
        System.err.println("Error occurred while updating the status!");
        e.printStackTrace();

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:37:41.323

你有 Twitter 朋友 ID ...现在得到朋友详细信息（基本上是屏幕名称）

```
public class FindFriendList extends AsyncTask<Integer, Integer, Void>{

           private Context context;
          ProgressDialog PD ;

               public FindFriendList(Context context) {
                   this.context = context;

              }

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                PD = ProgressDialog.show(context,"","sync Data Server to Local data.");
                 }  
            @Override
            protected Void doInBackground(Integer... params) {

                //getData("https://api.twitter.com/1/followers/ids.json?screen_name="+TwitterApp.UserName);
                for (int i = 0; i < Friends_ID.size(); i++) {
                    getmethodFriendprofile(Friends_ID.get(i));  
                }

                return null;
            }
            @Override
            protected void onPostExecute(Void result) {
                PD.dismiss();
            }

           }
    public void getmethodFriendprofile(String FriendsID) {
        Log.d("user_ID",":-"+FriendsID);
        String weburl ="https://api.twitter.com/1/users/lookup.json?user_id="+FriendsID+",twitter&include_entities=true";
        Log.d("url",":-"+weburl);
        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(weburl);

        try {
            HttpResponse httpResponse = httpClient.execute(httpGet);

            InputStream inputStream = httpResponse.getEntity().getContent();

            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);

            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

            StringBuilder stringBuilder = new StringBuilder();

            String bufferedStrChunk = null;

            while((bufferedStrChunk = bufferedReader.readLine()) != null){
                    stringBuilder.append(bufferedStrChunk);
                }
            Firendslist_Detail(stringBuilder.toString());
            } catch (ClientProtocolException cpe) {
                System.out.println("Exception generates caz of httpResponse :" + cpe);
                cpe.printStackTrace();
            } catch (IOException ioe) {
                System.out.println("Second exception generates caz of httpResponse :" + ioe);
                ioe.printStackTrace();
            }

    }       

    public void Firendslist_Detail(String response){
        try{
            JSONArray jsonarray = new JSONArray(response);
            JSONObject jsonobject = jsonarray.getJSONObject(0);
            String Friendid_ = jsonobject.getString("id");
            String Friendpic_ = jsonobject.getString("profile_image_url");
            String Friendname_ = jsonobject.getString("name");
            String FriendScreename_ = jsonobject.getString("screen_name");
        }catch (Exception e) {
            Log.d("A3", "7");
        }
    } 
```

// 现在你已经有了 Friend ScreenName (FriendScreename_)。这个 ScreenName 用于将推文发布到 paticuler Friend

```
public  int postToTwitteragain(final String msg,String FriendScreenname) {
        try {
              String message = msg+"\u0040"+FriendScreenname;  //there has not white space between unicode of @ and Scrrenname      
            ConfigurationBuilder confbuilder  = new ConfigurationBuilder(); 
            confbuilder.setOAuthAccessToken(TwitterSession.token).setOAuthAccessTokenSecret(TwitterSession.tokenSecret) 
                      .setOAuthConsumerKey(twitter_consumer_key).setOAuthConsumerSecret(twitter_secret_key); 
            Twitter twitter = new TwitterFactory().getOAuthAuthorizedInstance(twitter_consumer_key,twitter_secret_key,TwitterApp.mAccessToken);
            Log.d("review size","review"+message.length());
            Status status = (Status) twitter.updateStatus(message);
          Log.d("status",":"+status.toString());
                 return 1;

         } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }

       } 
```

**//推特类**

```
public class TwitterApp {
    private Twitter mTwitter;
    private static TwitterSession mSession;
    public static  AccessToken mAccessToken;
    private CommonsHttpOAuthConsumer mHttpOauthConsumer;
    private OAuthProvider mHttpOauthprovider;
    private String mConsumerKey;
    private String mSecretKey;
    private ProgressDialog mProgressDlg;
    private TwDialogListener mListener;
    private Context context;
    private static final String TAG = "TwitterApp";
    static String oauth_verifier ;
    protected static String UserName = null,UeserID = null;
    static String   OAUTH_CALLBACK_URL      = "twitterapp://connect";
    public static final String REQUEST_URL = "https://api.twitter.com/oauth/request_token";
    public static final String ACCESS_URL = "http://api.twitter.com/oauth/access_token";
    public static final String AUTHORIZE_URL = "http://api.twitter.com/oauth/authorize";
    public TwitterApp(Context context, String consumerKey, String secretKey) {
        this.context    = context;

        mTwitter        = new TwitterFactory().getInstance();
        mSession        = new TwitterSession(context);
        mProgressDlg    = new ProgressDialog(context);
        mProgressDlg.requestWindowFeature(Window.FEATURE_NO_TITLE);

        mConsumerKey    = consumerKey;
        mSecretKey      = secretKey;

        mHttpOauthConsumer = new CommonsHttpOAuthConsumer(mConsumerKey, mSecretKey);
        mHttpOauthprovider = new DefaultOAuthProvider(REQUEST_URL,ACCESS_URL,AUTHORIZE_URL);

        mAccessToken    = mSession.getAccessToken();

        configureToken();
    }

    public void setListener(TwDialogListener listener) {
        mListener = listener;
    }

    private void configureToken() {
        if (mAccessToken != null) {
            mTwitter.setOAuthConsumer(mConsumerKey, mSecretKey);
            mTwitter.setOAuthAccessToken(mAccessToken);
        }
    }

    public boolean hasAccessToken() {
        return (mAccessToken == null) ? false : true;
    }

    public static void resetAccessToken() {
        if (mAccessToken != null) {
            mSession.resetAccessToken();

            mAccessToken = null;
        }
    }
    public static void logoutTwitter(Context context) {
        resetAccessToken();
        @SuppressWarnings("unused")
        CookieSyncManager cookieSyncMngr = CookieSyncManager.createInstance(context);
        CookieManager cookieManager = CookieManager.getInstance();
        cookieManager.removeAllCookie();
    }

    public String getUsername() {
        return mSession.getUsername();
    }

    public void updateStatus(String status) throws Exception {
        try {
            mTwitter.updateStatus(status);
        } catch (TwitterException e) {
            throw e;
        }
    }

    public void authorize() {
        mProgressDlg.setMessage("Initializing ...");
        mProgressDlg.show();

        new Thread() {
            @Override
            public void run() {
                String authUrl = "";
                int what = 1;

                try {
                    authUrl = mHttpOauthprovider.retrieveRequestToken(mHttpOauthConsumer, OAUTH_CALLBACK_URL);  

                    what = 0;
                    Log.d(TAG, "Request token url " + authUrl);

                } catch (Exception e) {
                    Log.d(TAG, "Failed to get request token");

                    e.printStackTrace();
                }

                mHandler.sendMessage(mHandler.obtainMessage(what, 1, 0, authUrl));
            }
        }.start();
    }

    public void processToken(String callbackUrl)  {
        mProgressDlg.setMessage("Finalizing ...");
        mProgressDlg.show();

        final String verifier = getVerifier(callbackUrl);

        new Thread() {
            @Override
            public void run() {
                int what = 1;

                try {
                    mHttpOauthprovider.retrieveAccessToken(mHttpOauthConsumer, verifier);

                    mAccessToken = new AccessToken(mHttpOauthConsumer.getToken(), mHttpOauthConsumer.getTokenSecret());

                    configureToken();

                    User user = mTwitter.verifyCredentials();
                    mSession.storeAccessToken(mAccessToken, user.getName());
                    UserName = user.getName();
                    Log.d("user name",""+UserName);
                    Log.d("user ID",""+user.getId());
                    HttpParameters params1 = mHttpOauthprovider.getResponseParameters();
                    String screen_name = params1.getFirst("screen_name");
                    Log.d("screen_name >>>>>>>>", screen_name);

                    oauth_verifier = verifier;
                   what = 0;
                } catch (Exception e){
                    Log.d(TAG, "Error getting access token");

                    e.printStackTrace();
                }

                mHandler.sendMessage(mHandler.obtainMessage(what, 2, 0));
            }
        }.start();
    }

    private String getVerifier(String callbackUrl) {
        String verifier  = "";

        try {
            callbackUrl = callbackUrl.replace("twitterapp", "http");

            URL url         = new URL(callbackUrl);
            String query    = url.getQuery();

            String array[]  = query.split("&");

            for (String parameter : array) {
                 String v[] = parameter.split("=");

                 if (URLDecoder.decode(v[0]).equals(oauth.signpost.OAuth.OAUTH_VERIFIER)) {
                     verifier = URLDecoder.decode(v[1]);
                     break;
                 }
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        return verifier;
    }

    private void showLoginDialog(String url) {
        final TwDialogListener listener = new TwDialogListener() {
            @Override
            public void onComplete(String value) {
                processToken(value);
            }

            @Override
            public void onError(String value) {
                mListener.onError("Failed opening authorization page");
            }
        };

        new TwitterDialog(context, url, listener).show();
    }

    @SuppressLint("HandlerLeak")
    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            mProgressDlg.dismiss();

            if (msg.what == 1) {
                if (msg.arg1 == 1)
                    mListener.onError("Error getting request token");
                else
                    mListener.onError("Error getting access token");
            } else {
                if (msg.arg1 == 1)
                    showLoginDialog((String) msg.obj);
                else
                    mListener.onComplete("");
            }
        }
    };

     public interface TwDialogListener {

            void onComplete(String value);

            void onError(String value);

        }

} 
```

**TwitterDialog 类**

```
public class TwitterDialog extends Dialog {
    static final float[] DIMENSIONS_LANDSCAPE = {460, 260};
    static final float[] DIMENSIONS_PORTRAIT = {280, 420};
    static final FrameLayout.LayoutParams FILL = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
                                                ViewGroup.LayoutParams.FILL_PARENT);
    static final int MARGIN = 4;
    static final int PADDING = 2;
    private String mUrl;
    private TwDialogListener mListener;
    private ProgressDialog mSpinner;
    private WebView mWebView;
    private LinearLayout mContent;
    private TextView mTitle;
    private static final String TAG = "Twitter-WebView";

    public TwitterDialog(Context context, String url, TwDialogListener listener) {
        super(context);

        mUrl        = url;
        mListener   = listener;
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mSpinner = new ProgressDialog(getContext());

        mSpinner.requestWindowFeature(Window.FEATURE_NO_TITLE);
        mSpinner.setMessage("Loading...");
        mContent = new LinearLayout(getContext());

        mContent.setOrientation(LinearLayout.VERTICAL);

        setUpTitle();
        setUpWebView();

        Display display     = getWindow().getWindowManager().getDefaultDisplay();
        final float scale   = getContext().getResources().getDisplayMetrics().density;
        float[] dimensions  = (display.getWidth() < display.getHeight()) ? DIMENSIONS_PORTRAIT : DIMENSIONS_LANDSCAPE;

        addContentView(mContent, new FrameLayout.LayoutParams((int) (dimensions[0] * scale + 0.5f),
                                    (int) (dimensions[1] * scale + 0.5f)));
    }
    private void setUpTitle() {
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        Drawable icon = getContext().getResources().getDrawable(R.drawable.twitter_icon);

        mTitle = new TextView(getContext());

        mTitle.setText("Twitter");
        mTitle.setTextColor(Color.WHITE);
        mTitle.setTypeface(Typeface.DEFAULT_BOLD);
        mTitle.setBackgroundColor(0xFFbbd7e9);
        mTitle.setPadding(MARGIN + PADDING, MARGIN, MARGIN, MARGIN);
        mTitle.setCompoundDrawablePadding(MARGIN + PADDING);
        mTitle.setCompoundDrawablesWithIntrinsicBounds(icon, null, null, null);

        mContent.addView(mTitle);
    }
    private void setUpWebView() {
        mWebView = new WebView(getContext());

        mWebView.setVerticalScrollBarEnabled(false);
        mWebView.setHorizontalScrollBarEnabled(false);
        mWebView.setWebViewClient(new TwitterWebViewClient());
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl(mUrl);
        mWebView.setLayoutParams(FILL);

        mContent.addView(mWebView);
    }
    private class TwitterWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Log.d(TAG, "Redirecting URL " + url);

            if (url.startsWith(TwitterApp.OAUTH_CALLBACK_URL)) {
                mListener.onComplete(url);

                TwitterDialog.this.dismiss();

                return true;
            }  else if (url.startsWith("authorize")) {
                return false;
            }

            return true;
        }
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Log.d(TAG, "Page error: " + description);

            super.onReceivedError(view, errorCode, description, failingUrl);

            mListener.onError(description);

            TwitterDialog.this.dismiss();
        }
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            Log.d(TAG, "Loading URL: " + url);
            super.onPageStarted(view, url, favicon);
            mSpinner.show();
        }
        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            String title = mWebView.getTitle();
            if (title != null && title.length() > 0) {
                mTitle.setText(title);
            }
            mSpinner.dismiss();
        }
    }
}** 
```

**推特会话**

```
public class TwitterSession {
    private SharedPreferences sharedPref;
    private Editor editor;
    static String token,tokenSecret; 
    private static final String TWEET_AUTH_KEY = "auth_key";
    private static final String TWEET_AUTH_SECRET_KEY = "auth_secret_key";
    private static final String TWEET_USER_NAME = "user_name";
    private static final String SHARED = "Twitter_Preferences";

    public TwitterSession(Context context) {
        sharedPref    = context.getSharedPreferences(SHARED, Context.MODE_PRIVATE);

        editor        = sharedPref.edit();
    }

    public void storeAccessToken(AccessToken accessToken, String username) {
        editor.putString(TWEET_AUTH_KEY, accessToken.getToken());
        editor.putString(TWEET_AUTH_SECRET_KEY, accessToken.getTokenSecret());
        editor.putString(TWEET_USER_NAME, username);

        editor.commit();
    }

    public void resetAccessToken() {
        editor.putString(TWEET_AUTH_KEY, null);
        editor.putString(TWEET_AUTH_SECRET_KEY, null);
        editor.putString(TWEET_USER_NAME, null);
        editor.commit();
    }

    public String getUsername() {
        return sharedPref.getString(TWEET_USER_NAME, "");
    }

    public AccessToken getAccessToken() {
        token       = sharedPref.getString(TWEET_AUTH_KEY, null);
        tokenSecret     = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

        if (token != null && tokenSecret != null) 
            return new AccessToken(token, tokenSecret);
        else
            return null;
    }
} 
```

**以下jar文件使用**

1.  路标-commonshttp4-1.2.1.1.jar
2.  路标核心1.2.1.1.jar
3.  twitter4j-core-2.1.11.jar

在哪里 。Friend_ID 是 String Arraylist.. 我希望这段代码可以帮助你。享受这段代码！

# html - 按钮文本与查询字符串中提交的值不同

> ID：13134631
> 
> 赞同：5
> 
> 时间：2012-10-30T07:43:02.347
> 
> 标签：html

**精简版：**

如何在*不*使用`<button>`标签的情况下让表单的按钮标签文本与提交给服务器的值不同？

**长版：**

我想让表单中按钮中出现的文本与查询字符串中提交的值不同。所以，我环顾四周，发现了这种方法......

```
<button name="method" type="submit" value="repackage">Update Config</button> 
```

...这在我的一台笔记本电脑上的 IE9 上工作，我很高兴。`method=repackage`用户在查询字符串中看到“更新配置”和服务器。

然后我把这个应用程序带入工作并在工作站上运行它，同样使用 IE9。但是出了点问题。用户仍然看到“更新配置”，但服务器现在收到`method=Update%20Config`了查询字符串。

所以我又调查了一些。我发现 www.w3schools.com 建议不要`<button>`在表单中使用标签。他们说：“如果你`<button>`在 HTML 表单中使用元素，不同的浏览器可能会提交不同的值。用于`<input>`在 HTML 表单中创建按钮”在[这篇文章中](http://www.w3schools.com/tags/tag_button.asp)。这似乎是我正在经历的。

所以我又看了一些，发现很多关于正确方法的相互矛盾的信息。例如[，这是一个 Stack Overflow 帖子](https://stackoverflow.com/questions/5701831/input-type-button-label-vs-value)，它准确地提出了这个问题，但接受的答案是使用`<button>`标签。我可以从经验和研究中说，这不是一种可靠的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-28T03:08:45.600

对于新手：使用一些 CSS，截至 2017 年 9 月，这就像一个魅力：

```
<form>
    <label style="padding:5px; cursor:pointer; border:solid 1px; border-color:#ccc">
    	<input style="display:none" type="submit" name="method" value="repackage">
    	<span>Update Config</span>
    </label>
</form>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:09:10.580

如果没有其他方法试试这个：

使用**图像按钮**，而不是按钮。图像按钮将作为普通提交按钮工作，但您创建所需按钮文本的图像（那时没有人可以更改您的文本）。

```
 <input type="image" src="http://images.webestools.com/buttons.php?frm=2&btn_type=31&txt=Update+Config" name="method" value="repackage"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-10T19:24:44.490

这也有效。使用引导按钮类操作外观。

```
<label class="btn btn-primary">
 <input class="d-none" type="submit" name="method" value="repackage">
 Update Config
</label> 
```

# c# - 控制何时加载引用的 .NET 程序集

> ID：13134632
> 
> 赞同：4
> 
> 时间：2012-10-30T07:43:04.330
> 
> 标签：c#, .net, reflection, .net-assembly

通常，当执行被引用程序集中的类型的第一个方法时，会加载程序集的被引用程序集。

在应用程序流可以容忍延迟的点强制加载所有引用的程序集以避免它在可能无法容忍的进一步执行中（例如，在时间关键的方法中）是否有意义？

如果是，那么最好的方法是什么？（反射， ...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-02T13:13:37.220

我现在雇主的一个产品从入口程序集的目录中获取所有 DLL 的列表。然后它使用`Assembly.LoadFrom`. 它在启动画面启动时执行此操作。坦率地说，代码让我害怕。我们不得不采取一些技巧来避免某些 DLL。在更新之前，我们必须更改安装程序以清除目标目录。这是一个非常不安全的计划。

在之前的工作中，我编写了一个使用该`GetReferencedAssemblies`方法的类似函数。从入口程序集开始，它会递归调用`Assembly.LoadFrom`. 它会在加载我们产品未附带的程序集后停止递归。它奏效了，但我认为这是不必要的。

在我目前工作的产品中，我们使用 Autofac 为应用程序构建完整的依赖关系树。用于配置的引导程序代码引用了整个项目中的所有服务——我猜这至少占代码的 70%。同样，这是在启动画面启动时触发的。这是正确的做法。它平衡了“加载必需品”与“花时间加载所有东西，包括可能永远不会使用的东西”。

# clojure - 在clojure的代理中覆盖多参数方法

> ID：13134633
> 
> 赞同：6
> 
> 时间：2012-10-30T07:43:10.893
> 
> 标签：clojure, overloading, arity

我有一个 java 类，它有 2 个方法具有相同但不同的参数（一个不带参数，另一个带 1 个参数）。我创建了一个覆盖这两种方法的代理。问题是，如果从这个 java 类调用无参数方法 - 调用基本实现而不是代理。但是，如果我直接在 obj 上调用无参数方法 - 将调用正确的代理方法。有人可以解释这种行为吗？

测试.java：

```
package example;

public abstract class Test {

    public void callMethods(Object obj){
        callMethods();
        callMethods2();
    }

    public void callMethods() {
        System.out.println("Default callMethods");
    }

    public void callMethods2() {
        System.out.println("Default callMethods2");
    }

} 
```

运行.clj：

```
(let [obj (proxy [example.Test] []
            (callMethods
              ([] (println "Overridden callMethods"))
              ([obj] (proxy-super callMethods obj)))
            (callMethods2
              ([] (println "Overridden callMethods2"))))]
  (.callMethods obj)
  (.callMethods obj :test)) 
```

输出：

```
Overridden callMethods
Default callMethods
Overridden callMethods2 
```

预期输出：

```
Overridden callMethods
Overridden callMethods
Overridden callMethods2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T09:39:14.747

Proxy 维护一个它为这个对象代理的方法的映射。它使用它的方法处理此映射中的任何调用，其他调用则调用该对象。`proxy-super`通过从函数方法映射中移除自身、调用自身并将自身放回后缀，这是否很神奇。在调用期间，对代理对象的该方法的任何调用都将落入代理对象。

*   第一行输出来自代理调用，您会看到被覆盖的输出
*   第二行来自带有零参数的超级方法，因为当调用发生时，覆盖方法不在对象代理方法映射中。
*   第三行被代理，因为该方法在对象代理方法映射中。

[Meikel Brandmeyer 在这篇文章](http://kotka.de/blog/2010/03/proxy_gen-class_little_brother.html)的末尾描述了一个非常相似的场景。我怀疑答案是使用 gen-class 而不是代理

# java - java - 如何在没有数据库的情况下管理java中的序列？

> ID：13134636
> 
> 赞同：1
> 
> 时间：2012-10-30T07:43:18.960
> 
> 标签：java, spring, cxf

场景如下：

我正在使用 Apache CXF 向客户端公开 Web 服务。收到请求并处理后，我需要在处理后的消息头中添加一个序列号，并通过MQ将其转发给另一个程序。我也使用 Spring 来处理 bean 管理和注入。

在不使用数据库的情况下管理序列的最佳方法是什么（因为仅为序列管理安装数据库似乎有巨大的开销和膨胀）。如果解决方案是使用文件（属性文件？），如果发生任何异常，我该如何选择一致性？当多个请求同时到达时，我还需要序列保持一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:56:51.527

如果一切都在同一个类加载器中工作，您可以使用[AtomicLong](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html)私有字段创建一个单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:53:19.790

既然您将使用 MQ 进行转发，为什么不只使用 MQ 排序机制而不是自己跟踪呢？

如果你想自己跟踪，你应该研究一个（同步的）单例分配数字。如果你想在重启后保持序列，你*将*需要一个持久性机制（尽管不一定是数据库）。我确信可以设计一个 MQ 队列来提供这项服务，尽管它会非常不成比例;-)

因此，首先看一下 MQ 排序。

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:57:03.483

如果该服务只有一个实例，则来自 的时间戳`System.currentTimeMillis()`，这对于大多数情况应该足够了。如果您可以使用字符串作为标识符，我建议您使用时间戳字符串，加上以 nanos 为单位的时间。如果您有多个同时提供服务的 Web 服务实例，您可能需要一个单数计数器：

```
private static long counter = 0;
private static synchronized long nextCounter() {
    return counter++;
} 
```

（当然，您需要检查是否有溢出）

大多数时候，我将两者结合使用。

# sql - 获取创建记录的第一个日期

> ID：13134638
> 
> 赞同：1
> 
> 时间：2012-10-30T07:43:23.160
> 
> 标签：sql

我有一个查询，我需要在其中显示首先创建客户信息记录的用户。请参阅下面的查询：

```
 select CustID, Title, Firstname, Surname, IDNumber, min(ModifyDate) as ModDate, sUsername
from Customers
where StatusCode = 'PI'
group by CustlD,Title,Firstname,Surname,IDNumber,sUsername 
```

我的结果如下所示：

```
1    MR    CHARL    8607295    2012-10-23 14:20:31.407   User1
1    MR    CHARL    8607295    2012-10-24 12:36:09.023   User2
2    MISS  XABA     8307297    2012-10-23 14:23:08.593   User1
2    MISS  XABA     8307297    2012-10-24 14:57:29.603   User2 
```

我只需要第一条记录和第三条记录。知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:54:15.050

假设您使用的数据库系统支持`ROW_NUMBER()`（现代版本的 Oracle、SQL Server、PostgreSQL 等）：

```
select CustID, Title, Firstname, Surname, IDNumber, ModifyDate, sUsername
from (
   select
      *,
      ROW_NUMBER() OVER (
          PARTITION BY CustID
          ORDER BY ModifyDate) rn
   from Customers) c
where StatusCode = 'PI' and rn=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:55:44.833

试试这个：

```
SELECT 
   c1.CustID, 
   c1.Title, 
   c1.Firstname, 
   c1.Surname, 
   c1.IDNumber, 
   c2.ModDate, 
    c1.sUsername
FROM Customers c1
INNER JOIN
(
    SELECT CustID, min(ModifyDate) AS ModDate
    FROM Customers
    GROUP BY CustID
) c2 ON c1.CustID = c2.custID AND c1.ModifyDate = c2.ModDate
WHERE c1.StatusCode = 'PI' 
```

但是，如果您使用的是 SQL-Server，那么您可以使用[@Damien_The_Unbeliever 的答案](https://stackoverflow.com/a/13134756/722783)`ROW_NUMBER`来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:48:34.293

```
select CustID, c1.Title, Firstname, Surname, IDNumber, ModifyDate as ModDate, sUsername
from Customers  c
where StatusCode = 'PI' and c.ModifyDate = (SELECT TOP 1 ModifyDate FROM Customers c_ WHERE c_.CustID = c.CustID ORDER BY ModifyDate ASC) 
```

更新：

```
select CustID, Firstname, Surname, IDNumber, ModifyDate as ModDate, sUsername
from dbo.test32  c
where c.ModifyDate = (SELECT TOP 1 ModifyDate
                      FROM (
                            SELECT CustID, ModifyDate, CASE WHEN sUserName = 'User1' THEN ROW_NUMBER() OVER (PARTITION BY sUserName ORDER BY ModifyDate ASC) ELSE 2 END AS sn
                            FROM dbo.test32
                            ) c_
                      WHERE c_.sn > 1 AND c_.CustID = c.CustID ORDER BY ModifyDate ASC) 
```

# c# - 将复选框动态添加到 asp.net

> ID：13134641
> 
> 赞同：1
> 
> 时间：2012-10-30T07:43:33.500
> 
> 标签：c#, asp.net

我正在尝试将复选框动态添加到网页

```
 string[] words = masg.Split('~');
            int size = words.Length;
            CheckBox[] cbl = new CheckBox[size];
            for (int i = 0; i < words.Length; i++)
            {
                cbl[i] = new CheckBox();
                cbl[i].Text = words[i].ToString();
                this.Controls.Add(cbl[i]);  
               // Response.Write("\n" + words[i]);
            } 
```

我收到错误

> **“CheckBox”类型的控件“ctl01”必须放在带有 runat=server 的表单标记内。**

我应该如何进行？在 aspx 页面上进行哪些更改？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:46:38.117

您应该将其更改为添加表单，因为`this`正在引用您的页面。并且您正在以编程方式创建或通过在页面上添加的任何服务器控件`runat="server"`都应放置在表单标记内。

喜欢

```
this.Form.Controls.Add(cbl[i]); 
```

或在表单上放置一个占位符或面板。而且你可以添加它

喜欢

```
placeholder1.Controls.Add(cbl[i]); 
```

如果您的 .aspx 不包含表单标签，那么您应该在那里放置一个表单标签

喜欢

```
<form runat="server" id="form1">

 //Other mark up or server controls.

</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:51:37.757

嗨，您需要在表单上添加一个父控件，例如 Panel，然后将您的复选框控件添加到该面板

```
string[] words = masg.Split('~');
        int size = words.Length;
        CheckBox[] cbl = new CheckBox[size];
        for (int i = 0; i < words.Length; i++)
        {
            cbl[i] = new CheckBox();
            cbl[i].Text = words[i].ToString();
            pnlControls.Controls.Add(cbl[i]); 
           // Response.Write("\n" + words[i]);
        } 
```

在您的 aspx 页面中添加面板控件：

```
<asp:Panel ID="pnlControls" runat="server" > 
```

# java - 编写一个计算指数的程序

> ID：13134643
> 
> 赞同：3
> 
> 时间：2012-10-30T07:43:37.560
> 
> 标签：java, math

我正在尝试编写一个程序来打印数字 2 的指数结果，并且我想将其打印 10 次。我想创建一个使用 Math.pow(x,y) 方法计算指数值的方法。

2 的 0 次方 = 1
2 的 1 次方 = 2
2 的 2 次方 = 4

我有一些问题。你能像我在下面那样在 for 循环中使用 Math.pow 方法吗？如何在 for 循环内的 Math.pow(x, y) 方法中声明 x 和 y 的值，还是必须在 for 循环外进行？此外，在 Eclipse 的 raiseIntPower 方法中，当我使用 int n 作为参数时，它会给我一个“重复的局部变量错误”。我的理解是方法参数指定了方法需要的参数。我不明白那个重复错误的含义。

```
import acm.program.*;

public class Exponents extends ConsoleProgram {

  public void run(){
      for (int n = 0; n <= 10; n++) {

            println("2 to the power of " + n + " = " + raiseIntPower(n)); 

     } 

  }
private int raiseIntPower (int n){
   int total = 0;
   for( int n = 0; n <= 10; n++){
     total = Math.pow(2, n);

  } 

return total; 
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T07:49:56.493

我不明白你想做什么

只需替换语句

```
println("2 to the power of " + n + " = " + raiseIntPower(n)); 
```

和

```
println("2 to the power of " + n + " = " + Math.pow(2,n)); 
```

它应该这样做，不需要`raiseIntPower()`

我认为您对 的用法感到困惑`Math.pow()`，请参阅此处以获取说明[Math.pow()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#pow%28double,%20double%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:48:14.433

`Math#pow(double a, double b)`其中a是底数，b是指数，它返回双精度，所以如果你想放弃精度，那么你必须格式化返回值。 `a^b`

您可以删除 raiseIntPower 方法。

```
for (int n = 0; n <= 10; n++) {
     println("2 to the power of " + n + " = " + Math.pow(2,n)); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:04:13.387

检查这个

```
import acm.program.*;

public class Exponents extends ConsoleProgram {

  public void run(){
      for (int n = 0; n <= 10; n++) {

            println("2 to the power of " + n + " = " + raiseIntPower(n)); 

     } 

  }
private int raiseIntPower (int n){
   int total = 0;   
   total = (int)Math.pow(2, n);

   return total; 
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:02:46.493

Eclipse 给你一个“重复的局部变量错误”，因为有一个重复的变量。

```
private int raiseIntPower (int n){
    int total = 0;
    for( int n = 0; n <= 10; n++){
        total = Math.pow(2, n);
    } 
    return total; 
} 
```

您声明了一个变量 n 用于输入。在 for 循环中，您声明了另一个变量 n。for 循环中对其的`int n`and 引用应更改为另一个名称，例如`int i`.

# sql-server - 如何将视图的 sys.columns 加入它在 T-SQL 中引用的表的 sys.columns？

> ID：13134649
> 
> 赞同：2
> 
> 时间：2012-10-30T07:44:39.900
> 
> 标签：sql-server, tsql

我正在尝试将**sys.columns**中的记录加入到视图中，加入到它所引用的表的**sys.columns**中的记录中，因为我需要在视图中选择的列的**is_nullable**、**is_computed**和**default_object_id**列的值。

视图的**sys.columns**记录具有“不正确”的值，您可以通过运行以下示例查询来观察：

```
CREATE TABLE TestTable (
    FieldA int NOT NULL,
    FieldB int DEFAULT (1),
    FieldC as CONVERT(INT, FieldA + FieldB),
    FieldD int NOT NULL
)
GO

CREATE VIEW TestView WITH SCHEMABINDING AS
SELECT  FieldA, FieldC as TestC, FieldB + FieldC as TestD
FROM dbo.TestTable WHERE FieldD = 1
GO

SELECT  OBJECT_NAME(c.object_id) as ViewName, c.name as ColumnName,
        c.is_nullable as Nullable, c.is_computed as Computed,
   cast(CASE WHEN c.default_object_id > 0 THEN 1 ELSE 0 END as bit) as HasDefault
FROM sys.columns c
WHERE object_id = OBJECT_ID('TestTable')
GO

SELECT  OBJECT_NAME(c.object_id) as ViewName, c.name as ColumnName,
        c.is_nullable as Nullable, c.is_computed as Computed,
   cast(CASE WHEN c.default_object_id > 0 THEN 1 ELSE 0 END as bit) as HasDefault
FROM sys.columns c
WHERE object_id = OBJECT_ID('TestView')
GO 
```

我曾尝试使用系统视图来加入依赖项，但它们没有为我们提供有关视图中的哪一列引用表中的哪一列的信息：

```
-- dm_sql_referenced_entities gives us all columns referenced, but all records
-- have referencing_minor_id 0, so we do not know which column refers to what
SELECT * FROM sys.dm_sql_referenced_entities('dbo.TestView', 'OBJECT')
GO

-- sql_dependencies gives us all columns referenced, but all records has
-- column_id 0 so we can not use this either of joining the columns
SELECT * FROM sys.sql_dependencies WHERE object_id = OBJECT_ID('TestView')
GO

-- sql_expression_dependencies just tells us what table we are referencing 
-- if view is not created WITH SCHEMABINDING. If it is, it will return columns,
-- but with referencing_minor_id 0 for all records, so not able use this either
SELECT * FROM sys.sql_expression_dependencies
    WHERE referencing_id = OBJECT_ID('TestView')
GO 
```

某人提交的关于social.msdn 的未答复帖子似乎是同一问题： [http ://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/4ae5869f-bf64-4eef-a952-9ac40c932cd4](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/4ae5869f-bf64-4eef-a952-9ac40c932cd4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:26:38.237

您说“我需要知道 TestView TestC 指的是计算列”。SQL Server 2008 R2 不支持此功能（虽然不确定 2012，但我对此表示怀疑）。

首先，您可以查询 sys.columns 或 INFORMATION_SCHEMA.COLUMNS 并且找不到您想要的。

如果你深入挖掘，你很可能会尝试 sys.sql_expression_dependencies 和 sys.dm_sql_referenced_entities (N'dbo.TestView', N'OBJECT')，但是你可以在那里找到表-列映射，而不是列-列。SQL 服务器通过“高级”对象（表、触发器...）而不是其详细信息（列）存储依赖关系信息。您会在 sys.sysdepends 中找到相同的内容。事实上，依赖信息在 SQL Server 中是不可靠的。

最后，您唯一的可能就是自己解析视图主体。它可以在 sys.sql_modules 中找到：

```
SELECT m.definition
FROM 
    sys.objects o
    JOIN sys.sql_modules m 
        ON m.object_id = o.object_id
WHERE 
    o.object_id = object_id('dbo.TestView')
    and o.type = 'V' 
```

解析 T-SQL*非常*困难，它真的可以把你推到你努力的极限。例如，从视图中获取表引用应该或多或少容易，然后是表列，特别是如果您的视图是模式绑定的。但如果不是，那么……想想引用 OUTER APPLY 的星号，它引用递归 CTE……

无论如何，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T23:36:00.793

目前，当创建视图时，有两个高级操作发生 - 解析和绑定。解析基本上是检查语句、关键字等的语法。绑定是将语句中的标识符（对象名、列名）映射到相应的对象（表、视图、函数、列等）和类型派生的过程。此外，在类似于 SELECT 语句的视图的情况下，您可以选择在 SELECT 列表中或在视图名称之后使用列引用和表达式的别名（例如：create view v1(a) as select i from t）。

绑定后，我们只保留元数据中的列别名和派生类型，因为视图在逻辑上是从查询表达式派生的表。因此，目前无法确定列别名映射到的表达式或其包含的内容（列或函数或文字等）。获取您要查找的信息的唯一方法是解析视图定义并执行您自己的绑定. 我相信我们已经有一个错误可以跟踪功能请求，以公开更丰富的依赖关系信息，这些信息涉及别名到视图定义中的列表达式的映射。

最后，SQL Server Developer Studio 或 Visual Studio 数据库项目使用托管 T-SQL 解析器来跟踪此类引用，以便您可以使用项目进行重构或重命名。希望这有助于澄清问题/当前的实施。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-11T00:00:04.570

似乎误解是 object_id 是 sys.columns 中的主键的假设。它不是。sys.columns 中的 object_id 与 sys.objects 中的 object_id 相关。所以：

```
SELECT C.*
FROM sys.objects T
INNER JOIN sys.columns C
ON T.object_id = C.object_id
WHERE T.type in ('S','U') -- System Tables and User Tables
AND T.name = 'Address' -- Table Name
order by C.Column_ID 
```

将返回 AdventureWorks 中“地址”表中的列。

# php - YII 中的数据库方法

> ID：13134651
> 
> 赞同：1
> 
> 时间：2012-10-30T07:44:59.103
> 
> 标签：php, activerecord, yii, dao, query-builder

我正在开发我的第一个 YII 网站。我对 YII 数据库有几个疑问。

yii中有三种查询数据库的方法。

*   数据库访问对象
*   查询生成器
*   活动记录

* * *

1.  在这三种方法中，哪一种是安全且最受青睐的方法？
2.  如果我有自定义查询来执行我应该更喜欢哪种方法？
3.  在查询生成器查询的情况下，我们明确选择表

    ```
     $user = Yii::app()->db->createCommand()
            ->select('id, username, profile')
            ->from('tbl_user') // explicitly choosing the table
            ->join('tbl_profile p', 'u.id=p.user_id')
            ->where('id=:id', array(':id'=>$id))
            ->queryRow(); 
    ```

    那么我应该在哪里编写查询生成器查询？如果我将它们写在相应的表模型中，有什么好处吗？

4.  如果我使用 DAO 或查询构建器，应该使用哪个类来扩展我的模型？

5.  如果我遵循 DAO 方法或查询构建器方法，如何验证用户输入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T08:21:20.547

1.  要看。如果您知道如何安全地使用它们，那么所有这些都同样安全。

2.  道。这是我的意见。

3.  在模型中。

4.  Yii 中有两个主要的模型类。`CFormModel`和`CModel`。对于查询，请根据 CModel 扩展类。

只是最后的一个注释。DAO 是其中最快的。活动记录最慢。另一方面，主动记录更方便。你是需要决定什么应该是平衡的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:25:43.023

您可以使用[CActiveRecord](http://www.yiiframework.com/doc/api/1.1/CActiveRecord)来满足您的所有要求。

# javascript - 在没有字体格式的命令行中比较 word doc

> ID：13134652
> 
> 赞同：0
> 
> 时间：2012-10-30T07:44:59.133
> 
> 标签：javascript, vbscript, ms-word

我刚刚[在命令行解决方案中得到了比较词](https://stackoverflow.com/questions/2606467/open-ms-word-in-compare-document-mode-from-command-prompt)。并尝试通过 [TortoiseSVN 差异脚本](http://code.google.com/p/tortoisesvn/source/browse/trunk/contrib/diff-scripts/)(diff-doc.js) 比较两个单词文件，但我发现它显示了关于字体或段落设置的许多差异。

是否有任何关于如何修改 diff-doc.js 以忽略字体更改和忽略段落格式更改的代码示例？我只想在第一时间专注于文本内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:26:33.147

我不是 100% 确定你在问什么，但你可以在 vbscript 中做这样的事情：

```
strPath1 = [the location of the first file]
strPath2 = [the location of the second file]
strLog = [the location of a log file]

set ofs =  CreateObject("Scripting.FileSystemObject")

'create a log file
If Not oFs.FileExists(strLog) Then
    set logFile = oFs.CreateTextFile(strLog, true)
else
set logFile = oFs.openTextFile (strLog, 8, True)
End if

set file1 = ofs.openTextFile (strPath1)
strFile1Buffer = file1.readAll
file1.close

set file2 = ofs.openTextFile (strPath2)

do while not file2.atEndOfStream
    strLine = file2.readLine
    If InStr(strFile1Buffer, strLine) = 0 Then
        strLogEntry = strLogEntry & strLine & vbCrLf
    End If
Loop

file2.Close

strLogEntry = "Lines that are in file1 but not in file2:" & vbCrLf & strLogEntry

logFile.WriteLine strLogEntry
objFile3.Close 
```

看看这个：http: [//blogs.technet.com/b/heyscriptingguy/archive/2007/05/24/how-can-i-compare-the-contents-of-two-text-files.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2007/05/24/how-can-i-compare-the-contents-of-two-text-files.aspx)

# java - 如何在本地 XML 文件中使用 Android 中的 SAXparser 解析“img src”标签

> ID：13134660
> 
> 赞同：1
> 
> 时间：2012-10-30T07:45:24.393
> 
> 标签：java, android, xml, parsing

```
<description>
div class=&quot;field field-type-filefield field-field-book-review-image&quot;&gt;
    &lt;div class=&quot;field-items&quot;&gt;
            &lt;div class=&quot;field-item odd&quot;&gt;
                    &lt;img  class=&quot;imagefield imagefield-field_book_review_image&quot; width=&quot;500&quot; height=&quot;741&quot; alt=&quot;&quot; src=&quot;**http://sampada.net/files/good%20earth.JPG?1327387980**&quot; /&gt;        &

</description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:40:58.400

你最好使用 DOM 而不是 SAX。只需遍历所有名为“img”的元素，获取“src”属性，构建一个 URL 并触发一个 AsyncTask 来下载流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:22:17.973

如果你只想要一张图片，我会用这个：

```
static final String image_URL = "http://sampada.net/files/good%20earth.JPG?1327387980";

//in the oncreate

ImageView bmImage = (ImageView)findViewById(R.id.<<your image id from the xml>>);
BitmapFactory.Options bmOptions;
bmOptions = new BitmapFactory.Options();
bmOptions.inSampleSize = 1;
Bitmap bm = LoadImage(image_URL, bmOptions);
bmImage.setImageBitmap(bm);
//under the oncreate

private Bitmap LoadImage(String URL, BitmapFactory.Options options)
{       
    Bitmap bitmap = null;
    InputStream in = null;       
    try {
       in = OpenHttpConnection(URL);
       bitmap = BitmapFactory.decodeStream(in, null, options);
       in.close();
    } catch (IOException e1) {
    }
    return bitmap;               
}

private InputStream OpenHttpConnection(String strURL) throws IOException{
    InputStream inputStream = null;
    URL url = new URL(strURL);
    URLConnection conn = url.openConnection();

    try{
        HttpURLConnection httpConn = (HttpURLConnection)conn;
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
            inputStream = httpConn.getInputStream();
        }
    }
    catch (Exception ex)
    {
    }
    return inputStream;
} 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:57:50.173

尝试以下开源库：

[http://htmlcleaner.sourceforge.net/](http://htmlcleaner.sourceforge.net/)

以下是更多的 HTML 解析器：

[http://java-source.net/open-source/html-parsers](http://java-source.net/open-source/html-parsers)

# c# - End of Stream Parsing Error

> ID：13134667
> 
> 赞同：1
> 
> 时间：2012-10-30T07:45:43.100
> 
> 标签：c#

```
 public static Image Crop(Image imgPhoto, int Width, int Height, AnchorPosition Anchor)
        {
            if (imgPhoto == null)
            {
                return null;
            }
            int sourceWidth = imgPhoto.Width;
            int sourceHeight = imgPhoto.Height;
            int sourceX = 0;
            int sourceY = 0;
            int destX = 0;
            int destY = 0;

            float nPercent = 0;
            float nPercentW = 0;
            float nPercentH = 0;

            nPercentW = ((float)Width / (float)sourceWidth);
            nPercentH = ((float)Height / (float)sourceHeight);

            if (nPercentH < nPercentW)
            {
                nPercent = nPercentW;
                switch (Anchor)
                {
                    case AnchorPosition.Top:
                        destY = 0;
                        break;
                    case AnchorPosition.Bottom:
                        destY = (int)(Height - (sourceHeight * nPercent));
                        break;
                    default:
                        destY = (int)((Height - (sourceHeight * nPercent)) / 2);
                        break;
                }
            }
            else
            {
                nPercent = nPercentH;
                switch (Anchor)
                {
                    case AnchorPosition.Left:
                        destX = 0;
                        break;
                    case AnchorPosition.Right:
                        destX = (int)(Width - (sourceWidth * nPercent));
                        break;
                    default:
                        destX = (int)((Width - (sourceWidth * nPercent)) / 2);
                        break;
                }
            }

            int destWidth = (int)(sourceWidth * nPercent);
            int destHeight = (int)(sourceHeight * nPercent);

            Bitmap bmPhoto = new Bitmap(Width, Height, PixelFormat.Format24bppRgb);
            bmPhoto.SetResolution(imgPhoto.HorizontalResolution, imgPhoto.VerticalResolution);

            Graphics grPhoto = Graphics.FromImage(bmPhoto);
            grPhoto.InterpolationMode = InterpolationMode.HighQualityBicubic;

            grPhoto.DrawImage(imgPhoto,
                new Rectangle(destX, destY, destWidth, destHeight),
                new Rectangle(sourceX, sourceY, sourceWidth, sourceHeight),
                GraphicsUnit.Pixel);

            grPhoto.Dispose();
            return bmPhoto;
        }

     public byte[] ImageToByteArray(string path)
        {
            FileInfo info = new FileInfo(path);
            long sizeByte = info.Length;

            FileStream fs = new FileStream(path,FileMode.Open,FileAccess.Read);

            BinaryReader br = new BinaryReader(fs);

            byte[] data = br.ReadBytes((int) sizeByte);
            return  data;
        }

        public byte[] ImageToByteArray(Image img)
        {

            if (img == null)
                return null;

            BinaryFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream();
            bf.Serialize(ms, img);
            return ms.ToArray();

        }

    public Image BrowseImage(Image image)
        {
            OpenFileDialog open = new OpenFileDialog();
            open.FileName = string.Empty;

            open.Filter = "Image Files(*.png; *.jpg; *.jpeg; *.gif; *.bmp)|*.png; *.jpg;    *.jpeg; *.gif; *.bmp";
            if (open.ShowDialog() == DialogResult.OK)
            {
                Image img = new Bitmap(open.FileName);
                if ((img.Width < 200) || (img.Height < 200))
                {
                    MessageBox.Show("Minimum size is 200x200.");
                    BrowseImage(image);
                }
                else
                {
                    return img;
                }
            }
            return image;
        }

in saving image

     picItem.Image = Crop(BrowseImage(picItem.Image), 200, 200, ImageUtil.AnchorPosition.Center);

 //set Datatable row
    erow["Image"] = img.ImageToByteArray(picItem.Image);

 //Saving is ok

    //When i View
    picItem.Image = ByteArrayToImage((byte[])source.Image.binaryFromDB);

>Error: End of Stream encountered before parsing was completed? 
```

this is all the method ive use. i crop the image so that it will have a minimum size..ive tried any convertion but no help. i just want to save an image to database and when i view i can see the image in picture box.

@MarcGravell I found the problem. u right man.when i store the byte in datatable it stores a value System.Byte[] not the actual bytes.. when i get all the value in datatable and put it in a query "Insert into table values('System.Byte[]'). .it stores a string System.Byte" not the binary data..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:52:35.767

You've loaded all the data into the `MemoryStream` and rewound the stream - all good (although `new MemoryStream(byteArrayIn)` would have been easier).

This leaves one simple possibility: the array truly does not contain all of the data that it should have.

Check how you got the array, and all intermediary steps. In particular, add some debug code to note the length of the array *when you write it*, and check that you got all of it. If the length is the same, check that the **contents** are identical byte-for-byte (comparing the output of `Convert.ToBase64String` is probably the most convenient way of doing that for ad-hoc usage).

If you are writing streams, check a few things:

*   if using a `Stream.Read`/`Stream.Write` loop, check you are using the return value from `Read` correctly; or easier - just use `Stream.CopyTo` instead (this has a correctly-implemented `Read`/`Write` loop)
*   if using `MemoryStream`, make sure you understand the difference between `ToArray` and `GetBuffer`, and the implications of each
*   if you are transferring the data at any point, make sure you are treating it *as binary* at all times - never text. No `StreamReader` / `StreamWriter` / `Encoding` / `GetString` / anything like that

# matlab - 是否有内置函数来创建矩阵 m 使得 m(r,c) = fun(r,c)

> ID：13134669
> 
> 赞同：0
> 
> 时间：2012-10-30T07:45:47.947
> 
> 标签：matlab, matrix

我想让以下代码矢量化：（`fun`自定义函数在哪里）

```
m = zeros(R,C);
for r = 1:R
    for c = 1:C
        m(r,c) = fun(r,c);
    end
end 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:14:27.217

使用网格：

```
 N = 100 % grid points
 rangex=linspace(-2,2,N);
 rangey=linspace(-2,2,N);
 [x,y] = meshgrid(rangex,rangey);

 %G=fun(x,y);
 G= exp(-(x.^2+y.^2));
 imagesc(G) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T10:01:45.200

为了清楚起见，如果不接受向量（或矩阵）作为输入，**则没有通用的“向量化”解决方案。**`fun`

也就是说，我将添加到 nate 的答案中，并说如果`fun`不接受矩阵，您可以使用以下方法：

```
[Y, X] = meshgrid(1:R, 1:C);
m = arrayfun(@(r, c)fun(r, c), X, Y) 
```

但是您应该注意，这不是一个矢量化解决方案，因为它在引擎盖下`arrayfun`有一个`for`-loop，所以虽然它可能更漂亮，但它可能更慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:19:22.583

有几种方法可以做到这一点：

```
G = @(x,y) exp(-(x.*x+y.*y));

% using meshgrid 
% PROS: short, very fast, works only on functions that accept vector/matrix input
% CONST: very large memory footprint
[x,y] = meshgrid(-10:0.1:10);   
m = G(x,y);

% using arrayfun
% PROS: shorter notation than loop, works on functions taking only scalars
% CONS: can be prohibitively slow, especially when nested like this
m = cell2mat(...
    arrayfun(@(x)...
    arrayfun(@(y) G(x,y), -10:0.1:10),...
    -10:0.1:10, 'uniformoutput', false));

% using for-loop
% PROS: intuitive to most programmers, works on functions taking scalars only
% CONS: Boilerplate can grow large, can be slow when the function G(x,y)
%       is not "inlined" due to limitations in JIT
for ii = 1:R
    for jj = 1:C

        m(ii,jj) = exp(-(ii*ii+jj*jj)); % inlined

        m(ii,jj) = G(ii,jj); % NOT inlined (slower)

    end
end 
```

请注意，它`meshgrid`比`arrayfun`and 循环快得多，但有可能会填满你的内存，以至于不可能在`x`or`y`范围内使用这种方法来获得更高的分辨率（不诉诸某种块处理方案）。

我将在这里说明这`arrayfun`通常是要避免的事情，因为它通常比循环对应物慢得多，部分原因是循环的 JIT 加速，部分原因是匿名函数涉及的开销（嵌套三重，在这个案子）。

因此，对于`dblquad`您在评论中提到的示例：仅使用循环是最简单和最快的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:14:17.007

几个 Matlab 函数可以使用矩阵作为输入，它们为您提供矩阵作为输出。但如果乐趣是定制的，那就更容易了！您实际上可以`fun`接受矩阵作为输入（这当然取决于您在做什么，有时您不能，但大多数时候您可以）并且它会起作用。大多数时候，接受矩阵或仅数字的区别在于替换`*`（`.*`其他运算符也是如此）。尝试：

```
m=[]; %not necesary in this case
r=1:R;
c=1:C;
m=fun(r,c); 
```

# matlab - 将 2D 转换为具有不同维度的 2D 矩阵

> ID：13134678
> 
> 赞同：0
> 
> 时间：2012-10-30T07:46:47.417
> 
> 标签：matlab

我在 Matlab 中加载了具有以下属性的图像：

```
 Name(X)   , Size (512x512)  , Bytes (262144)  , Class(uint8) , 
```

我添加了高斯噪声并使用小波变换去除了该噪声。通过进行逆小波变换，我得到了最终的输出图像：

```
Name(Xsyn) , Size (504x504)  , Bytes (2032128) , Class(Double) 
```

现在我试图通过使用计算信噪比（SNR）

```
SNR = 20*log10(norm(X(:))/norm(X(:)-Xsyn(:))); 
```

但它显示以下错误：

```
??? Error using ==> minus
Matrix dimensions must agree. 
```

所以我认为我应该改变最终图像的矩阵尺寸（`Xsyn`）。现在如何将图像的矩阵尺寸`Xsyn`（504x504）更改为`Xsyn`尺寸（512x512）？

还是有其他方法可以找出 SNR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:23:42.887

鉴于您使用的函数没有保持矩阵原始大小的句柄（例如 conv2 可以使用 ( `conv2(Image,filer,'same')`) 输出相同大小的选项，您总是可以快速而肮脏地修复：

```
 X=imresize(X,size(Xsyn)); 
```

其余的将随之而来……

# android - 收到文件时在 android 上通知

> ID：13134679
> 
> 赞同：0
> 
> 时间：2012-10-30T07:47:01.550
> 
> 标签：android, image, file, notifications

我正在为图片查看器制作一个 Android 应用程序。我的问题是，当在特定文件夹中收到新图片时，我不知道如何收到新通知。收到新图片时，通知栏上如何显示通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:44:13.557

一种简单的方法是使用首选项并保存图片计数，然后定期检查该计数。如果计数大于存储在首选项中的值，则生成通知并更新首选项值，否则什么也不做。

# android - 卸载我自己的其他应用程序

> ID：13134681
> 
> 赞同：0
> 
> 时间：2012-10-30T07:47:17.790
> 
> 标签：android, permissions, uninstallation

我想知道是否可以从我自己的应用程序中卸载其他应用程序。Android 操作系统允许我们这样做吗？

我[在 stackoverflow 上遇到了类似的问题](https://stackoverflow.com/questions/12493032/is-it-possible-to-uninstall-one-android-application-from-other-application)。

但在上述问题中，应用 A 是系统管理员。就我而言，我的应用程序是一个普通的应用程序。系统管理员应用程序和普通应用程序有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:55:20.707

您可以在任何正常应用程序中使用其他问题中提到的相同代码。再次复制代码：

```
Uri packageUri = Uri.parse("package:com.mypackgage");  
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE,packageUri);  
startActivity(uninstallIntent); 
```

请在您的应用程序中尝试此代码。

# android - 将 Mat 转换为 Android 的位图 Opencv

> ID：13134682
> 
> 赞同：15
> 
> 时间：2012-10-30T07:47:27.187
> 
> 标签：android, opencv

我正在尝试将 MAt 转换为位图，使用以下代码：

```
 Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Mat tmp = new Mat (width,height,CvType.CV_8UC1,new Scalar(4));
    try {
    //Imgproc.cvtColor(seedsImage, tmp, Imgproc.COLOR_RGB2BGRA);
    Imgproc.cvtColor(seedsImage, tmp, Imgproc.COLOR_GRAY2RGBA, 4);
    Utils.matToBitmap(tmp, bmp);}
    catch (CvException e){Log.d("Exception",e.getMessage());} 
```

我的 seedImage 是一个 Mat 对象。例外是`10-09 22:15:09.418: D/Exception(2461): ..\..\modules\java\generator\src\cpp\utils.cpp:105: error: (-215) src.dims == 2 && info.height == (uint32_t)src.rows && info.width == (uint32_t)src.cols in function void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, _jclass*, jlong, _jobject*, jboolean)` 我试图搜索但没有解决方案对我有用。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-30T09:18:31.030

1) OpenCV Mat 构造函数期望`<rows, cols>`对而不是`<width, height>`作为它的参数。所以你必须改变你的第二行

```
Mat tmp = new Mat (height, width, CvType.CV_8U, new Scalar(4)); 
```

2）`Imgproc.cvtColor`可以改变`tmp`物体的尺寸。所以在颜色转换后创建位图是安全的：

```
Bitmap bmp = null;
Mat tmp = new Mat (height, width, CvType.CV_8U, new Scalar(4));
try {
    //Imgproc.cvtColor(seedsImage, tmp, Imgproc.COLOR_RGB2BGRA);
    Imgproc.cvtColor(seedsImage, tmp, Imgproc.COLOR_GRAY2RGBA, 4);
    bmp = Bitmap.createBitmap(tmp.cols(), tmp.rows(), Bitmap.Config.ARGB_8888);
    Utils.matToBitmap(tmp, bmp);
}
catch (CvException e){Log.d("Exception",e.getMessage());} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-03T12:18:44.133

尝试使用此代码进行 mat 到位图的转换

```
**Mat mRgba;
public void onCameraViewStarted(int width, int height) {
        mRgba = new Mat(height, width, CvType.CV_8UC4);
}
public Mat onCameraFrame(Mat inputFrame) {
   inputFrame.copyTo(mRgba);
   return mRgba;
}
private void captureBitmap(){
       bitmap = Bitmap.createBitmap(mOpenCvCameraView.getWidth()/4,mOpenCvCameraView.getHeight()/4, Bitmap.Config.ARGB_8888);
    try {
          bitmap = Bitmap.createBitmap(mRgba.cols(), mRgba.rows(), Bitmap.Config.ARGB_8888);
                Utils.matToBitmap(mRgba, bitmap);
               mBitmap.setImageBitmap(bitmap);
               mBitmap.invalidate();
    }catch(Exception ex){
          System.out.println(ex.getMessage());
    }
 }** 
```

# mobile - Mobile Safari Share Button 的技术名称是什么？它可以用Javascript作为目标吗？

> ID：13134685
> 
> 赞同：3
> 
> 时间：2012-10-30T07:47:38.227
> 
> 标签：mobile, ios6, mobile-safari

有人知道 IOS Mobile Safari 底部的这个按钮的名称吗？手机底部的按钮是一个带有箭头的盒子。

另外，它可以通过javascript从浏览器定位吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:11:06.920

从 Xcode 的属性检查器中，按钮的标识符是“Action”。Mobile safari 没有证明任何 JS API 允许我们调用社交活动。但是您可以使用其他社交 API，例如 Socialist。

# c# - html中的语法从数据库中获取DataGrid中复选框的值

> ID：13134697
> 
> 赞同：0
> 
> 时间：2012-10-30T07:48:30.003
> 
> 标签：c#, asp.net

我有一个带有位列组的表（如果在 UI 中选中复选框，则为 1，否则为 0）

```
<asp:CheckBox Runat="server" ID="chkCodeAppl"  Checked='<%# DataBinder.Eval(Container.DataItem, "Group") %>' /> 
```

我写了一个选择此列的 sp。但是在运行时它会给出错误“指定的演员表无效”。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:05:36.433

尝试在绑定代码之前添加（布尔）：

```
<asp:CheckBox Runat="server" ID="chkCodeAppl"  Checked='<%# (bool)DataBinder.Eval(Container.DataItem, "Group") %>' /> 
```

# html - 如何删除谷歌浏览器的翻译警告？Chrome 说页面是马来语，而它是英语

> ID：13134702
> 
> 赞同：6
> 
> 时间：2012-10-30T07:49:25.027
> 
> 标签：html, google-chrome, translation

我的 HTML 页面是英文的，我没有看到任何马来文的文字，但是当我在 chrome 浏览器中查看它时，它仍然显示“这个页面是马来文的，你想翻译吗？” ....什么解决方案来删除它。

快照[http://dl.dropbox.com/u/55938469/1.JPG](http://dl.dropbox.com/u/55938469/1.JPG)

谁能告诉我如何告诉浏览器这个页面是英文的，并且不要向任何查看这个页面的人显示这个警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T08:01:17.990

```
<meta name="google" value="notranslate"> 
```

但它会为想要将页面翻译成他们的母语非英语语言的人禁用翻译

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T07:54:21.423

更改 HTML 标记中的语言

```
<HTML lang="en"> 
```

或这个

```
<BODY LANG=en> 
```

# c# - WPF 4.0 组合框在绑定数据为空时显示消息

> ID：13134705
> 
> 赞同：0
> 
> 时间：2012-10-30T07:49:38.320
> 
> 标签：c#, wpf, wpf-controls

我有两个名为**category**和**sub-category 的**组合框。我想根据**类别**组合框选择在**子类别组合框中显示特定数据。**但有时当我选择某个**类别时，它在****子类别**中没有任何价值。那时我需要显示一条错误消息，例如**No Records Found**。

 ******有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:16:59.417

有一个[Binding.TargetNullValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)属性。当绑定源值为 null 时，此属性的值用作目标值。******

# c# - GridView 在页面上不可见

> ID：13134710
> 
> 赞同：0
> 
> 时间：2012-10-30T07:50:17.973
> 
> 标签：c#, asp.net, .net

我正在尝试用来自数据库视图的数据填充 Gridview。我不能使用 linq，因为视图有 200+k 行我必须显示。这是我的代码：

```
 public partial class _Default : System.Web.UI.Page
{
    private string mobileGateway = "MobileGateway";
    private List<string> addressReport = new List<string>();

    protected void Page_Load(object sender, EventArgs e)
    {
        GetReport(addressReport);
    }

    public void GetReport(List<string> adr)
    {
        string connecntionString = ConfigurationManager.ConnectionStrings[mobileGateway].ConnectionString;

        using (SqlConnection connection = new SqlConnection(connecntionString))
        {
            try
            {
                connection.Open();
                string sqlCmd = "SELECT * from dbo.BarcodeWithLocation";
                using (SqlCommand command = new SqlCommand(sqlCmd, connection))
                {
                    command.CommandType = System.Data.CommandType.Text;
                    using (SqlDataReader reader = command.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            adr.Add("" + reader[0]);
                            adr.Add("" + reader[1]);
                            adr.Add("" + reader[2]);
                            adr.Add("" + reader[3]);
                            adr.Add("" + reader[4]);
                            adr.Add("" + reader[5]);
                            adr.Add("" + reader[6]);
                            adr.Add("" + reader[7]);
                            adr.Add("" + reader[8]);
                            adr.Add("" + reader[9]);
                            adr.Add("" + reader[10]);
                        }

                        Grid.DataSource = adr;
                        Grid.DataBind();
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine("ERROR!!!!: " + ex.Message);
            }
        }
    }
} 
```

}

asp代码：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="AddressReporting._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:GridView ID="Grid" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False">
</asp:GridView>
</asp:Content> 
```

我得到一个完全没有gridview 的空白页。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:30:49.937

```
enter code here

command.CommandType = System.Data.CommandType.Text;
SqlDataReader reader = command.ExecuteReader();
Grid.DataSource = reader;
Grid.DataBind(); 
```

试试这个，它会将所有细节输入阅读器并将其直接绑定到网格。除非您想在那里做其他事情，否则无需遍历所有行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:14:45.637

尝试这样的事情：

```
string sqlCmd = "SELECT * from dbo.BarcodeWithLocation";
using (SqlCommand command = new SqlCommand(sqlCmd, connection))
{
     DataTable dataTable = new DataTable();
     command.CommandType = System.Data.CommandType.Text;
     connection.Open();
     SqlDataAdapter dataAdapter = new SqlDataAdapter(command);

     dataAdapter.Fill(dataTable);

     Grid.DataSource = dataTable;
     Grid.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:20:23.847

尝试声明 ref

```
public void GetReport(ref List<string> adr) 
```

[参考（C# 参考）](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:11:11.190

检查您的查询是否正在获取数据，因为您看不到空的 GridView

# java - 如何在 Java Eclipse 中进行数据字段访问

> ID：13134711
> 
> 赞同：0
> 
> 时间：2012-10-30T07:50:20.763
> 
> 标签：java, eclipse, swing

我是 Java 新手（知道 OOPS 概念，因为我是 ASP.NET 成员，但在过去 2 年没有使用 Java），正在创建井字游戏。

```
Deleted code here as I am putting my code below. 
```

在这里，我想知道下面的行是如何工作的？

```
game frame = new game();
frame.setVisible(true); 
```

我知道框架是游戏类的对象并由 new game() 构造函数初始化，但不了解 .setVisible() 方法如何适用于该对象。

我面临的另一个困难是如何访问其他类或方法中的初始化对象。

* * *

您好，我问了上一个问题，因为我在这里遇到了这个困难：首先我会给出代码

```
public class Game extends JFrame {

    private JPanel contentPane;
    //private JPanel settingPane;

    protected JLabel lblPlayerName2; // I am using this one for my testing
    JLabel[] lbls = new JLabel[9];
    private final ButtonGroup buttonGroup = new ButtonGroup();

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Game frame = new Game();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */

    public Game() {
        setTitle("Tic Tac Toe");
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 810, 607);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);
        contentPane.setName("Tic Tac Toe");
.       
.
..
.
.
.
.
.
.
.
.
.

    for (int i=0; i<lbls.length; i++) {
        lbls[i] = new JLabel(""+(i+1));
        lbls[i].addMouseListener(new AllbtnBehvr());

        lbls[i].setFont(new Font("Trebuchet MS", Font.BOLD, 95));
        lbls[i].setHorizontalAlignment(SwingConstants.CENTER);
        lbls[i].setBorder(new LineBorder(new Color(0, 0, 0), 2));
        panelGameArea.add(lbls[i]);
    }
        .
    .
    .
    .
    .
    .

    .
    .
    .
    .
    .
    .

} // End of Game() 

class AllbtnBehvr implements MouseInputListener{ //Created this class as SubClass of Game Class

        @Override
        public void mouseClicked(MouseEvent src) {
            // TODO Auto-generated method stub

            JLabel b = (JLabel) src.getSource();
            lblPlayerName2.setText(b.getText());

.       }
...
.
.
.
.
.
.
} // End of AllbtnBehvr
}// End of Game Class 
```

在这里，我观察到，变量 'lblPlayerName2' 和 lbls[] 定义在 Game() 构造函数之外，可以访问，但 Game() 中的其他变量无法访问。在这里，我想问一下，

如何访问 Game() 中的变量？如果我在 Game Class 之外创建类，如何访问 Game() 中的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:51:42.873

游戏扩展了 JFrame，而后者又扩展了 java.awt.Window，因此[继承了它的方法](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setVisible%28boolean%29)。

PS。类应该以大写的第一个字母命名。`Game`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:11:33.927

您的构造函数调用返回一个游戏对象，但由于游戏是从 JFrame 派生的，因此该对象也是 JFrame、java.awt.Frame、java.awt.Window 等等，一直到 java.lang.Object。

子类从其超类继承行为，因此 java.awt.Window 中定义的 setVisible() 方法可通过 JFrame 在从 Window 子类化的游戏对象中使用。

# iphone - 在 iphone 中使用 imagepickercontroller 的最佳方法？

> ID：13134712
> 
> 赞同：3
> 
> 时间：2012-10-30T07:50:24.137
> 
> 标签：iphone, ios, ipad

我正在使用`UIImagePickerController`从应用程序中的 PhotoLibrary 中选择图像。为此，我使用了两种不同的方法。起初我使用了一个类变量`UIImagePicker`和下面的代码。

```
 imagepicker = [[UIImagePickerController alloc]init];
     imagepicker.delegate = self;
     imagepicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
     imagepicker.modalTransitionStyle = UIModalTransitionStylePartialCurl;
     [self presentModalViewController:self.imagepicker animated:YES]; 
```

上面的代码工作正常。但是当我单击按钮时，在这种情况下需要一些时间来对动画做出反应。然后我使用了这种方法的自动释放池方法

```
 NSAutoreleasePool *pool;
    pool = [[NSAutoreleasePool alloc] init]; 
    if([UIImagePickerController isSourceTypeAvailable:
        UIImagePickerControllerSourceTypePhotoLibrary])
    {
        UIImagePickerController *picker= [[[UIImagePickerController alloc]init]autorelease];
        picker.delegate = self;
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        picker.modalTransitionStyle = UIModalTransitionStylePartialCurl;
        [self presentModalViewController:picker animated:YES];

    }
    [pool release]; 
```

也有魅力。他们俩都显示分析仪没有泄漏。谁能指出我正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:10:46.063

好吧，这里没什么好说的......两种方法都有效，两种方法都是正确的，使用你喜欢的任何一种。

一个小问题：如果您经常展示图像选择器，您最好使用第一种方法，并将其分配给实例变量（它不称为“类变量”！）*，仅在第一次时，*不要释放它直到`- dealloc`- 这样，每次用户选择图像时，您都会保存图像选择器的连续分配 - 释放。

# android - 适用于 Android 的 inmobi 横向插页式广告

> ID：13134715
> 
> 赞同：0
> 
> 时间：2012-10-30T07:50:41.107
> 
> 标签：android, landscape, ads, interstitial, inmobi

有人知道如何为 Android 制作仅横向的 inmobi 插页式广告吗？我尝试使用参数“d-orientation”发送发布请求，但什么也没发生。

```
Map<String, String> map = new HashMap<String, String>();
map.put("d-orientation", "3");
request.setRequestParams(map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:07:45.620

来自 inmobi 帮助中心的回答：我们目前不支持横向插页式广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:00:16.733

您可以`android:ScreenOrientation="landscape"`用于您各自的活动。因此您的活动仅在横向模式下可见。希望这对您有所帮助。

# c# - 从 Intranet C# Windows 应用程序中的计算机名称获取 IP

> ID：13134721
> 
> 赞同：3
> 
> 时间：2012-10-30T07:51:12.920
> 
> 标签：c#

我正在尝试从同一网络中的计算机名称获取 IP 地址...类似于 C# Windows 应用程序中的 CMD 命令“nbtstat -a COMPNAME”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T07:56:35.290

使用[`Dns.GetHostAddresses`](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)：

```
Dns.GetHostAddresses("some pc name")
   .ToList()
   .ForEach(a => Console.WriteLine(a.ToString())); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T07:53:30.423

试试这个方法：

```
Dns.GetHostName(); 
```

[http://msdn.microsoft.com/en-us/library/system.net.dns.gethostname.aspx](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostname.aspx)

# javascript - 在谷歌浏览器中调试时如何终止脚本执行？

> ID：13134723
> 
> 赞同：251
> 
> 时间：2012-10-30T07:51:14.170
> 
> 标签：javascript, debugging, google-chrome-devtools

在 Google Chrome 调试器中单步执行 JavaScript 代码时，如果我不想继续，如何终止脚本执行？我发现的唯一方法是关闭浏览器窗口。

按“重新加载此页面”会运行其余代码，甚至可以像按 F8“继续”一样提交表单。

**更新**：

在脚本暂停时按 F5（刷新）：

*   Google Chrome (v22) 运行该脚本。如果脚本提交 HTTP 请求，则会显示该请求的 HTTP 响应。原始页面未刷新。
*   IE 9 只是冻结。但是 IE 有一个“停止调试”选项，当按下它时（前提是您之前没有按 F5），它会继续在调试器之外运行脚本。
*   Firebug 的行为与 Chrome 相同。

关闭然后再次打开浏览器窗口并不总是最简单的方法，因为它会终止浏览器会话状态，这可能很重要。你所有的断点也丢失了。

**更新（2014 年 1 月）**：

调试时刷新：

*   Chrome v31：让脚本在更多断点处运行和停止（但不提交 ajax 请求），然后刷新。
*   IE 11：刷新什么都不做，但你可以按 F5 继续。
*   Firefox v26：允许脚本运行但不会在进一步的断点处停止，提交 ajax 请求，然后刷新。

有点进步！

调试时导航到同一页面：

*   Chrome v31：与刷新相同。
*   IE 11：脚本终止，新的浏览器会话开始（与关闭和再次打开相同）。
*   Firefox v26：没有任何反应。

*juacala*还提出了一种有效的解决方法。例如，如果您使用 jQuery，从控制台运行**delete $**将在遇到任何 jQuery 方法时停止执行。我已经在上述所有浏览器中对其进行了测试，并且可以确认它可以正常工作。

**更新（2015 年 3 月）**：

最后，经过 2 年多和近 1 万次浏览，Alexander K 给出了正确答案。谷歌浏览器有自己的任务管理器，可以在*不*关闭标签本身的情况下终止标签进程，保持所有断点和其他内容完好无损。

我什至跑到 BrowserStack.com 在 Chrome v22 中对其进行测试，发现即使在当时也是如此。

在 IE 或 Firefox 中进行调试时，Juacala 的解决方法仍然很有用。

**更新（2019 年 1 月）**：

Chrome 开发工具最后添加了一种停止脚本执行的正确方法，这很好（虽然有点隐藏）。有关详细信息，请参阅 James Gentes 的答案。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2014-12-03T01:11:05.513

在 Chrome 中，有“任务管理器”，可通过`Shift`+`ESC`或通过

> 菜单 → 更多工具 → 任务管理器

您可以选择您的页面任务并按“结束进程”按钮结束它。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2018-08-11T17:51:03.887

截至[2018 年 4 月，您可以在 Chrome 中停止无限循环](https://developers.google.com/web/updates/2018/04/devtools#stop)：

1.  在开发者工具 ( + + **)中打开**Sources**面板。`Ctrl``Shift``I`
2.  单击**暂停**按钮以**暂停脚本执行**。

还要注意快捷键：`F8`和`Ctrl`+`\`

[![在此处输入图像描述](../Images/1e99b5f0ea41068cc01092f106885c49.png)](https://i.stack.imgur.com/8nhl2.png)

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2020-03-31T13:14:57.470

# 2020年4月更新

从 Chrome 80 开始，当前的答案都不起作用。没有可见的“暂停”按钮 - 您需要长按“播放”按钮才能访问停止图标：

[![在 Chrome DevTools 中停止脚本执行](../Images/15056478234303fb4c37ee8ac11425d4.png)](https://i.stack.imgur.com/68C8K.png)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2013-12-31T18:26:43.077

您可以这样做的一种方法是暂停脚本，查看您当前停止的位置后面的代码，例如：

```
var something = somethingElse.blah; 
```

在控制台中，执行以下操作：

```
delete somethingElse; 
```

然后播放脚本：尝试访问时会导致致命错误`somethingElse`，脚本会死掉。瞧，你已经终止了脚本。

编辑：最初，我删除了一个变量。这还不够好。您必须删除 JavaScript 尝试访问其属性的函数或对象。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-17T20:46:09.027

`debugger`如果您在使用语句时遇到这种情况，

```
debugger; 
```

...然后我认为页面将继续运行，直到 js 运行时产生或下一次中断。假设您处于错误中断模式（暂停图标切换），您可以通过执行以下操作来确保发生中断：

```
debugger;throw 1; 
```

或者可能调用一个不存在的函数：

```
debugger;z(); 
```

（当然，如果您尝试单步执行函数，这无济于事，但也许您可以在 Sources 面板中动态添加 a `throw 1`or `z()`or somesuch，按 ctrl-S 保存，然后按 ctrl-R 刷新...但是可能会跳过一个断点，但如果您处于循环中，则可能会起作用。）

如果您正在执行循环并希望`debugger`再次触发该语句，则可以直接键入`throw 1`。

```
throw 1; 
```

然后当你按下 ctrl-R 时，下一个 throw 就会被击中，并且页面会刷新。

（使用 Chrome v38 测试，大约 2017 年 4 月）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-30T09:15:52.007

参考@scottndecker 对以下[问题](https://stackoverflow.com/questions/13405383/how-to-disable-javascript-in-chrome-developer-tools)的回答，chrome 现在在开发者工具下提供了“禁用 JavaScript”选项：

*   `...`右上角垂直（在开发者工具菜单中，不在 Chrome 主菜单中）
*   设置（在较新的 Chrome 版本中，它在按钮之外单独显示为齿轮`...`，而不是在按钮下方）
*   在“首选项”下，转到最底部的“调试器”部分并选择“禁用 JavaScript”

好消息是您可以通过选中/取消选中它来停止并重新运行。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-30T08:08:20.487

好问题在这里。我认为你不能终止脚本执行。虽然我从来没有找过它，但我在工作中使用 chrome 调试器已经很长时间了。我通常在我的 javascript 代码中设置断点，然后调试我感兴趣的代码部分。当我完成调试该代码时，我通常只运行程序的其余部分或刷新浏览器。

如果您想阻止脚本的其余部分被执行（例如由于将要进行的 AJAX 调用）**，您唯一能做的就是在控制台中即时删除该代码，从而防止这些调用从被执行**，那么你可以毫无问题地执行剩余的代码。

我希望这有帮助！

PS：我试图在以下一些教程/指南中找到终止执行的选项，但找不到。正如我之前所说，可能没有这样的选择。

[http://www.codeproject.com/Articles/273129/Beginner-Guide-to-Page-and-Script-Debugging-with-C](http://www.codeproject.com/Articles/273129/Beginner-Guide-to-Page-and-Script-Debugging-with-C)

[http://www.nsbasic.com/app/tutorials/TT10.htm](http://www.nsbasic.com/app/tutorials/TT10.htm)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-02T17:54:47.590

您可以暂停任何我认为在调试此类场景时非常有用的 XHR 模式。

*例如，我在包含“/”的 URL 模式上给出了断点*

[![在此处输入图像描述](../Images/b7e41a537d34a99586c68d3383efe45d.png)](https://i.stack.imgur.com/F4ZTZ.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-10T16:26:54.727

如果您有恶意循环，请暂停 Google Chrome 调试器中的代码（`||`源选项卡中的小“”按钮）。

切换回 Chrome 本身，打开“任务管理器”（`Shift`+ `ESC`），选择您的选项卡，单击“结束进程”按钮。

您将收到 Aww Snap 消息，然后您可以重新加载 ( `F5`)。

*正如其他人所指出的那样，在暂停点重新加载页面与重新启动恶意循环相同，并且如果调试器随后也锁定（在某些情况下会导致重新启动 chrome 甚至 PC），可能会导致严重的锁定。调试器需要一个“停止”按钮。Nb：接受的答案已经过时，因为它的某些方面现在显然是错误的。如果你投票给我，请解释:)*。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-05-11T02:28:53.160

打开“开发工具”中的源代码选项卡，单击正在运行的脚本中的行号，这将创建一个断点，调试器将在那里中断。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-04-20T08:32:42.077

这篇文章上面提到了这个问题有很多合适的解决方案，但我发现了一个小技巧，可以插入脚本中或粘贴到 Chrome 控制台（调试器）中来实现它：

```
jQuery(window).keydown(function(e) { if (e.keyCode == 123) debugger; }); 
```

当您点击 时，这将导致执行暂停`F12`。

# python - 在 Python 中跟踪内存泄漏（多处理）

> ID：13134726
> 
> 赞同：15
> 
> 时间：2012-10-30T07:51:32.910
> 
> 标签：python, memory-leaks, multiprocessing

我有一个`multiprocessing`泄漏内存的应用程序。但是，泄漏不在主进程中（根据[Dowser](http://www.aminus.org/blogs/index.php/2008/06/11/tracking-memory-leaks-with-dowser?blog=2)和`top`），而是在子进程中。有什么方法可以在子进程上使用 Dowser（或类似工具）来跟踪泄漏？如果没有，它如何追踪它？

更新：我花了很多时间尝试使用[heapy](http://www.smira.ru/wp-content/uploads/2011/08/heapy.html)和[gnibbler 的代码](https://stackoverflow.com/questions/1641231/python-working-around-memory-leaks/1641280#1641280)，但我找不到泄漏。然后我在主进程中停止了cherrypy，并在子进程中启动了另一个（使用[Dowser](http://www.aminus.org/blogs/index.php/2008/06/11/tracking-memory-leaks-with-dowser?blog=2)）。但几分钟后，CherryPy 将停止监听端口...... :( 所以我仍在寻找更好的主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:45:25.533

我发现[memory_profiler](http://pypi.python.org/pypi/memory_profiler)非常易于使用，但我不确定它如何与多处理交互，因为我从未使用过该模块。有关其他 Python 分析器的提及，请参阅此[答案](https://stackoverflow.com/a/10592072/1804546)以获取该线程中的简短解释和其他答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T12:49:53.217

[我已经通过使用muppy](http://packages.python.org/Pympler/muppy.html)找到了内存泄漏（在外部 C 库中）- 很棒的工具，我希望我能早点找到它！谢谢大家的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:08:19.960

我发现了一些应该证明很有帮助的帖子。还没有时间消化其中的所有信息，但我想我会发布链接并让您也可以查看它们。

Marius Gedminas 有两篇关于在 Python 测试套件中寻找 memleaks 的文章。他正在使用内置模块`gc`和`inspect`简单地将对象图作为 csv 文件转储到磁盘上，因此该方法即使对于应用程序也应该工作得很好`mp`。

我会在今天晚些时候有时间的时候调查一下我自己。

**更新**

`objgraph`Marius 将他的测试平台作为一个名为([链接](http://mg.pov.lt/objgraph/))的开源项目发布。它跟踪`gc`对象引用，但允许您打印出有用的信息，例如在函数调用后添加了多少个哪种类型的实例，并且它允许您查看对象的完整引用链。

这些文档很容易解释，我看不出它不能与`mp`应用程序一起工作的原因。

但是，如果您的内存泄漏来自某些底层 c 库，那么这可能对您没有帮助。至少它应该让您知道泄漏在哪里。如果它不在您的 python 代码中，那么您可能必须重构您的代码，以便您可以在主进程中运行相关的 c 库并使用[Valgrind](http://valgrind.org/)之类的东西来检测泄漏。

* * *

原帖 [http://mg.pov.lt/blog/hunting-python-memleaks.html](http://mg.pov.lt/blog/hunting-python-memleaks.html)

他更深入地了解他正在使用的工具 [http://mg.pov.lt/blog/python-object-graphs.html](http://mg.pov.lt/blog/python-object-graphs.html)

让我开始的帖子 [http://www.lshift.net/blog/2008/11/14/tracing-python-memory-leaks](http://www.lshift.net/blog/2008/11/14/tracing-python-memory-leaks)

# c# - 在 Windows 服务中使用事件日志

> ID：13134731
> 
> 赞同：2
> 
> 时间：2012-10-30T07:51:52.633
> 
> 标签：c#, windows-services, event-log

最近我完成了一个windows服务的开发。它在我的 PC 上运行，易于启动和记录，但不幸的是，由于我使用事件日志，它在其他计算机上的设置并不容易。当我尝试谷歌搜索时，我发现我应该对注册表和用户设置一些权限。为什么这如此复杂，我该如何解决它......

```
public MainService()
        {
            InitializeComponent();
            this.ServiceName = "Network Support Service";
            //eventlog
            this.EventLog.Log = "Application";
            if (!System.Diagnostics.EventLog.SourceExists("NetworkSupportSource"))
                System.Diagnostics.EventLog.CreateEventSource("NetworkSupportSource", "NetworkSupportLOG");
            eventLog1.Source = "NetworkSupportSource";
            eventLog1.Log = "NetworkSupportLOG";
            //مقداردهی رشته اتصال
            ConnectionString = NetworkSupportWS.Properties.Settings.Default.paneldbConnectionString;

        } 
```

有关如何创建可以处理它的设置的任何帮助。任何样品。

我`LocalService`用作`ServiceProcessInstaller`帐户！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:55:29.973

您必须以管理员身份创建源，然后每个程序都可以登录到它。这在手册中显示：

> [`EventLog.CreateEventSource()`](http://msdn.microsoft.com/en-us/library/2awhba7a(v=vs.100).aspx)：
> 
> **笔记**
> 
> 要在 Windows Vista 及更高版本或 Windows Server 2003 中创建事件源，您必须具有管理权限。

# cakephp - 在 cakephp 页面控制器中设置权限

> ID：13134738
> 
> 赞同：0
> 
> 时间：2012-10-30T07:52:24.840
> 
> 标签：cakephp, authentication, cakephp-2.0

我遵循了 Andrew Perkins关于在 CakePHP 2.0 中设置权限的[优秀教程。](http://www.youtube.com/watch?v=zvwQGZ1BxdM)

但是，我的问题与如何在 Pages 控制器中使用允许和拒绝方法有关。目前我有`$this->Auth->allow('display')`它允许查看 Pages 控制器中的所有方法。

如果我只希望主页被允许但其余的被拒绝怎么办？我该如何编码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:45:28.810

确保您已将 PageController.php 复制到您的 app/Controller 文件夹。然后，添加一个*beforeFilter*回调方法，并根据传递的页面参数设置访问权限：

```
public function beforeFilter() {   
    // Use $this->request->pass to get the requested page name/id   
    // Decide on access with $this->Auth->allow() 
} 
```

这应该可以解决您的问题。

[您可以在CakePHP 手册](http://book.cakephp.org/2.0/en/controllers.html#request-life-cycle-callbacks)中找到有关请求生命周期的更多信息。这是非常有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:00:56.817

你试过这个代码吗？您可以将其输出到您的 PageController 或直接输入到您的控制器中

```
$views = array ('index'); //array of view that you want allow
$this->Auth->allow($views); 
```

# sql-server-2005 - 有没有办法在 SQL Server 2005 中存储 word 文件？

> ID：13134739
> 
> 赞同：0
> 
> 时间：2012-10-30T07:52:31.110
> 
> 标签：sql-server-2005

我试图在 mysql server management studio 2005 中存储一个 word 文件，当我研究它时，所有帖子都说尝试使用 blob。但我现在遇到的问题是没有 blob 数据类型。有没有其他方法来存储 word 文件，或者即使可能替换 blob 数据类型
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:28:13.013

1.  你搜索的时间并不长。BLOB 是“二进制大对象”的缩写
2.  你要么有 MySQL 要么有 SQL Server 2005（有管理工作室）

所以，继续做更多的研究:)

也许从[这里开始...](http://msdn.microsoft.com/en-us/library/ms188362.aspx)

# javascript - 在 IE 上缓慢加载谷歌地图多边形

> ID：13134741
> 
> 赞同：0
> 
> 时间：2012-10-30T07:52:39.583
> 
> 标签：javascript, internet-explorer, google-maps, polygon

每个人。最近，我们遇到了一个关于在不同浏览器上加载谷歌地图组件的速度问题。关于功能，我们添加了 120 个多边形、360 个扇区（也是多边形）和几个附加到地图上组件的属性。JS工具的版本是Google Map Javascript V3。

现在，该模块在 Chrome 和 Foxfire 浏览器上运行快速流畅。**但是，在****IE8 或 IE9**上会出现可怕的问题。将信息加载到地图的过程变得非常**缓慢**，在拖动或缩放地图期间也是如此，用户无法接受。

那么，在这种情况下是否有任何关于加速的解决方案？

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:11:11.253

以我的经验，它只是 IE 是 IE。

我建议通过使用地图边界作为过滤条件来减少一次需要显示的多边形数量。如果您让用户缩小以显示整个地图，您仍然会遇到问题，因此您可能还想限制缩放级别。

如果您获取构成多边形的所有点并将它们推送（扩展）到 LatLngBounds，您可以抓住边界框并检查该边界框的中心是否在地图的当前边界内。

# python - 一行if else条件在python

> ID：13134743
> 
> 赞同：10
> 
> 时间：2012-10-30T07:52:50.087
> 
> 标签：python, conditional-statements

```
def sum10(a, b):
    if sum([a, b]) % 10 == 0: return True; return False

print sum10(7, 3)
print sum10(-13, -17)
print sum10(3, 8) 
```

结果是：

```
True
True
None 
```

不是我所期望的：

```
True
True
False 
```

任何想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-30T07:56:22.660

你的代码

```
def sum10(a, b):
    if sum([a, b]) % 10 == 0: return True; return False 
```

相当于

```
def sum10(a, b):
    if sum([a, b]) % 10 == 0: 
        return True; return False 
```

所以`return False`永远不会被评估。

* * *

一些（可能是无穷无尽的）替代方案：

```
 if sum([a, b]) % 10 == 0: 
        return True
    return False 
```

或者

```
 return sum([a, b]) % 10 == 0 
```

或者

```
 return True if sum([a, b]) % 10 == 0 else False 
```

或者

```
 return False if (a+b) % 10 else True 
```

或（最易读的恕我直言）

```
 return not (a + b) % 10 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T07:56:11.827

这就是你想要的。

```
def sum10(a, b):
    return sum([a, b]) % 10 == 0 
```

Python中的三元`If`也是这样的

```
<True Statment> if <Conditional Expression> else <False Statement> 
```

例如

```
True if sum([a,b]) % 10 == 0 else False 
```

我还可以推荐使用加号运算符吗？

```
True if (a+b) % 10 == 0 else False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T07:58:27.160

如果你想有 if-else 一个衬里，它们应该这样写：

```
return True if sum([a, b]) % 10 == 0 else False 
```

请注意，那条衬里中没有两点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T07:59:14.480

我认为`return False`永远不会执行，因为它在 if 中，而不是在 if 之外。

因此，当您在 if 条件中取 true 时，您正在执行`return True`，但绝不是第二条语句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-12T15:55:26.327

```
def sum10(a, b):
    return sum([a, b])%10 == 0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-21T03:48:32.153

您可以尝试将结果存储在布尔变量中，然后在最后返回该变量，而不是立即返回 True 或 False。例如：

```
def sum(a,b):
  bool result
  if sum([a, b]) % 10 == 0:
    bool=True
  else:
    bool=False
  return bool 
```

# objective-c - 推送视图控制器时如何隐藏导航栏？

> ID：13134748
> 
> 赞同：3
> 
> 时间：2012-10-30T07:53:22.817
> 
> 标签：objective-c, ios, uinavigationbar, uisearchdisplaycontroller

我正在制作定制的 UIScrollView，例如 pinterest 的两列视图。

滚动视图应该具有搜索功能。所以我尝试使用 UISearchDisplayController 但我不能，因为 UISearchDisplayController 只实现 UITableView。

所以，我创建了像 UISearchDisplayController 这样的搜索显示控制器。很好。做得好。

但我有一个大问题。转到详细视图时，我无法完全实现 UISearchDisplayController 的行为。

见下图。

此图像是 UISearchDisplayController 在 Simulator 的 Contact App 上的行为。

![在此处输入图像描述](../Images/4ee37d743f8c85c30d3d0966b122b66e.png)

详细视图在推送时有一个导航栏。但第一个视图的导航栏是隐藏的。

![在此处输入图像描述](../Images/fed2f5edc3d6b8e74e557a9d39ff16ac.png)

UISearchDisplayController 的行为有利于转换视图。搜索视图没有 UINavigationBar，详细视图分别有 UINavigationBar。但我的控制器不能这样做。

在搜索视图上触摸 UISearchBar 时，我调用`setNavigationBarHidden:animated`方法尝试隐藏导航栏。

如何实现第二张图片。有任何想法吗？

对不起，我的英语不好 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:18:56.387

搜索栏是不同的视图，因此您需要在视图从一个视图导航到另一个视图时调用以下方法。

```
self.navController.navigationBarHidden = YES; 
```

或者

```
[self.navigationController setNavigationBarHidden:YES animated:animated]; 
```

# android - Android Activity onInitialize

> ID：13134755
> 
> 赞同：1
> 
> 时间：2012-10-30T07:53:57.777
> 
> 标签：android, oncreate, livecycle

我只想在应用程序启动时执行一次操作。因此，我尝试将代码放在主要活动的 onCreate 中，但是当用户返回主要活动和/或设备方向发生变化时，它会一次又一次地触发。哪个事件更适合我的用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:07:47.417

创建一个静态布尔值，并检查该布尔值是否已设置

例如

```
private static boolean flag = false;
  // perform this check inside oncreate
    if(!flag){
      // peform task
       flag = true;
    } 
```

这将使您的代码在程序启动时只运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:34:45.997

在应用程序级别编写代码。

```
Class MyClass extends Application
   {
    @Override
    public void onCreate() {
           //your code. This will be executed only once.i.e. when app is started.

           super.onCreate();
     }
   } 
```

你还需要在androidmanifest.xml中声明这个类。如图

```
<application
    android:name=".MyClass"
    android:icon="@drawable/logo"
    android:label="@string/str_app_name"
    android:theme="@android:style/Theme.NoTitleBar" 
    > 
```

# xcode - : ImageIO: processAPP1 Failed to read tag #4 in mainIFD error in xcode log console

> ID：13134758
> 
> 赞同：6
> 
> 时间：2012-10-30T07:54:21.463
> 
> 标签：xcode, ios6, tags

我有一个应用程序在日志中重复显示以下错误：

`<Error>: ImageIO: readTag : tag-id '0000' is bad (type = 1 count = 1) - ignoring...`

和

`<Error>: ImageIO: processAPP1 Failed to read tag #4 in mainIFD.`

任何人都可以指出如何解决它以及为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T02:10:33.563

这是我能找到的最佳答案[https://stackoverflow.com/a/5782332/819694](https://stackoverflow.com/a/5782332/819694)。用 PNG 替换 GIF 图像很有帮助。

# php - $this->db->_error_number() 返回 0 而不是错误号

> ID：13134759
> 
> 赞同：1
> 
> 时间：2012-10-30T07:54:28.607
> 
> 标签：php, codeigniter

Codeigniter 不返回错误号

```
 $this->db->trans_start();
 $deal_enquiry = $this->db->insert('deal_enquiry', $data);
 $enquiry_id = $this->db->insert_id();
 $this->db->trans_complete();

 if ($this->db->trans_status() === FALSE) {
     echo $this->db->_error_number();
     if ($this->db->_error_number() == 0){
        $errormsg="Duplicate entry";
        return $errormsg;      
     } else{
        $errormsg="Enquiry failed";
        return $errormsg;      
     }
     //    return false;
 } else {
     return true;
 } 
```

即使出现错误，错误号也始终返回 0。当我将 db_debug 设置为 true 时，错误号有所不同。为什么我没有得到正确的错误号。有人可以指出问题。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:15:52.000

I got the error number by echo $this->db->_error_number(); before the trans_complete(); Thanks all

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:52:17.043

对于其他遇到类似问题的人。确保您在 database.php 配置文件中启用了数据库调试。

# c# - if语句中的Lambda？

> ID：13134761
> 
> 赞同：0
> 
> 时间：2012-10-30T07:54:31.243
> 
> 标签：c#, asp.net, c#-4.0

如何在 if 语句中使用 lambda 将树节点的值与列表中的对象值进行比较？目前我正在尝试这样的事情，但它不会工作。有没有更好的方法来简化我的搜索？

```
if (tvItems.Nodes.Count > 0)
{
    // Get checked items
    listChecked= MenuItemDTOManager.GetMenuItems();
    //

    foreach (TreeNode parentNode in tvItems.Nodes)
    {
        if (listChecked.Find(s => s.menuId.ToString() == parentNode.Value.ToString()))
        {
            parentNode.Checked = true;
        }
    }
    // Traverse children
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:57:32.433

应该使用[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)而不是`Find`：

```
if (listChecked.Any(s => s.menuId.ToString() == parentNode.Value.ToString()))
{
    parentNode.Checked = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:00:48.883

`if`只需要一个`bool`值。

```
listChecked.Find(s => s.menuId.ToString() == parentNode.Value.ToString()) 
```

[查找](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)不会返回`bool`。

尝试使用[Exists](http://msdn.microsoft.com/en-us/library/bfed8bca.aspx)而不是`Find`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:58:09.280

可能您正在寻找以下内容。

```
foreach (TreeNode parentNode in tvItems.Nodes.OfType<TreeNode>().Any(n=> listChecked.Any(s => s.menuId.ToString() == n.Value.ToString()))
{
    parentNode.Checked = true;
} 
```

# entity-framework - 通用存储库构造函数

> ID：13134763
> 
> 赞同：1
> 
> 时间：2012-10-30T07:54:58.040
> 
> 标签：entity-framework

我正在尝试使用实体框架中的通用存储库，并遇到以下代码：

```
public class GenericRepository<TContext, TEntity> : IGenericRepository<TEntity>
where TContext : IUnitOfWork
where TEntity : class
{
protected TContext _context;
/// <summary>
/// Constructor that takes a context
/// </summary>
/// <param name="context">An established data context</param>
public GenericRepository(TContext context)
{
    _context = context;
}

public IQueryable<TEntity> Select()
{
    return _context.Set<TEntity>().AsQueryable();
}

public IEnumerable<TEntity> GetAll()
{
    return _context.Set<TEntity>().AsEnumerable();
}

public IEnumerable<TEntity> Where(Func<TEntity, bool> predicate)
{
    return _context.Set<TEntity>().Where(predicate);
}

public TEntity GetSingle(Func<TEntity, bool> predicate)
{
    return _context.Set<TEntity>().Single(predicate);
}

public TEntity GetFirst(Func<TEntity, bool> predicate)
{
    return _context.Set<TEntity>().First(predicate);
}

public void Add(TEntity entity)
{
    if (entity == null)
        throw new ArgumentException("Cannot add a null entity");

    _context.Set<TEntity>().Add(entity);
}

public void Delete(TEntity entity)
{
    if (entity == null)
        throw new ArgumentException("Cannot delete a null entity");

    _context.Set<TEntity>().Remove(entity);
}

public void Attach(TEntity entity)
{
    if (entity == null)
        throw new ArgumentException("Cannot attach a null entity");

    _context.Set<TEntity>().Attach(entity);
}

#region IDisposable implementation
private bool disposedValue;

public void Dispose(bool disposing)
{
    if (!this.disposedValue)
    {
        if (disposing)
        {
            // dispose managed state here if required
        }
        // dispose unmanaged objects and set large fields to null
    }
    this.disposedValue = true;
}

public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}
#endregion
 } 
```

但是我发现有点难以理解对创建的构造函数的需求

```
/// <summary>
/// Constructor that takes a context
/// </summary>
/// <param name="context">An established data context</param>
public GenericRepository(TContext context)
{
    _context = context;
} 
```

有人可以解释一下这个的用途吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:32:44.827

那是因为你的项目中可能有多个 DbContext 类，所以你需要注入一个特定的 DbContext 实例来告诉 GenericRepository 类你正在使用哪个 DbContext。

您需要拥有多个 DbContext 类的原因可能是：

1.  您的项目针对多个数据库；

2.  您的项目很大，出于性能和可维护性的考虑，您希望将其拆分为几个模块。例如：

    ```
    public class BaseContext<TContext> : DbContext
      where TContext : DbContext, new()        
    {        
        protected BaseContext()
        : base("name=ConnectionString")
        {            
        }
    }

    public class ShopDbContext :BaseContext<ShopDbContext>
    {
        public DbSet<Product> Products{ get; set; }
    }

    public class BlogDbContext :BaseContext<BlogDbContext>
    {
        public DbSet<Blog> Blogs{ get; set; }
    } 
    ```

现在，如果要查询 Products，则必须实例化 ShopDbContext，并将其传递给 GenericRepository 构造函数（IoC 是一个不错的选择）。

# javascript - 使用带有条件的jquery计算字符串

> ID：13134765
> 
> 赞同：0
> 
> 时间：2012-10-30T07:55:03.083
> 
> 标签：javascript, jquery, javascript-events

当用户输入 input 时，我的 textarea 可以计算字符串/字符。这是我的[jsfiddle](http://jsfiddle.net/ruslyrossi/nrkXG/1/)

我的问题是我想设置条件意味着当字符串/字符高于 158 时，我想在里面显示消息`<div id="message">We will deduct 2 credit from your account</div>`，当字符串/字符高于 316 时，消息将更新并显示<`div id="message">We will deduct 3 credit from your account</div>`并继续..

例子 ：

```
158 *2

158 = We will deduct 2 credit from your account
316 = We will deduct 3 credit from your account
474 = We will deduct 4 credit from your account
632 = We will deduct 5 credit from your account
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:59:30.763

尝试一下

```
$('#myInput').keyup(function() {
    $('#charCount').text(this.value.length);

    var c = parseInt(this.value.length / 158);
    if(c > 0) 
        $('#message').text('We will deduct '+c+' credit from your account');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:58:51.850

1) 查找字符串的长度

2）除以158

3）在答案中添加“1”

4）使用字符串连接创建消息-“我们将扣除”+（3）的输出+“您的帐户中的信用”

5) jQuery("#message").html("我们将扣除" + (3) 的输出 + "您的账户贷记");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:00:56.260

试试这个

```
$('#myInput').keyup(function() {
    var len = this.value.length ; 
    $('#charCount').text(len);
    var creditCount = 158;
    if( len > creditCount ){
         var credits = Math.floor(len / creditCount );
         $('#message').html('We will deduct '+  credits  + ' credit from your account;' )
    }
});​ 
```

**[检查演示](http://jsfiddle.net/sushanth009/nrkXG/8/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:09:06.303

在 textarea keyup 上，您可以检查否。字符数，因此您可以编写 if-else 条件来显示消息。

检查这个：[工作小提琴](http://jsfiddle.net/nrkXG/7/)

```
$('#myInput').keyup(function() {
    if(this.value.length<=158)
    $('#charCount').text('We will deduct 1 credit from your account');
    else if(this.value.length>158 || this.value.length<316)
    $('#charCount').text('We will deduct 2 credit from your account');
    else if(this.value.length>316|| this.value.length<316)
    $('#charCount').text('We will deduct 3 credit from your account');
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T08:13:06.823

```
$('#myInput').keyup(function() {
    $('#charCount').text(this.value.length);
    var length = this.value.length;
    if (length % 158 == 0) {
      $('#message').html('We will deduct '+ (length/158) + 
                         ' credit from your account;' )                        
    }
}); 
```

# http - JBoss Seam 只允许通过 POST 传递参数

> ID：13134767
> 
> 赞同：0
> 
> 时间：2012-10-30T07:55:09.153
> 
> 标签：http, configuration, methods, jboss, jsf-1.2

我将 JBoss 4.2 与 Java Seam 一起使用，在我的应用程序中实现了一个登录表单。现在，如果我在 GUI 中提交表单，参数将通过 HTTP-POST 发送，但如果我尝试通过 HTTP-GET 发送数据，它也会被接受。

这应该被阻止，但我不知道如何。我可以在 pages.xml 中设置方法还是需要以编程方式找出请求是 Post 还是 Get。

还有其他方法可以做到这一点或我应该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:58:01.350

在 web.xml 中添加如下语句：

```
<security-constraint>
   <web-resource-collection>
        <web-resource-name>Post Pages</web-resource-name>
        <description />
        <url-pattern>/*.xhtml</url-pattern>
        <http-method>POST</http-method>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

这将只允许定义的 url.patterns 中的 POST 请求

# asp.net - “无法加载文件或程序集或其依赖项之一。试图加载格式不正确的程序。”

> ID：13134769
> 
> 赞同：20
> 
> 时间：2012-10-30T07:55:20.543
> 
> 标签：asp.net

在 VS 中调试时，在 VS 中启动调试时会引发错误。

错误如下：

```
Could not load file or assembly 'p4dn, Version=1.0.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.BadImageFormatException: Could not load file or assembly 'p4dn, Version=1.0.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[BadImageFormatException: Could not load file or assembly 'p4dn, Version=1.0.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +0
   System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +43
   System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +127
   System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +142
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Could not load file or assembly 'p4dn, Version=1.0.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +613
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +203
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +105
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.BuildProvidersCompiler..ctor(VirtualPath configPath, Boolean supportLocalization, String outputAssemblyName) +54
   System.Web.Compilation.ApplicationBuildProvider.GetGlobalAsaxBuildResult(Boolean isPrecompiledApp) +232
   System.Web.Compilation.BuildManager.CompileGlobalAsax() +51
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +337

[HttpException (0x80004005): Could not load file or assembly 'p4dn, Version=1.0.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +58
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +512
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters) +729

[HttpException (0x80004005): Could not load file or assembly 'p4dn, Version=1.0.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +8921851
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +85
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +259 
```

当我创建一个使用“p4dn.dll”的 C# 项目时，没有遇到这个错误。

这是我的第一个 ASP 项目，我还阅读了类似的问题，例如“http://stackoverflow.com/questions/41449/i-get-a-an-attempt-was-made-to-load-a-program-with -an-incorrect-format-error-o”和“http://stackoverflow.com/questions/1648213/could-not-load-file-or-assembly-xxx-or-one-of-its-dependencies-an -尝试-是”。他们无法解决我的问题。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2016-05-15T20:29:44.830

现在有一个菜单选项可以运行 64 位版本的 IIS Express。从 Visual Studio 菜单中选择工具 -> 选项... -> 项目和解决方案 -> Web 项目

单击“为网站和项目使用 64 位版本的 IIS Express”按钮

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-12-17T12:18:17.007

转到相应 ==> 站点应用程序池，

点击 ==> 高级设置

```
 Change value of ==> "Enable 32-Bit Applications" from  False to True 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T17:23:32.187

我在尝试使用 IIS Express 8.0 运行（调试）一个 64 位 MVC 站点时遇到了同样的错误消息。我确认我所有的项目都针对 x64 平台。

出现此问题的原因是 Visual Studio 运行 32 位版本的 IIS Express。我可以让它工作的唯一方法是通过手动执行以下命令来运行 64 位 IIS Express。

```
"C:\Program Files\IIS Express\iisexpress.exe"  /config:"U:\IISExpress\config\applicationhost.config"  /site:"Imaging.Web" /apppool:"Clr4IntegratedAppPool" 
```

然后在您的 Visual Studio Web 项目中转到“属性”，选择“使用自定义 Web 服务器”，然后输入您网站的 url。

为了调试，请转到调试 > 附加到进程.. 然后选择您正在运行的 IIS Express 实例。

Visual Studio 团队确实应该在项目属性中将此作为选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-03T11:05:06.817

-为您的网站创建一个新的 IIS 池 -为此池启用 32 位

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-24T09:44:35.220

使用 C# 在 Asp.Net 上进行本地化项目

项目在本地机器上运行良好。在 IIS 和 Web 服务器上上传后，它没有工作并且**无法加载文件或程序集“App_global.asax”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。**来了。

[![在此处输入图像描述](../Images/0174c7f41ac9ce1171b8556ec24d0884.png)](https://i.stack.imgur.com/Grxqw.png)

**在 IIS 上将应用程序池从 v2.0 更改为 V4.0 后，错误得到解决。**

# android - 如何创建带有永久提示的编辑文本

> ID：13134770
> 
> 赞同：4
> 
> 时间：2012-10-30T07:55:26.290
> 
> 标签：android

我有一个编辑文本，用户在其中输入金额。我想要做的是在它之前设置一个用户无法编辑的 textview 值，如“INR”，然后用户将在它前面输入金额。我希望 edittext 看起来像下面的。我怎样才能做到这一点？

![在此处输入图像描述](../Images/540322018b276baa2d2569689a320224.png)

```
<EditText
        android:id="@+id/Eamnt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="180dp"
        android:ems="10"
        android:inputType="numberDecimal" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T08:20:06.950

尝试使用包含 TextView 和 EditText 的 RelativeLayout。我在下面做了一些事情，试试看。

```
<RelativeLayout
  android:layout_width="match_parent"
  android:layout_height="50dp"
  android:background="@android:drawable/editbox_background" >

<TextView 
    android:id="@+id/constant_text"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:gravity="center_vertical|center_horizontal"
    android:textStyle="bold"
    android:textColor="#C0C0C0"
    android:text="INR"
    android:background="@android:color/transparent" />

<EditText 
    android:id="@+id/amount"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_toRightOf="@+id/constant_text"
    android:textColor="#000000"
    android:textStyle="bold"
    android:background="@android:color/transparent"
    android:paddingLeft="5dp"
    android:text="100 000" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:37:57.873

您可以使用包含 TextView（用于提示）和 EditText 的 RelativeLayout 用于文本输入。此代码显示了示例：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_parent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="PasswordHint"
        android:textColor="#aaaaaaaa"
        android:textSize="30dip" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignParentLeft="true"
        android:background="#00000000"
        android:textSize="30dip" >

    </EditText>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:54:54.450

我的建议只是使用背景图片，它可以绘制您想要的文字。使用 9-patch 来限制用户可以输入的位置。这不是提示，但可以解决您的问题。![喜欢这个，希望对你有帮助](../Images/39e40cef5ffddf3da48993fab1134d8d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-11T07:04:45.557

MyEditText.java

```
package com.example.myapplication24.UI;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;

import com.example.myapplication24.R;

public class MyEditText extends androidx.appcompat.widget.AppCompatEditText {
    private String mhint = "";
    private Paint mPaint;
    private Context mContext;
    private float paddingLeft = 0 ;

    public MyEditText(Context context) {
        super(context);
        this.mContext = context;
        init();
    }

    public MyEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.mContext = context;
        init();
        TypedArray a = mContext.obtainStyledAttributes(attrs,R.styleable.MyEditText);
        mhint = a.getString(R.styleable.MyEditText_mhint);
        setPadding((int)(mPaint.measureText(mhint)),getPaddingTop(),getPaddingRight(),getPaddingBottom());
        a.recycle();
    }

    public MyEditText(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        this.mContext = context;
        init();
        TypedArray a = context.obtainStyledAttributes(attrs,R.styleable.MyEditText,defStyleAttr,0);
        mhint = a.getString(R.styleable.MyEditText_mhint);
        setPadding((int)(mPaint.measureText(mhint)),getPaddingTop(),getPaddingRight(),getPaddingBottom());
        a.recycle();

    }
    private void init() {
        mPaint = new Paint();
        mPaint.setTextSize(getTextSize());
        mPaint.setColor(Color.GRAY);
        paddingLeft = getPaddingLeft();
    }

    private int dp2px(float dp) {
        return (int) (mContext.getResources().getDisplayMetrics().density * dp + 0.5f);
    }
    @Override
    protected void onDraw(Canvas canvas) {
        //Drawing mhint
        canvas.drawText(mhint,dp2px(5),getHeight()*0.65f,mPaint);

        super.onDraw(canvas);
    }

} 
```

布局.xml

```
<com.example.myapplication24.UI.MyEditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:mhint="Username: "
        android:text="asd"
        ></com.example.myapplication24.UI.MyEditText> 
```

attrs.xml

```
 <!--my hint-->
    <attr name="mhint" format="string"/>

    <declare-styleable name="MyEditText">
        <attr name="mhint"/>

    </declare-styleable>

</resources> 
```

希望对后来者有所帮助...

[演示](https://i.stack.imgur.com/uBp53.png)

# jquery - 将自定义标头传递给 Select2 上的 Ajax 请求

> ID：13134773
> 
> 赞同：12
> 
> 时间：2012-10-30T07:55:52.410
> 
> 标签：jquery, angularjs, jquery-select2

我们正在尝试在 Select2 中实现 Ajax 远程数据加载：-

```
 $scope.configPartSelect2 =  {
        minimumInputLength: 3,
        ajax: {
            url: "/api/Part",
           // beforeSend: function (xhr) { xhr.setRequestHeader('Authorization-Token', http.defaults.headers.common['Authorization-Token']); },
          //  headers: {'Authorization-Token': http.defaults.headers.common['Authorization-Token']},
            data: function (term, page) {
                return {isStockable: true};
            },
            results: function (data, page) {
                // parse the results into the format expected by Select2.
                // since we are using custom formatting functions we do not need to alter remote JSON data
                  return { results: data };

            }
        }
    }; 
```

我们正在使用 AngularJS。对于每个 Http 请求，我们都将其默认设置为 Authtoken 作为标头。但不知何故，它不能与 Select2 Ajax 请求结合使用。在上面的代码中，注释代码是我失败的尝试。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-19T11:25:28.637

这就是我修复发送身份验证令牌的方式。只需将其添加为 Select2 ajax 参数；

```
transport: function(params){
    params.beforeSend = function(request){
        request.setRequestHeader("Authorization", 'OAuth ' + api_access_token);
    };
    return $.ajax(params);
}, 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-01T13:11:54.280

取自 select2 的演示页面：

> Select2 会将 ajax 对象中的任何选项传递给 jQuery 的 $.ajax 函数或您指定的传输函数。

使用 JQuery 2+，我能够成功设置 OAuth 2.0 和 Content-Type 标头。

```
ajax: {
    headers: {
        "Authorization" : "Bearer "+Cookies.get('accessToken'),
        "Content-Type" : "application/json",
    },
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-20T14:17:32.693

另外一个选项：

```
ajax: {
    url: '/api/Part',
    params: { headers: { "Authorization": "XXX" } },
    ...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T14:53:07.800

我通过提供自定义传输方法解决了我的上述问题。然后我被困在鼠标悬停时未选择下拉项目和单击后未选择下拉项目。调试后我发现返回的 json 对象中必须有属性“id”。

以下是我的代码： -

```
 var fetchPart = function (queryParams) {

        var result = http.get(queryParams.url, queryParams.data).success(queryParams.success);

    result.abort = function() {
        return null;
    };
    return result;
};

var partFormatResult = function (part) {
    return "<div><h4>" + part.PartNumber + "</h4><p>"+ part.PartDescription + "</p></div>";
};

var partFormatSelection = function (part, container) {
    console.log(part.Id + "number - " + part.PartNumber);
    return part.PartNumber;
//    return part.PartNumber;
    //return part.Id;
};

$scope.configPartSelect2 =  {
    minimumInputLength: 3,
    ajax: {
        url: "/api/Part",
        data: function (term, page) {
            return { params: { isStockable: true, query: term, pageNo: page } };
        },
        transport: fetchPart,
        results: function (data, page) {
            console.log("result is called by select2");
            var more = (page * 10) <= data.length; // whether or not there are more results available
            return { results: data, more: more };
        }
    },
    formatResult: partFormatResult,
    formatSelection: partFormatSelection,
    dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-20T16:50:47.660

你可以这样做：

```
transport: function (params, success, failure) {

    params.beforeSend = function (request) {
        request.setRequestHeader("Authorization-Token", http.defaults.headers.common['Authorization-Token']);
    };
    var $request = $.ajax(params);

    $request.then(success);
    $request.fail(failure);

    return $request;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-24T18:39:20.653

另一个简单的选择：

```
ajax: {
    beforeSend: function (request) {
        request.setRequestHeader("X-CSRF-TOKEN", csrf_token);
    },
} 
```

# iphone - 从 iPhone 中的音乐文件中获取 NSData

> ID：13134785
> 
> 赞同：2
> 
> 时间：2012-10-30T07:57:03.710
> 
> 标签：iphone, nsdata, assets, mpmediaitem

我已经从我的 iPhone 设备中检索了所有音乐和视频。我现在被困在将它们保存到我的应用程序中，我无法从文件中获取原始数据。任何人都可以帮我找到解决方案。这是我用来获取音乐文件的代码。

```
MPMediaQuery *deviceiPod = [[MPMediaQuery alloc] init];
NSArray *itemsFromGenericQuery = [deviceiPod items];
for (MPMediaItem *media in itemsFromGenericQuery){
 //i get the media item here.
} 
```

如何将其转换为 NSData ？这就是我试图获取数据

```
audioURL = [media valueForProperty:MPMediaItemPropertyAssetURL];//here i get the asset url
NSData *soundData = [NSData dataWithContentsOfURL:audioURL]; 
```

使用它对我来说毫无用处。我力图从`LocalAssestURL`. 对此的任何解决方案。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T09:17:16.937

这不是一项简单的任务——Apple 的 SDK 通常无法为简单任务提供简单的 API。这是我在其中一项调整中使用的代码，以便从资产中获取原始 PCM 数据。您需要将 AVFoundation 和 CoreMedia 框架添加到您的项目中才能使其正常工作：

```
#import <AVFoundation/AVFoundation.h>
#import <CoreMedia/CoreMedia.h>

MPMediaItem *item = // obtain the media item
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

// Get raw PCM data from the track
NSURL *assetURL = [item valueForProperty:MPMediaItemPropertyAssetURL];
NSMutableData *data = [[NSMutableData alloc] init];

const uint32_t sampleRate = 16000; // 16k sample/sec
const uint16_t bitDepth = 16; // 16 bit/sample/channel
const uint16_t channels = 2; // 2 channel/sample (stereo)

NSDictionary *opts = [NSDictionary dictionary];
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:assetURL options:opts];
AVAssetReader *reader = [[AVAssetReader alloc] initWithAsset:asset error:NULL];
NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey,
    [NSNumber numberWithFloat:(float)sampleRate], AVSampleRateKey,
    [NSNumber numberWithInt:bitDepth], AVLinearPCMBitDepthKey,
    [NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,
    [NSNumber numberWithBool:NO], AVLinearPCMIsFloatKey,
    [NSNumber numberWithBool:NO], AVLinearPCMIsBigEndianKey, nil];

AVAssetReaderTrackOutput *output = [[AVAssetReaderTrackOutput alloc] initWithTrack:[[asset tracks] objectAtIndex:0] outputSettings:settings];
[asset release];
[reader addOutput:output];
[reader startReading];

// read the samples from the asset and append them subsequently
while ([reader status] != AVAssetReaderStatusCompleted) {
    CMSampleBufferRef buffer = [output copyNextSampleBuffer];
    if (buffer == NULL) continue;

    CMBlockBufferRef blockBuffer = CMSampleBufferGetDataBuffer(buffer);
    size_t size = CMBlockBufferGetDataLength(blockBuffer);
    uint8_t *outBytes = malloc(size);
    CMBlockBufferCopyDataBytes(blockBuffer, 0, size, outBytes);
    CMSampleBufferInvalidate(buffer);
    CFRelease(buffer);
    [data appendBytes:outBytes length:size];
    free(outBytes);
}

[output release];
[reader release];
[pool release]; 
```

这里`data`将包含曲目的原始 PCM 数据；您可以使用某种编码来压缩它，例如我使用 FLAC 编解码器库。

在此处查看[原始源代码](https://github.com/H2CO3/PodMail/blob/master/PMViewController.m)。

# javafx-2 - javafx 2.2中选择框的容量是多少？

> ID：13134786
> 
> 赞同：0
> 
> 时间：2012-10-30T07:57:07.610
> 
> 标签：javafx-2, javafx

我有2000个数据。我想在运行时将数据绑定到 javafx 2.2 中的选择框。当我将数据绑定到选择框然后显示

```
java.lang.RuntimeException:java.lang.reflect.InvocationTargetException 
```

异常，我的应用程序被挂起。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:59:22.030

相同的绑定是否适用于较小的数据集？

下一个代码对我有用。弹出窗口在第一次出现之前有 1-2 秒的延迟。

```
public class DoHugeChoiceBox extends Application {
    @Override
    public void start(Stage stage) {
        ObservableList<String> list = FXCollections.<String>observableArrayList();
        for (int i = 0; i < 2000; i++) {
            list.add("item " + i);
        }
        ChoiceBox cb = new ChoiceBox(list);
        cb.getSelectionModel().select(1000);

        HBox g = HBoxBuilder.create().children(cb).build();
        stage.titleProperty().bind(cb.valueProperty());

        stage.setScene(new Scene(g));
        stage.setHeight(100);
        stage.setWidth(200);
        stage.show();
    }

    public static void main(String[] args) { launch(); }
} 
```

# c# - 具有生成的 HTML 代码的 Web 应用程序由复选框而不显示消息组成。(Asp.net, C#)

> ID：13134793
> 
> 赞同：0
> 
> 时间：2012-10-30T07:57:40.093
> 
> 标签：c#, javascript, asp.net, alert

我发现奇怪的是，当我检查某些复选框（生成的 HTML 代码）时，子函数没有提醒（或显示消息）正在检查哪个复选框。

我错过了什么吗？

**WebForm.aspx 内部**

```
 <script type="text/javascript">

 function sub()
 {

    for (i=0; i<arrChecks.length; i++)
    {
        var attribute = arrChecks[i].getAttribute("xid")
        if (attribute == elementName)
        {
            // if the current state is checked, unchecked and vice-versa
            if (arrChecks[i].checked)
            {
                arrChecks[i].checked = false;
            } else {
                arrChecks[i].checked = true;
                alert("Checked!");
            }

        } else {
            arrChecks[i].checked = false;
        }
    }

 }

 </script> 
```

**WebForm.cs 内部**

```
 protected void ButtonCheckDate_Click(object sender, EventArgs e)
    {
        SqlConnection conn = ConnectDB("Data Source=JACKSERVERA;Initial Catalog=tablea;User Id=tableuser;Password=tablepassword");

        if ((TextBox2.Text != null) && (TextBox2.Text != ""))
        {
            try
            {
                String res = "";

                SqlCommand command = conn.CreateCommand();
                SqlDataReader reader;
                command.CommandType = System.Data.CommandType.Text;
                command.CommandText = "SELECT * from overviewtable where [dated] = @PDATED";
                command.Parameters.AddWithValue("@PDATED", TextBox2.Text);
                command.Connection = conn;
                sqlstmt.Text = command.CommandText;

                conn.Open();
                reader = command.ExecuteReader();

                if (reader.HasRows)
                {
                    res = res + "<form name=\"input\" runat=\"server\"><table border=1>";
                    while (reader.Read())
                    {
                        res = res + "<tr>";

                        string thetime = (string)reader["time"];
                        string thevenue = (string)reader["venue"];
                        int numfreeseat = (int)reader["freeseat"];

                        int occupiedseat = 0;

                        SqlCommand bkcommand = conn.CreateCommand();
                        SqlDataReader bookinglist;
                        bkcommand.CommandType = System.Data.CommandType.Text;
                        bkcommand.CommandText = "SELECT count(*) from venuea where [dated] = @PDATED";
                        bkcommand.Parameters.AddWithValue("@PTIME", thetime);
                        bkcommand.Connection = conn;
                        sqlstmt.Text = bkcommand.CommandText;
                        bookinglist = bkcommand.ExecuteReader();

                        while (bookinglist.Read())
                        {
                            if (bookinglist.HasRows)
                            {
                                occupiedseat = (int)bookinglist.GetValue(0);
                            }
                        }

                        int leftnumofseat = numfreeseat - occupiedseat;

                        string color = "";
                        Boolean fullyoccupied = false;

                        if (leftnumofseat > 0)
                        {
                            if (leftnumofseat == numfreeseat)
                            {
                                // white
                                color = "#FFFFFF";
                            }
                            else
                            {
                                // light gray - partial occupied
                                color = "#B8B8B8";
                            }
                        }
                        else
                        {
                            // dark gray - fully occupied
                            color = "#505050";
                            fullyoccupied = true;
                        }

                        res = res + "<td bgcolor=\"" + color + "\">";
                        res = res + "Available: " + leftnumofseat + "/" + numfreeseat + "";
                        res = res + "</td>";

                        string checkboxval = TextBox2.Text + "_" + thetime + "_" + thevenue;

                        res = res + "<td>";
                        if (fullyoccupied == false)
                        {
                            res = res + "<input type=\"checkbox\" name=\"xid\" value=\"" + checkboxval + "\" runat=\"server\" />";
                        }
                        else
                        {
                            res = res + "FULL";
                        }
                        res = res + "</td>";

                        res = res + "</tr>";
                    }
                    res = res + "</table><input type=\"submit\" value=\"Submit\" OnClick=\"sub\" runat=\"server\"></form>";
                }
                LabelDateSelection.Text = res;

                conn.Close();

            }
            catch (Exception err)
            {
                errormsg.Text = err.Message;
            }
        }
        else
        {
            LabelDateSelection.Text = "Enter Date!";
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:30:12.137

从您的代码中取出这部分并查看它是否有效`runat=\"server\"`

我不确定您是否也可以在尝试时创建和 ASP.net 服务器控件，并且您正在将输出发送到客户端，同时`runat=\"server\"`由服务器呈现。检查您的 HTML 代码并查看它的外观。

动态创建 HTML 控件或创建简单的 HTML 控件（如果这适用于您的案例）。

看例子如何务实地创建控件

[http://msdn.microsoft.com/en-us/library/kyt0fzt1%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/kyt0fzt1%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:40:24.897

除了 KnowledgeSeeker 提出的观点之外，您无法创建该样式的 asp 控件。

您可以通过使用 FindControl 方法来定位元素并从中获取值来获取创建的复选框的值，或者在 C# 中添加类似于以下内容的代码：

```
for (int i = 0; i < 5; i++)

{

CheckBox chk = new CheckBox();

chk.ID = Convert.ToString(i);

chk.Text = Convert.ToString(i);

form1.Controls.Add(chk);

} 
```

在这种情况下，您将从 0 循环到 5 并创建复选框并将这些控件添加到表单中。

# wcf - 具有 net.tcp 绑定的 WCF 服务（托管在 IIS 7 上）在域用户下不起作用（对于应用程序池）

> ID：13134795
> 
> 赞同：2
> 
> 时间：2012-10-30T07:57:50.013
> 
> 标签：wcf, security, iis-7, active-directory, net.tcp

我有一个具有以下配置的 WCF 服务

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.web>
   <compilation debug="true" />
</system.web>

<system.serviceModel>
<bindings>
  <netTcpBinding>
    <binding name="CommonWindowsBinding" maxReceivedMessageSize="40000000">
      <security mode="TransportWithMessageCredential" >
        <transport clientCredentialType="None"/>
        <message clientCredentialType="Windows" />
      </security>
    </binding>
  </netTcpBinding>
</bindings>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

<services>
  <service behaviorConfiguration="CommonBehavior" name="Megatec.MasterTourService.AdminService">
    <endpoint address="Windows" binding="netTcpBinding" bindingConfiguration="CommonWindowsBinding" name="Megatec.MasterTourService.Contracts.IAdminServiceWindows" contract="Megatec.MasterTourService.Contracts.IAdminService">
      <identity>
        <dns value="WCFServer" />
      </identity>
    </endpoint>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="CommonBehavior">
      <dataContractSerializer maxItemsInObjectGraph="10000000" />
      <serviceMetadata httpGetEnabled="true" policyVersion="Policy15" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceAuthorization impersonateCallerForAllOperations="true" />
      <serviceCredentials>

        <clientCertificate>
          <authentication certificateValidationMode="PeerTrust" />
        </clientCertificate>

        <serviceCertificate findValue="WCFServer" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />

        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="Megatec.MasterTourService.Security.CustomUserNameValidator, Megatec.MasterTourService.Security" />
        </serviceCredentials>
       </behavior>
     </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

代码

```
public class AdminService : BaseAuthService, IAdminService
{
    [OperationBehavior(Impersonation = ImpersonationOption.Required)]
    public bool HasRole(string roleName)
    {
        //work with database
    }
} 
```

我在 IIS 7 上托管此服务，对于我设置域用户 (Master\MyLogin) 的应用程序池。我需要域用户进行委派（根据[步骤 4](http://msdn.microsoft.com/en-us/library/ff650896.aspx)）。

当我从本地客户端（同一台计算机，在 Master\MyLogin 或其他域用户下）使用服务时，它工作正常。但是当我尝试从另一台网络计算机使用服务时，它失败了。ApplicationPoolIdentity 一切正常。

Master\MyLogin 是具有服务的计算机上的管理员（但他不是域管理员）。

也许，应该授予 Master\MyLogin 的权限？

**更新**。客户端异常。

起初，有 SecurityNegotiationException。接下来，我添加了部分

```
<identity>
    <userPrincipalName value="myLogin@Mydomain" />
</identity> 
```

新异常是 MessageSecurityException。

`The identity check failed for the outgoing message. The expected identity is "identity(http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn)" for the 'net.tcp://dev4-10:5012/IISTest/AdminService.svc/Windows' target endpoint.`

我应该如何配置`<identity>`客户端和服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:04:38.617

不幸的是，Transport/TransportWithMessageCredential 安全模式不支持使用客户端凭据进行此类工作。我已经改变`CommonWindowsBinding`了以下方式

```
 <binding name="CommonWindowsBinding" maxReceivedMessageSize="40000000">
      <security mode="Message">
        <message clientCredentialType="Windows" />
      </security>
    </binding> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:21:55.497

我认为您必须使用 TransportWithMessageCredential 而不仅仅是 Transport。仅使用将使您的服务通过 HTTPS，但与使用凭据进行身份验证无关。

如果您使用，您可以使用 HTTPS 并拥有用户名和密码。

[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms789011.aspx)

如果您真的只想使用 Transport，请从您的服务配置中取出节点。

# zend-framework2 - 如何将自定义样式附加到 zf2 表单中

> ID：13134802
> 
> 赞同：2
> 
> 时间：2012-10-30T07:58:24.830
> 
> 标签：zend-framework2, zfcuser

也许这是明显的问题，但您能否告诉我如何将自定义 css 样式添加到由 zend 框架 2 中的标准视图助手创建的表单中？

我试图将一些样式附加到 ZfcUser 创建的表单

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T08:29:05.497

分配类属性:)

```
 $this->add(array(
        'name' => 'element_name',
        'options' => array(
            'label' => 'element_label'
        ),
        'attributes' => array(
            'type' => 'element_type',
            'class'  => 'testing'
        )
    )); 
```

由于您想扩展现有表单，您可以获取表单，然后`$form->get('elementname')->setAttribute('class','blubb');`使用您的自定义表单覆盖 ZfCUser 中的服务表单，该表单附加了所有样式，如上例所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T03:09:07.140

请参考这篇[文章](https://stackoverflow.com/questions/13931834/zend-framework-2-form-element-decorators/20183694)，也许 Partial 方法是灵活和轻便的选择。

# c# - 在 c# 中使用 asp.net 绘制图表

> ID：13134809
> 
> 赞同：0
> 
> 时间：2012-10-30T07:58:57.483
> 
> 标签：c#, timeline, charts, timelinemarkers

我们可以设计一个带有 y 轴值的点图，比如 xyz、abc 等，x 轴带有日期。这意味着 xyz 可能在 28/11/2012，但实际的 x 轴值会以一个月的间隔固定。

该点应映射在正确的位置。

如果我们可以设计这个，那么请告诉我如何设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:19:19.360

使用标准值`Points`并将日期添加为`AxisLabel`

```
public Series CreateSeries(Dictionary<DateTime, double> values)
{
    var series = new Series();

    //Our x Value   
    var x = 0;
    //Loop through our values-Collection ordered by the date
    foreach (var value in values.OrderBy(item => item.Key))
    {
        //Add a point using our dummy value
        series.Points.Add(
            new DataPoint(x, value.Value) 
            {
                //AxisLabel sets the X-Axis-Label - here: our datestring
                AxisLabel = item.Key.ToShortDateString() 
            });
        //increment our dummy
        x++;
    }

    return series;
} 
```

# python - pybrain 结果不佳

> ID：13134810
> 
> 赞同：5
> 
> 时间：2012-10-30T07:59:02.307
> 
> 标签：python, neural-network, xor, pybrain

我想知道我是否做错了什么，或者结果是否真的那么差。让我们假设文档中显示的最简单的 NN 示例：

```
>>>net = buildNetwork(2, 3, 1, bias=True)
>>> ds = SupervisedDataSet(2, 1)
>>> ds.addSample((0, 0), (0,))
>>> ds.addSample((0, 1), (1,))
>>> ds.addSample((1, 0), (1,))
>>> ds.addSample((1, 1), (0,))
>>> trainer = BackpropTrainer(net, ds)
>>> trainer.trainUntilConvergence()
>>> print net.activate((0,0))
>>> print net.activate((0, 1))
>>> print net.activate((1, 0))
>>> print net.activate((1, 1)) 
```

例如

```
>>> print net.activate((1,0))
[ 0.37855891]
>>> print net.activate((1,1))
[ 0.6592548] 
```

预期为 0。我知道我显然可以四舍五入，但对于这样一个简单的示例，我仍然希望网络更加精确。它可以在这里被称为“工作”，但我怀疑我遗漏了一些重要的东西，因为这非常不可用......

问题是，如果你设置`verbose=True`为你的教练，你会看到非常小的错误（比如总错误：0.0532936260399）

我会假设网络的错误是 5%，那么在那之后激活功能怎么能这么多呢？

我显然将 pybrain 用于更复杂的事情，但我有同样的问题。即使网络说错误约为 0.09 左右，我也有大约 50% 的测试样本出错。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T09:48:40.747

可以在[此处](https://stackoverflow.com/questions/12050460/neural-network-training-with-pybrain-wont-converge "这里")找到类似的问题。从那里看来，这个训练功能在这里并不适用，因为并非所有数据都用于训练，而是一些数据用于交叉验证。尝试多次将数据点添加到训练集中。

此外，这个例子似乎需要有一个动量项才能起作用。有一个使用 pybrain 训练 xor 的示例，[这里](http://cs.union.edu/~striegnk/courses/cancomputersthink/assignments/week9_th/xor.py)使用了一种不同的训练方法，当我将层数设置为 3 时，这对我有用。这使用了 0.99 的动量项。

我会将其作为评论发布，因为它不能完全回答问题，但我没有足够的评论点...

# sql-server - 单独的数据库来存储日志和异常

> ID：13134815
> 
> 赞同：4
> 
> 时间：2012-10-30T07:59:32.443
> 
> 标签：sql-server, logging, rdbms, nlog, elmah

在企业项目中，我需要记录大量数据（原始值、修改值、更改数据的用户等）。我使用 NLog 记录此类数据，使用 ELMAH 记录异常。我不确定是使用单独的数据库来存储日志信息还是使用主数据库。使用单独数据库的优点是：

*   日志和异常不是业务的一部分，因此它们不需要在主数据库中。
*   主数据库上的负载将减少，从而获得更好的性能。

缺点是：

*   如果日志数据库停止，我们将错过在这个项目中非常重要的日志。（尽管如果记录不成功，我们可以阻止保存）
*   处理交易会很困难。（如果日志保存了，但数据没有）

当然还有更多的优点和缺点，但总而言之，我需要知道：在企业软件中使用大型事务性 RDBMS 的最佳实践是什么？或者它可能会因某些因素而因项目而异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T08:28:34.437

您希望将错误记录与数据访问分离和分离。如果数据访问回滚，您希望保留日志访问*并另外*记录它回滚的事实。如果数据库已关闭，您确实需要记录数据库*已*关闭。如果您的日志记录在事务上与数据访问一致，那么您的系统每分钟可能会经历 10 次回滚，但您的错误日志不会显示任何内容！

日志记录应该是它自己的存储（数据库）的另一个原因是，通常关系不是 1:1，错误日志记录通常聚合来自多个系统报告的错误，可能由多个数据库支持。

用于提交错误报告的基础架构应处理错误日志存储库的不可用性（即日志记录数据库已关闭或网络已分区），使用可用的许多排队解决方案之一（[MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)、[RabbitMQ](http://www.rabbitmq.com/)、[ZeroMQ](http://www.zeromq.org/)等）。

# objective-c - BEGIN IMMEDIATE 可能在 0:8/尝试写入只读数据库后意外无法步进

> ID：13134817
> 
> 赞同：4
> 
> 时间：2012-10-30T07:59:41.667
> 
> 标签：objective-c, ios, uitableview, core-data, mpmediaitem

使用 a`UITableView`显示`MPMediaItems`我的日志时，会收到以下消息：

```
BEGIN IMMEDIATE could unexpectedly not be stepped after 0: 8/attempt to write a readonly database 
```

但我不知道这意味着什么。你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:33:43.397

可能意味着您正在使用 iTunes Match，并且您可能对这些日志消息无能为力。

编辑：在我的机器上进一步登录表明此消息是在您调用时由某些集合生成的`representativeItem`。因此，如果您正在调用该方法，也许您可​​以通过避免该调用（例如，`items[0]`改为调用）来避免这些日志消息。

但是，结论仍然是，您可能没有做错任何事情。

# javascript - 动态添加元素到 SVG，元素添加到 HTML DOM 但未渲染

> ID：13134818
> 
> 赞同：1
> 
> 时间：2012-10-30T07:59:44.237
> 
> 标签：javascript, html, svg

我有一个*SVG*，其中包含一个*矩形*内的*文本*。我想在某些用户交互时更改文本。

 *我遇到的大多数代码都是这样的：（*示例代码用于添加圆圈*）

```
var shape = document.createElementNS("http://www.w3.org/2000/svg", "circle");
shape.setAttribute("cx", 25);
shape.setAttribute("cy", 25);
shape.setAttribute("r",  20);
shape.setAttribute("fill", "green"); 
```

当我使用：

```
function writeSVG() {
        clearSVG();
        var name = document.getElementById('txtName').value;
        var txtNode = '<text id="newTxt" x="300" y="300">' + name + '</text>';
        $('#svgElem').append(txtNode);
        $('#popUp').hide();
    }

//Removes all text from SVG rectangle
    function clearSVG() {
        $('#controls text').remove();
    } 
```

我的*SVG*直接写入*HTML*

```
 <div id="controls">
        <svg id="svgElem" height="600" xmlns="http://www.w3.org/2000/svg" version="1.1">    Sorry, your browser does not support SVG.
        <rect id="rectSVG" width="500" height="500" style="fill:#FFFFFF;stroke:black;stroke-width:2;" onclick="launchPopUp();" />
       <text id="defaultTxt" x="200" y="200">Click in here!</text>
       </svg>
    </div> 
```

**注意**：我使用的是 Safari 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:13:47.120

您创建`<text>`元素的方式将其放入错误的命名空间。创建一个字符串然后通过 .append() 解析它会将元素放入 HTML 命名空间，而不是 SVG 命名空间。

`<svg>`您必须在解析之前和之前包装您的字符串`</svg>`，然后将生成的根节点的子节点附加到`<svg>`DOM 中的元素。*

# wcf - 在 AppDomain 中加载 WCF 库时无法加载文件或程序集

> ID：13134819
> 
> 赞同：-2
> 
> 时间：2012-10-30T07:59:47.497
> 
> 标签：wcf, appdomain

我有一个带有服务库的 WCF 服务。我想在新的 AppDomain 中创建一个类库的实例，但这会引发异常：

> 无法加载文件或程序集“ClassLibrary1.dll”或其依赖项之一。

```
 //Class library
 public class Class1 : MarshalByRefObject
 {    
        public string Method1(int i)
        {
            return "int=" + i;
        }
 }

//Class WCF Service
public class Service1 : IService1
{
     public string GetData(int value)
     {
          string name = typeof(Class1).Assembly.GetName().FullName;
          string type_name = typeof(Class1).FullName;
          var _Dom = AppDomain.CreateDomain("SubDomain", null, info);

          //why is it not working? 
          //exception - not found assembly file
          var _Factory = _Dom.CreateInstanceAndUnwrap(name, type_name) as Class1;

          //it's worked
          //var _Factory = AppDomain.CurrentDomain.CreateInstanceAndUnwrap(name, type_name) as Class1;

          return _Factory.Method1(value);
     }
}

//Client method to service
static void Main(string[] args)
{
    using (Service1Client cc = new Service1Client())
    {
        Console.WriteLine("Client opened.");
        Console.Write("Enter integer: ");

        int i = 0;
        int.TryParse(Console.ReadLine(), out i);
        try
        {
            var r = cc.GetData(i);
            Console.WriteLine(r);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
        cc.Close();
        Console.WriteLine("Client closed. Press Enter key to exit...");
        Console.ReadLine();
    }
} 
```

[链接到解决方案](https://docs.google.com/open?id=0B1IeQ2R659MVVjdFbXJadGluckk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:28:39.197

//自托管解决了问题

```
Uri url = new Uri("http://localhost:7777/Service1");
using (ServiceHost host = new ServiceHost(typeof(Service1), url))
{
    host.AddServiceEndpoint(typeof(IService1), new WSHttpBinding(), "");
    ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
    smb.HttpGetEnabled = true;
    host.Description.Behaviors.Add(smb);
    host.Open();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T00:54:12.983

设置 AppDomains 基本目录和相对目录至少为我解决了这个问题

```
string basePath = AppDomain.CurrentDomain.BaseDirectory;
string relativePath = AppDomain.CurrentDomain.RelativeSearchPath;
m_domain = AppDomain.CreateDomain("MyDomain", null, basePath, relativePath, false); 
```

# haskell - 函子如何在 Haskell 中工作？

> ID：13134825
> 
> 赞同：53
> 
> 时间：2012-10-30T08:00:13.763
> 
> 标签：haskell, functional-programming, functor

我正在尝试学习 Haskell，并且已经完成了所有基础知识。但现在我被困住了，试图让我的头脑围绕函子。

我读过“仿函数将一个类别转换为另一个类别”。这是什么意思？

我知道有很多问题要问，但是谁能给我一个**简单的函子英文**解释或者一个**简单的用例**？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-10-30T10:47:09.820

我不小心写了一个

# Haskell 函子教程

我将使用示例回答您的问题，并将类型放在下面的评论中。

注意类型中的模式。

## `fmap`是一个概括`map`

函子是为了给你`fmap`功能。`fmap`像 一样工作`map`，所以让我们先检查一下`map`：

```
map (subtract 1) [2,4,8,16] = [1,3,7,15]
--    Int->Int     [Int]         [Int] 
```

所以它使用列表中的`(subtract 1)` *函数*。事实上，对于列表，`fmap`它的作用正是`map`如此。这次让我们将所有内容乘以 10：

```
fmap (* 10)  [2,4,8,16] = [20,40,80,160]
--  Int->Int    [Int]         [Int] 
```

我将此描述为在列表上映射乘以 10 的函数。

## `fmap`也适用于`Maybe`

我还能做什么`fmap`？让我们使用 Maybe 数据类型，它有两种类型的值，`Nothing`和`Just x`. （您可以用`Nothing`表示未能获得答案，而`Just x`表示答案。）

```
fmap  (+7)    (Just 10)  = Just 17
fmap  (+7)     Nothing   = Nothing
--  Int->Int  Maybe Int    Maybe Int 
```

好的，再次，在 Maybe*内部*`fmap`使用。我们也可以 fmap 其他函数。找到一个列表的长度，所以我们可以 fmap 它`(+7)` *`length``Maybe [Double]`*

 *```
fmap    length             Nothing                      = Nothing
fmap    length    (Just [5.0, 4.0, 3.0, 2.0, 1.573458]) = Just 5
--  [Double]->Int         Maybe [Double]                  Maybe Int 
```

实际上`length :: [a] -> Int`，但我在这里使用它，`[Double]`所以我专门使用它。

让我们`show`用来把东西变成字符串。秘密的实际类型`show`是`Show a => a -> String`，但这有点长，我在这里使用它`Int`，所以它专门用于`Int -> String`.

```
fmap  show     (Just 12)  = Just "12"
fmap  show      Nothing   = Nothing
-- Int->String  Maybe Int   Maybe String 
```

此外，回顾列表

```
fmap   show     [3,4,5] = ["3", "4", "5"]
-- Int->String   [Int]       [String] 
```

## `fmap`适用于`Either something`

让我们在稍微不同的结构上使用它，`Either`. 类型`Either a b`的值是`Left a`值或`Right b`值。有时我们使用 Either 来表示成功`Right goodvalue`或失败`Left errordetails`，有时只是将两种类型的值混合在一起。无论如何，Either 数据类型的函子仅适用于`Right`- 它不理会`Left`值。如果您使用 Right 值作为成功的值，这尤其有意义（事实上，我们无法*使其*在两者上都起作用，因为类型不一定相同）。让我们以类型`Either String Int`为例

```
fmap (5*)      (Left "hi")     =    Left "hi"
fmap (5*)      (Right 4)       =    Right 20
-- Int->Int  Either String Int   Either String Int 
```

它可以`(5*)`在 Either 内部工作，但对于 Eithers，只有`Right`值会发生变化。但是我们可以反过来做`Either Int String`，只要函数在字符串上工作。让我们放在`", cool!"`最后，使用`(++ ", cool!")`.

```
fmap (++ ", cool!")          (Left 4)           = Left 4
fmap (++ ", cool!") (Right "fmap edits values") = Right "fmap edits values, cool!"
--   String->String    Either Int String          Either Int String 
```

## 用`fmap`在IO上特别爽

现在我最喜欢使用 fmap 的方法之一是在`IO`值上使用它来编辑一些 IO 操作给我的值。让我们做一个例子，让你输入一些东西，然后立即打印出来：

```
echo1 :: IO ()
echo1 = do
    putStrLn "Say something!"
    whattheysaid <- getLine  -- getLine :: IO String
    putStrLn whattheysaid    -- putStrLn :: String -> IO () 
```

我们可以用一种让我感觉更整洁的方式来写：

```
echo2 :: IO ()
echo2 = putStrLn "Say something" 
        >> getLine >>= putStrLn 
```

`>>`做一件又一件的事情，但我喜欢这样做的原因是因为`>>=`接受了`getLine`给我们的字符串并将其提供给`putStrLn`接受字符串的字符串。如果我们只想问候用户怎么办：

```
greet1 :: IO ()
greet1 = do
    putStrLn "What's your name?"
    name <- getLine
    putStrLn ("Hello, " ++ name) 
```

如果我们想以更简洁的方式编写它，我有点卡住了。我得写

```
greet2 :: IO ()
greet2 = putStrLn "What's your name?" 
         >> getLine >>= (\name -> putStrLn ("Hello, " ++ name)) 
```

这**并不**比`do`版本好。事实上，`do`符号就在那里，所以你不必这样做。但能`fmap`出手相救吗？是的，它可以。`("Hello, "++)`是一个函数，我可以在 getLine 上进行 fmap！

```
fmap ("Hello, " ++)  getLine   = -- read a line, return "Hello, " in front of it
--   String->String  IO String    IO String 
```

我们可以这样使用它：

```
greet3 :: IO ()
greet3 = putStrLn "What's your name?" 
         >> fmap ("Hello, "++) getLine >>= putStrLn 
```

我们可以在任何给定的东西上使用这个技巧。让我们不同意输入的是“True”还是“False”：

```
fmap   not      readLn   = -- read a line that has a Bool on it, change it
--  Bool->Bool  IO Bool       IO Bool 
```

或者让我们只报告文件的大小：

```
fmap  length    (readFile "test.txt") = -- read the file, return its length
--  String->Int      IO String              IO Int
--   [a]->Int        IO [Char]              IO Int     (more precisely) 
```

# 结论：有什么作用`fmap`，它有什么作用？

如果您一直在观察类型中的模式并考虑示例，您会注意到 fmap 采用一个对某些值起作用的函数，并将该函数应用于以某种方式具有或产生这些值的东西，编辑这些值。（例如 readLn 是为了读取 Bool，所以有 type`IO Bool`有一个 Boolean 值，因为它产生 a `Bool`， eg2`[4,5,6]`有`Int`s 。）

```
fmap :: (a -> b) -> Something a -> Something b 
```

这适用于`Something`列表（书面`[]`）`Maybe`、、、、`Either String`和大量`Either Int`的`IO`东西。如果它以合理的方式工作（有一些规则 - 稍后），我们称它为 Functor。fmap 的实际类型是

```
fmap :: Functor something => (a -> b) -> something a -> something b 
```

但为了简洁起见，我们通常替换`something`为`f`。不过，这对编译器来说都是一样的：

```
fmap :: Functor f => (a -> b) -> f a -> f b 
```

回顾一下类型并检查它是否总是有效 -`Either String Int`仔细考虑 - 那是什么`f`时候？

## 附录：什么是 Functor 规则，我们为什么要有它们？

`id`是恒等函数：

```
id :: a -> a
id x = x 
```

以下是规则：

```
fmap id  ==  id                    -- identity identity
fmap (f . g)  ==  fmap f . fmap g  -- composition 
```

首先是身份身份：如果您映射什么都不做的函数，那不会改变任何事情。这听起来很明显（很多规则都这样做），但您可以将其解释`fmap`为*只*允许更改值，而不是结构。`fmap`不允许`Just 4`变成`Nothing`、 或、 或`[6]`into ，因为不仅仅是数据发生了变化 - 该数据的结构或上下文发生了变化。`[1,2,3,6]``Right 4``Left 4`

当我在做一个图形用户界面项目时，我曾经遇到过这个规则——我希望能够编辑这些值，但是如果不改变下面的结构我就无法做到这一点。没有人会真正注意到差异，因为它具有相同的效果，但意识到它不遵守函子规则让我重新思考了我的整个设计，现在它更干净、更流畅、更快了。

其次是组合：这意味着您可以选择是一次 fmap 一个函数，还是同时 fmap 两个函数。如果`fmap`不考虑值的结构/上下文并使用其给定的功能对其进行编辑，则它也将适用于此规则。

数学家有一个秘密的第三条规则，但我们不称它为 Haskell 中的规则，因为它看起来就像一个类型声明：

```
fmap :: (a -> b) -> something a -> something b 
```

例如，这会阻止您将该函数仅应用于列表中的第一个值。该法律由编译器执行。

为什么我们有它们？确保`fmap`不会在幕后偷偷做任何事情或改变我们没有预料到的任何事情。它们不是由编译器强制执行的（要求编译器在编译您的代码之前证明一个定理是不公平的，并且会减慢编译速度 - 程序员应该检查）。这意味着您可以稍微欺骗法律，但这是一个糟糕的计划，因为您的代码可能会产生意想不到的结果。

Functor 的法则是确保`fmap`在没有任何其他更改的情况下公平、平等、无处不在地应用你的函数。这是一个很好的、干净的、清晰的、可靠的、可重复使用的东西。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-30T09:04:56.800

一个模糊的解释是 a`Functor`是某种容器和一个关联的函数`fmap`，它允许你改变所包含的任何内容，给定一个转换所包含的函数。

例如，列表就是这种容器，这样就可以`fmap (+1) [1,2,3,4]`产生`[2,3,4,5]`.

`Maybe`也可以做成函子，这样就可以`fmap toUpper (Just 'a')`产生`Just 'A'`.

一般类型的`fmap`节目非常整齐地显示了正在发生的事情：

```
fmap :: Functor f => (a -> b) -> f a -> f b 
```

专门的版本可能会更清楚。这是列表版本：

```
fmap :: (a -> b) -> [a] -> [b] 
```

还有可能版本：

```
fmap :: (a -> b) -> Maybe a -> Maybe b 
```

`Functor`您可以通过查询 GHCI来获取有关标准实例的信息，`:i Functor`并且许多模块定义了更多`Functor`s 实例（和其他类型类）。

不过，请不要把“容器”这个词看得太重。`Functor`s 是一个定义明确的概念，但您通常可以通过这个模糊的类比来推断它。

了解正在发生的事情的最佳选择是简单地阅读每个实例的定义，这应该让您对正在发生的事情有一个直觉。从那里开始，您只需迈出一小步就可以真正正式地理解您对这个概念的理解。需要添加的是澄清我们的“容器”到底是什么，并且每个实例都非常满足一对简单的定律。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-31T00:27:34.713

重要的是要在头脑中区分仿函数本身和应用了仿函数的类型中的值。仿函数本身是一个类型构造函数，如`Maybe`,`IO`或列表构造函数`[]`。仿函数中的值是应用了该类型构造函数的类型中的某个特定值。eg`Just 3`是类型中的一个特定值`Maybe Int`（该类型是`Maybe`应用于类型的函子`Int`），`putStrLn "Hello World"`是类型中的一个特定值`IO ()`，并且`[2, 4, 8, 16, 32]`是类型中的一个特定值`[Int]`。

我喜欢将应用函子的类型中的值视为与基本类型中的值“相同”，但具有一些额外的“上下文”。人们经常将容器类比用于函子，这对相当多的函子很自然地工作，但是当你不得不说服自己`IO`或者`(->) r`就像一个容器时，它变得更像是一个障碍而不是帮助。

所以如果an`Int`代表一个整数值，那么a`Maybe Int`代表一个可能不存在的整数值（“可能不存在”就是“上下文”）。An`[Int]`表示具有多个可能值的整数值（这与列表函子的解释与列表单子的“非确定性”解释相同）。An`IO Int`表示一个整数值，其精确值取决于整个 Universe（或者，它表示可以通过运行外部进程获得的整数值）。A`Char -> Int`是任何`Char`值的整数值（“`r`作为参数的函数”是任何类型的函子`r`；`r`as`Char` `(->) Char`是类型构造函数，它是函子，`Int``(->) Char Int``Char -> Int`中缀表示法）。

*使用通用*函子唯一可以做的就是`fmap`使用类型`Functor f => (a -> b) -> (f a -> f b)`。`fmap`将对正常值进行操作的函数转换为对具有由仿函数添加的附加上下文的值进行操作的函数；对于每个仿函数，这到底是做什么的是不同的，但你可以对所有仿函数都这样做。

因此，`Maybe`函子`fmap (+1)`是计算一个比其输入的可能不存在整数高 1 的可能不存在整数 1 的函数。使用列表函子`fmap (+1)`是计算比其输入的非确定整数高 1 的非确定整数的函数。使用`IO`函子，`fmap (+1)`是计算比其输入整数高 1 的整数的函数 - 其值取决于外部宇宙。使用`(->) Char`函子，`fmap (+1)`是一个将 1 加到依赖于 a 的整数的函数`Char`（当我将 a`Char`输入到返回值时，我得到的值比将其输入`Char`到原始值得到的值高 1）。

但一般来说，对于一些未知的仿函数`f`，`fmap (+1)`应用到一些值中的是普通s上`f Int`的函数的“仿函数版本” 。它在这个特定函子所具有的任何“上下文”中将整数加 1。`(+1)``Int`

就其本身而言，`fmap`不一定有用。通常，当您编写一个具体的程序并使用一个仿函数时，您正在使用一个特定的仿函数，并且您通常认为它对*那个特定的仿函数*`fmap`做了什么。当我使用 时，我通常不会将我的值视为不确定的整数，我只是将它们视为整数列表，而且我的想法与我的想法相同。*`[Int]``[Int]``fmap``map`*

 *那么为什么要打扰函子呢？为什么不只拥有`map`for 列表、`applyToMaybe`for `Maybe`s 和`applyToIO`for `IO`s？然后每个人都会知道他们在做什么，而没有人需要理解函子等奇怪的抽象概念。

关键是要认识到那里有*很多*函子。一开始几乎所有的容器类型（因此容器类比函子*是*什么）。它们中的每一个都有对应于 的操作`fmap`，即使我们没有函子。每当您仅根据`fmap`操作（或`map`，或为您的特定类型调用的任何内容）编写算法时，如果您根据函子而不是您的特定类型编写算法，那么它适用于**所有**函子。

它也可以作为一种文档形式。如果我将我的列表值之一交给您编写的对列表进行操作的函数，它可以做很多事情。但是，如果我将列表交给您编写的对任意函子中的值进行操作的函数，那么我**知道**您的函数的实现不能使用列表功能，只能使用函子功能。

回想一下如何在传统的命令式编程中使用仿函数的东西可能有助于看到好处。诸如数组、列表、树等容器类型通常会有一些用于迭代它们的模式。尽管库通常会提供标准的迭代接口来解决这个问题，但不同的容器可能会略有不同。但是每次你想要迭代它们时，你仍然最终会编写一个小的 for 循环，当你想要做的是为容器中的每个项目计算一个结果并收集你通常最终混合在逻辑中的所有结果时用于构建新容器。

`fmap`是你将编写的那种形式的**每个**for 循环，在你坐下来编程之前，由库编写者一劳永逸地排序。此外，它还可以与类似的东西一起使用`Maybe`，`(->) r`这可能不会被视为与在命令式语言中设计一致的容器接口有任何关系。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-30T09:32:59.713

在 Haskell 中，仿函数捕获了拥有“东西”容器的概念，这样您就可以在不改变容器形状的情况下操纵这些“东西”。

Functors 提供了一个函数 ，`fmap`它可以让你做到这一点，通过获取一个常规函数并将其从一种元素的容器“提升”到另一个函数：

```
fmap :: Functor f => (a -> b) -> (f a -> f b) 
```

例如，`[]`列表类型构造函数是一个函子：

```
> fmap show [1, 2, 3]
["1","2","3"] 
```

许多其他 Haskell 类型的构造函数也是如此，例如`Maybe`和`Map Integer`¹：

```
> fmap (+1) (Just 3)
Just 4
> fmap length (Data.Map.fromList [(1, "hi"), (2, "there")])
fromList [(1,2),(2,5)] 
```

请注意，`fmap`不允许更改容器的“形状”，因此，例如，如果您`fmap`是一个列表，则结果具有相同数量的元素，如果您`fmap`是 a`Just`它不能成为一个`Nothing`. 用正式的术语来说，我们要求`fmap id = id`，即如果你`fmap`是恒等函数，没有任何变化。

到目前为止，我一直在使用“容器”这个术语，但它实际上比这更笼统。例如，`IO`也是一个函子，在这种情况下我们所说的“形状”是指`fmap`在一个`IO`动作上不应该改变副作用。事实上，任何 monad 都是仿函数²。

在范畴论中，函子允许你在不同的范畴之间进行转换，但在 Haskell 中我们实际上只有一个范畴，通常称为 Hask。因此，Haskell 中的所有函子都从 Hask 转换为 Hask，所以它们就是我们所说的 endofunctors（从一个类别到自身的函子）。

以最简单的形式，函子有点无聊。只需一项操作，您就可以做很多事情。但是，一旦开始添加操作，您就可以从常规函子到应用函子再到 monad，事情很快就会变得更有趣，但这超出了这个答案的范围。

[¹但`Set`不是，因为它只能存储`Ord`类型。函子必须能够包含任何类型。]
[²由于历史原因，`Functor`不是 的超类`Monad`，虽然很多人认为应该是。]

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-30T09:38:43.027

让我们看看类型。

```
Prelude> :i Functor
class Functor f where fmap :: (a -> b) -> f a -> f b 
```

但是，这是什么意思？

首先，`f`这里是一个类型变量，它代表一个类型构造函数：`f a`是一个类型；`a`是代表某种类型的类型变量。

其次，给定一个函数`g :: a -> b`，你会得到`fmap g :: f a -> f b`. ie`fmap g`是一个函数，将类型的东西转换为类型`f a`的东西`f b`。请注意，我们无法获取类型`a`或`b`此处的内容。该函数`g :: a -> b`以某种方式用于处理类型的事物`f a`并将它们转换为类型的事物`f b`。

注意`f`是一样的。只有另一种类型发生变化。

这意味着什么？这可能意味着很多事情。`f`通常被视为东西的“容器”。然后，`fmap g`可以`g`对这些容器的内部进行操作，而不会打开它们。结果仍然被封闭在“内部”，类型类`Functor`没有为我们提供打开它们或窥视内部的能力。我们得到的只是不透明事物内部的一些转变。任何其他功能都必须来自其他地方。

另请注意，这并不是说这些“容器”只携带一种类型的“东西” `a`；它的“内部”可以有许多单独的“事物”，但都是相同的类型`a`。

最后，函子的任何候选人都必须遵守[函子定律](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Functor.html)：

```
fmap id      ===  id
fmap (h . g) ===  fmap h . fmap g 
```

请注意，这两个`(.)`运算符的类型是不同的：

```
 g  :: a -> b                         fmap g  :: f a -> f b
 h      ::      b -> c           fmap h           ::        f b -> f c
----------------------          --------------------------------------
(h . g) :: a      -> c          (fmap h . fmap g) :: f a        -> f c 
```

这意味着无论在`a`,`b`和`c`类型之间存在什么样的关系，通过*连接线*（可以说是*`g`*和*`h`*），也存在于`f a`,`f b`和`f c`类型之间，通过连接函数和*的线*。*`fmap g`**`fmap h`*

或者，任何连通图可以在“左侧”绘制，在`a, b, c, ...`世界上，都可以在“右侧”绘制，在`f a, f b, f c, ...`世界上通过将函数`g, h, ...`变为函数`fmap g, fmap h, ...`，并将函数本身也`id :: a -> a`变为函数，由函子定律。`fmap id``id :: f a -> f a`**

# php - 防止 gettext 的缓存

> ID：13134827
> 
> 赞同：1
> 
> 时间：2012-10-30T08:00:18.970
> 
> 标签：php, caching, localization, gettext, po

如何在开发阶段禁用 gettext 缓存，以便在不重新启动 apache 的情况下修改 mo 文件？

（在[http://php.net/manual/es/book.gettext.php](http://php.net/manual/es/book.gettext.php)中为这个任务提出了一个类的一部分，但它不起作用，特别是它使用未定义的常量`GETTEXT_CACHING`，我也听说 Zend_Translate 剂量没有这个问题，它使用了什么技术？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:21:24.493

`Zend_Translate`实现了自己的mo文件阅读器，所以就像解析文件一样。

这是我知道避免缓存的唯一解决方案。

# javascript - 根据内容调整 iframe 的大小

> ID：13134830
> 
> 赞同：0
> 
> 时间：2012-10-30T08:00:31.457
> 
> 标签：javascript, css, html

我正在尝试开发这个网站。我是 javascript 的初学者，所以我实际上并没有弄清楚很多代码，因为我专注于 html 和 css。

有没有一种方法可以动态调整 iframe 的大小但仍然有滚动条？就像我的 iframe 显示太多项目一样，它会根据内容进行调整，但不够大，无法实际调整页面的整个高度。我有这个调整 iframe 的脚本，但如果它有很多要显示的内容，我不希望它太大。

```
<!--
function autoResize(id){
    var newheight;

    if(document.getElementById){
        newheight=document.getElementById(id).contentWindow.document.body.scrollHeight;
        }

    document.getElementById(id).height= (newheight) + "px";
}
//-->
</script> 
```

任何帮助深表感谢。

编辑：我只需要 iframe 自动调整大小。它会调整大小，但当内容显示更长的数据集时，它不会变小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:21:20.520

您可以使用此 CSS 在 iframe 显示的页面中显示滚动。

```
html {
    overflow: -moz-scrollbars-vertical; 
    overflow-y: scroll;
} 
```

# php - 在 PDO 中获取特定返回的行信息

> ID：13134831
> 
> 赞同：0
> 
> 时间：2012-10-30T08:00:33.987
> 
> 标签：php, pdo, record, fetch

我有一个表存储登录信息，例如日期、时间等。每当用户登录我的网站时，我都会将这些信息存储在表中。另外我想告诉他他上次登录的时间，所以我需要向他显示最后第二行的信息。
我怎样才能在 PDO 中做到这一点？我写了这段代码，但它返回最后一条记录，而不是我需要的。

```
$sql2 = "SELECT date,hour FROM tbl_logins WHERE uid = ? ORDER BY id DESC LIMIT 1";
$q = $db->prepare($sql2);
$q->execute(array($_SESSION['uid']));
$r = $q->fetch();
$fdate = $r['date'];
$hour = $r['hour']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:14:38.940

简单回答：确认登录后，检索上次登录信息：

```
$sql2 = "SELECT fdate,hour FROM tbl_logins WHERE uid = ? ORDER BY id DESC LIMIT 1";
$q = $db->prepare($sql2);
$q->execute(array($_SESSION['uid']));
$r = $q->fetch();
$fdate = $r['fdate'];
$hour = $r['hour']; 
```

在那之后：

运行更新 tbl_logins 代码以存储当前登录日期和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:06:12.950

```
$r = $q->fetch(); 
```

应该只返回一行。我猜？您的 SESSION var 不正确，或者您的 SQL 中有错误。PDO 运行在什么模式下？例外？默认？

# java - JVM Charset.defaultCharset() 不返回预期的字符集

> ID：13134833
> 
> 赞同：2
> 
> 时间：2012-10-30T08:00:43.433
> 
> 标签：java, character-encoding, jvm, locale

我的操作系统是带有希伯来语语言环境的 Windows 7，并在我的代码中使用 Java 6。我已将语言环境更改为英语（美国），并将显示语言更改为英语。我重新启动了我的电脑，然后在我的 java 代码中尝试获取默认字符集，如下所示：

```
String str = Charset.defaultCharset().name(); 
```

结果， str 设置为**windows-1255**。
这意味着它仍然使用希伯来语作为默认字符集。
似乎是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:21:30.117

通过 OpenJDK 来源，`file.encoding`因此`defaultCharset()`在 Windows 上根据以下设置：

Java 6：[`GetUserDefaultLCID`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318135%28v=vs.85%29.aspx)API 函数，对应于区域和语言控制面板小程序的格式选项卡上的格式选项。

Java 7：[`GetSystemDefaultLCID`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318121%28v=vs.85%29.aspx)API 函数对应于区域和语言控制面板小程序的管理选项卡上的“非 Unicode 程序的语言”，除非您将`sun.locale.formatasdefault`Java 系统属性设置为 ，否则`true`将恢复为 Java 6 行为。

因此对于 Java 6，格式是要更改的设置。

# git - 如何别名 git flow hotfix finish [current_hotfix_branch]

> ID：13134841
> 
> 赞同：1
> 
> 时间：2012-10-30T08:01:20.847
> 
> 标签：git, alias, git-flow

**git flow**任何时候只允许一个修补程序分支。所以而不是输入：

```
git flow hotfix finish hotfix_branch 
```

我想创建一个使用唯一现有修补程序分支名称的别名。类似于以下伪代码：

```
[alias]
  fix-done = flow hotfix finish `git_fetch_branch_beginning_with_hotfix` 
```

任何人都可以帮忙吗？谢谢。

更新：我正在使用 zsh。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:16:21.373

这个函数或多或少是从[git-flow](https://github.com/nvie/gitflow)的源代码中提取的：

```
finish_current_hotfix_branch ()
{
  local hotfix_prefix=$(git config --get gitflow.prefix.hotfix)
  local hotfix_branches=$(echo "$(git branch --no-color | sed 's/^[* ] //')" | grep "^$hotfix_prefix")
  local first_branch=$(echo ${hotfix_branches} | head -n1)
  first_branch=${first_branch#$hotfix_prefix}
  git flow hotfix finish "$first_branch"
} 
```

**更新**

似乎您必须将整个函数放在别名中。不好，但有效：

```
[alias]
  fix-done ="!_() { p=$(git config --get gitflow.prefix.hotfix); b=$(echo \"$(git branch --no-color | sed 's/^[* ] //')\" | grep \"^$p\"); f=$(echo ${b} | head -n1); f=${f#$p}; git flow hotfix finish \"$f\"; }; _" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-01T22:50:55.440

这是执行 git flow hotfix finish 别名的另一种方法：

```
hf = "!_() { b=$(git rev-parse --abbrev-ref HEAD) && git co master && git pl && git co develop && git pl && git co $b && git rebase master && h=$(echo $b | sed 's/hotfix\\///g') && git flow hotfix finish -m 'new_tag' $h && git co master && git ps && git co develop && git ps && git ps --tags && git poo $b && git br -D $b;  }; _" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-02T16:17:51.643

如果你运行 git flow AVH Edition 你可以这样做

```
$ git flow finish 
```

当您在要完成的分支上时。这适用于修补程序、发布、功能和错误修复。

检查您是否运行 git flow AVH 版

```
$ git flow version
x.xx.x (AVH Edition) 
```

# html - 用 ruby 编写 HTML

> ID：13134844
> 
> 赞同：1
> 
> 时间：2012-10-30T08:01:44.843
> 
> 标签：html, ruby, ruby-on-rails-3, devise

> **可能重复：**
> [Ruby 中的“<<-”是什么意思？](https://stackoverflow.com/questions/10561177/what-does-mean-in-ruby)

我在 devise_helper.rb 中看到了这个

```
html = <<-HTML
<div> ... </div>
HTML

html.html_safe 
```

这是什么`<<-HTML .. HTML`符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:03:21.917

`<<`是[heredoc](http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#here_doc)语法。减号 ( `-`) 删除结束标记 ( `HTML`) 之前的所有空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T08:02:55.977

它被称为[heredoc](http://en.wikipedia.org/wiki/Here_document#Ruby)。

变量将在`HTML`对应方结束。但是你可以写任何字符串到那里。

# c++ - 没有名字的班级

> ID：13134845
> 
> 赞同：2
> 
> 时间：2012-10-30T08:01:53.673
> 
> 标签：c++, class, grammar, identifier

我在 C++ 标准文档中读到了这个关于类的内容：

> 类是一种类型。它的名字在它的范围内变成了一个类名（9.1）。
> 
> ```
> class-name: identifier template-id 
> ```

我在 C++ 标准中找到了这个标识符的语法：

```
 2.10 Identifiers
 identifier: nondigit
 identifier nondigit
 identifier digit

 nondigit: one of universal-character-name 
 _ a b c d e f g h i j k l m n o p q r s t u  v w x y z A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
 digit: one of 0 1 2 3 4 5 6 7 8 9 
```

现在我尝试这样做：

```
class
{
public:
  int i;
}; 
```

它编译得很好，没有任何名字。

谁能给我一个解释？这不是违反为标识符指定的语法吗？

* * *

Nawaz 就我给出的代码的标准合规性提出了一个后续问题。有兴趣的可以看看[这里](https://stackoverflow.com/questions/13138605/why-class-int-i-is-not-fully-standard-conformant)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T08:11:15.910

语法去

```
class-specifier:
    class-head { member-specification_opt }

class-head:
    class-key attribute-specifier-seq_opt class-head-name class-virt-specifier-seq_opt base-clause_opt
    class-key attribute-specifier-seq_opt base-clause_opt

class-key:
    class
    struct
    union 
```

在您的情况下，使用了第二个生产`class-head`- 不`class-name`涉及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:08:24.590

标识符被完全省略，因此标识符的正确语法问题没有实际意义。描述中没有说明标识符必须存在。匿名类可能允许与 C 结构规则保持一致，它允许以下构造：

```
typedef struct { int i; } Foo;

struct { int x, y; } points[] = { {1, 2}, {3, 4} }; 
```

我想我从来没有见过这样的课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T15:27:37.477

```
class {public: int i;} 
```

非常没用，但是您可以指定一个没有名称的类，然后创建该类的实例。知道您可以使用以下内容：

```
class {public: int i;} a,b,c;
a.i = 5;
b.i = 4;
c.i = 3;
cout<<a.i<<" "<<b.i<<" "<<c.i; 
```

你也可以在函数中使用它（作为匿名类），所以知道你可以使用这样的东西：

```
void x()
{
    class {public: int i;} a,b,c;
    a.i = 5;
    b.i = 4;
    c.i = 3;
    cout<<a.i<<" "<<b.i<<" "<<c.i;
}

int main() {
    x();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T08:08:05.487

该代码`class { int i; };`完全符合标准。您引用了标准中与匿名类无关的无关参考。

# java - 运行 zxing 的单元测试失败

> ID：13134848
> 
> 赞同：0
> 
> 时间：2012-10-30T08:02:16.363
> 
> 标签：java, unit-testing, ant, compiler-errors, zxing

我正在尝试运行[zxing](http://code.google.com/p/zxing/)的单元测试。我在跑

```
ant test-blackbox 
```

但是，这失败了，输出如下：

```
Buildfile: c:\Workspace\zxing-2.1\core\build.xml

init:

build:

build-test:
    [javac] Compiling 109 source files to c:\Workspace\zxing-2.1\core\build-test
    [javac] c:\Workspace\zxing-2.1\core\test\src\com\google\zxing\client\result\URIParsedResultTestCase.java:73: error: unmappable character for encoding Cp1252
    [javac]                  "\u0013\u0013Â¬Ã¦Z{âˆšÏ€âˆšÃ©âˆšÃ¹âˆšÃ¶Â¬Ã³ZÂ¬ÃŸÂ¬Â®+y_zbâˆšÂ±k\u00117Â¬âˆ?\u000EÂ¬ÃœâˆšÃº\u0000\u0000\u0000\u0000" +
    [javac]                                                                                            ^
    [javac] 1 error

BUILD FAILED
c:\Workspace\zxing-2.1\core\build.xml:54: Compile failed; see the compiler error output for details.

Total time: 0 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:58:25.057

原来错误是因为文件使用 UTF-8 编码，但编译器使用 Windows 默认编码。我通过定义一个新的环境变量 -`JAVA_TOOL_OPTIONS`并将其设置为 来修复错误`-Dfile.encoding=UTF8`，如[https://stackoverflow.com/a/623036/492336中所述](https://stackoverflow.com/a/623036/492336)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T15:48:41.173

忘记自己生成core.jar，这是一个很头疼的问题

只需从以下网址下载最新的库：[https ://github.com/zxing/zxing](https://github.com/zxing/zxing)

并从这里下载您想要的任何版本的现成 jar：[http ://repo1.maven.org/maven2/com/google/zxing/](http://repo1.maven.org/maven2/com/google/zxing/)

就这样。

# css - ipad 上的 css 有时不是它应该的样子

> ID：13134853
> 
> 赞同：0
> 
> 时间：2012-10-30T08:02:29.707
> 
> 标签：css, ipad, safari

有时我打开我的页面，iPad 并没有正确显示。主要是在我重新加载页面时。问题还在于野生动物园。我创建了一个[jsFiddle](http://jsfiddle.net/PkCPR/)来向您展示我是如何做到的。

```
<a href="#">         
  <div class="item">                
    <div class="text">Text1</div>         
    <div class="text2"><b>Text2</b></div>         
    <img class="logo" src="http://dummyimage.com/100x50/09f/fff.png" alt="logo"width="100">  
    <div class="balken2">Text3</div>
  </div>
</a> 
```

在 Firefox 中没关系，Text3 Bar 位于末尾，其他 2 条位于动态图像之后居中，并且并非每次都与您看到的大小相同。在 ipad 上它有时会像这样显示它[http://www.imagebanana .com/view/ynvggcu8/ipad.jpg](http://www.imagebanana.com/view/ynvggcu8/ipad.jpg)。我怎样才能解决这个问题？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:23:46.020

工作小提琴：http: [//jsfiddle.net/parkerwyoung/PkCPR/9/](http://jsfiddle.net/parkerwyoung/PkCPR/9/)

穿上这个`.item`

```
position: relative; 
```

穿上这个`.balken2`

```
position: absolute;
bottom: 0;
width: 150px;
padding-right: 0;
padding-left: 0; 
```

问题是当图像没有加载时，`.balken2`该类在布局中没有什么可指导的。此代码对其进行定位，因此它不必依赖那里的图像。希望这可以帮助！

# plsql - Oracle：使用 IN（关联数组）进行更新

> ID：13134854
> 
> 赞同：1
> 
> 时间：2012-10-30T08:02:40.397
> 
> 标签：plsql, oracle11g

我已经生成了一个包含所有主键的关联数组（aArray）列表。

我可以知道如何使用它来更新这些主键吗？

例子：

```
Update animal an set status='dead' where an.pk in (aArray) 
```

我可以知道除了以下方法之外还有其他方法：

1）循环数组并单独更新每条记录？（性能）

2）循环数组并绘制元素字符串。(23123,3123,3123,3123,123)

？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:16:29.653

如果您可以将数组作为模式级别的类型，那么您可以尝试以下操作：

```
create or replace type ANIMAL_ARRAY as TABLE OF NUMBER;
/

DECLARE
  aArray ANIMAL_ARRAY := new ANIMAL_ARRAY(1,2,3);
BEGIN
  Update animal an set status='dead' 
   where an.pk in (select column_value from table(aArray));
END; 
```

如果数组是模式级别的类型，那么您可以使用`table`关键字将其称为常规表。

# haskell - Haskell：映射函数应用

> ID：13134857
> 
> 赞同：3
> 
> 时间：2012-10-30T08:03:09.073
> 
> 标签：haskell, lambda, pointfree

我在 Haskell 中进行的一些计算的一部分会生成一个映射`Float`到`Float`. 我想对所有这些函数应用一个参数，如下所示：

```
-- x :: Float
-- functions :: [Float -> Float]
map (\f -> f x) functions 
```

有没有办法在不使用一次性 lambda 函数的情况下做到这一点？我已经在[Hoogle](http://www.haskell.org/hoogle/)上搜索了我认为签名应该是 ( `[a -> b] -> a -> [b]`) 的内容，但没有运气。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T08:05:07.720

您可以使用`$`运算符，它只是功能应用程序：

```
map ($ x) functions 
```

（这假定它`x`在表达式的范围内。）

Hoogle 只能查找函数，不能查找任意表达式。由于您使用的是`map`，因此您想搜索类似的功能，`(a -> b) -> a -> b`而不是任何涉及列表的功能。给定一个普通函数，将其传递给`map`它使其作用于列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T08:15:44.250

`functions <*> pure x`应该这样做。先导入[`Control.Applicative`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Applicative.html)模块。

还要考虑这个：

```
Prelude Control.Applicative> [(1+),(2+)] <*> pure 4
[5,6]
Prelude Control.Applicative> [(1+),(2+)] <*> [4]
[5,6]
Prelude Control.Applicative> [(1+),(2+)] <*> [4,5]
[5,6,6,7]
Prelude Control.Applicative> [(+)] <*> [1,2] <*> [4,5]
[5,6,6,7]
Prelude Control.Applicative> (+) <$> [1,2] <*> [4,5]
[5,6,6,7]
Prelude Control.Applicative> getZipList $ ZipList [(1+),(2+)] <*> ZipList [4,5]
[5,7]
Prelude Control.Applicative> getZipList $ ZipList [(1+),(2+)] <*> pure 4
[5,6] 
```

`<$>`只是 的同义词`fmap`。`<*>`根据某种语义，将左侧应用函子中“携带”的内容应用于右侧的内容。对于裸列表，语义与 list monad 相同 - 进行所有可能的组合 - 将左侧的每个函数应用于右侧的每个对象，并且`pure x = [x]`. 对于标记为 s 的列表（即`newtype`d）`ZipList`，语义是“zippery”应用程序 - 即*一对一*和`pure x = ZipList $ repeat x`.

# java - Java：创建新实例

> ID：13134860
> 
> 赞同：1
> 
> 时间：2012-10-30T08:03:17.953
> 
> 标签：java, oop, object, garbage-collection

假设我想创建一个新实例 foo。

我会这样做：

```
SomeClass foo = new SomeClass(); 
```

现在假设对象已经到达终点（例如，就像游戏中的碰撞子弹）并且应该被处理和重新初始化。要重置对象，我可以这样做：

```
foo = new SomeClass(); 
```

或这个

```
foo.reset(); 
```

*注意：该`reset()`方法只会重置该实例中的所有变量。*

哪个是更好的方法（当试图避免 GC 时）？第一个选项会创建一个新指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:06:47.713

第一个选项创建一个新对象并将旧对象作为垃圾收集（除非有其他对它的实时引用）。

减少 GC 的一种策略是维护对象池。这将只是一个当前没有使用且可供重用的对象的集合。当您完成一个对象时，调用一个将其返回到池中的方法。当您需要一个新对象时，请在创建新对象之前调用一个检查池的方法；如果池不为空，它将从池中删除一个对象并重用它，而不是创建一个新对象。

```
public class SomeClass {
    private static final int MAX_POOL_SIZE = . . .;
    private static final ArrayList<SomeClass> pool = new ArrayList<SomeClass>();

    public static SomeClass getInstance() {
        int poolSize = pool.size();
        if (poolSize > 0) {
            return pool.remove(poolSize-1);
        }
        return new SomeClass();
    }

    public void recycle() {
        // reset any fields
        if (pool.size() < MAX_POOL_SIZE) {
            pool.add(this);
        }
    }
    . . .
} 
```

当您需要新的`SomeClass`时，请致电`SomeClass.getInstance()`。完成一个实例后，调用它的`recycle()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:22:49.580

如果要避免 GC，则第二种选择更好。

实际上，即使选择第一个选项，JVM 也不会立即进行 GC。当堆已满（或者对于刚刚创建的对象来说不够用）时，它会进行 GC。第一个创建一个新实例，并且没有对旧对象的强引用。所以当JVM的堆满的时候，会做GC，老对象会被GCed。

此外，还有一些关于 GC 的内容，reference 就是你使用的那种引用。有四种引用，分别称为“强、软、弱、幻”。即使您使用第二个选项，对象“foo”也可能被 GCed，除非对对象“foo”的引用是强引用。请参阅 JDK 文档以获取有关四种引用类型的更多信息，例如 [Reference](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/Reference.html) [Phantom](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/PhantomReference.html) [SoftReference](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html) [WeakReference](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/WeakReference.html)

# web - 将多个 .woff 文件合并为一个

> ID：13134863
> 
> 赞同：8
> 
> 时间：2012-10-30T08:03:25.467
> 
> 标签：web, httprequest, page-load-time, woff

在我管理的一个网站上，我们有几个 .woff 文件，每种字体一个。为了节省加载时间，我想减少请求的数量。是否可以将这些 woff 文件合并到一个资源中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T00:23:56.707

您可以使用 base64 将 woff 资产捆绑到您的 CSS 中。

在您的 @font-face 声明中：

```
url('data:application/x-font-woff;base64,myVeryLongBase64StringGoesHere...'); 
```

**这可能会增加资产的文件大小。**根据我的经验，这通常是 20% 左右 - 与等效的 TTF 文件的大小大致相同。其中大部分可以通过支持 gzip 的服务器恢复。折衷对我来说是可以接受的，但是 YMMV。

正如在 CSS 中嵌入 blob 时经常推荐的那样 - 将它们全部保存在单独的样式表中，在您的基本样式**之后引用。**否则，客户端可能会等待字体加载，然后才能按预期看到您的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-06T18:32:07.480

我没有评论的声誉，但要更新@thumphries 的答案，您现在可以将以下内容用于 WOFF 和 WOFF2：

`url('data:application/font-woff;base64,myVeryLongBase64StringGoesHere...');`

`url('data:font/woff2;base64,myVeryLongBase64StringGoesHere...');`

作为参考，在 UNIX 上，您可以使用内置`base64`命令直接生成 base64 字符串，如下所示：

`$ base64 myfont.ttf > fontbase64.txt`

我觉得这更可取，因为延迟是移动用户最大的问题，我为不说 WOFF2 的浏览器（不到 8% 的用户）添加了一个 url 后备，以避免增加网站的总大小。像这样：

```
url('data:font/woff2;base64,myVeryLongBase64StringGoesHere...'),
url('/fonts/myFont.woff') format('woff'); 
```

# mysql - 从另一个表中获取数据不起作用mysql触发器

> ID：13134871
> 
> 赞同：0
> 
> 时间：2012-10-30T08:04:12.660
> 
> 标签：mysql, triggers

我有这样的触发器

```
 CREATE
 TRIGGER `hrm_to_odm_user` AFTER INSERT
 ON `ohrm_user`
 FOR EACH ROW BEGIN
  DECLARE _dep_id INTEGER;
        SELECT eeo_cat_code INTO _dep_id FROM hs_hr_employee WHERE emp_number = NEW.id;
  INSERT INTO zodm_user (id, username, password, department) VALUES (NEW.id, NEW.user_name, NEW.user_password, _dep_id);
    END 
```

将数据插入到 ohrm_user 后，我触发触发器将值插入到 zodm_user

它适用于除我从另一个名为 hs_hr_employee 的表中选择的字段 _dep_id 之外的所有其他内容

我已经通过这篇文章

[MySQL触发器更新与从另一个表中选择](https://stackoverflow.com/questions/6048549/mysql-trigger-update-with-select-from-another-table)

但这对我不起作用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:58:51.650

尝试这样的事情

_dep_id = ID hs_hr_employee WHERE emp_number = NEW.id;

还使用探查器查看其触发的查询

# jquery - JQDatePicker 不工作

> ID：13134878
> 
> 赞同：0
> 
> 时间：2012-10-30T08:04:43.440
> 
> 标签：jquery, asp.net, user-controls, jquery-ui-datepicker

我有 3 个用户控件。他们每个人都有一个 JQDatePicker，在我的 text.aspx 页面中，我有这 3 个用户控件和一个 ScriptManager。当我运行该项目时，我只能看到 DatePickers 的文本框部分，并且 Picker 按钮不显示自身。怎么了？

```
 <%@ Register assembly="JQControls" namespace="JQControls" tagprefix="JQControls2" %>

 <JQControls2:JQDatePicker ID="dtpTahatorDate" runat="server" 
            ChangeMonth="True" ChangeYear="True"
                        DateFormat="YMD" IEDateFormat="YMD" Regional="fa"
            ShowSelectButton="True" />
            <JQControls2:JQLoader ID="jqLoader2" Theme="Humanity" runat="server" /> 
```

![在此处输入图像描述](../Images/72639a53fa5661e947f37c1766354792.png)当我运行项目时，此按钮不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:17:35.223

我不知道为什么，也不知道这背后的逻辑是什么，但问题是我应该将 JQLoader 放在 JQDatePicher 控件之前（或代码行的上部）。这解决了我的问题，所以我决定回答我的问题，也许它可以帮助陷入同样情况的人。如果有人对这种线性行为有任何意见，请在此处添加。

```
<JQControls2:JQLoader ID="jqLoader2" Theme="Humanity" runat="server" />
<JQControls2:JQDatePicker ID="dtpTahatorDate" runat="server" 
        ChangeMonth="True" ChangeYear="True"
        DateFormat="YMD" IEDateFormat="YMD" Regional="fa"
        ShowSelectButton="True" /> 
```

# php - 从我的网站登录到 wordpress 网站

> ID：13134882
> 
> 赞同：3
> 
> 时间：2012-10-30T08:05:10.300
> 
> 标签：php, wordpress, zend-framework, login

我有一个正在使用 Zend Framework 开发的网站。我还在同一台服务器上放置了一个 Wordpress 站点。当我登录到我的 Zend 站点时，是否可以使用任何**（例如 AJAX 调用）登录到 Wordpress 站点。**

***原因：***

我在 Zend 网站上有一个 wordpress 博客的链接，当我单击该链接时，它会将我带到 Wordpress 登录页面。

我希望用户以登录用户的身份被带到 wordpress 博客页面链接。

我对此进行了很多研究，但没有找到正确的路径。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:43:36.630

由于两个站点都在同一台服务器上，因此您可以从 Zend 和 WordPress 访问文件。当您的用户登录到基于 Zend 的站点时，您可以添加一个调用来加载基本的 wordpress 文件，然后使用函数 wp_set_auth_cookie() 将用户登录到 wordpress。

```
require_once 'wordpress-directory/wp-load.php';
wp_set_auth_cookie( $wp_user_id ); 
```

在 Zend 站点上的用户表中，您可以有一个附加列`wp_user_id`来存储用户的 wordpress 用户 ID，以便您知道传递`wp_set_auth_cookie()`函数的用户 ID。

[如果您也想在这里](http://envokedesign.com/login-wordpress-users-from-another-app/)查看，我用更笼统的术语写了一篇博客文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:23:33.613

禁止在 2 个不同的域名之间使用 AJAX，您可以使用 PHP 中的 Curl 函数。[http://bit.ly/RBGgfp](http://bit.ly/RBGgfp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T00:32:22.490

您的问题存在安全问题。如何在不实际传递凭据的情况下将凭据从一个网站传递到另一个网站……

您需要某种授权过程，它会告诉 WP 登录到 WP 的用户实际上是已经登录到 Zend 的同一用户。为此，您不能只在从 ZF 到 WP 的 Ajax 调用中传递用户名和密码，因为每个人都可以从缓存的 JS 源代码中获取用户的密码。此外，您不能在 ajax 调用中只传递用户名，因为这样每个人都可以进行这样的 ajax 调用以以其他人身份登录。

一般来说，您应该尽可能限制通过客户端请求 (Ajax) 传递授权。

这样做的一种方法是许多社交网络（即 Facebook）使用的称为 OAuth 的机制。Facebook 使用特殊令牌进行授权，并且在 Facebook 和使用 Facebook 连接机制的网站之间不会传递任何凭据。Facebook 还使用 PHP 的 curl 函数在幕后进行跨服务器调用，因此在客户端不会留下有关授权过程的任何痕迹。

您可以，但您不必使用 OAuth，但如果您这样做，将会获得很好的体验。

您面临的另一个问题是您的 ZF 和 WP 可能在客户端使用不同的授权 cookie。因此，在 ZF 网站上授权用户时，您还需要对负责登录的 WP 页面进行 Ajax 调用，以确保设置了正确的 cookie。

Summa summarum 流程将与此类似（假设已在两个站点上创建了用户帐户）：

1.  ZF 网站上的登录用户。
2.  从 ZF 发出包含用户 ID（例如）的 curl 调用到 WP 页面，该页面将返回某种随机生成的令牌（如果存在具有给定 ID 的用户）。
3.  一旦您的 curl 调用从 WP 接收到令牌，使用 JS 生成 ZF 网页，该页面对 WP 进行 Ajax 调用（此处解释了如何向 WP 发送 Ajax 调用：http: [//codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)）此 Ajax 调用应该包含类似 md5 散列的用户 ID 和令牌。
4.  现在在 WP 端，WP 将收到 ZF 的带有散列值的 Ajax 调用。因此，请检查此值是否与 WP 之前返回的用户 ID 和令牌散列后的值相同（在步骤 2 中）。如果是，则登录 WP 站点上的用户。

现在，因为我们不将用户密码从 ZF 发送到 WP（我们在 WP 端也不知道它——因为它是加密的）你不能使用 wp_signon 来登录用户。但是您可以使用 wp_set_auth_cookie 来达到这个特定目的就足够了。

这是一个粗略的解释，但我希望它会有所帮助。

PS wp_login 已弃用，您应该避免使用它。

wp_login 操作也不会调用 wp_set_auth_cookie，这可能是您的用户没有首先显示为已登录的原因。

在其中尝试使用 wp_set_auth_cookie 的解决方案。我在最后这么说，这样你就不会错过上面的安全问题。

# cassandra - 访问 Cassandra 中的组合行键

> ID：13134886
> 
> 赞同：0
> 
> 时间：2012-10-30T08:05:32.733
> 
> 标签：cassandra, composite

> **可能重复：**
> [对 Cassandra 的复合键的误解](https://stackoverflow.com/questions/9872868/misunderstanding-on-composite-key-for-cassandra)

我有一个带有复合键的列族：

```
create column family MyCF
with key_validation_class = 'CompositeType(UTF8Type, UTF8Type)'
and comparator = 'CompositeType(UTF8Type, UTF8Type)'
and default_validation_class='CompositeType(UTF8Type, UTF8Type)'
; 
```

我已经存储了具有以下值的行键 1:1,2:2,1:3,2:1,1:2,2:3

```
RowKey: 1:1
= (column=colum1, value=value1, timestamp=1351093372962000)

RowKey: 2:2
=> (column=colum1, value=value1, timestamp=1351093411137000)

RowKey: 1:3
= (column=colum1, value=value1, timestamp=1351093385820000)

RowKey: 2:1
= (column=colum1, value=value1, timestamp=1351093401162000)

RowKey: 1:2
= (column=colum1, value=value1, timestamp=1351093379274000)

RowKey: 2:3
= (column=colum1, value=value1, timestamp=1351093421393000) 
```

加载 Cassandra 后，我想恢复所有以 1 开头的行，即 1:1、1:2 和 1:3

我尝试使用 Hector 和 Thrift 来完成此操作，但我无法找到有关文档的任何信息。

使用 CQL 无法恢复它，因为不支持这种查询，或者这就是论坛上所说的。

我还设法通过选择行键（1：1、1：2、1：3）来恢复信息，这可以正常工作，但我真正需要做的是恢复只询问第一个元素的信息组合键。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:19:55.500

嗯，一个完全不同的方式是这样的

```
RowKey: 1:1
= (extra:1, column=colum1, value=value1, timestamp=1351093372962000)

RowKey: 2:2
=> (extra:2, column=colum1, value=value1, timestamp=1351093411137000)

RowKey: 1:3
= (extra:1, column=colum1, value=value1, timestamp=1351093385820000)

RowKey: 2:1
= (extra:2, column=colum1, value=value1, timestamp=1351093401162000)

RowKey: 1:2
= (extra:1, column=colum1, value=value1, timestamp=1351093379274000)

RowKey: 2:3
= (extra:2, column=colum1, value=value1, timestamp=1351093421393000) 
```

然后你可以索引额外的字段。作为带有 cassandra 的 PlayOrm 中的示例，您可以

```
public class Entity {
  @NoSqlId
  private String id;

  @NoSqlIndexed
  private String extra;

  @NoSqlPartitionedBy
  private Account fieldYouMightPartitionBy;    
  private String column;
  private String value;
} 
```

然后你可以运行

```
PARTITIONS (:partitionId) SELECT e from Entity as e WHERE e.extra = 1; 
```

后来，迪恩

# vba - 将对象从引用复制到变量中

> ID：13134890
> 
> 赞同：2
> 
> 时间：2012-10-30T08:05:45.533
> 
> 标签：vba, excel

有没有办法将对象从引用（例如范围或单元格）复制到变量？

我想这样做的原因是因为我有一个巨大的宏，它可以计算很多东西并使用许多复制+粘贴操作，它会遍历许多单元格并更改它们。这一点表现都不是很好，所以我想最小化 GUI 操作并在后台工作，这样我可以将整个结果放在一个数组中，最后粘贴到 GUI 中。问题是我需要的对象不仅仅是单元格/范围的值，因为我还需要更改其他属性（例如大小或颜色）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:25:47.253

由于与每次调用对象模型相关的开销，在单个单元格上循环之类的操作很慢。所以诀窍是在每次调用中使用多个单元格。
对于值，您可以将一系列单元格中的值数组放入一个变体中，从而生成一个二维数组，然后您可以将该数组分配回该格式的范围
，您需要为大范围使用条件格式单元格或复制格式并将其粘贴到大量单元格中。

# ruby-on-rails - 在 Ruby 中检测相似的字符串。

> ID：13134894
> 
> 赞同：1
> 
> 时间：2012-10-30T08:06:04.310
> 
> 标签：ruby-on-rails, ruby, include

在我的数据库中，有条目，例如。`Тормозной диск`等`Диски тормозные LPR`在`art_groups_arr`数组中。我想找到所有类似于 的条目`Тормозной диск`，例如`Диски тормозные LPR`

这段代码：

```
art_groups_arr.each do |artgrarr|
  if n2.art_group.include?(artgrarr)
    non_original << n2
  end
end 
```

显然没有找到它们。我怎样才能找到那些相似的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:15:30.187

您也许可以使用正则表达式，例如：

```
art_groups_arr.each do |art_gr_arr|
  if n2.art_group.any? { |element|
    /ормозн/ =~ element and /диск/ =~ element
  } then non_original << n2 end
end 
```

或者，[您可以尝试](https://github.com/vincentchu/fuzz_ball)声称实现 Smith-Waterman 算法的 fuzz_ball gem。

```
require 'fuzz_ball'
THRESHOLD_SCORE = 0.75
MATCHER = FuzzBall::Searcher.new [ 'Тормозной диск LPR' ]

def complies?( str )
  matchdata = MATCHER.search str
  return false if matchdata.nil? or matchdata.empty?
  score = matchdata[0][:score]
  puts "score is #{score}"
  score > THRESHOLD_SCORE
end

art_groups_arr.each do |art_gr_arr|
  if n2.art_group.any? { |element| complies? element } then
    non_original << n2
  end
end 
```

为了`'Диски тормозные LPR'`获得 score `0.861`，您必须调整阈值。

# javascript - Javascript：如何以几秒钟的间隔将html中的所有链接一个接一个地加载到同一个窗口

> ID：13134901
> 
> 赞同：0
> 
> 时间：2012-10-30T08:06:38.410
> 
> 标签：javascript

> **可能重复：**
> [Javascript：如何打开一个页面然后等待几秒钟在同一窗口中打开另一个页面](https://stackoverflow.com/questions/13133075/javascript-how-to-open-a-page-then-wait-for-few-seconds-open-another-page-in-th)

我试图将 html 中的所有链接加载到同一个窗口。然而，只有第一个链接被加载。我收到一条错误消息，提示 Chrome 中的网页未定义。有人可以帮助我，因为我是 Javascript 的新手。谢谢。代码如下：

```
<!DOCTYPE html>
<html>
<head>
<script>

window.onload=function(){myFunction()};

function myFunction()
{
var links = document.links;

mywin=window.open("","mywindow");
mywin.location=links[0];
for(var i = 1; i < links.length; i++)
{
    setTimeout(function(){mywin.location=links[i];},5000);
} 
}

</script>
</head>
<body>
<h1><a href="http://www.yahoo.com">yahoo</a></h1>
<h1><a href="http://www.youtube.com">youtube</a></h1>
<h1><a href="http://www.google.com">google</a></h1>
</body>
</html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:23:45.197

尝试这个：

```
function myFunction()
{
    var links = document.links;

    function open(win, i) {
        setTimeout(function() {
            win.location = links[i];
            if(i+1 < links.length) {
                open(win, i+1);
            }
        }, 5000);
    }

    mywin=window.open("","mywindow");
    mywin.location=links[0];
    open(mywin, 1);
} 
```

如果你想在`open`外面写，`myFunction`你也需要`links`作为第三个参数传递。

编辑：可能你不会`mywin`在任何地方初始化变量。放在`var`它前面，否则会污染物`window`体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:13:52.707

您没有间隔打开页面。for 循环将快速连续运行 setTimeout，内容将在 5 秒后快速连续运行。For 循环将非常快地循环，每个循环之间可能需要几毫秒。因此 setTimeout 中的函数将在 5 秒后开始触发，但每次调用之间只有几毫秒。

其次，在您的情况下，循环最终将 i 增加到 3。当函数被实际调用时。

```
mywin.location=links[i]; 
```

i 实际上是 3，导致未定义。

# jquery - div：使用带有“慢”选项的 jQuery 显示和隐藏创建有趣的动画效果，并且 div 继续上下移动......

> ID：13134904
> 
> 赞同：1
> 
> 时间：2012-10-30T08:06:50.847
> 
> 标签：jquery, html, show-hide

我有一个在 Div 中显示和隐藏 DIV 的有趣问题。我正在尝试创建用户体验，以便当鼠标悬停在主 div 上时，会出现一个带有删除和更新图标的小 div。如果我使用不带“慢”选项的显示/隐藏，它工作得**非常好**，但是当我使用“慢”选项时，即使鼠标距离主 div 数英里，它也会开始为每个鼠标悬停事件出现和隐藏两次。如果鼠标停留在 div 上，那么出现和消失的显示会一直持续下去。到目前为止我所收集到的，当显示 div 时会触发 mouse out 事件，现在的问题是如何控制它？以下是我的代码：

Javascript：

```
function ShowCurrProblemSaveDiv(id){
    $(id).find('div').show('slow');      
 }

function HideCurrProblemSaveDiv(id){
    $(id).find('div').hide('slow');
} 
```

HTML：

```
<div id="PatCurrVisitProblemListDiv" 
   onMouseOver="ShowCurrProblemSaveDiv(this)" 
   onMouseOut="HideCurrProblemSaveDiv(this)">
       <div id="PatCurrVisitProblemSaveDiv" 
            style="background:red;
            display:none;">
            Delete-Update Icons
       </div>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:16:18.410

试试这个：http: [//jsfiddle.net/6DU4v/2/](http://jsfiddle.net/6DU4v/2/)

HTML

```
<div id="PatCurrVisitProblemListDiv">
    Hi there
   <div id="PatCurrVisitProblemSaveDiv"
        style="background:red;
        display:none;">
        Delete-Update Icons
   </div>
</div> 
```

JS

```
$("#PatCurrVisitProblemListDiv").hover(function(){
    // Stops any animations on this element, and starts a new one
    // acording to which event was called - mouseover, or mouseout
    $(this).find("div").stop().toggle("slow");
}); 
```

如您所见，我对其进行了优化以使用最少的代码。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:15:17.993

试试这个：

```
function ShowCurrProblemSaveDiv(id){
    $(id).find('div').stop(true, true).show('slow');      
}

function HideCurrProblemSaveDiv(id){
    $(id).find('div').stop(true, true).hide('slow');
} 
```

# php - 从 office 文件创建首页 jpg

> ID：13134908
> 
> 赞同：1
> 
> 时间：2012-10-30T08:07:04.170
> 
> 标签：php, ms-office

我想通过创建第一页的 jpg 向用户展示文件的预览。

就像您在 Windows 中看到的一样（见下文，.pptx 示例）。

![我想要的预览](../Images/d039326412b0bbdd3377b96a77b34eec.png)

有没有办法使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T22:37:40.043

有一些解决方案。问题是 PHP 无法呈现 Office 文件格式。所以你没有得到图像。有一些像[Apache TIKA](http://tika.apache.org/)这样的库可以渲染和使用这些办公格式。但是你需要一个包装器，你必须通过外壳或其他东西调用它。

否则，帖子中的此处是如何使用软件将其转换为 HTML 然后转换为图像的答案。

[如何在 PHP 中将 EPS、DOC 和 PPT 文档转换为预览图像？](https://stackoverflow.com/questions/3683865/how-do-i-convert-a-eps-doc-and-ppt-document-to-a-preview-image-in-php)

# google-maps - 如何在 Google Maps 和 Drupal-7 视图中显示地点总数？

> ID：13134911
> 
> 赞同：1
> 
> 时间：2012-10-30T08:07:17.163
> 
> 标签：google-maps, drupal, drupal-7, maps

我必须显示特定地区的食堂总数。

例如：A市有10个食堂。我必须显示一个带有数字 10 的图标。单击该图标后，它将显示食堂的确切位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:44:04.033

尝试 Gmap3 和 Clustering，您可以为集群自定义图标，并在图标内设置总计数。默认情况下，单击会放大以打开集群，但您可以添加自定义事件。

见[http://gmap3.net/examples/clustering.html](http://gmap3.net/examples/clustering.html)

# java - jsp中的分页

> ID：13134912
> 
> 赞同：4
> 
> 时间：2012-10-30T08:07:28.117
> 
> 标签：java, html, jsp, struts

我有一个超过 3000 行结果集的查询。我使用迭代器来迭代每条记录。所以我必须减少系统的负载，我想最好的方法是在jsp中使用分页。如果有人有更好的主意，我会很高兴听到。像获取号码或类似的东西。表示技术是struts。如果您认为分页很好，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:11:04.953

用限制查询数据库，我的意思是把限制放在查询中，比如`0 to 50`在第一页。当请求第一页然后更改您的限制`0+(50*1) to 50+(50*1)`和第 n 页它会像`0+(50*n) to 50+(50*n)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:15:03.107

分页是个好主意。但是，您应该记住，您**不仅**需要使其工作，还必须了解其目的。

实现分页。但是，如果您实现了分页，但**仍然**获取相同数量的行，那么您的目的就落空了。您还应该**改进您的查询**。您应该获取**准确**的行数，以便**在分页的单个页面中显示****准确**的条目数。这样，您的应用程序服务器和数据库服务器都将从您的实施中受益。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T06:48:04.277

在jsp中分页结果集解决了问题**

# mysql - 确定表是否在 CASCADE 上有 DELETE

> ID：13134913
> 
> 赞同：22
> 
> 时间：2012-10-30T08:07:35.713
> 
> 标签：mysql, database, cascading-deletes

我可以知道数据库是否`DELETE ON CASCADE`有查询吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-30T08:14:34.377

是的。只需查询`INFORMATION_SCHEMA`

```
SELECT * FROM information_schema.REFERENTIAL_CONSTRAINTS 
```

或者更具体地说

```
-- This query will list all constraints, their delete rule, 
-- the constraint table/column list, and the referenced table
SELECT 
  r.CONSTRAINT_NAME,
  r.DELETE_RULE, 
  r.TABLE_NAME,
  GROUP_CONCAT(k.COLUMN_NAME SEPARATOR ', ') AS `constraint columns`,
  r.REFERENCED_TABLE_NAME
FROM information_schema.REFERENTIAL_CONSTRAINTS r
  JOIN information_schema.KEY_COLUMN_USAGE k
  USING (CONSTRAINT_CATALOG, CONSTRAINT_SCHEMA, CONSTRAINT_NAME)
-- using MySQL's GROUP BY clause. In other DB's more columns would need to be
-- specified!
GROUP BY r.CONSTRAINT_CATALOG,
         r.CONSTRAINT_SCHEMA,
         r.CONSTRAINT_NAME 
```

阅读手册中有关[`REFERENTIAL_CONSTRAINTS`表格​​的更多信息](http://dev.mysql.com/doc/refman/5.6/en/referential-constraints-table.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-30T08:14:27.707

你可以使用

```
SHOW CREATE TABLE `tablename` 
```

获取表的完整定义。这包括任何外键约束。

# mysql - 创建触发器 MySQL 以更新员工表中的薪水

> ID：13134918
> 
> 赞同：-1
> 
> 时间：2012-10-30T08:07:49.893
> 
> 标签：mysql, plsql

如何创建触发器 MySQL 以更新员工表中的薪水并将薪水列中的旧值替换为 old_salary 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:05:33.270

请参阅[CREATE TRIGGER 语法](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)：

```
create trigger salary_trigger
    before update on employee
    for each row begin
        if new.salary != old.salary then
            set new.old_salary = old.salary
        end if;
    end; 
```

# maven - 使用 clean 重新运行失败的 Jenkins 构建

> ID：13134920
> 
> 赞同：5
> 
> 时间：2012-10-30T08:07:53.137
> 
> 标签：maven, jenkins

我们的提交构建（Maven）不使用 clean。这使其速度大大加快。但有时我们会得到诸如移动或删除的测试类之类的东西，它们会保留并执行并且经常失败。

有没有办法以尝试重新运行构建但预先执行 mvn clean 或 clean 工作区的方式配置 Jenkins？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:06:54.057

使用“在其他项目上触发参数化构建”构建后操作怎么样？

对于“要构建的项目”，使用“$JOB_NAME”，这将触发作业本身
对于“构建时触发”，从下拉列表中使用“失败”
然后单击“添加参数”并选择“当前构建参数
最后添加”预定义参数”，设置类似“REBUILD=TRUE”

现在您需要在 SVN 结帐之前执行的构建步骤
安装此插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/pre-scm-buildstep](https://wiki.jenkins-ci.org/display/JENKINS/pre-scm-buildstep)

现在，在作业配置中，在“构建环境”下，将勾选“在 SCM 运行之前运行构建步骤”。检查
然后添加“执行外壳”或“执行 Windows 批处理命令”的构建步骤，具体取决于您的操作系统。在该构建步骤中，再次根据您的 OS shell 选择，对变量“REBUILD”是否等于“TRUE”运行一个简单的检查。如果为真，则通过删除 shell 中的所有内容来清理工作区。如果需要，您可以更具体并仅删除 SVN 结帐文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:20:05.733

我建议使用[Retry-Failed-Builds-Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Retry+Failed+Builds+Plugin)重新触发此类作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:46:59.713

Retry-Failed-Build-Plugin 已弃用。Naginator Plugin 不会触发，除非它看起来是一个硬故障。至少它对我不起作用。您可能想尝试构建流程插件

# jakarta-ee - 如何访问部署在码头上的 jax-rs 的服务注释

> ID：13134921
> 
> 赞同：0
> 
> 时间：2012-10-30T08:07:54.390
> 
> 标签：jakarta-ee, jetty, jersey, jax-rs, resteasy

我成功创建了一个带有邮政服务的网络应用程序并将其部署在码头上

.

```
@Path("caas")
public class Cribservice {
  @POST
    @Path("/post")
    @Consumes(MediaType.TEXT_PLAIN) 
    //@Consumes(MediaType.APPLICATION_JSON)
    //@Produces("text/xml")   // sends JSON
    public void setJson(String p) {
        String x = p;
        System.out.println(x);
        run(x);
    } 
```

当我使用 netbeans 运行这个时，我可以使用所有服务，但是在我成功将它部署到码头后，我无法访问这些服务。

> 我应该使用哪个地址来访问资源位置

：

> 本地主机：8080/caas/post
> 
> 本地主机：8080/caas/Cribservice/webresources/caas/post
> 
> 注意：caas - 码头指定的上下文
> 
> ```
>  Cribservice - class containing the jax-rs service implementation
> 
>    caas(2) - @PATH 
> ```

这就是我的 Applicationconfig.java 的样子：

```
package org.netbeans.rest.application.config;
import java.util.Set;
import javax.ws.rs.core.Application;

@javax.ws.rs.ApplicationPath("webresources")
public class ApplicationConfig extends Application {

    public Set<Class<?>> getClasses() {
        return getRestResourceClasses();
    }

    /**
     * Do not modify this method. It is automatically generated by NetBeans REST support.
     */
    private Set<Class<?>> getRestResourceClasses() {
        Set<Class<?>> resources = new java.util.HashSet<Class<?>>();
        resources.add(cribservice.Cribservice.class);
        return resources;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:17:53.220

您需要确保 Jersey 设置正确（假设这是您使用的）。在 web.xml 中，您需要添加：

```
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
       <param-name>com.sun.jersey.config.property.packages</param-name>
       <param-value>`full_package_of_your_service`</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>`/service_path/*`</url-pattern>
</servlet-mapping> 
```

这将指示 Jersey 在哪里可以找到服务以及 Jersey servlet 路径的外观。

然后您的服务将在以下情况下可用：`http://localhost:8080/<YouAppName>/<service_path>/caas/post`

请注意，您的服务需要包含在包中（这是 Jersey 所期望的）：`full_package_of_your_service`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:12:01.897

它应该是

```
localhost:8080/<NameOfYourProject>/caas/post 
```

鉴于配置的码头在 8080 上运行

# jquery - twitter bootstrap 中的 Jquery 和 codeigniter 模态表单验证在关闭后未清除

> ID：13134924
> 
> 赞同：1
> 
> 时间：2012-10-30T08:08:01.750
> 
> 标签：jquery, codeigniter

我编写了以下 ajax 代码来验证我的表单，它实际上是一个模式窗口。但是在我再次打开表单时单击关闭或保存后，值仍然存在。以下是我的代码：

```
<script>

$(function() {

    $("#submit_button").click(function( e ) {
        e.preventDefault();

        var name    = $("input[name=name]").val();
        var amount  = $("input[name=amount]").val();
        var model   = $("select[name=model]").val();
        var brand   = $("select[name=brand]").val(); 

        $.ajax({
                type: "POST",
                url: "<?=base_url()?>index.php/items/create",
                cache: false,
                dataType: "json",
                data: 'name='+name+'&amount='+amount+'&model='+model+'&brand='+brand,
                success: function(result){
                    if(result.error) {
            $(".alert").fadeIn('slow');
            $("#error_message").html(result.message);
          } else {            
            $(".alert").fadeIn('slow');
            $("#error_message").html(result.message);
            $('#new_item').modal('hide')
          }

                }
        }); 

    });
});

</script> 
```

这是控制器代码：

```
public function create()
    {
        //creating the required validation fields
        $this->form_validation->set_rules('name', 'Name', 'trim|required');
        $this->form_validation->set_rules('brand', 'Brand', 'trim|required');
        $this->form_validation->set_rules('amount', 'Amount', 'trim|required|numeric');

        $result = array();

        if ($this->input->is_ajax_request()) 
        {

            if ($this->form_validation->run() == FALSE) {
                $result['error'] = true;
                $result['message'] = validation_errors();
            } else {

                $result['error'] = true;
                $result['message'] = 'The record has been saved';           

                $this->m_items->create();               
                redirect('items/index', 'refresh');
            }  

            $json = json_encode($result);
            die($json);
        }
        else
        {
            redirect('items/index', 'refresh');
        }
    } 
```

第二个问题是，在我点击保存后，在数据库中创建了条目，但没有显示任何消息，表单留在原处。然后我必须手动刷新页面并执行此操作。

有人可以足够友善并给我解决方案吗.....我会像任何人一样感激不尽！

请帮助我，因为我已经尝试修复它超过 3 个小时了！

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:41:04.503

因为你没有清空它们？

```
$("input[name=name]").val(""); 
```

# codec - avconv 在将 mov 转换为 ogg 时抛出错误

> ID：13134928
> 
> 赞同：0
> 
> 时间：2012-10-30T08:08:14.467
> 
> 标签：codec

在尝试使用 avconv 和 ffmpeg 将 mov 文件转换为 ogg 时，我不断收到以下错误。我完全无法理解下面显示的详细消息。

我查看了类似的线程，但无法从中找出任何东西。有没有人有任何想法？

*   [为输出流 #0:1 打开编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height](https://stackoverflow.com/questions/8367342/error-while-opening-encoder-for-output-stream-01-maybe-incorrect-parameters)

*   [转换为 mp4 时出现 ffmpeg 错误 打开输出流 #0.0 的编码器时出错](https://stackoverflow.com/questions/12847980/ffmpeg-error-while-converting-to-mp4-error-while-opening-encoder-for-output-stre)

*   [http://drupal.org/node/1779298](http://drupal.org/node/1779298)

```

    parth@parth-laptop:~/Desktop$ avconv -i IMG_0243.mp4 -acodec vorbis -f ogg IMG_0243.ogv
    avconv 版本 0.8.3-4:0.8.3-0ubuntu0.12.04.1，版权所有 (c) 2000-2012 Libav 开发人员
      建于 2012 年 6 月 12 日 16:37:58，使用 gcc 4.6.3
    输入#0，mov，mp4，m4a，3gp，3g2，mj2，来自“IMG_0243.mp4”：
      元数据：
        主要品牌：qt  
        次要版本：0
        兼容品牌：qt  
        创建时间：2012-02-25 00:11:52
        编码器：5.0.1
        编码器英语：5.0.1
        日期：2012-02-24T16:11:52-0800
        日期：2012-02-24T16:11:52-0800
      时长：00:00:34.59，开始：0.000000，比特率：24121 kb/s
        流 #0.0（und）：视频：h264（基线）、yuv420p、1920x1080、24069 kb/s、24.01 fps、24 tbr、600 tbn、1200 tbc
        元数据：
          创建时间：2012-02-25 00:11:52
        流 #0.1（und）：音频：aac，44100 Hz，单声道，s16，62 kb/s
        元数据：
          创建时间：2012-02-25 00:11:52
    文件“IMG_0243.ogv”已经存在。覆盖？[是/否] 是
    [缓冲区@ 0x8da9ce0] w:1920 h:1080 pixfmt:yuv420p
    [vorbis @ 0x8dc74e0] 当前 Libav Vorbis 编码器仅支持 2 个通道。
    输出#0，ogg，到“IMG_0243.ogv”：
      元数据：
        主要品牌：qt  
        次要版本：0
        兼容品牌：qt  
        创建时间：2012-02-25 00:11:52
        编码器：5.0.1
        编码器英语：5.0.1
        日期：2012-02-24T16:11:52-0800
        日期：2012-02-24T16:11:52-0800
        流 #0.0(und)：视频：libtheora、yuv420p、1920x1080、q=2-31、200 kb/s、90k tbn、24 tbc
        元数据：
          创建时间：2012-02-25 00:11:52
        流 #0.1（und）：音频：libvorbis，44100 Hz，单声道，s16，200 kb/s
        元数据：
          创建时间：2012-02-25 00:11:52
    流映射：
      流 #0:0 -> #0:0 (h264 -> libtheora)
      流 #0:1 -> #0:1 (aac -> vorbis)
    为输出流 #0:1 打开编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height

```

编辑：

我实际上让它工作......但由于某种原因现在无法获得超过 8 的 FPS。

有效的命令是

```
avconv -i IMG_0243.mp4 -acodec libvorbis -f ogg -r 24.01 IMG_0243.ogv -ac 2 -ar 44100 -b 64k -s 1920x1080 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:31:06.477

如果您谈论的是屏幕上打印的 fps，那就是编码率。它与将要创建的文件的 fps 无关。编码 1080p 需要高端硬件和快速编码器。虽然你可能有硬件 libtheora 没有像其他编码器那样优化。所以会很慢。

# c# - c# - App.config 放置和访问

> ID：13134932
> 
> 赞同：0
> 
> 时间：2012-10-30T08:08:43.497
> 
> 标签：c#, app-config, config

我创建了使用 App.Config 的 ac#.net 应用程序。当然，调试一切正常。我可以访问文件进行读写。

但是当我为我的应用程序创建安装程序时，编写部分不再起作用。

这是因为应用程序安装在程序文件中。而且您无法写入程序文件文件夹...

我有点想到将 app.config 放在 de AppData 文件夹中的解决方案，但我无法让它工作。

我想知道的是如何指示我的安装程序将文件放置在正确的位置以及如何创建正确的函数将其写入该位置。

这是我到目前为止所拥有的：

```
 public static void WriteValue(string key, string value)
 {
    string configPath = System.Environment.GetFolderPath(
                                                         Environment.SpecialFolder.ApplicationData) + 
                        "\\Application\\app.config";

    ExeConfigurationFileMap map = new ExeConfigurationFileMap(configPath);

    // Open App.Config of executable
    Configuration config = ConfigurationManager.OpenMappedExeConfiguration(map, 
                                                                           ConfigurationUserLevel.None);

    // Add an Application Setting.
    config.AppSettings.Settings.Remove(key);
    config.AppSettings.Settings.Add(key, value);
    // Save the configuration file.
    config.Save(ConfigurationSaveMode.Modified);
    // Force a reload of a changed section.
    ConfigurationManager.RefreshSection("appSettings");
} 
```

提前谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:59:57.650

该文件`App.config`是开发过程中使用的名称，在调试过程中 VS 读取它就好了。

但是当您在`YourProgram.exe`工作室外运行可执行文件时，它会搜索名为`YourProgram.exe.config`

希望能帮助到你。

# windows - WinUSB 安装

> ID：13134934
> 
> 赞同：3
> 
> 时间：2012-10-30T08:08:50.743
> 
> 标签：windows, usb, driver, winusb

我想尝试一下 WinUSB。我已经安装了 WinDDK，并且即将为我的驱动程序创建我的第一个 INF 文件。我正在按照[MSDN 指南](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540283%28v=vs.85%29.aspx "MSDN 指南")执行此操作。该指南包含一个示例 INF 文件和“将部分名称中的 USB_Install 更改为适当的 DDInstall 值”的说明。

很公平，唯一的问题是我不知道“适当的 DDInstall 值”是什么。

我并不是真正的 INF 文件专家，我只能猜测指南可能希望我更改示例文件中的部分名称

```
[USB_Install]
Include = winusb.inf
Needs   = WINUSB.NT 
```

与节标题中的内容不同`[USB_Install]`。我发现的关于 DDInstall 的唯一解释只是关于如何处理本节的一般解释（[也在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547344%28v=vs.85%29.aspx)）。

我的问题是，我应该将什么放入 INF 文件而不是`[USB_Install]`字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T05:40:59.110

我尝试遵循相同的 MSDN 指南并遇到了一些问题。我最终使用了 Microchip 的 WinUSB 驱动程序模板。该模板可在[Microchip 应用程序库](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en547784)中找到。

它与 MSDN 给出的示例有点不同，但它适用于我的系统。它还适用于最新 WDK（8.0 版）附带的工具和 dll 文件。

虽然这不能解决您的问题，但我认为与 MSDN 提供的模板相比，它是一个更好的模板。

这是 Microchip 提供的 inf 文件：

```
;This .inf file is a modified version of the example INF provided
;in the Microsoft document:
;"How to Use WinUSB to Communicate with a USB Device"

[Version]
Signature = "$Windows NT$"
Class = CustomUSBDevices
ClassGuid= {a503e2d3-a031-49dc-b684-c99085dbfe92}
Provider = %MFGNAME%
DriverVer=07/20/2012,1.0.0.4
CatalogFile=winusb.cat    ;CAT file needed for a signed driver pacakage
;------------------------------------------------------------------------------
; ========== Manufacturer/Models sections ===========
;------------------------------------------------------------------------------
[Manufacturer]
%MFGNAME% = MyDevice_WinUSB,NTx86,NTamd64

;------------------------------------------------------------------------------
;  Vendor and Product ID Definitions
;------------------------------------------------------------------------------
; When developing your custom USB device, the VID and PID used in the PC side
; application program and the firmware on the microcontroller must match.
; Modify the below lines to use your VID and PID.  Use the format as shown below.
; Note: One INF file can be used for multiple devices with different VID and PIDs.
; For each supported device, append ",USB\VID_xxxx&PID_yyyy" to the end of the line.
; There is a maximum number of devices that can be supported per line however.
; If you append a large number of VID/PIDs to the end of the line, and get a:
; "The data area passed to a system call is too small." error when trying to install
; the INF, try removing some of the VIDs/PIDs.
;------------------------------------------------------------------------------
[MyDevice_WinUSB.NTx86]
%DESCRIPTION% =USB_Install, USB\VID_04d8&PID_0204

[MyDevice_WinUSB.NTamd64]
%DESCRIPTION% =USB_Install, USB\VID_04d8&PID_0204

;=========================================================================================
;ClassInstall32 and ClassInstall_AddReg sections used to make new device manager category.
;=========================================================================================
[ClassInstall32]
AddReg=ClassInstall_AddReg

[ClassInstall_AddReg]
HKR,,,,%DEVICEMANAGERCATEGORY%
HKR,,Icon,,"-20"

; =================== Installation ===================

[USB_Install]
Include=winusb.inf
Needs=WINUSB.NT

[USB_Install.Services]
Include=winusb.inf
AddService=WinUSB,0x00000002,WinUSB_ServiceInstall

[WinUSB_ServiceInstall]
DisplayName     = %WinUSB_SvcDesc%
ServiceType     = 1
StartType       = 3
ErrorControl    = 1
ServiceBinary   = %12%\WinUSB.sys

[USB_Install.Wdf]
KmdfService=WINUSB, WinUsb_Install

[WinUSB_Install]
KmdfLibraryVersion=1.11

[USB_Install.HW]
AddReg=Dev_AddReg

[Dev_AddReg]
HKR,,DeviceInterfaceGUIDs,0x10000,"{58D07210-27C1-11DD-BD0B-0800200C9a66}"
;When editing the GUID (the big hex number with dashes inside the squiggly 
;braces), make sure to write the intended PC application to use the same GUID.
;Otherwise the application won't be able to find the USB device properly.

[USB_Install.CoInstallers]
AddReg=CoInstallers_AddReg
CopyFiles=CoInstallers_CopyFiles

[CoInstallers_AddReg]
HKR,,CoInstallers32,0x00010000,"WdfCoInstaller01011.dll,WdfCoInstaller","WinUSBCoInstaller2.dll"

[CoInstallers_CopyFiles]
WinUSBCoInstaller2.dll
WdfCoInstaller01011.dll

[DestinationDirs]
CoInstallers_CopyFiles=11

; ================= Source Media Section =====================

[SourceDisksNames]
1 = %DISK_NAME%,,,\i386
2 = %DISK_NAME%,,,\amd64

[SourceDisksFiles.x86]
WinUSBCoInstaller2.dll=1
WdfCoInstaller01011.dll=1

[SourceDisksFiles.amd64]
WinUSBCoInstaller2.dll=2
WdfCoInstaller01011.dll=2

; =================== Strings ===================

[Strings]
MFGNAME="Your Manufacturer Name" ; ManufacturerName
DESCRIPTION="Your USB Device Name" ; DeviceName
WinUSB_SvcDesc="WinUSB Device"
DISK_NAME="WinUSB Device Install Disk" ; DiskName
DEVICEMANAGERCATEGORY="Custom USB Devices" ; ClassName 
```

# java - 如何在碧玉报告中打印富文本框值（HTML 格式）？

> ID：13134938
> 
> 赞同：-1
> 
> 时间：2012-10-30T08:09:03.963
> 
> 标签：java, html, jasper-reports, report

我正在开发一个项目（在 java 上），我提供了富文本框进行描述。现在客户想要在报告中打印该描述。目前我正在使用碧玉报告进行报告。请帮助我，我如何在碧玉报告中打印该描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:44:30.083

您需要将标记设置为您的语言（HTML、RTF、样式）

```
<textField>
    <reportElement x="140" y="53" width="100" height="20"/>
    <textElement markup="html"/>
    <textFieldExpression><![CDATA[$F{field}]]></textFieldExpression>
</textField> 
```

# android - RadioButton 可以将字体放在按钮之前吗？

> ID：13134943
> 
> 赞同：0
> 
> 时间：2012-10-30T08:09:14.143
> 
> 标签：android

我想实现如下功能：

```
Male     ⊙
Female   ⊙ 
```

如何使用 XML 或代码处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:07:02.597

```
android:button="@null"   
android:drawableRight="@android:drawable/xxxxx"   
android:paddingLeft="30dip"   
android:text="Male" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T08:41:32.007

你可以，但你必须为此创建一个自定义的列表视图。

在您的 XML 文件或代码中的列表视图初始化时，您必须指定除了本机样式之外应该选择哪种样式。

尝试查看此[链接](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)以及[此](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)链接，它们可能会有所帮助。

# sql - SQL找出两个表中的公共值

> ID：13134944
> 
> 赞同：0
> 
> 时间：2012-10-30T08:09:16.593
> 
> 标签：sql

我有两张桌子`vMerkmale`和`aREL_Adr_Merk`. 它们有一个共同的属性，即`MID`。我想绑定 `Mtitel`与. 但是，问题是，当我选择两个 ID 时，它会绑定这两个 ID 的所有值。我只想绑定他们共同的 MTITEL 值。我的代码如下..`merkmale``MID``aREl_Adr_Merk`

```
 SELECT M.mtitel as Attribute FROM vMerkmale  M ,aREL_Adr_Merk R
   where m.mid=R.MID and AdrID in(252674,247354) 
   group by M.MTitel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:11:39.557

试试这个

```
select distinct M.mtitel as Attribute
from merkmale as M
where M.MID in (
    select A.MID 
    from aREl_Adr_Merk as A 
    where A.AdrID in (252674,247354)
) 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!6/c427a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:12:14.750

> 问题是，当我选择两个 ID 时，它会绑定这两个 ID 的所有值。我只想绑定他们共同的 MTITEL 价值观

使用`DISTINCT`与您在查询中所做的一样`JOIN`的公共属性：`MID`

```
SELECT DISTINCT M.mtitel as Attribute 
FROM vMerkmale  M 
INNER JOIN aREL_Adr_Merk R ON m.mid = R.MID
WHERE m.AdrID in(252674, 247354) 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/edit/83500)

# php - mysqli - mysqli_stmt::bind_param() 预期作为参考

> ID：13134949
> 
> 赞同：0
> 
> 时间：2012-10-30T08:09:41.640
> 
> 标签：php, mysqli

这是我的课程代码：

```
class DAL
{

public function paramtypez($val)
{
        $types = '';                        //initial sting with types
        foreach($val as $para) 
        {     
            if(is_int($para)) {
                $types .= 'i';              //integer
            } elseif (is_float($para)) {
                $types .= 'd';              //double
            } elseif (is_string($para)) {
                $types .= 's';              //string
            } else {
                $types .= 'b';              //blob and unknown
            }
        }
        return $types;
}

 public function execsql($query,$param)
{
    $conn=new mysqli("127.0.0.1","root","","sample");

    if($row=$conn->prepare($query))
    {
        array_unshift($param,array(DAL::paramtypez($param)));
        call_user_func_array(array($row, 'bind_param'), $param);

        $row->execute();
        return true;
    }
    else
    return false;

}
} 
```

并且像这样使用这个类：

```
$vars = new DAL();
$vars->execsql('insert into tesst (name,family,age) values(?,?,?)',array('mori','gre','25')); 
```

但那是给我这个错误：

```
 Warning: Parameter 2 to mysqli_stmt::bind_param() expected to be a reference, value given in ..\htdocs\inc.php on line 30 
```

如何解决此错误？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:15:29.003

[发生这种情况是因为您在bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)需要实际引用时给出了一个数组：

试试看这是否有效：

```
class DAL
{

    public function paramtypez($val)
    {
            $types = '';                        //initial sting with types
            foreach($val as $para) 
            {     
                if(is_int($para)) {
                    $types .= 'i';              //integer
                } elseif (is_float($para)) {
                    $types .= 'd';              //double
                } elseif (is_string($para)) {
                    $types .= 's';              //string
                } else {
                    $types .= 'b';              //blob and unknown
                }
            }
            return $types;
    }

    public function execsql($query,$param)
    {

        $conn=new mysqli("127.0.0.1","root","","sample");

        if($row=$conn->prepare($query))
        {
            array_unshift($param,array(DAL::paramtypez($param)));
            call_user_func_array(array($row, 'bind_param'), $this->makeValuesReferenced($param));

            $row->execute();
            return true;
        }
        else
        return false;

    }

    protected function makeValuesReferenced(&$arr)
    {
        $refs = array();
        foreach($arr as $key => $value)
            $refs[$key] = &$arr[$key];
        return $refs;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:24:22.903

`$param`在将其传递给 call_user_func_array 之前看起来像这样：

```
[['ssi'],'mori','gre','25'] 
```

这是不正确的。你应该改变这个：

```
array_unshift($param,array(DAL::paramtypez($param))); 
```

对此：

```
array_unshift($param,DAL::paramtypez($param)); 
```

# c - 为长值显式声明 L 或 UL 的原因是什么

> ID：13134956
> 
> 赞同：49
> 
> 时间：2012-10-30T08:10:21.470
> 
> 标签：c, constants

从一个例子

```
unsigned long x = 12345678UL 
```

我们一直了解到，编译器只需要在上面的示例中看到“long”即可设置 4 个字节（32 位）的内存。问题是为什么我们应该在长常量中使用 L/UL，即使在声明它是长常量之后也是如此。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-30T08:28:25.070

当后缀`L`或`UL`不使用时，编译器使用第一种可以包含列表中的常量的类型（请参阅 C99 标准中的第 6.4.4:5 条中的详细信息。对于十进制常量，列表为`int`, `long int`, `long long int`）。

因此，大多数时候，没有必要使用后缀。它不会改变程序的含义。它不会改变`x`大多数体系结构的示例初始化的含义，尽管如果您选择了一个不能表示为`long long`. `U`有关后缀部分是必需的示例，另请参见 codebauer 的答案。

* * *

在某些情况下，程序员可能想要显式设置常量的类型。一个例子是使用可变参数函数时：

```
printf("%lld", 1LL); // correct, because 1LL has type long long
printf("%lld", 1);   // undefined behavior, because 1 has type int 
```

* * *

使用后缀的一个常见原因是确保计算结果不会溢出。两个例子是：

```
long x = 10000L * 4096L;
unsigned long long y = 1ULL << 36; 
```

在这两个示例中，如果没有后缀，常量将具有类型`int`，并且计算将按`int`. 在每个示例中，这都会导致溢出风险。使用后缀意味着计算将以更大的类型进行，它有足够的结果范围。

正如 Lightness Races in Orbit 所说，litteral 的后缀出现**在**作业之前。在上面的两个示例中，仅声明`x`as`long`和`y`as`unsigned long long`不足以防止分配给它们的表达式的计算溢出。

* * *

另一个例子是`x < 12U`变量`x`具有类型的比较`int`。如果没有`U`后缀，编译器会将常量类型`12`为`int`，因此比较是有符号整数的比较。

```
int x = -3;
printf("%d\n", x < 12); // prints 1 because it's true that -3 < 12 
```

使用`U`后缀，比较变成无符号整数的比较。“通常的算术转换”意味着 -3 被转换为一个大的无符号整数：

```
printf("%d\n", x < 12U); // prints 0 because (unsigned int)-3 is large 
```

事实上，常量的类型甚至可能会改变算术计算的结果，这也是因为“通常的算术转换”的工作方式。

* * *

请注意，对于十进制常量，C99 建议的类型列表不包含`unsigned long long`. 在 C90 中，该列表以当时最大的标准化无符号整数类型（即`unsigned long`）结束。结果是通过向 C99 添加标准类型改变了某些程序的含义`long long`：与在 C90 中键入的相同常量`unsigned long`现在可以键入为有符号`long long`。我相信这就是为什么在 C99 中决定不在`unsigned long long`十进制常量类型列表中的原因。有关示例，请参阅[此](http://blog.frama-c.com/index.php?post/2012/01/20/Constants-quiz)和[此博客文章。](http://blog.frama-c.com/index.php?post/2012/01/20/Constants-quiz-answers)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-30T08:40:25.847

因为数字文字是典型的 int 类型。UL/L 告诉编译器它们不是 int 类型，例如假设 32bit int 和 64bit long

```
long i = 0xffff;
long j = 0xffffUL; 
```

此处右侧的值必须转换为有符号长整数（32 位 -> 64 位）

1.  “0xffff”，一个 int，将使用符号扩展转换为 long，导致负值 (0xffffffff)
2.  “0xffffUL”，一个无符号长整数，将被转换为一个长整数，产生一个正值（0x0000ffff）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-30T12:47:44.823

> 问题是为什么我们应该在长常量中使用 L/UL，即使在声明它是长常量之后也是如此。

因为它不是“之后”；它是“之前”。

首先，您拥有文字，*然后*将其转换为您尝试将其挤入的变量的任何类型。

它们是两个对象。`unsigned long`正如您所说，目标的类型由关键字指定。源的类型由此后缀指定，因为这是指定文字类型的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-26T15:08:46.720

与这篇文章相关的是为什么`u`.

一个原因`u`是允许*整数常量*大于`LLONG_MAX`十进制形式。

```
// Likely to generate a warning.
unsigned long long limit63bit = 18446744073709551615`; // 2^64 - 1

// OK
unsigned long long limit63bit = 18446744073709551615u`; 
```

# java - 为什么我可以使用反射创建多个单例实例？

> ID：13134957
> 
> 赞同：1
> 
> 时间：2012-10-30T08:10:33.220
> 
> 标签：java

为什么 java 不会阻止您实例化任何单例类对象？

我试图创建 Void 类的对象

```
java.lang.Void 
```

我写了这段代码来创建两个实例

```
try{
    Class clazz = Void.class;
    Constructor cons = clazz.getDeclaredConstructor();
    cons.setAccessible(true);
    Void s2 = (Void) cons.newInstance(); 
    System.out.println(s2);
    Void s3 = (Void) cons.newInstance(); 
    System.out.println(s3);

}catch (Exception e) {
    e.printStackTrace();
} 
```

任何人都可以解释 - 为什么在 java 中允许这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:17:06.153

使用这样的反射可以让您回避正常的保护机制并执行诸如调用私有构造函数和您通常无法访问的方法之类的事情。Java 不允许你在没有`setAccessible`调用的情况下通过私有构造函数来实例化一个类——本质上这意味着“我知道我不应该这样做但是......”

如果您需要运行不受信任的代码，那么您可以使用该`SecurityManager`机制来禁止这种“破坏规则”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:55:22.120

因为 Java 无法知道您打算将该类用作单例。如果您想要这样的课程，请使用枚举。

# c# - MSBuild 不编译资源文件

> ID：13134963
> 
> 赞同：0
> 
> 时间：2012-10-30T08:10:59.997
> 
> 标签：c#, msbuild

我有一个包含多个项目的解决方案（它是一个 Silverlight 应用程序）。解决方案中的许多项目都包含资源 (resx) 文件。当我使用 Visual Studio 构建解决方案时，所有内容都已编译并嵌入正常（例如 XAP 文件中的 en-US 文件夹），但是当我使用 MSBuild 构建相同的解决方案时，资源文件不会编译/嵌入到 XAP 文件中。你如何告诉 MSBuild 像 Visual Studio 那样处理资源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:41:42.387

[也许Guy Smith-Ferrier 的](http://www.guysmithferrier.com/post/2010/10/Building-Localized-XAP-Resource-Files-For-Silverlight-4.aspx)这篇为 Silverlight 4 构建本地化 XAP 资源文件的文章可以为您指明正确的方向，您需要在 .csproj 文件的底部添加以下行：-

```
<Import Project="$(ProgramFiles)\MSBuild\I18N\Silverlight\v4.0\Silverlight.Build.Tasks.targets" />
<Target Name="AfterBuild" DependsOnTargets="XapResourcePackager"> 
</Target> 
```

然后在 .csproj 的行下方添加以下`</SupportedCultures>`行：-

```
<PackageCultures>en-US</PackageCultures> 
```

（其中`<PackageCultures>`包含用于创建 XAP 资源文件的以逗号分隔的文化列表）。

您当然需要使用源代码下载[MSBuild 任务](http://www.guysmithferrier.com/Downloads/Silverlight.Build.Tasks.zip)，以构建 MSBuild 任务库 (Silverlight.Build.Tasks.dll) 和添加到 Silverlight 的 MSBuild 目标文件 (Silverlight.Build.Tasks.targets)应用程序的 .csproj 文件。

# visual-c++ - c++/cli中的sqlite连接字符串错误

> ID：13134966
> 
> 赞同：1
> 
> 时间：2012-10-30T08:11:17.627
> 
> 标签：visual-c++

我正在使用 C++/cli Visual Studio 2010 和 SQLite。代码编译但连接字符串生成错误：

```
String ^ SQL = String::Format("INSERT INTO Backstroke   (Date, Fullname, Male, Group, Length, Points) VALUES ('{0}', '{1}', '{2}','{3}','{4}','{5}' ) ", "a","b",true,"d","e",1);
cmdInsert->Connection = db;
cmdInsert->CommandText = SQL;
cmdInsert->ExecuteNonQuery(); 
```

我得到：

> “组”附近的错误：语法错误和有关连接字符串格式不正确的注释。

男性是一个布尔字段，其余的是文本。尝试正确，男性条目的 1 和 Yes 也都失败了。

# c# - JPEG RGB 到 DICOM 灰度标准

> ID：13134969
> 
> 赞同：-1
> 
> 时间：2012-10-30T08:11:26.937
> 
> 标签：c#, jpeg, rgb, dicom

我有一个从 DICOM 图像转换的 jpeg 文件，当我将 JPEG 转换回 DICOM 时，新图像没有像素数据，因为所有灰度数据都存储在单字节通道中。我需要每个像素以可用于使用 c# 更改窗口宽度和中心的格式存储其数据。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:07:07.150

您应该知道，在从 DICOM -> JPEG -> DICOM 之后，窗口级别不会是诊断级的。您将使用来自 DICOM -> JPEG 的保真度。JPEG 是一种有损格式，因此，即使您拥有 DICOM 图像的完整位深度（例如 12 位 -> 12 位），图像中仍可能存在伪影或其他 JPEG 特定的压缩副作用。

也就是说，像素数据仍然存在，只是存储方式与原始 DICOM 略有不同。您仍然应该能够使用与常规 DICOM 相同的算法（网上有很多参考资料）。

# mysql - Mysql时区不显示

> ID：13134972
> 
> 赞同：0
> 
> 时间：2012-10-30T08:11:39.837
> 
> 标签：mysql

我的 mysql 数据库表中有一个字符串列，它将毫秒作为字符串存储，现在我想将 Date 显示为 ISO 8601 格式，例如 2012-03-12T14:11:23-0400 和 Select Query as

```
SELECT DATE_FORMAT(TIMESTAMP(response_time),"%Y-%m-%dT%H:%i:%s%Q") AS date FROM table_name; 
```

但它没有显示时区，上面查询的结果

```
2012-10-29T14:55:47Q 
```

但我想要的实际结果是

```
2012-10-29T14:55:47-05:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:25:07.240

`%Q`不是 MySQL 中的有效日期说明符。

MySQL 中的时区可以通过以下方式访问：

```
SELECT @@global.time_zone, @@session.time_zone 
```

如果以上返回`SYSTEM`，则表示 MySQL 设置为使用系统的时区，并且必须通过 MySQL 以外的其他方式直接检索。

也就是说，这只会告诉您系统当前正在运行的时区，而不是关于存储为日期/时间值的日期的任何信息，不会存储有关时区的任何信息。

# android - 如何在Android中自定义listView的每一行显示两张图片？

> ID：13134975
> 
> 赞同：0
> 
> 时间：2012-10-30T08:11:46.210
> 
> 标签：android, listview, custom-lists

我想要两个在列表视图的每一行中显示两个图像和两个文本视图。我已经尝试过了，但没有显示图像。

这是自定义列表视图源代码，`custom_listview.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<RelativeLayout
    android:id="@+id/custom_ListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:gravity="center"
    android:padding="20dp" >

    <ImageView
        android:id="@+id/imgBook1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="30dp"
        android:src="@drawable/book1" />

    <TextView
        android:id="@+id/txtTitleBook1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imgBook1"
        android:text="Book1 Title Here" />

    <ImageView
        android:id="@+id/imgBook2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:layout_toRightOf="@+id/imgBook1"
        android:src="@drawable/book2" />

    <TextView
        android:id="@+id/txtTitleBook2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/txtTitleBook1"
        android:layout_alignBottom="@+id/txtTitleBook2"
        android:layout_toRightOf="@+id/txtTitleBook1"
        android:text="Book2 Title Here" />

</RelativeLayout>

</RelativeLayout> 
```

这是`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

这是我的Java代码`Main.java`：

```
 package my.islamic.books.lib.app;

    import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class Home extends ListActivity {

    String[] booksTitles = { "Book1", "Book2", "Book3", "Book4" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home_activity);

        setListAdapter(new MyAdapter(this, android.R.id.text1, booksTitles));

    }

    private class MyAdapter extends ArrayAdapter<String> {

        int[] booksCoverPhotos = { R.id.imgBook1, R.id.imgBook2, R.id.imgBook1,
                R.id.imgBook2};

        public MyAdapter(Context context, int resource, String[] objects) {
            // super(context, resource, textViewResourceId, objects);
            super(context, resource, objects);

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View row = inflater.inflate(R.layout.listview_body, parent, false);

            ImageView imgView_book1 = (ImageView) row
                    .findViewById(R.id.imgBook1);
            ImageView imgView_book2 = (ImageView) row
                    .findViewById(R.id.imgBook2);
            TextView txtView_bookTitle1 = (TextView) row
                    .findViewById(R.id.txtTitleBook1);
            TextView txtView_bookTitle2 = (TextView) row
                    .findViewById(R.id.txtTitleBook2);

            txtView_bookTitle1.setText(booksTitles[position]);
            imgView_book1.setImageResource(booksCoverPhotos[position]);
            imgView_book2.setImageResource(booksCoverPhotos[position]);
            txtView_bookTitle2.setText(booksTitles[position]);

            return row;
        }

    }// end class

} 
```

而且，当我在上面的 Java 代码中对任何 imgView_book1 或 imgView_book2 进行评论时，它会在 listView 的每一行中显示一个图像，但为什么不是两个图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:21:33.557

ImageView 方法`setImageResource(int resId)`获取可绘制对象的 id 作为参数。例如，`R.drawable.your_image`。阅读[本](http://developer.android.com/intl/ru/reference/android/widget/ImageView.html#setImageDrawable%28android.graphics.drawable.Drawable%29)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:21:50.637

您可以使用 BaseAdapter 来实现您的要求，请参见[此处](https://stackoverflow.com/questions/12387474/adapter-in-android-in-list-view/12387706#12387706) 和[此处](http://android-helper.blogspot.in/2011/07/android-custom-listview-example.html)

# c# - 从文件流下载文件

> ID：13134976
> 
> 赞同：0
> 
> 时间：2012-10-30T08:11:54.603
> 
> 标签：c#, download, filestream, binary-data

我在图像类型的数据库中有一个字段，它以二进制格式存储文件。

现在我想为用户提供一个工具，用户可以从那里下载该文件。我在字节数组对象中有文件数据。如何向用户显示打开的保存对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:17:25.543

这是一个显示来自数据库的 blob 图像的示例，您可以对其进行修改以提供文件供下载而不是显示图像（id 是数据库中的图像文件 ID）：

```
void  CreateImage(string id)
{
    // Connection string is taken from web.config file.
    SqlConnection _con = new SqlConnection(
      System.Configuration.ConfigurationSettings.AppSettings["DB"]);

    try
    {
        _con.Open();
        SqlCommand _cmd = _con.CreateCommand();
        _cmd.CommandText = "select logo from" + 
                           " pub_info where pub_id='" + 
                           id + "'";
        byte[] _buf = (byte[])_cmd.ExecuteScalar();

        // This is optional
        Response.ContentType = "image/gif";

        //stream it back in the HTTP response
        Response.BinaryWrite(_buf);

    }
    catch
    {}
    finally
    {
        _con.Close();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:18:13.843

试试看：创建带有标题的图像的 ashx 文件处理程序：

```
Content-Type: application/force-download 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:18:45.050

关于什么：

```
//using System.Net;   
WebClient wc = new WebClient();

OpenFileDialog ofd = new OpenFileDialog();
if(ofd.ShowDialog() == DialogResult.OK)
   wc.DownloadFile("http://website.net/image.jpg", ofd.FileName); 
```

**编辑：**

```
//using System.IO;
MemoryStream ms = new MemoryStream(array);
Bitmap bmp = new Bitmap(ms);
bmp.Save("C:\\image.bmp"); 
```

# asp.net - 具有 ISO 日期格式的 WCF REST JSON

> ID：13134978
> 
> 赞同：2
> 
> 时间：2012-10-30T08:12:01.490
> 
> 标签：asp.net, json, wcf, rest, datetime-format

在我的 WCF Web 服务（Framework 4.0）中，我遇到了一个用 JSON 支持 ISO 日期格式的大问题。我尝试了很多，但还没有运气。

休息服务：

```
 [WebInvoke(Method = "PUT", UriTemplate = "/{mvnoid}/{OrderID}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    public DataContracts.Feedback InsertOrder(string mvnoid,string OrderID,OrderRequest orderRequest)
    {            

        OrderRequestManager orderProcessor = new OrderRequestManager();
        DataContracts.Feedback feedback = orderProcessor.ProcessOrder(orderRequest);

        return feedback;

    } 
```

这是我的对象：

```
[DataContract(Namespace = NamespacesHelper.SCHEMA_NAMESPACE)]
public class OrderRequest
{
    [DataMember(IsRequired = true, Order = 1)]
    public string SystemId { get; set; }

    [DataMember(IsRequired = true, Order = 2)]
    public string OrderType { get; set; }

    [DataMember(IsRequired = true, Order = 3)]
    public DateTime OrderDate { get; set; }

    [DataMember(IsRequired = true, Order = 4)]
    public DateTime OrderScheduleDate { get; set; }

    [DataMember(IsRequired = false, Order = 5)]
    public int UserId { get; set; }

} 
```

这是我的 JSON 有效负载

{ "SystemId":"2", "OrderType":"TESTORDER", "OrderDate":"/Date(1255131630400)/", "OrderScheduleDate":"/Date(1255131630400)/", "UserId":150 } 和我需要此“/Date(1255131630400)/”为 ISO 格式“2012-10-30T15:00:00”。

我也试过这个解决方案。通过创建自定义 JSON 格式化程序。 [WCF REST 服务的 JSON.NET 序列化程序](https://stackoverflow.com/questions/9827933/json-net-serializer-for-wcf-rest-services)。但我无法在任何地方找到 HttpHostConfiguration 类。:(

提前感谢您的帮助。

# java - 列表 到数组列表 转换问题

> ID：13134983
> 
> 赞同：98
> 
> 时间：2012-10-30T08:12:21.243
> 
> 标签：java, list, arraylist

我有一个以下方法......它实际上采用句子列表并将每个句子分成单词。就这个：

```
public List<String> getWords(List<String> strSentences){
allWords = new ArrayList<String>();
    Iterator<String> itrTemp = strSentences.iterator();
    while(itrTemp.hasNext()){
        String strTemp = itrTemp.next();
        allWords = Arrays.asList(strTemp.toLowerCase().split("\\s+"));          
    }
    return allWords;
} 
```

我必须将此列表传递到以下格式的哈希图中

```
HashMap<String, ArrayList<String>> 
```

所以这个方法返回List，我需要一个arrayList？如果我尝试施放它不会锻炼......有什么建议吗？

另外，如果我将 ArrayList 更改为 HashMap 中的 List，我会得到

```
java.lang.UnsupportedOperationException 
```

因为我的代码中有这一行

```
sentenceList.add(((Element)sentenceNodeList.item(sentenceIndex)).getTextContent()); 
```

有更好的建议吗？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-10-30T08:16:59.337

Cast 在列表的实际实例是`ArrayList`. 如果是，比如说，a `Vector`（它是 的另一个扩展`List`），它将抛出一个 ClassCastException。

更改 HashMap 定义时的错误是由于稍后处理的元素，并且该过程需要一个仅在`ArrayList`. 异常告诉您它没有找到它正在寻找的方法。

`ArrayList`用旧的内容创建一个新的。

```
new ArrayList<String>(myList); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-10-30T08:18:26.260

首先，为什么地图是 a`HashMap<String, ArrayList<String>>`而不是 a `HashMap<String, List<String>>`？是否有某些原因为什么该值必须是接口的特定实现`List`（`ArrayList`在这种情况下）？

`Arrays.asList`不返回 a `java.util.ArrayList`，因此您不能将返回值`Arrays.asList`赋给 type 的变量`ArrayList`。

代替：

```
allWords = Arrays.asList(strTemp.toLowerCase().split("\\s+")); 
```

尝试这个：

```
allWords.addAll(Arrays.asList(strTemp.toLowerCase().split("\\s+"))); 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-10-30T08:17:56.590

看看[ArrayList#addAll(Collection)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection))

> 按照指定集合的​​迭代器返回的顺序，将指定集合中的所有元素附加到此列表的末尾。如果在操作正在进行时修改了指定的集合，则此操作的行为是未定义的。（这意味着如果指定的集合是这个列表，并且这个列表是非空的，那么这个调用的行为是未定义的。）

所以基本上你可以使用

```
ArrayList<String> listOfStrings = new ArrayList<>(list.size());
listOfStrings.addAll(list); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-01-12T08:44:10.350

在 Kotlin 中，可以通过将 List 作为构造函数参数传递来将其转换为 ArrayList。

```
ArrayList(list) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-30T08:14:03.753

[`Arrays.asList`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)不返回实例，[`java.util.ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)但返回实例`java.util.Arrays.ArrayList`。

如果要访问`ArrayList`特定信息，则需要转换为 ArrayList

```
allWords.addAll(Arrays.asList(strTemp.toLowerCase().split("\\s+"))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-21T03:56:58.083

这有点晚了，但想到了一种简单的方法来解决**将 List 转换为 ArrayList**的问题。

**简单的方法**

```
public static <T> ArrayList<T> listToArrayList(List<T> list) {
    return list != null ? new ArrayList<>(list) : null;
} 
```

**经典方式**

```
public static  <T> ArrayList<T>  listToArrayList(List<T> list) {
    ArrayList<T> arrayList = new ArrayList<>();
    if (list != null) {
        for (int i = 0; i < list.size(); i++) {
            arrayList.add(list.get(i));
            i++;
        }
        // or simply
        // arrayList.addAll(list);
    }
    return  arrayList;
} 
```

**用法**

```
listToArrayList(yourList); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-06T17:52:29.297

久经考验的方法。

```
public static ArrayList<String> listToArrayList(List<Object> myList) {
        ArrayList<String> arl = new ArrayList<String>();
        for (Object object : myList) {
            arl.add((String) object);
        }
        return arl;

    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-15T15:59:09.790

> ArrayList listOfStrings = new ArrayList<>(list.length); listOfStrings.addAll(Arrays.asList(list));

如果是对象列表，您可以使用这种方式将 Model[] 列表转换为 ArrayList

# html - li under li 不能给子弹

> ID：13134985
> 
> 赞同：1
> 
> 时间：2012-10-30T08:12:26.357
> 
> 标签：html, wordpress

我使用引导跨度类作为跨度 2 跨度 4 等....我的问题是我想在 li 下给我的 li 提供与父 li 相同的外观，这意味着子弹充满黑色但无法这样做。 ....请帮帮我。

这是我的 li 和 ul 代码：

```
<ul class="thumbnails">
<li class="span2"><span style="color: #e15b1f;">DESIGNER/FASHION HOUSES</span>
<ul>
<li>ASHIMA & LEENA SINGH Delhi</li>
<li>JATTIN KOCHHAR Delhi</li>
<li>JJ VALAYA Gurgaon</li>
<li>MANAV GANGWANI Delhi</li>
<li>MANDIRA WIRK Delhi</li>
<li>MONISHA BAJAJ and CO.Delhi</li>
</ul>
</li>
<li class="span2"><span style="color: #e15b1f;">RETAIL 
ORGANISATIONS</span>
<ul>
<li>EBONY 
Delhi</li>
<li>SHOPPERS STOP 
Mumbai</li>
<li>PANTALOONS 
Mumbai</li>
<li>LIFESTYLE 
Delhi</li>
<li>TOMMY HILFIGER 
Bangalore</li>
<li>NIKE 
Bangalore</li>
</ul>
</li>
<li class="span2"><span style="color: #e15b1f;">DOMESTIC 
COMPANIES</span>
<ul>
<li>INTERTEK 
Gurgaon</li>
<li>WECA 
Gurgaon</li>
<li>BIBA APPARELS 
Delhi</li>
<li>SEWA 
Delhi</li>
<li>PROVOGUE 
Mumbai</li>
<li>BOMBAY DYEING 
Mumbai</li>
</ul>
</li>
<li class="span2"><span style="color: #e15b1f;">OVERSEAS 
COMPANIES</span>
<ul>
<li>CARREFOUR INDIA 
United Kingdom </li>
<li>COLBY INTERNATIONAL 
New York</li>
<li>GAP INTERNATIONAL 
USA</li>
<li>LI AND FUNG 
Hong Kong</li>
<li>POETICGEM UK</li>
<li>JILL STUART 
New York</li>
</ul>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:27:50.350

只需添加

```
li {
    list-style-type: disc !important;
} 
```

您的样式表/头部样式标签应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:21:22.060

以下内容足以覆盖 *browser default*s（`circle`用于内部列表），以便列表项具有实心 ( `disc`) 列表项目符号：

```
ul li, ul li li { list-style-type: disc; } 
```

如果这不足以覆盖您正在使用的某些引导代码中的设置，那么您需要分析该代码并使用更具体的选择器设置 CSS。在 Firefox 中使用例如 Firebug，您可以看到哪些 CSS 规则应用于每个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:31:10.723

您只需要申请`list-style-type: disc;`您希望获得子弹的 LI 级别。

**[http://jsfiddle.net/aab2p/2/](http://jsfiddle.net/aab2p/2/)**

我的示例显示了带有项目符号的红色标题下的所有 LI：

```
ul > li > ul > li {
    list-style-type: disc !important;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T08:35:24.097

与代达罗斯的答案相同，但在 HTML 文件中。 `<li style="list-style-type: disc;">ASHIMA & LEENA SINGH Delhi</li>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T09:04:58.260

正如其他人所没有的那样，我将提供一个实际使用已经就地类的答案。将此代码放在您的 CSS 样式表中：

```
li.span2 ul li {
    list-style: disc;
}

//OR

ul.thumbnails > li.span2 > ul > li {
    list-style-type: disc;
} 
```

您可能希望应用`!important`它来覆盖现有样式，如代达罗斯或亚当的回答，但这次您不会影响您网站中的任何其他嵌套列表。

# javascript - 用 javascript 更改 iframe url。火狐问题

> ID：13134988
> 
> 赞同：1
> 
> 时间：2012-10-30T08:12:37.277
> 
> 标签：javascript, firefox, iframe

我有一个在 iframe 中加载默认链接的主页 `http://mypage.com/myurl`。将它放在博客中，我想为每个帖子页面动态更改 iframe 内的默认链接。我像这样加载默认链接：

```
<iframe width='1000' height='500' name='iframename' frameborder='0'
        src='http:/mypage.com/myurl'></iframe> 
```

（适用于所有浏览器）并且我通过将此代码放在每个帖子页面中来动态更改 iframe 内的链接：

```
<script type="text/javascript">
    document.iframename.location = "http://mypage.com/mynewurl"; 
</script> 
```

它在 chrome 和 ie 上运行良好，但在 firefox 上不起作用！！

有什么想法或解决方法吗？

这里有一个简化的示例[www.tinyurl.com/9l7zt2n](http://www.tinyurl.com/9l7zt2n) 查看与 firefox 的区别，它在 iframe 中加载默认链接。ie 和 chrome 可以随着添加的 javascript 而改变。

如果它有助于在博客 [www.tinyurl.com/9axhquh](http://www.tinyurl.com/9axhquh)上对其进行测试，您 可以看到它在 chrome 上运行，即，如果您单击任何帖子标题或“阅读更多”以加载帖子页面，顶部的 iframe 会相应更改

有什么想法或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:17:09.190

`document.iframename.location`可能不支持跨浏览器。

尝试：

```
<iframe width='1000' height='500' id='iframeid' frameborder='0' src='http:/mypage.com/myurl'></iframe>

<script type="text/javascript">
    document.getElementById('iframeid').src = "http://mypage.com/mynewurl";
</script> 
```

这表示：

1.  `document.elementName`不支持通过语法按名称访问元素。
2.  iframe 元素没有名为 的属性`location`。`location`是 的一个属性`window`。您可以`window`使用`iframe`using访问`contentWindow`。

我在这里写了一个简短的测试[http://jsfiddle.net/FyNW9/](http://jsfiddle.net/FyNW9/)。在不同的浏览器中运行它。

# java - Android 游戏：服务器应该多久被 ping 一次？

> ID：13134991
> 
> 赞同：2
> 
> 时间：2012-10-30T08:13:19.243
> 
> 标签：java, android

我目前正在编写一个 Android 游戏。该游戏具有社交部分，您可以在其中查看朋友的分数并将其与您的分数进行比较。

我目前不确定应该多久更新一次用户的分数。例如将玩家的分数发送到服务器。

而且我不确定我应该多久从服务器下载新数据，例如。朋友分数。

我更新得越多（向服务器发出请求），它就会变得越昂贵，但是我不希望它更新得慢，否则用户可能会感到不安。

什么是理想的更新时间？我每3分钟在想一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:26:10.910

您可以通过单击按钮手动获取最新分数的附加选项将其保持在 10 分钟。

这将避免来自服务器的定期更新，并且还允许用户在愿意的情况下提取最新更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:37:02.350

每次游戏结束后，将分数发送到服务器，正如上面的答案所说，有一个获取分数的按钮会更好。您可以执行类似 View Leaderboard Button 之类的操作，单击哪个应该获取分数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:33:56.420

也许您可以考虑使用其他技术使服务器在发生更改时通知客户端。

例如长轮询：[http ://en.wikipedia.org/wiki/Push_technology#Long_polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:56:18.093

您也可以实现一个简单的推送机制。设置一个 MQTT 代理，让您的应用程序订阅一个主题名称，每当有令人信服的用户更新他们的分数（例如 100）时，将新的分数列表作为消息发布（对于这样的列表，消息限制应该足够了）和在 Android 应用中更新您的列表。请注意，就成本而言，MQTT 是实现这一目标的一种非常好的方法，但如果您不熟悉此概念，则设置此机制可能会有些棘手。

# ios - 具有动态高度的 UITextView

> ID：13134998
> 
> 赞同：3
> 
> 时间：2012-10-30T08:13:53.370
> 
> 标签：ios, height, uitextview, frame

我有一个 textView 可以插入不同长度的不同文本，有些短，有些长.​​. UITextView 是滚动视图的子视图。如何根据输入文本的长度动态设置 UITextView 的高度？

ViewDidLoad 中的这段代码不起作用：

```
self.textView.contentSize = [self.textView.text sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(100, self.textView.contentSize.height) lineBreakMode:UIViewAutoresizingFlexibleHeight]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:20:26.830

这不起作用，因为您的约束是 TextView 的当前 contentSize。你应该把你想要的最大尺寸。

例如，您的代码可能是这样的：

```
#define kMaxHeight 100.f
self.textView.contentSize = [self.textView.text sizeWithFont:[UIFont systemFontOfSize:14] 
                                           constrainedToSize:CGSizeMake(100, kMaxHeight) 
                                               lineBreakMode:UIViewAutoresizingFlexibleHeight]; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T11:39:05.543

由于 UITextView 是 UIScrollView 的子类，因此这可能会有所帮助：

```
UITextView *textView = [UITextView new];
textView.text = @"Your texts ......";
CGSize contentSize = textView.contentSize ;
CGRect frame = textView.frame ;
frame.size.height = contentSize.height ;
textView.frame = frame ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-23T08:46:18.990

下面的编码正在工作。请尝试一下

```
// leave the width at 300 otherwise the height wont measure correctly
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(10.0f, 0.0f, 300.0f, 100.0f)];

// add text to the UITextView first so we know what size to make it
textView.text = [_dictSelected objectForKey:@"body"];

// get the size of the UITextView based on what it would be with the text
CGFloat fixedWidth = textView.frame.size.width;
CGSize newSize = [textView sizeThatFits:CGSizeMake(fixedWidth, MAXFLOAT)];
CGRect newFrame = textView.frame;

newFrame.size = CGSizeMake(fmaxf(newSize.width, fixedWidth), newSize.height);
textView.frame = newFrame; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T08:22:16.837

`Calculate string size``fits`在`UITextView`：_

```
 [yourString sizeWithFont:yourtxtView.font
              constrainedToSize:CGSizeMake(yourtxtView.frame.size.width,1000)
                  lineBreakMode:UILineBreakModeWordWrap]; 
```

`Change frame`的`UITextView`

```
 yourtxtView.frame  = CGRectMake(yourtxtView.frame.origin.x,yourtxtView.frame.origin.y,yourtxtView.frame.size.width,yourtxtView.frame.size.height+20); 
```