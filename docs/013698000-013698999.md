# StackOverflow 问答 13698000-13698999

# iphone - iPhone中jQuery移动中的水平滚动

> ID：13698002
> 
> 赞同：1
> 
> 时间：2012-12-04T07:28:22.920
> 
> 标签：iphone, jquery-mobile, horizontal-scrolling

我正在使用 jQuery mobile 为 iPhone 编写一个简单的程序，我创建了一个包含许多图像的 div，但是即将到来的滚动条是我不想要的垂直的。我希望垂直空间固定并水平溢出图像。我知道有一个像 iScroll 这样的重新滚动插件，但在我的情况下，我不能使用它们，因为这些滚动插件使用`<li>`固定数量的元素来显示在该页面上，但我想保持这种动态，如果用户水平旋转他的设备然后更多图像可以适合屏幕，所以我想要调整，如果用户保持他的设备垂直然后水平有更少的空间，所以图像应该水平滚动，但如果他水平旋转设备，那么他会获得更多的水平空间，更多的图像可以适应，剩余的图像将再次水平滚动。

我固定了 div 的高度并尝试了溢出属性来让图像水平流动，但我猜 jQuery 正在阻止这种行为。

你能把我放在正确的道路上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:56:47.280

我认为您仍然可以使用 iScroll 进行水平滚动，但是`refresh`只要内容尺寸发生变化，您就需要调用方法。在您的情况下，您可以收听`orientationchange`事件并在`refresh`您的 iScroll 对象的情况下执行。

[检查iScroll 文档](http://cubiq.org/iscroll-4)中的“掌握 refresh() 方法”部分。

希望能帮助到你！

编辑。您可以通过如下快速示例开始测试：

```
<div data-role="page" id="loadPage">

<div data-role="content">
    <a href="#" data-role="button" onclick="addText();">Add text</a>
     <div id="scroller" style="border: 1px solid green; white-space: nowrap; width: 300px;">
         <div id="text" style="border: 1px solid red; height: 20px; width: 0px;"></div>
     </div>
</div>

<script type="text/javascript">
    var iscrollPage = null;
    $('#loadPage').bind('pagebeforeshow', function () { 
        iscrollPage = new iScroll($('#scroller').get(0), { vScroll: false, hScroll: true });
    });

    function addText() {
        $('#text').append((new Date()).getTime()).css('width', '+=140');
        iscrollPage.refresh();
    }
</script>

</div> 
```

# c# - 如何在枢轴控件中获取数据以移动到屏幕的上半部分？

> ID：13698003
> 
> 赞同：0
> 
> 时间：2012-12-04T07:28:29.827
> 
> 标签：c#, silverlight, windows-phone-8

我有这个枢轴控制：

```
<ScrollViewer Margin="0,104,0,229" HorizontalAlignment="Left">
        <Grid Height="800" Width="468">
            <phone:Pivot ItemsSource="{Binding DocumentHeaderItemsSearch}">
                <phone:Pivot.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="ProcessName" Text="{Binding ProcessName}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="48" Margin="2,20,2,2" FontWeight="Bold"/>
                    </DataTemplate>
                </phone:Pivot.HeaderTemplate>      

                <phone:Pivot.ItemTemplate>                   
                    <DataTemplate>                          
                            <Grid x:Name="Content"  Grid.Row="0" Margin="0,-35,0,0">
                            <Viewbox x:Name="viewboxHeader"  Tag="0">
                                <Grid Height="80" Width="436">
                                    <Canvas Background="{Binding Urgency, Converter={StaticResource converttocolor}}" Margin="0,0,409,0">
                                        <TextBlock TextWrapping="Wrap" Text="{Binding Duration}" Foreground="Black" RenderTransformOrigin="0.5,0.5" FontSize="{StaticResource PhoneFontSizeNormal}"  Canvas.Top="25" UseLayoutRounding="False" d:LayoutRounding="Auto" TextAlignment="Center" FontWeight="Bold" Width="80" Height="28" Canvas.Left="-26" HorizontalAlignment="Center" VerticalAlignment="Center" >
                                            <TextBlock.RenderTransform>
                                                <CompositeTransform Rotation="-90"/>
                                            </TextBlock.RenderTransform>
                                        </TextBlock>
                                    </Canvas>
                                    <TextBlock TextWrapping="Wrap" Text="{Binding DocDesc}" Foreground="White" Margin="31,4,0,44" FontSize="{StaticResource PhoneFontSizeMediumLarge}" FontFamily="{StaticResource PhoneFontFamilyBold}"/>
                                    <TextBlock TextWrapping="Wrap" Text="{Binding Originator}" Margin="31,44,167,4" FontSize="{StaticResource PhoneFontSizeNormal}" Foreground="White" FontFamily="{StaticResource PhoneFontFamilySemiLight}"/>
                                    <TextBlock TextWrapping="Wrap" Text="{Binding DocDate, Converter={StaticResource convertshortdate}}" Margin="277,44,0,4" FontSize="{StaticResource PhoneFontSizeNormal}" Foreground="White" FontFamily="{StaticResource PhoneFontFamilySemiLight}" HorizontalAlignment="Right"/>
                                </Grid>
                            </Viewbox>
                        </Grid>                         
                    </DataTemplate>
                </phone:Pivot.ItemTemplate>

            </phone:Pivot>  

        </Grid>

    </ScrollViewer> 
```

所以这是我运行应用程序并使用搜索功能时得到的结果：

![在此处输入图像描述](../Images/b72203524bf68eff55ac352e781fe6a9.png)

我将如何让显示结果的对象恰好显示在该枢轴项目标题“76”的正下方？

我正在使用 Visual Studio 2012、c#、silverlight、windows phone 8，并且我在这里使用枢轴控件来获取结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:16:14.220

将 DataTemplate 中的顶级项目更改为 StackPanel 会这样做吗？或者设置网格的 VerticalContentAlignment=Top 和设置 VerticalAlignment=Top/Stretch 是否有效？您可以贪婪并在对齐顶部时使用 PivotItem.ItemTemplate 中的所有空间，或者主动注意空间并与顶部对齐。

此外，在您的测试期间，您应该考虑删除顶级 Grid 边距属性，因为它可能指定 XAML 解析器您希望 Grid 占用 ItemTemplate 中的所有空间。

# android - 是否可以在 doInBackground 运行时停止 asynctask？

> ID：13698008
> 
> 赞同：2
> 
> 时间：2012-12-04T07:28:59.937
> 
> 标签：android, android-asynctask

我在 ActivityB Oncreate() 中创建为异步任务。在那个任务中，我在**doInBackground()**中运行了一个无限循环当我移动到上一个活动并再次进入活动 B 时，创建了另一个异步任务。

**我的问题**现在是两个无限循环正在运行。当我移动到上一个活动时，是否可以停止异步任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:33:31.950

当然...查看[isCancelled()](http://developer.android.com/reference/android/os/AsyncTask.html#isCancelled%28%29)：

```
public Void doInBackground( .... ) {

   while( !isCancelled() ) {
       ...endless activity...
   }

   return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:36:02.897

有一个`Cancel()`方法，但调用**`cancel(boolean mayInterruptIfRunning)`**并不一定会停止后台进程的执行。

通常发生的情况是 AsyncTask 将执行 onCancelled()，并且在完成时不会运行 onPostExecute()。

请参阅文档（“取消异步任务”部分）

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

我会审查您的应用程序的设计并对其进行重新设计，以免出现这种情况，而不是尝试取消正在运行的异步任务。

# javascript - 将值更改为选中的单选按钮的值

> ID：13698017
> 
> 赞同：1
> 
> 时间：2012-12-04T07:29:27.617
> 
> 标签：javascript, jquery-mobile

我在一个页面上有这些单选按钮，还有一个按钮可以转到下一页。（称为“Doorgaan”）。在下一页中，我有一个 id 为“CatNaam”的 h2，我希望将其值 [CATEGORIENAAM] 更改为选中的单选按钮的值。我该怎么做呢？

```
 <div data-role="page" id="beoordelen" data-theme="a">

        <div data-role="header">
            <h1>Beoordelen</h1>
            <a class="ui-btn-left" data-theme="a" data-rel="back">Vorige</a>
        </div><!-- /header -->

        <div data-role="content" data-theme="a">    
            <h2>Kies categorie</h2>
            <form id="oordeelKeuze" method="get">
                   <p>      
                      <input type = "radio" name = "categorie-oordeel" id = "goedkoop-bier" value = "Goedkoop bier" checked = "checked" />
                      <label for = "goedkoop-bier">Goedkoop bier</label>
                   </p><p>                    
                      <input type = "radio" name = "categorie-oordeel" id = "muziek" value = "Muziek" />
                      <label for = "muziek">Muziek</label>
                    </p><p>      
                      <input type = "radio" name = "categorie-oordeel" id = "gezelligheid" value = "Gezelligheid" />
                      <label for = "gezelligheid">Gezelligheid</label>
                    </p>   
            </form>
            <p><a href="#beoordelen2" data-direction="reverse" data-role="button" data-theme="b">Doorgaan</a></p>   

        </div><!-- /content -->

    </div><!-- /beoordelen -->

    <!-- Start of fifth page: #beoordelen2 -->
    <div data-role="page" id="beoordelen2" data-theme="a">

        <div data-role="header">
            <h1>Beoordelen</h1>
            <a class="ui-btn-left" data-theme="a" data-rel="back">Vorige</a>
        </div><!-- /header -->

        <div data-role="content" data-theme="a">    
            <h2>Geef cijfer voor</h2>
            <h2 id="CatNaam">[CATEGORIENAAM]</h2>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:49:56.487

使用 Jquery..

给你的按钮（Doorgaan）一个ID..

```
 <p><a href="#beoordelen2" data-direction="reverse" data-role="button" data-theme="b" id="buttonID">Doorgaan</a></p>   //buttonID in this case 
```

并在您的按钮（Doorgaan）上单击添加此...

```
$('#buttonID').click(function(){
   var selectedRadio= $("input[type='radio'][name='categorie-oordeel']:checked").val();
  $('#CatNaam').text(selectedRadio);
}) 
```

这是小提琴中的工作示例..检查一下

[http://jsfiddle.net/F5brz/](http://jsfiddle.net/F5brz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:46:37.017

如果你使用 jQuery，你可以这样做：

```
var val = $('input[name="categorie-oordeel"]:checked').val();
$('#CatNaam').text(val); 
```

# php - 正则表达式在 mod_rewrite 之后匹配 uri

> ID：13698018
> 
> 赞同：1
> 
> 时间：2012-12-04T07:29:31.747
> 
> 标签：php, regex

我正在寻找一个正则表达式来匹配用'模块`PHP` `PCRE`重写的 uri 。uri如下：`Apache``mod_rewrite`

```
/param1/param2/param3/param4 
```

uri的规则

*   必须至少包含一个`/`；
*   参数只能允许字母、数字`-`和`_`；
*   前两条规则必须有零个或多个实例；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:34:30.510

```
/\/[a-zA-Z0-9_\-\/]+$/ 
```

我假设它必须以 an 开头，这样的`/`东西不应该匹配`/param1/param2/param3/param4*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:24:10.543

怎么样：

```
if (preg_match("~^(?:/[\w-]+)+/?$~", $string)) {
    # do stuff
} 
```

**解释：**

```
The regular expression:

(?-imsx:^(?:/[\w-]+)+/?$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (?:                      group, but do not capture (1 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    /                        '/'
----------------------------------------------------------------------
    [\w-]+                   any character of: word characters (a-z,
                             A-Z, 0-9, _), '-' (1 or more times
                             (matching the most amount possible))
----------------------------------------------------------------------
  )+                       end of grouping
----------------------------------------------------------------------
  /?                       '/' (optional (matching the most amount
                           possible))
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# javascript - 使用 JavaScript 更改按钮的 CSS 类

> ID：13698025
> 
> 赞同：2
> 
> 时间：2012-12-04T07:30:00.723
> 
> 标签：javascript, css

是否可以使用 JavaScript 更改 HTML 按钮的 CSS 类？

我试过了，但没有用：

```
document.getElementById("btnChoice1").setAttribute("class", "redButton"); 
```

HTML 按钮

```
<button class="basicButton" id="btnChoice1"> 
```

CSS

```
.basicButton {
    width:300px;
}

.redButton {
    width:300px;
    background-color:red;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:33:10.193

试试`document.getElementById("btnChoice1").className = 'redButton'`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T07:34:36.347

`className`是首选，但您的`setAttribute()`代码应该可以工作。如果它不起作用，那么您可能在页面上存在按钮之前执行了 Javascript。

检查代码是在`window.onload`事件内还是在按钮标记之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T07:34:11.213

您可以使用以下代码进行尝试：

```
document.getElementById("btnChoice1").className = "redButton"; 
```

如果你想使用 jquery，你必须这样写：

```
(document.getElementById("btnChoice1")).setAttribute("class", "redButton"); 
```

问候克纳德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:36:43.133

您的代码有效。

您可能没有将 javascript 放在应有的位置，或者您的代码中有一些错误，因此 javascript 无法执行。

```
<button id="change" onClick="document.getElementById('btnChoice1').setAttribute('class', 'redButton');">change</button>

<button class="basicButton" id="btnChoice1">
    test
</button> 
```

​</p>

证明您的代码在这里工作[http://jsfiddle.net/nDmKP/](http://jsfiddle.net/nDmKP/)

# javascript - $ 在变量的开头和结尾

> ID：13698027
> 
> 赞同：7
> 
> 时间：2012-12-04T07:30:20.123
> 
> 标签：javascript, jquery

> **可能重复：**
> [为什么 JavaScript 变量会以美元符号开头？](https://stackoverflow.com/questions/205853/why-would-a-javascript-variable-start-with-a-dollar-sign)

我用 jquery 实现了一些语法，但不知道它是什么。开始：

```
var $foo = $("bar").blah();

var hello$ = $("stgelse").etc(); 
```

这些有什么区别？为什么他们会这样？

另外，例如：

```
var $foo = $("").blah(); 
```

var 应该已经包含返回的任何右侧？不？

你能详细说明一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T07:41:56.803

在 Javascript 中，您可以`$`在变量名中使用（或者单独作为变量名，例如 jQuery 库使用的变量名），语言本身没有特殊含义。

有些人`$`在变量名的开头使用来表示该变量应该包含一个jQuery对象，例如：

```
var $form = $('form'); 
```

变量名称末尾的A`$`在 BASIC 中用于字符串变量，这可能是在其他语言中命名变量时使用它来表示某些含义的原因之一。例子：

```
10 LET NAME$="JOHN DOE"
20 PRINT NAME$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T07:34:01.940

```
var $foo = $("bar").blah(); 
```

*   `var`是在某些情况下使变量局部化的关键字。看到[这个问题](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)
*   `$foo`是此变量的名称。不需要`$`, 确实它混淆了一切，但有些语言（如 PHP）需要他们说“这是一个变量”。它可能只是`foo`
*   `=`是分配`$foo`来自右手边的任何东西
*   `$`是另一个变量，但是一个特殊的变量：这是你的 JQuery 东西！从那里你会看到它完成了所有 JQuery 的事情，比如“find `bar`, do`blah()`等。

另一行基本上也是如此，但在这种情况下，有人认为这`hello$`将是一个不错的 var 名称 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T07:33:13.093

这里

```
var hello$ and $foo 
```

`hello$`, $foo 只是一个[变量名](https://stackoverflow.com/questions/1916584/jquery-variable-syntax)

和 `$("").blah();`

`$`是jquery对象

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/pBS87/)]]]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T07:34:46.423

`$`只是一个名称 - JavaScript 中的名称可以包含美元符号，并且可以仅包含一个美元符号。

它就像普通的 javascript 变量，但按照惯例用于从普通的 javascript 变量中识别 jquery 对象变量。没什么特别的。

# ipad - 如何在 iPad 中跟踪 HTTP 请求/响应？

> ID：13698028
> 
> 赞同：1
> 
> 时间：2012-12-04T07:30:27.103
> 
> 标签：ipad, http, safari, firebug

我正在使用 iPad，我想跟踪 HTTP 请求/响应，就像在 Windows 机器中查看 Firebug/Firefox 中的 Net Tab 一样。我在 iPad 上使用 Safari 浏览器，我可以使用任何 HTTP 跟踪吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:51:31.710

您可以设置 mitmproxy 或 Charles HTTP 代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:57:38.780

如果您在同一网络上有一台 PC，您可以在其上安装[Fiddler](http://www.fiddler2.com/fiddler2/)，并允许 Fiddler 接受外部连接并将其设置为 iOS 中的代理。

# windows-phone-7 - 如何在 Windows Phone 7.1 中使用 Windows phone 商店测试套件

> ID：13698029
> 
> 赞同：0
> 
> 时间：2012-12-04T07:30:29.173
> 
> 标签：windows-phone-7, marketplace, windows-phone-store, testkit

我正在开发 Windows Phone 7.1 应用程序，并希望根据市场要求对其进行测试。所以我使用 Marketplace 测试套件。但是，在阅读有关[Windows Phone Store Test Kit](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394032%28v=vs.105%29.aspx)的信息时，我看到

> 随 Windows Phone SDK 7.1 安装的 Marketplace 测试工具包已过时。使用随 Windows Phone SDK 8.0 安装的应用商店测试工具包测试面向 Windows Phone OS 7.1 的应用程序。

那么如何使用 Windows Phone Store 测试工具包呢？我不想安装 Windows Phone 8 SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:47:08.643

你为什么不想安装 WP 8 SDK。它与现有的 WP 7.1 SDK 并排安装。您可以同时拥有这两个 SDK（换句话说 - 两个 VS 版本）。这样您就可以在 7.1 中开发并使用 8 SDK 进行测试。

# javascript - mozilla 的跨浏览器 addeventlistener shim 实现是否可行

> ID：13698034
> 
> 赞同：0
> 
> 时间：2012-12-04T07:31:10.190
> 
> 标签：javascript, events, addeventlistener, shim

我在 devloper.Mozilla 找到了这段代码。 [addEventListener 兼容性](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener#Compatibility)

该页面上的代码看起来是否可以使 addEventListener 跨浏览器？

我真的无法访问一堆旧浏览器来测试它，所以我想我会先在这里问。

所有新的浏览器都支持 addEventListener，所以没什么大不了的。我只是对可以为旧浏览器提供功能的东西以及 Mozzilla 的 shim 是否值得感兴趣。

**我喜欢 jQuery、YUI 和原型之类的库，而且我知道这是使事件更容易的一种选择（就像所有 js 库一样），所以将此问题视为学术问题。为了学习精神。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:05:19.690

您链接到的代码看起来不错，据我所知它应该可以工作。但是，如果我是你，我会从深入研究 jQuery 源代码开始寻找他们是如何做到的，因为 jQuery 正在不断开发中，这与 developer.Mozilla 的（假设）示例不同。

*将 jQuery 替换为您喜欢研究的任何其他库。*

# python - ImportError：手动安装后没有名为 vcs 的模块

> ID：13698038
> 
> 赞同：2
> 
> 时间：2012-12-04T07:32:00.610
> 
> 标签：python, version-control, installation

我想尝试 python vcs 包，但是..

我的电脑上有 Win7 x86，d:\pyth27 文件夹中有 python 2.7。

我下载并安装了（使用命令“python.exe my_instfolder\setup.py install”）vcs 的所有依赖项。我现在有：

```
d:\pyth27>python inst\vcs\setup.py install
running install
running bdist_egg
running egg_info
writing requirements to vcs.egg-info\requires.txt
writing vcs.egg-info\PKG-INFO
writing top-level names to vcs.egg-info\top_level.txt
writing dependency_links to vcs.egg-info\dependency_links.txt
writing entry points to vcs.egg-info\entry_points.txt
warning: manifest_maker: standard file 'setup.py' not found

reading manifest file 'vcs.egg-info\SOURCES.txt'
writing manifest file 'vcs.egg-info\SOURCES.txt'
installing library code to build\bdist.win32\egg
running install_lib
warning: install_lib: 'build\lib' does not exist -- no Python modules to install

creating build\bdist.win32\egg
creating build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\PKG-INFO -> build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\SOURCES.txt -> build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\dependency_links.txt -> build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\entry_points.txt -> build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\not-zip-safe -> build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\requires.txt -> build\bdist.win32\egg\EGG-INFO
copying vcs.egg-info\top_level.txt -> build\bdist.win32\egg\EGG-INFO
creating 'dist\vcs-0.2.2-py2.7.egg' and adding 'build\bdist.win32\egg' to it
removing 'build\bdist.win32\egg' (and everything under it)
Processing vcs-0.2.2-py2.7.egg
removing 'd:\pyth27\lib\site-packages\vcs-0.2.2-py2.7.egg' (and everything under it)
creating d:\pyth27\lib\site-packages\vcs-0.2.2-py2.7.egg
Extracting vcs-0.2.2-py2.7.egg to d:\pyth27\lib\site-packages
vcs 0.2.2 is already the active version in easy-install.pth
Installing vcs-script.py script to d:\pyth27\Scripts
Installing vcs.exe script to d:\pyth27\Scripts
Installing vcs.exe.manifest script to d:\pyth27\Scripts

Installed d:\pyth27\lib\site-packages\vcs-0.2.2-py2.7.egg
Processing dependencies for vcs==0.2.2
Searching for mock==1.0.1
Best match: mock 1.0.1
Processing mock-1.0.1-py2.7.egg
mock 1.0.1 is already the active version in easy-install.pth

Using d:\pyth27\lib\site-packages\mock-1.0.1-py2.7.egg
Searching for pygments==1.5
Best match: pygments 1.5
Processing pygments-1.5-py2.7.egg
pygments 1.5 is already the active version in easy-install.pth
Installing pygmentize-script.py script to d:\pyth27\Scripts
Installing pygmentize.exe script to d:\pyth27\Scripts
Installing pygmentize.exe.manifest script to d:\pyth27\Scripts

Using d:\pyth27\lib\site-packages\pygments-1.5-py2.7.egg
Finished processing dependencies for vcs==0.2.2 
```

但是当我尝试导入它时，我得到：

```
d:\pyth27>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import vcs
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named vcs 
```

python的PS自动安装程序不起作用，因为我在使用ntlm-authorization的公司代理下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:35:00.690

好像出了点问题：

```
warning: install_lib: 'build\lib' does not exist -- no Python modules to install 
```

您*必须*`setup.py`从源分发目录*中*运行：

```
cd inst\vcs
d:\pyth27\inst\vcs>python setup.py install 
```

包含的`setup.py`脚本期望能够在当前工作目录中找到文件，并且从目录外部运行脚本会失败这些期望。

# php - PHPexcel CSV 主文件

> ID：13698041
> 
> 赞同：0
> 
> 时间：2012-12-04T07:32:19.847
> 
> 标签：php, phpexcel

我想拥有多个 csv 并将它们添加到主 csv 文件中。当我在数组中添加一个额外的 csv 文件时，它会引发异常错误。

`Uncaught exception 'Exception' with message 'Workbook already contains a worksheet named 'Worksheet'. Rename the external sheet first.' in`
请在我的代码下面找到

```
include'../Classes/PHPExcel.php';
include'../Classes/PHPExcel/IOFactory.php';

$filenames = array('Sheet1.csv','Sheet2.csv');

$bigExcel = new PHPExcel();
$bigExcel->removeSheetByIndex(0);

$reader = new PHPExcel_Reader_CSV();

foreach ($filenames as $filename) {
$excel = $reader->load($filename);
foreach ($excel->getAllSheets() as $sheet) {
    $bigExcel->addExternalSheet($sheet);
}
foreach ($excel->getNamedRanges() as $namedRange) {
    $bigExcel->addNamedRange($namedRange);
}
}
$writer = new PHPExcel_Writer_CSV($bigExcel);
$writer->save('2007-write.csv'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:45:13.647

问题在于以下代码：

```
foreach ($excel->getAllSheets() as $sheet) {
    $bigExcel->addExternalSheet($sheet);
} 
```

对于文件 1，您添加一个名为工作表的工作表，然后对于文件 2，您尝试添加一个具有相同名称的工作表。

我建议您检查是否已经添加了工作表名称，如果是，您可以使用“setActiveSheetIndex”切换到现有工作表。

另一种选择是将名称更改为 worksheet(2) 如果您找到一个已经存在的名称。

但既然你称它为 CSV，我认为你不能使用工作表。所以最后它应该都放在一个工作表中，所以不需要继续添加新的工作表。只需创建一个并将所有数据添加到那个。

# node.js - 使用 node.js 观察文件变化

> ID：13698043
> 
> 赞同：44
> 
> 时间：2012-12-04T07:32:26.497
> 
> 标签：node.js

我有以下用例：

> A 创建一个聊天并邀请 B 和 C - 在服务器上 A 创建一个文件。A、B 和 C 将消息写入此文件。A、B 和 C 读取此文件。

我想在服务器上创建一个文件并观察这个文件，如果其他人在这个文件中写了一些东西，用 websockets 将新内容发送回来。

因此，我的 node.js 应用程序应观察此文件的任何更改。

**如何观察文件更改？在不锁定文件的情况下使用 node js 是否可行？**

如果无法使用文件，是否可以使用数据库对象（NoSQL）

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-04T07:36:34.873

好消息是您可以使用 Node 的 API 观察文件更改。

但是，这不会让您访问已写入文件的内容。您可以使用该`fs.appendFile();`功能，以便在将某些内容写入文件时向其他“记录”正在写入的新数据的其他内容发出事件。

`fs.watch():`直接从文档粘贴

```
fs.watch('somedir', function (event, filename) {
    console.log('event is: ' + event);
    if (filename) {
        console.log('filename provided: ' + filename);
    } else {
        console.log('filename not provided');
    }
}); 
```

[阅读这里关于 fs.watch(); 功能](http://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)

**编辑**：您可以使用该功能

```
fs.watchFile(); 
```

[阅读这里关于 fs.watchFile(); 功能](http://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener)

这将允许您查看文件的更改。IE。每当它被其他任何类型的进程访问时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-21T19:37:50.853

您也可以使用[node-watch](https://www.npmjs.com/package/node-watch)。这是一个简单的例子：

```
const watch = require('node-watch')

watch('README.md', function(event, filename) {
  console.log(filename, ' changed.')
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T08:56:18.293

我认为您不需要观察文件更改或为此使用 NoSQL 数据库（如果您不想这样做）。我的建议是查看[事件](http://nodejs.org/api/events.html)（[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)）。网上有足够多的关于这个主题的教程（谷歌）。例如 Felix 关于[使用 EventEmitters的文章](http://nodeguide.com/beginner.html#using-eventemitters)

这种发布/订阅语义也可以通过 NoSQL 实现。例如，在[Redis](http://redis.io)中，我认为您应该看看[pubsub](http://redis.io/topics/pubsub)。

在 MongoDB 中，我认为[可尾游标](http://www.mongodb.org/display/DOCS/Tailable+Cursors)是您正在寻找的。在他们的博客上，他们有一篇解释[pub/sub](http://blog.mongodb.org/post/29495793738/pub-sub-with-mongodb)的帖子。

# visual-studio-2010 - Visual Studio 2012 的最佳机器配置

> ID：13698044
> 
> 赞同：0
> 
> 时间：2012-12-04T07:32:28.740
> 
> 标签：visual-studio-2010, visual-studio-2012, development-environment

以下用途的最佳机器配置（CPU 功率、内存和驱动技术）是什么：

Visual Studio 2010 和 Visual Studio 2012 - 同时有多个实例 Oracle navigator 和 MSSQL Management Studio + 一些其他程序（如 GIMP、PDF 转换器、MS Office ..）

主要目标是在 Visual Studio 中快速构建和编译。

我必须证明每个组件的合理性，因为它是为工作中的开发机器配置的。

Stackoverflow 上有一些类似的主题： [SSD 想法](https://stackoverflow.com/questions/867741/ssd-drives-and-visual-studio-ide-big-improvements-real-usage-stories-no-theo)

我还没有尝试过SSD建议...

-操作系统 Windows 8、64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:50:23.763

当同时运行时钟周期密集型操作时，多核架构（带或不带超线程）将为您带来性能提升，因为每个内核都有专用的执行单元和流水线，因此更多的内核等于更少的应用程序必须分时的机会，例如在编译时。

具有大量 RAM 的系统在例如 Visual Studio 的不同实例之间切换时将具有优势，因为它们的状态不需要写入（比 RAM 慢）磁盘，无论是否是 SSD。在使用 Gimp、Photoshop 或类似软件时，它还将减少磁盘 I/O。

缓存的数量也可以对您的日常工作产生积极影响，因为更多（比 RAM 更快）的缓存将减少您的系统离开 CPU 的限制并加倍努力读取/写入 RAM 的需要。

最后，SSD 相对于“传统”磁盘的优势主要体现在磁盘和文件访问时间上。启动操作系统会更顺畅，从上述 SSD 启动程序也会更顺畅。但 SSD 尺寸在合理的价格范围内仍然相当有限。这值得么？伊莫，没有。加载工具后，在开发人员的日子里几乎不需要 SSD 驱动器。

# web-services - 用于 MultiChoice 字段值插入的 Sharepoint 批处理

> ID：13698050
> 
> 赞同：1
> 
> 时间：2012-12-04T07:32:49.210
> 
> 标签：web-services, list, sharepoint, batch-file

所以我对共享点列表网络服务的使用有疑问。

我需要为 Sharepoint 批处理脚本获取正确的语法以插入新项目。除了多选字段类型外，一切都很好。

我插入数据，但不管我怎么做，它会显示在 SP 列表项详细信息上 OK，但是当尝试在 SP 中编辑项目时，我看到，SP 已将我发送到该字段的值作为文本字符串，并且不检查我保存为选中的项目。

现在的脚本如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<Batch OnError="Return">
<Method ID='1' Cmd='New'>
<Field Name='SecurityCheckpoints'>1st checkpoint;2nd checkpoint</Field>
</Method>
</Batch> 
```

该字段的定义如下：

```
 <Field Type="MultiChoice" 
         DisplayName="Checkpoints allowed" 
         Required="TRUE" 
         FillInChoice="FALSE" 
         ID="{guid-guid-guid-guid-guid}" 
         SourceID="{guid-guid-guid-guid-guid}" 
         StaticName="SecurityCheckpoints" 
         Name="SecurityCheckpoints" 
         ColName="ntext2" 
         RowOrdinal="0" 
         Version="4">
          <CHOICES>
            <CHOICE>1st checkpoint</CHOICE>
            <CHOICE>2nd checkpoint</CHOICE>
            <CHOICE>3rd checkpoint</CHOICE>
          </CHOICES>
          <Default>1st checkpoint</Default>
        </Field> 
```

我必须在不同用途的silverlight应用程序中为sharepoint实现自定义UI之类的东西，所以我使用自己的网络服务作为SP和SL之间的代理，我检索SP列表定义并动态构建UI控件，因此用户可以填写表格。

**我如何形成脚本，因此在 SP 中选择（勾选）项目而不是 SP 将它们保存为字符串值？**

**如果我只使用一个项目（“第一个检查点”）的脚本，SP 可以处理它，它有很多，数据保存为文本字符串？**

**我做错了什么？我如何正确分隔多个值？**

我搜索了高低，但没有找到包含多选示例的 SP 更新脚本示例。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:54:04.277

我找到了解决方案 - 这太容易了：

不是使用分号“;”分隔选择值，而是**必须使用“;#”分隔选择值，并将其放在整个列表的前面和后面。**

所以不要使用这个： **第一个检查点；第二个检查点**

```
<?xml version="1.0" encoding="UTF-8"?>
<Batch OnError="Return">
<Method ID='1' Cmd='New'>
<Field Name='SecurityCheckpoints'>1st checkpoint;2nd checkpoint</Field>
</Method>
</Batch> 
```

必须这样做： **;#1st checkpoint;#2nd checkpoint;#**

```
<?xml version="1.0" encoding="UTF-8"?>
<Batch OnError="Return">
<Method ID='1' Cmd='New'>
<Field Name='SecurityCheckpoints'>;#1st checkpoint;#2nd checkpoint;#</Field>
</Method>
</Batch> 
```

PS：我不知道这样做是否正确，但我回答了我自己的问题。只是为了让别人知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:03:44.173

我成功运行下面的代码。

```
<?xml version="1.0" encoding="UTF-8"?><ows:Batch OnError="Return">
<Method ID="0"><SetList>3933c528-5747-4fc7-bdec-6465294997dd</SetList>
<SetVar Name="Cmd">Save</SetVar>
<SetVar Name="ID">New</SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#Temp_UNID">8D8DE35CFFE9EEEAC12570920052A8FD</SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#Title"> - Birch Data Exchange Specification</SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#C0370A_Agora_DocNum">8AL020210178ZZASB</SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#C0370A_Agora_Phase"></SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#C0370A_Agora_Author">Jerome BOURGER</SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#C0370A_Agora_ServicesOri">  </SetVar>    
<SetVar Name="urn:schemas-microsoft-com:office:office#C0370A_Agora_Type">;#3 - Quality Plan;#Objectives;#Progress Plan;#Follow-up;#Reports;#</SetVar>
<SetVar Name="urn:schemas-microsoft-com:office:office#C0370A_Agora_Keywords"></SetVar>     </Method></ows:Batch> 
```

# reporting-services - 查找 SSRS 中的所有文本框？

> ID：13698051
> 
> 赞同：0
> 
> 时间：2012-12-04T07:32:48.710
> 
> 标签：reporting-services, ssrs-2008-r2

我正在尝试在**SQLSERVER 2008R2 中对我的报告实施展开或折叠工具。**

为此，我采用了一个名为`TextBox16`.

但是当我去 Tablix 属性，然后可见性，然后隐藏和显示可以通过这个报告项目切换。在这里，我无法看到它显示给我的所有文本框，只有奇数文本框。那么如何从 Tablix 属性中找到所有文本框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:03:01.360

如何查看所有文本框：

单击报告正文。按 F4。在属性标题下是一个下拉列表，其中包含报表中的每个对象。您的所有文本框都应在此处列出。

# struts2 - 无法使用 Struts 2 jquery 图表插件 3.4.0 在 json 图中绘制日期值

> ID：13698053
> 
> 赞同：0
> 
> 时间：2012-12-04T07:33:04.200
> 
> 标签：struts2, charts, struts2-jquery, struts2-json-plugin

我正在使用 Struts2 jquery 图表插件 3.4.0。当我使用 json 从 Action 类中获取日期值时，我得到了空白图表。如果我使用简单的操作，那么相同的代码可以正常工作。这是我的jsp代码。

```
 <s:url id="chartDataUrl" action="jsonChartData"/>
    <sjc:chart
        id="chartDate"
        xaxisMode="time"
        xaxisTimeformat="%m.%Y"
        xaxisMin="%{minTime}"
        xaxisMax="%{maxTime}"
        xaxisColor="#666"
        xaxisTickSize="[3, 'month']"
        xaxisTickColor="#aaa"
        xaxisPosition="top"
        yaxisPosition="right"
        yaxisTickSize="10"
        cssStyle="width: 600px; height: 400px;"
        >
        <sjc:chartData
            id="chartAjaxData1"
            label="Map -Double, Double-"
            href="%{chartDataUrl}"  // when i remove json call then it works fine
            list="dateFromMap"
            reloadTopics="reloadMap"
            lines="{show : true}"
            />
    </sjc:chart> 
```

struts.xml 代码

```
 <action name="jsonChartData"  
           class="com.ebhasin.fitnessbliss.actions.GraphsAction">
        <result   type="json" name="success"></result>
    </action> 
```

动作类代码：

```
public class GraphsAction extends ActionSupport {

    private String currentDate;
    private Map<Date, Float> dateFromMap;
    HomeService homeService = new HomeService();
    SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");

    @Override
    public String execute() {
        System.out.println("execute");
        float weight;
        Date date = new Date();
        Map session = ActionContext.getContext().getSession();
        Integer loginId = (Integer) session.get("loginId");
        if (loginId != null) {
            dateFromMap = new TreeMap<Date, Float>();
            List list = homeService.getWeightGraphData(loginId);
            if (list.size() > 0) {
                Iterator itr = list.iterator();
                while (itr.hasNext()) {
                    UserStats userStats = (UserStats) itr.next();
                    weight = userStats.getWeight();
                    date = userStats.getCreatedDate();
                    //currentDate = formatter.format(date);
                    dateFromMap.put(date, weight);
                }
            } else {
                // dateFromMap.put("my",2F );
            }
        } else {
        }
        return SUCCESS;
    }

    public String getCurrentDate() {
        return currentDate;
    }

    public void setCurrentDate(String currentDate) {
        this.currentDate = currentDate;
    }

    public Map<Date, Float> getDateFromMap() {
        return dateFromMap;
    }

    public void setDateFromMap(Map<Date, Float> dateFromMap) {
        this.dateFromMap = dateFromMap;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:06:45.970

编辑：请放一个 System.out.println("something"); 在每个 if / else 块上查看您经过的确切位置；

注意，[获取会话对象的首选方法](http://struts.apache.org/2.0.6/docs/how-do-we-get-access-to-the-session.html)是实现 SessionAware，而不是使用 ActionContext；

* * *

你的 JSON 动作看起来像这样吗？：

[http://struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)

（转到`More Widgets -> Charts -> JSON Action`右下角选项卡中的 ，。

```
@ParentPackage(value = "showcase")
public class JsonChartData extends ActionSupport {

  private static final long   serialVersionUID = 6659512910595305843L;
  private List<ListValue>     objList;
  private Map<Double, Double> doubleMap;

  @Actions( {
    @Action(value = "/json-chart-data", results = {
      @Result(name = "success", type = "json")
    })
  })
  public String execute()
  {

    objList = new ArrayList<ListValue>();
    doubleMap = new TreeMap<Double, Double>();

    Random generator = new Random();
    for (int i = 1; i <= 24; i++)
    {
      doubleMap.put(Double.valueOf("" + i), generator.nextDouble() * 10.0);
    }

    for (int i = 1; i <= 24; i++)
    {
      objList.add(new ListValue("" + i, "" + generator.nextInt(30)));
    }

    return SUCCESS;
  }

  public String getJSON()
  {
    return execute();
  }

  public List<ListValue> getObjList()
  {
    return objList;
  }

  public void setObjList(List<ListValue> objList)
  {
    this.objList = objList;
  }

  public Map<Double, Double> getDoubleMap()
  {
    return doubleMap;
  }

  public void setDoubleMap(Map<Double, Double> doubleMap)
  {
    this.doubleMap = doubleMap;
  }
} 
```

# c - C - 多维数组的转换

> ID：13698060
> 
> 赞同：3
> 
> 时间：2012-12-04T07:33:43.537
> 
> 标签：c

> **可能重复：**
> [C：创建指向二维数组的指针](https://stackoverflow.com/questions/1052818/c-create-a-pointer-to-two-dimensional-array)

定义数组时，如

```
int k[100]; 
```

它可以转换为 int*：

```
int* pk = k; 
```

它有一个指针变量可以转换为多维数组吗？

```
int m[10][10];
??? pm = m; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T07:35:31.260

```
int m[10][20];
int (*pm)[20] = m; // [10] disappears, but [20] remains

int t[10][20][30];
int (*pt)[20][30] = m; // [10] disappears, but [20][30] remain 
```

不过，这不是“演员”。Cast 是一种显式类型转换。在上述示例中，转换是隐式的。

并不是说指针类型仍然依赖于除第一个之外的所有数组维度。不可能有一个完全“无量纲”的指针类型可以在这种情况下工作，即`int **`指针不能与内置的二维数组一起工作。`int ***`带有内置 3D 数组的指针也不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:39:53.753

是的，当然，您可以拥有指向多维数组的指针。

```
int m[10][10];
int (*pm)[10] = m; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T07:42:30.943

这个怎么样：

```
 int k[100];
int* pk = k;
int m[10][10];
int **ptr = (int **) malloc(10 * sizeof(int*));
for(int i=0;i<10;i++)
{
    ptr[i] = m[i];
} 
```

# iphone - 问题从 url 播放声音

> ID：13698071
> 
> 赞同：2
> 
> 时间：2012-12-04T07:34:35.170
> 
> 标签：iphone, ios, mpmovieplayercontroller

我正在制作一个需要循环播放声音的 Iphone 应用程序。声音将来自 HTTP 链接，如下所示：

*   [链接 1](http://app.4uto.com/nsounds/scream/1.mp3)
*   [链接 2](http://app.4uto.com/nsounds/scream/2.mp3)
*   [链接 3](http://app.4uto.com/nsounds/scream/3.mp3)
*   [链接 4](http://app.4uto.com/nsounds/scream/4.mp3)
*   [链接 5](http://app.4uto.com/nsounds/scream/5.mp3)
*   [链接 6](http://app.4uto.com/nsounds/scream/6.mp3)
*   [链接 7](http://app.4uto.com/nsounds/scream/7.mp3)
*   [链接 8](http://app.4uto.com/nsounds/scream/8.mp3)

实际上有三个按钮循环，播放所有和停止。一旦单击全部并循环播放，我就可以播放，但是当我单击其他按钮时，应用程序会崩溃。我该如何解决这个问题。我的代码在 resultArrayFinal 下面是一个全局数组，上面的所有声音链接都存储在其中。

```
-(void)replayVedio
{
DataClass *obj=[DataClass getInstance];

NSURL *url = [NSURL URLWithString:obj.soundInfo];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[moviePlayer setControlStyle:MPMovieControlStyleDefault];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];

[moviePlayer prepareToPlay];
[moviePlayer play]; 

}

- (void) moviePlayBackDidFinish:(NSNotification*)notification 

{

 MPMoviePlayerController *player = [notification object];

 [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:player];

if(_globle==1)
{

    [self replayAudio];

}
else if(_globle==2)
{

    DataClass *obj=[DataClass getInstance];
    obj.soundInfo=[resultArrayFinal objectAtIndex:count++];

    if (count==[resultArrayFinal count])
        count=0;

    [self replayAudio];

} 
```

}

谢谢。

# java - 仅安装了最后一个 Android 应用

> ID：13698074
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:34:45.373
> 
> 标签：java, android

我在 Eclipse 中有 2 个 android 应用程序，我创建了 apk，然后将它们复制到设备并安装它们。问题是只安装了最后一个。

我安装应用程序 A。好的

我安装了应用程序 B。B 没问题，但 A 不见了。

我究竟做错了什么？我应该在 Manifest xml 中更改什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:48:29.293

您需要确保`Package Names`两个应用程序在各自的`Manifest.XML`文件中都有不同的内容。

例如：

**应用一：**

更改包名称：`package="com.something.A"`

**应用 B：**

更改包名称：`package="com.something.B"`

这些只是插图。不过，请选择您自己的命名约定。

您还必须对两个应用程序中的**src**`packages`文件夹下的文件夹进行更改。如果它们具有相同的应用程序，您将无法将它们发布到 Google Play**`Package Names`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:47:02.577

Android 从

```
 package="your.package.name" 
```

如果您希望**A**和**B**成为两个独立的应用程序，那么您需要为两个应用程序提供不同的包名称。

提示：当您更改包名称时，不要忘记更新所有引用。**

# python - 表单返回奇怪的字符

> ID：13698078
> 
> 赞同：1
> 
> 时间：2012-12-04T07:34:49.287
> 
> 标签：python, django, google-app-engine

我的模板是

```
<form method="GET" action="....">
                    <input type="submit" name="golfsite" value="1net" />
                    <input type="submit" name="golfsite" value="Golfagora" />
                    <input type="submit" name="golfsite" value="Juchi" />
</form> 
```

views.py 是

```
def affiliate(request, golfsite=None):

    golfsite = golfsite or request.args.get('golfsite')

    ...... 
```

在调试模式控制台上，如果我键入“golfsite”来检查什么是 golfsite，它会返回`u'1net'`or`u'Golfagora'`或`u'juchi'`。怎么了？什么是`u`，为什么不返回`1net`or `golfagora`or `juchi`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:36:23.720

您正在获取 Unicode 字符串，这是正常的。这不是问题。Django 已根据使用的编码将传入的表单数据解码为 Python unicode 字符串。这是正常行为。

请务必阅读[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)中的 Python 和 Unicode，以避免将来产生混淆。

# sql-server-ce - 如何确定 SQL Server CE 数据库中使用的空间？

> ID：13698084
> 
> 赞同：0
> 
> 时间：2012-12-04T07:35:11.417
> 
> 标签：sql-server-ce

有谁知道如何使用 C# 确定 SQL Server CE 数据库中使用的空间量？我正在 Windows 服务中编写一个例程，该例程将监视我们的 SQL Server CE 数据库并在数据接近其最大限制时尝试清除数据。现在，我可以直接查看磁盘上的文件作为发现数据库大小的一种方式，但这似乎有点像 hack。

我确实遇到过这篇文章，这表明最好的（唯一？）方法是估计表大小： http: [//support.microsoft.com/kb/827968](http://support.microsoft.com/kb/827968) 对吗？

有没有人有想法或建议？仅查看磁盘上文件的大小真的是一种黑客行为吗？该文件大小是否与 4GB 数据限制直接相关？

任何输入表示赞赏！

# javascript - 仅适用于第一张图像的翻转效果。选择其他缩略图后取消

> ID：13698088
> 
> 赞同：1
> 
> 时间：2012-12-04T07:35:34.033
> 
> 标签：javascript, html, rollover

我有一个运行缩略图查看器的 Javascript：

```
var lastID = 0;
function SelectImg(id) {
    if (lastID > 0) {
        document.getElementById(lastID).className = "thumbNormal";
    }
    document.getElementById(id).className = "thumbSelected";
    document.getElementById(0).src = document.getElementById(id).src;
    lastID = id;
}
function LoadTrigger() {
    SelectImg(1);
}
window.onload = LoadTrigger; 
```

三张图片的 HTML 是这样的

```
<tbody>
    <tr>
        <td class="image">
            <img id=0 src="<?=$row['picture_noglow']?>"
            onmouseover="this.src='imgs/collection/KN/main/KNB01_Ga.jpg'"
            onmouseout="this.src='imgs/collection/KN/main/KNB01_Na.jpg'">
        </td>
        <td class="imagestack">
            <img id=1 class="thumbNormal" src="<?=$row['picture_noglow']?>" width=70 onclick="SelectImg(1)" /><p>
            <img id=2 class="thumbNormal" src="imgs/collection/defaultcase_backview_black.jpg" width=70 onclick="SelectImg(2)"><p>
            <img id=3 class="thumbNormal" src="imgs/collection/defaultcase_sideview_black.jpg" width=70 onclick="SelectImg(3)">
        </td>
    </tr>
</tbody> 
```

I want to apply a rollover to `id=1`only, so that when the first image is selected it will have a rollover effect. 如果我选择了图像 2 或 3，则翻转停止。

现在，当我选择图像 2 或 3 时，仍然会发生翻转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:47:48.310

您只需要测试是否`id=1`选择了图像：

```
function mouseOverFirstImage() {
   var img1 = document.getElementById("1");

   // Test if the image is selected (if more than 1 class can
   // be applied change this test to "img1.className.match(/thumbSelected/)"
   if(img1.className === "thumbSelected")
       document.getElementById("0").src = <newImageSrc>;
}

function mouseOutFirstImage() {
   var img1 = document.getElementById("1");

   if(img1.className === "thumbSelected")
       document.getElementById("0").src = <normalImageSrc>;
}

function LoadTrigger() {
    // Add the 3 following lines to this function
    // in order to have a rollover effect
    var mainImage = document.getElementById("0");
    mainImage.onmouseover = mouseOverFirstImage;
    mainImage.onmouseout = mouseOutFirstImage;

    SelectImg(1);
} 
```

# windows-phone-8 - 引用 ZXing.Net 库

> ID：13698094
> 
> 赞同：8
> 
> 时间：2012-12-04T07:35:50.667
> 
> 标签：windows-phone-8

我需要参考 ZXing 库来扫描我的 Windows Phone 8 应用程序中的二维码。我从以下来源下载了 ZXing.Net [0.10.0.0：http://zxingnet.codeplex.com/](http://zxingnet.codeplex.com/)

但是，每当我尝试添加对 zxing.wp8.0.dll 的引用时，都会收到如下错误：

> 无法将对更高版本或不兼容程序集的引用添加到项目中。

我可以请知道为什么我会收到此错误。有什么我做错或遗漏的事情吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-04T08:27:37.883

在文件资源管理器中右键单击 DLL --> 单击属性 --> 选择取消阻止。然后尝试再次添加引用。

VS2012 在 DLL 由于是从 Web 下载的事实而被阻止时具有绝对最糟糕的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:13:03.500

转到 [http://nuget.org/packages/ZXing.Net](http://nuget.org/packages/ZXing.Net)

按照说明安装您需要的正确版本。

# wordpress - postmeta 在 wordpress 中缓存并在查看编辑页面后更新

> ID：13698095
> 
> 赞同：0
> 
> 时间：2012-12-04T07:35:51.273
> 
> 标签：wordpress, caching

我有个问题。我需要在 postmeta 表中查找/替换 bach，所以我使用 phpmyadmin 来执行此操作。数据库接受更改，但在 wp 中不接受（似乎它已缓存）没有安装缓存插件。当我在 wp-admin 中编辑帖子时，缓存会刷新 postmeta 内容，我可以看到 vewing 帖子中的更改。我怎么能手动刷新这个缓存？如果在服务器上安装了缓存系统，它是否也会影响 phpmyadmin 结果？在那里可以看到 couse 的变化。

注意：这个 cms 在本地运行良好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:54:38.853

postmeta 缓存是 WordPress 核心的一部分。即使您没有缓存插件，它也可以工作。

在媒体库中打开一些项目（任何项目都可以）进行编辑，然后保存它，将刷新该缓存。

# c# - 在 JSON 中序列化 ASP.NET MVC 模型

> ID：13698101
> 
> 赞同：1
> 
> 时间：2012-12-04T07:36:07.420
> 
> 标签：c#, asp.net-mvc, json, json.net

我有一个这样的模型

```
public class Category : BaseFieldsTables
{
        public ICollection<Category> Categories { get; set; }
        public Category Parent { get; set; }
        public int? ParentId { get; set; }
} 
```

我想将模型序列化为 json，这是我的控制器

```
 var categories =
            _efCategory.List().ToList().
                ToList().
                Select(x => new {id = x.Id, title = x.Name, children = x.Parent});

        string output = JsonConvert.SerializeObject(categories, Formatting.Indented,
                                                    new JsonSerializerSettings
                                                        {
                                                            PreserveReferencesHandling = PreserveReferencesHandling.Objects
                                                        });

        return Json(output.Replace, JsonRequestBehavior.AllowGet); 
```

但我得到了这个结果

```
 "[\r\n  {\r\n    \"$id\": \"1\",\r\n    \"id\": 1,\r\n    \"title\": \"News\",\r\n    \"children\": null\r\n  },\r\n  {\r\n    \"$id\": \"2\",\r\n    \"id\": 2,\r\n    \"title\": \"2012\",\r\n    \"children\":
 {\r\n      \"$id\": \"3\",\r\n      \"Categories\": [\r\n        {\r\n          \"$id\": 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:38:17.697

这个是正常的。您所看到的只是字符串的转义版本（可能直接在 Visual Studio 中）。`\r\n`相当于换行符，`\"`只是逃避`"`. 输出，这应该正常显示。

# string - 在unityscript中，获取数组中一组字符串中的不同单词

> ID：13698105
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:36:15.487
> 
> 标签：string, loops, unity3d, distinct, unityscript

所以我有一个看起来像这样的数组：

```
var questans = new String[10, 2];
questans[0,0]="Hey How's it going?";  
questans[0,1]="You know me Just chillin'";
questans[1,0]="Hello there friend";
questans[1,1]="Well met to you too!";
questans[2,0]="I like chocolate pudding";
questans[2,1]="Good for you"; 
```

我需要从中提取所有单词。我尝试编写一个 for 循环，但它一直给我一些奇怪的错误。

我目前已经编写代码来查找不同单词的总数：

```
var ff: String[questans.Length]; //Returned string array
var linenumber = 0; //Current line, 0-index
var spacecount = 0; //Current space in current line, 0-index
for (var line in questans) {
    for (var spaceSplit in line.Split(" ")) {
        ff[linenumber, spacecount] =  spaceSplit[spacecount];
        spacecount++;
    }
    spacecount = 0;
    linenumber++;
} 
```

但是我在从上面给出的数组中获取所有单词时遇到问题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:47:57.403

除了@eclanrs 指出的以外，还有以下问题：

*   JS 不支持`[x,y]`多维数组访问的语法。您必须使用嵌套数组。`arr[x,y]`就等于`arr[y]`
*   `for (var line in questans) {`不是迭代数组的正确方法，因为您还将获得从原型继承的所有属性
*   JS 区分大小写，并且大多数属性都是驼峰式大小写的。`questans.Length`需要`questans.length`，并且`line.Split`需要`line.split`

我建议你阅读一些 JS 教程来开始，否则你会发现自己迷路了。

# kendo-ui - 如何将剪贴板中的图像粘贴到 Kendo UI Editor？

> ID：13698109
> 
> 赞同：5
> 
> 时间：2012-12-04T07:36:29.637
> 
> 标签：kendo-ui

我正在使用 Kendo UI 编辑器小部件。我想粘贴打印屏幕的内容。我怎样才能做到这一点？

问候，

奈都

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:09:36.017

[这](https://stackoverflow.com/questions/490908/paste-an-image-from-clipboard-using-java-script)是一个相关的问题。似乎适用于最新的 Chrome 和 Firefox。并且可以通过一些代码插入剑道编辑器：

```
var editor = $("#editor").data("kendoEditor");

$(editor.document).on("paste", function(e) {
  var clipboard = e.originalEvent.clipboardData;

  if (clipboard && clipboard.items) {
      var screenshot = clipboard.items[0];

      if (screenshot.kind == "file") {
          var blob = screenshot.getAsFile();

          var reader = new FileReader();

          reader.onload = function(event){
            var html = kendo.format('<img src="{0}"/>', event.target.result);

            editor.paste(html);
          };

          reader.readAsDataURL(blob);
      }
  }
}); 
```

这是一个现场演示：http: [//jsbin.com/utapal/1/edit](http://jsbin.com/utapal/1/edit)

# php - mkdir()，从表单获取路径

> ID：13698115
> 
> 赞同：0
> 
> 时间：2012-12-04T07:36:41.883
> 
> 标签：php, forms, input, directory, mkdir

我有一个表格，我将数据提交给`$_POST['foldername']`

`createdir.php`以下

```
<form action="mkdir.php">
    <input type="textarea" name="foldername" id="foldername">
    <input type="submit" value="Create directory">
</form> 
```

然后我`mkdir()`应该有一个路径，包括从输入字段中获得的名称，但问题是，它没有从输入中获取数据。我也尝试打印它，但我得到的`/images/`只是我应该（至少我希望）得到`/images/nameFromInput`.

`mkdir.php`以下

```
<?php
$foldername = $_POST['foldername'];

$path = 'images/' . $foldername;
mkdir($path);
header('Location:createdir.php')
?> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:38:20.227

```
<form action="mkdir.php" method="POST"> 
```

你忘记了方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:40:34.893

即使最后一行不是必需的，您也忘记了最后的分号。这可能会让你发疯......所以我建议你总是附加它！

```
header('Location: createdir.php'); 
```

此外，`type="textarea"`不存在，使用：`type="text"`或`<textarea>`.

# .net - 找不到 Logger 的参考

> ID：13698116
> 
> 赞同：0
> 
> 时间：2012-12-04T07:36:43.850
> 
> 标签：.net, enterprise-library

我已将项目的框架从 3.0 更改为 4.0，但我收到 Microsoft.Practices.EnterpriseLibrary.Logging 的参考错误。我找不到任何其他参考资料。我在我的程序中使用了其中的一些代码：

```
Logger.Write("FaxPro service loop is started.", "FaxProCritical", 0, 0, TraceEventType.Start); 
```

错误：命名空间“Microsoft”中不存在类型或命名空间名称“Practices”（您是否缺少程序集引用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:17:39.607

您确实需要付出更多努力来提出您的问题和相关代码，使用指令、引用和 dll 版本。说真的，人们没有水晶球。

我假设您的意思是企业库框架。当您努力解决问题时，人们更有可能提供帮助。

注意：Enterprise Library LogWriter 的较新版本是 Abstract。你调用 LogWriterImpl。检查您在程序集中的引用。融合日志查看器说什么。（如果不确定，请搜索如何激活）

# c# - 到 Project Server (SharePoint Server) 的 BasicHttpBinding 导致 401 错误

> ID：13698119
> 
> 赞同：1
> 
> 时间：2012-12-04T07:36:56.580
> 
> 标签：c#, basichttpbinding

我正在尝试为 Project Server 创建一个 BasicHttpBinding。但我不断收到 401 错误。

基础设施：

服务器 A（IP：192.168.123.10）是 IIS 7.5，服务器 B（IP：192.168.123.20）是 SharePoint（Project Server 2010）。两者都在域中找到。以下测试 Web 应用程序 (MVC) 已在服务器 A 上发布。

```
HomeController.cs:

using System;
using System.Security.Principal;
using System.ServiceModel;
using System.Net;
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
    public class HomeController : Controller
    {

        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            const int MAXSIZE = 500000000;
            BasicHttpBinding binding = null;
            ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
            String pwaUrl = "http://192.168.123.20:24010";
            const string svcRouter = "/_vti_bin/PSI/ProjectServer.svc";

           // Create a binding for HTTP.
           binding = new BasicHttpBinding(BasicHttpSecurityMode.TransportCredentialOnly);

            binding.Name = "basicHttpConf";
            binding.SendTimeout = TimeSpan.MaxValue;
            binding.MaxReceivedMessageSize = MAXSIZE;
            binding.ReaderQuotas.MaxNameTableCharCount = MAXSIZE;
            binding.MessageEncoding = WSMessageEncoding.Text;
            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;
            binding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.None;

            // The endpoint address is the ProjectServer.svc router for all public PSI calls.
            EndpointAddress address = new EndpointAddress(pwaUrl + svcRouter);

             SvcResource.ResourceClient _resourceClient;

             NetworkCredential credentials = CredentialCache.DefaultNetworkCredentials;

            _resourceClient = new SvcResource.ResourceClient(binding, address);

            _resourceClient.ClientCredentials.Windows.ClientCredential = credentials;
            _resourceClient.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Impersonation;

           ViewBag.ThreadUser = System.Threading.Thread.CurrentPrincipal.Identity.Name;

            ViewBag.TESTUSER = _resourceClient.GetCurrentUserUid();

            return View();
        }

        public ActionResult About()
        {
            return View();
        }
    }
} 
```

网页配置

```
<authentication mode="Windows" />
<identity impersonate="true"/>

<authorization>
<deny users="?" />
</authorization> 
```

现在在函数中`ViewBag.TESTUSER = _resourceClient.GetCurrentUserUid();`我得到一个我无法解释的 401 错误。

错误信息：

```
[WebException: Der Remoteserver hat einen Fehler zurückgegeben: (401) Nicht autorisiert.]
   System.Net.HttpWebRequest.GetResponse() +7866004
   System.ServiceModel.Channels.HttpChannelRequest.WaitForReply(TimeSpan timeout) +99

[MessageSecurityException: Die HTTP-Anforderung ist beim Clientauthentifizierungsschema "Ntlm" nicht autorisiert. Vom Server wurde der Authentifizierungsheader "NTLM" empfangen.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +4729427
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +1725
   SvcResource.Resource.GetCurrentUserUid() +0
   SvcResource.ResourceClient.GetCurrentUserUid() +52 
```

你知道为什么会这样吗？我是否必须更改 Project Server 2010 上的设置，或者可能更改 Active Directory 设置？

# macos - 在 Mac OS X 上部署应用程序不起作用

> ID：13698120
> 
> 赞同：1
> 
> 时间：2012-12-04T07:37:00.103
> 
> 标签：macos, qt, qt4, build-process, qmake

我可以构建一个项目并让它在我的计算机上运行良好，但是当我在不同的计算机上运行它时它将无法工作。如何使用 Qt 构建它以便包含所有文件库？

我正在关注这个[http://doc.qt.digia.com/4.7/deployment-mac.html](http://doc.qt.digia.com/4.7/deployment-mac.html) 但它似乎不起作用。当我运行 qmake 时，它​​只会为它们打印出指令，例如

```
模式：
  -project 将 qmake 置于项目文件生成模式
                 在这种模式下，qmake 将文件解释为文件
                 被建造，
                 默认为 *.c；*.ui; *.y; *.l; *.ts; *.xlf；*.qrc; *。H; *.hpp; *.hh; *.hxx; *。H; *.cpp; *.cc; *.cxx; *。C
                 注意：创建的 .pro 文件可能会
                 需要编辑。例如将 QT 变量添加到
                 指定需要哪些模块。
  -makefile 将 qmake 置于 makefile 生成模式（默认）
                 在这种模式下，qmake 将文件解释为项目文件以
                 被处理，如果跳过 qmake 会尝试找一个项目
                 当前工作目录中的文件

```

我在应用程序的发布目录中运行它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:37:49.917

Mac OS X 上的 qmake 默认生成（已弃用）XCode 项目文件。如果要生成 makefile，需要使用参数运行 qmake：

```
qmake -spec macx-g++ 
```

然后你可以调用make。但是如果你想部署你的应用程序，你需要`macdeployqt`在 QTDIR/bin/ 目录下运行

# xpages - 如何计算xpages中的天数

> ID：13698122
> 
> 赞同：0
> 
> 时间：2012-12-04T07:37:05.767
> 
> 标签：xpages

我是 XPages 应用程序的天真开发人员之一。我开始使用 XPages，因为我发现它们真的很有趣，可以构建我们想要的任何东西。

这是我几天以来一直在努力解决的问题之一，但无法克服它。

在我的休假申请中，我有两个日期字段，leaveFrom 和 leaveTill 和一个计算编辑框，我将在其中显示编号。天数 (noDays) 动态，即上述两个休假日期字段的差异。而我无法做这么简单的事情。

我正在使用 Lotus 8.5.3 来创建这个应用程序。我看到了一些方法，比如`getcomponent("").setvalue()`or `getvalue()`。但这两种方法在 8.5.3 中不可用。当我使用这些方法时，我总是会出错。我也尝试在 CSJS 上使用 getComponent .. 但没有成功。

我还尝试使用其他脚本方法，我可以创建后端文档，但值未显示在我当前的 xpage 上。

请告诉我正确的路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T07:48:33.117

您可以使用以下 XSnippet 来比较日期（从而也计算两个日期之间的天数）：[http](http://openntf.org/XSnippets.nsf/snippet.xsp?id=compare-dates) ://openntf.org/XSnippets.nsf/snippet.xsp?id=compare-dates 。我希望您可以将其用作您特定情况的输入。

关于 getComponent("").getValue() 和 .setValue()。它们当然也可以在 8.5.3 中使用。请记住，XPages 区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:36:44.537

该代码不起作用，因为 Java 日期的*timeDifference*方法不存在：

```
var difference = endDate.timeDifference(startDate); 
```

您必须先将其转换为*NotesDateTime*：

```
var difference = null; 
try{
    var nDateStart = session.createDateTime( startDate );
    var nDateEnd = session.createDateTime( endDate );

    difference = nDateEnd.timeDifference(nDateStart); 
    difference = (Math.floor(difference/86400)) + 1;
}catch(e){return e}

difference 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:49:44.590

> 感谢您的解释性视频，我从他们那里学到了很多东西。

9 中的注释？:)

回到你的问题。

如果两个字段都是 DATETIME 格式，那么您可以执行以下操作。

```
(endDate - startDate) / (24*60*60); 
```

# c# - C# - 从 KeyValuePair 列表中删除重复的键并添加值

> ID：13698127
> 
> 赞同：1
> 
> 时间：2012-12-04T07:37:30.183
> 
> 标签：c#, list, duplicate-removal, keyvaluepair

我有一个 C# 格式的 KeyValuePair 列表，格式`string,int`与示例内容一样：

```
mylist[0]=="str1",5
mylist[2]=="str1",8 
```

我想要一些代码来删除其中一个项目，并在另一个项目中添加重复值。
所以它会是：

```
mylist[0]=="str1",13 
```

定义代码：

```
List<KeyValuePair<string, int>> mylist = new List<KeyValuePair<string, int>>(); 
```

Thomas，我将尝试用伪代码来解释它。基本上，我想要

```
mylist[x]==samestring,someint
mylist[n]==samestring,otherint 
```

变得：

```
mylist[m]==samestring,someint+otherint 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T07:46:12.960

```
var newList = myList.GroupBy(x => x.Key)
            .Select(g => new KeyValuePair<string, int>(g.Key, g.Sum(x=>x.Value)))
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:44:29.620

```
var mylist = new KeyValuePair<string,int>[2];

mylist[0]=new KeyValuePair<string,int>("str1",5);
mylist[1]=new KeyValuePair<string,int>("str1",8);
var output = mylist.GroupBy(x=>x.Key).ToDictionary(x=>x.Key, x=>x.Select(y=>y.Value).Sum()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:48:49.870

我会使用不同的结构：

```
class Program
{
    static void Main(string[] args)
    {
        Dictionary<string, List<int>> dict = new Dictionary<string, List<int>>();
        dict.Add("test", new List<int>() { 8, 5 });
        var dict2 = dict.ToDictionary(y => y.Key, y => y.Value.Sum());
        foreach (var i in dict2)
        {
            Console.WriteLine("Key: {0}, Value: {1}", i.Key, i.Value);
        }
        Console.ReadLine();
    }
} 
```

第一个字典应该是你的原始结构。要向其中添加元素，首先检查键是否存在，如果存在，只需将元素添加到值列表中，如果不存在，则将新项目添加到字典中。第二个字典只是第一个字典对每个条目的值列表求和的投影。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:53:56.770

非 Linq 答案：

```
Dictionary<string, int> temp = new Dictionary<string, int>();
foreach (KeyValuePair<string, int> item in mylist)
{
    if (temp.ContainsKey(item.Key))
    {
        temp[item.Key] = temp[item.Key] + item.Value;
    }
    else
    {
        temp.Add(item.Key, item.Value);
    }
}
List<KeyValuePair<string, int>> result = new List<KeyValuePair<string, int>>(temp.Count);
foreach (string key in temp.Keys)
{
    result.Add(new KeyValuePair<string,int>(key,temp[key]);
} 
```

# c# - 任务 vs c# 中的异步委托？

> ID：13698129
> 
> 赞同：13
> 
> 时间：2012-12-04T07:37:39.730
> 
> 标签：c#, .net, multithreading, .net-4.0

我有这个简单的方法：

```
static int Work (string s) { return s.Length; } 
```

我可以运行它：

```
Task<string> task = Task.Factory.StartNew<int> (() => Work ("lalala") );
...
int result = task.Result; 
```

或者用这个：

```
Func<string, int> method = Work;
IAsyncResult myIasync= method.BeginInvoke ("lalala", null, null);
...
int result = method.EndInvoke (myIasync); 
```

*   他们都使用线程池线程。
*   两者都等待执行完成（读取值时）
*   两者都向调用者重新抛出任何异常。

我什么时候应该使用每个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T07:41:20.137

第二种形式 using`IAsyncResult`明显更老，功能也更弱。`Task<T>`是在 .NET 4 中引入的，现在是表示异步操作的首选方式。它使用起来要简单得多，尤其是在支持“异步函数”的 C# 5 中，您可以在其中以非阻塞方式等待任务（或其他异步操作）。

使用 a`Task`而不是调用`BeginInvoke`可能不会改变操作本身的执行方式（尽管它在调度等方面为您提供了更多选择），但从想要“观看”的代码的角度来看，它会产生巨大的差异操作、使用结果、等待多个任务、处理故障等。

如果您可以使用 C# 5（使用 .NET 4.5 或使用 .NET 4 加上异步目标包），那么在管理异步操作时，您的生活将变得更加轻松。这是前进的道路:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:43:14.203

任务更优雅，并且是最近引入的（.Net 4），所以如果它满足您的需求，我会同意的。

# azure - 撤销单个 blob 上的共享访问签名

> ID：13698132
> 
> 赞同：3
> 
> 时间：2012-12-04T07:37:56.607
> 
> 标签：azure, azure-blob-storage

我参与构建一个服务，除其他外，它必须通过 azure blob 将文件访问权分发给客户端。客户端应该能够请求对文件的写锁定，这意味着在某个指定的时间内，只有一个客户端可以写入 blob。

我的问题是关于如何实现这种锁定机制。目前我的解决方案是通过共享访问签名为客户端提供访问权限，该服务确保一次只有一个对每个 blob 具有写访问权限的共享访问处于活动状态。

这种方法的问题是当我希望撤销访问权限时。如果客户端在共享访问到期之前完成其写操作，我希望能够撤销签名，以便我可以向其他人授予写访问权限。通过使用容器级策略，我只能使用该策略撤销对所有签名的访问，但我的目标是撤销对单个 blob 上的签名的访问。

所以我的问题是：是否有某种方法可以撤销对单个 blob 的特定共享访问签名的访问？如果没有，还有其他方法可以实现我在 Azure 中描述的那种功能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:47:27.800

[从文档](http://msdn.microsoft.com/en-us/library/windowsazure/hh508996.aspx)：

> 共享访问签名授予的权限附加到用于创建签名的帐户密钥以及相关的存储访问策略（如果有）。如果未指定存储访问策略，则撤销共享访问签名的唯一方法是更改​​帐户密钥。

还：

> 此外，共享访问签名 URL 可以引用存储的访问策略，该策略提供对一组签名的额外控制级别，包括在必要时修改或撤销对资源的访问的能力。有关资源级访问策略的更多信息，请参阅使用存储的访问策略。

因此，如果您想控制撤销，请使用预定义的存储访问策略。或创建短暂的 SAS

顺便说一句，获得锁称为[Blob Lease](http://msdn.microsoft.com/en-us/library/windowsazure/ee691972.aspx)。[另请查看有关租赁 blob](http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases)和锁定的博客文章。

# ssl - GoDaddy 和 ElasticBeanStalk 的 SSL 证书

> ID：13698133
> 
> 赞同：0
> 
> 时间：2012-12-04T07:37:57.457
> 
> 标签：ssl

我正在开发的网站需要 SSL 密钥。该域将由 Godaddy 托管，但实际内容将托管在 ElasticBeanStalk 参考上。现在为简单起见，域名相同的是 xyz.com，但 ElasticBeanStalk 上的 API 是 xyz.elasticbeanstalk.com。现在我希望通过 SSL 证书保护我的 api。我从 godaddy 购买了 SSL，但是当我部署到 aws 时，浏览器给出了证书与域不匹配的 SSL 错误。那我现在该怎么办。

1）购买两个证书，一个用于我的站点，另一个用于 aws 实例。2) 为 *.abc.com 购买证书并将 AWS api 更改为 api.xyz.com 或类似的东西。

在这种情况下，你们会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T06:02:01.153

> 该域将由 Godaddy 托管，但实际内容将托管在 ElasticBeanStalk 参考上

我认为您的意思是该域是在还提供 DNS 的 Godaddy 注册的，并且您的常规网站也在 godaddy。那是对的吗？

您的任何一个建议都会起作用，通配符 SSL 证书（用于 *.xyz.com）通常比两个简单的更昂贵。

这是关于设置私有 SSL 证书的弹性 Beanstalk 指南的链接。只做写的:) [http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html)

# android - 将图像从 JSON URL 加载到列表视图中

> ID：13698135
> 
> 赞同：1
> 
> 时间：2012-12-04T07:38:06.250
> 
> 标签：android, json, bitmap, android-listview

我正在尝试从 URL 获取图像，然后将其添加到列表视图。我可以成功获取图像，但我正在努力将其添加到列表视图中。

我试过这样：

```
 ListView lv = (ListView) findViewById(R.id.list);

    try {

        URL url = new URL("http://devcms.barcodo.com/Images/ProductImages/ThumbnailImages100/EG-BIRT-ST-JA_th.jpg");
        HttpGet httpRequest = null;
        httpRequest = new HttpGet(url.toURI());
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
        HttpEntity entity = response.getEntity();
        BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
        InputStream input = b_entity.getContent();
        Bitmap bitmap = BitmapFactory.decodeStream(input); 

        HashMap<String, Object> docList = new HashMap<String, Object>();
        docList.put("IMAGE", bitmap);

        ArrayList<HashMap<String, Object>> al = new ArrayList<HashMap<String, Object>>();
        al.add(docList);

        simpleAdapter = new SimpleAdapter(this, al, R.layout.list_item,new String[] { "IMAGE" }, new int[] { R.id.image});
        lv.setAdapter(simpleAdapter); 
```

注意：我可以将它放入 ImageView，但想获取到列表视图中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:55:28.103

尝试以下操作：

```
 public class ImageURL extends ListActivity{
        @Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
    try {

        URL url = new URL(
                "http://devcms.barcodo.com/Images/ProductImages/ThumbnailImages100/EG-BIRT-ST-JA_th.jpg");
        HttpGet httpRequest = null;

        httpRequest = new HttpGet(url.toURI());

        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = (HttpResponse) httpclient
                .execute(httpRequest);

        HttpEntity entity = response.getEntity();
        BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
        InputStream input = b_entity.getContent();

        bitmap = BitmapFactory.decodeStream(input);

    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    } catch (MalformedURLException e) {
        Log.e("log", "bad url");
    } catch (IOException e) {
        Log.e("log", "io error");
    }
    setListAdapter(new StudentListAdapter(this));
}

private class StudentListAdapter extends BaseAdapter {
    private Context mContext;
    private String[] mStudents = { "DurgaPrasad", "Raghu", "Vivek",
            "Satish", "Naga Jyothi", "Vardhika", "Nikhil" };
    private String[] mDetailsStudent = { "Details of DurgaPrasad",
            "Details of  Raghu This row is not created using java",
            "Details of Vivek", "Details of Satish",
            "Details of Naga Jyothi", "Details of Vardhika",
            "Details of Nikhil" };

    public StudentListAdapter(Context context) {
        mContext = context;
    }

    public int getCount() {
        return mStudents.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            System.out.println("111111111111 : " + position);
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            /*
             * if (position == 0) {
             * System.out.println("111111111111 : "+position); v =
             * vi.inflate(R.layout.studentdetailsrow, null);
             * System.out.println("111111111111 : "+position); } else
             */
            v = vi.inflate(R.layout.list_item, null);
        }

        ImageView iv = (ImageView) v.findViewById(R.id.icon);
        ImageView iv2 = (ImageView) v.findViewById(R.id.icon2);
        if (position == 0) {
            iv.setImageBitmap(bitmap);
            // iv2.setImageResource(R.drawable.icon);
        } else {
            iv.setImageBitmap(bitmap);
            // iv2.setImageResource(R.drawable.icon);
        }

        TextView tvname = (TextView) v.findViewById(R.id.stuname);
        TextView tvdetail = (TextView) v.findViewById(R.id.studetail);
        tvname.setText(mStudents[position]);
        tvdetail.setText(mDetailsStudent[position]);
        return v;
    }

    };
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:41:21.343

试试这个库，完全符合你的需要。[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

要在列表视图中显示图像，您需要创建一个从 BaseAdapter 扩展的列表适配器类并在那里创建每个视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T04:20:13.113

[大家好](http://imagelistviewdynamic.blogspot.in/)

我一直在寻找厚薄的东西，并且在使用 simpleadapter 实现 ListView 时遇到了一些问题。然后@AYorhan 说要使用 baseadapter 并提供了帮助我解决问题的链接。然后@Ramesh 为我提供了一个例子，这对我也有很大帮助。

我想使用 simpleadapter 创建自己的 List Adapter 以显示在 listView 中，但在使用 BaseAdapter 之后没有成功，**使用**JSON URL 从服务器获取多个项目。我得到了成功。

**我正在为android中的一些初学者分享这个工作代码链接，他们可能会得到帮助，从服务器检索图像并使用baseadpater获取到列表视图中。**

**问候 :::: TechEnd**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T07:23:01.167

将 json 数据中的图像提取到列表中的列表视图中选择所有数据移动到第二个活动名称 SingleContactActivity

```
ListView list;

ArrayList<FeeStacture> newsFeedList;
DeliveryListAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initializeAdress();

    list = (ListView) findViewById(R.id.list);
    adapter = new DeliveryListAdapter();
    list.setAdapter(adapter);
    list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.rank))
                    .getText().toString();
            String cost = ((TextView) view.findViewById(R.id.country))
                    .getText().toString();
            String description = ((TextView) view.findViewById(R.id.population)).getText().toString();

            ImageView employee_id = ((ImageView) view.findViewById(R.id.imagestar));
           employee_id.buildDrawingCache();
            Bitmap bitmap=employee_id.getDrawingCache();

          Intent in = new Intent(getApplicationContext(),
                    SingleContactActivity.class);
            in.putExtra("name", name);
            in.putExtra("email", cost);
            in.putExtra("phone", description);

            in.putExtra("BitmapImage", bitmap);

            startActivity(in);
        }
    });

}

private void initializeAdress() {
    getNewsFeedListFromServer();

    newsFeedList = new ArrayList<FeeStacture>();
}

private void getNewsFeedListFromServer() {

    Fee_Stacture_WebService servics = new Fee_Stacture_WebService(this);
    servics.startTask();
}

public class DeliveryListAdapter extends BaseAdapter

{

    LayoutInflater minflat;

    public DeliveryListAdapter() {
        minflat = LayoutInflater.from(getApplicationContext());
    }

    @Override
    public int getCount() {
        return newsFeedList.size();
        //return MainActivity.size();
    }

    @Override
    public Object getItem(int arg0) {
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        return 0;
    }

    @Override
    public View getView(int position, View contentView, ViewGroup arg2) {

        ViewHolder holder;

        if (contentView == null) {
            holder = new ViewHolder();

            contentView = minflat.inflate(R.layout.home_custom_listitem, null);

            holder.rank = (TextView) contentView.findViewById(R.id.rank);
            holder.pop = (TextView) contentView.findViewById(R.id.population);
            holder.country = (TextView) contentView.findViewById(R.id.country);
            holder.image = (ImageView) contentView.findViewById(R.id.imagestar);

            contentView.setTag(holder);

        } else
        {
            holder = (ViewHolder) contentView.getTag();

        }

        FeeStacture newsObj = newsFeedList.get(position);

        holder.rank.setText(newsObj.getRank());
        holder.pop.setText(newsObj.getPop());

       holder.country.setText(newsObj.getCountry());
        new DownloadImageTask(holder.image).execute(newsFeedList.get(position).getItemIconStr());

        return contentView;

    }

    public class ViewHolder {
        // ImageView use;
        TextView rank;
        TextView pop;
        ImageView image;
        TextView address;
        TextView country;
        TextView gender;
        TextView phone;
    }

}

@Override
public void onSuccessfullResponse(Object object) {
    newsFeedList = (ArrayList<FeeStacture>) object;

    adapter.notifyDataSetChanged();

}

@Override
public void onErrorResponse(String error) {
    Toast.makeText(getApplicationContext(), error, Toast.LENGTH_SHORT).show();

}

@Override
public void onNetworkError(String error) {
    Toast.makeText(getApplicationContext(), error, Toast.LENGTH_SHORT).show();

}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    //super.onBackPressed();
    new AlertDialog.Builder(this)
            .setIcon(android.R.drawable.ic_menu_zoom)
            .setTitle("Web Service Demo")
            .setMessage("Are you sure you want to quit Web Demo ?")
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    finish();

                }

            })
            .setNegativeButton("No", null)
            .show();
}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    }

} 
```

}

# wcf - 如何将Vs2012中的WCF服务作为普通代码调试？

> ID：13698145
> 
> 赞同：0
> 
> 时间：2012-12-04T07:38:41.630
> 
> 标签：wcf

在 vs2012 中调试 WCF 期间，它会引发以下异常；

我正在使用 Vs2012 IIS7.5 和 Windows7。该服务托管在 iis 上。

“你调用的对象是空的。”

如何调试 WCF 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:15:10.373

尝试将下面的行添加到代码中。

System.Diagnostics.Debugger.Launch();

并在询问时开始调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:19:54.943

转到“附加到进程”对话框并附加到 IIS 工作进程 ( `w3wp.exe`)。转到“异常”对话框并告诉它抛出所有异常。然后，如果发生异常，它将在此时进入调试器。

我还建议您考虑捕获服务中发生的异常并将它们记录到事件日志中，并使用尽可能多的诊断数据。根据我的经验，我通常可以纯粹通过查看异常堆栈跟踪来确定原因。如果我能做到这一点，那么我就不必浪费时间调试了。查看[`[ExceptionShielding]`](http://msdn.microsoft.com/en-us/library/ff664738%28v=PandP.50%29.aspx)Enterprise Library 中的属性，了解一种将错误日志记录添加到所有服务方法的简单方法。

# android - 垂直搜索栏行为异常

> ID：13698148
> 
> 赞同：0
> 
> 时间：2012-12-04T07:38:56.130
> 
> 标签：android, seekbar

![在此处输入图像描述](../Images/919edd6f0908ecf6e613589e7e1016cc.png) 包android.widget；

```
import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.MotionEvent;

public class VerticalSeekBar extends SeekBar {

    public VerticalSeekBar(Context context) {
        super(context);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(h, w, oldh, oldw);
    }

    @Override
    protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(heightMeasureSpec, widthMeasureSpec);
        setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
    }

    protected void onDraw(Canvas c) {
        c.rotate(-90);
        c.translate(-getHeight(), 0);

        super.onDraw(c);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (!isEnabled()) {
            return false;
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
                setProgress(getMax() - (int) (getMax() * event.getY() / getHeight()));
                onSizeChanged(getWidth(), getHeight(), 0, 0);
                break;

            case MotionEvent.ACTION_CANCEL:
                break;
        }
        return true;
    }
} 
```

我使用上面的代码自定义了我的搜索栏。我的搜索栏的拇指显示颠倒了。即拇指的行为正好相反，因为它应该表现正常。当我的列表视图开始时，拇指位于搜索栏的最后一个位置，反之亦然。帮助！！！！！！！

![在此处输入图像描述](../Images/919edd6f0908ecf6e613589e7e1016cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:50:46.830

我从相同的代码创建了一个 Inverted Seekbar 实现。虽然这适用于垂直搜索栏，但我只是尝试了一个倒置的栏，这对你的情况应该有帮助。我已将我的项目添加到 github，这是它的链接。

[https://github.com/AndroSelva/Vertical-SeekBar-Android](https://github.com/AndroSelva/Vertical-SeekBar-Android)

```
protected void onDraw(Canvas c) {
        c.rotate(90);
        c.translate(0, -getWidth());

        super.onDraw(c);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (!isEnabled()) {
            return false;
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
                int i=0;
                i=getMax() - (int) (getMax() * event.getY() / getHeight());
                setProgress(100-i);
                Log.i("Progress",getProgress()+"");
                onSizeChanged(getWidth(), getHeight(), 0, 0);
                break;

            case MotionEvent.ACTION_CANCEL:
                break;
        }
        return true;
    } 
```

# android - 任何第三方提供渲染MS-office(word,ppt,excel)的android库

> ID：13698158
> 
> 赞同：5
> 
> 时间：2012-12-04T07:40:04.860
> 
> 标签：android, ms-office

有第三方提供渲染office的android库吗？我的app需要打开word,ppt,excel文件。我在 ios 中使用 UIWebView。但我在 Android 上找不到路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:47:49.290

我发现 Google Drive 带有一个出色的文档查看器，您可以简单地按意图将文档发送给它。它可以很好地呈现所有 Office 文档（据我所知）。

# objective-c - 如何在 iOS 中的文本上创建“浮雕”效果？

> ID：13698161
> 
> 赞同：1
> 
> 时间：2012-12-04T07:40:32.453
> 
> 标签：objective-c, ios, core-graphics

我想在 UILabel 中的文本上创建“**浮雕**”文本效果。我无法选择正确的选项。请指导我如何使用正确的可用选项来实现这一点。我需要使用**CoreGraphics 或 CoreText 或自定义 UILabel**吗？我只想要数字在信用卡上的显示方式。

![在此处输入图像描述](../Images/c18daea0f56c3888ec0f6b8c37314373.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:48:37.853

试试这个，

```
[label setShadowColor:[UIColor darkGrayColor]];
[label setShadowOffset:CGSizeMake(0, -1)]; 
```

您可以调整它以获得所需的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:05:53.820

UILabel 的`shadowColor`并`shadowOffset`提供有限的定制。你也可以覆盖 UILabel 的`drawRect:`

```
-(void)drawTextInRect:(CGRect)rect
{
    CGContextRef ref = UIGraphicsGetCurrentContext();
    CGContextSetShadowWithColor(ref, CGSizeMake(0.0, 2.0), 3.0, [UIColor blackColor].CGColor);
    [super drawTextInRect:rect];
} 
```

# java - 将字符串错误地转换为日期格式

> ID：13698165
> 
> 赞同：0
> 
> 时间：2012-12-04T07:40:58.403
> 
> 标签：java, date, simpledateformat

我正在尝试将字符串格式化为特定的日期格式，但转换存在一些问题。在转换后的字符串中，月份总是“一月”。以下是代码片段：

```
 String date = "30/10/2012-11:11:11";
    DateFormat dateForm = new SimpleDateFormat("dd/mm/yyyy-hh:mm:ss");

    try {
       System.out.println(dateForm.parse(date));
    } 
    catch (ParseException e) {
       e.printStackTrace();
    } 
```

我无法得到这背后的原因。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:45:20.123

正如其他人所说，你应该使用`MM`几个月 - 我强烈怀疑你*总是*想使用`HH`几个小时，而不是`hh`. `HH`是 24 小时制；`hh`是 12 小时制，通常与 AM/PM 指示符一起使用。

最后，您应该考虑要`SimpleDateFormat`使用的时区和语言环境。即使在这种没有任何月份或日期名称的情况下，我仍然会明确指定语言环境，以明确您*没有*尝试使用任何本地化数据。

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy-HH:mm:ss", Locale.US);
// TODO: Set the time zone appropriately 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:43:25.313

使用`MM`而不是`mm`格式字符串的日期部分。`mm`是几分钟，而不是几个月。

参考：[http ://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T07:43:56.330

请用`"dd/MM/yyyy-hh:mm:ss"`

# liferay - 如何从 Liferay 的页面中捕获 portlet 实例删除事件？

> ID：13698171
> 
> 赞同：5
> 
> 时间：2012-12-04T07:41:32.990
> 
> 标签：liferay, portlet, liferay-6

当我的 portlet 实例将从页面中删除时，我想捕获该事件以从该 portlet 中获取一些偏好值，并执行某些操作。

Liferay 中是否有类似接口或钩子的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T16:10:43.343

`PortletLayoutListener`您可以在**liferay-portlet.xml**中定义自己的：

```
<portlet>
        <portlet-name>xxyyzz</portlet-name>
...
        <portlet-layout-listener-class>com.myCompany.MyLayoutTypePortletListener</portlet-layout-listener-class>
...
</portlet> 
```

您的**MyLayoutTypePortletListener**可能类似于：

```
public class MyLayoutTypePortletListener
    implements PortletLayoutListener {

    public void onRemoveFromLayout(String portletId, long plid)
        throws PortletLayoutListenerException {
        // ***** ... your LOGIC HERE *****
    }

    public void onMoveInLayout(String portletId, long plid)
        throws PortletLayoutListenerException {

    }

    public void onAddToLayout(String portletId, long plid)
        throws PortletLayoutListenerException {
    }

} 
```

* * *

有关示例和[Liferay 的论坛帖子](http://www.liferay.com/community/forums/-/message_boards/message/11290898)，请参见期刊内容 portlet 。

# .net - 如何将配置文件引入 Powershell 脚本？

> ID：13698174
> 
> 赞同：27
> 
> 时间：2012-12-04T07:41:46.667
> 
> 标签：.net, xml, powershell, configuration, app-config

假设我有一个名为 Foo.ps1 的 Powershell 脚本

我想介绍一个名为 Foo.ps1.config 的 XML 配置文件

我可以在其中指定我的环境设置，例如：

```
<FunctionsDirectory>
     $ScriptDirectory\Functions
</FunctionsDirectory>
<ModulesDirectory>
     $ScriptDirectory\Modules
</ModulesDirectory> 
```

然后我想在 Foo.ps1 的开头加载这个配置，这样我就可以将我的模块和点注释导入到 Functions 目录中。

如何在 Powershell 中实现这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-01T23:58:06.770

可能是一个更简单的解决方案......假设您的配置文件名称为“Confix.xml”，试试这个：

```
PS Testing> [xml]$configFile= get-content .\Config=.xml
PS Testing> $configFile
xml                                  configuration
---                                  -------------
version="1.0"                        configuration 
```

从新变量中读取数据：

```
PS Testing> $configFile.configuration.appsettings
#comment                             add
--------                             ---
Vars                                 {add, add}

PS Testing> $configFile.configuration.appsettings.add
key                                  value
---                                  -----
var1                                 variableValue1
var2                                 variableValue2

PS Testing> $configFile.configuration.appsettings.add[0].value
variableValue2 
```

长话短说：将您的变量转换为 XML，并执行获取内容。

在这种情况下，Config.xml 如下所示：

```
<?xml version="1.0"?>
<configuration>
  <startup>
  </startup>
  <appSettings>
    <!--Vars -->
    <add key="var1" value="variableValue1"/>
    <add key="var2" value="variableValue2"/>
  </appSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-06T23:59:34.203

对于 XML 配置的替代方案，如果您可以灵活地使用其他类型的配置。我建议使用全局 PS 配置文件，方法如下：

创建一个 Powershell 配置文件（例如 Config.ps1），然后将所有配置作为全局变量并将其作为第一步进行初始化，以便配置值应该在您的脚本上下文中可用.

**这种方法的好处是可以在 Config.ps1 PS 文件中使用各种类型的数据结构，例如标量变量、集合和散列，并在 PS 代码中轻松引用。**

以下是一个实例：

![在此处输入图像描述](../Images/322e1b6f741f8d8057e07b7a432d08bf.png)

这是 C:\Config\Config.ps1 文件：

```
$global:config = @{   
    Var1 = "Value1"

    varCollection = @{       
        item0     = "colValue0"
        item1   = "colValue1"
        item2  = "colValue2"
    }       
} 
```

然后从模块 C:\Module\PSModule.psm1 中的 Config.ps1 文件中加载函数/变量，如下所示：

```
$scriptFiles = Get-ChildItem "$PSScriptRoot\Config\*.ps1" -Recurse

foreach ($script in $scriptFiles)
{
    try
    {       
        . $script.FullName 
    }
    catch [System.Exception]
    {
        throw
    }
} 
```

最后，初始化脚本包含以下这一行：（ C:\Init.ps1 ）。

`Import-Module $PSScriptRoot\Module\PSModule.psm1 -Force`

运行 Init.ps1 后。global:config 变量将在您的脚本上下文中可用。这是输出：
![在此处输入图像描述](../Images/7e8f0724ac1d9c82ebcfee6be072a5d2.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-04T08:46:31.437

基于[Keith 的解决方案](http://rkeithhill.wordpress.com/2006/06/01/creating-and-using-a-configuration-file-for-your-powershell-scripts/)...加载 XML 的代码：

```
 $configFile = "c:\Path2Config"
    if(Test-Path $configFile) {
        Try {
            #Load config appsettings
            $global:appSettings = @{}
            $config = [xml](get-content $configFile)
            foreach ($addNode in $config.configuration.appsettings.add) {
                if ($addNode.Value.Contains(‘,’)) {
                    # Array case
                    $value = $addNode.Value.Split(‘,’)
                        for ($i = 0; $i -lt $value.length; $i++) { 
                            $value[$i] = $value[$i].Trim() 
                        }
                }
                else {
                    # Scalar case
                    $value = $addNode.Value
                }
            $global:appSettings[$addNode.Key] = $value
            }
        }
        Catch [system.exception]{
        }
    } 
```

从 XML 值填充变量：

```
 $variable1 = $appSettings["var1"]
            $variable2 = $appSettings["var2"] 
```

以及相关的 XML：

```
<?xml version="1.0"?>
<configuration>
  <startup>
  </startup>
  <appSettings>
<!--Vars -->
    <add key="var1" value="variableValue1"/>
    <add key="var2" value="variableValue2"/>
  </appSettings>
</configuration> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-11T12:33:19.063

另一个解决方案（类似于@yantaq 的）只是有一个单独的脚本并加载它。

所以`config.ps1`包含：

```
$Environment = $Environment.ToUpper()
$GDriveUNC = "\\servername.domain.net\Data"
$BinLocation = "$pwd\bin-$Environment" 
```

请注意，在这种情况下`$Environment`是主脚本的一个参数，您可以进行任何您想要的操作。

然后在主脚本中，只需运行这个“配置”脚本，如下所示：

```
. $PSScriptRoot\config.ps1 
```

# php - javascript验证无法正常工作

> ID：13698178
> 
> 赞同：-2
> 
> 时间：2012-12-04T07:42:19.917
> 
> 标签：php, javascript

只有一个条件被执行，其他的不是。请提供解决方案。

```
function a() {
    var x=document.forms["addform"]["gender"].value;
    if (x==null || x==""){
        alert("Enter gender");
        return false;
    }

    var y=document.forms["addform"]["count"].value;
    if (y==null || y==""){
        alert("enter country");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:53:44.217

两个警报都没有触发的原因（如果您的元素被正确引用）是因为您`return false;`在每个 if 中执行。这可以防止在函数中触发更多代码，因此第二个代码`if`没有机会触发。

在我的代码中，我添加了一个变量，然后我`return false;`在函数的末尾（如果有任何一个`if`执行）。这允许触发两个警报。

```
function a()
{
  var submitform = true, x=document.forms["addform"]["gender"].value, y=document.forms["addform"]["count"].value;
  if (x===null || x=="") {
    alert("Enter gender");
    submitform = false;
  }   

  if (y===null || y=="") {
    alert("enter country");
    submitform = false;
  }
  // Added an if here
  if (submitform === false) {
    return false;
  }
} 
```

谢谢弗雷德里克
_

**编辑：使用`===`是检查相同值的更好做法。有关更多信息，请参阅[此](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)stackoverflow 问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:52:51.763

一种情况有效，另一种情况无效，这意味着您可能将元素名称错误地用于不工作的情况。`gender`并且`count`应该是`name`输入或选择元素的。因此，如果您使用选择，您的 HTML 应该与此类似：

```
<select name="gender">  <--- name = gender
    <option value="">Please select</option>
    <option value="M">Male</option>
    <option value="F">Female</option>
</select>

<select name="count">   <--- name = count
    <option value="">Please select</option>
    <option value="USA">USA</option>
    <option value="Canada">Canada</option>
</select> 
```

在一个警报中显示所有错误会更好：

```
function a()
{
    var errors = "";

    var x=document.forms["addform"]["gender"].value;
    if (x==null || x==""){
        errors += "Enter gender" + "\n";
    }

    var y=document.forms["addform"]["count"].value;
    if (y==null || y==""){
        errors += "Enter Country" + "\n";
    }

    if(errors)
    {
        alert(errors);
        return false;
    }
} 
```

# java - Java 导出到 CSV - 替换 HTML 实体

> ID：13698185
> 
> 赞同：0
> 
> 时间：2012-12-04T07:42:45.737
> 
> 标签：java, html-entities, export-to-csv, printwriter

我正在使用 Java 导出一个 CSV。它是一个基于莲花笔记的应用程序，我正在将输出写入输出 printwriter 对象。

```
pw.println("Content-Type: text/text; charset=iso-8859-1");
pw.println("Content-Disposition: attachment;filename=export.csv");
pw.println("Content-Language: en"); 
```

我正在写这样一行：

```
IMAZ-5NSAMF;ABCD;Europe;XYZ;;NA;(“CA 2010”); 
```

末尾的引号是奇怪的双引号，有点倾斜。但我的输出是将这些引号转换为其 HTML 实体并显示为 (“CA 2010”)

我进行了调试，就在写给 printwriter 之前，我也有引号，但之后它被转换为 HTML 实体。我对内容类型的字符集做错了什么。

提前致谢。干杯，阿努普

# iphone - iOS 在 iscroll (web) 中闪烁

> ID：13698188
> 
> 赞同：1
> 
> 时间：2012-12-04T07:42:48.907
> 
> 标签：iphone, uiwebview, uiscrollview, mobile-safari

如果 iscroll 块的大小超过 iphone safari 中的特定限制，它会在再次打开该选项卡时开始闪烁。我通过拆分为子块来解决它。但是闪烁的原因是什么？是否有任何替代解决方案.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T14:42:52.873

这可能会解决问题：

```
#scroller * {
-webkit-transform: translate3d(0,0,0);
} 
```

我遇到了同样的问题并在这里找到了解决方案： [https ://github.com/cubiq/iscroll/issues/168](https://github.com/cubiq/iscroll/issues/168)

干杯

# ubuntu - Linux中的信号强度

> ID：13698189
> 
> 赞同：4
> 
> 时间：2012-12-04T07:42:52.613
> 
> 标签：ubuntu

我能够从 iwconfig 命令读取信号强度，但如何仅获取信号强度的值，即 -94 dBm。我像这样运行我的命令，我只需要将粗体值打印或写入另一个文件，以便我可以比较 RSSI。

```
root@dibya-notebook:~# iwconfig wlan0 | grep Signal         
 Link Quality=59/70  Signal level=**-51** dBm

root@dibya-notebook:~# iwconfig wlan0 | grep dBm
          Bit Rate=54 Mb/s   Tx-Power=16 dBm   
          Link Quality=62/70  Signal level=**-48** dBm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:58:35.870

```
iwconfig | awk -F'[ =]+' '/Signal level/ {print $7}' 
```

# ios - 无法将数据库文件复制到其他恶意软件

> ID：13698191
> 
> 赞同：-2
> 
> 时间：2012-12-04T07:42:56.223
> 
> 标签：ios, xcode, sqlite, copy

我正在使用以下代码将数据库文件复制到其他文件夹只是为了制作临时写入文件。

```
BOOL success;
NSArray*dirPath;
NSString*docDir;
NSString*databasePath;
NSString*databaseName=@"EXPENSES";

//path for database
dirPath=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docDir=[dirPath objectAtIndex:0];
databasePath=[docDir stringByAppendingPathComponent:databaseName];

NSLog(@" docDir %@",docDir);
//check if present
NSFileManager*fm=[NSFileManager defaultManager];
success=[fm fileExistsAtPath:databasePath];

if(success)
{
    NSLog(@"DATA BASE Already present");
}
else
{

    //Copy from bundle to DocumentsDirectory on first run. Where DB won't be available in DocumentsDirectory.
    NSString*bundlePath=[[NSBundle mainBundle] pathForResource:@"EXPENSES" ofType:@""];
    NSError*error;
    success=[fm copyItemAtPath:bundlePath toPath:databasePath error:&error];

    if(success)
    {
        NSLog(@"DATA BASE Created successfully");
    }

} // End of else when DB not present in documents directory. 
```

但是文件没有复制，而是应用程序崩溃并出现错误“原因：' *** -[NSFileManager copyItemAtPath:toPath:error:]: source path is nil'”请帮我调试代码谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:20:58.970

你在这里犯了两个错误。

1.  你没有提到你的目标文件扩展名

    代替`NSString*databaseName=@"EXPENSES";`

    采用`NSString*databaseName=@"EXPENSES.sqlite";`

2.  此代码是实际问题：

    ```
    NSString*bundlePath=[[NSBundle mainBundle] pathForResource:@"EXPENSES" ofType:@""]; 
    ```

在这里，您要告诉`NSFileManager`找到具有名称的文件，`"EXPENSES"`并且它的扩展名`""`可能没有具有这些条件的文件。所以源路径将是`nil`. 这就是应用程序崩溃的原因。

通常数据库文件的扩展名为`sqlite`. 替换您的代码，如：

```
NSString*bundlePath=[[NSBundle mainBundle] pathForResource:@"EXPENSES" ofType:@"sqlite"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:47:19.713

尝试为 ofType 添加捆绑数据库扩展名：
`NSString*bundlePath=[[NSBundle mainBundle] pathForResource:@"EXPENSES" ofType:@"<extension>"];`错误提示无法找到指定的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:56:59.770

我已经摆脱了那个问题。我不知道它背后的逻辑，我只是​​从 SVN 导出了新的数据库并添加到我的项目包中，它工作得很好

# eclipse - Eclipse 中的 Metrics 插件问题

> ID：13698192
> 
> 赞同：8
> 
> 时间：2012-12-04T07:42:58.307
> 
> 标签：eclipse, eclipse-plugin

我已经在 Eclipse 3.7 indigo 中安装了 Metrics Plguin 1.3.8。安装并重新启动我的系统后，我在项目属性中看不到任何 Metrics 选项。

任何人都对此有任何想法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-25T08:57:47.297

我对 Eclipse Juno 和 metrics 1 (1.3.6) 有同样的问题。

在几次 Eclipse 升级和主题化之后，指标不再起作用。它只是显示计算进度，但不再显示计算结果。

经过一番网络搜索，我发现[http://metrics.sourceforge.net/](http://metrics.sourceforge.net/)演变成[http://metrics2.sourceforge.net/](http://metrics2.sourceforge.net/)，所以我进行了更改。但是，指标 2 (1.3.8) 显示了同样的问题。

在我的 Eclipse 工作区文件中稍作搜索后，我找到了一个名为“.metadata”的目录。然后是一个名为“.plugins”的子目录。然后是一个名为“net.sourceforge.metrics”的子目录，里面有两个文件：

*   指标数据库.db
*   指标数据库.lg

因此，退出 Eclipse 后，我转到“MyJunoWorkspace/.metadata/.plugins/net.sourceforge.metrics/”目录，然后将这两个文件移动到另一个地方，重新启动 Eclipse，从包视图。现在重新显示度量计算结果。依赖关系图也会重新显示。

版本切换的第一步（指标 1 到 2）是我的测试结果，并非在所有情况下都需要。首先尝试移动这两个文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-18T20:20:26.430

当您右键单击项目以打开其属性时，请确保您位于**Package Explorer**视图中。如果您在 Project Explorer 中，它不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-28T00:18:17.553

**要显示“指标”窗口：**

1) 单击顶部选项栏中的“窗口”。

2) 选择“显示视图”->“其他”->“指标”->“指标视图”。

**启用项目指标：**

1）右键单击项目。

2) 选择“属性”。

3) 点击“指标”标签。

4) 检查“启用指标”。

**您应该在 Package Explorer 视图中。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-26T14:37:11.923

在 Project Explorer 中右键单击 Java Project。然后转到“配置 > 转换为插件项目”，然后在对话框中单击“完成”。

现在再次右键单击 Project Explorer 中的 Java Project。现在转到“首选项”，您会在左侧面板中找到“指标”。单击它并选择“启用指标”。现在 Metrics 视图将显示计算的指标。

我正在使用 Eclipse Juno 和 Metrics 1.3.8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-08T00:08:08.843

我在单元测试中声明了两次方法。这个错误几乎不引人注意，因为我的 Coverage 正在显示结果。

无论如何，我的代码中的错误是我没有看到插件更新的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-19T14:49:14.590

就我而言，未启用指标。所以 1.) 右键单击​​包资源管理器中的项目 2.) 单击属性 3.) 选择指标 4.) 启用指标 5.) 单击应用并关闭

而已 ..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-07T18:54:31.983

我知道我听起来像是在复活死者，但是在从 Indigo 升级到 Mars 时我遇到了类似的问题。

插件安装正确，一切正常，但我无法配置或使用它。我查看了网络并找不到任何东西，直到我记得第一步总是查看日志（.metadata/.log）。这就是出现的情况：

'.eclipse/org.eclipse.platform_3.7.0_155965261/plugins/com.stateoffflow.eclipse.metrics_3.14.1.201104282140' 处的 !MESSAGE 插件没有 OSGi 捆绑清单。要使用 2.0 风格的插件，您必须安装插件转换器服务。转到帮助 > 安装新软件并从“Eclipse 项目更新”软件站点安装“Eclipse 2.0 样式插件支持”。

我安装了 Eclipse 2.0 Style Plugin Support 并重新安装了metrics et voila！一切恢复正常。

希望这对我在故障排除时结束时有所帮助。

# sql - 将 varchar 值“1,409.32”转换为数据类型 int 时转换失败

> ID：13698197
> 
> 赞同：1
> 
> 时间：2012-12-04T07:43:13.773
> 
> 标签：sql, sql-server-2008, numeric, varchar

我`USRDEF05 varchar(30)`在表中有一列`SOP10106`声明为包含所有数字的列，当我尝试执行以下查询时，我收到转换错误。

```
Select 
    DETAIL.SUBTOTAL as Sub_Total,
    CASE 
       when USERDEF.USRDEF05 <> ' ' THEN USERDEF.USRDEF05 
       ELSE 0 
    END as Winsys
FROM 
    SOP10100 DETAIL
Right JOIN 
    SOP10106 USERDEF ON USERDEF.soptype = DETAIL.soptype 
WHERE 
    BACHNUMB ='WINSYS112012' 
```

谁能给我一个想法如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:47:07.850

尝试这个 -

```
CASE when ISNUMERIC(USERDEF.USRDEF05) <> 0 THEN 
CAST(CAST(USERDEF.USRDEF05 as DECIMAL) as int) ELSE 0 END as Winsys 
```

> 注意：- 这会将十进制值四舍五入为最接近的整数。

例如：- 如果您的值为 1409.32，则生成的 int 值为 1409

如果您的值为 1409.64，则生成的 int 值为 1410

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:17:20.757

我猜问题不在于这个值 1,409.32 尝试使用[ISNUMERIC()](http://msdn.microsoft.com/en-us/library/aa933213%28v=sql.80%29.aspx)函数运行此查询：

```
Select 
    DETAIL.SUBTOTAL as Sub_Total,
    CASE 
       when isnumeric(USERDEF.USRDEF05) = 1 
            THEN cast(USERDEF.USRDEF05 as decimal(12,2))
       ELSE 0 
    END as Winsys
FROM 
    SOP10100 DETAIL
Right JOIN 
    SOP10106 USERDEF ON USERDEF.soptype = DETAIL.soptype 
WHERE 
    BACHNUMB ='WINSYS112012' 
```

并检查哪里有错误：

```
select USRDEF05 from USERDEF 
where isnumeric(USERDEF.USRDEF05) = 0 
and USERDEF.USRDEF05 <> ' ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:05:29.237

因为您的数据库架构不正确（数字不应该存储为文本），所以下一个不正确的语句也应该起作用：

```
Select 
    DETAIL.SUBTOTAL as Sub_Total,
    CASE 
       when USERDEF.USRDEF05 <> ' ' THEN USERDEF.USRDEF05 
       ELSE '0' 
    END as Winsys 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:08:37.683

我真的不是您尝试接收的内容，因为`USRDEF05`它是字符串，但似乎您想要的`Winsys`是数字。

这里有几种方法：

**`Winsys`是字符串**

```
Select 
DETAIL.SUBTOTAL as Sub_Total,
CASE 
   when USERDEF.USRDEF05 <> ' ' THEN USERDEF.USRDEF05 
   ELSE '0' 
END as Winsys 
```

**`Winsys`是数字**

```
Select 
DETAIL.SUBTOTAL as Sub_Total,
CASE 
   when USERDEF.USRDEF05 <> ' ' THEN CONVERT(MONEY, USERDEF.USRDEF05, 1)
   ELSE 0 
END as Winsys 
```

# c++ - 霍夫曼解码中的递归函数未退出

> ID：13698201
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:43:48.863
> 
> 标签：c++, recursion, segmentation-fault, decoding, huffman-code

我创建的霍夫曼解码功能有点问题。我只是想知道是否有人知道为什么我的程序会产生无限循环。以下是我的功能以及我如何调用它。当计数器达到 8 时，它应该退出函数，因为没有更多位要读取。这里是：

```
HuffmanNode *rodee = createTree(freqArray2, 256); //holds the huffman tree
HuffmanNode *temporaryNode; //temporary node for traversing
temporaryNode = rodee; //first the temporary node is equal to the root
while(cin.read((char*)&w, sizeof(w))
{
  traverseCode(temporaryNode, rodee, bits, count);
  count = 0; //reset the count back to 0 for the next time the function is called 
} //as I read in a byte of 8 bits (I converted the bytes to bits in another function not shown

void traverseCode(HuffmanNode *temp, HuffmanNode *root, unsigned char *bits, int counter)
{
    if(counter >= 7)
    {
      counter = 0;
      return; 
    }
    if(temp->getLeft() == NULL && temp->getRight() == NULL)
    {
      cout << temp->getLetter();
      temp = root; 

      traverseCode(temp, root, bits, counter);
    }
    if((int)bits[counter] == 0)
    {
      traverseCode(temp->getLeft(), root,  bits, counter++);
    }
    if((int)bits[counter] == 1)
    {
      traverseCode(temp->getRight(), root, bits, counter++);
    }
} 
```

可能有人知道为什么我的函数会进入无限循环以及如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:55:13.993

如果您希望通过 traverseCode() 函数更新计数器，则它需要是引用或指针。在您的代码中，它只是一个局部变量，在函数退出时被丢弃。

所以这除了返回之外什么都不做：

```
if(counter >= 7)
{
  counter = 0;
  return; 
} 
```

接下来的一点也令人困惑。它将使用“counter”的原始值调用函数，这很可能是无限循环的来源。如果它确实返回，它将增加 counter 的本地值，然后下降到下一个 if()，这也可能是无意的。

```
if((int)bits[counter] == 0)
{
  traverseCode(temp->getLeft(), root,  bits, counter++);
}
if((int)bits[counter] == 1)
{
  traverseCode(temp->getRight(), root, bits, counter++);
} 
```

因此，您可能需要以完全不同的方式处理计数器，并且不要让您的 if() 语句像那样失败。

# knockout.js - 可观察对象的 attr 数据绑定不会在 Knockout.js 中更新

> ID：13698203
> 
> 赞同：0
> 
> 时间：2012-12-04T07:43:57.390
> 
> 标签：knockout.js

我已经将我的视图模型中的一个可观察对象绑定到一个 div 的标题，如下所示：

area 是一个 ko.observable()

第一次设置该值时，标题会正确更新。对区域的任何进一步更新都不会导致标题更新。我知道该值设置正确，因为我添加了一个绑定到相同的跨度并且更新很好：

不知道我错过了什么。

更新：对不起，我想我在做一件愚蠢的事情。我使用的是 jQueryUI 模态对话框，而不是设置对话框的标题，而是设置包含 div 的标题……这当然是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:20:57.067

它有效， [http://jsfiddle.net/R8fCF/](http://jsfiddle.net/R8fCF/)

```
<div data-bind="attr: {title: area }">Hover for title</div>

ViewModel = function() {
    this.area = ko.observable(0);
    setInterval(function() {
        this.area(this.area() + 1);
    }.bind(this), 1000);
};

ko.applyBindings(new ViewModel()); 
```

# android - 尝试在android中添加两个setContentView时出现空指针异常

> ID：13698206
> 
> 赞同：2
> 
> 时间：2012-12-04T07:44:32.553
> 
> 标签：android

我正在创建一个自定义 ListView，其中我的 ListView xml 是关键字列表。我还使用教程[http://mtmurdockblog.com/2011/10/17/navigation-bar-for-android/](http://mtmurdockblog.com/2011/10/17/navigation-bar-for-android/)以编程方式创建自定义导航栏。因为 ListView xml 有两个`setContentView()`，Navigation bar.im 有两个异常，你们可以帮我看看下面的代码。

```
public class KeywordListView extends Activity{
public LinkedList<String> mListItems;
KeyWordAdapter keywordAdapter;
ProgressDialog  progressDialog=null;
Runnable updateRunnable;    
public static String email;
Button btnSettings;
Button btnAddKeyWord;
static ListView lv;
public final Handler myHandler = new Handler();
static ArrayAdapter<String> arrayAdapter;

public static List<KeyWordDetails>responseArray;
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.keywordlist);
LinearLayout ll = new LinearLayout(this);

NavigationBar nb = new NavigationBar(this);
nb.setLeftBarButton("Back");
nb.setRightBarButton("Menu");
nb.setBarTitle("The Bar Title");
NavigationBar.NavigationBarListener nbl = new NavigationBar.NavigationBarListener() {
    @Override
    public void OnNavigationButtonClick(int which) {
        // TODO Auto-generated method stub  
    }
};
nb.setNavigationBarListener(nbl);
ll.addView(nb);
setContentView(ll); 
```

错误日志猫：-

```
12-04 13:17:49.780: E/AndroidRuntime(1533): FATAL EXCEPTION: main

   12-04 13:17:49.780: E/AndroidRuntime(1533): java.lang.RuntimeException: Unable to start  
   activity ComponentInfo{com.example.shortcode/com.example.shortcode.KeywordListView}:   java.lang.NullPointerException
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.os.Looper.loop(Looper.java:123)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at java.lang.reflect.Method.invoke(Method.java:507)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at dalvik.system.NativeStart.main(Native Method)
12-04 13:17:49.780: E/AndroidRuntime(1533): Caused by: java.lang.NullPointerException
12-04 13:17:49.780: E/AndroidRuntime(1533):     at com.example.shortcode.KeywordListView.onCreate(KeywordListView.java:111)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-04 13:17:49.780: E/AndroidRuntime(1533):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:48:10.943

我说避免两次调用 setContentView。如果你这样做，第一个将被覆盖。这可能是您遇到异常的原因。尝试创建一个 xml 布局文件并在那里定义您需要的所有视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:03:27.410

再次查看教程，他只使用了一次 setContentView。ll.addView(nb); 设置内容视图（ll）；您应该在 listView 中加载关键字，然后使用 li.addView(navigationBar) 在 listView 中添加导航栏；

或者

您可以使用 XML 进行导航，然后可以在该导航栏下方添加一个 listView。之后以编程方式在列表视图中加载关键字。我已经做出了这样的看法，检查一下

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="100" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="9"
                    android:background="@drawable/header" >

        <ImageView
            android:id="@+id/imageViewHome"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_gravity="center"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:scaleType="fitCenter"
            android:src="@drawable/home" />

        <TextView
            android:id="@+id/textViewTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_gravity="center_vertical|center_horizontal"
            android:text="Groups"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@android:color/white"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/imageViewCreate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dp"
            android:layout_toLeftOf="@+id/imageViewDelete"
            android:src="@drawable/add" />

        <ImageView
            android:id="@+id/imageViewDelete"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="5dp"
            android:scaleType="fitXY"
            android:src="@drawable/delete" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="9"
        android:background="@drawable/bg_gradient_grey" >

        <EditText
            android:id="@+id/editTextSearch"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="15dp"
            android:layout_marginRight="15dp"
            android:layout_marginTop="5dp"
            android:background="@drawable/rounded_edges"
            android:ellipsize="end"
            android:ems="15"
            android:hint="Search"
            android:singleLine="true"
            android:textSize="15dp" >

            <requestFocus />
        </EditText>

        <ImageButton
            android:id="@+id/imageButtonSearch"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_centerInParent="false"
            android:layout_centerVertical="true"
            android:layout_gravity="center"
            android:layout_marginRight="25dp"
            android:background="@null"
            android:src="@drawable/ic_action_search" />
    </RelativeLayout>

    <ListView
        android:id="@+id/groupsList"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="82"
        android:background="@android:color/white"
        android:cacheColorHint="#00000000" >
    </ListView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:48:48.240

你在哪里扩展超类`Activity`？onCreate() 是此类中的一个方法，您可以覆盖它，请参阅[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# uiview - Xcode 4.5 的 UIStoryboard 应用程序中不显示广告横幅

> ID：13698207
> 
> 赞同：0
> 
> 时间：2012-12-04T07:44:32.713
> 
> 标签：uiview, uiviewcontroller, ios6, admob, xcode4.5

我已经使用 Xcode 4.5 创建了基于选项卡的应用程序。我还在这个应用程序中使用了 ARC 和故事板。

现在，在一个视图控制器中，我使用以下代码添加了广告横幅。但这不是显示。

```
 CGPoint origin = CGPointMake(0.0,
                             self.view.frame.size.height -
                             CGSizeFromGADAdSize(kGADAdSizeBanner).height);
banner = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner origin:origin];
banner.adUnitID =  @"a150b2168c416af" ;//@"2d4ff087826f4ba5";
banner.delegate = self;
banner.rootViewController = self;
[self.view addSubview:banner];
[banner loadRequest:[GADRequest request]]; 
```

那么，如何在这个应用程序中展示广告呢？以及如何在 iPhone 5 和 iPhone 4 屏幕上管理此广告视图？

我在这个应用程序中使用了 AdMob SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:24:24.320

也许您的横幅低于视图？试试这个强制它在上面：

```
[self.view bringSubviewToFront:banner] 
```

# java - 如何使用 ImageIcon 制作可拖动的组件

> ID：13698217
> 
> 赞同：2
> 
> 时间：2012-12-04T07:45:18.077
> 
> 标签：java, swing, draggable, jlabel, layout-manager

我正在尝试为国际象棋游戏构建用户界面。我使用了一个充满**JLabels的****GridBagLayout**，棋子是**JLabels**的**ImageIcons**。

 ******现在我想通过在棋盘上拖动来移动棋子。有没有办法用**ImageIcons**做到这一点？或者有没有更好的方法来解决这个问题？

编辑：这是一个示例代码。您会注意到您可以移动 iconImage，但它不会用鼠标“拖动”。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.HashMap;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MainDebug extends JFrame implements MouseListener {

    private JPanel BoardPanel;

    private String buffercase_mousepressed;
    private String buffercase_mouseentered;

    private JLabel A8 = new JLabel("A8");
    private JLabel B8 = new JLabel("B8");

    private HashMap componentMap;

    private ImageIcon RookIcon = createImageIcon("50px-Rook.png", "Rook");

    public MainDebug(String name) {
        super(name);
        setResizable(true);

    }

    private ImageIcon createImageIcon(String path, String description) {

        java.net.URL imgURL = getClass().getResource(path);
            if (imgURL != null) {
                return new ImageIcon(imgURL, description);
            } else {
                System.err.println("Couldn't find file: " + path);
                return null;
            }
    }

    public void addComponentsToPane(final Container pane) {

        BoardPanel = new JPanel();
        BoardPanel.setLayout(new GridBagLayout());

        GridBagConstraints c = new GridBagConstraints();
        Dimension dim50 = new Dimension(50,50);

        A8.setOpaque(true);
        A8.setBackground(Color.white);
        A8.setPreferredSize(dim50);
        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 0;
        c.gridy = 0;
        BoardPanel.add(A8,c);
        A8.setName("A8");
        A8.addMouseListener(this);

        B8.setOpaque(true);
        B8.setBackground(Color.lightGray);
        B8.setPreferredSize(dim50);
        B8.setName("B8");
        c.gridx=1;
        BoardPanel.add(B8,c);
        B8.addMouseListener(this);

        A8.setIcon(RookIcon);

        pane.add(BoardPanel, BorderLayout.CENTER);

        createComponentMap();

    }

    private void createComponentMap() {
        componentMap = new HashMap<String,Component>();

        int max_components = BoardPanel.getComponentCount();
        //Component[] components = BoardPanel.getComponentCount();
        //Component[] components = BoardPanel.getContentPane().getComponents();
        for (int i=0; i < max_components; i++) {
                componentMap.put(BoardPanel.getComponent(i).getName(), BoardPanel.getComponent(i));
        }
    }

    public Component getComponentByName(String name) {
        if (componentMap.containsKey(name)) {
                return (Component) componentMap.get(name);
        }
        else return null;
}

    public void mousePressed(MouseEvent e) {

        buffercase_mousepressed = e.getComponent().getName();
    }

    public void mouseReleased(MouseEvent e) {

        moveIcon(buffercase_mousepressed,buffercase_mouseentered);
    }

    public void mouseEntered(MouseEvent e) {

        buffercase_mouseentered = e.getComponent().getName();
    }

    public void mouseExited(MouseEvent e) {

    }

    public void mouseClicked(MouseEvent e) {

    }

    public void moveIcon(String A, String B){

        if ((A != null) && (B != null)){

            JLabel Ja = (JLabel)getComponentByName(A);
            JLabel Jb = (JLabel)getComponentByName(B);

            Icon iconeA = Ja.getIcon();
            Icon iconeB = Jb.getIcon();

            if (iconeA != null && iconeB == null){

                Ja.setIcon(null);
                Jb.setIcon(iconeA);

            }

        }

        buffercase_mousepressed = null;
        buffercase_mouseentered = null;
    }

    private static void createAndShowGUI() {
        //Create and set up the window.
        MainDebug frame = new MainDebug("Test interface");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //Set up the content pane.
        frame.addComponentsToPane(frame.getContentPane());
        //Display the window.
        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:29:05.933

几年前，我编写了一个框架来自定义 Swing 控件。

也许您可以将其用作开始并针对您的用例进行调整。

教程： [http ://softsmithy.sourceforge.net/lib/current/docs/tutorial/swing/customizer/index.html](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/swing/customizer/index.html)

Java 文档：

[http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/index.html](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/index.html)

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-swing-customizer</artifactId>  
    <version>0.3</version>  
</dependency> 
```

您可能希望实现一个替代[CustomizerLayout](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/org/softsmithy/lib/swing/customizer/layout/CustomizerLayout.html)以用棋盘布局替换[InfiniteTableLayout](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/org/softsmithy/lib/swing/customizer/layout/InfiniteTableLayout.html)，也可能扩展[AbstractCustomizerLayout](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/org/softsmithy/lib/swing/customizer/layout/AbstractTableLayout.html)。

您可以使用[JXIconCustomizer](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/org/softsmithy/lib/swing/customizer/JXIconCustomizer.html)来支持图像/图标。您可能还想从 JXIconCustomizer 的可自定义属性集中删除“宽度”和“高度”，以防止用户更改图像的大小：[http ://softsmithy.sourceforge.net/lib/current/docs /api/softsmithy-lib-swing-customizer/org/softsmithy/lib/swing/customizer/AbstractCustomizer.html#getCustomizableProperties%28%29](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/org/softsmithy/lib/swing/customizer/AbstractCustomizer.html#getCustomizableProperties%28%29)

您可以在此处找到有关最新版本的更多信息：http: [//puces-blog.blogspot.ch/2012/11/news-from-software-smithy-version-03.html](http://puces-blog.blogspot.ch/2012/11/news-from-software-smithy-version-03.html)

如果您觉得这种方法由于某种原因对您不起作用，您可以查看源代码（该库是开源的）以获得一些起点：

[http://softsmithy.hg.sourceforge.net/hgweb/softsmithy/lib/main-golden/file/6171c01d6fd0/softsmithy-lib-swing-customizer](http://softsmithy.hg.sourceforge.net/hgweb/softsmithy/lib/main-golden/file/6171c01d6fd0/softsmithy-lib-swing-customizer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:12:37.123

好吧，这是我对你的问题的小摇摆......

![在此处输入图像描述](../Images/5738f646811fa5b91ef58b6a118a08d5.png)

`GridBagLayout`现在，我设计了自己的布局管理器，而不是使用，它可以让我指定一块应该放置的“网格”位置，并允许电路板和布局管理器计算该块将出现的物理位置。就个人而言，我认为您会发现它比使用`GridBagLayout`.

代码有两种模式。它有一个“对齐”模式，这将导致棋子在开始拖动时想要“吸附”到网格和一个“自由”模式，这将允许棋子在你拖动时在棋盘上“滑动” ...

如果您选择继续使用`GridBagLayout`，则基本拖动过程不会改变。您可以使用[`GridBagLayout#setConstraint`](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagLayout.html#setConstraints%28java.awt.Component,%20java.awt.GridBagConstraints%29)来修改给定组件的约束

```
public class Chess {

    public static void main(String[] args) {
        new Chess();
    }

    public Chess() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new Board());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public static final int GRID_SIZE = 50;
    public static final boolean SNAP_TO_GRID = false;

    public class Board extends JPanel {

        private BufferedImage board;
        private Point highlightCell;

        public Board() {
            setLayout(new BoardLayoutManager());
            int width = GRID_SIZE * 8;
            int height = GRID_SIZE * 8;
            board = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = board.createGraphics();
            g2d.setColor(Color.WHITE);
            g2d.fill(new Rectangle(0, 0, width, height));
            g2d.setColor(Color.BLACK);
            for (int row = 0; row < 8; row++) {
                int xPos = (row % 2 == 0) ? GRID_SIZE : 0;
                for (int col = 0; col < 8; col += 2) {
                    g2d.fill(new Rectangle(xPos, row * GRID_SIZE, GRID_SIZE, GRID_SIZE));
                    xPos += (GRID_SIZE * 2);
                }
            }
            JLabel piece = new JLabel();
            try {
                piece.setIcon(new ImageIcon(ImageIO.read(getClass().getResource("/Luke.png"))));
            } catch (IOException ex) {
                piece.setBackground(new Color(255, 0, 0, 64));
                piece.setOpaque(true);
            }

            add(piece, new Point(0, 0));

            MouseHandler mouseHandler = new MouseHandler(this);
            addMouseListener(mouseHandler);
            addMouseMotionListener(mouseHandler);

        }

        protected Rectangle getBoardBounds() {
            return new Rectangle(getBoardOffset(), new Dimension(GRID_SIZE * 8, GRID_SIZE * 8));
        }

        public Point gridToPoint(Point grid) {
            Point p = new Point();
            if (grid != null) {
                Point offset = getBoardOffset();
                p.x = grid.x * GRID_SIZE + offset.x;
                p.y = grid.y * GRID_SIZE + offset.y;
            }
            return p;
        }

        public Point pointToGrid(Point p) {
            Point grid = null;
            Rectangle board = getBoardBounds();
            if (board.contains(p)) {
                p.x = p.x - board.x;
                p.y = p.y - board.y;

                grid = new Point();
                grid.x = p.x / GRID_SIZE;
                grid.y = p.y / GRID_SIZE;
            }
            return grid;
        }

        public void setPieceGrid(Component comp, Point grid) {
            ((BoardLayoutManager) getLayout()).setPieceGrid(comp, grid);
            invalidate();
            revalidate();
            repaint();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(GRID_SIZE * 8, GRID_SIZE * 8);
        }

        protected Point getBoardOffset() {
            int width = getWidth();
            int height = getHeight();
            Point p = new Point();
            p.x = (width - board.getWidth()) / 2;
            p.y = (height - board.getHeight()) / 2;

            return p;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            Point p = getBoardOffset();
            g2d.drawImage(board, p.x, p.y, this);
            if (highlightCell != null) {
                Point cell = gridToPoint(highlightCell);
                Rectangle bounds = new Rectangle(cell.x, cell.y, GRID_SIZE, GRID_SIZE);
                g2d.setColor(Color.RED);
                g2d.draw(bounds);
            }
            g2d.dispose();
        }

        public void setHightlightCell(Point p) {
            if (highlightCell != p) {
                highlightCell = p;
                repaint();
            }
        }

    }

    public class MouseHandler extends MouseAdapter {

        private Component dragComponent;
        private Board board;
        private Point dragOffset;

        public MouseHandler(Board board) {
            this.board = board;
        }

        public Board getBoard() {
            return board;
        }

        @Override
        public void mousePressed(MouseEvent e) {
            Component comp = getBoard().getComponentAt(e.getPoint());
            if (comp != null) {
                dragComponent = comp;
                dragOffset = new Point();
                dragOffset.x = e.getPoint().x - comp.getX();
                dragOffset.y = e.getPoint().y - comp.getY();
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            if (dragComponent != null) {
                Board board = getBoard();
                Point p = board.pointToGrid(e.getPoint());
                System.out.println(p);
                board.setPieceGrid(dragComponent, p);

                dragComponent = null;
                board.setHightlightCell(null);
            }
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            if (dragComponent != null) {
                Board board = getBoard();
                Point grid = board.pointToGrid(e.getPoint());
                if (SNAP_TO_GRID) {
                    Point p = board.gridToPoint(grid);
                    dragComponent.setLocation(p);
                } else {
                    Point dragPoint = new Point();
                    dragPoint.x = e.getPoint().x - dragOffset.x;
                    dragPoint.y = e.getPoint().y - dragOffset.y;
                    dragComponent.setLocation(dragPoint);
                }
                board.setHightlightCell(grid);
            }
        }

    }

    public class BoardLayoutManager implements LayoutManager2 {

        private Map<Component, Point> mapGrid;

        public BoardLayoutManager() {
            mapGrid = new HashMap<>(25);
        }

        public void setPieceGrid(Component comp, Point grid) {
            mapGrid.put(comp, grid);
        }

        @Override
        public void addLayoutComponent(Component comp, Object constraints) {
            if (constraints instanceof Point) {
                mapGrid.put(comp, (Point) constraints);
            } else {
                throw new IllegalArgumentException("Unexpected constraints, expected java.awt.Point, got " + constraints);
            }
        }

        @Override
        public Dimension maximumLayoutSize(Container target) {
            return new Dimension(GRID_SIZE * 8, GRID_SIZE * 8);
        }

        @Override
        public float getLayoutAlignmentX(Container target) {
            return 0.5f;
        }

        @Override
        public float getLayoutAlignmentY(Container target) {
            return 0.5f;
        }

        @Override
        public void invalidateLayout(Container target) {
        }

        @Override
        public void addLayoutComponent(String name, Component comp) {
        }

        @Override
        public void removeLayoutComponent(Component comp) {
            mapGrid.remove(comp);
        }

        @Override
        public Dimension preferredLayoutSize(Container parent) {
            return new Dimension(GRID_SIZE * 8, GRID_SIZE * 8);
        }

        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return new Dimension(GRID_SIZE * 8, GRID_SIZE * 8);
        }

        @Override
        public void layoutContainer(Container parent) {
            Point offset = ((Board) parent).getBoardOffset();
            for (Component comp : parent.getComponents()) {
                Point p = mapGrid.get(comp);
                if (p == null) {
                    comp.setBounds(0, 0, 0, 0); // Remove from sight :P
                } else {
                    int x = p.x * GRID_SIZE + offset.x;
                    int y = p.y * GRID_SIZE + offset.y;
                    comp.setBounds(x, y, GRID_SIZE, GRID_SIZE);
                }
            }
        }
    }    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:46:35.567

> 我想知道最简单的方法

这将是对属性使用标准的 Swing DnD 支持（尽管远不如@Mad 的解决方案花哨:-)，基本上：

*   将板构建为 JLabels 网格
*   根据需要将碎片设置为标签的图标
*   实现一个自定义的 TransferHandler 导出/导入图标属性并控制移动
*   注册一个开始拖动的 mouseListener

就像是：

```
// the shared mouseListener
MouseListener listener = new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        JComponent c = (JComponent) e.getSource();
        TransferHandler handler = c.getTransferHandler();
        handler.exportAsDrag(c, e, TransferHandler.COPY);
    }
};
// the shared TransferHandler
// super supports copy only, so it needs to do the move itself
// taking the lazy way of null the icon on the source 
TransferHandler handler = new TransferHandler("icon") {

    private JComponent source;

    @Override
    public void exportAsDrag(JComponent comp, InputEvent e, int action) {
        super.exportAsDrag(comp, e, action);
    }

    @Override
    public boolean canImport(TransferSupport support) {
        // empty fields only 
        return (((JLabel) support.getComponent()).getIcon() == null) 
                && super.canImport(support); 
    }

    @Override
    protected void exportDone(JComponent source, Transferable data,
            int action) {
        ((JLabel) source).setIcon(null);
    }

};
// lazy me: a one row board
JComponent board = new JPanel(new GridLayout(0, 8));
Color[] colors = new Color[] {Color.WHITE, Color.BLACK};
for (int column = 0; column < 8; column++) {
    // filled with labels as fields
    board.add(createField(colors[column % 2], listener, handler));
}
Icon figure = XTestUtils.loadDefaultIcon();
((JLabel) board.getComponent(0)).setIcon(figure);

// create and configure a JLabel as field
private JLabel createField(Color color, MouseListener listener,
        TransferHandler handler) {
    JLabel label = new JLabel();
    label.setOpaque(true);
    label.setBackground(color);
    label.addMouseListener(listener);
    label.setTransferHandler(handler);
    return label;
} 
```******

# java - 环回连接失败

> ID：13698221
> 
> 赞同：6
> 
> 时间：2012-12-04T07:45:44.740
> 
> 标签：java, exception, connection, wrapper, loopback

我可能遇到过 Java 最奇怪的问题之一。我尝试启动一些应用程序，比如 Wrapper（即 I2P 路由器）并得到以下信息：

**-路由器日志的一部分-**

```
03.12.12 21:07:31 ERROR [JobQueue 1/1] p.router.transport.UPnPManager: UPnP start failed - port   conflict?

03.12.12 21:07:31 CRIT  [JobQueue 1/1] ter.transport.ntcp.EventPumper: Error opening the NTCP selector
java.io.IOException: Unable to establish loopback connection
Caused by: java.net.SocketException: Permission denied: listen 
```

**-包装日志的一部分-**

```
2012/12/02 14:28:29 | Unable to bind routerconsole to 127.0.0.1 port 7657: java.net.SocketException: Permission denied: listen failed
2012/12/02 14:28:29 | You may ignore this warning if the console is still available at http://localhost:7657
2012/12/02 14:28:30 | WARNING: Error starting SelectChannelConnector@::1:7657: java.io.IOException: Unable to establish loopback connection
2012/12/02 14:28:30 | java.io.IOException: Unable to establish loopback connection
2012/12/02 14:28:30 | WARNING: Error starting one or more listeners of the Router Console server.
2012/12/02 14:36:41 | CRIT  [istener:7654] er.client.ClientListenerRunner: I2CP error listening to port 7654 - is another I2P instance running? Resolve conflicts and restart 
```

在开发者论坛上，有人告诉我，我可能根本没有环回地址。这不太可能。我有其他使用环回地址的应用程序，我也关闭了 IPv6，将所有必要的选项放在包装器中忽略 IPv6。接下来我尝试在管理员帐户下启动包装器，尝试在管理员帐户下安装包括Java在内的所有东西 - 完全没用。

我没有在任何论坛上找到任何合理的答案。总是关于防火墙。但是我关闭了它，我卸载了它，在管理员帐户下关闭了 Windows 防火墙。

我还在我的 wi-fi 路由器上打开了所有必要的端口。其他程序（如 Privoxy）在环回连接和端口上工作得很好，但是如果我在网上检查一下，我会收到一条消息，说我的所有端口都被阻止了，我认为这是错误的。

我的操作系统是 Windows 7 64bit，我的无线路由器是 Speedport 723v。

我提前感谢大家的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-21T11:58:43.783

I2P 和 jre7u25 也是同样的问题

`wrapper.config`通过添加`-Djava.net.preferIPv4Stack=true`到jawa参数来修复编辑：

```
wrapper.java.additional.5=-Di2p.dir.config="C:\ProgramData\Application Data\i2p" -Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:52:51.553

```
2012/12/02 14:28:29 | Unable to bind routerconsole to 127.0.0.1 port 7657: java.net.SocketException: Permission denied: listen failed
2012/12/02 14:28:29 | You may ignore this warning if the console is still available at http://localhost:7657 
```

问题不在于您没有环回地址。你有它，但你的 Java 进程不允许创建套接字连接。您得到一个`Permission denied`异常，这意味着您的策略文件不允许您的类将套接字绑定到本地端口 7657。

您是否尝试查看 JRE 的策略文件？

尝试使用系统属性运行您的程序（或包装器；不确定您正在运行*什么*......） ：http: [//docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/debugger .html#jsdp](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/debugger.html#jsdp)`java.security.debug`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:01:42.587

好的，我认为至少解决了建立环回连接的步骤。

我想这可能对想要支持 I2P 项目的其他用户有用。

因此，我将 JDK 降级到 1.6，重新安装了所有内容并完全删除了防火墙软件的每个条目（在我的情况下为 Agnitum）。

之后，控制台能够启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-11T08:38:57.873

在**windows**中，尝试重新启动电脑，它对我有用。当应用程序尝试连接到远程数据库并且 Internet 连接丢失时会发生此错误（这是原因之一）。

# android - 对于 SurfaceView，findViewById 返回 null

> ID：13698222
> 
> 赞同：2
> 
> 时间：2012-12-04T07:45:45.057
> 
> 标签：android, surfaceview

在我的 Android 项目中，我使用 SurfaceView 播放视频。但 findViewById 为 SurfaceView 返回 null。

这是我的代码：

MultipleVideoPlayFragmentActivity.java

```
public class MultipleVideoPlayFragmentActivity extends Activity {

    private static final String TAG = "MediaPlayer";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.multi_videos_activity_layout);
    }

} 
```

视频片段.java

```
public class VideoFragment extends Fragment implements
        OnBufferingUpdateListener, OnCompletionListener, OnPreparedListener,
         OnVideoSizeChangedListener, SurfaceHolder.Callback {

    private static final String TAG = "MediaPlayer";

    private MediaPlayer mMediaPlayer;
    private SurfaceView mSurfaceView;
    private SurfaceHolder mSurfaceHolder;
    private boolean mSizeKnown;
    private boolean mVideoReady;
    View v;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        v = inflater.inflate(R.layout.multi_videos_fragment_layout,
            container, false);

         return v;
     }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        mSurfaceView = (SurfaceView) v.findViewById(
                R.id.video_surfaceview);

        mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(this);
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void onBufferingUpdate(MediaPlayer player, int percent) {
        Log.d(TAG, "onBufferingUpdate percent: " + percent);
    }

    public void onCompletion(MediaPlayer player) {
        Log.d(TAG, "onCompletion called");
    }

     public void onVideoSizeChanged(MediaPlayer player, int width, int height) {
        Log.v(TAG, "onVideoSizeChanged called");
        if (width == 0 || height == 0) {
            Log.e(TAG, "invalid video width(" + width + ") or height(" + height
                + ")");
            return;
        }

        mSizeKnown = true;
        if (mVideoReady && mSizeKnown) {
            startVideoPlayback();
        }
    }

    public void onPrepared(MediaPlayer player) {
        Log.d(TAG, "onPrepared called");

        mVideoReady = true;
        if (mVideoReady && mSizeKnown) {
            startVideoPlayback();
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int i, int j, int k) {
        Log.d(TAG, "surfaceChanged called");
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.d(TAG, "surfaceDestroyed called");
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "surfaceCreated called");

        try {
            mMediaPlayer = new MediaPlayer();
            AssetFileDescriptor afd = getActivity().getAssets().openFd(
                    "sample.3gp");
            mMediaPlayer.setDataSource(afd.getFileDescriptor(),
                    afd.getStartOffset(), afd.getLength());
            mMediaPlayer.setDisplay(mSurfaceHolder);
            mMediaPlayer.prepare();
            mMediaPlayer.setOnBufferingUpdateListener(this);
            mMediaPlayer.setOnCompletionListener(this);
            mMediaPlayer.setOnPreparedListener(this);
            mMediaPlayer.setOnVideoSizeChangedListener(this);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
         } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onPause() {
        super.onPause();
        releaseMediaPlayer();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        releaseMediaPlayer();
    }

    private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    private void startVideoPlayback() {
        Log.v(TAG, "startVideoPlayback");
        mMediaPlayer.start();
     }
} 
```

multi_videos_activity_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical">

    <fragment class="com.example.multivideo.VideoFragment"
         android:id="@+id/video_1_fragment" android:layout_width="0dp"
        android:layout_height="wrap_content" android:layout_weight="1" />

</LinearLayout> 
```

multi_videos_fragment_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<SurfaceView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/video_surfaceview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

我
在 VideoFragment.java 类中的 mSurfaceHolder = mSurfaceView.getHolder() 处得到 nullPointerException。

请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:08:18.053

尝试移动这部分代码：

```
 mSurfaceView = (SurfaceView) v.findViewById(R.id.video_surfaceview); 
```

到你的`onCreateView()`方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T07:58:47.167

我认为您错过了在 onActivityCreate() 方法中调用 onCreateView() 。

# c++ - 使用 Spirit::qi 时如何忽略来自 spirit::Lex 的标记属性？

> ID：13698223
> 
> 赞同：1
> 
> 时间：2012-12-04T07:45:54.710
> 
> 标签：c++, boost-spirit, boost-spirit-qi, boost-spirit-lex

当我使用这个 qi 语法接受来自 Lex 的标记时：

```
pair %=  token(ID_MARKER)
    >> ':'
    >> atom
    >> ','
    >> atom
    ; 
```

结合此融合/元组映射以协助捕获：

```
BOOST_FUSION_ADAPT_STRUCT(
    Client::pair_rec,
    (std::string,      m_dummy  )  // want to rid of this capture of ID_MARKER
    (Client::atom_rec, m_atom_1 )
    (Client::atom_rec, m_atom_2 )
) 
```

一切正常。

*但我想使用`ID_MARKER`just 进行解析；我真的不需要或不想捕捉它。*

所以我试图通过使用忽略该属性`qi::lit`：

```
pair %=  qi::lit( token(ID_MARKER) )
    >> ':'
    >> atom
    >> ','
    >> atom
    ; 
```

连同`m_dummy`从捕获中删除，但我只是得到一堵模板错误墙。

**我应该做什么来清理这个？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:01:02.083

如果没有要测试的代码，我无法确定，但是：

```
pair %=  qi::omit[ token(ID_MARKER) ]
    >> ':'
    >> atom
    >> ','
    >> atom
    ; 
```

应该管用。你也可以`token_def<lex::omit> marker;`在你的词法分析器中添加一个。

# azure - Windows Azure solr 和 hadoop 数据

> ID：13698231
> 
> 赞同：0
> 
> 时间：2012-12-04T07:46:38.747
> 
> 标签：azure, solr, hadoop, lucene, lucene.net

是否可以使用 SOLR 或 lucene 对驻留在 Hadoop 存储中的数据进行索引？数据可以包含任何内容，包括 pdf、doc、docx 等。如何实现？我很困惑。非常感谢任何指导帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:13:53.997

免责声明：我没有使用 Azure 上的 Hadoop 的经验。

基本上，您可以使用以下[代码](http://blog.rajeevsharma.in/2009/06/using-hdfs-in-java-0200.html)从 HDFS 检索每个文件。

之后，您可以使用此内容执行任何操作，例如在 Lucene 中进行索引。为此，请点击以下[链接](http://oak.cs.ucla.edu/cs144/projects/lucene/index.html)

# android - 在 Android OpenGL ES 上堆积具有 alpha 值的纹理的技术

> ID：13698233
> 
> 赞同：0
> 
> 时间：2012-12-04T07:46:43.317
> 
> 标签：android, opengl-es

我正在开发 2D 图形程序，它使用适用于 Android 2.2 及更高版本的 OpenGL。

通常，当半透明的纹理堆积起来时，它会变得像留下的图像。我想先堆积一个纹理，让它像图片一样透明。用Canvas把图片堆起来做成纹理的方式效率低下。OpenGL API有什么办法吗？

![在此处输入图像描述](../Images/39dac3c26e7b7c4a8fbbe7f549823332.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:25:48.703

这只是一个想法，但可能值得尝试：您可能可以在不先混合的情况下绘制前景元素，然后使用“glBlendFuncSeparate”来绘制背景。前景部分应该按照描述绘制你的元素，然后在混合函数中你仍然可以控制你需要多少透明度来将它与背景混合。坏消息是背景是否有更多的元素要绘制。

通常，您应该使用带有绑定纹理的帧缓冲区对象来绘制前景元素。然后在场景中使用绑定的纹理：

（您将必须找到为 Android 替换此功能的方法）

```
 glGenFramebuffers(1, &framebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, resolution, resolution, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texture, 0);
    glBindRenderbuffer(GL_RENDERBUFFER, 0); 
```

这将创建一个画布，您可以在主场景中绘制任何内容，并且可以重用绑定的纹理。请注意，“分辨率”可能需要为 2 的幂。此外，您还需要在绘制之前设置矩阵和视口。

# c - Socket.io + C 套接字

> ID：13698234
> 
> 赞同：1
> 
> 时间：2012-12-04T07:46:54.463
> 
> 标签：c, sockets, socket.io

我正在用 C 编写一个服务器，我想知道是否可以使用 html 作为我的客户端，并在客户端使用 socket.io 通过套接字与 C 中的服务器通信。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:51:14.880

对的，这是可能的。服务器/客户端使用哪种语言编写并不重要。它们只是发送/接收网络流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:51:34.607

当然可以。它们只是数据传输，无论客户端/服务器端使用什么语言。

# node.js - http代理nodemailer node.js

> ID：13698235
> 
> 赞同：1
> 
> 时间：2012-12-04T07:46:58.423
> 
> 标签：node.js, proxy, nodemailer

我在一个有 http 代理的网络上使用**node.js**和**nodemailer**。**当**我在另一个网络上（一个没有 http 代理的网络）时，电子邮件被发送（通过 nodemailer）。

 **有没有办法让**nodejs**在在线发送请求时使用**http代理？或者****nodemailer**中是否有设置可以让我为http代理设置主机和端口？**

# magento - 使用自定义选项将产品添加到购物车

> ID：13698236
> 
> 赞同：4
> 
> 时间：2012-12-04T07:46:59.807
> 
> 标签：magento, product, cart

我必须创建一个（虚拟的、简单的）产品，然后以编程方式添加到购物车，到目前为止我已经这样做了。现在我必须在此产品添加到购物车时设置自定义选项。但什么也没发生。这是我的代码

```
 $product = Mage::getModel('catalog/product')->load($product_id);

    $cart = Mage::getModel('checkout/cart');
    $cart->init();

    $params = array(
        'product' => $product->getId(), // This would be $product->getId()
        'qty' => 1,
        'options' => array(
            34 => "value",
            35 => "other value",
            53 => "some other value"
        )
    );      

    try {   
        $cart->addProduct($product, new Varien_Object($params));
        Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
        $cart->save();
    }
    catch (Exception $ex) {
        echo $ex->getMessage();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:40:33.170

这是我想出的成功代码。

```
$a_options = array(
    'options' => array(
         'label' => 'Choice',
         'value' => $pkg_selected_products,
    )
);

$quoteItem->addOption(new Varien_Object(
    array(
        'product' => $quoteItem->getProduct(),
        'code' => 'additional_options',
        'value' => serialize($a_options)
    )
));

$quote->addItem($quoteItem);
$quote->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T17:06:49.823

我在使用日期自定义选项字段时遇到问题，通过我的控制器功能添加产品。

所以我必须以 Magento 方式破坏/爆炸，并将其放在参数上`AddProduct()`，如下所示。

```
 try {
        $cart = Mage::getModel('checkout/cart');
        $previousItemCount = $cart->getQuote()->getItemsCount();

        if ($previousItemCount <= 0) {
            $cart->init();
        }

        $params = $this->getRequest()->getParams();
        $product = Mage::getModel('catalog/product')->load($params['product_id']);

        $date = explode('/', $params['product_dtinvoice']);
        $date = array(
            'month' => $date[0],
            'day' => $date[1],
            'year' => $date[2],
        );

        $cart->addProduct(
            $product,
            new Varien_Object(array(
                'product' => $product->getId(),
                'qty' => 1,
                'options' => array(
                    '4' => array(
                        'month' => $date['month'],
                        'day' => $date['day'],
                        'year' => $date['year']
                    ),
                    '2' => $params['product_ean'],
                    '3' => $params['product_serialnumber'],
                    '1' => $params['product_seller'],
                ),
            ))
        );

        $cart->save();

        if ($previousItemCount < $cart->getQuote()->getItemsCount()) {
            $return = array('result' => true, 'msg' => '');
        } else {
            $return = array('result' => false, 'msg' => 'Did not possible to add this product to cart. Please contact the administrator');
        }

        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($return));
    } catch(Exception $e) {
        Mage::throwException($e->getMessage());
    } 
```

# database - 为什么 Windows 8 商店应用程序对基于业务线/数据的应用程序的支持如此之少？

> ID：13698241
> 
> 赞同：3
> 
> 时间：2012-12-04T07:47:15.413
> 
> 标签：database, windows-store-apps

所以基本上没有用于 Windows 商店应用程序的 EF 或 ADO.NET。如果我错了，请纠正我，但我所有的研究都表明需要使用 XML 或 sqlite。我根本没有使用过 sqlite，所以也许我只需要再研究一下。

我很乐意与 EF 合作，但不明白为什么微软不允许他们花费数年开发的技术被排除在 Windows 商店应用程序之外。有谁知道这个决定背后的主要原因？很多用户都在说“啊，但你可以只托管你的数据”，实际上我们不能。我查看过的每个云系统的条款和协议都不能在我们的组织中使用。此外，我们还有仅在一段时间内连接到互联网的盒子，仅用于同步数据。所以它基本上将数据拉入本地数据库然后断开连接。然后，用户可以继续在系统上工作，并且只会重新连接以进行上传或下载同步。

所以基本上我只是想知道为什么微软用 xml 0.o 或 sqlite 替换了它的一些核心数据技术

我们可能只是将完整的 WPF 作为桌面应用程序，但这并不理想。“地铁”应用程序非常用户友好，我们可以很快让新员工在系统上工作

# cakephp - 在 cakephp 中验证 textarea

> ID：13698244
> 
> 赞同：1
> 
> 时间：2012-12-04T07:47:41.087
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我想验证 textarea 是否为空！但此代码不起作用，这并没有向我显示来自模型的验证错误消息！我的代码如下，

```
public $validate = array(
    'address' => array(
        'rule' => array('validateAddress'),
        'message'  => 'Address is required',
    ),
);    

public function validateAddress() {
    if(empty($this->data[$this->alias]['address'])) {
        debug('hi');
        return true;
    }
    return true;
} 
```

}

请帮助我在 cakephp 中进行 textarea 验证！欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:59:55.450

您的自定义验证规则始终返回`true`. 它应该`false`在验证失败时返回：

```
public function validateAddress() {
    if(empty($this->data[$this->alias]['address'])) {
        //debug('hi');
        return false;
    }
    return true;
} 
```

也就是说，对于这样一个简单的规则，您应该使用核心验证规则`notempty`：

```
public $validate = array(
    'address' => array(
        'rule'    => 'notEmpty',
        'message' => 'Address is required'
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:00:29.703

你总是回来`true`。所以它总是会验证。尝试以下操作：

```
public function validateAddress() {
    if(empty($this->data[$this->alias]['address'])) {
        debug('hi');
        return false;
    }
    return true;
} 
```

# javascript - 有没有办法使用 $(document.elementFromPoint(x, y)).click(); 单击超链接 或类似的东西？

> ID：13698245
> 
> 赞同：2
> 
> 时间：2012-12-04T07:47:41.267
> 
> 标签：javascript, jquery

我正在编写一个具有屏幕外 uiwebview 的 iOS 应用程序，为了能够与之交互，我需要在 JavaScript 中模拟鼠标点击。我已经设法使用`$(document.elementFromPoint(x, y)).click();`能够单击 JavaScript 按钮，但我需要一种能够使用某种坐标单击超链接的方法。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:24:22.373

`<a>`我认为您可以通过以下代码在链接上发起点击事件：

```
var event = document.createEvent("MouseEvents");
event.initEvent("click", true, true);
document.elementFromPoint(x, y).dispatchEvent(event); 
```

演示：http: [//jsfiddle.net/7herR/2/](http://jsfiddle.net/7herR/2/)

不确定浏览器的兼容性，但至少在 Firefox 上进行了测试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T07:53:53.087

您应该能够获得对该元素的引用，然后调用`window.location = $("a").attr("href");`或`window.open($("a").attr("href"));`

[http://jsfiddle.net/RaT6r/](http://jsfiddle.net/RaT6r/)使用您自己的方法的示例

# python - python语法错误

> ID：13698252
> 
> 赞同：-2
> 
> 时间：2012-12-04T07:48:10.340
> 
> 标签：python

我刚开始学python，代码有一些错误，无法运行。所以你能帮我解决这个问题吗？表明

```
File "ex2.py", line 21
if isRobotRecord(line)
                     ^
SyntaxError: invalid syntax 
```

### ex2.py

```
import time
robot_emails = ["googlebot@google.com"]
robot_emails.append("66.249.74.228")
robot_emails.append("61.147.110.22")
robot_emails.append("61.147.110.21")
robot_emails.append("61.147.112.231")
f = open("/opt/CLiMB/Storage1/log/vsftp.log")
def isRobotRecord(line):
    for email in robot_emails:
            if email in line.split("Client")[1]:
                    return False
    return True
def OnlyRecent(line):
    if  time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y")> time.gmtime(time.time()-(60*60*24*7)):
        return True
    return False
filename= time.strftime('%Y%m%d')+'.log'
f1= open(filename,'w')
for line in f:
    if OnlyRecent(line):
            if isRobotRecord(line)
                    print line
                    f1.write(line)
f.close()
f1.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:49:29.833

您在该行的末尾缺少一个冒号：

```
if isRobotRecord(line): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:50:12.837

至少，您需要`:`在该`if`语句的末尾添加 a。这就是导致您的错误的原因，类似于以下成绩单：

```
pax> cat good.py 
for plugh in (1,2,3):
    print plugh

pax> python good.py 
1
2
3

pax> cat bad.py 
for plugh in (1,2,3)
    print plugh

pax> python bad.py 
  File "bad.py", line 1
    for plugh in (1,2,3)
                       ^
SyntaxError: invalid syntax 
```

您可能还想查看您的缩进 - 看起来该`if` 语句可能缩进了太多次。尽管您似乎在其他地方最多使用*了四个*，但它与上一行之间有*八个空格差异。*

 *在缩进如此重要的语言中，您必须特别小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:58:06.143

您需要在以 if、else、elif、while、for、def、class 等开头的每行末尾加上 ':' 字符。此外，我建议您在编写 python 时尝试遵守[此规则](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html)*

# java - 我可以使用java程序限制Windows登录吗？

> ID：13698258
> 
> 赞同：0
> 
> 时间：2012-12-04T07:48:24.647
> 
> 标签：java, login-script

我想使用 java 代码限制系统的 Windows 登录，以便我可以在用户登录系统之前执行特定数量的任务。

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:09:20.250

任何 Java 程序都需要 JVM 才能运行。正确的？

因此，在执行您的***Java 代码***之前，您需要运行一个 JVM 并在其上加载您的程序。

我不知道您的*Java 代码*是做什么的，也不知道您是如何编写它的。我假设你知道你将如何执行你的*任务*然后让用户登录（外行的方法是禁用 KeyInput 和 mouseInputs ，因此在你的程序完成之前用户将无法做任何事情）。

现在回到如何启动 JVM 并将代码加载到其中。

编写一个`Batch`, 启动`JVM`然后从它启动你的 java 程序`Batch`

# emacs - defadvice 可以在原始函数中使用变量吗？

> ID：13698267
> 
> 赞同：1
> 
> 时间：2012-12-04T07:49:07.850
> 
> 标签：emacs, elisp, advising-functions, defadvice

让我以[Emacs Lisp 中的修改示例为例：如何使用 ad-get-arg 和 ad-get-args？](https://stackoverflow.com/questions/2622351/emacs-lisp-how-to-use-ad-get-arg-and-ad-get-args)

```
(defun my-add (a b &optional c)
  (+ a b)
  (unless c
    (setq c 4)))
(defadvice my-add (after my-log-on (a b &optional c) activate)
  (message "my-add a: %s" a)
  (message "my-add: %s" c)) 
```

`(my-add 1 2 3)`将运行良好的输出：

```
my-add a: 1
my-add: 3 
```

但`(my-add 1 2)`无法`c`从原始函数中获取值：

```
my-add a: 1
my-add: nil 
```

我的问题是如何在`defadvice`正文中使用未提供的可选参数（或更一般地说，原始函数中的变量）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:22:37.127

由于`(setq c 4)`from`my-add`改变环境，没有给定参数，我认为你无法得到你想要的。

我最好的选择是使用特殊变量遵循丑陋的方式：

```
(defvar *special*)
(defun my-add (a b &optional c)
  (+ a b)
  (unless c
    (setq c 4)
    (setq *special* 4)))

(defadvice my-add (after my-log-on (a b &optional c) activate)
  (message "my-add a: %s" a)
  (if (null c)
      (message "my-add *special*: %s" *special*)
    (message "my-add: %s" c))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:45:27.417

一般来说，你不能。 `defadvice`（以及 new `advice-add`）旨在为函数添加代码**，**但不允许您访问其内部。

# c# - 删除列表视图中不匹配的项目

> ID：13698269
> 
> 赞同：0
> 
> 时间：2012-12-04T07:49:09.753
> 
> 标签：c#, wpf, listview, textbox

我有一个列表视图和一个搜索文本框。当我在文本框中键入任何字符或符号时，它会将键入的文本与列表框项匹配。如果有任何匹配，则突出显示匹配的项目。在那一点上，我想从列表视图中删除不匹配的项目。只有匹配的项目将保留在列表视图中。你建议我解决什么问题？我的其他代码如下。

```
 private void TxtSearch_PreviewKeyUp(object sender, System.Windows.Input.KeyEventArgs e)
 {
        ListControl lc = getactivListview();
        FindListViewItem(lc);
 }

 private void FindListViewItem(DependencyObject obj)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            ListViewItem lv = obj as ListViewItem;
            if (lv != null)
            {
                HighlightText(lv);
            }
            FindListViewItem(VisualTreeHelper.GetChild(obj as DependencyObject, i));
        }
    }

    private void HighlightText(Object itx)
    {
        if (itx != null)
        {
            if (itx is TextBlock)
            {
                Regex regex = new Regex("(" +TxtSearch.Text + ")", RegexOptions.IgnoreCase);
                TextBlock tb = itx as TextBlock;
                if (TxtSearch.Text.Length == 0)
                {
                    string str = tb.Text;
                    tb.Inlines.Clear();
                    tb.Inlines.Add(str);
                    return;
                }
                string[] substrings = regex.Split(tb.Text);
                tb.Inlines.Clear();
                foreach (var item in substrings)
                {
                    if (regex.Match(item).Success)
                    {
                        Run runx = new Run(item);
                        runx.Background = Brushes.Lime;
                        tb.Inlines.Add(runx);

                        if (tb.IsMouseOver)
                        {
                            tb.IsEnabled = false;
                        }
                    }
                    else
                    {
                        tb.Inlines.Add(item);
                        tb.IsEnabled = false;
                    }
                }

                return;
            }
            else
            {
                for (int i = 0; i < VisualTreeHelper.GetChildrenCount(itx as DependencyObject); i++)
                {
                    HighlightText(VisualTreeHelper.GetChild(itx as DependencyObject, i));
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:06:20.093

好吧，最简单和最自然的方法是在`WPF`其上使用数据绑定和过滤器`ModelView`集合。

例如：

```
public class ModelView 
{
    private IEnumerable<Data> _data = ....
    public string Filtrer {get;set;}

    public IEnumerable<Data> GetData() {

          return FilteredData();
    }

    private IEnumerable<Data> FilteredData()
   {
      if(string.IsNullOrEmpty(Filter))
         return _data;

      return   _data.Where(x=>x...Filter); //SOME CONDITON EXECUTION
   }
} 
```

根据过滤器字符串的缺失或存在，您绑定到查看`GetData()`返回*完整*或*过滤集合的视图。*

就像一个示例如何实现数据绑定`ListView`（这不是一个镜头主题，在这个简单的答案中几乎无法解释），可以看看：[WPF ListView 中的数据绑定](http://www.c-sharpcorner.com/UploadFile/raj1979/DataBinding10042007165025PM/DataBinding.aspx)

# iphone - 将 Gmail 联系人导入 Iphone 应用程序...？

> ID：13698274
> 
> 赞同：0
> 
> 时间：2012-12-04T07:49:35.170
> 
> 标签：iphone, ios, gmail, import-contacts

我是IOS开发平台的新手。我需要将 gmail 联系人导入我的应用程序。我面临着 GData 和一些框架的各种问题。那么，任何人都可以提供演示或参考吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:03:22.867

首先使用 Gdata 框架并[从这里](http://code.google.com/p/gdata-objectivec-client/wiki/GDataObjCIntroduction)下载 Gdata 库。现在，如果在您的项目中使用 gdata 会导致一些错误，那么请[研究一下](http://hoishing.wordpress.com/2011/08/23/gdata-static-library-for-specific-api/)，它将对您有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:01:53.993

我肯定会选择[GData](http://code.google.com/p/gdata-objectivec-client/wiki/GDataObjCIntroduction)并解决您可能遇到的任何问题。

当我尝试使用 iPhone SDK 做类似[的 How To Use Google APIs 时，](http://johntwang.com/blog/2009/06/08/how-to-use-google-apis-with-iphone-sdk/)对我有很大帮助。

# ios - UICollectionView moveItemAtIndexPath:toIndexPath: 问题移动项目不在屏幕上

> ID：13698275
> 
> 赞同：9
> 
> 时间：2012-12-04T07:49:35.867
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我正在尝试在 iOS 6 上的 UICollectionView 中对重新排序的项目进行动画处理。

我写了这段代码：

```
 NSMutableDictionary *from = [NSMutableDictionary dictionaryWithCapacity:self.count];
    for (int ii = 0; ii < self.count; ii++) {
        MyItem item = [self getItemAtIndex:(NSInteger)ii];
        [from setObject:[NSNumber numberWithInt:ii] forKey:[NSNumber numberWithInt:item.id]];
    }

    [self sort];

    [self.collectionView performBatchUpdates:^{
        for (int ii = 0; ii < self.count; ii++) {
            MyItem item = [self getItemAtIndex:(NSInteger)ii];
            NSNumber *prevPos = (NSNumber *)[from objectForKey:[NSNumber numberWithInt:item.id]];
            if ([prevPos intValue] != ii) {
                NSIndexPath *from = [NSIndexPath indexPathForItem:prevPos.intValue inSection:0];
                NSIndexPath *to = [NSIndexPath indexPathForItem:ii inSection:0];
                [self.collectionView moveItemAtIndexPath:from toIndexPath:to];
            }
        }
    } completion:nil]; 
```

因此，首先，我将项目的所有当前位置保存在字典中，然后将项目分类到新位置，然后检查所有项目，并将它们从旧位置移动到新位置。

当所有项目都显示在屏幕上时，这很有效，但如果列表长于 10，这使得某些项目当前不可见（因为它们位于列表的可见部分之上或之下），它会导致这些项目突然弹出在可见索引中存在并在其他地方设置动画，当动画停止时，它们会被隐藏。这看起来真的很奇怪，因为有些项目出现在其他项目之上......

这是 iOS 6 UICollectionView 的问题吗，我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:06:37.403

看起来`UICollectionView`正在以使您的动画看起来很糟糕的方式重用单元格。任何离开屏幕的单元格都可以重复使用。

那么为什么你的动画看起来很时髦呢？

当您移动单元格时，单元格的开始和结束位置以及它是否被隐藏都会自动处理。为了让这些动画看起来不错，您还需要更新数据源，因为代码似乎使用它来确定动画期间单元格应该在哪里开始和结束。

在调用索引更新块之前，请确保您的数据源已使用新的索引位置进行更新。这样一来，Apple 的代码就拥有了以更美观的方式移动您的细胞所需的信息。

来自[关于 UICollectionViews 的 Apple 文档](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/CreatingCellsandViews/CreatingCellsandViews.html#//apple_ref/doc/uid/TP40012334-CH7-SW7)：

> 要插入、删除或移动单个部分或项目，您必须执行以下步骤：
> 
> 1.  更新数据源对象中的数据。
> 2.  调用集合视图的适当方法来插入或删除部分或项目。
> 
> 在通知集合视图任何更改之前更新数据源至关重要。集合视图方法假定您的数据源包含当前正确的数据。如果没有，collection view 可能会从您的数据源接收到错误的项目集，或者请求不存在的项目并使您的应用程序崩溃。

# doctype - DOCTYPE 之前的脚本标签

> ID：13698276
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:49:39.677
> 
> 标签：doctype

我可以这样写：

```
<script>var _XXX = false;</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

还是会导致页面出现问题？

我的意思是脚本将在文档类型之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:57:05.240

首先编写 DOCTYPE 无疑是最佳实践。

> 声明必须是 HTML 文档中的第一件事，在标记之前。
> 
> 声明不是 HTML 标签；它是对 Web 浏览器的指示，说明页面是用什么版本的 HTML 编写的。

我想说，这只是有经验的 Web 开发人员为了避免可怕的、难以捉摸的错误而做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T08:05:14.277

是的，您可以在 DOCTYPE 之前编写它，唯一的事情是它会显示一个警告，即脚本标签的位置无效，但无论如何它都会起作用，但是遵循最佳实践，如果您有一个 head 标签，最好在此之后编写它将脚本放在它下面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:34:21.973

Doctype 声明必须是页面的第一部分。Doctype 定义 HTML 的版本。但是在文档类型之前的标签会起作用。不推荐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:00:45.797

它会破坏使用 DOCTYPE 的意义，因为浏览器的行为与您没有提供 DOCTYPE 完全相同，验证器也是如此，除了验证器将报告“流浪 doctype”的额外错误。

# android - 更改android通知消息而无需停止并再次启动服务

> ID：13698278
> 
> 赞同：6
> 
> 时间：2012-12-04T07:49:46.947
> 
> 标签：android

这是我在 android 上`Notification`启动时的方法：`Service`

```
private void showNotification() {
        Notification notification = new Notification(R.drawable.call, "Some text", System.currentTimeMillis());
        Intent intent = new Intent(this, MainActivity.class);

        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
        notification.setLatestEventInfo(this, getString(R.string.notification_label), getString(R.string.notification_text_short), pi);
        notification.flags |= Notification.FLAG_NO_CLEAR;
        startForeground(7331, notification);
    } 
```

以后可以改文字吗。现在是例如`"Some text"`，以后我想更改它而无需停止并再次启动服务。

那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T08:33:21.850

您正在使用通知 ID 7331 来显示通知以及启动服务。只要您发送具有相同 ID 的新通知，它将替换旧通知。

使用它来更新通知

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) context
            .getSystemService(ns);
long when = System.currentTimeMillis();

Notification notification = new Notification("your icon", "your ticker text", when);
/*<set your intents here>*/
mNotificationManager.notify(7331, notification); 
```

# java - 在 Eclipse Indigo 中工作的插件，而不是在 galileo 中

> ID：13698280
> 
> 赞同：1
> 
> 时间：2012-12-04T07:49:56.777
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-indigo, eclipse-3.5

我开发了一个eclipse插件。当我创建项目时，我提供了 3.2 及更高版本支持的 eclipse 版本。该插件在 indigo 中完美运行。但是，不在伽利略工作。

插件.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>

<extension
         id="wizard"
         name="SubApp Config"
         point="org.eclipse.ui.newWizards">
      <category
            name="SubApp CodeGen"
            id="wizard.category1">
      </category>
      <wizard
            name="SubApp CodeGen"
            icon="icons/wizard.gif"
            category="wizard.category1"
            class="com.xyz.code.generator.wizard.SubAppWizard"
            id="wizard.wizard1">
         <description>

         </description>
      </wizard>
</extension>

</plugin> 
```

清单文件

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: com.xyz.article.wizards
    Bundle-SymbolicName: com.citi.code.generator;singleton:=true
    Bundle-Version: 1.0.0
    Require-Bundle: org.eclipse.ui,
     org.eclipse.core.runtime,
     org.eclipse.core.resources,
     org.eclipse.jdt.core,
     org.eclipse.jdt.ui,
     org.eclipse.ui.forms;bundle-version="3.4.1",
     com.citi.code.generator.flavor;bundle-version="1.0.0",
     org.apache.velocity;bundle-version="1.5.0"
    Bundle-ClassPath: .
    Bundle-RequiredExecutionEnvironment: J2SE-1.5,
     JavaSE-1.6 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:51:51.850

根据弗雷德里克的评论，

```
I think Indigo requires java 1.6 and Galileo may not support it. Try to 
change execution environment to 1.5 and recompile and see if that changes
anything. 
```

将执行环境更改为 1.5，并将 JAVA SDK 设置为 Java 1.5。

它解决了这个问题。谢谢

# php - 如何匹配两个字符串？

> ID：13698281
> 
> 赞同：-3
> 
> 时间：2012-12-04T07:49:58.197
> 
> 标签：php

如果我想匹配两个字符串

```
$string1 = 'hello';
$string2 = 'hell'; 
```

或者

```
$string1 = 'hello';
$string2 = 'hellz'; 
```

所以结果应该是这样的“4个字符匹配”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:54:10.557

```
$string1 = 'hello';
$string2 = 'hell';

$matchingCount = 0;
for($n = 0; $n < max(strlen($string1), strlen($string2)); $n++) {
    if(substr($string1, $n, 1) == substr($string2, $n, 1)) {
        $matchingCount++;
    }
}

echo $matchingCount.' Character are match'; 
```

[[[[![jsFiddle](../Images/0755439de910c6a65b68af0326623cc9.png)](http://codepad.org/rMJd42KC)]]]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:04:33.770

```
 <?php 
  $s1='hello';
        $s2='hellz';
        $s1_array=str_split($s1);
        $s2_array=str_split($s2);
        $intersect_result=array_intersect($s1_array,$s2_array);
        $matchCount=count($intersect_result);
       echo $matchingCount.' Characters are matched';
        ?> 
```

# algorithm - 1 和 0 数量相等的最大子矩阵

> ID：13698298
> 
> 赞同：6
> 
> 时间：2012-12-04T07:51:47.293
> 
> 标签：algorithm, dynamic-programming

`mxn`给定一个仅包含 0 和 1 的大小矩阵。我需要找到其中包含相同数量的 1 和 0 的最大子矩阵。蛮力方法是`O(m^2*n^2)`我们能做得比这更好吗？
我尝试应用动态编程，但找不到任何最佳子结构。

我相信这里讨论了这个问题的类似一维版本：
[Space-efficient algorithm for find the maximum balance subarray?](https://stackoverflow.com/questions/7381050/space-efficient-algorithm-for-finding-the-largest-balanced-subarray)
它有一个`O(n)`使用一些额外空间的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:05:29.713

该算法假设我们搜索具有连续行和列且具有最大可能的高度和宽度乘积的子矩阵。

从以下预处理开始：

```
A = substitute_zero_with_minus_one(InputMatrix)
B = prefix_sum_for_each_column(A)
C = prefix_sum_for_each_row(B) 
```

现在对每对行 (i, j) 执行以下操作：

```
for each column k:
  d = C[k, j] - C[k, i]
  if h[d] not empty:
    if (k - h[d]) * (j - i) is greater than best result:
      update best result
  else:
    h[d] = k 
```

时间复杂度为 O(N ² * M)，额外空间为 O(N * M)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:31:50.903

我们假设 m < n，我们可以有一个 O(M * M * N) 算法。如果我们将所有 0 替换为 -1，我们只会找到总和为 0 的最大 submaxtrix。

1.  获取每行中段的总和（i，j），我们定义它们c1，c2，c3....，cn，我们可以通过您引用的算法对其运行O（n）算法。
2.  我们应该执行步骤 1 M * M 次以获得最大的 submaxtrix，其和为 0，因此复杂度为 O(M * M * N)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:13:46.767

我假设仅使用原始矩阵的连续行\列形成子矩阵（即通过删除第一行或最后一行或列）。

这样，一个矩阵可以表示为

```
Mat = {origin(row,col), rowCount, columnCount} 
```

如果原始矩阵的维度为 M x N，则

```
rowCount =  M - row
columnCount = N - col
Mat = {origin(row,col), M - row, N - col}. 
```

变量`row`和`col`分别具有可能的值`M`，`N`这意味着存在`O(MxN)`这样的矩阵。

算法理念

1.  `(m, n)`从队列中弹出矩阵
2.  测试 。如果成功，输出矩阵
3.  构造所有矩阵`(m, n-1)`并`(m-1, n)`放入队列
4.  回到 1。

现在有两点：

*   当您减少维度时，只有 4 个可能的矩阵（2 个通过删除行，2 个通过删除列）
*   您通过删除第一行和最后一行\列来构造一个子矩阵。您只需要删除您删除的行\列的计数，这需要`O(n)`时间`O(m)`。这是动态规划步骤。

这意味着复杂性是`O(max(M,N)MN)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T15:54:45.013

我创建了一个演示搜索算法优化的小应用程序。请让我知道这是否是您正在寻找的。

笔记：

1.  程序创建一个方阵
2.  为了便于阅读，我使用集合来处理数据。我认为处理过程中存在过载，但我只是想指出原理。

这里是：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;

class Program
{
    class Matrix
    {
        public int[][] JaggedInteger2DMatrix { get; set; }

        public List<MatrixCell> Cells { get; set; }
        public List<MatrixLine> Lines { get; set; }

        public int Width { get; set; }
        public int Height { get; set; }

        public Matrix(int size, int seed)
        {
            var r = new Random(seed);
            int[][] jaggedInteger2DMatrix = new int[size][];
            for (int i = 0; i < size; i++)
            {
                jaggedInteger2DMatrix[i] = new int[size];
                for (int j = 0; j < size; j++)
                {
                    jaggedInteger2DMatrix[i][j] = r.Next(2);
                    //Console.Write(jaggedInteger2DMatrix[i][j]+" ");
                }
                //Console.Write("\r\n");
            }
            InitializeMatrix(jaggedInteger2DMatrix);
        }

        public Matrix(int[][] jaggedInteger2DMatrix)
        {
            InitializeMatrix(jaggedInteger2DMatrix);
        }

        private void InitializeMatrix(int[][] jaggedInteger2DMatrix)
        {
            JaggedInteger2DMatrix = jaggedInteger2DMatrix;
            Height = jaggedInteger2DMatrix.GetLength(0);
            Width = jaggedInteger2DMatrix[0].GetLength(0);
            Cells = new List<MatrixCell>();
            Lines = new List<MatrixLine>();
            int horizontalLineCounter = 0;
            MatrixCell matrixCell = null;
            foreach (var horizontalLine in jaggedInteger2DMatrix)
            {
                int verticalLineCounter = 0;
                foreach (var cell in horizontalLine)
                {
                    matrixCell = new MatrixCell()
                    {
                        HorizontalLineIndex = horizontalLineCounter,
                        Value = cell,
                        VerticalLineIndex = verticalLineCounter
                    };
                    Cells.Add(matrixCell);

                    if (Lines.Where(line => line.LineType == Line.Vertical && line.LineIndex == verticalLineCounter).Count() == 0)
                    {
                        var line = new MatrixLine()
                        {
                            LineType = Line.Vertical,
                            LineIndex = verticalLineCounter
                        };
                        Lines.Add(line);
                    }

                    Lines.Where(line => line.LineType == Line.Vertical && line.LineIndex == verticalLineCounter).FirstOrDefault().Cells.Add(matrixCell);

                    if (Lines.Where(line => line.LineType == Line.Horizontal && line.LineIndex == horizontalLineCounter).Count() == 0)
                    {
                        var line = new MatrixLine()
                        {
                            LineType = Line.Horizontal,
                            LineIndex = horizontalLineCounter
                        };
                        Lines.Add(line);
                    }

                    Lines.Where(line => line.LineType == Line.Horizontal && line.LineIndex == horizontalLineCounter).FirstOrDefault().Cells.Add(matrixCell);

                    verticalLineCounter++;
                }
                horizontalLineCounter++;
            }
        }

    }

    class MatrixCell
    {
        public int Value { get; set; }
        public int VerticalLineIndex { get; set; }
        public int HorizontalLineIndex { get; set; }
    }

    class MatrixLine
    {
        public Line LineType { get; set; }
        public int LineIndex { get; set; }
        public List<MatrixCell> Cells { get; set; }
        public MatrixLine()
        {
            Cells = new List<MatrixCell>();
        }
    }

    enum Line
    {
        Horizontal,
        Vertical
    }

    private static void Search(Matrix matrix, bool optimizeCellCount, out IEnumerable<MatrixCell> optimizedSelection, out int iterations)
    {
        optimizedSelection = null;

        var count = 0;
        iterations = 0;
        for (int i = 0; i < matrix.Width; i++)
        {
            for (int j = 1; j <= matrix.Width; j++)
            {
                var selectedVerticalLines = matrix.Lines.Where(line => line.LineType == Line.Vertical).Skip(i).Take(j);
                for (int k = 0; k < matrix.Height; k++)
                {
                    for (int l = 1; l <= matrix.Height; l++)
                    {
                        /**
                         * Here's where the search is optimized
                         **********************************************************************************************
                         */
                        if (optimizeCellCount)
                        {
                            //if the submatrix cell count is smaller than the current count, break the iteration
                            if (count > Math.Min(Math.Abs(matrix.Height - k), l) * Math.Min(Math.Abs(matrix.Height - i), j))
                            {
                                continue;
                            }
                        }
                        /*
                         **********************************************************************************************
                         */
                        iterations++;

                        var selectedHorizontalLines = matrix.Lines.Where(line => line.LineType == Line.Horizontal).Skip(k).Take(l);

                        var horizontalCells = selectedHorizontalLines.Aggregate<MatrixLine, List<MatrixCell>>(new List<MatrixCell>(), (a, b) =>
                        {
                            a.AddRange(b.Cells);
                            return a;
                        });
                        var verticalCells = selectedVerticalLines.Aggregate<MatrixLine, List<MatrixCell>>(new List<MatrixCell>(), (a, b) =>
                        {
                            a.AddRange(b.Cells);
                            return a;
                        });

                        var cells = horizontalCells.Intersect(verticalCells);
                        if (cells.Count() > count)
                        {
                            var sum = cells.Sum(t => t.Value);
                            var cellsCount = cells.Count();
                            if (sum != 0)
                            {
                                if (cellsCount / (double)sum == 2)
                                {
                                    //match
                                    optimizedSelection = cells;
                                    count = cellsCount;

                                }
                            }
                        }
                    }
                }
            }
        }
    }

    private static float GetLineCost(int width, int startPosition, int length)
    {
        float cost = 0;
        for (int i = startPosition; i < length; i++)
        {
            cost += Math.Min(Math.Abs(width - i), i + 1);
        }
        return cost;
    }

    static void Main(string[] args)
    {
        Matrix matrix = new Matrix(20, 1);

        bool optimizeCellCount = true;

        IEnumerable<MatrixCell> optimizedSelection;
        int iterations;

        var watch = new System.Diagnostics.Stopwatch();

        //optimized search
        watch.Start();
        Search(matrix, optimizeCellCount, out optimizedSelection, out iterations);
        watch.Stop();
        Console.WriteLine("Full Optimized Search");
        Console.WriteLine("position: [{0},{1}],[{2},{3}] size : {4} search time : {5} iterations: {6}",
            optimizedSelection.Min(cell => cell.VerticalLineIndex),
            optimizedSelection.Min(cell => cell.HorizontalLineIndex),
            optimizedSelection.Max(cell => cell.VerticalLineIndex),
            optimizedSelection.Max(cell => cell.HorizontalLineIndex),
            optimizedSelection.Count(),
            watch.Elapsed,
            iterations
            );
        watch.Reset();

        //no optimization
        watch.Start();
        Search(matrix, !optimizeCellCount, out optimizedSelection, out iterations);
        watch.Stop();
        Console.WriteLine("Non-Optimized Search");
        Console.WriteLine("position: [{0},{1}],[{2},{3}] size : {4} search time : {5} iterations: {6}",
            optimizedSelection.Min(cell => cell.VerticalLineIndex),
            optimizedSelection.Min(cell => cell.HorizontalLineIndex),
            optimizedSelection.Max(cell => cell.VerticalLineIndex),
            optimizedSelection.Max(cell => cell.HorizontalLineIndex),
            optimizedSelection.Count(),
            watch.Elapsed,
            iterations
            );
        watch.Reset();

        //Console Output:
        /***************************************************************************************
        *   Full Optimized Search
        *   position: [9,1],[18,19] size : 190 search time : 00:00:02.3963657 iterations: 19108
        *   Non-Optimized Search
        *   position: [9,1],[18,19] size : 190 search time : 00:00:05.8385388 iterations: 160000
        ****************************************************************************************/

    }
} 
```

# ajax - 强制调用局部视图内的操作以重新执行

> ID：13698299
> 
> 赞同：1
> 
> 时间：2012-12-04T07:51:49.910
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3

我知道这个问题已经在 SO 上解决了很多次，但是在我的一生中我无法让它发挥作用，所提出的解决方案都没有为我解决问题。所以这是场景，我有一个主窗体，用户输入一些数据并上传图片。上传是通过 ajax 进行的（使用 valum 的文件上传器），因此文件在上传后立即发布到控制器，然后我调整图片服务器端的大小并返回包含在部分视图中的缩略图。局部视图与用户在其中输入详细信息的视图位于同一视图上。这一切都在第一次工作得很好，文件被发送到服务器并生成缩略图并返回到局部视图，但这并没有发生第二次。这是主要形式，`ThumbnailDiv`):

```
@using (Html.BeginForm("Upload","Home", FormMethod.Post)) 
{
    @Html.ValidationSummary(true)
    <fieldset >
      //Some input fields
      //Uploader
            <div id="file-uploader">
                <noscript>
                    <p>Please enable JavaScript to use file uploader.</p>
                </noscript>
            </div>
    </fieldset>
}
        <input type="submit" value="View thumbnail" id="btnGetThumbnail" />
        <div id="ThumbnailDiv" style="float: right;width: 500px; height: 500px;">
        </div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#btnGetThumbnail").click(function (e) {
            e.preventDefault();

            var myDiv = $('#ThumbnailDiv');
            $.ajax({
                url: '@Url.Action("GetThumbnail", "Home")',
                type: 'GET',
                cache: false,
                success: function (result) {
                    myDiv.html(result);
                }
            });

        });
    });

</script> 
```

这是`GetThumbnail`Home 控制器上的操作：

```
 [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
    public ActionResult GetThumbnail()
    {
        ViewBag.TheTime = System.DateTime.Now.ToString();
        return PartialView("~/Views/Home/ThumbnailFinal.cshtml",mvm);
    } 
```

我将当前时间传递给局部视图以检查请求是否正在更新，它们是，但是我似乎无法告诉视图重新渲染缩略图。这是局部视图 ( `ThumbnailFinal.cshmtl`)：

```
@ViewBag.TheTime

<img src="@Url.Action("GenerateThumbnail")" alt="" /> 
```

问题：

图像未刷新，并且`GenerateThumbnail`第二次调用该操作失败。时间正在更新，所以我知道该`GetThumbnail`动作被调用，但是图像没有`GenerateThumbnail`第二次调用该动作。我将如何解决这个问题？有没有更好的方法从局部视图中的动作渲染图像？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T07:59:40.017

看起来图像缓存在客户端上。您可以通过附加随机查询字符串参数来破坏缓存：

```
<img src="@Url.Action("GenerateThumbnail", new { seed = DateTime.UtcNow.Ticks })" alt="" /> 
```

`GenerateThumbnail`或通过使用属性装饰控制器操作来禁用缓存，`[OutputCache]`就像您对`GetThumbnail`操作所做的那样。

# java - 如何记录时间（让玩家忽略伤害 3 秒）？

> ID：13698303
> 
> 赞同：1
> 
> 时间：2012-12-04T07:52:14.063
> 
> 标签：java

我有一些看起来像这样的代码：

```
if there is a collision between player and enemy
    player.health-- 
```

我想做这个：

```
if there is a collision between player and enemy
    player.health--
    wait for 3 seconds 
```

这是为了暂时忽略碰撞，因此玩家的生命值不会立即降至 0。

我将如何为此实现某种计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:24:16.823

要不冻结运动，您必须像这样开始一个新线程

```
private Thread invul;

if(collision && (invul==null || !invul.isAlive())){
    player.health--;
    invul=new Thread(){
        public void run(){
            Thread.sleep(3000);
        }
    };
    invul.start();
} 
```

* * *

或者更简单地节省玩家被击中的时间。

```
private long lastTimeHit= 0;

if(collision && System.currentTimeMillis() > lastTimeHit+3000){
    lastTimeHit= System.currentTimeMillis();
    player.health--;
} 
```

# php - PHP & MySQLi : 计算 PHP 脚本中的查询数

> ID：13698304
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:52:21.227
> 
> 标签：php, mysqli

如何计算 PHP 脚本中的查询数？

或者我是否需要将计数器保存到全局变量中并在`mysqli_query`调用函数时 +1？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-09T12:25:10.877

要计算单个 PHP 运行中的查询数，请创建一个全局计数器并为每个查询调用加一（也可以选择成功的查询计数）

# wcf - WCF 服务总线服务无法启动配置错误“集合已包含相同类型的项目”

> ID：13698305
> 
> 赞同：1
> 
> 时间：2012-12-04T07:52:36.763
> 
> 标签：wcf, wcf-configuration, azureservicebus

我通过服务总线公开我的 windows 服务，下面是我的配置文件。我收到奇怪的错误（它突然开始出现，尽管代码/配置没有变化。它之前工作正常。

One23InsightService 无法启动。异常消息：-无法将值添加到集合中，因为集合已包含相同类型的项目：“Microsoft.ServiceBus.TransportClientEndpointBehavior”。此集合仅支持每种类型的一个实例。参数名称：item 我有两个端点，接口不同，但行为配置相同。

```
 <system.serviceModel>
    <services>
      <service name="One234C.Service.WCFNetTCPContract.InsightSrcDataService">
        <endpoint 
          name="SrcWeb"
          address="sb://xxx.servicebus.windows.net/09C3FA14-D449-4EA0-A829-3B7BD06598C2" 
                  binding="netTcpRelayBinding" 
                  contract="One234C.Service.Interface.IOne23SrcService" 
                  bindingConfiguration="Hybrid" 
                  behaviorConfiguration="sbTokenProvider" />

        <endpoint 
          name="AdminServiceEndpoint"
          address="sb://xxx.servicebus.windows.net/09C3FA14-D449-4EA0-A829-3B7BD06598C2" 
                  binding="netTcpRelayBinding" 
                  contract="One234C.Service.AdminInterface.IOne23AdminService" 
                  bindingConfiguration="Hybrid" 
                  behaviorConfiguration="sbTokenProvider" />
      </service>
    </services>
    <bindings>
      <netTcpRelayBinding>
        <binding name="Hybrid" connectionMode="Hybrid" maxReceivedMessageSize="500000">
          <security mode="None" />
        </binding>
      </netTcpRelayBinding>
    </bindings>
    <behaviors>

      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="False" httpsGetEnabled="False" />
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="sbTokenProvider">
          <transportClientEndpointBehavior>
            <tokenProvider>
              <sharedSecret issuerName="owner" issuerSecret="asdfadfdfasdfasdfasdfsadfsadfsadfsdaf=" />
            </tokenProvider>
          </transportClientEndpointBehavior>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <extensions>
      <!-- In this extension section we are introducing all known service bus extensions. User can remove the ones they don't need. -->
      <behaviorExtensions>
        <add name="connectionStatusBehavior" type="Microsoft.ServiceBus.Configuration.ConnectionStatusElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="transportClientEndpointBehavior" type="Microsoft.ServiceBus.Configuration.TransportClientEndpointBehaviorElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="serviceRegistrySettings" type="Microsoft.ServiceBus.Configuration.ServiceRegistrySettingsElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </behaviorExtensions>
      <bindingElementExtensions>
        <add name="netMessagingTransport" type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingTransportExtensionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="tcpRelayTransport" type="Microsoft.ServiceBus.Configuration.TcpRelayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="httpRelayTransport" type="Microsoft.ServiceBus.Configuration.HttpRelayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="httpsRelayTransport" type="Microsoft.ServiceBus.Configuration.HttpsRelayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="onewayRelayTransport" type="Microsoft.ServiceBus.Configuration.RelayedOnewayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </bindingElementExtensions>
      <bindingExtensions>
        <add name="basicHttpRelayBinding" type="Microsoft.ServiceBus.Configuration.BasicHttpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="webHttpRelayBinding" type="Microsoft.ServiceBus.Configuration.WebHttpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="ws2007HttpRelayBinding" type="Microsoft.ServiceBus.Configuration.WS2007HttpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netTcpRelayBinding" type="Microsoft.ServiceBus.Configuration.NetTcpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netOnewayRelayBinding" type="Microsoft.ServiceBus.Configuration.NetOnewayRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netEventRelayBinding" type="Microsoft.ServiceBus.Configuration.NetEventRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netMessagingBinding" type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </bindingExtensions>
    </extensions>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:56:04.967

我得到了修复，我给两个端点提供了相同的地址，它一定是不同的，我更正了，它现在可以工作了。

# asp.net - 如何使用 HTML 控件将数据插入数据库？

> ID：13698306
> 
> 赞同：0
> 
> 时间：2012-12-04T07:52:46.373
> 
> 标签：asp.net, html, post, get

我有一个 ASP.NET 应用程序和 SQL 服务器数据库。我想使用按钮单击事件将数据插入到我的表中。它是一个 HTML 按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:23:15.993

您的任务有两个组成部分：处理 ASP.NET 按钮单击，以及将数据插入 SQL Server 数据库。

*   对于第一部分，您可以[在 Button.Click 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)的 MSDN 文档中找到示例。

*   对于第二部分，您可以在以下 SO 问题的第一个答案中找到一个简单的示例：[Code for inserting data into SQL Server database using Enterprise library](https://stackoverflow.com/q/6160413/87698)

将两者结合起来留给读者作为练习。:-)

# html - 用于 Chrome 和 Firefox 的 Quirks/BackCompat 模式的纯 CSS 选择器

> ID：13698309
> 
> 赞同：0
> 
> 时间：2012-12-04T07:52:54.780
> 
> 标签：html, css, css-selectors, quirks-mode

在这里，我有一个处于怪癖模式的网站。:( ，我正在将一些页面修补为 CSS1 兼容模式。

我想重用现有的 CSS 并只保留一个版本，但是某些值在 quirks 和 CSS 模式中必须不同，因为它们具有不同的盒子模型。

是否有一个选择器可以判断 HTML 是处于怪癖模式还是标准模式？我知道 IE 有一些 CSS hack，但我需要支持 Chrome 和 Firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:55:00.623

这与其说是 CSS 选择器的怪癖，不如说是 HTML 的怪癖，但`id`and`class`属性在 quirks 模式下变得不区分大小写，这意味着大小写不同的选择器将始终匹配。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/12533926/are-class-names-in-css-selectors-case-sensitive/12533957#12533957)及其第一个脚注。

如果您可以在所有页面中修改您的 HTML，请在您的`html`or`body`元素中添加一个类（类名无关紧要），并*在不同情况下为*您的 quirks 选择器添加相同的类名前缀。这是一个代码示例：

```
<html class="quirks">
<!-- Or: <body class="quirks"> --> 
```

```
#foo {
    width: 480px;
    padding: 10px;
}

/* Capital Q instead of small q, won't match in standards mode with a doctype */
.Quirks #foo {
    width: 500px;
} 
```

这适用于所有浏览器。

如果您无法修改 HTML，那么我认为没有适用于所有浏览器的纯 CSS 解决方案。在以前的 IE 版本中，您可以简单地故意使用 CSS2.1 选择器来隐藏 IE5 怪癖和旧版本的样式（如好的 ol' `html > body`hack），但您不能使用 Chrome 和 Firefox 或新的[可互操作怪癖模式](http://msdn.microsoft.com/en-us/library/ie/hh673550.aspx)来做到这一点在 IE10 中引入，因为它们在怪癖和标准模式下支持相同的高级选择器。

# jquery-ui - catcomplete 的文档

> ID：13698310
> 
> 赞同：4
> 
> 时间：2012-12-04T07:52:55.260
> 
> 标签：jquery-ui

我只是试图找到 catcomplete 的文档。我需要有关如何使用 _renderItem 的手册。我找到了这个[http://jqueryui.com/autocomplete/#categories](http://jqueryui.com/autocomplete/#categories)但似乎没有提到这只是 _renderMenu 的例子

```
 _renderMenu: function( ul, items ) {
        var that = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            that._renderItemData( ul, item );
        });
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T10:39:56.230

`catcomplete`只是一个示例，不幸的是它不是 jQuery UI 的一部分，因此没有`_renderItem`or的文档`renderMenu`。将其视为 jQuery 源代码的一部分。然而，效果可以很容易地从源代码中重现。

要使用 catcomplete，我们只需确保将 a`label`和`category`value 都传递给`catcomplete`，如下所示：

```
var data = [
    { label: "anders", category: "" },
    { label: "andreas", category: "" },
    { label: "antal", category: "" },
    { label: "annhhx10", category: "Products"},
    { label: "annk K12", category: "Products" },
    { label: "annttop C13", category: "Products" },
    { label: "anders andersson", category: "People" },
    { label: "andreas andersson", category: "People" },
    { label: "andreas johnson", category: "People" }
]; 
```

带有空白字符串作为类别的项目将不会被放入类别中并像标准自动完成一样留下。那些给定类别的人将在该类别下进行子菜单。

[Fiddle here](http://jsfiddle.net/4edgp/)（jQuery 示例）

* * *

要为每个项目添加一个类，您可以简单地附加`.addClass(item.category)`到小部件中最后一行代码的末尾`catcomplete`：

```
that._renderItemData( ul, item ).addClass(item.category); 
```

[在这里更新小提琴](http://jsfiddle.net/4edgp/1/)

# php - 如何在 URL 中找到特定单词并更改或删除它？

> ID：13698313
> 
> 赞同：-1
> 
> 时间：2012-12-04T07:53:10.527
> 
> 标签：php, regex, url, preg-replace, preg-match

喜欢这个网址；

```
/?action=proc&pr_id=5 
```

我想找到“pr_id”并将其更改为“pr”=> /?action=proc&pr=5;

但是如果 URL 是这样的；

```
/?action=proc&pr_id=5&pr=5 
```

我想再次找到“pr_id”并将其删除=> /?action=proc&pr=5

我得到网址

```
$url = $_SERVER['REQUEST_URI']; 
```

并想用 preg_match 更改它，但是我该如何为此编写正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:04:42.900

您可以使用 $_GET 来实现您想要的。

```
$get_values = $_GET;

if (isset($get_values['pr_id'])) {
    if (!isset($get_values['pr']) {
        $get_values['pr'] = $get_values['pr_id'];
    } 
    unset($get_values['pr_id']);
} 
```

然后重构 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:13:26.443

如果您想从一个 URL 重定向到另一个 URL，您可以使用 Apache mod_rewrite 模块。

转到您的 Apache 配置文件`httpd.conf`，确保已加载模块

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

然后在您的虚拟主机或 .htaccess （如果它打开）中添加下一行：

```
RewriteEngine On
RewriteRule ^/?action=([a-z]+)&pr_id=([0-9]+)$ /?action$1&pr=$2 [L] 
```

如果您想访问传入的变量`$_SERVER['REQUEST_URI']`，请使用 $_GET 变量。

```
<?
print_r($_GET); // prints the array of all variables coming in GET request
print $_GET['action']; // prints your action variable
print $_GET['pr_id']; // prints your pr_id variable
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:26:31.040

只有正则表达式，只有铁杆！

```
$url = preg_replace('%(&|\?)pr=.?(&|$)%', '$1', $url);
$url = preg_replace('%(&|\?)pr_id=%', '$1pr=', $url);
$url = trim($url, '&'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T08:15:23.080

试试这个。

您正在使用 str_replace() 函数来替换字符串，例如：

```
$url = str_replace('pr_id','pr',$_SERVER['REQUEST_URI']);
echo $url; 
```

# java - 在 OpenLayers 中取消选择选定的标记/矢量

> ID：13698314
> 
> 赞同：0
> 
> 时间：2012-12-04T07:53:20.560
> 
> 标签：java, openlayers, vaadin

我不知道如何在 Vaadin 的 OpenLayer-wrapper 中取消选择选定的向量（点向量或其他向量）。

要启用向量选择，请使用以下方法：

```
VectorLayer pointLayer = new VectorLayer();
pointLayer.setSelectionMode(SelectionMode.SIMPLE); 
```

并监听矢量 onclick 事件，您使用以下方法：

```
pointLayer.addListener(new VectorSelectedListener() {
    @Override
    public void vectorSelected(VectorSelectedEvent event) {
        //do work
    }
}); 
```

并获取当前选择的向量 yoy 使用此方法：

```
Vector selectedVector = pointLayer.getSelectedVector(); 
```

但是如何在单击时取消选择选定的矢量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:04:50.553

我通过按一个按钮来做到这一点。例如：

```
Button btn = new Button();
btn.addListener(new ClickListener() {
    if (selectedVector != null) {
      VectorLayer vl = (VectorLayer) selectedVector.getParent();
      vl.setSelectedVector(null);
    }
}); 
```

# geolocation - 位置数据库的替代 IP

> ID：13698315
> 
> 赞同：3
> 
> 时间：2012-12-04T07:53:20.970
> 
> 标签：geolocation, geoip

是否有任何替代数据库可以与 maxmind 和 ip2location city 数据库竞争？对于 ip 条目，我在这些数据库中得到不同的结果。所以我应该相信哪一个。 [maxmind](http://www.maxmind.com/)数据库中`country, state, city, isp, latitude`的 ip 117.201.195.13是

```
India   Kerala  Pathanamthitta  BSNL    9.2667, 76.7833 
```

但在[ip2location](http://www.ip2location.com/)数据库中，它的

```
India   Kerala  Kottayam    BSNL    9.58333, 76.51667 
```

在[ipaddressapi](http://www.ipaddressapi.com/)中

```
India   Kerala  Vennikulam  BSNL    9.4000 ,76.6667 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:56:50.137

我通常发现商业数据 Maxmind 是更准确的数据之一。

其他选项：

*   [信息狙击手](http://www.infosniper.net/index.php?map_source=1&overview_map=1&lang=1&map_type=1&zoom_level=7&ip_address=117.201.195.13)
*   [InfoChimps](http://www.infochimps.com/documentation/api-reference)（使用 Digital Element 数据）

没有什么是完全准确的，您最好的选择是选择一个强大的提供商并接受不准确之处。MaxMind 对更新非常敏感，我们在尝试更新 InfoChimps 提供的数据时遇到了几次延迟。

（适度相关，我是 WonderProxy 的联合创始人，所以过去几年我一直在处理 GeoIP 数据）

# php - 我怎样才能在价格中保留逗号并计算价格

> ID：13698322
> 
> 赞同：0
> 
> 时间：2012-12-04T07:53:43.497
> 
> 标签：php, codeigniter, codeigniter-2

1）我正在开发一个电子商务网站，我的价格是 190000 美元，但我希望这个价格为 190000 美元（带逗号）如何显示这样

2）美元价值一直在变化我如何计算物品的价格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:06:57.987

在 PHP 中，有一个函数可以格式化价格。

```
number_format() 
```

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:10:04.077

使用如下的php函数。

```
 number_format ( float $number , int $decimals = 0 , string $dec_point = '.' , string $thousands_sep = ',' ) 

```

有关此功能的更多详细信息，请在 php.net 上搜索

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T07:55:24.970

我不确定，但在 c# 中你可以使用字符串格式。这将在 .net 世界中发挥作用

# html - css下拉菜单在悬停时未在顶层显示图像

> ID：13698326
> 
> 赞同：1
> 
> 时间：2012-12-04T07:53:53.820
> 
> 标签：html, css, wordpress

我的菜单是[这样](http://tinkerbin.com/6HfvGExy)的。但在这里我没有使用箭头按钮。在那个菜单中，我在顶层使用了一个箭头。当您将鼠标悬停在该菜单上时，它正在改变颜色。但是当我将鼠标悬停在子菜单上时，箭头在顶层不可见。在这里，我附上了菜单的屏幕截图。这是[现场演示](http://modulesoft.info/projects/valuepayroll/)

在此图像中，您可以看到有箭头图像。这是菜单的正常状态。

![在此处输入图像描述](../Images/ee121a2dc696841156fefb262de3f795.png)

这是顶部菜单的悬停状态。您可以看到顶部箭头图像颜色已更改

![在此处输入图像描述](../Images/ffd9107465387f9ce0456746a3ed2a7b.png)

这是子菜单的悬停状态。在这里，您可以在顶层看到顶部菜单中没有箭头。我想要悬停状态箭头图像在此处的顶部菜单中。

![在此处输入图像描述](../Images/e6c626f76fc662fb8f22b620d3f6bab2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:10:33.770

您应该将以下 css-selector 更改`#access #header-right-menu ul li a:hover > span {`为`#access #header-right-menu ul li:hover a > span {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:01:35.287

css 选择器应该是`#access #header-right-menu .menu > .menu-item:hover > a > span`

# php - 响应代码 401 在通过 php 代码在 Twitter 上发布推文时发生

> ID：13698331
> 
> 赞同：1
> 
> 时间：2012-12-04T07:54:09.220
> 
> 标签：php

我必须将 Twitter 集成到我必须发送推文的应用程序中。我正在使用以下代码，但执行时收到响应代码 401。

如何使用 PHP 向 Twitter 发送推文？

```
 <?php

    $tweet_text = 'Hello Twitter';

    print "Posting...\n";

    $result = post_tweet($tweet_text);

    print "Response code: " . $result . "\n";

    function post_tweet($tweet_text) {

      require_once('tmhOAuth.php');

      $connection = new tmhOAuth(array(
        'consumer_key' => 'xxxxxxxxxxxxxxxx',
        'consumer_secret' => 'xxxxxxxxxxxxxxxx',
        'user_token' => 'xxxxxx-xxx',
        'user_secret' => 'xxxxxxxxxxxxxx',
        'curl_ssl_verifypeer'   => false
      ));

      $connection->request('POST',
        $connection->url('1/statuses/update'),
        array('status' => $tweet_text));

      return $connection->response['code'];
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:23:00.123

响应代码 401 显示您无权执行该操作的时间。您可能提供了错误的凭据，可能是拼写错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:31:49.993

这是您向 API 发布推文的完整代码吗？如果是这样，那么你从哪里得到`user_token`和`user_secret`？

因为错误是`401 Unauthorized`那么我怀疑可能是这种情况。

您可能需要调查[OAuth](http://en.wikipedia.org/wiki/OAuth)，这是您的代码和 Twitter API 之间的一个多步骤过程。

# javafx - Javafx TableView 自定义 CellFactory

> ID：13698333
> 
> 赞同：0
> 
> 时间：2012-12-04T07:54:16.207
> 
> 标签：javafx

我对 java 比较陌生，对编程很老实。我正在研究一个小工具。其中一个功能是伪 ftp 客户端，显示 ftp 主机上的内容，还允许在不同文件夹之间切换。对于文件/文件夹列表，我使用的是 TableView。现在我想调整视觉内容并根据单元格的内容向单元格添加一些图形，如果它是文件还是文件夹。但是当我在 CellFactory 中使用以下代码时，它不仅在填充语句的单元格上设置图形，而且在上下滚动 TableView 时，图形随机出现在不同的单元格上，几秒钟后它崩溃了。

```
 public BorderPane addFTPBorderPane(){

    ftpBorderpane = new BorderPane();
    ftpBorderpane.setPadding(new Insets(0));
    GridPane grid = new GridPane();
    grid.setPadding(new Insets(10));
    grid.setHgap(20);
    grid.setId("simplebluegradient");
    Button getFTPButton = new Button("Verbinden");
    grid.add(getFTPButton, 1, 0);
    ftpBorderpane.setTop(grid);

    VBox vbox = new VBox();
    final TableView<MyFTPFile> ftpTable = new TableView<MyFTPFile>();

    Callback<TableColumn<MyFTPFile,String>, TableCell<MyFTPFile,String>> cellFactory =
            new Callback<TableColumn<MyFTPFile,String>, TableCell<MyFTPFile,String>>() {
                public TableCell<MyFTPFile,String> call(TableColumn<MyFTPFile,String> p) {
                    cell = new TableCell<MyFTPFile, String>() {
                        @Override
                        public void updateItem(String item, boolean empty) {
                            super.updateItem(item, empty);
                            setText(item);
                            if(item.equals("test")){
                                Image folderIcon = new Image(imagesPath+"folder.png");
                                setGraphic(new ImageView(folderIcon));
                            }

                        }

                    };

                    cell.addEventFilter(MouseEvent.MOUSE_CLICKED, new EventHandler<MouseEvent>() {
                        @Override
                        public void handle(MouseEvent event) {
                            if (event.getClickCount() > 1) {
                                cell = (TableCell<MyFTPFile,String>) event.getSource();
                                System.out.println(cell.getTableRow().getItem());
                                try {
                                    MyFTPClient.getInstance().changeFTPdir(cell.getTableRow().getItem());
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                                ftpObservablelist = MyFTPClient.getInstance().getFtpObservableList(); 
                                ftpTable.setItems(ftpObservablelist);

                            }
                        }
                    });

                    return cell;
                }
            };

    ftpTable.setEditable(true);

    TableColumn<MyFTPFile,String> nameColumn = new TableColumn<MyFTPFile,String>("Dateiname");
    nameColumn.setMinWidth(200);
    nameColumn.setCellFactory(cellFactory);
    nameColumn.setCellValueFactory(new PropertyValueFactory<MyFTPFile,String>("name"));

    TableColumn<MyFTPFile,String> sizeColumn = new TableColumn<MyFTPFile,String>("Grösse");
    sizeColumn.setCellValueFactory(new PropertyValueFactory<MyFTPFile,String>("size"));

    TableColumn<MyFTPFile,String> dateColumn = new TableColumn<MyFTPFile,String>("Änderungsdatum");
    dateColumn.setMinWidth(140);
    dateColumn.setCellValueFactory(new PropertyValueFactory<MyFTPFile,String>("date"));

    TableColumn<MyFTPFile,String> rightsColumn = new TableColumn<MyFTPFile,String>("Berechtigungen");
    rightsColumn.setCellValueFactory(new PropertyValueFactory<MyFTPFile,String>("rights"));

    TableColumn<MyFTPFile,String> userColumn = new TableColumn<MyFTPFile,String>("User");
    userColumn.setCellValueFactory(new PropertyValueFactory<MyFTPFile,String>("owner"));

    TableColumn<MyFTPFile,String> groupColumn = new TableColumn<MyFTPFile,String>("Group");
    groupColumn.setCellValueFactory(new PropertyValueFactory<MyFTPFile,String>("group"));

    ftpTable.getColumns().addAll(nameColumn,sizeColumn, dateColumn, rightsColumn, userColumn, groupColumn);

    vbox.getChildren().add(ftpTable);
    ftpBorderpane.setCenter(vbox);

    getFTPButton.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent e){
            try {
                MyFTPClient.getInstance().doConnection(kunde);
                MyFTPClient.getInstance().reqFTPdir();

            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            ftpObservablelist = MyFTPClient.getInstance().getFtpObservableList(); 
            ftpTable.setItems(ftpObservablelist);

        }   
    });

    return ftpBorderpane;       

} 
```

崩溃时出现以下错误：

```
java.lang.NullPointerException
at ch.trusted.java.hcst.gui.GuiTest$19$1.updateItem(GuiTest.java:972)
at ch.trusted.java.hcst.gui.GuiTest$19$1.updateItem(GuiTest.java:1)
at javafx.scene.control.TableCell.updateItem(TableCell.java:539)
at javafx.scene.control.TableCell.indexChanged(TableCell.java:105)
at javafx.scene.control.TableCell$1.invalidated(TableCell.java:93)
at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:155)
at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:100)
at javafx.beans.property.ReadOnlyIntegerWrapper$ReadOnlyPropertyImpl.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:195)
at javafx.beans.property.ReadOnlyIntegerWrapper.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:161)
at javafx.beans.property.IntegerPropertyBase.markInvalid(IntegerPropertyBase.java:130)
at javafx.beans.property.IntegerPropertyBase.set(IntegerPropertyBase.java:163)
at javafx.scene.control.IndexedCell.updateIndex(IndexedCell.java:112)
at com.sun.javafx.scene.control.skin.TableRowSkin.updateCells(TableRowSkin.java:251)
at com.sun.javafx.scene.control.skin.TableRowSkin.doUpdateCheck(TableRowSkin.java:151)
at com.sun.javafx.scene.control.skin.TableRowSkin.layoutChildren(TableRowSkin.java:157)
at javafx.scene.Parent.layout(Parent.java:1018)
at com.sun.javafx.scene.control.skin.TableRowSkin.handleControlPropertyChanged(TableRowSkin.java:110)
at com.sun.javafx.scene.control.skin.SkinBase$3.changed(SkinBase.java:282)
at javafx.beans.value.WeakChangeListener.changed(WeakChangeListener.java:107)
at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:196)
at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:100)
at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:123)
at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:130)
at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:163)
at javafx.scene.control.Cell.setItem(Cell.java:333)
at javafx.scene.control.Cell.updateItem(Cell.java:557)
at javafx.scene.control.TableRow.updateItem(TableRow.java:246)
at javafx.scene.control.TableRow.indexChanged(TableRow.java:92)
at javafx.scene.control.TableRow$1.invalidated(TableRow.java:85)
at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:155)
at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:100)
at javafx.beans.property.ReadOnlyIntegerWrapper$ReadOnlyPropertyImpl.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:195)
at javafx.beans.property.ReadOnlyIntegerWrapper.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:161)
at javafx.beans.property.IntegerPropertyBase.markInvalid(IntegerPropertyBase.java:130)
at javafx.beans.property.IntegerPropertyBase.set(IntegerPropertyBase.java:163)
at javafx.scene.control.IndexedCell.updateIndex(IndexedCell.java:112)
at com.sun.javafx.scene.control.skin.VirtualFlow.setCellIndex(VirtualFlow.java:1596)
at com.sun.javafx.scene.control.skin.VirtualFlow.addLeadingCells(VirtualFlow.java:1049)
at com.sun.javafx.scene.control.skin.VirtualFlow.layoutChildren(VirtualFlow.java:1005)
at javafx.scene.Parent.layout(Parent.java:1018)
at javafx.scene.Scene.layoutDirtyRoots(Scene.java:513)
at javafx.scene.Scene.doLayoutPass(Scene.java:484)
at javafx.scene.Scene.access$3900(Scene.java:169)
at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2199)
at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:363)
at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:460)
at com.sun.javafx.tk.quantum.QuantumToolkit$9.run(QuantumToolkit.java:329)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76) 
```

如果我只是删除包含 setGraphic 的 if 语句，它就可以工作并且不会出现崩溃。

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:56:36.157

项目可以为空（例如在空单元格中）。

写：

```
if (item != null && item.equals("test")) 
```

或另一种进行测试的方法，因为常量字符串永远不会为 null 也不等于 null：

```
if ("test".equals(item)) 
```

您的代码中可能还有其他错误，但在快速查看时似乎很明显。

您可能还[对此问题中的基于行的处理的自定义单元工厂](https://stackoverflow.com/questions/13697115/javafx-tableview-colors)感兴趣。它写得很好。

# watir - 由waitr的execute_script引起的OLE错误代码80020101

> ID：13698335
> 
> 赞同：1
> 
> 时间：2012-12-04T07:54:21.713
> 
> 标签：watir, ole

我刚试过这个：`$browser.execute_script("alert(\"aaa\")")`

然后我收到以下错误：

```
h:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.2.0/lib/watir-classic/page-container.rb:46:in `method_missing': (in OLE method `execScript': ) (WIN32OLERuntimeError)
OLE error code:80020101 in <Unknown>
  Could not complete the operation due to error 80020101.HRESULT error code:0x80020009
  Exception occurred.
    from h:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.2.0/lib/watir-classic/page-container.rb:46:in `rescue in execute_script'
    from h:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.2.0/lib/watir-classic/page-container.rb:39:in `execute_script' 
```

我错过了安装的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:18:39.420

异常意味着运行脚本时发生了 javascript 错误。

虽然修复脚本会更好，但如果您真的想忽略异常，可以将其包装在 begin-rescue 中：

```
begin
    $browser.execute_script("asdfasd") 
rescue WIN32OLERuntimeError
    #Ignore javascript error that occurred
end 
```

当异常发生时，救援会捕获它并允许程序继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:43:46.710

试试单引号是否可以工作：

```
$browser.execute_script("alert('aaa')") 
```

# css - 如何在嵌套无序列表中选择父 li

> ID：13698336
> 
> 赞同：0
> 
> 时间：2012-12-04T07:54:27.463
> 
> 标签：css

您能否告诉我如何使用 CSS3 选择器仅选择父 li？例如，在下面的菜单导航中，我如何将样式应用于上层的所有 li（值为 MainMenu 的父级）

```
<ul>
<li>MainMenu 1
    <ul class="nav">
        <li>SubMenu 1</li>
        <li>SubMenu 2</li>
        <li>SubMenu 3</li>
        <li>SubMenu 4</li>
    <ul>
</li>
<li>MainMenu 2</li>
<li>MainMenu 3</li>
<li>MainMenu 4</li>
</ul> 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:57:00.900

您必须为`id`parent`ul`或包装 that 的元素提供 a `ul`，并基于 that 进行选择`id`，然后覆盖这些属性以“重置”这些s的后代`li`元素：`li`

```
#idOfUl​ > li {
    /* selects first-level li elements */
    color: #f00;
}

#idOfUl > li li {
    /* selects the li descendants of the first-level li elements */
    color: #000;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gs4kQ/)。

* * *

*编辑** 以解决 OP 提出的问题（在对此答案的评论中）：

> 我的 [问题] 是 [that] 我无法将任何`class`或分配`id`给列表。

鉴于此，我建议简单地设置*所有* `li`元素的样式，然后为那些`li`继承自 an 的 s覆盖该样式`li`，如下所示：

```
li {
    color: #f00;
}

li li {
    color: #000;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gs4kQ/1/)。

您也可以使这一点过于复杂，并使用否定伪选择器来设置第一级`li`元素的样式。实际上，这会选择作为元素的直接子`li`元素的直接子元素，该`ul`元素本身是元素的直接子元素，而*不是*`li`元素：

```
*:not(li) > ul > li {
    color: #f00;
}

li li {
    color: #000;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gs4kQ/3/)。

# nfc - NFC/HF 卡可以互换吗？

> ID：13698339
> 
> 赞同：3
> 
> 时间：2012-12-04T07:54:48.330
> 
> 标签：nfc, rfid

我想为使用 RFID 实现多项功能的系统提案指定设备。将来它可能会扩展到包括交易，所以我正在努力寻找合适的技术来使用。

计划是使用被动卡。

HF/NFC 卡/读卡器以相同的频率运行，但它们可以互换使用，例如 HF 读卡器读/写 NFC 卡，反之亦然？

它们在架构层面有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:19:14.153

NFC 是不同标准的集合：ISO 14443-4（A 类和 B 类感应卡）、JIS 6319-4 ( [FeliCa](http://en.wikipedia.org/wiki/FeliCa) ) 和 ISO 18092（NFC 点对点，它使用 ISO 14443 和 JIS 6319-4 的部分内容）。相当多的 NFC 设备也实施 ISO 15693（邻近卡）。这些标准都使用 13.56MHz 的频率。

除此之外，仍有不少遗留系统很常见：MIFARE、Calypso、Picopass、CryptoRF、Legic 等。这些通常符合（部分）ISO 14443-3。

NFC 论坛试图统一这些标准及其使用的各个方面，并在它们之上定义通用标准以实现不同实现的互操作性，例如参见[http://www.nfc-forum.org/specs/spec_list/](http://www.nfc-forum.org/specs/spec_list/)。

存在可以处理所有这些协议的读卡器，但更常见的读卡器只支持一个子集。例如，仅 ISO 14443 或仅 ISO 15693，或 ISO 14443 和 FeliCa 的组合，或（更糟）仅 ISO 14443-3 或仅 ISO 14443-4 Type A。支持您通常只能在（用于) 来自特定制造商的读卡器，例如 MIFARE 的 NXP Semiconductors。

实践中的另一个复杂情况是，当硬件可以支持某些卡时，并不一定意味着随附的软件（驱动程序、支持库）也可以处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:20:18.397

两者，`HF`并以与您所说`NFC`的相同的频率运行。`13.56mhz`实际上，`NFC`使用&`HF`中指定的协议`ISO 14443-A``ISO 14443-B.`

从技术上讲，您可以使用`HF`询问器读取`NFC`卡片（或模拟卡片）。但是你必须深入研究 ISO 标准。我从未见过像你想要的那样工作的“混合”系统。

# javascript - 需要保存哪些复选框将显示为选项

> ID：13698342
> 
> 赞同：0
> 
> 时间：2012-12-04T07:54:59.633
> 
> 标签：javascript, jquery-mobile

我在一个页面上有这些复选框，在另一个页面上我有这些相同的复选框。

```
 <div data-role="content" data-theme="a">    
        <h2>Kies categorieen</h2>
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
                <input type="checkbox" name="categorie-kijk" id="goedkoop-bier-kijk" class="custom" />
                <label for="goedkoop-bier-kijk">Goedkoop bier</label>
                <input type="checkbox" name="categorie-kijk" id="muziek-kijk" class="custom" />
                <label for="muziek-kijk">Muziek</label>
                <input type="checkbox" name="categorie-kijk" id="gezelligheid-kijk" class="custom" />
                <label for="gezelligheid-kijk">Gezelligheid</label>
            </fieldset>
        </div>
        <p><a href="#bekijken2" data-direction="reverse" data-role="button" data-theme="b">Toon</a></p> 

    </div> 
```

现在我想保存下面页面的检查值来影响上面页面的值。当用户单击下面的“Opslaan”按钮时，它应该保存选中的复选框，并且只显示上面页面中的复选框。因此，例如，如果仅选中并保存了 id 为“gezelligheid-fav”的复选框，则上面的页面应该只显示复选框“gezelligheid-kijk”。

```
 <div data-role="content" data-theme="d">    
        <h2>Selecteer favorieten</h2>   
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
                <input type="checkbox" name="categorie-fav" id="goedkoop-bier-fav" class="custom" />
                <label for="goedkoop-bier-fav">Goedkoop bier</label>
                <input type="checkbox" name="categorie-fav" id="muziek-fav" class="custom" />
                <label for="muziek-fav">Muziek</label>
                <input type="checkbox" name="categorie-fav" id="gezelligheid-fav" class="custom" />
                <label for="gezelligheid-fav">Gezelligheid</label>
            </fieldset>
        </div>
        <p><a href="#instellingen" data-role="button" data-inline="true" data-icon="back">Opslaan</a></p>   
    </div> 
```

有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:14:25.623

假设两个组具有相同数量的复选框并且顺序相同，使用 jQuery，将“Opslaan”按钮上的单击事件与此处理程序绑定：

```
function() {
    var cbxs1 = $('input[name="categorie-fav"]'),
        cbxs2 = $('input[name="categorie-kijk"]');
    cbxs1.each(function(index) {
        cbxs2[index].checked = this.checked;
    });
} 
```

# reactiveui - ReactiveCollection 跨线程访问错误

> ID：13698343
> 
> 赞同：0
> 
> 时间：2012-12-04T07:55:09.963
> 
> 标签：reactiveui

我从 ReactiveCollection 示例中获取代码，在 Silverlight 5 中创建了一个简单的搜索应用程序。

但是在返回搜索结果后，当绑定到 ReactiveCollection 'Stuff' 时，我得到一个跨线程错误。当我在 WPF 中运行相同的代码时，它工作正常。如何确保在 UIThread 上完成绑定更新？

```
public class AppViewModel : ReactiveValidatedObject
{
    string _SearchTerm;
    public string SearchTerm
    {
        get { return _SearchTerm; }
        set { this.RaiseAndSetIfChanged(x => x.SearchTerm, ref _SearchTerm, value); }
    }

    public ReactiveAsyncCommand ExecuteSearch { get; protected set; }

    ObservableAsPropertyHelper<ReactiveCollection<string>> _Stuff;
    public ReactiveCollection<string> Stuff
    {
        get { return _Stuff.Value; }
    }

    public AppViewModel()
    {
        ExecuteSearch = new ReactiveAsyncCommand();

        var results = ExecuteSearch.RegisterAsyncFunction(term => DoSearch((string)term));

        this.ObservableForProperty(x => x.SearchTerm)
            .Throttle(TimeSpan.FromMilliseconds(800), RxApp.DeferredScheduler)
            .Select(x => x.Value).DistinctUntilChanged()
            .Where(x => !String.IsNullOrWhiteSpace(x))
            .Subscribe(ExecuteSearch.Execute);

        _Stuff = this.ObservableToProperty(results, x => x.Stuff); 
    }

    public static ReactiveCollection<string> DoSearch(string term)
    {
        return new ReactiveCollection<string>() { "One", "Two", "Three"};
    }
} 
```

这是 XAML

```
<UserControl x:Class="ReactiveUIPlay.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 
Height="350" Width="525">

<Grid Margin="12">
 <Grid.ColumnDefinitions>
  <ColumnDefinition Width="Auto" />
  <ColumnDefinition Width="*" />
  <ColumnDefinition Width="Auto" />
 </Grid.ColumnDefinitions>

 <Grid.RowDefinitions>
  <RowDefinition Height="Auto" />
  <RowDefinition Height="*" />
 </Grid.RowDefinitions>

 <TextBlock FontSize="16" FontWeight="Bold" VerticalAlignment="Center"><Run Text="Search For:"/></TextBlock>
 <TextBox Grid.Column="1" Margin="6,0,0,0" Text="{Binding SearchTerm, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
 <ListBox Grid.ColumnSpan="3" Grid.Row="1" Margin="0,6,0,0" 
             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
             ItemsSource="{Binding Stuff}" /> 
```

这是调用绑定到 Stuff 时的调用堆栈，就在异常之前。

```
>   ReactiveUIPlay!ReactiveUIPlay.AppViewModel.Stuff.get() Line 44  C#
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.dll!System.Windows.CLRPropertyListener.Value.get() + 0x32 bytes  
System.Windows.dll!System.Windows.PropertyAccessPathStep.Value.get() + 0x14 bytes   
System.Windows.dll!System.Windows.PropertyPathListener.ReconnectPath() + 0x1d bytes 
System.Windows.dll!System.Windows.Data.Debugging.BindingBreakPoint.BreakOnSharedType.AnonymousMethod__3() + 0x14 bytes  
[Native to Managed Transition]  
[Managed to Native Transition]  
mscorlib.dll!System.Delegate.DynamicInvokeImpl(object[] args) + 0x6b bytes  
mscorlib.dll!System.Delegate.DynamicInvoke(object[] args) + 0xb bytes   
BindingDebugging!MainPagexaml.BindingOperation(object BindingState) + 0x30 bytes    Unknown
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.dll!System.Windows.Data.Debugging.BindingBreakPoint.BreakOnSharedType(System.Type emittedType, System.Windows.Data.Debugging.BindingDebugState debugState, int bindingNumber, int line, int column, System.Action callback) + 0xd5 bytes 
System.Windows.dll!System.Windows.Data.Binding.EnsureBreakPoint(System.Windows.Data.Debugging.BindingDebugState debugState, System.Action callback, bool canDelay) + 0x1ff bytes    
System.Windows.dll!System.Windows.Data.BindingExpression.OnSourcePropertyChanging(System.Action action) + 0x38 bytes    
System.Windows.dll!System.Windows.PropertyPathListener.RaisePropertyPathStepChanged(System.Windows.PropertyPathStep source) + 0x4b bytes    
System.Windows.dll!System.Windows.PropertyAccessPathStep.RaisePropertyPathStepChanged(System.Windows.PropertyListener source) + 0xc bytes   
System.Windows.dll!System.Windows.CLRPropertyListener.SourcePropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs args) + 0x6a bytes    
System.Windows.dll!System.Windows.Data.WeakPropertyChangedListener.PropertyChangedCallback(object sender, System.ComponentModel.PropertyChangedEventArgs args) + 0x3d bytes 
ReactiveUI_SL5!ReactiveUI.ReactiveObject.raisePropertyChanged(string propertyName) + 0x12e bytes    
ReactiveUI_SL5!ReactiveUI.OAPHCreationHelperMixin.ObservableToProperty<ReactiveUIPlay.AppViewModel,ReactiveUI.ReactiveCollection<string>>.AnonymousMethod__0(ReactiveUI.ReactiveCollection<string> _) + 0x32 bytes  
ReactiveUI_SL5!ReactiveUI.ObservableAsPropertyHelper<ReactiveUI.ReactiveCollection<string>>..ctor.AnonymousMethod__0(ReactiveUI.ReactiveCollection<string> x) + 0x18e bytes 
System.Reactive.Core!System.Reactive.AnonymousSafeObserver<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x5a bytes  
System.Reactive.Core!System.Reactive.ScheduledObserver<ReactiveUI.ReactiveCollection<string>>.OnNextCore.AnonymousMethod__4() + 0x83 bytes  
System.Reactive.Core!System.Reactive.ScheduledObserver<ReactiveUI.ReactiveCollection<string>>.Run(object state, System.Action<object> recurse) + 0x105 bytes    
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.InvokeRec1<object>.AnonymousMethod__d(object state1) + 0x72 bytes    
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.InvokeRec1<object>(System.Reactive.Concurrency.IScheduler scheduler, System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>> pair) + 0x189 bytes  
System.Reactive.Core!System.Reactive.Concurrency.ImmediateScheduler.Schedule<System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>>>(System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>> state, System.Func<System.Reactive.Concurrency.IScheduler,System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>>,System.IDisposable> action) + 0xa0 bytes   
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.Schedule<object>(System.Reactive.Concurrency.IScheduler scheduler, object state, System.Action<object,System.Action<object>> action) + 0x1c3 bytes   
System.Reactive.Core!System.Reactive.ScheduledObserver<ReactiveUI.ReactiveCollection<string>>.EnsureActive() + 0x12b bytes  
System.Reactive.Core!System.Reactive.ObserveOnObserver<ReactiveUI.ReactiveCollection<string>>.OnNextCore(ReactiveUI.ReactiveCollection<string> value) + 0x2f bytes  
System.Reactive.Core!System.Reactive.ObserverBase<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x3d bytes   
System.Reactive.Linq!System.Reactive.Subjects.Subject<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x50 bytes   
ReactiveUI_SL5!ReactiveUI.ScheduledSubject<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x2f bytes  
System.Reactive.Linq!System.Reactive.Linq.Observable.AsObservable<ReactiveUI.ReactiveCollection<string>>._.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x7c bytes 
System.Reactive.Linq!System.Reactive.Linq.Observable.DistinctUntilChanged<ReactiveUI.ReactiveCollection<string>,ReactiveUI.ReactiveCollection<string>>._.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x29a bytes  
System.Reactive.Core!System.Reactive.SafeObserver<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x90 bytes   
System.Reactive.Core!System.Reactive.ScheduledObserver<ReactiveUI.ReactiveCollection<string>>.OnNextCore.AnonymousMethod__4() + 0x83 bytes  
System.Reactive.Core!System.Reactive.ScheduledObserver<ReactiveUI.ReactiveCollection<string>>.Run(object state, System.Action<object> recurse) + 0x105 bytes    
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.InvokeRec1<object>.AnonymousMethod__d(object state1) + 0x72 bytes    
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.InvokeRec1<object>(System.Reactive.Concurrency.IScheduler scheduler, System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>> pair) + 0x189 bytes  
System.Reactive.Core!System.Reactive.Concurrency.ImmediateScheduler.Schedule<System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>>>(System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>> state, System.Func<System.Reactive.Concurrency.IScheduler,System.Reactive.Concurrency.Scheduler.Pair<object,System.Action<object,System.Action<object>>>,System.IDisposable> action) + 0xa0 bytes   
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.Schedule<object>(System.Reactive.Concurrency.IScheduler scheduler, object state, System.Action<object,System.Action<object>> action) + 0x1c3 bytes   
System.Reactive.Core!System.Reactive.ScheduledObserver<ReactiveUI.ReactiveCollection<string>>.EnsureActive() + 0x12b bytes  
System.Reactive.Core!System.Reactive.ObserveOnObserver<ReactiveUI.ReactiveCollection<string>>.OnNextCore(ReactiveUI.ReactiveCollection<string> value) + 0x2f bytes  
System.Reactive.Core!System.Reactive.ObserverBase<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x3d bytes   
System.Reactive.Linq!System.Reactive.Subjects.Subject<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x50 bytes   
ReactiveUI_SL5!ReactiveUI.ScheduledSubject<ReactiveUI.ReactiveCollection<string>>.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x2f bytes  
System.Reactive.Linq!System.Reactive.Linq.Observable.AsObservable<ReactiveUI.ReactiveCollection<string>>._.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x7c bytes 
System.Reactive.Linq!System.Reactive.Linq.Observable.Merge<ReactiveUI.ReactiveCollection<string>>._.?.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0xac bytes  
System.Reactive.Linq!System.Reactive.Linq.Observable.Finally<ReactiveUI.ReactiveCollection<string>>._.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x7c bytes  
System.Reactive.Linq!System.Reactive.Linq.Observable.Catch<ReactiveUI.ReactiveCollection<string>,System.Exception>._.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x7c bytes   
System.Reactive.Linq!System.Reactive.Linq.Observable.AsObservable<ReactiveUI.ReactiveCollection<string>>._.OnNext(ReactiveUI.ReactiveCollection<string> value) + 0x7c bytes 
System.Reactive.Linq!System.Reactive.Subjects.AsyncSubject<ReactiveUI.ReactiveCollection<string>>.OnCompleted() + 0x234 bytes   
System.Reactive.Linq!System.Reactive.Linq.QueryLanguage.ToAsync<object,ReactiveUI.ReactiveCollection<string>>.AnonymousMethod__d0() + 0xba bytes    
System.Reactive.Core!System.Reactive.Concurrency.Scheduler.Invoke(System.Reactive.Concurrency.IScheduler scheduler, System.Action action) + 0x2e bytes  
System.Reactive.PlatformServices!System.Reactive.Concurrency.ThreadPoolScheduler.Schedule<System.Action>.AnonymousMethod__0(object _) + 0x7d bytes  
mscorlib.dll!System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(object state) + 0x3e bytes 
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) + 0x97 bytes  
mscorlib.dll!System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() + 0x5a bytes 
mscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch() + 0x1b3 bytes  
mscorlib.dll!System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() + 0x5 bytes 
[Native to Managed Transition]  
[Appdomain Transition]  
[Native to Managed Transition] 
```

这是 RxApp.DeferredScheduler 的类型 - System.Reactive.Concurrency.IScheduler

![RxApp.DeferredScheduler](../Images/6751603f1af4fbd599d311b3dcf94613.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:47:53.057

您的问题出在这`Throttle`条线上 - 因为您没有指定`IScheduler`，所以 Rx 假定 TaskPoolScheduler 是 Bad™。将其更改为：

```
.Throttle(TimeSpan.FromMilliseconds(800), RxApp.DeferredScheduler) 
```

# matlab - 从嘈杂的语音信号中过滤消息

> ID：13698345
> 
> 赞同：0
> 
> 时间：2012-12-04T07:55:13.957
> 
> 标签：matlab, wav, voice, noise, lowpass-filter

我正在尝试破译隐藏在非常嘈杂（听起来像带有额外低无人机的白噪声）音频文件（.wav）中的消息。该消息是一个六位数字。我没有被告知噪音的任何细节。我尝试使用低通滤波器，希望消除大部分较高的频率可以让我听到数字，但是，我似乎也无法摆脱足够低的无人机来足够好地听到声音。我的尝试如下（最后包含了使用的函数'freq_space_low_pass_filter'）：

```
[data, SampleRate, NbitsPerSample]=wavread('noisy_msg6.wav');

y=data(:,1); % we will work only with one channel in this demo 
N=length(y); %number of sample points
t=( (1:N)*1/SampleRate ).'; % time spacing is 1/SampleRate and we want column vector

Y=fft(y);

spectrum_freq=fourier_frequencies(SampleRate, N);

Freq3db=100;
[spectrum_filtered,g_vs_freq]=freq_space_low_pass_filter(Y, SampleRate, Freq3db);

y_filtered=ifft(spectrum_filtered);

y_filtered=real(y_filtered);

wavwrite(y_filtered/(0.1+max(y_filtered)), SampleRate, NbitsPerSample,        'noisy_msg6_filtered.wav');

%%%%%%%%down sampling%%%%%%%%

indexes=(abs(spectrum_freq) < 10*Freq3db);
spectrum_freq_down_sampled = spectrum_freq(indexes);
spectrum_down_sampled = spectrum_filtered(indexes);
N_down_sampled = length(spectrum_down_sampled);

spectrum_down_sampled=spectrum_down_sampled*N_down_sampled/N;

SampleRate_down_sampled=SampleRate*N_down_sampled/N;

y_down_sampled=real(ifft(spectrum_down_sampled));
t_down_sampled = ( (1:N_down_sampled)*1/SampleRate_down_sampled ).';

sound(y_down_sampled, SampleRate_down_sampled) 
```

* * *

```
function [spectrum_filtered,g]=freq_space_low_pass_filter(spectrum, SampleRate, Freq3db)
%% applies low pass filter in the frequency domain
% spectrum - result of fft on time series data (column vector is expected)
% SampleRate - measured in Hz, 1/dt where dt spacing of the points in time domain
% Freq3db - desired 3db roll off point in Hz

N=length(spectrum);

function G=filter_gain(freq, Freq3db)
    G=1./(1+1i*freq/Freq3db); % this corresponds to low pass RC filter
end

spectrum_freq=fourier_frequencies(SampleRate, N);

% calculate filter gain for each spectrum frequency
g=filter_gain(spectrum_freq, Freq3db);
spectrum_filtered=spectrum.*g; 
```

## 结尾

任何和所有的帮助将不胜感激。谢谢！

![我的过滤信号和原始信号的图](../Images/8afa909533f83758d4a0ddd1801e6d21.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:51:24.417

如果是人声说出数字，那么您可以安全地完全过滤掉所有低于 500 Hz 及以上的频率，例如 8 kHz。从那里，您可以更安全地确定哪些频率掩盖了声音。

如果你想作弊，你可以用一个带有窄带钟形滤波器的参数均衡器给音频样本一个镜头，然后扫描 500 - 8000 Hz 范围，直到你得到一些东西:) 虽然这个问题听起来更像是一个家庭作业Matlab课程。

我的 Matlab 对于代码来说太生疏了，但这里有一些东西可以尝试：

1.  添加一个 500 Hz 的高通滤波器
2.  添加一个 8 kHz 的低通滤波器
3.  在人耳最敏感的地方添加一个窄钟形滤波器，比如 4 kHz。将其提高 6 dB 以清除其他频率的掩蔽效应。
4.  为了增加效果，也可以提升较低和较高的谐波（2 kHz 和 8 kHz），但降低 dB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:28:43.030

如果您没有关于噪声的先验信息，那么过滤通常不是一个好主意。如果您知道您的噪声能量集中在某个频率以上，您的概念就可以正常工作。低通滤波可能会给您带来可观的 SNR 优势，但代价是会丢失较高频率的语音信息。但同样，这只有在您知道噪声的平均频谱分布时才有用。

您需要利用任何信息，了解是什么使噪声与语音信号不同。光谱减法技术可能会给您带来更多好处。如果样本中的语音之前有一些噪音，则可以根据该信息制作补偿滤波器。

就时频响应而言，噪声是什么样的？如果它相对静止，您可以利用语音被高度调制（大约 4Hz）的事实来估计不同频段的 SNR，然后衰减具有最差 SNR 估计的频段。

录音中有多少个音频通道？如果它大于 1，并且您的目标音频源的空间位置没有改变，您可以使用互相关技术来提高 SNR。

# logging - Laravel - 处理 500 错误消息

> ID：13698351
> 
> 赞同：1
> 
> 时间：2012-12-04T07:55:59.917
> 
> 标签：logging, laravel

在 laravel 中，我想更改错误消息并将其记录为 404 和 500 事件。我在 routes.php 中通过事件监听器尝试了 404 事件，

```
Event::listen('404', function()
{
Log::write('404', 'Could not find : '.URL::full());
return Response::error('404');
}); 
```

那对我来说很好。并使用当前 url 记录错误消息。但是对于 500 个错误，我也想记录堆栈跟踪。我想要像“500 - 未捕获的异常：'exception_message_and_stack_trace'”这样的日志消息

如何在事件侦听器中获取堆栈跟踪字符串.. 有可能吗？对不起，如果我不了解 laravel 的任何基本内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:18:12.977

404 和 500 事件没有太多关于引发它们的错误的信息，所以你不能真正在那里进行堆栈跟踪。它们基本上只用于用户的公共消息，他们可能会点击他们不应该点击的东西。

对于日志记录，您应该在 config/error.php 中使用 logger 闭包，用您自己的日志记录逻辑填充闭包，它可以访问异常对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:27:27.713

Laravel 论坛上有一个关于 Laravel 事件的热门话题。您可以在[此处](http://forums.laravel.com/viewtopic.php?id=3705)查看列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T18:52:10.587

尝试将代码添加到 application/config/error.php。通过在该文件中将 'log' 设置为 true 来启用日志记录。然后在底部添加对 Log::write() 的调用，如下所示：

```
 'logger' => function($exception)
    {
            Log::write('error', $exception);
            Log::exception($exception);
    }, 
```

这将使异常显示在 storage/logs/YYYY-MM-DD.log 中。您也可以将它们写到数据库表中，或者通过更改本节将它们通过电子邮件发送。

# python - 存储和访问节点属性 python networkx

> ID：13698352
> 
> 赞同：75
> 
> 时间：2012-12-04T07:56:11.047
> 
> 标签：python, attributes, networkx

我有一个使用 python 创建的节点网络`networkx`。我想在节点中存储信息，以便以后可以根据节点标签（节点的名称）和存储信息的字段（如节点属性）访问信息。`xyz`存储的信息可以是字符串或数字，我希望以 if是节点的方式这样做：

然后我想保存两个或三个具有字符串的字段，例如出生日期、出生`xyz` `dob=1185`地点和出生`xyz` `pob=usa`日期`xyz` `dayob=monday`。

我知道我可以使用`G.add_node`其中包含属性字典字段...但我似乎无法访问特定字段。如果有任何其他方式，我将不胜感激。

然后我想`xyz`与网络中具有相同信息的其他节点进行比较。即节点`xyz`与节点的交集`abc`基于日期、出生地点和出生日期

例如对于 if 节点`xyz`并且`abc`有一个边缘打印它们各自`dob`的 s、它们`pob`的 s 和它们`dayob`的 s

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-04T12:19:32.767

正如您所说，只需在将节点添加到图中时添加属性即可

```
G.add_node('abc', dob=1185, pob='usa', dayob='monday') 
```

或作为字典

```
G.add_node('abc', {'dob': 1185, 'pob': 'usa', 'dayob': 'monday'}) 
```

要访问属性，只需像使用任何字典一样访问它们

```
G.node['abc']['dob'] # 1185
G.node['abc']['pob'] # usa
G.node['abc']['dayob'] # monday 
```

你说你想查看连接节点的属性。这是一个关于如何实现的小例子。

```
for n1, n2 in G.edges_iter():
    print G.node[n1]['dob'], G.node[n2]['dob']
    print G.node[n1]['pob'], G.node[n2]['pob']
    # Etc. 
```

从 networkx 2.0 开始，G.edges_iter() 已被 G.edges() 取代。这也适用于节点。我们设置`data=True`访问属性。现在的代码是：

```
for n1, n2 in list(G.edges(data=True)):
    print G.node[n1]['dob'], G.node[n2]['dob']
    print G.node[n1]['pob'], G.node[n2]['pob']
    # Etc. 
```

**注意：**在**networkx 2.4**中，`G.node[]`已替换为`G.nodes[]`.

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-04-30T03:16:56.530

此外，您不必只在添加节点时分配属性。即使添加了它，您仍然可以直接设置它们。

```
import networkx as nx
G=nx.Graph()
G.add_edge(1,2)
#see comment below code for recent versions of networkx.
G.nodes[1]['name'] = 'alpha'
G.nodes[2]['name'] = 'omega'

G.nodes[1]['name']
> 'alpha' 
```

**注意：**对于 2.4 之前的版本，请`G.node[]`使用`G.nodes[]`. 请参阅[弃用说明。](https://networkx.github.io/documentation/stable/release/release_2.4.html#deprecations)

您还可以使用`set_node_attributes`（[文档](https://networkx.github.io/documentation/stable/reference/generated/networkx.classes.function.set_node_attributes.html)），它可以让您同时为多个节点设置属性：

**编辑**

```
#use the next line if it's networkx version 1.x
#nx.set_node_attributes(G, 'cost', {1:3.5, 2:56})

#use the next line if it's networkx version 2.x
#nx.set_node_attributes(G, {1:3.5, 2:56}, 'cost')

#or for something that works for 1.x or 2.x
nx.set_node_attributes(G, values = {1:3.5, 2:56}, name='cost')

G.node[1]['cost']
> 3.5 
```

类似的方法可用于设置边缘属性。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-26T08:30:39.370

从`networkx`v2.0 开始，您可以使用：

```
import networkx as nx

G = nx.Graph()
G.add_node('abc', dob=1185, pob='usa', dayob='monday')
nx.get_node_attributes(G, 'dob')
> {'abc': 1185} 
```

你可以像往常一样访问这个字典：

```
{'abc': 1185}['abc']
> 1185 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-25T22:06:24.373

显然现在

```
G.node[1]['name'] = 'alpha' 
```

不再工作。

我用这个：[https ://networkx.github.io/documentation/stable/reference/classes/generated/networkx.Graph.nodes.html](https://networkx.github.io/documentation/stable/reference/classes/generated/networkx.Graph.nodes.html)

在节点添加 s ：

```
G.nodes[1]['name'] = 'alpha' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T05:43:45.760

要将属性添加为字典，您可以执行以下操作

```
g.add_node('node_id', **{"attr1": "val1", "attr2": "val2"}) 
```

ps如果你不添加`**`你会得到异常： `TypeError: add_node() takes 2 positional arguments but 3 were given`

# sql - 成组从 Oracle 中删除记录

> ID：13698355
> 
> 赞同：1
> 
> 时间：2012-12-04T07:56:28.317
> 
> 标签：sql, database, oracle, stored-procedures, sql-function

我正面临从名为 links_data 的表中删除记录集的问题，因为要删除大量数据并且 Oracle DB 的临时空间不足。

同样，我对存储过程知之甚少，我编写了以下代码。但是存储过程看起来也运行得很慢。

场景是我需要删除 links_data 表中的行，其中 links_data 表中的 nm_folder 列与 link_folders 表具有外键关系。link_folders 表中的 nm_folder 是主键，我打算一次删除 10000 条记录并提交，然后再次删除 10000 条记录并提交。

请任何人帮助我优化此查询。感谢和问候，

```
Declare

Type ty_link_floder is table of number;

tble_id_folder ty_link_floder;

    Cursor c_data is
    select id_folder from link_folders where nm_folder='User Hotlist';

    Begin
    OPEN c_data;

      LOOP
        FETCH c_data
        BULK COLLECT INTO tble_id_folder LIMIT 10000;
        EXIT WHEN tble_id_folder.count = 0;
                    FORALL i IN tble_id_folder.first .. tble_id_folder.last
        DELETE FROM links_data
        WHERE id_folder = tble_id_folder(i);
        COMMIT;

        -- Process contents of collection here.

        DBMS_OUTPUT.put_line(tble_id_folder.count || ' rows deleted from links_data table so far');
        tble_id_folder.delete;
      END LOOP;
      CLOSE c_data;
    Exception
     When others Then
      Commit;
      Raise;
    End; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:43:13.797

我会先在一个 SQL 语句中尝试它：

```
DELETE FROM links_data d
 WHERE id_folder IN (
       SELECT id_folder FROM links_folder WHERE nm_folder='User Hotlist'); 
```

如果临时空间用完并且 DBA 无法设置额外的临时空间，最好的方法是重新创建表而不删除应删除的行：

```
CREATE TABLE links_data_tmp AS
SELECT * FROM links_data d
 WHERE id_folder NOT IN (
       SELECT id_folder FROM links_folder WHERE nm_folder='User Hotlist'); 
```

之后，您需要重建所有`links_data_tmp`已在 上定义的索引和约束`links_data`。然后您可以将临时表与真实表交换：

```
RENAME links_data TO links_data_old;
RENAME links_data_tmp TO links_data; 
```

不要忘记重新申请所有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:37:57.683

您应该`links_data(id_folder)`在 table 的外键列上和外键列上都有一个索引`link_folders`。

但是如果要清理的数据量很大（例如超过 30%）并且删除不是一个连续的过程，您最好进行维护 -> 重新创建包含所需数据的表。插入比删除快 n 倍。

# c# - 实体框架 - 从 m:n 关系中删除 M 行

> ID：13698365
> 
> 赞同：2
> 
> 时间：2012-12-04T07:57:03.600
> 
> 标签：c#, entity-framework, entity-framework-4, entity-relationship

我在 M:N 关系中有 AEntity 和 BEntity。

在数据库中，我有 ATable、BTable、ABRelationTable。

ABRelationTable 构建如下

```
Id                      Guid
ATableId                Guid
BTableId                Guid
AdditionalAttribute1    String
AdditionalAttribute2    String 
```

然后我删除 EntityFramework 中的 AEntityInstance 并
引发异常，然后它违反了 ABRelationTable 中的 FK

如下：

```
The DELETE statement conflicted with the REFERENCE constraint "FK_AB_A". 
The conflict occurred in database "X", table "ABRelationTable", column 
'Id'.The statement has been terminated. 
```

如何删除关系表中的对应行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:15:59.003

关系是否在 SQL 数据库表中删除时级联？如果是这样，您可以在 EF 中执行此操作，它将得到处理。请参阅... [实体框架 - 按 id 删除相关记录](https://stackoverflow.com/questions/8569504/entity-framework-remove-related-records-by-id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:08:03.527

您必须从 中删除关联`B`的`A`：

```
foreach(var b in a.Bs.ToList())
{
    a.Bs.Remove(b);
} 
```

`a.Bs`或加载`Clear()`它。

关键是`B`必须首先加载 '，然后以一种或另一种方式删除，以便更改管理器知道关联已被切断。

# python - python gtk+ 事件

> ID：13698368
> 
> 赞同：0
> 
> 时间：2012-12-04T07:57:17.250
> 
> 标签：python, event-handling, gtk

我正在使用 python 和 gtk。有一个检查线程，用于查找变量。如果所有条件都正常，它应该向 gtk.main 循环引发一个事件。引发的事件应该打开一个窗口并开始一些其他事情。

它是这样的：

```
if x==True and y==True:
   raise event

def event:
   newWindow() 
```

请给出一个代码示例如何实现这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:41:37.447

所以..自己搞定了。

代码很简单：

```
import gobject

class XX(gobject.GObject):
    # define signal parameters
    __gsignals__ = { 'signal-name' : (gobject.SIGNAL_RUN_FIRST, gobject.SIGNAL_TYPE_NONE, ())}

    gobject.__init__(self)

    def __init__(self):
        # some code

    def function(self):
        # emit signal
        self.emit('signal-name') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:12:04.747

gtk 事件总是有一个目标。您不能将事件“发送到主循环”。大多数目标都是小部件。你可以：

1.  只需创建窗口，而不是发送事件。该窗口将在创建期间获取事件，您可以根据需要处理这些事件。
2.  之前创建新的新窗口，但将其隐藏，并将事件发送到窗口。
3.  创建一个管道并将其设置为读取（使用 glib.io_add_watch），然后向它发送一个字节（或者如果它是一次触发，则关闭它）并且侦听器将接收到事件。

第一个选项对我来说最有意义。我包括第二个只是为了告诉你它可以完成（它最类似于你所要求的）。如果您正在使用多个线程或进程，第三个可能很有用，并且哪个线程或进程创建窗口对您很重要。

# android - 定义程序的“无响应”行为

> ID：13698369
> 
> 赞同：1
> 
> 时间：2012-12-04T07:57:18.513
> 
> 标签：android, linux, windows

我需要编写一个应用程序来持续监视系统/应用程序的行为并标记出根本“没有响应”的进程。

我的意思是在 Windows 上是这样的：

![在此处输入图像描述](../Images/c63966088a390ee99164f7296a674b4f.png)

或在 Android 上这样：

![在此处输入图像描述](../Images/70705fbd9653f737e989274adba3efef.png)

有人可以帮我定义这种“挂起”或“不响应”的行为，以便我可以编写一个应用程序来监控这些参数。

我只能想到一个参数：

持续监控每个应用程序的处理器使用情况，如果它们在某些 'y' 单位时间内消耗超过 'x'% 的 CPU，则将它们标记为无响应。

平台：Linux/Android/Windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:43:18.017

你需要像*看门狗*这样的东西。要么应用程序必须定期执行一些预定义的活动，而您只需定期检查它是否执行了此活动。或者您向它必须回答的应用程序发送某种请求。

*在某些 'y' 单位时间内消耗高于 'x'% 的 CPU与**不响应*无关。应用程序可能会消耗大量 CPU，但仍会响应系统或用户事件。同样，应用程序完全不消耗 CPU，因为它等待输入，并且在此期间不响应任何其他请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:04:03.713

我们在企业中有一些活跃的进程，有时由于长时间运行或内存问题，它们会关闭而不会引发异常。他们只是死了。

我们在这个应用程序中实现了一个类，它将自己的进程活动记录到文件或数据库表中。

我们使用另一个观察者监视器来获取此记录的数据事件 X 分钟，因此如果超过 X 分钟并且没有出现记录数据，则该过程无法正常工作。

我们使用 psexec 远程杀死进程并重新启动它。

# hibernate - 基于交易的网站的java框架

> ID：13698372
> 
> 赞同：0
> 
> 时间：2012-12-04T07:57:27.453
> 
> 标签：hibernate, spring-mvc, struts

我是 java 新手，开始了解 java 框架

我想知道我是否必须制作一个基于充值的网站，哪个框架最适合这个，为什么？

以及哪个数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:04:57.053

对我来说，伟大的框架是：

1) 后端：Spring + JPA/Hibernate

2) 前端：Struts2 + Freemarker

它很容易开发并且有很好的文档。执行复杂的任务并不难。前端也是很棒的 JSF（Primefaces），但**仅**适用于简单的选项卡、简单的数据表，当它变成复杂的对象时，Primefaces 有很多新功能，我切换到 Struts2。

以下是开发者费率，您可以发表自己的看法：

[这里](http://devrates.com/project/search?query=%5Bjava%5D)

享受 ：）

# python - 如何创建一个独立的 pip 包（包括所有的 deps）

> ID：13698374
> 
> 赞同：3
> 
> 时间：2012-12-04T07:57:33.263
> 
> 标签：python, pip

创建一个独立的 pip 包的最佳方法是什么，它可以在任何安装了裸包的机器上运行？

说，我想打包[pelican](http://pypi.python.org/pypi/pelican/3.1.1)，以便它可以在所有安装了 python 的计算机上运行（假设所有依赖项都是纯 python）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T00:06:41.413

我的想法有两种解决方案：[捆绑](http://www.pip-installer.org/en/latest/usage.html#bundles)和`pip install --no-install`技巧。

**使用`bundles`：**

```
$ virtualenv venv
$ venv/bin/pip install pelican
$ venv/bin/pip freeze > all-packages.txt
$ venv/bin/pip bundle allpackages.pybundle -r all-packages.txt 
```

（我创造`venv`了一个干净的环境，`all-packages.txt`只包含鹈鹕需要的东西）

你只需要分发`allpackages.pybundle`，谁想要那些必须做的包：

```
$ venv/bin/pip install allpackages.pybundle -r all-packages.txt 
```

* * *

**使用`pip install --no-install`：**

pip 可以将所有包下载到一个目录，您可以分发这些包。假设你已经`all-packages.txt`包含了所有需要分发的包，你可以使用`--no-install`with`--download-dir`选项：

```
$ mkdir tarballs
$ venv/bin/pip install --no-install --download-dir=tarballs -r all-packages.txt 
```

如果您使用最后一个技巧并想使用 pip 安装这些软件包：

```
$ venv/bin/pip install --no-deps --no-index tarballs/* 
```

该选项`no-deps`是必需的，因为 pip 在安装 wnated 包之前会查找依赖项。我曾经`--no-index`只是向您展示 pip 不需要去 PyPI 查找任何内容，并且您在该步骤中甚至不需要互联网连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T16:30:38.327

请注意：PIP 版本 7 + 已替换（至少那是我测试此命令的版本）

```
--no-install 
```

选项

```
--download or -d 
```

因此，要按照上面示例中的说明下载 pelican 所需的所有软件包，您将运行：

```
pip install -d tarballs pelican 
```

# spring-integration - 使用通用 FS 跨多个节点锁定文件

> ID：13698376
> 
> 赞同：0
> 
> 时间：2012-12-04T07:58:03.133
> 
> 标签：spring-integration, filelock

我们有一个 spring 集成应用程序，它在多个节点的集群中运行。NFS 驱动器安装在所有节点上，并且可供所有节点读取。

在 NFS 上，有一个文件夹正在被`file:inbound-channel-adapter`所有节点监视，轮询间隔为 5 秒。

问题是 1）一个节点不应该拾取已被其他节点拾取的文件

2）如果一个文件被一个节点上的线程拾取，在轮询间隔之后运行的第二个线程不应该拾取它 - 我已经 `AcceptOnceFileListFilter` 为这个准备好了，但想知道是否有更好的方法。

我们已经看过的选项之一：

1）在数据库中创建一个具有唯一文件名的记录，并且每个其他节点在开始处理之前检查同一个数据库

还必须看看 NIOLocker - 但需要一些关于它的可靠性和在这种情况下可能的选项的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:16:13.173

您是否尝试过在文件被接受后重命名文件？也就是说，您要做的第一件事是将文件重命名为 file.txt.lck，这意味着其他节点将不再发现它与它们的过滤条件匹配。

如果一个节点发生故障，该文件可以由另一个节点手动恢复和处理

# javascript - 如何将var添加到文本javascript

> ID：13698379
> 
> 赞同：2
> 
> 时间：2012-12-04T07:58:07.487
> 
> 标签：javascript, jquery

我有这个代码

```
$.ajax({
   url: 'http://localhost/record/FlashWavRecorder-master/jjj/r/',
   type: 'HEAD',
   error: function () {
       $('.sd').html('<img src="5-0.gif" />');
   },
   success: function () {
       bo = 'a';
       $('.sd').html('<span style="color:#99CC00; font-weight:bold;">done</span> ');
   }
}); 
```

我想在这部分代码中添加变量

```
url:'http://localhost/record/FlashWavRecorder-master/jjj/r/+var', 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:59:40.857

只需像这样附加变量：

```
url:'http://localhost/record/FlashWavRecorder-master/jjj/r/'+var, 
```

旁注：
不要尝试使用 use`var`作为变量名。这是不可能的，因为`var`它是一个保留关键字。
^(（但我确信这只是为了说明这个例子）)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:00:06.487

只需定义一个变量，然后将其附加到字符串中。

```
var someValue = "hello";
$.ajax({
 url:'http://localhost/record/FlashWavRecorder-master/jjj/r/' + someValue, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:00:12.453

像这样附加到它：

```
 var something = "test";
   $.ajax({
                url:'http://localhost/record/FlashWavRecorder-master/jjj/r/' + something, 
```

Javascript 不会扩展字符串中的变量，您必须将它们与`+`运算符连接起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:00:26.893

尝试使用以下

```
url:'http://localhost/record/FlashWavRecorder-master/jjj/r/' + variable , 
```

# c# - FileStream 锁定文件以进行读写

> ID：13698380
> 
> 赞同：8
> 
> 时间：2012-12-04T07:58:08.780
> 
> 标签：c#, multithreading, locking, filestream

我有以下代码块，这让我很头疼。

从逻辑上讲，它应该可以工作，因为我正在使用在 using 语句中提供锁的文件流。当它到达创建 StreamWriter 的行时，它会说“文件不可写”。

现在我的程序是一个多线程应用程序。任何线程都可能试图写入此文件。我需要程序锁定文件，读取内容，检查内容，然后写回任何更改。在该过程中，没有其他线程应该能够访问该文件。

```
using (var fs = File.Open(fileLoc, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
{
    var sr = new StreamReader(fs);
    var str = sr.ReadToEnd();
    var strArray = str.Split(',');
    if (strArray.Any(st => st == text))
    {
        return;
    }
    sr.Close();

    var sw = new StreamWriter(fs);
    sw.Write(str + text);
    sw.Flush();
    sw.Close();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T15:31:09.460

FileShare.None 标志不会导致线程排队，它只是锁定文件，因此会出现异常。要提供互斥访问，您可以在写入之前锁定共享对象。

但是你说“现在我的程序是一个多线程应用程序。任何线程都可能试图写入这个文件。” 现在，这些线程是否都使用完全相同的方法来写入文件？让我们假设他们这样做，那么这应该工作......

创建一个静态类变量...

```
private static object lockObject = new object(); 
```

在这里使用它...

```
lock (lockObject) 
{
    using(var sw = new StreamWriter(fs))
    {
       sw.Write(str + text);
    }
} 
```

我对线程做了一些假设，所以如果这不起作用，您可能需要查找有关同步的信息或向我们提供更多信息。

另外，请关闭您的`StreamReader`较早（以防该方法较早返回）。使用后立即关闭它，或者更好地使用`using`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T08:21:03.283

尝试线程同步。[您可以从此链接找到更多详细信息](https://docs.microsoft.com/en-us/dotnet/standard/threading/overview-of-synchronization-primitives)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-27T08:17:39.137

如在[MSDN 中参考](https://docs.microsoft.com/en-us/dotnet/api/system.io.streamreader.close?view=netframework-4.8)Close 方法

> 关闭 StreamReader 对象和基础流，并释放与读取器关联的所有系统资源。

因此，对 StreamWriter 的后续调用似乎无法使用已关闭的资源，从而给您消息“文件不可写”。

试试这个

```
 using (var fs = File.Open(path, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
        {
            using (var sr = new StreamReader(fs))
            {
                var str = sr.ReadToEnd();
                // ...

                using (var sw = new StreamWriter(fs))
                {
                    // ...
                }
            }
        } 
```

# android - 谷歌驱动器图标文件。无法编译 Eclipse Android 项目

> ID：13698381
> 
> 赞同：5
> 
> 时间：2012-12-04T07:58:15.890
> 
> 标签：android, eclipse, google-drive-api

我创建了 Android 项目并将其放在 Google Drive 上。

但是当我尝试编译它时出现错误，因为 Google Drive 在项目文件夹中添加了一个文件“Icon”。

谁知道如何删除这个文件？还是让 Google Drive 不创建这些文件？

操作系统：Mac 操作系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:40:52.317

我没有找到设置并删除了这些文件：

```
find . -d -name '.git' -exec find {} -name 'Icon?' -delete \; 
```

# java - java.net.SocketTimeoutException：查询url时读取超时

> ID：13698385
> 
> 赞同：4
> 
> 时间：2012-12-04T07:58:37.870
> 
> 标签：java

我收到此错误：

```
java.net.SocketTimeoutException: Read timed out
http://api.trove.nla.gov.au/result?key=<KEY HERE>&zone=all&reclevel=brief&q=%20am%20only%20yours%20fear&encoding=json
Exception in thread "main" java.lang.NullPointerException   at
trove.connect.TroveService.QueryTrove(TroveService.java:134)    at
datasetconverter.CsvReader2.main(CsvReader2.java:64) Java Result: 1
BUILD SUCCESSFUL (total time: 1 minute 41 seconds) 
```

当我执行我的代码时：

```
 public String getJSON(String url, int timeout) throws IOException, Exception {
    try {
        URL u = new URL(url);
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        c.setRequestMethod("GET");
        c.setRequestProperty("Content-length", "0");
        c.setUseCaches(false);
        c.setAllowUserInteraction(false);
        c.setConnectTimeout(timeout);
        c.setReadTimeout(timeout);
        c.connect();
        int status = c.getResponseCode();

        switch (status) {
            case 504:
            case 503:
                Thread.sleep(10000);
                this.QueryTrove(url);
                break;
            case 200:
            case 201:
                BufferedReader br = new BufferedReader(new InputStreamReader(c.getInputStream()));
                StringBuilder sb = new StringBuilder();
                String line;
                while ((line = br.readLine()) != null) {
                    sb.append(line+"\n");
                }
                br.close();
                return sb.toString();
        }

    } catch (MalformedURLException ex) {
        System.out.println(ex);
        System.out.println(url);
    } catch (IOException ex) {
        System.out.println(ex);
        System.out.println(url);
    }
    return null;
}

    public int QueryTrove(String query) throws Exception{
        int sum =0;
        String json = getJSON("http://api.trove.nla.gov.au/result?key=<KEY HERE>&zone=all&reclevel=brief&q="+query+"&encoding=json",10000);

        Gson gson = new Gson();

        JsonResponse r = gson.fromJson(json, JsonResponse.class);
        for (Zone zone : r.getResponse().getZones()) {
            sum = sum + Integer.parseInt(zone.records.getTotal());
        }

        return sum;
    } 
```

这是因为，`setConnectionTimeout`如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T08:09:57.743

发生读取超时是因为服务器花费了比“读取超时”参数更长的时间来响应。但是假设您有一个合理的读取超时值（比如说 30 秒），这并不一定意味着问题在于您的读取超时太短，可能是服务器被卡住并且永远不会返回回答。

要诊断，您可以做几件事：

*   首先尝试查看当您尝试通过浏览器访问时获得完整响应需要多长时间。
*   尝试摆脱超时（默认为无超时），看看您是否得到响应。

如果服务器响应您的浏览器而不是您的 Java 应用程序，则首先确保您调用的是完全相同的 URL。除此之外，服务器可能由于您的 USER-AGENT 而忽略了您，请尝试模拟真实的浏览器。

也只是一个友好的建议，我会将超时作为参数传递，只需定义一个合理的超时并直接使用它，除非它是一个非常不寻常的用例，否则在使用这种抽象时没有人愿意传递超时。

# android - 我如何识别鼠标单击列表视图的项目？

> ID：13698386
> 
> 赞同：0
> 
> 时间：2012-12-04T07:58:44.780
> 
> 标签：android, android-listview

我对 listview 有一个问题。当我单击（触摸）列表视图的一项时，我会尝试识别。我尝试使用 setOnItemClickListener，但只能使用键盘。

我能做些什么？做什么坏事？

编辑：我使用 ListActivity。并使用 onListItemClick，但是当我用鼠标单击 AVD 时，不起作用。

编辑 2：我使用自定义 Listview，其中包含 TextView 和 ImageView

```
 <LinearLayout android:id="@+id/lista"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <ListView android:id="@android:id/list"
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="3dp"
        >

    </ListView>   
  </LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical"
   >

   <TextView android:id="@+id/texto"
       android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:textSize="15dp"
   android:textStyle="bold" 
   android:gravity="left"
   android:padding="5dp"
   android:paddingBottom="5dp"
   android:text="@string/texto"
    />
    <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         >
        <ImageView 
           android:id="@+id/btn_imagen"
           android:scaleType="center"
           android:layout_width="match_parent"
           android:layout_height="150dp"
           android:src="@drawable/logo"
           android:contentDescription="@string/Imagen"/>

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:43:55.137

使用 a`ListActivity`您可以使用[onListItemClick (ListView l, View v, int position, long id)](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)。这也适用于`ListFragment`with [onListItemClick (ListView l, View v, int position, long id)](http://developer.android.com/reference/android/app/ListFragment.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)。

如果您有`ListAdapter`（例如`CursorAdapter`）的实现，则可以将自己`View.OnClickListener`的实现设置`onBind()`为所需的`View`元素。

# .net - 如何排查和调试 Visual Studio 设计模式错误？

> ID：13698388
> 
> 赞同：15
> 
> 时间：2012-12-04T07:58:50.543
> 
> 标签：.net, winforms, visual-studio-2010, user-controls, design-time

使用 Windows 7 和 Visual Studio 2010，我正在编写一个 C# 自定义用户控件。我在代码视图中编码了数周，最近当我尝试切换到设计模式时，Visual Studio 挂起，“没有响应”。我可以等一个小时，仍然没有任何反应。单击关闭按钮会显示“您要等待、关闭、重新启动并向 Microsoft 发送信息”对话框。

有没有办法（堆栈）跟踪设计者试图执行的代码？也许是设计时跟踪消息或断点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-24T11:32:46.150

对于 Visual Studio 2010，[这个答案就可以了](https://stackoverflow.com/a/13698442/303612)。

对于 Visual Studio 2012 或更高版本，您需要做的实际上是调试 Visual Studio Designer 进程。您要调试的进程称为 XDesProc.exe

![在此处输入图像描述](../Images/eb7430b2c3f3d8f4956304c23f11ec05.png).

我执行以下操作：

*   打开两个指向同一个解决方案的 Visual Studio 实例
*   关闭两者中的所有窗口。
*   杀死任务管理器中的所有 XDesProc.exe 实例
*   在 Visual Studio 实例 A 中，打开任何视图（不是有异常的视图）。这将启动 Visual Studio 实例 A 的 XDesProc 设计器进程
*   在 Visual Studio 实例 B 中，附加到 XDesProc.exe 上的进程并设置断点，或者设置 Break on exceptions
*   在 Visual Studio 实例 A 中，打开视图（有异常）
*   Visual Studio B 应该会中断。

![在此处输入图像描述](../Images/f7b785fcf913d665662b1c8bf93c1b4d.png)

如果您错过了它，或者需要重新启动这些步骤，请从第 (2) 步“关闭所有窗口”重新开始，杀死 XDesProc 实例。有时设计器启动一次并缓存值，您需要有一个干净、无异常的设计器来跟踪问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-04T08:03:37.347

### 对于 Visual Studio 2010/2013

您可以调试 Visual Studio 设计器本身！打开 Visual Studio 的第二个实例，使用`Tools -> Attach To Process`并附加到第一个 Visual Studio（即`devenv.exe`）。

**在 Visual Studio 实例 #2** *（您在其中执行附加到进程的实例）中*：在用户控件的构造函数上放置一个断点

**在 Visual Studio 实例#1** *中（原来的实例会卡住）*：打开你的用户控件所在的设计器，VS#2 中的断点将被命中。

### 对于 Visual Studio 2012

您要调试的过程是`XDesProc.exe`- 请参阅[ABT 博士的回答](https://stackoverflow.com/a/22608202/1379664)。否则，该过程与 Visual Studio 2010/2013 相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-02T13:40:42.923

答案在*[演练：在设计时调试自定义 Windows 窗体控件](http://msdn.microsoft.com/en-us/library/5ytx0z24.aspx)*(MSDN)。

# jsf-2 - PrimeFaces 获取行数据以获取先前的数据

> ID：13698391
> 
> 赞同：0
> 
> 时间：2012-12-04T07:58:55.043
> 
> 标签：jsf-2, primefaces

下表是问答形式。在第一个时间表将显示问题，如果用户单击重置按钮，则会出现一个下拉框。用户可以重置问题。现在的问题是，当我单击重置并更改问题并单击保存按钮时，bean 类没有得到更新的问题。它打印上一个问题。下面是我的代码::

```
 <p:dataTable id="alphaTable" var="cs" binding="#{challengeSetBean.alphaChallengeSetTable}"
                        value="#{challengeSetBean.challengeSet}">
        <p:column id="col" style="width:20px;font-size:12px;padding-left:7px;padding-bottom:7px;padding-top:7px;">
                    <p:panel columns="1" style="border:0px;">   

                              <h:outputText value="#{cs.question}" id="question" rendered="#{!cs.editMode}"/>
                              <p:selectOneMenu value="#{cs.id}" rendered="#{cs.editMode}" id="questionDropDown">
                                 <f:selectItems value="#{challengeSetBean.availableQuestions}"  />
                              </p:selectOneMenu>

                            <p:inputText value="#{cs.question}" id="customQuestion" rendered="#{cs.editMode} &amp;&amp; #{cs.custom}"  style="width:300px;"/>
                            <p:inputText value="#{cs.answer}" id="answer" rendered="#{cs.editMode}"/>
                    </p:panel>          
                </p:column>

                <p:column  style="width:28px;font-size:9px;padding-left:7px;padding-bottom:7px;padding-top:7px;">

                        <p:commandButton value="#{msg.updateAccount_reset}"  action="#{challengeSetBean.editAnswer('alpha')}" immediate="true" rendered="#{!cs.editMode}" update="alphaTable" >

                        </p:commandButton>
                        <p:commandButton value="#{msg.common_save}" action="#{challengeSetBean.saveAnswers('alpha')}" rendered="#{cs.editMode}"  immediate="true" update="alphaTable"/>
                        <p:commandButton value="#{msg.cancel}" action="#{challengeSetBean.cancelAnswer('alpha')}" rendered="#{cs.editMode}" ajax="true" immediate="true" update="alphaTable"/>
                        <p:commandButton value="#{msg.common_delete}" action="#{challengeSetBean.deleteAnswer('alpha')}" rendered="#{!cs.editMode}"  immediate="true" update="alphaTable"/>

            </p:column>  

            </p:dataTable> 
```

豆：

```
 QuestionAnswer selected = (QuestionAnswer) challengeSetTable.getRowData();
       System.out.println(""+selected.getQuestion()); 
```

# php - PHP web socket无法绑定socket

> ID：13698397
> 
> 赞同：1
> 
> 时间：2012-12-04T07:59:24.617
> 
> 标签：php, apache, websocket

我有一个 apache 服务器并监听端口 8000 和 80

我使用下面的 php 函数来创建一个 web socket

```
private function createSocket($host,$port)
{
    if( ($this->master=socket_create(AF_INET,SOCK_STREAM,SOL_TCP)) < 0 )
    {
        die("socket_create() failed, reason: ".socket_strerror($this->master));
    }

    self::console("Socket {$this->master} created.");

    socket_set_option($this->master,SOL_SOCKET,SO_REUSEADDR,1);
    #socket_set_option($master,SOL_SOCKET,SO_KEEPALIVE,1);

    if( ($ret=socket_bind($this->master,$host,$port)) < 0 )
    {
        die("socket_bind() failed, reason: ".socket_strerror($ret));
    }

    self::console("Socket bound to {$host}:{$port}.");

    if( ($ret=socket_listen($this->master,5)) < 0 )
    {
        die("socket_listen() failed, reason: ".socket_strerror($ret));
    }

    self::console('Start listening on Socket.');

    $this->allsockets[] = $this->master;
} 
```

假设 $host 是 127.0.0.1 并且 $port 是 8000

当我转到 shell 控制台并启动套接字服务器时，它说警告：socket_bind（）：无法绑定地址 [98]：地址已在使用中

当我删除 $port 时，它没有显示错误，但套接字服务器一直在监听并且没有响应

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:04:55.973

> 警告：socket_bind()：无法绑定地址 [98]：地址已在使用中

这意味着您的服务器已经在使用您选择的端口。您必须选择另一个端口，直到找到一个未使用的端口。

# iphone - 在 ios 的 zxing api 中找不到 BarcodeFormat.h 文件

> ID：13698398
> 
> 赞同：0
> 
> 时间：2012-12-04T07:59:24.913
> 
> 标签：iphone, ios, xcode, zxing

在我的项目中集成 Zxing API。大多数错误从 api 中删除，但此错误不会删除，并且网上没有可用的指导。我能做些什么来消除这个错误。![在此处输入图像描述](../Images/3f5169c730c14b1db91297f4332ec3be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:39:31.557

编译器希望此头文件位于保存项目的当前目录中。

如果它不存在，则在 < > 中为其提供绝对路径，就像我们对框架所做的那样，例如

```
#import <Cocoa/Cocoa.h> 
```

# iphone - UITableViewCell 内的 UITextField

> ID：13698400
> 
> 赞同：0
> 
> 时间：2012-12-04T07:59:30.980
> 
> 标签：iphone, objective-c, ios, ipad

这个话题已经讨论过好几次了，我知道如何`UITextField`在`UITableViewCell`.

我知道`UITableViewController`使用原型单元，我必须创建一个自定义子类，`UITableViewCell`然后将`UITextField`我创建的子类连接`IB`到子类中。

为什么使用静态表格视图单元格，我必须以编程方式创建 UITextField？我找不到使用 IB 为我的静态表格视图单元格创建 UITextField 的方法。

在使用静态表格视图单元格时尝试拖动和创建 UITextField 时，界面构建器似乎没用。有谁知道为什么？

当 IB 会为我使用原型单元格时，我讨厌不得不为静态单元格使用这样的代码：

```
 if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(0, -2, 650, 18)];
        textField.placeholder = @"Enter Text";
        [textField setFont:[UIFont fontWithName:@"System" size:16]];
        textField.backgroundColor = [UIColor clearColor];
        textField.delegate = self;
        textField.highlighted = NO;
        cell.accessoryView = textField;
    } 
```

# java - 如何使用带有 Spring 集成的 MyBatis 将 unicode 插入 Oracle NVARCHAR

> ID：13698405
> 
> 赞同：2
> 
> 时间：2012-12-04T07:59:42.503
> 
> 标签：java, spring, jdbc, ibatis, mybatis

```
 INSERT INTO rbp_users
       (user_id, user_name, passwd, bank_id, descr, stat, p_exp, user_type_id, email_address)
    VALUES
       (rbp_userid_seq.NEXTVAL ,
        'any_user_name',
        'some_encrypted_password',
        1,
        N'əəııööğğşşççüü', --unicode string
        'E',
        SYSDATE,
        2,
        NULL); 
```

上面插入带有 NVARCHAR 字段“descr”的 Oracle 表可以通过 PL/SQL Developer 正常工作。但是我不能在 MyBatis DAO Mapper XML 的 unicode 字段之前写“N”：

```
<insert id="addUser" parameterType="User" flushCache="true">
    INSERT INTO rbp_users
       (user_id, user_name, passwd, bank_id, descr, stat, p_exp, user_type_id, email_address)
    VALUES
       (rbp_userid_seq.NEXTVAL ,
        #{userName,            javaType=String,     jdbcType=VARCHAR},
        pswcode(#{password,    javaType=String,     jdbcType=VARCHAR}),
        #{bankId,              javaType=Integer,    jdbcType=NUMERIC},
        N#{description,         javaType=String,     jdbcType=NVARCHAR},
        #{userStatus,          javaType=String,     jdbcType=VARCHAR},
        #{passwordExpireDate,  javaType=Date,       jdbcType=DATE},
        #{userTypeId,          javaType=Integer,    jdbcType=NUMERIC},
        #{emailAddress,        javaType=String,     jdbcType=VARCHAR})

    <selectKey resultType="java.lang.Integer" keyProperty="userId">
        SELECT rbp_userid_seq.currval from dual
    </selectKey>
</insert> 
```

这引发和错误：

```
org.springframework.jdbc.InvalidResultSetAccessException：使用 JdbcType VARCHAR 为参数 #8 设置 null 时出错。尝试为此参数设置不同的 JdbcType 或不同的 jdbcTypeForNull 配置属性。原因：java.sql.SQLException：无效的列索引
; SQL [] 的 ResultSet 访问无效；嵌套异常是 java.sql.SQLException: Invalid column index
    在 org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:237)
    在 org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
    在 org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:71)
    在 org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:365)
    在 $Proxy20.insert（未知来源）
    在 org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:237)
    在 org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:79)
    在 org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:40)
    在 $Proxy37.addUser（未知来源）
    在 com.azercell.paymentgateway.service.UserServiceImpl.addUser(UserServiceImpl.java:156)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
    在 org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    在 org.springframework.aop.aspectj.AspectJAfterAdvice.invoke(AspectJAfterAdvice.java:42)
    在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    在 org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    在 org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    在 $Proxy38.addUser（未知来源）
    在 com.azercell.paymentgateway.service.UserServiceImplTest.testAddUser(UserServiceImplTest.java:101)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    在 org.junit.runners.model.FrameworkMethod.invokeExplosively（FrameworkMethod.java:41）
    在 org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    在 org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    在 org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    在 org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
    在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:242)
    在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:58)
    在 org.junit.runners.ParentRunner.runChildren(ParentRunner.java:240)
    在 org.junit.runners.ParentRunner.access$000(ParentRunner.java:48)
    在 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:233)
    在 org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    在 org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    在 org.junit.runners.ParentRunner.run(ParentRunner.java:303)
    在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    在 org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    在 com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
原因：java.sql.SQLException: Invalid column index
    在 oracle.jdbc.driver.OraclePreparedStatement.setNullCritical（OraclePreparedStatement.java:4554）
    在 oracle.jdbc.driver.OraclePreparedStatement.setNull（OraclePreparedStatement.java:4541）
    在 oracle.jdbc.driver.OraclePreparedStatementWrapper.setNull（OraclePreparedStatementWrapper.java:1283）
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 org.apache.tomcat.jdbc.pool.interceptor.AbstractQueryReport$StatementProxy.invoke(AbstractQueryReport.java:235)
    在 $Proxy83.setNull（未知来源）
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke（PreparedStatementLogger.java:66）
    在 $Proxy84.setNull（未知来源）
    在 org.apache.ibatis.type.BaseTypeHandler.setParameter(BaseTypeHandler.java:39)
    在 org.apache.ibatis.executor.parameter.DefaultParameterHandler.setParameters(DefaultParameterHandler.java:91)
    在 org.apache.ibatis.executor.statement.PreparedStatementHandler.parameterize(PreparedStatementHandler.java:77)
    在 org.apache.ibatis.executor.statement.RoutingStatementHandler.parameterize(RoutingStatementHandler.java:58)
    在 org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:71)
    在 org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:44)
    在 org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:108)
    在 org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:75)
    在 org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:145)
    在 org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:134)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:355)
    ... 51 更多

```

如果从“N#{description, javaType=String, jdbcType=NVARCHAR}”中删除“N”，则不会引发异常，但插入的字符串会损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:25:15.843

使用以下参数执行 Tomcat 后，我​​可以解决问题：

```
-Doracle.jdbc.defaultNChar=true
-Doracle.jdbc.defaultNChar=true 
```

来源：[将国家字符插入 oracle NCHAR 或 NVARCHAR 列不起作用](https://stackoverflow.com/questions/6509751/inserting-national-characters-into-an-oracle-nchar-or-nvarchar-column-does-not-w)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:47:11.437

我认为您根本不必在 XML 中的 unicode 字段之前提及“N”，因为您正在提及其中的 jdbcType。

在某些环境中，系统的默认编码不能很好地与 XML 文件喜欢的 unicode 编码配合使用。如果您在使用 Reader 作为输入解析 iBATIS XML 文件时遇到编码问题，您可以更改默认编码以匹配 XML 文件的编码。例如：

```
 String resource = “properties/sqlMap-config.xml”;
 Resources.setCharset(Charset.forName('UTF-8”)); // change the default encoding
 Reader reader = Resources.getResourceAsReader(resource);
 SqlMapClient sqlMap = SqlMapClientBuilder.buildSqlMap(reader); 
```

“<strong>setCharset”方法会将用于所有未来调用的编码更改为“<strong>getResourceAsReader”。

# reporting-services - SSRS 2008 R2 域用户分配了角色但无法访问

> ID：13698406
> 
> 赞同：0
> 
> 时间：2012-12-04T07:59:52.823
> 
> 标签：reporting-services, ssrs-2008

我在我的服务器上安装了 SSRS 2008 R2，需要将来自 Business Intelligence Studio 的报告部署到另一台计算机上，该计算机位于同一域中并在域用户（非管理员）下。

首先，我收到错误“权限不足”。然后我在服务器 (http://localhost/Reports/) 上启动报告管理器，并在站点设置/安全下将我的域用户添加到系统管理员和系统用户角色，重新启动服务，但仍然出现相同的错误。

然后我在报表管理器中创建了一个文件夹，并将域用户添加到所有可用角色（浏览器、发布者等）。之后，它不会在 BIS 中显示该错误，而是显示登录对话框（尽管我已经在 Windows 中以域用户身份登录）。我输入了登录名和密码，但它只是再次询问并且什么也不做。

您能否建议我如何为非管理员域用户启用对该服务或至少某个文件夹的访问？

**更新：**尝试在该登录窗口中输入管理员登录详细信息，但它也只是再次显示。

# ios - 在两个 UIWebView 之间翻转动画

> ID：13698407
> 
> 赞同：0
> 
> 时间：2012-12-04T07:59:53.133
> 
> 标签：ios, animation, uiwebview, flip

我想在一个 UIViewController 内的两个 UIWebView 之间翻转动画。

我已将所有内容放在情节提要中，但我只能在两个 UIViewController 之间切换。

知道如何使用翻转水平动画在两个 UIWebView 之间翻转吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:11:37.930

假设你有 view1 和 view2，从 view1 翻转到 view2：

```
[UIView beginAnimations:@"flipView" context:nil];
[UIView setAnimationDuration:0.3f];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:view1 cache:YES];
[view1 addSubview:view2];
[UIView commitAnimations]; 
```

我没有尝试我的代码，但我希望它会对你有所帮助。

# jquery - jquery：下拉菜单中 var 的 if 语句

> ID：13698413
> 
> 赞同：1
> 
> 时间：2012-12-04T08:00:13.087
> 
> 标签：jquery, drop-down-menu, if-statement, var

我为下拉菜单应用了替换，并且 jQuery 替换保持为空，因为 select-option-form 的预选值未定义（这些值是动态生成的）。当我单击替换并选择一个选项时，它可以正常工作。这是替换代码的摘录，我认为它是造成错误的原因：

```
function createDropDownSF(){
  var searchForm_type = $("#searchForm_type");
  var selected = searchForm_type.find("option[selected]");
  var options = $("option", searchForm_type); 
```

因此，我尝试使用此代码扩展该函数，以使该函数在没有选定值时使用第一个可用选项，但它不起作用：

```
if (selected.is("undefined")) {
    searchForm_type.find("option")[0];
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:54:03.720

你是那个意思吗？

```
function createDropDownSF(){
  var searchForm_type = $("#searchForm_type");
  var selected = searchForm_type.find("option[selected]");
        $("select option:selected").length > 0;
        $('select option').first().attr('selected', true);
  var options = $("option", searchForm_type); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:12:06.913

```
<select id="test">
<option>1</option>
<option>2</option>
<option selected="selected">3</option>
<option>4</option> 
```

```
$(function () {

    if ($("#test option:selected").length > 0) {
        // something is selected
        alert("selected");
    } else {
        // nothing is selected
        $('#test option').first().attr('selected', true);
    }
}); 
```

我不知道如何设置没有选择值的选择，但是这段代码应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:16:26.857

我会首先尝试从所有选择的选项中获取一个列表，并检查长度是否 > 0。

```
 $("select option:selected").length > 0 
```

然后您可以使用 JQuery 选择第一个选项。

```
$('select option').first().attr('selected', true); 
```

# c# - 根据集合中的子类类型从集合中选择项目

> ID：13698416
> 
> 赞同：0
> 
> 时间：2012-12-04T08:00:26.863
> 
> 标签：c#

```
class A {}
class B : A {}
class C : A {}

ICollection<A> myCollection;
var myresults = myCollection.Where(item => item.GetType() is C); 
```

鉴于 where 谓词上方的层次结构实际上什么都不做。

如何构造 where 谓词以从集合中返回所有 C 类型的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T08:01:45.070

而不是你可以使用的地方[`OfType<TResult>`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

```
var myresults = myCollection.OfType<C>(); 
```

# c# - “如果”条件比 ?? 和铸造

> ID：13698421
> 
> 赞同：10
> 
> 时间：2012-12-04T08:01:04.690
> 
> 标签：c#, performance, casting, null-coalescing-operator

对于相同的功能，我有以下两种方法 - 一种带有“if”条件，一种带有“?? 和铸造”。哪种方法更好？为什么？

代码：

```
 Int16? reportID2 = null;
  //Other code

  //Approach 1
  if (reportID2 == null)
  {
       command.Parameters.AddWithValue("@report_type_code", DBNull.Value);
  }
  else
  {
     command.Parameters.AddWithValue("@report_type_code", reportID2);
  }

  //Approach 2
  command.Parameters.AddWithValue("@report_type_code", ((object) reportID2) ?? DBNull.Value); 
```

**更新**

根据答案，以下是 `??`

1.  提高可读性
2.  减少程序流的分支深度（降低圈复杂度）

注意：作为对象的铸造成本可以忽略不计。

**参考**

1.  [空合并运算符 - 为什么要强制转换？](https://stackoverflow.com/questions/6333216/null-coallescing-operator-why-casting?rq=1)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T08:04:41.107

空合并运算符 ( `??`) 是一种更好的方法，因为它与您的初始块执行相同的操作，但在一个易于阅读的行中。*这使代码更具可读性和可维护性。*

这是语法糖的众多示例之一，也就是说，代码语句是表示常用思想的“快捷方式”。`i++`是另一个例子，因为它取代了`i = i + 1`. 它更干净、更简单，就像`??`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T08:02:23.647

在这种情况下，我总是使用[空合并运算符：](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
command.Parameters.AddWithValue("@name", value ?? DBNull.Value);

command.ExecuteScalar() as int? ?? -1; 
```

等等

它增加了代码的可读性，减少了分支深度。还专门为与数据库相关的方案（例如 ADO.NET）而创建。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T08:06:35.790

在您的示例中，方法 2 更好。你[不应该重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，apprach 1 有两次代码和参数名称。如果要更改参数名称，则应在两个地方进行，这很麻烦。

与之比较的真正代码是这样的：

```
object value = DBNull.Value;
if (reportID2 != null)
{
    value = reportID2;
}
command.Parameters.AddWithValue("@report_type_code", value); 
```

是否使用这个或`??`运营商是个人喜好的问题。我认为`if`更清楚，特别是因为在合并运算符的情况下需要括号和强制转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:09:11.797

我更喜欢`??`运营商。尽管简洁并不总能带来更好的可读性，但在这种情况下确实如此，因为作为读者，您不必比较 and 的两行之间的相同和不同之`if`处`else`。此外，您消除了重复代码（这总是好的！）。考虑重命名数据库字段名称的情况`@report_type_code`。然后你只需要在一个地方改变它。

# css - bootstrap - ul inside .well 向外，添加 .row wrks 但跨越容器边界

> ID：13698429
> 
> 赞同：0
> 
> 时间：2012-12-04T08:01:57.327
> 
> 标签：css, twitter-bootstrap

这是我的结构：

```
 <div class='container'>
    <div class='well>
       <ul class='pull-left unstyled'>
          <li>abc</li><li>def</li>
       </ul>

       <ul class='pull-right unstyled'>
          <li>abc</li><li>def</li>
       </ul>
    </div>
 </div> 
```

上面的结果是， ul 内部的东西正在“井”（底部）之外。

所以，我添加了类 'row'，它起作用了，但是，每当我添加类 'row' 时，它的宽度都会越过容器的边界。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:11:57.410

.well 样式中没有任何内容可以清除浮动。如果你有两个浮动项目，就像这里的两个 uls 一样，那么容器将崩溃。

看看这个答案。 [http://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

或者只是将其添加到样式表的底部。

```
.well:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:33:29.320

添加到包含ul的div中，就可以解决问题了。

# java - 使用红绿灯示例说明调用的方法

> ID：13698431
> 
> 赞同：0
> 
> 时间：2012-12-04T08:02:13.150
> 
> 标签：java

下面的代码出现在我的书中关于方法的章节中。我对几件事有点困惑。

1.  当我相信该`run()`方法正在调用该`createFilledCircle`方法时，我的理解是否正确？
2.  方法是`run()`接收者还是`createFilledCircle`发送者？
3.  对于这三个`add(createFilledCircles...red,yellow and green);`，程序员如何知道参数中允许哪些信息？`(x location, y location, width of figure, height of figure)`中使用的格式是`add(createFilledCircle)`？

```
import acm.program.*;
import acm.graphics.*;
import java.awt.*;

public class StopLight extends ConsoleProgram {
  public void run() {
    double cy = getWidth() / 2 ;
    double cx=  getHeight() / 2; 

    double fx = cx - (FRAME_WIDTH / 2);
    double fy = cy - (FRAME_HEIGHT /2 );

    double dy = (FRAME_HEIGHT / 4 ) + (LAMP_RADIUS / 2);

    GRect frame = new GRect (fx, fy, FRAME_WIDTH, FRAME_HEIGHT);
    frame.setFilled(trye);
    frame.setColor(Color.GRAY);
    add(frame);

    add(createFilledCircle(cx, cy-dy, LAMP_RADIUS, Color.RED));
    add(createFilledCircle(cx, cy, LAMP_RADIUS, Color.YELLOW));
    add(createFilledCircle(cx, cy + dy, LAMP_RADIUS, Color.GREEN));
  }

  private GOval createFilledCircle (double x, double y, double r, Color color) {
    GOval circle = new GOval (x -r, y -r, 2 * r, 2 * y );
    circle.setFilled(true);
    circle.setColor(color);
    return circle; 
  }

  private static final double FRAME_WIDTH = 50; 
  private static final double FRAME_HEIGHT = 100;
  private static final LAMP_RADIUS = 10; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:11:58.787

> 1）当我认为 run() 方法正在调用 createFilledCircle 方法时，我的理解是否正确？

是的，这是正确的。它在内部被调用，因此输出`createFilledCircle`是方法的参数`add`。

```
add(createFilledCircle(cx, cy-dy, LAMP_RADIUS, Color.RED)); 
```

> 2) run() 方法是接收者，createFilledCircle 是发送者吗？

我认为这不是该代码的正确术语。没有发送和接收。对象在内部创建`createFilledCircle`。`run`将该对象添加到自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:12:15.273

`1) Is my understanding correct when I believe that the run() method is calling the createFilledCircle method?`

是的。

`2) Is the run() method the receiver and the createFilledCircle the sender?`

在面向对象编程中，`sender`通常`receiver`是参与通信的对象或类。在您的情况下，从inside 调用方法`StopLight`时，实例本身既是发送者又是接收者。再举一个例子，在 中，instance ( ) 是消息的发送者，也是消息的接收者（在 Java 中，OOP 意义上的消息基本上是一个方法调用）。`createFilledCircle``run``frame.setFilled(trye);``StopLight``this``frame``setFilled`

`3) for the three add(createFilledCircles...red,yellow and green); how does the programmer know what information is permitted in the argument? Is the format of (x location, y location, width of figure, height of figure) being used in the add(createFilledCircle)?`

程序员通常通过文档或查看源代码知道这一点:-)

`add`在您的类层次结构中必须至少有一个方法，并且您需要查看这些方法的参数列表以了解允许哪些参数。理想情况下，有一个可用的 JavaDoc 文档，它不仅列出了参数类型本身，而且还提供了一些关于如何使用它们以及相应方法实际作用的见解。在您的情况下，由于`createFilledCircle`返回`GOval`引用，因此需要有一个`add`将兼容的类型`GOval`作为参数的方法。同样，该`createFilledCircle`方法（在您的类本身中声明）采用三个`double`值和一个`Color`对象引用，这实际上也是您调用它的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:12:34.497

1）是的 - 它调用它

```
add(createFilledCircle(cx, cy-dy, LAMP_RADIUS, Color.RED));
  add(createFilledCircle(cx, cy, LAMP_RADIUS, Color.YELLOW));
  add(createFilledCircle(cx, cy + dy, LAMP_RADIUS, Color.GREEN)); 
```

2) 它是发送者，但 add() 方法是接收者。

3) createFilledCircle 指定了它的方法参数...

```
createFilledCircle (double x, double y, double r, Color color) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:13:05.413

> 1）当我认为 run() 方法正在调用 createFilledCircle 方法时，我的理解是否正确？

是的。

> 2) run() 方法是接收者，createFilledCircle 是发送者吗？

我不知道您所说的“接收者”和“发送者”是什么意思。这些不是人们在谈论被调用的方法时通常使用的术语。

（它看起来像 Smalltalk 编程语言中的术语，这是一种早期的面向对象语言。鉴于此，它正好相反：你会说`run`是发送者和`createFilledCircle`接收者。）

> 3) 为三个添加(createFilledCircles...red,yellow and green); 程序员如何知道参数中允许哪些信息？add(createFilledCircle) 中是否使用了（x 位置、y 位置、图形宽度、图形高度）的格式？

方法的声明`createFilledCircle`指定了该方法需要哪些参数：三个`double`值和一个`Color`值。

在这样的一行中：

```
add(createFilledCircle(cx, cy-dy, LAMP_RADIUS, Color.RED)); 
```

发生的情况是`createFilledCircle`首先使用参数调用`cx, cy-dy, LAMP_RADIUS, Color.RED`，然后将方法的返回值（`createFilledCircle`一个`GOval`值）传递给`add`方法。与此相同：

```
GOval result = createFilledCircle(cx, cy-dy, LAMP_RADIUS, Color.RED);
add(result); 
```

# c# - WCF 使用自定义 ApplicationPool Identity 慢 3 倍

> ID：13698437
> 
> 赞同：4
> 
> 时间：2012-12-04T08:03:00.950
> 
> 标签：c#, wcf, performance, iis-7

我在 IIS 7.5 中托管了一个带有 HTTPS、TCP 和命名管道绑定的 WCF 应用程序。

目前正在开发新版本的 web 服务，试图提高性能，当我发现一些奇怪的东西时，我正在同一台服务器上使用客户端（VS 控制台客户端）和服务器（IIS 托管）对其进行测试：在进行 100- 的测试时对返回简单字符串的方法的 1000 次调用，内置帐户的性能优于自定义 ApplicatoilPool 身份，域用户，速度大约是 3 倍。

由于服务需要执行的操作，我需要 AppPool 身份成为域管理员。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:27:32.697

似乎我找到了“问题”，尽管我不太明白。

正如我提到的，我使用了一个 VS 控制台客户端，即在 Visual Studio 中调试。在使用进程监视器进行了一些分析之后，在有和没有内置 AppPool 用户的情况下运行，我看到 Visual Studio 做了一些时髦的事情。在域管理员下运行 AppPool 时，VS 在不同的用户下产生了一个额外的 .vshost.exe 进程（由于只看到我没有费心寻找的 SID 而看不到），该进程在网络负载下迅速上升.

我构建了控制台项目并在 VS 之外运行了可执行文件，发现 AppPool 用户之间没有明显差异，而且速度比 VS 快很多倍。不知道*为什么*会这样。

我的结论是“如有疑问，请运行 Process Monitor！” 而且我不应该如此依赖 Visual Studio 调试器来进行性能测试。

# html - 萤火虫，检查元素等。有没有办法隐藏它？

> ID：13698446
> 
> 赞同：1
> 
> 时间：2012-12-04T08:03:58.173
> 
> 标签：html, firebug, inspect-element

我只是想知道例如我有这样的代码：

```
<input type="text" value="value" id="txtbox" style="display:none" /> 
```

有没有办法在萤火虫中无法抓取或找到它？或任何其他检查元素？

希望我的问题有意义提前感谢您的回复:) ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:09:10.287

不需要。服务器提供的 HTML 文档中的任何内容都可以轻松地通过对其执行 GET 请求并将结果读取为纯文本来轻松处理。因此，您在 HTML、CSS、JavaScript 或 FooScript 中尝试的任何内容都不会产生任何效果。

# mysql - 我怎样才能实现这个 SQL 表连接？

> ID：13698447
> 
> 赞同：0
> 
> 时间：2012-12-04T08:03:57.943
> 
> 标签：mysql, sql, sql-server, database-design

我一直在试图弄清楚如何在不同的表之间创建链接，但我没有运气破解这个谜团。我学得越多，我就越质疑我应该问什么问题。我制作了一些表格图来展示我想要实现的目标......

我有一张衬衫桌，看起来像这样：

![衬衫桌](../Images/5b98c59a292b47a4b6ae103bd737e74f.png)

请注意，在标有“qp_price”和“o_price”的列中，我有文本而不是价格，这是因为我想将其连接到此表：

![价位表](../Images/4cabf7df8e49a2dc2c7842ca6ec703dd.png)

“qp_price”和“o_price”的值等于价格表中“price_cat”列中的值之一。这是我在未来试图简化价格管理的方式。在衬衫表中，您会看到重复的值，这是因为它们的价格相同，除了男士衬衫之外，还有女士圆领衫、男孩、女孩和婴儿。我想将它们链接到一个新的衬衫表中，结果如下：

![大师衬衫](../Images/cc6f9a29a2d1dadba342cc7916f44fd9.png)

我还想知道索引以及将其创建为索引是否会更好：

![衬衫指数](../Images/86752005fc59fde8e202f6fab969ddc3.png)

然后将其注入到 shirts_master 表中，但是您执行此操作并将“clr_options”和“qty”列添加到 shirts_master 表中。我希望它以两种不同的价格进行组织，因为我有两种类型的自定义服务将调用相应的列。最后，我仍然想要单独的衬衫和价格表，只是链接到另一个表，这样我就可以更新它们并让它通过链接自动在主表中读取它。把这些放在一起的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:28:29.783

您的列`qp_price`和`o_price`来自 SHIRT 表的列应该是引用表 PRICE_LIST中列的**外键。**`price_id`那么您将不需要`price_cat`PRICE_LIST 表中的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:29:03.863

不太确定你想做什么，但你可以通过`shirts_master`简单的加入来获得你的

```
select s.shirt_id, s.shirt_name, s.shirt_type, s.shirt_size,
       qp.price as qp_price, o.price as o_price, s.clr_options, s.qty
from shirts s
join price_list qp on qp.price_cat = s.qp_price
join price_list o on o.price_cat = s.o_price; 
```

如果您想将此作为视图，可以使用

```
create view shirts_master as
select s.shirt_id, s.shirt_name, s.shirt_type, s.shirt_size,
       qp.price as qp_price, o.price as o_price, s.clr_options, s.qty
from shirts s
join price_list qp on qp.price_cat = s.qp_price
join price_list o on o.price_cat = s.o_price; 
```

# c - 从c中的字符串中提取double

> ID：13698449
> 
> 赞同：2
> 
> 时间：2012-12-04T08:04:08.847
> 
> 标签：c, floating-point, double, extract, floating-point-conversion

我想用 C 编写一个函数，它有一个字符串参数并返回一个双精度数。例如，当字符串是`fsldnf213414fasfa`它应该返回`213414`。但它也应该能够像`fasfasf123.412412fasfff`as一样返回浮点数`123.412412`。

我已经有一个只能提取整数而不是浮点数的函数：

```
double get_num(const char* s) 
{
    unsigned int limit = UINT_MAX / 10;
    double value = 0;
    if ( !s ) {
        return 0;
    }
    for ( ; *s; ++s ) {
        if ( value < limit ) {
            if ( isdigit(*s) ) {
                value *= 10;
                value += (*s - '0');
            }
        }
        else {
            return UINT_MAX;
        }
    }
    return value;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:19:06.123

首先跳过非数字，然后用于[`strtod`](http://en.cppreference.com/w/c/string/byte/strtof)将数字转换为 a `double`：

```
double get_double(const char *str)
{
    /* First skip non-digit characters */
    /* Special case to handle negative numbers and the `+` sign */
    while (*str && !(isdigit(*str) || ((*str == '-' || *str == '+') && isdigit(*(str + 1)))))
        str++;

    /* The parse to a double */
    return strtod(str, NULL);
} 
```

有关工作示例，请参见[此处。](http://ideone.com/uop4ae)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T08:32:59.333

您可以检查它是否解析了任何字符串，而不是使用 isdigit() 或其他事后猜测的 strtod()：

```
char temp[] = "dgsgsd-3.5454dfds";

char *t1 = temp;
char *t2;
double d;

do
{
    if(*t1 == 0) return INVALID;
    d = strtod(t1, &t2);    
} while(t2 == t1++);

return d; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T08:16:35.407

```
for (; *s; s++) {
    if (!isalpha(*s)) {
        value = strtod(s, NULL);
        break;
    }
} 
```

结果：

```
"fasfasf-123.412412fasfff"
"fasfasf+123.412412fasfff"
"fasfasf.123412412fasfff"

-123.412412
123.412412
0.123412 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-03T23:58:23.077

扩展[@JasonD](https://stackoverflow.com/a/13698811/2410359)关于使用的好主意`strtod()`。

完整的有效字符串包括以下和可能的其他一些深奥的实现特定的字符串。

```
"123.45"
" 123.45"
"+123.45"
"-123.45"
".45"
"INF"  (or maybe INFINTY)
"NAN"
"123,45"  (when , is the locale decimal point
"123e45"
"0x123p45" 
```

然而，断言数字字符串不需要以控制字符或空格开头是合理的。

*可以谨慎地*使用`is....()`函数来拒绝像.*`isgraph()`*

 *> 该`isgraph`函数测试除空格 (' ') 之外的任何打印字符。

```
#include <ctype.h>
#include <stdlib.h>

// Return fail flag.
int seek_double_in_string(double *dest, const char *s) {
  if (s) {
    // Perhaps allow seek_double_in_string(NULL, s) ?
    double dummy;
    if (dest == NULL) {
      dest = &dummy;
    }

    while (*s) {
      if (isgraph(*(unsigned char*)s)) {  // Use s as-if it was `unsigned char *`
        char *endtpr;
        *dest = strtod(s, &endptr);
        if (s != endptr) {
          // Some conversion occurred - pedantic code might want to detect overflow.
          return false; // no error
        }
      }
      s++;
    }
  }

  // Form a default answer if desired like 0.0 or NAN
  *dest = 0;
  return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-03T22:46:25.803

我希望能帮助你。

```
double stringtof(char *s) {
  int i = 0, j, k = 0;
  int llen = 0;

  llen = strlen(s);
  for (i = 0; i < llen; i++) {
    if (isdigit(s[i]) == 1) {
      break;
    }
  }

  char str2[llen - i];

  for (j = i; j < llen; j++) {
    str2[k] = s[j];
    k++;
  }
  // * val=atof(str2);
  return (atof(str2));
} 
```

[ideone](https://ideone.com/UhjEXn)*

# android - 解析没有任何子节点的 XML 文件

> ID：13698451
> 
> 赞同：1
> 
> 时间：2012-12-04T08:04:11.340
> 
> 标签：android, android-xml, android-parser

我是 android 开发新手，我想使用 Dom Parser 解析一个特定的 xml 文件。xml 结构是这样的。

```
<Images>
   <image link="a.tgcdn.net/images/products/zoom/e554_android_plush_robot.jpg"/>
   <image link="a.tgcdn.net/images/products/zoom/e554_android_plush_robot.jpg"/>
   <image link="http://cdn.androidpolice.com/wp-content/themes/ap1/images/android1.png"/>
   <image link="http://cdn.androidpolice.com/wp-content/themes/ap1/images/android1.png"/>
   <image link="http://cdn.androidpolice.com/wp-content/themes/ap1/images/android1.png"/>
</Images> 
```

我想将这些 Web 链接添加到数组列表中。建议我解决它..甚至与此相关的任何链接或教程都会有所帮助。谢谢。

这是完整的代码..

```
public class MainActivity extends Activity {

    String xmlurl       = "--url of xml---";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ArrayList<String> mImageLink = new ArrayList<String>();
        try {
            URL url = new URL(xmlurl);
            XMLParser   parser  =   new XMLParser();
            String      xml     = parser.getXMLfromUrl(url);
            Document    doc     = parser.getDomElement(xml);
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc1 = db.parse(new InputSource(url.openStream()));
            doc1.getDocumentElement().normalize();

            NodeList nodeList = doc1.getElementsByTagName("photo");

            for (int i = 0; i < nodeList.getLength(); i++) {
                Element websiteElement = (Element) nodeList.item(i);
                nodeList = websiteElement.getChildNodes();              
                mImageLink.add(websiteElement.getAttribute("link"));

            }
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

        for(int i=0;i<mImageLink.size();i++){
            Log.d("Photo link --- " + i,mImageLink.get(i));
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:00:46.543

请使用以下代码使用 DOM Parser 解析上述 XML 文件。

```
public class MainActivity extends Activity {

    ArrayList<String> mImageLink;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            mImageLink = new ArrayList<String>();

            InputStream is = getResources().openRawResource(R.raw.temp);
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(is));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("image");

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                Element fstElmnt = (Element) node;

                mImageLink.add(fstElmnt.getAttribute("link"));

            }
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }
    }
} 
```

有关更多信息，请参见下面的链接。

[使用 DOM 解析器进行 XML 解析](http://www.androidpeople.com/android-xml-parsing-tutorial-%E2%80%93-using-domparser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:06:46.073

使用[dom4j](http://dom4j.sourceforge.net/dom4j-1.6.1/)库，它是 SAXReader。

```
 InputStream is = FileUtils.class.getResourceAsStream("file.xml");

    SAXReader reader = new SAXReader();
    org.dom4j.Document doc = reader.read(is);
    is.close();
    Element content = doc.getRootElement();  //this will return the root element in your xml file
    List<Element> methodEls = content.elements("element"); // this will retun List of all Elements with name "element" 
```

对于 DOM 解析，您可以使用同一个库的[DOMReader](http://dom4j.sourceforge.net/dom4j-1.6.1/apidocs/org/dom4j/io/DOMReader.html)

# orchardcms - 带有替代形状摘要的果园 CMS 问题 - 剃刀

> ID：13698453
> 
> 赞同：2
> 
> 时间：2012-12-04T08:04:32.293
> 
> 标签：orchardcms

我使用 Bootstrap 主题通过 Shape tracer 模块创建了一个替代形状。我为这种类型创建了许多字段。我创建的自定义类型称为“BooksForSale”。我可以使用以下代码显示作者：

```
<p>@Model.ContentItem.BooksForSale.Author.Value</p> 
```

没关系。

但是，我想显示此类型的正文（已添加此部分）并仅显示前 150 个字符。我使用了以下内容：

```
@{ 
    Orchard.ContentManagement.ContentItem contentItem = Model.ContentPart.ContentItem;
    string bodyHtml = Model.Html.ToString();
    var body = new HtmlString(Html.Excerpt(bodyHtml, 500).ToString().Replace(Environment.NewLine, "</p>" + Environment.NewLine + "<p>")); 
}
<div class="post-description">
    <p>@body</p>
</div>
@Html.ItemDisplayLink(T("Read More...").ToString(), contentItem) 
```

当作者显示正常时，由于 Read more 行而崩溃。

我从“Parts.Common.Summary.cshtml”中提取了这个 - 它在那里工作。

我想要的是显示正文的前 150 个字符，并有一个链接“阅读更多...”显示并链接到实际的内容项。

不确定有人可以在这里提供帮助，但我想我可能会问...

西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:54:06.627

*如果您指定它是如何*崩溃的，那将真的非常有帮助。看到您的第一个代码示例是如何工作的，我怀疑您需要替换`Model.ContentPart.ContentItem`为`Model.ContentItem`. 第二行在 Parts.Common.Body.Summary.cshtml 中工作正常，因为有`Model`正文部分。你复制的地方，它可能是另一部分（但你没有提供足够的细节让我知道：你甚至没有给出你创建的替代模板的名称）。所以你需要做的就是把它投射到身体部位，像这样：

```
string bodyHtml = contentItem.As<BodyPart>().Html.ToString(); 
```

# javascript - 是否可以在单击 jquery 灯箱的关闭按钮时触发事件

> ID：13698456
> 
> 赞同：1
> 
> 时间：2012-12-04T08:04:35.807
> 
> 标签：javascript, jquery, jquery-plugins, lightbox

我正在使用 Jquery LightBox 插件。它工作正常。单击 Jquery LightBox 的关闭按钮后，我需要打开一个对话框。但是我可以这样做...是否可以跟踪灯箱的关闭事件并触发另一个事件？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:41:32.503

用以下代码替换 jquery-lightbox-0.5.js 中的 _finish 函数：

```
function _finish() {
    $('#jquery-lightbox').remove();
    $('#jquery-overlay').fadeOut(function() { $('#jquery-overlay').remove(); });
    // Show some elements to avoid conflict with overlay in IE. These elements appear above the overlay.
    $('embed, object, select').css({ 'visibility' : 'visible' });

    var callback = settings.onClose;
    if($.isFunction(callback)) {
         callback.call();
    }
} 
```

在activeImage之后的jquery-lightbox-0.5.js文件顶部的设置中添加onClose；

```
// Don´t alter these variables in any way
imageArray: [],
activeImage: 0,         
onClose: null 
```

用法 ：

```
$('#gallery a').lightBox({ onClose : function() { alert('Hi'); }  } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:25:37.237

从源头

```
$('#lightbox-loading-link,#lightbox-secNav-btnClose').click(function() {
    _finish();
    return false;
}); 
```

所以只需添加一个事件处理程序`#lightbox-secNav-btnClose`，它应该可以工作

```
$("body").on("click", "#lightbox-secNav-btnClose", function() {
    console.log("lightbox closed");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:44:03.717

根据个人经验，我可以推荐您使用[Colorbox](http://www.jacklmoore.com/colorbox)

`onClosed`您在颜色框的 init 上有属性，因此很容易：

```
$("a.lightbox").colorbox({
    onClosed: function() {
        console.log('closed')
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T10:37:04.900

这对我有用，无需修改 lightbox.js 中的任何内容：

```
<div onclick="close_lightbox()">Close Button</div>

function close_lightbox()
{
    lightbox.end();
} 
```

# javascript - 获取数组元素的索引号

> ID：13698467
> 
> 赞同：2
> 
> 时间：2012-12-04T08:05:38.490
> 
> 标签：javascript, jquery, arrays, jquery-mobile

我有json，里面有对象数组。我建立我的页面取决于这个数组中的元素。如果没有称为点的键的重复值，我会使用一些信息和描述呈现页面，使用点的值在数组中查找此元素。但是，如果我有 2 个或更多重复的称为点的键值，我会渲染这些元素的列表。在这种情况下，我不能使用点的值来查找数组中的元素。我知道我可以使用数组元素的索引号，然后将它作为参数传递给我的函数以查找和构建信息和描述，但我不知道该怎么做。如何获取数组中元素的索引号？

PS 如果需要可以提供我的代码

我正在使用的代码

```
var allRewards = null;
$("#reward").live('pagecreate', function(e) {
    var request = $.ajax({
        type: "GET",
        url: "example.com/test.json"
        dataType: "json",
        error: function (data, textStatus){
      console.log( "it`s error" );
      console.log( status );
      console.log( data );},
        success: function (data, textStatus){

        console.log( "success" );
        console.log( status );
        console.log( data );
         }
        })
        request.success(function(data, textStatus){
            var lis = "";
            var arr = [];
            var iter = 0;

            allRewards = data

            $.each(data.rewards, function(key, val){
                if ($.inArray(val.points, arr) == -1)
                    {
                        lis += "<div data-points='"+ val.points +"'align=CENTER class = 'rewards-block ui-block-" + String.fromCharCode(97 + iter%3) + "'><a href ='#' class ='ui-link-inherit' onclick='showreward("+val.points+")'><img src ='./img/reward-icon.png'/><span>" + val.points + "&nbsp;pts</span></a></div>";
                        arr.push(val.points);
                        iter +=  1;
                    }
            });
            $("#rewards_table").html(lis);

        })

      });

function showreward(point)
{   
    $.mobile.changePage('show-rewards.html')
    console.log(allRewards);
    $("#showrewards").live('pagecreate', function(e) {
                var items = "";
                var arr = [];
                var counter = 0;
                var result = $.grep(allRewards.rewards, function(e){ return e.points == point; });
                        if (result.length > 1)
                {
                    $.each(result, function(key, val){
                        items += "<div style='color:white;'>" + val.title + "</div>"
                        console.log(val.title);
                    })
                }
                else if (result.length == 1)
                { 

                    // $.each(result, function(key, val){
                    //                      items += "div style='color:white;'"+ val.points + "></div>"
                    //                      console.log(val.points);
                    //                  })
                    $.each(result, function(key, val){
                        items += "<div style='background:white; padding:5px 5px 20px 5px;'><img style ='float:right; width:45%; margin-top:22px; padding: 0 0 10px 10px;' src ='" + val.main_photo_url + "'/><h3>"+ val.title + "</h3><p>" + val.description + "</p><p style='font-weight:bold; font-size:13px;'>Reedem below for " + val.points + " Zingle Points</p><table class='pagemenu' style='width:200px;'><tr><td class='width_5'><input type='submit' data-theme='w' value='Reedem Now' data-inline='true'></td><td><a data-role='button' data-icon='pagemenu-share' data-iconpos='notext' href='index.html' data-shadow='false' data-corners='false'></a></td></tr></table></div>"
                    });
                }
                console.log(items);
                $("#rewards-list").html(items);

});

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:30:12.283

我想你正在寻找`Array.indexOf`.

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

PS。这在下划线中作为`_.indexOf`.

# wcf - 如何强制 WebFaultException 返回自定义错误？

> ID：13698470
> 
> 赞同：1
> 
> 时间：2012-12-04T08:06:00.340
> 
> 标签：wcf, rest

我有工作的 WCF REST Web 服务，可以像往常一样设置状态代码和状态描述：

```
OutgoingWebResponseContext response = WebOperationContext.Current.OutgoingResponse;
response.StatusCode = statusCode;
response.StatusDescription = detail.Error; 
```

但我想使用 WebFaultException。不幸的是，当我运行我的代码时，它总是返回 {"Detail":"Not Found"}：

```
[Serializable]
[DataContract]
public class DtoError
{
    public DtoError()
    {

    }
    public DtoError(string error)
    {
        Error = error;
    }
    [DataMember]
    public string Error { get; private set; }
}

var error = new DtoError(entityName + " is not existing");
throw new WebFaultException<DtoError>(error, HttpStatusCode.NotFound); 
```

我可以返回我的自定义错误 json 对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:35:45.190

经过调查，我发现我们使用的是 Rest Starter Kit 中的 WebServiceHost2 而不是 WebServiceHost。在该主机内部，我们必须使用 WebProtocolException。所以现在我的工作代码如下所示：

```
throw new WebProtocolException(HttpStatusCode.NotFound, "Not Found", error, null); 
```

# javascript - 更多关于 Javascript 类的问题

> ID：13698471
> 
> 赞同：0
> 
> 时间：2012-12-04T08:06:07.523
> 
> 标签：javascript, jquery

我已经对制作课程进行了很多测试，现在我终于发现了它是如何工作的，这就是我想让课程简单明了，而不是垃圾邮件“这个”

![在此处输入图像描述](../Images/01df99fd91347321540d02ec70592d1c.png)

结果是这样的，现在我只有2个问题：

1.  `redsheep.options.show().sizes`, 就是把这个变量调出来，现在觉得*太长了*。我如何使它像`redsheep.sizes`？
2.  `redsheep.options.show().eat`不是继承自`sheepclass` `grass`，而成为`undefined`。如何为新创建的对象设置默认值？

    ```
    <html>
    <head>
    <meta charset='utf-8'>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <title>A simple javascript function</title>
    <script type="text/javascript">
        $(document).ready(function(){
            var sheepclass = function(options){
                this.options = {'sizes' : 'thin',
                        'eat'   : 'grass',
                        'color' : 'white',
                        show    : function(){
                                    return {'color':options.color,
                                             'eat':options.eat,
                                             'sizes':options.sizes
                                            };
                                 }
                 }
            }

            var blacksheep = new sheepclass({'color':'black'});
            var redsheep   = new sheepclass({'color':'red','sizes':'fat'});

            $('div').append('<p>blackcsheep color : ' +
                            blacksheep.options.show().color);
            $('div').append('<p>redsheep color : ' + 
                            redsheep.options.show().color +
                            '<p>redsheep size:' +
                            redsheep.options.show().sizes +
                            '<p> redsheep eat:' + 
                            redsheep.options.show().eat);
        })
    </script>
    <style>
        div{display:block;width:800px;height:400px;border:2px solid red;}
    </style>
    </head>
    <body>
        <div>
              Result:
        </div>
    </body>
    </html> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:15:20.973

这样的事情会做：

```
var sheepclass = function(options) {
    this.sizes = options.sizes || 'thin';
    this.eat = options.eat || 'grass';
    this.color = options.color || 'white';
} 
```

这样，您可以直接访问属性（通过使用例如`blacksheep.sizes`）：

```
var blacksheep = new sheepclass({'color':'black'});
console.log(blacksheep.sizes); // prints 'thin' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:17:44.223

向返回其自身属性的对象添加方法是没有用的。删除它并正常访问属性：

```
var sheepclass = function(options) {
    this.options = $.extend({
        'sizes': 'thin',
        'eat': 'grass',
        'color': 'white',
    }, options);
} 
```

您可以像这样访问它：

```
redsheep.options.eat 
```

# ruby-on-rails - 是否可以通过免费的谷歌（或其他）服务以编程方式发送短信？

> ID：13698472
> 
> 赞同：1
> 
> 时间：2012-12-04T08:06:07.973
> 
> 标签：ruby-on-rails, sms

我正在运行一个 Ruby on Rails 应用程序，我正在寻找一种通过 SMS 发送一些通知的方法（不是很多，只是在严重故障时）。

这似乎可以通过谷歌谈话或谷歌语音来实现。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:14:53.633

看看[Twilio](http://www.twilio.com/)。它们可能不是完全免费的，但如果您想可靠地发送严重错误的 SMS，这可能比可能不可靠的免费选项更有价值。

更重要的是，他们有一个优秀的[**twilio-ruby**](https://github.com/twilio/twilio-ruby) gem，可以让你从任何应用程序很好地发送短信。

Twilio 的定价取决于您将文本发送到的国家/地区，对于美国，每条出站 SMS 的费用为 1 美分。

如果您知道任何免费的解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:23:05.480

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

如果您只是向自己发送通知，您可以只使用电子邮件别名作为您的手机号码。

但是，如果您正在做任何重要的事情，最好的解决方案可能是 SMS API。有一些提供商（此列表不完整，但这是我考虑使用的）- 定价以每条消息美分为单位（取决于 API 和目标，但徘徊在一两美分左右）。根据您所在的国家/地区，您可能需要提供一个虚拟号码 - 定价通常为美元/月（同样，取决于 API 和目的地，徘徊在一两美元左右）。

*   [Nexmo](http://nexmo.com)
*   [特维利奥](http://twilio.com)
*   [特罗波](http://tropo.com)

# c# - 在 Power Shell 中读取 .evtx 文件

> ID：13698473
> 
> 赞同：1
> 
> 时间：2012-12-04T08:06:15.037
> 
> 标签：c#, xml, powershell

我正在尝试使用 Power Shell 将事件日志文件 (.evtx) 转换为 xml（然后在 C# 程序中读取此 xml）。我正在运行脚本

```
get-winevent -Path "C:\test.evtx" -oldest | convertto-xml -as Stream > "C:\test.xml" 
```

但生成的 xml 文件有许多“消息”字段为空的事件。如果我在 Windows 事件查看器中打开相同的 .evtx，我可以看到所有事件的消息。

尽管报告了此问题并且人们已经讨论过它（[此处](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/12467b47-c1e6-4208-bbbf-9fec9b4b8111)和[此处](http://connectppe.microsoft.com/PowerShell/feedback/details/716533/get-winevent-does-not-return-the-content-of-the-event-message-in-v3-ctp2)），但我无法找到解决方案/解决方法。

谁能告诉我在这个问题上是否有新的可用信息或任何可能有用的信息。

PS：我使用的是 Power shell 2.0 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-26T06:17:22.150

也许你忘了提到 PowerShell 应该递归到的深度并创建对象的 XML 表示，深度的默认值是 1。像下面这样的东西应该可以工作

```
get-winevent -Path "C:\test.evtx" -oldest | convertto-xml -as Stream -depth 10 > "C:\test.xml" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T14:54:15.450

我注意到您说您想将 PS > xml 中的事件日志读取到 C# 中的进程。我只是直接在 C# 中读取 .evtx 文件：

```
class Program
    {
        static IEnumerable<EventLogRecord> LogRecordCollection(string filename, string xpathquery = "*")
        {
            var eventLogQuery = new EventLogQuery(filename, PathType.FilePath, xpathquery);

        using (var eventLogReader = new EventLogReader(eventLogQuery))
        {
            EventLogRecord eventLogRecord;

            while ((eventLogRecord = (EventLogRecord)eventLogReader.ReadEvent()) != null)
                yield return eventLogRecord;
        }
    }

    static void Main(string[] args)
    {
        var path = "file.evtx";
        var start = new DateTime(2013, 06, 26, 0, 0, 0);
        var end = new DateTime(2013, 06, 27, 0, 0, 0);
        var t = from l in LogRecordCollection(path)
               where l.TimeCreated > start
               && l.TimeCreated < end
               select l;
        foreach (var item in t)
        {
            var msg = item.Properties[0].Value.ToString();
            if (msg.Contains("[interesting key]"))
            {
                Console.Write(item.TimeCreated);
                Console.Write(";");
                Console.Write(item.TaskDisplayName);
                Console.Write(";");
                Console.Write(item.ProviderName);
                Console.Write(";");

                Console.Write(msg);
                Console.Write(";");
                Console.WriteLine();
            }

        }
        Console.Read();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:18:54.600

试试这个，告诉我它是如何工作的。 `$Objects = get-WinEvent -Maxevents 10 |ConverTo-XML -NoTypeInformation $objects.Object|Select -ExpandProperty Property`

编辑：对不起，我忘记了整个“想要在文件中”......

$Objects = get-WinEvent -Maxevents 10 |ConverTo-XML -NoTypeInformation -as Stream > C:\Test.xml

# drupal - Drupal 7 中保护页面（节点）的密码

> ID：13698477
> 
> 赞同：0
> 
> 时间：2012-12-04T08:06:42.587
> 
> 标签：drupal, drupal-7, password-protection

我有 Drupal 7 站点，我需要添加一个受密码保护的页面（节点）。因为这是一次性的，我不想在 Drupal 中使用那些相当复杂的访问控制模块。

任何想法，如何限制对节点的访问？我可以以某种方式使用用户角色吗？这将是完美的，但似乎不能开箱即用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:33:47.440

```
function theme_preprocess_node( &$variables )
{
    $allowed_roles = array("administrator", "media");

    global $user;
    if($variables['nid'] == NODEID)
    {
        foreach($user->roles as $role)
        {
            if(in_array($role, $allowed_roles))
                return;
        }
        drupal_goto("user"); //  redirect to login
    }
} 
```

我使用上面的解决方案来处理这种情况。这对我来说是最好的解决方案，虽然它对用户来说不是很冗长:)

# objective-c - 使用 +valueWithPointer 的 NSDictionary 查找：键太慢

> ID：13698478
> 
> 赞同：1
> 
> 时间：2012-12-04T08:06:42.990
> 
> 标签：objective-c, ios, objective-c++

我有一个 Objective C++ 类，它的实例需要存储一组任意 C++ 对象并将每个对象与相应的 Objective C 对象相关联。在给定 C++ 对象时查找 Objective C 对象正在扼杀我的性能，因此我正在寻找更好的解决方案。

在使用 [NSValue valueWithPointer:] 创建密钥后，我目前正在将这些对存储在 NSMutableDictionary 中。查找时间，其中 +valueWithPointer: 大约是 -objectForKey: 的两倍，太慢了。

C++ 对象位于第三方框架中，不提供任何唯一标识符。

C++ 对象的集合总是小于十几个元素。

执行这些查找的更快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:13:34.977

我看到了三种值得尝试的方法：

1.  使用 NSMapTable
2.  使用 objc_setAssociatedObject
3.  使用 std::unordered_map 或 std::map

objc_setAssociatedObject 在幕后使用 std::unordered_map 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:26:15.537

我最近遇到了类似的问题，`[NSValue valueWithNonRetainedObject:]`速度太慢。

我采用的解决方案是降低一个级别并使用 CoreFoundation 的 CFMutableDictionary。我建议您看一下：[CFMutableDictionary Reference](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFMutableDictionaryRef/Reference/reference.html)。它在 , 中接受常规 C 指针`CFDictionaryAddValue()`，`CFDictionaryRemoveValue`因此它是用于接口 Obj-C 和 C++ 的最佳方式（C 是它们的共同点）。

我宁愿这样做而不是使用 an`std::unordered_map`的原因是因为我倾向于在这类事情中尽量减少 C++。Obj-C++ 有点像 hack，最好将其简化为在真正的 Obj-C 和现有 C++ 代码之间粘合代码。

# jquery - 在元素中查找最接近的日期然后添加类

> ID：13698483
> 
> 赞同：2
> 
> 时间：2012-12-04T08:07:15.507
> 
> 标签：jquery, arrays, find, closest

例如：今天是**12 月 4 日**

1.  2012 年 12 月

2.  2012 年 12 月

3.  2012 年 12 月

标题（2012 年 12 月 5 日）

标题（2012 年 12 月 7 日）

1.  2012 年 12 月

最接近的日期是 5.12 月（不是 3.December）（较新而不是较旧）

并且如果不止一个“5\. December”那么添加类 only first-child

**HTML：**

```
<div class="wrap">

<div class="zone" id="one">  
<div class="box">
    <footer class="time">1\. December 2012</footer>
</div>

<div class="box">
    <footer class="time">1\. December 2012</footer>
</div>

<div class="box">
    <footer class="time">3\. December 2012</footer>
</div>

<div class="box">
    <h2>Title <span class="time">(5\. December 2012)</span></h2>
</div>

<div class="box">
    <h2>Title <span class="time">(7\. December 2012)</span></h2>
</div>

<div class="box">
    <footer class="time">9\. December 2012</footer>
</div>

</div>

<div class="zone"  id="two">
    <!-- Same .zone#one but i will focus for .zone#one only-->
</div>

</div>

<code></code> 
```

**jQuery :**

```
var closest = [];

$('.wrap > .zone:eq(0) .box').each(function(i) {
        var date = $(this).find(".time").html().replace("(","").split(".");
        closest.push(date[0]);
});

$("code").html(closest+""); 
```

**游乐场：http:** [//jsfiddle.net/WJvZb/](http://jsfiddle.net/WJvZb/)

我现在来到这一步，但不知道找到最接近的日期并添加类（例如`.closest`类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:26:32.790

最简单的方法是解析每个日期时间（取决于格式），将它们推入一个数组，然后遍历数组计算它们之间的时间差，并拉出最小值。您可以使用一些有用的库，例如 moment.js 来进行日期解析和计算。

```
var now = new Date();
var closest = -1; //array ndx
var times = [];
var els = [];

$('.time').each(function(i) {
    times.push(someParsingMethod($(this).text());
    els.push($(this));
});

//initial difference
var diff = times[0].getTime() - now.getTime();

//check for lowest difference greater with a target date greater than now
for(var i=0;i<times.length;i++){
   var tmpDiff = times[i].getTime() - now.getTime();
   if(times[i].getTime() > now.getTime() && tmpDiff < diff){
       closest = i;
   }
}

if(closest != -1){
    els[closest].addClass("closestClass");
} 
```

这只是伪代码，这项任务的真正挑战是解析专有日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:34:29.970

你应该用英文命名你的日期，因此“desember”......然后你可以遍历你的日期并从中创建 Date 对象，然后找到最接近的对象很容易。

```
var closest = [];

$('.wrap > .zone:eq(0) .box').each(function(i) {
    var date = $(this).find(".time").html().replace("(","").replace(")","");
        closest.push(new Date(date));
});

function closestTime(days, testDate)
{
    var bestDiff = null;

    for(i = 0; i < days.length; ++i){
        currDiff = Math.abs(days[i] - testDate);
        if(currDiff < bestDiff || bestDiff == null){
            bestDate = days[i];
            bestDiff = currDiff;
        } else if (currDiff == bestDiff && days[i] > testDate) {
            bestDiff = currDiff;             
        }
    }

    return bestDate;
}

console.log(closestTime(closest,new Date())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:23:46.973

只要您使用数组，这是实现它的最简单方法。

```
var closest = [];
// Current Date
var current = new Date("04/12/2012");
// Function to get the Minimam value in Array
Array.min = function( array ){
    return Math.min.apply( Math, array );
};
// Played on your code
$('.wrap > .zone:eq(0) .box').each(function(i) {
    var date = $(this).find(".time").html().replace("(","").split(".");
    // If higher than current date
    if(current.getDay() < date[0]) {
        closest.push(date[0]);
    }
});
// Get the closest day..
$("code").html(Array.min(closest)+""); 
```

在您的演示中播放：http: [//jsfiddle.net/BerkerYuceer/WJvZb/40/](http://jsfiddle.net/BerkerYuceer/WJvZb/40/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-07T12:24:19.147

```
 function findActive(days, testDate) {
        var bestDiff = 0;
        var bestDate = null;
        var strDate = "No active";

        for(i = 0; i < days.length; ++i){
            var dDate = getDate(days[i]);

            currDiff = Math.abs(dDate - testDate);

            if(i ==0){
                bestDiff = currDiff;
            }

            if(dDate <= testDate){
                if(currDiff < bestDiff){
                    strDate = days[i];
                    bestDate =  dDate;
                    bestDiff = currDiff;
                    }else if(currDiff == bestDiff){
                    strDate = days[i];
                    bestDate =  dDate;
                }
            }
        }
        return strDate;
    }

function getDate(strDate){
    var day  = strDate.substring(0,2);
    var month = strDate.substring(3,5);
    var year  = strDate.substring(6,10);

    return new Date(parseInt(year), parseInt(month) - 1, parseInt(day));
}

date mask is: dd.MM.yyyy

        this code find active date. 
        enter code here
        example
        today is: 07.06.2013

        dates is: 03.06.2013, 4.6.2013, 5.6.2013 => return 5.6.2013
        dates is: 03.06.2013, 14.6.2013, 15.6.2013 => return 3.6.2013
        dates is: 08.06.2013, 14.6.2013, 15.6.2013 => return null
        dates is: 08.06.2013, 7.6.2013, 9.6.2013 => return 7.6.2013
        etc 
```

# c# - 使用 C# 获取数据库服务器列表

> ID：13698484
> 
> 赞同：1
> 
> 时间：2012-12-04T08:07:34.530
> 
> 标签：c#, sql-server, ssms

> **可能重复：**
> [SqlDataSourceEnumerator.Instance.GetDataSources() 未找到本地 SQL Server 2008 实例](https://stackoverflow.com/questions/6824188/sqldatasourceenumerator-instance-getdatasources-does-not-locate-local-sql-serv)

在 SQL Server 2008 中，当我打开 Microsoft SQL Server Management Studio 时，我必须连接到服务器。

首先我选择`Server Type`(like `Database Engine`)，然后服务器名称可用。

通常，最近使用的服务器名称。但是如果我去，`<Browse For More...>`我会得到一个带有两个标签的窗口

1.  本地服务器
2.  网络服务器。

当我选择`Network Servers`时，网络上有一个可用服务器列表。

现在我想知道如何在 C# 中自己做到这一点？我只需要知道，如何在我的 C# 应用程序中获取网络服务器列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:09:36.777

尝试：

```
DataTable dt = System.Data.Sql.SqlDataSourceEnumerator.Instance.GetDataSources(); 
```

您将获得带有服务器名称和实例名称的 DataTable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:30:08.707

我发现此链接很有帮助，在 Dejo 之后给我提示如何执行此操作。这个链接对每个人都有帮助。至少它帮助了我。

[SQL 数据源枚举器实例获取数据源未定位到本地 SQL Server](https://stackoverflow.com/questions/6824188/sqldatasourceenumerator-instance-getdatasources-does-not-locate-local-sql-serv)

# sql - 访问 SQL 学生未注册的所有课程

> ID：13698486
> 
> 赞同：1
> 
> 时间：2012-12-04T08:07:44.867
> 
> 标签：sql, ms-access

这里有点像 SQL 的菜鸟。我正在尝试使用访问数据库中的数据为我们部门构建注册表单。这个想法是为每个学生打印一张表，显示所有可用的课程，并在学生已经注册的课程旁边带有复选标记。相关表处于经典的多对多关系

学生（StudentID、FamilyName、GivenName 等）

```
1, Bennett, Shane
2, Bradford, Alex 
```

课程（CourseID、CourseName、Term、Year）

```
1, Level 1 Math, Winter, 2013
2, Level 1 English, Winter, 2013
3, Level 1 Bio, Winter, 2013 
```

所学课程（学生 ID、课程 ID）

```
1, 1
1, 3
2, 2
2, 3 
```

我想要的表是：

注册（FamilyName、GivenName、CourseName、已注册）

```
Bennett, Shane, Level 1 Math, True
Bennett, Shane, Level 1 English, False
Bennett, Shane, Level 1 Bio, True
Bradford, Alex, Level 1 Math, False
Bradford, Alex, Level 1 English, True
Bradford, Alex, Level 1 Bio, True 
```

我们每学期大约有 300 名学生，每学期提供大约 15 个班级，所以我正在寻找一个有 300x15 行的结果表，即每个学生的所有 15 个班级。

对我来说，更简单的方法是使用 VBA 中的 DAO 记录集简单地查找给定 StudentID 的所有 CoursesTaken，然后使用 VBA 循环表单并将报告字段设置为 true 或 false。但是后来（几个小时前）我想在 SQL 中可能有更好的方法。我查看了 OUTER JOINS，但似乎结果并不完全符合我的要求。我在这里偏离轨道了吗？

# multithreading - winsock 应用程序和多线程 - 从另一个线程监听套接字事件

> ID：13698487
> 
> 赞同：0
> 
> 时间：2012-12-04T08:07:45.827
> 
> 标签：multithreading, winapi, winsock2, winsockets

假设我们有一个使用winsock 来实现tcp 通信的应用程序。对于每个套接字，我们创建一个线程并在其上进行块接收。当数据到达时，我们想通知其他线程（监听线程）。

我想知道实现这一点的最佳方法是什么：

1.  摆脱这种设计并使用非阻塞套接字，那么监听线程将不得不不断迭代并调用非阻塞接收，从而使其线程安全（套接字没有额外的线程）

2.  使用异步过程调用来通知侦听线程——这又将不得不等待 apc 为它们排队。

3.  实现一些线程安全的消息队列，每个套接字线程将向其发布消息，并且侦听器将再次检查它并从中提取数据。

另外，我阅读了有关 WSAAsyncSelect 的信息，但我看到它用于将消息发送到窗口。其他线程没有类似的东西吗？（好吧我猜apcs是......）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T07:25:00.630

最好将套接字 API 的机制（侦听、接受、读取和写入）抽象到与应用程序逻辑不同的层中。拥有一个捕获连接状态的对象，该状态是在传入连接期间创建的，您可以在此对象中维护传入和传出流量的缓冲区。这将允许您的网络接口层独立于应用程序代码。通过将应用程序功能与底层通信机制分离，这也将使代码更简洁。

阻塞或非阻塞套接字决定取决于您的应用程序需要达到的可伸缩性级别。如果您的应用程序需要支持数百个传入连接，那么采用每个套接字线程的方法并不是很明智。您最好选择基于 Io 端口的实现，这将使您的应用程序在增加代码复杂性的情况下具有极大的可扩展性。但是，如果您在任何时间点只能预见到几十个连接，您可以使用 Win32 事件或消息来使用异步套接字模型。基于 Win32 事件的方法不能很好地扩展超出某个限制，因为如果并发套接字的数量超过 63，您将不得不管理多个线程（因为 WaitForMultipleObjects 最多只能支持 64 个套接字）。但是，基于 Windows 消息的机制没有此限制。

查看MSDN`WSAEventSelect`中的`WSAAsyncSelect`API 文档。

您可能还想看看`boost::asio`包。它在套接字 API 上提供了一个简洁（虽然有点复杂）的 C++ 抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:56:30.840

使用 I/O 完成端口。请参阅 Win32 API 的`CreateIoCompletionPort()`和`GetQueuedCompletionStatus()`函数（在文件管理函数下）。在这种情况下，使用套接字描述符代替文件句柄。

# php - 从字符串更改日期格式

> ID：13698489
> 
> 赞同：-2
> 
> 时间：2012-12-04T08:07:51.753
> 
> 标签：php

> **可能重复：**
> [Strtotime() 不适用于 dd/mm/YYYY 格式](https://stackoverflow.com/questions/2891937/strtotime-doesnt-work-with-dd-mm-yyyy-format)

我有这个变量，我得到这样的信息：

```
echo $start=$_REQUEST['to']; 
```

它输出如下内容：

```
2/04/2012 
```

我需要的是像这样转换它：`20120402` 你能帮帮我吗？我尝试了 strotime 并没有成功。我之前尝试将字符串转换为日期格式，然后将其转换为 Ymd 格式，但我一直收到一个奇怪的日期，比如 1970 ！我试过这个：

```
$time = strtotime( $date );
$myDate = date( 'y-m-d', $time ); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:23:04.567

它可能会起作用。

```
<?php
$start=$_REQUEST['to'];
$date = explode("/",$start);
$size = sizeof($date);
for($i=$size;$i>=0;$i--) {
    $date_get .= $date[$i];
}
echo $date_get;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:10:07.303

您应该使用[strftime](http://php.net/manual/en/function.strftime.php)而不是`date`.

```
$myDate = strftime('%Y%m%d', $time); 
```

# c# - 没有这样的行时，Dataview Table.Rows.Count 返回 1

> ID：13698491
> 
> 赞同：2
> 
> 时间：2012-12-04T08:08:09.540
> 
> 标签：c#, asp.net

考虑下面的代码：

```
DataView deletedLOV = new DataView(tbltmp, "prociLOV_Deleted=1", "prociLOV_ID",
                                   DataViewRowState.CurrentRows);
DataView addedLOV = new DataView(tbltmp, "prociLOV_Id>1", "prociLOV_ID",
                                 DataViewRowState.CurrentRows);
int deletedLOVcount=deletedLOV.Table.Rows.Count;
int addedLOVcount=addedLOV.Table.Rows.Count; 
```

删除记录时，prociLOV_Deleted 设置为 1。

但是即使没有记录被删除，deletedLOVcount 返回值 1。也与 addedLOVcount 相同，当没有 proci_ID>1 的记录时，它也返回计数为 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:10:29.963

通过属性`DataView`引用它的原始数据表。`Table`但它不共享相同的数据。包含未应用过滤器的`DataTable`原始数据，而`DataView`仅包含应用过滤器后的记录。

您将通过以下方式获得正确的计数[`DataView.Count`](http://msdn.microsoft.com/en-us/library/system.data.dataview.count.aspx)：

```
int deletedLOVcount = deletedLOV.Count; 
```

MSDN：

> 获取应用 RowFilter 和 RowStateFilter 后 DataView 中的记录数。

# python - 如何在wx python中制作一个简单的手表

> ID：13698492
> 
> 赞同：1
> 
> 时间：2012-12-04T08:08:09.973
> 
> 标签：python, wxpython, wxwidgets

有人可以告诉我，如何制作一个简单的 wxpython

```
 import wx
    import time

    class MyFrame(wx.Frame):
        """ We simply derive a new class of Frame. """
        def __init__(self, parent, title):
            wx.Frame.__init__(self, parent, title=title, size=(200,100))
            self.control = wx.TextCtrl(self, style=wx.TE_MULTILINE)
            self.Show(True)

    app = wx.App(False)
    frame = MyFrame(None, 'Small editor')

app.MainLoop() 
```

我想知道我现在如何获取日期时间并将其显示在框架中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-08T05:13:04.460

如果您希望在 GUI 内/内显示日期时间（作为数字，而不是时钟格式），您可以使用 wx.DateTime.Now() 函数。[在此处](http://wxpython.org/Phoenix/docs/html/DateTime.html#DateTime.Now)阅读 wxPython 文档中的更多详细信息。您可以输入以下内容：

```
now = wx.DateTime.Now()
timecheckText = wx.StaticText(panel, -1, "Sample sentence here:\t%s\n"%(now.Format("%c", wx.DateTime.PST)), (3,30)) 
```

它的作用是在 wx.StaticText 函数中输入日期时间，并在启动后打印当前日期、月份、年份、时间和时区。此外，无需“导入日期时间”，只需“导入 wx”即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:42:39.767

> *“我想知道我现在如何获取日期时间并将其显示在框架中”*

使用`time`模块获取系统时间：

```
import time
time.strftime('%d %m %Y') 
```

例如如何访问这个模块。现在在 Python 解释器中，尝试`help(time)`阅读不同的时区命令和格式化命令，以获得所需的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:38:20.750

你看过 wxPython 演示吗？您应该检查几个小部件。一个是模拟时钟。它真的很整洁。然后是 LEDNumberCtrl。有一个演示，它显示了实时更新的当前时间。

如果您需要显示日期，请尝试 DatePickerCtrl

更新：这是一个代码示例：

```
import wx

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(sizer)

        dpc = wx.DatePickerCtrl(self, size=(120,-1),
                                style = wx.DP_DROPDOWN
                                      | wx.DP_SHOWCENTURY
                                      | wx.DP_ALLOWNONE )
        self.Bind(wx.EVT_DATE_CHANGED, self.OnDateChanged, dpc)
        sizer.Add(dpc, 0, wx.ALL, 50)

        # In some cases the widget used above will be a native date
        # picker, so show the generic one too.            
        dpc = wx.GenericDatePickerCtrl(self, size=(120,-1),
                                       style = wx.TAB_TRAVERSAL
                                       | wx.DP_DROPDOWN
                                       | wx.DP_SHOWCENTURY
                                       | wx.DP_ALLOWNONE )
        self.Bind(wx.EVT_DATE_CHANGED, self.OnDateChanged, dpc)
        sizer.Add(dpc, 0, wx.LEFT, 50)

    def OnDateChanged(self, evt):
        print "OnDateChanged: %s\n" % evt.GetDate()

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, parent=None, title="DatePickers")
        panel = MyPanel(self)
        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    app.MainLoop() 
```

# android - 非活动类许可

> ID：13698493
> 
> 赞同：1
> 
> 时间：2012-12-04T08:08:14.327
> 
> 标签：android, permissions

我有一个公共课程`public class GlobalFunctions`，我收集了一些功能，以便从我的应用程序的不同部分使用。我以静态方式访问它们，例如`public static boolean sendSMS(String number, String message)`在我的 Android 清单中，我有`<uses-permission android:name="android.permission.SEND_SMS"/>`标签并且一切正常。但是从 api 16 开始，我得到了一个安全例外，UUID 1002 无权发送短信。

我通过将函数移动到我的主要活动中解决了这个问题，但是有没有办法为以静态方式使用的非活动类设置权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:10:19.637

您应该将使用权限标签设置在与应用程序标签相同的级别上。

这样，您的整个应用程序将拥有这些权限。

# python - 为整个应用加载 Jinja2 目录

> ID：13698496
> 
> 赞同：0
> 
> 时间：2012-12-04T08:08:26.170
> 
> 标签：python, jinja2

**我目前在main_app**的开头加载我的模板目录：

```
import blog
import jinja2
import os
import re
import registration
import webapp2
from string import letters

#   loads templates to make our life easier
template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                               autoescape = True)

########    Main App Function   ########
app = webapp2.WSGIApplication([ ('/', blog.WelcomePage),
                                ('/blog/?', blog.BlogFront), 
                                ('/blog/([0-9]+)', blog.PostPage), 
                                ('/blog/newpost', blog.NewPost),
                                ('/register', registration.RegistrationPage)
                                ], 
                                debug=True) 
```

但是，我显然需要在其他类中访问我的 HTML 文件，例如在**registration.py**中：

```
class Login(mainhandler.MainHandler):
    def get(self):
        self.render('login-form.html') 
```

如果有一个地方可以放置一些代码：

```
 #  loads templates to make our life easier
    template_dir = os.path.join(os.path.dirname(__file__), 'templates')
    jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                                   autoescape = True) 
```

允许这样做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:40:17.437

您必须创建一个 basehandler 来完成所有渲染并使用 Python 继承以非常简单的方式访问该处理程序。

请参阅 Nick Johnson 的这篇文章：http: [//blog.notdot.net/2011/11/Migrating-to-Python-2-7-part-2-Webapp-and-templates](http://blog.notdot.net/2011/11/Migrating-to-Python-2-7-part-2-Webapp-and-templates)

# python - Python：在列表中搜索 int

> ID：13698497
> 
> 赞同：3
> 
> 时间：2012-12-04T08:08:34.750
> 
> 标签：python, list, search

说我有这个清单

```
x = [1,2,3,1,5,1,8] 
```

有没有办法找到`1`列表中的每个索引？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T08:10:13.973

当然。列表理解加[枚举](http://docs.python.org/2/library/functions.html#enumerate)应该可以工作：

```
[i for i, z in enumerate(x) if z == 1] 
```

和证明：

```
>>> x = [1, 2, 3, 1, 5, 1, 8]
>>> [i for i, z in enumerate(x) if z == 1]
[0, 3, 5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:06:50.887

提问者要求使用 的解决方案`list.index`，所以这是一个这样的解决方案：

```
def ones(x):
    matches = []
    pos = 0
    while True:
        try:
            pos = x.index(1, pos)
        except ValueError:
            break
        matches.append(pos)
        pos += 1
    return matches 
```

它比 mgilson 的解决方案更冗长，我认为它是更惯用的 Python。

# php - 在保留 smarty 变量的同时转义用户输入

> ID：13698501
> 
> 赞同：0
> 
> 时间：2012-12-04T08:08:56.570
> 
> 标签：php, regex, smarty

我有一组示例用户字符串输入，其中可能有也可能没有 smarty 变量，这些变量 id 喜欢用 {literal}{/literal} 标签转义。

```
Array
(
    [0] => {$PLEASE}
    [1] => {PLEASE}
    [2] => {{PLEASE}}
    [3] => {{{PLEASE}}}
    [4] => {a{PLEASE}}
    [5] => {a{$PLEASE}}
    [6] => {{$PLEASE}a}
    [7] => {{PLEASE}a}
    [8] => {{{$PLEASE}}}
    [9] => {{{{PLEASE}}}}
) 
```

这是我希望实现的目标。

```
Array
(
    [0] => {$PLEASE}
    [1] => {literal}{PLEASE}{/literal}
    [2] => {literal}{{PLEASE}}{/literal}
    [3] => {literal}{{{PLEASE}}}{/literal}
    [4] => {literal}{a{PLEASE}{/literal}
    [5] => {literal}{a{/literal}{$PLEASE}{literal}}{/literal}
    [6] => {literal}{{/literal}{$PLEASE}{literal}a}{/literal}
    [7] => {literal}{PLEASE}a}{/literal}
    [8] => {literal}{{{/literal}{$PLEASE}{literal}}}{/literal}
    [9] => {literal}{{{{PLEASE}}}}{/literal}
) 
```

现在我有这个

```
$data = preg_replace('/{+([^\$])([a-z0-9]*)}+/si', '{literal}{\1\2}{/literal}', $data); 
```

这给了我

```
Array
(
    [0] => {$PLEASE}
    [1] => {literal}{PLEASE}{/literal}
    [2] => {literal}{PLEASE}{/literal}
    [3] => {literal}{PLEASE}{/literal}
    [4] => {a{literal}{PLEASE}{/literal}
    [5] => {a{$PLEASE}}
    [6] => {{$PLEASE}a}
    [7] => {literal}{PLEASE}{/literal}a}
    [8] => {{{$PLEASE}}}
    [9] => {literal}{PLEASE}{/literal}
) 
```

现在被卡住了很长一段时间，想知道是否有人可以帮助我解决这个问题，或者是否有可能这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:37:36.930

好的，我敢肯定有一种更优雅的方式，也许是单线，但无论如何，它适用于以下内容：

```
//Step 1: Replace 'real' smarty variables with an intermediate string
$data1 = preg_replace('/{(\$\w+)}/', "!!!$1!!!", $arr);
//replace start and end curly braces with {literal}:
$data2 = preg_replace('/{(.*)}/', '{literal}{$1}{/literal}', $data);
//Replace all inner smarty variables with their original string:
$data3 = preg_replace('/.!!!(.*)!!!/', '{/literal}$1{literal}', $data2);
//Replace standalone variables with their original string:
$data4 = preg_replace('/^!!!(.*)!!!$/', '{$1}', $data3); 
```

您可以在一个命令中合并步骤 3 和 4

# c++ - 如何计算 3D 中任意形状的中心？

> ID：13698502
> 
> 赞同：-3
> 
> 时间：2012-12-04T08:08:58.073
> 
> 标签：c++, math, opengl, 3d, computational-geometry

我想知道在 3D 中找到任意形状中心的准确方法。在图中，我已经解释了 3 个案例。

1.  在第一种情况下，我们如何计算任意点的中心？一种想法是所有点的总和除以点的总数。它是唯一的方法吗？它准确吗？

2.  第二个是如何计算 3D 中不规则任意形状的近似中心？这与 1 的情况相同吗？

3.  我们如何计算由任意顶点组成的弯曲/弯曲管的中心线？对于这个问题，我们必须解决我认为的前两种情况？

![在此处输入图像描述](../Images/3fc9744028448e39ece420fd75e40926.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T08:24:15.573

解决方案实际上取决于您实际在寻找什么。

如果您寻求一个形状中所有点的平均位置，那么对它们进行平均确实可以为您提供。但它可能与您直观地说“在中间”的点相去甚远。例如，考虑一个盒子，其中一侧的顶点数是另一侧的两倍。平均位置将在该边的一半，而不是在盒子的中间。

更有可能的是，我会说您正在寻找通过计算每个维度中的最大和最小边界然后对两者进行平均来定义的点。因为您使用 C++ 标记了它，所以这里有一些示例代码：

```
// Define max and min
double max[DIMENSIONALITY];
double min[DIMENSIONALITY];

// Init max and min to max and min acceptable values here. (see numeric_limits)

// Find max and min bounds
for(size_t v_i = 0; v_i < num_vertices; ++v_i)
{
    for(int dim = 0; dim < DIMENSIONALITY; ++dim)
    {
        if(shape[v_i][dim] < min[dim]) min[dim] = shape[v_i][dim];
        if(shape[v_i][dim] > max[dim]) max[dim] = shape[v_i][dim];
    }
}

// Calculate middle
double middle[DIMENSIONALITY];
for(int dim = 0; dim < DIMENSIONALITY; ++dim) 
    middle[dim] = 0.5 * (max[dim] + min[dim]); 
```

对于任何一种解决方案，问题的维度都无关紧要。

**编辑：** 正如下面的评论所指出的，这可能会导致中间点位于形状本身之外。如果您需要一个位于形状**内部**的点，则必须使用另一种方法。一个简单的解决方案可能是在每个轴上使用光线行进。

# jquery - 选择表单值 OnChange

> ID：13698507
> 
> 赞同：1
> 
> 时间：2012-12-04T08:09:15.557
> 
> 标签：jquery

我有一个带有许多输入的大型表单（表单可以有超过 100 个值），这似乎在使用`jquery.serialize()`.

通常，在提交表单之前只更改一两个值，所以我想我尝试只提交更改的值。只有我不知道该怎么做。

我想我想选择表单上的所有输入并调用`jquery.change()`它们，然后以某种方式使用`eventData`来确定更改了哪些值。

对代码的任何帮助，或关于我如何解决这个问题的替代想法将不胜感激。

* * *

我想我应该提到，它是 MVC-4。

这是我到目前为止想出的脚本。

> ```
> $(document).ready(function () {
>     $("#EditForm").find("input")
>         .on("change", function (event)
>         {
>             var name = this.name;
>             var value = this.value;
> 
>             var form = {};
>             form[name] = value;
> 
>             $.post("/Contracts/EditSingle", form, function (data)
>             {
>                 $("#editContractResponse").html(data);
>             });
>     });
> }); 
> ```

这可行，但它会在每次输入编辑时发布。我喜欢找出哪些输入是脏的，但不知道如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:18:33.247

尝试类似以下的操作。当一个元素改变时，我们所做的就是将该元素添加到一个数组中。提交表单时，我们仅序列化该数组中的元素，然后发布它们。

```
$(document).ready(function() {
    var els = [];

    // This uses event delegation, as it's more optimal for attaching handlers to multiple elements
    $('#EditForm').on('change', 'input,select,textarea', function () {
        els.push(this);
    }).on('submit', function (e) {
        // Prevent the default action (form submission) occuring, so we can AJAX instead.
        e.preventDefault();

        jQuery.post('/Contacts/Edit', $(jQuery.unique(els)).serialize(), function (data) {
            $('#editContractResponse').html(data);
        });
    });
}); 
```

[`jQuery.unique()`](http://api.jquery.com/jQuery.unique)从数组中删除重复的 DOM 元素（以防同一个元素被一次又一次地更改）。如果您愿意，您可以在处理程序中检查这一点`change`。`jQuery.unique()`返回唯一元素的数组，我们从中构建一个 jQuery 对象，并序列化结果。

# python - 如何使按钮图像拉伸，透明，宽度高度缩放适合？

> ID：13698514
> 
> 赞同：2
> 
> 时间：2012-12-04T08:09:42.267
> 
> 标签：python, python-2.7, gtk, pygtk, gtk2

如何使按钮图像拉伸+透明+完全适合图像？

预期输出：

![在此处输入图像描述](../Images/94941031bd73216d6d3b66c4f4590754.png)

但它显示了非常脏的按钮：

![在此处输入图像描述](../Images/7c5de654c8909d4a5dd51c341051aa16.png)

代码：

```
# /usr/bin/env python
import pygtk,gtk

button=gtk.Button()
pixbuf=gtk.gdk.pixbuf_new_from_file('/var/tmp/nl.png')
pixbuf=gtk.gdk.Pixbuf.add_alpha(pixbuf,255,255,255 ,255)
pixbuf=pixbuf.scale_simple(40,40,gtk.gdk.INTERP_BILINEAR) 
image=gtk.Image()
image.set_from_pixbuf(pixbuf)
label=gtk.Label("Python")
hbox=gtk.HBox()
hbox.pack_start(image)
hbox.pack_start(label)
button.add(hbox)
vbox=gtk.VBox()
vbox.pack_start(button)
win=gtk.Window()
win.add(vbox)
win.show_all()
win.set_size_request(150,3)
win.connect("destroy",lambda wid:gtk.main_quit())
gtk.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:57:29.577

您缺少[GtkBox::pack_start](http://developer.gnome.org/pygtk/stable/class-gtkbox.html#method-gtkbox--pack-start)定义如何填充可用空间的参数。用于`expand = False`您的标签。确保您的尺寸要求也为您的图像提供足够的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:11:35.837

有一个技巧：如下所示效果很好。

```
 def __init__(self):

    # Button Hacker
    button_rc = """
    pixmap_path "/var/tmp"

    ### Background > Image 
    style "window" {    
      bg_pixmap[NORMAL] = "1.png"
    }

    ### Buttons 1
    style "deButton" {
      xthickness = 60
      ythickness = 30
      fg[PRELIGHT] = { 0, 1.0, 1.0 }
      bg[PRELIGHT] = { 0, 0, 1.0 }
      bg[ACTIVE] = { 1.0, 0, 0 }
      fg[ACTIVE] = { 0, 1.0, 0 }
      bg[NORMAL] = { 1.0, 1.0, 0 }
      fg[NORMAL] = { .99, 0, .99 }
      bg[INSENSITIVE] = { 1.0, 1.0, 1.0 }
      fg[INSENSITIVE] = { 1.0, 0, 1.0 }

      engine "pixmap" {
          image {
              function = BOX
              file     = "de.png"
              stretch  = TRUE
          }
      }
      bg_pixmap[NORMAL] = "de.png"
    }

    style "nlButton" {
      xthickness = 60
      ythickness = 30
      fg[PRELIGHT] = { 0, 1.0, 1.0 }
      bg[PRELIGHT] = { 0, 0, 1.0 }
      bg[ACTIVE] = { 1.0, 0, 0 }
      fg[ACTIVE] = { 0, 1.0, 0 }
      bg[NORMAL] = { 1.0, 1.0, 0 }
      fg[NORMAL] = { .99, 0, .99 }
      bg[INSENSITIVE] = { 1.0, 1.0, 1.0 }
      fg[INSENSITIVE] = { 1.0, 0, 1.0 }

      engine "pixmap" {
          image {
              function = BOX
              file     = "nl.png"
              stretch  = TRUE
          }
      }
      bg_pixmap[NORMAL] = "nl.png"
    }

    style "enButton" {
      xthickness = 60
      ythickness = 30
      fg[PRELIGHT] = { 0, 1.0, 1.0 }
      bg[PRELIGHT] = { 0, 0, 1.0 }
      bg[ACTIVE] = { 1.0, 0, 0 }
      fg[ACTIVE] = { 0, 1.0, 0 }
      bg[NORMAL] = { 1.0, 1.0, 0 }
      fg[NORMAL] = { .99, 0, .99 }
      bg[INSENSITIVE] = { 1.0, 1.0, 1.0 }
      fg[INSENSITIVE] = { 1.0, 0, 1.0 }

      engine "pixmap" {
          image {
              function = BOX
              file     = "en.png"
              stretch  = TRUE
          }
      }
      bg_pixmap[NORMAL] = "en.png"
    }

    style "callButton" {

      xthickness = 58
      ythickness = 48
      fg[PRELIGHT] = { 0, 1.0, 1.0 }
      bg[PRELIGHT] = { 0, 0, 1.0 }
      bg[ACTIVE] = { 1.0, 0, 0 }
      fg[ACTIVE] = { 0, 1.0, 0 }
      bg[NORMAL] = { 1.0, 1.0, 0 }
      fg[NORMAL] = { .99, 0, .99 }
      bg[INSENSITIVE] = { 1.0, 1.0, 1.0 }
      fg[INSENSITIVE] = { 1.0, 0, 1.0 }

      engine "pixmap" {
          image {
              function = BOX
              file     = "call_connect_icon_64x64.png"
              stretch  = TRUE
          }
      }
      bg_pixmap[NORMAL] = "call_connect_icon_64x64.png"
    }

    style "disconnectButton" {
      xthickness = 58
      ythickness = 48
      fg[PRELIGHT] = { 0, 1.0, 1.0 }
      bg[PRELIGHT] = { 0, 0, 1.0 }
      bg[ACTIVE] = { 1.0, 0, 0 }
      fg[ACTIVE] = { 0, 1.0, 0 }
      bg[NORMAL] = { 1.0, 1.0, 0 }
      fg[NORMAL] = { .99, 0, .99 }
      bg[INSENSITIVE] = { 1.0, 1.0, 1.0 }
      fg[INSENSITIVE] = { 1.0, 0, 1.0 }

      engine "pixmap" {
          image {
              function = BOX
              file     = "call_disconnect_icon_64x64.png"
              stretch  = TRUE
          }
      }
      bg_pixmap[NORMAL] = "call_disconnect_icon_64x64.png"
    }

    # imports
    widget "*.deButton" style "deButton"
    widget "*.nlButton" style "nlButton"
    widget "*.enButton" style "enButton"
    widget "*.callButton" style "callButton"
    widget "*.disconnectButton" style "disconnectButton"
    widget_class "GtkWindow" style "window"
    widget_class "*GtkButton*" style "button"
    widget "main window.*GtkButton*" style "main_button"
    """

    # main GTK
    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.set_size_request(1024, 768)
    self.window.set_border_width(10)

    self.window.set_decorated(False)
    self.window.set_title("Test")
    #self.window.set_default_size(1024, 768)
    #color = gtk.gdk.color_parse('#234fdb')
    #self.window.modify_bg(gtk.STATE_NORMAL, color)
    self.window.connect("destroy", gtk.main_quit, "WM destroy")

    #window.set_name("foo")
    #gtk.rc_parse_string(pixmap_rc)

    self.window.set_name("main window")
    gtk.rc_parse_string(button_rc)

    self.vbox = gtk.VBox()
    self.window.add(self.vbox)    
    table = gtk.Table(rows=2, columns=2, homogeneous=True)
    self.hButton = gtk.HBox(False, 0)

    # Create gape
    align = gtk.Alignment(0.5)
    align.set_padding(500, 90, 0, 0)
    align.add(gtk.Label())
    align.show()
    self.vbox.pack_start(align, False)

    self.vbox.pack_start(self.hButton, False)    
    self.hButton.set_border_width(1)

    # Buttons 
    self.button_de = gtk.Button("Detuch")
    self.button_de.set_name("deButton")
    self.button_de.show()
    self.button_de.connect("clicked", self.deButton) 

    self.button_nl = gtk.Button("Nederlands")
    self.button_nl.set_name("nlButton")
    self.button_nl.show()
    self.button_nl.connect("clicked", self.nlButton) 

    self.button_en = gtk.Button("English")
    self.button_en.set_name("enButton")
    self.button_en.show()
    self.button_en.connect("clicked", self.enButton) 

    self.hButton.pack_start(self.button_de, False)
    self.hButton.pack_start(self.button_nl, False)
    self.hButton.pack_start(self.button_en, False)  

    table.attach(gtk.HBox(False, 0), 0, 1, 0, 1, 0,0,0,0)
    table.attach(self.hButton, 0, 1, 1, 2, 0,0,0,0)
    table.show()

    self.vbox.add(table)

    # Connect/disconnect  
    hbox = gtk.HBox(False, 0)
    self.vbox.pack_start(hbox, False)    
    hbox.set_border_width(10)
    hbox.pack_start(gtk.Label(), True, True, 0)

    # Connect
    self.button_call = gtk.Button("")
    self.button_call.set_name("callButton")
    self.button_call.connect("clicked", self.callButton)    
    #hbox.pack_start(self.button_call, False)
    align = gtk.Alignment(0.5)
    align.set_padding(0, 0, 44, 44)
    align.add(self.button_call)
    align.show()
    #hbox.pack_start(align, False)
    hbox.pack_start(align, False)

    # Disconnect
    self.button_disconnect = gtk.Button()
    self.button_disconnect.set_name("disconnectButton")
    self.button_disconnect.connect("clicked", self.exit)    
    hbox.pack_start(self.button_disconnect, False)   

    hbox.add(gtk.Label())    
    self.window.show_all()
    self.window.set_keep_above(True) 
```

编辑：

```
Error like: GtkWarning: Unable to locate theme engine in module_path: "pixmap",
  gtk.rc_parse_string(button_rc)

Solution: 
sudo apt-get install gtk2-engines-pixbuf 
```

# javascript - 通过代码清除浏览器缓存js文件

> ID：13698515
> 
> 赞同：0
> 
> 时间：2012-12-04T08:09:46.230
> 
> 标签：javascript, caching

为了从我的 js 文件中清除浏览器缓存，
我将 assemblyInfo 中的版本号添加到 src 属性中：

就像是 ：

```
<script src="@Url.Content("~/Scripts/MyJs.js?version=1.1.5")" type="text/javascript"></script> 
```

我认为此代码仅在我更改版本号时才强制 js 代码刷新。但是，尽管我没有更改版本号，但似乎每次都会刷新。

知道为什么会这样吗？如何解决这个问题？

谢谢

# phpunit - PHPUnit Listener 已加载但未使用

> ID：13698518
> 
> 赞同：5
> 
> 时间：2012-12-04T08:09:53.043
> 
> 标签：phpunit, listener

我正在使用 PHPUnit 3.4.14，我正在尝试添加一个监听器。

我写了一个简单的：

```
class My_Test_Listener implements PHPUnit_Framework_TestListener
{
    public function addError(PHPUnit_Framework_Test $test, Exception $e, $time)
    {
... 
```

我在 phpunit.xml 文件中声明了它：

```
<phpunit bootstrap="./bootstrap.php">
    <testsuites>
        <testsuite name="auth">
            <directory>./library/Ademe/Auth</directory>
        </testsuite>
    </testsuites>
    <listeners>
        <listener class="Listener" file="./library/My/Test/Listener.php">
    </listener>
    </listeners>
</phpunit> 
```

我的类已加载（如果我省略实现其中一种方法，它会在日志中说明），但我从不进入这些方法。我试过这个例如：

```
public function startTestSuite(PHPUnit_Framework_TestSuite $suite)
{
    die('startTestSuite');
} 
```

您知道可能缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T13:14:31.670

好的，我知道了，类名错误，虽然没有报错。我应该这样做：

```
<phpunit bootstrap="./bootstrap.php">
    <testsuites>
        <testsuite name="auth">
            <directory>./library/Ademe/Auth</directory>
        </testsuite>
    </testsuites>
    <listeners>
        <listener class="My_Test_Listener" file="./library/My/Test/Listener.php">
    </listener>
    </listeners>
</phpunit> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-04T13:25:30.300

我有同样的错误，但监听器只有在我使用时才起作用

```
<listener class="\Name\Space\MyTestListeners" ></listener> 
```

# eclipse - 为什么 Shift + Cmd + M 第一次在 Eclipse 中不起作用？

> ID：13698533
> 
> 赞同：0
> 
> 时间：2012-12-04T08:10:55.773
> 
> 标签：eclipse

在我的 IDE 中，我必须首先使用鼠标导航到该选项。一旦我最小化或最大化编辑器窗口一次，`Shift`++`Cmd`开始`M`工作但不是在那之前。有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:18:42.447

似乎很奇怪。你会检查哪个命令绑定到`Shift`++`Cmd`吗`M`？切换最大化活动视图/编辑器的默认快捷方式是`Ctrl`+ `M`。您可以签入`Preferences > General > Keys`或点击`Cmd`+ `Shift`+`L`两次。

# sql-server - SQL Server：将二进制（16）转换为字符串

> ID：13698534
> 
> 赞同：0
> 
> 时间：2012-12-04T08:11:14.930
> 
> 标签：sql-server, sql-server-2008, md5

> **可能重复：**
> [如何反转 MD5 以获取原始字符串？](https://stackoverflow.com/questions/12287704/how-to-reverse-md5-to-get-the-original-string)

我正在尝试将数据类型的列值`binary(16)`转换为其原始值（字符串）。

有没有办法做到这一点。

示例：`0x3820DA3FECE029257C26C7C308BFB2AB`将值转换为字符串。

提前感谢您的反馈。

# objective-c - GLubyte / GLushort 使用问题

> ID：13698536
> 
> 赞同：0
> 
> 时间：2012-12-04T08:11:20.767
> 
> 标签：objective-c, ios, opengl-es, byte, opengl-es-2.0

我是 OpenGL ES 的新手。我正在尝试构建一个不使用任何手册、教程的球体......

我成功地实现了我的目标。我可以使用 TRIANGLE_STRIP 绘制一个球体。以及我在绘制之前指定的经络/水平线的数量。

当我的顶点索引少于 256 个时，一切正常。我尝试使用 GLushort 代替 GLubyte，但情况发生了很大变化。

```
GLubyte *Indices;
...
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLubyte) * (meridians * (horizontals * 2 + 2)), Indices, GL_STATIC_DRAW);
...
Indices = malloc(sizeof(GLubyte) * (meridians * (horizontals * 2 + 2))); 
```

那就是我将字节更改为短的地方。

[GitHub 上的当前项目](https://github.com/iwheelbuy/open_gles_test_project)

我应该怎么办？

这是我将字节更改为短的图片

![格鲁短](../Images/3034b27fdcfc874635a80011eab0a6c2.png) ![格鲁字节](../Images/5814c848672e317da9fe19d669d4ce5e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:35:01.417

看起来您忘记更改以下行：

`glDrawElements(GL_TRIANGLE_STRIP, (meridians * (horizontals * 2 + 2)), GL_UNSIGNED_BYTE, 0);`

这表明有许多索引要渲染，每个索引都是一个无符号字节的大小（很可能是 8 位，但实际数字是特定于平台的……虽然它不是 8 位的非常非常罕见） . 但是，您已经填充了一个无符号短裤大小的索引数组（可能是 16 位），因此最终会发生的是您的每个数字都将被读取两次。一次是“第一个”8 位，一次是“第二个”（字节序将确定是高位还是低位在前）。由于你的很多索引（大多数？）都低于 255，那么会有很多顶点变成“0”，因为高 8 位都是 0。最重要的是，你只会渲染一半你的指数。

因此，您需要向 OpenGL 表明它需要将这些索引绘制为无符号短裤，而不是将上述行更改为：

`glDrawElements(GL_TRIANGLE_STRIP, (meridians * (horizontals * 2 + 2)), GL_UNSIGNED_SHORT, 0);`

# jira - JIRA 自定义字段上下文问题

> ID：13698541
> 
> 赞同：0
> 
> 时间：2012-12-04T08:11:35.073
> 
> 标签：jira, jira-plugin

我创建了一个名为“类型”的自定义字段（选择列表），在项目 A 中，我有 3 种问题类型，有没有办法为项目 A 下的每个问题类型配置不同选择列表选项的“类型”？谢谢

例如：

*   问题类型 1，“类型”，值为 1、2、3
*   问题类型 2，“类型”，值为 A、B、C
*   问题类型 3，“类型”，值为 X、Y、Z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:29:34.830

是的，您可以使用 Javascript 创建动态字段，请在[此处查看此答案](https://stackoverflow.com/questions/12732143/how-to-add-country-selection-field-to-jira#answer-12732144)。

这样，您可以根据预定义列表或纯动态列表填充选择选项。如果您需要有关编码部分的帮助，请随时询问..

# wpf - 从 VM 的数据中提取

> ID：13698546
> 
> 赞同：1
> 
> 时间：2012-12-04T08:12:01.503
> 
> 标签：wpf, mvvm, draw

我正在学习创建 WPF 应用程序并且我有一个家庭作业。我必须创建一个 wpf mvvm “tron lightcycle 游戏”，但不幸被卡住了。

在视图 (Mainwindow.xaml) 中有一个画布。我应该在这里画画。

```
...    
<Canvas Name="cnvs_game" Margin="5,5,5,5">
... 
```

在 ViewModel 中有一个 GameData 类和一个 Timer。GameData 的每个刻度都会更新（GameTime,Player1CanvasPosition (Point),... ）。

我将 Gametime 竞标到 View 中，如下所示：

**主窗口.xaml.cs：**

```
...
<TextBlock Text="{Binding GameTime}" />
... 
```

**ViewModel.cs：**

```
...
private GameData _GameData;
...
public String GameTime { get { return _GameData.GameTime.ToString(); } }
...

private void GameTimer_Tick(object sender, EventArgs e)
{
    _GameData.Step();
    OnPropertyChanged("GameTime"); // PropertyChanged with error handling
    OnPropertyChanged("Player1CanvasPosition ");
    OnPropertyChanged("Player2CanvasPosition ");
} 
```

视图中的 GameTime 刷新。这并不难。但是我还是不知道怎么画。

我应该如何获得 Player1CanvasPosition 并在那里绘制一个矩形（在画布中）。做这个的最好方式是什么？请帮帮我！:S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:51:07.160

您可以像使用 GameTime 一样执行此操作，例如：

```
<Canvas Name="cnvs_game" Margin="5,5,5,5">
    <Rectangle Canvas.Left="{Binding Player1CanvasPositionX}" Canvas.Top="{Binding Player1CanvasPositionY}" ... />
    <Rectangle Canvas.Left="{Binding Player2CanvasPositionX}" Canvas.Top="{Binding Player2CanvasPositionY}" ... />
 ... 
```

并在 ViewModel 中创建调用 OnPropertyChanged 的​​ Player1CanvasPositionX 属性，然后在更改 ViewModel 中的属性时，矩形将移动。

编辑：为了动态添加矩形，我将使用绑定到 ObservableCollection 位置的 ItemsControl。ItemsControl 数据模板将包含一个绑定到该位置的矩形。查看此链接以获取更多详细信息[WPF Canvas，如何使用 MVVM 代码动态添加子项](https://stackoverflow.com/questions/5913792/wpf-canvas-how-to-add-children-dynamically-with-mvvm-code-behind)。

# python - 用于函数参数预处理的python装饰器

> ID：13698549
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:12:08.427
> 
> 标签：python, decorator

我最初的问题是我需要剥离一个字符串，然后由操作员拆分。

```
s = " a & b | c & d "
l = map(lambda x : map(lambda x:x.strip() , x.strip().split('&')), s.strip().split('|')) 
```

这对于人们阅读来说太麻烦了，所以我正在考虑使用装饰器来做这个 strip() 预处理。

这是我目前的解决方案，但它不起作用！

## 更新：

```
query_AND =lambda wl:  '.*'+'.*'.join(wl)+'.*'

def d_query_AND(query_split):
    def d_query_AND_f(query_split):
        return query_AND(query_split)
        #return query_spli
    return d_query_AND_f

@d_query_AND
def query_split(p):
    return [v for v in p.split('&')]

print query_split("asd & asdsa & sadsa") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:20:46.703

我不得不承认我不完全理解你为什么需要一个装饰器。

标记这些表达式的一种相对简单的方法是使用正则表达式：

```
In [12]: re.findall(r'[^|&\s]+|&|[|]', ' a & b | c & d ')
Out[12]: ['a', '&', 'b', '|', 'c', '&', 'd']

In [13]: re.findall(r'[^|&\s]+|&|[|]', 'asdasd&sdasd| asdsa & asdsda')
Out[13]: ['asdasd', '&', 'sdasd', '|', 'asdsa', '&', 'asdsda'] 
```

正则表达式由三个组件 OR-ed 组成：

*   `[^|&\s]+``&`匹配除,`|`和空格之外的一系列字符。
*   `&`匹配`&`。
*   `[|]`匹配`|`。

如果您不需要捕获运算符，则可以将正则表达式简化为`r'[^|&\s]+'`.

**编辑**：如果您不想分割空格，正如您在评论中暗示的那样，以下应该有效：

```
In [18]: map(string.strip, re.findall(r'[^|&]+|&|[|]', 'asdasd&sd  asd| asdsa & asdsda'))
Out[18]: ['asdasd', '&', 'sd  asd', '|', 'asdsa', '&', 'asdsda'] 
```

# javascript - 如何使用javascript检查网站的响应时间？

> ID：13698551
> 
> 赞同：2
> 
> 时间：2012-12-04T08:12:17.817
> 
> 标签：javascript, httpwebrequest, stopwatch

我使用 httpwebrequest 检查 c# 中网站的响应时间，并使用秒表测量时间。如何使用 javascript 进行 webrequest 和秒表检查时间的好方法？

这是我的 c# 示例。

```
 Uri URL = new Uri("http://www.example.com");                    
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URL);
 request.Timeout = 10000;
 Stopwatch stopWatch = new Stopwatch();
 stopWatch.Start();
 HttpWebResponse response = (HttpWebResponse)request.GetResponse();
 response.Close();
 stopWatch.Stop();
 int ms = stopWatch.Elapsed.Milliseconds; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:13:54.980

您无法以任何好的方式做到这一点，因为您无法使用 JavaScript 连接到任意网站。

虽然您可以尝试滥用`script`,`iframe`或`img`标签，但这将是一个非常丑陋的黑客攻击。但在这种情况下，您将测量设置`src`属性（假设元素已经在 DOM 中）和触发其 onload 事件之间的时间。

* * *

由于您想显示服务器的响应时间，请考虑使用[SmokePing 之](http://oss.oetiker.ch/smokeping/)类的东西。你在服务器上运行它，它会从它收集的数据中生成非常棒的图表。

# android - 将街道地址转换为坐标android

> ID：13698556
> 
> 赞同：4
> 
> 时间：2012-12-04T08:12:47.430
> 
> 标签：android

我正在尝试找到一种方法来将给定的街道地址转换为与 android 应用程序中的谷歌地图的坐标。请有任何建议或一些链接来阅读它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:18:00.773

尝试这个

```
 Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());
 String textToSearch = searchText.getText().toString();
 List<Address> fromLocationName = null;
 fromLocationName = geocoder.getFromLocationName(texToSearch,   1);
 if (fromLocationName != null && fromLocationName.size() > 0) {
    Address a = fromLocationName.get(0);
    GeoPoint point = new GeoPoint(
                         (int) (a.getLatitude() * _1E6), 
                         (int) (a.getLongitude() * _1E6));
 } 
```

# javascript - 更改 obj 宽度和位置取决于窗口宽度

> ID：13698562
> 
> 赞同：0
> 
> 时间：2012-12-04T08:13:34.650
> 
> 标签：javascript, jquery

我正在尝试使`box`宽度和`btn`位置，更改取决于`window width`.
Q1。如何删除滚动条后面的[空白？](http://i.imgur.com/wT443.png)（我已经设置了 100% ..）

Q2。我点击`btn`2次后回到蓝色的，`btn`位置和以前不一样了。如何解决？（我设置了console.log来检查我点击`btn` `window width`是否会不同，为什么？）

[jsFiddle](http://jsfiddle.net/JVfAd/)
任何建议将不胜感激，谢谢。

```
$(function(){
    //set column amount
    var colamt=0;
    var winwid = $(window).width();
    function setcolamt(){
        winwid = $(window).width();    
        console.log(winwid);
        if(winwid > 300){
            if(colamt !== 8){
                colamt = 6;
            }
        }
        console.log(colamt);
    };
    setcolamt();
    //set column width
    var colwid;
    function setcolwid(){
        //set column width
        colwid = 100 / colamt + "%";
        console.log(colwid);
    };
    setcolwid();
    //set img width
    function setimgwid(){
        $('.box').css({width: colwid});
    };
    setimgwid();
    // ****** button
    //set button postion
    var boxwid;
    function setbtnpos(){
        boxwid = $('.box').width();
        console.log(boxwid);
        $('.colamtminus').css({top: boxwid * 2});
        $('.colamtplus').css({top: boxwid * 2});    
    };
    setbtnpos();
    //set button visibility when landing
    function visbtnchangecolamt(){
        if(winwid > 300){
            if(colamt == 8){
                $('.colamtplus').show();
                $('.colamtminus').hide();
            }
            else{
                $('.colamtplus').hide();
                $('.colamtminus').show();
            }
        }
    };
    visbtnchangecolamt();
    //click button update colamt and set button visibility
    function setbtnchangecolamt(){
        winwid = $(window).width();    
        $('.colamtplus').click(function(){
            if(winwid > 300){
                colamt = 6;
            }
            setcolamt();
            setcolwid();
            setimgwid();
            setbtnpos();
            visbtnchangecolamt();
            $('.colamtplus').hide();
            $('.colamtminus').show();
        });
        $('.colamtminus').click(function(){
            winwid = $(window).width();    
            if(winwid > 300){
                colamt = 8;
            }
            setcolamt();
            setcolwid();
            setimgwid();
            setbtnpos();
            visbtnchangecolamt();
            $('.colamtplus').show();
            $('.colamtminus').hide();
        });
    };
    setbtnchangecolamt();
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:08:39.487

不要在 setbtnchangecolamt() 中加载 setcolamt()；

# filemaker - Filemaker 是否适合 EMR？

> ID：13698563
> 
> 赞同：1
> 
> 时间：2012-12-04T08:13:40.220
> 
> 标签：filemaker

一家医疗机构与我们联系，将 Filemaker 用作成熟的 EMR 系统，重点强调使用 iPad 输入患者记录、照片、数字签名等，这些显然也可以在台式机上访问。最终，他们希望这样的系统能够取代他们当前的 EMR 并接管所有计费操作、患者调度等。他们只在实践中使用 Mac。

我们对 Filemaker 的经验很少，但发现[它](http://goo.gl/z0wsZ)讨论了它的优点和缺点，但自 2009 年提出这个问题以来，Filemaker 似乎已经走了很长一段路……

所以总的来说，我只是想弄清楚 Filemaker 是否适合这样的应用程序，或者使用 FMP12 和 FM Go 组合的优缺点是什么。

（对不起，如果我做错了什么 - 第一个问题......）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:27:57.733

老实说，不值得。这是一个非常笨重的数据库前端。

如果您确实决定选择它，那么您基本上会坚持向 Filemaker 开发人员支付剩余的费用。

目前我的一位客户已经使用了过去~6+？在过去 8 个月只与他们在一起多年之后，我正在努力将他们推离它并进入更新的系统。

我可以建议查看 Mastercare EMR、Profile 和 MMEX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:18:12.303

当然，FileMaker 完全可以胜任，而且我希望您能够比使用任何其他方法（尤其是 iPad）更快地获得第一个结果。有很多用 FileMaker 编写的 EMR。当然，也有缺点。它始终以最终用户为目标，因此从普通程序员的角度来看，它最终变得相当不合常规。许多程序员不喜欢这样。作为最终用户，它遭受了许多简化（实际上并不完全受苦；这使得开发更快，因为选择更少），但是人们总是想要一些特别的东西，因此有大量的变通方法来克服这些简化。这些变通办法从相对无害到非常多毛不等。

例如，要在 iPad 上签名文档，您需要添加一个 webviewer 控件，该控件通过“data:”协议指向生成的 HTML 页面。该页面将有一个 JavaScript 来捕获用户的触摸，将它们绘制在画布上，并将其序列化为字符串。稍后脚本将捕获该字符串，将其存储在 FileMaker 字段中，并更改生成的 HTML 以使用该字符串，以便 JavaScript 可以重绘签名。这个比较简单，因为其他任何方式都无法获得该功能，所以被广泛使用；甚至还有一个大约 300 美元的商业模块。一个复杂的应用程序可能包含几十个这样的变通方法；任何不是 FileMaker 开发人员的人都无法理解为什么需要 Web 查看器来捕获签名或为什么要使用[一个奇怪的隐形标签装置，用来显示看起来像一个简单的弹出列表](http://www.teamdf.com/weetbicks/cool-things-to-do-with-tab-controls-in-filemaker-12/151/)。即，这不像您从那里读一本书并工作；准备好阅读很多博客和频繁的论坛和邮件列表。

话虽如此，它仍然是一款具有独特功能的好产品（例如 iPhone/iPad 客户端）；与优秀的开发人员配对，它可以非常强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:43:25.843

作为我自己的 FileMaker 开发人员，我会说去吧。我同意 Mikhail 的观点 - 你会比任何其他平台更快地看到结果。您可以自己轻松地进行更改，也可以找 FileMaker 开发人员 - 就​​像您需要为任何应用程序找开发人员一样。

对于现成的应用程序，它们往往非常不灵活，但是我确信那里有一些系统可以进行一些定制。

FileMaker 是一款功能非常强大的产品。我们为垂直市场编写了许多应用程序，例如律师事务所，甚至是 Harley Street 整形外科医生，他在 iPad 上收集患者数据，甚至在患者照片上勾勒出建议的手术。

对于那些认为 FileMaker 是婴儿的人，请访问[http://www.businessmancrm.com](http://www.businessmancrm.com) - 这是一个在全球范围内使用的完整 ERP 系统。这不是广告，而是对 FileMaker 功能的演示。

美元兑美元，FileMaker 将赢得胜利……而且在时间框架方面，没有竞争。我们思想开放——我们不断寻找其他产品来为自己和客户开发应用程序，但我们还没有发现任何更可行的产品。

优点：

*   极快的环境
*   跨平台
*   将其他 SQL 数据源集成到应用程序中
*   ODBC 支持
*   远程访问
*   如果需要，可以从 U 盘运行！
*   全球数以千计的开发者
*   大型社区
*   FileMaker Inc. 自成立以来每个季度都盈利，因此稳定且有苹果的支持！
*   合理的成本
*   自己做出改变
*   备份方便，支持增量备份
*   易于保护和加密网络上的数据
*   支持终端服务器
*   FMGo 是免费的

缺点

*   高级语言（不是带有布局对象控制的低级语言） - 但是支持插件
*   需要 FileMaker 客户端（除非 Web 应用程序/界面是用 PHP 构建的或使用 IWP - Instant Web Publishing）
*   专有数据库（但可以轻松链接到 MySQL、MSSQL 和 Oracle）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T22:08:12.230

在最近的一个职位上开发了一个 EMR 系统 3 年，我可以根据经验告诉你，真正的 EMR 系统的要求可能很快就会超出 FileMaker 中容易做到的范围。一些非常重要的 EMR 功能立即浮现在脑海中：

保险资格验证：是否有一种方法可以访问所有主要付款人的网络服务或第三方聚合器以从 iPad 验证保险资格？

保险卡 OCR：当然你可以拍一张保险卡的照片，但现在你有后台工作人员从图像中输入该信息。我们在 EMR 中实施了保险卡的 OCR，这大大节省了成本和时间。

安全/隐私问题：HIPAA 合规性很重要，FileMaker 是否适当透明以符合合规要求？有没有办法审核谁查看了记录？数据如何通过网络传输？

电子处方：所有现代 EMR 都支持电子处方，它带有一套复杂的规则和实施细节，我希望在继续之前确定 FileMaker 可以与电子处方网关集成。

我主要担心使用任何现成的跨平台工具来解决像 EMR 这样大而复杂的问题，因为我已经投入了大量的时间和金钱来解决可能会让你失望的问题无法实现某个功能或要求，而支付开发原生 iOS 应用程序（以及 Web 应用程序以及您需要与之集成的任何其他内容）的前期费用将消除这种可能性，但显然成本更高。

# java - 使用两个级联分类器进行人脸和眼睛检测

> ID：13698564
> 
> 赞同：3
> 
> 时间：2012-12-04T08:13:39.330
> 
> 标签：java, android

对于初学者的问题，我很抱歉，但我还没有找到答案。我正在尝试实时检测面部和眼睛。如果我仅使用面部检测或仅眼睛检测，则代码（在 android openCV 上运行）工作正常，但是当我将两者结合起来时，就像在附加的代码中一样，程序在运行时崩溃。我不知道如何组合这两个级联（一个在脸部周围显示一个矩形，另一个在眼睛周围显示）。任何帮助将不胜感激！

```
 InputStream is3 = context.getResources().openRawResource(R.raw.lbpcascade_frontalface);
        File cascadeDir = context.getDir("cascade", Context.MODE_PRIVATE);
        File cascadeFile = new File(cascadeDir, "lbpcascade_frontalface.xml");
        File cascadeFileEye = new File(cascadeDir, "eyes_detect.xml");
        FileOutputStream os = new FileOutputStream(cascadeFile);

        byte[] buffer = new byte[4096];
        int bytesRead;

        while ((bytesRead = is3.read(buffer)) != -1) {
            os.write(buffer, 0, bytesRead);
            }

        is3.close();
        os.close();
        FileOutputStream os1 = new FileOutputStream(cascadeFileEye);

        byte[] bufferEye = new byte[4096];
        int bytesReadEye;

        while ((bytesReadEye = is3.read(bufferEye)) != -1) {
            os1.write(bufferEye, 0, bytesReadEye);
            }

        is4.close();
        os1.close();

        mCascade = new CascadeClassifier(cascadeFile.getAbsolutePath());
        mCascadeEye = new CascadeClassifier(cascadeFileEye.getAbsolutePath());
        if (mCascade.empty()) {
            //Log.e(TAG, "Failed to load cascade classifier");
            mCascade = null;
            }  

        if (mCascadeEye.empty()) {
            //Log.e(TAG, "Failed to load cascade classifier");
            mCascadeEye = null;
            }  

        cascadeFile.delete();
        cascadeDir.delete(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:52:30.747

这是来自opencv主页的相应教程：

[http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T07:21:42.953

你是不是错过了这条线

`InputStream is3 = context.getResources().openRawResource(R.raw.eyes_detect);`

您的 Raw 文件夹中也应该有文件 eye_detect.xml。

我使用了 haarcascade_eye_tree_eyeglasses.xml，并且只通过了检测到的人脸的裁剪区域来获取眼睛的位置。

# php - codeigniter 类错误

> ID：13698566
> 
> 赞同：0
> 
> 时间：2012-12-04T08:13:45.710
> 
> 标签：php, codeigniter

出于某种原因，我无法让我的模型工作..以前从未遇到过这个问题。

```
function overview($userid)
{

    // Load needed model
    $this->load->model('budget_model');
    $data['month_budget'] = $this->budget_model->get_monthly_budget($userid);

    if(isset($_POST['submit']))
    {

        foreach($_POST as $key => $value)
        {

            if(is_numeric($key))
            {
                $this->buget_model->update_buget($key,$value);
                echo "DONE";
            }

        }       

        echo "<pre>";
        print_r($_POST);
        echo "</pre>";
    }

    $data['main'] = 'super_admin/budget_edit_overview_view';
    $this->load->view('default/main_view',$data);

} 
```

该模型适用于“$this->budget_model->get_monthly_budget($userid);” 但我不断收到他们的错误，

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：Admin::$buget_model
> 
> 文件名：控制器/admin.php
> 
> 行号：166
> 
> 致命错误：在第 166 行的 /Applications/MAMP/htdocs/therace/application/controllers/admin.php 中的非对象上调用成员函数 update_buget()

模型方法，

```
function update_buget($id,$budget)
{

    $this->db->where('id', $id);

    // Update the month budget
    $data = array(
        'month_goal' => $budget
    );

    $this->db->update('budget_month', $data);

    return true;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:14:43.233

仔细阅读错误信息：

`Message: Undefined property: Admin::$buget_model`

你有没有打错字，实际上是什么意思`$budget_model`？

编辑：您的代码中似乎有很多`budget`vs .。`buget`我建议使用拼写检查器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:19:26.953

您在第 166 行输入错误。

这是`$this->budget_model->update_buget($key,$value);`

不是`$this->buget_model->update_buget($key,$value);`

# wordpress - Facebook 评论不会出现在每个帖子上

> ID：13698569
> 
> 赞同：1
> 
> 时间：2012-12-04T08:14:00.017
> 
> 标签：wordpress, facebook-comments

我已将 Facebook 应用程序添加到我的 wordpress 博客中，评论框出现在我的一些旧帖子上，但没有出现在我的新帖子上。都写在同一个博客上，为什么评论框会选择性的出现？如何让它出现在所有帖子上？

我的网站是 www.heymouser.com，如果你想看看的话。

# android - 无法将数组适配器添加到 Android 选项卡中的片段

> ID：13698574
> 
> 赞同：0
> 
> 时间：2012-12-04T08:14:20.957
> 
> 标签：android

这是我的主要标签活动：

```
public class LocationTabActivity extends RoboSherlockFragmentActivity{

    private MapFragment mMapFragment;
    private MyListFragment mMyListFragment;

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Exchanger.mMapView = (MapView)findViewById(R.id.mapView1);

        getSupportActionBar()

          .setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab newTab0 = getSupportActionBar().newTab();

    newTab0.setText("Location");

    newTab0.setTabListener(new TabListener<MyListFragment>(
                    LocationTabActivity.this, "listFragment", MyListFragment.class));

    ActionBar.Tab newTab1 = getSupportActionBar().newTab();

    newTab1.setText("Map");

    getSupportActionBar().addTab(newTab0);

    //getSupportActionBar().addTab(newTab1);

    }

    public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
        private Fragment mFragment;
        private final Activity mActivity;
        private final String mTag;
        private final Class<T> mClass;

        /** Constructor used each time a new tab is created.
          * @param activity  The host Activity, used to instantiate the fragment
          * @param tag  The identifier tag for the fragment
          * @param clz  The fragment's Class, used to instantiate the fragment
          */
        public TabListener(Activity activity, String tag, Class<T> clz) {
            mActivity = activity;
            mTag = tag;
            mClass = clz;
        } 

        /* The following are each of the ActionBar.TabListener callbacks */
        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft1) {
            // Check if the fragment is already initialized

            FragmentManager fragMgr = ((FragmentActivity) mActivity).getSupportFragmentManager();
            FragmentTransaction ft = fragMgr.beginTransaction();

            if (mFragment == null) {
                // If not, instantiate and add it to the activity
                mFragment = Fragment.instantiate(mActivity, mClass.getName());

                ft.add(android.R.id.content, mFragment, mTag);
            } else {
                // If it exists, simply attach it in order to show it
                ft.attach(mFragment);
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

    }

} 
```

这是我的 MyListFragment：

```
public class MyListFragment extends SherlockFragment {

    public static final String TAG = "listFragment";

    private final String[] mItems = { "item1","item2","item3" };

    ArrayList<Location> locations = new ArrayList<Location>();
    private View view;
    public MyListFragment() {}
    TextView address;
    @Override
    public void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        setRetainInstance(true);

        Location location = new Location();
        location.address = "hello";

        locations.add(location);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle data) {
        // Inflate the ListView layout file.

        view = inflater.inflate(R.layout.location_list_fragment,vg, false);
        address =(TextView) view.findViewById(R.id.address);
        final ListView locationListLayout = (ListView) view.findViewById(R.id.locationListLayout);

        LocationListAdapter locationList = new LocationListAdapter(getActivity(),R.layout.location_list_fragment,locations);
        locationListLayout.setAdapter(locationList);

        return view;
    }

    @Override
    public void onViewCreated(View arg0, Bundle arg1) {
        super.onViewCreated(arg0, arg1);

    }
} 
```

这是我的 LocationListAdapter：

```
public class LocationListAdapter extends ArrayAdapter<Location> {

    public ArrayList<Location> locations;
    public Context c;

    public LocationListAdapter(Context context, int textViewResourceId,ArrayList<Location> objects) {

        super(context, textViewResourceId,objects);

        this.locations = objects;
        c = context;

        // TODO Auto-generated constructor stub
    }

    public View getView(int position,View convertView,ViewGroup parent){

        View v = convertView;

        if (v == null ){
                    LayoutInflater li = (LayoutInflater)c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = li.inflate(R.layout.location_list_item,null);
        }

        Location location = locations.get(position);

        if(location != null){
            TextView locationAddress = (TextView)v.findViewById(R.id.address);
            locationAddress.setText(location.address);

        }

        return v;

    }
} 
```

是的。我正在将一个位置数组列表添加到一个选项卡的片段中的 listView 中。

但是，没有数据显示。没有一个列表。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:20:29.967

您是否尝试过使用片段的`setListAdapter()`功能而不是视图的功能`setAdapter()`？

那是...

```
setListAdapter(locationList);
// instead of ...
// locationListLayout.setAdapter(locationList); 
```

哦，列表视图需要有 id`@id/android:list`才能工作。

**编辑：**

您的片段是否正在显示？尝试使用提供的 FT 而不是您自己的（缺少 .commit()）

```
 @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) { //*** <-- renamed ft1
        // Check if the fragment is already initialized

        // You have no .commit() on this transaction but you should probably use the one passed in, which gets committed for you externally.
        //FragmentManager fragMgr = ((FragmentActivity) mActivity).getSupportFragmentManager();
        //FragmentTransaction ft = fragMgr.beginTransaction();

        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());

            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    } 
```

# c#-3.0 - 使用 C# 的 ISAPI 过滤器

> ID：13698576
> 
> 赞同：0
> 
> 时间：2012-12-04T08:14:28.977
> 
> 标签：c#-3.0, isapi-redirect

网络上的大部分文章都在谈论使用 C++ 创建 ISAPI 过滤器 dll。是否可以使用 C# 创建 ISAPI 过滤器？我的要求是捕获少量请求和响应并进一步处理它，包括验证数据库中现有的 URL 和重定向。

是否可以使用 C# 实现相同的目标？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T16:01:10.443

您可以使用 http 处理程序来执行此操作。Msdn 有一篇很好的文章“ [http://msdn.microsoft.com/en-us/library/ms228090(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms228090(v=vs.85).aspx) ”。希望对您有所帮助

# r - R 等价于 Java 映射

> ID：13698577
> 
> 赞同：2
> 
> 时间：2012-12-04T08:14:42.403
> 
> 标签：r, rjava

我想将一个键/值对从我的 R 代码传递给一个 java 函数。我的 java 函数有参数`Map<String,String >`。

如何编写调用我的 Java 函数并将值传递给 map 的 R 函数？

**编辑 ：**

```
config <- list(Portname="PORT.H.2",MktValue="8000000",WtScheme="Closed")
createPortfolio<-function(config)
{
   m <- .jnew("java/util/HashMap")
   for( key in names(config)){
     m$put( key, config[key])

}
m 
```

得到

```
 Error in FUN(X[[2L]], ...) : 
  Sorry, parameter type `NA' is ambiguous or not supported. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:38:02.163

试试这样的东西怎么样？

```
m <- .jnew("java/util/HashMap")
m$put( "key", "value" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:05:33.997

我想你的意思是

```
for (key in names(config)) m$put(key, config[[key]]) 
```

因为您想将字符串作为值传递给`put`而不是列表。

（考虑在 rJava 邮件列表 stats-rosuda-devel 上询问以获得更及时的答案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T15:33:37.183

对于像我这样有此问题且无法访问 Java 代码的人来说，似乎可以制作一个 HashMap，并将其转换为 Map，如下所示：

```
m <- .jnew("java/util/HashMap")
m$put( "key", "value" )
map <- .jcast(m, "java/util/Map") 
```

# javascript - 何时在 JavaScript 中执行参数类型检查？

> ID：13698579
> 
> 赞同：0
> 
> 时间：2012-12-04T08:14:45.107
> 
> 标签：javascript

在大多数情况下，我正在开发的库将由一个或多个项目在内部使用。考虑到这一点，我应该添加对我编写的函数的所有参数执行类型检查的逻辑，对某些参数还是没有？我觉得进行选择性类型检查会给 API 带来一种不一致的感觉，对所有参数进行检查会使代码膨胀，而对任何参数都进行检查可能会导致无用的错误消息。任何关于为什么或为什么不的指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:22:23.267

首先，记录您的 API 很重要，即使它仅供内部使用。如果您在几年后需要您的代码，它会派上用场。

在本文档中，您可以告诉用户参数应该是什么类型。一个常用的文档工具是[doxygen](http://doxygen.org)：

```
/**
* \brief Converts a string into a DummyObject
* \param str should be a valid string
*/
function str_to_dummy(str) {

}

/**
* \brief Converts an object into a DummyObject
* \param jsobj should be an object which contains at least
*        the following attibutes: 'height','length', 'size'
* \example json_to_dummy({'height': 12,'length': 15,'size': 11});
*/
function json_to_dummy(jsobj) {

} 
```

请记住，无论哪种方式，用户都会遇到错误消息：

```
参数 'o' 必须是具有属性 'height' 的对象
```

或者

```
ReferenceError：o.height 未定义
```

虽然得到更详细的错误是件好事，但如果您正确记录 API，则通常没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:26:44.037

我想这一切都取决于您希望如何处理库中的错误。你能接受有人向你传递无效类型的参数的事实吗（尽管我假设文档清楚地说明了他/她应该传递什么）？如果您对此感到满意，我会跳过类型检查以节省库大小。

毕竟，如果有人想篡改它，那只是客户端的javascript。你对此无能为力。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T08:24:56.747

我认为您（几乎）总是应该检查或转换函数参数。
我只是有smth。像昨天这样：

```
foo("1");  

function foo(myVar)  
{  
  return myVar+2;  
} 
```

所以你应该小心。我相信这是一个很好的理由。

# java - Java replaceAll 和正则表达式

> ID：13698590
> 
> 赞同：0
> 
> 时间：2012-12-04T08:15:25.093
> 
> 标签：java, android, replaceall

我正在使用 Android，我想用另一个字符串替换字符串中某个 {character} 的所有出现。例如，如果我们正在谈论的字符是 'a' 而替换是 "12"，那么：

```
Input : There are {a} months in a year.
Output : There are 12 months in a year. 
```

我不知道如何处理`replaceAll`方法和`regexes`...

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:17:26.920

为此，您可以使用 `String.format`

```
int aInt = 12;
String.format("There are {%d} months in a year",  aInt ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:22:19.983

您可以使用它将字符串中**所有**出现的 {a}`string.replace("{a}", "12")`替换为 12 并且不采用正则表达式。如果您需要搜索模式，请使用**`replaceAll`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T08:22:31.730

由于您在这里不需要使用正则表达式，因此 vishal_aim 的答案更适合这种情况。

第一次尝试`replaceAll`是

```
String str = "There are {a} months in a year.";
str.replaceAll("{a}", "12"); 
```

但它不起作用，因为`replaceAll`需要一个正则表达式并且`{}`是正则表达式中的特殊字符，所以你需要转义它们：

```
str.replaceAll("\\{a\\}", "12"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:11:09.180

```
String str = "There are {a} months in a year.";

str.replaceAll(Pattern.quote("{a}"), "12"); 
```

**编辑**：

[java.util.regex.Pattern.quote(String)](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)方法返回指定字符串的文字模式字符串。**

# c# - 如何调用 Kinect SDK 中的方法？

> ID：13698591
> 
> 赞同：0
> 
> 时间：2012-12-04T08:15:28.177
> 
> 标签：c#, kinect, kinect-sdk

我有一个程序可以检查 Kinect 是否连接到计算机。但是，我真的不知道我是否需要调用一个方法（我会假设如此）以及在哪里？我附上了从介绍 Kinect 书籍中获得的代码。谢谢！

```
using System;
using System.Windows;
using System.Windows.Controls;
using Microsoft.Kinect;

namespace test
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        }

    KinectSensor kinectSensor;
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        try
        {
            KinectSensor.KinectSensors.StatusChanged += Kinects_StatusChanged;
            foreach (KinectSensor kinect in KinectSensor.KinectSensors)
            {
                if (kinect.Status == KinectStatus.Connected)
                {
                    kinectSensor = kinect;
                    MessageBox.Show("Connected");
                    break;
                }
            }
            if (KinectSensor.KinectSensors.Count == 0)
                MessageBox.Show("No Kinect Found");
            else
                Initialize();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    void Kinects_StatusChanged(object sender, StatusChangedEventArgs e)
    {
        switch (e.Status)
        {
            case KinectStatus.Connected:
                if (kinectSensor == null)
                {
                    kinectSensor = e.Sensor;
                    Initialize();
                }
                break;
            case KinectStatus.Disconnected:
                if (kinectSensor == e.Sensor)
                {
                    Clean();
                    MessageBox.Show("Kinect was disconnected");
                }
                break;
            case KinectStatus.NotReady:
                break;
            case KinectStatus.NotPowered:
                if (kinectSensor == e.Sensor)
                {
                    Clean();
                    MessageBox.Show("Kinect is not powered anymore.");
                }
                break;
            default:
                MessageBox.Show("Unhandled Status: " + e.Status);
                break;
        }
    }

    private void Initialize()
    {
        if (kinectSensor == null)
            return;
        kinectSensor.Start();
    }

    private void Clean()
    {
        if (kinectSensor != null)
        {
            kinectSensor.Stop();
            kinectSensor = null;
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:10:00.593

下载[Kinect for Windows 开发者工具包](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)。那里有多个关于如何做多种事情的示例，它们将帮助您入门并帮助您了解如何与 Kinect 交谈。

连接到 Kinect 后，您需要对其进行设置，然后订阅事件回调。你最终会得到一个看起来像这样的函数：

```
private void InitializeKinectServices(KinectSensorManager kinectSensorManager, KinectSensor sensor)
{
    // configure the color stream
    kinectSensorManager.ColorFormat = ColorImageFormat.RgbResolution640x480Fps30;
    kinectSensorManager.ColorStreamEnabled = true;

    // configure the depth stream
    kinectSensorManager.DepthStreamEnabled = true;

    kinectSensorManager.TransformSmoothParameters =
        new TransformSmoothParameters
        {
            // as the smoothing value is increased responsiveness to the raw data
            // decreases; therefore, increased smoothing leads to increased latency.
            Smoothing = 0.5f,
            // higher value corrects toward the raw data more quickly,
            // a lower value corrects more slowly and appears smoother.
            Correction = 0.5f,
            // number of frames to predict into the future.
            Prediction = 0.5f,
            // determines how aggressively to remove jitter from the raw data.
            JitterRadius = 0.05f,
            // maximum radius (in meters) that filtered positions can deviate from raw data.
            MaxDeviationRadius = 0.04f
        };

    // configure the skeleton stream
    sensor.SkeletonFrameReady += OnSkeletonFrameReady;
    kinectSensorManager.SkeletonStreamEnabled = true;

    // initialize the gesture recognizer
    _gestureController = new GestureController();
    _gestureController.GestureRecognized += OnGestureRecognized;

    kinectSensorManager.KinectSensorEnabled = true;

    if (!kinectSensorManager.KinectSensorAppConflict)
    {
      // additional init
    }
} 
```

这是我的通用设置函数，它基于 Developer Toolkit 中的示例。您将无法仅将其插入您的代码中，它会起作用。查看工具包中的示例将使您了解发生这种情况的位置以及如何最好地管理它。

这个`KinectExplorer`例子是一个很好的整体项目。它还将让您清楚地了解上述功能的工作原理（它具有相同的功能）。

# php - Zend Studio 中的命名空间提示

> ID：13698592
> 
> 赞同：2
> 
> 时间：2012-12-04T08:15:32.310
> 
> 标签：php, eclipse, namespaces, zend-studio

我的 Zend Studio 中有一个 php 项目，其中包含子文件夹 src/vendor/ (Silex)。在我的 src 文件夹中，我有一个文件夹结构，例如 Company/Project/...

当我想通过向导创建一个新类时，在我的其他项目中，它会填充“新类”窗口中的命名空间。

在这个项目中，当我使用新的“PHP Class”时，这不起作用，当我使用新的“Class”时，它使用的文件夹结构如下：src\Company\Project.....

那么如何为我的源文件夹设置命名空间呢？或者这是一个错误，因为我认为它们会被自动检测到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:43:44.057

只是猜测，但您确定您的项目已配置为支持 PHP 5.3+ 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:49:19.173

由于文件夹和命名空间之间的“连接”不是 PHP 内置的（例如在 Java 中），我想它不会直接在任何 IDE 中可用。

虽然在它的[PSR0中定义了](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)[PHP Fig](http://www.php-fig.org/)（PHP Framework Interop Group）：例如，它可能会被添加。顺便说一句，它不是 PHP 核心的一部分。`\Symfony\Core\Request => /path/to/project/lib/vendor/Symfony/Core/Request.php`

我没有使用 Zend Studio，但 Netbeans 也不支持新类的命名空间（但至少它是免费的！）

# html - “Uncaught SyntaxError: Unexpected token <”对于我的代码，但现有代码在 javascript 中可以正常工作吗？

> ID：13698593
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:15:32.493
> 
> 标签：html, css, underscore.js

我正在使用 underscore.js 模板化我的代码。它们是一些用文件编写的 html 代码，已经可以正常工作了。

当我编写这段代码时，javascript 拒绝运行它。

```
<script type="text/javascript" id='tmpl_experiment_schdule'>
        <div>
                </div>
</script> 
```

有人可以解释一下其他人的代码是如何工作的，而我的只是打开封闭的 div break 来运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:18:05.373

因为您不允许在`<script type="text/javascript">`元素内部的字符串之外使用 HTML 代码。该符号`<`用作比较运算符，而不是用作`tag starting token`.

由于您没有提供左侧`<`是出乎意料的。解析器期望像

```
<script type="text/javascript">
2 < 4;
</script> 
```

# java - Java/SQL 结果堆栈错误

> ID：13698597
> 
> 赞同：0
> 
> 时间：2012-12-04T08:15:48.577
> 
> 标签：java, sql, jdbc

这是我为班级编写的一种方法。它应该使用从查询数据库中获得的数据刷新表。尝试扫描 newResult.next() 行时出现错误。

我尝试调试，但这并没有告诉我任何东西。代码打印出“在while循环中”这一行，所以我知道问题出在它后面的那一行。我经常收到错误消息“结果集开始后”。我尝试查看我的代码，但看起来我也没有在其他任何地方调用该方法。谢谢。

```
public void refresh()
{

try
{

   Statement statement = gtPort.getConnection().createStatement();
   //this query is also not working, not really sure how it works.              
   String query = "SELECT CRN, Title, Instructor, Time, Day, Location, Letter"
                      + "FROM Section S WHERE CRN NOT IN " 
                      + "(SELECT CRN FROM Registers R WHERE Username = \""
                      + gtPort.userName + "\")";

    System.out.println(query);
    statement.executeQuery(query);
    System.out.println("Statemetne execute ");

    // String[] columns = {"Select", "CRN", "Title",  "Instructor",  "Time",
    // "Days", "location", "Course Code*", "Section"*,"Mode of Grading*"};  

    ResultSet result = statement.getResultSet();

    System.out.println("created result");
    data = new Object[10][10];

    System.out.println("created data");
    Object[] values = new Object[10];

    System.out.println("created values");
    //  values[0] = null;

    if (result == null)
    {
        System.out.println("result is null");
    }

    String[] titles = new String[100];

    //for (int i = 1; i< table.getColumnCount(); i++)
    //model.removeRow(i);

    //table.removeAll();
    //table.repaint()
    model.setRowCount(0);
    table = new JTable(model);

    model.setRowCount(35);
    for (int i = 1; result.next(); i++)
    {
        values[1] = Boolean.FALSE; 
        for (int j = 2; j< 8; j++)
        values[j] = result.getString(j); 

        titles[i] = result.getString(2);
                model.insertRow(i, values);

    }

    String[] codes = new String[table.getColumnCount()];
    System.out.println("count: " + titles.length);

    for (int i = 1; I < titles.length; i++)
    {
        query = new String("SELECT C.Code FROM Code C WHERE C.Title = \""
                        + titles[i] + "\"");
        //this is a different query to check for titles.        
        statement.executeQuery(query);

        System.out.println(query);
        ResultSet newResult = statement.getResultSet();
        //  codes[i] =  newResult.getString(1);

        if (newResult == null)
        {   
            System.out.println("it is null");
            break;
        }
        //this is the loop where it breaks.     
        while(newResult.next());
        {
            System.out.println("in while loop");
                    //this line prints, so the next line must be the problem.                       
            model.setValueAt(newResult.getString(1), i, 8);

        }

        System.out.println("nr: \t" +newResult.getString(1));           
    }       

    System.out.println("before table");
    table = new JTable(model);

    System.out.println("created table");

    }   

    catch (Exception exe)
    {
        System.out.println("errored in course selection");
        System.out.println(exe);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:21:54.687

1.  `ResultSet rs = statement.executeQuery(query);`改为写。`getResultSet()`当您从已执行的语句中获得多个结果集时调用。
2.  不要使用构造函数`new String()`来创建`String`. 简单地写：
    `String new = "content";`
3.  您无法预测您的第一个查询将返回多少，因此不要创建具有规定大小的数组，而是使用更好的`ArrayList`：

## 代码：

```
//creation
List<Object> values = new ArrayList<Object>();
List<String> titles = new ArrayList<String>();
//usage - adding
values.add(someObject);
//usage - getting
for (String title : titles)
//or
titles.get(byIndex); 
```

# iphone - 如何在 iOS 的 facebook sdk 上发布大视频？

> ID：13698598
> 
> 赞同：0
> 
> 时间：2012-12-04T08:15:48.370
> 
> 标签：iphone, ios, facebook

我正在使用 facebook sdk 上传视频，但我无法在 facebook 上上传超过 60MB 的视频。我也尝试了很多使用 NSInputStream 来发送数据和所有：-

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"mov"];
    NSData *videoData = [NSData dataWithContentsOfFile:filePath];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, @"video.mov",
                                   @"video/quicktime", @"contentType",
                                   @"Video Test Title", @"title",
                                   @"Video Test Description", @"description",
                                   nil];

    FBRequest *request = [FBRequest requestWithGraphPath:@"me/videos" parameters:params HTTPMethod:@"POST"];

    [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        NSLog(@"result: %@, error: %@", result, error);
    }]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:07:20.870

请改用 dataWithContentsOfFile:options 。不会尝试将所有数据加载到内存中，这可能会使您的应用程序被 iOS 关闭：

```
NSData *videoData = [NSData dataWithContentsOfFile:video.localURL options:NSDataReadingMappedAlways error:&error]; 
```

# c# - 如何检查用户是否点击了 DevExpress ASPxTreeList 中的新建/编辑 TreeListCommandColumn

> ID：13698599
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:15:51.017
> 
> 标签：c#, javascript, asp.net, c#-4.0, devexpress

我想根据用户是否单击新建/编辑 TreeListCommandColumn 的条件在服务器端进行验证

我搜索了 aspxtreelist 文档，但找不到我需要的东西。

如何检查用户是否点击了 DevExpress ASPxTreeList 中的新建/编辑 TreeListCommandColumn？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:05:36.253

使用[ASPxTreeList.IsNewNodeEditing](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxTreeListASPxTreeList_IsNewNodeEditingtopic)属性。当用户单击新建时，属性应该为真。

# android - 如何在 osm 地图应用程序中添加气球叠加层

> ID：13698604
> 
> 赞同：1
> 
> 时间：2012-12-04T08:16:22.450
> 
> 标签：android

如何在我的 osm 代码中添加气球覆盖？我正在使用 osm 地图，我想显示像谷歌地图一样的气球覆盖我想在我的代码中实现它，如下所示[：](https://github.com/jgilfelt/android-mapviewballoons)

```
import org.osmdroid.DefaultResourceProxyImpl;
import org.osmdroid.ResourceProxy;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapView;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;
import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;

public class MainActivity extends Activity {

 MyItemizedOverlay myItemizedOverlay = null;
 private MapController myMapController;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    myMapController = mapView.getController();
    myMapController.setZoom(16);

    Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
    int markerWidth = marker.getIntrinsicWidth();
    int markerHeight = marker.getIntrinsicHeight();
    marker.setBounds(0, markerHeight, markerWidth, 0);

    ResourceProxy resourceProxy = new    
 DefaultResourceProxyImpl(getApplicationContext());

    myItemizedOverlay = new MyItemizedOverlay(marker, resourceProxy);
    mapView.getOverlays().add(myItemizedOverlay);

    GeoPoint myPoint1 = new GeoPoint(24.893379000000000000, 67.028060900000010000);
    myItemizedOverlay.addItem(myPoint1, "myPoint1", "myPoint1");
    GeoPoint myPoint2 = new GeoPoint(24.824796300000000000, 67.031565699999990000);
    myItemizedOverlay.addItem(myPoint2, "myPoint2", "myPoint2");

 } 

 }

import java.util.ArrayList;
import org.osmdroid.ResourceProxy;
import org.osmdroid.api.IMapView;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.overlay.ItemizedOverlay;
import org.osmdroid.views.overlay.OverlayItem;

   import android.graphics.Point;
  import android.graphics.drawable.Drawable;

 public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

 private ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();

 public MyItemizedOverlay(Drawable pDefaultMarker,
  ResourceProxy pResourceProxy) {
 super(pDefaultMarker, pResourceProxy);
  // TODO Auto-generated constructor stub
  }

  public void addItem(GeoPoint p, String title, String snippet){
   OverlayItem newItem = new OverlayItem(title, snippet, p);
   overlayItemList.add(newItem);
   populate(); 
 }

 @Override
public boolean onSnapToItem(int arg0, int arg1, Point arg2, IMapView arg3) {
 // TODO Auto-generated method stub
 return false;
}

 @Override
 protected OverlayItem createItem(int arg0) {
 // TODO Auto-generated method stub
 return overlayItemList.get(arg0);
}

 @Override
 public int size() {
 // TODO Auto-generated method stub
 return overlayItemList.size();
}

} 
```

# jquery-mobile - jquery mobile $.mobile.showpageloadingmsg() 不工作

> ID：13698616
> 
> 赞同：0
> 
> 时间：2012-12-04T08:17:48.150
> 
> 标签：jquery-mobile, loading, transition, pageload

我希望在 jQM 和主干的页面转换期间显示加载消息。但是 showPageLoadingMeassage 不起作用。以下是我的代码：collection.js

```
findById : function(artistId, page, limit, sort) {
    $.mobile.showPageLoadingMsg('a', 'Loading......', false);
    var self = this;
    if (limit == undefined) {
        limit = 10;
    }
    $.mobile.showPageLoadingMsg('a', 'Loading......', false);
    console.log("hello");
    $.ajax({
        type: "GET",
        url: siteURL + 'artists/artist_detail/artist_id'  + artistId  + '.json',
    }).done(function(msg) {
        var response = JSON.parse(msg);

        if (response.status == true) {
            var dataArray = response.data;
            console.log(dataArray);
            self.reset(dataArray);

            if (self.length > 0) {
                $.mobile.hidePageLoadingMsg();
            }
            //return  dataArray;
        } $.mobile.showPageLoadingMsg($.mobile.pageLoadErrorMessageTheme, 'Sorry! No records found', true);
            setTimeout(function() {
                $.mobile.hidePageLoadingMsg();
            }, 1500);
        }
    });
} 
```

我哪里错了？

**编辑：** 它适用于搜索页面：

```
... findByTitle : function(keyword, genre, language, page, limit, sort, collection, fan, featured) {
            //~ console.log(page);
            var self = this;
            if (limit == undefined) {
                limit = 10;
            }
            $.mobile.showPageLoadingMsg('a', 'Searching......', false);
            $.ajax({.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:47:52.417

在 stackoverflow 本身上找到了答案 - [jQuery Mobile - 让 showPageLoadingMsg 与 pagebeforeshow 或 pagebeforeceate 一起工作时出现问题](https://stackoverflow.com/questions/7420023/jquery-mobile-problems-getting-showpageloadingmsg-to-work-with-pagebeforeshow)。它说有时 jQM 不会将 ui-loading 类添加到正文中，因此我们必须手动进行。

```
$('body').addClass('ui-loading');
    $.mobile.showPageLoadingMsg('a', 'Searching......', false); 
```

并在隐藏加载消息时：

```
setTimeout(function() {
    $('body').removeClass('ui-loading');   //remove class
    $.mobile.hidePageLoadingMsg();
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T08:48:21.420

此功能也已被弃用，在当前版本中根本没有。

# android - 如何计算android gcm有效载荷长度

> ID：13698621
> 
> 赞同：6
> 
> 时间：2012-12-04T08:18:37.333
> 
> 标签：android, push-notification, google-cloud-messaging, payload

在 android GCM 文档中，据说有效载荷的限制为 4096 字节。

但是，我发现我可以发送 16834 个字节的有效载荷。

我犯错了吗？我计算长度如下：

* * *

```
Map<Object, Object> jsonRequest = new HashMap<Object, Object>();
setJsonField(jsonRequest, GCMConstants.PARAM_TIME_TO_LIVE, message.getTimeToLive());
setJsonField(jsonRequest, GCMConstants.PARAM_COLLAPSE_KEY, message.getCollapseKey()); 
setJsonField(jsonRequest, GCMConstants.PARAM_DELAY_WHILE_IDLE, message.isDelayWhileIdle());
jsonRequest.put(GCMConstants.JSON_REGISTRATION_IDS, registrationIds); 
Map<String, Object> payload = message.getData(); 
if (!payload.isEmpty()) { 
    jsonRequest.put(GCMConstants.JSON_PAYLOAD, payload);
}  
String requestBody = gson.toJson(jsonRequest); 
System.out.println(requestBody.getBytes("UTF-8").length); 
```

* * *

此外，如果有效载荷太长，GCM 的响应是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T18:32:49.167

如果负载太大，您将在错误消息中看到“MessageTooBig”。负载中不能超过 4096 的部分是负载中的所有自定义键和值。您不计算注册 ID，也不计算预定义的键，例如生存时间和折叠键。顺便说一句，我发现即使文档说有效负载不能超过 4096 个字节，只要不超过 4096 个字符，它们就可以接受更大的有效负载（即您可以发送一个 4096 个字符的字符串，其中包含编码成更多字符的字符超过一个字节，因此有效载荷的长度（以字节为单位）将超过 4096）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T07:22:07.333

但截至今天，它允许通过 GCM 发送最多 4089 个字符，当它向下滑动时，通知面板中可以看到 511 个字符。 *实际测试过*

# asp.net-mvc - 使用 Windows Phone WebClient 和 Microsoft 帐户 (OAuth) 对 ASP.NET MVC 站点进行身份验证？

> ID：13698625
> 
> 赞同：2
> 
> 时间：2012-12-04T08:19:00.247
> 
> 标签：asp.net-mvc, windows-phone-7, oauth, windows-live-id

我有一个标准的 ASP.NET MVC 4 站点，它使用内置的 OAuthWebSecurity 允许人们使用他们的 Microsoft 帐户 (LiveId) 登录。该站点和登录工作正常。该站点包含一个**需要身份验证并返回 JSON 的控制器**。这也可以。

我现在需要能够**使用 Windows Phone 应用程序中的 WebClient 访问同一个控制器**。我目前正在尝试使用以下方法来实现这一点：

**1.使用 Live SDK**获取认证令牌：****

 **```
var login = await authClient.LoginAsync(reqs);

var authToken = login.Session.AuthenticationToken; 
```

**2.使用身份验证令牌通过WebClient 使用ASP.NET MVC 站点**执行登录。****

 **```
? 
```

这就是我卡住的地方。我无法弄清楚如何使用现有的身份验证令牌进行登录。有任何想法吗？

我认为这应该是可行的，因为 Azure 移动服务使用了类似的方法。Azure 移动服务提供了一个使用现有令牌进行身份验证的选项，例如：

```
 var authClient = new LiveAuthClient("myclientid");
        ...

        var login = await authClient.LoginAsync(reqs);
        ...
        var user = await mobileServiceClient.LoginAsync(login.Session.AuthenticationToken); 
```

还是我从错误的角度来处理这个问题？****

# php - 将图像从 python 服务器复制到 php 服务器

> ID：13698626
> 
> 赞同：0
> 
> 时间：2012-12-04T08:19:00.427
> 
> 标签：php, python

在我的 python/django 服务器上，我的数据库记录中有一个表，其中包含指向现有图像的链接，例如“image/5qsd48zera5.jpg”、“image/qsd454f5sdf.jpg”。

如何将这些图像复制到运行 php 的其他服务器？我可以/应该通过 SSH2、ftp、...复制吗？

# actionscript-3 - 为什么我不能跟踪文档类中的点击事件？

> ID：13698629
> 
> 赞同：2
> 
> 时间：2012-12-04T08:19:22.880
> 
> 标签：actionscript-3, flash

考虑下面的代码：为什么我不能跟踪点击事件？

```
 package {
                import flash.display.Sprite;
            import flash.events.MouseEvent;
            import flash.display.*;
            [SWF(width="1000",height="600")]
                public class vanCopperTes extends Sprite
                {
                    public function vanCopperTes()
                    {
                        stage.align = StageAlign.TOP_LEFT;
                        stage.scaleMode = StageScaleMode.NO_SCALE;

                        //黄色矩形
                        graphics.beginFill(0xFFCC00,.5);
                        graphics.drawRect(0,0,200,200);
                        graphics.endFill();
                        addEventListener(MouseEvent.CLICK,onClick);
                        trace("this.numChilder",numChildren);// output: 0

                    }

                    private function onClick(e:MouseEvent):void
                    {
                        trace("Click");
                    }

                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:16:07.590

尝试将事件监听器更改为：

```
stage.addEventListener(MouseEvent.CLICK,onClick); 
```

这将适用于整个 .swf。如果你想让它只是黄色方块，你需要将它添加为一个单独的精灵并将监听器附加到它。

# symfony - Symfony 和 Twig：如何显示确认对话框

> ID：13698631
> 
> 赞同：6
> 
> 时间：2012-12-04T08:19:28.577
> 
> 标签：symfony, dialog, twig

我的树枝模板中有一个删除链接，我想知道是否有 Symfony2 显示确认对话框的方式。

我知道 JQuery 可以做到这一点，但也许 symfony 有他自己的“做事方式”。

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T08:25:26.910

只需`confirm`在删除链接上使用 javascript 功能

```
<a href="{{ path('delete_route', {csrf:...}) }}" onclick="return confirm('are u sure?')">delete</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-13T10:16:12.760

我知道这个话题有点老了，但我在删除对象之前使用了另一种方式来显示确认消息。

我认为与寻找 javascript 之外的其他解决方案的人分享是很有趣的。

它有点复杂，或者至少比上述解决方案更长。

首先，我将这些操作添加到我的控制器中

```
public function confirmAction(Capteur $myobject) {
    // check my object exist
    if (!$myobject) {
        // throw error
    } else {
        // you can pass information about your object to the confirmation message
        $myobjectInfo = array(
            'yes' => 'path_if_confirm', // path to the deleteAction, required
            'no' => 'path_if_dont_confirm', // path if cancel delete, required
            // put any information here. I used type, name and id
            // but you can add what you want
            'type' => 'mytype', 
            'id' => $myobject->getId(), // required for deleteAction path
            'name' => $myobject->getName()
        );
        // add informations to session variable
        $this->get('session')->set('confirmation',$myobjectInfo);
        return $this->redirect($this->generateUrl('confirmation_template_path'));
    }
}
public function deleteAction(MyType $myobject) {
    if (!$myobject) {
        // throw exception
    } else {
        $request =  $this->get('request');
        if ($request->getMethod() == 'POST') {
            $em = $this->getDoctrine()->getManager();
            $em->remove($myobject);
            $em->flush();
            $this->get('session')->getFlashBag()->add('success', 'Nice shot.');
        } else {
              // you can do something here if someone type the direct delete url.
        }
    } 
    return $this->redirect($this->generateUrl('where_you_want_to_go'));     
} 
```

因此，在带有对象列表的模板中，我将删除按钮指向confirmAction。

然后在confirmation_template（或者在我的情况下在上父模板layout.hml.twig中）我添加这个

```
 {% if app.session.get('confirmation') is defined and app.session.get('confirmation') is not null %}
    <div>
        <p>
        put your message here. You can use information passed to the session variable {{ app.session.get('confirmation').type }} {{ app.session.get('confirmation').name }} {{ app.session.get('confirmation').id }} etc..
        </p>
        <form method="post" action="{{ path(app.session.get('confirmation').yes,{'id':app.session.get('confirmation').id }) }}">
            <button type="submit" class="btn red">confirm and delete</button>
        <a href="{{ path(app.session.get('confirmation').no) }}" class="btn blue">Cancel</a>
        </form>
    </div>
    # put confirmation variable to null, to disable the message after this page #
    {{ app.session.set('confirmation',null) }}
{% endif  %} 
```

我将这些树枝代码放在我的上层模板中，以便将消息重用于我想要的任何对象。如果我想删除另一种类型的对象，我只需使用传递给会话变量的信息来自定义消息和路径。如果您转到直接 url，您的对象将不会被删除。

我不知道这是否是最好的方法。您的建议将不胜感激。

谢谢。

# excel - 如何枚举excel中的重复行？

> ID：13698632
> 
> 赞同：3
> 
> 时间：2012-12-04T08:19:34.113
> 
> 标签：excel, count, duplicates, enumerate

我的数据如下所示：

```
Monkey
Donkey
Elephant
Panda
Donkey
Donkey
Monkey 
```

我想用一个数字来区分行，对每个重复项进行计数：

```
Monkey      1
Donkey      1
Elephant    1
Panda       1
Donkey      2
Donkey      3
Monkey      2 
```

我已经设法获得了行的重复数量，但我不知道如何像这样枚举它们。

甚至可以使用excel，还是我必须编写脚本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T09:17:37.353

假设列表在 A 列中，从第 1 行开始。在单元格 B1 中，您可以输入：

```
=COUNTIF(A1,A1) 
```

这当然会给出 1。（或者你可以输入一个硬编码的值 1，这取决于你。）

在单元格 B2 中，输入公式

```
=COUNTIF($A$1:A2,A2) 
```

并将其复制到列表的其余部分。请注意，列表开头的单元格 ($A$1) 是绝对的，而列表的结尾（在本例中为 A2，尽管在您将公式向下复制行时会发生变化）是相对的。您实际上所做的是从列表的开头开始计算匹配项目的数量，直到并包括该行。所以单元格 B5 将返回 2，因为在 $A$1 和 A5 之间有 2 头驴。单元格 B6 将返回 3，因为在 $A$1 和 A6 之间有 3 头驴，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T08:40:13.767

使用这个公式，

```
=IFERROR(LOOKUP(2,1/(A$1:A1=A2),B$1:B1)+1,1) 
```

# iphone - 加载时的设备方向

> ID：13698633
> 
> 赞同：1
> 
> 时间：2012-12-04T08:19:49.970
> 
> 标签：iphone, ios, orientation, landscape

我正在工作，我观察到针对 iPhone 设备的用户没有可用的横向应用程序图标/启动图像，所以我想知道**是否有办法为 iOS iPhone 设置“内置”加载屏幕的方向**？目前，即使我切换到横向，它也只是以纵向显示，它不会改变方向。

我看到了类似的东西：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight]; 
```

但这是*强行*将方向设置为...

我需要的是动态加载适当的方向（由我或应用程序）。

请注意，该应用程序尚未加载任何自定义控制器（我想）。

有手吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:25:35.727

没有这样的方法，但您可以`UIDevice`在应用程序委托中添加一个类别，在`implementation`块之前：-

```
@interface UIDevice (MyAwesomeMethodsThatAppleWillNeverAllowMeToUse)
-(void)setOrientation:(UIInterfaceOrientation)orientation animated:(BOOL)animated;
-(void)setOrientation:(UIInterfaceOrientation)orientation;
@end 
```

# java - 如何在不同的类中使用方法？

> ID：13698641
> 
> 赞同：0
> 
> 时间：2012-12-04T08:20:31.100
> 
> 标签：java, class, methods, extend

我正在做一个项目，我需要一些帮助。我有一个`AnimalWorld`可以扩展的类`World`和一个可以扩展的类。在我的大象方法中，我想使用一个方法（），它只在（和）中找到。我试过添加这条线`Elephant``Turtle``act()``public List getTurtleList()``World``AnimalWorld`

```
public abstract List<Turtle> getTurtleList(); 
```

到 AnimalWorld，并将 Elephant 设置为抽象类，但我仍然收到错误“找不到符号 - 有`getTurtleList()` 什么想法吗？如果您需要更多信息，请告诉我。此外，Elephant 不会扩展 AnimalWorld，因为创建的大象将被放置在 AnimalWorld 中。

```
public abstract class Elephant extends Turtle implements Animal{

    public Elephant(ModelDisplay world){

        super(world);
        this.penUp();
        this.setColor(Color.gray);
        this.setWidth(50);
        this.setHeight(50);
    }

    public void act(ModelDisplay myWorld){
        double smallestDist = 640.0;

        Mouse closestMouse = null;
        List<Turtle> animalList = myWorld.getTurtleList();

        for(Turtle curCritter: animalList){
            if(curCritter instanceof Mouse){
                int x=curCritter.getXPos();
                int y=curCritter.getYPos();
                double dist = this.getDistance(x,y);

                if(dist < 100 && dist<smallestDist){
                    closestMouse=curCritter;
                    smallestDist=dist;
                }
            }
        }

        if(closestMouse!=null){
            this.turn(closestMouse);
            this.forward(3*(int)smallestDist);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:46:56.110

声明`World`类为：

```
public abstract class World{
    ...

    public abstract List<Turtle> getTurtleList();
} 
```

将强制您实现`getTurtleList()`在每个继承自`World`. 如果不是，您将被迫将子类也声明为抽象类。这就是你被迫声明`Elephant`为抽象类的原因，因为它没有实现超类的所有抽象方法。

也许您需要实现`getTurtleList()`in`AnimalWorld`或 in `Elephant`。

# yii - yii 框架中的 cjuidatepicker 小部件

> ID：13698645
> 
> 赞同：1
> 
> 时间：2012-12-04T08:20:51.950
> 
> 标签：yii

我是 Yii 框架的新手。我发布了很多次但没有回复。我在带有小部件的注册表单中有日期字段`cjuidatepicker`。这个小部件在静态页面中运行良好，但是当我在弹出表单中使用它时，这个小部件不会出现。

任何意见，将不胜感激。

打开一个弹出对话框的链接，它的代码在这里。

```
<?php
    echo CHtml::link('Add Client ', "",  
        array(
            'style'=>'cursor: pointer; font-size:20px; text-decoration: underline;',
            'onclick'=>"{addclient(); $('#dialogclient').dialog('open');}"
        )
    );
?> 
```

`cjuidatepicker`小部件代码：

```
<?php
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
    'model'=>$model,
    'value'=>'p_end_date',
    'attribute'=>'p_end_date',
    // additional JavaScript options for the date picker plugin
    'options'=>array(
        'showAnim'=>'fold',
        'dateFormat'=>'yy-mm-dd',
    ),
    'htmlOptions'=>array(
        'style'=>'height:20px;',                
    ),
)); 
```

更新编辑：使用 url 渲染/打开 _from.php 的代码

```
<script type="text/javascript">
   // here is the magic
function addclient()
{
<?php echo CHtml::ajax(array(
      **'url'=>array('client/create'),**
        'data'=> "js:$(this).serialize()",
        'type'=>'post',
        'dataType'=>'json',
        'success'=>"function(data)
        {
            if (data.status == 'failure')
            {
                $('#dialogclient div.divForForm').html(data.div);
                      // Here is the trick: on submit-> once again this function!
                $('#dialogclient div.divForForm form').submit(addclient);
            }
            else
            {
                $('#dialogclient div.divForForm').html(data.div);
                setTimeout(\"$('#dialogclient').dialog('close') \",3000);
            }

        } ",
        ))
    ?>;
    return false; 

      }

    </script> 
```

Actioncreate() 控制器代码

```
 public function actionCreate()
           {
           $model=new client;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

    if(isset($_POST['client']))
    {
        $model->attributes=$_POST['client'];

        if($model->save())
        {
            if (Yii::app()->request->isAjaxRequest)
            {
                echo CJSON::encode(array(
                    'status'=>'success', 
                    'div'=>"Client successfully added"
                    ));
                exit;               
            }
            else
                $this->redirect(array('view','id'=>$model->id));
        }
    }

    if (Yii::app()->request->isAjaxRequest)
    {
        echo CJSON::encode(array(
            'status'=>'failure', 
            'div'=>$this->renderPartial('_form', array('model'=>$model), true)));

        exit;               
    }
    else
        $this->render('create',array('model'=>$model,));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:38:17.577

当您使用`renderPartial`以下标志在弹出窗口上渲染页面时，将第 4 个参数设置`processOutput`为`true`

```
$this->renderPartial('view',array('model'=>$model),false,true); 
```

**[renderPartial() 方法](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)**

*[http://www.yiiframework.com/doc/api/1.1/CController#processOutput-detail](http://www.yiiframework.com/doc/api/1.1/CController#processOutput-detail)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T08:32:37.273

我猜是 cjuidatepicker 小部件的导入代码不在新的弹出窗口中。弹窗打开后，去源码看看是不是所有的js导入都有了？

# javascript - 如何编写函数 A 来调用函数 B，而函数 B 在没有完成函数 A 的情况下调用函数 A，无限循环？

> ID：13698651
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:21:08.627
> 
> 标签：javascript

```
<script type="text/javascript">
    function B()
    {
        alert('2');
        A();
    }

    function A()
    {
        alert('1');
        B();
    }
</script>

<html>
<body onload="A();">
</body>
</html> 
```

是否可以在没有 jQuery 的情况下使用 javascript 来做到这一点？在我的脚本中，A 可以调用 B，但 B 不能调用 A？我不知道为什么 B 不能在我的脚本中调用 A。我不确定那是因为 A 还没有完成，所以 B 现在不能打电话给 A。A>B>A>B>A>B 形成一个无限循环。我可以以某种方式完成上述结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:23:46.603

使用[setTimeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)或[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)函数。他们异步工作。

```
function B()
{
    alert('2');
    setTimeout(A, 1);
    alert('3');
}

function A()
{
    alert('1');
    setTimeout(B, 1);
} 
```

在函数 B 中，javascript 将等待 1 毫秒并调用函数 A，但它还将继续在 B 中执行您的代码，因此将警告“3”并且 B 将在调用 A 之前结束

# c# - 如何找出 gac 中的程序集

> ID：13698652
> 
> 赞同：0
> 
> 时间：2012-12-04T08:21:11.717
> 
> 标签：c#, asp.net, windows, webserver, gac

我在 Tortoise SVN 中有一个解决方案，有大约 100 个解决方案的副本，现在我不确定 gac 中部署了哪个副本 dll，我可以在 Gac 中看到修改日期或其他内容，但它与 SVN 中的任何副本都不匹配（我导出了所有最新的 dll）。无论如何我可以比较两个dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:45:56.970

您可以将 GAC 文件夹挂载到资源管理器中的驱动器号，并通过运行以下命令直接访问真实的 DLL 文件：

```
subst z: c:\windows\assembly 
```

然后在资源管理器中浏览到“Z”驱动器，并通过命名空间查看哪个物理 DLL 已在 Windows 中注册。

此时，您可以复制 DLL 并通过确切的文件大小与来自 SVN 的候选文件进行比较，或者计算某种哈希值（例如 MD5）以确定哪个版本与已注册的版本匹配。

PS 完成后不要忘记卸载驱动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:12:18.290

您还可以使用 Fusion Log Viewer 来准确了解您的程序正在访问哪个程序集（和版本）以及从何处获取它。

# google-maps - 通过 API 自定义 Google 地图图层？

> ID：13698653
> 
> 赞同：9
> 
> 时间：2012-12-04T08:21:14.570
> 
> 标签：google-maps, google-maps-api-3

这是关于 Google Maps API v3：

当您在自定义 Google 地图中绘制各种、`Polylines`或任何其他叠加元素时，它会将它们绘制在. 是否可以以某种方式创建多个自定义图层，您可以在其上绘制叠加对象，然后轻松启用/禁用（显示/隐藏）这些图层？`Polygons``MapLabels``mapPane`

我在这里看到有关图层的文档：[https ://developers.google.com/maps/documentation/javascript/layers](https://developers.google.com/maps/documentation/javascript/layers)

但没有关于自定义图层。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T14:11:37.963

您可以创建一个自定义[OverlayView](https://developers.google.com/maps/documentation/javascript/reference#OverlayView)来做到这一点：

```
var LayerOverlay = function () {
  this.overlays = [];
}
LayerOverlay.prototype = new google.maps.OverlayView();
LayerOverlay.prototype.addOverlay = function (overlay) {
  this.overlays.push(overlay);
};
LayerOverlay.prototype.updateOverlays = function () {
  for (var i = 0; i < this.overlays.length; i++) {
    this.overlays[i].setMap(this.getMap());
  }
};
LayerOverlay.prototype.draw = function () {};
LayerOverlay.prototype.onAdd = LayerOverlay.prototype.updateOverlays;
LayerOverlay.prototype.onRemove = LayerOverlay.prototype.updateOverlays; 
```

然后，一旦将叠加层添加到`LayerOverlay`，您就可以仅使用一个来显示或隐藏它们`setMap`：

```
var layer1 = new LayerOverlay();
layer1.addOverlay(createMarker());
layer1.addOverlay(createMarker());
layer1.addOverlay(createMarker());

// hide all markers
layer1.setMap(null);

// show all markers
layer1.setMap(map); 
```

# ssl - 是否可以在 WAS7 和 ActiveDirectory 之间的 LDAP 上配置两种方式 ssl

> ID：13698656
> 
> 赞同：0
> 
> 时间：2012-12-04T08:21:40.530
> 
> 标签：ssl, active-directory, ldap, websphere-7

是否可以通过 IBM WebSphere Application Server 和 MS ActiveDirectory 之间的两侧 SSL 配置 LDAP？我找不到任何确认，有可能执行或不执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:44:45.280

我不确定 ActiveDirectory 部分，但对于 WebSphere 部分：

当您添加要检查的存储库时`Require SSL communications`，您选择`Use specific ssl configuration`

当您单击时，`SSL configurations`您可以创建一个新配置并在那里提供服务器和客户端证书。

一旦你这样做了，它应该进行双面 SSL 验证。

# mysql - 在本地开发 Mac Mini 上安装 MySQL

> ID：13698657
> 
> 赞同：0
> 
> 时间：2012-12-04T08:21:44.227
> 
> 标签：mysql, homebrew

我看到我可以使用[Homebrew](https://brew.sh/)或 MySQL 中的“标准”安装程序在我的机器上安装[MySQL](https://dev.mysql.com/downloads/mysql/)。

这两种方法之间有什么区别会建议我使用一种而不是另一种吗？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:59:49.547

Homebrew 和 MacPorts 都是包管理器。他们会做 apt-get 在 Linux 上为你做的所有事情。它们允许轻松更新等。自制更好恕我直言，是的，我都使用过。通常 Homebrew 使用标准的 /usr/local，而 Macports 创建一个特殊的 /opt/local。[https://apple.stackexchange.com/questions/32724/what-are-pros-and-cons-for-macports-fink-and-homebrew](https://apple.stackexchange.com/questions/32724/what-are-pros-and-cons-for-macports-fink-and-homebrew)和[http://earino.wordpress.com/2012](http://earino.wordpress.com/2012/07/02/macports-x-homebrew-a-quick-story-14/)有更多详细信息[/07/02/macports-x-homebrew-a-quick-story-14/](http://earino.wordpress.com/2012/07/02/macports-x-homebrew-a-quick-story-14/)。使用自制软件，您每天都只需运行`brew update`，然后`brew upgrade`升级所有内容或`brew outdated`找出需要升级的内容。如果 Mysql 有更新，那么`brew upgrade mysql`.

第一次安装 mysql 你很简单： `brew install mysql`虽然首先你可能想看`brew options mysql`一个安装选项列表。然后 Homebrew 将安装任何依赖项，然后它会为您`make`等`make install`Mysql 并创建所有必需的符号链接。Homebrew 在设计上尽可能避免使用 sudo。您可能需要做的唯一一件事就是在您的路径中添加一些 /usr/local 位置。

Homebrew 的一个优势，虽然对于 DBMS 来说可能是个坏主意，但它可以安装同一个程序的多个版本。因此，例如，如果您使用 php 进行开发，则可以安装多个版本的 php，并通过更改 apache 设置在它们之间切换，Homebrew 将维护它们，但它们不在隔离环境中（因为它们与 macports 和, 另一种选择, fink)。在没有包管理器的情况下维护多个版本将是很多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:18:30.000

Homebrew 似乎是为 OSX 编写的，因此大概考虑了 OSX 的特性。OSX 基于 BSD，因此所有用户安装的软件都应该在 /usr/local 作为基本路径。

当然，您也可以使用 MySQL 安装程序实现此目的，但您可能必须手动更正路径。

另一种选择是流行的 macports 存储库。 [http://www.macports.org/install.php](http://www.macports.org/install.php)

同样，macports 更有可能安装苹果想要的软件

# android - android在缩放动画后设置新大小

> ID：13698660
> 
> 赞同：3
> 
> 时间：2012-12-04T08:22:11.510
> 
> 标签：android, animation, android-framelayout, scaletransform

我正在使用翻译和缩放动画。首先，我将框架布局转换为屏幕中心，然后使用布局参数将其位置参数设置为屏幕中心。这很好用！在翻译动画结束时，我运行缩放动画，我的布局缩放为原始大小的 2 倍。实际上我的框架布局（我正在制作动画）由按钮和图像视图组成。与在 android 中一样，动画不会改变视图，它只会改变必须绘制的位置。现在我的问题是我无法让我的按钮工作。因为它们实际上并不存在！

我通过在动画结束后设置其位置参数找到了平移动画的解决方案。这会将视图永久移动到新位置。

但是，在缩放动画的情况下，我必须更改布局的大小以及其中的子级。但它不起作用，因为我将原始高度宽度与比例因子相乘。这是我的缩放动画代码。

```
ScaleAnimation scaleAnim = new ScaleAnimation(1.0f, 2.0f, 1.0f,
                    2.0f, Animation.RELATIVE_TO_SELF, 0.5f,
                    Animation.RELATIVE_TO_SELF, 0.5f);

            scaleAnim.setDuration(600);
            // scaleAnim.setFillEnabled(true);
            scaleAnim.setFillAfter(true);

            view.setAnimation(scaleAnim);
            view.startAnimation(scaleAnim);

            scaleAnim.setAnimationListener(new AnimationListener() {

                public void onAnimationStart(Animation animation) {

                }

                public void onAnimationRepeat(Animation animation) {

                }

                public void onAnimationEnd(Animation animation) {
                    FrameLayout.LayoutParams par = (FrameLayout.LayoutParams) view
                            .getLayoutParams();

                    par.height = view.getMeasuredHeight() * 2;
                    par.width = view.getMeasuredWidth() * 2;

                     view.setLayoutParams(par);
                    view.requestLayout();

                }
            }); 
```

ps setFillAfter(true) 和 setFillEnabled(true) 不是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T21:24:47.173

我会在上面发表评论，但我没有足够的代表。文档中的此页面解释了视图动画系统和属性动画系统之间的区别。从这里您可以制作 ObjectAnimator 和 AnimatorSet 对象，它们将移动按钮并编辑实际视图，而不仅仅是视图的绘制。

[http://developer.android.com/guide/topics/graphics/prop-animation.html#views](http://developer.android.com/guide/topics/graphics/prop-animation.html#views)

> 属性动画系统允许 View 对象的流线型动画，并提供了一些优于 View 动画系统的优点。视图动画系统通过改变视图对象的绘制方式来转换它们。这是在每个 View 的容器中处理的，因为 View 本身没有要操作的属性。这导致 View 被动画化，但没有导致 View 对象本身发生变化。这导致了诸如对象仍然存在于其原始位置之类的行为，即使它是在屏幕上的不同位置绘制的。在 Android 3.0 中，添加了新的属性以及相应的 getter 和 setter 方法来消除这个缺点。
> 
> 属性动画系统可以通过更改 View 对象中的实际属性来为屏幕上的 View 设置动画。此外，Views 还会在其属性发生更改时自动调用 invalidate() 方法来刷新屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T05:58:59.670

对我有用的解决方案，

1.  不需要设置 setFillAfter，因为我们自己设置视图的比例和平移，即使你设置它也不应该出现问题。

    > scaleAnim.setFillAfter(true);

2.  使用 scaleX 和 scaleY 调用设置动画结束后的视图比例

    ```
     public void onAnimationEnd(Animation animation) {
                    par.setScaleX(2f)
                    par.setScaleY(2f)
                    view.requestLayout();
                } 
    ```

    它将相应地定位缩放视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T09:02:42.247

```
PropertyValuesHolder pvhX = PropertyValuesHolder.ofFloat(View.SCALE_X, 1, 1.2f);
PropertyValuesHolder pvhY = PropertyValuesHolder.ofFloat(View.SCALE_Y, 1, 1.2f);
ObjectAnimator scaleAnimation = ObjectAnimator.ofPropertyValuesHolder(your_view, pvhX, pvhY);

AnimatorSet setAnimation = new AnimatorSet();
setAnimation.play(scaleAnimation);
setAnimation.start(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-05T05:38:39.893

使用 ObjectAnimator 和 AnimatorSet 解决了这个问题。

# android - 如何在android中将覆盖项移动到mapview上方？

> ID：13698661
> 
> 赞同：0
> 
> 时间：2012-12-04T08:22:14.030
> 
> 标签：android, android-mapview, itemizedoverlay, currentlocation

我必须连续获取当前位置并将覆盖项移动到android中的mapview上？我已经使用以下代码来获取当前位置，我必须使用不同的类来获取当前位置并实现其方法，但我无法在活动之上连续获取当前位置。

```
**CurentLocation.java**
import java.util.Timer;
import java.util.TimerTask;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class CurrentLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;

    public boolean getLocation(Context context, LocationResult result)
    {
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled)
            return false;

        if(gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 20000);
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
             lm.removeUpdates(locationListenerGps);
             lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null, gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime()>net_loc.getTime())
                     locationResult.gotLocation(gps_loc);
                 else
                     locationResult.gotLocation(net_loc);
                 return;
             }

             if(gps_loc!=null){
                 locationResult.gotLocation(gps_loc);
                 return;
             }
             if(net_loc!=null){
                 locationResult.gotLocation(net_loc);
                 return;
             }
             locationResult.gotLocation(null);
        }
    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }
} 
```

主要活动.java

```
public class ManinActivity extends MapActivity {

    double currentLatitude=666.563961600000000000;
    double currentLongitude=66666.334281799999980000;
    MapView mapView; 
    MapController mc;
    GeoPoint p;

        public void onCreate(Bundle savedInstanceState)
        {

            //===========Call Current location==
            CurrentLocation myLocation = new CurrentLocation();
            myLocation.getLocation(this, locationResult);
                }

    LocationResult locationResult = new LocationResult(){
                @Override
                public void gotLocation(Location location){
                    if(location!=null)
                    {
                    currentLatitude=location.getLatitude();
                    currentLongitude=location.getLongitude() ;

                    }
                }
            };

} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:28:08.717

删除这些行 `LocationListener`

```
 lm.removeUpdates(this);
  lm.removeUpdates(locationListenerGps); 
```

**更新**

此外，如果您不想停止计时器，那么也请在您的 `LocationListener`

```
 timer1.cancel(); 
```

**更多更新**

您还需要在`GetLastLocation` 课堂上删除这些行

```
 lm.removeUpdates(locationListenerGps);
 lm.removeUpdates(locationListenerNetwork); 
```

# android - clickOnButton 在 Nexus 一中不起作用

> ID：13698671
> 
> 赞同：0
> 
> 时间：2012-12-04T08:22:37.003
> 
> 标签：android, robotium

我正在为我的测试项目使用robotium3.3。我正在**Nexus one**设备上对其进行测试。它工作正常，直到我更新了**设备操作系统**。最后一天我收到了系统更新警报并更新了我的设备。之后我无法**在**该设备中运行robotium。当它执行按钮单击事件时，它会抛出**空指针异常**。在另一台设备上，我可以运行测试项目。我应该怎么做才能使其在 Nexus one 设备中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:16:16.490

不同的操作系统版本有时需要与 robotsium 不同的代码，因为在内部，robotium 使用反射来获取某些信息。我假设您获得了 4.2 的更新，它至少需要 robotsium 3.6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:27:39.377

Robotium 从 3.6 版开始支持 android 4.2

> “Robotium 3.6 比以往更好。现在全面支持 Android 4.2！”

# c# - 如何找到 C# 桌面应用程序的性能瓶颈？

> ID：13698674
> 
> 赞同：1
> 
> 时间：2012-12-04T08:22:44.883
> 
> 标签：c#, profiling

我们开发了一个加载在服务器中的 Windows 桌面应用程序。该应用程序通常通过访问服务器从客户端启动。服务器将位于不同的城市，客户端将从不同的城市访问它。在过去的几周里，该应用程序开始运行缓慢。例如，单击菜单启动 exe 后，启动 exe 大约需要 30 秒（exe 驻留在服务器中）。

该应用程序没有任何主要的数据库活动，并且大多数活动是发生在客户端机器中的页面处理。我还检查了 Windows 任务管理器，在运行此应用程序时，任何应用程序或 CPU 利用率都没有主要内存使用情况。

如果您建议我采取一些步骤来确定此问题的根本原因以及可以在这种情况下使用的一些分析工具，那将会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:27:25.987

您需要一个性能分析器，它可以准确地确定程序中每个函数（或行）所花费的时间。

有几种免费和商业产品。我使用过[Red Gate Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)，它对这类事情非常方便。

关于最佳性能分析器的专用主题： [最佳 .NET 内存和性能分析器？](https://stackoverflow.com/questions/49912/best-net-memory-and-performance-profiler)

# php - 理解一段 PHP 代码中的赋值语句

> ID：13698675
> 
> 赞同：2
> 
> 时间：2012-12-04T08:22:50.007
> 
> 标签：php, woocommerce

我对解释从 woocommerce 获得的一段代码有疑问。该代码运行良好，但我在理解其中的某些部分时遇到了问题。

**下面是代码：**

```
* Adding the Custom field to the checkout
 **/
add_action('woocommerce_after_order_notes', 'my_custom_checkout_field');

function my_custom_checkout_field( $checkout ) {

global $woocommerce;
$found = false;
//check if product already in cart

    if ( sizeof( $woocommerce->cart->get_cart() ) > 0 ) {

            foreach ( $woocommerce->cart->get_cart() as $cart_item_key => $values ) {               

                $_product = $values['data'];

                if ( $_product->id == 209) {

                    echo '<div id="my_custom_checkout_field"><h3>'.__('My Field').'</h3>';
                    woocommerce_form_field( 'my_field_name', array(
                        'type'          => 'checkbox',
                        'class'         => array('my-field-class form-row-wide'),
                        'label'         => __('Fill in this field'),
                        'placeholder'   => __('Enter a number'),
                        ), $checkout->get_value( 'my_field_name' ));

                    echo '</div>';

                  echo '<div id="my_custom_checkout_field2"><h3>'.__('Keywords').'</h3>';

                    woocommerce_form_field( 'enter_keywords', array(
                    'type'          => 'text',
                    'required'  => true,
                    'class'         => array('my-field-class form-row-wide'),
                    'label'         => __('Enter Keywords'),
                    'placeholder'       => __('Enter something'),
                    ), $checkout->get_value( 'keywords' ));

                    echo '</div>';
                }

            }

        }

}

/**
 * Update the order meta with field value
 **/
add_action('woocommerce_checkout_update_order_meta', 'my_custom_checkout_field_update_order_meta');

function my_custom_checkout_field_update_order_meta( $order_id ) {
    if ($_POST['my_field_name']) update_post_meta( $order_id, 'My Field', esc_attr($_POST['my_field_name']));

        if ($_POST['keywords']) update_post_meta( $order_id, 'Keywords', esc_attr($_POST['keywords']));
}

/**
 * Add the field to order emails
 **/
add_filter('woocommerce_email_order_meta_keys', 'my_custom_checkout_field_order_meta_keys');

function my_custom_checkout_field_order_meta_keys( $keys ) {
    $keys[] = 'My Field';
    $keys[] = 'Keywords';
    return $keys;
}

/**
 * Process the checkout
 **/
add_action('woocommerce_checkout_process', 'my_custom_checkout_field_process');

function my_custom_checkout_field_process() {
    global $woocommerce;

    // Check if set, if its not set add an error.
    if (!$_POST['enter_keywords'])
         $woocommerce->add_error( __('Please enter keywords...') );
} 
```

上面的代码与发送电子邮件有关。

**我的疑问是：**

```
Why should I give values for $keys[] as:

$keys[] = 'My Field';
$keys[] = 'Keywords'; 
```

为什么我不能给 my_field_name ，关键字作为值`$keys[]`？

最重要的是这 3 个函数相互理解，如果我为 $keys[] 给出“我的字段”和“关键字”，那么只有我收到一封电子邮件，否则没有，那么为什么不能为 $keys[] 给出其他值?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:35:16.467

`$key`只是一个变量。在上面的代码中，它只是将值存储`$key`为数组形式以作为结果返回。当您尝试打印该`$key`变量时，它应该如下所示：

```
Array(
    [0] => My Field
    [1] => Keywords
) 
```

**或者**

为什么你不能改变它的值，`$key[]='My Field'`因为`$key='Keywords'`它们是`functions`在你的文件中定义某些地方的方法（手段）。如果你改变它们，那么这些函数将不会被执行，这就是你不能发送的原因电子邮件。尝试在您的文件中找到这些功能，然后您就会清楚自己的疑问。

# javascript - 字符串中的空字符

> ID：13698677
> 
> 赞同：20
> 
> 时间：2012-12-04T08:22:55.480
> 
> 标签：javascript, string, google-chrome, unicode, null-terminated

考虑这个字符串：

```
var s = "A\0Z"; 
```

它的长度为 3，由 给出`s.length`。使用`console.log`您可以看到字符串没有被剪切，即`s[1]`is`""`和`s.charCodeAt(1)`is `0`。

当您在 Firefox 中提醒它时，您会看到`AZ`. 当您在 Chrome/Linux 中使用 警告它时`alert(s)`，`\0`终止字符串并且您会看到`A`.

我的问题是：浏览器和 Javascript 引擎**应该做什么？**Chrome 在这里有问题吗？是否有文件定义应该发生的事情？

*由于这是关于标准的问题，因此需要参考。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T08:26:15.100

浏览器*应该*做的是分别跟踪字符串及其长度，因为标准中不存在空终止符。（字符串只是一个有长度的对象）。

Chrome*似乎*在做的（我相信你的话）是使用标准的 C 字符串函数，它在 \0 处终止。回答您的一个问题：是的，这对我来说构成了 Chrome 处理该`alert()`功能的错误。

正式的规范说：

> 字符串文字是用单引号或双引号括起来的零个或多个字符。每个字符都可以用一个转义序列来表示。除了右引号字符、反斜杠、回车、行分隔符、段落分隔符和换行符之外，所有字符都可以按字面意思出现在字符串文字中。任何字符都可能以转义序列的形式出现。

还：

> 字符串文字代表 String 类型的值。文字的字符串值 (SV) 是根据字符串文字的各个部分贡献的字符值 (CV) 来描述的。

关于 NUL 字节：

> EscapeSequence :: 0 [lookahead ∉ DecimalDigit] 的 CV [Character Value] 是 <NUL> 字符（Unicode 值 0000）。

因此，一个 NUL 字节应该只是“另一个字符值”并且没有特殊含义，这与它可能以 SV（字符串值）结尾的其他语言相反。

有关（有效）“字符串单字符转义序列”的参考，请查看[ECMAScript 语言规范第 7.8.4 节](http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.4)。段落末尾有一个表格，列出了上述转义序列。

打算编写 Javascript 引擎的人可能会从中学到：不要使用 C/C++ 字符串函数。:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T08:32:44.440

Javascript 像对待任何其他字符一样处理空字符，您的问题是如何在 cosole 或警报中显示它，它在不同的浏览器中有所不同，对此没有标准，所以 chrome 是可以的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T08:55:09.050

您正在询问`alert()`方法的非统一（跨浏览器）行为，因此它与 Script 对象和 ECMAscript 规范无关，它与如何`alert()`显示 String 对象有关。

`alert()`是`Window`对象的一个​​方法，ECMAscript 没有定义它（它只是告诉宿主环境可以提供全局对象作为窗口对象）。

但它恰好是一个[**定义`alert()`**](http://dev.w3.org/html5/spec/user-prompts.html#dom-alert)行为的 w3c 规范，不幸的是它非常简陋，并且没有提供任何关于如何显示嵌入空字符的消息的提示。

因此，与规范中未指定的任何其他细节一样，此行为被浏览器自己的实现所遗漏。

# regex - Powershell 正则表达式

> ID：13698680
> 
> 赞同：1
> 
> 时间：2012-12-04T08:23:04.913
> 
> 标签：regex, powershell

我想使用正则表达式替换或插入部分 UNC 路径。

示例输入：

```
\\\\PCSHARE\Homedrive\John Doe 
```

示例输出：

```
\\\\PCSHARE.mydomain.org\Homedrive\John Doe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:28:25.950

试试这样：

```
 "\\PCSHARE\Homedrive\John Doe" -replace '(?<=\\\\)(PCSHARE)', '$1.mydomain.org' 
```

评论后编辑：

尝试：

```
"\\PCSHARE\Homedrive\John Doe" -replace '(?<=\\\\)(.[^\\]*)', '$&.mydomain.org' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:50:14.593

或者

```
PS> "\\PCSHARE\Homedrive\John Doe" -replace '^(\\\\[^\\]+)', '$1.mydomain.org' 
```

不需要正则表达式的替代方案（尽管在这种情况下我更喜欢正则表达式版本）：

```
PS> $unc = '\\PCSHARE\Homedrive\John Doe' -split '(\\)'
PS> $unc[4]+='.mydomain.org'
PS> -join $unc 
```

# android - 如何在android中记录通话

> ID：13698688
> 
> 赞同：1
> 
> 时间：2012-12-04T08:23:53.420
> 
> 标签：android

我想记录来电和去电。在android中可以吗？

我不想使用扬声器模式。想要没有 MIC。

我搜索了很多，但似乎没有任何工作。

请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:04:27.607

您不能在所有手机中记录通话。只有在允许 api 录制语音通话的手机中，您才能录制通话。在这些手机中，您可以使用以下设置 mediarecorder 的音频源。

MediaRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_DOWNLINK | MediaRecorder.AudioSource.VOICE_UPLINK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:30:38.477

我认为这个链接会帮助你......

[链接1](http://www.codeproject.com/Questions/264740/How-to-record-calls-in-Android)

[链接2](https://stackoverflow.com/questions/4603113/record-call-in-android)

[链接3](https://stackoverflow.com/questions/6839297/record-call-in-android-2-2)

谢谢....

# android - 通过商家控制台/API 取消用户订阅会退还他的钱吗？

> ID：13698693
> 
> 赞同：2
> 
> 时间：2012-12-04T08:24:19.143
> 
> 标签：android, in-app-purchase, in-app-billing, google-checkout, android-pay

根据应用内计费文件，如果用户自行取消订阅，他获得退款的唯一途径是直接联系卖家。但是如果应用程序所有者通过商户账户或通过 API 调用取消订阅，会发生什么情况？在这种情况下，用户会得到退款吗？看起来他会，但谷歌支付处理对此并不确定。当我取消用户的订阅时，他会收到明确声明“*不会退款*”的电子邮件。但在用户的谷歌钱包账户中，它还显示“*公司名称已取消您的订单。您已全额退款。* ”。

有人可以确认实际发生了什么吗？当用户自己取消订阅和开发人员取消用户订阅时，谷歌是否有可能使用相同的通知电子邮件？

主要问题 -**是否可以取消用户订阅而不退款**？我计划不时为订阅使用一些特别优惠（降价等），我实际上希望我的用户少付钱，目前唯一的方法是手动取消他们的订阅并让他们以较低的价格购买另一个订阅（不幸的是，目前无法更改订阅价格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:04:29.403

取消订阅只会防止重复发生，并使您能够退还初始订单价格。

如果您希望减少费用，您可以部分退款或全额退款每次重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T02:49:57.303

好的。因此，无法从商家控制台取消订阅 - 您只能取消\退款单个交易。此外，如果您向客户退款，他将收到一条消息，表明他的订阅将继续 (true)，并且不会退款 (false)。你甚至不能发送自定义消息。

因此，只能通过 API 调用取消订阅。

# javascript - 从 javascript 解析 id

> ID：13698695
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:24:22.013
> 
> 标签：javascript, parsing

我有考虑到这个（示例）的html代码：

```
$(window).ready(function () {
    video.search.apply_results({
        "scope":"global",
        "global":{
            "list":[{
                "id":19366,
                "user_id":null,
                "title":"\u041c\u043e\u0440\u0441\u043a\u0430\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f: \u0422\u043e, \u0447\u0442\u043e \u0432 \u0442\u0432\u043e\u0438\u0445 \u0441\u0438\u043b\u0430\u0445 \/ Umi Monogatari: Anata ga Ite [hl]Kureta[\/hl] Koto (RUS) \u0421\u0435\u0440\u0438\u044f \u21161",
                "thumb_url":"http:\/\/cs1.premedias.ru\/videos\/1\/9\/3\/6\/6\/6982b758bb030f4075d40696433158ef_s.jpg",
                "duration":1453,
                "description":"\u0414\u0432\u0435 \u0441\u0435\u0441\u0442\u0440\u044b-\u0440\u0443\u0441\u0430\u043b\u043a\u0438 \u041c\u0430\u0440\u0438\u043d \u0438 \u0423\u0440\u0438\u043d \u0436\u0438\u0432\u0443\u0442 \u0432 \u043e\u043a\u0435\u0430\u043d\u0441\u043a\u0438\u0445 \u0433\u043b\u0443\u0431\u0438\u043d\u0430\u0445, \u043e\u0431\u0449\u0430\u044e\u0442\u0441\u044f \u0441 \u0440\u043e\u0434\u0438\u0447\u0430\u043c\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441 \u0440\u044b\u0431\u0430\u043c\u0438, \u0447...",
                "is_hd":true
            },{
                "id":19367,
                "user_id":null,
                "title":"\u041c\u043e\u0440\u0441\u043a\u0430\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f: \u0422\u043e, \u0447\u0442\u043e \u0432 \u0442\u0432\u043e\u0438\u0445 \u0441\u0438\u043b\u0430\u0445 \/ Umi Monogatari: Anata ga Ite [hl]Kureta[\/hl] Koto (RUS) \u0421\u0435\u0440\u0438\u044f \u21162",
                "thumb_url":"http:\/\/cs1.premedias.ru\/videos\/1\/9\/3\/6\/7\/d2dc60de1ec00f944e74b2aa1f6db942_s.jpg",
                "duration":1454,
                "description":"\u0414\u0432\u0435 \u0441\u0435\u0441\u0442\u0440\u044b-\u0440\u0443\u0441\u0430\u043b\u043a\u0438 \u041c\u0430\u0440\u0438\u043d \u0438 \u0423\u0440\u0438\u043d \u0436\u0438\u0432\u0443\u0442 \u0432 \u043e\u043a\u0435\u0430\u043d\u0441\u043a\u0438\u0445 \u0433\u043b\u0443\u0431\u0438\u043d\u0430\u0445, \u043e\u0431\u0449\u0430\u044e\u0442\u0441\u044f \u0441 \u0440\u043e\u0434\u0438\u0447\u0430\u043c\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441 \u0440\u044b\u0431\u0430\u043c\u0438, \u0447...",
                "is_hd":true
            }],
            "count":28
        }
    });
}); 
```

我需要回显第一个“id”之后的数字：，在这个例子中是 19366。我怎么能用 javascript 来做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:31:22.097

假设您正在编写`apply_results`函数，它看起来有点像这样：

```
function apply_results(opts) {
    // ...
    // alerts first id
    alert(opts.global.list[0].id);
} 
```

如果您只是将上面的 html 作为文本获取，并且您想从中提取 id，请使用以下正则表达式：

```
// assuming text holds all the html OP pasted following alerts first id found
alert(text.match(/\"id\":(\d+)/)[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:31:35.440

不需要（进一步）*解析*。一旦您从任何来源获得该数据，根据您引用的代码，它已经被反序列化（解析）为对象图。您只需参考该对象图的`global.list[0].id`. 例如：

```
$(window).ready(function () {
    var results = {
        "scope": "global",
        "global": {
            "list": [{
                "id": 19366,
                "user_id": null,
                "title": "\u041c\u043e\u0440\u0441\u043a\u0430\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f: \u0422\u043e, \u0447\u0442\u043e \u0432 \u0442\u0432\u043e\u0438\u0445 \u0441\u0438\u043b\u0430\u0445 \/ Umi Monogatari: Anata ga Ite [hl]Kureta[\/hl] Koto (RUS) \u0421\u0435\u0440\u0438\u044f \u21161",
                "thumb_url": "http:\/\/cs1.premedias.ru\/videos\/1\/9\/3\/6\/6\/6982b758bb030f4075d40696433158ef_s.jpg",
                "duration": 1453,
                "description": "\u0414\u0432\u0435 \u0441\u0435\u0441\u0442\u0440\u044b-\u0440\u0443\u0441\u0430\u043b\u043a\u0438 \u041c\u0430\u0440\u0438\u043d \u0438 \u0423\u0440\u0438\u043d \u0436\u0438\u0432\u0443\u0442 \u0432 \u043e\u043a\u0435\u0430\u043d\u0441\u043a\u0438\u0445 \u0433\u043b\u0443\u0431\u0438\u043d\u0430\u0445, \u043e\u0431\u0449\u0430\u044e\u0442\u0441\u044f \u0441 \u0440\u043e\u0434\u0438\u0447\u0430\u043c\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441 \u0440\u044b\u0431\u0430\u043c\u0438, \u0447...",
                "is_hd": true
            }, {
                "id": 19367,
                "user_id": null,
                "title": "\u041c\u043e\u0440\u0441\u043a\u0430\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f: \u0422\u043e, \u0447\u0442\u043e \u0432 \u0442\u0432\u043e\u0438\u0445 \u0441\u0438\u043b\u0430\u0445 \/ Umi Monogatari: Anata ga Ite [hl]Kureta[\/hl] Koto (RUS) \u0421\u0435\u0440\u0438\u044f \u21162",
                "thumb_url": "http:\/\/cs1.premedias.ru\/videos\/1\/9\/3\/6\/7\/d2dc60de1ec00f944e74b2aa1f6db942_s.jpg",
                "duration": 1454,
                "description": "\u0414\u0432\u0435 \u0441\u0435\u0441\u0442\u0440\u044b-\u0440\u0443\u0441\u0430\u043b\u043a\u0438 \u041c\u0430\u0440\u0438\u043d \u0438 \u0423\u0440\u0438\u043d \u0436\u0438\u0432\u0443\u0442 \u0432 \u043e\u043a\u0435\u0430\u043d\u0441\u043a\u0438\u0445 \u0433\u043b\u0443\u0431\u0438\u043d\u0430\u0445, \u043e\u0431\u0449\u0430\u044e\u0442\u0441\u044f \u0441 \u0440\u043e\u0434\u0438\u0447\u0430\u043c\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441 \u0440\u044b\u0431\u0430\u043c\u0438, \u0447...",
                "is_hd": true
            }],
            "count": 28
        }
    };
    video.search.apply_results(results);
    console.log(results.global.list[0].id);
}); 
```

我在上面所做的只是将你传入的大量对象文字移动`apply_results`到一个变量 ( `results`) 中，将该变量与 一起使用`apply_results`，然后显示第一个`id`值 ( `results.global.list[0].id`)。并格式化代码。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T08:36:12.257

您可以使用数组投影方法 .map()

```
var ids = json.global.list.map(function(i){
  return i.id;
});

console.log(ids);//[19366, 19367] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:39:03.497

我不确定你到底想要什么！顺便说一句，我想象过这样的情况：

```
<video id="id19367"/>
<video id="19367"/>​ 
```

但是，一旦找到 id，就可以使用 replace() javascript 函数“删除”“id”。

```
$(document).ready(function(){
  var ids = new Array();
  $('video').each(function() {
     var id = $(this).attr('id');  
      if(id[0]=='i') {
          var toRemove = 'id';
          id = id.replace(toRemove,'');
      }
      ids.push(id);    
      console.log(id);          
  });
});​ 
```

# ios - 如何获取navigationBar的titleView的高度？

> ID：13698698
> 
> 赞同：1
> 
> 时间：2012-12-04T08:24:38.250
> 
> 标签：ios, uinavigationcontroller, height, uinavigationbar, titleview

我使用一个按钮作为titleView。但是当我想获得按钮的高度时，当我从不使用`self.button.frame.size.height`or`self.navigationItem.titleView.frame.size.height`时，它总是返回 0；其他值（如 x、y 和宽度）可能看起来是合理的。

为什么？

```
In loadView
{
    self.switchButton =  [UIButton buttonWithType:UIButtonTypeCustom];
    [self.switchButton setTitle:@"TapMe" forState:UIControlStateNormal];
    self.navigationItem.titleView = self.switchButton;
    [self.switchButton addTarget:self action:@selector(doSomeThing:) forControlEvents:UIControlEventTouchUpInside];
 } 
```

和

```
-(void)doSomeThing:(id)sender
{
    NSLog(@"height%f", self.switchButton.frame.size.height);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:36:16.457

```
self.navigationItems.navagationBar 
```

似乎不正确。

关于什么

```
CGRectGetHeight(self.navigationItem.titleView.frame) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:36:24.317

您可以使用

首先将A视图分配给TitleView

```
UILabel *titiLbl = [[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 100, 44)]autorelease];
titiLbl.text = @"Title Name";
self.navigationItem.titleView = titiLbl; 
```

然后找到titleView的高度

```
CGRect navigationframe = self.navigationItem.titleView.frame;
NSLog(@"navigationframe Height=%f",navigationframe.size.height); 
```

请记住这一点，如果任何视图未分配给 NavigationItem 的 titleView 它将返回 0.000；

# documentation - 在 Doxygen 中，部分名称是否必须是全局唯一的？

> ID：13698699
> 
> 赞同：2
> 
> 时间：2012-12-04T08:24:49.077
> 
> 标签：documentation, doxygen

我正在我的应用程序中编写一些模块的概述文档。我主要使用`\page`,`\subpage`和`\section`标签`\subsection`。

和标签允许我为文档提供一个很好的层次结构`\page`，`\subpage`它在网页的标题中清晰可见，或者在使用 QHelpGenerator 转换为 Qt 帮助时用于构建目录。因此，我知道这些页面应该有唯一的名称。

当我在页面中为我的部分命名时，如“概述”、“简介”、“部分 1”、“部分 2”等，当我构建文档的一个子集时，它似乎可以正常工作。似乎部分名称不必是唯一的。

但是，当我构建更大的文档文件集时，某些页面不再正确创建。这可能是由不是全局唯一的部分名称引起的吗？

我试图查找有关部分名称的全局唯一性的信息，但我找不到任何关于部分名称唯一性的声明。它们必须是全球唯一的吗？

**编辑：** 我现在注意到，如果一个文件有一个 id X 和标题 A 的部分，而另一个文件有一个 id X 和标题 B 的部分，它们在生成的文档（A 或 B）中都得到相同的标题。所以这似乎表明 id 应该是全球唯一的。有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:36:12.043

doxygen 中的部分名称旨在全球唯一。`\ref`这允许从文档的任何部分引用 ( ) 部分。

如果您只是在寻找一个节标题（其中 id 不使用/不重要），您可以依赖其他机制之一来指定 Doxygen 提供的标题，例如：

*   对标题使用 HTML 标记：

    ```
    <h1>Header 1</h1>
    <h2>Header 2</h2>
    <h3>Header 3</h3> 
    ```

*   使用标头的 Markdown 表示（假设启用了 Markdown 支持）：

    ```
    Header 1
    ========

    Header 2
    -------- 
    ```

    或者

    ```
    # Header 1
    ## Header 2
    ### Header 3 
    ```

# breeze - 微风中可能的错误

> ID：13698700
> 
> 赞同：0
> 
> 时间：2012-12-04T08:24:50.223
> 
> 标签：breeze

我想我发现了一个错误。

我正在做的是以下内容：

1.  我创建一个新实体并将该实体添加到管理器。

    ```
    var createConexion = function (origen, destino) {
        var metadataStore = manager.metadataStore;
        var conexionType = metadataStore.getEntityType("ConexionPalanca");
        var newConexion = conexionType.createEntity();

        newConexion.PalancaDestinoID(destino.PalancaID());
        newConexion.PalancaOrigenID(origen.PalancaID());
        newConexion.Activa(true);

        manager.addEntity(newConexion);

        return newConexion;
    }; 
    ```

2.  取消更改。

    ```
    var cancelChanges = function () {
        return manager.rejectChanges();
    }; 
    ```

3.  我运行本地查询。

    ```
     var getConexiones = function () {
            var query = EntityQuery.from("ConexionesPalancas");
            return manager.executeQueryLocally(query);
        }; 
    ```

执行这些步骤时，调用 executeQueryLocally 时出现以下错误：

```
Uncaught TypeError: Can not read property 'entityAspect' of null at line 9249 (breeze.js) 
```

我正在使用微风 0.74.2

编辑：这是我正在使用的模型：

```
public class Palanca {
    public int PalancaID { get; set; }
    /*More properties ommited*/
    public virtual ICollection<ConexionPalanca> ConexionesSalientes { get; set; }
    public virtual ICollection<ConexionPalanca> ConexionesEntrantes { get; set; }
}

public class ConexionPalanca {
    public int PalancaOrigenID { get; set; }
    public virtual Palanca PalancaOrigen { get; set; }

    public int PalancaDestinoID { get; set; }
    public virtual Palanca PalancaDestino { get; set; }
    public string Anchor { get; set; }
}

public class PalancaConfiguration : EntityTypeConfiguration<Palanca> {
    public PalancaConfiguration() : base() {
    HasKey( p => p.PalancaID );
    Property( p => p.PalancaID )
            .IsRequired()
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    HasMany( p => p.ConexionesSalientes ).WithRequired( cp => cp.PalancaOrigen).HasForeignKey(cp=>cp.PalancaOrigenID);
    HasMany( p => p.ConexionesEntrantes ).WithRequired( cp => cp.PalancaDestino).HasForeignKey( cp => cp.PalancaDestinoID ).WillCascadeOnDelete(false);
    }
}

public class ConexionPalancaConfiguration : EntityTypeConfiguration<ConexionPalanca> {
    public ConexionPalancaConfiguration() {
        HasKey( cp => new {cp.PalancaOrigenID, cp.PalancaDestinoID} );

        HasRequired( cp => cp.PalancaOrigen ).WithMany( p => p.ConexionesSalientes ).HasForeignKey( cp => cp.PalancaOrigenID );
        HasRequired( cp => cp.PalancaDestino ).WithMany(p=>p.ConexionesEntrantes).HasForeignKey( cp => cp.PalancaDestinoID );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:40:18.487

这是一个错误。它已在 v 0.74.3 中修复，可通过微风网站或通过 nuget 获得。请让我们知道这是否可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:33:55.427

我发现了一个类似的错误。事实证明，这个错误就在我身边。看来您正在设置连接表。确保您的模型正确配置了 foreignKey 属性（或 fluent API）。为什么要自己设置ID，不应该这样让微风来处理吗？

```
newConexion.PalancaDestinoID(destino); <---
newConexion.PalancaOrigenID(origen);   <---
newConexion.Activa(true); 
```

以下效果很好：

```
createTeamUser = function (user, team, temporary) {
            var teamUserType = metadataStore.getEntityType("TeamUsers");
            var newTeamUser = teamUserType.createEntity();
            newTeamTemp = manager.addEntity(newTeamUser);
            newTeamUser.Team(team);
            newTeamUser.User(user);

            user.TeamUsers().push(newTeamTemp); 
            team.TeamUsers().push(newTeamTemp);
            return newTeamTemp;
        }, 
```

使用此模型：

```
public class TeamUsers
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public long TeamUsersId { get; set; }

    public long TeamId { get; set; }
    [ForeignKey("TeamId")]
    [InverseProperty("TeamUsers")]
    public Team Team { get; set; }

    public long UserId { get; set; }
    [ForeignKey("UserId")]            //<---- Withour these attributes i got a null error too 
    [InverseProperty("TeamUsers")]    //<---- 
    public User User { get; set; }

    public bool Temporary { get; set; }

    //[Timestamp]
    //public byte[] TimeStamp { get; set; }
} 
```

在`User`模型中使用此字段：

```
 [InverseProperty("User")]
    public ICollection<TeamUsers> TeamUsers { get; set; } 
```

问题：Julianyus 在将新实体添加到管理器之前添加导航属性。他正在为`detached`实体设置属性。据我了解，在将实体添加到经理/现金之后，对实体所做的一切都应该在微风文档中完成。在添加到缓存之前使用实体是否安全？

# c# - 从事件处理程序在主线程中执行方法

> ID：13698704
> 
> 赞同：11
> 
> 时间：2012-12-04T08:25:00.577
> 
> 标签：c#, winforms, multithreading, events, backgroundworker

我有一个从 Queue 类继承的自定义 Queue 类。它有一个事件 ItemAdded。在此事件的事件处理程序中，我正在执行一个方法。但它在主线程之外运行，虽然我希望它在主线程中。我不知道该怎么做。有什么建议吗？

```
//My custom class

using System;
using System.Collections; //Required to inherit non-generic Queue class.

namespace QueueWithEvent
{
    public class SmartQueue:Queue
    {

        public delegate void ItemAddedEventHandler(object sender, EventArgs e);

        public event ItemAddedEventHandler ItemAdded;

        protected virtual void OnItemAdded(EventArgs e)
        {
           if (ItemAdded != null)
           {
              ItemAdded(this, e);
           }
    }

    public override void Enqueue(object Item)
    {
        base.Enqueue(Item);
        OnItemAdded(EventArgs.Empty);
    }        

   }
}

 //Winform application

 using System;
 using System.ComponentModel;
 using System.Windows.Forms;
 using QueueWithEvent;

 namespace TestApp
 {
    public partial class Form1 : Form
    {

    SmartQueue qTest = new SmartQueue();

    public Form1()
    {
        InitializeComponent();
        qTest.ItemAdded += new SmartQueue.ItemAddedEventHandler(this.QChanged);
    }

    private void btnStartBgw_Click(object sender, EventArgs e)
    {
        DisplayThreadName();
        bgwTest.RunWorkerAsync();
    }

    private void bgwTest_DoWork(object sender, DoWorkEventArgs e)
    {
        try
        {
            for (int i = 0; i < 11; i++)
            {
                string valueTExt = i.ToString();
                qTest.Enqueue(valueTExt);
                System.Threading.Thread.Sleep(5000);
            }
        }
        catch (Exception Ex)
        {
            MessageBox.Show(Ex.Message);

        }
    }

    private void DisplayThreadName()
    {
        string tName = System.Threading.Thread.CurrentThread.ManagedThreadId.ToString();
        txtThreadName.Text = tName;           
    }

    private void QChanged(object sender, EventArgs e)
    {
        //#########I want this method to run on main thread #############
        DisplayThreadName();
    }
}
} 
```

提前致谢。SK保罗。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-04T08:28:33.273

您正在后台线程上排队项目（DoWork 事件处理程序在后台线程上运行），因此您的事件也在后台线程中引发。

使用`InvokeRequired`方法来验证您是否在 UI 线程上。如果没有，则使用`Invoke`在 UI 线程上运行代码：

```
 private void QChanged(object sender, EventArgs e)
 {
     if (InvokeRequired)
     {
         Invoke((MethodInvoker)delegate { QChanged(sender, e); });
         return;
     }
     // this code will run on main (UI) thread 
     DisplayThreadName();
 } 
```

您的另一个选择 - 使用`ProgressChanged`事件将项目排入队列（不要忘记设置`WorkerReportsProgress`为 true）。此事件处理程序在 UI 线程上运行：

```
private void bgwTest_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = (BackgroundWorker)sender;

    for (int i = 0; i < 11; i++)
    { 
        // use user state for passing data
        // which is not reflecting progress percentage
        worker.ReportProgress(0, i);
        System.Threading.Thread.Sleep(5000);
    }
}

private void bgwTest_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
     string valueTExt = e.UserState.ToString();
     qTest.Enqueue(valueTExt);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T08:37:53.917

您可以使用与 相同的方法`BackgroundWorker`，即**[`AsyncOperation`](http://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperation.aspx)**作为一个成员合并到您的类中，它可以将操作分派到创建它的线程。

```
protected AsyncOperation AsyncOp; 
```

使用“null”参数在您的构造函数中实例化它。这会创建一个“绑定”到当前线程的异步操作。

```
public SmartQueue()
{
    AsyncOp = AsyncOperationManager.CreateOperation(null);
} 
```

然后，您可以将 AsyncOp 用于`Post`您的事件。

```
public override void Enqueue(object Item)
{
    base.Enqueue(Item);
    AsyncOp.Post(OnItemAdded, EventArgs.Empty);
} 
```

`OnItemAdded`这将在创建 SmartQueue 实例的同一线程上执行处理程序（订阅者）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T08:38:39.400

尝试在主线程中使用此代码：

```
SmartQueue smartQueue = new SmartQueue();

public Form1()
{
    InitializeComponent();
    smartQueue.ItemAdded += new SmartQueue.ItemAddedEventHandler(smartQueue_ItemAdded);
}

void smartQueue_ItemAdded(object sender, EventArgs e)
{
    // add your code in here
} 
```

# java - 如何在android中导出javadoc

> ID：13698709
> 
> 赞同：0
> 
> 时间：2012-12-04T08:25:31.543
> 
> 标签：java, android

它无法在eclipse中导出android项目。我检查了一些参考并找到了一些类似的方法，但它无法导出 javadoc。控制台提示的内容输出：BUILD SUCCESSFUL。内容如下：

```
uildfile: E:\JavaWork\Javadoc\javadoc.xml
javadoc:
  [javadoc] Skipping E:\src since it is no directory.
  [javadoc] Skipping E:\gen since it is no directory.
  [javadoc] Generating Javadoc
  [javadoc] Javadoc execution
  [javadoc] 2 ����
  [javadoc] javadoc:*******E:\src\com\oppo\doc\MainActivity.java"
  [javadoc] javadoc: ******"E:\src\com\oppo\doc\ImageUtils.java"
BUILD SUCCESSFUL
Total time: 969 milliseconds 
```

该`*****`部分是混乱的代码。它在 doc 文件中没有 javadoc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:49:58.383

你可以使用 doxygen 的 javadoc 你是 android 应用程序检查这个链接[http://home.gna.org/eclox/](http://home.gna.org/eclox/)

**更新站点**标签以获得更多帮助，请检查[此](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-34.htm)

# c++ - 读取字符串的长度，然后反转/反转字符串

> ID：13698719
> 
> 赞同：0
> 
> 时间：2012-12-04T08:26:12.523
> 
> 标签：c++, dev-c++

基本上，我已经成功地写了这个，并且我成功地反转了一个单词！但是当我尝试反转包含 2 个或更多单词的字符串时，我无法获得输出。任何人都知道如何解决这个问题，或者一些提示？

```
 #include <iostream>

 using namespace std;

 int main()
 {
      char words[100];
      int x, i;

      cout<<"Enter message : ";
      cin>>words;

      x = strlen(words);
      //This two line is used to reverse the string
      for(i=x;i>0;i--)
         cout<<words[i-1]<<endl;

     system("pause");
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:43:43.033

问题不在于 char 数组与 std::string - 它与输入法有关。

更改`cin>>words`为`cin.getline(words, sizeof(words), '\n');`

我猜这个任务是一个习惯数组的任务，所以坚持使用 char 数组 - 否则，是的，std::string 是易于使用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:38:46.080

您可以使用`std::string`代替 C 字符数组，也可以使用 string::reverse_iterator 以相反的顺序读取单词。要读取以空格分隔的多个单词，您需要使用 std::getline。

```
std::string words;
std::getline(std::cin, words, '\n'); //if you read multiple words separated by space

for (string::reverse_iterator iter = str.rbegin() ; iter != str.rend(); ++iter)
{
  std::cout << *iter;
} 
```

或使用`std::reverse`

```
std::reverse(words.begin(), words.end()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:02:17.467

使用`cin.getline(words,99)`insted of`cin>>words`因为 cin>>words 只会将 char 数组获取到第一个空格。

# c# - 在 SQL Server 2008 中合并单个列中的重复数据

> ID：13698721
> 
> 赞同：1
> 
> 时间：2012-12-04T08:26:22.937
> 
> 标签：c#, asp.net, sql, sql-server

在 SQL Server 中，我们得到如下所示的结果：

![图片1](../Images/759ac11fb3841c682ad157e2c756e233.png)

但是，我们需要如下所示的输出：

![在此处输入图像描述](../Images/23286ef43cbf2489439cdcd1b87f7c08.png)

有什么方法可以通过 asp.net 前端或通过 SQL 查询/存储过程合并重复数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:56:20.453

您可以从存储过程返回两个表，一个表只有带有总计字段的产品详细信息，另一个表有订单详细信息。

将网格与内网格。

现在将父网格与产品表绑定，将第二个网格与订单表绑定，它将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:26:47.550

它可能不是首选的解决方案，但它可以帮助您以更合适的方式获取数据：

```
SELECT * FROM [{yourDb}].[dbo].[{yourTb}] ORDER BY ProductName ASC
COMPUTE sum(Quantity) BY ProductName 
```

结果：项目 OrderId 数量

## 香蕉 31 2

总和 6

- 继续

项目 OrderId 数量

## 苹果 33 5

总和 21

# android - 在 onclick 监听器的活动底部滚动

> ID：13698725
> 
> 赞同：1
> 
> 时间：2012-12-04T08:26:36.710
> 
> 标签：android, android-scrollview

在我的 Android 应用程序中，我有一些最初不可见的视图（按钮、EditTexts 等）。这些仅在特定的按钮单击事件中可见。我希望将滚动视图移动到这些视图的末尾，以便用户可以看到这些视图。

布局文件的相关部分：

```
 <ScrollView...>

    <RelativeLayout android:id="@+id/RelDevDet"
            android:layout_width="fill_parent" android:layout_height="wrap_content">
            .
            .
            .
            <ImageButton android:id="@+id/ibRateApp"
                android:layout_toRightOf="@id/tvRateApp"
                android:layout_alignTop="@id/tvRateApp"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:background="@drawable/arrow_up" android:clickable="true"
                android:layout_marginRight="5dp"
                android:paddingBottom="10dp"
                 />
            <RatingBar android:id="@+id/rtApp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_below="@+id/tvRateApp"
                android:layout_marginLeft="5dp" android:visibility="gone"/>
            <EditText android:layout_width="fill_parent"
                android:id="@+id/etRateApp"
                android:layout_height="wrap_content" 
                android:lines="3"
                android:layout_below="@+id/rtApp"
                android:layout_marginRight="5dp"
                android:layout_alignLeft="@+id/tvDevWeb"
                android:visibility="gone" />
            <Button android:id="@+id/btSubRat" android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:layout_below="@+id/etRateApp" android:layout_margin="5dp" android:text="Submit" android:visibility="gone"/>
        </RelativeLayout>
        </ScrollView> 
```

按钮的 onclicklistener 是：

```
public void onClick(View v) {
if(v.getId()== R.id.ibRateApp){
            Log.d("amit","scroll end");
            rtApp.setVisibility(View.VISIBLE);
            etRateApp.setVisibility(View.VISIBLE);
            //How to get the scrollview move to the end of the page here??
        }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T05:07:19.243

```
scroll.fullScroll(View.FOCUS_DOWN); 
```

这为我修好了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-27T10:11:27.387

如果布局有隐藏视图，则使用后期延迟是安全的，这样只有在使视图可见后才会调用该方法，以便通过考虑隐藏视图向下滚动到页面末尾

```
int SPLASH_TIME_OUT = 10;

button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                invisibleview.setVisibility(View.VISIBLE);
                scrollView.fullScroll(View.FOCUS_DOWN);
                if (invisibleview.getVisibility() == View.VISIBLE){

                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            // This method will be executed once the timer is over
                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);
                        }
                    }, SPLASH_TIME_OUT);
                    scrollView.fullScroll(View.FOCUS_DOWN);
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:30:00.113

采用

```
 mScrollViewLayout.scrollTo(0, mScrollViewLayout.getMaxScrollAmount ()); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-03-12T15:19:34.637

//嘿先生，我劝你不要写太多代码，只需在 onclickLIsener 方法 add 上使用 findviewByid 调用 ScrollView。

```
 scrollview.fullScroll(View.FOCUS_UP); Or
    scrollview.fullScroll(View.FOCUS_DOWN); 
```

# java - 回弹时如何减慢图片的速度

> ID：13698728
> 
> 赞同：1
> 
> 时间：2012-12-04T08:26:48.170
> 
> 标签：java, android

我编写了一个可以拖动图像然后弹回图像的应用程序。但是回弹的速度太快了。我已经尝试过，但找不到减慢速度的方法。

我怎样才能控制这个速度？

```
public class CustomViewActivity extends Activity {

    float mx,my;
    ImageView switcherView;
    Bitmap bitmap;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_custom_view);

        switcherView = (ImageView) this.findViewById(R.id.img);  
        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.kh06);
        switcherView.setImageBitmap(bitmap);

        switcherView.setOnTouchListener(new View.OnTouchListener() {   
            public boolean onTouch(View arg0, MotionEvent event) {  
                float curX, curY;  
              //System.out.println(switcherView.getScrollX()+"--------view axis-----");
                switch (event.getAction()) {        
                    case MotionEvent.ACTION_DOWN:  
                        mx = event.getX();  
                        break;  
                    case MotionEvent.ACTION_MOVE:  
                        curX = event.getX();    
                        switcherView.scrollBy((int) (mx - curX), 0);  
                        mx = curX;  
                        break;  
                    case MotionEvent.ACTION_UP:                                                
                        switcherView.scrollTo(0, 0);
                        break;  
                }  
                return true;  
            }  
        });
    }
  } 
```

图像的 scaleType 是中心，图像没有被缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:44:27.593

`switcherView.scrollTo(0, 0)`该案例中的调用`MotionEvent.ACTION_UP`告诉 Android 将图像移动到指定位置。

如果你想减慢这个动作，那么你需要在`ImageView switcherView`

请参阅[TranslateAnimation](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)类。我怀疑你只需要指出正确的方向，谷歌搜索这提供了许多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:50:44.720

你需要在这里写一些代码

```
 case MotionEvent.ACTION_UP:                                                
    switcherView.scrollTo(0, 0);
    break; 
```

与其直接移回 0,0，不如使用 for 循环并在多次迭代中从当前位置转到 0,0。像这样的东西。

```
 case MotionEvent.ACTION_UP:                                                
    new Timer().schedule(new TimerTask() {

                    @Override
                    public void run() {

                        MainActivity.this.runOnUiThread(new Runnable() {

                            public void run() {
                                myImage.scrollTo((int) mx, 0);
                                myImage.invalidate();

                            }
                        });

                        if (mx > 0) {
                            mx -= 1;
                        } else {
                            cancel();
                        }

                    }
                }, 100,10); 
```

**更新** 如果您从右向左拖动，则此代码有效，但从左向右拖动时无法正常工作，因此请自行纠正。

# java - Android：如何旋转LinearLayout

> ID：13698733
> 
> 赞同：13
> 
> 时间：2012-12-04T08:27:22.267
> 
> 标签：java, android

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg2x" >
<LinearLayout 
    android:id="@+id/linear"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center"
    android:layout_alignParentTop="true"
    android:background="#FF00FF00"
  >
    <TextView 

        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#FF000000"
        android:textSize="70dp"
        android:text="test linearlayout"
        />

</LinearLayout> 
```

现在我想将“**线性”布局****旋转**90 度。*** 我不想使用 Animation***，还有其他方法可以实现吗？请帮助我。在此先感谢！

 ***** * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T08:33:59.237

由于您不需要动画，从 API 11 或更高版本开始，您可以使用

```
android:rotation = "90" 
```

在 XML 本身中旋转。如果您想在代码中执行此操作，例如在单击按钮后，那么您也可以使用它的 java 等号

```
 yourLayout  = (LinearLayout) findViewById(R.id.your_id);
 yourLayout.setRotation(90.0f); 
```

但不是在 API 11 之前。请参阅[文档](http://developer.android.com/reference/android/view/View.html#attr_android:rotation)。

> **机器人：旋转**
> 
> 视图的旋转，以度为单位。
> 
> 必须是浮点值，例如“1.2”。
> 
> 这也可能是对包含此类型值的资源（形式为“@[package:]type:name”）或主题属性（形式为“?[package:][type:]name”）的引用.
> 
> 这对应于全局属性资源符号旋转。

## 编辑：看到评论后

> 是的，我在 API 级别 11 中知道这种方法。但是较低的 API 级别呢？

我认为您可以自己旋转视图。而且我相信 lchorus 和 Pete 在[这个](https://stackoverflow.com/questions/1930963/rotating-a-view-in-android)线程中的回答确实有效。对于皮特的回答，他正在使用动画，但您可以将动画持续时间设置为 0 以在没有任何可见动画的情况下执行此操作。据我所知，没有其他直接的方法..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-28T12:30:42.287

使用这个库，您可以旋转整个视图层次结构[https://github.com/rongi/rotate-layout](https://github.com/rongi/rotate-layout)

像这样

![在此处输入图像描述](../Images/93d12b401b2206fe7000e0fe7cdc97f6.png)****

# python - 从 Tkinter 打印画布

> ID：13698738
> 
> 赞同：4
> 
> 时间：2012-12-04T08:27:46.127
> 
> 标签：python, printing, tkinter, tkinter-canvas

我创建了一个只有我想打印的矩形和标签的画布。我只找到了如何将画布保存到 postscript 文件中，如下所示：

```
self.canvas.postscript(file="my_drawing.ps", colormode='color') 
```

如有必要，如果这更容易，我很乐意打印整个窗口。

如何打印画布？

该程序将在 Windows XP 或 7 上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:35:44.880

[使用 Python 将打印作业发送到 USB 打印机](https://stackoverflow.com/questions/6326042/send-a-print-job-to-usb-printer-using-python)

那个人似乎有完全相同的问题，提供了答案。

> 据我所知，这是两个可用的软件包：
> 
> 1.  [pkipplib](http://www.pykota.com/software/pkipplib)
> 2.  [win32print](http://timgolden.me.uk/python/win32_how_do_i/print.html)

# grails - Grails 类型的列表没有产生一致的结果 - 可能的休眠/gorm 缓存问题

> ID：13698739
> 
> 赞同：0
> 
> 时间：2012-12-04T08:27:49.083
> 
> 标签：grails, grails-orm

我看到一些奇怪的行为，我认为这些行为与 GORM 缓存有关，但我不知道如何解决这个问题。我有一个项目对象，其中包含一个 purchaseOrderEntries 列表，每个都有一个开始日期。如果用户在采购订单状态日期中输入两位数年份，我将其转换为 4 位数年份，然后对日期进行排序。但他们没有正确排序！这是重要的片段：

```
def updatePurchaseOrderEntryDates(def project) {
   def poEntryList = project.purchaseOrderEntries
   poEntryList?.each { DateHelper.updateTwoDigitYear(it?.startDate) }  // 2-digit yr

   poEntryList?.sort()
   log.info "list 1: " + poEntryList
   poEntryList?.sort()
   log.info "list 2: " + poEntryList 
```

输出以下内容：

```
list 1: 1965, 2020, null
list 2: 2020, 1965, null 
```

第二次调用相同的排序方法怎么会产生不同的结果？我错过了什么？我觉得这是一个休眠延迟加载或缓存或其他问题。没有线索。有任何想法吗？

***更新W/更多信息*** 感谢所有的想法。不幸的是，解决方案似乎并不那么容易。排序工作正常，只是似乎每次都有效。这就是为什么它似乎是一个我不太了解的问题。项目对象包含一个采购订单条目列表 - 这是一个列表（不是一组），并且 PurchaseOrderEntry 对象实现了 Comparable。这是代码：

```
class Project ... {

    static hasMany = [purchaseOrderEntries:ProjectPurchaseOrderEntry, ...]

    static mapping = {
        purchaseOrderEntries cascade:'all-delete-orphan'
        ...
    }

    List<ProjectPurchaseOrderEntry> purchaseOrderEntries
    ...
}

class ProjectPurchaseOrderEntry ... implements Comparable {

    Project project
    Date startDate
    Date endDate

    ...

    int compareTo(obj) {
        // Compare these dates in reverse older. i.e. put the newest/earliest date on the top and the oldest/null date at the end of the list
        return obj.startDate <=> startDate     // this comparison is done in reverse - comparator operator is null safe
    }

    ... 
```

}

换句话说，排序似乎工作正常。问题在这里

```
 poEntryList?.each { DateHelper.updateTwoDigitYear(it?.startDate) }  // 2-digit yr   
  poEntryList?.sort() 
```

即使列表中的所有日期都更新为 4 位数的年份，它仍然会排序，就好像这些日期没有更新一样。我怀疑 2 位数的年份是儒略历日期，4 位数的年份是公历日期，并且我的比较运算符默默地失败了。但是......为什么日期没有更新，因为它们在之前的每个循环中？那是我没有得到的。是否每个人都在执行 SQL 查询以延迟获取 project.purchaseOrderEntries，然后再次使用它（而不是新排序的列表）？即使我将排序结果保存在一个新列表中，例如：

```
 poEntryList?.each { DateHelper.updateTwoDigitYear(it?.startDate) }  // support two digit year entry
    def sortedList = poEntryList?.sort({it?.startDate})?.reverse() 
```

新的“sortedList”仍然没有正确排序。我认为这可能的唯一方法是，如果它没有使用更新的日期进行排序。再次感谢您的所有帮助。欢迎任何想法。这个快把我逼疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:43:01.267

Hibernate 默认不提供任何排序​​顺序。所以我假设它工作正常，而你的 sort() 方法什么也不做。您应该提供排序顺序，如下所示：

```
def sortedList = poEntryList?.sort { it.startDate } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:06:23.900

Grails 中的`hasMany`关系使用数据类型`Set`。一个集合没有按设计排序，所以不告诉它按什么排序，它什么也不做。

更新您的帖子后更新。

1)`List<ProjectPurchaseOrderEntry> purchaseOrderEntries`可以简化为`List purchaseOrderEntries`。

2) A`.each{ .. }`不返回集合。它只是一个循环。如果您希望`.collect{..}`数组中的项目由闭包中的代码更新，则需要。

3) A`hasMany`类型`List`不打算实现 Comparable，因此不需要覆盖。它按元素添加到列表中的顺序排序。

4）一旦你做了一个`.collect{ .. }`你不再有你的域对象的列表，因此你设置的任何排序都不会被使用。我的意见是使用标准的 Set 数据类型，然后收集，然后说`.sort{it.startDate}.reverse()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:50:15.187

Groovy-JDK[`Collection.sort()`方法](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28%29)仅在调用它的集合是`List`. 因为`hasMany`关系是`Set`默认的

```
poEntryList.sort() 
```

保持`poEntryList`不变并按排序顺序返回一个*新* `List`的（这里的“排序”是指根据`compareTo`集合中对象的顺序）。如果您记录`List`返回的`sort()`集合而不是原始集合，您应该以一致的排序顺序看到它（当然假设对象具有有意义的`compareTo`方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T20:47:20.577

这个问题困扰了我好几次。检查返回类型 - 它可能是一个 Set。您需要转换为 ArrayList 然后排序。尝试以下操作：

```
def sortedList = poEntryList?.toArray().sort { it.startDate } 
```

# java - Android 中的 MathML

> ID：13698741
> 
> 赞同：3
> 
> 时间：2012-12-04T08:27:59.483
> 
> 标签：java, android, math, mathml

我知道 Android webkit 不支持 MathML。但我正在从事与数学相关的项目，我的客户已经发送了数千个 MathML 文件。

我尝试过使用“MathJax”，它可以工作，但它基于 Internet 和渲染速度非常慢，渲染文件大约需要 2 到 3 秒，我也很累在本地实现，但它需要大量资源，他无法找到本地文件夹中的一些资源。

有什么方法可以在 Android 中显示 MathML？如果不是，那么如果我已经有数千个 MathML 文件，那么最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:05:59.343

android 上的 Firefox 原生支持 mathml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:33:28.607

您可以使用[JEuclid](http://jeuclid.sourceforge.net/)

它在使用 MathML 并创建 JPG、PNG 等方面做得很好。它还将在 GUI 中显示方程式（我猜你可以查看 GUI 代码并将其合并到你自己的项目中）

# r - 将 RStudio 中的绘图另存为 PNG 或将 PDF 转换为 PNG 后缀

> ID：13698743
> 
> 赞同：0
> 
> 时间：2012-12-04T08:28:08.080
> 
> 标签：r, pdf, plot, ms-word, rstudio

我对 RStudio 和自动导出选项有一点问题。我有一个大脚本，它创建了很多图，为此我使用以下代码。

```
for(i in 1:2){
  if(i == 1)
    pdf(file="/home/steffen/Downloads/test.pdf",width=12,height=8)![enter image description here][1]
  plot(1:3);
  if(i == 1)
    dev.off()
} 
```

![在此处输入图像描述](../Images/83ff172b2356fb6d5c9b25a413debc7a.png)

这工作得很好，但我必须使用 Microsoft Word 中的绘图，而 Word 并不喜欢包含 PDF ......所以如果我可以创建 pngs 那就太好了。我在 linux 中尝试了“convert”命令，但结果是大约 20kb 的 die pdf 是 png 大约 1MB 的后记，并且质量不如预期。我的脚本如下：

```
for i in "$@"; do
  dst="${i%pdf}png"
  convert -density 1000x1000 -resize 3000x3000 -quality 95 "$i" "./png/$dst"
done 
```

那么有没有人知道如何创建一个不是那么大但质量很好的png。

直接与 RStudio 或在对话后自动对话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:38:36.640

使用该`png`功能。

```
png(file="path.png",width=12,height=8) 
```

# php - 如何在 php 中使用 file_get_contents ？，我的代码不起作用

> ID：13698749
> 
> 赞同：-2
> 
> 时间：2012-12-04T08:28:39.573
> 
> 标签：php

这段代码在一个 php 文件中，它不会创建或打开文件

```
<?php

function file_stuff(){
    $text = "hello world";
    file_put_contents("myFirst.txt","$text");
    $text1 = file_get_contents("myFirst.txt");
    print "$text1";
}

# main program
file_stuff();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:32:12.017

[`file_put_contents()`](http://php.net/manual/en/function.file-put-contents.php)错误时返回布尔值`false`，因此您应该对此进行测试：

```
if(file_put_contents("myFirst.txt", $text) !== false)
{
    $text1 = file_get_contents("myFirst.txt");
    print $text1;
}
else
{
    print "Failed to write to file";
} 
```

您可能没有写入当前目录的权限。

旁注：您不需要将变量用引号括起来，只需按原样使用变量即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:33:01.663

我试过你的代码，它工作正常，它向我显示“Hello world”。

检查运行脚本的目录的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:33:59.807

尝试这个：

```
<?php

    $toPut = "Hello World";
    file_put_contents("./myTextFile.txt", $toPut);

    $myTextFile = file_get_contents("./myTextFile.txt");
    echo $myTextFile;

?> 
```

如果该代码不起作用，您可能遇到权限错误。

写入后尝试使用[chmod设置文件的权限，如下所示：](http://php.net/manual/en/function.chmod.php)

```
chmod(0755, "./myTextFile.txt") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:35:55.863

尝试 `allow_url_fopen = On`

在您的 php.ini 文件中进行上述更改，一切都会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T08:36:36.850

这件作品应该可以正常工作。在我的电脑中它工作得很好。以下是检查点：

1.  [打开错误和警告](http://php.net/manual/en/function.error-reporting.php)另见[这里](http://www.phpreferencebook.com/tips/display-all-php-errors-and-warnings/)
2.  检查您尝试写入的目录中的权限

# entity-framework - 如何急切加载（向上两级）？

> ID：13698750
> 
> 赞同：0
> 
> 时间：2012-12-04T08:28:41.057
> 
> 标签：entity-framework, entity-framework-4, eager-loading

模型如下所示：客户（型号）-订单（型号）-产品（型号）-颜色（型号）-名称（属性）

在列出产品的详细信息时，我想显示客户的名称（名称是模型客户的属性）。

我正在使用的代码是

```
db.Products.Include("Order").Include("Customer").Include("Color").Where('my where query') 
```

我收到的错误消息是 Product 没有 Customer 的导航属性。如何获得产品的属性？

我正在使用带有 SQL Azure 后端的 Entity Framework 4.3.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:56:17.843

您可以在中使用点符号`Include`：

```
db.Products.Include("Order.Customer").Include("Color").Where(...) 
```

# objective-c - scanUpToString 上的 NSScanner 无法识别的选择器

> ID：13698757
> 
> 赞同：0
> 
> 时间：2012-12-04T08:28:59.000
> 
> 标签：objective-c, ios, xcode, ios6, nsscanner

我使用来自 Dimitris 的[URL 解析器类](https://stackoverflow.com/questions/2225814/nsurl-pull-out-a-single-value-for-a-key-in-a-parameter-string)，但是当 init 对象出现时我遇到了一个问题`initWithURLString`：

```
- (id) initWithURLString:(NSString *)url{
    self = [super init];
    if (self != nil) {
        NSString *string = url;
        NSScanner *scanner = [NSScanner scannerWithString:string];
        [scanner setCharactersToBeSkipped:[NSCharacterSet characterSetWithCharactersInString:@"&?"]];
        NSString *tempString;
        NSMutableArray *vars = [NSMutableArray new];
        //ignore the beginning of the string and skip to the vars
        [scanner scanUpToString:@"?" intoString:nil];
        while ([scanner scanUpToString:@"&" intoString:&tempString]) {
            [vars addObject:[tempString copy]];
        }
        self.variables = vars;
    }
    return self;
} 
```

在线`[scanner scanUpToString:@"?" intoString:nil];`我得到一个错误：

> [NSURL 长度]：无法识别的选择器发送到实例 0x1f8c2050

这怎么可能？

编辑：也许你想知道我如何调用 URLParser：

```
URLParser *urlParser = [[URLParser alloc]initWithURLString:[info valueForKey:UIImagePickerControllerReferenceURL]]; 
```

UIImagePickerControllerReferenceURL 值为：assets-library://asset/asset.PNG?id=8D2F0449-11A3-4962-9D60-C446831645D7&ext=PNG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:31:46.153

您将 NSURL 传递给 initWithURLString，但您应该像这样将它与 NSString 一起使用：

```
NSString* urlString = [NSString stringWithFormat:@"%@",[info valueForKey:UIImagePickerControllerReferenceURL]];
URLParser *parser = [[[URLParser alloc] initWithURLString:urlString] autorelease]; 
```

# sql - 如何添加新列并有条件地插入行（在同一脚本中）

> ID：13698758
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:28:58.717
> 
> 标签：sql, sql-server-2008

我想在表格中添加列。如果我的脚本的那部分执行，我还想向表中添加一些值。我该怎么做 ？

```
 if not exists (select 1 from sys.columns 
                 where object_id = object_id('CAT_MASSUPDATETASKPARAM') 
                 and name = 'ValueBoolean' )
  begin
           alter table CAT_MASSUPDATETASKPARAM add ValueBoolean bit NULL 
  end
  go

  IF (the first script was running do this script )
       INSERT INTO CAT_MASSUPDATETASKPARAM ( ParentTaskIK,    
              ParamType,ParamName,ValueInt,ValueStr,ValueBoolean)
       SELECT ParentTaskIK, 'Boolean','SHOW_CURRENT',NULL,NULL,1
       FROM   CAT_MASSUPDATETASKPARAM ,CAT_MASSUPDATETASK
       WHERE  CAT_MASSUPDATETASKPARAM.ParentTaskIK = CAT_MASSUPDATETASK.Id
       AND    CAT_MASSUPDATETASK.MassUpdateType in ('somthing','somthing1')
       GROUP BY ParentTaskIK  
 go 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:54:34.673

只有在第一个添加列时，您才希望第二部分运行......将它放在同一个开始-结束块中。但是您需要动态 SQL，因为在编译时会检查列是否存在。

```
if not exists (select 1 from sys.columns where object_id =     object_id('CAT_MASSUPDATETASKPARAM') and name = 'ValueBoolean')
begin
    alter table CAT_MASSUPDATETASKPARAM  add ValueBoolean bit NULL;
    EXEC ('
    INSERT INTO CAT_MASSUPDATETASKPARAM ( ParentTaskIK,    ParamType,ParamName,ValueInt,ValueStr,ValueBoolean)
        select ParentTaskIK, ''Boolean'',''SHOW_CURRENT'',NULL,NULL,1
        from CAT_MASSUPDATETASKPARAM ,CAT_MASSUPDATETASK
        where CAT_MASSUPDATETASKPARAM.ParentTaskIK = CAT_MASSUPDATETASK.Id
        and CAT_MASSUPDATETASK.MassUpdateType in (''somthing'',''somthing1'')
        group by ParentTaskIK     ');
end
go 
```

否则，在同一会话中，您可以使用临时表或一些此类标记：

```
if not exists (select 1 from sys.columns where object_id =     object_id('CAT_MASSUPDATETASKPARAM') and name = 'ValueBoolean')
begin
    alter table CAT_MASSUPDATETASKPARAM  add ValueBoolean bit NULL;
    create table #marker (id int);
end;
GO
if object_id('tempdb..#marker') is not null
    INSERT INTO CAT_MASSUPDATETASKPARAM (
        ParentTaskIK,ParamType,ParamName,ValueInt,ValueStr,ValueBoolean)
    select ParentTaskIK, 'Boolean','SHOW_CURRENT',NULL,NULL,1
        from CAT_MASSUPDATETASKPARAM ,CAT_MASSUPDATETASK
        where CAT_MASSUPDATETASKPARAM.ParentTaskIK = CAT_MASSUPDATETASK.Id
        and CAT_MASSUPDATETASK.MassUpdateType in ('somthing','somthing1')
        group by ParentTaskIK; 
```

# xml - 如何将特定 url 值获取到内容查询 Web 部件中的 xsl 变量中 - Sharepoint 2010

> ID：13698759
> 
> 赞同：2
> 
> 时间：2012-12-04T08:29:02.037
> 
> 标签：xml, sharepoint, xslt, formatting

我正在使用 Sharepoint 2010 内容查询 Webpart(CQWP) 在页面上显示开箱即用的讨论板列表。**我通过更改ItemStyle.xsl**文件自定义了 CQWP 的外观。我的要求之一是在 CQWP 上获得一个超链接——我有 url 的格式，我需要帮助来使用 xsl 变量构建 url。

网址格式：

```
https://yourdomain.com/sites/site_name/Lists/Team%20Discussion/NewForm.aspx?RootFolder={$DisplayTitle}&ContentTypeId=0x0107 
```

在上面的 url 格式中，'{$Displaytitle}' 是讨论板的主题，我通过 xsl:variable 得到它。下面是我用来获取主题的代码片段。

```
<xsl:variable name="DisplayTitle">
           <xsl:call-template name="OuterTemplate.GetTitle">
               <xsl:with-param name="Title" select="@Title"/>
               <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>                   
           </xsl:call-template>
  </xsl:variable>
<xsl:value-of select="$DisplayTitle"/> 
```

现在我正在使用 html 锚标记来获取超链接

```
<a href="https://yourdomain.com/sites/site_name/Lists/Team%20Discussion/NewForm.aspx?RootFolder={$DisplayTitle}&ContentTypeId=0x0107">Link</a> 
```

但是上面抛出了一个错误，整个 CQWP 没有得到显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:44:00.690

参考。下面的代码为您的问题。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">

<xsl:variable name="DisplayTitle">Para</xsl:variable>

<html>
    <body>
        <a>
            <xsl:attribute name="href">http://www.google.co.in/<xsl:value-of select="$DisplayTitle"/></xsl:attribute>
        </a>
    </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

# android - Android：setImgVisibility() 错误

> ID：13698762
> 
> 赞同：1
> 
> 时间：2012-12-04T08:29:28.773
> 
> 标签：android

在我的应用程序中，我有一个隐藏图标的标题，我有一个适配器，`listview`当我单击时，`listview`我使用侦听器进入登录屏幕，当登录成功时应该返回到 listview（适配器）并且图标应该在标题。

在登录活动中，我有以下代码：

```
public void onClick(View v) {
    String password = etPassword.getText().toString();
    if(password.equals("guest")){
        SearchAdapter.setImgVisibility();
    } else {
        //-----
    }
    finish();
} 
```

在我的适配器中，我调用`setImgVisibility()`如下，但它不起作用

```
public static void setImgVisibility() {
    img.setVisibility(View.VISIBLE);
} 
```

我被`Nullpointerexception`困在这里`img.setVisibility(View.VISIBLE);` ，不知道我做错了什么。任何建议或帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:31:48.770

我会想象 img 是空的。您需要查看此值的设置位置，并确保在调用方法 setImgVisibility 之前发生。

显示更多完整代码以供人们进一步帮助。

此外，我刚刚注意到您使用了对搜索适配器的静态引用，您应该非常小心使用静态，尤其是在涉及图像的任何引用的情况下，因为图像可以绑定到上下文，因此除非您取消static 你最终会出现内存泄漏。（这曾经是一个老问题，不确定它是否仍然有效，但我仍然会避免使用静态引用）。

如果没有更多代码，我们可能无法为您提供适当的帮助。例如，您是否在登录时切换活动？如果你是，这根本行不通。

[给出下面的评论]如果您切换活动，那么包含列表视图的活动将被销毁然后重建，然后您导航回它。或者它至少会经历活动生命周期。这意味着您可以在标头 img 的实例化期间设置图标。

您可以将登录状态存储为应用程序的属性或首选项。设置标题图像时获取此值并相应地设置图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:02:33.230

您的 img 对象为空。您的 img 对象是否与 View v 相同，那么您可以在 setImgVisibility() 中传递 v 然后设置 v.setVisibility(View.VISIBLE)

# linux - 使用 telnet 的 HTTP 请求没有得到任何响应

> ID：13698763
> 
> 赞同：0
> 
> 时间：2012-12-04T08:29:32.540
> 
> 标签：linux, http, telnet

我们正在使用 telnet 机制向服务器发送 http 请求并获得响应。在使用 telnet 发送 HTTP GET 请求时，我们注意到了一件奇怪的事情。第一种方法适用于大多数环境，但不适用于其中一个环境。但是第二种方法（而不是相对路径，使用完整路径）在这种环境下工作正常。

**

*   方法1：

**

> (printf "GET /test.jsp HTTP/1.0\nAccept: */*\nUser-Agent: WatchDog\n\n"; sleep 9) | telnet xx.xx.xx.xx 8093 Trying xx.xxx.xx.xx... 连接到 xx.xx.xx.xx。转义字符是 '^]'。

外部主机关闭连接。

**

*   方法2：

**

> (printf "GET [http://xx.xx.xx.xx:8093/test.jsp](http://xx.xx.xx.xx:8093/test.jsp) HTTP/1.0\nAccept: */*\nUser-Agent: WatchDog\n\n"; sleep 9) | 远程登录 xx.xx.xx.xx 8093

```
Trying xx.xx.xx.xx... 
Connected to xx.xx.xx.xx. 
Escape character is '^]'. 
HTTP/1.1 200 OK 
Server: Apache-Coyote/1.1 
Set-Cookie: JSESSIONID=91643475E80038EA8770CE6803EE320C; Path=/ 
Content-Type: text/html;charset=UTF-8 
Content-Language: zh-US 
Content-Length: 42 
Date: Mon, 03 Dec 2012 04:25:09 GMT 
Connection: close 

The Server is Running 

Connection closed by foreign host. 
```

为什么 method1 不是只在一个环境中运行？我们需要在那个环境中检查一些东西吗？

请给你的建议...

谢谢， 塞卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:14:06.360

除了[必须是 \r\n](https://www.rfc-editor.org/rfc/rfc2616#section-4)的行尾和应该`*/*`代替的接受标头之外`/`，您的第一个请求没有主机名。

HTTP 1.1 服务器可以拒绝没有设置主机的 HTTP 请求，无论是在绝对请求 URI 中还是在主机头中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:01:06.177

HTTP/1.0 (RFC 1945) 指定以 CR LF 结尾的行。某些服务器可能会严格应用此规则。尝试以 \r\n 作为行尾发送请求。发送绝对 URI 也保留供代理使用（RFC 1945 的第 5.1.2 节）。

如果不同的行尾和 URI 样式对您没有帮助，您将不得不查看服务器配置/实现，因为我看不出方法 1 有什么问题。

# c# - 选中/取消选中 radListView 中的所有项目

> ID：13698767
> 
> 赞同：0
> 
> 时间：2012-12-04T08:29:51.340
> 
> 标签：c#, telerik, checkboxlist, radlistview

我有一个包含复选框项目的 Telerik ListView。 ![在此处输入图像描述](../Images/9937f94ac9f6877ac87bc1cf24ebc505.png)

所以，我想在一个按钮中检查所有项目，并在另一个按钮中取消选中此 radListView 中的所有项目。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:21:43.453

这是解决方案... ToggleState.ON 选中所有，ToggleState.Off 取消选中所有。

```
for (int item = 0; item < AllowAccess_ListView.Items.Count; item++)
{
     AllowAccess_ListView.Items[item].CheckState = Telerik.WinControls.Enumerations.ToggleState.On;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:49:42.797

如果您向它们添加一个类，您可以为它编写一个简单的 jQuery/JS。

例如：如果您将“foo”类添加到您的项目中，您可以使用这样的东西，

html-

```
<button id="checkAll">bla</button>
<button id="unCheckAll">bla</button> 
```

-jQuery

查看：

```
$('#checkAll').click(function () {
  $('.foo').each(function () {
    $(this).prop('checked', true);
  });
}); 
```

取消选中：

```
$('#unCheckAll').click(function () {
  $('.foo').each(function () {
    $(this).prop('checked', false);
  });
}); 
```

# ruby - 输出一个ruby方法的源码

> ID：13698768
> 
> 赞同：4
> 
> 时间：2012-12-04T08:29:51.940
> 
> 标签：ruby, metaprogramming

假设我创建了一个包含方法的类。

```
class A
  def test
    puts 'test'
  end
end 
```

我想知道里面发生了什么`test`。我想从字面上输出：

```
def test
  puts 'test'
end 
```

有没有办法在字符串中输出方法的来源？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T09:02:06.813

您可以使用[Pry](https://github.com/pry/pry)查看方法

```
# myfile.rb
require 'pry'
class A
   def test
     return 'test'
   end
end
puts Pry::Method(A.new.method(:test)).source      #(1)
# or as suggested in the comments
puts Pry::Method.from_str("A#test").source        #(2)
# uses less cpu cycles than #(1) because it does not call initialize - see comments
puts Pry::Method(A.allocate.method(:test)).source #(3)
# does not use memory to allocate class as #(1) and #(3) do
puts Pry::Method(A.instance_method(:test)).source      #(4) 
```

然后运行`ruby myfile.rb`，你会看到：

```
def test
   return 'test'
end 
```

# c++ - OpenCV将视频保存到文件

> ID：13698772
> 
> 赞同：5
> 
> 时间：2012-12-04T08:30:11.197
> 
> 标签：c++, xcode, macos, opencv, computer-vision

我认为我的问题非常基本，但我在 OpenCV 中编写这段代码只是为了简单地从网络摄像头捕获视频数据并将其保存到文件中。现在的问题是文件是在所需的目的地生成的，它最初的大小约为 286 字节。然后当我将第一帧分配给指针时，大小增加到 414 字节。但是，当我运行整个代码时，保存的视频大小仍然是 414 字节。当然，结果我的媒体播放器无法播放该文件并显示“不是 QuickTime Player 能够理解的格式”。VLC 播放器也是如此。

这是我的代码：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>

int main( int argc, char** argv ) {
CvCapture* capture;

capture = cvCreateCameraCapture(0);

assert( capture != NULL );

IplImage* bgr_frame = cvQueryFrame( capture );

CvSize size = cvSize(
                     (int)cvGetCaptureProperty( capture,
                                               CV_CAP_PROP_FRAME_WIDTH),
                     (int)cvGetCaptureProperty( capture,
                                               CV_CAP_PROP_FRAME_HEIGHT)
                     );

cvNamedWindow( "Webcam", CV_WINDOW_AUTOSIZE );

CvVideoWriter *writer = cvCreateVideoWriter(    "/Users/user/Desktop/OpenCV_trial/OpenCV_trial/vidtry.AVI",
                                            CV_FOURCC('D','I','V','X'),
                                            30,
                                            size
                                            );

while( (bgr_frame = cvQueryFrame( capture )) != NULL ) 
{
    cvWriteFrame(writer, bgr_frame );
    cvShowImage( "Webcam", bgr_frame );
    char c = cvWaitKey( 33 );
    if( c == 27 ) break;
}
cvReleaseVideoWriter( &writer );
cvReleaseCapture( &capture );
cvDestroyWindow( "Webcam" );
return( 0 );
} 
```

我不知道为什么会这样。我正在使用 mac OSX Lion 并运行 Xcode。

有没有人遇到过这个问题？如果是这样，我该如何解决？

谢谢！

-雅什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:21:52.500

嗨，我想我找到了问题的答案。

正如 Velthune 所建议的，这似乎是一个编解码器问题，MAC OS 只能运行其中的几个。这是所有可用的链接： [Mac os 端口支持的 QuickTime 编解码器列表](http://opencv.willowgarage.com/wiki/QuickTimeCodecs)

不过，并非所有列出的编解码器都有效。在我尝试过的所有方法中，只有 WRLE 似乎有效。

非常感谢 Velthune。-雅什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:03:10.650

您是否尝试过使用其他播放器打开文件？例如 VLC..

这是因为 Quicktime 和 .avi 不能很好地相处。

看看苹果[文档](http://support.apple.com/kb/HT1536)。

否则尝试更改视频编解码器，这是 opencv[参考](http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:31:25.107

其实我也试图做同样的事情。但它是我在 Windows 7 的 Visual C++ (Express Edition) 中尝试的。但在这种情况下，我们需要添加额外的标题作为“#include”stdafx.h“并确保保存文件的链接存在。例如我修改的代码如下：

```
#include "stdafx.h"
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>

int main( int argc, char** argv ) {
CvCapture* capture;

capture = cvCreateCameraCapture(0);

assert( capture != NULL );

IplImage* bgr_frame = cvQueryFrame( capture );

CvSize size = cvSize(
                     (int)cvGetCaptureProperty( capture,
                                               CV_CAP_PROP_FRAME_WIDTH),
                     (int)cvGetCaptureProperty( capture,
                                               CV_CAP_PROP_FRAME_HEIGHT)
                     );

cvNamedWindow( "Webcam", CV_WINDOW_AUTOSIZE );

CvVideoWriter *writer = cvCreateVideoWriter("D:/vidtry.AVI",CV_FOURCC('D','I','V','X'),15,size);

while( (bgr_frame = cvQueryFrame( capture )) != NULL ) 
{
    cvWriteFrame(writer, bgr_frame );
    cvShowImage( "Webcam", bgr_frame );
    char c = cvWaitKey( 33 );
    if( c == 27 ) break;
}
cvReleaseVideoWriter( &writer );
cvReleaseCapture( &capture );
cvDestroyWindow( "Webcam" );
return( 0 );
} 
```

# html - HTML CSS ul li 自动宽度

> ID：13698773
> 
> 赞同：6
> 
> 时间：2012-12-04T08:30:12.533
> 
> 标签：html, css

我四处寻找这个问题的答案，但没有运气！

这就是我想要实现的目标：

![在此处输入图像描述](../Images/b32d2e4c44c97d3b3637e435805ccd6d.png)

我想要的是选项卡`ul li`根据特定页面上的选项卡数量自动调整宽度。每页上的标签数量会改变，但我找不到使标签自动宽度的方法。

编码：

```
#tabs {
  height: 30px;
}

#tabs>ul {
  font-size: 1em;
  list-style: none;
  width: 100%;
  display: table;
  table-layout: fixed;
}

#tabs>ul>li {
  margin: 0 0px 0 0;
  padding: 7px 10px;
  display: block;
  float: left;
  display: table-cell;
  width: auto;
  background: #C9C9C9;
  text-align: center;
}
```

```
<div id="tabs">
  <ul>
    <li id="tabHeader_1">Page 1</li>
    <li id="tabHeader_2">Page 2</li>
    <li id="tabHeader_3">Page 3</li>
    <li id="tabHeader_4">Page 4</li>
    <li id="tabHeader_5">Page 5</li>
  </ul>
</div>
<div class="tab-content" id="tab_1">
  <h2>Page 1</h2>
  <p>Pellentesque habitant morbi tristique senectus...</p>
</div>
<div class="tabpage" id="tab_2">
  <h2>Page 2</h2>
  <p>Pellentesque habitant morbi tristique senectus...</p>
</div>
<div class="tabpage" id="tab_3">
  <h2>Page 3</h2>
  <p>Pellentesque habitant morbi tristique senectus...</p>
</div>
<div class="tabpage" id="tab_4">
  <h2>Page 3</h2>
  <p>Pellentesque habitant morbi tristique senectus...</p>
</div>
<div class="tabpage" id="tab_5">
  <h2>Page 3</h2>
  <p>Pellentesque habitant morbi tristique senectus...</p>
</div>
```

所有尝试都未能使`<li>`' 的自动宽度。非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-31T12:45:53.223

您只需要进行一些更改。

*   `float: left`从中删除`#tabs>ul>li`
*   移除侧边距，`#tabs>ul`这样 ul 就可以占据全宽。

更新你的css后应该是这样的。

```
#tabs {
  height: 30px;
}

#tabs>ul {
  font-size: 1em;
  list-style: none;
  width: 100%;
  display: table;
  table-layout: fixed;
  padding: 0;
}

#tabs>ul>li {
  margin: 0 0px 0 0;
  padding: 7px 10px;
  display: block;
  display: table-cell;
  width: auto;
  background: #C9C9C9;
  text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-04-10T04:22:12.160

```
body{
      background:#ededed;
      margin:0 auto;
  }
  .container{
      width:720px;
      border:1px solid red;
      padding:5px;
  }
ul{
    list-style:none;
    white-space: nowrap;
}
ul > li{
    display: inline-block;
}
```

```
 <!DOCTYPE html>
    <html>
        <head>
            <title>Page Title</title>
        </head>
        <body>
           <div class="container">
              <ul>
                  <li><a href="#">menu 1</a></li>
                  <li><a href="#">menu 2</a></li>
                  <li><a href="#">menu 3</a></li>
                  <li><a href="#">menu 4</a></li>
                  <li><a href="#">menu 5</a></li>
              </ul>
           </div>
        </body>
    </html>
```

# c++ - undefined 引用 `cvFindHomography' ？

> ID：13698774
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:30:13.860
> 
> 标签：c++, opencv

当我想构建一些 OpenCV 程序时，它会显示问题“未定义的对`cvFindHomography' so I check that which header file contains this function, so I include``...

但是，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:37:24.910

您已经包含了适当的头文件，否则您将收到编译器错误，而不是您报告的链接器错误。在 C++ 中，大多数情况下，头文件只公开您要使用的函数的声明。在您的情况下，定义位于库文件中。您必须告诉链接器将您的程序链接到这些 lib 文件。[请参阅http://opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)上的“4）配置您自己的项目以使用 OpenCV”，了解如何为 OpenCV 执行此操作。此外，我建议您增加有关 c++ 构建系统的知识，即您的编译器是什么，您的链接器是什么等。

# php - PHP 处理夏令时的时区

> ID：13698779
> 
> 赞同：22
> 
> 时间：2012-12-04T08:30:34.847
> 
> 标签：php, datetime, utc, dst, timezone-offset

我正在开发一个日历应用程序。在此，来自不同时区的用户创建/查看事件。我正在考虑按照以下方法以 UTC 保存事件时间并以用户的本地时间显示它们。注意：用户有他们喜欢的时区设置。

**要将事件开始时间保存为 UTC 时间戳：**

```
$timezone = new DateTimeZone( $user_timezone_name );
$utcOffset = $timezone->getOffset( new DateTime( $event_start_time_string_local ) );
$event_start_timestamp_local = maketime( $event_start_time_string_local );
//Now add/subtract $utcOffset to/from $event_start_timestamp_local to get event's start  //time  timestamp in UTC and save this result in DB. 
```

**要在用户的时区获取事件开始时间：**

```
date_default_timezone_set( $user_timezone_name );
$eventTimeLocalTime = date("Y-m-d H:i:s", $event_start_timestamp_in_UTC ); 
```

在哪里：

```
user_timezone_name is user's timezone setting.
event_start_time_string_local is event's start time string in local/civil time.
event_start_timestamp_in_UTC is event's start time timestamp in UTC. 
```

**我的问题：**

*   上面使用的 PHP API 是否负责所有地区的夏令时？
*   DST 时间本身在不同年份会发生变化，PHP 是如何获取这方面的信息的？我们需要升级 PHP 吗？如果是这样，我们是否需要升级所有或特定的 PHP 库？

参考：[-does-phps-date-default-timezone-set-adjust-to-daylight-saving](https://stackoverflow.com/questions/7660240/does-phps-date-default-timezone-set-adjust-to-daylight-saving?rq=1) - [get-timezone-offset-for-a-given-location](https://stackoverflow.com/questions/3910500/get-timezone-offset-for-a-given-location?rq=1)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-04T08:36:01.583

你太复杂了。要使用 在两个时区之间进行转换`DateTime`，请执行以下操作：

```
date_default_timezone_set('Asia/Kolkata'); // YOUR timezone, of the server

$date = new DateTime($input, new DateTimeZone('Asia/Tokyo')); // USER's timezone
$date->setTimezone(new DateTimeZone('UTC'));
echo $date->format('Y-m-d H:i:s'); 
```

这会将用户的本地时区转换为 UTC。反过来，要以用户的本地时间显示时间，请交换两个时区。

是的，PHP 负责 DST。必要的转换规则是 PHP 安装的一部分。您可以通过更新 PHP 或更新[timezonedb](https://pecl.php.net/package/timezonedb.)使它们保持最新。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-25T11:44:30.710

是的 php api 考虑了夏令时。大多数情况下，您可以按照 deceze 所示的方式安全地执行时间转换。问题是它并不总是可能/可行或有意义。考虑下面的例子 - 在波兰（2013 年），10 月 27 日凌晨 3 点，您的时钟向后移动一小时以切换到标准时间（偏移 UTC+01:00），在 3 月 31 日凌晨 2 点时钟向前调整 1 小时以切换到夏季时间（偏移 UTC+02:00）。现在让我们看看 Grenwich/UTC 中的“实时”是如何变化的，以及 PHP 从欧洲/华沙到 UTC 的转换是如何工作的：

```
Europe/Warsaw time   offset  UTC                    php2utc conversion   php offset
2013-10-27 01:00:00    +2    2013-10-26 23:00:00    2013-10-26 23:00:00  +2
2013-10-27 01:30:00    +2    2013-10-26 23:30:00    2013-10-26 23:30:00  +2
2013-10-27 02:00:00    +2    2013-10-27 00:00:00    2013-10-27 01:00:00  +1  *
2013-10-27 02:30:00    +2    2013-10-27 00:30:00    2013-10-27 01:30:00  +1  *
2013-10-27 02:59:00    +2    2013-10-27 00:59:00    2013-10-27 01:59:00  +1  *
     3am -> 2am .....................................summer time changes to standard(winter) time @3am we subtract 1h so 3am becomes 2am
2013-10-27 02:00:00    +1    2013-10-27 01:00:00    2013-10-27 01:00:00  +1
2013-10-27 02:30:00    +1    2013-10-27 01:30:00    2013-10-27 01:30:00  +1
2013-10-27 03:00:00    +1    2013-10-27 02:00:00    2013-10-27 02:00:00  +1  
2013-10-27 03:30:00    +1    2013-10-27 02:30:00    2013-10-27 02:30:00  +1 
```

正如您在凌晨 2 点至凌晨 3 点之间看到的那样，PHP 无法知道“哪个”小时（从调整之前/之后），因此无法可靠地转换。希望这对某人的审议有所帮助；-)

# nokia - 证书不在手机上诺基亚 S40 错误

> ID：13698782
> 
> 赞同：2
> 
> 时间：2012-12-04T08:30:50.927
> 
> 标签：nokia, nokia-s40

我已经使用添加了证书的密钥库部署了应用程序。

我使用 keytool eclipse 插件生成了密钥库和证书。

我安装了

现在的问题是在设备上安装它时会出现这样的错误消息“证书不在手机或 SIM 卡上”。

然后按照此处的说明在设备上安装证书 (http://www.nokia.com/in-en/support/troubleshooting/?action=singleFAQ&caseid=FA139228_en_US)。

我仍然收到与“证书不在电话或 SIM 卡上”相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:21:13.140

我在 Netbeans 上使用了一个verysign 证书，并且始终有效。您可以尝试从项目的首选项菜单中添加安全选项吗？

# mysql - 如何在 symfony2.0 中编写 mysql 查询？

> ID：13698784
> 
> 赞同：-3
> 
> 时间：2012-12-04T08:31:08.490
> 
> 标签：mysql, symfony

我有一个 mysql 查询，但我不知道如何在 symfony2.0 中进行查询。

询问：

```
SELECT a.id, a.name,
FROM `ms_musiccategory` a
LEFT OUTER JOIN `ms_musiccategory` b ON a.parent_Id = b.id
ORDER BY coalesce( b.name, a.name ) , a.name 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-04T09:19:57.510

```
 $con = $this -> getEntityManager() -> getConnection();

 $st = $con -> prepare(' SELECT a.* FROM `tablename` a LEFT OUTER JOIN `tablename` b ON a.parent_Id = b.id ORDER BY coalesce( b.name, a.name ) , a.name');

 $st -> execute();

 $list = $st -> fetchAll(); 
```

# winapi - 是否可以在 64 位应用程序中使用 32 位 Microsoft 文本驱动程序读取 csv 文件

> ID：13698785
> 
> 赞同：3
> 
> 时间：2012-12-04T08:31:15.200
> 
> 标签：winapi, odbc, 32bit-64bit, text-driver

我有一个要求，我需要使用 Microsoft 文本驱动程序从 CSV 文件中导入一些数据。我的开发环境是：-

Windows7 64 位
Office 2007（32 位）

当我尝试打开连接时，它给了我错误：

[Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

是否可以使用 32 位文本驱动程序和 64 位应用程序读取 csv 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T18:43:56.173

64 位进程无法加载 32 位 DLL。您必须有一个单独的 32 位应用程序来读取 CSV 文件并将数据存储在某处（例如，您的数据库）。

# silverstripe - 以不同的名称显示数据对象

> ID：13698788
> 
> 赞同：0
> 
> 时间：2012-12-04T08:31:29.617
> 
> 标签：silverstripe

下面是我的客户数据对象

```
<?php
 class Customer extends DataObject {
static $db = array(
    'FirstName' => 'Varchar',
    'Surname' => 'Varchar',
    'Email' => 'Varchar',
    'CustomerType' => "Enum('Private,Business','Private')"
);
static $has_one = array(
    'Avatar' => 'Image',
);
static $has_many = array(
    'HostingContracts' => 'HostingContract'
);
static $summary_fields = array(
    'FirstName',
    'Surname',
    'CustomerType'
);
static $searchable_fields = array(
    'FirstName',
    'Surname',
    'HostingContracts.ContractNumber'
);
    }
    ?> 
```

我需要“客户”显示为“客户”而不更改对象的类名。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:03:19.160

```
class Customer extends DataObject {
  static $singular_name = 'Client';
  static $plural_name = 'Clients';
} 
```

# qt - 在 QtCreator 中导入 CMake 项目

> ID：13698790
> 
> 赞同：22
> 
> 时间：2012-12-04T08:31:31.613
> 
> 标签：qt, ubuntu, build, cmake, qt-creator

我正在尝试在 QtCreator 中导入我的 Cmake 项目，我想将其用作代码编辑器，但随着 Qt 类的完成，可以通过 Ctrl+R 进行构建

导入 Cmake 项目时，当我尝试选择 RunCmake 时，运行 CMakeWizard 时 QtCreator ide 挂起。如果我取消弹出一个空窗口并且不会生成项目。

是否可以在 QtCreator 中导入现有的 cmake 项目？

Ubuntu 10.10 x86_64，QtCreator 2.6

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-04T08:35:35.047

通常您只需执行“打开项目”，然后选择 CMakeLists.txt 作为项目文件。QtCreator 然后会要求您运行一次 CMake（以生成 CodeBlocks 构建文件，然后由 QtCreator 解释）。之后，您将获得对 CMake 项目的本机支持。

它甚至适用于相当复杂的 CMake 脚本。如果您观察到挂起等，您可能应该向 QtCreator 项目提交错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-12T09:27:43.157

当打开在旧版本的 qtcreator 中创建的 cmake 项目时 qtcreator 崩溃时，我遇到了类似的问题。删除 CMakeLists.txt.user 并从终端运行 qt 为我解决了问题。

```
cd /path/to/project/
qtcreator . 
```

# php - 如何使用 spotify api 获取艺术家的所有曲目？

> ID：13698792
> 
> 赞同：2
> 
> 时间：2012-12-04T08:31:42.300
> 
> 标签：php, api, spotify

我可以通过调用这个 url 查看 spotify 上的所有曲目：

> [http://ws.spotify.com/search/1/track.json?q=xxx&page=1](http://ws.spotify.com/search/1/track.json?q=xxx&page=1)

*示例响应包含每个曲目的艺术家数据，例如：*

```
[artists] => Array
(
  [0] => stdClass Object
  (
    [href] => spotify:artist:38IfmizrHTCxFjd8UKhWnp
    [name] => Husman
  )
) 
```

从上面的回复中，我得到的艺术家 ID 为：**38IfmizrHTCxFjd8UKhWnp**。

现在，有没有办法通过 api 调用获取上述艺术家 ( **38IfmizrHTCxFjd8UKhWnp ) 的所有曲目？**

我想做的是，我想在我的应用程序中显示每个艺术家的曲目。

我看到我们可以通过如下调用获取艺术家的专辑：

[http://ws.spotify.com/lookup/1/?uri=spotify:artist:4YrKBkKSVeqDamzBPWVnSJ&extras=albumdetail](http://ws.spotify.com/lookup/1/?uri=spotify:artist:4YrKBkKSVeqDamzBPWVnSJ&extras=albumdetail)

但是我发现没有直接的方法可以使用 api 获取艺术家的曲目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:18:12.957

AFAIK，您所能做的只是基于名称的曲目搜索，例如[http://ws.spotify.com/search/1/track.json?q=artist:Madonna](http://ws.spotify.com/search/1/track.json?q=artist%3aMadonna)或高级搜索语法中的任何其他搜索。

*[高级搜索语法](http://www.spotify.com/about/features/advanced-search-syntax/)的链接目前似乎已断开，但您应该能够查看[此缓存版本](http://webcache.googleusercontent.com/search?q=cache%3avv2_Lfg0f6IJ%3awww.spotify.com/about/features/advanced-search-syntax/%20&cd=1&hl=en&ct=clnk&gl=se)。*

如果您希望进行更强大的查询，我真的建议您看看[The Echonest 的 API](http://developer.echonest.com)。它非常棒，并且支持使用 Spotify URI:s。此外，它还在不断发展，而 Spotify 提供的 Web API 在过去几年中并没有真正发展（但也许它会发展，谁知道呢）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T13:05:16.587

由于官方的高级语法现在被破坏了，你可以在 web-archive 中找到它：http://web.archive.org/web/20120704131650/http: [//www.spotify.com/us/about/features/高级搜索语法/](http://web.archive.org/web/20120704131650/http://www.spotify.com/us/about/features/advanced-search-syntax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:36:22.397

在 Spotify 开发者主页中，我发现了这个（[https://developer.spotify.com/technologies/web-api/](https://developer.spotify.com/technologies/web-api/)）

[http://ws.spotify.com/search/1/artist?q=38IfmizrHTCxFjd8UKhWnp](http://ws.spotify.com/search/1/artist?q=38IfmizrHTCxFjd8UKhWnp)

也许有帮助。

# delphi - delphi 7生成的MB文件是什么？

> ID：13698804
> 
> 赞同：4
> 
> 时间：2012-12-04T08:32:39.863
> 
> 标签：delphi, delphi-7

在 delphi 7 项目文件夹中生成了很多 *.Mb 文件。这些文件被命名为 Del1.MB、Del2.MB 等。这些项目通过 BDE 连接到 firebird 数据库。还有很多其他的非标准组件被使用。有谁知道这些 MB 文件是什么以及是否可以安全删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:53:03.673

我认为这些“del*.mb”文件是临时 BDE PARADOX 格式文件，默认情况下 BDE 在应用程序文件夹中创建它们并在应用程序关闭时删除它们：

[http://www.borlandtalk.com/image-vp141388.html](http://www.borlandtalk.com/image-vp141388.html)

[http://www.rhinocerus.net/forum/lang-pascal-delphi-databases/212042-bde-generating-del-mb-files.html](http://www.rhinocerus.net/forum/lang-pascal-delphi-databases/212042-bde-generating-del-mb-files.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-30T21:51:25.333

这些 DEL*.MB 文件以及 DEL*.DB 文件由 Borland 数据库引擎 (BDE) [1](http://mc-computing.com/Databases/BDE.html)组件自动创建以进行数据访问，例如在查询（通过 TQuery 组件）运行时。

它们是临时文件，因此如果 BDE 会话正确终止，它们将被自动删除[2](http://www.delphigroups.info/2/89/51475.html)。如果某些应用程序崩溃，这些文件将保留到下一次执行时，其中大部分将被替换，因此可能需要手动清理。

如果创建这些文件的文件夹是共享的（或者应用程序将其当前目录更改为同一文件夹，例如通过使用 SetCurrentDir 函数），则可能会导致更多问题，因为不同的应用程序可能会锁定文件，从而使其他应用程序混乱并导致其他崩溃.

# c# - 带有自定义项目模板文本的 wpf 组合框

> ID：13698805
> 
> 赞同：4
> 
> 时间：2012-12-04T08:32:40.987
> 
> 标签：c#, .net, wpf, combobox, itemtemplate

我有`ComboBox`自定义`ItemTemplate`。

```
<ComboBox Height="20" Width="200" 
          SelectedItem="{Binding Path=SelectedDesign}"
          ItemsSource="{Binding Path=Designs}" HorizontalAlignment="Left" 
          ScrollViewer.CanContentScroll="False">

    <ComboBox.ItemTemplate>
        <DataTemplate DataType="{x:Type formdesign:FormDesignContainer}">
            <Rectangle Width="200" Height="100">
                <Rectangle.Fill>
                    <ImageBrush ImageSource="{Binding Path=ImageThumb}" Stretch="Uniform" />
                </Rectangle.Fill>
            </Rectangle>
        </DataTemplate>
    </ComboBox.ItemTemplate>

</ComboBox> 
```

这很好用。但是 WPF 尝试将矩形绘制为组合框文本。如何为此模板设置“文本”。“文本”是指代表所选项目并在选择项目时写入组合框的字符串或控件

换句话说，我想这样做：

![在此处输入图像描述](../Images/b08a73dd4bf0c5cb87e06e77cdfc8cfb.png)

但现在我得到了这个

![在此处输入图像描述](../Images/25da3a9341b04ed63e43033bf220f38e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:09:49.037

~~尝试使用 TextBlock 设置 SelectionBoxItemTemplate。~~ 似乎 SelectionBoxItemTemplate 是只读的。所以另一种方法是重写ItemContainerStyle.Template。[例子](https://stackoverflow.com/a/3672098/1077059)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-12T10:41:30.797

我发现*Ray Burns的*[这个](https://stackoverflow.com/questions/2214696/wpf-how-to-customize-selectionboxitem-in-combobox/2277488#2277488)解决方案是一个很好的方法。您可以为下拉列表中的项目定义两个，另一个为应显示在 中的选定项目定义。使用触发器并检查它决定使用哪个可视化树。*`DataTemplate``Combobox`*

 *```
<Window.Resources>    
  <DataTemplate x:Key="NormalItemTemplate" ...>
    ...
  </DataTemplate>

  <DataTemplate x:Key="SelectionBoxTemplate" ...>
    ...
  </DataTemplate>

  <DataTemplate x:Key="CombinedTemplate">
    <ContentPresenter x:Name="Presenter"
       Content="{Binding}"
       ContentTemplate="{StaticResource NormalItemTemplate}" />
    <DataTemplate.Triggers>
      <DataTrigger
        Binding="{Binding RelativeSource={RelativeSource FindAncestor,ComboBoxItem,1}}"
        Value="{x:Null}">
        <Setter TargetName="Presenter" Property="ContentTemplate"
                Value="{StaticResource SelectionBoxTemplate}" />
      </DataTrigger>
    </DataTemplate.Triggers>
  </DataTemplate>

</Window.Resources>

...

<ComboBox
  ItemTemplate="{StaticResource CombinedTemplate}"
  ItemsSource="..."/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T09:24:36.650

将 Textblock 添加到数据模板并将其绑定或在矩形上添加 Contentpersenter 编辑：似乎我没有得到您想要完成的内容，*

# wpf - 使用 MultiConverter 进行多重绑定会产生 DependencyProperty.UnsetValue

> ID：13698812
> 
> 赞同：1
> 
> 时间：2012-12-04T08:33:01.413
> 
> 标签：wpf, xaml, datatrigger, multibinding, imultivalueconverter

我有一个清单`MyItem`。该对象表示具有某些属性的形状，例如宽度、高度和颜色。`Alpha`使用转换器，如果选择了我的对象（我不想更改不透明度），我正在尝试将填充颜色从 (255, r, g, b) 更改为 ( , r, g, *b* ) 。`Alpha`(double) 住在我的视图模型中。

我的问题是发送到转换器的两个值都设置为`DependencyProperty.UnsetValue`，无论我给它什么。如果我只指定`Path`我希望它绑定到我的视图模型，但它没有。显然，我在这里做错了什么。

**问：**我需要`Alpha`我的 viewmodel 和`MyItemColor`DataContext 的`myitem`（我假设在 MultiBinding 块内时它仍然是 DataContext）。我的`Binding`标签应该是什么样的？

## XAML

```
<DataTemplate>
  <Grid>
    <Rectangle x:Name="myitem" Width="{Binding MyItemWidth}" Height="{Binding MyItemHeight}" />
  </Grid>
  <DataTemplate.Triggers>
    <MultiDataTrigger>
      <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsSelected}" Value="False"/>
      </MultiDataTrigger.Conditions>
      <Setter TargetName="myitem" Property="Fill">
        <Setter.Value>
          <!-- Simple binding works. WHAT is the difference?
          <SolidColorBrush>
            <SolidColorBrush.Color>
              <Binding Path="Color" />
            </SolidColorBrush.Color>
          </SolidColorBrush>
          -->
          <SolidColorBrush>
            <SolidColorBrush.Color>
              <!-- Change fill color if DataContext.Scale changes -->
              <MultiBinding Converter="{StaticResource DoubleToColorConverter}">
                <!-- wrong? -->
                <Binding Path="Alpha" />
                <!-- wrong? -->
                <Binding ElementName="myitem" Path="MyItemColor" />
              </MultiBinding>
            </SolidColorBrush.Color>
          </SolidColorBrush>
        </Setter.Value>
      </Setter>
    </MultiDataTrigger>
  </DataTemplate.Triggers>
</DataTemplate> 
```

## 转换器

```
public class DoubleToColorConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType,
        object parameter, CultureInfo culture)
    {
        // values[0] == DependencyProperty.UnsetValue
        // values[1] == DependencyProperty.UnsetValue

        return null; // New color
    }

    public object[] ConvertBack(object value, Type[] targetTypes,
        object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

## 更新

我解决了。我必须寻找父控件（包含项目）才能访问我的视图模型。**澄清这一点，为什么它是好/坏，就足以作为一个答案！**我不完全明白发生了什么:)

```
<MultiBinding Converter="{StaticResource DoubleToColorConverter}">
  <Binding ElementName="myItemsControl" Path="DataContext.Alpha"/>
  <Binding Path="Color" />
</MultiBinding> 
```

和...

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    if (values[0] == DependencyProperty.UnsetValue || values[1] == DependencyProperty.UnsetValue)
        return Colors.Transparent;
    ...
} 
```

# android - 使用片段管理器显示片段时为活动设置动画

> ID：13698818
> 
> 赞同：3
> 
> 时间：2012-12-04T08:33:32.050
> 
> 标签：android, android-fragments, android-activity, android-animation

我有一个场景，从一个活动中，点击一个按钮，我需要显示一个从右到左滑入的片段，类似地，当我按下片段时，片段滑回右侧并显示我以前的活动，其中添加了片段。

现在我的问题是片段本身的动画可以工作，但我需要通过在片段从右侧滑入时向左滑出来为活动设置动画。

尝试使用 overridePendingTransition 方法来做到这一点：

```
overridePendingTransition(R.anim.push_in_from_left, R.anim.push_out_to_left); 
```

我尝试将挂起的转换放在活动 onResume、onPause 等可用的方法中，但没有让它工作。以下是我正在使用的代码：

```
overridePendingTransition(R.anim.push_in_from_left, R.anim.push_out_to_left); 
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.setCustomAnimations(R.anim.pull_in_from_left, R.anim.push_out_to_left, R.anim.pull_in_from_left, R.anim.push_out_to_left);
transaction.add(R.id.events_holder, myFragment);
transaction.addToBackStack("myFragment");
transaction.commit(); 
```

在我开始执行片段事务之前，尝试将挂起的转换也放在单击按钮上，但也没有用。

如果有人可以提出解决此问题的方法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:51:11.843

您没有覆盖任何动画，如果您做得对，在片段中滑动不应移动活动的布局。相反，您必须将可以在 xml 中定义的动画应用于包含您的活动的布局。本质上，您将呈现您的活动滑出，片段滑入的外观。根据您正在构建的目标，在应用动画后，您可能需要实际移动（在这种情况下，应用动画实际上不会改变物理位置布局，它只会在你告诉它的地方呈现。）包含片段的布局。您不需要物理移动包含活动的布局，因为如果您为片段中的底层布局指定一个空的 onclick 侦听器，则不会发生点击。当你完成后，使用另一个 xml 动画文件将片段和 Activity 布局滑回原来的样子（因此是相反的动画），然后将片段物理地移回原处，否则它仍然会接收所有点击事件。（如果您的目标是新的 sdk，我相信这个问题已经得到解决）

动画 xml 看起来像这样

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="100%p" android:toXDelta="0" android:duration="300"/>
</set> 
```

# redis - 如何使用 ServiceStack Redis 客户端获取多个 HashSet

> ID：13698819
> 
> 赞同：1
> 
> 时间：2012-12-04T08:33:34.783
> 
> 标签：redis, servicestack

我想获得多个哈希集。有

```
public HashSet<string> GetAllItemsFromSet (string setId){ ....} 
```

我需要

```
public HashSet<string>[] GetAllItemsFromSets (string[] setIds) 
```

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:51:37.930

RedisClient 上不存在 API，并且此任务没有特定的 Redis 服务器操作，因此您必须自己添加扩展 Redis 客户端，您可以使用 Extension 方法轻松完成，例如：

```
public static class RedisClientExtensions {
   public static HashSet<string>[] GetAllItemsFromSets(this IRedisClient client, 
       string[] setIds)
   {
       return setIds.Select(x => client.GetAllItemsFromSet(x)).ToArray();
   }
} 
```

# jquery - jQuery Tablesorter - 使用 colspan 进行排序

> ID：13698823
> 
> 赞同：0
> 
> 时间：2012-12-04T08:33:54.167
> 
> 标签：jquery, tablesorter

**表格排序器和 jQuery**

我将[http://tablesorter.com/docs/](http://tablesorter.com/docs/)用于一个项目。

**信息**

我已将两个列标题合并/合并为一个。这意味着缺少第三列的一种排序。

**jsFiddle**

[http://jsfiddle.net/RqN8a/18/](http://jsfiddle.net/RqN8a/18/)

**问题**

我可以强制将最后一列的排序添加回合并/跨页标题吗？

**HTML（如果 jsFiddle 不起作用）**

```
<p>
<strong>This works</strong>
</p>

<table class="tablesorter">
<thead>
<tr>
    <th>Heading1</th>
    <th>Heading2</th>
    <th>Heading3</th>
</tr>
</thead>
<tbody>
<tr>
    <td>Data1a</td>
    <td>Data2a</td>
    <td>Data3a</td>
</tr>
    <tr>
    <td>Data1b</td>
    <td>Data2b</td>
    <td>Data3b</td>
</tr>
</tbody>
</table>

<p>
    <strong>Can this work?</strong><br>
    Another arrow should be added for sorting the "Data3" column
</p>

<table class="tablesorter">
<thead>
<tr>
    <th>Heading1</th>
    <th colspan="2">?   Heading2</th>
</tr>
</thead>
<tbody>
    <tr>
       <td>Data11</td>
       <td>Data2c</td>
       <td>Data3a</td>
    </tr>
    <tr>
        <td>Data12</td>
        <td>Data2b</td>
        <td>Data3b</td>
    </tr>
    <tr>
        <td>Data13</td>
        <td>Data2a</td>
        <td>Data3c</td>
    </tr>
</tbody>
</table> 
```

**内联 jQuery（以防 jsFiddle 不起作用）**

```
$(document).ready(function() { 
    $("table").tablesorter({ 
    }); 
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:03:53.473

据我所知，没有必要改变太多。

只需按如下方式更改您的第二个 HTML 即可实现您的愿望：-

```
<table class="tablesorter2">
    <thead>
        <tr>
            <th rowspan="2">Heading1</th>
            <th colspan="2">Heading 2 and 3</th>
        </tr>
        <tr>
            <th>Heading2</th>
            <th>Heading3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Data11</td>
            <td>Data2c</td>
            <td>Data3a</td>
        </tr>
        <tr>
            <td>Data12</td>
            <td>Data2b</td>
            <td>Data3b</td>
        </tr>
        <tr>
            <td>Data13</td>
            <td>Data2a</td>
            <td>Data3c</td>
        </tr>
    </tbody>
</table> 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/RqN8a/20/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-02-15T06:27:47.420

我实现了 tablesorter jQuery 插件以使用 colspan 对表应用排序

```
<!DOCTYPE html>
<html>
<head>
<title>jQuery Tablesorter - Sort with colspan</title>
<style type="text/css">
body {
    padding: 20px;
}

p {
    margin-bottom: 10px;
}

strong {
    font-family: Arial;
    font-size: 18px;
}

table {
    border: 1px solid #ccc;
    font-family: Arial;
    margin-bottom: 20px;
}

td, th {
    background: #eee;
    border: 1px solid #ccc;
    padding: 10px;
}

th {
    background: #fff;
    color: #555;
    padding: 10px 30px;
}

th:hover {
    cursor: pointer;
}

</style>
</head>
<body>

<h1>jQuery Tablesorter - Sort with colspan</h1>

    <table class="tablesorter">
        <thead>
            <tr>
                <th rowspan="2">Heading1</th>
                <th colspan="2">Heading 2 and 3</th>
            </tr>
            <tr>
                <th>Heading2</th>
                <th>Heading3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Data11</td>
                <td>Data2c</td>
                <td>Data3a</td>
            </tr>
            <tr>
                <td>Data12</td>
                <td>Data2b</td>
                <td>Data3b</td>
            </tr>
            <tr>
                <td>Data13</td>
                <td>Data2a</td>
                <td>Data3c</td>
            </tr>
        </tbody>
    </table>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js" ></script>

<script type="text/javascript">
$(document).ready(function() { 
    $(".tablesorter").tablesorter({ 
    }); 

});
</script>
</html>
```

这是设置的参考链接[https://shinerweb.com/how-to-sort-table-columns-with-colspan-by-clicking-on-the-header-using-jquery/](https://shinerweb.com/how-to-sort-table-columns-with-colspan-by-clicking-on-the-header-using-jquery/)

# c# - 如何在 C# 中访问 SOAP HEADER

> ID：13698829
> 
> 赞同：0
> 
> 时间：2012-12-04T08:34:09.620
> 
> 标签：c#, soap, asmx

如何将 SOAP 标头访问到一个类中。场景：SOAP 请求从客户端发送到 Web 服务。

```
[SoapHeader("transactionInfo", Direction = SoapHeaderDirection.In)]
public byte[] method1(DocumentInfo templateInfo,System.Xml.XmlDocument xml,string Name)
{"code to get the tags in soap header"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:49:51.967

如果您的代码工作正常，您会发现在您的类`transactionInfo`中定义了一个名为的字段。`WebService`该字段将包含反序列化形式的 SOAP 标头。

我从来没有这样做过，但我怀疑如果该`transactionInfo`字段是 type `XmlElement`，那么您将能够以 XML 的形式访问它。否则，您将能够将其作为 C# 对象进行访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:20:36.143

1 - 定义您的自定义 SoapHeader

```
 public class transactionInfo: System.Web.Services.Protocols.SoapHeader
  {
    public string  Info;
  } 
```

2 - 在您的网络服务中定义您的标头

```
[WebService(Namespace = "http://..")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
 public class MyWebService : System.Web.Services.WebService
{
    public transactionInfo Header  { get; set; }
    ... 
```

3 - 在您的 Web 服务中定义一个使用此 SoapHeader 的方法

```
 [SoapHeader("transactionInfo", Direction = SoapHeaderDirection.InOut)]
    public void MyMethod()
    {
    } 
```

*[这是您问题的答案]*
**4 - 使用属性从方法 MyMethod 访问标头的值**

```
 if (Header.Info == "none")... 
```

# android - Android 使用 AsyncTask 和串行执行器下载文件并调用 onActivityResult 问题

> ID：13698831
> 
> 赞同：0
> 
> 时间：2012-12-04T08:34:19.013
> 
> 标签：android, android-asynctask, download, android-install-apk

我有一个大问题。首先，我有一个项目列表。当用户点击每个项目时，我的应用程序开始从互联网下载文件。我已经用 AsyncTask 串行执行器实现了这个。下载文件完成后，当应用程序安装成功时，我的应用程序立即开始运行 Android Installer。我想将设备的信息发送到服务器

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file),"application/vnd.android.package-archive");
activity.startActivityForResult(intent, 1); 
```

MainActivity.java

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1) {
        List<PackageInfo> packs = this.getPackageManager()
                .getInstalledPackages(0);
        for (int i = 0; i < packs.size(); i++) {
            PackageInfo p = packs.get(i);
            if (InstalledPackageName != null
                    && InstalledPackageName.equals(p.packageName)) {
           //file install success 
                QstoreRestClient rest = new QstoreRestClient(this,
                        "Please wait...");
                SecurityInstallManager secure = new SecurityInstallManager();
                String strDeviceID = getUniqueDeviceId();
                String strProductID = InstalledPackageID;
                String strToken = mToken;
                String strModel = getModelDevice();
                Log.d("QSTORE mUserName", mUserName);
                Log.d("QSTORE strProductID", strProductID);
                Log.d("QSTORE strDeviceID", strDeviceID);
                Log.d("QSTORE strToken", strToken);
                Log.d("QSTORE strModel", strModel);
                String strSHA = secure.getSHAHighscore(mUserName,
                        strDeviceID, strProductID, strToken);
                rest.installShowLoading(mUserName, strProductID,
                        strDeviceID, strSHA, strModel, this);
                Log.d("QSTORE", "Already Installed");
                // return;
            }
        }
        // }

        InstalledPackageName = null;
        InstalledPackageID = null;
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

我的问题：您可以看到文件下载何时完成，我的应用程序在新活动中运行 Android 安装程序并将结果发送回主活动（调用 OnActivityResult()）这里的问题，如果用户下载 5 个文件，我的应用程序运行 5 个新的用于安装新应用程序的活动，因此每个子活动的结果不能发送回主活动。我想知道有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:39:02.223

完成文件下载后，将文件添加到队列中。然后检查队列中的项目数是否大于 1。如果大于 1，则不采取任何措施。如果等于 1，则开始安装。现在，安装成功后，您从队列中删除条目。然后再次检查，看看队列中是否还有其他项目。然后遵循同样的逻辑。

# rpm - RPM-Build - 如何在客户端安装 rpm 时打印错误消息

> ID：13698832
> 
> 赞同：2
> 
> 时间：2012-12-04T08:34:19.087
> 
> 标签：rpm, rpmbuild, rpm-spec, sharpmap

我的要求是，如果 rpm 安装在任何情况下在客户端机器上失败，我想在屏幕上打印一些消息。或者由于任何生成的原因，在屏幕上显示消息，如 rpm 安装失败。就像其他标准 rpm 给出的那样。

而且我没有在我的 .spec 文件中制作任何 c 文件或 make 命令。我在规范文件本身中所做的一切。请建议如何使用规范文件在客户端控制台中打印这种类型的东西。

* * *

**是的，这不是我关心的——测试我只给出了示例。我的 excet 要求低于规范文件内容。**

```
#Pre-Uninstall section

%preun
Processes=`ps -Ao"%p:%a"  --cols 150 |
 egrep "Launcher|rmiregistry" | grep -v grep | cut -d ":" -f1`
         if [ -n "$Processes" ]; then
                echo 'xyz is running ,first stop it then uninstall.' > /dev/stderr;
                exit 1;
         else
                 echo 'xyz service is not running' >/dev/stdout;
         fi 
```

然后我尝试使用命令卸载 rpm

```
rpm -ev xyz 
```

输出：这两条消息都是根据服务状态打印的。我想如果客户端使用选项-v卸载然后它会在屏幕上显示消息，否则不会。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:59:07.517

打印到`STDERR`将始终显示给客户。`STDOUT`如果它们使用详细选项安装，则会显示。

```
echo 'Something may be wrong!' > /dev/stderr 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T08:48:49.577

您可以定义`%pre`、`%post`和`%preun`部分`%postun`。他们将包的当前安装数量作为参数。见[这里](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch09s04s05.html)。

RPM 手册的相应部分详细介绍了这些脚本。本质上，脚本在执行之前被写入文件，然后运行。

# android - Android sdk 管理器未获取其他 sdk 平台

> ID：13698839
> 
> 赞同：40
> 
> 时间：2012-12-04T08:34:42.340
> 
> 标签：android

我下载了`SDK ADT`适用于 Windows 的捆绑包，一切正常，但`Android SDK Manager`显示错误

> 获取 URL [https://dl-ssl.google.com/android/repository/repository-7.xml](https://dl-ssl.google.com/android/repository/repository-7.xml)失败，原因： SSLPeerUnverified peer not authenticated

因为我想安装其他安卓平台。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-04T09:06:41.707

尝试使用“http”而不是“https”。转到`Android SDK Manager -> Tools -> Options...`并检查`"Force https://... sources to be fetched using http://..."`。

![在此处输入图像描述](../Images/0137186904f0e565cde444d26361a9ce.png)

此外，您可以设置代理设置（如果有）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-25T10:15:36.203

在 Mac OS X 中，解决方案是在我们的用户 .android 文件夹中创建文件 androidtool.cfg，然后添加这一行。当然它也适用于 Linux

**sdkman.force.http=true**

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-27T17:39:19.043

打开终端并输入：

```
root@gl:/etc/ssl/certs/java# keytool -list -keystore cacerts
Enter keystore password: [your pass]

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 0 entries 
```

注意：密钥库的默认密码是“changeit”。修复：要使用所有受信任的 CA 证书正确构建密钥库，请运行以下命令：

```
root@gl:~# rm /etc/ssl/certs/java/cacerts
root@gl:~# /var/lib/dpkg/info/ca-certificates-java.postinst configure 
```

您应该会看到一长串添加的证书 (*.pem)，最后是“完成”。问题解决了。

[在这里](https://justus.berlin/2015/01/connection-problems-with-ssltls-peers-in-java-on-ubuntu-server-14-12-with-fix/)找到这个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-03T20:06:10.703

这似乎是带有 Java CACerts 密钥库的 Ubuntu（可能是其他基于 Debian 的发行版）上的问题。由于某种原因，这并不总是包括完整的条目列表。

要解决此问题，请尝试以下操作：

*   删除 cacerts 文件

    `sudo rm /etc/ssl/certs/java/cacerts`

*   使用 dpkg 安装后脚本重新构建 cacerts 文件：

    `sudo /var/lib/dpkg/info/ca-certificates-java.postinst configure`

这应该会重新生成 cacerts 文件，并且问题应该得到解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T02:35:27.663

如果强制 http 不起作用（例如在我的情况下），请尝试在选项菜单中清除或取消选中 Manifest Cache。这为我解决了

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-05T03:36:57.670

我是来自中国的用户。**强制使用 http**对我不起作用。

我在 SDK Tool 的选项中设置了**代理**，这出乎意料地起作用了！！实际上我已经在 Internet 选项中设置了代理。这不是单独工作的。

所以我现在对中国用户的解决方案如下（仅限Windows，Mac用户请尝试自己的方式）：

1.  **在Internet 选项**中设置代理
***   为 Android SDK Manager 设置代理。工具——选项——代理设置。**

 **---------------------------一些抱怨的分界线------ -----

所有这些事情都太令人沮丧了……

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-12T18:16:51.950

如果你在 Mac osx 上，你仍然得到错误。**只需**从系统偏好设置中禁用您的代理设置，然后通过上述方式之一在 SDK 管理器中设置代理。重新启动您的 SDK 管理器，它会要求您提供代理凭据。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-16T18:32:19.190

我今天遇到了同样的问题，安装最后一个JDK并将de环境变量JAVA_HOME和JDK_HOME设置为C：\ Program Files \ Java \ jdk1.8.0_92（这是最后一个JDK的安装路径）并更改PATH的JDK段解决了问题

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-19T12:47:58.993

在 Linux 上，您可以使用以下方法修复它：

```
 ./android update sdk --no-ui -s 
```

您还将获得以下提示：

```
 ./android update sdk --help

inmyfree@INMYFREE:/usr/local/bin/android-sdk-linux/tools$ sudo ./android update sdk --help
Error: Flag '--help' is not valid for 'update sdk'.

       Usage:
       android [global options] update sdk [action options]
       Global options:
  -s --silent     : Silent mode, shows errors only.
  -v --verbose    : Verbose mode, shows errors, warnings and all messages.
     --clear-cache: Clear the SDK Manager repository manifest cache.
  -h --help       : Help on a specific command.

                     Action "update sdk":
  Updates the SDK by suggesting new platforms to install if available.
Options:
  -f --force     : Forces replacement of a package or its parts, even if
                   something has been modified.
  -n --dry-mode  : Simulates the update but does not download or install
                   anything.
     --proxy-host: HTTP/HTTPS proxy host (overrides settings if defined)
  -s --no-https  : Uses HTTP instead of HTTPS (the default) for downloads.
  -t --filter    : A filter that limits the update to the specified types of
                   packages in the form of a comma-separated list of
                   [platform, system-image, tool, platform-tool, doc, sample,
                   source]. This also accepts the identifiers returned by
                   'list sdk --extended'.
  -u --no-ui     : Updates from command-line (does not display the GUI)
     --proxy-port: HTTP/HTTPS proxy port (overrides settings if defined)
  -p --obsolete  : Deprecated. Please use --all instead.
  -a --all       : Includes all packages (such as obsolete and non-dependent
                   ones.) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-30T19:39:03.453

我在 Ubuntu 和 OpenJDK 上遇到了同样的问题，“Force [...] http”的解决方法对我有用，但我认为从安全角度来看这不是最好的解决方案，所以我寻找另一种方法来解决它：

问题是，不知何故，Java 密钥库中缺少 Google 的颁发 CA 证书，这对 SSL 连接很重要。

要解决此问题，首先从 Google 网站[https://pki.google.com](https://pki.google.com)下载 Google 的颁发 CA 证书， 然后打开终端并移动到 /etc/ssl/certs/java

```
cd /etc/ssl/certs/java/ 
```

在这个位置是 Java 密钥库。该文件称为“cacerts”。现在您必须使用此命令将先前下载的证书添加到密钥库

```
sudo keytool -import -alias googleCA -file /yourdownloadlocation/GIAG2.crt -keystore cacerts 
```

如果您之前没有更改过密码，则密钥库的标准密码是“changeit”。添加证书后，您应该能够使用 https 来获取文件。**

# c# - 从 CSHTML 生成 RESX 文件

> ID：13698844
> 
> 赞同：1
> 
> 时间：2012-12-04T08:35:08.887
> 
> 标签：c#, .net, asp.net-mvc-3, visual-studio, resources

可以从 MVC3 或 MVC4 中的 CSHTML 文件自动创建 RESX 文件吗？
我想获取cshtml中所有硬核文本的资源文件

我使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:37:54.673

您可以使用 ASP.NET MVC 中的自定义模板生成资源文件和本地化视图。

### 覆盖 ASP.NET MVC 自定义模板

**Add View**对话框在后台使用 T4 模板执行代码生成。可以修改这些模板以自定义从这些工具生成的代码。您还可以添加自定义模板。

基本上，您必须将默认模板复制到您的项目中。这是路径：

`[Visual Studio Install Directory]\Common7\IDE\ItemTemplates\ [CSharp | VisualBasic]\Web\MVC\CodeTemplates\`

复制模板后，您可以复制现有模板并对其进行更改以生成适合您需要的 .resx 文件。我写了一篇关于它的文章，你可以在这里找到它：

[ASP.NET MVC 本地化：使用自定义模板生成资源文件和本地化视图](http://www.codeproject.com/Articles/233898/ASP-NET-MVC-Localization-Generate-resource-files-a)

# iphone - 基于位置的应用程序在模拟器中运行良好，在设备上挂起

> ID：13698845
> 
> 赞同：1
> 
> 时间：2012-12-04T08:35:10.773
> 
> 标签：iphone, ios, xcode

我开发了一个基于位置的 iphone 应用程序，它可以在模拟器中完美运行，但是当我使用我的设备 UDID 制作 IPA 文件并将其安装在该特定设备上时，它只显示启动屏幕然后停止工作，并给出以下日志：

```
12/3/12 10:25:39.000 PM kernel: IsPacketAllowedForFlow:IPAFF: Not enough tokens in queue 0 with head size 4216 Available 3334
12/3/12 10:25:39.000 PM kernel: CheckAndSendPacketFromIndex: No space pended

[message repeated many times]

12/3/12 10:25:40.000 PM kernel: 12000 Available 8486 
```

日志文件足够长，我无法在此处发布，但这是该文件的另一部分，我也可以在其中看到：

```
12/3/12 10:54:16.000 PM kernel: TransmitPacketsTask:Acquired Terminate semaphore with status = 0
12/3/12 10:54:16.000 PM kernel: /Users/rdd2/Project/Banglalion/mac/bcsRelease/Rel-6.1.3.4/Driver/BeceemAppleWiMAXAdapter/Sources/BeceemAppleWiMAXAdapter.cpp:getMaxPacketSize:2209:returning max size =7ee ===>
12/3/12 10:54:16.000 PM kernel: initialPowerStateForDomainState===> powerStateWillChangeTo():  
12/3/12 10:54:16.000 PM kernel:  
12/3/12 10:54:16.000 PM kernel: createNetworkInterface: <=====
12/3/12 10:54:16.000 PM kernel: initForPM: =====>
12/3/12 10:54:16.000 PM kernel: initForPM: <=====
12/3/12 10:54:16.000 PM kernel: ===> setPowerState() powerStateOrdinal : 0x1  
12/3/12 10:54:16.000 PM kernel:  
12/3/12 10:54:16.000 PM kernel: Got sleep/wake notice.  Message type was e0000340
12/3/12 10:54:16.000 PM kernel: ===> powerStateDidChangeTo(): 
```

我完全被困在这里 6-7 天，我不知道出了什么问题。

# python - 在 Django 的 request_finished 回调中访问 HttpRequest 对象

> ID：13698846
> 
> 赞同：1
> 
> 时间：2012-12-04T08:35:14.627
> 
> 标签：python, django, django-signals

我试图在**特定**视图完成将响应对象发送给用户后调用函数 - 因此用户不必等待函数执行。

我正在尝试使用 Django Signals Framework 的 request_finished 但我不知道如何访问 Django 信号发送给我的回调的 kwargs 中的 HttpRequest 对象。

看起来 Signal 对象不包含有关请求的任何有用信息。

另外，这是在请求-响应周期之外执行功能的最佳方式吗？我现在不想使用像 Celery 这样的高级解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:24:23.887

该信号不会像您认为的那样做。从[处理程序代码](https://github.com/django/django/blob/master/django/core/handlers/wsgi.py#L257)中可以看出，在处理`request_finished`请求时发送信号，但在将响应返回给用户之前。因此，在用户看到任何响应之前，您添加到该信号的任何内容仍然会发生。

由于 Web 服务器的工作方式，在响应返回给用户后无法运行代码。真的，唯一要做的就是使用像 Celery 这样的东西——你*可以*敲出你自己的版本，使用 db 表模拟任务队列，然后让一个 cron 作业从表中提取项目，但这会很多更容易使用芹菜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T02:15:30.510

hendrix 的 crosstown_traffic API 使用 Twisted 为 Django 提供服务，专门设计用于将逻辑延迟到响应通过线路发送到客户端之后立即执行。

[http://hendrix.readthedocs.org/en/latest/crosstown_traffic/](http://hendrix.readthedocs.org/en/latest/crosstown_traffic/)

# ruby-on-rails - 如果没有 current_user，则返回 nil

> ID：13698848
> 
> 赞同：1
> 
> 时间：2012-12-04T08:35:22.163
> 
> 标签：ruby-on-rails, scope, pusher

我的 Rails 应用程序中有以下范围，用于`Choices`从基于`current_user`. 这工作得很好，但如果没有`current_user`代码`Choices`在数据库中获取所有的。在这里，我只希望它什么也得不到。

```
scope :active,  lambda{|user| user ? { :conditions => ["deliverydate = ? and user_id = ?", Date.tomorrow, user.id], :order => 'id DESC'} : {} } 
```

如果没有，我该如何重写上面的内容以不返回任何内容`current_user`？

问题是我正在使用[Pusher](http://pusher.com/)将新数据推送到网站，但是如果用户会话过期，那么所有数据都会被推送而不是什么都没有......希望这是有道理的 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:01:41.250

由于作用域返回一个`ActiveRecord::Relation`实例，因此返回空对象会更正确，`ActiveRecord::Relation`就像[这里](https://stackoverflow.com/questions/4877931/how-to-return-an-empty-activerecord-relation)描述的那样。

因此，您必须添加可以解决`:none`问题的范围：

```
scope :none, limit(0) 
```

然后在您的范围内使用它，例如：

```
scope :active, ->(user = nil) { user ? { :conditions => ["deliverydate = ? and user_id = ?", Date.tomorrow, user.id], :order => 'id DESC'} : none } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T08:44:39.420

那是因为空的hash( `{}`)没有条件，基本上就是返回所有的行。

根据您的代码的结构方式，您可以创建一个类似于 的条件`:id => -1`，`:id => nil`或者`1=0`总是这样的条件，`false`因此它不会返回任何行。

（正如您在问题下方的评论中提到的那样，范围不应返回 nil，因为它不能被链接。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T08:49:25.543

```
scope :active,  lambda{|user| user ? { :conditions => ["deliverydate = ? and user_id = ?", Date.tomorrow, user.id], :order => 'id DESC'} : nil } 
```

# html - 如何在 div 中禁用 div 或 jstree？

> ID：13698856
> 
> 赞同：0
> 
> 时间：2012-12-04T08:35:48.187
> 
> 标签：html

谁能告诉我如何禁用 div 或 div 内的元素？我的 div 中有一个 jstree，我想禁用 div/jstree。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:02:12.463

[我在这里](http://jsfiddle.net/Lyvfz/13/)为您做了一个简单的示例
基本上，它会在您的 jstree 上创建一个 div，以便从用户交互中禁用它。
我想你可以让它在视觉上更好，但我认为这给了你这个想法。
我还检查了没有严格的方法来禁用 jstree，即使它可能有用。
也许你想问谷歌组的开发人员......

HTML 代码：

```
<button id="disable">Disable</button>
<button id="enable">Enable</button>
<div id="jstree-wrapper">
    <div id="demo" style="height:100px;">
        <ul>
            <li id="node_1_id">
                <a>Root node 1</a>
                <ul>
                    <li id="child_node_1_id">
                     <a>Child node 1</a>
                 </li>
                 <li id="child_node_2_id">
                     <a>Child node 2</a>
                 </li>
             </ul>
         </li>

     </ul>
     <ul>
                    <li><a>Team A's Projects</a>
                        <ul>
                        <li><a>Iteration 1</a>
                            <ul>
                                <li><a>Story A</a></li>
                                <li><a>Story B</a></li>
                                <li><a>Story C</a></li>
                            </ul>
                            </li>
                        <li><a>Iteration 2</a>
                        <ul>
                            <li><a>Story D</a></li>
                              </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
    </div>

    <div id="disabler"></div>
</div>​ 
```

CSS 代码：

```
#jstree-wrapper {
    position: relative;
}

#disabler {
    position: absolute;
    top: 0px;
    left: 0px;
    background-color: black;
    opacity: 0.5;
}​ 
```

JS代码：

```
$(document).ready(function() {

    $("#demo").jstree();

    $("#disable").on("click", function() {
        $("#disabler").css("width", $("#demo").width());
        $("#disabler").css("height", $("#demo").height());
    });

    $("#enable").on("click", function() {
        $("#disabler").css("width", "0px");
        $("#disabler").css("height", "0px");
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-12T12:57:52.390

这是一个很好的例子，我没有发现在其他任何地方都做得如此简单和好。在此示例中，您只能通过添加我在代码片段中输入的 CSS 样式来模拟“禁用”属性。它通过使用 CSS "visible:hidden" 禁用，并添加一个半透明蒙版来覆盖整个 div 区域并禁用其中的任何内容。您可以选择注释掉“可见性：隐藏”以便能够看到掩码后面的元素，但是它们将是可选项的，如果您不介意隐藏它们，请取消注释该样式。

```
function disable(elementId, enabling) {

  el = document.getElementById(elementId);

  if (enabling) {
    el.classList.remove("masked");
  } else

  {
    el.classList.add("masked");
  }
}
```

```
.masked {
  position: relative;
  pointer-events: none;
  display: inline-block;
  //visibility:hidden; /* Uncomment this for complete disabling  */
}
.masked::before {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0px;
  left: 0px;
  visibility: visible;
  opacity: 0.2;
  background-color: black;
  content: "";
}
```

```
<button onclick="alert('Now, click \'OK\' then \'Tab\' key to focus next button.\nThen click \'Enter\' to activate it.');">Test</button>
<div id="div1" style="display:inline-block" class="masked">
  <button onclick="alert('Sample button was clicked.')">Maskakable</button>
  <button onclick="alert('Sample button was clicked.')">Maskakable</button><br/>
  <br/>
  <button onclick="alert('Sample button was clicked.')">Maskakable</button>
  <button onclick="alert('Sample button was clicked.')">Maskakable</button>
</div>
<button>Dummy</button>

<br/>
<br/>
<br/>
<button id="enableBtn" onclick="disable('div1',true);disable('enableBtn',false);disable('disableBtn',true);">Enable</button>
<button id="disableBtn" onclick="disable('div1',false);disable('enableBtn',true);disable('disableBtn',false);"  class="masked">Disable</button>
```

# ajax - 如何使用ajax重新加载网页的一部分

> ID：13698862
> 
> 赞同：0
> 
> 时间：2012-12-04T08:36:06.537
> 
> 标签：ajax, reload

上传图片后，我正在尝试刷新网页的图片部分。

却得不到成功。

我需要你的帮助。

请帮助我使用 ajax 重新加载网页。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:10:29.320

此代码显示警报 - 加载图像之前和加载图像之后。您可以使用它随时随地处理您的数据。

`$(document).ready(function(){`

 ````
 function imageLoaded() {
    // function to invoke for loaded image
       alert("image loaded......");
    }
    $('img').each(function() {
      alert("image loading......");
      if( this.complete ) {
         imageLoaded.call( this );
      } else {
         $(this).one('load', imageLoaded);
      }
     }); 
```` 

`});`

# c++ - 如何制作全双工c++winsock聊天程序

> ID：13698871
> 
> 赞同：1
> 
> 时间：2012-12-04T08:36:59.633
> 
> 标签：c++, winsock2

我正在尝试用 C++ 制作一个简单的客户端-服务器聊天程序。我写了这个，但我的问题是我只能将数据从服务器发送到客户端。我想进行全双工通信，并将数据从客户端发送到服务器。

这是我的代码。

服务器 ：

```
#include "stdafx.h"
#include <WinSock2.h>
#include <winsock.h>
#include <stdio.h>
#include <iostream>
#include <string>
#define RCVBUFSIZE 32
using namespace std;

#pragma comment(lib, "Ws2_32.lib")

int main()
{
    WSADATA wsadat;
    SOCKET welcome_socket = INVALID_SOCKET;
    string IpAddress;
    int PortNom;
    SOCKADDR_IN SockAddress;

    //-----------------------------------------------
if (WSAStartup(MAKEWORD(2,2),&wsadat) !=NO_ERROR)
{
    cout << "WSA intialization failed. \n";
    WSACleanup();
    return 1;
}
//------------------------------------------------
welcome_socket = socket(AF_INET , SOCK_STREAM , 0);

//--------------------------------------------------
cout << "Enter your ip address: ";
cin >> IpAddress;

cout << "Enter your port nomber:";
cin >> PortNom;

//---------------------------------------------------

SockAddress.sin_addr.s_addr = inet_addr (IpAddress.c_str());
SockAddress.sin_port = htons(PortNom);
SockAddress.sin_family = AF_INET;

//---------------------------------------------------

bind(welcome_socket,(SOCKADDR *)&SockAddress,sizeof(SockAddress));
listen(welcome_socket,1);

//----------------------------------------------------

SOCKET Comm_sock;
SOCKADDR_IN ClientAddr;
int AddressLen = sizeof (ClientAddr);
char *buffer = new char[13];

int turn= 0;
char* buf = new char[50];
char temp;
while (true)
{
    Comm_sock = accept(welcome_socket,(SOCKADDR *)&ClientAddr , &AddressLen);
    while (buf != "exit")
    {
        if (turn == 0)
        {
            cout << endl;
            recv(Comm_sock,buf,50,0);

            if(buf[0]=='e' && buf[1]=='x' && buf[2]=='i' && buf[3]=='t')
                return 0;

            cout << "MsG from client :"<< buf << endl;
            cin.get(temp);
            turn = 1;
        }
        if  (turn == 1)
        {
            cout << "Enter MsG:";
            cin.get(buf,50);
            if (buf[0]=='e' && buf[1]=='x' && buf[2]=='i' && buf[3]=='t')
                return 0;
                send(Comm_sock,buf,strlen(buf)+1,0);
                cin.get(temp);
            turn=0; 
        }
    }
} 
```

和客户：

```
#include "stdafx.h"
#include <winsock2.h>
#include <Ws2tcpip.h>
#include <stdio.h>
#include <iostream>

using namespace std;
// Link with ws2_32.lib
#pragma comment(lib, "Ws2_32.lib")

#define DEFAULT_BUFLEN 512
#define DEFAULT_PORT "12345"

//-------------------------------------
int main ()
{
    WSADATA wsadata;
    int iResult;

    SOCKET ConnectSocket = INVALID_SOCKET;
    struct sockaddr_in clientservice;

    char *sendbuf ="";
    char recvbuf[DEFAULT_BUFLEN];
    char sendbuffer[512];
    int recvbuflen = DEFAULT_BUFLEN;
    int sendbuflen = 512;

//----------------------------------

iResult = WSAStartup(MAKEWORD(2,2),&wsadata);

//----------------------------------

ConnectSocket = socket(AF_INET,SOCK_STREAM , IPPROTO_TCP);

//-----------------------------------

clientservice.sin_family = AF_INET;
clientservice.sin_addr.s_addr = inet_addr( "127.0.0.1" );
    clientservice.sin_port = htons( 11111 );

 //-----------------------------------

iResult = connect (ConnectSocket,(SOCKADDR *)&clientservice      ,sizeof(clientservice));
iResult = send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );
cout << "bytes Sent:" << iResult << "\n";

//-------------------------------------

iResult = shutdown(ConnectSocket ,SD_SEND);
    if (iResult == SOCKET_ERROR) 
{
    printf("shutdown failed: %d\n", WSAGetLastError());
    closesocket(ConnectSocket);
    WSACleanup();
    return 1;
}

    do {
        string reciev;
        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);
         recvbuf[iResult]= 0 ;
         cout << recvbuf << endl;

    } while(true);

 //------------------------------------------
    closesocket(ConnectSocket);
    WSACleanup();
} 
```

# rest - REST 服务的 Spring Security 自定义身份验证

> ID：13698872
> 
> 赞同：1
> 
> 时间：2012-12-04T08:37:06.940
> 
> 标签：rest, spring-security

我有一个需要与 Spring 安全性集成的第三方 REST 服务。

REST 服务将登录名和密码作为 JSON 消息的一部分发送，如下所示：

```
{
    "user":"foo",
    "pwd":"bar",
    "employees": [
        { "firstName":"John" , "lastName":"Doe" },
        { "firstName":"Anna" , "lastName":"Smith" },
        { "firstName":"Peter" , "lastName":"Jones" }
    ]
} 
```

我认为我需要做一个自定义过滤器来处理 JSON 消息并登录到应用程序，但是我迷失了配置。

我需要在这个自定义过滤器中实现哪个接口？

有类似场景的示例吗？

# php - PHP，在字符串（变量）中找到字符串后返回一组字符

> ID：13698876
> 
> 赞同：0
> 
> 时间：2012-12-04T08:37:37.610
> 
> 标签：php, string, piping

我正在尝试从电子邮件管道中获取详细信息。管道将 $message 变量返回给我，其中包含分配的数据。我希望能够在字符串中搜索特定值并返回下一个“x”个字符。

例如，我的变量`$message`包含以下字符串：

```
Arrived at Inbound Receiving occurred

on M03-Actros 33.50 (1231) (MX1) (LT) 1022 on 2012-12-03

16:36:04

               * Driver ID: person, RT (1231) 

                * Vehicle Desc: M03-Actros 33.50 (1234) (MX1) (LT) 

                * Vehicle ID: 1022 

                * Time Stamp: 2012-12-03 16:36:04 

                * Latitude: S31 11.870' 

                * Longitude: E031 44.555' 

                * Speed: 7 km/h 

                * Heading: 356 deg (N) 

                * Event ID: -48 

                * Event Desc: .Arrived at Inbound Receiving 

                * Event Value: -56

                * Event Value Type: 0 
```

然后我想过滤掉事件描述。所以搜索`$message`字符串“事件描述：”，然后返回该行的剩余数据。所以从上面的例子中，我想将变量'$event'的值设置为'.Arrived at Inbound Receiving'

我知道我必须使用

```
if (strstr($subject, 'Event Desc: ')) {

} 
```

但我不确定如何返回行上的剩余数据，因为数据的长度可能会有所不同。

一如既往地感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:40:13.703

我建议这样做：

```
$event = null;
$lines = explode(PHP_EOL, $message);
foreach($lines as $line) {
  // skip empty lines
  if(strlen($line) == 0) {
    continue;
  }
  $tokens = explode(':', $line);
  // tokens[0] contains the key , e.g. Event Value
  // tokens[1]~[N] contains the value (where N is the number of pieces), e.g. -56
  // stitch token 1 ~ N
  $key = $tokens[0]; 
  unset($tokens[0]);
  $val = implode(':', $tokens);
  // do your extra logic here, e.g. set $event variable to value
  if(strpos($key, 'Event Desc') > -1) {
    $event = $val;
  }
} 
```

限制：您的数据不能包含`:`

# java - java准备好的语句

> ID：13698883
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:38:09.357
> 
> 标签：java, sql, jdbc, prepared-statement

我有这样的需求...

需要执行一个javaprepared statement示例：

```
String sql = "select first_name from student where roll_no :=1";
connection.prepareStatement(sql); 
```

但问题是，有时表中可能没有上述查询的行。在这种情况下，我想查询第二个表说`student2`。因此，现在的 sql 查询将是：

```
String sql2 = "select first_name from student2 where roll_no :=1"; 
```

有没有办法`table(student2)`在单个 sql 查询中实现从另一个选择的条件。

我想要这样的伪代码：

```
String sql = "if student1 table doesn't have a roll_num, then query student2 table"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:01:51.583

尽管您的设计不好，但我正在暗示实现您的要求。执行第一个查询时，只需检查是否有可用的结果集，如果没有，则执行第二个查询。

```
ResultSet rs = statement.execute();
if (!rs.next()){
//ResultSet is empty
} 
```

在 If 块中，您需要执行第二个查询。

注意：如果不可能，首先重新考虑您的设计。该解决方案有效，是蹩脚问题的蹩脚解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:44:10.713

创建您使用准备好的语句 [MySql](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html) , [Oracle](http://www.techonthenet.com/oracle/procedures.php)调用的数据库过程。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:11:26.780

我认为您可以使用例如 UNION 作为：

```
select val from (select 'A' as val from DUAL
                 union
                 select 'B' as VAL from DUAL)
where rownum = 1; 
```

但是@tbraun89 是正确的首先考虑你的数据库结构

# jquery - 带有 403 状态码的 ajax 响应上的 Phonegap BlackBerry 弹出窗口

> ID：13698884
> 
> 赞同：1
> 
> 时间：2012-12-04T08:38:12.927
> 
> 标签：jquery, ajax, api, cordova, blackberry

我正在使用 PhoneGap 构建一个应用程序，它是一个与经过身份验证的 API 通信的 jQuery。当用户未成功登录时，API 将响应状态码 403。在 Android 和 iOS 上，这可以使用 JavaScript 来处理。然而，在黑莓上，我总是得到一个“身份验证弹出窗口”。有什么办法可以禁用此弹出窗口吗？

提前致谢！

# php - PHP从生日多个字段创建一个新变量

> ID：13698889
> 
> 赞同：0
> 
> 时间：2012-12-04T08:38:44.350
> 
> 标签：php, forms, date, post

我正在使用一个 PHP函数来检查多个帖子字段（例如，、、）`checkdate();`提交的日期。即使选择了字段并且日期是有效日期，该函数也会返回 false。`$_POST['month']``$_POST['day']``$_POST['year']``checkdate()`

我不明白为什么会这样？

编辑#1：实际代码的详细视图。

代码由 $_POST 提交并进入 OOP 类“新寄存器”

```
$register=new register(...., $_POST['month'], $_POST['day'], $_POST['year'],...);

$this->birthdate=$byear.'-'.$bmonth.'-'.$bday;
$this->b_month=(int)bmonth;
$this->b_day=(int)bday;
$this->b_year=(int)byear; 
```

然后检查生日

```
 public function checkBirthdate(){

        if(checkdate($this->b_month, $this->b_day, $this->b_year)){

            return true;
        } else {

            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:57:51.230

您的`register`班级需求如下所示：

```
class register
{
    protected $b_month;
    protected $b_day;
    protected $b_year;

    public function __construct(...., $month, $day, $year, ...)
    {
        $this->b_month = (int)$month;
        $this->b_day = (int)$day;
        $this->b_year = (int)$year;
    }

    public function checkBirthdate(){
        if(checkdate($this->b_month, $this->b_day, $this->b_year)){
            return true;
        } else {
            return false;
        }
    }
}

// usage example
$r = new register(...., $_POST['month'], $_POST['day'], $_POST['year'],...);
echo $r->checkBirthdate() ? 'Valid!' : 'Not Valid!'; 
```

根据您问题中的代码，您创建寄存器对象，然后将,`b_month`分配给其他对象。`b_day``b_year`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:05:14.207

你应该做这样的事情

```
class Register {
 private $b_year;
 private $b_day;
 private $b_year;

public function __construct( $month,$day,$year )
{
 $this->b_year = $year;
 $this->b_month = $month;
 $this->b_day;
}

public function checkValidDate()
{
  if( checkdate($this->b_month,$this->b_day,$this->b_year) ) return true;
  return false

}

}

if( !isset( $_POST ) ) {  
<form action="" type="POST">
Month: <select name="month">
<option value="1">January</option>
<option value="2">February</option>
so on...so forth..
</select>

Day: <select name="day">
Day<option value="1">1</option>
<option value="2">2</option>
so on...so forth..
</select>

Year: <select name="year">
<option value="2012">2012</option>
<option value="2011">2011</option>
so on...so forth..
</select>
<input type="submit" value="Submit" />
</form>
} else {
$register=new register($_POST['month'], $_POST['day'], $_POST['year']);
    if( $register->checkValidDate() ) echo "Valid!";
    else echo "Invalid!";
} 
```

# asp.net - 我的字符串类型域对象的正则表达式属性有奇怪的行为

> ID：13698891
> 
> 赞同：3
> 
> 时间：2012-12-04T08:38:49.310
> 
> 标签：asp.net, asp.net-mvc, regex, validation, attributes

我正在开发一个带有 Razor 视图引擎的 MVC 4 ASP.NET 应用程序。我在视图中有一个名为“Title”的属性，并已将其元数据设置为：

```
[RegularExpression(@"^[\p{L}\p{N}\s\,\،\-\(\)\u200C]*$", ErrorMessage = "Some error message")]
public string Title { get; set; } 
```

在视图中，只要我开始在相应的文本框中输入任何字符，它就会显示验证消息。这是剃刀视图：

```
@Html.LabelFor(model => model.Title)
@Html.EditorFor(model => model.Title)
@Html.ValidationMessageFor(model => model.Title) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:35:18.510

客户端验证器使用 javascript，因此正则表达式需要使用特定于 javascript 的语法。

根据[regular-expressions.info](http://www.regular-expressions.info/javascript.html)，`\p{...}`不支持这些构造。

您可能可以替换`\p{L}\p{N}`为`\w`，具体取决于您的目标字符集。

# javascript - 随机获取 Li 的 Single 值并打印

> ID：13698892
> 
> 赞同：1
> 
> 时间：2012-12-04T08:38:50.790
> 
> 标签：javascript, html-lists

我在 HTML 中的 ul 元素中有一个值列表并使用 javascript，我想在 h1 中输出该列表中的随机值。我已经有一个脚本，但它输入的是 LI 的 ID 而不是值。

这是我的 HTML：

```
<div id="quotes-list">
<ul>
    <li id="One">One</li>
    <li id="Two">Two</li>
    <li id="Three">Three</li>
    <li id="Four">Four</li>
    <li id="Five">Five</li>
</ul>
</div>​

<h1 id="quoted"></h1> 
```

这是我的javascript：

```
var lis = document.getElementById("quotes-list").getElementsByTagName("li");
var countThis = Math.floor(Math.random() * lis.length);

var carToon = (lis[countThis].id);

var textElement = document.getElementById("quoted");
textElement.innerHTML = carToon; 
```

正如我所说，这是有效的，但它正在输出 LI 的 id。

我试过玩弄

```
var carToon = (lis[countThis].id); 
```

把 lis[countThis]. **文本**，但输出为“ **UNDEFINED** ”

可以在我的代码上替换什么，以便我可以在 H1 中从我的 ul 列表中输出一个随机值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:41:43.553

更改此行

```
var carToon = (lis[countThis].id); 
```

到

```
var carToon = (lis[countThis].innerHTML); 
```

# encode - Android MediaCodec：编码时如何请求关键帧

> ID：13698893
> 
> 赞同：4
> 
> 时间：2012-12-04T08:38:54.393
> 
> 标签：encode, android-4.2-jelly-bean

在Android4.1中，实时编码应用程序中经常需要一个关键帧。但是如何使用 MediaCodec 对象呢？目前的Android4.2 SDK好像不支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T12:12:40.843

您**可以**通过在输入缓冲区排队时指定 MediaCodec.BUFFER_FLAG_SYNC_FRAME 来生成随机关键帧：

```
MediaCodec codec = MediaCodec.createDecoderByType(type);
codec.configure(format, ...);
codec.start();
ByteBuffer[] inputBuffers = codec.getInputBuffers();
for (;;) {
  int inputBufferIndex = codec.dequeueInputBuffer(timeoutUs);
  if (inputBufferIndex >= 0) {
    // fill inputBuffers[inputBufferIndex] with valid data
    ...
    codec.queueInputBuffer(inputBufferIndex, 0, inputBuffers[inputBufferIndex].limit(), presentationTime,
        isKeyFrame ? MediaCodec.BUFFER_FLAG_SYNC_FRAME : 0);
  }

} 
```

偶然发现在 Galaxy Nexus 上编码视频时需要插入随机关键帧。在它上面，MediaCodec 没有在视频开始时自动生成关键帧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-24T04:44:50.593

MediaCodec 有一个方法调用`setParameters`它来救援。在 Kotlin 中，您可以这样做：

```
fun yieldKeyFrame(): Boolean {
    val param = Bundle()
    param.putInt(MediaCodec.PARAMETER_KEY_REQUEST_SYNC_FRAME, 0)
    try {
        videoEncoder.setParameters(param)
        return true
    } catch (e: IllegalStateException) {
        return false
    }
} 
```

在上面的代码片段中，这`videoEncoder`是一个配置为编码的 MediaCodec 实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T17:48:58.190

您可以在配置编码器时通过设置 KEY_I_FRAME_INTERVAL 键来请求周期性关键帧。在下面的示例中，我每两秒请求一个。为了清楚起见，我省略了帧速率或颜色格式等其他键，但您仍然希望包含它们。

```
 encoder = MediaCodec.createByCodecName(codecInfo.getName());
    MediaFormat inputFormat = MediaFormat.createVideoFormat(mimeType, width, height);

    /* ..... set various format options here ..... */
    inputFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 2);

    encoder.configure(inputFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
    encoder.start(); 
```

但是，我怀疑您真正要问的是如何在编码时请求随机关键帧，例如在过场动画开始时。不幸的是，我还没有看到这个界面。停止和重新启动编码器可能会在重新启动时创建一个新的关键帧。当我有机会尝试时，我会在这里发布结果。

我希望这可以帮到你。

Thad Phetteplace - GLACI, Inc.

# matlab - 从matlab中的结构数组中删除项目

> ID：13698895
> 
> 赞同：8
> 
> 时间：2012-12-04T08:38:58.820
> 
> 标签：matlab, structure, removeall

我在matlab中有一个非常大的结构数组。假设，为了论证，为了简化情况，我有类似的东西：

```
structure(1).name = 'a';
structure(2).name = 'b';
structure(3).name = 'c';
structure(1).returns = 1;
structure(2).returns = 2;
structure(3).returns = 3; 
```

现在假设我有一些情况出现，让我想从`structure(2)`（我的结构数组中的任何和所有条目）中删除所有内容。有什么好的方法可以做到这一点？

我的解决方案是将相应的字段设置为`[]`（例如`structure(1).name = [];`），但这不会删除它们，只会使它们为空。我如何真正从结构数组中完全删除它们？有办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T08:44:10.317

如果要删除索引处的元素很简单，`i`请执行以下操作：

```
i = 3
structure(i) = []; 
```

这将删除 index 处的元素`3`。

例子：

```
st.name = 'text';
st.id = 1524;
arrayOfSt = [st st st st st]; 
```

现在：

```
arrayOfSt = 

    1x5 struct array with fields:
        name
        id 
```

如果我们执行：

```
arrayOfSt(2) = []; 
```

那么结构器数组的新值将是：

```
arrayOfSt = 

    1x4 struct array with fields:
        name
        id 
```

尝试一下 ！

# php - 关于 PHP 缩略图 - 即时存储或生成它们

> ID：13698899
> 
> 赞同：3
> 
> 时间：2012-12-04T08:39:02.633
> 
> 标签：php, codeigniter, thumbnails

我正在制作一个需要向用户显示 3 种类型的缩略图的 Web 应用程序。不，我最终可能会在服务器上为很多用户提供大量缩略图文件。

这让我觉得动态生成缩略图比存储缩略图更好？

速度 vs 存储 vs 逻辑 - 选择哪一个？

这里有没有人遇到过这样的困境 - 让我知道！

我正在使用 CodeIgniter 及其内置的图像库来生成缩略图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T08:50:06.570

我会选择：在需要时生成，然后存储。

使用 URL 链接到图像，例如`/img/42/400x300.jpg`. *通过重写规则，如果图像不存在*，您可以启动 PHP 脚本。然后，该脚本可以生成请求大小的请求图像并将其存储在公共 Web 文件夹中，Web 服务器可以在下次直接提供它。

这为您提供了两全其美的优势：图像在需要时才生成，它只生成一次，甚至可以非常灵活地动态处理不同的图像大小。

如果您担心存储空间，您可以添加一个定期清理作业来删除旧图像，或者分析您的访问日志文件并删除一段时间未访问的图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T08:47:39.593

我的评论作为答案:(为什么不:)

我个人对此的想法是，如果您预计很多用户会使用存储，因为为每个页面加载的每个用户创建动态缩略图的负载会损害服务器，也许首先动态创建它查看它的时间，然后存储它。

您还可以利用浏览器缓存来节省负载和带宽。（微不足道，但每一点都有帮助）

# javascript - TinyMCE。添加跨度后无法继续输入

> ID：13698901
> 
> 赞同：2
> 
> 时间：2012-12-04T08:39:25.203
> 
> 标签：javascript, tinymce

我正在尝试为 TinyMCE 创建一个插件，以便用户可以为选定区域添加浮动提示。我需要的只是将选定的内容放入跨度中，我这样做：

```
var formated = 
    '<span id="tooltip_widget_' + id + '">'
    + selectedtext
    + '</span>;
ed.selection.setContent(formated); 
```

它在 Firefox 中运行良好，我可以将文本添加到 span 并继续输入。但是在 Chrome 和 IE 中，以下所有文本都进入了添加的范围。并且继续输入它的唯一方法 - 通过 html 编辑器。

我尝试在插入后包含额外的插入符占位符跨度并在其后折叠，然后删除此占位符以确保插入符将在插入的跨度之后。

但这无济于事。在 chrome 和 IE 中，如果插入符号位于跨度的末尾，它会继续在此跨度内输入。

请建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:23:35.147

解决方案可以[在这个小提琴](http://fiddle.tinymce.com/Dzcaab/18)中找到或作为代码在这里：

```
<script type="text/javascript">

function plugin_work(){

        var ed = tinymce.editors[0];
        var innerSpanId = 0;
        var node = ed.selection.getNode();

        // Get the selected contents as text and place it in the input
        if (ed.selection.getNode().className == "tooltipedurl") {

            var innerSpanId = node.id;
            if (innerSpanId != 0) {
                var innerSpanHTML = ed.dom.get('data_' + innerSpanId).innerHTML;
            }
        } else {

           var innerSpanHTML = ed.selection.getContent({format : 'html'});
        }

        var id = new Date().getTime();
        var node = ed.selection.getNode();

        if (node.className == "tooltipedurl") {
            var innerSpanId = node.id;
            if (innerSpanHTML != 0) {
                ed.dom.get('data_' + innerSpanId).innerHTML = innerSpanHTML;
            } else {
                ed.dom.remove(node);
                ed.selection.setContent(node.innerHTML);
                ed.dom.remove(ed.dom.get('data_' + innerSpanId));
                ed.focus();
            }
        } else {
            var formated =
                '<span id=\"tooltip_widget_' + id + '\" class=\"tooltipedurl\" name="tip">'
                + innerSpanHTML
                + '</span><span id="caret_placeholder_' + id + '" name="caret_placeholder">\u200b</span>';

            ed.selection.setContent(formated);

            var rng = tinymce.DOM.createRng();  // the range obj
            var $caret_placeholder = $(ed.getBody()).find ('#caret_placeholder_'+id);    // find the correct selector so that caret_placeholder is the element of your editor text
//            rng.setStart(caret_placeholder.firstChild, f.textFragment.value.length); // 0 is the offset : here it will be at the beginning of the line.
//            rng.setEnd(caret_placeholder.firstChild, f.textFragment.value.length);

//console.log(caret_placeholder);

            rng.setStartAfter($caret_placeholder.get(0));
            rng.setEndAfter($caret_placeholder.get(0));
            ed.selection.setRng(rng);

            //ed.selection.select(caret_placeholder);
            //$(caret_placeholder).html('');

            ed.focus();

            tinyMCE.activeEditor.dom.add(tinyMCE.activeEditor.getBody(), 'span', {id : 'data_tooltip_widget_' + id, style : 'display:none'}, innerSpanHTML);
            ed.onKeyUp.add(function(ed, e) {
                if ($caret_placeholder = $(ed.getBody()).find ('#caret_placeholder_'+id)) {
                    var content = $caret_placeholder.get(0).innerHTML;
                    ed.dom.remove($caret_placeholder.get(0));
                    ed.selection.setContent(content);
                }
            });
        }
}

tinymce.create('tinymce.plugins.floatingtipsPlugin', {
        init : function(ed, url) {
            // Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('mcefloatingtips');
            ed.addCommand('mcefloatingtips', function() {
                var se = ed.selection;
                // No selection and not in span
                if (se.isCollapsed() && se.getNode().className != "tooltipedurl") {
                    return;
                }

                ed.windowManager.open({
                    file : url + '/dialog.htm',
                    width : 320 + parseInt(ed.getLang('floatingtips.delta_width', 0)),
                    height : 120 + parseInt(ed.getLang('floatingtips.delta_height', 0)),
                    inline : 1
                }, {
                    plugin_url : url, // Plugin absolute URL
                    some_custom_arg : 'custom arg' // Custom argument
                });
            });

            // Register floatingtips button
            ed.addButton('floatingtips', {
                title : 'Add/Edit floating tip',
                cmd : 'mcefloatingtips',
                image : url + '/img/floating_tips.gif'
            });

            // Add a node change handler
            ed.onNodeChange.add(function(ed, cm, n) {
                var se = ed.selection;
                cm.setActive('floatingtips', se.getNode().className == "tooltipedurl");
                cm.setDisabled('floatingtips', se.isCollapsed() && se.getNode().className != "tooltipedurl");
            });

            ed.contentCSS.push(url + '/css/floatingtips.css');
        },

        createControl : function(n, cm) {
            return null;
        },

        getInfo : function() {
            return {
                longname : 'floatingtips plugin',
                author : 'Some author',
                authorurl : 'http://tinymce.moxiecode.com',
                infourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/floatingtips',
                version : "1.0"
            };
        }
    });

tinymce.PluginManager.add('floatingtips', tinymce.plugins.floatingtipsPlugin);

/**
 * 
 * Here goes dialog.js
 * What exactly my plugin does
 * 
 *  ================== GOAL =====================
 * Goal - to wrap selected text with span like this: 
 * <span class="tooltipedurl", id="tooltip_widget_" + {someuniueID}> SELECTED TEXT </span>
 * Add to the end of the editor hidden element with tooltip text like this: 
 * <span id="data_tooltip_widget_ + {someuniueID} style="display:none"> TOOLTIP TEXT </span>
 * 
  */

 /**
  * ================= ALGORITHM ==================
  * If some text selected, or if we have caret inside span with class tooltipedurl.
  * We got plugin buton - active.
  * On click we see popup form with two fields.
  * first with selected text, (it is hidden, user shouldn't be able to modify it from popup form)
  * second is the tip input(textarea filed) we load here old tip if the caret inside the span with tip.
  * 
  * if text selected:
  * we got it from the popup form {f.textFragment.value} and replace it with 
  * <span id=\"tooltip_widget_' + id + '\" class=\"tooltipedurl\" name="tip">'+ f.textFragment.value + '</span>
  * also we create hidden span in the end of editor with tip value from the form {f.newTip.value}
  * tinyMCE.activeEditor.dom.add(tinyMCE.activeEditor.getBody(), 'span', {id : 'data_tooltip_widget_' + id, style : 'display:none'}, f.newTip.value);
  * 
  * if caret inside the span which already has tooltip
  * we have in popup form current tooltip message and can edit it and put new value to the corresponding hidden span
  * ed.dom.get('data_' + innerSpanId).innerHTML = f.newTip.value;
  * 
  * if the new tip value = 0, we delete span which contains the text and delete correspondig 
  * hiden element with tooltip text
  * 
  * more detailed comments i added to the script below
  */

var ExampleDialog = {
    init : function() {
        var ed = tinyMCEPopup.editor;

        // f is a form from PopUp 
        var f = document.forms[0];

        // if selection inside the span with class tooltipedurl we will put here the id of this span
        var innerSpanId = 0;

        var node = ed.selection.getNode();

        // Get the selected contents as text and place it in the input fields if we are inside the span with class tooltipedurl
        if (ed.selection.getNode().className == "tooltipedurl") {

            var innerSpanId = node.id;
            //taking all the text to the input from the span even if only part of it was selected
            f.textFragment.value = node.innerText;
            if (innerSpanId != 0) {
                //taking current tooltip text from the corresponding hidden span
                f.newTip.value = ed.dom.get('data_' + innerSpanId).innerHTML;
            }
        } else {
            //if selected text is not in the span with class tooltipedurl we just get as html to apply tooltip later
            f.textFragment.value = ed.selection.getContent({format : 'html'});

        }
    },

    insert : function() {
        var ed = tinyMCEPopup.editor;
        var f = document.forms[0];
        var id = new Date().getTime();
        var node = ed.selection.getNode();

        //if selection is inside the span#tooltipedurl - we gonna edit tooltip text
        if (node.className == "tooltipedurl") {
            var innerSpanId = node.id;
            if (f.newTip.value != 0) {
                //If new tooltip is not 0, we replace inner html of correspondig span in the end of editor
                ed.dom.get('data_' + innerSpanId).innerHTML = f.newTip.value;
            } else {
                //If new tooltip value is 0 - we delete correspondig span in the end of editor and remove <span> tags from text
                ed.dom.remove(node);
                ed.selection.setContent(node.innerHTML);
                ed.dom.remove(ed.dom.get('data_' + innerSpanId));
            }
        } else {
            //if selection doesn't have tooltip, we place it in the tags with unique id and class tooltipedurl
            var formated =
                '<span id=\"tooltip_widget_' + id + '\" class=\"tooltipedurl\" name="tip">'
                + f.textFragment.value
                + '</span>';
            ed.selection.setContent(formated);

            /**
             * THE PROBLEM IS
             * when we add this span and user trying to continue typing.
             * in Chrome and IE all the following text goes in this new span.
             * In firefox it works OK.
             * 
             */

            //Here i am trying to put caret right after added span with dom.range
            var rng = tinymce.DOM.createRng();  // the range obj
            var caret_placeholder = ed.dom.get('tooltip_widget_' + id);   
//            rng.setStart(caret_placeholder.firstChild, f.textFragment.value.length); 
//            rng.setEnd(caret_placeholder.firstChild, f.textFragment.value.length);

            rng.setStartAfter(caret_placeholder);
            rng.setEndAfter(caret_placeholder);
            ed.selection.setRng(rng);
            //But it doesn't help...

            //creating invisible element with tooltip message in the end of the editor
            tinyMCE.activeEditor.dom.add(tinyMCE.activeEditor.getBody(), 'span', {id : 'data_tooltip_widget_' + id, style : 'display:none'}, f.newTip.value);

        }

        tinyMCEPopup.close();

    }
};

/**
 * I don't know how to include popup window from my plugin here
 * But ih has 2 fields 
 * f.textFragment.value ==> it is the selected text  (this field is hidden)
 * f.newTip.value ==> text input with the tip.
 * 
 * so when user selects some text and clicks add floating tip button. he sees the form with 1 text field and can add new tooltip or edit old one
 * 
 */

//tinyMCEPopup.onInit.add(ExampleDialog.init, ExampleDialog);

// Initialize TinyMCE with the new plugin and listbox
tinyMCE.init({
    plugins : '-example, floatingtips', // - tells TinyMCE to skip the loading of the plugin
    mode : "textareas",
    theme : "advanced",
    theme_advanced_buttons1 : "code,mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink, floatingtips",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom"
});

</script>

<form method="post" action="dump.php">
        <textarea name="content">
        test
        </textarea>
</form>
<div onclick="plugin_work();" style="cursor:pointer;background-color:green;width:70px;">Button</div> 
```

# android - 多个同步的媒体播放器

> ID：13698905
> 
> 赞同：2
> 
> 时间：2012-12-04T08:39:53.017
> 
> 标签：android

我正在开发一个音乐应用程序，它可以同时播放多种声音，就像一种多轨程序。当需要播放所有声音时，计时器就会触发。声音必须准确地按节拍播放，并完美地同步和混合。

我发现的最简单的解决方案是为每个声音设置一个 MediaPlayer，从一开始就将它们全部初始化，在我的应用程序的 OnCreate() 中使用 MediaPlayer.create()。为了让它更加可靠和快速，我为每个声音制作了两个媒体播放器。然后我有一个调用简单循环的计时器，类似于：

```
for (int w=0; w<SOUNDS; w++)
    if (must_play(w)) {
        if (mp[w].isPlaying()) {
            if (mp2[w].isPlaying())
                mp[w].seekTo(0);
            else mp2[w].start();
        } else mp[w].start();
    } 
```

我使用 .seekTo(0) 是因为我发现它比 .stop() 和 .start() 稍微快一些。但声音并不总是完美同步的。如果这两个声音是两个应该可以完美播放的鼓，那么两个媒体播放器的 .start() 之间 1/10 秒的延迟是非常烦人的。有没有办法强制所有被指示 .start() 的媒体播放器一次有效地播放？请注意，声音可能很短，例如鼓声：问题不是要让多个媒体播放器随着时间的推移保持同步，而是要让它们完全一起开始，没有延迟。

这个问题相当棘手，因为在我看来涉及两个问题：

*   优先级，高于可能减慢计时器或应用程序本身的其他进程。
*   如何创建以原子方式运行所有声音的单个命令/对象/方法（或其他）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:14:51.960

我做到了，只是使用了 SoundPool 类而不是 MediaPlayer。它的响应速度更快，并且可以很好地处理多轨，如果流不够，甚至可以剪切播放的最古老的声音。虽然没有回答问题，但问题已解决。

# javascript - Javascript如何将变量放入URICOMPONENT

> ID：13698906
> 
> 赞同：0
> 
> 时间：2012-12-04T08:39:52.570
> 
> 标签：javascript

```
var frank_param = gup( 'frank' );
var pageURL = encodeURIComponent("directory_doctor_page.php?DoctorID=23"); 
```

我有这两行代码，我想用 var frank 替换 23。我将如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:41:21.050

您可以像这样连接两者：

```
var pageURL = encodeURIComponent("directory_doctor_page.php?DoctorID=" + frank_param); 
```

[从 mozilla 的关于字符串操作符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#String_operators)的 JS 文档中提取：

> 除了可用于字符串值的比较运算符之外，连接运算符 (+) 将两个字符串值连接在一起，返回另一个字符串，它是两个操作数字符串的并集。例如，“my”+“string”返回字符串“my string”。
> 
> 速记赋值运算符 += 也可用于连接字符串。例如，如果变量 mystring 的值为“alpha”，则表达式 mystring +=“bet”的计算结果为“alphabet”，并将该值赋给 mystring。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:41:50.543

您可以简单地将变量连接到字符串：

```
var frank_param = gup( 'frank' );
var pageURL = encodeURIComponent("directory_doctor_page.php?DoctorID=" + frank_param ); 
```

我建议在 StackOverflow 常见问题解答中查看一些[JavaScript 教程](https://stackoverflow.com/tags/javascript/info#h-related-tags)。

# javascript - 背景图像下方的白色区域

> ID：13698912
> 
> 赞同：1
> 
> 时间：2012-12-04T08:40:23.557
> 
> 标签：javascript, html, image, background, position

我试图在我的页面背景上每次刷新时获取一个随机图像。它适用于下面的脚本。但是，如果我的内容太多，图像不会扩展到底部并显示一个白色区域，其余内容继续存在。我该如何解决？我已经搜索并已经找到了诸如垂直对齐、更改字体大小之类的东西。还将脚本中的 backgroundPosition 更改为“center bottom”，但这并没有改变任何东西。有任何想法吗？

```
function randomBg() {
        var bgs = new Array();
        bgs.push("images/bg/bg1.jpg");
        bgs.push("images/bg/bg2.jpg");
        bgs.push("images/bg/bg3.jpg");
        bgs.push("images/bg/bg4.jpg");
        bgs.push("images/bg/bg5.jpg");
        bgs.push("images/bg/bg6.jpg");
        bgs.push("images/bg/bg7.jpg");
        bgs.push("images/bg/bg8.jpg");
        bgs.push("images/bg/bg9.jpg");
        bgs.push("images/bg/bg10.jpg");
        document.body.style.backgroundImage = "url(" + bgs[randomize(0, bgs.length-1)] + ")";
        document.body.style.backgroundSize = 'cover';
        document.body.style.backgroundRepeat = 'no-repeat';
        document.body.style.backgroundPosition = 'center';
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:02:21.170

删除`background-position:center`. 将`background-size:cover`“将背景图像缩放到尽可能大，使背景区域完全被背景图像覆盖。背景图像的某些部分可能不在背景定位区域内”

# shell - 当变量作为参数传递时，sed 命令在 shell 脚本中不起作用

> ID：13698919
> 
> 赞同：1
> 
> 时间：2012-12-04T08:40:38.403
> 
> 标签：shell, sed

我的 shell 脚本中有以下代码

```
a=$(cat php1.php | grep 'hello')
echo $a
sed -i 's/'"$a"'/world/' php1.php 
```

变量正在正确打印。但是，当我将它作为参数传递给 sed 命令时，sed 命令不起作用。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:31:42.077

您的命令完美运行：

```
sed -i 's/'"$a"'/world/' php1.php 
```

但是，您的`sed`命令可以使用双引号自动扩展 shell 变量。试试这个：

```
sed -i "s/$a/world/" php1.php 
```

* * *

我可能不完全理解您要完成的工作，但是如果您尝试替换`hello`为`world`（以一种相当迂回的方式），看起来您可能希望将`-o`标志添加到您的`grep`命令中：

```
a=$(grep -o "hello" php1.php) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:48:39.570

看起来您的脚本的意图是将 php1.php 中包含单词“hello”的所有行替换为单词“world”。就是这样：

```
sed -i 's/.*hello.*/world/' php1.php 
```

如果您正在尝试做其他事情，请告诉我们它是什么，我们可以为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:26:21.207

检查 $a 的值。我认为 $a 包含一些空间字符。

# macos - 用于后台应用程序的 CGAssociateMouseAndMouseCursorPosition

> ID：13698922
> 
> 赞同：3
> 
> 时间：2012-12-04T08:40:54.767
> 
> 标签：macos, cgeventtap

我有一个在后台解释触控板事件的应用程序（适用于所有应用程序）。

我希望能够在某些时候解除鼠标与光标的关联。CGAssociateMouseAndMouseCursorPosition 仅在我的应用程序位于前台时有效。

有没有办法做到这一点？

# c++ - 使用 epsilon 将双精度数与零进行比较

> ID：13698927
> 
> 赞同：221
> 
> 时间：2012-12-04T08:41:30.473
> 
> 标签：c++, floating-point, double

今天，我浏览了一些 C++ 代码（由其他人编写）并找到了这个部分：

```
double someValue = ...
if (someValue <  std::numeric_limits<double>::epsilon() && 
    someValue > -std::numeric_limits<double>::epsilon()) {
  someValue = 0.0;
} 
```

我试图弄清楚这是否有意义。

的文档`epsilon()`说：

> 该函数返回 1 和大于 1 的最小值之间的差值，该值可表示 [用双精度数]。

这是否也适用于 0，即`epsilon()`最小值是否大于 0？或者`0`和之间是否有`0 + epsilon`可以用 a 表示的数字`double`？

如果不是，那么比较不等于`someValue == 0.0`？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-12-04T09:17:49.973

假设 64 位 IEEE double，则有 52 位尾数和 11 位指数。让我们将其分解为：

```
1.0000 00000000 00000000 00000000 00000000 00000000 00000000 × 2^0 = 1 
```

大于 1 的最小可表示数：

```
1.0000 00000000 00000000 00000000 00000000 00000000 00000001 × 2^0 = 1 + 2^-52 
```

所以：

```
epsilon = (1 + 2^-52) - 1 = 2^-52 
```

0和epsilon之间有数字吗？很多......例如，最小的正可表示（正常）数是：

```
1.0000 00000000 00000000 00000000 00000000 00000000 00000000 × 2^-1022 = 2^-1022 
```

事实上，`(1022 - 52 + 1)×2^52 = 4372995238176751616`在 0 和 epsilon 之间有数字，占所有可表示的正数的 47%...

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-04T08:52:16.453

测试肯定不一样`someValue == 0`。浮点数的整个想法是它们存储一个指数和一个有效数。因此，它们表示具有一定数量的二进制有效数字精度的值（在 IEEE 双精度的情况下为 53）。可表示的值在 0 附近比在 1 附近更密集。

要使用更熟悉的十进制系统，假设您将十进制值存储为“4 位有效数字”和指数。然后下一个可表示的值大于`1`is `1.001 * 10^0`，并且`epsilon`is `1.000 * 10^-3`。但`1.000 * 10^-4`也是可表示的，假设指数可以存储 -4。你可以相信我的话，IEEE double*可以*存储的指数小于`epsilon`.

您无法仅从这段代码中判断将其`epsilon`专门用作绑定是否有意义，您需要查看上下文。这可能是`epsilon`对产生的计算中的错误的合理估计，`someValue`也可能不是。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-04T09:11:52.723

有些数字存在于 0 和 epsilon 之间，因为 epsilon 是 1 和可以在 1 以上表示的下一个最高数字之间的差，而不是 0 和可以在 0 以上表示的下一个最高数字之间的差（如果是，那代码做的很少）：-

```
#include <limits>

int main ()
{
  struct Doubles
  {
      double one;
      double epsilon;
      double half_epsilon;
  } values;

  values.one = 1.0;
  values.epsilon = std::numeric_limits<double>::epsilon();
  values.half_epsilon = values.epsilon / 2.0;
} 
```

使用调试器，在 main 结束时停止程序并查看结果，您会发现 epsilon / 2 与 epsilon、0 和 1 不同。

因此，此函数采用 +/- epsilon 之间的值并将它们设为零。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-04T09:37:14.160

可以使用以下程序打印数字 (1.0, 0.0, ...) 周围的 epsilon 近似值（可能的最小差异）。它打印以下输出：
`epsilon for 0.0 is 4.940656e-324`
`epsilon for 1.0 is 2.220446e-16`
稍微思考一下就清楚了，我们用于查看其 epsilon 值的数字越小，epsilon 就越小，因为指数可以调整到该数字的大小。

```
#include <stdio.h>
#include <assert.h>
double getEps (double m) {
  double approx=1.0;
  double lastApprox=0.0;
  while (m+approx!=m) {
    lastApprox=approx;
    approx/=2.0;
  }
  assert (lastApprox!=0);
  return lastApprox;
}
int main () {
  printf ("epsilon for 0.0 is %e\n", getEps (0.0));
  printf ("epsilon for 1.0 is %e\n", getEps (1.0));
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-06T18:29:34.800

`X`与 的下一个值之间的差值`X`根据 变化`X`。
`epsilon()`只是`1`和 的下一个值之间的差`1`。和 的下一个值
之间的差不是。`0``0``epsilon()`

相反，您可以使用`std::nextafter`以下方式比较双精度值`0`：

```
bool same(double a, double b)
{
  return std::nextafter(a, std::numeric_limits<double>::lowest()) <= b
    && std::nextafter(a, std::numeric_limits<double>::max()) >= b;
}

double someValue = ...
if (same (someValue, 0.0)) {
  someValue = 0.0;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-04T09:21:14.407

假设我们正在使用适合 16 位寄存器的玩具浮点数。有一个符号位、一个 5 位指数和一个 10 位尾数。

这个浮点数的值是尾数，解释为二进制十进制值，乘以 2 的指数次方。

在 1 附近，指数等于 0。所以尾数的最小位数是 1024 的一部分。

接近 1/2 的指数是负一，所以尾数的最小部分是原来的一半。使用 5 位指数可以达到负 16，此时尾数的最小部分值 32m 中的一部分。在负 16 指数处，该值大约是 32k 的一部分，比我们上面计算的大约 1 的 epsilon 更接近于零！

现在这是一个玩具浮点模型，它不能反映真实浮点系统的所有怪癖，但反映小于 epsilon 的值的能力与真实浮点值相当相似。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-04T08:50:32.263

我认为这取决于您的计算机的[精度](http://en.wikipedia.org/wiki/Precision_%28computer_science%29)。看一下这张[表](http://en.wikipedia.org/wiki/Machine_epsilon)：你可以看到如果你的epsilon用double表示，但是你的精度更高，比较不等于

```
someValue == 0.0 
```

总之是个好问题！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-04T08:57:11.990

由于尾数和指数部分，您不能将此应用于 0。由于指数，您可以存储比 epsilon 小的数字，但是当您尝试执行类似 (1.0 - "very small number") 之类的操作时，您将获得 1.0。Epsilon 不是值的指标，而是值精度的指标，以尾数表示。它显示了我们可以存储多少个正确的后继十进制数字。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-04T16:05:49.223

对于 IEEE 浮点，在最小的非零正值和最小的非零负值之间，存在两个值：正零和负零。测试一个值是否在最小的非零值之间，相当于测试是否与零相等；然而，赋值可能会产生影响，因为它会将负零变为正零。

可以想象，浮点格式可能具有介于最小有限正负值之间的三个值：正无穷小、无符号零和负无穷小。我不熟悉实际上以这种方式工作的任何浮点格式，但这样的行为将是完全合理的，并且可以说比 IEEE 的更好（也许不够好到值得添加额外的硬件来支持它，但在数学上 1 /(1/INF)、1/(-1/INF) 和 1/(1-1) 应该代表三种不同的情况，说明三个不同的零）。我不知道是否有任何 C 标准会要求有符号的无穷小，如果它们存在，则必须比较等于零。如果他们不这样做，上面的代码可以有效地确保例如

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-12-04T08:50:36.327

因此，假设系统无法区分 1.000000000000000000000 和 1.000000000000000000001。即 1.0 和 1.0 + 1e-20。你认为在 -1e-20 和 +1e-20 之间还有一些值可以表示吗？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-22T15:49:09.980

此外，拥有这样一个函数的一个很好的*理由*是删除“非规范化”（那些不能再使用隐含的前导“1”并具有特殊 FP 表示的非常小的数字）。你为什么想做这个？因为有些机器（特别是一些较旧的 Pentium 4s）在处理非规范化时会变得非常非常慢。其他人只是变得有点慢。如果您的应用程序并不真正需要这些非常小的数字，那么将它们清零是一个很好的解决方案。考虑这一点的好地方是任何 IIR 滤波器或衰减函数的最后一步。

另请参阅：[为什么将 0.1f 更改为 0 会使性能降低 10 倍？](https://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x)

和[http://en.wikipedia.org/wiki/Denormal_number](http://en.wikipedia.org/wiki/Denormal_number)

# android - Json 不能转换为 int

> ID：13698931
> 
> 赞同：1
> 
> 时间：2012-12-04T08:41:50.070
> 
> 标签：android, json, url, login, int

我按照本教程[http://vikaskanani.wordpress.com/2011/08/03/android-proper-way-to-cancel-asynctask/](http://vikaskanani.wordpress.com/2011/08/03/android-proper-way-to-cancel-asynctask/)

我尝试制作用于登录的应用程序。当我按照本教程进行操作时，它有错误。我认为它从`onProgressDialog`at错误，`int success = jResponse.getInt("user");`但我不知道如何解决它。

登录网址

`http://192.168.10.111/user/auth/?login_id=kongkea&password=kongkea&app_id=103574020240693`

（在浏览器中）登录成功，返回json

```
`{
    "user": {
        "user_id": "15",
        "firstname": "kea",
        "lastname": "kong",
        "gender": null,
        "email": null,
        "picture": null,
        "total_friends": 0,
        "total_cards": 0,
        "friend_status": "SELF"
    },
    "token": "NCTak4hOqzLUMCOYkTOG1wFCqjsxI0yKM4YGGw9pa2oz8QNCNiXeWEAOBhvTOHJKAWOvXo9zy2y5Jp9MK1PuSpiT2OALXq94acWsQ1fq0axi2UCD1DENd5Kzf54JL"
}` 
```

仪表板活动

```
public class DashboardActivity extends BaseActivity {

private EditText etUsername;
private EditText etPassword;
private static String appId = "103574020240693";
private ProgressDialog progressDialog;
private static final int PROGESSDIALOG_ID = 0;
private static final int SERVER_ERROR = 1;
private static final int NETWORK_ERROR = 2;
private static final int CANCELED = 3;
private static final int SUCCESS = 4; 
private String ServerResponse;
private LoginTask loginTask;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    etUsername = (EditText) findViewById(R.id.loginEmail);
    etPassword = (EditText) findViewById(R.id.loginPassword);

    Button login_button = (Button) findViewById(R.id.btnLogin);
    login_button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if(etUsername.getText().toString().length() == 0
                    || etPassword.getText().toString().length() == 0
                    || appId.length() == 0){
                Toast.makeText(getApplicationContext(), "Please enter username and password", Toast.LENGTH_SHORT).show();
            } else {
                showDialog(PROGESSDIALOG_ID);
            }
        }
    });

    isNetworkAvailable();
}

protected Dialog onCreateDialog(int id) {
    switch(id){
    case PROGESSDIALOG_ID:
        removeDialog(PROGESSDIALOG_ID);
        progressDialog = ProgressDialog.show(DashboardActivity.this, "Authenticating", "Please wait...",true,true, new OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                if(loginTask != null && loginTask.getStatus() != AsyncTask.Status.FINISHED)
                    loginTask.cancel(true);
            }
        });
        break;
        default: progressDialog = null;
    }
    return progressDialog;
}

@Override
protected void onPrepareDialog(int id, Dialog dialog){
    switch(id){
    case PROGESSDIALOG_ID:
        if(loginTask != null && loginTask.getStatus() != AsyncTask.Status.FINISHED)
            loginTask.cancel(true);
        loginTask = new LoginTask();
        loginTask.execute();
    }
}

class LoginTask extends AsyncTask<Void, Integer, Void>{

    @Override
    protected Void doInBackground(Void... unused) {
         try {
            ServerResponse = null;
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpGet httpGet = new HttpGet(getString(R.string.webserverurl)
                    +URLEncoder.encode(etUsername.getText().toString(),"UTF-8")
                    +"&password="+ URLEncoder.encode(etPassword.getText().toString(),"UTF-8")+"&app_id="+appId);
            httpClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "Some user agent string");

            if(isCancelled()){
                publishProgress(CANCELED);
                return (null);
            }

            HttpResponse httpResponse = httpClient.execute(httpGet,localContext);
            BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(),"UTF-8"));
            ServerResponse = reader.readLine();
            publishProgress(SUCCESS);
        } catch (UnknownHostException e) {
            removeDialog(PROGESSDIALOG_ID);
            e.printStackTrace();
            publishProgress(NETWORK_ERROR);
        } catch (Exception e){
            removeDialog(PROGESSDIALOG_ID);
            e.printStackTrace();
            publishProgress(SERVER_ERROR);
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer...errorCode){
        switch(errorCode[0]){
        case CANCELED:
            removeDialog(PROGESSDIALOG_ID);
            Toast.makeText(getApplicationContext(), "Cancel by user", Toast.LENGTH_LONG).show();
            break;
        case NETWORK_ERROR:
            removeDialog(PROGESSDIALOG_ID);
            Toast.makeText(getApplicationContext(), "Network connection error", Toast.LENGTH_LONG).show();
            break;
        case SERVER_ERROR:
            removeDialog(PROGESSDIALOG_ID);
            Toast.makeText(getApplicationContext(), "Server Error", Toast.LENGTH_LONG).show();
            break;
        case SUCCESS:
            removeDialog(PROGESSDIALOG_ID);
            try {
                if (ServerResponse != null) {
                    JSONObject jResponse = new JSONObject(ServerResponse);
                    String sMessage = jResponse.getString("user");
                    int success = jResponse.getInt("user");
                    if(success == 1){
                        DashboardActivity.this.finish();
                    } else {
                        Toast.makeText(getApplicationContext(), sMessage, Toast.LENGTH_LONG).show();
                    }
                }

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Server Error", Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }
            break;
        }
    }

    @Override
    protected void onPostExecute(Void unused){

    }
}

 @Override
 protected void onDestroy(){
     //you may call the cancel() method but if it is not handled in doInBackground() method
     if (loginTask != null && loginTask.getStatus() != AsyncTask.Status.FINISHED)
         loginTask.cancel(true);
     super.onDestroy();
 }

} 
```

错误

```
12-04 14:43:35.258: W/System.err(1039): org.json.JSONException: Value {"picture":null,"total_cards":0,"friend_status":"SELF","email":null,"gender":null,"lastname":"kong","user_id":"15","firstname":"kea","total_friends":0} at user of type org.json.JSONObject cannot be converted to int
12-04 14:43:35.258: W/System.err(1039):     at org.json.JSON.typeMismatch(JSON.java:100)
12-04 14:43:35.258: W/System.err(1039):     at org.json.JSONObject.getInt(JSONObject.java:446)
12-04 14:43:35.268: W/System.err(1039):     at com.example.androidlogin.DashboardActivity$LoginTask.onProgressUpdate(DashboardActivity.java:157)
12-04 14:43:35.268: W/System.err(1039):     at com.example.androidlogin.DashboardActivity$LoginTask.onProgressUpdate(DashboardActivity.java:1)
12-04 14:43:35.268: W/System.err(1039):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:618)
12-04 14:43:35.268: W/System.err(1039):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 14:43:35.268: W/System.err(1039):     at android.os.Looper.loop(Looper.java:137)
12-04 14:43:35.268: W/System.err(1039):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-04 14:43:35.268: W/System.err(1039):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 14:43:35.268: W/System.err(1039):     at java.lang.reflect.Method.invoke(Method.java:511)
12-04 14:43:35.268: W/System.err(1039):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-04 14:43:35.268: W/System.err(1039):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-04 14:43:35.280: W/System.err(1039):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:45:33.467

我认为你有问题：

```
String sMessage = jResponse.getString("user");
int success = jResponse.getInt("user"); 
```

假设它应该是：`int success = jResponse.getInt("user_id");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:27:53.343

`user`不是`JSONObject`int，因此您应该检索内部`JSONObject`. 替换

```
int success = jResponse.getInt("user"); 
```

和

```
JSONObject userJsonObj  = jResponse.getJSONObject("user")
int success = userJsonObj.getInt("user_id"); 
```

您必须使用该`userJsonObj`对象来检索您需要的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:48:47.523

你误用了 AyncTasks ：首先你应该在 doInBackground 中进行解析。仅将进度用于进度条或 ui 进度通知。onPostExecute 应该是在成功或失败的情况下更新 ui 的地方。

但在全球范围内，使用 AsyncTask 进行联网并不是一个好主意。javadoc 声明它们是为短期运行的任务而设计的。网络不是一项短期任务。

您应该考虑为您的网络请求使用 android 服务。有一个库可以帮助您：[RoboSpice](https://github.com/octo-online/robospice)。如果您使用 spring android 模块或 google http java 客户端模块，它将帮助您创建服务并提供开箱即用的 REST 支持。

* * *

如果您真的想继续使用 AsyncTask，那么 @Maxim Shoustin 的答案就是您要寻找的。

# ios - 如何在单击 UI 按钮时显示 UIPickerVIew

> ID：13698934
> 
> 赞同：1
> 
> 时间：2012-12-04T08:42:05.427
> 
> 标签：ios, uiscrollview

我有一个`UIScrollView`，其中有几个`UIViews`子视图。在其中一个`UIView`我需要创建一个`UIButton`，单击它时，`UIPickerView`应该出现一个，如果我可以使按钮成为第一响应者，那么通过默认操作`UIScrollView`，它将向上滚动以放置`UIPickerView`...我有什么办法可以做到这一点？我需要子类`UIControl`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T19:02:40.007

你可以使用这个：

```
-(void)btnAction{
UITextView* uitextView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 1, 1)];
uitextView.inputView = thePickerView;
[self.view addSubview:uitextView];

[uitextView becomeFirstResponder];} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:53:12.220

这是按钮添加，在这种情况下直接在 _scrollView 中，您可以轻松更改它。

```
UIButton *btn = [[UIButton alloc] init];

// button customization

[btn addTarget:self action:@selector(showPickerView:) forControlEvents:UIControlEventTouchUpInside];

[_scrollView addSubview:btn];
[btn release]; // if non-ARC 
```

之后，您需要实现该`showPickerView:`方法

```
- (void)showPickerView:(UIButton*)sender
{
    UIPickerView *picker = [[UIPickerView alloc] init];
    picker.tag = 998998;

    // picker customization..

    [self.view insertSubview:picker aboveSubview:_scrollView];
    [picker release]; // if non-ARC
} 
```

这里的重要部分是当从选择器视图中触发关闭/完成按钮时，您必须隐藏选择器，我想到的最简单的方法是

```
if([self.view viewWithTag:998998] != nil) {
    [[self.view viewWithTag:998998] removeFromSuperview]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T20:03:30.683

将 UIPickerView 初始化为 cell.picker = [[UIPickerView alloc] initWithFrame:CGRectZero]; 在一个子类中（无论你想让选择器在点击时出现什么）。然后覆盖该类的 inputView 方法并在该方法中返回 UIPickerView。该方法设置一个自定义输入视图以在对象成为第一响应者时显示。它会像键盘一样为您制作一切动画。要让滚动视图向上滚动，您需要以与键盘相同的方式处理此问题（即通过为滚动视图设置 contentOffset）。你可以在这里找到：[苹果文档链接](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html). 从这里开始应该是相当直接的，因为您有通知到对象何时辞去第一响应者并成为第一响应者。只需使用这些通知而不是键盘通知，并使用默认的 UIPickerView 大小而不是键盘。

```
 - (void)initalizeInputView {
    self.picker = [[UIPickerView alloc] initWithFrame:CGRectZero];
    self.picker.showsSelectionIndicator = YES;
    self.picker.autoresizingMask = UIViewAutoresizingFlexibleHeight;
}

- (UIView *)inputView {
        return self.picker;
} 
```

# java - 初始化@EJB 字段

> ID：13698937
> 
> 赞同：1
> 
> 时间：2012-12-04T08:42:21.183
> 
> 标签：java, spring, jboss, ejb

我是 EJB 的新手。

我有一门包含以下字段的课程

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public class MyServiceFacadeBean implements MyServiceFacadeLocal, MyServiceFacadeRemote {

    @EJB(name = "ejb/CatalogService")
    private CatalogService catalogService = null;
    ....
} 
```

我在 Sring IOC 中注入实现时实例化了该对象：

```
<bean id="contestServiceFacade" class="my.company.service.facade.contest.ejb.MyServiceFacadeBean">
 </bean> 
```

但是在我的控制器中调用它方法后，我在*catalogService*字段上得到**NullPointerException 。**那么我的门面应该如何正确实例化呢？

 ***更新 1**：我尝试使用[此处](https://stackoverflow.com/questions/13765415/plug-bean-to-jboss-with-jndi)询问的另一种方法来插入 bean 。也许在回答这个问题时会有所帮助。

**更新 2：**我无法更改我的 EJB 的来源，但可以为我的控制器做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:31:27.293

如果您使用的是 JBoss 5，则不能将其投入`EJB`战争。您需要使用`EJB` `jar`和`war`文件（+ lib jars）创建一个ear 文件。有关更多信息`ear`，请参阅 JavaEE 教程 ( [http://docs.oracle.com/javaee/5/tutorial/doc/bnaby.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnaby.html) )。

当 EJB 正确打包到 ear 中时，它们将在部署时由 Jboss 启动。

Spring 将能够通过 JDNI 访问它们，如下所述：http: [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/ejb.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/ejb.html)

另一种选择是切换到 Jboss 7，`EJB`因为`war`. 但这需要一些努力，因为他们在 Jboss 7 中改变了很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:42:51.713

如果你想让 Spring 在你的 EJB 中注入属性，你需要在你的类上使用一个拦截器：

```
@Interceptors(SpringBeanAutowiringInterceptor.class)
public class MyServiceFacadeBean ... {

        @Autowired
        private CatalogService catalogService;

        ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:58:04.747

您正在混合 EJB 和 Spring bean。注释@EJB 是获取企业Java bean 而不是Spring bean。
您应该更改为 @Autowired 注释或将 CatalogService 更改为 EJB（在类中使用正确的 EJB 注释）和

```
<context:component-scan base-package="com.foo" /> 
```

在 xml 文件中。

另请注意，您需要一个支持 EJB 的容器，例如 Glassfish、JBoss（Tomcat 不是）。*

# android - 在 Apple Store 和 Google Play 中发布

> ID：13698938
> 
> 赞同：2
> 
> 时间：2012-12-04T08:42:47.697
> 
> 标签：android, app-store, google-play

苹果和谷歌会允许我们发布每款游戏的三个版本吗？（波罗的海国家一个完整且免费，下一个 - 全球市场免费但不完整，最后一个 - 完整且有钱）

因为，当项目扩展时，我们希望以更多版本发布这些游戏。换句话说，在那些当地赞助商将资助我们的国家（市场）——我们希望免费发布这些游戏（完整版）。因此，随着时间的推移，这些每个应用程序版本的数量都会增加。

那么这个（版本计数）不会有任何问题吗？另一个问题——这两家公司（苹果和谷歌）是否允许我们在每个版本中放置一些赞助商标志？（例如三星、本地银行等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:57:23.010

您可以上传具有不同名称和包名称的相同游戏。包名重命名是强制性的，而不是我认为的应用程序名称。您可以在新版本中自定义徽标、UI 等。

举`Temple Run`个例子。迪士尼推出了新版游戏，`Temple Run: Brave`.

名称 & UI & 包是不同的。`com.imangi.templerun`为`Temple Run`和`com.disney.brave_google`为`Temple Run: Brave`。

**编辑：**我的答案只适用于谷歌游戏。不知道苹果商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:07:37.467

对于安卓，

拥有如此多的 apk（您每次都必须为要更新的每个构建更改包名称），基本上具有相同的代码库是很累人的。我建议由您自己的应用程序处理它，并且可能有服务器端支持。

对于苹果来说，

据我所知，名称应该不同。同样，根据您是否要处理如此多的构建，您可能希望有一个针对各种受众的通用构建。

至于赞助商，我认为这对任何一方来说都不是问题。

# django - 在heroku中使用dajax，dajaxice

> ID：13698939
> 
> 赞同：2
> 
> 时间：2012-12-04T08:42:54.350
> 
> 标签：django, dajaxice, dajax

我正在使用 dajax / dajaxice。

但是当我将我的应用程序上传到heroku时，我发现了崩溃日志

```
2012-12-04T08:32:36+00:00 heroku[web.1]: Starting process with command `python manage.py runserver 0.0.0.0:45991 --noreload`

2012-12-04T08:32:37+00:00 app[web.1]: Error: No module named dajax

2012-12-04T08:32:39+00:00 heroku[web.1]: Process exited with status 1 
```

heroku 服务器中没有模块 dajax。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:59:22.340

你放了吗

```
django-dajax==0.9.2
django-dajaxice==0.5.4 
```

在[requirements.txt](https://devcenter.heroku.com/articles/python-pip)

# java - Java 显示正确 不正确

> ID：13698941
> 
> 赞同：1
> 
> 时间：2012-12-04T08:43:04.083
> 
> 标签：java, string, equals

我遇到了这个问题，这应该不是问题

我写了这段代码

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.Scanner;

/**
 * @author ZEESHAN
 */
public class TestApps 
{
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) 
    {
        // TODO code application logic here
        Connection con;
        // Statement stmt;
        ResultSet rs;
        String str,str2,str3;
        try 
        {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            con=DriverManager.getConnection("jdbc:odbc:TestApp");

            Statement stmt =  con.createStatement();
            System.out.println("Connected");

            rs=stmt.executeQuery("SELECT Emp_Name,Emp_LastName FROM Table_1 WHERE Emp_Name = 'zeeshan' ");

            while(rs.next()) 
            {
                str = rs.getString("Emp_Name");
                str2 = rs.getString("Emp_LastName");
                String name,pass;    

                Scanner input = new Scanner(System.in);
                name = input.nextLine();
                pass = input.nextLine();

                if(name.equals(str) && pass.equals(str2) )
                {
                    System.out.println("CORRECT");
                }
                else
                {
                    System.out.println("INCORRECT");
                    System.out.println(""+name);
                    System.out.println(""+pass);
                    System.out.println(""+str);
                    System.out.println(""+str2);
                }
            }

            //  String name,pass;    

            /*   
            if(name.equals(str) && pass.equals(str2) )
            {
                System.out.println("Correct");
            }
            else
            {
                System.out.println("Incorrect");
            }
            */
        }
        catch (Exception ex)
        {
            System.out.println("Not connected");
            ex.printStackTrace();
        }
    }
} 
```

一切正常，即数据库和所有。我给出了与数据库字符串相同的答案，但我得到的结果并不好，而且结果表明所有字符串都是相同的答案，但是为什么我仍然没有达到真实的条件我得到了错误的条件在控制台中回答。

```
RESULT:
 INCORRECT
 zeeshan
 ismail
 zeeshan   
 ismail 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:46:34.607

str 和 str2 的值中有尾随空格。在比较字符串之前，您必须修剪到值。

```
str = str.trim();
str2 = str2.trim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:59:03.587

最好是这样做 -

```
str = str.toUpperCase().trim();
str2 = str2.toUpperCase().trim(); 
```

并比较

```
if(str.equals(str2)){} 
```

如果您使用字符串比较，请务必

*   将两个字符串放在同一个案例中
*   修剪两个字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:03:58.070

是的，导致此错误的是前导空格和尾随空格。

在将它们与 str 和 str1 进行比较之前，您还可以对“name”和“pass”进行修剪。

```
name= name.trim();
pass=pass.trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T08:48:22.857

您应该尝试使用 trim() 方法。

# java - 如何在 Spring Security 中授权系统调用

> ID：13698942
> 
> 赞同：4
> 
> 时间：2012-12-04T08:43:07.040
> 
> 标签：java, spring, security, spring-security

我在我的 Web 应用程序中实现了 Spring Security。现在我所有的服务都是安全的，只能由授权用户调用。一切都在网页上运行，但如果我通过 JMX 或石英弹簧调用方法，则会抛出异常“访问被拒绝”。现在我创建了“假”用户并在 jmx 方法开始时记录了他，但我认为它不是一个好的解决方案。我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:52:25.480

最简单的方法是将应用程序划分为仅实现方法的“内部”bean 集，以及将“内部”操作呈现给 Web 的“外部”bean 集。安全注释可以在“外部”bean 上进行，而 JMX/Quartz 驱动的访问可以直接在“内部”bean（或合适的其他委托）上执行。

# visual-studio - 移动 Visual Studio tlog 文件

> ID：13698943
> 
> 赞同：2
> 
> 时间：2012-12-04T08:43:08.460
> 
> 标签：visual-studio, logging, directory

Visual Studio 生成的 *.tlog 文件很多，请问如何将它们移动到另一个目录。我只找到了一种使用 TrackFileAccess 禁用它们的方法，但这不是我想要的。谢谢。

# c# - 为什么exe不在程序文件中运行？

> ID：13698944
> 
> 赞同：0
> 
> 时间：2012-12-04T08:43:11.293
> 
> 标签：c#, exe, system.diagnostics, grib

我正在开发 wpf 应用程序。我正在使用以下代码运行 degrib.exe

```
 public static void GenerateCsvFile(string fileName)
        {
            try
            {
                MessageBox.Show("Csv Error");
                MessageBox.Show("File Name : " + fileName);
                MessageBox.Show("WorkingDirectory" + new FileInfo(fileName).DirectoryName);

                System.Diagnostics.Process process = new System.Diagnostics.Process();
                System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
                startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
                startInfo.FileName = @"C:\ndfd\degrib\bin\degrib.exe";
                startInfo.Arguments = @"" + fileName + "" + " -C -msg 1 -Csv";
                startInfo.UseShellExecute = true;
                startInfo.WorkingDirectory = new FileInfo(fileName).DirectoryName;
                process.StartInfo = startInfo;
                process.Start();
                process.WaitForExit();
                process.Close();

                System.Diagnostics.Process process1 = new System.Diagnostics.Process();
                System.Diagnostics.ProcessStartInfo startInfo1 = new System.Diagnostics.ProcessStartInfo();
                startInfo1.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
                startInfo1.FileName = @"C:\ndfd\degrib\bin\degrib.exe";
                startInfo1.Arguments = @"" + fileName + "" + " -C -msg all -nMet -Csv";
                startInfo1.UseShellExecute = true;
                startInfo1.WorkingDirectory = new FileInfo(fileName).DirectoryName;
                process1.StartInfo = startInfo1;
                process1.Start();
                process1.WaitForExit();
                process1.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show("Degrib Error");
                Utility.ShowErrorMessage(ex);
            }
        } 
```

degrib.exe 从 grib 文件生成 csv 文件。这`http://www.nws.noaa.gov/mdl/degrib/index.php`是degrib的解释。上面函数`fileName`中是grib文件的路径。如果 grib 文件放置在 Program Files 以外的任何文件夹中，则上述函数会从 grib 文件中创建 csv 文件。如果我将 grib 文件放在 Program Files 或 Program Files 中的任何其他文件夹中，相同的函数将不会生成 csv 文件。同样的功能也不适用于 AppData 文件夹。为什么会这样？您能为我提供上述问题的任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:30:23.407

默认情况下`UAC`，`Vista`或`Win7`不授予应用程序在 Program Files 中的写入权限，除非它们以提升的访问权限启动。您可以通过添加：

```
startInfo.Verb = "runas"; 
```

但是，阅读`degrib`手册我注意到它接受输入和输出参数。因此，在您的情况下，建议您为生成的 csv 文件使用预定义的位置。 [http://www.nws.noaa.gov/mdl/degrib/txtview.php?file=degrib.txt&dir=base](http://www.nws.noaa.gov/mdl/degrib/txtview.php?file=degrib.txt&dir=base)

```
 -in [File]
     You can provide the file to read the GRIB message from either:
     1) right after "degrib",
     2) using the "-in [File]" option,
     3) on standard input.
   -out [File]
      Name of the file to store the results.  Must have 1 and only 1 dot in
      the name, and the extension must be 3 characters.  The extension will
      be replaced depending on file format.
   -namePath [Path]
      Name of a directory to put the files in.
      Only applicable if -out is NOT Specified. 
```

# asp.net - 在 Silverlight 中将网格网格线显示为实线而不是虚线格式

> ID：13698947
> 
> 赞同：2
> 
> 时间：2012-12-04T08:43:18.710
> 
> 标签：asp.net, silverlight-4.0, telerik

我是silverlight的新手，我遇到的情况是在网格中我必须显示垂直线，下面我编写的代码显示虚线，但我需要实线。这个网格是在telerik RadGridView中声明的。

```
 <grid>
                 <Grid ShowGridLines="True">
                     <Grid.RowDefinitions>
                         <RowDefinition Height="20"/>
                     </Grid.RowDefinitions>
                     <Grid.ColumnDefinitions>
                          <ColumnDefinition Width="170"/>
                          <ColumnDefinition Width="75"/>
                          <ColumnDefinition Width="75"/>
                          <ColumnDefinition Width="18"/>
                          <ColumnDefinition Width="55"/>

                          <ColumnDefinition Width="75"/>
                          <ColumnDefinition Width="75"/>
                          <ColumnDefinition Width="18"/>
                          <ColumnDefinition Width="55"/>
                     </Grid.ColumnDefinitions>

      <!--<Border Grid.Row="0" Grid.Column="0" BorderThickness="1" BorderBrush="White"></Border>-->
      <TextBlock Grid.Row="0" Grid.Column="0"  Text="" HorizontalAlignment="Left" VerticalAlignment="Center"/>

      <TextBlock Grid.Row="0" Grid.Column="1"  Text="" HorizontalAlignment="Left" VerticalAlignment="Center"/>
       <TextBlock Grid.Row="0" Grid.Column="2"  Text=""  HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <Image Source="" Width="15" Height="15" Grid.Row="0" Grid.Column="3" HorizontalAlignment="Left" VerticalAlignment="Center"></Image>
         <TextBlock Grid.Row="0" Grid.Column="4"  Text="" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        <TextBlock Grid.Row="0" Grid.Column="5"  Text="" HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <TextBlock Grid.Row="0" Grid.Column="6"  Text="" HorizontalAlignment="Left" VerticalAlignment="Center"/>
        <Image Source="" Width="15" Height="15" Grid.Row="0" Grid.Column="7" HorizontalAlignment="Left" VerticalAlignment="Center"></Image>
         <TextBlock Grid.Row="0" Grid.Column="8"  Text="" HorizontalAlignment="Center" VerticalAlignment="Center"/>

  </Grid> 
```

我使用了边框，但它在列定义之后，但每行边框都在应用我只想要一条实线而不是虚线或使用边框或矩形控件。请任何人都可以为我提供解决方案。

谢谢

哈拉维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:55:27.263

我认为您想要做的是用边框包裹每个文本块/图像。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="20" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="170" />
        <ColumnDefinition Width="75" />
        <ColumnDefinition Width="75" />
        <ColumnDefinition Width="18" />
        <ColumnDefinition Width="55" />

        <ColumnDefinition Width="75" />
        <ColumnDefinition Width="75" />
        <ColumnDefinition Width="18" />
        <ColumnDefinition Width="55" />
    </Grid.ColumnDefinitions>

    <!--<Border Grid.Row="0" Grid.Column="0" BorderThickness="1" BorderBrush="White"></Border>-->
    <Border BorderThickness="1,0,1,0"
            BorderBrush="Black">
        <TextBlock Text=""
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="1">
        <TextBlock Text=""
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="2">
        <TextBlock Text=""
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="3">
        <Image Width="15"
                Height="15"
                HorizontalAlignment="Left"
                VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="4">
        <TextBlock Text=""
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="5">
        <TextBlock Text=""
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="6">
        <TextBlock Text=""
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="7">
        <Image Width="15"
                Height="15"
                HorizontalAlignment="Left"
                VerticalAlignment="Center" />
    </Border>
    <Border BorderThickness="0,0,1,0"
            BorderBrush="Black"
            Grid.Column="8">
        <TextBlock Text=""
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center" />
    </Border>

</Grid> 
```

结果：

![http://i.imgur.com/niMWZ.png](../Images/9fd568cb3fe1e7c8f766073c81390d6a.png)

# iphone - MP4 文件不在 MPMoviePlayerController 中播放？

> ID：13698950
> 
> 赞同：1
> 
> 时间：2012-12-04T08:43:20.817
> 
> 标签：iphone, ios, cocoa-touch, mpmovieplayercontroller, mp4

我正在使用 MPMoviePlayerController 播放 .mp4 文件，而我正在测试 Windows 平台中录制的 .mp4 其工作正常，但是使用 Android 录制的 .mp4 没有在我的 iOS 设备（iPod touch）中播放，播放器继续缓冲它..任何想法可能是什么问题？请帮助我，如何在 MPMoviePlayerController 中调试问题。

```
 NSURL *file_url = [NSURL fileURLWithPath:filepath];
        moviePlayer =  [[MPMoviePlayerController alloc]
                        initWithContentURL:file_url];

        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        moviePlayer.shouldAutoplay = YES;
       // moviePlayer.useApplicationAudioSession = YES;
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:59:29.240

我发现了问题，iOS不支持Android中录制的音频格式。现在我使用 AAC 录制它播放正常。

# sql-server-2008 - sql server 2008 中的电子邮件验证？

> ID：13698956
> 
> 赞同：2
> 
> 时间：2012-12-04T08:44:01.160
> 
> 标签：sql-server-2008

如何验证电子邮件是否有效？

例如：

*   `test@test.com`- 有效的
*   `test@@.com`- 无效的
*   `test@.com`- 无效的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:02:40.350

下面是一个创建带有地址的邮件特定规则的表的示例（正则表达式）。然后是 sql 查询模式 (Regexp) 的示例。有了这个，你应该能够做你想做的事

***使用正则表达式创建表***

```
create table Contacts (
FirstName nvarchar(30),
LastName nvarchar(30),
EmailAddress nvarchar(30) CHECK (dbo.RegExMatch('[a-zA-Z0-9_\-]+@([a-zA-Z0-9_\-]+\.)+(com|org|edu|nz)', EmailAddress)=1),
USPhoneNo nvarchar(30) CHECK (dbo.RegExMatch('\([1-9][0-9][0-9]\) [0-9][0-9][0-9]\-[0-9][0-9][0-9][0-9]', UsPhoneNo)=1))
INSERT INTO [talend].[dbo].[Contacts]
([FirstName]
,[LastName]
,[EmailAddress]
,[USPhoneNo])
VALUES
('Hallam'
,'Amine'
,'mhallam@talend.com’
,'0129-2090-1092')
,( 'encoremoi'
,'nimportequoi'
,'amine@zichji.org'
,'(122) 190-9090')
GO 
```

***使用正则表达式执行请求 sql***

```
SELECT [FirstName]
,[LastName]
,[EmailAddress]
,[USPhoneNo]
FROM [talend].[dbo].[Contacts]
where [talend].[dbo].RegExMatch([EmailAddress],'[a-zA-Z0-9_\-]+@([a-zA-Z0-9_\-]+\.)+(com|org|edu|nz|au)') = 1 
```

***功能码***

```
using System;
using Microsoft.SqlServer.Server;
using System.Text.RegularExpressions;
public partial class RegExBase
{
[SqlFunction(IsDeterministic = true, IsPrecise = true)]
public static int RegExMatch( string matchString , string pattern)
{
Regex r1 = new Regex(pattern.TrimEnd(null));
if (r1.Match(matchString.TrimEnd(null)).Success == true)
{
return 1 ;
}
else
{
return 0 ;
}
}
}; 
```

有关更多说明，请在此处查看教程-> [http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CGkQFjAF&url=http%3A%2F%2Fwww.talendforge.org%2Fbugs %2Ffile_download.php%3Ffile_id%3D4729%26type%3Dbug&ei=f8C9UKTMBNSN4gTo0IHYDg&usg=AFQjCNG-ezRtC9TdcJXuXGl4T8KX4zbUww&sig2=Fpgm5UTYOK4dpsaMfNCCyQ&cad=rja](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CGkQFjAF&url=http%3A%2F%2Fwww.talendforge.org%2Fbugs%2Ffile_download.php%3Ffile_id%3D4729%26type%3Dbug&ei=f8C9UKTMBNSN4gTo0IHYDg&usg=AFQjCNG-ezRtC9TdcJXuXGl4T8KX4zbUww&sig2=Fpgm5UTYOK4dpsaMfNCCyQ&cad=rja)

我希望这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:55:10.617

有一种更新的有效方法是为 SQL 扩展 .Net 功能。

请在[http://msdn.microsoft.com/en-us/magazine/cc163473.aspx查看详细信息](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)

一个用于正则表达式匹配的现成源代码位于[http://www.codeproject.com/Articles/42764/Regular-Expressions-in-MS-SQL-Server-2005-2008](http://www.codeproject.com/Articles/42764/Regular-Expressions-in-MS-SQL-Server-2005-2008)。

现在，一个简单的电子邮件正则表达式应该为您带来魔力希望对您有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:12:19.717

几年前，我写了一个关于[模式匹配的程序——电子邮件验证](http://pewned123.wordpress.com/tag/sql-email-validation/)。希望对您有所帮助。

# mysql - 在 MySQL 中对多对多表中的相关记录进行分组

> ID：13698957
> 
> 赞同：0
> 
> 时间：2012-12-04T08:44:01.930
> 
> 标签：mysql, sql, group-by, many-to-many

我在 MySQL db 中有一个表'C'，其结构如下：

*Object1Id (int)* - **PK**并且与表“A”具有一对多关系，

*Object2Id (int)* - **PK**并且与表“A”有一对多的关系，

*OccuranceId (int)* - **FK**并且与表“B”具有一对多的关系。

基本上，表“C”与表“A”具有多对多关系，与表“B”具有一对多关系。

数据：

```
1, 3, 1
1, 3, 39
3, 1, 402
3, 1, 27
1, 3, 40
3, 1, 12 
```

我尝试使用查询对记录进行分组：

```
SELECT CASE WHEN least(Object1Id, Object2Id) = Object1Id THEN Object1Id ELSE Object2Id END AS Object1Id, 
       CASE WHEN Greatest(Object1Id, Object2Id) = Object2Id THEN Object2Id ELSE Object1Id END AS Object2Id, 
       count(OccuranceId) AS OccuranceCount
FROM 'C'
GROUP BY Object1Id, Object2Id 
```

我从查询中得到的结果是：

1、3、3 - 对于 object1Id = 1 和 Object2Id = 3

1、3、3 - 对于 Object1Id = 3 和 Object2Id = 1

我希望结果总结为：1、3、6

我怎样才能产生想要的结果？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:12:15.030

是的！

```
SELECT Object1Id, Object2Id, sum(OccuranceCount)
FROM (

__ YOUR SELECT __

) foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:10:26.670

首先，我将查询简化为

```
SELECT least(Object1Id, Object2Id) AS Object1Id,
       Greatest(Object1Id, Object2Id) AS Object2Id,
       count(OccuranceId) AS OccuranceCount
FROM C
GROUP BY Object1Id, Object2Id 
```

您的查询不起作用，因为您有列`object1id`并且`object2id`将这些名称重用于结果列`least()`和`greatest()`. 但是`group by`子句按表列分组，而不是您的结果列。当您将结果列重命名为其他名称时，它会按预期工作

```
SELECT least(Object1Id, Object2Id) AS least_val,
       Greatest(Object1Id, Object2Id) AS greatest_val,
       count(OccuranceId) AS OccuranceCount
FROM C
GROUP BY least_val, greatest_val 
```

用于测试的[SQL Fiddle](http://www.sqlfiddle.com/#!2/e9e32/7/0)

# vim - 如何配置 Vim 以便 CapsLock 仅在 INSERT 模式下启用

> ID：13698961
> 
> 赞同：3
> 
> 时间：2012-12-04T08:44:13.257
> 
> 标签：vim

我想在可视模式下禁用 Capslock 功能。我怎样才能做到这一点？

前任：

*   在插入模式下，`Capslock=On`,`A`应该打印*A*。
*   在可视模式下，`Capslock=On`,应该*在光标后*`A`触发追加文本（而不是*将文本追加到当前行的末尾*）

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:50:15.107

视觉选择中的“附加到下一个字符”是什么意思？

在您的 vimrc 文件或 vim 会话中，执行以下操作（对于命令模式）：

```
:map A a 
```

如果您只是意味着应该结束选择并且您必须能够在当前位置的末尾附加字符，请执行以下操作：

：地图`A` `Ctrl+V``Esc``a`

答对了！**

# asp.net-mvc-3 - 具有实体框架的自定义成员资格提供程序

> ID：13698962
> 
> 赞同：1
> 
> 时间：2012-12-04T08:44:15.277
> 
> 标签：asp.net-mvc-3, entity-framework-4, custom-membershipprovider

我有一个 MVC Web 应用程序，我正在使用我自己的会员提供程序。我已经为 MVC 应用程序和自定义成员资格提供程序实现了带有 POCO、存储库和工作单元的实体框架。

我发现当数据在成员资格提供程序中创建的实体之外发生更改时，数据不会更新。当实体在 Web 请求中短暂存在时，系统可以正常工作，但是成员资格提供程序是从 Web 应用程序启动的，并且不像控制器那样被处理。

我已经阅读了我能找到的每一篇文章，但还没有找到如何克服实体框架的这个限制。我是否必须求助于旧的 ADO 代码才能从数据库中获取最新数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:09:56.147

确保您以正确的方式覆盖了 WebSecurity 和其他 Microsoft Membership Provider 类。出于安全原因和实体框架的架构，它们之间可能不会发生适当的协调。可以在 The [nuget gallery](https://nuget.org/packages/CodeFirstMembershipProviderSharp)找到使用 Entity Framework 和 Asp.net Membership 提供程序实现示例成员资格提供程序的一个很好的示例。我希望对你有用。

# php - 只有变量应该通过引用传递

> ID：13698963
> 
> 赞同：7
> 
> 时间：2012-12-04T08:44:24.633
> 
> 标签：php, class

我有一堂课：

```
class Validator {
    private $validationArray;
    private $cleanedValues;

    public function __construct($arg1, $arg2=NULL) {
        if(empty($arg2)) {
            $this->LoadValidatorByName($arg1);
        } else {
            $this->LoadValidatorFromLeadType($arg1, $arg2);
        }
    }

    private function LoadValidatorFromLeadType($lead_type, $vocabulary) {
            $ErrorReporter = new ErrorReporter;
            $taxonomy_term = reset(taxonomy_get_term_by_name($lead_type, $vocabulary));

...some more stuff 
```

函数 taxonomy_get_term_by_name 是 Drupal 函数，但我遇到的问题是 PHP 函数。

当调用此方法时，PHP 会抱怨：

```
Strict warning: Only variables should be passed by reference in Validator->LoadValidatorFromLeadType() (line 32 of [path to my file]) 
```

第 32 行是这一行：

```
$taxonomy_term = reset(taxonomy_get_term_by_name($lead_type, $vocabulary)); 
```

我已经查看了这个错误，我很确定我知道它的含义，但是我不明白我的代码有什么问题导致这个警告。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T08:47:32.093

reset 正在等待变量引用。你正在向它传递一个函数结果......

```
$taxonomy_term = taxonomy_get_term_by_name($lead_type, $vocabulary);
$taxonomy_term = reset($taxonomy_term ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T08:46:29.480

这意味着只有变量应该通过引用传递，而不是表达式。

```
reset($array_variable); // correct 
```

和

```
reset(some_function_that_returns_array()); // incorrect 
```

如果您花点时间仔细考虑一下-您会发现`reset()`with 表达式（不是变量）没有意义，因为您已将数组指针倒回到开头，但您无法访问该数组了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T08:48:11.080

您应该只重置一个变量（通过引用传递），而不是函数的返回值。见：[http ://www.php.net/reset](http://www.php.net/reset)

# delphi - 获取 EDBEngineError - ExecSQL 语句上的 Delphi XE2 中的操作不适用

> ID：13698967
> 
> 赞同：3
> 
> 时间：2012-12-04T08:44:42.087
> 
> 标签：delphi, delphi-xe2, delphi-xe, tquery

我正在使用 TQuery 将记录插入表中。下面是代码。

```
with qryABC do
    begin
      Close;
      SQL.Clear;
      SQL.Text := 'INSERT INTO tableXYZ (ID) values (:ID)';
      ParamByName('ID').Value := AnyID;
      ExecSQL;
      Close;
    end; 
```

当我从 oracle 触发相同的查询时，查询会被触发，但是当我尝试从 delphi xe2 触发查询时会出现异常。在调试时，我发现上面代码中的“ExecSQL”语句出现错误。例外是：EDBEngineError - 操作不适用

我用谷歌搜索但没有结果。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:08:00.750

是什么`AnyID`？像这样的问题更好地显示数据类型声明和分配的值。

作为一般建议 - 不要使用`.Value`, try`ParamByName('ID').AsInteger`或`ParamByName('ID').AsString`你实际需要的某个参数。

这不仅会更快，而且还可以通过编译时类型检查生成更确定的代码，而不是明显更慢且更不可预测的运行时动态`Variant`数据类型转换。

`Fields`这也适用于`Parameters`.

# android - 为 Android 构建 Chrome

> ID：13698968
> 
> 赞同：5
> 
> 时间：2012-12-04T08:44:48.693
> 
> 标签：android, google-chrome, build

我原来的帖子是大约一个月前。看起来谷歌真的把它清理干净了，并在上游制作了基本功能。在 Nikolay 的评论的帮助下，我能够构建 contenttest shell 和 chromium 测试 shell。然而，铬测试外壳看起来与内容外壳完全一样。它基本上有一个地址栏和后退/前进按钮。而已。

我仍在努力在这个巨大的项目中找到自己的方式。但我的理解是 Chromium 应该是一个功能齐全的浏览器，包括菜单、书签等基本 UI（就像 Firefox 一样）。Chrome 是谷歌的风格，拥有自己的谷歌特定服务。但是 Chromium 应该具备作为功能齐全的浏览器的基本功能。那么它是正确的理解吗？如果是这样，为什么没有 Android 端口？有人知道 Chromium 中是否有完整的 Android 用户界面代码？如果没有，它会到来还是会像这样前进？任何其他可用于将基本的完整浏览器 UI 添加到 Android 的 Chromium 的开源项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T15:09:04.870

没有适用于 Android 的 Chromium 版本。截至目前，您将获得的最接近的是构建[https://code.google.com/p/chromium/wiki/AndroidBuildInstructions](https://code.google.com/p/chromium/wiki/AndroidBuildInstructions)中描述的 ContentShell - 内容外壳为您提供了很多您需要的浏览器，但是不是全部。

# unit-testing - 模拟，存根和假对象有什么区别

> ID：13698969
> 
> 赞同：14
> 
> 时间：2012-12-04T08:44:59.977
> 
> 标签：unit-testing, mocking, stub

尽管有很多资源，即使在 SO 上，在这些 Q/A 中也只有两个术语相互比较。

那么，简而言之，它们各自是什么？它们又是如何相互关联的？或者他们根本就没有？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T11:40:03.143

Difference between mock and stub is very simple - **mock can make your test fail, while stub can't**. That's all there is. Additionally, you can think of stub as of something that *provides values*. Nowadays, fake is just a generic term for both of them (more on that later).

## Example

Let's consider a case where you have to build a service that sends packages via communication protocol (exact details are irrelevant). You simply supply service with package code and it does the rest. Given the snippet below, can you identify which dependency would be a stub and which mock in potential unit test?

```
public class DistributionService
{
    public double SendPackage(string packageCode)
    {
        var contents = this.packageService.GetPackageContents(packageCode);
        if (contents == null)
        {
            throw new InvalidOperationException(
                "Attempt to send non-exisiting package");
        }

        var package = this.packageBuilder.Build(contents);
        this.packageDistributor.Send(package);
    }
} 
```

It's fairly easy to tell that `packageBuilder` simply provides value and there's no possible way it could make any test fail. That's a **stub**. Even though it might seem more blurry, `packageService` is stub too. It provides a value (what we do with the value is irrelevant from stub's point of view). Of course, later we'll use that value to test whether exception is thrown, but it's still all within our control (as in, we tell stub exactly what to do and forget about it - it should have no further influence on test).

It gets different with `packageDistributor`. Even if it provides any value, it's not consumed. Yet the call to `Send` seems to be pretty important part of our implementation and we'll most likely want to **verify** it is called.

At this point we should get to a conclusion that `packageDistributor` is a **mock**. We'll have a dedicated unit test asserting that `Send` method was called and if for some reasons it wasn't - we want to know that, as it's **important part of the entire process**. Other dependencies are stubs as all they do is provide values to other, perhaps more relevant pieces of code.

## Quick glance at TDD

Stub being stub, could be just as well replaced with constant value in *naive implementation*:

```
var contents = "Important package";
var package = "<package>Important package</package>";
this.packageDistributor.Send(package); 
```

This is essentially what mocking frameworks do with stubs - instruct them to return configurable/explicit value. *Old-school, hand-rolled* stubs often do just that - return constant value.

Obviously, such code doesn't make much sense, but anyone who ever done TDD surely seen bunch of such *naive implementations* at the early stage of class development. Iterative development that results from TDD will often help **identify roles** of your class' dependencies.

## Stubs, mocks and fakes nowadays

At the beginning of this post I mentioned that *fake* is just a generic term. Given that mock can also serve as stub (especially when modern mocking frameworks are concerned), to avoid confusion it's good idea to call such object a fake. Nowadays, you can see this trend growing - original *mock - stub* distinction is slowly becoming a thing of the past and more universal names are used. For example:

*   FakeItEasy uses *fake*
*   NSubstitute uses *substitute*
*   Moq uses *mock* (name is old, but no visible distinction is made whether it's stub or mock)

## References, further reading

*   **[Mocks aren't stubs](http://martinfowler.com/articles/mocksArentStubs.html)** by Martin Fowler - you can see this article being linked virtually under any stub/mock question, and it's for a reason
*   **[Exploring The Continuum Of Test Doubles](http://msdn.microsoft.com/en-us/magazine/cc163358.aspx)** by Mark Seemann - overview for all the confusing unit testing terminology (if you thought mock, fake and stub are enough, you probably should know there's also *dummy**, *spy*, *double* and what not)
*   **[xunitpatterns.com](http://www.xunitpatterns.com)** - backing-website for huge unit-testing-patterns book, [xUnit Test Patterns: Refactoring Test Code](https://rads.stackoverflow.com/amzn/click/com/0131495054) by Gerard Meszaros
*   **[Art of Unit Testing](https://rads.stackoverflow.com/amzn/click/com/1933988274)** by Roy Osherove - excellent unit testing introductory book (the *"mock can make test fail, stub not"* are Roy's words, not mine)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T09:09:42.630

Mock 和 Stub 都称为 Fake Object。在我看来：

*   Stub 用于替换外部依赖，它使我们的测试无异常运行。我们必须使用 Assert 来确定测试是否失败。Stub 仅适用于测试某些函数的结果是否正确

*   Mock 比较复杂，常用于测试行为，例如验证函数是否被调用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T08:49:24.097

它们通常可以互换，但在我看来略有不同。

*   模拟/假对象将返回逼真的结果。
*   存根将返回默认的失败/通过值。

# javascript - 单击 Leaflet Popup 中的链接并执行 Javascript

> ID：13698975
> 
> 赞同：41
> 
> 时间：2012-12-04T08:45:38.070
> 
> 标签：javascript, jquery, leaflet

我有一张传单地图正在运行。它在地图上覆盖了一系列多边形（通过 GeoJSON）并将弹出窗口附加到每个多边形。每个弹出窗口都显示有关该多边形的信息。

我想在弹出窗口中有一个链接，单击该链接时，将运行一个 javascript 函数，该函数通过 AJAX 拉出更小的多边形并显示它们。

我无法让脚本通过普通的 jQuery/Javascript 点击事件来捕捉对链接的点击。这就是我所说的正常（以下不起作用）：

```
$('a .smallPolygonLink').click(function(e){
  console.log("One of the many Small Polygon Links was clicked");
}); 
```

bindPopup 部分如下。它在制作时在每个多边形上运行，并在单击多边形时正确弹出。它确实显示了链接，只是不会在点击时运行上述代码。

```
var popupContent = "Basic Information..." + '<a class="smallPolygonLink" href="#">Click here to see the smaller polygons</a>';
layer.bindPopup(popupContent); 
```

这是一个说明示例的 JSFiddle，虽然形式要简单得多。[http://jsfiddle.net/2XfVc/4/](http://jsfiddle.net/2XfVc/4/)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-04T08:51:19.260

每次打开弹出窗口时，弹出窗口内的链接元素都会从您的标记中动态生成。这意味着当您尝试将处理程序绑定到它时，该链接不存在。

这里的理想方法是使用`on`将事件处理委托给弹出元素或其祖先。不幸的是，弹出窗口阻止了事件传播，这就是为什么将事件处理委派给弹出窗口之外的任何静态元素都行不通的原因。

您可以做的是预先构建链接，附加处理程序，然后将其传递给`bindPopup`方法。

```
var link = $('<a href="#" class="speciallink">TestLink</a>').click(function() {
    alert("test");
})[0];
marker.bindPopup(link); 
```

这是一个演示：http: [//jsfiddle.net/2XfVc/7/](http://jsfiddle.net/2XfVc/7/)

通常，要使用多个事件处理程序插入任何类型的复杂标记，请使用以下方法：

```
// Create an element to hold all your text and markup
var container = $('<div />');

// Delegate all event handling for the container itself and its contents to the container
container.on('click', '.smallPolygonLink', function() {
    ...
});

// Insert whatever you want into the container, using whichever approach you prefer
container.html("This is a link: <a href='#' class='smallPolygonLink'>Click me</a>.");
container.append($('<span class="bold">').text(" :)"))

// Insert the container into the popup
marker.bindPopup(container[0]); 
```

这是一个演示：http: [//jsfiddle.net/8Lnt4/](http://jsfiddle.net/8Lnt4/)

有关传单弹出窗口中事件传播的更多信息，请参阅[此 Git 问题](https://github.com/Leaflet/Leaflet/issues/301)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-28T11:57:50.197

虽然 Popup 内容包装器阻止了事件传播，但 popup 内部标记中的事件传播得很好。当弹出元素显示在地图上时（并且已成为 DOM 的一部分），您可以将事件添加到弹出元素。只需注意传单活动`popupopen`。

```
var map = L.map('map').setView([51.505, 10], 7); //for example

//the .on() here is part of leaflet
map.on('popupopen', function() {  
  $('a .smallPolygonLink').click(function(e){
    console.log("One of the many Small Polygon Links was clicked");
  });
}); 
```

[http://jsfiddle.net/tJGQ7/2/](http://jsfiddle.net/tJGQ7/2/)

这对我来说就像一个魅力。如果您的弹出窗口没有`'a .smallPolygonLink'`上述代码，则什么也不做。此代码在弹出窗口的每次启动时运行。但是，您不必担心它将多个处理程序附加到一个元素，因为当弹出窗口关闭时，DOM 节点会被丢弃。

有一种更通用的方法可以做到这一点。但是，它涉及`eval()`. **使用风险自负**。但是，当 AJAX 加载包含 JS 的部分页面时，您会遇到相同的风险，因此为了您的启发，我提出“在您的传单弹出窗口中执行 JS”：

```
map.on('popupopen', function(){
    var cont = document.getElementsByClassName('leaflet-popup-content')[0];    
    var lst = cont.getElementsByTagName('script');
    for (var i=0; i<lst.length;i++) {
       eval(lst[i].innerText)
    }
}); 
```

演示：http: [//jsfiddle.net/tJGQ7/4/](http://jsfiddle.net/tJGQ7/4/)

现在你可以写：

```
var popup_content = 'Testing the Link: <a href="#" class="speciallink">TestLink</a><script> $(".speciallink").on("click", function(){alert("hello from inside the popup")});</script>';

marker.bindPopup(popup_content); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-10T08:44:27.593

这就是我在 mapbox 官方网站上找到的内容：[使用 Mapbox.js 和 jQuery 在标记弹出窗口中创建点击事件。](https://www.mapbox.com/mapbox.js/example/v1.0.0/clicks-in-popups/)该评论解释了为什么我们说`$('#map')`而不是`$('#mybutton')`.

```
var marker = L.marker([43.6475, -79.3838], {
  icon: L.mapbox.marker.icon({
    'marker-color': '#9c89cc'
  })
})
.bindPopup('<button class="trigger">Say hi</button>')
.addTo(map);
//The HTML we put in bindPopup doesn't exist yet, so we can't just say
//$('#mybutton'). Instead, we listen for click events on the map element which will bubble up from the tooltip, once it's created and someone clicks on it.

$('#map').on('click', '.trigger', function() {
alert('Hello from Toronto!');}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-02T09:18:07.847

我遇到了这个问题，尝试了上面的解决方案。但这对我没有用。找到了以下非常基本的 jquery 解决方案。

```
// add your marker to the map
var my_marker = new L.marker([51.2323, 4.1231], {icon: my_icon});
var popup = L.popup().setContent('<a class="click" href="#">click</a>');
my_marker.addTo(map).bindPopup(popup);

// later on
jQuery("body").on('click','a.click', function(e){
  e.preventDefault();
  alert('clicked');
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-06-14T22:34:02.643

您可以检查`popup`对象的内部属性，包括`_wrapper`等。

```
map.on('popupopen', _bindPopupClick);
map.on('popupclose', _unbindPopupClick);

var _bindPopupClick = function (e) {
    if (e.popup) {
        e.popup._wrapper.addEventListener('click', _bindPopupClickHandler);
    }
};
var _unbindPopupClick = function (e) {
    if (e.popup) {
        e.popup._wrapper.removeEventListener('click', _bindPopupClickHandler);
    }
}` 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T08:53:04.343

您可以使用 jQuery 来选择`canvas`元素，但您必须在画布中使用它自己的方法。一个不错的开始将是[https://developer.mozilla.org/en/canvas_tutorial](https://developer.mozilla.org/en/canvas_tutorial)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-25T23:42:22.367

mapbox JavaScript 库有一个事件：

```
bindPopup('<button class="trigger">Say hi</button>');
addTo(map);

$('#map').on('click', '.trigger', function() {
    alert('Hello from Toronto!');
}); 
```

[https://www.mapbox.com/mapbox.js/example/v1.0.0/clicks-in-popups/](https://www.mapbox.com/mapbox.js/example/v1.0.0/clicks-in-popups/)

# git - Git - 撤消 git rm

> ID：13698978
> 
> 赞同：97
> 
> 时间：2012-12-04T08:46:21.780
> 
> 标签：git, git-rm

> **可能重复：**
> [如何恢复“git rm -r。”？](https://stackoverflow.com/questions/2125710/how-to-revert-a-git-rm-r)

在这里 Git SOS。我在一个项目上工作了 10 个小时而没有提交（我知道，我知道）然后我 git 添加了太多文件，所以我尝试使用 git rm 并意外删除了所有内容。我有希望吗？:(((

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-12-04T08:52:04.907

如果您已经提交了更改，那么：

```
git reset (--hard) HEAD~1 
```

如果没有，那么：

```
git reset
git ls-files -d -z | xargs -0 git checkout -- 
```

# asp.net - 错误请求 - 无效的主机名 ASP.NET MVC4

> ID：13698979
> 
> 赞同：7
> 
> 时间：2012-12-04T08:46:22.010
> 
> 标签：asp.net, asp.net-mvc, iis-7

我有一个 ASP.NET MVC 4 应用程序，我可以在本地浏览它

```
http://localhost:portnr/SomeController 
```

当我尝试从同一网络中的另一台计算机或仅通过本地 IP 浏览它时，我收到“错误请求 - 无效主机名”

```
http://192.168.0.x:portnr/SomeController 
```

如果我指定一个无效的端口号，我不会得到同样的错误，所以我猜错误消息来自 asp.net 本身。我正在尝试从我的 iPhone 浏览该网站。

我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:07:28.000

该端口是内部开发服务器端口。您将需要使用 SPI Port Forward 之类的工具将本地端口转发到本地计算机外部。这是一个向您展示该工具如何工作的链接，

[http://vishnuvalentino.com/download/spi-port-forward-redirection-for-windows-to-another-port-ip-address/](http://vishnuvalentino.com/download/spi-port-forward-redirection-for-windows-to-another-port-ip-address/)

# c++ - 在 C++ 中重命名（别名/转发）函数的最佳方法是什么？

> ID：13698989
> 
> 赞同：24
> 
> 时间：2012-12-04T08:46:44.113
> 
> 标签：c++, templates, c++11, variadic-templates, perfect-forwarding

（我将把这个问题限制在 C++11，因为我相信在 C++98 中没有通用的方法来做到这一点）。

假设我有一组复杂的（就签名而言）*模板*函数和/或重载函数，并且我想以完全相同的方式使用这些函数，但使用不同的名称（即别名）。

例如：

```
template<class A, class B, class C> 
D fun(A a, B& b, C&& c){ ... }

template<class E, class F> 
G fun(H<E> he, F& f){ ... }

... many other versions of fun 
```

现在假设我想一次*重命名*（或*alias*，或更准确地说是*forward*）这些函数（即能够为同一个函数使用不同的名称而无需重写它）。这样，在代码的其他部分，我可以用不同的名称使用它，而无需修改上述代码。

这是将（别名/转发）*重命名*`fun`为的正确方法`gun`吗？

```
template<typename... Args> 
inline auto gun(Args&&... args)->decltype(fun(std::forward<Args>(args)...)){
    return fun(std::forward<Args>(args)...);
} 
```

*   真的一般吗？
*   这是最简单的方法吗？
*   这是最佳方式吗？（例如可以内联，没有不必要的副本）
*   如果原始函数有一些 SFINAE 特性怎么办？（例如`template<class A, class B, class C, class = std::enable_if< ... >::type>`），是否会`decltype`在所有情况下转移 SFINAE？
*   如果原始函数返回引用怎么办？decltype 不会删除引用类型吗？（例如`double& fun(double& x){return x;}`）。
*   成员函数也可以这样说吗？

澄清：`gun`永远不会*完全正确* `fun`，因为实例将具有不同的地址，但我正在寻找的是从通用编码的角度重命名。

评论：我觉得奇怪的是，几乎所有东西都可以重命名/转发，命名空间、类型 ( `typedef`) 和模板类型`using typedef`，但不是函数（或就此而言的成员函数）。

* * *

**编辑**：为了完整起见，因为这似乎是这样做的方法，所以我在这里添加了一个宏来定义函数别名：

```
#define ALIAS_FUNCTION(OriginalnamE, AliasnamE) \
template <typename... Args> \
inline auto AliasnamE(Args&&... args) -> decltype(OriginalnamE(std::forward<Args>(args)...)) { \
  return OriginalnamE(std::forward<Args>(args)...); \
} 
```

然后你像这样使用它：

```
namespace NS1{namepsace NS2{
  ALIAS_FUNCTION(NSA::fun, gun); // second argument (target name can't have namespace)
}} 
```

* * *

**EDIT2：**我认为异常策略也可以合并到别名中：

```
#define ALIAS_FUNCTION(OriginalnamE, AliasnamE) \
template <typename... Args> \
inline auto AliasnamE(Args&&... args) \
  noexcept(OriginalnamE(std::forward<Args>(args)...)) \
->decltype(OriginalnamE(std::forward<Args>(args)...)){\
    return OriginalnamE(std::forward<Args>(args)...);} 
```

但还没有测试它。 [您必须键入三遍](https://www.youtube.com/watch?v=I3T4lePH-yA)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T15:27:55.587

> 真的一般吗？

是的。

> 这是最简单的方法吗？

是的（很遗憾）。

> 这是最佳方式吗？（例如可以内联，没有不必要的副本）

是的。

> 如果原始函数有一些 SFINAE 特性怎么办？（例如`template<class A, class B, class C, class = std::enable_if< ... >::type>`），decltype 在所有情况下都会转移 SFINAE 吗？

是的，如果里面的表达式`decltype`产生错误（即，`fun`不存在，可能是由于 SFINAE on `fun`），这也会触发 SFINAE `gun`，将其从重载集中删除。

> 如果原始函数返回引用怎么办？decltype 不会删除引用类型吗？（例如`double& fun(double& x){return x;}`）。

不，为什么会这样？

> 成员函数也是如此，尽管我猜这必须通过修改类来完成。

这不是一个问题。关于成员函数可以说什么？以上所有内容同样适用。

# objective-c - 复制 UIView

> ID：13698993
> 
> 赞同：0
> 
> 时间：2012-12-04T08:46:58.613
> 
> 标签：objective-c, ios, cocoa-touch

我不知道我怎么能复制`UIView`它的内容。或者甚至有可能吗？

我`UIView`在 .xib 文件中制作了一个标签和一个按钮。现在我希望仅使用不同的标签文本复制此视图 n 次。

我正在尝试这样做，但是这样我只能得到显示的最后一个对象。就像。`_view1`_`IBOutlet``_view1Label`

```
 NSMutableArray *Info = [[NSMutableArray alloc]initWithCapacity:number.intValue];
    for(int i = 0; i != number.intValue; i++)
    {
        NSString *number = [NSString stringWithFormat:@"Zona%i ",[[NSUserDefaults standardUserDefaults] stringForKey:@"ObjectNumber"].intValue];
        NSString *zona = [NSString stringWithFormat:@"%@%i",number, i+1];
        NSString *parinkta = [[NSUserDefaults standardUserDefaults] stringForKey:zona];
        _view1Label.text = parinkta;
        _view1.hidden = false;
        CGRect newrect = CGRectMake(_view1.frame.origin.x, _view1.frame.origin.y + (80 * i), _view1.frame.size.width, _view1.frame.size.height);
        _view1.frame = newrect;
        [Info addObject:_view1];
    }
    for(int i = 0; i != number.intValue; i++)
    {
        UIView *add = [Info objectAtIndex:i];
        [self.view addSubview:add];
    } 
```

我想你会明白我想要做什么，也许我这样做的想法是完全错误的，所以任何人都可以帮助我走上这条道路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:53:22.353

从笔尖多次加载视图，调整您加载的每个副本的标签内容。这比尝试在内存中复制 UIView 内容更容易、更短、更不容易出错。

下面是一个`UINib`用于访问 nib 内容的示例：

```
 UINib *nib = [UINib nibWithNibName:@"nibName" bundle:nil];
 NSArray *nibContents = [nib instantiateWithOwner:nil options:nil];

 // Now nibContents contains the top level items from the nib.
 // So a solitary top level UIView will be accessible
 // as [nibContents objectAtIndex:0]

 UIView *view = (UIView *)[nibContents objectAtIndex:0];

 // assumes you've set the tag of your label to '1' in interface builder
 UILabel *label = (UILabel *)[view viewWithTag:1];
 label.text = @"My new text"; 
```

因此，只需为您想要的每个 nib 实例重复上述代码即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:53:52.153

如果您想显示`n`视图，那么您必须创建视图`n`时间，在第一个 for 循环内，您不能将单个视图放置在多个位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:16:14.010

如果您是通过代码创建第一个视图，那么您可以使用以下方法。

改变你的 for 循环，如：

```
for(int i = 0; i != number.intValue; i++)
    {
        NSString *number = [NSString stringWithFormat:@"Zona%i ",[[NSUserDefaults standardUserDefaults] stringForKey:@"ObjectNumber"].intValue];
        NSString *zona = [NSString stringWithFormat:@"%@%i",number, i+1];
        NSString *parinkta = [[NSUserDefaults standardUserDefaults] stringForKey:zona];
        UIView *tempView = [[UIView alloc] init];
        UILabel *tempLabel = [[UILabel alloc] init];
        tempLabel.frame = _view1Label.frame;
        tempLabel.text = _view1Label.text;
        [tempView addSubview: tempLabel];
        tempView.frame = _view1.frame;
        _view1Label.text = parinkta;
        _view1.hidden = false;
        CGRect newrect = CGRectMake(_view1.frame.origin.x, _view1.frame.origin.y + (80 * i), _view1.frame.size.width, _view1.frame.size.height);
        _view1.frame = newrect;
        [Info addObject:tempView];
    } 
```