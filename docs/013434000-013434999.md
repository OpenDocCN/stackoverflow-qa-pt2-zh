# StackOverflow 问答 13434000-13434999

# java - 在 Java 中，如何使用循环实例化新对象，将它们存储在数组中，然后使用它们？

> ID：13434003
> 
> 赞同：2
> 
> 时间：2012-11-17T19:27:44.197
> 
> 标签：java, arrays, search, object, loops

我有一个 CS 课的介绍性作业。我有一个名为 Car 的类和一个单独的数据文件，用于以后的文件重定向。我要：

> 使用哨兵循环读取每个 Car 对象的品牌、年份和价格，实例化该对象，并将其存储在数组 carArr[] 中。例如，如果您创建一个分配给名为 car1 的变量的汽车对象，您可以这样做： carArr[i] = car1 其中“i”是一个 int 计数器。此外，计算数组的元素，因为它们存储在 int 变量中，如 "i" 或 numCars

到目前为止，这是我的代码：

```
Scanner scan = new Scanner(System.in);
final int SIZE_ARR = 30;
Car [] carArr = new Car[SIZE_ARR];
int i = 0;
int numcars = 0;
String make = "";
int year = 0;
double price = 0.0;
final String SENT = "EndDatabase";

while (!scan.next().equals(SENT))
{
   make = scan.next();
   year = scan.nextInt();
   price = scan.nextDouble();
   Car car1 = new Car(make, year, price);
   carArr[i] = car1;
   i++;
   numCars++;
} 
```

每次通过循环并读入不同名称的新数据时，如何创建一个新的 Car 对象？他们需要有不同的名字吗？照原样，我将制作一堆都命名为 car1 的对象。我最终将不得不打印出数据库，然后在一个新的 Car 对象中读取它们作为搜索键。然后该键将依次搜索 carArr 数组。搜索是否会因为数组中的每个元素都填充了同名对象而感到困惑？

此外，当我搜索数组并将存储的对象与搜索对象进行比较时，我只需要这样做：

```
key.equals(carArr[i]) 
```

这会比较每个对象的实例变量吗？

在我的 Car 类中，我需要为我的 year、make 和 price 实例变量提供一个访问器方法。我需要在哪里使用这些？它还指出我必须有一个“称为 setPrice 的变异器方法”和“一个 equals 方法”。知道它们对我来说意味着什么吗？很抱歉这个和多个问题的长度。我只是想保持领先于我的工作量，而我的老师没有回复电子邮件。谢谢！

**********编辑*************************************** ******* 我想到了。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T19:30:36.950

> 我的问题是，每次我通过循环并读入不同名称的新数据时，如何创建一个新的 Car 对象？

对象没有*名称*。

> 照原样，我只是制作一堆名为 car1 的对象。

不，您将创建很多对象，仅此而已。在每次迭代中，您将为名为 的变量分配一个引用`car1`，但变量*不是*对象 - 甚至变量的值也不是对象，它是一个引用。

完全摆脱它会更简单`car1`，只需将引用直接分配到数组中：

```
carArr[i] = new Car(make, year, price); 
```

使用 a 而不是数组会更好`List<Car>`- 这样您就不需要单独跟踪大小。我将代码编写为：

```
Scanner scan = new Scanner(System.in);
List<Car> cars = new ArrayList<Car>();

while (!scan.next().equals("EndDatabase"))
{
   String make = scan.next();
   int year = scan.nextInt();
   double price = scan.nextDouble();
   cars.add(new Car(make, year, price));
} 
```

为了分配，您可能需要使用数组，但这很烦人......

我也可能将其更改`price`为 a`BigDecimal`而不是`double`- 您不应该将二进制浮点类型用于货币值。

（顺便说一句，您肯定要丢弃在循环的每次迭代中读取的第一个值吗？您所做的只是检查它是否是`EndDatabase`- 如果不是，您基本上会丢失它的信息。 .)

# javascript - Javascript 在 Jsfiddle 上工作，但不在 Dreamweaver 上，得到未捕获的语法错误意外令牌等

> ID：13434010
> 
> 赞同：0
> 
> 时间：2012-11-17T19:28:20.620
> 
> 标签：javascript, jquery, animation, uncaught-exception

这是我正在做的例子[http://jsfiddle.net/ep39v/78/](http://jsfiddle.net/ep39v/78/)，框架工作是由 Minko Gechev 非常友好地给我的

它在 Jsfiddle 上完美运行，但我不知道为什么它不会传输到 Dreamweaver 这些是我当前的文件：

**HTML**

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/MattyScript.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="Style.css" />
</head>

<body>
<button id="showFormBtn">Show form</button>
<div class="form"></div>
<div class="box"></div>
<script>
positionForm();
</script>
</body> 
```

**JAVASCRIPT**

```
(function($){
var form = $('.form');
var form2 = $('.box');

function positionForm() {
    form.css({
        top: -form.height(),
        left: ($(document.body).width() - form.width()) / 2
    });
}

function addListeners(background) {
    background.click(function() {
        background.fadeOut(300, function() {
            background.remove();
        });
        form.animate({
            top: -form.height() - 10
        }, 300);
        form2.animate({
            left: '100%'
        }, 300);
        setTimeout(function() {
            form2.css('display', 'none');
        }, 301);
    });
}

function showForm() {
    var form = $('.form');
    var form2 = $('.box');
    positionForm();
    form2.css('display', 'block');
    form.animate({
        top: 10
    }, 1500, 'easeOutElastic');
    form2.animate({
        left: '50%'
    }, 1500, 'easeOutElastic');
}

function fadeBackground(callback) {
    var background = $('<div class="background"></div>');
    $(document.body).append(background);
    background.fadeTo(300, 0.5, function() {
        if (typeof callback === 'function') {
            callback();
        }
    });
    addListeners(background);
}

$('#showFormBtn').click(function() {
    fadeBackground(showForm);
});

form.click(function(e) {
    e.stopImmediatePropagation();
});

positionForm()})(jQuery);; 
```

**CSS**

```
@charset "utf-8";
/* CSS Document */
.form {
    width: 30%;
    height: 40%;
    background: black;
    position: absolute;
    z-index: 20;
}

.box {
    position: absolute;
    width: 50%;
    height: 300px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    left: 150%;
    display:none;
    top: 100px;
    margin-left: -25%;
}
body {
    height: 100%;
}
.background {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    background: black;
    opacity: 0;
    z-index: 10;
}​ 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:46:09.143

如果您从 jsfiddle 剪切并粘贴代码，则很有可能您捡到了一些乱码，可能是在代码的末尾。

删除最后几行并手动输入。

# c# - 使用 Windows 7 流媒体

> ID：13434012
> 
> 赞同：2
> 
> 时间：2012-11-17T19:28:51.133
> 
> 标签：c#, windows-7, streaming, windows-media-player

在 Windows 7 中，可以选择通过网络组流式传输媒体。
例如，通过局域网将视频从我的电脑流式传输到我的电视。

为此，我需要使用 Windows Media Player，将文件添加到播放列表并选择目标设备。

我想在我的程序中自动完成，我想像 Windows Media Player 一样选择文件并流式传输它。

它是已知的协议吗？（例如，我的电视支持这种流媒体，所以我相信这是已知的协议）
关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:20:05.767

该协议称为 DLNA。似乎有很多库可以处理它，实际上我在搜索如何制作 DLNA 客户端应用程序时发现了这篇文章，并且我计划使用 OpenHome 的 OhNet，按照[这个问题](https://stackoverflow.com/questions/274470/creating-a-dlna-server-service-in-vb-net)中的建议。

# wordpress - 循环外的wordpress“in_category”解决方法的评估字符串

> ID：13434017
> 
> 赞同：1
> 
> 时间：2012-11-17T19:29:14.563
> 
> 标签：wordpress, eval, categories, evaluate

在 Wordpress 中，您不能在循环之外使用“in_category”，因此我创建了一个函数，该函数为我提供了我的文章所在的所有类别，并从中创建了一个“is_category”if 语句。

我把我的函数放在我的“functions.php”中：

```
function inCatAlt($catID){
    $allCats = get_categories('child_of='.$catID);

    $childCats = 'is_category('.$catID.') ';
    foreach($allCats as $childCat){
        $childCats.= 'or is_category('.$childCat->cat_ID.') ';
    };

    $allchildCats = trim(trim($childCats, 'or '));
    return $allchildCats;
} 
```

并在我的侧边栏中调用它，单等等：

```
echo inCatAlt(13); 
```

这给了我一个字符串：

```
"is_category(13) or is_category(16) or is_category(15)" 
```

这正是我所需要的，但现在我想评估字符串以在 if 函数中使用它，如下所示：

```
if(eval(inCatAlt(13))){
 do something
} 
```

但它不起作用。我评估它是错误的还是有什么问题？如果我将输出复制粘贴到 if 函数中，它可以正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:58:04.307

I'll answer what I think is the real question. Your proposed solution is extremely bad practice.

Try this:

```
$post_categories = wp_get_post_categories( $post_id );
$child_categories = get_categories( array( 'child_of' => $catID ) );

if( count( array_intersect( $post_categories, $child_categories ) ) > 0 )
    // The post exists in one or more of the child categories 
```

# java - 完全相同毫秒的两个 java 线程

> ID：13434021
> 
> 赞同：3
> 
> 时间：2012-11-17T19:29:30.947
> 
> 标签：java, multithreading

如果两个线程尝试在完全相同的时间以精确的毫秒或（无论最小 CPU 单元是多少）访问同步方法。会发生什么？如果它们也具有相同的优先级，JVM/系统将如何解决这个问题。会不会造成死锁？另外，这些关于锁的信息存储在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T19:30:51.173

这就是线程的全部意义所在。操作系统的作业调度程序将允许一个先于另一个。不会发生死锁。

实际上，作业调度程序是用于进程的重量级分叉。`Thread`轮流执行或进入同步块的 JVM 句柄。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:32:03.047

进入块在内部被翻译为在操作系统中`synchronized`获得一些**原子互斥锁或信号量。**这些构造保证是原子的。因此不会发生任何错误，一种方法总是*第一种*。即使在多核、多 CPU 的机器中，也只有一个线程可以一次获得信号量/互斥量。

如果肯定不会造成死锁。要创建死锁，您需要两个资源来竞争。

# javascript - 树屋 jQuery 挑战

> ID：13434023
> 
> 赞同：6
> 
> 时间：2012-11-17T19:29:55.690
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-selectors

如何使用 jQuery 从具有特定类的无序列表中选择列表项？确切的问题是“在下一行，使用 jQuery 选择具有 'nav' 类的无序列表 (ul) 中的所有列表项 (li)？”

我在树屋上尝试了几次，但它不会让我通过！

```
$(".nav ul li"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T19:31:48.443

您的选择器`$(".nav ul li")`意味着一些`element with class nav has ul`, `if ul has class nav then try this`。

```
$("ul.nav li"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T13:31:48.863

```
$('.nav').children('li') 
```

将是一种更快的方法来做到这一点。

# c++ - 在库的文件名中使用加号（'+'）是否不好？

> ID：13434024
> 
> 赞同：3
> 
> 时间：2012-11-17T19:29:56.110
> 
> 标签：c++, static-libraries, filenames

我想知道你们对在我正在处理的库中使用文件夹和文件名中的 + 字符有何看法。假设我的 lib 名为 lib++，我应该使用“lib++”命名我的文件和文件夹，还是应该坚持使用更安全的名称，如“libpp”（加号）或“libxx”。

UnitTest++ 在其文件名中使用 + 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:02:28.023

如果您打算将您的库广泛移植到其他（特别是较旧的）操作系统，那么我会避免使用“+”，并坚持使用 AZ、az、0-9、_

需要考虑的两个问题：-

*   操作系统本身是否允许该字符？[http://en.wikipedia.org/wiki/Filename#Comparison_of_filename_limitations](http://en.wikipedia.org/wiki/Filename#Comparison_of_filename_limitations)

*   该语言是否允许导入的（对于 C++，包括）文件名中的字符？

例如，对于 C++ 库：您的操作系统应该能够调用文件`lib++.h`并且`lib++.lib`在磁盘上正常 - 但您必须偏离标头保护命名的标准做法......

```
in lib++.h:-

#ifndef LIB++_H
#define LIB++_H

...
#endif 
```

我想这会以泪水告终...

*（实际上，我想得越多，潜在的故障点就越多：您的版本控制软件、您的 IDE、您的文档生成器，实际上几乎您使用的任何查看文件名的工具。现在，您可能很幸运这些都不会对您或任何尝试使用您的图书馆的人造成任何问题，但这不是我想打赌的方式。）*

# java - java ms 访问连接

> ID：13434027
> 
> 赞同：1
> 
> 时间：2012-11-17T19:30:07.123
> 
> 标签：java, bluej, jdbc-odbc

我正在使用 BlueJ 执行一些任务是 Java。我不明白为什么我无法从我的 MS Access 数据库中获取任何记录。任何帮助将不胜感激

```
import java.sql.*;

public class Database
{
    private Statement s;

    /**
     * Constructor for objects of class database
     */
    public database()
    {
        try{
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        }catch(ClassNotFoundException exp){
            System.err.println(exp);
        }    
        try{
            Connection con = DriverManager.getConnection("jdbc:odbc:POS", "", "");
            this.s = con.createStatement();
        }catch(SQLException e){
            e.printStackTrace();
        }       
    }

    public void test(){
       try{
           this.s.executeQuery("SELECT * FROM product");
           ResultSet rset = s.getResultSet();
           System.out.println(rset.getString("title"));
       }catch(SQLException e){
           e.printStackTrace();
       }
    }
} 
```

这是我在运行 test() 函数时得到的输出

> java.sql.SQLException: [Microsoft][ODBC Driver Manager] sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956) 处 sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113) 处的游标状态无效) 在 sun.jdbc.odbc.JdbcOdbc.SQLGetDataString(JdbcOdbc.java:3906) 在 sun.jdbc.odbc.JdbcOdbcResultSet.getDataString(JdbcOdbcResultSet.java:5697) 在 sun.jdbc.odbc.JdbcOdbcResultSet.getString(JdbcOdbcResultSet.java: 353) 在 sun.jdbc.odbc.JdbcOdbcResultSet.getString(JdbcOdbcResultSet.java:410) 在 database.test(database.java:35) 在 _ *SHELL9.run(*_SHELL9.java:8) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java .lang.reflect.Method.invoke(Method.java:601) 在 bluej.runtime.ExecServer$3.run(ExecServer.java:725)

我已经设置了 ODBC 驱动程序并且我的数据库名称是正确的。它不受密码保护。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:34:25.457

您需要通过`ResultSet`with [next()移动光标](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#next%28%29)

```
ResultSet rset = s.executeQuery("SELECT * FROM product");
if (rset.next()) {
   System.out.println(rset.getString("title"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:34:28.480

A`ResultSet`是一个集合，所以你必须`iterate`超过它：

```
ResultSet rset = s.executeQuery("SELECT * FROM product");
while(rset.next()){
    System.out.println(rset.getString("title"));
} 
```

PS不要忘记关闭`ResultSet`and`Statement`当你完成它们。

# sql - SQL Server：Tempdb：每个实例而不是每个数据库？

> ID：13434028
> 
> 赞同：0
> 
> 时间：2012-11-17T19:30:11.243
> 
> 标签：sql, sql-server, database

tempdb 系统数据库是由系统按实例创建还是按 SQL Server 上的数据库创建？

我相信它是按实例创建的，是真的吗？

恳请指导！

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:51:12.840

这是每个实例。每个实例都有 1 个 tempdb，每次 SQL Server 重新启动时都会重新创建它。

# function - 使用打字稿的函数类型

> ID：13434030
> 
> 赞同：1
> 
> 时间：2012-11-17T19:30:13.330
> 
> 标签：function, typescript

为什么我必须将函数转换为`Function`类型才能访问`apply`和其他成员？

```
var a: Function = () => {};
a.apply(); // works

var a = () => {};
a.apply(); // does not work 
```

我应该如何使用这些功能？：

```
function a(){}
a.apply(); // does not work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:45:04.543

如果您将“this”参数传递给`apply`函数，它似乎可以通过任何一种方式工作：

```
var a = () => {};
a.apply(null);

var b: Function = () => {};
b.apply(null); 
```

# django - Django 应用程序似乎对基于 date.today() 过滤的新请求使用旧的 QuerySet 结果

> ID：13434031
> 
> 赞同：3
> 
> 时间：2012-11-17T19:30:13.643
> 
> 标签：django, caching, django-queryset, tastypie

我有一个 Django 应用程序，由 nginx 服务器上的 uWSGI 进程提供服务。这个应用程序使用tastepie 进行API 管理，使用memcached 缓存一些模板块。

**我的问题是 API 请求不断返回旧结果。**

我正在按日期过滤我的查询

```
queryset = Event.objects.filter(status='P').exclude(date_end__lt=date.today()).order_by('-featured', 'date_end') 
```

但是每天返回的对象都是一样的。

我还`date.today`出于调试目的添加到上下文中，它正确输出了当前日期。

**当我重新启动 uWSGI 进程时，QuerySet 被正确评估。**

所以我从这个问题中排除了 DB 和 memcached。在我看来，某种 QuerySet 缓存似乎是由美味派或 uWSGI 进程完成的。

我已经阅读了美味的[缓存文档](http://django-tastypie.readthedocs.org/en/latest/caching.html)并尝试了 NoCache 类但没有成功。

我还阅读[了有关 QuerySet 缓存的 Django 文档，](https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets)但 QuerySet 对象不应该在每次请求后被丢弃吗？

**更新**

我检查了响应标头，客户端缓存在 60 秒后过期，最长期限为一小时。

```
HTTP/1.1 200 OK
Server: nginx/1.2.6
Date: Mon, 18 Feb 2013 10:47:03 GMT
Content-Type: application/json; charset=utf-8
Connection: keep-alive
Last-Modified: Mon, 18 Feb 2013 10:44:56 GMT
Expires: Mon, 18 Feb 2013 10:54:56 GMT
Cache-Control: max-age=600 
```

**更新**

我按照建议更改了我的查询

```
 queryset = Event.objects.filter(status='P').exclude(date_end__lt=date.today).order_by('-featured', 'date_end') 
```

但结果还是一样。

这是一个 JSON 输出示例

```
{
    "date_begin": "11/17/2012",
    "date_end": "11/17/2012",
    "description": "Presentazione del libro di Daniela Giusto",
    "featured": false,
    "location": "Libreria antiquaria Romeo Prampolini",
    "resource_uri": "/api/v1/event/213/",
    "time": "18:00:00",
    "title": "Un insolito Jules Verne. Tradurre umorismo e fantasia",
    "today": "2012-11-18",
} 
```

`date_begin`并`date_end`以不同的方式格式化以实现 javascript 兼容性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:09:06.620

您的 QuerySet 对象在 Tastypie 中不是请求范围的；它在请求中持续存在。因此，您的 date.today 仅被评估一次（即使您将 date.today 函数作为参数而不是其返回值传递），而不是像您期望的那样每个请求。从 Tastypie 文档中查看[这个食谱以获得修复。](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:28:44.827

试试这个作为你的查询集值：

```
queryset = Event.objects.filter(status='P').exclude(date_end__lt=date.today) 
```

# android - TabHost 中的 Activity 中的 ListView

> ID：13434033
> 
> 赞同：0
> 
> 时间：2012-11-17T19:30:33.330
> 
> 标签：android, listview, android-activity, android-tabhost

好的，我这里有一个相当复杂的小设置。我的主要活动是 a `TabHost`，其中一个选项卡显示一些文本、一个按钮，然后是一个`ListView`. 出于某种原因，`ListView`将只显示 1 个项目。当我添加更多项目时，仅显示列表中的第一个项目。

选项卡菜单.xml：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:configChanges="orientation|keyboardHidden|screenSize">
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/tabhost" android:layout_width="fill_parent"
         android:layout_height="wrap_content">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:orientation="vertical">
        <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="bottom"
                android:scrollbarStyle="outsideInset"
                android:scrollbars="horizontal"/>
        <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent" android:layout_height="fill_parent">
            <include layout="@layout/main"/>
            <include layout="@layout/scheduler"/>
        </FrameLayout>
    </LinearLayout>
</TabHost>
</ScrollView> 
```

Scheduler.xml：（这是列表视图所在的位置）

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/schedulerLayout">

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_alignParentTop ="true"
        android:gravity="center"
        android:paddingBottom="20dp"
        android:id="@+id/timeLayout">
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/currentHours"
            android:textSize="50dp"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="50dp"
            android:text=":"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/currentMinutes"
            android:textSize="50dp"/>
    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center_vertical"
            android:orientation="vertical">
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/ampm"/>
    </LinearLayout>
    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center_vertical"
            android:paddingLeft="10dp"
            android:orientation="vertical">
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/currentDayOfWeek"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/currentDate"/>
    </LinearLayout>
</LinearLayout>

<Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/scheduleButton"
        android:text="@string/newSchedule"
        android:layout_below="@id/timeLayout"/>
<!--android:enabled="false"-->

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/scheduleButton"
        android:paddingTop="5dp"
        android:orientation="vertical">
    <View
            android:layout_width="fill_parent"
            android:layout_height="2dip"
            android:background="#FFFFFFFF"/>

    <ListView
            android:id="@+id/scheduler_list_view"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    <!--                android:focusable="false"
            android:focusableInTouchMode="false"-->
</LinearLayout>

</RelativeLayout> 
```

主.java：

```
//adds tabs to view
spec = tabHost.newTabSpec("Auto Respond")
        .setIndicator(" Auto Respond ")
        .setContent(R.id.mainLayout);

tabHost.addTab(spec);

spec = tabHost.newTabSpec("Scheduler")
        .setIndicator(" Scheduler ")
        .setContent(R.id.schedulerLayout);

tabHost.addTab(spec);
tabHost.getTabWidget();

//start setup of list display
int number = 0;
ArrayList<HashMap<String, ?>> data = new ArrayList<HashMap<String, ?>>();
HashMap<String, Object> row  = new HashMap<String, Object>();

//gets number of items, gets title, startTime, etc. here (lots of code, so I cut it out)

if(curTitle != null && !curTitle.equals(""))
{
    row  = new HashMap<String, Object>();

    row.put("Title", curTitle);
    row.put("Time", time);
    row.put("Day", dayText);
    row.put("Month", monthText);
    data.add(row);
}

//create list
SimpleAdapter adapter = new SimpleAdapter(this,
        data,
        R.layout.schedulerow,
        new String[] {"Title","Time","Day", "Month"},
        new int[] { R.id.scheduleListTitle, R.id.scheduleListTime,R.id.scheduleListDays, R.id.scheduleListMonths});

listview.setAdapter(adapter); 
```

关于为什么它只显示我的第一项的任何想法`ListView`？我尝试简单地更改`Activity`为`ListActivity`FC'd。我真的不想重新编写所有代码以使其作为 . 工作`ListActivity`，所以我想尽可能保留它`Activity`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:11:57.640

您正在尝试显示大量信息，并且您已将 ListView 嵌套在 ScrollView 中...您是否必须滚动才能看到 ListView？

嵌套两个可滚动视图通常不起作用，因为在这种情况下，ListView 会使用阻止 ScrollView 滚动的手势，这反过来又会阻止您看到整个 ListView。

# for-loop - 使用 .bat 为所有打印机禁用 SSNPNotifyEventSetting

> ID：13434034
> 
> 赞同：1
> 
> 时间：2012-11-17T19:30:34.030
> 
> 标签：for-loop, batch-file, registry, printers

我正在尝试编写一个批处理脚本，它将遍历以下注册表项并更新不同的子键：

“HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Print\Printers\”

例如：

```
reg add HKLM\System\CurrentControlSet\Control\Print\<Some Printer>\PrinterDriverData /t REG_DWORD /v SSNPNotifyEventSetting /d 0 
```

我需要为安装的每台打印机运行该更新，我认为 FOR 语句应该能够。我只是不擅长 FOR 语句，这就是我需要帮助的原因。这是我迄今为止研究/尝试过的：

```
set var1="HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Print\Printers\"

FOR /F "PrinterDriverData" %%F IN ('REG QUERY %var1%') DO REG ADD %var1%\%%F\PrinterDriver\Data /t REG_DWORD /v SSNPNotifyEventSetting /d 0 
```

我知道这可能是遥不可及的，但据我自己所知。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:10:58.297

这是我想出的解决方案。不确定这是最好的方法还是最简单的方法，但到目前为止它有效。请随时批评或改进。

```
set key="HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Print\Printers"

reg query %key% > temp.txt

FOR /F "delims=" %%a IN ('findstr /B "HKEY_LOCAL_MACHINE" temp.txt') DO (
    if /I NOT "%%a" == %key% (
        reg add "%%a\PrinterDriverData" /f /t REG_DWORD /v SSNPNotifyEventSetting /d 0 
    )
) 
```

首先，我查询注册表并将所有需要的 reg 键保存到一个文本文件中。然后，在 FOR 循环中，我在文件中搜索不同的注册表项，如果不在根项中，则添加新的子项。我已将此添加到我正在构建的用于修复打印服务器的工具中，到目前为止它一直很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:45:22.403

请参考以下批处理文件，该文件可以从注册表项中列出打印机，然后您可以将打印机名称传递给您的脚本以执行更多操作。

列表打印机.bat

```
@echo off
for /f "tokens=1-8 delims=\" %%a in ('reg query "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Print\Printers"') do if "%%g" NEQ "" @echo %%g 
```

# c# - C# 中的端口映射不起作用

> ID：13434037
> 
> 赞同：2
> 
> 时间：2012-11-17T19:30:38.057
> 
> 标签：c#, upnp, portforwarding

我需要在用 C# 编写的桌面应用程序中执行端口转发

我使用了这段代码：

```
using System;
using System.Threading;
using NATUPNPLib;

namespace iSpyApplication
{
    public static class NATControl
    {
        public static UPnPNAT NAT = new UPnPNAT();
        private static IStaticPortMappingCollection _mappings;

        public static IStaticPortMappingCollection Mappings
        {
            get
            {
               if (_mappings==null)
               {

                   try
                   {
                       if (NAT.NATEventManager != null)
                        _mappings = NAT.StaticPortMappingCollection;
                   }
                   catch
                   {
                   }
               }

               return _mappings;
            }
         }

        public static bool SetPorts(int wanPort, int lanPort)
        {
           bool b = false;
           int i = 3;
           while (Mappings == null && i > 0)
           {
               Thread.Sleep(2000);
               i--;
           }

           if (Mappings != null)
           {
               try
               {
                   Mappings.Remove(wanPort, "TCP");
               }
               catch (Exception ex)
               {
                   // do something
               }
               try
               {
                   Mappings.Add(wanPort, "TCP", lanPort, internalIP, true, "iSpy");
                   b = true;
               }
               catch (Exception ex)
               {
                   // do something
               }
           }

           return b;

        } // method

  } // class    

} // namespace 
```

在我的 linksys 路由器中启用了 UPnP

代码正在运行并且没有给出任何错误或异常，但是，映射根本没有发生。

这是我测试它的方式：

1.  我有一个监听内部端口的应用程序，例如 8080。
2.  我手动将映射条目添加到我的路由器：

    应用程序：HTTP，外部端口 8080，内部端口 8080，协议：TCP，内部 IP，启用

3.  我在浏览器中请求以下 URL：http://publicIP:externalport/

4.  应用程序在内部端口上接收到一个套接字并回复一条消息。

我删除映射条目并尝试以编程方式添加它

1.  相同
2.  我运行一个执行映射的代码
3.  相同
4.  浏览器显示以下消息：

    无法连接

    Firefox 无法在 publicIP:externalPort 建立与服务器的连接

我搜索了执行映射的 C# 代码，它们看起来都一样。为什么映射会失败？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:34:07.417

**想法1**：`IStaticPortMappingCollection.Add`确实有一个返回值，你应该检查它是否有错误。

**想法 2**：您的路由器可能不允许您通过 UPnP 设置静态路由。

从[UPnP 开发人员工具](http://opentools.homeip.net/dev-tools-for-upnp)运行**DeviceSpy**并查找您的路由器。它的 URN 以. 在设备下，寻找 service 。查找服务名称后面的数字。如果是，那你就不走运了。服务描述（可在[UPnP 网站上](http://upnp.org/resources/upnpresources.zip)下载）在以下位置声明：`*:InternetGatewayDevice``WANIPConnection``2``WANIPConnection``PortMappingLeaseDuration`

> 在 1.0 版中，值 0 用于创建静态端口映射。在 2.0 版中，不再可以通过 UPnP 操作创建静态端口映射。相反，需要一种带外机制来执行此操作（参见 WWW 管理、远程管理或本地管理）。

即使您`WANIPConnection`仍然是 version `1`，您也可以使用**DeviceSpy**来确定路线是否真的由您的代码设置。

# node.js - 在 Express 3.x 中使用布局

> ID：13434040
> 
> 赞同：1
> 
> 时间：2012-11-17T19:31:00.160
> 
> 标签：node.js, express

我发现的所有指南似乎都引用了 Express 的早期版本，据我了解，此功能从 2.x 到 3.x 有所改变。我假设由于`npm install express`当前安装的是 3.0.3 版本，因此 3.x 被认为是稳定的并且可以用于生产。（不是这样吗？）

我想使用 EJS 或 Kiwi 模板，如果可能的话，我想在模板中使用 Underscore。

但我的第一个障碍是获得围绕我的内容/部分呈现的布局。

鉴于：

```
$ express --ejs test 
```

index.js：

```
exports.index = function(req, res){
  res.render('index', { title: 'test' });
}; 
```

我已经创建了 layout.ejs，但是当我查看源代码时可以看到它没有被调用。

布局是否已完全传递给模板库以在 Express 3.x 中处理（因此，如果选择的模板库没有实现它们，那么您就是 SOL）？

如果它仍然是 Express 的一部分，我该如何配置它？如果它必须由模板库实现，我在 EJS 或 Kiwi 文档中都看不到布局说明——这是否意味着它们根本不受支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:47:12.243

使用 ejs-locals 获得布局支持（也提供块和部分）...因为布局已在 express 3.x 中删除。

[https://github.com/RandomEtc/ejs-locals](https://github.com/RandomEtc/ejs-locals)

从示例中运行 node app.js 并打开 localhost:3000 以查看一个工作示例。

给定一个模板，index.ejs：

```
<% layout('boilerplate') -%>
<% script('foo.js') -%>
<% stylesheet('foo.css') -%>
<h1>I am the <%=what%> template</h1>
<% block('header', "<p>I'm in the header.</p>") -%>
<% block('footer', "<p>I'm in the footer.</p>") -%> 
```

还有一个布局，boilerplate.ejs：

```
<!DOCTYPE html>
<html>
  <head>
    <title>It's <%=who%></title>
    <%-scripts%>
    <%-stylesheets%>
  </head>
  <body>
    <header>
      <%-blocks.header%>
    </header>
    <section>
      <%-body -%>
    </section>
    <footer>
      <%-blocks.footer%>
    </footer>
  </body>
</html> 
```

# java - 我在这个 java 程序中的 while 循环有什么问题？

> ID：13434042
> 
> 赞同：0
> 
> 时间：2012-11-17T19:31:15.350
> 
> 标签：java, loops, if-statement, while-loop

当我运行程序时，它运行**else**部分并执行，但在**if**部分它只是保持循环并且不会停止，直到我不得不强行停止它。我正在尝试为它提供从 1 到 4的*选择*参数以及不低于 1 的*仪表的参数。是否有替代参数的方法？*

```
import java.util.*;

public class Project4

{
    public static void showKilometers(double meters) //this is a parameterized function

    {
        double kilometers = meters * 0.001;
        System.out.println(meters +" meters is " + kilometers + " kilometers.");
    }

    public static void showInches(double meters)
    {
        double inches = meters * 39.37;
        System.out.println(meters +" meters is " + inches + " inches.");
    }

    public static void showFeet(double meters)
    {
        double feet = meters * 3.281;
        System.out.println(meters +" meters is " + feet + " feet.");
    }

    public static void quitProgram()
    {
        System.out.println("Goodbye!");
        System.out.println(0);
    }
    public static void showMenu()
    {
        System.out.println(" 1\. Convert to kilometers ");
        System.out.println(" 2\. Convert to inches ");
        System.out.println(" 3\. Convert to feet ");
        System.out.println(" 4\. Quit the program ");
        System.out.println(" ");
    }

    public static void main (String [] args)
    {

        double meters;
        int choice;

        Scanner keyboard = new Scanner (System.in);

        System.out.println("Enter a distance in meters: ");
        meters = keyboard.nextDouble();
        while (meters <=0 || meters > 0)
        {
            if (meters > 0)
            {
                showMenu();
                meters = keyboard.nextDouble();
            }
            else
            {
                System.out.println("Please enter a number greater than 1");
                meters = keyboard.nextDouble();
                showMenu();
            }
        }

        choice = keyboard.nextInt();
        switch(choice) //note the use of switch case
            {
            case 1: showKilometers(meters);
            break;
            case 2:showInches(meters);
            break;
            case 3:showFeet(meters);
            break;
            case 4:
            quitProgram();
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:33:08.927

这是一个无限循环。你不妨写`while (true)`

尝试`while (meters <= 0)`要么`while (meters >0)`

或者：

```
Scanner keyboard = new Scanner (System.in);

System.out.println("Enter a distance in meters: ");
meters = keyboard.nextDouble();
while (meters < 1 || meters.isNaN())
{
    System.out.println("Please enter a number greater than 1");
    meters = keyboard.nextDouble();
    showMenu();
} 
```

您的输出还指定“大于 1”，因此您的条件需要同意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:34:25.063

```
 while (meters <=0 || meters > 0) is an infinite loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T09:43:49.243

循环中指定的条件是矛盾的。条件必须像这样使用：

```
while (meters >= 0)
{
    // logical statements here if the condition is satisfied
}
else
{
    // logical statements here if the condition is not satisfied
} 
```

# svg - 仅将黑色填充对象发送到图层的背面。SVG 编辑器

> ID：13434046
> 
> 赞同：0
> 
> 时间：2012-11-17T19:31:47.760
> 
> 标签：svg, jquery-svg

我在 SVG-EDITOR 上工作了很长时间。我想让编辑器根据它们的填充属性即时堆叠所有绘制的对象（在我编辑时）。这会将所有具有填充颜色的对象：黑色自动发送到后面。

有任何想法吗？

基本上我希望所有颜色填充为黑色的对象在绘制后自动发送到后面。只有黑色填充的对象。关于编码的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:58:26.487

您应该说明您正在使用哪个库来创建 SVG 节点，或者指定您是否不使用任何库（您可能应该使用一个库来专注于您的编辑器的特定功能）。

如果您自己创建节点，则需要动态地重新组织它们，以便您希望在堆栈中的对象在 SVG DOM 中**的其他对象之前结束。**

如果它是 javascript，您可以使用 insertBefore 来执行此操作，例如，查看这个[类似的问题](https://stackoverflow.com/questions/6566406/svg-re-ordering-z-index-raphael-optional)并给出很好的答案。

如果您使用的是 Raphaël.js，您可以在创建的节点上使用 .toBack() 方法。如果您正在使用另一个库，请检查它是否具有将项目向下发送到堆栈的类似功能。

由于形状是作为编辑器功能创建的，因此您应该知道使用的颜色是否为黑色并相应地发送回。

# php - 比较 3 个区域的字符串

> ID：13434053
> 
> 赞同：-1
> 
> 时间：2012-11-17T19:32:09.453
> 
> 标签：php, comparison, compare

我想比较 3 个区域的数字

例如：

当 $a > 0 且 < 80 时回显红色

当 $a > 80 且 < 100 时回显黄色

当 $a > 100 echo RED

我的代码现在的问题是：当 $a=80 我没有结果

这是我的代码：

```
<?php

$a=80;

if(($a > 0) && ($a < 80))
{
echo('RED');
}
if(($a > 80) && ($a < 100))
{
echo('YELLOW');
}
if($a > 100)
{
echo('GREEN');
}

?> 
```

[你可以在这里](http://codepad.org/XqKXqKTZ)看到 $a=79 的测试

[并且这里](http://codepad.org/mKNv45ok)有 $a=80

我怎么能意识到这一点？也许以更小更好的方式：D

不知道这是否重要.. 但是 $a 可以是 80.1 并且可以大于 100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:34:42.307

您需要确定要`80`成为哪种颜色。在这个例子中，我会做到的`RED`

```
$a=80;

if(($a > 0) && ($a <= 80)){
    echo('RED');
}elseif(($a > 80) && ($a < 100)){
    echo('YELLOW');
}elseif($a > 100){
    echo('GREEN');
} 
```

你注意到`=`在`$a <= 80`

此外，您将遇到同样的问题，`100`因此`0`您也需要处理这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:34:51.463

您可以使用`<=`（小于或等于）和`>=`（大于或等于）符号来缩小此差距：

```
if(($a > 0) && ($a <= 80)) {
    echo('RED');
} if(($a > 80) && ($a <= 100)) {
    echo('YELLOW');
} if($a > 100) {
    echo('GREEN');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:36:51.803

无需为每个语句执行 2 个条件，因为您可以这样做

```
<?php
    $a = 80;
    if ($a > 0) {
        if ($a <= 80) echo "RED";
        else if ($a <= 90) echo "YELLOW";
        else echo "GREEN";
    }
?> 
```

**更新**：重写我的代码以适应`from 0 to 80 RED from 80.000001 to 90 YELLOW`

# java - MyDoggy：在调整窗口大小而不是底部工具窗口时调整内容大小？

> ID：13434057
> 
> 赞同：0
> 
> 时间：2012-11-17T19:32:22.370
> 
> 标签：java, swing, docking

MyDoggy 文档和示例并没有真正的帮助（TutorialSet 有同样的问题，而 MyDoggySet 有不可读的代码），所以也许这里有人可以帮助我。

我正在构建一个编辑器，我想要可停靠的框架。我使用了 MyDoggy 但我有一个问题：当我调整窗口大小时，它不会调整内容大小，而是调整底部 ToolWindow 的大小，如下所示：

![调整大小之前](../Images/4d838523bb05dfd18520fb956e39d3a9.png)

进入这个：

![调整大小后](../Images/3dfdf0b2c361e78d153c3b32cf29f4f4.png)

如何使文本编辑器（选项卡式组件）而不是 ToolWindow 调整大小？

这是一些相关的代码（对不起，混乱，它来自无数次尝试解决这个问题）：

```
toolWindowManager = new MyDoggyToolWindowManager();
contentManager = toolWindowManager.getContentManager();
MultiSplitContentManagerUI contentManagerUI = new MyDoggyMultiSplitContentManagerUI();
contentManager.setContentManagerUI(contentManagerUI);
contentManagerUI.setShowAlwaysTab(true);
contentManagerUI.setTabPlacement(TabPlacement.TOP);
errorDisplay = toolWindowManager.registerToolWindow("Errors",
        "Errors", null, new ErrorList(), ToolWindowAnchor.BOTTOM);
        errorDisplay.setType(ToolWindowType.DOCKED);
DockedTypeDescriptor dockedTypeDescriptor = (DockedTypeDescriptor) errorDisplay
        .getTypeDescriptor(ToolWindowType.DOCKED);
dockedTypeDescriptor.setDockLength(100);
dockedTypeDescriptor.setPopupMenuEnabled(true);
RepresentativeAnchorDescriptor<?> representativeAnchorDescriptor = errorDisplay
        .getRepresentativeAnchorDescriptor();
representativeAnchorDescriptor.setPreviewEnabled(true);
representativeAnchorDescriptor.setPreviewDelay(1500);
representativeAnchorDescriptor.setPreviewTransparentRatio(0.4f);
errorDisplay.setAvailable(true);
errorDisplay.setActive(true);
newDocument();
for (ToolWindow window : toolWindowManager.getToolWindows())
    window.setAvailable(true); 
```

新文件：

```
...
Content c = cm.addContent("editor_untitled" + id, "Untitled " + id,
            null, new EditorPane(), null, new MultiSplitConstraint(curDoc));
...
TabbedContentUI contentUI = (TabbedContentUI) c.getContentUI();
contentUI.setCloseable(true);
contentUI.setDetachable(true);
contentUI.setTransparentMode(true);
contentUI.setTransparentRatio(0.7f);
contentUI.setTransparentDelay(1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:37:33.460

我发现解决方案隐藏在 sourceforge 论坛中，由于某种原因没有被 Google 索引。

[http://sourceforge.net/projects/mydoggy/forums/forum/614985/topic/3263489](http://sourceforge.net/projects/mydoggy/forums/forum/614985/topic/3263489)

我所要做的就是将推开模式设置为水平。

```
toolWindowManager.getToolWindowManagerDescriptor().setPushAwayMode(PushAwayMode.HORIZONTAL); 
```

# python - 如何在python中正则表达式特定键的值

> ID：13434059
> 
> 赞同：1
> 
> 时间：2012-11-17T19:32:32.683
> 
> 标签：python, regex

我有一个长字符串，其中包含这种格式的键值：

```
"info":"infotext","day":"today","12":"here","info":"infotext2","info":"infotext3" 
```

我想获取所有“信息”键的值（= infotexts）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T19:41:17.300

使用 json，卢克

```
s = '"info":"infotext","day":"today","12":"here","info":"infotext2","info":"infotext3"'

import json

def pairs_hook(pairs):
    return [val for key, val in pairs if key == 'info']

p = json.loads('{' + s + '}', object_pairs_hook=pairs_hook)
print p # [u'infotext', u'infotext2', u'infotext3'] 
```

从[文档](http://docs.python.org/library/json.html#module-json)：

> object_pairs_hook 是一个可选函数，将调用使用有序对列表解码的任何对象文字的结果。将使用 object_pairs_hook 的返回值而不是 dict。

只是为了完整起见，这里有一个做同样的正则表达式：

```
rg = r'''(?x)

    "info"
    \s* : \s*
    "
        (
            (?:\\.|[^"])*
        )
    "
'''
re.findall(rg, s) # ['infotext', 'infotext2', 'infotext3'] 
```

这也处理字符串中的空格`:`和转义引号，例如

```
 "info"  :   "some \"interesting\" information" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T19:37:54.303

只要您`infotext`不包含（转义）引号，您就可以尝试这样的事情：

```
>>> m = re.findall(r'"info":"([^"]+)', str)
>>> m
['infotext', 'infotext2', 'infotext3'] 
```

我们简单地匹配`"info":"`然后尽可能多的非`"`字符（被捕获并因此返回）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:38:41.870

使用这个正则表达式`(?<="info":")(.+?)(?=")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T19:40:55.657

```
In [140]: import re

In [141]: strs='''"info":"infotext","day":"today","12":"here","info":"infotext2","info":"infotext3"'''

In [146]: [x.split(":")[-1].strip('"') for x in  re.findall(r'"info":"\w+"',strs)]
Out[146]: ['infotext', 'infotext2', 'infotext3'] 
```

# python-2.7 - urllib2如何支持多个版本的python？

> ID：13434060
> 
> 赞同：0
> 
> 时间：2012-11-17T19:32:57.540
> 
> 标签：python-2.7, urllib2, python-2.5

我希望我的代码支持 python >= 2.5 代码使用 urllib，如下所示：

```
handle = urllib2.urlopen(req, timeout) 
```

这适用于 python2.6 和 python2.7 但 python2.5 不支持显式超时，因此我们必须为套接字设置默认超时，如下所示：

```
import socket
socket.setdefaulttimeout(timeout)
handle = urllib2.urlopen(req) 
```

虽然这适用于更高版本的 python（2.6 和 2.7），但我想在支持的地方明确设置超时。我的问题是如何优雅地做到这一点？我应该做版本检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:04:25.110

总是有`try`，这对于这类事情来说非常完美：

```
import socket
import urllib2

try:
    handle = urllib2.urlopen(req, timeout = timeout)
except TypeError:
    socket.setdefaulttimeout(timeout)
    handle = urllib2.urlopen(req) 
```

（确保在第一次调用中为此使用关键字参数，否则 python 2.5 会认为您正在向它传递 'data' 参数。）

# full-text-search - 我需要能够选择两个 ID

> ID：13434063
> 
> 赞同：1
> 
> 时间：2012-11-17T19:33:13.997
> 
> 标签：full-text-search, prototypejs

大家好，我需要能够通过多个 ID block0_b7 和 block1_b7 进行搜索。这是我当前的代码：

```
 <script type="text/javascript">
 window.onload = function() {
var searchString = "Incident",
    pageContent = document.getElementById("block1_b7").innerHTML;
var searchString2 = "Voice Services",
    pageContent = document.getElementById("block1_b7").innerHTML;
var searchString3 = "Data Service EVDO-1X & LTE",
    pageContent = document.getElementById("block1_b7").innerHTML;
if (pageContent.indexOf(searchString) != -1) 
   document.getElementById("areas").style.display = "inline";
if (pageContent.indexOf(searchString2) != -1) 
   document.getElementById("dropdown").style.display = "inline";
if (pageContent.indexOf(searchString3) != -1) 
   document.getElementById("dropdown2").style.display = "inline";
}
</script>  <script type="text/javascript">
    var mydropdown = document.getElementById('dropdown');
    var mydropdown2 = document.getElementById('dropdown2');
 var myareas = document.getElementById('areas');
    mydropdown.onchange = function(){
         comment_body.value = comment_body.value +'\n'+ this.value;
  var f = document.forms[2].submit();
           f.submit();
    }
 mydropdown2.onchange = function(){
        comment_body.value = comment_body.value +'\n'+ this.value;
  var f = document.forms[2].submit();
           f.submit();
    }
 myareas.onchange = function(){ 
        comment_body.value = comment_body.value +'\n'+ this.value;
           var f = document.forms[2].submit();
           f.submit();
    } 
```

我试过这个：

```
var x, divArray = ["block1_b7", "block0_b7"];
for (x in divArray) {
        if (x) {
var searchString4 = "Incident",
  var  pageCon = document.getElementById(divArray[x]).innerHTML; 
} 
```

我不能使用 jquery，但我有原型 1.7。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:50:58.853

如果你有可用的 PrototypeJS，你可以简化很多这个 javascript

`$()`PrototypeJS 有一个与 PrototypeJS相同的实用函数，`document.getElementById()`但它会返回一个扩展了所有 PrototypeJS 函数的 DOM 元素。您还可以将多个 id 传递给`$()`将返回一组扩展 DOM 元素的函数。

让我们看看你的第一个`<script>`块

```
window.onload = function() {
var searchString = "Incident",
    pageContent = document.getElementById("block1_b7").innerHTML;
var searchString2 = "Voice Services",
    pageContent = document.getElementById("block1_b7").innerHTML;
var searchString3 = "Data Service EVDO-1X & LTE",
    pageContent = document.getElementById("block1_b7").innerHTML;
if (pageContent.indexOf(searchString) != -1) 
   document.getElementById("areas").style.display = "inline";
if (pageContent.indexOf(searchString2) != -1) 
   document.getElementById("dropdown").style.display = "inline";
if (pageContent.indexOf(searchString3) != -1) 
   document.getElementById("dropdown2").style.display = "inline";
} 
```

这可以简化为以下。请注意该`show()`方法，如果链上更远的样式将元素显示设置为“无”，`show()`则将无效。您也可以使用第二行直接设置样式。

```
window.onload = function() {
var searchStrings = ["Incident", "Voice Services", "Data Service EVDO-1X & LTE"];
searchStrings.each(function(str) {
    if($("block1_b7").innerHTML.include(str)) {
        $("block1_b7").show();
        //$("block1_b7").setStyle({display, "inline"});
    }
}); 
```

`$()`在方法中使用多个 ID

```
window.onload = function() {
var searchStrings = ["Incident", "Voice Services", "Data Service EVDO-1X & LTE"];
searchStrings.each(function(str) {
    $("block0_b7", "block1_b7").each(function(element) {
        if(element.innerHTML.include(str)) {
            element.show();
            //element.setStyle({display, "inline"});
        }
    }
}); 
```

如果您有多个要检查的 ID，我建议在它们上放置一个类（下面的“searchblocks”），这样您就可以添加更多而无需像这样更新 javascript 代码

```
searchStrings.each(function(str){
    $$(".searchblocks").each(function(element){
        if(element.innerHTML.include(str)){
            element.show();
            //element.setStyle({display:"inline"});
        }
    });
}); 
```

看着你的第二个街区

```
var mydropdown = document.getElementById('dropdown');
var mydropdown2 = document.getElementById('dropdown2');
var myareas = document.getElementById('areas');
mydropdown.onchange = function(){
    comment_body.value = comment_body.value + '\n' + this.value;
    var f = document.forms[2].submit();
    f.submit();
}
mydropdown2.onchange = function(){
    comment_body.value = comment_body.value + '\n' + this.value;
    var f = document.forms[2].submit();
    f.submit();
}
myareas.onchange = function(){ 
    comment_body.value = comment_body.value + '\n' + this.value;
    var f = document.forms[2].submit();
    f.submit();
} 
```

Prototype 通过`observe()`or`on()`方法添加了出色的事件处理——它们是相同的方法，只是名称不同，看起来所有的下拉菜单都在做同样的事情，所以我们也可以为它们添加一个类，例如`selectblocks`

```
$$(".selectblocks").invoke("observe","change",function(){
    comment_body.value += '\n' + this.value;
    $$("form")[2].submit();
}); 
```

稍微解释`$$()`一下，通过 CSS 选择器获取元素并将返回一个扩展的 DOM 元素数组。

`invoke()`将采用一个数组并对数组中的每个项目执行相同的方法，在这种情况下`observe()`，方法名称之后的任何参数都传递给方法，在这种情况下`function()`定义

您可以简化`comment_body.value = comment_body.value + '\n' + this.value;`以使用将`+=`右侧添加或连接到左侧的运算符。

`this`仍然是事件发生的元素

您还可以`$$()`使用符号直接访问元素，该`[]`符号允许您访问页面上的第三种形式并触发`submit()`

让我知道您是否有任何问题以及任何不合理的地方。

# java - 如何验证小程序的路径好吗？小程序 ClassNotFoundException

> ID：13434066
> 
> 赞同：0
> 
> 时间：2012-11-17T19:33:38.327
> 
> 标签：java, tomcat, applet, classnotfoundexception

我在从 tomcat 6 servlet 提供的 HTML 页面中有一个小程序。小程序元素如下：

```
<applet code="com.iteloffice.cuba4remedy.cubaapplet.class" name="cubaapplet"
codebase="http://localhost:8080/cuba4remedy/classes" width="400" height="400" MAYSCRIPT>
<param name="populatefunction" value="populatedropdown">
alt="Your browser understands the &lt;APPLET&gt; tag but isn't running the applet, for some reason."
Your browser is completely ignoring the &lt;APPLET&gt; tag!
</applet> 
```

在我的开发机器上，小程序下载得很好。但是在具有完全相同版本的 Java 和 tomcat 的目标机器上，我得到了如下 IE9 中所示的小程序错误。

```
Java Plug-in 1.6.0_26
Using JRE version 1.6.0_26-b03 Java HotSpot(TM) Client VM
User home directory = C:\Users\Administrator

load: class com.iteloffice.cuba4remedy.cubaapplet.class not found.
java.lang.ClassNotFoundException: com.iteloffice.cuba4remedy.cubaapplet.class
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Exception: java.lang.ClassNotFoundException: com.iteloffice.cuba4remedy.cubaapplet.class 
```

如何验证类路径的路径？

EG tomcat 已开启`http://192.168.0.6:8080`

`webapps`文件夹是`cuba4remedy`

我应该能够在我的网络浏览器中输入此路径吗？

```
http://192.168.0.6:8080/cubaremedy/com/iteloffice/cuba4remedy/cubaapplet.class 
```

小程序中的 package 语句为：

```
package com.iteloffice.cuba4remedy; 
```

在tomcat文件夹结构是这样的：

```
tomcat_root/webapps/cuba4remedy 
```

里面`cuba4remedy`的类文件在：

```
WEB-INF/classes/com/iteloffice/cuba4remedy 
```

编辑：

为了解决这个问题，我如下更改了小程序标记并将小程序类文件放在 webapps 根文件夹中

```
<applet code="cubaapplet.class" name="cubaapplet"
codebase="/cuba4remedy" width="400" height="400" MAYSCRIPT>
<param name="populatefunction" value="populatedropdown">
alt="Your browser understands the &lt;APPLET&gt; tag but isn't running the applet, for some reason."
Your browser is completely ignoring the &lt;APPLET&gt; tag!
</applet> 
```

我看到另一篇关于无法访问 servlet 可以访问的相同路径的帖子如此简化。

将代码库更改为 / 使其更加灵活。

# php - 哪个更好？将结果存储在 Session 中还是重新查询数据库？

> ID：13434069
> 
> 赞同：4
> 
> 时间：2012-11-17T19:33:58.160
> 
> 标签：php, mysql, codeigniter, session

我有一个使用 Codeigniter 和 MySQL 构建的测验网站。

测验使用这两种方法进行评估。

1.  每次用户提交答案时发送请求。（10 个问题的 10 个数据库查询）。
2.  在测验结束时发送请求。（这将需要一个查询和大量的计算来从结果数组中搜索答案。）

我正在考虑将临时（直到未提交测验）数据存储在会话中。

> *注意：存储的数据不是直接从数据库中获取的结果，而是在将其发送到 View 之前使用 PHP 处理的数组*

通过这样做，我可以在第一种情况下保存 10 个查询。
在第二种情况下，它为我节省了数据库查询和处理数据库结果的时间。

在我阅读 Stackoverflow 上的这些问题之前，这是我得到的最佳解决方案

[问题 1](https://stackoverflow.com/questions/9940298/php-which-is-the-better-way-between-storing-data-into-session-and-database) [问题 2](https://stackoverflow.com/questions/11475148/is-it-a-good-idea-to-store-and-access-an-active-query-resultset-in-coldfusion-vs) [问题 3](https://stackoverflow.com/questions/5121987/store-it-in-session-or-query-db-each-page-load)

从上述问题中得到的基本思想是使用数据库查询（由于 KISS 规则，可能会返回陈旧数据）。

是的，它会占用大量磁盘空间，但我认为同时它正在提高网站的性能。

所以我的**问题**是：
1.“存储计算结果”或“重新查询然后计算结果”哪个更好？
2\. 会话将如何影响网站的性能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T19:40:07.277

什么是“更好”实际上取决于您希望网站如何执行。如果用户会话因任何原因丢失，您是否希望忘记部分完成的测验数据？

一般来说，不要关心“它将进行多少查询”，至少不是针对这个特定问题（特别是因为您可能无论如何都将与会话相关的数据存储在数据库中），而要关心“是什么让最有意义的。”

无论如何，对于每个页面请求，您至少要往返一次（可能是几次）数据库，插入/更新正确索引的行的额外查询不会成为问题。当某人的浏览器崩溃或以某种方式（您或他们的错）失去会话时丢失某人的测验结果可能是您更感兴趣避免的事情。

简而言之：您没有提供一个非常有说服力的理由来不将用户答案存储在数据库中，并且可能有几十个（如果不是更多）很好的理由不依赖用户的会话。

编辑补充：记住，数据库的工作很简单：存储数据。将其用于预期用途。;)

# c++ - 魔方（旋转和跟踪）

> ID：13434071
> 
> 赞同：2
> 
> 时间：2012-11-17T19:34:03.573
> 
> 标签：c++, opengl, rubiks-cube

我是 C++ 和 openGL 的新手，所以请记住，我的编码技能不是一流的，但我学得很快。

所以，因为我最喜欢的拼图是魔方，所以我决定释放我的创造力，所以现在我正在制作一个 3D 魔方，我正在使用四边形单独表示每个魔方（不包括核心部分的 26 块）。（计划在我学会如何使用纹理之后使用它们）

现在我可以使用 glRotatef 旋转相机并查看整个立方体。

我偶然发现的主要问题是自己旋转每个面，并跟踪立方体以确定它们现在属于哪些面，这也将确定如果面旋转它们是否会受到影响。

在这一点上，我意识到使用 glRotatef 对前进没有好处，所以我四处搜索并发现了**四元数**，所以我阅读了一堆关于它们的教程，但我不知道如何实现和使用它们。

这是我阅读的最后一篇教程：

[http://www.cprogramming.com/tutorial/3d/quaternions.html](http://www.cprogramming.com/tutorial/3d/quaternions.html)

我的请求将是一个非常简单的示例，说明如何实现它并在我的显示功能中使用它。

至于跟踪小方块，我目前正在考虑为每个部分使用 6 个布尔值来确定它们通过中心部分的位置。

如果您对管理面部旋转有任何其他更好的想法或概念，请告诉。

问候，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:34:58.243

> 我偶然发现的主要问题是自己旋转每个面，并跟踪立方体以确定它们现在属于哪些面，这也将确定如果面旋转它们是否会受到影响。

基本上，这就是你的整个算法。您可以做的是拥有一个包含 6 个“面孔”的数据结构。这些面是立方体的侧面。每个面都有一个指向 NorthFace、SouthFace、EastFace 和 WestFace 的指针。此外，每个面将包含 3 行 3 列立方体。您现在应该有必要的操作来移动一个面朝下等等。

# c++ - 如何让 clang-3.1 出现在 XCode 的编译器列表中？

> ID：13434072
> 
> 赞同：0
> 
> 时间：2012-11-17T19:34:04.073
> 
> 标签：c++, xcode, clang

[我的问题与这个问题](https://stackoverflow.com/questions/11277347/clang-3-1-on-xcode-4-2-snow-leopard)有些相关。
我有 OSX Lion，安装了 macports clang-3.1，但我认为我没有看到它出现在 Xcode 编译器（它们是 LLVM GCC 3.1 和 Apple LLVM 编译器 3.0）中。我有 XCode 4.2。

如何让 clang-3.1 出现在 XCode 的编译器列表中？
任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:04:41.333

在这里找到答案：（[链接）](https://stackoverflow.com/questions/7981599/llvmclang-support-of-c11)

它说我只需要将 C++ 语言方言设置为 C++11，并将 C++ 标准库设置为 libdc++。

另一方面，我也按照@StephenChu 的建议进行了升级。（它毫无进展，谢谢。）

# python - 如何将列表的每个元素保存在 .txt 文件中，每行一个？

> ID：13434080
> 
> 赞同：8
> 
> 时间：2012-11-17T19:35:12.970
> 
> 标签：python, list, text, io

我有一个清单，`pList`。我想将它保存到文本 ( `.txt`) 文件中，以便列表的每个元素都保存在文件的新行中。我怎样才能做到这一点？

这就是我所拥有的：

```
def save():
    import pickle
    pList = pickle.load(open('primes.pkl', 'rb'))
    with open('primes.txt', 'wt') as output:
      output.write(str(pList))
    print "File saved." 
```

但是，该列表仅保存在文件的一行中。我想要它，所以每个数字（它只包含整数）都保存在新行上。

例子：

```
pList=[5, 9, 2, -1, 0]
#Code to save it to file, each object on a new line 
```

期望的输出：

```
5
9
2
-1
0 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T19:39:22.320

只需打开您的文件，使用所需的分隔符加入您的列表，然后打印出来。

```
outfile = open("file_path", "w")
print >> outfile, "\n".join(str(i) for i in your_list)
outfile.close() 
```

由于列表包含整数，因此需要进行转换。（感谢您的通知，Ashwini Chaudhary）。

无需创建临时列表，因为生成器是通过 join 方法迭代的（再次感谢 Ashwini Chaudhary）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-17T19:46:59.573

你可以`map`在`str`这里使用：

```
pList = [5, 9, 2, -1, 0]
with open("data.txt", 'w') as f:
    f.write("\n".join(map(str, pList))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:45:40.313

请参阅此答案以获取将项目添加到给定文件的新行的函数

[https://stackoverflow.com/a/13203890/325499](https://stackoverflow.com/a/13203890/325499)

```
def addToFile(file, what):
    f = open(file, 'a').write(what+"\n") 
```

因此，对于您的问题，您需要遍历列表，而不仅仅是将列表传递给文件。

```
for item in pList:
    addToFile(item) 
```

# opencv - linux Mint的opencv编译（安装）错误？

> ID：13434082
> 
> 赞同：1
> 
> 时间：2012-11-17T19:35:30.270
> 
> 标签：opencv, compiler-errors, installation

我正在按照[该教程](http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation)安装和编译opencv，但在执行的某个点（安装的%22）后会产生以下错误`make`

```
...
[ 22%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/system.cpp.o
[ 22%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/tables.cpp.o
Linking CXX shared library ../../lib/libopencv_core.so
CMake Error: cmake_symlink_library: System Error: Operation not permitted
CMake Error: cmake_symlink_library: System Error: Operation not permitted
make[2]: *** [lib/libopencv_core.so.2.4.9] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_core.dir/all] Error 2
make: *** [all] Error 2 
```

我看不出问题的原因。我以root身份运行它，但它`not permitted error`以任何方式提供。我也换了不同的文件夹进行安装，但是还是不行。

有什么建议可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T09:05:50.983

我也有这个问题。最后，我意识到我将 opencv 源代码放在文件夹中，该文件夹是指向另一个文件夹的符号链接。我只是将文件夹放在我的主文件夹中并再次制作。问题解决了。我不知道你是怎么得到这个问题的，希望我的解决方案对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T02:29:42.527

我已经解决了这个问题....实际上我的根文件系统上的内存非常低，所以我使用本教程使用“ntfs-3g”驱动程序将我的 pendrive 安装到系统

[https://help.ubuntu.com/community/Mount/USB](https://help.ubuntu.com/community/Mount/USB)

但请注意不要盲目陡峭。

在此之后，当我从我的 pendrive 编译文件时，我没有收到错误“CMake 错误：cmake_symlink_library：系统错误：不允许操作”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-24T17:38:04.823

不要在 FAT 系统上编译 opencv，因为无法在这些文件系统上设置可执行位导致它失败。使用 ext4 应该足以避免此类问题。

这里有一套很好的安装 opencv 的教程：

[https://www.pyimagesearch.com/2018/05/28/ubuntu-18-04-how-to-install-opencv/#comment-475432](https://www.pyimagesearch.com/2018/05/28/ubuntu-18-04-how-to-install-opencv/#comment-475432)

# google-app-engine - 如何禁止谷歌应用引擎？

> ID：13434085
> 
> 赞同：0
> 
> 时间：2012-11-17T19:36:03.627
> 
> 标签：google-app-engine

有人正在使用谷歌应用引擎来爬取我的网站。有没有办法禁止谷歌应用引擎来防止这种情况？我不想让用户缓存我网站上的数据。

是否有谷歌应用引擎使用的完整IP？这将有助于开发人员能够防止被盗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:35:54.747

您可以检查 AppEngine-Google 请求的用户代理并拒绝这些请求。可以在此处找到有关请求标头的更多信息：

[https://developers.google.com/appengine/docs/python/urlfetch/overview#Request_Headers](https://developers.google.com/appengine/docs/python/urlfetch/overview#Request_Headers)

# nginx - Nginx 多根定位

> ID：13434086
> 
> 赞同：0
> 
> 时间：2012-11-17T19:36:06.440
> 
> 标签：nginx, location, root

我有一个这样定义的位置。

```
location ~ \.(jpg|jpeg|png|gif|swf|flv|mp4|mov|avi|wmv|m4v|mkv|ico|css|js|txt|html|htm)$ {
    root /path/to/static/files/;
} 
```

如果我要求`/events.js`它在`/path/to/static/files/`其中工作正常。

但是，如果我请求`/func.js`其中的内容，`/other/path/to/static/files/`将找不到它。

所以我需要的是两个可以找到静态文件的位置。这两个请求之间没有任何其他区别，它们在同一个应用程序中是相同的，唯一的区别是文件的物理位置。另外我不知道文件的名称它们是完全随机的。

## 解决方案

```
location ~ \.(jpg|jpeg|png|gif|swf|flv|mp4|mov|avi|wmv|m4v|mkv|ico|css|js|txt|html|htm)$ {
    root /;
    try_files /path/to/static/files/$uri /other/path/to/static/files/$uri /;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:07:27.263

尝试以下操作：

```
location ~ \.(jpg|jpeg|png|gif|swf|flv|mp4|mov|avi|wmv|m4v|mkv|ico|css|js|txt|html|htm)$ {
  root /;
  try_files /path/to/static/files/$uri /other/path/to/static/files/$uri;
} 
```

请参阅[http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files](http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files)了解其工作原理

# windows-phone-7 - 如何在上下文菜单中获取列表框项的值？

> ID：13434090
> 
> 赞同：0
> 
> 时间：2012-11-17T19:36:54.563
> 
> 标签：windows-phone-7

我试图获取通过上下文菜单选择的列表框项目的**值。**我已经寻找了一个解决方案，我已经看到了一些答案，但他们都没有真正回答我的问题。我尝试的所有其他尝试只是给了我用于绑定数据的类的名称。这是 XAML：

```
<ListBox Name="pubKeyListBox" Height="150" Margin="0,177,0,0" VerticalAlignment="Top">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <toolkit:ContextMenuService.ContextMenu>
                    <toolkit:ContextMenu Name="ContextMenu" >
                        <toolkit:MenuItem Name="email" Header="send via email" Click="email_Click" />
                        <toolkit:MenuItem Name="delete" Header="delete" Click="delete_Click" />
                    </toolkit:ContextMenu>
                </toolkit:ContextMenuService.ContextMenu>
                <TextBlock Text="{Binding pubKey}" FontSize="24" Width="250"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

以及背后的代码：

```
private void email_Click(object sender, RoutedEventArgs e)
    {            
        ListBoxItem selectedKey= this.pubKeyListBox.ItemContainerGenerator.ContainerFromItem((sender as MenuItem).DataContext) as ListBoxItem;

        int selectedItem= pubKeyListBox.ItemContainerGenerator.IndexFromContainer(selectedKey);
        string fileName = pubKeyListBox.Items[selectedItem].ToString();
    } 
```

之后，fileName 包含字符串“Vault.publicKey”，其中 publicKey，如前所述，是用于绑定数据的类的名称。

你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:36:13.527

`DataContext`应该包含绑定到您的 ListBoxItem 的对象。假设`Vault`是您的对象并且`publicKey`是绑定成员：

```
string fileName = ( ( ( sender as MenuItem ).DataContext ) as Vault ).publicKey; 
```

# java - 无法部署到 JBoss 7.1

> ID：13434095
> 
> 赞同：0
> 
> 时间：2012-11-17T19:37:52.543
> 
> 标签：java, jakarta-ee, jboss, jboss-arquillian

在将应用服务器从 Glassfish 更改为 JBoss 7.1 后，我正在尝试运行一些集成测试。但是无法部署。它抛出了这个错误，然后它就停止了。

> 20:35:31,252 INFO [org.jboss.as.server] (management-handler-thread - 9) JBAS015870：部署“9965db9f-a190-4bca-b7a9-c7df3ea6b1d7.war”的部署已回滚，并显示失败消息 {” JBAS014771：缺少/不可用依赖项的服务" => ["jboss.module.service.\"deployment.9965db9f-a190-4bca-b7a9-c7df3ea6b1d7.war\".mainjboss.module.spec.service.\"deployment.arquillian -service\".mainMissing[jboss.module.service.\"deployment.9965db9f-a190-4bca-b7a9-c7df3ea6b1d7.war\".mainjboss.module.spec.service.\"deployment.arquillian-service\".main ]"]}

这是我的POM：

```
 <!-- Arquillian dependencies -->
    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <version>1.0.2.Final</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-arquillian-container-remote</artifactId>
        <version>7.1.2.Final</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-depchain</artifactId>
        <version>2.0.0-alpha-3</version>
        <type>pom</type>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.extension</groupId>
        <artifactId>arquillian-persistence-impl</artifactId>
        <version>1.0.0.Alpha5</version>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-jdk14</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

# hibernate - 如何在 Hibernate 中映射只有行为的类？

> ID：13434097
> 
> 赞同：0
> 
> 时间：2012-11-17T19:38:00.520
> 
> 标签：hibernate, database-design, behavior, strategy-pattern

我在休眠中映射了一些类，这些类基本上是一种策略模式。我有一个类“User”，它知道一个抽象类“UserType”，它声明了一个抽象方法“purchaseSomething()”，子类覆盖了这个方法。现在，我将所有类映射为实体，因此我有三个表。每次用户提交到系统时，当我持久化用户时，这会将他的 UserType 子类实例保存在表中。我希望它有一个名为“UserTypes”的表，只有两个列“id”和“type”，因此每个“Admin”用户将指向表中的同一行，每个“Customer”用户将指向表中的同一行，而不是我已经有了“管理员”

谢谢，任何提示都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:23:20.367

对于纯策略模式，请考虑将您的类型设为 Enum 并[使用 JPA`Enumeration`注释](http://blogs.igalia.com/dpino/2009/07/13/hibernate-mapping-of-a-java5-enum/)。您仍然可以[提供 Enum 抽象方法](http://blog.james-carr.org/2011/04/27/enums-with-abstract-methods/)来填写您的策略。

但是，听起来您实际上可能希望分别存储有关管理员和客户的数据。如果用户是客户或管理员但不是两者，创建子类并使用[joined-subclass](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html)。如果用户可以两者兼有，那么您可能只需要一对一的关系映射。

# function - 如何找到特定 Inkscape 函数的源代码

> ID：13434099
> 
> 赞同：1
> 
> 时间：2012-11-17T19:38:02.360
> 
> 标签：function, open-source, inkscape

我想看看 Inkscape 的 Path->Outset 和 ->Inset 函数的源代码。如何在源代码中找到它？我在看[http://bazaar.launchpad.net/~inkscape.dev/inkscape/trunk/files](http://bazaar.launchpad.net/~inkscape.dev/inkscape/trunk/files) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:07:50.810

我认为最直接的方法是只需下载源代码并使用您喜欢的搜索实用程序在所有文件中搜索文件内容中的函数名称。一些匹配项将是函数调用而不是定义，但您会足够快地筛选这些匹配项。

但是，如果您经常这样做，请考虑将其作为项目加载到诸如 Visual Studio 之类的 IDE 中。然后，您只需右键单击任何文件中的任何函数名称，上下文菜单将为您提供“goto definition”等选项，它将打开正确的文件并将您导航到正确的行。

# c++ - C++ 大向量搜索项

> ID：13434102
> 
> 赞同：1
> 
> 时间：2012-11-17T19:38:39.413
> 
> 标签：c++, pointers, vector, reference, erase

第一次在这里发帖，这让我发疯了！我不能很好地解释它，所以我会尝试举一个例子。

我正在尝试检索一个非常大（ 100k ）向量中的元素以将其擦除。迭代槽需要很长时间......所以我尝试了这个：

这是我列表中的一个小例子。它存储在我的单例粒子发射器类中。

```
vector<Particle> particles;
particles.reserve(100); 
```

这是我的粒子的剥离版本

```
class Particle
{
Particle:
~Particle:

void Delete
{
  int listNum = (this - &particles[0]);
  particles.erase(particles.begin+listNum);
}
}; 
```

这一切都很好，但我不想将每个粒子都保存在堆栈上，所以我想改变它

```
vector<Particle> particles; 
```

进入

```
vector<Particle*> particles; 
```

现在我的问题是：如果向量由粒子指针组成，是否仍然可以从列表中删除和擦除粒子？

我不确定我是否清楚我的问题，但我希望你能理解！

或者，如果有人知道更好的性能明智的解决方案，我想听听！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:43:34.603

您打算如何使用它`std::vector`？

您说迭代需要很长时间，但如果您的目标是迭代所有值，那么您根本无法比连续数组做得更好。你谈到从容器中删除元素，这表明你需要一个动态数组，这正是它的本质`std::vector`。

无论如何，您绝对不想存储原始指针向量。如果您测量并发现由于使用某些操作而导致性能不足，您的两个选项应该是`std::vector<Particle>`（通常首选）或（仅限 C++11）。`std::vector<unique_ptr<Particle>>`取决于您的用例，`std::map<Particle>`或者`std::set<Particle>`可能是好主意，但我们没有足够的信息。

您没有`Particle`在堆栈上存储任何内容。a 中的每个元素`std::vector`都已经在空闲存储区（“堆”）中。

您的插入和删除代码也应该与您的课程无关`Particle`。插入和删除是对容器的操作，而不是对包含的元素的操作。

要回答你的问题，我们需要知道一些事情。

首先，有多大`Particle`？这可能是最重要的信息。

其次，你用容器做什么？您通常是在查看每一个`Particle`并与它们一起做事，还是`Particle`在整个容器中寻找特定的？如果您正在搜索，您是否尝试根据某种键进行查找（例如，每个键`Particle`都有一个唯一的 ID，并且您在该 ID 上查找整个`Particle`ID），或者您是否正在查找一个是否`Particle`与另一个匹配（所以换句话说，您根据`Particle`) 的身份进行查找？

如果您正在查找个人`Particle`，那么`std::set`可能应该是您易于使用的首选，因为它允许二进制搜索。如果您的用例让您按键搜索粒子，那么您将需要`std::map<Key, Particle>`.

如果你有一堆粒子并且你想从容器中删除一些，那么对象的大小就很重要了。`std::vector`但是，对于这种情况，您通常需要一个。

简而言之，我需要更多信息才能完全回答您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T19:51:13.577

如果您担心将向量放入堆栈，为什么不尝试这样的事情：

```
vector <Particle> * particles = new vector <Particle>; 
```

这将使向量持续到你`delete`为止。此外，如果您担心性能问题，a`set`将是一个好主意。这保证了所有插入和删除都是对数时间，并且您不必使用自己的删除函数。要在 C++11 中获得更好的性能，请尝试`unordered_set`.

# javascript - 如何正则表达式替换其中少于 3 个字符的段落？

> ID：13434104
> 
> 赞同：0
> 
> 时间：2012-11-17T19:38:50.603
> 
> 标签：javascript, regex

所以基本上，我有这个：

```
str.replace(/<p><\/p>|<p>\.<\/p>/g); 
```

试图删除里面没有或少于 3 个字符的所有段落。正则表达式的第一部分可以正常工作，但是像这样的段落：`<p>.</p>`不要被删除。对不起新手问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:40:14.177

使用以下正则表达式。

```
<p>.{0,2}</p>
   ^ any character, 0 - 2 times (you said less than 3) 
```

转义`.`as`\.`匹配文字`.`。

这是一个演示：http: [//jsfiddle.net/yQ5pu/1/](http://jsfiddle.net/yQ5pu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:55:01.993

试试这个正则表达式。`/<\s*(p|P)[^>]*>([^<.]{0,3}|\..{1,2}|.{1,2}\.)<\s*\/(p|P)\s*>/g` 这将匹配`<p>`标签，不区分大小写，并且段落可以具有不同的属性。

例子：

```
var str = "<p>test</p><p>t</p><P>tes</P><p class=\"someclass\">s</p>< p >some long text</p>";
str.replace(/<\s*(p|P)[^>]*>([^<.]{0,3}|\..{1,2}|.{1,2}\.)<\s*\/(p|P)\s*>/g, ''); 
```

还有一个 jsfiddle 示例：http: [//jsfiddle.net/Tkwk5/3/](http://jsfiddle.net/Tkwk5/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:58:57.567

你不需要玩这些标签，浏览器为所有这些提供了一个 API，它运行得更快，更不容易出现错误/漏洞，以及烦人的“为什么我的浏览器死机？” 怪癖。

```
var pTags = document.getElementsByTagName("p"); 
```

就是这样。页面中的每个标签现在都是变量 pTags 内文档元素数组的一部分。

然后，您可以检查任何给定 pTags[i] 内部的内容，并通过以下方式将其删除：

```
pTags[i].parentNode.removeChild(pTags[i]); 
```

当然，还有其他方法可以为此使用[DOM API](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T19:44:29.100

```
<p>[0-9A-Za-z]{0,2}</p> 
```

段落 {0,2} 之间的任何字符或数字出现少于 3 次。

# delphi - 如何在 Delphi 中将键盘用作盲文键盘？

> ID：13434106
> 
> 赞同：2
> 
> 时间：2012-11-17T19:39:30.173
> 
> 标签：delphi, keyboard-events, braille

我尝试处理事件`onKeyDown`和`onKeyUp`. 当只按下两个键时，该程序可以完美运行。

对于超过 2 个键的组合，如果 2 个键已经被按下（因此它们被按下），则不会捕捉到另一个键的压力，因此组合 FGH 被视为对应于不同盲文符号的 FG。

此外，当同时按下 3 个或更多键时，`onKeyDown`捕获的事件数量并不总是相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:03:29.530

廉价键盘可能会带来一些麻烦！在这里，您有一个简单的测试程序来测试您的键盘。（不要忘记定义表单 OnKeyDown 和 OnKeyUp 事件。）

```
type
  TForm8 = class(TForm)
    procedure FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form8: TForm8;

implementation

{$R *.dfm}

procedure TForm8.FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
var
  State   :TKeyboardState;
  n       :integer;
  s       :string;
begin
  GetKeyboardState(State);
  s := '';
  for n := Low(byte) to High(byte) do
    if State[n] and 128 <> 0 then
      s := s + 'VK(' + IntToStr(n) + ') ';
  Caption :=  s;
end;

procedure TForm8.FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
var
  State   :TKeyboardState;
  n       :integer;
  s       :string;
begin
  GetKeyboardState(State);
  s := '';
  for n := Low(byte) to High(byte) do
    if State[n] and 128 <> 0 then
      s := s + 'VK(' + IntToStr(n) + ') ';
  Caption :=  s;
end;

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:26:20.980

使用[GetAsyncKeyState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)。它不仅返回键的当前状态，还返回自上次调用以来是否按下了键。可以同时按下的键的数量是有限制的。我认为这个限制大约是 8 个键，但硬件、驱动程序和操作系统版本之间可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T21:21:05.500

使用[GetKeyboardState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646299%28v=vs.85%29.aspx)，您可以检索每个键的状态的完整数组。要捕获像盲文符号这样的多个按键，您必须以高序列调用它，例如从具有非常小的 Interval 的 TTimer 或从 TThread 继承的类中调用它。也有机会按下两个或更多按钮，按键不会同时在所有键上注册，因此您必须跟踪并仅采用符合标准的组合，例如存在最长。

# amazon-s3 - 如何在 Nagios 中配置非主机服务？

> ID：13434107
> 
> 赞同：4
> 
> 时间：2012-11-17T19:39:45.077
> 
> 标签：amazon-s3, nagios

我需要监控 AWS S3 存储桶中存在的一些文件，为此我创建了一个简单的 Nagios 插件。现在我必须对其进行配置并将其定义为如下命令：

```
define command{
        command_name    check_s3file_exist
        command_line    /usr/lib/nagios/plugins/check_s3_exist.py $ARG1$
} 
```

现在需要在服务定义中使用该命令，但据我所知，Nagios 以主机的概念为中心，但 S3 不是主机，所以我不知道在哪里调用此命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:54:15.970

我最终从 Nagios 监控的服务器之一调用了这个命令。看起来 Nagios 监控必须与主机绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T09:27:07.713

您可以定义禁用主动检查和启用被动检查的虚拟主机。然后提交被动检查结果为 OK - 您将永远拥有此状态。

我使用随机 IP 创建了名为“Internet 访问”的主机，并做了我上面写的，因为网络中不允许对外部主机的 icmp 请求。然后我添加了一些公共网页的检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:43:13.583

Nagios 只是绑定到在其主机中定义的 HOSTNAME 以检查，只要您使用预定义的命令。在下面的示例中，命令将被预定义为

```
check_http -H $HOSTNAME$ ... 
```

您正在寻找已经可用的命令

```
/usr/lib/nagios/plugins/check_http -H www.google.de -u /maps 
```

其中*u*参数是要检查的所需 URI

所以只需定义命令

```
define command{
    command_name    check_s3file_exist
    command_line    /usr/lib/nagios/plugins/check_http -H $ARG1$ -u $ARG2$
} 
```

# capybara - Capybara poltergeist phantomjs JavascriptError on Audio

> ID：13434111
> 
> 赞同：3
> 
> 时间：2012-11-17T19:39:57.973
> 
> 标签：capybara, phantomjs, poltergeist

我遇到了一个例外：

> Capybara::Poltergeist::JavascriptError

和调试输出：

> "args"=>[[{"message"=>"ReferenceError: 找不到变量：音频"

[这是我在研究错误时发现的：](http://www.sencha.com/forum/archive/index.php/t-244870.html?s=5c41aabec2b71023a193652e607c65b7)

> 这个问题是由于 sencha 2.0 使用 phantomjs 来解决依赖关系。Phantomjs 不支持 HTML5 音频 API。

问题是：如何在使用 capybara/poltergeist 时忽略 javascript Audio 类型的 javascript 错误？

我试过了

```
visit "/"
page.execute_script "var Audio= function(){ return { load: function(){}, play: function(){} } }" 
```

但是访问方法会抛出错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T22:40:49.630

Phantomjs 不支持[此处](https://github.com/ariya/phantomjs/wiki/Supported-Web-Standards)`Audio`git 文档中指定的内容

我遇到了同样的问题，并且还尝试使用您所描述的代码来遵循您的方法，但不使用`var`它将在全局范围内定义。

```
page.execute_script "Audio= function(){ return { load: function(){}, play: function(){} } }" 
```

我用检查器对其进行了测试，`page.driver.debug`它在 phantomjs 中正确定义`Audio`，然后的问题是，它在需要之前没有被执行。

`Audio`因此，我的方法是在我的实际代码中将其与函数一起实际使用之前添加一个检查以验证是否已定义。这是我拥有的功能的一个例子：

```
getAudioObject = function(file_path){
  if (typeof Audio !== "undefined" && Audio !== null) {
    audioObj = new Audio(file_path);
    audioObj.loop = true;
    return audioObj;
  }
} 
```

那是我的解决方案，它对我有用。我希望这对你也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T19:11:42.650

要在初始化任何资源脚本之前正确定义全局变量，请使用“onInitialized”处理程序。

# c - 在 C 中搜索 .csv 文件以查找名称匹配项

> ID：13434113
> 
> 赞同：2
> 
> 时间：2012-11-17T19:40:05.677
> 
> 标签：c, search, csv, find, replace

我目前有一个 .csv 文件，其中包含三个字段：用户、密码、类型。例如，我的文件如下所示：

```
michael, sun123, user  
joseph, sierra7, user  
isaac, apple2, sysop 
```

我想从此类文件中读取并检查列表中是否存在用户“isaac”。到目前为止，我能够打开文件并将文件的每个字符放入一个名为 database[] 的一维数组中。我设置了一个指针，指向我的 database[] 数组的第一个字符。我的问题是：如何在文件中找到“isaac”？

我的想法是检查我正在寻找的用户的第一个字符是否与我的数组中的一个字符匹配。如果是这样，只要不打逗号，我就会开始检查下一个字符。当我点击一个逗号时，我会使用布尔值检查在回车之前是否存在密码、逗号和类型。有没有更简单的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:52:01.313

您可以使用 的结果`strstr(database, "isaac");`在您的`database[]`.

您可以使用`strtok`（或者它是安全的变体，在此处详细说明[http://msdn.microsoft.com/en-us/library/ftsafwz3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ftsafwz3%28v=vs.80%29.aspx)）将您分解`database[]`为更易于管理的项目（即标记化逗号和换行符）满足您的解析需求。

`strtok`和`strstr`或的组合`strcmp`可能是您想要的。

# javascript - 使用实时数据更新热图

> ID：13434117
> 
> 赞同：1
> 
> 时间：2012-11-17T19:40:21.827
> 
> 标签：javascript, google-maps, jquery, websocket

我正在使用 websockets 将数据从服务器发送到客户端。这很好用，例如，我可以显示服务器在收到消息时发送给客户端的消息。我能够将其转换为经度和纬度。

因此，当从服务器接收到数据时，它应该在我的 html 中绘制到地图上，但它似乎根本没有绘制任何东西。

我对 javascript 完全陌生，所以不确定我的代码是否正确。我想要做的是很快收到数据，将其直接绘制到地图上，从而生成热图。这是代码的 javascript 方面：

```
<script>
    $(document).ready(function() {
        var ws = new WebSocket("ws://" + "localhost" + ":" + "8888" + "/ws");
        var London = new google.maps.LatLng(51.507335, -0.127683);

    var map = new google.maps.Map(document.getElementById('map_canvas'), {
        center: London,
        zoom: 3,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var pointArray = new google.map.MVCArray([]);           
    ws.onmessage = function(evt){  
            //$("#display").append(evt.data + "<br />");

            var msg = JSON.parse(evt.data);
            var coordinates = msg.coordinates.coordinates;
            var latLng = new google.maps.LatLng(coordinates[1], coordinates[0]);
            console.log('received');
            pointArray.push(latLng);
            var heatmap = new google.maps.visualization.HeatmapLayer({
                data: pointArray
            });
            heatmap.setMap(map);

            //$("#display").append(latLng + "<br />");

            //console.log(evt.data);

    };

    ws.onclose = function(evt) {alert("Server connection terminated");};
   });      
    $("#open").click(function(evt){
    evt.preventDefault();
    $.post("/", $("#eventForm").serialize());   

});

</script> 
```

是否有一种方法可以在接收到数据时将其存储到数组中，但是我不确定如何使用数组中的元素更新地图是否已接收到。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:57:01.897

我不能确定这是否是唯一的问题，但您似乎在这里遇到了范围界定问题 -

```
ws.onmessage = function (evt) {
    var msg = JSON.parse(evt.data);
    var coordinates = msg.coordinates.coordinates;
    var latLng = new google.maps.LatLng(coordinates[1], coordinates[0]);
};
...
var heatmap = new google.maps.visualization.HeatmapLayer({
    data: latLng
}); 
```

作用域在 javascript 中的工作方式是 latLng 仅可用于声明它的函数内的代码。解决此问题的一种简单方法是仅在它们共享的范围内声明它-

```
var latLng;
ws.onmessage = function (evt) {
    var msg = JSON.parse(evt.data);
    var coordinates = msg.coordinates.coordinates;
    latLng = new google.maps.LatLng(coordinates[1], coordinates[0]);
};
...
var heatmap = new google.maps.visualization.HeatmapLayer({
    data: latLng
}); 
```

这将使 click 函数中代码的其他部分可以访问 latLng。

其他一些可能的问题：

如果您想逐步将数据添加到地图中，您的结构通常有点偏离。您想要做的是在网页内创建一个地图，然后不断向其中添加数据 - 无需每次都创建新地图。您可能应该做的是在 ready 函数中创建地图，而不是单击。

此外，谷歌地图中有一个热图图层；如果您为接收到的每一位数据创建新的热图，您将覆盖您放入先前热图中的所有内容。鉴于您最近的编辑，看起来您已经得出了相同的结论。

我也不太确定您的 websocket 代码是否足够好。websocket“onmessage”函数不会立即返回结果：相反，它提供有关如何处理未来任何时候传入的任何数据的说明。因此，如果您想在每次数据进入时更新地图，您不需要在点击事件上对 websockets 做任何事情。

这将导致像这样结构松散的代码 -

```
$(document).ready(function () {
    var ws = new WebSocket("ws://" + "localhost" + ":" + "8888" + "/ws");
    var London = new google.maps.LatLng(51.507335, -0.127683);

    var map = new google.maps.Map(document.getElementById('map_canvas'), {
        center: London,
        zoom: 3,
        mapTypeId: google.maps.MapTypeId.SATELLITE
    });

    var pointArray = new google.map.MVCArray([]);
    ws.onmessage = function (evt) {
        var msg = JSON.parse(evt.data);
        var coordinates = msg.coordinates.coordinates;
        pointArray.push(new google.maps.LatLng(coordinates[1], coordinates[0]));
        var heatmap = new google.maps.visualization.HeatmapLayer({
            data: pointArray
        });
        heatmap.setMap(map);
    };

    $("#open").click(function (evt) {
        // whatever code you want click to do
    });
}); 
```

我无法测试任何代码，因为我没有您特定的 websocket 设置，但希望这可以为您提供更好的基础。

# objective-c - 在文本中显示浮点数

> ID：13434118
> 
> 赞同：1
> 
> 时间：2012-11-17T19:40:23.183
> 
> 标签：objective-c

我有一个简单的函数，它返回一个浮点数，如下所示。

```
float offset (int secs){
    return secs/3600;
} 
```

给定 secs = 19800，如果我在下面使用它，我最终会得到 5 而不是 5.5。

```
num01.text=[NSString stringWithFormat:@"%.1f",offset(t01)]; // t01 is 19800 
```

我究竟做错了什么？我该怎么做才能将 num01 （标签）的字符串值设置为 5.5 ？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:44:58.337

返回值在被解析为浮点数之前是一个 int。

只需将其中一个操作数转换为浮点数或使用 3600.0：

```
return secs/3600.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:51:25.433

问题是您的代码采用[**整数除法**](http://en.wikipedia.org/wiki/Integer_division#Division_of_integers)的结果并将其转换为浮点数。所以，它是这样的：

“计算以秒为单位的整数除以整数 3600 所得结果的商。将其转换为浮点数并返回结果。” 即 19,800/3600 = 5。转换为 5.0 并返回。

相反，从一开始就使用浮点数，方法是更改​​您的函数以接受浮点数或首先将您的数字转换（转换）为浮点数：

```
return (float)sec / 3600.0; 
```

# operating-system - 特权级别实施

> ID：13434119
> 
> 赞同：5
> 
> 时间：2012-11-17T19:40:36.240
> 
> 标签：operating-system, cpu, privileges

我知道通常 cpu 可以以两种模式之一运行：高级权限模式，其中启用对硬件中“安全”区域的访问，以及访问其余部分时使用的低级权限模式。中央处理器功能。

我也知道有某种形式的保护机制强制只有操作系统才能在处理器上运行，而它处于高级特权模式（有时称为环 0），并且当任何用户空间进程正在运行处理器时处于低级特权模式（环 3）。

我的问题是：cpu 如何区分在 ring 0 模式下运行的 OS 进程和在 ring 3 中运行的用户空间进程？有什么机制可以确保用户级别的进程永远无法获得 ring 0 特权级别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T04:31:26.243

这取决于处理器，但我将使用 x86。

CPU 不理解进程的概念。那是切换出当前正在运行的代码的操作系统抽象。CPU 通过它所在的页面了解运行代码的权限。

在分页操作系统中，操作系统代码位于页表中标记为主管的页面中，而用户模式代码在页表中标记为用户模式。当 CPU 访问任何内存位置时，在本例中是通过 EIP 的当前指令，CPU 会进行虚拟内存查找。在进行此查找时，CPU 会查看页表并能够检查主管/用户模式标志并以这种方式解释当前指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T02:48:41.953

INT指令自动改变CPU的标志/状态/状态寄存器，从而可以执行特权指令。CPU 的环/特权级别由 CPU 内部的标志/状态/状态寄存器指示。特权指令与状态寄存器的某些位进行“与”运算以执行。

# c# - ProgressRing 变为非活动状态

> ID：13434124
> 
> 赞同：3
> 
> 时间：2012-11-17T19:41:12.087
> 
> 标签：c#, xaml, windows-8, async-await

我正在构建一个需要从 Internet 下载 RSS 数据的 Windows 8 应用程序。

有一个等待的 GetFeedsAsync() 方法负责此操作，在我的应用程序主页的（异步）LoadState 方法中调用。

我选择将该任务委托给后台线程：

```
await Task.Run(() => feedDataSource.GetFeedsAsync()); 
```

我想要的只是显示一个 ProgressRing 并使其保持活动状态，直到该过程完成并准备好显示下载的数据。

我在 XAML 中定义了 ProgressRing：

```
<ProgressRing  x:Name="LoadingProgressRing" IsActive="True"  Foreground="White" Margin="0,400,0,0" Width="80" Height="80" VerticalAlignment="Top"  Canvas.ZIndex="1" /> 
```

然后在代码隐藏中添加这两行：

```
LoadingProgressRing.IsActive = true;
await Task.Run(() => feedDataSource.GetFeedsAsync()); 
LoadingProgressRing.IsActive = false; 
```

当应用程序启动时，它会导航到主页，其中 ProgressRing 显示 1 秒钟然后消失。数据下载在 20 秒后完成，然后按原样显示。

为什么 ProgressRing 会这样？我想不出任何理由让它变得不活跃，直到

```
LoadingProgressRing.IsActive = false; 
```

命令被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:34:54.093

尝试将*Grid.Row="1"*添加到您的 ProgressRing 元素，即：-

```
<ProgressRing  x:Name="LoadingProgressRing" IsActive="True"  Foreground="White" Margin="0,400,0,0" Width="80" Height="80" VerticalAlignment="Top"  Canvas.ZIndex="1" Grid.Row="1"  /> 
```

**编辑**

澄清一点-我遇到了进度条出现一秒钟然后消失的确切问题，这与等待无关，而是因为我没有为我的页面上的进度条指定网格行。

我的页面有两个行定义：

> ```
>  <Grid.RowDefinitions>
>         <RowDefinition Height="140"/>
>         <RowDefinition Height="*"/>
>     </Grid.RowDefinitions> 
> ```

# objective-c - XCode Cocos2d EXC_BAD_ACCESS 错误

> ID：13434125
> 
> 赞同：0
> 
> 时间：2012-11-17T19:41:16.487
> 
> 标签：objective-c, xcode, cocos2d-iphone, exc-bad-access

我按照教程做了一个小游戏。游戏过程如下，你控制一条特殊的鱼；敌鱼在周围产卵，目标是吃掉其他鱼。

我的问题是我希望能够以任何顺序吃任何鱼。现在只能吃最后生成的敌鱼。

当我尝试以错误的顺序吃鱼时，它会因 EXC_BAD_ACCESS code=1 错误而崩溃。

我尝试修复它几个小时，但找不到它！

这是我的代码：

```
@implementation HelloWorldLayer
NSMutableArray *_targets;
bool ScheduleVerification=NO;
NSMutableArray *ArraySides;

-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) ) {
    CGSize winSize = [[CCDirector sharedDirector] winSize];
   player = [CCSprite spriteWithFile:@"Fish1.png"
                                           rect:CGRectMake(0, 0, 15, 15)];
    NSLog(@"//Init//");
    _targets=[[NSMutableArray alloc] init];
  [self schedule:@selector(update:)];
    [self schedule:@selector(tracks:) interval:1];
    self.isTouchEnabled = YES;
    CCSprite *background = [CCSprite spriteWithFile:@"UnderwaterBackground.png"];
    background.position = ccp(winSize.width/2, winSize.height/2);
    CGSize BBox=[background boundingBox].size;
    [background setScaleX:(winSize.width)/BBox.width];
[background setScaleY:(winSize.height)/BBox.height];
    player.position = ccp(winSize.width/2, winSize.height/2);
    [self addChild:background];
    [self addChild:player];
}
return self;
}
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
NSLog(@"CB1");
UITouch *touch=[touches anyObject];
CGPoint location=[touch locationInView:[touch view]];
location=[[CCDirector sharedDirector]convertToGL:location];
if (location.x<player.position.x){[player setFlipX:YES];}
if (location.x>=player.position.x){[player setFlipX:NO];}

[player runAction:[CCSequence actions:
                [CCMoveTo actionWithDuration:1.5 position:location],
                nil]];   
}
-(void)spriteMoveFinished:(id)sender {
   NSLog(@"CLEANUP");
CCSprite *sprite = (CCSprite *)sender;

    [_targets removeObject:sprite];
    [self removeChild:sprite cleanup:YES];

}
-(void)addTarget {
 NSLog(@"//addTarget//");
CCSprite *target = [CCSprite spriteWithFile:@"BadFish1.png"
                                       rect:CGRectMake(0, 0, 15, 15)];

// Determine where to spawn the target along the Y axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minY = target.contentSize.height/2;
int maxY = winSize.height - target.contentSize.height/2;
int rangeY = maxY - minY;
int actualY = (arc4random() % rangeY) + minY;
target.tag = 1;
[_targets addObject:target];

int ranSides=arc4random()%2;

int actualSide=winSize.width;
if (ranSides==0){actualSide=0;}

target.position = ccp(actualSide, actualY);
[self addChild:target];
NSLog(@"TARGET %@",target);

// Create the actions
id actionMove = [CCMoveTo actionWithDuration:15
                                    position:ccp(winSize.width, actualY)];
if (ranSides==1){actionMove = [CCMoveTo actionWithDuration:15
                                                  position:ccp(0, actualY)];
    [target setFlipX:YES];

}

id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                         selector:@selector(spriteMoveFinished:)];
[target runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

}
-(void)gameLogic:(ccTime)dt {
 NSLog(@"CB2");
[self addTarget];
ScheduleVerification=NO;

}

-(void)tracks:(ccTime)dt {
NSLog(@"CB3");
int FishInterval=arc4random()%7+3;
// [self cleanup];

if (ScheduleVerification==NO){[self schedule:@selector(gameLogic:) interval:1 repeat:0 delay: FishInterval];}
ScheduleVerification=YES;
}

- (void)update:(ccTime)dt {

//  NSMutableArray *playerToDelete = [[NSMutableArray alloc] init];
//NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
    CGRect playerRect = CGRectMake(
                                       player.position.x - (player.contentSize.width/2),
                                       player.position.y - (player.contentSize.height/2),
                                       player.contentSize.width, 
                                       player.contentSize.height);

              for (CCSprite *target in _targets) {
        CGRect targetRect = CGRectMake(
                                       target.position.x - (target.contentSize.width/2),
                                       target.position.y - (target.contentSize.height/2),
                                       target.contentSize.width,
                                       target.contentSize.height);

        if (CGRectIntersectsRect(targetRect, playerRect)) {
        [_targets removeObject:target];[self removeChild:target cleanup:YES];
 //   [targetsToDelete addObject:target];
        }
        }
}
- (void) dealloc
{
NSLog(@"DEALLOC");
[_targets release];
_targets = nil;
[super dealloc];
} 
```

并在 .h 文件中：

```
@interface HelloWorldLayer : CCLayerColor
{
CCSprite *player;

} 
```

我应该怎么做才能以任何顺序吃鱼？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:49:47.470

您正在犯下令人发指的罪行，在遍历数组时从数组中删除元素。

更好地格式化您的代码，然后查看它：

```
for (CCSprite *target in _targets) {
    CGRect targetRect = CGRectMake(
        target.position.x - (target.contentSize.width/2),
        target.position.y - (target.contentSize.height/2),
        target.contentSize.width,
        target.contentSize.height);
    if (CGRectIntersectsRect(targetRect, playerRect)) {
        [targetsToDelete addObject:target];
    }
    if (targetsToDelete.count > 0) {
        NSLog(@"Target Deleted");
        NSLog(@"targets %@",_targets);
        NSLog(@"target %@",target);
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];
    }
} 
```

您拥有的事实`targetsToDelete`向我表明（通过预先考虑或您遵循的教程），它旨在正确地做到这一点。但是有几件事出错了。

考虑一下：

```
for (CCSprite *target in _targets) {
    CGRect targetRect = CGRectMake(
        target.position.x - (target.contentSize.width/2),
        target.position.y - (target.contentSize.height/2),
        target.contentSize.width,
        target.contentSize.height);
    if (CGRectIntersectsRect(targetRect, playerRect)) {
        [targetsToDelete addObject:target];
    }
}

for(CCSprite* target in targetsToDelete) {
    NSLog(@"Target Deleted");
    NSLog(@"targets %@",_targets);
    NSLog(@"target %@",target);
    [_targets removeObject:target];
    [self removeChild:target cleanup:YES];
}

[targetsToDelete removeAllObjects]; 
```

您现在运行`_targets`，将每个添加到您吃过的`targetsToDelete`中，并**在**完成迭代后`_targets`，然后逐个删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:06:10.773

您检查命中的循环看起来非常奇特。为什么要向targetsToDelete 添加项目？我认为 targetsToDelete 的最终版本可能是问题所在。像这样简化循环，看看会发生什么（不在 Mac 前）：-

```
- (void)update:(ccTime)dt {
//  NSMutableArray *playerToDelete = [[NSMutableArray alloc] init];
NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
    CGRect playerRect = CGRectMake(
                                       player.position.x - (player.contentSize.width/2),
                                       player.position.y - (player.contentSize.height/2),
                                       player.contentSize.width, 
                                       player.contentSize.height);

              for (CCSprite *target in _targets) {
        CGRect targetRect = CGRectMake(
                                       target.position.x - (target.contentSize.width/2),
                                       target.position.y - (target.contentSize.height/2),
                                       target.contentSize.width,
                                       target.contentSize.height);

        if (CGRectIntersectsRect(targetRect, playerRect)) {

                 //    [targetsToDelete addObject:target];
                    NSLog(@"Target Deleted");
                    NSLog(@"targets %@",_targets);
                    NSLog(@"target %@",target);

                   [_targets removeObject:target];[self removeChild:target cleanup:YES];

                }

} 
```

# database - VACUUM 数据库和 WAL 模式

> ID：13434128
> 
> 赞同：1
> 
> 时间：2012-11-17T19:41:34.350
> 
> 标签：database, sqlite, vacuum

我有 SQLite 数据库`WAL`模式。每次我`VACUUM`对数据库执行 a 时，日志模式都会在`DELETE`我下次重新连接时恢复。

例如：

```
PRAMGA journal_mode; -- returns wal
VACUUM;
PRAGMA journal_mode; -- returns wal
-- disconnect then reconnect
PRAGMA journal_mode; -- returns delete 
```

在 SQLite 3.7 中观察到的行为，但似乎在 3.8 中已修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:36:34.110

The `-wal` file will be automatically deleted in certain situations where it's known to be empty, such as closing the DB when there are no other users. It will be automatically recreated when needed, on the next transaction.

The journal mode (as reported by `PRAGMA journal_mode`) should never change during this.

# node.js - Cakefile - 如何--watch 把手目录与咖啡脚本目录相同

> ID：13434129
> 
> 赞同：0
> 
> 时间：2012-11-17T19:41:38.097
> 
> 标签：node.js, coffeescript, handlebars.js, cakefile

当我 --watch 包含 coffeescript 文件的目录时，所有内容都被捕获 - 新文件，立即更改，但是当我查看 handlebars 目录时，它不会查看它。我的想法是否正确——手表只能用于咖啡？

我的 Cakefile 看起来像这样：

```
{spawn} = require "child_process"
fs = require "fs"
handlebars = require "handlebars"

task 'watch', -> 
  spawn 'coffee', ['-cwj', 'js/libs/app.js', 'src/coffee']
  spawn 'handlebars', ['-wf', 'js/libs/templates.js', 'tmpl'] 
```

如何使用 Cakefile 观看自定义目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:09:52.503

是的，`--watch`似乎不是由车把实现的。您可以使用节点[`fs.watch`](http://nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)来破解您自己的观察者。[以下是](http://coffeescript.org/documentation/docs/command.html#section-14)Coffeescript 如何使用它来实现自己的`watch`功能。

就个人而言，我喜欢使用[Guard](https://github.com/guard/guard)来查看文件，即使我正在处理一个非 Ruby 项目。它比设置更容易`fs.watch`。

# iphone - UIViewController 的 navigationController 为 nil

> ID：13434130
> 
> 赞同：7
> 
> 时间：2012-11-17T19:41:47.717
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uinavigationcontroller

我试图从 访问`navigationController`，`UIViewController`由于某种原因它等于`nil`

应用委托：

```
self.mainViewController = [[MainViewController alloc] init];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.mainViewController];
self.window.rootViewController = self.navigationController;
```

主视图控制器：

```
 MyViewController *myViewController = [[MyViewController alloc] init];
[self.navigationController presentModalViewController:myViewController animated:YES];
```

有人遇到过这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:00:43.853

您正在编写大部分正确的代码，但并非所有代码都在正确的位置。你是正确的 UINavController 应该用视图控制器初始化。但是，在您发送的代码中，MainViewController 的 init 方法在导航控制器初始化之前完成。

这是因为您真的不应该让 MainViewController 决定何时展示自己。它应该由自身之外的东西初始化和呈现——在这种情况下是 AppDelegate。

应用委托：

```
MainViewController *mvc = [[MainViewController alloc] init];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:mainViewController];
self.window.rootViewController = self.navigationController; 
```

如果您随后需要 MainViewController 以模态方式呈现某些内容，则应在 viewWillAppear: 或 viewDidLoad: 中进行，而不是在其 init 方法中。`showMyModal`或者，在 MainViewController ( ) 上创建应用程序委托可以调用的公共方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T16:48:05.883

创建 UINavigationController 将您的视图控制器分配给它的根。

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController: myViewController];
[self presentViewController:navController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:03:35.220

UIViewController 可能没有 UINavigationController。
导航控制器只有在您明确设置时才拥有某些控制器：

```
[yourNavController setViewControllers: @[ yourViewController1, ... , yourViewControllerN] ]; 
```

# xcode - 关于学习汇编优化和 SIMD 指令的建议

> ID：13434131
> 
> 赞同：1
> 
> 时间：2012-11-17T19:41:51.217
> 
> 标签：xcode, assembly, llvm, inline-assembly

我从事 C/C++ 程序员多年，但从未学过汇编。我现在正在尝试学习汇编，最终目标是能够使用 SIMD 指令为数学运算编写自己的优化例程。我知道存在包装 SIMD 优化例程的 C/C++ 库，但出于教育原因，我想自己学习如何做。

我真的很感激一些关于如何让我开始的提示，更具体地说：

1.  我正在为我的开发机器（64 位）使用 QuadCore i7 MacBook Pro（视网膜）。我想设置一个环境，一个沙箱，在我学习的过程中我可以在其中进行实验和编写代码。是否可以为此使用 XCode (LLVM) 和内联汇编，如果可以，我将如何处理？（使用 SSE 指令的内联汇编的简单示例会很棒）

2.  我主要对学习如何使用汇编优化数学运算感兴趣，而不必完全用汇编编程。如果内联汇编不是正确的方法，那么替代或推荐的方法是什么？

我是初学者，当然还有很多东西要学。然而，我确实有一个特定的目标，这将是我学习的指导原则。任何有关如何进行学习的建议也将不胜感激。

感谢所有回答并原谅我的无知的人，因为我越来越熟悉这个主题。

# android - 显示错误元素的 ArrayAdapter 库存过滤

> ID：13434133
> 
> 赞同：4
> 
> 时间：2012-11-17T19:42:10.157
> 
> 标签：android, listview, android-adapter

我为我的自定义类扩展了 ArrayAdapter。我的类覆盖`toString()`并返回我想用于搜索查询的字段。

这是我的过滤器代码：

`productItemAdapter.getFilter().filter(filterText.toLowerCase());`

这是我的`toString()`代码：

`return name.toLowerCase();`

过滤正常（返回正确数量的元素），但它是错误的元素。它始终显示列表中的第一个元素，而不是与搜索匹配的元素...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T10:30:27.843

我遇到了完全相同的问题，我会假设（像我一样）你在尝试实现它时没有阅读文档。

我将我的对象数组传递给 ArrayAdapter，然后将数组传递给超级构造函数。

我犯的错误是：我存储了对传入数组的引用，并使用**该**数组在`getView()`方法中绘制项目：

```
 public SimpleAdapter( Context context, List< MyType > values )
 {
    super( context, R.layout.rowlayout, values );
    this.context = context;
    this.values = values;
 }

  @Override
  public View getView( int position, View convertView, ViewGroup parent )
  {
    // ...
    MyType myType = values.get( position );
    // ...
  } 
```

我**应该**做的是`getItem()`在 ArrayAdapter 类上调用，例如

```
 MyType myType = getItem( position ); 
```

它修复得很好，事后看来很明显。

-(e)

# java - 重写嵌套的 for 循环以提供更好的格式化输出

> ID：13434140
> 
> 赞同：1
> 
> 时间：2012-11-17T19:43:14.623
> 
> 标签：java, arrays, if-statement, for-loop, nested-loops

以下是我正在做的大学实践的代码。它读入一个包含 20 个客户端的 txt 文件，其信​​息存储在 txt 文件中，如下所示：

```
Sophia Candappa     F 23 00011 
```

根据讲师的指示，我已将此信息存储在一个名为 Client 的类中（尽管我知道 ArrayList 会更好，但我不能使用它）。
下面的代码是一种用于将所有客户端相互比较并确定它们是否匹配的方法。如果它们都符合以下条件，则它们是匹配的：

1.  异性
2.  年龄相距五年以内
3.  他们有三个共同的兴趣

后者由上例中的字符串“00011”确定。如果客户在三个或多个场合在字符串中的同一位置共享数字“1”，则满足第三个条件。

我的代码完美运行并输出所需的结果。不过，我想问两个问题。

*   它是否尽可能高效（没有 ArrayLists）？我曾考虑将所有 if/else 语句分离为单独的方法，但决定反对它，因为我认为它不会减少任何实际循环。

*   我怎样才能稍微改变输出。目前，如果一个客户端被匹配，它会显示“[Client Name] is compatible with”，然后它会换行并输出所有匹配的客户端。我想更改它，以便如果客户端只有一个匹配项，它会显示“客户端名称兼容”...，但如果客户端有两个或更多客户端，它会显示“客户端名称与以下 [两个/三/四]客户...

我试过做后者，但我总是弄乱格式。提前感谢您提供的任何帮助。

```
public static void matchClients(Client[] clientDetails)
{
    boolean anyMatch;
    int count;
    for (int b = 0; b < numberOfClients; b++)
    {
        anyMatch = false;
        count = 0;
        for (int c = 0; c < numberOfClients; c++)
        {
            if (clientDetails[b].getClientGender()!=clientDetails[c].getClientGender())
            {
                if (Math.abs(clientDetails[b].getClientAge() - clientDetails[c].getClientAge()) <= 5)
                {
                    int interests = 0;

                    String clientOneInterests = clientDetails[b].getClientInterests();
                    String clientTwoInterests = clientDetails[c].getClientInterests();

                    int interestNumber = 0;
                    while (interestNumber < clientOneInterests.length())
                    {
                        if ((clientOneInterests.charAt(interestNumber) == clientTwoInterests.charAt(interestNumber))
                                && (clientOneInterests.charAt(interestNumber) == '1' ))
                            interests++;
                        interestNumber++;
                    }

                    if (interests >= 3)
                    {
                        anyMatch = true;
                        if (count == 0)
                        {
                            System.out.println(clientDetails[b].getClientName() + "is compatible with the following client(s)");
                            System.out.println("\t" + clientDetails[c].getClientName());
                        }
                        else
                        {
                            System.out.println("\t" + clientDetails[c].getClientName());
                        }
                        count++;
                    }
                    interests = 0;
                }
            }
        }
        if (anyMatch == false)
            System.out.println(clientDetails[b].getClientName() + "is not compatible with any client.");
        System.out.println("");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:02:19.680

这么多刻板印象编码在一个小问题中！

为了提高效率，您的两个循环本质上没有任何问题。但通常最好看大图（算法）而不是细节（循环、数组与 ArrayList）。

所以，有几个简单的建议：

*   分开存放男性和女性客户。
*   按年龄顺序存储客户，因此您可以快速找到可能年龄匹配的客户范围（二分搜索与线性搜索）。
*   不要费心存储少于 3 个兴趣的任何人。

为了匹配兴趣，您必须更加努力，但是如果客户数量很大，您可以做一些事情（例如，拥有从兴趣组到具有这些兴趣的客户的地图）。

# android - 接口认证

> ID：13434141
> 
> 赞同：1
> 
> 时间：2012-11-17T19:43:19.747
> 
> 标签：android, login, interface, runtime-error

我创建了一个身份验证界面（登录名和密码）。这是代码：

```
package com.example.exercice1part2;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TableLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
private String login="aaa";
private String pwd="bbb";
private EditText editText1;
private EditText editText2;
private Button bouton;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);
    TextView text=new TextView(null);
    text.setText("entrer votre login et mot de passe");
    final EditText editText1= new EditText(null);
    final EditText editText2=new EditText(null);
  final Button bouton= new Button("con");
    TableLayout x=new TableLayout(this);
    x.addView(text);
    x.addView(editText1);
    x.addView(editText2);
    x.addView(bouton);
    bouton.setOnClickListener(new OnClickListener(){
         public void onClick (View v){
           if (((editText1.getText().toString().equals(login))&&(editText2.getText().toString().equals(pwd)))==true)
           {

          Toast.makeText(MainActivity.this,"connection valide",Toast.LENGTH_LONG).show();
           if (v==bouton){
              final String requete="http://www.google.fr/search?q="+editText1.getText();
          Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse(requete));
          startActivity(intent);}

       }
           else
           {
               Toast.makeText(MainActivity.this,"Pas de Connection " ,Toast.LENGTH_LONG).show();    
               }
         }});

  }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
    }
} 
```

但是当我尝试运行应用程序时出现此错误：

```
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.os.Looper.loop(Looper.java:137)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at java.lang.reflect.Method.invokeNative(Native Method)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at java.lang.reflect.Method.invoke(Method.java:511)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at dalvik.system.NativeStart.main(Native Method)
11-17 18:11:25.426: E/AndroidRuntime(1028): Caused by: java.lang.NullPointerException
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.view.ViewConfiguration.get(ViewConfiguration.java:332)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.view.View.<init>(View.java:3236)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.view.View.<init>(View.java:3295)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.widget.TextView.<init>(TextView.java:447)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.widget.TextView.<init>(TextView.java:442)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.widget.TextView.<init>(TextView.java:438)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at com.example.exercice1part2.MainActivity.onCreate(MainActivity.java:26)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.Activity.performCreate(Activity.java:5008)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-17 18:11:25.426: E/AndroidRuntime(1028):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-17 18:11:25.426: E/AndroidRuntime(1028):     ... 11 more
11-17 18:15:40.177: I/Process(1028): Sending signal. PID: 1028 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:51:51.407

我不认为这`TextView text=new TextView(null);`是正确的。

尝试使用`TextView text=new TextView(this);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:50:25.857

这是我最终找到的解决方案，它有效：

```
public package com.example.exercice1part2;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.text.method.PasswordTransformationMethod;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TableLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
private String login="aaa";
private String pwd="bbb";
private EditText editText1;
private EditText editText2;
private TextView text;
private Button bouton;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TableLayout x=new TableLayout(this);
    setContentView(x);
    text =new TextView(getApplicationContext());
    text.setText("entrer votre login et mot de passe");
    editText1= new EditText(this);
    if (editText1.getText().toString().length()==0)
        editText1.setError("nom ne dépasse pas 10 caractère");
    editText2=new EditText(this);
    editText2.setTransformationMethod(PasswordTransformationMethod.getInstance());
    if (editText2.getText().toString().length()==0)
        editText2.setError("mot de passe ne dépasse pas 6 caractère");
  bouton= new Button(this);
  bouton.setText("connection" );

    x.addView(text);
    x.addView(editText1);
    x.addView(editText2);
    x.addView(bouton);
    bouton.setOnClickListener(new OnClickListener(){
         public void onClick (View v){

           if (((editText1.getText().toString().equals(login))&&(editText2.getText().toString().equals(pwd)))==true)
           {

          Toast.makeText(MainActivity.this,"connection valide",Toast.LENGTH_LONG).show();
           if (v==bouton){
              final String requete="http://www.google.fr/search?q="+editText1.getText();
          Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse(requete));
          startActivity(intent);}

       }
           else
           {
               Toast.makeText(MainActivity.this,"Pas de Connection " ,Toast.LENGTH_LONG).show();    
               }

         }});

  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
   }
} 
```

并感谢所有帮助过我的人 :))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:22:43.063

您的 onClickListener 是一个“匿名内部类”。它可以访问它声明的变量、它的“包含类”（您的活动）中的变量、包级类（在当前包中未声明为“公共”）和公共变量。

您在 onCreate 方法中声明并初始化 editText2 。onCreate 方法运行、完成和销毁所有本地声明的变量。onCreate 在 onClickListener 可以运行之前完成，因为 UI 直到 onCreate 完成后才构建。因此，对 editText2 的引用不再存在，您将获得 NPE。

要修复它，请将声明移至类级别，即在 onCreate 之前：

```
...
final EditText editText1
...
@Override
public void onCreate(Bundle savedInstanceState) {
... 
```

并在 onCreate 中对其进行初始化：

```
@Override
public void onCreate(Bundle savedInstanceState) {
...
editText1= new EditText(this);
... 
```

祝你好运。

# r - 从第 5 个百分位求平均值

> ID：13434142
> 
> 赞同：0
> 
> 时间：2012-11-17T19:43:20.323
> 
> 标签：r, statistics

我需要一些关于统计问题的指导。我有一种情况，知道正态分布连续随机变量的第 5 个百分位数。我想计算平均值。数据集和标准偏差未知。

我想用 R 解决我的问题，你对有用的函数或方法有什么提示吗？

谢谢，约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:01:21.633

正态分布由均值和偏差（两个值）描述，您只知道第 5 个百分位数（一个值）。有必要有一些附加值（例如第 10 个百分位）来计算平均值和偏差。

# java - 对 arrayList 中对象的双精度值进行排序

> ID：13434143
> 
> 赞同：28
> 
> 时间：2012-11-17T19:43:32.270
> 
> 标签：java, arraylist, double

我试图通过他们的分数属性的值对我的自定义类染色体进行排序，这是一个双倍。这些染色体存储在一个 ArrayList 中。我知道我必须使用比较器，但在过去的一个小时里，我在网上阅读了很多不同的意见，以至于我完全糊涂了。

附件是我的代码，如果有人能指出我正确的方向，我将不胜感激。

```
public class Chromosome
{

    public Gene[] genes;
    public double score;

    public Chromosome(int l)
    {
        genes = new Gene[l]; 
    }

    public int getLength()
    {
        return genes.length;
    }

    public void printChromo()
    {
        for(int i=0;i<this.genes.length;i++)
        {
            System.out.println(""+this.genes[i].teacher+","+
                this.genes[i].lecture+","+
                this.genes[i].room+","+
                this.genes[i].time+"");
        }   
    }

    public void setScore(double score)
    {
        this.score=score;
    }

    public double getScore()
    {
        return this.score;
    }
} 
```

不知道这有什么不同，但分数只能是 0.0 到 1.0 之间的两倍

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-17T21:55:24.230

要使用[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)：

```
Collections.sort(myList, new Comparator<Chromosome>() {
    @Override
    public int compare(Chromosome c1, Chromosome c2) {
        return Double.compare(c1.getScore(), c2.getScore());
    }
}); 
```

如果您打算`List`以这种方式对大量 s 进行排序，我建议您`Chromosome`实现[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口（在这种情况下，您可以简单地调用s `Collections.sort(myList)`，而无需指定显式`Comparator`）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-04-13T16:26:04.047

使用**Java SE8**，您可以像这样使用 lambda 表达式：

```
list.sort((o1, o2) -> Double.compare(o2.doubleField, o1.doubleField)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T19:50:23.327

为什么不将[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)与[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)一起使用，如下所示：

```
// your code
PriorityQueue<Chromosome> entries = new PriorityQueue<Chromosome>(1, new Comparator<Chromosome> () {
    @Override
    public int compare(Chromosome arg0, Chromosome arg1) {
        return (Double)(arg1.getScore()).compareTo((Double)arg0.getScore());
    }
});
entries.addAll(arrayListOfChromosomes);
// your code 
```

然后，优先级队列将使您的数据结构保持有序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-17T19:47:21.387

我会实现接口[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)：

```
public class Chromosome implements Comparable<Chromosome>{

    private double score;

    public Chromosome(double score){
        this.score = score;
    }
    @Override
    public int compareTo(Chromosome o) {
        return new Double(score).compareTo( o.score);
    }
    @Override
    public String toString() {
        return String.valueOf(score);
    }
} 
```

请注意，我在班级内移动了分数..

现在您可以使用任何已排序的[集合（如](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)）

如果您坚持使用 Arraylist，您可以使用：

```
ArrayList<Chromosome> out = new ArrayList<Chromosome>();
out.add(new Chromosome(20));
out.add(new Chromosome(15));
System.out.println(out);
Collections.sort(out);
System.out.println(out); 
```

结果：

```
[0.2, 0.15]
[0.15, 0.2] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-02T07:26:03.297

从 java 8 开始，您可以非常简单地对 Double 元素列表进行排序。

```
list.sort(Comparator.comparingDouble(Chromosome::getScore)); 
```

或者

```
Collections.sort(list, omparator.comparingDouble(Chromosome::getScore)); 
```

如果您想获得排序列表但又不想更改开始列表，则可以按以下方式进行：

```
List<Chromosome> sortedList = list.stream()
     .sorted(Comparator.comparingDouble(A::getScore))
     .collect(Collectors.toList()); 
```

# controller - mvc 4 控制器名称中的保留字符和符号

> ID：13434144
> 
> 赞同：0
> 
> 时间：2012-11-17T19:43:49.837
> 
> 标签：controller, asp.net-mvc-4

我正在尝试创建这样的东西

```
 public class business-economyController : Controller
    { 
```

但是如果在控制器名称中使用“-”符号会产生问题，并且 VS IDE 会自动将其重命名为这样的名称

```
 public class business_economyController : Controller
    { 
```

注意“-”替换为“_”字符。

这应该是一项微不足道的任务，不会影响网址，但可能是我遗漏了一些东西。我的问题是，是否不可能在控制器名称中使用这些字符？如果没有，如何在控制器名称中使用它们？

编辑：我的目标是在 url 中允许使用连字符。我希望网址类似于[http://www.xxxxxx.com/business-economy](http://www.xxxxxx.com/business-economy)

但是，当 MVC 尝试解析控制器类名称时，它会在此处失败。可以通过添加属性而不是控制器来为操作指定特定名称。有什么办法可以在控制器令牌中的 URL 中有一个“-”符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:29:21.987

[根据规范](http://msdn.microsoft.com/en-us/library/aa664670.aspx)，C# 不允许在类名中使用连字符。

所以简而言之，这不是 MVC 问题，而是 C# 规范。

# php - 将数组值传递给模态

> ID：13434145
> 
> 赞同：0
> 
> 时间：2012-11-17T19:43:50.957
> 
> 标签：php, jquery, mysql

我正在使用[Twitter Boostrap JS](http://twitter.github.com/bootstrap/javascript.html#modal)中的 Modal 插件在我的项目中显示模态。我正在使用 PHP 和数据库显示消息。消息有“回复”和“删除”选项（每个模式一个）。我想将数组 id 传递到这些模式中。我该怎么做？

这是我的显示代码：

```
<p><?php echo $row['message'];?></p>
<input type="hidden" id="msgid" value="<?php echo $row['id']?>">
<a href="#replyModal" data-toggle="modal" class="reply-to"><i class="icon-share-alt"></i>Reply</a>
<a href="#deletemodal" data-toggle="modal" class="reply-to"><i class="icon-trash"></i>Delete</a> 
```

我希望将 id 传递给 modals。这样我就可以对其采取行动。

```
<div class="modal fade" id="replyModal">
<form action="replymsg.php" method="post" enctype="multipart/form-data">
<div class="modal-header">
<a class="close" data-dismiss="modal">×</a>
<h3>Reply:</h3>
</div>
<div class="modal-body">
<input type="text" id="msgid"></input>
<textarea name="message" style="width:98%; height:100px;"></textarea>
</div>
<div class="modal-footer">
<button type="submit" class="btn btn-primary">Post Reply</button>
</div>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:16:05.517

解决方案非常简单。您实际上只是将隐藏的输入模式转换为模态表单，然后就可以了。发帖时你得到了ID。

```
<div class="modal fade" id="replyModal">
    <form action="replymsg.php" method="post">
        <input type="hidden" id="msgid" value="<?php echo $row['id']; ?>" />
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>Reply:</h3>
        </div>
        <div class="modal-body">
            <textarea name="message" style="width:98%; height:100px;"></textarea>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Post Reply</button>
        </div>
     </form>
</div> 
```

如果由于某种原因您无法访问 PHP 中的模态窗口，则使用 jQuery 在单击 a 标记时设置要在模态弹出窗口内表单内的隐藏输入字段上删除的行 ID。

-

**编辑 - 添加了 JavaScript 示例** - 测试： http: [//jsfiddle.net/3A7Mg/](http://jsfiddle.net/3A7Mg/) *（这仅向您显示，如果您检查模态 div，当您单击回复链接时，它会向其中添加一个隐藏的输入字段。）*

**在下面使用 JavaScript：**

```
$(document).ready(function () {
    $('a.reply-to').click(function (e) {
        var $exists = $('#replyModal form input#dbid');

        if($exists.length == 0) {
            $('#replyModal form').prepend('<input type="hidden" id="dbid" name="dbid" value="'+$('#msgid').val()+'" />');
        } 
    });
}); 
```

然后，当用户提交表单时，您将在 PHP POST 中有一个名为“dbid”的索引，如下所示：

```
$_POST['dbid'] 
```

​</p>

# python - 在 Python 中使用 Matplotlib 绘制与数组中的索引相对应的矩阵中的值

> ID：13434146
> 
> 赞同：1
> 
> 时间：2012-11-17T19:43:54.970
> 
> 标签：python, numpy, matplotlib

我有这个数组和矩阵：

```
 delta_Array = np.array([0.01,0.02,0.03, 0.04, 0.05, 0.06,0.07, 0.08, 0.09, 0.10])
 theta_Matrix = 
 [[ 0.42860551  0.15916832 -0.11548373  0.21118448 -0.11248666 -0.10941028
    0.21753078  0.0066507 ]
  [ 0.42860033  0.15916739 -0.11548099  0.2111825  -0.11248553 -0.10940605
    0.21752721  0.00665198]
  [ 0.42859169  0.15916584 -0.11547644  0.2111792  -0.11248364 -0.109399
    0.21752126  0.00665412]
  [ 0.4285796   0.15916367 -0.11547007  0.21117458 -0.11248099 -0.10938913
    0.21751293  0.00665711]
  [ 0.42856405  0.15916088 -0.11546187  0.21116863 -0.11247759 -0.10937644
    0.21750223  0.00666096]
  [ 0.42854505  0.15915746 -0.11545186  0.21116137 -0.11247344 -0.10936093
    0.21748915  0.00666566]
  [ 0.4285226   0.15915343 -0.11544002  0.21115279 -0.11246853 -0.1093426
    0.2174737   0.00667121]
  [ 0.4284967   0.15914878 -0.11542637  0.21114289 -0.11246286 -0.10932146
    0.21745587  0.00667762]
  [ 0.42846735  0.15914351 -0.1154109   0.21113166 -0.11245644 -0.1092975
    0.21743567  0.00668487]
  [ 0.42843455  0.15913762 -0.11539361  0.21111912 -0.11244926 -0.10927074
    0.2174131   0.00669298]] 
```

theta_matrix 的每一列都是一种颜色。delta_array 的每个元素都给出了 theta_matrix 中的相应行。我意识到为了得到这些曲线，我需要更多的增量值。但现在我只使用一个小输入

![在此处输入图像描述](../Images/2c976903e27ecc615f24023c31b09995.png)

但是，我的这段代码

```
 figure(1)
  plot(delta_Array, theta_Matrix)
  plt.show() 
```

像这样绘制图形： ![在此处输入图像描述](../Images/c2d37514f2fe48500fc1eb7e9e19a37e.png)

显然我错过了很多部分。我从这里学到了这些基本的东西：

[http://courses.csail.mit.edu/6.867/wiki/images/3/3f/Plot-python.pdf](http://courses.csail.mit.edu/6.867/wiki/images/3/3f/Plot-python.pdf)

但我试图填补缺失的部分。谁能帮我一把？我是新手，所以如果您知道一些简单的教程，我将不胜感激。不幸的是，大多数在线教程假定的熟练程度都比我高。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:34:03.690

您的问题和数据不清楚，但是，试试这个：

```
import numpy as np
import matplotlib.pyplot as plt

delta_Array = np.array([0.01,0.02,0.03, 0.04, 0.05,
                        0.06,0.07, 0.08, 0.09, 0.10])
#Initialized to 0s. Actual values will be appended to matrix by function
theta_Matrix = np.random.random() * np.random.rand(delta_Array.size, 8) 

fig = plt.figure()
p1 = plt.plot(delta_Array, theta_Matrix)
# make a legend for both plots
leg = plt.legend(p1, '', loc=1)

plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:45:41.823

当您更新矩阵时，问题在于数据的长度和组织。

首先更改 x 数据的长度：

```
delta_Array = np.array([0.01,0.02,0.03, 0.04, 0.05,
                        0.06,0.07, 0.08]) 
```

然后转置你的矩阵：

```
p1 = plt.plot(delta_Array, ThetaMatrix.T) 
```

![数据图](../Images/1eb7ae20d8772b9ac35371645bc49bfe.png)

# java - 如何使用内存映射文件在两个 JVM 之间进行通信？

> ID：13434148
> 
> 赞同：6
> 
> 时间：2012-11-17T19:44:15.797
> 
> 标签：java, real-time, nio, memory-mapped-files

我想知道如何在内存映射文件上进行同步以安全地将其用作两个 JVM 之间的管道。有没有人成功地这样做过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:27:09.843

我有一个库可以做到这一点，但它不使用同步。它一次写入内存而不是重用内存，这简化了内存模型。[Java编年史](https://github.com/peter-lawrey/Java-Chronicle)

# arrays - MongoDB：数组作为 PK

> ID：13434152
> 
> 赞同：0
> 
> 时间：2012-11-17T19:44:54.937
> 
> 标签：arrays, mongodb, indexing

我有看起来像这样的键：34834.3245.94.5134 - 它显然是字符串。但我可以将其拆分并存储为整数数组 [34834,3245,94,5134]

1) 这个数组的存储、索引和搜索效率更高吗？

2) 是否可以在该键上使用 {unique:true} 创建索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:10:51.267

1.  是的，在数字足够长的情况下，您应该在内存中获得更紧凑的索引，但索引中的元素更多（它会减慢查询速度）。

2.  是的，但请记住这条规则

    > 如果您对复合索引使用唯一约束，那么 MongoDB 将强制值组合的唯一性，而不是键的任何或所有值的单个值。

# xampp - XAMPP 陷入无限循环

> ID：13434154
> 
> 赞同：0
> 
> 时间：2012-11-17T19:45:14.387
> 
> 标签：xampp

我的 Xampp 突然停止工作。我最近安装的一个东西是 K-lite 编解码器包，我在出现这个问题后卸载了它，我已经重新启动了几次机器，清除了所有浏览器缓存，尝试了多个浏览器（Chrome、Firefox、IE ) . 我没有Skype，所以也不能这样。

浏览器只是卡住了，甚至没有`Link is broken/Unable to connect`显示“”。浏览器选项卡中的加载圈一直在旋转。

我什至更改了配置文件，将*localhost*设置为端口 8080，但即使这样也不会削减它。

多次重新启动 Apache 服务（但是我无法从控制面板结束服务，它显示错误：-1）

我还使用更新的 Anti Virus 运行了完整的计算机扫描。

我在戴尔 Latitude 上使用 Windows 7 有人请帮帮我。PS：我也没有安装IIS。

编辑：我认为系统中有病毒修改了hosts文件，它在文件中注释掉了*localhost*。杀毒软件当然没有把它捡起来。但是问题仍然存在。我应该查看的任何其他文件可能已被病毒修改？我已经将主机文件重置为默认值并重新启动了系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:49:18.060

尝试重新启动您的服务器（您的 PC）

有时某些 PHP 应用程序被锁定（由于无限循环）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:30:43.423

您可以尝试卸载*apache*服务，然后尝试从*xampp-control.exe启动 apache*

如果一切都失败了，正如您在帖子中所说，那么您可以卸载*xampp*而无需卸载 mysql 数据库和*htdocs*目录，然后再次重新安装*xampp* ..

还要发布浏览窗口中出现的实际错误的屏幕截图..

# javascript - 从单独的 html 文件加载轮播

> ID：13434158
> 
> 赞同：1
> 
> 时间：2012-11-17T19:45:44.820
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我是网络编程的新手，所以请原谅。

我的 index.html 文件中有一个 div，它是空的。

```
<div id='menu1'  >
</div><!--/.well --> 
```

基于菜单项点击，我在 div 中加载 html 文件。

```
$('#menu1').load('gallery.html') 
```

因此，gallery.html 有 twitter 引导示例轮播，但它没有被加载，但是如果我将代码直接粘贴到 index.html 的“menu1”div，一切似乎都正常。

任何建议都会有所帮助。

编辑***我的 js [调用滑块的加载]

```
$(document).ready(function() {
            //$('#menu1').load('home.html')

            $("li").click(function(){
          // If this isn't already active
          if (!$(this).hasClass("active")) {
            // Remove the class from anything that is active
            $("li.active").removeClass("active");
            // And make this active
            $(this).addClass("active");
        }
    });

            $('ul li a').live('click', function() {

                var clickid = $(this).parent('li').index();
                var myid = $(this).attr('id');
                $('#menu1').html(" ");
                $('#slider').css('display','none');
                switch (myid)
                {
                    case "home":
                    $('#slider').css('display','block');
                    break;
                    case "aboutus":
                    $('#menu1').load('aboutus.html')
                    break;
                                case "gallery":
                    $('#menu1').load('gallery.html')
                    break;

                };
    //alert(myid);
                //alert(clickid);

            });
        }); 
```

编辑**gallery.html的html代码[我正在谈论的滑块]

```
<div id = "myCarousel" class="carousel">
    <!-- Carousel items -->

    <div class="carousel-inner">
      <div class="item active">
        <img src="../photos/1.jpg" alt="">
          <div class="carousel-caption">
            <h4>Super sweet bathroom</h4>
            <p>This bathroom is truly incredible</p>
          </div>
      </div>
      <div class="item">
        <img src="../photos/2.jpg" alt="">
        <div class="carousel-caption">
          <h4>OK, maybe this bathroom is better</h4>
          <p>This beautiful bathroom could be yours - just call Price Builders today.</p>
        </div>
      </div>
      <div class="item">
        <img src="../photos/3.jpg" alt="">
        <div class="carousel-caption">
          <h4>Not even sure what this is</h4>
          <p>Go figure</p>
        </div>
      </div>
    </div>
  </div>
    <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
  </div> 
```

来自gallery.html的图像滑块被加载但它不起作用..我无法移动图像..但是如果我将代码移动到index.html而不使用js加载，同样的工作原理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:10:47.307

从上面的评论中，我知道它`gallery.html`包含在您的页面中，但滑块不起作用。如果是这种情况，那么我假设您已经从主文件（从中加载其他文件的文件）中调用了滑块​​脚本。在这种情况下，新加载的元素无法附加到您的滑块脚本，因为它们是稍后加载的。您可以使用[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)或[http://api.jquery.com/live/](http://api.jquery.com/live/)

我建议您使用 jQuery 的原因是，用更简单的方法完成某些复杂和/或困难的任务会变得更简单。

你说，

> 来自gallery.html的图像滑块被加载但它不起作用..我无法移动图像..但是如果我将代码移动到index.html并且不使用js加载，同样的工作。

发布那个 index.html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:55:49.367

```
 case "gallery":
            $('#menu1').load('gallery.html');
            //call code for carousel here
            //eg: $( "#myCarousel" ).carousel();
            break; 
```

问题是，当轮播一开始分配时，这样的 div 不存在，因此失败。稍后，一旦附加了 div，它就不会分配给轮播。没有问题，这可以在调用案例库后完成。

# forms - Codeigniter - 在复选框的选中状态上设置_value

> ID：13434160
> 
> 赞同：4
> 
> 时间：2012-11-17T19:45:58.833
> 
> 标签：forms, codeigniter, set, checkbox

我将表单验证库用于 Codeigniter 中的表单。当我在输入字段上使用 set_value 进行重新填充时效果很好，但是如何在复选框上执行此操作？如果它们被检查，我希望它们在表单错误返回 true 时仍然被检查。

如何？

这不起作用：

```
 <?php
        $js = 'onClick="shipping(this.form)"';
        echo form_checkbox('fillShipping', 'check', set_value('fillShipping'), $js); 
        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:05:31.703

在您看来，请尝试使用以下内容：

```
<?php 
$js = 'onClick="shipping(this.form)"';
echo form_checkbox('fillShipping','check', set_checkbox('fillShipping','check'), $js);?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T20:05:20.940

有一个专门的功能。

```
<input type="checkbox" name="mycheck" value="1" <?php echo set_checkbox('mycheck', '1'); ?> /> 
```

# c# - 我可以使用 C# 使“包含”方法不区分大小写吗？

> ID：13434168
> 
> 赞同：1
> 
> 时间：2012-11-17T19:47:14.510
> 
> 标签：c#, .net

我正在使用 .NET 4.5 和 C#。如果拼写区分大小写，我下面的代码可以正常工作。换句话说，如果文件的拼写与“SetupV8.exe”完全一样。但我真的需要它不区分大小写。我玩过它，但找不到方法。

```
foreach (string file in directory.EnumerateFiles((AppDomain.CurrentDomain.BaseDirectory),  
         "*.exe", SearchOption.AllDirectories))
{
   if (!file.Contains("SetupV8.exe")
   {    
      // Do something
   }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T19:55:33.100

**string.Contains**只是**string.IndexOf**的包装，正如您从 NET 源代码中看到的那样

```
public bool Contains(string value)
{
    return (this.IndexOf(value, StringComparison.Ordinal) >= 0);
} 
```

并且 string.IndexOf 有一个适当的参数来忽略要搜索的字符串的大小写

```
 if (file.IndexOf("SetupV8.exe", StringComparison.OrdinalIgnoreCase) >= 0)
     // File found 
```

[字符串比较枚举](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:55:53.833

根据[MSDN 文章](http://msdn.microsoft.com/en-us/library/cc165449.aspx)，无论大小写如何， 您都可以传入`StringComparison.OrdinalIgnoreCase`进行比较。

```
file.name.Contains("SetupV8.exe", StringComparison.OrdinalIgnoreCase) 
```

这将更有效，因为您不会在此过程中创建两个可变字符串，并且我认为看起来比使用更干净`.toLower()`

**但是，您应该考虑在这里检查的内容，文件哈希会更好吗？如果您假设文件的内容是已知的，那么您可能会引入安全问题。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T20:00:29.037

如果要比较包括扩展名但不包括目录的整个文件名：

```
file.Name.Equals(fileNameAndExt, StringComparison.OrdinalIgnoreCase) 
```

`file.FullName`还包括目录名称。`StringComparison.OrdinalIgnoreCase`是最快的比较方法，因为它不应用文化特定处理。这是正确的方法，因为文件系统也不这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T19:48:44.673

只需将您的字符串强制为所有小写进行比较..

```
file.ToLower().Contains("setupv8.exe") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T19:51:49.460

`file.ToLower().Contains("setupv8.exe")`通常工作正常。（尽管您可能想考虑 EndsWith ）

此外，由于`EnumerateFiles`返回`FileInfo`，您不妨`Name`改为检查其属性：

```
foreach (FileInfo file in directory.EnumerateFiles((AppDomain.CurrentDomain.BaseDirectory),  
         "*.exe", SearchOption.AllDirectories))
{
   if (!file.Name.ToLower().Contains("setupv8.exe")
   {    
      // Do something with file
   }
} 
```

此外，如果名称*是*“SetupV8.exe”并且您不希望它带有任何前缀/后缀，那么此时可能只是直接检查是否相等。

编辑：也许更重要的是，您可能*只想*使用文件名。除非您想检查目录路径的*任何*部分是否匹配。也就是说，您可能不想`c:\temp\setupv8.exe_directory\subdirectory\setupv8.exe`匹配为误报。

8 年后为新读者编辑：在某些极端情况下 using`ToLower()` [可能会引入一些意想不到的结果](https://stackoverflow.com/questions/6225808/string-tolower-and-string-tolowerinvariant)，因此也许改用它可能更可取[`ToLowerInvariant()`](https://docs.microsoft.com/en-us/dotnet/api/system.string.tolowerinvariant?view=netframework-4.7.2)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T19:59:44.547

只做一个扩展方法

```
public bool Contains(this string my,string his)
 {
      return my.ToLower().Contains(his.ToLower());
 } 
```

用法

```
....
if(file.Contains("SetupV8")) // the case is ignored !
....
.... 
```

# java - 使用扫描仪和模式总是抛出异常

> ID：13434176
> 
> 赞同：1
> 
> 时间：2012-11-17T19:47:46.007
> 
> 标签：java, regex

我正在尝试读取输入字符串 - 如果它符合预定义的模式，则应该返回它。如果输入不正确，则应抛出异常。

这是我到目前为止所拥有的。我的问题是，无论输入如何，它总是抛出异常。我在这里做错了什么？

```
public String readPostCode() throws InputMismatchException
{
    Scanner in = new Scanner(System.in);
    String postcode;
    System.out.println("Please enter a Postcode");
    postcode = in.next(this.pattern);
    return postcode;
} 
```

当我在 try/catch 语句中使用上述方法时，始终会捕获 InputMismatchException。

编辑：这是模式的定义：

```
public Pattern pattern = Pattern.compile(   "[a-zA-Z]" +
                                            "([0-9]|[a-zA-Z])" +
                                            "(|[0-9]|[0-9][0-9]|[a-zA-Z]|[0-9][a-zA-Z])" +
                                            " [0-9][a-zA-Z][a-zA-Z]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:15:31.057

**注意**：代码未经测试。

对于加拿大邮政编码（因为未定义区域设置）

使用： (^[a-zA-Z][0-9][a-zA-Z]\s?[0-9][a-zA-Z][0-9]$)

> 接受输入示例：A2B 3P7

```
public String readPostCode(){
        Scanner in = new Scanner(System.in);
        String postcode = scan.nextLine().toUpperCase();
        try {
           if(postcode.matches("^[A-Z][0-9][A-Z]\s?[0-9][A-Z][0-9]$"){
              return postcode;
            }
         } catch (InputMismatchException IME){
              System.out.println("Input does not match required format");
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:15:52.013

`Scanner`默认情况下以空格分隔。要读取包含空格的输入，请将其设置为仅以换行符分隔：

```
in.useDelimiter("\n"); 
```

您还可以稍微简化模式。使其不区分大小写并用于`{n,m}`指定至少重复`n`且最多重复的模式`m`：

```
Pattern.compile("[A-Z]{1,2}[0-9]{1,3}\\s?[0-9][A-Z]{2}", Pattern.CASE_INSENSITIVE); 
```

**请注意**，这是针对英国邮政编码的，例如`LS1 2AA`.

# c - C for 用指针遍历数组

> ID：13434177
> 
> 赞同：4
> 
> 时间：2012-11-17T19:47:49.453
> 
> 标签：c, pointers, loops, for-loop

我是 C 新手，但我有 Java 和 Android 方面的经验。我的 for 循环有问题。它永远不会结束，只会继续下去。

```
char entered_string[50];
char *p_string = NULL;

gets( entered_string );

for( p_string = entered_string; p_string != '\0'; p_string++ ){
    //....
} 
```

我知道 get 是不安全的，不推荐和不推荐使用，但根据我的规范，我必须使用它。我想使用指针遍历每个元素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T19:49:35.713

你的测试应该是`*p_string != '\0';`

`p_string`是一个指针，你的循环正在检查指针是否是`!= '\0'`. 您对值是否为 感兴趣`!= '\0'`，并且要从指针中获取值，您必须使用取消引用它`*`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-19T19:30:46.913

```
 char str[] = "54321"; 
    char *p;  
    p = str;   
    for (p; *p != '\0';++p)
    {
         printf("%s \n",p);
    } 
```

输出：
54321
4321
321
21
1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:50:14.577

它应该`*p_string != '\0'`适用于条件 - 您需要取消引用指针。

# c# - 将 IF 语句转换为 SWITCH 语句

> ID：13434179
> 
> 赞同：0
> 
> 时间：2012-11-17T19:48:04.303
> 
> 标签：c#, database, asp.net-mvc-3, switch-statement

在过去的几天里，我一直在尝试解决这个问题，但没有成功。我基本上拥有的是**4 个可以存储用户图片的数据库字段**，因此用户最多可以有 4 张图片。字段名称为picture1、picture2、picture3 和picture4。**我想要做**的是当用户上传图片时，检查picture1是否为NULL，如果不是，则将图像文件名保存在那里，如果不是NULL，则下一张图片转到picture2，然后保存在那里，依此类推直到picture4。

有什么是这样的：

```
if (openhouse.picture1 == null)
                {
                    openhouse.picture1 = changename;

                }
             // if picture2 is NULL and picture1 is not NULL then insert picture
if (openhouse.picture2 == null && openhouse.picture1 != null)
                {
                    openhouse.picture2 = changename;

                }
            // if picture3 is NULL and picture2 is not NULL then insert picture
if (openhouse.picture3 == null && openhouse.picture2 != null)

                {
                    openhouse.picture3 = changename;

                }
                // if picture4 is NULL and picture3 is not NULL then insert picture
  if (openhouse.picture4 == null && openhouse.picture3 != null)
                {
                    openhouse.picture4 = changename;

                } 
```

正如您所看到的，我的问题是，一旦您上传一张图片，同一张图片就会上传到所有**4 个**字段中，因为**IF 语句**没有中断，我的问题是：**有什么方法可以将这个 if 语句转换为一个 switch 语句一旦条件为真，它就会以这种方式使用 BREAKS ，它会停止评估其余部分。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:50:32.313

不需要 switch 语句 - 只需使用`else if`.

```
if ( condition #1 )
{
    // block #1
}
else if ( condition #2 )
{
    // block #2
} 
```

如果第一个条件为真，则块 #2 不会被执行。

```
if (openhouse.picture1 == null)
    openhouse.picture1 = changename;
else if (openhouse.picture2 == null)
    openhouse.picture2 = changename;
// etc. 
```

# regex - 如何在linux中搜索两个不同的表达式

> ID：13434188
> 
> 赞同：0
> 
> 时间：2012-11-17T19:49:13.517
> 
> 标签：regex, linux, sed, grep

我有一个包含一些文本的文件，例如：

```
aaa.co
bbb.com
ccc.net
sss.co.uk 
```

我需要提取`*.co.*`and`*.com.*`并将它们放在另一个文件中。我使用以下内容来提取，`*.com.*`但我怎样才能在一个命令中提取`*.com.*`和`*.co.*`而不是单独执行它们？

```
egrep -io '[a-z0-9\-]+\.com(\.[a-z]{2})?' input.txt | sed -e 's/www.//' | sort | uniq >output.txt 
```

输入文件示例：

```
aaa.co
bbb.com
ccc.net
sss.co.uk 
```

结果文件：

```
co
com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:52:50.893

只需将 com 中的 m 设为可选

```
egrep -io '[a-z0-9\-]+\.co(m)?(\.[a-z]{2})?' input.txt | sed -e 's/www.//' | sort | uniq >output.txt 
```

**编辑：** 您也可以删除 sed 和 uniq

```
awk 'match($0, "(www\\.)?([a-z0-9\\-]+\\.com?(\\.[a-z]{2})?)", r) { print r[2] }' input.txt | sort -u 
```

**编辑：** 另一种释放 sed 和 uniq 的方法

```
grep -oP '^(www\.)?\K[a-z0-9\-]+\.com?(\.[a-z]{2})?(?=)$' input.txt | sort -u 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:31:55.753

## `grep`和`egrep`

您问题中的命令行保留`.com`,`.co`和`.co.uk`. 因此，在本节中，我给出了两个使用`grep`和的基本示例`egrep`。这些命令行保留完整[的顶级域 (TLD)](http://en.wikipedia.org/wiki/Top-level_domain)，就像您问题中的命令行一样：

```
grep -io 'com?(\.[a-z]{2})?$' input.txt | sort -u >output.txt 
```

或更容易理解：

```
egrep -io 'com$|co$|co[.][a-z]{2}$' input.txt | sort -u >output.txt 
```

供您参考，`egrep "PATTERN1|PATTERN2"`与`grep -E "PATTERN1|PATTERN2"`

## 替代使用`sed`

以下`sed`命令行不保留完整[的顶级域 (TLD)](http://en.wikipedia.org/wiki/Top-level_domain)，因为您的问题指定`co`在处理时保留`*.co.uk`

```
sed -n '/[a-z.][.]com\?/s/.*[.]\(com\?\)\(.*\|$\)/\1/p' input.txt | sort -u >output.txt 
```

## 解释

*   `-n`=> 不打印
*   `/[.]com?[.]/`处理线仅匹配模式
*   `s/.*[.]\(com?\)([.][a-z]{2})?/\1/``com`=> 用或替换该行`co`
*   `p`=> 最后打印该行

## 测试命令行

`input.txt`：

```
aaa.co
bbb.com
ccc.net
sss.co.uk
www.zzz.co
www.yyy.com
www.xxx.co.tw 
```

测试基于`uniq -c`：

```
sed -n '/[a-z.][.]com\?/s/.*[.]\(com\?\)\(.*\|$\)/\1/p' input.txt | sort | uniq -c 
```

结果：

```
 4 co
  2 com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:54:04.447

您可以`-e`为任何`grep`

```
egrep -e '\.com\.' -e '\.co\.' ... 
```

或 grep 替代

```
egrep -io '[a-z0-9\-]+\.(com|co)(\.[a-z]{2})?' input.txt | ... 
```

或者在这种特殊情况下使“m”可选

```
egrep -io '[a-z0-9\-]+\.com?(\.[a-z]{2})?' input.txt | ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T00:13:52.323

这可能对您有用（GNU sed）：

```
sed '/.*\.\(com\?\)\.\?.*/s//\1/p;d' file | sort -u 
```

# css - 在 Firefox 和 Opera 在 CSS3 翻译中冻结

> ID：13434190
> 
> 赞同：0
> 
> 时间：2012-11-17T19:49:26.797
> 
> 标签：css, css-transitions

这是我的CSS：

```
.portfolio-info:hover .portfolio-rate{
-webkit-transform: translateX(100px);
-moz-transform: translateX(100px);
-o-transform: translateX(100px);
-ms-transform: translateX(100px);
transform: translateX(100px); 
```

}

```
.portfolio-doc, .portfolio-title, .portfolio-rate{
    -webkit-transition: all 0.3s ease-in;
    -moz-transition: all 0.3s ease-in;
    -o-transition: all 0.3s ease-in;
    -ms-transition: all 0.3s ease-in;
    transition: all 0.3s ease-in;
} 
```

在面向 webkit 的浏览器中，它看起来很正常（动画块后会出现奇怪的闪烁文本）。但是在 FireFox 和 Opera 中……你应该会看到这个冻结。哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:38:58.033

好像是某人的插件。在安全模式下，冻结较少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:58:21.313

我已经探索过这个错误，在 Opera 中可以通过设置
.wrapper { -o-transform: translate(0px);来修复它。}

# android - 在 android 活动中使用数据库

> ID：13434191
> 
> 赞同：0
> 
> 时间：2012-11-17T19:49:30.727
> 
> 标签：android, sqlite, onclick, oncreate

我正在学习如何在 Android 活动中使用 sql 数据库。我正在从[本教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)中学习。我有一个活动，我使用教程中的数据库处理程序。我在活动类中声明了变量。

```
DatabaseHandler db; 
```

在 oncreate 方法中，我创建了一个新的 DatabaseHandler 对象：

```
DatabaseHandler db = new DatabaseHandler(this); 
```

单击按钮后，我想使用数据库。所以我在 onClick 方法中使用了连接，但是我得到一个空指针异常，除非我在 onclick 中创建一个新对象。为什么会这样，对于不同类型的对象，我可以像在这个例子中那样声明变量。

DatabaseHandler 的构造函数是：

```
 public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
} 
```

超级是 SQLiteOpenHelper。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:02:26.907

你得到空异常是因为你实例化不正确。您将 db 声明为一个字段，但随后实例化了一个**不同**的对象`DatabaseHandler db = new DatabaseHandler(this);`<-- 作为局部变量。因此，您的 onClick 只能访问未实例化的字段。要解决此问题，您需要在 oncreate 中用 this 替换您所拥有的内容。

```
db = new DatabaseHandler(this); 
```

或者如果 onClick 在 onCreate 中，则通过应用 final 修饰符。（并删除字段对象）

# android - 我无法在操作栏上的搜索字段中检测到文本更改

> ID：13434201
> 
> 赞同：0
> 
> 时间：2012-11-17T19:50:29.167
> 
> 标签：android

我有以下代码，并且 onOptionItemSelected() 永远不会运行。它永远不会到达`Log.i("", "switch");` 任何人都知道为什么？

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.category_menu, menu);
        Log.i("", "created menu");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Log.i("", "switch");
        switch (item.getItemId()) {
        case 0:
            Log.i("", "case 0");
            search = (EditText) item.getActionView();
            search.addTextChangedListener(filterTextWatcher);
            search.requestFocus();
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);

        }
        return true;
    }

    private TextWatcher filterTextWatcher = new TextWatcher() {
        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            Log.d("", "my search logic");
        }

    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T14:05:08.537

也许你想要更好的这样的东西。SearchView 已经有一个侦听器来处理查询。

在 onCreateOptionsMenu（菜单菜单）：

```
 MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu_main, menu);

    MenuItem searchItem = menu.findItem(R.id.action_search);
    mSearchView = (SearchView) searchItem.getActionView();
    mSearchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
        @Override
        public boolean onQueryTextSubmit(String s) {
            Log.w("SEARCH","Search: "+s);
            startSearch(s,true,null,true);
            return false;
        }

        @Override
        public boolean onQueryTextChange(String s) {
            Log.w("SEARCH","Typing: "+s);
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:18:16.820

你真的有任何菜单项`category_menu`吗？`onOptionsItemSelected`当菜单中的一个项目被触摸时被调用，而不仅仅是在菜单本身被打开时。如果您确实有菜单项，请触摸其中一项，然后在 LogCat 中您应该会看到“切换”日志语句。

# r - 重新缩放矢量 R

> ID：13434204
> 
> 赞同：4
> 
> 时间：2012-11-17T19:50:44.403
> 
> 标签：r, vector

假设我有一个整数向量，例如：

```
> x
[1]  1  1  1  4  4 13 13 14 
```

我正在 R 中寻找一种有效的方法来将向量重新缩放为整数 1 到唯一元素数的最大值。因此得到的向量将是：

```
1 1 1 2 2 3 3 4 
```

似乎是一个简单的问题，但我很难找到一种有效的方法来做到这一点。在实践中，这个向量很大（大约 500）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T20:11:12.743

尝试`match(x, sort(unique(x)))`：

```
x <- sample(1:50, 1e6, replace = TRUE)
benchmark(as.integer(factor(x)), match(x, sort(unique(x))),
          replications = 20, columns = c("test", "elapsed", "relative"))
#                        test elapsed relative
# 1     as.integer(factor(x))   18.44    10.36
# 2 match(x, sort(unique(x)))    1.78     1.00

identical(as.integer(factor(x)), match(x, sort(unique(x))))
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T19:52:42.730

假设这`v`是您的向量，请尝试以下命令

```
rank( v ) 
```

有关更多信息，请参阅`?rank`。

好吧，这确实给出了另一个结果，但作为排名是正确的，这是我认为你想要实现的。要获得您喜欢的结果，请执行

```
as.integer( factor( v ) ) 
```

# ruby-on-rails - 如何在 Rails 中将nested_attributes 与 find_or_create_by 进行比较？

> ID：13434211
> 
> 赞同：0
> 
> 时间：2012-11-17T19:51:36.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes

我希望能够使用`Company.find_or_create_by_nip(params[:job][:company_attributes])`.

当我想`Job`使用嵌套的公司表单创建时，我想首先检查是否存在`Company`该`nip`端，然后将其分配给那个新的`Job`

*控制器*

```
# JobsController
def new
  @job = Job.new
  @job.company = Company.new
end

def create
  @job = Job.new(params[:job])

  if @job.save
    redirect_to jobs_path,
      notice: t('activerecord.successful.messages.created')
  else
    render 'new'
  end
end 
```

*楷模*

```
# Job
attr_accessible :company_attributes
belongs_to :company
accepts_nested_attributes_for :company

# Company
has_many :jobs
validates :nip,
  nip: true,
  presence: true,
  uniqueness: true 
```

*看法*

```
# jobs#new
= simple_form_for @job, html: { multipart: true, class: 'form-horizontal' } do |f|
  = f.simple_fields_for :company do |c|
    = c.input :nip
    = c.input :address_street
  = f.submit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:09:14.530

也许你应该尝试一个 if 条件：

```
nip = params[:job][:company_attributes][:nip]
if Company.exists?(name: nip)
  @job.company = Company.where(name: nip).first
else
  @job.company = Company.create(name: nip)
end 
```

# freebase - 使用 mql 进行更复杂的连接

> ID：13434215
> 
> 赞同：2
> 
> 时间：2012-11-17T19:52:08.313
> 
> 标签：freebase, mql

我试图找到分享相同第一部电影的演员。很容易找到所有演员的第一部电影。

```
[{
    "type": "/film/actor",
    "name": null,
    "/film/actor/film": [{
      "film": [{
        "name":          null,
        "initial_release_date": null
      }],
      "sort":  "film.initial_release_date",
      "limit": 1
    }]
}] 
```

之后，我想对两个查询的结果进行一种交集。首先，我注意到 freebase.com 的查询编辑器中的一个示例，我们需要两个演员参与同一部电影

```
[{
  "a:starring": [{
    "actor": "Joe Pesci"
  }],
  "b:starring": [{
    "actor": "Robert de Niro"
  }],
  "name": null,
  "id":   null,
  "starring": [{
    "actor": null
  }],
  "type": "/film/film"
}] 
```

但是，当我尝试在我的两个相同查询前加上“a:film”、“b:film”之类的前缀时进行类似的更改时，总是出现错误。可能我太习惯于 SQL 并且根据时间子查询来思考，我应该以其他方式思考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:03:01.957

MQL 不允许您将两个事物限制为相等，因此您不能完全在 MQL 中做到这一点，但您可以通过简单的后处理阶段获得过滤事物所需的所有数据。

您已经获得了所有演员和他们的第一部电影，因此您只需要重用该子查询来询问该电影集中所有其他演员的第一部电影。

您的查询将如下所示。然后，您需要遍历匹配项并使用以下内容查找您的内部演员的第一部电影与您的外部演员的第一部电影相同：

```
film_id = film.film.mid
for appearance in film.film.starring:
  if appearance.actor.film.film.mid == film_id:
    print "%s and %s shared the same first film %s" % (mid,appearance.actor.mid,film_id) 
```

请注意，您应该对 ID 进行比较，而不是名称，这样您就不会得到具有相同名称的不同电影的错误匹配（不常见，但可能）。

这是生成所需信息的 MQL：

```
[{
  "type":  "/film/actor",
  "name":  null,
  "mid":   null,
  "film": {
    "film": {
      "name":          null,
      "mid":           null,
      "initial_release_date": null,
      "starring": [{
        "actor": {
          "name": null,
          "mid":  null,
          "film": {
            "film": {
              "name":          null,
              "mid":           null,
              "initial_release_date": null
            },
            "sort":  "film.initial_release_date",
            "limit": 1
          }
        }
      }]
    },
    "sort":  "film.initial_release_date",
    "limit": 1
  },
  "limit": 2
}]​ 
```

# facebook-graph-api - fb oAuth 和阅读关闭组提要 - 问题

> ID：13434216
> 
> 赞同：0
> 
> 时间：2012-11-17T19:52:15.783
> 
> 标签：facebook-graph-api, facebook-oauth

我们遇到了大麻烦，请帮忙。

当组打开时，我们可以读取 JSON 提要，但是当组隐私设置为“关闭”时，我们无法读取它，并且我们无法将组转回“打开”。我们现在正在做的是

`$facebook = new Facebook( array( 'appId' => '', 'secret' => '', ) );`

 `$t= $facebook->getAccessToken(); $gid = "233395776824135"; # some group id` 

`$data = curl_get("https://graph.facebook.com/$gid/feed?limit=20&access_token=$t"); curl_get is a function that reads using curl` 

现在返回给我们的数据（一直）只有 **{ "data": [ ] }**

我们需要对 oAuth 的“getAccessToken”功能做些什么来设置 user_groups 权限吗？如果是，我们该怎么做？

以下页面告诉如果组已关闭，您需要 user_groups 权限 [https://developers.facebook.com/docs/reference/api/group/](https://developers.facebook.com/docs/reference/api/group/)

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:53:46.110

Facebook 中有不同的访问令牌。对于公共组，您可以只使用“应用程序访问令牌”，我想这就是您通过调用“getAccessToken”得到的（它对于每个应用程序基本上都是静态的，并且是应用程序 ID 和应用程序密码的组合。对于非公共组，您需要一个“用户访问令牌”，这意味着您必须实现用户登录（具有 user_groups 权限）。有关使用 JavaScript API 登录的文档，请参见此处：

> [https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

顺便说一句，用户访问令牌的有效期仅为 2 小时，您可以通过调用 PHP SDK 的“setExtendedAccessToken”将其延长至 60 天。这意味着，您不能使用它在您自己的网站上发布非公共组的提要，您只能将其呈现给一个用户。或者您存储用户令牌并每 60 天刷新一次。但我不建议这样做，使组的非公开设置无效，管理员可能不喜欢它。

# java - 调试 Android 应用程序（在 Eclipse 中）

> ID：13434217
> 
> 赞同：0
> 
> 时间：2012-11-17T19:52:17.047
> 
> 标签：java, android, eclipse, debugging

任何人都可以帮助我找到好的视频课程来学习 Eclipse 中的主要调试技能和功能吗？如果有人有适合初学者的清晰视频或有趣的课程，请写在这里！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:06:40.247

这里有一个视频[http://www.youtube.com/watch?v=JqHYbm9e05A](http://www.youtube.com/watch?v=JqHYbm9e05A)虽然正如马蒂亚斯所说，没有关于它的火箭科学。设置断点，点击调试并运行你的软件 =D

# prolog - 给字母分配数字

> ID：13434218
> 
> 赞同：0
> 
> 时间：2012-11-17T19:52:18.410
> 
> 标签：prolog, cryptarithmetic-puzzle

我正在尝试解决密码学问题（将数字分配给字母）

杰拉德 + 唐纳德 = 罗伯特

每个字母代表一个不同的数字（0 到 9 之间）。每个单词的第一个字母代表一个不为 0 的数字。

问题 ：

该软件不显示错误，也不显示解决方案。

```
 %values between 0 and 9
valeur(0).
valeur(1).
valeur(2).
valeur(3).
valeur(4).
valeur(5).
valeur(6).
valeur(7).
valeur(8).
valeur(9).

%values between 1 and 9
valeur2(1).
valeur2(2).
valeur2(3).
valeur2(4).
valeur2(5).
valeur2(6).
valeur2(7).
valeur2(8).
valeur2(9).

%on définit des valeurs de 0 à 1
valeur3(0).
valeur3(1).

%definition of the sum rule and its equation
somme(RE,X,Y,Z,RS) :- C is RE+X+Y,D is Z+(10*RS),C is D.

%the predicate "solution" will be called for the execution
solution([G,E,R,A,L,D,O,N,B,T]) :- valeur2(R),
valeur2(G),
valeur(E),
valeur(A),
valeur(L),
valeur2(D),
valeur(O),
valeur(N),
valeur(B),
valeur(T),

%on ajoute la contraintes de différence 2 à 2
    G=\=E,
    R=\=E,R=\=G,
    A=\=E,A=\=G,A=\=R,
    L=\=E,L=\=G,L=\=R,L=\=A,
    D=\=E,D=\=G,D=\=R,D=\=A,D=\=L,
    O=\=E,O=\=G,O=\=R,O=\=A,O=\=L,O=\=D,
    N=\=E,N=\=G,N=\=R,N=\=A,N=\=L,N=\=D,N=\=O,
        B=\=E,B=\=G,B=\=R,B=\=A,B=\=L,B=\=D,B=\=O,B=\=N,
        T=\=E,T=\=G,T=\=R,T=\=A,T=\=L,T=\=D,T=\=O,T=\=N,T=\=B,
%-------------------------
valeur3(R5),
valeur3(R4),
valeur3(R3),
valeur3(R2),    
valeur3(R1),

somme(R1,G,D,R,0),
somme(R2,E,O,O,R1),
somme(R3,R,N,B,R2),
somme(R4,A,A,E,R3),
somme(R5,L,L,R,R4),
    somme(0,D,D,T,R5),

    gerald =:= 100000*D+10000*O+1000*N+100*A+10*L+D,
donald =:= 100000*G+10000*E+1000*R+100*A+10*L+D,
    robert =:= 100000*R+10000*O+1000*B+100*E+10*R+T,
robert =:= gerald + donald. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:45:24.177

Anniepoo 建议使用 CLP(FD)，在那里你会找到一系列非常强大的工具来解决各种难题，但是你有一个非常简单的错误：Prolog 中的变量**必须**是大写的，你的代码会在这里失败：

```
....
gerald =:= 100000*D+10000*O+1000*N+100*A+10*L+D,
donald =:= 100000*G+10000*E+1000*R+100*A+10*L+D,
robert =:= 100000*R+10000*O+1000*B+100*E+10*R+T,
robert =:= gerald + donald. 
```

试试吧

```
Gerald =:= 100000*D+10000*O+1000*N+100*A+10*L+D,
Donald =:= 100000*G+10000*E+1000*R+100*A+10*L+D,
Robert =:= 100000*R+10000*O+1000*B+100*E+10*R+T,
Robert =:= Gerald + Donald. 
```

请注意，我没有测试它...值得注意的是，您在描述任务时使用了变量（`GERALD + DONALD = ROBERT`），而在实际代码中忘记了它们！

**编辑**

好吧，对不起，我试过了，但我无法找到适应您的代码的解决方案，我认为生成和测试太慢了。

我“手动”安排了约束以尽早过滤，但无济于事。这里有一些来自中央谓词的行，你可以看到我的意思是“过滤更早”......

```
solution([G,E,R,A,L,D,O,N,B,T]) :-
    valeur2(G),
    valeur(E),
    G\=E,
    valeur2(R),
    R\=E,R\=G,
    valeur(A),
    A\=E,A\=G,A\=R,
    valeur(L),
    L\=E,L\=G,L\=R,L\=A,
    valeur2(D),
    D\=E,D\=G,D\=R,D\=A,D\=L,

    valeur3(R1),
    somme(R1,G,D,R,0),
    ... 
```

这里是一个 CLP(FD) 解决方案，省略了第一位数字约束，有时间。真的很容易...

```
solution([G,E,R,A,L,D], [D,O,N,A,L,D], [R,O,B,E,R,T]) :-
    Vs = [G,E,R,A,L,D,O,N,B,T],
    Vs ins 0..9,
    all_different(Vs),
    maplist(mknum,
        [ Gerald,        Donald,        Robert ],
        [[G,E,R,A,L,D], [D,O,N,A,L,D], [R,O,B,E,R,T]]),
    Gerald + Donald #= Robert,
    label(Vs).

mknum(N, [A,B,C,D,E,F]) :- N #= 100000 * A + 10000 * B + 1000 * C + 100 * D + 10 * E + F. 
```

我得到：

```
?- time(solution(X,Y,Z)).
% 6,138,531 inferences, 2,482 CPU in 2,484 seconds (100% CPU, 2473552 Lips)
X = [1, 9, 7, 4, 8, 5],
Y = [5, 2, 6, 4, 8, 5],
Z = [7, 2, 3, 9, 7, 0] ;
% 18,267,270 inferences, 7,311 CPU in 7,319 seconds (100% CPU, 2498725 Lips)
false. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T22:25:17.843

除了改变字母，这个谜题在

[https://github.com/Anniepoo/prolog-examples/blob/master/sendmoremoney.pl](https://github.com/Anniepoo/prolog-examples/blob/master/sendmoremoney.pl)

# php - 删除旧地图标记并加载新标记？

> ID：13434219
> 
> 赞同：0
> 
> 时间：2012-11-17T19:52:20.573
> 
> 标签：php, jquery, google-maps

> **可能重复：**
> [Google Maps API v3：如何删除所有标记？](https://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers)

我正在尝试删除旧标记并加载新标记。

这是我在页面加载时加载某些标记的代码 - 这里没有问题：

```
 (function() {

            var customIcons = {
  1: {
    icon: 'redmarker.png',
    shadow: 'markershadow.png'
  },
  2: {
    icon: 'purplemarker.png',
    shadow: 'markershadow.png'
  },
  3: {
    icon: 'silvermarker.png',
    shadow: 'markershadow.png'
  },
  4: {
    icon: 'goldmarker.png',
    shadow: 'markershadow.png'
  }
};

                window.onload = function(){
                    var MY_MAPTYPE_ID = 'custom';
                    var stylez = [ { "stylers": [ { "hue": "#00ccff" }, { "saturation": -100 }, { "lightness": 5 } ] },{ } ];
                    var latlng = new google.maps.LatLng(10, 10);
                    var options = {
                      zoom: 16,
                      center: latlng,
                      panControl: false,
                      zoomControl: false,
                  scaleControl: true,

                      mapTypeControlOptions: {
                        mapTypeIds: [MY_MAPTYPE_ID,google.maps.MapTypeId.SATELLITE]
                      },

                      mapTypeId: MY_MAPTYPE_ID
                    }; 
                    var map = new google.maps.Map(document.getElementById('map'), options);
                    var styledMapOptions = {
                        name: 'Map'
                    };
                    var jayzMapType = new google.maps.StyledMapType(stylez, styledMapOptions);
                    map.mapTypes.set(MY_MAPTYPE_ID, jayzMapType);

                    var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("getxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("id");
      var address = markers[i].getAttribute("id");
      var type = markers[i].getAttribute("venue_type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });

//BUTTON SWITCHING ////////////////////////////////////////////////////////////
//BUTTON SWITCHING ////////////////////////////////////////////////////////////
//BUTTON SWITCHING ////////////////////////////////////////////////////////////
//BUTTON SWITCHING ////////////////////////////////////////////////////////////
//BUTTON SWITCHING ////////////////////////////////////////////////////////////
//BUTTON SWITCHING ////////////////////////////////////////////////////////////
//BUTTON SWITCHING ////////////////////////////////////////////////////////////
jQuery(document).delegate(".topCanBeActive", "click", function( e ) { 
    e.preventDefault();
    jQuery(".topCanBeActive").removeClass("topActive");
    jQuery(this).addClass("topActive");

    switch( this.id ){
            case 'all_activity_button':
                     alert("search");
          break;
        case 'events_button':

downloadUrl("getxml2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("id");
          var address = markers[i].getAttribute("id");
          var type = markers[i].getAttribute("venue_type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });

          break;
        case 'venues_button':
            alert("venues");
          break;
        case 'search_button':
            alert("search");          
          break;
    }
});

//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////
//END ////////////////////////////////////////////////////////////

                }

                function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {

    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

            })(); 
```

现在，我创建了一个按钮部分，如果您按下一个按钮，则会加载一个不同的 xml 文件。请注意带有的部分，`//////////////////////`但是，单击按钮后，什么也没有发生。xml 文件本身没问题，可以加载所需的数据。我在萤火虫中也没有收到任何错误。

任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:04:51.767

这个问题之前已经回答过了。要查看描述良好的答案，请访问：

[Google Maps API v3：如何删除所有标记？](https://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers)

第一个答案让您知道解决方案。

-

它真正告诉您的是，您必须将标记存储在一个数组中，然后循环然后通过低谷并将 setMap 设置为空。

例子：

```
markerVar.setMap(null); 
```

之后，您可以取消设置/重置数组并填充新标记。

# java - ArrayList While 循环给出 IndexOutOfBoundsException

> ID：13434224
> 
> 赞同：4
> 
> 时间：2012-11-17T19:52:44.090
> 
> 标签：java, arraylist, while-loop, indexoutofboundsexception

我正在尝试编写一种使用锦标赛样式比较来确定数组列表最大值的方法。但是，我想我对 while 循环一无所知，因为我无法获得所需的输出，而是获得了 IndexOutOfBoundsException。

这是我的代码：

```
import java.util.*;
public class TournamentMax {

public static <T extends Comparable<? super T>> ArrayList<T> tournament(ArrayList<T> tournamentArrayList) {
    ArrayList<T> winners = new ArrayList<T>();
    int n = tournamentArrayList.size();
    int upper;

    if (n % 2 != 0 ){ // if size is odd
        winners.add(tournamentArrayList.get(n));
        upper = n - 2;
    }

    else{  // if size is even
        upper = n - 1;
    }

    for (int index = 0; index < upper; index+=2){

        T winner = max(tournamentArrayList.get(index), tournamentArrayList.get(index + 1));
         System.out.println("Comparison between: " + tournamentArrayList.get(index) + " and " + tournamentArrayList.get(index + 1) );
         System.out.println("Winner was: " + winner);
        winners.add(winner);
    }

    return winners;     
}

public static <T extends Comparable<? super T>> T max (T obj1, T obj2){
    if (obj1.compareTo(obj2) > 0){
    return obj1;    
    }
    else return obj2;
}

public static <T extends Comparable<? super T>> ArrayList<T> maximum(ArrayList<T> tournamentArrayList){
    ArrayList<T> maximum = new ArrayList<T>();
    for (int i = 0; i < tournamentArrayList.size(); i++){
        maximum.add(tournamentArrayList.get(i));
    }
    while (maximum.size() > 1){
    System.out.println("maximum before tournament" + maximum);
    maximum = tournament(maximum);
    System.out.println("maximum after tournament and the one returned" + maximum);
    }   
    return maximum;

}

} 
```

我知道问题出在这部分的某个地方：

```
while (maximum.size() > 1){
    System.out.println("maximum before tournament" + maximum);
    maximum = tournament(maximum);
    System.out.println("maximum after tournament and the one returned" + maximum); 
```

在我的脑海中，我试图让 ArrayList 不断地传递回锦标赛方法，直到 ArrayList 只包含一个项目，这应该是最大值。更让我困惑的是循环第一次执行，然后抛出异常。我猜我没有正确使用递归或其他东西，但如果有人能指出我正确的方向，那将不胜感激！

我将其用作测试客户端：

```
public static void main(String... args) {
ArrayList<Integer> test = new ArrayList<Integer>();
test.add(12);
test.add(10);
test.add(65);
test.add(4);
test.add(78);
test.add(89);
test.add(99);
test.add(96);
test.add(24);
test.add(22);
ArrayList<Integer> testWinners = tournament(test);
System.out.println(testWinners);
ArrayList<Integer> testMaximum = maximum(test); 
System.out.println(testMaximum);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:11:47.070

以下两行将始终抛出 IndexOutOfBoundsException - 只要您的数组大小为奇数，就会发生这种情况：

```
int n = tournamentArrayList.size();
//...
winners.add(tournamentArrayList.get(n)); 
```

由于列表索引从 0 开始，因此列表中的最后一个元素位于 index 处`size() - 1`。

# mysql - MySQL 创建音乐数据库

> ID：13434228
> 
> 赞同：3
> 
> 时间：2012-11-17T19:53:21.493
> 
> 标签：mysql, sql, database-design

我正在创建一个音乐数据库。

我想我需要 3 个表`playlist`，`music`和一个表将它们链接在一起。

```
Playlist table:
play_id PK,
Created_By,
play_name

music table:
music_id PK,
track_title,
artist,
album 
```

我希望用户创建任意数量的播放列表。他们可以根据需要向播放列表添加任意数量的曲目。我了解表的播放列表部分，但是当它从音乐表中将曲目添加到播放列表表时，它会变得模糊。如果我的音乐表里装满了曲目，我怎么能说 2 首曲目出现在一个播放列表中？

我有点不确定如何执行此操作，以及我的表结构是否良好，或者我是否需要添加更多字段。我不确定它是否与主键和外键有关我假设我需要一个单独的表来链接它们。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:01:58.560

> 如果我的音乐表里装满了曲目，我怎么能说 2 首曲目出现在一个播放列表中？

你应该有类似的东西：

**`Tracks`**：

*   `TrackId`,
*   `Title`,
*   ...

**`PlaylistsTracks`**：

*   `Id`,
*   `PlayListId`,
*   `TrackId`,
*   ...

对于您已经拥有的另外两个表：

> 播放列表表：play_id PK、Created_By、play_name
> 
> 音乐表：music_id PK、track_title、艺术家、专辑

这些表有问题。您的表格以这种方式未[***标准化***](http://en.wikipedia.org/wiki/Database_normalization)。您应该创建两个额外的表：

**`Users`**：

*   `Id`,
*   `Name`,
*   ..

**`Artists`**：

*   `ID`,
*   `Name`,
*   ...

然后：

*   使`Created_By`引用该`users(Id)`列的外键。
*   `ArtistID`在表中创建外键，`music`而不是在`artist`列中创建引用`Artists(ID)`。
*   制作`track_id`列而不是表中的`track_title`列`music`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:00:31.360

你走在正确的轨道上，我想。我认为像下面这样的表设置应该可以满足您的需要（这不是我的想法，所以请原谅任何语法问题）：

```
DROP TABLE IF EXISTS tPlaylist;
CREATE TABLE tPlaylist (
    playlistId INT,
    /* ... Other Data ... */
    PRIMARY KEY (playlistId)
);

DROP TABLE IF EXISTS tMusic;
CREATE TABLE tMusic (
    musicId INT,
    /* ... Other Data ... */
    PRIMARY KEY (musicId)
);

DROP TABLE IF EXISTS tPlaylistMusicMap;
CREATE TABLE tPlaylistMusicMap (
    mapId       INT,
    playlistId  INT,
    musicId     INT,
    trackNumber INT,
    PRIMARY KEY (mapId),
    /* ... Other Data ... */
    FOREIGN KEY (playlistId) REFERENCES tPlaylist (playlistId),
    FOREIGN KEY (musicId) REFERENCES tMusic (musicId),
    UNIQUE KEY (playlistId, musicId, trackNumber)
); 
```

其基本要点是让用户在 tPlaylist 表中创建他们的播放列表（每个用户播放列表单行），将所有音乐曲目数据放在 tMusic 中，映射表 tPlaylistMusicMap 是每个播放列表中各个曲目的存储位置. playlistId、musicId 和 trackNumber 上的唯一键允许相同的 tMusic 条目在曲目列表的不同位置多次出现在播放列表中。

编辑添加外键约束。

# c# - 未知时如何从字符串数组中删除文本？

> ID：13434236
> 
> 赞同：0
> 
> 时间：2012-11-17T19:54:37.387
> 
> 标签：c#, arrays, string

如果我知道它们是什么，我知道如何从数组中删除元素。

此数组中的“客户端”是用户输入的字符串。我想删除前两个词，但我不知道它们会是什么。它总是不同的。

```
string[] words = Receipt.Split(' ',',','-'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T19:56:27.930

```
string[] words = Receipt.Split(' ',',','-').Skip(2).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T19:56:44.203

如果您*总是*想删除前两个，LINQ 可能提供了最简单的方法：

```
string allButFirstTwoWords = words.Skip(2).ToArray(); // Or ToList, or nothing... 
```

请注意，您不能从数组本身“删除”值，因为数组在创建后始终具有固定大小。上面的代码创建了一个*新*数组，除了前两个单词之外的所有单词。

当然，您可以一次完成所有操作：

```
string[] words = Receipt.Split(' ', ',', '-').Skip(2).ToArray(); 
```

就我个人而言，我通常会使用 a `List<string>`，因为它更灵活：

```
List<string> words = Receipt.Split(' ', ',', '-').Skip(2).ToList(); 
```

如果您只是要对其进行迭代，则根本不需要将其转换为数组或列表：

```
IEnumerable<string> words = Receipt.Split(' ', ',', '-').Skip(2); 
```

# wordpress - 列出帖子中使用的最受欢迎的 8 个城市（自定义字段）

> ID：13434239
> 
> 赞同：0
> 
> 时间：2012-11-17T19:55:16.347
> 
> 标签：wordpress, sorting, custom-fields

您好，我正在为分类网站创建一个主题，并希望列出作为帖子自定义字段提及的前 8 个热门城市。这意味着拥有最多分类广告的前 8 个城市。它看起来像这样

[http://i50.tinypic.com/6f7fww.png](http://i50.tinypic.com/6f7fww.png)

我看到了一些对自定义字段进行排序的示例，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:09:40.273

您可以尝试使用 WPDB 和 SQL 执行此操作：

```
global $wpdb;
$cities = $wpdb->get_col( "SELECT meta_value, COUNT(*) AS c 
FROM $wpdb->postmeta 
WHERE meta_key = 'city'
GROUP BY meta_value 
ORDER BY c DESC" ); 
```

用实际的元键替换城市。$cities 将是一个数组，按相应元字段中包含城市的帖子数排序。

要打印此数组 $cities，您可以使用以下代码：

```
echo '<ul>';
foreach( $cities as $city ) {
    echo '<li>' . $city . '</li>';
}
echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T00:37:09.550

做这个 ：

```
 <?php

              $custom_fields = get_post_custom($post_id);
              // Retrieves your custom fields
              $my_city_custom_field = $custom_fields['city'];
              // Retrieve all values for your "city" custom field
              foreach ( $my_city_custom_field as $key => $value )
                $cities[$value]=$city[$value]+1;
                // add one to the city index of the cities table
                // So first time London comes up you get 1, second time 2, etc.

                asort($cities);
                // sorts the $cities table by value

               foreach ( $cities as $key => $value )
                echo($key);
                // print the city's names, in proper order

            ?> 
```

我可能做得有点快，但至少，你会明白的

# magento - 使用 Magmi 导入产品 - 在哪里上传 CSV？

> ID：13434242
> 
> 赞同：0
> 
> 时间：2012-11-17T19:55:35.010
> 
> 标签：magento, magmi

我最近安装了 Magmi 扩展以在 Magento 中导入产品，但不知道应该在哪里上传 CSV 文件以供导入。它说我应该设置 CSV 文件，但是环顾四周后，我没有看到任何可以单击并选择要上传的文件的地方。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:19:57.333

没有文件上传 - 它要求您设置导入文件所在的目录。因此将它们放入 var/import 并在 Magmi 中设置该目录，保存您的配置文件设置。然后，您将获得该目录中所有 csv 文件的下拉列表。选择一个，然后运行导入程序。

# java - 为什么我得到奇怪的输出？

> ID：13434243
> 
> 赞同：1
> 
> 时间：2012-11-17T19:55:44.380
> 
> 标签：java

这个程序找到素数并像这样打印出来： factor (order) factor (order)

```
import java.util.Scanner;
import java.util.ArrayList;

public class Factorise2
{
    public static ArrayList<Integer> get_prime_factors(int number)
    {
//Get the absolute value so that the algorithm works for negative numbers
        int absoluteNumber = Math.abs(number);
        ArrayList<Integer> primefactors = new ArrayList<Integer>();
        ArrayList<Integer> newprimes = new ArrayList<Integer>();
        int b;
        int c = (int)Math.sqrt(absoluteNumber);
//Get the square root so that we can break earlier if it's prime

        for (int j = 2; j <= absoluteNumber;)
        {
//Test for divisibility by j, and add to the list of prime factors if it's divisible. 
            if (absoluteNumber % j == 0)
            {
                primefactors.add(j);
                absoluteNumber /= j;
                c = (int)Math.sqrt(absoluteNumber);
            }
            else
            {
                for (int a = 0; a < newprimes.size();)
                {
//Change j to the next prime
                    b = newprimes.get(a);
                    if (j % b == 0) 
                    {
                        j++;
                        a = 0;
                    }
                    else
                    {
                        a++;
                    }
                }
                newprimes.add(j);
            }
            if (j > c)
            {
                primefactors.add(absoluteNumber);
                break;
            }
        }
        return primefactors;
    }

    public static void main(String[] args)
    {
//Declare and initialise variables
        int number;
        int count = 1;
        Scanner scan = new Scanner(System.in);
//Get a number to work with
        System.out.println("Enter integer to analyse:");
        number = scan.nextInt();
//Get the prime factors of the number
        ArrayList<Integer> primefactors = get_prime_factors(number);
//Group the factors together and display them on the screen
        System.out.print("Prime factors of " + number + " are ");
        primefactors.add(0);
        for (int a = 0; a < primefactors.size() - 1; a++)
        {
            if (primefactors.get(a) == primefactors.get(a+1))
            {
                count++;
            }
            else
            {
                System.out.print(primefactors.get(a) + " (" + count + ") ");
                count = 1;
            }
        }
    }
} 
```

它在大多数情况下都有效，但是当我输入 131033809 时，我得到一个奇怪的输出：

```
C:\Users\Eamon>java Factorise2
Enter integer to analyse:
4
Prime factors of 4 are 2 (2)
C:\Users\Eamon>java Factorise2
Enter integer to analyse:
128
Prime factors of 128 are 2 (7)
C:\Users\Eamon>java Factorise2
Enter integer to analyse:
9
Prime factors of 9 are 3 (2)
C:\Users\Eamon>java Factorise2
Enter integer to analyse:
121
Prime factors of 121 are 11 (2)
C:\Users\Eamon>java Factorise2
Enter integer to analyse:
131033809
Prime factors of 131033809 are 11447 (1) 11447 (1) 
```

为什么不写

```
11447 (2) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T20:02:18.980

在 Java 中，`Integer`数据类型是对象。因此，`==`只有对象标识相同时，操作才会返回 true：注意，这与值是否实际相等无关。你应该使用：

```
if (primefactors.get(a).equals(primefactors.get(a+1))) 
```

# ruby-on-rails - ID 在 URL 中混淆

> ID：13434244
> 
> 赞同：0
> 
> 时间：2012-11-17T19:55:46.093
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

因此，我对 Ruby on Rails 比较陌生，并且正在使用该语言构建一个项目管理系统，以便在我的大学进行独立研究。到目前为止，我已经创建了：

*   一个用户可以创建多个项目的区域(http://i.imgur.com/pXOBg.png)
*   在每个项目中，用户可以创建多个待办事项列表（[http://i.imgur.com/FT3no.png](http://i.imgur.com/FT3no.png)）
*   在每个待办事项列表中，用户可以创建多个可以标记为完成/未完成的任务 (http://i.imgur.com/DMdcN.png)

一切都通过 SQLite DB 中的外键关联，并且工作相对良好，除了当我添加任务时。尽管该任务*确实*被添加到了待办事项列表中，但我被重定向到了一个不正确的 URL。我创建了与我的项目管理系统分开的待办事项列表应用程序，只是为了看看我如何创建它以及重定向以及一切工作正常，但将它实施到我的项目中证明有些麻烦。

这是遇到的问题：http: [//i.imgur.com/Axuf2.jpg](http://i.imgur.com/Axuf2.jpg)。URL 中的链接应该是**http://localhost:3000/projects/2/lists/15**，所以 ID 混淆了。显示的是**http://localhost:3000/projects/15/lists/14**其中 15 是列表的 ID，而不是项目，14 是任务的 ID，而不是列表。

我相信问题出在我的**tasks_controller.rb**中，其中包含以下内容：

```
class TasksController < ApplicationController

  attr_accessor :completed
  before_filter :find_list
  respond_to :html, :xml, :js

  def create
    @task = @list.tasks.new(params[:task])
    if @task.save
      flash[:notice] = "Task saved"
      redirect_to project_list_url(@list)
    else
      flash[:error] = "Task could not be saved"
      redirect_to project_list_url(@list)
    end
  end

  def complete
    @task = @list.tasks.find(params[:id])
    @task.completed = true
    @task.save
    redirect_to project_list_url(@list)
  end

  def incomplete 
    @task = @list.tasks.find(params[:id])
    @task.completed = false
    @task.save
    redirect_to project_list_url(@list)
  end

  def destroy
    @task = @list.tasks.find(params[:id])
    if @task.destroy
      flash[:notice] = "Task deleted"
      redirect_to project_list_url
    else
      flash[:error] = "Could not delete task"
      redirect_to project_list_url
    end
  end

  private 

  def find_list
    @list = List.find(params[:list_id])
  end

end 
```

我认为问题出现在以下方面`$link redirect_to project_list_url(@list)`，因为我认为它应该是`$link redirect_to project_list_url(@project, @list)`。但每次我添加：

```
@project = Project.find(params[:project_id]) 
```

对于我的代码，待办事项不会从已完成变为未完成，反之亦然。

这是我**的待办事项列表视图**中的代码：

```
<h3>Stuff to do</h3>
<ul>
  <% @list.tasks.incomplete.each do |task| %>
    <li><%= task.description %> <%= button_to "Complete", complete_task_path(@list.id,task.id) %></li>
  <% end %>
</ul> 

<h3>Stuff I've Done</h3>
<ul>
  <% @list.tasks.completed.each do |task| %>
    <strike><li><%= task.description %></strike> <%= button_to "Incomplete", incomplete_task_path(@list.id,task.id) %></li>
  <% end %>
</ul> 

<hr />

<%= form_for [@project, @list, @task] do |form| %>
  <p><%= form.text_field :description %> <%= form.submit %></p> 
```

最后，快速浏览一下我的**routes.rb**：

```
root :to => 'home#index'

devise_for :users

resources :projects do 
  resources :messages
  resources :lists do
    resources :tasks
  end
end

match 'lists/:list_id/tasks/:id/complete' => 'tasks#complete', :as => :complete_task
match 'lists/:list_id/tasks/:id/incomplete' => 'tasks#incomplete', :as => :incomplete_task 
```

因此，ID 在 URL 中混合在一起，每当我编辑列表时它们也会这样做（尽管我想如果我可以为我可以为所有事情修复它的任务修复它）。

非常感谢任何看到这个并为我提供帮助的人，我非常感谢你所有的时间。如果您需要查看任何其他控制器、模型或视图（项目、列表、任务）或我项目中的任何内容，我将非常乐意分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:14:54.637

`project_list_url(@list)`：这个路由助手有两个参数：一个项目和一个列表。尝试添加项目（或仅添加项目 ID）：

```
redirect_to project_list_url(@list.project_id, @list) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:27:12.057

乍一看，我认为将资源嵌套在 3 层以上是不合适的。您可以在此[Ruby on Rails 指南](http://guides.rubyonrails.org/routing.html#nested-resources)中阅读更多内容。但是肯定会让你的生活更轻松的是 Jose Valim 的[杰作](https://github.com/josevalim/inherited_resources)inherit_resources 。它解决了很多嵌套资源的问题。

看来您在控制器中错过了一件更重要的事情：新动作。无论您有创建操作，您的新数据库记录都取决于“新”操作。

```
def new
 @list = List.find(params[:list_id])
 @task = Task.new
end

def create
 @list = List.find(params[:list_id])
 @task = @list.build(params[:task])
  if @task.save
   # success
  else
   # fail
  end
end 
```

这就是创建关联背后的基本逻辑。

已编辑：我在“新”操作中看到了我的错误：而不是 @task = Task.new 它应该是 '@task = @list.tasks.new' 。

# jsf - JSF2.0 Primefaces p:selectCheckboxMenu

> ID：13434246
> 
> 赞同：1
> 
> 时间：2012-11-17T19:56:09.863
> 
> 标签：jsf, primefaces, glassfish

在我的 MacBook 上运行

> *   JSF2.0
> *   Primefaces 3.4.2
> *   日蚀朱诺
> *   玻璃鱼

当我运行此代码时；

```
<h:form>
<h:outputText value="SMSC:" />

<p:selectCheckboxMenu id="graphsmscnames"
value="#{reportBean.selectedSmsclist}" label="SMSC" filter="true"
filterText="Filter" filterMatchMode="startsWith"
panelStyle="width:250px">

<f:selectItems value="#{reportBean.smsclist}" />

</p:selectCheckboxMenu>

<p:message for="graphsmscnames" />

<p:commandButton id="graphgenreport" value="Generate"
update=":reportpanel" action="#{reportBean.test}" />

</h:form> 
```

和 managedBean 中的代码（带有用于 smsclist 变量和 selectedSmscList 的 getter/setter）

```
Map<String, String> smsclist;
private List<String> selectedSmsclist;

public constructure(){
smsclist=new HashMap<String,String>();
smsclist.put("one","one");
smsclist.put("two","two");
}

public void test(){
System.out.println(selectedSmsclist.size());
    } 
```

即使从 UI 中选择了多个/单个项目 - 当按下 commandButton 时，它也不会反映在我的 managedBean 中。selectedSmscList 列表大小仍然为零。

# css - 在滑块顶部叠加图像

> ID：13434247
> 
> 赞同：0
> 
> 时间：2012-11-17T19:56:10.307
> 
> 标签：css, image, slider

我想在我的滑块顶部放置一个图像 - 滑块中图像两侧的滚动。[BitsyBride.com](http://bitsybride.com)

现在它们是 prev next 链接，但是，正如您通过调整浏览器大小可以看到的那样，它们会跳来跳去。我在这个问题上认输了，只是希望它们成为一个装饰性的形象。

那么，如何在上面放置图像呢？

```
#sliderwrap {
    width: 100%;
    padding: 40px 0;
    overflow: hidden;
    position: relative;
    background-image: url(http://bitsybride.com/wp-content/themes/basement/images/linen3.png);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:08:41.113

你会建议我把它放在我的画廊的哪里？

```
#mygallery{ padding:0;position: relative;}

.stepcarousel{
position: relative; /*leave this value alone*/
overflow: scroll; /*leave this value alone*/
width: 980px; /*Width of Carousel Viewer itself*/
height:300px; /*Height should enough to fit largest content's height*/
margin:0 auto;
padding:0;
}

 .stepcarousel .belt{
position: absolute; /*leave this value alone*/
left: 0;
top: 0px;
}

 .stepcarousel .panel{
float: right; /*leave this value alone*/
margin:0 40px 0 0;
border:none;
 }

 .thumb-title{
top:-105px;
right:0;
display:block;
position:absolute;
width: 250px; height:68px;
background: #eee url(images/line-h-l.png) top repeat-x;
margin:0;
overflow:hidden;
text-shadow:0 1px 1px #333;
}   

 .thumb-title-clear{
padding:10px 20px 10px 20px;
height:48px;
overflow:hidden;
}

 .thumb-title h2 a {
display:block;
text-decoration: none;
font-size:16pt;
line-height:18pt;
height:50px;
overflow:hidden;
font-weight:bold;
}

 .thumb-title h2 a:hover { 
}

 .stepcarousel .slideimg{
 float: left; /*leave this value alone*/
 background: #000 /*clip content that go outside dimensions of holding panel DIV*/
 margin:0; /*margin around each panel*/
 padding:0;   
 width:300px;
 height:300px;
 overflow:hidden;
 border-radius:15px;
 -moz-border-radius:15px; /* Firefox 3.6 and earlier */
 } 
```

# ruby-on-rails - Ruby on Rails：将 R 绘图保存在数据库中

> ID：13434253
> 
> 赞同：1
> 
> 时间：2012-11-17T19:57:39.867
> 
> 标签：ruby-on-rails, r

我正在使用[这个文件上传示例](https://github.com/tors/jquery-fileupload-rails-paperclip-example)来上传数据库中的一些文件。我有一个带有 r-script 的 rruby.rb，它对文件（命名为 A）进行统计分析，因此它在文件 A 所在的目录（或其他任何地方）中保存了一个图。我需要将绘图文件保存回数据库。

这是我的 rruby.r 的最简单版本。

```
require "rinruby" 
R.quit myr = RinRuby.new(echo=false) 
myr.filename = "myplot"myr.eval <<EOF 
 png(filename) 
 plot(1:10) 
 rect(1, 5, 3, 7, col="white") 
 dev.off() 
EOF 
```

它将如何在 Ruby on Rails 中工作？[有人建议我以这种方式](https://stackoverflow.com/questions/13422742/ruby-on-rails-extract-the-file-from-db-analyze-it-results-save-in-the-db)构建 rruby.rb 。它会将文件保存到公共/系统（上传文件所在的位置）吗？如何在 Ruby on Rails 数据库中保存文件？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:46:11.677

你问了两个截然不同的问题。

一方面，您正在谈论在使用 rinruby gem 时尝试将 R 生成的图表转储到文件夹中。这就是我正在做的事情。好问题。

另一方面，您问我们如何将“图像存储在数据库中”。尝试一次处理一件事情。删除问题的第 2 部分。你搞清楚任务1了吗？我没有。

PS：没有“ruby on rails 数据库”之类的东西。

# c - curses.h 中空格键的键码是什么

> ID：13434254
> 
> 赞同：7
> 
> 时间：2012-11-17T19:57:41.667
> 
> 标签：c, ncurses, curses

我只有一个简单的问题，我在 curses.h 中找不到空格键的键码。前任。我知道down的代码是KEY_DOWN。谁能帮忙？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T20:11:45.620

空格键没有宏。只需使用 ' ' 来表示一个空格。[您可以在此处](http://pubs.opengroup.org/onlinepubs/7908799/xcurses/curses.h.html)找到 curses 键宏的完整列表。

前任。

```
char mychar = ' ';
if (mychar == ' ') {//Do this...} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-03T09:00:19.123

晚了几年，但由于这是我困惑时的热门歌曲，我想贡献！:-)

您需要做的是使用 ord( *c* )。例如：

```
c = getch()
if c == ord(' '):
    do_something() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T20:05:05.980

[在POSIX 文档中](http://pubs.opengroup.org/onlinepubs/7908799/xcurses/curses.h.html)找不到 curses 的特定定义。

试试`' '`。

# bash - 循环遍历 CSV 文件并在读取时创建新的 csv 文件？

> ID：13434260
> 
> 赞同：2
> 
> 时间：2012-11-17T19:58:20.517
> 
> 标签：bash, text, csv, pattern-matching

我有

```
while read $field1 $field2 $field3 $field4
do
  $trimmed=$field2 | sed 's/ *$//g'
  echo "$trimmed","$field3" >> new.csv
done < "$FEEDS"/"$DLFILE" 
```

现在的问题是`read`我不能让它分割字段 csv 样式，可以吗？请参阅下面的输入 csv 格式。

我需要取出第 3 列和第 4 列，从第 2 列去除填充，并且我不需要引号。

带有列号的 CSV 格式：12 24(")25(,)26(")/27(Field2values) 42(")/43(,)/44(Field3 decimal values) "Field1_constant_value","Field2values ",Field3,字段4

Field1 是恒定的且无关紧要。引用数据，从引号内的 2-23 开始。Field2 固定在第 27-41 列的引号内，数据在左边，右边用空格填充。Field3 是一个十进制数，小数点前有 1,2 或 3 位，后有 2 位，无填充。从第 74 列开始。Field4 是一个日期，我现在不太关心它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T20:08:20.457

是的，您可以使用 read；您所要做的就是重置环境变量`IFS`——内部字段分隔符——，这样它就不会按当前值（默认为空格）拆分行，而是按您自己的分隔符。

考虑具有给定内容的输入文件“a.csv”：

> 1,2,3,4
> 
> 2,3,4,5
> 
> 6,3,2,1

你可以这样做：

```
IFS=','
while read f1 f2 f3 f4; do
    echo "fields[$f1 $f2 $f3 $f4]"
done < a.csv 
```

输出是：

> 字段[1 2 3 4]
> 
> 领域[2 3 4 5]
> 
> 领域[6 3 2 1]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:11:13.387

这里有几个很好的起点：http: [//backreference.org/2010/04/17/csv-parsing-with-awk/](http://backreference.org/2010/04/17/csv-parsing-with-awk/)

# python - GAEUnit 不会自动刷新代码

> ID：13434261
> 
> 赞同：0
> 
> 时间：2012-11-17T19:58:21.003
> 
> 标签：python, google-app-engine

我正在使用[GAEUnit](http://code.google.com/p/gaeunit/)对我的 GAE 应用程序进行单元测试。但是，每当我更改我的代码（不是测试用例代码，而是实际的应用程序代码）并重新运行测试时，它不会使用我新更新的代码，而是使用以前的版本。我必须通过点击 control+c 从终端完全停止该应用程序，然后再次启动它以便测试接收我的新代码。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:40:39.393

最新的 SDK 存在无法重新加载更改代码的问题，并非特定于 GAEUnit：[http ://code.google.com/p/googleappengine/issues/detail?id=8383](http://code.google.com/p/googleappengine/issues/detail?id=8383)

# parsing - 关于 FOLLOW 语法集

> ID：13434262
> 
> 赞同：1
> 
> 时间：2012-11-17T19:58:31.340
> 
> 标签：parsing, compiler-construction, generator, ll

这里[http://slkpg.byethost7.com/llkparse.html](http://slkpg.byethost7.com/llkparse.html)定义了 FOLLOW_k-Sets

“语法中符号串的 FOLLOWk 集是语法中的一组 k 长度终端符号串，它可能遵循语法中可导出的某种句子形式的符号串”

首先，我对链接下的示例有一个疑问，那里是 Grammar 4.2

```
 A  -->  a <Baa> a a              
     A  -->  b <Bba> b a
 <Baa>  -->  b
 <Baa>  -->
 <Bba>  -->  b
 <Bba>  --> 
```

据说：

```
FIRST2 ( A ) = { aa, ab, bb }
FIRST2 ( <Baa> ) = { epsilon }
FIRST2 ( <Bba> ) = { epsilon }

FOLLOW2 ( <Baa> ) = { aa }
FOLLOW2 ( <Bba> ) = { ba } 
```

但我问自己为什么不

```
FIRST2 ( <Baa> ) = { epsilon, b }
FIRST2 ( <Bba> ) = { epsilon, b } 
```

因为从例如也可以导出单个 b 。

此外对于语法

```
S -> X 
X -> aX
X -> aY
Y -> epsilon 
```

我不确定这个集合

```
FOLLOW2(S) 
```

它是空的，{ epsilon } 还是 { a, aa } 因为这些字符串是可推导的，还是因为 S 之后的内容很重要，并且因为 S 是起始符号，所以它后面什么都没有，但是我应该写 FOLLOW2(S) = \empyset 或 FOLLOW2(S) = { epsilon }？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:24:47.223

对于任何 k，FOLLOWk(S) 都是空的，因为根本没有任何东西可以跟随 S。我不知道您所说的“因为这些字符串是可推导的”是什么意思，但是由于它们不能遵循 S ，因此无论如何都无关紧要。

# node.js - socket.io，我如何知道套接字是否保持活动状态？

> ID：13434264
> 
> 赞同：1
> 
> 时间：2012-11-17T19:59:02.380
> 
> 标签：node.js, socket.io

我在 node 上迈出了第一步，并编写了一个简单的聊天应用程序。每次nodejs获得一个新的套接字连接时，它都会保存在一个简单的数组中......我的问题是连接关闭时，因为他的引用仍然存在......**我如何在向她发出任何事件之前检查连接是否处于活动状态，避免崩溃？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:03:43.310

我将使用来自 socket.io 网站的示例。

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  var tweets = setInterval(function () {
    getBieberTweet(function (tweet) {
      socket.volatile.emit('bieber tweet', tweet);
    });
  }, 100);

  socket.on('disconnect', function () {
    clearInterval(tweets);
  });
}); 
```

在连接时它传递一个套接字变量。这对每个客户端都是唯一的，这就是为什么 socket.emit 只发送给一个客户端，或者为什么广播会发送给除了发送者之外的所有人。

```
socket.on('disconnect', function () {
  clearInterval(tweets);
}); 
```

注意它是如何清除间隔的？同样，这是特定于客户端的，因为它发生在特定的“套接字”上，因此您可以执行以下操作：

```
socket.on('disconnect', function () {
  socket.broadcast.emit('disconnected', {user: "film42", status: "disconnected from server"});
}); 
```

Socket.IO 将优雅地处理心跳/断开连接，因此您无需担心额外内容，只需处理断开连接即可。我希望这对你有用:)。

# android - SDK 17 (4.2) 中 ActionBar 生命周期的变化

> ID：13434268
> 
> 赞同：2
> 
> 时间：2012-11-17T19:59:38.380
> 
> 标签：android, android-actionbar

API 17 (Android 4.2) 中操作栏操作的生命周期似乎发生了变化。

在那个版本之前`onCreateOptionsMenu()`被调用 during`onCreate()`但现在它似乎至少被调用 after `onStart()`。

有人可以确认这一点并就该更改提供一些解释和文档。这是唯一的变化还是更多的操作栏/活动生命周期变化？

**编辑**：这似乎有[一个未解决的问题](http://code.google.com/p/android/issues/detail?id=39721)。

# python - 自定义 JSONEncoder 返回格式错误的字符串

> ID：13434269
> 
> 赞同：1
> 
> 时间：2012-11-17T19:59:44.123
> 
> 标签：python, string, json

我正在实现自己的 JSONEncoder 来完全按照我的需要处理不同的类。不幸的是，我的自定义编码器返回了一些格式错误的字符串。它们被引号包围，某些字符（引号）被转义。

请使用以下代码重现该行为：

```
import json

class CustomEncoder(json.JSONEncoder):
    def default(self, givenObject):
        #for testing purposes this always returns the same string
        str = '{"id":0,"name":"Peter"}'
        return str;

class AnyClass(object):
    pass

encoder = CustomEncoder()
dummyClass = AnyClass()

#expected output: {"id":0,"name":"Peter"}
print encoder.encode(dummyClass)

#output: "{\"id\":0,\"name\":\"Peter\"}" 
```

我正在使用 Python 2.7。

我怎样才能防止这种行为？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:02:43.723

`default`应该返回一个对象，而不是一个 json 块：

```
import json

class CustomEncoder(json.JSONEncoder):
    def default(self, givenObject):
        obj = {"id":0,"name":"Peter"}
        return obj

class AnyClass(object):
    pass

encoder = CustomEncoder()
dummyClass = AnyClass()

print encoder.encode(dummyClass) # {"id": 0, "name": "Peter"} 
```

[http://docs.python.org/library/json.html#json.JSONEncoder.default](http://docs.python.org/library/json.html#json.JSONEncoder.default)：

> 在子类中实现此方法，使其返回 o 的可序列化对象，或调用基本实现（以引发 TypeError）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:02:42.617

代替

```
 str = '{"id":0,"name":"Peter"}'
    return str; 
```

尝试返回一个对象

```
 return {"id":0,"name":"Peter"} 
```

如所写，库获取一个字符串并通过引用它并转义特殊字符将其编码为 JSON。

# c# - Form2上Form1的C#访问方法

> ID：13434280
> 
> 赞同：0
> 
> 时间：2012-11-17T20:00:57.690
> 
> 标签：c#, winforms

我的项目中有 2 个表格。Form1 是主窗体。我有一个打开 Form2 的按钮、一个 ListView 和一个调用 url 并向 ListView 提供从 url 获取的数据的方法。

Form2 有一个用于 url 的文本框和一个“确定”按钮。

当我按下 Form1 上的按钮时，它会打开 Form2，没问题。如果我在 Form2 的文本框中输入 url 并按 Ok，我该如何管理它以将 url 传递给 Form1 中的方法？

如果我做

```
Form1 form1 = new Form1();
form1.method(); 
```

它显然会打开一个新的 Form1 实例，在那里执行该方法并在那里填充列表框，但不是在我原来的 Form1 上。

我在网上找到了各种解决问题的方法，但要么太复杂，要么不起作用。

我怎么能说它实际上执行了我已经拥有的 Form1 上的方法，因此用这些值加载了正确的列表框？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:03:34.670

定义事件`Form2`并在输入 url 时引发它：

```
public class Form2 : Form
{
   public event EventHandler UrlEntered;

   private void ButtonOK_Click(object sender, EventArgs e)
   {
       if (UrlEntered != null)
           UrlEntered(this, EventArgs.Empty);
   }

   public string Url { get { return urlTextBox.Text; } }
} 
```

在 Form1 上订阅该事件：

```
Form2 form2 = new Form2()
form2.UrlEntered += Form2_UrlEntered;
form2.Show(); 
```

处理此事件：

```
private void Form2_UrlEntered(object sender, EventArgs e)
{
   Form2 form2 = (Form2)sender;
   string url = form2.Url;
   // use it
} 
```

* * *

您还可以`EventHandler<UrlEnteredEventArgs>`使用自定义事件参数定义类型的事件，这将为订阅者提供输入的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T00:59:33.207

看一看：

```
//In Form1 opening Form2
Form2 frm = new Form2();
frm.Owner = this;
frm.Show();

//Example to call methods in FORM1 from FORM2
private void button1_Click(object sender, EventArgs e)
{
    Form1 frmParent = (Form1)this.Owner;
    frmParent.testeFunction();
    frmParent.InsertInGrid(textBox1.Text);
} 
```

所以，基本上你需要在 Form1 中创建一个函数来从 Form2 调用（传递参数）。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:16:53.243

在 Form2 上定义一个属性以允许访问结果

```
// In Form2
public string Url { get { return urlTextBox.Text; } } 
```

在 Form1 中

```
var form2 = new Form2();
form2.ShowDialog(this);
string url = form2.Url; 
```

注意：除非方法等待直到`Show()`关闭。`ShowDialog()``form2`

`ShowDialog`参数`this`是要打开的表单的所有者。它绑定并`form2`使其`form1`始终出现在`form1`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-17T20:05:45.070

它创建一个新实例，因为您正在调用*new*。

您可以遍历**Application.OpenForms**并检查表单名称。找到Form1之后，就可以方便的调用它的*public*方法了；

```
Form1(Application.OpenForms[0] as Form1).method(); 
```

# c# - 替换 ListView 中列下项目的文本

> ID：13434283
> 
> 赞同：3
> 
> 时间：2012-11-17T20:01:01.560
> 
> 标签：c#, winforms, listview

我需要一些代码来替换 listView 中项目的文本。

我想替换列表视图第 4 列下的所有项目。这是第 4 列中项目的示例字符串：`<span class="stat">0.58`

无论如何，这是我为替换 listView 中的文本而写的，但它不起作用：

```
foreach (ListViewItem i in listViewClickbank.Items)
{
    if (i.SubItems[3].Text.Contains("span"))
    {
        i.Text.Replace("<span class=", "");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T20:04:04.480

该`String.Replace`方法返回新字符串。它不会改变原来的。此外，您正在更改`Text`项目的（第一列），而不是第四列。试试这个：

```
i.SubItems[3].Text = i.SubItems[3].Text.Replace("<span class=", ""); 
```

# python - 函数体有问题

> ID：13434284
> 
> 赞同：1
> 
> 时间：2012-11-17T20:01:15.600
> 
> 标签：python, python-3.x

当且仅当 L1 中的所有整数都是 L2 中相应位置的字符串的长度时，我有一个函数必须返回 True。和前提条件：len(L1) == len(L2)。

*例子：*

```
>>> are_lengths_of_strs([4, 0, 2], ['abcd', '', 'ef']) 
True 
```

下面是函数：

```
def are_lengths_of_strs(L1, L2):
    result = True
    for i in range(len(L1)):
        if i in len(L1) != len(L2):
            result = False
    return result 
```

这会导致错误。线路 `if i in len(L1) != len(L2):`错了。有人可以帮助我吗？

Obs：我必须使用`!=`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:03:54.110

您的代码的更正版本：

```
def are_lengths_of_strs(L1, L2):
    result = True
    for i in range(len(L1)):
        if L1[i] != len(L2[i]):
            result = False
    return result 
```

请注意，这不是 Pythonic，因为您实际上并不需要这里的索引：

```
def are_lengths_of_strs(L1, L2):
    result = True
    for i, l in zip(L1, L2)
        if i != len(l):
            result = False
    return result 
```

更短：

```
def are_lengths_of_strs(L1, L2):
    return all(i == len(l)
        for i, l in zip(L1, L2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:03:44.417

使用内置`all()`的`zip()`：

```
In [5]: all(x==len(y) for x,y in zip([4, 0, 2], ['abcd', '', 'ef']))
Out[5]: True 
```

或者如果`!=`是强制使用`any()`：

```
In [7]: not any(x != len(y) for x,y in zip([4, 0, 2], ['abcd', '', 'ef']))
Out[7]: True 
```

或改进您的代码：

```
def are_lengths_of_strs(L1, L2):
    for x,y in zip(L1,L2):
        if x!=len(y):
            return False
    return True

In [12]: are_lengths_of_strs([4, 0, 2], ['abcd', '', 'ef'])
Out[12]: True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:09:14.907

您的`if`情况可能是问题所在：

```
 if i in len(L1) != len(L2): 
```

这会检查`i in len(L1)`, but`len(L1)`是否是一个整数，它不能“包含”另一个数字。

您必须遍历每个列表的元素：

```
def are_lengths_of_strs(L1, L2):
    result = True

    for i in range(len(L1)):
        if L1[i] != len(L2[i]):
            result = False

    return result 
```

另外，摆脱`result`. 一个简单的`return`语句就可以了：

```
def are_lengths_of_strs(L1, L2):
    for i in range(len(L1)):
        if L1[i] != len(L2[i]):
            return False

    return True 
```

如果您想获得更多 Pythonic，请使用`zip`：

```
def are_lengths_of_strs(L1, L2):
    for a, b in zip(L1, L2)
        if a != len(b):
            return False

    return True 
```

# android - 从服务启动语音到文本引擎

> ID：13434294
> 
> 赞同：0
> 
> 时间：2012-11-17T20:02:24.023
> 
> 标签：android, speech-to-text

我有一项服务，我试图从其中启动语音到文本引擎，但它不工作.. 是否可以从服务启动语音到文本？

MyService.java 类：

```
public class MyService extends Service{

OnActRes r;

EditText edittext;
//private Runnable m;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {

            // TODO Auto-generated method stubry

    try
    {
               Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
               Toast.makeText(MyService.this,"STEP 1 !", Toast.LENGTH_LONG).show(); 
               intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getClass().getPackage().getName());
               Toast.makeText(MyService.this,"STEP 2 !", Toast.LENGTH_LONG).show();  
               intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
               Toast.makeText(MyService.this,"STEP 3 !", Toast.LENGTH_LONG).show();  
               //since we only want one, request 1
               intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 1);
               Toast.makeText(MyService.this,"STEP 4 !", Toast.LENGTH_LONG).show(); 
               intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, "en-US");
               Toast.makeText(MyService.this,"STEP 5 !", Toast.LENGTH_LONG).show();
               r.startActivityForResult(intent, 1234);
    }
    catch(Exception e)
    {
        Toast.makeText(MyService.this,"ERROR here !", Toast.LENGTH_LONG).show(); 
    }

        } 
```

}

结果.java

```
public class OnActRes extends Activity {

public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode != Activity.RESULT_OK){
        {
         Toast.makeText(OnActRes.this,"AR", Toast.LENGTH_LONG).show();  

        ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        String topResult = matches.get(0);

        Toast.makeText(OnActRes.this,topResult, Toast.LENGTH_LONG).show();   

}

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:29:28.007

您应该检查/更改的几件事：

1.  在您的代码中，活动引用`r`为空。
2.  你为什么要为此使用服务？在这种情况下没有理由使用服务（它在后台不做任何事情，它的唯一目的是调用识别器活动 - 你可以从你的`OnActRes`活动中做到这一点）。

如果两者都没有帮助，您可以尝试使用[Android 的 API](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)进行语音识别，而不使用识别活动（[此处为示例](https://stackoverflow.com/questions/4975443/is-there-a-way-to-use-the-speechrecognizer-api-directly-for-speech-input)）。如果您愿意，可以从服务中调用它。

# ios - iOS 文本和图像数据存储

> ID：13434300
> 
> 赞同：1
> 
> 时间：2012-11-17T20:03:04.113
> 
> 标签：ios, iphone, storage, xcode4.5

我正在为 iPhone 构建一个类似于百科全书的应用程序，我计划在其中使用大量格式化文本和相当多的图像。我的问题是我真的不知道如何在应用程序中以结构良好且易于访问的方式存储这些信息，以便在启动后立即离线访问。

我不太熟悉数据存储技术，我只知道 WebView、NSUserDefaults 之类的基础知识，或者只是将文本作为字符串直接存储在代码中的数组或字典中。显然，这些技术都不能完全满足我的需要。所以我需要一些帮助。

更有经验的 iOS 开发人员可以指导我学习教程或帮助我如何进行操作吗？使用什么技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:07:09.110

您可以使用[核心数据](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)来存储图像的位置并检索它们。与格式化文本类似。

# c# - Visual Studio 本地数据库到在线数据库

> ID：13434304
> 
> 赞同：3
> 
> 时间：2012-11-17T20:03:23.190
> 
> 标签：c#, database, sql-server-ce

我目前`.sdf`在我的 Visual Studio 应用程序中使用本地数据库（-SQL Server CE），现在我正在尝试将其用作在线数据库，但我有一些疑问。

使用代码：

```
SqlCeConnection Conn = new SqlCeConnection("Data Source=" 
    + "|DataDirectory|\\Database1.sdf"); 
```

`SqlCeConnection`支持在线数据库还是只支持本地数据库？

如果是这样，我应该使用哪些参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:08:48.327

**当然**，它确实支持在线数据库，但为此您需要在 SQL Server 中恢复数据库。文件系统数据库对此并不好。安装 SQL Server 并在那里恢复您的数据库和具有适当权限的用户。

现在你的连接字符串是这样的

```
 Server=serverip\SQLServer;Database=database1;uid=abc;pwd=12345 
```

# android - Android ant 构建项目失败

> ID：13434308
> 
> 赞同：2
> 
> 时间：2012-11-17T20:03:39.447
> 
> 标签：android, ant

我正在尝试创建 android UI 测试。我已按照此链接中的示例进行操作：http: [//developer.android.com/tools/testing/testing_ui.html#running](http://developer.android.com/tools/testing/testing_ui.html#running)。

请注意，在“构建和部署您的 uiautomator 测试”阶段，有一个错误，第一个命令必须是 /tools/android **create** uitest-project -n -t 1 -p 。无论如何，这不是我的问题。

我的问题在步骤“ant build”中，我收到了这个错误：

```
-post-compile:

-dex:
      [dex] input: c:\Users\tabony\workspace\bin\classes
      [dex] Converting compiled files and external libraries into c:\Users\tabony\workspace\bin\classes.dex...
      [dx] no classfiles specified

BUILD FAILED
    c:\Program Files (x86)\Android\android-sdk\tools\ant\ **uibuild.xml:197: null returned: 1**

Total time: 1 second 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T15:06:12.843

我遇到了同样的错误。我犯的错误是：我只设置路径直到我的项目所在的目录。（之前的一步）有`xyz/projects/Tests`

错误：给出的路径为：`xyz/project`

修正路径： `xyz/projects/Tests`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T15:35:45.013

在这里回答：[将外部 jars 添加到 Android UIautomator 项目](https://stackoverflow.com/questions/16026355/adding-external-jars-to-an-android-uiautomator-project)

请使用 neeraj t 给出的 custom_rules.xml 文件（下面给出的编辑版本）。

neeraj t 的最后一个答案对我有用。我需要做的唯一更新是：将 jar 放入 libs 而不是“lib”文件夹并将 custom_rule.xml 命名为 custom_rules.xml 并将所有内容放入项目中，如下所示（我也发布了对原始解决方案的编辑）

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project name="custom_rules">

<property name="jar.libs.dir" value="libs" />
<property name="jar.libs.absolute.dir" location="${jar.libs.dir}" />
<path id="classpath">
    <fileset dir="${jar.libs.absolute.dir}">
        <include name="your-helping-version.jar" />
        <include name="gson-2.2.2.jar" />
    </fileset>
</path>

<!-- version-tag: VERSION_TAG -->
<import file="${sdk.dir}/tools/ant/uibuild.xml" />

<!-- overwrite the compile target in uibuild.xml to include to external 
    jars -->
<target name="compile" depends="-build-setup, -pre-compile">
    <javac encoding="${java.encoding}" source="${java.source}"
        target="${java.target}" debug="true" extdirs="" includeantruntime="false"
        destdir="${out.classes.absolute.dir}" bootclasspathref="project.target.class.path"
        verbose="${verbose}" fork="${need.javac.fork}">
        <src path="${source.absolute.dir}" />
        <classpath refid="classpath" />
        <compilerarg line="${java.compilerargs}" />
    </javac>
</target>

<!-- overwrite the -dex target in uibuild.xml to include external jar files 
    into the target dex file. -->
<target name="-dex" depends="compile, -post-compile">
    <dex executable="${dx}" output="${intermediate.dex.file}"
        nolocals="@{nolocals}" verbose="${verbose}">
        <fileset dir="${jar.libs.absolute.dir}">
            <include name="your-helping-version.jar" />
            <include name="gson-2.2.2.jar" /> 
        </fileset>
        <path path="${out.classes.absolute.dir}" />
    </dex>
</target>
</project> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T10:24:54.217

确保必须安装 Apache ant 软件并且 ant.exe 文件的路径应该放在 PATH 变量中

# java - 专注于 Key Listener 的 Java 游戏

> ID：13434311
> 
> 赞同：1
> 
> 时间：2012-11-17T20:03:59.133
> 
> 标签：java, swing, focus, jframe

我正在从事 Java 游戏开发，我遇到的一个问题是实现击键。我已经正确实现了 KeyListeners 的代码，但是只要我点击游戏窗口或在它之外，KeyListener 就会停止工作。

我确定这是一个焦点问题，因为我可以最小化窗口并将其重新启动，并且 KeyListener 将再次工作。

我的设置是一个 JFrame，其中包含一个用于绘图的 Canvas 对象。我有一个添加到 JFrame 的常规 KeyListener。

所以，我猜，当我点击游戏时，画布获得焦点？但它不应该，因为我将 isFocasable() 设置为 false。

这是我正在使用的一些代码，以免造成任何混淆：

在这里，我创建了屏幕和画布

```
public final void initScreen(DisplayMode dm, boolean fs, boolean vs)
{
    screen = new EScreen (dm, fs, vs); 
    canvas = new EGameCanvas (screen);
    canvas.setFocusable (false);
    screen.add(canvas);

    keyMapManager = KeyMapManager.getInstance (this);

    if (fs) {
        screen.setFullScreen ();
    }
    else {
        screen.setWindowed ();
    }
} 
```

这是我添加 KeyListener 的地方（请注意，KeyMap 实现 KeyListener 仅此而已）

```
public boolean setActiveKeyMap(String newKeyMap)
{
    if (keyMaps.containsKey(newKeyMap)) {
        screen.removeKeyListener (activeKeyMap);
        activeKeyMap = keyMaps.get (newKeyMap);
        screen.addKeyListener (keyMaps.get (newKeyMap));

        return true;
    }
    return false;
} 
```

这是我的 keyPressed 事件，它只是改变了一个变量

```
public void keyPressed(KeyEvent ev) {
    if (ev.getKeyCode() == KeyEvent.VK_ESCAPE)
        game.setIsRunning (false);
} 
```

请注意，所有这些代码都可以正常工作。也就是说，直到我点击游戏窗口。我没有在任何地方实现任何 MouseListeners。另外，我确实实现了这段代码：

```
screen.setFocusTraversalKeysEnabled (false); 
```

最后，如您所见，我的游戏同时处理全屏模式和窗口模式。两者都会出现此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:03:24.340

我的游戏有相同的配置：将 keyListener 添加到画布而不是 JFrame

如果您仍然希望 JFrame 发送事件，您还可以将它添加到 JFrame 和画布（相同的 keyListener）

```
canvas.addKeyListener(this); 
```

*this：假设你的对象实现了 KeyListener 接口

# php - 同一查询中的 DISTINCT 计数和总和

> ID：13434314
> 
> 赞同：1
> 
> 时间：2012-11-17T20:04:15.047
> 
> 标签：php, mysql

这是我的桌子

```
id , tiket_id , agency , problem
 1  , 123     , 1      ,  x
 2  , 123     , 1      ,  y
 3  , 124     , 2      ,  z 
```

我有一个查询，它根据代理向我提供表格的统计信息，基本上是几个计数和总和

```
 SELECT  COUNT(*) as total , 
 SUM(CASE WHEN `agancy` = '1' THEN 1 ELSE 0 END) as ag_1
 SUM(CASE WHEN `agancy` = '2' THEN 1 ELSE 0 END) as ag_2 
```

但我希望具有相同ticket_id 的行只计算一次

例如，前两行具有相同的票号，它们实际上是一张票。

我可以为总数做到这一点

```
 SELECT  COUNT(distinct(ticket_id)) as total , 
```

我不知道该怎么做`SUM`？我知道这行不通

```
 SUM(  DISTINCT ticket_id CASE WHEN `agancy` = '1' THEN 1 ELSE 0 END) as ag_1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:38:14.803

好吧，如果您只需要一个结果行：

```
select sum(cnt) as total, SUM(case when agency = 1 then 1 else 0 end) as ag1, SUM(case when agency = 2 then 1 else 0 end) as ag2 from (     
    SELECT COUNT(*) as cnt, agency
    from foo
    group by tiket_id,agency
) b 
```

[http://www.sqlfiddle.com/#!2/cde84/1](http://www.sqlfiddle.com/#!2/cde84/1)

请注意，这假设两个不同的机构不会共享一个ticket_id。

编辑。好吧，我重读了你的帖子，我不确定你是想要表中的总行数还是只需要唯一的票证 ID。如果您只想要唯一的票证 ID，那么您可以执行以下操作：

```
select COUNT(*) as total , SUM(case when agency = 1 then 1 else 0 end) as ag1, SUM(case when agency = 2 then 1 else 0 end) as ag2 from (        
    SELECT COUNT(*) as cnt, agency
    from foo
    group by tiket_id,agency
) b; 
```

见：[http ://www.sqlfiddle.com/#!2/cde84/5](http://www.sqlfiddle.com/#!2/cde84/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:25:36.833

我会说使用 group by

```
SELECT  COUNT(*) as total , 
SUM(CASE WHEN `agancy` = '1' THEN 1 ELSE 0 END) as ag_1
SUM(CASE WHEN `agancy` = '2' THEN 1 ELSE 0 END) as ag_2
from mytable
group by tiket_id 
```

# mysql - 插入...仅选择某些字段

> ID：13434315
> 
> 赞同：1
> 
> 时间：2012-11-17T20:04:34.437
> 
> 标签：mysql, select, insert

我的数据库中有两个表，我想查找第一个表中存在但第二个表中不存在的所有记录。然后我想将第一个表中的 id 和名称（但不是其余字段）复制到第二个表中，并为第二个表中的第三列设置一个值。我正在使用它来获取记录：

```
SELECT table1.* FROM table1 WHERE NOT EXISTS (SELECT * FROM table2 WHERE
table2.id = table1.id) 
```

但我不确定 INSERT 命令的正确语法。我想它会开始

```
INSERT INTO table2 [id,name] 
```

但是在那之后我要指定什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:08:58.183

像这样：

```
INSERT INTO table2 (col1, col2, col3) VALUES (1, 2, 3); 
```

如果您从选择中进行插入，它将如下所示：

```
INSERT INTO table2 (id, name, thirdCol)
SELECT (table1.id, table1.name, 'Whatever value') FROM table1
WHERE NOT EXISTS (SELECT id FROM table2 WHERE table2.id = table1.id); 
```

# php - PHP解析HTML字符串

> ID：13434316
> 
> 赞同：1
> 
> 时间：2012-11-17T20:04:35.163
> 
> 标签：php, html, string, parsing

感谢您花一点时间来看看这个。我正在使用 PHP 脚本从 URL 获取页面的源代码，然后尝试解析它并显示某个部分文本。问题似乎是当我获得链接的来源时（使用：

```
$data = file_get_contents($link); 
```

) 变量 $data 将其存储为 HTML 而不仅仅是字符串。我对 PHP 很陌生，所以我不确定 10% 是否是这种情况，但我知道如果我尝试以任何方式显示 $data，它不会显示为纯文本，而是显示为带有 HTML 格式的 HTML。

通常这不会是一个问题，但我试图在 HTML 标记中获取某些东西的值，如下所示：

```
$search = strpos($data, $searchterm); 
```

并且因为它要么存储为 HTML 而不是纯文本，要么以这种方式处理，strpos() 将仅搜索我加载页面时将显示的文本。

更具体地说，在我的文件（关于我的帐户的 YouTube 数据）中，它只会查看以 HTML 格式加载时会显示的内容，这纯粹是胡说八道。

这是我希望它搜索的来源（出于隐私考虑，我已将我的帐户名替换为“MyAccount”）：

```
<entry gd:etag="W/"A0MFR347eCp7I2A9WhNQEU4."" xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:gd="http://schemas.google.com/g/2005" xmlns:yt="http://gdata.youtube.com/schemas/2007">
<id>tag:youtube.com,2008:user:A1RDBCYeYWY9dydB9MmPlg</id>
<published>2007-01-23T15:39:30.000Z</published>
<updated>2012-11-17T08:03:36.000Z</updated>
<category scheme="http://schemas.google.com/g/2005#kind" term="http://gdata.youtube.com/schemas/2007#userProfile"/>
<title>MyAccount</title>
<summary/>
<link rel="alternate" type="text/html" href="http://www.youtube.com/channel/UCA1RDBCYeYWY9dydB9MmPlg"/>
<link rel="self" type="application/atom+xml" href="http://gdata.youtube.com/feeds/api/users/A1RDBCYeYWY9dydB9MmPlg?v=2"/>
<author>
<name>MyAccount</name>
<uri>http://gdata.youtube.com/feeds/api/users/MyAccount</uri>
<yt:userId>A1RDBCYeYWY9dydB9MmPlg</yt:userId>
</author>
<yt:channelId>UCA1RDBCYeYWY9dydB9MmPlg</yt:channelId>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.liveevent" href="http://gdata.youtube.com/feeds/api/users/MyAccount/live/events?v=2" countHint="0"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.favorites" href="http://gdata.youtube.com/feeds/api/users/MyAccount/favorites?v=2" countHint="0"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.contacts" href="http://gdata.youtube.com/feeds/api/users/MyAccount/contacts?v=2" countHint="71"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.inbox" href="http://gdata.youtube.com/feeds/api/users/MyAccount/inbox?v=2"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.playlists" href="http://gdata.youtube.com/feeds/api/users/MyAccount/playlists?v=2"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.subscriptions" href="http://gdata.youtube.com/feeds/api/users/MyAccount/subscriptions?v=2" countHint="54"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.uploads" href="http://gdata.youtube.com/feeds/api/users/MyAccount/uploads?v=2" countHint="41"/>
<gd:feedLink rel="http://gdata.youtube.com/schemas/2007#user.newsubscriptionvideos" href="http://gdata.youtube.com/feeds/api/users/MyAccount/newsubscriptionvideos?v=2"/>
<yt:location>US</yt:location>
<yt:maxUploadDuration seconds="43200"/>
<yt:statistics lastWebAccess="2012-07-08T15:58:07.000Z" subscriberCount="126" videoWatchCount="0" viewCount="3385" totalUploadViews="50179"/>
<media:thumbnail url="http://i2.ytimg.com/i/A1RDBCYeYWY9dydB9MmPlg/1.jpg?v=934f35"/>
<yt:userId>A1RDBCYeYWY9dydB9MmPlg</yt:userId>
<yt:username display="MyAccount">MyAccount</yt:username>
</entry> 
```

这是它搜索/可以访问的内容：

```
tag:youtube.com,2008:user:A1RDBCYeYWY9dydB9MmPlg2007-01-23T15:39:30.000Z2012-11-17T08:03:36.000Z
MyAccounthttp://gdata.youtube.com/feeds/api/users/MyAccountA1RDBCYeYWY9dydB9MmPlgUCA1RDBCYeYWY9dydB9MmPlgUSA1RDBCYeYWY9dydB9MmPlgMyAccount 
```

非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:19:59.657

试试这个，

```
 $data = file_get_contents($link);
    $searchterm = ''; //as necessary

    $data = strtr($data,Array("<"=>"&lt;","&"=>"&amp;"));
    $searchterm = strtr($searchterm,Array("<"=>"&lt;","&"=>"&amp;"));

    $search = strpos($data, $searchterm); 
```

中间的几行使 PHP 可以处理 HTML

# java - 使用 ant 编译 JavaDoc 时更改访问选项

> ID：13434324
> 
> 赞同：3
> 
> 时间：2012-11-17T20:05:05.403
> 
> 标签：java, ant, javadoc

我希望 JavaDoc 呈现非公共类的所有成员。所以之前的 SO 问题告诉我我需要更改访问选项：

[http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#public](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#public)

但是我不知道在使用 ant build.xml 时如何做到这一点

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:12:48.330

关键在[文档](http://ant.apache.org/manual/Tasks/javadoc.html)中-我怀疑您想要

```
access="private" 
```

作为`javadoc`元素内的属性。

# objective-c - 如何将多个对象添加到数组 - Objective C / iOS

> ID：13434333
> 
> 赞同：1
> 
> 时间：2012-11-17T20:05:47.333
> 
> 标签：objective-c, ios, json

我是 Objective C 编程的新手

这是我的困境：我正在从网络中提取一个 JSON 文件，并且能够将其中一个元素 (currDate) 显示到我的 tableView 中，但现在我想显示更多。从下面的代码中，我可以让它同时显示 currDate 和 prevDate

**这里需要改变逻辑：**

```
for (NSDictionary *diction in arrayOfEntry) {
    NSString *currDate = [diction objectForKey:@"Current Date"];
    a = currDate;
    NSString *prevDate = [diction objectForKey:@"Previous Date"];
    b = prevDate;     

    [array addObject:a]; 

    }
    [[self myTableView]reloadData]; 
```

**我不确定是否需要在此处更改任何内容，但我将其附加以显示我如何将数组显示到我的 viewTable：**

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [array count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(!cell)
{
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = [array objectAtIndex:indexPath.row];
//cell.textLabel.text = [array objectsAtIndexes:indexPath.row];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:57:45.837

使`arrayOfEntry`全球。在 .h 文件中

```
NSArray *arrayOfEntry; 
```

在`numberOfRowsInSection`

```
[arrayOfEntry count] 
```

在`tableView: cellForRowAtIndexPath`

```
NSString *currDate = [[arrayOfEntry objectAtIndex:indexPath.row] objectForKey:@"Current Date"]
NSString *prevDate = [[arrayOfEntry objectAtIndex:indexPath.row] objectForKey:@"Previous Date"]
cell.textLabel.text = [NSString stringWithFormat:@"%@   %@", currDate, prevDate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:00:48.153

只需添加另一行：

```
[array addObject:a];
[array addObject:b]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T20:13:49.933

要将多个元素添加到目标 c 中的数组，您需要使用：

```
 NSMutableArray *newArr = [NSMutableArray new]; 
```

然后：

```
[newArr addObject:dict1]; 
```

如果需要，您可以在添加对象完成后将`NSArray`您使用的设置为 。`NSMutuableArray`

# sqlite - 使用 Homebrew 安装 SOUNDEX for SQLite

> ID：13434336
> 
> 赞同：4
> 
> 时间：2012-11-17T20:05:52.653
> 
> 标签：sqlite, homebrew

我正在尝试将 SOUNDEX 函数与 SQLite 一起使用。我可以用自制软件安装它，还是需要从源代码编译？

我试过了

`brew install --fresh sqlite --with-functions`

这似乎安装了扩展功能，但我仍然收到`Error: no such function: SOUNDEX`关于我的查询的消息。

我也尝试修改`sqlite`公式，添加以下编译选项

`ENV.append 'CPPFLAGS', "-DSQLITE_SOUNDEX"`

基于[http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html)，但这仍然失败。

理想情况下，我希望避免从源代码手动编译 SQLite，即使这意味着我需要编写自定义自制公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:46:44.750

那是正确的标志，但您可能没有运行正确的 sqlite。

你的方法是正确的。添加它`ENV.append 'CPPFLAGS', "-DSQLITE_SOUNDEX"`会用 soundex 编译它。我刚刚在我的 OS X 10.8.3 系统上使用 SQLite 3.7.16.2 和自制软件对其进行了测试。或者，为了更多的控制，像这样。

```
 option 'with-soundex', 'Enable the SOUNDEX function'

  def install
    [ ... ]
    ENV.append 'CPPFLAGS', "-DSQLITE_SOUNDEX" if build.include? "with-soundex" 
```

您确定`sqlite3`安装后调用的是正确的程序吗？SQLite 是一个“仅桶”的公式；也就是说，与大多数自制程序公式不同，它不会链接到 /usr/local/bin，以避免`sqlite`与 OS X 提供的冲突。您需要使用完整路径调用自制程序，例如`/usr/local/Cellar/sqlite/3.7.16.2/bin/sqlite3`.

```
$ /usr/local/Cellar/sqlite/3.7.16.2/bin/sqlite3
SQLite version 3.7.16.2 2013-04-12 11:52:43
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> select soundex('Hello, world!');
H464 
```

向主自制公式添加 --with-soundex 选项很容易`sqlite`，因此您不必维护单独的公式。如果您认为有足够多的人会使用它，请前往[GitHub 上的 Homebrew 问题跟踪器](https://github.com/mxcl/homebrew/issues "自制问题跟踪器")并提出请求。

# php - 在PHP中显示具有相同ID的行的值

> ID：13434337
> 
> 赞同：4
> 
> 时间：2012-11-17T20:05:54.197
> 
> 标签：php, mysql, string

我正在尝试制作一个自动打印订单的系统，但我现在面临一个问题。我正在尝试以打印机可以理解的格式制作字符串，现在，我需要在发送之前从数据库中收集数据。现在我的问题是，在某些情况下 order_id 是相同的。这是一个例子：

```
+----------+----------------------+
| order_id |     product_name     |
+----------+----------------------+
|     1    |   Pizza with cheese  |
+----------+----------------------+
|     1    |    Coca-Cola Zero    |
+----------+----------------------+
|     2    |       Spaghetti      |
+----------+----------------------+
|     3    |        Lasagna       |
+----------+----------------------+ 
```

所以我想要将所有“product_name”收集在一个字符串中，它们具有相同的“order_id”，所以它显示为：“Pizza with cheese, Coca-Cola Zero”

有没有办法做到这一点？

提前致谢。

**编辑：**我不知道我上面是否清楚地提到它，但我想制作一个显示它的 PHP 脚本。对不起，如果我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:14:47.173

您可以为此选择

```
select order_id, count(*), group_concat(product_name)
from orders
group by order_id
having count(*) > 1; 
```

这为您提供了`order_id`具有多个条目的所有 s，其中条目数和订单连接在一起。如果您不需要该数字，请忽略`count(*)`列列表中的。

如果您希望*所有*订单都省略`having`

```
select order_id, count(*), group_concat(product_name)
from orders
group by order_id 
```

并使用 PHP

```
$conn = new mysqli($host, $user, $pass, $db);
// use the appropriate select
$result = $conn->query('select order_id, group_concat(product_name) '
                       . 'from orders group by order_id');
while ($row = $result->fetch_array()) {
    // process the result row
} 
```

这当然只是一个简短的大纲。您必须添加错误处理并填写您想要对结果执行的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T20:25:44.370

你可以使用

```
SELECT order_id, GROUP_CONCAT(product_name SEPARATOR ', ') AS product_names FROM orders GROUP BY order_id; 
```

PHP 中的示例：

```
<?php
    $db_server = 'localhost';
    $db_user = 'user';
    $db_pass = 'pass';
    $db_name = 'database';

    $con = mysql_connect($db_server, $db_user, $db_pass)
        or die('Could not connect to the server!');

    mysql_select_db($db_name)
        or die('Could not select a database.');

    $sql = "SELECT order_id, GROUP_CONCAT(product_name SEPARATOR ', ')";
    $sql .= " AS product_names FROM orders GROUP BY order_id";

    $result = mysql_query($sql)
        or die('A error occured: ' . mysql_error());
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <title>test</title>
</head>

<body>
<h1>orders</h1>
<table>
   <tr><th>orders_id</th><th>product_names</th></tr>
<?php
while ($row = mysql_fetch_assoc($result)) {
    printf("<tr><td>%d</td><td>%s</td></tr>\n", $row['order_id'],
                                                $row['product_names']);
}
?>
</table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T20:15:59.807

您应该将数据拆分到两个单独的表中，因为存在*1:N*关联，其中一个订单可以包含多个产品。

```
CREATE TABLE `order` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
   .... any further information about the order,
   PRIMARY_KEY(`id`)
);

CREATE TABLE `order_product` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT NULL,
  `product_name` int(11) DEFAULT NULL,
   PRIMARY KEY (`id`),
   CONSTRAINT `order_product_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `order` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这样你就不会为一个订单获得多个 orderId

*获得一份订单*

```
select * from order where id=1 
```

*获取订单的所有产品*

```
select op.* from order o inner join order_product op on op.orderId=o.id 
```

# cakephp - CakePHP 2.0 访问模型字段值以进行视图/控制器比较 - 仅允许用户编辑/删除自己发布的项目

> ID：13434338
> 
> 赞同：0
> 
> 时间：2012-11-17T20:05:54.690
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-model

我对 CakePHP 相当陌生，我试图只允许那些创建事件的用户能够编辑或删除事件，所以我将当前用户 id 与当前事件的事件的 'user_id' 字段进行比较（在用户创建事件时保存）。任何帮助将不胜感激，我的代码（Andrew Perk）如下：

```
public function isAuthorized($user) {
        $this->loadModel('User');
        if ($user['role'] == 'admin') {
            return true;
        }
        if (in_array($this->action, array('edit', 'delete'))) {
            if ($user['id'] != $this->request->data['Event']['user_id']) { ///THIS IS THE LINE I FEEL IS WRONG - PLEASE ADVISE
                //echo debug($event['user_id']);
                //$this->Session->setFlash(__('You are not allowed to edit someones event'));
                return false;
            }
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:47:57.910

有几种方法可以做到这一点。我发现通常效果最好的方法是在模型中放置一个回调，该回调将为您尝试修改的记录设置 user_id。然后它不必在你试图 CRUD 记录的任何地方都在控制器中混在一起。

您可以在此处阅读有关限制用户数据的更多信息：http: [//blogchuck.com/2010/06/limit-data-by-user-with-cakephp/](http://blogchuck.com/2010/06/limit-data-by-user-with-cakephp/)

这也适用于删除数据。

希望能帮助到你。快乐编码！

# android - 如何以编程方式删除 ImageButton 的填充？

> ID：13434342
> 
> 赞同：6
> 
> 时间：2012-11-17T20:06:17.297
> 
> 标签：android, widget

```
image = BitmapFactory.decodeResource(res, R.drawable.image);
button = new ImageButton(this);
button.setImageBitmap(image); 
```

我想删除图像和按钮边框之间的填充。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-17T20:17:50.777

您可以使用[`setPadding()`](http://developer.android.com/reference/android/view/View.html#setPadding%28int,%20int,%20int,%20int%29)来尝试删除图像和边框之间的空间。

```
button.setPadding(0, 0, 0, 0); 
```

否则，我建议使用`ImageView`带有`OnClickListener`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T20:28:06.047

试试这个，

```
 imageview = (ImageView) findViewById(R.id.imageview);
        imageview.setBackgroundResource(R.drawable.image)
        imageview.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        }); 
```

# xml - Xquery 使用 FLWOR 表达式查询

> ID：13434344
> 
> 赞同：1
> 
> 时间：2012-11-17T20:07:07.610
> 
> 标签：xml, debugging, xquery, flwor

我有以下 xml 结构：

```
<reviews>
<review>
    <review_no>R1</review_no>
    <movie_title>After.Life</movie_title>
    <rating>3</rating>
    <reviewer>John Frankenheimer</reviewer>
    <review_date>2012-11-07</review_date>
    <review_desc>Average</review_desc>
</review>
    ...
</reviews> 
```

和以下 XQuery ：

```
<query2>
{
for $r in distinct-values(doc("reviews.xml")/reviews/review/reviewer)

return
    <output><reviewer> {data(parent::node()/movie_title)} </reviewer>
    </output>
}
</query2> 
```

我得到的输出是一系列

```
<output><reviewer/></output> 
```

在`<query2>`标签内部，而审阅者标签应包含 movie_title 数据。

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:40:22.603

`distinct-values`只返回值，不返回节点，所以`parent::node()`不起作用。

你的预期输出是什么？你没有具体说明你的真正问题。我猜您想查找按评论者分组的所有电影标题。如果是这样，`group by`将对您非常有帮助：

```
<query2>
  <output>
    {
      for $review in doc("reviews.xml")/reviews/review
      let $reviewer := $review/reviewer
      group by $reviewer
      return <reviewer>{$review/movie_title}</reviewer>
    }
  </output>
</query2> 
```

如果你不想要`<movie_title/>`-tags，你可以`data()`环绕`$review/movie_title`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:43:53.170

如果您的 XQuery 处理器不支持`group by`，您将需要执行（隐式）连接。与您的查询非常相似，但获取所有审阅者，并为每个审阅者使用谓词查询审阅者。

```
<query2>
  <output>
    {
      for $reviewer in distinct-values(doc("reviews.xml")/reviews/review/reviewer)
      return <reviewer>
               {
                 /reviews/review[reviewer = $reviewer]/movie_title
               }
             </reviewer>
    }
  </output>
</query2> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T08:29:24.177

您的查询中的问题是 FLWOR 表达式没有设置上下文项：因此您需要 $r/parent-node() 而不是 parent::node()。

如果您习惯于 XSLT，这是一个非常容易犯的错误，而且我一直都在犯。

# python - 单击链接后 DJANGO Hot 更改数据库对象 - 无需重定向

> ID：13434347
> 
> 赞同：0
> 
> 时间：2012-11-17T20:07:19.983
> 
> 标签：python, django, web-applications

我有课：

```
class Image(models.Model):
    title = models.CharField(max_length=100)
    imgFile1 = models.FileField(upload_to='%Y/%m/%d')
    vote1 = models.IntegerField(default=0)
    trofeum1 = models.IntegerField(default=0)
    imgFile2 = models.FileField(upload_to='%Y/%m/%d')
    vote2 = models.IntegerField(default=0)
    trofeum2 = models.IntegerField(default=0)
    home = models.IntegerField(default=0) 
```

和views.py中的功能：

```
def vote1(request,i_id=0):
    imgId = str(i_id)
    try:
        if (request.session[imgId] == True):
            return HttpResponseRedirect(reverse('app.views.err'))              
    except Exception:
        request.session[imgId] = True
    try:
        image = Image.objects.get(pk=i_id)
    except Exception:
        image = None
    image.vote1+=1
    image.save()
    if image.vote1 == 5:
        image.trofeum1 += 1
        image.trofeum2 = 0
        image.vote1 = 0
        image.vote2 = 0
        image.imgFile2 = None
        image.save()
    return HttpResponseRedirect('app.views.index')) 
```

因此，它会在单击我网站上的某个链接后更新我的数据库中的某些对象，但在那之后我不想重定向，只想更改我的数据库中的对象 - CLICK->UPDATE->NOTHING ELSE。您是否知道任何避免错误的解决方案：视图 app.views.vote1 没有返回 HttpResponse 对象或任何其他方式来做到这一点？

我重定向到同一个页面，但之后我在页面顶部 - 我想在我点击链接的同一个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:09:11.137

尝试用 Ajax 做同样的事情。它会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:37:48.037

您可以返回带有字符串的 HttpResponse 并在 ajax 函数中将其视为成功。所以，分解它：

在您的页面上，将 ajax 提交到 vote1 视图。

获取视图以返回 HttpResponse 对象而不是重定向。

在 AJAX 调用的成功处理程序中使用它。

您需要查看[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)您可以像这样使用 HttpResponse：

```
from django.http import HttpResponse
response = HttpResponse("Counter Updated", content_type="text/plain")
return response 
```

# eclipse - Eclipse CDT 中的 cygwin gcc 4.7+ 从 3.4 更新

> ID：13434351
> 
> 赞同：1
> 
> 时间：2012-11-17T20:08:20.963
> 
> 标签：eclipse, gcc, g++, cygwin, eclipse-cdt

我已按照 Cygwin wiki 上的步骤更新我的 gcc 版本。现在我在 Cygwin 中有两个 gcc 安装：/bin 中的 3.4 和 /usr/local/bin 中的 4.7。现在，在 Eclipse 中，使用它的唯一方法似乎是将调用命令从 g++ 更改为 C:/cygwin/usr/local/bin/g++，并且必须对所有项目执行此操作。有没有办法让 Eclipse CDT 默认使用它？我已经更改了 Path 环境变量，在命令行中键入 g++ --version 会得到 4.7，但是在 Eclipse 中使用 --version 构建项目仍然会得到 3.4

# javascript - 查询。text() 似乎在 IE8 中不起作用

> ID：13434352
> 
> 赞同：1
> 
> 时间：2012-11-17T20:08:21.370
> 
> 标签：javascript, jquery, xml

我有以下 XML 作为字符串：

```
<battery_content>
    <last_update>2012-15-09-22-40</last_update>
    <total_downloads>234</total_downloads>
    ......
</battery_content> 
```

我从 Ajax 请求中获取 XML 并将其存储在`sXMLData`. 我做的很快`window.alert(sXMLData)`，一切都很好。

当我在 IE8 中运行下一个代码时，它似乎不起作用。Chrome 和 Firefox 工作。

```
window.alert("last_update" + $(sXMLData).find("last_update").text()); 
```

我似乎无法弄清楚为什么。这种方法不适用于IE8吗？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:21:47.043

将“XML 作为哑字符串”处理的正确方法是首先通过它[`$.parseXML`](http://api.jquery.com/jQuery.parseXML/)：

```
 window.alert(
     "last_update" + $($.parseXML(sXMLData)).find("last_update").text()); 
```

但是，您不需要手动执行此操作，如果

*   *服务器返回一个*XML `Content-Type`，
*   *或*您获取 XML 的 AJAX 请求使用[`dataType`](http://api.jquery.com/jQuery.ajax/)AJAX 选项指定应将响应视为 XML

如果服务器在您的控制之下，请修复它以返回正确的内容类型。如果没有，请使用替代解决方案。我建议仅当您从有充分理由不想接触的第三方代码中获取字符串时才手动解析 XML。

# google-apps-script - 在 Chromebook 上的 Chrome 中使用 [google-apps-script] 脚本文件中的 Object.create

> ID：13434360
> 
> 赞同：2
> 
> 时间：2012-11-17T20:09:21.610
> 
> 标签：google-apps-script, object-create

我一直在尝试在气体脚本文件中使用 Object.create。Object.create 已定义，但似乎没有返回有用的对象。

```
function createOject() {
  var o = Object.create({}, { p: { value: 42 } })
  Logger.log(o.p); //logs 42.0 as expected
  var db = ScriptDb.getMyDb();
  db.save(o);  //o still shows up as empty {} in the debugger and 
               //won't save to data store
  showTable(); //logs nothing
} 
```

此代码工作正常：

```
 function createOject() {
    var o = {p: 42};
    Logger.log(o.p); //logs 42.0 as expected
    var db = ScriptDb.getMyDb();
    db.save(o);  //o shows up as an object {p: 42} in the debugger and 
                 //saves to the the data store as expected
    showTable(); //logs {p: 42} as expected
} 
```

因此，尽管 Object.create 已定义，但它似乎并没有按预期工作。这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:27:27.383

ScriptDb 不保存不可枚举的属性。Object.create() 使用[Object.defineProperties() 语法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)，默认为不可枚举。如果您将代码更改为此：

```
var o = Object.create({}, { p: { value: 42, enumerable: true } }) 
```

那么它应该可以按您的预期工作。

Object.getOwnPropertyNames() 返回可枚举和不可枚举的属性。

顺便说一句，这不仅适用于 ScriptDb... 在将对象传递给 Apps Script API 函数时，根据设计，永远不会保留不可枚举的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T23:07:09.120

2021 年的更新*。Object.create(your_obj) 仍然无法按照您在 Google Apps 脚本中所期望的方式执行，因为它不保存不可枚举的属性（原文如此。Corey G.）。

随着 Google Apps Script 转向 V8 引擎，您现在可以利用一些现代 Javascript 方法。

您可以考虑使用[传播语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_object_literals)（示例 1）基于一个或多个对象生成新对象，或尝试[Object.assign()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)（示例 2）添加到当前对象。两种方法都会生成对象的浅层克隆。

```
function test(){
  const a = {name:"Yagi", species:"goat"}
  const b = {hobby:"coding", friendly:true}

  //Example 1
  const c = {...a,...b}

  console.log("c: ",c)

  //Example 2
  Object.assign(a, b); //Assigns 'b' (or multilpes objects) to 'a'

  console.log("a: ", a)
} 
```

顺便说一句，[scriptDB 在 2014 年贬值了](https://gsuite-developers.googleblog.com/2014/05/deprecating-scriptdb-and-domain-service.html)。

**注意：这是与搜索“Object.create() Google Apps Script”最接近的问题。此更新的答案响应搜索此问题的用户。*

# json - 用主干构造 json 数据的最佳方法

> ID：13434362
> 
> 赞同：-1
> 
> 时间：2012-11-17T20:09:49.850
> 
> 标签：json, backbone.js, data-structures

我正要使用主干编写一个 Web 应用程序，想知道构造我的 json 文件的最佳方法是什么？我读过最好使用“字典”数组，但想知道是否有更好的数据结构方式。数据应该如何结构化的一个例子也很好。

我的数据似乎有很多嵌套数组，这些似乎很难搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:13:20.233

JSON 有两种类型的相关容器对象。

对象和数组。

当您说“字典数组”时，对象可能就是您所想到的。

您可能想要一个带有对象数组的对象:)

```
{"courses": [{
                "name": "Spanish 101",
                "subject": "How to speak Spanish",
             }, {
                "name": "Introduction to Film",
                "subject": "Make pretty films",
             }, {
                "name": "Social Psychology",
                "subject": "Why people are weird.",
             }],
 "sections": [],
 "modules": [],
 "topics": [],
 "lessons": [],
 // etc..
} 
```

每个`[]`项目都将是具有许多对象的字段。

一旦您将这些数据输入到您的 APP（JSONP、AJAX，或者如果它只是分配给我们页面中的一个变量），您就可以使用该函数将它们放入您的 Backbone 集合中`reset`（参见：[http ://backbonejs.org/#Collection -重置](http://backbonejs.org/#Collection-reset)）：

```
var Courses = new Backbone.Collection;
function processData(data) {
    Courses.reset(data.courses);
    // etc...       
} 
```

# python - Python socket + daemon在发送数据后停止

> ID：13434371
> 
> 赞同：1
> 
> 时间：2012-11-17T20:10:55.427
> 
> 标签：python, sockets, daemon

我正在编写 python 守护程序，它等待请求并返回一些数据。但是，当客户端请求脚本时，守护进程停止了它的工作。这是代码

```
......
def run(self):
    while True:
        server_socket  = socket.socket()         # Create a socket object
        host = socket.gethostname() # Get local machine name
        port = 12345                # Reserve a port for your service.
        server_socket .bind((host, port))        # Bind to the port
                server_socket .listen(5)   

        client_socket, address  = server_socket.accept()    
 # Establish connection with client.

        print 'Got connection from', address 
        logging.info(address)
        #data = client_socket.recv(2048) 
        data = client_socket.recv(1024)
        logging.info(data)
...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:30:18.927

我不确定您真正想要的服务器功能是什么，但根据您的示例，您拥有的是一台可以一次接受和处理一个客户端的服务器。我建议不要在每次连接后每次都重新绑定服务器。没有必要。

绑定一次socket，然后进入循环等待客户端：

```
def run(self):
    server_socket = socket.socket()         
    host = socket.gethostname() 
    port = 12345               
    server_socket.bind((host, port))        
    server_socket.listen(5)   

    while True:
        # this will block until a client tries to connect
        client_socket, address  = server_socket.accept()    

        print 'Got connection from', address 
        logging.info(address)
        # this will block until data is received from client
        data = client_socket.recv(1024)
        logging.info(data) 
```

这里会发生的是服务器将接受客户端，然后在等待客户端发送内容时阻塞。然后它将再次循环等待新的客户端。如果它是一次性连接并且您已完成处理，您甚至可能想要关闭该套接字。

如果您希望能够同时处理多个客户端，那么您将在主线程中执行循环，然后将每个新连接传递给工作线程以处理通信。这将释放主线程以继续循环并等待新客户端连接。

这可以通过为每个客户端启动一个全新的线程并传递套接字来实现，或者[`Queue`](http://docs.python.org/2/library/queue.html)在运行线程的固定池之间使用共享来实现。每个线程都将等待从队列中拉出一个项目，然后进入套接字项目上的通信循环。完成后，它会返回到队列中等待。

伪代码可能看起来像这样：

```
socket_queue = Queue()
...
def main_server_thread():
    while True:
        # this will block until a client tries to connect
        client_socket, address  = server_socket.accept()    

        print 'Got connection from', address 
        logging.info(address)

        # this will finish right away and loop again
        socket_queue.put(client_socket)
...
def client_worker_thread():
    while True:
        sock = socket_queue.get()
        while sock is still connected:
            data = sock.recv(1024)
            logging.info(data) 
```

# database - 从旧数据结构到新数据结构的数据迁移

> ID：13434378
> 
> 赞同：27
> 
> 时间：2012-11-17T20:11:29.250
> 
> 标签：database, data-structures, data-migration, legacy-code

好的，这就是我们面临的问题。

目前：

1.  我们有大量可以直接访问数据库的旧版应用程序
2.  数据库中的数据结构未规范化
3.  几乎所有应用程序都使用当前的流程/结构

我们正在尝试实现的内容：

1.  将所有功能移至 RESTful 服务，因此应用程序无法直接访问数据库
2.  实现规范化的数据结构

我们遇到的问题是如何不仅使用应用程序而且还使用数据库来实现这种迁移。

我们目前的解决方案是：

1.  识别所有 CRUD 功能并在新的 Web 服务中实现它
2.  创建新应用程序以替换旧版应用程序
3.  将新应用程序指向新的 Web 服务（仍然指向旧的数据结构）
4.  将数据库中的数据迁移到新结构
5.  将新应用程序指向新的 Web 服务（指向新的数据结构）

但是当我们讨论这个过程时，我们正在考虑必须两次重写新 Web 服务。一次用于旧数据结构，一次用于新数据结构，因为目前我们无法表示旧数据结构以适应新 Web 服务的新数据结构。

我想知道是否有人遇到过这样的挑战，以及您是如何克服这些类型的问题/实施等的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T03:27:01.393

**编辑**：使用双向触发器进行同步的更多解释；语法、语言和清晰度的更新。

## 前言

在我工作了 7 年的大型 Web 应用程序的数据模型升级中，我遇到了类似的问题，所以我感受到了你的痛苦。根据这次经验，我会提出一些不同的建议——但希望它更容易实现。但首先，观察：

对组织的价值在于数据——数据将比您当前的所有应用程序寿命更长。企业将不断发明新的方法来从其捕获的数据中获取价值，这将产生新的报告、应用程序和开展业务的方式。

所以让新的数据结构正确应该是你最重要的目标。不要将结构正确与其他短期发展目标进行交易，尤其是：

*   运营目标，例如推出新服务
*   报告性能（使用物化视图、触发器或批处理作业）

这种结构会随着时间而改变，因此您的架构必须允许对其进行频繁的添加和不频繁的规范化。这意味着您的数据结构和任何共享的 API（包括 RESTful 服务）必须进行正确的版本控制。

## 为什么选择 RESTful Web 服务？

您提到您将“将所有功能移动到 RESTful 服务，因此没有应用程序可以直接访问数据库”。关于遗留应用，我需要问一个非常重要的问题：为什么这很重要，它带来了什么价值？

我问是因为：

*   你丢失了 ACID 事务（每个调用都是一个事务，除非你实现了一些极其复杂的 WS-* 标准）
*   性能下降：直接数据库连接将更快（无需 Web 服务器工作和翻译）并且延迟更少（通常为 1 毫秒而不是 50-100 毫秒），这将**明显**降低为直接数据库连接编写的应用程序的响应能力
*   数据库结构不是从 RESTful 服务中抽象出来的，因为您承认，通过数据库规范化，您必须重写 Web 服务并重写调用它们的应用程序。

其他横切关注点保持不变：

*   可管理性：可以在此处使用许多通用工具监视和管理直接数据库连接
*   安全性：直接连接比开发人员编写的 Web 服务更安全，
*   授权：数据库权限模型非常先进，可以根据需要进行细粒度
*   可扩展性：Web 服务是（仅？）直接连接的数据库应用程序，因此只能与数据库一样扩展

您可以通过维护旧版 RESTful API 来迁移数据库并保持旧版应用程序运行。但是，如果我们可以保留遗留应用程序**而不**引入“遗留”RESTful 服务会怎样。

## 数据库版本控制

据推测，大多数“遗留”应用程序都使用 SQL 直接访问数据表；您可能还有许多数据库视图。

数据迁移的一种方法是新数据库（在新模式中具有新的规范化结构）将旧结构呈现为遗留应用程序的**视图**，通常来自不同的模式。

这实际上很容易实现，但只解决了报告和只读功能。遗留应用程序 DML 呢？DML可以使用解决

*   用于简单转换的可更新视图
*   引入无法更新视图的存储过程（例如“CALL insert_emp(?, ?, ?)”而不是“INSERT INTO EMP (col1, col2, col3) VALUES (?, ? ?)”。
*   有一个“旧”表，它通过触发器和数据库链接与新数据库同步。

使用触发器将旧格式表与新格式表双向同步是一种蛮力解决方案，而且相对难看。

您最终会在两个不同的模式（或数据库）中获得相同的数据，并且如果同步代码有错误，数据可能会不同步 - 然后您就会遇到“双主”问题的经典问题。因此，将此作为最后的手段，例如在以下情况下：

*   基本结构已经改变（例如改变关系的基数），或者
*   转换为旧格式是一个复杂的函数（例如，如果旧列是新格式列值的平方并设置为“4”，可更新视图无法确定正确值是 +2 还是 -2） .

*当您的数据需要进行此类更改时，某处*的代码和逻辑将发生一些重大变化。您可以在兼容层中实现（优势：不更改遗留代码）或更改遗留应用程序（优势：数据层干净）。这是工程团队的技术决定。

使用上面概述的方法创建遗留结构的兼容性数据库可以最大限度地减少对遗留应用程序的更改（在某些情况下，遗留应用程序继续运行而根本没有任何代码更改）。这大大降低了开发和测试成本（对业务没有净功能收益），并大大降低了推出风险。

它还允许您专注于对组织的真正价值：

*   新的数据库结构
*   新的 RESTful Web 服务
*   新应用程序（可能使用 RESTful Web 服务构建）

## Web 服务的积极方面

请不要将以上内容解读为对 Web 服务，尤其是 RESTful Web 服务的诽谤。当用于正确的原因时，例如启用 Web 应用程序或不同系统之间的集成，这是一个很好的架构解决方案。但是，它可能不是在数据迁移期间管理旧应用程序的最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:36:25.930

看起来您应该做的是定义一个新的数据模型（“规范化”）并构建从规范化模型到旧模型的映射。然后，您可以在闲暇时将传统的直接呼叫替换为标准化呼叫。这不会破坏任何代码。

同时，您需要定义相当于（中央化）遗留数据库 api 的内容，并将其映射到您的规范化模型。现在，在您闲暇时，将原始的遗留数据库调用替换为对遗留数据库 API 的调用。这不会破坏任何代码。

一旦原始调用被完全替换，您就可以将数据模型切换到真正的规范化模型。这应该不会破坏任何代码，因为现在一切都与传统的 db API 或规范化的 db API 背道而驰。

最后，您可以用使用规范化数据 API 的修改后的代码替换旧的 db API 调用和相关代码。这需要仔细重新编码。

为了加快这一切，您需要一个自动代码转换工具来实现代码替换。

该文档似乎有一个很好的概述： [http ://se-pubs.dbs.uni-leipzig.de/files/Cleve2006CotransformationsinDatabaseApplicationsEvolution.pdf](http://se-pubs.dbs.uni-leipzig.de/files/Cleve2006CotransformationsinDatabaseApplicationsEvolution.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:37:34.117

首先，这似乎是一个非常混乱的情况，我认为没有“干净”的解决方案。我经历过几次类似的情况——它们并不好玩。

首先，更改您的客户端应用程序的工作将非常重要 - 如果基础域发生变化（例如，通过引入与人分开的地址的概念），客户端应用程序也会发生变化 - 这不仅仅是变化以您访问数据的方式。避免这种痛苦的最好方法是编写 API 层以反映未来的业务领域模型，并将旧的数据库模式粘合到其中；如果有新概念您无法使用旧数据反映（例如“get /app/addresses/addressID”），则抛出 NotImplemented 错误。在哪里可以用旧数据反映新模型，尽可能将它们连接在一起，然后在幕后重新考虑。

其次，这意味着您需要将版本控制作为首要关注点构建到您的 API 中——因此您可以告诉客户在版本 1 中，功能 x、y 和 z 会引发“未实现”异常。每个版本都应该向后兼容，但会添加新功能。这样，只要不破坏服务，您就可以重构版本 1 中的功能，并在版本 1.1 中实现功能 x，在版本 1.2 中实现功能 y 等。理想情况下，为您的版本制定路线图，并通知客户端应用程序如果您要停止支持某个版本或发布重大更改，请拥有所有者。

第三，为您的 API 进行一组自动化集成测试是您可以做出的最佳投资——它们确认您在重构时没有破坏功能。

希望这有一些用处 - 我认为您的问题没有一个单一、直接的答案。

# c# - 如何在 MVC 4 .net 中生成连字符 url

> ID：13434384
> 
> 赞同：6
> 
> 时间：2012-11-17T20:11:55.290
> 
> 标签：c#, asp.net

我目前正在开发 Visual Studio 2012 速成版，以使用 MVC 4 开发我的网站 www.onlinegk.com。但我遇到了一个问题，并就这个问题向我的专家朋友寻求帮助。问题是我想以下列方式制作我的所有网址：

> www.onlinegk.com/current-affairs/
> www.onlinegk.com/employment-news/
> www.onlinegk.com/general-knowledge/latest-whos-who

但是我没有得到适当的帮助来实现它，这意味着控制器结构和视图名称等。请通过我的 routconfig.cs 文件，如下所述：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapRoute(
      name: "Default",
      url: "{controller}/{action}/{id}",
      defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

我将非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-27T16:40:39.537

试试这个动态网址：

```
routes.MapRoute(
    "RouteName", 
    "controler-name/{action}/{id}", 
    new { controller = "ControllerName", action = "Index", id = "" }
); 
```

# android - android, ICS 中的 android.os.networkonmainthreadexception

> ID：13434387
> 
> 赞同：1
> 
> 时间：2012-11-17T20:12:01.157
> 
> 标签：android

```
try {
    URL url = null;
    url = new URL(url_string);
    URLConnection conn = url.openConnection();
    BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String line="";
    while((line = reader.readLine())!=null){
        Log.d("html",line);
    }

} catch (Exception e) {
    Log.d("Exception Error: ",e.toString());
} 
```

* * *

我只是在阅读网站，但我遇到了 android.os.networkonmainthreadexception 错误

我的代码很简单..请看一下并告诉我我需要做什么..

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:14:06.310

您需要将网络访问移至后台线程，例如通过`AsyncTask`. 您目前正尝试在主应用程序线程上执行网络 I/O，这*不是*一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:31:22.670

使用这个类来运行后台任务..

```
 public class getConnection extends AsyncTask<String, Void, Void> 
    {

           @Override
            protected void onPreExecute() 
           {
               super.onPreExecute();
               Utils.clearDialogs();
               Utils.showActivityViewer(Mainctivity.this);
           }

           @Override
           protected Void doInBackground(String... arg0)
           {

            try 
            {

               URL url = null;
url = new URL(url_string);
URLConnection conn = url.openConnection();
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line="";
while((line = reader.readLine())!=null){
    Log.d("html",line);
            } 
            catch (Exception e) 
            {
             e.printStackTrace();
            }

            return null;
           }

           @Override
           protected void onPostExecute(Void result)
           {
               super.onPostExecute(result);
               Utils.hideActivityViewer();

            }
            catch (Exception e)
            {
             Log.v("log", e.toString());
            }
           }

          } 
```

# c - GDB：打印/转储到文件时自动展平结构

> ID：13434391
> 
> 赞同：2
> 
> 时间：2012-11-17T20:12:27.350
> 
> 标签：c, debugging, gdb

我有一个复杂的 C 结构，其中包含许多指向更复杂结构的指针。

在使用 GDB 进行调试时，我希望能够将结构展平到屏幕/文件中。

确实，我可以编写一个很长的漂亮打印机函数，但是由于所有指针都是已知类型（没有 void 指针）并且 GDB 已经知道如何通过手动调用 p *x 来做到这一点，它可以用来实现这一点吗？

通常 GDB 打印结构的第一层而不递归地进入其他层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:55:03.830

> 通常 GDB 打印结构的第一层而不递归地进入其他层。

如果 GDB 不这样做，当你尝试打印循环链表时会发生什么？

一般来说，在你的程序中编写一个漂亮的打印函数是一个好主意：有一天你会有一个非调试可执行文件，你的结构的“根”在一个寄存器中，你需要检查结构。

但是，如果您不想这样做，可以很容易地用[Python](http://sourceware.org/gdb/onlinedocs/gdb/Python.html)编写一个通用的“遵循所有指针”漂亮的打印机。请注意不要在带有周期的图表上调用这样的打印机。

# c# - 从 excel 导出图表，以便在不使用互操作的情况下从 C# 发送电子邮件

> ID：13434396
> 
> 赞同：0
> 
> 时间：2012-11-17T20:13:11.277
> 
> 标签：c#, excel, openxml

我有服务器端自动化使用 OpenXML 在 excel 中创建一些图表。我需要将报告中的图表导出为图像并通过电子邮件发送。excel 库未安装在服务器上，因此互操作 COM 不是一个选项。我怎样才能在不使用任何外部 dll 或任何东西的情况下实现这一目标？建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:06:45.377

有一些商业选项可以在没有 Interop 的情况下读取/编辑/创建 Excel 文件，它们能够呈现图表（以及其他功能）：

*   [假设细胞](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)
*   [电子表格齿轮](http://www.spreadsheetgear.com/)

顺便说一句：[MS 在服务器场景中不支持互操作](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T20:43:05.650

尝试使用[epplus](http://epplus.codeplex.com/)。您也可以在 NuGet 中找到它。

# php - XML PHP 解析

> ID：13434403
> 
> 赞同：0
> 
> 时间：2012-11-17T20:14:34.163
> 
> 标签：php, xml, parsing

我有以下 temp.XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<services_api_response version="2.0">
  <status>
    <code>0</code>
    <message>OK</message>
  </status>
  <service id="82dadd66a5048cc85ed0b8da1d835f2a">
    <countries>
      <country code="BA" vat="17.00" approved="true" name="Bosnia and Herzegovina">
        <prices>
          <price vat_included="false" currency="BAM" all_operators="true" amount="2.00">
            <message_profile shortcode="091810700" all_operators="true" keyword="TXT ABC">
              <operator code="BH Mobile" billing_type="MO" revenue="0.84" default_billing_status="OK" name="BH Mobile"/>
              <operator code="HT-ERONET" billing_type="MO" revenue="0.84" default_billing_status="OK" name="HT-ERONET"/>
              <operator code="M:tel" billing_type="MT" revenue="0.84" default_billing_status="Failed" name="M:tel"/>
            </message_profile>
          </price>
        </prices>
        <promotional_text>
          <local>Cena: 2,00 BAM + PDV
Podr&#353;ka: 000000000| bbb@ccc.com Mobilna Naplata: fortumo.com</local>
          <english>Price: 2.00 BAM + VAT
Support: 000000000| bbb@ccc.com
Mobile Payment by fortumo.com</english>
        </promotional_text>
      </country>
     </countries>
    </service>
</services_api_response> 
```

和 PHP 文件：

```
$obj = simplexml_load_file('temp.xml');

echo '---> '.$obj -> countries[0] -> promotional_text[0] -> local[0]; 
```

但我什么也得不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:18:36.290

尝试：

```
echo '---> ' . $obj->service[0]
                   ->countries[0]
                   ->country[0]
                   ->promotional_text[0]
                   ->local[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T20:19:34.697

您忘记了几个节点：

```
echo '---> '.$obj -> service[0] -> countries[0] -> country[0] -> promotional_text[0] -> local[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T20:21:05.637

```
echo (string) $obj->service[0]->countries[0]->country[0]->promotional_text[0]->local[0]; 
```

输出

> 塞纳：2,00 BAM + PDV
> 
> 波德什卡：000000000| bbb@ccc.com Mobilna Naplata: fortumo.com

[键盘演示在这里](http://codepad.org/YTUUqjgX)

请记住，在回显 SimpleXML 值时强制转换为字符串是一种很好的做法，因为您的目标是一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T20:25:21.030

您可以使用[xpath](http://www.php.net/manual/en/simplexmlelement.xpath.php)，如下所示：

```
<?php
$xml = simplexml_load_file('/tmp/temp.xml');
$local = $xml->xpath('//countries/country/promotional_text/local');

print_r($local[0]); 
```

# java - 重复数组

> ID：13434404
> 
> 赞同：4
> 
> 时间：2012-11-17T20:14:44.497
> 
> 标签：java, arrays

所以我试图通过其中的值重复一个 int[] 数组。所以基本上，如果你有一个数组， `{1,2,3,4}` 你的输出将是

```
{1,2,2,3,3,3,4,4,4,4} 
```

或者如果你得到

```
{0,1,2,3} 
```

你的输出是

```
{1,2,2,3,3,3}. 
```

我肯定知道这里必须有两个 for 循环，但我似乎无法弄清楚让它复制数组中的值的代码。我无法得到 2 到 2,2，任何帮助将不胜感激，谢谢。

在这里编辑我认为可以工作的代码

```
public static int[] repeat(int []in){
    int[] newarray = new int[100];

    for(int i = 0; i<=in.length-1;i++){

        for(int k= in[i]-1;k<=in[i];k++){

            newarray[i] = in[i];   

        }
    }
    return newarray;
} 
```

我认为这会起作用，但它只会返回相同的列表，或者有时如果我改变它，我只会在新数组中得到 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:20:56.683

尝试：

```
LinkedList<Integer> resList = new LinkedList<Integer>();
for(int i = 0 ; i < myArray.length ;  ++i) {
    int myInt = myArray[i];
    for(int j = 0 ; j < myInt ; ++j) { // insert it myInt-times
        resList.add(myInt);
    }
}
// TODO: build the result as an array : convert the List into an array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:31:28.363

这将动态构建一个正确大小的新数组，然后填充它。

```
 int[] base = { 1, 2, 3, 4 };
    int size = 0;
    for( int count : base ){
        size += count;
    }

    int[] product = new int[size];

    int index = 0;
    for( int value : base ){
        for(int i = 0; i < value; i++){
            product[index] = value;
            index++;
        }
    }

    for( int value : product ){
        System.out.println(mine);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:21:01.863

试试这个：

```
int[] anArray = { 
    0, 1, 2
};
int[] newArray = new int[100];
int cnt=0;
for(int i=0; i<anArray.length; i++)
{
    for(j=1;j>0;j--)
    {
        newArray[cnt]=anArray[i];
        cnt++;
    }
} 
```

# javascript - 不稳定的 iPhone 行为。显示/隐藏地址栏行为奇怪

> ID：13434414
> 
> 赞同：0
> 
> 时间：2012-11-17T20:16:45.083
> 
> 标签：javascript, iphone, ios, mobile-safari

昨天我遇到了移动 Safari 地址栏的问题。它拒绝缩回（向上滑动）。但是在添加了一个哈希标记后，它开始运行良好。然而今天，地址栏又奇怪地又乱了。它确实有些缩回，但不是完全缩回。10px 左右仍然悬空。scrollTo(0,1) 和 window.location.href = '#' 的所有变体都已尝试过。毕竟，似乎没有任何逻辑可以挑战 IOS Safari 地址栏。我也试过重启手机，iPhone 4 IOS 6 没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:25:39.143

我添加了一个溢出：隐藏样式属性，由于在应用溢出：隐藏属性之前修剪了透明的多余高度，导致页面高度比平时短了一点。解决方案：我现在手动将正文高度添加 60px，以便为地址栏向上滑动腾出空间。缺点是如果向下滚动，它会在屏幕底部留下 60 像素的空白区域。

# jsp - 无法使用 web.xml 从 jsp 页面调用 servlet

> ID：13434419
> 
> 赞同：0
> 
> 时间：2012-11-17T20:17:28.330
> 
> 标签：jsp, servlets

这是示例 web.xml 代码：

```
<servlet>
    <servlet-name>register</servlet-name>
    <servlet-class>RegisterServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>register</servlet-name>
    <url-pattern>/Registration</url-pattern>
</servlet-mapping> 
```

在我的浏览器上打开页面注册时（我使用的是 tomcat 7.0），它显示错误：

> 请求的资源 (/yaman/proj/Registration) 不可用。（404 错误）

即使我从类文件夹中删除了所有文件，它也和预期的一样。无法确定问题究竟出在哪里。
请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:22:24.623

我遇到了一个非常奇怪的错误，我不知道为什么会这样。
我的项目的所有文件都列在 webapps/yaman/proj/ 下。当我使用 tomcat 使用 register.jsp 页面注册自己时（使用 web.xml 映射到 servlet），它给了我 404错误，说资源不可用。
但是当我从“proj”剪切并粘贴所有文件，将其复制到“yaman”并删除“proj”时，它以某种方式工作并且servlet也工作正常。我不知道为什么会出现这样的错误。
如果你们中的任何人知道为什么会发生这种情况或遇到同样的问题，请随时添加评论。

# c - 将文件读入 C 程序

> ID：13434420
> 
> 赞同：2
> 
> 时间：2012-11-17T20:17:30.810
> 
> 标签：c, struct

我已经读取文件的程序，并相应地显示它，但是当再次尝试查看内容时，它们就消失了。

结构：

```
typedef struct friends_contact {
    char *First_Name;
    char *Last_Name;
    char *home;
    char *cell;
} fr; 
```

主要的：

```
int main() {
    fr friends[5];
    char buffer[BUFFSIZE];
    int counter = 0;
    int i = 0;

    menu(friends, &counter, i, buffer);

    getch();
    return 0;
} 
```

用于打开文件的菜单函数中的 if 语句：

```
if (user_entry1 == 1) {
  printf("Please enter a file name");
  scanf("%s", user_entry3); 

  read = fopen(user_entry3, "r");
} 
```

If 语句允许用户选择查看通讯录的联系人。

```
if (user_entry == 4 ) {
  print_contact(friends, counter, i, user_entry3);
  if (user_entry1 == 1) {
    file2(friends, counter, i, buffer, read);
  }
} 
```

读取功能：

```
char file2(fr *friends, int *counter, int i, char buffer[], FILE *read) {
  while (fscanf(read, "%s", buffer) != EOF) {
    friends[i].First_Name = malloc(BUFFSIZE * strlen(buffer));
    strcpy(friends[i].First_Name, buffer);
    return printf("\n""%s ", friends[i].First_Name);       
  }  
  fclose(read);
} 
```

如果您需要我提供更多代码。我试图让它从文件中读取内容到联系人列表中，以便我可以查看、搜索或删除它们。

PS我知道其他一些代码可能并不完美，但现在我只是担心弄清楚这一点:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:30:14.703

该`file2`函数将文件的每一行读入`friends[i]`但从不递增`i`。所以每条新记录都会覆盖前一条……除了函数在循环的第一次迭代期间返回。`if`比`while`在这种情况下使用更好。

其他建议：

而不是使用`}else;`你可以只用关闭`if`块`}`。后面`if`不需要跟。`else`

而不是成语

```
if (foo == 1) {
  // do stuff
} else if (foo == 2) {
  // do other stuff
} else {
  // do default stuff
} 
```

您可以使用

```
switch (foo)  {
case 1:
  // do stuff
  break;
case 2:
  // do other stuff
  break;
default:
  // do default stuff
} 
```

代替

```
printf("\n""%s ",friends[i].First_Name); 
```

更常见的是使用单个字符串，末尾带有换行符：

```
printf("%s\n", friends[i].First_Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:26:23.027

您必须再次将文件指针重置`fseek`到文件的开头。您的读取功能应该像这样开始：

```
fseek(read, 0, SEEK_SET); // set file pointer to the beginning of the file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:40:47.193

您不应该忘记测试文件是否可以打开：

```
if ( user_entry1==1 ){

    printf( "Please enter a file name" );
    scanf( "%s", user_entry3 ); 

    if ( ( read = fopen( user_entry3, "r" ) ) != NULL ){
        printf( "The file couldn't be opened" );
    }
    else{
       .
       .
       .
    }
} 
```

# python - Python "\n" 标记额外行

> ID：13434423
> 
> 赞同：3
> 
> 时间：2012-11-17T20:18:06.977
> 
> 标签：python, newline

我正在尝试在命令行中构建一个简单的板。

**问题：** 当我使用“\n”结束当前行时，它会添加一个额外的空白行。我该如何解决？

**代码：**

```
def drawBoard():
    board = [ [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,3,2,1,0,0],
              [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0],
              [0,0,0,0,0,0,0,0,0]
            ]
    return board

def printBoard():
    for i in drawBoard():
        for a in i:
            print a,
        print "\n"

printBoard() 
```

**输出：**

```
0 0 0 0 0 0 0 0 0 

0 0 0 0 0 0 0 0 0 

0 0 0 0 0 0 0 0 0 

0 0 0 0 3 2 1 0 0 

0 0 0 0 0 0 0 0 0 

0 0 0 0 0 0 0 0 0 

0 0 0 0 0 0 0 0 0 

0 0 0 0 0 0 0 0 0 

0 0 0 0 0 0 0 0 0 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T20:20:54.140

使用`join()`, 不依赖`,` for 格式，而且`print`每次都会自动将光标放在换行符上，所以不需要`'\n'`在你的`print`.

```
In [24]: for x in board:
    print " ".join(map(str,x))
   ....:     
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0
0 0 0 0 3 2 1 0 0
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-17T20:21:00.977

这：

```
 print "\n" 
```

正在打印出两个`\n`字符——一个是你告诉它的，另一个是 Python 在任何不以`,`你在`print a,`. 只需使用

```
 print 
```

反而。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T21:56:26.547

python中的打印函数添加自己\n

你可以使用

```
import sys
sys.stdout.write(a) 
```

反而

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T20:21:33.757

在打印“\n”行之后添加 ,

使其显示为 print "\n"，

# php - urlencode 问题

> ID：13434424
> 
> 赞同：0
> 
> 时间：2012-11-17T20:18:18.660
> 
> 标签：php, mysql

我编写了这个简单的脚本来记录广告/链接点击，并且遇到了长网址或带有特殊字符的网址的问题 ex：？= 等会破坏重定向并仅加载域部分。

所以我试图让 urlencode 工作。到目前为止，我已经尝试了两种方法，但都没有奏效。我知道 mysql_query 已经过时了还在学习

当前代码：

```
<?php
require('config.php');

    // Update Ad Pull/Display count
    $AdID= mysql_real_escape_string($_GET['AdID']);
    $UpdateADHitDisplay = mysql_query("UPDATE ads SET clicks = clicks +1 WHERE ID = '$AdID'");

    // Get Redirection Inforamtion
    $RedirectURL = $_GET['RedirectURL'];
    //$FixedURL = urlencode($RedirectURL); // this way didn't work
        function url_encode($RedirectURL){ // then tried to use it as a function and no go either.
         return urlencode(utf8_encode($RedirectURL));
     }
    header("Location: $RedirectURL");

?> 
```

数据库布局：

```
•Table : ads 
•Row : clicks 
```

传递链接的示例：`http://yourdomain.com/clickcounter.php?AdID=43&RedirectURL=http://stackoverflow.com`

故障链接示例：`https://www.demoexample.com/index.aspx?d=111&prog_id=tttt`

# jquery - jQuery变量作为选择器不起作用

> ID：13434428
> 
> 赞同：1
> 
> 时间：2012-11-17T20:18:56.133
> 
> 标签：jquery

如果单击，我试图获取一个选项值，并将其分配给变量。然后这个变量被调用作为选择器的一部分来隐藏一个元素。我正在使用此代码，但如果我使用变量它不起作用：

```
 $("#State ul li").live('click', function (event) {
    var currentstate = $(this).children('a').html();

    if ( $(this).hasClass("selected") ) {
        $("#state_"+currentstate).show();
    };

 }); 
```

我有一个`div#state_arizona`with `display: none`，我希望这个 div 在选择特定状态时显示。

如果我尝试以下 div 显示没有问题：

```
if ( $(this).hasClass("selected") ) {
$("#state_arizona).show();
}; 
```

这是 ul html：

```
<ul>
 <li>
     <a href="#" class="ajax-filter-label">
        <span class="checkbox"></span> Alaska </a>
 </li>
</ul> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:38:46.743

试试这个：

```
$("#State ul li").live('click', function (event) {
    var currentstate = $(this).children('a').text();

    if ($(this).hasClass("selected")) {
        $("#state_" + $.trim(currentstate).toLowerCase()).show();
    };
}); 
```

请注意，id 选择器区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:41:58.663

一些东西。

如果您有能力重组 HTML，请执行以下操作：

```
<ul>
  <li>
    <a href="#" class="ajax-filter-label" data-state="alaska">
    <span class="checkbox"></span> Alaska </a>
 </li>
</ul> 
```

然后在你的 JS 中，你可以使用 .data 来获取 state 的值，而不用想它会是什么样子：

```
$("#state_"+ currentstate.data('state')).show(); 
```

# mysql - 从 MySQL 5.5 命令行客户端访问 phpmyadmin 上的数据库？

> ID：13434430
> 
> 赞同：1
> 
> 时间：2012-11-17T20:19:01.153
> 
> 标签：mysql, database, command-line, phpmyadmin

有没有办法从 MySQL 命令行访问和管理我的 phpMyAdmin 上的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:31:12.810

假设 *nix 站上有一个类似 BASH 的外壳：

```
mysql -h<hostname> -u<username> -p<password> 
```

本地主机可以跳过 -h。如果您正在处理远程主机，则必须将其配置为侦听外部接口，并且您必须能够访问远程主机上该接口上的端口 3306。用户名要么是 root，要么是特定于数据库/模式的东西，就像密码一样。

```
12:02:26 justin@justin-4320s:~
$ mysql -htiny -uroot -p################
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2710
Server version: 5.5.28-0ubuntu0.12.10.1-log (Ubuntu)

Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| Assessor           |
| mysql              |
| performance_schema |
| test               |
| ... contd.         |
+--------------------+
12 rows in set (0.10 sec)

mysql> 
```

# windows-runtime - MediaElement WinRT HUD 信息

> ID：13434431
> 
> 赞同：0
> 
> 时间：2012-11-17T20:19:11.047
> 
> 标签：windows-runtime

winRT MediaElement 与 windows8 音量控制播放和暂停按钮很好地集成在一起。

我还想显示艺术家信息，我知道如何在 MediaElement 上设置它？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:08:20.547

您可以使用 MediaControl 类设置艺术家姓名、曲目名称和专辑插图：

[http://msdn.microsoft.com/en-gb/library/windows/apps/windows.media.mediacontrol](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.media.mediacontrol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:44:28.597

MediaElement 用于播放音频或视频。如果您想显示其他任何内容 - 您需要使用覆盖在 MediaElement 之上的其他一些控件。

# c++ - 如何使用 XAML for GUI 创建 C++(/CX ?) _DESKTOP_ Windows 8 应用程序？

> ID：13434433
> 
> 赞同：2
> 
> 时间：2012-11-17T20:19:37.927
> 
> 标签：c++, xaml, windows-8, c++-cx

如何使用 XAML（及其可视化编辑器）为 GUI创建 C++（可能需要 /CX 扩展）**桌面Windows 8 应用程序？**明确地说，不创建 Windows 商店应用程序，我的意思是，类似于使用普通 C++ 和 Qt（使用 Designer）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:11:07.520

Windows 桌面和 Windows 应用商店本质上是不兼容的目标环境。C++ 没有桌面 XAML（即 WPF）项目类型。

您的选择是：

1.  使用 WinForms 与设计器一起创建 C++/CLI 桌面应用程序
2.  使用 MFC 与设计器一起创建本机 C++ 桌面应用程序
3.  使用本机 Win32 调用创建本机 C++ 桌面应用程序*，无需*设计器

# javascript - 子字符串javascript根本不起作用

> ID：13434435
> 
> 赞同：2
> 
> 时间：2012-11-17T20:19:51.617
> 
> 标签：javascript

有什么理由为什么这不起作用？

```
 var caseString = "sliderInput";
     var theString = caseString.substring(1, 2); 
```

我把它放在 Firefox 中的 Firebug 调试器中，它给了我错误：“无效的赋值左侧。”

* ***这是我的确切代码

```
 var elements = new Array();
        elements = document.getElementsByTagName("Input");

var allSliderInputs = new Array();
var sliderParams = new Array();
var first, last, inc, style;

for (var i=0; i < elements.length ; i++){
    var c = elements[i].className; //works fine here
    var t = c.substring(0, 2); //when it hits this line it says "invalid assignment left-hand side"

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:24:15.570

`substring`是 0-indexed 所以你应该做这样的事情：

```
var word = "slider";
var part = word.substring(0,2); // sl 
```

还要注意[.slice()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice)做同样的事情，但实际上更强大，因为它可以向后计数，也可以向前计数。

为了解决您的新问题，我建议您做一些事情：

1.  您需要缓存您的长度值。返回的列表`getElementsByTagName`是实时的，这意味着在您循环时对列表的任何更改都会影响该值，因此它不会像您期望的那样运行。
2.  不要使用`new Array()`它过于花哨。
3.  您不需要实例化您将要立即定义的变量。

试试这个：

```
var elements = document.getElementsByTagName("input");
var allSliderInputs = [];
var sliderParams = [];
var len = elements.length;
var first, last, inc, style, c, t, i;

for (i = 0; i < len; i++) {
    c = elements[i].className; //works fine here
    t = c.substring(0, 2); 
    console.log(t);
} 
```

当在stackoverflow的这个页面上运行时，这对我来说在Firefox中很好用： ![样本结果](../Images/1bef3e7c959178f217cd4da19bde2a8e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T20:25:18.910

首先，.substring（和 .substr）是从 0 开始的，而不是从 1 开始的。

`.substring`提取两个位置之间的字符串。例如`.substring(1,4)`返回第 2、3、4 个字符。它将停在位置 4。

`.substr`根据 start + length 提取字符串。 `.substr(1,4)`返回从第二个字符开始的前 4 个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T20:24:11.173

`var theString = caseString.substring(1, 2);`应该还给你而已`l`。该`substring`方法接受子字符串的开头作为第一个参数，接受子字符串的结尾作为第二个参数。你给它的索引 1 是第二个字符（0 是第一个）。

您可能误认为`substring`. 接受作为第一个参数开始索引和长度作为第二个。所以：`substr``substr`

```
var caseString = "sliderInput";
var theString = caseString.substr(0, 2); //sl 
```

正在给出你想要的结果。

# nsis - 创建快捷方式问题

> ID：13434438
> 
> 赞同：1
> 
> 时间：2012-11-17T20:20:12.127
> 
> 标签：nsis

我想为一个网页创建一个快捷方式，如果我启动它，它将从指定的浏览器开始。通常，您只需右键单击桌面并使用此参数创建快捷方式：

例子：

```
"C:\Program Files (x86)\Mozilla Firefox\firefox.exe" http://google.com 
```

请帮助我，我不知道如何在 NSIS 中重新制作它。

到目前为止，我有：

```
Section

CreateShortCut "$SMPROGRAMS\html\google.lnk" "C:\Program Files (x86)\Mozilla Firefox\firefox.exe http://google.com"

SectionEnd 
```

如您所见，我无法在此表达式中插入更多“符号”的主要问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:06:41.397

URL 快捷方式实际上不是 .lnk，只需执行以下操作：

```
WriteINIStr "$SMPROGRAMS\html\google.url" "InternetShortcut" "URL" "http://google.com" 
```

您还可以[设置自定义图标](http://forums.winamp.com/showthread.php?t=251074)。

如果您想强制它在特定浏览器中打开（不是一个好主意），您可以执行以下操作：

```
CreateShortCut "$SMPROGRAMS\html\google.lnk" "C:\Program Files (x86)\Mozilla Firefox\firefox.exe" "http://google.com" 
```

# codeigniter - Codeigniter HMVC 模块位置

> ID：13434439
> 
> 赞同：1
> 
> 时间：2012-11-17T20:20:21.217
> 
> 标签：codeigniter, module, hmvc, hmvc-codeigniter

在我的 codeigniter 应用程序中，我使用的是 codeigniter HMVC。而且效果很好！

但我想要 2 个模块文件夹：

*   `application/controllers/`文件夹中的一个
*   和一个在`applications/`文件夹中。

我不知道我需要如何更改`modules_location`数组，所以这会起作用。此刻我的`modules_location`样子是这样的：

```
$config['modules_locations'] = array(
    APPPATH.'modules/' => '../modules/',
); 
```

我只需要添加一行就可以使这个系统正常工作，但是哪一行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:33:32.777

我这样做：

```
$config['modules_locations'] = array(
    APPPATH.'modules/core/' => '../modules/core/',
    APPPATH.'modules/plugins/' => '../modules/plugins/',
); 
```

它按预期工作。

我试图将模块根目录外部化到应用程序文件夹之外，但到目前为止没有成功，我会继续测试并让你知道它是否有效，如果我不要忘记在这里发布它。

干杯！

# ios - Air iOS SharedObject 更新后被删除

> ID：13434440
> 
> 赞同：5
> 
> 时间：2012-11-17T20:20:41.753
> 
> 标签：ios, actionscript-3, flash, air, shared-objects

我`SharedObject`在我的游戏中使用 s 来存储玩家在游戏中的进度（关卡分数、解锁关卡等）。

一切正常，但问题是当我提交游戏更新（具有相同的证书和相同的文件名`.swf`）`.ipa`更新游戏时，旧`SharedObject`的被删除，这对游戏来说是一个很大的问题，为了我。

两个版本的游戏都是用 Flash CS 6 和 Air SDK 3.5 制作的。

知道为什么会`SharedObject`被删除，我该如何防止呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:59:37.303

我假设 SharedObject 被覆盖的原因是因为它在转换过程中与 .ipa 捆绑在一起。

我知道这不会帮助您挽救您的 SharedObject 目前的情况，但您可以尝试使用[flash.filesystem](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/package-detail.html)将您的数据读/写到首选项文件，而不是在未来使用 SharedObject。

下面是我在自己的工作中使用的 Archive 类，但我以前从未为 iOS 开发过，所以我不确定它是否会像在其他部署目标上那样运行，尽管我相信它应该。

**用例：**

```
//Imports
import com.mattie.data.Archive;
import com.mattie.events.ArchiveEvent;

//Constants
private static const PREF_CANVAS_VOLUME:String = "prefCanvasVolume";
private static const DEFAULT_VOLUME:Number = 0.5;

//Initialize Archive
private function initArchive():void
{
    archive = new Archive();
    archive.addEventListener(ArchiveEvent.LOAD, init);
    archive.load();
}

//Initialize
private function init(event:ArchiveEvent):void
{
    archive.removeEventListener(ArchiveEvent.LOAD, init);

    canvasVolume = archive.read(PREF_CANVAS_VOLUME, DEFAULT_VOLUME);         
}

//Application Exiting Event Handler
private function applicationExitingEventHandler(event:Event):void
{
    stage.nativeWindow.removeEventListener(Event.CLOSING, applicationExitingEventHandler);

    archive.write(PREF_CANVAS_VOLUME, canvas.volume);

    archive.addEventListener(ArchiveEvent.SAVE, archiveSavedEventHandler);
    archive.save();
}

//Archive Saved Event Handler
private function archiveSavedEventHandler(event:ArchiveEvent):void
{
    archive.removeEventListener(ArchiveEvent.SAVE, archiveSavedEventHandler);

    NativeApplication.nativeApplication.exit();
} 
```

**[档案类](https://github.com/gmattie/ActionScript-3.0/blob/master/com/mattie/data/Archive.as)**

```
package com.mattie.data
{
    //Imports
    import com.mattie.events.ArchiveEvent;
    import flash.data.EncryptedLocalStore;
    import flash.desktop.NativeApplication;
    import flash.events.EventDispatcher;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import flash.net.registerClassAlias;
    import flash.utils.ByteArray;

    //Class
    public final class Archive extends EventDispatcher
    {
        //Properties
        private static var singleton:Archive;

        //Variables
        private var file:File;
        private var data:Object;

        //Constructor
        public function Archive()
        {
            if (singleton)
            {
                throw new Error("Archive is a singleton that is only accessible via the \"archive\" public property.");
            }

            file = File.applicationStorageDirectory.resolvePath(NativeApplication.nativeApplication.applicationID + "Archive");

            data = new Object();

            registerClassAlias("Item", Item);
        }

        //Load
        public function load():void
        {
            if (file.exists)
            {
                var fileStream:FileStream = new FileStream();
                fileStream.open(file, FileMode.READ);

                data = fileStream.readObject();

                fileStream.close();
            }

            dispatchEvent(new ArchiveEvent(ArchiveEvent.LOAD));
        }

        //Read
        public function read(key:String, defaultValue:* = null):*
        {
            var value:* = defaultValue;

            if (data[key] != undefined)
            {
                var item:Item = Item(data[key]);

                if (item.encrypted)
                {
                    var bytes:ByteArray = EncryptedLocalStore.getItem(key);

                    if (bytes == null)
                    {                       
                        return value;
                    }

                    switch (item.value)
                    {
                        case "Boolean":     value = bytes.readBoolean();                        break;
                        case "int":         value = bytes.readInt();                            break;
                        case "uint":        value = bytes.readUnsignedInt();                    break;
                        case "Number":      value = bytes.readDouble();                         break;
                        case "ByteArray":           bytes.readBytes(value = new ByteArray());   break;

                        default:            value = bytes.readUTFBytes(bytes.length);
                    }
                }
                else
                {
                    value = item.value;                    
                }
            }

            return value;
        }

        //Write
        public function write(key:String, value:*, encrypted:Boolean = false, autoSave:Boolean = false):void
        {
            var oldValue:* = read(key);

            if (oldValue != value)
            {
                var item:Item = new Item();
                item.encrypted = encrypted;

                if (encrypted)
                {
                    var constructorString:String = String(value.constructor);
                    constructorString = constructorString.substring(constructorString.lastIndexOf(" ") + 1, constructorString.length - 1);

                    item.value = constructorString;

                    var bytes:ByteArray = new ByteArray();

                    switch (value.constructor)
                    {
                        case Boolean:       bytes.writeBoolean(value);          break;                  
                        case int:           bytes.writeInt(value);              break;
                        case uint:          bytes.writeUnsignedInt(value);      break;
                        case Number:        bytes.writeDouble(value);           break;
                        case ByteArray:     bytes.writeBytes(value);            break;

                        default:            bytes.writeUTFBytes(value);
                    }

                    EncryptedLocalStore.setItem(key, bytes);
                }
                else
                {
                    item.value = value;                    
                }

                data[key] = item;

                dispatchEvent(new ArchiveEvent(ArchiveEvent.WRITE, key, oldValue, value));

                if (autoSave)
                {                    
                    save();
                }
            }
        }

        //Remove
        public function remove(key:String, autoSave:Boolean = false):void
        {
            if (data[key] != undefined)
            {
                var oldValue:* = read(key);

                if (Item(data[key]).encrypted)
                {                    
                    EncryptedLocalStore.removeItem(key);
                }

                delete data[key];

                dispatchEvent(new ArchiveEvent(ArchiveEvent.DELETE, key, oldValue));

                if (autoSave)
                {                    
                    save();
                }
            }
        }

        //Contains
        public function contains(key:String):Boolean
        {
            return (data[key] != undefined);
        }

        //Save
        public function save():void
        {
            var fileStream:FileStream = new FileStream();
            fileStream.open(file, FileMode.WRITE);
            fileStream.writeObject(data);
            fileStream.close();

            dispatchEvent(new ArchiveEvent(ArchiveEvent.SAVE));
        }

        //Get Singleton
        public static function get archive():Archive
        {
            if (!singleton)
            {
                singleton = new Archive();
            }

            return singleton;
        }
    }
}

//Item
class Item
{
    //Variables
    public var value:*;
    public var encrypted:Boolean = false;
} 
```

**[归档事件类](https://github.com/gmattie/ActionScript-3.0/blob/master/com/mattie/events/ArchiveEvent.as)**

```
package com.mattie.events
{
    //Imports
    import flash.events.Event;

    //Class
    public class ArchiveEvent extends Event
    {
        //Constants
        public static const LOAD:String = "load";
        public static const WRITE:String = "write";
        public static const DELETE:String = "delete";
        public static const SAVE:String = "save";

        //Properties
        public var key:String;
        public var oldValue:*;
        public var newValue:*;

        //Constructor
        public function ArchiveEvent(type:String, key:String = null, oldValue:* = null, newValue:* = null) 
        {
            super(type);

            this.key = key;
            this.oldValue = oldValue;
            this.newValue = newValue;
        }

        //Clone
        public override function clone():Event
        {
            return new ArchiveEvent(type, key, oldValue, newValue);
        }

        //To String
        public override function toString():String
        {
            return formatToString("ArchiveEvent", "type", "key", "oldValue", "newValue");
        }
    }
} 
```

# linux - 使用 Web 应用程序远程重新安排 cron 作业

> ID：13434442
> 
> 赞同：0
> 
> 时间：2012-11-17T20:20:45.960
> 
> 标签：linux, jsp, web-applications, cron

我在服务器机器上有一些 cron 作业，计划做一些事情。我想让用户使用 Web 应用程序（jsp 页面）修改这些 cron 作业。因此，假设（示例场景）某些作业计划在下午 2 点运行，我希望用户可以选择更改其时间。

一开始看起来很微不足道，但现在我被困住了。我是 Linux 新手。目前如何创建cron作业是：crontab -e；然后我根据需要手动添加新作业。但我想通过 Web 界面向远程用户提供此功能。

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:41:42.757

假设您的 crontab 有以下行：

```
20 3 * * * /home/somebody/somescript.sh 
```

您可以使用以下命令列出您的 crontab：

```
crontab -l 
```

然后您可以使用命令 sed 更改预定时间：

```
sed 's/20 3 \* \* \* \/home\/somebody\/somescript.sh/30 4 \* \* \* \/home\/somebody\/somescript.sh/' 
```

最后，您将通过将新文件传递给 crontab 命令再次将其提交给 crontab。

结果将是上面讨论的三个命令的组合，并将通过管道连接：

```
crontab -l | sed 's/20 3 \* \* \* \/home\/somebody\/somescript.sh/30 4 \* \* \* \/home\/somebody\/somescript.sh/' | crontab 
```

第一个命令会将当前的 crontab 列出到标准输出。然后 sed 将替换时间并将替换的文件传递给 crontab 命令，该命令会将其安装为新的 crontab。

但请注意，大多数 servlet 没有足够的系统权限来创建或修改 crontab。

# java - 如何在java中重置面板外观？

> ID：13434443
> 
> 赞同：1
> 
> 时间：2012-11-17T20:20:47.267
> 
> 标签：java, swing, jpanel, look-and-feel, uimanager

> **可能重复：**
> [面板失去颜色](https://stackoverflow.com/questions/13425475/panel-losing-color)

当我单击激活文件选择器的按钮并添加生成的文件时，面板颜色会消失，因为使用 uimanager 将文件选择器显示为 Windows 选择器。

```
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileSystemView;
import javax.swing.JFileChooser;
import javax.swing.plaf.FileChooserUI;

@SuppressWarnings("serial")
public class pan extends JPanel implements DropTargetListener {

    private DefaultListModel listModel = new DefaultListModel();
    private JButton addbutton;
    private JButton removebutton;
    private JButton selectbutton;
    private JButton lockbutton;
    private JButton unlockbutton;

    /**
     * Create the panel.
     */
    public pan() {
        setLayout(null);
        addbutton = new JButton("New button");
        addbutton.setBounds(10, 10, 90, 100);
        addbutton.addActionListener(new Action());
        add(addbutton);

        removebutton = new JButton("New button");
        removebutton.setBounds(110, 10, 90, 100);
        add(removebutton);

        selectbutton = new JButton("New button");
        selectbutton.setBounds(210, 10, 90, 100);
        add(selectbutton);

        lockbutton = new JButton("New button");
        lockbutton.setBounds(310, 10, 90, 100);
        add(lockbutton);

        unlockbutton = new JButton("New button");
        unlockbutton.setBounds(410, 10, 90, 100);
        add(unlockbutton);

        JLabel headerLabel = new JLabel("New label");
        headerLabel.setBorder(new BevelBorder(BevelBorder.RAISED,
            Color.LIGHT_GRAY, Color.GRAY, null, null));
        headerLabel.setUI(new ModifLabelUI());
        headerLabel.setBounds(10, 120, 635, 30);
        add(headerLabel);   
    }

    class Action implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            if(e.getSource()==addbutton){
                JFileChooser filechooser=new JFileChooser();
                filechooser.setMultiSelectionEnabled(true);             
                try {
    UIManager.setLookAndFeel(UIManager
            .getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (InstantiationException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IllegalAccessException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (UnsupportedLookAndFeelException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

                filechooser.updateUI();
                filechooser.showOpenDialog(new pan());
                File files=filechooser.getSelectedFile();
                listModel.addElement(files);
        }       
    }
} 
```

如果你删除 UImanger 问题就消失了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:28:24.230

根据[文档](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)...您可能需要确保首先将 UI 管理器设置为使用您想要使用的外观...

**编辑**对于一个具体的例子@see [This Post](https://stackoverflow.com/questions/9762747/java-swing-writing-a-ui-that-will-repaint-itself-based-on-changes-to-a-custom)

```
public static void main(String[] args) {
    try {
            // Set System L&F
        UIManager.setLookAndFeel(
            UIManager.getSystemLookAndFeelClassName());
    } 
    catch (UnsupportedLookAndFeelException e) {
       // handle exception
    }
    catch (ClassNotFoundException e) {
       // handle exception
    }
    catch (InstantiationException e) {
       // handle exception
    }
    catch (IllegalAccessException e) {
       // handle exception
    }

    new SwingApplication(); //Create and show the GUI.
} 
```

# objective-c - 如何使标签中的文字变大？

> ID：13434450
> 
> 赞同：0
> 
> 时间：2012-11-17T20:21:10.123
> 
> 标签：objective-c, ios, xcode, uilabel

我想使用 NSMutableAttributedString 更改原始字符串的一部分并使部分文本大于原始字符串。但是，由于我无法弄清楚的非常小的事情，它无法正常工作。这是我的代码：

```
NSString *combineString = [NSString stringWithFormat:@"%@", ...];
NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:combineString];
NSRange selectedRange = NSMakeRange(5, 4); // 4 characters, starting at index 22

[string beginEditing];

[string addAttribute:NSFontAttributeName
                   value:[UIFont systemFontOfSize:50]
                   range:selectedRange];

[string endEditing];
mainCell.label.text = combineString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:40:13.680

您正在设置`text`属性，它接受一个 NSString - 您的属性字符串 ,`string`实际上并没有去任何地方。尝试这个：

```
mainCell.label.attributedText = string; 
```

# android - 使用 Thread.sleep() 跳转到另一个活动

> ID：13434454
> 
> 赞同：-1
> 
> 时间：2012-11-17T20:22:37.967
> 
> 标签：android, android-intent, android-activity

我试图从活动一跳到活动二，但在 1 秒后。所以我使用了 Thread.sleep(1000)，然后活动二出现在前面。它工作得很好，但问题是我在活动一中给出了一个图像背景，但没有显示。

```
 public class Activity1 extends Activity {
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {

        Thread.sleep(1000);
        Intent i=new Intent(Activity1.this,Activity2.class );
        startActivity(i);
        } catch (InterruptedException e) {

            e.printStackTrace();
        }

    } 
```

另外，我在活动二中包含了一个按钮，它具有跳转到活动一的功能，在这种情况下，图像显示 1 秒钟，但不是我第一次打开我的应用程序时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:45:00.700

在 onCreate() 完成之前，您的 UI 不会构建。因此，如果您在 onCreate() 中启动活动 2，您将永远不会看到活动 1。

反而：

```
@Override
void onAttachedToWindow()  {
    // start activity 2
} 
```

正如其他人在评论中所说，您永远不应该在 UI 线程上使用睡眠。事实上，我希望 Java 让使用 sleep 变得更加困难，因为它被使用得太多，而且经常作为一种快速修复，避免了正确的解决方案。

在这种情况下，您应该在一秒钟后使用 an`AsyncTask`来启动第二个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:49:23.017

您可以创建 RelativeLayout 并显示/隐藏它并仅使用 1 个活动

```
public class MyView extends RelativeLayout{

 private ImageView view = ....;

 ....
 view.setVisibility(View.VISIBLE);
 ....
 view.setVisibility(View.GONE);

} 
```

# java - Quartz 劫持 Log4j.properties 文件

> ID：13434455
> 
> 赞同：0
> 
> 时间：2012-11-17T20:22:41.553
> 
> 标签：java, log4j, quartz-scheduler

我有一个使用 log4j 的项目，它有一个运行良好的 log4.properties 文件。

然后我介绍了 Quartz 2.1.6，现在它似乎覆盖了之前使用的文件。Log4j 带有 Quartz，Quartz 有一个属性文件，但我不知道要更改什么才能使其使用旧文件。

有没有办法让 Quartz 打印正在使用的 log4j.properties？

我`-Dlog4j.configuration`在运行时尝试过但没有成功。

有任何想法吗？

# android - Fileoutputstream，我在哪里可以将 .data 文件存储在模拟器上，尝试创建文件时出现 FileNotFoundException？

> ID：13434460
> 
> 赞同：2
> 
> 时间：2012-11-17T20:23:20.443
> 
> 标签：android, android-layout

我有以下代码并尝试将数组存储在 .data 文件中。问题是我不知道如何执行此操作，尝试创建文件时出现 filenotfoundException。

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;

public class SimpleBookManager implements BookManager, java.io.Serializable {

    private ArrayList<Book> allBooks = new ArrayList<Book>();

    public ArrayList<Book> getAllBooks(){
        return  allBooks;
    }

    public void saveChanges(){
        try{
            FileOutputStream f_out = new FileOutputStream("myobject.data");
            // Write object with ObjectOutputStream
            ObjectOutputStream obj_out = new
                ObjectOutputStream (f_out);

            // Write object out to disk
            obj_out.writeObject(allBooks);
        }catch (FileNotFoundException e) {
            System.out.println("No file found saveChanges");//Why can't I create a new "myObject.data"?
        } catch (IOException e) {
            //someCode();
        } 
    }

    public void loadBooks(){
        try{
        // Read from disk using FileInputStream
        FileInputStream f_in = new 
            FileInputStream("myobject.data");

        // Read object using ObjectInputStream
        ObjectInputStream obj_in = 
            new ObjectInputStream (f_in);

        // Read an object
        Object obj = obj_in.readObject();

        if (obj instanceof ArrayList<?>)
        {
            // Cast object to a Vector
            allBooks = (ArrayList<Book>) obj;
            System.out.println("Worked");

        }
        }catch (FileNotFoundException e) {
            System.out.println("No file found LoadBooks");
        } catch (IOException e) {
            //someCode();
        } 
        catch (ClassNotFoundException e) {
            //someCode();
        }

    }

      public static SimpleBookManager getSimpleBookManager()
      {
        if (ref == null){
            ref = new SimpleBookManager();
        }

        return ref;
      }

    public SimpleBookManager(){

    }
} 
```

问题是当我尝试创建它并稍后读取它时，它都会抛出 filenotfound 异常，为什么？我不能在 android 模拟器上创建 .data 文件吗？ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* ___**

**编辑**这是我的清单并`<uses permission>`在文件末尾添加了，但它仍然无法创建文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="edu.chalmers.BookApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/ic_launcher"

        >
        <activity
            android:name=".BookApp"
            android:label="@string/title_bookapp"
            android:uiOptions="splitActionBarWhenNarrow" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
            <activity
        android:name=".AddBookActivity"
        android:uiOptions="splitActionBarWhenNarrow" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="edu.chalmers.BookApp" />
    </activity>
     <activity
        android:name=".DetailActivity"
        android:uiOptions="splitActionBarWhenNarrow" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="edu.chalmers.BookApp" />
    </activity>
     <activity
        android:name=".EditBookActivity"
        android:uiOptions="splitActionBarWhenNarrow" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="edu.chalmers.BookApp" />
    </activity>

    </application>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:08:49.663

更改`saveChanges()`方法以将 a`Context`作为参数...

```
public void saveChanges(Context context) {...} 
```

然后`saveChanges(...)`尝试更改此行...

```
FileOutputStream f_out = new FileOutputStream("myobject.data"); 
```

...到...

```
FileOutputStream f_out = context.openFileOutput("myobject.data", Context.MODE_PRIVATE); 
```

还传递一个`Context`to`loadBooks(...)`并更改此行...

```
FileInputStream f_in = new FileInputStream("myobject.data"); 
```

...到...

```
FileInputStream f_in = context.openFileInput("myobject.data"); 
```

从 an 调用任一方法时，`Activity`您将`this`用作上下文。例子...

```
myBookManager.saveChanges(this);
myBookManager.loadBooks(this); 
```

# javascript - 在nodejs中添加子域并表达

> ID：13434465
> 
> 赞同：3
> 
> 时间：2012-11-17T20:24:12.283
> 
> 标签：javascript, node.js, express

我正在尝试使用 node.sj 和 Expressjs v3 添加子域，但在尝试加载子域时我不断收到 404 cannot get / 。

```
var express = require('express'),
    app = module.exports = express(),
    MongoStore = require('connect-mongodb'),
    server = require('http').createServer(app),
    fs = require('fs'),
    socket = require('./lib/sockets'),
    flash = require('./middleware/flash');

app.configure('development', function () {
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
});

app.configure('production', function () {
    app.use(express.errorHandler()); 
});

app.configure(function () {
    app.use(express.favicon(__dirname + '/public/domain.com/images/favicon.ico'));
    app.engine('.html', require('ejs').__express);
    app.set('views', __dirname + '/views/site');
    app.set('view engine', 'ejs');
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(flash());
    app.use(app.router);
    app.use(express.vhost(app.get('manager_vhost'), require('./subdomains/Manager')));

});

server.listen(3000);
socket.listen(server, sessionStore, app); 
```

这就是我的经理文件中的内容

```
var express = require('express'),
    manager = module.exports = express();

manager.configure(function () {
    manager.use(express.static(manager.get('base_location') + '/public/'));
    manager.engine('.html', require('ejs').__express);
    manager.set('view engine', 'ejs');
    manager.set('version', version);
}); 
```

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:27:04.413

您的路线在哪里定义？尝试添加路线，看看会发生什么

```
manager.get('/', function (req, res) {
    res.render('layout', { 
        title: 'Manager '
    });
}); 
```

# java - 可见性标准的解释（尤其是 Java 与 UML）

> ID：13434468
> 
> 赞同：2
> 
> 时间：2012-11-17T20:24:20.627
> 
> 标签：java, uml, standards, visibility, encapsulation

通过谷歌，发现了许多略有不同的解决方案，尽管（对我来说）感觉应该更容易回答。这些是我现在担心的话，同时试图获得体面的 UML 技能:D ...

“公共、受保护、私有、包”

让我首先尝试为 Java 完成这个，因为我对它非常熟悉（请纠正我，如果我做了任何坏事！）：

1.  上市
    *   同一实例的成员**可以**看到/使用它
    *   同一类的另一个实例的成员**可以**看到/使用它
    *   同一 pkg 中派生类的成员**可以**看到/使用它
    *   另一个 pkg 中的派生类的成员**可以**看到/使用它
    *   同一 pkg 中另一个类的成员**可以**看到/使用它
    *   另一个 pkg 中的另一个类的成员**可以**看到/使用它
    *   其他任何东西都**可以**看到/使用这个
2.  受保护
    *   同一实例的成员**可以**看到/使用它
    *   同一类的另一个实例的成员**可以**看到/使用它
    *   同一 pkg 中派生类的成员**可以**看到/使用它
    *   另一个 pkg 中的派生类的成员**可以**看到/使用它
    *   同一 pkg 中另一个类的成员**无法**看到/使用它
    *   另一个 pkg 中另一个类的成员**无法**看到/使用它
    *   其他任何东西**都**看不到/使用这个
3.  私人的
    *   同一实例的成员**可以**看到/使用它
    *   同一类的另一个实例的成员**可以**看到/使用它
    *   同一 pkg 中派生类的成员**无法**看到/使用它
    *   另一个 pkg 中的派生类成员**无法**看到/使用它
    *   同一 pkg 中另一个类的成员**无法**看到/使用它
    *   另一个 pkg 中另一个类的成员**无法**看到/使用它
    *   其他任何东西**都**看不到/使用这个
4.  包裹
    *   同一实例的成员**可以**看到/使用它
    *   同一类的另一个实例的成员**可以**看到/使用它
    *   同一 pkg 中派生类的成员**可以**看到/使用它
    *   另一个 pkg 中的派生类成员**无法**看到/使用它
    *   同一 pkg 中另一个类的成员**可以**看到/使用它
    *   另一个 pkg 中另一个类的成员**无法**看到/使用它
    *   其他任何东西**都**看不到/使用这个

我现在的问题：

1.  这与 UML 标准有何不同？
2.  如果我在上面的列表中包含错误，我在哪里包含错误？我不是上帝，所以可能有一个；）

最好的问候，并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:02:30.407

来自 UML 标准。能见度：

> 公共元素对所有可以访问拥有它的命名空间内容的元素都是可见的。
> 
> 私有元素仅在拥有它的命名空间内可见。
> 
> 受保护元素对与拥有它的命名空间有泛化关系的元素可见。
> 
> 包元素由不是包的名称空间拥有，并且对于与其拥有的名称空间位于同一包中的元素可见。只有不属于包的命名元素才能标记为具有包可见性。任何标记为具有包可见性的元素对最近的封闭包中的所有元素都是可见的（假设其他拥有元素具有适当的可见性）。在最近的封闭包之外，标记为具有包可见性的元素不可见。

命名空间：

> 命名空间是可以拥有其他命名元素的命名元素。

我认为 UML 对私有、受保护等的定义与 Java 的定义非常相似。

# java - EntityManager::getDelegate 返回什么？

> ID：13434469
> 
> 赞同：4
> 
> 时间：2012-11-17T20:24:28.723
> 
> 标签：java, jpa, ejb-3.0

我在 EJB3 / JSF 项目中使用带有默认 Hibernate JPA 引擎的 JBoss 7。

[EntityManager::getDelegate 上](http://docs.oracle.com/javaee/6/api/index.html?javax/persistence/EntityManager.html)的javadoc读取：“返回 EntityManager 的基础提供程序对象，如果可用。”。

出于好奇，我尝试了以下代码：

```
@Stateless
public class AFacade {
    @PersistenceContext(unitName="foo")
    EntityManager em;

    public List<A> findAll() {
         l.info("underlying entity manager is: "+em.getDelegate().getClass().getSimpleName());
         ...
    } 
```

然而，输出将类名指示为：**org.hibernate.internal.SessionImpl**，根据[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/internal/SessionImpl.html)，它是一个会话实现。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T20:35:54.670

JPA 只是 ORM 的一个规范；该规范/API 有一些实现，最著名的是 Hibernate、EclipseLink、OpenJPA。

这意味着它`EntityManager`只是实现库中类的适配器。在您的情况下，`org.hibernate.internal.SessionImpl`因为您使用 Hibernate 作为 JPA 实现 -**这是管理您提供给`EntityManager`**.

# c++ - 调用 free() 时发生混合语言程序崩溃

> ID：13434474
> 
> 赞同：3
> 
> 时间：2012-11-17T20:24:43.193
> 
> 标签：c++, c, gcc, crash, gfortran

我有一个程序，其中 C、C++ 和 Fortran 中的代码已被编译并链接在一起。main 函数是用 C++ 编写的，可以在文件中找到`testQ.cpp`。C++ 代码调用文件中的 Fortran 子例程`getqpf.F`。中的子例程`getqpf.F`调用许多其他文件中的 C 函数。

在 GNU/Linux 上使用`gcc`和`gfortran`我已经成功地将程序链接在一起：

```
 g++ -c test-Q.cpp -I./boost/boost_1_52_0/ -g
 gcc -c paul2.c -g
 gcc -c paul2_L1.c -g
 gcc -c paul6.c -g
 gcc -c paul6_L1.c -g 
 gcc -c fit_slope.c -g
 gfortran -c getqpf.F -g
 g++ -o test-Q test-Q.o paul2.o paul2_L1.o paul6.o paul6_L1.o fit_slope.o getqpf.o -g -lgfortran 
```

该程序似乎运行正常。但是，它在终止 when`free()`被调用之前崩溃：

```
free(x1); 
```

`free()`这是程序中的最后一条语句，只有被调用时程序才会崩溃。现在`x1`使用以下内容创建`malloc`：

```
double *x1;
x1 = (double*)malloc(iXget); 
```

指针被传递给`x1`Fortran 代码，Fortran 子例程将它传递给 C 代码函数。

这是崩溃的输出。这里可能出了什么问题，我该如何调试？我最近安装了`valgrind`. 如何使用它来调试我的程序？

```
*** glibc detected *** ./test-Q: free(): invalid next size (normal): 0x0000000000f50aa0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7ae16)[0x7feabf64de16]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x6c)[0x7feabf6520fc]
./test-Q[0x402520]
./test-Q[0x4026b2]
./test-Q[0x401dbd]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7feabf5f430d]
./test-Q[0x401cf9]
======= Memory map: ========
00400000-0040b000 r-xp 00000000 08:11 9714095                            /media/RESEARCH/SAS2-version2/test-Q/test-Q
0060a000-0060b000 r--p 0000a000 08:11 9714095                            /media/RESEARCH/SAS2-version2/test-Q/test-Q
0060b000-0060c000 rw-p 0000b000 08:11 9714095                            /media/RESEARCH/SAS2-version2/test-Q/test-Q
00f39000-00f5a000 rw-p 00000000 00:00 0                                  [heap]
7feab8000000-7feab8021000 rw-p 00000000 00:00 0 
7feab8021000-7feabc000000 ---p 00000000 00:00 0 
7feabf39d000-7feabf3d2000 r-xp 00000000 08:01 18881806                   /usr/lib/x86_64-linux-gnu/libquadmath.so.0.0.0
7feabf3d2000-7feabf5d1000 ---p 00035000 08:01 18881806                   /usr/lib/x86_64-linux-gnu/libquadmath.so.0.0.0
7feabf5d1000-7feabf5d2000 r--p 00034000 08:01 18881806                   /usr/lib/x86_64-linux-gnu/libquadmath.so.0.0.0
7feabf5d2000-7feabf5d3000 rw-p 00035000 08:01 18881806                   /usr/lib/x86_64-linux-gnu/libquadmath.so.0.0.0
7feabf5d3000-7feabf76c000 r-xp 00000000 08:01 16515356                   /lib/x86_64-linux-gnu/libc-2.13.so
7feabf76c000-7feabf96b000 ---p 00199000 08:01 16515356                   /lib/x86_64-linux-gnu/libc-2.13.so
7feabf96b000-7feabf96f000 r--p 00198000 08:01 16515356                   /lib/x86_64-linux-gnu/libc-2.13.so
7feabf96f000-7feabf970000 rw-p 0019c000 08:01 16515356                   /lib/x86_64-linux-gnu/libc-2.13.so
7feabf970000-7feabf976000 rw-p 00000000 00:00 0 
7feabf976000-7feabf98b000 r-xp 00000000 08:01 16518820                   /lib/x86_64-linux-gnu/libgcc_s.so.1
7feabf98b000-7feabfb8a000 ---p 00015000 08:01 16518820                   /lib/x86_64-linux-gnu/libgcc_s.so.1
7feabfb8a000-7feabfb8b000 r--p 00014000 08:01 16518820                   /lib/x86_64-linux-gnu/libgcc_s.so.1
7feabfb8b000-7feabfb8c000 rw-p 00015000 08:01 16518820                   /lib/x86_64-linux-gnu/libgcc_s.so.1
7feabfb8c000-7feabfc0f000 r-xp 00000000 08:01 16515346                   /lib/x86_64-linux-gnu/libm-2.13.so
7feabfc0f000-7feabfe0e000 ---p 00083000 08:01 16515346                   /lib/x86_64-linux-gnu/libm-2.13.so
7feabfe0e000-7feabfe0f000 r--p 00082000 08:01 16515346                   /lib/x86_64-linux-gnu/libm-2.13.so
7feabfe0f000-7feabfe10000 rw-p 00083000 08:01 16515346                   /lib/x86_64-linux-gnu/libm-2.13.so
7feabfe10000-7feabfef8000 r-xp 00000000 08:01 18881835                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7feabfef8000-7feac00f8000 ---p 000e8000 08:01 18881835                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7feac00f8000-7feac0100000 r--p 000e8000 08:01 18881835                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7feac0100000-7feac0102000 rw-p 000f0000 08:01 18881835                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7feac0102000-7feac0117000 rw-p 00000000 00:00 0 
7feac0117000-7feac022b000 r-xp 00000000 08:01 18883022                   /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0
7feac022b000-7feac042a000 ---p 00114000 08:01 18883022                   /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0
7feac042a000-7feac042b000 r--p 00113000 08:01 18883022                   /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0
7feac042b000-7feac042d000 rw-p 00114000 08:01 18883022                   /usr/lib/x86_64-linux-gnu/libgfortran.so.3.0.0
7feac042d000-7feac044e000 r-xp 00000000 08:01 16515354                   /lib/x86_64-linux-gnu/ld-2.13.so
7feac0630000-7feac0636000 rw-p 00000000 00:00 0 
7feac064a000-7feac064d000 rw-p 00000000 00:00 0 
7feac064d000-7feac064e000 r--p 00020000 08:01 16515354                   /lib/x86_64-linux-gnu/ld-2.13.so
7feac064e000-7feac0650000 rw-p 00021000 08:01 16515354                   /lib/x86_64-linux-gnu/ld-2.13.so
7fff2940a000-7fff2942b000 rw-p 00000000 00:00 0                          [stack]
7fff2952c000-7fff2952d000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

**更新**

运行后`valgrind --tool=memcheck --leak-check=full --log-file=memcheck.log ./test-Q`，我得到一个看起来很奇怪的日志文件。也许有些东西没有正确设置？这里是：

```
==15621== Memcheck, a memory error detector
==15621== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==15621== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==15621== Command: ./test-Q
==15621== Parent PID: 14623
==15621== 
==15621== Invalid write of size 4
==15621==    at 0x401EE2: call_function(std::vector<double, std::allocator<double> >) (test-Q.cpp:183)
==15621==    by 0x4026B1: run_experiment() (test-Q.cpp:346)
==15621==    by 0x401DBC: main (test-Q.cpp:120)
==15621==  Address 0x5ecba78 is 1,000 bytes inside a block of size 1,001 alloc'd
==15621==    at 0x4C2A66F: malloc (vg_replace_malloc.c:270)
==15621==    by 0x401E9A: call_function(std::vector<double, std::allocator<double> >) (test-Q.cpp:179)
==15621==    by 0x4026B1: run_experiment() (test-Q.cpp:346)
==15621==    by 0x401DBC: main (test-Q.cpp:120)
==15621== 
--15621-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting
--15621-- si_code=80;  Faulting address: 0x0;  sp: 0x4030e0df0

valgrind: the 'impossible' happened:
   Killed by fatal signal
==15621==    at 0x380624A6: vgPlain_arena_malloc (m_mallocfree.c:291)
==15621==    by 0x380294E4: vgMemCheck_new_block (mc_malloc_wrappers.c:263)
==15621==    by 0x3802967A: vgMemCheck_malloc (mc_malloc_wrappers.c:301)
==15621==    by 0x3809D05D: vgPlain_scheduler (scheduler.c:1665)
==15621==    by 0x380AC715: run_a_thread_NORETURN (syswrap-linux.c:103)

sched status:
  running_tid=1

Thread 1: status = VgTs_Runnable
==15621==    at 0x4C2A66F: malloc (vg_replace_malloc.c:270)
==15621==    by 0x401FB9: call_function(std::vector<double, std::allocator<double> >) (test-Q.cpp:217)
==15621==    by 0x4026B1: run_experiment() (test-Q.cpp:346)
==15621==    by 0x401DBC: main (test-Q.cpp:120)

Note: see also the FAQ in the source distribution.
It contains workarounds to several common problems.
In particular, if Valgrind aborted or crashed after
identifying problems in your program, there's a good chance
that fixing those problems will prevent Valgrind aborting or
crashing, especially if it happened in m_mallocfree.c.

If that doesn't help, please report this bug to: www.valgrind.org

In the bug report, send all the above text, the valgrind
version, and what OS and version you are using.  Thanks. 
```

**更新**

这是与数组有关的函数。

```
// main function
int main()
{
    run_experiment();   
} 

void run_experiment()
{

    const int MAX_VAL = 1001;
    std::string line;
    std::ifstream myfile ("s1.txt");
    std::vector<double>data(MAX_VAL);
    int cnt = 0;
    double val;

    if (myfile.is_open())
    {
        while ( myfile.good() && cnt < MAX_VAL)
        {
            std::getline (myfile,line); 
            val = boost::lexical_cast<double>(line);
            data[cnt++] = val;      
        }
        myfile.close();

        // data vector seems to be OK here          

        // call the function to do the data processing
        // this is the line 346 called into question by Valgrind
        // run_experiment() (test-Q.cpp:346)
        call_function(data);    

    }
    else std::cout << "Unable to open file"; 
} // end 
```

这是函数声明。向量是按值传递的。

```
void call_function(std::vector<double> v); 
```

**更新**

正如 mux 在下面的答案中敏锐地建议的那样，超出数组范围的写入确实是一个问题。这是有效的代码版本，注释中显示了错误的代码。我修改了向量以保存 type 的元素`float`，但真正的问题确实超出了数组的范围。

C 风格的数组是使用 创建的`malloc()`，但`sizeof()`必须使用该函数来创建足够的空间。

更改这一行代码会导致错误消失。

```
 // function to call code in the q analysis function
    void call_function(std::vector<float> v)
    {

        // create all of the inputs
        float *tri = NULL; 
        int nsamp;
        int lwin;
        int nfreqfit;   // calculated below 
        float dt;  
        float null;  
        int L2; 
        float df;       // calculated below
        float *qq = NULL;  
        float *pf = NULL; 
        float *ampls;  
        double *work1; 
        double *work2; 
        double *work3; 
        double *work4; 
        int mem; 
        int morder;
        int nfs;        // calculated below
        double *xReal = NULL;  
        double *xImag = NULL; 
        double *xAbs = NULL;
        double *x1 = NULL;
        int cen;
        int top;
        int bot; 
        float cut;
        int nfst;           // calculated below
        int raw;
        float fst;          // low frequency to fit; replaces fpeak frequency

        nsamp = v.size();
        lwin = 101;
        dt =  0.0042;
        null = 100;
        L2 = 1;
        mem = 0;            // keep this as is
        morder = 5;
        cen = 1;
        top = 0;
        bot = 0;
        cut = 0.50;
        raw = 1;
        fst = 0.0;          // lowest frequency to fit

        // this is the line that was changed
        tri = (float*)malloc(nsamp * sizeof(float));

        // This is the line that needed changing
        // tri = (float*)malloc(nsamp);

        // copy the data into the vector
        for (int i = 0; i < nsamp; i++)
            tri[i] = v[i];

       std::cout << "Done copying data to the vector" << std::endl;

    // more code here...

    } // end of function

    void run_experiment()
    {

        const int MAX_VAL = 1001;
        std::string line;
        std::ifstream myfile ("s1.txt");
        std::vector<float>data(MAX_VAL);
        int cnt = 0;
        float val;

        if (myfile.is_open())
        {
            while ( myfile.good() && cnt < MAX_VAL)
            {
                std::getline (myfile,line); 
                val = boost::lexical_cast<double>(line);
                data[cnt++] = val;      
            }
            myfile.close();

            /*
            for (int i = 0; i < 1001; i++)
                std::cout << data[i] << std::endl;
            */

            // call the function to do the data processing
            call_function(data);    

        }
        else std::cout << "Unable to open file"; 
    } // end

int main()
{
    run_experiment();   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:28:01.133

看起来您的程序中某处存在内存泄漏，您提供的输出根本没有帮助，您应该使用[valgrind](http://valgrind.org/docs/manual/mc-manual.html)运行程序来解决问题。尝试：

```
valgrind --tool=memcheck --leak-check=full --log-file=memcheck.log <binary> 
```

如果您`fork`有任何子进程，您可能要添加：

```
--trace-children=yes 
```

如果仍然无法修复，请发布 memcheck.log 和相关代码。

编辑：似乎你在这里写的东西超出了一些数组的范围：

```
call_function(std::vector<double, std::allocator<double> >) (test-Q.cpp:183) 
```

你应该先解决这个问题，这可能是问题所在。

# jquery - 使用 jquery 添加淡入效果 li:hover

> ID：13434477
> 
> 赞同：1
> 
> 时间：2012-11-17T20:25:02.733
> 
> 标签：jquery, css, fadein

我正在 WordPress 中编写一个新主题，我想显示比旧界面更多的动画页面。

我想为我的`li:hover`元素添加一些效果（即淡入效果）。我怎样才能做到这一点 ？

这是我的CSS：

```
/*Videos*/
.PozVideos {float:left;width:940px;min-height:155px;margin:0px 0px 20px 0px;}
.PozVideos .Caption {float:left;width:930px;padding:0px 0px 10px 10px;margin-bottom:8px;border-bottom:1px solid #F8F8E6;height:25px;line-height:33px;font-size:14px;color:#fff;overflow: hidden;}
.PozVideos ul {padding:0px;margin:0px 0px 5px 7px;}
.PozVideos ul li {float:left;width:150px;height:100px;margin-right:5px;background:#F8F8E6;text-align:center;}
.PozVideos ul li img {float:left;width:140px;border:none;height:90px;padding:5px;}
.PozVideos ul li:hover {float:left;opacity:0.7;filter:alpha(opacity=70); /* For IE8 and earlier */}
.PozVideos .Title {float:left;margin:-35px 0px 0px 0px;width:150px;height:30px;line-height:15px;}
.TransationsImages {opacity:0.4;filter:alpha(opacity=40); /* For IE8 and earlier */}
.TransationsImagesHover {opacity:0.7;filter:alpha(opacity=70); /* For IE8 and earlier */}
.TransationsTitle {opacity:0.9;filter:alpha(opacity=0.9); /* For IE8 and earlier */}

.Pozn-img-play {
    background:transparent;
    position:relative;
    z-index:1;
    cursor:pointer;
    width:150px;
    height:100px;
    border:0px;

}

.Pozn-img-play:hover {
    background:url('img/play.png') no-repeat center center;
} 
```

**HTML：**

```
<!--Videos-->
<div class="PozVideos BgPurple RadiusTopTen">
    <div class="Caption">Video Galeri</div>
    <ul>
        <li><div class="PotImage"><a href=""><img src="assets/demo/video.jpg" alt=""></a><div class="Pozn-img-play"></div></div></li>
        <li><div class="PotImage"><a href=""><img src="assets/demo/video.jpg" alt=""></a></div></li>
        <li><div class="PotImage"><a href=""><img src="assets/demo/video.jpg" alt=""></a></div></li>
        <li><div class="PotImage"><a href=""><img src="assets/demo/video.jpg" alt=""></a></div></li>
        <li><div class="PotImage"><a href=""><img src="assets/demo/video.jpg" alt=""></a></div></li>
        <li><div class="PotImage"><a href=""><img src="assets/demo/video.jpg" alt=""></a></div></li>
    </ul>
</div>
<!--Videos--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:32:13.527

您需要添加此 CSS：

```
 .Pozn-img-play {
        background:transparent;
        position:relative;
        z-index:1;
        cursor:pointer;
        width:150px;
        height:100px;
        border:0px;
        opacity: 1;
        transition: opacity .5s ease-in-out;
       -moz-transition: opacity .5s ease-in-out;
       -webkit-transition: opacity .5s ease-in-out;

    }

    .Pozn-img-play:hover {
        background:url('img/play.png') no-repeat center center;
        opacity: 0.1;
    }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:45:45.603

试试这个[小提琴](http://jsfiddle.net/phazorrise/u4kCR/)。如果你使用 jQuery 而不仅仅是 css，你可以使这个效果更平滑。

您可以使用`fadeIn`, `fadeOut`。使用 jQuery 而不是 CSS3 的优点之一是您获得了良好的浏览器兼容性。

# appcelerator - 下载 Appcelerator 的文档

> ID：13434478
> 
> 赞同：5
> 
> 时间：2012-11-17T20:25:07.180
> 
> 标签：appcelerator

我试图找到一种方法来下载钛应用加速器的文档以供离线阅读

我搜索了很多，但找不到任何直接或间接的下载方式

有没有人下载文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T19:06:33.010

（据我所知）无法直接使用在线版本使文档脱机。

但是，可以使用源代码构建文档，因为我们都知道 Titanium 是开源的。

1.  从以下网址下载源代码：[https](https://github.com/appcelerator/titanium_mobile) ://github.com/appcelerator/titanium_mobile ，或克隆 repo：`git clone https://github.com/appcelerator/titanium_mobile.git`
2.  解压源代码
3.  `cd titanium_mobile-master`
4.  确保您已安装 python 以及`pyyml`和`pygments`，您可以使用以下命令安装它们：`sudo easy_install pyyml, pygments`
5.  确保你的系统中安装了 jsduck，如果没有安装它：`gem install jsduck`
6.  写这个命令：`apidoc/docgen.py --format=jsduck --output=dist/apidoc`
7.  `cd dist/apidoc`
8.  `jsduck --touch-examples-ui --output Whole titanium.js`，`Whole`包含生成的文档的输出目录在哪里

如果您希望将内置函数包含在生成的文档中，请执行最后一个命令： `jsduck --builtin-classes --touch-examples-ui --output Whole titanium.js`

就是这样，您有一个完整的可离线搜索的 Ti 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:20:25.143

顺便说一句，我找到了解决 Ti 开发人员面临的最常见问题之一的有效解决方案。

**使用 Titanium Studio 离线工作：**

离线后，Titanium Studio 将不允许您创建新项目或构建/打包现有项目，以解决此问题：

-- 我在发明以下程序之前已经应用了这个程序，所以我不确定它是否有任何效果：http: [//developer.appcelerator.com/question/119830/use-titanium-withour-internet-connection-or -注销](http://developer.appcelerator.com/question/119830/use-titanium-withour-internet-connection-or-logged-off)，Adam Fisher 的程序。

1.  离线时打开 Titanium Studio。
2.  去：`~/.titanium`
3.  `vim auth_session.json`
4.  更改`false`为`true`.
5.  完毕

现在您可以根据需要构建和创建新项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:39:51.543

我根据 user1537325 的回答制作了一个 shell 脚本。这是 Ubuntu 12.04 特有的，但您可以将其修改为您自己的操作系统，而不会有太多麻烦。一定要支持他的回答。

[https://gist.github.com/eric-hu/4952258](https://gist.github.com/eric-hu/4952258)

**警告：**生成的文档的布局和配色方案看起来与 Titanium 3.0 的在线文档不同。我不确定是否存在差异。jsduck 的输出还包括许多关于“未知类型”的警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T17:38:35.310

Mac 上有一个名为 Dash ( [http://kapeli.com/dash](http://kapeli.com/dash) ) 的应用程序。Dash 是面向软件开发人员的离线文档浏览器。它支持多种语言，其中之一是 Titanium API；这是必须的……如果您使用 Mac。

但是，Titanium API 的所有文档都以 JSON 文件的形式提供（[http://docs.appcelerator.com/titanium/data/index.html](http://docs.appcelerator.com/titanium/data/index.html)），所以我想这只是构建一个离线 JSON 阅读器的问题。

R

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T04:27:21.980

不能直接从appcelerator网站下载API文档，但是可以使用*离线浏览软件*下载网站离线阅读

这里有一些链接，您可以从中获得一些笔记

1.  [来自 appcelerator 的培训资源](http://training.appcelerator.com/training-resources)
2.  您可以下载并阅读[Appcelerator Titanium Smartphone App Development Cookbook](https://rads.stackoverflow.com/amzn/click/com/1849513961)，这将帮助您使用钛开发应用程序
3.  [http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/BNAPP_ebook](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/BNAPP_ebook)
4.  你也可以参考这个答案[学习钛](https://stackoverflow.com/questions/12814707/learning-titanium-for-android/12832343#12832343)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-09T09:00:33.797

[您可以从“ http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/BNAPP_ebook](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/BNAPP_ebook) ”下载 .mobi 文件并使用 mobi to pdf to converter 将其转换为 pdf 格式。[您可以使用http://www.mobi-to-pdf.com/](http://www.mobi-to-pdf.com/)提供的免费服务 进行转换。希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-31T10:42:54.983

如果您使用 Mac OS X，您可以安装 Dash

[破折号链接](https://kapeli.com/dash)

[破折号截图](http://i.stack.imgur.com/PBSKK.png)

# xcode - 在 iOS 中旋转 UIImageView

> ID：13434479
> 
> 赞同：2
> 
> 时间：2012-11-17T20:25:12.757
> 
> 标签：xcode, rotation, uiimage, cgaffinetransform

我对 iOS 编程比较陌生，并且希望我的第一个项目包括一个带有旋转指针的仪表。所以这就是我所做的......

*   创建了一个新的基于单一视图的项目。
*   将 UIImageView 拖到 Interface Builder 的中心，并添加了我的仪表针图像。
*   为我的图像创建和 IBOutlet 到名为 imgNeedle 的头文件中
*   在实现文件中创建以下方法并在 NSTimer 上运行它：

> ```
> -(void) rotateNeedle {
>     degrees++;         
>     radians = degrees / 57.2958;
> 
>     [self.imgNeedle setTransform: CGAffineTransformMakeRotation(radians)];
> } 
> ```

针实际上是旋转的，但它不是围绕一个静态点。这有点难以解释，但似乎图像锚定在左上角？如果我没有很好地解释问题，可能值得拼凑一个快速项目！:)

但是，如果我在运行时创建 UIImageView，请在 viewDidLoad 方法中的 NSTimer 之前放置以下代码：

```
UIImageView *Needle = [[UIImageView alloc]initWithFrame:CGRectMake(100, 300, 100, 10)];

self.imgNeedle = Needle;

self.imgNeedle.image = [UIImage imageNamed:@"needle.jpg"];
[self.view addSubview:self.imgNeedle]; 
```

然后它会按照我想要的方式运行，围绕中心固定点旋转。

任何建议都将受到极大的欢迎，谢谢！

# ios - 应用程序不在后台运行根本不起作用

> ID：13434486
> 
> 赞同：1
> 
> 时间：2012-11-17T20:25:53.520
> 
> 标签：ios

我已经阅读了许多堆栈溢出问题，人们要求终止他们的应用程序反对让它在后台运行。

我发现的主要答案是在我的 info.plist 中将应用程序不在后台运行 BOOL 设置为 YES

我已经完成了这项工作并清理了我的项目，但是当用户按下主页按钮时，我的应用程序仍然在后台运行。这个解决方案根本行不通。

当用户按下主页按钮时，我该怎么做才能让我的应用程序退出。

我的应用程序目前在 iOS 6 上运行。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:21:30.210

此答案是针对您的第一条评论，而不是原始问题。让您的 iPod 视图控制器注册`UIApplicationDidEnterBackgroundNotification`通知。实施应该停止音乐。这比选择让您的应用在暂停时终止要好得多。

```
// Put this in a good place like viewDidLoad 
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(backgrounding) name:UIApplicationDidEnterBackgroundNotification object:nil];

// Handle the notification
- (void)backgrounding {
    // app is leaving the foreground, stop the music
}

// In your dealloc method add:
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

# google-sheets - 谷歌查询功能

> ID：13434487
> 
> 赞同：1
> 
> 时间：2012-11-17T20:26:07.770
> 
> 标签：google-sheets, google-sheets-formula, array-formulas, google-sheets-query

我正在尝试将日志中的多条记录返回到最终的月度报表中……我正在使用查询功能，但没有得到多条记录，它只显示第一个匹配项。

我的表格是一个月中的 1-31 天，最后一张标有 717 的表格是 Unit #717 的月度报表。在工作表 717 上，我想显示来自工作表 1 到 31 的信息。其中 A=717 列，显示 B、C、D 列的值。目前，它只会显示第一场比赛。金额列应显示该行的相应费率。

我希望我的解释不会令人困惑，非常感谢任何帮助。谢谢。

这是[示例电子表格](https://docs.google.com/a/sizeup.ca/spreadsheet/ccc?key=0AlD0CkN7ppvRdFJ0MUVlR21ucWk3TnVTQ0NFNjBiRnc#gid=0)的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:37:57.853

当您连接 QUERY 函数的输出时，您实际上是在执行“数组计算”，并且您需要使用“数组计算启用程序”，否则您确实只会得到第一个适用的结果。

`=ArrayFormula(QUERY('1'!A3:G60;"select B where A=717")&QUERY('1'!A3:G60;"select C where A=717")&QUERY('1'!A3:G60;"select D where A=717"))`

# php - 依赖和实例化

> ID：13434489
> 
> 赞同：1
> 
> 时间：2012-11-17T20:26:27.330
> 
> 标签：php, oop, dependency-injection, autoload

我正在尝试将我的网站组件移动到类中。例如，下面的这个片段需要在多个文件中使用，但我不想复制和粘贴代码。

```
<?php
...
require "ActionManager.php";
require "Action.php";
require "includes/pdo.php";

$actionMan = new ActionManager();
$actionMan->setPDO($pdo);
$actionMan->setUserData($data);
echo $actionMan->getActions(3);
?> 
```

好的，我知道我可以使用 spl_autoload_register() 来摆脱前两个要求，但我认为我正在寻找的是某种依赖容器，这样我就不会最终重复这段代码，并且把自己搞砸了当它改变时。

此外，我发现自己在很多类中重复 setPDO() 和 setUserData() 方法。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:35:32.677

这些`require`语句不应该在那里，而是自动加载您的依赖项。[Anthony Ferrara 有一篇关于自动加载的成本和收益的](http://blog.ircmaxell.com/2012/07/is-autoloading-good-solution.html)很好的博客文章，他总结说，总体而言，自动加载是最好的解决方案。

对我来说，您的其余代码看起来有点像引导代码。您创建一个新实例`ActionManager`并通过 setter 方法注入两个依赖项。如果这确实是依赖层次结构顶层的引导代码，则可以使用`new`. 我不喜欢的事实是，显然您的依赖项是在所需文件中创建的，而您无法说出是否已经需要这些实例（没有延迟实例化的选项）。

根据您的整个应用程序，您可能想要考虑使用 DIC，但我不太喜欢它们。您可以在没有 DIC 的情况下进行正确的构造函数注入。实际上，大多数情况下人们最终会错误地使用 DIC 并重新创建 DI 应该解决的问题。

如果您要向我们展示更多您的架构，我们也许可以就如何处理常见依赖项提供更具体的建议。

# html - 如果不在移动设备上浏览，则重定向到基于 Web 的 URL

> ID：13434491
> 
> 赞同：1
> 
> 时间：2012-11-17T20:26:42.790
> 
> 标签：html, mobile, web, hyperlink, native

我正在寻找一个代码/链接，如果在安装了该应用程序的移动设备上浏览，它将启动本机 IOS 应用程序，但如果不在移动设备上或应用程序（facebook、youtube 等）重定向回基于 Web 的 URL。 .) 未安装。我可以通过 fb://action/ 启动本机应用程序，但如果未安装 fb 应用程序，我无法弄清楚如何让它重定向回基于 Web 的页面。无论如何，我都不是程序员，但我已经阅读了几天并且学到了很多东西！对此的任何见解对我来说意义重大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:36:41.373

你不会在那里绕过一些编程 - 你应该阅读 php，这是一种服务器端脚本语言，你可以用它做很多整洁的事情，例如找出浏览设备是否是移动的，并根据就像重定向一样，这就是您所需要的。

我曾经在网上找到过一些东西。我对其进行了调整，以使其适合您的需求。评论应该解释一切。

```
<?php
    // Get the user agent
$user_agent = $_SERVER['HTTP_USER_AGENT'];

// Create an array of known mobile user agents
// Most mobile devices send a pretty standard string that can be covered by
// one of these.  I believe I have found all the agents (as of the date above)
// that do not and have included them below.  If you use this function, you 
// should periodically check your list against the WURFL file, available at:
// http://wurfl.sourceforge.net/

$mobile_agents = Array(
    "240x320", "acer", "acoon", "acs-", "abacho", "ahong", "airness", "alcatel", "amoi",     "android", "anywhereyougo.com", "applewebkit/525", "applewebkit/532", "asus", "audio", "au-mic", "avantogo", "becker", "benq", "bilbo", "bird", "blackberry", "blazer", "bleu", "cdm-", "compal", "coolpad", "danger", "dbtel", "dopod", "elaine", "eric", "etouch", "fly " , "fly_", "fly-", "go.web", "goodaccess", "gradiente", "grundig", "haier", "hedy", "hitachi", "htc", "huawei", "hutchison", "inno", "ipad", "ipaq", "ipod", "jbrowser", "kddi", "kgt", "kwc", "lenovo", "lg ", "lg2", "lg3", "lg4", "lg5", "lg7", "lg8", "lg9", "lg-", "lge-", "lge9", "longcos", "maemo", "mercator", "meridian", "micromax", "midp", "mini", "mitsu", "mmm", "mmp", "mobi", "mot-", "moto", "nec-", "netfront", "newgen", "nexian", "nf-browser", "nintendo", "nitro", "nokia", "nook", "novarra", "obigo", "palm", "panasonic", "pantech", "philips", "phone", "pg-", "playstation", "pocket", "pt-", "qc-", "qtek", "rover", "sagem", "sama", "samu", "sanyo", "samsung", "sch-", "scooter", "sec-", "sendo", "sgh-", "sharp", "siemens", "sie-", "softbank", "sony", "spice", "sprint", "spv", "symbian", "tablet", "talkabout", "tcl-", "teleca", "telit", "tianyu", "tim-", "toshiba", "tsm", "up.browser", "utec", "utstar", "verykool", "virgin", "vk-", "voda", "voxtel", "vx", "wap", "wellco", "wig browser", "wii", "windows ce", "wireless", "xda", "xde", "zte"
);

// Pre-set $is_mobile to false.

$is_mobile = false;

// Cycle through the list in $mobile_agents to see if any of them
// appear in $user_agent.

foreach ($mobile_agents as $device) {

    // Check each element in $mobile_agents to see if it appears in
    // $user_agent.  If it does, set $is_mobile to true.

    if (stristr($user_agent, $device)) {

        $is_mobile = true;

        // break out of the foreach, we don't need to test
        // any more once we get a true value.

        break;
    }
}
//check whether mobile is true, and if so, redirect to mobile page
if($is_mobile){
    header("Location:http://www.mobilepage.com"); //replace domain
    exit;
}else{
    header("Location:http://www.notmobilepage.com"); //replace domain
    exit;
}
?> 
```

另请参阅[this](https://stackoverflow.com/questions/3817155/php-mobile-browser-detection)，它显示了不同的替代方案。

# winapi - CryptExportKey：如何从 PKCS#12 商店导出私钥？

> ID：13434493
> 
> 赞同：3
> 
> 时间：2012-11-17T20:26:56.253
> 
> 标签：winapi, cryptoapi

我需要从`PKCS#12`Windows 上以格式存储的证书中导出公共和私有 RSA 密钥。

我可以打开证书存储`CertOpenStore()`，然后找到证书`CertFindCertificateInStore()`并获取私钥`CryptAcquireCertificatePrivateKey()`。

它工作正常。然后我用它提取用户密钥`CryptGetUserKey()`也可以。

但是`CryptExportKey()`使用 blob 类型`PRIVATEKEYBLOB`失败。 `CryptSetKeyParam()`with`KP_PERMISSIONS`和 set 权限`CRYPT_EXPORT`也失败。

在这种情况下，如何获取所有 RSA 密钥对参数？

所有示例都`CryptGenKey()`用于创建然后导出密钥，但我需要将现有密钥对导出为简单的二进制形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:09:12.860

找到的解决方案：如果使用更具体`PFXImportCertStore()`的方法打开 PKCS#12 文件而不是`CertOpenStore()`使用`CERT_STORE_PROV_PKCS12`商店提供程序的通用文件，它接受标志`CRYPT_EXPORTABLE`和密钥可以用`CryptExportKey()`.

# c# - 以编程方式选择节点时执行导航 URL

> ID：13434498
> 
> 赞同：0
> 
> 时间：2012-11-17T20:27:09.623
> 
> 标签：c#, javascript, telerik

我正在使用 Telerik RadTreeView，并使用以下代码以编程方式添加节点

```
 subnode.NavigateUrl = "javascript:selectedNode('" + subnode.Text + "','" + "content" + "','" + myDataReader2["moduleId"] + "')";

RadTreeView1.Nodes.Add(subnode); 
```

因此，当我单击节点时，将执行 javascript 函数 selectedNode。但是，当我使用 ex 按钮以编程方式更改所选节点时：

```
 node.Focus();
 node.Selected = true; 
```

不执行 javascript。有没有办法执行它的 navigateurl 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:30:42.100

我建议使用树的 OnClientNodeClicked 事件。您可以在后面的代码中将节点的值设置为“moduleId”。

```
subnode.Value = myDataReader2["moduleId"];
RadTreeView1.Nodes.Add(subnode); 
```

然后在javascript中，在你的clientnodeclicked事件上，做这样的事情

```
function NodeClicked(sender, args) {
    var node = args.get_node();
    selectedNode(node.get_text(), "content", node.get_value());
} 
```

# javascript - jquery图像更改不起作用

> ID：13434500
> 
> 赞同：-1
> 
> 时间：2012-11-17T20:27:25.690
> 
> 标签：javascript, jquery

以下代码应该可以工作，但我似乎找不到它为什么不起作用的问题，我正在用谷歌浏览器测试它

```
<html>
    <head>
        <script type="text/javascript" src="js/jquery_1.7.1_min.js"></script>
        <script type="text/javascript">
            $('#unos').click(function() {
                $("#tre").attr('src', '/012/11/image2.jpg');
            });
        </script>
    </head>

    <body>
        <img id="tre" class="aligncenter" title="images" src="/012/11/image1.jpg" alt="" width="940" height="207" />
        <input id="unos" type="submit" name="change_src" value="change image" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:33:08.673

```
<html>
    <head>
        <script type="text/javascript" src="js/jquery_1.7.1_min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#unos').click(function() {
                    $("#tre").attr('src', '/012/11/image2.jpg');
                });
            });
        </script>
    </head>

    <body>
        <img id="tre" class="aligncenter" title="images" src="/012/11/image1.jpg" alt="" width="940" height="207" />
        <input id="unos" type="submit" name="change_src" value="change image" />
    </body>
</html> 
```

# php - PHP：关键字搜索：在字符串中查找子字符串

> ID：13434502
> 
> 赞同：2
> 
> 时间：2012-11-17T20:27:52.553
> 
> 标签：php, mysql

我正在建立一个漫画网站并实施了搜索。搜索最初使用图像标题...这很好用：

```
if (strtolower($input)==strtolower(substr($row['title'],0,strlen($input)))) { 
```

但现在我觉得很多人不会记得这个标题。所以我在数据库中添加了一个名为“keywords”的列，varchar [55]……我的测试条目是字符串“五、二、规则、食物、规则”。我想我可以替换`$row['title']`为`$row['keywords']`并且搜索仍然有效。

如果我从字符串的开头开始搜索，例如输入“五，seco ...”，它会起作用，但如果我从字符串的中间开始搜索，例如“second”或“rule”等，则不会。

关于如何使这项工作发挥作用的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T20:31:46.663

在漫画的专栏中这样做只会带来眼泪，因为它会破坏正常化。你应该做的是制作一个每个条目有一个单词的关键字表，然后是一个将关键字与漫画匹配的数据透视表。然后你可以做一个连接来找到所有匹配的漫画。

设置工作量更大，但从长远来看更灵活。

编辑：

关键字表：

```
id     keyword
1      x-men
2      action
3      mystery
4      batman
etc. 
```

漫画关键字表

```
comic_id    keyword_id
45          3
678         1
678         2
77          3
77          4
etc. 
```

第二个表（数据透视表）将漫画的 ID 与它们关联的关键字的 ID 匹配。这就是在大多数情况下应该建模的多对多关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T20:30:57.817

直接的解决方案是`stripos`改用：

```
if(stripos($input, $row['title']) !== false) {
    // row matches
} 
```

然而，这并不是一个很好的解决方案。将过滤卸载到您的数据库会更好，因此不匹配的行根本不必前往您的前端。如果您将关键字保留为逗号分隔的字段，那么[`LIKE`](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)or[`REGEXP`](http://dev.mysql.com/doc/refman/5.5/en/regexp.html#operator_regexp)将是一个不错的工具选择；如果您标准化您的数据库模式，以便使用单独的表对漫画与关键字的一对多关系进行建模，`comic_keywords`那么匹配将更加容易。

例如，假设`comic`有`id`和`comic_keywords`有`comic_id`和`keyword`，您可以选择匹配的漫画

```
SELECT DISTINCT(comic_id) FROM comic_keywords WHERE keyword = 'blah' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T20:33:19.150

您可以即时拆分列：

```
if (in_array(strtolower($input), explode(', ', $row['title']))) {
  /* found it */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T20:31:18.750

看起来你需要[Sphinx](http://sphinxsearch.com/docs/current.html)或（不太可能，但更容易设置）[MySQLs full-text search](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)。

# ruby - Ruby HTTP POST - 错误

> ID：13434507
> 
> 赞同：1
> 
> 时间：2012-11-17T20:28:33.537
> 
> 标签：ruby, http, post

有人可以向我解释为什么在执行此 POST 时出现此错误吗？我从[Ruby-docs 页面](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)中提取了片段。

```
undefined method `hostname' for #URI::HTTP:0x10bd441d8 URL:http://ws.mittthetwitapp.com/ws.phpmywebservice (NoMethodError) 
```

也许我错过了一个要求或什么？

```
require 'net/http'

uri= URI('http://ws.mywebservice.com/ws.php')
req = Net::HTTP::Post.new(uri.path)
req.set_form_data('xmlPayload' => '<TestRequest><Message>Hi Test</Message></TestRequest>')

res = Net::HTTP.start(uri.hostname, uri.port) do |http|
http.request(req)
end

case res
 when Net::HTTPSuccess, Net::HTTPRedirection
 # OK
else
 res.value
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:05:02.167

如果您使用的是 1.9.3 之前的 Ruby 版本，则应使用`uri.host`.

`URI#hostname`在 Ruby 1.9.3 中添加。它的**不同**`URI#host`之处在于它从 IPv6 主机名中删除了括号。对于非 IPv6 主机名，它的行为应该相同。

实现（来自[APIdock](http://apidock.com/ruby/v1_9_3_125/URI/Generic/hostname)）：

```
def hostname
  v = self.host
  /\A\[(.*)\]\z/ =~ v ? $1 : v
end 
```

# linux - apache、tomcat & mod_jk & mysql 的内存泄漏

> ID：13434509
> 
> 赞同：1
> 
> 时间：2012-11-17T20:28:56.040
> 
> 标签：linux, tomcat, memory-leaks, jvm, mod-jk

我在具有 2GB RAM 的 debian-lenny x64 服务器上运行带有 apache 2.2 和 mod_jk 1.2.26 的 tomcat 7。
我的服务器有一个奇怪的问题：每隔几个小时，有时（在负载下）每隔几分钟，我的 tomcat ajp-connector 就会因内存泄漏错误而暂停，但似乎这个错误也会影响系统的其他一些部分（例如其他一些正在运行的应用程序也停止工作）＆我必须重新启动服务器才能解决问题一段时间。
我已经检查了 catalina.out 好几天了，但似乎在暂停 ajp 并显示此消息之前没有唯一的错误模式：

```
INFO: Pausing ProtocolHandler ["ajp-bio-8009"] 
```

有时在暂停前会出现此消息：

```
Exception in thread "ajp-bio-8009-Acceptor-0" java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:597)... 
```

有时这个：

```
INFO: Reloading Context with name [] has started
Exception in thread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:597)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5482)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:230)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3847)
    at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:424)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1214)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1400)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1410)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1410)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1389)
    at java.lang.Thread.run(Thread.java:619)
java.sql.SQLException: null,  message from server: "Can't create a new thread (errno 11); if you are not out of available memory, you can consult the manual for a possible OS-dependent bug"... 
```

& 有时是与程序的其他部分相关的输出消息。
我检查了我的应用程序源代码，我猜它不会导致问题，我还使用 jConsole 检查了内存使用情况。流浪点是，当服务器出现故障时，在堆和非堆 jvm 内存空间上都会显示大量可用内存。正如我之前所说，在服务器崩溃后，许多其他应用程序也失败了，当我想重新启动它们时，它会给出一个资源暂时不可用的消息（我还检查了我的 limits.conf 文件）。
所以我真的很困惑这个严重的问题很多天了，我真的不知道了。所以，任何人都可以给我任何建议来解决这个复杂的& 未知问题？？？
这个错误最可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:31:56.557

使用 jvisualvm 检查 jvm 的堆使用情况。如果您看到它在一段时间内缓慢攀升，那就是内存泄漏。有时内存泄漏是短期的，最终会被清除，然后重新开始。

如果您看到锯齿模式，请在锯齿峰值附近进行堆转储，否则在 jvm 运行足够长的时间以产生 OOM 错误的高风险后进行堆转储。然后将该 .hprof 文件复制到另一台机器并使用 Eclipse MAT（内存分析工具）打开它并找出可能的罪魁祸首。您仍然需要花一些时间来关注数据结构中的 refs，并阅读一些 Javadocs 以找出正在使用的 Hashmap 或 List 正在失控的原因。排序选项对于关注最可能出现的问题区域也很有用。

没有简单的答案。

请注意，SUN jvm 还包含一个命令行工具，可以触发 heapdump。如果你有一个很好的分析器也可以使用，因为内存泄漏通常出现在一段经常执行的代码中，因此会在分析器中显示为热点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:00:57.450

我终于找到了问题所在：实际上并不是内存泄漏，而是 VPS 允许线程数的限制导致了问题。我的服务器是一个 Xen vps，默认限制为 256 个线程，所以当它达到允许的最大线程数时，主管被杀死了一些正在运行的线程（这是停止我的一些正在运行的进程的原因）。通过将允许的线程数增加到512，问题完全解决了（当然如果我在tomcat设置中增加maxThreads，很明显问题会再次出现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T23:17:36.467

您对进程数量的限制是多少？

使用 uname -a 检查它们并检查最大进程数。如果是 1024，则增加它。

此外，检查您用来启动它的用户的相同内容（例如，如果您使用nobody 用户作为您的东西，请运行 su -c "ulimit -a" -s /bin/sh nobody 以查看实际内容用户视为限制）。那应该向您表明一个问题（几天前就遇到过，完全错过了检查）。

在这种情况开始发生的那一刻，您还可以使用“ps -eLf | wc -l”计算该用户的所有正在运行的线程和进程（或者甚至更好地使用 rrdtool 或其他东西来监视它），这将使您返回简单系统上运行的所有进程和线程的计数。此信息以及针对所有特定用户的限制应该可以解决您的问题。

# java - 添加多项式

> ID：13434510
> 
> 赞同：-1
> 
> 时间：2012-11-17T20:30:04.950
> 
> 标签：java, unit-testing, junit, tdd, polynomial-math

我需要一些帮助。我正在做测试驱动的开发。这些是测试：

```
@Test public void add01() throws TError { assertEquals(new Term(10,5),  new Term(4,5).add(new Term(6,5))); }
@Test public void add02() throws TError { assertEquals(new Term(6,5),   new Term(0,5).add(new Term(6,5))); }
@Test public void add03() throws TError { assertEquals(new Term(2,5),   new Term(-4,5).add(new Term(6,5))); }
@Test public void add04() throws TError { assertEquals(new Term(10,0),  new Term(4,0).add(new Term(6,0))); }
@Test public void add05() throws TError { assertEquals(new Term(4,5),   new Term(4,5).add(new Term(0,5))); }
@Test public void add06() throws TError { assertEquals(new Term(-2,5),  new Term(4,5).add(new Term(-6,5))); }

@Test (expected = IncompatibleTerms.class)
public void add07() throws TError { t = new Term(4,5).add(new Term(6,0)); }

@Test (expected = CoefficientOverflow.class)
public void add08() throws TError { t = new Term(min,4).add(new Term(-1,4)); }

@Test public void add09() throws TError { assertEquals(new Term(min,4), new Term(min+1,4).add(new Term(-1,4))); }
@Test public void add10() throws TError { assertEquals(new Term(-11,4), new Term(-10,4).add(new Term(-1,4))); }
@Test public void add11() throws TError { assertEquals(new Term(-2,4),  new Term(-1,4).add(new Term(-1,4))); }
@Test public void add12() throws TError { assertEquals(new Term(-1,4),  new Term(0,4).add(new Term(-1,4))); }
@Test public void add13() throws TError { assertEquals(Term.Zero,       new Term(1,4).add(new Term(-1,4))); }
@Test public void add14() throws TError { assertEquals(new Term(9,4),   new Term(10,4).add(new Term(-1,4))); }
@Test public void add15() throws TError { assertEquals(new Term(max,4), new Term(max-1,4).add(new Term(1,4))); }

@Test (expected = CoefficientOverflow.class)
public void add16() throws TError { t = new Term(max,4).add(new Term(1,4)); }

//Using domain-specific knowledge:  addition should be commutative

@Test public void add17() throws TError { assertEquals(new Term(-1,2).add(new Term(1,2)),       new Term(1,2).add(new Term(-1,2))); }
@Test public void add18() throws TError { assertEquals(new Term(min+1,2).add(new Term(-1,2)),   new Term(-1,2).add(new Term(min+1,2))); }
@Test public void add19() throws TError { assertEquals(new Term(min,2).add(Term.Zero),      Term.Zero.add(new Term(min,2))); }
@Test public void add20() throws TError { assertEquals(new Term(min,0).add(Term.Unit),      Term.Unit.add(new Term(min,0))); }
@Test public void add21() throws TError { assertEquals(new Term(max,0).add(Term.Zero),      Term.Zero.add(new Term(max,0))); }
@Test public void add22() throws TError { assertEquals(new Term(max-1,2).add(new Term(1,2)),    new Term(1,2).add(new Term(max-1,2))); }
@Test public void add23() throws TError { assertEquals(new Term(max,2).add(new Term(min,2)),    new Term(min,2).add(new Term(max,2))); } 
```

到目前为止，这是我在“Andrej Gajduk”的帮助下添加的方法。

```
public Term add(Term that) throws CoefficientOverflow, IncompatibleTerms {
    if (this.expo != that.expo) throw new IncompatibleTerms();
    return new Term (this.coef + that.coef,expo);
} 
```

这些是失败的测试= 2、5、8、12、16、19、21。但我对测试17-23有疑问；我知道其中一些通过了，但我认为它们不应该通过，因为这就像 x + y = y + x，但我不确定如何实现它。

我需要一些关于为什么这个测试失败的帮助/指导。

对于测试 8 和 16，我尝试了下面的代码。它完成了这项工作，但随后在其他测试中产生了更多错误。那么所有的失败都变成了 2, 5, 8, 12, 16, 19, 21 + 20, 23 （两个额外的失败）

```
if (this.coef == Integer.MIN_VALUE || that.coef == Integer.MIN_VALUE) throw new CoefficientOverflow();
if (this.coef == Integer.MAX_VALUE || that.coef == Integer.MAX_VALUE) throw new CoefficientOverflow(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:56:03.843

此链接显示了一种检测溢出的不同方法：http: [//mindprod.com/jgloss/gotchas.html#OVERFLOW](http://mindprod.com/jgloss/gotchas.html#OVERFLOW)

我认为这是因为当 coef 为 0 或整个语句被假定为零时，因此您需要检查这一点并使用零的替代方法

```
if(this.coef ==0)
{//return Term t = new Term(that.coef, that.expo);}

else
{//return Term t = new Term(this.coef, this.expo);}
} 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:58:08.783

你的`equals`方法不正确。请更新如下：

```
@Override
public boolean equals(Object that) {
    if (that == null) {
        return false;
    }else if (this.getClass() != that.getClass()) {
        return false;
    }else if (this == that) {
        return true;
    }else{
        Term term = (Term) that;
        if ((term.coef) == (this.coef) && (term.expo) == (this.expo)) {
            return true;
        }
    }
    return false;
} 
```

为了让你通过大部分测试用例，更新`add`方法如下：

```
public Term add(Term that) throws IncompatibleTerms, CoefficientOverflow{
    //handle addition with term zero
        if(this.equals(Term.Zero)){
        return that;
    }else if(Term.Zero.equals(that)){
        return this;
    }

    if (this.expo != that.expo) throw new IncompatibleTerms();
    if((this.coef>= 0 && that.coef >= 0 && this.coef + that.coef <0) ||
            (this.coef<= 0 && that.coef <= 0 && this.coef + that.coef >0)){
                         throw new CoefficientOverflow();
        }    
    return new Term (this.coef + that.coef,expo);
} 
```

# python - Python 诅咒 initscr 错误

> ID：13434514
> 
> 赞同：3
> 
> 时间：2012-11-17T20:30:28.957
> 
> 标签：python, curses

我正在尝试启动

```
screen = curses.initscr() 
```

但它失败并返回

```
File "C:\Python32\lib\curses\__init__.py", line 31, in initscr
fd=_sys.__stdout__.fileno())
AttributeError: 'NoneType' object has no attribute 'fileno' 
```

这是我的系统 Python 3.2.3（默认，2012 年 4 月 11 日，07:12:16）[MSC v.1500 64 位（AMD64）] 在 win32

这是我第一次在这台电脑上运行 python，它是 Windows 7 64bit。

这与我的操作系统有关吗？无论如何我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:34:54.953

您不能`curses`在 Windows 上使用该模块；显然有 DOS 和 OS/2 端口，但它主要是一个仅限 POSIX 的库。

您必须使用特定于 Windows 的端口，例如[`wcurses`](http://code.google.com/p/wcurses/)支持 Windows 的第三方项目，例如[PDCurses](http://pdcurses.sourceforge.net/)，或者您可以尝试该[`console`模块](http://www.effbot.org/zone/console-handbook.htm)（后者以类似方式驱动 Windows CMD 控制台）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T00:59:29.700

几乎所有 Windows 上的 Python 版本都有 curses 扩展下载。我和 Pieters 有同样的错误，但它源于我试图从 Idle 运行程序的事实。显然，当使用像 curses 这样的扩展时，这不起作用。只需左键单击您的 .py 程序，它将自己调用 Python 及其扩展，此错误就会消失。

# regex - 对 127.0.0.1 使用 .htaccess 从 url 中删除 index.php

> ID：13434519
> 
> 赞同：0
> 
> 时间：2012-11-17T20:31:13.417
> 
> 标签：regex, .htaccess

我有我的网址以这种方式

```
http://127.0.0.1:420/github/myproject/users 
```

我的 .htacess 文件有以下代码

```
<IfModule mod_rewrite.c>
DirectoryIndex index.php
RewriteEngine on
RewriteBase /github/myproject
RewriteCond $1 !^(index\.php|images|style|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
</IfModule> 
```

谁能帮我编写适合我的网址的 RewriteRule 表达式？感谢您提前提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:40:41.720

只需在顶部添加这一行：

```
RewriteRule ^/github/myproject/(.*)$ /github/myproject/index.php/$1 [NC] 
```

所以会变成：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^/github/myproject/(.*)$ /github/myproject/index.php/$1 [NC]
    DirectoryIndex index.php
    RewriteBase /github/myproject
    RewriteCond $1 !^(index\.php|images|style|js|robots\.txt|favicon\.ico)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
</IfModule> 
```

请告诉我它是否适合你！

# ruby-on-rails - 找不到 id 时整个控制器的一般救援 - RoR

> ID：13434523
> 
> 赞同：15
> 
> 时间：2012-11-17T20:31:25.440
> 
> 标签：ruby-on-rails, exception, activerecord, rescue

我偶然发现了我的应用程序查找数据库中不存在的 id 的情况。抛出异常。当然，对于任何 Web 开发人员来说，这都是相当标准的情况。

多亏了[这个答案](https://stackoverflow.com/questions/2336593/rescue-from-activerecordrecordnotfound-in-rails/2337906#2337906)，我知道使用救援可以很好地处理这种情况，如下所示：

```
def show
  @customer = Customer.find(params[:id])
  rescue ActiveRecord::RecordNotFound #customer with that id cannot be found
    redirect_to action: :index        #redirect to index page takes place instead of crashing
end 
```

如果找不到客户，则将用户重定向到索引页面。这绝对没问题。

现在，这一切都很好，但我需要在显示、编辑、销毁等操作中进行相同的救援尝试，即*每个*需要特定 ID 的控制器方法。

话虽如此，**这是我的问题：** 有没有办法通常告诉我的控制器，如果它在任何方法中都找不到 id，它应该重定向到索引页面（或者，通常，执行特定任务)?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-17T20:38:48.213

您必须`rescue_from`用于此任务。请参阅[动作控制器概述指南中的示例](http://guides.rubyonrails.org/action_controller_overview.html#rescue_from)

```
class ApplicationController < ActionController::Base
  rescue_from ActiveRecord::RecordNotFound, :with => :record_not_found

  private

  def record_not_found
    redirect_to action: :index
  end
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-17T20:38:05.977

Rails 有一个内置的[`rescue_from`](http://apidock.com/rails/v3.2.8/ActiveSupport/Rescuable/ClassMethods/rescue_from)类方法：

```
class CustomersController < ApplicationController
  rescue_from ActiveRecord::RecordNotFound, with: :index
  ...
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T20:45:42.040

如果您要在单个控制器中执行此操作（而不是在每个控制器中全局执行此操作），那么这里有几个选项：

您可以使用 before_filter 来设置您的资源：

```
class CustomerController < ApplicationController
  before_filter :get_customer, :only => [ :show, :update, :delete ]

  def show
  end

  private

  def get_customer
    @customer = ActiveRecord.find(params[:id])
    rescue ActiveRecord::RecordNotFound
      redirect_to :action => :index
  end
end 
```

或者您可以改用一种方法。我一直在朝着这个方向前进，而不是在视图中使用实例变量，它也可以帮助您解决问题：

```
class CustomerController < ApplicationController
  def show
    # Uses customer instead of @customer
  end

  private

  def customer
    @customer ||= Customer.find(params[:id])
    rescue ActiveRecord::RecordNotFound
      redirect_to :action => :index
  end
  helper_method :customer
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T20:44:35.477

在某些情况下，我建议您使用`Model.find_by_id(id)`而不是`Model.find(id)`. 不是抛出异常，而是`.find_by_id`返回`nil`。如果找不到记录。

只要确保检查 nils 以避免`NoMethodError`！

PS 对于它的价值，`Model.find_by_id(id)`在功能上等同于`Model.where(id: id)`，如果你愿意，它可以让你建立一些额外的关系。

# c# - Datagrid - 不要在每次属性更改时更新，仅在保存时更新

> ID：13434528
> 
> 赞同：1
> 
> 时间：2012-11-17T20:31:57.740
> 
> 标签：c#, wpf, mvvm

我有一个数据网格，绑定到一个列表：

```
<DataGrid HorizontalAlignment="Left" SelectedItem="{Binding CurrentPlayer}" Height="374" Margin="121,22,0,0" RowHeaderWidth="0" VerticalAlignment="Top" Width="836" ItemsSource="{Binding Players}" AutoGenerateColumns="false" IsReadOnly="True" SelectionMode="Single" > 
```

如您所见，当一个项目被选中时，它存储在 CurrentPlayer 属性中。该对象的属性绑定到用户可以编辑值的文本框。

我遇到的问题是：由于绑定，当用户编辑信息（编辑玩家姓名，地址，..）时，即使用户没有按下保存按钮，更改也会立即显示在数据网格中.

我显然不希望这样，因为还有一个取消选项和验证。我知道你可以绑定一次或一种方式，但是当用户按下保存按钮时，更改应该显示。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:43:16.957

一种可能的解决方案：

有一个视图模型的基类：

```
class BaseClassViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            Debug.Print(info);
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

将所选对象的每个字段的每个属性设置为以下形式的 get set 属性：

```
 public string FieldInObject
    {
        get
        {
            return _FieldInObject;
        }
        set
        {
            if (value != _FieldInObject)
            {
                _FieldInObject = value;
                //do not add this code here
                //NotifyPropertyChanged("CurrentPlayer");
            }
        }
    } 
```

当用户按下保存按钮然后使用

```
NotifyPropertyChanged("CurrentPlayer");
NotifyPropertyChanged("<Property 1 in currentPlayer>"); 
 .....
NotifyPropertyChanged("<Property n in currentPlayer"); 
```

它应该通知 WPF 更新 CurrentPlayer。

我希望这有点可以理解。只需使用 NotifyPropertyChanged 向 WPF 发出信号以更新绑定到该属性的字段。

# java - Embedded Jetty：如何使用包含在 .jar 中的 .war，Jetty 从该 .jar 启动？

> ID：13434538
> 
> 赞同：5
> 
> 时间：2012-11-17T20:33:54.580
> 
> 标签：java, maven, jetty, embedded-jetty

我正在尝试生成一个包含将启动 Jetty的*main()的 .jar。*

我的问题是我希望将 Jetty 加载的 .war***包含在同一个 .jar***中。

我已经能够创建包含 .war 的 .jar ：

**在 POM.xml 中：**

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <finalName>myApp</finalName>
        <appendAssemblyId>false</appendAssemblyId>
        <archive>
            <manifest>
                <mainClass>com.myApp.Server</mainClass>
            </manifest>
        </archive>
        <descriptors>
            <descriptor>src/main/resources/executable-jar-assembly.xml</descriptor>
        </descriptors>
    </configuration>
    <executions>
        <execution>
            <id>make-my-jar-with-dependencies</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

**可执行 jar-assembly.xml ：**

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">

<id>jar-with-dependencies-and-war</id>
<formats>
<format>jar</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<dependencySets>
    <dependencySet>
        <outputDirectory>/</outputDirectory>
        <useProjectArtifact>false</useProjectArtifact>
        <unpack>true</unpack>
        <scope>runtime</scope>
    </dependencySet>
</dependencySets>
<fileSets>
    <fileSet>
        <directory>target/classes/</directory>
        <outputDirectory>/</outputDirectory>
    </fileSet>
    <fileSet>
        <directory>target/</directory>
        <includes>
            <include>
                myApp.war
            </include>
        </includes>
        <outputDirectory>/</outputDirectory>
    </fileSet>
</fileSets> 
```

**在 Jetty 中设置战争的代码：**

```
handler.setWar("myApp.war"); 
```

**...我也试过：**

```
URL res = Server.class.getResource("myApp.war");
handler.setWar(res.toExternalForm()); 
```

**... 和 ：**

```
URL res = Thread.currentThread().getContextClassLoader().getSystemResource("myApp.war");
handler.setWar(res.toExternalForm()); 
```

但没有任何效果！

使用最后一个示例代码启动 Jetty，服务器*似乎*可以正确启动，但没有请求工作。配置明显不对。

我知道有一些解决方法可以使 .war 本身可执行，但我想让“ *.jar 中的 .war* ”工作。

知道如何配置 .war 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:46:51.623

我在 2009-10 年为一个特定的应用程序玩了很多。

我发现的问题是，当您在 jar 中嵌入战争时，URI 最终可能无法与`jar:`尝试访问战争文件的默认 uri 处理程序一起使用。

我找到了许多解决方案：

1.  告诉码头将战争文件提取/分解到临时目录中

2.  实现你自己的 URI 处理程序（这是一个有趣的练习，但如果你需要自己支持代码，我不建议这样做）

3.  使war 文件成为可执行的war 文件，例如Jenkins 使用的相同类型的技巧。为此，您将使用 war 文件覆盖码头服务器类和主类。然后你只需将jetty 指向jar 文件本身作为war 文件。Jetty 不在乎文件名是否以`.war`

这三个人都在 Jetty 7 上为我工作。我怀疑情况会保持不变。

最后我选择了选项 3。它是最简单的，不会在用户系统上留下临时文件，而且启动速度最快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T06:39:20.873

我已经像你一样尝试在 jar 中使用 war 文件，但码头似乎为我提供了一个目录列表，其中包含 war 文件作为唯一的条目，我觉得这很奇怪......不确定我是否在那里做错了什么......

我发现到目前为止，在 jar 文件内的目录中分解 war 文件似乎对我有用。我以后可能会发现一些奇怪的东西，但在我这样做之前，我会坚持下去。

# android - 数据库在 pc bt 上运行良好而不是在设备上

> ID：13434542
> 
> 赞同：0
> 
> 时间：2012-11-17T20:34:35.140
> 
> 标签：android

我正在做一个测验应用程序。为问题创建的数据库正在 pc 上运行，但是当我在 android 手机中传输 .apk 文件时，它没有从数据库中获取任何数据并显示强制关闭。

在此站点上搜索后，我发现将数据库文件放在资产文件夹中，但这不起作用。

我无法识别为什么应用程序没有在手机中运行？下面是数据库文件的代码。如果有机会在设备上运行应用程序，请告诉我。

```
public class DatabaseFile extends SQLiteOpenHelper {
private static String DB_PATH = "/data/data/com.example.quizproject/databases/";
public static final String DATABASE_NAME="Quiz.db";
public static final String QUES="ques";
public static final String OP1="op1";
public static final String OP2="op2";
public static final String OP3="op3";
public static final String ANS="ans";
public static final String NAME="name";
public static final String CANS="cans";
public static final String SCORE="score";
private final Context myContext;
private SQLiteDatabase myDataBase; 

public DatabaseFile(Context context) {

super(context, DATABASE_NAME, null, 1);
this.myContext = context;
}

public void createDataBase() throws IOException{

     boolean dbExist = checkDataBase();

     if(dbExist){
      //do nothing - database already exist
     }else{
         this.getReadableDatabase();

         try {

       copyDataBase();

      } catch (IOException e) {

          throw new RuntimeException(e);

         }
     }

    }

    private boolean checkDataBase(){

     SQLiteDatabase checkDB = null;

     try{
      String myPath = DB_PATH + DATABASE_NAME;
      checkDB = SQLiteDatabase.openDatabase(myPath, null,   SQLiteDatabase.OPEN_READONLY);

     }catch(SQLiteException e){

      //database does't exist yet.

     }

     if(checkDB != null){

      checkDB.close();

     }

     return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException{

     //Open your local db as the input stream
     InputStream myInput = myContext.getAssets().open(DATABASE_NAME);

     // Path to the just created empty db
     String outFileName = DB_PATH + DATABASE_NAME;

     //Open the empty db as the output stream
     OutputStream myOutput = new FileOutputStream(outFileName);

     //transfer bytes from the inputfile to the outputfile
     byte[] buffer = new byte[1024];
     int length;
     while ((length = myInput.read(buffer))>0){
      myOutput.write(buffer, 0, length);
     }

     //Close the streams
     myOutput.flush();
     myOutput.close();
     myInput.close();

    }

    public void openDataBase() {

     //Open the database
        String myPath = DB_PATH + DATABASE_NAME;
     myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }
    @Override
     public synchronized void close() {
             if(myDataBase != null)
              myDataBase.close();
             super.close();
     }
public void onCreate(SQLiteDatabase db) {

//db.execSQL("CREATE TABLE quiztable (_id INTEGER PRIMARY KEY AUTOINCREMENT," +
    //  "ques TEXT, op1 TEXT, op2 TEXT, op3 TEXT, ans TEXT);");

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

} 
```

# r - 包含带有 R 包的命令行脚本

> ID：13434543
> 
> 赞同：11
> 
> 时间：2012-11-17T20:34:45.140
> 
> 标签：r, package, rscript, r-package

我有兴趣为我正在创作的名为 Slidify 的 R 包提供命令行界面。它使用`Rscript`并且我认为这将使它成为跨平台的。脚本存储在子目录中`inst/slidify`。为了使用任何目录中的脚本，我`.bash_profile`像在 Mac 上一样将其路径添加到 my 中。

我的问题是

1.  我应该如何以自动化的跨平台方式处理脚本的安装？
2.  如何确保在此过程中保留文件权限？
3.  脚本的 shebang 行应该是什么？我目前正在使用

    `#!/usr/bin/Rscript --vanilla --slave`

我将不胜感激有关如何处理此问题的指针以及已经执行此操作的 R 包的任何示例。只是为了确保，我清楚这将如何工作，用户只需从命令行`slides.Rmd`运行即可生成幻灯片。`slidify generate slides.Rmd`

更新：

这是我从命令行在 Mac 上安装它的方法。我使用 37 个信号的优秀[子](https://github.com/37signals/sub)库来创建脚本。

`echo "$(path/to/clidir/slidify init -)" >> ~/.bash_profile exec bash`

两个后续问题

1.  我可以将这些命令打包成 R 函数`install_slidify_cli`吗？
2.  如何为 Windows 用户镜像这些命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T21:03:18.460

Lovin'`slidify`所以很乐意提供帮助。

但简而言之，你不能。

R 包根本无法安装在`$R_HOME`所选的库文件夹之外。将脚本放入包中，并告诉用户复制它。如果有更好的方法，[带有](http://dirk.eddelbuettel.com/code/littler.html)前身/替代品的更小的包装`Rscript`将长期使用它，并且`roxygen`/`roxygen2`也将运送一些东西。

# oracle - 如何在 Oracle 中使用 WSO2 数据服务插入日期时间

> ID：13434550
> 
> 赞同：1
> 
> 时间：2012-11-17T20:35:44.117
> 
> 标签：oracle, date, xsd, wso2, wso2dss

我需要在 Oracle 日期字段中使用 WSO2 数据服务插入日期时间信息。我创建了一个 Oracle 过程来插入一条记录。

WSO2 地图考虑：

```
< param name="execution" sqlType="DATE" ordinal="17" /> 
```

为了执行 DS，我使用了：

```
< xs:execution xmlns:xs="ds.exec.com.br">2011-04-01T08:10:00</xs:execution> 
```

我尝试使用这样的查询：

```
INSERT INTO xxxx (execution) 
     VALUES (to_date(p_execution,'yyyy-mm-dd hh24:mi:ss')); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:08:54.280

您应该能够使用“TIMESTAMP”作为输入映射的“sqlType”，如下所示。

```
<param name="execution" sqlType="TIMESTAMP" ordinal="17"/> 
```

# go - Go 中的 Hotfolder / 等待文件写入

> ID：13434555
> 
> 赞同：5
> 
> 时间：2012-11-17T20:36:31.740
> 
> 标签：go

我正在尝试将目录设置为 Go 中的热文件夹。一旦文件完成写入该目录，就应该调用一个函数。

现在我遇到了[https://github.com/howeyc/fsnotify](https://github.com/howeyc/fsnotify)这似乎是这样一个热文件夹的一个很好的构建块。

我的问题是 fsnotify 在写入期间会发出大量“文件更改”事件，但在完成时不会发出，所以我认为不可能通过这种方式查看进程是否已完成写入文件。

所以我会想到“在最后一个'文件更改'事件后等待一秒钟，然后运行我的函数。但我不确定这是否是解决问题的最佳方法，我不确定如何将它干净地集成到主事件循环（来自给定的 github 页面）：

```
for {
    select {
    case ev := <-watcher.Event:
        log.Println("event:", ev)
    case err := <-watcher.Error:
        log.Println("error:", err)
    }
} 
```

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T20:55:06.230

以下代码将等待至少一秒钟没有收到任何事件，然后调用`f()`.

```
for {
    timer := time.NewTimer(1*time.Second)

    select {
    case ev := <-watcher.Event:
        log.Println("event:", ev)
    case err := <-watcher.Error:
        log.Println("error:", err)
    case <-timer.C:
        f()
    }

    timer.Stop()
} 
```

# java - 在外部单击时自动关闭 JFrame 窗口

> ID：13434558
> 
> 赞同：3
> 
> 时间：2012-11-17T20:37:39.923
> 
> 标签：java, swing, jframe

我在这里有一个相当基本的 JFrame，我想让窗口在用户单击它外部时自动关闭。当用户在窗口外点击时是否可以关闭窗口（通过某种方式检测窗口外的点击？）。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ExampleJFrame {

    public static void main(String[] args) {
        JFrame frame = new JFrame("How can I make this window close when I click outside it?");
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        JLabel jlbempty = new JLabel("");
        jlbempty.setPreferredSize(new Dimension(200, 200));
        frame.getContentPane().add(jlbempty, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T20:42:21.243

检测框架外的点击很困难，因为它可能是对 java 无法访问的任何其他应用程序的点击。

您可以尝试`FocusListener`如下所示

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.WindowConstants;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;

public class AutoCloseFrameDemo {
  public static void main( String[] args ) {
    final JFrame frame = new JFrame( "Test" );
    frame.addFocusListener( new FocusListener() {
      private boolean gained = false;
      @Override
      public void focusGained( FocusEvent e ) {
        gained = true;
      }

      @Override
      public void focusLost( FocusEvent e ) {
        if ( gained ){
          frame.dispose();
        }
      }
    } );
    frame.add( new JLabel( "testlabel" ) );

    frame.pack();
    frame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
    frame.setVisible( true );
  }
} 
```

这适用于这个简单的用例。尚不确定如果将例如 a`JTextField`放在框架中并且文本字段获得焦点会发生什么。如果这也导致`JFrame`焦点松动，那么您的应用程序将毫无用处。

**编辑**

更强大的解决方案可能是将侦听器附加到`KeyboardFocusManager`

```
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.WindowConstants;
import java.awt.BorderLayout;
import java.awt.KeyboardFocusManager;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyVetoException;
import java.beans.VetoableChangeListener;

public class AutoCloseFrameDemo {
  public static void main( String[] args ) {
    final JFrame frame = new JFrame( "Test" );

    KeyboardFocusManager.getCurrentKeyboardFocusManager().
        addVetoableChangeListener( "focusedWindow",
                                   new VetoableChangeListener() {
                                     private boolean gained = false;

                                     @Override
                                     public void vetoableChange( PropertyChangeEvent evt ) throws PropertyVetoException {
                                       if ( evt.getNewValue() == frame ) {
                                         gained = true;
                                       }
                                       if ( gained && evt.getNewValue() != frame ) {
                                         frame.dispose();
                                       }
                                     }
                                   } );

    frame.add( new JTextField( 10 ), BorderLayout.NORTH );
    frame.add( new JTextField( 10 ), BorderLayout.SOUTH );

    frame.pack();
    frame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
    frame.setVisible( true );
  }
} 
```

这允许在框架中的不同文本字段之间切换焦点。

# mysql - 选择用户并根据相关表中是否存在行进行透视

> ID：13434560
> 
> 赞同：3
> 
> 时间：2012-11-17T20:37:52.723
> 
> 标签：mysql, sql

我是 sql 新手，我真的试图自己解决这个问题，但没有成功......希望有人能提供帮助。

我有 3 张桌子：

身份验证用户

```
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| username     | varchar(30)  | NO   | UNI | NULL    |                |
| first_name   | varchar(30)  | NO   |     | NULL    |                |
| last_name    | varchar(30)  | NO   |     | NULL    |                |
| email        | varchar(75)  | NO   |     | NULL    |                |
| password     | varchar(128) | NO   |     | NULL    |                |
| is_staff     | tinyint(1)   | NO   |     | NULL    |                |
| is_active    | tinyint(1)   | NO   |     | NULL    |                |
| is_superuser | tinyint(1)   | NO   |     | NULL    |                |
| last_login   | datetime     | NO   |     | NULL    |                |
| date_joined  | datetime     | NO   |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

目录礼物

```
+-------------+----------------------+------+-----+---------+----------------+
| Field       | Type                 | Null | Key | Default | Extra          |
+-------------+----------------------+------+-----+---------+----------------+
| id          | int(11)              | NO   | PRI | NULL    | auto_increment |
| name        | varchar(48)          | NO   |     | NULL    |                |
| slug        | varchar(50)          | NO   | UNI | NULL    |                |
| amount      | smallint(5) unsigned | NO   |     | 0       |                |
| points      | smallint(5) unsigned | NO   |     | 500     |                |
| created_at  | datetime             | NO   |     | NULL    |                |
| updated_at  | datetime             | NO   |     | NULL    |                |
| active      | tinyint(1)           | NO   |     | NULL    |                |
| image       | varchar(100)         | YES  |     | NULL    |                |
| description | longtext             | YES  |     | NULL    |                |
+-------------+----------------------+------+-----+---------+----------------+ 
```

目录订单

```
+------------+----------------------+------+-----+---------+----------------+
| Field      | Type                 | Null | Key | Default | Extra          |
+------------+----------------------+------+-----+---------+----------------+
| id         | int(11)              | NO   | PRI | NULL    | auto_increment |
| user_id    | int(11)              | NO   | MUL | NULL    |                |
| status     | smallint(5) unsigned | NO   |     | 0       |                |
| present_id | int(11)              | NO   | MUL | NULL    |                |
| address_id | int(11)              | NO   | MUL | NULL    |                |
| created_at | datetime             | NO   |     | NULL    |                |
| updated_at | datetime             | NO   |     | NULL    |                |
+------------+----------------------+------+-----+---------+----------------+ 
```

我正在尝试选择一个用户并检查他是否订购了特定的礼物并相应地写入该行，然后检查另一个，另一个等等。

基本上我希望结果看起来像这样：

```
id present1 present2 present3 present4
1 1 0 0
2 1 1 1
3 0 0 0
4 1 0 1 
```

其中 1 是用户在该类型的礼物上下订单，0 是他没有下订单。

我的查询看起来像这样

```
select auth_user.id, case when present_id = 1 from auth_user 
left join catalog_orders on catalog_orders.user_id = auth_user.id 
left join catalog_presents on catalog_presents.id = catalog_orders.present_id 
```

问题是用户的所有不同订单都按这样的多行排序：

```
id present1 present2 present3 present4
1 1 0 0
2 1 0 0
2 0 1 0
2 0 0 1
3 0 0 0
4 1 0 0
4 0 0 1 
```

有人可以帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:42:47.050

这是一种数据透视表。

您走在正确的道路上，但您需要将结果合并到每个用户的一行。

使用聚合`MAX()`per`auth_user.id`将它们折叠成一行。为每个礼物`CASE`提供一个 0 或 1 ，然后`MAX()`为`auth_user.id``1``0`

```
SELECT
  auth_user.id,
  MAX(CASE WHEN present_id = 1 THEN 1 ELSE 0 END) AS present1,
  MAX(CASE WHEN present_id = 2 THEN 1 ELSE 0 END) AS present2,
  MAX(CASE WHEN present_id = 3 THEN 1 ELSE 0 END) AS present3,
  MAX(CASE WHEN present_id = 4 THEN 1 ELSE 0 END) AS present4
FROM
   auth_user
   LEFT JOIN catalog_orders on catalog_orders.user_id = auth_user.id 
   LEFT JOIN catalog_presents on catalog_presents.id = catalog_orders.present_id
GROUP BY auth_user.id
ORDER BY auth_user.id 
```

特别是对于 MySQL，您不需要，`CASE`因为布尔比较`present_id = 1`将自行返回 1 或 0。但是，这不能移植到所有其他 RDBMS。上述方法是优选的。

```
SELECT
  auth_user.id,
  /* MySQL ok, not all other RDBMS will do this - boolean comparison returns 1 or 0 */
  MAX(present_id = 1) AS present1,
  MAX(present_id = 2) AS present2,
  MAX(present_id = 3) AS present3,
  MAX(present_id = 4) AS present4
FROM
   auth_user
   LEFT JOIN catalog_orders on catalog_orders.user_id = auth_user.id 
   LEFT JOIN catalog_presents on catalog_presents.id = catalog_orders.present_id
GROUP BY auth_user.id
ORDER BY auth_user.id 
```

# r - 如何更改 R 中所有后续绘图的字体？

> ID：13434567
> 
> 赞同：1
> 
> 时间：2012-11-17T20:38:41.373
> 
> 标签：r, fonts, plot, histogram, par

我知道如何为具体绘图指定字体，但有没有办法为所有后续绘图、直方图等指定一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:58:58.967

使用`par`. 在以下示例中，我假设您想要更改`family`设置，但请参阅`?par`您可以更改的图表参数的详尽列表：

```
old.params <- par(family = "mono")

plot(cars)
hist(islands) 
```

完成后，您可以将所有内容重置为旧默认值：

```
par(old.params) 
```

# haskell - 在没有 Monoid 实例的情况下，如何处理 Control.Lens.Indexed 中 at 的 Maybe 结果

> ID：13434568
> 
> 赞同：15
> 
> 时间：2012-11-17T20:38:41.387
> 
> 标签：haskell, lenses, haskell-lens

我最近在 Hackage 上发现了 lens 包，并且现在一直在尝试在一个小型测试项目中使用它，如果我继续努力的话，在很遥远的一天可能会变成 M​​UD/MUSH 服务器。

这是我的代码的最小化版本，说明了我现在使用用于访问键/值容器的 at 镜头面临的问题（在我的情况下为 Data.Map.Strict）

```
{-# LANGUAGE OverloadedStrings, GeneralizedNewtypeDeriving, TemplateHaskell #-}
module World where
import Control.Applicative ((<$>),(<*>), pure)
import Control.Lens
import Data.Map.Strict (Map)
import qualified Data.Map.Strict as DM
import Data.Maybe
import Data.UUID
import Data.Text (Text)
import qualified Data.Text as T
import System.Random (Random, randomIO)

newtype RoomId = RoomId UUID deriving (Eq, Ord, Show, Read, Random)
newtype PlayerId = PlayerId UUID deriving (Eq, Ord, Show, Read, Random)

data Room =
  Room { _roomId :: RoomId 
       , _roomName :: Text
       , _roomDescription :: Text
       , _roomPlayers :: [PlayerId]
       } deriving (Eq, Ord, Show, Read)

makeLenses ''Room

data Player =
  Player { _playerId :: PlayerId
         , _playerDisplayName :: Text
         , _playerLocation :: RoomId
         } deriving (Eq, Ord, Show, Read)

makeLenses ''Player

data World =
  World { _worldRooms :: Map RoomId Room
        , _worldPlayers :: Map PlayerId Player
        } deriving (Eq, Ord, Show, Read)

makeLenses ''World

mkWorld :: IO World
mkWorld = do
  r1 <- Room <$> randomIO <*> (pure "The Singularity") <*> (pure "You are standing in the only place in the whole world") <*> (pure [])
  p1 <- Player <$> randomIO <*> (pure "testplayer1") <*> (pure $ r1^.roomId)
  let rooms = at (r1^.roomId) ?~ (set roomPlayers [p1^.playerId] r1) $ DM.empty
      players = at (p1^.playerId) ?~ p1 $ DM.empty in do
    return $ World rooms players

viewPlayerLocation :: World -> PlayerId -> RoomId
viewPlayerLocation world playerId=
  view (worldPlayers.at playerId.traverse.playerLocation) world 
```

由于房间、玩家和类似对象在整个代码中都被引用，因此我将它们存储在我的 World 状态类型中，作为其数据对象的 Id（新类型 UUID）映射。

要检索那些有镜头的人，我需要以某种方式处理 at 镜头返回的 Maybe （如果键不在地图中，这就是 Nothing）。在我的最后一行中，我尝试通过 traverse 执行此操作，只要最终结果是 Monoid 的实例，它就会进行类型检查，但通常情况并非如此。这不是因为 playerLocation 返回一个没有 Monoid 实例的 RoomId。

```
No instance for (Data.Monoid.Monoid RoomId)
  arising from a use of `traverse'
Possible fix:
  add an instance declaration for (Data.Monoid.Monoid RoomId)
In the first argument of `(.)', namely `traverse'
In the second argument of `(.)', namely `traverse . playerLocation'
In the second argument of `(.)', namely
  `at playerId . traverse . playerLocation' 
```

由于 traverse 只需要 Monoid，因为 traverse 泛化到大小大于 1 的容器，我现在想知道是否有更好的方法来处理这个问题，它不需要我想要的对象中可能包含的所有类型的语义上无意义的 Monoid 实例存储在地图中。

或者我可能完全误解了这里的问题，我需要使用一个完全不同的相当大的镜头包？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-18T01:14:45.517

如果你有 a`Traversal`并且你想`Maybe`为第一个元素获取 a ，你可以使用`headOf`而不是`view`，即

```
viewPlayerLocation :: World -> PlayerId -> Maybe RoomId
viewPlayerLocation world playerId =
  headOf (worldPlayers.at playerId.traverse.playerLocation) world 
```

的中缀版本`headOf`称为`^?`. 您还可以使用它`toListOf`来获取所有元素的列表，以及根据您想要执行的其他功能。请参阅[`Control.Lens.Fold`](http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Fold.html)文档。

在哪个模块中查找您的函数的快速启发式方法：

*   A`Getter`是只有一个值的只读视图
*   A`Lens`是只有一个值的读写视图
*   A`Traversal`是零个或多个值的读写视图
*   A`Fold`是零个或多个值的只读视图
*   A`Setter`是零个或多个值（实际上可能是无数个值）的只写（好吧，只修改）视图
*   An`Iso`是，嗯，一个同构 - a`Lens`可以在任何一个方向
*   想必你知道什么时候在使用一个`Indexed`函数，所以你可以在对应的`Indexed`模块中查找

想一想您要做什么以及将其放入的最通用模块是什么。:-) 在这种情况下，你有一个`Traversal`，但你只是想查看，而不是修改，所以你想要的功能在`.Fold`. 如果您还保证它指的是一个值，那么它将在`.Getter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T22:58:01.550

简短的回答：镜头包并不神奇。

在不告诉我错误或默认值是什么的情况下，您想要：

> viewPlayerLocation :: World -> PlayerId -> RoomId

你知道两件事，那就是

> 要检索那些有镜头的我需要处理由 at 镜头返回的 Maybe

和

> 只要最终结果是 Monoid 的实例，它就会进行类型检查

当查找失败时，`Monoid`您将获得默认值。`mempty :: Monoid m => m`

什么会失败：`PlayerId`不能在`_worldPlayers`和`_playerLocation`不能在`_worldRooms`。

那么如果查找失败，你的代码应该怎么做呢？这是“不可能”吗？如果是这样，那么使用`fromMaybe (error "impossible") :: Maybe a -> a`崩溃。

如果查找可能失败，那么是否存在合理的默认值？也许返回`Maybe RoomId`并让调用者决定？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T00:20:21.020

有`^?!`它可以让你从调用中解放出来`fromMaybe`。

# assembly - 清除中断和读写端口

> ID：13434573
> 
> 赞同：1
> 
> 时间：2012-11-17T20:39:41.587
> 
> 标签：assembly, kernel, hard-drive

在内核级别的汇编程序中，如果我们发出一个`cli`来禁用中断，我们可以随后发出一个端口读/写来进行硬盘读写吗？换句话说，硬盘驱动程序可以实现同步读/写吗？就像是：

```
cli
// Do file system stuff
// at block level
// read/write a block using in/out assembler instructions
sti 
```

# java - 生成唯一代码并隐藏 i

> ID：13434583
> 
> 赞同：0
> 
> 时间：2012-11-17T20:40:55.877
> 
> 标签：java, web-services, spring

我正在用spring编写一个Web服务服务器端。我的第一个请求是 getUniqueID。我为这个请求创建了一个唯一的 id 并将它返回给客户端。那么其他客户端请求的输入必须是这个id。如何在服务器端隐藏此 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:52:28.737

如果您的`hide`方法持续存在，最好将其保存到某个关系数据库中。如果您不需要成熟的 RDBMS，我可以推荐 SQLite。更多：[http](http://www.sqlite.org/) ://www.sqlite.org/ 您还需要一种将您的用户映射到该 ID 的方法。这只有在您的 Web 服务是有状态的情况下才有可能。您可以使用 HTTP 会话。

您可以使用 Spring JDBC 支持使持久化和查询您的 id 变得非常简单。更多信息：http: [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:59:08.107

你能澄清你的意思`hide this id on server side`吗？此外，该 id 将在未来的服务请求中用于什么？

您可以将 id 放在会话中，这样客户端就不需要知道它。这简化了客户端的后续服务调用，因为它不需要每次都传递 id。

如果您想使用会话，Spring 提供了一些不错的帮助方法，`WebUtils`这可能会有所帮助。

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/util/WebUtils.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/util/WebUtils.html)

# arm - 所有的 ARM 操作码都是 1 个字节吗？

> ID：13434584
> 
> 赞同：0
> 
> 时间：2012-11-17T20:41:07.497
> 
> 标签：arm, cpu-architecture, opcode

在 x86 架构中，有 1、2 和 3 字节操作码。ARM呢？例如，当我反汇编一个二进制文件时，我可以总是将第一个字节作为操作码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T22:36:33.353

不，现在有一些 arm 指令集。主要的 arm 指令集，所有指令都是 32 位的，并且指令的解码并不孤立于指令内的一个字段。thumb指令集基于16位指令，但答案相同，具体取决于解码在不同位置的指令。然后是拇指指令集的拇指2扩展，同样的答案。thumb2 指令是来自 thumb 的未定义指令之一，然后添加更多位来区分哪个指令。

从 infocenter.arm.com 获取一份 ARM 架构参考手册以查看所有内容。有几个很好的图表显示了这一切是如何工作的，msbits 用于将指令划分为不同的类型，然后根据类型对其余位进行解码。

x86 来自 8 位世界，其中设计倾向于将一个内存位置（/访问）（当时是一个字节）用于更常用的指令，然后将一些操作码复用到第二个字节中。立即数也全部添加。那时还可以，但今天效率低下。x86 应该是你学习的最后一个指令集，它不能代表一个好的指令集，你需要忘记很多东西才能继续前进。

wikipedia 在 wiki 页面本身上有许多指令集，其他的通常有直接链接。像 arm 和 mips 这样的 IP 供应商，以及许多芯片供应商，您可以直接访问他们的站点并获取文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T22:31:08.937

ARM 指令实际上并没有“操作码”的概念。我不太了解 x86 指令集，但是您所描述的听起来像是 6502 机器代码，其中一些字节标识要执行的指令，而其他字节则指定指令使用的数据。

忽略[Thumb](http://en.wikipedia.org/wiki/ARM_architecture#Thumb)，所有 ARM 指令都是四个字节长。指令使用的操作数包含在这四个字节中。

# zend-framework - 需要帮助获取 Zend 库设置

> ID：13434585
> 
> 赞同：0
> 
> 时间：2012-11-17T20:41:08.180
> 
> 标签：zend-framework, include-path

好的，所以我进行了搜索和搜索，但没有找到任何解决问题的方法。我有一个在本地设置的站点，然后我将其移至服务器。我一直在尝试设置 Zend 库，但我似乎无法获得它。这是我的 index.php 文件。

```
<?php
ini_set('display_errors', 1);

defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/application'));

defined('APPLICATION_ENV')
|| define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') :  'development'));

set_include_path(implode(PATH_SEPARATOR, array(
realpath(APPLICATION_PATH . '/../library'),
get_include_path(),
)));

require_once 'Zend/Version.php';
echo 'Zend Framework Version = ' . Zend_Version::VERSION;

require_once 'Zend/Application.php';

$application = new Zend_Application(
APPLICATION_ENV,
APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
        ->run(); 
```

我不断收到错误消息“警告：require_once(Zend/Version.php)：无法打开流：第 17 行的 /var/www/vhosts/mywebsite.com/directory/index.php 中没有此类文件或目录致命错误：require_once（）：在/var/www/vhosts/mywebsite.com/中打开所需的'Zend/Version.php'（include_path ='/var/www/vhosts/mywebsite.com/directory/application/library/'）失败第 17 行的目录/index.php"

任何帮助或指导将不胜感激。谢谢，

更新了代码，我现在收到此错误“警告：require_once(Zend/Application.php)：无法打开流：/var/www/vhosts/mysite.com/directory/index.php 中没有这样的文件或目录在线19 致命错误：require_once(): 无法在第 19 行的 /var/www/vhosts/mysite.com/directory/index.php 中打开所需的 'Zend/Application.php' (include_path=':.:')

*注意 - 我的 index.php 和 htaccess 文件位于 /var/www/vhosts/mysite.com/directory/ 而不是 /var/www/vhosts/mysite.com/directory/public/ 目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:17:50.640

通往的道路`library`更上一层楼`/../library/`

[https://github.com/ralphschindler/NOLASnowball/blob/master/public/index.php](https://github.com/ralphschindler/NOLASnowball/blob/master/public/index.php)

# ruby-on-rails - 将 lib 文件夹用于 Rails 中的应用程序部件

> ID：13434586
> 
> 赞同：2
> 
> 时间：2012-11-17T20:41:40.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

Ruby on Rails 存在一些问题，即使花费数小时尝试也无法解决。我希望你们能帮助我。这四个问题在行首标有 Q1-Q4。

我认为我需要不止一次的元素。出于这个原因，lib 文件夹中应该有一个单独的模块（所以我也可以在其他项目中使用它）。

我需要什么： - 我可以从任何视图自动调用的辅助方法。- 因为它需要更多的 html 东西，所以我想使用一个 html 文件，我在 helper-method 中呈现它。- 将参数传递给 javascript 文件。- 如果使用元素，则必须包含 JavaScript 文件 - 如果使用元素，则必须包含 CSS 文件

由于不太容易理解我的意思，我再用一个简单的例子来解释一下（这只是一个例子，所以不要过多考虑它的含义）：Helper for create a combo box with a view- helper 或者使用 javascript 方法。显然，我需要 (html) - 一个放置在下拉框 (js) 顶部的文本输入字段 - 一个在文本框中显示下拉框的选定项目的函数。(css) - 位于下拉列表前面的文本框的样式。(settings) - 一个初始化元素的设置文件，以便我可以在任何地方自动使用它。

我想象的文件夹结构：

*   库
    *   组合框
        *   combo_box_helper.rb
        *   _combo_box.html.erb
        *   组合框.js
        *   组合框.css

在 combo_box-helper.rb 我有 2 方法：

*   组合框字段（下拉内容）

该方法使用部分返回一个组合框。数组条目在下拉框中可用。

*   combo_box_js(drop_down_content)

当使用 javascript 创建组合框时，必须调用该方法。要仅对组合框进行一次更改，还应使用部分创建元素并将其传递给 javascript。

这里出现了第一个问题：

**Q1**：在任何方法的第一次调用（并且仅在第一次调用）时，它必须包含 js 和 css 文件。这样做的常见方法是什么？

**Q2**：如何渲染位于 lib 文件夹中而不是 app/view 文件夹中的部分？

**Q3**：给javascript传参数的常用方法是什么？

我的第一次尝试：

```
module ComboBoxHelper
    def combo_box_field(drop_down_content)
        output = check_first_call

        output + render(:partial => 'combo_box',  :locals => {:content => drop_down_content})
    end

    def
        output = check_first_call

        output + "<div class='hidden' data-combobox = '" +  render(:partial => 'combo_box',  :locals => {:content => drop_down_content}) + "'></div>"
    end

    def check_first_call
        if @already_called
            ""
        else
            @already_called = true
            javascript_include_tag("combo_box.js") + stylesheet_link_tag("combo_box.css")
        end
    end
end 
```

问题：

*   渲染方法不起作用（它在应用程序/视图中搜索部分）
*   check_first_call 的调用很丑陋。特别是当它返回一个字符串时。
*   javascript 和 css 的包含不起作用（文件不在资产管道中）

.html.erb 和 .css 文件的内容是不言自明的。javascript 文件中有趣的部分是我尝试访问 Ruby on Rails 传递的参数：

```
$('div.hidden[data-combobox]').data("combobox") 
```

如果这些问题都解决了，只有一件事很重要：如何正确初始化模块，所以我到处自动使用它。

我的第一次尝试：我使用该代码在 config/initializers/init_combo_box 文件夹中创建一个文件：

```
require_dependency 'combo_box/combo_box_helper'

ActiveSupport.on_load(:action_view) do
    include ComboBoxHelper
end 
```

**Q4** : 这是常见的方式吗？我是否需要添加一些内容来解决上述问题之一（例如，将 js- 和 css 文件添加到资产管道）？

谢谢你的帮助。

# php - 在 CakePHP 中触发一个函数

> ID：13434588
> 
> 赞同：1
> 
> 时间：2012-11-17T20:41:52.330
> 
> 标签：php, cakephp, triggers, simplepie

我正在尝试使用 CakePHP + SimplePie 构建一个“智能”RSS 阅读器。在我的管理部分，当我添加一个链接时，我的函数将链接保存到数据库，然后从 rss 提要中提取所有链接，然后将它们存储在数据库中。我现在的问题是，我想每隔一段时间执行一次该操作以使用新链接填充数据库。

用 CakePHP 可以做到吗..??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:45:22.590

制作一个[shell](http://book.cakephp.org/2.0/en/console-and-shells.html)并使用 cronjob 以您需要的时间间隔执行它。

# java - 给定一个网格，如果启发式更好，最好首先搜索跳转到一个单元格？

> ID：13434590
> 
> 赞同：1
> 
> 时间：2012-11-17T20:42:00.700
> 
> 标签：java, algorithm, search, greedy

我目前正在使用 2D 数组实现贪心最佳优先搜索来表示网格。我现在的实现返回打开的节点。我正在使用优先队列。当我返回遍历的路径/打开的节点并查看节点时，算法似乎会从网格的一侧跳到另一侧。它应该这样做吗？玩家在穿越网格时跳到网格另一侧的单元格是没有意义的，因为那里的启发式更好然后跳回去。我正在使用这个网格： ![网格](../Images/eed3fdb057287bb6e2cb1293e3358b29.png)

这些是已经打开的所有节点的(y, x)坐标（注意是y, x代表一个二维数组）：

```
0,0 Goes across the top of the board
0,1
0,2
0,3
0,4
0,5
1,5 Goes down one cell
1,4 goes left
1,6 goes right 2 spaces
0,6 goes up
1,7 goes down the side of the board
2,7 \/
3,7 \/
4,7 \/
5,7 \/
0,7 jumps up across the board
6,7
1,2 jumps up across the board
2,2
3,2
4,2
3,1
4,1
3,0
2,1
5,2
5,1
4,0
2,0
7,7 jumps up across the board
7,6
7,5
6,5
5,5
5,4
4,4
3,4
3,5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:50:49.170

如果您在将每个节点的父节点添加到优先级队列时跟踪它们，那么您可以将队列视为不仅跟踪节点，而且跟踪整个**路径段**。队列中的每个节点代表一个可行的路径段，该路径段结束于该节点。

例如，当您达到 5,7 时，您已经确定这条路径是迄今为止最有希望的：

```
(0,0 0,1 0,2 0,3 0,4 0,5 1,5 1,6 1,7 2,7 3,7 4,7) [5,7] 
```

（我已经将节点`[brackets]`和到达该节点的路径放在 . 中`(parentheses)`。沿着父链向后产生路径。）

当 5,7 节点没有出现时，将其所有 5,7 的后继节点添加到队列中，然后从队列中拉出下一个节点。在这一点上，事实证明你没有得到 5,7 的继任者之一。相反，启发式函数决定尝试不同的节点：

```
(0,0 0,1 0,2 0,3 0,4 0,5) [0,6] 
```

它尝试了这个，没有达到目标，然后继续。现在回到考虑 5,7 的继任者之一：

```
(0,0 0,1 0,2 0,3 0,4 0,5 1,5 1,6 1,7 2,7 3,7 4,7 5,7) [6,7] 
```

等等。

# cookies - Domain=".hostimpl[... - 如何解释这个 cookie？

> ID：13434593
> 
> 赞同：1
> 
> 时间：2012-11-17T20:42:35.387
> 
> 标签：cookies

如何解释此 cookie 中的域：

```
portal-referer=http%3A%2F%2Fservice.mail.com%2Fmcstarter%2Fmail.html%3F; Domain=".hostimpl[name=www.mail.com,domain=mail.com]"; Path=/ 
```

?

也许我必须将此cookie添加到分配给uri“www.mail.com”的CookieContainer（C＃），并将此cookie的另一个副本添加到uri“mail.com”？

谢谢

# hadoop - Map Reduce 保持输入顺序

> ID：13434594
> 
> 赞同：5
> 
> 时间：2012-11-17T20:42:44.790
> 
> 标签：hadoop, mapreduce

我尝试使用处理文本文件的hadoop实现一个应用程序。问题是我无法保持输入文本的顺序。有没有办法选择散列函数？这个问题可以通过分配输入的分区来轻松解决到每个映射器，然后将分区发送到减速器。这可能与 hadoop 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:12:56.573

MapReduce 的基本思想是事情完成的顺序是无关紧要的。因此，您不能（也不需要）控制以下顺序：

*   输入记录通过映射器。
*   键和相关值通过减速器。

您唯一可以控制的是值在迭代器中的放置顺序，该迭代器在 reducer 中可用。这是使用称为“二级排序”的构造完成的。

[对这个术语](http://www.google.nl/search?q=secondary%20sort%20hadoop)的一个简单的谷歌操作导致了几个可以继续的点。我喜欢这篇博文：[链接](http://vangjee.wordpress.com/2012/03/20/secondary-sorting-aka-sorting-values-in-hadoops-mapreduce-programming-paradigm/)

# c - 读取所有后续字符并转换为 int

> ID：13434598
> 
> 赞同：0
> 
> 时间：2012-11-17T20:43:13.423
> 
> 标签：c, string

我正在阅读一个 txt 文件并获取所有不是空格的字符，使用它们将它们转换为 int`(int)c-'0'`并且这是有效的。

问题是数字是否超过 1 位，因为我正在逐个字符地读取字符。

我怎么能像一个字符序列一样阅读，将这个字符序列转换为 int？

我尝试使用字符串，但是当我尝试将此字符串传递给我的另一个函数时，它将每个索引视为一个数字，但我需要的是整个字符串被视为一个数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:52:26.597

进行转换的一种方便方法是将整数读入缓冲区（字符串），然后调用[`atoi`](http://www.codecogs.com/reference/computing/c/stdlib.h/atoi.php). 三重确保字符串正确地以空值结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:53:10.977

一种解决方案，我不会说你的情况是好是坏，因为你没有提供任何代码，但你可以做这样的事情：（伪代码）

```
int i;
int val = 0;
char *string = "5238785";
for (i = 0; i < strlen(string); i++) {
    val = val * 10 + atoi(string[i]);
} 
```

**注意**：我简化了它，你应该做更多的字符串控制，以确保你不会越界等。确保字符串是 NULL 终止的`\0`，但这个概念是你一次读取一个数字，然后移动到目前为止，您所读到的内容“还剩一步”以适应下一个数字。

# .htaccess - modRewrite 将路径转换为复杂的文件名

> ID：13434601
> 
> 赞同：0
> 
> 时间：2012-11-17T20:43:26.590
> 
> 标签：.htaccess, mod-rewrite

如何让 modrewrite 将 url 转换为 php 文件名？

```
mysite.com/part1       (or mysite.com/part1/)       --> part1.php
mysite.com/part1/part2 (or mysite.com/part1/part2/  --> part1_part2.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:21:54.410

```
# turn on rewrite engine
RewriteEngine On

# remove trailing slash
RewriteRule ^(.*)/$ $1 [L]

# translate slash to underscore
RewriteRule ^(.*)/(.*)$ $1_$2 [L]

# if there is no .php extension, add it
RewriteCond %{REQUEST_URI} !^.*\.php$
RewriteRule ^(.*)$ $1.php [L] 
```

您可以考虑更多条件，例如不操作现有文件/目录并附加查询字符串（`QSA`重写规则的参数）

# javascript - 展开 div 以填充父元素但不超过最大宽度

> ID：13434606
> 
> 赞同：1
> 
> 时间：2012-11-17T20:43:58.597
> 
> 标签：javascript, jquery, css

我正在尝试在左浮动 div 上设置最小和最大宽度/高度，并让它们扩展以填充父元素（主体）。我想知道是否有办法用 css 实现这一点，如果没有，也许我可以使用一些 JS。

为了想象这种效果，开始调整窗口大小，您会注意到 div 的右侧会有一个空白区域，直到该空间大到足以让一些 div 移入其中。我想做的是让所有 div 扩展以填充空白空间，直到达到最大值，现在是时候在那里弹出更多 div 了，此时 div 的大小将根据行中有多少重新调整.

最后，我希望这些 div 永远不会超过最大宽度或小于最小宽度，而是在这些限制内自我调整以填充身体的整个宽度

这是示例代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <style>
      .imageitem {
        background-color: blue;
        margin: 0 5px 5px;
        min-width: 200px;
        min-height: 200px;
        max-width: 250px;
        max-height: 250px;
        float: left;
      }
    </style>
  </head>
  <body>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
    <div class="imageitem"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T00:28:08.560

您要问的实际上是一个相对复杂的布局，尽管它基本上只是响应式的。本质上，您希望两个 div 扩展以填充屏幕（就像表格中的两个单元格一样），但是一旦屏幕达到一定宽度，第三个 div 就会向上移动到行中。

正如克拉克所说，您将无法同时获得您指定的尺寸并在所有可能的情况下填充屏幕。在 505 像素宽处，可以容纳两个 div（2x 250，间隔 5 像素）。三个不适合，直到至少 610 像素宽（3x 200，2x 5 像素间隙），这意味着有 105 像素的宽度，您的 div 不会填满屏幕。

媒体查询可能是最好的选择，但您的边距可能必须指定为百分比，而不是 5 像素（除非您想在 jQuery 或类似中执行此操作）。

从克拉克的答案修改的是这个小提琴[http://jsfiddle.net/UHqWF/2/](http://jsfiddle.net/UHqWF/2/)

```
body {
    background:#edeee6;
}

.imageitem {
    -moz-box-sizing:border-box;
 -webkit-box-sizing:border-box;
         box-sizing:border-box;
    float:left;
    max-width:250px;
    min-width:200px;
    padding:5px;
    width:100%;
}

    .imageitem div {
        background:#4e84a4;
        max-height:250px;
        min-height:200px;
    }

@media all and (min-width:420px) {
    .imageitem {
        width:50%;
    }
}

@media all and (min-width:630px) {
    .imageitem {
        width:33.33333%;
    }
}

@media all and (min-width:840px) {
    .imageitem {
        width:25%;
    }
}

@media all and (min-width:1050px) {
    .imageitem {
        width:20%;
    }
} 
```

但是，如上所述，它很跳跃。

更好的解决方案是不施加宽度限制（从而阻止偶尔的右侧间隙），例如[http://jsfiddle.net/UHqWF/3/](http://jsfiddle.net/UHqWF/3/)

```
body {
    background:#edeee6;
}

.imageitem {
    -moz-box-sizing:border-box;
 -webkit-box-sizing:border-box;
         box-sizing:border-box;
    float:left;
    padding:5px;
    width:100%;
}

    .imageitem div {
        background:#4e84a4;
        min-height:200px;
        text-align:center;
    }

@media all and (min-width:420px) {
    .imageitem {
        width:50%;
    }
}

@media all and (min-width:630px) {
    .imageitem {
        width:33.33333%;
    }
}

@media all and (min-width:840px) {
    .imageitem {
        width:25%;
    }
}

@media all and (min-width:1050px) {
    .imageitem {
        width:20%;
    }
}​ 
```

甚至在中心有额外的空间，而不是边缘，例如[http://jsfiddle.net/UHqWF/4/](http://jsfiddle.net/UHqWF/4/)

```
body {
    background:#edeee6;
}

.imageitem {
    -moz-box-sizing:border-box;
 -webkit-box-sizing:border-box;
         box-sizing:border-box;
    float:left;
    padding:5px;
    width:100%;
}

    .imageitem div {
        background:#4e84a4;
        max-width:250px;
        margin:0 auto;
        min-height:200px;
        text-align:center;
    }

@media all and (min-width:420px) {
    .imageitem {
        width:50%;
    }
}

@media all and (min-width:630px) {
    .imageitem {
        width:33.33333%;
    }
}

@media all and (min-width:840px) {
    .imageitem {
        width:25%;
    }
}

@media all and (min-width:1050px) {
    .imageitem {
        width:20%;
    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T00:13:27.823

我创建了一个 jQuery 插件，它在支持它们的浏览器中使用 CSS3 列，并将元素包装到不支持 IE 9 及更低版本的浏览器中的浮动列中。

调整大小保持项目的纵横比。让过渡看起来 100% 流畅几乎是不可能的，但根据浏览器的不同，它看起来相当流畅。

有一些设置可以使用，它们被评论了。

启动代码是：

```
$('#container').adjustColumns({/* options*/}); 
```

由于我的部分动机是增加 CSS3 使用和后备方法的学习曲线，我很乐意提供更多支持。

演示：http: [//jsfiddle.net/SbvGJ/show/](http://jsfiddle.net/SbvGJ/show/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:03:32.613

首先，最小宽度为 200px，最大宽度为 250px：

*   当屏幕尺寸在 750px 和 800px 之间时，会有最大 50px 的间隙
*   当屏幕尺寸在 500px 和 600px 之间时，会有最大 100px 的间隙
*   当屏幕尺寸在 250px 和 400px 之间时，会有最大 150px 的间隙

这就是布局的数学原理。

只要您对此感到满意，也许您可​​以尝试媒体查询。

所以是这样的：

```
.imageitem {
    background-color: blue;
    //For the sake of simplicity, i've set the margin to 0.
    //You will need to redo the maths or restructure your HTML for margins to work
    //Perhaps using an inner div with a margin
    margin: 0px;
    min-width:200px;
    min-height:200px;
    max-width:250px;
    max-height:250px;
    float:left;
}

@media all and (max-width:250px) and (min-width:200px) {
    .imageitem {
        width:100%;
    }
}

@media all and (max-width:500px) and (min-width:400px) {
    .imageitem {
        width:50%;
    }
}

@media all and (max-width:750px) and (min-width:600px) {
    .imageitem {
        width:33%;
    }
}

@media all and (max-width:999px) and (min-width:800px) {
    .imageitem {
        width:25%;
    }
}

@media all and (max-width:1249px) and (min-width:1000px) {
    .imageitem {
        width:20%;
    }
} 
```

如果您还需要调整高度，您可以为 min-height 和 max-height 编写类似的查询。只需确保在`html, body`选择器上也设置了高度。

# c - strptime() 的问题

> ID：13434607
> 
> 赞同：0
> 
> 时间：2012-11-17T20:44:05.227
> 
> 标签：c, struct, strptime, tm

我正在使用该函数`strptime()`从字符串转到`struct tm`. 但是，当我检查字段时，有一些没有填写。所以我检查了手册页，但似乎我在做正确的事情，所以现在我不知道出了什么问题。

示例输入字符串：

```
Wed, 19 Oct 2005 10:59:00 GMT 
```

strptime 函数：

```
if(strptime(date, "%a, %d %b %Y %T %Z", &time) != NULL) 
```

据我了解， %a 代表星期几， %d 代表月份中的某天， %b 代表月份， %Y 代表年份， %T 代表 HH:MM:SS 和 % Z 代表格林威治标准时间。

的输出`tm struct`

```
year: 32767; month: 866041216; day: 0;
hour: 3; minute: 0; second: 37941328 
```

产生输出的代码：

```
printf("year: %d; month: %d; day: %d;\n",
        time.tm_year, time.tm_mon, time.tm_mday);
printf("hour: %d; minute: %d; second: %d\n",
        time.tm_hour, time.tm_min, time.tm_sec);
printf("week day: %d; year day: %d\n", time.tm_wday, time.tm_yday); 
```

任何朝着正确方向的推动都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:27:44.257

`time`您必须在调用之前进行初始化`strptime`，通常如下所示：

```
memset(&time, 0, sizeof(struct tm)); 
```

引用[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/strptime.3.html)：

> 原则上，此函数不会初始化 tm，而仅存储指定的值。这意味着 tm 应该在调用之前初始化。不同 UNIX 系统之间的细节略有不同。glibc 实现不会触及那些未明确指定的字段，除非它在年、月或日元素中的任何一个发生更改时重新计算 tm_wday 和 tm_yday 字段。

# python - Syntax for adding sequential objects to a list

> ID：13434608
> 
> 赞同：1
> 
> 时间：2012-11-17T20:44:14.167
> 
> 标签：python, list

Very beginner question but it is driving me mad. sample1, sample2 etc. are Pygame.mixer.sound objects.

```
sample_list = []
sample_list.append(sample1)
sample_list.append(sample2)
sample_list.append(sample3) 
```

Is fine, but I want to do that using a for style loop, e.g.

```
for j in range(1, 3, 1):
    sample_list.append(sample + j) 
```

But that is trying to add a number to a sound object so isn't right. I can add the equivalent string by;

```
for j in range(1, 3, 1):
    sample_list.append("sample" + str(j)) 
```

But that doesn't refer to the objects I want, just adds those strings. I've tried must permutations of syntax I can think of but it is still alluding me! Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:50:04.290

Don't store the objects in variables in the first place; store them directly into a list, and then you will be able to index them by integer.

If the integer identifiers are sparse, use a `dict` indexed by integer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T20:51:32.173

I would recommend storing these in a dict to begin with. It is almost the same effect for you to reference by a name, but without the explicit object symbol for each:

```
samples = {
    "sample1": Sample(),
    "sample2": Sample()
}
samples['sample3'] = Sample() 
```

This is the preferred approach when you have a dynamic number of objects you are creating and want to be able to grab them by a name later. You can store 100's of these in your dict without cluttering up your namespace.

And later if you are trying to apply this to your loop, you can reference the string names:

```
for i in xrange(1,4):
    sample_list.append(samples["sample" + str(i)]) 
```

As a side note another way to get attributes by name when they live on some object is to use `getattr`. Assume you have this:

```
class Sampler(object):
    pass

sampler = Sampler()
sampler.sample1 = Sample()
sampler.sample2 = Sample()
sampler.sample3 = Sample() 
```

You can then reference by name via: `getattr(sampler, "sample1")`

*Note*: As mentioned in comments by @Marcin, if you don't care about having a string identifier to be able to look up your items, and they are just purely sequential by number, you can use this same approach but with a list. It depends on your needs.

It is possible you might want to end up doing something like:

```
samples = {
    "bang1": Sample(),
    "bang2": Sample(),
    "bang3": Sample(),
    "shot1": Sample(),
    "shot2": Sample(),
    ...
} 
```

... Which would then allow you to look up sequential subsets of those sounds.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:46:50.900

You can dynamically load variables from the [`locals()` mapping](http://docs.python.org/2/library/functions.html#locals):

```
for j in range(1, 4):
    sample_list.append(locals()["sample" + str(j)]) 
```

Generally, you want to avoid such tricks; find other ways to store your `sample` variables, in a mapping or a list for example.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-17T21:22:20.537

Looks like the wrong approach, but nevertheless.

```
sample_list = [eval('sample' + str(i)) for i in range(1, 4)] 
```

# php - PHP 类型/css 文件无法正常工作

> ID：13434611
> 
> 赞同：0
> 
> 时间：2012-11-17T20:44:50.047
> 
> 标签：php, html, css

这是我的代码

```
<?php header("Content-type: text/css; charset: UTF-8");
// Admin Color Define //
$admint = "Admin";
$admincolor = mysql_query("SELECT * FROM shout_titles WHERE title = '".$admint."'");
$gac = mysql_fetch_array($admincolor);

// Co-Admin Color Define //
$cadmint = "Co-Admin";
$cacolor = mysql_query("SELECT * FROM shout_titles WHERE title = '".$cadmint."'");
$gcac = mysql_fetch_array($cacolor);

// Moderator Color Define //
$modt = "Moderator";
$modcolor = mysql_query("SELECT * FROM shout_titles WHERE title = '".$modt."'");
$gmodc = mysql_fetch_array($modcolor);

// Banned Color Define //
$bannedt = "Banned";
$bancolor = mysql_query("SELECT * FROM shout_titles WHERE title = '".$bannedt."'");
$gbanc = mysql_fetch_array($bancolor);

// New Color Define //

?>
div#shoutbox {
    border: 1px solid #000000;
    width: 500px;
    height: 1000px;
    overflow: scroll;
    overflow-x: hidden;
    word-wrap: break-word;
    color: #000000;
    background: #FFFFFF;
    font-family: Arial, Helvetica, sans-serif;
    position: relative;
    left: 15px;
}
a{
    font-weight: bold;
}
.bgOn, .bgOff {
    padding: 2px;
}
.bgOn {
    background-color: #FFFFFF;
    color: #000000;
}
.bgOn a {
    color: #000000;
}
.bgOff {
    background-color: #EBEBEB;
    color: #000000;
}
.bgOff a {
    color: #000000;
}
.date {
    text-align: right;
    font-size: 80%;
}
.delete, a.delete {
  color: #F00;
  font-weight: bold;
}
.ban, a.ban {
  font-weight: bold;
}
.title {
    font-weight: bold;
}
.group<?=$admint?> .title {
    color: <?=$gac['color']?>;
}
.group<?=$modt?> .title {
    color: <?=$gmodc['color']?>;
}
.group<?=$cadmin?> .title {
    color: <?=$gcac['color']?>;
}
.group<?=$banned?> .title {
    color: <?=$gbanc['color']?>;
} 
```

这就是我打电话的方式 `<link rel="stylesheet" href="shoutbox.php" media="screen">`

代码`div#shoutbox`和所有以开头的类`group`都不起作用。其他一切正常。

这是我得到的输出。

![CSS 输出](../Images/1b052044efedd00d2851cfea49b9e386.png)

这是我第一次用 php 编写样式表，它并没有太大的不同，所以我不确定它为什么不起作用。

这可能是我错过的一些愚蠢的事情，但我无法识别它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:14:30.617

检查您渲染的 CSS 文件，看看是否有任何问题和/或将其粘贴到此处 :)

# java - 如何使 JUNG 中的节点子集出现在一条直线上？

> ID：13434616
> 
> 赞同：2
> 
> 时间：2012-11-17T20:45:24.220
> 
> 标签：java, swing, jung

我正在尝试在 JUNG 中构建一个图形，以使图形中的某些节点以不同的方式出现和布局。

这是我到目前为止的代码：

```
package example.ordering;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;

import org.apache.commons.collections15.Transformer;
import org.apache.commons.collections15.functors.ChainedTransformer;

import edu.uci.ics.jung.algorithms.layout.FRLayout;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.graph.SparseGraph;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.visualization.renderers.VertexLabelAsShapeRenderer;

public class Main {

    public static void main(String[] args) {

        final JFrame frame = new JFrame();

        frame.add(createGraph());
        frame.setLocationRelativeTo(null);

        frame.pack();

        EventQueue.invokeLater(new Runnable() {

            public void run() {
                frame.setVisible(true);
            }
        });
    }

    private static JPanel createGraph() {

        // TODO fill in the code to create a graph with nodes and order them.
        Graph<GraphNode, String> g1 = new SparseGraph<GraphNode, String>();

        GraphNode A = new GraphNode("A", "u");
        GraphNode B = new GraphNode("B", "u");
        GraphNode a = new GraphNode("a", "l");
        GraphNode b = new GraphNode("b", "l");

        g1.addEdge("AB", A, B);
        // g1.addEdge("CD", "C", "D");

        g1.addEdge("Aa", A, a);
        g1.addEdge("Bb", B, b);

        FRLayout<GraphNode, String> layout = new FRLayout<GraphNode, String>(g1);
        VisualizationViewer<GraphNode, String> vv = new VisualizationViewer<GraphNode, String>(
                layout);

        VertexLabelAsShapeRenderer<GraphNode, String> vlasr = new VertexLabelAsShapeRenderer<GraphNode, String>(
                vv.getRenderContext());

        vv.getRenderContext().setVertexShapeTransformer(vlasr);
        vv.getRenderContext().setVertexLabelTransformer(
                new ChainedTransformer<GraphNode, String>(
                        new Transformer[] { new MyLabeller() }));
        vv.getRenderer().setVertexLabelRenderer(vlasr);

        return vv;
    }

}

class GraphNode {
    public String value;
    public String type;

    public GraphNode(String value, String type) {
        this.value = value;
        this.type = type;
    }

    @Override
    public String toString() {
        return value;
    }

}

class MyLabeller implements Transformer<GraphNode, String> {

    public String transform(GraphNode arg0) {
        if (arg0.type.equals("u")) {
            return arg0.value;
        } else {
            return "";
        }
    }

} 
```

![在此处输入图像描述](../Images/1d9f1e7fc9a95d166c7cf40add29cf10.png)

现在**A**和**B**显示为带有标签的正确矩形，而小写**的 a**和**b**显示为小的短划线，因为它们没有标签。

我想要的是小案例节点（类型为'l'）都出现在按字母顺序排序的同一级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:54:45.253

使用`AggregateLayout`此示例中演示的：http: [//jung.sourceforge.net/site/jung-samples/xref/edu/uci/ics/jung/samples/SubLayoutDemo.html](http://jung.sourceforge.net/site/jung-samples/xref/edu/uci/ics/jung/samples/SubLayoutDemo.html)

# facebook - 在 UIWebView 中加载 FaceBook 时会出现 NSURLErrorDomain 错误 -999

> ID：13434617
> 
> 赞同：1
> 
> 时间：2012-11-17T20:45:25.460
> 
> 标签：facebook, uiwebview, nsurlerrordomain, didfailwitherror

全部...

在我的 UIWebView 中加载[http://m.facebook.com](http://m.facebook.com)时，有时它加载得很好，有时它会因为错误 NSURLErrorDomain 错误 -999 而失败。如果 Facebook 页面提示您登录然后您这样做，它总是会失败。

stackoverflow 上的一些人说这个错误可以忽略，事实上，FaceBook SDK 本身的某些部分忽略了他们代码中的错误。

所以，如果我在**didFailLoadWithError**方法中添加代码，让它在看到这个错误时返回，这对我有什么好处？Facebook 页面会继续加载吗？

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T16:27:38.783

是的。您可以安全地执行此操作（您可能需要检查 Facebook URL 是否非常安全）：

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    // Facebook URL can return an ignorable NSURLErrorDomain -999
    if ([error code] != NSURLErrorCancelled) {
        //show alert, do whatever...
    }
} 
```

# apache2 - How to setup subdomain/domain with and without www prefix on localhost

> ID：13434622
> 
> 赞同：3
> 
> 时间：2012-11-17T20:46:09.090
> 
> 标签：apache2, vhosts, hosts

I went through lots of SO questions but non is giving me the right answer .

I have following config in apache vhost:

```
<VirtualHost *:80>
    DocumentRoot "D:/Web Server/xampp/htdocs/testsite/frontend/www"
    ServerName mydomain.com
    ServerAlias www.mydomain.com
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "D:/Web Server/xampp/htdocs/testsite/backend/www"
    ServerName admin.mydomain.com
    ServerAlias www.admin.mydomain.com
</VirtualHost> 
```

AND hosts file :

```
127.0.0.1               testsite.com
127.0.0.1               admin.testsite.com 
```

What I need is that:

www.testsite.com and testsite.com should point to same thing

and same with

www.admin.testsite.com and admin.testsite.com

What is the issue with this config ? Do I need to add separate records for each , one with www and other without www ?

please help me sort this issue

thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:48:00.117

You need to add the www. versions of your domains to your etc hosts.

```
127.0.0.1               testsite.com www.testsite.com
127.0.0.1               admin.testsite.com www.admin.testsite.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T08:13:59.787

Using CNAMEs makes your DNS data easier to manage. CNAME-records point back to an A record. So if you change the IP address of the A record, all your CNAME records pointed to that record automatically follow the new IP of the A record. The alternative solution is to have multiple A records, but then you would have multiple places to change the IP address which increases the chances of error.

The most popular use of the CNAME-record, is to provide access to a web server using both the standard www.domain.com and domain.com (without the www). This is usually done by adding a CNAME-record for the www name pointing to the short name [while creating an A Record for the short name (without www)]. Example:

You have a website with the domain name mywebsite.nl. This domain name is hooked up to an A-record which translates the domain name to the appropriate IP address, f.i. `11.22.33.444`.

You also have several subdomains, like www.mywebsite.nl, ftp.mywebsite.nl, mail.mywebsite.nl etc. and you want this sub domains to point to your main domain name mywebsite.nl. In stead of creating A-records for each sub domain and binding it to the IP address of your domain, you create an alias, a CNAME-record. See the table below, in case your IP address changes, you only have to edit 1 A-record and all subdomains follow automatically because de CNAMES point to the main domain with the A-record.

```
(Sub)domain
Type
Target
mywebsite.nl

A
11.22.33.444
www.mywebsite.nl

CNAME
mywebsite.nl
ftp.mywebsite.nl

CNAME
mywebsite.nl
mail.mywebsite.nl

CNAME
mywebsite.nl 
```

# python - 如何使用 Python 访问 Flickr API？

> ID：13434623
> 
> 赞同：-1
> 
> 时间：2012-11-17T20:46:17.623
> 
> 标签：python, api, flickr

[我按照FlickrAPI 主页](http://stuvel.eu/flickrapi)上的说明安装了所有内容，但是当我尝试运行时：

```
import flickrapi
api_key = '1a4c975fa83048436a2086bcab7d2290'
api_password = '5e069eae20e60297'
flickrclient = flickrapi.FlickAPI(api_key, api_password)
favourites = flickrClient.favorites_getPublicList(user_id='userid')
photos = flickr.photos_search(user_id='73509078@N00', per_page='10')
sets = flickr.photosets_getList(user_id='73509078@N00')
for photo in favourites.photos[0].photo:
print photo['title'] 
```

我从命令提示符处收到此消息：

```
C:\Users\Desktop>python api.py
Traceback (most recent call last):
File "api.py", line 4, in <module>
flickrclient = flickrapi.FlickAPI(api_key, api_password)
AttributeError: 'module' object has no attribute 'FlickAPI' 
```

有任何想法吗？？我几乎尝试了一切

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:29:10.657

该文件`C:\Users\XXXXXX\Desktop\FLICKR API\flickrapi.py`不是包*的*一部分`flickrapi`。请重命名它，它掩盖了真正的图书馆。现在它正在被导入*而不是*已安装的包。

`flickrapi`包本身包含一个目录，其中包含一个文件`__init__.py`。打印`flickrapi.__file__` *应*导致路径以`flickrapi\__init__.py`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T20:57:12.657

`FlickAPI`不一样`FlickrAPI`。你缺少一个`r`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:39:37.140

在您的“ *flickrclient = flickrapi.FlickAPI* ”行中，您在 FlickAPI 中缺少一个“r”。

此外，在下一行，您的 *"user_id='userid'"* 参数需要一个实际的用户 ID，例如 '999999@N99'

希望您在几个月前发现并使其正常工作！:)

# avaudioplayer - 没有耳机的 iPhone 上的 AVAudioPlayer 声音乱码

> ID：13434628
> 
> 赞同：1
> 
> 时间：2012-11-17T20:47:17.910
> 
> 标签：avaudioplayer

当用户选择它们并按下播放按钮时，我想要播放 23 个音乐文件（长度为 10-20 秒）。它可以在我的 iPad 和模拟器上找到，带或不带耳机。但在不带耳机的 iPhone 设备上，大约 80% 的文件听起来是乱码，音量很低，有些几乎无法辨认。我可以插入耳机，它们听起来不错。刚拔下耳机，声音又是乱码。

由于有些文件总是可以正常播放，因此我将我使用的所有原始 mp3 转换为采样率为 44100 的 AAC 格式。但是相同的文件播放正常，而大多数文件在 iphone 设备上播放时会失真。

我尝试了 AVAudioSession 类别的几种设置：播放、playAndRecord、环境。我尝试将文件存储在核心数据中并使用 initWithData 而不是 initWithContentsOfURL。谁能建议我还可以尝试什么？或者我如何才能找到我为什么会遇到这个问题的线索？

这是我的代码。有3个相关文件。ViewController 有一个按钮来播放选定的音乐文件，一个 AVPlaybackSoundController 有所有的音频逻辑，还有一个 Singleton 有一个带有文件名的数组。

我的 ViewController 通过 Nib 创建了一个 AVPlaybackSoundController。

```
IBOutlet AVPlaybackSoundController *avPlaybackSoundController;
@property (nonatomic, retain) AVPlaybackSoundController *avPlaybackSoundController;

- (IBAction) playButtonPressed:(id)the_sender
{
    self.currentRhythmSampleIndex =  arc4random() % [[CommonData sharedInstance].rhythmSampleArray count];
    [self.avPlaybackSoundController playMusic:self.currentRhythmSampleIndex];
    self.playBtn.hidden=YES;
    self.pauseBtn.hidden=NO;
} 
```

AVPlaybackSoundController.m

```
- (void) awakeFromNib
{
    [self initAudioSession:AVAudioSessionCategoryPlayback];
    [self initMusicPlayer];
}
- (void) initAudioSession:(NSString *const)audioSessionCategory
{
    NSError* audio_session_error = nil;
    BOOL is_success = YES;
    is_success = [[AVAudioSession sharedInstance] setCategory:audioSessionCategory error:&audio_session_error];
    if(!is_success || audio_session_error){
        NSLog(@"Error setting Audio Session category: %@", [audio_session_error localizedDescription]);
    }
    [[AVAudioSession sharedInstance] setDelegate:self];
    audio_session_error = nil;
    is_success = [[AVAudioSession sharedInstance] setActive:YES error:&audio_session_error];
    if(!is_success || audio_session_error){
        NSLog(@"Error setting Audio Session active: %@", [audio_session_error
                                                      localizedDescription]);
    }
}
- (void) initMusicPlayer
{
    NSError* file_error = nil;
    NSURL* file_url = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle]
                                                      pathForResource:@"musicFile1" ofType:@"m4a"]
                                                        isDirectory:NO];    
    avMusicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:file_url
                                                       error:&file_error];
    if(!file_url || file_error){
        NSLog(@"Error loading music file: %@", [file_error
                                            localizedDescription]);
    }
    self.avMusicPlayer.delegate = self;
    self.avMusicPlayer.numberOfLoops = 0xFF; 
    [file_url release];
}    

-(void) playMusic:(NSUInteger)rhythmSampleIdx
{
    CommonData *glob = [CommonData sharedInstance];
    if (rhythmSampleIdx > [glob.rhythmSampleArray count])
        return; // bug if we hit here

    // if we were already playing it, just resume
    if ((self.avMusicPlayer) && (rhythmSampleIdx == self.currentRhythmSampleIndex)){
        [self.avMusicPlayer play];
    }
    else{ // re-init player with new rhythm
        if (self.avMusicPlayer){
            [self.avMusicPlayer stop];
            [self.avMusicPlayer setCurrentTime:0.0];
        }
        NSError* error = nil;
        RhythmSample *rhythmSample = [glob.rhythmSampleArray objectAtIndex:rhythmSampleIdx];
        NSString* rhythm_filename = [self getRhythmFileName:rhythmSampleIdx];
        NSURL* file_url = [[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle]
                                                               pathForResource:rhythm_filename ofType:@"m4a"] isDirectory:NO]autorelease];
        self.avMusicPlayer = [[[AVAudioPlayer alloc] initWithContentsOfURL:file_url error:&error]autorelease];
        [self.avMusicPlayer prepareToPlay];  // shouldn't be needed since we are playing immediately
        if(error){
            NSLog(@"Error loading music file: %@", [error localizedDescription]);
        }else{
            self.avMusicPlayer.delegate = self;
            self.avMusicPlayer.numberOfLoops = 0xFF; // repeat infinitely
            self.currentRhythmSampleIndex = rhythmSampleIdx;
            [self.avMusicPlayer play];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:32:09.120

我最终决定从不同的来源获取声音文件。新的声音文件可以正常播放。我仍然不知道为什么旧的声音文件会在耳机上播放，但不是没有它们。我真的不喜欢在不了解它们为什么起作用的情况下寻找解决方案。

# iphone - 视图的发光效果禁用其中的按钮

> ID：13434633
> 
> 赞同：1
> 
> 时间：2012-11-17T20:47:53.710
> 
> 标签：iphone, objective-c, ios, xcode

我有`uiscrollview`一些按钮。我想让一个特定的按钮发光。

我使用以下代码制作了按钮的发光脉动效果：

（UIView 中的按钮）

```
- (IBAction)selectChampionAction:(id)sender{
    if ( self.timer ) {
            // Stop timer
            [self.timer invalidate];
            self.timer = nil;
            // Workaround: we have to return the layer's delegate property to what it was
            // Otherwise, we will encounter an unexpected result
            self.viewForGlowing.layer.delegate = self.viewForGlowing;
        } else {
            // Woraround: UIView's layer property does not support animation by default
            // assigning nil to layer's delegate property enables the animation somehow.
            self.viewForGlowing.layer.delegate = nil;
            // Start timer
            self.timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerExpired:) userInfo:nil repeats:YES];
            [self.timer fire];
        }
}

 - (void) timerExpired:(NSTimer *) timer
{
    if ( self.viewForGlowing.layer.shadowRadius == 20 ) {
        // Increase

        [CATransaction begin];
        [CATransaction setValue:[NSNumber numberWithFloat:1.0f] forKey:kCATransactionAnimationDuration];

        self.viewForGlowing.layer.shadowRadius = 30; 
        self.viewForGlowing.layer.shadowOpacity = 1;
        [CATransaction commit];

    } else {
        // Decrease

        [CATransaction begin];
        [CATransaction setValue:[NSNumber numberWithFloat:1.0f] forKey:kCATransactionAnimationDuration];
        self.viewForGlowing.layer.shadowRadius = 20;
        self.viewForGlowing.layer.shadowOpacity = 0.7;
        [CATransaction commit];
    }
} 
```

但是当我按下其他按钮时，发光按钮停止响应。

我想这是因为这行代码

> self.viewForGlowing.layer.delegate = nil;

* * *

我的问题：

*   还有其他方法可以使 UIButton 发光吗？
*   按下其他按钮后如何做出按钮响应？

# javascript - 当用户在外部点击时自动关闭浏览器窗口

> ID：13434635
> 
> 赞同：0
> 
> 时间：2012-11-17T20:48:09.107
> 
> 标签：javascript, html

当用户在窗口外点击时，是否可以自动关闭 Web 浏览器窗口（例如，在 Google Chrome 中）？为了做到这一点，需要有一些方法来检测窗口是否被聚焦，以及关闭窗口的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:54:37.450

大多数当前浏览器只允许您关闭父级的子窗口。
您不能通过脚本关闭主父窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:03:19.973

默认情况下，大多数浏览器不允许 javascript 关闭不是由 javascript 本身打开的窗口。但是，如果您使用例如`window.open(...)`，您可以使用关闭该窗口`window.close()`。

因此**，如果**您有一个由 javascript 打开的窗口，您可以执行以下操作：

```
window.addEventListener('blur', function(){window.close();}, false); 
```

# java - 非代理 Hibernate 对象的优雅方式

> ID：13434636
> 
> 赞同：3
> 
> 时间：2012-11-17T20:48:09.480
> 
> 标签：java, jakarta-ee, jax-rs, gson

我正在使用 Jax-RS 和 GSON 创建 Web 服务。现在，GSON 无法转换 HibernateProxy 对象，我有一些问题。我有一个 API，以便我可以急切加载和延迟加载。当我想进行 Eagerload 时，我使用 Hibernate.initialize(...)。然而，这似乎并不能保证一个对象是未经代理的？

那么，您将在何处、何时以及如何取消代理对象呢？当对象也可能与其他需要非代理的对象有关系时，你如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T06:40:51.150

这是一个示例代码：

```
public <P> List<P> unproxy(Collection<P> objects) {
    Session session = sessionFactory.getCurrentSession();
    List<P> result = new ArrayList<P>();
    for (P t : objects) {
        Object unproxied = ((SessionImplementor)session).getPersistenceContext().unproxy(t);
        result.add((P) unproxied);
    }
    return result;
} 
```

# c - 使用 make 编译时，main 的类型和以前的 main 定义存在冲突

> ID：13434637
> 
> 赞同：0
> 
> 时间：2012-11-17T20:48:23.910
> 
> 标签：c, makefile

我正在尝试将三个文件一起编译，在 passweb.c 中有一个主要方法。

继承人 passweb.c

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <cipher.c>
#include <menu.c>

long pointer;
char *createRecord(char *name, char *password, char *type);
char *file = "password.csv";
int main(int argc, char *argv[]){
    if(fopen(file,"r")==NULL){
        FILE *newFile = fopen(file,"w+");
        fclose(newFile);
    }
    if(strcmp(argv[0],"-menu")==1){
        menu();
    }
    else if(strcmp(argv[0],"-add")==1){
        add(argv[1], argv[2], argv[3]);
    }
    else if(strcmp(argv[0],"-edit")==1){
        edit(argv[1],argv[2],argv[3],argv[4],argv[5],argv[6]);
    }
} 
```

和密码.c

```
#include <stdio.h>
#include <stdlib.h>

int Encrypt(char *fileName){
    int offset=5;
    Shift(fileName, offset);
}
int Decrypt(char *fileName){
    int offset=-5;
    Shift(fileName, offset);
} 
```

生成文件：

```
passweb: passweb.c menu.c cipher.c
      gcc -o passweb passweb.c menu.c cipher.c -I. 
```

错误：

```
passweb.c:10: error: conflicting types for ‘main’
./cipher.c:3: error: previous definition of ‘main’ was here 
```

我无法弄清楚我做错了什么。提前感谢您的宝贵时间！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:52:46.920

不要将源文件包含在源文件中。摆脱以下：

```
#include <cipher.c>
#include <menu.c> 
```

您编写它的方式是编译 menu.c 和 cipher.c 两次。首先是编译 passweb.c，然后是编译 menu.c 和 cipher.c。

# javascript - javascript 内容可以在两个页面之间共享吗？

> ID：13434644
> 
> 赞同：1
> 
> 时间：2012-11-17T20:49:12.023
> 
> 标签：javascript, html

我正在尝试制作一种地图，其中包含基于用户选择的叠加数据。目前，我只是缩小了同一页面上的图像，但它很难阅读。我在想我可以将整个图像放在 iframe 中，让用户能够在地图上滚动，但我不确定我是否可以在两个页面之间使用 javascript。有可能还是我必须想出另一种方法来获得全尺寸图像？

[http://xicorp.webs.com/airlinemap.html](http://xicorp.webs.com/airlinemap.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:51:52.343

如果这两个页面在同一个域中，那么您将能够在它们之间传输信息。如果没有，仍然有方法在域之间传输 JSON 数据（使用 JSONP），但会更难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:04:46.430

是的你可以。事实上，您可以在一个 JavaScript 文件中调用仅存在于另一个文件中的函数（前提是您以正确的顺序添加它们）。

如果不在同一个域中，可以使用 JSONP 自由地来回发送跨域请求。

[带有 jquery 的 jsonp](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)

# java - 从 Application Loader 上传到 iTunes Store 时出错

> ID：13434645
> 
> 赞同：0
> 
> 时间：2012-11-17T20:49:15.553
> 
> 标签：java, ios, xcode, application-loader

我连续 12 多个小时试图解决我一直在尝试使用 Application Loader 将我的 IOS 二进制文件上传到 iTunes 连接的问题：

![在此处输入图像描述](../Images/1b7b60fca3086192a2002fc4aae4f0b3.png)

我搜索了很多，我发现它似乎可以帮助大多数有同样问题的人： ![在此处输入图像描述](../Images/e79f51f3c844bdba8ebecbc91de2bca5.png)

[StackOverlow 链接](https://stackoverflow.com/questions/5783481/an-error-occurred-uploading-to-the-itunes-store)

但这根本行不通！我在控制台上运行 java -version 仍然显示 1.7

我只是找不到 Java Preferences 来切换 Java JM，我很恐慌，我只是不知道还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:49:56.790

我终于解决了，这个链接帮助了我：

[关联](https://discussions.apple.com/thread/4451649?start=0&tstart=0)

我希望它可以为有同样问题的人节省一些时间......

# emacs - AUCTeX 列标记

> ID：13434653
> 
> 赞同：2
> 
> 时间：2012-11-17T20:51:03.330
> 
> 标签：emacs, elisp, auctex

我正在使用 Emacs，刚刚为 LaTeX 构建了 AUCTeX。无论如何，因为我在没有 AUCTeX 的情况下用 LaTeX 编写时使用了列标记扩展，所以它不再适用了。我正在查看互联网，但找不到任何帮助。是否有允许在 AUCTeX 上使用列标记的 elisp 代码行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T20:04:05.570

它在带有内置 auctex 和 column-marker.el 更新 #: 312 的 emacs 24.3.1 中适用于我。

这里有一个例子（右窗口）： ![](../Images/72fdc90ed104c8fd7ef5000bfbdf8ef8.png)

与直线的偏差来自用于插入符号和指数、节标题等的不同字体/字体大小。尽管该列标记显示了与行首具有特定字符距离的列。

# c++ - C ++中数组范围内的有效元素计数

> ID：13434654
> 
> 赞同：2
> 
> 时间：2012-11-17T20:51:04.757
> 
> 标签：c++, arrays, count, range

我有一个大的、严格递增的数组（1000 万个整数），用于另一个更大的数据数组。没有元素`data`大于 50。例如，

```
unsigned char data[70*1000*1000] = {0,2,1,1,0,2,1,4,2, ...};
unsigned int offsets[10*1000*1000] = {0,1,2,4,6,7,8, ...}; 
```

然后我想找到一系列范围内每个元素的计数，这些范围直到运行时才知道，仅包括其偏移量包含在`offsets`数组中的元素。每个范围的端点指的是数据数组的索引，而不是偏移量。例如，范围 [1,4] 的数据将是：

```
1 zero
1 one
1 two 
```

结果仅包括一个“一”，因为虽然`data[3]`和`data[2]`都等于一，但 3 不包括在`offsets`.

我需要为数百个范围计算这些分箱计数，其中一些跨越整个数组。我考虑遍历数据数组以存储每个 bin 和元素的累积总和，但内存要求会令人望而却步。这是我的实现的简单版本：

```
for(int i=0; i<range_count; i++){
    unsigned int j=0;
    while(j<range_starts[i]) pi++;
    while(j < 10000000 and data[j]<=range_ends[i]) bins[i][data[offsets[j++]]]++;
} 
```

**有没有更有效的方法来计算这些计数？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:56:45.417

虽然鲁本的回答确实将计数时间缩短了大约一半，但对于我的应用程序来说仍然太慢了。我在这里为好奇的人提供我的解决方案。

`data`首先，我通过将数组中未索引的元素设置`offsets`为未使用的值（例如 51）来进行优化。这消除了跟踪偏移量的需要，因为在报告结果时我可以简单地忽略第 51 个 bin 的内容。

虽然我在答案中提到存储每个 bin 和元素的累积计数需要太多内存，但我能够以线性时间存储每个 bin 和范围端点的累积计数。然后，对于每个范围，我通过从右端点的计数中减去该范围左端点的该元素的累积计数来计算每个元素的出现次数。这是我使用的：

```
struct range{
    unsigned int lowerbound;
    unsigned int upperbound;
    unsigned int bins[52];
};

struct endpoint{
    int n;
    unsigned int counts[50];
};

range ranges[N_RANGES];
endpoint endpoints[N_RANGES*2];
cumulative_counts[52];

// ... < data manipulation > ... 

endpoint* first_ep = &endpoints[0];
endpoint* last_ep = &endpoints[N_RANGES*2-1];
endpoint* next_ep;

for(next_ep=&endpoints[0];next_ep<last_ep;next_ep++){
    unsigned char* i = &data[next_ep->n];
    unsigned char* i_end = &data[(next_ep+1)->n];
    for(int j=0;j<51;j++) next_ep->counts[j] = cumulative_counts[j];
    while(i<i_end) cumulative_counts[*(i++)]++;
}
for(int i=0;i<51;i++) last_ep->sums[i] = cumulative_counts[i];
for(int i=0;i<N_RANGES;i++){
    while(first_ep->n != ranges[i].lowerbound) first_ep++;
    last_ep = first_ep+1;
    while(last_ep->n != ranges[i].upperbound) last_ep++;
    for(int j=0;j<51;j++) tests[i].bins[j] = end_ep->counts[j]-start_ep->counts[j];
    ranges[i].bins[data[last_ep->n]]++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:15:12.910

当您说您的偏移量限制为 50 时，听起来您已经有了答案——它们似乎是正整数。

为每个数据值（从 0 到 50）索引一个向量向量，然后进行其他计算会便宜得多。这将是一种反向索引，从数据到数据库条目。

因此，您将拥有：

```
data[50][...] = {offsets related to the given data value} 
```

将执行计算，检查每个数组的初始元素，并从一个数组跳到另一个数组，保持最后一个验证元素的位置。

这将与整个数组的元素数量、搜索范围的乘积、数组“数据”（0 到 50）中的元素数量乘以线性关系，考虑到您需要多次执行此操作，不会不是最好的方法。

那么，另一种方法是，对于每个数据条目，从 0 到 50，使用二叉树——甚至是散列结构——，这样您现在就可以知道数据库条目标识符是否属于当前数据元素（从 0 到 50）。在最好的情况下，对于每次迭代，这将与您的搜索范围呈线性关系。

我在分析中将 50 视为常数，因此仅在第一个数据数组或数组“数据”的所有 50 个条目中搜索将是相同的。我不确定这是否是一个有效的假设，所以复杂性是：O(nr)，n 等于您的数据最大范围（0 到 50），r 等于您的搜索范围（条目数您的数据库）。这对于每次计算都是有效的，因此，考虑到 i 作为计算次数，复杂度将被给出为 O(nri)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T21:40:06.800

这能行吗。

（演示在**[http://ideone.com/6rAj7k](http://ideone.com/6rAj7k)**直播）

```
#include <algorithm>
#include <iostream>

unsigned char data[/*70*1000*1000*/]   = {0,2,1,1,0,2,1,4,2};
unsigned int offsets[/*10*1000*1000*/] = {0,1,2,4,6,7,8};

using namespace std;

void do_something_for_data_index(unsigned int data_index)
{
    std::cout << "visited: " << (int) data[data_index] << " (at index " << data_index << ")\n";
}

void foo(size_t first_data_index, size_t high_data_index)
{
    const auto low  = lower_bound(begin(offsets), end(offsets), first_data_index);
    const auto high = upper_bound(low           , end(offsets), high_data_index);
    for(auto offset_it = low; offset_it != high; ++offset_it)
    {
        do_something_for_data_index(*offset_it);
    }
}

int main()
{
    foo(1,4);
} 
```

输出：

```
visited: 2 (at index 1)
visited: 1 (at index 2)
visited: 0 (at index 4) 
```

# jquery - 在函数中调用 .hide 函数

> ID：13434656
> 
> 赞同：0
> 
> 时间：2012-11-17T20:51:27.037
> 
> 标签：jquery, function, simplecart

我正在使用 simplecart.js 来处理我网站上的电子商务。

我有以下脚本。从本质上讲，这计算了我的邮资价格，它以 2 英镑的基本价值开始，并根据篮子中的产品数量增加价值。效果很好。

问题在于，因为它使用 2 英镑的基本价格，所以即使篮子里没有任何东西也会显示出来。因此，如果购物篮数量为 0，或者购物篮为空，我想“隐藏”包含邮费的 div。逻辑是：少于 9 个产品，从 2 + 篮子中的数量开始。任何高于 9 的值都返回 12 英镑。

我试图使用 .hide 但现在我知道这不起作用，因为它在函数中调用函数，而且它似乎不起作用。

有什么想法可以实现吗？

```
<script>
simpleCart({
shippingCustom: function(){
  if (simpleCart.quantity() == 0){
          $('.postage').hide();
        } else if (simpleCart.quantity() < 9 {
    return (2 + simpleCart.quantity());
  } else {
          return 12;
        }
}
</script> 
```

脚本可以在[本页](http://www.rubytuesdaycreative.co.uk/gracie.html)底部找到。您可以打开购物篮，看看我对默认 2 英镑价值的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:55:40.693

尝试相反的逻辑。将购物车默认设置为隐藏（在 css 中或通过 js 脚本）。然后在购物车具有所需值时显示购物车：

```
if (simpleCart.quantity() > 0){
  $('.postage').show(); 
} 
```

您可能需要使用 .change() 或 .click() 函数（取决于您的设置方式），以便`$('.postage').show();`根据用户单击“添加到购物车”按钮触发。

# python - 网页抓取 - 网页登录问题

> ID：13434664
> 
> 赞同：2
> 
> 时间：2012-11-17T20:52:06.693
> 
> 标签：python, web-scraping, casperjs

所以我试图抓取登录系统背后的东西。我尝试使用 CasperJS，但表单出现问题，所以也许这不是要走的路；我检查了网站的源代码，表单名称是“theform”，但我永远无法登录，一定是做错了什么。是否有任何关于如何使用 CasperJS 正确执行此操作的教程，我查看了 API 和 google 并没有真正起作用。

或者有人对如何轻松进行网络抓取有任何建议。我必须能够检查一个简单的条件状态并单击几个按钮，仅此而已。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:27:44.097

作为 CasperJS 的作者，不幸的是，如果没有看到真实的代码或任何可重现的测试用例，我就无法为您提供太多帮助。

由于您的帖子被标记为`Python`，您可能会对 Ghost.py 感兴趣，这是一个受[CasperJS](https://github.com/jeanphix/Ghost.py)启发但具有 Python API 的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:16:27.197

在您的问题中，您提到了 CasperJS，但您将问题标记为 python。如果您想使用 python 作为语言，您可以查看描述用于网络抓取的不同工具的[视频](http://www.youtube.com/watch?v=52wxGESwQSA)

要使用登录管理网页，您可以使用 上面网站的[mechanize](http://wwwsearch.sourceforge.net/mechanize/#examples) 示例代码：

```
br = mechanize.Browser()
# Explicitly configure proxies (Browser will attempt to set good defaults).
# Note the userinfo ("joe:password@") and port number (":3128") are optional.
br.set_proxies({"http": "joe:password@myproxy.example.com:3128",
"ftp": "proxy.example.com",
            })
# Add HTTP Basic/Digest auth username and password for HTTP proxy access.
# (equivalent to using "joe:password@..." form above)
br.add_proxy_password("joe", "password")
# Add HTTP Basic/Digest auth username and password for website access.
br.add_password("http://example.com/protected/", "joe", "password") 
```

其他好的python选择是[scrapy](http://scrapy.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T23:19:31.333

[您可以使用mechanize](http://wwwsearch.sourceforge.net/mechanize/)（Python 中的有状态程序化网页浏览）登录 ！

对于解析页面，您可以使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T21:08:56.747

如果您只需要废弃数据——也许您会尝试一些更简单的方法？如果您要废弃的网站没有花哨的 javascript，那么[mechanize可以很好地用于此类目的。](http://pypi.python.org/pypi/mechanize/0.2.5)

这是一个很好的讨论步骤：[Python mechanize login to website](https://stackoverflow.com/questions/4225721/python-mechanize-login-to-website)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T03:06:10.410

因为您提到了 CasperJS，所以我可以假设网站使用 JavaScript 生成了一些数据。我的建议是检查 WebKit。它是一个浏览器“引擎”，它可以让你对网站做任何你想做的事情。你可以使用 PyQt4 框架，它非常好，并且有很好的文档。

# c++ - Visual Studio 无法在布尔运算的上下文中实例化强制转换（转换）运算符模板 (T=bool)

> ID：13434672
> 
> 赞同：12
> 
> 时间：2012-11-17T20:53:00.387
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, visual-studio-2012

为什么 Visual Studio 2010 和 Visual Studio 2012 无法编译此代码？

Codepad.org、Xcode、gcc、LLVM、Clang 都没有问题，但 Visual Studio 会大便：

```
struct S {
  template <class T> inline operator T () const { return T (); }
};
int main () {
  // NOTE: "S()" denotes construction in these examples
  struct F {
    void operator() (bool) { }
    static void toint (int) { }
    static void tostr (char const*) { }
  };
  bool b1 = S (); // Okay
  bool b2 (S ()); // Okay
  F () (S ());    // Okay
  F::toint (S ());// Okay
  F::tostr (S ());// Okay

  S () || false;  // Error: error C2676: binary '||' : 'vf::S' does
                  // not define this operator or a conversion to a type
                  // acceptable to the predefined operator
  return 0;
} 
```

添加`explicit`关键字不会改变 gcc 或 clang 的任何事情。产生的错误信息是：

```
error C2676: binary '||' : 'S' does not define this operator or a
  conversion to a type acceptable to the predefined operator 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:48:06.227

这是一个错误，至少在 C++03 中（不确定 C++11）。

根据 C++03 §13.3.1.2 中的重载决策规则，选择内置`||`运算符，因为没有`||`为`S`.

§5.15/1 说：

> `||`运算符从左到右分组。操作数都被隐式转换为`bool`（第 4 条）。[...]

§12.3/2 说：

> 用户定义的转换仅适用于明确的情况（10.2、12.3.2）。[...]

§12.3/5：

> 仅当用户定义的转换明确时，才会隐式使用它们。[...] 函数重载决议 (13.3.3) 选择最佳转换函数来执行转换。

§13.3.2/3：

> 其次，为了`F`成为一个可行的函数，每个参数都应该存在一个隐式转换序列（13.3.3.1），该序列将该参数转换为对应的参数`F`。

明确`S`定义了用户定义的转换为`bool`. 内置`||`运算符是重载决议的可行函数，因为它是唯一的，所以它是最好的。所以表达式是良构的。

另外值得注意的是§4/3，它说：

> 当且仅当声明“<code>T t=e;”时，表达式`e`可以隐式转换为类型 `T`对于一些发明的临时变量`t`（8.5），是良构的。[...]

所以我很好奇 Visual Studio 是否也会为语句产生错误`bool b = S();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:43:35.790

如果您禁止将隐式类型转换为布尔值，编译器必须检查是否存在运算符|| 定义 wich 需要一个布尔值。这是（希望！）未定义，因为它会破坏快捷方式。所以他必须检查是否定义了一个转换操作符，它为全局 || 操作符定义了一些东西。你能通过在 bool、BOOL 或 int 中添加一个转换运算符来解决这个问题吗（无论如何都是一样的^^）......？

`operator bool() {return this != null && this != 0xcccccccc;}`

这个 BTW 只是一个 hack，最好提供一个逻辑上有意义的转换。

我在调试模式下为 0xcccccccc 标记未初始化的内存定义了一个常量，但我不知道。

# c# - 更新目标触发器

> ID：13434675
> 
> 赞同：3
> 
> 时间：2012-11-17T20:53:04.303
> 
> 标签：c#, wpf, mvvm

这样的事情是否存在（例如 UpdateSourceTrigger 存在）还是可能以某种方式存在？我只想在需要时更新目标。一次性绑定不起作用，因为我不希望它更新一次 - 我想在需要时更新它，而不是在绑定对象更改时更新。

所以我的问题很简单：如何在源更改时不更改目标，但在调用某些内容时更改目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:08:13.053

您可以在需要时重新绑定代码中的数据。或者试试 BindingExpression.UpdateTarget()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:59:23.617

您可以做的另一件事是使用附加行为，该行为挂钩到与您的绑定不直接相关的某些事件。下面是一些工作代码的框架，只是为了给你一些想法。

```
internal class ContactcControlPropertySetter : Behavior<ContentControl>
{
    protected override void OnAttached() {
        base.OnAttached();
        if (AssociatedObject == null)
            throw new InvalidOperationException("AssociatedObject must not be null");

        AssociatedObject.DataContextChanged += OnDataContextChanged;
        CultureManager.UICultureChanged += OnCultureChanged;
    }

    protected override void OnDetaching() {
        AssociatedObject.DataContextChanged -= OnDataContextChanged;
        CultureManager.UICultureChanged -= OnCultureChanged;
    }

    private void OnCultureChanged(object sender, EventArgs e) {
        SetProperties();
    }

    private void SetProperties()
    {
        ...
        var tooltipFmt = _resourceManager.GetString(key, culture);
        ...
        AssociatedObject.ToolTip = tooltip;
        ...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:44:26.810

如果您事先知道不希望更新 UI 的条件，那么`PropertyChangedEvent`在这种情况下不提高如何。（如果您正在课堂上实施）`INPC`。`ViewModel`

我知道这行不通，`Dependency Property`因为`PropertyChangedEvent`它是由 DP 内部处理的。但在正常情况下`CLR properties`它会起作用。例如 -

```
<TextBlock Text="{Binding Name}"/> 
```

**视图模型 -**

```
public string Name
{
   get { return name; }
   set
   {
      name = value;
      if(UpdateUI) // Your condition here
      {
         OnPropertyChanged("Name");
      }
   }
} 
```

# android - 运行模拟器时的三星加载屏幕

> ID：13434678
> 
> 赞同：2
> 
> 时间：2012-11-17T20:53:19.623
> 
> 标签：android, avd

我正在尝试使用多种模拟器（nexus s、7 等）从 eclipse 运行一个 android 应用程序，但模拟器从未通过“三星加载屏幕”这是一张描述我的意思的图片：[http：/ /oi47.tinypic.com/ei5vf4.jpg](http://oi47.tinypic.com/ei5vf4.jpg) 我试图在该图片中包含尽可能多的细节。

谢谢。

编辑：由于我的控制台中有一些红线，我编辑了我的帖子，这是控制台日志：

```
[2012-11-18 00:00:06 - myFirstAndroidApp] ------------------------------
[2012-11-18 00:00:06 - myFirstAndroidApp] Android Launch!
[2012-11-18 00:00:06 - myFirstAndroidApp] adb is running normally.
[2012-11-18 00:00:06 - myFirstAndroidApp] No Launcher activity found!
[2012-11-18 00:00:06 - myFirstAndroidApp] The launch will only sync the application           package on the device!
[2012-11-18 00:00:06 - myFirstAndroidApp] Performing sync //after this line I choose the device in this case nexus s
[2012-11-18 00:00:18 - myFirstAndroidApp] Launching a new emulator with Virtual Device     'AVD_for_Nexus_S_by_Google'
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] Failed to create Context 0x3005
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] emulator: WARNING: Could not initialize OpenglES    emulation, using software renderer.
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:18 - Emulator] could not get wglGetExtensionsStringARB
[2012-11-18 00:00:19 - myFirstAndroidApp] New emulator found: emulator-5554
[2012-11-18 00:00:19 - myFirstAndroidApp] Waiting for HOME ('android.process.acore') to  be launched... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:27:22.033

转到运行-> 运行配置

如果选择了“启动默认活动”，请确保您在 AndroidManifest 中有一个 LAUNCHER。

如果没有，请确保在“启动”中选择一个活动。

希望这可以帮助。

# node.js - 节点js tls1.2和身份验证

> ID：13434679
> 
> 赞同：3
> 
> 时间：2012-11-17T20:53:37.250
> 
> 标签：node.js

是否有任何用于 https 服务器的示例代码使用 a`SSLCertificateFile` 并`SSLCertificateKeyFile`使用 tls 1.2 进行身份验证？

任何指向相关样本的指针都将受到高度赞赏。

ssllabs 声明它容易受到 DoS 攻击，因为它支持客户端发起的重新协商

而且我无法让 fusker 创建一个 ssl 服务器

```
var https = require('https');
var fs = require('fs');
var fusker = require('fusker');

//var server = fusker.https.createServer(443);
//var io = fusker.socket.listen(server);

var options = {
key: fs.readFileSync('/etc/ssl/server.key'),
cert: fs.readFileSync('/etc/ssl/mathpdq.crt'),
ciphers: 'RC4-SHA:RC4:ECDHE-RSA-AES256-SHA:AES256-SHA:HIGH:!MD5:!aNULL:!EDH:!AESGCM',
honorCipherOrder: true
};

https.createServer(options, function (req, res) {
res.writeHead(200);
res.end("hello world\n");
}).listen(443); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T16:58:58.267

创建一个 https 监听器很容易，但不清楚使用 TLS 1.2 创建一个监听器是否存在特定问题。最近的节点针对足够新版本的 OpenSSL 构建，以获取他们的 1.2 支持。

然后你需要 ciphers 和 HonorCipherOrder 选项，如下所述：[http ://nodejs.org/api/tls.html](http://nodejs.org/api/tls.html)

例如

```
var https = require('https');
var fs = require('fs');

var options = {
    key: fs.readFileSync('my.key'),
    cert: fs.readFileSync('my.crt'),
    ciphers: 'ECDHE-RSA-AES256-SHA:AES256-SHA:RC4-SHA:RC4:HIGH:!MD5:!aNULL:!EDH:!AESGCM',
    honorCipherOrder: true
};

var server = https.createServer(options, function (req, res) {
    ...});

server.listen(443); 
```

# java - 如何在Java中搜索坐标数组？

> ID：13434681
> 
> 赞同：1
> 
> 时间：2012-11-17T20:53:47.203
> 
> 标签：java, arrays, search, coordinates

我有一个Java数组。数组的每个条目都是一对数字（x 和 y 坐标）。

从技术上讲，我的数组的一个例子是：

setOfPoints = {(1,2), (3,4), (5,6), (1,9), (7,4)}

如何搜索该列表并检查 (3,4) 是否属于该集合？

理想情况下，我想做一个 Java 函数 isCoordinateInSet((3,4), setOfPoints)。我还想避免使用可能会增加操作时间的 for 循环。我正在考虑使用 Java Maps fpr 这个任务。你怎么看？

我没有遵循上面的 Java 语法，但我是这样描述的，以便更好地解释我想要做什么。

我会很感激你的意见。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:56:39.117

您可以创建一个包含 (x,y) 对的类 Coordinate 并覆盖其 equals/hashcode 方法以使具有相同 x 和 y 的两个实例相等。

然后在数组中为每对创建一个 Coordinate 实例，并将它们添加到 a`Set<Coordinate>`中，例如 a `HashSet`。

那么你`isCoordinateInSet`只是简单地调用`set.contains(new Coordinate(3,4));`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T21:02:24.827

```
public class Point{

    private int x,y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public void setX(int x) {
        this.x = x;
    }

    public int getY() {
        return y;
    }

    public void setY(int y) {
        this.y = y;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Point point = (Point) o;

        if (x != point.x) return false;
        if (y != point.y) return false;

        return true;
    }

    @Override 
    public int hashCode() {
        int result = x;
        result = 31 * result + y;
        return result;
    }
} 
```

* * *

```
 Set<Point> points = new HashSet<>();
    points.add(new Point(3,4));
    points.add(new Point(5,6));
    points.add(new Point(1,2));
    points.add(new Point(3,5));

    System.out.println(points.contains(new Point(3,4)));
    System.out.println(points.contains(new Point(1,2)));
    System.out.println(points.contains(new Point(2,4))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T21:01:11.820

Apache 公共库有一个名为的类`MultiHashMap`，它在`org.apache.commons.collections`包中。我认为您可以使用[MultiHashMap](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/MultiHashMap.html)来搜索特定坐标。

```
MultiMap mhm = new MultiHashMap();
mhm.put(3,5);
mhm.put(3,4);
mhm.put(5,6);
mhm.put(3,8);
List list = (List) mhm.get(3); 
```

`list`将包含 5,4 和 8。找到*x 坐标*值后，您将在此列表中搜索*y 坐标。*

# javascript - JQuery - 为隐藏的输入添加值

> ID：13434684
> 
> 赞同：1
> 
> 时间：2012-11-17T20:53:56.390
> 
> 标签：javascript, jquery

如何为隐藏的输入字段增加价值？在这种情况下，输入被创建为变量，然后在需要时插入到 DOM 中。编码：

```
<script>
    var forma = $('form#mali_oglas'),
    pomoc = $('div[role=pomoc]'),
    div = $('.mali_oglas_pomoc'),
    input = forma.find('input, textarea'),
    code = forma.find('#code')
    time_input = '<input type="hidden" name="time" />',
    paid_input = '<input type="hidden" name="paid" value="1" />';

    $('textarea').autosize();

    input.on('click', function(e){
        var name = $(':input:focus').attr("name");
        pomoc.fadeOut('slow').promise().done( function(){
         div.find("[data-pomoc='" + name + "']").fadeIn('slow');
     });
    });

    code.on('focusout', function(){
        var url = '<?php echo base_url() ?>global_info/gi_get_payment_code',
        kod = $(this).val();
if ($('input[name=paid]').length != 1)
    {
        $.post(url, {code : kod}, function(data){
            console.log(kod);
            $('.mali_oglas_img_paid').slideDown('slow');
            code.next('.mali_oglas_greska').remove();
            code.after(time_input.val(data) + paid_input)
            .css({'border' : '1px solid rgba(34,139,34,.5)'});
        });
    };
    });

    code.ajaxError(function() {
  $(this).next('.mali_oglas_greska').remove();
  $(this).after('<p class=mali_oglas_greska>Uneti kod je pogresan.</p>').css({'border' : '1px solid rgba(255,0,0,.5)'});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:57:26.103

您正在调用`val`字符串的方法，您应该首先创建一个 jQuery 对象，更改：

```
time_input.val(data) 
```

到：

```
$(time_input).val(data) 
```

请注意，您不能将对象与字符串连接，您应该调用该`after`方法 2 次或使用`add`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:00:54.660

您正在尝试对只是一个 html 字符串的变量使用 jQuery 方法

您可以将变量转换为包装它的 jQuery 对象元素`$()`

一旦一个是对象，您就不能连接两个输入，因此您需要反转插入

```
code.after( paid_input).after( $(time_input).val(data) )
/* should place "time_input" before "paid_input" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:59:58.813

`time_input`并且`paid_input`是字符串不是 jQuery 对象，试试这个

```
time_input = $('<input type="hidden" name="time" />'),
paid_input = $('<input type="hidden" name="paid" value="1" />'); 
```

# java - 在空的 JComboBox 上调用 addItem 会触发 actionPerformed 事件

> ID：13434688
> 
> 赞同：0
> 
> 时间：2012-11-17T20:55:13.547
> 
> 标签：java, swing, events, actionlistener, jcombobox

我`JComboBox`最初有 2 个控件，里面装满了项目。选择 a 中的一个项目`JComboBox`会将其移至另一个`JComboBox`。
当其中一个`JComboBox`控件为空时，就会出现问题。当我尝试将一个项目移动到空`JComboBox`时，它会触发它的`actionPerformed`事件。

```
private void leftComboActionPerformed(java.awt.event.ActionEvent evt) {                                          
        Object selectedItem = leftCombo.getSelectedItem();
        leftCombo.removeItem(selectedItem);
        rightCombo.addItem(selectedItem);
    }                                         

    private void rightComboActionPerformed(java.awt.event.ActionEvent evt) {                                           
        Object selectedItem = rightCombo.getSelectedItem();
        rightCombo.removeItem(selectedItem);
        leftCombo.addItem(selectedItem);
    } 
```

为什么要在空白处添加一个项目`JComboBox`呢？填充时将项目添加到其中时，它不会触发。
如何防止事件在为空时触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:04:39.503

以下代码转储堆栈跟踪

```
import javax.swing.JComboBox;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class EmptyComboboxTest {
  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JComboBox<String> emptyBox = new JComboBox<String>();
        emptyBox.addActionListener( new ActionListener() {
          @Override
          public void actionPerformed( ActionEvent e ) {
            Thread.dumpStack();
          }
        } );
        emptyBox.addItem( "test" );
      }
    } );
  }
} 
```

它的相关部分

```
at javax.swing.JComboBox.fireActionEvent(JComboBox.java:1260)
at javax.swing.JComboBox.contentsChanged(JComboBox.java:1331)
at javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:118)
at javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:94)
at javax.swing.DefaultComboBoxModel.addElement(DefaultComboBoxModel.java:132) 
```

如果您然后查看源代码，您可以看到在添加元素时，当当前没有选择任何内容时，它将被选中

```
 if ( objects.size() == 1 && selectedObject == null && anObject != null ) {
        setSelectedItem( anObject );
    } 
```

更改选择可能会导致触发`ActionEvent`. 如果您遵循源代码，则没有机制可以禁用它。但是，您可以在添加元素之前禁用侦听器，然后再启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T04:35:01.017

更改选择可能会导致触发 ActionEvent。如果您遵循源代码，则没有机制可以禁用它。但是，您可以在添加元素之前禁用侦听器，然后再启用它。

//AB LUND PE CHARHO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T07:48:39.623

避免该`actionPerformed`事件的方法是使用组合框的模型，它是`javax.swing.ComboBoxModel`接口的一个实例。

例如，`DefaultComboBoxModel`实现允许您在模型中添加/删除元素。你得到模型，处理它，当模型准备好时，你把它放回组合框。

# java - GWT GIN Provider 编译错误

> ID：13434690
> 
> 赞同：2
> 
> 时间：2012-11-17T20:55:29.647
> 
> 标签：java, gwt, guice, gwt-gin

我正在尝试配置我的 GIN 模块以将`ActivityManager`请求绑定到`DefaultActivityManagerProvider`：

```
import com.google.inject.Provider;

public class DefaultActivityManagerProvider implements Provider<ActivityManager> {
    @Override
    public ActivityManager get() {
        return new ActivityManager(new MyDefaultActivityMapper());
    }
} 
```

但是当我去实际绑定它时：

```
public class MyAppGinModule extends AbstractGinModule {
    @Override
    protected void configure() {
        bind(ActivityManager.class).toProvider(DefaultActivityManagerProvider.class);
    }
} 
```

`bind(...)`我在语句中收到编译错误：

```
Bound mismatch: The generic method toProvider(Class<I>) of type
GinLinkedBindingBuilder<T> is not applicable for the arguments
(Class<DefaultActivityManagerProvider>). The inferred type
DefaultActivityManagerProvider is not a valid substitute for the
bounded parameter <I extends Provider<? extends ActivityManager>> 
```

**我在这里做错了什么？！？**我已经遵循了无数的例子，比如[这个](https://stackoverflow.com/questions/7631153/gwt-gin-multiple-implementations)，但不知道为什么我会收到错误！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:44:10.107

未正确支持 toProvider

[http://code.google.com/p/google-gin/wiki/GinFaq](http://code.google.com/p/google-gin/wiki/GinFaq)

[http://code.google.com/p/google-gin/wiki/GuiceCompatibility](http://code.google.com/p/google-gin/wiki/GuiceCompatibility)

提供者需要是公共静态的

```
static class DefaultActivityManagerProvider implements Provider<ActivityManager> {
    @Override
    public ActivityManager get() {
        return new ActivityManager(new MyDefaultActivityMapper());
    }
} 
```

# javascript - 当我放入幻灯片时，向下滑动框菜单停止工作

> ID：13434694
> 
> 赞同：2
> 
> 时间：2012-11-17T20:56:01.050
> 
> 标签：javascript, jquery

我是网页设计的新手，真的需要一些关于课堂项目的帮助。我有一个滑动导航，我正在使用来自 [http://tympanus.net/codrops/2010/07/16/slide-down-box-menu/的以下 Javascript](http://tympanus.net/codrops/2010/07/16/slide-down-box-menu/)

```
<!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
    <script type="text/javascript">
        $(function() {
            /**
            * for each menu element, on mouseenter, 
            * we enlarge the image, and show both sdt_active span and 
            * sdt_wrap span. If the element has a sub menu (sdt_box),
            * then we slide it - if the element is the last one in the menu
            * we slide it to the left, otherwise to the right
            */
            $('#sdt_menu > li').bind('mouseenter',function(){
                var $elem = $(this);
                $elem.find('img')
                     .stop(true)
                     .animate({
                        'width':'170px',
                        'height':'170px',
                        'left':'0px'
                     },400,'easeOutBack')
                     .andSelf()
                     .find('.sdt_wrap')
                     .stop(true)
                     .animate({'top':'140px'},500,'easeOutBack')
                     .andSelf()
                     .find('.sdt_active')
                     .stop(true)
                     .animate({'height':'170px'},300,function(){
                    var $sub_menu = $elem.find('.sdt_box');
                    if($sub_menu.length){
                        var left = '170px';
                        if($elem.parent().children().length == $elem.index()+1)
                            left = '-170px';
                        $sub_menu.show().animate({'left':left},200);
                    }   
                });
            }).bind('mouseleave',function(){
                var $elem = $(this);
                var $sub_menu = $elem.find('.sdt_box');
                if($sub_menu.length)
                    $sub_menu.hide().css('left','0px');

                $elem.find('.sdt_active')
                     .stop(true)
                     .animate({'height':'0px'},300)
                     .andSelf().find('img')
                     .stop(true)
                     .animate({
                        'width':'0px',
                        'height':'0px',
                        'left':'85px'},400)
                     .andSelf()
                     .find('.sdt_wrap')
                     .stop(true)
                     .animate({'top':'25px'},500);
            });
        });
    </script> 
```

当我尝试在页面上放置幻灯片时，导航停止工作。我已经尝试了几个幻灯片，但它们都存在某种类型的冲突。我正在尝试使用的来自[http://www.jacklmoore.com/monte](http://www.jacklmoore.com/monte)。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:04:46.270

您一次调用动画和停止多次。有两种方法可以解决这个问题，或者构建一个队列系统（[jQuery 确实有一个](http://api.jquery.com/queue/)），或者使用提供的回调（一个在函数完成它的工作之后运行的函数）。

需要明确的是，像这样的代码都是一次运行的：

```
a.animate1()
b.animate2() //animate2 doesn't wait for animate 1, thus, use of callbacks and/or queues. 
```

作为旁注，看看你是否可以通过使用函数来减少你使用大量剪切+粘贴的代码部分。祝项目顺利！

# c# - 代码合同似乎不适用于 VS2012

> ID：13434695
> 
> 赞同：20
> 
> 时间：2012-11-17T20:56:01.423
> 
> 标签：c#, .net, visual-studio-2012, code-contracts

我正在阅读代码合同，乍一看似乎是相当革命性的，但我似乎无法让它们工作。我正在运行 Windows 8 和 Visual Studio 2012 Premium（两者的发行版）。然后，我通过单击下载代码合同链接从[此处安装了代码合同。](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)

然后我在一个全新的控制台应用程序中编写了以下代码：

```
class Program
{
   static void Main(string[] args)
   {
      var answer = Add(0, 5);
      Console.Write(answer);

      Console.ReadLine();
   }

   static int Add(int x, int y)
   {
      Contract.Requires(x > 0 && y > 0);

      return x + y;
   }
} 
```

我预计编译会失败，因为 的第一个参数`Add`是 0，但程序成功并将 5 打印到控制台。

我已经尝试过使用默认的代码合同设置，但也尝试了一些无济于事的东西。我当前的设置如下所示：

![在此处输入图像描述](../Images/e22508d1e220eeaf972d795d5442f535.png)

任何想法我做错了什么？

**更新：**

这是构建窗口的结果。它似乎正在做某事，但只是发出警告而不是错误。在我观看的视频中，这些东西被标记为编译错误，程序甚至无法运行。

```
1>------ Build started: Project: DeleteMe, Configuration: Debug Any CPU ------
1>  DeleteMe -> c:\users\mike\documents\visual studio 2012\Projects\DeleteMe\DeleteMe\bin\Debug\DeleteMe.exe
1>  CodeContracts: Task manager is unavailable.
1>  CodeContracts: DeleteMe: Run static contract analysis.
1>  CodeContracts: Suggested requires: Contract.Requires(false);
1>  CodeContracts: DeleteMe: Validated:  0.0 %
1>  CodeContracts: DeleteMe: Contract density: 0.87
1>  CodeContracts: DeleteMe: Total methods analyzed 4
1>  CodeContracts: DeleteMe: Methods with 0 warnings 3
1>  CodeContracts: DeleteMe: Total time 4.974sec. 1243ms/method
1>  CodeContracts: DeleteMe: Methods with necessary preconditions: 1
1>  CodeContracts: DeleteMe: Discovered 1 new candidate preconditions in 00:00:00.1718843
1>  CodeContracts: DeleteMe: Retained 1 preconditions after filtering
1>  CodeContracts: DeleteMe: Inferred 0 object invariants
1>  CodeContracts: DeleteMe: Retained 0 object invariants after filtering
1>  CodeContracts: DeleteMe: Detected 0 code fixes
1>  CodeContracts: DeleteMe: Proof obligations with a code fix: 0
1>c:\Users\Mike\Documents\Visual Studio 2012\Projects\DeleteMe\DeleteMe\Program.cs(14,10,14,33): warning : CodeContracts: requires is false: x > 0 && y > 0
1>c:\Users\Mike\Documents\Visual Studio 2012\Projects\DeleteMe\DeleteMe\Program.cs(22,10,22,44): warning : CodeContracts: location related to previous warning
1>  CodeContracts: Checked 1 assertion: 1 false
1>  CodeContracts: DeleteMe: 
1>  CodeContracts: DeleteMe: Static contract analysis done.
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T22:43:52.183

因此，问题似乎是代码合同的几个限制和*陷阱的组合。*希望这个答案能帮助像我这样刚开始的人。

首先，自构建 1.4.50327.0 以来，代码合同*确实*支持 Visual Studio 2012（Express 以外的任何版本），但`devenv.exe /setup`如果您的构建版本早于 1.4.50910.0，则必须运行。有关详细信息，请参阅[发行说明](http://research.microsoft.com/en-us/projects/contracts/releasenotes.aspx)。

我遇到的第一个问题是在代码合同属性选项卡的“静态检查”部分中选中了“缓存结果”复选框。此选项默认开启，并且还需要 SQL Server CE 存储其缓存数据，Windows 8、VS2012 或 Code Contracts 未安装此选项。不幸的是，您的程序将继续正常编译，您必须手动挖掘 Build 输出以查看错误：

> CodeContracts：xxx：未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“System.Data.SqlServerCe，版本=3.5.1.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91”或其依赖项之一。该系统找不到指定的文件。

取消选中“缓存结果”复选框将解决此问题，就像安装 SQL Server CE 一样。

第二个问题是违反代码合同被视为[警告，而不是编译错误](http://connect.microsoft.com/VisualStudio/feedback/details/646880/code-contracts-dont-listen-to-treat-warnings-as-errors-setting)。即使您启用了“将警告视为错误”，您的程序仍将继续编译并成功运行。如果您有一个较大的项目，其中包含大量您忽略的警告，则可能很难注意到这些新的代码合同警告。在[我看到的演示视频中](http://www.infoq.com/presentations/Contracts-Library)，这些警告也反映在 Visual Studio IDE 中（调用代码有一个蓝色下划线），但是我似乎在 Visual Studio 2012 中没有得到这种行为。

这个设计决定让我感到不安。如果我在我的代码中定义一个契约，一个函数必须取一个大于 0 的整数，而我公然传入一个 0，这是一个错误。不是警告。我打破了那份合同，简单明了。

总的来说，我会说代码合同非常强大，并且可能会改变我们测试软件的方式。MS Research 确实做得很好。但是，我认为它还没有真正为主流做好准备。它需要一些调整才能开始工作，它不能*无缝*集成到 Visual Studio 构建过程中，而且速度也很慢。在较小的项目中，它按预期工作，但是当我将它插入一个较大的项目时，分析所有代码需要十分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T23:11:06.300

先生，您必须启用运行时检查。在您作为图像发布的窗口中。

“完整”意味着将检查所有条件。其余的都是不言自明的。

*   静态检查仅在后台运行，并检查它可以在您的代码中改进的任何内容。注意 - 它会稍微减慢您的构建速度。

# c# - 运行动画后如何导航到另一个页面

> ID：13434697
> 
> 赞同：1
> 
> 时间：2012-11-17T20:56:05.700
> 
> 标签：c#, windows-phone-7

基本上我在一个页面上有几个按钮，当用户单击其中一个按钮时，应用程序必须运行动​​画，然后导航到第二个页面，其中按钮的名称存储在查询字符串中

```
 private void Button1_Click(object sender, RoutedEventArgs e)
        {
            myAnimation.Begin();
            myAnimation.Completed += new EventHandler(myAnimation_Completed);

        }

        void myAnimation_Completed(object sender, EventArgs e)
        {
             //If Button1 was clicked
            NavigationService.Navigate(new Uri("/nextPage.xaml?id=Button1",UriKind.Relative));

             //If Button2 was clicked
            NavigationService.Navigate(new Uri("/nextPage.xaml?id=Button2",UriKind.Relative));

             //etc
        } 
```

我不知道我可以对 IF 语句使用什么条件。

编辑：通过将事件语句更改为来解决导航问题

```
myAnimation.Completed += new EventHandler((a,b) => MyAnimation_complete(sender, e)); 
```

但现在导航返回时遇到问题，当我从第二页单击返回按钮时，我会转到第一页，但我发现那里没有控件。注意“MyAnimation”只是一个过渡动画也可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:23:34.950

你可以试试：

> myAnimation.Completed += new EventHandler((sender, e) => MyAnimation_complete(sender, e);

通过这种方式，您可以从您的 e 变量中获取信息，并以这种方式处理您的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:02:52.707

只需创建 bool 变量，如果单击按钮 1，则该变量设置为 true；如果单击按钮 2，则该变量设置为 false （如果您有更多按钮，则为一些 int）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T21:59:36.240

为什么不使用 lambda 表达式

```
private void Button1_Click(object sender, RoutedEventArgs e)
    {
        myAnimation.Begin();
        myAnimation.Completed += (s,ev)=>
          {
           NavigationService.Navigate(new Uri("/nextPage.xaml?id=Button1",UriKind.Relative));
          };

    } 
```

Button2 相同

# game-engine - 表示为法线和偏移的平面？

> ID：13434698
> 
> 赞同：2
> 
> 时间：2012-11-17T20:56:28.973
> 
> 标签：game-engine, computational-geometry, raytracing

我正在阅读其他人的代码，他将平面表示为正常和偏移，但我不确定该偏移是什么。我猜这是从世界原点到平面中心的距离？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T21:03:06.153

很可能是从世界原点到飞机的“距离”。不是“平面中心”（什么是“平面中心”？），而是平面本身。

我把“距离”这个词放在引号中，因为它可能会证明你的“距离”没有被规范化，即它被乘以某个因子。

你可能知道，3D 平面的方程是

```
A*x + B*y + C*z + D = 0 
```

其中`(A, B, C)`是法线向量，`D`实际上是从原点到平面的有*符号*距离。然而，`D`当且仅当向量 `(A, B, C)`被归一化时，将表示常规欧几里得距离，即 、 和 的值`A`被缩放`B`，使得。如果向量未归一化，则为距离乘以。`C``D``|(A, B, C)| = 1``D``|(A, B, C)|`

有时，术语“偏移量”用于指代`D`非归一化平面方程中的系数。换句话说，在您的情况下，平面可能仅由其、 和`A`系数`B`表示。它们是否被标准化 - 你必须检查自己。`C``D`

# iphone - 如何在选择时使用自定义标签栏项目而未选择透明标签栏项目

> ID：13434701
> 
> 赞同：0
> 
> 时间：2012-11-17T20:56:58.100
> 
> 标签：iphone, ios5, uitabbarcontroller, tabbar, uitabbaritem

我有两个自定义标签栏项目，当它们在某个控制器中被选中时，我希望它们以颜色突出显示。但是，当它们未被选中时，我希望标签栏显示我创建的透明标签栏项目图像。

我尝试在视图控制器中实现相应的代码，但它不能正常工作。

```
[[self tabBarItem] setFinishedSelectedImage:[UIImage imageNamed:@"tab.png"] `withFinishedUnselectedImage:[UIImage imageNamed:@"transparent.png"]];` 
```

在`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`方法中

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:45:41.173

使用以下内容自定义标签栏：

```
//UITabBar Customizing Appearance
{
    [[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"tabBarBg"]];

    int numberOfTabs = 0;
    numberOfTabs = [[self.tabBarController viewControllers] count];

    UIImage *selectionIndicatorImage = [UIImage imageNamed:@"selectionIndicatorImage"];
    if (numberOfTabs) {
        selectionIndicatorImage = [AppDelegate scaleImage:selectionIndicatorImage
                                                   toSize:CGSizeMake((320.0/numberOfTabs), selectionIndicatorImage.size.height)];
    }

    [[UITabBar appearance] setSelectionIndicatorImage:selectionIndicatorImage];        
    [[UITabBar appearance] setSelectedImageTintColor:[UIColor colorWithRed:0.0 green:169.0/255.0 blue:157.0/255.0 alpha:1.0]];

    [[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       [UIColor colorWithWhite:1.0 alpha:1], UITextAttributeTextColor,
                                                       [UIColor lightGrayColor], UITextAttributeTextShadowColor, nil]
                                             forState:UIControlStateNormal];
    [[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       [UIColor colorWithWhite:1.0 alpha:1], UITextAttributeTextColor,
                                                       [UIColor lightGrayColor], UITextAttributeTextShadowColor, nil]
                                             forState:UIControlStateSelected];
} 
```

使用创建的图像作为选定和未选定选项卡项目的图像。您也可以指定选项卡的数量。

# java - 如何使用支持 bean 完全控制 primefaces p:dataGrid 分页？

> ID：13434703
> 
> 赞同：1
> 
> 时间：2012-11-17T20:57:13.480
> 
> 标签：java, jsf, jsf-2, primefaces

我有 ap:dataGrid of primefaces，在 dataGrid 顶部有一个分页。

我的目标是完全控制分页按钮，因此当我单击以关联一些操作方法时。有没有人可以向我解释。这是我的想法。

```
 <p:dataGrid var="car" value="#{tableBean.cars}" columns="3"  
    rows="12" paginator="true"  
    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
   > 
```

当我点击其中一个 {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}

从支持 bean 中捕获，因此我可以在显示页面之前做一些额外的活动。

如果有人也知道如何使用 getPaginator() 客户端 Api 并给我一个示例，那么在他们的文档中会很好地提到它，但没有任何代码片段。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:11:42.320

Primefaces 有一个`page`事件，您可以在 a 中使用，`<p:ajax/>`就像在任何其他事件中一样

```
 <p:ajax event="page" listener="#{tableBean.myListener}" /> 
```

将此 ajax 侦听器附加到您的数据表以实现您想要的结果

`load()`或者，您可以在 primefaces 中实现额外的处理方法，请参见[此处](http://www.javacodegeeks.com/2012/04/lazy-jsf-primefaces-datatable_11.html)`LazyDataModel`的示例

# google-drive-api - Google Drive 和 CORS 跨域请求

> ID：13434704
> 
> 赞同：8
> 
> 时间：2012-11-17T20:57:15.977
> 
> 标签：google-drive-api, cors, google-api-js-client

我一直在绞尽脑汁想弄清楚如何在 Internet Explorer 中从 Drive 下载文件。似乎跨域安全问题正在阻止这种情况。

使用 XMLHttpRequest 的简单“GET”在 Chrome 和 Firefox 中运行良好，因为它支持请求标头，允许浏览器请求 CORS 响应，如以下代码行所示：

```
 var xhr = new XMLHttpRequest();
   xhr.open('GET', file.downloadUrl);
   xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
   xhr.onload = function() {
      callback(xhr.responseText);
   };
   xhr.send(); 
```

据称出于安全原因，IE 不支持请求标头。由于无法在这个不幸流行的浏览器中下载内容，我完全陷入困境。

我的问题是——这些其他应用程序到底是如何处理这个问题的？他们是否使用某种服务器端代理，并通过自己的后端汇集所有驱动器请求？在这一点上，这似乎相当艰巨。或者，有什么方法可以在启动时访问驱动器文件，我不知道吗？

我已经看到一些解决方案需要两台服务器上的文件，据我所知，这不是一个选项。Google Drive 是否能够在没有请求标头的情况下使用 CORS 进行响应，或者是否有另一个我不知道的 API 支持来自 Drive 域内 iframe 的某种回调？

在这一点上，我几乎已经死在水中了。任何提示将非常感谢。很抱歉不得不提出与 MS 产品有关的任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:16:29.933

如果问题在于 IE 不允许您添加或不传递`Authorization`标头，您可以尝试使用与标头`access_token`具有相同行为的 URL 参数传递访问令牌`Authorization`：

```
var xhr = new XMLHttpRequest();
xhr.open('GET', file.downloadUrl + '&access_token=' + accessToken);
xhr.onload = function() {
   callback(xhr.responseText);
};
xhr.send(); 
```

# javascript - twitter-bootstrap 模态确认对话框

> ID：13434711
> 
> 赞同：0
> 
> 时间：2012-11-17T20:58:29.923
> 
> 标签：javascript, jquery, twitter-bootstrap

我不知道如何使用引导模式实现确认对话框，这是我的代码不起作用：

```
<div id="id" class="modal hide">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>title</h3>
    </div>
    <div class="modal-body">
        <p>confirm message</p>
    </div>
    <div class="modal-footer">
        <button data-dismiss="modal" class="btn">No</button>
        <button id="id-confirm" class="btn btn-primary">Yes</button>
    </div>
</div>
<a id="a" href="http://example.com">link</a>
<script type="text/javascript">
    var confirmed = false;
    var modal = $('#id');
    var clickee = $('#a');

    clickee.click(function() {
        if (!confirmed) {
            modal.modal('show');
            return false;
        }
    });
    $('#id-confirm').click(function() {
        confirmed = true;
        clickee.click();
        modal.modal('hide');
    });
</script> 
```

当我点击链接`link`时，会弹出对话框，但是当我确认它时，不会发生重定向，当我再次点击链接`link`时，我会被重定向。

我可以重定向到链接的 href，我知道，但我想让它可重用，而不是链接（`a`元素），我也可以使用按钮或在按钮上定义 onclick 事件。

感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T21:19:16.890

让我先明白这一点。

您需要单击需要打开引导程序确认模式的链接，然后单击“是”，用户需要转到其他链接吗？

如果是这样的话：

```
<a id="a" href="#id" data-toggle="modal">link</a> 
```

然后你为什么不点击 id-confirm 按钮重定向

您需要删除 href="http://example.com" 因为引导模式不知道应该打开哪个 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T11:18:42.717

有一个库可以为您完成很多工作：http: [//bootboxjs.com](http://bootboxjs.com)。YMMV

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T21:43:55.430

在 jQuery 中，`Click()`不会激活`<a>`-tag，因为它被用户单击，它只会调用`onclick=`您附加的任何内容。

事实上，`clickee.click();`只调用你的匿名函数`clickee.click(function() {`，但什么也没发生，因为是真的（尝试在证明`confirmed`中插入警报）。`click()`当您再次单击时，第二次单击事件不会`stopPropagation`被引导程序停止（），现在它就像正常链接一样工作。这就是你所经历的。

我不完全确定你想要什么，但如果你想激活链接，确认后，重定向**是**最简单的方法（我知道你不想要那个，但你不能这样做`click()`，*因为代码现在是*）

```
$('#id-confirm').click(function() {
     confirmed = true;
     window.location=clickee.attr('href');
     modal.modal('hide');
}); 
```

`<button>`只要您指定了一个`href`属性，它就可以工作，并且可以与其他标签类型（如）一起使用。

# java - JDBC：找出查询是否成功？

> ID：13434714
> 
> 赞同：4
> 
> 时间：2012-11-17T20:58:56.693
> 
> 标签：java, mysql, jdbc

我将 JDBC 与 mysql 一起使用。我可以让我的查询很好地工作。但是对于更新查询，例如我想知道是否有任何方法可以确定更新是否成功，例如如果找不到该行。

```
UPDATE TABLE SET  column =  'newvalue' WHERE  primary_key =2 
```

如果可能，我想获得特定的错误消息，这样我可以抛出一个特定的异常来说明查询失败的原因。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T21:05:30.720

executeUpdate() 将返回受 SQL 语句影响的行数：

```
int rows = stmt.executeUpdate("UPDATE ...");
System.out.println(rows + " rows updated"); 
```

当然，您可以通过简单地[查看 JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)来发现自己：

> *返回：(1) SQL 数据操作语言 (DML) 语句的行数或 (2) 0 用于不返回任何内容的 SQL 语句*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:05:35.487

[executeUpdate](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)返回受影响行的行数。您可以使用它来检查您的更新是否成功执行：

```
PreparedStatement pstmt = con.prepareStatement("UPDATE TABLE ...");
int rowsUpdated = pstmt.executeUpdate(); 
if (rowsUpdated == 0) {
   // handle no update
} 
```

# knockout.js - 为什么 KnockoutJS 将类属性设置为“0 1 2 3 4 5 startsWith”？

> ID：13434716
> 
> 赞同：2
> 
> 时间：2012-11-17T20:59:03.430
> 
> 标签：knockout.js

我有以下 HTML 段：

```
<table class="answerGrid" data-bind="foreach: rows">
    <tr data-bind="foreach: $data">
        <td>
            <button data-bind="click : $root.onAnswerClick, css: isSelected" type="button">
                <div data-bind="html: $data.text" style="height: 100%"></div>
            </button>
        </td>
    </tr>
</table> 
```

我要做的是通过计算函数动态设置元素的`class`属性：`button``isSelected`

```
var Answer = function () {
    var self = this;

    self.id = "";
    self.text = "";
    self.selected = ko.observable(false);

    self.isSelected = ko.computed(function () {
        return self.selected() ? "selected-answer" : "answer";
    }, self);
}; 
```

该函数正在执行，我检查了文本“答案”是否由于`Answer`尚未被选中而返回。但是，当我查看输出的 HTML 时，它看起来像这样：

```
<td>
    <button data-bind="click : $root.onAnswerClick, css: isSelected" type="button" class="0 1 2 3 4 5 startsWith">
        <div data-bind="html: $data.text" style="height: 100%">4-7 days</div>
    </button>
</td> 
```

我完全不明白为什么 KO 将`class`属性设置为“0 1 2 3 4 5 startsWith”。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:20:27.593

我将使用不同的方法：

```
<button data-bind="css: { 'answer': !selected(), 'selected-answer': selected() }" type="button">
    <span>Testing</span>
</button>​ 
```

所以我根本不打算使用计算函数，而是直接访问`selected`答案的属性。我通过这个 SO question 找到了这种技术：

[KnockoutJS css 绑定！= true](https://stackoverflow.com/questions/9320094/knockoutjs-css-binding-true)

# google-chrome - Web Intent 不适用于 Chrome 24.0.1312.14 beta 和 Chromium 25.0.1329.0 (168457) - 如何修复？

> ID：13434718
> 
> 赞同：1
> 
> 时间：2012-11-17T20:59:11.423
> 
> 标签：google-chrome, webintents

我正在尝试在[http://examples.webintents.org/intents/shorten/shorten.html](http://examples.webintents.org/intents/shorten/shorten.html)运行网络意图， 但它不起作用。

我的操作系统是：操作系统 10.7.5

铬/铬版本

1.  Chrome 24.0.1312.14 测试版
2.  铬 25.0.1329.0 (168457)

事实上，根本没有网络意图对我有用。Javascript 控制台没有显示错误。

我需要做什么才能让 Web Intent 在 Chrome 或 Chromium 上运行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:36:23.497

从 Chrome 24 开始， Web 意图[现在被禁用](https://plus.google.com/116171619992010691739/posts/gcXURKLN8bg)......（不要问我为什么：/）

# flexslider - Flexslider 2：如何隐藏初始幻灯片的方向导航“上一个”箭头？

> ID：13434719
> 
> 赞同：3
> 
> 时间：2012-11-17T20:59:22.590
> 
> 标签：flexslider

我正在玩弄 Flexslider 2 的 CSS 和 Javascript，但我不知道如何仅为幻灯片的初始幻灯片隐藏“上一个”箭头。我希望它在幻灯片的其余部分重新出现。

真诚感谢任何帮助。

案子

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-30T22:33:59.277

我喜欢 flexslider，因为您可以在它的回调函数中编写自定义 jquery 逻辑。这是一个默认隐藏箭头的基本示例，然后单击（一个 jquery 方法），再次显示它们，所有这些都在 flexslider start() 回调函数中......

```
$('#carousel-home').flexslider({
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: false,
    itemWidth: 170,
    itemMargin: 5,
    asNavFor: '#slider',
    start:function(slider){
        //HIDE THE ARROWS BY DEFAULT...
        $('#slider .flex-direction-nav').css({visibility:'hidden'});

        //THEN INSERT YOUR CUSTOM JQUERY CLICK ACTIONS TO REVEAL THEM AGAIN
        slider.find('a').on('click',function(){
        $('#slider .flex-direction-nav').css({visibility:'visible'});
        });
    }//end start function
});//end carousel

$('#slider').flexslider({
    slidshow: false,
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: true,
    sync: "#carousel-home"
});//end slider 
```

这将与以下 HTML 一起使用...

```
<div id="carousel-home" class="flexslider">
  <ul class="slides ffastandards">
  <li><a href="#">Mission</a></li>
    <li><a href="#">Vision</a></li>
    <li><a href="#">Voice</a></li>
  </ul>
</div>
<hr>
<div id="slider" class="flexslider content-slider">
    <ul class="slides">
    <li>mission</li>
    <li>vision</li>
    <li>voice</li>
    </ul>
</div> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T17:40:07.717

`'flex-disabled'`Flexslider在到达幻灯片/轮播的开头或结尾时向相应的导航元素添加一个类。

看起来这仅在您设置此参数时才有效：`animationLoop: false`.

您可以使用此类隐藏“上一个”箭头（或“下一个”箭头）。

```
.flex-direction-nav a.flex-disabled {
   display:none;
} 
```

或者，您可以设置不透明度以及 CSS 过渡以使其淡入/淡出。

```
.flex-direction-nav a {
   opacity: 1;
   transition: opacity .3s;
   -moz-transition: opacity .3s;
   -webkit-transition: opacity .3s;
}

.flex-direction-nav a.flex-disabled {
   opacity: 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-19T09:26:57.380

这会成功的

```
.flex-direction-nav a.flex-next, 
.flex-direction-nav a.flex-prev{
    display:none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-23T17:07:56.973

```
 $('.flexslider').flexslider({
                animation: 'fade',
                controlsContainer: '.flexslider',
                controlNav: false,
                directionNav:false
            }); 
```

这是解决方案，添加directionNav:false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T15:59:01.883

添加一些条件语句，将 ie8 添加到您的页面 html 标记中。然后将其添加到样式表

```
html.ie8 .flex-direction-nav .flex-prev, html.ie8 .flex-direction-nav .flex-next {display:none;}

html.ie8 #flexslider_hg_homepage_wrapper:hover .flex-direction-nav .flex-prev,
html.ie8 #flexslider_hg_homepage_wrapper:hover .flex-direction-nav .flex-next {display:block;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-17T19:04:06.007

您可以将此代码插入到您的 javascript 文件中： $('your .class or #id').flexslider({ controlNav: true });

# jsf - JSF环境中注入EntityManager的线程安全

> ID：13434720
> 
> 赞同：2
> 
> 时间：2012-11-17T20:59:28.280
> 
> 标签：jsf, jpa, jboss, ejb-3.0

以下模式是否存在任何线程安全问题或其他代码异味？

### 使用容器管理的 EntityManager 注入的无状态 EJB3 bean：

```
@Stateless
public class ServiceA implements IServiceA.ILocal {
    @PersistenceContext(unitName="foo")
    private EntityManager em
    ... 
```

### .. 然后用上面的服务 bean 注入 View-scoped JSF-managed backing bean：

```
@ManagedBean
@ViewScoped
public class PageFooController {
    @EJB
    private IServiceA.ILocal serviceA;
    .... 
```

部署环境是具有默认 Hibernate JPA 实现的 JBoss 7。

我要问的原因是，在模拟数百个用户的压力测试中，我们注意到损坏的 JPA 实体值（数据库中不存在的值），这可能表明处理 JPA 实体的实体管理器存在一些竞争条件/线程不安全访问。

# recursion - BNF：交换非终结符在语法规则中的位置对生产的影响

> ID：13434723
> 
> 赞同：1
> 
> 时间：2012-11-17T20:59:44.710
> 
> 标签：recursion, grammar, bnf

我昨天和今天都花了 7 个小时试图找到作业中问题的明确答案。我已经观看了数小时关于 BNF 和 EBNF 的讲座，但没有人解决我的问题。虽然我学到了很多东西:)

我希望有人可以指出方式：

鉴于这个语法

```
G = {N, T, S, P} 
T = {a, b, c, - , ×} 
N = {<goal>, <expr>, <term>, <factor>} 
S = <goal> 
P = 
<goal> ::= <expr> 
<expr> ::= <term> | <expr> - <term> 
<term> ::= <factor> | <term> × <factor> 
<factor> ::= a|b|c 
```

然后将规则更改为：

```
<goal> ::= <expr>
<expr> ::= <term> | <term> - <expr> 
<term> ::= <factor> | <factor> × <term>
<factor> ::= a|b|c 
```

对生产有什么影响？

我所能看到的只是它将递归更改`LHS`为`RHS`递归。我真的很想知道我错过了什么。

作业中的其他问题改变了我回答的规则的顺序：在生产级联中较低的规则具有较高的优先级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:31:43.280

在与讲师协商后，我确认唯一的区别是：它将递归更改`LHS`为`RHS`递归。

# php - 将 jQuery $.post 返回数据设置为 JavaScript 变量

> ID：13434724
> 
> 赞同：3
> 
> 时间：2012-11-17T20:59:54.710
> 
> 标签：php, jquery, ajax

`jQuery`我的HTML 页面中有以下代码：

```
$.post("MyPHP.php", {category: CATEGORY}, function(data){var test = data;}); 
```

但我似乎无法在页面的其他任何地方使用测试。我知道这是`AJAX`所以我必须等待`$.post`完成，但永远不会设置变量测试。如果我改为使用返回数据来更改段落的 innerhtml，则该段落会在一小段延迟后更新。

有什么想法吗？

编辑：破解它！您可以从`$.post`返回函数调用另一个函数，即：`function(data){setVar(data)});`并简单地定义`setVar(data)`函数如下：

```
function setVar(data){test = data;} 
```

如果测试已经在全局范围内定义，`var test;`您可以在其余代码中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:03:52.483

~~因为你的 var 的范围是有限的尝试将你的测试变量移动到一个全局范围内~~

 ~~```
var test;
$.post("MyPHP.php", {category: CATEGORY}, function(data){
    test = data;
 }); 
```~~  ~~ajax 请求是异步的，因此您永远不会知道它何时完成，除非您将变量放入您所做的成功回调（哪个）中，或者您可以使 ajax 请求同步（请不要这样做），或者您可以[`.when`](http://api.jquery.com/jQuery.when/)用来确保您的设置所有变量后，将执行 ajax 调用相关代码。

即使您将测试变量移动到全局范围，它仍然会记录到控制台，因此请尝试查看此[演示](http://jsfiddle.net/C4JnU/)`undefined`

```
var test;
var x=$.post("MyPHP.php", {category: CATEGORY},, function(data){  
    test = data;   
});
console.log(test);// still undefined    
$.when( x ).then(function(args){
     console.log(test);// your var is set
}); 
```

[http://jsfiddle.net/C4JnU/1/](http://jsfiddle.net/C4JnU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:04:01.127

您已经`test`在 ajax 成功函数中声明了变量，因此它的范围仅限于成功函数。如果你想从其他代码访问它，你可以在全局范围内声明它，然后在成功函数中覆盖它。

```
var test; // delcared in global scope

$.post("MyPHP.php", {category: CATEGORY}, function(data){ test = data;}); 
```~~

# c# - xz平面的简单地图构建器

> ID：13434728
> 
> 赞同：0
> 
> 时间：2012-11-17T21:00:24.643
> 
> 标签：c#, .net, xml, xna

我正在 XNA 中开发一个简单的第一人称 3D 游戏。我已经到了可以在我的世界中放置墙壁，使用适当的第一人称相机移动并检查墙壁和相机之间的碰撞的地步。

我已经帮自己创建了一些墙的“绘图”功能，这使得放置墙壁变得相当容易（只是开始和结束位置），但我仍然发现将墙壁逐个放置，坐标坐标，非常烦人，当我的目标是创造迷宫时；）

我需要放置一堵墙是 2 个顶点，一个开始位置和一个结束位置。它们甚至可以是二维的，因为我只需要 X 和 Z 位置。我有固定的墙壁高度。

我一直在寻找一个程序，它可以让我绘制坐标并导出为 XML 或我可以在 XNA/C# 中加载的其他格式。如果我可以简单地从 xml 中获取两个和两个坐标，并在程序中绘制，那么构建地图将变得难以置信地容易得多！

有谁知道我可以使用这样的东西吗？它可以像我设置大小的工作表一样简单（比如说 5000x5000 像素），然后我在工作表上放置两个点（它们将代表两个 x、y 位置）并将它们链接在一起。然后我可以从程序中的任何输出格式中读取这两个点并创建墙。

我会继续自己做点什么，但遗憾的是，由于考试等等，我的时间非常有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:21:25.803

您是否考虑过使用由直线组成的 SVG 而不是位图？然后，您可以编写简单的内容管道扩展，将 SVG 解析为预先计算的顶点/索引缓冲区数据。由于您只需要线条而不需要任何蓬松的 SVG 内容，因此解析器不应该变得如此困难和昂贵。

# machine-learning - 不具有相等分区的 K 折交叉验证的分区数据

> ID：13434734
> 
> 赞同：0
> 
> 时间：2012-11-17T21:01:19.040
> 
> 标签：machine-learning, cross-validation

来自维基百科：

> 在 k 折交叉验证中，原始样本被随机划分为 k 个大小相等的子样本。

我正在做一个 10 折交叉验证项目。我有一个包含 76 个元素的数据集。这意味着我不能拥有相同大小的分区。

剩余数据的方法是什么（在我的示例 6 数据中）？忽略它们，使数据有 16 个元素，6 个分区有 11 个元素等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:08:42.597

你不要忽视他们！

简单地说，您可以将 6 个数据点随机分布在 10 个折叠中。

另一种方法是将它们添加到任何折叠中。最后，这些点将按预期通过一次测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:53:51.843

你有两个简单的选择。如果您真的想使用 10 折验证，请使用包含 7 个元素的部分折叠和包含 8 个元素的部分。真的没关系。或者，使用四折验证，每折包含 19 个元素。

两者都可以，您不太可能看到那么大的差异。您很少会得到完全相同的折叠，但由于您的数据集很小，随着训练示例数量的变化，您可能会看到折叠之间的差异更大。然而，我对此表示怀疑。

# python - 在带有墙壁的 2d 地图中查找角落

> ID：13434735
> 
> 赞同：1
> 
> 时间：2012-11-17T21:01:25.330
> 
> 标签：python, arrays, algorithm, image-processing

我正在为 aisandbox.com 比赛开发 AI。我制作 AI 是为了好玩，而不是为了参加比赛（以防万一我在这里问我是否违反了规则）。

我可以使用 获得该区域的 2d 地图`self.level.blockHeights`，并且我想通过在地图中找到角落并让它们在那里防御来找到我的机器人可以隐藏的一些地方。

所以我的问题是，给定一个 2d 数字数组，其中 0 是自由空间，1 是墙，找到角落的最佳方法是什么？

Ps 我正在使用 Python

编辑：这是一个地图示例（墙壁是黑色的），要找到的角落是红色的： ![在此处输入图像描述](../Images/975b36959e576474cc32e528493a71f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:28:03.597

根据您的示例网格，似乎可以定义一个**角，该角**`0` *至少被 2 包围* `1`。

你可以首先在一个愚蠢的实现中编写这个定义（就像我在下面故意做的那样），然后可能通过考虑性能来改进它。

`2`表示此实现中的一个角

**示例 Python 实现**：

```
g = [[1,1,1,0],
     [1,0,0,0],
     [1,0,0,0],
     [1,0,1,0],
     [1,1,1,1]]

width = len(g[0])
height = len(g)

for i in range(height):
    for j in range(width):
        if g[i][j] != 0:
            continue
        around = [(i-1,j),(i+1,j),(i,j-1),(i,j+1)]
        walls = 0
        for (x,y) in around:
            if x < 0 or x >= height or y < 0 or y >= width:
                #Outside, count as wall
                walls += 1
            elif g[x][y] == 1:
                walls += 1
        if walls in [2,3]: # 4 would be inaccessible  
            g[i][j] = 2 
```

**输出：**

```
[1, 1, 1, 2]
[1, 2, 0, 0]
[1, 0, 0, 0]
[1, 2, 1, 2]
[1, 1, 1, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:50:19.930

到目前为止的答案非常缓慢（尽管它们的复杂性是线性的） - 特别是在 python 中，因为它们涉及广泛的循环。此外，它们对噪声不是很健壮（尽管我知道这里不需要）

解决此问题的一个好技巧（如果您愿意使用 scipy 和 numpy）是对图像应用具有小内核的[高斯滤波器](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.gaussian_filter.html)并从中减去原始图像（注意不要下溢）。由于角落“渗入”背景更多，因此在生成的图像中，角落将是具有最高强度的像素。

这是一个实际的例子：

```
import numpy
import scipy.ndimage
import scipy.misc

image= scipy.ndimage.imread('corners.png').astype(float)
image= numpy.mean( image, axis=2) #squash color channels
filtered=   scipy.ndimage.filters.gaussian_filter(image,1)
subtracted= (256+image)-filtered #take care not to underflow
maximum, minimum=   numpy.max(subtracted), numpy.min(subtracted)
magic= 0.48 #will depend on source image. Fool around and see what works
threshold= (maximum+minimum)/2+(maximum-minimum)*magic 
thresholded= subtracted>=threshold

print list(zip(*numpy.where(thresholded))) 
```

输出`[(190, 206), (207, 314)]`

角落.png：

![角落.png](../Images/26ef614847636b6bb69dcb90d3771578.png)

过滤：

![过滤](../Images/74b36a7b122110568599bb90906abced.png)

限价：

![阈值](../Images/cce0a65c156cf87dea291f6030872414.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T21:24:41.203

从您的示例中，可以将角定义为自由单元格，其中两个相邻的单元格被墙壁占据，这两个占据的单元格配置为北/东、北/西、南/东和南/西。

因此，找到角落只是扫描您的 2D 地图并查看每个空闲单元格的相邻单元格的问题。

我假设你不想要有 3 个围墙的空闲单元（比如在走廊的尽头）。

假设你有一个功能`isWall(x,y)`：

```
def isCorner(x, y) :
     eastHasWall = isWall(x+1, y)
     westHasWall = isWall(x-1, y)
     northHasWall = isWall(x, y-1)
     southHasWall = isWall(x, y+1)

     wallArray = [eastHasWall, westHasWall, northHasWall, southHasWall]
     wallCount = wallArray.count(true)

     if wallCount == 2 :
         return (eastHasWall and northHasWall) or (eastHasWall and southHasWall) or (westHasWall and northHasWall) or (westHasWall and southHasWall)

     return false # other wall count are not corners 
```

我还没有测试过代码，但它应该可以编译。

还应该注意地图的边界。只有您可以说出它们在您的设置中是否被视为墙壁或自由空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T21:28:13.643

伪代码

```
function isCorner(x, y) {
    wallsFound = 0;
    if (withinBounds(x + 1, y) && grid[x + 1][y] == 1)
        wallsFound++
    if (withinBounds(x - 1, y) && grid[x - 1][y] == 1)
        wallsFound++
    if (withinBounds(x, y + 1) && grid[x][y + 1] == 1)
        wallsFound++
    if (withinBounds(x, y - 1) && grid[x][y - 1] == 1)
        wallsFound++
    return wallsFound  == 2 || wallsFound == 3;
}

function withinBounds(x, y) {
    return x >= 0
        && x < rows.len
        && y >= 0
        && y < cols.len
}

for i = 0 to rows.len
    for j = 0 to cols.len
        if isCorner(x, y)
            // do something 
```

如果您希望地图的边缘算作一堵墙，您可以更改`&&`为in isCorner。`||`

# java - 将 ArrayList 元素克隆到相同的 ArrayList

> ID：13434737
> 
> 赞同：2
> 
> 时间：2012-11-17T21:01:38.730
> 
> 标签：java, arraylist, clone

我有一个`ArrayList`包含对象。（这个对象是类，每个对象都包含大量的信息，这些对象恰恰代表了大型发电机，所以不能一个个地复制属性）。

例子：

```
ArrayList arr = {ob1, ob2, ob3, ob4, ob5} 
```

所以我尝试做的是将对象（ob1）克隆到位置 5。

```
arr.set(4, arr.get(0)); 
```

但不知何故，这样做，ob5 不是 ob ob1 的副本，它是 ob1，所以如果我更改 ob5，ob1 也会更改。

这是 ArrayLists 固有的吗？如果我改用列表有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:23:45.590

ArrayList 保存引用是的。但是您可以克隆它（注意！但这将是浅拷贝 - 对于内部对象，它也不会克隆[https://stackoverflow.com/a/13434779/1111527](https://stackoverflow.com/a/13434779/1111527)）

```
private class JustToCheck implements Cloneable {

    @Override
    public Object clone() throws CloneNotSupportedException {
        return super.clone();
    }
} 
```

然后像这样使用

```
JustToCheck ob1 = new JustToCheck();
JustToCheck ob2 = ob1;

List<JustToCheck> arr = new ArrayList<JustToCheck>();
arr.add(ob1);
arr.add(ob2);

System.out.println(arr.get(0).toString() + ": " + arr.get(1).toString());

try {
    arr.set(1, (JustToCheck) ob1.clone());
} catch (CloneNotSupportedException e) {
    e.printStackTrace();
}

System.out.println(arr.get(0).toString() + ": " + arr.get(1).toString()); 
```

**输出是**

```
example$JustToCheck@1c39a2d: example$JustToCheck@1c39a2d
example$JustToCheck@1c39a2d: example$JustToCheck@bf2d5e 
```

**PS** - 我已经检查了答案中的问题[https://stackoverflow.com/a/13434813/1111527](https://stackoverflow.com/a/13434813/1111527)

有不可变类的东西

Java6

```
String a = new String("a");
String b = a;
b += "b"; 
System.out.println("a = " + a); // a = a
System.out.println("b = " + b); // b = ab 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:05:23.090

这是因为您正在执行卷影复制而不是深层复制。

**浅拷贝**：如果执行浅拷贝，`Obj-1`那么它会被复制，但它包含的对象不会。包含的对象`Obj-1`并`Obj-2`受**克隆的 Obj-2 更改**的影响。当类实现 java.lang.Cloneable 接口时，Java 默认支持对象的浅层克隆。

**深拷贝**：如果按所示执行深拷贝，`obj-1`则不仅复制了`obj-`1，还复制**了其中包含的对象**。序列化可用于实现深度克隆。通过序列化进行的深度克隆开发起来更快，更容易维护，但会带来性能开销。[资源](http://javapeople.blogspot.pt/2007/02/what-is-main-difference-between.html)

深拷贝的一个例子：

```
class Student implements Cloneable {
  //Contained object
  private Subject subj;
  private String name;

  public Subject getSubj() {..}
  public String getName() {..}

  public Object clone() {
    //Deep copy
    Student s = new Student(name, subj.getName());
    return s;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T21:31:24.027

`shallow copying`创建同一类的新实例并将所有字段复制到新实例并返回它。Object 类提供了一个克隆方法并提供了对浅拷贝的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T21:06:51.603

在 Java 中的任何地方都是如此。 除非您明确这样做，否则不会复制*任何内容。*（确实，有些对象是故意无法复制的。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T21:08:06.610

您需要复制您的`ElectricGenerator`. 最常见的选项是引入复制构造函数或实现克隆方法。然而，这两种解决方案都需要复制所有这些属性。

一旦你有了它，你就可以做到

```
//copy constructor
arr.add( new ElectricGenerator( arr.get( 0 ) ) );
//clone
arr.add( arr.get( 0 ).clone() ); 
```

另一种方法是序列化/反序列化对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T21:08:39.323

这不符合 ArrayList，这是一个 java 特性。没有创建新对象，只传递了一个引用。ArrayList 因此存储了两个引用。您必须使用对象的 .clone() 方法。

```
arr.set(4, arr.get(0).clone()); 
```

这将创建对象的新副本，即使此副本很浅。如果需要，您必须覆盖克隆方法以使其成为深层副本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-17T21:09:48.023

不，这是因为在 Java 中您创建了对对象的引用，所以即使您不使用 ArrayList 并执行以下操作：

```
String a = new String("a");
String b = a;

b += "b"; 
```

a 和 b 都等于“ab”。

（这个例外是基本类型，如 int （但不是 Integer 的实例，有不同的东西））。

因此，您的问题的答案在这里： [如何按值复制对象，而不是通过引用](https://stackoverflow.com/questions/2624165/how-to-copy-an-object-by-value-not-by-reference) ，在这里： [http ://www.itcsolutions.eu/2010/12/29/tutorial-java-6-4-2-how -to-copy-values-of-an-array-into-another-array/](http://www.itcsolutions.eu/2010/12/29/tutorial-java-6-4-2-how-to-copy-values-of-an-array-into-another-array/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-17T21:10:41.530

该列表仅包含指向对象的指针..

如果您将 ob1 移动到 ob5 会发生什么情况，您告诉列表将指针放在 ob1 的指针 ob5 所在的位置，因此丢失指向 ob5 的指针并复制指向 ob1 的指针...

您将需要创建一个包含重复值的其他对象，然后将此对象分配给位置 4

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-17T21:11:58.300

对象变量不同于原始数据类型。

```
int x = 2;
int y = x; 
```

x 和 y 指的是不同的内存位置。

```
MyClass x = new MyClass();
MyClass y = x; 
```

x 和 y 引用相同的内存位置，但该位置有两个引用。对其中一个所做的任何更改都会改变另一个。解决此问题的方法是实施`Cloneable`和使用该`.clone()`方法。

# vb.net - 在 vb 2010 中发送邮件失败

> ID：13434738
> 
> 赞同：1
> 
> 时间：2012-11-17T21:01:55.733
> 
> 标签：vb.net, email, smtp, smtpclient

试图获得一个非常基本的程序来向我发送电子邮件。我有 3 个文本框。

TextBox1 是一个只读文本框，其中包含我的电子邮件 TextBox2 用于“您的电子邮件” TextBox3 用于您的消息

还有一个按钮（Button1），上面写着“发送”

这是我整个项目的代码。为了安全起见，我在这个问题中删除了我的电子邮件和密码。

当我运行程序并在 TextBox2 中输入“Test1234@live.com”并在 TextBox3 中输入“TestEmail1234”并按发送时，它会将我带回编码页面并显示“SmtpException 未处理。发送邮件失败”

```
Imports System.Net.Mail

Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim smtpServer As New SmtpClient()
        Dim mail As New MailMessage()

        smtpServer.Credentials = New Net.NetworkCredential("myemail@gmail.com", "mypassword")
        'using Gmail
        smtpServer.Port = 587
        smtpServer.Host = "smtp.gmail.com"
        smtpServer.EnableSsl = True

        mail = New MailMessage()
        mail.From = New MailAddress("my email@gmail.com", TextBox1.Text)
        mail.To.Add(TextBox1.Text)
        mail.Subject = TextBox2.Text
        mail.Body = TextBox3.Text

        smtpServer.Send(mail)

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:10:13.400

有一些问题，我只是给你一个工作脚本

```
Imports System.Net.Mail
Public Class Form1
Dim message As New MailMessage
Dim smtp As New SmtpClient
Dim instance As IDisposable

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim Mail As New MailMessage
    Mail.Subject = "test email"
    Mail.To.Add("recieveradress@gmail.com")
    Mail.From = New MailAddress("senderadress@gmail.com")
    Mail.Body = "This is an email!"
    Dim SMTP As New SmtpClient("smtp.gmail.com")
    SMTP.EnableSsl = True
    SMTP.Credentials = New System.Net.NetworkCredential("senderaddress@gmail.com", "password")
    SMTP.Port = 587
    SMTP.Send(Mail)
    MsgBox("Sent Successfully")

End Sub
End Class 
```

# ruby-on-rails - Heroku 在 en.yaml 上呕吐

> ID：13434739
> 
> 赞同：0
> 
> 时间：2012-11-17T21:01:57.717
> 
> 标签：ruby-on-rails, heroku

我已经为 Heroku 部署了一个应用程序。该应用程序在开发中运行良好，并且测试通过。部署工作正常，网络服务器正在运行。但是 en.yml 文件中的以下行导致内部服务器错误。

```
ActionView::Template::Error (syntax error on line 14, col 8: `        current_practice_telephone:           "Telephone"'): 
```

**我的完整 en.yml 文件**

```
en:
  activerecord:
    attributes:
      user:
        password_digest: "Password"
    credential:
        current_practice_address_line1:     "Address"
        current_practice_address_city:      "City"
        current_practice_address_state:     "State"
        current_practice_address_country:   "Country"
        current_practice_address_zip_code:  "Zip Code"
        current_practice_telephone:         "Telephone"
        NPI_number:                         "Your NPI Number"
        license_number:                     "Your State License Number"
        state_license_website_link:         "Can you provide a link to your state license information? (Optional)"
        current_practice_name:              "Practice Name"
        current_practice_title:             "Your Title"
        current_practice_fellowship:        "Name of your Fellowship"
        current_practice_residency:         "Name of your Residency"
        current_practice_subspecialty:      "Name of your subspecialty" 
```

我真的很困惑为什么heroku服务器会在这里呕吐。有任何想法吗？

更新：我修复了丢失的报价，但 heroku 仍然不会处理 YAML 文件。最近一次更新后：

**本地控制台**

```
 YAML.load(File.open('config/locales/en.yml'))
 => {"en"=>{"activerecord"=>{"attributes"=>{"user"=>{"password_digest"=>"Password"}}, "credential"=>{"current_practice_address_line1"=>"Address", "current_practice_address_city"=>"City", "current_practice_address_state"=>"State", "current_practice_address_country"=>"Country", "current_practice_address_zip_code"=>"Zip Code", "current_practice_telephone"=>"Telephone", "NPI_number"=>"Your NPI Number", "license_number"=>"Your State License Number", "state_license_website_link"=>"Can you provide a link to your state license information? (Optional)", "current_practice_name"=>"Practice Name", "current_practice_title"=>"Your Title", "current_practice_fellowship"=>"Name of your Fellowship", "current_practice_residency"=>"Name of your Residency", "current_practice_subspecialty"=>"Name of your subspecialty"}}}} 
```

**heroku 控制台**

```
irb(main):001:0> YAML.load(File.open('config/locales/en.yml'))
ArgumentError: syntax error on line 11, col 8: `        current_practice_telephone:         "Telephone"'
    from /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
    from /usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
    from (irb):1
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
irb(main):002:0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:04:52.060

您在“邮政编码”后缺少报价

但一般来说，当您看到此错误时，是因为您的编辑器已将空格替换为制表符。Yml 取决于缩进的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:16:39.783

You probably have a invisible character on the affected line that causes the problems. Either configure your editor to show invisible characters, or simple delete the line, and type it again.

# jquery - 从 GAE Python 中的 AJAX 调用获取响应的问题

> ID：13434740
> 
> 赞同：2
> 
> 时间：2012-11-17T21:01:59.183
> 
> 标签：jquery, python, ajax, google-app-engine

我只是想在单击按钮时进行简单的 ajax 调用，以使用 ajax 从文本框中传递一些数据并在 ajax 调用后检索相同的数据。但是这里有些东西很混乱，因为没有任何数据的警报

这是我的 ajaxTest.html

```
 <html>

    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"
        type="text/javascript">

        </script>
        <script>
            function getData() {
                var vdata = $('#txt').val();
                $.ajax({
                    type: "GET",
                    url: "/processAjax",
                    data: vdata,
                    success: function (responseText) {
                        alert(responseText);
                    }
                });
            }
        </script>
    </head>

    <body>
        <input id="txt" type="textbox" runat="server" />
        <input type="button" runat="server" onclick="getData();" />
    </body>

</html> 
```

这是我的 main.py

```
import httplib2
import os

class AjaxCall(webapp.RequestHandler):
  def get(self):
    template_data = {}
    template_path = 'ajaxTest.html'
    self.response.out.write(template.render(template_path,template_data))

class ProcessAjax(webapp.RequestHandler):
  def get(self):
    inputdata = self.request.get("inputData")
    self.response.out.write(inputdata)

application = webapp.WSGIApplication(
                                     [('/processAjax',ProcessAjax),
                      ('/ajaxPage',AjaxCall)
                                    ],
                                     debug=True)

def main():
  run_wsgi_app(application)

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:05:28.123

您的 AJAX 调用根本不包含`inputData`查询字段。更新您的 jQuery`$.ajax()` `data`参数：

```
data: { inputData: vdata }, 
```

# python - 是否有替代 numpy.average() 可以在使用 numpypy 时沿轴平均的方法？

> ID：13434743
> 
> 赞同：2
> 
> 时间：2012-11-17T21:02:17.823
> 
> 标签：python, numpy, pypy

我正在尝试通过使用使一些代码运行得更快`pypy`。但是，每当我使用 运行代码时，都会从' 的等效项 ( ) 中`pypy`得到一个错误。`pypy``numpy``numpypy`

在我常用的代码中，我使用...

```
numpy.average(array, axis=0) 
```

为了沿特定轴平均数组。

使用 pypy 和 numpypy 运行相同的代码时，出现以下错误：

```
TypeError: average() got an unexpected keyword argument 'axis' 
```

我可以使用`for`循环来遍历数组并平均单个元素，但这需要很长时间并且（我想）不能提供我想要的速度。

**是否有替代 numpy.average() 可以在使用 numpypy 时沿轴平均的方法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:08:58.227

如果不需要使用`weights`参数，可以`mean`改用（1.9.1-dev0 -- 不知道什么时候引入的）：

```
>>>> import numpypy as np
>>>> a = np.arange(2*3).reshape(2,3)
>>>> a
array([[0, 1, 2],
       [3, 4, 5]])
>>>> np.mean(a, axis=0)
array([ 1.5,  2.5,  3.5])
>>>> np.mean(a, axis=1)
array([ 1.,  4.])
>>>> a.mean(axis=0)
array([ 1.5,  2.5,  3.5])
>>>> a.mean(axis=1)
array([ 1.,  4.]) 
```

# javascript - Maps Api V3：getCenter() 和 getZoom() 不起作用

> ID：13434750
> 
> 赞同：6
> 
> 时间：2012-11-17T21:02:44.127
> 
> 标签：javascript, google-maps-api-3

在 Google Maps API V3 中，我创建了一个地图对象：

```
map = new google.maps.Map(document.getElementById("map_canvas"),
  myOptions); 
```

我将放大并平移该地图并稍后返回原始视图，我想保存缩放级别和地图的中心。我尝试以下方法：

```
oldCenter = map.getCenter();
oldZoom = map.getZoom(); 
```

但变量保持“未定义”。当我在控制台中做同样的事情时，我得到了正确的响应。

我究竟做错了什么？如果需要更多代码来找到答案或者这是一个明显的问题，请告诉我。

谢谢！

完整代码：

```
function initialize() {

  // CUSTOM PLACES
  var latlng = new google.maps.LatLng(51, 10);
  var germany = new google.maps.LatLng(51, 10);
  var myLatlng = new google.maps.LatLng(49,12);

  // DEFINE STYLE
  var styles = [
    {
      "stylers": [
        { "invert_lightness": true }
      ]
    }
  ];

  // MARKER STYLES
  var coin_image  = 'coin.png';
  var merch_image = 'merch.png';

  // DEFINE OPTIONS FOR MAP
  var myOptions = {
    panControl: false,
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL,
      position: google.maps.ControlPosition.LEFT_TOP
    },
    mapTypeControl: false,
    scaleControl: false,
    streetViewControl: false,
    overviewMapControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  // CREATE MAP OBJECT
  map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);

  map.setOptions({styles: styles});

  // select zoom, etc by defining 2 points
  var southWest = new google.maps.LatLng(45,-10);
  var northEast = new google.maps.LatLng(55,15);
  var bounds = new google.maps.LatLngBounds(southWest,northEast);
  map.fitBounds(bounds);

  placeMarker(southWest);
  placeMarker(northEast);

  // Place Random Markers
  var lngSpan = northEast.lng() - southWest.lng();
  var latSpan = northEast.lat() - southWest.lat();
  for (var i = 0; i < 50; i++) {
    var location = new google.maps.LatLng(southWest.lat() + latSpan * Math.random(),
        southWest.lng() + lngSpan * Math.random());
    var marker = new google.maps.Marker({
        position: location, 
        map: map,
        icon: merch_image
    });
    var j = i + 1;
    marker.setTitle(j.toString());
  }

  // TRANSACTION MARKERS

  // ONE FULL CYCLE
  // set marker

  var trans_marker = new google.maps.LatLng(52.31799,13.241904);
  var marker = new google.maps.Marker({
      position: trans_marker, 
      map: map,
      animation: google.maps.Animation.DROP,
      title:"Hello World!",
      icon: coin_image
  });

      // HERE'S THE PROBLEM
  // var oldCenter = map.getCenter();
  // var oldZoom = map.getZoom();

  console.log(map);
  oldMap = map;
  console.log(oldMap);
  // console.log(oldZoom);
  // console.log(oldCenter.toString());

  // pan to marker
  setTimeout(function() {map.panTo(trans_marker)}, startDelayed(3000));

  // zoom in on marker
  setTimeout(function() {zoomIn(ENDZOOM)}, startDelayed(1000));

  // show info window
  var contentString =  "<h3>Döner @ Coco Banh</h3>";
  contentString += ("<p>SumUp was used to pay for a Döner at Coco Banh in Berlin, Germany</p>");
  var infowindow = new google.maps.InfoWindow({
    content: contentString
  });

  setTimeout(function() {infowindow.open(map,marker)}, startDelayed(8000));
  setTimeout(function() {infowindow.close()}, startDelayed(5000));  

  // zoom out again
  setTimeout(function() {zoomOut(oldZoom)}, startDelayed(2000));

  // center again
  setTimeout(function() {map.panTo(oldCenter)}, startDelayed(8000));

}
    infowindow = new google.maps.InfoWindow({
   content: contentString
});

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T22:27:25.637

问题是边界和中心尚未设置。要获得它们，您需要在 zoom_changed 上的侦听器中执行此操作（用于缩放）；center_changed（用于中心）。可用的地图事件列在[文档](https://developers.google.com/maps/documentation/javascript/reference#Map)的事件下。您可以使用[addListenerOnce](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)只执行一次（第一次）。

像这样的东西会起作用：

```
var oldZoom = null;
var oldCenter = null;
google.maps.event.addListenerOnce(map, "zoom_changed", function() { oldZoom = map.getZoom(); });
google.maps.event.addListenerOnce(map, "center_changed", function() { oldCenter = map.getCenter(); }); 
```

[概念证明小提琴](http://jsfiddle.net/geocodezip/tnkcbg86/)

在这些事件触发之前，您将无法使用它们。

**代码片段：**

```
var map;
var ENDZOOM = 0;

function initialize() {

  // CUSTOM PLACES
  var latlng = new google.maps.LatLng(51, 10);
  var germany = new google.maps.LatLng(51, 10);
  var myLatlng = new google.maps.LatLng(49, 12);

  // DEFINE STYLE
  var styles = [{
    "stylers": [{
      "invert_lightness": true
    }]
  }];

  // MARKER STYLES
  var coin_image = 'http://maps.google.com/mapfiles/ms/micons/blue.png';
  var merch_image = 'http://maps.google.com/mapfiles/ms/micons/yellow.png';

  // DEFINE OPTIONS FOR MAP
  var myOptions = {
    panControl: false,
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL,
      position: google.maps.ControlPosition.LEFT_TOP
    },
    mapTypeControl: false,
    scaleControl: false,
    streetViewControl: false,
    overviewMapControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  // CREATE MAP OBJECT
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  map.setOptions({
    styles: styles
  });

  // select zoom, etc by defining 2 points
  var southWest = new google.maps.LatLng(45, -10);
  var northEast = new google.maps.LatLng(55, 15);
  var bounds = new google.maps.LatLngBounds(southWest, northEast);
  map.fitBounds(bounds);

  placeMarker(southWest);
  placeMarker(northEast);

  // Place Random Markers
  var lngSpan = northEast.lng() - southWest.lng();
  var latSpan = northEast.lat() - southWest.lat();
  for (var i = 0; i < 50; i++) {
    var location = new google.maps.LatLng(southWest.lat() + latSpan * Math.random(),
      southWest.lng() + lngSpan * Math.random());
    var marker = new google.maps.Marker({
      position: location,
      map: map,
      icon: merch_image
    });
    var j = i + 1;
    marker.setTitle(j.toString());
  }

  // TRANSACTION MARKERS

  // ONE FULL CYCLE
  // set marker

  var trans_marker = new google.maps.LatLng(52.31799, 13.241904);
  var marker = new google.maps.Marker({
    position: trans_marker,
    map: map,
    animation: google.maps.Animation.DROP,
    title: "Hello World!",
    icon: coin_image
  });

  var oldZoom = null;
  var oldCenter = null;
  google.maps.event.addListenerOnce(map, "zoom_changed", function() {
    oldZoom = map.getZoom();
    console.log(oldZoom);
    console.log(oldCenter.toString());
  });
  google.maps.event.addListenerOnce(map, "center_changed", function() {
    oldCenter = map.getCenter();
  });

  console.log(map);
  oldMap = map;
  console.log(oldMap);

  // pan to marker
  setTimeout(function() {
    map.panTo(trans_marker)
  }, startDelayed(3000));

  // zoom in on marker
  setTimeout(function() {
    zoomIn(ENDZOOM)
  }, startDelayed(1000));

  // show info window
  var contentString = "<h3>Döner @ Coco Banh</h3>";
  contentString += ("<p>SumUp was used to pay for a Döner at Coco Banh in Berlin, Germany</p>");
  var infowindow = new google.maps.InfoWindow({
    content: contentString
  });

  setTimeout(function() {
    infowindow.open(map, marker)
  }, startDelayed(8000));
  setTimeout(function() {
    infowindow.close()
  }, startDelayed(5000));

  // zoom out again
  setTimeout(function() {
    zoomOut(oldZoom)
  }, startDelayed(2000));

  // center again
  setTimeout(function() {
    map.panTo(oldCenter)
  }, startDelayed(8000));

  infowindow = new google.maps.InfoWindow({
    content: contentString
  });
}
google.maps.event.addDomListener(window, "load", initialize);

function placeMarker(latlng) {
  var marker = new google.maps.Marker({
    position: latlng,
    map: map
  })
}

function startDelayed() {};

function zoomIn(zoom) {};

function zoomOut(zoom) {};
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

# iphone - MapKit 互联网问题

> ID：13434757
> 
> 赞同：0
> 
> 时间：2012-11-17T21:03:24.153
> 
> 标签：iphone, xcode, ipad, maps

我回来了，对地图套件和互联网连接有疑问。我有一个跟踪用户的应用程序，但是当我关闭蜂窝数据和 wifi 时，它会跟踪用户并显示错误的距离。如果没有互联网，我想关闭地图，当有互联网时打开地图。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:09:22.173

看看[Apple](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)测试 Internet 可达性的可达性项目，只需在您的应用程序中实现它即可隐藏/显示地图。

这也是一个很好[的分步教程](http://www.raddonline.com/blogs/geek-journal/iphone-sdk-testing-network-reachability/)

这样做的好处是它可以与通知一起使用，因此您可以对网络中的变化做出反应，而不仅仅是在应用程序启动时网络是否可用。

一旦你将它包含在你的项目中，它可以很简单：

```
Reachability *reach = [Reachability reachabilityForInternetConnection];   
NetworkStatus status = [networkReachability currentReachabilityStatus];    
if (status == NotReachable) {        
    // hide map        
} else {        
    // show map
} 
```

# javascript - 在javascript中清除数组

> ID：13434759
> 
> 赞同：-1
> 
> 时间：2012-11-17T21:03:31.067
> 
> 标签：javascript, jquery, html, arrays

我尝试`playerNameArray.length = 0;` 这不会清空数组，而是使这些值成为`undefined`.

我尝试`playerNameArray = [];`这不会清空数组，而是使这些值成为`undefined`.

我尝试`var playerNameArray = new Array ();` 这不会清空数组，而是使这些值成为`undefined`.

也许问题是初始数组是公开的，我尝试在函数内部清空它们？

也许问题是我需要在我的 JavaScript 中公开该数组，因为在我的 html 页面上，我将数组传递给一个函数，如果我在使用它的函数中对其进行初始化，页面将无法识别该数组？

我将每个数组对象添加到数据库中，但用户应该能够在插入第一个数组后创建一个新数组。我试图阻止我的插入语句，并说如果数组元素 != 'undefined' 然后插入它，但它完全忽略了这一点并插入了`undefined`.

请问有什么建议吗？

代码如下：

```
var createListCounter = 0;
var playerID = new Array();
var playerNameArray = new Array();

function addToList(espnPlayerID, playerName) {
    playerID[createListCounter] = espnPlayerID; playerNameArray[createListCounter]                =playerName;
    createListCounter++
    var url = "";
    $('#accumListPlayer').append('<tr><td>'+ playerName + '</td></tr>');
} 
```

然后在一个按钮上单击我遍历该数组并将其保存到 oa db。一旦完成，我需要数组中没有任何内容。如果我仍然有原始对象，它们会再次写入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:09:47.790

```
Array.prototype.setAll = function(v) {
    var i, n = this.length;
    for (i = 0; i < n; ++i) {
        this[i] = v;
    }
}; 
```

然后你实际上可以做

```
playerNameArray.setAll("") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:17:27.787

将其设置为等于`[]`或`new Array()`用空白数组覆盖当前值。

如果你正在循环数组，你可以通过测试它的长度来检查它是否有任何元素：

```
if(playerNameArray.length > 0) // has at least one element 
```

您还可以使用以下`typeof`函数测试数组的各个元素：

```
if(typeof(playerNameArray[3]) == 'undefined')
{
    // element 3 is undefined
} 
```

# ios - 有什么方法可以在 iOS 目标 C 中提供服务 PLMN 和移动技术（hspa+、hsdpa、lte..）？

> ID：13434763
> 
> 赞同：3
> 
> 时间：2012-11-17T21:03:44.263
> 
> 标签：ios, ios5, ios6

有什么方法可以获取有关 DATA 连接的详细信息，例如使用的技术（EDGE、HSPA、HSPA+、HSDPA、LTE 等）和服务 PLMN？

此信息处于现场测试模式，但不知道如何从我的应用程序中读取此信息？

我认为这不是机密/个人数据，那么为什么 Apple 不提供访问权限呢？

有人知道可以完成这项工作的私有 API 吗？

# ios - iOS 6 上的 Facebook SDK 3.1.1 登录但令牌立即过期

> ID：13434766
> 
> 赞同：0
> 
> 时间：2012-11-17T21:03:59.350
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在实施新的 Facebook SDK，除了登录后，一切似乎都井井有条。当应用程序将我带到 Safari 并给它“好的”时，它会返回应用程序并报告成功：

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen: {
            NSLog(@"success");
        }

.
.
.

} 
```

但是当我在之后立即检查状态时：

```
if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
    NSLog(@"Logged in");
} else {
    NSLog(@"Not logged in");
} 
```

我得到：未登录。我没有收到任何错误消息。令牌似乎在发行后立即过期。想要一些关于如何解决这个问题的指导。此应用程序是作为一个新项目创建的，但它是对现有应用程序的更新。但是，运行新应用程序时，旧应用程序不在我的设备上。只是想我会提到它应该很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:11:21.480

该状态特定于这种情况：

```
 /*! One of two initial session states indicating that a cached token was loaded;
     when a session is in this state, a call to open* will result in an open session,
     without UX or app-switching*/
    FBSessionStateCreatedTokenLoaded        = 1, 
```

Since the "success" NSLog is executed in the code you posted, your state is actually: **FBSessionStateOpen**. Which means you are logged in and have a valid access token (log out FBSession.activeSession.accessToken to validate). Anyway, I believe you should be good - your loggedIn/notLoggedIn condition was just invalid.

# c - C 中的模拟并发

> ID：13434768
> 
> 赞同：2
> 
> 时间：2012-11-17T21:04:11.533
> 
> 标签：c, multithreading, concurrency

我知道有可用的函数和库允许 c 中的并发。

（pthread.h、fork() 等）

但是，我想知道是否有任何方法可以在 C 中模拟并发，而实际上不必使用多个线程？

示例场景：

有一个主程序循环运行和输出计算。不知何故，另一个函数通知主函数时间现在是下午 12:00，并且程序应该在用户去吃午饭时停止输出计算。在 12:30，该函数通知主函数再次开始输出计算。

有人可以指出我如何做到这一点的正确方向吗？

**编辑：**

从本质上讲，我相信应该有两种方法来做到这一点：

第一个是主程序不断检查备用功能，以便知道时钟何时到达 12:00。*（这很简单，我知道怎么做）*

第二个是让备用功能在需要时（即在 12:00 和 12:30）联系主程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:12:01.930

在我看来，您只需要一个简单的计时器即可`alarm()`：

```
#include <signal.h>
#include <stdio.h>
#include <unistd.h>

volatile unsigned stop_working = 0;

void alarm_handler(int signum)
{
    stop_working = 1;
    //alarm(1); //reschedule alarm
}

int main()
{        
    signal(SIGALRM, alarm_handler);
    alarm(1); //schedule alarm in seconds

    while (!stop_working) {
      //do some work
    }
} 
```

但是，如果您想要使用协程之类的东西，您应该[使用](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)类似`makecontext()`和`swapcontext()`

注意：这个例子是特定于 UNIX/Linux 的，对于 MinGW，你需要使用 winapi，使用 , 等`CreateWaitableTimer()`函数`SetWaitableTimer()`。有关详细信息，请参阅 MSDN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:52:02.350

如果您有多个需要同时运行的任务，那么并发模型（无论是否模拟）都是有意义的。在这种情况下，您似乎只有一项任务要运行。

如果您的唯一要求是您的计算在 12:00 停止并在 12:30 重新开始，那么您所需要的只是确保您的计算可以分成小步骤，以便您有机会检查在步骤之间开始和停止。这是一些伪代码：

```
while (true) {
    current_time = get_current_time();
    if (current_time >= 12:00 and current_time < 12:30)
        sleep(12:30 - current_time);
    else
        perform_calculation_step();
} 
```

如果启动和停止条件比您在示例中指出的更复杂，您可以将启动/停止逻辑抽象为一个单独的函数。例子：

```
while (true) {
    wait_if_necessary(); // this blocks when the app is not allowed to run
    perform_calculation_step()
} 
```

我希望这有帮助！

# javascript - jQuery平滑滚动到页面的特定部分？

> ID：13434772
> 
> 赞同：3
> 
> 时间：2012-11-17T21:04:43.980
> 
> 标签：javascript, jquery

如何平滑滚动到页面的特定部分？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<a href="#" class="scrollToBottom"><img src="images/godown.png" alt="Down Arrow" width="116" /></a>

<script type="text/javascript">

$(document).ready(function(){

 // Scroll page to the bottom
 $('a.scrollToBottom').click(function(){

 $('html, body, .content').animate({scrollTop: $(document).height()}, 1500);

 return false;

 });
})
</script> 
```

现在该代码的作用是，当我单击“godown.png”图像时，它会起作用，但会转到页面底部的末尾。无论如何让它去中间？我将如何用#middle 或其他东西定义中间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:31:03.463

为了使其顺利添加**e.preventDefault();** 在滚动功能中

```
$('a.scrollToBottom').click(function(e){
     e.preventDefault();
     $('html, body, .content').animate({scrollTop: $(document).height()}, 1500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:18:04.823

要滚动到页面的特定部分，您可以使用 jQuery 函数 offset [ [http://api.jquery.com/offset/](http://api.jquery.com/offset/) ] 来计算元素相对于页面的偏移量。然后您可以滚动到文档中的某个位置。

例子

html:

```
<a href="#">scroll to c</a>
<div id="a">a</div>
<div id="b">b</div>
<div id="c">c</div> 
```

带有 jQ​​uery 的 js：

```
$("a").click(function(e){
    var targetOffset= $("#c").offset().top;
    $('html, body').animate({scrollTop: targetOffset}, 1500);
    e.preventDefault();    
}); 
```

完整代码：http: [//jsfiddle.net/rniestroj/FkCK8/](http://jsfiddle.net/rniestroj/FkCK8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T16:29:55.867

尝试这个 ：）

```
$("a").click(function(e){
  e.preventDefault();
  var targetOffset = $(".content").offset().top + 1500;
  $('html, body').animate({scrollTop: targetOffset}, 0);
}); 
```

# android - 等待几位玩家的输入

> ID：13434777
> 
> 赞同：0
> 
> 时间：2012-11-17T21:05:06.023
> 
> 标签：android, dialog

我正在制作一款游戏，其中某些事件需要每个玩家输入他们的反应，超出正常的游戏流程。例如，有 4 个人类玩家，将连续弹出四个对话框，询问每个玩家他们想做什么。这是我发现等待输入的唯一方法。

```
int counter = 0;

void askInput() {
  counter++;
  if (counter > max)
    return;
  // initialize dialog
  AlertDialog.Builder builder = new AlertDialog.Builder(this);                  
  builder.setTitle(R.string.title)
  .setNegativeButton(R.string.button, new OnClickListener() {
         @Override
         public void onClick(DialogInterface dialog, int which) {
           askInput();
         }                          
  });
  AlertDialog dialog = builder.create();
  dialog.show();
} 
```

这对我来说似乎很粗略。Android 的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:00:37.740

好吧，经过反思，它似乎并不那么粗略。

# java - 代码更改后立即对 java 进行自动化单元测试

> ID：13434785
> 
> 赞同：3
> 
> 时间：2012-11-17T21:06:10.560
> 
> 标签：java, maven, guard

是否有任何工具/库，如Java 的[Guard](https://github.com/guard/guard)（用于 Ruby on Rails），它们监听文件系统更改，即项目中代码文件的更改，并自动运行与该类或整个项目相关的单元测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:16:50.100

看起来你需要像[Jenkins](http://jenkins-ci.org/)这样的东西，在本地运行 + [FSTrigger](https://wiki.jenkins-ci.org/display/JENKINS/FSTrigger+Plugin)插件。

但是如果你需要从你的应用程序中监控文件系统的变化（Guard 是通用工具），Stackoverflow 上有关于它的讨论：

[是否有用于 Java 的复杂文件系统监视器，它是免费软件还是开源的？](https://stackoverflow.com/questions/1096404/is-there-a-sophisticated-file-system-monitor-for-java-which-is-freeware-or-open)

[Java中的文件更改侦听器](https://stackoverflow.com/questions/494869/file-changed-listener-in-java)

[如何在java中检测文件系统已更改](https://stackoverflow.com/questions/2450926/how-to-detect-filesystem-has-changed-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T00:02:17.460

有趣的是，Guard.rb 确实支持 java，这要归功于 guard-java gem。最棒的是，它确实支持 maven、ant 或任何您的构建系统。这允许设置 jenkins 和 cucumber，然后在您编辑功能/源代码时让警卫运行您的测试。

将以下内容添加到项目的 Gemfile 中：

```
gem 'guard-java' 
```

然后发出`bundler install && guard init java`

其余的可以在[https://github.com/infospace/guard-java阅读](https://github.com/infospace/guard-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T12:43:25.847

我不知道你是否还在寻求答案，但我写了一个小工具，灵感来自 Guard，它可以做你想做的事：

[https://github.com/athieriot/JTaches](https://github.com/athieriot/JTaches)

它使用 Java7 中可用的 Watcher API

希望能帮助到你

# loops - 在 Vim 中自动添加/生成内容

> ID：13434793
> 
> 赞同：5
> 
> 时间：2012-11-17T21:07:14.330
> 
> 标签：loops, vim, text, editing

我有一个巨大的数字列表，我想在每一行的末尾添加内容。是这样的：

前：

```
123123
123123
13234
124125
12634
5234 
```

后：

```
123123, 1
123123, 2
13234, 3
124125, 4
12634, 5
5234, 6 
```

几点：

1.  我知道这`:range s/oldpattern/newpattern/`将用新模式替换旧模式。

2.  我知道这`for i in range(begin, end) | something | endfor`会产生那些额外的数字。

但是，我不知道是否可以将它们结合起来做我想做的事情（或者是否有不同的方法来做）。有谁知道我怎样才能自动添加这些额外的值？我很确定使用 Vim 是可能的，但我不知道如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T21:15:32.160

您可以通过直观地选择区域然后键入来做到这一点

```
:s/$/\=', '.(line('.')-line("'<")+1)<CR> 
```

`:`（从可视模式键入时会自动添加范围）。需要可视模式来获取`line("'<")`内容，如果您可以输入行号来代替它，请使用任何范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:24:46.723

我会做

```
:%!nl
:%s/\v^\s*(\d+)\s+(.*)$/\2, \1/g 
```

nl 将（默认情况下）跳过编号空行

或作为单行者

```
:exec "%!nl"|%s/\v^\s*(\d+)\s+(.*)$/\2, \1/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T22:10:13.273

```
:%!awk '{print $0", "NR}' 
```

或者

```
:%!perl -lpe '$_.=", $."' 
```

# iphone - 在 layoutSubviews 中调用 setNeedsDisplay？

> ID：13434794
> 
> 赞同：4
> 
> 时间：2012-11-17T21:07:16.267
> 
> 标签：iphone, ios, uiview, drawrect, layoutsubviews

考虑一个具有自定义背景的视图，该视图以`drawRect:`. 如果视图改变大小，则需要重新绘制背景。

这是一个坏主意吗？

```
- (void) layoutSubviews
{
    [super layoutSubviews];
    [self setNeedsDisplay];
} 
```

如果是，考虑到我无法控制谁更改视图的大小，有什么更好的选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T21:26:26.377

不要那样做，没必要。将`contentMode`视图的设置为`UIViewContentModeRedraw`：

> UIViewContentModeRedraw
> 
> 通过调用 setNeedsDisplay 方法在边界更改时重新显示视图。在 iOS 2.0 及更高版本中可用。在 UIView.h 中声明。

这将达到相同的效果。

# ruby-on-rails - Ruby On Rails：将文件上传到特定文件夹

> ID：13434796
> 
> 赞同：0
> 
> 时间：2012-11-17T21:07:22.817
> 
> 标签：ruby-on-rails, file-upload

我正在[为 Ruby on Rail 使用这个文件上传器示例](https://github.com/tors/jquery-fileupload-rails-paperclip-example)。

现在文件按它们的 ID 保存到：`public->system->uploads->uploads->000->000.`

我需要将它保存到这样的文件夹系统中：`public->system->Files->Types(JPG OR PDF)` 文件必须不是根据它们的 ID 而是根据它们的类型来保存。

例子：

所有 jpg 文件应保存到： `public->system->Files->JPG`

所有 PDF 文件应保存到： `public->system->Files->PDF`

我已经创建了文件夹，我只需要指定必须保存文件的路径。

这是来自的代码`uploads_controller.rb`

```
 def create
    p_attr=params[:upload]
    p_attr[:upload] = params[:upload][:upload].first if params[:upload][:upload].class == Array
    @upload = Upload.new(p_attr)

    respond_to do |format|
      if @upload.save
        format.html {
          render :json => [@upload.to_jq_upload].to_json,
          :content_type => 'text/html',
          :layout => false
        }

        format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
      else
        format.html { render action: "new" }

        format.json{ render json: {name:(@upload.upload_file_name).split(".").first ,error: @upload.errors.messages[:upload_file_name]}, :status =>422}

      end
    end
  end 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:35:22.093

您可以使用正则表达式手动执行此操作。所以它会是这样的：

```
type = p_attr.filename.match(/^*\w{3,}$/).to_s 
```

文件名是它在 p_attr 中调用的任何内容。因此，这将为您提供以字符串结尾的文件类型。根据回形针 gem，您可以通过将它们设置为参数来设置不同的路径和 url：

```
path = "#{Rails.env}/public/system/FILE/#{type}"
@upload = Upload.new(p.attrs, path: path, url: path) 
```

在上传线上不是 100% 确定，但类似的东西应该能够覆盖回形针默认值。

有关更多信息，请查看关于存储的[回形针自述文件部分。](https://github.com/thoughtbot/paperclip#understanding-storage)它解释了覆盖默认路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:22:15.933

[更改回形针文件存储位置](http://travisonrails.com/2009/01/11/changing-paperclip-file-storage-location)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T21:10:53.367

我建议切换到[carrierwave uploader](https://github.com/jnicklas/carrierwave)。有一些配置选项，它们将帮助您按类型分隔文件。我的意思是，在载波上传器的这种配置中：

```
def store_dir
  "uploads/#{Rails.env}/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"    
end 
```

您可以使用方法更改“model.id”部分，按类型命名图像。

# java - Spring如何从ProxyFactoryBean获取具有原型范围的bean

> ID：13434799
> 
> 赞同：0
> 
> 时间：2012-11-17T21:07:33.037
> 
> 标签：java, spring

我坚持这个问题。

使用的组件：Spring 1.2.8、Hibernate 3.2.0 cr1、tomcat、struts、java 6

我正在尝试从范围=原型的 ProxyFactoryBean 获取 bean。我不成功。我不知道出了什么问题。

这是上下文：

```
<beans>

    <bean id="ruleCheckTask" class="rulechecker.RuleCheckTask" singleton="false">

    <bean id="ruleCheckTaskPrototype" class="org.springframework.aop.target.PrototypeTargetSource">
       <property name="targetBeanName" value="ruleCheckTask" />
    </bean>

    <bean id="transactionInterceptorRuleCheckTask" class="org.springframework.transaction.interceptor .TransactionInterceptor">
       <property name="transactionManager"> 
           <ref bean="transactionManager" />
       </property>
       <property name="transactionAttributeSource">
          <value>
              rulechecker.IRuleCheckTask.run=PROPAGATION_REQUIRE S_NEW
          </value>
       </property>
   </bean>

  <bean id="ruleCheckTaskService" class="org.springframework.aop.framework.ProxyFact oryBean">
         <property name="target" ref="ruleCheckTaskPrototype" />
         <property name="proxyInterfaces">
             <value>
                  rulechecker.IRuleCheckTask
             </value>
        </property>
        <property name="interceptorNames">
              <list>
                   <value>transactionInterceptorRuleCheckTask</value>
              </list>
        </property>
   </bean>
</beans> 
```

在我执行以下操作时的代码中：

.....................

.....................

IRuleCheckTask checkTask = (IRuleCheckTask) applicationContext.getBean("ruleCheckTaskService") ; checkTask.setTestCase(oneTestCase);

尝试在 checkTask bean 上调用 setTestCase 时出现以下异常：

```
java.lang.IllegalArgumentException: object is not an instance of declaring class
at sun.reflect.NativeMethodAccessorImpl.invoke0(Nativ e Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknow n Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Un known Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.aop.support.AopUtils.invokeJoi npointUsingReflection(AopUtils.java:287)
at org.springframework.aop.framework.ReflectiveMethod  Invocation.invokeJoinpoint(ReflectiveMethodInvocat ion.java:181)
at org.springframework.aop.framework.ReflectiveMethod    Invocation.proceed(ReflectiveMethodInvocation.java :148)
at org.springframework.transaction.interceptor.Transa ctionInterceptor.invoke(TransactionInterceptor.jav a:96)
at org.springframework.aop.framework.ReflectiveMethod Invocation.proceed(ReflectiveMethodInvocation.java :170)
at org.springframework.aop.framework.JdkDynamicAopPro xy.invoke(JdkDynamicAopProxy.java:176)
at $Proxy21.setTestCase(Unknown Source) 
```

如果在 ProxyFactoryBean 我使用 ruleCheckTask 而不是 ruleCheckTaskPrototype，它就可以工作。问题是在那种情况下我总是获得 ruleCheckTask 的单例。我总是需要新的实例。一件小事 RuleCheckTask 实现了 Runnable 接口。

有人可以给我一个提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T13:44:36.393

尝试：

```
<bean id="ruleCheckTaskService" class="org.springframework.aop.framework.ProxyFact oryBean">
         <property name="targetName" value="ruleCheckTask" />
         <property name="singleton" value="false" />  <!-- this do the trick -->
         <property name="proxyInterfaces">
             <value>
                  rulechecker.IRuleCheckTask
             </value>
        </property>
        <property name="interceptorNames">
              <list>
                   <value>transactionInterceptorRuleCheckTask</value>
              </list>
        </property>
   </bean> 
```

您也可以将`targetSource`(no `target`) 设置为`ruleCheckTaskPrototype`。不同之处在于，在第一个上，您有一个独立的代理配置实例，在第二个`PrototypeTargetSource`上，每个请求都会获取一个新实例。

# emacs - 亚马逊云上的 nginx 默认配置

> ID：13434807
> 
> 赞同：0
> 
> 时间：2012-11-17T21:08:56.840
> 
> 标签：emacs, nginx, amazon-ec2

我已经设置了一个云并在其上安装了 nginx。我可以通过 msysgit 启动和停止 nginx。但是我想更改配置文件并使用以下命令 `emacs /etc/nginx/sites-available/default`

但是该文件是只读的，我不能`chmod`。有什么想法可以让它可写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:03:44.513

尝试将您的命令更改为`sudo emacs /etc/nginx/sites-available/default`

# objective-c - 如何让 modf 或 modff 正常工作？

> ID：13434809
> 
> 赞同：1
> 
> 时间：2012-11-17T21:08:58.557
> 
> 标签：objective-c, c

我只是尝试使用递增计数器通过取计数器相对于列表长度的模数来循环遍历 (10) 个名称的列表。但是，代码似乎在这里和那里跳过了一个数字。我尝试了 modf() 和 modff() 以及不同的类型转换，但没有运气。

以下是代码示例：

```
defaultNameList = [NSArray arrayWithObjects:@"RacerX",@"Speed",@"Sprittle",@"Chim-Chim",@"Pops",@"Dale",@"Junior",@"Chip",@"Fred",@"Barney", nil]; 
```

* * *

```
float intpart;
int pickName = (int)(modff(entryCount/10.0,&intpart) * 10.0);
NSLog(@"%ld %f %f %f %d %@",entryCount, entryCount/10.0, modff(entryCount/10.0,&intpart), modff(entryCount/10.0,&intpart) * 10.0 ,pickName, [defaultNameList objectAtIndex:pickName]); 
```

* * *

控制台给出：

```
 0 0.000000 0.000000 0.000000 0 RacerX
 1 0.100000 0.100000 1.000000 1 Speed
 2 0.200000 0.200000 2.000000 2 Sprittle
 3 0.300000 0.300000 3.000000 3 Chim-Chim
 4 0.400000 0.400000 4.000000 4 Pops
 5 0.500000 0.500000 5.000000 5 Dale
 6 0.600000 0.600000 6.000000 6 Junior
 7 0.700000 0.700000 7.000000 6 Junior
 8 0.800000 0.800000 8.000000 8 Fred
 9 0.900000 0.900000 9.000000 8 Fred
 10 1.000000 0.000000 0.000000 0 RacerX 
```

据我所知，它不应该跳过 pickName = 7 或 9，但确实如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:13:50.933

强制转换为`(int)`截断文件。也就是说，如果在实际架构上使用的浮点系统中不能精确表示，并且比精确值小一点，则将其四舍五入到零。要解决此问题，请舍入数字而不是截断：

```
int pickName = (int)(modff(entryCount / 10.0, &intpart) * 10.0 + 0.5); 
```

（这假设该数字不是负数。）

但是，由于您在这里使用整数，并且浮点运算很昂贵，因此您应该考虑使用模运算符（它对整数进行运算）：

```
int pickName = entryCount % 10; 
```

# java - Serializable 如何在文件编辑上保存对象或清空它并再次填充它（查看前）？

> ID：13434814
> 
> 赞同：0
> 
> 时间：2012-11-17T21:09:51.487
> 
> 标签：java, serialization, collections, deserialization, iostream

我有这样的地图集合：

```
Map<File,Boolean> status = new HashMap<File,Boolean>(); 
```

使用可序列化将其写入文件，然后我必须通过添加新元素
或删除一个或多个元素来编辑集合（状态）。

通过添加和删除元素或清空它并再次将其作为对象填充？
以及如何（如果可以的话）从文件中添加或删除元素？

有什么不清楚的可以问我lz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:26:08.637

不能只删除文件的一部分。每次在地图中进行更改时，都必须覆盖整个文件。看我的例子：

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.util.HashMap;
import java.util.Map;

public class SerializationProgram {

    public static void main(String[] args) throws Exception {
        emptyTest();
        addAndRemoveTest();
    }

    private static void emptyTest() throws Exception {
        ObjectSerializer serializer = new ObjectSerializer();
        serializer.serialize(new FileStatus());
        FileStatus persisted = serializer.deserialize(FileStatus.class);
        test(persisted, new FileStatus());
    }

    private static void addAndRemoveTest() throws Exception {
        ObjectSerializer serializer = new ObjectSerializer();
        FileStatus toPersist = new FileStatus();
        FileStatus mirror = new FileStatus();

        toPersist = serializeDeserializeAndTest(serializer, toPersist, mirror);

        File file = new File("/test/test.txt");
        Boolean status = Boolean.TRUE;

        // Add file status
        toPersist.addOrChangeStatus(file, status);
        mirror.addOrChangeStatus(file, status);

        toPersist = serializeDeserializeAndTest(serializer, toPersist, mirror);

        // remove file status
        toPersist.removeStatus(file);
        mirror.removeStatus(file);

        toPersist = serializeDeserializeAndTest(serializer, toPersist, mirror);
        toPersist = serializeDeserializeAndTest(serializer, toPersist, mirror);
    }

    private static FileStatus serializeDeserializeAndTest(
            ObjectSerializer serializer, FileStatus toPersist, FileStatus mirror)
            throws Exception {
        serializer.serialize(toPersist);
        toPersist = serializer.deserialize(FileStatus.class);
        test(toPersist, mirror);
        return toPersist;
    }

    private static void test(FileStatus given, FileStatus expected) {
        if (given.equals(expected)) {
            System.out.println("everything is OK");
        } else {
            throw new IllegalArgumentException("Are not the same!");
        }
    }
}

class ObjectSerializer {

    private static final boolean OVERWRITE_MODE = false;

    public <T> void serialize(T instance) throws IOException {
        OutputStream overwriteStream = new FileOutputStream(getFile(instance.getClass()), OVERWRITE_MODE);
        OutputStream bufferedStream = new BufferedOutputStream(overwriteStream);
        ObjectOutputStream objectstream = new ObjectOutputStream(bufferedStream);
        objectstream.writeObject(instance);
        objectstream.close();
    }

    @SuppressWarnings("unchecked")
    public <T> T deserialize(Class<T> clazz) throws Exception {
        InputStream input = new BufferedInputStream(new FileInputStream(getFile(clazz)));
        ObjectInputStream objectStream = new ObjectInputStream(input);
        T instance = (T) objectStream.readObject();
        objectStream.close();
        return instance;
    }

    private <T> File getFile(Class<T> clazz) {
        return new File(clazz.getName());
    }
}

class FileStatus implements Serializable {

    private static final long serialVersionUID = 1L;

    Map<File, Boolean> statusMap = new HashMap<File, Boolean>();

    public void addOrChangeStatus(File file, boolean status) {
        statusMap.put(file, status);
    }

    public void removeStatus(File file) {
        statusMap.remove(file);
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result
                + ((statusMap == null) ? 0 : statusMap.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        FileStatus other = (FileStatus) obj;
        if (statusMap == null) {
            if (other.statusMap != null)
                return false;
        } else if (!statusMap.equals(other.statusMap))
            return false;
        return true;
    }
} 
```

# wcf - WCF SOAP 回复到 ASMX SOAP 回复格式

> ID：13434815
> 
> 赞同：2
> 
> 时间：2012-11-17T21:09:55.373
> 
> 标签：wcf, soap

我有一个能够与旧的 ASMX Web 服务通信的第三方 SOAP 客户端。

问题在于 WCF 服务。

我的 WCF 服务从该客户端接收消息没有问题，但客户端不喜欢我的 WCF 响应。

我的测试 WCF 服务发出以下响应：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
 <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <testResponse xmlns="http://www.tempuri.org">
   <testResult>randomStringData</testResult>
  </testResponse>
 </s:Body>
</s:Envelope> 
```

但是旧的 SOAP 客户端需要这种响应（ASMX 服务）：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <soap:Body>
  <testResponse xmlns="http://tempuri.org/">
   <testResult>randomStringData</testResult>
  </testResponse>
 </soap:Body>
</soap:Envelope> 
```

我无法控制客户。有没有办法可以配置我的 WCF 以发送与我的 ASMX 服务完全相同的消息？

我的 WCF 服务使用以下绑定：

```
<customBinding>
    <binding name="soap11">
      <textMessageEncoding messageVersion="Soap11" writeEncoding="utf-8"></textMessageEncoding>
      <httpTransport></httpTransport>
    </binding>
  </customBinding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:59:11.473

我设法使用自定义消息检查器和 BeforeSendReply 方法解决了前缀问题。

[http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.beforesendreply.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.beforesendreply.aspx)

P.S Another great method is AfterReceiveRequest for all kind of message tweaking magic!

# jquery - 设置无限滚动 Kaminari Jquery Ajax 时，Rails 500 内部服务器错误 jquery.js:8417

> ID：13434816
> 
> 赞同：1
> 
> 时间：2012-11-17T21:09:57.853
> 
> 标签：jquery, ruby-on-rails, infinite-scroll, kaminari

我是 Web 开发的新手，并且已经开始构建一个 Rails 应用程序，我想在其中实现无限滚动。为此，我在我的应用程序中设置了 Kaminari 分页 gem，并且工作正常。为了制作无尽的滚动片段，我遵循 Railscast 114（修订版）。当然，它不起作用。当我加载页面时，它会在几秒钟后正常加载。

**Chrome Web 开发控制台中的错误：**

```
GET http://localhost:3000/home?page=2&_=8917348102384 500 (Internal Server Error) jquery.js:8417

If I expand this error I see the following:

send jquery.js:8417

jQuery.extend.ajax jquery.js:7969

jQuery.(anonymous function) jquery.js:7496

jQuery.extend.getScript jquery.js:7509

(anonymous function) recent.js:10

jQuery.event.dispatch jquery.js:3064

elemData.handle.eventHandle jquery.js:2682

jQuery.event.trigger jquery.js:2947

(anonymous function) jquery.js:3605

jQuery.extend.each jquery.js:612

jQuery.fn.jQuery.each jquery.js:242

jQuery.fn.extend.trigger jquery.js:3604

jQuery.fn.(anonymous function) jquery.js:3658

(anonymous function) recent.js:13

fire jquery.js:975

self.fireWith jquery.js:1083

jQuery.extend.ready jquery.js:407

DOMContentLoaded jquery.js:84 
```

错误中的 URL 是下一组图像的 URL，如果单击它将带我到它们。从该页面，控制台将显示相同的错误，并带有指向下一组图像的新 URL 等。所以，它似乎只工作了一半。我已经坚持了几个小时。让我知道发布我的任何代码是否会有所帮助。任何帮助是极大的赞赏！

# android - 在 Android 上使用 Sqlite

> ID：13434817
> 
> 赞同：0
> 
> 时间：2012-11-17T21:10:36.270
> 
> 标签：android, sqlite, sqliteopenhelper

我正在通过[本教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)学习在 Android 上使用 Sqlite 。我无法理解某些代码。

```
 public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    } 
```

我在我的活动中创建了一个新的 DatabaseHandler 对象。构造函数中的 super 是 SQLiteOpenHelper 构造函数。该代码效果很好，它会创建一个新数据库，如果没有，它会使用旧数据库（如果存在）。我想对此代码进行一些更改（我想将不同的表添加到一个数据库中），但我不明白这是如何工作的，构造函数如何知道它应该创建一个新的数据库还是使用现有的数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:13:28.780

诀窍是你的类扩展了 SQLiteOpenHelper，`super`在你的构造函数中调用会触发很多幕后代码。

如果您通读[SQLiteOpenHelper 源代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/database/sqlite/SQLiteOpenHelper.java/)，您会看到`getWritableDatabase()`并`getReadableDatabase()`调用相同的方法：`SQLiteOpenHelper#getDatabaseLocked()`. 这种方法完成了大部分工作。它可以根据您在一个简单命令中提供的信息来确定是否需要创建、打开、升级或其他任何数据库：`super(context, DATABASE_NAME, null, DATABASE_VERSION);`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:47:38.693

当你想打开你的数据库时，你调用 SQLiteOpenHelper.getReadableDatabase() 或 SQLiteOpenHelper.getWriteableDatabase()。如果数据库存在，则返回它的句柄。如果它不存在，系统会调用 onCreate()，您可以在其中执行 db.execSQL。

最好调用类 DatabaseOpenHelper 而不是 DatabaseHandler。它所做的是将创建数据库推迟到需要时，而不是在其他类的开头创建它。这对于由 SQLite 数据库支持的内容提供者特别有用。您应该使用 ContentProvider.onCreate() 进行非常快速的初始化，然后执行 SQLiteOpenHelper.onCreate() 来创建数据库。这样，系统可以在您的应用程序启动时加载您的 ContentProvider，但它不必对您的数据库做任何事情，直到有东西试图访问它。

# json - 使用 Gson 和 JsonObject 格式化和解析数据

> ID：13434819
> 
> 赞同：12
> 
> 时间：2012-11-17T21:10:45.027
> 
> 标签：json, parsing, gson

我正在使用[JsonObject](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html)和[Gson](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)来格式化我需要以字符串形式发送的数据，然后在其他地方检索和解析它。这是我的简单代码，它不起作用：

```
public static void main(String[] args) 
{

    Gson g = new Gson();
    Gson listG = new Gson();
    ArrayList<String> l= new ArrayList<String>();
    l.add("abcd");
    l.add("efgh");
    l.add("ijkl");

    String list = listG.toJson(l);

    JsonObject jObject = new JsonObject();
    jObject.addProperty("command" , 1);
    jObject.addProperty("message" , "this is a test message");
    jObject.addProperty("list" , list);

    String toSend = g.toJson(jObject);
    System.out.println(toSend);  

    Gson rec = new Gson();
    JsonObject newObj = rec.fromJson(toSend, JsonObject.class);
    System.out.println(newObj);  // getting nothing in newObj

} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-17T21:20:46.387

你应该使用：

```
JsonObject newObj = new JsonParser().parse(toSend).getAsJsonObject(); 
```

那里有很多电话，但要点是使用[JsonParser](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonParser.html)类。

# hadoop - 如何在 AS/400 服务器和 Hadoop 之间建立连接并移动数据？

> ID：13434822
> 
> 赞同：0
> 
> 时间：2012-11-17T21:11:18.723
> 
> 标签：hadoop, mapreduce, hdfs, sqoop

如何从 AS/400 服务器上的 db2 获取数据/表到 Hadoop 文件系统？如何在 AS/400 服务器和 Hadoop 文件系统之间建立连接？

我知道我们可以使用 SQOOP 从 MySQL 服务器数据获取数据/表到 Hadoop 文件系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:13:48.163

I believe that DB2 has native connector in Sqoop, so I would recommend similar way as you're moving data from MySQL (e.g. using JDBC interface).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T03:47:52.777

SQOOP 使用 JDBC 连接器与数据库交互。您可以将 JT400 Java 库 ( [http://jt400.sourceforge.net/](http://jt400.sourceforge.net/) ) 用于 JDBC 驱动程序。

# c - 如何计算可变长度结构所需的内存量？

> ID：13434826
> 
> 赞同：8
> 
> 时间：2012-11-17T21:11:57.763
> 
> 标签：c, malloc, sizeof

给定这样的结构：

```
struct a {
    int b;
    int c;
    my_t d[];
} 
```

我必须传递什么来`malloc`为`struct a`where `d`has`n`元素分配足够的内存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T21:19:19.000

```
struct a *var = malloc(sizeof(*var) + n*sizeof(var->d[0])) 
```

使用变量 for`sizeof`将确保在类型更改时更新大小。否则，如果您更改类型，`d`或者`var`如果您忘记更新任何相应的分配，则可能会因未分配足够的内存而引入静默且可能难以发现的运行时问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T21:17:20.860

例如，您可以使用：`sizeof(struct a) + sizeof(my_t [n])`.

```
typedef int my_t;

struct a {
  int b;
  int c;
  my_t d[];
};

int n = 3;

main(){
  printf("%zu %zu\n", sizeof(struct a), sizeof(my_t [n]));
} 
```

结果：8 12

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T21:17:17.713

这应该足够了：

```
sizeof(a) + n * sizeof(my_t) 
```

# php - 在 JavaScript 中回显 PHP 变量（并在 iframe 中显示值）

> ID：13434829
> 
> 赞同：0
> 
> 时间：2012-11-17T21:12:09.703
> 
> 标签：php, javascript, iframe

我想用 php 从 mysql 查询一个值，将该值分配给一个变量，在一些 JavaScript 中回显 php 变量，并将该值显示在 iframe 中。

我只是无法让它工作......

**我的PHP：**

```
<?php
$text_id = $_GET['text'];

$stmt = $dbConnection->prepare("SELECT * FROM content WHERE id=:id");
$stmt->bindParam(":id", $text_id);
$stmt->execute();
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
foreach($result as $row)
{
    $text = $row['text'];
}
?> 
```

**我的 JavaScript：**

```
(The function is called with <body onLoad="iFrameOn();">)
function iFrameOn()
{
    richTextField.document.designMode = 'On';
    window.frames['richTextField'].document.body.innerHTML = <?php echo json_encode($text); ?>;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:05:21.527

我解决了这个问题。我将文件保存为 .js，当然为了使用 php，文件必须是 .php。很抱歉犯了愚蠢的错误，非常感谢您的所有回答。

# java - log4j：MySQL 的 JDBCAppender 错误

> ID：13434832
> 
> 赞同：4
> 
> 时间：2012-11-17T21:12:35.700
> 
> 标签：java, mysql, jdbc, log4j

如何修复错误？

**log4j.properties**

```
 # Define the root logger with appender file
log4j.rootLogger = ALL, DB

# Define the DB appender
log4j.appender.DB=org.apache.log4j.jdbc.JDBCAppender

# Set JDBC URL
log4j.appender.DB.URL=jdbc:mysql://localhost/youtube

# Set Database Driver
log4j.appender.DB.driver=com.mysql.jdbc.Driver

# Set database user name and password
log4j.appender.DB.user=root
log4j.appender.DB.password=root

# Set the SQL statement to be executed.
log4j.appender.DB.sql=INSERT INTO logs VALUES('%x','%d','%C','%p','%m')

# Define the layout for file appender
log4j.appender.DB.layout=org.apache.log4j.PatternLayout 
```

**jdbcAppender.java**

```
public class jdbcAppender{
  /* Get actual class name to be printed on */
  static Logger log = Logger.getLogger(jdbcAppender.class.getName());

  public static void main(String[] args) throws IOException,SQLException{

     log.debug("Debug");
     log.info("Info");
  }
} 
```

**数据库**

![在此处输入图像描述](../Images/8e771f95d0f5dd7eb1371dedecbc18df.png)

**错误**

![在此处输入图像描述](../Images/cdebe80fc3971078df5d39400957227f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:24:41.280

根据您使用的 MySQL 版本，您需要定义该`DATED`字段，以便它可以接受`DATETIME`包含几分之一秒的值。默认情况下，`DATETIME`接受值为`YY-MM-DDDD HH:MM:SS`.

在这里阅读：http: [//dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html#date-and-time-standard-sql-literals](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html#date-and-time-standard-sql-literals)

您可能遇到的另一个问题是 MySQL 期望分数的分隔符是点 ( `.`)，而不是逗号。您的异常的堆栈跟踪显示逗号作为分隔符，我相信它是从您的系统的语言环境派生的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T22:14:24.410

You can change the insert statement to change the date string into an appropriate datetime something like:

```
log4j.appender.DB.sql=INSERT INTO logs VALUES('%x',STR_TO_DATE( '%d', '%Y-%M-%d %H:%i' ),'%C','%p','%m') 
```

This is not the appropriate format, but just an idea of another approach.

I'm just looking into mysql millisecond handling, but I see the date string is: '2012-11-17 16:07:29,995', Is the 995 part milliseconds, or is the 29,995 part a decimal second?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T05:44:24.310

```
log4j.appender.DB.sql=INSERT INTO logs VALUES('%x','%d','%C','%p','%m') 
```

进入

```
log4j.appender.DB.sql=INSERT INTO logs VALUES('%x','%d{yyyy-MM-dd HH:mm:ss}','%C','%p','%m') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T10:20:52.600

您可以更改插入语句以将日期字符串转换为适当的格式。就像是：

```
log4j.appender.DB.sql=INSERT INTO logs VALUES('%x','%d{yyyy-MM-DD HH:MM:SS}','%C','%p','%m') 
```

希望能帮助到你。

# macos - 尝试安装 matplotlib 时出错

> ID：13434833
> 
> 赞同：1
> 
> 时间：2012-11-17T21:12:55.427
> 
> 标签：macos, matplotlib

尝试使用 pip 或 easy_install 安装 matploblib 时，遇到以下错误：

```
 numpy: 1.5.1
                        * Could not find the headers for numpy.  You may
                        * need to install the development package. 
```

我的 Mac 安装了 python 2.7 和 numpy 1.5.1，所以我不认为我搞砸了。我发现了其他几个讨论这个问题的线程，但我无法使这些解决方案发挥作用。想知道是否有其他人遇到过这个并想通了？谢谢！

# sql - SQL 是否有隐含 (->) 关系运算符

> ID：13434835
> 
> 赞同：2
> 
> 时间：2012-11-17T21:13:15.177
> 
> 标签：sql, operators, logic

我想表达一个条件（在 where 子句中），其中一列中的值要求另一列中必须满足条件。这是一个逻辑隐含 (→) 关系，等价于“非 A 或 B”(¬A∨B)。

是否有现有的 SQL 运算符或函数用于此？我担心这种`(not(A) or B)`表达方式可能会混淆我的代码未来没有 CS 背景的维护者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:58:32.757

没有这样的运营商。定义这样的函数或使用注释。

# php - Cookie 仅在选中复选框时设置，但在未选中时不设置

> ID：13434840
> 
> 赞同：-1
> 
> 时间：2012-11-17T21:13:50.777
> 
> 标签：php, login-script

我使用 PHP 制作的当前登录脚本正在运行，但是当我尝试登录并取消选中“记住我”时，它会登录，但没有设置所需的 cookie，但是，如果我选中记住框，它会登录并设置饼干。所以问题是，是什么导致它发生？我的 PHP 代码：

```
<?php
    /* Mysql data */
    $MysqlUsername = "root";
    $MysqlPassword = "";
    $MysqlHostname = "localhost";
    $MysqlDatabase = "teamgamersnet";
    $Salt = "TGN2012";
    $Username = $_POST['Username'];
    $Password = $_POST['Password'];
    $Remember = $_POST['Remember'];
    $Cookie = "TGN";
    $IP       = $_SERVER['REMOTE_ADDR'];
    if (empty($Username) || empty($Password)) { die("Please fill in all the fields"); }

    $hash = hash('sha256',strtolower($Username).$Password.$Salt);

    $Sql = new mysqli($MysqlHostname, $MysqlUsername, $MysqlPassword, $MysqlDatabase);
    if ($Sql->connect_error){ echo $Sql->connect_error; }
    $sUser = $Sql->real_escape_string($Username);
    $sPass = $Sql->real_escape_string($Password);
    $xPass = $Sql->real_escape_string($hash);

    $CheckUser = $Sql->query("SELECT * FROM `users` WHERE `Username` = '".$sUser."'");;
    if ($CheckUser->num_rows == 0) { header("Location: /?p=Login&wrongusr=true"); die(); }
    $xCheckUser = $CheckUser->fetch_array(MYSQLI_ASSOC);
    if ($xCheckUser['Activated'] == "false") { header("Location: /?p=Login&activate=true"); die(); }
    if(strtolower($Username) == strtolower($xCheckUser['Username'])) {
        if($hash == $xCheckUser['Password']) { // Check if password is correct
        if(isset($Remember)){ // Set a looong cooke to remember
                setcookie ($Cookie."User", htmlspecialchars($Username), time() + 99999999);
                setcookie ($Cookie."Pass", $hash, time() + 99999999);
                        header("Location: /?login=true");

        }
        else
        { // Set a standard cookie
                setcookie ($Cookie."User", htmlspecialchars($Username), time() + 3600);
                setcookie ($Cookie."Pass", $hash, time() + 3600);
                header("Location: /?login=true");
        }

    }

    else
    {
        header("Location: /?p=Login&wrongpwd=true"); // Send them to home page 
    }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:30:06.893

您的问题的答案不是由于 PHP 本身，而是（我认为）取决于您的网络服务器。关于 cookie 及其设置方式的一些信息： - 它们基于时间戳 - 更重要的是，服务器设置的时间戳！- 它们将根据所述时间戳自动过期。

我强烈建议仔细查看服务器发送的 HTTP 标头并检查到期日期，因为我无法在本地重现您的错误，但之前在生产中也有类似的情况。转到您的页面，取消选中记住我，然后检查服务器发送给您的标头。你会发现这样的东西： Set-Cookie:TGNPass= *some hash* ; expires=2012 年 11 月 17 日星期六 22:27:44 GMT

到期日期/时间是您所追求的。检查它是否符合您的预期（即从现在开始一小时），如果不是，您需要调整服务器的时区设置。这很容易使用[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:28:09.727

从[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)如果您的服务器时间与客户端时间不匹配，有时 time()+3600 会失败。我会尝试 time() + 7200 和 time() + 14400 并检查您的 cookie 以查看它们的实际设置。

# javascript - 在一个 javascript 对象的数组中

> ID：13434844
> 
> 赞同：-3
> 
> 时间：2012-11-17T21:14:06.743
> 
> 标签：javascript, arrays, object

我试图用一个对象设置一个 inArray 但它不起作用

```
var test = {aa:1, bb:0}
console.log($.inArray(1,test)) 
```

我总是-1

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:25:59.810

```
{} = object literal

[] = array object 
```

`$.inArray`旨在与数组一起使用。正如您已经发现的那样，它不能与对象正常工作（无论情况如何，它都会返回 -1）。说到对象，你用来创建对象字面量的语法是不正确的，它不是写成，`{ a = b }`而是写成`{ a : b }`. 这是一个例子：

```
var test = { aa: 1, bb: 0 }; 
```

我还看到您正在尝试查找对象的属性是否具有特定*值*，而不是对象完全具有该属性。如果是后一种情况，我们将使用`in`关键字或`.hasOwnProperty`函数。但是我们需要为您的案例制作自己的功能。尝试这个：

```
var inObject = function( obj, val ) {

    for ( var i in obj ) {

        if ( obj.hasOwnProperty(i) ) {

            if ( obj[i] === val ) return true;

        }

    }

    return false;

}; 
```

我们将像这样使用它：

```
>>> var test = { aa: 1, bb: 0 };

>>> inObject( test, 1 );
    true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:17:18.693

在您的代码中，您正在做其他事情。实际上，您正在尝试使用对象文字创建一个对象，该对象具有属性`aa`和`bb`. 键是`aa`和`bb`不是`0`, `1`。你可以试试这个：

```
var test = { aa:1, bb:0 };
console.log('aa' in test); //true 
```

如果你希望你的钥匙是`0`，`1`你可以尝试：

```
var test = { 1: 'aa', 0: 'bb' };
console.log(1 in test);  //true 
```

您还可以：

```
var test = { 1: 'aa', 0: 'bb' };
console.log(test['1']);  //"aa" 
```

如果要检查对象是否包含值，只需：

```
function containsValue(obj, key) {
   for (var prop in obj) {
       if (obj[prop] === key) {
           return true;
       }
   }
   return false;
}
var test = { aa:1, bb:0 };
console.log(containsValue(test, 1)); //true 
```

# python-2.7 - 如何在 Python/Pygame 中创建基本的神经网络？

> ID：13434854
> 
> 赞同：3
> 
> 时间：2012-11-17T21:15:58.883
> 
> 标签：python-2.7, neural-network, pygame, genetic-algorithm

我试图了解如何在 Python/Pygame 中创建一个基本的、简单的神经网络。我已经阅读[了本](http://www.ai-junkie.com/ann/evolved/nnt1.html)教程，我的目标是创建一个类似于“AI junkie”中描述的程序的程序。尽管本教程非常简单。我仍然没有完全理解，我不确定神经元的输出与坦克运动之间的联系。我在哪里可以找到用 pygame/python 编写的此类程序的简单基本代码，以尝试提高我对算法实现的理解？

感谢你在期待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:01:06.310

[在这篇](https://stackoverflow.com/questions/2276933/good-open-source-neural-network-python-library/3143318#3143318)文章中查看@Nathan 的 Python 代码。它非常干净，也可以作为起点。

如果您想要逻辑激活：

```
def logistic(x):
    return 1/(1+math.exp(-x))

# derivative of logistic
def dlogistic(y):
    return y*(1-y) 
```

默认激活函数`tanh`在原始代码中。

构建网络并开始训练非常简单：

```
# create a network with 5 inputs, 20 hiddens, and one output nodes
n = NN(5, 20, 1) 
```

# java - 验证用户是否输入了有效的数据类型

> ID：13434856
> 
> 赞同：0
> 
> 时间：2012-11-17T21:16:38.347
> 
> 标签：java

我想检查用户通过终端输入的数据是否是程序所需的正确类型。如果不是，代码应该循环，以便在继续下一步之前再次询问数据。

例子：

终端中的消息如下：

> 输入号码：

并且用户输入一个字符串，例如

> 是的

如何循环程序并再次询问数字，直到用户输入数字类型`double`？

到目前为止的代码是：

```
System.out.println("Enter number:");
double number = scanner.nextDouble(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:29:13.840

当您使用`Scanner`时，您可以使用`Scanner.hasDouble()`. 为了确保你得到一个有效的双精度，一些循环机制是必要*的：*

```
boolean numberFound = false;
while (!numberFound) {
   if (input.hasNextDouble()) {
    number = input.nextDouble();
    numberFound = true;
   } else {
    System.out.println("Invalid double " + input.next());
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:21:25.313

```
double number;

try
{
   number = scanner.nextDouble();
   number = parseDouble(inputString);
}
catch(NumberFormatException nfe)
{
   System.out.println("Please enter a valid double!");
   number = scanner.nextDouble();
   number = parseDouble(inputString);
   // if the input is not valid again, you need a loop, rethink.
} 
```

# javascript - $('form#'+id) 在下面的js代码中代表什么？

> ID：13434858
> 
> 赞同：0
> 
> 时间：2012-11-17T21:16:55.143
> 
> 标签：javascript

在下面的代码中，有这样的javascript函数`sendPushNotification(id)`，其中有这样的行`var data = $('form#'+id).serialize()`，是什么`$('form#'+id)`意思？下面没有 ID 为“form#”+id 的表单...

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){

            });
            function sendPushNotification(id){
                var data = $('form#'+id).serialize();
                $('form#'+id).unbind('submit');
                $.ajax({
                    url: "send_message.php",
                    type: 'GET',
                    data: data,
                    beforeSend: function() {

                    },
                    success: function(data, textStatus, xhr) {
                          $('.txt_message').val("");
                    },
                    error: function(xhr, textStatus, errorThrown) {

                    }
                });
                return false;
            }
        </script>

    </head>
    <body>
        <?php
        include_once 'db_functions.php';
        $db = new DB_Functions();
        $users = $db->getAllUsers();
        if ($users != false)
            $no_of_users = mysql_num_rows($users);
        else
            $no_of_users = 0;
        ?>
        <div class="container">
            <h1>No of Devices Registered: <?php echo $no_of_users; ?></h1>
            <hr/>
            <ul class="devices">
                <?php
                if ($no_of_users > 0) {
                    ?>
                    <?php
                    while ($row = mysql_fetch_array($users)) {
                        ?>
                        <li>
                            <form id="<?php echo $row["id"] ?>" name="" method="post" onsubmit="return sendPushNotification('<?php echo $row["id"] ?>')">
                                <label>Name: </label> <span><?php echo $row["name"] ?></span>
                                <div class="clear"></div>
                                <label>Email:</label> <span><?php echo $row["email"] ?></span>
                                <div class="clear"></div>
                                <div class="send_container">
                                    <textarea rows="3" name="message" cols="25" class="txt_message" placeholder="Type message here"></textarea>
                                    <input type="hidden" name="regId" value="<?php echo $row["gcm_regid"] ?>"/>
                                    <input type="submit" class="send_btn" value="Send" onclick=""/>
                                </div>
                            </form>
                        </li>
                    <?php }
                } else { ?>
                    <li>
                        No Users Registered Yet!
                    </li>
                <?php } ?>
            </ul>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:18:14.060

它选择一个具有变量 值的`form`元素。假设它是有效的，因为没有重复的 ID 并且永远不会是不是 a 的东西，它也可以写成 simple 。`id``id``id``id``form``$('#' + id)`

# c++ - 反卷积 C++

> ID：13434859
> 
> 赞同：3
> 
> 时间：2012-11-17T21:16:58.450
> 
> 标签：c++, visual-studio-2010, visual-c++, math, complex-numbers

[我从http://rosettacode.org/wiki/Deconvolution/1D#C](http://rosettacode.org/wiki/Deconvolution/1D#C)得到了这个一维反卷积的示例代码，它似乎不能正常工作。尝试构建此项目时，我首先收到此错误“_fft”：非法使用“void”类型。如果有帮助，这段代码最初是为 C 设计的，我不得不做一些改变，比如将 include 从 complex.h 更改为 complex，以及使用命名空间 std。谢谢您的帮助

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <complex>
using namespace std;

double PI;
complex<double> cplx;

void _fft(cplx buf[], cplx out[], int n, int step)
 {
if (step < n) {
    _fft(out, buf, n, step * 2);
    _fft(out + step, buf + step, n, step * 2);

    for (int i = 0; i < n; i += 2 * step) {
        cplx t = cexp(-I * PI * i / n) * out[i + step];
        buf[i / 2]     = out[i] + t;
        buf[(i + n)/2] = out[i] - t;
    }
}
}

void fft(cplx buf[], int n)
{
cplx out[n];
for (int i = 0; i < n; i++) out[i] = buf[i];
_fft(buf, out, n, 1);
}

cplx *pad_two(double g[], int len, int *ns)
{
int n = 1;
if (*ns) n = *ns;
else while (n < len) n *= 2;

cplx *buf = calloc(sizeof(cplx), n);
for (int i = 0; i < len; i++) buf[i] = g[i];
*ns = n;
return buf;
}

void deconv(double g[], int lg, double f[], int lf, double out[]) {
int ns = 0;
cplx *g2 = pad_two(g, lg, &ns);
cplx *f2 = pad_two(f, lf, &ns);

fft(g2, ns);
fft(f2, ns);

cplx h[ns];
for (int i = 0; i < ns; i++) h[i] = g2[i] / f2[i];
fft(h, ns);

for (int i = 0; i >= lf - lg; i--)
    out[-i] = h[(i + ns) % ns]/32;
free(g2);
free(f2);
}

int main()
{
PI = atan2(1,1) * 4;
double g[] = {24,75,71,-34,3,22,-45,23,245,25,52,25,-67,-96,96,31,55,36,29,-43,-7};
double f[] = { -3,-6,-1,8,-6,3,-1,-9,-9,3,-2,5,2,-2,-7,-1 };
double h[] = { -8,-9,-3,-1,-6,7 };

int lg = sizeof(g)/sizeof(double);
int lf = sizeof(f)/sizeof(double);
int lh = sizeof(h)/sizeof(double);

double h2[lh];
double f2[lf];

printf("f[] data is : ");
for (int i = 0; i < lf; i++) printf(" %g", f[i]);
printf("\n");

printf("deconv(g, h): ");
deconv(g, lg, h, lh, f2);
for (int i = 0; i < lf; i++) printf(" %g", f2[i]);
printf("\n");

printf("h[] data is : ");
for (int i = 0; i < lh; i++) printf(" %g", h[i]);
printf("\n");

printf("deconv(g, f): ");
deconv(g, lg, f, lf, h2);
for (int i = 0; i < lh; i++) printf(" %g", h2[i]);
printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:21:27.123

如果不运行它，则 cplx 被用作一个类，而它实际上是一个变量。你能改变这一行：

```
complex<double> cplx; 
```

像这样

```
typedef complex<double> cplx; 
```

# java - Apache Mahout K-means 集群实现

> ID：13434861
> 
> 赞同：0
> 
> 时间：2012-11-17T21:17:01.023
> 
> 标签：java, apache, mahout, k-means

我试过 KmeansDriver 的 run() 函数，但我没有给出真实的参数。老实说，我不明白这个功能的实现。是否有一个关于采用矩阵、数据集或文件并提供聚类数据的明确示例？

我正在尝试使用 K-means 算法对稀疏矩阵进行聚类。我将使用 Apache mahout，但我没有找到任何关于如何使用 Java 实现它的示例。有没有关于它的教程或功能javadoc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:32:58.450

您可以查看“Mahout in Action”一书中的示例。例如，在第 7 章中有一个[最小的示例](https://github.com/tdunning/MiA/blob/master/src/main/java/mia/clustering/ch07/SimpleKMeansClustering.java)- Mahout 0.5。或者您可以查看[Mahout 0.7 的相同示例](https://github.com/tdunning/MiA/blob/mahout-0.7/src/main/java/mia/clustering/ch07/SimpleKMeansClustering.java)。

# java - XUGGLE 错误：线程“主”java.lang.NoClassDefFoundError 中的异常：org/slf4j/LoggerFactory

> ID：13434862
> 
> 赞同：10
> 
> 时间：2012-11-17T21:17:01.217
> 
> 标签：java, compiler-errors, slf4j, xuggle, xuggler

我正在尝试执行以下代码：

```
import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.IMediaWriter;
import com.xuggle.mediatool.ToolFactory;
public class vidcon {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        IMediaReader reader = ToolFactory.makeReader("test.m4v");
        IMediaWriter writer = ToolFactory.makeWriter("out.flv");

        reader.addListener(writer);
        while(reader.readPacket() == null)
            ;
    }
} 
```

但它给了我这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at com.xuggle.ferry.JNILibrary.<clinit>(JNILibrary.java:42)
    at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:14)
    at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25)
    at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19)
    at com.xuggle.xuggler.IContainer.<clinit>(IContainer.java:1622)
    at com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137)
    at com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77)
    at vidcon.main(vidcon.java:11)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 8 more 
```

我已将 SLF4J 添加到我引用的库中，但不知道为什么这不起作用。

在WIN 7上运行，在eclipse和netbeans中试过

任何想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-20T14:37:17.207

下载[SLF4J](http://slf4j.org/download.html)并将 slf4j-api-1.7.2.jar 文件放到你的类路径中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-23T11:17:44.980

以下罐子组合对我有用：

log4j-1.2.16.jar
slf4j-api-1.7.6.jar
slf4j-simple-1.7.6.jar
xuggle-xuggler-5.4.jar

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T12:39:49.900

原因 可能是依赖 jar 不可用或版本冲突。

以下罐子组合对我来说效果很好：

xuggle-xuggler-5.4.jar
slf4j-api-1.6.4.jar
logback-core-1.0.0.jar
logback-classic-1.0.0.jar

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-20T04:56:20.317

您可能会添加 apache-log4j-2.7-bin 罐子。只需删除所有这些罐子并仅保留

```
log4j-1.2.16.jar
slf4j-api-1.7.6.jar
slf4j-simple-1.7.6.jar
xuggle-xuggler-5.4.jar 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-24T09:59:06.527

下载 SLF4J 并将 slf4j-api-1.7.25.jar、slf4j-simple-1.7.25.jar 文件放入应用程序类路径。

这将有助于解决此异常以及以下异常 SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-10T05:27:18.993

检查您的配置文件（.xml 文件）。其中的第一行必须以声明 XML 版本和编码开始。

否则，除非您包含所有必需的 .jar 文件，否则您将得到相同的错误 util。

# python - 如果依赖于在 Django 中以相同形式选择其他字段，如何设置所需字段？

> ID：13434864
> 
> 赞同：0
> 
> 时间：2012-11-17T21:17:08.287
> 
> 标签：python, django, django-forms

我正在寻找这项任务的最佳解决方案。我在 forms.py 中有简单的表单类：

```
class CategoriesForm(Form):
    RADIO_CHOICES = (
        ('c1', _("C1")),
        ('c2', _("C2")),
        ('c3', _("C3")),
        ('c4', _("C4")),
    )
    category = forms.ChoiceField(widget=forms.RadioSelect(),choices=RADIO_CHOICES)

    subcategory_c1 = forms.ModelChoiceField(queryset=Category.objects.filter(type="c1", public=True), empty_label="", label = "hhh")
    subcategory_c2 = forms.ModelChoiceField(queryset=Category.objects.filter(type="c2", public=True), empty_label="", label = "rrr")
    subcategory_c3 = forms.ModelChoiceField(queryset=Category.objects.filter(type="c3", public=True), empty_label="", label = "aaa")
    subcategory_c4 = forms.ModelChoiceField(queryset=Category.objects.filter(type="c4", public=True), empty_label="", label = "eeee")

    def __init__(self, *args, **kwargs):
        super(CategoriesForm, self).__init__(*args, **kwargs)

        self.fields["subcategory_c1"].required = False
        self.fields["subcategory_c2"].required = False
        self.fields["subcategory_c3"].required = False
        self.fields["subcategory_c4"].required = False 
```

这只是一些草稿。

表单的行为应该如下：当我从单选字段中选择 C1 类别时，应该需要 subcategory_c1。当我选择 C2 类别时，subcategory_c2 应该是必需的，而选择其他子类别字段（C1、C3、C4）应该是可选的。我希望我的解释清楚。

模板中的表格草稿：

```
field category (RadioSelect: C1, C2, C3, C4) <<required>>
field subcategory_c1 (Select: ---, a,b,c,d) <<required only if user checked C1>>
field subcategory_c2 (Select: ---, a,b,c,d) <<required only if user checked C2>>
field subcategory_c3 (Select: ---, a,b,c,d) <<required only if user checked C3>>
field subcategory_c4 (Select: ---, a,b,c,d) <<required only if user checked C4>> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:40:41.737

如果添加了新选择，您的解决方案需要做很多事情。

更简洁的方法是创建`subcategory`一个包含所有可能选择的字段，并在客户端使用 JavaScript 过滤它们。作为没有 js 的用户的后备方案，应该有所有可能的分类良好的选择。

这个解决方案很有意义，因为您需要具有动态变化选择的字段 - 看起来像是为客户端魔术工作。:)

# jquery - 为什么我的 DIV 覆盖不起作用？

> ID：13434871
> 
> 赞同：1
> 
> 时间：2012-11-17T21:18:08.457
> 
> 标签：jquery, html, css

在我的网站[http://www.robertbradley.co.uk/gallery/portrait-photography/](http://www.robertbradley.co.uk/gallery/portrait-photography/)上有一个小的预加载图像加载 - 尽管它的 CSS 属性是绝对的 - 它接缝被放在下一个加载的 div 后面

我使用的代码是

**分区**

```
<div id='preloader2'>
<img src="<?php echo THEMEROOTURL; ?>/img/preloader.gif">
</div> 
```

**CSS**

```
#preloader2 {
    position:absolute; 
    left:50%; 
    top:50%; 
    margin:-15px 0 0 -15px;
    width:30px;
    height:30px;
    opacity: 0.6; 
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=60);
} 
```

有人可以帮帮我吗？

**更新：**听起来很奇怪，但我需要我的预加载器保持在前面，以便稍后在单击图像时隐藏/取消隐藏它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:34:40.960

将`z-index`绝对定位元素的（在 CSS 中）设置为比其他元素更大的数字。

# ruby - Rails 将整数评估为布尔值

> ID：13434873
> 
> 赞同：2
> 
> 时间：2012-11-17T21:18:41.563
> 
> 标签：ruby, ruby-on-rails-3

我有一个模型，它将用户设置存储为 0 或 1（用于真/假）。在我的代码中，我必须这样做：

```
if @user.settings.show_menu == 1
  # do this
end 
```

我怎样才能省略`== 1`or `== 0`？我试过了：

```
if @user.settings.show_menu
  # do this
end 
```

但它的评估结果不正确，与使用时相同`!@user.settings.show_menu`

这是漫长的一天，请指导我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:37:06.577

在 Rails 中有一个`boolean`与数据库一起使用的列，它存储为数字并进行相应的转换。通常，这在数据库中被编码为`SMALLINT`. 如果您有常客`INT`，您可以随时迁移以转换它们。

迁移示例：

```
change_table :table_name do |t|
   t.change(:boolean_column, :boolean)
end 
```

`?`在您的应用程序中，标准做法是使用其方法版本来引用布尔标志，例如：

```
if (@user.settings.show_menu?)
  # ...
end 
```

如果没有定义这个方法，你会得到一个异常，可以引导你发现问题。这与让它始终评估为真相比是有利的。

# c - 带链表的段错误

> ID：13434874
> 
> 赞同：2
> 
> 时间：2012-11-17T21:18:58.613
> 
> 标签：c, linked-list, segmentation-fault

我在 C 中使用链表时遇到问题，我只在 C++ 中完成了诸如此类的数据结构。

Gdb 给了我一个

`Program received signal SIGSEGV, Segmentation fault. 0x0804a23c in addArg (base=0x1, argument=0x804e410 "is") at myshell.c:42 42 while ( (curr != NULL) && (curr->n != NULL) )`

我熟悉与内存有关的分段错误，但是我认为我已经正确分配了内存。我究竟做错了什么？

addArg 被称为`addArg(currentCmd->args, lexeme);`并且 currentCmd 是指向节点结构的指针

```
struct lnode {
 char *x;
 struct lnode *n;
};

struct node
  {
    char *command;
    struct lnode *args;
    int input;
    int output;
    int error;
    char *in;
    char *out;
    char *err;
    struct node *next;
    struct node *prev;
  };

void addArg(struct lnode *base, char *argument)
 {
 struct lnode *curr = base;

//this is line 42
  while ( (curr != NULL) && (curr->n != NULL) )
    curr = curr->n;

   curr -> n = malloc(sizeof(struct lnode));
   curr = curr->n;
   curr->x = strdup(argument);
   curr->n = NULL;
 }

struct node* createNode(char *command_, int input_, int output_, int error_, char *in_, char *out_, char *err_, struct node *prev_)
  {
  struct node *n;
  n = malloc(sizeof (struct node));
  n->command = strdup(command_);
  n->prev = prev_;
  n->next = NULL;
  n->input = input_;
  n->output = output_;
  n->error = error_;
  n->in = in_;
  n->out = out_;
  n->err = err_;
  n->args=malloc(sizeof(struct lnode));

 return n;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:11:12.600

我通过对内存管理进行必要的更改并`lnode *args` 解决了这个问题。`lnode args`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:21:39.540

看起来`currentCmd->args`是一个无效的指针。也许是指向`free()`d 内存的指针。或未初始化的指针，或指向超出范围的局部变量的指针（尽管后两者在这里似乎不是这种情况）。

或者，您可能不小心在程序的其他地方覆盖了越界内存。指针问题并不总是在失败点上。有时它们在较早的代码中，甚至是不相关的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T17:37:55.487

我从您的 gdb 输出中可以看到，问题`while ( (curr != NULL) && (curr->n != NULL) )`是如果 curr == NULL 您仍在尝试访问 curr->n 进行比较，因此您应该将该条件更改为仅比较 curr，并仅处理 curr->n如果 curr 不为空，如果 curr->n == NULL，可能会立即打破 cicle。

# html - 仅在 Chrome 中工作的字体 css

> ID：13434875
> 
> 赞同：0
> 
> 时间：2012-11-17T21:19:06.040
> 
> 标签：html, css, font-face

嗨，我知道这个问题有很多例子，但还没有一个可以为我提供解决方案。这是我的代码：

```
@font-face {
 font-family: 'lucida_cal';
 src: url('http://www.mydomain.co.uk/Content/js/lcallig-webfont.eot');
 src: url('http://www.mydomain.co.uk/Content/js/lcallig-webfont.eot?#iefix') format('embedded-opentype'), 
        url('http://www.mydomain.co.uk/Content/js/lcallig-webfont.woff') format('woff'), 
        url('http://www.mydomain.co.uk/Content/js/lcallig-webfont.ttf') format('truetype'), 
        url('http://www.mydomain.co.uk/Content/js/lcallig-webfont.svg#lucida_calligraphyitalic') format('svg');

 font-weight: normal;
 font-style: normal;
}
h1 {
    font-family:lucida_cal, Geneva, sans-serif;
    font-weight:bold;
    font-size:18px;
} 
```

我在css文件所在的根目录中有所有版本。我也试过了`url('lcallig-webfont.woff')`。它在 Chrome 中运行，但在其他浏览器中没有。

# c - 具有包含动态分配数组的自定义数据类型的 MPI_reduce()：分段错误

> ID：13434879
> 
> 赞同：3
> 
> 时间：2012-11-17T21:19:40.013
> 
> 标签：c, parallel-processing, mpi

一旦我使用包含动态分配数组的自定义 MPI 数据类型，我就不明白为什么 MPI_Reduce() 会出现分段错误。有人知道吗 ？以下代码在 MPI_Reduce() 内使用 2 个处理器崩溃。但是，如果我删除成员 double *d int MyType 并相应地更改运算符和 MPI 类型例程，则可以毫无问题地完成缩减。

使用动态分配的数组是否存在问题，或者我所做的事情是否存在根本性错误：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

typedef struct mytype_s
{
    int c[2];
    double a;
    double b;
    double *d;
} MyType;

void CreateMyTypeMPI(MyType *mt, MPI_Datatype *MyTypeMPI)
{
    int block_lengths[4];                        // # of elt. in each block
    MPI_Aint displacements[4];                   // displac.
    MPI_Datatype typelist[4];                    // list of types
    MPI_Aint start_address, address;            // use for calculating displac.
    MPI_Datatype myType;

    block_lengths[0] = 2;
    block_lengths[1] = 1;
    block_lengths[2] = 1;
    block_lengths[3] = 10;

    typelist[0] = MPI_INT;
    typelist[1] = MPI_DOUBLE;
    typelist[2] = MPI_DOUBLE;
    typelist[3] = MPI_DOUBLE;

    displacements[0] = 0;

    MPI_Address(&mt->c, &start_address);
    MPI_Address(&mt->a, &address);
    displacements[1] = address - start_address;

    MPI_Address(&mt->b,&address);
    displacements[2] = address-start_address;

    MPI_Address(&mt->d, &address);
    displacements[3] = address-start_address;

    MPI_Type_struct(4,block_lengths, displacements,typelist,MyTypeMPI);
    MPI_Type_commit(MyTypeMPI);
}

void MyTypeOp(MyType *in, MyType *out, int *len, MPI_Datatype *typeptr)
{
    int i;
    int j;

    for (i=0; i < *len; i++)
    {
        out[i].a += in[i].a;
        out[i].b += in[i].b;
        out[i].c[0] += in[i].c[0];
        out[i].c[1] += in[i].c[1];

        for (j=0; j<10; j++)
        {
            out[i].d[j] += in[i].d[j];
        }
    }
}

int main(int argc, char **argv)
{
    MyType mt;
    MyType mt2;
    MPI_Datatype MyTypeMPI;
    MPI_Op MyOp;
    int rank;
    int i;

    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);

    mt.a = 2;
    mt.b = 4;
    mt.c[0] = 6;
    mt.c[1] = 8;
    mt.d = calloc(10,sizeof *mt.d);
    for (i=0; i<10; i++) mt.d[i] = 2.1;

    mt2.a = 0;
    mt2.b = 0;
    mt2.c[0] = mt2.c[1] = 0;
    mt2.d = calloc(10,sizeof *mt2.d);

    CreateMyTypeMPI(&mt, &MyTypeMPI);
    MPI_Op_create((MPI_User_function *) MyTypeOp,1,&MyOp);

    if(rank==0) printf("type and operator are created now\n");

    MPI_Reduce(&mt,&mt2,1,MyTypeMPI,MyOp,0,MPI_COMM_WORLD);

    if(rank==0)
    {

        for (i=0; i<10; i++) printf("%f ",mt2.d[i]);
        printf("\n");
    }

    free(mt.d);
    free(mt2.d);
    MPI_Finalize();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:48:15.913

让我们看看你的结构：

```
typedef struct mytype_s
{
    int c[2];
    double a;
    double b;
    double *d;
} MyType;

...

MyType mt;
mt.d = calloc(10,sizeof *mt.d); 
```

并且您将此结构描述为 MPI 类型：

```
displacements[0] = 0;

MPI_Address(&mt->c, &start_address);
MPI_Address(&mt->a, &address);
displacements[1] = address - start_address;

MPI_Address(&mt->b,&address);
displacements[2] = address-start_address;

MPI_Address(&mt->d, &address);
displacements[3] = address-start_address;

MPI_Type_struct(4,block_lengths, displacements,typelist,MyTypeMPI); 
```

问题是，这个 MPI 结构只会应用于您在此处定义中使用的结构的一个实例*。*您完全无法控制`calloc()`决定从哪里获取内存；它可以在虚拟内存中的任何位置。您创建和实例化的下一种类型，您的`d`数组的位移将完全不同；即使使用相同的结构，如果您使用 of 更改数组的大小`realloc()`current `mt`，它最终可能会产生不同的位移。

因此，当您使用其中一种类型发送、接收、减少或任何其他内容时，MPI 库将尽职尽责地进行可能毫无意义的置换，并尝试从那里读取或写入，这可能会导致段错误。

请注意，这不是 MPI 的事情。在使用任何低级通信库，或者试图从磁盘写出/读入时，你会遇到同样的问题。

您的选择包括手动将数组“编组”为消息，无论是否带有其他字段；或为 d 所在的位置添加一些可预测性，例如将其定义为某个已定义的最大大小的数组。

# java - SQLite 查询 - 找到特定项目后停止从数据库返回行

> ID：13434880
> 
> 赞同：1
> 
> 时间：2012-11-17T21:19:54.053
> 
> 标签：java, android, sqlite, cursor

我正在创建一个 Android 应用程序来帮助演员排练剧本。用户可以从脚本中选择一个角色来排练。然后脚本将显示给用户，直到他选择的角色的第一行。当用户决定继续时，他们的当前行将出现，以及脚本的其余部分直到他们的下一行。用户可以再次继续，依此类推。

我将整个剧本存储在 SQLite 数据库中，并通过在数据库上执行查询来填充自定义 ListView。

我的问题是我们如何在数据库上执行查询，但是一旦我们找到某个项目（例如角色的名字）就停止返回项目？我将结果存储到 Cursor 中，然后使用以下方法填充 ListView：

```
 private void fillData() {

    mFrom = new String[] { PlayDbAdapter.KEY_CHARACTER,
            PlayDbAdapter.KEY_LINE };
    mTo = new int[] { R.id.textCharacter, R.id.textLine };

    // Now create an array adapter and set it to display using our row
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.play_list_layout, mCursor, mFrom, mTo);

    setListAdapter(adapter);
} 
```

如果您需要更多信息或代码，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:36:54.203

在光标中返回脚本块然后在光标中搜索演员的第一行会更有效。

另一种方法是为字符返回行“上下文”。让数据库将索引存储到行中。返回仅包含字符行的 Cursor，然后执行第二个查询，返回字符行之前和之后的 10 行。

# javascript - 在函数“load”之外使用 XDomainRequest 的响应

> ID：13434881
> 
> 赞同：0
> 
> 时间：2012-11-17T21:19:58.673
> 
> 标签：javascript, xdomainrequest

我正在以这种方式使用 XDomainRequest 对 IE 进行跨域请求：

```
<div id="result"></div>

<script type="text/javascript">
var urlToOpen;
var openxUrl = "http://DOMAIN.com/www/delivery/apu.php";
if ($j.browser.msie && window.XDomainRequest) {
        // Use Microsoft XDR
        var xdr = new XDomainRequest();
        xdr.open("get", openxUrl);
        xdr.onload = function() {
            urlToOpen  = xdr.responseText;
        };

        xdr.send();
    }

$j('#result').html(urlToOpen)
</script> 
```

代码返回正确的值，但我想在其他函数中使用Ajax返回的值（不仅在xdr.onload的函数内部），所以我需要xdr.responseText返回的内容可以声明为全局或类似的东西。

示例：最后一行 $j('#result').html(urlToOpen) 假装分配了“urlToOpen”的值，但这不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:26:07.610

这里的简单答案是使用`var`从 xdr 中删除，然后它成为全局对象的属性。然后，您将能够在任何地方访问它。

我也会*命名*它，这样它就不会冲突，所以将它命名为`myApp_xdr`.

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:48:47.223

解决方案：由于“xdr.onload”以异步方式运行，问题是我尝试在代码 $j('#result').html(urlToOpen) 中使用变量“urlToOpen”，而该变量为空，因为“xdr.onload”还没有完成加载，所以我将代码 $j('#result').html(urlToOpen) 放在“xdr.onload”函数中。这不是最好的，但有效。

# ruby-on-rails - 路线和设计错误：保存没有 current_password 的用户参数

> ID：13434882
> 
> 赞同：0
> 
> 时间：2012-11-17T21:20:00.467
> 
> 标签：ruby-on-rails, devise

我的设计问题。我想在没有 current_password 的情况下保存用户的私人数据。我想删除一些路线，只留下必要的。

路线.rb

```
 devise_for :users, :controllers => { :registrations => "registrations" }, :skip => [:registrations]
    as :user do
      post "/users" => "devise/registrations#create", :as => :user_registration
      get "/users" => "devise/registrations#new", :as => :new_user_registration
      get "/users/edit" => "devise/registrations#edit", :as => :edit_user_registration
      put "/users" => "devise/registrations#update"
    end 
```

我观看了 railscasts 并在我的应用程序中添加了注册控制器

注册控制器.rb

```
class RegistrationsController < Devise::RegistrationsController
  def update
    @user = User.find(current_user.id)
   # email_changed = @user.email != params[:user][:email]
    password_changed = !params[:user][:password].empty?

    successfully_updated = if password_changed
      @user.update_with_password(params[:user])
    else
      @user.update_without_password(params[:user])
    end

    if successfully_updated
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to root_path
    else
      render "edit"
    end
  end
end 
```

我的观点 edit.html.erb

```
<h2><%= t('users.edit_registration_data') %></h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <ul class="nav nav-tabs">
      <li class="active" ><a href="#profile" data-toggle="tab"><%= t('tabs.private_info') %></a></li>
      <li><a href="#password" data-toggle="tab"><%= t('tabs.change_password') %></a></li>
  </ul>
  <div class="tab-content">
      <div class="tab-pane active" id="profile">
        <div><%= f.label :name, t('form.name') %><br />
        <%= f.text_field :name %></div>
        <div><%= f.label :phone_number, t('form.phone_number') %> <%= t('form.phone_notice' )%><br />
        <%= f.text_field :phone_number, :maxlength => 10 %></div>
        <div><%= f.label :area_id, t('form.area') %><br />
        <%= f.text_field :area_id %></div>
        <div><%= f.label :city_id, t('form.city') %><br />
        <%= f.text_field :city_id %></div>
        <div><%= f.label :email %><br />
        <%= f.email_field :email %></div>
      </div>
      <div class="tab-pane" id="password">
        <div><%= f.label :password, t('users.form.new_password') %> <i>(<%= t('users.notifications.leave_password') %>)</i><br />
        <%= f.password_field :password, :autocomplete => "off" %></div>

        <div><%= f.label :password_confirmation, t('users.form.new_password_confirmation') %><br />
        <%= f.password_field :password_confirmation %></div>

        <div><%= f.label :current_password, t('users.form.current_password') %> <i>(<%= t('users.notifications.need_current_password') %>)</i><br />
        <%= f.password_field :current_password %></div>
      </div>
  </div>

 <br><br><br>  

  <div><%= f.submit t('users.update') %></div>
<% end %>

<%= link_to t('users.back'), :back %> 
```

但是当我更新任何数据时，除了密码，应用程序仍然要求输入当前密码。

控制器：设计/注册操作：更新 1 错误禁止保存此用户：当前密码不能为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:30:26.030

```
 devise_for :users, :skip => [:registrations]
    as :user do
      post "/users" => "devise/registrations#create", :as => :user_registration
      get "/users" => "devise/registrations#new", :as => :new_user_registration
      get "/users/edit" => "devise/registrations#edit", :as => :edit_user_registration
      put "/users" => "registrations#update"
    end 
```

# php - 在php中重命名文件

> ID：13434883
> 
> 赞同：12
> 
> 时间：2012-11-17T21:20:03.773
> 
> 标签：php

我想从此代码重命名`picture`文件名（不带扩展名） 。`old.jpg`

我`picture`在父目录中有文件并且路径正确

```
$old="picture";
$new="old.jpg";
rename($old , $new); 
```

或此代码

```
$old="\picture";
$new="\old.jpg";
rename($old , $new);

$old="../picture";
$new="../old.jpg";
rename($old , $new);

$old="../picture";
$new="old.jpg";
rename($old , $new);

$old="./picture";
$new="./old.jpg";
rename($old , $new);

rename("picture", "old.jpg"); 
```

但我得到这个错误：

```
 Warning: rename(picture,old.jpg) [function.rename]: The system cannot find the file specified. (code: 2) in C:\xampp\htdocs\prj\change.php on line 21 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T21:27:32.553

您需要使用绝对路径或相对路径（在这种情况下可能会更好）。如果它在父目录中，请尝试以下代码：

```
old = '..' . DIRECTORY_SEPARATOR . 'picture';
$new = '..' . DIRECTORY_SEPARATOR . 'old.jpg';
rename($old , $new); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-19T01:49:59.187

相对路径基于正在执行的脚本（`$_SERVER['SCRIPT_FILENAME']`在 Web 服务器中运行时），该脚本并不总是发生文件操作的文件：

```
// index.php
include('includes/mylib.php');

// mylib.php
rename('picture', 'img506.jpg'); // looks for 'picture' in ../ 
```

查找相对路径涉及比较执行脚本和您希望操作的文件的绝对路径，例如：

```
/var/www/html/index.php
/var/www/images/picture 
```

在此示例中，相对路径为：`../images/picture`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T21:26:41.787

就像 Seth 和 Jack 提到的那样，出现错误是因为脚本找不到旧文件。你让它看起来在当前目录中，而不是它的父目录。

要解决此问题，请输入旧文件的完整路径，或尝试以下操作：

```
rename("../picture.jpg", "old.jpg"); 
```

`../`遍历单个目录，在本例中为父目录。在 Windows 中也可以使用`../`，无需使用反斜杠。

如果您在进行这些更改后仍然收到错误，那么您可能需要发布您的目录结构，以便我们都可以查看它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-04T09:07:58.407

可能您（即发出`rename()`命令时的脚本）不在您认为的目录中（和/或文件所在的位置）。要调试，首先显示目录中的文件列表：

```
 $d=@dir(".");// or experiment with other directories, e.g. "../files"
  while($e=$d->read()) { echo $e,"</br>"; } 
```

找到包含文件的目录后，您可以更改到该目录，然后在没有任何路径的情况下进行重命名：

```
 chdir("../files"); // for example
  // here you can print again the dir.contents for debugging as above
  rename( "picture", "img.jpg" ); // args are: $old, $new
  // here you can print again the dir.contents for debugging as above 
```

参考：

*   [https://www.w3schools.com/php/func_directory_chdir.asp](https://www.w3schools.com/php/func_directory_chdir.asp)
*   [https://www.w3schools.com/php/php_ref_filesystem.asp](https://www.w3schools.com/php/php_ref_filesystem.asp)

# scala - Guice 找不到合适的构造函数：@Inject class Patient(v1:C1) {}

> ID：13434884
> 
> 赞同：2
> 
> 时间：2012-11-17T21:20:11.680
> 
> 标签：scala, guice

如何让它发挥作用？
我知道简短的问题不受欢迎。但这次我没有什么要补充的。

更新 1：作为解决方法，我将构造函数设为辅助，但我不喜欢这样，因为它增加了很多负担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:22:53.730

```
class Patient @Inject() (v1:C1) {} 
```

刚刚在这里找到它：[http ://www.scala-lang.org/node/3388](http://www.scala-lang.org/node/3388)

# java - Swing 组件之间的新线

> ID：13434888
> 
> 赞同：4
> 
> 时间：2012-11-17T21:20:49.213
> 
> 标签：java, swing, layout-manager

我已经尝试多次搜索如何多次格式化 java swing 元素，但我似乎找不到任何东西。我曾尝试学习网格袋布局，但它太复杂了。有人可以告诉我如何用 Swing 分隔摆动组件吗？谢谢！

**编辑**

代码：

```
import javax.swing.*;
import java.awt.*;

public class Format_Swing_Elemnts {
 public static void main(String[] args) {
JLabel title = new JLabel("Bridge Settings:");
title.setFont(font);
JLabel l1 = new JLabel("Number of Bars: "); 
JLabel l2 = new JLabel("Deck Elevation: "); 
JLabel l3 = new JLabel("Height of arch: "); 
JLabel l4 = new JLabel("Height of Pier: "); 
JLabel l5 = new JLabel("Cabel Anchorage: ");    
JLabel l6 = new JLabel("Concrete Type: ");  
final JLabel lM1 = new JLabel("meters");
final JLabel lM2 = new JLabel("meters");
final JLabel lM3 = new JLabel("meters");
final JRadioButton p1RB1 = new JRadioButton("Standard Abutments");
final JRadioButton p1RB2 = new JRadioButton("Arch Abutments");
final JRadioButton p2RB1 = new JRadioButton("No Pier (one span)");
final JRadioButton p2RB2 = new JRadioButton("Pier (two spans)");
final JRadioButton p3RB1 = new JRadioButton("No Cable Anchorage");
final JRadioButton p3RB2 = new JRadioButton("One Cable Anchorage");
final JRadioButton p3RB3 = new JRadioButton("Two Cable Anchorage");
final JRadioButton p4RB1 = new JRadioButton("Meduim Strength Concrete");
final JRadioButton p4RB2 = new JRadioButton("High Strength Concrete");
ButtonGroup p1 = new ButtonGroup();
p1.add(p1RB1);
p1.add(p1RB2);
ButtonGroup p2 = new ButtonGroup();
p2.add(p2RB1);
p2.add(p2RB2);
ButtonGroup p3 = new ButtonGroup();
p3.add(p3RB1);
p3.add(p3RB2);
p3.add(p3RB3);
ButtonGroup p4 = new ButtonGroup();
p4.add(p4RB1);
p4.add(p4RB2);

final SpinnerModel model = new SpinnerNumberModel(0, 0, 1000, 1);
final JSpinner numberBars = new JSpinner(model);
final JSpinner deckElevation = new JSpinner(new SpinnerNumberModel(24, 0, 24, 4));
final JSpinner archHeight = new JSpinner(new SpinnerNumberModel(4, 4, 24, 4));
final JSpinner pierHeight = new JSpinner(new SpinnerNumberModel(0, 0, 24, 4));
JFormattedTextField tf1 =       ((JSpinner.DefaultEditor)deckElevation.getEditor()).getTextField();
tf1.setEditable(false);
JFormattedTextField tf2 =  ((JSpinner.DefaultEditor)archHeight.getEditor()).getTextField();
tf2.setEditable(false);
JFormattedTextField tf3 = ((JSpinner.DefaultEditor)pierHeight.getEditor()).getTextField();
tf3.setEditable(false);

JButton quit = new JButton("Quit");
JButton continueB = new JButton("Continue");

JPanel format2 = new JPanel();

format2.add(title);
//New line
format2.add(l1);
format2.add(numberBars);
//New line
format2.add(l2);
format2.add(deckElevation);
format2.add(lM1);
//New line
format2.add(p1RB1);
format2.add(p1RB2);
format2.add(l3);
format2.add(archHeight);
format2.add(lM2);
//New line
format2.add(p2RB1);
format2.add(p2RB2);
format2.add(l4);
format2.add(pierHeight);
format2.add(lM3);
//New line
format2.add(l5);
format2.add(p3RB1);
format2.add(p3RB2);
format2.add(p3RB3);
//New line
format2.add(l6);
format2.add(p4RB1);
format2.add(p4RB2);
//New line
format2.add(quit);
format2.add(continueB);

JFrame part2Window = new JFrame("Part 2 - Adjust your settings");
part2Window.add(format2);
part2Window.setSize(290, 365);
part2Window.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
part2Window.setVisible(true);
part2Window.setLocationRelativeTo(null);
part2Window.setResizable(false);
part2Window.setAlwaysOnTop(true);
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:25:06.587

`spacer`我用那个标签即兴创作了一点。我希望一些有经验的用户不会生气；）。但我希望这是你正在寻找的：

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JSpinner;
import javax.swing.SpinnerModel;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingUtilities;

import net.miginfocom.swing.MigLayout;

public class MyFormat extends JFrame {
    JPanel panel = new JPanel();

    JLabel spacer, bridgeSet, numOfBars, deckElev, meters, heightOfArch, heightOfPier,
    cabelAnch, concreteType;

    SpinnerModel model = new SpinnerNumberModel(0, 0, 1000, 1);
    JSpinner numberBars = new JSpinner(model);
    JSpinner deckElevation = new JSpinner(new SpinnerNumberModel(24, 0, 24, 4));
    JSpinner archHeight = new JSpinner(new SpinnerNumberModel(4, 4, 24, 4));
    JSpinner pierHeight = new JSpinner(new SpinnerNumberModel(0, 0, 24, 4));

    JRadioButton standAbut = new JRadioButton("Standard Abutments");
    JRadioButton archAbut = new JRadioButton("Arch Abutments");

    JRadioButton noPier = new JRadioButton("No Pier (one span)");
    JRadioButton pier = new JRadioButton("Pier (two spans)");

    JRadioButton noCabAnch = new JRadioButton("No Cable Anchorage");
    JRadioButton oneCabAnch = new JRadioButton("One Cable Anchorage");
    JRadioButton twoCabAnch = new JRadioButton("Two Cable Anchorage");

    JRadioButton medStrCon = new JRadioButton("Meduim Strength Concrete");
    JRadioButton highStrCon = new JRadioButton("High Strength Concrete");

    JButton continueBtn = new JButton("Continue");
    JButton quitBtn = new JButton("Quit");

    public MyFormat() {
        super("Adjust your settings");
        panel.setLayout(new MigLayout());
        panel.add(bridgeSet = new JLabel("Bridge settings:"), "wrap");
        panel.add(spacer = new JLabel(" "),"span, grow");
        panel.add(numberBars, "span, grow");
        panel.add(numOfBars = new JLabel("Number of bars:"));
        panel.add(numberBars, "span, grow");
        panel.add(deckElev = new JLabel("Deck elevation: "));
        panel.add(deckElevation);
        panel.add(meters = new JLabel("meters"), "wrap");
        panel.add(spacer = new JLabel(" "),"span, grow");
        panel.add(standAbut, "span, grow");
        panel.add(archAbut, "span, grow");
        panel.add(heightOfArch = new JLabel("Height of arch: "));
        panel.add(archHeight);
        panel.add(meters = new JLabel("meters"), "wrap");
        panel.add(spacer = new JLabel(" "),"span, grow");
        panel.add(noPier, "span, grow");
        panel.add(pier, "span, grow");
        panel.add(heightOfPier = new JLabel("Height of pier: "));
        panel.add(pierHeight);
        panel.add(meters = new JLabel("meters"), "wrap");
        panel.add(spacer = new JLabel(" "),"span, grow");
        panel.add(cabelAnch = new JLabel("Cable anchorage:"),"wrap");
        panel.add(noCabAnch,"span, grow");
        panel.add(oneCabAnch,"span, grow");
        panel.add(twoCabAnch,"span, grow");
        panel.add(spacer = new JLabel(" "),"span, grow");
        panel.add(concreteType = new JLabel("Concrete type: "),"wrap");
        panel.add(medStrCon,"span, grow");
        panel.add(highStrCon,"span, grow");
        panel.add(spacer = new JLabel(" "),"span, grow");
        panel.add(continueBtn);
        panel.add(quitBtn);
        add(panel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                MyFormat mf = new MyFormat();
                mf.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                mf.pack();
                mf.setLocationByPlatform(true);
                mf.setVisible(true);
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/9c9f494a73dbf6da02fef6873284e2c3.png)

PS 使用的布局：[MigLayout](http://sourceforge.net/projects/miglayout/ "MigLayout")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:27:45.157

您是否使用google 的[netbeans](http://netbeans.org/features/index.html)或[WindowBuilderPro](https://developers.google.com/java-dev-tools/wbpro/)等 GUI 编辑器进行 Eclipse 的尝试？使用这样的编辑器要容易得多，也是了解不同布局如何协同工作的好方法。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:46:57.057

我还发现了一种使用网格布局的更简单方法，它比 Mig 布局简单得多。抱歉，添麻烦了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T23:02:27.910

当 GridBag 感觉有点矫枉过正时，我会使用垂直方向的[Box 。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/Box.html)

# jquery - KendoGrid UI - 返回的已保存实体未将 PK 值绑定到网格

> ID：13434894
> 
> 赞同：1
> 
> 时间：2012-11-17T21:21:41.723
> 
> 标签：jquery, asp.net-mvc, kendo-ui

*   我正在使用带有 jQ ​​uery **1.8.2**的KendoUI 版本**2012.3.1114**。
***   我正在使用 MVC4，我的方法是路由在 fetch 上抛出一个控制器，在发布时使用 API 控制器。这些工作正常，我已经验证返回的实体包含正确的填充值（Id、Sender、Subject）*   我没有使用 MVC 剃须刀版本。**

 ****问题**

我遇到的问题是我的对象已保存并正确返回，但是当它通过“options.success”方法上的 kendo.web.min.js 文件传递​​时，模型似乎没有填充 Id 字段与新值。

这是与 KendoGrid 一起使用的 js

```
dataSource = new kendo.data.DataSource({
        transport: {
            read: function (options) {
                $.ajax({
                    dataType: 'json',data: options.data, url: 'messagesfetchmessages', cache: false,
                    success: function (result) {   
                        options.success(result);
                    }
                });
            },
            create: function (options) {
                options.data.Id = 0;
                debugger
                $.ajax({
                    dataType: 'json',data: options.data,type: "POST",url: '/api/messages',cache: false,
                    success: function (result) {
                        //var model = kendo.stringify(result)
                        debugger
                        options.success(result);
                    },
                    error: function (result) {
                        options.error(result);
                    }
                });
            },
        },
        batch: true,
        pageSize: 30,
        schema: {
                    data: "data",
            model: {
                id: "Id",
                fields: {
                    Id: { editable: false, nullable: true },
                    Sender: { validation: { required: true } },
                    Subject: { validation: { required: true } },
                }
            }
        }
});

$("#grid").kendoGrid({
    dataSource: dataSource,
    pageable: true,
    height: 400,
    toolbar: ["create"],
    columns: [
        { field: 'Id', width: "10px" },
        { field: 'Sender', width: "50px" },
        { field: 'Subject', width: "50px" }
        { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" }],
    editable: "popup"
}); 
```

**这是结果的几个屏幕截图：**

这是成功保存返回的结果 ![在此处输入图像描述](../Images/5384a32b3dcbdfc5b4346c03c323dd2f.png)

下面是 KendoUI 调用 'success' 并将对象传递给 jquery deferred 函数后的结果截图（注意模型**Id**为空）：

```
success: function (t) {
    e.resolve({
        response: t,
        models: n,
        type: i
    })
}, 
```

![在此处输入图像描述](../Images/c6ada8bbe49eeb4da900185614a549ee.png)

令人惊讶的是，将我的头撞在键盘上只会伤害键盘......任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:29:32.170

问题最终是模式是如何定义的。由于我已将[架构数据结果](http://docs.kendoui.com/api/framework/datasource#schemadata-functionstring)设置为以下内容作为**“数据”**返回。所有结果必须以相同的方式返回，绑定才能正常工作。

```
 var schema  = {
        data: "data",
        total: 'total',
        model: MessageModel,
        //http://docs.kendoui.com/api/framework/datasource#schema-object
        errors:  function(e,a,b) {                    
            if(e && e.responseText){
                alert(e.responseText);
                debugger
            }
        },
        parse: function(response) {
            if(!response.total){
                debugger
            }
            //response.data.DateCreated = new Date();
            return response;
        },
        batch: false,
        gridcolumns: columns
    } 
```

因此，在帖子中的成功函数上，代码如下所示：

```
success: function (result) {
    options.success({
        data: result
    });
} 
```**

# objective-c - 如果 iOS 5 中不包含字体，我们可以在 iOS 6 中使用它吗？

> ID：13434895
> 
> 赞同：7
> 
> 时间：2012-11-17T21:21:43.563
> 
> 标签：objective-c, xcode, ios5, fonts, ios6

我想使用 iOS 6 中包含的字体“Avenir”。这是否意味着运行 iOS 5 的设备将无法看到该字体？如果是这样，如果他们的设备上没有“Avenir”，有没有办法回退到不同的字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:56:48.827

您可以选择要在 iOS < 6 中使用的字体，并在必要时进行分配。像这样定义一个宏：

```
#define SYSTEM_VERSION_LESS_THAN(v)      
       ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedAscending) 
```

然后你可以在你的代码中做：

```
NSString *fontName = @"Avenir";

if SYSTEM_VERSION_LESS_THAN(6.0) { 
   fontName = @"ArialMT";
} 
```

您可以在此处找到支持的字体列表：http: [//iosfonts.com/](http://iosfonts.com/)

# php - Mysql fetch_array_assoc 没有得到第一行

> ID：13434901
> 
> 赞同：-2
> 
> 时间：2012-11-17T21:22:22.517
> 
> 标签：php, mysql

我有这个代码：

```
 $result = mysql_query("SELECT * FROM textos");

         $row = mysql_fetch_assoc($result);

         while($row = mysql_fetch_assoc($result)){
            echo "<b>ID:</b> ".$row['id'].", <b>Titulo:</b>".$row['titulo'].", <b>Texto:</b>".$row['texto'].", <b>Presentes:</b>".$row['presentes']."<br/>";
         } 
```

但是当我运行它时，只会从第二个 id 回显。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:25:01.230

获取第一行：

```
$row = mysql_fetch_assoc($result); 
```

从第二行开始获取：

```
while($row = mysql_fetch_assoc($result)){ 
```

摆脱第一次调用`mysql_fetch_assoc`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T21:24:49.063

你复制了`$row = mysql_fetch_assoc($result)`. 只有 while(...) 应该包含它。

# javascript - 菜单 Jquery 但没有工作我

> ID：13434902
> 
> 赞同：0
> 
> 时间：2012-11-17T21:22:24.387
> 
> 标签：javascript, jquery, menu

当鼠标悬停在一个链接上并创建简单的菜单头时，我为显示 div 创建了简单的代码，它的想法是在查看链接时向我显示一个 div，然后我可以查看此 div 并选择我想要的，但实际上我不能选择任何内容，因为如果我没有通过链接，则 div 会一直隐藏

我的代码是这样的：

```
<style>
#menu_content_head
{
top:125px;
position:absolute;
width:200px;
min-height:100px;
height:auto;
border:1px solid #000000;
background-color:green;
}
</style>

<script>
function menu_head(id)
{

$(document).ready(function() {

$("#h1").hover(function () {
$(".head_m_1").show( "slide", {direction: "up" }, 2000 );
});

$("#h1").mouseout(function () {

$(".head_m_1").hide( "slide", {direction: "up" }, 2000 );
});

});

}
</script>

<div id="web_header_menu_boton">
<a href="#" onmouseover="menu_head('head_m_1');" id="h1">Menu 1</a>
</div>

<div id="menu_content_head" style="display:none;" class="head_m_1">Content 1</div> 
```

[JS Fiddle 复制发布的代码](http://jsfiddle.net/davidThomas/ZYPW7/)。

问题：

1 ) 动画重复了 1 次以上，我不知道为什么.....我使用 stop() ，但我没有工作 2 ) 当我浏览链接时，第一时间没有向我展示 show 的效果div，我需要在其他时间查看链接以进行工作 3）当我通过链接查看 div 隐藏内容时，我无法在 div 显示中选择任何内容

我需要修复的 3 件事，我尝试了，但我不知道该怎么做，不需要更多，不需要复杂的菜单或插件

感谢您的帮助，问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:36:03.237

试试这个[小提琴](http://jsfiddle.net/ZYPW7/3/)

```
$(document).ready(function() {

    $("#h1").hover(function() {
        $(".head_m_1").show(2000);
    });

    $("#h1").mouseout(function() {

        $(".head_m_1").hide(2000);
    });
}); 
```

首先，您根本不需要 HTML 中的 mouseover 处理程序或 menu_head 函数。其次，不要重载`.show()`或`hide()`接受这些论点。检查[文档](http://api.jquery.com/hide/)。

也许您正在寻找[.slideUp()](http://api.jquery.com/slideUp/)和它的合作伙伴，`.slideDown`？

# android - Webview、ProgressBar 和 ActionBarSherlock 的问题

> ID：13434904
> 
> 赞同：0
> 
> 时间：2012-11-17T21:22:55.277
> 
> 标签：android, webview, actionbarsherlock, android-progressbar

我几乎遵循了使用 ActionBarSherlock 将 ProgressBar 添加到我的 WebView 的所有必要步骤，但在 Android 4.0 之前的版本上我没有得到任何结果。任何人都可以帮忙吗？我从 ABS 导入了 Window，添加了 requestWindowFeature(Window.FEATURE_PROGRESS); 在设置内容之前，我只是不知道该怎么做。请不要告诉我遵循样本，因为我已经尝试过了，但没有得到任何结果。谢谢你。

这是 MainActivity.class 的代码

```
package com.twk95.webviewtest;

import android.content.Intent;
import android.os.Bundle;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.Window;

public class MainActivity extends SherlockActivity {

public static WebView webView;
final SherlockActivity MyActivity = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.activity_main);
    webView = (WebView) findViewById(R.id.WebView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView webview, String url) {
            webview.loadUrl(url);
            return true;
        }
    });
    webView.loadUrl("http://www.google.com");
    webView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {
            MyActivity.setTitle("Loading...");
            MyActivity.setProgress(progress * 100);
            setSupportProgressBarVisibility(true);

            if (progress == 100) {
                MyActivity.setTitle(R.string.app_name);
                setSupportProgressBarVisibility(false);
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.webview_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.webReload:
        webView.reload();
        break;
    case android.R.id.home:
        Intent intent = new Intent(this, MainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;
    }
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:49:39.113

确保该`requestWindowFeature`方法正在使用，`com.actionbarsherlock.app.SherlockActivity.requestWindowFeature(long featureId)`然后使用`setSupportProgress(int progress)`来更新它而不是使用`MyActivity.setProgress()`

# android - 多窗口不工作

> ID：13434905
> 
> 赞同：7
> 
> 时间：2012-11-17T21:23:01.037
> 
> 标签：android, multi-window

我目前正在尝试为我的应用程序实现多窗口功能。

我按照[这个指南](http://www.modaco.com/page/news/_/android/developers-add-support-for-samsung-multi-window-to-your-apps-r823)。

这是我的问题：

我在清单中添加了以下几行

```
 <intent-filter>
<action android:name="android.intent.action.MAIN" />

<category android:name="android.intent.category.LAUNCHER" />

<category android:name="android.intent.category.MULTIWINDOW_LAUNCHER" /> 
```

和

```
 <uses-library required="false" name="com.sec.android.app.multiwindow"> </uses-library>
    <meta-data android:name="com.sec.android.support.multiwindow" android:value="true" />
    <meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_W" android:value="632.0dip" />
    <meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_H" android:value="598.0dip" />
    <meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_W" android:value="632.0dip" />
    <meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_H" android:value="598.0dip" />

    </application> 
```

我得到这个错误

```
 Attribute is missing the Android namespace prefix 
```

在这一行：

```
 <uses-library required="false" name="com.sec.android.app.multiwindow"> </uses-library> 
```

任何人都可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T21:34:07.140

尝试更改此行

```
<uses-library required="false" name="com.sec.android.app.multiwindow"> </uses-library> 
```

到这一行：

```
<uses-library android:required="false" android:name="com.sec.android.app.multiwindow"> </uses-library> 
```

# php - 如何生成唯一的会话密钥来引用 mysql 表中的会话？

> ID：13434906
> 
> 赞同：1
> 
> 时间：2012-11-17T21:23:14.433
> 
> 标签：php, mysql

我使用 $_SESSION 来存储用户 ID，但我想更改为使用与 SQL 配对的常规 cookie（带有 KEY），这样我可以在用户关闭浏览器时保持用户身份验证。

如何为我的 SESSIONs 表中的每一行创建一个唯一键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:36:58.480

您实际上是在寻找编写自己的会话处理程序来绕过 PHP 在会话 cookie 上的 cookie 过期问题。这很简单，如果做得好，也很优化。

**第 1 步：生成会话 ID**

会话 ID 是唯一的。但是，如果您正在计划永久会话，则必须牢记几件事：您希望会话在每个浏览器中都进行，而不管连接问题如何。因此，您可以通过将会话 ID 映射到导航器的用户代理（不会更改）来欺骗系统。

这允许您减少会话 ID 生成器为两个不同的访问者生成相同 ID 的机会。其余的取决于随机数生成器和散列算法，不过 -`md5(microtime().$_SERVER['REMOTE_ADDR'])`通常是值得信赖的朋友。

**步骤 2：存储和检索数据**

存储数据也很简单。您的目标是创建一个至少包含两列的 MySQL 表：会话键（设置为`PRIMARY`）和数据（最简单形式的序列化数组，存储为`TEXT`）。

创建会话时，只需插入新行并注意错误。如果出现错误，则该密钥已被使用，因此您需要重新生成另一个。如果该行已成功插入 - 一切都好，您现在有一个用户会话行！从那里你需要做的就是在你认为合适的时候读/写这一行。

使用会话 ID 对用户进行 cookie 处理，您就完成了！

**注意事项**

*   永远不要*使用*用户 ID 作为会话 ID。Cookie 可以很容易地被操纵。您希望 cookie 值是随机的并且与用户完全分离。应该是没有意义的。
*   您需要不时编写清理代码来清理会话表。做到这一点的一个好方法是跟踪上次使用会话的时间 - 并相应地删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T21:47:03.813

您可以使用 MySQL 的`UUID()`.

如果你想保持会话活跃，你也可以使用 PHP 的`session_set_cookie_params()`.

不过，SQL 解决方案有一个优势：您可以轻松扩展到更多网络服务器。另一方面，您不能使用 PHP 的`$_SESSION`数组，您必须自己编写会话处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-17T21:39:18.200

最好的方法是使用一些散列函数，实际上 PHP 本身也通过生成会话 id 来使用该函数。你可以使用这样的东西：

```
md5(microtime()); 
```

您可以将更多值组合在一起，例如随机数、用户代理、服务器名称或使用更强大的算法，如 SHA2。

但是为了唯一性，如果没有存储这样的散列，您将始终需要查看表（但概率当然非常低）。

但我只会选择能`session_id()`完成所有工作的标准。

# php - 从服务器上的目录中获取图像文件以进行进一步处理

> ID：13434909
> 
> 赞同：0
> 
> 时间：2012-11-17T21:23:29.363
> 
> 标签：php, image, file-upload, upload, readdir

我在服务器上有包含图像文件的文件夹。我正在尝试获取这些文件，然后进一步上传它们，但我认为我使用了错误的功能。

我的代码：

```
$dir = "../uploads/".$folderimage."/";
if ($handle = opendir($dir)) {
  while (false !== ($entry = readdir($handle))) {
    if ($entry != "." && $entry != "..") {
      echo "$entry\n";
      $handle =  fopen($entry,"wb");
      $mug->images_upload(array( "AlbumID" => "#####", "File" =>   $handle));
    }
  }
  closedir($handle);
} 
```

不知道我在做什么，我需要做的就是将文件传递给类函数`$mug->images->upload`。它可以根据`$_POST`请求工作，但我需要将已上传的文件移动到文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:29:46.833

模拟 $mug 对象的文件上传 POST 请求有点棘手。如果你可以重构 $mug 中的代码，你会更好：

1.  $mug 获取上传的文件并将其放到目标位置。
2.  您创建一个新函数来实现您希望在此处和 $mug 中使用的处理。
3.  从这里调用此函数，并使用适当的文件名从 $mug 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:29:01.350

您发布的代码存在许多明显的问题。

```
$dir = "../uploads/".$folderimage."/";
if ($handle = opendir($dir)) {
  while (false !== ($entry = readdir($handle))) {
    if ($entry != "." && $entry != "..") {
      echo "$entry\n";
      $handle =  fopen($entry,"wb");
      $mug->images_upload(array( "AlbumID" => "#####", "File" =>   $handle));
    }
  }
  closedir($handle);
} 
```

*   **冲突变量。**

    您已经使用`$handle`vairable 来存储目录句柄，只是稍后用循环内的文件资源覆盖它。一旦你在循环中覆盖它，下一次调用`readdir($handle)`没有任何意义，你是在文件资源上调用函数。这很容易导致无限循环，因为当`readdir()`给出垃圾时，它可能会返回`NULL`.

*   **路径不正确`fopen()`**

    给定`$folderimage = "images"`and `$entry = "photo.jpg"`，那么该`fopen()`行将尝试在`photo.jpg`而不是打开图像`../uploads/images/photo.jpg`。您可能想使用类似的东西`$dir . $entry`，但请继续阅读，因为您根本不应该使用`fopen()`。

*   **phpSmug 库的错误使用**

    `File`参数必须是一个*字符串*，其中包含“正在上传的本地文件的路径”（[source](https://github.com/lildude/phpSmug/blob/7514bf975462/phpSmug.php#L600)）。相反，您尝试将*文件资源*传递`fopen()`给它。

*   **`opendir()/readdir()`因为目录迭代是古老的**

    在 PHP 中有更好的方法来遍历目录内容。正如[劳伦斯的回答](https://stackoverflow.com/a/13435044/113938)中提到的，`glob()`可能有用。

    我还提倡使用[SPL中的](http://php.net/spl)[文件系统迭代](http://php.net/filesystemiterator)器。

    ```
    $dir = "../uploads/$folderimage/";
    foreach (new FilesystemIterator($dir) as $fileinfo) {
        $image_pathname = $fileinfo->getPathname();
        $mug->images_upload("AlbumID=#####", "File=$image_pathname");
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T21:40:59.150

如果`$mug->images_upload`期望文件路径，则传递`$dir.$entry`给它

```
<?php 
$dir = "../uploads/".$folderimage."/";

if ($handle = opendir($dir)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo $entry.PHP_EOL;
            $mug->images_upload(array( "AlbumID"=>"#####", "File"=>$dir.$entry));
        }
    }
    closedir($handle);
}

//Or simpler way but slightly slower
foreach (glob($dir."*.{png,jpg,gif}", GLOB_BRACE) as $file) {
    echo $file.PHP_EOL;
    $mug->images_upload(array( "AlbumID"=>"#####", "File" =>$dir.$file));
}
?> 
```

# javascript - 使用 jquery 的总数

> ID：13434911
> 
> 赞同：0
> 
> 时间：2012-11-17T21:23:36.960
> 
> 标签：javascript, jquery

`p`jQuery如何计算标签之间的字符数？

我尝试如下：

**[演示](http://jsfiddle.net/TPFkF/)**

html:

```
<b>1</b>
<b>1</b>
<b>1</b> 
```

js：

```
var tBytes = 0,
    tFiles = $('b').length;
for (var tFileId = 0; tFileId < tFiles; tFileId++) {
    tBytes += $('b').text();
}
alert(tBytes);​ // Output is : 0111111111 I want output as: 3 
```

我该怎么办？

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:27:31.133

```
var total = 0
$('b').each(function(index, element) {
    total += $(element).text().length;
})
alert(total);​ 
```

[http://jsfiddle.net/TPFkF/2/](http://jsfiddle.net/TPFkF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:27:22.163

```
$('b').each(function(){
total += parseInt($(this).text());
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T21:29:32.720

```
var tBytes = 0,
    tFiles = $('b').length;
$('b').each(function(){
    tBytes += parseInt($(this).text(),10);
});
console.log(tBytes); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/TPFkF/4/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T21:25:41.700

你也可以很容易地用纯 javascript 做到这一点，不需要 jquery：

```
var tBytes  = 0,
    tFiles= document.getElementsByTagName('b');

for(var i=0,z=tFiles.length;i<z;i++) { 
    tBytes += +(tFiles[i].textContent || tFiles[i].innerText);
}

alert(tBytes);​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T21:47:15.873

你也可以看看这段代码：

```
Array.prototype.Sum = function()
{
    var result = 0;

    $(this).each(
        function()
        {
             result += this;
        }
    );

    return result;
};

alert($("b").map(function () { return parseInt($(this).text()); }).toArray().Sum()); 
```

[JSFiddle在这里](http://jsfiddle.net/TPFkF/8/)

如果你有兴趣，甚至是这个：

```
$.fn.Sum = function()
{
    var result = 0;

    $(this).each(
        function()
        {
             result += this;
        }
    );

    return result;
};

alert($("b").map(function () { return parseInt($(this).text()); }).Sum()); 
```

[JSFiddle在这里](http://jsfiddle.net/TPFkF/10/)

最后是我最喜欢的：

```
$.fn.Sum = function(action)
{
    var result = 0;

    $(this).each(
        function()
        {
             result += action.call(this);
        }
    );

    return result;
};

alert($("b").Sum(function () { return parseInt($(this).text()); })); 
```

[JSFiddle在这里](http://jsfiddle.net/TPFkF/12/)

# c - 将文件保存到结构中

> ID：13434912
> 
> 赞同：1
> 
> 时间：2012-11-17T21:23:48.787
> 
> 标签：c, structure

我有一个程序，我想在其中读取和保存数据。理想情况下，我想读取数据，能够显示和更改数据，然后能够在需要时将其保存回另一个文件。现在我把它放在我可以读取数据的地方，但我无法进行更改或将内容保存到另一个文件。我不会发布我的整个代码，因为它相当冗长，但这是我的结构、主要功能、菜单功能和读取功能。

```
typedef struct friends_contact{

  char *First_Name;
  char *Last_Name;
  char *home;
  char *cell;
}fr;

int main() {

  fr friends[5];
  char buffer[BUFFSIZE];
  int counter=0;
  int i=0;

  menu(friends, &counter,i,buffer);

  getch();
  return 0;
}
//Menu function
void menu(fr*friends,int* counter, int i,char buffer[]) {
  int user_entry=0;
  int user_entry1=0;
  int user_entry2=0;
  char user_entry3[50]={'\0'};
  FILE *read;
  printf("Welcome! Would you like to import a file? (1)Yes or (2) No");
  scanf("%d",&user_entry1);
  if(user_entry1==1)
     {
      printf("Please enter a file name");
      scanf("%s",user_entry3); 
      read=fopen(user_entry3,"r");
     }else;
  do{
     int result;

     printf("\nPhone Book Application\n");
     printf("1) Add friend\n2) Delete friend\n3) Show a friend\n4) Show phonebook\n5)Exit\n");   
     scanf("%d", &user_entry);

    if(user_entry==1)
      {
       add_contact(friends,counter,i,buffer);
      }
    if(user_entry==2)
      {
       delete_contact(friends ,counter,i);
      } 
    if(user_entry==3)
      {
      result=show_contact(friends ,counter,i);
      if(result==0)
        {
         printf("\nName not Found\n");
        }else
              result;

      }                  
     if(user_entry==4)
       {
        print_contact(friends, counter,i,user_entry3);
        if(user_entry1==1){
        file2(friends ,counter,i,buffer,read);

       }else;
  } 

}while(user_entry!=5);
 if(user_entry==5)
   {
    fclose(read);
    printf("Would you like to save entries to a file? (1)yes or (2) no");
    scanf("%d",&user_entry2);
     if(user_entry2 == 1)
       { 
        printf("Please name your file");
        scanf("%s",user_entry3); 
        file(friends, counter,i,user_entry3);
        printf("Goodbye!"); 
       }else if(user_entry2 == 2)
         {
          printf("Goodbye!"); 
         }
      }

 } 
```

我的阅读功能：

```
char file2(fr*friends ,int* counter, int i,char buffer[],FILE*read){
   fseek(read, 0, SEEK_SET); 

   while (fscanf(read, "%s", buffer) != EOF) 
    {
       friends[i].First_Name=malloc(BUFFSIZE*strlen(buffer));
       strcpy(friends[i].First_Name, buffer);
       printf("%s\n",friends[i].First_Name);

    }

} 
```

正如我所说，现在我可以查看文件的内容，但我无法编辑它们，甚至无法将它们输出到另一个文件。我的代码中可能还有一些不完美的东西，但在我担心进行其他更改之前，我试图专注于这一点（因为该程序在提到的问题之外工作）。我已经准备好给出一个大的绿色复选标记了！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:21:34.190

如果您想在应用程序中编辑字符串，请记住，您必须在需要时注意增加缓冲区。使用固定长度的记录（并用零填充字符串）可能更合理。然后，您只能检查您是否没有溢出缓冲区的末尾，并一次使用`fread()`和`fwrite()`读取/转储`fr`文件的结构（基本上是读/写`sizeof(fr)`- 除非您在具有不同字节序的机器上运行应用程序，否则它是安全的）。

也就是说，有几个观察：

*   使用`switch`而不是 multiple `if(user_entry==x)`，在`else`部分中执行某些操作（打印警告或其他） - 它通常表示代码中的常规或错误分支。
*   使用 width in`fscanf(read, "%s", buffer)`来指定可以容纳的最大字符串长度`buffer`，请记住，`'\0'`字符串终止符不计入此值，因此您需要使用缓冲区大小 - 1。即将其硬编码为例如：`%50s`或编译正确的格式字符串在运行时。
*   `malloc(BUFFSIZE*strlen(buffer))`可能不是您真正想要分配的大小
*   **总是检查`malloc()`返回值！**

# google-bigquery - 过滤查询会导致“响应过大”错误

> ID：13434915
> 
> 赞同：2
> 
> 时间：2012-11-17T21:24:32.170
> 
> 标签：google-bigquery

运行查询

```
SELECT project, test_id, log_time,
       connection_spec.client_geolocation.latitude, 
       connection_spec.client_geolocation.longitude
FROM m_lab.2012_11
GROUP BY project, test_id, log_time,
         connection_spec.client_geolocation.latitude, 
         connection_spec.client_geolocation.longitude
ORDER BY log_time LIMIT 6 
```

在约 20 秒内成功

但是，向其中添加 WHERE 子句应该会减少返回的行数

```
SELECT project, test_id, log_time,
       connection_spec.client_geolocation.latitude, 
       connection_spec.client_geolocation.longitude
FROM m_lab.2012_11
WHERE log_time > 0
GROUP BY project, test_id, log_time,
         connection_spec.client_geolocation.latitude, 
         connection_spec.client_geolocation.longitude
ORDER BY log_time LIMIT 6 
```

导致错误“响应太大而无法返回”。

我的期望是限制返回的行会增加执行时间，因为需要扫描更多的行，但响应应该是相同的大小。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T23:44:43.180

首先，扫描的行数是恒定的。BigQuery 不会（按设计）对行编制索引，而是对您指定的表执行全表扫描。

在这个 m-lab 表中有数十亿行，我认为这里的一般问题是通过多个 GROUP BY 生成的唯一结果的数量在两个查询中都非常大，这会为BigQuery 执行树。

**一种方法：**

处理此查询的一种方法是使用我们称为的新功能`GROUP EACH BY`。这提供了应用洗牌操作来平衡服务树上的分组。`GROUP`当每个“桶”有许多单独的值时，它的效果最好。在 m-lab 数据集中，几乎每个条目都附加到项目“0”，因此我将从查询结果中删除它，以及`GROUP EACH BY`其他更多的值：

```
SELECT test_id, log_time,  connection_spec.client_geolocation.latitude,  connection_spec.client_geolocation.longitude
FROM
  [measurement-lab:m_lab.2012_11]
WHERE
  log_time > 0 AND project = 0
GROUP EACH BY
  test_id, log_time, connection_spec.client_geolocation.latitude,   connection_spec.client_geolocation.longitude
ORDER BY log_time LIMIT 6; 
```

**另一种策略：**

您查询的结果按 log_time 的顺序列出结果，这意味着您实际上只返回最早的 log_time 数据点。为什么不为一组时间点运行子选择，然后使用 WHERE 子句中的结果集运行 GROUP BY。此查询应该比其他示例运行得快得多：

```
SELECT
  test_id, log_time, connection_spec.client_geolocation.latitude, connection_spec.client_geolocation.longitude, COUNT(*) AS entry_count      
FROM
  [measurement-lab:m_lab.2012_11]
WHERE
  project = 0 AND log_time IN
  (SELECT log_time FROM [measurement-lab:m_lab.2012_11] WHERE log_time > 0 GROUP BY log_time ORDER BY log_time LIMIT 6)
GROUP BY
  test_id, log_time, connection_spec.client_geolocation.latitude, connection_spec.client_geolocation.longitude  ORDER BY log_time, entry_count; 
```

# java - Pdf 文本坐标/字体

> ID：13434921
> 
> 赞同：0
> 
> 时间：2012-11-17T21:25:02.493
> 
> 标签：java, pdf, text, fonts, coordinate

我有一个项目，我必须从 PDF 文件（而不是元数据）中获取标题、作者信息。所以我尝试通过给定的坐标从 PDF 中读取文本并尝试获取文本的字体。

有没有办法做到这一点，任何人都可以提供建议吗？还是有其他解决方案可以完成我的项目？

感谢您的每一个帮助，并认为您正在与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:35:21.947

有多个用于 Java 的 PDF 库允许您提取文本，我最喜欢的是[iText](http://itextpdf.com/)，作为文本解析的示例，请查看[ExtractPageContentArea](http://itextpdf.com/examples/iia.php?id=279)和 iText in Action 第 2 版第 15 章中的其他[示例](http://itextpdf.com/book/chapter.php?id=15)。

目前没有使用字体信息的示例，但该信息可供 RenderListener 使用。

# virtualization - 我想了解更多关于 VT-d (IOMMU) 技术的信息，我应该从哪里开始？

> ID：13434936
> 
> 赞同：1
> 
> 时间：2012-11-17T21:26:57.963
> 
> 标签：virtualization, intel, iommu

我是一个低级的狂热者，我喜欢英特尔 VT-x，最近有一些空闲时间阅读和享受。我最近接触了术语 VT-d，它允许为每个设备创建“设备领域”，我想了解更多关于它的信息，但是在 [1] [2] 中搜索时。英特尔没有发布有关该技术的文档吗？如果是这样 - 在哪里？

我不想阅读 Xen src（尽管这是一个选项），我想阅读英特尔发布的有关此事的实际文档。

也许你们可以在这里提供帮助。

[1] [http://download.intel.com/products/processor/manual/252046.pdf](http://download.intel.com/products/processor/manual/252046.pdf) [2] [http://download.intel.com/products/processor/manual/325462.pdf](http://download.intel.com/products/processor/manual/325462.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:00:01.137

你没有阅读正确的文件。英特尔在[此处](http://download.intel.com/technology/computing/vptech/Intel%28r%29_VT_for_Direct_IO.pdf)提供 VT-d 规范(pdf)。如果您需要查看代码，您可以[在此处](http://lxr.linux.no/linux/drivers/iommu/)找到 Linux 驱动程序。

# c++ - 在结构中初始化空向量 - C++

> ID：13434937
> 
> 赞同：34
> 
> 时间：2012-11-17T21:27:13.533
> 
> 标签：c++, vector

我有一个`struct`：

```
typedef struct user {
    string username;
    vector<unsigned char> userpassword;
} user_t; 
```

我需要`userpassword`用空初始化`vector`：

```
struct user r={"",?}; 
```

我应该放什么代替`?`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-17T21:31:14.930

两者`std::string`都有`std::vector<T>`构造函数将对象初始化为空。你可以使用`std::vector<unsigned char>()`，但我会删除初始化程序。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-17T21:37:13.670

像这样：

```
#include <string>
#include <vector>

struct user
{
    std::string username;
    std::vector<unsigned char> userpassword;
};

int main()
{
    user r;   // r.username is "" and r.userpassword is empty
    // ...
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-17T21:32:22.767

怎么样

```
user r = {"",{}}; 
```

或者

```
user r = {"",{'\0'}}; 
```

或者

```
user r = {"",std::vector<unsigned char>()}; 
```

或者

```
user r; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T21:46:04.287

默认向量构造函数将创建一个空向量。因此，您应该能够编写：

```
struct user r = { string(), vector<unsigned char>() }; 
```

请注意，我还使用了默认的字符串构造函数而不是“”。

您可能需要考虑将 user 设为一个类并添加一个为您执行此操作的默认构造函数：

```
class User {
  User() {}
  string username;
  vector<unsigned char> password;
}; 
```

然后只写：

```
User r; 
```

将导致正确初始化的用户。

# html - 保持导航锚在同一条线上

> ID：13434939
> 
> 赞同：1
> 
> 时间：2012-11-17T21:27:24.017
> 
> 标签：html, css

我正在介绍 html 和 css 类。我们的讲师希望我们创建一个有五页的基本简历网站。他后来要求我们也添加一个博客页面。当我将第六页按钮添加到导航时，它移动到我的第一个按钮下方，而不是第五个按钮的右侧。我已经承认这可能是一个基本的修复，但我只有几个月的时间。任何帮助将不胜感激。

提前致谢，

这是我的 HTML 代码：

```
 html { 
	background: rgb(167,207,223); /* Old browsers */
	background: -moz-linear-gradient(top,  rgba(167,207,223,1) 0%, rgba(35,83,138,1) 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(167,207,223,1)), color-stop(100%,rgba(35,83,138,1))); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  rgba(167,207,223,1) 0%,rgba(35,83,138,1) 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  rgba(167,207,223,1) 0%,rgba(35,83,138,1) 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  rgba(167,207,223,1) 0%,rgba(35,83,138,1) 100%); /* IE10+ */
	background: linear-gradient(to bottom,  rgba(167,207,223,1) 0%,rgba(35,83,138,1) 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.Gradient( startColorstr='#a7cfdf', endColorstr='#23538a',GradientType=0 ); /* IE6-9 */
    }

    body {
	background-color: #BDBDBD;
	position: relative;
	margin-left: 25%;
	margin-right:25%;
	min-width: 600px;

    }

    header {
   	height: 100px;
    background: rgb(181,189,200); /* Old browsers */
	background: -moz-linear-gradient(top,  rgba(181,189,200,1) 0%, rgba(130,140,149,1) 36%, rgba(40,52,59,1) 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(181,189,200,1)), color-stop(36%,rgba(130,140,149,1)), color-stop(100%,rgba(40,52,59,1))); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* IE10+ */
	background: linear-gradient(to bottom,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.Gradient( startColorstr='#b5bdc8', endColorstr='#28343b',GradientType=0 ); /* IE6-9 */
    border-bottom: 1px solid red;
    }

    /*Navigation list styles */
    header nav {
    float: left;
    width: 85%;
    margin: 20px auto 0px auto;
    }

    header nav li {

    display: block;
    width: 15%;
    margin-left: 5%;
    margin-bottom: 0px;
    float: left;
    border-radius: 80px;
    -moz-border-radius: 80px;
    -webkit-border-radius: 80px;
    background: rgb(149,149,149); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(149,149,149,1) 0%, rgba(13,13,13,1) 46%,  rgba(1,1,1,1) 50%, rgba(10,10,10,1) 53%, rgba(78,78,78,1) 76%, rgba(56,56,56,1) 87%,  rgba(27,27,27,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(149,149,149,1)), color-stop(46%,rgba(13,13,13,1)), color-stop(50%,rgba(1,1,1,1)), color-stop(53%,rgba(10,10,10,1)), color-stop(76%,rgba(78,78,78,1)), color-stop(87%,rgba(56,56,56,1)), color-stop(100%,rgba(27,27,27,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(149,149,149,1) 0%,rgba(13,13,13,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(149,149,149,1) 0%,rgba(13,13,13,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(149,149,149,1) 0%,rgba(13,13,13,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(149,149,149,1) 0%,rgba(13,13,13,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#959595', endColorstr='#1b1b1b',GradientType=0 ); /* IE6-9 */

    }

    header nav li a {
    display: block;
    width: 100%;
    height: 50px;
    line-height: 50px;
    text-align: center;
    font-size: 1.3em;
    color: white;
    }

    header article {
    float: left;
    width: 70%;
    }

    section h1 {

    font-size: 2.0em;
    font-family: nevis, serif;
    font-weight: bold;
    letter-spacing: 3px;
    text-decoration: underline;
    text-align: center;
    }

    section {
    clear: left;
    width: auto;
    } 

    section h2 {
	padding-left: 20px;
    }

    section p {
    margin-left: 20px;
    padding-right: 20px;
    font-size: 1.4em;
    text-indent: 20px;
    }

    /* Footer Styles */

    footer {
    clear: left;
    margin-top: 20px;
    }

    footer address {
    background: rgb(181,189,200); /* Old browsers */
	background: -moz-linear-gradient(top,  rgba(181,189,200,1) 0%, rgba(130,140,149,1) 36%, rgba(40,52,59,1) 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(181,189,200,1)), color-stop(36%,rgba(130,140,149,1)), color-stop(100%,rgba(40,52,59,1))); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* IE10+ */
	background: linear-gradient(to bottom,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(40,52,59,1) 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b5bdc8', endColorstr='#28343b',GradientType=0 ); /* IE6-9 */
	padding-top: 10px;
    height: 40px;
    font-style: normal;
    font-weight: bold;
    font-size: 1.2em;
    text-align: center;
    }
```

```
 <li><a href="mbrooksbio.html">Home</a></li>
				<li><a href="family.html">Family</a></li>
				<li><a href="hobbies.html">Hobbies</a></li>
				<li><a href="privacy.html">Blog</a></li>
				<li><a href="contact.html">Contact</a></li>
				<li><a href="privacy.html">Privacy</a></li>
			</ul>
		  </nav>

		</header>

		<section>
		<h1><br>THE MICHAEL BROOKS BIO PAGE</h1>
		  <article>

			<h2><br><br>The Early Years</h2>
				<p class='home'> Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
					Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
					Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				</p>
			<h2><br>Fun in the Sun?</h2>
				<p class='home'>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor.  
				</p>

			<h2><br>Lemons to lemonade</h2>
				<p class='home'>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				</p>
			<h2><br>A new direction</h2>
				<p class='home'>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In posuere felis nec tortor. 
				</P>

		  </article>
		</section>

		<footer>
			<address>13060 Cog Hill Way &bull;
					 Orlando, FL 32828 &bull;
					 (321)231-8966
			</address>
		</footer> 
```

# c - 无法使用 3D 图形绘制简单的四边形

> ID：13434941
> 
> 赞同：1
> 
> 时间：2012-11-17T21:27:31.660
> 
> 标签：c, opengl, glut

我正在尝试使用 OpenGL 绘制一个简单的四边形。如果我不使用深度并以 0.0 作为 z 坐标绘制四边形，则相同的代码不会失败。
似乎没有启用深度或任何：

```
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>

int width=500, height=500, depth=500;

void init()
{
    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, width, height, 0);
    gluLookAt(250, 250, 250, 250, 250, -250, 0, 1, 0);
    gluPerspective(45, 1, 1.0, 200.0);
}

void display()
{
    glClearColor(0.0, 0.0, 0.0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glColor4f(1, 0, 0, 0);
    glBegin(GL_QUADS);
    glVertex3i(100, 100, 100);
    glVertex3i(100, 300, 100);
    glVertex3i(300, 300, 100);
    glVertex3i(300, 100, 100);
    glEnd();

    glutSwapBuffers();
}

int main(int argc, char * argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(width, height);
    glutCreateWindow("Test");
    glutDisplayFunc(display);
    init();
    glutMainLoop();
    return 0;
} 
```

我只看到一个黑色的窗口，但我应该看到里面有一个红色的四边形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:42:28.817

将您的功能更改`init()`为：

```
void init()
{
    glEnable(GL_DEPTH_TEST);
    glViewport(0, width, height, 0);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, 1, 1.0, 200.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(250, 250, 250, 250, 250, -250, 0, 1, 0);
} 
```

您的问题是`gluLookAt()`应该使用它来定义模型视图矩阵，但是您将投影乘以一。此外，该`glViewport()`调用与矩阵计算无关，因此我将其移至函数的开头。不是真的需要，但我觉得更清楚。

# javascript - Facebook 上的 Javascript SDK

> ID：13434943
> 
> 赞同：1
> 
> 时间：2012-11-17T13:54:26.603
> 
> 标签：javascript, facebook, sdk

我正在尝试为 Facebook 使用 Javascript SDK，但我不断收到消息：

> 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域

但我已经从设置部分复制并粘贴了我的画布 URL。有人有什么想法吗？

我的代码行是：

```
var myDomain='https://www.foxenet.com/fb/passwords/channel.html'; 
```

初始化脚本：

```
 // init the FB JS SDK
    FB.init({
      appId      : gAppID, // App ID from the App Dashboard
      channelUrl : myDomain, // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    }); 
```

# c++ - 旋转控制位置问题 (Windows)

> ID：13434945
> 
> 赞同：3
> 
> 时间：2012-11-17T21:27:56.183
> 
> 标签：c++, windows, winapi

我遇到了旋转（上/下）控件的问题。在旋转控件的属性中，我将“Set Buddy Integer”设置为 true。

在我的 dialogboxproc 的 WM_INITDIALOG 中，我将其伙伴设置为静态文本控件：

```
SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_SETBUDDY, (WPARAM)GetDlgItem(hDlg, IDC_STATIC1), 0); 
```

我还设置了最小/最大范围和起始位置：

```
SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_SETRANGE, 0, MAKELPARAM(1, 1));
SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_SETPOS, 0, 1); 
```

当在我的对话框中点击某个按钮时，我正在更新范围和位置：

```
SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_SETRANGE, 0, MAKELPARAM(2, 1));
SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_SETPOS, 0, 2); 
```

（我使用变量来设置范围和位置，但因为我遇到问题，所以我手动设置它，就像我刚刚发布的那样。）

设置位置后，我立即仔细检查以确认：

```
LRESULT lr = SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_GETPOS, 0, 0);
WORD pos = LOWORD(lr); 
```

确实，位置是2。

接下来，我单击旋转控件上的向下箭头。静态文本伙伴从 2 变为 1。这是我的 WM_NOTIFY 代码在 dialogboxproc 中的样子：

```
case WM_NOTIFY:
        ncode = ((LPNMHDR)lParam)->code;

        switch(ncode)
        {
        case UDN_DELTAPOS:
            {
                LRESULT lr = SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_GETPOS, 0, 0);

                if(HIWORD(lr) == 0)
                {
                    WORD pos = LOWORD(lr);

                    //Other stuff here
                    return TRUE;
                } 
```

按下向下箭头并检查 pos 的值后，位置仍然是 2。我之前将位置设置为 2 并按下向下箭头。此时位置不应该是1吗？问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:06:41.160

我找到了一个解决方案，但我不确定这是否是最好的或预期的做事方式。如果将 lParam 转换为 LPNMUPDOWN 类型：

```
LPNMUPDOWN lpnmud  = (LPNMUPDOWN)lParam; 
```

您可以获得当前位置和建议的位置变化。通过添加当前位置和建议的更改，您可以获得新位置：

```
int newPos = lpnmud->iPos + lpnmud->iDelta; 
```

然后，您必须手动获取范围并检查新位置是否在范围的边界内。这似乎需要做很多工作，但我想这是它通常的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:56:52.123

您在处理程序中返回`TRUE`，该`UDN_DELTAPOS`处理程序指示控件忽略更改。相反，您应该返回`FALSE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T05:48:01.100

在此行之后，我尝试了您的代码：

```
LRESULT lr = SendMessage(GetDlgItem(hDlg, IDC_SPIN2), UDM_GETPOS, 0, 0); 
```

我发现HIWORD(lr)总是1，而不是0。MSDN说正确的结果是0，我也不知道为什么。

如果您想获得 Spin Control 的 pos，您可以尝试：

```
LPNMUPDOWN *lpnm;
lpnm=(LPNMUPDOWN)lParam;
WORD pos;
pos=lpnm->iPos; 
```

顺便说一下，通过判断lpnm->iDelta的符号，你可以知道Spin Control的whick键被按下了。

# symfony - symfony2.1 与通过 composer 安装 DoctrineFixturesBundle 相关的问题

> ID：13434952
> 
> 赞同：0
> 
> 时间：2012-11-17T21:28:58.087
> 
> 标签：symfony, doctrine, bundle

我正在按照这个关于制作博客的教程学习 symfony：http: [//tutorial.symblog.co.uk/docs/doctrine-2-the-blog-model.html](http://tutorial.symblog.co.uk/docs/doctrine-2-the-blog-model.html)

事情进展顺利，直到我谈到安装 DoctrineFixturesBundle 的部分。本教程适用于 symf 2.0，而 2.1 的安装方式不同。我按照这里的说明进行操作：http: [//symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html](http://symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html)使用作曲家。

这移除了很多供应商，包括 twig，现在 symfony 给了我死亡的白屏。

此外，我的 composer.phar 文件非常不同，看起来几乎损坏了。在顶部附近有这个：__HALT_COMPILER(); ?>^M

整个文件有35627行，看起来很不对劲。

我什至不知道从哪里开始寻找解决这个问题。我正在使用版本控制，所以我有一个旧版本的 composer.phar 文件，我只是想取回它并重新开始吗？

这是我的错误日志吐出的内容：

```
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP Warning:  require_once(/srv/http/symblog.dev/app/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php): failed to open stream: No such file or directory in /srv/http/symblog.dev/app/autoload.php on line 9
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP Stack trace:
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP   1\. {main}() /srv/http/symblog.dev/web/app.php:0
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP   2\. require_once() /srv/http/symblog.dev/web/app.php:6
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP   3\. require_once() /srv/http/symblog.dev/app/bootstrap.php.cache:3
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP Fatal error:  require_once(): Failed opening required '/srv/http/symblog.dev/app/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php' (include_path='.:/usr/share/pear') in /srv/http/symblog.dev/app/autoload.php on line 9
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP Stack trace:
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP   1\. {main}() /srv/http/symblog.dev/web/app.php:0
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP   2\. require_once() /srv/http/symblog.dev/web/app.php:6
[Sat Nov 17 16:17:56 2012] [error] [client 127.0.0.1] PHP   3\. require_once() /srv/http/symblog.dev/app/bootstrap.php.cache:3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:40:38.320

您的 composer.json 文件是什么样的？我会重新下载作曲家，检查 composer.json 文件并做一个

```
php composer.phar update symfony/symfony 
```

# symfony-forms - 如何自定义 symfony 1.4 表单元素的命名

> ID：13434953
> 
> 赞同：0
> 
> 时间：2012-11-17T21:29:08.117
> 
> 标签：symfony-forms

我知道这是可能的，但我似乎无法找到正确的搜索字符串来在线获得答案。

我有 MyForm()

我想在同一个表单中创建其中的 5 个，所以我想更改表单元素的命名结构：name="forms[1][fieldname1]"
name="forms[1][fieldname2]"

name="forms[2][fieldname1]" name="forms[2][fieldname2]"

等等，以便在提交时我可以遍历 $_POST['forms'] 数组，将每个数组绑定到 MyForm 实例并进行验证。

我相信您可以以某种全局方式自定义 symfony 表单的字段命名，而不是遍历每个小部件，但我无法在网络上找到它。

有人指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:32:08.823

解决了自己的问题： $this->widgetSchema->setNameFormat('my_form[][%s]');

# vb.net - 使用自制算法进行二分搜索

> ID：13434955
> 
> 赞同：1
> 
> 时间：2012-11-17T21:29:12.450
> 
> 标签：vb.net

任务我需要使用自制算法进行二进制搜索。

现在该程序应该可以工作，但不幸的是事实并非如此，他比较了它，但问题是他对城市收费。如果未找到，则显示输出中的内容。

本练习的目的是将搜索值与邮政编码进行比较。邮政编码包含邮政编码和城市名称。

```
Module Module1

    Sub Main()
        '                           0       1          2       3            4       5         6       7         8       9     
        Dim zipcodes() As String = {"1000", "Brussel", "2000", "Antwerpen", "3000", "Leuven", "8000", "Brugge", "9000", "Gent"}
        'Dim zipcodesCount As Integer = 5
        '
        Dim searchValues() As String = {"0500", "1000", "2000", "3000", "4000", "8000", "9000", "9500"}
        ' 
        Dim searchValueIndex As Integer
        For searchValueIndex = 0 To 7
            Dim searchValue As String = searchValues(searchValueIndex)
            '
            Dim index As Integer
            Dim found As Boolean = False
            Dim allesDoorzocht As Boolean = False

            Dim uBound, lBound As Integer
            uBound = zipcodes.GetUpperBound(0) - 1
            lBound = zipcodes.GetLowerBound(0)

            Do Until found OrElse allesDoorzocht

                index = (lBound + uBound + 1 ) \ 2

                If (searchValue = zipcodes(index)) Then
                    found = True
                End If

                If uBound <= lBound Then
                    allesDoorzocht = True
                End If

                If Not (found OrElse allesDoorzocht) Then

                    If searchValue > zipcodes(index) Then
                        lBound = index + 1
                    Else
                        uBound = index - 1
                    End If

                End If

            Loop

            If found Then
                Console.WriteLine(searchValue & " is zipcode of " & zipcodes(index + 1))
                ' Of : Console.WriteLine(searchValue & " is zipcode of " & zipcodes(index + 1))
            Else
                Console.WriteLine(searchValue & " not found")
            End If
        Next
        '
        Console.ReadLine()
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:07:10.380

创建城市对象

```
Public Class City
    Public Property ZipCode As String 
    Public Property Name As String 
End Class 
```

并使用数组`City`代替

```
Dim citiy() As City = { _
    New City With { .ZipCode = "1000", .Name = "Brussel" }, _
    New City With { .ZipCode = "2000", .Name = "Antwerpen" }, _
    New City With { .ZipCode = "3000", .Name = "Leuven" }, _
    New City With { .ZipCode = "8000", .Name = "Brugge" }, _
    New City With { .ZipCode = "9000", .Name = "Gent" } _
} 
```

现在您可以像这样访问邮政编码和名称

```
city(i).ZipCode
city(i).Name 
```

并且对应的城市名称和邮政编码具有相同的索引。

* * *

注意我正在使用 VS 2010 引入的自动属性和对象初始化程序。您可能可以删除行继续符号 _。（我仍在使用 VS 2008，通常是 C#）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:43:38.193

您正在搜索数组邮政编码，该数组邮政编码应该按您编写的二进制搜索的升序排列，但`"1000"<="Brussel"<="2000"`不是真的。您必须确保您的算法只考虑数组的偶数元素。你通过拆分完美地做到了这一点。但在未找到的情况下，您必须确保边界仍然指向偶数索引而不是城市名称。所以你必须做`lBound=index+2`or `uBound=index-2`。

# ruby-on-rails - ruby on rails - 在范围内使用联合

> ID：13434962
> 
> 赞同：1
> 
> 时间：2012-11-17T21:30:00.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, union

我正在使用导轨 3.0.3。我有 4 张桌子。

```
class Artwork
  has_and_belongs_to_many :tag_styles
  has_and_belongs_to_many :tag_subjects
  has_and_belongs_to_many :tag_arttypes
end

class TagArttype
  set_table_name :tag_arttypes
  has_and_belongs_to_many :artworks
end

class TagStyle
  set_table_name :tag_styles
  has_and_belongs_to_many :artworks
end

class TagSubject
  set_table_name :tag_subjects
  has_and_belongs_to_many :artworks
end 
```

所有这三个 tag_tables 都有一个 name 属性。我如何制作一个接受单词并使用以下 sql 将其放在“Abstract”位置的 Artwork 范围：

```
select a.* from artworks as a, tag_arttypes as ta, artworks_tag_arttypes as ata where a.id = ata.artwork_id and ta.id = ata.tag_arttype_id and ta.name = 'Abstract' union
 select a.* from artworks as a,tag_styles as ta,artworks_tag_styles as ata where a.id = ata.artwork_id and ta.id = ata.tag_style_id and ta.name = 'Abstract'union
 select a.* from artworks as a,tag_subjects  as ta,artworks_tag_subjects  as ata where a.id = ata.artwork_id and ta.id = ata.tag_subject_id and ta.name = 'Abstract'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T19:32:59.087

它有点晚了，但这可能对某人有帮助。最后，找到了 rails 的做法。

```
scope :by_tags, lambda { |tag|
  includes(:tag_styles,:tag_subjects,:tag_arttypes).where('tag_styles.name LIKE ? OR tag_arttypes.name LIKE ? OR tag_subjects.name LIKE ?',"%#{tag}","%#{tag}","%#{tag}").
 select("DISTINCT artworks.*")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:28:53.803

如果我正确理解您的问题，它非常简单。像下面这样的东西会起作用：

```
scope :filter, lambda {|name| 
"
 (select a.* from artworks as a, tag_arttypes as ta, artworks_tag_arttypes as ata where a.id = ata.artwork_id and ta.id = ata.tag_arttype_id and ta.name = '#{name}') union
 (select a.* from artworks as a,tag_styles as ta,artworks_tag_styles as ata where a.id = ata.artwork_id and ta.id = ata.tag_style_id and ta.name = '#{name}')  union
 (select a.* from artworks as a,tag_subjects  as ta,artworks_tag_subjects  as ata where a.id = ata.artwork_id and ta.id = ata.tag_subject_id and ta.name = '#{name}')
"
} 
```

# java - Java：对 2.5M 字符串使用互斥 RegEx (15) 的有效方法？

> ID：13434971
> 
> 赞同：3
> 
> 时间：2012-11-17T21:31:14.773
> 
> 标签：java, regex

我的困境如下：我正在尝试将外部文件中的字符串与*互斥正则表达式*匹配（即一个字符串**不能**匹配多个正则表达式

您会建议什么算法让我将给定的字符串与保证不会与其他用例相交的 RegEx 匹配？

该程序在语法上是有效的，但是它存在重叠。文件中有 2.5m 行。

我正在考虑对文件中的每一行进行标记，然后为每个条件设置标志（因此，如果“x”包含 [AZ]+ 设置大写标志）

> *   正则表达式必须检查是否存在：
>     *   *标点*
>     *   *大写字母*
>     *   *小写字母*
>     *   *整数*

* * *

可能的用例：

```
U = Upper-case letter L = Lower-case letter P = Punctuation N = Number

---- null
U--- [A-Z]+
UL-- [A-Za-z]+
U-N- [A-Z0-9]+
ULN- [A-Za-z0-9]+
ULNP [\\p{Punct}\\sA-Za-z0-9]+
-L-- [a-z]+
-LN- [a-z0-9]+
--N- [0-9]
---P [\\p{Punct}\\s]+
U--P [\\p{Punct}\\sA-Z]+
-L-P [\\p{Punct}\\sa-z]+
--NP [\\p{Punct}\\s0-9]+
UL-P [\\p{Punct}\\sA-Za-z]+
U-NP [\\p{Punct}\\sA-Z0-9]+
ULNP [\\p{Punct}\\sA-Za-z0-9]+ 
```

到目前为止我所拥有的（效率低下，RegEx 重叠）

```
public static void main(String[] args) {
File file = new File("/home/tyler/workspace/PasswordAnalyzer/docs/test.txt");

try {
    Scanner scan = new Scanner(file);
    while (scan.hasNextLine()) {
        String s = scan.nextLine();
        /*****************************************
        * Evaluate password Strings using RegExs
        ******************************************/
        if(s.matches("[A-Z0-9]+")){
            //Upper-case & numeric

        } else if(s.matches("[a-z0-9]+")){
            //Lower-case & numeric

        } else if(s.matches("[A-Za-z0-9]+")){
            //Alphanumeric

        } else if(s.matches("[A-Za-z]+")){
            //Upper-case & lower-case

        } else if(s.matches("[0-9]+")){
            //Numeric

        } else if(s.matches("[A-Z]+")){
            //Upper-case

        }  else if(s.matches("[a-z]+")){
            //Lower-case

        } else if(s.matches("[\\p{Punct}\\s]+")){
            //Punctuation

        } else if(s.matches("[\\p{Punct}\\sA-Z]+")){
            //Punctuation & upper-case

        } else if(s.matches("[\\p{Punct}\\sa-z]+")){
            //Punctuation & lower-case

        } else if(s.matches("[\\p{Punct}\\s0-9]+")){
            //Punctuation & numeric

        } else if(s.matches("[\\p{Punct}\\sA-Za-z]+")){
            //Punctuation & alphabetical

        } else if(s.matches("[\\p{Punct}\\sA-Z0-9]+")){  
            //Punctuation & upper-case & numeric

        } else if(s.matches("[\\p{Punct}\\sa-z0-9]+")){
            //Punctuation & lower-case & numeric

        } else if(s.matches("[\\p{Punct}\\sA-Za-z0-9]+")){
            //Punctuation & alphanumeric

        } else {
            System.err.println("ERROR: unhandled RegEx");
        } 
    } //loop
} catch (FileNotFoundException fnfe){
    System.err.println(fnfe.getMessage());
}

}//main() 
```

修订：为 4 种可能的条件（大写、小写、数字、标点符号）设置标志，动态生成相应变量的名称，并相应递增。想法？

（main() 的底部）

```
public static void main(String[] args) {
File file = new File("/home/tyler/workspace/PasswordAnalyzer/docs/test.txt");
Analyzer a = new Analyzer(); //used by Java reflections object

try {
    Scanner scan = new Scanner(file);
    while (scan.hasNextLine()) {
        String s = scan.nextLine();
        //Flags
        boolean U_flag = false;
        boolean L_flag = false;
        boolean N_flag = false;
        boolean P_flag = false;

        for(int i=0; i<s.length(); i++){
            String c = s.substring(i, i);
            /*****************************************
             * Set flags (U,L,N,P)
             ****************************************/
            //U_flag (upper-case)
            if(c.matches("[A-Z]+")){
                U_flag = true;
            }
            //L_flag (lower-case)
            if(c.matches("[a-z]+")){
                L_flag = true;
            }
            //N_flag (numeric)
            if(c.matches("[0-9]+")){
                N_flag = true;
            }
            //P_flag (punctuation)
            if(c.matches("[\\p{Punct}\\s]+")){
                P_flag = true;
            }
            /*****************************************
             * Identify corresponding counter variable
             ****************************************/
            String dest = "";

            //U_flag
            if(U_flag){dest.concat("U");
            } else {dest.concat("_");}

            //L_flag
            if(L_flag){dest.concat("L");
            } else {dest.concat("_");}

            //N_flag
            if(N_flag){dest.concat("N");
            } else {dest.concat("_");}

            //P_flag
            if(P_flag){dest.concat("P");}

            //increment variable stored in dest (Java reflections?)

        }//for-loop
    } //while-loop
} catch (FileNotFoundException fnfe){
    System.err.println(fnfe.getMessage());
}

}//main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T22:52:09.973

就目前而言，你有很多重叠。例如，

```
U--- [A-Z]+
UL-- [A-Za-z]+
U-N- [A-Z0-9]+
ULN- [A-Za-z0-9]+
ULNP [\\p{Punct}\\sA-Za-z0-9]+ 
```

任何被第一个正则表达式匹配的字符串也将被任何后续表达式匹配。

如果我正确地解释了您的问题，那么您正在尝试通过它包含的不同字符类来表征每个输入字符串。例如，字符串`ABCDE`被描述为`U---`, while `Ab9b8`is `ULN-`。

为此，您所要做的就是（伪代码）：

```
for (String s in allStrings)
{
    int charClass = 0
    for (Char c in s.characters)
    {
        case c
            when upper-case: 
                charClas |= 8
                break;
            when lower-case: 
                charClas |= 4
                break;
            when numeric: 
                charClas |= 2
                break;                
            when punctuation: 
                charClas |= 1
                break;
    }
    // do something with charClass
} 
```

在“做某事”注释中`charClass`，作为位字符串的 的值将包含您的`ULNP`值。要将其转换为包含`U`、和的文字字符串`L`，您需要设置一个字符串数组`N``P`

```
String[] ulnpStrings = { "----","---P","--N-","--NP","-L--", "-L-P",... etc }; 
```

然后使用 的值`charClass`作为该数组的索引。要计算出现次数，请对数组执行相同操作

```
int[] ulnpCounts = new int[16]; 
```

并在每次迭代时根据 charClass 的值增加元素，因此

```
 ...
    // do something with charClass
    unlpCounts[charClass]++
}
for (int i=0; i<unlpStrings.length; i++)
{
    System.out.printf("%s %6d\n",unlpStrings[i],unlpCounts[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:09:38.327

试试这个：

```
Pattern p = Pattern.compile("^(?:([A-Z]+)|([a-z]+)|([0-9]+)|([\\p{Punct}\\s]+)|.)*$");
Matcher m = p.matcher("");
Scanner sc = new Scanner(new File("test.txt"));
while (sc.hasNextLine())
{
  String line = sc.nextLine();
  StringBuilder sb = new StringBuilder();
  if (m.reset(line).matches())
  {
    sb.append(m.start(1) > -1 ? "U" : "-");
    sb.append(m.start(2) > -1 ? "L" : "-");
    sb.append(m.start(3) > -1 ? "N" : "-");
    sb.append(m.start(4) > -1 ? "P" : "-");
  }
  System.out.printf("%s : %s%n", sb.toString(), line);
} 
```

样本输出：

```
U--- : AAAA
-L-- : aaaa
--N- : 2222
---P : %%%%
UL-- : AAAa
U-N- : AAA2
U--P : AAA% 
```

每种类型的字符都分配有自己的捕获组。该`start(int)`方法告诉了该组的最新捕获开始的位置；值`-1`表示该组未参加比赛。（您也可以使用`m.group(int) != null`.）

我没有对失败的比赛做任何事情，因为我不知道你想如何处理它。另外，请注意最后一个分支中的点匹配其他分支不匹配的任何内容，包括非 ASCII 字母、数字等。如果您想支持其他字符集，则必须使用 Unicode 类别，例如`\p{Lu}`，`\p{Ll}`， ETC..

# jquery - 如何使用 jquery 获取 id、class 或 name attr 元素

> ID：13434973
> 
> 赞同：4
> 
> 时间：2012-11-17T21:31:40.187
> 
> 标签：jquery, attr, html

我是 jquery 的新手。如何使用 jquery 获取元素的名称、ID 或类名。我正在尝试作为；

```
<div class="className" onclick="getname();"></div>
<div id="idName" onclick="getName();"></div>
<div name="attrName" onclick="getName()"></div>

function getName(){
attrName = $(this).attr("name");
alert(attrName);
} 
```

但不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:36:00.613

尝试这个：

**JavaScript**

```
$(function () {
    $('div').click(function () {
        var elem = $(this);
        alert('Class: ' + elem.attr('class'));
        alert('Id: ' + elem.attr('id'));
        alert('Name: ' + elem.attr('name'));    
    });​​​​
}); 
```

**HTML**

```
<div class="className" onclick="getname();"></div>
<div id="idName" onclick="getName();"></div>
<div name="attrName" onclick="getName()"></div> 
```

**CSS**

```
​div {
    width: 100px;
    height: 100px;
    border: 1px solid black;
}​ 
```

JSfiddle：http: [//jsfiddle.net/54ynV/](http://jsfiddle.net/54ynV/)

在上面的脚本中，我们附加到页面上每个 div 的点击事件`$('div').click...`。在回调中，我们得到它的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T21:36:10.930

首先使用 jQuery 你应该附加`click()`处理程序而不是使用过时的`onclick`属性。然后，您可以`this`按照函数中的方式使用关键字。

尝试这个：

```
<div class="className"></div>
<div id="idName"></div>
<div name="attrName"></div> 
```

```
$(function() {
    $("div").click(function() {
        var name = this.name;
        var cls = this.className;
        var id= this.id;

        alert("Name: " + name + " / Class: " + cls + " / Id: " + id);
    });
}); 
```

[**示例小提琴**](http://jsfiddle.net/tqxrV/)

您选择的属性都可以通过 POJS 获得，您也可以转换`this`为 jQuery 对象来获取其他属性，例如：

```
var title = $(this).attr('title');
var myattribute = $(this).data('myattribute'); // using HTML5: <div data-myattribute="foo"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T21:36:34.780

您需要传递对要获取其名称属性的元素的引用。尝试这个：

jQuery

```
function getName(me) {
    attrName = $(me).attr("name");
    alert(attrName);
}​ 
```

HTML

```
<div class="className" onclick="getname(this);">a</div>
<div id="idName" onclick="getName(this);">b</div>
<div name="attrName" onclick="getName(this)">c</div>​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/zuYLs/)**

现在您应该得到最后一个元素的名称，因为这是唯一有名称的元素。其他人会回来`undefined`。

# node.js - mongoose.js 服务器 - 查询数据的 res.write 不会将数据发送回客户端

> ID：13434974
> 
> 赞同：1
> 
> 时间：2012-11-17T21:31:44.743
> 
> 标签：node.js, mongoose

我正在尝试设置一个简单的猫鼬测试服​​务器来读取用户集合中的用户并打印用户名。我似乎无法让查询数据的 res.write 显示在客户端

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'bugtraq');
var schema = mongoose.Schema({ username : 'string', email : 'string' });
var User = db.model('User', schema);

var http = require('http');
http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});

    User.find().exec(function (err, users) {
        if(err) { res.write(err.message); }
        if(users) {
            users.forEach(function(u){
                console.log(u.username);
                return '<b>'+u.username+'</b>';
            });
        }
    });

    res.write('</body></html>');
    res.end();
}).listen(8124, "127.0.0.1");
console.log('Server running at http://127.0.0.1:8124/'); 
```

服务器端输出是

```
<html><head></head><body></body></html> 
```

我确实在控制台输出中看到了用户名

欢迎任何指点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:37:40.717

你有两个问题。首先，猫鼬查询是异步的，但是您在查询实际发生之前在它的回调之外结束您的响应（我必须重新缩进代码以确保）。

要使其工作，您需要在回调函数中结束响应`User.find`。

其次，你没有像你想象的那样收集输出。这一行是错误的：

```
return '<b>'+u.username+'</b>'; 
```

您正在`return`将 find 的输出变成稀薄的空气。如果您想在响应中返回它，您需要捕获它。

放在一起，它可能看起来像这样：

```
User.find().exec(function (err, users) {
    if(err) { res.write(err.message); }
    if(users) {
        // here make a buffer to store the built output ...
        var output = [];
        users.forEach(function(u){
            // (you saw this console output because this loop is happening, it's
            // just happening after your response has been ended)
            console.log(u.username);

            // ... then in each iteration of the loop, push to the buffer
            output.push('<b>'+u.username+'</b>');
        });
    }

    // finally, finish the response in the `find` callback.
    res.end(output.join() + '</body></html>');
}); 
```

# python - Django south 看不到子模块中的任何字段

> ID：13434975
> 
> 赞同：2
> 
> 时间：2012-11-17T21:31:45.227
> 
> 标签：python, django, django-south

我有这样的文件夹系统：

```
project_name:
  plugins
    link
      templates
      cms_plugin.py
      models.py
      view.py
      ....
    gallery
    ... 
```

我想对链接模块使用迁移，但是当我这样做时：

```
./manage schemamigration --initial plugins.link 
```

south 创建一个空文件`initial.py`（`models.py`不为空，并且`syncdb`可以很好地使用它）。

```
import datetime
from south.db import db
from south.v2 import SchemaMigration
from django.db import models

class Migration(SchemaMigration):

  def forwards(self, orm):
    pass

  def backwards(self, orm):
    pass

  models = {

 }

 complete_apps = ['link'] 
```

如果我在`models.py`- south 改变一些东西 说：

```
./manage.py schemamigration --auto plugins.link 
```

似乎什么都没有改变。

我尝试添加`app_label = 'cmsplugin'`，然后向南运行`app_label`：

```
./manage.py schemamigration --initial cmsplugin.link 
```

但它给了我同样的结果，

我究竟做错了什么？如何为子模块创建迁移？

# c - C homework - trojan found when compiling the code

> ID：13434977
> 
> 赞同：6
> 
> 时间：2012-11-17T21:32:03.837
> 
> 标签：c, trojan

I was coding some homework (101 level). When I tried to compile the code, I got some virus alert from bit defender:

```
#include <stdio.h>

int main ( void ) {
int numbers [10];
int i, temp;

for (i = 1; i <= 10; ++i)
    numbers[i] = 0;

printf("Enter up to 10 integers. input '-1' to finish \n");

for (i = 0; i < 10; i++) {
    scanf("%d", &temp);
    if (temp == -1) {
        break;
    } else {
        numbers [i] = temp - 1;
    }
}

for (i = 1; i <= 10; ++i)
    printf("the numbers are: %d\n", numbers[i]);

return 0;
} 
```

![virus alert print screen](../Images/e8fb8bc2f45941ba6d6aea08c83f9381.png)

I believe the problem is with this piece of code:

```
 for (i = 1; i <= 10; ++i)
        numbers[i] = 0; 
```

Why the trojan virus alert? what did I do?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T21:34:14.383

Don't pay attention some antivirus programs recognize the compiled items as virus, it does the same avast with visual studio, just add exception to your antivirus list. But your code has some problems indeed.

*   `for (i = 1; i <= 10; ++i)` is incorrect, because the arrays in C start on 0, and second to initialize variables you don't need to do for loops you can assign them values like any other variable.
*   `numbers [i] = temp - 1` The way you store the values in the array is not so good, because you are altering the inputed values when you do -1.

a

```
/*For the array initialization.*/
int numbers[10] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }; 
```

* * *

```
/*For inputing the values.*/

for ( i = 0; i < 10; i++ ){
    scanf( "%d", &temp );
    if( temp == -1 ){
        numbers[ i ] = -1;
        break;
    else{
        numbers[ i ] = temp;
    }
} 
```

* * *

```
/*For the printing. */

for( i = 0; i < 10 ; i++ ){
    if( numbers[ i ] == -1 ){
        break;
    }
    printf( "numbers[%d] is %d", i, numbers[ i ] );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T21:34:06.807

you trigger a buffer-overflow. your array 'numbers' is 10 items big, you access the 11th item.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T21:34:41.653

Use `i=0` instead of `i =1` because in C array indexes start at `0`

size of array is 10 so the last index is `9` So you are accessing the array index which is out of bound in `numbers[10]`, so it's `undefined behaviour`

Array would be like this :

`numbers[0] ,numbers[1], . . . numbers[9]`

modify code to this :

```
for(i=0;i<10;i++)
  printf("%d\t",numbers[i]); 
```

# ios - 为我的 iPhone 应用程序制作登录屏幕

> ID：13434979
> 
> 赞同：-3
> 
> 时间：2012-11-17T21:32:31.917
> 
> 标签：ios, xcode, uiview, uiviewcontroller

我在为我的应用程序制作登录屏幕时遇到了一些困难。首先，我是一个菜鸟……我实际上是在创造这种学习形式……我的应用程序是一个简单的计算器……所以……
我需要知道的第一件事是：我应该使用哪个模板一种应用程序（具有多个视图的应用程序）
其次是：如何实现新视图？
第三：如何在视图之间转换？

这里的重点不是登录屏幕，而是视图之间的转换！谢谢大家的支持！

ps：我使用的是最新版本的 xcode 和 iOS 开发库...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:45:54.457

您可以查看[此示例](http://www.techotopia.com/index.php/Using_Xcode_Storyboarding_%28iPhone_iOS_5%29)以了解基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:43:44.277

我建议您查看 iTunes U 中的[Stanford iOS Lectures](https://itunes.apple.com/us/itunes-u/developing-apps-for-ios-sd/id395631522)（可免费下载）。实际上在 Lecture 2 中有一个计算器应用程序的示例。这是一个很好的起点。

# php - MAMP 或手动配置 Mac 上的所有内容

> ID：13434980
> 
> 赞同：1
> 
> 时间：2012-11-17T21:32:35.193
> 
> 标签：php, mysql, apache, mamp

我只是想在这里问一下，看看其他人对此有何看法。

两天前我亲自安装了 MAMP，因为我在 MBP Retina 上安装和配置所有东西时遇到了很多麻烦。

我在使用 phpmyadmin 时遇到了问题，2 个月后我意识到我需要单独安装 mcrypt，而当我想升级 php 时，有很多事情要处理......

我就是受不了这一切，所以我认为最好使用 MAMP 然后配置所有这些。

也许我错了，也许最好手动完成所有这些？

还有什么区别？我认为唯一的区别是您依赖 MAMP 的开发人员使用最新的 php、mysql、apache 来更新它……但不要着急！

对不起，如果它是双重职位，只是找不到它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:40:15.997

我永远不会在 OS X 上使用 MAMP。只需使用包管理器来安装所有内容，然后您就可以对其进行配置。尽管在大多数情况下，它将开箱即用。无论如何，至少对于macports，这是我使用的。还有 Fink 和 Homebrew。我听说（这是前段时间）芬克的包裹滞后，所以我不知道我是否走那条路。很多人都喜欢使用 Homebrew，但我不喜欢它，因为它可以与系统软件一起使用，而且我更喜欢独立安装所有东西。不过，这确实是一个偏好。

也不要使用 phpmyadmin ......只需使用类似[Sequel Pro](http://www.sequelpro.com/)的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:35:08.120

是的，你说的是对的。唯一的区别是版本和使用的特殊模块/插件/插件，例如 PHP 扩展等。除此之外没有任何区别。如果您手动操作，那么我建议您使用自制软件。

# java - 使用 -C 标志创建 jar

> ID：13434981
> 
> 赞同：1
> 
> 时间：2012-11-17T21:32:40.607
> 
> 标签：java, jar, command-line-arguments

我正在尝试使用 -C 标志从命令行创建一个 Jar 文件，但每次它都会返回一个帮助屏幕。我正在给出以下命令。

```
user@ubuntu:~/CDH/JAVA_WORKSPACE/JAVA-SETUP$ jar cvfm ./build/jar/Setup.jar MANIFEST -C build/classes/com/demo/Setup.class 
```

如果我删除 -C 命令，那么它会很好地归档。但是如果有 -C 标志，那么它总是返回 jar 帮助页面。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:28:43.867

您的命令行选项是：

```
-C build/classes/com/demo/Setup.class 
```

jar 工具希望目录名称跟在 -C 之后，然后是文件。您需要两个词来跟随“-C”，如下所示：

```
-C build/classes/com/demo Setup.class 
```

# jsp - 在 Java EE Servlet Webapp 中使用 JRuby 替换 JSP

> ID：13434984
> 
> 赞同：2
> 
> 时间：2012-11-17T21:33:23.047
> 
> 标签：jsp, jboss, jruby, torquebox, trinidad-gem

我一直在使用新的 Torquebox (JBOSS) 应用程序服务器，并且喜欢我目前所看到的，但是 ruby​​ 应用程序似乎与 java webapps 是隔离的。就像它们作为单独的 web 应用程序在孤岛中运行并且混合它们是模糊的，尽管我读到会话可以共享......这很酷。

我有一个以 Java EE Servlet JSP 样式构建的传统 Web 应用程序，我希望能够使用 ruby​​ 作为我的表示层逻辑，而不是正在使用的 JSP。

我应该能够从 Web 请求上下文运行 ruby​​ 资源。就像 apache mod_ruby 开始处理 rhtml...（目标：让 tomcat 或 JBoss 这样做，所以 trinidad 或 torquebox）

例如，我可以用 HelloWorld.rhtml 或 .rb 替换 HelloWorld.jsp（可以调用我的 java 包...）？它也可以调用我的 java 类，因为它是 JRuby ......

到目前为止，我可以单独创建 RoR 应用程序和 sinatra，但是......我想要 Java webapp 中的 ruby​​ 而不是 ruby​​ webapp 中的 Java。

有谁知道我现在问的问题是否可以用 Torquebox 或 Trinidad 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:41:26.780

你当然可以做到，但你需要做一些练习来准备东西。

因为您希望它是使用 Ruby 的 Java Web 应用程序，而不是使用 Java 的 Ruby 应用程序，您只需将**jruby-complete.jar**添加到您的 CLASSPATH 中（假设您不需要任何 gem，您将拥有 stdlib - ERB 就在那里） . 如果你确实需要 gem，你可以用 Warbler 打包一个 gem.jar。

与在 Java 方面相比，您需要编写一个集成层，将您的*MC*与*V*连接起来（对于 Ruby :)）......例如，在控制器中“渲染”时，您需要从 Java 执行一些 Ruby 代码一个选项正在使用[http://jruby.org/apidocs/org/jruby/embed/ScriptingContainer.html](http://jruby.org/apidocs/org/jruby/embed/ScriptingContainer.html)或者您可以（引导和）`org.jruby.Ruby`直接使用 API。

而不是获取 erb 输出并将其转换为 Java 字符串/io，这应该最终成为您的响应主体......当然这是一个“概念性”答案，将会有一些（也许很多）障碍需要解决马路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:02:15.053

你仍然会被 JSP 卡住。

一种选择是重用 JRuby 的 jar，但我怀疑这会增加很多。

> 我有一个以 Java EE Servlet JSP 样式构建的传统 Web 应用程序，我希望能够使用 ruby​​ 作为我的表示层逻辑，而不是正在使用的 JSP。

不去上班。Ruby 不用于演示。Rails 框架允许`erb.html`执行 ruby​​，但在页面加载时会发生一次。其余的主要是用于演示的 Rails Helpers/JQuery。

所以，让我们假设你得到了这个工作。你打算如何处理这些红宝石变量？我认为这会导致死胡同，因为您对 JSP 无能为力。

真正的问题是你想用Java\JavaScript 做不到的Ruby 做什么？

对于演示，我建议您研究有助于以 JSP 友好方式编​​写标记的方法。类似 IceFaces 的东西。根据您的建议，您仅限于表达语言。

# ruby - Ruby Gem 安装问题

> ID：13434985
> 
> 赞同：1
> 
> 时间：2012-11-17T21:33:24.393
> 
> 标签：ruby, rubygems

我正在使用 Mac OS X (Lion) 附带的 Ruby 1.8.7 的“库存”版本，当我尝试安装 Rails 时，出现缺少头文件的错误。我该如何解决？

谢谢

```
sudo gem install rails

Building native extensions.  This could take a while...
ERROR:  Error installing rails:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:21:55.980

XCode“命令行工具”包不仅包括编译器，还包括许多不同包的开发头文件，包括 Ruby。

该`gem`工具确实应该在盲目地尝试执行之前检查它的存在，但似乎并非如此，相反，您会收到这样的神秘消息。

# java - AsyncTask 不返回 TreeMap

> ID：13434986
> 
> 赞同：1
> 
> 时间：2012-11-17T21:34:06.500
> 
> 标签：java, android, android-asynctask, treemap

我有一个不起作用的代码！AsyncTask 需要返回 TreeMap < Integer, List< String >> 但通过我的日志记录我看到它没有。它只是卡住了！

这是代码：

```
private class ParseSite extends
        AsyncTask<String, Void, Map<Integer,List<String>>> {
    Map<Integer,List<String>> quotes;
    List<String> tmpInfo;
    List<String> tmpText;

    @Override
    protected Map<Integer,List<String>> doInBackground(String... arg) {
        // List<String> output = new ArrayList<String>();

        quotes = new TreeMap<Integer,List<String>>();

        try {
            HTMLHelper hh = new HTMLHelper(new URL(arg[0]));
            List<TagNode> qText = hh.getContentByClass("content");
            Logger.l(Logger.TAG_DBG, "GOT qText");
            List<TagNode> qInfo = hh.getContentByClass("sm");
            Logger.l(Logger.TAG_DBG, "GOT qInfo");
            tmpInfo = new ArrayList<String>();
            tmpText = new ArrayList<String>();

            for (Iterator<TagNode> iterator = qText.iterator(); iterator
                    .hasNext();) {
                TagNode divElement = iterator.next();
                String tmp = divElement.getText().toString();
                tmp = tmp.replaceAll("&lt;", "<");
                tmp = tmp.replaceAll("&gt;", ">");
                tmp = tmp.replaceAll("&quot;", "" + (char) 34);

                tmpText.add(tmp);
                Log.i(Logger.TAG_INF, tmp);
            }
            Logger.l(Logger.TAG_DBG, "tmpText[" + tmpText.size() + "] Filled");
            quotes.put(1, tmpText);
            for (Iterator<TagNode> iterator = qInfo.iterator(); iterator
                    .hasNext();) {
                TagNode divElement = iterator.next();
                String tmp = divElement.getText().toString();

                tmpInfo.add(tmp);
                Log.i(Logger.TAG_INF, tmp);
            }
            Logger.l(Logger.TAG_DBG, "tmpInfo[" + tmpInfo.size() + "] Filled ");
            quotes.put(2, tmpInfo);
            Logger.l(Logger.TAG_DBG, "quotes Filled");
        } catch (Exception e) {
            e.printStackTrace();
        }
        Logger.l(Logger.TAG_DBG, "Returning quotes...");
        return quotes;
    }

    @SuppressWarnings("unused")
    protected void onPostExecute(List<String> output) {
          pd.dismiss();
          Logger.l(Logger.TAG_DBG, "Setting adapter...");
          listView.setAdapter(new QuotesArrayAdapter(HTMLParser.this,
              quotes));
        }
} 
```

通过 LogCat 我**可以**看到我的“返回引号...”但我**看**不到“设置适配器...”并且 ProgressDialog pd 不会关闭。

顺便说一句，对不起我的英语不好。我是俄国人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:37:21.077

编译器正在警告您，但您选择忽略它：

```
@SuppressWarnings("unused") 
```

编译器知道这个方法永远不会被使用，因为你声明它是错误的。将其更改为：

```
@Override
protected void onPostExecute(Map<Integer,List<String>> output) {
      pd.dismiss();
      Logger.l(Logger.TAG_DBG, "Setting adapter...");
      listView.setAdapter(new QuotesArrayAdapter(HTMLParser.this,
          quotes));
} 
```

注意参数的类型和`@Override`注释。使用此注释将确保您正确地覆盖方法，如果您没有提供错误，则会给出错误。

# java - 在内核上编写基本的 java shell 或 GUI

> ID：13434990
> 
> 赞同：1
> 
> 时间：2012-11-17T21:34:31.600
> 
> 标签：java, shell, user-interface, operating-system, kernel

作为一种爱好，我一直在用java编写一个shell。这是非常基本的，它包括通过命令行或通过类似桌面的环境（如果安装了插件（我也写过））来创建、删除、读取文件。

现在我的问题是一个非常复杂的问题，但我希望有人能指出我正确的方向。

*   那里有没有支持java的层或操作系统，所以我可以在它上面运行我的java应用程序，作为一个shell？最小的东西？

我还没有完全理解 java 中的库继承，而且我不确定 AWT 和 swing 应用程序是否是为那里的主要操作系统构建的。

有人可以指出我正确的方向吗？我只是想在这里学习，我并不完全了解我的java程序下层的全部细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:23:13.040

（至少）有 2 个示例在操作系统级别支持 Java

*   Sun 有一个称为 JavaOS 的裸机操作系统，但该操作系统已不再可用。我不记得确切的细节，但我认为目标架构是某种嵌入式处理器。

*   [有一个名为JNode](http://jnode.org)的开源裸机 Java 操作系统，它在 x86 上运行。它已经有一个命令外壳（“bjorne”外壳）和一个原始的 GUI。

JNode 的坏消息是它没有有效的“隔离”实现，因此不可能阻止有缺陷的应用程序使操作系统崩溃。这已成为前进的障碍……尤其是因为可行的隔离实现可能需要重新设计系统架构以支持每个隔离的单独地址空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T23:42:32.690

Java 不直接与操作系统交互，而是使用 Java VM 作为 Java 应用程序和托管操作系统之间的中介。拥有这个 VM 允许 Java 应用程序是可移植的，因为它抽象了操作系统的细节。Java VM 实现因不同的操作系统而异，但这可能不是您应该担心的；该虚拟机可用于大多数主要操作系统并已分发，只需从[http://www.java.com](http://www.java.com)下载并安装适合您的虚拟机。之后，您可以自由地使用您的应用程序。