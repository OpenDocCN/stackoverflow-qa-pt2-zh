# StackOverflow 问答 15453000-15453999

# java - 如何将 Eclipse GAE 项目迁移到 Maven，使其不与 Eclipse 绑定？

> ID：15453001
> 
> 赞同：2
> 
> 时间：2013-03-16T18:27:48.557
> 
> 标签：java, google-app-engine, maven

我有一个开源的 Eclipse Google App Engine 项目（它叫做 LastCalc，它是开源的，你可以在[这里](https://github.com/sanity/LastCalc)找到它，使用 GAE Eclipse 插件创建。

问题是几个月前我将 IDE 切换到 IntelliJ IDEA。因为我的大多数项目都是基于 Maven 的，所以这不是问题，但 LastCalc 固执地与 Eclipse 联系在一起。

我希望有人可以提出一种简单的方法来将此项目迁移到 Maven，以便它在 IDEA 和 Eclipse 中都能很好地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:15:42.903

我们发布了[应用引擎 maven 插件](https://developers.google.com/appengine/docs/java/tools/maven)和带有该插件的[gustbook 示例](https://github.com/GoogleCloudPlatform/appengine-guestbook-java)。我不认为手动迁移非常困难。您可以创建类似于我们的留言簿示例的目录结构并复制您的源文件和资源文件。依赖可能有点麻烦，所以也许你可以试试新版本 m2eclipse 的“转换为 Maven 项目”功能。

# lua - (Lua) 用非数值做数学运算

> ID：15453002
> 
> 赞同：2
> 
> 时间：2013-03-16T18:27:52.943
> 
> 标签：lua

我想为 Lua 制作某种 Vector3 库，它可以让您使用简单的语法进行简单的 3D 位置操作。我会提到我正在使用 Luaj 来运行 Lua 代码以进行 Java 操作。

这是我的开始代码：

```
Vector3 = {
new = function (x1, y1, z1)
  return {x = x1, y = y1, z = z1}
end
}

Position1 = Vector3.new(1, 5, 8)
Position2 = Vector3.new(4, 7, 2) 
```

这就是我希望能够发生的事情：

```
Subtraction = Position1 - Position2
print(Subtraction.x, Subtraction.y, Subtraction.z) -- prints "-3, -2, 6" 
```

关于使 EXACT 代码正常工作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:50:34.153

你可以这样做：

```
Vector3 = {}

mt = {}

function Vector3:new(_x, _y, _z)
  return setmetatable({
    x = _x or 0, 
    y = _y or 0,
    z = _z or 0
  }, mt)
end

mt.__sub = function(v1, v2) return Vector3:new(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z) end
mt.__tostring = function(v) return "Vector3=(" .. v.x .. "," .. v.y .. "," .. v.z .. ")" end
mt.__index = Vector3 -- redirect queries to the Vector3 table

-- test Vector3
Position1 = Vector3:new(1, 5, 8)
Position2 = Vector3:new(4, 7, 2)
Sub = Position1 - Position2
print(Sub) 
```

这将打印：

```
矢量3=(-3,-2,6)
```

有关 Lua 和 OO 的更多信息，请参阅： http: [//lua-users.org/wiki/ObjectOrientationTutorial](http://lua-users.org/wiki/ObjectOrientationTutorial)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T18:50:42.517

这就是元表和元方法的用途。您应该阅读[文档](http://www.lua.org/pil/13.html)。

基本上，它们让您重新定义运算符（和其他一些事情）对您的价值观所做的事情。你现在想要的是定义元`__sub`方法，它定义了如何处理`-`操作符。我想将来你也会想重新定义其他元方法。

`Vector3`首先，在你的“类”中定义一个减法函数，它需要两个向量：

```
function Vector3.subtract(u,v)
    return Vector3.new(u.x - v.x, u.y - v.y, u.z - v.z)
end 
```

然后创建让`Vector3`知道它应该提供所有向量的元表：

```
Vector3.mt = {__sub = Vector3.subtract} 
```

当您创建一个新向量时：

```
new = function (x1, y1, z1)
    local vec = {x = x1, y = y1, z = z1}
    setmetatable(vec, Vector3.mt)
    return vec
end 
```

您还可以使元表 ( `mt`) 成为函数内部的局部变量`new`- 这将防止外部代码与元表混淆（因为它只能由您的`new`函数访问）。但是，将它放在里面`Vector3`可以让您检查以下用法`v - "string"`：

```
function Vector3.subtract(u,v)
    if getmetatable(u) ~= Vector3.mt or
       getmetatable(v) ~= Vector3.mt then
        error("Only vectors can be subtracted from vectors", 2)
    end
    return Vector3.new(u.x - v.x, u.y - v.y, u.z - v.z)
end 
```

# javascript - 在 HTML5 中选择多个

> ID：15453008
> 
> 赞同：4
> 
> 时间：2013-03-16T18:28:12.397
> 
> 标签：javascript, html, forms

我是 HTML5 的新手，我正在尝试使用Google Chrome 上的表单中`<select>`的属性来测试。`multiple`我遇到两个问题。

1.  **首先，选项列表在一个丑陋的矩形中变化**

    ![具有多个属性的丑陋矩形](../Images/c1df8b1b1f621f87a51185e3165c773e.png)

    而之前它是“正常的”：

    ![](../Images/edd20dc694322bc9e3c140fd766b7ef1.png)

2.  我的第二个问题是，似乎当我想获取选择的值时（通过单击按钮并在使用 javascript 的代码中），只给出一个......

这是我的代码：

```
<!DOCTYPE html>
<html>
<body>

How do you travel?
<form  method="get" id=myForm" onsubmit="done();">
<select name="transport" multiple> <optgroup label="Ecological">
<option value="Feet" selected>By Foot</option>
<option value="Bike">By Bike</option> </optgroup>
<optgroup label="Non-ecological">
<option value="public transports">With public transports</option> <option value="motorbike">By motorbike</option> <option value="car">By car</option>
</optgroup> </select>

<button onclick="bdone();">button</button>

<script>

function bdone(){

var mesOptions=document.getElementsByTagName('select')[0];
alert(mesOptions.value); 
}

</script>
</body>
</html> 
```

谢谢你读我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T18:33:03.353

1.  **造型问题**

    请注意：元素的`multiple`属性`select`不是专门的*HTML5*。

    样式将取决于正在应用的 CSS 样式，包括用户代理样式（默认浏览器样式）和该页面上的特定 CSS。尝试将其单独放在页面中（或放在[jsFiddle](http://jsfiddle.net)中，看看是否获得相同的样式。

2.  **选择题**

    你得到的元素的`selectedOptions`属性`select`将包含一个 s 数组`HTMLOptionElement`，所有这些都具有该`value`属性。见下文：

    ## [jsFiddle](http://jsfiddle.net/AaronBlenkush/dPHmq/1/ "jsFiddle")

```
 function bdone(){
        var selectElem = document.getElementsByTagName('select')[0]
        var mesOptions = selectElem.selectedOptions;
        for(var a=0;a<mesOptions.length;a++) {
            alert(mesOptions[a].value);
        }
    } 
```

# php - PHP 报告但没有来自 HTML 的数据

> ID：15453015
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:28:46.513
> 
> 标签：php, html

提前感谢您提供的任何帮助。我束手无策，无法弄清楚我做错了什么。我已经为此工作了几天，现在在一堵砖墙上。似乎应该很简单，但事实并非如此:-(

```
<body>
<?php
$name = $_POST['Name:'];
$email = $_POST['E-mail:'];
$phone = $_POST['Phone:'];
$message = $_POST['Message:'];

//Sending Email to form owner
$header = "From: $email_to\n";
$header .= "Reply-To: $email\n";
$subject = "Submission From My Form";
$email_to = "your@email.us";
$message = "Name: $name\n"."E-mail: $email\n"."Phone: $phone\n"."Message: $message\n";
mail($email_to, $subject, $message, $header);

?>
<h1>Thank You for Your Submission</h1>

<p> Your information has been sent.</p>

</article>
        <article class="grid_8 omega last-col">
          <div class="pad_box2">
            <h2 class="ind3">Get in Touch</h2>
             <form method="post" id="contact-form" action="Contacts.php">
                <div class="success">Contact form submitted!<br>
                    <strong>We will be in touch soon.</strong>
                </div>
                <fieldset>
                  <label class="name">
                    <input type="text" value="Name:">
                      <span class="error">*This is not a valid name.</span> <span class="empty">*This field is required.</span>
                  </label>
                  <label class="email">
                    <input type="text" value="E-mail:">
                      <span class="error">*This is not a valid email address.</span> <span class="empty">*This field is required.</span>
                  </label>
                  <label class="phone">
                    <input type="text" value="Phone:">
                      <span class="error">*This is not a valid phone number.</span> <span class="empty">*This field is required.</span>
                  </label>
                  <label class="message">
                    <textarea>Message:</textarea>
                      <span class="error">*The message is too short.</span> <span class="empty">*This field is required.</span>
                  </label>
                  <div class="buttons2">
                      <a href="#" data-type="reset" class="link1">Clear</a>
                      <a href="#" data-type="submit" class="link1">Submit</a>
                  </div>
                </fieldset>
              </form>
          </div>
        </article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:46:35.443

您有多种方式的错误：

首先，所有行都`$name = $_POST['Email:'];`应该是例如：

```
$email = isset($_POST['email']) ? $_POST['email'] : ''; 
```

然后，您将创建相应的表单字段，如下所示：

```
Email: <input type="text" name="email" value="<?php echo htmlspecialchars($email);?>"> 
```

然后，电子邮件发送本身必须被一些 POST 和错误检查所包围。你的错误输出`*This is not a valid name.`总是在那里，等等......

老实说，看起来你应该从更基本的东西开始——**无意冒犯**！这里的任何人都无法帮助您，因为您需要的是一个好的教程。网上有很多这样的教程，可以帮助你在学习几天后掌握你的问题：）

# javascript - 动态生成的 HTML，生成的事件与静态脚本

> ID：15453020
> 
> 赞同：1
> 
> 时间：2013-03-16T18:29:18.920
> 
> 标签：javascript, jquery, html

当从服务器生成 HTML 时，例如，通过`echo`PHP，分配事件是否更好：

```
<div>
    <input type="button" onclick="Click(123)"/>
</div>

function Click(x)
{
    var id = x;
    //Do Ajax Call
} 
```

或者在 JQuery/JavaScript 中声明事件...

```
<div id="123">
    <input type="button" class="myButton"/>
</div>

$(".myButton").click(function(){

   //Fetch the ID as well
   var parentID = $(this).parent('div').attr('id');
   //Then do an Ajax Call

}); 
```

哪个是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:34:39.413

第二种方法更好..因为 web 2.0 标准建议使用不显眼的 JS 而不是 onevent 属性....但是由于元素是动态生成的...您的第二种方法可能不起作用...您需要 io 将您的点击事件委托给最近的静态父使用`on`

```
$(document).on('click',".myButton",function(){

  //Fetch the ID as well
  var parentID = $(this).parent('div').attr('id');
 //Then do an Ajax Call

}); 
```

阅读更多关于[on()](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:34:52.307

是否动态生成 HTML 没有区别。无论哪种方式，您通常都应该更喜欢使用[不显眼的 Javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

另请参阅：[为什么在 HTML 中使用 onClick() 是一种不好的做法？](https://stackoverflow.com/questions/5871640/why-is-using-onclick-in-html-a-bad-practice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:36:58.067

The second method is better because a) you don't have to edit your HTML code and b) you have better possibility how to handle your events from your JS code.

# haskell - 抽象数据类型

> ID：15453024
> 
> 赞同：0
> 
> 时间：2013-03-16T18:29:40.847
> 
> 标签：haskell, matrix, abstract-data-type

我正在尝试理解抽象数据类型。在下面的代码中，我应该为抽象数据类型编写一个函数。`createMatrix`接受 x 行和 y 列的数量以及一些元素 z 的元组，并用该元素填充矩阵。

我是 Haskell 的新手，对所有基础知识都很好，但对如何为抽象数据类型实现此功能感到非常困惑。

我将非常感谢有关如何执行此操作的任何建议。

提前谢谢了！

```
newType Matrix a = Mat ((Int, Int), (Int,Int) -> a)

createMatrix (x,y) z = 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:54:05.433

你已经做到了

```
createMatrix (x,y) z = {-TODO-} 
```

明显的下一步是

```
createMatrix (x,y) z = Mat ( {-TODO-} , {-TODO-} ) 
```

为什么这应该是显而易见的？

*   你的函数返回一个 type 的值`Matrix a`；this 只有一个构造函数，`Mat`: 所以这个值必须从这个开始。
*   构造`Mat`函数采用单个值，一对。我们手头没有一对正确的类型，所以我们必须做一个。同样，只有一个构造函数`( , )`，所以这就是我们使用的。

重要的是，我只是通过遵循类型来完成此操作（并假设您没有准备好调用的任何辅助函数）。

# java - 使用java删除文件

> ID：15453026
> 
> 赞同：0
> 
> 时间：2013-03-16T18:29:53.087
> 
> 标签：java

```
 import java.io.*;

public class FileChecker {

   private static final String FILE_DIR = "F:/study/";
   private static final String FILE_TEXT_EXT1 = ".pdb";
   private static final String FILE_TEXT_EXT2 = ".ali";
   private static final String FILE_TEXT_EXT3 = ".txt";
   private static final String FILE_TEXT_EXT4 = ".py";
   private static final String FILE_TEXT_PREFIX1 = "target.";
   private static final String FILE_TEXT_PREFIX2 = "blastOutput.";
   //private static final String FILE_TEXT_PREFIX3 = "1OPL.";

  //public static void main(String args[]) 
   public FileChecker()
   {
/*new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT1);
        new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT2);
        new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT3);
       new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT4);
      new FileChecker().deleteFile2(FILE_DIR,FILE_TEXT_PREFIX1);
        new FileChecker().deleteFile2(FILE_DIR,FILE_TEXT_PREFIX2);
        new FileChecker().deleteFile2(FILE_DIR,FILE_TEXT_PREFIX3);*/
   }

   public void deleteFile(String folder, String ext){

     GenericExtFilter filter = new GenericExtFilter(ext);
     File dir = new File(folder);

     //list out all the file name with .txt extension
     String[] list = dir.list(filter);

     if (list.length == 0) return;

     File fileDelete;

     for (String file : list){
    String temp = new StringBuffer(FILE_DIR).append(File.separator).append(file).toString();
        fileDelete = new File(temp);
        boolean isdeleted = fileDelete.delete();
        System.out.println("file : " + temp + " is deleted : " + isdeleted);
     }
   }
 public class GenericExtFilter implements FilenameFilter {

       private String ext;

       public GenericExtFilter(String ext) {
         this.ext = ext;             
       }

       public boolean accept(File dir, String name) {
         return (name.endsWith(ext));
       }
    }

 public void deleteFile2(String folder, String prefix){

     GenericExt filter = new GenericExt(prefix);
     File dir = new File(folder);

     //list out all the file name with .txt extension
     String[] list = dir.list(filter);

     if (list.length == 0) return;

     File fileDelete;

     for (String file : list){
    String temp = new StringBuffer(FILE_DIR).append(File.separator).append(file).toString();
        fileDelete = new File(temp);
        boolean isdeleted = fileDelete.delete();
        System.out.println("file : " + temp + " is deleted : " + isdeleted);
     }
   }
 public class GenericExt implements FilenameFilter {

       private String prefix;

       public GenericExt(String prefix) {
         this.prefix = prefix;             
       }

       public boolean accept(File dir, String name) {
         return (name.startsWith(prefix));
       }
    }  

 public void deleteFile3(String ID, String Chain)
 {
     File file = new File(ID+".pdb");
     if(file.delete())
     {
     System.out.println(ID+"deleted");
     }
     File file2 = new File(Chain+".pdb");
     if(file2.delete())
     {
      System.out.println(Chain+"deleted");
     }

 }

} 
```

此代码是从另一个类调用的。当我的几个代码应该继续运行时..当我尝试删除具有特定文件扩展名的文件时，它不会专门删除两个 pdb 文件。我也尝试使用 file.close() 关闭它们，然后在知道整个文件名和扩展名时再次删除它们，但再次无济于事。

```
 String FILE_DIR = "F:/study";
    String FILE_TEXT_EXT1 = ".pdb";
  String FILE_TEXT_EXT2 = ".ali";
  String FILE_TEXT_EXT3 = ".txt";
  String FILE_TEXT_EXT4 = ".py";
    String FILE_TEXT_PREFIX1 = "target.";
  String FILE_TEXT_PREFIX2 = "blastOutput.";
 //  String FILE_TEXT_PREFIX3 = "1OPL.";

new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT1);
        new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT2);
        new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT3);
       new FileChecker().deleteFile(FILE_DIR,FILE_TEXT_EXT4);
      new FileChecker().deleteFile2(FILE_DIR,FILE_TEXT_PREFIX1);
        new FileChecker().deleteFile2(FILE_DIR,FILE_TEXT_PREFIX2);
   // new FileChecker().deleteFile2(FILE_DIR,FILE_TEXT_PREFIX3);
        BufferedWriter bw = new BufferedWriter(new FileWriter(FILE_DIR+TemplatePDBID+".pdb", true));
    bw.close();
    BufferedWriter bw1 = new BufferedWriter(new FileWriter(FILE_DIR+Template+".pdb", true));
    bw1.close();
    new FileChecker().deleteFile3((FILE_DIR+TemplatePDBID), (FILE_DIR+Template)); 
```

这是最后调用我的 FileChecker 类的另一个类的片段。

我正在粘贴我收到的内容

```
file : F:/study\1OPL.pdb is deleted : false
file : F:/study\1OPL_A.pdb is deleted : false
file : F:/study\model.pdb is deleted : true
file : F:/study\alignment.ali is deleted : true
file : F:/study\tempAli.ali is deleted : true
file : F:/study\1OPL.fasta.txt is deleted : true
file : F:/study\ModelDescription.txt is deleted : true
file : F:/study\ModellerOutput.txt is deleted : true
file : F:/study\script.py is deleted : true
file : F:/study\target.D00000001 is deleted : true
file : F:/study\target.ini is deleted : true
file : F:/study\target.rsr is deleted : true
file : F:/study\target.sch is deleted : true
file : F:/study\target.V99990001 is deleted : true
file : F:/study\blastOutput.xml is deleted : true 
```

请帮我解决这个异常。我无法理解为什么它在所有情况下都跳过了第一个两个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:05:37.053

鉴于您编写的代码以及其他文件已成功删除的事实，我们只能得出结论，前两个文件存在权限或锁定问题，阻止它们被删除。您是否尝试过从命令行中删除它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:38:48.060

另一个类不会写入`F:/study`（或者至少您在编辑之前显示的代码没有写入）您期望文件的位置，因此没有。

此外，您可能希望使用构造函数

```
File(File, String) 
```

在浏览目录列表时，即写

```
 fileDelete = new File(dir, file) 
```

而不是在 StringBuffer 中构造名称。

# sql-server - 如何在 SQL Server SELECT 中连接 2 个数字字段并同时转换为字符串

> ID：15453027
> 
> 赞同：0
> 
> 时间：2013-03-16T18:29:58.677
> 
> 标签：sql-server, select, string-concatenation

我有一个包含 2 个数字字段的表：groupID 和 itemID。假设 groupID 长度小于 2 位，itemID 小于 3 位，我想做这个操作：

```
Select stringID = groupID (converted to 2-char string) concat itemID (converted to 3-char string) from ... 
```

当然，上面的代码只是表明我的意图，并不是有效的 SQL 代码。示例：如果 groupID 为 2，itemID 为 34，我希望 stringID 为“02034”。如果 groupID 为 23，itemID 为 6，我希望 stringID 为“23006”。

是否可以在 select 语句中同时进行从数字到字符串的转换和字符串连接？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:34:24.013

你在找这个吗？

```
SELECT
     RIGHT('00' + CAST(groupID as varchar(2)), 2) +
     RIGHT('000' + CAST(itemID as varchar(3)), 3) as stringID FROM tbl 
```

# sandbox - 如何在 Delphi XE3 中使用 StartAccessingSecurityScopedResource

> ID：15453028
> 
> 赞同：1
> 
> 时间：2013-03-16T18:30:01.217
> 
> 标签：sandbox, firemonkey

在 MAC OS X 的沙盒应用程序中，我需要使用 NSURL 函数

开始访问SecurityScopedResource

但它没有在 Macapi.Foundation.pas 单元中的 Delphi XE3 中实现。

如何将它添加到 Delphi 功能中，以便我可以使用它？

如果您有一个安全范围的书签并想要使用资源，则此功能是必需的。

在此先感谢，我知道这不是一个简单的问题。

# jquery - jQuery 验证插件：验证复选框

> ID：15453036
> 
> 赞同：22
> 
> 时间：2013-03-16T18:30:36.820
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validation 插件来验证复选框，因为它没有默认选项，应该选择一个，最多可以选择两个复选框，这是标准。我没有收到任何错误，也没有验证。我像下面一样扩展它，

```
 <input type="checkbox" name="test[]" />x
   <input type="checkbox" name="test[]"  />y
   <input type="checkbox" name="test[]" />z
     $("#formid").validate({
  rules: {
    test[]: { 

            required: function(elem)
            {
                return $("input.select:checked").length > 0;
            }

          },
messages: { 

    test[]: "You must check at least 1 box"
  }
 }); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-16T18:40:00.443

您的代码有几个问题。

**1)**`}`在您的. 中 缺少右大括号 , `rules`。

**2)** 在这种情况下，没有理由为`required`规则使用函数。默认情况下，插件可以很好地处理`checkbox`和输入，所以使用就足够了。但是，这将简单地执行与原始函数相同的逻辑，并验证是否至少检查了一个。`radio``true`

**3)** 如果您还希望最多只检查两个，那么您需要应用该`maxlength`规则。

**4)** 该`messages`选项缺少规则规范。它会起作用，但一条自定义消息将适用于同一字段的所有规则。

**5)** 如果`name`属性包含方括号，[则必须将其括在引号内](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)。

**演示：http: [//jsfiddle.net/K6Wvk/](http://jsfiddle.net/K6Wvk/)**

```
$(document).ready(function () {

    $('#formid').validate({ // initialize the plugin
        rules: {
            'test[]': {
                required: true,
                maxlength: 2
            }
        },
        messages: {
            'test[]': {
                required: "You must check at least 1 box",
                maxlength: "Check no more than {0} boxes"
            }
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-02T20:01:48.973

您无需额外的 js 代码即可验证组复选框和单选按钮，请参见下面的示例。

你的 JS 应该是这样的：

```
$("#formid").validate(); 
```

您可以使用 HTML 标签和属性：例如。组复选框 [minlength=2 和 maxlength=4]

```
<fieldset class="col-md-12">
  <legend>Days</legend>
  <div class="form-row">
    <div class="col-12 col-md-12 form-group">
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="1" required="required" data-msg-required="This value is required." minlength="2" maxlength="4" data-msg-maxlength="Max should be 4">Monday
        </label>
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="2">Tuesday
        </label>
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="3">Wednesday
        </label>
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="4">Thursday
        </label>
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="5">Friday
        </label>
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="6">Saturday
        </label>
        <label class="checkbox-inline">
          <input type="checkbox" name="daysgroup[]" value="7">Sunday
        </label>
        <label for="daysgroup[]" class="error">Your error message will be display here.</label>
    </div>
  </div>
</fieldset> 
```

> 您可以先在此处查看，或者任何一个输入都应该具有 minlength="2" 和 maxlength="4" 属性。minlength/maxlength 根据您的要求。

例如。组单选按钮：

```
<fieldset class="col-md-12">
  <legend>Gender</legend>
  <div class="form-row">
    <div class="col-12 col-md-12 form-group">
        <label class="form-check-inline">
          <input type="radio" name="gendergroup[]" value="m" required="required" data-msg-required="This value is required.">man
        </label>
        <label class="form-check-inline">
          <input type="radio" name="gendergroup[]" value="w">woman
        </label>
        <label class="form-check-inline">
          <input type="radio" name="gendergroup[]" value="o">other
        </label>
        <label for="gendergroup[]" class="error">Your error message will be display here.</label>
    </div>
  </div>
</fieldset> 
```

[您可以在此处](https://jqueryvalidation.org/files/demo/radio-checkbox-select-demo.html)查看工作示例。

*   jQuery v3.3.x
*   jQuery 验证插件 - v1.17.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-06T10:26:09.733

为我工作：

```
<div class="col-lg-6">
    <div class="form-group mb-3">
        <label>Vendor Type<span class="text-danger">*</span></label>
        <div class="checkbox checkbox-success checkbox-inline">
            <input type="checkbox" name="vendorType" value="TABLE" id='table'>
            <label class="checkbox-inline" for="table"> Table </label>
        </div>
        <div class="checkbox checkbox-success checkbox-inline">
            <input type="checkbox" name="vendorType" value="MENU" id='menu'>
            <label class="checkbox-inline" for="menu"> Menu </label>
        </div>
        <div class="text-danger vendorType"></div>
    </div>
</div> 
```

验证码：

```
vendorType: {
    required: true,
    maxlength: 2
}, 
```

错误信息：

```
vendorType: {
    required: "You must check at least 1 box",
    maxlength: "Check no more than {0} boxes"
}, 
```

没必`venderType[]`要这样做`vendorType`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-17T13:48:27.650

有简单的方法

**HTML：**

```
<input type="checkbox" name="test[]" />x
<input type="checkbox" name="test[]"  />y
<input type="checkbox" name="test[]" />z
<button type="button" id="submit">Submit</button> 
```

**查询：**

```
$("#submit").on("click",function(){
    if (($("input[name*='test']:checked").length)<=0) {
        alert("You must check at least 1 box");
    }
    return true;
}); 
```

为此，您不需要任何插件。享受;）

# php - 如何在php中设置包含路径

> ID：15453041
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:31:06.483
> 
> 标签：php, path, include

我很难设置每页的包含属性。

当一切都在同一个目录中时，它似乎工作正常，但是如果我从另一个目录引用一个页面，那么一切都会停止工作，因为它可能应该这样做。

现在，从 php 中的不同目录引用类和文件的最佳方法是什么？一定有人想出了从不同文件夹引用文件的技巧。

目前，我正在按照以下方式进行操作

```
include ("../config/Authenticate.php"); 
```

现在 Authenticate.php 可以引用另一个类或包含另一个代码。那么你如何让这一切一起工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:35:54.407

您可以将其放在索引页面的顶部，显然将路径更改为与您的应用程序相关的路径。然后从包含路径集中的任何位置简单地包含（'some_file.php'）。

```
$publicPath = getcwd();
chdir(__DIR__ . "/..");
$sitePath = getcwd();
chdir($publicPath);

$paths = array(
    $sitePath . '/config',
    $sitePath . '/config/foo',
    $sitePath . '/foo',
    $sitePath . '/foo/bar',
    get_include_path()
);

set_include_path(implode(PATH_SEPARATOR, $paths));
unset($paths); 
```

编辑* 这假设您有一个包含 index.php 的公用文件夹，以及公用文件夹之外的所有其他文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:36:20.480

您可以`__DIR__`在包含路径中使用来设置相对于文件的路径。

您包括将成为：

```
include (__DIR__ . "/../config/Authenticate.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:36:25.347

如果您包含的文件需要包含另一个文件，只要您在该文件中也有包含脚本，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:41:54.680

这是一种对我有用的方法。

```
$arr_path = explode(DIRECTORY_SEPARATOR, __DIR__);

$arr_path = array_reverse($arr_path);
$depthCounter=0;
for($i=0;$i<count($arr_path);$i++){
    // just replace BDW with your main directory
    if ($arr_path[$i] === "BDW"){
        $depthCounter = $i;
    }   
}
// clear array
unset($arr_path);

$DEPTH = "";
for($i=0;$i<$depthCounter;$i++){
    $DEPTH= $DEPTH . "../";
}

include ($DEPTH . 'config/SessionStart.php'); 
```

这不是最干净的代码。但它似乎工作。整合@MonsterTKE 的这种方法可能适用于大多数人。

# javascript - 跨度促销标头，记住 24 小时 cookie javascript

> ID：15453044
> 
> 赞同：1
> 
> 时间：2013-03-16T18:31:18.780
> 
> 标签：javascript, cookies

如果单击 X，我有一个跨度的促销标题。现在，当我刷新页面时，跨度又回来了。我需要 cookie 来记住跨度关闭的 24 小时。

这是我尝试但没有结果的方法：

**html代码：**

```
<div id=”span” class="promo_holder">
    <a href="javascript:void(0)" id=”close” class="close_promo_header" 
       onclick="hidePromoPanel ('/');">Close<span>X</span></a>
</div> 
```

**JavaScript 代码：**

```
$(document).ready(function() {

    if (!readCookie('hide')) {
        $('#span').show();
    }

    $('#close').click(function() {
        $('#span').hide();
        createCookie('hide', true, 1)
        return false;
    });

});

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}  

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

# c++ - 如何对指向 int* 数组元素的 int** 数组进行排序

> ID：15453052
> 
> 赞同：0
> 
> 时间：2013-03-16T18:32:17.477
> 
> 标签：c++, arrays, sorting, pointers, int

我有 2 个数组

```
int n = 10;
int a[n];
int** t = new int*[n]; 
```

然后我将点的元素设为`i`元素然后 我只想对数组中的指针进行排序然后我尝试对其进行冒泡排序但它出错了`t``i``a``t`

```
do{
    for(int i = 0; i < n -1; i++){
        if(*t[i] > *t[i+1]){
            char* x = t[i];
            t[i] = t[i+1];
            t[i+1] = x;
        }
        n--;
    }
}while(n>1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:40:29.710

如果您在 for 循环中递减 n，它不会遍历整个数组，请尝试将其放在 for 循环之外

# c# - 从文件中读取字符串时不会发送邮件，但想要在源文件中定义字符串的时间

> ID：15453053
> 
> 赞同：1
> 
> 时间：2013-03-16T18:32:19.783
> 
> 标签：c#, image, sendmail, rtf

我正在尝试发送包含许多图像的邮件。当将html文本写入源文件（.cs）内的字符串时，一切正常，但是当我尝试读取我已经写入某个外部文件的相同文本时，邮件希望在正文中显示图像，它只是放置边框（而不是图像) 和附上的真实图像。

为了从richtextbox转换为html，我使用带有命令**Rtf2Html.exe file.rcf**[的RTF-Converter](http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter)

 **如何从将显示在邮件正文中的外部文件文本中读取，当我在源代码中“手动”编写时，该文本将显示为？

这是我的代码：

```
 using System;
using System.Collections.Generic;
using System.IO;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using System.Net;
using System.Net.Mail;
using System.Threading;
using AE.Net.Mail;
using System.Web;
using System.Net.Mime;
using System.Diagnostics;
using System.Text.RegularExpressions;

public void SendEmail()
{

 System.Net.Mail.MailMessage m = new System.Net.Mail.MailMessage
            SmtpClient sc = new SmtpClient();
            try
            {
                m.From = new MailAddress("your.email@gmail.com", "Display your name");
                m.To.Add(new MailAddress("some.email@gmail.com", "Display"));
                m.Subject = "Test subject";
                m.IsBodyHtml = true;
                // m.Body = "Dont need this!";

                FileStream fs = new FileStream("root.jpg",
                                   FileMode.Open, FileAccess.Read);
                System.Net.Mail.Attachment a = new System.Net.Mail.Attachment(fs, "C:\\root.jpg",MediaTypeNames.Application.Octet);

                 m.Attachments.Add(a);
                /*
                 **This working when i put two images inside of code section in string "str" it send
                mail with images inside of body**
                */
                string str = "<html><body><h1><p><a href=\"http://www.google.hr\" target=\"_blank\">www.google.hr</a></p><h1>Picture</h1><img src=\"cid:image1\"><h1>First text</h1><img src=\"cid:image2\"><br/><h1>Second text</h1></body></html>";

                /*
                **If i read from file to string and send mail it will show images as attach ("source.html")
                have same text as in above string "str"**
                */

               //   string str = File.ReadAllText("source.html");     

                AlternateView av =
                             AlternateView.CreateAlternateViewFromString(str,
                             null, MediaTypeNames.Text.Html);
                LinkedResource lr = new LinkedResource("file1.jpg",
                             MediaTypeNames.Image.Jpeg);
                LinkedResource lr2 = new LinkedResource("file2.jpg",
                             MediaTypeNames.Image.Jpeg);

                lr.ContentId = "image1";
                lr2.ContentId = "image2";

                av.LinkedResources.Add(lr);
                av.LinkedResources.Add(lr2);
                m.AlternateViews.Add(av);

                sc.Host = "smtp.gmail.com";
                sc.Port = 587;
                sc.Credentials = new System.Net.NetworkCredential("your.email@gmail.com", "yourpassword1");
                sc.EnableSsl = true;
                sc.Send(m);

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```**

# android - onTouch 在 getX android 中给出奇怪的结果

> ID：15453054
> 
> 赞同：1
> 
> 时间：2013-03-16T18:32:23.067
> 
> 标签：android, touch-event

当您触摸它时，我正在尝试移动图像。我意识到当我移动图像时会产生奇怪的事情（有时它做得很好，而其他人移动到不同的地方）。我用 getX 值制作了一个 Log.d，这就是我得到的：

```
 03-16 19:26:23.569: D/eventX:(15450): 23.0
 03-16 19:26:23.599: D/eventX:(15450): 91.0
 03-16 19:26:23.629: D/eventX:(15450): 20.0
 03-16 19:26:23.659: D/eventX:(15450): 89.0
 03-16 19:26:23.689: D/eventX:(15450): 17.0
 03-16 19:26:23.719: D/eventX:(15450): 87.0
 03-16 19:26:23.749: D/eventX:(15450): 14.0
 03-16 19:26:23.779: D/eventX:(15450): 85.0
 03-16 19:26:23.809: D/eventX:(15450): 11.0
 03-16 19:26:23.839: D/eventX:(15450): 83.0
 03-16 19:26:23.879: D/eventX:(15450): 8.0 
```

如您所见，一个是好的价值（我触摸它的位置的价值），另一个是没有意义的。有人知道原因吗？

这是我正在使用的代码的和平......

```
 head.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent ev) {
            // TODO Auto-generated method stub
            switch (ev.getAction()) {

            case MotionEvent.ACTION_MOVE: {
                RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(head.getLayoutParams().width, head.getLayoutParams().height);
                Log.d("eventX:", ((Float)ev.getX()).toString());
                layoutParams.leftMargin = (int) ev.getX();
                head.setLayoutParams(layoutParams);
                count = false;

                break;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:36:52.033

使用典型`getX()`函数完全依赖于调度 的特定视图`MotionEvent`并返回相对于该视图的坐标。在您的情况下，似乎有多个视图正在分派事件，并且您得到了多个意外值。

无论如何，使用[`getRawX()`](http://developer.android.com/reference/android/view/MotionEvent.html#getRawX%28%29)会让你得到一个一致的绝对坐标，并且会解决所有不同坐标的混淆。

# vb.net - 验证日期格式

> ID：15453056
> 
> 赞同：0
> 
> 时间：2013-03-16T18:32:40.367
> 
> 标签：vb.net, winforms, date

我在 vb 2010 中有一个`textbox`表格，它应该只接受日期并且只接受以下格式`"yyyy/mm/dd"`

如何做到这一点？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:00:31.817

```
Private Sub TextBox2_Validating(sender As System.Object, e As System.ComponentModel.CancelEventArgs) Handles TextBox2.Validating
    Dim test As Date
    If Date.TryParseExact(TextBox2.Text.ToString(), "yyyy/mm/dd", _
                          System.Globalization.CultureInfo.CurrentCulture, _
                          Globalization.DateTimeStyles.None, test) Then
        MessageBox.Show("Ok")
        'TODO: ok
    Else
        e.Cancel = True
        'TODO: not ok
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:00:10.020

如果您使用 datepicker 控件，那么您可以根据需要设置自定义格式。在表单加载事件中使用下面

```
DateTimePicker1.Format = DateTimePickerFormat.Custom
DateTimePicker1.CustomFormat = "yyyy/mm/dd" 
```

让我知道它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T16:05:20.887

你可以试试这个：

```
DateTime.TryParseExact(dateToTest, "yyyy/MM/dd", New CultureInfo("us-US"), DateTimeStyles.None, result) 
```

# sockets - Lua socket.http 接收器参数

> ID：15453058
> 
> 赞同：4
> 
> 时间：2013-03-16T18:32:49.253
> 
> 标签：sockets, https, lua, luasocket

我正在尝试从 Lua 与我的服务器通信以验证用户身份。这是我的请求函数的样子：

```
function http.send(url)
    local req = require("socket.http")
    local b, c, h = req.request{
        url = url,
        redirect = true
    }
    return b
end 
```

但是，我注意到数据被丢弃了，因为我没有提供`sink`参数。我希望能够将下载的数据作为一个完整的字符串返回，而不是下载到文件/表中。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T19:53:57.393

您可以使用[`ltn12.sink.table`](http://w3.impa.br/~diego/software/luasocket/ltn12.html#sink.table)将结果逐个收集到给定的表格中。然后您可以使用`table.concat`来获取结果字符串。

文档中的使用示例`ltn12.sink`：

```
-- load needed modules
local http = require("socket.http")
local ltn12 = require("ltn12")

-- a simplified http.get function
function http.get(u)
  local t = {}
  local status, code, headers = http.request{
    url = u,
    sink = ltn12.sink.table(t)
  }
  return table.concat(t), headers, code
end 
```

# xml - 使用 iterparse 时出现 XML 语法错误

> ID：15453062
> 
> 赞同：0
> 
> 时间：2013-03-16T18:33:10.353
> 
> 标签：xml, python-2.7, xml-parsing, lxml, iterparse

我正在用 Python 解析一个大型 XML 文件。大型 XML 文件的相关部分如下：

```
<?xml version="1.0" encoding="utf-8"?>
<posthistory>
  <row Id="1332647" PostHistoryTypeId="5" PostId="723397" RevisionGUID="cd3aafe8-47ee-497d-a4e8-948c2a769d7e" CreationDate="2009-04-06T22:27:07.567" UserId="40414" Comment="Added examples of articles and filenames" Text="I have a large number of text files (1000+) containing articles from academic journals. Each article's file contains a &quot;stub&quot; from the end of the previous article (at the beginning) and from the beginning of the next article (at the end). I need to remove these stubs in preparation for running a frequency analysis on the articles because the stubs are duplicate data. &#xD;&#xA;&#xD;&#xA;I know I can use diff to output the differences between the files, ignore whitespace and treat the files as text, and then compare them manually, but this doesn't male much sense when dealing with this much data. Accuracy does not have to be 100%, so a script that compared each file to the next file and then removed 1 copy of the duplicate text would be perfect. This seems like it would be a pretty common issue when programming so I am surprised that I haven't been able to find anything that does this.&#xD;&#xA;&#xD;&#xA;The file names sort in order, so a script that compares each file to the next sequentially should work. E.G.&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;bul_9_5_181.txt&#xD;&#xA;bul_9_5_186.txt&#xD;&#xA;&lt;/pre&gt;&#xD;&#xA;&#xD;&#xA;are two articles, one starting on page 181 and the other on page 186\. &#xD;&#xA;&#xD;&#xA;Note: I am an academic doing content analysis of old journal articles for a project in the history of psychology. I am no programmer, but I do have 10+ years experience with linux and can usually figure things out as I go. &#xD;&#xA;&#xD;&#xA;Thanks for your help&#xD;&#xA;&#xD;&#xA;&lt;b&gt;---example stub at beginning of file: everything before &quot;AFFECTIVE PHENOMENA — EXPERIMENTAL&quot; is duplicate from previous file----&lt;/b&gt;&#xD;&#xA;&#xD;&#xA;SYN&amp;STHESIA&#xD;&#xA;&#xD;&#xA;ISI&#xD;&#xA;&#xD;&#xA;the majority of Portugese words signifying black objects or ideas relating to black. This association is, admittedly, no true synsesthesia, but the author believes that it is only a matter of degree between these logical and spontaneous associations and genuine cases of colored audition.&#xD;&#xA;REFERENCES&#xD;&#xA;&#xD;&#xA;DOWNEY, JUNE E. A Case of Colored Gustation. Amer. J. of Psycho!., 1911, 22, S28-539MEDEIROS-E-ALBUQUERQUE. Sur un phenomene de synopsie presente par des millions de sujets. / . de psychol. norm, et path., 1911, 8, 147-151\. MYERS, C. S. A Case of Synassthesia. Brit. J. of Psychol., 1911, 4, 228-238.&#xD;&#xA;&#xD;&#xA;AFFECTIVE PHENOMENA — EXPERIMENTAL&#xD;&#xA;BY PROFESSOR JOHN F. .SHEPARD&#xD;&#xA;University of Michigan&#xD;&#xA;&#xD;&#xA;Three articles have appeared from the Leipzig laboratory during the year. Drozynski (2) objects to the use of gustatory and olfactory stimuli in the study of organic reactions with feelings, because of the disturbance of breathing that may be involved. He uses rhythmical auditory stimuli, and finds that when given at different rates and in various groupings,&#xD;&#xA;&#xD;&#xA;&lt;b&gt;---this is from the end of the same file, everything AFTER &quot;1911\. Pp.39&quot; is duplicate from the next article---&lt;/b&gt;&#xD;&#xA;&#xD;&#xA;Pleasantness of Colors. Arner. J. of Psychol., 1911, 22, 578-579\. 8\. WASHBURN, M. F . and CRAWFORD, D . Fluctuations in the Affective Value of Colors During Fixation for One Minute. Amer. J. of Psychol., 1911, 22, 579-J82\. 9\. WELLS, F . L. and FORBES, A. On Certain Electrical Processes in the Human Body and their Relation to Emotional Reactions. (No. 16 of Archives of Psychology). New York: The Science Press, 1911\. Pp. 39.&#xD;&#xA;&#xD;&#xA;AFFECTIVE PHENOMENA — DESCRIPTIVE AND THEORETICAL&#xD;&#xA;BY PROFESSOR H. N. GARDINER Smith College&#xD;&#xA;&#xD;&#xA;Fundamental questions are discussed systematically by Rehmke (18) in a second edition of a well-digested treatise, a characteristic feature of which is its attempt to relate feeling, emotion and mood.&#xD;&#xA;Feeling (Gefuhl) is defined as a Bestimmtheitsbesonderheit des zustdnd-&#xD;&#xA;&#xD;&#xA;lichen Bewusstseins. Consciousness being conceived as the individual soul, its state is assumed to be at any given moment simple and unique; hence the momentary feeling is always one of pleasure or displeasure, never &quot;mixed.&quot; It is determined, not by any one, but by the totality of the objective factors, those being massgebend which are in the focus of attention. A &quot; feeling,&quot; in the ordinary sense, is a complex of the affective state and the &quot;determining&quot; and &quot;accompanying&quot; objective components, the &quot;determining&quot; objects of attention giving the kind of feeling, the &quot;accompanying&quot; organic sensations being mainly responsible for its obscure &quot;coloring&quot; and its degree. Mood (Stimmung) appears in a certain contrast to &quot;feeling&quot; in that in it organic sensation is the &quot;determining&quot; factor and no particular object occupies the focus of attention. Emotion {Affeki) is not contrasted with &quot;feeling,&quot; but is &quot;feeling&quot; characterized by the intensity of the &quot;accompanying&quot; organic sensations, which are rightly included in the emotion; we must not, however, confuse, with James and Lange, the bodily changes which give rise&#xD;&#xA;&#xD;&#xA;&lt;b&gt;---end example---&lt;/b&gt;" />
</posthistory> 
```

我正在使用该`iterparse`模块来解析这个 XML。

```
''' 
Function provides fast iteration of XML files via iterparse
Source - Listing 5 at Source - http://www.ibm.com/developerworks/xml/library/x-hiperfparse/
'''
def fast_iter(context, func):
    try: 
        for event, elem in context:
            func(elem)

            elem.clear()
            while elem.getprevious() is not None:
                del elem.getparent()[0]
        del context
    except etree.XMLSyntaxError, e:
        print e 
```

我收到以下带有以下跟踪的 ​​XMLSyntaxError

```
Input is not proper UTF-8, indicate encoding !
Bytes: 0x97 0x20 0x45 0x58, line 3, column 1694 
```

一些重要的点——

[1] 必须使用该`iterparse`模块，因为 XML 的大小为 3GB（或更多）。

[2] 我只提供了引发语法错误的 XML 文件部分。

我的问题如下：

[1] 我可以自动修复这个问题吗？如果是这样，怎么做？

[2] 我可以手动解决这个问题吗？如果是这样，怎么做？

[3] 我可以忽略这个问题并继续解析我的大型 XML 文件吗？如果是这样，怎么做？

我看过以下资源：

[在解析大型 XML 文件时，我应该如何处理 Python 的 lxml 中的 XMLSyntaxError？](https://stackoverflow.com/questions/8888628/how-should-i-deal-with-an-xmlsyntaxerror-in-pythons-lxml-while-parsing-a-large)

[忽略 Python (iterparse) 中的编码错误？](https://stackoverflow.com/questions/9243005/ignore-encoding-errors-in-python-iterparse)

[有没有办法在无效的 Char 值上恢复 iterparse？](https://stackoverflow.com/questions/14934854/is-there-a-way-to-recover-iterparse-on-invalid-char-values)

但没有人能回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:18:43.380

您的问题是您告诉解析器 XML 是 UTF-8 编码的，而实际上是 Windows CP-1252。字符串

```
0x97 0x20 0x45 0x58 
```

是（当解释为 CP-1252 时）

```
emdash space E X 
```

如果您查看给定偏移量的违规行中的文本，您确实会看到 emdash。问题是 0x97 不是 UTF-8 编码中的有效字符。

在 Unicode 中，破折号字符是`&#x2014;`，在 UTF-8 编码时表示为三个字节：`0xE2 0x80 0x94`.

解决方案是确保数据以 UTF-8 正确编码，或者更改标头以指示正确编码。

# verilog - 找不到为什么价值没有在正确的时间跳到预期

> ID：15453069
> 
> 赞同：1
> 
> 时间：2013-03-16T18:33:51.797
> 
> 标签：verilog, hdl

我有以下代码

```
module POLY(CLK,RESET_n,IN_VALID,IN,OUT_VALID,OUT);

input         CLK,RESET_n,IN_VALID;
input  [ 3:0] IN;
output        OUT_VALID;
output [12:0] OUT;

reg        OUT_VALID;
reg [12:0] OUT;

reg        OUT_VALID_w;
reg [12:0] OUT_w;

reg [ 1:0] COUNT_IN, COUNT_IN_w;
reg [ 2:0] COUNT_DO, COUNT_DO_w;

always @(posedge CLK or negedge RESET_n)
begin
    if(!RESET_n)
    begin
        COUNT_IN <= 2'd0;
        COUNT_DO <= 3'd0;
    end
    else
    begin
        COUNT_IN <= COUNT_IN_w;
        COUNT_DO <= COUNT_DO_w;
    end
end

always @(*)
begin
    if(IN_VALID == 1'b0)
    begin
        if(COUNT_DO == 3'd7)
        begin
            COUNT_DO_w = COUNT_DO;
        end
        else
        begin
            COUNT_DO_w = COUNT_DO + 1'b1;
        end
    end
    else
    begin
        COUNT_DO_w = 3'd0;
    end
end 
```

我想问的是为什么`COUNT_DO`不跳到 1 in `14ns`？

我认为由于第二个 always 块中的敏感列表是`COUNT_DO`and `IN_VALID`，所以在开始时，复位信号首先触发 always 阻止并设置`COUNT_DO = 0`，这将`COUNT_DO`值从高阻抗更改为 0。因此，它触发了第二个 always 块`COUNT_DO_w = 0 + 1 = 1`。并且，在下一个正边沿时钟中，它触发了第一个 always 块做`COUNT_DO <= COUNT_DO_w`。但它似乎延迟了一个时钟来分配它（`22ns`）。我试图弄清楚但仍然无法解决，为什么它会延迟一个时钟？

提前谢谢。

![在此处输入图像描述](../Images/16305088e2a9be950c7dadc66dc49ad6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T19:03:39.810

在 time=14ns 时，置位复位 ( `RESET_N`=0)，这意味着`COUNT_DO`在第一个 always 块中 =0。在时间 t=20ns，您释放复位并`COUNT_DO`保持为 0。在时间=22ns，您有`CLK`分配`COUNT_DO`给的第一个姿势`COUNT_DO_w`。更改的时间 `COUNT_DO`仅由第一个始终块控制，而不是第二个。

# c# - Ninject Singleton 工厂

> ID：15453070
> 
> 赞同：0
> 
> 时间：2013-03-16T18:33:57.627
> 
> 标签：c#, ninject

我有一个绑定到类的接口。一切都像例外一样工作。我想用构造函数注入来创建类，而不是到处传递我的内核。我想为这些提议建立一个单身工厂。我如何在不使用 ninject.extensions.factory 库的情况下创建一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:12:09.253

如果您想创建工厂但不使用工厂扩展（不知道为什么，我认为这正是您需要的），您可以执行以下操作：

```
public class FooFactory : IFooFactory
{
    // allows us to Get things from the kernel, but not add new bindings etc.
    private readonly IResolutionRoot resolutionRoot;

    public FooFactory(IResolutionRoot resolutionRoot)
    {
        this.resolutionRoot = resolutionRoot;
    }

    public IFoo CreateFoo()
    {
        return this.resolutionRoot.Get<IFoo>();
    }

    // or if you want to specify a value at runtime...

    public IFoo CreateFoo(string myArg)
    {
        return this.resolutionRoot.Get<IFoo>(new ConstructorArgument("myArg", myArg));
    }
}

public class Foo : IFoo { ... }

public class NeedsFooAtRuntime
{
    public NeedsFooAtRuntime(IFooFactory factory)
    {
        this.foo = factory.CreateFoo("test");
    }
}

Bind<IFooFactory>().To<FooFactory>();
Bind<IFoo>().To<Foo>(); 
```

不过，Factory Extension 只是在运行时为您完成所有这些工作。您只需要定义工厂接口，扩展程序会动态创建实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:44:04.697

试试这个代码：

```
class NinjectKernelSingleton
{
    private static YourKernel _kernel;

    public static YourKernel Kernel
    {
        get { return _kernel ?? (_kernel = new YourKernel()); }
    }

}

public class YourKernel
{
    private IKernel _kernel;
    public YourKernel()
    {
        _kernel = InitKernel();
    }

    private IKernel InitKernel()
    {
        //Ninject init logic goes here
    }

    public T Resolve<T>() 
    {
        return _kernel.Get<T>();
    }
} 
```

# python - django 序列化器到 json - 自定义 json 输出格式

> ID：15453072
> 
> 赞同：10
> 
> 时间：2013-03-16T18:34:15.747
> 
> 标签：python, django, json

我对 django 很陌生，最近我需要一个 JSON 输出，为此我使用以下 django 代码：

```
data = serializers.serialize("json", Mymodel.objects.all()) 
```

它工作得很好，除了我得到的输出：

```
[{"pk": 8970859016715811, "model": "myapp.mymodel", "fields": {"reviews": "3.5", "title": .....}}] 
```

但是，我希望输出简单地是：

```
[{"reviews": "3.5", "title": .....}] 
```

或者，

```
[{"id": "8970859016715811", "reviews": "3.5", "title": .....}] 
```

我想知道是否有人可以为我指出如何实现这一目标的正确方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T18:41:19.973

您可以将“字段”参数添加到序列化函数，如下所示：

```
data = serializers.serialize('xml', SomeModel.objects.all(), fields=('name','size')) 
```

请参阅：[https ://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)

**编辑1：**

您可以自定义序列化程序以仅获取您指定的字段。

从[Override Django Object Serializer 摆脱指定的模型](https://stackoverflow.com/questions/5453237/override-django-object-serializer-to-get-rid-of-specified-model)：

```
from django.core.serializers.python import Serializer

class MySerialiser(Serializer):
    def end_object( self, obj ):
        self._current['id'] = obj._get_pk_val()
        self.objects.append( self._current )

 # views.py
 serializer = MySerialiser()
 data = serializer.serialize(some_qs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-05T19:39:08.830

您需要编写一个自定义 Json 序列化程序。这样的事情应该可以解决问题：

```
class FlatJsonSerializer(Serializer):
    def get_dump_object(self, obj):
        data = self._current
        if not self.selected_fields or 'id' in self.selected_fields:
            data['id'] = obj.id
        return data

    def end_object(self, obj):
        if not self.first:
            self.stream.write(', ')
        json.dump(self.get_dump_object(obj), self.stream,
                  cls=DjangoJSONEncoder)
        self._current = None

    def start_serialization(self):
        self.stream.write("[")

    def end_serialization(self):
        self.stream.write("]")

    def getvalue(self):
        return super(Serializer, self).getvalue() 
```

你可以像这样使用它：

```
s = FlatJsonSerializer()
s.serialize(MyModel.objects.all()) 
```

或者您可以注册序列化程序，`django.core.serializers.register_serializer`然后使用熟悉的`serializers.serialize`快捷方式。

如果您需要进一步定制，请查看 django 实现作为参考：[https ://github.com/django/django/blob/master/django/core/serializers/json.py#L21-62](https://github.com/django/django/blob/master/django/core/serializers/json.py#L21-62)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-24T02:46:05.890

我刚刚遇到这个问题，因为我遇到了同样的问题。我还使用自定义序列化程序解决了这个问题，尝试了“EDIT 1”方法，但它并没有很好地工作，因为它剥夺了 django JSON 编码器已经做过的所有好东西（十进制，日期序列化），你可以重写它你自己，但为什么要打扰。我认为一种不那么侵入性的方法是像这样直接继承 JSON 序列化程序。

```
from django.core.serializers.json import Serializer
from django.utils.encoding import smart_text    

class MyModelSerializer(Serializer):
    def get_dump_object(self, obj):
        self._current['id'] = smart_text(obj._get_pk_val(), strings_only=True)
        return self._current 
```

Sso 编写字段和模型的罪魁祸首是在父级 python 序列化程序，这样，您还可以自动获取已经内置到 django 的 JSON 序列化程序中的字段过滤。像这样称呼它

```
serializer = MyModelSerializer()
data = serializer.serialize(<queryset>, <optional>fields=('field1', 'field2')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-05T16:42:50.327

```
import json

_all_data = Reporter.objects. all()

json_data = json.dumps([{'name': reporter.full_name} for reporter in _all_data])

return HttpResponse(json_data, content_type='application/json') 
```

这里的记者是你的模特

# firefox - 如何在地址输入栏旁边创建自定义内容框？

> ID：15453076
> 
> 赞同：1
> 
> 时间：2013-03-16T18:34:35.507
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我刚刚看到 Firefox 提供了一个很棒的插件构建器 SDK，但是我找不到开始开发以下简单插件所需的信息：

在互联网地址栏下方，我想插入一个包含网站（动态加载内容）的内容区域。

我必须使用哪个 API 来实现该内容窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T21:02:33.233

没有为此的模块，您必须查看 Widget 模块的内容，将其分叉，也许只需将默认位置更改为在导航栏中。请注意，在 Fx25 或 26 中，小部件模块的默认位置将在导航栏中，但该模块已被弃用，应该会出现一些更容易的东西，就像小部件一样。

# c# - 读取 WebException 的响应流

> ID：15453079
> 
> 赞同：2
> 
> 时间：2013-03-16T18:34:40.953
> 
> 标签：c#, asp.net, facebook, stream, dotnetopenauth

我有以下方法，它基本上是使用他们的 Facebook 凭据对用户进行身份验证。出于某种原因，我`WebException`在尝试处理授权密钥（代码）时遇到了问题。因此，我尝试读取响应流以了解发生了什么，但在读取流时我不断收到错误。这是我的代码：

```
 private void OnAuthCallback(HttpContextWrapper context, WebServerClient client)
    {
        try
        {
            IAuthorizationState authorizationState = client.ProcessUserAuthorization(context.Request);
            AccessToken accessToken = AccessTokenSerializer.Deserialize(authorizationState.AccessToken);
            String username = accessToken.User;
            context.Items[USERNAME] = username;
        }
        catch (ProtocolException e)
        {
            if (e.InnerException != null)
            {
                String message = e.InnerException.Message;
                if (e.InnerException is WebException)
                {
                    WebException exception = (WebException)e.InnerException;
                    var responseStream = exception.Response.GetResponseStream();
                    responseStream.Seek(0, SeekOrigin.Begin);
                    using (StreamReader sr = new StreamReader(responseStream))
                    {
                        message = sr.ReadToEnd();
                    }
                }
                EventLog.WriteEntry("OAuth Client", message);
            }
        }
    } 
```

如果我删除该`responseStream.Seek(0, SeekOrigin.Begin);`行，它会给我`ArgumentException`一条消息，指出流不可读。有了这条线，它告诉我我无法操纵已经关闭的流。这条流是如何关闭的？为什么我不能从中读取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-24T20:36:28.347

您可以阅读响应的正文。我在[这个答案](https://stackoverflow.com/questions/25032513/how-to-get-error-message-returned-by-dotnetopenauth-oauth2-on-client-side)中找到了解决方案。

您应该将流转换为`MemoryStream`并使用`ToArray`方法，然后用于`Encoding.UTF8.GetString`获取文本。

```
private void OnAuthCallback(HttpContextWrapper context, WebServerClient client)
{
    try
    {
        IAuthorizationState authorizationState = client.ProcessUserAuthorization(context.Request);
        AccessToken accessToken = AccessTokenSerializer.Deserialize(authorizationState.AccessToken);
        String username = accessToken.User;
        context.Items[USERNAME] = username;
    }
    catch (ProtocolException e)
    {
        if (e.InnerException != null)
        {
            String message = e.InnerException.Message;
            if (e.InnerException is WebException)
            {
                WebException exception = (WebException)e.InnerException;
                message = ExtractResponseString(webException);
            }
            EventLog.WriteEntry("OAuth Client", message);
        }
    }
}

public static string ExtractResponseString(WebException webException)
{
    if (webException == null || webException.Response == null)
        return null;

    var responseStream = 
        webException.Response.GetResponseStream() as MemoryStream;

    if (responseStream == null)
        return null;

    var responseBytes = responseStream.ToArray();
    var responseString = Encoding.UTF8.GetString(responseBytes);
    return responseString;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T17:26:36.663

看起来您正在使用 DotNetOpenAuth。不幸的是，我认为这个库在将 WebException 的响应流包装到您的代码收到的 ProtocolException 之前关闭它。您可以在 DEBUG 级别[启用日志记录](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Logging-and-debugging)以将响应转储到日志文件中，但我认为您不会找到任何方法从您的代码中访问它。

DotNetOpenAuth 开发人员之一描述了[这里](https://groups.google.com/forum/#!topic/dotnetopenid/NqtWyNj7mO8)的情况：

> DotNetOpenAuth 在处理和抛出包装异常时关闭 HTTP 响应流，因为如果 DNOA 没有关闭流，您的打开流分配将填满，然后您的应用程序将开始挂起。如果我没记错的话，DNOA 确实会将响应流的内容写入其日志。

在 DNOA (5.0) 的最新（未发布）版本中，情况可能发生了变化，因为在当前版本中导致问题的部分代码已被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:54:00.300

WebException 可能有不同的原因，并且服务器并不总是需要在某些（错误）情况下返回正文，因此没有 response.stream。

先看看返回的状态码

[Fiddler](http://www.fiddler2.com/fiddler2/)是另一个帮助您调查情况的工具

# mysql - 将坐标插入 MySQL - PolyFromText SQL 语法错误/返回 null

> ID：15453084
> 
> 赞同：9
> 
> 时间：2013-03-16T18:34:57.397
> 
> 标签：mysql, polygon, geospatial, spatial

我正在尝试将多边形的地理坐标插入我的 MySQL 数据库。我有一个名为 polygon 类型的字段，我尝试运行所有这些查询，但继续收到 SQL 语法错误：

```
SET @g = 'POLYGON((-74.13591384887695 40.93750722242824,-74.13522720336914 40.929726129575016,-74.15102005004883 40.9329683629703,-74.14329528808594 40.94256444133327))';
INSERT INTO 'zones' ('polygon') VALUES (PolyFromText(@g)); 
```

* * *

```
INSERT INTO 'zones' ('polygon') VALUES (PolyFromText('POLYGON((-74.13591384887695 40.93750722242824,-74.13522720336914 40.929726129575016,-74.15102005004883 40.9329683629703,-74.14329528808594 40.94256444133327))')); 
```

* * *

```
INSERT INTO 'zones' ('polygon') VALUES (PolyFromText('POLYGON((-74.13591384887695 40.93750722242824,-74.13522720336914 40.929726129575016,-74.15102005004883 40.9329683629703,-74.14329528808594 40.94256444133327))', 0)); 
```

最后一个查询是使用 phpmyadmins 自己的地理空间工具生成的，并返回“列'多边形'不能为空”。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-16T19:07:15.753

原因是因为 null 退出最后一点不等于第一点，是满足 OSGeo 标准 WKT 的条件，在某些实现中这是允许的，但 mysql 对此要求严格，在 SQL Server 文档中更好地解释条件。

看到这个

```
SELECT  Dimension(GeomFromText('POLYGON((-74.13591384887695 40.93750722242824,-74.13522720336914 40.929726129575016,-74.15102005004883 40.9329683629703,-74.14329528808594 40.94256444133327,-74.13591384887695 40.93750722242824)))')); 
```

mysql的文档

[http://dev.mysql.com/doc/refman/5.0/en/gis-class-polygon.html](http://dev.mysql.com/doc/refman/5.0/en/gis-class-polygon.html)

sqlserver的文档

[http://msdn.microsoft.com/en-us/library/bb964739(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb964739(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-08T11:09:28.327

**截至2020年...**

您的查询应更改为

```
INSERT INTO 'zones' ('polygon') VALUES (ST_PolygonFromText('POLYGON((-74.13591384887695 40.93750722242824,-74.13522720336914 40.929726129575016,-74.15102005004883 40.9329683629703,-74.14329528808594 40.94256444133327, -74.13591384887695 40.93750722242824))')); 
```

注意事项：

1.  使用正确的多边形转换函数 ST_PolygonFromText
2.  正确使用嵌套括号来注意内部多边形
3.  最后一个点等于第一个点 - 所以，多边形是闭合的

# connection - WebSocketsPP v3 库的客户端连接限制

> ID：15453090
> 
> 赞同：2
> 
> 时间：2013-03-16T18:35:41.973
> 
> 标签：connection, limit, websocket++

在 WebSocket++ 0.3.x 库中，什么决定了有多少 WebSocket 客户端可以有活动连接的限制？是每个线程一个连接，还是一个线程可以处理多个 WebSocket 客户端连接？如果是后者，一个线程大概能持有多少个连接？

基本上，我正在寻找一个大概有多少客户端连接 WebSocket++ 库可以在大约有 25 个线程的应用程序中处理。图书馆主页是： [http ://www.zaphoyd.com/websocketpp](http://www.zaphoyd.com/websocketpp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:22:44.660

如果您在支持非阻塞/异步 I/O（Linux 上的 epoll，OS X/BSD 上的 kqueue，Windows 上的 iocp）的平台上使用基于 Boost.Asio 的传输策略和最新版本的 Boost，那么 WebSocket++ 不会对同时连接引入任何重大限制。

在这种情况下，限制几乎取决于操作系统、硬件和应用程序因素。操作系统将限制每个进程使用的文件描述符总数（通过 root 访问可以更改此限制）。高并发级别将要求您的应用程序具有适当的结构来处理它（主要使用短的、有限时间的、非阻塞处理程序）。其他因素会像限制通用服务器一样限制您。千兆以太网只能处理这么多的流量，使用 TLS 或压缩会降低性能等。

我还没有使用 0.3.x 进行广泛的性能基准测试，但是经过适当调整的应用程序中的 0.2.x 能够轻松地在 i7 内核上为成千上万的并发客户端提供服务。

WebSocket++ 架构的目的是在有足够资源的情况下扩展到任意连接数。如果您正在开发一个将 WebSocket++ 扩展到超过 10k 连接的应用程序，我会对更多细节和解决您发现的任何瓶颈感兴趣。

# python - 在 PyGame 中将图形的轮廓作为多边形获取

> ID：15453094
> 
> 赞同：1
> 
> 时间：2013-03-16T18:36:23.103
> 
> 标签：python, geometry, pygame

我有一种感觉，这是不可能的（或至少非常复杂），但我目前有一个看起来像这样的生成图（请原谅我糟糕的绘画技巧）：

![在此处输入图像描述](../Images/b3345a7f3fda68d3b714c4397aeabca9.png)

现在，我希望能够创建轮廓的多边形，我有所有节点的坐标，但没有交叉点。到目前为止，我能做到的最好的是礼物包装算法，它比其他任何东西都提供了更多的多边形粗略轮廓。

有没有人对我如何解决这个问题有任何想法？

（我目前正在使用 PyGame）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:07:10.917

您将要弄清楚交叉点发生在哪里并在那里创建新节点。

然后，您想找到位于外部多边形上的边。我建议从无穷远处运行一条随机光线，直到它到达边缘。

然后想象自己沿着那条边走，左手在边界上，右手在外面。开始走路。

当你碰到一个节点时，你会转身，这样你就不会越过任何边缘。也就是说，您开始按逆时针顺序遍历下一条边。（一个简单的实现是使用 atan2() 按方向对它们进行排序。）

这些都是基本的高中代数和三角学，但如果这是你第一次编写这种性质的东西，可能会有点粗糙。不过，你会学到很多东西。

# apache - 无论如何要在 Nutch 抓取中记录“忽略”的 url 列表？

> ID：15453097
> 
> 赞同：0
> 
> 时间：2013-03-16T18:36:43.493
> 
> 标签：apache, solr, web-crawler, nutch

我正在使用 Nutch 抓取深度为 100 且 topN 为 10,000 的种子文件中指定的 URL 列表，以确保完全抓取。另外，我正在尝试使用 regex-urlfilter [http://rubular.com/r/oSkwqGHrri忽略路径中具有重复字符串的 url](http://rubular.com/r/oSkwqGHrri)

但是，我很想知道在抓取过程中哪些 url 被忽略了。无论如何，我可以在 Nutch 爬行时记录被 Nutch “忽略”的 url 列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:21:41.673

可以使用以下命令找到链接

bin/nutch readdb PATH_TO_CRAWL_DB -stats -sort -dump DUMP_FOLDER -format csv

这将在 dump_folder 中生成 part-00000 文件，该文件将分别包含 url 列表及其状态。

状态为 db_unfetched 的已被爬虫忽略。

# java - java中的goto和cont关键字

> ID：15453098
> 
> 赞同：-5
> 
> 时间：2013-03-16T18:36:49.247
> 
> 标签：java

*如果 java 中没有使用 goto 和 const 关键字，那么为什么 java 将它们列在 java 关键字列表中。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:39:18.483

它们保留供将来使用，只是*尚未*使用。它们可能会在 Java 的未来版本中使用。

# linux-kernel - 在 ARM Target 上进行 uprobe 编程

> ID：15453102
> 
> 赞同：2
> 
> 时间：2013-03-16T18:37:06.867
> 
> 标签：linux-kernel, kernel

我想在目标 ARMV7 板上放置一个 uprobe，我有 uprobe_example.ko，它是针对内核 2.6.39 构建的。

```
insmod uprobe_example.ko vaddr=$vaddr pid=$! 
```

Uprobes 处理被探测 + 进程生命周期中的有趣事件，例如 fork、clone、exec 和 exit。

`# insmod uprobe_example.ko pid=1461 vaddr=0x000084ac`
`[15245.267358] up: Unknown parameter`pid'`

我想用上面的参数插入这个模块，这是不允许的。

```
/*
* Usage: insmod uprobe_example.ko pid=<pid> vaddr=<address> [verbose=0]
* where <pid> identifies the probed process and <address> is the virtual
* address of the probed instruction.
*/

static int pid = 0;
module_param(pid, int, 0);
MODULE_PARM_DESC(pid, “pid”);

static int verbose = 1;
module_param(verbose, int, 0);
MODULE_PARM_DESC(verbose, “verbose”);

static long vaddr = 0;
module_param(vaddr, long, 0);
MODULE_PARM_DESC(vaddr, “vaddr”);

static int nhits;
static struct uprobe usp;

static void uprobe_handler(struct uprobe *u, struct pt_regs *regs)
{
nhits++;
if (verbose)
printk(KERN_INFO “Hit #%d on probepoint at %#lx\n”,
nhits, u->vaddr);
}

int __init init_module(void)
{
int ret;
usp.pid = pid;
usp.vaddr = vaddr;
usp.handler = uprobe_handler;
printk(KERN_INFO “Registering uprobe on pid %d, vaddr %#lx\n”,
usp.pid, usp.vaddr);
ret = register_uprobe(&usp);
if (ret != 0) {
printk(KERN_ERR “register_uprobe() failed, returned %d\n”, ret);
return -1;
}
return 0;
}

void __exit cleanup_module(void)
{
printk(KERN_INFO “Unregistering uprobe on pid %d, vaddr %#lx\n”,
usp.pid, usp.vaddr);
printk(KERN_INFO “Probepoint was hit %d times\n”, nhits);
unregister_uprobe(&usp);
} 
```

制作文件

```
obj-m   := uprobe_example.o

KERNELDIR   ?= $(DLI_KERNEL)
PWD := $(shell pwd)

default:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) EXTRA_CFLAGS=-I`pwd` modules
    #sync.sh up.ko

clean:
    rm -f *.o *.ko *.mod.c *.symvers
    rm -f trace/*.o arch/*.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:47:04.943

```
obj-m += uprobe_example.o

KERNELDIR ?= $(DLI_KERNEL)

all:
    make -C $(KERNELDIR)  M=$(PWD) modules

clean: 
    make -C $(KERNELDIR)  M=$(PWD) clean 
```

这个 Makefile 可以正常工作，没有任何错误

# macos - 使用 MouseTerm SIMBL 插件和 iTerm2 的 Terminal.app 之间的鼠标捕获差异

> ID：15453105
> 
> 赞同：0
> 
> 时间：2013-03-16T18:37:16.633
> 
> 标签：macos, terminal, iterm, terminal-emulator, iterm2

iTerm2：

鼠标报告开箱即用，在 Vim 中工作，在 Tmux 中完全工作，鼠标滚轮报告在 Vim 中工作并用于导航 Tmux 历史记录，但**鼠标滚轮报告在联机帮助页中不起作用`git log`，在 .`less`**

终端应用程序：

鼠标报告不能开箱即用，但是一旦安装鼠标滚轮报告就可以在任何地方工作，包括手册页`less`和`git log`等。但是鼠标单击+拖动在 Tmux 中失败，但在 Vim 中仍然有效。

所以我宁愿只使用这些终端应用程序中的一个，而且我特别挖掘 iTerm2 的巨大功能集（例如，鼠标悬停以选择要输入的术语比 Tmux 可以提供的任何东西都要好，因为它是**零**键切换上下文）所以我希望我可以让鼠标滚轮报告在这些程序中完全工作。

我很难调试正在发送的终端代码，因为我可以拦截它们的唯一方法是通过 Vim，（因为 ctrl+V 然后在我的终端中滚动只会让它滚动终端缓冲区）但 Vim 似乎正确地做所有事情。

更新：根据 mouseterm 项目，它似乎正在使用一个名为“模拟鼠标滚轮滚动”的功能来滚动程序，比如`less`......也许我可以配置 iTerm 来做同样的事情。不知何故。~~我确实相信 PuTTY 也能做到这一点，而且我希望*至少*拥有我可以在 Mac 上的 Windows 上获得的功能......~~不，我只是被 MouseTerm 的整洁所宠坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:10:22.720

`less`实际上并不识别任何终端鼠标事件。（因此，使用它的工具也喜欢`man`并且`git log`不会识别鼠标事件。）您所做的其他事情必须使它*看起来*支持鼠标事件。

如果你想让鼠标滚轮在你的寻呼机中工作，你需要找到一个不`less`支持它的寻呼机。您可能可以使用`view`(`vim`在只读模式下) 将某些内容放在一起，但是诸如`man`使用控制代码输出内容之类的应用程序将是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T11:37:47.793

尽管 less（也用于`git log`）本身不使用鼠标报告，但 iTerm2 可以配置为发送向上/向下箭头转义码以进行滚动（从鼠标滚轮或触控板两指滑动）并且 less 理解这些。

请参阅我 对有关如何为 iTerm2 进行设置的相关问题的[回答。](https://stackoverflow.com/a/24695541/18829)

# triggers - 未来方法不更新字段的值

> ID：15453108
> 
> 赞同：0
> 
> 时间：2013-03-16T18:37:40.257
> 
> 标签：triggers, salesforce, visualforce, force.com

我想使用 apex 在 salesforce 中实现同步。

我的要求是，我必须从将来的方法中更新一个字段。

我在数据库中有一个名为 Counter_c 的字段，*我正在调用一个方法，该方法将调用 3 个未来方法。那些未来的方法将尝试将计数器*_c 的值增加 1。但字段没有得到更新。

这是我的代码：

公共无效生成报告（）{

```
 ReportHistory__c repHst = new ReportHistory__c();
  repHst.Counter__c = 0;
  insert repHst;

  generateReport1(repHst.Id);
  generateReport2(repHst.Id);
  generateReport3(repHst.Id); 
```

}

```
@future
public static void generateReport1(Id id) {

List<ReportHistory__c> lstRep = [select Counter__c rom ReportHistory__c where Id = :id];
     if(!lstRep.isEmpty()) {
        ++lstRep[0].Counter__c;
     }
     update lstRep;
}

@future
public static void generateReport2(Id id) {

List<ReportHistory__c> lstRep = [select Counter__c rom ReportHistory__c where Id = :id];
     if(!lstRep.isEmpty()) {
        ++lstRep[0].Counter__c;
     }
     update lstRep;
}

@future
public static void generateReport3(Id id) {

List<ReportHistory__c> lstRep = [select Counter__c rom ReportHistory__c where Id = :id];
     if(!lstRep.isEmpty()) {
        ++lstRep[0].Counter__c;
     }
     update lstRep;
} 
```

执行上述代码后，我希望 Counter__c 应为 3。但它仍然为 0 或有时为 1。

请帮助我，如果有任何方法可以控制将来的调用，以便将来的每个调用都应将 Counter__c 的值更新 1。

谢谢，维维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T02:40:12.620

从您的示例代码看来，`lstRep.isEmpty()`检查缺少否定。

例如`!`，在 if 条件中添加 a。

```
@future
public static void generateReport1(Id id) {

    List<ReportHistory__c> lstRep = [select Counter__c rom ReportHistory__c where Id = :id];
    if(!lstRep.isEmpty()) {
        lstRep[0].Counter__c++;
    }
    update lstRep;
} 
```

您未来的方法也有可能从队列中拉出并由不同的应用程序服务器并行处理。如果是这种情况，您会遇到并发问题。阅读[Force.com 中的异步处理](http://www.salesforce.com/us/developer/docs/async_processing/salesforce_async_processing.pdf)。您可以尝试将`FOR UPDATE`关键字添加到您的 SOQL 查询中，但这可能会导致您未来的某些方法超时。

# php - 致命错误：使用 ip2long 函数时允许的内存大小

> ID：15453111
> 
> 赞同：0
> 
> 时间：2013-03-16T18:38:08.047
> 
> 标签：php, ip

我正在使用下面的 ip2Long 函数，

```
function ip_range($start, $end) {
    $start = ip2long($start);
    $end = ip2long($end);
    return array_map('long2ip', range($start, $end) );
}

$range_one = "86.188.249.48 ";
$range_two = "86.188.249.55";
print_r( ip_range($range_one, $range_two) ); 
```

但我收到以下错误：

> 致命错误：第 6 行 /home/site/public_html/path/checkrange.php 中允许的内存大小为 33554432 字节已用尽（尝试分配 32 字节）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:40:35.810

`$range_one`不被视为有效 IP。如果您删除最后的空间，那么这对我有用：

`$range_one = "86.188.249.48";`

为避免将来发生这种情况，您应该`trim`：

```
$start = ip2long(trim($start));
$end = ip2long(trim($end)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:41:56.297

是变量末尾的**空格。**

```
$range_one = "86.188.249.48 ";
                        // ^ Remove this 
```

# ruby-on-rails-3 - 删除两个关联的 Mongoid 模型中的冗余字段

> ID：15453114
> 
> 赞同：0
> 
> 时间：2013-03-16T18:38:25.357
> 
> 标签：ruby-on-rails-3, class, mongoid, omniauth

在我的`omniauth`&`omniauth-identity`基于应用程序中，我遇到了以下问题：

管理用户数据的三个表：

```
# Stores User data _not_ authentication data
class User
  include Mongoid::Document

  has_many :identities
  field :email, type: String
end

# Stores Authentication data (i.e. Facebook)
class Identity
  include Mongoid::Document

  belongs_to :user
end

# Stores Authentication data for omniauth-identity
class LocalIdentity < Identity
  include OmniAuth::Identity::Models::Mongoid

  field :email, type: String
end 
```

现在的问题是我在`LocalIdentity`. 因此，每当用户在模型中更改他的电子邮件地址时，`User`我都需要同步电子邮件地址。起初这似乎微不足道，但一旦涉及更多领域等，就会变得非常混乱。

所以我的问题是：有没有办法消除和之间的`User`冗余`LocalIdentity`？

在思考解决方案时，我得出以下结论：

*   不支持多重继承，因此`LocalIdentity < Identity, User`不起作用
*   `LocalIdentity`嵌入在每个和`User`写入槽中的值将不起作用 b/c 验证不起作用

# ruby - 使用 Nokogori 遍历多个 URL 以解析 HTML

> ID：15453115
> 
> 赞同：1
> 
> 时间：2013-03-16T18:38:27.123
> 
> 标签：ruby, nokogiri, open-uri

我正在尝试使用 Nokogiri 从多个供应商处获取商品的名称和价格。我通过方法参数将 CSS 选择器（查找名称和价格）传递给 Nokogiri。

有关如何将多个 URL 传递给“scrape”方法同时还传递其他参数（例如：供应商、i​​tem_path）的任何指导？还是我以完全错误的方式解决这个问题？

这是代码：

```
require 'rubygems' # Load Ruby Gems
require 'nokogiri' # Load Nokogiri
require 'open-uri' # Load Open-URI

@@collection = Array.new # Array to hold meta hash

def scrape(url, vendor, item_path, name_path, price_path)
    doc = Nokogiri::HTML(open(url)) # Opens URL
    items = doc.css(item_path) # Sets items
    items.each do |item| # Iterates through each item on grid
        @@collection << meta = Hash.new # Creates a new hash then add to global array
        meta[:vendor] = vendor
        meta[:name] = item.css(name_path).text.strip
        meta[:price] = item.css(price_path).to_s.scan(/\d+[.]\d+/).join 
    end
end

scrape( "page_a.html", "Sample Vendor A", "#products", ".title", ".prices")
scrape( ["page_a.html", "page_b.html"], "Sample Vendor B",  "#items", ".productname", ".price") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:48:29.583

`url's`您可以在第二个示例中以相同的方式传递多个：

```
scrape( ["page_a.html", "page_b.html"], "Sample Vendor B",  "#items", ".productname", ".price") 
```

您的`scrape`方法将不得不遍历这些`urls`，例如：

```
def scrape(urls, vendor, item_path, name_path, price_path)
  urls.each do |url|
    doc = Nokogiri::HTML(open(url)) # Opens URL
    items = doc.css(item_path) # Sets items
    items.each do |item| # Iterates through each item on grid
        @@collection << meta = Hash.new # Creates a new hash then add to global array
        meta[:vendor] = vendor
        meta[:name] = item.css(name_path).text.strip
        meta[:price] = item.css(price_path).to_s.scan(/\d+[.]\d+/).join 
    end 
  end   
end 
```

这也意味着第一个示例也需要作为数组传递：

```
scrape( ["page_a.html"], "Sample Vendor A", "#products", ".title", ".prices") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:44:20.663

仅供参考，使用`@@collection`是不合适的。相反，编写您的方法以返回一个值：

```
def scrape(urls, vendor, item_path, name_path, price_path)
  collection = []
  urls.each do |url|
    doc = Nokogiri::HTML(open(url)) # Opens URL
    items = doc.css(item_path) # Sets items
    items.each do |item| # Iterates through each item on grid
      collection << {
        :vendor => vendor,
        :name   => item.css(name_path).text.strip,
        :price  => item.css(price_path).to_s.scan(/\d+[.]\d+/).join
      }
    end 
  end   

  collection
end 
```

可以简化为：

```
def scrape(urls, vendor, item_path, name_path, price_path)
  urls.map { |url|
    doc = Nokogiri::HTML(open(url)) # Opens URL
    items = doc.css(item_path) # Sets items
    items.map { |item| # Iterates through each item on grid
      {
        :vendor => vendor,
        :name   => item.css(name_path).text.strip,
        :price  => item.css(price_path).to_s.scan(/\d+[.]\d+/).join
      }
    } 
  }
end 
```

# intuit-partner-platform - 用户代码未处理 InvalidTokenException - “未经授权”

> ID：15453120
> 
> 赞同：0
> 
> 时间：2013-03-16T18:38:47.813
> 
> 标签：intuit-partner-platform, quickbooks-online

这是我的代码：

```
string accessToken = "##"; 
```

字符串 accessTokenSecret = "##"; 字符串 consumerKey = "##"; 字符串 consumerSecret = "##"; 字符串 appToken = "##"; 字符串领域 ID = "##"; //在线快速手册中的公司ID

OAuthRequestValidator oauthValidator = new OAuthRequestValidator(accessToken, accessTokenSecret, consumerKey, consumerSecret);
ServiceContext context = new ServiceContext(oauthValidator, appToken, realmId, IntuitServicesType.QBO);

我收到：**用户代码未处理 InvalidTokenException - {"Unauthorized"}** 在创建新的 ServiceContext 行中。不确定是什么问题。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:51:54.407

此错误消息：

> 用户代码未处理 InvalidTokenException - {"Unauthorized"}

当您使用的 OAuth 令牌不再有效时发生。

我会仔细检查：

*   您正在使用从 Intuit 获得的一组有效 OAuth 令牌
*   令牌未过期（如果您设置自己的实际 OAuth 端点，Developer Playground 令牌的寿命很短，可以使用更长寿命的 6 个月令牌）

这是 Intuit 用于设置您自己的 OAuth 端点的文档：

*   [http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App)

# segmentation-fault - 英特尔 NASM 中的分段错误

> ID：15453125
> 
> 赞同：0
> 
> 时间：2013-03-16T18:39:34.300
> 
> 标签：segmentation-fault, nasm, intel, fault

我正在尝试编写一个 NASM 汇编程序，它将一个 5x5 矩阵传递给一个子程序，这个子程序将返回最大值。我所做的是将每个元素压入堆栈，然后在比较值时将它们一个一个弹出。当我尝试弹出这些值时出现“分段错误”错误，我不明白为什么

```
 segment .data

        hello db "hello",0xa
        hellol equ $-hello

segment .bss

        largest resw 1
        temp resw 1

        matrix resw 25

segment .text

        global _start

_start:
        ;initializing matrix
        mov [matrix + 0*2],word 50 ;Row 1
        mov [matrix + 1*2],word 52
        mov [matrix + 2*2],word 28
        mov [matrix + 3*2],word 12
        mov [matrix + 4*2],word 9
        mov [matrix + 5*2],word 2 ;Row 2
        mov [matrix + 6*2],word 21
        mov [matrix + 7*2],word 3
        mov [matrix + 8*2],word 124
        mov [matrix + 9*2],word 1
        mov [matrix + 10*2],word 23 ;Row 3
        mov [matrix + 11*2],word 32
        mov [matrix + 12*2],word 55
        mov [matrix + 13*2],word 83
        mov [matrix + 14*2],word 325
        mov [matrix + 15*2],word 321 ;Row 4
        mov [matrix + 16*2],word 1
        mov [matrix + 17*2],word 22
        mov [matrix + 18*2],word 11
        mov [matrix + 19*2],word 2
        mov [matrix + 20*2],word 213 ;Row 5
        mov [matrix + 21*2],word 4
        mov [matrix + 22*2],word 52
        mov [matrix + 23*2],word 83
        mov [matrix + 24*2],word 32

        mov ecx,25 ;Set the loop counter to 25
        mov esi,0 ;set index counter to 0

        pushLoop: ;Push all the elements from matrix onto the stack
                mov eax,[matrix + esi*2]
                push eax
                inc esi
                        loop pushLoop

        call findLargest

        call printLargest ;Not yet implemented, only prints "hello"

exit:
        mov eax,1
        xor ebx,ebx
        int 0x80
;Exit

findLargest: ;Finds the largest number in matrix and stores it in "largest"

        mov ebx,0 ;ebx will store the largest value
        mov ecx,25
        largestLoop:
                pop eax         ;Error is here, Segmentation fault....
                cmp eax,ebx
                jle skip
                mov ebx,eax
                skip:
                        loop largestLoop
        ;End of largestLoop
        mov [largest],ebx

ret
;end of findLargest subroutine

printLargest:
        mov eax,4
        mov ebx,1
        mov ecx,hello
        mov edx,hellol
        int 0x80
ret 
```

如果我注释掉产生错误的行，程序将正常运行

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:49:07.473

你为什么要推动每个元素？只需将矩阵的地址传递给您的程序。

此外，当您推送这些元素然后调用函数时，这些元素在堆栈上而不是在 eax 中，所以它们将在`esp`. 堆栈是 DWORD 对齐的，而不是字对齐的。

如果这些是您正在使用的值，您可以在数据部分中设置数组的值。

现在已经不碍事了，你应该做/尝试的第一件事是循环遍历数组并打印每个元素。一旦你把它弄下来，修改以测试最大的数字。

```
segment .data
fmt         db "%d",10, 0
matrix      dd 50, 52, 28, 12, 9, 2, 21, 3, 124, 1, 23, 32, 55, 83
            dd 325, 321, 1, 22, 11, 2, 213, 4, 52, 83, 32
matrix_len equ ($ - matrix) / 4 - 1

segment .text

extern printf, exit
global _start

_start:

    push    matrix
    call    findLargest

    call    exit

findLargest:
    push    ebp
    mov     ebp, esp                        ; array pointer is now in [ebp + 8]

    mov     esi, dword[ebp + 8]             ; pointer to our array
    mov     ebx, matrix_len                 ; loop counter
    mov     edi, 0                          ; 

PrintEm:
    push    dword [esi + edi * 4]           ; print each element in the array = Base pointer + index * scale
    push    fmt
    call    printf
    add     esp, 4 * 2 
    inc     edi                             ; step index
    dec     ebx                             ; decrease loop counter
    jns     PrintEm                         ; if not -1 repeat loop

    mov     esp, ebp
    pop     ebp
    ret     4                               ; pushed 1 dword 
```

好的，它遍历矩阵数组并正确打印每个值。现在修改它以找到最大值...

![在此处输入图像描述](../Images/212e1b4f344275b730ac366c638d6bc5.png)

# postgresql - 我应该从 PostgreSQL search_path 中删除“$user”吗？

> ID：15453128
> 
> 赞同：1
> 
> 时间：2013-03-16T18:39:49.647
> 
> 标签：postgresql, optimization, configuration

的默认设置`search_path`是`"$user",public`。根据[手册](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html#DDL-SCHEMAS-PATH)：

> 第一个元素指定要搜索与当前用户同名的模式。如果不存在这样的模式，则忽略该条目。

什么时候会检查 $user 模式的存在？在会议开始时？或者也许每次需要解决不合格的对象时？如果我知道我只会在数据库中使用“公共”模式，那么删除“$user”条目是否有意义？

我意识到这不会对性能产生显着影响，但它可能会使设置更加明确......为什么会有一些`search_path`永远不会被使用的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:55:25.010

如果你

> 知道我只会使用“公众”

.. 从`search_path`. 你没有任何好处。
无论如何，我在所有集群中都这样做。

# php - 使用 jquery ajax 显示 pdf blob

> ID：15453129
> 
> 赞同：0
> 
> 时间：2013-03-16T18:39:53.750
> 
> 标签：php, jquery, ajax, pdf

这是我的 jQuery： $( document ).ready(function() { var instrID; var cat;

```
 $(window).load(function(){

    });

            $.post('ajax.php', {InstrumentID: instrID, catView: "pdf"}, function(data){

            $('#displayPDF').append("<php> header('Content-type: application/pdf') </php>");
            $('#displayPDF').append("<php> echo("+ data +") </php>");
        }); 
```

这是我的 ajax 或 ajax.php：

```
<?php

include '../include/xxxxx.php';

$instrumentID = $_POST['InstrumentID'];
$category = $_POST['catView'];

$sql = "SELECT * FROM `xxxxx` WHERE `InstrumentID` = '" . $_POST['InstrumentID'] . "'";

$results = mysql_query($sql);

    if($category == "pdf")
{
    header("Content-type: application/pdf");
    echo (mysql_result($results, 0, 'Instrument'));
}
?> 
```

这是我的 div displayPDF 它是空的：

```
<div id="displayPDF">

</div> 
```

jQuery 和 div 在同一个 php 文件中。我想在单击事件发生的同一页面中显示 pdf。除了获取 pdf 外，一切正常。当 pdf 回显到 div 时，它只是作为一堆字符返回。我要显示的 pdf 小于 1 mb。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-05-28T09:33:36.503

也许这不是对特定问题的答案，但是，这个问题是在第一次谷歌搜索时出现的，所以我想分享我在`blob`数据时下载 pdf 的方法。

```
$.ajax({
  url: 'someurl',
  method: 'get',
  data: { param1: value1, param2: value2 },
  xhr: function() {
    const xhr = new XMLHttpRequest();
    xhr.responseType= 'blob'
    return xhr;
  },
  success: function (blob) {
    const link=document.createElement('a');
    link.href=window.URL.createObjectURL(blob);
    link.download="my-pdf-file-name";
    link.click();
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:01:18.407

您还没有为 设置值`instrID`，也没有对输入进行消毒。

无论如何，您可以将pdf嵌入页面而不是使用ajax

```
var source = 'ajax.php?InstrumentID='+encodeUriComponent(instrID)+'&catView=pdf';
$('#displayPDF').append('<object data="'+source+'" type="application/pdf">'+
                        '<embed src="'+source+'" type="application/pdf"/></object>'); 
```

然后使用`$_GET`而不是在您的 php.ini 中发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:00:39.447

我认为您不能以这种方式显示 PDF 内联。尝试切换到 iframe - 这应该可以。那就是将 iframe 的位置设置为您的 ajax.php。

# javascript - Cookies 生成一些随机值

> ID：15453133
> 
> 赞同：0
> 
> 时间：2013-03-16T18:40:24.843
> 
> 标签：javascript, jsp, cookies

.jsp 文件

```
<% 

               String stateforcookie=request.getParameter("stateforcookie");
               if(stateforcookie != null ) {
               Cookie cookies2 = new Cookie("statecookie",stateforcookie);

               cookies2.setMaxAge(365 * 24 * 60 * 60);
               response.addCookie(cookies2);
               }                  
               String state=request.getParameter("state");
               Cookie[] cookies2=null;
               cookies2 = request.getCookies();
               out.print(cookies2);

               if (state==null) { if(cookies2 != null)
                                    state=cookies2[0].getValue(); }
              if(cookies2[0].getValue() == null) {
               %>

<body onload="po(0);">
<% }else { %>
<body onload="po(1);">
<% } %>

<div id="popup">
<div id="contenttt">
<form method="post" action="home.jsp">
Choose Your State:<input id="popuptext" type="text" name="stateforcookie" />
 <input id="popupclose" type="submit" value="submit" />   
</form>
</div>      
</div> 
```

javascript:

```
<script type="text/javascript">  
function po(i) {

 if(i==1){
 $('#popup').hide("slow");
    }
  else if(i==0){$('#popup').show("slow");}
}
$(function(){   
     $('#popupclose').click(function(){

        $('#popup').hide("slow");

    });

});   
</script> 
```

1.这里我正在尝试将值存储到cookie，如果cookie为空，它将弹出一个带有文本框的窗口。如果 cookie 不为空，则不会显示弹出窗口。

但我遇到了线路问题 - out.print(cookies2); 它打印：-

> [Ljavax.servlet.http.Cookie;@1d6bff7

1.  if(cookies2[0].getValue() == null) 抛出空指针异常.. 即使删除所有浏览数据后，我也会遇到同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:28:46.823

如果不为 cookie 赋值，当它为 null 时您无法进行比较，因此您的弹出窗口将不会被执行。cookies2 第一次为空，它抛出空指针异常

> if(cookies2 != null) { if(cookies2[0].getValue() != null) {} }

我修改了你的，试试这个弹出窗口。你应该使用 for 循环来获取存储在 cookie 中的值，就像我在下面所做的那样

```
<% 

           String stateforcookie=request.getParameter("stateforcookie");
      out.println(stateforcookie);
      Cookie cookies2=null;
      Cookie[] cookies1=null;
           if(stateforcookie != null ) {
           cookies2 = new Cookie("statecookie",stateforcookie);

           cookies2.setMaxAge(365 * 24 * 60 * 60);
           response.addCookie(cookies2);

           }

           String state=request.getParameter("state");

           cookies1 = request.getCookies();

           if(cookies1 != null) 
           for (int i = 0; i < cookies1.length; i++) {
               if (cookies1[i].getName().equals("statecookie")) {
                out.println(cookies1[i].getValue());
                state=cookies1[i].getValue();
                session.setAttribute("statecookie",state);
                 break;
               }
             }

           %> 
```

# mongodb - 如何找出 mongodb 崩溃的原因？

> ID：15453138
> 
> 赞同：9
> 
> 时间：2013-03-16T18:40:36.183
> 
> 标签：mongodb

我最近开始让我的 mongodb 实例在 ubuntu 机器上随机崩溃，它通常会持续一天左右。mongo日志没有崩溃的痕迹，只有最后一次操作和我重新启动服务器时。我需要一些指导来找出问题并且日志没有任何信息。我应该查看另一个日志吗？

mongodb 2.2 的设置相当简单，单实例（无分片），运行在 ubuntu 机器上，几乎有默认安装。

我最近所做的唯一改变似乎与时间上的这一点是一致的，我用聚合框架替换了一些简单的 map reduce 执行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T21:37:57.163

MongoDB 非正式地让 Mtools 尝试下载并在此工具中使用您的日志运行。它可以为您提供失败的原因、重新启动的次数以及更多详细信息。你可以在 github 上得到这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-12T18:36:20.003

通过Logs可以查看崩溃的实际原因

```
/var/log/mongodb/mongod.log  ####Common path of logs
 or use this command                   

db.adminCommand( { getLog : "global" } ) 
```

# python - 如何为收到的 GAE 电子邮件支持不同的处理程序？

> ID：15453142
> 
> 赞同：2
> 
> 时间：2013-03-16T18:40:57.807
> 
> 标签：python, regex, google-app-engine, email, python-2.5

根据[GAE 文档](https://developers.google.com/appengine/docs/python/mail/receivingmail)，可以支持多个处理程序来处理传入的电子邮件。我想支持两个：

1.  *string@appid.appspotmail.com*应该去 Handler1；
2.  *string+something@appid.appspotmail.com*应该去Handler2；

看起来我应该有类似的东西：

```
- url: /_ah/mail/<???>your_app_id\.appspotmail\.com
  script: handler2.app
  login: admin
- url: /_ah/mail/.+
  script: handler1.app
  login: admin 
```

正则表达式（？）应该如何将发送到带有加号的电子邮件的消息路由到另一个处理程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:36:48.713

**[更新]** 以下配置对我有用。

```
- url: /_ah/mail/string@.*your_app_id\.appspotmail.com
  script: handler2.app
  login: admin
- url: /_ah/mail/string%2B.*@.*your_app_id\.appspotmail.com
  script: handler1.app
  login: admin
- url: /_ah/mail/.+
  script: catchall.app
  login: admin 
```

# bash - 退出 if / for 成功

> ID：15453143
> 
> 赞同：0
> 
> 时间：2013-03-16T18:40:58.620
> 
> 标签：bash, shell, if-statement, for-loop

我创建了一个脚本来比较两个文件中的值并在两种情况下（成功或失败）输出消息。但后来我意识到，即使成功，脚本也会继续将主变量（jbid）与第二个文件中的所有其他变量（bsid）进行比较，这是我不想要的。我希望第二个 for 循环在“if”成功时结束。

我将 tmpcsv2 中的“jbsid”与文件 bkid 中的“bsid”进行比较。

```
for jbid in `cat tmpcsv`; do #1st Loop

    for bsid in `cat bkid`; do #2nd Loop

        ckid=`echo $bsid | cut -d "," -f1`
        jbsiz=`echo $bsid | cut -d "," -f2`

        if [ "$jbid" -eq "$ckid" ]; then
          printf "There's a match at $ckid\n"  
        else
          printf "No Match Found at $ckid\n"
        fi

    done

    printf "Check for ID $jbid done\n"
    sleep 2
done 
```

我可能使用了错误的方式来执行此操作，并且也打开了更短/更清晰的表单！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:12:47.990

只需在真正的条件分支中添加“break”即可。

另外，我对 jbid 和 ckid 之间的比较感到困惑。jbsiz 是干什么用的？

```
for jbid in `cat tmpcsv`; do #1st Loop

    for bsid in `cat bkid`; do #2nd Loop

        ckid=`echo $bsid | cut -d "," -f1`
        jbsiz=`echo $bsid | cut -d "," -f2`

        if [ "$jbid" -eq "$ckid" ]; then
          printf "There's a match at $ckid\n"
          break   
        else
          printf "No Match Found at $ckid\n"
        fi

    done

    printf "Check for ID $jbid done\n"
    sleep 2
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:12:56.477

```
if [ "$jbid" -eq "$ckid" ]; then
    printf "There's a match at $ckid\n"   
    break 
```

这应该使第二个 for 循环在匹配时结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:16:43.487

```
if [ "$jbid" -eq "$ckid" ]; then
          printf "There's a match at $ckid\n"
          break   
        else
          printf "No Match Found at $ckid\n"
        fi 
```

`then - else`在;之间添加中断 就像上面的代码一样。

# charts - Highcharts：通过单击按钮更改饼图颜色

> ID：15453144
> 
> 赞同：2
> 
> 时间：2013-03-16T18:40:59.007
> 
> 标签：charts, click, highcharts, pie-chart

我想知道是否有人能弄清楚我如何将这个折线图更改为饼图，并且仍然让按钮像线条颜色一样改变饼图的颜色？

[http://jsfiddle.net/jugal/637ns/](http://jsfiddle.net/jugal/637ns/)

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });

    // the button handler
    $('#button').click(function() {
        chart.series[0].color = "#FF0000";
        chart.series[0].graph.attr({ stroke: '#FF0000' });

        $.each(chart.series[0].data, function(i, point) {
           point.graphic.attr({ fill: '#FF0000' });            
         });
        chart.redraw();
    });
}); 
```

我想添加一个点击事件来改变饼图的颜色。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:42:14.987

您应该使用属性填充来更改切片颜色：http: [//jsfiddle.net/637ns/8/](http://jsfiddle.net/637ns/8/)

```
 chart.series[0].data[4].graphic.attr({ fill: '#FF0000' }); 
```

# objective-c - 在 UILabel 中显示 NSTimer 计数

> ID：15453145
> 
> 赞同：0
> 
> 时间：2013-03-16T18:41:02.957
> 
> 标签：objective-c, xcode4, nsstring, int

我想显示加载进程的倒计时，并了解不允许将`ARC`其转换`int`为`NSString`. 我怎样才能显示我`count`的内`NSString`？

```
static int count = 0;
count++;

NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:(5.0) 
                          target:self 
                          selector:@selector(uploadData) 
                          userInfo:nil 
                          repeats:NO];

if (count <= 5)
{
    ilabel.text = @"Please be patient...";
    NSString *counter = count;
    counterLabel.text = counter;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:43:21.267

可能最简单的方法是：

```
NSString* counter = [NSString stringWithFormat: @"%d", count]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:43:06.073

```
counterLabel.text = [NSString stringWithFormat:@"%d",count]; 
```

# c# - 无法将数据源绑定到 reportViewer

> ID：15453146
> 
> 赞同：0
> 
> 时间：2013-03-16T18:41:04.727
> 
> 标签：c#, reporting-services, reportviewer

我有一个使用`reportViewer`. 我想在一个`reportViewer`. 这是单个报告的代码：

```
ReportDataSource rds = new ReportDataSource();
this.reportViewer1.LocalReport.DataSources.Clear();
if (comboBoxReports.SelectedIndex == 0)
{
    reportViewer1.Reset();
    reportViewer1.LocalReport.ReportPath = "D:\\AMOS\\WindowsFormsApplication1\\WindowsFormsApplication1\\Report2.rdlc";
    rds.Name = "First_Year_IT_AttendanceBindingSource";
    rds.Value = this.First_Year_IT_AttendanceBindingSource;
    reportViewer1.LocalReport.DataSources.Add(rds);  
    this.reportViewer1.RefreshReport();
} 
```

但是，当我运行我的应用程序时，出现以下错误

> 尚未为数据源“DataSet1”提供数据源实例

可能的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:39:53.857

1.  以文本形式打开 rdlc 文件
2.  将**DataSet1**替换为**First_Year_IT_AttendanceBindingSource**

检查 rdlc 中的列（字段）是否与数据源中的列“相等”

# android - 如何在以搜索为主要关注点的应用中实现数据库搜索？

> ID：15453148
> 
> 赞同：0
> 
> 时间：2013-03-16T18:41:11.180
> 
> 标签：android, asynchronous

我正在开发一个应用程序，该应用程序通过 REST API 从主视图调用数据库并以 JSON 格式返回结果，以进行解析并可能以 ListView 格式显示在新视图上。从结果列表视图中，用户可以单击特定结果并查看包含特定于该地点的信息的“地点视图”。填充 ListView 的最初返回的 JSON 对象可能会用于填充地点页面。我一直在做很多关于如何最好地实现这一点的研究，似乎没有任何正确的答案或共识。我的几个问题：

1.  主搜索和结果列表视图应该是一项活动吗？如果是，我似乎可以使用 AsyncTask 对外部数据库进行搜索。这对 AsyncTask 有好处吗？

2.  如果主搜索和结果是单独的活动，我还能使用 AsyncTask，还是必须变得更复杂并使用服务来进行调用？我的脑海中已经有了这样一个想法，即 AsyncTask 只能在一个活动中使用，而不是从一个活动中获取搜索词并将结果返回给另一个活动。有人可以为我澄清一下吗？

3.  有没有一种正确的方法来实现这种非常常见的搜索？

4.  谁能指出我正在执行类似搜索和响应的示例代码？我对创建实际的 REST 方法有示例代码和理解，但我希望看到一些代码能够正确实现像我这样的搜索结构（rest api、不同视图中的输入和结果等）。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:03:02.277

我必须开发一款功能与您正在开发的应用程序非常相似的应用程序。以下是我在您的情况下会做的一些想法：

1.  主搜索和结果列表视图应该是一项活动吗？我会说不，最好将主要搜索分成单独的活动。

2.  如果主搜索和结果是单独的活动，我还可以使用 AsyncTask 吗？我使用了 IntenetService ResultReceiver 模式。我发现一旦设置好它，就很容易适应任何休息呼叫。这是我用来学习如何使用它的链接。[实现 Rest 客户端的现代技术](http://neilgoodman.net/2012/01/01/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-2/)。

# python - 无法解码任何 JSON 对象以尝试获取推文

> ID：15453154
> 
> 赞同：1
> 
> 时间：2013-03-16T18:41:46.483
> 
> 标签：python, twitter

我正在使用 twitter API 来获取推文。这是我的代码。我收到一个错误（“无法解码任何 JSON 对象”）。

```
import json
import urllib
def main():
    f1 = open('tweet-stream.json')
    count = 0
    for line in f1:
        d = json.loads(line)
        lang =  d['user']['lang']
        status_count = d['user']['statuses_count']
        print 'Language: ' + lang + 'Status Count' + str(status_count)

if __name__ == "__main__":
    main() 
```

这是我在终点站

```
Traceback (most recent call last):
  File "parseJSON.py", line 14, in <module>
    main()
  File "parseJSON.py", line 8, in main
    d = json.loads(line)
  File "/usr/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 360, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 378, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

这是存储在 JSON 文件中的推文之一

```
{"created_at":"Sat Mar 16 06:12:21 +0000 2013","id":312808537338310656,"id_str":"312808537338310656","text":"\u30d6\u30ed\u30b0\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002 \u300e\u30102013\u5e74\u3000Toshu\u30fbDIARY \u958b\u904b\u30c7\u30b6\u30a4\u30f3\uff06\u30ab\u30e9\u30fc\u6df1\u898b\u6771\u5dde\u6240\u9577\u76e3\u4fee\u3011\u300f http:\/\/t.co\/NiOLa0pc8C","source":"\u003ca href=\"http:\/\/www.ameba.jp\/\" rel=\"nofollow\"\u003eAmeba_Blog\u003c\/a\u003e","truncated":false,"in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":559152618,"id_str":"559152618","name":"miloku","screen_name":"UsUsafukami","location":"Japan","url":"http:\/\/www.worldmate.or.jp","description":"\u3010\u5de8\u5927\u5730\u9707\u30fb\u5bcc\u58eb\u5c71\u306e\u7206\u767a\u30fb\u81ea\u7136\u707d\u5bb3\u304c\u8d77\u304d\u307e\u305b\u3093\u3088\u3046\u306b\u3011","protected":false,"followers_count":1109,"friends_count":1993,"listed_count":1,"created_at":"Sat Apr 21 00:54:26 +0000 2012","favourites_count":3,"utc_offset":null,"time_zone":null,"geo_enabled":false,"verified":false,"statuses_count":18457,"lang":"ja","contributors_enabled":false,"is_translator":false,"profile_background_color":"642D8B","profile_background_image_url":"http:\/\/a0.twimg.com\/images\/themes\/theme10\/bg.gif","profile_background_image_url_https":"https:\/\/si0.twimg.com\/images\/themes\/theme10\/bg.gif","profile_background_tile":true,"profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/3370777841\/6415f2a1d738896eddf1e5f3d9a308a8_normal.png","profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/3370777841\/6415f2a1d738896eddf1e5f3d9a308a8_normal.png","profile_link_color":"FF0000","profile_sidebar_border_color":"65B0DA","profile_sidebar_fill_color":"7AC3EE","profile_text_color":"3D1957","profile_use_background_image":true,"default_profile":false,"default_profile_image":false,"following":null,"follow_request_sent":null,"notifications":null},"geo":null,"coordinates":null,"place":null,"contributors":null,"retweet_count":0,"entities":{"hashtags":[],"urls":[{"url":"http:\/\/t.co\/NiOLa0pc8C","expanded_url":"http:\/\/amba.to\/XsoEt0","display_url":"amba.to\/XsoEt0","indices":[53,75]}],"user_mentions":[]},"favorited":false,"retweeted":false,"possibly_sensitive":false,"filter_level":"medium"} 
```

# php - 键入 Url 会加载 php 并在数据库中输入空值。如何避免？

> ID：15453157
> 
> 赞同：1
> 
> 时间：2013-03-16T18:41:57.270
> 
> 标签：php

如果我输入我的 php 代码的 url，它会直接运行并将空值提交到数据库中。我希望该 php 文件仅在按下提交按钮时运行，而不是在直接输入 url 时运行。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:51:26.357

检查是否设置了变量之一。

```
if (isset($_POST['oneOfMyVariables'])) {
  //run some code only if something or many things are send. Whatever.
} 
```

除非已设置变量，否则它将停止运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:52:04.250

在文件的开头确保验证您的 $_GET 或 $_POST 数组（取决于您用于提交表单的方法）是否包含一些最少量的数据。

假设您的表单上有两个输入元素（姓名和姓氏），例如：

```
<form action='myscript.php' method='post'>
     <input type='text' name='firstname' value='' /><br/>
     <input type='text' name='surname' value='' /><br/>
     <input type='submit' name='do' value=' submit this form ' />
</form> 
```

然后在你的文件的开头（在我的例子中它被称为`myscript.php`）你将有这样的东西：

```
if (!isset($_POST['firstname']) || strlen($_POST['firstname'])<4)
    die("You did not fill in the form properly - first name must be longer than 4 
if (!isset($_POST['surname']) || strlen($_POST['surname'])<3)
    die("You did not fill in the form properly - surname must be longer than 3 characters!");
//and here continues your code, where you save the surname and first name to the database 
```

# ios - NSDate 中的 NSDateComponents 产生了意想不到的结果

> ID：15453158
> 
> 赞同：0
> 
> 时间：2013-03-16T18:41:59.490
> 
> 标签：ios, date, nsdate, nscalendar, nsdatecomponents

我存储了一个 NS 日期，记录为

```
2013-03-15 00:00:01 +0000 
```

我认为 +0000 是 UTC 时间。但是，当我尝试

```
NSCalendar* theCalendar = [NSCalendar currentCalendar];

unsigned theUnitFlags = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

NSDateComponents* compsForDate = [theCalendar components:theUnitFlags fromDate:compDate]; 
```

组合记录为：

```
<NSDateComponents: 0xc0537b0>
    Calendar Year: 2013
    Month: 3
    Leap month: no
    Day: 14
    Hour: 20
    Minute: 0
    Second: 1
    Weekday: 5 
```

我会假设这一天是 15 小时，小时是 0，因为我认为没有与这个日期相关的时区。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:45:48.813

有一个与该日期-UTC 关联的时区。还有一个与您的日历相关联的时区；可能是您的区域设置中的时区（无论如何这是默认设置）。日历为您提供了在其时区解释该日期所产生的日期组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:02:50.540

时间字符串中的 +0000 表示 UTC（格林威治，英格兰）的小时偏移量。您在帖子中包含的结果时间组件是您的本地时区的时间。根据比较，您的本地时区与 UTC 相差 -4 小时。

凯文。

# css - 如何强制 div 扩展到其内容？

> ID：15453160
> 
> 赞同：1
> 
> 时间：2013-03-16T18:42:20.613
> 
> 标签：css

虽然我的问题之前已经回答了很多次，但是我尝试过所有提出的解决方案，但似乎没有任何效果。

*   我想做的是一个包含 li 标签的大 div；li 标签还将包含锚标签、2 个 div 和 p 标签。

*   了解大局..我正在尝试制作一个帖子墙（活动板），墙上的帖子看起来像一个气泡（div post），并且气泡将指向（后箭头）缩略图（拇指3 )，为了制作气泡样式，我将帖子 div 的绝对位置设置为 z-index 小于箭头。

*   这是我的CSS：

    ```
    .activity-board {

    background:#fff;
    width:600px;
    min-height:652px;
    height:auto;
    border:solid 2px #e7d28d;
    border-radius: 6px; 
    -moz-border-radius: 6px; 
     -webkit-border-radius: 6px;
    -webkit-box-shadow: inset 0px 0px 0px 3px rgba(255, 255, 255, 1);
     box-shadow: inset 0px 0px 0px 3px rgba(255, 255, 255, 1);
     float:left;
     margin-left:20px;

     }

       .post-body{
        position:relative;
        display:block;
        list-style-type:none;
        width:600px;
        height:auto;
        background:#f9f9f9;
        border-bottom:1px solid #CBCBCB;
        border-radius:4px 4px 0 0; 
        -moz-border-radius:4px 4px 0 0; 
            -webkit-border-radius:4px 4px 0 0;
        background: #fff;
        float:left;
        overflow:visible;
        clear:both;
        z-index:9;
        }

    .post{

    position:absolute;
    width:500px;
    line-height:20px;
    height:auto;
    background:#FFF;
    display:block;
    margin-top:22.5px;
    margin-left:77px;
    text-align:left;
    float:left;
    z-index:1;

    }

    .post-arrow{

     position:relative;
     margin-top:32px;
     margin-left:6px;
     width:12px;
     height:18px;
     background:url(images/post-arrow.png);
     float:left;
     z-index:5;

     }

    .post p{ color:#025373; padding:8px; word-wrap:break-word; }

    a.thumb-3 { 

    margin-top:18px;
    display:block;
    margin-left:18px;
    width:46px;
    height:46px;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    z-index:10;
    float:left;

    }

    a.thumb-3 img{

    padding:0;
    margin:0 auto;
    width:46px;
    height:46px;
    float:left;
    border-radius:3px; 
    -moz-border-radius:3px; 
    -webkit-border-radius:3px;

    } 
    ```

*   这是我的html：

    ```
    <ul>
     <li class="post-body">
          <a class="thumb-3"><img src="images/Alsheikh Center (177).jpg" /></a>
          <div class="post-arrow"></div>

          <div class="post">
            <p>
            Hi there!
            </p>

         </div>
     </li>
    </ul> 
    ```

[http://jsfiddle.net/r9YpX/](http://jsfiddle.net/r9YpX/)

一切正常，但 li 标签不会扩展到内容.. 如果我将帖子 div 的位置更改为相对而不是绝对，它只会扩展，我无法更改，因为它必须绝对定位在箭头图像下方才能给它泡沫的样子。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:57:29.783

好的，谢谢大家，我想通了。我做了位置：相对并更改了帖子 div 的边距，它起作用了！我以为我这样做了，但也许我做错了什么使其无法正常工作

# php - 使用 SQL、Javascript 和/或 PHP 使用下拉列表中的结果填充 html 表

> ID：15453165
> 
> 赞同：1
> 
> 时间：2013-03-16T18:42:29.603
> 
> 标签：php, javascript, sql, drop-down-menu

过去两天我一直在寻找相关的答案，但无法做出任何答案。

我正在使用 javascript、PHP 和 SQL 创建一个网页，最终将比我所要求的更强大，但目前这是我的问题。

我有一个初始下拉列表，其中填充了 SQL 数据库中 39 个不同表（星座或卫星组）的名称。基于第一个 SQL 查询，在提交时，页面将整个表格显示为页面底部的 html。

此外，第二个查询填充第二个下拉列表（星座内的特定卫星/对象），该列表显示所选表中每行的名称。第二个下拉列表显示正常。

但是，当我在第二个下拉菜单后单击提交时，查询应该被传递到一个 html 表，以仅显示第二个查询中选择的行信息（卫星/对象的轨道参数）。相反，当我单击提交时，表格中没有显示任何内容，并且页面刷新以返回其初始状态。我不知道如何成功地将查询传递给表。每个表包含 8 到 2700 个不同的对象（总共超过 6000 个），所以我不能简单地列出每一行，特别是因为数据每天都在变化。

表格中的数据最终将用于使用 java 或其他方法计算轨道，并将它们显示在嵌入式谷歌地球页面中。

我熟悉 javascript、php 和 sql，但不太熟悉其他方法，但我愿意接受建议。

以下是页面的相关代码。

```
<?php

  if (isset($_POST['constellation'])) {
    $constellation = $_POST['constellation']; }
    else {
    $constellation = 'Space Stations';
  }

  if (isset($_POST['satellite'])) {
    $satellite = $_POST['satellite']; }
    else {
    $satellite = 'ISS (Zarya)';
  }

?>

  <p>Use the pull-down menu's to choose the specific constellation (group) of satellites to view the most recent orbital data.</a></p>
  <hr />

  <div class="masterpulldown">

  <table class="pulldown">
  <tr>
    <td "colspan="2">
      <p class="pulldownheader">Constellation Query</p>
      <form action="<?php echo $_SERVER['PHP_SELF']; ?>" id="pulldownGroup" name="pulldownGroup" method="post" >
      <select id="constellation" name="constellation" value=$constellation >
      <option value="Last 30 Days" <?php if($constellation=="Last 30 Days") echo "selected"; ?> >Last 30 Days</option>
      <option value="Space Stations" <?php if($constellation=="Space Stations") echo "selected"; ?> >Space Stations</option>
      <option value="100 (Or So) Brightest" <?php if($constellation=="100 (Or So) Brightest") echo "selected"; ?> >100 (Or So) Brightest</option>
      <option value="Weather" <?php if($constellation=="Weather") echo "selected"; ?> >Weather</option>
      <option value="Noaa" <?php if($constellation=="Noaa") echo "selected"; ?> >Noaa</option>
      <option value="Goes" <?php if($constellation=="Goes") echo "selected"; ?> >Goes</option>
      <option value="Earth Resources" <?php if($constellation=="Earth Resources") echo "selected"; ?> >Earth Resources</option>
      <option value="Search And Rescue (Sarsat)" <?php if($constellation=="Search And Rescue (Sarsat)") echo "selected"; ?> >Search And Rescue (Sarsat)</option>
      <option value="Disaster Monitoring" <?php if($constellation=="Disaster Monitoring") echo "selected"; ?> >Disaster Monitoring</option>
      <option value="Tracking And Data Relay Satellite System (Tdrss)" <?php if($constellation=="Tracking And Data Relay Satellite System (Tdrss)") echo "selected"; ?> >Tracking And Data Relay Satellite System (Tdrss)</option>
      <option value="Geostationary" <?php if($constellation=="Geostationary") echo "selected"; ?> >Geostationary</option>
      <option value="Intelsat" <?php if($constellation=="Intelsat") echo "selected"; ?> >Intelsat</option>
      <option value="Gorizont" <?php if($constellation=="Gorizont") echo "selected"; ?> >Gorizont</option>
      <option value="Raduga" <?php if($constellation=="Raduga") echo "selected"; ?> >Raduga</option>
      <option value="Molniya" <?php if($constellation=="Molniya") echo "selected"; ?> >Molniya</option>
      <option value="Iridium" <?php if($constellation=="Iridium") echo "selected"; ?> >Iridium</option>
      <option value="Orbcomm" <?php if($constellation=="Orbcomm") echo "selected"; ?> >Orbcomm</option>
      <option value="Globalstar" <?php if($constellation=="Globalstar") echo "selected"; ?> >Globalstar</option>
      <option value="Amateur Radio" <?php if($constellation=="Amateur Radio") echo "selected"; ?> >Amateur Radio</option>
      <option value="Experimental" <?php if($constellation=="Experimental") echo "selected"; ?> >Experimental</option>
      <option value="Communication Satellites - Other" <?php if($constellation=="Communication Satellites - Other") echo "selected"; ?> >Communication Satellites - Other</option>
      <option value="Gps Operational" <?php if($constellation=="Gps Operational") echo "selected"; ?> >Gps Operational</option>
      <option value="Glonass Operational" <?php if($constellation=="Glonass Operational") echo "selected"; ?> >Glonass Operational</option>
      <option value="Galileo" <?php if($constellation=="Galileo") echo "selected"; ?> >Galileo</option>
      <option value="Satellite-Based Augmentation System" <?php if($constellation=="Satellite-Based Augmentation System") echo "selected"; ?> >Satellite-Based Augmentation System</option>
      <option value="Navy Navigation Satellite System (Nnss)" <?php if($constellation=="Navy Navigation Satellite System (Nnss)") echo "selected"; ?> >Navy Navigation Satellite System (Nnss)</option>
      <option value="Russian Leo Navigation" <?php if($constellation=="Russian Leo Navigation") echo "selected"; ?> >Russian Leo Navigation</option>
      <option value="Space And Earth Science" <?php if($constellation=="Space And Earth Science") echo "selected"; ?> >Space And Earth Science</option>
      <option value="Geodetic" <?php if($constellation=="Geodetic") echo "selected"; ?> >Geodetic</option>
      <option value="Engineering" <?php if($constellation=="Engineering") echo "selected"; ?> >Engineering</option>
      <option value="Education" <?php if($constellation=="Education") echo "selected"; ?> >Education</option>
      <option value="Miscellaneous Military" <?php if($constellation=="Miscellaneous Military") echo "selected"; ?> >Miscellaneous Military</option>
      <option value="Radar Calibration" <?php if($constellation=="Radar Calibration") echo "selected"; ?> >Radar Calibration</option>
      <option value="Cubesats" <?php if($constellation=="Cubesats") echo "selected"; ?> >Cubesats</option>
      <option value="Miscellaneous Satellites - Other" <?php if($constellation=="Miscellaneous Satellites - Other") echo "selected"; ?> >Miscellaneous Satellites - Other</option>
      <option value="Fengyun 1C Debris" <?php if($constellation=="Fengyun 1C Debris") echo "selected"; ?> >Fengyun 1C Debris</option>
      <option value="Iridium 33 Debris" <?php if($constellation=="Iridium 33 Debris") echo "selected"; ?> >Iridium 33 Debris</option>
      <option value="Cosmos 2251 Debris" <?php if($constellation=="Cosmos 2251 Debris") echo "selected"; ?> >Cosmos 2251 Debris</option>
      <option value="Breeze-M Breakup" <?php if($constellation=="Breeze-M Breakup") echo "selected"; ?> >Breeze-M Breakup</option>
      <input id="submit" type=submit value=submit />
      </form>
      </select>
    </td>
  </tr>
  </table>

<?php

  require_once('connectvars.php');
  // require_once('appvars.php');

  // Connect to the database 
  $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

  $a1=array("Last30Days","SpaceStations","HundredOrSoBrightest","Weather","Noaa","Goes","EarthResources","SearchAndRescueSarsat","DisasterMonitoring","TrackingAndDataRelaySatelliteSystemTdrss","Geostationary","Intelsat","Gorizont","Raduga","Molniya","Iridium","Orbcomm","Globalstar","AmateurRadio","Experimental","CommunicationSatellitesOther","GpsOperational","GlonassOperational","Galileo","SatelliteBasedAugmentationSystem","NavyNavigationSatelliteSystemNnss","RussianLeoNavigation","SpaceAndEarthScience","Geodetic","Engineering","Education","MiscellaneousMilitary","RadarCalibration","Cubesats","MiscellaneousSatellitesOther","Fengyun1CDebris","Iridium33Debris","Cosmos2251Debris","BreezeMRBBreakup");
  $a2=array("Last 30 Days","Space Stations","100 (Or So) Brightest","Weather","Noaa","Goes","Earth Resources","Search And Rescue (Sarsat)","Disaster Monitoring","Tracking And Data Relay Satellite System (Tdrss)","Geostationary","Intelsat","Gorizont","Raduga","Molniya","Iridium","Orbcomm","Globalstar","Amateur Radio","Experimental","Communication Satellites - Other","Gps Operational","Glonass Operational","Galileo","Satellite-Based Augmentation System","Navy Navigation Satellite System (Nnss)","Russian Leo Navigation","Space And Earth Science","Geodetic","Engineering","Education","Miscellaneous Military","Radar Calibration","Cubesats","Miscellaneous Satellites - Other","Fengyun 1C Debris","Iridium 33 Debris","Cosmos 2251 Debris","Breeze-M Breakup");
  $arr=array_combine($a1, $a2);

      $Last30Days = $arr["Last30Days"];
      $SpaceStations = $arr["SpaceStations"];
      $HundredOrSoBrightest = $arr["HundredOrSoBrightest"];
      $Weather = $arr["Weather"];
      $Noaa = $arr["Noaa"];
      $Goes = $arr["Goes"];
      $EarthResources = $arr["EarthResources"];
      $SearchAndRescueSarsat = $arr["SearchAndRescueSarsat"];
      $DisasterMonitoring = $arr["DisasterMonitoring"];
      $TrackingAndDataRelaySatelliteSystemTdrss = $arr["TrackingAndDataRelaySatelliteSystemTdrss"];
      $Geostationary = $arr["Geostationary"];
      $Intelsat = $arr["Intelsat"];
      $Gorizont = $arr["Gorizont"];
      $Raduga = $arr["Raduga"];
      $Molniya = $arr["Molniya"];
      $Iridium = $arr["Iridium"];
      $Orbcomm = $arr["Orbcomm"];
      $Globalstar = $arr["Globalstar"];
      $AmateurRadio = $arr["AmateurRadio"];
      $Experimental = $arr["Experimental"];
      $CommunicationSatellitesOther = $arr["CommunicationSatellitesOther"];
      $GpsOperational = $arr["GpsOperational"];
      $GlonassOperational = $arr["GlonassOperational"];
      $Galileo = $arr["Galileo"];
      $SatelliteBasedAugmentationSystem = $arr["SatelliteBasedAugmentationSystem"];
      $NavyNavigationSatelliteSystemNnss = $arr["NavyNavigationSatelliteSystemNnss"];
      $RussianLeoNavigation = $arr["RussianLeoNavigation"];
      $SpaceAndEarthScience = $arr["SpaceAndEarthScience"];
      $Geodetic = $arr["Geodetic"];
      $Engineering = $arr["Engineering"];
      $Education = $arr["Education"];
      $MiscellaneousMilitary = $arr["MiscellaneousMilitary"];
      $RadarCalibration = $arr["RadarCalibration"];
      $Cubesats = $arr["Cubesats"];
      $MiscellaneousSatellitesOther = $arr["MiscellaneousSatellitesOther"];
      $Fengyun1CDebris = $arr["Fengyun1CDebris"];
      $Iridium33Debris = $arr["Iridium33Debris"];
      $Cosmos2251Debris = $arr["Cosmos2251Debris"];
      $BreezeMRBBreakup = $arr["BreezeMRBBreakup"];

  $a3=array($Last30Days,$SpaceStations,$HundredOrSoBrightest,$Weather,$Noaa,$Goes,$EarthResources,$SearchAndRescueSarsat,$DisasterMonitoring,$TrackingAndDataRelaySatelliteSystemTdrss,$Geostationary,$Intelsat,$Gorizont,$Raduga,$Molniya,$Iridium,$Orbcomm,$Globalstar,$AmateurRadio,$Experimental,$CommunicationSatellitesOther,$GpsOperational,$GlonassOperational,$Galileo,$SatelliteBasedAugmentationSystem,$NavyNavigationSatelliteSystemNnss,$RussianLeoNavigation,$SpaceAndEarthScience,$Geodetic,$Engineering,$Education,$MiscellaneousMilitary,$RadarCalibration,$Cubesats,$MiscellaneousSatellitesOther,$Fengyun1CDebris,$Iridium33Debris,$Cosmos2251Debris,$BreezeMRBBreakup);
  $a4=array("Last30Days","SpaceStations","HundredOrSoBrightest","Weather","Noaa","Goes","EarthResources","SearchAndRescueSarsat","DisasterMonitoring","TrackingAndDataRelaySatelliteSystemTdrss","Geostationary","Intelsat","Gorizont","Raduga","Molniya","Iridium","Orbcomm","Globalstar","AmateurRadio","Experimental","CommunicationSatellitesOther","GpsOperational","GlonassOperational","Galileo","SatelliteBasedAugmentationSystem","NavyNavigationSatelliteSystemNnss","RussianLeoNavigation","SpaceAndEarthScience","Geodetic","Engineering","Education","MiscellaneousMilitary","RadarCalibration","Cubesats","MiscellaneousSatellitesOther","Fengyun1CDebris","Iridium33Debris","Cosmos2251Debris","BreezeMRBBreakup");
  $arr=array_combine($a3, $a4);

  $query = "SELECT * FROM $arr[$constellation] order by mission ASC";
  $data = mysqli_query($dbc, $query);

?>
  <form action="<?php echo $_SERVER['PHP_SELF']; ?>" id="pulldownGroup2" name="pulldownGroup" method="post" >   

  <table class="pulldown">
    <tr>
      <td colspan="2">
        <p class="pulldownheader">Satellite Results (Norad Number and Satellite Name)</p>
        <select id="satellite" name="satellite" value=$satellite >
      <option class="subdued" value=$satellite>Select for Satellite or leave blank for Constellation</option>
<?php
      $i = 0;   
        while ($row = mysqli_fetch_array($data)) { 
            // Display the satellite data
              if ($i == 0) {
                echo '<option value=$satellite>' . $row['mission'] . ' ' . $row['satellite'] . '</option>';
              }
            }
?>
        <input id="submit" type=submit value=submit />
        </select>
      </td>
    </tr>
  </table>

<?php
    //while ($row = mysqli_fetch_array($data)) { 
?>

  <table class="chosensat">
    <tr>
      <td class="sat2">Satellite Mission and Name: <?php $row['mission'] . ' ' . $row['satellite']; ?></td>
    </tr>
    <tr>
      <td class="sat2">Epoch Time and Greenwich time: <?php $row['epochTime'] . ' ' . $row['gmtTime']; ?></td>
    </tr>
    <tr>
      <td class="sat2">Inclination: <?php $row['inclination']; ?> deg</td>
    </tr>
    <tr>
      <td class="sat2">Right Ascension: <?php $row['raan']; ?> deg</td>
    </tr>
    <tr>
      <td class="sat2">Eccentricity: <?php $row['eccentricity']; ?></td>
    </tr>
    <tr>
      <td class="sat2">Argument of Perigee: <?php $row['argOfPerigee']; ?> deg</td>
    </tr>
    <tr>
      <td class="sat2">Mean Anomaly: <?php $row['meanAnomaly']; ?> deg</td>
    </tr>
    <tr>
      <td class="sat2">Mean Motion: <?php $row['meanMotion']; ?> rev/day</td>
    </tr>
  </table>

<?php
    //}
?>

  </form>

<p class="pulldownheader2">Selected Constellation:

<?php

  if($constellation=="Last 30 Days") echo $Last30Days;
    elseif($constellation=="Space Stations") echo $SpaceStations;
    elseif($constellation=="Hundred Or So Brightest") echo $HundredOrSoBrightest;
    elseif($constellation=="Weather") echo $Weather;
    elseif($constellation=="Noaa") echo $Noaa;
    elseif($constellation=="Goes") echo $Goes;
    elseif($constellation=="Earth Resources") echo $EarthResources;
    elseif($constellation=="Search And Rescue (Sarsat)") echo $SearchAndRescueSarsat;
    elseif($constellation=="Disaster Monitoring") echo $DisasterMonitoring;
    elseif($constellation=="Tracking And Data Relay Satellite System (Tdrss)") echo $TrackingAndDataRelaySatelliteSystemTdrss;
    elseif($constellation=="Geostationary") echo $Geostationary;
    elseif($constellation=="Intelsat") echo $Intelsat;
    elseif($constellation=="Gorizont") echo $Gorizont;
    elseif($constellation=="Raduga") echo $Raduga;
    elseif($constellation=="Molniya") echo $Molniya;
    elseif($constellation=="Iridium") echo $Iridium;
    elseif($constellation=="Orbcomm") echo $Orbcomm;
    elseif($constellation=="Globalstar") echo $Globalstar;
    elseif($constellation=="Amateur Radio") echo $AmateurRadio;
    elseif($constellation=="Experimental") echo $Experimental;
    elseif($constellation=="Communication Satellites - Other") echo $CommunicationSatellitesOther;
    elseif($constellation=="Gps Operational") echo $GpsOperational;
    elseif($constellation=="Glonass Operational") echo $GlonassOperational;
    elseif($constellation=="Galileo") echo $Galileo;
    elseif($constellation=="Satellite-Based Augmentation System") echo $SatelliteBasedAugmentationSystem;
    elseif($constellation=="Navy Navigation Satellite System (Nnss)") echo $NavyNavigationSatelliteSystemNnss;
    elseif($constellation=="Russian Leo Navigation") echo $RussianLeoNavigation;
    elseif($constellation=="Space And Earth Science") echo $SpaceAndEarthScience;
    elseif($constellation=="Geodetic") echo $Geodetic;
    elseif($constellation=="Engineering") echo $Engineering;
    elseif($constellation=="Education") echo $Education;
    elseif($constellation=="Miscellaneous Military") echo $MiscellaneousMilitary;
    elseif($constellation=="Radar Calibration") echo $RadarCalibration;
    elseif($constellation=="Cubesats") echo $Cubesats;
    elseif($constellation=="Miscellaneous Satellites - Other") echo $MiscellaneousSatellitesOther;
    elseif($constellation=="Fengyun 1C Debris") echo $Fengyun1CDebris;
    elseif($constellation=="Iridium 33 Debris") echo $Iridium33Debris;
    elseif($constellation=="Cosmos 2251 Debris") echo $Cosmos2251Debris;
    elseif($constellation=="Breeze Breakup") echo $BreezeMRBBreakup;
    else echo $constellation;

?> 

</p>

</div>

<div id="map3d"></div>

<?php

  // Retrieve the data from MySQL
  $query2 = "SELECT * FROM $arr[$constellation] ORDER BY id ASC";
  $data2 = mysqli_query($dbc, $query2);

  // Loop through the array of data, formatting it as HTML 
  echo '<table class="tablecontent">';

    echo '<tr><td colspan="11" class="constellationheader">' . $constellation . '</td></tr>';
    echo '<tr><th width="20px" class="headerinfo"><strong>ID:</strong></th>';
    echo '<th width="180px" class="headerinfo"><strong>Satellite:</strong></th>';
    echo '<th class="headerinfo"><strong>Mission:</strong></th>';
    echo '<th class="headerinfo"><strong>Epoch Time:</strong></th>';
    echo '<th width="160px" class="headerinfo"><strong>GMT:</strong></th>';
    echo '<th class="headerinfo"><strong>Inclination:</strong></th>';
    echo '<th class="headerinfo"><strong>RAAN:</strong></th>';
    echo '<th class="headerinfo"><strong>Eccentricity:</strong></th>';
    echo '<th width="120px" class="headerinfo"><strong>Argument of Perigee:</strong></th>';
    echo '<th class="headerinfo"><strong>Mean Anomaly:</strong></th>';
    echo '<th class="headerinfo"><strong>Mean Motion:</strong></th></tr>';

  $i = 0;
  while ($row = mysqli_fetch_array($data2)) { 
    // Display the satellite data
    if ($i == 0) {

    echo '<tr><td align="center" width="20px" class="sat">' . $row['id'] . '</td>';
    echo '<td width="180px" class="sat">' . $row['satellite'] . '</td>';
    echo '<td class="sat">' . $row['mission'] . '</td>';
    echo '<td class="sat">' . $row['epochTime'] . '</td>';
    echo '<td width="160px" class="sat">' . $row['gmtTime'] . '</td>';
    echo '<td class="sat">' . $row['inclination'] . ' deg' . '</td>';
    echo '<td class="sat">' . $row['raan'] . ' deg' . '</td>';
    echo '<td class="sat">' . $row['eccentricity'] . '</td>';
    echo '<td width="120px" class="sat">' . $row['argOfPerigee'] . ' deg' . '</td>';
    echo '<td class="sat">' . $row['meanAnomaly'] . ' deg' . '</td>';
    echo '<td class="sat">' . $row['meanMotion'] . ' rev/day' . '</td></tr>';

    }

  }

  echo '</table>';

  mysqli_close($dbc);

?> 
```

任何帮助，将不胜感激。我对这一切都不是很有经验，但我很高兴学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:08:25.143

这段代码有点难读，你会从使用数组来跟踪所有变量中获得很多好处。

例如，在“星座查询”下拉列表中，您可以使用如下内容：

```
$constellations = array('Last 30 Days', 'Space Stations', 'etc..');
foreach ($constellations as $constellation) {
   $selected = null;
   if ($_POST['constellation'] == $constellation) {
     $selected = ' selected';
   }
   echo "<option value=\"$constellation\" $selected>$constellation</option>";
} 
```

至于你的实际问题。我注意到你的“select”（id="constellation"）中有一个“/form”标签。我个人更喜欢将“表格”标签放在“表格”之外。我的猜测是，如果您能够使用一些数组清理代码，您可能会发现其他类似这样的小错误，这些错误会阻止您的表单工作。希望这可以帮助！

# c# - 最小化后应用程序变得迟缓

> ID：15453167
> 
> 赞同：0
> 
> 时间：2013-03-16T18:42:35.780
> 
> 标签：c#, winforms, performance, garbage-collection

我们有一个相当大的 winforms 应用程序，其中包含以下所有内容：

1.  插座连接

2.  通过后台工作程序从 Web 服务获取数据的异步调用。

3.  计时器和其他事件。

只要有人与之交互，该应用程序就可以正常工作。但是，如果将其最小化 30 多分钟或更长时间（例如午休时间）然后恢复，则感觉非常缓慢和缓慢，并且永远无法恢复其原始响应能力，需要重新启动。长时间最小化 Winform 应用程序与这种不寻常的无响应之间可能有什么联系？也许是 GC 问题，但找不到任何东西。寻找关于什么/在哪里寻找解决这个问题的指针。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T18:56:48.570

如果此问题易于重现 - 我建议您在 30 分钟后恢复应用程序时附加分析器并查看发生了什么。[http://msdn.microsoft.com/en-us/library/ms182384.aspx](http://msdn.microsoft.com/en-us/library/ms182384.aspx)

您也可以附加调试器以查看还原应用程序后发生的情况。

# c - 三重指针和内存分配

> ID：15453168
> 
> 赞同：-4
> 
> 时间：2013-03-16T18:42:52.503
> 
> 标签：c, memory-management

**你好，我在main中声明了指向指针的指针**

我需要使用我的函数分配进行内存分配

```
int main()
{ 

     Map **Store;
     allocation(&store);

) 
```

我想分配动态内存使用功能分配

像那样 ：

```
void allocation(Map ***store)
{
     **store=(Map*)malloc(sizeof(Map)*6);
     for(i=0;i<6;i++)
       *(store+i)=(Map**)malloc(sizeof(Map)*1000);
) 
```

但不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:26:45.673

是你想要的吗？

```
void allocation(Map ***store)
{
     *store = malloc(sizeof(Map*)*6);
     for(i=0;i<6;i++)
       (*store)[i] = (Map*)malloc(sizeof(Map)*1000);
} 
```

# php - 用户向 mySQL 数据库添加注释的正确/安全方法

> ID：15453169
> 
> 赞同：0
> 
> 时间：2013-03-16T18:42:52.767
> 
> 标签：php, mysql, security, database-design

谢谢阅读。**在你阅读之前** ——我正在使用**PHP & mySQL**

我正在创建一个简单的网络应用程序，用户将在其中访问各种产品的历史定价，但需要对不同的产品有自己独特的注释。

大约有 100,000 种产品，每个产品都有自己的表格，在任何给定时间都包含 50 到 100 行。

我没有数据库设计经验，所以我需要一些帮助！

**1)**为这些产品存储用户注释的最佳方式是什么？为每个产品创建一个包含每个用户生成的注释的表格是否是最佳实践？

**2)**假设添加了一个产品，并且之前没有为它生成表，如果我允许创建动态表，它会被认为是“安全的”吗？（当我说动态时，我的意思是在 PHP 中执行检查，如果不存在表，则创建一个表。）

**2a)**虽然我预计不会出现任何形式的黑客攻击，但我担心创建表的能力会提供过多的访问权限。是否可以允许创建表但限制 mySQL 用户使用其他功能，例如 drop？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:43:17.853

> 大约有 100,000 种产品，每个产品都有自己的表格，在任何给定时间都包含 50 到 100 行。

为每个单独的对象创建一个单独的表几乎总是一种反模式。

修复您的设计并将所有产品存储在同一个表中，因此您将能够更自然地模拟您的其他需求。例如：

![在此处输入图像描述](../Images/cfe5d0c60a2011be8f3139364e2e6b25.png)

# c# - 写清单 擅长的元素

> ID：15453171
> 
> 赞同：0
> 
> 时间：2013-03-16T18:42:57.553
> 
> 标签：c#

我只是使用一个简单的代码来编写一个字符串列表到 excel 如下

```
 Excel.Application excelApp = new Excel.Application();
        string myPath = Environment.CurrentDirectory + path + "\\reselts.xlsx";
        excelApp.Workbooks.Open(myPath);

        List <string> allterms = new List<string>(alltext.Split(' '));

         allterms= allterms.Distinct().ToList();
        allterms.RemoveAll(String.IsNullOrEmpty);

        for (int i = 1; i < allterms.Count + 1; i++ )
        {

            excelApp.Cells[i, 1] = allterms[i];

        }
        excelApp.Visible = true; 
```

但我得到一个错误“索引超出范围”！我的程序有什么问题？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:47:41.733

`allterms.Count`是 中的项目总数`List`。您的循环正在尝试访问`Count + 1`不存在的 。

例如，假设 中有 10 个项目`allterms`。总数等于 ，**索引**`10`范围为`0 - 9`，即 10 项。您在 for 循环中所做的是访问索引范围内`1 - 10`的项目，即跳过项目 at`index 0`并尝试访问`index 10`不存在的项目 at 。

试试这个：

```
for (int i = 0; i < allterms.Count; i++ )
{
    excelApp.Cells[i + 1, 1] = allterms[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:50:06.150

在 excel 中，所有索引都是从 1 开始的。在 C# 中，所有索引都是从 0 开始的。在您的代码中，您似乎对两者都使用了基于 1 的访问模型：对于 excel 和列表。

此外，为了提高插入速度，最好为范围设置值而不是为每个单元格设置值。你可以看看我在这里的例子：http: [//outcoldman.com/en/blog/show/201](http://outcoldman.com/en/blog/show/201)

# c# - 将文本放入 LibreOffice 文档的程序

> ID：15453174
> 
> 赞同：3
> 
> 时间：2013-03-16T18:43:09.583
> 
> 标签：c#, windows, libreoffice

我正在尝试用 C# 编写一个程序，该程序应该将文本放入打开的 LibreOffice 文档（Writer）中。

首先，用户可以对文本（保存到字符串变量）做出一些决定，当点击按钮时，它应该将这些字符串中的文本放到文档中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:02:14.530

Libre Office 使用[开放文档格式 (ODF)](http://en.wikipedia.org/wiki/OpenDocument)（它实际上是一种基于 XML 的格式，通常使用 zip 压缩），这是一种易于使用的格式，我发现 AODL 是唯一的开源库（请查看下面的链接），我我还确定 .NET 库可以为您完成繁重的工作，这里有一些教程和链接可以帮助您。

1.  [AODL 允许您的应用程序支持 OpenDocument 格式。（OpenSource .NET 库）](https://code.google.com/p/aodl2/)
2.  [如何读写 ODF/ODS 文件](http://www.codeproject.com/Articles/38425/How-to-Read-and-Write-ODF-ODS-Files-OpenDocument-S)
3.  [读写 ODF/ODS 文件（OpenDocument 电子表格）](http://www.go4expert.com/articles/read-write-odf-ods-files-opendocument-t19110/)

# java - 如何使用 libgdx 联系人监听器

> ID：15453176
> 
> 赞同：9
> 
> 时间：2013-03-16T18:43:27.190
> 
> 标签：java, box2d, libgdx, contact, game-physics

我刚刚开始使用 Libgdx 的 Box2d 引擎，但我根本不明白什么时候应该调用*Contactlistener的方法。*一方面是“开始接触”，另一方面是“结束接触”。我应该在哪里打电话给他们，以获得某个固定装置的数量接触其他人？以及如何实现*Contactlistener*？重定向到教程将回答我的问题。我在谷歌搜索时没有找到任何东西。这对我帮助很大，但它[是](http://www.iforce2d.net/b2dtut/jumpability)为 C++ 编写的，并没有将实现称为主游戏圈。谢谢你帮助我；）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-16T21:19:23.990

这是 libgdx 的一个简短示例。它展示了如何创建一个*ContactListener*以显示在建立和断开联系时涉及哪些固定装置。它还显示了*world.getContactList()*的使用，它将返回物理步骤之后仍然存在的联系人列表。这可能会错过在物理步骤过程中建立和断开的联系。如果您对这些感兴趣，那么您将需要实现一个*ContactListener*，使用*beginContact()*来检测何时建立联系，并使用*endContact()*来检测它们何时断开。

```
package hacks;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.math.MathUtils;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;
import com.badlogic.gdx.physics.box2d.Box2DDebugRenderer;
import com.badlogic.gdx.physics.box2d.Contact;
import com.badlogic.gdx.physics.box2d.ContactImpulse;
import com.badlogic.gdx.physics.box2d.ContactListener;
import com.badlogic.gdx.physics.box2d.Fixture;
import com.badlogic.gdx.physics.box2d.FixtureDef;
import com.badlogic.gdx.physics.box2d.Manifold;
import com.badlogic.gdx.physics.box2d.PolygonShape;
import com.badlogic.gdx.physics.box2d.World;

public class Box2DDemoMain extends com.badlogic.gdx.Game {

    private static final float SCALING = 0.1f;

    private Box2DDebugRenderer debugRenderer;
    private OrthographicCamera camera;
    private World world;

    @Override
    public void create() {
        debugRenderer = new Box2DDebugRenderer();
        camera = new OrthographicCamera();

        createWorld();
        createCollisionListener();
        createGround();
        createBox();
    }

    private void createWorld() {
        Vector2 gravity = new Vector2(0, -10);
        world = new World(gravity, true);
    }

    private void createCollisionListener() {
        world.setContactListener(new ContactListener() {

            @Override
            public void beginContact(Contact contact) {
                Fixture fixtureA = contact.getFixtureA();
                Fixture fixtureB = contact.getFixtureB();
                Gdx.app.log("beginContact", "between " + fixtureA.toString() + " and " + fixtureB.toString());
            }

            @Override
            public void endContact(Contact contact) {
                Fixture fixtureA = contact.getFixtureA();
                Fixture fixtureB = contact.getFixtureB();
                Gdx.app.log("endContact", "between " + fixtureA.toString() + " and " + fixtureB.toString());
            }

            @Override
            public void preSolve(Contact contact, Manifold oldManifold) {
            }

            @Override
            public void postSolve(Contact contact, ContactImpulse impulse) {
            }

        });
    }

    private void createGround() {
        PolygonShape groundShape = new PolygonShape();
        groundShape.setAsBox(50, 1);
        BodyDef groundBodyDef = new BodyDef();
        groundBodyDef.type = BodyType.StaticBody;
        groundBodyDef.position.set(0, -20);
        Body groundBody = world.createBody(groundBodyDef);
        FixtureDef fixtureDef = new FixtureDef();
        fixtureDef.shape = groundShape;
        groundBody.createFixture(fixtureDef);
        groundShape.dispose();
    }

    private void createBox() {
        PolygonShape boxShape = new PolygonShape();
        boxShape.setAsBox(1, 1);
        BodyDef boxBodyDef = new BodyDef();
        boxBodyDef.position.set(0, 20);
        boxBodyDef.angle = MathUtils.PI / 32;
        boxBodyDef.type = BodyType.DynamicBody;
        boxBodyDef.fixedRotation = false;
        Body boxBody = world.createBody(boxBodyDef);
        FixtureDef boxFixtureDef = new FixtureDef();
        boxFixtureDef.shape = boxShape;
        boxFixtureDef.restitution = 0.75f;
        boxFixtureDef.density = 2.0f;
        boxBody.createFixture(boxFixtureDef);
        boxShape.dispose();
    }

    @Override
    public void resize(int width, int height) {
        super.resize(width, height);
        float cameraWidth = Gdx.graphics.getWidth() * SCALING;
        float cameraHeight = Gdx.graphics.getHeight() * SCALING;
        camera.setToOrtho(false, cameraWidth, cameraHeight);
        camera.position.set(0, 0, 0);
    }

    @Override
    public void render() {
        super.render();

        world.step(Gdx.graphics.getDeltaTime(), 8, 3);

        int numContacts = world.getContactCount();
        if (numContacts > 0) {
            Gdx.app.log("contact", "start of contact list");
            for (Contact contact : world.getContactList()) {
                Fixture fixtureA = contact.getFixtureA();
                Fixture fixtureB = contact.getFixtureB();
                Gdx.app.log("contact", "between " + fixtureA.toString() + " and " + fixtureB.toString());
            }
            Gdx.app.log("contact", "end of contact list");
        }

        Gdx.gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        camera.update();
        debugRenderer.render(world, camera.combined);
    }

    public static void main(String[] args) {
        LwjglApplicationConfiguration config = new LwjglApplicationConfiguration();

        config.title = Box2DDemoMain.class.getName();
        config.width = 800;
        config.height = 480;
        config.fullscreen = false;
        config.useGL20 = true;
        config.useCPUSynch = true;
        config.forceExit = true;
        config.vSyncEnabled = true;

        new LwjglApplication(new Box2DDemoMain(), config);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T21:24:00.320

您不必在任何地方调用这些方法。只需创建一个类并在其中实现 ContactListener 。现在在您的代码中只需使用 world.setContactListener(ContactListener listener) 。

每当你的世界发生碰撞时，所有 4 个方法都会被调用。您将获得 2 个碰撞体的夹具 A 和夹具 B

# java - 无法执行 dex & 转换为 Dalvik 格式失败

> ID：15453177
> 
> 赞同：4
> 
> 时间：2013-03-16T18:43:40.173
> 
> 标签：java, android, dependencies

我已经看到这个问题被问过并回答了几次，但它对我没有用。Eclipse 正在抛出：

```
[2013-03-16 17:45:34 - Dex Loader] Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl;
[2013-03-16 17:45:34 - my-app-phone] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl; 
```

有人说这是构建路径中包含 bin 文件夹引起的构建路径问题。其他人说将 eclipse.ini 中分配的内存增加到 -Xms128m -Xmx512m 或更高的值，但这对我也没有作用。

这是唯一一个抛出这个错误的项目，而且它只发生在我家里的 Win 7 Pro 上。在工作中，我有 Mac OSX Mountain Lion 并且工作正常。

![安卓](../Images/6cbc621e9c6d59c4d4329faa2d0cfd3d.png)![Java 构建路径源](../Images/dc1b7c3a48cfdee568ea7539304b4014.png)![Java 构建路径库](../Images/9d7e0fbc09c1056ef0af5f6ba92bcd82.png)![Java 构建路径源顺序和导出](../Images/d08d31891e7a978f0f517c00c53e4166.png)

会是什么呢？谢谢你的时间。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-16T18:43:40.173

在编辑屏幕截图时，我发现了可能导致此问题的原因。

![问题](../Images/1886942b4596b7044eb25ff41f3151b0.png)

如您所见，我有两个***android-support-v4.jar***。我已经删除了 android-support-v4.jar，清理了 FacebookSDK 项目，并且我的***my-app-phone***项目已正确启动。

```
[2013-03-16 18:37:23 - my-app-phone] ------------------------------
[2013-03-16 18:37:23 - my-app-phone] Android Launch!
[2013-03-16 18:37:23 - my-app-phone] adb is running normally. 
```

ps：

![在此处输入图像描述](../Images/d520e1a50e2ec666d33cc72deffd3261.png) ![在此处输入图像描述](../Images/8a12fc8f76273f7c89465f27ac7cc182.png) ![在此处输入图像描述](../Images/41eddfd2cd8bbc98c6ca8ead0c0ff13d.png)

希望能帮助到你！
小心 ;）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-11T14:43:30.433

只需从它解决的 libs 文件夹中删除 android-support-v4.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T12:13:48.313

我有一个旧版本的 Admob（它的文件名不同：“GoogleAdMobAdsSdk-6.0.1.jar”我删除了它，它解决了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T21:07:49.980

我也有同样的问题。就我而言，首先我创建了支持 android4.xx 的项目，但随后我必须支持 Android5.0.1。问题是项目同时具有 android-support-v4.jar 和 Android5.0.1/android.jar。所以当我删除 android-support-v4.jar 时，问题就解决了。现在我可以在我的设备上测试这个项目了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-16T05:43:01.243

就我而言，我必须删除 Android Private Libraries，参见图片：

[![在此处输入图像描述](../Images/2a57d6b4d711d4428e5dcee980db36e4.png)](https://i.stack.imgur.com/5ru1Q.png)

# java - 将字符串从类传递到活动

> ID：15453179
> 
> 赞同：0
> 
> 时间：2013-03-16T18:43:45.590
> 
> 标签：java, android, android-intent, broadcastreceiver, android-broadcast

我正在尝试从 Cbrceiver.class 传递一个名为“str”的字符串，该字符串将广播接收器扩展到活动 cbdata.java。但我无法传递该值，我也没有收到任何错误。谢谢。请帮帮我

```
**CbReceiver.class:**    

package com.example.Lovisis;

import java.io.UnsupportedEncodingException;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class CbReceiver extends BroadcastReceiver
        {
        public static class SmsCbHeader {
            public static final int PDU_HEADER_LENGTH = 6;

            public final int geographicalScope;

            public final int messageCode;

            public final int updateNumber;

            public final int messageIdentifier;

            public final int dataCodingScheme;

            public final int pageIndex;

            public final int nrOfPages;

            public SmsCbHeader(byte[] pdu) throws IllegalArgumentException {
                if (pdu == null || pdu.length < PDU_HEADER_LENGTH) {
                    throw new IllegalArgumentException("Illegal PDU");
                }

                geographicalScope = (pdu[0] & 0xc0) >> 6;
                messageCode = ((pdu[0] & 0x3f) << 4) | ((pdu[1] & 0xf0) >> 4);
                updateNumber = pdu[1] & 0x0f;
                messageIdentifier = (pdu[2] << 8) | pdu[3];
                dataCodingScheme = pdu[4];

                int pageIndex = (pdu[5] & 0xf0) >> 4;
                int nrOfPages = pdu[5] & 0x0f;

                if (pageIndex == 0 || nrOfPages == 0 || pageIndex > nrOfPages) {
                    pageIndex = 1;
                    nrOfPages = 1;
                }

                this.pageIndex = pageIndex;
                this.nrOfPages = nrOfPages;
            }
    }

        public static class SmsCbMessage {

            public static final int GEOGRAPHICAL_SCOPE_CELL_WIDE_IMMEDIATE = 0;

            public static final int GEOGRAPHICAL_SCOPE_PLMN_WIDE = 1;

            public static final int GEOGRAPHICAL_SCOPE_LA_WIDE = 2;

            public static final int GEOGRAPHICAL_SCOPE_CELL_WIDE = 3;

            public static SmsCbMessage createFromPdu(byte[] pdu) {
                try {
                    return new SmsCbMessage(pdu);
                } catch (IllegalArgumentException e) {
                    return null;
                }
            }

            private String[] LANGUAGE_CODES_GROUP_0 = {
                    "de", "en", "it", "fr", "es", "nl", "sv", "da", "pt", "fi", "no", "el", "tr", "hu",
                    "pl", null
            };

            private  String[] LANGUAGE_CODES_GROUP_2 = {
                    "cs", "he", "ar", "ru", "is", null, null, null, null, null, null, null, null, null,
                    null, null
            };

            private static final char CARRIAGE_RETURN = 0x0d;

            private SmsCbHeader mHeader;

            private String mLanguage;

            private String mBody;

            private SmsCbMessage(byte[] pdu) throws IllegalArgumentException {
                mHeader = new SmsCbHeader(pdu);
                parseBody(pdu);
            }

            public int getGeographicalScope() {
                return mHeader.geographicalScope;
            }

            public String getLanguageCode() {
                return mLanguage;
            }

            public String getMessageBody() {
                return mBody;
            }

            public int getMessageIdentifier() {
                return mHeader.messageIdentifier;
            }

            public int getMessageCode() {
                return mHeader.messageCode;
            }

            public int getUpdateNumber() {
                return mHeader.updateNumber;
            }

            private void parseBody(byte[] pdu) {
                int encoding;
                boolean hasLanguageIndicator = false;

                switch ((mHeader.dataCodingScheme & 0xf0) >> 4) {
                    case 0x00:
                        encoding = SmsMessage.ENCODING_7BIT;
                        mLanguage = LANGUAGE_CODES_GROUP_0[mHeader.dataCodingScheme & 0x0f];
                        break;

                    case 0x01:
                        hasLanguageIndicator = true;
                        if ((mHeader.dataCodingScheme & 0x0f) == 0x01) {
                            encoding = SmsMessage.ENCODING_16BIT;
                        } else {
                            encoding = SmsMessage.ENCODING_7BIT;
                        }
                        break;

                    case 0x02:
                        encoding = SmsMessage.ENCODING_7BIT;
                        mLanguage = LANGUAGE_CODES_GROUP_2[mHeader.dataCodingScheme & 0x0f];
                        break;

                    case 0x03:
                        encoding = SmsMessage.ENCODING_7BIT;
                        break;

                    case 0x04:
                    case 0x05:
                        switch ((mHeader.dataCodingScheme & 0x0c) >> 2) {
                            case 0x01:
                                encoding = SmsMessage.ENCODING_8BIT;
                                break;

                            case 0x02:
                                encoding = SmsMessage.ENCODING_16BIT;
                                break;

                            case 0x00:
                            default:
                                encoding = SmsMessage.ENCODING_7BIT;
                                break;
                        }
                        break;

                    case 0x06:
                    case 0x07:

                    case 0x09:

                    case 0x0e:

                        encoding = SmsMessage.ENCODING_UNKNOWN;
                        break;

                    case 0x0f:
                        if (((mHeader.dataCodingScheme & 0x04) >> 2) == 0x01) {
                            encoding = SmsMessage.ENCODING_8BIT;
                        } else {
                            encoding = SmsMessage.ENCODING_7BIT;
                        }
                        break;

                    default:

                        encoding = SmsMessage.ENCODING_7BIT;
                        break;
                }

                switch (encoding) {
                    case SmsMessage.ENCODING_7BIT:

                        if (hasLanguageIndicator && mBody != null && mBody.length() > 2) {
                            mLanguage = mBody.substring(0, 2);
                            mBody = mBody.substring(3);
                        }
                        break;

                    case SmsMessage.ENCODING_16BIT:
                        int offset = SmsCbHeader.PDU_HEADER_LENGTH;

                        if (hasLanguageIndicator && pdu.length >= SmsCbHeader.PDU_HEADER_LENGTH + 2) {

                            offset += 2;
                        }

                        try {
                            mBody = new String(pdu, offset, (pdu.length & 0xfffe) - offset, "utf-16");
                        } catch (UnsupportedEncodingException e) {

                        }
                        break;

                    default:
                        break;
                }

                if (mBody != null) {

                    for (int i = mBody.length() - 1; i >= 0; i--) {
                        if (mBody.charAt(i) != CARRIAGE_RETURN) {
                            mBody = mBody.substring(0, i + 1);
                            break;
                        }
                    }
                } else {
                    mBody = "";
                }
            }
    }

        public String str;
        public String str1="hello";
        public void onReceive(Context context, Intent intent) {
            //---get the CB message passed in---
            Bundle bundle = intent.getExtras();        
            SmsCbMessage[] msgs = null;
            //str = "";            
            if (bundle != null)  {
                //---retrieve the SMS message received---
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsCbMessage[pdus.length];            
                for (int i=0; i<msgs.length; i++) {
                    msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
                    str += "CB :" +msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     

                    //Toast.makeText(context, "" +str, Toast.LENGTH_LONG).show();
                }
                Toast.makeText(context,str, Toast.LENGTH_LONG).show();
                Intent in=new Intent(CbReceiver.this,Cbdata.class);
                in.putExtra("cb", str);

                abortBroadcast();

            }                         
        }
        private Context getApplicationContext() {
            // TODO Auto-generated method stub
            return null;
        }

    }

**Cbdata.java:** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:02:33.057

删除 OnRecieve() 方法使用

```
 @Override
    protected void onNewIntent(Intent intent) {
    Log.d("YourActivity", "onNewIntent is called!");

    memberFieldString = intent.getStringExtra("KEY");

    super.onNewIntent(intent);
} // End of onNewIntent(Intent intent) 
```

告诉我天气它的工作与否

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:04:34.037

您可以尝试在 Cbdata 中创建类 Cbrceiver 的对象...例如。

Cbrceiver rec = 新的 Cbrceiver(this);

然后直接使用字符串作为rec.str

# android - 根据android中的文件大小获取音频文件

> ID：15453181
> 
> 赞同：0
> 
> 时间：2013-03-16T18:43:54.527
> 
> 标签：android

我基本上想根据我指定的文件大小来获取 android 设备中的所有歌曲。我正在使用以下查询返回所有歌曲。

```
String[] proj = { MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.SIZE };
musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,proj, null, null, null);
music_column_index=musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE); 
```

但我不知道如何指定文件大小的条件（比如`file_size`应该大于`x`和小于`y`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T05:26:21.893

```
int minFileSize = 1000;
int maxFileSize = 100000;
String where = MediaStore.Audio.Media.SIZE + " between " + minFileSize + " and " + maxFileSize;
String[] proj = { MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.SIZE };
musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,proj, where, null, null); 
```

# r - 在ggplot2中为dotchart自定义网格？

> ID：15453182
> 
> 赞同：0
> 
> 时间：2013-03-16T18:43:57.723
> 
> 标签：r, plot, ggplot2, lattice

如何`dotchart`在 ggplot2 中绘制一个像格子一样的点图，它有更粗的网格线和只有水平网格线（即删除垂直网格线），有点像这样：

![http://i.stack.imgur.com/gBtM2.png](../Images/02015284f1a5ba702179304bd1e196c2.png)

除了使水平线更粗，以便它们更明显。

有没有办法在 ggplot2 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:34:42.450

一些可以使用的示例数据。

```
df<-data.frame(nam=rep(c("A","B","C","D","E"),times=3),
  val=runif(15,0,1),type=rep(c("TypA","TypB","TypC"),each=5))
df<-rbind(df,df,df)
df$num.lev<-rep(c(10,20,30),each=15) 
```

改变网格线的外观，`panel.grid.major`可以`panel.grid.minor`在里面使用`theme()`。有了`panel.margin=`您，您就可以实现所有方面都被紧密地绘制在一起。

```
library(ggplot2)
library(grid)
ggplot(df,aes(val,nam))+geom_point(size=3,colour="blue")+facet_grid(num.lev~type)+
  scale_x_continuous(breaks=c(0,0.2,0.4,0.6,0.8))+
  theme(panel.margin=unit(0,"cm"),
        panel.border=element_rect(colour="black",fill=NA,size=1.2),
        strip.background=element_rect(colour="black",size=1.2),
        panel.grid.major.x=element_blank(),
        panel.grid.minor.x=element_blank(),
        panel.grid.major.y=element_line(size=1.5,colour="grey88"),
        panel.background=element_rect(fill="white")) 
```

![在此处输入图像描述](../Images/5027609fae4140e66fa19f2d58bc7c60.png)

# c++ - Gstreamer - 使用变量作为视频路径

> ID：15453187
> 
> 赞同：0
> 
> 时间：2013-03-16T18:44:14.810
> 
> 标签：c++, visual-c++, gstreamer

我有一个关于 Gstreamer 和视频路径 (uri) 的问题。事实上，为了尝试我的代码，我曾经直接在 C++ 源代码中设置视频的路径，这样：

```
data.pipeline = gst_parse_launch ("playbin2 uri=file:///D:/video", NULL); 
```

但是现在，我正在使用用户界面（wxWidgets）来获取用户想要播放的视频的路径。该路径现在位于变量 m_txtVideoPath 中。而且我不知道如何使用此变量而不是 D:/video 来启动视频。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:55:05.773

您必须使用用户定义的文件名构建管道，而不是对所有内容进行硬编码。

这是非常基本的字符串处理，您可能需要查阅初学者教程以了解您选择的编程语言。

例如

```
 std::string pipeline = "playbin2";
 pipeline+=" uri=file://"+m_txtVideoPath;
 std::cout << "PIPELINE: " << pipeline << std::endl; // for debugging
 data.pipeline = gst_parse_launch (pipeline.c_str(), NULL); 
```

# android - 按下硬件按钮时的 Android 更新小部件

> ID：15453188
> 
> 赞同：-2
> 
> 时间：2013-03-16T18:44:18.930
> 
> 标签：android, android-widget

**按下硬件**按钮（例如侧音量按钮）时是否可以更新 android 小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:53:15.370

不，这是不可能的，因为如果您的应用不在前台，您将无法收听音量、电源、主页、返回和菜单按钮上的事件。

在某些设备上，您可能会听到相机按钮，但在极少数设备上会出现这种情况。

# tabs - Zurb-Foundation 维护选项卡状态

> ID：15453191
> 
> 赞同：1
> 
> 时间：2013-03-16T18:44:33.750
> 
> 标签：tabs, postback, zurb-foundation

在回发时维护 Foundation 选项卡状态的最佳方法是什么？最好是不使用 cookie 的方式。

```
<dl class="tabs">
  <dd class="active"><a href="#simple1">Simple Tab 1</a></dd>
  <dd><a href="#simple2">Simple Tab 2</a></dd>
  <dd class="hide-for-small"><a href="#simple3">Simple Tab 3</a></dd>
</dl>
<ul class="tabs-content">
  <li class="active" id="simple1Tab">This is simple tab 1s content. Pretty neat, huh?</li>
  <li id="simple2Tab">This is simple tab 2s content. Now you see it!</li>
  <li id="simple3Tab">This is simple tab 3s content.</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:34:35.500

这可能不是最好的解决方案，但它适用于我的 .Net 项目，也许它适用于你。

```
<asp:HiddenField runat="server" ID="currentTab" Value="0" />

$(document).ready(function() {
    var tb = $(this).find("input[id*='currentTab']").val();
    if (tb == null) {
        tb = 0;
    }
    if (tb == 1) {
        //alert("Tab 1");
        tabName = "t4"
        window.location.hash = tabName;
        return false
    }
    if (tb == 2) {
        //alert("Tab 2");
        tabName = "t2"
        window.location.hash = tabName;
        return false
    }
    if (tb == 3) {
        //alert("Tab 3");
        tabName = "t3"
        window.location.hash = tabName;
        return false;
    }
});

Protected Sub Button_Click1(sender As Object, e As EventArgs) Handles Button.Click
currentTab.Value = "3"
End Sub 
```

# php - PHP错误“期待'）'”但似乎无法发现任何

> ID：15453193
> 
> 赞同：0
> 
> 时间：2013-03-16T18:44:54.277
> 
> 标签：php

我正在编写一个带有嵌套循环的 php 函数，但我不断收到错误消息：解析错误：语法错误，意外 T_INC，期待 ')'

```
function createCol5($diff) {
    $days = floor($diff/60/60/24);
    $digit = strval($days);
    $value1 = substr($digit, -1);
    $length = strlen($days);
    for($i= 1; $i <= $length; $i++) {
        $temp = substr($digit, $i, 1);
        if($temp != 0) {
            for($h= 0; $h< $temp; h++) {
                echo "<br/><tr><td>*</td></tr>";
            }
        }
        //echo "<br/><tr><td>$temp</td></tr>";
    }
} 
```

它一直指向错误的两个 if 语句。有什么见解吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T18:46:25.303

在你的第二个`for statement`你错过了`$`on `h++`：

```
for($h= 0; $h< $temp; $h++)
{
    echo "<br/><tr><td>*</td></tr>";
} 
```

您收到此错误的原因是，如果您使用`h`，它将被视为一个常量，这是不可更改的。您将无法增加常数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:48:11.277

递增时第二个循环中的“h”。将其更改为“$ h”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:49:02.133

请试试这个：

```
function createCol5($diff)
    {
        $days = floor($diff/60/60/24);
        $digit = strval($days);
        $value1 = substr($digit, -1);

        $length = strlen($days);

        for($i= 1; $i <= $length; $i++)
        {
            $temp = substr($digit, $i, 1);
            if($temp != 0)
            {
                for($h= 0; $h< $temp; $h++)
                {
                    echo "<br/><tr><td>*</td></tr>";
                }
            }
            //echo "<br/><tr><td>$temp</td></tr>";
        }
    } 
```

在 for 循环中，变量 h++ 应该是 $h++

# javascript - 如何计算编码字符串的长度？

> ID：15453194
> 
> 赞同：1
> 
> 时间：2013-03-16T18:44:56.310
> 
> 标签：javascript, jquery, arabic

所以我有一个阿拉伯字符串，然后我使用 encodeURIComponent 对其进行编码，然后我尝试从编码字符串中知道长度，但是这段代码不起作用，为什么？[http://jsfiddle.net/mCwaj/](http://jsfiddle.net/mCwaj/)

```
var str="قال على";
var encd=encodeURIComponent(str);
alert(encd);
alert(custom_length(encd));
function custom_length(str){
var tab=str.match(/%../g);
return tab.length;
} 
```

结果应该是 7，但函数返回 13，我知道阿拉伯编码的字母表的组成类似于 %(letter|number)(letter|number)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:49:29.060

您将非编码传递`str`给您的函数，而不是`encd`. 因此，正则表达式不[匹配](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)，结果在访问其属性`null`时引发异常。`length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:03:54.580

尝试使用“escape()”而不是“encodeURIComponent()”

```
//14 charachters
var str="مرحبا أنا ياسر";  

var result=custom_length(escape(str));

alert(result); //it'll display 14

function custom_length(str){
   var tab=str.match(/%../g);
   return tab.length;
} 
```

演示：`http://jsfiddle.net/ysinjab/KDyhp/`

# phpmailer - SMTP -> 错误：服务器不接受 RCPT

> ID：15453197
> 
> 赞同：8
> 
> 时间：2013-03-16T18:45:10.327
> 
> 标签：phpmailer

```
 require("phpmailer.inc.php");

class sendmail
{
public static function sendAccountActivateMail($to,$subject,&message)
{
    $flg = false;
    try
{
$mail= new PHPMailer(); 
$mail->IsSMTP(); 
$mail->SMTPAuth= true; 
$mail->SMTPSecure= "tls"; 
$mail->Host= "smtp.gmail.com"; 
$mail->Port= 587; 
$mail->Username= "xxx@mydomain.com"; 
$mail->Password= "xxxxxx"; 
$mail->AddReplyTo("info@mydomain.com"); 
$mail->From= "info@mydomain.com"; 
$mail->FromName= "Website"; 
$mail->Subject= $subject; 
$mail->WordWrap= 50; 
$mail->Body = $message; 
$mail->AddAddress($to); 
$mail->Send(); 
}
catch(Exception $e)
    {
        $flg = false;
    }
    return $flg;
}
} 
```

尝试使用 smtp 通过 phpmailer 发送邮件。打开调试给我错误：

SMTP -> 错误：服务器不接受 RCPT：550 在端口 587 上提交邮件需要 SMTP AUTH SMTP -> 错误：服务器不接受 DATA 命令：SMTP -> 注意：检查是否连接时捕获 EOF

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-05T18:32:53.160

看起来 587 端口被阻塞了。尝试使用

```
$mail= new PHPMailer(); 
$mail->IsSMTP(); 
$mail->SMTPAuth= true; 
$mail->SMTPSecure= "ssl"; 
$mail->Host= "smtp.gmail.com"; 
$mail->Port= 465;..... 
```

# actionscript-3 - 为什么我不能制作可见的影片剪辑？

> ID：15453201
> 
> 赞同：0
> 
> 时间：2013-03-16T18:45:25.350
> 
> 标签：actionscript-3, flash, actionscript, adobe

我正在尝试在我的舞台上显示一个简单的方形影片剪辑，但似乎我尝试过的任何工作都没有……舞台上什么都没有出现！我的代码：

```
 var mc:MovieClip = new MovieClip();
        mc.x = 0;
        mc.y = 0;
        mc.width = 200;
        mc.height = 200;
        mc.opaqueBackground = 0xCCCCCC;

        // new ColorTransform object
        var obj_color:ColorTransform = new ColorTransform();
        // setting the new color we want (in this case, blue)
        obj_color.color = 0x0000ff;
        // applying the transform to our movieclip (this will affect the whole object including strokes)
        mc.transform.colorTransform = obj_color;

        this.stage.addChild(mc);
        mc.x = 0;
        mc.y = 0; 
```

为什么我的电影剪辑没有出现在舞台上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T19:29:04.560

您的 MovieClip 不包含任何内容，因此不会显示任何内容。您试图通过设置`width`and`height`和使 MovieClip 显示一个灰色框`opaqueBackground`，但不幸的是这不起作用。`width`并且`height`只会调整已经有一些内容的剪辑的大小。如果`width`和`height`为 0，则更改它们无效，因为尝试缩放 0 会导致 0。您可以通过`trace(width)`将其设置为 200 后注意到这一点。

如果要显示一个矩形，请使用[绘图 API](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#drawRect%28%29)在剪辑中绘制它：

```
var mc:MovieClip = new MovieClip();
mc.x = 0;
mc.y = 0;
mc.graphics.beginFill(0xCCCCCC);
mc.graphics.drawRect(0, 0, 200, 200);
mc.graphics.endFill();
addChild(mc); 
```

# c - 优化浮点计算

> ID：15453204
> 
> 赞同：0
> 
> 时间：2013-03-16T18:45:39.130
> 
> 标签：c, floating-point

我的任务是使以下功能尽可能精确（速度不是目标）。我*必须*使用*float*和*middle rectangles 的方法*。你能建议点什么吗？实际上，我认为，这一切都是为了最大限度地减少浮点舍入误差。这就是我所做的：

```
typedef float T;

T integrate(T left, T right, long N, T (*func)(T)) {
    long i = 0;
    T result = 0.0;
    T interval = right - left;
    for(i = 0; i < N; i++) {
        result += func(left + interval * (i + 0.5) / N) * interval / N;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T18:50:39.350

> 我的任务是使以下功能尽可能精确

您说您必须使用`float`，所以我认为问题不在于四舍五入，而在于更准确地计算积分。

我还假设简单地增加`N`不是一种选择。

[我的建议是考虑使用高阶正交规则（梯形、辛普森等），](http://en.wikipedia.org/wiki/Numerical_integration#Quadrature_rules_based_on_interpolating_functions)而不是使用中点规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T18:58:02.710

有很多方法可以避免或补偿浮点舍入（MM 的建议，使用 Kahan 求和等......）。但是，没有理由这样做，因为舍入误差与积分方案的误差*相比绝对相形见绌*；你不会得到更准确的积分，你会得到中点规则计算的错误结果的更准确的近似值。除非在极其特殊的情况下，否则任何此类努力都是完全浪费的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T18:49:45.603

试试这个：

```
{
   long i = 0;
   T result = 0.0;
   T interval = right - left;
   for(i = 0; i < N; i++) {
       result += func(left + interval * (i + 0.5) / N);
   }
   return result * interval / N;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T19:05:31.740

如果您想精确计算积分，请阅读积分方案。一些家庭编织程序不会给出任何精确度

[《数值食谱》](http://www.nr.com)一书（有几个版本，一个为 C 版本）备受推崇。个人没看过。

# ios - 呈现第二个模态视图控制器的问题

> ID：15453205
> 
> 赞同：0
> 
> 时间：2013-03-16T18:45:43.703
> 
> 标签：ios, objective-c

目前我的错误说我的视图控制器已经呈现空值。我认为我对下面的代码有正确的想法，但我没有正确实现它。谢谢你的帮助

```
 -(IBAction)datePicker
{
    //UIViewController *presenter = self.presentingViewController;

    [self dismissViewControllerAnimated:YES completion:^{
        /*
        UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard.storyboard"
                                                      bundle:nil];
        UIViewController* dateView = [sb instantiateViewControllerWithIdentifier:@"DatePickerViewController"];

         */

        [self performSegueWithIdentifier:@"dueDateSegue" sender:self];
        //[presenter presentViewController:dateView animated:YES completion:nil];

        /*
        [self presentViewController:dateView animated:YES completion:^{

            UIBarButtonItem *saveDate = [[UIBarButtonItem alloc]
                                         initWithTitle:@"Save Date"
                                         style:UIBarButtonItemStyleDone
                                         target:self
                                         action:@selector(labelDatePicker)];
            self.navigationItem.rightBarButtonItem = saveDate;
            pick = [[UIDatePicker alloc] init];
            [pick setFrame:CGRectMake(0,200,320,120)];
            //[pick addTarget:self action:@selector(done) forControlEvents:UIControlEventValueChanged];
            //dateFieldText.delegate = self;
            //dateFieldText.inputView = pick;

        }];
         */

    }];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:22:30.563

在方法中`datePicker`添加以下行作为第一行代码：

```
UIViewController *presenter = self.presentingViewController; 
```

然后代替：

```
 [self presentViewController:dateView animated:YES completion:nil]; 
```

尝试使用：

```
 [presenter presentViewController:dateView animated:YES completion:nil]; 
```

# linux - 将现有的 rootfs 与自定义工具链相结合

> ID：15453208
> 
> 赞同：6
> 
> 时间：2013-03-16T18:46:01.013
> 
> 标签：linux, cross-compiling, raspberry-pi, crosstool-ng

我有一个安装了 Emdebian 的 Raspberry PI，并且想要交叉编译项目。

有大量关于如何获取工具链并使用它构建简单项目的文档。我自己设法用 crosstool-ng 构建了一个工具链，并编写了一个运行良好的 hello world 程序。

**我没有得到的是如何处理交叉编译更复杂的项目，如 Qt，这些项目依赖于其他库**。让我们以*libdbus*为例，因为这是 Qt 的依赖项之一。

安装的 Emdebian 已经包含 libdbus.so，所以我自然更喜欢使用它，而不是交叉编译我自己的 libdbus.so，因为编译所有 Qt 的依赖项会花费很多时间。

据我了解，对于交叉编译，有两个重要的目录：

1.  “ **staging”**目录，所有已安装的库和应用程序都位于其中。这最初是工具链的 sysroot 目录的副本，并在交叉编译时填充了更多库。
2.  “ **rootfs”**目录，相当于设备上的目录——本质上是暂存目录的副本，没有文档和头文件等不需要的东西。据我了解，最好的方法是将所需文件从暂存目录复制到 rootfs。

获取 rootfs 目录很容易，因为它可以是来自设备的 NFS 挂载。但是，我如何获得 PI 上现有 Emdebian 安装的暂存目录？暂存目录需要包含诸如 dbus 标头之类的内容，这些内容未安装在 rootfs 上。

有些人只需在设备上安装 dbus 头文件，使用*apt-get install libdbus-dev*，然后使用 rootfs 作为暂存目录。使用此设置，rootfs 和 staging 之间不再有区别，缺点是 rootfs 被标头、文档等污染。优点当然是简单。

**将 dbus 标头放入主机上的暂存目录的最佳方法是什么？**人们在这种情况下使用的通常方法是什么？

作为一个附带问题，为什么获取工具链、编译程序然后将其复制到目标上的方法完全有效？工具链提供了自己的 libc、libstdc++ 等版本，它们与目标上安装的版本不兼容吗？特别是在使用使用 crosstool-ng 编译的自定义工具链创建时？

（请注意，我不是在问如何编译 Qt，我可以自己弄清楚。我的问题更笼统，关于将自定义工具链与现有安装/rootfs 组合时采用的方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T02:36:43.413

根据我的经验，你不需要编译你的 dbus。你可以这样做

[通过https://wiki.debian.org/EmDebian/CrossDebootstrap](https://wiki.debian.org/EmDebian/CrossDebootstrap)通过 debootstrap 创建 Debian cross rootfs 通过
crosstool-ng 创建您的 cros-compile 工具链，并确保内核版本和 eglibc 版本与第一步
构建创建的 rootfs 相同QT 由

```
CPPFLAGS=-I<rootfs>/usr/include \
LDFLAGS=-L<rootfs>/lib -L<rootfs>/usr/lib -Wl,-rpath-link,<rootfs>/lib,<rootfs>/usr/lib \
./configure <your options>
make 
```

通过以下方式将 QT 安装到 stage 目录中

```
make install DESTDIR=<stage directory> 
```

从 rootfs 复制 QT 依赖库到你的 stage 目录

所以你可以看到，stage 目录保持最小而没有污染。

# java - 如何在java中实现haskell数据类型？

> ID：15453209
> 
> 赞同：0
> 
> 时间：2013-03-16T18:46:12.020
> 
> 标签：java, haskell, functional-programming, frege

如果你有这些 Haskell 数据类型

```
data Mlist a = Mlist [a]

data Mordering = MLT | MEQ | MGT | MIN deriving (Eq, Show) 
```

用java编写这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T19:07:05.827

如果你想在 Java 中获得 sum-only 类型，那很容易。只需使用`enum`：

```
public enum Mordering {
    MLT, MEQ, MGT, MIN
} 
```

您甚至可以免费获得平等`toString()`和其他有用的东西。如果您需要仅产品类型，例如您的`Mlist`，那么简单的类是要走的路：

```
public class Mlist<T> {
    public final List<T> list;

    public Mlist(List<T> list) {
        this.list = list;
    }
} 
```

如果您需要完整的 ADT（产品总和），那么事情可能会变得更加复杂。

通常此类类型使用继承进行编码。考虑番石榴[可选](https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained#Optional)类。它等价于 Haskell`Maybe`数据类型。它被建模为一个基类，称为`Optional`和两个子类：`Present`，映射到 Haskell `Just`，和`Absent`，映射到`Nothing`。基类 , 也`Optional`包含一些有用的工厂方法，例如`Optional.of(value)`or `Optional.absent()`。我认为这是您应该使用的方法。

然而，没有模式匹配的 ADT 的价值会迅速下降。我认为您最好不要尝试在 Java 中使用 Haskell 惯用语，因为它们是完全不同的语言，每种语言都有自己的一套模式和技术。一些通用概念可能对它们都有用（例如`Optional`/ `Maybe`），但通常在这些语言中存在完全不同的解决问题的方法。

顺便说一句，Scala 语言（也在 JVM 上运行）以类似的方式模拟 ADT，通常使用`abstract sealed`基类和多个`case classes`扩展它：

```
abstract sealed class Optional[+T]
case class Present[+T](value: T) extends Optional[T]
case class Absent() extends Optional[Nothing] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:46:12.770

不确定是否有**最好**的方法来做到这一点。

但要获得一个想法，可以执行以下操作：通过[frege 编译器](https://github.com/Frege/frege)运行此代码并查看它生成的 java 代码。

（Frege 是一种 JVM 语言，它试图弥补缺少的 Haskell-JVM 后端。Frege 本质上是 Haskell 2010 加上更高级别的多态类型和 Java 互操作。）

# unix - 结合 awk 和 csum 来散列一个字段

> ID：15453219
> 
> 赞同：2
> 
> 时间：2013-03-16T18:47:50.317
> 
> 标签：unix, awk, md5, delimiter

我有管道分隔的文本文件，需要特定字段或一组字段的 MD5 哈希。因为我在 AIX 上并且必须使用 csum 函数，所以我认为我不能简单地将文件和散列函数传递给 awk 以一举完成。

所以我正在编写一个脚本，它读取每一行，将要散列的字段传递给 csum，然后通过 gsub 将结果作为替换返回。99% 的时间它似乎可以正常工作，但有时会因为 gsub 替换了它不应该替换的东西而发生冲突。

```
#!/bin/ksh
rm $2 #Get rid of output file
while read line; do #loop through each line
MYFIELD=$(echo "$line" | cut -d "|" -f 6); #push the 6th field into a var
MYHASH=$(echo $MYFIELD | csum -h MD5 -); #csum will hash a string only on the stdin
echo $line | sed -e "s/$MYFIELD/${MYHASH}/g" >> $2 #gsub replaces, but not always what we want
done < $1 #read in the input file 
```

我认为我可以使用 awk 来更新该字段。但我无法一次完成这一行。理想情况下，我希望有一个脚本允许我传递两个强制参数（infile 和 outfile），然后传递任意数量的字段位置，这些位置将被散列和替换。阿拉

```
foo infile.txt outfile.txt 2 6 12 
```

它将读入 infile.txt，散列字段 2、6 和 12，并写出到 outfile.txt。您的建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:11:09.793

怎么做呢`awk`？

代替

```
echo $line | sed -e "s/$MYFIELD/${MYHASH}/g" >> $2 #gsub replaces, but not always what we want 
```

您可以使用

```
old=$MYFIELD; new=$MYHASH; echo $line | awk -F"|" -v o="$old" -v n="$new" '{OFS=FS} sub(o, n, $6) {print}' >> $2 
```

基本上我们所做的是：

*   `old=$MYFIELD; new=$MYHASH`我们分配要*发送*到的参数`awk`。
*   `echo $line`我们输出该行以便 awk 可以得到它。

在 awk 中，

*   `-F"|"`定义`|`为字段分隔符。
*   `-v o="$old"`让awk`-v n="$new"`处理变量并`$old`分别`$new`命名它们。 `o``n`
*   `{OFS=FS}`- 定义字段之间的分隔符。也可能是`OFS="|"`，但这种方式我们指示`awk`使用我们定义的相同`-F="|"`。保留字段分隔符以防它发生变化更加灵活。
*   `sub(o, n, $6)`将变量（即 ）上的文本替换为变量（`o`即`$MYFIELD`）上的文本，但**仅**在字段 6 上。 `v``$MYHASH`
***   `print`替换文本的整行**

 **在您给出的评论示例中，这对我有用：

```
old="hashit"; new="WE_DID"; echo "donthashit|foo1|bar1|foo2|bar2|hashit" | awk -F"|" -v o="$old" -v n="$new" '{OFS=FS} sub(o,n,$6) {print}'
donthashit|foo1|bar1|foo2|bar2|WE_DID 
```

希望能帮助到你。

**编辑**
我[找到了一种](https://stackoverflow.com/questions/15485096/array-length-in-ksh-always-return-1-and-why-array-is-not-lines)轻松将变量传递给 awk 的方法：`-v o=${variable_name}`

这样，解决方案可以是：

```
echo $line | awk -F"|" -v o=${MYFIELD} -v n=${MYHASH} '{OFS=FS} sub(o, n, $6) {print}' >> $2 
```**

# javascript - 是什么决定了事件是否在 javascript 中传递给我的函数？

> ID：15453224
> 
> 赞同：1
> 
> 时间：2013-03-16T18:48:13.747
> 
> 标签：javascript, html, events

当从嵌入在锚元素中的脚本调用时，参数 e 将是未定义的。

```
function testOverrideClick(e) {
    console.log(e);
    e.preventDefault();          
}

....

<body onload="afterLoad();">
<a id="testAnchor" href="http://www.google.com" onclick="testOverrideClick()">test link</a> 
```

但是，如果我从脚本注册事件处理程序， e 将是有效的：

```
function afterLoad() {
      document.getElementById("testAnchor").onclick = testOverrideClick;
}

...

<a id="testAnchor" href="http://www.google.com">test link</a> 
```

发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:54:41.360

`event`将标识符传递给您的函数。

```
<a id="..." href="..." onclick="testOverrideClick(event)">test link</a> 
```

* * *

这是因为在兼容 W3 的浏览器中分配的函数看起来像这样：

```
elem.onclick = function(event) {
    testOverrideClick(event);
} 
```

所以事件参数将被传递。

* * *

在旧版 IE 中，它看起来更像这样：

```
elem.onclick = function() {
    testOverrideClick(event);
} 
```

所以全局`window.event`将被传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:52:05.747

> 发生了什么？

您没有将任何内容传递给此处的 javascript 函数：

```
onclick="testOverrideClick()" 
```

因此，您的函数崩溃是因为您尝试访问`e`从未传递的参数。

不用担心，您的第二个代码片段是正确的方法 - 不显眼且不混合 javascript 和 HTML。

# ruby-on-rails - Git：如何开始一个 repo 以通过 ssh 在远程服务器上使用它

> ID：15453225
> 
> 赞同：0
> 
> 时间：2013-03-16T18:48:24.660
> 
> 标签：ruby-on-rails, git, ssh

我在 Heroku 上使用 git，一切都很顺利。现在我试图在 VPS 服务器上使用 git，但我无法让它工作。

我正在通过 ssh 在终端上执行此操作。这是一个轨道应用程序。当我创建一个新的 Rails 应用程序时，我会`git init` `git add .`提交。在服务器上，我使用`git init --bare`. 当我尝试推动它时它只是失败了。

然后我尝试手动将文件上传到服务器，在那里创建一个仓库并在本地克隆它，但是当我在本地进行更改时，提交它并上传它们，它也失败了。

我真的做了更多的事情，试图自己找出失败的原因。有很多不同的错误和不同的方法......我阅读了不同的教程，甚至我自己的服务器提供商作为我遵循的一个并且得到了错误。

当我收到错误消息时，我试图找到解决方案，但我最终无法推动。好吧，在某些情况下推送进展顺利，但远程回购似乎没有改变（之后也没有错误`git push`）。

在过去的 48 小时里，我实际上只是在电脑上试图完成这项工作，每次都重新开始并尝试不同的事情。

我认为这一次我离做对只有一步之遥。之后才意识到（并且不记得我遵循的步骤）它可能是使用不同分支的东西，因为我做到了，它看起来有点奇怪（对我来说）：

```
$ git branch -r
origin/HEAD -> origin/master
origin/master

$ git branch
* master 
```

奇怪，因为我认为可能没有列出相同的远程和本地分支。

所以我的问题实际上是**如何用一个空白的 rails 应用程序启动一个新的 git repo，并第一次将所有内容上传到我的服务器**。不知道这是否重要，但我使用 ssh 从终端连接到服务器，服务器作为 Apache/Phusion 乘客。

实际上，我已经将所有关于此的谷歌结果都标记为已访问，甚至这里的大多数问题都与*我的问题*有关。所以希望有人能告诉我正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:58:11.420

你的步骤看起来不错，不过我会再提供一次

```
[user@server] cd path/to/repo
[user@server] git init --bare projekt
[user@home] git push user@server:path/to/repo --all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:12:17.603

看起来你们很亲近。在您的开发机器上确保您定义了正确的远程：

```
git remote add origin ssh://<username>@<hostname>[:<port>]/path/to/repo/dir 
```

然后确保您的推送包括分支：

```
git push origin master 
```

你会得到类似的东西：

```
ebg@ebg(21)$ git push origin master
Counting objects: 3, done.
Writing objects: 100% (3/3), 207 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To ssh://gozoner@<hostname>:2222/home/gozone/git/foo
 * [new branch]      master -> master 
```

我的具体流程：

```
$ mkdir /tmp/foo; cd /tmp/foo; touch foo.c; git init;
$ git add .; git commit -m 'foo'
$ ssh remote
> mkdir ~/git/foo; cd ~/git/foo; git init --bare
> ^D
$ git remote add origin ssh://.../home/gozoner/git/foo
$ git push origin master 
```

[编辑]

如果您然后查看远程存储库，在我上面的示例中的 ~/git/foo 中，您将只会看到类似 .git 的文件。要获取存储库内容，要运行您的 rails 应用程序，请执行克隆。

```
$ ssh remote
> git clone ~/git/foo ~/rails/foo
> cd ~/rails/foo
> # your files are there; run web server 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T19:28:58.380

不知道为什么它不适合你，但这是设置远程仓库的另一种方式。

（以下内容基于[Pro Git 的第 4.2 章](http://git-scm.com/book/en/Git-on-the-Server-Getting-Git-on-a-Server)。有关更详尽的说明，请参阅链接。）

创建你的仓库的“裸”版本。从 git 存储库的父目录运行此命令。

```
local$ git clone --bare my_project my_project.git 
```

将裸存储库复制到远程服务器。此示例将裸存储库放入`~user/git`.

```
local$ scp -r my_project.git user@your-remote-server.com:git 
```

现在应该可以通过从本地存储库根运行以下命令从现有存储库访问它：

```
local$ git remote add origin user@your-remote-server.com:git/my_project.git 
```

或者你可以克隆整个东西：

```
local$ git clone user@your-remote-server.com:git/my_project.git 
```

# c# - 用 C# 编写一个 Excel 文件

> ID：15453227
> 
> 赞同：0
> 
> 时间：2013-03-16T18:48:25.233
> 
> 标签：c#, excel, dll

我需要用 C# 编写一个 Excel 文件，但我不知道如何..

谁能给我一个可以做类似事情的图书馆？：

```
Cell(1, 1) = "16.3.2013"; //the first number is the column, the second number is the row
Cell(1, 2) = "Firt name";
Cell(2, 2) = "Last name";
Cell(3, 2) = "Passed/Failed"; 
```

不管怎么说，还是要谢谢你 ：）

# mysql - 选择每组中的 SECOND LAST 记录

> ID：15453231
> 
> 赞同：7
> 
> 时间：2013-03-16T18:48:49.623
> 
> 标签：mysql, greatest-n-per-group, mysql-workbench, dml, sqlyog

有一个`Remark`包含数据的表，如下所示：

```
 SerialNo | RemarkNo  | Desp
=============================================
             10 |         1 | rainy
             10 |         2 | sunny
             11 |         1 | sunny
             11 |         2 | rainy
             11 |         3 | cloudy
             11 |         4 | sunny
             12 |         1 | rainy 
```

什么查询将返回以下结果：

```
 10 |         1 | rainy
             11 |         3 | cloudy
             12 |      null | null 
```

也就是应该返回每组倒数第二条记录？

假设 SerialNo 的所有 RemarkNo 都是连续的。备注编号越大，备注越晚。因此，序列号 10 的倒数第二个 RemarkNo 是 1，其中 Desp 为“rainy”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:28:27.637

尝试：

```
select s.SerialNo, r.RemarkNo, r.Desp
from (select SerialNo, max(RemarkNo) maxRemark from Remark group by SerialNo) s
left join Remark r on s.SerialNo = r.SerialNo and s.maxRemark-1 = r.RemarkNo 
```

（[这里是 SQLFiddle。](http://sqlfiddle.com/#!2/d2cd5/1)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:20:36.273

这里有一些 sql 伪代码可以帮助您入门：

```
select
  penultimate.*
from data as penultimate
left join (
  /* query on data to return last row frome each group */
) as ultimate
  on /* sql to join 2nd last record on each group to last group */
where not ultimate.SerialNo is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:21:10.347

完全无效的解决方案，但有效......

```
SELECT
  SerialNo,
  RemarkNo,
  (SELECT Desp
   FROM Remarks
   WHERE SerialNo = r3.SerialNo AND RemarkNo = r3.RemarkNo) Desp
FROM (
  SELECT
      r.SerialNo,
      (SELECT r2.RemarkNo
       FROM Remarks r2
       WHERE r.SerialNo = r2.SerialNo
       ORDER BY r2.RemarkNo DESC
       LIMIT 1, 1) RemarkNo
  FROM (SELECT DISTINCT SerialNo FROM Remarks) r) r3 
```

工作示例：[http ://sqlfiddle.com/#!2/a1f89/22](http://sqlfiddle.com/#!2/a1f89/22)

# python - 为什么在连接到使用 supervisord 运行的进程时 stdout 不刷新？

> ID：15453234
> 
> 赞同：4
> 
> 时间：2013-03-16T18:49:17.827
> 
> 标签：python, unix, terminal, supervisord

我正在使用 Supervisor（用 python 编写的进程控制器）来启动和控制我的 Web 服务器和相关服务。我发现有时需要在服务器运行时进入 pdb（或真正的 ipdb）进行调试。我无法通过主管执行此操作。

Supervisor 允许使用名为 supervisord 的守护进程启动和控制进程，并通过名为 supervisorctl 的客户端提供访问权限。此客户端允许您附加到已使用“fg”命令启动的前台进程之一。像这样：

```
supervisor> fg webserver 
```

所有记录数据都被发送到终端。但是我没有从 pdb 调试器中得到任何文本。它确实接受我的输入，所以标准输入似乎正在工作。

作为我调查的一部分，我能够确认既不发送`print`也不`raw_input`发送短信；但在标准输入的情况下`raw_input`确实有效。

我还能够确认这有效：

```
sys.stdout.write('message')
sys.flush() 
```

我认为，当我发出`fg`命令时，就好像我已经在标准终端的前台运行了该进程......但似乎 supervisorctl 正在做更多的事情。例如，常规打印不会刷新。有任何想法吗？

**`fg`使用supervisorctl 中的命令连接到前台终端时，如何使 pdb、标准打印等正常工作？**

（可能有用的参考：[http](http://supervisord.org/subprocess.html#nondaemonizing-of-subprocesses) ://supervisord.org/subprocess.html#nondaemonizing-of-subprocesses ）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T13:10:45.377

事实证明，python 默认缓冲其输出流。在某些情况下（例如这种情况） - 它会导致输出被扣留。

存在这样的成语：

```
sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0) 
```

强制缓冲区为零。

但我认为更好的选择是使用`-u`标志以无缓冲状态启动基本 python 进程。在 supervisord.conf 文件中，它简单地变成：

```
command=python -u script.py 
```

参考：[http ://docs.python.org/2/using/cmdline.html#envvar-PYTHONUNBUFFERED](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONUNBUFFERED)

另请注意，这会弄脏您的日志文件 - 特别是如果您使用带有 ANSI 着色的 ipdb 之类的东西。但由于它是一个开发环境，所以这不太重要。

如果这是一个问题 - 另一种解决方案是在 supervisorctl 中停止要调试的进程，然后在另一个终端中临时运行该进程以进行调试。如果需要，这将使日志文件保持干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:27:43.097

可能是您的网络服务器将其自己的标准输出（内部）重定向到日志文件（即它忽略了supervisord 的标准输出重定向），这阻止了supervisord 控制其标准输出的位置。

要检查是否是这种情况，您可以`tail -f`记录日志，并查看您希望在终端中看到的输出是否到那里。

如果是这种情况，看看您是否可以找到一种方法来配置您的网络服务器不这样做，或者，如果一切都失败了，请尝试使用两个终端......（一个用于输入，一个用于输出）

# php - 根据查询在php中加载相同的页面

> ID：15453235
> 
> 赞同：0
> 
> 时间：2013-03-16T18:49:27.773
> 
> 标签：php, javascript, html

如果搜索字段留空，我什么都不做，如果输入了内容，我会加载另一个页面。那么，当输入文本框值为空白时如何**加载相同的php页面**，当输入文本值不为**空白****时**如何加载不同的php页面......？

 **例如

```
<input id="srch" type="text" name="query" > 
```

如果此文本框的值为“”，则应加载相同的 php 页面，否则，其他页面....

**php**或**javascript**有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:53:31.037

在 PHP 中，在检查查询内容的脚本中，您可以这样做：

```
if( isset($_GET['query']) && $_GET['query'] != '' ) {
    header('Location: someotherpage.php?query=' . urlencode($_GET['query']));
    exit();
} 
```

这个 qill 指示浏览器转到 someotherpage.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:53:53.937

`onsubmit`您可以为您的表单使用一个简单的函数：

```
<form method="post" action="<?php $_SERVER['PHP_SELF']?>" onSubmit="return validate()" id="searchForm">
    <input id="srch" type="text" name="query" >
    <input type="submit" value="Submit">
</form>

<script type="text/javascript">
function validate(){
    if(document.getElementById('srch').value != ''){
        document.getElementById('searchForm').action = 'YOUR_OTHER_PAGE';
    }
}
</script> 
```

在上面的例子中，然后表单被提交，它转到`validate()`javascript 中的一个函数。此函数快速检查是否`#srch`为空。如果不是，那么它会将`action`表单更改为您指定的页面。我将该值设置为`YOUR_OTHER_PAGE`，您必须将其更改为适当的页面。如果 的值为`#srch`空，那么它会保留我设置为的动作`PHP_SELF`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:54:17.213

在 PHP 中 - 在提交表单之后 - 让我们说一个名为的脚本`decide.php`

它的内容：

```
if (!isset($_GET['query']) || $_GET['query']=='' )
    include "emptysearchlanding.php";
else
    include "somethingelse.php"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T18:55:31.940

`inputString.length == 0`这是我使用的代码，您可以通过使用空白输入来决定要做什么，然后执行 if 语句来执行您的第二个函数。我在答案中包含的代码用于将输入自动发布到 php 文件中。

**javascript**：

```
<script type="text/javascript">
function lookup(inputString) {
if(inputString.length == 0) 
{
$('#suggestions').hide();
}
else
{
$.post("http://www.example.com/suggest.php", {queryString: ""+inputString+""}, function(data){
if(data.length > 0) {
$('#suggestions').show();
$('#autoSuggestionsList').html(data);
}
});
}
} 
function fill(thisValue) {
$('#inputString').val(thisValue);
setTimeout("$('#suggestions').hide();", 200);
}
function outoffocus() {
setTimeout("$('#suggestions').hide();", 200);
}
</script> 
```

**HTML**：

```
<form id="search" action="/search.php" method="get"> 
<input type="text" name="search" id="inputString" onkeyup="lookup(this.value);" onblur="outoffocus()" onfocus="lookup(this.value);"/>
<input type="submit" value="&nbsp;" />
<div class="suggestionsBox" id="suggestions" >
 <div class="suggestionList" id="autoSuggestionsList">
&nbsp;
</div>
</div>
</form> 
```**

# python - 在python中用熊猫计算一行的出现次数

> ID：15453237
> 
> 赞同：2
> 
> 时间：2013-03-16T18:49:29.550
> 
> 标签：python, numpy, pandas

我有一个包含数千行和 4 列的 pandas 数据框。IE：

```
A B C D 
1 1 2 0
3 3 2 1
3 1 1 0
.... 
```

有没有办法计算某一行出现了多少次？例如，可以找到多少次 [3,1,1,0] 并返回这些行的索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T19:57:41.813

如果您只寻找一排，那么我可能会做类似的事情

```
>>> df.index[(df == [3, 1, 1, 0]).all(axis=1)]
Int64Index([2, 3], dtype=int64) 
```

--

解释如下。从...开始：

```
>>> df
   A  B  C  D
0  1  1  2  0
1  3  3  2  1
2  3  1  1  0
3  3  1  1  0
4  3  3  2  1
5  1  2  3  4 
```

我们与我们的目标进行比较：

```
>>> df == [3,1,1,0]
       A      B      C      D
0  False   True  False   True
1   True  False  False  False
2   True   True   True   True
3   True   True   True   True
4   True  False  False  False
5  False  False  False  False 
```

找到匹配的：

```
>>> (df == [3,1,1,0]).all(axis=1)
0    False
1    False
2     True
3     True
4    False
5    False 
```

并使用此布尔系列从索引中进行选择：

```
>>> df.index[(df == [3,1,1,0]).all(axis=1)]
Int64Index([2, 3], dtype=int64) 
```

如果您不计算一行的出现次数，而是希望对每一行重复执行此操作，因此您确实希望同时定位所有行，那么有比一次又一次执行上述操作更快的方法。但这对于一排应该足够好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:49:18.750

首先创建一个示例数组：

```
>>> import numpy as np
>>> x = [[1, 1, 2, 0],
... [3, 3, 2, 1],
... [3, 1, 1, 0],
... [0, 1, 2, 3],
... [3, 1, 1, 0]] 
```

然后创建一个数组视图，其中每一行都是一个元素：

```
>>> y = x.view([('', x.dtype)] * x.shape[1])
>>> y
array([[(1, 1, 2, 0)],
       [(3, 3, 2, 1)],
       [(3, 1, 1, 0)],
       [(0, 1, 2, 3)],
       [(3, 1, 1, 0)]], 
      dtype=[('f0', '<i8'), ('f1', '<i8'), ('f2', '<i8'), ('f3', '<i8')]) 
```

对要查找的元素执行相同的操作：

```
>>> e = np.array([[3, 1, 1, 0]])
>>> tofind = e.view([('', e.dtype)] * e.shape[1]) 
```

现在您可以查找元素：

```
>>> y == tofind[0]
array([[False],
       [False],
       [ True],
       [False],
       [ True]], dtype=bool) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T23:24:26.177

您也可以使用 MultiIndex，当它被排序时，它会更快地找到计数：

```
s = StringIO("""A  B  C  D
1  1  2  0
3  3  2  1
3  1  1  0
3  1  1  0
3  3  2  1
1  2  3  4""")
df = pd.read_table(s,delim_whitespace=True)
s = pd.Series(range(len(df)), index=pd.MultiIndex.from_arrays(df.values.T))
s = s.sort_index()
idx = s[3,1,1,0]
print idx.count(), idx.values 
```

输出：

```
2 [2 3] 
```

# bash - Bash：意外标记“else”附近的语法错误

> ID：15453240
> 
> 赞同：0
> 
> 时间：2013-03-16T18:49:44.527
> 
> 标签：bash

我收到以下错误：

```
./adduser.sh: line 21: syntax error near unexpected token `else'
./adduser.sh: line 21: `        else' 
```

我在这里被困了一个小时，我就是想不通。

```
#!/bin/bash
#==========================================================================================================================================
# Script Name:  adduser.sh
# By:           Tim mayo
# Date:         3/2013
# Purpose:      Add a user to the Linux system
# Command line: adduser.sh
#
#==========================================================================================================================================
        read -p "Enter username : " username
        read -s -p "Enter password : " password
        egrep "^$username" /etc/passwd >/dev/null
        if [ $? -eq 0 ]; then
                echo "$username exists!"
                exit 1
        else
                pass=$(perl -e 'print crypt($ARGV[0], "password")' $password)
                useradd -m -p $pass $username
                [ $? -eq 0 ] && echo "User has been added to system!" || echo "Failed to add a user!"
        fi
                else
                        echo "Root user can only add a user to the Linux system"
                        exit 2
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:53:52.377

`else`关键字不与任何`if`语句关联；您在第 20 行用关键字结束了`if`语句。`fi`也许您`if`在两个语句之前缺少一个`read`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:33:54.823

另一个“仅以 root 身份运行”示例：

```
 #!/bin/bash

if [ $UID -eq "0" ]
then
        read -p "Enter username : " username
        read -s -p "Enter password : " password
        egrep "^$username" /etc/passwd >/dev/null
        if [ $? -eq 0 ]; then
                echo "$username exists!"
                exit 1
        else
                pass=$(perl -e 'print crypt($ARGV[0], "password")' $password)
                useradd -m -p $pass $username
                [ $? -eq 0 ] && echo "User has been added to system!" || echo "Failed to add a user!"
        fi
                 else
                        echo "Root user can only add a user to the Linux system"
                        exit 2
fi 
```

# perl - 查询：如何将此批处理文件转换为shell脚本？

> ID：15453245
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:49:50.323
> 
> 标签：perl, shell

我收到了一个名为 make.bat 的批处理文件，其中包含以下信息：

```
javac Node.java
javac PhysServer.java
start java Physerver topology.txt 8080
start java Node A localhost 8080
start java Node B localhost 8080 
```

由于我运行 OSX 和 linux，我无法运行批处理文件。因此，我如何将其重写为 perl 脚本并在终端中运行？我在下面尝试了以下操作，但它崩溃了：

```
#!/user/bin/perl  
javac Node.java
javac PhysServer.java
start java Physerver topology.txt 8080
start java Node A localhost 8080
start java Node B localhost 8080 
```

我得到的错误是：

```
Number found where operator expected at ./make2.pl line 5, near "txt 8080"
    (Do you need to predeclare txt?) 
```

我还怀疑我应该删除java前面的“start”并调用java命令。对于这个愚蠢的问题，我感到很抱歉，但我对脚本很生疏，最近一直在自学如何编写 perl 和 makefile 以开始节省时间。

另外，当我一直在寻找答案时，我发现大多数帖子都在谈论如何在 java 中运行 perl，这是我不想做的事情。我认为这是我可以用 perl 做的事情，但下面的评论纠正了我。我正在学习，不会再犯同样的错误。感谢您的所有帖子。我将对所有人进行投票和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:01:40.603

你所写的更像是 shell 脚本，而不是 Perl。

```
#!/bin/sh

javac Node.java
javac PhysServer.java
java Physerver topology.txt 8080
java Node A localhost 8080
java Node B localhost 8080 
```

我对批处理脚本不熟悉，所以我不知道这三个 Java 进程是应该顺序运行，等待一个完成后再开始下一个（上面的代码就是这样做的），还是并行运行。如果并行，`&`在最后三行的每一行的末尾添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:01:55.630

Perl 是一种类似于 Java 的完整编程语言。这不是最好的选择。一个 bourne shell 脚本会更容易：

```
#!/bin/sh
javac Node.java
javac PhysServer.java
java Physerver topology.txt 8080 &
java Node A localhost 8080 &
java Node B localhost 8080 & 
```

如果要添加错误检查，

```
#!/bin/sh
javac Node.java &&
javac PhysServer.java && (
   java Physerver topology.txt 8080 &
   java Node A localhost 8080 &
   java Node B localhost 8080 &
) 
```

在评论中，您表示要在新窗口中启动每个服务器。我不是 OS X 用户，所以我必须查一下。另一个[答案](https://stackoverflow.com/questions/1589114/opening-a-new-terminal-tab-in-osxsnow-leopard-with-the-opening-terminal-window)表明

```
#!/bin/sh
pwd="`pwd`"

javac Node.java &&
javac PhysServer.java && (
   osascript -e "tell application \"Terminal\" to do script \"cd \\\"$pwd\\\"; clear; java Physerver topology.txt 8080\"" >/dev/null
   osascript -e "tell application \"Terminal\" to do script \"cd \\\"$pwd\\\"; clear; java Node A localhost 8080\"" >/dev/null
   osascript -e "tell application \"Terminal\" to do script \"cd \\\"$pwd\\\"; clear; java Node B localhost 8080\"" >/dev/null
) 
```

# scala - 如何处理 Scala 中的类型名称冲突？

> ID：15453247
> 
> 赞同：3
> 
> 时间：2013-03-16T18:50:26.447
> 
> 标签：scala, scope

我正在编写一个扩展的类，`Scanners`迫使我定义类型`Token`：

```
object MyScanner extends Scanners {
  type Token = ...
} 
```

问题是我的令牌类本身被称为`Token`：

```
abstract class Token(...)
case class Literal(...)
... 
```

是否可以在 Scala 中以某种方式定义我的类`Token`的类型？`Scanners``Token`

`type Token = Token`显然行不通。

我还尝试使用整个包名（以 开头`main.scala`），如下所示：

```
type Token = main.scala....Token 
```

这是另一个名称冲突，因为我在`main`里面定义了一个函数`MyScanner`。

我目前的解决方案是重命名我的令牌类。还有一个我可以保留初始名称的地方吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T19:21:08.863

使用完全限定的类名定义 Token 类型是可行的。为避免名称与您的 main 方法发生冲突，您可以使用*根*前缀来指示您指的是完全限定的类型名称，而不是相对类型名称或方法名称。例如：

```
package main

import scala.util.parsing.combinator.lexical._

case class Token(s: String)

object MyScanner extends Scanners {
  type Token = _root_.main.Token
  val Token = _root_.main.Token
  def errorToken(msg: String) = Token(msg)
  def token = ???
  def whitespace = ???

  def main = ???
} 
```

其他一些替代方案包括：

1.  在 MyScanner 对象之外定义类型别名（在封闭对象中或在包对象中）。
2.  导入您的令牌类并将其作为导入的一部分。例如：`import main.scala.{Token => MyToken}`。

# c++ - &a[x] 在 C 中返回什么类型的值

> ID：15453252
> 
> 赞同：0
> 
> 时间：2013-03-16T18:50:55.700
> 
> 标签：c++, c, operators, memory-address

以下表达式在 C 中用于获取特定元素的地址。

```
 &a[x] 
```

返回值的类型是什么？这取决于什么？它是否总是相同的约定还是取决于操作系统？

* * *

我需要知道这一点，因为：

我需要从这个指针中提取一个位模式，所以我试图了解该值是十六进制还是二进制。当您说指针时，它是像：0x25434 还是像 0111000111？

因为这会影响我提取比特的方式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T18:54:03.030

对于 T 的数组，返回值的类型是指向 T 的指针，声明为`T *`：

```
T a[] = ...;
T *ptr = &a[n]; 
```

这个指针如何显示——二进制、十六进制、十进制、莫尔斯——完全取决于显示它的代码。格式值是一种流行的`%p`调试选择，它通常会以十六进制打印指针的值（内存地址）。

如果指针指向的地址需要用数字表示，可以通过将指针强制转换为`uintptr_t`整型来获得：

```
uintptr_t addr = (uintptr_t) ptr; 
```

然后可以使用通常的算术和二进制运算符检查地址的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:55:25.427

例如，如果 a[] 是 int 数组，则它将是 int*。如果您不熟悉 C 语言，我建议您阅读本书[http://en.wikipedia.org/wiki/The_C_Programming_Language](http://en.wikipedia.org/wiki/The_C_Programming_Language)

# html - 就地编辑内容编辑

> ID：15453254
> 
> 赞同：55
> 
> 时间：2013-03-16T18:51:07.857
> 
> 标签：html, angularjs, edit

使用`ng-repeat`什么是能够编辑内容的最佳方式？

在我的理想情况下，**添加**的生日将是一个超链接，当点击它时，它将显示一个编辑表单 - 与当前带有更新按钮的添加表单相同。

[实时预览（Plunker）](http://plnkr.co/edit/E35yeU?p=preview)

**HTML：**

```
<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="utf-8">
    <title>Custom Plunker</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script>
      document.write('<base href="' + document.location + '" />');
    </script>
    <script src="app.js"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.0/css/bootstrap-combined.min.css"
    rel="stylesheet">
  </head>
<body ng-app="birthdayToDo" ng-controller="main">
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container">
        <div class="page-header">
          <h1>Birthday Reminders</h1>
        </div>
            <ul ng-repeat="bday in bdays">
                <li>{{bday.name}} | {{bday.date}}</li>
            </ul>

           <form ng-show="visible" ng-submit="newBirthday()">
            <label>Name:</label>
            <input type="text" ng-model="bdayname" placeholder="Name" ng-required/>
            <label>Date:</label>
            <input type="date" ng-model="bdaydate" placeholder="Date" ng-required/>
            <br/>
            <button class="btn" type="submit">Save</button>
        </form>
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <a class="btn" ng-click="visible = true"><i class="icon-plus"></i>Add</a>
      </div>
    </div>
    </body> 
```

**应用程序.js：**

```
var app = angular.module('birthdayToDo', []);

app.controller('main', function($scope){ 

    // Start as not visible but when button is tapped it will show as true 

        $scope.visible = false;

    // Create the array to hold the list of Birthdays

        $scope.bdays = [];

    // Create the function to push the data into the "bdays" array

    $scope.newBirthday = function(){

        $scope.bdays.push({name:$scope.bdayname, date:$scope.bdaydate});

        $scope.bdayname = '';
        $scope.bdaydate = '';

    };
}); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-16T19:11:34.663

您应该将表单放在每个节点内，并分别使用`ng-show`和`ng-hide`来启用和禁用编辑。像这样的东西：

```
<li>
  <span ng-hide="editing" ng-click="editing = true">{{bday.name}} | {{bday.date}}</span>
  <form ng-show="editing" ng-submit="editing = false">
    <label>Name:</label>
    <input type="text" ng-model="bday.name" placeholder="Name" ng-required/>
    <label>Date:</label>
    <input type="date" ng-model="bday.date" placeholder="Date" ng-required/>
    <br/>
    <button class="btn" type="submit">Save</button>
   </form>
 </li> 
```

这里的关键点是：

*   我已将控件更改`ng-model`为本地范围
*   添加`ng-show`到`form`以便我们可以在编辑时显示它
*   添加了一个`span`带 a`ng-hide`以在编辑时隐藏内容
*   添加了一个`ng-click`，可以在任何其他元素中，切换`editing`到`true`
*   更改`ng-submit`为切换`editing`到`false`

这是您[更新的 Plunker](http://plnkr.co/edit/2UFfaG?p=preview)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-05-24T16:06:31.893

我一直在寻找一个内联编辑解决方案，我发现了一个看起来很有希望的 plunker，但它对我来说开箱即用并不适用。在对代码进行了一些修改后，我让它工作了。感谢最初努力编写这篇文章的人。

该示例可在此处获得[http://plnkr.co/edit/EsW7mV?p=preview](http://plnkr.co/edit/EsW7mV?p=preview)

代码如下：

```
app.controller('MainCtrl', function($scope) {

  $scope.updateTodo = function(indx) {
    console.log(indx);
  };

  $scope.cancelEdit = function(value) {
    console.log('Canceled editing', value);
  };

  $scope.todos = [
    {id:123, title: 'Lord of the things'},
    {id:321, title: 'Hoovering heights'},
    {id:231, title: 'Watership brown'}
  ];
});

// On esc event
app.directive('onEsc', function() {
  return function(scope, elm, attr) {
    elm.bind('keydown', function(e) {
      if (e.keyCode === 27) {
        scope.$apply(attr.onEsc);
      }
    });
  };
});

// On enter event
app.directive('onEnter', function() {
  return function(scope, elm, attr) {
    elm.bind('keypress', function(e) {
      if (e.keyCode === 13) {
        scope.$apply(attr.onEnter);
      }
    });
  };
});

// Inline edit directive
app.directive('inlineEdit', function($timeout) {
  return {
    scope: {
      model: '=inlineEdit',
      handleSave: '&onSave',
      handleCancel: '&onCancel'
    },
    link: function(scope, elm, attr) {
      var previousValue;

      scope.edit = function() {
        scope.editMode = true;
        previousValue = scope.model;

        $timeout(function() {
          elm.find('input')[0].focus();
        }, 0, false);
      };
      scope.save = function() {
        scope.editMode = false;
        scope.handleSave({value: scope.model});
      };
      scope.cancel = function() {
        scope.editMode = false;
        scope.model = previousValue;
        scope.handleCancel({value: scope.model});
      };
    },
    templateUrl: 'inline-edit.html'
  };
}); 
```

指令模板：

```
<div>
  <input type="text" on-enter="save()" on-esc="cancel()" ng-model="model" ng-show="editMode">
  <button ng-click="cancel()" ng-show="editMode">cancel</button>
  <button ng-click="save()" ng-show="editMode">save</button>
  <span ng-mouseenter="showEdit = true" ng-mouseleave="showEdit = false">
    <span ng-hide="editMode" ng-click="edit()">{{model}}</span>
    <a ng-show="showEdit" ng-click="edit()">edit</a>
  </span>
</div> 
```

要使用它，只需加水：

```
<div ng-repeat="todo in todos" 
     inline-edit="todo.title" 
     on-save="updateTodo($index)" 
     on-cancel="cancelEdit(todo.title)"></div> 
```

更新：

另一种选择是为 AngularJS 使用现成的 Xeditable：

[http://vitalets.github.io/angular-xeditable/](http://vitalets.github.io/angular-xeditable/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-26T18:58:46.677

我已经修改了您的 plunker 以使其通过[angular-xeditable](http://vitalets.github.io/angular-xeditable)工作：

[http://plnkr.co/edit/xUDrOS?p=preview](http://plnkr.co/edit/xUDrOS?p=preview)

`editable-text`这是内联编辑的常见解决方案 - 您可以使用切换到`<input type="text">`标签的指令创建超链接：

```
<a href="#" editable-text="bday.name" ng-click="myform.$show()" e-placeholder="Name">
    {{bday.name || 'empty'}}
</a> 
```

对于日期，我使用`editable-date`了切换到 html5 的指令`<input type="date">`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-06T10:48:07.887

由于这是一个常见的功能，因此最好为此编写指令。事实上，有人已经这样做并开源了它。[我在我的一个项目](https://github.com/mkwiatkowski/todo-rails4-angularjs)中使用了[editablespan](https://github.com/mkwidzinska/editablespan)库，它运行良好，强烈推荐。

# wcf - Unity.wcf 和 InstanceContextMode.Single

> ID：15453261
> 
> 赞同：6
> 
> 时间：2013-03-16T18:52:03.330
> 
> 标签：wcf, unity-container

我正在使用 Unity.WCF 为 WCF 服务注入依赖项。当我将服务设置为`InstanceContextMode.Single`.

我在 Google 上发现 when`InstanceContextMode`设置为`Single`,`InstanceProvider`没有被调用。还有一个解决方法，但我想知道 Unity.WCF 中是否有对此的内置支持，因为显然这是一个众所周知的问题。

我在这里找到了信息：[启用`InstanceProvider`单例服务](http://zamd.net/2008/12/18/enabling-instanceprovider-for-singleton-services/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T19:05:25.290

我将引用[Paul Hiles](http://www.devtrends.co.uk/blog/introducing-unity.wcf-providing-easy-ioc-integration-for-your-wcf-services)对您提出的同一问题的评论：

> 使用`InstanceContextMode.Single`会使您的服务扩展非常糟糕，因此在大多数情况下最好避免使用，特别是如果它仅用于允许 AppFabric 自动启动。您可以安全地删除该`ServiceBehavior`属性并以另一种方式进行。
> 
> 使用 Unity.WCF，您可以将初始化代码添加到添加 Unity.WCF NuGet 包时创建`ConfigureContainer`的类的方法中。`WcfServiceFactory`这只会在服务的生命周期内执行一次。
> 
> 顺便说一句，您不应该将 Unity 容器传递到您的服务中。将您的服务使用的任何组件添加到构造函数中（例如存储库、助手等），然后使用该`ConfigureContainer`方法向 Unity 注册。当您的服务被实例化时，依赖项将被自动注入。

您可能还会发现[此 MSDN 系列中的](http://msdn.microsoft.com/en-us/library/vstudio/hh273093%28v=vs.100%29.aspx)[文章](http://msdn.microsoft.com/en-us/library/vstudio/hh323725%28v=vs.100%29.aspx)很有用。

# bluetooth - 在 BlueZ 中设置 L2CAP 流模式

> ID：15453267
> 
> 赞同：2
> 
> 时间：2013-03-16T18:52:27.023
> 
> 标签：bluetooth, streaming, bluez, l2cap

我需要在启用流模式的 BlueZ 上创建一个简单的 L2CAP 连接。有谁知道我如何切换模式？目前，连接已启用重传，我需要取消所有重传。

# c - 检测除 int 以外的任何字符

> ID：15453268
> 
> 赞同：0
> 
> 时间：2013-03-16T18:52:27.400
> 
> 标签：c

目的：当我输入除选项以外的任何数值时，我会收到无效的输入消息。但是当我输入像 az 或 *(#$ 字符这样的任何字符值时，程序会无限循环。请帮助！需要解决这个小问题。

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
void main()
{
 int ch,end=0;
 while(end!=1)
{
 printf("\t MENU! \n");
 printf("\n1 - Set\n");
 printf("2 - Start\n");
 printf("3 - About\n");
 printf("4 - Exit\n");
 printf("\nEnter your choice: ");
 scanf("%d",&ch);

 if(ch==1)
     {
     printf("\nYella\n");
     }

 else if(ch==2)    
  { 
   printf("\nFella\n");
  }   

else if(ch==3)
 {
 printf("\nMella\n");
 }

else if(ch==4)
 {
 exit(0);
 }

 else
 {
 printf("\nInvalid Input. Please try again.\n");
 printf("\n");
 }
}
getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:57:15.227

这是因为

```
scanf("%d",&ch); 
```

正在等待整数，并且您输入了非数字字符，因此您将获得无限循环。修复它

```
while (scanf(" %d",&ch)<1 || ch>4 || ch<1) {
   printf("Your input is wrong. Please enter your choice again:");
   scanf("%*s"); // this scanf allow to clean your stdin
}; 
```

并在格式的开头添加一个空格`"%d"`以避免换行问题。

它应该是`" %d"`

添加检查`|| ch>4 || ch<1`将允许检查输入整数是否介于 1 和 4 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:03:27.913

这是因为数据的类型无效。只需将输入类型更改为`char`即可避免此问题。这应该适合你：

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>

int main()
{
    char ch;
    int end=0;
    while(end!=1)
    {
        printf(" MENU! \n");
        printf("\n1 - Set\n");
        printf("2 - Start\n");
        printf("3 - About\n");
        printf("4 - Exit\n");
        printf("\nEnter your choice: ");
        scanf("%c",&ch);

        if(ch=='1')
            printf("\nYella\n");
        else if(ch=='2')
            printf("\nFella\n");
        else if(ch=='3')
            printf("\nMella\n");
        else if(ch=='4')
            exit(0);
        else
            printf("\nInvalid Input. Please try again.\n\n");

        /*
        //Or better yet,
        switch(ch)
        {
            case '1':
            {
                printf("\nYella\n");
                break;
            }
            case '2':
            {
                printf("\nFella\n");
                break;
            }
            case '3':
            {
                printf("\nMella\n");
                break;
            }
            case '4':
            {
                exit(0);
                //break not required
            }
            default:
                printf("\nInvalid Input. Please try again.\n\n");
        }
        */
    }
    getch();
    return 1;
} 
```

# joomla - Joomla 用户管理

> ID：15453272
> 
> 赞同：0
> 
> 时间：2013-03-16T18:53:01.267
> 
> 标签：joomla, user-management

我有一个 Joomla 票务模块，它在页面的某个部分显示当前用户的当前票证。我想创建用户组，组成员可以在其中查看属于该组的所有票证。我认为最简单的方法是创建 Joomla 组，将用户分配给这些组，当用户登录时，它可以看到其组中的所有票证。我将我的代码添加到函数的开头，但是出了点问题......对于每个用户（当前是“注册”用户）显示相同的结果，最后一个用户票的结果，我不知道为什么：这里是代码：

```
function gTickets()
{
$user    =& JFactory::getUser();
$user_id = (int) $user->get('id');

//get user_group_id  from db based on current users id
    {...}

//get all users with that user_group_id
$db1->setQuery($db1->getQuery(true)
        ->select('*')
    ->from("#__user_usergroup_map")
    ->where("group_id = '$groupss'")
    );

$groupss1=$db1->loadRowList();      
$return1=array();

// for every user_id    
foreach ($groupss1 as $keya)
{       
    $user_id = $keya[0]; // the id of users

    $where = "";
    if ($this->is_staff)
        $where .= " AND t.`staff_id`='".$user_id."'";
    else
        $where .= " AND t.`customer_id`='".$user_id."'";

    $tickets = $this->_getList(
"SELECT t.id, t.subject, t.last_reply_customer, s.name AS status_name FROM
#__rsticketspro_tickets t LEFT JOIN #__rsticketspro_statuses s ON 
(t.status_id=s.id) WHERE 1 $where ORDER BY `last_reply` DESC", 0, 
$this->params->get('tickets_limit', 3));

    print_r($tickets);      
    return $tickets;
} 
```

我有一些问题，我不知道如何寻找......

1.  sql查询中的字母点字段名是什么？例如：SELECT m.ticket_id, m.message FROM #__ticket_messages m WHERE m.user_id !='".$user_id."
2.  WHERE之前的“m”是什么意思？
3.  “1”在这里做什么：**WHERE 1 $where**

另外，我查看了 ACL 管理器，但无法使其与此代码一起使用。

**编辑：**感谢您的快速回答！我又得到了 1 个，我认为这很容易，但我无法让它工作......

如果我将 $ticket 数组的内容打印到另一个数组中，我会得到一个包含多个数组的数组。这就是我的代码不起作用的原因......我得到的数组是：

```
Array ( 
  [0] => stdClass Object ( 
    [id] => 1 
    [subject] => use1 
    [last_reply_customer] => 1 
    [status_name] => open 
  ) 
) 
Array ( 
  [0] => stdClass Object ( 
    [id] => 3 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    )
  [1] => stdClass Object ( 
    [id] => 2 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    ) 
) 
```

我希望数组看起来像这样：

```
Array ( 
  [0] => stdClass Object ( 
    [id] => 1 
    [subject] => use1 
    [last_reply_customer] => 1 
    [status_name] => open 
    )
  [1] => stdClass Object ( 
    [id] => 3 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    )
  [2] => stdClass Object ( 
    [id] => 2 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    ) 
) 
```

谢谢！

**编辑：**这一切实现起来很复杂吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:41:59.263

查看 ACL 以使该部分正常工作，但要回答您在问题底部发布的 3 个问题：

1) 查询中的 letter.field_name 代表查询中的表 alias.field_name。别名 (m) 使它更容易，因此您不必每次都输入完整的表名。

2) WHERE 之前的 m 实际上是设置表别名，但使用惰性语法。它应该说：

```
SELECT m.ticket_id, m.message FROM #__ticket_messages AS m
```

3) “WHERE 1”是表示“if (true)”的 SQL 方式。由于他们在“WHERE 1 $where”之后立即附加 $where 子句，因此生成的查询如下所示：

```
WHERE 1 AND t.staff_id = '" . $user_id . "'
```

你最初是编码的吗？还是您在某处捡到的组件？它应该使用查询构建器而不是像现在这样直接使用 SQL，以使其更便携，更清楚它在做什么。

# c++ - 拆分图像导致未处理的异常错误

> ID：15453276
> 
> 赞同：1
> 
> 时间：2013-03-16T18:53:10.567
> 
> 标签：c++, opencv, image-processing, split

我目前正计划将我的图像分成3个通道，这样我就可以获得图像的RGB值来绘制散点图，这样我就可以使用正态分布来计算协方差矩阵、平均值等，然后计算背景之间的距离点和实际图像来分割图像。

现在在我的第一个任务中，我编写了以下代码。

```
 VideoCapture cam(0);
//int id=0;
Mat image, Rch,Gch,Bch;
vector<Mat> rgb(3);         //RGB is a vector of 3 matrices

namedWindow("window");
while(1)
{
    cam>>image;
split(image,rgb);
    Bch = rgb[0];
    Gch = rgb[1];
    Rch = rgb[2]; 
```

但是一旦它到达 split 函数，我就会单步执行它，它会导致未处理的异常错误。访问冲突写入位置 0xfeeefeee

我对opencv还是新手，所以不习惯处理未处理的异常错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:56:47.603

听起来好像 split 期望向量`Mat`中有三个实例。`rgb`但是你只准备了它来容纳三件物品——它实际上是空的。

尝试将三个项目添加到向量并再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T21:33:27.760

虽然这是一个老问题，但我想分享对我有用的解决方案。而不是`vector<Mat> rgb(3);`我用`Mat channels[3];`. 我意识到即使在加载了 imread 的图像上也无法使用 split 时，使用 vector 有问题。不幸的是，我无法解释为什么这种改变会奏效，但如果有人能做到，那就太好了。

# c# - 正确使用委托和多线程

> ID：15453280
> 
> 赞同：0
> 
> 时间：2013-03-16T18:53:18.023
> 
> 标签：c#, multithreading, delegates

我正在编写一个具有来自多个源的源数据的 WCF 服务。这些是各种格式的大文件。

我已经实现了缓存并设置了轮询间隔，以便这些文件保持最新数据。

我构建了一个管理器类，它基本上负责将 XDocument 对象返回给调用者。管理器类首先检查缓存是否存在。如果它不存在 - 它会调用以检索新数据。这里没什么大不了的。

为了保持响应快速，我想做的是序列化先前下载的文件并将其传递回调用者 - 再次没有什么新东西......但是......我想在序列化完成后立即生成一个新线程检索新数据并覆盖旧文件。这是我的问题...

诚然，一名中级程序员 - 我遇到了一些关于多线程的示例（在这里）......问题是它引入了委托的概念，我真的很挣扎。

这是我的一些代码：

```
//this method invokes another object that is responsible for making the 
    //http call, decompressing the file and persisting to the hard drive.
    private static void downloadFile(string url, string LocationToSave)
    {
        using (WeatherFactory wf = new WeatherFactory())
        {
            wf.getWeatherDataSource(url, LocationToSave);
        }
    }

    //A new thread variable
    private static Thread backgroundDownload;

    //the delegate...but I am so confused on how to use this...
    delegate void FileDownloader(string url, string LocationToSave);

    //The method that should be called in the new thread....
    //right now the compiler is complaining that I don't have the arguments from
    //the delegate (Url and LocationToSave...
    //the problem is I don't pass URL and LocationToSave here...
    static void Init(FileDownloader download)
    {
        backgroundDownload = new Thread(new ThreadStart(download));
        backgroundDownload.Start();
    } 
```

我想以正确的方式实现这一点......所以对如何进行这项工作进行一些教育将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:59:27.393

我会使用[Task Parallel 库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)来做到这一点：

```
//this method invokes another object that is responsible for making the 
//http call, decompressing the file and persisting to the hard drive.
private static void downloadFile(string url, string LocationToSave)
{
    using (WeatherFactory wf = new WeatherFactory())
    {
        wf.getWeatherDataSource(url, LocationToSave);
    }
    //Update cache here?
}

private void StartBackgroundDownload()
{
    //Things to consider:
    // 1\. what if we are already downloading, start new anyway?
    // 2\. when/how to update your cache
    var task = Task.Factory.StartNew(_=>downloadFile(url, LocationToSave));
} 
```

# python - 在 Python 中测试私有方法：单元测试还是功能测试？

> ID：15453283
> 
> 赞同：8
> 
> 时间：2013-03-16T18:53:26.943
> 
> 标签：python, unit-testing

在阅读了有关在 Python 中测试私有方法的信息后，特别是参考了[这个接受的答案](https://stackoverflow.com/questions/2784519/how-do-i-unit-test-the-methods-in-a-method-object)，看来最好只测试公共接口。但是，我的课看起来像这样：

```
class MyClass:

  def __init__(self):
    # init code

  def run(self):
    self.__A()
    self.__B()
    self.__C()
    self.__D()

  def __A(self):
    # code for __A

  def __B(self):
    # code for __B

  def __C(self):
    # code for __C

  def __D(self):
    # code for __D 
```

本质上，我创建了一个类来通过函数管道处理一些输入数据。在这种情况下，依次测试每个私有函数而不将它们暴露为公共函数会很有帮助。如果单元测试无法执行私有功能，该怎么办？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2018-05-03T22:15:03.710

当 Python 将实际执行的代码放在一起时，它会进行一些名称修改。因此，如果您有一个私有方法`__A`on `MyClass`，则需要在单元测试中像这样运行它：

```
from unittest import TestCase

class TestMyClass(TestCase):
    def test_private(self):
        expected = 'myexpectedresult'
        m = MyClass()
        actual = m._MyClass__A
        self.assertEqual(expected, actual) 
```

问题是关于由单个下划线划分的所谓“受保护”值。这些方法名称*没有*被破坏，可以简单地显示：

```
from unittest import TestCase

class A:

    def __a(self):
        return "myexpectedresult"

    def _b(self):
        return "a different result"

class TestMyClass(TestCase):

    def test_private(self):
        expected = "myexpectedresult"
        m = A()
        actual = m._A__a()
        self.assertEqual(expected, actual)

    def test_protected(self):
        expected = "a different result"
        m = A()
        actual = m._b()
        self.assertEqual(expected, actual)
        # actual = m._A__b() # Fails
        # actual = m._A_b()  # Fails 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-16T19:28:27.600

首先，你[可以访问“私人”的东西](https://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private)，不是吗？（或者我在这里遗漏了什么？）

```
>>> class MyClass(object):
...     def __init__(self):
...             pass
...     def __A(self):
...             print('Method __A()')
... 
>>> a=MyClass()
>>> a
<__main__.MyClass object at 0x101d56b50>
>>> a._MyClass__A()
Method __A() 
```

但是`MyClass`如果你必须测试内部的东西，你总是可以写一个测试函数：

```
class MyClass(object):
    ...
    def _method_for_unit_testing(self):
        self.__A()
        assert <something>
        self.__B()
        assert <something>
        .... 
```

当然，这不是最优雅的方式，但它只是类底部的几行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:03:03.707

可能您应该只测试该`run()`方法。大多数类都有内部方法——在这种情况下，是否所有代码都在`__A()`,`__B()`和中并不重要。如果您怀疑或发现问题，那么您可能希望切换到调试器方面并测试私有方法。`__C,()``__D()``run()`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-08-12T19:16:32.870

抱歉，如果您发现这有点无法回答（我认为没有任何普遍有效/无效的决定），但您应该**首先决定要遵循哪种通用测试范例**：[单元测试或功能测试？](https://stackoverflow.com/q/2741832/1357094)

*你决定了单元测试？*

*   然后按照解决方案测试私有 python 方法（您提到的其他已发布问题）

*您决定改为功能测试？*

*   然后`run`按照您的描述测试您的

# html - 无法在内容右侧显示我的侧边栏？

> ID：15453286
> 
> 赞同：2
> 
> 时间：2013-03-16T18:53:45.917
> 
> 标签：html, css, alignment, dreamweaver, sidebar

我有一个网页，它在容器内有两个 div-`content`和`sidebar1`. 我不知道为什么，但是每当我将`sidebar1`div 放在右侧，在`content`div 之后，我的侧边栏就会降落在下方，而不是旁边！

# 我的代码：

## HTML

```
<div class="container">

  <div class="content">
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <h1><!-- TemplateBeginEditable name="Heading" -->Heading<!-- TemplateEndEditable --></h1>
    <!-- TemplateBeginEditable name="Content" -->Just some
    <!-- end .content -->
    dummy text.<!-- TemplateEndEditable --></div>
    <div class="sidebar1">
    </div>
  <div class="footer">
    Footer text<!--end .footer --></div>
<!-- end .container --></div> 
```

## CSS

```
.sidebar1 {
    float: right;
    width: 20%;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 950px;
    float: left;
    border-left-color: #FFF;
    border-right-color: #FFF;
}
.container {
    width: 960px;
    background-color: #000000;
    margin: 0 auto; 
} 
```

我对 HTML 还是很陌生，不明白我的问题。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:04:09.883

内容比父级小 10 像素，因此旁边没有 192 像素的侧边栏空间（960 像素的 20%）。

你可以做更多这样的事情：

```
#container {
    width: 450px;
    margin: 0 auto;
}

#sidebar {
    float: right;
    width: 200px;
    background: #dff;
}

#content {
    overflow: hidden;
    background: #fdd;
}
```

```
<div id="container">
    <div id="sidebar">
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget.</p>
    </div>
    <div id="content">
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante.</p>
    </div>
</div>
```

上面的代码将侧边栏浮动到容器的右侧，然后内容 div 将占用容器中的任何剩余空间。告诉 div在`overflow: hidden`决定大小时注意浮动元素，而不是仅仅占据容器的整个宽度。为此，您必须在元素之前有浮动元素`overflow: hidden`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:59:26.333

尝试使用`float: left`您的`.sidebar1`, 或重新排序您的 HTML，以便侧边栏位于内容之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:02:03.660

你的容器里实际上有 3 个`<div>`s，我不知道这是不是故意的。你应该给你`.content`一个`width: 80%;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:03:21.587

这与您的元素对于容器来说太宽的事实有关。要么将你的侧边栏放在 .content 中，要么调整你的宽度。这是一个选项：

[http://jsfiddle.net/cKMa2/2](http://jsfiddle.net/cKMa2/2)

```
.sidebar1 {
    float: right;
    width: 20%;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 78%;
    float: left;
    border-left-color: #FFF;
    border-right-color: #FFF;
}
.container {
    width: 100%;
    margin: 0 auto;
    overflow: hidden;
}
.footer {
    clear: both;
}

<div class="container">
    <div class="sidebar1">Some content Some content Some content</div>
    <div class="content">
         <h1>Heading</h1>

        <p>Just some dummy text.</p>
    </div>
    <div class="footer">Footer text</div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T19:05:24.430

问题是您的元素浮动在可调整大小的窗口中，因此当空间不足时，浮动元素会转到下一行。

有一个简单的解决方案：将浮动元素放在一个固定宽度的容器中，其宽度足以容纳所有浮动框。

我不确定您屏幕的尺寸，但例如，这可能有效：

```
<div style="width: 1300px;">
    (Put the floated boxes here)
<div> 
```

# c# - 在项目单击时显示标签背景颜色名称

> ID：15453287
> 
> 赞同：0
> 
> 时间：2013-03-16T18:53:45.917
> 
> 标签：c#, asp.net

我有一个带有标签的 DataList，它显示了产品的一些颜色。我希望单击这些颜色并打印颜色名称。这是我使用 DataList 显示颜色的方式。当用户单击标签时，颜色的名称应显示（即红色、黑色），并针对该产品进入数据库。请指导我如何打印颜色的名称并将其设置为 DataList 中的可点击标签。提前致谢

```
<asp:DataList runat="server" ID="dtlcolor" DataSourceID="SqlDataSource1" 
    RepeatColumns="3" RepeatDirection="Horizontal">
 <ItemTemplate>
 <asp:HiddenField runat="server" ID="lblcolorID" Value='<%# Eval("ID") %>' />
    <asp:Label runat="server" ID="lblcolor" Width="25px" Height="25px" BackColor='<%# System.Drawing.ColorTranslator.FromHtml(Eval("Color").ToString())%>'></asp:Label>
 </ItemTemplate>
 </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:47:11.367

使标签可点击的简单方法是使用 LinkBut​​tons。它们看起来几乎相同（如果您愿意，可以使用 css）并且它们提供 OnClick 事件。您也可以改用 javaScript 代码并添加 onclick 事件。

无论如何，可以设置为 OnClick 事件的以下代码将从您的 linkBut​​ton 获取颜色并显示在新的 ColourLblID 标签中。

```
protected void ShowColour(object sender, EventArgs e)
{
    LinkButton colourButton = (LinkButton)sender;
    ColourLblID.Text = colourButton.BackColor.Name;
} 
```

# android - RecognitionListener 出现 ERROR_RECOGNIZER_BUSY 错误后如何重新开始监听

> ID：15453291
> 
> 赞同：6
> 
> 时间：2013-03-16T18:53:53.677
> 
> 标签：android, speech-recognition

我正在改进一个使用 RecognitionListener 类来监听用户声音的 Android 应用程序，在这里我得到以下结果：

1-) 如果用户单击麦克风图标并说一切都很好 2-) 如果用户单击麦克风图标并再次单击麦克风图标或什么也没说，我得到**onerror** 并且错误类型是：ERROR_RECOGNIZER_BUSY

```
 @Override
 public void onError(int error) {
 if ((error == SpeechRecognizer.ERROR_NO_MATCH)
  || (error == SpeechRecognizer.ERROR_SPEECH_TIMEOUT)){

  }  
  else if(ERROR_RECOGNIZER_BUSY){
  }

} 
```

这是我开始收听的代码：

```
 public void recognizeSpeechDirectly()
     {

        recognizer = SpeechRecognizer.createSpeechRecognizer(this.context);
        recognizer.setRecognitionListener(this);
        recognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, "org.twodee.andytest");
        recognizerIntent.putExtra(RecognizerIntent.EXTRA_PARTIAL_RESULTS, true);
        recognizer.startListening(recognizerIntent);

     } 
```

我想在出现 ERROR_RECOGNIZER_BUSY 时重新开始收听，

另一个人在 stackoverflow 上告诉过这个错误，但我不清楚，也无法实现。

[如何处理 ERROR_RECOGNIZER_BUSY](https://stackoverflow.com/questions/5810942/how-to-handle-error-recognizer-busy)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:59:29.093

您有**ERROR_RECOGNIZER_BUSY**因为当用户单击按钮并再次单击时您调用**startListening两次。**更改您的代码如下：

```
// class member
private boolean mIsListening;  
@Override
protected void onCreate(Bundle savedInstanceState)
{
    .........
    recognizer = SpeechRecognizer.createSpeechRecognizer(this.context);
    recognizer.setRecognitionListener(this);
    recognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, "org.twodee.andytest");
    recognizerIntent.putExtra(RecognizerIntent.EXTRA_PARTIAL_RESULTS, true);
} 
```

当点击图标时

```
if (!mIslistening)
{
    mIsListening = true;        
    recognizer.startListening(recognizerIntent);
}  

@Override
public void onError(int error) {
 if ((error == SpeechRecognizer.ERROR_NO_MATCH)
  || (error == SpeechRecognizer.ERROR_SPEECH_TIMEOUT)){

  }  
  else if(ERROR_RECOGNIZER_BUSY){

  }
  recognizer.startListening(recognizerIntent);
}  

@Override
    public void onPartialResults(Bundle partialResults)
    {
        mIsListening = false;
         ..........
    }  

@Override
    public void onResults(Bundle results)
    {
        mIsListening = false;
          ..........
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T07:00:17.763

开始你的识别：recognizeSpeechDirectly();

```
public void stopRecognition(){
      recognizer.destroy();
      recognizer = null;

}

public void onError(int error) {
      stopRecognition();
}

public void onResults(Bundle results){
      //Do something
      stopRecognition();
} 
```

它可以修复**“未连接到识别服务”**和 **“ERROR_RECOGNIZER_BUSY”**错误

# c# - LINQ to XML 查询中的基本过滤

> ID：15453293
> 
> 赞同：0
> 
> 时间：2013-03-16T18:53:57.560
> 
> 标签：c#, xml, linq

我是 XDocument 和 LINQ 的新手。这是我正在尝试做的事情：

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <chapters total-chapters="3">
    <Chapter chapter-no="1">
      <chapter-summary>this is chapter 1</chapter-summary>
    </Chapter>
    <Chapter chapter-no="2">
      <chapter-summary>this is chapter 2</chapter-summary>
    </Chapter>
    <Chapter chapter-no="3">
      <chapter-summary>this is chapter 3</chapter-summary>
    </Chapter>
    <Chapter chapter-no="4">
      <chapter-summary>this is chapter 4</chapter-summary>
    </Chapter>
</chapters>
</root> 
```

现在我需要阅读具有特定章节编号的所有记录。我正在编写我的 LINQ 查询：

```
IEnumerable<XElement> elem_list = 
    from e in xdoc.Elements("Chapter") 
    where (string) e.Attribute("chapter-no") == "1" 
    select e;

foreach (XElement e in elem_list)
{
    Console.WriteLine(e);
} 
```

但是 elem_list 没有被填充，也没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:01:21.150

`.Elements("Chapter")`仅在当前元素的直接子元素中搜索（根为`xdoc`）。

您可以使用`.Descendants("Chapter")`：

```
IEnumerable<XElement> elem_list = from e in xdoc.Descendants("Chapter")
                                  where (string) e.Attribute("chapter-no") == "1"
                                  select e; 
```

或指定完整的项目路径：

```
IEnumerable<XElement> elem_list = from e in xdoc.Root.Element("chapters").Elements("Chapter")
                                  where (string) e.Attribute("chapter-no") == "1"
                                  select e; 
```

另一种方法 - 使用`XPath`选择器：

```
xdoc.XPathSelectElements("root/chapters/Chapter[@chapter-no=1]"); 
```

`using System.Xml.XPath;`是使最后一个样本工作所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:08:29.930

您可以执行以下操作：

```
IEnumerable<XElement> elem_list = 
   xdoc.Descendants("Chapter")
   .Where (c => c.Attribute("chapter-no").Value.Equals("1")); 
```

# twitter-bootstrap - HTML5 样板和 Twitter 引导程序

> ID：15453299
> 
> 赞同：96
> 
> 时间：2013-03-16T18:54:18.707
> 
> 标签：twitter-bootstrap, html5boilerplate

[我已阅读 Stack 上有关 Twitter Bootstrap](https://getbootstrap.com/)和[HTML5 Boilerplate](https://html5boilerplate.com/)的各种问题。

我确实知道以下内容：

*   Bootstrap 和 H5BP 不是等效的，用于不同的目的
*   我知道 Bootstrap 是做什么用的，我每天都在使用它——它是一个前端框架，CSS 和 JS 即用型。只需将正确的类应用于您的选择器/元素，Bootstrap 就会为您完成一切。他们的网站上有大量的支持文档，您可以在其中看到他们在框架内提供的内容以及如何实现它......
*   [您可以使用initializr](http://www.initializr.com/)结合两者的力量
*   H5BP 是一个模板……嗯，就是这样……

但**我还不知道**的是：

*   H5BP到底是干什么用的？当访问他们的网站时，他们只给你源文件，就是这样（哦，是的，还有一个视频）。**使用它有什么好处，例如为什么要与 Bootstrap 一起使用它？**

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-16T19:13:14.943

你说得对，它是一个模板。它是一个模板，汇集了开发 HTML5 网站的一组最佳实践。您不必使用它，但如果您使用它，您可以放心，您建立在一个由顶级开发人员多年来开发和磨练的坚实基础之上。用该项目的主要开发者之一 Paul Irish 的话来说：

> “它本质上是一个很好的 html 和 css 起始模板以及一个可以工作的文件夹结构。但是融入其中的是来自前端开发专业人士多年的最佳实践。”</p>

我建议下载样板文件的完整注释版本并通读代码，让自己了解其中的想法以及它处理的案例。（另请参阅[这篇文章](http://www.1stwebdesigner.com/design/snippets-html5-boilerplate/)，其中突出显示了您应该在您的网站上使用的样板代码片段）。这些应该可以帮助您决定是否要将其用作项目的起点。

HTML5bp [initializr](http://www.initializr.com/)甚至包括一个引导选项，所以它真的再简单不过了！

# jquery - 调用 ajax 调用后的 Ruby on Rails 咖啡脚本

> ID：15453300
> 
> 赞同：0
> 
> 时间：2013-03-16T18:54:26.993
> 
> 标签：jquery, coffeescript

我有一个屏幕，最终用户将单击一个按钮，该按钮激活一个调用 ajax 的对话框屏幕。

我遇到的问题是 art.js.coffee 有以下代码

```
$(".singleevent").click ->
  $("#decide").val $(this).attr("dataid") 
```

但这不适用于加载 ajax 页面后的代码，这可能是 10 分钟后，有没有办法让我将 addlistener 添加到目前不存在的元素或重新加载仅限咖啡脚本。

谢谢你，ajax，对话框中是一个加载屏幕，但只加载有问题的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:27:59.343

您需要使用`on()`：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

这将允许您在页面上尚不存在的元素上定义事件。

# windows-8 - 在 Windows 8 App 中将类对象作为参数传递并在点击事件时接收它们

> ID：15453307
> 
> 赞同：0
> 
> 时间：2013-03-16T18:54:59.437
> 
> 标签：windows-8, c++-cx

作为参数传递的对象只收到一个导航事件。我想在点击事件中接收它们，我应该使用什么来代替参数？

```
void App1::MainPage::btuN_Click(Platform::Object^ sender,     Windows::UI::Xaml::RoutedEventArgs^ e)
{
Variables^ data = (Variables^)e->OriginalSource;
if (data->sNotf!=nullptr)
    Frame->Navigate(TypeName(BlankPage3::typeid), data);
} 
```

我使用了 OriginalSource，但它没有用。有人会帮助我吗？感谢进阶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:09:16.030

[`OriginalSource`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.routedeventargs.originalsource.aspx)属性包含对引发事件的对象的引用。它与导航参数无关。

我不确定您想在按钮单击事件中访问哪些参数。在导航事件中传递给您页面的那些？在这种情况下，您应该处理所述导航事件，在那里检索参数并将它们存储到页面的私有字段中。在点击事件中，您可以从私有字段中读取它们并将它们转发。

[在相关说明中：不鼓励](http://msdn.microsoft.com/en-us/library/windows/apps/hh702394.aspx)将非基本类型作为导航参数传递。如果您需要这样做，最好只传递对象 ID 并从公共存储库中读取页面内的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:02:11.520

当您导航到您的页面时，如果您的导航事件中的参数很重要，您应该将它们存储在您的页面对象中，以便以后可以访问它。

```
//MainPage needs to have a private Variables^ named Info
void MainPage::OnNavigatedTo(NavigationEventArgs^ e)
{
  if(e->Parameter)
    this->Info = dynamic_cast<Variables^>(e->Parameter);
} 
```

然后从您的点击处理程序中访问该变量：

```
void MainPage::btuN_Click(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
  if(this->Info)
    if (this->Info->sNotf!=nullptr)
      Frame->Navigate(TypeName(BlankPage3::typeid), Info);
} 
```

# c# - 克隆一个包含许多对象和列表的对象 C#

> ID：15453308
> 
> 赞同：2
> 
> 时间：2013-03-16T18:55:16.750
> 
> 标签：c#, reference, clone, circular-reference

您好 :) 克隆包含**winForm**中其他对象和列表的对象时遇到问题。我想*克隆*类型 *结构* **的对象首先在下面提供类** 我尝试过浅克隆

```
public Structure Clone()
{
    return this.MemberwiseClone() as Structure;
} 
```

说它没用，所以我搜索了[https://stackoverflow.com/](https://stackoverflow.com/)并进行了深度克隆

[深度克隆对象](https://stackoverflow.com/questions/78536/deep-cloning-objects-in-c-sharp) 以及 [如何在 .NET（特别是 C#）中对对象进行深度复制？](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)

```
public static T DeepClone<T>(T obj)
{
 using (var ms = new MemoryStream())
 {
   var formatter = new BinaryFormatter();
   formatter.Serialize(ms, obj);
   ms.Position = 0;

   return (T) formatter.Deserialize(ms);
 }
} 
```

我遇到的问题是我正在获取对象的备份副本

```
var backup=DeepClone<Structure>(this.sched); //sched is Structure Object 
```

然后更改`this.sched`备份更改:(

## 我的课程结构是：

```
[Serializable]
public class Sub
{
    string name;

    int studentsNumber;

    int unassaignedStudent;

    public Sub(string name, int number)
    {
        this.name = name;
        this.studentsNumber = number;
        this.unassaignedStudent = number;
    }

public Subject()
        {
            this.name = "";
            this.studentsNumber = 0;
            this.unassaignedStudent = 0;
        }

    public bool Assigne(int count)
    {
        //stuff
    }

    public Sub Clone()
    {
        return this.MemberwiseClone() as Sub;
    }
} 
```

* * *

```
[Serializable]
class Room
{

    string name;
    int studentsNumber;
    int full;
    private int freeSeats;
    List<Sub> subjects;

    /// <summary>
    /// the list of subjects
    /// </summary>
    internal List<Sub> Subjects
    {
        get { return subjects; }
        set { subjects = value; }
    }

    Dictionary<Subject, int> variations;

    public Room(string name, int number)
    {
        this.name = name;
        this.studentsNumber = number;
        this.full = 0;
        this.subjects = new List<Subject>();
        this.variations = new Dictionary<Subject, int>();
        this.freeSeats = number;
    }

    public Room(int number)
    {
        this.studentsNumber = number;
        this.full = 0;
        this.subjects = new List<Subject>();
        this.variations = new Dictionary<Subject, int>();
        this.freeSeats = number;
    }

     public Room()
    {
        this.name = "R" + count.ToString();
        count++;
        this.studentsNumber = 0;
        this.full = 0;
        this.subjects = new List<Sub>();
        this.variation= new Dictionary<Sub, int>();
        this.freeSeats = 0;
    }

    public bool addSubject(Sub sbj)
    {
         //also stuff
    }

    public bool addPartialSubject(Sub sbj)
    {
           //stuff
           // return false;
    }

    public Room Clone()
    {
        return this.MemberwiseClone() as Room;
    }

} 
```

* * *

```
[Serializable]
class Period
{
    List<Room> rooms;

    int conflicts;

    List<Sub> subjects;
    internal List<Sub> Subjects
    {
        get { return subjects; }
        set { subjects = value; }
    }

    /// <summary>
    /// Create an instance of class Period
    /// </summary>
    /// <param name="rooms">the rooms in this Period</param>
    public Period(List<Room> rooms)
    {
        this.conflicts = 0;
        this.rooms = rooms;
        subjects = new List<Subject>();
        fillSubjects(ref rooms, ref subjects);
    }
     public Period()
    {
        this.conflicts = 0;
        this.rooms = null;
        subjects = new List<Subt>();
        freeSeats = 0;
    }

    /// <summary>
    /// Fill the subjects in the rooms to the list of subjects
    /// </summary>
    /// <param name="rooms">referance to the list of the rooms</param>
    /// <param name="subjects">referance to the list of the subjects</param>
    private void fillSubjects(ref List<Room> rooms, ref List<Sub> subjects)
    {
        foreach (var room in rooms)
        {
            foreach (var subject in room.Subjects)
            {
                if (!subjects.Exists(s => s.Name == subject.Name))
                    subjects.Add(subject);
            }
        }
    }

    /// <summary>
    /// Adds the given subject to the period if there is a place in any room
    /// </summary>
    /// <param name="s">the subject to add</param>
    /// <returns>true if there is space for this subject and added, otherwise false</returns>
    public bool AddSubject(Sub s)
    {
        foreach (var room in rooms)
        {
            if (room.addSubject(s))
            {
                //stuff
            }
            else
                if (room.addPartialSubject(s))
                {
                    //stuff
                }
        }
        return false;
    }

    private int CalculateConflictions(Sub s)
    {
        //also a lot of stuff 
    }
} 
```

* * *

```
[Serializable]
class Structure:IDisposable
{
    int days;

    /// <summary>
    /// the number of days in the Schedual
    /// </summary>
    public int Days
    {
        get { return days; }
        set { days = value; }
    }

    int periods;

    Period[,] schedualArray;

    List<Room> rooms;

    internal List<Room> Rooms
    {
        get { return rooms; }
        set { rooms = value; }
    }

    /// <summary>
    /// Creates an instance of the Structure object
    /// </summary>
    /// <param name="rooms">a list of the rooms in the Schedual</param>
    public Structure(int days, int periods,List<Room> rooms)
    {
        this.days = days;
        this.periods = periods;
        this.rooms=rooms;
        this.schedualArray = new Period[days, periods];
        this.subjectCount = 0;
        for (int i = 0; i < days; i++)
        {
            for (int j = 0; j < periods; j++)
            {
                schedualArray[i, j] = new Period(CloneList(ref rooms)); //here i cloned the list to be in the safe side and it didn't work also
            }
        }
    }

    public Structure()
    {
        this.days = 0;
        this.totalEval = Int32.MaxValue;
        this.periods = 0;
        this.rooms = null;
        this.subjectCount = 0;
        this.schedualArray = null;
    }

    internal bool AddSubject(Sub subject, int day, int period)
    {
        //add the subject into inner lists (room)
    }

    public void PrintStruct()
    {
        for (int i = 0; i < days; i++)
        {
            for (int j = 0; j < periods; j++)
            {
                foreach (var subject in schedualArray[i, j].Subjects)
                {
                    Console.Write("\t\t");
                }
                Console.Write("\t\t");
            }
            Console.WriteLine();
        }
    }

    public Structure Clone()
    {
        return this.MemberwiseClone() as Structure;
    }

    public List<Room> CloneList(ref List<Room> rooms)
    {
        var lst = new List<Room>();
        foreach (var room in rooms)
        {
            lst.Add(DeepClone<Room>(room));
        }
        return lst;
    }

    internal void RemoveSubject(Sub subject)
    {
        //..................
    }

    #region IDisposable Members

    public void Dispose()
    {

        GC.Collect(g, GCCollectionMode.Forced);
    }

    #endregion
} 
```

***我现在真的不知道克隆过程的细节是什么，但我的要求是克隆整个对象，其中包含对象结构和层次结构中的连续对象以及列表指向的完整项目，不仅参考*** *请可以任何人都请帮助我，我真的迷路了:(，提前感谢所有有兴趣帮助我的人:)* **Yaser**

**使用方法@WiiMaxx 时**编辑****

 **```
Structure backup=XamlClone(this.sched);

private Structure XamlClone(Structure s)
{
   //First Step
            // create a XAML string
            string stCopie = XamlWriter.Save(s);

            //Secound Step
            // convert him back to an Object of YourTyp
            return XamlReader.Load(XmlReader.Create(new StringReader(stCopie))) as Structure;
} 
```

但内部`period[,]`被克隆为`null` **你能帮我*吗@WiiMaxx***

`**编辑 2.0** 我还检查了这篇关于 3 种方法的深度克隆的文章，我认为我的代码中有循环引用，这就是为什么这对我不起作用 [http://blog.nuclex-games.com/mono-dotnet/快速深度克隆/](http://blog.nuclex-games.com/mono-dotnet/fast-deep-cloning/) **结束编辑**`

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:07:20.927

好的，现在它应该真的可以工作了
（我也删除了我的旧解决方案，因为它完全不符合您的需求）

## 子文件

```
public class Sub: ICloneable
{
    struct datenStruct
    {
        internal int studentsNumber;
        internal int unassaignedStudent;
        internal string name;
    }

    private datenStruct USE;

    int studentsNumber;

    public string Name
    {
        get { return USE.name; }
        set { USE.name = value; }
    }

    private Sub(datenStruct struc)
    {
        this.USE = struc;
    }

    public Sub(string name, int number)
    {
        this.USE = new datenStruct();
        this.USE.name = name;
        this.USE.studentsNumber = number;
        this.USE.unassaignedStudent = number;
    }

    public bool Assigne(int count)
    {
        //stuff
        return true;
    }

    public object Clone()
    {
        var copie = new datenStruct();

        copie.name = USE.name;
        copie.unassaignedStudent = USE.unassaignedStudent;
        copie.studentsNumber = USE.studentsNumber;

        return new Sub(copie);
    }
} 
```

## 房间.cs

```
public class Room: ICloneable
{
    struct datenStruct
    {
        internal int studentsNumber;
        internal int full;
        internal string name;
        internal int freeSeats;
        internal List<Sub> subjects;
        internal Dictionary<Sub, int> variations;
    }

    private datenStruct USE;

    /// <summary>
    /// the list of subjects
    /// </summary>
    internal List<Sub> Subjects
    {
        get { return USE.subjects; }
        set { USE.subjects = value; }
    }

    public Room(string name, int number)
    {
        this.USE = new datenStruct();

        this.USE.name = name;
        this.USE.studentsNumber = number;
        this.USE.full = 0;
        this.USE.subjects = new List<Sub>();
        this.USE.variations = new Dictionary<Sub, int>();
        this.USE.freeSeats = number;
    }

    public Room(int number)
    {
        this.USE = new datenStruct();

        this.USE.studentsNumber = number;
        this.USE.full = 0;
        this.USE.subjects = new List<Sub>();
        this.USE.variations = new Dictionary<Sub, int>();
        this.USE.freeSeats = number;
    }

    private Room(datenStruct struc)
    {
        USE = struc;
    }

    public bool addSubject(Sub sbj)
    {
        //also stuff
        return false;
    }

    public bool addPartialSubject(Sub sbj)
    {
        //stuff
        return false;
    }

    public object Clone()
    {
        var copie = new datenStruct();

        copie.studentsNumber = USE.studentsNumber;
        copie.full = USE.full;
        copie.freeSeats = USE.freeSeats;
        var SubListCopie = new List<Sub>();

        foreach (Sub origSub in USE.subjects)
            SubListCopie.Add((Sub)origSub.Clone());

        copie.subjects = SubListCopie;

        var SubDictCopie = new Dictionary<Sub, int>();

        foreach (KeyValuePair<Sub, int> KvP in USE.variations)
            SubDictCopie.Add((Sub)KvP.Key.Clone(),KvP.Value);

        copie.variations = SubDictCopie;

        return new Room(copie);
    }
} 
```

## 周期.cs

```
public class Period: ICloneable
{
    struct datenStruct
    {
        internal List<Room> rooms;
        internal List<Sub> subjects;
        internal string name;
        internal int conflicts;
    }

    private datenStruct USE;

    internal List<Sub> Subjects
    {
        get { return USE.subjects; }
        set { USE.subjects = value; }
    }

    /// <summary>
    /// Create an instance of class Period
    /// </summary>
    /// <param name="rooms">the rooms in this Period</param>
    public Period(List<Room> rooms)
    {
        this.USE.conflicts = 0;
        this.USE.rooms = rooms;
        this.USE.subjects = new List<Sub>();
        fillSubjects(ref USE.rooms, ref USE.subjects);
    }

    private Period(datenStruct struc)
    {
        USE = struc;
    }

    /// <summary>
    /// Fill the subjects in the rooms to the list of subjects
    /// </summary>
    /// <param name="rooms">referance to the list of the rooms</param>
    /// <param name="subjects">referance to the list of the subjects</param>
    private void fillSubjects(ref List<Room> rooms, ref List<Sub> subjects)
    {
        foreach (var room in rooms)
        {
            foreach (var subject in room.Subjects)
            {
                if (!subjects.Exists(s => s.Name == subject.Name))
                    subjects.Add(subject);
            }
        }
    }

    /// <summary>
    /// Adds the given subject to the period if there is a place in any room
    /// </summary>
    /// <param name="s">the subject to add</param>
    /// <returns>true if there is space for this subject and added, otherwise false</returns>
    public bool AddSubject(Sub s)
    {
        foreach (var room in USE.rooms)
        {
            if (room.addSubject(s))
            {
                //stuff
            }
            else
                if (room.addPartialSubject(s))
                {
                    //stuff
                }
        }
        return false;
    }

    private int CalculateConflictions(Sub s)
    {
        //also a lot of stuff 
        return 1;
    }

    public object Clone()
    {
        var copie = new datenStruct();

        copie.name = USE.name;
        copie.conflicts = USE.conflicts;

        var RoomListCopie = new List<Room>();

        foreach (Room origSub in USE.rooms)
            RoomListCopie.Add((Room)origSub.Clone());

        copie.rooms = RoomListCopie;

        var SubListCopie = new List<Sub>();

        foreach (Sub origSub in USE.subjects)
            SubListCopie.Add((Sub)origSub.Clone());

        copie.subjects = SubListCopie;

        return new Period(copie);
    }
} 
```

## 结构体.cs

```
public class Structure : IDisposable,ICloneable
{
    struct datenStruct
    {
        internal int days;
        internal int subjectCount;
        internal int periods;
        internal Period[,] schedualArray;
        internal List<Room> rooms;
    }

    private datenStruct USE;

    /// <summary>
    /// the number of days in the Schedual
    /// </summary>
    public int Days
    {
        get { return USE.days; }
        set { USE.days = value; }
    }

    internal List<Room> Rooms
    {
        get { return USE.rooms; }
        set { USE.rooms = value; }
    }

    /// <summary>
    /// Creates an instance of the Structure object
    /// </summary>
    /// <param name="rooms">a list of the rooms in the Schedual</param>
    public Structure(int days, int periods, List<Room> rooms)
    {
        this.USE.days = days;
        this.USE.periods = periods;
        this.USE.rooms = rooms;
        this.USE.schedualArray = new Period[days, periods];
        this.USE.subjectCount = 0;
        for (int i = 0; i < days; i++)
        {
            for (int j = 0; j < periods; j++)
            {
                USE.schedualArray[i, j] = new Period(CloneList(ref rooms)); //here i cloned the list to be in the safe side and it didn't work also
            }
        }
    }

    private Structure(datenStruct struc) 
    {
        this.USE = struc;
    }

    internal bool AddSubject(Sub subject, int day, int period)
    {
        //add the subject into inner lists (room)
        return true;
    }

    public void PrintStruct()
    {
        for (int i = 0; i < USE.days; i++)
        {
            for (int j = 0; j < USE.periods; j++)
            {
                foreach (var subject in USE.schedualArray[i, j].Subjects)
                {
                    Console.Write("\t\t");
                }
                Console.Write("\t\t");
            }
            Console.WriteLine();
        }
    }

    public List<Room> CloneList(ref List<Room> rooms)
    {
        var lst = new List<Room>();
        foreach (var room in rooms)
        {
            lst.Add((Room)room.Clone());
        }
        return lst;
    }

    internal void RemoveSubject(Sub subject)
    {
        //..................
    }

    #region IDisposable Members

    public void Dispose()
    {
       // GC.Collect(g, GCCollectionMode.Forced);
    }

    #endregion

    public object Clone()
    {
        var copie =new datenStruct();

        copie.days = USE.days;
        copie.subjectCount = USE.subjectCount;
        copie.periods = USE.periods;

        var RoomListCopie = new List<Room>();

        foreach (Room origSub in USE.rooms)
            RoomListCopie.Add((Room)origSub.Clone());

        copie.rooms = RoomListCopie;

        copie.schedualArray = new Period[copie.days, copie.periods];
        for (int i = 0; i < copie.days; i++)
        {
            for (int j = 0; j < copie.periods; j++)
            {
                copie.schedualArray[i, j] = new Period(CloneList(ref copie.rooms));
            }
        }

        return new Structure(copie);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:29:18.790

我写了这段代码，我认为它解决了我的问题，但如果您有任何其他答案，请告诉我。

```
private Structure SpecialClone(Structure s)
        {
            var rooms = Cloner.DeepClone<List<Room>>(s.Rooms);
            var perds = Cloner.DeepClone<Period[,]>(s.SchedualArray);
            var days = s.Days;
            var periods = s.Periods;
            return new Structure(days, periods, rooms, perds, s.SubjectCount);
        } 
```

我在结构构造中添加了一个重载来做到这一点：

```
public Structure(int days, int periods, List<Room> rooms, Period[,] _periods,int subjectCount)
        {
            this.days = days;
            this.periods = periods;
            this.rooms = rooms.DeepClone();
            this.subjectCount = subjectCount;
            this.schedualArray = _periods.Clone() as Period[,];
        } 
````**

# fonts - 根据字符位置为单元格中的字符设置不同的字体颜色

> ID：15453309
> 
> 赞同：0
> 
> 时间：2013-03-16T18:55:19.487
> 
> 标签：fonts, colors, macros

我正在尝试为范围内所有单元格内容的前 3 个、后 3 个和后 3 个字符设置三种不同的颜色。下面的代码将整个单元格内容更改为绿色，而不仅仅是前 3 个字符。

请指导我如何做到这一点。我对VB很陌生。

```
Sub LoopAndChangeColor()

  Dim i As Integer
  Dim targetRange As Range
  'Set targetRange = Range("A1:A10")

  'For Each cell In targetRange
  For i = 1 To 10
    Cells(i, 1).Characters(1, 3).Font.Color = vbGreen
    Cells(i, 1).Characters(4, 3).Font.Color = vbBlue
    Cells(i, 1).Characters(7, 3).Font.Color = vbRed
  Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T16:56:28.850

此信息可能为时已晚，但执行您需要的宏已准备好使用。访问：[http](http://excelfindandformat.herobo.com) ://excelfindandformat.herobo.com和相关的 34 个 youtube 视频。

# php - 循环 mysql 查询的 WHERE 部分

> ID：15453311
> 
> 赞同：0
> 
> 时间：2013-03-16T18:55:25.303
> 
> 标签：php, mysql, loops

我正在尝试确定与类别相关的主题组合是否是唯一的。这是在将主题添加到类别时完成的。使用此查询检查唯一性：

```
$sql_unique = "SELECT Categories_CategoryID, list
FROM (

SELECT Categories_CategoryID, GROUP_CONCAT( Topics_TopicID ) AS list
FROM (

SELECT *
FROM Topics_crosstable
ORDER BY Topics_TopicID
)H
GROUP BY Categories_CategoryID
)A
WHERE list = (
SELECT GROUP_concat( TopicID )
FROM Topics
WHERE Name = 'nr1'
OR Name = 'nr2'
ORDER BY Categories_CategoryID ASC )";

$result = mysql_query($sql_unique);
echo mysql_num_rows($result);

 if($result > 1)
 {
    echo' HELP! It is not unique';
 }
 else
 {
 echo ' getshere';
 } 
```

这工作正常。然而，问题是，添加的主题数量是不同的。那么有没有办法在查询的 where 部分中包含一个 for 循环？

类似于 for(添加的主题数；nr++) {OR Name =', $inserted_topicName '}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:11:40.653

使用“WHERE ... IN”：

```
WHERE Name IN ('nr1','nr2',...) 
```

和

```
string implode ( string $glue , array $pieces ); 
```

使用如下：

```
$options = array(); //here's your choices

$sql_unique = "SELECT Categories_CategoryID, list
               FROM (
             SELECT Categories_CategoryID, GROUP_CONCAT( Topics_TopicID ) AS list
             FROM (
                SELECT *
                FROM Topics_crosstable
                ORDER BY Topics_TopicID
             )H
             GROUP BY Categories_CategoryID
                )A
                WHERE list = (
             SELECT GROUP_concat( TopicID )
             FROM Topics
             WHERE Name IN (";
$sql_unique .= implode(",",$options);
$sql_unique .= ") ORDER BY Categories_CategoryID ASC )"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:37:53.600

表**类别**

*   猫号

表**主题**

*   顶部ID
*   类别

类别：主题（1：n）

**问题：类别`$x`是否有独特的主题集？**

首先获取类别的所有主题的总和`$x`

```
SELECT GROUP_CONCAT(topID ORDER BY topID) topiclist
FROM Topics
WHERE category='$x' 
```

您可能需要`topiclist`分解并向该数组添加一些新值，我假设上述查询的结果被提取到关联数组中`$r`

```
$list=explode(',',$r['topiclist']);
$list[]=$newtopicID1;
$list[]=$newtopicID2;
// etc ... or use $list += $newTopicsArray; which will ADD those two arrays
sort($list); //make it sorted again
$list=implode(',',$list); 
```

然后再次查询数据库，试图找到这样的组合，不包括我正在查询的类别：

```
SELECT GROUP_CONCAT(topID ORDER BY topID) topiclist
FROM Topics
WHERE category!='$x'
GROUP BY category
HAVING topiclist='$list' 
```

然后检查是否有一些记录返回。如果是，那么您找到了具有相同主题的另一个类别，如果不是，那么主题组合是唯一的

# c# - 分析型 TSQL

> ID：15453313
> 
> 赞同：0
> 
> 时间：2013-03-16T18:55:30.233
> 
> 标签：c#, sql-server, tsql, analytics, data-analysis

我需要生成一些 SQL 来向我显示某些事务中的趋势（向上或向下刻度）。

考虑这个带有 PlayerId 和 Score 的表

```
PlayerId, Score, Date
1,10,3/13
1,11,3/14
1,12,3/15 
```

如果我从 3/15 中提取数据，我的得分为 12，与历史数据相比呈上升趋势。

大约 10 年前，我在 Oracle 8i 中使用一些分析函数（如 rank）做了类似的事情，但那是 10 年前的事了......

结果看起来类似于

```
PlayerId, Score, Date, Trend
1,12,3/15,UP 
```

我怎样才能用 sql azure 做类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:06:58.850

这个 SQL：

```
with data as (
  select * from ( values
  (1,11,cast('2013/03/12' as smalldatetime)),
  (1,15,cast('2013/03/13' as smalldatetime)),
  (1,11,cast('2013/03/14' as smalldatetime)),
  (1,12,cast('2013/03/15' as smalldatetime))
  ) data(PlayerId,Score,[Date])
) 
select
  this.*,
  Prev = isnull(prev.Score,0),
  tick = case when this.Score > isnull(prev.Score,0) then 'Up' else 'Down' end
from data this
left join data prev 
    on prev.PlayerId = this.PlayerId
   and prev.[Date]     = this.[Date] - 1 
```

返回此输出：

```
PlayerId    Score       Date                    Prev        tick
----------- ----------- ----------------------- ----------- ----
1           11          2013-03-12 00:00:00     0           Up
1           15          2013-03-13 00:00:00     11          Up
1           11          2013-03-14 00:00:00     15          Down
1           12          2013-03-15 00:00:00     11          Up 
```

# c# - Web api 在错误路径中搜索库文件

> ID：15453315
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:55:42.717
> 
> 标签：c#, asp.net-web-api

我正在使用外部库[NTextCat](http://ntextcat.codeplex.com/ "NTextCat")进行文本语言识别，它加载`.txt`包含语言定义的外部文件。文件在运行时加载。我已经在几个项目中成功使用了这个库：ASP.NET、ASP.NET MVC 和 WinForms。

这是构造函数在加载哪些文件时的外观，我使用的是空构造函数：

```
 var languageIdentifier = new LanguageIdentifier(); // Empty constructor uses default \LM fodler
 var languageIdentifier = new LanguageIdentifier("path to files"); // Overload which takes different path to files 
```

我已经将所述文件夹复制到解决方案中的每个项目，包括每个 bin 文件夹，但没有成功。

我得到如下异常：

```
Could not find a part of the path 'C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\LM\'.A first chance exception of type 'System.AggregateException' occurred in mscorlib.dll 
```

为什么它一直在寻找那条路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:57:36.177

我忘了你必须在网络上映射路径，所以：

```
 var path = Path.Combine(HttpRuntime.AppDomainAppPath, "LM");
  var languageIdentifier = new LanguageIdentifier(path); 
```

# c++ - Opensteer项目文件转换和编译

> ID：15453319
> 
> 赞同：0
> 
> 时间：2013-03-16T18:55:48.850
> 
> 标签：c++, visual-c++

Opensteer 是一个旨在为实时游戏提供代理行为的库。

我试图编译它，但我有一个错误，我不知道它是什么意思。当我单击它时，它会打开一个 MSVC 文件。

```
Error   3   error MSB3073: The command "mkdir "C:\opensteer\win32\\lib"
copy "C:\opensteer\win32\Debug\opensteer.lib" "C:\opensteer\win32\\lib"

:VCEnd" exited with code 1\. C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 113 
```

我不知道为什么两者之间缺少文件夹名称`\\`

它只是这里提供的源包[http://sourceforge.net/projects/opensteer/files/opensteer/OpenSteer%200.8.2/](http://sourceforge.net/projects/opensteer/files/opensteer/OpenSteer%200.8.2/)

# excel - 通过 VBA 数据透视表

> ID：15453320
> 
> 赞同：0
> 
> 时间：2013-03-16T18:56:20.707
> 
> 标签：excel, excel-2010, vba

我试图能够使用这个宏每天在同一个工作表名称上创建这个数据透视表。唯一会改变的是数据源行，因为我永远不知道它将是多少行。我试图将整个字符串设置为 CurSourceData 变量，然后只使用它，但它失败并说无效的 arg。

任何想法都会有所帮助。

```
Sheets("Cases 23+ Day (Due Today)").Select
 Range("A1").Select
 Selection.End(xlDown).Select
     Selection.End(xlDown).Select
CurRow = ActiveCell.Row
CurSourceData = "Cases 23+ Day (Due today)!R1C2:R" & CurRow & "C20"
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    CurSourceData, Version:=xlPivotTableVersion14). _
    CreatePivotTable TableDestination:="Master Summary!R3C7", TableName:= _
    "PivotTable3", DefaultVersion:=xlPivotTableVersion14
Sheets("Master Summary").Select
Cells(3, 7).Select
ActiveSheet.PivotTables("PivotTable3").AddDataField ActiveSheet.PivotTables( _
    "PivotTable3").PivotFields("Status"), "Count of Status", xlCount
With ActiveSheet.PivotTables("PivotTable3").PivotFields("Status")
    .Orientation = xlRowField
    .Position = 1
End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:36:11.773

SourceData 参数`PivotCaches.Create`是 Range 或 Connection。我认为您的工作表名称中的空格也存在问题，答案是使用单引号。尝试 ：

`Set CurSourceData = Worksheets("Cases 23+ Day (Due today)").Range("B1", "T" & CurRow)`

（我讨厌 R1C1 表示法，在这里不知道如何使用它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T15:48:42.410

假设您的数据集从单元格 A1 开始，这对我有用：

```
Dim MyRange As Range

Dim lrow As Long

Dim lcol As Long

lrow = ActiveSheet.Cells(Application.Rows.Count, 1).End(xlUp).Row

lcol = ActiveSheet.Cells(1, Application.Columns.Count).End(xlToLeft).Column

Set MyRange = ActiveSheet.Cells(1, 1).Resize(lrow, lcol) 
```

祝你好运！

# jquery - jQuery Firefly 中的边界

> ID：15453327
> 
> 赞同：0
> 
> 时间：2013-03-16T18:56:50.670
> 
> 标签：jquery, jquery-plugins

您好，我正在使用这个不错的 jQuery 插件：[https ://github.com/Matt-Stevens/jQuery-FireFly](https://github.com/Matt-Stevens/jQuery-FireFly)

我想知道，如果您仔细观察火花的动画，它们会变慢并停在特定点。这与边界有关吗？如何停用此“stop'n'go”？

这是代码：

```
/*
* FireFly v1.1.1 - jQuery plugin
*
* An updated version of Dharmveer Motyar's firefly plugin.
* Creates an effect of fireflys flying around your page.
*
* @example $.firefly()
*
* // to stop and start
* $.firefly.stop()
* $.firefly.start()
*
* Copyright © 2011 Matt 'Dirty Monkey' Stevens, http://www.dirtymonkey.co.uk
* License: http://www.opensource.org/licenses/mit-license.php
*/
(function($){
    /*
* default settings
*/
    var defaults = {
        // base64 encoded to cut down requests,
        // doesn't work in IE <= 7.0 and I'm not bothered to be honest
        images: [ // spark one
                  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAA'+
                  'BGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAA'+
                  'D6SURBVHja7Nc7CsJAAEVRM/7ARqws3f+q3IBVrETC+AIpUthPBs6FB2nDYfIZaq07baMB'+
                  'BgzBgCEYMAQDhmDAEAwYgiEYMAQDhmDAEAwYggFDMGAIhmDAEAwYggFDMGAIBgzBgCEYgg'+
                  'FDMGAIBgzBgCEYf+9hdV1htOuQnbOSfbNPzyA9Y8wn4pI9smv2zF7Z1CtI6fwRVRaIe3by'+
                  'zmh7MuZH1C07ZmP2Xk4GjEYg+9XLe3IytoHS/2eh/wwYggFDMGAIBgzBgCEYMARDMGAIBg'+
                  'zBgCEYMAQDhmDAEAzBgCEYMAQDhmDAEAwYggFDMAQDhmDAEIwu+wkwAGUEM3yaFGKDAAAA'+
                  'AElFTkSuQmCC',
                  // spark two
                  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAA'+
                  'BGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAA'+
                  'FjSURBVHja7NrRasJAEEDRjuT/f3n6KrLZnTamZppzQSpthJLjZLNiZOaXrtHDKYAhGDAE'+
                  'A4ZgwBAMGIIBQzAEA4ZgwBAMGIIBQzBgCAYMwRAMGIIBQzBgCAYMwYAhGHdra/p/x+B3Ce'+
                  'OzAHt/Txh/AzFDyadj2oE8GkFEcTqiOEkm4wDEbyaj1YRsjSBiApQDlHYgW0OI1WVoBNEC'+
                  'pNvdVOysHa8n293UyQv3CGP1jneZOnE/UQHJyWsvjdLl45BY3FHF5Fj7jA9sAFsCdMfIwn'+
                  'MYJwPkYl+xd6y7qYMnPopT8bworxDsM96AUj3BOXi0unx12vTlZHqq0wHj4FRUPtLI4k8Y'+
                  'bwRZrQE5AYJxwqKexeNdpk5aJ+Ll+U/3IDBMxj3upnw75KIw/yZfYoMhGDAEA4ZgwBAMGI'+
                  'IBQzAEA4ZgwBAMGIIBQzBgCAYMwRAMGIIBQzBgCAYMwYAhGLfrW4ABAC0AVeQCiPR5AAAA'+
                  'AElFTkSuQmCC',
                  // spark three
                  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAA'+
                  'BGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAA'+
                  'JxSURBVHja7J3BkuMgDERHLv7/l3vvW5sdx4DUwq+PSYGFnoTElMOEpB/koQsXAAMBAxgI'+
                  'GMBAwAAGAgYwEDCAgYCBgAEMBAxgIGAAA81oNLI1JsYKGLUAPs0jYOQDaAfmehmIfz0vgO'+
                  'HlFAsg42WZcMcWvTEznEBY2HUBwse+0Wyh347V5LN0MowoHCd3IJc5iJVdVkzYcBSMKISw'+
                  'Yu44BUaYQFgRIK85gUdytNudwIeJg2PRnPGwm7pbqLcW9NEExGw3Ve7oDtvUThA7u7JWMN'+
                  'wceNeuqAQyTLNihdP0cOsq264u06xYkS0xATwq1nk1yoowDI5jzxmfHLeidsR/5n41jPgS'+
                  'xF1HR4I9rQ59YQRUCcV56XyXSVbsiFibiO9WM3b1963Aub7eubLYRpfs4F1bYKQ3BgEMVA'+
                  'aj+wm53P6VMJQ8brXK7e+yTal4PDWDmoGAcWNbkcFcR8HQ5J6uRc9bbdfx25ROcHAlDCWC'+
                  '0sPvbNc7iiI+bn6uXw5VMsjAY7cpfRnps5l0/K9dtSm9lRj52mhPqwKuBxH+symjUhUb/2'+
                  'XD7LtHUQC7LCscMkPJka0KJzvA0MJ5ZGTPNjncHfJb+/q3M2MTAFVDHUaOjglnzL6/JIfs'+
                  'crpV50nk72p7j6sZTxesZPg2dl3GC9dGWywDJLO1VZLjVs+VtpVl14xvCvUnh2TeH3L03S'+
                  'EzQNxrStsTuPsB7Jjf9HUHUmbXMFl4vBmCQ2a4OMLmT+2nnMCP2CYdLxmeaWNbNw/u12+v'+
                  'AsNd6IkRHZ2cfgKM9pHfpZtCwAAGAgYwEDCAgYABDAQMYCBgAAMBAwEDGOiT/ggwACwkj/'+
                  'K9LOCpAAAAAElFTkSuQmCC',
                  // spark four
                  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAA'+
                  'BGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAA'+
                  'DISURBVHja7NyxDYAwDEVBTIpQsgn770VDZVxQsEECuif9BXxSykRmLpqj1QlgCAYMwYAh'+
                  'GDAEA4ZgwBAMwYAhGDAEA4ZgwBAMGIIBQzAEA4ZgwBAMGIIBQzBgCAYMwRAMGIIBQzBgCA'+
                  'YMwXgXta3WYIyv147a/heM+PBPbO2BOGsXDHmmYAgGDMGAIRiCAUMwYAgGDMGAIRgwBAOG'+
                  'E8AQDBiCAUMwYAgGDMGAIRiCAUMwYAgGDMGAIRgwBAOGYAgGDMGYvVuAAQD5BwwNjgAKGw'+
                  'AAAABJRU5ErkJggg%3D%3D'
                ],
        total: 50, // anything over a few hundred is gonna crawl
        boundary: 100, // avoid the edge of the window
        fast: 5, // fastest spark (a lower number is faster)
        slow: 1, // slowest spark (a higher number is slower)
        limit: 3600, // stop after this many seconds (one hour)
    }

    // shortcuts
    var ff, ffs, x, y, old_x, old_y, start, timer_handle, delay_handle, sparks = []

    // init
    // initializes and starts everything
    $.firefly = function(settings){
        ff = $.firefly
        ffs = $.extend({}, defaults, settings)

        ff.calibrate() // get size of window
        ff.make() // load the spark images
        ff.start() // start moving them
        ff.check_time() // start timer
    }

    // create
    // creates every spark and inserts it into the DOM
    $.firefly.make = function(){
        for (i = 0; i < ffs.total; i++)
            sparks[i] = ff.create(ffs.images[ff.random(0,ffs.images.length-1)])
    }

    // start
    // records start time, watches window resize and begins movement
    $.firefly.start = function(){
        start = parseInt((new Date).getTime()/1000)
        $(window).bind('resize.firefly', function(){
            ff.delay(ff.resized, 250)
        })
        for (i = 0; i < sparks.length; i++) ff.move(sparks[i])
    }

    // reset
    // stop and remove all fireflies, then create and start them again
    $.firefly.reset = function(){
        for (i = 0; i < ffs.total; i++)
            sparks[i].remove()

        $.firefly()
    }

    // delay
    // utility function to prevent the resize event from being fired multiple times
    $.firefly.delay = function(callback, milliseconds){
        clearTimeout(delay_handle)
        delay_handle = setTimeout(callback, milliseconds);
    }

    // resized
    // event handler to deal with window resizing
    $.firefly.resized = function(e){
        ff.calibrate();
        (x < old_x || y < old_y) && ff.reset()
    }

    // stop
    // freezes a spark in its current position
    $.firefly.stop = function(){
        $(window).unbind('resize.firefly')
        for (i = 0; i < sparks.length; i++) $(sparks[i]).stop(true)
    }

    // remove
    // removes a spark from the DOM
    $.firefly.remove = function() {
        for (i = 0; i < ffs.total; i++) $('img[src="'+ffs.images[i]+'"]').remove()
    }

    // create
    // inserts a spark into the DOM at a random position
    $.firefly.create = function(i){
        var spark = $('<img>').attr({'src':i}).hide()
        $("body").append(spark)

        spark.css({'position': 'absolute',
                    'z-index': ff.random(0, 20),
                    'top': ff.random(ffs.boundary, y - ffs.boundary),
                    'left': ff.random(ffs.boundary, x - ffs.boundary)
                    })

        return spark.show()
    }

    // move
    // animate to a random position, within the boundaries
    $.firefly.move = function(image){
        image.animate({top: ff.random(ffs.boundary,y-ffs.boundary), // x coordinate
                       left: ff.random(ffs.boundary,x-ffs.boundary)}, // y coordinate
                       ff.random(ffs.slow,ffs.fast) * 1000, // speed
                       function(){ff.move(image)}) // callback
    }

    // check_time
    // check every second whether or not we have passed the time limit
    $.firefly.check_time = function(){
        if (parseInt((new Date).getTime()/1000) > (start+ffs.limit)) {
            ff.stop()
        } else {
            window.setTimeout('$.firefly.check_time()', 1000)
        }
    }

    // calibrate
    // get the dimensions of the window
    $.firefly.calibrate = function(){
        old_x = x
        old_y = y

        x = $(window).width()
        y = $(window).height()
    }

    // random
    // return a random number between a and b
    $.firefly.random = function(a,b){
        return Math.floor(Math.random()*(b-a+1)+a)
    }
})(jQuery) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:17:51.147

有在调整大小和放大时触发的事件侦听器。

只需注释掉重置行（134）：

```
$.firefly.resized = function(e){
    ff.calibrate();
    //(x < old_x || y < old_y) && ff.reset()
} 
```

# c++ - 编译函数模板时出现“预期的嵌套名称说明符”错误

> ID：15453332
> 
> 赞同：-1
> 
> 时间：2013-03-16T18:57:12.823
> 
> 标签：c++

```
template <size_t B>        
void part(typename vector<bitset<B> > &partions) 
```

我只想传入一个由 bitset 组成的向量，但希望这个函数适用于任何类型的 bitset。我不擅长使用模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:00:27.823

```
template <size_t B>        
void part(vector<bitset<B> > &partions) 
```

这应该工作

# vba - Visual basic根据值改变值

> ID：15453334
> 
> 赞同：0
> 
> 时间：2013-03-16T18:57:15.103
> 
> 标签：vba

基本上我有10个整数命名：

```
i1,i2,i3,i4,i5,i6,i7,i8,i9,i10 
```

现在我有一个计算，每当它返回一个介于 1-10 之间的值时，它必须将相应的整数增加 1。

我知道我可以用 case 或 10 ifs 来做到这一点，但是有没有办法生成变量名，我想改变什么。伪代码：

```
value = x // a value is being returned
(i+x)++;  // increase the according variable by one 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:04:20.080

简单地创建一个数组并根据返回的值在给定索引处增加数组中的值不是更容易吗？

例如：

```
Dim myArray(1 To 10) As Integer
value = x                          'a value is being returned
myArray(x) = myArray(x) + 1        'increment value in array 
```

# android - 数据库sqllite如何计算android中的总量？

> ID：15453337
> 
> 赞同：0
> 
> 时间：2013-03-16T18:57:16.820
> 
> 标签：android

我创建了一个表，例如产品名称产品价格产品数量产品 ID。我想传递 id 参数产品 ID 并获取所有价值产品价格。如何计算所有产品价格的总金额。给我一些查询。并且如果我必须更改产品数量意味着在文本视图中自动乘以产品价格金额。我使用了自定义列表视图，我插入了所有不知道这种情况的数据。

例如

屏幕界面

产品名称 Productprice Productquantity productid

膳食 345 编辑文本 3 3454

鸡蛋 32 4 2323

布里亚尼 223 2 2365

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:10:56.207

> 我想传递 id 参数产品 ID 并获取所有价值产品价格。如何计算所有产品价格的总额。

您需要使用[SUM()](http://www.sqlite.org/lang_aggfunc.html)函数来计算价格以及您需要的所有内容：

```
String query = "select SUM(price) from Product where product_id = ?";
Cursor c = db.rawQuery(query, new String[] {"someValue"});
double sum;
if (c.moveToFirst()) {
   sum = c.getDouble(0);
} 
```

> 如何计算所有产品的总价格。

```
String query = "select SUM(price) from Product";
Cursor c = db.rawQuery(query, null);
double total;
if (c.moveToFirst()) {
   total = c.getDouble(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:20:17.740

你必须修改你的 sum = c.getDouble(c.getColumnCount());

好运

# javascript - 如何让 CSS 控制我的 HTML 表格？

> ID：15453341
> 
> 赞同：1
> 
> 时间：2013-03-16T18:57:55.530
> 
> 标签：javascript, html, css, html-table, css-tables

我有一个类似于[这个](http://jsfiddle.net/ShoeMaker/P97Pa/)的表，看起来像：

```
<table class="DynaTable">
    <tr class="DynaTableHead">
        <th class="DynaTableHeadCell-1">col 1</th>
        <th class="DynaTableHeadCell-2">col 2</th>
        <th class="DynaTableHeadCell-3">col 3</th>
        <th class="DynaTableHeadCell-4">col 4</th>
        <th class="DynaTableHeadCell-5">col 5</th>
    </tr>
    <tr class="DynaTableRow">
        <td class="DynaTableRowCell-1">cell 1-1</td>
        <td class="DynaTableRowCell-2">cell 1-2</td>
        <td class="DynaTableRowCell-3">cell 1-3</td>
        <td class="DynaTableRowCell-4">cell 1-4</td>
        <td class="DynaTableRowCell-5">cell 1-5</td>
    </tr>
    <tr class="DynaTableRow">
        <td class="DynaTableRowCell-1">cell 2-1</td>
        <td class="DynaTableRowCell-2">cell 2-2</td>
        <td class="DynaTableRowCell-3">cell 2-3</td>
        <td class="DynaTableRowCell-4">cell 2-4</td>
        <td class="DynaTableRowCell-5">cell 2-5</td>
    </tr>
    <tr class="DynaTableRow">
        <td class="DynaTableRowCell-1">cell 3-1</td>
        <td class="DynaTableRowCell-2">cell 3-2</td>
        <td class="DynaTableRowCell-3">cell 3-3</td>
        <td class="DynaTableRowCell-4">cell 3-4</td>
        <td class="DynaTableRowCell-5">cell 3-5</td>
    </tr>
    <tr class="DynaTableRow">
        <td class="DynaTableRowCell-1">cell 4-1</td>
        <td class="DynaTableRowCell-2">cell 4-2</td>
        <td class="DynaTableRowCell-3">cell 4-3</td>
        <td class="DynaTableRowCell-4">cell 4-4</td>
        <td class="DynaTableRowCell-5">cell 4-5</td>
    </tr>
</table> 
```

当用户在移动设备上加载页面时，我想要做的事情，让它像[这样](http://jsfiddle.net/ShoeMaker/pv7Tj/1/)显示：

```
<table class="DynaTable">
    <tr class="DynaTableHead">
        <th rowspan="2" class="DynaTableHeadCell-1">col 1</th>
        <th class="DynaTableHeadCell-2">col 2</th>
        <th class="DynaTableHeadCell-3">col 3</th>
        <th class="DynaTableHeadCell-4">col 4</th>
        <th class="DynaTableHeadCell-5">col 5</th>
    </tr>
    <tr class="DynaTableHead">
        <th class="DynaTableHeadCell-X" colspan="3">col 3</th>
    </tr>
    <tr class="DynaTableRow">
        <td rowspan="2" class="DynaTableRowCell-1">cell 1-1</td>
        <td class="DynaTableRowCell-2">cell 1-2</td>
        <td class="DynaTableRowCell-3">cell 1-3</td>
        <td class="DynaTableRowCell-4">cell 1-4</td>
        <td class="DynaTableRowCell-5">cell 1-5</td>
    </tr>
    <tr>
        <td class="DynaTableRowCell-X" colspan="3">cell 1-3</th>
    </tr>
    <tr class="DynaTableRow">
        <td rowspan="2" class="DynaTableRowCell-1">cell 2-1</td>
        <td class="DynaTableRowCell-2">cell 2-2</td>
        <td class="DynaTableRowCell-3">cell 2-3</td>
        <td class="DynaTableRowCell-4">cell 2-4</td>
        <td class="DynaTableRowCell-5">cell 2-5</td>
    </tr>
    <tr>
        <td class="DynaTableRowCell-X" colspan="3">cell 2-3</th>
    </tr>
    <tr class="DynaTableRow">
        <td rowspan="2" class="DynaTableRowCell-1">cell 3-1</td>
        <td class="DynaTableRowCell-2">cell 3-2</td>
        <td class="DynaTableRowCell-3">cell 3-3</td>
        <td class="DynaTableRowCell-4">cell 3-4</td>
        <td class="DynaTableRowCell-5">cell 3-5</td>
    </tr>
    <tr>
        <td class="DynaTableRowCell-X" colspan="4">cell 3-3</th>
    </tr>
    <tr class="DynaTableRow">
        <td rowspan="2" class="DynaTableRowCell-1">cell 4-1</td>
        <td class="DynaTableRowCell-2">cell 4-2</td>
        <td class="DynaTableRowCell-3">cell 4-3</td>
        <td class="DynaTableRowCell-4">cell 4-4</td>
        <td class="DynaTableRowCell-5">cell 4-5</td>
    </tr>
    <tr>
        <td class="DynaTableRowCell-X" colspan="3">cell 4-3</th>
    </tr>
</table> 
```

如何仅使用 HTML 和 CSS 来完成这项工作？我“可以”使用 JavaScript/jquery，但我真的宁愿不要。输出才是最重要的。当移动设备加载它时，我可以从第一个输出转到第二个输出，或者我可以从移动版本转到桌面版本——这样做会使避免 JavaScript 变得不那么重要。CSS 现在是否提供 rowspan/colspan 选项（我上次尝试时没有使用，但那是 3-5 年前）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:07:28.713

1-您可以使用流畅的方法为您的网站设置样式，[请参阅此](http://css-tricks.com/fluid-width-equal-height-columns/)

2-您可以通过在 CSS 中使用媒体类型来做到这[一点](http://css-tricks.com/resolution-specific-stylesheets/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T19:04:16.960

如果您想在不使用 ASP、CGI 或 PHP 等服务器端脚本语言的情况下维护 HTML，那么您无法避免使用 JavaScript。否则，您将无法检测正在使用的设备或操作系统。

# graphviz - 在 Graphvi 中如何改变自环边的长度？

> ID：15453343
> 
> 赞同：3
> 
> 时间：2013-03-16T18:58:02.487
> 
> 标签：graphviz

我只需要写一个小图。下面是代码：

```
digraph G {
    rankdir=LR;     
    nodesep=1.0;
    node [shape = circle];  
    S -> S [ label = "0.67" ];  
    S -> H [ label = "0.24" ];  
    S -> C [ label = "0.09" ];

    H -> H [ label = "0.82" ];      
    H -> S [ label = "0.15" ];
    H -> C [ label = "0.03" ];

    C -> C [ label = "0.45" ];      
    C -> S [ label = "0.33" ];
    C -> H [ label = "0.22" ];
} 
```

但是，输出图不是我想要的。如您所见，自环边缘太长。看起来不太好。我该如何解决这个问题？

![图形输出](../Images/b1025ef64350e3a7ba4b7f416c8dfb11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T15:17:27.127

如果将自引用箭头的位置设置为 :ne，它看起来会稍微好一些，例如：

```
digraph G {
A:ne -> A:ne
A->B
} 
```

您还可以将图形节点ep 属性更改为较低的值：

```
graph [nodesep=.15]
A:e -> A:e
A ->B 
```

然而，这会改变整个图的节点分离，并且可能并不总是可取的。此外，它似乎只适用于东方的链接位置。

# amcharts - 从mysql数据实现的Amchart

> ID：15453347
> 
> 赞同：0
> 
> 时间：2013-03-16T18:58:17.247
> 
> 标签：amcharts

如何将 mysql 数据实现到 amchart 中？

amchart 是一个javascript，代码如下：

```
 var chartData = [{ country: "USA", visits: 4252 },
                    { country: "China", visits: 1882 },
                    { country: "Japan", visits: 1809 },
                    { country: "Germany", visits: 1322 },
                    { country: "UK", visits: 1122 },
                    { country: "France", visits: 1114 },
                    { country: "India", visits: 984 },
                    { country: "Spain", visits: 711 },
                    { country: "Netherlands", visits: 665 },
                    { country: "Russia", visits: 580 },
                    { country: "South Korea", visits: 443 },
                    { country: "Canada", visits: 441 },
                    { country: "Brazil", visits: 395 },
                    { country: "Italy", visits: 386 },
                    { country: "Australia", visits: 384 },
                    { country: "Taiwan", visits: 338 },
                    { country: "Poland", visits: 328}]; 
```

我想将数据插入chartData，以便成功显示图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T06:33:12.503

您可以在服务器端查询数据库并操作 php 数组。然后使用以下方法将php数组转换为服务器端的json数组。

```
json_encode(your php array); 
```

然后将其传递给客户端（浏览器）。如果您不知道如何将 mysql 数据处理到 php 数组，请询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-30T14:46:32.713

如果您使用版本 4

```
chart.dataSource.url = "path/to/yourdata.php";
chart.dataSource.parser = new am4core.JSONParser();
chart.dataSource.parser.options.emptyAs = 0; 
```

如果您使用版本 3

```
"dataLoader": {
    "url": "path/to/yourdata.php"
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T07:25:34.487

从您的控制器中，您可以简单地返回数组中的 mysql 数据，例如 data_array = 从查询返回的 mysql 数据，并将此数组与 json 一起发送，并将其用于您请求 amcharts 的 javascript 函数

并在您的 javascript 函数中使用以下代码 -

```
function create_chart(data_array){

$.each(data_array, function(key, value) {
  dataSet = {
    country: value1,
    visits: value2
   };
  chartData.push(dataSet);
});

chart = new AmCharts.AmPieChart();
chart.dataProvider = chartData;
chart.titleField = "country";
chart.valueField = "visits";
chart.write("chartdiv");
} 
```

# python - 使用列表中其他值的函数过滤python中的列表。

> ID：15453348
> 
> 赞同：2
> 
> 时间：2013-03-16T18:58:35.873
> 
> 标签：python, list, function, filter

```
counts = misc. array

    for i in counts:
        if i < "(sum of the two integers next to i)/4"
            return -1 
```

我要做的是将列表中小于两个邻居平均值一半的所有值设置为-1。即对于列表 [10., 20., 10., 25., 30.] 如果 i=3 那么我想看看 10 是否小于 (20+25)/4 并且因为那是 45/4 > 10然后我想将 10 设置为 -1。然后，我将过滤列表中的所有值 >= 0。

由于您应该从 i+1 开始，因为此过程不适用于第一个值，然后您应该以 -1 结束，因为此过程不适用于最后一个值，这使情况变得更加复杂。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:05:45.770

[您可以从这个答案](https://stackoverflow.com/a/6822773/367273)中借用滑动窗口生成器，然后像这样使用它：

```
out = [y if y >= (x+z)/4\. else -1 for x,y,z in window(l, 3)] 
```

`l`你的清单在哪里。

这会切断第一个和最后一个元素。如果您愿意，可以很容易地对它们做一些不同的事情（例如设置为-1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:05:46.347

这是否符合您的要求（假设值在 list 中`data`）？

```
filtered = [data[i] for i in range(1,len(data)-1) if data[i] >= (data[i+1]+data[i-1])/4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:16:43.270

像那样：

```
result = [(x+1 if counts[x] > counts[x-1]/counts[x+1]/4 else -1) for x in range(len(counts[1:-1]))] 
```

-`x`是计数中的 idex --> **for x in range(len(counts[1:-1])**
-`x+1`因为我们知道 counts[0] 和 count[-1] 都已经出局了。因此，为了达到结果，必须**对其进行调整**。
-`if count[x] > counts[x-1]/counts[x+1]/4 else -1`测试，如果结果为 True，则返回结果，否则 -1
注意`> 0`，它与您想要的相反
-`for x in range(len(counts[1:-1]))`
因为我们知道第一个和最后一个值无关紧要
-`counts[1:-1]`如上所述，总是最好使用列表的副本，线程-安全的

这应该有效，将为您提供每个索引的有效`(!=-1)`和无效结果列表，`(== -1)`

问题是，你能对结果做些什么呢？

您可以测试，例如：（注意结果中**调整后的** *x*）

```
 ['N/A'] + [(x if x!= -1 else False) for x in result] + ['N/A'] 
```

它为您提供了具有 False 或 True 结果的计数的镜像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:41:55.757

我有一个看起来不太优雅的解决方案，但我相信它是正确且可以理解的。包含过滤，因此如果 -1 是允许的值，它也将起作用。

我使用 3 个变量（a、b 和 i）和 3 个标志变量（fa、fb 和 fi）来显示值是否需要包含在结果集中。

```
def test(lst):
    a, fa, b, fb, res  = None, False, None, False, []
    for i in lst:
        if a is not None:
            fi = b < (a + i)/4
        else:
            fi = True
        if fa:
            res.append(a)
        a, fa = b, fb
        b, fb = i, fi
    if fa:
        res.append(a)
    res.append(b)
    return res

print(test([10., 20., 10., 25., 30.]))
=> [10.0, 20.0, 25.0, 30.0] 
```

# jquery - .data() jQuery 返回我在 HTML 上看不到的数据，带有折叠引导组件

> ID：15453349
> 
> 赞同：1
> 
> 时间：2013-03-16T18:58:39.447
> 
> 标签：jquery, twitter-bootstrap

我正在对 Collapse javascript 组件进行一些测试，但我发现尝试显示`#collapseOne`div 元素中的数据属性时出现了一些奇怪的现象。

我使用他们网站上的引导程序示例进行此测试：

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Collapsible Group Item #1
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
</div> 
```

我将此代码启动到我的控制台中：

```
JSON.stringify($('div#collapseOne').data()) 
```

我知道`{}`这是正常的，因为我在这个元素上没有`data`属性，但是如果我单击第二个手风琴，然后再次启动

```
JSON.stringify($('div#collapseOne').data()) 
```

我得到`"{"collapse":null}"`了，但是在控制台中，div 看起来像：

```
<div id="collapseOne" class="accordion-body collapse" style="height: 0px;">...</div> 
```

所以，由于没有`data-collapse`属性，我不明白如何`.data()`返回这个......？

我不明白的第二个行为是，如果我点击第一个手风琴然后启动

```
JSON.stringify($('div#collapseOne').data()) 
```

我在 chrome 上收到此错误`TypeError: Converting circular structure to JSON`，而 firefox 能够打印

```
{"collapse":{"$element":{"0":{"jQuery191023166512553611396":4},"context":{"jQuery191023166512553611396":4},"length":1},"options":{"toggle":"collapse","parent":"#accordion2"},"$parent":{"length":1,"0":{},"context":{"jQuery191023166512553611396":1,"location":{}},"selector":"#accordion2"},"transitioning":0}} 
```

我真的很想知道这些数据隐藏在哪里，因为我无法通过检查元素在 HTML 上看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:11:53.833

jQuery`.data()`不是元素`data`属性的直接反映。这些值由 jQuery 解释并在内部存储在内存中。如果手动向元素添加一些数据，则无法通过`.attr()`.

```
$(function () {
    var element = $('#uniqueId');

    element.data('foo', 'bar');
    console.warn(element.attr('data-foo'));
    // console will warn undefined instead of 'bar' as expected

    console.error(element.data('foo'));
    // console will error 'bar' as expected

    // edit in response to a comment
    element.attr('data-baz', 'test');
    console.log(element.data('baz'));
    // console *will* log 'test'

    // manually add a data attribute to the element
    console.warn(element.data('myNewDataAttr'));
    // console *will* warn your newly added data attr

}); 
```

这些值也被转换为 jQuery 认为的值，在 的情况下`data-bool="true"`，值`$.data('bool')`将是类型`boolean`而不是`string`预期的。

# jakarta-ee - 无法在 JAX-RS 服务中注入 @ApplicationScoped bean

> ID：15453350
> 
> 赞同：6
> 
> 时间：2013-03-16T18:58:42.497
> 
> 标签：jakarta-ee, jax-rs, cdi

我创建了 JAX-RS 服务，我想在其中注入一个应用程序范围的 bean。问题是没有注入bean。这是如何引起的，我该如何解决？

JAX-RS 服务：

```
@Path("room")
public class RoomService {

    @Inject
    GameController gc;

    public RoomService() {}

    @Path("create")
    @GET
    @Produces("application/json")
    public String create() {
        Room r = new Room();
        gc.addRoom(r); // gc is null
        return r.toJson();
    }
} 
```

应用范围 bean

```
import java.util.ArrayList;
import javax.enterprise.context.ApplicationScoped;
import javax.inject.Named;
import pepuch.multuplayergameserver.entity.Game;
import pepuch.multuplayergameserver.entity.Room;

@Named
@ApplicationScoped
public class GameController {

    private Game game;

    public GameController() {
        this.game = new Game(new ArrayList<Room>());
    }

    public boolean addRoom(Room room) {
        if (!game.getRooms().contains(room)) {
            return game.getRooms().add(room);
        }

        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T22:27:50.950

您需要使 bean 成为托管资源以使其符合注入条件。至少，添加`@RequestScoped`到 JAX-RS SIB 以使其具有注入价值。

另一种替代注释是`@ManagedBean`. 关键是，如果父 bean 不在托管上下文中，Jersey 将无法解决所需的注入目标

```
import javax.enterprise.context.RequestScoped

@RequestScoped
@Path("room")
public class RoomService {

    @Inject
    GameController gc;

    public RoomService() {}

    @Path("create")
    @GET
    @Produces("application/json")
    public String create() {
        Room r = new Room();
        gc.addRoom(r); // gc is null
        return r.toJson();
    }
} 
```

编辑：确保在您的 WEB-INF 文件夹中有**beans.xml文件。**您的 beans.xml 文件将类似于：

```
 <beans xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">   

  </beans> 
```

编辑：基于[此 JIRA](http://java.net/jira/browse/GLASSFISH-18793)，您可以替换`@RequestScoped`为`@ManagedBean`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:45:06.363

*内置上下文对象在 servlet、Web 服务和 EJB 调用期间是活动的，或者在会话上下文对象的情况下，用于 JSF 请求。*

您可能难以从 JAX-RS 服务访问请求、范围和应用程序 bean，因为它没有明确说明对 this 的支持，但是在您的情况下，您似乎只需要一个单例而不是基于上下文的 bean。

如果您使用 CDI (beans.xml)，请保持这样的状态，

```
@Singleton
public class GameController {
    private Game game;
    public GameController() {
        this.game = new Game(new ArrayList<Room>());
    }
....
} 
```

如果您将 CDI 与 Spring（无 beans.xml）一起使用，请保留`@Named`

```
@Named
@Singleton
public class GameController {
    private Game game;
    public GameController() {
        this.game = new Game(new ArrayList<Room>());
    }
....
} 
```

如果上述方法不起作用，那么我建议将您的 JAX-RS 服务`@ManagedBean`与上述更改一起标记，因为尚不清楚 CDI 是否管理 JAX-RS 服务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-04T12:04:47.817

将[cdi-api.jar](http://java2s.com/Code/Jar/c/Downloadcdiapijar.htm)添加到您的项目中。

# virtualbox - Vagrant 使用不同的主机

> ID：15453352
> 
> 赞同：7
> 
> 时间：2013-03-16T18:59:01.447
> 
> 标签：virtualbox, ntfs, vagrant

我想使用 Vagrant 但不污染我正在使用 n+ VirtualBox 机器的机器。

我在网上搜索但一无所获。我真正想要的是在我的笔记本电脑上工作并在`vagrant up`那里调用，但它应该在我的网络上安装了 VirtualBox 的另一台 Linux 计算机上启动来宾。

目前这可能吗，因为它与使用 EC2 完全一样的 aws-provider 并没有太大不同。

如果它使用 NTFS 而不是使用 rsync的[aws-provider也会很好。](https://github.com/mitchellh/vagrant-aws)

提前感谢您的回答。丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T22:08:01.370

由于 vagrant 不直接支持这一点，我会做这样的事情。

首先，将所有 Vagrantfiles 保存在主机服务器上同一目录的子目录中。然后在您的主机上创建一个 vagrant_runner 脚本，如下所示：

```
#!/bin/bash
VAGRANT_HOME='/home/bar/vagrant'

cd ${VAGRANT_HOME}/$1
# Strip off the subdir name so we can pass all the rest of our
# arguments to vagrant
shift
vagrant $@ 
```

然后在你的笔记本电脑上你会有一个 rvagrant 脚本：

```
#!/bin/bash
VAGRANT_HOST=dnsname_of_vagrant_host
VAGRANT_USER=vagrant_user

ssh ${VAGRANT_USER}@${VAGRANT_HOST} vagrant_runner $@ 
```

然后你可以`rvagrant foo up`启动 /home/bar/vagrant/foo/Vagrantfile 中定义的虚拟机，或者`rvagrant foo destroy -f`销毁它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:39:15.627

目前这是不可能的。GitHub 上有关于此主题的[问题](https://github.com/mitchellh/vagrant/issues/401)，但已关闭。作者在评论中说：

> 至少在 1.0 之后，我什至不会考虑将其构建到 Vagrant 本身中 :) 我已将其标记为功能请求，但除非立即出现，否则不打算再次查看它令人信服的理由。

大约一年和大约两个月前，两个人询问了这个问题的状态，因为我们现在发布 1.0，但不幸的是，还没有任何反应:-(

# r - 如何显示回报水平的价值

> ID：15453361
> 
> 赞同：0
> 
> 时间：2013-03-16T18:00:36.703
> 
> 标签：r

我使用 R 中的以下编码绘制了回报水平图。

```
data(ftcanmax)
fit <- gev.fit(ftcanmax[,"Prec"])
return.level(fit) 
```

如何显示对应回报期的回报水平值？比如return period为10，return value的值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:15:28.447

该代码是 extRemes ?return.level 包中的示例：

```
library(extRemes)
#...code
rets<-return.level(fit)
rets$return.level[rets$return.period==10]
#[1] 281.459 
```

仅当 'rperiods' 参数`return.level`包含感兴趣的期间......在默认情况下它为 10 时才可能这样做。因此，对于非默认期间，这应该足够了：

```
>  return.level(fit ,rperiod=12)$return.level
[1] 296.796 
```

# hibernate - 休眠自定义查询

> ID：15453362
> 
> 赞同：0
> 
> 时间：2013-03-16T18:59:42.330
> 
> 标签：hibernate

我发现很难实现以下示例：

表位置

```
Id Location longitude   latitude
1 l1        -5.938229   28.38129
2 l2        -7.389323   18.38129
3 l3        -9.378913   58.38129 
```

我想映射以下查询并计算用户坐标给定的距离：

```
SELECT l.*, <formula to calc distance> as distance FROM Location as l 
```

我在 hbm 文件中定义了 Location 实体，但我不知道如何包含默认数据模型中不存在的附加列“距离”。

将这些数据汇总为以下内容会很方便：

```
HashMap<Location, Double> 
```

其中第一种类型表示位置，另一种表示与给定点的距离。

我宁愿执行 SQL 查询而不是 HQL。这通常是如何在休眠中实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:53:24.477

您是否考虑过定义自己的方言？

请参阅：[如何使用 Hibernate 调用自定义数据库函数？](https://stackoverflow.com/questions/1909315/how-can-you-call-custom-database-functions-with-hibernate)

或者，您可以使用所需的 SQL 创建视图并将此视图映射到 Hibernate 实体。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T03:14:29.623

我看你已经找到答案了。只是想补充一点，一个更简单的选择可能是在填充“距离”字段的函数上使用 @PostLoad 注释。

# mysql - 我如何阅读这个 mysql 选择查询？

> ID：15453368
> 
> 赞同：3
> 
> 时间：2013-03-16T19:00:12.333
> 
> 标签：mysql, sql

我正在尝试优化这个 mysql 选择查询，但我不知道如何阅读它。想知道是否有人可以用 thw WHERE 子句来解释这个查询在做什么。

```
SELECT `id`, `size`, `download`, `mirror1`, `mirror2`, `mirror3` 
FROM `entries` 
WHERE (`flags` & '3') = '0'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:04:27.333

它正在`AND`对标志进行按位运算符，请在此处阅读： [http ://en.wikipedia.org/wiki/Bitwise_AND#AND](http://en.wikipedia.org/wiki/Bitwise_AND#AND)

二进制中的 3 是 11，因此它检查是否未设置标志的低两位（例如，它们为 0），因为根据 where 子句，AND 运算符的结果必须为 0。

示例（假设标志具有以下值）：

```
Ex 1:    11101000 <-- WHERE clause would be true, since lower two bits are 0
Ex 2:    11111010 <-- WHERE clause would be false, since lower two bits are NOT 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:06:04.170

我假设你的目标是`&`. 这是一个[`bitwise AND`](http://dev.mysql.com/doc/refman/5.6/en/bit-functions.html#operator_bitwise-and).

[在这篇维基百科文章](http://en.wikipedia.org/wiki/Bitwise_operation)中可以找到关于它如何工作的一个很好的解释：

> 按位与采用相等长度的两个二进制表示，并对每对相应位执行逻辑与运算。如果第一位为 1，第二位为 1，则每个位置的结果为 1；否则，结果为 0。在此，我们执行两位的乘法；即，1 × 0 = 0 和 1 × 1 = 1。例如：

```
 0101 (decimal 5)
AND 0011 (decimal 3)
  = 0001 (decimal 1) 
```

这种技术通常用于以非常紧凑的形式存储状态、用户权限或类似内容。我假设`3`查询检查的两个特定状态是：

```
00000000 <- TRUE
00000001 <- FALSE
00000010 <- FALSE
00000011 <- FALSE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:11:08.813

你能确定它实际上是“ WHERE ( `flags`& '3') = '0'; ”吗？是“ WHERE ( `flags`& 3) = 0; ”更有意义吗？

凯文

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:12:20.473

从条目表中选择 id、size、download、mirror1、mirror2 和 mirror3 字段，其中 flags 作为二进制数与 3 与等于 0。

标志通常存储为位，这些位被转换为数字进行存储。由于一个标志通常是打开或关闭的，这对应于二进制 0 和 1。所以 0 可以关闭，1 可以打开。因此，四个标志的序列可以二进制表示为： 0 0 1 1 , (off, off, on, on) 相当于十进制 3。

为了满足与十进制 3（二进制 11）相乘的数字为零的条件，该数字必须具有两个最低位为零，因此（二进制）：1 1 0 0 或 10100 等将返回零，因为 AND 仅在两个输入均为 1 时才返回 1。

# php - 会话/数组问题，购物车

> ID：15453375
> 
> 赞同：2
> 
> 时间：2013-03-16T19:01:05.163
> 
> 标签：php, mysql, arrays

当一个项目被添加到购物车时，项目 ID 和该项目的数量应该被显示。在这种情况下，仅从会话中解析数量。未显示项目 ID。此外，当添加不同的项目时，购物车应显示具有单独数量的第二个项目。

```
<?php 
session_start();

?>
<?php 
if (isset($_POST['pid'])) {
    $pid = $_POST['pid'];
    $wasFound = false;
    $i = 0;

    if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1){
        $_SESSION["cart_array"] = array(1 => array("item_id" => $pid, "quantity" => 1));
    } else {
        foreach ($_SESSION["cart_array"] as $each_item) {
            $i++;
            while (list($key, $value) = each($each_item)) {
                if ($key == "item_id" && $value == $pid) {
                array_splice($_SESSION["cart_array"], $i-1, 1,array(array("item_id" => $pid, "quantity" => $each_item['quantity'] + 1)));
                $wasFound = true;
               }
            }
        }
        if ($wasFound == false) {
        array_push($_SESSION["cart_array"], array("item_id" => $pid, "quantity" => 1));
    }
  }
 }
?>
<?php
if (isset($_GET['cmd']) && $_GET['cmd'] == "emptycart") {
    unset($_SESSION["cart_array"]);
}
?>
<?php
$cartOutput = "";
if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1) {
    $cartOutput = "<h2 align='center'>Your shopping cart is empty</h2>";
} else {
    $i = 0;
    foreach ($_SESSION["cart_array"] as $each_item) {
        $i++;
        $cartOutput .= "<h2>Cart item $i</h2>";
        while (list($key, $value) = each ($each_item)) {
            $cartOutput .= "key:$value<br />";
        }
    }
}
?> 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:16:16.893

array_splice 中有一个错误：数组从 0 开始索引。是什么阻止您使用 foreach ($arr as $index=>$key) 语法？并且您至少在该示例中没有回显 $cartOutput 。

```
<?php 
session_start();

if (isset($_POST['pid'])) {
    $pid = intval($_POST['pid']);

    if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1){
        $_SESSION["cart_array"] = array(1 => array("item_id" => $pid, "quantity" => 1));
    } else {
        $found= false;
        foreach ($_SESSION["cart_array"] as $i => $each_item) {
            if ($each_item["item_id"] == $pid) {
                $_SESSION["cart_array"][$i]["quantity"] ++;
                $found = true;
            }
        }
        if (!$found)  {
                $_SESSION["cart_array"][] = array("item_id"=>$pid, "quantity"=>1);
        }
    }
 }
?>
<?php
if (isset($_GET['cmd']) && $_GET['cmd'] == "emptycart") {
    unset($_SESSION["cart_array"]);
}
?>
<?php
$cartOutput = "";
if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1) {
    $cartOutput = "<h2 align='center'>Your shopping cart is empty</h2>";
} else {
    $i = 0;
    foreach ($_SESSION["cart_array"] as $each_item) {
        $i++;
        $cartOutput .= "<h2>Cart item $i</h2>";
        while (list($key, $value) = each ($each_item)) {
            $cartOutput .= "key:$value<br />";
        }
    }
}
echo $cartOutput;
?> 
```

# file - Perl - 动态/相对文件路径 - 网站

> ID：15453377
> 
> 赞同：2
> 
> 时间：2013-03-16T19:01:07.183
> 
> 标签：file, perl, path, relative-path

我正在使用 perl 等构建网站，我正在尝试打开一个文件并在网站上打印它的内容，但是在使用相对文件路径时我似乎无法让它工作......

```
 # Load our header.html template file
open (HEADER, "/xampp/htdocs/website/template/header.html") or die "Can't find header.html - check path...";
print (<HEADER>); 
```

这样可行

但是，如果我能做这样的事情，我会更喜欢它：

```
# Load our header.html template file
open (HEADER, "/template/header.html") or die "Can't find header.html - check path...";
print (<HEADER>); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:12:18.110

如果您的完整路径是

```
/xampp/htdocs/website/template/header.html 
```

而你目前在`/xampp/htdocs/website`（这是你的脚本所在的位置，或者被`chdir`编辑到的位置），那么你可以只使用相对路径：

```
template/header.html 
```

例如

```
open my $fh, "<", "template/header.html" or die $!;
print <$fh>; 
```

请注意在词法文件句柄中使用三参数`open`，以及`$!`在 die 语句中包含错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:03:22.903

`/template/header.html`不是相对文件路径。尝试`./template/header.html`

# three.js - 在 three.js 中克隆具有子组的 DAE 模型

> ID：15453380
> 
> 赞同：2
> 
> 时间：2013-03-16T19:01:32.673
> 
> 标签：three.js, collada

我试图在加载后克隆一个 dae 模型。我尝试了几种解决方案，但我认为我的问题是模型在组内有组。它有一个包含所有资产的主要父组。这里没有几何。它的孩子是一个具有几何形状的球体和另外 4 个父组（每个都没有几何形状）。每组有 3 个几何形状：2 个圆锥体和一个圆柱体。

我使用下面的代码，但你可以在链接上： [http](http://caostar.com/3d/PABLOwebgl_loader_collada2.html) ://caostar.com/3d/PABLOwebgl_loader_collada2.html 克隆的对象不保留位置和转换。将网格添加到新对象只需将它们全部放在一起，就好像它们都具有相同的矩阵一样。如果您滚动缩放并让相机查看奇怪物体的内部，您会看到球体和圆锥体位于变形的圆柱体内部。

关于如何实现预期效果的任何想法，拥有 100 个克隆而不是 100 个变形的 3D 对象？

这是我正在使用的代码，在整个组中循环并获取它的网格。

```
var dae;
        var loader = new THREE.ColladaLoader();
        loader.options.convertUpAxis = true;
        loader.load( './models/collada/caostar/estrela4.dae', function ( collada ) {

            dae = collada.scene;
            dae.scale.set(16,16,16);

            var piece = collada.scene.children[0];

            for (var i = 0; i < 100; i++) {
                var newPiece = new THREE.Object3D();

                //looping through the groups. If a group has children, loop again
                for (var j = 0; j < piece.children.length; j++) {
                    if(piece.children[j].children.length > 0){
                        for (var j2 = 0; j2 < piece.children[j].children.length; j2++) {
                            var newMesh = new THREE.Mesh(piece.children[j].children[j2].geometry, piece.children[j].children[j2].material);
                            //this applyMatrix doesnt do anything :/
                            if( piece.children[j].children[j2].geometry.matrix )newMesh.geometry.applyMatrix( piece.children[j].children[j2].geometry.matrix );
                            newPiece.add(newMesh);
                        }
                    }else{
                        var newMesh = new THREE.Mesh(piece.children[j].geometry, piece.children[j].material);
                        //this applyMatrix doesnt do anything :/
                        if(piece.children[j].geometry.matrix)newMesh.geometry.applyMatrix( piece.children[j].geometry.matrix );

                        newPiece.add(newMesh);
                    }
                }

                newPiece.position.set(Math.random()*10-5,Math.random()*10-5,Math.random()*10-5);
                //newPiece.scale.set(sizes,sizes,sizes);
                newPiece.updateMatrix();
                scene.add( newPiece );

            }

        } ); 
```

///////更新

好的，我已经找到了针对我的特定问题的解决方案，但是无法弄清楚如何正确克隆具有任何类型子组的 collada。

这是我的代码。希望它可以帮助某人。

```
 var dae;
    var loader = new THREE.ColladaLoader();
    loader.options.convertUpAxis = true;
    loader.load( './models/collada/caostar/estrela4.dae', function ( collada ) {

        dae = collada.scene;
        dae.scale.set(16,16,16);
            var piece = collada.scene.children[0];
            //
            //I will keep the parent names to avoid meshe being added twice
            var parentsNames = [];
            for (var i = 0; i < 100; i++) {
                var newPiece = new THREE.Object3D();
                piece.traverse( function ( child ) {

                    //check if child has children but exclude the main group. This is custom part and must be addpted for each DAE to be clonned
                    if(child.children.length > 0 && child.children.length < 5){

                        //create the group
                        var newPieceChildren = new THREE.Object3D();
                        //
                        parentsNames.push(child.name);
                        //
                        child.traverse( function ( child ) {
                            var newMesh = new THREE.Mesh(child.geometry, child.material);
                            //this will apply all transformations to the piece
                            newMesh.applyMatrix( child.matrix)
                            newPieceChildren.add(newMesh);

                        });
                        //this will apply all transformations to the group
                        newPieceChildren.applyMatrix( child.matrix);
                        newPiece.add(newPieceChildren);

                    //se if it is an isolated child with no children and if it has not been included in the subgroups
                    }else if(child.children.length == 0 && parentsNames.indexOf(child.parent.name) == -1){
                        var newMesh = new THREE.Mesh(child.geometry, child.material);
                        //this will apply all transformations to the piece
                        newMesh.applyMatrix( child.matrix)
                        newPiece.add(newMesh);
                    }

                } );
                //
                scene.add(newPiece);
            }

            }); 
```

# c++ - 在整数输入中跳过单个减号或加号

> ID：15453383
> 
> 赞同：3
> 
> 时间：2013-03-16T19:01:43.703
> 
> 标签：c++, validation

最近我需要一个简单的程序来对标准输入上出现的所有整数求和，每行一个整数。输入碰巧包含一些未设置的行，其中包含一个减号 ('-') 符号，以及一些带有垃圾字符的行（将被忽略）。

我相信这将是一个微不足道的程序。但事实证明，单个减号并没有表现得像其他错误输入。在正常的非整数输入上，设置失败标志并且错误输入保留在输入缓冲区中。但是对于单个减号（或加号），设置了失败标志，但删除了 +/- 号，导致程序跳过下一个（有效）整数（导致错误的总和）。

我写了一个小测试程序（如下）来分析行为。上述带有 +/- 符号的行为是错误还是功能？

```
#include <iostream>

using namespace std;

int main()
{
  string s;
  int n;

  while (true)
  {
    n = -4711;
    cin >> n;

    cerr << (cin.bad()  ? "ERROR: badbit is set\n" : "");
    cerr << (cin.fail() ? "ERROR: failbit is set\n" : "");
    cerr << (cin.eof()  ? "ERROR: eofbit is set\n" : "");

    if ( cin.bad() || cin.eof() )
      break;

    if ( cin.fail() )
    {
      cin.clear();
      cin >> s;
      cerr << "ERROR: ignored string '" << s
           << "' (integer is '" << n << "')" << endl;
    }
    else
    {
      cout << "OK: read integer '" << n << "'" << endl;
    }
  }
  return 0;
} 
```

运行程序（输入：“1 asdf 2 - 3 + 4 qwer 5”）：

```
~ $ ./a.out
1 asdf 2 - 3 + 4 qwer 5 
OK: read integer '1'
ERROR: failbit is set
ERROR: ignored string 'asdf' (integer is '0')
OK: read integer '2'
ERROR: failbit is set
ERROR: ignored string '3' (integer is '0')
ERROR: failbit is set
ERROR: ignored string '4' (integer is '0')
ERROR: failbit is set
ERROR: ignored string 'qwer' (integer is '0')
OK: read integer '5' 
```

（我已经通过读取字符串解决了我最初的问题，并使用带有异常的 C++11 stoi 来识别错误的输入。）

编辑：如果有人对我原来的问题的解决方案感兴趣：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
  int sum = 0;
  string n;

  while ( cin >> n )
  {
    try {
      sum += stoi(n);
      cout << n << endl;
    }
    catch (exception& e)
    {
      cerr << e.what() << " ERROR: '" << n << "' is not a number." << endl;
    }
  }
  cout << sum << endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:09:01.257

这是一个特点。`cin`直到它读取了“-”之后的空格才知道输入错误。没有可移植的方式使用 iostreams 放回一个以上的字符，也没有可移植的方式在 cin 中查找。所以它被卡住了，必须将“-”保留为已读。

读取数据时有一点需要您自己进行解析。将所有数据读入字符串，然后自己解析这些字符串以确定什么是真实的，什么是垃圾。这样您就可以完全控制而不是与 iostream 所做的任何事情作斗争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:11:11.127

我会这样做：

```
#include <locale>
#include <sstream>
#include <vector>
#include <iostream>
#include <iterator>
#include <algorithm>

struct number_only: std::ctype<char> { 
    number_only() : std::ctype<char>(get_table()) {} 

    static mask const *get_table() { 
        static std::vector<mask> rc(table_size, space);

        std::fill_n(&rc['0'], 10, digit);
        return &rc[0]; 
    } 
};

int main() { 
    std::string input("1 asdf 2 - 3 + 4 qwer 5 ");
    std::istringstream x(input);

    // use our ctype facet:
    x.imbue(std::locale(std::locale(), new number_only));

    // initialize vector from the numbers in the file:
    std::vector<int> numbers((std::istream_iterator<int>(x)), 
                                std::istream_iterator<int>());

    // display what we read:
    std::copy(numbers.begin(), numbers.end(), 
        std::ostream_iterator<int>(std::cout, "\n"));

    return 0;
} 
```

# javascript - Symfony2，带有 FOS 路由的周期性 JS 故障

> ID：15453388
> 
> 赞同：2
> 
> 时间：2013-03-16T19:01:55.663
> 
> 标签：javascript, symfony

有时我的 JS 无法通过 Symfony2 动态加载，URL 看起来像；

> /app_dev.php/js/d5fb045_part_1_main_4.js

使用开发工具查看此 URL 表明 JS 正在返回；

> 致命错误：在第 105 行调用 vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Debug/ExceptionHandler.php 中未定义的方法 ErrorException::getStatusCode()

this返回时抛出的JS错误当然是；

> 未捕获的 SyntaxError：意外的标识符

出了什么问题？

**编辑**

这似乎不会在 prod 环境中发生。仅在开发中。

**编辑 2**

这也太值得展示了[Full Image](https://i.stack.imgur.com/U39ut.png)

![在此处输入图像描述](../Images/dee3f49b844ab8710f2ca6733ef82b34.png)

我正在使用 FOS 路由，它似乎失败了，然后其他一切都被取消了。调用`/app_dev.php/js/routing?callback=fos.Router.setData`什么也不返回，只是一个带有 500 代码的空白页。

虽然情况并非总是如此，因为这里 FOS 路由工作，然后 KnockJS 文件失败。[全图](https://i.stack.imgur.com/DHYXL.png)

![在此处输入图像描述](../Images/f60fa28fb88fac2f67ff66d2d732f420.png)

**编辑 3**

直接访问文件时，这似乎也不会发生

> [http://www.example.com/app_dev.php/css/9d6987e_part_1_style_1.css](http://www.example.com/app_dev.php/css/9d6987e_part_1_style_1.css)

只有当它从页面内加载时。

# javascript - jQuery-UI：未捕获的 SyntaxError：意外的令牌

> ID：15453393
> 
> 赞同：2
> 
> 时间：2013-03-16T19:02:32.723
> 
> 标签：javascript, jquery, css, jquery-ui, exception

这是我在 HTML 中的内容：

```
<!DOCTYPE html>
<html>
<head>

    <script type="text/javascript" src="/static/jslibs/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.css"></script>

    <title>test</title>
</head>
<body>

</body>
</html> 
```

这是我得到的：

```
Uncaught SyntaxError: Unexpected token . 
...Here code caused exception...
.ui-helper-hidden {
display: none;
} 
```

有人熟悉吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-16T19:03:45.383

您混淆了 js 文件和 css 文件。

您正在使用脚本元素导入 css 文件，因此出现错误。JQuery UI 需要一个 CSS 文件和一个 JS 文件，并且它们必须在单独的元素中导入。它应该是这样的：

```
<link type="text/css" href="lib/jquery/ui-darkness/jquery-ui-1.8.21.custom.css" rel="stylesheet" /> 
<script charset="UTF8" src="jquery.min.js"></script>
<script charset="UTF8" src="lib/jquery/jquery-ui-1.9.0.custom.min.js"></script> 
```

# zsh - 是否可以在 zsh 中自动分页输出？

> ID：15453394
> 
> 赞同：4
> 
> 时间：2013-03-16T19:02:42.920
> 
> 标签：zsh

有时我们在终端运行一个命令，结果输出太大，最后忘了放“|less”。所以我想知道当zsh中的输出太大时是否可以分页输出？

我尝试通过使用 python 和 less 来实现此功能：

```
#!/usr/bin/env python3
termHeight = 25
import sys
from subprocess import Popen, PIPE
p = Popen(['unbuffer'] + sys.argv[1:], stdin=PIPE, stdout=PIPE)
lines = []
for count in range(termHeight):
    line = p.stdout.readline()
    if not line:
        break
    print(line.decode('utf8'), end='')
    lines += [line]
if line:
    q = Popen(['less', '-Mr'], stdin=PIPE)
    q.stdin.writelines(lines)
    while True:
        line = p.stdout.readline()
        if not line:
            break
        q.stdin.write(line)
    q.communicate() 
```

让我们将这个 python 脚本保存到 p.py。所以当我们运行像“python p.py ls --help”这样的“python p.py some commands”时，如果输出超过25行，这个脚本将使用less来显示输出。

问题是我无法从用户那里获得输入。这意味着该解决方案根本不适用于交互式程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-02T15:18:35.497

尝试将此添加到您的`.zshrc`

```
export LESS="-FX" 
```

*   `-F`= “如果整个文件可以显示在第一个屏幕上，就会导致 less 自动退出。”</li>
*   `-X`= “禁用将 termcap 初始化和去初始化字符串发送到终端。” （停止少清除屏幕）

对我来说`less`，当有多个文本屏幕时，这种方式用作寻呼机，而当没有文本时，则使用 zsh 的内置寻呼机（`zsh -c '< /dev/fd/0'`, like `cat`）。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T23:19:34.847

我不确定这是可能的。它需要`zsh`做两件事：

1.  确定命令是否正在写入标准输出
2.  如有必要，截取该输出并显示到寻呼机。

第二个相当简单。我们真正要做的是将*每个*命令的输出传递给`less`并使用一对选项`less`在只需要一个屏幕时自动退出。

```
preexec () {
    eval "$3" | less -XF
} 
```

然而，第一个标准更棘手：我们不想要这样的命令

*   `vi foo.txt`
*   `less bar.rtf`
*   `ssh remote.host.com`

要通过管道`less`。不幸的是，对我来说，如何自动区分我们做和不想通过管道的程序并不明显`less`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:12:49.107

也许另一种选择是使用类似的东西[`screen`](http://linux.die.net/man/1/screen)，[`tmux`](https://wiki.archlinux.org/index.php/Tmux)而不是试图强制`zsh`为您寻呼。该解决方案为诸如连接、寻呼机等编辑器提供了支持`vim`，`ssh`并且`less`还`more`提供了多命令回滚功能，通过寻呼机管道传输每个命令是不允许的。

这种方法会给你：

*   在多个命令（而不仅仅是最后输入的命令）上回滚（相当多的回滚）。
*   重新加入你的会话（这样当你吃完午饭回来时，你就不会失去早上会话的回滚）。

这种方法会花费您：

*   在运行命令之前，您需要建立一个要附加的会话。这不是很多工作，但根据我的经验，我忘记使用`screen`的时间是我真正非常想要的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T23:29:10.193

您当然可以做的是使用 shell 函数包装可能输出多于一屏文本的命令。

这就像一个自动分页的 ls

```
function ls {
   command ls $@ | less -RFX
 } 
```

您还可以编写一些将命令名称列表作为条目并为每个命令生成包装函数的东西。因此，您只需将新命令名称添加到文件并重新生成包装器。

那将是我的解决方法。

# hash - 哈希检测和页面处理

> ID：15453395
> 
> 赞同：3
> 
> 时间：2013-03-16T19:02:46.167
> 
> 标签：hash, tabs, hyperlink

我有带有 jquery 选项卡的页面。每个选项卡都有自己的链接 (mysite.com/index.html#tab1)。还有我的 js 函数在单击选项卡链接时起作用 - 它根据单击的选项卡更改页面上的一些内容。 **问题：** 当访问者通过具有特定哈希的链接访问网站时，我需要启用我的 js 功能，而不仅仅是通过单击选项卡。这意味着我需要检测 URL 中的哪个 # 并针对链接中的特定 # 执行特定功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:19:32.203

您可以使用 javascript 并检查 url 是否包含任何内容`#`并获取内容`#`，然后适当地更改页面。

```
// get the current url.
var URL = window.location;
// URL = 'http://example.net/#displayme'; // just an example that will work.
var hashtag = 'null';

try{
    // get a substring of everything after the # excluding the '#'
    hashtag = URL.substr(URL.indexOf('#') + 1, URL.length); 

    if(hashtag == 'someVar'){
         // change content
    }
} catch(err){
    //the url didn't contain a #
}

document.write(hashtag); 
```

上面的脚本主要检查 URL 并尝试查找它是否包含任何 #，您可以将脚本放在`$(document).ready(function() { addScriptHere(); });`函数中，以便在页面加载后调用它，并使用 jQuery 以任何您想要的方式更改页面。

使用注释掉的 URL 在上面的示例中输出

> 显示

# javascript - 为什么谷歌浏览器会在 pushState 上访问服务器？

> ID：15453399
> 
> 赞同：4
> 
> 时间：2013-03-16T19:03:01.563
> 
> 标签：javascript, html, google-chrome, pushstate

我测试了 Chrome（linux 和 windows）、Firefox 和 Opera。

每次我执行 pushState 时，Chrome 都会访问服务器。它似乎没有以任何方式使用请求，我只是注意到它，因为我正在查看日志文件。

这是请求：

```
16 Mar 2013 01:00 PM ip=127.0.0.1 agent=Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22 uri=/ T1=0ms T2=0ms T3=0ms 
```

这是代码行：

```
history.pushState({}, 'my_app', URL); 
```

我知道 URI 说“/”，但这甚至不是被推送的 URL。

Firefox 和 Opera 不这样做，这对我来说似乎是不正确的行为。是bug吗？

我担心的原因是缩放。我不希望用户在浏览我的应用程序时发出虚假请求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-19T17:55:26.557

@JavascriptNewbie - 你并不孤单：D

恭喜你成为地球上（或至少在互联网上）唯一一个注意到这一点并且足够熟练地检查你的臭日志的人。

优点：Chrome 和 Firefox 可以根据需要进行预取，有时还可以使用 pushState 来使后退/前进更好。在您的情况下，它看起来至少由于您的页面中的某些内容而中止了“预渲染”......但您可能想检查它是否也在预取并执行您的链接脚本或样式。

简而言之：Chrome 和 FireFox 可能决定从服务器获取 pushState/replaceState url，以便能够优化它们的后向/前向缓存，以防人们从导航栏中复制和粘贴 url。这是不确定的，并不总是发生。

The Long：情况会变得更糟，除非您遇到此处提到的限制条件之一：[https](https://developers.google.com/chrome/whitepapers/prerender) ://developers.google.com/chrome/whitepapers/prerender Chrome 会实际解释并执行您的 javascripts ......这可能会触发 AJAX 之类的事情，甚至是 Websockets。

The Longer：我在这里完成了一个测试套件和文章：[https](https://github.com/nickhsharp/prefetchNightmare) ://github.com/nickhsharp/prefetchNightmare ，它最终可能会成为一篇博文。

# mysql - 加载 XML 文件以显示与将 XML 转换为 MySQL 然后显示？

> ID：15453405
> 
> 赞同：0
> 
> 时间：2013-03-16T19:03:29.167
> 
> 标签：mysql, xml, performance

我开始从事一个处理 XML 配置文件的项目。最终客户将使用此 Web 应用程序来显示其设备的配置方式。这些 XML 文件将是每个配置文件数千行。

使用 PHP，我可以轻松读取 XML 文件，然后对数据执行我需要的操作。

性能方面是直接从 XML 文件中读取数据与将数据转换为 MySQL 数据库然后从数据库中读取相比会更快/更好吗？

我总是可以缓存处理/解析的 XML 以供使用，因此我不必不断地再次读取 XML 文件。

我想建立这个项目，让这个项目能够很好地起飞，并且有很多人分享他们的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:33:35.497

这主要取决于您的 xml 文件的大小。解析大量的 xml 肯定比查询 mysql 的某些值要慢，这些值已经存储并排序到表中。对于小型 xml 片段，直接从文件系统读取它们不会损害性能，但是您可能会遇到对 xml 文件的并发读/写访问（例如，由不同的用户）。

所以从长远来看，我总是选择数据库解决方案。它可以更好地“扩展”到您投入/从中提取的任何数据，并且并发访问不会让您头疼。

# css - 当我们使用modernizr动态加载我们的资源时，无样式内容的闪烁一秒钟

> ID：15453409
> 
> 赞同：3
> 
> 时间：2013-03-16T19:03:42.267
> 
> 标签：css, html, modernizr

我正在使用modernizr 来检测媒体查询支持，以便我可以加载备用css 和js。但问题是有一个无样式的html闪烁，然后应用css，因为css是由modernizr动态加载的。它看起来很丑一段时间。有什么解决方案吗？

```
 Modernizr.load({
            test: Modernizr.mq('only all'),
            yep: ['test.js','/a/s/responsive-css/abcd.css'],
            nope: ['/a/s/xyz.css']
        }); 
```

检查此链接。 [http://susheel3656.0fees.net/index_with_modenizr.html](http://susheel3656.0fees.net/index_with_modenizr.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:15:13.757

尝试将 Modernizr 初始化代码放在 head 标签的开头。在modernizr.js 之前它看起来并没有加载多少，但它可能值得一试。

如果这不起作用，解决方法是隐藏您的页面内容并在加载 css 时使用 jQuery 显示您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:43:13.210

您是否考虑过使用[Respond.js](https://github.com/scottjehl/Respond)或[CSS3-MediaQueries.js](http://code.google.com/p/css3-mediaqueries-js/)为（主要）IE7 和 IE8 添加媒体查询支持？

为每个人加载响应式 css，然后将你的 modernizr 调用更改为：

```
Modernizr.load({
        test: Modernizr.mq('only all'),
        yep: ['test.js'],
        nope: ['/js/respond.js']
 }); 
```

我用这种方法取得了一些成功。最坏的情况是，仅使用 IE7 或 IE8 的访问者可能会看到未设置样式的内容。

如果您需要对旧版浏览器进行更多调整，您可以在页面标题中包含条件注释，添加 ie 标记或加载 js 脚本，最后在您的 CSS 中包含特定于浏览器的额外 CSS，例如：

**HTML**

在头脑中：[编辑]

```
<script>
Modernizr.load({
        test: Modernizr.mq('only all'),
        yep: ['test.js'],
        nope: ['/js/respond.js']
 }); 
</script>    

<!-- load the responsive CSS for everyone -->    
<link rel="stylesheet" href="/a/s/responsive-css/abcd.css" type="text/css"/>  

<!--[if IE 7]>  
<html class="ie7">  
<script src="/js/ie7-script.js">    
</script>  
<![endif]--> 
```

**CSS**
然后在 CSS 中添加

```
.ie7 .additional-selector{
/* Optional css specific to IE7 to compensate for old browser. Ideally this wouldn't be needed */
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T23:41:46.780

我今天早些时候遇到了这个问题，并想出了一个看起来不错的内容闪存解决方案。

CSS：`html.js { display:none; }`

jQuery：`$('html.js').show();`

如果 Modernizr 启用了 JavaScript，它会将 js 类添加到页面。它的作用是默认使用 CSS 隐藏整个页面，然后在 JavaScript 启动后显示它。

禁用 JavaScript 的用户不会受到影响，因为 Modernizr 无法将 js 类添加到 HTML 标记中。他们也不应该看到闪光灯，因为那是由于 Modernizr 本身，它从未加载过。希望有帮助！

# html - HTML页面中的独立列滚动

> ID：15453410
> 
> 赞同：33
> 
> 时间：2013-03-16T19:03:44.247
> 
> 标签：html, css

我的 HTML 页面中有两列。

```
<div id="content">
  <div id="left"></div>
  <div id="right"></div>
</div> 
```

他们每个人都占据页面的一半

```
#left {
    float: left;
    width: 50%;
}

#right {
    float: left;
    width: 50%;
} 
```

是否有可能使它们独立流动？我的意思是，我希望能够向下滚动左列，但保持在右列的顶部，而不必同时向下滚动两列。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-16T19:10:48.097

[看到这个小提琴](http://jsfiddle.net/wQ6WQ/1/)

```
#content, html, body {
    height: 98%;
}
#left {
    float: left;
    width: 50%;
    background: red;
    height: 100%;
    overflow: scroll;
}
#right {
    float: left;
    width: 50%;
    background: blue;
    height: 100%;
    overflow: scroll;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-18T14:55:37.903

较早的帖子有所改进：

*   100% html 和正文大小....没有滚动条
*   左右框的边距
*   仅在需要时使用单个滚动条（“自动”）
*   其他一些细节：试试吧！

小提琴：[2个独立滚动的div](https://jsfiddle.net/hr6au65b/)

```
html, body {
  height: 100%;
  overflow: hidden;
  margin: 0;
}
#content {
  height: 100%;
}
#left {
  float: left;
  width: 30%;
  background: red;
  height: 100%;
  overflow: auto;
  box-sizing: border-box;
  padding: 0.5em;
}
#right {
  float: left;
  width: 70%;
  background: blue;
  height: 100%;
  overflow: auto;
  box-sizing: border-box;
  padding: 0.5em;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-04T19:38:05.950

```
body {
  margin: 0;
}

#left {
  position: fixed;
  background-color: green;
  width: 50%;
  height: 100%;
  overflow: auto;
}

#right {
  position: fixed;
  background-color: red;
  width: 50%;
  height: 100%;
  right: 0;
  overflow: auto;
} 
```

> **请看这个[小提琴](https://jsfiddle.net/Omar_Ahmed_Happy/vqu18kef/1/)**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-16T19:09:52.833

设置列的高度，然后设置`overflow: auto`. 您还可以将所有规则放在同一个 CSS 选择器中。像这样：

```
#left, #right {
    float: left;
    width: 50%;
    height: 200px; /* Set your height here */
    overflow: auto;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-16T19:09:24.390

是的。你将不得不限制他们的高度。 [请参阅此小提琴](http://jsfiddle.net/rSRhb/1/)以获取工作示例。

```
#content {
    height: 10em;
}
#left {
    float: left;
    width: 50%;
    background-color:#F0F;
    max-height:100%;
    overflow: scroll;
}

#right {
    float: left;
    width: 50%;
    background-color:#FF0;
    max-height:100%;
    overflow: scroll;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-16T19:18:16.140

简单来说，这样写你的 CSS

```
#content div{
    height: 300px;
    width:200px;
    float: left;
    border:1px solid blue;
    overflow-y: auto;
} 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/65vKw/)**

# python - RemoteUserMiddleware 不起作用，它只是将我重定向到 /accounts/login/?next=

> ID：15453412
> 
> 赞同：0
> 
> 时间：2013-03-16T19:03:53.513
> 
> 标签：python, django, authentication, remoteusermiddleware

我试图`WWW-Authenticate`在 Django 中使用简单的 HTTP 身份验证`REMOTE_USER`。这是通过[RemoteUserMiddleware](https://docs.djangoproject.com/en/dev/howto/auth-remote-user/#configur.)完成的。

不幸的是，像这样更改我的配置文件后：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.auth.middleware.RemoteUserMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

AUTHENTICATION_BACKENDS = ( 
    'django.contrib.auth.backends.RemoteUserBackend',
) 
```

并将`@login_required`装饰器添加到我的视图中，它不起作用。当我查看该页面时，它会将我定向到`accounts/login/?next=/page/I/tried/to/access`，它不存在并引发 404 错误。

为什么不直接发送`WWW-Authenticate`？如果这不是正确的方法，我该怎么办？

# javascript - jQuery 多窗口访问和处理程序

> ID：15453417
> 
> 赞同：0
> 
> 时间：2013-03-16T19:04:10.880
> 
> 标签：javascript, jquery, dom, window.open

我正在开发一个相当依赖 jQuery 的 Web 应用程序。我有一个结构如下的选择：

```
<select id='task_id'>
    <option value=''>Select</option>
    <option value='0001'>First Task</option>
    <option value='0002'>Second Task</option>
    <option value='addnew'>Add New...</option>
</select> 
```

而且我还有一些 jQuery，当有人选择“添加新...”时会打开一个新窗口，这样他们就可以在另一个页面上输入详细信息。

```
var newTask;
$("select").change(function(){
    if( $(this).val() == "addnew" ){        
       if( newTask )
          newTask.close();
       newTask = window.open( "/projects/add-task", "newTask", "width=990,height=600" );
    } else {
       if(newTask)
          newTask.close();
    } 
```

我想从父窗口添加一个事件处理程序到子窗口上的表单提交按钮，这样当有人提交表单（即他们完成添加）时，窗口将关闭。我所拥有的是：

```
 $("form", newTask.document).submit(function(){
       newTask.close();
    });
}); 
```

就其本身而言，它不起作用，但它不会引发任何错误。如果我打开 Chrome Inspector 并逐行运行以下命令，它的行为会略有不同：

```
1\. var newWin = window.open("/projects/new");

2\. $("form", newWin.document).submit(function(){
      newWin.close();
   }); 
```

我想我的问题是为什么它不起作用，除非我通过控制台逐行手动运行它，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:28:46.443

我已经想通了。当我尝试附加事件处理程序时，DOM 没有完全加载是一个问题。

```
if(newTask)
   newTask.onload = function(){
     $("input[type=submit]", newTask.document).click(function(){
        newTask.close();
     });
   }; 
```

下一个问题是我将如何“jQuery-ify”它？我不喜欢使用“el.onload”，但我似乎无法做出任何变化

```
$(newTask.document).ready(); 
```

或者

```
$(document, newTask).ready(); 
```

实际工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:19:11.973

问题是 newtask 是在父窗口中定义的，我认为您不能从子窗口访问它，因此最好的解决方案是在添加任务页面中预加载您的 javascript 事件。事件会略有不同：

```
$('#form').submit(function(){
    window.close();
}); 
```

此代码段应该已经包含在您的添加任务页面中。我希望这是有用的。

# visual-studio-2012 - 如何在 IIS Express 中使用域名而不是 localhost

> ID：15453418
> 
> 赞同：0
> 
> 时间：2013-03-16T19:04:14.927
> 
> 标签：visual-studio-2012, iis-express

我正在开发一个在 IIS Express 上运行的 VS 2012 上的 ASP.Net MVC 4 网站。在本地运行我的网站时，我希望看到`data.xyz.com`而不是`localhost/Data`在浏览器地址栏中。
我关注了其他几个关于 SO 的问题，主要是[这个](https://stackoverflow.com/questions/4709014/using-custom-domains-with-iis-express)。但是当我运行这个项目时，它说`Unable to launch the IIS Express Web server.Port '80' is in use.`

所以暂时，我正在使用端口 8080 让它工作，我不想这样做。我该如何解决？

更新：更多信息：
端口 80 上的 netstat 数据

```
TCP    0.0.0.0:80             0.0.0.0:0              LISTENING
TCP    [::]:80                [::]:0                 LISTENING 
```

无法获取任一进程的所有权信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:33:03.440

是 SSRS 在端口 80 上侦听。必须关闭该进程才能在端口 80 上运行我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:06:47.170

你应该找到谁在使用 80 端口，我猜你也安装了完整的 IIS？试着打开`http://localhost:80`看看谁会回应这个请求。

# latex - 在 LaTeX 中，如何故意将一个单词放在段落最后一行的右边框？

> ID：15453424
> 
> 赞同：0
> 
> 时间：2013-03-16T19:04:32.497
> 
> 标签：latex

例如，我有这样一段：

```
a bb ccc cc cc d |

dddd eee ff 
```

现在我想在最后一行的右边框添加一个单词 END，使它看起来像这样：

```
a bb ccc cc cc d |

dddd eee ff______|END 
```

下划线起到了\hfill 填充水平空间的作用，而END 一词放在段落的右边框**之后**（所以\hfill 本身是不够的）。

有时当一行中的一个不可破坏的单词太长时，LaTeX 无法分割该行，一些字母会出现在右边框之外。这通常不好看。但是，现在我故意要达到这个效果。

请注意，我不是在询问边注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:37:24.433

您可以使用文本左对齐的零宽度框。这是一个工作示例（使用lipsum 包获取一些虚拟文本）：

```
\documentclass{article}
\usepackage[nopar]{lipsum}
\begin{document}
\lipsum[1]\hfill\rlap{\hspace*{1em}END}
\end{document} 
```

您可能需要调整或省略`\hspace*{1em}`END，具体取决于您希望 END 与右侧文本边距的接近程度。

# jquery - 无需为每个用户创建 .html 的动态 URL

> ID：15453440
> 
> 赞同：4
> 
> 时间：2013-03-16T19:05:48.320
> 
> 标签：jquery, html, ajax, dynamic

我正在创建一个类似于 oc.tc 的网站。网站系统，而不是内容。无论如何，如果您注意到如何执行 oc.tc/itunes89（或 oc.tc/anyregistereduser），我想知道该怎么做。我不认为有为每个人创建页面，我认为有动态地这样做。

*我已经创建了一个系统，比如 username=user 和 id=12。我想知道如何在不触发 404 错误的情况下做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:11:50.793

你在用阿帕奇吗？

如果是这样，欢迎来到 Apache 的 mod_rewrite 的奇妙世界。（[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）

这是基本概念：您定义将URL“重写”`oc.tc/itunes89`为`oc.tc/show_user.php?username=itunes89`（或您想要的任何内容）的规则。

这是一个很好的 mod_rewrite 指南：[http](http://www.sitepoint.com/guide-url-rewriting-2/) ://www.sitepoint.com/guide-url-rewriting-2/ 。让我知道您是否有具体的问题或实施它的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:21:51.267

对于 Apache Tomcat，如果将 servlet 映射到特定的 URL 模式，然后显示正确的页面，就可以执行此类操作。可以在[此处](http://keyboardsamurais.de/2003/11/29/tomcat_tutorial_helloworld_for_complete_fools_/)找到显示示例的教程。连同 JSPServlet 的源代码（[此处](http://svn.apache.org/repos/asf/tomcat/trunk/java/org/apache/jasper/servlet/JspServlet.java)），您可以将您自己的 servlet 组合在一起，以实现您想要的功能。我认为用于检索路径的方法是 HttpRequest.getServletPath() 和 HttpRequest.getPathInfo()，但您最好尝试理解我指向的源代码（service(..) 方法是调用时调用的方法您访问 servlet）。

# java - JavaFx 2.0 主窗口关闭，尽管事件被消耗

> ID：15453442
> 
> 赞同：0
> 
> 时间：2013-03-16T19:06:09.147
> 
> 标签：java, javafx-2

如果有未保存的更改，我想阻止我的应用程序（类`Foo`）在用户单击窗口关闭控件（窗口框架中的“X”）后关闭。遵循此处和其他地方的提示，我已经`Foo`实施`EventHandler<WindowEvent>`. 该`handle()`方法向控制器查询未保存的更改，如果找到，则使用该事件。结构如下所示。

```
public class Foo extends Application implements EventHandler<WindowEvent> {

  @Override
  public void start(Stage stage) throws Exception {
    FXMLLoader loader = new FXMLLoader(getClass().getResource("Foo.fxml"));
    Parent root = (Parent) loader.load();
    controller = (FooController) loader.getController();
    Scene scene = new Scene(root);
    stage.setScene(scene);
    stage.setOnCloseRequest(this);  // handle window close requests
    stage.show();
  }

  @Override
  public void handle(WindowEvent t) {
    if (t.getEventType() == WindowEvent.WINDOW_CLOSE_REQUEST) {
      if (controller.isDirty()) {
        t.consume();
      }
    }
  }
} 
```

使用打印语句和调试器，我确认处理程序触发并且事件被消耗。我还确认该`Application.stop()`方法永远不会被调用。尽管如此，一旦`handle()`退出，窗口就会关闭。（不过，应用程序的线程仍在运行。）对于它的价值，应用程序只是一个存根：绘制了场景，但没有菜单项或控件功能，它没有创建额外的线程等。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:09:57.623

我刚刚写了一个小测试应用程序。使用该事件确实会阻止窗口关闭。查看您发布的代码，我不知道为什么它对您不起作用。您可以...吗

a) 说明您正在使用的 JavaFX 版本 ( `System.out.println(com.sun.javafx.runtime.VersionInfo.getRuntimeVersion());`) 和

b）运行下面的代码并告诉我这是否适合您？

我试图找出它是 JavaFX 中的错误还是您的应用程序中的某些副作用。

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.stage.Stage;
import javafx.stage.WindowEvent;

public class Test extends Application {
    @Override
    public void start(final Stage stage) throws Exception {
        stage.setOnCloseRequest(new EventHandler<WindowEvent>() {
            public void handle(final WindowEvent windowEvent) {
                windowEvent.consume();
            }
        });
        stage.show();
    }

    public static void main(String[] args) {
        Application.launch(args);
    }
} 
```

# iphone - 在项目中嵌入项目？

> ID：15453443
> 
> 赞同：2
> 
> 时间：2013-03-16T19:06:12.497
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我有一个项目将分叉 4 个不同的应用程序供我公司内部使用。

主要项目核心是一样的。我最初想创建一个包含 4 个目标的大型应用程序，但我希望将引擎与目标分开，这样一些团队可以只使用引擎，而其他程序员可以使用每个目标。

有人告诉我，我可以将一个项目嵌入到一个项目中，如果我可以将所有目标通用的引擎部分嵌入到一个更大的项目中，我将拥有 4 个目标，那将很有用。

是否可以？

我怎么做？是否有任何教程可以解释如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:37:59.587

是的，有可能 。我创建了一个包含 6 个不同目标的项目。好吧，在这里您可以将通用类添加到所有目标中，而执行与特定目标相关的不同或独特功能的类可以添加到相应的目标中。我不明白您说引擎应该通用的部分（只需在所有目标中添加公共类）。在 iOS 中，你的意思是引擎，我想是 AppDelegate 类。

您必须通过为预处理器标志和其他 C 标志的构建设置提供值来添加预处理器指令，以识别引擎（AppDelegate）的目标并相应地自定义功能。

但是，当大多数事情在每个目标之间是通用的并且需要对其他目标进行很少的定制时，实现这样的概念是明智的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:44:16.387

我认为现有的答案和评论将几个应该不同的东西混合在一起，因此我的答案......

请注意，我故意省略了您的应用程序项目的多个目标部分，因为您似乎已经想通了。我的回答集中在构建库的子项目的使用上。

> 有人告诉我，我可以将一个项目嵌入到一个项目中，如果我可以将所有目标通用的引擎部分嵌入到一个更大的项目中，我将拥有 4 个目标，那将很有用。

正确，子项目是 Xcode 的一个很好的特性。为此，您可能需要首先创建一个使用静态库模板的项目。

![在此处输入图像描述](../Images/986e61f4e00eae5b45c010fde49467e0.png)

现在将创建核心引擎所需的所有文件添加到该新项目中。我将进一步将此称为您的引擎库项目。

完成后，创建一个新项目来创建您的应用程序 - 您当然也可以只使用现有项目，但请确保从该项目中删除所有引擎实现文件（以防止链接器错误）。

我现在假设您创建了两个项目，您的引擎库项目和您的应用程序项目。

现在是组合部分。首先，确保 engine-library-project 已关闭，并确保 app-project 在 Xcode 中打开。

现在将引擎库项目包 (.xcodeproj) 从您的 finder 直接拖到应用程序项目中。

![在此处输入图像描述](../Images/73158d94ef491bd920a2f34b8bdc4953.png)

现在您需要确保您的应用程序项目链接到引擎库。***为此，您需要点击Link Binary With Libraries***选项卡底部的小加号。

![在此处输入图像描述](../Images/d69c5428f59ee485a74ab52e016987b2.png)

弹出的选择对话框应将您的库列为第一个选项。

![在此处输入图像描述](../Images/5f3f665cee4c42e09b7fa29b51ed0d73.png)

***现在，通过将所有引擎库标头添加到Header Search Paths***来确保您的应用项目可以看到所有引擎库标头。

![在此处输入图像描述](../Images/e4a7882ab9c527a26f11bbb916187ad2.png)

如果你做的一切都正确并且我没有遗漏一个重要的步骤（对不起，如果我遗漏了），那么你的应用程序现在应该使用库子项目构建得非常好。

正确完成所有这些步骤后，您可能还想研究将引擎库分发给其他开发人员的选项。您可以在源项目上使用 git-submodule，但您也可以仅在生成的库上使用 git-submodule。这样，没有其他开发人员能够摆弄您的引擎库，这有时（通常根据我的经验）是一件好事。

# sql - SQL 触发器不起作用

> ID：15453446
> 
> 赞同：1
> 
> 时间：2013-03-16T19:06:29.293
> 
> 标签：sql, postgresql, triggers, plpgsql

```
CREATE TABLE lab7.standings
(
    team_name    VARCHAR(100) NOT NULL PRIMARY KEY,
    wins         INTEGER,
    losses       INTEGER,
    winPct       NUMERIC,
    CHECK(wins > 0),
    CHECK(losses >0)
);

CREATE OR REPLACE FUNCTION
calc_winning_percentage()
RETURNS trigger AS $$
BEGIN
    New.winPct := New.wins /(New.wins + New.losses);
    RETURN NEW;
END;
$$LANGUAGE plpgsql;

CREATE TRIGGER
update_winning_percentage
AFTER INSERT OR UPDATE ON standings
FOR EACH ROW EXECUTE PROCEDURE calc_winning_percentage(); 
```

这准确地更新了我的积分表中的胜利，但似乎没有发送我新计算的获胜百分比。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:03:55.453

除了将触发器更改为`BEFORE`@Grijesh[指出的那样](https://stackoverflow.com/a/15453483/939860)：

我在您的表定义中注意到*三件事：*

### 1.`integer`对比`numeric`

`wins`和`losses`是 类型[**`integer`**](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)， 但`winPct`是[**`numeric`**](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)。

尝试以下操作：

```
SELECT 1 / 4, 2 / 4 
```

给你`0`两次。结果是类型的`integer`，小数位被**截断为零**。这发生在您的触发器函数中*，然后*在分配`integer`中强制执行结果。`numeric`因此，仅影响小数位的变化`wins`会`losses`丢失在结果中。通过以下方式解决此问题：

.. 要么将**列定义**更改`numeric`为基表中所有涉及的列。
..或更改触发功能：

```
NEW.winPct := NEW.wins**::numeric** / (NEW.wins + NEW.losses);
```

将计算中的数字之一转换为`numeric`( `::numeric`) 会强制结果为`numeric`并保留小数位数。

我**强烈建议**使用*第二个*变体，因为`integer`显然是`wins`and的正确类型`losses`。如果您的百分比不必非常精确，我还会考虑使用普通[*浮点类型*（`real`或`double precision`）](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)作为百分比。然后您的触发器可以使用：

```
NEW.winPct := NEW.wins**::float8** / (NEW.wins + NEW.losses);
```

### 2.不带引号的列名`winPct`

它被转换为小写，实际上只是`winpct`. 请务必阅读[PostgreSQL 中的标识符](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)。

### 3\. 架构

您的表显然存在于非标准模式中：`lab7.standings`. 除非包含在您的 中`search_path`，否则触发器创建必须使用模式限定名称：

```
...
BEFORE INSERT OR UPDATE ON **lab7.standings**
...
```

### 附言

去展示用这种问题发布你的表定义的重要性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:09:46.620

尝试这个：

```
CREATE TRIGGER update_winning_percentage
**BEFORE** INSERT OR UPDATE ON standings
FOR EACH ROW EXECUTE PROCEDURE calc_winning_percentage(); 
```

# sql-server - 如何在 Visual Basic 6.0 中使用 SQL Server Reporting Services 报表

> ID：15453453
> 
> 赞同：1
> 
> 时间：2013-03-16T19:07:10.083
> 
> 标签：sql-server, reporting-services, vb6, crystal-reports, reporting

我们在 VB6 中有一个应用程序，其中使用 Crystal Reports 8.5 创建报表 我们希望将报表迁移到 SSRS，但该应用程序将在 VB6 中保留一段时间。我已经搜索了一种在 SSRS 中从 vb6 打印电子报告的方法，没有任何好处。

任何想法？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:26:02.970

将报告输出导出为 Pdf 格式，然后使用 vb6 打印 pfd 输出。

此[链接](https://stackoverflow.com/questions/838937/exporting-pdf-in-reporting-services)将使用 ssrs 报告输出导出为 pdf 格式

# php - WP Ecommerce：修改销售时发送给管理员的交易报告电子邮件

> ID：15453458
> 
> 赞同：1
> 
> 时间：2013-03-16T19:07:35.637
> 
> 标签：php, wordpress, e-commerce

我正在寻找修改在出售商品时发送给管理员的交易结果电子邮件（包括和排除某些信息等），我在谷歌上进行了研究并查看了 wp-ecommerce 支持网站，但无法找到当前正在执行此操作的位置（许多对旧版本插件的引用，这些版本已经发生了重大变化）。我将继续寻找在哪里执行此操作，但由于我不精通 wp-ecommerce（或 wordpress），我不完全确定在哪里寻找。

如果有人能阐明这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T05:27:55.907

在 wp-e-commerce/wpsc-updates/updating_tasks.php 下

第 356-372 行是电子邮件部分所在的位置。

```
add_option('wpsc_email_receipt', '', __('Thank you for purchasing with %shop_name%, any items to be shipped will be processed as soon as possible, any items that can be downloaded can be downloaded using the links on this page.All prices include tax and postage and packaging where applicable.You ordered these items:%product_list%%total_shipping%%total_price%', 'wpsc'), 'yes');
add_option('wpsc_email_admin', '', __('%product_list%%total_shipping%%total_price%', 'wpsc'), 'yes');

if(get_option('wpsc_email_receipt') == '') {
    if(get_option('email_receipt') != '') {
        update_option('wpsc_email_receipt', get_option('email_receipt'));
    } else {
        update_option('wpsc_email_receipt', __('Thank you for purchasing with %shop_name%, any items to be shipped will be processed as soon as possible, any items that can be downloaded can be downloaded using the links on this page.All prices include tax and postage and packaging where applicable.You ordered these items:%product_list%%total_shipping%%total_price%', 'wpsc'));
    }
}
if(get_option('wpsc_email_admin') == '') {
  if(get_option('email_admin') != '') {
        update_option('wpsc_email_admin', get_option('email_admin'));
    } else {
        update_option('wpsc_email_admin', __('%product_list%%total_shipping%%total_price%', 'wpsc'));
    }
} 
```

如果您想更深入地了解整个电子邮件代码，也可以进入此部分

wp-电子商务/wpsc-includes/purchase-log-notification.class.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T06:06:09.400

我为此和许多其他 wp 电子商务功能创建了一个插件。使用[商店样式插件](http://haet.at/wp-e-commerce-shop-styling/)，您可以使用占位符修改交易报告以及来自 wordpress 后端的任何其他邮件，而无需修改任何插件文件。

# android - Android ImageView 拉伸

> ID：15453459
> 
> 赞同：0
> 
> 时间：2013-03-16T19:07:40.590
> 
> 标签：android, android-layout, android-linearlayout, android-imageview

我尝试将 ImageViews 添加到水平 LinearLayout。它们应该占据相同的空间，所以我将这些 ImageView 的权重设置为 1。它们按照我的预期进行了布局，但是图像被拉伸了。我将 scapeType 设置为中心。根据 center scaletype，它们不应该被拉伸，但它们是，这是我的问题。我的图像视图：

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:scaleType="centerInside"
    android:adjustViewBounds="true"/> 
```

这是我添加它们的地方：

```
 for (int i = 0; i < badges.size() && i < 4; i++) {
                Badge currentBadge = badges.get(i);
                ImageView view = (ImageView) inflater.inflate(R.layout.listitem_badge,
                        mBadgesContainer, false);
                view.setBackgroundResource(R.drawable.dummy_badge_medic);
                mBadgesContainer.addView(view);
            } 
```

线性布局：

```
 <LinearLayout
    android:id="@+id/container_badges"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/title_badges"
    android:orientation="horizontal" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:13:18.097

因为您正在设置**背景**，`ImageView`并且您可能有小图像`drawable`

尝试设置`src` `view.setImageResource(R.drawable.dummy_badge_medic);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:29:04.843

该属性`android:scaleType="centerInside"`仅适用于图像资源，不适用于背景。所以试试 MAC 给出的代码（[https://stackoverflow.com/users/1289716/mac](https://stackoverflow.com/users/1289716/mac)）。

# html - HTML5 画布绘图被覆盖

> ID：15453460
> 
> 赞同：0
> 
> 时间：2013-03-16T19:07:42.120
> 
> 标签：html, canvas, drawing

我有一个允许用户绘制各种形状的 HTML5 画布和一个允许用户徒手画的画笔功能。我正在为这些实现使用命令模式。我面临的问题是“撤消”功能。它适用于所有其他命令，但是当涉及到“画笔”时，它似乎存在问题。

画笔的工作方式是每次拖动鼠标都会存储点，一旦添加了新点，整个点数组就会在屏幕上重新绘制。只有当用户松开鼠标时，绘图才会停止。您可能会立即看到问题，点越旧，它们在屏幕上重绘的次数就越多。这会导致线条看起来比实际颜色深得多。

我的解决方案是仅将最后一个点 n-1 与点 n-2 连接起来，但实际上只重绘最后两个点。我不完全理解画布是如何工作的以及为什么这种方法不起作用但重绘顶部点似乎有效......

这是一些概述关键部分的代码。

```
BrushStrat.prototype.mousemove=function(event){
    if(this.command!=null){
            //add this point to the list
        this.command.addPoint({x:event.canvasX, y:event.canvasY});
            //redraw all points
        this.command.draw(this.paint.context);
    }
}

BrushCommand.prototype.draw=function(context){
    if(this.points.length==0){
        return;
    }

    context.beginPath(); 
    context.strokeStyle = this.strokeStyle;
    context.lineWidth=this.lineWidth;
    //start from the first point
    context.moveTo(this.points[0].x,this.points[0].y);
    //redraw all subsequent points
    for(var i=1;i<this.points.length;i++){
        context.lineTo(this.points[i].x, this.points[i].y);
    }
    context.stroke();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:11:58.330

在重绘每个数组点之前，清除画布或至少绘图区域。

**编辑** 是的对不起，我以为你有一个游戏循环。但是，它仍然是一个有效的选项：使用两个画布作为绘图区域。一个用于绘制“当前”形状/曲线（在绘制每个点之前清除）和另一个具有所有已完成形状/曲线的持久层。

回顾一下，当用户单击并拖动此形状时，此形状将绘制到当前图层。当用户释放鼠标时，图像现在被“锁定”并传输到持久层。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:52:16.683

**使用命令模式的手绘笔触**

您在实施“命令模式”来跟踪用户的自由式笔触方面做出了很好的选择！

mouseDown 和 mouseUp 之间的每个绘图都被视为一个“拖动组”。

每个“拖动组”都添加到一个主数组 (CommandStack[])。

然后，您可以通过简单地删除 CommandStack[] 上的最后一个组来轻松地撤消最后一个绘图。

这是用户在拖动周期中发生的情况：

鼠标按下：

*   设置这组拖动线的起始 X、Y。
*   创建一个新的点数组，专门用于这组拖线 (newPoints[])

鼠标移动：

*   将每个鼠标位置点添加到 newPoints[]。

鼠标向上：

*   拖拽结束--停止向newPoints[]添加点。
*   将起始 X、Y 和 newPoints[] 都存储到 CommandStack[] 数组中。

然后，您可以简单有效地撤消笔划：

*   像这样从 CommandStack[] 中删除最后一个 newPoints[]：CommandStack.pop()
*   重绘 CommandStack[] 中的所有剩余笔划。
*   绘图在视觉上与用户最后一笔画之前相同（快速+高效）！
*   您可以通过从 CommandStack[] 中执行更多弹出来删除更多行。
*   您还可以通过保存弹出的 newPoints[] 轻松实现 REDO。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/nUbzS/](http://jsfiddle.net/m1erickson/nUbzS/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var lastX;
    var lastY;
    var strokeColor="red";
    var strokeWidth=2;
    var canMouseX;
    var canMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var isMouseDown=false;

    // command pattern -- undo
    var commandStack=new Array();
    var newStart;
    var newPoints=new Array();

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#downlog").html("Down: "+ canMouseX + " / " + canMouseY);

      // Put your mousedown stuff here
      lastX=canMouseX;
      lastY=canMouseY;
      isMouseDown=true;
      // command pattern stuff
      newStart={x:canMouseX,y:canMouseY};
      newPoints=new Array();
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#uplog").html("Up: "+ canMouseX + " / " + canMouseY);

      // Put your mouseup stuff here
      isMouseDown=false;
      // command pattern stuff
      commandStack.push({moveTo:newStart,points:newPoints});
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#outlog").html("Out: "+ canMouseX + " / " + canMouseY);

      // Put your mouseOut stuff here
      isMouseDown=false;
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#movelog").html("Move: "+ canMouseX + " / " + canMouseY);

      // Put your mousemove stuff here
      if(isMouseDown){
          ctx.beginPath();
          ctx.moveTo(lastX,lastY);
          ctx.lineTo(canMouseX,canMouseY);
          ctx.stroke();     
          lastX=canMouseX;
          lastY=canMouseY;
          // command pattern stuff
          newPoints.push({x:canMouseX,y:canMouseY});
      }
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});

    $("#undo").click(function(e){ undoLast(); });

    function undoLast(){
        commandStack.pop();
        redrawAll();
    }

    function redrawAll(){

        // prep for commandStack redraws
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.save()
        ctx.strokeStyle="blue";
        ctx.beginPath();

        // loop through the commandStack and draw all nodes
        for(var s=0;s<commandStack.length;s++){

            // move to the starting point of this node
            var start=commandStack[s].moveTo;
            ctx.moveTo(start.x,start.y);

            // draw each line segment in this node
            var pts=commandStack[s].points;

            for(var p=0;p<pts.length;p++){
                ctx.lineTo(pts[p].x,pts[p].y);
            }  // end for(p)

        } // end for(s)

        // actually draw the lines
        ctx.stroke();

    ctx.restore();

    }

}); // end $(function(){});
</script>

</head>

<body>

    <p id="downlog">Down</p>
    <p id="movelog">Move</p>
    <p id="uplog">Up</p>
    <p id="outlog">Out</p>
    <canvas id="canvas" width=300 height=300></canvas>
    <button id="undo">Undo</button>

</body>
</html> 
```

# c# - 如何从另一个 WPF 表单在 WPF 中设置 TextBox 或 Label 文本

> ID：15453464
> 
> 赞同：2
> 
> 时间：2013-03-16T19:08:08.367
> 
> 标签：c#, wpf, binding, textbox, label

我`TextBox`在 C# 中更新 WPF 表单中的文本时遇到问题。我以编程方式创建了新表单并添加了 one`Label`和 one `TextBox`，并且我有一个变量 temp ，它代表我之前创建的某个缓冲区中的一些字符串。但是，当我尝试将文本设置为标签或文本框时，什么也没发生。但是，我可以以新形式更改窗口标题。

我的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace BufferProba
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        BufferStream bfStream = new BufferStream();

        private static Action EmptyDelegate = delegate() { };

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {

            Thread t = new Thread(SetText);
            t.SetApartmentState(ApartmentState.STA);
            t.IsBackground = true;
            t.Start();

        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            bfStream.put(tBox.Text.Trim());
            tBox.Text = "";
        }

        public void SetText()
        {
            Thread.Sleep(5000);

            Window myWindow = new Window();
            StackPanel stackPanel = new StackPanel { Orientation = Orientation.Vertical };
            TextBox tboxForm = new TextBox();
            Label szzr = new Label { Content = "" };
            stackPanel.Children.Add(szzr);
            stackPanel.Children.Add(tboxForm);
            myWindow.Content = stackPanel;
            List<String> listaStringova = new List<String>();

            while (true)
            {
                Thread.Sleep(5000);

                String temp = bfStream.get();
                listaStringova.Add(temp);

                if (temp != "0")
                {
                    //Console.WriteLine(temp);
                   myWindow.Title = temp;
                   szzr.Content = temp;
                   szzr.Background = new SolidColorBrush(Colors.Orange);
                   szzr.UpdateLayout();
                   tboxForm.Text = temp;
                   myWindow.Show();

                }
                else { 
                    MessageBox.Show("Jebiga");
                }

            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:35:53.523

您需要确保访问 TextBox 的是 UI 线程。使用 Dispatcher.CheckAccess 方法，如果它返回 false，则 BeginInvoke 一个 UI 线程。您应该能够使用此信息在网络上找到大量示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:45:47.233

您应该在主线程上运行它。您可以使用 Dispatcher 执行相同的示例：

```
System.Windows.Application.Current.Dispatcher.Invoke(new Action(SetText())) 
```

# symfony - Symfony2 中 Twig 的特定动态嵌入路径

> ID：15453465
> 
> 赞同：0
> 
> 时间：2013-03-16T19:08:19.853
> 
> 标签：symfony, twig

(a) 一个包（包 1）包含主要的父 Twig 模板。

(b) 另一个包（包 2）包含一个控制器负载，这些控制器每个都呈现该包（包 2）内的 Twig 模板。该模板也从上面提到的主要父模板（捆绑 1）扩展而来。硬编码到主父模板的绝对路径很好。

(c) 父模板（在包 1 内）还嵌入/包含另一个模板，该模板存储在另一个包（包 2）中。

我可以为上面的 (c) 部分设置一个相对路径，以便如果我创建另一个包（包 3）它会自动工作（父模板包括调用它的包中的模板）？它会选择主父节点，因为它是绝对路径，但它会选择上面的 (c) 部分吗？显然，我不能为父模板嵌入/包含的模板使用绝对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:56:13.583

如果我理解正确，您是在问如何轻松扩展模板，同时具有从一个捆绑包到另一个捆绑包的依赖关系。

我建议您阅读有关[覆盖捆绑模板](http://symfony.com/doc/current/book/templating.html#overriding-bundle-templates)的文档。

阅读本文后，您会注意到一个指向 [捆绑继承文档] 的链接。

例如，我们有 3 个具有明确名称的包： - GenericSiteBundle - GenericUserBundle - SpecificSiteBundle

我们想为一个应用程序创建一个可以被其他应用程序使用的通用结构，我们也希望它们不同，因此我们需要能够更改布局（页眉、页脚、列等）。

模板结构类似于`GenericUserBundle:Security:login.html.twig`extends `GenericSiteBundle:Layout:simple.html.twig`。

您希望用特定的布局更改简单的布局；您需要做的就是声明`GenericSiteBundle`为`SpecificSiteBundle`和 create的父级`SpecificSiteBundle:Layout:simple.html.twig`。确保只有包名称不同，否则将无法在子包中找到模板。

此外，您会喜欢这个[parent() 树枝函数](http://twig.sensiolabs.org/doc/functions/parent.html)。它允许您获取父块的内容并将其添加到子块中。

这不是您想要做的，而是处理继承的正确方法。

# java - 编码字符串的 Http 获取/发布

> ID：15453466
> 
> 赞同：1
> 
> 时间：2013-03-16T19:08:20.073
> 
> 标签：java, android, base64, inputstream

我对发送和获取图像的编码数据有疑问。首先，我将图像作为字符串中的 Base64 编码类型，该字符串具有如下值： **...D/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZ ...**

现在，如果我再次解码并且如果我使用 BitmapFactory 来适应 imageview 那就没问题了，图像就可以了。

```
byte[] bytes= stream.toByteArray();                               
imagestr=Base64.encodeBytes(bytes).toString();
//If i code below it is working
byte[] decode = Base64.decode(imagestr);
decoded = BitmapFactory.decodeByteArray(decode, 0, decode.length);

//If i send to the server and handle it in servlet file
String pic = request.getParameter("p");
byte[] servdec = Base64.decode(pic);
//and if i use the servdec to output a image file file is corrupted.
//I noticed the pic and imagestr are different 
//imagestr = **...D/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZ...**
//pic      = **...D/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko MzZ...**
//pic has no + sign. 
```

我使用了replaceAll，但这仅适用于这种情况。它可能会导致更多的问题。所以有什么解决办法吗，谢谢你的回答。。。

嗨，这个字符串在这个函数的 pic 中，这个函数 servlet 将处理这个！pic 在这个函数中有 + 符号
public String uuidfaceid(String uuid,String faceid, String name,String pic){

```
URL url = null;

try {

url = new 
```

URL("http://"+Constants.SERVER_NAME+Constants.SERVER_PORT+"/MeetInTouch/UF"+"?uuid="+uuid+"&faceid="+faceid+"&name="+name+"&pic="+pic);

```
} catch (MalformedURLException e1) {

e1.printStackTrace();

}

URLConnection ucon = null;

try {

ucon = url.openConnection();

} catch (IOException e1) {

e1.printStackTrace();

}

try {

ucon.connect();

} catch (IOException e1) {

e1.printStackTrace();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:23:26.787

包含 Base64 编码字符串的“p”参数在某个时候已经“url 解码”。您所要做的就是在尝试解码 Base64 之前再次对其进行编码：

```
String pic = request.getParameter("p");
pic = URLEncoder.encode(pic, "ISO-8859-1");
byte[] servdec = Base64.decode(pic); 
```

# c - 打印不带尾随零的浮点数/双精度数？

> ID：15453470
> 
> 赞同：6
> 
> 时间：2013-03-16T19:08:44.553
> 
> 标签：c

有几个与此相关的问题，但我还没有看到一个正确回答这个问题的问题。我想打印一个浮点数，但我希望小数位数是自适应的。举个例子：

```
0      -> 0
1234   -> 1234
0.1234 -> 0.1234
0.3    -> 0.3 
```

令人讨厌的是，说明`%f`符只会打印到固定的精度，因此它将在所有未达到该精度的数字上添加尾随零。有些人建议使用`%g`说明符，它适用于一组数字，但它会切换到一些数字的科学记数法，如下所示：

```
printf("%g", 1000000.0); // prints 1e+06 
```

如何在没有不必要的零的情况下打印浮点数，同时仍然保持 printf 对实际具有小数分量的数字的标准精度？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T19:25:18.360

用于`snprintf`打印到临时缓冲区，然后`'0'`手动删除尾随字符。没有其他方法既正确又易于实施。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T19:44:07.313

问题是使用 IEEE 标准 754 表示，浮点值（带有小数部分）永远不能有“尾随零”。

尾随零表示小数值可以写成`x/10^n`某些整数 x、n。但是这个标准唯一可以表示的分数具有`x/2^n`某些整数 x、n 的形式。

所以你写的 0.1234 用字节 0x3D 0xFC 0xB9 0x24 表示。这是：

```
Sign = 0
Exponent = 01111011 (which means -4)
Significand: 1.11111001011100100100100 
```

有效数字表示：1 + 1/2 + 1/4 + 1/8 + 1/16 + 0/32 + 0/64 + 1/128 + 0/256 + 1/512 + 1/1024 + 1/2048 + 0/4096 + 0/8192 + ...

如果执行此计算，您将得到 1.974400043487548828125。

所以数字是`+ 1.974400043487548828125 * 2^(-4)`=`0.1234000027179718`

（当然，我是用电脑计算的，所以它可能出于同样的原因关闭......）

如您所见，计算机不想为您决定要在 4 位（仅）而不是 9 位（0.123400002）之后砍掉这个数字。关键是计算机不会将此数字视为 0.1234 并带有无限数量的尾随零。

所以我认为没有比 R.'s 更好的方法了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T19:23:43.903

尝试：

```
printf("%.20g\n", 1000000.0); // = 1000000 
```

这将在 20 位有效数字后切换到科学记数法（默认为“%g”的 6 位数字之后）：

```
printf("%.20g\n", 1e+19); // = 10000000000000000000
printf("%.20g\n", 1e+20); // = 1e+20 
```

但要小心双精度：

```
printf("%.20g\n", 0.12345);   // = 0.12345000000000000417
printf("%.15g\n", 0.12345);   // = 0.12345 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:52:50.360

我使用已经提到的方法自己编写了一个小函数来执行此操作，这里是使用测试仪。我不能保证它没有错误，但我认为这很好。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

char *convert(char *s, double x);

int main()
{
    char str[3][20];
    printf("%s\n%s\n%s\n", convert(str[0], 0),
          convert (str[1], 2823.28920000),
          convert (str[2], 4.000342300));

}

char *convert(char *s, double x)
{
    char *buf = malloc(100);
    char *p;
    int ch;

    sprintf(buf, "%.10f", x);
    p = buf + strlen(buf) - 1;
    while (*p == '0' && *p-- != '.');
    *(p+1) = '\0';
    if (*p == '.') *p = '\0';
    strcpy(s, buf);
    free (buf);
    return s;
} 
```

输出：

```
0
2823.2892
4.0003423 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T19:11:51.820

你可以这样打印：

```
printf("%.0f", 1000000.0); 
```

如需更详细的答案，请查看[此处](http://www.cplusplus.com/reference/cstdio/printf/)。

# php - 如何在突出显示关键字的函数中支持引号

> ID：15453471
> 
> 赞同：0
> 
> 时间：2013-03-16T19:08:45.910
> 
> 标签：php, regex, preg-match, match, preg-match-all

我有这个突出关键字的功能。它工作得很好，但它似乎不适用于单引号和双引号。

```
function highlight($input, $keywords) {

    // Hello Mr Regex
    preg_match_all('~\w+~', $keywords, $match);

    // If there's no match
    if(!$match) { return $input; }

    // Case sensitive search
    //$result = '~\\b(' . implode('|', $match[0]) . ')\\b~';

    // Case insenstive search
    $result = '~\\b(' . implode('|', $match[0]) . ')\\b~i';

    // Return highlighted text
    return preg_replace($result, '<strong>$0</strong>', $input);

} 
```

`$keywords = "just another what's little's test";`

`$input = "here what what's just looking little's another's this's for another one that requires a test";`

* * *

结果：*这里**什么只是**看起来**很少的****另一个****是**另一个需要**测试**的*

 ***** * *

在此示例中，不应突出显示***this 上***的***'s***

 *** * *

我也尝试过同时使用`htmlspecialchars()`输入和关键字，但这似乎也不匹配。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:16:27.573

`\w`只有字母、数字和下划线。如果要包含引号或撇号，可以创建一个字符类：

```
preg_match_all('~[\w\'"]+~' ... 
```******

# java - Java InputStream 的 read(byte[]) 方法

> ID：15453472
> 
> 赞同：2
> 
> 时间：2013-03-16T19:08:48.567
> 
> 标签：java, io

首先是一些背景。它不需要回答实际问题，但也许它会有助于正确看待事情。

我在 java (h) 中编写了一个 mp3 库，它读取存储在 .mp3 文件中 ID3 标记中的信息。有关歌曲的信息，如歌曲名称、歌曲发行的 CD、曲目编号等，都存储在 .mp3 文件开头的这个 ID3 标签中。

我已经在位于我本地硬盘上的 12,579 个 mp3 文件上测试了该库，并且它运行良好。没有一个 IO 错误。

当我在 mp3 文件位于 Web 服务器上执行相同的操作时，我收到一个 IO 错误。好吧，实际上不是错误。实际上，这是 InputStream 的 read(byte[]) 方法的行为不同。

下面的示例将说明问题，当我尝试从 mp3 文件中读取图像文件（.jpg、.gif、.png 等）时会发生此问题。

```
// read bytes from an .mp3 file on your local hard drive
// reading from an input stream created this way works flawlessly
InputStream      inputStream = new FileInputStream("song.mp3");

// read bytes from an .mp3 file given by a url
// reading from an input stream created this way fails every time.
URL               url            = "http://localhost/song.mp3");
HttpURLConnection httpConnection = (HttpURLConnection)url.openConnection();
httpConnection.connect();
InputStream       inputStream    = url.openStream();

int    size         = 25000;            // size of the image file 
byte[] buffer       = new byte[size];
int    numBytesRead = inputStream.read(buffer);

if (numBytesRead != buffer.length)
   throw new IOException("Error reading the bytes into the buffer.  Expected " + buffer.length + " bytes but got " + numBytesRead + " bytes"); 
```

所以，我的观察是：调用 inputStream.read(buffer); 当输入流是 FileInputStream 时，总是读取全部字节数。但是当我使用从 http 连接获得的输入流时，它只会读取部分数量。

因此我的问题是：一般来说，我不能假设 InputStream 的 read(byte[]) 方法会阻塞，直到读取了全部字节数（或达到 EOF）？也就是说，我是否假设 read(byte[]) 方法的行为不正确，并且我刚刚幸运地使用了 FileInputStream？

InputStream.read(byte[]) 的正确和一般行为是否需要将调用置于循环中并继续读取字节，直到读取所需的字节数或达到 EOF？类似于下面的代码：

```
int    size        = 25000;
byte[] buffer      = new byte[size];
int numBytesRead   = 0;
int totalBytesRead = 0;

while (totalBytesRead != size && numBytesRead != -1)
{
   numBytesRead    = inputStream.read(buffer);
   totalBytesRead += numBytesRead
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:23:38.437

您的结论是合理的，请查看以下文档[`InputStream.read(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)：

> 从输入流中读取一些字节并将它们存储到缓冲区数组 b. 实际读取的字节数以整数形式返回。在输入数据可用、检测到文件结尾或引发异常之前，此方法会一直阻塞。

不能保证`read(byte[])`会填充您提供的数组，只是它会读取至少 1 个字节（假设您的数组的长度 > 0），或者它将返回 -1 以指示 EOS。这意味着如果要`InputStream`正确读取字节，则必须使用循环。

您当前拥有的循环中有一个错误。在循环的第一次迭代中，您会将一定数量的字节读入缓冲区，但在第二次迭代中，您将覆盖部分或全部这些字节。看看[`InputStream.read(byte[], int, int)`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5B%5D,%20int,%20int%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T19:24:36.633

> 因此我的问题是：一般来说，我不能假设 InputStream 的 read(byte[]) 方法会阻塞，直到读取了全部字节数（或达到 EOF）？

不，这就是为什么[文档](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)说“实际读取的字节数”和“尝试读取至少一个字节”的原因。

> 我需要将调用置于循环中并继续读取字节，直到读取所需的字节数

[您可以在Jakarta Commons IO](http://commons.apache.org/proper/commons-io//javadocs/api-2.4/org/apache/commons/io/IOUtils.html)获得已经测试过的轮子，而不是重新发明轮子。

# html - 如何将多个 div 标签相互放置

> ID：15453474
> 
> 赞同：0
> 
> 时间：2013-03-16T19:08:52.867
> 
> 标签：html, css, position

我在将 3 个不同的 div 标签放在一起时遇到问题。最初它们假设重叠，但实际上它们位于彼此下方，我试图避免这种情况。

有人可以建议我如何将所有 3 个定位在一个点上吗？

这是我使用的 CSS：

```
#menudiv{
height:225px;
width:900px;
background-image:url(images/menu1.jpg);
}

#menudiv2{
height:225px;
width:900px;
background-image:url(images/menu3.jpg);
visibility:hidden;
}

#menudiv3{
height:225px;
width:900px;
background-image:url(images/menu2.jpg);
visibility:hidden;
 }

#tableMenuDiv{
position:absolute;
width:100px;
height:225px;
left:53px;
top:137px;
 } 
```

这是一个 html 代码，我将它们放在页面中：

```
<td width="900px" align="left">

<div id="menudiv"></div>
<div id="menudiv2"></div>
<div id="menudiv3"></div>

<div id="tableMenuDiv">
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:10:36.973

您需要将 div 带出正常流程，而不是将其可见性设置为隐藏。通过设置`position: absolute;`它们来做到这一点。

# java - 我的布尔方法 java

> ID：15453476
> 
> 赞同：2
> 
> 时间：2013-03-16T19:09:04.317
> 
> 标签：java, methods, boolean

我已经做了很多寻找这个问题的答案，并进行了一些编辑，但我无法让它工作。我认为我的布尔方法 getColor() 有问题。我试图在不同类的循环中使用它。

我的 getColor 方法，来自 AvatarPanel 类

```
 public boolean setColor(boolean good)
{

    if (good == true)
        what--;
        avatars.get(0).setBackground(colors.get(what));
    repaint();
    if (good == false)  
        what++;
        avatars.get(0).setBackground(colors.get(what));
    repaint();

    return good;
} 
```

这是我尝试在其中使用 getColor 的 Background 类中的 attackPerformed 方法。我不确定我是否写错了其中一个方法，或者 attackPerformed 是否需要一个侦听器。游戏仍然正常运行并且工作正常。我只是想要一些帮助，以确保这些至少写得正确。

我认为显示背景构造函数可能是一个好主意，因为我认为它需要调用attackPerformed。我不知道我需要在哪里调用attackPerformed，尽管我很确定它会在后台构造函数中。attackPerformed 方法如下所示，构造函数在顶部。

```
public class Background extends JPanel implements Constants, ActionListener
{
   private static final long serialVersionUID = 1L;

   private final Color BACK_COLOR = Color.GRAY;

   private ArrayList<Sprite> sprites;

   private Avatar avatar;

   /** Constructor  */
   public Background()
   {

       sprites = new ArrayList<Sprite>();
       reset(0);
       setBackground(BACK_COLOR);

       KeyboardFocusManager manager =KeyboardFocusManager.getCurrentKeyboardFocusManager();
       manager.addKeyEventDispatcher(new KeyEventDispatcher()
       {
        public boolean dispatchKeyEvent(KeyEvent event)
        {
            int x = 0, y = 0;
            double angle = 0;
            Point p = avatar.getPosition();

            switch (event.getKeyCode())
            {
            case KeyEvent.VK_DOWN:
                y=6;
                angle=270;
                break;

            case KeyEvent.VK_UP:
                y = -6;
                angle = 90;
                break;

            case KeyEvent.VK_LEFT:
                x = -6;
                break;

            case KeyEvent.VK_RIGHT:
                x = 6;
                angle = 180;
                break;
            }

            avatar.setParameters();
            p.x += x;
            p.y += y;
            avatar.setPosition(p);
            avatar.setAngle(angle);

            if (!getBounds().contains(avatar.getBounds()))
            {
                avatar.restore();
                Toolkit.getDefaultToolkit().beep();
                return true;
            }
            repaint();
            return true;            
        }

    });
    Timer timer = new Timer(15, this);
    timer.start();

} //end of constructor  

public void attackPerformed()
{
    for(Sprite s : sprites)
    {
        AvatarPanel panel = new AvatarPanel();
        Rectangle r = new Rectangle(sprites.get(0).getBounds());
        Rectangle p = new Rectangle(sprites.get(1).getBounds());

            if(r.intersects(p))
            {
                panel.setColor(false);
            }               
    }   
}

public void actionPerformed(ActionEvent e)
{
    for (Sprite s : sprites)
    {
        if (s instanceof Move)
        {
            s.setParameters();
            for (int i=0; i<3; i++)
            {
                ((Move)s).nextPosition();
                if (!getBounds().contains(s.getBounds()))
                {
                    ((Move) s).moveFailed();
                }
                else break;
            }
        }
    }
    repaint();
}

public @Override void paintComponent(Graphics g)
{
   super.paintComponent(g); /* Let the parent class do its painting */

   for (Sprite sprite: sprites)
   {
       sprite.draw(g);
   }
 }

public void reset(int level)
{
    Sprite sprite = null;

    int x, y, angle;
    double scale, min, max;

    sprites.clear();
    int[] figures = FIGURES[level];
    for (int f=0; f<figures.length; f++)
    {
        for (int i=0; i<figures[f]; i++)
        {
            x = (int)(Math.random()*600 + 100);
            y = (int)(Math.random()*400 + 100);

            switch (f)
            {
                case 0:
                    sprite = avatar = new Avatar(x,y);
                    break;
                case 1:

                    sprite = new Predator(x,y);
                    break;
                case 2:
                    sprite = new Mine(x,y);
                    break;
                case 3:
                    sprite = new Shield(x,y);
                    break;
            }

            angle = (int)(Math.random()*360);
            sprite.setAngle(angle);

            min = sprite.getMinScaleFactor();
            max = sprite.getMaxScaleFactor();
            scale = Math.random() * (max - min) + min;
            sprite.setScale(scale);

            sprites.add(sprite);
            repaint();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:20:27.480

看起来你的 if 和 else 情况非常相似。您可以将其简化为。

```
public boolean setColor(boolean good)
{
    what+=good?-1:+1;
    avatars.get(0).setBackground(colors.get(what));
    repaint();
    return good;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:15:40.387

我强烈建议使用方括号，因为 repaint() 方法会在 if 语句之外执行。因为，布尔值只能有两个可能的值，你可以使用 'else' 而不是 second if...

```
public boolean setColor(boolean good)
{
    if (good == true)
    {
        what--;
        avatars.get(0).setBackground(colors.get(what));
        repaint();
    }
    else 
    {    
        what++;
        avatars.get(0).setBackground(colors.get(what));
        repaint();
    } 
```

# java - 查找数组中的所有重复项

> ID：15453479
> 
> 赞同：-3
> 
> 时间：2013-03-16T19:09:35.733
> 
> 标签：java, arrays, loops, nested, duplicates

我正在上 Java 编程的初学者课程。我正在尝试编写一个程序来查找并打印出数组中的重复项。这就是我到目前为止所拥有的。我被困住了。我想我需要`else`在`if`?

```
public class Array {
  public static void main(String[] args) {
    int N=10;        
    for (int i = 0; i < N - 1; i++)
    {
      for (int j = i + 1; j < N; j++)
      {
        if(i == j)
        {              
          System.out.println("Both arrays contain " + i);              
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:14:31.090

```
public class Test15 {
  static int[] a = new int[]{1, 1, 1, 2, 3, 5, 3, 4, 5, 5};
  public static void main(String[] args){
    for (int i=0; i< a.length; i++) {
      boolean f = false;
      for (int j=i+1; j <a.length; j++)
        if (a[i]==a[j]) {
          System.out.println("duplicate ("+i+", "+j+")");
          f=true;
          break;
        }
      if (!f)
        System.out.println("unique ("+i+", "+a[i]+")");
    }
  }
} 
```

# css - CSS - 删除输入字段活动突出显示

> ID：15453488
> 
> 赞同：26
> 
> 时间：2013-03-16T19:10:10.037
> 
> 标签：css, input-field

仅使用 html 和 css，如何禁用活动输入字段周围的蓝色（在 Firefox 中）突出显示颜色。我试过使用`input {outline:none;}`但没有成功。谢谢您的帮助！=)

好的，忽略前面关于大纲的代码，我选择了错误的属性来更改。我想要得到的是简单地删除活动表单输入字段周围的突出显示（无论浏览器，它出现的粗体和彩色边框），而不更改或禁用样式。谢谢 =)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-07-17T13:53:11.180

您必须使用 :focus 声明。在这种情况下：

```
input:focus {outline:none;} 
```

您项目中的所有输入都没有蓝色边框。

如果你想要一个特定的属性，使用这个：

```
input[type=text]:focus {outline:none;} 
```

希望能帮助到你。=)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-16T19:17:08.277

看到这个[小提琴](http://jsfiddle.net/UwgeE/)。

看来您必须设置一些边框属性才能`outline: none`正常工作。如果您在边界指令中添加注释，大纲就会消失。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-16T19:20:10.783

```
input {border:0; outline:none;} 
```

应该删除所有边框/轮廓。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-09-26T21:22:22.323

答案比我说的简单：

```
box-shadow:none; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-29T14:40:44.790

编辑：我的解决方案太复杂了。就这么简单：

```
input:focus {
  outline: none;
} 
```

您需要定位 :focus 状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T19:19:09.773

要删除突出显示，请尝试将此规则添加到输入字段：

```
-moz-appearance:none; 
```

这也可以使用相应的前缀为基于 WebKit 的浏览器完成：

```
-webkit-appearance:none; 
```

这应该只使用一个 CSS 属性来处理任何边框、轮廓等。对于 WebKit 对和 Firefox 以外的浏览器 - Opera 和 IE - 建议也包含`border`和`outline`属性，以确保浏览器的交叉兼容性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-18T05:06:19.237

在您的 css 文件中添加`!important`并定义颜色/背景颜色。

```
#title {
    font-size: 40px;
    color: black !important;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-09-23T16:00:45.160

This should work for most input types on Firefox:

```
input::-moz-focus-inner { border: 0; } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-11-19T08:08:18.177

```
button {
    -webkit-tap-highlight-color:transparent;
    -moz-tap-highlight-color:transparent;
    -o-tap-highlight-color:transparent;
    tap-highlight-color:transparent;
} 
```

# ios - 什么应该拥有 MVC 模式中的模型？

> ID：15453490
> 
> 赞同：9
> 
> 时间：2013-03-16T19:10:16.390
> 
> 标签：ios, objective-c, oop, model-view-controller

从我记事起，我就一直在制作 iOS 应用程序，但直到最近我获得实习编程时，我的编程风格还没有成熟多少。我很早就学习了许多 OO 概念，因为我意识到如果不了解它们，生活就会很糟糕，但是我从未让自己学习的一件事是 MVC 模式。

为了给出上下文，假设我正在单个`SolarSystemView`（的子类`UIView`）内绘制一个太阳系。我应该`SolarSystemView`有一个类的实例变量`SolarSystem`（一个包含具有所有重要行星和恒星属性的数据结构的类），还是应该归 a 的实例所有`SolarSystemViewController`？还是完全不同的东西？我找不到任何给出满意答案的示例代码。

我想如果视图拥有模型，操作会非常流畅，但这也感觉不是很好的风格。毕竟，`SolarSystem`实例必须以某种方式动态更改，并且以与更新相同或相似的速率`SolarSystemView`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T19:15:23.080

在 MVC 范式中，模型应该与视图分离。为了获取它需要自己绘制的数据，它向 Controller 请求它，而后者又向 Model 请求它。这样，我们将信息与 GUI 分离。如果有帮助，可以将其视为模型控制器视图。因此，在大多数情况下，控制器“拥有”模型。

例如，在 cs193p 中，`CalculatorViewController`(Controller) 具有`CalculatorBrain`(Model) 属性，它与之交互以获取方程式的结果以显示在视图中。

在您的特定示例中， the`SolarSystemViewController`可能对 有一个强引用`SolarSystem`，它会轮询它将移交的数据，`SolarSystemView`以便它可以在需要更新时自行绘制。还可能在用户与其交互时`SolarSystemView`通知`SolarSystemViewController`，以便它可以显示其他视图或更新`SolarSystem`，以及它可以执行的任何其他任务。

请注意，Cocoa 和 Cocoa Touch 中的 MVC 范例与其他更通用的 MVC 版本（如 Smalltalk）略有不同。例如，如果您查看[MVC 上的 Wikipedia 页面，](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)那里的图表应该与您所学的有所不同。事实上，GoF（*设计模式*）就是这样描述 MVC 的。

> MVC 由三种对象组成。模型是应用程序对象，视图是它的屏幕呈现，控制器定义了用户界面对用户输入的反应方式。在 MVC 之前，用户界面设计倾向于将这些对象集中在一起。MVC 将它们解耦以增加灵活性和重用性。MVC 通过在它们之间建立订阅/通知协议来解耦视图和模型。视图必须确保其外观反映模型的状态。每当模型的数据发生变化时，模型都会通知依赖它的视图。作为响应，每个视图都有机会进行自我更新。这种方法允许您将多个视图附加到模型以提供不同的表示。您还可以为模型创建新视图而无需重写它。

在这两种情况下，模型本身都在联系视图以更新它。但是，在 iOS 上，Model 和 View 之间的交互是通过 Controller 处理的。这在[cs193p 的第一个会话](https://www.youtube.com/watch?v=KbiHXuiZM4A&playnext=1&list=PLD208B806337FCF3F&feature=results_video)以及[Apple 自己的 MVC 关系文档中得到了很好的解释。](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)这样，您只需要重写控制器代码即可在其他地方重用模型和视图。

这是来自 cs193p 的 MVC 图来澄清。

![模型视图控制器](../Images/f15b23c9c7a81f1b32f5c74f0e79d237.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:46:14.073

在这种情况下，SolarSystemView 不应包含 SolarSystem 类的任何瞬间。SolarSystemViewController 应该是您的视图 (SolarSystemView) 和模型 (SolarSystem) 之间的连接。

# c++ - 在堆栈/堆上创建对象

> ID：15453492
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:10:31.560
> 
> 标签：c++

我有两段代码创建一个 A 对象

```
A* a=new A(); 
```

和

```
A b; 
A *c=&b; 
```

问题是：有人说“对象总是在堆上分配”？

甚至在堆栈上声明它是真的吗？（代码1）

注意：我指的是实际的内存分配。我知道对象'b'将是

当它超出范围时清除。但是当它还在范围内时，它在哪里

'b'的记忆真的存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:13:05.317

指针`a`在堆栈上，`A`它指向的实例在堆上。

对象`b`在栈上，指针`c`在栈上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:15:24.677

作为一般经验法则：

如果您使用任何类型的动态内存分配（new、array new、malloc 等），分配的对象将位于堆上。否则，它被压入堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T19:18:01.087

@LouisTan 这取决于这些代码行在程序中的位置。但一般来说，这个指针会在 Stack 上。

比较一下：

```
/* my.c */

char * str = "Your dog has fleas.";  /* 1 */
char * buf0 ;                         /* 2 */

int main(){
    char * str2 = "Don't make fun of my dog." ;  /* 3 */
    static char * str3 = str;         /* 4 */
    char * buf1 ;                     /* 5 */
    buf0 = malloc(BUFSIZ);            /* 6 */
    buf1 = malloc(BUFSIZ);            /* 7 */

    return 0;
} 
```

1.  这既不是在堆栈上分配，也不是在堆上分配。相反，它被分配为静态数据，并在大多数现代机器上放入它自己的内存段。实际的*字符串*也被分配为静态数据，并放入正确思考机器中的只读段中。
2.  只是一个静态分配的指针；一个地址的空间，在静态数据中。
3.  在*堆栈*上分配了指针，并且在返回时将被有效地释放`main`。字符串，因为它是一个常量，所以与其他字符串一起分配在静态数据空间中。
4.  实际上分配与 2 完全相同。`static`关键字告诉您它不分配在堆栈上。
5.  ...但`buf1`在堆栈上，并且
6.  ... malloc 的缓冲区空间在堆上。
7.  顺便说一句，孩子们不要在家里尝试这个。 `malloc`具有感兴趣的返回值；您应该*始终*检查返回值。

[看这里完整的查理马丁帖子](https://stackoverflow.com/a/1169916/1141471)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:15:58.777

正如您在第二个片段中显示的那样，绝对可以在本地范围内创建对象（使用堆栈内存）。
第一个片段使用堆内存创建对象 A。

凯文

# wpf - WPF UI 线程

> ID：15453498
> 
> 赞同：2
> 
> 时间：2013-03-16T19:10:44.710
> 
> 标签：wpf, multithreading, mvvm, telerik, backgroundworker

我正在尝试更新图表并在那里绘制一些散点。为此，我正在使用`BackgroundWorker`类。它确实有效。但我注意到，一旦我向我的 Point 类添加颜色并想要显示不同颜色的点，它就会崩溃。为什么？有任何想法吗？

```
 public class ChartData
    {
        private readonly Brush Red = new SolidColorBrush(Colors.Red);
        private readonly Brush Orange = new SolidColorBrush(Colors.Orange);
        private readonly Brush Green = new SolidColorBrush(Colors.Green);

        public ChartData(double x, double y)
        {
            this.XValue = x;
            this.YValue = y;
        }

        public double XValue { get; set; }
        public double YValue { get; set; }

        public Brush Brush{ get; set;}
    }

    <telerik:ScatterPointSeries XValueBinding="XValue" 
                            YValueBinding="YValue" 
                            ItemsSource="{Binding Data}" >
        <telerik:ScatterPointSeries.PointTemplate>
            <DataTemplate>
                <Ellipse Width="10"
             Height="10"
             Fill="{Binding DataItem.Brush}"/>
            </DataTemplate>
        </telerik:ScatterPointSeries.PointTemplate>
    </telerik:ScatterPointSeries> 
```

例外：`Must create DependencySource on same Thread as the DependencyObject.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:36:53.273

如消息本身所述，您不能`DependencySource`从另一个线程修改（添加、创建、删除）。您可以从同一个线程修改它，在您的情况下是 UI 线程。

作为一种出路，你可以把代码`modifying dependency source on UI thread dispatcher`

```
App.Current.Dispatcher.Invoke((Action)delegate()
            {
                // Code here for updating Dependency Source.
            }); 
```

# ruby - Ruby中的实例变量对象ID分配混淆

> ID：15453509
> 
> 赞同：0
> 
> 时间：2013-03-16T19:11:29.947
> 
> 标签：ruby, ruby-1.9.3

我试图理解实例变量的初始化和声明。这样做我尝试了下面的代码。但是在我思考的一半中，我得到了一些有趣的东西，如下所示：

```
class Person
attr_accessor :name,:age
    def initialize(var)
     @sex = var
    end
    def objctid
        p ":age -> #{@age.object_id}"
        p ":name -> #{@name.object_id}"
        p ":sex -> #{@sex.object_id}"
    end
end
#=> nil

ram = Person.new('M')
#=> #<Person:0x2109f48 @sex="M">

ram.objctid
#":age -> 4"
#":name -> 4"
#":sex -> 17321904"
#=> ":sex -> 17321904" 
```

`Object#instance_variable_set`我到现在都没用。

***符号如何获取内存引用`:age`，`:name`因为我直到上面才初始化它们？***

***为什么`object_id`这些实例变量相同？***

```
ram.instance_variable_set(:@age,'14')
#=> "14" 
```

现在在下面的代码中，`@age`s object_id 像我`Object#instance_variable_set`以前设置的那样更改`@age`。

```
ram.objctid
#":age -> 17884656"
#":name -> 4"
#":sex -> 17321904"
#=> ":sex -> 17321904"

ram.instance_variable_set(:@name,'Lalu')
#=> "Lalu"

ram.objctid
#":age -> 16884288"
#":name -> 17041356"
#":sex -> 17625228"
#=> ":sex -> 17625228" 
```

**`@age`* 为什么和的object_id 如此不同`@name`？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:21:11.017

实例变量`nil`在第一次被引用时被创建和初始化。例如：

```
class C
    def m
        puts @unset.inspect
    end
end
C.new.m 
```

会说`nil`。

当您第一次在方法中引用它们时，您不会初始化它们并被创建和`@age`初始化。既然他们都是，他们将拥有相同的，因为只有一个；添加到您的方法中可能会很有成效。`@name``nil``objctid``nil``object_id``nil``p nil.object_id``objctid`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:31:21.437

**符号 :age 和 :name 如何获取内存引用？**

因为您没有为它们分配任何值，所以默认情况下它们会得到一个 `nil`对象

**为什么这些实例变量的 object_id 相同？**

因为只有一个`nil`

# ruby-on-rails - 在自连接模型中设置名称

> ID：15453510
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:11:30.597
> 
> 标签：ruby-on-rails, activerecord, nested-attributes

我正在使用 AwesomeNestedSet gem 来填充类别树。

模型：

```
class Category < ActiveRecord::Base
 attr_accessible :name, parent_id
 has_many :subcategories, :class_name => "Category", :foreign_key => "parent_id"
 belongs_to :parent_category, :class_name => "Category"
 acts_as_nested_set
end 
```

我需要这样的名称输出集合：

```
Category_1
Category_1 >> Category_2
Category_1 >> Category_2 >> Category_3
Category_4 
```

对数据库进行最少计数查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:41:13.420

对不起，回答自己的问题......

简单的：

```
def self.nested_names
    name = ""
    Category.each_with_level(Category.all) do |category, level|
      if category.root?
        name = category.name
      else
        name += " >> " + category.name
      end
      category.name = name
    end
  end 
```

# c# - 40400：找不到端点 - Windows 服务总线

> ID：15453513
> 
> 赞同：9
> 
> 时间：2013-03-16T19:11:35.797
> 
> 标签：c#, azureservicebus

我在本地 Windows Service Bus 1.0 上运行，但我遇到了异常`MessaingEntityNotFoundException 40400: Endpoint not found`。

这是因为没有创建队列吗？我在服务器上看不到可以创建队列的任何地方（我使用的是 2K8R2），当我运行服务总线配置工具时，它只询问我是否要从场中删除。

我是否需要添加队列，如果需要，是否有 gui 或 powershell 脚本，或者我做错了什么？

app.config 中的连接字符串

```
<appSettings>
    <!-- Service Bus specific app setings for messaging connections -->
    <add key="Microsoft.ServiceBus.ConnectionString" value="Endpoint=sb://sqldev1.domain.local/domaintest1;StsEndpoint=https://sqldev1.domain.local:9355/domain-test1;RuntimePort=9354;ManagementPort=9355" />
  </appSettings> 
```

代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.ServiceBus;
using Microsoft.ServiceBus.Messaging;
using System.Threading.Tasks;

namespace WindowsServerEventBus
{
    class Program
    {
        static void Main(string[] args)
        {
            MessagingFactory messageFactory = MessagingFactory.Create();
            NamespaceManager namespaceManager = NamespaceManager.Create();

            QueueClient myQueueClient = messageFactory.CreateQueueClient("WowWowWee");

            BrokeredMessage sendMessage = new BrokeredMessage("Hello World!");
            myQueueClient.Send(sendMessage);

            BrokeredMessage receivedMessage = myQueueClient.Receive(TimeSpan.FromSeconds(5));
            if (receivedMessage != null)
            {
                Console.WriteLine(string.Format("Message received: Body = {0}",
                                    receivedMessage.GetBody<string>()));
                receivedMessage.Complete();
            }

            messageFactory.Close();
            Console.ReadLine();
        }
    }
} 
```

下面的异常转储：

```
Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException was unhandled
  HResult=-2146233088
  Message=40400: Endpoint not found..TrackingId:1271f18d-3fa7-4437-9f86-7276ff5909b4_Gsqldev1,TimeStamp:16/03/2013 19:05:33
  Source=Microsoft.ServiceBus
  IsTransient=false
  StackTrace:
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.EndSendCommand(IAsyncResult result)
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.OnEndSend(IAsyncResult result)
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.OnSend(TrackingContext trackingContext, IEnumerable`1 messages, TimeSpan timeout)
       at Microsoft.ServiceBus.Messaging.MessageSender.Send(TrackingContext trackingContext, IEnumerable`1 messages, TimeSpan timeout)
       at Microsoft.ServiceBus.Messaging.MessageSender.Send(BrokeredMessage message)
       at Microsoft.ServiceBus.Messaging.QueueClient.Send(BrokeredMessage message)
       at WindowsServerEventBus.Program.Main(String[] args) in c:\Users\user\Downloads\EventStore-master\EventStore-master\src\WindowsServerEventBus\Program.cs:line 78
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.ServiceModel.FaultException
       HResult=-2146233087
       Message=40400: Endpoint not found..TrackingId:1271f18d-3fa7-4437-9f86-7276ff5909b4_Gsqldev1,TimeStamp:16/03/2013 19:05:33
       Source=Microsoft.ServiceBus
       Action=http://schemas.microsoft.com/servicebus/2010/08/protocol/Fault
       StackTrace:
         Server stack trace: 
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.ThrowIfFaultMessage(Message wcfMessage)
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.HandleMessageReceived(IAsyncResult result)
         Exception rethrown at [0]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.DuplexCorrelationAsyncResult.End(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.<GetAsyncSteps>b__4(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [1]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.RedirectBindingElement.RedirectContainerChannelFactory`1.RedirectContainerSessionChannel.RequestAsyncResult.<>c__DisplayClass17.<GetAsyncSteps>b__a(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [2]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Sbmp.RedirectBindingElement.RedirectContainerChannelFactory`1.RedirectContainerSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.<GetAsyncSteps>b__4(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [3]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.SbmpTransactionalAsyncResult`1.<GetAsyncSteps>b__36(TIteratorAsyncResult thisPtr, IAsyncResult a)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [4]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.EndSendCommand(IAsyncResult result)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T09:59:20.710

您可以使用 NameSpaceManager 在代码中创建队列。

```
namespaceManager.CreateQueue("WowWowWee"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-24T02:23:03.043

如果使用`NimbusAPI`自动创建 Azure 服务总线主题，则未订阅的主题会在 367 天后自动删除，因为它处于空闲状态。要解决此问题，请重新启动服务，它应该会恢复所有丢失的主题。

# android - Android - 如何将 webview 放在前面

> ID：15453524
> 
> 赞同：1
> 
> 时间：2013-03-16T19:12:28.987
> 
> 标签：android, layout, view, webview

我有两个`Webviews`，但在某些时候我想把后面的一个放在前面。我希望两者都可见。

是否可以更改布局顺序？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T19:28:29.853

Android 视图堆栈中没有 Z 轴位置的概念，因此您不能将视图放在前面或发送到后面。您需要将视图的可见性标志设置为隐藏、可见或不可见（分别为 .setVisibility(GONE、VISIBLE 或 INVISIBLE)）。如果您希望它们有时都可见，那么您至少需要使顶视图（最后添加到父视图的那个）具有透明背景，这样如果它们的 Visibilities 设置为 VISIBLE，则后面的视图将通过顶部显示看法。

凯文

# php - 将搜索到的数据输出到另一种形式

> ID：15453525
> 
> 赞同：0
> 
> 时间：2013-03-16T19:12:32.437
> 
> 标签：php, html, sql, search

我目前正在构建一个获取唯一值并将其用作登录名（即参考号）的系统。然后参考号搜索数据库并将所有相应的数据输出到另一个页面，我正在努力解决这个问题，我的代码是：

索引.PHP

```
<input name="search_box"  type="text" class="auto-style1" id="search_box" style="width: 240px; height: 30px" maxlength="12">

<input type="submit" name="search" value="Enter" class="auto-style1" style="width: 63px; height: 30px"></td>
<?php $reasons = array("search_box" => "Please Enter Valid Reference Number", "" => "Error"); if ($_GET["loginFailed"]) echo $reasons[$_GET["reason"]]; ?>

</form> 
```

检查.php

```
 <?php
include "conn.php";

mysql_connect("localhost","root") or die(header("location:index.php?loginFailed=true&reason=search_box"));
mysql_select_db("DB1") or die(header("location:index.php?loginFailed=true&reason=search_box"));

$reference1 = $_POST['search_box'];

$sql = "SELECT * FROM test_table1 WHERE No =$R1";
$result = mysql_query($sql) or die(mysql_error());
    if ($result)
    $count = mysql_num_rows($result);
    else
    $count = 0;

if($count == 1)
 {
  session_register('search_box');
  header("location:result.php");
  }
else 
{
echo (header("location:index.php?loginFailed=true&reason=search_box"));
 }
 ?> 
```

输出.php

```
 <?php
include "conn.php";

$sq2 = "SELECT * FROM test_table1";
if (isset($_POST['search']))
 {
    $search_term = mysql_real_escape_string($_POST['search_box']);

    $sq2 .= "WHERE No =  '{$search_term}'";
}

$query= mysql_query($sq2, $con);

while($row = mysql_fetch_array($query)) { ?>
&nbsp;<font size="4" face="Calibri"><b> Ref Number:   </b> </font><?php echo $row['No']; ?></td>
<p>
&nbsp;<font size="4" face="Calibri"><b> Location:   </b></font><?php echo $row['Country']; ?></td>
<p>

<?php
mysql_close($con);
?> 
```

你们能给予的任何帮助将不胜感激，谢谢。

QWERTY。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:33:51.220

您的问题（您现在可能想知道的问题（因为似乎还有更多潜在的问题和漏洞利用））在`Output.php`.

在您从`Login_check.php`（因为您正在重定向浏览器）调用该文件时，您的`$_POST`数组不再包含任何数据。

为了让自己更轻松，为什么不`include "Output.php";`通过 重定向浏览器`headers()`呢？这样您就不需要再次重新初始化会话或数据库`Output.php`。

但是，如果您需要此重定向，请在会话初始化后存储您的`$_POST['search']`to `$_SESSION['search']`，然后参考`$_SESSION['search']`in`Output.php`而不是（如您现在所拥有的那样）`$_POST['search']`

希望能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:21:11.393

所以我假设你有一张桌子`donations`，上面有一些`donId`（参考号）捐赠、`donName`捐赠者、`donCountry`捐赠者来自哪个国家以及`donAmount`他们捐赠了多少钱。您的文件看起来像这样（我不会为 html 的所有正确标头而烦恼，因此结果不会是 w3c 有效的 html，但它应该可以在您的浏览器中正常工作。

我想我必须说你不应该使用`mysql_query`和所有其他`mysql_...`功能来代替`mysqli_*`。下面的代码虽然仍在使用旧的这些天已经弃用的 mysql_ 函数，所以将它相应地升级到 mysqli 符合您的利益（这是一项家庭作业；）哈哈）

文件`donInfo.php`：

```
<html>
<body>
<form action='donInfo.php' method='post'>
    <label for='donId'>Reference No.:</label>
    <input type='text' size='6' name='donId' id='donId' value='' />
    <input type='submit' name='do' value='  Show me!  ' style='margin-left:2em;'/>
</form>

<?php
    /* table definition: 
    CREATE TABLE donations (
        donId int unsigned not null,
        donCountry varchar(80) not null,
        donName varchar(80) not null,
        donAmount numeric(11,2) not null,
        PRIMARY KEY (donId)
    )
    */
    if (!isset($_POST['do']) || !isset($_POST['donId']) || !$_POST['donId']) 
        exit;

    require_once 'connection.php';

    $don=mysql_fetch_assoc(
        mysql_query('SELECT * '.
            'FROM donations '.
            'WHERE donId="'.mysql_real_escape_string($_POST['donId'],$con).'"',$con));
    if ($don===false || !$don['donId'])
        print '<h3>Donation id #'.$_POST['donId'].' does not exist!</h3>';
    else {
        print '<h3>Information about donation id #'.$_POST['donId'].'</h3>'.
            'State: '.$don['donCountry'].'<br/>'.
            'Donator: '.$don['donName'].'<br/>'.
            'Amount: $ '.number_format($don['donAmount'],2).'<br/>'.
            '<hr/>';

        $sumP=mysql_fetch_assoc(
            mysql_query('SELECT SUM(donAmount) total, COUNT(*) donx '.
                'FROM donations '.
                'WHERE donName="'.mysql_real_escape_string($don['donName'],$con).'" '.
                'GROUP BY donName',$con));
        print '<h4>Donations from '.$don['donName'].':</h4>'.
            'Total Amount: $ '.number_format($sumP['total'],2).'<br/>'.
            'Donated <b>'.number_format($sumP['donx'],0).'</b> times to date.<br/>'.
            '<hr/>';

        $sumC=mysql_fetch_assoc(
            mysql_query('SELECT SUM(donAmount) total, COUNT(DISTINCT donName) donators, COUNT(*) donx '.
                'FROM donations '.
                'WHERE donCountry="'.mysql_real_escape_string($don['donCountry'],$con).'" '.
                'GROUP BY donCountry',$con));
        print '<h4>Donations from '.$don['donCountry'].':</h4>'.
            'Total Amount: $ '.number_format($sumC['total'],2).'<br/>'.
            'Total of <b>'.number_format($sumC['donx']).'</b> donations from <b>'.number_format($sumC['donators'],0).'</b> donators.<br/>'.
            '<hr/>';

        $sumW=mysql_fetch_assoc(
            mysql_query('SELECT SUM(donAmount) total, COUNT(DISTINCT donName) donators, COUNT(DISTINCT donCountry) countries, COUNT(*) donx '.
                'FROM donations '.
                'GROUP BY 1=1',$con));
        print '<h4>Donations Total:</h4>'.
            'Total Amount: $ '.number_format($sumW['total'],2).'<br/>'.
            'Total of <b>'.number_format($sumW['donx']).'</b> donations from <b>'.number_format($sumW['countries'],0).'</b> countries and <b>'.number_format($sumW['donators'],0).'</b> donators.<br/>'.
            '<hr/>';        
    }
?>
</body>
</html> 
```

我已经测试了代码，所以它应该可以正常工作。我正在使用您的`connection.php`脚本（我猜）您正在初始化数据库。

简短描述它的作用：要求提供一个 ID，然后在提交时检查它是否存在，如果是，它将打印有关该捐赠 ID 的信息、该 ID 的用户信息、该 ID 的国家和捐赠总额统计。如果捐赠 ID 不存在，它会在等待输入另一个 ID 时说：不存在。

# javascript - Google Maps v3 同步和更新标记

> ID：15453527
> 
> 赞同：1
> 
> 时间：2013-03-16T19:12:44.003
> 
> 标签：javascript, jquery, google-maps, jquery-mobile, google-maps-api-3

我今天早上花了一些时间寻找一些简单但同时灵活的东西，用于像小公司或团体这样的快递递送/在地图中自我组织和订购/目的地。虽然我在浏览数万亿个帖子后放弃了搜索 :) 并审查了许多商业软件。我花了最后一个小时制作自己的应用程序并得到了我自己的工作应用程序，但是我想到了很多问题，所以我正在考虑开始它的开源项目，并通过这个简短的介绍和下面的代码与你们分享，希望也许我能找到一些好的答案或好主意。如何在任何浏览器、包括移动互联网在内的任何设备上高效使用。:)。我一直在寻找正确的方法来基本实时更新地图。设置间隔！? 无论如何，我的所有浏览器都会在一段时间后冻结并停止更新，而我希望它能够在需要时 24/7/365 运行。如果有人能至少引导我正确的方向以使这种同步更加稳定，我将不胜感激。提前谢谢！

**全球贡菲**

```
/***********************************
* Config
************************************/
/* Master Server    */  var master_server       = {
    url             : 'https://0.0.0.0/',
    status          : false,
    connectionFail  : "Connection to Master Server Failed"
}
/* Slave Server     */  var slave_server        = {
    url             : 'https://0.0.0.0/',
    status          : false,
    connectionFail  : "Connection to Slave Server Failed"
}
/* Sync controller  */  var sync_controller     = '/datasync/';
/* Sync actions     */  
var sync_action         = {
    updateLatLng    : 'updatewithgeo/'
}
/***********************************/
var car             = false;
var order           = false;
var order_icon      = "static_icon.png";
var customMsg       = {
    PositionFail    : "Because Default lat lng and getCurrentPosition are not set app will not try to sync! It will try again shotwhile"
}
// Can define default lat lng
var lat         = false;
var lng         = false;
/***********************************/ 
```

**应用程序**

```
function syncData()
{
//Temporarly clearing markers to avoid marker[$i] to be duplicated if position is changed
if(markers){$('#map_canvas').gmap('clear', 'markers');}
// Exhange data with server
$('#map_canvas').gmap('getCurrentPosition', function(position, status) {
    if ( status === 'OK' ) {
        lat = position.coords.latitude;
        lng = position.coords.longitude;
    }
    if (!lat){
        console.log(customMsg.PositionFail);
        setTimeout('syncData()', 10000);
        throw new Error(customMsg.PositionFail);
        return;
    }
    $.post(master_server.url+sync_controller+sync_action.updateLatLng, {latlng : lat+"@"+lng}, function(data, Server_1_Status) {

        if(Server_1_Status != 'OK')
        {
            // If request to master server then here would be place to connect to slave server(s)
            console.log(master_server.connectionFail);
            setTimeout('syncData()', 10000);
            throw new Error(master_server.connectionFail);
            return;
        }
        // If there is no errors
        $.each( data.couriers, function(i, courier) {
            // If markers are identified correctly when they are returned from server
            // then addMarker should only add new markers and 
            // existing markers shuld be updated (setPosition)

            $('#map_canvas').gmap('addMarker', { 
                'position': new google.maps.LatLng(courier.latitude, courier.longitude), 
                'bounds': true,
                'icon' : courier.icon,
                'title' : courier.name
            }).click(function() {
                $('#map_canvas').gmap('openInfoWindow', { 'content': courier.content }, this);
            });
        });
        $.each( data.orders, function(i, order) {
            $('#map_canvas').gmap('addMarker', { 
                'position': new google.maps.LatLng(order.latitude, order.longitude), 
                'bounds': true,
                'title' : order.address,
                'icon' : ""
            }).click(function() {
                // Populating order view and forms to take / confirm delivery and send digital signature
                $('#OrderViewTitle').html('<h1>'+order.orderID+order.address+'</h1>');
                $('#OrderData').html('<p><b>'+order.customerID+'</b><br><b>Order:</b>'+order.salesorder+'</p>');
                document.getElementById('TakeDelivery').value = order.orderID;
                document.getElementById('DeliveryComplete').value = order.orderID;
                $('#OrderView').popup("open");
            });
        });
    }, "json");

    $('#map_canvas').gmap('refresh');
    setTimeout('syncData()', 10000);
}); 
}
$(document).ready(function() {
courierApp.add(function() {
    $('#map_canvas').gmap().bind('init', function() {
        syncData();
});
    }).load();
}); 
```

# java - 为什么我的数组不打印？

> ID：15453532
> 
> 赞同：3
> 
> 时间：2013-03-16T19:13:04.383
> 
> 标签：java

我有两个班级`Hangman`，`words`如下所示：

刽子手类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.util.Random;
import java.util.Scanner;

/**
 *
 * @author Adam2_000
 */
public class Hangman {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        String player = "";
        String selection;
        Scanner scan = new Scanner(System.in);

        words words = new words();
        String easyWords1[] = words.easyWords;
        String mediumWords1[] = words.mediumWords;
        String hardWords1[] = words.hardWords;

        System.out.println("Welcome to Hangman version 1");
        System.out.println("Please choose a difficulty");
        System.out.println("A: Easy");
        System.out.println("B: Medium");
        System.out.println("C: Hard");

        char iChoice;

        do {
            selection = scan.nextLine().toUpperCase();
        } while (selection.isEmpty());
        iChoice = selection.charAt(0);
        if (iChoice != 'X') {
            switch (iChoice) {

                case 'A':
                    System.out.println("You have choosen easy:");
                    System.out.println(words.getEasyWords());
                    break;

                case 'B':
                    System.out.println("You have choosen Medium");
                     System.out.println(words.getMediumWords());
                    break;

                case 'C':
                    System.out.println("You have choosen Hard");
                     System.out.println(words.getHardWords());
                    break;
            }
        }
    }
} 
```

词类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.lang.reflect.Array;
import java.util.Random;

/**
 *
 * @author Adam2_000
 */
public class words extends Hangman {

      String[] easyWords = {"Bee", "Car", "Fish", "Shed"};
      String[] mediumWords = {"House", "Sheep", "Castle", "Phone"};
      String[] hardWords = {"Octagon", "Crocodile", "Chocolate", "Motorbike"};

    public String[] getEasyWords() {
        return easyWords;
    }

    public void setEasyWords(String[] easyWords) {
        this.easyWords = easyWords;
    }

    public String[] getMediumWords() {
        return mediumWords;
    }

    public void setMediumWords(String[] mediumWords) {
        this.mediumWords = mediumWords;
    }

    public String[] getHardWords() {
        return hardWords;
    }

    public void setHardWords(String[] hardWords) {
        this.hardWords = hardWords;
    }

    @Override
    public String toString() {
        return "words{" + "easyWords=" + easyWords + ", mediumWords=" + mediumWords + ", hardWords=" + hardWords + '}';
    }
} 
```

当我尝试显示每个数组时，我得到的是引用而不是字符串，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T19:14:56.237

> ...我得到的是参考而不是字符串...

这就是在 class 中定义方法的方式`Object`。

由于您无法覆盖数组的该行为，因此您可以遍历它，也可以使用[`toString`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)( `static`) 实用程序方法[`java.util.Arrays`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:15:16.163

你看到类似的东西

```
[Ljava.lang.String;@17bd6a1 
```

这是`Object#toString`数组的表示`String`，要显示内容，您可以使用：

```
Arrays.toString(words.getEasyWords()) 
```

# java - 如何使用 Java 中的 Fortran 库？

> ID：15453534
> 
> 赞同：2
> 
> 时间：2013-03-16T19:13:07.593
> 
> 标签：java, fortran

对于我的项目，我需要一个可以求解微分代数方程的 Java 库。但我无法在 Java 中找到它，但我在 Fortran 中找到了它。我如何在 Java 中使用这些 Fortran 库，我正在尝试制作一个小程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:17:21.087

您的选择是：

1.  如果很简单，请将您找到的代码翻译成 Java（在这种情况下可能不是您想要的）；
2.  找一个做同样事情的 Java 库；
3.  使用[Java 本地接口](http://en.wikipedia.org/wiki/Java_Native_Interface)（尽管[传闻](http://rickyclarkson.blogspot.com/2010/01/jni-applets-pain.html)这对小程序来说很痛苦）。

如果存在这样的库，通常 2 是最简单的。

# php - 连接数据库时的错误消息

> ID：15453535
> 
> 赞同：1
> 
> 时间：2013-03-16T19:13:10.253
> 
> 标签：php, mysql

我在连接数据库时遇到问题

这是我正在使用的代码

```
$con = mysql_connect('host', 'user', 'pass');
mysql_select_db('database_name', $con); 
```

这是我得到的结果

> 警告：mysql_connect() [function.mysql-connect]：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：第 2 行 /home/heartbeat_db/heartbeatsmart.com/php/config/dbconnect.php 中的 111
> 
> 警告：mysql_select_db() 期望参数 2 是资源，布尔值在第 3 行的 /home/heartbeat_db/heartbeatsmart.com/php/config/dbconnect.php 中给出
> 
> 警告：mysql_connect() [function.mysql-connect]：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：第 2 行 /home/heartbeat_db/heartbeatsmart.com/php/config/dbconnect.php 中的 111
> 
> 警告：mysql_select_db() 期望参数 2 是资源，布尔值在第 3 行的 /home/heartbeat_db/heartbeatsmart.com/php/config/dbconnect.php 中给出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:41:40.633

尝试使用此代码

$con=mysql_connect("host","user","pass");
mysql_selectdb("database_name",$con);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:22:58.643

最好使用 PDO 或 Mysqli。我更喜欢 PDO，因为它还支持 mysql 以外的其他数据库，因此您可以在必要时更轻松地进行迁移。

您可以通过以下方式轻松建立连接

```
$db = new PDO('mysql:host=localhost;dbname=<SOMEDB>', '<USERNAME>', 'PASSWORD'); 
```

欲了解更多信息： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

如果要使用 mysqli，请使用：

```
$mysqli = new mysqli("localhost", "user", "password", "database"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:20:37.443

尝试使用此代码

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');

if (!$link) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
}

echo 'Success... ' . mysqli_get_host_info($link) . "\n";

mysqli_close($link); 
```

来源：[http ://www.php.net/manual/en/mysqli.construct.php](http://www.php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:21:37.990

```
<?php
$mysqli = new mysqli("localhost", "user", "password", "database");
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " .      $mysqli->connect_error;
 }
echo $mysqli->host_info . "\n";

$mysqli = new mysqli("127.0.0.1", "user", "password", "database", 3306);
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " .      $mysqli->connect_error;
}

echo $mysqli->host_info . "\n";
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T20:20:55.293

```
$con = mysql_connect('host', 'user', 'password');
if (!$con) {
    die('Not connected : ' . mysql_error());
}

$db = mysql_select_db('database_name', $con);
if (!$db) {
    die ('Can\'t use database_name : ' . mysql_error());
} 
```

# android - 致命异常：GLThread、StackOverflowError 与 Google 地图 V2

> ID：15453542
> 
> 赞同：2
> 
> 时间：2013-03-16T19:13:41.340
> 
> 标签：android, google-maps-android-api-2

我正在实施 Google Maps V2，我正在绘制从外部 GPX 文件、设备路径、设备当前位置和交付点位置接收的交付路线。问题是它大部分时间都有效......我得到的错误（当它不工作时）是下一个：

```
 03-16 20:48:37.811: I/dalvikvm(16510): threadid=30: stack overflow on call to Lmaps/t/bx;.d:FLLL
    03-16 20:48:37.811: I/dalvikvm(16510):   method requires 40+20+0=60 bytes, fp is 0x60223318 (24 left)
    03-16 20:48:37.811: I/dalvikvm(16510):   expanding stack end (0x60223300 to 0x60223000)
    03-16 20:48:37.811: I/dalvikvm(16510): Shrank stack (to 0x60223300, curFrame is 0x60226e54)
    03-16 20:48:37.821: D/gralloc(16510): unmap_buffer: Successfully unmapped 0xa5000 bytes at address 0x60416000, SharedFd=89, map_count = 3
    03-16 20:48:37.821: D/gralloc(16510): unmap_buffer: Successfully unmapped 0xa5000 bytes at address 0x604bb000, SharedFd=96, map_count = 2
    03-16 20:48:37.881: W/dalvikvm(16510): threadid=30: thread exiting with uncaught exception (group=0x409f61f8)

    03-16 20:32:23.471: E/AndroidRuntime(16283): FATAL EXCEPTION: GLThread 1827
    03-16 20:32:23.471: E/AndroidRuntime(16283): java.lang.StackOverflowError
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.bx.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.bx.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source)
    03-16 20:32:23.471: E/AndroidRuntime(16283):    at maps.t.cg.a(Unknown Source) 
```

下面是产生问题的代码示例。

UpdateMap 方法在 Activity 的 onCreate 方法中只调用一次。UpdateMap 内部是 DrawUserLocationOnMap 调用。我愿意接受任何建议。

更新地图方法：

```
private void UpdateMap() {
    map = ((SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map)).getMap();
    int i = 0;

    // GPS COORDINATES RECEIVED FROM GPX FILE
    PolylineOptions pOptions = new PolylineOptions();
    LatLng initialCameraPosition = null;

    for (GpxTrackModel trackModel : ProviderUtility.GpxProvider.GpxTracks) {
        for (GpxTrackCoordinateModel coorModel : trackModel.getTrackCoordinates()) {
            if (i == 0)
                initialCameraPosition = new LatLng(coorModel.getLatitude(), coorModel.getLongitude());

            pOptions.add(new LatLng(coorModel.getLatitude(), coorModel.getLongitude()));
            i++;
        }

        // ADDING DESTINATION MARKERS (LAST LOCATION IN TRACK SEGMENT)
        MarkerOptions mOptions = new MarkerOptions();
        mOptions.draggable(false);

        GpxTrackCoordinateModel model = trackModel.getTrackCoordinates().get(trackModel.getTrackCoordinates().size() - 1);
        mOptions.position(new LatLng(model.getLatitude(), model.getLongitude()));
        mOptions.title(trackModel.getName());

        map.addMarker(mOptions).showInfoWindow();
        map.animateCamera(CameraUpdateFactory.newLatLngZoom(initialCameraPosition, 14));

        DrawUserLocationOnMap();

    }
    pOptions.color(Color.parseColor("#FF0000"));
    map.addPolyline(pOptions);

} 
```

DrawUserLocationOnMap 方法：

```
PolylineOptions recordedPOptions = null;
MarkerOptions userLocation = null;

private void DrawUserLocationOnMap() {

    // RECORDED GPS DATA WITH GREEN LINE
    if (recordedPOptions == null)
        recordedPOptions = new PolylineOptions();

    // ADDING SAVED USER GPS COORDINATES FROM DATABASE AND DRAWING PATH
    ArrayList<GPSTrackingModel> list = ProviderUtility.GPSTrackingProvider.GetGPSCoordinates(false);
    for (GPSTrackingModel recordedGps : list)
        recordedPOptions.add(new LatLng(Double.parseDouble(recordedGps.getLatitude()), Double.parseDouble(recordedGps.getLongitude())));

    recordedPOptions.color(Color.parseColor("#00FF00"));
    map.addPolyline(recordedPOptions);

    // ADDING CURRENT LOCATION MARKER
    GPSTrackingModel lastPosition = ProviderUtility.GPSTrackingProvider.GetLastCoordinate();
    if (lastPosition != null && lastPosition.getLatitude() != null
            && !lastPosition.getLatitude().equals("")
            && lastPosition.getLongitude() != null
            && !lastPosition.getLongitude().equals("")) {

        LatLng lp = new LatLng(Double.parseDouble(lastPosition.getLatitude()), Double.parseDouble(lastPosition.getLongitude()));

        if (userLocation == null) {
            userLocation = new MarkerOptions();

            userLocation.draggable(false);

            userLocation.position(lp);
            userLocation.title("My current location");
            userLocation.icon(BitmapDescriptorFactory.fromResource(R.drawable.currentlocation));
            map.addMarker(userLocation);
        } else
            userLocation.position(lp);

        float zoom = map.getCameraPosition().zoom;
        if (zoom < 14)
            zoom = 14;
        map.animateCamera(CameraUpdateFactory.newLatLngZoom(lp, zoom));
    }
} 
```

**更新：**

为了强制出错，我添加了每 200 毫秒调用一次 DrawUserLocationOnMap() 方法的循环。4-5秒后它崩溃了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:17:23.480

我将首先解决您的代码的一些问题，并希望其中之一是使 Maps V2 库绊倒的原因。

1.  不要`animateCamera()`在循环内多次调用。您的用户会头晕目眩。请在最后调用一次。

2.  不要一直在相同的位置重新添加相同的标记，因为您的代码是通过调用它几十次（“每 200 毫秒。4-5 秒后它崩溃”）大概相同的模型数据，因为那要么是无效的生产代码（如果你真的这样做的话），要么是无效的测试（如果这纯粹是你强迫崩溃的产物）。

如果这些没有帮助，请慢慢开始注释掉部分代码，直到您可以精确地缩小触发无限递归的范围。我希望堆栈跟踪可能会具体显示代码中触发问题的位置，但这并没有解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:42:36.743

澄清这里发生了什么。感谢@CommonsWare。

在 DrawUserLocationOnMap() 方法中，我有将 LatLng 对象添加到记录的 POptions 折线的 for 循环。问题是*ProviderUtility.GPSTrackingProvider.GetGPSCoordinates(false)*返回用户/设备访问的所有记录坐标。此方法返回新的（仅记录器）坐标和旧的、已绘制的坐标。我的错误在这里，我一遍又一遍地为相同的旧坐标添加 LatLng。这导致了 StackOverflow 错误。现在我已经修改了 DrawUserLocationOnMap() 的这一部分以仅添加新坐标。

# ios - 将 MKMapView 缩放到 MKAnnotationView 的框架

> ID：15453543
> 
> 赞同：7
> 
> 时间：2013-03-16T19:13:50.807
> 
> 标签：ios, objective-c, xcode, mapkit

我有一个要放大的分组图钉。当然，我知道引脚的坐标，并且有它的视图。我只想将地图缩放到正确的区域，以便集群完全展开，显示所有引脚（*加上一点填充*）。这样做的好方法是什么？

**旁注：**
在我的设置中，当缩放级别增加时，集群引脚将自动扩展为单个引脚，所以我很好。我需要知道的是如何根据集群引脚的框架和坐标将 MapView 设置为新区域。

![在此处输入图像描述](../Images/99d0e986355bf6b723b0181980fd536f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-11-29T09:25:00.867

您可以使用：

```
mapView.showAnnotations(groupedAnnotations, animated: true) 
```

此方法将自动放大并定位地图，以便所有注释都可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:02:54.543

首先删除组别针

```
[mapView removeAnnotation:groupAnnotation]; 
```

然后在集群中添加引脚

```
[mapView addAnnotations:clusterAnnotations]; 
```

然后确定要缩放的区域

```
CLLocationDegrees minLat = 90;
CLLocationDegrees maxLat = -90;
CLLocationDegress minLong = 180;
CLLocationDegrees maxLong = -180
[clusterAnnotations enumerateUsingBlock:^(id<MKAnnotation> annotation, NSUInteger idx, BOOL *stop) {
    CLLocationCoordinate2D coordinate = annotation.coordinate;
    minLat = MIN(minLat, coordinate.latitude);
    maxLat = MAX(maxLat, coordinate.latitude);
    minLong = MIN(minLong, coordinate.longitude);
    maxLong = MAX(maxLong, coordinate.longitude);
}
CLLocationCoordinate2D center = CLLocationCoordinate2DMake((minLat + maxLat)/2.f, (minLong + maxLong)/2.f);
MKCoordinateSpan span = MKCoordinateSpanMake((maxLat - minLat)*1.25, (maxLong - minLong)*1.25); //1.25 is for padding
MKCoordinateRegion region = MKCoordinateRegionMake(center, span);
[mapView setRegion:[mapView regionThatFits:region] animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-02T21:08:10.780

当用户点击集群引脚时，您将收到回调

```
func mapView(_ mapView: MKMapView, didSelect view: MKAnnotationView) 
```

现在您只需要将您的`MKAnnotationView`to 转换为`MKClusterAnnotation`，然后您就可以访问其成员 pin 的集合：

```
if let clustered = view.annotation as? MKClusterAnnotation {
    clustered.memberAnnotations.forEach { (annotation) in
        // Calculate region boundaries
    }
} 
```

尼克计算的完整解决方案：

```
if let clustered = view.annotation as? MKClusterAnnotation {
    var minLat = CLLocationDegrees(exactly: 90)!
    var maxLat = CLLocationDegrees(exactly: -90)!
    var minLong = CLLocationDegrees(exactly: 180)!
    var maxLong = CLLocationDegrees(exactly: -180)!
    clustered.memberAnnotations.forEach { (annotation) in
        let coordinate = annotation.coordinate
        minLat = min(minLat, coordinate.latitude)
        maxLat = max(maxLat, coordinate.latitude)
        minLong = min(minLong, coordinate.longitude)
        maxLong = max(maxLong, coordinate.longitude)
    }

    let centerLat = (minLat + maxLat) / 2
    let centerLong = (minLong + maxLong) / 2
    let center = CLLocationCoordinate2D(latitude: centerLat, longitude: centerLong)
    let span = MKCoordinateSpan(latitudeDelta: (maxLat - minLat) * 1.5, longitudeDelta: (maxLong - minLong) * 1.5) // with some padding
    let region = MKCoordinateRegion(center: center, span: span)

    <your MKMapView>.setRegion(region, animated: true)
} 
```

# java - Android admob 致命异常

> ID：15453544
> 
> 赞同：0
> 
> 时间：2013-03-16T19:13:52.687
> 
> 标签：java, android, exception

我正在尝试向我的应用程序添加 admob 广告，但是当它启动时我在 logcat 中收到此错误。在我添加 admob 之前，该应用程序运行良好，所以我认为这与此有关。

```
03-16 19:08:00.683: E/AndroidRuntime(529): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.musicbynumbers.scalesads/com.musicbynumbers.scalesads.MainMenu}: java.lang.NullPointerException
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.os.Looper.loop(Looper.java:123)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-16 19:08:00.683: E/AndroidRuntime(529):  at java.lang.reflect.Method.invokeNative(Native Method)
03-16 19:08:00.683: E/AndroidRuntime(529):  at java.lang.reflect.Method.invoke(Method.java:521)
03-16 19:08:00.683: E/AndroidRuntime(529):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-16 19:08:00.683: E/AndroidRuntime(529):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-16 19:08:00.683: E/AndroidRuntime(529):  at dalvik.system.NativeStart.main(Native Method)
03-16 19:08:00.683: E/AndroidRuntime(529): Caused by: java.lang.NullPointerException
03-16 19:08:00.683: E/AndroidRuntime(529):  at com.musicbynumbers.scalesads.MainMenu.onCreate(MainMenu.java:69)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-16 19:08:00.683: E/AndroidRuntime(529):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-16 19:08:00.683: E/AndroidRuntime(529):  ... 11 more 
```

MainMenu的Java：

```
 package com.musicbynumbers.scales;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.Toast;

import com.musicbynumbers.pianoscalesadscopy.R;

public class MainMenu extends  LicenseCheckActivity implements View.OnClickListener   {

    Button majScales, minHarm, minMel, majArp, minArp, chrome, cont, pent,how;
    ImageButton mainMenu;
    Intent j;
    Intent k;
    Intent l;
    Intent m;
    Intent n;
    Intent o;
    Intent p;
    Intent q;
    Intent r;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
         requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFormat(PixelFormat.RGBA_8888);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
        setContentView(R.layout.activity_main_menu);
          Toast.makeText(this, "Checking Application License", Toast.LENGTH_SHORT).show();
          // Check the license
          //checkLicense();
         j = new Intent(MainMenu.this, majorScales.class);
         k = new Intent(MainMenu.this, minorHarmonic.class);
         l = new Intent(MainMenu.this, MajorArpeggios.class);
         m = new Intent(MainMenu.this, MinorArpeggios.class);
         n = new Intent(MainMenu.this, ChromaticScales.class);
         o = new Intent(MainMenu.this, ContraryMotion.class);
         p = new Intent(MainMenu.this, PentatonicScales.class);
         q = new Intent(MainMenu.this, minorMelodic.class);
         r = new Intent(MainMenu.this, HowItWorks.class);

        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        majScales = (Button) findViewById(R.id.majorscalesb);
        minHarm = (Button) findViewById(R.id.minorharmonicb);
        minMel = (Button) findViewById(R.id.minormelodicb);
        majArp = (Button) findViewById(R.id.majorarpeggiosb);
        minArp = (Button) findViewById(R.id.minorarpeggiosb);
        chrome = (Button) findViewById(R.id.chromaticscalesb);
        cont = (Button) findViewById(R.id.contraryb);
        pent = (Button) findViewById(R.id.pentatonicscaleb);
        how = (Button) findViewById(R.id.howitworksb);
        majScales.setOnClickListener(this);
        mainMenu.setOnClickListener(this);
        minHarm.setOnClickListener(this);
        minMel.setOnClickListener(this);
        majArp.setOnClickListener(this);
        minArp.setOnClickListener(this);
        chrome.setOnClickListener(this);
        cont.setOnClickListener(this);
        pent.setOnClickListener(this);
        how.setOnClickListener(this);

    }

        @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(MainMenu.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.majorscalesb:

                    startActivity(j);
                    break;
                case R.id.minorharmonicb:

                    startActivity(k);
                    break;
                case R.id.majorarpeggiosb:

                    startActivity(l);
                    break;
                case R.id.minorarpeggiosb:

                    startActivity(m);
                    break;
                case R.id.chromaticscalesb:

                    startActivity(n);
                    break;
                case R.id.contraryb:

                    startActivity(o);
                    break;
                case R.id.pentatonicscaleb:

                    startActivity(p);
                    break;
                case R.id.minormelodicb:

                    startActivity(q);
                    break;

                case R.id.howitworksb:

                    startActivity(r);
                    break;

    }

}
} 
```

活动主菜单 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/musicbynumbersbg"
    android:orientation="vertical"
    android:weightSum="100"
    tools:context=".MainMenu" >

    <ImageButton
        android:id="@+id/imagelogo"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="90"
        android:background="@drawable/topbanner"
        android:gravity="center" />

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="10" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:weightSum="100" >

            <Button
                android:id="@+id/howitworksb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="How to Use the App" />

            <Button
                android:id="@+id/majorscalesb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Major Scales" />

            <Button
                android:id="@+id/minormelodicb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Minor Melodic Scales" />

            <Button
                android:id="@+id/minorharmonicb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Minor Harmonic Scales" />

            <Button
                android:id="@+id/majorarpeggiosb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Major Arpeggios" />

            <Button
                android:id="@+id/minorarpeggiosb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Minor Arpeggios" />

            <Button
                android:id="@+id/chromaticscalesb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Chromatic Scales" />

            <Button
                android:id="@+id/contraryb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Contrary Motion" />

            <Button
                android:id="@+id/pentatonicscaleb"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:text="Pentatonic Scale" />
        </LinearLayout>
    </ScrollView>
<com.google.ads.AdView android:id="@+id/ad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adUnitId=" a15144ab55b99a9"
    ads:loadAdOnCreate="true"
    ads:adSize="BANNER"
    />
</LinearLayout> 
```

提前感谢您提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:19:55.137

我猜你没有在这里设置正确的布局。

```
setContentView(R.layout.activity_main_menu);  <<You set the menu layout. 
```

您必须设置 res 文件夹中的布局。

如果您在 res 文件夹中有 layout.xml，则将其设置为

```
setContentView(R.layout.layout); 
```

编辑：清理项目并运行它。

# android - 在matlab中创建一个游戏并将其移植到android。

> ID：15453545
> 
> 赞同：0
> 
> 时间：2013-03-16T19:14:09.963
> 
> 标签：android, matlab

我是新手，我喜欢尝试创建游戏。

所以，我知道为 android 创建游戏的最佳方式是使用 JAVA。

问题是，我在 matlab 中编程要舒服得多，所以正如标题所说，我想问的是：

有没有办法/教程在matlab中创建游戏并将其移植到android？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:06:35.633

你可以尝试这样做。我在 Matlab 中的编程也更加舒适。但是，我建议您尝试其他语言。

几个月前我开始学习 Python 2.7。你很快就会觉得这种语言很舒服，如果你想创建一个很酷的游戏，它会提供更多的优势。

Python 有一些模块（numpy 和 scipy），它们具有许多您在 Matlab 中习惯使用的功能。

也有很多在线课程可以学习 Python。

您也可以尝试学习 Android 或 Java，但我认为这是一个更高的跳跃。祝你好运！

# paypal - Paypal REST API：详细信息对象中未返回费用

> ID：15453549
> 
> 赞同：3
> 
> 时间：2013-03-16T19:14:50.837
> 
> 标签：paypal

文档中的“常见对象”部分列出了 API 在支付响应中返回的费用。但是，它说*optional*，并且在我的测试中（使用生产凭证），费用不会被退回。我需要传递一个参数来强制它返回吗？

# perl - 为什么要使用这个奇怪的包名变体？

> ID：15453553
> 
> 赞同：3
> 
> 时间：2013-03-16T19:15:05.313
> 
> 标签：perl, dbix-class

有人可以解释一下程序员使用这个变体“包名称”的目标是什么，就像在DBIx::Class 模块中的那个文件[SQLite.pm中一样？](https://github.com/dbsrgits/dbix-class/blob/master/lib/DBIx/Class/SQLAHacks/SQLite.pm)完整清单：

```
package # Hide from PAUSE
  DBIx::Class::SQLAHacks::SQLite;

use warnings;
use strict;

use base qw( DBIx::Class::SQLMaker::SQLite );

1; 
```

为什么包的名称写在“包”后面的另一行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T19:28:53.247

Perl 不关心`package`包名之间的空格和注释，但[PAUSE](http://pause.perl.org/)索引器关心。它不会索引看起来像那样的包。DBIx::Class 的人不希望该类被索引。

另一种（更标准的）方法是 META.json 或 META.yml 文件中的[`no_index`键](https://metacpan.org/module/CPAN%3a%3aMeta%3a%3aSpec#no_index)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:17:50.333

这是合法的语法，我假设 PAUSE（CPAN 作者用于上传的网站）做了一些检查，这个结构避免了

# mysql - Mysql 配置文件部分

> ID：15453555
> 
> 赞同：18
> 
> 时间：2013-03-16T19:15:10.027
> 
> 标签：mysql

我试图了解 my.ini 配置文件（[client]、[mysqld]、[mysql]）等中的不同部分，我正在寻找描述 my.ini 文件的每个可选部分的指南, 另外我想知道**init_connect**和**init-connect**之间有什么区别，我的意思是下划线（_）和连字符（-）之间，谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-16T19:46:21.510

**【mysql】**适用于mysql命令行客户端- [【mysql和客户端选项】](https://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html)

**[client]**适用于所有连接的客户端（包括 mysql cli） - [[mysql 和客户端选项]](https://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html)

**[mysqld]**适用于 mysql 服务器 - [[服务器选项]](http://dev.mysql.com/doc/refman/5.5/en/server-options.html)

**[mysqldump]**适用于同名实用程序 - [[mysqldump options]](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)

...ETC

(-) 和 (_) 之间的区别在于使用它的上下文。

(-) 用于命令行参数，其中 (_) 用于选项文件参数。

您可以在文档中看到更多信息：http: [//dev.mysql.com/doc/refman/5.5/en/option-files.html](http://dev.mysql.com/doc/refman/5.5/en/option-files.html)

# jsp - 带有 c:url 标记的 JSP 错误

> ID：15453564
> 
> 赞同：1
> 
> 时间：2013-03-16T19:15:48.863
> 
> 标签：jsp, jstl

所以我设置了这个特殊的表格：

```
<form class="navbar-form pull-right" method="post" action="<c:url value="j_spring_security_check" />">
    <input class="span2" type="text" placeholder="Email" name="j_username" value="<c:if test="${not empty param.login_error}"><c:out value="${SPRING_SECURITY_LAST_USERNAME}"/></c:if>">
    <input class="span2" type="password" placeholder="Password" name="j_password">
    <button type="submit" class="btn">Sign In</button>
</form> 
```

但表格最终看起来像这样： ![在此处输入图像描述](../Images/e858d1d1f2ab19c1541303d6c3cffeb4.png)

我该如何解决？这是我的包括：

```
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="html" tagdir="/WEB-INF/tags/html" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles" %> 
```

关于我的配置 - 我正在使用 Spring MVC 3.2、Apache Tiles 3、Spring Security 3、Tomcat 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:13:08.437

我得到了答案。问题是该`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>`标签未包含在 template.jsp 文件中。这是人们通常为 Apache Tiles 配置的文件。我手动将该行复制并粘贴到与我的表单相同的文件中。

# r - R tcltk：tkframe 的标题

> ID：15453567
> 
> 赞同：0
> 
> 时间：2013-03-16T19:16:18.390
> 
> 标签：r

我认为这是一个简单的问题，但无法弄清楚。我正在尝试构建一个框架并希望可以为其添加标题。例如，我喜欢在框架中创建一个滑块。但是为了识别框架，我想给它添加一个标题。我没有名声，所以我不能添加图片，但类似于下面的“标题”一词：

- - 标题 - - - - - - - - - - - - - - - -

| ===[ ]====================|

------------------------------------------------------

或者：

![在此处输入图像描述](../Images/d0460c260598c7945ced5c0f8811bba4.png)

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:08:44.440

查看`ttklabelframe`tcltk 包中的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:48:19.663

有一个名为 rpanel 的包，其中的框架都以某种方式命名。你可能想看看那个。

# c# - 从列表中获取对象名称

> ID：15453569
> 
> 赞同：1
> 
> 时间：2013-03-16T19:16:37.403
> 
> 标签：c#, list, object, identifier

有没有办法检索存储在列表中的对象的名称？

我想要做的是在打印出该矩阵的属性之前添加一个对象名称 - 在这种特殊情况下是矩阵的名称。

```
internal class Program
{
    private static void Main(string[] args)
    {
        //Create a collection to help iterate later
        List<Matrix> list_matrix = new List<Matrix>();

        //Test if all overloads work as they should.
        Matrix mat01 = new Matrix();
        list_matrix.Add(mat01);

        Matrix mat02 = new Matrix(3);
        list_matrix.Add(mat02);

        Matrix mat03 = new Matrix(2, 3);
        list_matrix.Add(mat03);

        Matrix mat04 = new Matrix(new[,] { { 1, 1, 3, }, { 4, 5, 6 } });
        list_matrix.Add(mat04);

        //Test if all methods work as they should.     
        foreach (Matrix mat in list_matrix) 
        {
            //Invoking counter of rows & columns
            //HERE IS what I need - instead of XXXX there should be mat01, mat02...
            Console.WriteLine("Matrix XXXX has {0} Rows and {1} Columns", mat.countRows(), mat.countColumns()); 
        }
    }
} 
```

总之我需要这里

```
Console.WriteLine("Matrix XXXX has {0} Rows and {1} Columns",
                  mat.countRows(),
                  mat.countColumns()); 
```

一种写出特定对象名称的方法 - 矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:20:48.723

## 变量名作为属性

您无法检索“曾经用于”声明矩阵的对象引用名称。我能想到的最佳选择是将字符串属性添加`Name`到 Matrix 并将其设置为适当的值。

```
 Matrix mat01 = new Matrix();
    mat01.Name = "mat01";
    list_matrix.Add(mat01);

    Matrix mat02 = new Matrix(3);
    mat02.Name = "mat02";
    list_matrix.Add(mat02); 
```

这样你就可以输出矩阵的名称

```
foreach (Matrix mat in list_matrix)
{
    Console.WriteLine("Matrix {0} has {1} Rows and {2} Columns", 
        mat.Name, 
        mat.countRows(), 
        mat.countColumns());
} 
```

## 使用 Lambda 表达式的替代方法

正如 Bryan Crosby 所提到的，有一种方法可以使用 lambda 表达式在代码中获取变量名，[本文对此进行了解释](https://stackoverflow.com/questions/2566101/how-to-get-variable-name-using-reflection)。这里有一个小单元测试，展示了如何在代码中应用它。

```
 [Test]
    public void CreateMatrix()
    {
        var matrixVariableName = new Matrix(new [,] {{1, 2, 3,}, {1, 2, 3}});
        Assert.AreEqual("matrixVariableName", GetVariableName(() => matrixVariableName));
    }

    static string GetVariableName<T>(Expression<Func<T>> expr)
    {
        var body = (MemberExpression)expr.Body;

        return body.Member.Name;
    } 
```

PS：请注意他对性能惩罚的警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:29:23.560

```
int i=0;
foreach (Matrix mat in list_matrix) 
{
 i++;
Console.WriteLine("Matrix mat{0} has {1} Rows and {2} Columns", i, mat.countRows(), mat.countColumns()); 
 } 
```

# iphone - 在 iphone chrome 浏览器上调试 jquery mobile

> ID：15453573
> 
> 赞同：0
> 
> 时间：2013-03-16T19:17:01.210
> 
> 标签：iphone, debugging, jquery-mobile

我在移动站点中有一个简单的登录页面，用户第一次到达该站点时就应该到达该页面。它以前可以工作（我曾经通过清除手机上的cookie来测试它。）现在它已经停止工作了，我不知道如何调试它。以下是症状

1.  它适用于在 iphone 上运行的 safari
2.  它适用于 ipad chrome
3.  它适用于桌面 chrome（和涟漪 iphone 模拟器）
4.  但它**不适用于**在 iphone 上运行的chrome 浏览器

关于如何调试此问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:26:46.650

原来我两天前已经完成了 chrome 升级。我没有重新启动iPhone。我关闭并打开电话，它工作。

# android - Android：检查 GPS 是否正在搜索、已修复或未使用

> ID：15453576
> 
> 赞同：5
> 
> 时间：2013-03-16T19:17:20.403
> 
> 标签：android, gps

我想知道Android（GingerBread）中是否有办法知道GPS目前是否正在做某事。让我更清楚一点：我基本上想调用一些方法或 api 来告诉我 GPS 是否是：

1）已修复（状态栏上的 GPS 图标打开）
2）正在搜索修复（状态栏上的 GPS 图标闪烁）
3）未激活（目前没有应用正在使用定位服务，状态栏上没有图标）

现在：我知道您可以使用 LocationListener 来收到此类更改的通知，但这对我不利，因为我不希望我的代码继续运行等待事件，我的代码在预定时间定期运行，做某事并且然后终止，所以我需要一种方法来检查那个精确时刻 GPS 服务的状态，而不是等待它何时发生变化的通知。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-28T07:52:27.090

在对 GPS 进行了大量测试后，我终于找到了解决方案。当 android 应用程序调用位置管理器并且 GPS 开始搜索时，会触发一个事件，并且当 gps 锁定时会触发另一个事件。以下代码显示了如何执行此操作。

```
locationManager = (LocationManager)mContext.getSystemService(LOCATION_SERVICE);
isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    if (isGPSEnabled) {                 
        if (locationManager != null) {
            // Register GPSStatus listener for events
            locationManager.addGpsStatusListener(mGPSStatusListener); 
            gpslocationListener = new LocationListener() {
                public void onLocationChanged(Location loc) {}
                public void onStatusChanged(String provider, int status, Bundle extras) {}
                public void onProviderEnabled(String provider) {}
                public void onProviderDisabled(String provider) {}                          
            };  

               locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MIN_TIME_BW_UPDATES_GPS, MIN_DISTANCE_CHANGE_FOR_UPDATES_GPS,
                gpslocationListener);           
        }
    } 
```

/* * 这是在发生各种事件时调用的 GPSListener 函数，例如 * GPS 启动、GPS 停止、GPS 锁定 */

```
public Listener mGPSStatusListener = new GpsStatus.Listener() {  
    public void onGpsStatusChanged(int event) {     
        switch(event) {
            case GpsStatus.GPS_EVENT_STARTED:
                Toast.makeText(mContext, "GPS_SEARCHING", Toast.LENGTH_SHORT).show();
                System.out.println("TAG - GPS searching: ");                        
                break;
            case GpsStatus.GPS_EVENT_STOPPED:    
                System.out.println("TAG - GPS Stopped");
                break;
            case GpsStatus.GPS_EVENT_FIRST_FIX:

                /*
                 * GPS_EVENT_FIRST_FIX Event is called when GPS is locked            
                 */
                    Toast.makeText(mContext, "GPS_LOCKED", Toast.LENGTH_SHORT).show();
                    Location gpslocation = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);

                    if(gpslocation != null) {       
                    System.out.println("GPS Info:"+gpslocation.getLatitude()+":"+gpslocation.getLongitude());

                    /*
                     * Removing the GPS status listener once GPS is locked  
                     */
                        locationManager.removeGpsStatusListener(mGPSStatusListener);                
                    }               

                break;
            case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
 //                 System.out.println("TAG - GPS_EVENT_SATELLITE_STATUS");
                break;                  
       }
   }
}; 
```

最好将 GPS 代码放入并作为获取 GPS 位置信息的服务。

每次调用 GPS 函数时，都会注册 GPSStatus 监听器。GPS_SEARCHING toast 仅在 GPS 开始搜索时出现一次，GPS_LOCKED toast 在 GPS 锁定时显示。如果我们再次调用 GPS 函数，如果 GPS_EVENT_FIRST_FIX 事件被锁定（显示 GPS_LOCKED toast），则触发 GPS_EVENT_FIRST_FIX 事件，如果 GPS 已经开始搜索，则不会显示 GPS_SEARCHING toast（即 GPS_STARTED 事件不会触发）。触发 GPS_EVENT_FIRST_FIX 事件后，我将删除 GPSstatus 侦听器更新。

当 GPS_EVENT_FIRST_FIX 事件被触发时，最好调用 gpslastknownlocation() 函数来获取最新的 GPS 修复。（最好查看 Android 开发者网站以获取更多信息）。

我希望这对其他人有帮助....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:56:20.747

Unfortunately, there's no easy way to get the "current state" of the GPS in Android. Like others have pointed out, your best bet is to register for the `onGpsStatusChanged()` event and track the state.

If you are feeling adventurous, you can call call `$ dumpsys location` from an adb shell to get the state of the gps provider. You usually call `$ adb shell` from your desktop, but you can compile a native android shell app, and call an `exec()` from inside the shell to get the `dumpsys` output directly on the phone.

# php - Twig 中的 Unescape 或 html 解码（PHP 模板）

> ID：15453579
> 
> 赞同：31
> 
> 时间：2013-03-16T19:17:24.303
> 
> 标签：php, twig

我正在使用树枝 1.12.2。我的代码从代码隐藏中生成一些元素，当使用最新版本的 twig 渲染这些元素时，它们会被 html 编码

```
{% for item in files_folders %}
<tr class="{{ cycle(['tr_odd', 'tr_even'], loop.index) }}">
    <td><img src="../templates/images/sharepoint/{{ item.ContentType }}.gif" border="0" alt=""/></td>
    <td>{{ item.Link }}</td>
    <td>{{ item.Modified }}</td>
    <td>{{ item.FileSize }}</td>
    <td>{{ item.FileType }}</td>
</tr>
{% endfor %} 
```

这将输出这个

```
<tr class="tr_even">
    <td><img src="../templates/images/sharepoint/Document.gif" border="0" alt=""/></td>
    <td>&lt;a href=&#039;?download=/ddd.png&#039;&gt;ddd.png&lt;/a&gt;</td>
    <td>2013-03-04 17:47:38</td>
    <td>64.8 KB</td>
    <td>png</td>
</tr>
<tr class="tr_odd">
    <td><img src="../templates/images/sharepoint/Document.gif" border="0" alt=""/></td>
    <td>&lt;a href=&#039;?download=/asdasd.png&#039;&gt;asdasd.png&lt;/a&gt;</td>
    <td>2013-03-03 20:01:52</td>
    <td>66.04 KB</td>
    <td>png</td>
</tr> 
```

当我在发送到树枝之前调试并查看数据时，它不会被转义。我还没有找到 {{ item.Link }} 的任何替代方法来按原样呈现数据。

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-16T19:22:48.130

您可以使用`raw`过滤器使 twig 呈现原始 html

[http://twig.sensiolabs.org/doc/filters/raw.html](http://twig.sensiolabs.org/doc/filters/raw.html)

```
{% autoescape %}
    {{ var|raw }} {# var won't be escaped #}
{% endautoescape %} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-22T15:16:03.417

您应该小心使用 |raw。说数据是安全的，意味着您 100% 信任它。

我个人建议使用自定义树枝过滤器：

```
class CustomExtension extends \Twig_Extension 
{
    public function getFilters()
    {
        return array(
            new \Twig_SimpleFilter('unescape', array($this, 'unescape')),
        );
    }

    public function unescape($value)
    {
        return html_entity_decode($value);
    }
} 
```

将以下内容添加到您的 services.yml（或转换为 xml）。

```
 services:
     ha.twig.custom_extension:
     class: HA\SiteBundle\Twig\CustomExtension
     tags:
         - { name: twig.extension } 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-10-11T23:58:13.340

或[http://twig.sensiolabs.org/doc/filters/raw.html](http://twig.sensiolabs.org/doc/filters/raw.html)

```
{% autoescape false %}
   {{ your_item }}{# your_item won't be escaped #}
{% endautoescape %} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-05T23:00:13.003

如果您使用的是 Drupal 8 并且没有任何一个`raw`或`autoscape`工作，这可能是因为您尝试打印的变量，如果它是一个带有保存安全输出的模板的渲染数组（例如，`hl2br`过滤器）。

在这种情况下，您需要通过渲染数组访问该值并对其进行过滤，例如：

```
{% autoescape false %}
  {{ item.content['#context']['value'] }}
{% endautoescape %} 
```

# java - java如何同时使用多个网络接口？

> ID：15453580
> 
> 赞同：2
> 
> 时间：2013-03-16T19:17:26.663
> 
> 标签：java, network-interface

我正在开发一个需要检查不同网络接口（如 wifi、lan、dongles 等）信号强度的软件。我想测量（绝对或相对）信号强度并找出所有强度大于的网络接口的 ipaddress一些阈值。我怎样才能在 JAVA 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:04:07.010

[http://www.java2s.com/Open-Source/Android/UnTagged/mytracks/com/google/android/apps/mytracks/signalstrength/SignalStrengthListenerCupcake.java.htm](http://www.java2s.com/Open-Source/Android/UnTagged/mytracks/com/google/android/apps/mytracks/signalstrength/SignalStrengthListenerCupcake.java.htm)有一些适用于 Android 的代码。不过，我无法审查它，因为我使用 iOS 比使用 Android 更多。

对于桌面，没有纯 Java 解决方案，因为 JVM 没有公开这些网络信息。如果您必须走这条路，您有两个基本选择：1）通过 java 调用命令行并从另一个命令中提取数据，或者 2）使用 JNI。这两种方法都不是可移植的，它们都需要相当大的努力。[Linux ( http://www.cyberciti.biz/tips/linux-find-out-wireless-network-speed-signal-strength.html](http://www.cyberciti.biz/tips/linux-find-out-wireless-network-speed-signal-strength.html) )可用的 1 的变体是解析文件 '/proc/net /无线'来自Java。

很抱歉不能给你更好的消息。您可以尝试与 Oracle 一起赞助 RFC，它确实让我觉得添加到 JVM 网络库的有用信息。

# java - if 语句的复杂性

> ID：15453581
> 
> 赞同：-2
> 
> 时间：2013-03-16T19:17:47.110
> 
> 标签：java, c, complexity-theory, time-complexity, space-complexity

我想知道遵循 if 语句的复杂性

```
if (isTrue()) //case 1 
```

VS

```
if(isTrue()==true) //case 2 
```

并且 isTrue 定义为

```
boolean isTrue(){
//lots of calculation and return true false based on that.
 return output;
} 
```

我当时在想，复杂性`if (isTrue())`要低一些，`if(isTrue()==true)`因为在案例 2 中需要对 equals 进行额外比较。

空间复杂度如何？

有什么不一样的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:20:33.413

它们在速度/空间上都是相同的。但第二种方式对于 C/C++ 程序员来说很奇怪。

*不同的是，第二种方式的可读性较差。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:20:22.343

它们是等价的。并且在进行全局优化时完全删除了条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:12:29.950

`==true`如果您或其他人重新定义 的值，则第二种情况（检查）可能会出现问题`true`。

假设我们有以下 C 代码：

```
#define true 2

bool isEqual(int a, int b)
{
    return (a == b);
}

if (isEqual(5, 5)) {
    printf("isEqual #1\n");
}

if (isEqual(5, 5) == true) {
    printf("isEqual #2\n");
} 
```

此代码的输出将是

```
isEqual #1 
```

因此，您省略的较短形式`==true`更可取，不仅因为它可以减少冗长的代码，而且还因为您可以避免此类潜在问题。

# iis-7.5 - 在作为根目录的子文件夹的子域上安装 umbraco

> ID：15453582
> 
> 赞同：2
> 
> 时间：2013-03-16T19:17:49.450
> 
> 标签：iis-7.5, umbraco

[我在子文件夹或虚拟目录中遇到](https://stackoverflow.com/questions/8085207/umbraco-4-7-in-a-subfolder-or-virtual-directory)了与 Umbraco (4.7) 类似的问题？但不完全是。

我有一个作为子域 (newmain.mydomain.com) 运行的 umbraco 安装。我们在我的服务器上创建子域的方式是在主站点下创建一个应用程序，然后让根目录下的 web.config 负责 url 重写。这对我所有的其他子域都很好，但 umbraco 似乎根本不喜欢它。有人可以在 umbraco web.config （或其他地方）中指出我正确的方向来帮助我完成这项工作吗？也许我需要更好地重写根目录的 web.config，但我不确定要进行哪些更改。

由于各种原因，我不愿意创建另一个根级网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:52:27.073

我最终将其移至更标准样式的子域。我认为必须以这种方式配置它令人失望。

# java - 随机更改 stringbuilder 变量

> ID：15453583
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:17:49.787
> 
> 标签：java, random, char, stringbuilder

我正在尝试创建一个程序，该程序要求用户提供全名，然后将该名称分配给一个`StringBuilder`变量。然后我必须创建一个无限循环，该循环将`StringBuilder`随机更改变量，直到程序崩溃。

有谁知道如何`StringBuilder`随机更改变量？

我做了同样的项目，但使用了这样的字符串变量：

```
for (;;) {

  for (int i = 0; i < fullNameChar.length; i++) {
    int randomNum = generator.nextInt(133);
    fullNameChar[i] = (char) randomNum;
  }

  fullName = String.valueOf(fullNameChar);
  System.out.println(fullName);
} 
```

我猜你不能将字符串生成器转换为字符，所以我必须找到另一种方法来做到这一点。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:21:59.207

只需将随机值附加到字符串生成器：

```
StringBuilder randomBuilder = new StringBuilder();
int max = 16;  // just an example for a 16 char result 
for (int i = 0; i < max; i++) {
    int randomNum = generator.nextInt(133);
    randomBuilder.append((char) randomNum));
}
System.out.println(randomBuilder.toString()); 
```

# android - Firefox for Android 内容提供商？

> ID：15453587
> 
> 赞同：2
> 
> 时间：2013-03-16T19:18:08.650
> 
> 标签：android, firefox, android-contentprovider

有人可以给我一个例子，说明我如何使用 Firefox for Android 内容提供程序来获取我的应用历史记录中的链接列表？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-20T19:03:27.497

`ContentProvider`第三方应用程序无法访问Firefox 。[这是清单](https://mxr.mozilla.org/mozilla-central/source/mobile/android/base/AndroidManifest.xml.in#375)中的许可声明：

```
<permission android:name="@ANDROID_PACKAGE_NAME@.permissions.BROWSER_PROVIDER"
    android:protectionLevel="signature"/> 
```

A `protectionLevel`of`"signature"`表示该权限仅适用于使用相同密钥签名的应用程序。除非他们更改此设置，否则您的应用无法访问`ContentProvider`.

# android - 如何判断软键盘是否处于提取模式？

> ID：15453590
> 
> 赞同：1
> 
> 时间：2013-03-16T19:18:30.210
> 
> 标签：android, android-layout, android-view, android-softkeyboard

在横向时，我希望能够判断弹出的 spoftkeyboard 是否占据了整个屏幕。我知道这取决于设备，但是如何判断当前设备是否在横向模式下使用全屏键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:27:20.893

刚刚发现`InputMethodManager`包含一个名为`isFullscreenMode()`. 我相信这是一个很好的检查方法......

# javascript - Javascript 不是 (a==b) || 不是 (c==b)

> ID：15453591
> 
> 赞同：0
> 
> 时间：2013-03-16T19:18:35.513
> 
> 标签：javascript, comparison, logical-operators

我一直在尝试让以下比较运算符工作。第二个“if”总是执行代码中的下一条语句。我想要的是能够检测到 entryType 或 followupEntryType 何时不等于字符串“Long Term Care” 这是代码......

```
function getComboB(sel) {

    var value = sel.options[sel.selectedIndex].value;
    if (value == "Rehab") {
        if (!(document.getElementById('entryType').value == "Long Term Care") || !(document.getElementById('followupEntryType').value == "Long Term Care")) {
            document.getElementById('followupEntryType').value = "Long Term Care";
            alert("short-term rehab code");
            return true;
        } else {
            alert("long-term rehab code");
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:22:54.900

这是发生了什么，这是你想要的吗？

```
if(true || true)
{
console.log('second check will not be executed');
}

if(true || false)
{
console.log('second check will not be executed');
}

if(false || false)
{
console.log('second check will be executed');
}

if(false || true)
{
console.log('second check will be executed');
} 
```

如果要检查 EITHER 是否为假，则应使用`&&`, 并将代码移动到`else`块中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:23:12.950

```
function getComboB(sel) {

var value = sel.options[sel.selectedIndex].value; 
if (value == "Rehab") {
  if (document.getElementById('entryType').value != "Long Term Care" && document.getElementById('followupEntryType').value != "Long Term Care") {
    document.getElementById('followupEntryType').value = "Long Term Care";
    alert ("short-term rehab code");
    return true;
  } else {
    alert ("long-term rehab code");
    return true;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:31:21.050

不，第二个`if`并不总是执行下一个语句。如果两个值都是`"Long Term Care"`，那么它将执行`else`部分中的代码。IE：

```
<input type="text" id="entryType" value="Long Term Care" />
<input type="text" id="followupEntryType" value="Long Term Care" /> 
```

演示：http: [//jsfiddle.net/QW43B/](http://jsfiddle.net/QW43B/)

如果您希望在两个值都不同的情况下条件为真`"Long Term Care"`（即它将进入`else`if any value is `"Long Term Care"`），您应该使用`&&`运算符：

```
if (!(document.getElementById('entryType').value == "Long Term Care") && !(document.getElementById('followupEntryType').value == "Long Term Care")) { 
```

# c++ - 指针和递归 - 我正在尝试节省内存

> ID：15453592
> 
> 赞同：0
> 
> 时间：2013-03-16T19:18:37.330
> 
> 标签：c++, function, pointers, reference, recurrence

我正在尝试编写为字符串创建 squere 的程序。Squere 必须大于 string.length()。如果有单词“C++”，我需要 2x2 数组来填充它。所以我写了代码

```
 #include <cmath>
#include <cstdlib>
#include <iostream>
#include <string>
using namespace std;
int pole(int &a,const int* l);
int main(){
    string code;
    cin >> code;
    int wall=1;
    pole(wall,code.length());
    cout << wall;
    system("PAUSE");
    return 0;
}
int pole(int &a,const int* l){
    if (a*a > l) return a;
    else {
    a+=1;
    pole(a,l);
    }
} 
```

我敢打赌，使用具有重复性的指针可以节省大量内存，但我无法编译它。我正在尝试理解编译器错误，但对我来说很难 2 ；/

这是编译器错误列表

```
> in main() 
11 25 Error] invalid initialization of non-const reference of type 'int&' from an rvalue of type 'int (*)(int&, const int*)' 
 6 5> [Error] in passing argument 1 of 'int pole(int&, const int*)' 
 in pole() 17 12 
>[Error] ISO C++ forbids comparison between pointer and
> integer [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:24:55.230

这里：

```
pole(pole, code.length()); 
```

您将 的结果作为第二个变量传递`length()`，它的类型为`std::string::size_type`，函数`pole`接受指向 的指针`int`。这两种类型是不兼容的。

第二个问题是你的`if`语句里面的一个分支`pole`不包含一个`return`语句，从而给你的程序未定义的行为。

您可能希望以`pole`这种方式更改您的功能：

```
int pole(int &a, std::string::size_type l) {
//               ^^^^^^^^^^^^^^^^^^^^^^
//               Also, passing by reference is unnecessary here

    if (a*a > static_cast<int>(l)) return a;
//            ^^^^^^^^^^^^^^^^
//            Just to communicate that you are aware of the
//            signed-to-unsigned comparison here
    else {
    a+=1;
    return pole(a,l);
//  ^^^^^^
//  Do not forget this, or your program will have Undefined Behavior!
    }
} 
```

[在这里](http://liveworkspace.org/code/4cvdpz%2445)您可以看到您修改后的程序编译并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:24:37.117

您正在尝试使用[无符号整数](http://www.cplusplus.com/reference/string/string/length/)（来自`std::string::length`）作为指针：

```
pole(wall,code.length()); 
```

将您的极点声明更改为：

```
int pole(int a, int l); 
```

在那里节省内存`int`只是无稽之谈。指针有时甚至比简单整数更昂贵。

你应该学会用大对象来节省内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:30:15.210

```
int pole(int &a,const int* l){
    if (a*a > l) return a;
    else {
    a+=1;
    pole(a,l);
    }
} 
```

首先，您不能`int* l`使用`size_t`参数进行初始化。您也可以稍后在地址之间进行比较，而不是指向值。这是你想要的吗？

# c - 从 void* 转换为 struct

> ID：15453593
> 
> 赞同：7
> 
> 时间：2013-03-16T19:18:37.840
> 
> 标签：c, struct, void-pointers

我将 struct Person 类型的数据传递给链表，因此每个节点的数据指针都指向一个 struct Person。

```
struct Person {
char name[16];
char text[24];
}; 
```

我正在尝试遍历列表并通过调用打印每个节点中的名称/文本

```
traverse(&list, &print); 
```

遍历的原型是：

```
void traverseList(struct List *list, void (*f)(void *)); 
```

列表定义为：

```
struct List {
struct Node *head;
}; 
```

我的打印函数接受一个 void * 数据：

```
print(void *data) { .... } 
```

我知道我必须将数据转换为 struct Person，对吗？

```
struct Person *person = (struct Person *)data;
printf("%s", person->name); 
```

我知道这还不够，因为我收到“从不兼容的指针类型初始化”警告。在这种情况下，我怎样才能成功施放 void*？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:46:41.080

问题不在于演员阵容，甚至不在于您传递函数的方式。问题是您的声明`print`缺少返回类型，在这种情况下`int`通常是假定的。编译器在抱怨，因为您将 a 传递`int (*)(void*)`给期望 a 的函数`void (*)(void*)`。

这很容易解决：只需在函数声明`void`前添加即可。`print`看：

[https://gist.github.com/ods94065/5178095](https://gist.github.com/ods94065/5178095)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:22:01.853

> 我的打印功能接受 void * 数据

我会说，`print`通过接受来重写你的函数`struct Person *`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:42:32.200

您的 traverseList 函数接受一个函数指针（它接受一个 void 指针），但它不接受该 void 数据的参数。看来这就是你所追求的：

```
void print (void* data)
{
    printf("%s", ((struct Person*)data)->name);
}

void traverseList (struct List *list, void(*f)(void*), void* data)
{
    f(data);
} 
```

然后可以调用traverseList：

```
traverseList (&list, &print, &person); 
```

# php - Zend 数据库不产生价值

> ID：15453594
> 
> 赞同：2
> 
> 时间：2013-03-16T19:18:50.817
> 
> 标签：php, database, zend-framework

请帮忙！知道为什么要打印：

**数组 ( [0] => stdClass Object ( [jobid] => 1 ) )**而不是它的值？

```
 $this->dbo->setFetchMode(Zend_Db::FETCH_OBJ);
    $userOffer = $this->dbo->select()
    ->from('offer', array('jobid'))
    ->where('userid'.' = ?', $userID);

    $userAccept = $this->dbo->select()
    ->from('acceptance', array('jobid'))
    ->where("userid".' = ?', $userID);

    $select = $this->dbo->select()
    ->union(array($userOffer, $userAccept))
    ->order("jobid");

    while ($row = $this->dbo->fetchAll($select)) { 
        print_r ($row);
        //return $row;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:23:39.577

```
return $row[0]->jobid; 
```

改用那个。您需要返回作为对象的行索引，然后访问属性`jobid`。这就是你要这样做的方式，所以它返回`1`.

# ruby-on-rails - activemerchant 贝宝网关配置

> ID：15453597
> 
> 赞同：11
> 
> 时间：2013-03-16T19:19:32.493
> 
> 标签：ruby-on-rails, ruby, paypal, payment-gateway, activemerchant

我正在尝试在 railscasts 教程的帮助下配置我的 paypal 网关和 activemerchant，但我有点困惑，因为网关信息已经改变。

这是教程中的旧配置：

```
gateway = ActiveMerchant::Billing::PaypalGateway.new(
  login: "...",
  password: "...",
  signature: "..."
) 
```

在我的 PaypalSandbox-Account 中，我只有这个：

1.  终点：“……”
2.  客户编号：“……”
3.  秘密： ”...”

什么是正确的配置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T20:12:32.400

您的网关需要的是经典凭证。为了获得您的这些，您必须首先创建一个 Paypal 沙盒帐户作为您的卖家。确保它是商业/商家类型的帐户。

完成此操作后，单击该帐户的“个人资料”链接，在“API 凭据”选项卡下查看。这将列出您需要的所有信息。

1.  贝宝 API 用户名
2.  贝宝 API 签名
3.  贝宝 API 密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-11T22:30:35.997

从头开始测试

首先你必须去[Paypal 开发者的网站](https://developer.paypal.com/developer/accounts/)并创建和帐户

然后生成沙箱用户类型，`business`然后单击`Profile`选项，然后单击`API Credentials`选项卡，您最终将获得所需的数据，例如登录名/用户名，密码/密码，签名/签名

[![在此处输入图像描述](../Images/afb108af640b170ebb84ab73c8cd98f4.png)](https://i.stack.imgur.com/c612y.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T12:59:53.460

```
require 'active_merchant'

    ActiveMerchant::Billing::Base.mode = :test
    paypal_options = {
        login: "activemerchant-test_api1.example.com",
        password: "HBC6A84QLRWC923A",
        signature: "AFcWxV21C7fd0v3bYYYRCpSSRl31AC-11AKBL8FFO9tjImL311y8a0hx"
    }
    @gateway = ActiveMerchant::Billing::PaypalExpressGateway.new(paypal_options)

    response = @gateway.setup_purchase(50,
        ip: request.remote_ip,
        return_url: "http://local.mywebdomain.com:3000/mylocalhostpaymentsucceed",
        cancel_return_url: "http://local.mywebdomain.com:3000/seeyouagain",
        currency: "USD",
        allow_guest_checkout: true,
        items: [{name: "Order", description: "Order description", quantity: "1", amount: 50}]
    )
    redirect_to  @gateway.redirect_url_for(response.token) 
```

另一个技巧是如何将 localhost 设置为 local.mywebdomain.com。只需将您机器的 system32 文件夹中的 .host 文件编辑为

```
127.0.0.1 local.mywebdomain.com 
```

# javascript - HTML5 视频可以直接传输到服务 HTTP 的同一个 TCP 服务器吗？

> ID：15453606
> 
> 赞同：1
> 
> 时间：2013-03-16T19:20:25.067
> 
> 标签：javascript, html, video, tcp, stream

假设您使用的是最新的 Chrome 或 Firefox 的 Beta，现在使用 HTML5 显示来自摄像机的内容似乎很简单。[查看器演示](http://www.simpl.info/getusermedia/)

同样清楚的是，仅使用 HTML5（JavaScript，无插件），您可以运行视频会议。[视频会议演示](https://apprtc.appspot.com/)（需要最新的 Chrome 或 Firefox Nightly） 传输视频的首选方式似乎是直接点对点传输，这就是示例的工作方式。[附加阅读](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

但是，**我更喜欢**将视频作为单向视频源传输到服务器，并让服务器自行决定如何处理视频流。（保存、广播、转换等）

您能否建议我为数据硬编码目标端口号和 IP 地址的方法？有没有办法用 TCP 做到这一点？在将流应用于 TCP 连接之前，有没有办法让我自己进行握手？TCP 连接可以用 TLS 加密吗？

**可能的线索：**视频[会议演示](https://apprtc.appspot.com/)写入 JavaScript`console`日志，查看该日志表明它支持少量对等协议。a）点对点数据可以在同一子网或通过互联网传输，或者如果防火墙不允许，则通过回显服务器（我认为这是某些实现的选项）。b) 数据可以通过 TCP 或 UDP 传输。

我还读到[RTCDataChannel](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-rtcdatachannel)支持 DTLS。（所以也许它也支持纯 TLS）无论哪种方式，我都觉得它可以被伪装成视频会议对等体的服务器强制直接连接到服务器，但我不知道如何。

我希望使用这个解决方案，因为与我发现的基于 Java 的替代方案相比，这些演示的性能要好得多（更高的 FPS，更少的延迟，甚至在网络层之前）。有可能我可以用 Flash 代替，但我对它不熟悉，而且我觉得使用 HTML5 会更好，即使目前它的吸引力稍差一些。（需要 Chrome 或 Firefox 的实验版本）

# python - 从 pycurl 返回的字典中提取数据

> ID：15453608
> 
> 赞同：5
> 
> 时间：2013-03-16T19:20:32.920
> 
> 标签：python, dictionary, pycurl

我有这个：

```
import pycurl
import pprint
import json

c = pycurl.Curl()
c.setopt(c.URL, 'https://mydomainname.com')

c.perform() 
```

上面的代码返回一个像这样的字典：

```
{"name":"steve", "lastvisit":"10-02-2012", "age":12} 
```

我想遍历那本字典并得到年龄：

```
age : 12 
```

我试过：

```
diction = {}
diction = c.perform()
pprint.pprint(diction["age"]) 
```

没有数据返回，我收到了这个错误：

```
TypeError: 'NoneType' object is unsubscriptable 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T19:23:29.703

`c.perform()`不返回任何内容，您需要配置一个类似文件的对象来捕获该值。一个[`BytesIO`对象](http://docs.python.org/3/library/io.html#io.BytesIO)会做，然后您可以[`.getvalue()`](http://docs.python.org/3/library/io.html#io.BytesIO.getvalue)在调用完成后调用它：

```
import pycurl
import pprint
import json
from io import BytesIO

c = pycurl.Curl()
data = BytesIO()

c.setopt(c.URL, 'https://mydomainname.com')
c.setopt(c.WRITEFUNCTION, data.write)
c.perform()

dictionary = json.loads(data.getvalue())
pprint.pprint(dictionary["age"]) 
```

如果您未与 结婚`pycurl`，您可能会发现[`requests`](https://requests.readthedocs.io/)要容易得多：

```
import pprint
import requests

dictionary = requests.get('https://mydomainname.com').json()
pprint.pprint(dictionary["age"]) 
```

即使是标准库[`urllib.request`模块](http://docs.python.org/3/library/urllib.request.html#module-urllib.request)也比使用更容易`pycurl`：

```
from urllib.request import urlopen
import pprint
import json

response = urlopen('https://mydomainname.com')
dictionary = json.load(response)
pprint.pprint(dictionary["age"]) 
```

# python - 如何为 WebApp2 添加多线程支持？

> ID：15453615
> 
> 赞同：1
> 
> 时间：2013-03-16T19:21:01.563
> 
> 标签：python, multithreading, webapp2

我将 Python 2.7 与 WebApp2 一起使用，而且我对它们都是新手。我在 App Engine 之外运行 WebApp2 并且正在关注[官方教程](https://webapp-improved.appspot.com/tutorials/quickstart.nogae.html#tutorials-quickstart-nogae)。

假设 HelloWord 使用粘贴网络服务器并且工作正常，但是如果我这样修改它（添加了一些睡眠）：

```
import webapp2

class HelloWebapp2(webapp2.RequestHandler):
    def get(self):
        import time
        time.sleep(6)
        self.response.write('Hello, webapp2!')

app = webapp2.WSGIApplication([
    ('/', HelloWebapp2),
], debug=True)

def main():
    from paste import httpserver
    httpserver.serve(app, host='127.0.0.1', port='8080', use_threadpool=True)

if __name__ == '__main__':
    main() 
```

并同时打开几个选项卡，而不是很明显这个 HelloWord 在一个线程中运行。我添加 use_threadpool=True 只是为了冗长，据我所知（从阅读粘贴文档）它应该使用多线程，即使没有线程池。

我尝试使用谷歌搜索，但不幸的是，我得到的只是“当模块 webapp2_extras.local 可用时，webapp2 是线程安全的”。这对我一点帮助都没有。

请告诉我如何修改这个 HelloWord 以异步响应请求！

PS 附带问题：如果我使用 Go，我可以只运行 goroutine 中的每个处理程序来实现基本并发吗？或者它们（goroutines）应该只用于小功能吗？由于我还没有与 Python 结婚，我正在评估任何替代方案。

编辑：我发现这是 Google Chrome 的问题，而不是 Python 的问题。在其他浏览器中，一切都按预期工作，因此该示例已经在多个线程中运行。不过，我不知道如何在这里结束问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T19:23:09.337

您需要将以下标志添加到您的 app.yaml 文件中：

> 线程安全：是

看到[这个](https://developers.google.com/appengine/docs/python/python25/migrate27#appyaml)

# ruby-on-rails - Heroku 错误与 rdiscount gem

> ID：15453620
> 
> 赞同：1
> 
> 时间：2013-03-16T19:21:23.337
> 
> 标签：ruby-on-rails, heroku, bundler, rdiscount

我将 rdiscount gem 用于我认为可能需要它的东西，但后来我取消了它。当我尝试在 Heroku 上部署应用程序时，我得到以下信息：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for random()... yes
       checking for srandom()... yes
       checking for rand()... yes
       checking for srand()... yes
       checking size of unsigned long... long
       checking size of unsigned int... int
       no int with size 4
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-rdiscount-dir
       --without-rdiscount-dir
       --with-rdiscount-include
       --without-rdiscount-include=${rdiscount-dir}/include
       --with-rdiscount-lib
       --without-rdiscount-lib=${rdiscount-dir}/lib
       Gem files will remain installed in /tmp/build_2dddf5mp2ptjr/vendor/bundle/ruby/1.9.1/gems/rdiscount-2.0.7.1 for inspection.
       Results logged to /tmp/build_2dddf5mp2ptjr/vendor/bundle/ruby/1.9.1/gems/rdiscount-2.0.7.1/ext/gem_make.out
       An error occurred while installing rdiscount (2.0.7.1), and Bundler cannot
       continue.
       Make sure that `gem install rdiscount -v '2.0.7.1'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler. 
```

我已经卸载了 gem `gem unistall rdiscount` ，但什么也没有。然后我尝试根据heroku错误重新安装它，但仍然没有。

宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '3.2.11'
gem 'bootstrap-sass', '2.3.0'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', "1.2.1"
  gem 'guard-spork', '1.4.2'
  gem 'spork', "0.9.2"
  gem 'guard-livereload'
end

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', "0.9.1", :require => false
  gem 'factory_girl_rails', "4.1.0"
end

group :production do
  gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T16:03:01.110

Heroku 默认使用 RDiscount 已知问题的 Ruby 1.9.2。

请修改您的 Gemfile 以使用 Ruby 1.9.3 或更高版本：

```
source :rubygems
ruby "1.9.3"

gem 'rdiscount' 
```

相关 GitHub 问题： [https ://github.com/rtomayko/rdiscount/issues/92](https://github.com/rtomayko/rdiscount/issues/92)

相关 StackOverflow 问题： [如何在 Heroku 上使用 rdiscount？](https://stackoverflow.com/questions/14701516/how-can-i-use-rdiscount-on-heroku)

# java - android调度程序没有启动

> ID：15453625
> 
> 赞同：0
> 
> 时间：2013-03-16T19:21:53.903
> 
> 标签：java, android, service

我在服务中有这个代码。但调度程序没有启动！这有什么问题？即使应用程序在后台，我希望此服务每三秒显示一次祝酒...

```
public class notifService extends Service {
private final ScheduledExecutorService scheduler =Executors.newScheduledThreadPool(1);

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    final Intent intent1 = new Intent(this, notifService.class);

    scheduler.scheduleWithFixedDelay(new Runnable() {
        @Override
        public void run() {
           Toast.makeText(getApplicationContext(),String.valueOf("a"), Toast.LENGTH_LONG).show();

        }
    }, 3, 3, SECONDS);
}

@Override
public void onDestroy() {
    super.onDestroy();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:38:34.353

首先，`onStart(Intent,int)`Service 对象不推荐使用该方法。

你应该改写

`onStartCommand(Intent intent, int flags, int startId)`然后返回 START_STICKY。这将确保您的服务在被操作系统杀死时重新启动。

其次，您应该将服务的上下文传递给 toast 构建器（您可以使用`this`关键字）。

最后，我不确定您的意图是什么，但这很可能总是显示出祝酒词，因为您正在使用`Toast.LENGTH_LONG`常量构建它。

如果仍然无法正常工作，请发布您用于启动服务的代码...

# javascript - 加入 UTF-8 字符串

> ID：15453628
> 
> 赞同：1
> 
> 时间：2013-03-16T19:22:06.877
> 
> 标签：javascript, string, utf-8

我想将一些 UTF-8 字符串连接在一起，有什么想法吗？

例如：

> 输入：س + ل + ا + م
> 
> 输出：سلام

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:26:14.070

在 Javascript 中，您可以执行`var output = 'س + ل + ا + م'.split(' + ').join('');`. 只需替换拆分功能中分隔字符的内容即可。

# c++ - 使用 Visual Studio 2012 并使用旧平台工具集进行编译？

> ID：15453629
> 
> 赞同：31
> 
> 时间：2013-03-16T19:22:14.417
> 
> 标签：c++, visual-studio, dll, visual-studio-2012, visual-c++-runtime

**问题**

我正在使用 Visual Studio 2012 开发 C++ DLL。在某些机器上无法加载这些 DLL，因为缺少设置为“v110”的平台工具集。

我曾尝试安装较旧的 c++ 运行时。他们没有安装，因为“已经安装了较新的版本”。我还安装了当前的 Windows SDK，但除了 v110 之外，仍然没有其他项目可供选择。

**问题**

如何使用旧版本的 C++ 运行时编译我的 C++ DLL，以便它可以在非开发人员机器上运行？

![平台工具集是 v110](../Images/3456b82bc24e2c4ad5197711ce1f6e87.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-16T20:07:31.170

根据[MSDN 上的此页面](http://msdn.microsoft.com/en-us/library/vstudio/ff770576.aspx)，您需要具有相应版本的 Visual Studio（2008 或 2010），或“平台工具集”下拉列表的相关 Windows SDK 以列出这些版本：

> 要更改目标平台工具集，您必须安装相关版本的 Visual Studio 或 Windows 平台 SDK。

您似乎对控制哪个编译器/链接器/等的“平台工具集”有点困惑。用于*构建*您的应用程序，以及*运行*您的应用程序所需的“Visual C++ Redistributable”。您不能在用户的 PC 上安装“平台工具集”，也不能通过在开发 PC 上安装特定的“Visual C++ Redistributable”来提供该工具集。

此外，据我所知，Visual C++ Redistributable 不包括 MFC 运行时。它们可作为单独的 MSI 合并模块 (MSM) 使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-05T07:42:12.660

我想分享一些信息，我遇到了这些信息并想出了如何将它们用于我的目的。

显然，使用静态链接是一个不错的选择。它并不总是对我有用，但对于我的一个较小的项目，它工作得很好。结果是一个没有其他依赖关系的DLL `kernel32.dll`。

只需`/MT`用于发布配置和`/MTd`调试，就可以了。

这里的问题是，像我这样的开发人员在发布后不久就获得了当前的 Visual Studio 版本，但你不能真的期望普通用户安装只有几周前的运行时。并且安装不同版本的 Visual Studio 只是为了使用旧的运行时绝对不是你想要的。

![Visual Studio 2013 中的静态链接](../Images/e48d5985f8e245a58ea0ab4f50a43445.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-25T11:53:11.897

*互联网档案的提示。（我不能评论上面的陈述，我不知道为什么）*

要在较新的 Visual Studio（I testet 2013 和 2015）中使用**v90 平台工具集（=Visual Studio 2008）**，您需要安装 Visual Studio 2008 和 Visual Studio 2010，因为 MS Build 程序文件夹中的 vs90 平台工具集定义是部分 von Visual Studio 2010。

`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\PlatformToolsets`适用于 v90 和 v100

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0 
```

适用于 V110 V120 和 V140

代表 Visual Studio 版本：v90=2008、v100=2010、V110=2012、V120=2013、V140=2015。

在安装 vob VS2010 之后，较新的 Visual Studio 2013 和 2015 版本可以使用 vs90 和 vs100 平台工具集。（这在没有新安装 Visual Studio 2013/2015 的情况下立即有效。）我猜 Visual Studio 2012 的操作方式与 VS2013 和 VS2015 相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T20:02:11.087

好吧，这取决于您要构建的内容。通过安装 Windows SDK 7.1 可能支持某些功能。[看到这个帖子，同样的问题](https://stackoverflow.com/a/11134663/1141471)，但是如果你的项目依赖于 MFC，那么不幸的是它看起来根本不可能，主要是因为除了 VS2010 之外没有任何东西正在部署 MFC 库。

# vb.net - 为什么 Tessnet2 OCR 结果不好

> ID：15453635
> 
> 赞同：1
> 
> 时间：2013-03-16T19:22:48.707
> 
> 标签：vb.net, ocr, tessnet2

我正在使用 tessnet2 从 .tif 图像中获取文本。例如，我想从图像中获取十进制“700”，但我得到了这个：“Mupann”我正在使用法语 tessdata 这里我正在使用的代码：

```
 ocr.SetVariable("tessedit_char_whitelist", "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.,$-/#&=()\':?")
        ocr.Init(Application.StartupPath & "\tessdata", "fra", False)
        Dim result As List(Of tessnet2.Word) = ocr.DoOCR(captureTIF, Rectangle.Empty)

        For Each word As tessnet2.Word In result
            MsgBox(word.Confidence & " >> " & word.Text)
            RichTextBox1.Text &= word.Confidence & word.Text
        Next 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T16:16:47.730

我不知道这对你的情况是否有帮助。但是当我使用 TessNet2 时，我使用了一个布尔函数来确定某些单词。您会看到我要查找的单词有多个案例。我敢肯定，这不是最有效的方式，但这是一种方式。

```
public Boolean isPageABSTRACTING(List<tessnet2.Word> wordList)
        {

            for (int i = 0; i < wordList.Count; i++) //scan through words
            {
                if ((wordList[i].Text == "Abstracting" || wordList[i].Text == "abstracting" || wordList[i].Text == "abstractmg" || wordList[i].Text == "Abstractmg" && wordList[i].Confidence >= 50) && (wordList[i + 1].Text == "Service" || wordList[i + 1].Text == "service" || wordList[i + 1].Text == "5ervice" && wordList[i + 1].Confidence >= 50) && (wordList[i + 2].Text == "Ordered" || wordList[i + 2].Text == "ordered" && wordList[i + 2].Confidence >= 50)) //find 1st tier check
                {
                    for (int j = 0; j < wordList.Count; j++) //scan through words again
                    {
                        if ((wordList[j].Text == "Due" || wordList[j].Text == "Oue" && wordList[j].Confidence >= 50) && (wordList[j + 1].Text == "Date" || wordList[j + 1].Text == "Oate" && wordList[j + 1].Confidence >= 50) && (wordList[j + 2].Text == "&" && wordList[j + 2].Confidence >= 50)) //find 2nd tier check
                        {
                            for (int h = 0; h < wordList.Count; h++) //scan through words again
                            {
                                if ((wordList[h].Text == "Additional" || wordList[h].Text == "additional" && wordList[h].Confidence >= 50) && (wordList[h + 1].Text == "comments" || wordList[h + 1].Text == "Comments" && wordList[h + 1].Confidence >= 50) && (wordList[h + 2].Text == "about" || wordList[h + 2].Text == "About" && wordList[h + 2].Confidence >= 50) && (wordList[h + 3].Text == "this" || wordList[h + 3].Text == "This" && wordList[h + 3].Confidence >= 50)) //find 3rd tier check
                                {
                                    return true;
                                }
                            }
                        }
                    }
                }
            }

            return false;
        } 
```

# image - 图像未在 Wordpress 3.5.1 多站点上显示

> ID：15453641
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:23:02.717
> 
> 标签：image, wordpress, .htaccess

我最近升级到 WP 3.5.1 时遇到了一些问题。图像和媒体库在我的主站点上运行良好，但在我的子站点（包括全新的开箱即用的站点）上，我返回 500 个图像服务器错误。

新上传的图像也不会显示，尽管它们正在上传到 blogs.dir 库（通过 FTP 确认）。

这是我网站上存在于服务器上但未正确加载的图像示例：http: [//mysarasotashortsale.com/files/2011/01/Alex-Krumm-2-Web.jpg](http://mysarasotashortsale.com/files/2011/01/Alex-Krumm-2-Web.jpg)

有没有其他人在上次升级中遇到过这个问题？你怎么修好它的？

仅供参考，这是我的 .htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:38:19.923

更新到 3.5.1 后我们遇到了同样的问题，但是查看您的 .htaccess 文件，您似乎遗漏了一些东西。

```
...
# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]
... 
```

# spring - java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 向 Web 部署程序集添加依赖项不起作用

> ID：15453642
> 
> 赞同：0
> 
> 时间：2013-03-16T19:23:03.027
> 
> 标签：spring, tomcat7, classnotfoundexception

我从 spring 开始，并在网络上找到了作为起点的示例（例如[http://www.mkyong.com/jsf2/jsf-2-0-spring-hibernate-integration-example/](http://www.mkyong.com/jsf2/jsf-2-0-spring-hibernate-integration-example/)）。我正在使用 eclipse 和 sysdeo-plugin。通过启动tomcat，我得到了错误：

```
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 
```

和

```
java.lang.ClassNotFoundException: org.springframework.web.context.request.RequestContextListener 
```

我尝试将 Maven 依赖项添加到 Web 部署程序集定义，但仍然出现错误。

spring-web 和 spring JAR 位于类路径中。

我删除了工作区并添加了一个新的，我删除了 tomcat，没有任何帮助。

当我从 Eclipse 将项目导出为 war-file 并将其放在 tomcat webapp 目录中时，一切正常。

# c# - 创建包含数据的许可证密钥

> ID：15453644
> 
> 赞同：0
> 
> 时间：2013-03-16T19:23:12.123
> 
> 标签：c#, string, hash, cryptography, licensing

我对为我的应用程序创建许可证密钥很感兴趣，并且已经想到了一个系统如何进行激活，以便在不打扰我的客户的情况下将复制安全性降至最低。另外，我很清楚没有绝对的方法可以防止盗版，毕竟我不介意。

我对一般密钥生成更感兴趣。我能想到的第一种方法是使用 SHA、MD5 或任何其他流行的单向算法创建哈希。这些散列（大部分）很短，并且很容易为客户输入。但同时，我想在生成的激活密钥中包含其他数据，我想在客户端的应用程序中解密这些数据。但是大多数使用密钥加密数据的算法会产生随机长度的短语，这些短语的长度很容易超过 300 个字符。

是否有一种算法可以将字符串加密为具有预定义长度或模式的密文，然后可以解密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:28:06.817

由于您希望许可证数据包含一些信息（可能是客户名称、到期日期等），也许您应该考虑生成一个包含加密数据的文本文件并将其发送给客户。然后他们可以从应用程序中选择该文本文件，而不是输入许可证密钥。

如果有在线激活过程，您可以简单地生成一个随机产品密钥，将其发送给客户端并对照中央激活数据库进行检查，然后在激活过程中将所有许可证数据传输给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:29:41.477

不可以。数据的加密长度不能短于数据字符串的长度。

因此，如果您想包含比密钥代码更多的信息，那么您需要使用加密的许可证文件 (.lic)，他们可以将其导入或将其内容复制并粘贴到表单中。

# c - 如何使一个函数中的变量对其他函数可见

> ID：15453653
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:23:38.987
> 
> 标签：c, scope

说我有类似的东西

```
void init(void){
    int foo = 0;
}
void useFoo(void){
    foo++;
}
void main{
    init();
    useFoo();
} 
```

我们有一个初始化一个（或多个）变量的 init 函数，然后是另一个必须使用该变量的函数（或可能是多个函数），我如何使“int foo”对那些其他函数可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:31:21.143

您可以使其在全局范围内可见：

```
int foo;

void init()
{
    foo = 0;
}

void useFoo()
{
    ++foo;
} 
```

您还可以将指针传递给需要的变量：

```
void init(int *foo)
{
    *foo = 0;
}

void useFoo(int *foo)
{
    (*foo)++;
}

...
int foo;
init(&foo);
useFoo(&foo); 
```

或者您可以使用线程本地存储、文件、其他媒体，但我相信您不希望这样 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:36:12.973

简短的回答是“你不能”（至少不是那样）。变量`foo`in`init`在 的入口处创建`init`，然后在从 的返回时销毁`init`。通过调用它不再存在`useFoo`。

您需要该变量具有更长的“存储持续时间”（程序级生命周期）。您可以通过使其具有“静态持续时间”（通过`static`关键字并将其移出函数 - 尽管实际上将其移出就足够了）来做到这一点，在这种情况下只有一次实例（许多其他语言中的“单例” '分类法）。或者，您可以构建使用创建的数据结构`malloc`，为数据提供“分配的持续时间”：它从该点持续`malloc`到稍后`free`（我们`realloc`现在将忽略 :-)）。

分配持续时间方法更麻烦但更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:37:08.380

最简单的方法是使它成为一个全局变量：

```
int foo;
void init(void) {
    foo = 0;
}
void useFoo(void) {
    foo++;
}
void main(void) {
    init();
    useFoo();
} 
```

另一种方法是使用指针：

```
#include <stdio.h>

void init(int *foo) {
    *foo = 0;
}
void useFoo(int *foo) {
    (*foo)++;
}
void main(void) {
    int foo;
    init(&foo);
    useFoo(&foo);
    useFoo(&foo);
    useFoo(&foo);
    printf("%d\n", foo);
} 
```

最后一个是将它作为参考传递（当使用 CPP，而不是 C 时）：

```
#include <stdio.h>

void init(int &foo) {
    foo = 0;
}
void useFoo(int &foo) {
    foo++;
}
int main(int argc, char** argv) {
    int foo;
    init(foo);
    useFoo(foo);
    useFoo(foo);
    useFoo(foo);
    printf("%d\n", foo);
    return 0;
} 
```

# java - Android NullPointerException onClick

> ID：15453658
> 
> 赞同：0
> 
> 时间：2013-03-16T19:24:05.540
> 
> 标签：java, android, exception

当我调用 flash() 时，我得到一个空指针异常，更准确地说，我打开了应用程序（它工作正常，没有强制关闭），然后我点击菜单按钮并选择设置（启动 ActivitySettings），当我返回时它给了我空指针异常。

PS（我知道问题出在 flash() 因为我是在 logcat 中读到的）

```
public class MainActivity extends Activity {
    private boolean isFlashOn = false;
    private Camera camera;
    public ImageButton imagebutton;
    String r,t;
    String scelta="btn0";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        t=CheckPrefsThm();
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        ChooseThm();
        r = CheckPrefsImg();
        super.onCreate(savedInstanceState);
        Decision();
        camera = Camera.open();
    }

    @Override
    public void onStart() {
        super.onStart();
        imagebutton.setOnClickListener(new OnClickListener() {
            public void onClick(View w) {

                flash();

            }
        });
    }

    public void flash() {
        final Parameters p = camera.getParameters();
        if(isFlashOn) {
            p.setFlashMode(Parameters.FLASH_MODE_OFF);
            camera.setParameters(p);
            isFlashOn = false;
            if(scelta.equals("btn1")) {
                imagebutton.setImageResource(R.drawable.powerg);
            }
            if(scelta.equals("btn0")) {
                imagebutton.setImageResource(R.drawable.traoff);
            }
            if(scelta.equals("btn2")) {
                imagebutton.setImageResource(R.drawable.pushg);
            }   
            if(scelta.equals("btn3")) {
                imagebutton.setImageResource(R.drawable.playg1);
            }
            if(scelta.equals("btn4")) {
                imagebutton.setImageResource(R.drawable.playg2);
            }
        }
        else {
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            camera.setParameters(p);
            isFlashOn = true;  
            if(scelta.equals("btn1")) {
                imagebutton.setImageResource(R.drawable.powerg);
            }
            if(scelta.equals("btn0")) {
                imagebutton.setImageResource(R.drawable.traon);
            }
            if(scelta.equals("btn2")) {
                imagebutton.setImageResource(R.drawable.pushgon);
            }
            if(scelta.equals("btn3")) {
                imagebutton.setImageResource(R.drawable.playg1);
            }
            if(scelta.equals("btn4")) {
                imagebutton.setImageResource(R.drawable.playg2);
            }
        }
    }

    @Override
    protected void onStop() {
        super.onStop();
        if (camera != null) {
            camera.release();
            finish();
        }
    }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.preferences, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent startNewActivityOpen = new Intent(this, SettingsActivity.class);     
        switch(item.getItemId()) {
            case R.id.menu_settings:
                UpdatePrefs(r ,t);
                startActivityForResult(startNewActivityOpen,0);                 
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    public String CheckPrefsImg() {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        String result = prefs.getString("img","uno");

        return result;
    }

    public String CheckPrefsThm() { 
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        String result = prefs.getString("thm","dark");

        return result;
    }

    public void UpdatePrefs(String img,String thm) {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString("img",img);
        editor.putString("thm",thm);
        editor.commit();
    }

    public void ChooseThm() {
        if(t.equals("radiolight")) {
            this.setTheme(R.style.Light);
        }
        else{
            if(t.equals("radiodark")) {
                this.setTheme(R.style.Dark);
            }
        }
    }

    public void Decision() {
        if(r.equals("uno") ) {
            setContentView(R.layout.activity_main);
            imagebutton = (ImageButton)findViewById(R.id.torcia);
            scelta="btn0";
        }
        else if(r.equals("due")) {
            setContentView(R.layout.activity_main2);
            imagebutton = (ImageButton)findViewById(R.id.btn1);
            scelta="btn1";
        }
        else if(r.equals("tre")) {
            setContentView(R.layout.activity_main3);
            imagebutton = (ImageButton)findViewById(R.id.btn2);
            scelta="btn2";
        }
        else if(r.equals("quattro")) {
            setContentView(R.layout.activity_main4);
            imagebutton = (ImageButton)findViewById(R.id.btn3);
            scelta="btn3";
        }
        else if(r.equals("cinque")) {
            setContentView(R.layout.activity_main5);
            imagebutton = (ImageButton)findViewById(R.id.btn4);
            scelta="btn4";
        }
    }  
} 
```

编辑：这是我的 logcat

```
03-16 13:47:21.174: D/dalvikvm(29612): Late-enabling CheckJNI
03-16 13:47:21.204: E/jdwp(29612): Failed sending reply to debugger: Broken pipe
03-16 13:47:21.204: D/dalvikvm(29612): Debugger has detached; object registry had   1 entries
03-16 13:47:21.404: D/dalvikvm(29612): GC_FOR_ALLOC freed 111K, 6% free 12166K/     12931K, paused 33ms, total 33ms
03-16 13:47:21.404: I/dalvikvm-heap(29612): Grow heap (frag case) to 12.899MB for   484456-byte allocation
03-16 13:47:21.449: D/dalvikvm(29612): GC_CONCURRENT freed 1K, 7% free 12638K/      13447K, paused 19ms+1ms, total 45ms
03-16 13:47:22.429: D/libEGL(29612): loaded /system/lib/egl/libEGL_mali.so
03-16 13:47:22.434: D/libEGL(29612): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-16 13:47:22.439: D/libEGL(29612): loaded /system/lib/egl/libGLESv2_mali.so
03-16 13:47:22.444: D/(29612): Device driver API match
03-16 13:47:22.444: D/(29612): Device driver API version: 10
03-16 13:47:22.444: D/(29612): User space API version: 10 
03-16 13:47:22.444: D/(29612): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct  16 15:37:13 KST 2012 
03-16 13:47:22.579: D/OpenGLRenderer(29612): Enabling debug mode 0
03-16 13:47:29.734: W/Camera(29612): Camera server died!
03-16 13:47:44.749: D/AbsListView(29612): Get MotionRecognitionManager
03-16 13:47:45.444: D/dalvikvm(29612): GC_CONCURRENT freed 108K, 6% free 12965K/    13703K, paused 12ms+2ms, total 25ms
03-16 13:47:45.474: E/SensorManager(29612): thread start
03-16 13:47:45.474: D/SensorManager(29612): registerListener::handle=0name=LSM330DLC 3-axis Accelerometer delay= 200000Listener=android.view.
OrientationEventListener$SensorEventListenerImpl@41e66718
03-16 13:47:45.554: E/SpannableStringBuilder(29612): SPAN_EXCLUSIVE_EXCLUSIVE       spans cannot have a zero length
03-16 13:47:45.554: E/SpannableStringBuilder(29612): SPAN_EXCLUSIVE_EXCLUSIVE       spans cannot have a zero length
03-16 13:47:51.909: D/SensorManager(29612): unregisterListener::  Listener=android.view.OrientationEventListener

$SensorEventListenerImpl@41e66718
03-16 13:47:51.909: D/Sensors(29612): Remain listener = Sending .. normal delay     200ms
03-16 13:47:51.909: I/Sensors(29612): sendDelay --- 200000000
03-16 13:47:51.909: D/SensorManager(29612): JNI - sendDelay
03-16 13:47:51.909: I/SensorManager(29612): Set normal delay = true
03-16 13:47:53.319: W/Camera(29612): Camera server died!
03-16 13:47:53.329: I/Choreographer(29612): Skipped 84 frames!  The application may be doing too much work on its main thread.
03-16 13:47:53.409: E/SpannableStringBuilder(29612): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-16 13:47:53.409: E/SpannableStringBuilder(29612): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-16 13:48:01.899: D/AndroidRuntime(29612): Shutting down VM
03-16 13:48:01.899: W/dalvikvm(29612): threadid=1: thread exiting with uncaught exception (group=0x411542a0)
03-16 13:48:01.904: E/AndroidRuntime(29612): FATAL EXCEPTION: main
03-16 13:48:01.904: E/AndroidRuntime(29612): java.lang.NullPointerException
03-16 13:48:01.904: E/AndroidRuntime(29612):    at com.burattiluca.latorcia.MainActivity.flash(MainActivity.java:47)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at com.burattiluca.latorcia.MainActivity$1.onClick(MainActivity.java:41)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at android.view.View.performClick(View.java:4211)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at android.view.View$PerformClick.run(View.java:17267)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at android.os.Handler.handleCallback(Handler.java:615)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at android.os.Looper.loop(Looper.java:137)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at java.lang.reflect.Method.invokeNative(Native Method)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at java.lang.reflect.Method.invoke(Method.java:511)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-16 13:48:01.904: E/AndroidRuntime(29612):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:33:15.603

我认为相机有 null 因为`Camera.open()`如果设备没有后置相机，则返回 null。

阅读安卓[文档](http://developer.android.com/reference/android/hardware/Camera.html#open%28int%29)。

在设备上对此进行测试并将此代码放入 try catch 块并确保您已添加访问应用程序标签上方的相机所需的所有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:46:29.293

试试改成下面的代码看看能不能用

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
// remove onClickListener    
imagebutton.setOnClickListener(null);
Intent startNewActivityOpen = new Intent(this, SettingsActivity.class);     
switch(item.getItemId()){
    case R.id.menu_settings:
            UpdatePrefs(r ,t);
            startActivityForResult(startNewActivityOpen,0);                 
            return true;
    default:
        return super.onOptionsItemSelected(item);
} 
```

}

然后**onActivityResult**

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent)
{
    super.onActivityResult(requestCode, resultCode, intent);
    imagebutton.setOnClickListener(new OnClickListener(){
    public void onClick(View w){

    flash();

    }
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:31:53.193

你还没有在你的 onCreate() 中使用 setcontentview() ...我猜那正在生成 nullpointerexception ...把​​你的 logcat 输出放到更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-26T18:26:15.477

这是因为您在**onStop()**中释放相机，并且一旦您返回活动并单击 imageButton，它会调用 flash() 方法。因此，在 flash() 方法中，它使用的相机将为空，因为您在切换到下一个 Activity 时在 inStop() 中释放了它。

作为解决方案，您必须在 Activity 的 onResume() 中重新初始化相机。

# aggregate-functions - 跨多个表的 Django 查询中的表达式聚合

> ID：15453662
> 
> 赞同：1
> 
> 时间：2013-03-16T19:24:22.033
> 
> 标签：aggregate-functions, django-orm, table-relationships

是否可以从Django ORM 查询中的**相关表**中计算字段表达式（例如：减法）的聚合（例如：总和） ？

有关我要实现的目标的完整示例，请参阅此工作[SQL Fiddle](http://sqlfiddle.com/#!12/8b395/13)。我把它分解成两个问题（[另一个在这里](https://stackoverflow.com/q/15453678/520779)）。在这种情况下，我有一个`Sequence`表示数字序列的模型，以及一个`Part`表示此序列中的“链接”的模型：

```
Sequence   Sequence   Sequence   Sequence   ...
0          5          20         15         ...
|-- Part --|-- Part --|-- Part --|-- ... 
```

因此，每个`Part`代表一个**delta**，它是序列中两个值之间的差异。我有一组（不连续的）部分，想计算这些增量的总和。像这样的东西：

```
sum([p.after.value - p.before.value for p in Part.objects.filter(...)]) 
```

但是在单个查询中（原因是我想将其用作更复杂查询的子查询）。在 SQL 中很容易做到这一点：

```
select sum(a.value - b.value)
  from part p
    join sequence a on p.after_id = a.id
    join sequence b on p.before_id = b.id
  where condition
  group by p.other_field; 
```

我不知道如何使用 Django ORM 来做到这一点。我可以为单个值做到这一点：

```
Part.objects.filter(condition).aggregate(Sum('before__value')).values() 
```

但不适用于涉及多个值的表达式。`F()` [尚不支持](https://code.djangoproject.com/ticket/14030)使用，所以我正在寻找另一种方法。我还查看了[这个问题](https://stackoverflow.com/q/10221422/520779)，这也是关于聚合中的表达式，但[接受的答案](https://stackoverflow.com/a/10230338/520779)（使用`extra`）不适用于我的案例 AFAIK，因为我感兴趣的字段不在同一个表中，而是在一个相关的表中.

```
>>> Part.objects.filter(condition).extra(select={
...     'delta':'sum(after__value - before__value)'
... })

DatabaseError: no such column: after__value 
```

这是一个 SSCCE，如果有人想尝试一下：[下载](https://marcelogibson.com/stackoverflow/aggregate_subquery.zip)或[浏览](https://marcelogibson.com/stackoverflow/sscce/)。[它具有与上面链接的SQL 小提琴](http://sqlfiddle.com/#!12/8b395/13)相同的模型和数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T08:29:40.463

既然 1.8 实现[了对`F`表达式的`aggregate`](https://code.djangoproject.com/ticket/14030)支持，答案就变得直截了当：

```
Part.objects.filter(condition).aggregate(sum=Sum(F('after__value')-F('before__value'))).values() 
```

# c++ - 动态大小的数组在哪里创建？（堆栈或堆）

> ID：15453664
> 
> 赞同：3
> 
> 时间：2013-03-16T19:24:32.417
> 
> 标签：c++, arrays, memory, allocation

例如，我有一个基于用户输入的动态大小的数组：

```
int n;
cin >> n;
int items[n]; 
```

这个数组是在堆栈上分配的吗？还是像我写的那样在堆上：

```
int n, *items;
cin >> n;
items = new int[n];
...
delete [] items; 
```

**编辑：**我了解第二个代码的作用。我在问第一个代码是否与第二个代码做同样的事情，但行数更少。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T19:27:20.027

您的第一个示例根本没有使用动态数组 - 它使用的是堆栈分配的可变长度数组（通常在幕后相当于一个`alloca`调用，`sizeof`运算符除外），这是 C99 的一个特性，而不是C++。

当然，您的第二个数组是通过 new 在堆上分配的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:26:17.440

您`new`用于分配内存，因此您的数组存储在堆中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T19:27:32.057

您的第一个代码块将无法编译，如果不使用 new 或 malloc/calloc/realloc 的内存分配，您将无法分配动态大小的数组。

为了做你想做的事，你需要做你在第二个块中拥有的东西，它总是在堆上分配。

动态 = 堆。非动态 = 堆栈。

永远记得释放你的记忆！

# sql - 如果 id 匹配，SQL 从第二个表中选择日期

> ID：15453671
> 
> 赞同：0
> 
> 时间：2013-03-16T19:25:24.397
> 
> 标签：sql, oracle, jointable

我有两张表 Security 和 CallPut。安全性（table1）包含security_id和mature_date（非noll值）和CallPut（table2），它具有security_id和Odate（它们是包含日期时间格式值的非空值）我想从security（表1）中选择所有行但在成熟日期我想要来自 odate 列的值而不是成熟日期，其中安全 id 存在于 Callput(table2) 中并与安全表匹配

例如安全(table1)

```
Security_id|Maturity_date
abcd        25Jan2020
bcde        25jan2021 
```

调用（表2）

```
Security_id|Odate
abcd        25Jan2015 
```

所需输出

```
Security_id|Maturity_date
abcd        25Jan2015 (since here id is there in callput it takes odate)
bcde        25jan2021 (since here id is not there in callput it takes maturity date) 
```

我用oracle sql 请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:38:28.550

```
select 
    s.Security_id,
    NVL(c.Odate, s.Maturity_date) Maturity_date
from 
    security s left join callput c 
    on (c.security_id = s.security_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:28:39.837

```
select s.* from security as s left join callput as c on (c.security_id = s.security_id); 
```

未经测试，但您想使用联接。[您可以在http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm)了解有关 Oracle 大量文档的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:28:49.083

```
select s.Security_id, nvl(c.odate, s.Maturity_date) as Maturity_date
from Security s
left join
Callput c
on
s.Security_id = c.Security_id 
```

ps 刚刚注意到这是一个 Oracle 问题，我的代码适用于 MS SQL Server
编辑：针对 Oracle 语法进行了更正。

# node.js - 如何在 Nodejs 中为 Mongodb 构造动态更新查询？

> ID：15453672
> 
> 赞同：0
> 
> 时间：2013-03-16T19:25:25.347
> 
> 标签：node.js, mongodb

我想创建一个动态查询，根据用户输入更新 Mongodb 集合中的文档。用户可以更新文档中的部分或全部字段。该文档还包含一个允许用户添加元素的数组。我知道如何为“查找”查询构建简单的动态查询，但在处理可能具有 , 等元素的更新查询时遇到`$set`了`$addToSet`困难`$pull`。

我的最终查询将如下所示：

```
Col.update({'_id' : bookId}, {$inc : {'total_count' : 1}, $set: {'name': name}, $addToSet : {'reviewed_by' : user}}) 
```

查询的更新部分中的所有元素都将有条件地添加。

我在 SO 和其他地方进行了搜索，但没有看到任何显示如何完成此操作的示例。希望许多其他人也会发现这很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:38:32.820

不确定我是否正确理解您，但听起来您正在寻找的实际上只是 javascript ...

```
var update = {};
if( ... ) // do increment?
    update['$inc'] = {'total_count': 1};

// and so on...

if(Object.keys(update).length)
    Col.update({'_id': bookId}, update); 
```

# java - 如何使用 libvirt 创建 VM 的快照？

> ID：15453673
> 
> 赞同：2
> 
> 时间：2013-03-16T19:25:29.857
> 
> 标签：java, snapshot, libvirt

我正在尝试使用以下代码在 KVM 管理程序上创建活动/空闲虚拟机的快照：

看起来 xmlDesc 没有足够的信息来创建既不运行也不空闲的虚拟机的快照，或者可能是不同的东西？

在传递给方法之前我是否必须修改 xml 转储？或者快照需要一些单独的目标img文件？

有谁知道如何解决这个问题？

```
package org.vmclient;

import org.libvirt.Connect;
import org.libvirt.Domain;
import org.libvirt.DomainInfo;
import org.libvirt.DomainSnapshot;
import org.libvirt.LibvirtException;

public class Test {

public static void main(String[] args) {

    // create and initialize variables
    Connect connect = null;
    Domain domain = null;
    int numberOfSnaps;
    DomainSnapshot domainSnapshot;

    /*
     * do NOT change! Create a connection
     */
    try {
        connect = new Connect("qemu:///system");
    } catch (LibvirtException e) {
        System.out.println("exception caught:" + e);
        System.out.println(e.getError());
    }

    /*
     * Perform an activity
     */
    try {
        //create a snapshot
        domain = connect.domainLookupByName("Ubuntu");
        /*
        DomainInfo di = new DomainInfo();
        di = domain.getInfo();
        System.out.println(di);
        */
        numberOfSnaps = domain.snapshotNum();
        System.out.println(numberOfSnaps);

        //1\. get xmlDesc of current machine
        String xmlDesc = domain.getXMLDesc(0);
        //2\. check if xmlDesc isnt empty
        System.out.println(xmlDesc);

        //3\. pass xmlDesc to create a snapshot of the machine
        //try {
            domainSnapshot = domain.snapshotCreateXML(xmlDesc);
        //}catch(LibvirtException e){
            //System.out.println(e.getMessage());

        //}
        System.out.println("working ??");
        //4\. check if snap was created 

        numberOfSnaps = domain.snapshotNum();
        System.out.println(numberOfSnaps);

    } catch (LibvirtException e) {
        System.out.println("exception caught:" + e);
        System.out.println(e.getError());
    }
}//end main
}//end Test.java 
```

错误信息：

```
libvir: Domain Snapshot error : XML error: domainsnapshot
exception caught:org.libvirt.LibvirtException: XML error: domainsnapshot
level:VIR_ERR_ERROR
code:VIR_ERR_XML_ERROR
domain:VIR_FROM_DOMAIN_SNAPSHOT
hasConn:false
hasDom:false
hasNet:false
message:XML error: domainsnapshot
str1:XML error: %s
str2:domainsnapshot
str3:null
int1:-1
int2:-1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T03:04:50.183

要创建快照，您需要传递本文档中描述的 XML：[libvirt: Snapshot XML format](http://libvirt.org/formatsnapshot.html)。根标签是`domainsnapshot`然后定义至少`name`和`description`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T03:39:32.617

xml 文件错误，getXMLDesc(int flags) 提供域的 XML 描述。

您应该自己创建快照 xml，而不是自动生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T22:51:50.443

您应该将快照 XML 传递给函数`snapshotCreateXML`，而不是域的 XML。

尝试以下操作：

```
snapshotXML = "<domainsnapshot><name>my-snapshot</name></domainsnapshot>";
domainSnapshot = domain.snapshotCreateXML(snapshotXML); 
```

# android - 9 种不同的场景需要 9 种不同的 AlertDialogs 来简化嵌套对话框？

> ID：15453677
> 
> 赞同：0
> 
> 时间：2013-03-16T19:25:50.937
> 
> 标签：android, dialog, nested, android-alertdialog

我的应用程序中有一个场景，根据他们在应用程序中创建的条件，应该向用户显示 9 个潜在对话框。虽然使用 AlertDialog 功能创建单个对话框非常简单，但当您有多个级别的嵌套对话框时，这会变得非常混乱。

我的一些场景需要多达 3 个嵌套对话框来完成我需要的控制。您可以想象“愚蠢”的嵌套 AlertDialogs 占用了大约 300 行代码，有什么方法可以简化这一点吗？我向用户展示的每个对话框在某种程度上都是不同的，按钮几乎总是不同的，标题和消息中显示给用户的文本也是如此。

我想制作一个辅助方法来提供不同的按钮、它们的 onClick 代码、标题和消息的文本等。然而，它几乎比它的价值更混乱和混乱。我恢复到简单的嵌套对话框，因为在我看来它同样干净。

那么，这门课程有成百上千行对话代码是正常的，还是有更聪明的方法来解决我的愚蠢嵌套方法。

对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:35:50.203

实现 AlertDialog，添加未实现的方法，然后在里面设置一个 switch 和 case。(DialogInterface.OnClickListener)。如果您可以详细说明条件可能是什么/条件组合，我可以为您提供更多帮助。您甚至可以将条件和结果存储在两个可以随后运行的数组中。

# subquery - 在 Django 子查询中，我可以引用“父”查询吗？

> ID：15453678
> 
> 赞同：2
> 
> 时间：2013-03-16T19:25:52.430
> 
> 标签：subquery, where, django-orm

在 Django ORM 中创建子查询很简单（只需将 a`QuerySet`作为另一个查询的一部分），但是该子查询是否可以引用“父”（外部，主）查询中的字段？

有关我要实现的目标的完整示例，请参阅此工作[SQL Fiddle](http://sqlfiddle.com/#!12/8b395/13)。我把它分解成两个问题（[另一个在这里](https://stackoverflow.com/q/15453662/520779)）。在这种情况下，我有一个模型`Whole`表示必须达到的值。几个`Part`s 以自己的（计算的）值对其做出贡献。我想检索所有尚未完成的**s**`Whole`（即不同于单个值的总和）。**`total_value`**

 **```
select w.*
  from whole w
  where w.total_value != (
    select sum(value expression)
      from part p
      where p.whole_id = w.id
      group by p.whole_id
  ); 
```

我不知道如何（或者甚至可能）使用 Django ORM 来做到这一点。我已经看到[了许多](https://stackoverflow.com/a/8556387/520779) 使用子查询的[示例](https://stackoverflow.com/a/8217576/520779)`__in`（并且可以通过`print qs.query`结果确实作为单个查询运行来确认），但前提是两个查询彼此独立。在这里，子查询受父查询 ( `w.id`) 中的字段约束。我想过使用`F()`, `Q()`, 甚至`extra`, 但不知道该怎么做...

这是一个 SSCCE，如果有人想尝试一下：[下载](https://marcelogibson.com/stackoverflow/aggregate_subquery.zip)或[浏览](https://marcelogibson.com/stackoverflow/sscce/)。[它具有与上面链接的SQL 小提琴](http://sqlfiddle.com/#!12/8b395/13)相同的模型和数据。

* * *

**更新：**对于我的特殊情况，我发现不需要做子查询，我可以使用`group by`and `having`（正如[这个 SQL Fiddle](http://sqlfiddle.com/#!12/8b395/18)所示）：

```
q = Q(part__isnull=True) | ~Q(partial=F('total_value'))
qs = Whole.objects.annotate(partial=Sum(...)).filter(q).distinct()

# And if total_value can be zero:
qs = qs.exclude(part__isnull=True, total_value=0) 
```

不过，子查询的一般情况仍未解决（没有使用一些原始 SQL，如[下面的回答所示](https://stackoverflow.com/a/15483656/520779)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:57:43.563

我用最少的原始 SQL 设计的解决方案使用`extra`and `where`：

*   首先创建内部查询；用于`extra`指定自定义`where`组件，将受限字段与外部查询中的字段进行比较，**因为它将出现在那里**（可能需要对表名/别名进行硬编码）：

    ```
    qs1 = Part.objects.extra(where=['whole_id = "applabel_whole"."id"'])... 
    ```

    然后对其进行剩余的操作（在这种情况下，使用`values`and`annotate`进行单个字段的分组、聚合和返回）。

*   然后在外部查询中包含内部查询（使用`.query`）生成的 SQL，也使用`extra`and `where`：

    ```
    qs = Whole.objects.extra(where=['total_value != ({})'.format(qs1.query)]) 
    ```

调用中的代码片段`extra`可能不可移植（例如：一些后端使用`!=`，其他使用`<>`，引用表名的正确方式可能会有所不同，等等），但内部查询的其余部分应该是（因为它是由奥姆）。

结果查询对应于我正在寻找的内容（聚合部分除外，该部分在[另一个问题](https://stackoverflow.com/q/15453662/520779)中有所介绍）。为便于阅读而格式化的 SQL：

```
>>> qs1 = Part.objects.extra(
        where=['whole_id = "aggregation_subquery_whole"."id"']
    ).values('whole_id').annotate(sum=Sum('before__value')).values('sum')

>>> qs = Whole.objects.extra(where=['total_value != ({})'.format(qs1.query)])

>>> print qs.query

SELECT "aggregation_subquery_whole"."id",
       "aggregation_subquery_whole"."total_value" 
FROM "aggregation_subquery_whole"
WHERE total_value != (
    SELECT SUM("aggregation_subquery_sequence"."value") AS "sum"
    FROM "aggregation_subquery_part"
        LEFT OUTER JOIN "aggregation_subquery_sequence" ON
           ("aggregation_subquery_part"."before_id" =
            "aggregation_subquery_sequence"."id") 
    WHERE whole_id = "aggregation_subquery_whole"."id"
    GROUP BY "aggregation_subquery_part"."whole_id"
) 
```**

# php - 从 url() 中的 URL 中删除参数？

> ID：15453679
> 
> 赞同：0
> 
> 时间：2013-03-16T19:26:04.917
> 
> 标签：php, zend-framework, url

在 Zend 框架中，我正在使用该`$this->url()`方法，它的工作方式非常有魅力。不过我有一个问题：该方法似乎将当前请求参数复制到新 URL。我希望它停止这样做。

一个例子：我使用`$this->url('controller' => 'blog', 'action' => 'list');`. 如果当前页面`www.foo.bar/item/view/id/1`带有`id`参数，则 URL 将变为：

```
www.foo.bar/blog/list/id/1 
```

您可以看到该`/id/1`部分在没有我指定的情况下被保留。

我怎样才能让它停止这样做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:32:14.650

请参考这个重复的问题，它在旧版本的 ZF 上，但它应该为您指明正确的方向：

[Zend url : 获取参数总是停留在 url](https://stackoverflow.com/questions/8943502/zend-url-get-parameter-always-stay-in-the-url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:29:27.243

设置您不想保留的任何参数`null`：

```
$this->url('controller' => 'blog', 'action' => 'list', 'id'=>null); 
```

**编辑** 还有另一种方法。事实上，所有 url 助手所做的只是对路由器的直通调用：

```
 public function url(array $urlOptions = array(), $name = null, $reset = false, $encode = true)
        {
            $router = Zend_Controller_Front::getInstance()->getRouter();
            return $router->assemble($urlOptions, $name, $reset, $encode);
        } 
```

如您所见，第三个参数（布尔 $reset）应该重置存储在当前路由中的所有参数。假设您使用的是标准路由器 ( `Zend_Controller_Router_Rewrite`)，调用将被传递给一个路由（可能是 Zend_Controller_Router_Route 的一些后代），并且应该这样解释。当然，如果你使用自己的 Route，你应该自己处理。

# java - 使用 GBC/GBL 在 JPanel 上定位 JButton

> ID：15453680
> 
> 赞同：0
> 
> 时间：2013-03-16T19:26:06.427
> 
> 标签：java, swing, jpanel, layout-manager, gridbaglayout

我想知道如何将我的按钮定位到 JPanel 的中心。截至目前，该按钮位于我的“mms”（用作我的背景图像）的顶部，但位于面板的上边缘居中。如何将此按钮定位在图像的中心？

```
//MainMenu setup
JPanel card2 = new JPanel();
card2.setLayout(new GridBagLayout());       
GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.insets = new Insets(2,2,2,2);
gbc.anchor = GridBagConstraints.CENTER;
MainMenuScreen mms = new MainMenuScreen();
card2.add(mms, gbc);
mms.add(menuButton1, gbc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:40:43.177

只需使用默认约束：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.text.*;

public class SSCCE extends JPanel
{
    public SSCCE()
    {
        setLayout( new GridBagLayout() );

        JButton button = new JButton("Centered");
        add(button, new GridBagConstraints());
    }

    private static void createAndShowUI()
    {
        JFrame frame = new JFrame("SSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new SSCCE() );
        frame.pack();
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

将来发布带有您的问题的[SSCCE](http://sscce.org/)，以准确显示您尝试过的内容。

# php - PHP URL 验证，如果无效则修复它

> ID：15453684
> 
> 赞同：4
> 
> 时间：2013-03-16T19:26:34.240
> 
> 标签：php

我正在尝试验证 URL。这是我的代码：

```
function isValidURL($url) 
{
    return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $url);
} 
```

此代码正在运行，但现在我正在尝试确定如何添加`http://`或`https://`URL 是否正确但只是缺少开头`http://`

请指出我正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T19:29:20.850

使用[过滤器功能](http://www.php.net/manual/en/ref.filter.php)，有一个`FILTER_VALIDATE_URL`。

```
$is_valid_url = filter_var($url, FILTER_VALIDATE_URL); 
```

还有很多选项，[请参见此处](http://www.php.net/manual/en/filter.filters.validate.php)。

要检测是否丢失`http://`，只需测试您的输入而不先修改它，然后尝试添加它，如果失败则再次测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T19:48:50.113

您可以使用`parse_url()`验证您的网址 [http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

```
<?php

$url = "https://twitter.com?id=3232";
$url_info = parse_url($url);

echo "<pre>";
    print_r($url_info);
echo "</pre>";

?> 
```

输出

```
Array
(
    [scheme] => https
    [host] => twitter.com
    [query] => id=3232
) 
```

我相信你甚至可以使用这个函数`parse_url`，你会很容易地得到很多参数并且格式可以理解。

所以你的代码将是

```
<?php

function isValidURL($url) {
    $varr = parse_url($url);
    if ($varr['scheme'] == 'https') {
        return true;
    }
    return false;
}
?> 
```

注意：上面使用的 URL 无效，用于测试目的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T19:31:40.297

您可以这样使用[strpos](http://php.net/manual/en/function.strpos.php)：

```
if (strpos($url,'http://') === false){
    $url = 'http://'.$url;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T19:34:08.193

要修复 Regex 的 HTTP(s) 问题，您可以`http(s)?://`在括号之间设置并使其可选`?`：

```
var_dump(isValidURL("stackoverflow.com/questions/15453684/php-url-verification-and-if-not-valid-fix-it"));

function isValidURL($url) {
 return preg_match('|^(http(s)?://)?[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $url);
} 
```

**编辑：** 感谢 DCSoft，似乎上面的正则表达式也验证了类似的东西`fijsfsdufd`，这是一个快速修复，通过添加一个点：

```
function isValidURL($url) {
 return preg_match('|^(http(s)?://)?[a-z0-9-]+\.(.[a-z0-9-]+)+(:[0-9]+)?(/.*)?$|i', $url);
} 
```

[这可能很有趣。](http://regexlib.com/REDetails.aspx?regexp_id=1854)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-11T07:52:50.013

基于[@seanwm](https://stackoverflow.com/users/1476763/seanwm)，这是一个**检查和修复 URL**的函数。

**PHP 函数**

```
function fixUrl($url, $forceSSL = false) {

    if (strpos($url,'http://') === false 
    && strpos($url,'https://') === false) {

        if($forceSSL) {
            return 'https://'.$url;
        }

        return 'http://'.$url;
    }

    return $url;
} 
```

**采用**

对于*http://*：

```
$url = fixUrl($url); 
```

强制添加*https://*：

```
$url = fixUrl($url, true); 
```

# c# - 发布输出比 Debug 慢：MD5CryptoServiceProvider.ComputeHash()

> ID：15453685
> 
> 赞同：3
> 
> 时间：2013-03-16T19:26:37.143
> 
> 标签：c#, optimization, md5

我正在通过下面的代码定期计算文件的 MD5 哈希值。这些文件大约为 10MB。当我在调试模式 (Debug | x64) 下运行我的程序时，对 ComputeHash() 的调用需要 35 毫秒，如果在发布模式 (Release | x64) 中构建，则需要 400 毫秒 - 两者都在没有附加调试器的情况下针对同一个文件进行了测试并重新测试多时。

（我尝试使用 Visual Studio Express 2010 和 2012 - 结果相同）。

我该怎么做才能在发布模式下获得良好的调试性能？有任何想法吗？提前致谢！

编码：

```
public static string GetMD5HashFromFile(string fileName)
{
  StringBuilder sb = new StringBuilder();

  if (File.Exists(fileName))
  {
    var stream = File.Open(fileName, FileMode.Open, FileAccess.Read, IO.FileShare.ReadWrite);
    MD5 md5 = MD5.Create();

    //for benchmarking
    var s = Stopwatch.StartNew();

    byte[] retVal = md5.ComputeHash(stream);

    //for benchmarking
    System.Windows.MessageBox.Show(s.ElapsedMilliseconds.ToString());

    stream.Close();

    for (int i = 0; i < retVal.Length; i++)
      sb.Append(retVal[i].ToString("x2"));
  }

  return sb.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T01:26:20.460

您是否通过 Visual Studio 运行发行版和调试版？如果是这样，请尝试直接在 Visual Studio 之外运行它们。通过 Visual Studio 运行它们将始终将调试器附加到您的进程，从而导致速度变慢。

# python - 如何表示二元组

> ID：15453689
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:27:05.427
> 
> 标签：python, twitter, nlp, cluster-analysis, text-mining

我正在研究一种系统/算法，它将检测推文流中的主题。

我要做的是删除停用词、表情符号、网址等，我正在考虑将推文表示如下：

```
terms = (t1, t2, ..., tk)
hashtags = (h1, h2, ..., hn)
date = date of tweet 
```

然后在应用一些聚类算法时使用推文之间的一些相似性度量，结合这三个值。这会比这更复杂一些，因为我会处理回复（例如，当你回复一些推文时，大多数时候你会继续谈论相同的话题等）。

我不知道这是否可行，但到目前为止我看到的问题是我没有识别**n-grams**，所以*Barack Obama*大部分时间都在一起出现，在我的系统中它将是两个独立的条款（*巴拉克*和*奥巴马*）。

我的问题是：

**我怎样才能表示二元组？我的意思是，它通常是如何建模的？**

我想过有类似以下的东西：

```
Tweet = `Some words here`
terms = `[some, words, here, some words, words here]`
... 
```

但我不知道这是否是正确的方法，如果我必须为每个可能的二元组都这样做，等等。

**编辑**：

在我的数据库中，我将存储所有术语。我是否也应该像存储术语一样存储双元组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:57:32.250

假设您的一份文件是“敏捷的棕色狐狸跳过了懒惰的狗”。

bi-gram 和 uni-gram 将是：

```
the_quick
quick_brown
brown_fox
fox_jumped
jumped_over
over_the
the_lazy
lazy_dog
the
quick
brown
fox
jumped
over
lazy
dog 
```

然后，您可以将所有文档的所有唯一词放在一个词向量中进行分析，如下所示：

```
Document the_quick  quick_brown  ... lazy  dog   some_other_gram

1        0.01       0.02             0.1   0.05  0.0
2        0          0                0.12  0.0   0.1
3        0.5        0.4              0     0     0 
```

其中单元格中的数字表示文档中术语的计数、二进制计数、频率或 TFIDF 分数。

然后，您可以比较文档的相似性，或者对它们进行聚类或分类。

# asp.net - ASP.net 拒绝访问文件夹在 IIS 上不起作用

> ID：15453693
> 
> 赞同：1
> 
> 时间：2013-03-16T19:27:24.797
> 
> 标签：asp.net, iis-7

我想拒绝访问我网站上包含图像的文件夹。

我为此使用以下部分`web.config`：

```
<location path="images/catalog">
    <system.web>
      <authorization>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

它在本地工作正常，但在服务器（IIS7）上不起作用。有任何想法吗？

可能您有另一种解决方案如何拒绝访问特定文件夹中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:45:15.847

我找到了解决方案。

我已将此部分添加到`web.config`：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="false">
    <remove name="FormsAuthenticationModule" />
    <add name="FormsAuthenticationModule" type="System.Web.Security.FormsAuthenticationModule" />

    <remove name="UrlAuthorization" />
    <add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule" />
  </modules>
</system.webServer> 
```

原因 - IIS7 出于某种原因忽略了表单身份验证。

在这些问题中，您可以找到原因和解决方案：

1.  [asp.net - runAllManagedModulesForAllRequests = “true” 在 IIS7 中终止 Windows 身份验证](https://stackoverflow.com/questions/2030138/runallmanagedmodulesforallrequests-true-killing-windows-authentication-in-ii)
2.  [IIS7 表单身份验证不会拒绝图像访问](https://stackoverflow.com/questions/6447273/iis7-forms-authentication-doesnt-deny-image-access?rq=1)

# java - 尝试通过 JAVA 通过 LAN 创建服务器时出现问题

> ID：15453696
> 
> 赞同：1
> 
> 时间：2013-03-16T19:27:32.067
> 
> 标签：java, serversocket

**这是我第一次在 java 中编写客户端-服务器或更准确地说是套接字编程。** 我正在创建一个提供一些端口的服务器。现在在同一个系统中，我启动了一些客户端窗口，当我从客户端发送任何消息时，它会通过服务器广播到每个客户端。现在***，如果我在不同系统中通过 LAN 运行相同的服务器代码，问题就不会发生。*** 数据没有被广播。以下是我的服务器代码-

```
 public void run() {
    try {
        serverSocket = new DatagramSocket(9878);
        group = InetAddress.getByName("230.0.0.1");
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
    while (true) {
        try {
            byte[] receiveData = new byte[1024];
            byte[] sendData = new byte[1024];
            DatagramPacket receivePacket = new DatagramPacket(receiveData,
                    receiveData.length);
            serverSocket.receive(receivePacket);
            receiveData = receivePacket.getData();

            if (receivePacket.getLength() > 0) {
                String sentence = new String(receivePacket.getData());          
                DatagramPacket packet = new DatagramPacket(sendData,
                        sendData.length, group, 9879);
                serverSocket.send(packet);
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

现在我的客户正在通过 -

```
private final void sendDatatoServer(){
         IPAddress = InetAddress.getByName("localhost");
         String sentence = strTitle+" : "+textPane.getText();
          sendData = sentence.getBytes();       
          DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 9878);
          textPane.setText("");
          try {
            clientSocket.send(sendPacket);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
  } 
```

我再次像这样从服务器读取广播数据-

```
try {
        address = InetAddress.getByName("230.0.0.1");
        socket = new MulticastSocket(9879);
        socket.joinGroup(address);
        byte[] buf = new byte[256];
        packet = new DatagramPacket(buf, buf.length);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    runnableTask = backgroundExec.submit(new Runnable() {
        @Override
        public void run() {
            while(true){
                try {
                    socket.receive(packet);
                    String received = new String(packet.getData(), 0, packet.getLength());
                    setEditor(received);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }            
            }
        }
    }); 
```

# ios - 如何自动调整 UITableView 的高度？

> ID：15453701
> 
> 赞同：1
> 
> 时间：2013-03-16T19:28:13.033
> 
> 标签：ios, objective-c, uitableview, xamarin.ios

我有一个`UITableView`with `Style=Grouped`（虽然没有任何分组，我只是喜欢它产生的风格）。通常`UITableView`根据情况有 2 或 3 行。

如何`UITableView`根据行数自动调整大小？请记住，使用`Style=Grouped`，顶部有一大块空白`UITableView`。我希望在底部有一个类似的空间`UITableView`。

我正在使用 Xamarin/C# 执行此操作，但 Objective C 的答案也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:37:53.010

UITableView 扩展 UIScrollView 所以在重新加载表格视图后使用 -[UIScrollView contentSize] 和 -[UIScrollView contentInset] 来获取内容的高度，然后设置表格视图的框架高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:01:23.417

[UITableViewDelegate 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)中有一些方法可以指定表格视图中每个对象的高度（直接，使用类似的东西`heightForRowAtIndexPath`，或间接使用类似的东西`viewForHeaderInSection`- 您可以返回具有`size`任何您想要的属性的视图）。 `Height of header + Height of footer + (height of cell * number of cells)`将为您提供无需滚动即可容纳整个表格所需的空间。

如果您没有实现任何这些方法，则当前 (iOS 6) 的默认值分别为 30、18 和 44。

# android - 构建读/写应用程序是否需要用于 NFC 读写器 acr122u 设备的 SDK？

> ID：15453709
> 
> 赞同：10
> 
> 时间：2013-03-16T19:28:37.000
> 
> 标签：android, nfc, read-write

我有 nexus s、nexus 4 和 6 mifare nfc 标签，并想用 nfc 读写器 acr122u 设备（我还没有买它）制作一个桌面应用程序。

但是除了android sdk之外，是否还需要一些其他的SDK来通过eclipse和java制作桌面应用程序？或者我可以直接购买和使用acr122u设备（没有sdk）并通过eclipse制作应用程序？

如果需要 SDK，是否有任何链接可以免费下载，或者我必须从供应商那里购买？

* * *

还有一件事，nexus S 和 ACR122U 是否支持 felica nfc 卡？
我有 mifare 经典 nfc 卡，它们可以正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T13:38:43.170

要为 ACR122U 开发应用程序，您无需从 ACS 购买 SDK。从计算/开发的角度来看，ACR122U 是一款智能卡读写器。

要使用 Java 进行开发，您将需要[ACR122U 驱动程序](http://www.acs.com.hk/index.php?pid=drivers&id=ACR122U)并针对[Java 智能卡 I/O API进行编码](http://docs.oracle.com/javase/6/docs/jre/api/security/smartcardio/spec/)

ACS 提供的 SDK 只是各种平台（Java、C#.NET、VB6、C++）的示例代码集合，不需要与设备接口。

[这](https://code.google.com/p/java-sample-programs/source/browse/trunk/JavaSamples/src/src/com/moodykettle/pcsc/PCSC.java?r=9)是一些示例代码，看起来可能对您有用。你到底想达到什么目的。

最后，如果您对 .NET 开发感兴趣，请查看适用于 .NET 的[CardWerk 智能卡 API](http://www.cardwerk.com/smartcard-api/)。我使用了它，它极大地简化了与 winscard.dll 交互的事情，这似乎需要做很多工作。

# cakephp - 致命错误：找不到类“PagesController”

> ID：15453715
> 
> 赞同：1
> 
> 时间：2013-03-16T19:28:56.067
> 
> 标签：cakephp, import, controller, fatal-error

我使用 cake 有一段时间了，现在我有一个稍微修改的页面控制器，我想在我的 default.ctp 中使用它，我将它导入

```
App::uses('PagesController', 'Controller'); 
```

或者

```
App::import('Controller', 'Pages'); 
```

两者都可以在我的本地主机 xampp 上工作，而不是在 openshift Web 服务器上。无论我做什么，我都会遇到致命错误，找不到类。用谷歌搜索这个问题 2 小时，感觉就像我在这里撞墙一样。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:02:15.703

好的，我使用 requestAction 代替，这有效。:) 要解决类似的问题，可以说 $pages = $this->requestAction('pages/');

然后在你需要的时候'foreach' $pages 数组。重要的！在创建页面的控制器函数中（在本例中为控制器 pagesController 和函数 'index' ）不要忘记返回你编写的 $pages 对象，而不仅仅是像通常那样“设置”它。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:37:13.070

我会尽量避免这些调用并使用 CakePHP 约定。您的本地 XAMPP 副本和 OpenShift 副本之间的差异可能是由于运行不同版本的 CakePHP，但如果您遵循约定，这无关紧要。

最好将使用 PagesController 的所有内容放在文件夹 app/View/Pages 中。这样，CakePHP 就可以处理所有的导入、请求、路由等。除此之外，请记住 OpenShift 中的应用程序路径是 /php/app/（与 XAMPP 相对的 /app/）。我想如果您有自定义控制器，这可能会导致问题。希望这可以帮助！

编辑：我刚刚意识到默认情况下.ctp，你的意思是布局文件。我个人不喜欢在布局中调用控制器。我更喜欢为此使用元素或助手。此外，PagesController 实际上并不意味着包含在站点范围的布局中。它仅适用于 /app/View/Pages 文件夹中的文件。

# django - Django Cache：使用 Memcached 并回退到 FileSystem

> ID：15453716
> 
> 赞同：3
> 
> 时间：2013-03-16T19:28:57.230
> 
> 标签：django, memcached, django-cache

简单的问题：

我的服务器有 1G RAM 和 10GB 磁盘空间

我正在使用[每站点缓存](https://docs.djangoproject.com/en/dev/topics/cache/#the-per-site-cache)，并且我想尽可能多地使用[Memcached](https://docs.djangoproject.com/en/dev/topics/cache/#memcached)，但是当它的空间不足时，[缓存将保存在硬盘中](https://docs.djangoproject.com/en/dev/topics/cache/#filesystem-caching)。

（所有网站的页面加起来大约 2GB）

是否有一个简单的配置来实现这一点？

这是一件很聪明的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T21:35:12.047

听起来您希望 Memcached 在它已满时表现得像普通的 RAM 和页面到磁盘。默认情况下它不是，但您可以通过编写自己的缓存后端来模仿它，就像@AlexanderAfanasiev 提到的那样。实施将是这样的：

首先，定义三个缓存：

```
CACHES = {
    'default': {
        'BACKEND': 'myapp.cache.DoubleCache',
    },
    'memcached': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'LOCATION': '127.0.0.1:11211',
    },
    'filecache': {
        'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
        'LOCATION': '/foo/bar',
    }
} 
```

然后，在 myapp/cache.py 中：

```
from django.core.cache.backends.base import BaseCache
from django.core.cache import get_cache, cache
mem_cache = get_cache('memcached')
file_cache = get_cache('filecache')

class DoubleCache(BaseCache):

    def get(self, key, default=None, version=None):
        result = mem_cache.get(key, default=default, version=version)
        if result:
            return result
        else:
            return file_cache.get(key, default=default, version=version)

    def set(self, key, value, timeout=None, version=None, client=None, _add_only=False):
        memcache_result = mem_cache.set(key, value, timeout=timeout, version=version, client=client, _add_only=_add_only)
        file_result = file_cache.set(key, value, timeout=timeout, version=version, client=client, _add_only=_add_only)
        return memcache_result 
```

这将始终将值存储在两个缓存中。它将从 Memcached 中检索值，如果未命中，将尝试使用 file_cache。这意味着 Memcached 可以管理自己的滚降，只有最旧的命中必须回退到 file_cache。这就是你想要的。

当然，您还必须实现其余的缓存函数，如`delete()`、`get_many()`等。希望这能让您走上正确的道路。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-04T16:00:19.603

利用 TCP/IP。只需稍加努力，就可以扩展此逻辑以创建具有回退功能的良好多缓存后端。

```
import socket
socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

try:
    socket.connect(('127.0.0.1', 11211))
    socket.close()

    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
            'LOCATION': '127.0.0.1:11211',
        }
    }
except:
    CACHES = { 
        'default': {
            'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
            'LOCATION': '/srv/django_cache',
        }
    } 
```

# php - 图像重采样仅适用于 JPEG 文件

> ID：15453728
> 
> 赞同：0
> 
> 时间：2013-03-16T19:29:40.270
> 
> 标签：php

我已经实现了一些代码，允许我将图像重新采样为不同的大小，尽管目前它似乎只适用于 JPEG。我想我必须添加`imagepng($image_p, null, 100);`类型的代码，尽管这似乎仍然失败。至于标题，我不太确定如何允许这三种文件类型？

```
<?php
// The file
$filename = 'Channel-Art-Spec.png';

// Set a maximum height and width
$width = 300;
$height = 300;

// Content type
header('Content-Type: image/jpeg');

// Get new dimensions
list($width_orig, $height_orig) = getimagesize($filename);

$ratio_orig = $width_orig/$height_orig;

if ($width/$height > $ratio_orig) {
   $width = $height*$ratio_orig;
} else {
   $height = $width/$ratio_orig;
}

// Resample
$image_p = imagecreatetruecolor($width, $height);
$image = imagecreatefromjpeg($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width_orig,         $height_orig);

// Output
imagejpeg($image_p, null, 100);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:36:16.130

而不是`imagecreatefromjpeg()`你需要为你正在阅读的文件类型使用适当的函数。

`getimagesize()`检查类型并给出数组（`IMAGETYPE_XXX`参见[文档](http://php.net/manual/en/function.getimagesize.php)）。`imageinfo`

你也可以使用效率低一点的`imagecreatefromstring(file_get_contents($filename))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:38:21.050

您的代码仅适用于 JPEG 图像的原因是代码中的以下行：

```
$image = imagecreatefromjpeg($filename); 
```

对于 PNG 图像，请使用[`imagecreatefrompng`](http://www.php.net/manual/en/function.imagecreatefrompng.php).

# facebook-ios-sdk - Facebook SDK：无法完成操作。（com.facebook.sdk 错误 7。）

> ID：15453730
> 
> 赞同：3
> 
> 时间：2013-03-16T19:29:43.343
> 
> 标签：facebook-ios-sdk

我在使用适用于 iOS 的 Facebook SDK 时遇到问题，尤其是`FBNativeDialogs presentDialogModallyFrom:initialText:image:url:handler`.

这是我的代码：

```
[ FBNativeDialogs presentShareDialogModallyFrom:self initialText:nil image:nil url:nil handler:^(FBNativeDialogResult result, NSError*error){
    NSLog(@"Error: %@", [error localizedDescription]);
    NSLog(@"Result %d",result);
}]; 
```

它总是记录：

> *错误：操作无法完成。（com.facebook.sdk 错误 7。）结果为 2，即 FBNativeDialogResultError。*

我已经看到其他帖子建议通过在 iOS 设备/模拟器中设置 Facebook 帐户来解决这个问题。我已经这样做了，但我仍然遇到问题。

有谁知道更多关于这个错误或如何解决它的信息？

# jquery - 将 div 附加到文档中的所有元素

> ID：15453731
> 
> 赞同：0
> 
> 时间：2013-03-16T19:29:45.247
> 
> 标签：jquery, variables, append, each

我想将一个 div 附加到文档中的所有元素。div 应该与`height`它们`weight`所附加的元素相同。为了得到`height`，`width`我设置了一个这样的变量：

```
var height =   $(this).height();
var width =   $(this).width(); 
```

并像这样附加：

```
$('*').append('<div class="over" style="height:'+height+';width:'+width+';">'+height+' + '+width+'</div>'); 
```

正如您在这个[Fiddle(LINK)](http://jsfiddle.net/d4k6g/)中看到的那样，它并没有真正奏效。它给了我相同的尺寸`251 + 420`，这很奇怪，因为没有一个元素具有这些尺寸。

如何将 附加`div.over`到文档中的所有`(*)`元素并将其尺寸设置为它们要附加到的元素？（我必须使用`.each`吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:33:26.037

您需要获取每个对象的高度/宽度，而不仅仅是一次。[看到这个小提琴](http://jsfiddle.net/d4k6g/10/)

```
$('body *').each(function (i, v) {
    var $this = $(this),
        h = $this.height(),
        w = $this.width();
    $this.css({ height: h, width: w * 2 });
    $this.append('<div class="over" style="display:block; height:' + h + 'px !important;width:' + w + 'px !important;">' + h + ' x ' + w + '</div>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:33:40.617

您可以`append()`像这样使用函数语法：

```
$('body *').append(function(){ 
    var height = $(this).height(),
        width  = $(this).width();

    return '<div class="over" style="height:'
            +height+';width:'+width+';">'+height+' + '+width+'</div>'; 
}); 
```

**注意：**我已经更改了您的选择器，否则您将循环遍历诸如 之类的元素`<head>`，这可能会导致随机异常。

[这是一个演示](http://jsfiddle.net/Vwf5H/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T19:33:58.037

像这样的东西应该工作：

```
$('body *').each(function(i,el){
    var height = $(el).height();
    var width = $(el).width();
    $(el).append('<div class="over" style="height:'+height+';width:'+width+';">'+height+' + '+width+'</div>');
}); 
```

编辑：您应该针对正文中的所有内容，而不仅仅是所有内容，否则您会在正文标签之外获得一个 div。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T19:34:57.407

使用 each 函数遍历所有元素。

```
$('*').each(function(index, element){
    $(element).append('<div class="over" style="height:'+$(element).height()+';width:'+$(element).width()+';">'+$(element).height()+' + '+ $(element).width()+'</div>'); 
}); 
```

**工作示例：http:** [//jsfiddle.net/d4k6g/4/](http://jsfiddle.net/d4k6g/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T19:52:05.347

可能这将是解决方案：

```
$('body *').each(function(){
    var t = $(this), w = t.width(), h = t.height();
    t.append('<div class="over" style="height:'+h+'px;width:'+w+'px;">'+h+' + '+w+'</div>');
}); 
```

# r - 从日期中提取年份的天数

> ID：15453735
> 
> 赞同：16
> 
> 时间：2013-03-16T19:30:00.050
> 
> 标签：r, date

我有一个这样的日期列表：

```
library(lubridate)
my.dates <- c("03-01-2006", "28-01-2006", "12-01-2008", "02-02-2006", "03-03-2008")
my.dates <- dmy(my.dates) 
```

我需要从每个日期提取一年中的天数，如下所示，其中 1 月 1 日是第 1 天：

```
day.number <- c(3, 28, 12, 33, 62) 
```

我在 google 和 SO 上进行了很好的搜索，但找不到一个简单的方法来做到这一点。感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-16T19:34:29.503

您可以使用`yday`功能 from`lubridate`因为您已经在使用它：

```
> yday(my.dates)
# [1]  3 28 12 33 63 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-16T19:35:30.187

尝试`POSIXlt`和它`attributes(my.dates)`

```
my.dates = as.POSIXlt(my.dates,format="%d-%m-%Y")
my.dates$mday
[1]  3 28 12  2  3
my.dates$yday
[1]  2 27 11 32 62 
```

# django - Django-cms 多站点布局解释

> ID：15453736
> 
> 赞同：1
> 
> 时间：2013-03-16T19:30:11.160
> 
> 标签：django, django-cms

如何使用一个 django (django-cms) 实例为两个站点提供服务？当我`site`使用 django admin 安装应用程序并添加两个站点实例时，我可以选择要为哪一个添加页面。所以这就是我不明白的：django 应该如何知道要使用哪个站点？也许我在我的 django 多站点部署方案中遗漏了一些元素，有人可以让我走上正轨吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:47:34.187

基本上，它不知道自己使用哪个站点。您将每个模型与一个（或多个）站点相关联，然后检查视图中给定站点的内容。如果您还没有，请查看[站点文档](https://docs.djangoproject.com/en/1.5/ref/contrib/sites/)中的示例（链接版本为 1.5）。

它并没有真正为开箱即用的完整多租户设置，以防你只是想从一个 Django 安装中运行一些不相关的站点。在这种情况下，我自己的经验是，为每个站点设置单独的 Django 应用程序和数据库，然后使用 Apache 虚拟主机来引导流量会更容易。

# java - 尝试与 startwith 匹配时出现类强制转换异常

> ID：15453748
> 
> 赞同：0
> 
> 时间：2013-03-16T19:31:54.853
> 
> 标签：java

我正在尝试匹配文件前缀是否与我的对象匹配，但我得到了一个 classcastexception

```
 for (int i=0;i<files.length;i++)
        {
            File f= files[i];
            String s=listeClients.get(i).getShortname();
            if(f.getName().startsWith(s))
            {
            System.out.println("file: " + f.getName());
            }
        } 
```

我将一个字符串传递给 startwith 方法，所以我不明白为什么会出现此错误：

```
Caused by: java.lang.ClassCastException: java.lang.Boolean cannot be cast to com.dev.pojo.Clients 
```

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:37:28.843

问题显然是`listeClients`被*声明*为 a `List<com.dev.pojo.Clients>`，但在运行时它实际上*包含*a `java.lang.Boolean`。由于泛型的实现方式（称为[“擦除”](https://www.google.com/search?q=Java+erasure)），JVM 无法实际检测到这一点，直到它到达

```
listeClients.get(i) 
```

它实现为

```
((com.dev.pojo.Clients)(listeClients.get(i)) 
```

导致一个`ClassCastException`.

您需要找到并修复将 a`java.lang.Boolean`插入此列表的代码；并且您可能需要更加注意编译器警告，因为您的编译器*可能*会通过有关未经检查的强制转换的警告消息警告您这种可能性。

（此外，正如其他人指出的那样，您需要在`if`条件之后删除分号。但这不是您发布的异常的来源，因为它发生在该行之前。）

# ruby - 提取 Ruby 参数

> ID：15453750
> 
> 赞同：0
> 
> 时间：2013-03-16T19:32:00.017
> 
> 标签：ruby, rubygems, sinatra, rack, middleware

嗨，我正在尝试制作一个类似于`Rack::URLBuilder`但我无法提取参数的机架控制器。

`config.ru`

```
run Example::Controller.new ([
  "test" => Sinatra::Application
]) 
```

`controller.rb`

```
module Example
  class Controller

    def initialize(map = {})
      @map = map
    end

    def call(env)
      puts @map
    end

  end
end 
```

这段代码提出：

`testSinatra::Application`

每次我运行应用程序。我如何提取一个值作为测试，另一个值作为`Sinatra::Application`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:42:15.507

`.inspect`当您在试验和放入调试跟踪等时添加一个通常会有所帮助：

```
puts @map.inspect 
```

与许多类的默认字符串转换相比，这为您提供了更好的调试输出。

您应该看到您想要的数据实际上就在那里。

# entity-framework - 实体框架渴望包括两个单身孙子

> ID：15453751
> 
> 赞同：2
> 
> 时间：2013-03-16T19:32:03.980
> 
> 标签：entity-framework, entity-framework-4.1

我需要在我的 EntityFramework 查询 (4.1) 中包括孙子，其中孙子是单身离开孩子，如下所示：

> Schedule 有一个 Route，Route 有一个 FromAirport 和一个 ToAirport

我尝试了以下方法：

```
.Include(x => x.Route.FromAirport).Include(x => x.Route.ToAirport) 
```

但它会产生如下的 sql 查询：

```
FROM       [dbo].[Schedule] AS [Extent1]
INNER JOIN [dbo].[Route] AS [Extent2] ON [Extent1].[RouteId] = [Extent2].[Id]
LEFT OUTER JOIN [dbo].[Route] AS [Extent3] ON [Extent1].[RouteId] = [Extent3].[Id]
LEFT OUTER JOIN [dbo].[Airport] AS [Extent4] ON [Extent3].[FromAirportId] = [Extent4].[Id]
LEFT OUTER JOIN [dbo].[Airport] AS [Extent5] ON [Extent3].[ToAirportId] = [Extent5].[Id] 
```

路线当然要加入两次。只要 EF 正确绑定到实体模型，我就可以忍受这一点。

有没有更好的方法来指定包含？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T16:54:58.317

```
.Include(x => x.Route.FromAirport).Include(x => x.Route.ToAirport) 
```

> 有没有更好的方法来指定包含？

不，没有更好的方法使用 EF 并且不指定您自己的查询。

您显然知道 SQL 语句的样子，但是如果您在 SMSS 中运行该查询并打开执行计划，您很可能会看到它实际上并没有加入两次（因为 where 语句是相同的） . 除非您遇到实际的性能问题，否则我建议您不要尝试查看 EF 正在做什么。此外，由于 SQL Server 有自己的优化引擎，除非您检查执行计划，否则无法知道实际会发生什么。

# symfony - 在应用 DataTransformer 之前验证字段

> ID：15453753
> 
> 赞同：4
> 
> 时间：2013-03-16T19:32:09.923
> 
> 标签：symfony, validation

在我的 Symfony 应用程序中，我有一个带有地址的事件实体。这个地址应该可以用于很多事件，所以我添加了一个`ManyToOne`-relation。

该`address`实体包含 3 个字段（`street`和`zipcode`）`city`，但我希望`address`在我的表单中只有 1 个带有预先输入的文本输入`EventType`。所以我创建了一个`DataTransformer`这样做。

通过 AJAX 请求，我收到地址并插入它们。如果输入了新地址，我想创建一个新的数据库记录。我现在的问题是验证新输入的地址。

我的`DataTransformer`样子是这样的：

```
class StringToAddressTransformer implements DataTransformerInterface {

    /**
     * @var ObjectManager
     */
    private $om;

    /**
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om){
        $this->om = $om;
    }

    public function transform($addrobj){
        if (!$addrobj) {
            return null;
        }

    return (string)$addrobj;
    }

    public function reverseTransform($address){

        if (null === $address) {
            return "";
        }

        preg_match('/^([A-Z][-A-Z ]+)\s+(\d+), (\d{5}) ([A-Z]+)$/i', $address, $res);

        $street = $res[1] . ' '. $res[2];
        $zipcode = $res[3];
        $city = $res[4];    

        $addrobj = $this->om->getRepository('FSchubert\SiyabongaBundle\Entity\Address')->findOneBy(array(
            'street' => $street, 'zipcode' => $zipcode, 'city' => $city
        ));

        if(is_null($addrobj)){
            $addrobj = new Address();
            $addrobj->setStreet($street);
            $addrobj->setZipcode($zipcode);
            $addrobj->setCity($city);
        }

    return $addrobj;
    }
} 
```

一切正常，但我绝对没有验证输入的地址。

我尝试在表单类中添加一个约束，但是由于`DataTransformer`调用了`bindRequest()`它，在我看来验证约束被忽略了。

基本上，我希望以我的`DataTransformer`方式或任何方式验证不存在的字段。如果我手动调用 RegEx-Validator，我的代码会是什么样子？还是有另一种（更好的）方法来实现我正在寻找的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:33:50.763

好的，我找到了答案。这还不是最好的方法。我刚刚从 Address-Entity 中删除了除一个 string 之外的所有字段`addressstring`。现在我可以将多个事件映射到一个位置并进行适当的 ajax 调用。但不幸的是，我无法再确定每个地址的城市、街道或邮政编码。这很好用，但正如我所说的那样不是解决方案。我避免了真正的问题......但它有效。

# assembly - 在 x86 程序集中测试负数的最紧凑方法？

> ID：15453755
> 
> 赞同：5
> 
> 时间：2013-03-16T19:32:19.550
> 
> 标签：assembly, x86

目前我这样做是为了测试 x86 程序集 (r/m32,imm8) 中的负数：

```
83F800 CMP EAX, 0 
```

这可以跟在 JL 后面。这是 3 个字节，据说时钟为“1/2”。我可以使用 TEST EAX 或 CMP EAX,imm32（编码 3D），两者的时钟均为“1”，但占用 5 个字节。一般来说，如果我试图最小化代码大小，我这样做的方式是否正确？再一次，这是为了测试一个数字是否小于零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T19:40:54.167

`add eax, eax`只有两个字节（`01 C0`或`03 C0`），但具有破坏性。（之后检查是否携带）

`test eax, eax`也只有两个字节（`85 C0`）。（之后检查签名）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T19:49:44.100

您可以使用：

```
or      eax, eax 
```

它是一个字节短（只有两个字节的操作码）指令！

# bash - 如何将字符串拆分为数组

> ID：15453763
> 
> 赞同：2
> 
> 时间：2013-03-16T19:33:29.907
> 
> 标签：bash

这似乎应该很容易，但我似乎无法让它工作！我有一个字符串，我想根据新行将其分成一个数组。

下面这基本上是我想要做的。

```
echo $devices
serial1 device
serial2 device

arr=$(magic_function $devices)
echo ${arr[0]}
serial1 device
echo ${arr[1]}
serial2 device 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:50:40.427

（`IFS`内部字段分隔符）确定单词在 bash 中的拆分方式。未加引号的扩展总是分开的。默认情况下，这是 \t、\n 和 ' '。您可以将其设置为 \n 以使您的单词仅在换行符上拆分。

```
IFS=$'\n' arr=( $(yourfunc "$devices") ) 
```

较新版本的 bash（4.0+）的另一个选项是`mapfile`命令。

```
mapfile -t arr < <(yourfunc "$devices") 
```

# javascript - 级联下拉列表的第二个下拉列表未填充

> ID：15453765
> 
> 赞同：0
> 
> 时间：2013-03-16T19:33:36.787
> 
> 标签：javascript, jquery, asp.net-mvc-4

我正在点击控制器，但是当我回到 javascript时，函数中`function (courses)`嵌入的`$.getJSON()`内容被跳过，调试器转到`$.getJSON()`函数的末尾，并且第二个下拉列表（课程列表）的数据没有填充。我不确定为什么。

这是我的控制器：

```
public JsonResult GetCourses(int facilityId)
{
    return Json(GetCoursesSelectList(facilityId), JsonRequestBehavior.AllowGet);
}

private SelectList GetCoursesSelectList(int id)
{
    var Courses = db.Courses.Distinct().Where(a => a.FacilityId == id).ToList();
    SelectList list = new SelectList(Courses);
    return list;
} 
```

我的javascript如下：

```
$("#ddlFacilities").change(function () {
            var selectedFacility = $(this).val();            
            if (selectedFacility !== null && selectedFacility !== '') {
                $.getJSON("/RoundDetail/GetCourses", { FacilityId: selectedFacility },
                    function (courses) {
                    alert(course.Course_Name);
                    var coursesSelect = $('#ddlCourse');
                    coursesSelect.empty();
                    $.each(courses, function (index, course) {
                        coursesSelect.append($('<option/>', {
                            value: course.CourseId,
                            text: course.Course_Name
                        }));
                    });
                });
            }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:36:30.987

在加载级联下拉列表时尝试查找脚本错误。如果做不到，请尝试加载值的替代方法。我通常按​​照以下方法加载级联下拉列表。

[脚本]

```
function SetdropDownData(sender, args) {           

        $('#ShipCountry').live('change', function () {
            $.ajax({
                type: 'POST',
                url: 'Home/GetCities',
                data: { Country: $('#ShipCountry').val() },
                dataType: 'json',
                success: function (data) {
                    $('#ShipCity option').remove();
                    $.each(data, function (index, val) {                           
                            var optionTag = $('<option></option>');
                            $(optionTag).val(val.Value).text(val.Text);
                            $('#ShipCity').append(optionTag);

                    });
                }
            });
        });

  } 
```

[控制器]

```
public IEnumerable<SelectListItem> Cities(string Country)  // ShipCity is filtered based on the ShipCountry value  
    {
        var Cities = new NorthwindDataContext().Orders.Where(c=>c.ShipCountry == Country).Select(s => s.ShipCity).Distinct().ToList();
        List<SelectListItem> type = new List<SelectListItem>();
        foreach (var city in Cities)
        {
            if (city != null)
            {
                SelectListItem item = new SelectListItem() { Text = city.ToString(), Value = city.ToString() };
                type.Add(item);
            }
        }
        return type;
    }
    public ActionResult GetCities(string Country)  
    {
        return Json(Cities(Country), JsonRequestBehavior.AllowGet); 
```

}

# php - Zend_Auth->getStorage->write() 数据对象丢失

> ID：15453768
> 
> 赞同：1
> 
> 时间：2013-03-16T19:33:51.100
> 
> 标签：php, zend-framework, zend-auth

我对我的身份验证数据感到疯狂。

当我在我的应用程序中有人登录时，我的 authcontroller 将用户数据存储在 Zend_Auth 存储中

```
class AuthController extends Zend_Controller_Action
{ ...
   public function loginAction()
   { ...
      $userMapper = new Application_Model_UsersMapper();
      $user = $userMapper->fetchById($adapter->getResultRowObject()->id);
      $this->auth->getStorage()->write($user);
   }
} 
```

在此之后，我创建了一个插件来将用户许可（存储在 $userMapper 返回的用户对象中）添加到我的 Acl 系统。

问题是当我调用 Zend_Auth->getInstance()->getIdentity() 时，我只找到用户名而不是整个 Object ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:11:03.663

我已经解决了我的问题！mysql配置有错误。read() 函数，在存储中没有找到任何东西，返回了用户名。感谢你们对我的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:24:16.023

这是因为身份实际上是用户名（在您的情况下）。如果要获取整个对象，可以这样获取：

```
$user = $this->auth->getStorage()->read(); 
```

要考虑的另一件事是 Zend_Auth 的默认存储是一个会话，因此如果对象附加到一些其他资源（如 db 等），您可能需要序列化该对象。

希望这可以帮助 ：）

# css - 如何在 Twitter Bootstrap 中将两个跨度居中？

> ID：15453772
> 
> 赞同：0
> 
> 时间：2013-03-16T19:33:59.577
> 
> 标签：css, twitter-bootstrap

我无法让两个 span6 div 在 Bootstrap 中居中。我在容器流体中的一行内有这两个 div，但一切都粘在左边。如果可能，我希望两个 div 彼此相邻并居中，但如果屏幕太小，我希望第二个跨度位于第一个跨度下方。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:54:11.573

默认情况下，您的标记需要如下所示：

```
<div class="container-fluid">
    <div class="row">
        <div class="span6"></div>
        <div class="span6"></div>
    </div>
</div> 
```

或者：

```
<div class="span12">
    <div class="row">
        <div class="span6"></div>
        <div class="span6"></div>
    </div>
</div> 
```

为了使第二个`.span6`出现在第一个下方，您可能希望使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来更改`.container-fluid`容器的大小并为`.span*`类提供最小宽度 - 这样最终当容器的宽度不足以容纳两个`.span6`元素时第二个被迫低于第一个。

# jquery - jQuery Mobile，显示/隐藏复选框/收音机并更新显示的输入

> ID：15453780
> 
> 赞同：1
> 
> 时间：2013-03-16T19:34:44.213
> 
> 标签：jquery, jquery-mobile

我正在尝试从复选框组中动态添加和删除输入。下面的示例有效，但是当输入被删除时，我在最后一个输入项上不再得到圆角边缘。它只是切断。我认为运行 checkboxradio('refresh') 可以解决问题，但事实并非如此。有任何想法吗？

```
if(some condition) {
  $('.hideThis').hide();
  $('[name=values]').checkboxradio('refresh');
} else {
    $('.hideThis').show();
    $('[name=values]').checkboxradio('refresh');
}

<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <input type="checkbox" name="values" id="val1" value="val1">
        <label for="val1">Value 1</label>
        <input type="checkbox" name="values" id="val2" value="val2">
        <label for="val2">Value 2</label>
        <div class="hideThis">
            <input type="checkbox" name="values" id="val3" value="val3">
            <label for="val3">Value 3</label>
        </div>
    </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:24:29.777

**更新**

根据 OP 评论，以下答案适用于*Jquery Mobile V1.3.0*。

对于*Jquery Mobile V1.2.0* ，最后一个复选框`ui-last-child`使用`ui-corner-bottom`和类而不是类。`ui-controlgroup-last`

**原答案**“ *Jquery Mobile V1.3.0* ”

最后一个复选框有`ui-last-child`样式。因此，当您隐藏/删除最后一个*复选框*时，JQM 不会将该类添加到前一个复选框。因此，您必须通过将`ui-last-child`样式添加到隐藏*复选框的前一个复选框来解决问题。*

如果您隐藏第一个*复选框*，请`ui-first-child`改用。

**标记**

```
<a href="#" data-role="button" id="hidethis">hide this</a>

<form>
 <fieldset data-role="controlgroup">
    <legend>Vertical:</legend>
    <input type="checkbox" name="checkbox-v-2a" id="checkbox-v-2a">
    <label for="checkbox-v-2a">One</label>
    <input type="checkbox" name="checkbox-v-2b" id="checkbox-v-2b">
    <label for="checkbox-v-2b">Two</label>
    <input type="checkbox" name="checkbox-v-2c" id="checkbox-v-2c">
    <label for="checkbox-v-2c">Three</label>
 </fieldset>
</form> 
```

**JQM**

```
$(document).on('click', 'a#hidethis', function () {
 $('div.ui-checkbox:last-child').prev('div').find('label').addClass('ui-last-child');
 $('div.ui-checkbox:last-child').hide();
}); 
```

**[JSFiddle 示例](http://jsfiddle.net/Palestinian/StRQ4/1/)**

# html - 在列中垂直居中图像

> ID：15453781
> 
> 赞同：2
> 
> 时间：2013-03-16T19:34:45.430
> 
> 标签：html, css

我的 HTML 页面中有两列。

```
<div id="content">
  <div id="left"></div>
  <div id="right"></div>
</div> 
```

他们每个人都占据页面的一半

```
#left {
    float: left;
    width: 50%;
}

#right {
    float: left;
    width: 50%;
} 
```

我想在右栏中将图片居中。我知道我可以通过做它使其水平居中`margin-left: auto; margin-right: auto;`。我怎样才能使它垂直居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:37:40.650

我看到的第一个问题是没有为`left`and `right` `div`s 的高度指定高度；高度应设置`100%`为您喜欢的任何值。要使图像垂直居中，我们可以使用绝对定位。我们将设置图像的尺寸（在任何情况下都是很好的做法），然后设置`top:50%`和`left:50%`属性。不过，这会将图像推到框外，因此我们添加了图像宽度和高度一半的负边距。这将`div` **每次**垂直和水平对齐图像！

这是更新后的 CSS：

```
#left, #right {
width: 50%;
height:100%;
float:left;
position:relative;
}
#right img {
position: absolute;
top: 50%;
left: 50%;
width: 80%;
height: 80%;
margin-top: -40%; /* Half the height */
margin-left: -40%; /* Half the width */
} 
```

看看这个 JSFiddle：http: [//jsfiddle.net/bYF7F/2/](http://jsfiddle.net/bYF7F/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:51:44.307

我知道这个问题已被标记为已回答，但您确实提到图像上的高度和宽度并不理想。所以我想提出另一种解决方案。

添加：

```
display: -webkit-flex;
display: flex; 
```

到正确的div，并且：

```
margin: auto; 
```

到图像。我想这就是你所追求的。见小提琴[http://jsfiddle.net/Fqa7b/](http://jsfiddle.net/Fqa7b/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-16T19:38:04.623

如果您使用 TABLE 而不是 DIV，它将自动居中。

# javascript - 插入动态 html 内容

> ID：15453790
> 
> 赞同：2
> 
> 时间：2013-03-16T19:35:22.233
> 
> 标签：javascript, html, dhtml

我有一个表格，可以使用“添加问题”按钮添加多个问题。如果单击该按钮，则会创建一个新的手风琴组。

```
<div id="accordion1" class="accordion">
      <div id="group1" class="accordion-group">
           <input type='text' id='question1' class='textbox-input'/>
      </div>
</div>
<input type"button" value="Add Question" id="addQuestion" onclick="javascript:addQuestion();"/>

<script>
 function addQuestion(){
       var previousContent = document.getElementById("accordion1").innerHTML;
       var newContent = "<div id='group2' class='accordion-group'>" +
                        "<input type='text' id='question2' class='textbox-input'/>" +
                        "</div>";
       document.getElementById("accordion1").innerHTML = previousContent + newContent;
 }
</script> 
```

我还有一些脚本可以为文本框提供样式，但这些样式不会应用于添加的新动态内容。每个手风琴组内的选择框也被禁用。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:17:28.780

这个怎么样：http: [//jsfiddle.net/PVbRJ/](http://jsfiddle.net/PVbRJ/)

```
$("#addQuestion").live('click', addQuestion);

 function addQuestion(){
       var previousContent = $("#accordion1").html();

       var newContent = "<div id='group2' class='accordion-group'>" +
                        "<input type='text' id='question2' class='textbox-input'/>" +
                        "</div>";
       $("#accordion1").html(previousContent + newContent);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:25:35.473

这对我有用。感谢所有的帮助:)

```
function addQuestion(){     
               var newContent = "<div id='group2' class='accordion-group'>" +
                                "<input type='text' id='question2' class='textbox-input'/>" +
                                "</div>";
               $("#accordion1").append(newContent);
} 
```

# python - 如何将virtualenv添加到路径

> ID：15453793
> 
> 赞同：27
> 
> 时间：2013-03-16T19:35:35.010
> 
> 标签：python, macos, path, virtualenv, pip

我试图找出为什么我的`virtualenv`和/或`virtualenv`包装器 - 使用`pip`using安装`homebrew`- 找不到。我认为这是因为它没有添加到我的 PATH 中：

```
$ which virtualenv
$ 
```

和：

```
$ virtualenv someDir
$ -bash: virtualenv: command not found 
```

`homebrew`我使用, 和`virtualenv`using安装 pip`pip`没有问题。我尝试重新安装`virtualenv`，但这也不起作用。我怎么知道要添加到哪个路径`PATH`？只是`virtualenv.py`似乎安装到的路径？这似乎是：

```
/usr/local/lib/python2.7/site-packages/virtualenv.py 
```

我还找到[了这个指南](http://youshoulddoityourself.blogspot.nl/2010/11/test.html)，它暗示了这一点：

```
$ ln -s ../Cellar/python/2.7/Frameworks/Python.framework/Versions/2.7/bin/virtualenv virtualenv 
```

但是，它并不能帮助我跑步`virtualenv`。我在 Mac OSX 10.7.5 (Lion) 上。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T01:58:38.573

似乎我自己是几乎所有“简单”安装程序规则的例外。出于某种原因，这是一个与路径相关的问题：

我跑了`brew info python`，输出了很多信息。在底部我发现了这个：

```
Executable python scripts will be put in:
/usr/local/share/python
so you may want to put "/usr/local/share/python" in your PATH, too. 
```

我将它添加到我的 PATH 中`/etc/launchd.conf`，你`~/.bashrc`瞧：

```
$ which virtualenv 
```

告诉我：

```
"/usr/local/share/python/virtualenv" 
```

我仍然不知道为什么我在任何地方都找不到正确方向的任何指针？`pip install virtualenv`应该添加到 PATH 本身吗？如果是这样，为什么不在我的系统上？为什么@bibhas 明确告诉我这不是路径问题？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-23T01:39:46.133

之后有同样的问题`pip install virtualenv`

当我检查 python 时`ls -la /usr/local/bin/python`，我发现它象征性地链接到`/Library/Frameworks/Python.framework/Versions/2.7/bin/python`

当我 cd 在该目录中时，我还找到了 virtualenv 可执行文件和

通过修复它

1.  `cd /Library/Frameworks/Python.framework/Versions/2.7/bin`
2.  `ln virtualenv /usr/local/bin/virtualenv`

旁注：我也碰巧安装了python`/System/Library/Frameworks/Python.framework/Versions/2.7/bin`

我相信那是OSX附带的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T20:45:02.737

在您的 .bashrc 中，您需要：

```
export WORKON_HOME=~/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-05T07:17:07.513

我通过以下方式解决了它：起初，我发现它位于，`/usr/local/python3` 然后通过命令修复它：

```
ln virtualenv /usr/local/bin/virtualenv 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-26T18:40:48.337

（特定于 Mac / Linux）所以当我`pip3 install --user --upgrade virtualenv`告诉我`Users/home/Library/Python/3.7/bin`我的 PATH 中没有时，我收到了一条错误消息。所以我简单地添加了它。

如果这是在 Mac 上，以下为我做了

```
vi ~/.bash_profile

PATH="/Users/home/Library/Python/3.7/bin:/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}" 
```

重新启动您的终端并输入`virtualenv env`，这应该可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T18:41:36.797

该解决方案将为您提供一个替代工具，可以同时使用和解决您的`virtualenv`问题。

使用[pythonbrew](https://github.com/utahta/pythonbrew)。它的灵感来自`rvm`ruby​​ 世界，有助于管理系统上的 python，还可以包装`virtualenv`命令以提供虚拟环境管理。我将它用于我的开发目的 Mountain Lion 并且没有任何问题。更多细节（在我的博客上）：[http ://stacktoheap.com/blog/2013/03/11/why-use-virtualenv-when-there-is-pythonbrew/](http://stacktoheap.com/blog/2013/03/11/why-use-virtualenv-when-there-is-pythonbrew/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-18T03:13:01.590

我的想法是将您的 virtualenv 位置添加到 BASH PATH

`export PATH=$PATH:/usr/local/python2.7/bin` 或者改变你的位置

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-13T03:01:08.007

对于那些使用 Python 2.7 的人，我也遇到了这个问题，并通过简单地将以下行放入`\etc\paths`文件中来解决它（可能首先需要`$ sudo chmod`它）：

```
/Library/Frameworks/Python.framework/Versions/2.7/bin 
```

保存更改并开始一个新的终端会话。检查它`echo $PATH`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-16T19:38:39.207

中的模块由用于运行应用程序`/usr/local/lib/python2.7/site-packages`的短脚本导入。`pkg_resources.load_entry_point`实用程序脚本应位于`/usr/local/bin`.

# java - JTA 的本地资源

> ID：15453797
> 
> 赞同：1
> 
> 时间：2013-03-16T19:35:45.050
> 
> 标签：java, ejb, persistence, entitymanager, jta

我正在开发一个 Web 应用程序，我必须使用我从未使用过的 JTA。我开始使用 EntityManager 但它似乎在这里不起作用。当我使用 EntityManager 时，我收到以下消息：

```
Only persistence units with transaction type JTA can be used as a container managed entity manager. 
```

简而言之，我有这段代码：

```
@PersistenceContext(unitName = "zJSF2PU")
private EntityManager em;
em.getTransaction().begin();
//some code
em.getTransaction().commit(); 
```

如果没有 EntityManager，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:52:55.763

在您的 ejb 项目`META-INF/persistence.xml`中，您必须具有以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence>
    <persistence-unit name="myPersistenceUnitNamePersonalised" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/MySQL</jta-data-source>
        <properties>
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
            <property name="eclipselink.ddl-generation.output-mode" value="database" />
        <property name="eclipselink.logging.level" value="FINE" />
        </properties>
    </persistence-unit>
</persistence> 
```

你必须在你的`Application Server`(jboss, tomcat, glassfish)中声明这个

您需要搜索如何在您的`Application Server`...中添加数据源和持久性单元

就是这样……他们通过 jndi 交流

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:10:30.383

1.  `transaction-type="RESOURCE_LOCAL"`从您的 persistence.xml 中删除。

2.  删除对 的调用`em.getTransaction()`。注入`javax.transaction.UserTransaction`（JTA）并使用它的开始/提交/回滚方法。或者，将 EM 注入到无状态 EJB 中，并允许 EJB 容器自动管理事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:01:20.370

我终于能够解决我的问题。例如，从我的搜索结果来看，当您在 ManagedBeans 中使用 JTA 时，您不能使用 EntityManager。但是它可以在无状态 bean 中使用，然后我们可以将此无状态 Bean 注入到 ManagedBean 并使用它的方法。程序如下：

*   创建一个 EJB（一个带有 @Stateless 注解的简单类）

*   将使用 EntityManager 的方法移动到 EJB

*   将 EJB 注入您的托管 bean（使用 @EJB 注释）并调用相关方法

有关更多信息，请参阅另一篇文章：[JTA & MySQL](https://stackoverflow.com/questions/15455475/jta-mysql-how-to-retrieve-records-from-database)

# ios - 抓取 UIWebView 页面标题作为 NSString

> ID：15453800
> 
> 赞同：1
> 
> 时间：2013-03-16T19:35:54.740
> 
> 标签：ios, uiwebview, nsstring

我正在尝试通过 JavaScipt 获取已加载网页的标题，并将其作为 UIActionSheet 的标题，如下所示：

![UIActionSheet](../Images/afbc0eb2851be7062fbc19d56fe63b5b.png)

我目前在**ViewController.m**中的内容：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString *webTitle = [webView stringByEvaluatingJavaScriptFromString:@"document.title"];
}

- (IBAction)showActionSheet:(id)sender {
    // webTitle.text receives errors
    UIActionSheet *actionsheet = [[UIActionSheet alloc]initWithTitle:webTitle delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Share...", @"Bookmarks", @"Read Later", @"Add to Bookmarks", @"Settings", nil];
    actionsheet.actionSheetStyle = UIBarStyleBlackTranslucent;
    [actionsheet showInView:self.view];
    NSLog(@"Action Menu opened");
} 
```

编辑：我也收到这些警告。

![警告](../Images/282c34b81fc12c506223b5463824137a.png)

EDIT2：通过 javascript 警报评估代码工作正常。

![评估](../Images/d4b2e965e45dbb2f42c4f4e13be7bd92.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-09T13:26:37.383

由于您在`webTitle`内部声明`webViewDidFinishLoad:`它是一个局部变量，并且您为其分配的任何值仅在此特定方法的范围内有效。

由于您想`webTitle`在 的范围之外使用，因此`webViewDidFinishLoad:`在内部`showActionSheet:`您需要一个对两种方法都可见的变量。

您需要在您的中声明一个实例变量`webViewController`来保存页面标题的值。然后你会`webViewDidFinishLoad:`像这样在里面设置它的值：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    webTitle = [webView stringByEvaluatingJavaScriptFromString:@"document.title"];
} 
```

上面的代码假设你命名了你的实例变量`webTitle`

如果您的控制器中已经有这个实例变量并且在内部错误地重新声明了它`webVieDidFinishLoad:`，只需`NSString *`从赋值行中删除 。

# c# - OnBeforeResponse 让它在 excel 中传递参数 url 而不是在 chrome 中打开

> ID：15453802
> 
> 赞同：0
> 
> 时间：2013-03-16T19:35:57.143
> 
> 标签：c#, .net, excel, fiddler, process.start

如果您知道，`OnBeforeResponse`那么您就知道我要做什么。

如何让它将 URL 粘贴到 excel 文件中，而不是在 chrome 或 Firefox 中打开每个 URL

从

```
 if(oSession.url.Contains(".mp3")){
            FiddlerApplication.Log.LogFormat("downloading "+oSession.url);
            System.Diagnostics.Process.Start("chrome.exe",oSession.url);
        } 
```

到目前为止我尝试了什么。

```
 if(oSession.url.Contains(".mp3")){
            FiddlerApplication.Log.LogFormat("downloading "+oSession.url);
            System.Diagnostics.Process.Start("excel.exe",oSession.url);
        } 
```

我也尝试使用`cmd.exe`将每个输出`oSession.url`到`>`somefile.txt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:23:03.717

> 我也在尝试 cmd.exe 将每个 oSession.url 输出到 > somefile.txt。

如果您只是想将 MP3 url 抓取到文件中以供以后使用，那么将它们输出到的想法`somefile.txt`似乎比尝试从 FiddlerScript 与 Excel 交互更简单。

添加以下行（到您的代码中），完成将最新的 MP3 url 附加到`somefile.txt`（注意：我将文本文件放在特定文件夹中）：

```
System.Diagnostics.Process.Start("cmd.exe", "/c echo " + oSession.url + " >> c:\\temp\\somefile.txt") 
```

该文件将在您单击时累积 MP3 url。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:09:16.860

可能您希望 [使用 fiddler 自动下载 mp3](http://improve.dk/using-fiddler-to-automatically-download-streamed-mp3s/)

# nosql - 沙发库中的动态查询？

> ID：15453803
> 
> 赞同：2
> 
> 时间：2013-03-16T19:35:58.507
> 
> 标签：nosql, couchbase

我开始使用couchbase，我非常喜欢它，但我找不到一件事，进行动态查询，

```
{
    "sender_name": "roman",
    "sender_id": 123,
    "content": "Hello World"
} 
```

现在我想查询“sender_id”=？的文档。

它可以是任何数字，带有 doc 和 meta 的常规视图无法帮助我，因为我不知道值，我应该期待任何 sender_id。

希望你能帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:09:29.963

好的，使用 Couchbase，您可以编写 Map&Reduce 函数，并创建视图。地图函数接受参数。我对编写 Map 函数不太熟悉，但是从 couchbase.com 我认为这个 map 函数可以完成你的工作。

```
 function(doc, meta) 
 {
    emit(doc.sender_id, [doc.content]);
 } 
```

您的查询将是 ?key=["123"]

浏览这些链接

1.  [http://hardlifeofapo.com/creating-an-e-commerce-platform-using-couchbase-2/](http://hardlifeofapo.com/creating-an-e-commerce-platform-using-couchbase-2/)
2.  [http://hardlifeofapo.com/basic-couchbase-querying-for-sql-people/](http://hardlifeofapo.com/basic-couchbase-querying-for-sql-people/)
3.  [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-sql-where.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-sql-where.html)

# sqlite - SQLITE 触发查询以使用非主键值进行搜索

> ID：15453808
> 
> 赞同：0
> 
> 时间：2013-03-16T19:36:45.247
> 
> 标签：sqlite

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID + " INTEGER PRIMARY KEY
    AUTOINCREMENT, KEY_PNAME + " TEXT NOT NULL, " + KEY_LOC + " TEXT NOT NULL, "
    + KEY_TH + " TEXT NOT NULL);" 
```

现在假设我必须提取`KEY_ROWID`特定值的值。`KEY_LOC`那么我应该在数据库上触发什么查询，因为在我的应用程序中，如果我有一个位置的`latitude` `longtitude(KEY_LOC)`. 我应该能够显示与该位置相关的其余数据。

# c++ - C ++：字段对象可以在不存储指针的情况下知道其“父级”吗？

> ID：15453809
> 
> 赞同：1
> 
> 时间：2013-03-16T19:36:50.553
> 
> 标签：c++, pointers, structure

假设我有这个设置：

```
struct XView;
struct X
{
  ...
  XView  view;
}; 
```

类型`XView`只用于这一字段；它也是内部的，因此禁止从外部实例化它，即禁止将其用于其他任何事情。

那么，假设*任何*类型的对象`XView`都是一个字段，是否有可能从 的地址中`X::view`找到地址，完全保持在 C++ 标准定义的行为范围内*并且没有类型双关语*？即是否有可能做这样的事情：`X``XView`

 *```
void XView::some_function ()
{
  X&  this_x = some_computations_involving (this);
} 
```

我当然可以存储一个指针，所以这将变得像 一样微不足道`x = *this->parent_x`，但如果可能的话，我想没有一个。

**编辑：请注意，我需要一个不涉及类型双关的答案，否则我宁愿使用“仅存储指针”解决方案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:41:23.320

第一种方法是制作`XView`的第一个成员`X`，然后你可以这样做：

```
void XView::some_function ()
{
   X & this_x = reinterpret_cast<X&>(*this);
} 
```

`XView`第二种方法是在不是第一个成员时使用偏移量`X`。

从技术上讲，如果不涉及虚拟性，这两种方法都是相同的，只是第一种方法是第二种方法的特殊情况（即当偏移量 = 0 时），第二种方法是一般情况。

至于编辑，我认为，没有演员是不可能的。您必须将指针存储在`XView`，或维护指针的映射（或其他一些数据结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:45:28.820

最重要的是您是否真的需要从子对象访问父对象，反之亦然。

我建议你使用某种双向链表或类似的东西。

您的代码可以重构为更加面向对象吗？（并且可能使用继承（并使用 super::some_function 调用父级......）*

# php - 查询 rank int 时返回排名

> ID：15453815
> 
> 赞同：0
> 
> 时间：2013-03-16T19:37:19.003
> 
> 标签：php, mysql, join

我试图通过同一数据库中`'us_army_ranks'`的成员字段从我的 mysql 数据库中的字段中获取排名名称。`'rank'`

到目前为止，我试图这样做。

```
SELECT 'members'.'rank', 'us_army_ranks'.'id' FROM members LEFT JOIN 'us_army_ranks' ON 'members'.'rank'='us_army_ranks'.'rank' 
```

我卡住了，不能真正让它工作。我`$id=$_GET['id'];`也在使用它会使它看起来像这样。

```
SELECT 'members'.'rank', 'us_army_ranks'.'id' FROM members WHERE id='$id' LEFT JOIN 'us_army_ranks' ON 'members'.'rank'='us_army_ranks'.'rank' 
```

我得到一个：

> “警告：mysql_fetch_array() 期望参数 1 是资源，第 13 行的 ranks.php 中给出的布尔值”返回但没有任何数据丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:40:53.887

您的问题是在表和字段名称周围使用单引号`'`而不是反引号。```

由于它们不是关键字（其中任何一个），因此您根本不需要在表和字段名称周围使用这些引号。

做：

```
SELECT members.rank, us_army_ranks.id 
FROM members 
LEFT JOIN us_army_ranks ON members.rank=us_army_ranks.rank
WHERE members.id='$id' 
```

因为您的查询是错误的，所以该`mysql_query`函数没有返回资源，而是返回一个布尔值`FALSE`，以通知您查询错误并且无法执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:41:18.570

尝试不使用单引号：

```
SELECT members.rank, us_army_rank.id
FROM members
LEFT JOIN us_army_ranks
ON members.rank = us_army_ranks.rank
WHERE id = $id 
```

# javascript - jQuery fadeIn 使页面滚动到顶部/跳转

> ID：15453820
> 
> 赞同：1
> 
> 时间：2013-03-16T19:37:41.277
> 
> 标签：javascript, jquery, css, html

本周 jQuery 毁了我。我在我的投资组合网站 ( [http://www.codeisdna.com](http://www.codeisdna.com) ) 上通过 jQuery 使用 fadeIn 来打开一个部分，一旦它被点击。这是我正在使用的 HTML 代码：

```
<div class="project first project_name">
    <div class="title">
        Project Title!
        <div class="date">2012</div>
    </div>
    <a class="expand" title="Click to expand the project." href="#project_1">Project Title!</a>
</div> 
```

打开一个选项卡：

```
<div id="project_1" class="project_full pname"></div> 
```

使用这个js：

```
 $(document).ready(function(){
        $(".project").click(function() {
            $("a.expand").removeClass("hovered");
            $(this).find("a.expand").addClass("hovered");
            $(".project_full").hide();
            var selected_tab = $(this).find("a").attr("href");
            $(selected_tab).fadeIn();
            return false;
        });
    }); 
```

**编辑**：这是 .project_full 的 CSS 代码（扩展选项卡 - .project 的 CSS 代码无关）：

```
.project_full {
    display: none;
    margin-top: 20px;
    width: 100%;
    max-height: 450px;
    padding: 20px 0px;
    text-align: center;
    background: url(../img/code.jpg) top center no-repeat fixed #293134;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    color: #fff;
    overflow: hidden;}
.project_full .wrapper {position: relative;} 
```

我尝试为父 div 分配固定高度，e.PreventDefault() 不起作用（我正在使用基于锚的选项卡，因此这种类型的任何方法都不起作用）等等。页面在第一次点击和每次连续点击时跳转。我知道一旦 div 被取消隐藏和“重新隐藏”，它就会因为缺少内容而跳跃。

我想知道 HTML5 数据属性是否可以解决这个问题？但是话又说回来，为什么它作为锚仍然存在，尽管它是空白的（#）。

希望有更多JS经验的人可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:48:22.550

更改您的处理程序添加[preventDefault](http://api.jquery.com/event.preventDefault/)

```
 $(".project").click(function(e) {
        e.preventDefault();
        $("a.expand").removeClass("hovered");
        $(this).find("a.expand").addClass("hovered");
        $(".project_full").hide();
        var selected_tab = $(this).find("a").attr("href");
        $(selected_tab).fadeIn();
        return false;
    }); 
```

或将您的`a`标签`href`属性更改为类似“javascript:”

或者用say span替换一个标签，让你的点击处理程序保持不变。

`<a name='project_1'></a>`或者在标签（

# c# - 在 C# 应用程序中运行 Java 窗口

> ID：15453826
> 
> 赞同：3
> 
> 时间：2013-03-16T19:38:16.597
> 
> 标签：c#, java, window

我一直在四处寻找是否有在 ac# 程序中运行 java 可执行文件，但我似乎无法解决或无法开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:41:46.273

如果您想将 Java 框架集成到 C# 程序中，请查看[IKVM](http://www.ikvm.net)，即：

> Mono 和 Microsoft .NET Framework 的 Java 实现。

否则，您可以以这种方式简单地调用打包到 jar 文件中的 java 应用程序：

```
 Process proc = new Process();  
        ProcessStartInfo startInfo = new ProcessStartInfo();  
        startInfo.Arguments = @"-jar javaapp.jar";  
        startInfo.FileName = "java";  
        proc.StartInfo = startInfo;  
        proc.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:42:19.993

我猜你可以使用[IKVM](http://www.ikvm.net/)，它提供了你的确切要求。

# bash - Bash 和 curl，让自定义参数正常工作

> ID：15453833
> 
> 赞同：1
> 
> 时间：2013-03-16T19:38:42.080
> 
> 标签：bash, curl

我正在尝试制作一个非常小的脚本，但我遇到了一个问题，我想调用一个简单的 bash 脚本，传递一个 IP 地址，如下所示：

./bashScript 192.111.211.211

脚本如下所示：

```
#!/bin/bash
curl https://www.xxx.com/api_json.html \
  -d 'a=ban' \
  -d 'tkn=xxxxxx' \
  -d 'email=xxx@gmail.com' \
  -d 'key=$1' \ 
```

但它不起作用，$1 参数没有发送，我从网络服务收到错误。

我做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:40:21.197

使用双引号：

```
-d "key=$1" 
```

单引号防止变量扩展：

```
~$ foo=bar
~$ echo '$foo'
$foo
~$ echo "$foo"
bar 
```

# c# - C# 调用 C++-CLI dll - 不确定函数参数是否正确

> ID：15453839
> 
> 赞同：1
> 
> 时间：2013-03-16T19:39:42.570
> 
> 标签：c#, c++-cli

在 c# 世界中，我想将对 List 对象的引用传递给 c++-CLI dll。c++-cli dll 的命名空间是 MatsWrapper。联系人是一个托管对象。

```
 List<Contact> contactList = new List<Contact>();
        String str = "C:\\DATA20110524064.h5";
        MatsWrapper.Class1 cl = new MatsWrapper.Class1();
        cl.CallMats(str, ref contactList); 
```

我的 c++-cli dll 函数是否具有正确的签名？

```
int MatsWrapper::Class1::CallMats(String^ file_path, std::list<Contact>^ contactList)
{

} 
```

我无法自己测试它，因为我不知道如何在 c++-cli 中访问 Contact 对象。但是当我知道如何访问它时，我的签名会同意 C# 调用 CallMats 的方式吗？谢谢，某人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:57:29.707

您的 C++/CLI 函数需要采用 List < Contact > ^，而不是 STL 列表。但是你的编译器应该已经指出了这一点。使用 C++/CLI，您的接口函数应该只包含托管类型。毕竟，这就是 C++/CLI 与托管代码交互的意义所在。

# python - 在 Django 的多对多关系中，是否有一种优雅的方式来建模和表示一对多？

> ID：15453840
> 
> 赞同：3
> 
> 时间：2013-03-16T19:39:44.407
> 
> 标签：python, django, grouping, django-queryset

我有点受阻，它似乎不是很复杂。这是我的模型：

```
class Team(models.Model):
    name = models.CharField('team name', max_length=200, unique=True)

class QualityStream(models.Model):
    name = models.CharField('quality stream name', max_length=200, unique=True)
    team = models.ManyToManyField(Team)

class Milestone(models.Model):
    name = models.CharField('milestone name', max_length=200)
    quality_stream = models.ForeignKey(QualityStream)
    team = models.ForeignKey(Team) 
```

如您所见，一个团队可以有几个预定义的质量流，以及确实属于一个质量流的几个要实现的里程碑。

这是我的看法：

```
<p>{{team.name}}</p>

{% for stream in team.qualitystream_set.all %}
    <p>{{stream.name}}</p>
    {% for milestone in team.milestone_set.all %}

        {% if milestone.quality_stream.id == stream.id  %}
           <p>{{milestone.name}}</p>               
        {% endif %}

    {% endfor %}    
{% endfor %} 
```

这个想法是显示团队、与团队相关的质量流以及按质量流分组的每个里程碑：

```
Team

  Quality Stream 1
     Milestone 1 for Quality Stream 1
     Milestone 2 for Quality Stream 1
  Quality Stream 2
     Milestone 1 for Quality Stream 2
     Milestone 2 for Quality Stream 2 
```

代码运行良好，但循环每个质量流的所有里程碑让我感觉不太舒服。我想一定有更好的方法来实现这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:35:17.640

您正在做的事情没有任何问题，但是通过在视图中执行查询可能会有一些数据库优化，特别是使用 select_related()：

[https://docs.djangoproject.com/en/1.5/topics/db/optimization/#retrieve-everything-at-once-if-you-know-you-will-need-it](https://docs.djangoproject.com/en/1.5/topics/db/optimization/#retrieve-everything-at-once-if-you-know-you-will-need-it)

此外，如果您的模型有一堆字段但您只需要一些字段，您可以使用 only() 或 defer()。我已经看到使用 defer 来避免大字段的显着性能提升。only() 是 defer() 的逆：

[https://docs.djangoproject.com/en/1.5/ref/models/querysets/#defer](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#defer)

您的模型似乎不太复杂，所以我认为仅使用 select_related() 对您有用。我强烈建议使用[Django 调试工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)来做出优化决策。调试工具栏将向您显示实际的选择语句以及每个语句所花费的时间。在花太多时间优化之前知道是否真的存在问题是很好的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T00:15:06.387

每当您认为必须像以前那样执行多个下降循环时，请考虑是否可以从另一端解决问题。

正如@Pathetique 指出的那样，以下链接显示了如何最小化您正在执行的查询数量：

[https://docs.djangoproject.com/en/1.5/topics/db/optimization/#retrieve-everything-at-once-if-you-know-you-will-need-it](https://docs.djangoproject.com/en/1.5/topics/db/optimization/#retrieve-everything-at-once-if-you-know-you-will-need-it)

该链接中的亮点是`select_related`仅适用于`ForeignKeys`，并且`prefetch_related`仅适用于`ManyToManyFields`。

由于您是从“我有一组团队，现在我想显示与这些团队相关的所有数据”的角度来解决这个问题的，因此您无法使用任何可用的优化，因为`Team`没有`ForeignKeys`或`ManyToManyFields`.

相反，您可以像这样处理问题：“我想显示所有里程碑，按团队分组，然后按质量流分组”。由于您的 Milestone 类可以访问您需要的所有数据，因此它使查询集非常容易构建，只生成一个查询。

```
def my_view(request):
    queryset = Milestone.objects.select_related(
        'team', 'quality_stream'
    ).order_by(
        'team__name', 'quality_stream__name'
    ) # a single query to fetch all teams + streams + milestones

    return render_to_response('/your/template.html', 
        { 'milestones':queryset },
        context_instance=RequestContext(request)
    ) 
```

现在，您的模板将打破您构建它的方式。这就是我之前提到的问题的定义所在。您拥有所有里程碑，但您希望按团队对它们进行分组，然后按质量流进行分组。查询集的排序现在对我们有帮助，因为我们可以遍历所有里程碑，并检查我们是否适合新团队或新质量流。

```
# your template
{% for milestone in milestones %}
    {% ifchanged %} <p> {{ milestone.team.name }} </p> {% endifchanged %}
    {% ifchanged %} <p> {{ milestone.quality_stream.name }} </p> {% endifchanged %}
    <p> {{ milestone.name }} </p>
{% endfor %} 
```

上面的模板使用了[ifchanged](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#ifchanged)模板标签，它似乎就是为此目的而设计的。

# c# - 我想根据组合框选择获取或设置数据到 DataGridView 的每个单元格

> ID：15453841
> 
> 赞同：0
> 
> 时间：2013-03-16T19:39:47.287
> 
> 标签：c#, sql-server-2008

请找到我的代码，我需要知道组合框选择和datagridview之间的关系。基本上，如果我设置我的区域选择，则只显示与区域相关的那些，而不是我现在得到的整个数据库。谢谢。

```
 private void RTUModification_Load(object sender, EventArgs e) {
        //Select cell where checkbox to be display
        Rectangle rect = this.rtumodDGV1.GetCellDisplayRectangle(0, -1, true);   
        chkbox.Size = new Size(18, 18);

        //set position of header checkbox where to places
        rect.Offset(4, 2);
        chkbox.Location = rect.Location;

        chkbox.CheckedChanged += rtucheckBoxCheckChanged;

        //Add CheckBox control to datagridView
        this.rtumodDGV1.Controls.Add(chkbox);

        // Create new DataTable instance
        dtDataTable = new System.Data.DataTable();
        if (null == dtDataTable)
        {
            MessageBox.Show("Insufficient memory.", "ERROR");
        }
        //load the datable and fill them with value
        strErrorMsg = Utilities.OpenSQLConnection(out m_SqlConn, true, false);   //load normal database
        if (false == string.IsNullOrEmpty(strErrorMsg))
        {
            MessageBox.Show(strErrorMsg, "SQL connection ERROR");
        }

        SqlDataAdapter sqlAdapter = null;
        strSelectCmd = "SELECT Area_ID, StationId, SystemId, CCNumber, LineNumber, RTUNumber, SRTUNumber, Description, SDescription FROM RTU_ADDRESS";
        SqlCommand sqlCmd = new SqlCommand();
        sqlCmd.Connection = m_SqlConn;
        sqlCmd.CommandText = strSelectCmd;
        sqlAdapter = new SqlDataAdapter();
        sqlAdapter.SelectCommand = sqlCmd;
        strErrorMsg = Utilities.FillDataTable(m_SqlConn, strSelectCmd, dtDataTable);
        if (string.IsNullOrEmpty(strErrorMsg) == false)
        {
            MessageBox.Show("Failed to retrieve information from database.", "ERROR");
            dtDataTable.Dispose();
            Utilities.CloseAndDisposeSQLConnection(m_SqlConn);
        }
        int iRetrievedNoOfRecords = dtDataTable.Rows.Count;
        if (iRetrievedNoOfRecords > 0)
        {

            for (int i = 0; i < iRetrievedNoOfRecords; i++)
                this.rtumodcomboBox.Items.Add((string)dtDataTable.Rows[i]["Area_ID"]);
        }
        strErrorMsg = Utilities.ExecuteSQLCommand(m_SqlConn, strSelectCmd);
        if (string.IsNullOrEmpty(strErrorMsg) == false)
        {
            MessageBox.Show(this, "Error!Loading into RTU datagrid");
        }

        //load the datagridview header
        rtumodDGV1.DataSource = dtDataTable;         
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:13:05.380

这是您可能需要的示例代码。

```
 strSelectCmd = "SELECT Area_ID, StationId, SystemId, CCNumber, LineNumber, RTUNumber, SRTUNumber, Description, SDescription FROM RTU_ADDRESS where Area_ID="+cbxMyCombox.SelectedIndex; 
```

其他选项 其他 SelectedIndex 可以是 SelectedItem 或 SelectedValue 。取决于你使用的是什么。目前还不清楚。

# java - 将两张图片混合在一起java

> ID：15453842
> 
> 赞同：-2
> 
> 时间：2013-03-16T19:39:48.843
> 
> 标签：java, image, image-processing

所以我基本上试图通过取每个像素的加权平均值来将两张图片混合在一起。但是，为了应用转换，两张图片的大小必须完全相同。如果不是，则第一张图片保持不变。

[http://www.seas.upenn.edu/~cis120/current/hw/hw07/javadoc/Manipulate.html#alphaBlend(double,%20NewPic,%20NewPic)](http://www.seas.upenn.edu/~cis120/current/hw/hw07/javadoc/Manipulate.html#alphaBlend(double,%20NewPic,%20NewPic))

这基本上是我必须做的，但我需要澄清一下。我不明白我与颜色有什么关系

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:47:44.027

首先，由于这是公然的家庭作业，您可能应该检查您是否被允许从 Internet 获取代码。如果不是，你应该小心你从你得到的答案中得到什么，少你被指控抄袭和/或作弊。

但是，假设这很好，您将希望将每个 NewPic 解释为位图。然后将每个位图中的每个 Pixel 与第二个位图中的相应 Pixel 进行比较。查看每种颜色的平均值并使用它们在第三个位图中创建一个像素。在第三个位图中创建每个像素后，将其返回。

# ios - iOS 表导航控制器不工作

> ID：15453844
> 
> 赞同：-3
> 
> 时间：2013-03-16T19:40:02.873
> 
> 标签：ios, uitableview

我有一张桌子：

```
- (void)viewWillAppear:(BOOL)animated
{

self.searchBar.delegate=self;
self.searchResultTable.delegate=self;
self.searchResultTable.dataSource=self;
[self.searchResultTable setHidden:YES];

} 
```

在我的单元格中插入文本，当我单击单元格时，我需要转到另一个表格，但这不起作用：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

TableViewController *tvc=[[TableViewController alloc]initWithStyle:UITableViewStyleGrouped];
[self.navigationController pushViewController:tvc animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:49:19.097

假设你正在做这样的事情来呈现这个控制器：

```
SearchViewController *searchViewController = [SearchViewController alloc] init];
[self presentModalViewController:searchViewController animated:YES]; 
```

那么你的视图控制器没有导航控制器

您需要将其更改为

```
SearchViewController *searchViewController = [SearchViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:searchViewController];
[self presentModalViewController:navController animated:YES]; 
```

然后`[self.navigationController pushViewController:tvc animated:YES];`会工作

# javascript - 在执行内联 javascript 时，Web 浏览器是否保持 Web 服务器连接？

> ID：15453847
> 
> 赞同：1
> 
> 时间：2013-03-16T19:40:31.983
> 
> 标签：javascript, performance, http

例如，如果我编写了以下代码，其中包含指向第 3 方 javascript 的链接，而加载需要 1 秒：

```
<!DOCTYPE>
<html>
<head>

</head>
<body>

  // note no async attribute!
  <script src="//thirdparty.com/some/slow/loading/script.js">
  </script>

</body>
</html> 
```

到我的 Web 服务器的 http 连接是否会一直保持打开状态，直到文档结束？

更新：我不是在 Connection: Keep-alive 的上下文中谈论，这显然会在页面加载后保留连接。我指的是浏览器在执行内联javascript时可能尚未从服务器完全读取文档的内容，因此它是否仍会保留其连接以继续读取文件的其余部分，或者这是否已被读取但尚未添加到 DOM 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:06:09.993

不，在文档完全解析之前，连接不会保持打开状态。

文档将在解析时继续加载，并且在请求、加载、解析和执行外部脚本时继续加载。浏览器不会仅仅因为它现在不需要更多数据来解析，或者因为它正在加载其他东西而暂停阅读文档。它仍将继续在后台加载文档。

打开连接是比内存更昂贵的资源，因此浏览器最好尽快将所有数据读入内存，而不是在需要数据时保持打开连接以从中读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:45:33.087

浏览器将首先开始加载您的文档。一旦它解析了`<script>`标签，它就会连接到第三方服务器并开始从那里加载 JS。主页加载完成后，与您的服务器的连接将关闭。然而，只要有东西（例如 JS）正在加载，浏览器就会显示加载图标，并且它也会`window.onload`在所有内容加载后调用。

# queue - 使用 Alloy 实现队列的入队和出队

> ID：15453849
> 
> 赞同：0
> 
> 时间：2013-03-16T19:40:43.113
> 
> 标签：queue, alloy

具有以下内容：

```
sig Queue { root: Node }
sig Node { next: lone Node }
fact nextNotReflexive { no n:Node | n = n.next }
fact nextNotCyclic { no n:Node | n in n.^next } 
```

任何人都可以帮助实施 Enq 和 Deq 吗？

```
pred Enq[q,q':Queue, n:Node]{}
pred Deq [q,q':Queue]{} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T15:40:07.967

您可以轻松定义入队：

```
pred Enq[q, q': Queue, n: Node] {
  q'.root = n and n.next = q.root
} 
```

但是出队并不那么容易。问题是您需要修改节点，而不是队列，以便对元素出列所需的最后一个节点进行更改。您实际上需要用“next”字段为空的不同节点替换队列中的倒数第二个节点 - 但由于您使用原子标识来表示节点唯一性，因此该节点实际上将是一个不同的节点。

# java - 将 JSON 映射到 Java 中的数组/对象 - Android

> ID：15453851
> 
> 赞同：3
> 
> 时间：2013-03-16T19:40:43.893
> 
> 标签：java, android, json

我有一个 Web 系统，它返回一个 json 字符串，其中包含我在 Android 应用程序中需要的数据。字符串如下：

```
[
    {"id":1,
    "title":"Remove ViRuSeS",
    "tagline":"Remove ViRuSeS",
    "body":"Body",
    "image":"index.jpg",
    "steps":[
            {"id":2,
            "title":"Step 1",
            "body":"Download Things!",
            "position":1}
            ]
    }
] 
```

它应该返回一个对象数组，其中一个对象的项也是一个项数组。

我对 gson 很熟悉，并且过去也做过这项工作，但我总是不得不将我的数据简化为一个对象，这使我最终不得不多次调用来获取数据。

有没有一种好方法可以做到这一点，而不必将所有可能的值映射回类？

我的最后一次尝试是尝试从中得到一些简单的东西，并`NullPointerException`在其中的第二行中得到一个：

```
userDet = new JSONObject(string);
JSONArray userDetJson = userDet.getJSONArray("Steps"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T19:42:23.340

将其更改为**"steps"**而不是**"Steps"**，它将修复它：

```
userDet = new JSONObject(string);
JSONArray userDetJson = userDet.getJSONArray("steps"); 
```

**完整的解析方法：**

```
JSONArray mainArray = new JSONArray(json);
for (int i = 0 ; i < mainArray.length() ; i ++)
{
    JSONObject currentItem = array.getJSONObject(i);
    String title = currentItem.getString("title");
    String body = currentItem.getString("body ");
    ....
    JSONArray currentItemStepsArray = currentItem.getJSONArray("steps"); 
    for (int j = 0 ; j < currentItemStepsArray.length() ; j ++)
    {
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:45:13.523

在这里，试试这个：

```
JSONArray topLevelArr = new JSONArray(json);
JSONArray stepArr = topLevelArr.getJSONObject(0).getJSONArray("steps"); 
```

# javascript - SharePoint 2013 应用程序：未定义“对象”（IFrame / IE9）

> ID：15453856
> 
> 赞同：0
> 
> 时间：2013-03-16T19:40:57.443
> 
> 标签：javascript, iframe, internet-explorer-9, sharepoint-2013

在为 SharePoint 2013 开发（SharePoint 托管）应用程序部件时，我不断收到错误消息“未定义对象”。在其他情况下（取决于我正在加载的外部 .js 文件），我可能会收到“功能”未定义错误。更具体地说：当我将应用程序部件添加到（wiki）页面时，我只会收到此错误。该页面以标准模式在 IE9 中加载（但错误也发生在 Compat View 中）。

我在 Microsoft 找到了以下信息：如果从 DOM 树中删除 iFrame，则 API 不可用 => [http://msdn.microsoft.com/en-us/library/gg622929(v=VS.85).aspx?ppud= 4](http://msdn.microsoft.com/en-us/library/gg622929(v=VS.85).aspx?ppud=4)

我已经在我尝试加载的 HTML 页面的头部添加了一个简单的警报作为应用程序部件的源（实际上是一个简单的 IFrame 对象），并且确实在添加应用程序部件时页面被加载了多次. 添加应用程序部件后，警报只会触发一次，我不会遇到任何“对象”未定义的错误。所以我怀疑我的 App Part 是先创建然后多次操作（从 DOM 连接和分离）。

似乎我的 App Part，因为它暂时从 DOM 中删除，所以删除了 JavaScript API！如果是这样的话，那么我该如何开发依赖 JavaScript 的 App Parts（他们不应该首先不依赖 JavaScript 吗？！）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:17:24.733

如果我重新加载页面直到 JavaScript API 再次可用，我可以“抑制”这种行为（这似乎是在上次分离和附加 IFrame 之后）。因此，我只是将以下脚本作为页面头部的第一条语句：

```
<script type="text/javascript">
    // Work-around for IE9 (http://msdn.microsoft.com/en-us/library/gg622929(v=VS.85).aspx?ppud=4)
    if (typeof Object == 'undefined' || typeof Function == 'undefined') {
        window.location.reload();
    }
</script> 
```

尽管如此，这种“先发制人”的垃圾收集对我来说似乎是一个错误而不是一个功能！

# java - 带 TreeMultimap 的吊顶（）

> ID：15453857
> 
> 赞同：0
> 
> 时间：2013-03-16T19:41:06.193
> 
> 标签：java, guava, binary-search-tree, treemap

*   是否有可能从谷歌的番石榴扩展 TreeMultimap 以获得一些奇怪的`ceiling`功能？`ceiling(key)`将返回大于给定键的最小键。（我知道我可以得到一个有序的集合视图并只看，但我更喜欢时间复杂度更高的东西，比如平衡的二叉搜索树提供）
*   是否有任何其他库可以实现平衡的二叉搜索树并允许这样做？
*   TreeMultimap常用操作的复杂度是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:47:03.557

```
multimap.keySet().ceiling(key) 
```

它非常直接，但是您需要 Java 6 和最新的 Guava 版本 14.0，即`TreeMultimap.keySet()` [开始返回`NavigableSet`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/TreeMultimap.html#keySet%28%29). 复杂度为 O(log #keys)，正如您所期望的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:45:13.330

```
K ceiling(K key, TreeMultimap<K,V> map) {
  SortedSet<K> keyset = map.keySet();
  SortedSet<K> head = keyset.headSet(key);
  return headSet.isEmpty() ? null : head.last();    
} 
```

该文档没有提及操作的任何时间保证，但我希望它以对数时间运行，因为两者`keySet`似乎`headSet`都返回基础数据的视图，而不是自己构建新集合。

# java - 修复 Java 中的空指针异常

> ID：15453863
> 
> 赞同：0
> 
> 时间：2013-03-16T19:41:35.967
> 
> 标签：java, nullpointerexception, multidimensional-array

我有一个二维数组从另一种方法写入文件。我在我的视线方法中定义了二维数组的内容，但是当它传递到保存方法时，内容（至少在块 [1] [1] 中）变为空。如何确保价值保持定义？到目前为止我的代码：

（目击法）

```
public void Sighting()
{
    Scanner input = new Scanner (System.in);
    String MigChoice; //initiates Migrant Choice variable to be stored
    String Trail; //initiates Trail to be stored
    String NumberSeen; //initiates number to be stored
    String Species; //initiates species to be stored
    String Date; //initiates date to be stored
    String[][] EntryList;
    EntryList = new String [500][5];
    System.out.print("What species of bird was observed?\n");
    Species = input.nextLine();
    System.out.print("What trail did this spotting take place on?\nDirectory:\n");
    System.out.println("1). Alligator Alley");
    System.out.println("2). Eagle Roost");
    System.out.println("3). Heron Hideout");
    System.out.println("4). Lost Bridge Trail");
    System.out.println("5). Marsh Rabbit Run");
    System.out.println("6). Otter");
    System.out.println("7). Shady Oak");
    System.out.println("8). Wading Bird Way");
    System.out.println("9). Windmill Whisper");
    Trail = input.nextLine();
    System.out.println("The species is:\n1.)Migrant\n2.)Residential");
    System.out.print("Please enter Migrant or Residential: ");
    MigChoice = input.next();
    System.out.print("What was the time of this sighting (in mm/dd/yyyy format)?\n");
    Date = input.next();
    System.out.print("Finally, how many birds were observed?\n");
    NumberSeen = input.next();
    EntryList [0][0] = Species;
    EntryList [0][1] = Trail;
    EntryList [0][2] = MigChoice;
    EntryList [0][3] = Date;
    EntryList [0][4] = NumberSeen;
    Save(EntryList);
    System.out.print("Thank you for adding an entry!");
    System.out.println("Returning to main menu");
    Menu();
 } 
```

（保存方法）

```
 public void Save(String[][] EntryList) {
    try {
        String[][] content = EntryList;
        File file = new File("CBB.dat");

        // if file doesnt exists, then create it
        if (!file.exists()) {
            file.createNewFile();
        }
        if (EntryList[0][0] != null) {
            DataInputStream instream;
            DataOutputStream outstream;
            instream = new DataInputStream(new BufferedInputStream(
                    new FileInputStream(file))); // buffers the data stream
            outstream = new DataOutputStream(new BufferedOutputStream(
                    new FileOutputStream(file)));
            FileWriter fw = new FileWriter("CBB.dat", true);
            BufferedWriter writer = new BufferedWriter(fw);
            for (int row = 0; row < EntryList.length; row++) {
                outstream.writeUTF(EntryList[row][0]);

                outstream.writeUTF(EntryList[row][1]);

                outstream.writeUTF(EntryList[row][2]);

                outstream.writeUTF(EntryList[row][3]);

                outstream.writeUTF(EntryList[row][4]);
            }
            outstream.close();
        } else
            System.out.print("Something is wrong");
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

错误信息：

```
java.lang.NullPointerException
at java.io.DataOutputStream.writeUTF(DataOutputStream.java:330)
at java.io.DataOutputStream.writeUTF(DataOutputStream.java:306)
at Dossier.Save(Dossier.java:158)
at Dossier.Sighting(Dossier.java:133) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:55:08.257

如果您将空对象作为参数传递，则会抛出[writeUTF 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/DataOutput.html#writeUTF%28java.lang.String%29)`NullPointerException`

> 将两个字节的长度信息写入输出流，然后是字符串 s 中每个字符的修改后的 UTF-8 表示。如果 s 为 null，则抛出 NullPointerException。根据字符的值，字符串 s 中的每个字符都转换为一组一个、两个或三个字节。

如果您的循环，您可以添加空检查：

```
 for (int row = 0; row < EntryList.length; row++)
  {
          for(int col = 0; col < EntryList[row].length;col++) {
               if(EntryList[row][col] != null)
                  outstream.writeUTF(EntryList[row][col]); 
          } 
  } 
```

# c# - 将嵌套的 For 循环转换为 LINQ 表达式

> ID：15453866
> 
> 赞同：3
> 
> 时间：2013-03-16T19:41:40.920
> 
> 标签：c#, linq, for-loop

请考虑以下代码：

```
 private ISet<int> CalcSumsOfTwoNums(IEnumerable<int> nums) {
        ISet<int> iset = new HashSet<int>();
        var asArray = nums.ToArray();

        for (var i = 0; i < asArray.Length - 2; i++) {
            for (var j = i; j < asArray.Length - 1; j++) {
                var sum = asArray[i] + asArray[j];
                if (sum <= MAX) {
                    iset.Add(sum);
                }
            }
        }

        return iset;
    } 
```

`for`将嵌套循环语法转换为 LINQ 表达式或 LINQ 点表示法是否有意义？这是`for`循环语法更合适的情况之一吗？我倾向于说`for`这里的循环更好，因为我依赖于数组的索引位置，因为我正在遍历它以获取结果集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:02:11.027

```
private static ISet<int> CalcSumsOfTwoNums2(IEnumerable<int> nums)
{
    // get List<int> from nums to get info about collection length
    var source = nums.ToList();

    // proper iteration
    var data = source.Take(source.Count - 1)
                     .SelectMany((e, ix) => source.Skip(ix)
                                                  .Take(source.Count - 1 - ix)
                                                  .Select(i => new { e, i }))
                     .Select(x => x.e + x.i)
                     .Where(x => x < MAX);

    // return HashSet instead of IEnumerable<int>
    return new HashSet<int>(data);
} 
```

它返回与您的方法相同的结果。但是，我会继续使用您当前的解决方案。它会比 LINQ 有更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:51:42.440

你可以试试下面的Linq：

```
var asArray = nums.ToArray();
var result = (from n1 in asArray.Take(asArray.Length - 2)
              from n2 in asArray.Take(asArray.Length - 1)
              where n1 + n2 <= MAX
              select n1 + n2);

iset = new HashSet<int>(result); 
```

它具有与您的代码段相同的输出。

# c++ - 在 void 函数中返回结构指针

> ID：15453868
> 
> 赞同：-4
> 
> 时间：2013-03-16T19:41:47.020
> 
> 标签：c++, pointers, struct, return-value, void-pointers

我是新的 C++ 编程，刚开始使用结构和指针，我有一个疑问。

我有一个结构和无效函数（）

```
struct my_struct 
{
int x;
}

void my_function(){

my_struct* x=10

} 
```

我需要将 my_struct* x 的值返回给调用函数。

我看到的大多数返回结构指针的示例都没有使用 void function() 而是像这样使用

```
struct my_struct 
    {
    int x;
    }

    struct my_struct* my_function( int* x){

    //assign the value for X and return by assign a reference `&` from caller function

    } 
```

那么不可能从 void 函数返回结构指针，还是我需要使用 void 指针？请多多包涵并帮助我，我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:49:42.380

首先：

```
void my_function() {
    my_struct* x=10
} 
```

是非法的。我认为您没有完全理解指针的含义。要返回一个值，您必须：

*   要么设置一个返回值`my_struct* my_function()`
*   或定义哪个外部变量应存储返回值：`my_struct* my_function(my_struct**);`.

以下是一些使用动态分配的示例：

```
my_struct* my_function() {
    return new my_struct { 10 };
} 
```

或者：

```
void my_function(my_struct** var) {
    *var = new my_struct { 10 };
} 
```

如果有意义，最好尽可能使用返回值。当您需要来自单个函数的多个返回值时，您可以使用第二种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:45:09.220

要在不使用返回类型的情况下向调用者报告值，您可以填写调用者提供的缓冲区。这通常称为“输出参数”。

```
void my_function( my_struct** result )
{
   my_struct* x = new my_struct{ 10 };
   //...
   *result = x;
} 
```

# php - 我的 css.php 文件被浏览器忽略

> ID：15453872
> 
> 赞同：1
> 
> 时间：2013-03-16T19:42:18.767
> 
> 标签：php, css, magento

我有这个文件：

```
<link src="http://mysite.com/theme/skin/frontend/default/beckin/css/options.css.php" rel="stylesheet" type="text/css"> 
```

这显示在源代码中。此外，当我单击源代码中的链接时，它会按原样显示 css。但是，浏览器没有使用这个文件，它也没有出现在 Firefox 检查器中。

我该怎么做才能让浏览器使用这个 css 文件？

顺便说一句：这是一个自定义扩展，允许您更改主题颜色。同样，该文件工作正常，但浏览器忽略它？？

谢谢！

我在这里发布了这个 b/c 我认为一个好的 php 和 css 专家可能知道这个问题的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T19:44:09.537

它不是“src”，而是“href”。

```
 <link href="http://mysite.com/theme/skin/frontend/default/beckin/css/options.css.php"  rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T19:45:30.090

这是一个非常常见的错误:) 您应该使用“href”属性而不是“src”来指定文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:49:09.933

确保脚本发送有效的 Content-Type HTTP 标头：

```
header("Content-Type: text/css"); 
```

# java - 初学者 Java（循环）- 自动售货机

> ID：15453877
> 
> 赞同：0
> 
> 时间：2013-03-16T19:43:19.333
> 
> 标签：java, if-statement, command-line, while-loop, infinite-loop

```
import java.util.Scanner;

public class cat{

    public static void main(String args[]){

       System.out.print("Enter a command = ");

       double balance = 0;
       String a;

       //scanner input
       Scanner in = new Scanner(System.in);
       String command = in.nextLine();

       while (in.hasNext()){

            if (command.equals("penny")){
                balance = balance + 0.01;   
                System.out.println("balance = " + balance); 
            }

            if (command.equals("nickel")){
                balance = balance + 0.05;
                System.out.println("balance = " + balance); 
            }
            else {
                System.out.println("return" + balance + "to customer"); 
                break;
            }

            balance++; 
       }

    }

} 
```

我正在尝试创建一个无限循环，不断读取自动售货机的新命令，它可能仅在特定条件下停止 - 当输入为时`"return"`，它会在字符串中打印当前余额`"return $XX to customer"`。（否则它会不断在当前余额中添加/减去现金）。

首先，我似乎无法将 if 和 else 部分集成在一起，因为两个字符串命令 ( `"return ~ to customer "& "balance ="`) 在我编写`'penny'`. 第二个问题是我预期的无限命令循环只是在我的终端中变成了无限数字流，我似乎无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:08:31.060

不知道这是否是您要搜索的内容，但是这个循环直到您发送`break`命令：

```
import java.util.Scanner;

public class cat {

 public static void main(String args[]) {

    System.out.print("Enter a command = ");

    double balance = 0;
    String a;
    // scanner input
    Scanner in = new Scanner(System.in);

    while (in.hasNext()) {
                    String command = in.nextLine();
        if (command.equals("penny")) {
            balance = balance + 0.01;
            System.out.println("balance = " + balance);
        } else if (command.equals("nickel")) {
            balance = balance + 0.05;
            System.out.println("balance = " + balance);
        } else if (command.equals("break")) {
            break;
        } else {
            System.out.println("return " + balance + " to customer");
        }

        balance++;
    }

 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:58:14.580

要修复您损坏的“如果”，请添加另一个：

```
 else if (command.equals("nickel")){ 
```

使用 java7，您可以使用 switch：

```
switch(command) {
    case "nickel":
        ....
        break;
    case "penny":
        .....
        break;
    default:
       .....; 
} 
```

# java - 在java中将文件上传到亚马逊s3时出现空指针异常

> ID：15453878
> 
> 赞同：-2
> 
> 时间：2013-03-16T19:43:29.627
> 
> 标签：java, amazon-s3

当我从 FileXfer 类（从主要或其他地方）调用函数 fileUpload 时，它工作正常。但是，当我从外部调用此函数时，它会在 upload=tx.upload(request) 以及调用该函数的任何位置给我一个空指针异常。请建议我解决这个问题的方法。我尝试在这个函数中使用 tx 定义，但它给出了一些其他错误。

```
import java.awt.BorderLayout;

import java.io.File;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;

import com.amazonaws.AmazonClientException;
import com.amazonaws.AmazonServiceException;
  import com.amazonaws.auth.AWSCredentials;
 import com.amazonaws.auth.PropertiesCredentials;
 import com.amazonaws.services.s3.model.GetObjectRequest;
   import com.amazonaws.services.s3.model.ProgressEvent;
     import com.amazonaws.services.s3.model.ProgressListener;
   import com.amazonaws.services.s3.model.PutObjectRequest;
import com.amazonaws.services.s3.transfer.TransferManager;
import com.amazonaws.services.s3.transfer.Upload;
 import com.amazonaws.services.s3.transfer.Download;

public class FileXfer {

private static AWSCredentials credentials;
private static TransferManager tx;
private static String bucket;
private static String key;

private JProgressBar pb;
private JFrame frame;
private Upload upload;
private Download download;

public static void main(String[] args) throws Exception {
credentials = new PropertiesCredentials(FileXfer.class.getResourceAsStream("AwsCredentials.properties"));

    //transfer manager
 tx = new TransferManager(credentials);

 FileXfer upld = new FileXfer();

 // for testing
    //upld.createAmazonS3Bucket("aabrak12ujjia");
 upld.FileUpload("riti","D:/DM1/ec2trp.pem");
// upld.FileDownload("riti","ec2trp.pem","D:/DM1/"); 

  }

//for file download  
public void FileDownload( String Bname,String getkey, String destination) throws Exception {

    try{
        bucket=Bname; // bucket name

    key=getkey;  // file name to be downloaded

    frame = new JFrame("Saving a File");
    ProgressBar();
    ProgressTrackDownload progress = new ProgressTrackDownload();

    File fileToSave = new File(destination+key);

    GetObjectRequest request1 = new GetObjectRequest(bucket,key)
    .withProgressListener(progress.progressListener);
    download = tx.download(request1,fileToSave);

    System.out.println("Save as file: " + fileToSave.getAbsolutePath());

}catch (AmazonServiceException ase) {
    System.out.println("Caught an AmazonServiceException, which means your request made it "
            + "to Amazon S3, but was rejected with an error response for some reason.");
    System.out.println("Error Message:    " + ase.getMessage());
    System.out.println("HTTP Status Code: " + ase.getStatusCode());
    System.out.println("AWS Error Code:   " + ase.getErrorCode());
    System.out.println("Error Type:       " + ase.getErrorType());
    System.out.println("Request ID:       " + ase.getRequestId());
} catch (AmazonClientException ace) {
    System.out.println("Caught an AmazonClientException, which means the client encountered "
            + "a serious internal problem while trying to communicate with S3, "
            + "such as not being able to access the network.");
    System.out.println("Error Message: " + ace.getMessage());
 }
}

 // for file upload
public void FileUpload(String bucket, String source) throws Exception {

    try{
         frame = new JFrame("Amazon S3 File Upload");

    File fileToUpload= new File(source);

    ProgressBar();
    ProgressTrackUpload pro = new ProgressTrackUpload(); 

    PutObjectRequest request = new PutObjectRequest(
            bucket, fileToUpload.getName(), fileToUpload).withProgressListener(pro.progressListener);

    upload = tx.upload(request);

}catch (AmazonServiceException ase) {
    System.out.println("Caught an AmazonServiceException, which means your request made it "
            + "to Amazon S3, but was rejected with an error response for some reason.");
    System.out.println("Error Message:    " + ase.getMessage());
    System.out.println("HTTP Status Code: " + ase.getStatusCode());
    System.out.println("AWS Error Code:   " + ase.getErrorCode());
    System.out.println("Error Type:       " + ase.getErrorType());
    System.out.println("Request ID:       " + ase.getRequestId());
} catch (AmazonClientException ace) {
    System.out.println("Caught an AmazonClientException, which means the client encountered "
            + "a serious internal problem while trying to communicate with S3, "
            + "such as not being able to access the network.");
    System.out.println("Error Message: " + ace.getMessage());
  }
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:04:57.800

如果我不得不猜测，（你可能应该通过调试器运行你的代码），但在你得到 NullPointerException 的情况下，`tx`它是空的。那是因为`tx`是一个在 main 中初始化的私有静态变量，但它似乎没有在其他任何地方设置。（这个班级以外的任何地方都不能......它是私人的）。

我的建议是使 tx 成为私有最终（实例）变量，`FileXfer`在构造时提供给对象。（您也可以对许多其他变量执行相同的操作......遵循更多的[依赖注入模式](http://en.wikipedia.org/wiki/Dependency_injection)，而不是使用静态字段传递。您会发现您的代码更容易以这种方式进行推理）。

在缩写代码中：

```
// or elsewhere of course...
public static void main(String... args) {
  TransferManager manager = new TransferManager(credentials);
  FileXfer upld = new FileXfer(manager);
  upld.fileUpload....
}

public class FileXfer {
  private final TransferManager tx;
  ...

  public FileXfer(TransferManager tx) {
    //ensure that tx is not null.
    if(tx == null) { throw new NullPointerException("tx"); }
    this.tx = tx;
  }

  ...
  public void FileUpload(...) {
    ...
    upload=tx.upload(request);
    ...
  }
} 
```

# ruby-on-rails - 通过单击按钮进行排序

> ID：15453881
> 
> 赞同：0
> 
> 时间：2013-03-16T19:43:38.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有这样的事情：

```
%section
  %h1= t('.MyTableData')
  .row-fluid
    .span8
      %table.table
        %thead
          %tr
            %th= sortable('teachers', 'teacher_name', 'true')
            %th= sortable('teachers', 'teacher_score')
            %th= sortable('teachers', 'specialty')
        %tbody
          - @teachers.each do |teacher|
            %tr
              %td= as_full_name(teacher[:first_name], teacher[:last_name])
              %td= number_to_percentage(provider[:teacher_score], precision: 0)
              %td= provider[:specialty_name]                  
    .span2
      =render partial: 'search' 
```

因此，它会创建一个包含一些列的表，如果我单击诸如teacher_name 之类的列标题等，它将使用该可排序方法根据该表对表进行排序。

现在我想添加一个简单的 twitter 引导**按钮**，上面写着**“重置排序”**，当我点击它时，它应该重置这些排序，我们通过点击列标题进行排序，然后只按`teacher_name.`

我对这一切都很陌生，不能把这些拼图放在一起，所以我需要一个按钮，我需要的排序方法在那些可排序的方法中有一些示例，但不知道如何放置所有这些一起解决这个问题。

```
 def sortable(table, column, default_column = false)
    table_params = params[table] || {}

    same_sort_column = same_sort_column(table_params, column, default_column)
    current_sort_direction = sort_direction(table_params)

    new_direction = same_sort_column && current_sort_direction == 'asc' ? 'desc' : 'asc'

    link_to(t(".#{column}"), params.merge(table => { sort_column: column, sort_direction: new_direction }))
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:04:21.343

```
= link_to 'Reset sorting', params.merge(:teachers => {:sort_column => 'teacher_name', :sort_direction => 'asc'}), :class => 'btn' 
```

# blackberry-webworks - 禁止黑莓显示虚拟键盘

> ID：15453882
> 
> 赞同：1
> 
> 时间：2013-03-16T19:43:38.673
> 
> 标签：blackberry-webworks, blackberry-10, blackberry-playbook

当用户从底角拖动时，虚拟键盘是可见的。我想禁用该功能。我正在使用`BB Webworks`.

# php - 搜索表单不起作用“onclick”

> ID：15453885
> 
> 赞同：0
> 
> 时间：2013-03-16T19:43:50.687
> 
> 标签：php, javascript, onclick, buttonclick, search-form

我在使用搜索框时遇到问题。它仅在我点击“Enter”时有效，而不是当我点击“搜索”按钮时..

以下是代码：

(php)

```
<form id="search" action="search.php" method="GET">
                                <input type="text" name="s">  
    <a class="submit" onClick="document.getElementById('form').submit()"></a> 
```

(js)

```
$(function(){
var s=location.search.replace(/^\?.*s=([^&]+)/,'$1')
    ,form=$('#search')
    ,form=$('#search-form')
    ,input=$('input[type=text]',form)
    ,results=$('#search-results').height(0)
    ,src='search/results.php'
    ,ifr=$('<iframe width="100%" height="100%" frameborder="0" marginheight="0" marginwidth="0" allowTransparency="true"></iframe>')

if(results.length)      
    ifr     
        .attr({
            src:src+'?s='+s
        })
        .appendTo(results)
    ,input
        .val(decodeURI(s))

window._resize=function(h){     
    results
        .height(h)
} 
```

})

提前感谢您的帮助！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:47:16.400

我认为`document.getElementById('form')`应该是：

`document.getElementById('search')`

这就是我立即弹出的内容。

# xslt - 传递参数解析导入文件

> ID：15453893
> 
> 赞同：0
> 
> 时间：2013-03-16T19:44:43.207
> 
> 标签：xslt, import, apply-templates

`wsdl:import`在解析 WSDL 时，我遇到了许多`xsd:import`元素。我想解析导入并将`@location`or传递`@schemaLocation`给解析器。

目的是让文件列表在导入的文件导入文件时增长`filea.wsdl;filez.xsd;filev.xsd`。这样我可以消除以前导入的文件。

我会沿着这些思路思考：

```
<xsl:param name="file-list"/>

<xsl:template match="/">
    <xsl:param name="file-list"/>
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="wsdl:import">
    <xsl:apply-templates select="document(@location)">
        <xsl:with-param name="file-list" select="concat($file-list, ';', @location)`"/>
    </xsl:apply-templates>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:36:46.367

您的基本想法似乎很好。您只需要`file-list`在应用模板时传递参数，因此：

1.  在您的第一个模板中添加 a`<xsl:with-param name="file-list" value="$file-list"/>`以`xsl:apply-templates`实际传递参数，并且
2.  在您的第二个模板中添加一个`<xsl:param name="file-list"/>`以在其中引入参数。

# content-management-system - 在 umbraco 4.11 中标记就像 stackoverflow

> ID：15453894
> 
> 赞同：0
> 
> 时间：2013-03-16T19:44:50.437
> 
> 标签：content-management-system, umbraco, umbraco-tags

我正在使用 snipper 标签系统和以下文章：

[http://daniel.streefkerkonline.com/tag/umbraco/](http://daniel.streefkerkonline.com/tag/umbraco/)

我可以成功安装和使用 snipper tag 系统。但是当我浏览页面时..标签显示为文本而不是超链接...

我是不是错过了什么。是一些 javascript 文件还是我缺少一些包含标签的步骤？

有任何想法吗？这是我的页面： http: [//www.leezardpharma.com/pharmacy/our-products/weight-loss-medicine/gastro1.aspx](http://www.leezardpharma.com/pharmacy/our-products/weight-loss-medicine/gastro1.aspx)

这里有相关标签，因为有snipper ..但它们不可点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:38:09.893

你确定你这样做？

```
<ul>
  @foreach (var node in matchingNodes)
  {
    dynamic dn = new DynamicNode(node.Id);

    <li><a href="@dn.Url">@dn.Name</a></li>
  }
</ul> 
```

您在此处显示标签的位置看起来不正确： ![在此处输入图像描述](../Images/f9cbf8a6f690c0337922834db3bf9470.png)

这两个链接来自哪里？

不需要 javascript 或任何花哨的东西。这一切都是在服务器端的razor 中完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:55:34.183

如果您需要创建标签作为带有选项的链接以显示被标记的产品，那么您可以创建名为 ../search.aspx?tag=tagname 的新页面，然后搜索该标签中的产品，代码如下：

```
@inherits umbraco.MacroEngines.DynamicNodeContext
@using System.Text
@using umbraco.MacroEngines
@using umbraco.cms.businesslogic.Tags

@{   
    string searchFor = Request["tags"];

    if(string.IsNullOrEmpty(searchFor))
    {
        @* No tags were specified *@ 
        <p>Please specify a tag to search for</p>
        return;
    }

    // this is to search from the tags added and then get all the nodes
    var matchingNodes = Tag.GetNodesWithTags(searchFor).ToList();

    string tagsText = searchFor.Split(',').Count() > 1 ? "tags" : "tag";

    if (matchingNodes.Count < 1)
    {
       @* No results were found for the specified tags *@ 
       <p>No tagged items were found that matched the @tagsText: @searchFor</p>
       return;        
    }

     @* Some results were found for the specified tags *@ 
     <p><strong>@matchingNodes.Count</strong> products were found that matched the @tagsText: "@searchFor"</p>

      <ul>

      // go through the code and create URL for that product
      @foreach (var node in matchingNodes)
      {
        dynamic dn = new DynamicNode(node.Id);

        <li><a href="@dn.Url">@dn.Name</a></li>
      }
      </ul>
} 
```

你可以参考这篇文章，因为我已经检查过了，[点击这里](http://daniel.streefkerkonline.com/tag/umbraco/#highlighter_146358)，中途你会看到这段代码

让我知道任何更多的解释需要。我已经对此发表了评论，以便您可以了解代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T04:25:02.450

我写了狙击手标签控件。

如果您想要标签的友好 URL，请创建一个重写规则以将 /tags/([\w]*) 重写映射到 tagsearch.aspx?tag=$1 然后实现 tagsearch.aspx 以获取该标签参数并返回包含它的任何页面如上所述。

# linux - Zynq-7000可以单步吗

> ID：15453895
> 
> 赞同：2
> 
> 时间：2013-03-16T19:45:02.647
> 
> 标签：linux, debugging, arm, xilinx, zynq

我想将 linux 用于 Zynq-7000 的 ARM 内核。但是有一个问题：我可以从 IDE 中单步调试内核而不仅仅是 printk 吗？硬 ARM 内核是否允许单步进入内核并公开所有寄存器、标志、pc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:14:19.887

PowerPC 和 Microblaze（[Xilinx SDK](http://www.xilinx.com/tools/sdk.htm)）的基于 eclipse 的工具可以单步执行，并且还支持 Zynq-7000。

从链接的赛灵思网页：

> SDK 包括一个支持 Zynq-7000 EPP、MicroBlaze™ 和 PowerPC 处理器的集成调试器。您可以设置断点或观察点，单步执行程序，查看程序变量和堆栈，以及查看系统内存中的内容。您还可以在同一调试环境中同时调试在不同处理器（在多处理器系统中）上运行的程序。

# java - 如何让按钮工作？Java 编程

> ID：15453899
> 
> 赞同：-1
> 
> 时间：2013-03-16T19:45:17.587
> 
> 标签：java, swing, jbutton

我创建了一个`Address Book GUI`，我只是不明白如何使保存和删除按钮起作用，因此当用户填写文本字段时，他们可以单击保存并将其保存到`JList`我创建的文件中，然后他们也可以从中删除。我该怎么做呢？

```
import javax.swing.*;

import java.awt.event.*; 

import java.awt.*;

public class AddressBook {

private JLabel lblFirstname,lblSurname, lblMiddlename,  lblPhone,
lblEmail,lblAddressOne, lblAddressTwo, lblCity, lblPostCode, picture;
private JTextField txtFirstName, txtSurname, txtAddressOne, txtPhone,
txtMiddlename, txtAddressTwo, txtEmail, txtCity, txtPostCode;
private JButton btSave, btExit, btDelete;
private JList contacts;
private JPanel panel;

public static void main(String[] args) {
    new AddressBook();
}

public AddressBook(){
    JFrame frame = new JFrame("My Address Book");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(900,400);
    frame.setVisible(true);

    panel = new JPanel();
    panel.setLayout(null);
    panel.setBackground(Color.cyan);

    lblFirstname = new JLabel("First name");
    lblFirstname.setBounds(135, 50, 150, 20);
    Font styleOne = new Font("Arial", Font.BOLD, 13);
    lblFirstname.setFont(styleOne);
    panel.add(lblFirstname);
    txtFirstName = new JTextField();
    txtFirstName.setBounds(210, 50, 150, 20);
    panel.add(txtFirstName);

    lblSurname = new JLabel ("Surname");
    lblSurname.setBounds(385,50,150,20);
    Font styleTwo = new Font ("Arial",Font.BOLD,13);
    lblSurname.setFont(styleTwo);
    panel.add(lblSurname);
    txtSurname = new JTextField();
    txtSurname.setBounds(450,50,150,20);
    panel.add(txtSurname);

    lblMiddlename = new JLabel ("Middle Name");
    lblMiddlename.setBounds(620,50,150,20);
    Font styleThree = new Font ("Arial", Font.BOLD,13);
    lblMiddlename.setFont(styleThree);
    panel.add(lblMiddlename);
    txtMiddlename = new JTextField();
    txtMiddlename.setBounds(710,50,150,20);
    panel.add(txtMiddlename);

    lblPhone = new JLabel("Phone");
    lblPhone.setBounds(160,100,100,20);
    Font styleFour = new Font ("Arial", Font.BOLD,13);
    lblPhone.setFont(styleFour);
    panel.add(lblPhone);
    txtPhone = new JTextField();
    txtPhone.setBounds(210,100,150,20);
    panel.add(txtPhone);

    lblEmail = new JLabel("Email");
    lblEmail.setBounds(410,100,100,20);
    Font styleFive = new Font ("Arial", Font.BOLD,13);
    lblEmail.setFont(styleFive);
    panel.add(lblEmail);
    txtEmail = new JTextField();
    txtEmail.setBounds(450,100,150,20);
    panel.add(txtEmail);

    lblAddressOne = new JLabel("Address 1");
    lblAddressOne.setBounds(145,150,100,20);
    Font styleSix = new Font ("Arial", Font.BOLD,13);
    lblAddressOne.setFont(styleSix);
    panel.add(lblAddressOne);
    txtAddressOne = new JTextField();
    txtAddressOne.setBounds(210,150,150,20);
    panel.add(txtAddressOne);

    lblAddressTwo = new JLabel("Address 2");
    lblAddressTwo.setBounds(145,200,100,20);
    Font styleSeven = new Font ("Arial", Font.BOLD,13);
    lblAddressTwo.setFont(styleSeven);
    panel.add(lblAddressTwo);
    txtAddressTwo = new JTextField();
    txtAddressTwo.setBounds(210,200,150,20);
    panel.add(txtAddressTwo);

    lblCity = new JLabel("City");
    lblCity.setBounds(180,250,100,20);
    Font styleEight = new Font ("Arial", Font.BOLD,13);
    lblCity.setFont(styleEight);
    panel.add(lblCity);
    txtCity = new JTextField();
    txtCity.setBounds(210,250,150,20);
    panel.add(txtCity);

    lblPostCode = new JLabel("Post Code");
    lblPostCode.setBounds(380,250,100,20);
    Font styleNine = new Font ("Arial", Font.BOLD,13);
    lblPostCode.setFont(styleNine);
    panel.add(lblPostCode);
    txtPostCode = new JTextField();
    txtPostCode.setBounds(450,250,150,20);
    panel.add(txtPostCode);

    //image
    ImageIcon image = new ImageIcon("C:\\Users\\Hassan\\Desktop\\icon.png");
    picture = new JLabel(image);
    picture.setBounds(600,90, 330, 270);
    panel.add(picture);

    //buttons
    btSave = new JButton ("Save");
    btSave.setBounds(380,325,100,20);
    panel.add(btSave);

    btDelete = new JButton ("Delete");
    btDelete.setBounds(260,325,100,20);
    panel.add(btDelete);

    btExit = new JButton ("Exit");
    btExit.setBounds(500,325,100,20);
    panel.add(btExit);
    btExit.addActionListener(new Action());

    //list
    contacts=new JList();
    contacts.setBounds(0,10,125,350);
    panel.add(contacts);

    frame.add(panel); 
    frame.setVisible(true);
}
//button actions
static class Action implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        JFrame option = new JFrame();
        int n = JOptionPane.showConfirmDialog(option, 
                "Are you sure you want to exit?", 
                "Exit?", 
                JOptionPane.YES_NO_OPTION);
        if(n == JOptionPane.YES_OPTION){
            System.exit(0);
        }

    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T19:59:53.657

按钮需要事件处理程序才能工作。您尚未将任何事件处理程序添加到“保存”和“删除”按钮。您还需要在这些按钮上调用 addActionListener。我推荐匿名内部类：

```
mybutton.addActionListener(new ActionListener() {

  public void actionPerformed(ActionEvent event) {
    //do whatever should happen when the button is clicked...
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:01:20.990

你需要到`addActionListener`按钮`btSave`和`btDelete`。您可以像这样创建一个匿名类并在那里执行您的工作。

```
btSave.addActionListener(new ActionListener()
{
 public void actionPerformed(ActionEvent ae)
 {
   //Do you work for the button here
 }
}

btDelete.addActionListener(new ActionListener()
{
 public void actionPerformed(ActionEvent ae)
 {
   //Do you work for the button here
 }
} 
```

编辑：

我有一个示例，您可以参考并通过理解它进行相应的更改。我是从我们研究所的一位教授那里得到的。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TooltipTextOfList{
    private JScrollPane scrollpane = null;
    JList list;
    JTextField txtItem;
    DefaultListModel model;
    public static void main(String[] args){
        TooltipTextOfList tt = new TooltipTextOfList();
    }

    public TooltipTextOfList(){
        JFrame frame = new JFrame("Tooltip Text for List Item");
        String[] str_list = {"One", "Two", "Three", "Four"};
        model = new DefaultListModel();
        for(int i = 0; i < str_list.length; i++)
            model.addElement(str_list[i]);
        list = new JList(model){
            public String getToolTipText(MouseEvent e) {
                int index = locationToIndex(e.getPoint());
                if (-1 < index) {
                    String item = (String)getModel().getElementAt(index);
                    return item;
                } else {
                    return null;
                }
            }
        };
        txtItem = new JTextField(10);
        JButton button = new JButton("Add");
        button.addActionListener(new MyAction());
        JPanel panel = new JPanel();
        panel.add(txtItem);
        panel.add(button);
        panel.add(list);
        frame.add(panel, BorderLayout.CENTER);
        frame.setSize(400, 400);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public class MyAction extends MouseAdapter implements ActionListener{
        public void actionPerformed(ActionEvent ae){
            String data = txtItem.getText();
            if (data.equals(""))
                JOptionPane.showMessageDialog(null,"Please enter text in the Text Box.");
            else{
                model.addElement(data);
                JOptionPane.showMessageDialog(null,"Item added successfully.");
                txtItem.setText("");
            }
        }
    }
} 
```

# python - PySide - PyQt4 - 在一个表格小部件上绘制

> ID：15453900
> 
> 赞同：3
> 
> 时间：2013-03-16T19:45:23.000
> 
> 标签：python, pyqt4, pyside

在下面的代码中，我想在坐标 (4,5) 的单元格上画一个圆圈。我怎么能做到这一点？

```
#! /usr/bin/env python2.7
# -*- coding: utf-8 -*-

import sys

from PySide import QtCore, QtGui

class MainWindow(QtGui.QWidget):
    def __init__(
        self,
        parent = None
    ):
        super(MainWindow, self).__init__(parent)

# General grid
        self.table = QtGui.QTableWidget(self)
        self.nbrow, self.nbcol = 9, 9
        self.table.setRowCount(self.nbrow)
        self.table.setColumnCount(self.nbcol)

# Each cell has dimension 50 pixels x 50 pixels
        for row in range(0, self.nbrow):
            self.table.setRowHeight(row, 50)

            for col in range(0, self.nbcol):
                self.table.setColumnWidth(col, 50)

# Each cell contains one single QTableWidgetItem
        for row in range(0, self.nbrow):
            for col in range(0, self.nbcol):
                item = QtGui.QTableWidgetItem()
                item.setTextAlignment(
                    QtCore.Qt.AlignHCenter | QtCore.Qt.AlignVCenter
                )

                self.table.setItem(row, col, item)

# Header formatting
        font = QtGui.QFont()
        font.setFamily(u"DejaVu Sans")
        font.setPointSize(12)
        self.table.horizontalHeader().setFont(font)
        self.table.verticalHeader().setFont(font)

# Font used
        font = QtGui.QFont()
        font.setFamily(u"DejaVu Sans")
        font.setPointSize(20)
        self.table.setFont(font)

# Global Size
        self.resize(60*9, 60*9 + 20)

# Layout of the table
        layout = QtGui.QGridLayout()
        layout.addWidget(self.table, 0, 0)
        self.setLayout(layout)

# Set the focus in the first cell
        self.table.setFocus()
        self.table.setCurrentCell(0, 0)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    fen = MainWindow()
    fen.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:35:38.200

我想你可以像下面的例子一样重新实现paint方法，它捕获鼠标右键并在相应的坐标上放置一个小圆圈。

```
#!/usr/bin/python
#-*- coding:utf-8 -*-

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class PaintTable(QTableWidget):
    def __init__(self, parent):
        QTableWidget.__init__(self, parent)
        self.setRowCount(10) 
        self.setColumnCount(10)
        self.center = QPoint(-10,-10)

    def paintEvent(self, event):
        painter = QPainter(self.viewport()) #See: http://stackoverflow.com/questions/12226930/overriding-qpaintevents-in-pyqt
        painter.drawEllipse(self.center,10,10)
        QTableWidget.paintEvent(self,event)

    def mousePressEvent(self, event):
        if event.buttons() == Qt.RightButton:
            self.center = QPoint(event.pos().x(),  event.pos().y())
            print self.center
            self.viewport().repaint()

        elif event.buttons() == Qt.LeftButton:
            QTableWidget.mousePressEvent(self,event)

class mainWindow(QMainWindow):
    def __init__(self, parent=None):
        super(mainWindow, self).__init__(parent)

        self.table = PaintTable(self)
        self.setCentralWidget(self.table)

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = mainWindow()
    main.show()
    sys.exit(app.exec_()) 
```

应用于您的最小工作示例，这将如下所示：

```
#! /usr/bin/env python2.7
# -*- coding: utf-8 -*-

import sys

#from PyQt4 import QtCore, QtGui 
from PySide import QtCore, QtGui #Just tested it for PyQt4 since I don't have PySide installed...

class PaintTable(QtGui.QTableWidget):
    def __init__(self, parent):
        QtGui.QTableWidget.__init__(self, parent)
        self.center = QtCore.QPoint(-10,-10)

    def paintEvent(self, event):
        painter = QtGui.QPainter(self.viewport()) #See: http://stackoverflow.com/questions/12226930/overriding-qpaintevents-in-pyqt
        painter.drawEllipse(self.center,10,10)
        QtGui.QTableWidget.paintEvent(self,event)

    def mousePressEvent(self, event):
        if event.buttons() == QtCore.Qt.RightButton:
            self.center = QtCore.QPoint(event.pos().x(),  event.pos().y())
            print self.center
            self.viewport().repaint()

        elif event.buttons() == QtCore.Qt.LeftButton:
            QtGui.QTableWidget.mousePressEvent(self,event)

class MainWindow(PaintTable):
    def __init__(
        self,
        parent = None
    ):
        super(MainWindow, self).__init__(parent)

# General grid
        self.table = PaintTable(self)
        self.nbrow, self.nbcol = 9, 9
        self.table.setRowCount(self.nbrow)
        self.table.setColumnCount(self.nbcol)
        for row in range(0, self.nbrow):
            self.table.setRowHeight(row, 50)

            for col in range(0, self.nbcol):
                self.table.setColumnWidth(col, 50)

# Each cell contains one single QTableWidgetItem
        for row in range(0, self.nbrow):
            for col in range(0, self.nbcol):
                item = QtGui.QTableWidgetItem()
                item.setTextAlignment(
                    QtCore.Qt.AlignHCenter | QtCore.Qt.AlignVCenter
                )

                self.table.setItem(row, col, item)

# Header formatting
        font = QtGui.QFont()
        font.setFamily(u"DejaVu Sans")
        font.setPointSize(12)
        self.table.horizontalHeader().setFont(font)
        self.table.verticalHeader().setFont(font)

# Font used
        font = QtGui.QFont()
        font.setFamily(u"DejaVu Sans")
        font.setPointSize(20)
        self.table.setFont(font)

# Global Size
        self.resize(60*9, 60*9 + 20)

# Layout of the table
        layout = QtGui.QGridLayout()
        layout.addWidget(self.table, 0, 0)
        self.setLayout(layout)

# Set the focus in the first cell
        self.table.setFocus()
        self.table.setCurrentCell(0, 0)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    fen = MainWindow()
    fen.show()
    sys.exit(app.exec_()) 
```

![输出](../Images/329f141f4aac1ce7455ab1bc1c738092.png)

# java - PlayFramework 2.1 JAVA 中的 Promise 超时和 WS.get 超时

> ID：15453905
> 
> 赞同：5
> 
> 时间：2013-03-16T19:45:46.177
> 
> 标签：java, playframework, playframework-2.0, promise

我正在尝试使用 JAVA api 在 Play Framework 2.1 上使用 WS 访问 URL。

这是我想要的：

1.  `WS.get()`在代码中的某些地方，使用（我设置 timeout **1000ms**）启动 WS 请求
2.  如果 WS.get 超时或发生其他异常，我不希望我的 Promise 抛出异常（因为我的流程需要这种方式）所以我用`Promise.recover()`另一个来包装这个 Promise。在失败的情况下返回一个`null`Reponse 对象。
3.  我想在代码中的其他地方“获取”我的响应。我等待**5000 毫秒**，但我得到的是`java.util.concurrent.TimeoutException: Futures timed out after [5000 milliseconds]`

**如何？** **1000 毫秒**`WS.get()`后超时，因为它抛出一个它被我的恢复函数捕获。它返回空响应而不是异常。**`java.util.concurrent.TimeoutException: No response received after 1000`**

 **所以承诺最多在 1000 毫秒后“完成”。**为什么它会在 5000 毫秒后超时并引发异常？**

代码：

```
 Logger.info("Fetch started: " + new Date().toString());
Promise<WS.Response> p1 = WS.url("http://athena.ics.forth.gr:9090/RDF/VRP/Examples/tap.rdf").setTimeout(1000).get();
Promise<WS.Response> p2 = p1.recover(new Function<Throwable, WS.Response>() { 
  @Override
  public Response apply(Throwable a) throws Throwable {
    Logger.error("Promise thrown an exception so I will return null. " + new Date().toString() + " " + System.currentTimeMillis(), a);
    return null;
  }
});

try {
  /* This should return null or valid response but shouldn't throw an exception */
  Response r = p2.get(5000L);
  Logger.info(r.toString());
} catch (Exception e) {
  /* Sholdn't happen! */
  Logger.error("Outer exception: " + " " + System.currentTimeMillis(), e);
}
Logger.error("Fetch finished: " + new Date().toString() + " " + System.currentTimeMillis()); 
```

我得到的输出：

```
[info] application - Fetch started: Tue Mar 19 10:04:42 EET 2013
[error] application - Outer exception:  1363680287626
java.util.concurrent.TimeoutException: Futures timed out after [5000 milliseconds]
    at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:96) ~[scala-library.jar:na]
    at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:58) ~[scala-library.jar:na]
    at scala.concurrent.Await$$anonfun$ready$1.apply(package.scala:86) ~[scala-library.jar:na]
    at scala.concurrent.Await$$anonfun$ready$1.apply(package.scala:86) ~[scala-library.jar:na]
    at akka.dispatch.MonitorableThreadFactory$AkkaForkJoinWorkerThread$$anon$3.block(ThreadPoolBuilder.scala:173) ~[akka-actor_2.10.jar:na]
    at scala.concurrent.forkjoin.ForkJoinPool.managedBlock(ForkJoinPool.java:2803) [scala-library.jar:na]
[error] application - Fetch finished: Tue Mar 19 10:04:47 EET 2013 1363680287627
[error] application - Promise thrown an exception so I will return null. Tue Mar 19 10:04:47 EET 2013 1363680287627
java.util.concurrent.TimeoutException: No response received after 1000
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider$ReaperFuture.run(NettyAsyncHttpProvider.java:1809) ~[async-http-client.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[na:1.7.0_11]
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351) ~[na:1.7.0_11]
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178) ~[na:1.7.0_11]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) ~[na:1.7.0_11]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) ~[na:1.7.0_11] 
```

即使我等待 promise2 并且 promise2 是“恢复包装的 promise1”，恢复函数在抛出异常后运行。**

# javascript - 几天后删除图像？

> ID：15453909
> 
> 赞同：-6
> 
> 时间：2013-03-16T19:45:57.570
> 
> 标签：javascript, html

请帮我解决一下这个。

示例我有以下图像代码，并希望在 5 天后删除下面的图像，如何进一步编码？

```
 <imgsrc="http://www.quackit.com/pix/milford_sound/milford_sound_t.jpg" style="max-width:100%" alt="Milford Sound in New Zealand" /> 
```

应该在此代码中添加什么代码以使此图像在 5 天后删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:32:54.763

要删除给定 URL 的任何（1 个或多个）IMG 标签：

```
<img src="http://quackit.com/pix/milford_sound/milford_sound_t.jpg"; 
    style="max-width:100%" alt="Milford Sound in New Zealand" /> 
```

通过 JavaScript 从页面附加以下代码：

```
<script type='text/javascript'>
function removeThatImg() {
    var ex=document.getElementsByTagName("img");
    for (var i=0;i<ex.length;i++) {
        if ( ex[i].src == "http://quackit.com/pix/milford_sound/milford_sound_t.jpg" )
            ex[i].parentNode.removeChild(ex[i]);
    }
}
var dateStart = Date.parse('March 16, 2013')/86400000;
var dateNow = new Date();
dateNow = dateNow.getTime()/86400000;
if ( dateNow - dateStart > 5) // more than 5 days 
    window.onload=function() {
        //do it with a half second delay, because google may take time to add that image
        //and right after the page is loaded it may not yet be there
        setTimeout(removeThatImg,500);
    }
</script> 
```

它可能会起作用（或者可能不会——我认为会是这样，简单地说，因为图像每次都会不同）

# javascript - javascript中的xmlhttprequest GET不响应

> ID：15453910
> 
> 赞同：0
> 
> 时间：2013-03-16T19:46:06.580
> 
> 标签：javascript, web-services, xmlhttprequest, weather

我正在尝试使用 wsf.cdyne.com/WeatherWS/Weather.asmx 提供的天气 Web 服务。我确信我可以通过使用 uri "' [http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityForecastByZIP?ZIP=](http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityForecastByZIP?ZIP=) ' + zipcode" 获得 XML 格式的响应。

所以我现在要做的是使用 XmlHttpRequest 发送上面的 uri。我添加了一些警报来监控状态。在 open() 之后，readyState 为 1。之后我无法得到任何其他响应。如果我删除语句“xmlHttpRequest.onreadystatechange = processRequest;”，我在 send() 之后看不到任何响应。所以我只是希望有人能帮我检查一下有什么问题。

```
 <html>  
    <head>  
    <title>weather app</title>  
    </head>  
    <body>
        <script language="JavaScript">
        function httpGet()
        {
            var xmlHttp;  
            if (window.XMLHttpRequest) {  
                xmlHttp = new XMLHttpRequest();  
                if (xmlHttp.overrideMimeType)  
                    xmlHttp.overrideMimeType('text/xml');  
            } 
            else if (window.ActiveXObject) {  
                try {  
                    xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");  
                } 
                catch (e) {  
                    try {  
                        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");  
                    } 
                    catch (e) { 
                    }
                }  
            }  

            xmlHttp.open( "GET", "http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityForecastByZIP?ZIP=85281", false );
            alert("1 " +xmlHttp.readyState);
            xmlHttpRequest.onreadystatechange = processRequest;
            alert("2 " +xmlHttp.readyState);
            xmlHttp.send();
            alert("3 " +xmlHttp.readyState);

            document.write(xmlHttp.responseText);
            return xmlHttp.responseText;
        }

        httpGet();

        </script>
    </body>  
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:55:37.300

正如@robertklep 正确指出的那样，此请求是跨域的。浏览器不允许跨浏览器请求作为安全措施，因此您不会劫持用户在其网站上的会话等。

要让它工作，您可以在本地站点上创建一个代理。如果该站点支持使用 JSONP 跨域，您可以使用它。

有关更多信息，请查找有关跨域策略的一些信息，或者如果他们有一些 API 文档，他们可能也有关于您的问题的信息。

# asp.net - 通过使用 .asmx Web 服务从 XML 文件提供汽车模型来返回汽车制造商

> ID：15453912
> 
> 赞同：0
> 
> 时间：2013-03-16T19:46:20.340
> 
> 标签：asp.net, xml, vb.net

我正在编写一个 .asmx Web 服务来返回所有与 XML 文件中请求的模型匹配的汽车制造商。

在 ASP.net 中使用 VB，你能建议我怎么做：

1）首先找到与请求的品牌匹配，然后 2）返回所有模型？

下面是 XML 的示例。谢谢！

```
<cars>
  <car>
    <carmake>Acura</carmake>
    <carmodels>
      <carmodel>ILX</carmodel>
      <carmodel>MDX</carmodel>
      <carmodel>RDX</carmodel>
    </carmodels>
  </car>

  <car>
    <carmake>Aston Martin</carmake>
    <carmodels>
      <carmodel>DB9</carmodel>
      <carmodel>DBS</carmodel>
      <carmodel>Rapide</carmodel>
    </carmodels>
  </car>
</cars> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T01:44:45.397

您可以通过使用 XPath 来做到这一点

```
Dim doc As New Xml.XmlDocument
doc.LoadXml("yourinputxmlasstring")

Dim maker As String = "Aston Martin"
For Each x As Xml.XmlNode In doc.SelectNodes("cars/car[carmake='" + maker + "']")
    For Each p As Xml.XmlNode In x.SelectNodes("carmodels/carmodel")
        Console.WriteLine(p.InnerText)
    Next
Next 
```

# c - 如何将堆栈变量与 16 字节边界对齐

> ID：15453914
> 
> 赞同：3
> 
> 时间：2013-03-16T19:46:25.987
> 
> 标签：c, alignment, callstack

我有以下局部变量（将存储在堆栈中）。

```
struct test1 {
  int a;
  int b;
  char c;
}; 
```

如何将整数的起始地址与堆栈中`a`的`16byte`边界对齐？

我在自定义编写的 MIPS ISA 处理器上运行此 C 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:50:50.653

这是对齐数据的一些非标准方法。

```
struct test1 *pdata;

// here we assume data on stack is word aligned
pdata = alloca(sizeof(*pdata) + 14);
if (pdata & 0xF)
{
    pdata = (unsigned char*)pdata + 16 - (pdata & 0xF);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:13:57.077

不幸的是，没有*标准*的方法可以让对象像这样对齐。几乎总是有一些特定于编译器的技巧，例如`__attribute__`在 GCC 中，但您必须检查编译器的文档。

（当然，这种对齐方式也没有标准*用途*，这就是为什么没有实现它的标准方法的原因。所以你可能已经在诉诸扩展，所以进一步没有真正的伤害。）

包含足够大的元素对象的联合通常可以解决问题，但我相信 MIPS CPU 的最大元素 C 对象是`long long`and `double`，它们只有 8 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T19:51:04.563

在这种情况下，在 MIPS ISA C 编译器上的 AFAIK 强制对齐字边界，只需在结构中添加一个 int （即 32 位）。所以：

```
struct test1 {
   int a;       // 4 bytes
   int b;       // 4 bytes
   int foralign;// 4 bytes for 16 byte alignment
   char c;      // 1 byte but will be aligned 4 bytes

}; 
```

# python - 获取所有可用时区

> ID：15453917
> 
> 赞同：6
> 
> 时间：2013-03-16T19:46:44.137
> 
> 标签：python, datetime, timezone, python-dateutil

我目前正在开发一个需要支持多个时区的应用程序。

为此，我正在使用 dateutil 库。现在，我需要一种方法来向用户展示 dateutil 库支持的所有可用时区的列表。

此外，是否建议将 tz 作为字符串存储在数据库中，如“Europe/Berlin”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T20:10:54.543

`dateutil`将使用操作系统时区信息，但也带有它自己的压缩时区信息文件。

您可以从加载此数据的实用程序代码中列出可用名称：

```
from dateutil.zoneinfo import get_zonefile_instance
zonenames = list(get_zonefile_instance().zones) 
```

您需要对该列表进行一些排序和过滤；此列表中有缩写（3 个字母）时区代码以及“地区/城市”条目。

将这些名称存储在数据库中就可以了。

请注意，这会将所有数据加载到内存中；如果这不是可取的，您需要自己加载 tar 文件：

```
import os
import tarfile
import dateutil.zoneinfo

zi_path = os.path.abspath(os.path.dirname(dateutil.zoneinfo.__file__))
zonesfile = tarfile.TarFile.open(
    os.path.join(zi_path, dateutil.zoneinfo.ZONEFILENAME))
zonenames = [zn.name for zn in zonesfile.getmembers()
             if not zn.isdir() and zn.name != dateutil.zoneinfo.METADATA_FN] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-21T23:18:52.440

对于`dateutil`：

```
from dateutil.zoneinfo import getzoneinfofile_stream, ZoneInfoFile
ZoneInfoFile(getzoneinfofile_stream()).zones.keys()
>>> ['Asia/Ujung_Pandang',
     'America/Porto_Velho',
     'America/La_Paz',
     'America/Caracas',
     'Europe/Malta',
     'Etc/GMT-13',
     'Atlantic/Bermuda',
     ...] 
```

`pytz`容易一点

```
import pytz
pytz.all_timezones
>>> ['Africa/Abidjan',
     'Africa/Accra',
     'Africa/Addis_Ababa',
     'Africa/Algiers',
     'Africa/Asmara',
     'Africa/Asmera',
     'Africa/Bamako',
     'Africa/Bangui',
     'Africa/Banjul',
     'Africa/Bissau',
     'Africa/Blantyre',
     'Africa/Brazzaville',
     ...] 
```

请注意，`dateutil`更喜欢使用操作系统来确定时区信息。`pytz`使用自己的区域文件。虽然每个可能都有优点，但`pytz`如果您不想在系统级别管理时区，则可以提供更多的一致性。

# php - 在 Laravel 4 中如何查询多对多关系？

> ID：15453921
> 
> 赞同：2
> 
> 时间：2013-03-16T19:47:00.720
> 
> 标签：php, orm, laravel, laravel-4, eloquent

在 Laravel 4 中，我有以下表格

```
 - items table
 --- id
 --- name

 - tags table
 --- id
 --- name

 - item_tag
 --- id
 --- tag_id
 --- item_id
 --- created_at
 --- updated_at

class Item extends Eloquent {

    public function tags()
    {
        return $this->belongsToMany('Tag');
    }
}

class Tag extends Eloquent {

    public function items()
    {
       return $this->hasMany('Item');
    }
} 
```

我的问题：

我想获取所有具有以下两个标签“foo”和“bar”的项目？只有带有两个标签的物品才应该被退回！？

# 更新

我已经尝试了以下方法，但它对我不起作用，我感觉问题出在“->have”子句上，但我做错了，

假设标签“foo”的 id 为 1，“bar”的 id 为 2

```
class Item extends Eloquent {

protected $table = 'items';

public function tags()
{
    return $this->belongsToMany('Tag');
}

 public static function withTags()
{
  return static::leftJoin(
    'item_tag',
    'items.id', '=', 'item_tag.item_id'
  )
  ->whereIn('item_tag.tag_id', array(1, 2))
   ->groupBy('items.id')
   ->having('count(*)', '=',2)
  ;
}   
} 
```

并运行它

```
 #routes.php
   Route::get('/', function()
   {
        return Item::withTags()->get();
   }); 
```

它应该返回带有标签 1 和 2 的所有项目，但它没有返回任何东西！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:24:20.110

终于我找到了答案！

使用“haveRaw”将解决问题

“列表”也为我们提供标签表中标签的 ID

注意：“haveRaw”仅在 Laravel 4 -beta 4- 或更高版本中可用

```
class Item extends Eloquent {

protected $table = 'items';

public function tags()
{
    return $this->belongsToMany('Tag');
}

public static function withTags($tags = array())
{
    $count = count($tags);
    return static::leftjoin('item_tag', 'items.id', '=', 'item_tag.item_id')
        ->whereIn('item_tag.tag_id', Tag::whereIn('name', $tags)->lists('id'))
        ->groupBy('item_tag.item_id')
        ->havingRaw('count(*)='.$count)
        ;
}    
} 
```

并运行它

```
 return Item::withTags(['foo','bar'])->get(); 
```

**更新：重要提示**

当您看到上面代码的输出时，您会注意到 item->id 不包含 items.id!，而是包含 tags.id，这是因为使用“joins”会导致歧义，解决这个问题你必须添加以下选择语句

```
 ->select('items.id as id','items.name as name') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T22:29:04.017

对于 ManyToMany 关系，两个 Eloquent 类都需要返回一个`$this->belongsToMany`. 在您的 Tag 类中，您使用的 hasMany 不使用数据透视表。

如果您解决了上述问题，那么您应该能够正确访问数据透视表。

我认为问题在于您需要加入标签 ID 而不是项目 ID。

```
return static::leftJoin(
    'item_tag',
    'tags.id', '=', 'item_tag.tag_id'
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:33:15.970

我猜您正在寻找内部连接？试试这个：

```
class Item extends Eloquent {

    protected $table = 'items';

    public function tags()
    {
        return $this->belongsToMany('Tag');
    }

    public static function withTags()
    {
        return static::join('item_tag', 'items.id', '=', 'item_tag.item_id')
            ->whereIn('item_tag.tag_id', array(1, 2));
    }   
} 
```

# sql-server - 使用实体框架添加记录

> ID：15453928
> 
> 赞同：0
> 
> 时间：2013-03-16T19:47:34.400
> 
> 标签：sql-server, entity-framework, entity-framework-4, edmx

我在 VS2010 中使用 EF4，我有以下代码：

```
PatientInformation patientInformation = PatientInformation.CreatePatientInformation(3); 
patientInformation.DateOfBirth = new DateTime(1983, 6, 13);
patientInformation.FamilyId = 1;
patientInformation.FirstName = "First";
patientInformation.LastName = "Patient";

ClinicEntity.PatientInformations.AddObject(patientInformation);
ClinicEntity.SaveChanges(); 
```

问题是`AddObject()`没有将对象添加到集合中，我只是不知道为什么。它也没有给出任何错误。

我的 SQL Server 数据库中唯一不可为空的字段是`PatientId`列，它是一个标识列...请帮助！

提前致谢！

约格什·洛特利卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:55:13.027

尝试：

```
ClinicEntity.PatientInformations.Add(patientInformation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:56:29.347

我不知道这条线发生了什么：

```
PatientInformation patientInformation = PatientInformation.CreatePatientInformation(3); 
```

如果你做这样的事情作为测试会发生什么：

```
 PatientInformation patientInformation = new PatientInformation();
    patientInformation.DateOfBirth = new DateTime(1983, 6, 13);
    patientInformation.FamilyId = 1;
    patientInformation.FirstName = "First";
    patientInformation.LastName = "Patient";

    ClinicEntity.PatientInformations.AddObject(patientInformation);
    ClinicEntity.SaveChanges(); 
```

如果该测试代码有效，您需要重新处理 CreatePatientInformation(3) 调用中发生的任何事情。

# html - 我的 Storenvy 页面上的自定义字体有问题

> ID：15453929
> 
> 赞同：2
> 
> 时间：2013-03-16T19:47:36.953
> 
> 标签：html, css, fonts, font-face

我正在使用来自 FontSquirrel 的网络字体，它提供了 webfont 工具包。我目前在“StilettoRedBand.com”的根文件夹中有文件，但在我的 Storenvy 页面 (stilettored.storenvy.com) 中，webfont 在标题或页脚中不起作用。

我一直在做这个项目，以至于我似乎错过了一些东西，并且很难找到问题所在，因为它一开始还在工作，然后就停止了。

谁能帮我吗？

这是字体来源：[http ://www.fontsquirrel.com/fonts/WC-Mano-Negra-Bta](http://www.fontsquirrel.com/fonts/WC-Mano-Negra-Bta)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:35:19.400

您需要确保获得所有需要的字体文件（.eot、.ttf、.woff 和 .svg）。单击“Webfont 工具包”选项卡并下载整个包。使用此代码并确保您的链接是正确的。您还应该尝试删除 'text-rendering: optimizeLegibility;' 如果你正在使用这个。

```
@font-face {
font-family: 'WCManoNegraBtaRegular';
src: url('WCManoNegraBta-webfont.eot');
src: url('WCManoNegraBta-webfont.eot?#iefix') format('embedded-opentype'),
     url('WCManoNegraBta-webfont.woff') format('woff'),
     url('WCManoNegraBta-webfont.ttf') format('truetype'),
     url('WCManoNegraBta-webfont.svg#WCManoNegraBtaRegular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T22:59:49.027

我的 storenvy 商店的 Firefox 也有同样的问题。这是我找到的修复：

[如何添加 Access-Control-Allow-Origin 标头](https://stackoverflow.com/questions/5008944/how-to-add-an-access-control-allow-origin-header)

您只需要在与字体相同的文件夹中的 .htaccess 文件中添加以下代码：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

我还没有让它工作，但我的网站托管在 godaddy 上，所以我不知道我的问题是否与此有关。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:56:03.377

试试看

```
@font-face {
font-family:WCManoNegraBta;
font-weight:bold;
src:url("path-to-the-font-file/WCManoNegraBta.otf") format("opentype");}

div {
  font-family:WCManoNegraBta;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T06:57:36.457

我遇到了同样的问题！阅读这篇文章后，我最终得到了适合我的字体。

我所做的是将@font-face 代码添加到我的托管站点并将其保存为.css 文件

示例： http: [//lovepollution.com/andadrifont.css](http://lovepollution.com/andadrifont.css)

然后我去了主题部分并单击“css模式”。我在样式表下面添加了。

```
@import url('http://lovepollution.com/andadrifont.css'); 
```

已保存并现在可以使用。

# html - 你如何改变导航栏的颜色

> ID：15453930
> 
> 赞同：0
> 
> 时间：2013-03-16T19:47:40.457
> 
> 标签：html, css

我将如何更改此代码中导航栏的颜色？

CSS

```
<style type="text/css">
body 
    {
      background-color:#454545;
      color:white;
      font-family:"Courier New";
      text-align:center;
    }
      a:link
    {
      color:white;
    }
      a:visited
    {
      color:white;
    }
      a:hover
    {
      color:white;
    }
      a:active
    {
      color:white;
    }
.nav
    {
      border:1px solid #ccc;
      border-width:1px 0;
      list-style:none;
      margin:0;
      padding:0;
      text-align:center;
    }
    .nav li{
    display:inline;
    }
.nav a
    {
    display:inline-block;
    padding:10px;
    }
h1
    {
      font-size:40;
    }
h2
    {
      font-size:27.5;
      text-decoration:underline;
    }
h3
    {
      font-size:20;
    }
p
    {
      font-size:12;
    }
    </style> 
```

HTML

```
<li><a href="http://">Home</a></li>
<li><a href="http://">Youtube</a></li>
<li><a href="https://">Twitter</a></li> 
```

我已经查找了如何更改它，但它只给了我关于 twitter 的信息。我只想知道如何更改导航栏的颜色而不是整个页面的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:49:44.757

为块添加背景`.nav`？

```
background: #FFDD00; //some color 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:50:32.243

添加这是 css 的右侧部分以着色某些元素。

```
background-color:#000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:50:34.040

没有看到所有代码或想要的效果很难判断，但 background-color 是您想要更改背景的 CSS 属性，或用于更改文本颜色的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:52:51.793

要更改导航栏本身的背景颜色，请将其添加到`.nav`类中：

```
background-color:#002d60; 
```

您可以使用[colorpicker.com 之](http://colorpicker.com)类的东西来查找颜色十六进制代码。如果您想更改导航栏中文本的颜色，请添加`color`如下属性：

```
color:#003d60; 
```

对于这两种情况，您还可以使用`rgba(n,n,n,n)`,`rgb(n,n,n)`甚至`hsl(n,n,n)`选择具有红-绿-蓝或色相-饱和度-亮度值的颜色。

# html - Twitter Bootstrap 选项卡和 bootstrap-select 溢出问题

> ID：15453934
> 
> 赞同：5
> 
> 时间：2013-03-16T19:48:04.907
> 
> 标签：html, css, twitter-bootstrap

我使用 twitter bootstrap 和这个插件来选择菜单[https://developer.snapappointments.com/bootstrap-select/](https://developer.snapappointments.com/bootstrap-select/)。

当我尝试将此选择应用于选项卡内的内容时遇到问题。

[http://jsfiddle.net/gbGdY/1/](http://jsfiddle.net/gbGdY/1/) demo 来说明问题。

在选项卡外部，一切正常，但在选项卡内部 - 溢出无法正常工作。

另外，如果我尝试覆盖标签溢出（像这样）

```
.tab-content {
  overflow: visible !important;
} 
```

然后我遇到了另一个问题 - 菜单下降并扩展到全高。

所以，我的问题是如何避免这个问题，并使选择菜单在选项卡内工作，就像它在选项卡外工作一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T13:47:44.973

希望您仍在寻找解决方案？如果你是，你可以试试这个：

添加溢出：隐藏到选项卡内容

```
<div class="tab-content" style="overflow: hidden"> 
```

并将数据容器添加为选项卡窗格/选项卡内容

```
<div class="btn-group bootstrap-select" data-container="tab-pane"> 
```

并根据需要添加/修改css规则

```
.dropdown-menu {
    height:200px;
}

.tab-content{
    height: 350px; 
    background: green;
    padding: 2%;
} 
```

结果会是这样的：http: [//jsfiddle.net/gbGdY/1/](http://jsfiddle.net/gbGdY/1/)

希望这可以帮助！-r

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T19:50:16.370

像你一样`.tab-content`设置。`overflow: visible`

然后设置：

```
.dropdown-menu { height:200px; } 
```

或将其设置为您想要的任何高度。

# google-apps-script - 可以使用 Google 脚本集成到 Google Drive UI

> ID：15453935
> 
> 赞同：4
> 
> 时间：2013-03-16T19:48:15.443
> 
> 标签：google-apps-script, google-drive-api

是否可以使用作为 Web 应用程序部署的 Google 应用程序脚本集成到 Google Drive UI 中？

即打开文件类似于：[https ://developers.google.com/drive/about-sdk#create_and_open_files_directly_from_the_drive_ui](https://developers.google.com/drive/about-sdk#create_and_open_files_directly_from_the_drive_ui)

但使用谷歌脚本：[https ://developers.google.com/apps-script/](https://developers.google.com/apps-script/)

脚本确实可以访问驱动器 API，但我不确定它们是否能够集成到驱动器 UI 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T23:15:14.987

是的。您可以创建脚本，将其部署为 Web 应用程序，然后从 Drive UI 调用它，如您提供的链接所示。您的脚本是从 Drive UI 传递的参数（例如，包括当前选择的文件夹），您从那里开始工作......我使用这种机制来处理表示客户端活动的文件夹结构。选择一个客户端文件夹，我可以选择使用我的脚本或通常的 Drive 选项打开。我的脚本检查驱动器传递的参数，并以适当的用户界面响应下一步。

# java - 如何在 Spring Webflow 中实现 Switch/if else if 语句？

> ID：15453938
> 
> 赞同：3
> 
> 时间：2013-03-16T19:48:31.460
> 
> 标签：java, spring, spring-mvc, spring-webflow

已实现如下 switch 语句。

如有错误，请您核实并更正？

```
<set name="flowScope.Valid" value="true">
<decision-state id="isDNCheckNotRequired" test="Valid == true">
<transition on="true" to="even"/>
<transition on="false" to="odd"/>
</decision-state>

<action-state id="even">
<evaluate expression="Test.setEven(true)">
</action-state>

<action-state id="odd">
<evaluate expression="Test.set(false)">
</action-state> 
```

请让我知道这种实现方式在 spring webflow 2.0 中是否支持

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T20:07:47.550

引用文档

对于决策状态

```
<decision-state id="moreAnswersNeeded">
    <if test="interview.moreAnswersNeeded()" then="answerQuestions" else="finish" />
</decision-state> 
```

作为替代

```
<action-state id="moreAnswersNeeded">
    <evaluate expression="interview.moreAnswersNeeded()" />
    <transition on="yes" to="answerQuestions" />
    <transition on="no" to="finish" />
</action-state> 
```

类比视图状态

```
<view-state id="uploadFile" model="uploadFileHandler">
    <var name="fileUploadHandler" class="org.springframework.webflow.samples.booking.FileUploadHandler" />
    <transition on="upload" to="finish" >
        <evaluate expression="fileUploadHandler.processFile()"/>
    </transition>
    <transition on="cancel" to="finish" bind="false"/>
</view-state> 
```

请参阅：[http ://docs.spring.io/spring-webflow/docs/2.3.4.RELEASE/reference/html/actions.html#decision-state](http://docs.spring.io/spring-webflow/docs/2.3.4.RELEASE/reference/html/actions.html#decision-state)

# iphone - UILocalNotification 或推送通知

> ID：15453942
> 
> 赞同：0
> 
> 时间：2013-03-16T19:48:53.027
> 
> 标签：iphone, ios, push-notification, uilocalnotification

在我的应用程序中，我有一系列朋友的生日，当某人的生日快到时我需要通知用户。Array 将有大约 200 位朋友的生日。在这种情况下，

`UILocalNotification`正如Apple所说，是否`Each application on a device is limited to the soonest-firing 64 scheduled local notifications.`可行，如果是，我必须如何实现UILocalNotication。

我不想去`PushNotification.`任何建议将不胜感激。

我正在安排这样的本地通知：-

```
-(void) scheduleNotification{
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    [self.notifications removeAllObjects];
    for (int i = 0; i< [delegate.viewController.contactList count] ; i++) {
        UILocalNotification *localNotification = [[UILocalNotification alloc] init];
        NSString *name = [[delegate.viewController.contactList objectAtIndex:i]objectForKey:NAME_KEY];
        NSString *birthday = [[delegate.viewController.contactList objectAtIndex:i]objectForKey:BIRTHDAY_KEY];
        if (birthday) {
            [formatter setDateFormat:@"MM/dd/yyyy"];
            [formatter setLocale:[NSLocale currentLocale]];
            [formatter setTimeZone:[NSTimeZone systemTimeZone]];
            NSDate *date = [formatter dateFromString:birthday];
            if (date == nil) {
                [formatter setDateFormat:@"MM/dd"];
                [formatter setLocale:[NSLocale currentLocale]];
                [formatter setTimeZone:[NSTimeZone systemTimeZone]];
                date = [formatter dateFromString:birthday];
            }
            NSCalendar *gregorianEnd = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
            NSDateComponents *componentsEnd = [gregorianEnd components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:date];

            componentsEnd.year = [[NSDate date] year];
            date = [gregorianEnd dateFromComponents:componentsEnd];
            self.alarmTime = [date dateByAddingTimeInterval:self.mTimeInterval];
            localNotification.fireDate = _alarmTime;
            localNotification.timeZone = [NSTimeZone defaultTimeZone];
            localNotification.applicationIconBadgeNumber = 1;

            NSString *itemName = @"B'day Alert!!!";
            NSString *msgName = [NSString stringWithFormat:@"Celebrate %@'s B'day",name];
            NSDictionary *userDict = [NSDictionary dictionaryWithObjectsAndKeys:itemName,MessageKey, msgName,TitleKey, nil];
            localNotification.userInfo = userDict;
            localNotification.soundName = self.soundName;
            localNotification.alertBody = [NSString stringWithFormat:@"Celebrate %@'s B'day",name];

            [self.notifications addObject:localNotification];
            } 
        }
    }
} 
```

我已将 applicationDidEnterBackground 委托实现为：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    UILocalNotification* notification;

    for (int i = 0; i< [self.settingVC.notifications count]; i++) {

        notification = [self.settingVC.notifications objectAtIndex:i];
        [[UIApplication sharedApplication] scheduleLocalNotification:notification];
    }

} 
```

另外，在 didReceiveLocalNotification 委托中，我有这个：

```
 - (void)application:(UIApplication *)application
didReceiveLocalNotification:(UILocalNotification *)notification
{
    NSString *itemName = [notification.userInfo objectForKey:TitleKey];
    NSString *messageTitle = [notification.userInfo objectForKey:MessageKey];
    [self _showAlert:itemName withTitle:messageTitle];
    application.applicationIconBadgeNumber = notification.applicationIconBadgeNumber-1;
} 
```

我应该对上述功能进行哪些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:03:30.747

您仍然可以使用 UILocalNotification 并且只安排 64 个最近的生日。每当应用程序中有活动时重新安排这些活动，以便更新最新活动。我想 64 条通知可以让用户在需要再次启动应用程序之前有足够的时间。

# android - 适用于 Android 的 Google+ 平台 - NoClassDefFoundError：com.google.android.gms.samples.plus.SignInActivity

> ID：15453946
> 
> 赞同：7
> 
> 时间：2013-03-16T19:49:23.510
> 
> 标签：android, google-plus, noclassdeffounderror

我想运行 google+ 示例：PlusSampleActivity。

此处定义了执行此操作的步骤：[https ://developers.google.com/+/mobile/android/getting-started](https://developers.google.com/+/mobile/android/getting-started)

1.  将 Google Play 服务下载到我的 Eclipse；
2.  在 Google APIs Console 中，创建一个 API 项目
3.  在“服务”窗格中，启用 Google+ API

    *   在 API 访问窗格中，创建 OAuth 2.0 客户端 ID
    *   设置名称产品
    *   选择安卓
    *   将包名设置为：com.google.android.gms.samples.plus
    *   使用 keytool 生成签名证书指纹
    *   创建客户 ID
4.  按照页面上的说明导入样本

该项目没有任何编译时错误。

但是如果我运行应用程序，我会得到一个异常：

```
FATAL EXCEPTION: main java.lang.ExceptionInInitializerError at
java.lang.Class.newInstanceImpl(Native Method) at
java.lang.Class.newInstance(Class.java:1409) at
android.app.Instrumentation.newActivity(Instrumentation.java:1021) at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
at
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
at android.app.ActivityThread.access$1500(ActivityThread.java:121) at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:943) at
android.os.Handler.dispatchMessage(Handler.java:99) at
android.os.Looper.loop(Looper.java:130) at
android.app.ActivityThread.main(ActivityThread.java:3701) at
java.lang.reflect.Method.invokeNative(Native Method) at
java.lang.reflect.Method.invoke(Method.java:507) at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624) at
dalvik.system.NativeStart.main(Native Method) Caused by:   
java.lang.NoClassDefFoundError: 
```

我不知道出了什么问题，当我尝试运行第 3 步初始化 PlusClient 的更简单应用程序时，类似的异常：

```
Caused by: java.lang.NoClassDefFoundError:
com.example.ExampleActivity... 
```

当然，我通过添加新的客户端 ID 添加了对应用程序的访问权限。

引用已正确添加到库中

**我解决了我的问题：**

右键单击项目，选择 Android 工具 -> 添加支持库

[有关如何执行此操作的来源。](http://android-er.blogspot.com/2013/01/tips-to-add-support-library.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:14:57.070

正如 user1861240 所说，正确的答案是： **右键单击您的项目，选择 Android Tools > Add Support Library...**

显然，这为您设置了支持库的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T23:24:00.423

我遇到了同样的错误，但添加支持库对我不起作用。我还尝试了 Project-> Clean 并重新启动 Eclipse。最终它在我将目标 API 更改为 4.4 后工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T09:27:57.517

只需遵循[此处](https://developers.google.com/+/mobile/android/getting-started)所述的内容， 请记住也要遵循项目设置，不要忽略任何步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:57:00.593

尝试运行**Project** -> **Clean**来解决问题。这似乎对一个人有用。

项目会自动引用该库，但也许 Eclipse 忘记了这一点，需要提醒一下。

# android - Android Quiz App - 我应该在哪里放置 sqlite 文件？

> ID：15453951
> 
> 赞同：-2
> 
> 时间：2013-03-16T19:49:58.180
> 
> 标签：android, sqlite

我正在做一个 android Quiz 应用程序...其中包含带有问题和答案的 sqlite 数据库...所以我想从数据库中检索问题/答案...我应该将我的 sqlite 文件放在项目中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:57:53.543

> 我正在做一个 android Quiz 应用程序...其中包含带有问题和答案的 sqlite 数据库...所以我想从数据库中检索问题/答案...我应该将我的 sqlite 文件放在项目中的什么位置？

它取决于更多因素（数据库大小、记录特征、性能要求……）

如果您知道您的数据库不会有点大，那么您可以将.db 文件正常保存到内部存储（assets 文件夹，内部 db 文件夹）中。主要优点是更好的安全性，因为另一方面，如果将 .db 文件放在 SD 卡上，则肯定存在安全问题。

所以这取决于你选择什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:57:08.977

您的 db 文件放在项目的 assets 文件夹中。

如果你想恢复它，你可以这样做：

```
InputStream myInput = myContext.getAssets().open(NAME); 
```

其中*myContext*是应用程序上下文或活动上下文，*NAME*变量是文件名。

# java - JavaFX 2 窗格动态调整大小

> ID：15453959
> 
> 赞同：2
> 
> 时间：2013-03-16T19:50:44.990
> 
> 标签：java, javafx-2, pane

我的界面中有一个窗格。在那个窗格上，我添加了 Shape 对象并拖动它们。当一个形状到达窗格的视觉边界时，我如何使我的窗格更大。作为原型，每当我点击鼠标时，我都会尝试将其放大。Pane 是 ScrollPane 的子（内）。这是我的代码：

```
 paneArea.setOnMouseClicked(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent mouseEvent) {
            System.out.println(paneArea.getWidth()+" "+paneArea.getHeight());
            paneArea.resize(paneArea.getWidth() + 100, paneArea.getHeight() + 100);                
            System.out.println(paneArea.getWidth()+" "+paneArea.getHeight());
        }
    }); 
```

当我单击两次时，我得到以下结果：

```
602.0 574.0
702.0 674.0
602.0 574.0
702.0 674.0 
```

所以窗格基本上会简单地调整大小，然后恢复到原来的大小。在 FXML 上，最大高度和宽度设置为 USE_PREF_SIZE 和 MAX_VALUE。我还尝试在调用调整大小之前增加 maxWidth/height，但没有任何区别。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:09:27.337

我一直在使用错误的方法以及 fxml 选项。这样做的方法是使用 setPrefSize 方法，然后在 fxml 文件中的 USE_PREF 处设置最大大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T06:46:17.973

你的代码是错误的。而不是使用

```
paneArea.resize(paneArea.getWidth() + 100, paneArea.getHeight() + 100); 
```

采用

```
paneArea.setPrefWidth(paneArea.getWidth() + 100) ; 
paneArea.setPrefHeight(paneArea.getHeight)() + 100) ; 
```

# bash - 使用heredoc进行Shell扩展

> ID：15453966
> 
> 赞同：3
> 
> 时间：2013-03-16T19:51:26.360
> 
> 标签：bash

如何在heredoc中对所有​​命令进行子shell扩展？

例如：

```
file=report_$(date +%Y%m%d)
cat <<EOF > $file
    date
    hostname
    echo 'End of Report'
EOF 
```

这样所有的命令都被评估？

我知道

```
file=report_$(date +%Y%m%d)
cat <<EOF > $file
    $(date))
    $(hostname)
    $(echo 'End of Report')
EOF 
```

会工作，但有没有办法默认指定子shell？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T19:56:03.157

您可以使用`sh`(or `bash`) 作为命令而不是`cat`; 这实际上会将其作为 shell 脚本运行：

```
sh <<EOF > $file
    date
    hostname
    echo 'End of Report'
EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:27:04.750

如果你想将所有行扩展为命令，heredoc 是没用的：

```
file="report_$(date +%Y%m%d)"
{
  date
  hostname
  echo 'End of Report'
} >| "$file" 
```

你也可以`1>`这样重定向：

```
file="report_$(date +%Y%m%d)"
exec 1> "$file"
date
hostname
echo 'End of Report' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T19:54:42.757

不是那样，但是：

```
cat << EOF | sh > $file
    date
    hostname
    echo 'End of Report'
EOF 
```

将达到相同的结果。（请注意，这是一个新`sh`命令——`bash`如果需要，可以使用——而不是当前 shell 的子 shell，因此它没有设置相同的变量。）

（编辑：我没有注意到这也是 UUOC：猫的无用用途；请参阅 Explosion Pills 的回答。:-)）

# c# - SimpleMembership WebForms Asp.net 4.0 角色

> ID：15453968
> 
> 赞同：0
> 
> 时间：2013-03-16T19:51:42.563
> 
> 标签：c#, asp.net, .net-4.0, asp.net-membership, membership-provider

我正在尝试找到一种方法来管理现有 WebForms ASP.NET 4.0) 应用程序的角色。这不是 MVC。我无法将现有项目更改为 MVC 或 .NET 4.5，因此请根据我的要求提供解决方案。

我将 SimpleMembership 视为管理角色的一种可能方式，而无需使用我不需要的表安装整个成员资格 (aspnet_regsql.exe)。

这是一个内部网站。用户将通过他们的 Windows 身份进行身份验证，因此*本身*没有登录。大多数用户不会在任何用户数据库中，我想控制角色，以便如果没有专门为他们提供额外的角色，他们仍然可以访问（可能是公共角色，或者简单的无角色）。

对于将在数据库中的用户，我希望能够分配角色（管理员、经理等），以便他们能够更好地访问各种页面和功能。用户可以没有角色（或公共的，如上所述），也可以有一个或多个角色。

那么，有可能吗？我可以为表中的那些用户创建一个基于角色的系统，并让其他人无需登录即可访问网站的某些部分吗？

SQL Server 中有一个现有的用户表。我应该可以使用这个，而不是文本文件/xml/手动的方法。将创建一个管理页面来为用户分配角色并添加用户。

看来我应该可以根据这个使用 SimpleMembership：http: [//blog.osbornm.com/2010/07/21/using-simplemembership-with-asp-net-webpages/](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp-net-webpages/)

虽然它说我需要用一些 MVC 代码添加 _start.cshtml，但只要我不需要将整个站点转换为 MVC 就可以了。

目前，我收到一个错误：

```
The type 'WebMatrix.WebData.WebSecurity' exists in both 'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\WebMatrix.WebData\v4.0_1.0.0.0__31bf3856ad364e35\WebMatrix.WebData.dll' and 'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\WebMatrix.WebData\v4.0_2.0.0.0__31bf3856ad364e35\WebMatrix.WebData.dll' 
```

我认为一旦我解决了这个问题，很可能是 web.config 设置，我应该没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T02:43:23.430

事实证明，要让它工作，我所要做的就是在 web.config 中获取适当的设置

```
<add key="webPages:Version" value="2.0" />
<add key="enableSimpleMembership" value="false" />
<add key="autoFormsAuthentication" value="false" /> 
```

并在 _start.cshtml 文件中，添加代码

```
@{
    WebSecurity.InitializeDatabaseConnection("ConnectionStringNameHere", "Users", "ID", "LanID", false);
} 
```

# css - 布局页脚 100% 宽度和内容直到页脚

> ID：15453972
> 
> 赞同：2
> 
> 时间：2013-03-16T19:52:38.173
> 
> 标签：css, html, layout, sticky-footer

我卡住了，不知道如何解决。我有一个粘页脚，效果很好。但我想要页脚宽度 100%。出于这个原因，我有一个将页脚推到底部的外部 div 和一个居中的内容 div。

Normaly 我为完整的外部 div 设置了背景颜色。这意味着页眉、内容和页脚具有相同的背景颜色。对于每个 div，我可以设置一个覆盖白色（覆盖）的自定义颜色。

因为布局现在的宽度为 100%，所以我无法让内容 div 的背景颜色被推到页脚。

![布局，outer_content 为红色，content 为白色，应该浮动到底部](../Images/01507e0275b55b286945ec78dd3f0705.png)

**我之前的故事有点复杂。我会简短/澄清我的问题。我怎样才能有一个宽度为 100% 的页眉和页脚，内容居中，背景颜色为白色，直到页脚？注意：内容可以扩展或小于 100% 高度。**

这是我使用的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
  <title>Temp</title> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <link rel="stylesheet" type="text/css" href="style.css" />
</head> 
<body>
<div id="outer">
  <div id="outer_header">
    <div id="header">
      <div id="menu_block"></div>
      <div id="image_block"></div>
    </div>
  </div> 
  <div id="outer_content">
    <div id="content"> 
    dafdafdafda
    </div> 
  </div>
  <div id="clearfooter"></div> 
  <div id="outer_footer">Footer - | |- Footer </div> 
</div> 
</body> 
</html> 
```

还有我的 CSS

```
/* mac hide\*/ 
html, body {height:100%} 
/* end hide */ 
body { 
  padding:0; 
  margin:0; 
  text-align:center; /* for ie6 and under */ 
  min-width:1024px;
  background-color: #eee8d8; 
  color: #000000;
} 
#outer { 
  min-height:100%;
  min-width:1024px; 
  width:100%; /* add 2px if borders are not used */ 
  text-align:left; 
  margin:auto; 
  position:relative; 
} 

* html #outer{height:99.9%;} /*For ie as treats height as min-height anyway - also addreeses rounding bug at bottom of screen in IE*/ 
#outer_header { 
  height:280px;
  width:100%;
  float:left; 
  position:relative;
  background-color:#1f4c3f;
}  

#header { 
  height:280px;
  width:1000px;
  margin:auto;
  position:relative;
}

#menu_block {
  width:1000px;
  height:90px;
}

#image_block {
  width:1000px;
  height:190px;
  background-color:#FFFFFF;
}

#outer_content {
    width:100%;
    position:relative;
    float:left;
  background-color:red;
}

#content { 
  width:1000px;
  height:100%;
  position:relative;  
  margin:auto;
  background-color:#FFFFFF;
}

#outer_footer { 
  width:100%; /* add 2px if borders are not used on the #outer div */ 
  clear:both; 
  height:50px; 
  background-color:#1f4c3f;  
  left:0; 
  bottom:0; 
  position: absolute; 
} 
* html #outer_footer {/*only ie gets this style*/ 
  \height:52px;/* for ie5 */ 
  he\ight:50px;/* for ie6 */ 
  margin-bottom:-1px; 
} 
div,p  {margin-top:0}/*clear top margin for mozilla*/ 

#clearfooter {width:100%;height:52px;clear:both} /* to clear footer */ 
```

附言。如果可能，我只想使用 CSS，不使用 javascript

编辑：结果应该是

![正确的布局](../Images/005a38dc807c4a4e5268f2ed15975993.png)

如您所见，图片一有 1 行白色（因为文本在那里结束），但我希望内容填充到粘性页脚...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:00:11.607

特此三种解决方案，具体取决于希望的滚动行为。

1.  没有滚动条[的 JSFiddle 解决方案：](http://jsfiddle.net/NGLN/rs6tu/2/)

    标记：

    ```
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div> 
    ```

    样式表：

    ```
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
    }
    body {
        background: red;
    }
    #header {
        height: 160px;
        background: #1f4c3f;
    }
    #content {
        position: absolute; 
        background: white;
        width: 500px;
        top: 160px;
        bottom: 40px;
        left: 50%;
        margin-left: -250px;
    }
    #footer {
        position: absolute;
        bottom: 0;
        background: #1f4c3f;
        width: 100%;
        height: 40px;
    } 
    ```

2.  具有垂直滚动条和页脚的[JSFiddle 解决方案始终可见：](http://jsfiddle.net/NGLN/rs6tu/6/)

    标记：

    ```
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div> 
    ```

    样式表：

    ```
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
    }
    body {
        background: url('http://i.stack.imgur.com/WcYOv.png') center repeat-y;
    }
    #header {
        height: 160px;
        background: #1f4c3f;
    }
    #content {
        width: 500px;
        margin: 0 auto;
    }
    #footer {
        position: fixed;
        bottom: 0;
        background: #1f4c3f;
        width: 100%;
        height: 40px;
    } 
    ```

3.  带有垂直滚动条和移动页脚的[JSFiddle 解决方案：](http://jsfiddle.net/NGLN/rs6tu/5/)

    标记：

    ```
    <div id="wrap">
        <div id="header"></div>
        <div id="content"></div>
    </div>
    <div id="footer"></div> 
    ```

    样式表：

    ```
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
    }
    #wrap {
        background: url('http://i.stack.imgur.com/WcYOv.png') center repeat-y;
        width: 100%;
        min-height: 100%;
    }
    #header {
        height: 160px;
        background: #1f4c3f;
    }
    #content {
        width: 500px;
        margin: 0 auto;
        padding-bottom: 40px;
    }
    #footer {
        position: relative;
        top: -40px;
        background: #1f4c3f;
        width: 100%;
        height: 40px;
    } 
    ```

# html - 如何使用 ng-click 从数组中删除项目或对象？

> ID：15453979
> 
> 赞同：266
> 
> 时间：2013-03-16T19:53:42.340
> 
> 标签：html, angularjs, edit

我正在尝试编写一个函数，使我能够在单击按钮时删除一个项目，但我认为我对该函数感到困惑 - 我使用`$digest`吗？

HTML & app.js：

```
<ul ng-repeat="bday in bdays">
  <li>
    <span ng-hide="editing" ng-click="editing = true">{{bday.name}} | {{bday.date}}</span>
    <form ng-show="editing" ng-submit="editing = false">
      <label>Name:</label>
      <input type="text" ng-model="bday.name" placeholder="Name" ng-required/>
      <label>Date:</label>
      <input type="date" ng-model="bday.date" placeholder="Date" ng-required/>
      <br/>
      <button class="btn" type="submit">Save</button>
      <a class="btn" ng-click="remove()">Delete</a>
    </form>
  </li>
</ul>

$scope.remove = function(){
  $scope.newBirthday = $scope.$digest();
}; 
```

* * *

## 回答 #1

> 赞同：564
> 
> 时间：2013-03-16T20:34:17.820

要删除项目，您需要将其从数组中删除，并且可以将`bday`项目传递给标记中的删除函数。然后在控制器中查找项目的索引并从数组中删除

```
<a class="btn" ng-click="remove(item)">Delete</a> 
```

然后在控制器中：

```
$scope.remove = function(item) { 
  var index = $scope.bdays.indexOf(item);
  $scope.bdays.splice(index, 1);     
} 
```

Angular 会自动检测`bdays`数组的变化并更新`ng-repeat`

演示：[http ://plnkr.co/edit/ZdShIA?p=preview](http://plnkr.co/edit/ZdShIA?p=preview)

编辑：如果使用服务器进行实时更新将使用您创建的服务 `$resource`来管理阵列更新，同时它会更新服务器

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-08-29T08:17:30.617

这是一个正确的答案：

```
<a class="btn" ng-click="remove($index)">Delete</a>
$scope.remove=function($index){ 
  $scope.bdays.splice($index,1);     
} 
```

在@charlietfl 的回答中。我认为这是错误的，因为您将`$index`其作为参数传递，但您在控制器中使用了愿望。如我错了请纠正我 ：）

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-09-22T15:08:39.297

# 如果您在 ng-repeat 中

你可以使用一个班轮选项

```
 <div ng-repeat="key in keywords"> 
        <button ng-click="keywords.splice($index, 1)">

            {{key.name}}
        </button>
    </div> 
```

`$index`被 angular 用来显示内部数组的当前索引`ng-repeat`

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-12-11T05:43:16.053

在基本情况下使用`$index`效果很好，@charlietfl 的回答很棒。但有时，`$index`还不够。

想象一下，您有一个数组，以两个不同的 ng-repeat 呈现。其中一个 ng-repeat 被过滤为具有真实属性的对象，另一个被过滤为虚假属性。展示了两个不同的过滤数组，它们源自一个原始数组。（或者，如果它有助于可视化：也许您有一个人数组，并且您想要一个 ng-repeat 用于该数组中的女性，另一个用于*同一数组*中的男性。）您的目标：从原始数组，使用来自过滤数组成员的信息。

在每个过滤后的数组中， $index 不会是原始数组中项目的索引。它将是*过滤后的子数组*中的索引。因此，您将无法知道原始`people`数组中的人的索引，您只能知道`women`or`men`子数组中的 $index。尝试使用它来删除，除了你想要的地方，你的项目会从任何地方消失。该怎么办？

如果您足够幸运，使用的数据模型包含每个对象的唯一标识符，那么请使用它而不是 $index，`splice`从主数组中查找对象和它。（在下面使用我的示例，但使用该唯一标识符。）但是，如果您不那么幸运呢？

Angular 实际上用一个名为`$$hashKey`. 您可以在原始数组中搜索`$$hashKey`要删除的项目的匹配项，然后以这种方式摆脱它。

请注意，这`$$hashKey`是一个实现细节，未包含在已发布的 ng-repeat API 中。他们可以随时取消对该属性的支持。但可能不是。:-)

```
$scope.deleteFilteredItem = function(hashKey, sourceArray){
  angular.forEach(sourceArray, function(obj, index){
    // sourceArray is a reference to the original array passed to ng-repeat, 
    // rather than the filtered version. 
    // 1\. compare the target object's hashKey to the current member of the iterable:
    if (obj.$$hashKey === hashKey) {
      // remove the matching item from the array
      sourceArray.splice(index, 1);
      // and exit the loop right away
      return;
    };
  });
} 
```

调用：

```
ng-click="deleteFilteredItem(item.$$hashKey, refToSourceArray)" 
```

* * *

编辑：使用这样的函数，`$$hashKey`而不是特定于模型的属性名称，还具有使该函数可在不同模型和上下文中重用的显着附加优势。为它提供您的数组引用和您的项目引用，它应该可以正常工作。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-01-13T14:37:49.417

我通常用这样的风格写作：

```
<a class="btn" ng-click="remove($index)">Delete</a>

$scope.remove = function(index){
  $scope.[yourArray].splice(index, 1)
}; 
```

希望这会有所帮助您必须在 $scope 和 [yourArray] 之间使用点（。）

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-09-09T15:20:52.457

基于公认的答案，这将与 一起工作`ngRepeat`，`filter`并更好地处理期望：

**控制器：**

```
vm.remove = function(item, array) {
  var index = array.indexOf(item);
  if(index>=0)
    array.splice(index, 1);
} 
```

**看法：**

```
ng-click="vm.remove(item,$scope.bdays)" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-09-11T16:13:27.997

没有控制器的实现。

```
<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<body>

<script>
  var app = angular.module("myShoppingList", []); 
</script>

<div ng-app="myShoppingList"  ng-init="products = ['Milk','Bread','Cheese']">
  <ul>
    <li ng-repeat="x in products track by $index">{{x}}
      <span ng-click="products.splice($index,1)">×</span>
    </li>
  </ul>
  <input ng-model="addItem">
  <button ng-click="products.push(addItem)">Add</button>
</div>

<p>Click the little x to remove an item from the shopping list.</p>

</body>
</html>
```

splice() 方法在数组中添加/删除项目。

```
array.splice(index, howmanyitem(s), item_1, ....., item_n) 
```

**索引**：必需。一个整数，指定在什么位置添加/删除项目，使用负值指定从数组末尾开始的位置。

**howmanyitem(s)**：可选。要删除的项目数。如果设置为 0，则不会删除任何项目。

**item_1, ..., item_n**：可选。要添加到数组中的新项目

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-19T20:11:50.403

我不同意您应该在控制器上调用方法。您应该为任何实际功能使用服务，并且应该为任何功能定义指令以实现可伸缩性和模块化，并分配一个单击事件，其中包含对您注入指令的服务的调用。

因此，例如，在您的 HTML...

```
<a class="btn" ng-remove-birthday="$index">Delete</a> 
```

然后，创建一个指令...

```
angular.module('myApp').directive('ngRemoveBirthday', ['myService', function(myService){
    return function(scope, element, attrs){
        angular.element(element.bind('click', function(){
            myService.removeBirthday(scope.$eval(attrs.ngRemoveBirthday), scope);  
        };       
    };
}]) 
```

然后为您服务...

```
angular.module('myApp').factory('myService', [function(){
    return {
        removeBirthday: function(birthdayIndex, scope){
            scope.bdays.splice(birthdayIndex);
            scope.$apply();
        }
    };
}]); 
```

当您像这样正确编写代码时，您将可以非常轻松地编写未来的更改，而无需重新构建代码。它组织得当，您可以通过使用自定义指令绑定来正确处理自定义点击事件。

例如，如果您的客户说，“嘿，现在让我们让它调用服务器并制作面包，然后弹出一个模式。” 您将能够轻松地访问服务本身，而无需添加或更改任何 HTML 和/或控制器方法代码。如果您在控制器上只有一条线路，您最终需要使用一项服务，以将功能扩展到客户要求的更重的提升。

此外，如果您在其他地方需要另一个“删除”按钮，您现在有一个指令属性（“ng-remove-birthday”），您可以轻松地将其分配给页面上的任何元素。现在这使其模块化和可重用。这在处理 Angular 2.0 的 HEAVY Web 组件范例时会派上用场。2.0 中没有控制器。:)

开发愉快！！！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-27T09:08:04.357

这是另一个答案。我希望它会有所帮助。

```
<a class="btn" ng-click="delete(item)">Delete</a>

$scope.delete(item){
 var index = this.list.indexOf(item);
                this.list.splice(index, 1);   
}

array.splice(start)
array.splice(start, deleteCount)
array.splice(start, deleteCount, item1, item2, ...) 
```

完整源代码在这里
[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-28T06:22:45.823

如果您的项目中有 ID 或任何特定字段，则可以使用 filter()。它的行为类似于 Where()。

```
<a class="btn" ng-click="remove(item)">Delete</a> 
```

在控制器中：

```
$scope.remove = function(item) { 
  $scope.bdays = $scope.bdays.filter(function (element) {
                    return element.ID!=item.ID
                });
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-10T09:59:16.133

```
Pass the id that you want to remove from the array to the given function 
```

来自控制器（功能可以在同一个控制器中，但更喜欢将其保留在服务中）

```
 function removeInfo(id) {
    let item = bdays.filter(function(item) {
      return bdays.id=== id;
    })[0];
    let index = bdays.indexOf(item);
    data.device.splice(indexOfTabDetails, 1);
  } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-15T14:01:56.603

一种简单的内联方法就是添加`bdays.splice($index, 1)`删除按钮。

```
 <ul ng-repeat="bday in bdays">
  <li>
    <span ng-hide="editing" ng-click="editing = true">{{bday.name}} | {{bday.date}}</span>
    <form ng-show="editing" ng-submit="editing = false">
      <label>Name:</label>
      <input type="text" ng-model="bday.name" placeholder="Name" ng-required/>
      <label>Date:</label>
      <input type="date" ng-model="bday.date" placeholder="Date" ng-required/>
      <br/>
      <button class="btn" type="submit">Save</button>
      <a class="btn" ng-click="bdays.splice($index, 1)">Delete</a>
    </form>
  </li>
</ul> 
```

# sip - SIP - 如何实现 Buddy-Search 或 Buddylist-Modification 等功能

> ID：15453994
> 
> 赞同：0
> 
> 时间：2013-03-16T19:54:59.653
> 
> 标签：sip

我目前正在做一个项目，我必须为 sip 开发一个通信系统。该系统由 UserAgent 和一个中央 SystemServer（基础：mobicents）组成，其中包含所有用户信息，并且 UserAgent 可以在其中注册自己。从 Skype 或 icq 等系统已知，我的 UserAgents 也有一个 BuddyList（存储 sip-uri 和其他用户的名称）。

Buddy-Search：要将新用户添加到好友列表中，我想在服务器上实现搜索功能。但我不知道要使用哪个 SIP 消息。在我的 inet-search 中，我读到了一些关于使用单个订阅消息到服务器来实现这一点的模糊想法（例如，事件：buddysearch，正文：searchparams --> 200-Response with Searchresults）。这是实现这样一个功能的正确选择吗？

Buddylist-Modification：我的 SystemServer 的另一个功能是，UserAgent 可以订阅有关其好友的存在信息。这意味着服务器会通知他们好友的状态变化（如在线、离线）。因此，服务器必须始终拥有当前的好友列表数据。我应该如何通知我的服务器有关更改（例如从好友列表中删除用户）？也许有独立通知？（服务器之前在 UA 上的订阅在我看来毫无意义）

如您所见，我对如何正确实现此功能有点不自信。我希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:28:57.990

您的项目正走在正确的轨道`SUBSCRIBE`上`NOTIFY`。

在走自己的路之前，先看看[SIMPLE](http://en.wikipedia.org/wiki/SIMPLE "简单的")。

# linux - 如何过滤掉长度为 8 并以 .com 结尾的文本文件的行？

> ID：15453995
> 
> 赞同：0
> 
> 时间：2013-03-16T19:55:07.690
> 
> 标签：linux, unix, ubuntu, grep

我有一个包含一百万个域名的列表`name.txt`

```
hello.com
abc.com
gogogo.us
goodbye.me
...
... 
```

如何仅通过管道传输包含 8 个字母（包括`.com`）且仅以`.com`to结尾的域名`names_new.txt`？

我正在寻找一个简单的命令，而不是脚本或任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:03:21.963

`grep`是第一个用于模式匹配的工具：

```
egrep -x '[a-z]{4}\.com' name.txt > newname.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:00:54.383

尝试

```
 egrep "^[a-z][a-z][a-z][a-z]\.com$" name.txt > names_new.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:15:10.887

使用 awk。域名被拆 `.`分为多个字段。

第一个字段测试长度为 4，因为`.com`添加了另外 4 个字符。

第二个字段应包含`com`.

当这两个条件都满足时，将打印该行。

```
cat name.txt |awk -F. '((length($1)==4)&&($2=="com")){print;}' > names_new.txt 
```

注意：如果您有子域，该行可能会发现误报，例如： `mail.com.nz`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T03:11:22.220

可能有带有破折号或数字的域名。
-i 强制 egrep 匹配，无论大小写。

```
egrep -i "^[a-z0-9-]{4}\.com$" name.txt > names_new.txt 
```