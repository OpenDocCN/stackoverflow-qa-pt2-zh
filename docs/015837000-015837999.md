# StackOverflow 问答 15837000-15837999

# joomla - 如何以编程方式检测 Joomla 中的用户配置文件更改（事件）？

> ID：15837003
> 
> 赞同：1
> 
> 时间：2013-04-05T14:50:18.393
> 
> 标签：joomla, joomla2.5, joomla-extensions

我们正在为 Joomla 2.5 构建用户同步插件（获取 Joomla 用户并通过 JSON API 调用将他们发送到另一个平台）。这一切都很好，但是一旦复制，Joomla 中配置文件的更新不会反映到外部平台。

我看到有一些事件，例如`onUserAfterSave`and `onUserBeforeSave`，但据我了解，这些事件仅适用于插件而不适用于组件（我们正在构建具有前端和后端的组件）。

所以我的问题是，我们如何以编程方式检测用户以某种方式更改了他的个人资料（姓名、电子邮件或密码）并相应地在我们的组件中执行某些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:30:36.103

您需要创建一个用户配置文件插件。您可以在分发插件时将插件与您的组件一起打包在一个包中。在 Joomla 中，扩展包含 1-2 个组件、一个模块和一个插件是很常见的。这就是 Joomla 在特定扩展中分离特定工作的方式。

关于如何做到这一点的好例子已经在这里：

`/plugins/user/`

这是您的方法签名：

```
/**
 * @param   array       $user       Holds the new user data.
 * @param   boolean     $isnew      True if a new user is stored.
 * @param   boolean     $success    True if user was succesfully stored in the database.
 * @param   string      $msg        Message.
 */
public function onUserAfterSave($user, $isnew, $success, $msg)
{} 
```

基本上在该方法中，您可以做任何您想做的事情，在您的情况下，可能会从您的组件中更新一些表。

# c++ - 有没有办法让编译器在 catch 子句中自动命中语句（断点）

> ID：15837007
> 
> 赞同：1
> 
> 时间：2013-04-05T14:50:29.980
> 
> 标签：c++, visual-studio-2010

目前我必须在我的 catch 子句中设置断点。我想知道是否有一种方法可以使编译器在 catch 子句中自动突出显示某个语句。现在我必须在我的异常处理程序中设置一个断点，以便我的编译器让我知道它已经进入了一个异常处理程序。我正在使用 VS2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:02:17.303

您可以将`__debugbreak();`(comes from `<intrin.h>`) 放在您的`catch`子句中，IDE 将在`__debugbreak();`到达时停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:59:49.103

我不知道有这样的功能。

但是，如果您进入`Debug > Exceptions`菜单，您可以切换异常类型，当它们被抛出时调试器将中断它们。我知道这与他们被捕时不同，但你应该能够`catch`从那里通过几个“步入/结束”步骤来达成声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:53:44.460

您可以添加一个`ASSERT(FALSE)`，这将导致调试器在该行停止以进行调试构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:17:22.703

只是要明确一点：至少据我了解情况，您需要在特定行上设置断点，但前提*是*/如果执行了特定的 catch 子句。如果这就是你想要的，有办法做事，但（据我所知）你可能需要稍微修改你的代码才能让它工作。

我至少会这样做：

1.  创建一个全局变量，例如：`bool exception_caught;`
2.  在相关的 catch 子句中，添加`exception_caught = true;`
3.  使断点有条件`exception_caught`

顺便说一句，我不记得你是如何在 VS 2010 中创建条件断点的。在 2012 中，你可以像往常一样设置断点（例如，使用 F9）然后右键单击出现的红点，然后`condition...`从弹出菜单中选择。在旧版本中，您必须单独打开“断点”窗口（但我记得，它的菜单条目有点难找到）。

# javascript - 检查队列是否为空 Uploadify 3.2

> ID：15837010
> 
> 赞同：0
> 
> 时间：2013-04-05T14:50:31.790
> 
> 标签：javascript, jquery, uploadify

使用 Uploadify 3.2，有没有办法检查上传队列中是否存在项目？我在网上搜索的大多数方法似乎不再适用于最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:12:26.573

好的，我设法自己使用 jquery 解决了这个问题。我只是计算了队列的子节点数量，并使用该数字来确定项目是否已上传到队列中。

我的代码最终类似于这个......

```
if ($("#upload-queue > div").size() == 0) {
    // the queue is empty
} 
```

# javascript - 引用对象 Web SQL JavaScript

> ID：15837011
> 
> 赞同：1
> 
> 时间：2013-04-05T14:50:38.877
> 
> 标签：javascript, html, cordova, local-storage, web-sql

检查我的代码：

```
function callQuery(){
  db.transaction(function querySum(tx){
    tx.executeSql('SELECT SUM (entry) FROM ENTRIES',[], getNum, errorCB);
  });
}

function getNum(tx, results){
  len = results.rows.length;        
  for(var i=0; i<len; i++){
    items = results.rows.item(i);

    console.log(items);
    document.querySelector('#sum').innerHTML += items;
  }
} 
```

输出是：`Object {SUM (entry): 459}`并且`innerHTML`是`[object Object]`。

我怎样才能引用它？我是否必须将 SUM 存储在另一个表中才能引用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:40:36.903

你可以这样命名：

```
tx.executeSql('SELECT SUM(entry) AS total FROM ENTRIES',[], getNum, errorCB); 
```

因此，您将拥有以后可以使用的**总数。**

# git - Github 错误：src refspec BRANCHNAME 不匹配任何

> ID：15837012
> 
> 赞同：1
> 
> 时间：2013-04-05T14:50:42.397
> 
> 标签：git, shell, ubuntu, github, terminal

我在 GitHub 上创建了一个 repo。从网站创建了一个新分支（名为“anythingslider”）。然后：

```
cd /home/multiformeingegno
git clone git@github.com:multiformeingegno/cdnjs.git
Enter passphrase for key '/root/.ssh/id_rsa': (done) 
```

我在 /home/multiformeingegno/cdnjs 上进行了我需要做的更改然后我想将我的更改推送到任何滑块（而不是掌握）。

```
cd /home/multiformeingegno/cdnjs git add ajax/libs/anythingslider/*
git commit -m "Updated AnythingSlider to reflect original dir structure and added missing default.png"
git push origin anythingslider
Enter passphrase for key '/root/.ssh/id_rsa': (done) 
```

但我得到一个：

```
error: src refspec anythingslider does not match any.
error: failed to push some refs to 'git@github.com:multiformeingegno/cdnjs.git' 
```

有什么问题？我尝试拉动以确保我是最新的……没有运气。

*编辑：*如果我做一个 git remote show origin，这就是我得到的：

```
* remote origin
  Fetch URL: git@github.com:multiformeingegno/cdnjs.git
  Push  URL: git@github.com:multiformeingegno/cdnjs.git
  HEAD branch (remote HEAD is ambiguous, may be one of the following):
    anythingslider
    master
  Remote branches:
    anythingslider tracked
    master         tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (fast-forwardable) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:39:10.623

过去几天，Github 实际上一直在断断续续地宕机。[https://status.github.com/messages](https://status.github.com/messages)

每当您在连接 github 的推送或拉取时遇到问题，请检查[https://status.github.com/](https://status.github.com/)以查看它们是否有问题。

# apache - Apache HTTP 客户端 javax.net.ssl.SSLPeerUnverifiedException：对等体未通过身份验证

> ID：15837015
> 
> 赞同：2
> 
> 时间：2013-04-05T14:50:44.537
> 
> 标签：apache, tomcat, ssl, httpclient, ssl-certificate

我们正在使用 tomcat 和 jersey 开发应用程序。
在这个 web 应用程序中，我们需要`https Website`用 a连接到 a `valid`，而不是 expired `certificate`。如果我通过我的 chrome 浏览器在本地连接到这个网站，一切正常！不幸的是，我们的 webapp 的 tomcat 服务器抛出了一个异常。我们正在使用`Apache HttpClient (4.0)`连接到 https 站点：

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:371)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:126)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:645)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:480)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784) 
```

服务器证书绝对有效且来自`thawte`. 三种不同的在线工具成功验证了证书。
`Openssl`也有一个问题，向我展示了三个证书，但抛出了一个简单的错误：

```
Verify return code: 20 (unable to get local issuer certificate) 
```

openssl 的问题似乎是它使用了错误的路径`/usr/lib/ssl`而不是`/etc/ssl/certs`. 如果我使用指向正确路径的 CApath 参数，openssl 工作正常，所以这可能是 httpClient 的问题吗？

所以我们默认客户端的代码非常简单：

```
 client = new DefaultHttpClient();
    response = client.execute(url); //this throws the exception
    EntityUtils.consume(response.getEntity()); 
```

通过实现自定义 TrustedManager 来允许任何证书不是一个选项！我进一步读到，某些 CA 不是 JDK/JRE 的一部分，因此它的证书应该手动导入`keystore`或使用自定义证书，但是 thawte 是一个众所周知的 CA，它不应该在默认情况下工作吗？

**编辑**

我确实在 catalina.sh 中设置了 javax.debug 属性，以便获得有关该问题的更多信息：

```
http-bio-8080-exec-1, handling exception: javax.net.ssl.SSLHandshakeException: 
sun.security.validator.ValidatorException: PKIX path validation failed: 
java.security.cert.CertPathValidatorException: basic constraints check failed: 
pathLenConstraint violated - this cert must be the last cert in the certification path 
```

我将不胜感激任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:19:21.247

好的，我得到它的工作！尽管 thawte 是一个众所周知的 CA，但 Java SSL 似乎确实存在一些问题。通过以下方式下载 ssl 证书后`openssl`：

```
echo |\
openssl s_client -connect ${REMHOST}:${REMPORT} 2>&1 |\
sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' 
```

并将其保存到 pem 文件中，我将手动导入到 java 密钥库中：

```
keytool -import -alias myAlias -file theCert.pem -keystore lib/security/cacerts 
```

我不知道为什么 java ssl 无法正确验证解冻证书。

列出密钥库向我展示了标准密钥库中有 7 个 thawte 受信任的证书，但奇怪的是它直到我手动导入 pem 文件才起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:17:16.087

我正在尝试了解您的设置。你有一个 SSL 证书（由 Thwate 颁发），安装在 tomcat 中，你可以使用 IE 或 Firefox 或 Chrome 通过 SSL 访问你的网站。

但是当您尝试使用 HttpClient 访问它时，您会收到上述错误？

那是对的吗 ？

该错误清楚地表明您的客户端不信任 CA。但是如果证书是由 Thwate 签名的（并且安装正确并且可以通过 IE/Firefox 等访问），那么它应该可以正常工作。

# unit-testing - 使用RequireJS（和Jasmine / Sinon）时如何存根在另一个视图渲染方法中实例化的主干视图

> ID：15837017
> 
> 赞同：4
> 
> 时间：2013-04-05T14:50:48.067
> 
> 标签：unit-testing, backbone.js, requirejs, jasmine, sinon

我正在尝试使用 Jasmine 和 Sion 编写单元测试，但是在使用 RequireJs 加载模块时我很难找到以下等效项：

```
sinon.stub(window, "MyItemView"); 
```

使用 RequireJs 时，我无法以这种方式存根，因为 MyItemView 未附加到窗口。

以下是我需要存根 MyItemView 的示例：

```
var MyView = Backbone.View.extend({
el: '#myElement',
initialize : function() {
    var that = this;
    this.collection.fetch({
        success : function() {
            that.render();
        }
    });
},

render : function() {
    this.collection.each(this.renderItem);
}

renderItem: function(model){
        var myItemView = new MyItemView({model: model});
        $('#myElement').append(myItemView.render().el);
    },

... 
```

现在，使用 Jasmine 我可以测试 innerHtml 是否包含预期的 HTML：

```
it('View should contain correct Html', function(){
            var collectionFetchStub = sinon.stub(this.myCollection, 'fetch').yieldsTo('success', this.myCollection);
            this.view = new MyView({collection: this.myCollection});
            expect(this.view.el.innerHTML).toContain('<li><a href=""> 1 : test </a></li>');

            // Remove Stubs
            collectionFetchStub.restore();
        }); 
```

但是，此测试依赖于 MyItemView 的呈现，这对于单元测试来说并不理想。这个问题的最佳解决方案是什么？我是 javascript 的新手，对此的解决方案似乎很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:39:37.027

看看[这个](https://stackoverflow.com/questions/11439540/how-can-i-mock-dependencies-for-unit-testing-in-requirejs/11695463#11695463)关于如何使用 requireJS 存根依赖项的 SO。有一些解决方案。像 testrJs、squireJs 或我自己的小解决方案。主要思想是用你的 spy/stub/mock 覆盖 requireJs 依赖，这样你就可以只测试模块。

因此，在您的情况下，您可以像这样对 MyItemView 存根：

```
var el = $("<div>test</div>")
var MyItemView = sinon.stub().returns({render: sinon.stub().returns(el)}) 
```

然后你必须将 MyItemView 存根注入你的 require 上下文中，你可以测试测试 div 是否附加到`$('#myElement')`. 这并不理想，因为所有 DOM 的东西，但它会工作。更好的方法是不要在主干视图之外渲染一些东西。因为然后您可以将模拟注入`el`视图并测试是否调用了模拟的附加方法。

# jquery - WordPress 中带有 jQ uery 的 AJAX：AJAX 调用未将属性值传递给 PHP 函数

> ID：15837018
> 
> 赞同：1
> 
> 时间：2013-04-05T14:50:50.103
> 
> 标签：jquery, ajax, wordpress, forms

所以我正在尝试构建一个非常简单的东西——一个具有州和区域的表单，当你选择一个州时，它会填充区域列表。我的表单有两个菜单，#select-region（状态）和#select-area。这是我的 .js 文件中包含的 jQuery 代码：

```
jQuery(document).ready(function() {
    jQuery("#select-region").change(function(){
    //alert(jQuery("#select-region").val());
    regionID = jQuery("#select-region").val();
    jQuery.ajax({
            type: 'POST',
            url: 'http://dev.sitename.com/wp-admin/admin-ajax.php',
            data: {
                action: 'get_area_menu',
                region_id: regionID,
            },
            success: function(data, textStatus, XMLHttpRequest){
                jQuery("#select-area").html('');
                jQuery("#select-area").append(data);
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                alert(errorThrown);
            }
        });
     });
}); 
```

'get_area_menu()' 函数在我的functions.php 文件中。这是代码：

```
function get_area_menu($region_id){
    $areas = get_areas($region_id);

    $menu_output = "<option>" . count($areas) . "</option>";
    foreach($areas as $area) {
        $menu_output = $menu_output . "<option value=" . $area['area_id'] . ">" . $area['name'] . "</option>";
    }
    die($menu_output);
}
add_action('wp_ajax_get_area_menu', 'get_area_menu');
add_action('wp_ajax_nopriv_get_area_menu', 'get_area_menu'); 
```

`

现在，我已经验证了在将 region_id 传递给它时，上述函数中调用的 'get_areas()' 函数工作正常，但由于某种原因，region_id 变量没有从 AJAX 传递到 get_area_menu()称呼。FWIW，我已将脚本排入队列并将其本地化（尽管我仍然不知道这实际上意味着什么），并在 functions.php 顶部附近使用此代码：

```
wp_enqueue_script('jquery');
wp_enqueue_script('sitename', get_template_directory_uri() . '/scripts/sitename.js');
wp_localize_script( 'sitename', get_template_directory_uri() . '/scripts/sitename.js', $params); 
```

伙计们，我已经无计可施了。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:28:46.330

我唯一能看到的是在你的`get_area_menu`函数中改变这一行

```
$areas = get_areas(isset($_POST['region_id']) ? $_POST['region_id'] : $region_id); 
```

# zeromq - ZMQ 是否公开任何内部日志记录？如果是这样，你如何使用它？

> ID：15837022
> 
> 赞同：7
> 
> 时间：2013-04-05T14:51:07.843
> 
> 标签：zeromq

我在一些地方找到了 ZMQ 的一些内部日志记录功能的参考资料。我认为可能存在的功能是能够连接到 inproc 或 ipc SUB 套接字中的一个或两个，并侦听提供有关 ZMQ 内部状态信息的消息。这在调试分布式应用程序时非常有用。例如，如果消息丢失/被丢弃，它可能会阐明它们被丢弃的*原因。*

最明显的提及是在这里： http: [//lists.zeromq.org/pipermail/zeromq-dev/2010-September/005724.html](http://lists.zeromq.org/pipermail/zeromq-dev/2010-September/005724.html)，但也在这里提到：http: [//lists.zeromq.org/ pipermail/zeromq-dev/2011-April/010830.html](http://lists.zeromq.org/pipermail/zeromq-dev/2011-April/010830.html)。但是，我还没有找到有关此功能的任何文档。

某种日志记录功能真的可用吗？如果是这样，它是如何使用的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:09:05.737

一些浏览 git 历史的人最终回答了我的问题。简短的回答是，实现了 ZMQ 将日志消息传输到外部世界的一种方式，但它从未被代码库的其余部分用于实际发送日志消息。一段时间后它被删除，因为没有人使用它。

最初使用 inproc 套接字添加它的提交：

*   [https://github.com/zeromq/libzmq/commit/ce0972dca3982538fd123b61fbae3928fad6d1e7](https://github.com/zeromq/libzmq/commit/ce0972dca3982538fd123b61fbae3928fad6d1e7)

添加了新的“sys”套接字类型专门用于支持日志记录的提交：

*   [https://github.com/zeromq/libzmq/commit/651c1adc80ddc724877f2ebedf07d18e21e363f6](https://github.com/zeromq/libzmq/commit/651c1adc80ddc724877f2ebedf07d18e21e363f6)

JIRA 问题、拉取请求和提交以删除该功能：

*   [https://zeromq.jira.com/browse/LIBZMQ-336](https://zeromq.jira.com/browse/LIBZMQ-336)
*   [https://github.com/zeromq/libzmq/pull/277](https://github.com/zeromq/libzmq/pull/277)
*   [https://github.com/zeromq/libzmq/commit/5973da486696aca389dab0f558c5ef514470bcd2](https://github.com/zeromq/libzmq/commit/5973da486696aca389dab0f558c5ef514470bcd2)

# mysql - 从 SQL Server 到 MySQL 的查询转换

> ID：15837023
> 
> 赞同：-4
> 
> 时间：2013-04-05T14:51:08.440
> 
> 标签：mysql, sql-server

我正在将我们的项目数据库从 SQL Server 转换为 MySQL，数据库转换已经完成。但是在执行一些查询时，我遇到了一些错误。

我正在使用 ColdFusion 8、MySQL 5。

这是一个例子：

```
SELECT i.ID, s.Name, i.OccurredOn, i.MinorProblemID, 
  i.MajorProblemID, i.Problem, i.Motivation, i.Strategy1, 
  i.Strategy2, i.Strategy3, i.Decision, 
  COALESCE(CAST(s.Grade as int),-5) as Grade, i.LocationID, 
  l.Display as StartMonth, l.OrderBy as StartMonthOrder, 
  i.StudentID, u.ID as SourceID, 
  replace(u.FirstName+' '+u.LastName,'''','`') as Source,
  replace(replace(replace(replace(replace(replace(replace( 
      ltrim(replace(CAST(OccurredOn as varchar(100)),CAST(OccurredOn 
      as varchar(12)),'')),':1',':0'),':2',':0'),':3',':0'),':4',':0'),
      ':5',':0'),':05',':00'),':00',':00 ') as StartHour 
FROM ViewIncidents i 
JOIN Students s ON i.StudentID = s.ID 
LEFT OUTER JOIN Users u ON i.UserID = u.ID 
LEFT OUTER JOIN Lookup l ON l.LookupCode = 'SchoolMonths' 
  AND l.Value = CAST(OccurredOn as varchar(3)) 
WHERE i.OccurredOn > '7/1/2012' 
AND i.OccurredOn >= '7/1/2012' 
ORDER BY i.OccurredOn DESC 
```

**它在 SQL Server 中运行良好，但在 MySQL 中失败：**

> 执行数据库查询时出错。
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'int)、-5) 附近使用正确的语法作为 Grade、i.LocationID、l.Display 作为 StartMonth、l.OrderBy as Star'

请帮助我将 db 从 mssql 迁移到 mysql 以及更改查询的最简单方法。

谢谢，

普拉塔梅什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:54:08.157

mysql中的连接是通过使用完成的`CONCAT()`

```
replace(CONCAT(u.FirstName, ' ', u.LastName), '''', '`') AS Source 
```

铸造而不是`INT`使用`SIGNED`（*或 UNSIGNED*）时

```
COALESCE(CAST(s.Grade AS SIGNED), - 5) AS Grade, 
```

而不是`VARCHAR`使用`CHAR`

```
CAST(OccurredOn AS CHAR(100)) 
```

除了强制转换和连接之外，所有其他都很好。

# javascript - 使用 emulatejson 的骨干网没有将模型作为参数

> ID：15837028
> 
> 赞同：3
> 
> 时间：2013-04-05T14:51:22.820
> 
> 标签：javascript, backbone.js, underscore.js

我有一个模型，它是一种“动作”，当用户单击按钮时发生，用于设置和删除事件。事件本身是另一个模型和另一个集合，所以从技术上讲，我可以将这个请求发送到 API，甚至不需要它是一个模型，因为我可以在事件列表发生变化时独立更新它。无论如何，这不会解决我将数据发送到服务器的问题。

**我的主要问题：**

当我使用 emulateJSON = true 确保 POST 作为 application/x-www-form-urlencoded 类型发送时，我的所有数据都包装在模型参数中，如下所示：

```
model:{    
"eventid":"3",
"eventuniqueid":"abasdfasfafd",
"type":"Birthday",
"name":"Add"} 
```

我想要的是将它们中的每一个都作为表单参数，如下所示：

```
eventid:"3",
eventuniqueid:"abasdfasfafd",
type:"Birthday",
name:"Add" 
```

这很容易吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:34:45.373

容易地？不，您必须重新定义[Model#sync 方法](http://backbonejs.org/backbone.js)的行为（该函数在 Backbone.sync 中定义）。没有参数允许您自定义它。

你必须改变那部分：

```
// For older servers, emulate JSON by encoding the request into an HTML-form.
if (options.emulateJSON) {
  params.contentType = 'application/x-www-form-urlencoded';
  params.data = params.data ? {model: params.data} : {};
} 
```

通过删除我要说的最后一行，params.data 在之前定义：

```
if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
  params.contentType = 'application/json';
  params.data = JSON.stringify(options.attrs || model.toJSON(options));
} 
```

**编辑：**
事实上，通过在保存时以您喜欢的方式传递数据，您应该没问题（您将拥有数据和 Backbone 的模型参数）。

```
myModel.save({}, {data: myModel.toJSON()}); 
```

# c# - 通过将文件传递给 .exe 来打开文件

> ID：15837031
> 
> 赞同：1
> 
> 时间：2013-04-05T14:51:32.013
> 
> 标签：c#

我想将音频和视频文件添加到播放器的播放列表中。

这是有效的。

```
for (int count = 0; count < myFiles.Length; count++)
{
   process.start(myFiles[count]);
} 
```

但我想用“正确”的播放器打开文件，即使它不是默认的。

所以我尝试了这个版本。

```
for (int count = 0; count < myFiles.Length; count++)
{
  process.start("targetApp.exe",myFiles[count]);
} 
```

问题是播放器开始“计数”实例，并且每个实例在播放列表中都有一个文件。

几个月前，我看到了一个示例，该示例显示了如何通过将文件拖放到 exe 文件来打开文件

这将完成这项工作。因为如果我在资源管理器中手动执行此操作，它会起作用。但是再也找不到这个例子了。我记得它是由 dodragdrop 完成的。

* * *

//编辑//（感谢您的所有回答）

我想让它动态化。这样你就可以选择播放器了。但这似乎是`process.start()`不可能的。

这很奇怪！我现在测试了三个具有相同偏好的玩家。

*   只允许一个实例 = @1
*   允许多个实例 = @m

*   MPClassic：@1 启动仍然“计数”实例（每个实例一个文件）

*   PotPlayer: @1 如果已经在运行 - 没有/如果关闭 - 只有第一个文件
*   KMPlayer: @1 如果已经运行 - URL-Error?? / 如果关闭 - 将所有文件添加到一个实例

*   MPClassic：@m 启动“计数”实例（每个实例一个文件）

*   PotPlayer：@m 启动“计数”实例（每个实例一个文件）
*   KMPlayer：@m 启动“计数”实例（每个实例一个文件）

唯一可以在任何地方使用的方法是当我手动将所有文件拖放到 exe 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:54:42.627

您只需要将的每个元素传递`myFiles`给应用程序。

```
var str = "";
for(int count = 0; count < myFiles.Length; count++)
{
   str += " " + myFiles[count];
}

process.start("targetApp.exe", str); 
```

您需要解决的格式可能会出现一些问题`str`，您还需要确保每个文件都有自己的包含引号，以确保它作为参数正确传递，但这应该就足够了。

示例：[如何将多个参数传递给 C# .net 中新创建的进程？](https://stackoverflow.com/questions/3464289/how-to-pass-multiple-arguments-to-a-newly-created-process-in-c-sharp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:55:26.973

我认为您必须有一个参数值来设置或指定，以便将文件添加到唯一的播放列表中。

你能详细说明你想使用哪个应用程序吗？

# wpf - WPF：单击按钮并打开新窗口不同的选项

> ID：15837036
> 
> 赞同：8
> 
> 时间：2013-04-05T14:51:50.153
> 
> 标签：wpf, button, click, window

我想制作一个应用程序，我可以在其中单击一个按钮并出现一个新窗口，其中有新的选项/按钮可用。单击按钮后，我已经设法创建了一个新窗口 win2：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        var win2 = new Window();                   
        win2.Show();
        this.Close();
    } 
```

现在我如何编辑新窗口。假设我想制作新按钮（命名为：蓝色、绿色……），用户可以在其中选择背景颜色。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T15:29:31.497

当你想创建一个新的 Window 时，你不能直接使用 Window 类，因为它是一个模板。

将新窗口添加到您的项目：

右键单击您的项目 --> 添加 --> 新元素 --> 窗口。请随意命名，我将使用默认值（Window1）。

现在您可以像修改原始窗口一样修改此窗口。添加您喜欢的任何 UI 元素并根据您的需要对其进行编码。

要显示新窗口：

```
Window1 secondWindow = new Window1();
secondWindow.Show(); 
```

# string - 选择字符串中的一个字母

> ID：15837038
> 
> 赞同：1
> 
> 时间：2013-04-05T14:51:54.080
> 
> 标签：string, character, ada

我需要在 Ada 中创建一个哈希函数，它接受一个字符串并返回一个整数。到目前为止我所做的是：

```
function hash(Word: unbounded string) return Integer is
    h := 5381
    c := (first charater of "Word")
begin
    while c /= (end of "Word") loop
         h := h*33 + c;
         c := (next character of "Word");
    end while;
return h mod 20;
end hash; 
```

我不知道如何在 Ada 中选择一个字符，怎么说“我想要单词“word”的第三个字符，即 r。

谢谢你的帮助，

T。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:01:38.827

查看[Ada.Strings.Unbounded](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-4-5.html)包提供的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:24:48.403

As Marc has said, you will need to use [Ada.Strings.Unbounded](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-4-5.html) to get at the contents of `Word`.

There are two other problems you need to address:

*   In Ada, there's no terminating character in an `Unbounded_String` (or in a `String`, come to that). Instead, write the loop as `for J in 1 .. (length of Word) loop`.
*   Once you've extracted the `J`'th character, it's still a `Character` and you can't add it to `h` (I assume `h` is integral). `Character'Pos (Ch)` returns the numeric equivalent of the character, and that you *can* add.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:25:25.570

```
function hash(Word: Ada.Strings.Unbounded.Unbounded_String) return Integer is
-- First, because there's no manipulation of the string's
-- contents, doing the work on an unbounded-string is
-- rather pointless... so let's do our work on a regular --' fix for formatting
-- [static-length] string.
Working : String := Ada.Strings.Unbounded.To_String(Word);
-- Second, you need types in your declarations.
h : Integer := 5381;
c : Character := 'e'; --(first charater of "Word");
begin
-- Why use a 'while' loop here? Also, what if the 'word' is
-- abracadabra, in that case c [the first letter] is the 
-- same as the last letter... I suspect you want an index.

  for Index in Working'Range loop -- Was: while c /= EOW loop --'
    declare
    -- This is where that 'c' should actually be.
    This  : Character renames Working(Index);
    -- Also, in Ada characters are NOT an integer.
    Value : constant Integer := Character'Pos( This ); --'
    begin
    h := h*33 + value; -- PS: why 33? That should be commented.
    -- We don't need the following line at all anymore. --'
    --c := (next character of "Word");
    end;        
  end loop;
return h mod 20;
end hash; 
```

当然，这也可以重写以利用 Ada 2012 中的新循环结构。

```
function hash_2012(Word: Ada.Strings.Unbounded.Unbounded_String) return Integer is
    -- Default should be explained.
    Default : Constant Integer := 5381;
    Use Ada.Strings.Unbounded;
begin
    -- Using Ada 2005's extended return, because it's a bit cleaner.
    Return Result : Integer:= Default do
        For Ch of To_String(Word) loop
            Result:= Result * 33 + Character'Pos(Ch); --'
        end loop;

        Result:= Result mod 20;
    End return;
end hash_2012; 
```

...我不得不问，格式化程序发生了什么？这太可怕了。

# python - 如何从熊猫中提取列表？

> ID：15837039
> 
> 赞同：3
> 
> 时间：2013-04-05T14:52:00.820
> 
> 标签：python, pandas, data-analysis

我想提取并返回 pandas 中对象的内容、值。

例如我有...

```
>>> xx[xx['Business']=="1"]['Label']
3     Sloan School of Management
22                      Business
46       Business Administration 
```

我只想要标签列表，没有索引，没有熊猫对象，没有数组。如何仅提取数据以返回表单列表...

```
["Sloan School of Management", "Business", "Business Administration"] 
```

尝试`xx[xx['Business']=="1"]['Label'].values`产生了一个数组：

```
array([Sloan School of Management, Business, Business Administration,
       Professional Development, Business & Management], dtype=object) 
```

对于我正在尝试做的事情，必须有一个内置且相当常见的命令，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:01:19.450

```
xx[xx['Business']=="1"]['Label'].tolist() 
```

在相关说明中，我发现 IPython 的选项卡完成在我的工作流程中非常宝贵，因为它有助于列出类的所有功能。就个人而言，值得努力安装/配置

# .net - 在富文本框中写入新行。用vb

> ID：15837041
> 
> 赞同：1
> 
> 时间：2013-04-05T14:52:16.010
> 
> 标签：.net, vb.net, split, richtextbox

嗨，伙计们，我想知道如何在富文本框中的新行中写下短语中的每个单词让我们说短语是这样的“返回一个字符串数组，其中包含在此实例中分隔的子字符串”

我正在使用的代码是这个

```
Dim words As String = TextBox1.Text
    Dim split As String() = words.Split(New [Char]() {" "c, CChar(vbTab)})

    For Each s As String In split
        If s.Trim() <> "" Then
            RichTextBox1.Text = (s)
        End If
    Next s 
```

但是有了这个，它只写了句子的最后一个词。我想要的是在richtextbox的新行中写下所有的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:04:21.837

我喜欢使用`vbCrLf`常量：

```
RichTextBox1.Text = TextBox1.Text.Replace(" ", vbCrLf).Replace(vbTab, vbCrLf) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:57:40.407

```
Dim words As String = TextBox1.Text
words.Replace(" ", ControlChars.Lf)
RichTextBox1.Text = words 
```

您只需要替换`" "`为`ControlChars.Lf`aka`New Line Character`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:59:39.803

您可以使用 vbCrLf 常量：

```
 For Each s As String In split
        If s.Trim() <> "" Then
            RichTextBox1.Text = (s) + vbCrLf
        End If
    Next s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:00:15.767

你的代码很好，除了一件事。您每次都将 RichTextBox 设置为字符串，因此它会不断覆盖。你需要串联...

```
Dim words As String = TextBox1.Text
Dim split As String() = words.Split(New [Char]() {" "c, CChar(vbTab)})

For Each s As String In split
    If s.Trim() <> "" Then
        RichTextBox1.Text &= (s)
    End If
Next s 
```

请注意，在写入 RTB 的行上添加了“&”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-09T07:30:17.423

要添加新行，最好的选择是：

```
RichTextBoxResult.AppendText(Environment.NewLine) 
```

# python - 将参数作为字符串传递给 zip()，避免使用 exec()

> ID：15837044
> 
> 赞同：1
> 
> 时间：2013-04-05T14:52:19.597
> 
> 标签：python, python-2.7

我有几个列表，例如 A、B、C、D、E，我想根据用户输入以各种方式使用 zip() 组合它们。

```
output_list = zip(A,C,D)
output_list = zip(A,D,E,B)
output_list = zip(C,D) 
```

我需要将参数作为字符串传递，我相信这可能可以使用 getattr() 来完成，例如：

```
my_arguments = 'A,C,D' #string
output_list = getattr(zip, my_arguments) 
```

我收到错误

```
'builtin_function_or_method' object has no attribute 'raw,dd,utm' 
```

我在吠叫正确的树吗？（我不想使用 exec()）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:56:27.167

类似的东西`zip(*[locals()[x] for x in my_arguments.split(',')])`可能会起作用。

如果变量是在全局命名空间中定义的，则可能替换`locals`为。`globals`

如果您知道您只是要处理`A`, `B`, `C`...，您可以提前将它们打包到 dict 中：

```
namespace = {'A':A,
             'B':B,
             'C':C,
            }
zip_args = [namespace[x.strip()] for x in my_arguments.split(',')]
output = zip(*zip_args) 
```

这实际上只是我在上面所说的可以做的更明确的版本（它使用`locals()`字典作为命名空间映射）。由于这是最明确的版本，所以我会使用它……那么您不必担心用户会以某种方式包含`output`他们不应该包含的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:56:59.913

你可以这样做：

```
def zipper(args):
    A = [1, 2]
    B = [3, 4]
    C = [5, 6]

    lists = locals()
    return zip(*map(lambda var: lists[var], args.split(',')))

print zipper('A,B')
print zipper('B,C') 
```

但是您可能不应该将这些列表作为单独的变量。字典可能更干净：

```
lists = {
   'A': [...],
   'B': [...]
} 
```

你仍然会使用

```
zip(*map(lambda var: lists[var], my_arguments.split(','))) 
```

或者

```
zip(*[lists[var] for var in my_arguments.split(',')]) 
```

尽管。

# php - Codeigniter - 静态页面教程不起作用

> ID：15837047
> 
> 赞同：0
> 
> 时间：2013-04-05T14:52:27.897
> 
> 标签：php, codeigniter, static, routes

我有以下文件：

路由.php

```
$route['default_controller'] = "first";
$route['404_override'] = '';
$route['page/(:any)'] = 'page/view/$1'; 
```

页面.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Page extends CI_Controller {

    public function index() {       
        $this->load->view('first');
    }

    public function view($page = 'first') {

        if ( ! file_exists('application/views/pages/'.$page.'.php'))
            // Whoops, we don't have a page for that!
            show_404()
        }
        $this->load->view('pages/'.$page);
    }
}
?> 
```

impressum.php（在视图/页面/impressum.php 中）

```
<p>Hello</p> 
```

现在，当我加载[http://xxxx.de/page/impressum](http://xxxx.de/page/impressum)时，它只显示一个空白页面。当我加载 www.xxxx.de 时，它​​会显示“第一”页/默认页。
当我尝试加载时，它甚至没有加载“第一”页：www.xxx.de/page/

只是不知道我哪里有错误/错误。

我的文件夹结构是：
[http ://d.pr/i/vYgw](http://d.pr/i/vYgw)

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:03:22.303

当您在 route.php 文件中传递任何内容时，您需要在页面控制器的视图方法中检查 $page

```
$route['page/(:any)'] = 'page/view/$1'; 
```

www.xxx.de/page/ 将传递一个空字符串或变量来查看方法，您可以像这样检查它

```
if(!strlen($page)){
  $page = "first";
} 
```

使用 uri 类获取页面的更好方法

```
public function view() {
        $page = $this->uri->segment(2, 'first');

        if ( ! file_exists('application/views/pages/'.$page.'.php')){
            // Whoops, we don't have a page for that!
            show_404()
        }
        $this->load->view('pages/'.$page);
    } 
```

如果没有找到段，它将作为默认值首先通过

# android - Android Host : 连接大容量 USB 设备

> ID：15837051
> 
> 赞同：5
> 
> 时间：2013-04-05T14:52:32.003
> 
> 标签：android, usb, host

我目前正在尝试开发一个访问 USB 设备上的 xml 文件的应用程序。我已阅读有关 Android USB 主机的 Google 文档。现在我可以检测到我的 USB 设备，发现它的规格（如 PID/VID），但我无法访问 USB 设备的文件 :(

这是我寻找设备的活动代码：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_visu);

  affichage = (TextView) findViewById(R.id.afficher);
  context = VisuActivity.this.getApplicationContext();
  UsbManager manager = (UsbManager) context.getSystemService(Context.USB_SERVICE);
  HashMap<String, UsbDevice> deviceList = manager.getDeviceList();

  Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();

  if(deviceList.size()==1){
      while(deviceIterator.hasNext()){
             device = deviceIterator.next();

      }

      UsbInterface mUsbInterface = device.getInterface(0);
      UsbEndpoint endpoint = mUsbInterface.getEndpoint(0);

      UsbDeviceConnection connection = manager.openDevice(device);

   }
}
  /* What To Do Now ???? */ 
```

我试图在互联网上找到一些例子，但我现在迷路了！:(

任何人都知道如何在 USB 设备上读取（并最终写入）文件？我听说有要遵循的大容量存储协议，但我没有找到或理解它！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-27T18:52:40.017

监听意图过滤器

```
 <intent-filter>
                <action android:name="android.intent.action.MEDIA_MOUNTED" />
                <action android:name="android.intent.action.MEDIA_UNMOUNTED" />

                <data android:scheme="file" />
 </intent-filter> 
```

上面的过滤器不会显示 USB 文件已挂载，但您会收到通知，因为一些大容量存储已挂载，但我想在连接 USB 接收器后，您几乎可以确定已安装的设备是 USB 大容量存储

因此，当安装 USB 大容量存储时，您会收到通知

```
public void onReceive(Context context, Intent intent) {
    if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
        File file=new File("/storage/usbdisk");
                File[] listFiles = file.listFiles();
                for ( File f : listFiles){
                    f.getAbsoluteFilePath()
                    //you can do all file processing part here
                }
    }
} 
```

usb 的文件路径不是标准的，因此如果文件名包含“usb”，那么您可以在“/storage”中列出所有文件，那么在我的情况下，它的 usb 肯定是“/storage/usbdisk”

# c# - 使用 Linq 计算父对象

> ID：15837054
> 
> 赞同：4
> 
> 时间：2013-04-05T14:52:45.723
> 
> 标签：c#, linq

我对使用 linq 表达式并尝试重构一些旧代码相当陌生。有没有办法将下面的方法变成一个简短而干净的 Linq 表达式？

```
public int GetParentCount(object o)
{ 
    int count = 0;
    object parent = GetParentObject(o);
    while (parent != null)
    {
        count++;
        parent = GetParentObject(parent);
    }
    return count;
} 
```

我试过搜索但没有得到满意的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:02:08.393

您可以像这样枚举祖先：

```
public IEnumerable<MyClass> AncestorsOf(MyClass obj)
{
   var parent = GetParentObject(obj);
   if (parent != null)
   { 
       yield return parent;
       foreach(var grandparent in AncestorsOf(parent))
          yield return grandparent;
   }
} 
```

获得总数将是一个简单的`AncestorsOf(obj).Count()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:12:15.993

作为安德解决方案的替代方案，一种非递归方法：

```
using System;
using System.Linq;
using System.Collections.Generic;

namespace Demo
{
    static class Program
    {
        static void Main()
        {
            var obj = new object();
            int count = AllParents(obj).Count(); // Using Linq only here.
            Console.WriteLine(count);
        }

        public static IEnumerable<object> AllParents(object obj)
        {
            while (true)
            {
                obj = GetParentObject(obj);

                if (obj == null)
                    yield break;

                yield return obj;
            }
        }

        // This is merely a hacky test implementation.
        public static object GetParentObject(object obj)
        {
            if (--count == 0)
                return null;

            return obj;
        }

        private static int count = 10;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T19:48:46.180

这是一个通用函数，可以处理任何类型的对象，任何对象名称都包含父对象（使用`Func<T,T>`）：

```
public static class MyExtensions {

  /// <summary>Gets an enumerable of all ancestors.</summary>
  public static IEnumerable<T> Ancestors<T>(this T obj, Func<T, T> expr) where T : class {
    obj = expr.Invoke(obj);
    while(obj != null) {
      yield return obj;
      obj = expr.Invoke(obj);
  }
} 
```

下面是一个使用该函数的示例应用程序：

```
class MyClass {
    public MyClass Parent { get; set; }
}

void Main()
{
    MyClass a = new MyClass();
    a.Parent = new MyClass();
    a.Parent.Parent = new MyClass();

    a.Ancestors(myObj => myObj.Parent).Count(); // Result: 2
} 
```

# vba - 使用 microsoft visual basic 6.5 宏关闭 word

> ID：15837055
> 
> 赞同：0
> 
> 时间：2013-04-05T14:52:48.217
> 
> 标签：vba, ms-word

平台：Microsoft Visual Basic 6.5 和 MS words 2007

我正在尝试做一个宏来对单词启用文件进行一些编辑。研究了如何关闭Excel文件而不保存，Santosh已经成功帮我解决了问题[解决](https://stackoverflow.com/questions/15779333/compile-error-while-declaring-close)方法。尝试应用于words编译保存时没有错误

将以下编码放置在 TheDocument 中，类似于 Santosh 教我学习 excel 的地方。

Private Sub Workbook_BeforeClose（取消为布尔值）

```
Me.Close False 
```

结束子

试图用以下编码替换 Me.Close False ......

1) 我关闭

2）我。关闭（假）

3) ActiveDocument.关闭

4) ActiveDocument.Close (假)

5) ActiveDocument.Quit

6）Application.Quit（假）

7) 申请。关闭

但不起作用。

* * *

因为我将使用 vba 脚本来运行脚本来更新我的文字文档并根据我的值输入相应地打印。之后脚本将关闭此文档而不保存（我不会提示用户有更改并提示用户保存）。我希望它在没有任何提示的情况下调用“强制关闭”。对于 ms excel 2007...我访问开发工具以转到“ThisWorkbook”下的 MS Visual Basic 6.5...我输入以下命令..

Private Sub Workbook_BeforeClose（取消为布尔值）

```
Me.Close False 
```

结束子

此命令成功关闭 excel 而不保存或任何提示（这是我想要的）尝试将其应用于 words2007

Private Sub Document_Close() 'Me.Close'运行时错误'4198'

```
'Me.Close (SaveChanges:=wdDoNotSaveChanges,OriginalFormat:=wdOriginalDocumentFormat,RouteDocument:=True)

'Me.Quit Savechanges:=wdDoNotSaveChanges

'Me.Close Savechanges:=wdDoNotSaveChanges

'Me.Close False 'run-time error '4198'

'ActiveDocument.Close False 'run-time error '4198'

'Document.Close False 'run time error '424' Object required

'Document.Close Savechanges:=wdDoNotSaveChanges  'run time error '424' Object required

'Document.Close Savechanges 'run time error '424' Object required

'Me.Close Savechanges 'run-time error '4198'  

'Documents.Close SaveChanges:=wdDoNotSaveChanges 
```

结束子

'Sub CloseAllDocuments() ' Documents.Close SaveChanges:=wdDoNotSaveChanges 'End Sub

我注释掉的所有这些命令都以错误结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:53:57.447

经过多次尝试和研究，我终于找到了解决方案

这供任何尝试做与我相同的事情的人参考。

在“ThisDocument”中键入此编码

* * *

私有子 Document_Close()

```
'This is to make the words think that the documents is saved.
'However in actually fact. Any changes would not be save upon closing of document
Me.Saved = True 
```

结束子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:15:47.123

我不知道该怎么做，但是当我遇到同样的问题时，我找到了解决方法。

如果您只打开 1 个 word 进程，只需运行脚本将其关闭即可。

```
TASKKILL /F /IM "WINWORD.EXE" 
```

要从 vba 运行脚本，请使用

```
Application.Run "YourPath" 
```

我知道这并不多，但至少它应该解决你眼前的问题。

在四处询问后，一位朋友告诉我这可能会奏效

```
mWord.Quit SaveChanges = wdDoNotSaveChanges 
```

mWord 是您的 Word.Application

# jquery - 我如何在jquery中获取元素的对象名称

> ID：15837058
> 
> 赞同：0
> 
> 时间：2013-04-05T14:52:54.363
> 
> 标签：jquery, html

我在玩我在互联网上找到的一个插件来创建购物车，插件（jquery 代码）代码我很确定是指我的 html 中的“#featured”div 标签，但我不是 100% 确定。无论如何，这是我调用 smartcart 插件的 html

```
 <script type="text/javascript">

$(document).ready(function(){
    // Call Smart Cart instead of features maybe something more higher up to include more features      
    $('#featured').smartCart();
    });
</script>
<div id="featured"></div> 
```

这是我正在玩的插件的片段

```
(function( $ ){

$.fn.smartCart =function() {
var options = $.extend({}, $.fn.smartCart.defaults, options);
return this.each(function() {

            var obj = $(this);
            alert(obj); 
};
})( jQuery ); 
```

有问题的代码是它说var obj = $（this）的地方，警报带回'object object'，我尝试了attr（'name'）和.selector和prop.（'name'），它们要么带回空白或“未定义”。有人可以告诉我，我认为“this”指的是我的 html 中的特色 div，以及为什么当我尝试从警报中取回它的名称时它不起作用。只是对象对象或未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:57:28.437

你`div`没有这个`name`属性，这就是为什么它是`undefined`.

**此外，您错过了`})`倒数第三行**的收盘价。

要回答您对是否`this`引用`div`元素的评论，答案是**yes**。无需再次将其包装到 jQuery 对象中（它已经是一个）。

首先添加它：

```
<div id="featured" name="foo"></div> 
```

然后做：

```
(function( $ ){

    $.fn.smartCart =function() {
        var options = $.extend({}, $.fn.smartCart.defaults, options);
        return this.each(function() {

            var obj = $(this);
            alert(obj.attr("name")); 
        }); //you were missing this
    };
})( jQuery ); 
```

# php - 使用 Kronos api 向用户添加培训课程？

> ID：15837060
> 
> 赞同：1
> 
> 时间：2013-04-05T14:53:00.413
> 
> 标签：php, xml, httprequest, kronos-workforce-central

我正在尝试使用 Kronos api 向用户添加培训课程。我在打开与服务器的通信线路、登录、发出（其他）有效请求并获得有效的预期结果时没有任何问题。

我遇到的问题是为我需要发送到服务器以将培训课程添加到员工个人资料中的 xml 字符串找到任何有用的文档。我找到了增加技能、认证和教育的信息，但不是培训。我对 Kronos 网站上的文档进行了广泛的阅读和搜索，并在那里发布了一个问题。我在过去三天里用谷歌搜索了这个，我很确定这是可能的，只是找不到合适的文档。

这里有 Kronos 专家吗？被指出正确的方向肯定会很好！

编辑：我们正在使用 Workforce Connect v6.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:44:19.960

终于从 Kronos 得到了一个明确的答案......发布答案以防其他人偶然发现这个问题。

根据 Kronos 的说法，无法通过 API 做到这一点。解决方案是手动输入培训（这是我们试图避免的），或者与 Kronos 专业服务合作以制作定制解决方案，收费（我们正在调查）。

# javascript - 如何避免在弹性粒子碰撞模拟器中粒子一起出现故障？

> ID：15837065
> 
> 赞同：2
> 
> 时间：2013-04-05T14:53:05.857
> 
> 标签：javascript, simulation, collision

这是一个[简短的视频](http://www.youtube.com/watch?v=wN8u-ERVaww)，其中可以看到两个（可能更多）粒子组相互干扰。

源代码可以在[这里](https://github.com/fibonatic/particleSim)找到。

这是我用来计算碰撞的代码：

```
function collisionPhysics()
{
    for (var i = 0; i < N - 1; ++i)
    {
        for (var j = i + 1; j < N; ++j)
        {
            var Dx = objects[j].x - objects[i].x;    // Difference in X direction between objects[i] and objects[j].
            var Dy = objects[j].y - objects[i].y;    // Difference in Y direction between objects[i] and objects[j].
            var D2 = Dx * Dx + Dy * Dy;              // Distance between objects[i] and objects[j] squared.

            if (D2 <= (objects[i].rad + objects[j].rad) * (objects[i].rad + objects[j].rad))    // Colision check could be inserted here, reusing D2.
            {
                var delta = 2 * (Dx * (objects[i].Vx - objects[j].Vx) + Dy * (objects[i].Vy - objects[j].Vy)) / (D2 * (objects[i].m + objects[j].m));
                objects[i].Vx += -objects[i].m * delta * Dx;
                objects[i].Vy += -objects[i].m * delta * Dy;
                objects[j].Vx +=  objects[j].m * delta * Dx;
                objects[j].Vy +=  objects[j].m * delta * Dy;
            }
        }
    }
} 
```

**编辑 2013/04/06：** nwellcome 提到的问题导致了奇怪的行为。这个调整后的功能应该可以解决这个问题，不确定它是否可以提高性能，但它可以工作：

```
function collisionPhysics()
{
    for (var i = 0; i < N - 1; ++i)
    {
        for (var j = i + 1; j < N; ++j)
        {
            var Dx = objects[j].x - objects[i].x + timeStep * (objects[j].u - objects[i].u);
            var Dy = objects[j].y - objects[i].y + timeStep * (objects[j].v - objects[i].v);
            var D2 = Dx * Dx + Dy * Dy;              // Distance between objects[i] and objects[j] squared.

            if (D2 <= (objects[i].r + objects[j].r) * (objects[i].r + objects[j].r))    // Colision check could be inserted here, reusing D2.
            {
                objects[i].col = true;
                objects[j].col = true;
                var dx = objects[j].x - objects[i].x;
                var dy = objects[j].y - objects[i].y;
                var du = objects[j].u - objects[i].u;
                var dv = objects[j].v - objects[i].v;
                var dr = objects[j].r + objects[i].r;
                var dt = (-Math.sqrt(2 * dx * du * dy * dv - du * du * (dy * dy - dr * dr) - dv * dv * (dx * dx - dr * dr)) - dx * du - dy * dv) / (du * du + dv * dv);
                Dx = objects[j].x - objects[i].x + dt * (objects[j].u - objects[i].u);
                Dy = objects[j].y - objects[i].y + dt * (objects[j].v - objects[i].v);
                D2 = Dx * Dx + Dy * Dy;
                var delta = 2 * (Dx * (objects[i].u - objects[j].u) + Dy * (objects[i].v - objects[j].v)) / (D2 * (objects[i].m + objects[j].m));
                objects[i].u += -objects[i].m * delta * Dx;
                objects[i].v += -objects[i].m * delta * Dy;
                objects[j].u +=  objects[j].m * delta * Dx;
                objects[j].v +=  objects[j].m * delta * Dy;
                objects[i].x += (timeStep - dt) * objects[i].u;
                objects[i].y += (timeStep - dt) * objects[i].v; 
                objects[j].x += (timeStep - dt) * objects[j].u;
                objects[j].y += (timeStep - dt) * objects[j].v;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:26:07.143

问题是您的碰撞解决方法不能确保粒子在下一帧开始时仍不会相交。

当你发现碰撞时，你需要回溯到粒子边界发生碰撞的时间点，并从那里解决碰撞。有关执行此操作的方法，请参阅[此游戏开发](https://gamedev.stackexchange.com/a/5949/12715)对类似问题的回答。

# alfresco - Alfresco WebServices API，更改用户密码

> ID：15837068
> 
> 赞同：1
> 
> 时间：2013-04-05T14:53:13.073
> 
> 标签：alfresco, liferay-6

我正在使用 Alfresco WebService API，从 Liferay 调用它，并尝试保持用户帐户同步。当登录的用户尝试访问使用 Alfresco 的资源时，就在我绑定用户会话之前，我尝试在 Alfresco 中检查并创建用户。

1.  我得到一个[AdministrationService](http://wiki.alfresco.com/wiki/Administration_Web_Service)
2.  我正在调用 createUsers 函数

这对新用户来说没问题（该帐户是在露天创建的），但我找不到更新他/她密码的方法。唯一相关的功能是

```
void changePassword(xsd:string userName, xsd:string oldPassword, xsd:string newPassword) 
```

问题是我无法获取旧用户的密码。

有没有办法在不知道旧密码的情况下更改密码，或者找回旧密码？管理员真的应该能够在不知道旧密码的情况下更改密码

* * *

编辑，我知道我应该通过将 alfresco 和 Liferay 与 SSO 集成来解决这个问题，但我正在研究一种解决方法，我无法在 Alfresco 安装上工作，所以这不是我的决定。此外，我对这个功能很好奇，因为在我看来，Alfresco WebService API 绝对不允许更改密码。

# php - mysql正负标签过滤

> ID：15837069
> 
> 赞同：0
> 
> 时间：2013-04-05T14:53:14.100
> 
> 标签：php, mysql, tags, filtering

我有一个所有标记的站点列表。我对使用快速且允许“否定”标签的查询感到困惑。换句话说，就像当您搜索 Google 时说 -yahoo 会搜索不包含 yahoo 的结果。

我遇到的问题是标签在网站方面。因此，如果用户搜索 yahoo，该站点将被标记为 -yahoo，因此即使它与其他所有标记匹配，它也不会显示结果。

表的结构是：

网站：ID|其他东西..

标签：ID|Tag（其中标签是 yahoo 或 -yahoo）

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:57:02.213

您可能应该重新设计标签表，以便有一个评级字段，例如一个简单的

```
id | tag | rating (bit) 
```

所以你只在字段中存储“雅虎” `tag`，并在评级字段中保留 +/- 的东西。

```
... WHERE tag='yahoo' AND rating=XXX 
```

如果你不能返工，那么你将不得不修改你的 where 子句

```
... WHERE tag='yahoo' OR tag='-yahoo' 
```

# c++ - c++ 向量通过使用 .push_back 或 .resize() 避免重新分配

> ID：15837080
> 
> 赞同：0
> 
> 时间：2013-04-05T14:53:49.857
> 
> 标签：c++, performance, memory-management, stl

我有一个与矢量有关的问题，尤其是选项 .push_back() 和 .resize()。使用此选项时，当当前向量容量超出时，c++(STL) 将始终重新分配每个元素。这对我来说是个问题，因为我确实有一个结构对象向量。

```
std::vector<node> v; 
```

我的结构看起来像这样并保持指向向量其他元素的指针

```
struct node
{
    std::array<node*, nrOfNeigh> neighb;
    node* parentNode; 
    double density;
    ...
} 
```

因为我的结构确实有指向向量其他元素的指针，所以在使用 .push_back() 时，这种依赖关系将不再有效。

你们中有人有避免这种情况的想法吗？

我不希望有办法强制 std::vector 不重新分配。我已经尝试使用 .reserve() 并因此尽可能多地保留。这是可能的，但从内存管理的角度来看并不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:10:46.770

假设结构中的 node* 字段仅指向向量中的其他“节点”对象，您可以将 node* 替换为向量中的整数索引。

具体来说，

```
struct node
{
    std::array<size_t, nrOfNeigh> neighb;
    size_t parentNodeId;
    double density;
    ...
} 
```

现在，当您使用 push_back() 时，不是存储 &v.back()，而是存储 'v.size()-1'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:56:51.183

就我个人而言，我会使用 a `std::vector<node *>`（或 Boost 中无数的智能指针实现中的任何一个），因此您只需将指针重新分配给节点，而不是节点本身。

但是，如果您要走非智能指针路线，请不要忘记释放指针。

编辑：*特别是*如果你在你的结构中保存整个数组。您不想在每个重新分配周期都重新分配每个固定数组。我也不会使用固定数组，`std::vector<node *>`用于容纳邻居的内部会更好地扩展并避免这些天软件似乎困扰的大多数缓冲区溢出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:08:18.407

好吧，您可以使用 的`.reserve()`功能在使用向量*之前*`vector`分配您认为可能需要的尽可能多的内存，从而可能避免重新分配。在某些情况下，它还可以加速向量推送。见[这里。](http://en.cppreference.com/w/cpp/container/vector/reserve)

# ada - Ada 函数与过程

> ID：15837081
> 
> 赞同：15
> 
> 时间：2013-04-05T14:53:51.290
> 
> 标签：ada, gnat

谁能解释一下Ada“程序”和“功能”之间的区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T18:58:18.137

与其他命令式类 C 语言相比，Ada 语言并没有太大的不同。虽然语法可能看起来很奇怪并且被不同的语句淹没，但这主要是因为非常丰富的静态类型系统和语言直接提供的功能（例如任务），其他语言作为侧库提供。

与大多数类 C 语言不同，Ada 区分过程和函数例程。从这个意义上说，函数非常像数学函数，它接受参数（或无参数）并返回一个值，因此用于表达式。过程不返回任何值，也不能在表达式中使用。Pascal 语言在函数和过程之间保持相同的区别。类 C 语言选择仅具有可在表达式外部使用的函数（在这种情况下忽略返回值）或返回 void 值以像过程一样工作。

# ruby-on-rails-3 - Rails 如何通过 other_model_ids 更新关联模型？

> ID：15837089
> 
> 赞同：0
> 
> 时间：2013-04-05T14:54:26.907
> 
> 标签：ruby-on-rails-3, activerecord

我一直在使用一种标准技术来创建/更新关联`has_many, through:`模型，方法是创建复选框并将 HTML 元素名称指定为 id 的集合。考虑：

```
<% Course.all.each do |course| %>
  <label class="checkbox">
    <%= check_box_tag 'student[course_ids][]', course.id, @student.course_ids.include?(course.id) %>
    <%= course.name %>
  </label> 
```

为了支持这一点，该`Student`模型具有以下功能：

```
attr_accessible :course_ids, ...
has_many :student_courses, dependent: :destroy
has_many :courses, through: :student_courses 
```

我对此没有任何问题，它工作得很好，因为关联的模型`StudentCourses`, 被创建或删除。

我的问题是提交表单后 Rails 如何创建/删除？我查看了开发日志，看到了 Delete 或 Insert 语句，但没有看到 Rails 使用的“魔法”。更具体地说，Rails 如何使用`course_ids`参数？

我查看了控制台（）中生成的代码`rails c`，但它们与开发日志相似。

谢谢

# angularjs - 在 AngularJS 教程中运行测试时出错，步骤 3

> ID：15837093
> 
> 赞同：8
> 
> 时间：2013-04-05T14:54:35.983
> 
> 标签：angularjs, karma-runner

[尝试在角度教程（ http://docs.angularjs.org/tutorial/step_03](http://docs.angularjs.org/tutorial/step_03) ）中运行端到端测试时，我得到以下信息......

我做了“git checkout -f step-3”所以它直接来自回购......

```
[2013-04-05 07:17:07.774] [WARN] config - "/" is proxied, you should probably change urlRoot to avoid conflicts
INFO [testacular]: Testacular server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 26.0 (Mac)]: Connected on socket id CamYxe8MuPk52Agq6g5L
WARN [proxy]: failed to proxy /app/index.html (Error: connect ECONNREFUSED)
WARN [proxy]: failed to proxy /app/index.html (Error: connect ECONNREFUSED) 
```

我在 Rails 应用程序中运行该应用程序，该应用程序由 WEBrick 在端口 3000 上提供服务。所以我将 testacula 配置更改为...

```
proxies = {
'/': 'http://localhost:3000/'
}; 
```

...然后测试运行但失败

```
Chrome 26.0 (Mac) PhoneCat App Phone list view should filter the phone list as user types into the search box FAILED
expect repeater '.phones li' count toBe 3
/Users/paul/rails_projects/angularjs/public/angular-phonecat/test/e2e/scenarios.js:15:7: expected 3 but was 0 
```

所以它似乎没有正确导航到页面。有人有想法么？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T03:07:27.110

将您的 angular-phonecat/config/testacular-e2e.conf.js 代理更新为：

```
proxies = {
  '/': 'http://localhost:3000/angular-phonecat/'
}; 
```

angular-phonecat/test/e2e/scenarios.js 中的测试预计能够达到：

```
http://localhost:3000/app/index.html 
```

将代理更新到上述配置将解决此问题（或者您可以将所有文件从 /Users/paul/rails_projects/angularjs/public/angular-phonecat/* 直接移动到您的公共文件夹中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T01:12:07.313

正如克里斯所说，（我提高了他的评论）

我正在运行 MAMP，所以我不得不将其更改为使用端口：80/angular-phonecat

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-06T14:22:38.927

如果您只是运行 scripts/web-server.js，那么只需运行服务器：

```
→ ./scripts/web-server.js 
Http Server running at http://localhost:8000/ 
```

请注意**8000**是正确的端口并更新 e2e 配置文件：

```
// config/karma-e2e.conf.js

proxies: {
  '/': 'http://localhost:8000/' //was :3000
} 
```

现在运行 e2e 测试，应该没问题：

```
→ karma start config/karma-e2e.conf.js 
```

# c# - 使用带有未知元素的 LINQ to XML 获取属性值

> ID：15837099
> 
> 赞同：1
> 
> 时间：2013-04-05T14:54:48.627
> 
> 标签：c#, xml, linq

作为我正在处理的项目的一部分，我需要查询 XML 文件并根据搜索条件查找数据。我已经尝试了一些示例，`XDocument`但我的问题是需要解析的 XML 文件大约有 7 个变体。所以我不知道元素名称，也不知道文件可能包含哪些属性。对于每个变体，我将文件连接到一个文件中，这是我的理论，它会使搜索更容易。迄今为止，该理论已被证明是错误的。

所有将具有部分或全部属性列表。例如

```
<root>
    <T1>
        <T11 name="123"/>
        <H05 FileType="T52" ClientID="POB" />
    </T1>
    <T1>
        <T11 name="1234"/>
        <H05 FileType="T2" ClientID="POB" />
        <E1 ErrorCode="AA00" ErrorText="There was an Error" />
        <E1 ErrorCode="BB00" ErrorText="There was another Error" />
    </T1>
</root> 
```

如果我想要搜索名称的错误集合，是否可以仅使用在文件中找到的属性名称使用 LINQ 进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:18:50.720

假设您要查找文档中包含`ErrorCode`属性的所有节点：

```
XDocument document = LoadXml();
IEnumerable<XElement> errorNodes = document
   // Find all descendant nodes:
   .Descendants() 
    // With an "ErrorCode" attribute:
   .Where(el => el.Attribute("ErrorCode") != null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:23:06.257

你应该能够做这样的事情。

```
 var xmlString = @"<root>
        <T1>
        <T11 name=""123\""/>
        <H05 FileType=""T52"" ClientID=""POB"" />
        </T1>
        <T1>
        <T11 name=""1234""/>
        <H05 FileType=""T2"" ClientID=""POB"" />
        <E1 ErrorCode=""AA00"" ErrorText=""There was an Error"" />
        <E1 ErrorCode=""BB00"" ErrorText=""There was another Error"" />
        </T1>
        </root>";

        var xml = XDocument.Parse(xmlString);

        var names = from x in xml.Descendants().Attributes("name") select x.Parent; 
```

# .net - 返回错误值的子表单对象引用

> ID：15837102
> 
> 赞同：0
> 
> 时间：2013-04-05T14:55:00.297
> 
> 标签：.net, vb.net, multithreading, parent-child

**问题**

所以我有一个父表单，它使用子表单来包含要使用的各种设置。设置表单包含数据网格视图、文本框、列表视图等。父表单称为“MainForm”，设置一个称为“SQL_Settings”。每当从父表单中的子表单引用项目时，我都会得到不正确的结果。

例如：

```
Sql_settings.Datagridview.rows.count 
```

返回值 1 但我可以实际看到其中肯定有不止一行。

另一个例子：

```
Sql_settings.Textbox1.text 
```

即使其中有文本，也返回空白。

**可能的原因？**

在尝试了多线程和委托后，我开始遇到这个问题。我曾经使用过以下命令：

```
 System.Windows.Forms.Control.CheckForIllegalCrossThreadCalls = False 
```

但随后将其删除，决定改为正确执行。我在想这个命令可能“遗留”了一些东西？不过，我可能完全错了..

**附加信息**

```
 Dim data_to_pass(2) As Object
    data_to_pass(0) = SQL_Settings.DataGridView1(3, sql_on).Value
    data_to_pass(1) = part_information
    data_to_pass(2) = ListView8

    Dim add_results_thread As New Threading.Thread(AddressOf add_results_to_list)

    add_results_thread.IsBackground = True
    add_results_thread.Priority = Threading.ThreadPriority.Highest
    add_results_thread.Start(data_to_pass) 
```

但是，这确实运行了多次。一旦线程完成，它就会被触发以运行另一个线程。也许这是导致问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:02:33.357

在 WinForms 中，所有访问 UI 元素（包括 DataGridView 和 TextBox 控件）的代码都必须在同一个线程（UI 线程）上运行。您的主窗体代码肯定在 UI 线程上运行，当您`Sql_settings.Textbox1.text`从主窗体访问时，您肯定也在访问 UI 线程上的代码。

这意味着您获得*无效数据*的原因可能与跨线程问题无关。但这可能与您的对象生命周期有关。也许您正在创建 SQL 设置表单的多个实例并访问其中一个没有您期望的数据的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:27:27.257

我找到了解决方案。基本上，由于我的线程创建是在循环中发生的，因此我必须确保前一个线程在执行下一个线程之前完成。为此，我添加了一个在线程末尾触发的委托，然后允许我再次访问 UI 线程。这个解决方案对我有用，所以希望它对未来的人也有帮助。

# ios - Core Data 实体在方法中返回后缺少其属性

> ID：15837104
> 
> 赞同：1
> 
> 时间：2013-04-05T14:55:01.507
> 
> 标签：ios, objective-c, xcode, core-data

我遇到了一个问题，我有一个方法应该返回从当前线程的上下文中获取的核心数据实体对象。

当我在调试模式下编译和运行项目时，一切正常，但是当应用程序以 RELEASE 运行时，会发生奇怪的行为。返回的对象缺少其属性（它们是 nil 或 0）。应用程序使用 ARC 来管理内存。

该实现使用 NSManagedObject 上的一个类别，其方法如下：

```
- (id)threadLocalSelf {
    return [self selfInContext:[NSManagedObjectContext threadLocalContext]];
}

- (id)selfInContext:(NSManagedObjectContext *)context {
    NSAssert(context, @"context cannot be nil!");
    if(context == self.managedObjectContext)
        return self;

    NSManagedObjectID *objectID = [self objectID];
    if([objectID isTemporaryID])
        [NSException raise:NSInternalInconsistencyException format:@"objectID cannot be temporary when fetching self in another context!"];

    NSError *error = nil;
    NSManagedObject *_self = [context existingObjectWithID:objectID error:&error];
    if(error)
        [NSException raise:NSInternalInconsistencyException format:@"Failed to fetch self: %@ in context: %@, error: %@", objectID, context, error];

    NSAssert(_self, @"context: %@ does not contain an object with objectID: %@", context, objectID);

    NSLog(@"Returning _self: %@", _self);

    return _self;
} 
```

[NSManaged threadLocalContext] 为当前线程创建一个新的 NSManagedObjectContext。

这里的问题是，当 NSLogging 退出即将返回的对象时，一切似乎都很好。有关实体的所有属性和信息都是正确的。

但是 - 在对象返回后注销对象时（如下所示），所有属性均为 nil 或 0。此行为仅在 RELEASE 中发生，而不在 DEBUG 中发生。

```
Foo * bar = [baz threadLocalSelf];
NSLog(@"Foo object: %@", bar); 
```

上面的代码导致对象从方法中正确注销，但紧随其后的 NSLog 具有空属性。虽然 ObjectID 在这两种情况下都是正确的，并且对象本身不是 nil。

关于可能导致此问题的任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:00:08.173

您的线程新上下文在分配和使用后将被释放。

```
- (id)threadLocalSelf {
    return [self selfInContext:[NSManagedObjectContext threadLocalContext]/*released at the end of method*/];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:11:57.730

您仅在发布版本中看到此行为的原因是因为`NSManagedObjectContext`在调试版本中被放入自动释放池中，但 ARC 优化器在发布版本中立即释放它。您可以通过使自动释放池立即耗尽来在调试版本中复制它：

```
- (id)threadLocalSelf {
    @autoreleasepool {
        return [self selfInContext:[NSManagedObjectContext threadLocalContext]];
    }
} 
```

# xcode - XCode (XIB) 中的标准后退按钮

> ID：15837108
> 
> 赞同：1
> 
> 时间：2013-04-05T14:55:12.893
> 
> 标签：xcode

我无法将iOS的标准后退按钮放入a `navigationBar`，因为我在对象库中找不到它，所以我可以用代码或其他东西来做吗？

我只想要正常的、标准的、蓝色的后退按钮——你知道我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:44:35.497

要“自动”拥有一个后退按钮，您首先需要一个`UINavigationController`. 然后你需要取一个不同的`UIViewController`并将其添加为`UINavigationController`init 方法中的根视图控制器：

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:someOtherViewController]; 
```

确保还为 设置一个标题`someOtherViewController`，通常在它的 viewDidLoad 或初始化程序中。我会告诉你为什么这很重要：

```
self.title = @"Some other VC"; 
```

然后花点时间`UIViewController`把它推到你的导航控制器上：

```
[navigationController pushViewController:anotherViewController animated:YES]; 
```

`UIViewControllers`现在，您的导航堆栈上有两个：`someOtherViewController`和`anotherViewController`.

您的视图现在将有一个带有“其他 VC”的后退按钮。这是刚刚移出视图的视图控制器的标题：

*   [http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)
*   [http://simplecode.me/2011/09/04/an-introduction-to-uinavigationcontroller/](http://simplecode.me/2011/09/04/an-introduction-to-uinavigationcontroller/)

我还建议阅读有关如何`UINavigationControllers`工作并搜索此站点的更多信息以自定义后退按钮。有很多关于它的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:08:22.873

您不能自己添加后退按钮。后退按钮是导航控制器的一部分。如果您将导航控制器嵌入到您的视图中，后退按钮将出现并由前一个视图的名称填充。

如果您使用故事板，请选择您的视图控制器，然后在顶部菜单中选择“编辑器”->“嵌入”->“导航控制器”。

* * *

编辑： [这是一个例子。](http://www.appcoda.com/use-storyboards-to-build-navigation-controller-and-table-view/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T20:18:19.393

我正在运行 Xcode 7.2。这让我发疯，但我想通了。以下是使“后退”按钮出现所需的所有部分（制作一个测试项目来证明这一点）：

1）你必须有一个导航控制器，它必须设置为初始视图控制器。所以添加导航控制器，您将导入两个表。单击导航控制器，然后在属性列表中，选中显示“是初始视图控制器”的框。您现在将看到指向此视图的箭头。

2) 在我们的例子中，我们想要一个 ViewController 而不是包含/连接的 TableViewController，所以删除 TableViewController (RootController) 并添加一个新的 ViewController。

3) 通过单击导航控制器的顶部栏和箭头指向左侧的橙色圆圈，将导航控制器连接到新的 ViewController。按住键盘上的 Control 按钮，然后单击并从橙色圆圈拖动到 ViewController 并松开。当给出关于如何连接两个视图的选项列表时，选择“根视图控制器”。

完毕！现在您可以正常工作的导航栏，并且您会自动在所有添加的 segues 上获得后退箭头。测试这个。添加另一个 ViewController 并使用现有 ViewController 上的按钮连接到它。使用 Control-click-drag 方法从按钮到最新的 ViewController。为您创建的新转场选择“显示”选项。

运行。当您单击按钮并移动到最新的 ViewController 时，您会看到后退选项已自动出现。

这都是由导航控制器提供的，但仅当您将另一个控制器设为 RootController 时。快乐导航！

# jquery - 如何修剪数组中的最后一个字符 - jQuery

> ID：15837109
> 
> 赞同：0
> 
> 时间：2013-04-05T14:55:14.393
> 
> 标签：jquery, arrays, trim

所以今天我有一个数组，里面有几个字符串，都以 结尾，例如：爵士，拉丁，恍惚，

我需要删除 , 数组中的最后一个元素。搜索[Stackoverflow](https://stackoverflow.com/questions/952924/javascript-chop-slice-trim-off-last-character-in-string)我找到了几个答案并尝试了下面的代码，但到目前为止没有运气:(

```
// How I'm generating my Array (from checked checkboxes in a Modal)
    role_Actor = [];
    $('.simplemodal-data input:checked').each(function() {
        role_Actor.push($(this).val());
    });

// roleArray = my Array
var lastEl = roleArray.pop();
    lastEl.substring(0, lastEl.length - 1);
    roleArray.push($.trim(lastEl));

// My function that displays my strings on the page
    $.each(roleArray, function(index, item) {
        $('.'+rowName+' p').append(item+', ');
    });

// Example of the Array:
    Adult Animated, Behind the Scenes, Documentary, 
```

谢谢参观！

* * *

谢谢@[克莱尔安东尼](https://stackoverflow.com/users/2019248/claire-anthony)！修复！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:01:20.527

`lastEl`您在将其放回之前忘记分配`roleArray`：

`lastEl = lastEl.substring(0, lastEl.length - 1);`

正如评论所暗示的那样，并且您只是将其用于显示目的，您应该从元素中删除逗号`roleArray`并使用该`join`方法，如下所示：

```
var roleArray = ['latin', 'jazz', 'trance'];
$('#example').append(roleArray.join(', ')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:01:12.353

试试这个：

```
$.each(arr, function(i, val) {
    arr[i] = val.substring(0, val.length - 1);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:04:43.307

***编辑***现在他的问题已被编辑以反映现实，这不再有效.... =）

```
// make an array
var a = ['one,two,three,', 'four,five,six,'];

// get the last element
var lastEl = a[a.length -1];

// knock off the last character
var trimmedLast = lastEl.substring(0, lastEl.length - 1);

alert(trimmedLast);

// as a function that will return said
// please note you should write error handling and so 
// on in here to handle empty or non-array inputs.
function lastArrayThing(myArray) {
    var lastEl = a[a.length -1];
    return lastEl.substring(0, lastEl.length - 1);
}

alert( lastArrayThing(a) ); 
```

实际代码：http: [//jsfiddle.net/SB25j/](http://jsfiddle.net/SB25j/)

# php - PHP：如何保留 SOAP 响应的结构？

> ID：15837111
> 
> 赞同：2
> 
> 时间：2013-04-05T14:55:17.757
> 
> 标签：php, soap, response

我有一个关于 PHP 中的 SOAP 调用的问题。有一个名为“DoBulkOperation”的网络服务，它接受一个列表，做某事，并返回一个列表，其中包含关于它所做的事情的信息。这里重要的是，请求的每个列表元素在响应中具有相同索引处的对应项。

我得到的回应是这样的：

```
<Body>
  <DoBulkOperationResponse>
    <items>
      <OperationResponse>
        <result>17</result>
      </OperationResponse>
      <Error>Some error occured</Error>
      <OperationResponse>
        <result>18</result>
      </OperationResponse>
      <OperationResponse>
        <result>19</result>
      </OperationResponse>
      <OperationResponse>
        <result>20</result>
      </OperationResponse>
    </items>
  </DoBulkOperationResponse>
</Body> 
```

那是对我要求的正确回应。现在，我可以说，请求中的第二个列表元素有问题。

我从 PHP SoapClient 得到的不是我所期望的：

```
object(stdClass)#49 (1) {
  ["items"]=>
  object(stdClass)#51 (2) {
    ["OperationResponse"]=>
    array(4) {
      [0]=>
      object(stdClass)#53 (1) {
        ["customerID"]=>
        int(17)
      }
      [1]=>
      object(stdClass)#52 (1) {
        ["customerID"]=>
        int(18)
      }
      [2]=>
      object(stdClass)#50 (1) {
        ["customerID"]=>
        int(19)
      }
      [3]=>
      object(stdClass)#54 (1) {
        ["customerID"]=>
        int(20)
      }
    }
    ["Error"]=>
    string(17) "Some error occured"
  }
} 
```

元素的顺序完全被打破了。现在，不可能决定哪个请求元素导致哪个响应元素。

在 WSDL 中，“项目”被定义为序列。

有没有办法强制 SoapClient 实例保留响应的结构？

此致，

马库斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T18:24:34.783

您在这里有几个选项，但要获得明确的答案，您应该为此调用提供 WSDL。

## 强制 PHP SoapClient 始终返回定义的数组。

设置或添加`array('features' => SOAP_SINGLE_ELEMENT_ARRAYS)`为 SoapClient 的选项。只有在遇到多个元素时，它才会阻止结果包含数组。从我相信 PHP 的内部操作来看：在第一次遇到元素时，它刚刚被创建，而在下一次遇到时，第一个元素被移动到一个数组中，然后第二个元素被添加。

这可能已经解释了您所看到的结构，并且可能能够修复它。

## 将类映射与预定义预期结构的对象一起使用。

您必须在 WSDL 中找出 ComplexType 结构的名称，然后才能创建用于这些结构的 PHP 类，而不是`stdClass`. 这对任何事情都非常有用，因为您的 IDE 可以为您提供自动完成功能，并且您实际上可以通过使用它来查看正在处理的元素`get_class()`。另一方面，您无法创建正确充当`items`XML 结构的 PHP 对象，因此这可能只是装饰性的，但对于...

## 在您的自定义类中使用魔法`__set()`来干扰创建结果。

您也许可以创建一个自定义类，用作`items`设置所有属性的类。在魔术函数中，您可以尝试推送数据。至少你可以用一些输出来调试它。

## 跟踪请求并直接访问 XML 结果。

`trace => true`在选项数组中设置选项，并使用`SoapClient::__getLastResponse`.

## 为失败做好准备。

PHP 可能只是无法将您获得的 XML 结构转换为正确的结果。我会责怪您提供的 Soap API。人们通常会提供在请求中附加某种 ID 并在结果中重用此 ID 以使客户能够识别他们的东西。至少“按请求顺序”返回的结构应该始终返回相同的项目并将结果携带到内部某处，例如：

```
<OperationResponse>
    <result>17</result>
</OperationResponse>
<OperationResponse>
    <Error>Some error occured</Error>
</OperationResponse> 
```

# python - 用于在类文件对象中发送 HTTP 请求的库

> ID：15837116
> 
> 赞同：3
> 
> 时间：2013-04-05T14:55:29.440
> 
> 标签：python, http, python-2.7

我目前正在对 HTTP 请求使用 Python[请求](http://docs.python-requests.org/en/latest/)，但由于 API 的限制，我无法继续使用该库。

我需要一个库，它允许我以类似流文件的方式编写请求正文，因为我将发送的数据不会立即可用，而且我想尽可能多地节省内存提出请求时。是否有一个易于使用的库允许我发送这样的 PUT 请求：

```
request = HTTPRequest()
request.headers['content-type'] = 'application/octet-stream'
# etc
request.connect()

# send body
with open('myfile', 'rb') as f:
    while True:
        chunk = f.read(64 * 1024)
        request.body.write(chunk)
        if not len(chunk) == 64 * 1024:
            break

# finish
request.close() 
```

更具体地说，我有一个线程可以使用。使用这个线程，当我通过网络接收流时，我会收到回调。本质上，这些回调看起来像这样：

```
class MyListener(Listener):
    def on_stream_start(stream_name):
        pass

    def on_stream_chunk(chunk):
        pass

    def on_stream_end(total_size):
        pass 
```

我需要在方法中创建我的上传请求，在`on_stream_start`方法中上传块`on_stream_chunk`，然后在方法中完成上传`on_stream_end`。因此，我需要一个支持`write(chunk)`类似以下方法的库：

```
class MyListener(Listener):
    request = None

    def on_stream_start(stream_name):
        request = RequestObject(get_url(), "PUT")
        request.headers.content_type = "application/octet-stream"
        # ...

    def on_stream_chunk(chunk):
        request.write_body(chunk + sha256(chunk).hexdigest())

    def on_stream_end(total_size):
        request.close() 
```

该`requests`库支持*读取*类似文件的对象和生成器，但不支持*写出*请求：拉而不是推。是否有一个库可以让我将数据向上推送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:06:30.450

据我所知`httplib`，'s[`HTTPConnection.request`](http://docs.python.org/2/library/httplib.html#httpconnection-objects)正是你想要的。

我追踪了实际执行发送的函数，只要您传递的是类似文件的对象（而不是字符串），它就会将其分块：

```
Definition: httplib.HTTPConnection.send(self, data)
Source:

def send(self, data):
    """Send `data' to the server."""
    if self.sock is None:
        if self.auto_open:
            self.connect()
        else:
            raise NotConnected()

    if self.debuglevel > 0:
        print "send:", repr(data)
    blocksize = 8192
    if hasattr(data,'read') and not isinstance(data, array):
        if self.debuglevel > 0: print "sendIng a read()able"

        ## {{{ HERE IS THE CHUCKING LOGIC
        datablock = data.read(blocksize)
        while datablock:
            self.sock.sendall(datablock)
            datablock = data.read(blocksize)
        ## }}}

    else:
        self.sock.sendall(data) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T03:50:42.157

我在我的代码库的几个地方做了这样的事情。您需要一个上传文件包装器，并且您需要另一个线程或 greenthread - 我在我的实例中使用 eventlet 进行假线程。Call `requests.put`，它将阻止`read()`您的类文件对象包装器。您调用的线程`put`将阻塞等待，因此您需要在另一个线程中进行接收。

抱歉没有发布代码，我只是在压缩时看到了这个。我希望这足以帮助，如果没有，也许我可以稍后编辑和添加更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:42:19.490

Requests 实际上支持带`files`参数的多部分编码请求：

[官方文档中的 Multipart POST 示例](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)：

```
url = 'http://httpbin.org/post'
files = {'file': open('report.xls', 'rb')}

r = requests.post(url, files=files)
r.text
{
  ...
  "files": {
    "file": "<censored...binary...data>"
  },
  ...
} 
```

如果您愿意，您也可以创建自己的类似文件的流对象，但您不能在同一个请求中混合流和文件。

一个可能对您有用的简单案例是打开文件并返回一个基于生成器的分块阅读器：

```
def read_as_gen(filename, chunksize=-1): # -1 defaults to read the file to the end, like a regular .read()
    with open(filename, mode='rb') as f:
        while True:
            chunk = f.read(chunksize)
            if len(chunk) > 0:
                yield chunk
            else:
                raise StopIteration

# Now that we can read the file as a generator with a chunksize, give it to the files parameter
files = {'file': read_as_gen(filename, 64*1024)}

# ... post as normal. 
```

但是如果你不得不阻止其他东西上的分块，比如另一个网络缓冲区，你可以用同样的方式处理它：

```
def read_buffer_as_gen(buffer_params, chunksize=-1): # -1 defaults to read the file to the end, like a regular .read()
    with buffer_open(*buffer_params) as buf: # some function to open up your buffer
    # you could also just pass in the buffer itself and skip the `with` block
        while True:
            chunk = buf.read(chunksize)
            if len(chunk) > 0:
                yield chunk
            else:
                raise StopIteration 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-18T01:15:41.487

这可能会有所帮助

```
import urllib2

request = urllib2.Request(uri, data=data)
request.get_method = lambda: 'PUT' # or 'DELETE'
response = urllib2.urlopen(request) 
```

# sql-server - 如何在 T-SQL 中定义 Pivot 语句？

> ID：15837118
> 
> 赞同：0
> 
> 时间：2013-04-05T14:55:33.203
> 
> 标签：sql-server, tsql, pivot

我在创建数据透视查询时遇到了一些问题：

我有这个数据：

```
DECLARE @UserAccess TABLE
(
    userName char(255),
    project char(255),
    role char(255)
);

userName  project  role
--------  -------  ----
ado       BI       U
aga       BI       D
aga       BI       U
mim       BI       A
mim       BI       U
ado       BID      D
ado       BID      U
aga       BID      D
aga       BID      U
mim       BID      A
mim       BID      D
mim       BID      U 
```

我想要的是这样的：

```
User    BI    BID
-----   ---   ---
ado     U     DU
aga     DU    DU
mim     AU    ADU 
```

但我不知道如何构造语句来得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:02:13.737

首先，您需要将 连接`roles`成一行，然后您可以应用 PIVOT 函数：

```
select username, BI, BID
from
(
  select username, project, 
    STUFF((SELECT distinct '' + t.[role]
         from UserAccess t
         where u.username = t.username
           and u.project = t.project
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,0,'') role
  from UserAccess u
) d
pivot
(
  max(role)
  for project in (BI, BID)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/1d70a/6)。

这也可以使用带有`CASE`表达式的聚合函数来编写：

```
;with cte as
(
  select username, project, 
    STUFF((SELECT distinct '' + t.[role]
         from UserAccess t
         where u.username = t.username
           and u.project = t.project
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,0,'') role
  from UserAccess u
)
select username,
  max(case when project = 'BI' then role end) BI,
  max(case when project = 'BID' then role end) BID
from cte
group by username; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/1d70a/8)

# javascript - 地图详细信息请求返回国家/地区而不是格式化地址

> ID：15837119
> 
> 赞同：0
> 
> 时间：2013-04-05T14:55:35.503
> 
> 标签：javascript, google-maps, google-maps-api-3

使用像下面这样的参考，`getDetails`来自 Google Maps API 的请求仅返回国家名称`formatted_address`而不是正确的地址。这只发生在某些参考文献中。奇怪的是，`lat` `lon`几何信息仍然准确。

例如：`CkQ6AAAAD2g0J8ZLITG7f4r0o5wrWjM9V-6AFj4Ow3Ho_Y42sJM-H-4jZ2WTdLNEjPDGSHT7OLHddGrrGJZeZ_5iwV2fKBIQ9TcBmVdYKoNQcJU5uyNm3xoUO36bjZCWDwTVY6Hs6GIA2EruYa8`应该返回*Merianplatz，Frankfurt am Main*而不是*德国*

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:16:01.813

Places-API 返回用户创建的地点的结果，当用户没有提供所需的详细信息时，您将无法获得它们。（在[谷歌地图](https://maps.google.com/maps/place?cid=12076958130838851004)上 ，您也只会得到地址“德国”）

但是，您可以根据返回的 geometry 额外对位置进行地理编码`(50.1201960, 8.695603999999999)`，这将为您提供正确的地址：`Merianplatz, 60316 Frankfurt am Main, Germany`

# javascript - jquery循环窗帘X无法正常工作

> ID：15837124
> 
> 赞同：0
> 
> 时间：2013-04-05T14:56:02.910
> 
> 标签：javascript, jquery, plugins, cycle

我在 jquery 中的“curtainX”循环动画有问题。第一个动画似乎在顶部中心缩小，而不是做它应该做的动画。我似乎找不到问题，现在我不知道从哪里开始。我尝试检查动画的不同选项，但似乎无法弄清楚。

```
<!DOCTYPE html>
<html>
  <head>
    <style type = "text/css">img{position:absolute;}</style>
    <script src = "jquery.js"></script>
    <script src = "jquery-ui.js"></script>
    <script src = "jquery-cycle.js"></script>
    <script src = "text/javascript">
      function start(){
        $("#blank").cycle({
          fx: 'curtainX',
          sync: false,
          delay: -4000
        });
      }
    </script>
  </head>
  <body>
    <div id = "blank" onclick = "start()">
      <img src = "img/blank.gif" style = "z-index:1"/>
      <img src = "img/1c.gif"/>
    </div>
  </body>
</html> 
```

[您可以在http://vrbj.webs.com/flipTest.html](http://vrbj.webs.com/flipTest.html)查看演示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:26:42.157

这似乎是与没有宽度和高度有关的问题。

我在[这里重写了代码](http://jsfiddle.net/Btxuu/1/)

删除宽度和高度会导致您的问题。

你可以解决改变：

```
img{position:absolute;} 
```

至

```
img{position:absolute; width: 59px; height: 74px;} 
```

还要考虑一下您编写代码的方式，看看我所写的内容。您的代码是正确的，但编写方式不如小提琴中的“插件兼容”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:43:57.987

标签中的函数在需要时被调用。尝试在标签中移动您的 start 函数并将其放在 $(document).ready(your function ) 调用中

# sql - SQL 查询获取新 ID 值的第一行，然后对重复 ID 值的计数求和

> ID：15837126
> 
> 赞同：0
> 
> 时间：2013-04-05T14:56:14.590
> 
> 标签：sql, ms-access

假设我有一个这种形式的表：

```
ID Value      Data
   1            A
   1            B
   1            C
   2            Q
   2            J
   3            D 
```

我希望查询返回...

```
 A (3 total)
 Q (2 total)
 D (1 total) 
```

所以正如标题所说，我想在 ID 值发生变化时第一次获取“数据”的值。有3个ID值为1，Data的第一个值为A，所以返回A（共3个）。有两个ID值两个，Data的第一个值是Q，所以我返回Q（共2个），以此类推。

我在一个网站上做这个，所以我在如何打印东西上有一点自由。我目前正在执行两个查询，然后将它们与一个简单的 printf 一起打印（真实数据的数据列比上面示例中的多）。

```
 $sql = "SELECT COUNT(VIN)
    AS vinCount 
    FROM TestTable 
    WHERE (JobNumber='$jobNum') AND (AssignedEmp='$EmpName')
    GROUP BY WorkOrderNumber"; 
```

在此示例中，WorkOrderNumber 扮演 ID 值的角色，我试图将 VIN 的数量相加

这每次都会抓取正确的数字（例如“总共 3 个”），不会失败。

我真正的问题是获取第一行值（上面示例中的 A、Q、D）。问题是**我不能有一个'where WorkOrderNumber='语句，因为事先我不知道它们是什么。**它们是用户生成的，所以我不得不查找它们。

有什么我忽略的吗？这是我第一次尝试的查询，显然不起作用。

```
 $sql = "SELECT FIRST (JobStage + ' ' + WorkItem + ' ' + VIN + ' ' + Make + ' ' + Model + ' ' + ExColor) 
    AS WorkSelection 
    FROM TestTable 
    WHERE (JobNumber='$jobNum') AND (AssignedEmp='$EmpName')"; 
```

是否有某种 WHERE 子句我可以添加到这在逻辑上等同于“如果这是 WorkOrderNumber 的前所未见的值，抓住它”？

编辑：我最终这样做了....

```
 //Grab number of cars
    $sql = "SELECT COUNT(VIN)
    AS vinCount 
    FROM TestTable 
    WHERE (JobNumber='$jobNum') AND (AssignedEmp='$EmpName')
    GROUP BY WorkOrderNumber";

    $number = odbc_exec($connection, $sql);                             

    //Grab car description
    $sql = "SELECT (tmp.JobStage + ' ' + WorkItem + ' ' + VIN + ' ' + Make) AS WorkSelection
    FROM ( SELECT JobStage, WorkItem, VIN, Make FROM TestTable WHERE (JobNumber='$jobNum') AND (AssignedEmp='$EmpName')) AS tmp";

    $rs = odbc_exec($connection, $sql);

    while(odbc_fetch_row($number)){
        odbc_fetch_row($rs);
        odbc_fetch_row($rs);
        $count = odbc_result($number, 'vinCount');
        $row = odbc_result($rs, 'WorkSelection');
        //$row = odbc_result($rs, 'WorkSelection');
        printf("<option value='%s'>(%s other cars) %s</option>", $row, $count, $row);
    } 
```

只需将其拆分为两个查询，然后将它们一起打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:11:46.390

假设 MSSQL：

```
WITH cte As
(
  SELECT
    -- NB: Replace the "ID" in "ORDER BY ID" 
    -- with the real column you're sorting on:
    ROW_NUMBER() OVER (PARTITION BY ID ORDER BY ID) As RowNumber,
    COUNT(1) OVER (PARTITION BY ID) As NumberOfRows,
    Data
  FROM
    TestTable
)
SELECT
  Data,
  NumberOfRows
FROM
  cte
WHERE
  RowNumber = 1 
```

[http://www.sqlfiddle.com/#!3/34385/1](http://www.sqlfiddle.com/#!3/34385/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:16:14.753

试试这个 ：

```
SELECT
    tmp.Data,
    COUNT(Table.ID)
FROM(
    SELECT
        ID,
        Data
    FROM Table 
    GROUP BY 
        ID
) as tmp
INNER JOIN Table
    ON Table.ID = tmp.ID
GROUP BY 
    tmp.Data 
```

但这将适用于 mysql，因为在 mysql 中，我按 ID 分组的内部查询数据的值将是第一次遇到，就像你想要的那样，但在其他 DBMS（如 oracle 或 sql server）上，我认为它不会起作用。

# mysql - Codeigniter - Where 子句中的未知列

> ID：15837128
> 
> 赞同：-2
> 
> 时间：2013-04-05T14:56:15.457
> 
> 标签：mysql, codeigniter

我有函数模型，我使用了 codeigniter 版本 2.1.3

```
function get_last_ten_absen($limit, $offset) {
  $this->db->select('absen.id_absen, absen.tanggal, absen.nis, siswa.nama, kelas.kelas, absen.absen');
  $this->db->from('absen, siswa, kelas, semester');
  $this->db->where('siswa.id_kelas=kelas.id_kelas');
  $this->db->where('absen.nis=siswa.nis');
  $this->db->where('semester.id_semester=absen.id_semester');
  $this->db->order_by('absen.tanggal', 'desc');
  $this->db->limit($limit, $offset);
  return $this->db->get();
} 
```

我收到错误

```
A Database Error Occurred    
Error Number: 1054    
Unknown column 'siswa.id_kelas=kelas.id_kelas' in 'where clause' 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:02:41.210

你`where`是不正确的 - 它接受一个数组而不是一个字符串：

```
$this->db->where('siswa.id_kelas=kelas.id_kelas'); 
```

应该

```
$this->db->where('siswa.id_kelas', 'kelas.id_kelas'); 
```

与往常一样，[该手册](http://ellislab.com/codeigniter/user-guide/database/active_record.html)很有帮助……

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-05T15:08:38.267

无论如何，这不是 db->where() 的工作方式......

```
$this->db->where('siswa.id_kelas=kelas.id_kelas'); 
```

应该：

```
$this->db->where('siswa.id_kelas', 'kelas.id_kelas'); 
```

# python - 使用 Django 进行大型查询的文本框警告

> ID：15837147
> 
> 赞同：0
> 
> 时间：2013-04-05T14:57:13.650
> 
> 标签：python, django, webserver

我正在使用 Django 为项目创建网站。用户填写表格，然后我使用这些数据运行一些查询并将结果显示在另一个页面上。目前它是一个两页的网站。

如果他们的查询结果数据非常大，我想警告用户。假设用户最终在结果表中获得 1000 行，我想警告用户这种大小的查询可能需要很长时间才能加载。我想在表单页面和结果页面之间，我可以制作一个显示警告的弹出文本框。如果查询对象大小大于 1000，我可以显示此框。

Django 有方法让我实现这个吗？如何在显示结果页面模板之前显示此文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:06:39.867

是的，查询对象有这样的方法。很简单：query.count()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:17:37.403

不，我不认为 django 有一个功能可以做到这一点。不过，如果您愿意，您可以使用 django 和 javascript 轻松做到这一点。

加载一个有 1000 个结果的网站真的不是很多。如果结果的数量影响性能，请将它们[分页](https://docs.djangoproject.com/en/dev/topics/pagination/)。

我认为直接加载结果页面可能会更干净一些：

1.  分页结果
2.  没有结果并且在页面加载后有一个ajax请求获取结果，所以页面在加载所有结果时不会滞后

您的用户会如何看待中间弹出窗口？我相信可以最大限度地提高他们的体验，以尽可能最快、最少干扰的方式加载页面

# selenium - 在 Capybara 中选择具有多个类的元素

> ID：15837151
> 
> 赞同：8
> 
> 时间：2013-04-05T14:57:19.290
> 
> 标签：selenium, capybara

我正在用 Selenium 在 Capybara 中编写自动化代码。我的 HTML 中有以下元素，我想在 Capybara 中单击此元素。

```
<a href="#" class="classA classB">click me</a> 
```

目前，工作方式类似于以下。

```
find('.classA', :text=>"click me").click 
```

但我想像这样从两个类的名称中选择元素

```
find('a.classA.classB').click
click_on('a.classA.classB') 
```

我知道我们可以触发 javascript 代码，但这并不聪明。

```
page.execute_script('$("a.classA.classB").click()') 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T15:13:55.150

您可以通过以下方式搜索元素`xpath`

根据您的示例，似乎以下应该有效

```
//div[contains(@class, 'classA') and contains(@class, 'classB')] 
```

你也可以使用`css`

```
(:css, ".classA.classB") 
```

# ruby-on-rails - 配置 Ruby on Rails 以生成 .js 而不是 js.coffee

> ID：15837156
> 
> 赞同：11
> 
> 时间：2013-04-05T14:57:32.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, configuration, coffeescript

有没有办法在生成新控制器时配置 ruby​​ on rails 以生成 .js 文件而不是 .js.coffee。我不想使用 CoffeeScript，而且不得不重构我的所有文件很烦人。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-05T14:59:48.367

从[如何在 Rails 3.1 应用程序中完全禁用 CoffeeScript？](https://stackoverflow.com/questions/8722195/how-can-i-completely-disable-coffeescript-in-a-rails-3-1-app)

```
Comment out gem "coffee-script" in your Gemfile
Use .js instead of .js.coffee for your javascript files 
```

# html - SVG 不能用作背景

> ID：15837157
> 
> 赞同：0
> 
> 时间：2013-04-05T14:57:37.780
> 
> 标签：html, css, svg, textures, adobe-illustrator

我做了一个半透明的svg。这是一个 50% 不透明度的圆形金属纹理。当我把它放在任何其他颜色之上时，它看起来就像真正的金属。它是使用 Illustrator 制作的，有 2 种效果：像素化>Mezzotint>GrainyDots 和 Blur>RadialBlur。然后我做了一个剪贴蒙版。这是它的链接[https://dl.dropbox.com/u/99185097/metalTex.svg](https://dl.dropbox.com/u/99185097/metalTex.svg). 当我通常打开它时，它可以正确查看，但是当我将它用作我的 HTML5 页面的 CSS3 中的背景时，它不会打开。我确信这不是我的 CSS 编码的错，因为当我使用另一个非常简单的 svg 作为背景时，它会打开。我认为这可能是 Illustrator 效果，也许当您将其用作背景时它们不会查看。这些效果也使其达到 4.46mb。请提出解决方案。将其设为 png 是行不通的，因为有时它需要覆盖极长的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:09:44.580

请正确**扩展**您的矢量文件，保存然后再次将其导出为 svg 文件并转到背景。它现在可以工作了。

# oracle - to_timestamp 遇到小数秒必须在 0 到 999999999 之间

> ID：15837158
> 
> 赞同：0
> 
> 时间：2013-04-05T14:57:38.917
> 
> 标签：oracle, plsql, oracle10g, oracle11g

在此处输入代码这是代码

```
select to_timestamp('03-APR-13 01.15.31.6754542 PM','DD-MON-RR HH.MI.SS.FF4 AM') from dual; 
```

我最初打算将毫秒精确到 4 位，但显示错误。我发现 .ff 的数字是否等于或大于 7，即 6754542 的数字，例如：

```
select to_timestamp('03-APR-13 01.15.31.6754542  PM','DD-MON-RR HH.MI.SS.FF8 AM') from dual;
select to_timestamp('03-APR-13 01.15.31.6754542  PM','DD-MON-RR HH.MI.SS.FF9 AM') from dual; 
```

等等。他们总是显示 03-APR-13 01.15.31.675454200 PM，9 位数字......我怎样才能将毫秒精确到 4 位数字，或者永远不精确？请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:34:45.573

```
SELECT 
  TO_CHAR(
    TO_TIMESTAMP('03-APR-13 01.15.31.6754542  PM',
               'DD-MON-RR HH.MI.SS.FF AM'),
  'DD-MON-RR HH.MI.SS.FF4 AM')
FROM DUAL; 
```

# sql-server - BEGIN-END 内 BEGIN TRY- END TRY

> ID：15837165
> 
> 赞同：1
> 
> 时间：2013-04-05T14:58:11.533
> 
> 标签：sql-server

我尝试`BEGIN-END`自由使用。在这种情况下使用这个结构有什么意义吗？：

```
BEGIN TRY           
    BEGIN

         --do x
         --do y  

    END 
END TRY

BEGIN CATCH
    BEGIN

         --do z

    END                                                 
END CATCH; 
```

或者使用以下内容是否同样安全？：

```
BEGIN TRY           

         --do x
         --do y  

END TRY

BEGIN CATCH

         --do z

END CATCH; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:03:22.397

一个`begin try ... end try`块本身就是一个完整的块，里面没有多余的`begin ... end`东西。

用于`begin ... end`本身不是块的语句，例如`if`：

```
if ... begin
  ...
end else begin
  ...
end 
```

# java - 在 OpenGL 中使用 ByteBuffer 作为纹理

> ID：15837167
> 
> 赞同：2
> 
> 时间：2013-04-05T14:58:16.690
> 
> 标签：java, video, opengl-es, jogl, fragment-shader

我正在开发应将视频数据流式传输到 OpenGL (ES2) 的应用程序。对于视频的每一帧，我可以获得一个包含所有数据的 ByteBuffer。我想一种方法是将其转换为 OpenGL 纹理，然后在 OpenGL 中使用 sampler2D。但是，感觉就像我已经得到了那个 ByteBuffer 一样，将具有宽度和高度的数据发送到 OpenGL 并以某种方式从着色器中读取像素数据会更有效。应用程序将只显示 2D 视频，但应使用片段着色器对数据进行操作。

我的问题是 OpenGL 是否内置了任何东西来简化这一点（即使用 ByteBuffer 数组作为纹理）？是否可以在 ByteBuffer 数组上使用 sampler2D 或等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:10:18.480

*“但是，感觉就像我已经得到了那个 ByteBuffer”* - 你明白了，但 OpenGL 没有。所以你*必须以**某种方式*将这些数据放入你的纹理中。OpenGL 无法使用任意 CPU 数据进行纹理处理。

但是，您可以通过将视频帧直接放入映射的 PBO（如果 ES 支持它们）而不是 ByteBuffer（如果在您的框架内甚至可能的话）中进行流式传输，然后将其从该 PBO 复制到纹理中，这*可能会*购买您某物。但无论如何，你*必须*调用`glTexSubImage2D`（并且一定不要忘记`Sub`在那里，否则你将在每一帧重新分配整个纹理存储）。

# sql-server-2008 - SQL查询显示特定日期范围内没有相关记录的记录

> ID：15837172
> 
> 赞同：0
> 
> 时间：2013-04-05T14:58:28.720
> 
> 标签：sql-server-2008, tsql

SQL Server 2008 R2 我有两个表。一个 Main 记录，另一个是与 Main 相关的 Notes，具有公共键字段 sysid 和 main_id。（一个主记录可以有多个注释）

我想在主表中列出过去 30 天内没有在 Notes 表中创建的与该记录相关的记录的记录。

> 主表 FIELDS > file_number, sysid
> 
> 备注表 FIELDS > note_date, main_id

我已经尝试了一百种不同的搜索建议，但没有什么能满足我的需求。我认为以下是最接近的，但它只提供根本不存在注释的记录，而且我没有看到有现有注释但在过去 30 天内没有任何注释的主要记录。如果我取出这`AND db.notes.[date] > DATEADD(dd,-30,getdate()))`条线，我会得到相同的结果。

```
SELECT *
  FROM db.main
 WHERE NOT EXISTS(SELECT NULL
       FROM db.notes
       WHERE db.main.sysid = db.notes.main_id AND db.notes.[date] > DATEADD(dd,-30,getdate()))
 ORDER BY db.main.ile_number 
```

任何建议将不胜感激。

* ***客户要求增加一列。最后注日期。所以他们想要 x 天内没有注释的主要记录列表以及最后一个注释的日期是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:04:46.453

我会用左外连接来做到这一点：

```
select * 
from db.main m
left outer join db.notes n on m.sysid = n.main_id 
    and n.[date] > dateadd(dd, -30, getdate())) 
where n.main_id is null
order by m.ile_number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:05:03.327

这是你想要的？

选择 *

来自 db.main

sysid 不在的地方

```
(select main_id FROM notes) 
```

联盟

选择 *

来自 db.main

sysid 不在的地方

```
(select main_id 

FROM notes 

WHERE notes.[date] > DATEADD(dd,-30,getdate())

) 
```

# ruby-on-rails - 新操作不起作用，调用 Category.new() 时出现路由错误

> ID：15837173
> 
> 赞同：0
> 
> 时间：2013-04-05T14:58:28.813
> 
> 标签：ruby-on-rails, ajax, mongoid

我有一个自定义重新排序操作，它通过 ajax 创建新项目。对站点的其他部分进行一些更改后，新建操作不起作用。

当我转到页面`categories/reorder`时，或者`categories/new`它正确加载页面时，但前提是我注释掉该行`@category = Category.new()`。

一旦我尝试设置`@category = Category.new()`, `@category = Category.new(:parent_id => params[:parent_id])`, 或者`@category = Category.new`它会给我错误消息：

```
No route matches {:action=>"edit", :controller=>"categories", :id=>#<Category _id: 515ee18c10188f64fb000001, created_at: nil, updated_at: nil, deleted_at: nil, ancestry: nil, user_id: nil, name: nil, description: nil, image: nil, lock: nil, _slugs: []>} 
```

我删除了我的数据库，以防有一些条目以某种方式给了我这个错误，但是在再次登录时它仍然给我这个消息。

## 这是我的路线文件：

```
 match '/auth/:provider/callback' => 'sessions#create'
  match '/auth/failure' => 'sessions#failure'
  match '/signout' => 'sessions#destroy', :as => :signout
  match '/signin' => 'sessions#new', :as => :signin

  match "reorder/symbols" => "categories#reorder", :via => :get, :as => :reorder_symbols
  resources :pages do
    resources :blocks do
      collection { post :sort }
    end
  end

  get 'symbols/:id/search/', to: 'categories#search', as: :sift_meanings

  get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "signup" => "users#new", :as => "signup"
  resources :users
  resources :sessions
  match "meanings/:id/delete" => "meanings#destroy", :via => :get, as: :delete_meaning

  match "symbols/gallery/:id" => "categories#gallery", :via => :get
  resources :symbols, :as => :categories, :controller => :categories do
    resources :meanings
    collection {post :sort}
  end

  root :to => 'categories#index' 
```

## 控制器文件：

```
class CategoriesController < ApplicationController
  helper :lego
  helper :meanings

  def index
    @categories = Category.all
    if params[:id]
      @categories = Category.find(params[:id])                      #if params[:id]
      @categories = @categories.subtree.arrange(:order => 'name')
    elsif params[:view] == "alpha"
      @alphabet   = Category.all.group_by{|c| c.name[0]}
      @see_kids   = false
      @categories = @categories.sort(:name => "ASC")                            if !params[:letter]
      @categories = @categories.where(name: eval("/^#{params[:letter]}/i")).sort(:name => "ASC")     if params[:letter]
    else
      # @categories = Category.all
      @categories = @categories.arrange(:order => 'name')               #if params[:view] != "list"
    end

    respond_to do |format|
      format.html # index.html.erb
      format.js
      format.json { render json: @categories }
    end
  end

  def reorder
    if Rails.env != "production" && !request.xhr?
      flash[:info] = "Currently in #{Rails.env} mode."
    end
    @categories = Category.arrange(:order => 'name')
    # @category = Category.new
    @next = Category.count
    respond_to do |format|
      format.html # index.html.erb
      format.js
      format.json { render json: @categories }
    end
  end

  def sort
    params[:category].each do |id, attr|
      thisCat = params[:category][id]
      @category = Category.where(:_id => id).first
      if thisCat.nil? || thisCat == 'null'
        @category.parent_id = nil
      else
        @category.parent_id = thisCat.to_s
      end
      @category.save
    end
  end

  def gallery
    @categories = Category.arrange(:order => 'name')
    @category = Category.find(params[:id])
    @siblings = Category.siblings_of(params[:id])
    respond_to do |format|
      format.html # index.html.erb
      format.js
      format.json { render json: @category }
    end
  end

   def show
     @categories = Category.arrange(:order => 'name')
     @category   = Category.find(params[:id])
     @updater    = User.find(@category.user) || nil
     @siblings   = Category.siblings_of(params[:id])
     @meanings   = @category.meanings #Meaning.where(:category_id => params[:id])
     @belief_list    = []
     @culture_list   = []
     @contributors   = []
     @connotations   = []
     for meaning in @meanings
       for belief in meaning.beliefs
         @belief_list << belief 
       end
       for culture in meaning.cultures
         @culture_list << culture
       end
       @connotations << meaning.connotation
       @contributors << meaning.user
     end
     @beliefs      = @belief_list.uniq
     @cultures     = @culture_list.uniq
     @contributors = @contributors.uniq
     @connotations = @connotations.uniq

     respond_to do |format|
       format.html # show.html.erb
       format.js
       format.json { render json: @category }
     end
   end

  def search
    @categories = Category.arrange(:order => 'name')
    @category = Category.find(params[:id])

    @meanings = @category.meanings
    @meanings = @meanings.where(:beliefs => params[:beliefs])         if params[:beliefs]
    @meanings = @meanings.where(:cultures => params[:cultures])       if params[:cultures]
    @meanings = @meanings.where(:connotation => params[:connotation]) if params[:connotation]
    @meanings = @meanings.where(:user => params[:user])               if params[:user]    
  end

  # GET /categories/new
  # GET /categories/new.json
  def new
    @category = Category.new(:parent_id => params[:parent_id])
    # @category.photo.build
    respond_to do |format|
      format.html # new.html.erb
      format.js
      format.json { render json: @category }
    end
  end

  # GET /categories/1/edit
  def edit
    @category = Category.find(params[:id])
  end

  # POST /categories
  # POST /categories.json
  def create
    @category = Category.new(params[:category])
    @category.user = current_user
    @categories = Category.arrange(:order => :created_at)
    if @category.save
      flash[:success] = "<h4><i class=icon-ok></i> '#{@category.name}' was successfully created.</h4>"
    end
    respond_to do |format|
      if @category.save
        format.html { redirect_to @categories, notice: 'Category was successfully created.' }
        format.js
        format.json { render json: @categories, status: :created, location: @category }
      else
        format.html { render action: "new" }
        format.js 
        format.json { render json: @category.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /categories/1
  # PUT /categories/1.json
  def update
    @category = Category.find(params[:id])
    @category.user = current_user
    flash[:success] = "<h4><i class=icon-ok></i> #{@category.name} was successfully updated.</h4>"
    respond_to do |format|
      if @category.update_attributes(params[:category])
        format.html { redirect_to @category}
        format.js
        format.json { head :no_content }
      else
        format.html { render action: "edit", error: "Unable to update '#{@category.name}'", status: :unprocessable_entity }
        format.json { render json: @category.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /categories/1
  # DELETE /categories/1.json
  def destroy
    @category = Category.find(params[:id])
    @category.destroy
    flash[:alert] = "<h4><i class=icon-warning-sign></i> Warning. You have deleted the category '#{@category.name}'.</h4>".html_safe

    respond_to do |format|
      format.html { redirect_to categories_url }
      format.json { head :no_content }
      format.js 
    end
  end

  def has_sidebar?
    self.has_children?
  end
private

end 
```

唯一需要注意的另一件事是，我发现在恢复到较旧的工作版本时，我必须重新启动服务器，因为未正确设置较少的 Twitter Bootstrap 变量。但我认为这不应该影响这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:30:23.147

如果您跟踪堆栈跟踪，它会告诉您错误在哪里。由于您提到这仅在您添加调用时才会发生`@category = Category.new`，所以我只能认为这是因为您正在使用`@category`创建编辑链接。但由于`@category`是一个新对象，你会得到错误。尝试查看可以找到编辑链接的视图文件。

# javascript - 贝宝没有选择选择

> ID：15837174
> 
> 赞同：0
> 
> 时间：2013-04-05T14:58:28.907
> 
> 标签：javascript, paypal

我在我的音乐团体的网站上为部分季票套餐销售创建了一个脚本。用户将选择 4 个音乐会节目，然后为每个所选音乐会节目选择日期。所有这些选择都需要发布到 Paypal 进行处理/购买。我的“添加到购物车”按钮确实会发送到 Paypal，但音乐会节目和日期没有被选中。票房人士需要这些信息。你可以在这里看到我的代码：http: [//jsfiddle.net/saraswati/v6Pur/66/](http://jsfiddle.net/saraswati/v6Pur/66/)

这是HTML：

```
<form target="paypal" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post"><strong><a name="Partial">Partial</a> subscription (4 concerts), Regular Price: $87.00 (a savings of 13%)</strong>
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="add" value="1">
<input type="hidden" name="business" value="temp_1344946752_biz@me.com">
<input type="hidden" name="item_name" value="Partial subscription (4 concerts), Regular Price">
<input type="hidden" name="amount" value="87.00">
<input type="hidden" name="currency_code" value="USD">

<table width="90%" cellspacing="0" cellpadding="0" border="1">
<CAPTION>Please select the desired concert program and then the desired date from the pull-down menus. Then click the "Add to Cart" button.</CAPTION>

<tr id="row1" align=center>
<td><font color="#990000">Concert 1:</font></td>
<td><font color="#990000">Concert 2:</font></td>
<td><font color="#990000">Concert 3:</font></td>
<td><font color="#990000">Concert 4:</font></td>
</tr>
<tr id=row2>
<td><input type="hidden" name="os0" value="Concert 1"><body onload="ChangeDateDropList ();">   
    <select id="program1" onchange="ChangeDateDropList(1);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date1"> 
    </select> 
</body>
</td>

<td><input type="hidden" name="os1" value="Concert 2"><body onload="ChangeDateDropList ();">   
    <select id="program2" onchange="ChangeDateDropList(2);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date2"> 
    </select>
</body> 
</td>

<td><input type="hidden" name="os2" value="Concert 3"><body onload="ChangeDateDropList ();">   
    <select id="program3" onchange="ChangeDateDropList(3);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date3"> 
    </select> 
</body>
</td>

<td><input type="hidden" name="os3" value="Concert 4"><body onload="ChangeDateDropList ();">   
    <select id="program4" onchange="ChangeDateDropList(4);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date4"> 
    </select> 
</body>
</td>
</tr>
</table>
<br>
<center>
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_cart_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</center> 
```

这是Javascript：

```
 var progamsAndDates = {};
    progamsAndDates.TUDORS = ['Sept. 15', 'Sept. 16'];
    progamsAndDates.NOCHES = ['Oct. 20', 'Oct. 21'];
    progamsAndDates.CHRISTMAS = ['Dec. 14', 'Dec. 15', 'Dec. 16'];
    progamsAndDates.CELTIC = ['Jan. 26', 'Jan. 27'];
    progamsAndDates.UNREQUITED = ['Mar. 02', 'Mar. 03'];
    progamsAndDates.SECRET = ['Apr. 20', 'Apr. 21'];

    function ChangeDateDropList (id) { 

        var programDropList = document.getElementById ("program"+id);
        var dateDropList = document.getElementById ("date"+id);
        var selProgram = programDropList.options[programDropList.selectedIndex].value;

        // remove all dates
        while (dateDropList.options.length) {
            dateDropList.remove (0);
        }

        // add new dates
        var dates = progamsAndDates[selProgram];
        if (dates) {
            for (var i=0; i < dates.length; i++) {
                var date = new Option (dates[i], i);
                dateDropList.options.add (date);
            }
        }
    } 
```

同样，当我单击“添加到购物车”按钮时，它转到 Paypal，描述为“部分订阅（4 场音乐会），常规价格”，它会显示商品价格等。但是，描述也应该显示选择，例如“都铎王朝，9 月 15 日；凯尔特人，1 月 27 日；等等。” 我质疑你们所有人在实现这一目标方面的智慧。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:50:04.470

您传递的变量不正确。您正在传递变量，例如 on0、os0、on1、os1。这些对于添加到购物车按钮或立即购买按钮是正确的，但是由于您使用的是购物车上传方法，因此它们需要像 on0_1、os0_1、on1_2 和 os1_2 一样传递。这将纠正您的问题，然后它们应该会出现。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="business" value="my_email@my_site.com">

<input type="hidden" name="item_name_1" value="Football T-Shirt">
<input type="hidden" name="amount_1" value="1.00">
<input type="hidden" name="on0_1" value="Color">
<input type="hidden" name="os0_1" value="Red">
<input type="hidden" name="on1_1" value="Size">
<input type="hidden" name="os1_1" value="Small">

<input type="hidden" name="item_name_2" value="Notebook">
<input type="hidden" name="amount_2" value="2.00">
<input type="hidden" name="on0_2" value="Number of Pages">
<input type="hidden" name="os0_2" value="200">
<input type="hidden" name="on1_2" value="Type">
<input type="hidden" name="os1_2" value="3 Ring">

<input type="submit" value="PayPal">
</form> 
```

# android - 使用矩阵。在 OpenGL ES 2.0 中旋转

> ID：15837177
> 
> 赞同：7
> 
> 时间：2013-04-05T14:58:45.443
> 
> 标签：android, rotation, opengl-es-2.0, translate-animation

**编辑**- 添加了更多代码

尝试使用 OpenGL ES 2.0 正确旋转我的四边形时遇到很多问题。

它似乎总是围绕屏幕坐标的中心旋转。我试图让它围绕它自己的中心旋转（对于 2d，所以仅限 z 轴）。

我一直在试验 Matrix.translate，如下所示。但是，在此处更改 x 或 y 位置只会在屏幕上的不同位置绘制四边形，但是当它旋转时，它会再次围绕屏幕中心旋转。请有人解释一下如何让它绕着它自己的z轴旋转（就像一个轮子）？

谢谢，这是相关的代码行 - 如果需要更多，请询问，我会发布。（请注意，我在 SO 和更广泛的互联网上查看了很多类似的问题，但到目前为止我还没有找到答案）。

谢谢。

```
//Set rotation
Matrix.setRotateM(mRotationMatrix, 0, -angle, 0, 0, 1.0f);

//Testing translation
Matrix.translateM(mRotationMatrix, 0, -.5f, .5f, 0f);

// Combine the rotation matrix with the projection and camera view
Matrix.multiplyMM(mvpMatrix, 0, mRotationMatrix, 0, mvpMatrix, 0); 
```

**我的着色器（在类级别声明）**

```
private final String vertexShaderCode =
"uniform mat4 uMVPMatrix;" +

"attribute vec4 vPosition;" +
"void main() {" +
" gl_Position = uMVPMatrix * vPosition;" +
"}";

private final String fragmentShaderCode =
"precision mediump float;" +
"uniform vec4 vColor;" +
"void main() {" +
" gl_FragColor = vColor;" +
"}"; 
```

**从 onSurfaceChanged**

```
float ratio = (float) width / height;
Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7); 
```

**在我的 onDrawFrame 方法中**

```
// Set the camera position (View matrix)
Matrix.setLookAtM(mVMatrix, 0, 0, 0, 3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

//Calculate the projection and view transformation
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T09:17:35.747

我遇到了同样的问题（看到奇怪的扭曲和其他一切），我的解决方案基于[Android 培训 > 使用 OpenGL ES 显示图形 > 添加运动](http://developer.android.com/training/graphics/opengl/motion.html "Android 培训 > 使用 OpenGL ES 显示图形 > 添加运动")。

（如果需要，请转到我的详细帖子： [OpenGL ES Android Matrix Transformations](https://stackoverflow.com/questions/13480043/opengl-es-android-matrix-transformations/17292894#17292894)。）

1.  将*mModelMatrix*设置为单位矩阵

    ```
    Matrix.setIdentityM(mModelMatrix, 0); // initialize to identity matrix 
    ```

2.  将翻译应用于*mModelMatrix*

    ```
    Matrix.translateM(mModelMatrix, 0, -0.5f, 0, 0); // translation to the left 
    ```

3.  *对mRotationMatrix*应用旋转（以度为单位的角度）

    ```
    Matrix.setRotateM(mRotationMatrix, 0, mAngle, 0, 0, -1.0f); 
    ```

4.  *通过Matrix.multiplyMM*组合旋转和平移

     *```
    mTempMatrix = mModelMatrix.clone();
    Matrix.multiplyMM(mModelMatrix, 0, mTempMatrix, 0, mRotationMatrix, 0); 
    ```* 
**   将模型矩阵与投影和相机视图相结合

    ```
    mTempMatrix = mMVPMatrix.clone();
    Matrix.multiplyMM(mMVPMatrix, 0, mTempMatrix, 0, mModelMatrix, 0); 
    ```* 

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T16:53:21.973

这是一个演练。假设你要画一个茶壶...... modelMatrix 将是一个身份开始。形状以原点为中心，如下所示：

![预旋转和平移](https://i.imgur.com/qKwWPy7.png)

在继续之前验证这是您所拥有的...

一旦你有了，你应该将旋转应用于模型矩阵，编译+运行 - 你得到一个旋转的副本......

![旋转](https://i.imgur.com/Uj2wgP0.png)

一旦你有了这个，你可以翻译：

![旋转和平移](https://i.imgur.com/xNNGzdo.png)

所以对你来说，你需要做的就是验证旋转矩阵何时是恒等式，例如 Matrix.setIdentityM(mRotationMatrix,0); 形状在中心。如果不是将其移至中心。

一旦它在中心应用旋转例如

```
 Matrix.setIdentityM( mRotationMatrix,0); 
    <as needed movement to center>

    Matrix.rotate(mRotationMatrix, 0, -angle, 0, 0, 1.0f);
    <any other translation you want> 
```

分步进行，让您的生活更轻松，以便您了解正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:05:10.017

旋转通常发生在原点周围，因此您希望在平移四边形之前对其进行旋转。如果在平移后旋转，则四边形将首先从原点移开，然后围绕原点旋转。

在不知道您的 Matrix 函数是如何实现的情况下，我们无法就您是否正确使用它们提供建议。您在函数界面中向我们展示的所有内容。

但一般来说，在翻译*之前先*旋转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T22:59:41.023

向后应用您的操作：

1st- Matrix.translateM(mRotationMatrix, 0, -.5f, .5f, 0f);

2nd- Matrix.setRotateM(mRotationMatrix, 0, -angle, 0, 0, 1.0f);

它将围绕自己的中心旋转*

# jquery - jquery 全局变量随处可用

> ID：15837179
> 
> 赞同：0
> 
> 时间：2013-04-05T14:58:47.443
> 
> 标签：jquery

我开始怀疑 jquery 是否易于使用和灵活。我有这个：

```
var prodata=[];
var request = $.get("proDB.txt", function(data) {
    var lines=data.split(/\n/);
    var numberofmodels=lines.length-2;
    //var prodata=[];
    var i;
    prodata.push(0);
    var fieldnames=lines[0].split(/\t/);
    for (i = 1; i < lines.length-1; ++i) {
        var fields=lines[i].split(/\t/);
        prodata.push(i);            
        var j;
        prodata[i]={};
        for (j = 0; j < fields.length; ++j) {
            //prodata[i][fieldnames[j]]=fields[j];
            var str=fieldnames[j];
            prodata[i][str]=fields[j];

        }
    }

    //FILL THE DROPDOWN LIST
    var options = '';
    for (i = 1; i < lines.length-1; ++i) {
        if (prodata[i]['name'].indexOf("elly") >= 0) {
            var iselected = i;
        }
        options += '<option label="bla" value="' + prodata[i]['id'] + '">' + prodata[i]['name']+', '+prodata[i]['brand']+', '+prodata[i]['model']+'</option>';
    }
    $("#userchosenpromodel").html(options);
    //SELECT DEFAULT OPTION
    $('#userchosenpromodel option[value="' + prodata[iselected]['id'] + '"]').attr("selected", "selected");
}, 'text'); //$.get 
```

在这样定义之后，我想`proId`在我的代码中使用 , 较低的：

```
//SUBMIT FORM
$('#submitbutton').click(function(e) {
    e.preventDefault(); 
    request.done(function(){
        proId=$('#userchosenpromodel option[selected="selected"]').val();
        proId=parseInt(proId);
        computeUserDimensions(prodata[proId]);
    });
});
    console.log(proId); 
```

如何？

同样的问题`prodata`......我有`request.done`我无法摆脱的问题

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:01:08.243

jQuery 没有问题，但基于异步/事件的逻辑。

您**不能**同步使用异步函数的返回。您必须在回调或从回调调用的函数中使用结果：

```
request.done(function(){
    var proId=$('#userchosenpromodel option[selected="selected"]').val();
    console.log(proId);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:02:19.753

为什么不这样做：

```
request.done(function(){
    proId=$('#userchosenpromodel option[selected="selected"]').val();
    doSomethingWithProId();
});

function doSomethingWithProId(){
    console.log(proId);
} 
```

或者所以它不需要是全局的

```
request.done(function(){
    var proId=$('#userchosenpromodel option[selected="selected"]').val();
    doSomethingWithProId(proId);
});

function doSomethingWithProId(proId){
    console.log(proId);
} 
```

我认为的第二个解决方案更好。无论您需要使用 proId 做什么，都可以构建您的函数来传递该数据。这样你就不需要污染全局范围。听起来你需要更好地理解 JS。

# c# - 用空格替换所有非单词字符

> ID：15837180
> 
> 赞同：7
> 
> 时间：2013-04-05T14:59:17.210
> 
> 标签：c#, regex

我有一个正则表达式

```
[A-Za-z] 
```

和一个字符串，例如

> 你好！这是一个字符串。

我想用空格替换所有不在正则表达式中的字符。所以，我会结束

> 嗨，这是一个字符串

这是怎么做到的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T15:02:27.753

```
var cleaned = Regex.Replace(given, "[^A-Za-z]", " "); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T15:02:19.503

尝试：

```
string output = Regex.Replace(input, "[^A-Za-z]", " "); 
```

# c++ - 如何将 cmd 命令输出传递给 QMake 中的#DEFINE MACRO

> ID：15837185
> 
> 赞同：4
> 
> 时间：2013-04-05T14:59:33.113
> 
> 标签：c++, svn, qmake

`#DEFINE`我在我的“.pro”文件中添加了一个新文件，如下所示：

```
#DEFINE += SVN_V 
```

现在我想将命令“svnversion -n”的输出传递给这个`SVN_V`，这就是我所做的：

```
#DEFINE += "SVN_V = svnversion -n" 
```

但结果是

> 错误：没有这样的文件或目录
> 
> 错误：svnversion：没有这样的文件或目录

那么，我到底错过了什么？（请注意我正在使用 Linux Ubuntu）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T07:03:22.543

它可能是这样的：

```
DEFINES += "SVN_V=\"\\\"$$system(svnversion -n)\\\"\"" 
```

`$$system()`是一个 qmake 函数，用于执行系统命令并从中获取输出。

SVN_V 周围的外部引号... - 用于 qmake - 它必须明白这是一个单一的定义。如果`$$system()`返回以空格分隔的字符串“未知版本”，您将得到结果：`-DSVN="Unknown -Dversion"`.

下一个引号`\"`- 将`$$system()`结果传递给编译器。没有它，您将得到两个参数而不是一个`"Unknown`and `version"`。

双引号`\\\"`是将值传递给预处理器。没有它的值将没有引号并被识别为 int。`\\\"`将由 qmake as 解析`\"`并传递给编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-26T02:42:40.327

我在桌上的分：svn info --show-item revision

# javascript - 编辑器的动态创建 - 浏览器是否需要退出该功能才能进行更改？

> ID：15837187
> 
> 赞同：1
> 
> 时间：2013-04-05T14:59:35.383
> 
> 标签：javascript, tinymce

我正在尝试像这样动态创建和销毁 TinyMCE 编辑器。1) 看来，如果我在创建后放置断点并检查 tinymce 编辑器，即在第一个 for 循环之后 - 我在浏览器中看不到它们 2) 我在控制台的 tinymce.editors 中也看不到它们

因此我的破坏不起作用。然而，在这一切之后，我可以看到编辑。因为第二个 for 循环不会被执行。

问题主要是，是否有类似功能必须退出然后浏览器进行 DOM 更改的东西？如果是这样我应该睡觉吗？我从 [什么是 sleep() 的 JavaScript 版本中得到了这个想法？](https://stackoverflow.com/questions/951021/what-do-i-do-if-i-want-a-javascript-version-of-sleep)即浏览器在函数存在或类似的东西后进行 DOM 更改。任何人都可以启发我吗？

```
for (var i=0;i<10;i++) 
    {
    //i=0;
    divObj = document.createElement('div');
    divObj.className = 'top_div';
    divObj.id = 'top_div_' + i;
    divObj.innerHTML = 'Tiny Editor';
    var textareaObj = document.createElement('textarea');
    textareaObj.className = 'simpleEdit';
    textareaObj.id = 'nic_' + i;
    textareaObj.style.cssText="width: 300px; height: 100px;";
    divObj.appendChild(textareaObj);
    document.body.appendChild(divObj);
    tinyMCE.execCommand('mceAddControl', false, textareaObj.id);
    }
    editors = tinyMCE.editors.length;

   for (var i=0;i<editors;i++)
   {
     tinyMCE.remove(tinyMCE.editors[0]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:49:19.850

您在创建编辑器后立即调用删除函数。因此，您的编辑器实例尚未完全创建 - 这就是您找不到任何实例的原因。这里正确的方法是使用 tinymce [init 配置参数 onInit](http://www.tinymce.com/wiki.php/configuration%3aoninit)，当编辑器准备好时会调用它。

# php - mysql_insert_id 函数返回 0

> ID：15837188
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:59:39.460
> 
> 标签：php

我一直在试图弄清楚为什么这个功能在 chrome 上工作，而不是在 Firefox 上。

我有一个自动增量字段，它是我从中获取 id 的主键。这是我的代码。

```
if (isset($_GET['id'])) {
    $id = $_GET['id'];
} else {
    $id = mysql_insert_id();
    echo $id;
} 
```

我已经尝试将我的连接按如下方式放入函数中，但它仍然不起作用。任何指针将不胜感激。另外，我知道 mysqli 函数，我使用这些函数是因为用户的设置很旧。

```
$id = mysql_insert_id($conn); 
```

这是我正在执行插入的代码。

```
sprintf("INSERT INTO `trade_show_orders` (`SetupDate`,`SetupEndDate`,`ShowName`,`Location`,`Literature`,`StartDate`,`EndDate`,`Attendees`,`Projected`,`File`,`Giveaways`,`AddressBox`,`LocationType`,`Title`,`FirstName`,`LastName`,`Email`,`AddressOne`,`AddressTwo`,`Zip`,`Special`,`OrderDate`,`ShippingLocation`,`ShippingAddressOne`,`ShippingAddressTwo`,`ShippingZip`,`ShippingSpecial`) VALUES ('$setupDate','$endSetup','%s','%s','$values','$eventStart','$eventEnd','%d','%d','".basename($_FILES['fileUpload']['name'])."', '%s','off','%s','%s','%s','%s','%s','%s','%s','%d','%s',NOW(),'%s','%s','%s','%d','%s')", mysql_real_escape_string($_POST['showName']), mysql_real_escape_string($_POST['location']), $_POST['numberAttendees'], $_POST['visitors'], mysql_real_escape_string($_POST['giveaways']), mysql_real_escape_string($_POST['locationType']), mysql_real_escape_string($_POST['personalTitle']), mysql_real_escape_string($_POST['personalFirstName']), mysql_real_escape_string($_POST['personalLastName']), mysql_real_escape_string($_POST['personalEmail']), mysql_real_escape_string($_POST['personalAddressOne']), mysql_real_escape_string($_POST['personalAddressTwo']), $_POST['personalZip'], mysql_real_escape_string($_POST['personalSpecial']), mysql_real_escape_string($_POST['shippingLocation']), mysql_real_escape_string($_POST['shippingAddressOne']), mysql_real_escape_string($_POST['shippingAddressTwo']), $_POST['shippingZip'], mysql_real_escape_string($_POST['shippingSpecial'])); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:05:24.367

`mysql_insert_id()`如果您`INSERT`使用当前连接进行了查询，则只会返回一个 ID。这意味着它不会从“三次点击”之前的页面请求中返回 ID。它不会返回同时执行的其他脚本完成的 ID，因为这是使用与 mysql 的不同连接完成的。

因此，请显示实际执行插入的其余代码。PHP 根本不应该关心远程运行的是什么浏览器。就 PHP 而言，它只是一个带有一些数据的 HTTP 请求。如果存在特定于浏览器的问题，它会出现在一些客户端代码中，例如一些糟糕的 javascript 执行 AJAX 请求并且没有正确填写字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:36:09.277

原来它与我的插入无关。

显然，当您在 Firefox、IE 中的表单上使用带有提交的图像时。它将图像提交从“submit”重命名为“submit_x”或“submit_y”

Chrome 和 Safari 会同时查找 submit 和 submit_x,submit_y 以及图像。

Firefox 和 IE 7、8、9 只查找 submit_x 和 submit_y，这解释了它只在 chrome 上工作的原因。

# sql - 按每组中的最高值对整个结果组进行排序

> ID：15837193
> 
> 赞同：0
> 
> 时间：2013-04-05T14:59:50.413
> 
> 标签：sql, postgresql, greatest-n-per-group, window-functions

例如，假设我在 PostgreSQL（高于 9.0）中有一个表，其中填充了数据：

```
row_id    percent    isrc
1         100        123iee43
2         100        1234wr32
3         98         123iee43
4         99         1234wr32
5         95         12313be3
6         99         12313be3
7         96         12313be3 
```

我希望我的结果包含按列分组的所有上述行`isrc`，然后按`percent`降序排列的整个组。所以结果应该是这样的：

```
row_id    percent    isrc
1         100        123iee43
3         98         123iee43
2         100        1234wr32
4         99         1234wr32
6         99         12313be3
7         96         12313be3
5         95         12313be3 
```

如果我想要升序，这就是我所期望的（我只想按一个组中的第一行排序，一个组中的其他行无关紧要）：

```
row_id    percent    isrc
6         99         12313be3
7         96         12313be3
5         95         12313be3
1         100        123iee43
3         98         123iee43
2         100        1234wr32
4         99         1234wr32 
```

我想我必须以某种方式使用*窗口函数*，但如果存在则无法找到正确的解决方案。*此外，如果解决方案尽可能优雅*，那就太好了。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:45:25.817

### 窗口功能

```
SELECT row_id, percent, isrc
FROM   tbl
ORDER  BY max(percent) OVER(PARTITION BY isrc) DESC, isrc, percent DESC; 
```

聚合函数`max()`可以用作窗口函数。我不在`ORDER BY`window 子句中使用，因为[根据文档](http://www.postgresql.org/docs/current/interactive/functions-window.html)：

> 当聚合函数用作窗口函数时，它聚合当前行窗口框架内的行。与默认窗口框架定义一起使用的聚合`ORDER BY`会产生“运行总和”类型的行为，这可能是也可能不是想要的。要获得整个分区的聚合，请省略`ORDER BY`或使用 `ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING`. 可以使用其他框架规格来获得其他效果。

`WHERE`or子句中不能使用窗口函数`HAVING`，因为它们是在窗口函数*之前*应用的。但是您*可以*在`ORDER BY`子句中使用一个，它最后应用（即使在 之后`DISTINCT`，但在 之前`LIMIT`）。

窗口函数可能很昂贵，但是这个函数大大简化了查询，它甚至可能比其他方法更快。
而且它肯定是最**优雅**的。

### 聚合函数

加`JOIN`。可能会或可能不会更快。

```
SELECT row_id, percent, isrc
FROM   tbl
JOIN  (SELECT isrc, max(percent) AS max_pct FROM tbl GROUP BY 1) x USING (isrc)
ORDER  BY x.max_pct DESC, isrc, percent DESC; 
```

### `DISTINCT ON`

非常类似于使用聚合函数。

```
SELECT t.*
FROM   tbl t
JOIN  (
    SELECT DISTINCT ON (isrc) isrc, percent
    FROM   tbl
    ORDER  BY isrc, percent DESC
    ) s USING (isrc)
ORDER BY s.percent DESC, s.isrc, t.percent DESC 
```

这里*不需要*窗口函数。

[**SQL Fiddle**演示了上述所有内容。](http://www.sqlfiddle.com/#!12/fca9a/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:31:30.607

[SQL小提琴](http://www.sqlfiddle.com/#!12/642db/2)

```
select t.*
from
    t
    inner join (
        select distinct on (isrc) isrc,
            row_number() over(order by percent desc) rn
        from t
        order by isrc, percent desc
    ) s on t.isrc = s.isrc
order by s.rn, t.percent desc 
```

# c++ - 直方图程序帮助

> ID：15837197
> 
> 赞同：0
> 
> 时间：2013-04-05T15:00:11.333
> 
> 标签：c++

我的程序有点卡住了，该程序是读取一组结果，然后构建一个直方图，指示每个十年中有多少标记，即 10-20 之间有多少等。

我有2个问题

1.  如何编辑我的代码以仅允许 readExamResults 存储 0 -100 范围内的代码
2.  如何让 PrintHisto 在某个 setw() 处打印 *，具体取决于每个结果所在的十年。例如，如果我输入 3、4、5、11、23 它应该在 <10 十年中显示 3 * , 10-20 年代有 1 个，20-30 年代有 1 个。

任何帮助都感激不尽。

代码：

```
using namespace std;

 void readExamMarks(int examMarks[], int sizeOfArray){

cout << "Please enter a set of exam marks to see a histogram for:" << endl;
int x = 0;
for( int idx = 0; idx < sizeOfArray; idx++){

    cin >> x;
    examMarks[idx] = x;
}
}

void printExamMarks(int examMarks[], int sizeOfArray){

for(int x = 0; x < sizeOfArray; x++){

    cout << setw(5) << examMarks[x];
}
cout << endl;
}

 void printHisto(int examMarks[], int sizeOfArray){
system("cls");

for( int x = 0; x < 6; x++){
cout << setw(5) << "*" << endl;
}
}

int main() 
{
int examMarks[5];

readExamMarks(examMarks, 5);
printHisto(examMarks, 5);
printExamMarks(examMarks,5);

system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:10:29.537

基本上，您创建一个新数组，每个十年都有一个条目。然后迭代考试成绩并在直方图中增加相应的十年：

```
vector<int> calculateHistogram(vector<int> grades) 
{
    vector<int> histogram(10, 0);
    for (int i=0; i<grades.size(); i++) {
        int decade = grades[i]/10;
        histogram[decade] += 1;
    }
    return histogram;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:44:15.957

> 如何编辑我的代码以仅允许`readExamResults`存储 0 -100 范围内的代码

我猜你的意思是`readExamMarks`而不是`readExamResults`。如果是这样，您只需要添加一条`if`语句来检查输入值是否实际在 [0..100] 范围内。我还将您的循环语句更改`for`为 a `while`，因为您只想`idx`在输入有效数字时增加。

```
void readExamMarks(int examMarks[], int sizeOfArray)
{
     cout << "Please enter a set of exam marks to see a histogram for:" << endl;
     int x = 0;
     int idx = 0;
     while(idx < sizeOfarray)
          cin >> x;
          if((x >=0) && (x <= 100)){
               examMarks[idx] = x;
               idx++;
          }
          else
               cout << "ERROR: Value must be in range [0...100], please enter a valid value\n"; 
     }
} 
```

# dns - 在我通过 Google 授权我的域后，是否可以删除 Google TXT 验证记录？

> ID：15837199
> 
> 赞同：74
> 
> 时间：2013-04-05T15:00:14.117
> 
> 标签：dns, google-analytics, bing, google-search-console

对于 Google Analytics，我必须证明我拥有我的域名。为此，我添加了一条 TXT 记录。我还必须通过将文件 (BingSiteAuth.xml) 上传到我的站点来向 Microsoft 证明我拥有我的域。

现在我已经开始使用 Google 和 Bing 的分析和网站管理员工具，我可以删除这些验证记录，还是会破坏分析？将记录和文件留在那里会带来任何安全风险吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-05T15:14:27.903

不，您不应删除任何验证文件或 DNS 记录。例如，Google 会定期重新检查您的网站，如果没有成功，您将失去对 WMT 的访问权限。请参阅[此 WMT 支持页面](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176792)：

> 从您的服务器中删除记录可能会导致您的网站未经验证，您将需要再次完成验证过程。

我不是 100% 确定，但我认为 Bing 也会这样做。这是有道理的，因为域所有者或管理员的角色可能会发生变化，并且您不希望任何曾经访问过您网站数据的人永远保持该访问权。

# web-services - 调用 Web 服务时如何忽略 wsit-client.xml（如果存在）

> ID：15837201
> 
> 赞同：0
> 
> 时间：2013-04-05T15:00:17.927
> 
> 标签：web-services, soap, jax-ws, wsimport, wsit

我正在开发的应用程序调用了许多 Web 服务。就在最近，我集成了另一个需要 wsit-client.xml 进行 Soap 身份验证的 Web 服务。

现在可以正常工作，但所有其他 SOAP 服务都已停止工作。

每当他们中的任何一个被调用时，我都会看到类似的消息

```
INFO: WSP5018: Loaded WSIT configuration from file: jar:file:/opt/atlasconf/atlas.20130307/bin/soap-sdd-1.0.0.jar!/META-INF/wsit-client.xml. 
```

我怀疑这是导致服​​务调用失败的原因。

对于某些soap服务调用，如何使wsit-client.xml被忽略？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:22:04.767

通过使用 Container 和 Loader 为 wsit-client.xml 配置动态位置来修复它。这样它不会自动加载。为此，我首先为应用程序实现了一个容器，如下所示

```
public class WsitClientConfigurationContainer extends Container {
private static final String CLIENT_CONFIG = "custom/location/wsit-client.xml";

private final ResourceLoader loader = new ResourceLoader() {
    public URL getResource(String resource) {
        return getClass().getClassLoader().getResource(CLIENT_CONFIG);
    }
};

@Override
public <T> T getSPI(Class<T> spiType) {
    if (spiType == ResourceLoader.class) {
        return spiType.cast(loader);
    } 
    return null;
} 
```

}

然后在代码中使用它我这样做

```
 URL WSDL_LOCATION = this.getClass().getResource("/path/to/wsdl/mysvc.wsdl");

    WSService.InitParams initParams = new WSService.InitParams();
    initParams.setContainer(new WsitClientConfigurationContainer());
    secGtwService = WSService.create(WSDL_LOCATION, SECGTWSERVICE_QNAME, initParams); 
```

它像魔术一样工作

# javascript - 为什么这个 jquery.get 函数不起作用？

> ID：15837205
> 
> 赞同：5
> 
> 时间：2013-04-05T15:00:43.170
> 
> 标签：javascript, jquery

我一直在尝试创建一个小页面，它所做的只是更新源文档中的一些值。页面加载正常，但我没有从请求的来源获得结果。`.fail`函数运行，但`textStatus`和`errorThrown`值不会出现在`alert()`弹出的窗口中。

我对 javascript 和 jquery 很陌生。我正在尝试将其与从网络上找到的部分结合起来以找出答案，但似乎没有任何效果。主要是我认为我正在跌倒的反应......

无论如何，这是代码：

```
<html>
    <head>
      <title></title>
      <script type="text/javascript" src="~/Scripts/jquery-1.9.1.js"></script>

  <script type="text/javascript">

    function update() {
      $.ajax({
        type: "GET",
        url: "http://192.168.2.86:15890/linearlist.xml",
        dataType: "xml"
      }).done(function (res) {
       //alert(res);
      }).fail(function (jqXHR, textStatus, errorThrown) {
        alert("AJAX call failed: " + textStatus + ", " + errorThrown);
      });
    }

  function GetData() {
    update();
    setTimeout(function () {
      GetData();
    }, 50);
  }
});

  </script>
</head>
<body>
<script type="text/javascript">
    GetData();
</script>
  <div class="result"> result div</div>
</body>
</html> 
```

更新：

我已经更新了我的代码：@Ian 的答案。它仍然无法正常工作，可悲的是。我也没有得到`textStatus`or`errorThrown`结果。我已经尝试通过 VS2012 使用 Internet Explorer 进行调试，但这并没有让我走得太远。如果我将 URL 放入网页中，我可以查看 XML 文档。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T15:06:09.927

`$.get`不接受一个参数作为对象字面量；它接受几个：[http ://api.jquery.com/jQuery.get/#jQuery-get1](http://api.jquery.com/jQuery.get/#jQuery-get1)

您可能正在考虑`$.ajax`语法：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

无论如何，将其称为：

```
$.get("http://192.168.2.86:15890//onair.status.xml", {}, function (res) {
    var xml;
    var tmp;
    if (typeof res == "string") {
        tmp = "<root>" + res + "</root>";
        xml = new ActiveXObject("Microsoft.XMLDOM");
        xml.async = false;
        xml.loadXML(res);
    } else {
        xml = res;
    }
    alert("Success!");
}, "text"); 
```

或使用`$.ajax`：

```
$.ajax({
    type: "GET",
    url: "http://192.168.2.86:15890//onair.status.xml",
    dataType: "text"
}).done(function (res) {
    // Your `success` code
}).fail(function (jqXHR, textStatus, errorThrown) {
    alert("AJAX call failed: " + textStatus + ", " + errorThrown);
}); 
```

使用该`fail`方法，您可以看到发生了错误以及一些详细原因。

根据`http://192.168.2.86:15890`相同的来源策略，您可能无法进行 AJAX 调用 - [https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)

我知道你的`success`回调中有一些逻辑，但我很确定如果你指定`dataType`为“文本”，`res`变量将**始终**是一个字符串。所以你的`if`/`else`不应该真的做太多 -`else`永远不应该执行。无论哪种方式，如果您期望使用 XML，则将其指定`dataType`为“xml”可能更容易。

# css - 图像反射不应有阴影

> ID：15837207
> 
> 赞同：2
> 
> 时间：2013-04-05T15:00:47.980
> 
> 标签：css, image, reflection, shadow

我的图像有反射和阴影（通过使用这个 css）。问题是：阴影应该只在原始图像上……现在原始图像和反射有阴影……（它也反射阴影）。

![在此处输入图像描述](https://i.stack.imgur.com/esIQx.png)（这不是 iPhone 截图，只是我页面上的那个图片）

我应该编辑什么？

```
 -webkit-box-reflect: below 2px
    -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(0.7, transparent), to(white));
    box-shadow: 0px 2px 2px 0px; 
```

谢谢

翻转

附言。只有 webkit 没问题，它是为 webkit 设计的..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:41:18.027

有两种方法可以解决这个问题：

1）第一个是将图像包装在另一个 div 中并将阴影赋予该 div。
像这样：

```
<div class="shadow">
    <div class="box"></div>
</div> 
```

您可以将阴影直接应用到 .box 中，并将 box-reflect 仅赋予 .box 。
像这样（我添加了更多属性仅用于演示目的）：

```
.box{
    width:100px;
    height:100px;
    border-radius:10px;
    background:url(../your_image.xxx) no-repeat center;
    -webkit-box-reflect: below 2px
   /* DEPRECATED -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(0.7, transparent), to(white))*/
    -webkit-linear-gradient(top, transparent 0%,transparent 70% ,white 100%);
}
.shadow{
    width:100px;
    border-radius:10px;
    box-shadow: 0px 2px 2px 0px;
} 
```

[你可以在这里](http://jsfiddle.net/tVdA6/1/)看到一个工作示例

*注意 -webkit-gradient 已弃用，您应该按照 matthias.p 的建议使用 -webkit-linear-gradient

2）第二种方法是将 -webkit-box-mask-image 应用于您的反射，当然如果您想创建一个 .png 蒙版。

```
.box{
/*...other properties here...*/
-webkit-box-reflect: below 2px
-webkit-mask-box-image: url(mask.png) 75 stretch; 
} 
```

[您可以在此处](https://www.webkit.org/blog/181/css-masks/)阅读有关 CSS 掩码属性的更多信息

# python - 我如何（我可以？）从命令中获取退出状态？

> ID：15837208
> 
> 赞同：2
> 
> 时间：2013-04-05T15:00:48.777
> 
> 标签：python, ssh, twisted, twisted.conch

使用`twisted.conch`，我正在使用以下`SSHChannel`实现，该实现在实例化时提供要运行的命令：

```
class CommandChannel(channel.SSHChannel):
    name = 'session'

    def __init__(self, command, *args, **kwargs):
        channel.SSHChannel.__init__(self, *args, **kwargs)
        self.command = command

    def channelOpen(self, data):
        d = self.conn.sendRequest(
            self, 'exec', common.NS(self.command), wantReply=True)
        d.addCallback(self._gotResponse)

    def _gotResponse(self, _):
        self.conn.sendEOF(self)
        self.loseConnection()

    def dataReceived(self, data):
        log.msg('dataReceived: data=%r' % data)

    def extReceived(self, dataType, data):
        log.msg('extReceived: dataType=%r, data=%r' % (dataType, data))

    def closed(self):
        reactor.stop() 
```

为此，我提供了一个应该返回某种退出状态的 shell 命令。我可以阅读退出状态吗？我曾希望`extReceived`可能是我的方式，但它看起来不像。

在我的日志中，我看到了这一点，这似乎应该是一个提示，但我不确定如何遵循所说的提示：

```
2013-04-05 10:39:37-0400 [SSHChannel session (0) on SSHService ssh-connection
    on CommandTransport,client] unhandled request for exit-status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:42:36.427

您可能要为此实现两个额外的回调。这些是频道上的回调，所以你已经很接近了。

第一个是`request_exit_status`。一旦你实现了这一点，Conch 将不再记录`exit-status`请求未处理。这是一个示例实现：

```
def request_exit_status(self, data):
    """
    When the server sends the command's exit status, record it for later
    delivery to the protocol.

    @param data: The network-order four byte representation of the exit
        status of the command.
    @type data: L{bytes}
    """
    (status,) = unpack('>L', data)
    if status != 0:
        self._reason = ProcessTerminated(status, None, None) 
```

第二个是`request_exit_signal`。 如果命令被信号终止，`exit-signal`则发送而不是发送。`exit-status`这是一个示例实现：

```
def request_exit_signal(self, data):
    """
    When the server sends the command's exit status, record it for later
    delivery to the protocol.

    @param data: The network-order four byte representation of the exit
        signal of the command.
    @type data: L{bytes}
    """
    (signal,) = unpack('>L', data)
    self._reason = ProcessTerminated(None, signal, None) 
```

这里的一般模式是，当`SSHChannel`收到对*foo*的请求时，它将尝试`request_foo`使用构成请求的字节进行调用。

# iphone - 将 NSString 发送到另一个 UIViewController 给出 null

> ID：15837211
> 
> 赞同：0
> 
> 时间：2013-04-05T15:00:56.140
> 
> 标签：iphone, ios, uinavigationcontroller, nsstring

这很简单，但我真的不知道为什么它总是给我null。

**- 第一视图控制器：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [_tableView deselectRowAtIndexPath:indexPath animated:YES];

        SubViewViewController *viewTwo = [[SubViewViewController alloc] initWithNibName:@"SubViewViewController" bundle:[NSBundle mainBundle]];

    viewTwo.queryValue = [NSString stringWithFormat:@"%d",indexPath.row];

    [self.navigationController pushViewController:self.subViewController animated:YES];
} 
```

**- SecondViewcontroller.h：**

```
NSString             *queryValue;
@property (nonatomic, retain) NSString *queryValue; 
```

**- SecondViewcontroller.m：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%@", self.queryValue);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:05:08.537

在你的代码中你做错了你应该初始化你推送到导航控制器的viewController，你正在初始化`viewTo`但你正在推送`self.subViewController`。

应该像这样初始化；

```
self.subViewController= [[SubViewViewController alloc] initWithNibName:@"SubViewViewController" bundle:[NSBundle mainBundle]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:04:46.097

在这里改变

```
[self.navigationController pushViewController:viewTwo animated:YES]; 
```

在 SecondViewcontroller.h 文件中进行更改

```
{
NSString             *queryValue;
}
@property (nonatomic, strong) NSString *queryValue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:05:53.610

您正在推动`self.subViewController`，但您正在将字符串传递给`viewTwo`. 这是 2 个不同的对象。请改用此行：

```
[self.navigationController pushViewController:viewTwo animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:05:40.603

添加：
`self.subViewController = viewTwo;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:12:41.783

请使用以下代码

**- 第一视图控制器：**

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

        [_tableView deselectRowAtIndexPath:indexPath animated:YES];

self.subViewController = [[SubViewViewController alloc] initWithNibName:@"SubViewViewController" bundle:[NSBundle mainBundle]];

        viewTwo.queryValue = [NSString stringWithFormat:@"%d",indexPath.row];

        [self.navigationController pushViewController:self.subViewController animated:YES];
    } 
```

**- SecondViewcontroller.h：**

```
@property (nonatomic, retain) NSString *queryValue; 
```

**- SecondViewcontroller.m：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%@", self.queryValue);
} 
```

# php - 用 PHP 处理表单数据

> ID：15837212
> 
> 赞同：0
> 
> 时间：2013-04-05T15:00:58.577
> 
> 标签：php, forms

所以这是一个基本的表单提交和处理，很简单。共有三个脚本，表单脚本、处理器脚本和视图页面。以下是每个片段的片段：

形式：

```
 <form action="processor.php" method="post">
      <h4>Question # 1</h4>
      <p>What grade are you in?</p>
      <label class="checkbox"><input type="checkbox" name="grade" value="1"> Freshmen</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="2"> Sophomore</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="3"> Junior</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="4"> Senior</label>
      <div class="button">
      <button class="btn btn-primary" input type="submit" name="submit" href="processor.php">Submit</button>
      </div>
      </form> 
```

处理器脚本：

```
 <?php

 header("Location: viewpage.html");

 $grade = $_POST['grade'];

 function Grades () {
 if ($grade =="1") {
    echo "You're a freshmen";
} elseif ($grade == "2") {
    echo "You're a sophomore";
} elseif ($grade == "3") {
    echo "You're a junior.";
} elseif ($grade == "4") {
    echo "You're a senior.";
} else {
    echo "Something is wrong.";
}

}

?> 
```

查看页面：

```
 <h4>Question # 1</h4>
      <p><?php Grades();
      ?>
      </p> 
```

本质上，我试图让用户填写表格，处理它并吐出输入。例如，在他们说自己是新生的表格上，他们单击提交并被带到显示“你是新生”的查看页面。自从我编码以来已经有一段时间了，这是一个非常简单的问题，我似乎无法找到解决方案。任何帮助将不胜感激。谢谢你。

照原样，当我进入查看页面时，它什么也没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:13:05.507

第一个问题是您在处理器脚本中做的第一件事是发出标头重定向。之后脚本可能会生成输出，但客户端永远不会看到它。第二个是你的程序结构全部关闭。理想情况下，您希望使用会话来存储处理器和视图脚本之间的“等级”值，或者将它们合并为一个。

```
<?php
$grade = $_POST['grade'];

function Grades ($input) {
if ($input =="1") {
    echo "You're a freshmen";
} elseif ($input == "2") {
    echo "You're a sophomore";
} elseif ($input == "3") {
    echo "You're a junior.";
} elseif ($input == "4") {
    echo "You're a senior.";
} else {
    echo "Something is wrong.";
}

?><html>
<head></head>
<body>
<h4>Question # 1</h4>
<p><?php Grades($grade);?></p>
</body>
</html> 
```

或者，或者：

```
<?php
session_start();
$_SESSION['grade'] = $_POST['grade'];
header('Location: viewpage.php'); 
```

和

```
<?php
session_start();
$grade = $_SESSION['grade'];

function Grades ($input) {
if ($input =="1") {
    echo "You're a freshmen";
} elseif ($input == "2") {
    echo "You're a sophomore";
} elseif ($input == "3") {
    echo "You're a junior.";
} elseif ($input == "4") {
    echo "You're a senior.";
} else {
    echo "Something is wrong.";
}

?><html>
<head></head>
<body>
<h4>Question # 1</h4>
<p><?php Grades($grade);?></p>
</body>
</html> 
```

您还需要记住的是，除非您将`include()`一个脚本转换成另一个脚本，否则每个脚本都完全忽略了其他脚本。他们不知道定义了哪些变量或函数，会话变量除外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:09:07.843

在我看来，您正在接收帖子，然后立即重定向到另一个页面，而不发送您刚刚收到的任何变量。因此，您需要将`grade`字段作为 GET 参数发送。您需要在视图文件中定义您的方法/变量。

处理器：

```
<?php

  // If you're going to redirect, you MUST send along the grade
  header("Location: viewpage.html?grade=" urlencode($_POST['grade'));

?> 
```

看法：

```
<?php

  // In your view you only have access to variables in your immediate request.
  $grade = $_GET['grade'];

  function Grades ($grade) {
    if ($grade =="1") {
      echo "You're a freshmen";
    } elseif ($grade == "2") {
      echo "You're a sophomore";
    } elseif ($grade == "3") {
      echo "You're a junior.";
    } elseif ($grade == "4") {
      echo "You're a senior.";
    } else {
      echo "Something is wrong.";
    }
  }
?>

<h4>Question # 1</h4>
<p><?php Grades($grade); ?></p> 
```

除非你真的需要处理器来保存数据：

```
 <form action="viewpage.html" method="get">
  <h4>Question # 1</h4>
  <p>What grade are you in?</p>
  <label class="checkbox"><input type="checkbox" name="grade" value="1"> Freshmen</label>
  <label class="checkbox"><input type="checkbox" name="grade" value="2"> Sophomore</label>
  <label class="checkbox"><input type="checkbox" name="grade" value="3"> Junior</label>
  <label class="checkbox"><input type="checkbox" name="grade" value="4"> Senior</label>
  <div class="button">
  <button class="btn btn-primary" type="submit" name="submit">Submit</button>
  </div>
  </form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:10:13.773

它应该看起来像这样：

```
<?php

 function Grades () {
 $grade = $_POST['grade'];
 if ($grade =="1") {
    echo "You're a freshmen";
} elseif ($grade == "2") {
    echo "You're a sophomore";
} elseif ($grade == "3") {
    echo "You're a junior.";
} elseif ($grade == "4") {
    echo "You're a senior.";
} else {
    echo "Something is wrong.";
}

}

include('viewpage.php');

?> 
```

请注意，您应该将 viewpage.html 重命名为 viewpage.php

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:09:03.487

您可以使用一些功能来重定向不同的输入，例如更新鲜...为此，您必须创建单独的页面并使用 redirect("Pagename"); 我认为这可能是您问题的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:09:41.443

您需要将`POST`变量作为参数传递给您的函数。

# wpf - 重用 WPF MVVM 视图

> ID：15837225
> 
> 赞同：0
> 
> 时间：2013-04-05T15:01:31.700
> 
> 标签：wpf, mvvm, prism

我继承了一个使用视图优先 MVMC 模式的应用程序

在应用程序中，我创建了两步流程，该流程创建了一个人并将他们分配给一个组。为此，我创建了一个名为 CreatePersonMaster 的视图和相应的视图模型（所有视图与视图模型具有 1-2-1 关系，视图模型被注入到 View 构造函数中，并使用 TransientLifetimeManager 向 Unity 容器注册） ，视图只包含一个区域（由虚线显示），可以将子视图加载到该区域中，并且视图模型订阅两个松散耦合的事件，“PersonCreated”和“GroupSelected”。“PersonCreated”事件将 Person 实体保存在字段中，“GroupSelected”事件获取保存的 Person，创建组关联并将它们保存到数据库。

在引发事件之前，此视图/视图模型不会执行任何操作，因此我将以下子视图加载到我的区域中。

![创建人员视图](https://i.stack.imgur.com/kBrt8.png)

这些视图/视图模型触发由主视图处理的事件。

我还有一个编辑视图，我想在其中重新使用选择组视图。

![编辑人员视图](https://i.stack.imgur.com/xFiMO.png)

我可以通过订阅 EditPersonMaster 视图模型中的适当事件来做到这一点。

我的问题真的是，这是正确的方法吗？因为我使用的是松散耦合的事件，所以如果在创建/重新分配时出现错误，我不会在子视图/视图模型中得到任何反馈？我可能会为内部视图/模型触发另一个“ErrorBlah”事件来处理和更新视图。

还有另一种方法可以做到这一点吗？复合命令似乎不符合要求，但也许我没有正确理解它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:09:04.467

我是这样理解您的问题的：您将人员存储在数据库中，该数据库具有 property/column `group`。在您的 UI 中，您想要创建人员并分配组属性。此外，您希望能够编辑不同区域/页面/母版中现有人员的组属性。您想重复使用控件来分配组。您的控件触发一个事件，该事件由 Master 以在数据库中创建条目的方式处理（正确吗？）。您的问题是这是否是一种好方法以及您有哪些选择？

我看到两个选项：

**1\. 模块化你的业务逻辑：**

您可以将数据服务注入到您的 ViewModel 中，它可以直接访问数据库。这样，您可以直接在它们发生的地方处理错误等，而不必将它们传递给整个系统。如果您想通知其他模块数据库的更改（指定更改的数据集等），您可以使用复合事件来执行此操作。我认为 PRISM 模块更像是完整的元素，包括 UI 和业务逻辑，并尽可能少地保持它们之间的通信。

**2\. 保持您的业务逻辑集中并共享它：**

如果您想坚持您的架构，请将单例模型注入到 ViewModel 中。在模型中管理您的状态，并让 ViewModels 选择他们想要提供给他们的视图的部分。

希望我明白他的意思，虽然...

# c# - EF 在数据表中放置错误的关系

> ID：15837234
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:00.897
> 
> 标签：c#, asp.net-mvc, entity-framework

我得到这个项目是一个操作员可以有很多角色。让我从代码开始，这样你就可以明白我的意思了。

TD运营商：

```
[DisplayName("Operator")]
public class TDOperator
{

    public int TDOperatorId { get; set; }

    [DisplayName("First Name")]
    [Required]
    public string FirstName { get; set; }

    [Required]
    [DisplayName("Last Name")]
    public string LastName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [DisplayName("Email Adress")]
    public string EmailAddress { get; set; }

    [Required]
    public string Username { get; set; }

    [Required]
    [DataType(DataType.Password)]
    public string Password { get; set; }

    [HiddenInput(DisplayValue = true)]
    public DateTime LastLogin { get; set; }

    public List<string> RoleNames
    {
        get
        {
            return Roles.Select(x => x.Name).ToList();

        }
    }

    public virtual ICollection<Role> Roles { get; set; }

    [Required]
    [DisplayName("Topdesk Username")]
    public string TDUserName { get; set; }

    public virtual ICollection<TDOperator> Coaches { get; set; }
    public List<string> CoachNames
    {
        get
        {
            return Coaches.Select(x => x.ToString()).ToList();

        }
    }
    public virtual ICollection<TDOperator> Pupils { get; set; }
    public List<string> PupilNames
    {
        get
        {
            return Pupils.Select(x => x.ToString()).ToList();

        }
    }

    public override string ToString()
    {
        return this.FirstName + " " + this.LastName;
    }
} 
```

还有一个角色

```
public class Role
{
    public int RoleID { get; set; }
    public string Name { get; set; }
    public int Priority { get; set; }
} 
```

对不起，我打算稍后清理混乱的代码。

当我运行它时，它生成了一个包含 3 个表和列的数据库：

```
 - TDOperatorTDOperators
  1.TDOperator_TDOperatorId
  2.TDOperator_TDOperatorId1

 - TDOperators
  1.TDOperatorId
  2.FirstName
  3.LastName
  4.EmailAdress
  5.UserName
  6.PassWord
  7.LastLogin
  8.TDUsername 

 - Roles
  1.RoleId
  2.Name
  3.Priority
  4.TDOperator_TDOperatorId <<--- WTF! 
```

问题是我现在只能将角色分配给 1 个用户。例如，只能有 1 个管理员和 1 个用户。它应该创建和额外的外键表，但它没有！

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:15:15.770

您没有告诉 Entity Framework 您想要 Roles -> Operators 关系。尝试将此添加到您的`Role`课程中。

```
public virtual ICollection<TDOperator> Operators { get; set; } 
```

# oracle - 使用函数调用更新多个列

> ID：15837235
> 
> 赞同：2
> 
> 时间：2013-04-05T15:02:04.247
> 
> 标签：oracle, plsql

假设我有一个包含 a、b、c、d、e 列的表

有没有一种方法/语法可以从过程/函数的 out 参数中更新 d 和 e 列，该过程/函数接受 a、b 和 c 列的参数值。(程序(a, b, c, out d, out e))

（除了使用游标一一遍历所有行）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:10:17.403

您可以创建一个[PL/SQL 表或用户定义的记录](http://docs.oracle.com/cd/A57673_01/DOC/server/doc/PLS23/ch4.htm#user-def%20recs)，就像这样

处理记录的功能

```
FUNCTION Get_updated_recs(p_emp_id     emp.emp_id%TYPE,
                          p_manager_id emp.manager_id%TYPE)
RETURN EMP_REC_TYPE
IS
  p_emp_rec EMP_REC_TYPE;
BEGIN
    IF p_emp_id = 100 THEN
      p_emp_rec.salary := 50000;
      p_emp_rec.bonus := 10000;
    END IF;

    RETURN p_emp_rec;
END get_updated_recs; 
```

* * *

主程序单元

```
DECLARE
    TYPE emp_rec_type IS RECORD (
      salary employees.salary%TYPE,
      bonus employees.bonus );
    emp_rec EMP_REC_TYPE;
BEGIN
    FOR emp IN (SELECT *
                FROM   employees) LOOP
        emp_rec := Get_updated_recs(emp.emp_id, emp.manager_id);

        UPDATE employees
        SET    salary = emp_rec.salary,
               bonus = emp_rec.bonus
        WHERE  emp_id = emp.emp_id;
    END LOOP;
END; 
```

* * *

我没有测试/编译它，只是写出了我的记忆，但这样的东西应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T13:41:00.270

在 Oracle 专家的帮助下，我得出了以下解决方案：

```
CREATE TABLE testtable
 ( 
  a number,
  b number,
  c number,
  d number
 );

CREATE TYPE testobj AS OBJECT
(
 x number,
 y number
);

CREATE OR REPLACE FUNCTION testfun(a number, b number)
RETURN testobj IS
begin
    return new testobj(x=>a+b, y=> a*b);
end;

INSERT INTO testtable VALUES (1,2,null,null);
INSERT INTO testtable VALUES (5,6,null,null);

UPDATE 
 (SELECT  tt.*,
               testfun1(a,b) fun_ret FROM testtable tt) talias
 SET talias.c=talias.fun_ret.x,
 talias.d=talias.fun_ret.y
 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T13:28:00.213

执行以下操作：

(1) 创建并填写示例表：

```
CREATE TABLE TEST1
(
  a NUMBER(10), b number (10), s number (10)
);
INSERT INTO TEST1 (a, b, s) VALUES (2, 3, NULL);
INSERT INTO TEST1 (a, b, s) VALUES (3, 12, NULL);
INSERT INTO TEST1 (a, b, s) VALUES (-2, 8, NULL); 
```

(2) 为在 UPDATE 命令中使用创建一个简单的函数：

```
CREATE OR REPLACE FUNCTION GET_SUM (x IN NUMBER, y IN NUMBER)
RETURN NUMBER
IS
    x1 NUMBER(10) := x; y1 NUMBER (10):= y; s NUMBER(10) := NULL; 
BEGIN
    IF x1 IS NOT NULL AND y1 IS NOT NULL THEN s := x1 + y1; END IF;
    RETURN s; 
END; 
```

(3) 在下面的 UPDATE 命令中使用这个函数：

```
UPDATE TEST1 SET s = GET_SUM (a, b); 
```

(4) 检查更新：

```
select * from TEST1; 
```

# javascript - 响应式、jQuery 和 .resize

> ID：15837241
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:11.893
> 
> 标签：javascript, jquery, responsive-design, reload

我想要根据大小不同的功能，这是：

```
$(window).resize(function() {
    checkWidth();
    location.reload();
}); 
```

似乎没有工作。

```
var windowsize = $(window).width();
// resize browser
function checkWidth() {

    if (windowsize > 700) {
        $('#list').show();
        $('#nav_bu').hide();
        showcased();
        $('.project a').attr('href', '#top_shade');
    }
    else {
        accordion();
        $('.showcase').hide();
        $('#nav_bu').show();
    }
}
// on load
checkWidth(); 
```

请查看[http://kirkradish.com/2013/kirk3.html](http://kirkradish.com/2013/kirk3.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:06:05.990

您设置`windowsize`一次，但这通常是调整大小时必然会改变的一个变量。只需输入这一行：

```
var windowsize = $(window).width(); 
```

进入你的功能：

```
function checkWidth() {
    //here we go:
    var windowsize = $(window).width();

    if (windowsize > 700) {
        $('#list').show();
        $('#nav_bu').hide();
        showcased();
        $('.project a').attr('href', '#top_shade');
    }
    else {
        accordion();
        $('.showcase').hide();
        $('#nav_bu').show();
    }
} 
```

像这样的东西：

```
 $('#list').show();
  $('#nav_bu').hide(); 
```

是经典的东西，你会用另一个用户发布的媒体查询来做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:03:39.803

尝试使用媒体查询。

```
@media (min-width: 700px) { ... } 
```

[https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

# c# - 如何在模型上标记需要的 html.textbox

> ID：15837243
> 
> 赞同：1
> 
> 时间：2013-04-05T15:02:17.157
> 
> 标签：c#, asp.net-mvc

我有一个模型，我想在其中标记我所有的文本框，就像需要一样。我怎样才能做到这一点 ？

你能帮助我吗。

对不起我的小宝贝英语，但我是法国人。

```
<%= Html.TextBox("login_user")%>
<%= Html.ValidationMessage("login_user", "*")%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:18:25.767

在此视图的模型中，您需要将`[Required]`属性放在属性上`login_user`。（顺便说一句，`login_user`不是属性名称的好选择，因为它不符合广泛接受的约定）

所以，你会有类似的东西：

```
class LoginModel {
  [Required]
  string LoginUser {get; set;}

  // the rest of your properties
  ...

} 
```

在视图中使用`Html.EditorFor`.

# jquery - 重新绑定 jQuery click af AJAX 调用

> ID：15837251
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:34.163
> 
> 标签：jquery, hoverintent

**更新：我只是回顾了我的问题，我完全明白它没有意义。累的时候不应该在这里问问题。它现在已被重新编写并提供了可能的解决方案**

这就是我想要发生的事情：

1.  当用户单击带有类`filter_products`的复选框时，将进行 AJAX 调用。
2.  将返回更新的产品列表。
3.  更新后的产品列表将替换`UL`类中的内容更新`product_list` 后`product_list`我希望hoverintent事件重新绑定

代码：

```
<div id="sidebar">
    <input class="filter_products" type="checkbox" name="product_options[1]" value="1">
    <input class="filter_products" type="checkbox" name="product_options[2]" value="2">
</div>

<div id="main">
    <ul id="product_list">
        <li class="product">
            Product name 1
        </li>
        <li class="product">
            Product name 2
        </li>
    <ul>
</div>

<script>
    // Filter products
    $('.filter_products').on('click', function () {
        var inputs = $("input:checked");
        $.post('/filter_products/' + $('#cat_id').data('cat-id'), inputs.serialize(), function(data) {
            $('#product_list').html(data);
        });
    });

    // Hover product is now wrapped in a function
    $(".product").hoverIntent({over: getAttributtes, out: hideAttributtes});

    function getAttributtes() {
        // Do something
    }

    function hideAttributtes() {
        // Do something
    }
</script> 
```

这可能是解决方案：

```
// Filter products
$('.filter_products').on('click', function () {
    var inputs = $("input:checked");
    $.post('/filter_products/' + $('#cat_id').data('cat-id'), inputs.serialize(), function(data) {
        $('#product_list').html(data);

        // Re-initialize hoverintent
        hoverAttributtes();
    });
});

// Hover product
function hoverAttributtes() {
    $(".product").hoverIntent({over: getAttributtes, out: hideAttributtes});
}

function getAttributtes() {
    // Do something
}

function hideAttributtes() {
    // Do something
}

// Initialize hoverintent
hoverAttributtes(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:16:38.293

如果您想在 ajax 调用后使用此单击，请将此代码放在将使用 ajax 调用更新的 div 之外。我的意思是在 ajax 更新之外的主页中。并在那里单击使用此脚本。

```
 $(document).on('click','.filter_products', function () {
    var inputs = $("input:checked");
    $.post('/filter_products/' + $('#cat_id').data('cat-id'), inputs.serialize(), function(data) {
        $('#product_list').html(data);
    });
}); 
```

# javascript - JQuery在窗口调整大小时重新计算css

> ID：15837252
> 
> 赞同：3
> 
> 时间：2013-04-05T15:02:39.600
> 
> 标签：javascript, jquery

在这个网站上：http: [//houston.aiga.org/](http://houston.aiga.org/)

尽管滑块在浏览器窗口大小上是全宽/可变的，但每个滑块项的标题始终缩进以与内容对齐。

我试过设置这个：http: [//jsfiddle.net/tapiman/xS7vn/](http://jsfiddle.net/topiman/xS7vn/)

```
$(window).resize(function() {
    $('#item').css("padding-left",$(window).width()/2);
}); 
```

该功能正在运行，但计算将项目推入了减小窗口大小而太远的窗口大小。

工作滑块示例中的行是：

```
$('.layout-feature .box-section-image-gallery-controls-title, .layout-feature .box-section-image-gallery-title').css('paddingLeft', 60 + extraSpace/2); 
```

`extraSpace`在哪里`$(window).width()`

感激地收到任何帮助 - 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:59:49.337

看来你毕竟忘记了宽度：http: [//jsfiddle.net/tapiman/xS7vn/5/](http://jsfiddle.net/topiman/xS7vn/5/)

这就是我想出的。愚蠢的是，console.log 不断返回 +8 差异，我不得不硬编码删除。这是你要找的吗？

```
$(window).resize(function() {
    var ItemWidth = $(".wrapper").width();
    $('#item').width( ItemWidth );
    var WindowWidth = $(window).width();
    // cannot resize because window is smaller than the wrapper
    if( ItemWidth > WindowWidth ) {
        var PadWidth = 0;
    } else {
        var PadWidth = (WindowWidth - ItemWidth)/2 - 8;
    }
    console.log( ItemWidth + " - " + WindowWidth + " - " + PadWidth );

    $('#item').css("margin-left",PadWidth + "px");
    }); 
```

更新; 还检查[http://jsfiddle.net/xS7vn/8/](http://jsfiddle.net/xS7vn/8/)以获取最新更新，包括在页面加载时调整大小。

# vba - 复选框功能，如果选中则粘贴值

> ID：15837253
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:39.680
> 
> 标签：vba, excel, checkbox, paste

我正在尝试这样做，如果未选中复选框 82，则单元格 J39 留空，但如果选中，则值为 3.8。在 "Sheet.Range("J39").PasteSpecial Paste = "3.8"" 行上，我收到一条错误消息 1004

```
Sub ChckBx_Deisel_Engines()

Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets("NSR FORM")
    If Sheet.Shapes("Check Box 82").ControlFormat.Value = 0 Then
        Sheet.Range("J39").PasteSpecial Paste = ""
    End

    ElseIf Sheet.Shapes("Check Box 82").ControlFormat.Value = 1 Then

        Sheet.Range("J39").PasteSpecial Paste = "3.8"
    End If
End Sub 
```

关于如何以更好的方式执行此功能的任何想法也将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:26:55.503

弄清楚了！这是我更改它以使此功能正常工作的代码

```
 Sub Button82_Click()
     If ThisWorkbook.Worksheets("NSR FORM").Shapes("Check Box 82").OLEFormat.Object.Value = 1 Then
     Range("J39").Value = "3.8"

     Else
     Range("J39").Value = ""
     End If

 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:29:43.360

```
Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets("NSR FORM")
    If Sheet.Shapes("Check Box 82").ControlFormat.Value = 0 Then
        Sheet.Range("J39").PasteSpecial Paste = "" :Exit sub <<< to exit direct from your project

    ElseIf Sheet.Shapes("Check Box 82").ControlFormat.Value = 1 Then

        Sheet.Range("J39").PasteSpecial Paste = "3.8"
    End If
End Sub 
```

# c# - 以编程方式将打开窗口中的 Excel 表格保存到文件中

> ID：15837255
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:42.420
> 
> 标签：c#, .net, excel

所以这就是我需要做的

有一个程序连接到某个服务器并以每秒大约 15-20 个条目的速度从中获取数据

在与服务器建立连接的那一刻，将打开一个 Excel 窗口，从服务器获取的所有条目都被动态移动到该 Excel 表中

然而，所有这些内容都保留在 RAM 中，即只有当我们尝试关闭该 Excel 窗口并出现“另存为..”对话框时才会创建 Excel 文件本身

正如您可能已经理解的那样，我不想每次都手动保存文件，因此我需要一些方法以编程方式将打开的窗口中的 Excel 表格保存到文件中

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:48:56.470

如果您没有在服务器上运行它并且您不介意手动触发 Excel 保存，那么您可以创建一些将使用 Interop 连接到 Excel 实例的东西。以下将连接到 Excel 实例并返回`Excel.Workbook`指定工作簿名称的对象：

```
private Excel.Workbook GetWorkbook(string workbookName)
{
    Excel.Window window = null;      // Excel window object from which application is grabbed
    Excel.Application app = null;    // Excel instance from which we get all the open workbooks
    Excel.Workbooks wbs = null;      // List of workbooks
    Excel.Workbook wb = null;        // Workbook to return
    EnumChildCallback cb;            // Callback routine for child window enumeration routine
    List<Process> procs = new List<Process>();           // List of processes

    // Get a full list of all processes that have a name of "excel"

    procs.AddRange(Process.GetProcessesByName("excel"));

    foreach (Process proc in procs)
    {
        // Make sure we have a valid handle for the window

        if ((int)proc.MainWindowHandle > 0)
        {
            // Get the handle of the child window in the current Excel process

            int childWindow = 0;
            cb = new EnumChildCallback(EnumChildProc);
            EnumChildWindows((int)proc.MainWindowHandle, cb, ref childWindow);

            // Make sure we got a valid handle

            if (childWindow > 0)
            {
                // Get the address of the child window so that we can talk to it and
                // get all the workbooks

                const uint OBJID_NATIVEOM = 0xFFFFFFF0;
                Guid IID_IDispatch =
                    new Guid("{00020400-0000-0000-C000-000000000046}");
                int res = AccessibleObjectFromWindow(childWindow, OBJID_NATIVEOM,
                    IID_IDispatch.ToByteArray(), ref window);

                if (res >= 0)
                {
                    app = window.Application;
                    wbs = app.Workbooks;

                    // Loop through all the workbooks within the current Excel window
                    // to see if any match

                    for (int i = 1; i <= wbs.Count; i++)
                    {
                        wb = wbs[i];

                        if (wb.Name == workbookName)
                        {
                            break;
                        }

                        wb = null;
                    }
                }
            }
        }

        // If we've already found our workbook then there's no point in continuing
        // through the remaining processes

        if (wb != null)
        {
            break;
        }
    }

    Release(wbs);
    Release(app);
    Release(window);

    return wb;
} 
```

上面调用的`Release()`方法只是将引用设置为 null 并调用`Marshal.FinalReleaseComObject()`它们，否则你最终会得到到处都是无头的 Excel 实例。

您还需要以下内容来执行一些抓取窗口的功能：

```
private delegate bool EnumChildCallback(int hwnd, ref int lParam);

[DllImport("User32.dll")]
private static extern bool EnumChildWindows(int hWndParent, EnumChildCallback lpEnumFunc, ref int lParam);

[DllImport("Oleacc.dll")]
private static extern int AccessibleObjectFromWindow(int hwnd, uint dwObjectID, byte[] riid, ref Excel.Window ptr);

private bool EnumChildProc(int hwndChild, ref int lParam)
{
    // Get the name of the class that owns the passed-in window handle

    StringBuilder buf = new StringBuilder(128);
    GetClassName(hwndChild, buf, 128);

    // If the class name is EXCEL7 then we've got an valid Excel window

    if (buf.ToString() == "EXCEL7")
    {
        lParam = hwndChild;
        return false;
    }

    return true;
}

[DllImport("User32.dll")]
private static extern int GetClassName(int hWnd, StringBuilder lpClassName, int nMaxCount); 
```

一旦你有了工作簿，你就可以打电话`Workbook.SaveAs()`来保存它。

# php - 仅为特定网站启用 XDebug PHP 调试器

> ID：15837258
> 
> 赞同：1
> 
> 时间：2013-04-05T15:02:52.580
> 
> 标签：php, .htaccess, xdebug, suphp

我正在使用 suPHP 运行 CentOS Web 服务器，并且我只需要为几个选定的网站启用 XDebug PHP 调试器。我在 .htaccess 文件中添加了 suPHP_ConfigPath 设置，这样我就可以为这些网站创建一个自定义的 php.ini 文件，并且我已经添加了

> zend_extension="/usr/lib64/php/modules/xdebug.so"

到自定义 php.ini 文件。我已经确认它确实使用了自定义的 php.ini，但是，在运行 phpinfo() 时，它并没有显示 xdebug 已启用。

非常感谢任何帮助。

# ms-access - 将一组自定义对象导出到 Access 表中

> ID：15837260
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:57.300
> 
> 标签：ms-access, excel, vba

我在 Excel 中有一个时间表系统，其中包含 3 行（标准时间、加班时间、双倍时间）用于我们的每个（100 多名）员工，以及网站上每个成本代码的一列。这最终成为一个巨大的矩阵，其中大部分是空的。我的解决方案基本上是创建一个员工数据类型，用于存储单个成本代码的员工信息和小时数。

```
 Public Type Employee
     Name As String
     Trade(1 To 3) As String
     EmpNum As Long
     Comment As String
     AddOns(1 To 3) As Single
     Allowance(1 To 3) As Single
     Contract As Long
     CostCode As Long
     STHours As Single
     OTHours As Single
     DTHours As Single
     WorkDate As Date
   End Type 
```

我可以处理电子表格并将 excel 中的信息组织为员工类型对象的数组，但我不熟悉如何将其导出到 Access，并且大多数问题都与从 excel 单元格导出到 Access 相关。我显然可以将这些对象放入另一个工作表的单元格中并这样做，但似乎应该有更好的方法。

目前我最好的猜测是这样的：

[使用 VBA 将数据表单 Excel 插入 Access 2010](https://stackoverflow.com/questions/14396627/insert-data-form-excel-to-access-2010-using-vba)

但随后我会为每次导出对表进行 100 多次更新。

有没有一种有效的方法可以在 VBA 中创建一个表对象，用数组信息填充它，然后在一次更新中将其附加到 Access 中我的表的末尾？

谢谢。

-肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:50:05.233

感谢大家的帮助......我只是想分享我想出的解决方案。我最终构建了一个将一个对象插入数据库的函数......从互联网复制和修改。代码如下，加油！

```
Public Function InsertTimeRecord(EmpData As Employee) As Boolean

Dim SaveTime As Date
Dim db As DAO.Database
Dim rs As DAO.Recordset

'//Database Location
Const DB_LOCATION = "C:\access\KMP Tracker.mdb"

'//If errors occur the function will exit with a return value of false (insertion failed)
On Error GoTo ErrHandler:

'//Table has a datecreated/datemodified timestamp for each record
SaveTime = Now

'//Open Database
If db Is Nothing Then
   Set db = DAO.Workspaces(0).OpenDatabase("C:\access\KMP Tracker.mdb") 'Removed DB_LOCATION
End If

'//Open Table
If rs Is Nothing Then
    Set rs = db.OpenRecordset("Timesheet Data", dbOpenDynaset)
End If

'//Create a new record
With rs
    .AddNew
    ![EmpName] = EmpData.Name
    ![Trade1] = EmpData.Trade(1)
    ![Trade2] = EmpData.Trade(2)
    ![Trade3] = EmpData.Trade(3)
    ![EmpNum] = EmpData.EmpNum
    ![Comment] = EmpData.Comment
    ![AddOns1] = EmpData.AddOns(1)
    ![AddOns2] = EmpData.AddOns(2)
    ![AddOns3] = EmpData.AddOns(3)
    ![Allowance1] = EmpData.Allowance(1)
    ![Allowance2] = EmpData.Allowance(2)
    ![Allowance3] = EmpData.Allowance(3)
    ![Contract] = EmpData.Contract
    ![CostCode] = EmpData.CostCode
    ![STHours] = EmpData.STHours
    ![OTHours] = EmpData.OTHours
    ![DTHours] = EmpData.DTHours
    ![WorkDate] = EmpData.WorkDate
    ![DateSubmitted] = SaveTime

    '//Insert Record into Database
    .Update
    InsertMachineHoursRecord = True '//SUCCESSFUL INSERTION
End With

'//Note that we use recordset in this example, but equally effective
'//  is to create an update query command text and simply run the update query:
'//  (INSERT INTO Table (Field1, Field2) VALUES (Value1, Value2);

'//Make sure we have closed the database
My_Exit:
rs.Close
Set rs = Nothing
db.Close
Set db = Nothing
Exit Function

ErrHandler:
MsgBox Err.Description
Resume My_Exit
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:32:33.743

最简单的方法是在 Access 中创建表链接。表链接看起来像 Access 其余部分中的表，但数据存储在外部。数据可能在另一个 Access 数据库中，或者在 SQL Server 数据库中，或者你有什么。

特别是，数据可以在 Excel 电子表格中。在 Excel 中定义一个表格，其中包含格式适合您的 Access 应用程序的数据。然后在 Access 中构建一个表链接，链接回您在 Excel 中定义的表。

当您更新 Excel 表格时，更新的结果将在您下次在 Access 中引用表格链接时自动出现。

# c++ - 使用 XcvData 获取 IP 地址

> ID：15837261
> 
> 赞同：0
> 
> 时间：2013-04-05T15:02:58.597
> 
> 标签：c++, visual-c++, spool, print-spooler-api, tcpmon

我需要获取打印机的 ip，但没有取得多大成功。已经尝试过各种方式。目前我的代码是这样的：

```
void Spl::GetIpAddress(LPSTR printerName)
{
    HANDLE hPrinter;
    PBYTE wAddress = NULL;      
    DWORD size;
    DWORD status;
    LPSTR portName = GetProt(printerName);
    std::ostringstream strTemp;
    strTemp << portName;

    string temp = ",XcvPort " + strTemp.str();
    //temp = ,XcvPort 192.168.2.247

    LPSTR tempLPSTR((LPSTR)temp.c_str());

    if(OpenPrinter(tempLPSTR,&hPrinter,NULL))
    {
        if (XcvData(hPrinter, L"IPAddress", NULL, 0,wAddress,31, &size,&status))
        {

        }
    }

} 
```

当他试图调用 XcvData 函数时，她没有输入“IF”。我的对象“wAddress”仍然是空的。因为我没有得到？

OBS：此代码基于 msdn 文档： http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff562761 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff562761(v=vs.85).aspx)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:17:07.240

您在`OpenPrinter`呼叫中缺少服务器名称。打印机名称应如下所示：

```
"\\\\myServer\\,XvcPort myPort" 
```

要确认这是问题所在，请`GetLastError`在`OpenPrinter`失败时调用。

# java - 将递归实现转换为基于循环的实现

> ID：15837262
> 
> 赞同：8
> 
> 时间：2013-04-05T15:03:01.613
> 
> 标签：java, closures

我有两个接口负责保持闭包

这是第一个在 map 操作中保持闭包的方法。

```
package com.fs;

/**
 * This interface is responsible for holding the closures when it comes to map.
 * It uses two generic types. One for the argument and one for the return type.
 * @param <B> Generic type 
 * @param <A> Generic type
 */
public interface Func<B,A> {
    /**
     * Function prototype m takes an argument of type A and returns a type B.
     * A map operation can produce a different type.
     * @param x of type A
     * @return type B
     */
     B m(A x); 
} 
```

第二个用于过滤操作

```
package com.fs;

/**
 * This interface is responsible for holding the closures when it comes to filter.
 * @param <A> Generic type 
 */
public interface Pred<A> {
    /**
     * Function prototype m takes an argument of type A and returns a boolean.
     * A filter operation checks every element if it fits a predicate.
     * @param x of type A
     * @return boolean
     */
    boolean m(A x);
} 
```

我有一个名为 CList 的类，它能够使用闭包。

```
package com.impl.list;

import com.fs.*;

public class CList<T> {
    T head;
    CList<T> tail;

    public CList(T x, CList<T> xs){
        head = x;
        tail = xs;
    }

    static <A,B> CList<B> map(Func<B,A> f, CList<A> xs){
        if(xs==null){
            return null;
        }
        return new CList<>(f.m(xs.head),map(f,xs.tail));
    }

    static <A,B> CList<B> maploop(Func<B,A> f, CList<A> xs){
        //?????
        return null;
    }

    static <A> CList<A> filter(Pred<A> f, CList<A> xs){
        if(xs == null){
            return null;
        }
        if(f.m(xs.head)){
            return new CList<>(xs.head, filter(f,xs.tail));
        }
        return filter(f,xs.tail);
    }

    static <A> int length(CList<A> xs){
        int ans =0;
        while(xs!= null){
            ++ans;
            xs=xs.tail;
        }
        return ans;
    }
} 
```

这是我用闭包实现 CList 的公共接口。

```
package com.impl.list;

import com.fs.Func;
import com.fs.Pred;

public class CListClient {
    public static CList<Integer> doubleAll(CList<Integer> xs){
        Func<Integer, Integer> df = new Func<Integer, Integer>() {
            @Override
            public Integer m(Integer x) {
                return x * 2;
            }
        };

        return CList.map(df, xs);
    }

    public static int countNs(CList<Integer> xs,final int n){
        Pred<Integer> pf = new Pred<Integer>() {
            @Override
            public boolean m(Integer x) {
                return x==n;
            }
        };
        return CList.length(CList.filter(pf, xs));
    }

    public static CList<Integer> doubleAllloop(CList<Integer> xs){
        Func<Integer, Integer> df = new Func<Integer, Integer>() {
            @Override
            public Integer m(Integer x) {
                return x * 2;
            }
        };

        return CList.maploop(df, xs);
    }
} 
```

还有一个简单的测试器：

```
package basic;

import com.impl.list.CList;
import com.impl.list.CListClient;
import org.junit.Test;

public class ListTester {

    CList<Integer> intlist_1 = new CList<>(new Integer(1),null);
    CList<Integer> intlist_2 = new CList<>(new Integer(2),intlist_1);
    CList<Integer> intlist_3 = new CList<>(new Integer(3),intlist_2);
    CList<Integer> intlist_4 = new CList<>(new Integer(4),intlist_3);
    CList<Integer> intlist_5 = new CList<>(new Integer(4),intlist_4);
    CList<Integer> intlist = new CList<>(new Integer(5),intlist_5);

    @Test
    public void test_doubleAll(){
        CList<Integer> doubled = CListClient.doubleAll(intlist);
        CList<Integer> doubledloop = CListClient.doubleAllloop(intlist);

    }

    @Test
    public void test_CountNs(){
        int count3s = CListClient.countNs(intlist, 3);
    }
} 
```

我正在尝试将以递归方式实现的 map 函数转换为 while 循环。我把它命名为maploop。这两天让我的大脑受伤。任何提示都会让我非常高兴。我在这里问这个问题是因为有人可能会参加 Dan Grossman 课程并查看示例并尝试实现该功能。我更喜欢提示而不是实际答案。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:07:06.513

将递归函数转换为迭代函数时，您必须检查需要哪种非尾调用状态（如果有）。然后创建一个堆栈并将状态推送到堆栈上，并像使用递归函数一样对其进行编码。如果您在函数中有多个递归调用，您将需要您的新状态项还包含一个值，该值指示您在函数中的哪个点。

在这种情况下，您只有一个递归调用，并且唯一的状态是`xs`，所以事情非常简单，您不需要自定义状态对象。

这是我做事的方式（未经测试）。

```
static <A,B> CList<B> maploop(Func<B,A> f, CList<A> xs){
    Stack<CList<A>> stack = new Stack<>();

    while(xs != null){
        stack.push(xs);
        xs = xs.tail;
    }

    CList<a> result = xs;

    while(!stack.empty()){
        xs = stack.pop();
        result = new CList<>(f.m(xs.head), result);
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:25:18.370

将递归程序转换为迭代程序的标准方法是通过尾递归变体。作为一个非常简单的示例，考虑以下递归阶乘函数来计算`N!`：

```
int factorial(int x) {
    if (x == 0)
        return 1;
    else
        return x * factorial(x-1);
} 
```

打电话`factorial(N);`。

使这个尾递归涉及添加一个累积变量：

```
int tailRecursiveFactorial(int x, int y) {
    if (x == 0)
        return y;
    else
        return tailRecursiveFactorial(x-1, x*y);
} 
```

称呼`tailRecursiveFactorial(N, 1);`

这直接转换为迭代程序：

```
int x = N;
int y = 1;
while (x != 0) {
    y = x*y;
    x = x-1;
} 
```

当然，您的问题要困难得多，但一般方法应该仍然有效。

# javascript - UIWebView 将用户名和密码传递到表单中

> ID：15837266
> 
> 赞同：1
> 
> 时间：2013-04-05T15:03:10.567
> 
> 标签：javascript, objective-c, uiwebview, passwords

我有一个 UIWebView 设置包含我的大学 Intranet 页面，我的代码将传入我的用户名（因为它是一个数字）

```
NSString *studentNumber = @"639909";
NSString *javaScriptNumber = @"document.getElementById('username').value=%@;";
javaScriptNumber = [NSString stringWithFormat: javaScriptNumber, studentNumber];
[webViewInt stringByEvaluatingJavaScriptFromString: javaScriptNumber]; 
```

但是，当我尝试运行相同的代码来填写密码字段时，它只适用于数字，我的密码是文本，所以当我输入文本时，什么都不会传递到密码字段中。但是，如果我将密码设置为全数字，它似乎可以工作。我需要更改此代码中的某些内容以允许它传递所有字符，因为它目前仅传递数字

谢谢

（这是密码的代码）

```
 NSString *password = @"password";
NSString *javaScriptPass = @"document.getElementById('password').value=%@;";
javaScriptPass = [NSString stringWithFormat: javaScriptPass, password];
[webViewInt stringByEvaluatingJavaScriptFromString:javaScriptPass]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:11:46.283

我想如果你改变这个：

```
NSString *javaScriptPass = @"document.getElementById('password').value=%@;"; 
```

对此：

```
NSString *javaScriptPass = @"document.getElementById('password').value='%@';"; 
```

它应该工作。请注意，我在 . 周围添加了单引号`%@`。

数字有效，因为 JavaScript 将您输入的密码解释为数字；但是，当您在其中放置一个不带引号的字符串时，它会尝试运行您的密码，就像它是代码的一部分而不是字符串一样。您可能也应该为学号字段添加引号，因为您实际上是使用数字作为字符串。

# c# - 创建 MethodInvoker 函数

> ID：15837272
> 
> 赞同：1
> 
> 时间：2013-04-05T15:03:25.347
> 
> 标签：c#, methods, delegates

所以我对我的应用程序进行了多线程处理。我遇到了这个错误“跨线程操作无效：控制从创建它的线程以外的线程访问。”

我的线程正在调用 Windows 窗体控件。所以为了解决这个问题，我使用了

Control.Invoke(new MethodInvoker(delegate { ControlsAction; }));

我试图找出一种方法来制作这种通用方法，以便我可以重用代码并使应用程序更清洁。

例如，在我的调用中，我使用富文本框执行以下操作。

```
rtbOutput.Invoke(new MethodInvoker(delegate {    
rtbOutput.AppendText(fields[0].TrimStart().TrimEnd().ToString() + " Profile not   
removed.  Check Logs.\n"); })); 
```

另一个是带有一个组合框，我只是在其中设置文本。

```
cmbEmailProfile.Invoke(new MethodInvoker(delegate { EmailProfileNameToSetForUsers = 
cmbEmailProfile.Text; })); 
```

另一个例子是一个富文本框，我只是简单地清除它。

```
 rtbOutput.Invoke(new MethodInvoker(delegate { rtbOutput.Clear(); })); 
```

我将如何创建一个可以为我执行此操作的通用函数，我只需要通过我希望它执行的操作来传递控件？

这是我们迄今为止提出的。

```
private void methodInvoker(Control sender, Action act)
    {
        sender.Invoke(new MethodInvoker(act));
    } 
```

所以问题类似于 appendtext，它似乎不喜欢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:09:11.067

这样的事情应该可以解决问题：

```
public static class FormsExt
{
    public static void InvokeOnMainThread(this System.Windows.Forms.Control control, Action act)
    {
        control.Invoke(new MethodInvoker(act), null);
    }
} 
```

然后使用它很简单：

```
 var lbl = new System.Windows.Forms.Label();
        lbl.InvokeOnMainThread(() =>
            {
               // Code to run on main thread here
            }); 
```

使用您的原始标签：

```
 rtbOutput.InvokeOnMainThread(() =>
            {
               // Code to run on main thread here
               rtbOutput.AppendText(fields[0].TrimStart().TrimEnd().ToString() + " Profile not removed.  Check Logs.\n"); }));
            }); 
```

# javascript - jQuery 与 MooTools 冲突

> ID：15837279
> 
> 赞同：0
> 
> 时间：2013-04-05T15:04:04.117
> 
> 标签：javascript, jquery, mootools, conflict

1.  我创建了幻灯片菜单，如果我使用 MooTools 用光标触摸/不触摸它，它会弹出/弹出：//MooTools，[http](http://mootools.net) ://mootools.net ，我的面向对象 (JavaScript) 工具。版权所有 (c) 2006-2009 Valerio Proietti，[http](http://mad4milk.net) ://mad4milk.net ，麻省理工学院风格许可证。//core +FX.Scroll +Asset +事件委托

我的脚本的一部分：

```
window.addEvent('domready', function() {
new SlideoutMenu();

initialize: function()
{
    // FF2 Mac screws up the menu display. give the m the basic menu
    if (Browser.Platform.mac && Browser.Engine.gecko && Browser.Engine.version == 18) {
        $('menu').removeClass('js_live');
        return;
    }

    // iPhone should have normal menu
    if (Browser.Platform.ipod) {
        $('menu').removeClass('js_live');
        return;
    }

    this.bg_div = $('menu');
    this.menu_div = $$('#menu #opts')[0];

    this.logo_lnk = $$('#logo a')[0];
    if (this.logo_lnk.hasClass('home')) {
        this.is_homepage = true;
    }

    var rbsEasing = new Fx.Transition(Fx.Transitions.Expo, 4);      

    this.is_open = false;

    this.bgEffect = new Fx.Tween(this.bg_div, {
        unit: '%',
        property: 'width',
        duration: 650,
        transition: rbsEasing.easeOut,
        onComplete:this.bgEffectComplete.bind(this)
    });

    this.menuEffect = new Fx.Tween(this.menu_div, {
        property: 'left',
        transition: rbsEasing.easeOut,
        duration: 650
    });

    $('logo').addEvent('mouseenter', this.showMenu.bind(this));

    this.mouseBindCallback = this.moveMoveCallback.bind(this);
},

bgEffectComplete: function()
{
    if (this.is_open === false) {
        document.addEvent('mousemove', this.mouseBindCallback);
    }
    this.is_open = !this.is_open;
},

showMenu: function()
{
    if (this.is_open === true) {
        return;
    }

    this.bgEffect.start(70);
    this.menuEffect.start(600, $('logo').getPosition().x);

    this.logo_lnk.addClass('active');

    if (this.is_homepage) {
        this.logo_lnk.removeClass('home');
    }
},

hideMenu: function()
{
    this.bgEffect.start(0);
    this.menuEffect.start(600);

    this.logo_lnk.removeClass('active');

    if (this.is_homepage) {
        this.logo_lnk.addClass('home');
    }
},

moveMoveCallback: function(e)
{
    var close_right = this.menu_div.getPosition().x + 370;
    if (e.page.x > close_right && e.page.y > 80 && this.is_open === true) {
        document.removeEvent('mousemove', this.mouseBindCallback);
        this.hideMenu();
    }
} 
```

菜单没有任何问题，然后

1.  我使用 jquery 创建了一个照片幻灯片库，当然菜单停止工作。当我删除 jquery 时，它再次正常工作。有很多网站说 javascript 和 jquery 之间存在冲突，并且不建议一起使用它们，尽管有一个解决方案

    jQuery.noConflict(); 应该在之后添加

我还在 mooTools 文件 jsc.js 和我自己创建的文件中用 $j 更改了 $。最后它工作了，但很奇怪，菜单会弹出，但它的元素不再对齐，当我将光标移开时它不会消失......我觉得有一个简单的解决方案，这是因为我缺乏我在这里寻求您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:00:32.227

尝试在您的 mootools 脚本中全部替换`$`（一美元！不是 2 `$$`）`document.id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:04:38.537

没关系，解决了

(function($){ /* 你的类文件在这里 */ })(document.id);

# c - IPv4 地址的 inet_aton 规范化

> ID：15837280
> 
> 赞同：7
> 
> 时间：2013-04-05T15:04:04.217
> 
> 标签：c, linux, radix, inet-aton

不`inet_aton`打算规范互联网地址的点版本？为什么我会为下面的示例得到不同的输出值？

```
int main(){
    char USER_IP[16] = "192.168.002.025";
    char USER_IP2[16] = "192.168.2.25";
    struct sockaddr_in addr;
    struct sockaddr_in addr2;

    inet_aton(USER_IP2, &addr.sin_addr);
    inet_aton(USER_IP, &addr2.sin_addr);

    printf("addr.sin_addr:%lu\n", addr.sin_addr);
    printf("addr2.sin_addr:%lu\n", addr2.sin_addr);

    return 0;
} 
```

* * *

输出：

```
addr.sin_addr:419604672
addr2.sin_addr:352495808 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T15:09:36.660

从[文档](http://linux.die.net/man/3/inet_aton)

> 点分地址的组成部分可以指定为十进制、八进制（以 0 开头）或 > 十六进制，以 0X 开头）

这意味着

```
char USER_IP[16] = "192.168.002.025"; 
```

意味着 192 168 2 (25 Octal == 21) 和

```
char USER_IP2[16] = "192.168.2.25"; 
```

意味着 192 168 2 25

# highcharts - 使用移动设备时如何在不从当前窗口移动的情况下获取导出的图像

> ID：15837282
> 
> 赞同：0
> 
> 时间：2013-04-05T15:04:09.227
> 
> 标签：highcharts

我正在使用 Highcharts 将数据绘制为不同的图表。

如您所知，如果我在 HTML 文档中添加 exporting.js 文件，

然后它将在 Highcharts 画布的右上角显示一个小按钮

当前的问题发生在我使用智能手机时。

当我尝试导出当前图表时，当前浏览器窗口关闭。

我可以下载文件，但之前的窗口不见了。

如何修改 Highcharts？

当我单击其中一个导出选项时，我想打开新窗口。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:26:23.863

我在 iOS 设备上注意到了这个问题。但是，有一个非常简单的解决方法。默认情况下，highcharts 创建隐藏`<form>`元素并将数据提交到导出服务器。我们可以在这里做的是指定表单的目标属性。

因此，这是一个覆盖默认 Highcharts 导出模块的插入式修复（只需将其放在 exporting.js 之后）

```
Highcharts.post = function (url, data) {
    var createElement = Highcharts.createElement,
        discardElement = Highcharts.discardElement,
        name,
        form;

    // create the form
    form = createElement('form', {
        method: 'post',
        action: url,
        enctype: 'multipart/form-data',
        target: '_blank'
    }, {
        display: 'none'
    }, document.body);

    // add the data
    for (name in data) {
        createElement('input', {
            type: 'hidden',
            name: name,
            value: data[name]
        }, null, form);
    }

    // submit
    form.submit();

    // clean up
    discardElement(form);
}; 
```

在这里你可以找到一个工作演示：http: [//jsfiddle.net/dWfv5/](http://jsfiddle.net/dWfv5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T07:10:57.833

从 Highcharts 3.0.8 (2014-01-09) 开始，您可以将目标设置为选项，因此您不需要插入式修复。

将目标指定为[exporting.formAttributes](http://api.highcharts.com/highcharts#exporting.formAttributes)的一部分，如下所示：

```
 exporting: {
        formAttributes: {
            target: '_blank'
        }
    } 
```

现场演示[http://jsfiddle.net/highcharts/dWfv5/4/](http://jsfiddle.net/highcharts/dWfv5/4/)

# html - graphviz 嵌入网址

> ID：15837283
> 
> 赞同：22
> 
> 时间：2013-04-05T15:04:11.903
> 
> 标签：html, graphviz

我试图弄清楚如何生成带有超链接的图形，您可以单击以访问有关图形中每个节点/边的更多详细信息。我发现 graphviz 使用 URL 节点属性具有这种能力。使用我的测试文件...

```
graph G {
    node [label="\N"];
    graph [bb="0,0,218,108"];
    king [pos="31,90", width="0.86", height="0.50"];
    lord [pos="31,18", width="0.81", height="0.50"];
    "boot-master" [URL="google.com"];
    king -- lord [pos="31,72 31,61 31,47 31,36"];
} 
```

...我能够生成一个似乎包含一些有用信息的 cmapx 文件：

```
<map id="G" name="G">
<area shape="poly" href="google.com" title="boot&#45;master" alt="" coords="297,29 292,22 279,15 258,10 233,7 204,5 175,7 150,10 129,15 116,22 111,29 116,37 129,43 150,49 175,52 204,53 233,52 258,49 279,43 292,37"/>
</map> 
```

这是我用来生成它的命令：

```
dot -Tcmapx example1_graph.dot -o test.cmapx 
```

但是我不确定如何使用这个文件？graphviz 的文档还提到 ps2 格式应该适用于 URL 链接，但我没有任何运气。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-05T18:43:47.717

graphviz 创建的地图通常可以在**HTML 页面**中使用。

这个想法是运行 graphviz 两次：一次创建地图，一次创建图像。

```
dot -Tcmapx example1_graph.dot -o test.cmapx
dot -Tpng example1_graph.dot -o test.png 
```

然后图像与地图一起在 HTML 页面中提供。语法是这样的：

```
<img src="/test.png" usemap="#G" alt="graphviz graph" />
<!-- graphviz generated map -->
<map id="G" name="G">
    <area shape="poly" href="google.com" title="boot&#45;master" alt="" coords="297,29 292,22 279,15 258,10 233,7 204,5 175,7 150,10 129,15 116,22 111,29 116,37 129,43 150,49 175,52 204,53 233,52 258,49 279,43 292,37"/>
</map> 
```

重要的部分是`usemap="#G"`将图像链接到地图。

另请参阅[此页面](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-map-element.html#the-map-element)以获取同时提供图像和地图的 html 页面的示例。

* * *

使用 Url 的另一种格式是**SVG**：

```
dot -Tsvg example1_graph.dot -o test.svg 
```

如果`test.svg`在浏览器中打开，包含 URL 的节点是可点击的。

（顺便说一句，根据您的使用情况，您可能希望在 URL 前加上`http://`）

# jquery-plugins - jcoverflip jquery 小部件是否有替代方案？

> ID：15837287
> 
> 赞同：1
> 
> 时间：2013-04-05T15:04:25.370
> 
> 标签：jquery-plugins

jcoverflip 小部件不适用于 jQuery 1.9.1。我在此行收到“无法调用未定义的方法‘创建’”错误：

```
var title = this.options.titles.create( el ); 
```

我一直无法找到替代方案。任何人都知道一个[做同样](http://www.jcoverflip.com/demo)的小部件？

# c# - 查表允许空

> ID：15837297
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:05:22.700
> 
> 标签：c#, sql-server

我有一个`incident`表，`incidentTypeId(int)`它是一个允许 null 的外键。

该`incidentType`表有两列`Id auto increment primary key not null`和`incidentType not null nvarchar`。

该`incidentType`表用于填充一个`DDL`我有一个`listItem`被选为`selected`“”的值。我正在检查值是否为“”，如果是，我将我的设置`selectedValue`为`DDL`空。

当我从`DDL`一切都很好并且工作正常时，我选择了一些东西。

当我尝试并且`insert`没有选择任何内容并将其设置为时，我在不允许 null的列上`null`得到一个，因为它是主键。`sqlexception on foreign key constraint``incidentType Id`

我怎样才能绕过允许空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:10:27.063

主键不能为 Null。这是不可能的，因为您的条目必须有一个 ID 号。否则没有注意创造。

# visual-studio-2010 - 将 SP 2007 Web 部件迁移到 SP 2010

> ID：15837305
> 
> 赞同：0
> 
> 时间：2013-04-05T15:05:35.687
> 
> 标签：visual-studio-2010, visual-studio-2008, sharepoint-2010, sharepoint-2007

我正在尝试将 2007 年创建的 Web 部件迁移到 2010 年，我遇到的问题是我在创建这些时没有使用 VSeWSS。我拥有的 Web 部件项目中的所有文件都在这里...

![在此处输入图像描述](https://i.stack.imgur.com/1c18k.png)

我的问题是，有没有更好的方法来迁移这些？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:17:52.497

您想要完整的 SP2010 支持吗？在这种情况下，请在 VS2010 for SP2010 中创建一个新的 SharePoint 解决方案，并导入现有的 Webpart 类和文件。接下来唯一需要做的就是将所有 SharePoint 版本号从 12.0.0.0 更新到 14.0.0.0。

（在那之后，修复一些问题，因为在 SP2010 中有些东西的工作方式不同）。

# c# - 闭包中的 Foreach 变量。为什么这些片段的结果不同？

> ID：15837313
> 
> 赞同：9
> 
> 时间：2013-04-05T15:05:59.223
> 
> 标签：c#, .net, multithreading, task

任何人都可以解释为什么这个片段：

```
// Create required tasks
foreach (var messageToSend in messagesToSend)
{
  EmailMessage messageToBeSent = messageToSend;
  Task<bool> processingTask = new Task<bool>(() => SendMessage(messageToBeSent));
  processingTask.Start();
} 
```

工作方式与此不同：

```
// Create required tasks
foreach (var messageToSend in messagesToSend)
{
  Task<bool> processingTask = new Task<bool>(() => SendMessage(messageToSend));
  processingTask.Start();
} 
```

在第一个片段中，所有任务都以自己的消息开头，而在第二个片段中，所有任务都以相同的消息开头？

Resharper 给出了这样的描述：“在闭包中访问 foreach 变量。使用不同版本的编译器编译时可能会有不同的行为。” 为什么它可能有不同的行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T15:07:59.343

> Resharper 给出了这样的描述：“在闭包中访问 foreach 变量。使用不同版本的编译器编译时可能会有不同的行为。” 为什么它可能有不同的行为？

由于 foreach 中的循环变量受到闭包影响的方式，C# 4 和 C# 5 之间发生了重大变化，特别是自 C# 3 中引入 lambda 表达式以来。Resharper 警告您这一点，以防您可能依赖或以其他方式已经开始期待以前的语义。

快速的结果是，在 C# 4 中，循环变量在循环的每次迭代之间共享，并且闭包会捕获该变量，因此大多数人在关闭循环变量时会导致意想不到的结果。

在 C# 5 中，循环的每次迭代都有自己的变量，因此一次迭代中的闭包不会像其他迭代那样关闭相同的变量，从而导致更多的预期结果（对于大多数人而言）。

这让我们找到了您问题的核心：

> 在第一个片段中，所有任务都以自己的消息开头，而在第二个片段中，所有任务都以相同的消息开头？

在您的第一个片段中，您正在循环内创建循环变量的副本，并且闭包发生在内部变量上。在第二个中，您直接关闭循环变量。据推测，您在 C# 4 下运行，因此适用前语义。如果在 C# 5 中运行，两个版本的循环输出应该是一致的。这是 Resharper 所指的更改，它也应该让您了解如何在 C# 4 中构建代码（即使用您编写的第一个版本）。

正如 Justin Pihony 在评论中指出的那样，[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)写了一篇关于前语义的[非常有用的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)，其中也暗示了 C# 5 的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:07:55.367

您的第二个代码示例有一个**，** `messageToSend`所有 lambda 表达式都在它们的闭包中捕获它。

当委托运行时，它们使用变量的*当前*值。

# iphone - 找不到plist文件

> ID：15837315
> 
> 赞同：0
> 
> 时间：2013-04-05T15:06:04.453
> 
> 标签：iphone, ios, cocoa-touch

我正在尝试将一个简单的数组写入 plist 文件，然后再检索它。我有以下代码：

```
+ (NSString*) dataFilePath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [paths objectAtIndex:0];
    NSString *dataFilePath = [documentDirectory stringByAppendingPathComponent:@"TipAlertViewDefaults.plist"];

    return dataFilePath;
}

+ (NSArray*) tipAlertViewDefaults
{
    NSString *dataFilePath = [self dataFilePath];
    NSLog(@"DataFilePath: %@", dataFilePath);
    NSMutableArray *tipAlertViewDefaults;

    if ([[NSFileManager defaultManager] fileExistsAtPath:dataFilePath])
    {
        NSLog(@"File Exists");
        tipAlertViewDefaults = [[NSMutableArray alloc] initWithContentsOfFile:dataFilePath];
    }
    else
    {
        NSLog(@"File Doesn't Exist");
        tipAlertViewDefaults = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithBool:NO], nil];
        [tipAlertViewDefaults writeToFile:dataFilePath atomically:YES];
    }

    return tipAlertViewDefaults;
} 
```

我调用了这个方法两次，第一次它不应该找到文件并第一次写入。然后第二次调用应该能够找到该文件，但它不是。谁能看到我要去哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:10:48.507

再一次，Xcode 愚蠢的自动完成让你迷失了：`NSDocumentationDirectory`应该是`NSDocumentDirectory`.

文档目录在 iOS 上不存在，所以你不能在那里写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:26:12.863

您真的要写入`NSDocumentationDirectory`目录吗？我认为，默认情况下不会创建此目录（因此您必须先创建）。

也许你想要`NSDocumentDirectory`。我试过了，你的代码有效。

# java - 跨 Java EE 应用程序通知数据库更改

> ID：15837320
> 
> 赞同：0
> 
> 时间：2013-04-05T15:06:18.663
> 
> 标签：java, oracle, web-applications, ehcache, jgroups

我有一个与 EJB 服务通信以检索数据并将其显示给客户端的 Web 应用程序。

Web 应用程序和 EJB 服务的数据库不同。我在我的 web 应用程序中使用 ehcache 缓存从 EJB 服务检索到的任何数据。现在，每当 EJB 服务提供的数据在 DB(Oracle) 级别发生更改时，我的 Web 应用程序中的缓存都需要得到通知。

无论如何，我的缓存是否可以接收此类通知并用新数据刷新自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:30:46.647

创建一个监听器，当您从 ejb 收到任何数据时，它会收到通知，为此使用观察者设计模式或通过 jms。在侦听器中，您可以重新加载 Ehcache 中的特定元素。

# php - 使用 PHP 进行简单的年份格式验证

> ID：15837328
> 
> 赞同：0
> 
> 时间：2013-04-05T15:07:04.120
> 
> 标签：php, validation

我想验证给定年份输入是否为特定格式。年份的格式应该是`YYYYAD`或`YYYYBC`（例如：）`2013AD`- 4 个数字和 AD/BC，中间没有任何空格。

如果输入格式正确，则应返回 true，否则应返回 false。（一些预期的不正确格式是; `123AD`, `XYZAD`, `AD2013`, `AD`, `2013`, `@123AD`, `2013ad`）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:08:30.993

使用正则表达式，例如`/^\d{4}(AD|BC)$/`.

**正则表达式的解释**：

*   `^`- 字符串的开始
*   `\d{4}`- 一个从 0 到 9 的数字恰好重复 4 次
*   `(AD|BC)`- 一组字符串“ `AD`”或字符串“ `BC`”
*   `$`- 字符串结束

**代码**：

```
$input = "2013BC";
if (preg_match("/^(\d{4})(AD|BC)$/", $input, $matches)) {
    echo "OK.\n";
    echo "Year: " . $matches[1] . "\n";
    echo "AC/BC: " . $matches[2];
} else {
    echo "NOT OK!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:08:11.290

```
function check($year)
{
  if (is_numeric(substr($year, 0, 4)) && in_array(array("AD", "BC"), substr($year, 4,6)))
    return true;
  return false;
} 
```

或者使用正则表达式，你可以检查`/d{4}(AD|BC)/`

# php - Telnet 到 localhost 有效，但 php 套接字代码中的 IP 无效

> ID：15837330
> 
> 赞同：1
> 
> 时间：2013-04-05T15:07:10.623
> 
> 标签：php, sockets, networking, telnet

这是我的 php 套接字读取代码

```
<?php
$host = "0.0.0.0";
$port = 5060;

set_time_limit(0);

$socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not create socket\n");

$result = socket_bind($socket, $host, $port) or die("Could not bind to socket\n");

$result = socket_listen($socket, 3) or die("Could not set up socket listener\n");

while(1) {
    $spawn = socket_accept($socket) or die("Could not accept incoming connection\n");

    while ($input = socket_read($spawn, 1024)) {

        $input = trim($input);
        echo "Client Message : " . $input;
    }

    socket_close($spawn);
}
socket_close($socket);
?> 
```

我可以做，`telnet localhost 5060`但我做不到`telnet 192.168.12.154 5060`。它仅在 1 次输入后存在。任何人都可以说什么可能是错的

# sharepoint - 使用 XSLT 的日期比较过滤器？

> ID：15837333
> 
> 赞同：0
> 
> 时间：2013-04-05T15:07:35.853
> 
> 标签：sharepoint, search, sharepoint-2010, sharepoint-designer

我有一个“可用日期”列，该列最初的列类型为“单行文本”。所有值均采用 m/dd/yyy 格式。使用以下搜索过滤器没有问题：

(number(ddwrt:FormatDateTime($NeedBy,1033,'yyyyMMdd')) >= number(ddwrt:FormatDateTime(string(@arsDateAvailable),1033,'yyyyMMdd')) 或 $NeedBy = '')

但是列类型必须更改为“日期和时间”，现在这个过滤器似乎不起作用。这是因为列类型已更改吗？如何修改此过滤器以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:44:38.590

这会将日期转换为可用于比较其他日期的数字（也以这种方式转换）：

```
ddwrt:DateTimeTick(ddwrt:GenDisplayName(string(@arsDateAvilable))) 
```

# c# - 事件在新线程上执行的操作

> ID：15837341
> 
> 赞同：0
> 
> 时间：2013-04-05T15:07:58.430
> 
> 标签：c#, multithreading, events, event-handling, observablecollection

我有一个可观察的集合

```
var QueryList = new ObservableCollection<QueryData>(); 
```

假设我在触发此集合的 CollectionChanged 事件时实现了一个方法 OnQueryListCollectionChanged。诀窍是我希望这个方法在一个新线程上执行。

```
QueryList.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(new ThreadStart(OnQueryListCollectionChanged)); 
```

我知道上面的行不正确，但我不确定如何让 Collection 的 NotifyCollectionChangedEventHandler 委托将 OnQueryListCollectionChanged 方法指向新线程。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:11:55.250

没有直接的方法可以在与注册处理程序不同的线程上处理事件。

您可以将事件指向一个方法，然后从那里产生一个新线程来完成您的工作，是的，被引发的事件可能会中断您的主线程，但只够您启动新线程。

作为旁注，我建议不要直接使用线程，而是使用较新的`Task`类，请参阅：[任务和线程之间有什么区别？](https://stackoverflow.com/questions/4130194/what-is-the-difference-between-task-and-thread)

# android - 安卓永久记忆

> ID：15837343
> 
> 赞同：0
> 
> 时间：2013-04-05T15:08:01.990
> 
> 标签：android, memory

我的应用根据调用者和一些预定义的值执行不同的操作。当电话开始响起时，我需要尽可能快地从数据库中读取这些偏好并显示它们。我试图在 BroadcastReceiver 中使用静态变量，我也尝试将它们放在 Service 中，但它似乎已经死掉并丢失了所有值。如果我再次从数据库中读取它们，则显示信息需要很长时间。那么，有没有办法告诉 Android 尊重部分内存，以便我可以保留信息？

谢谢

已编辑：从 SharedPreferences 读取是否比从小型数据库读取更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:10:47.493

使用 SharedPreferences，它们就像您应用程序的私有部分，将永久保存您的值，直到用户重新安装（清除数据）应用程序。共享首选项的工作原理是这样的

```
// save string in sharedPreferences
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putString("some_key", string); // here string is the value you want to save
                    editor.commit();                    

// restore string in sharedPreferences 
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
string = settings.getString("some_key", ""); 
```

显然你可以保存 int boolean 等而不是字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:13:23.873

不，没有办法告诉 Android 保留 RAM 内存。VM 关闭时，RAM 内存将始终丢失。

在 Android 开发者网站上有一个关于永久存储的选项和方法的很好的讨论[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

但快速回答是： - 根据您可能想要使用 SharedPreferences 或数据库 (SQLite) 的数据类型和数量

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T15:09:05.920

您可以使用 Android 共享首选项。 [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

这篇文章的答案是一个非常好的解决方案。 [Android 共享首选项](https://stackoverflow.com/questions/5734721/android-shared-preferences)

# c# - PHP 的 realpath 等价于 C#

> ID：15837345
> 
> 赞同：4
> 
> 时间：2013-04-05T15:08:02.607
> 
> 标签：c#, php, file

C# 中是否有与 PHP 的UNIX 路径的[realpath等效的函数？](http://php.net/manual/en/function.realpath.php)

我找不到任何东西，而且从头开始写一个似乎很耗时。

我知道[`GetFullPath`](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath%28v=VS.100%29.aspx)但它有以下问题（对我来说）：

*   这是一个正在返回的 Windows 路径，因此返回类似`"//foo//../bar///c"`,`"t:\bar\c"`的内容。
*   它从目录名称中删除空格，因此返回类似`"/foo bar/baz"`,`"t:\foobar\baz"`的内容。
*   Giving`Console.WriteLine(Path.GetFullPath( "//d/"));`甚至没有编译，我得到这个`ArgumentExcpetion`消息：`The UNC path should be of the form \\server\share.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:16:37.103

我认为这取决于你想要什么以及你用 C# 编写的应用程序类型

在`System.IO`有几个路径特定的功能

IE`System.IO.Path.GetDirectoryName`

您还可以使用反射获取执行的程序集路径，即 `System.Reflection.Assembly.GetExecutingAssembly().Location`

在 MVC 中有 httpcontext 中的 MapPath 即 `HttpContext.Current.Server.MapPath`

有几种选择，大多数都是可扩展的。

你的具体问题是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:22:58.910

您可以使用`Uri`类，它只是不会合并所有重复的斜杠，因此需要进行一些后处理：

```
new Regex(@"/\/+/").Replace(new Uri("//foo//../bar///c").AbsolutePath, "/") 
```

但我建议您自己编写代码，以便更好地控制。

# c++ - 如何将 c++ 库添加到公共 linux/unix 集群上的编译器

> ID：15837359
> 
> 赞同：1
> 
> 时间：2013-04-05T15:08:40.653
> 
> 标签：c++, linux, unix, compiler-construction, path

我正在使用学校公共集群，并希望将 c++ 库路径包含到 c++ 编译器。我已经安装了boost，犰狳等。在制作它们之后，程序告诉我将头文件路径添加到 c++ 编译器。由于我在公共集群中，我该怎么做？显然我没有 sudo 或 yum 权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:11:59.670

`-I/home/username/where/your/directories/are/include`用于标题

`-L/home/username/where/your/directories/are/lib`为您的图书馆

从这里开始，如果你想运行你的可执行文件，你有两个选择：

1.  更新你`LD_LIBRARY_PATH`的`/home/username/where/your/directories/are/lib`
2.  在您的编译行中添加：`-Wl,-rpath,/home/username/where/your/directories/are/lib`

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:13:48.930

您可以编辑 shell 的启动文件（如果使用 bash，则为 .bashrc）为 C、C++ 和链接器设置编译器环境变量。如果您使用 gcc，请参阅此[文档](http://gcc.gnu.org/onlinedocs/cpp/Environment-Variables.html)。

```
CPATH
C_INCLUDE_PATH
CPLUS_INCLUDE_PATH
OBJC_INCLUDE_PATH 
```

# android - 你知道为什么 mediaplayer runonuithread 不起作用吗？

> ID：15837370
> 
> 赞同：0
> 
> 时间：2013-04-05T15:09:09.940
> 
> 标签：android, multithreading

我正在尝试`MediaPlayer`使用`runOnUiThread`. 我没有发现任何异常`setDataSource`。但在那之后，什么都没有发生`MediaPlayer`。它应该在表面发生变化时给出回调，并且`onPrepared`.

好像`MediaPlayer`不支持这种方式。如果是真的，是否有任何解决方法？我需要这种逻辑，因为我需要获取被阻止的网络查询的信息。我需要`onSuccess`摆脱它。

您对此有何建议？非常感谢！

```
onResume() 
{
   getInfo(xxx);
}

void getInfo(url, new DataListener() {
    @Override
    public void onDataSuccess(xxx) {
        playVideoOnSuccess(xxx);
    }
}
public void playVideoOnSuccess(xxx)
{
    myBaseActivity.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            try {
                mPlayerListener = new VideoPlayerListener(null, content);
                // create new mediaplayer
                mVideoPlayer = VideoPlayer.getInstance();
                mVideoPlayer.setVideoPlayerListener(mPlayerListener);

                // setDataSource
                mVideoPlayer.consumeContent(content);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:01:20.117

这是我用来播放视频的示例代码，希望这可能对您有所帮助

```
 public class VideoViewDemo extends Activity {

private static final String TAG = "VideoViewDemo";
private String current;

/**
 * TODO: Set the path variable to a streaming video URL or a local media
 * file path.
 */
private String path = "http://www.boisestatefootball.com/sites/default/files/videos/original/01%20-%20coach%20pete%20bio_4.mp4";
private VideoView mVideoView;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.videoview);
    mVideoView = (VideoView) findViewById(R.id.surface_view);
    runOnUiThread(new Runnable() {
        public void run() {
            playVideo();
        }
    });
}

private void playVideo() {
    try {
        // final String path = path;
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(VideoViewDemo.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

        } else {
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {
                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;
            mVideoView.setVideoPath(getDataSource(path));
            mVideoView.start();
            mVideoView.setMediaController(new MediaController(this));
            mVideoView.requestFocus();

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
}

private String getDataSource(String path) throws IOException {
    if (!URLUtil.isNetworkUrl(path)) {
        return path;
    } else {
        URL url = new URL(path);
        URLConnection cn = url.openConnection();
        cn.connect();
        InputStream stream = cn.getInputStream();
        if (stream == null)
            throw new RuntimeException("stream is null");
        File temp = File.createTempFile("mediaplayertmp", "dat");
        temp.deleteOnExit();
        String tempPath = temp.getAbsolutePath();
        FileOutputStream out = new FileOutputStream(temp);
        byte buf[] = new byte[128];
        do {
            int numread = stream.read(buf);
            if (numread <= 0)
                break;
            out.write(buf, 0, numread);
        } while (true);
        try {
            stream.close();
        } catch (IOException ex) {
            Log.e(TAG, "error: " + ex.getMessage(), ex);
        }
        return tempPath;
    }
}
} 
```

这对我有用

# entity-framework - CRUD（插入和更新）函数应该返回什么？

> ID：15837371
> 
> 赞同：7
> 
> 时间：2013-04-05T15:09:10.800
> 
> 标签：entity-framework, repository-pattern, crud

我什么都不能返回..我可以返回真/假以显示是否有任何问题..我可以返回一个 int 作为插入或更新内容的主键..我可以创建一个自定义对象来返回更多信息..也许保存所有验证错误或可能发生的事情的集合..

所以这不是我坚持的事情，但我似乎只是随机选择不同的方式，所以想听听这些常见功能的最佳实践..

我正在使用 C#/Entities/Repository 模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:13:39.850

这真的是个人喜好的问题。您可能想要区分命令和查询。

因此，创建、更新和删除将是命令，我希望它们返回 void。

读取将是查询并将返回 IQueryable。

但是，如果您通常希望在插入后直接使用插入的对象，您可能希望将对象作为插入的结果返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:11:58.190

恕我直言，这是一个悬而未决的问题。作为 fluent API 的粉丝，如果成功，我会返回插入、更新的对象。

否则（如果发生错误或意外情况），我会抛出。

# android - 将 ALSA 添加到 Android

> ID：15837374
> 
> 赞同：0
> 
> 时间：2013-04-05T15:09:25.013
> 
> 标签：android, alsa

我想了解像[**AlsaMixer**](http://de.appszoom.com/android_applications/tools/alsamixer-root-required_bzprk.html)或[**MixGet 这样的应用程序，带有 alsa 的混音器小部件**](https://play.google.com/store/apps/details?id=com.gilsken.mixget&hl=de)是如何工作的。

特别是，我想开发一个使用 ALSA 可用的“/etc/asound.conf”的应用程序。

有没有人对此有更多的了解？如何为每个 Android 设备“构建”ALSA？

我个人已经在我自己的三星 Galaxy Nexus 上测试了这些应用程序，它本机使用“tinyalsa”，并在“HTC Desire”上使用“/dev/msm_audio_out”（不知道这到底是什么）。

似乎这些应用程序需要root，没问题，但是它们无需进行较大的修改即可在多种设备上运行）。

在此先感谢您的帮助，我已经阅读了数百个文档，但没有找到任何真实信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:10:43.130

如果是安卓设备

*   实际使用 ALSA 驱动程序；和
*   已植根（以便您的应用可以访问设备文件），

然后你可以通过 NDK 访问 ALSA 库。在这种情况下，ALSA 就像在任何其他机器上一样工作。

# servicestack - 自定义 ResponseStatus 错误代码属性

> ID：15837380
> 
> 赞同：1
> 
> 时间：2013-04-05T15:09:45.530
> 
> 标签：servicestack

我使用 ServiceStack 已经有一段时间了，需要知道是否可以在引发异常时自定义 ResponseStatus 对象。

所以我目前得到这样的回应：

```
{"responseStatus":{"errorCode":"PasswordNotValidException",
"message":"User Defined Error","errors":[]}} 
```

我想更新“errorCode”字段，以便它返回一个可能来自枚举的自定义错误代码，如下所示：

```
{"responseStatus":{"errorCode":"PasswordNotValid",
"message":"User Defined Error","errors":[]}} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:43:29.487

请阅读[ServiceStack 的错误处理 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)，它目前列出了 ServiceStack 中可用的潜在错误自定义。

# sql-server - 按初始调查回复过滤回复

> ID：15837382
> 
> 赞同：1
> 
> 时间：2013-04-05T15:09:50.117
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个表需要被同一个表中的其他响应过滤。我使用以下有效的脚本，但是当“Customer.customer_id”（有时有）重复时，结果会出现偏差。我的问题是是否有更好的方法来重写此代码以避免这种情况，因此它只从“客户”表中选择不同的结果？

下面的示例表应仅返回“**两个**”响​​应，因为 customer_id '10' 存在重复条目（基于以下查询）

样品表：

```
[res_id]  [question_id]  [customer_id]  [survey_id]  [res_answer]
  1            20             10           155          male
  1            20             11           155          male
  1            20             10           155          male
  1            20             12           155          female 
```

当前查询：

```
 SELECT
  Responses.res_id AS responseID
     ,Responses.res_col AS answer
    ,Responses.res_created AS dateCreated
    ,Responses.res_notes AS note
    ,Responses.question_id AS questionID
    ,Responses.customer_id AS customerID
    ,Responses.res_answer AS subQuestion
    ,Responses.survey_id AS surveyID
    ,Responses.res_void AS void
    ,Customer.res_answer AS filter
FROM
    Responses, Responses AS Customer
WHERE
    rs.customer_id = Customer.customer_id
AND
    Responses.survey_id ='155' 
AND
    Customer.survey_id = '155'
AND
    Responses.question_id = '20'                    

AND CAST(Customer.res_answer AS VARCHAR(500)) = 'male'
AND Responses.res_void = '0' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:56:57.083

如果 2005 年不支持 Distinct，则按

```
SELECT Distinct 
     Responses.res_id AS responseID
    ,Responses.res_col AS answer
    ,Responses.res_created AS dateCreated
    ,Responses.res_notes AS note
    ,Responses.question_id AS questionID
    ,Responses.customer_id AS customerID
    ,Responses.res_answer AS subQuestion
    ,Responses.survey_id AS surveyID
    ,Responses.res_void AS void
    ,'male'
FROM Responses
WHERE Responses.survey_id ='155' 
  AND Responses.question_id = '20'  
  AND Responses.res_void = '0'                  
  AND exists (select 1 from Responses c 
              where c.res_answer = 'male' 
                and c.survey_id  = '155'
                and c.ID = Responses.ID) 
```

# filter - 未使用 Redgate SqlCompare 过滤器，导致问题

> ID：15837385
> 
> 赞同：1
> 
> 时间：2013-04-05T15:09:58.740
> 
> 标签：filter, redgate, sqlcompare

我有几个保存的项目，我在命令行中使用它们来比较数据库和 TFS。我的一个数据库有大量与 asp.net 相关的表，这些表都在表名中包含“aspnet”，我正试图将它们过滤掉。

我通过 .scp 文件中的 gui 创建了过滤器，但它似乎没有被拾取。（从 scp 文件中提取..）

```
<Table version="1"> 
  <Include>False</Include> 
  <Expression>(@NAME LIKE 'xx%') OR (@NAME LIKE 'aspnet%')</Expression> 
</Table> 
```

然后我通过 GUI 再次创建了一个单独的过滤器，并使用 /filter 开关从命令行调用它，但它再次没有被使用。（从 .scpf 文件中提取）

```
<Table version="1"> 
  <Include>False</Include> 
  <Expression>(@NAME LIKE 'xx%') OR (@NAME LIKE 'aspnet%')</Expression> 
</Table> 
```

如果我将 /filter 开关更改为指向一个不存在的文件，它会出错，所以大概它正在使用 filter 开关，并且确实在输出中列出了它。

```
Argument /filter has value 'DatabaseNameFilter.scpf' 
```

请问我在这里缺少什么？

这是完整的命令行

```
"C:\Program Files (x86)\Red Gate\SQL Compare 10\sqlcompare.exe" /project:"C:\Users\CIUser\Documents\SQL Compare\SharedProjects\MyDB (Head) v MyDB.scp" /assertidentical /password1:mypassword /include:identical /Report:myreport.html /ReportType:Simple /Options:Default,ForceColumnOrder,IgnoreCollations,oec,IncludeDependencies /verbose /force /filter:MyFilter.scpf >f.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:57:47.207

看起来如果您在 UI 中明确选择一个对象并保存 SQL 比较项目，这将覆盖过滤器。例如，使用示例数据库，创建一个项目并选择要包含的所有对象，然后保存该项目。创建一个新过滤器并排除以“价格”结尾的对象并保存过滤器。当您使用命令行使用项目 + 过滤器创建报表时，报表将包含表“WidgetPrices”。

返回项目，关闭过滤器并取消选择 WidgetPrices 表，使其不再包含在项目中并保存，然后再次使用该项目运行命令行，并且 WidgetPrices 不再在报告中。

# oracle - 无法为 oracle 创建系统 DSN

> ID：15837387
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:10:05.873
> 
> 标签：oracle, odbc

我需要设置一个 DSN 以从 R 连接到 Oracle 数据库。我知道我安装了 oracle 客户端，因为我可以使用 PL/SQL 连接 Oracle 数据库。当我打开控制面板-> 管理员工具-> 数据源时，我没有在其中看到 Oracle。我只看到 Sybase、MSSQL 和 excel。如何在 System DSN 下添加 Oracle，以便创建 dsn 以连接到 Oracle db？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:19:32.457

尝试下载 Oracle ODBC 驱动程序 [http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-098155.html](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-098155.html)

我知道当我曾经为某个程序安装 oracle 时，我会进行自定义安装，然后在 Oracle Windows Interfaces 下选择 Oracle ODBC Driver

# html - 让 DIV 随内容自动调整大小 - CSS

> ID：15837388
> 
> 赞同：0
> 
> 时间：2013-04-05T15:10:06.413
> 
> 标签：html, css

直接链接到问题：[http ://s18.postimg.org/f55rkfl1l/issue.png](http://s18.postimg.org/f55rkfl1l/issue.png)

```
<div class="overall_content">
        <div class="content">
            <p>jessicaPhotography<br><img src="images/heart.png"></p>
            <div class="content_picture">   
                    <p class="main">
                    This is where the revolving images will appea
                    This is where the revolving images will appea
                    This is where the revolving images will appea
                    This is where the revolving images will appea
                    This is where the revolving images will appea
                    </p> 
            </div>
        </div>
    </div> 
```

有人可以帮我理解为什么我不能让我的内容 div 用段落标签中的文本进行扩展。这是我的CSS：

```
html, body, header, p, h1, h2, h3, h4, h5, h6, img, .content {
padding: 0px;
margin: 0px;
}

html {
background: url('images/background_gradient.png') repeat;
}

header {
width: 100%;
height: 30px;
background: rgb(0,0,0);
}

.overall_content {
width: 84%;
height: 100%;
background: rgb(255,255,255);
margin: 0px auto;
margin-top: .5%;
position: relative;
}

.content {
width: 98%;
height: 98%;
background: rgb(0,0,0);
position: absolute;
top: 1%;
left: 1%;
} 
```

**附加信息**

```
.content_picture {
height: 100%;
width: 100%;
}

/********************************/
/* Intrinsic Content Properties */
/********************************/

.content p.main {
color: rgb(255,255,255);
font-family: Verdana, Arial;
font-size: 18px;
padding: 25px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:16:06.990

问题是您设置了固定的宽度和高度。`.content`每次都会有 的 98% 的大小`.overall-content`，与其内容无关。当您将高度设置为自动时，应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:21:17.607

删除`height`限制，然后如果添加一些文本，则 div 会变小或变高（适应您的内容...；）

# android - VLC RTSP 直播到 Android

> ID：15837390
> 
> 赞同：10
> 
> 时间：2013-04-05T15:10:11.100
> 
> 标签：android, stream, vlc, rtsp

对于我的应用程序，我必须从 Decklink 卡流式传输到 Android 应用程序（我必须是实时流，因此 HLS 或 RTSP 似乎是很好的解决方案，因为我的应用程序针对 Android 3+）。我用decklink sdk重新编译了VLC，我可以通过网络直播到另一台电脑（但它只能用RTSP工作60秒）。

这是我尝试过的：

*   HTTP 流：

    ```
    ./vlc -vvv decklink:// --sout
    '#transcode{vcodec=mp4v,acodec=mpga,vb=56,ab=24,channels=1}
    :standard{access=http{use-key-frames},mux=ts,dst=:3001/stream.mpeg}' 
    ```

它适用于 Android VLC 0.0.11，但仅适用于 WiFi，不适用于 3G。而且我无法使用 VideoView 在我的应用程序中播放它。这是我使用的代码和相应的错误消息：

```
String url = "http://134.246.63.169:5554/stream.mpeg";

VideoView videoView = (VideoView) this.findViewById(R.id.videoView);
videoView.setVideoURI(Uri.parse(url));        
videoView.setMediaController(new MediaController(this));
videoView.requestFocus();  
videoView.start(); 
```

错误信息：

```
04-08 15:26:46.272: D/MediaPlayer(16349): Couldn't open file on client side, trying server side
04-08 15:26:46.272: V/ChromiumHTTPDataSource(7680): connect on behalf of uid 1080867789
04-08 15:26:46.272: I/ChromiumHTTPDataSource(7680): connect to http://134.246.63.169:8554/ @0
04-08 15:26:46.302: I/AwesomePlayer(7680): AwesomePlayer::AwesomePlayer()in
04-08 15:26:46.302: I/AwesomePlayer(7680): AwesomePlayer::AwesomePlayer()aftermClient.connect()
04-08 15:26:46.302: I/AwesomePlayer(7680): setDataSource_l('http://134.246.63.169:5554/')
04-08 15:26:46.302: W/MediaPlayer(16349): info/warning (701, 0)
04-08 15:26:46.302: V/ChromiumHTTPDataSource(7680): connect on behalf of uid 10067
04-08 15:26:46.302: I/ChromiumHTTPDataSource(7680): connect to http://134.246.63.169:5554/ @0
04-08 15:26:46.342: I/ActivityManager(272): Displayed fr.ifremer.testrtsp/.MainActivity: +183ms
04-08 15:26:46.382: I/MediaPlayer(16349): Info (701,0)
04-08 15:27:07.592: E/MediaPlayer(16349): error (1, -2147483648)
04-08 15:27:07.592: E/MediaPlayer(16349): Error (1,-2147483648) 
```

*   实时传输协议：

[我在此页面](http://developer.android.com/guide/appendix/media-formats.html)上使用了 Google 推荐的编码选项，例如：

*   视频编解码器：h264
*   音频编解码器：AAC
*   视频比特率：56
*   音频比特率：24
*   音频通道：1
*   尺寸：176x144

    ```
    ./vlc -vvv decklink:// --sout-ffmpeg-strict=-2 --sout
    '#transcode{width=176,height=144,vcodec=h264,acodec=mp4a,vb=56,ab=24,channels=1}
    :rtp{dst=134.246.63.169,port-video=5554,port-audio=5556,sdp=rtsp://134.246.63.169:5554/stream.sdp}' 
    ```

我可以在 VLC 桌面播放流，但不能在 Android 中播放（即使在 Android VLC 版本或默认的 Google 视频播放器中：/ ）。如果我不指定复用器，我也可以播放它 QuickTime（如果我指定复用器，ts 或 ps，我没有视频。如果我尝试另一个复用器，VLC 告诉我只允许使用 ts或 RTP 中的 ps）

如果我尝试使用 Google 视频播放器，我会在 locat 中收到这些消息：

```
04-08 15:32:45.792: D/MediaPlayer(13688): Couldn't open file on client side, trying server side
04-08 15:32:45.802: W/MediaPlayer(13688): info/warning (701, 0)
04-08 15:32:45.812: I/MediaPlayer(13688): Info (701,0)
04-08 15:32:45.812: D/MediaPlayer(13688): getMetadata
04-08 15:32:45.812: E/MediaPlayerService(7680): getMetadata failed -38
04-08 15:32:45.852: I/MyHandler(7680): connection request completed with result 0 (Success)
04-08 15:32:45.882: I/ARTSPConnection(7680): status: RTSP/1.0 200 OK
04-08 15:32:45.882: I/MyHandler(7680): DESCRIBE completed with result 0 (Success)
04-08 15:32:45.882: I/ASessionDescription(7680): v=0
04-08 15:32:45.882: I/ASessionDescription(7680): o=- 15352003113363922923 15352003113363922923 IN IP4 to63-169.ifremer.fr
04-08 15:32:45.882: I/ASessionDescription(7680): s=Unnamed
04-08 15:32:45.882: I/ASessionDescription(7680): i=N/A
04-08 15:32:45.882: I/ASessionDescription(7680): c=IN IP4 134.246.63.169
04-08 15:32:45.882: I/ASessionDescription(7680): t=0 0
04-08 15:32:45.882: I/ASessionDescription(7680): a=tool:vlc 2.0.5
04-08 15:32:45.882: I/ASessionDescription(7680): a=recvonly
04-08 15:32:45.882: I/ASessionDescription(7680): a=type:broadcast
04-08 15:32:45.882: I/ASessionDescription(7680): a=charset:UTF-8
04-08 15:32:45.882: I/ASessionDescription(7680): a=control:rtsp://134.246.63.169:5554/stream.sdp
04-08 15:32:45.882: I/ASessionDescription(7680): m=audio 5556 RTP/AVP 96
04-08 15:32:45.882: I/ASessionDescription(7680): b=AS:24
04-08 15:32:45.882: I/ASessionDescription(7680): b=RR:0
04-08 15:32:45.882: I/ASessionDescription(7680): a=rtpmap:96 mpeg4-generic/48000
04-08 15:32:45.882: I/ASessionDescription(7680): a=fmtp:96 streamtype=5; profile-level-id=15; mode=AAC-hbr; config=118856e500; SizeLength=13; IndexLength=3; IndexDeltaLength=3; Profile=1;
04-08 15:32:45.882: I/ASessionDescription(7680): a=control:rtsp://134.246.63.169:5554/stream.sdp/trackID=0
04-08 15:32:45.882: I/ASessionDescription(7680): m=video 5554 RTP/AVP 96
04-08 15:32:45.882: I/ASessionDescription(7680): b=AS:56
04-08 15:32:45.882: I/ASessionDescription(7680): b=RR:0
04-08 15:32:45.882: I/ASessionDescription(7680): a=rtpmap:96 H264/90000
04-08 15:32:45.882: I/ASessionDescription(7680): a=fmtp:96 packetization-mode=1;profile-level-id=64000b;sprop-parameter-sets=Z2QAC6zZQsTv/AC0ALBAAAADAEAAAAyjxQplgA==,aOvssiw=;
04-08 15:32:45.882: I/ASessionDescription(7680): a=control:rtsp://134.246.63.169:5554/stream.sdp/trackID=1
04-08 15:32:45.982: I/ARTSPConnection(7680): status: RTSP/1.0 200 OK
04-08 15:32:45.982: I/MyHandler(7680): SETUP(1) completed with result 0 (Success)
04-08 15:32:45.982: I/MyHandler(7680): server specified timeout of 60 secs.
04-08 15:32:45.992: W/MyHandler(7680): Missing 'source' field in Transport response. Using RTSP endpoint address.
04-08 15:32:45.992: I/APacketSource(7680): dimensions 176x144
04-08 15:32:46.012: I/ARTSPConnection(7680): status: RTSP/1.0 200 OK
04-08 15:32:46.022: I/MyHandler(7680): SETUP(2) completed with result 0 (Success)
04-08 15:32:46.022: I/MyHandler(7680): server specified timeout of 60 secs.
04-08 15:32:46.022: W/MyHandler(7680): Missing 'source' field in Transport response. Using RTSP endpoint address.
04-08 15:32:46.022: W/MyHandler(7680): Server picked an odd RTP port, it should've picked an even one, we'll let it pass for now, but this may break in the future.
04-08 15:32:46.082: I/ARTSPConnection(7680): status: RTSP/1.0 200 OK
04-08 15:32:46.082: D/dalvikvm(13688): GC_FOR_ALLOC freed 303K, 7% free 9289K/9927K, paused 35ms, total 36ms
04-08 15:32:46.092: I/MyHandler(7680): PLAY completed with result 0 (Success)
04-08 15:32:46.092: I/MyHandler(7680): This is a live stream
04-08 15:32:48.262: D/AudioHardware(7680): AudioHardware pcm playback is going to standby.
04-08 15:32:48.262: D/AudioHardware(7680): closePcmOut_l() mPcmOpenCnt: 1
04-08 15:32:56.092: W/MyHandler(7680): Never received any data, switching transports.
04-08 15:32:56.112: I/ARTSPConnection(7680): status: RTSP/1.0 200 OK
04-08 15:32:56.122: I/MyHandler(7680): TEARDOWN completed with result 0 (Success)
04-08 15:32:56.122: I/MyHandler(7680): connection request completed with result 0 (Success)
04-08 15:32:56.152: I/ARTSPConnection(7680): status: RTSP/1.0 200 OK
04-08 15:32:56.152: I/MyHandler(7680): DESCRIBE completed with result 0 (Success)
04-08 15:32:56.152: I/ASessionDescription(7680): v=0
04-08 15:32:56.152: I/ASessionDescription(7680): o=- 15352003157473632156 15352003157473632156 IN IP4 to63-169.ifremer.fr
04-08 15:32:56.152: I/ASessionDescription(7680): s=Unnamed
04-08 15:32:56.152: I/ASessionDescription(7680): i=N/A
04-08 15:32:56.152: I/ASessionDescription(7680): c=IN IP4 134.246.63.169
04-08 15:32:56.152: I/ASessionDescription(7680): t=0 0
04-08 15:32:56.152: I/ASessionDescription(7680): a=tool:vlc 2.0.5
04-08 15:32:56.152: I/ASessionDescription(7680): a=recvonly
04-08 15:32:56.152: I/ASessionDescription(7680): a=type:broadcast
04-08 15:32:56.152: I/ASessionDescription(7680): a=charset:UTF-8
04-08 15:32:56.152: I/ASessionDescription(7680): a=control:rtsp://134.246.63.169:5554/stream.sdp
04-08 15:32:56.152: I/ASessionDescription(7680): m=audio 5556 RTP/AVP 96
04-08 15:32:56.152: I/ASessionDescription(7680): b=AS:24
04-08 15:32:56.152: I/ASessionDescription(7680): b=RR:0
04-08 15:32:56.152: I/ASessionDescription(7680): a=rtpmap:96 mpeg4-generic/48000
04-08 15:32:56.152: I/ASessionDescription(7680): a=fmtp:96 streamtype=5; profile-level-id=15; mode=AAC-hbr; config=118856e500; SizeLength=13; IndexLength=3; IndexDeltaLength=3; Profile=1;
04-08 15:32:56.152: I/ASessionDescription(7680): a=control:rtsp://134.246.63.169:5554/stream.sdp/trackID=0
04-08 15:32:56.152: I/ASessionDescription(7680): m=video 5554 RTP/AVP 96
04-08 15:32:56.152: I/ASessionDescription(7680): b=AS:56
04-08 15:32:56.152: I/ASessionDescription(7680): b=RR:0
04-08 15:32:56.152: I/ASessionDescription(7680): a=rtpmap:96 H264/90000
04-08 15:32:56.152: I/ASessionDescription(7680): a=fmtp:96 packetization-mode=1;profile-level-id=64000b;sprop-parameter-sets=Z2QAC6zZQsTv/AC0ALBAAAADAEAAAAyjxQplgA==,aOvssiw=;
04-08 15:32:56.152: I/ASessionDescription(7680): a=control:rtsp://134.246.63.169:5554/stream.sdp/trackID=1
04-08 15:32:56.222: I/ARTSPConnection(7680): status: RTSP/1.0 461 Unsupported transport
04-08 15:32:56.222: I/MyHandler(7680): SETUP(1) completed with result 0 (Success)
04-08 15:32:56.222: I/APacketSource(7680): dimensions 176x144
04-08 15:32:56.242: I/ARTSPConnection(7680): status: RTSP/1.0 461 Unsupported transport
04-08 15:32:56.252: I/MyHandler(7680): SETUP(2) completed with result 0 (Success)
04-08 15:32:56.272: E/MediaPlayer(13688): error (1, -2147483648)
04-08 15:32:56.272: E/MediaPlayer(13688): Error (1,-2147483648)
04-08 15:32:56.272: D/VideoView(13688): Error: 1,-2147483648 
```

我想问题出在“状态：RTSP/1.0 461 不支持的传输”上，但我看不出我可以改变什么：我已经打开了我使用的端口，并且确实在另一台计算机上接收到视频。

在安卓手机上，我可以播放我在网上找到的一些 rtsp 流，例如这个：rtsp://184.72.239.149/vod/mp4:BigBuckBunny_115k.mov。所以应该是可以的。

如果有人可以帮助...！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T09:25:39.533

最后是网络问题，我通过 MacBook WiFi 共享连接我的设备，似乎它阻止了 RTSP 流。现在我正在使用路由器，它在 RTSP 中工作（我仍然无法在 Android VideoView 中接收 HTTP 流）。尽管如此，我仍然有一个超时问题：RTSP 流在 60 秒后停止，因为 VideoView 不发送保持活动消息。我会尝试自己做...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T08:48:00.707

我已经用 openRTSP 命令测试了我的 rtsp 服务器。

这是UDP端口被阻止。

如果在没有 -t 的情况下访问 rtsp：

```
-> $ openRTSP <rtsp_url> 
```

我得到日志告诉我：

```
// omit lots of lines..
Created receiver for "video/H264" subsession (client ports 63346-63347)
Sending request: SETUP rtsp://61.218.52.250:554/live/ch00_0/trackID=0 RTSP/1.0
CSeq: 4
User-Agent: openRTSP (LIVE555 Streaming Media v2013.12.16)
Transport: RTP/AVP;unicast;client_port=63346-63347

Received 47 new bytes of response data.
Received a complete SETUP response:
RTSP/1.0 461 Unsupported Transport
CSeq: 4

Failed to setup "video/H264" subsession: 461 Unsupported Transport 
```

因此更改为 TCP：

```
-> $ openRTSP -t <rtsp_url> 
```

它开始成功接收数据。

```
// omit lots of lines..
Opened URL "rtsp://61.218.52.250:554/live/ch00_0", returning a SDP description:
v=0
o=- 1 1 IN IP4 127.0.0.1
s=Ubiquiti Live
i=UBNT Streaming Media
c=IN IP4 0.0.0.0
t=0 0
m=video 0 RTP/AVP 99
b=AS:50000
a=framerate:25
a=x-dimensions:1280,720
a=x-vendor-id:ubnt,a521
a=x-rtp-ts:4617405454576779984
a=rtpmap:99 H264/90000
a=fmtp:99 profile-level-id=42A01E;packetization-mode=1;sprop-parameter-sets=Z0IAKOkAoAt1xIAG3dAAzf5gDYgQlA==,aM4xUg==
a=control:trackID=0

Sending request: SETUP rtsp://61.218.52.250:554/live/ch00_0/trackID=0 RTSP/1.0
CSeq: 4
User-Agent: openRTSP (LIVE555 Streaming Media v2013.12.16)
Transport: RTP/AVP/TCP;unicast;interleaved=0-1

Received 107 new bytes of response data.
Received a complete SETUP response:
RTSP/1.0 200 OK
CSeq: 4
Transport: RTP/AVP/TCP;unicast;interleaved=0-1
Session: E090B5503236A1BFB7CE

Setup "video/H264" subsession (client ports 54884-54885)
Sending request: PLAY rtsp://61.218.52.250:554/live/ch00_0/ RTSP/1.0
CSeq: 5
User-Agent: openRTSP (LIVE555 Streaming Media v2013.12.16)
Session: E090B5503236A1BFB7CE
Range: npt=0.000-

Received 159 new bytes of response data.
Received a complete PLAY response:
RTSP/1.0 200 OK
CSeq: 5
Session: E090B5503236A1BFB7CE
Range: npt=now-
RTP-Info: url=rtsp://61.218.52.250:554/live/ch00_0//trackID=0;seq=41402;rtptime=0

Started playing session
Data is being streamed (signal with "kill -HUP 96432" or "kill -USR1 96432" to terminate)...
Received 47 new bytes of response data.
Received 1424 new bytes of response data.
Received 1424 new bytes of response data.
Received 1424 new bytes of response data.
Received 1424 new bytes of response data.
Received 1448 new bytes of response data.
Received 1448 new bytes of response data. 
```

[参考 openRTSP 基础知识。](http://www.live555.com/openRTSP/#other-options)

现在我必须弄清楚如何在 Android 中自动切换到 TCP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T04:02:26.503

请尝试 VLC：

vlc some_file.mp4 -I http --sout "#transcode{soverlay,ab=128,samplerate=44100,channels=2,acodec=mp4a,vcodec=h264,width=480,height=270,vfilter="canvas{width =480,height=270,aspect=16:9}",fps=25,vb=800,venc=x264{level=12,no-cabac,subme=20,threads=4,bframes=0,min-keyint =1,keyint=50}}:gather:rtp{mp4a-latm,sdp=rtsp://0.0.0.0:5554/stream.sdp}"

和安卓代码：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final VideoView vidView = (VideoView)findViewById(R.id.myVideo);

        MediaController vidControl = new MediaController(this);
        vidControl.setAnchorView(vidView);
        vidView.setMediaController(vidControl);

        vidView.setVideoPath("rtsp://137.110.92.231:5554/stream.sdp");

        vidView.start();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T05:01:29.200

使用**MediaPlayer**它支持 HTTP 和 RTSP 网络协议。 [http://developer.android.com/guide/topics/media/mediaplayer.html#mediaplayer](http://developer.android.com/guide/topics/media/mediaplayer.html#mediaplayer) [http://developer.android.com/guide/appendix/media-formats.html#recommendations](http://developer.android.com/guide/appendix/media-formats.html#recommendations)

# javascript - jQuery AJAX 触发太快

> ID：15837394
> 
> 赞同：1
> 
> 时间：2013-04-05T15:10:15.570
> 
> 标签：javascript, jquery, ajax, asynchronous

我有一个包含在函数中的相对简单的 jQuery AJAX 调用，我正在测试我的错误功能。我面临的问题是 AJAX 调用发生得太快了！它导致我的“H6”和“.loading”元素开始重复。我需要的行为是删除元素，然后调用 ajax。

```
function getAvailability(form) {
    var str = $(form).serialize(),
    warning = $('#content h6');

    if ( warning.length > 0 ) {
        $(warning).remove();
        $('<div class="loading">Loading&hellip;</div>').insertAfter(form);
    }
    else
    {
        $('<div class="loading">Loading&hellip;</div>').insertAfter(form);
    }

    $.ajax({
        type: "POST",
        url: "someFile",
        data: str,

        success: function(calendar) {
            $('.loading').fadeOut(function() {
                $(this).remove();
                $(calendar).insertAfter(form).hide().fadeIn();
            });
        },
        error: function() {
            $('.loading').fadeOut(function() {
                $('<h6>Unfortunately there has been an error and we can not show you the availability at this time.</h6>').insertAfter(form);
            });
        }
    });

    return false;
} 
```

我很想像这样对其进行排序->从页面中删除“警告”，添加.loading。然后触发AJAX。然后淡出.loading，根据成功添加和淡入警告/日历。

* * *

我已经修改了我的原始代码，并且我已经得到了按预期运行的功能，主要是因为我在 ajax 过程中禁用了提交按钮。

```
function getAvailability(form) {
    var str = $(form).serialize(),
    btn = $('#property_availability');

    // Disable submit btn, remove original 'warning', add loading spinner
    btn.attr("disabled", "true");
    $('.warning').remove();
    $('<div class="loading">Loading&hellip;</div>').insertAfter(form);

    $.ajax({
        type: "POST",
        url: "public/ajax/returnAvailability1.php",
        data: str,

        success: function(calendar) {
            $('.loading').fadeOut(function() {
                $(this).remove();
                $(calendar).insertAfter(form).hide().fadeIn();
            });
        },
        error: function() {
            $('.loading').fadeOut(function() {
                $(this).remove();
                $('<h6 class="warning">Unfortunately there has been an error and we can not show you the availability at this time.</h6>').insertAfter(form);
                btn.removeAttr("disabled");
            });
        }
    });

    return false;
} 
```

我相信由于 fadeOut() 函数产生的时间延迟，原始序列没有按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:21:30.750

`warning`为什么不使用 ajaxStart 和 ajaxStop 来显示/隐藏，而不是添加和删除？

```
warning.ajaxStart(function() {
    $(this).show();
}).ajaxStop(function() {
    $(this).fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:16:50.340

如果您需要对事件进行排序，那么您应该尝试使用作为 jQuery.ajax API 一部分的 deferred 和 promise 方法。这篇文章很好地介绍了它们： http: [//www.bitstorm.org/weblog/2012-1/Deferred_and_promise_in_jQuery.html](http://www.bitstorm.org/weblog/2012-1/Deferred_and_promise_in_jQuery.html)

# python - 从列表中的子列表中提取最长的字符串。Python

> ID：15837395
> 
> 赞同：1
> 
> 时间：2013-04-05T15:10:16.343
> 
> 标签：python, string, list, search, greatest-n-per-group

所以我有一个子列表列表，在子列表中，有字符串。

字符串通常有不同的长度，但也可以是相同的长度。

以下是列表示例

```
sequences = [['aaa'],['aaaa','bb'],[],['aaaaaa','bb','cccccc']] 
```

我想找到一种方法从每个列表中提取最长的字符串，如果有两个同样长，那么取这两个字符串

```
example_output = [['aaa'],['aaaa'],[],['aaaaaa','cccccc']] 
```

通常我会在for循环中设置一个阈值，如果它长于某个长度，则附加到一个列表中，然后在每次迭代后将其附加到一个列表中。. . 但在这种情况下我没有阈值

**如果可能的话，我想尽量避免使用 lambda 和函数，因为这将在另一个函数中**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:16:22.397

您可以使用到目前为止看到的最长字符串的长度作为阈值（`maxlen`在下面的代码中）：

```
def get_longest(seq):
    maxlen = -1
    ret = []
    for el in seq:
        if len(el) > maxlen:
            ret = [el]
            maxlen = len(el)
        elif len(el) == maxlen:
            ret.append(el)
    return ret

sequences = [['aaa'],['aaaa','bb'],[],['aaaaaa','bb','cccccc']]
example_output = list(map(get_longest, sequences))
print(example_output) 
```

这会产生：

```
[['aaa'], ['aaaa'], [], ['aaaaaa', 'cccccc']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:16:37.827

这个答案不是最有效的，但很容易理解。

您可以首先提取最大长度（这里我使用生成器表达式），然后提取具有这些长度的字符串。

```
lengths = ( max(len(s) for s in sublist) if sublist else 0 for sublist in sequences )
[ [ s for s in sublist if len(s) == l ] for l, sublist in zip(lengths, sequences) ]
-> [['aaa'], ['aaaa'], [], ['aaaaaa', 'cccccc']] 
```

`itertools.izip``zip`在这种情况下更可取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:28:54.620

我将使用以下（神秘的:)）一个班轮来拍摄：

```
example_output = [list(filter(lambda x: len(x)==len(max(sub_lst, key=len)), sub_lst)) for sub_lst in sequences] 
```

# django - NoReverseMatch at /detail/ Reverse for '' with arguments '()' and keyword arguments {} not found

> ID：15837400
> 
> 赞同：0
> 
> 时间：2013-04-05T15:10:29.807
> 
> 标签：django, parameter-passing, reverse

我想在 Django 中将参数从视图传递到视图，当我首先传递三个参数时，它可以工作，但是当它超过 3 个参数时不再工作。在传递参数时，我有这个错误：

```
NoReverseMatch at /detail/
Reverse for 'display_filter' with arguments '()' and keyword arguments '{'country': 'USA', 'street': 'Wall Street', 'continent': 'America', 'city': 'new York'}' not found. 
```

网址.py

```
url(r'^detail/$', 'examples.views.detail'),
url(r'^display_filter/(?P<continent>[-\w]+)/(?P<country>[-\w]+)/(?P<city>[-\w]+)/(?P<street>[-\w]+)/$', 'examples.views.display_filter', name='display_filter'), 
```

视图.py

```
def detail(request):
    continents = Select_continent()
    if request.method == 'POST':  
        continent = request.POST.get('combox1')
        country = request.POST.get('combox2')
        city = request.POST.get('combox3')
        street = request.POST.get('combox4')
        countries =Select_country(continent)
        cities= Select_city(continent,country)
        streets = Select_street(continent,country,city)
        for row in continents :
            if row[0]==int(continent) :
                param1 =row[1]
        for row in countries:
            if row[0]==int(country):
                param2=row[1]    
        for row in cities:
            if row[0]==int(city):
                param3=row[1]
        for row in streets:
            if row[0]==int(street):
                param4=row[1]     
        url = reverse('display_filter', args=(), kwargs={'continent':param1,'country':param2,'city':param3,'street':param4})
        return redirect(url)

    return render(request, 'filter.html', {'items': continents,})

def display_filter(request,continent, country,city, street):

    data = Select_WHERE(continent, country, city,street)
    #symbol = ConvertSymbol(currency)   
    return render_to_response('filter.html', {'data': data, }, RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:18:48.560

看起来您的 url 正则表达式有问题。

你有什么

```
(?P<city>[-\w]) 
```

将仅匹配 1 个数字、单词字符、空格、下划线或连字符。你应该拥有的是

```
(?P<city>[-\w]+) 
```

这将匹配 1 个或更多，就像您对其余部分所做的那样。

* * *

另一件事是你可以尝试改变

```
url = reverse('display_filter', args=(), kwargs={'continent':param1,'country':param2,'city':param3,'street':param4})
return redirect(url) 
```

至

```
return redirect('display_filter', continent=param1, country=param2, city=param3, street=param4) 
```

`redirect`意味着是一个快捷方式，所以你不必打电话`reverse`，因为它会为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:08:03.837

我认为你需要做两件事：

1.  向您的 urls.py 添加一个与您的 3 参数案例匹配的 URL：

    `url(r'^display_filter/(?P[-\w]+)/(?P[-\w]+)/(?P[-\w]+)/$', 'examples.views.display_filter', name='display_filter'),`

2.  您必须在视图方法中为第四个参数设置默认值：

    `def display_filter(request, continent, country, city, street=None):`

然后，您可以只使用三个参数调用 URL。

# ruby-on-rails - 使用 validates_with 获取未初始化常量事件的 Rails 业务规则

> ID：15837406
> 
> 赞同：1
> 
> 时间：2013-04-05T15:11:02.307
> 
> 标签：ruby-on-rails

我正在尝试使用 validates_with 编写我的第一个业务规则。如果工作订单的状态为“WAPPR”（等待批准），我不希望输入事件（人工）。

这是在我的事件模型中：

```
class Event < ActiveRecord::Base
  validates_presence_of :workorder_id
  validates_with ::WOStatusValidator
  ...
end

class WOStatusValidator < ActiveModel::Validator
  def validate(record)
    if record.workorder.wostatus.statuscode == "WAPPR"
      record.errors[:base] << "Can't enter labor if workorder status is WAPPR"
    end
  end
end 
```

但是，我明白了：

```
undefined method `key?' for nil:NilClass 
```

谢谢您的帮助！！

更新

机架会话有这个：

{"session_id"=>"52c6e4be5eeba78e5954a2997d9cac73", "_csrf_token"=>"kf1CYslb/rVmTWjoD4Qn4l1vZCeCwQOgg3VEYLqNTTg=", "warden.user.user.key"=>["用户", [11], "$2ajsjNIo51$EHEjfT/B .oJ2."], "flash"=>#, @close=false, @flashes={:workorder_id=>2, :employee_id=>5, :comment=>true}, @now=nil>}

并且 workorder/2 有 wostatus/235 并且 wostatus 有 statuscode = WAPR

action_name 是“新的”

错误来自 visible_action?(gem) actionpack-3.2.12/lib/action_controller/metal/hide_actions.rb 中的代码

第 36 行

```
35       def visible_action?(action_name)
36         return @visible_actions[action_name] if @visible_actions.key?(action_name)
37         @visible_actions[action_name] = !hidden_actions.include?(action_name)
38       end 
```

更新2

jvnill 建议：

```
record.errors.add :base, "Can't enter labor if workorder status is WAPPR" 
```

*   我做了那个改变，现在我得到了

    “未初始化的常量 WOStatusValidator”

它来自此代码的第 11 行：

```
8 class RoutingError < ActionControllerError #:nodoc: 
9 attr_reader :failures 
10 def initialize(message, failures=[]) 
11 super(message) 
12 @failures = failures 13 end 14 end 
```

UDPATE3

我是否使用正确的编码类型来执行此业务规则？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:11:41.757

代替：

```
validates_with WOStatusValidator 
```

和：

```
validates_with ::WOStatusValidator 
```

它明确告诉 Rails 寻找顶级常量。

# sql-server - SQL Server 报告子报告标题

> ID：15837407
> 
> 赞同：1
> 
> 时间：2013-04-05T15:11:16.400
> 
> 标签：sql-server, ssrs-2008, reportbuilder3.0

问题：需要标题信息在表格列表之外的子报表上重复。

在 SQL Server 2008 Report Builder 3.0 中创建子报表。我有一个多页表格子报告。子报告表上的列标题重复没有问题。我需要一个过度标题来与每页上的表格列标题一起使用。主页有帐户信息。第 2 页以上包含帐户的详细信息（子报告）。我需要客户帐户信息（帐号、姓名、地址等）出现在子报表列表的每一页的顶部。

1.  尝试将表格放入列表中，但标题仅出现在第一页上。
2.  在表格中添加了一个标题并将帐户信息放在那里。这有效，但标题由列宽控制。我找不到在不影响所有其他行的情况下修改列大小的方法。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:09:56.747

我想你快到了。你只需要尝试一些事情。

1.  您可以更改列宽并使用每个单元格上的**can grow**属性固定它们。

2.  如果这有帮助，您可以选择合并几个单元格，然后根据需要将您的信息放入其中。

3.  或者在您的子报告中，您可以向此报告添加标题，并在每一页上重复此标题。如果您在主页中有客户信息但在子报表中没有，则创建一些虚拟隐藏参数以将此信息传递给子报表。

# browser - 设置日期时浏览器显示错误的夏令时

> ID：15837409
> 
> 赞同：0
> 
> 时间：2013-04-05T15:11:21.973
> 
> 标签：browser, timezone, dst

我需要浏览器在用户的本地时区和 dst 中显示从服务器发送的时间（以毫秒为单位）。

我注意到当我要求浏览器显示当前时间（现在）时，时区和 DST 是正确的。但是，当我设置日期并要求浏览器显示设置时间时，时区是正确的，但 DST 是错误的。

这是实际代码：

```
x = new Date(1357012800*1000);
console.log("Javascript mydate:"+x);
now = new Date();
console.log("Javsscript now:"+now); 
```

以及 Chrome 的输出：

```
Javascript mydate:Mon Dec 31 2012 23:00:00 GMT-0500 (Eastern Standard Time) 
Javsscript now:Fri Apr 05 2013 11:04:41 GMT-0400 (Eastern Daylight Time) 
```

有人可以告诉我如何让浏览器显示尊重用户 DST 的日期吗？为什么它在 EST 中打印 mydate 而现在是 EDT 中的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:14:27.223

您提供的日期（东部时间 2012 年 12 月 31 日）不是夏令时。

# asp.net - 对 div 的面板控制正在影响 div 内的超链接，因为不可链接

> ID：15837410
> 
> 赞同：-3
> 
> 时间：2013-04-05T15:11:29.093
> 
> 标签：asp.net, html, css, asp.net-mvc, css-position

对 div 的面板控制正在影响 div 内的超链接，因为不可链接。我的面板只是出现在我的 div 超链接内容上方。所以我的超链接的一部分，其中面板显示不可链接..但超链接的其余部分是可链接的

我无法在此处添加我的示例代码..

请在这里查看我的详细帖子.. [http://forums.asp.net/t/1895787.aspx/1?Panel+UpdateProgressBar+controls+over+div+is+impacting+hyperlink+within+the+div+as+没有+可链接+](http://forums.asp.net/t/1895787.aspx/1?Panel+UpdateProgressBar+controls+over+div+is+impacting+hyperlink+within+the+div+as+no+linkable+)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:29:30.980

`</progressTemplate>`您在结束标签中拼错了“progress” 。

**更新**

其实我希望这会解决它。通常，如果您遇到 z-index 问题*并且*有一个 borked 标签，这就是原因。

如果它仍然不起作用，那么您只需要深入研究页面的 CSS 并找出原因。您提供的 HTML 不足以说明问题可能是什么。您希望 1) 查看*呈现的*HTML 源代码，而不是 ASP.NET 视图，以及 2) 查看应用于*该*HTML 的 CSS。

通常，如果您需要将一个元素移到另一个阻塞焦点的元素上方，您只需递增`z-index`直到实现该目标。请记住，元素必须有一个`position: relative`或`position: absolute`之前`z-index`甚至会适用，有时重叠元素的`z-index`值高得离谱（1000、9999 等）。所以你可能不得不让被阻塞的元素变得更加荒谬。不过，这一切都只是试错法，所以这部分你主要靠自己。

# c - insmod：插入内核模块时出错

> ID：15837411
> 
> 赞同：2
> 
> 时间：2013-04-05T15:11:31.130
> 
> 标签：c, linux-kernel, kernel-module, kernel

我正在尝试实现一个内核模块，它可以访问用户进程的 task_struct，其进程 ID 对我来说是已知的。我正在使用`find_get_pid`并`pid_task`获取流程的task_struct：

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/sched.h>
#include <linux/pid.h>
#include <linux/pid_namespace.h>

int init_module( void )
{
//Declaring the variables
    int p_id = 6980;    //6980 is the process ID of my user process
    struct pid *pid_struct;
    struct task_struct *task;

// Trying to access the variables of the p_id
    pid_struct = find_get_pid(p_id);
    task = pid_task(pid_struct, PIDTYPE_PID);

//Printing the info from the task_struct
    printk( KERN_INFO "*** [%d]\n",task->pid);
    return 0;
}

void cleanup_module( void )
{
  return;
} 
```

它正在成功编译，我得到 *.ko 文件，但是当我试图将它插入内核时，它给了我一个错误：
`insmod: error inserting 'main.ko': -1 Unknown symbol in module`
Dmesg 给我以下输出：
`main: Unknown symbol find_get_pid (err 0)`
我不知道如何继续，它会如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:01:12.287

仔细检查您要使用的函数被调用。

还要记住，大部分“核心内核”（可能包括`frob_task_by_pid_hard`及其同类）都是 GPL 专用的，所以除非您将模块的许可证声明为 GPL，否则您将无处可去。也请填写模块上的其他样板数据：至少 MODULE_AUTHOR、MODULE_DESCRIPTION、MODULE_LICENSE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-30T06:21:58.373

加载内核模块时可能还有另一个失败的原因，例如它显示错误为“insmod :ERROR: .ko operation not allowed”。您的内核正在使用最新 PC 上的安全启动选项启动，必须​​禁用该选项以避免加载/插入内核模块失败。这可以通过使用以下命令来完成。 **sudo apt install mokutil sudo mokutil --disable-validation** 或者您可以搜索如何为您的特定操作系统禁用安全启动选项。

# java - 使用 JButton 在 JTextArea 中插入笑脸（情绪）

> ID：15837416
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:11:39.063
> 
> 标签：java, chat

任何人都可以建议我单击 jbutton 时如何在 jtextarea 中插入笑脸？

我曾尝试使用 jtable，然后在该表上使用选择侦听器，但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:17:32.890

我建议改用[JTextPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextPane.html)。无需覆盖即可插入图像`paintComponent`。要模拟单行“JTextField”，您可以使用 a`DocumentFilter`并防止插入换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:15:59.577

如果您有多个笑脸，请创建一个`JTable`在单元格中显示每个笑脸的位置，并为每个单元格添加一个`SelectionListener`或一个`MouseListener`以检测选择了哪个笑脸并将其添加到`JTextField`.

这种方法使您的笑脸比多个按钮更容易查看

# c# - .NET 连接器仅返回第一条记录

> ID：15837421
> 
> 赞同：4
> 
> 时间：2013-04-05T15:11:51.867
> 
> 标签：c#, mysql, mysql-connector

我有一个奇怪的“错误/错误”，在 .NET 连接器上只返回一条记录，而有 5 条记录。MySQL 命令行也返回 1。这是我真正坚持的代码，我尝试创建一个客户端-服务器并让客户端从服务器计算机上的数据库登录：

![证明](https://i.stack.imgur.com/sYAzi.png)

![奇怪的错误](https://i.stack.imgur.com/FXzl6.png)

代码：

```
string strConnect = "server=localhost;user=root;password=xxxx;database=MoopleDEV";
string query = "SELECT name FROM accounts;";

using (MySqlConnection connection = new MySqlConnection(strConnect))
using (MySqlCommand command = new MySqlCommand(query, connection))
using (MySqlDataReader reader = command.ExecuteReader())
{
    connection.Open();

    while (reader.Read())
    {
        Console.WriteLine(reader.GetString("name"));
    }

    connection.Close();
} 
```

**注意：**它还在 MySQL 命令行客户端仅返回“iVision”。有谁知道该怎么做？ *Ps：*它不会崩溃或返回任何异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:24:13.757

创建阅读器后，您将重新打开连接。在创建命令对象之前移动连接打开语句。

试试这个：

```
using (MySqlConnection connection = new MySqlConnection(strConnect))
{
    connection.Open();
    using (MySqlCommand command = new MySqlCommand(query, connection))
    using (MySqlDataReader reader = command.ExecuteReader())
    {

        while (reader.Read())
        {
            Console.WriteLine(reader.GetString("name"));
        }
    }
    connection.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:27:57.317

IVision 我希望这会给你一个想法

为什么要使用 reader.GetString 我已经看到太多问题了，为什么在运行查询时也不使用该`(string)reader["name"]`方法手动运行查询时返回多少行还确保您真正查看的是正确的 DB 数据库=MoopleDEV 可能不正确或指向物理机上的不同 IP 地址或位置。我还将我的本地数据库实例命名为实际`Name`的，这样会减少混淆

# tsql - 无法让视图在 SQL Server 上工作

> ID：15837425
> 
> 赞同：0
> 
> 时间：2013-04-05T15:11:57.627
> 
> 标签：tsql, sql-server-2008-r2

我正在尝试创建一个包含多个表中的列的视图。

这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/uCjwR.png)

这是我的查询：

```
SELECT     
   Billing.WebPortalBilling.WebPortalBillingId, 
   Billing.WebPortalBilling.CorporationId, 
   Billing.WebPortalBilling.TokenId, 
   Billing.WebPortalBilling.GatewaySupportFee, 
   Billing.WebPortalBilling.GatewayPerTransactionFee, 
   Billing.WebPortalBilling.PortalPerCustomerFee, 
   Billing.WebPortalBilling.PortalSupportFee, 
   Customer.Account.AccountNumber, 
   Billing.WebPortalBilling.IsActive, 
   Customer.Customer.Name, 
   Customer.Customer.TaxCode, 
   Company.CorporationStructure.Branch
FROM         
   Company.CorporationStructure 
RIGHT OUTER JOIN
   Customer.Account ON Company.CorporationStructure.CorporationStructureId = Customer.Account.CorporationStructureId 
RIGHT OUTER JOIN
   Customer.Customer ON Company.CorporationStructure.Branch = Customer.Customer.Branch 
RIGHT OUTER JOIN
   Billing.WebPortalBilling ON Customer.Account.CorporationId = Billing.WebPortalBilling.CorporationId
WHERE     
   (Billing.WebPortalBilling.IsActive = 1) 
```

它只返回 1 条记录，这是不正确的。我正在尝试将客户的姓名与其他两个表中的帐号和名称一起绑定到 WebPortalBilling 表。

我是 sql 新手，所以请善待。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:35:18.770

正如所评论的那样，在哪里杀死了外部
尝试

```
SELECT     
   Billing.WebPortalBilling.WebPortalBillingId, 
   Billing.WebPortalBilling.CorporationId, 
   Billing.WebPortalBilling.TokenId, 
   Billing.WebPortalBilling.GatewaySupportFee, 
   Billing.WebPortalBilling.GatewayPerTransactionFee, 
   Billing.WebPortalBilling.PortalPerCustomerFee, 
   Billing.WebPortalBilling.PortalSupportFee, 
   Customer.Account.AccountNumber, 
   Billing.WebPortalBilling.IsActive, 
   Customer.Customer.Name, 
   Customer.Customer.TaxCode, 
   Company.CorporationStructure.Branch
FROM         
   Company.CorporationStructure 
RIGHT OUTER JOIN
   Customer.Account ON Company.CorporationStructure.CorporationStructureId = Customer.Account.CorporationStructureId 
RIGHT OUTER JOIN
   Customer.Customer ON Company.CorporationStructure.Branch = Customer.Customer.Branch 
RIGHT OUTER JOIN  Billing.WebPortalBilling 
    ON Customer.Account.CorporationId = Billing.WebPortalBilling.CorporationId
   AND Billing.WebPortalBilling.IsActive = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:19:32.217

试试这个，我认为左连接更清晰。

```
SELECT    
  B.WebPortalBillingId, 
  B.CorporationId,   
  B.TokenId, 
  B.GatewaySupportFee, 
  B.GatewayPerTransactionFee, 
  B.PortalPerCustomerFee, 
  B.PortalSupportFee, 
  C.AccountNumber, 
  B.IsActive, 
  C.Name,
  C.TaxCode, 
  CS.Branch
FROM  Customer.Customer C
  LEFT JOIN  Company.CorporationStructure CS ON CS.Branch = C.Branch 
  LEFT JOIN  Customer.Account A ON CS.CorporationStructureId = A.CorporationStructureId
  LEFT JOIN  Billing.WebPortalBilling B ON A.CorporationId = B.CorporationId
WHERE B.IsActive = 1 
```

# javascript - 单选按钮：检查道具更改之前的事件？

> ID：15837431
> 
> 赞同：1
> 
> 时间：2013-04-05T15:12:05.960
> 
> 标签：javascript, html, javascript-events

我在表单中有一组单选按钮。它的检查状态决定了表单后面的大量其他输入的状态。如果用户在向下移动表单并更改其值后返回它，我需要清除大部分表单，并且用户将需要重新输入许多值。我想警告他们这将会发生。在检查的道具更改之前是否有触发事件？或者我应该在点击时抛出确认，如果他们取消，将值设置回来？需要明确的是，我知道 .click() 会在选中的属性更改*后触发。*是否有在用户单击之后但在选中的属性更改之前触发的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:27:01.010

以下似乎有效：

```
<input type="radio" name="test" onclick="if(!confirm('Are you sure?'))event.preventDefault();" /> 
```

或使用 JQuery：

```
$(document).ready(function(){
    $("input[type='radio'][name='test']").click(function(e){
        if(!confirm('Are you sure?')) e.preventDefault();
    });
}); 
```

JQuery 选择器可能会缩减为`$("[name='test']")`. 只需将“测试”更改为您的单选按钮组的名称。此外，如果您想确保此事件在其他任何事情之前触发，您可能需要考虑该`mousedown`事件。

# objective-c - NSFetchedResultsController，核心数据和线程

> ID：15837434
> 
> 赞同：1
> 
> 时间：2013-04-05T15:12:14.337
> 
> 标签：objective-c, multithreading, core-data, nsfetchedresultscontroller

你好同胞溢出

我很难弄清楚如何在后台线程中获取 NSManagedObjects，然后通过 NSFetchedResultsController 显示结果。

到目前为止，这是我的代码：

```
 _theManagedObjectContext = [[DataManager sharedInstance] mainManagedObjectContext]; 

   __block NSMutableArray *objectsIDs;

    [[[DataManager sharedInstance] backgroundManagedObjectContext] performBlock:^{

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        fetchRequest.entity = [NSEntityDescription entityForName:@"Ret" inManagedObjectContext:[[DataManager sharedInstance] backgroundManagedObjectContext]];

        NSArray *results =  [[[DataManager sharedInstance] backgroundManagedObjectContext] executeFetchRequest:fetchRequest error:nil];

        for (Ret *ret in results) {
            NSManagedObjectID *moID = [ret objectID];

            [objectsIDs addObject:moID]; 

            NSLog(@"%@", objectsIDs); 
        }

        [[[DataManager sharedInstance] mainManagedObjectContext ] performBlock:^{

            [self loadDishesWithObjectIDs:objectsIDs]; 

        }];

    }]; 
```

首先，我在后台线程中获取所有对象，然后将 NSMangedObjectIDs 传输到主线程。

在我的“loadDishes”方法中：

```
- (void)loadDishesWithObjectIDs:(NSArray *)objectsIDs {

     /*
    [NSFetchedResultsController deleteCacheWithName:@"dishes"];
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:**???**? managedObjectContext:_theManagedObjectContext sectionNameKeyPath:nil cacheName:@"dishes"];
    _fetchedResultsController.delegate = self;

    NSError *error = nil;

    if (![_fetchedResultsController performFetch:&error]) {
        NSLog(@"Fetch Failed");

    }

    NSArray *theDishes = _fetchedResultsController.fetchedObjects;*/

} 
```

我将如何设法通过从后台线程获取的 ObjectID 显示带有 NSFetchResultscontroller 的对象？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:26:15.250

您需要创建一个看起来像这样的获取请求

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
fetchRequest.entity = [NSEntityDescription entityForName:@"Ret" 
                                  inManagedObjectContext:[[DataManager sharedInstance] mainManagedObjectContext]];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"self IN %@", objectIDs]; 
```

# android - Android 应用程序在调用 SQLiteHelper 时崩溃

> ID：15837444
> 
> 赞同：0
> 
> 时间：2013-04-05T15:12:47.360
> 
> 标签：android, database, eclipse, sqlite

我一直在使用这个教程，但我不得不做一些小改动，我的应用程序在手机上崩溃了。但是，代码中没有错误！ [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

```
public class SQLiteDbHelper extends SQLiteOpenHelper {
    public static final String TABLE_NAME = "table";
    public static final String COLUMN_NAME_SP = "SP";
    public static final String COLUMN_NAME_ST = "ST";

    // If you change the database schema, you must increment the database version.
    public static final int DATABASE_VERSION = 1;
    public static final String DATABASE_NAME = "SPT.db";

    private static final String DATABASE_CREATE =
        "CREATE TABLE " + TABLE_NAME + 
         " (" +
        COLUMN_NAME_SP + " text not null" +
        COLUMN_NAME_ST + " text not null" +
        " )";

    public SQLiteDbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
      Log.w(SQLiteDbHelper.class.getName(),
          "Upgrading database from version " + oldVersion + " to "
              + newVersion + ", which will destroy all old data");
      database.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    }

} 
```

然后，稍后，我有这个按钮单击方法的代码：

```
 public void Save(View view){
            String st = editTextSt.getText().toString();
            String sp = editTextSp.getText().toString();

       //this is what makes my app crash [beginning]
            SQLiteDbHelper database2 = new SQLiteDbHelper(this);
    SQLiteDatabase database = database2.getWritableDatabase();
       //this is what makes my app crash [end]

    ContentValues values = new ContentValues();
    values.put(SQLiteDbHelper.COLUMN_NAME_SP, sp);
    values.put(SQLiteDbHelper.COLUMN_NAME_ST, st);
    long insertId = database.insert(SQLiteDbHelper.TABLE_NAME, null, values);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:15:48.637

您忘记`(,)`在创建表查询中的每个列名后放置逗号，将其更改为：

```
private static final String DATABASE_CREATE =
        "CREATE TABLE " + TABLE_NAME + 
         " (" +
        COLUMN_NAME_SP + " text not null, " +
        COLUMN_NAME_ST + " text not null " +
        ");"; 
```

# javascript - 内容安全策略：无法在 Chrome 扩展程序中加载 Mixpanel

> ID：15837450
> 
> 赞同：6
> 
> 时间：2013-04-05T15:13:07.387
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools, mixpanel

过去一天我一直在为此苦苦挣扎，并且几乎没有在线资源可用于集成 Chrome 扩展程序和 Mixpanel。我希望这个线程是人们在处理将 Mixpanel 集成到 Chrome 扩展时所指的那个线程。

**我的 Mixpanel 集成的目标是能够使用我的内容脚本`content.js`和我的`popup.js`（所以基本上在我的整个扩展中）跟踪事件**

我有一个 popup.html 文件，它在标签`<script src="mixpanel.js"></script>`之前调用。`</head>`

在我的`mixpanel.js`文件中是：

```
(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,
e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);

mixpanel.init("MY_TOKEN"); 
```

当我单击我的扩展程序按钮并检查它时，控制台会输出以下错误：

```
Refused to load the script 'http://cdn.mxpnl.com/libs/mixpanel-2.2.min.js' because it violates the following Content Security Policy directive: "script-src 'self' https://cdn.mxpnl.com". 
```

这是我`manifest.json`文件的权限部分：

```
"permissions": ["https://twitter.com/"],
  "content_security_policy": "script-src 'self' https://cdn.mxpnl.com; object-src 'self'" 
```

该扩展需要在 Twitter 上运行。

我已阅读 Google 编写的[内容安全政策文档](http://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html)，但没有帮助

知道我在这里做错了什么吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T15:43:27.357

这里的问题是 Chrome 不允许扩展[通过普通 HTTP 加载远程资源](http://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html#relaxing-remote-script)；仅允许使用 HTTPS：

> 由于中间人攻击在 HTTP 上是微不足道且无法检测到的，因此这些 [ie, `http:`] 来源将不会被接受。

您的`mixpanel.js`脚本尝试加载`http://cdn.mxpnl.com/libs/mixpanel-2.2.min.js`而不是相应的`https:`链接。要解决此问题，只需更改以下行：

```
a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js' 
```

到：

```
a.src='https://cdn.mxpnl.com/libs/mixpanel-2.2.min.js' 
```

它当前正在加载`http:`版本，因为`window.location.protocol`is `chrome-extension:`，而不是`https:`. 此更改只是强制`https:`始终加载版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-27T16:41:08.027

上面的答案不完整。你必须再做一件事。

## 第 1 步：添加 HTTPS

做其他答案告诉你做的事情，更改混合面板代码，更改 `http://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js` 为 `https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js`

## 第 2 步：修改您的内容安全性`manifest.json`

更新`content_security_policy`您的属性`manifest.json`： `{ ..., "content_security_policy": "script-src 'self' https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js; object-src 'self'", ... }`

这放宽了默认的内容安全策略。

## 第 3 步 [可选]：添加 Google Analytics

如果您还想要 Google Analytics，您可以像这样添加它： `{ ..., "content_security_policy": "script-src 'self' https://ssl.google-analytics.com https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js; object-src 'self'", ... }`

我从 Google 自己的关于**[如何添加 Google Analytics](https://developer.chrome.com/extensions/tut_analytics)**的教程中学习了如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T22:26:57.463

您可以使用此脚本从自定义 url 加载 mixpanel。

```
<script>
  window.MIXPANEL_CUSTOM_LIB_URL = 'lib/mixpanel/mixpanel.js';
</script> 
```

# sass - 使用 Singularty 1.x 创建缩略图网格，第二列缺少边距

> ID：15837452
> 
> 赞同：0
> 
> 时间：2013-04-05T15:13:12.813
> 
> 标签：sass, compass-sass, singularitygs

我正在尝试使用 Singularity 1.x 创建缩略图网格。这是代码：

```
$cols:    3
$grids:   $cols
$gutters: 0.2

.element
  @for $i from 1 through $cols
    &:nth-child(#{$cols}n+#{$i})
      +grid-span(1,$i, $output-style: 'float') 
```

问题是第二个元素（接收 的那个`grid-span(1,2)`）缺少装订线 ( `margin-right`)。

截图：

*   [http://d.pr/i/Xsb7+](http://d.pr/i/Xsb7+)
*   [http://d.pr/i/ZcMg+](http://d.pr/i/ZcMg+)

我尝试更改列数`$cols`，结果是一样的：所有元素都收到正确的边距，除了第二个。

如何使第二个元素像其他元素一样具有正确的边距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:23:03.767

这似乎是 Float 输出方法的疏忽。这将在 1.0.5 中修复

# ruby-on-rails - Rails capistrano 根据登录计算机的用户设置 deploy.rb 变量

> ID：15837459
> 
> 赞同：3
> 
> 时间：2013-04-05T15:13:42.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, macos, capistrano

我正在与多个开发人员一起开发一个项目，目前我们必须根据我们正在部署的计算机更改 deploy.rb 脚本中的变量。

我们如何根据我们所在的计算机设置用户名和路径/到/项目？

我们都在 osx 上运行。

例子

```
if osx logged in user == "jeff"
  set :user, "jeff's username'
else if ...
  set :user, 'blah'
end 
```

我如何在 rails/capistrano/osx 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:18:08.740

os/x shell 设置了一个`$USER`具有登录用户登录名的环境变量。您可以`ENV['USER']`在 cap 文件中引用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:19:25.083

该`whoami`命令应该在大多数 Unix 系统上可用，因此以下命令也应该在 Linux 等上工作：

```
if `whoami` == "jeff"
  set :user, "jeff's username'
elsif ...
  set :user, 'blah'
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:19:39.583

这是环境变量派上用场的地方。

```
set :user, ENV['USERNAME'] 
```

有很多方法可以设置它。您可以直接在 shell 中使用

```
export USERNAME=blah 
```

但是对于一个更清洁的、按项目的解决方案，我喜欢[`dotenv`](https://github.com/bkeepers/dotenv)gem。`:development`在您的 组中启用此功能后`Gemfile`，当 Rails 加载时，它将导出`.env`应用程序根目录中特殊文件的每一行作为环境变量。

```
USERNAME=blah 
```

# jquery - 使用 jQuery 使用 if 语句和 addClass 隐藏 div

> ID：15837460
> 
> 赞同：3
> 
> 时间：2013-04-05T15:13:44.947
> 
> 标签：jquery, if-statement, addclass

我有一个通过插件生成的 div，我想在 disabled=true 时隐藏它。在阅读了关于 SO 的帖子后，我想也许我可以使用 .attr 找到 disabled=true ，然后 addClass 用 CSS display: none 隐藏它。我无法编辑插件或源代码，所以我希望我可以通过我们的 CMS 从前端执行此操作。我是 jQuery 初学者，所以这可能是不可能的？

[我想在此页面底部的轮播中隐藏禁用的箭头](http://cookware.lecreuset.com/cookware/product_Tea-for-One_10151_-1_20002_85568_22556)。插件生成后的 HTML 如下所示：

```
 <div class="jcarousel-prev jcarousel-prev-horizontal jcarousel-prev-disabled jcarousel-prev-disabled-horizontal" style="display: block;" disabled="true"></div> 
```

我已将此代码添加到 CMS，但它不起作用。我在控制台中看不到任何错误；这是正确的方法吗？我的语法有问题吗？

```
 if ($('div.jcarousel-prev.jcarousel-prev-horizontal.jcarousel-prev-disabled.jcarousel-prev-disabled-horizontal').attr('disabled', true)){
            $(this).addClass("arrow");
        } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:25:04.797

选择`:disabled`器不适用于除表单字段之外的任何元素。在表单以外的任何东西上使用它可能有点不标准。使用“true”的值甚至更不标准，它也应该是“禁用的”（请参阅[​​禁用属性的正确值](https://stackoverflow.com/questions/6961526/correct-value-for-disabled-attribute)）。因此`:disabled`，您编写的代码需要使用选择器，而不是使用`[disabled="true"]`。

您的选择器可能不需要使用整个类列表——列表中的最后一个类可能就是您需要定位的全部。

但是，我会简单地将 CSS 用于您想要做的事情。不要`arrow`在样式表中包含该类，而是将其替换为`.jcarousel-prev-disabled-horizontal`.

如果您仍然想使用 JavaScript 走“禁用”路线，请使用以下内容，这也将取代对 if 语句的需求：

```
$('.jcarousel-prev-disabled-horizontal[disabled="true"]').addClass('arrow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:15:45.880

您的`if()`语句实际上是设置`div`元素的属性，而不是检查其状态。您应该按如下方式更新您的代码：

```
if ($('div.jcarousel-prev.jcarousel-prev-horizontal.jcarousel-prev-disabled.jcarousel-prev-disabled-horizontal').attr('disabled'))
{
            $(this).addClass("arrow");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:16:18.210

您需要比较不分配值：

```
if ($('div.jcarousel-prev.jcarousel-prev-horizontal.jcarousel-prev-disabled.jcarousel-prev-disabled-horizontal').attr('disabled')) {
    $(this).addClass("arrow");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:16:25.303

是的，您实际上只是在设置 disabled 属性

您需要检查该元素是否已禁用

`.is(':disabled')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:17:46.543

试试这个，

```
$(document).ready(function(){
    if ($('.div.jcarousel-prev .jcarousel-prev-horizontal .jcarousel-prev-disabled .jcarousel-prev-disabled-horizontal').is(':disabled')){
        $(this).addClass("arrow");
    }
   }); 
```

# javascript - CryptoJS 中的 AES-CTR 是否与 PyCrypto 兼容？

> ID：15837463
> 
> 赞同：1
> 
> 时间：2013-04-05T15:13:52.983
> 
> 标签：javascript, python, cryptography, pycrypto, cryptojs

我正在尝试使用 PyCrypto 库解密一些 AES-CTR-256 数据。密文由 Cryptocat 多方聊天 Javascript 代码生成，该代码依赖于 CryptoJS 库。IV 方案如 Cryptocat[多方协议规范](https://github.com/cryptocat/cryptocat/wiki/Multiparty-Protocol-Specification)中所述：

> 初始化向量 (IV) 由 16 个字节组成：12 个字节是随机生成的，4 个字节用作计数器，每个块递增一次。

（12 个随机字节在 4 个计数器字节之前。）

这是我的 Python 代码：

```
import struct
import base64
import Crypto.Cipher.AES

def bytestring_to_int(s):
    r = 0
    for b in s:
        r = r * 256 + ord(b)
    return r

class IVCounter(object):
    def __init__(self, prefix="", iv="\x00\x00\x00\x00"):
        self.prefix = prefix
        self.initial_value = iv

    def increment(self, b):
        if b == "\xff\xff\xff\xff":
            raise ValueError("Reached the counter limit")
        return struct.pack(">I", bytestring_to_int(b)+1)

    def __call__(self):
        self.initial_value = self.increment(self.initial_value)
        n = base64.b64decode(self.prefix) + self.initial_value
        return n

def decrypt_msg(key, msg, iv):
    k = base64.b16decode(key.upper())
    ctr = IVCounter(prefix=iv)
    aes = Crypto.Cipher.AES.new(k, Crypto.Cipher.AES.MODE_CTR, counter=ctr)
    plaintext = aes.decrypt(msg)
    return plaintext

if __name__ == "__main__":
    key = 'b1df40bc2e4a1d4e31c50574735e1c909aa3c8fda58eca09bf2681ce4d117e11'
    msg = 'LwFUZbKzuarvPR6pmXM2AiYVD2iL0/Ww2gs/9OpcMy+MWasvvzA2UEmRM8dq4loB\ndfPaYOe65JqGQMWoLOTWo1TreBd9vmPUZt72nFs='
    iv = 'gpG388l8rT02vBH4'
    plaintext = decrypt_msg(key, msg, iv)
    print plaintext 
```

这就是如何在 Javascript 中做同样的事情：

1.  安装 CryptoCat 扩展
2.  运行 CryptoCat
3.  启动开发者控制台（Chrome/Firefox 中的 F12）
4.  运行这些代码行

* * *

```
key = 'b1df40bc2e4a1d4e31c50574735e1c909aa3c8fda58eca09bf2681ce4d117e11';
msg = 'LwFUZbKzuarvPR6pmXM2AiYVD2iL0/Ww2gs/9OpcMy+MWasvvzA2UEmRM8dq4loB\ndfPaYOe65JqGQMWoLOTWo1TreBd9vmPUZt72nFs=';
iv = 'gpG388l8rT02vBH4';
opts = {mode: CryptoJS.mode.CTR, iv: CryptoJS.enc.Base64.parse(iv), padding: CryptoJS.pad.NoPadding};
CryptoJS.AES.decrypt(msg, CryptoJS.enc.Hex.parse(key), opts).toString(CryptoJS.enc.Utf8); 
```

预期输出：`"Hello, world!ImiAq7aVLlmZDM9RfhDQgPp0CrAyZE0lyzJ6HDq4VoUmIiKUg7i2xpTSPs28USU8"`. 正如预期的那样，这适用于 Javascript。

但是，Python 代码输出乱码。repr(plaintext) 给出：

```
'\x91I\xbd\n\xd5\x11\x0fkE\xaa\x04\x81V\xc9\x16;.\xe3\xd3#\x92\x85\xd2\x99\xaf;\xc5\xafI\xac\xb6\xbdT\xf4{l\x17\xa1`\x85\x13\xf2\x8e\x844\xac1OS\xad\x9eZ<\xea\xbb6\x9dS\xd5\xbc\xfd\xc4\r\xf94Y~\xaf\xf3\xe0I\xad\xa6.\xfa\x7f\xf8U\x16\x0e\x85\x82\x8c\x8e\x04\xcb,X\x8b\xf7\xef\xb2\xc2\xe3~\xf1\x80\x08L\x8b \x9f\xaf\x0e\x0b' 
```

我不确定为什么会这样。我很确定我的 IVCounter 实现与 JS 代码使用的方案相匹配。难道没有 Python 等效的 CryptoJS NoPadding 选项吗？我难住了。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:19:38.973

我想你想看看[我为什么不能在别人的 AES 解密器上解密我的 AES 加密消息？](https://stackoverflow.com/questions/12221484/how-come-i-cant-decrypted-my-aes-encrypted-message-on-someone-elses-aes-decrypt)

您使用 python 解密的方式需要根据该问题的答案进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:24:43.033

这是正确的 Python 脚本，它可以工作！

编辑：不是真的——只显示明文的前 16 个字节。我会在这方面做进一步的工作。

```
import struct
import base64
import Crypto.Cipher.AES

def bytestring_to_int(s):
    r = 0
    for b in s:
        r = r * 256 + ord(b)
    return r

class IVCounter(object):
    def __init__(self, prefix="", iv="\x00\x00\x00\x00"):
        self.prefix = prefix
        self.initial_value = iv
        self.first = True

    def increment(self, b):
        if b == "\xff\xff\xff\xff":
            raise ValueError("Reached the counter limit")

        if self.first:
            return struct.pack(">I", bytestring_to_int(b))
        else:
            self.first = False
            return struct.pack(">I", bytestring_to_int(b)+1)

    def __call__(self):
        self.initial_value = self.increment(self.initial_value)
        n = base64.b64decode(self.prefix) + self.initial_value
        return n

def decrypt_msg(key, msg, iv):
    k = base64.b16decode(key.upper())
    ctr = IVCounter(prefix=iv)
    aes = Crypto.Cipher.AES.new(k, Crypto.Cipher.AES.MODE_CTR, counter=ctr)
    plaintext = aes.decrypt(base64.b64decode(msg))
    return plaintext

if __name__ == "__main__":
        key = 'b1df40bc2e4a1d4e31c50574735e1c909aa3c8fda58eca09bf2681ce4d117e11'
        msg = 'LwFUZbKzuarvPR6pmXM2AiYVD2iL0/Ww2gs/9OpcMy+MWasvvzA2UEmRM8dq4loB\ndfPaYOe65JqGQMWoLOTWo1TreBd9vmPUZt72nFs='
        iv = 'gpG388l8rT02vBH4'
        print decrypt_msg(key, msg, iv)
        print "Decrypted message:", repr(decrypt_msg(key, msg, iv)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:20:51.553

我增加计数器的方式有问题。显然，正确的计数器值被应用到了错误的地方。这是解决该问题的后续问题。[带有 Python 和 Javascript 的 AES CTR 模式的奇怪问题](https://stackoverflow.com/questions/16040367/strange-issue-with-aes-ctr-mode-with-python-and-javascript)

# java - Java 不产生正确的时区信息

> ID：15837467
> 
> 赞同：9
> 
> 时间：2013-04-05T15:14:07.683
> 
> 标签：java, timezone

我在 Windows 机器上运行 Java 程序。我正在尝试获取时区列表及其相关信息。这是完整的程序：

```
 String[] allTimeZones = TimeZone.getAvailableIDs();
    Date now = new Date();
    for (int i = 0; i < allTimeZones.length; i++) {
        TimeZone tz = TimeZone.getTimeZone(allTimeZones[i]);
        System.out.format("%s;%s; %f \n", 
                          allTimeZones[i],
                          tz.getDisplayName(), 
                          (float) (tz.getOffset(now.getTime())/3600000.0));
    } 
```

生成的时区之一具有以下信息：

> America/New_York;东部标准时间; -4.000000

这令人费解。此时，纽约正处于东部夏季夏令时。所以上面的信息是不对的。

有谁知道我如何让 Java 生成

> America/New_York;东部标准时间; -5.000000

或类似的东西

> America/New_York；东部夏季夏令时；-4.000000

感谢帮助！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:34:02.560

使用[getDisplayName(daylight, style)](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getDisplayName%28boolean,%20int%29)，传入`true`for `daylight`。这将打印：

```
America/New_York;Eastern Daylight Time; -4.000000 
```

但是您必须确定当前时间是否处于夏令时（或者它总是返回“夏令时”，即使在秋季和冬季也是如此）。这应该可以解决问题：

```
String[] allTimeZones = TimeZone.getAvailableIDs();
Date now = new Date();
for (int i = 0; i < allTimeZones.length; i++) {
    TimeZone tz = TimeZone.getTimeZone(allTimeZones[i]);
    System.out.format("%s;%s; %f \n", allTimeZones[i], 
            tz.getDisplayName(tz.inDaylightTime(now), TimeZone.LONG), 
            (float) (tz.getOffset(now.getTime())/3600000.0));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-10T00:12:02.630

# java - 在 GAE 上部署时出现“DATA_RETRIEVAL”错误

> ID：15837468
> 
> 赞同：0
> 
> 时间：2013-04-05T15:14:16.860
> 
> 标签：java, google-app-engine, paypal, paypal-sandbox

我正在使用新的 iOS SDK 及其关联的 REST API。实现 iOS 框架是一种魅力，但在尝试使用 Java/Google App Engine 后端验证付款时，情况并非最佳。所有这些都在沙盒环境中进行测试。

现在，在本地测试时，信用卡支付验证正在工作（使用 REST API SDK v0.5.2）。但是，当我将应用程序部署到应用程序引擎时，对 com.paypal.api.payments.Payment.get(accessToken, paymentId) 的调用失败并返回以下错误：

> 响应代码：500 响应：{"name":"DATA_RETRIEVAL","message":"Error retrieving data","information_link":" [https://developer.paypal.com/docs/api/#DATA_RETRIEVAL](https://developer.paypal.com/docs/api/#DATA_RETRIEVAL) "," debug_id":"b42c7f5c2b97d"}

如果他们有帮助，还有几个调试 ID：04870b7c20522、9cc4393ce08b1、3d3eb3b9109e0。

信息链接仅包含另一条错误消息。

> （“服务暂时不可用 - 由于维护停机或容量问题，服务器暂时无法为您的请求提供服务。请稍后再试。”）

有谁知道为什么这在 App Engine 上失败了？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:52:16.643

PayPal 似乎已经解决了这个问题。

# android - 显示密度和资源使用情况 (ldpi/mdpi/hdpi/xhdpi)

> ID：15837469
> 
> 赞同：2
> 
> 时间：2013-04-05T15:14:20.313
> 
> 标签：android, android-layout

所以我得到了 800x480 显示屏的 HTC 智能手机。我一直以为是HDPI设备。我得到了使用以下代码的保证：

```
Display display = activity.getWindowManager().getDefaultDisplay();
DisplayMetrics displayMetrics = new DisplayMetrics();
display.getMetrics(displayMetrics);
displayDensity = displayMetrics.densityDpi; 
```

它说我的设备是 240dpi。但在实验中，我发现 android 仅以 MDPI 威胁我的设备。我确定这一点。我用另一个 800x480 (ZTE) 进行了同样的测试，结果是一样的——它在 displayDensity 中显示 240，但 android 威胁它作为 MDPI 设备......但为什么会这样？在 android.devepoler 上，他们说 240dpi 是 HDPI。我完全糊涂了。为什么 240 被威胁为 MDPI？

**我如何发现 android 将我的 HTC 视为 MDPI 设备：** 简而言之，我做了什么来确保 - 我将一个大图像放到 drawable-hdpi （猜测 AOS 会使用它）并将较小的图像放到 drawable-mdpi 然后运行一个应用程序看看它会使用哪个。它总是使用 drawable-mdpi 中的图像而不是 drawable-hdpi。要知道哪个图像在我的设备上看起来如何，我之前运行了应用程序，将图像放入项目的可绘制文件夹。
但是，就像我上面提到的，我猜测我的 800x480 HTC 是 HDPI，因为代码基于 displayDensity 而不是基于配置。配置说我的设备是 Configuration.SCREENLAYOUT_SIZE_NORMAL，这似乎就是 AOS 仅将我的设备视为 MDPI 的原因。所以结合 240dpi 的 DisplayDensity（必须是 HDPI 而不是 MDPI）真的很令人沮丧。所以现在的问题是为什么使用 240dpi 配置的显示密度将设备设置为 MDPI 类型？这是什么原因？我在想检测设备类型的唯一方法是它的显示密度。如果是 240dpi，它必须是 HDPI 设备而不是 MDPI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:22:58.600

您可以尝试阅读此页面： http: [//developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)，当您想要组织资源文件夹时，它会显示有关屏幕密度和其他内容的完整说明。

关于被视为 MDPI 的设备，它可能类似于 Nexus 7，我们确定它是 MDPI，但它使用的是来自 HDPI 的图像以及来自 MDPI/sw600dp 的一些值（您会在上面的链接中找到更好的解释） ，因为它的密度实际上是 TVDPI，所以它是 HDPI 和 MDPI 之间的“中间”密度。尝试在 GooglePlay 上下载一个名为 ScreenInfo 的应用程序。它显示有关设备屏幕的各种信息，并可以帮助您确定您的 HTC。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T18:02:09.253

抱歉耽搁了，所以，首先，你必须决定你想要哪个公众。您必须记住，周围有无数设备，几乎不可能覆盖所有设备。我建议您从被认为是正常的设备（屏幕正常和 MDPI 密度）开始，因为这是基线。然后，基于第一个担心其他人。了解资源文件夹的区分仅在必要时进行。在大多数情况下，用于基线的资源对每个人都很有效。

希望能帮助到你。

# objective-c - 防止在允许 [super init] 的同时调用 ObjC“抽象”类的 init 方法？

> ID：15837470
> 
> 赞同：0
> 
> 时间：2013-04-05T15:14:24.783
> 
> 标签：objective-c, properties, protected, ivar

假设我有一个用户不应该实例化的伪抽象基类。基本上，当他们尝试在类上调用 init 或返回具有默认值的具体实例之一时，我想发出警告。

但是，该基类的具体实现必须调用`[super init]`它们的初始化程序。这当然应该被允许。

我最好怎么做？

我在想这应该没问题：

```
@implementation KTPhysicsShape
-(id) init
{
    // throw exception here or return concrete instance with default values
}

// this is what subclasses would call in place of [super init]:
-(id) internal_initFromSubclass
{
    return [super init];
}
@end 
```

对这种方法有任何顾虑吗？我知道其他人仍然可以调用内部方法，但我最关心的是不允许`init`，因为这是用户首先尝试调用的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:25:11.353

我也研究过如何有效地抽象类的问题，但我并不喜欢这个解决方案。在我看来，它会让你的子类代码看起来很奇怪，而且对于普通的观察者来说更难阅读。

如果您要求您的子类在 中进行特定的初始化`-init`，那么您的可能是唯一的解决方案。但是，如果您只想确保它们*具有*子类，则可以在以下范围内执行此操作`-init`：

```
-(id) init
{
    NSAssert(![self isMemberOfClass:[KTPhysicsShape class]], 
                                         @"KTPhysicsShape must be subclassed!");
    return [super init];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:51:22.243

这表明您的架构存在严重缺陷。指定初始化器链的全部意义在于它可以以可预测的顺序执行而不会发生变化。向子类添加合同义务以*不*遵循正常链会增加脆弱性和不必要的复杂性。

缺陷的症结在于你有一个看起来不是真正抽象的抽象类。它可以有具体的实例，这需要具体的初始化。

首先，为什么不能将类分解为真正的抽象类和具体类？

如果你不能（或不想——当然，更多的类有它自己的成本），那么一种解决方案是将常用的初始化操作分解为一个单独的方法：

```
- (void) commonKTPhysicsShapeInit
{
    ....
} 
```

*那不叫`super`。* 这不会在您的标题中声明；它是一种仅限内部实现的方法，因此得名。

然后，让您的子类通过调用`commonInit`. 对于该类的具体实例，有一个单独的初始化器，它既调用`commonInit`又执行具体的初始化舞蹈。

它与您提出的类似，但以更接近现有模式的方式呈现界面。

# javascript - MS word Spell Checker 的 Activex 控件

> ID：15837471
> 
> 赞同：0
> 
> 时间：2013-04-05T15:14:26.343
> 
> 标签：javascript, jsp, vbscript, activex

尝试调用 CreateObject("Word.Application") 时出现错误，它无法在 IE9.0 内运行的 win7 上创建 Word 应用程序对象（已检查兼容视图），并且我的 PC 上安装了 MS Office Word 2007。我从一个从网页（jsp）调用的VB脚本调用它。

任何想法都非常感谢。！

```
Set ObjSpellChck= CreateObject("Word.Application")

        If (IsEmpty(ObjSpellChck)) Then 
            MsgBox "Could not create Spell Check Object"
            Exit Sub
        End If

        If Err.Number <> 0 OR Err.Number = 429 Then
            MsgBox "Please install the 'Spell Check' ActiveX Control", 64
            Err.Clear
            On Error GOTO 0
            Exit Sub 
        End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:50:20.887

Microsoft Word 控件未标记为“脚本安全”，因此无法从网页中使用。

你真的应该停止使用 VBScript。它不能在 Internet Explorer 以外的浏览器中运行，并且很可能在较新版本的 Explorer 下完全停止运行。（已经有一些报道称它在 IE10 中可能无法可靠运行。）

# javascript - 在我的 SPA 中在哪里添加 JQuery 多选脚本？

> ID：15837474
> 
> 赞同：1
> 
> 时间：2013-04-05T15:14:43.713
> 
> 标签：javascript, html, single-page-application

早上好，

我已经开始构建我的第一个单页应用程序的 HTML 元素。我需要为特定输入调用 JQuery Multi Select。我已经在我的 html 文件中包含了 script 标签。但是，它根本不渲染。

```
<script>
$(document).ready(function () {
    $("#Sites").multiselect();
});
</script>
<section>
<h2 class="page-title" data-bind="text: title"></h2>
</section>
<section id ="Recipients">
 <article>
    <div class="row">
        <div class="span6">
        <label for="Study">Study: </label>
        <select data-bind="text: Study" title="Study"></select><br />
        <label for="Sites">Sites: </label>
        <select data-bind="text: Sites" title="Sites" multiple="multiple" ></select><br />
        <label for="Distribution">Distribution: </label>
        <input type="checkbox" data-bind="text: Distribution" title="Distribution" />
    </div><!-- span6 -->
    </div><!-- row -->
    <div class="row">
    <div class="span6">
        <label for="Recipients">Recipients: </label>
        <input type="checkbox" data-bind="text: Recipients" title="Recipients"/><br />
    </div><!-- span8 -->
    </div><!-- row -->
 </article>
</section>

<section id ="Communication">
 <article>
    <label for="SendFrom">Send From: </label>
    <label id="SendFrom"></label><br />
    <label for="Subject">Subject: </label>
    <input id="Subject" /><br />

 </article>
</section> 
```

我是否将脚本标签放在正确的文件中？它应该在我的 home.js 文件中吗？HTML 文件是否需要对附加样式表和 JavaScript 文件的引用，或者 Durandal/KO 是否在幕后处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:29:14.140

`$("#Sites").multiselect();`指向具有`id`“站点”的元素。但是，您的选择元素上没有 id。所以 `<select data-bind="text: Sites" title="Sites" multiple="multiple" ></select>` 换成`<select data-bind="text: Sites" id="Sites" title="Sites" multiple="multiple" ></select>`，我认为你很高兴。

# jdbc - 错误“已调用 Connection.close()。此状态下的操作无效。” 使用hadoop导出数据到mysql时

> ID：15837477
> 
> 赞同：1
> 
> 时间：2013-04-05T15:15:10.987
> 
> 标签：jdbc, hadoop, mapreduce

我写了一个 MapReduce 程序来将数据导出到 MySQL。我使用 DBOutputFormat 类和 jdbc 用于 MySQL。当数据很小（例如 2M）时，一切正常。但是当我的数据较大（例如**5Mbytes**）时，它报错了异常**“Connection.close() 已被调用。此状态下的操作无效。”**
my.cnf 中的**“wait_timeout”**值是**28800**，已经足够了。但是我在 Google 中搜索的相同问题都是关于 my.cnf 中的**“wait_timeout”**。我对 jdbc 比较新鲜。我不知道 jdbc或者hadoop应该配置以及如何配置。或者如果关闭了mysql连接，我可以重新连接吗？如何。请给我一些代码。
任何帮助将不胜感激。

# objective-c - 如何防止文本笔划在 UILabel 边缘被切断？

> ID：15837481
> 
> 赞同：1
> 
> 时间：2013-04-05T15:15:27.100
> 
> 标签：objective-c, uilabel, core-text, stroke

我正在为 a 中的文本添加一个相当宽的几个像素的笔划`UILabel`，并且根据行距，如果文本的边缘接触到标签的边缘，则可以切断笔划的侧面，如果他们超出了标签的范围。**我怎样才能防止这种情况？**这是我用来应用笔画的代码（当前为 5px）：

```
- (void) drawTextInRect: (CGRect) rect
{
    UIColor *textColor = self.textColor;

    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(c, 5);
    CGContextSetLineJoin(c, kCGLineJoinRound);
    CGContextSetTextDrawingMode(c, kCGTextStroke);
    self.textColor = [UIColor colorWithRed: 0.165 green: 0.635 blue: 0.843 alpha: 1.0];
    [super drawTextInRect: rect];
} 
```

这是标签侧面的剪辑示例，我认为需要发生以下情况之一：

*   当文本分成多行时，标签的框架内会留出一些空间供笔划占据。
*   或者，允许笔划溢出标签的外部边界。

![在此处输入图像描述](https://i.stack.imgur.com/avYJ4.png) ![在此处输入图像描述](https://i.stack.imgur.com/Nwioy.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:27:38.520

是的，剪辑只是没有用。

但是，如果您在`UILabel`子类上创建插图怎么办。您可以将标签的框架制作成您需要的大小，然后设置您的插图。当您绘制文本时，它将使用插图在您需要的任何边缘周围提供填充。

缺点是，您将无法在 IB 中一眼判断换行。你必须拿你的标签并减去你的插图，然后你会看到它在屏幕上的真实外观。

。H

```
@interface MyLabel : UILabel
@property (nonatomic) UIEdgeInsets insets;
@end 
```

.m

```
@implementation MyLabel

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.insets = UIEdgeInsetsMake(0, 3, 0, 3);
    }

    return self;
}

- (void)drawRect:(CGRect)rect {
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSaveGState(c);

    CGRect actualTextContentRect = rect;
    actualTextContentRect.origin.x += self.insets.left;
    actualTextContentRect.origin.y += self.insets.top;
    actualTextContentRect.size.width -= self.insets.right;
    actualTextContentRect.size.height -= self.insets.bottom;

    CGContextSetLineWidth(c, 5);
    CGContextSetLineJoin(c, kCGLineJoinRound);
    CGContextSetTextDrawingMode(c, kCGTextStroke);
    self.textColor = [UIColor colorWithRed: 0.165 green: 0.635 blue: 0.843 alpha: 1.0];

    [super drawTextInRect:actualTextContentRect];
    CGContextRestoreGState(c);
    self.textColor = [UIColor whiteColor];
    [super drawTextInRect:actualTextContentRect];
} 
```

![模拟器运行](https://i.stack.imgur.com/DtCA8.png)

**编辑：**为我的子类添加了完整代码`UILabel`。稍微修改了代码以显示大笔划和正常刻字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:17:40.793

您应该`sizeThatFits:`在`UILabel`子类上实现以返回稍大的首选尺寸，同时考虑笔划所需的额外空间。然后，您可以使用 的结果`sizeThatFits:`正确计算标签的框架，或者只调用`sizeToFit`.

# jquery - 格式化网格内的每个语句结果？

> ID：15837483
> 
> 赞同：4
> 
> 时间：2013-04-05T15:15:31.817
> 
> 标签：jquery, html, css

所以我已经获取并解析了一些数据，我正在使用“每个”来显示它：

```
$.ajax({
    url      : 'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent('http://news.google.com/news?pz=1&cf=all&ned=uk&hl=en&output=rss'),
    dataType : 'json',
    success  : function (data) {
        if (data.responseData.feed && data.responseData.feed.entries) {
            $.each(data.responseData.feed.entries, function (i, e) {
                $('.row').append("<div class=\"threecol\"">title: " + e.title + "<br></div>");
            });
        } 
    }
}); 
```

为了让网格正常运行，它需要遵循以下结构：

```
<div class="container">
    <div class="row">
        <div class="threecol">
        </div>
        <div class="threecol">
        </div>
        <div class="threecol">
        </div>
        <div class="threecol last">
        </div>
    </div>
</div> 
```

**所以我的问题是，我将如何对每个语句进行排序并将每 4 个项目放入一个新行并让每个第 4 个项目具有“threecol last”类而不是“threecol”类？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:28:09.247

在循环之前添加一个计数器`$.each`，然后添加一些简单的条件以将 插入`rows`正确的位置，并分配正确的类：

```
if (c % 4 == 0) { 
  $('<div />').addClass('row').appendTo('.container'); 
}

$('<div />').addClass('threecol')
            .text('title: ' + e.title)
            .appendTo('.row:last');

if (c % 4 == 3) {
  $('.threecol:last').addClass('last');
}

c++; 
```

# android - 照片后如何更新 Android 图库？

> ID：15837485
> 
> 赞同：5
> 
> 时间：2013-04-05T15:15:44.707
> 
> 标签：android, android-intent, gallery, photo, face-detection

对于大学，我必须在 android 上开发一个带有面部检测的应用程序。为此，我必须在我的画廊中保存各种照片。问题是保存照片后，图库没有更新。更准确地说，如果我删除要保存图像的目录，我打开应用程序并拍摄照片，然后进入画廊并在“更新”后看到照片。但是一旦我有了目录，如果我拍一张新照片，这并没有覆盖旧照片。

在网上我发现了这个：

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

......但它不起作用！

这是我的代码：

```
 .
    .
    .
      ImageButton buttonPicture = (ImageButton) findViewById(R.id.camera_surface_button);
                        buttonPicture.setOnClickListener(new OnClickListener(){
                                public void onClick(View v) {
                                        mCamera.takePicture(null, null, jpegCallback); 
                                        //File file = new File(savedPath, "ing.jpg");
                                        sendBroadcast(new         Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://" +     Environment.getExternalStorageDirectory())));

                                }
                        });
     .
     .
     .
     .

    PictureCallback jpegCallback = new PictureCallback() {
                public void onPictureTaken(byte[] _data, Camera _camera) {
                        imagesFolder = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "/TTRprova");
                        imagesFolder.mkdirs();
                        String fileName = "image3.jpg";

                        File output = new File(imagesFolder, fileName);

                        textView1.setText("-----Sono nella callback-----");

                        Uri outputFileUri = Uri.fromFile(output);
                        String filePath = outputFileUri.getPath();
                        File file= new File(filePath);

                        try {
                            FileOutputStream fos = new FileOutputStream(file, true);
                            fos.write(_data);
                            fos.close();

                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            textView1.setText("-----FileNotFoundException-----");
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            textView1.setText("-----IOException-----");
                            e.printStackTrace();
                        }

                        //riparte la preview della camera
                        //mCamera.startPreview();

                }
    }; 
```

希望得到您的帮助。再见

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T15:22:18.720

您可以强制 MediaScanner 添加特定文件（或让它知道它已被删除或修改）

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.fromFile(myNewFile))); 
```

# sharepoint - 与 Dynamics CRM 2011 兼容的开源 SharePoint 替代方案

> ID：15837488
> 
> 赞同：0
> 
> 时间：2013-04-05T15:15:47.393
> 
> 标签：sharepoint, open-source, dynamics-crm-2011

我看到在 MCRM 中，您有一个“文档”实体，但您需要一个 SharePoint 位置。

无论如何它应该是 Microsoft SharePoint 还是他们能够使用此实体或其他方式来使用 SharePoint 位置提供的功能，而无需购买与 Microsoft 产品兼容的开源解决方案之类的 SharePoint 许可证。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:20:35.797

您可以使用免费的 Sharepoint 基础。我们以这种方式实施了我们的 CRM SharePoint 集成。

[http://msdn.microsoft.com/en-gb/sharepoint/aa905690.aspx](http://msdn.microsoft.com/en-gb/sharepoint/aa905690.aspx)

# c# - Raven db 按问题排序

> ID：15837493
> 
> 赞同：0
> 
> 时间：2013-04-05T15:15:52.580
> 
> 标签：c#, linq, sql-order-by, ravendb

我收集了一些文件：

```
{
"Name": "MyName",
"LabelKey": "MyLabelKey"
} 
```

集合中的 LabelKey 可能为 null 或不在文档中。如果我尝试使用 linq 订购此列表：

```
session.Query<MyMetaData>().OrderBy(x => x.LabelKey).ToList() 
```

我只得到 LabelKey 不为空的记录。因此，如果我收集了 100 个文档并且只有 2 个具有 LabelKey 值，那么在我订购后我只会得到 2 个。即使它们的 LabelKey 为 null，我也需要订购所有集合。如果我尝试检查 not null 我会得到异常：

```
Could not understand how to translate '(x.LabelKey != null)' to a RavenDB query.
Are you trying to do computation during the query?
RavenDB doesn't allow computation during the query, computation is only allowed during index. Consider moving the operation to an index. 
```

任何想法如何订购所有收藏品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:29:01.970

**方法一**

不要存储空值。在进入的过程中，检查 null 并替换为空字符串。

**方法二**

创建静态索引。在`Map`表达式中，使用 null 合并运算符，例如：

```
LabelKey = x.LabelKey ?? string.Empty 
```

然后使用该索引进行查询。

# javascript - IE10 中止图像下载

> ID：15837502
> 
> 赞同：3
> 
> 时间：2013-04-05T15:16:16.973
> 
> 标签：javascript, html, image, internet-explorer, internet-explorer-10

我正在尝试缓存几百个相当大的图像（每个图像大约为 2000x2500，350KB），以便在 Web 应用程序中显示。我的基本过程是为每个创建一个 Image 对象，设置它的 src，然后等待它下载。然后在应用程序需要时使用 Image 对象加载图像。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
    var countSpan, errorSpan;
    var imageArray = new Array();

    var index = 0;
    var imageCount = 199;
    var concurrent = 4;

    var count = 0;
    var error = 0;

    function runTest() {
        countSpan = document.getElementById('countSpan');
        errorSpan = document.getElementById('errorSpan');
        next(); 
    }

    function next() {
        while (index < imageCount && concurrent > 0) {
            downloadImage('images/' + index + '.jpg', index);
            index++;
        }
        countSpan.innerHTML = count;
        errorSpan.innerHTML = error;
    }

    function downloadImage(src, index) {
        concurrent--;
        var image = new Image();
        imageArray[index] = image;
        image.onload = function() {
            concurrent++;
            count++;
            next();
        }
        image.onerror = function() {
            concurrent++;
            error++;
            next();
        }
        image.src = src;
    }
</script>
</head>

<body onload='runTest()'>
    <p>Downloaded: <span id='countSpan'></span></p>
    <p>Errors: <span id='errorSpan'></span></p>
</body>
</html> 
```

这在 Firefox、Chrome、Safari 和 IE9 中运行良好。但是，IE10 将在中途终止连接。例如，如果我尝试下载 200 个这些图像，IE10 将下载 100 个（约 35MB 数据），然后在剩余的 100 个上出错。网络捕获选项卡将连接显示为已中止。我看到 iexplore.exe 进程打开 TCP 连接，然后在图像开始出错时立即关闭它们。

如果我尝试下载 200 个较小的图像（640x480，~45KB），它可以工作。

如果我不坚持对图像的引用

```
// imageArray[index] = image; 
```

IE10 下载所有 200 张图像。但这违背了目的。

在我看来，IE10 对图像引用有大小限制。但我找不到任何文件来支持这一点。如果您可以提供指向定义此限制的文档的链接或提供解决方法，我们将不胜感激。

# backbone.js - Backbone - 在视图中使用获取的数据

> ID：15837505
> 
> 赞同：0
> 
> 时间：2013-04-05T15:16:22.963
> 
> 标签：backbone.js, backbone-views, backbone.js-collections

我已将数据添加到 Collection 变量中，但我不确定下一步该怎么做。如何使用这些数据并用它填充模板？这是我在视图中渲染函数的代码。

```
 Collection.url = "../data";
    Collection.fetch();                         
    var compiled = _.template(self.data);                               
    self.$el.prepend(compiled(/*MY JSON SHOULD GO HERE*/)); 
```

我是骨干的新手，所以每一个帮助都是值得的。

这是一个集合定义：

```
var MainCollection = Backbone.Collection.extend({ 
        model: MainModel,
        //localStorage: new Backbone.LocalStorage("kitchen"),
        initialize: function (models,options) { }
    }), Collection = new MainCollection; 
```

下面是一个 Collection 和 Collection 转换为 JSON 的日志： ![在此处输入图像描述](https://i.stack.imgur.com/ASs4d.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:23:18.303

假设 Collection 是您收藏的名称（我不得不说这很令人困惑），[这](http://backbonejs.org/#Collection-toJSON)就是您要查找的内容：

```
self.$el.prepend(compiled(Collection.toJSON())); 
```

**编辑：**
不要忘记您正在异步获取数据。所以当你评估你的模板时，数据还没有回来，你的集合仍然是空的。收听请求的结束（我认为是“同步”事件）或其他一些事件，以便您知道何时填充集合或使用 fetch 方法的成功选项来指定回调:)

至于你的日志。当您记录一个对象时，它将自动更新，直到您检查详细信息。因此，您在它为空时记录它，但在填充后检查它（几毫秒后）。

# ruby-on-rails - 使用 simple_form 在 Rails 3 中根据日期检查日期

> ID：15837510
> 
> 赞同：0
> 
> 时间：2013-04-05T15:16:37.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, validation, simple-form

在 Rails 中检查日期与一天的最佳方法是什么？

我有一个登记册，某些登记册在某些日子进行，我想做的是限制可选择的日期以匹配日期，即如果登记册设置为星期一 15:00，那么日期选择应该只提供日期是星期一，即 2013 年 4 月 1 日、2013 年 4 月 8 日、2013 年 4 月 15 日等。

这是我当前寄存器的截图：

![在此处输入图像描述](https://i.stack.imgur.com/0dbHT.png)

我的表单使用`simple_form`gem，并具有以下简单输入：

```
<%= f.input :date %> 
```

编辑：这是我的模型，应 cthulhu 的要求

```
class Register < ActiveRecord::Base
  has_many :student_registers
  has_many :students, :through => :student_registers
  belongs_to :event
  attr_accessible :date, :student_ids, :module_class_id, :event_id
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:32:46.977

Date 类有很多有用的方法，比如

```
>> d = Date.today
=> Fri, 05 Apr 2013
>> d.monday?
=> false
>> d.friday?
=> true
>> d.wday
=> 5 
```

写一个验证方法应该就够了：

```
class Register < ActiveRecord::Base
  validates_each :date do |record, attr, value|
    record.errors.add(attr, "Must be #{event.day}") unless value.wday == Date.parse(event.day).wday # I assume 'event.day' holds a weekday as a String, e.g. 'Monday'
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:58:35.957

可能的日期是否存储在数据库表中？如果是这样，那么做一个集合选择怎么样，它允许你过滤掉你想要的值。就像是：

```
<%= f.collection_select(:date, Dates.all.where(:day => 5), :id, :name, :prompt => 'Select') %> 
```

将 "Dates.all.where(:day => 5)" 替换为您拥有的任何日期组以及您想要的任何条件。

# facebook - 你如何翻译 Facebook 标签名称？

> ID：15837512
> 
> 赞同：1
> 
> 时间：2013-04-05T15:16:48.990
> 
> 标签：facebook

我之前已经翻译了应用程序选项卡名称：http://www.facebook.com/translations/admin/browse.php?app=[YOURAPPID]

但我没有看到任何可用于本地化的条目。这是一个错误还是我现在找错地方了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T17:38:30.147

您现在可以在[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)左侧的“Localize”链接项下进行任何本地化

# ios - 如何以秒为单位确定CMDeviceMotion的年龄

> ID：15837517
> 
> 赞同：2
> 
> 时间：2013-04-05T15:16:55.917
> 
> 标签：ios, accelerometer, core-motion, cmmotionmanager

我希望能够在游戏过程中打开和关闭设备动态更新。但是在我关闭它们然后再次返回后，CMMotionManager 的 .deviceMotion 属性会在短时间内返回最后知道的 deviceMotion（大约 0.5 秒，直到它可以计算出新值，我猜）。

所以，我希望能够测试我得到的 CMDeviceMotion 对象的年龄，如果它们超过几秒钟就忽略它们。

计算 CACurrentMediaTime() - deviceMotion.timestamp 似乎给了我准确的结果。但我担心这可能会在未来的设备或 iOS 版本中中断。设备运动时间戳是否保证在未来与 CACurrentMediaTime() 保持可比性？有没有更好的方法来计算 CMDeviceMotion 时间戳的年龄？

来自 Apple 的文档：

[CACurrentMediaTime()](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreAnimation_functions/Reference/reference.html)

> 通过调用 mach_absolute_time() 并将结果转换为秒数得出的 CFTimeInterval。

[deviceMotion.timestamp](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMLogItem_Class/Reference/Reference.html)

> 时间戳是自手机启动以来的时间量（以秒为单位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:39:15.530

我有同样的问题，需要保留事件的历史。我通过将 updateInterval 设置为非常低的值（例如 0.5）解决了这个问题。因此 Core Motion 不需要重新初始化传感器，从而降低能耗。

# git - git：合并分支日志

> ID：15837519
> 
> 赞同：0
> 
> 时间：2013-04-05T15:17:02.493
> 
> 标签：git, github, git-svn

如何合并我的 git 项目的历史记录，以便所有提交历史记录都被视为一个分支的一部分？

**目前我有这个：**

```
* 465a83a Highlight search
* 37a367d Tab=3; AutosaveSession (Not using yet)
*   9f2559c Merge branch 'master' of github.com:shahverdy/.vim
|\  
| * 6bf7783 SaveSession was added.
| |\  
| | * 6cdd383 Some changes with path allocation
| | |\  
| | | * de535b2 Update README.md
| | | * cb78dae Update README.md
| | | * 6664428 Update README.md
| | | * b6f3869 Some extra modifications + README.ms
| | | * 0924e77 Oops! vimrc was not included in the last commit
| | | * c030172 sweeping away ...
| | | * d67280e bundle installer was added, some extaras was sweeped away
| | | * 10a669c Cursors fixed...
| | | * 9dfd01f Cursors was edited ...
| | | * 0b5d8aa Syntax for PHP and Javascript was added
| | | * dd5a21d A bug fixed
| | | * ad5b9f2 Syntax for PHP and Javascript was added
| | | * 99e5595 Fixed code folding+ search highlighting
| | | * 69c7f77 File Explorer fixed
| | | * ba5fbf7 .vimrc was added
| | * f875ee1 A totel reset
| * 9edf692 Update
* 9c71074 new plugins 
```

**我想要这个：**

```
* 465a83a Highlight search
* 37a367d Tab=3; AutosaveSession (Not using yet)
* 9f2559c Merge branch 'master' of github.com:shahverdy/.vim
* 6bf7783 SaveSession was added.
* 6cdd383 Some changes with path allocation
* de535b2 Update README.md
* cb78dae Update README.md
* 6664428 Update README.md
* b6f3869 Some extra modifications + README.ms
* 0924e77 Oops! vimrc was not included in the last commit
* c030172 sweeping away ...
* d67280e bundle installer was added, some extaras was sweeped away
* 10a669c Cursors fixed...
* 9dfd01f Cursors was edited ...
* 0b5d8aa Syntax for PHP and Javascript was added
* dd5a21d A bug fixed
* ad5b9f2 Syntax for PHP and Javascript was added
* 99e5595 Fixed code folding+ search highlighting
* 69c7f77 File Explorer fixed
* ba5fbf7 .vimrc was added
* f875ee1 A totel reset
* 9edf692 Update
* 9c71074 new plugins 
```

## 编辑

我试过`git rebase`了，输出是`Current branch master is up to date.`，并且仍然像以前一样显示历史。

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:34:51.097

使用`git rebase --interactive 9c71074`- 默认情况下合并提交是`squashed`. 这是一个例子。

```
ebg@ebg(390)$ git log --graph --oneline --all
*   67fc064 Merge branch 'br-b'
|\  
| *   ae81ba0 Merge branch 'br-c' into br-b
| |\  
| | * 7fc3f2c c2
| | * ee878fc c1
| | * 08bbe31 c
| * | 7112b66 b2
| |/  
| * fb2bb16 b
* | a4c6fb7 a2
|/  
* e2f832e a
ebg@ebg(391)$ git rebase --interactive e2f832e
Successfully rebased and updated refs/heads/master.
ebg@ebg(392)$ git log --graph --oneline --all
* 1123db2 c2
* 47b327e c1
* 8136393 c
* 4276b1f b2
* 1020ffa b
* a4c6fb7 a2
| *   ae81ba0 Merge branch 'br-c' into br-b   # NOT ON MASTER
| |\  
| | * 7fc3f2c c2
| | * ee878fc c1
| | * 08bbe31 c
| * | 7112b66 b2
| |/  
| * fb2bb16 b
|/  
* e2f832e a
ebg@ebg(393)$ git log --graph --oneline       # ONLY MASTER
* 1123db2 c2
* 47b327e c1
* 8136393 c
* 4276b1f b2
* 1020ffa b
* a4c6fb7 a2
* e2f832e a 
```

# autohotkey - 如何使用 Windows Spy 识别控件？

> ID：15837520
> 
> 赞同：1
> 
> 时间：2013-04-05T15:17:06.603
> 
> 标签：autohotkey

纽比在这里...我的第一个脚本正在运行...是的！但我想阅读一些窗口控件。我在 GetControlPos 和其他人的 AHK 帮助中看到：

可以是 ClassNN（控件的类名和实例编号）或控件的名称/文本，两者都可以通过 Window Spy 确定。

呃，我在 Windows Spy 中找不到信息。有人能指出我正确的方向吗……TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:33:02.673

您必须用鼠标将鼠标悬停在控件上。在“鼠标下”部分，您将看到可以从应用程序中收集的内容。在相当多的情况下，您不会看到比鼠标下方的颜色更多的颜色。当应用程序具有命名控件时，您将看到 ClassNN 名称/ID。

简而言之，并非所有程序都有命名控件。

您可以使用例如记事本进行测试，并在记事本中使用文件保存。文件保存对话框具有命名控件。

# pdf - 在 Ghostscript 中将 PDF 转换为 PS 并保留 CMYK 拆分

> ID：15837521
> 
> 赞同：2
> 
> 时间：2013-04-05T15:17:07.180
> 
> 标签：pdf, ghostscript, postscript

我有一个 RGB PDF，我已在 Adob​​e Acrobat pro 中预检为美国 Web Coated SWOP v2 中的 PDF x1a 兼容 PDF。

PDF 现在有 4 个印版 (C/M/Y/K)

C 板是空的 M 板有 100% 的红色图像 Y 板有 100% 的相同红色图像 K 板在页面上有 100% 的黑色文字（文字不在任何其他板上）

我现在正在尝试使用 ghostscript 将该 PDF 转换为 PS

我试过了：

```
gs -dNOPAUSE -dBATCH -sDEVICE=ps2write -sProcessColorModel=DeviceCMYK -sOutputFile=output.ps input.pdf 
```

但是，当我将这个 PS 提炼成 PDF 时，文本出现在所有印版上，而不仅仅是 K 印版。

我用过这个在线工具： http: [//pdf.my-addr.com/free-online-pdf-to-ps-convert.php](http://pdf.my-addr.com/free-online-pdf-to-ps-convert.php)

还要进行转换和生成的 PS 的蒸馏版本，以保留板故障。他们还使用 Ghostscript 来创建 PS。

所以我假设我缺少一些设置。

有人知道吗？

**更新 1**

一次又一次地尝试在 pdftops 中使用我的 K 版并将其传播到所有 CMYK 版上。

他们在那个网站上做了什么秘密魔法来保存盘子？！

**更新 2**

我能看到的唯一主要区别是我正在使用

```
%%Creator: GPL Ghostscript 905 (pswrite) 
```

并且该网站正在使用

```
%%Creator: GPL Ghostscript 871 (pswrite) 
```

可能是版本问题，还是他们在做我没有做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:27:24.423

Ghostscript 9 及更高版本使用*比*以前版本更好的颜色管理，*但*您必须正确获取 ICC 配置文件。我猜您正在使用默认配置文件，我认为我建议的第一件事是您使用当前版本的 Ghostscript 9.07，我认为对默认配置文件进行了一些更改。

PDF文件现在也有可能有一个与之关联的输入RGB配置文件，Ghostscript现在正在使用它，而以前它没有。我需要查看文件才能更好地了解正在发生的事情，但我偷偷怀疑您的“飞行前”转换导致了问题。如果您使用原始 PDF 文件会怎样？

我非常怀疑 PDF 文件是否真的包含 CMYK 颜色组件，我想所发生的只是不同的配置文件已插入到控制从 RGB 到 CIE 以及从 CIE 到 CMYK 的转换的文件中。

顺便说一句，不要使用 pswrite。它是一个糟糕的低级输出，可以将大部分内容转换为图像。它生成的 PostScript 处理速度非常慢并且不能很好地扩展（即，如果打印机具有不同的分辨率）。请改用 ps2write 设备。

顺便说一句，既然您已经使用过 Acrobat，为什么不直接使用“另存为”PostScript 呢？

# vim - 在 ZSH 中搜索当前行（vi 模式）

> ID：15837522
> 
> 赞同：6
> 
> 时间：2013-04-05T15:17:09.873
> 
> 标签：vim, zsh

如何在 zsh 的当前行内搜索/导航？例如，如果光标位于行尾。

```
// [] indicates cursor position
user@hostname: vim /etx/apache2/sites-enabled/defaul[t] 
```

在 vi 普通模式下，我想使用向后搜索 ( `?`)，键入`etx`并让光标像这样移动：

```
// [] indicates cursor position
user@hostname: vim /[e]tx/apache2/sites-enabled/default 
```

但是，`/`并`?`映射到历史搜索，而不是内联搜索。我知道我可以输入`9b`并到达那里，但我发现搜索和移动到匹配项比计算要跳转的单词数更容易。

不确定这是否清楚，如果我需要澄清一些事情，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:08:17.133

我希望我对你的理解是正确的。您想在 zsh 命令行中，在键入命令时更快地移动光标。

例如

```
user@hostname: vim /etx/apache2/sites-enabled/defaul[t] 
```

你想移动到第一个`e`

我不使用 vi 绑定，但`f`和`F`是你的朋友。

在该示例中，您可以`5Fe`向后移动到 5th `e`。如果你不想数，你可以`Fe`，然后按`;`，直到它移动到正确的位置。

查看vim帮助以获取详细信息：

```
:h f
:h F 
```

`0fe`对于这个例子，更快的方法是。将光标移至开头，然后移至`e`

如果我误解了您的问题，请发表评论，我会删除答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-29T21:17:46.467

也许 ~/.inputrc 文件将这些键映射到奇怪的东西？或者你没有完全理解搜索历史是如何工作的。

让我们重新开始：使用 bindkey 重新映射这些键：

```
bindkey -M vicmd "?" history-incremental-search-backward
bindkey -M vicmd "/" history-incremental-search-forward 
```

现在，当您按“esc”（用于 vi 普通模式）和“？”时 你会得到一个 bck-i-search 命令：

```
%user@hostname: vim /etx/apache2/sites-enabled/defaul[t]
bck-i-search: 
```

此时，您键入要搜索的内容，例如“etx”。并且，光标移动到该行中的那个位置。注意：如果在当前行中没有找到该模式，它会继续搜索您的历史记录。这种行为被认为是一种特征！

您可能会注意到您不能重复搜索（例如在 vim 中按“N”）。在这种情况下，添加一些 isearch 绑定：

```
bindkey -M isearch '^N' history-incremental-search-backward
bindkey -M isearch '^R' history-incremental-search-forward 
```

现在，按 control-N 重复您的搜索，而按 control-S 反转重复搜索的方向（注意：此键绑定的默认顺序是从向前到向后颠倒，因为人们更经常从历史的末尾向后看）。

简而言之：将当前行视为历史的“顶部”。使用 vicmd '/' 或 '?' 搜索整个历史。这 '？' 自上而下搜索，而“/”从光标当前位于历史记录中的任何位置向“顶部”搜索。另一种思考方式是将您的历史记录想象成一个大文件，您所在的当前行位于该文件的底部。如果这有助于你理解它，你可能会感觉到'？比'/'更相关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-29T05:12:30.667

此脚本将此功能添加到 zsh： [https ://github.com/soheilpro/zsh-vi-search](https://github.com/soheilpro/zsh-vi-search)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-25T14:27:41.083

在 shell 的命令模式下键入 v，您将被带到真正的 ViM 编辑器本身。保存退出后会自动执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-30T21:07:52.073

我遇到过同样的问题。我没有设法解决它，但找到了一个合适的解决方法：为*编辑命令行*功能添加了一个绑定，这让我`$EDITOR`使用缓冲区中的当前行。在那里很容易导航到给定的模式。

有关如何绑定函数的信息，请参见*/usr/share/zsh/functions/Zle/edit-command-line 。*

# asp.net - 无法将“masterpage”类型的对象转换为“master”类型

> ID：15837523
> 
> 赞同：3
> 
> 时间：2013-04-05T15:17:10.660
> 
> 标签：asp.net, master-pages

我收到这个错误，非常罕见的情况，无法追踪哪里出错了？错误消息：“无法将 'ASP.femaster_master' 类型的对象转换为 'FEMaster' 类型。”

通过 FTP 重新上传时，同一页面恰好可以正常工作，看起来很奇怪

请在这方面提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:23:52.940

如果您有一个名为 femaster_master 的母版页，请尝试将其从项目中排除，您应该能够看到它（错误地）引用的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T00:03:42.963

当我升级我的开发机器时，这个错误就开始了。

修复很愚蠢...但问题消失了...只需将其包装在 try catch 块中。我有它在一个财产。

再也没有见过它。

```
Private Function MyMasterPage() As SalesMasterPage
    Try
        Return CType(Page.Master, SalesMasterPage)
    Catch ex As Exception
        'log error
    End Try
End Function 
```

# c++ - 使用索引而不是名称来访问类成员变量

> ID：15837524
> 
> 赞同：1
> 
> 时间：2013-04-05T15:17:10.893
> 
> 标签：c++, database, templates

说我有一堂课：

```
struct CAT
{
    //In order to simplify the problem, supposing the possible 
    // types of member variables are just int,double or string
    int a;
    double b;
    string c;
    int d;
    ....
}; 
```

就我而言，我必须编写一个函数，以便可以使用其索引访问每个成员变量。

例如：

```
CAT cat;
setValue(cat,0,10);
setValue(cat,1,2.1);
setValue(cat,2,"hello");
setValue(cat,3,123);
//or
int i=1;
setValue(cat,i,2.1) 
```

我想到的第一个想法是使用模板：

```
 template<typename T>
    void setValue(CAT &c, int idx, T value)
    {
          if (0 == idx){
              c.a = value;   //compile failure when using setValue(c,2,"hello")
          } else if( 1 == idx){  
              c.b = value;  
          } else if( 2 == idx){  
              c.b = value;   //compile failure when using setValue(c,0,10)
          }
          ...
    } 
```

但由于代码中的注释，它不起作用。

有什么想法吗？

提前致谢。

**修改的：**

我需要编写一个程序将多个表及其记录转换为不同的c结构，例如：表CAT，它的架构是：

```
CAT(a,b,c,d,....) 
```

转换成

```
struct S_CAT  //this is generate automatically by code
{
    int a;
    double b;
    string c;
    int d;
    ...
};

//automatically generate some code to write all records of table CAT to struct S_CAT 
```

生成自动创建 c 结构的代码很容易，但很难生成将记录放入其中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:47:19.190

您可以使用常规方法重载，或提供模板的几个特化：

```
void setValue(CAT &c, int idx, int value) {
    if (0 == idx) {
        c.a = value;
    } else if (3 == idx) {
        c.d = value;
    } else {
        Assert(false, "wrong type for index");
    }
}
void setValue(CAT &c, int idx, double value) {
    if (1 == idx) {
        c.b = value;
    } else {
        Assert(false, "wrong type for index");
    }
}
void setValue(CAT &c, int idx, string value) {
    if (2 == idx) {
        c.c = value;
    } else {
        Assert(false, "wrong type for index");
    }
} 
```

# entity-framework - 如何在 Entity Framework DB first 方法中用具有相同键的另一个实体替换一个实体？

> ID：15837526
> 
> 赞同：4
> 
> 时间：2013-04-05T15:17:11.997
> 
> 标签：entity-framework, modelstate

我首先使用 EF 5 数据库对 MVC 4 Web 应用程序进行编程。我有一些明显微不足道的问题，我找不到合适的解决方案。这些问题与对象状态管理器有关。

在最简单的场景中，一切正常：我使用 Find 从数据库中读取实体，将它们放入视图中，等待响应，重构实体，使用 Attach、EntityState.Modified 和 SaveChanges 将其写回。如果在处理请求时，我再次从数据库中获取实体，则会出现问题。

如果出现以下情况，我会这样做：
1\. 由于某种原因，我想检查原始实体的某些值。
2\. 我的一些值不能被修改，因为它们标识了实体。我将这些放在我的视图中仅供参考，使用 DisplayFor。当然，重构模型没有这些值。我从数据库中获取原始实体，并在控制器中使用 TryUpdateModel 将其与视图中的模型合并。

调用 Attach 时，出现异常“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。”。

如果我使用`Context.Entry(t).CurrentValues.SetValues(t);`而不是`DbSet.Attach(t);`，我会得到以下异常：

`Member 'CurrentValues' cannot be called for the entity of type 'Price' because the entity does not exist in the context. To add an entity to the context call the Add or Attach method of DbSet<Price>.`

据我了解，具有特定键的实体有两个实例。我想做一个我想保存的，替换现在的一个，如果有的话。我希望这是自动的，也就是说，我不必告诉是否已经存在另一个必须更换的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-26T21:49:37.700

同时，我已经开始使用模型优先方法，所以我不太确定以下内容是否适用，但我认为其中一些可能有用。

1.  `someContext.someDbSet.AsNoTracking()`如果您只想查找一些数据，但不打算使用更改来更新数据库，请使用 运行查询。请参阅MSDN 上的[AsNoTracking](http://msdn.microsoft.com/en-us/library/gg679352%28v=vs.103%29.aspx)。
2.  不更新某些模型属性。这将帮助您更新例如用户配置文件，而无需更新存储在同一模型中的散列密码。

    ```
    someContext.someDbSet.Attach(someModelInstance);
    var entry = substanceContext.Entry(someModelInstance);
    entry.State = EntityState.Modified;
    entry.Property("somePropertyToIgnore").IsModified = false;
    substanceContext.SaveChanges(); 
    ```

如果您查看在第二个解决方案中生成的*SQL*，您会注意到字段*somePropertyToIgore*从*SET*子句中省略了。

# python - 文档元素后的垃圾：第 13 行，第 2 列

> ID：15837529
> 
> 赞同：3
> 
> 时间：2013-04-05T15:17:20.217
> 
> 标签：python, xml, django, xml-parsing, django-views

在解析 xml 文件时，我得到以下回溯

```
ParseError at /addxml/
junk after document element: line 13, column 2
Request Method: POST
Request URL:    http://localhost:8000/addxml/
Django Version: 1.3.7
Exception Type: ParseError
Exception Value:    
junk after document element: line 13, column 2
Exception Location: /root/Samples/DemoApp/DemoApp/views.py in addxml, line 98
Python Executable:  /usr/bin/python 
```

这是我的代码

```
if request.POST:
        path = "{0}/app_name/filename.xml".format(settings.PROJECT_ROOT)
        xmlDoc = open(path, 'r')
        xmlDocData = xmlDoc.read()
        xmlDocTree = etree.XML(xmlDocData) 
```

下面的行给出了错误

```
xmlDocTree = etree.XML(xmlDocData)

<book>
    <book_id>101</book_id>
    <book_name>Python</book_name>
    <publisher_name>Maxwell</publisher_name>
    <author_id>1002</author_id>
    <first_name>John</first_name>
    <last_name>Dezosa</last_name>
    <email>john@gmail.com</email>
    <age>34</age>
  </book>
  <book>
    <book_id>102</book_id>
    <book_name>Django</book_name>
    <publisher_name>Technical</publisher_name>
    <author_id>1003</author_id>
    <first_name>Josep</first_name>
    <last_name>Raj</last_name>
    <email>joseph@gmail.com</email>
    <age>29</age>
  </book> 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T15:30:02.227

您没有单个根元素。`book`尝试在每个元素上方添加父级。也许`books`？

```
<books>
  <book> ... </book>
  <book> ... </book>
</books> 
```

如果这无助于尝试查看第 13 行，第 2 列，就像错误消息所暗示的那样。

```
bad_line = xmlDocData.splitlines()[12] 
```

# c++ - 如何清除Heap中动态分配的内存？

> ID：15837535
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:17:33.837
> 
> 标签：c++, visual-studio-2010, pointers, destructor

请看下面的代码

```
#include <iostream>

using namespace std;

class Memory
{
private:
    int *memory;

public:
    Memory()
    {
        memory = new int[3];

        for(int i=0;i<3;i++)
        {
            memory[i] = i;
            cout << memory[i] << endl;
        }
    }

    ~Memory()
    {
        delete[] memory;
    }
};

int main()
{
    cout << "Running" << endl;

    Memory m;
    // do I have to invoke ~Memory() ?

    int *secondMemory = new int[5];
    //How to clear the memory of 'secondMemory' ?

    system("pause");
    return 0;

} 
```

在这里，我已经清除了`memory`类的析构函数中动态分配的数组的内存。但我的问题是

1.  我必须调用 ~Memory() 吗？
2.  如何清除“secondMemory”的内存？

这些问题在代码的适当位置作为注释提出。请帮忙！

**编辑**

这里的问题是，如果我在 main() 中删除了 'secondMemory' 的内存，那么内存一分配就消失了！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T15:18:57.403

> 我必须调用 ~Memory() 吗？

不，具有*自动存储持续时间*的对象（如`m`）在超出范围时会被销毁。换句话说，析构函数是由系统自动调用的。在这种情况下，从函数`m`返回时被销毁。`main()`

> 如何清除“secondMemory”的内存？

每个分配有的对象都`new`必须通过相应的调用销毁`delete`，每个分配有的数组`new[]`必须通过相应的调用销毁`delete[]`：

```
delete[] secondMemory; 
```

不这样做会导致*内存泄漏*。

但是，请记住，在现代 C++中，使用原始指针执行手动内存管理被视为一种**不好的编程习惯。**`std::vector<>`而是尽可能使用标准容器，例如。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T15:19:03.753

> 我必须调用 ~Memory()

不，当对象超出范围时会自动调用析构函数。

> 如何清除“secondMemory”的内存？

采用`delete[] secondMemory;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T15:19:36.373

```
 Memory m;
// do I have to invoke ~Memory() ? 
```

不，这不是动态分配的，因此编译器`m`会在超出范围时为您调用析构函数。在这种情况下，当`main`返回。

```
int *secondMemory = new int[5];
//How to clear the memory of 'secondMemory' ? 
```

这是动态分配的，因此您必须解除分配。

```
delete [] secondMemory; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T15:21:50.673

> 我必须调用 ~Memory() 吗？

当对象超出范围时，`~Memory()`会自动被调用。所以不，您不必做任何事情来手动调用它。

> 如何清除“secondMemory”的内存？

只需使用

```
delete [] secondMemory 
```

`int* secondMemory`因为您使用 new 和 [] 进行了初始化。

# python - 我的 python 脚本通过我的 IDE (PyCharm) 运行，但它不会使用 Python shell 运行

> ID：15837544
> 
> 赞同：1
> 
> 时间：2013-04-05T15:17:45.583
> 
> 标签：python, logging, pycharm

我有一个使用 logging 模块和 configparser 模块的简短 python 脚本。我在 Win7 下使用 PyCharm 2.7.1 和 Python 3.3。

当我使用 PyCharm 运行我的脚本时 - 它可以工作。这是 PyCharm 控制台的输出：

```
C:\Python33\python.exe C:/some/path/script.py

Process finished with exit code 0 
```

我在 cmd 中运行相同的命令，这就是我得到的：

```
C:\>C:\Python33\python.exe C:/some/path/script.py
Traceback (most recent call last):
File "C:/some/path/script.py", line 10
1, in <module>
initLogger()
File "C:/some/path/script.py", line 97, in initLogger
logging.config.fileConfig('RecorderMoverLog.config.ini')
File "C:\Python33\lib\logging\config.py", line 70, in fileConfig
formatters = _create_formatters(cp)
File "C:\Python33\lib\logging\config.py", line 103, in _create_formatters
flist = cp["formatters"]["keys"]
File "C:\Python33\lib\configparser.py", line 942, in __getitem__
raise KeyError(key)
KeyError: 'formatters' 
```

为什么它在 PyCharm 中运行，而在 python shell 下却不能运行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:22:00.297

这很可能是因为您的`PYTHON_PATH`. `sys.path`在您的 Python IDE 和您的 Python in shell 中列出。寻找 Python 库中的差异。

# c - 用于生成随机数的字符设备实现

> ID：15837547
> 
> 赞同：1
> 
> 时间：2013-04-05T15:17:49.837
> 
> 标签：c, makefile, kernel-module, insmod

根据我的学术项目，我当前的任务是使用内核模块生成 10 个随机数，我的用户空间程序（c 程序）应该能够显示这些数字。我一直在学习内核空间和用户空间程序。我遇到了字符设备的创建。我使用这个命令创建了一个设备。

```
mknod /dev/my_device c 222 0 
```

据我了解，该设备是用户空间和内核空间程序之间的中介。所以我创建了一个内核模块来注册和注销我的字符设备。保存为 my_dev.c

```
#include<linux/module.h>
#include<linux/init.h>
#include"my_dev.h"

MODULE_AUTHOR("Krishna");
MODULE_DESCRIPTION("A simple char device");

static int r_init(void);
static void r_cleanup(void);

module_init(r_init);
module_exit(r_cleanup);

static int r_init(void)
{
printk("<1>hi\n");
if(register_chrdev(222,"my_device",&my_fops)){
    printk("<1>failed to register");
}
return 0;
}
static void r_cleanup(void)
{
printk("<1>bye\n");
unregister_chrdev(222,"my_device");
return ;
} 
```

我用于编译此模块的 Make 文件是

```
obj-m += my_dev.o

all:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

该内核模块使用 insmod 命令编译并加载到内存中。

这是一个程序，它向保存为 my_dev.h 的用户缓冲区写入和读取一些文本。

```
/*
 * my device header file 
 */
#ifndef _MY_DEVICE_H
#define _MY_DEVICE_H

#include <linux/fs.h>
#include <linux/sched.h>
#include <linux/errno.h>
#include <asm/current.h>
#include <asm/segment.h>
#include <asm/uaccess.h>

char my_data[80]="heloooo"; /* our device */

int my_open(struct inode *inode,struct file *filep);
int my_release(struct inode *inode,struct file *filep);
ssize_t my_read(struct file *filep,char *buff,size_t count,loff_t *offp );
ssize_t my_write(struct file *filep,const char *buff,size_t count,loff_t *offp );

struct file_operations my_fops={
    open: my_open,
    read: my_read,
write: my_write,
release:my_release,
};

int my_open(struct inode *inode,struct file *filep)
{  
    /*MOD_INC_USE_COUNT;*/ /* increments usage count of module */
return 0;
}

int my_release(struct inode *inode,struct file *filep)
{
/*MOD_DEC_USE_COUNT;*/ /* decrements usage count of module */
return 0;
}
ssize_t my_read(struct file *filep,char *buff,size_t count,loff_t *offp )
{
/* function to copy kernel space buffer to user space*/
if ( copy_to_user(buff,my_data,strlen(my_data)) != 0 )
    printk( "Kernel -> userspace copy failed!\n" );
return strlen(my_data);

}
ssize_t my_write(struct file *filep,const char *buff,size_t count,loff_t *offp )
{
/* function to copy user space buffer to kernel space*/
if ( copy_from_user(my_data,buff,count) != 0 )
    printk( "Userspace -> kernel copy failed!\n" );
return 0;
}
#endif 
```

这是我的用户空间程序`acs.c`，它在运行时通过从上述程序的内核缓冲区读取文本来打印“heloooo”。

```
#include<stdio.h>
#include<unistd.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>

int main()
{
int fd=0,ret=0;
char buff[80]="";

fd=open("/dev/my_device",O_RDONLY);

printf("fd :%d\n",fd);

ret=read(fd,buff,10);
buff[ret]='\0';

printf("buff: %s ;length: %d bytes\n",buff,ret);
close(fd);
} 
```

现在我的问题是我需要编写一个用户空间程序，它在运行时会打印 10 个随机数。但是这些数字应该使用内核模块生成。所以基本上以上三个代码都可以正常工作并打印 "helooo" 。我需要做的是而不是“helooo”，我需要获取随机数作为输出。

这是一个内存模块，它使用线性同余生成器算法生成一些随机数。`LCG.c`

```
#include <linux/module.h>   /* Needed by all modules */
#include <linux/kernel.h>   /* Needed for KERN_INFO */

int init_module(void)
{
int M = 8;  //Modulus,    M>0
    int a = 9;  //Multiplier, 0 <= a < M.
    int c = 3;  //Increment,  0 <= c < M.
    int X = 1;  //seed value, 0 <= X(0) < M
    int i;      //iterator,   i < M 
    for(i=0; i<8; i++)
    {
            X = (a * X + c) % M;
            printk(KERN_INFO "%d\n",X);

    }
    return 0;
}
void cleanup_module(void)
{
printk(KERN_INFO "Task Done ! :D.\n");
} 
```

我有所有的代码。但我不知道如何将这个随机数生成器代码放入我的字符设备调用代码中。当我运行程序 acs.ci 时，需要`LCG.c`通过使用字符设备来获取内存模块的输出。请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:02:43.480

尝试这些更改，我刚刚添加了更改：

重构`LCG.C`以便随机数生成器是一个单独的函数，并确保该函数**不是静态**的。您还应该需要导出此 SYMBOL。

```
void generate_random_lcg(char* output_str)
{
    static const int M = 8;  //Modulus,    M>0
    static const int a = 9;  //Multiplier, 0 <= a < M.
    static const int c = 3;  //Increment,  0 <= c < M.
    static int X = 1;  //seed value, 0 <= X(0) < M

    int i;      //iterator,   i < M 
    ssize_t index = 0;
    for(i=0; i<8; i++)
    {
        X = (a * X + c) % M;
        index += sprintf(output_str + index, "%d\n", X);
    }
    output_str[index] = '\0';
}

EXPORT_SYMBOL(generate_random_lcg); 
```

这样，LCG 模块可以直接调用该函数，也可以从外部调用该函数。

现在要从您的模块 my_dev 调用此函数并返回输出，您需要进行以下更改：

**my_dev.c**：

```
static int r_init(void)
{                                                                 
    printk("<1>hi\n");
    if(register_chrdev(222,"my_device",&my_fops)){                
            printk("<1>failed to register");                      
    }  

    memset(output_str, 0, MAX_SIZE);                              

    return 0;                                                     
} 
```

在**my_dev.h**

```
extern void generate_random_lcg(char* output_str);

#define MAX_SIZE 1024
static char output_str[MAX_SIZE];

ssize_t my_read(struct file *filep,char *buff,size_t count,loff_t *offp )
{
    ssize_t output_str_size = 0;
    generate_random_lcg(output_str);
    output_str_size = strlen(output_str);
    /* function to copy kernel space buffer to user space*/
    if (copy_to_user(buff,output_str,output_str_size) != 0 )
    {
        printk( "Kernel -> userspace copy failed!\n" );
        return 0;
    }   
    return output_str_size;
} 
```

要记住的几件事：

*   根据您的需要更新 MAX_SIZE 的值。如果数字变得非常大，您可以考虑使用 kmalloc 来获取内存。
*   在 .h 文件中定义函数实现是一种非常糟糕的编码实践，内联函数除外。
*   当`copy_from_user`或`copy_to_user`失败时返回`0`而不是来自 的输出`strlen`。

以上只是一个非常粗略的实现，在使用 sprintf 打印字符串时，您可能还需要额外的检查来检查缓冲区溢出。

# javascript - 圆角谷歌地图信息窗口

> ID：15837554
> 
> 赞同：0
> 
> 时间：2013-04-05T15:18:08.287
> 
> 标签：javascript, google-maps-markers, infowindow

如何在具有圆角的谷歌地图中制作信息窗口？它尝试使用 InfoBubble，但在 IE 中不起作用，并且与锚点一起使用也不好。有人有什么建议吗？

# scala - 如何在 scala 中等待异步任务完成？

> ID：15837561
> 
> 赞同：18
> 
> 时间：2013-04-05T15:18:24.250
> 
> 标签：scala, asynchronous, map, future

我知道我的问题可能看起来有点复杂。但我会努力表达自己。

我有这个方法，我想返回一个`Map[String, List[String]]`填充数据。

```
def myFunction():Map[String, List[String]] = {

  val userMap = Map[String, String](("123456", "ASDBYYBAYGS456789"),
                                    ("54321", "HGFDSA5432"))

  //the result map to return when all data is collected and added
  val resultMap:Future[Map[String, List[String]]]

  //when this map is finished (filled) this map is set to resultMap
  val progressMap = Map[String, List[String]]()

  for(user <- userMap){

     //facebook graph API call to get posts.
     val responsePost = WS.url("async get to facebook url").get()

     responsePosts.flatMap { response => 
        val jsonBody = response.json
        val dataList = List[String]()

        for(i <-0 until 5){

           //parse the json-data to strings
           val messages = (jsonBody.\("statuses").\("data")(i).\("message"))
           val likesArray = (jsonBody.\("statuses").\("data")(i).\\("data")).flatMap(_.as[List[JsObject]])
           val likes = likesArray.length

           //Put post with likes in temporary list
           dataList ::=  ("Post: " + message.toString + " Likes: " + likes.toString)
        }  

           //facebook graph API call to get friends.
           val responseFriends = WS.url("async get to facebook url").get()

           responseFriends.map { response =>
               val jsonBody = response.json
               val friendCount = jsonBody.\("data")(0).\("friend_count").toString

               //add "Friends: xxx" to the dataList and add the new row to resultMap containig a list with post and friends.
               dataList ::= ("Friends: " + friendCount)
               progressMap += user._1 -> dataList

               //check if all users has been updated
               if(progressMap.size == userMap.size){
                  resultMap = progressMap
               }
            }
       }
    }

    //return the resultMap.
    return resultMap
 }
} 
```

我的代码可能不是用最佳语法编写的。

但我想要的是用数据返回这个 resultMap。我的问题是，由于`"get to facebook url"`是异步完成的，所以这个 resultMap 返回为空。我当然不希望这是空的。

到目前为止，我方法中的这段代码是我的解决方案。显然，它不起作用，但我希望你能看到我正在尝试做的事情。即使您不确定，也可以随意回答您的想法，这可能会让我走上正轨。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-05T15:21:55.920

使用`scala.concurrent.{Future, Promise}`：

```
def doAsyncAction: Promise[T] = {
  val p = Promise[T]
  p success doSomeOperation
  p
}

def useResult = {
   val async = doAsyncAction;
   // The return of the below is Unit.
   async.future onSuccess {
      // do action.
   };
}; 
```

另一种方法是`Await`结果。（这是一个阻塞动作）。

需要返回结果时使用

```
import scala.concurrent.{ ExecutionContext, ExecutionContext$, Future, Promise, Await }
import scala.concurrent.duration._

def method: Option[T] = {
   val future: Future[T] = Future {
       someAction
   }
   val response = future map {
       items => Some(items)
   } recover {
       case timeout: java.util.concurrent.TimeoutException => None
   }
   Await.result(future, 5000 millis);
}; 
```

小心在它们自己的执行器中执行阻塞期货，否则你最终会阻塞其他并行计算。

# mysql - mysql : 3 个或更多 SELECT 的结果之间的交集

> ID：15837564
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:18:30.793
> 
> 标签：mysql, join, intersect

好的，假设我们有 3 个或更多，比如说“k”个具有相同结构的表：
表 1：

```
id customer_id
1  35
2  36
3  37 
```

表2：

```
id customer_id
1  35
2  38
3  39 
```

...
表k：

```
id customer_id
1  35
2  69
3  52 
```

我如何选择所有表中存在的所有 customer_id（换句话说：交叉点），在这个例子中，如果有 3 个表，结果应该是这样的

```
id customer_id
1  35 
```

如果有人可以提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:59:47.243

```
create table dela (
    id int
);
create table delb (
    id int
);
create table delc (
    id int
);

drop table dela;

insert into dela values (1),(2),(3);
insert into delb values (5),(4),(3);
insert into delc values (5),(1),(3);

select 
    a.id
from
    dela a
        join
    delb b ON a.id = b.id
        join
    delc c ON a.id = c.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:21:57.390

```
SELECT t1.customer_id
FROM `table 1` AS t1
INNER JOIN `table 2` AS t2 ON t1.customer_id = t2.customer_id
-- ...
INNER JOIN `table k` AS tk ON t1.customer_id = tk.customer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:25:38.043

尝试这个 ：

```
SELECT 
    customer_id
FROM (
    SELECT
        customer_id
        1 as counter 
    FROM 
        table1

    UNION ALL 

    SELECT
        customer_id
        1 as counter 
    FROM 
        table2

    ....

    SELECT
        customer_id
        1 as counter 
    FROM 
        tablek

) as tmp
GROUP BY
    customer_id
HAVING
    SUM(counter) = k 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:22:35.440

这应该有效：

```
SELECT table1.id, table1.customer_id
FROM table1, table2, ..., tableK
WHERE table1.id=table2.id
AND table1.id=table3.id
...
AND table1.id=tableK.id 
```

为简单起见，您还可以为每个表定义别名：

```
FROM table1 a, table2 b, ..., tableK k
WHERE a.id=b.id 
```

# jquery - Greasemonkey facebook 内容操作

> ID：15837566
> 
> 赞同：0
> 
> 时间：2013-04-05T15:18:36.203
> 
> 标签：jquery, greasemonkey

目标很简单。Facebook 不允许 gif 动画，我想要实现的是从 facebook 墙上上传图像（gif），它将更改为 jpg 并出现在墙上。真正的 gif 网址将添加到评论中。目标是有一个带有 jquery 的greasemonkey 脚本，从评论中获取a href 属性并将其设置为图像的src。

到目前为止，我的代码是，

```
$("li>div.timelineUnitContainer")      
                    $("div.uiCommentContainer")
            var src = $a.attr("href");
                    unsafeWindow.console.log(src);
$('li>div.uiScaledImageContainer>photoUnit').has("img.img").attr('src',src); 
```

我无法让 firebug 控制台在第 4 行显示日志。

谢谢你的时间。

编辑，我让它工作了，但这需要图像的宽度，

```
 var src = $("li>div.timelineUnitContainer div.uiCommentContainer [href]");
        var thumbObj = $('.uiScaledImageContainer.photoWrap').find('.img');
        var i;
        thumbObj.each(function() {
        var height = $(this).height();

        if (height==201)
        {
            $(this).attr('src',src[5]);

        }

        }); 
```

# jpa - 将 JPA 实体用作域模型是一种好习惯吗？

> ID：15837567
> 
> 赞同：14
> 
> 时间：2013-04-05T15:18:38.987
> 
> 标签：jpa, domain-driven-design

还是创建一个由域模型组成的域层并与 JPA 实体对话以进行数据库访问？两种方法的优缺点是什么？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T12:17:19.347

这确实取决于您如何对域进行编码。

一般来说（在 Java 中）我更喜欢创建一组单独的 JPA 注释 DTO 来处理持久性。此类 DTO 将匹配 db 表，并将在自定义存储库中使用

*   将向客户端公开语义 API
*   将对此类 DTO 运行查询
*   将使用工厂初始化域对象以返回给客户端

这种方法使域模型真正与 db 模式解耦，这样您就可以独立地发展两者。这种方法的缺点是您要编写更多代码，但我发现编写维护这样的代码非常容易且便宜。

在实体上使用 JPA 注释是一种非常常见的方法，但是随着域模型的发展和变得更加复杂，我自己的经验是，您必须面对比其他解决方案更昂贵的问题。

# vb.net - 将未修改的文件复制到文件夹后删除

> ID：15837568
> 
> 赞同：0
> 
> 时间：2013-04-05T15:18:41.250
> 
> 标签：vb.net, visual-studio-2010

如您所见，以下代码将提取我的“CopierFolderforTestDriveCapstone”文件夹中的所有文件，并将所有文件放入我的“FilesExtracted”文件夹中。我的问题是在所有文件都放入“FilesExtracted”文件夹之后，如何删除所有最近未修改的文件。我只想保留在过去几个月中修改过的文件，或者去年任何一个都可以弄清楚。谢谢 ：）

导入系统.IO

公共类 frmExtractionator

```
Dim txtFiles1 As Control

Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

    Dim sourceDirectory As String = "E:\CopierFolderforTestDriveCapstone"
    Dim archiveDirectory As String = "E:\FilesExtracted"

    Try
        Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

        If (Not System.IO.Directory.Exists(archiveDirectory)) Then
            System.IO.Directory.CreateDirectory(archiveDirectory)
        End If

        For Each currentFile As String In txtFiles
            Dim fileName = currentFile.Substring(sourceDirectory.Length + 1)
            File.Move(currentFile, Path.Combine(archiveDirectory, fileName))
        Next
    Catch eT As Exception
        Console.WriteLine(eT.Message)
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:32:28.257

您可以使用[DirectoryInfo](http://msdn.microsoft.com/en-us/library/8s2fzb02.aspx)类和[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类来获取有关连接到文件的各种时间属性的信息

```
Try
    Dim di As DirectoryInfo = new DirectoryInfo(sourceDirectory)
    Dim fi as FileInfo() = di.GetFiles()
    .....

    For Each currentFile As FileInfo In fi
        File.Move(currentFile.FullName, Path.Combine(archiveDirectory, currentFile.Name))

        Dim dt As DateTime = currentFile.LastWriteTime
        ' Add 3 months to the last write and check if it is less than today '
        if dt.AddMonths(3) < DateTime.Today then 
            File.Delete(currentFile.FullName)
        End If
    Next
Catch eT As Exception
    Console.WriteLine(eT.Message)
End Try 
```

# symfony - 检查定义是否有方法，添加（或不）方法调用？

> ID：15837573
> 
> 赞同：2
> 
> 时间：2013-04-05T15:18:55.347
> 
> 标签：symfony, symfony-2.1

在我的 Bundle 扩展中，我将方法调用（基于配置动态地）添加到我的服务定义中`my.service`：

```
/**
 * {@inheritdoc}
 */
public function load(array $configs, ContainerBuilder $container)
{
    // ...

    // Get the defintion
    $definition = $container->getDefinition('my.service');

    // Dynamically add method calls to the definition
    foreach($config['options'] as $name => $value) {
        $definition->addMethodCall('set'.ucfirst($name), array($value));
    }

    // ...
} 
```

如果定义中不存在该方法，我不想**调用。`addMethodCall`**有没有办法检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:28:58.150

如果您的服务类具有这些方法的定义，我假设您只想在服务类上添加方法调用

```
$serviceMethods = get_class_methods($definition->getClass());
//loop on your added methods

$method = 'set'.ucfirst($name);
if(in_array($method, $serviceMethods))
{
    $definition->addMethodCall($method, array($value));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:26:38.580

你不能用..

```
$class = $definition->getclass(); 
```

然后在添加之前检查该方法是否存在..

```
foreach($config['options'] as $name => $value) {
    $method = 'set'.ucfirst($name);

    if (method_exists($class, $method)
    {
        $definition->addMethodCall('set'.ucfirst($name), array($value));
    }
} 
```

# php - 我应该如何从同一个变量中的前一个值中减去？

> ID：15837575
> 
> 赞同：1
> 
> 时间：2013-04-05T15:19:03.163
> 
> 标签：php

**问题**

我面临的问题是无法动态地从 expected_weight 中减去损失。我希望更改 expected_weight 直到 play_dates 计数完成。请参考预期输出。提前致谢！

**代码：**

```
echo "<pre>";
        $benchmark = 96.5; //The first weight from which a person commits to lose their weight every week.
        $lose = 10; //Percentage of how much they commit to lose
        $lose_weight = ($benchmark/100)*$lose; //This gives how much they should lose every week to meet the target

        while($row_teams = mysql_fetch_assoc($result_select_teams)){
            echo"   {<br />";
            echo"       benchmark ==> ".$benchmark." Kg<br />";
            echo"       loss% ==> ".$lose."%<br />";
            echo"       lose_weight ==> ".$lose_weight." Kg<br /><br />";
            echo"       my_teams ==> ".$row_teams['t_name']."<br /><br />";
            $playing_dates = $row_teams['playing_dates'];
            $playing_dates = explode('|', $playing_dates);

            $date = date('Y');
            $noofweighins = count($playing_dates);
            echo"       noofweighins ==> ".$noofweighins."<br /><br />";
            $lose_atleast = round($lose_weight/$noofweighins, 2);
            $expected_weight = 0;
                for($k=0; $k<count($playing_dates);$k++){
                    $expected_weight = $benchmark - $lose_atleast;
                    if(substr($playing_dates[$k], -4)<=$date){
                        echo"       my_playing_dates ==> ".$playing_dates[$k]." to lose ==> ".$lose_atleast."<br />";
                        echo"       Expected weight ==> ".$expected_weight."<br /><br />";
                    }
                }
            echo"   }<br />";
        }
    }
    echo "</pre>"; 
```

**输出**

```
benchmark ==> 96.5 Kg
        loss% ==> 10%
        lose_weight ==> 9.65 Kg

        noofweighins ==> 10

        my_playing_dates ==> 16/02/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 18/02/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 13/03/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 20/03/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 27/03/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 03/04/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 10/04/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 17/04/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 24/04/2013 to lose ==> 0.965
        Expected weight ==> 95.535

        my_playing_dates ==> 01/05/2013 to lose ==> 0.965
        Expected weight ==> 95.535 
```

**预期产出**

```
benchmark ==> 96.5 Kg
        loss% ==> 10%
        lose_weight ==> 9.65 Kg

        noofweighins ==> 10

        my_playing_dates ==> 16/02/2013 to lose ==> 0.965
        Expected weight ==> 95.535 (96.5 - 0.965)

        my_playing_dates ==> 18/02/2013 to lose ==> 0.965
        Expected weight ==> 94.57 (95.535 - 0.965)

        my_playing_dates ==> 13/03/2013 to lose ==> 0.965
        Expected weight ==> 93.605 (94.57 - 0.965)

        my_playing_dates ==> 20/03/2013 to lose ==> 0.965
        Expected weight ==> 92.64 (93.605 - 0.965)

        my_playing_dates ==> 27/03/2013 to lose ==> 0.965
        Expected weight ==> 91.675 (92.64 - 0.965)

        my_playing_dates ==> 03/04/2013 to lose ==> 0.965
        Expected weight ==> 90.71 (91.675 - 0.965)

        my_playing_dates ==> 10/04/2013 to lose ==> 0.965
        Expected weight ==> 89.745 (90.71 - 0.965)

        my_playing_dates ==> 17/04/2013 to lose ==> 0.965
        Expected weight ==> 88.78 (89.745 - 0.965)

        my_playing_dates ==> 24/04/2013 to lose ==> 0.965
        Expected weight ==> 87.815 (88.78 - 0.965)

        my_playing_dates ==> 01/05/2013 to lose ==> 0.965
        Expected weight ==> 86.85 (87.815 - 0.965) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:26:04.407

我真的不了解 PHP 或任何东西，我只是略读了您的代码，但是如果您更改`$expected_weight = $benchmark - $lose_atleast;`为`$expected_weight = $expected_weight - $lose_atleast;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:26:20.670

期望的结果是： `Expected weight ==> 87.815 (88.78 - 0.965)`

虽然 `$benchmark = 96.5;`始终保持不变。

其公式为： `$expected_weight = $benchmark - $lose_atleast;`

看来您必须`$benchmark`循环更改才能获得所需的结果。

# razor - 如何在不编码的情况下在 url helper 中使用特殊字符？

> ID：15837581
> 
> 赞同：1
> 
> 时间：2013-04-05T15:19:13.990
> 
> 标签：razor, asp.net-mvc-4, angularjs, angularjs-ng-repeat

我正在使用 ng-repeat 来显示中心表。对于每个中心，我想提供一个使用角度数据的编辑按钮：

```
 <table data-ng-init="centers" data-ng-model="Centers">
        <tr data-ng-repeat="center in centers">
            <td class="center-logo">
            </td>
            <td class="center-name">
                <h4>{{center.Name}}</h4>
            </td>
            <td class="center-address">{{center.City}}, {{center.Country}}
            </td>
            <td>{{center.StudyVersion}}</td>
            <td>
                <a href="@Url.Action("Edit","Center",new {code = {{center.Code}}})" class="btn">
                    <i class="icon-edit"></i>Edit
                </a>
            </td>
        </tr>
    </table> 
```

现在 VS 在表达式上给我一个错误：

```
@Url.Action("Edit","Center",new {code = "{{center.Code}}"}) 
```

我似乎无法找到一种方法，因此 razor 使用 {{center.Code} 中的值，就像在纯 html 中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:50:13.637

**编辑：** `@Html.Raw()`不需要最初的答案。抱歉我说得太早了。答案已编辑以反映这一点。

以下对我有用：

```
<a href='@Url.Action("Edit","Center")/code={{center.Code}}' class="btn">
    <i class="icon-edit"></i>Edit
</a> 
```

希望有帮助。

# c++ - 用 C++ 类编译 cython 并获得未定义的符号

> ID：15837583
> 
> 赞同：1
> 
> 时间：2013-04-05T15:19:21.253
> 
> 标签：c++, cython

我试图用 cython 包装一个 C++ 类，它可以编译，但是当我导入扩展时，我得到了

```
ImportError: ./svd.so: undefined symbol: _ZTI5model 
```

这是 C++ 头文件：

首先，“model.h”，model是svd的基类。

```
// model.h
#ifndef MODEL_H_
#define MODEL_H_

#include "common.h"
#include "Data.h"
class model {
protected:
    Data data;
public:
    model(Data& data);
    virtual float predict(uint uid, uint mid);
    // evaluate using testset and return final RMSE
    virtual float evaluate();
    // put predictions to file
    void output(string filename);
    virtual void onestep();
    virtual ~model();
};

#endif /* MODEL_H_ */ 
```

然后svd.h，svd继承自模型。

```
// svd.h
#ifndef SVD_H_
#define SVD_H_
#include "../common.h"
#include "../model.h"
#include "../Data.h"
#define K_NUM 50

namespace SVD{

class svd : model {

public:
    svd(Data &data);
    void init(uint max_step, float alpha1, \
              float alpha2,  float beta1, float beta2); 
    float predict(UidType uid, ItemType mid);
    float evaluate();
    void onestep();
    ~svd();
}; // end class svd

void initModel(uint max_step, float alpha1, float alpha2,  float beta1, float beta2);

};// end namespace svd

#endif /* SVD_H_ */ 
```

最后，pyx 文件

```
# distutils: language = c++
# distutils: sources = ../model.cpp ../models/svd.cpp ../common.cpp ../Data.cpp ../model.cpp

cdef extern from "../models/svd.h" namespace "SVD":
    cdef cppclass svd:
        pass 
```

和我的 setup.py 文件

```
from distutils.core import setup
from Cython.Build import cythonize

setup(ext_modules = cythonize(
   ["svd.pyx"],                 # our Cython source
   language="c++",             # generate C++ code
)) 
```

我认为符号“模型”可能是 svd 的基类，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:49:10.703

您必须为基类中的虚拟方法提供一个实现，或者（如果该类应该是抽象的）将它们声明为纯的。参见例如[这个问题](https://stackoverflow.com/questions/1693634/undefined-symbols-vtable-for-and-typeinfo-for)。

# amazon-web-services - 对于 boto 返回的 HIT，HIT 实例没有属性“标题”

> ID：15837586
> 
> 赞同：0
> 
> 时间：2013-04-05T15:19:27.910
> 
> 标签：amazon-web-services, boto, mechanicalturk

我正在使用该`boto`库来玩弄 Amazon MTurk。我想检索一些可审查的 HIT，并显示它们的属性。例如：

```
hits = self.mturk_conn.get_reviewable_hits(page_size=30, status='Reviewable', sort_by='Expiration', sort_direction='Ascending', page_number=1)

for h in hits:
    print '%s: %s' % (h.HITId, h.Title) 
```

我确实设法得到，但由于某种原因，我得到这个错误消息`HITId`时无法得到：`Title`

```
AttributeError: HIT instance has no attribute 'Title' 
```

查看 AWS API ( [http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_HITDataStructureArticle.html](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_HITDataStructureArticle.html) ) 表明该属性应该存在。实际上，如果我通过`get_hit`的方法获得单个 HIT `boto`，则`Title`属性存在。为什么这对方法返回的 HIT 不起作用`get_reviewable_hits`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:07:18.623

查看[您正在调用的实际操作](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_GetReviewableHITsOperation.html)的示例响应。

而单个[GetHIT 调用](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_GetHITOperation.html)返回完整的 HIT 数据结构。

[正如您在 HIT 数据结构的文章](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_HITDataStructureArticle.html)中所见，并非所有属性都是必需的。

这取决于您进行的 API 调用，HIT 响应对象具有哪些属性。（令人困惑，对吧！？）

在这种情况下，您实际上必须调用`GetReviewableHITs`，然后使用返回的 HITId`GetHIT`来获取包含该`Title`属性的完整结构。

顺便说一句，您可以使用[我的 Python mTurk API](https://github.com/ctrlcctrlv/mturk-python)而不是使用 Boto ，它使用 API 文档中的确切名称 :)

# javascript - 使用 PhantomJS 运行复合测试

> ID：15837588
> 
> 赞同：0
> 
> 时间：2013-04-05T15:19:30.147
> 
> 标签：javascript, testing, phantomjs, headless

我想在整个域上自动化一些技术测试。这些测试可以是加载速度、Yslow 等级、Js 错误、响应状态代码检查……我成功创建了一个抓取给定域的所有 url 的蜘蛛脚本，但是今天我在实现这些测试时遇到了一些问题。

基本上，假设您想从未知的 url 列表中获取已知的指标列表。您将如何实现这一目标？

从我的角度来看，我有两个选择：

*   为每个测试创建一个模块并为父脚本中的每个 url 调用它们

    这可能是正确的，但是某些脚本是开源的，例如 yslow.js ：不确定我是否能够转换它们并且它们将不再可运行（因为模块）

*   使用新的子进程模块（execFile 或 spawn）重新调用 phantomjs

    我将失去对执行的控制，并且肯定会出现性能问题。

可能我的理解不正确。脚本是否仅限于对唯一 url 的单个操作？我可以在网络上看到的每个示例总是针对一个（或静态列表）url。

我知道 PhantomJS 不是一个测试框架，它仅用于通过合适的测试运行程序启动测试。也许我正在尝试用 Phantom 做很多事情，我应该尽量保持脚本尽可能简单。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:35:31.970

首先 - 您可能想研究 CasperJS。它运行在 Phantom 之上，使得将事件链接在一起变得更容易。

其次 - 似乎您可以将所有指标脚本设置为按顺序运行，然后将其包装在 for 循环中，并将 URL 列表传递到该循环中。

```
urls = ['www.google.com', 'www.yahoo.com', 'www.bing.com'];

for each(url in urls) {
    phantom.load(url, function(page) {
        runMetrics(page);
    }
} 
```

这有点伪代码，但这样的东西会起作用吗？

# jquery - 如何实现 SlitSlider jQuery 插件

> ID：15837598
> 
> 赞同：1
> 
> 时间：2013-04-05T15:19:45.717
> 
> 标签：jquery, slideshow, carousel

我正在尝试实现[SlitSlider 轮播](http://tympanus.net/Tutorials/FullscreenSlitSlider/)，但严重缺乏文档，因此我遇到了麻烦。

有没有人成功使用过这个？我不断得到`TypeError: self._init is not a function`

代码可以在[gitub上找到](https://github.com/codrops/SlitSlider)

到目前为止我的代码：

```
function initiate() {
        var $slider = $('ul.slider');

        $slider.slitslider({
            autoplay: true,
            interval: 1000
        });
} 

initiate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T20:21:03.240

我刚刚在我的网站上实现了这个滑块并努力让它工作。如果没有看到您的完整代码，很难说出它为什么不适合您。但我确实认为需要在页面上非常具体地调用脚本，如下所示：

```
S(document.ready(function(){
    var loaded = false;        
    $(window).on('load resize',function(){
        loaded = true;            
        var Page = (function() {
            slitslider = $('ul.slider').slitslider({
                autoplay: true,
                interval: 1000
                }
            }),
            init = function(){
                initEvents();
            },
            initEvents = function(){
                // add your custom navigation events here
            };
            return {init:init};
        }) ();
        Page.init();
    });
}); 
```

我包含了 $(window).on('load resize') 函数来防止从 FOUC 中的slitslider CSS 元素。希望这可以帮助！

这是我的网站，完全实现了全屏slitslider：http: [//www.estherlee.co](http://www.estherlee.co)

# android - 在 Android 上调整（缩小）图像大小时如何避免像素化？

> ID：15837600
> 
> 赞同：0
> 
> 时间：2013-04-05T15:19:58.710
> 
> 标签：android, image-processing

我们正在将使用相机拍摄的照片调整为大约 1024x768 以供上传。在大多数 Android 设备上，我们的代码可以正常工作，但在某些设备上却不行（例如 Motorola Photon 4G、Galaxy Nexus、Motorola Droid X2）。

我们正在使用这里的代码：[https ://stackoverflow.com/a/9234895/679339](https://stackoverflow.com/a/9234895/679339)

但是当它不起作用时，调整大小的图像如下所示：![像素化](https://i.stack.imgur.com/xr3dc.jpg)

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:21:47.150

Android 根据运行设备的像素密度调整图像大小。您需要获取设备的显示尺寸和密度，以便了解 Android 将根据尝试将图像放入的视图对您的照片执行什么操作

# java - java中的异常SQL异常，使用derby数据库

> ID：15837602
> 
> 赞同：1
> 
> 时间：2013-04-05T15:20:09.993
> 
> 标签：java, sql, derby

下面是我用来从数据库中获取值的代码：

```
try {

  Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
  connect = DriverManager
      .getConnection("jdbc:derby://localhost:1527/TedW;user=x;password=x;");
  PreparedStatement statement = connect
      .prepareStatement("SELECT * FROM USER");

  resultSet = statement.executeQuery();
  while (resultSet.next()) {
    String user = resultSet.getString("Username");
    String password = resultSet.getString("Password");
    System.out.println("User: " + user);
    System.out.println("ID: " + password);
  }
} catch (Exception e) {
  System.out.println(e);
} 
```

问题是当我运行它时它显示异常：

```
java.sql.SQLSyntaxErrorException: Syntax error: Encountered "USER" at line 1, column 15. 
```

我看到表名“USER”有一些问题。我在创建数据库时看到了它。在德比是 amde。下面是代码：

```
CREATE TABLE "USER"
(
"Id" INT not null primary key generated always as identity (START WITH 1, INCREMENT BY 1),
"Username" VARCHAR(20) NOT NULL,
"Password" VARCHAR(20) NOT NULL

); 
```

我可能在哪里错了？我错过了什么吗？我可以对此有所了解吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:25:40.237

`USER`是一个保留关键字，你不能这样命名你的表。[在这里](http://db.apache.org/derby/docs/10.1/ref/rrefkeywords29722.html)检查。

# sql-server - SQL Server 2008R2：“DELETE FROM”永远挂起，但“SELECT”工作正常

> ID：15837603
> 
> 赞同：2
> 
> 时间：2013-04-05T15:20:12.663
> 
> 标签：sql-server, database, sql-server-2008-r2, delete-row, table-locking

无论如何，我都不是 DBA，所以我迷失了这一点。我有一张有 152,000 行的表。我正在尝试执行此语句：

`DELETE FROM FILES WHERE Asset_Id = 340`

它永远挂在查询窗口中——只是说“正在执行查询......”。此语句工作正常：

`SELECT * FROM FILES`

我还有一份我尝试过删除语句的数据库副本，它在不到几秒钟的时间内运行，没有任何问题。所以那张桌子肯定有什么问题。这里可能发生了什么？它影响了我的网络应用程序中的功能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:30:15.617

听起来你需要一个 Asset_Id 的索引。

# sql - 长时间运行的存储过程的性能影响

> ID：15837604
> 
> 赞同：0
> 
> 时间：2013-04-05T15:20:13.110
> 
> 标签：sql, sql-server, performance, stored-procedures, long-running-processes

我需要调用一个存储过程，每次调用 SQL Server 2008 数据库最多需要 15 分钟。

是否会对访问同一数据库/数据库服务器的其他系统造成性能影响？如果是这样，我怎样才能最大限度地减少对性能的影响？

更新：存储过程比较审计历史记录，它需要根据记录的类型调用另一个存储过程，因此必须逐行完成。我可以将光标更改为 while 循环，但是可能有超过 300 万行要处理（取决于过滤条件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:44:05.290

我通常可以通过将连接与需要处理的 ID 列表一起使用来避免不使用游标。您的游标查询通常可以用作 WITH 子句或内部连接，以在执行处理的语句中选择要处理的行。

但请先检查索引。这是查询缓慢的最不利原因。至少应该索引 where 子句中的每一列和连接中的所有 ON 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:20:07.793

我们的服务器也有类似的问题。我的经验是SQL server 是相当资源密集型的应用程序，如果你有这样的sp，它会对服务器的性能产生巨大的影响。

您可以检查以下几项以提高 sp 的性能或减少资源的使用：

1，运行查询分析器检查是否缺少索引，如果有，请添加它们。

2、如果使用temp表，尽量不要使用。SQL Server 对每个数据库都使用 Tempdb，如果您在 sp 中大量使用它，当它运行时，它将阻止其他使用临时表的查询。或者，您可以使用 cte。

3、redo你sp变小，也许你可以把它分成几个更小的可以并行运行的。

4，这是有线的。如果给sp传递参数，在sp中，将这些参数赋值给局部变量，并在sp中使用这些变量，而不是参数。SQL 服务器使用局部变量生成更好的执行计划。你会看到巨大的速度提升和。你不会相信的。

如果您可以发布sp，我很乐意帮助您更快地制作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:25:43.987

查看 proc 处于活动状态时服务器上的 CPU 活动。如果您知道如何使用 PerfMon，您也可以查看一些 SQL Server 计数器。

我会说 15 分钟的查询可能是优化的候选者。确保您拥有所有必要的索引并避免使用游标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:41:11.120

选项 1\. 按原样运行，但这很可能会导致性能问题。

选项 2。如果可能的话，返工查询以提高性能。除非你的 SQL 写得不好，或者你只是在处理大量数据，否则肯定不会花费 15 分钟。也许发布SQL？

选项 3。正如您所提到的，您可以在 .NET 中完成这项工作。

# android - 两个 AsyncTask 不能同时更新屏幕

> ID：15837605
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:20:17.770
> 
> 标签：android, multithreading, android-asynctask

我有两个异步任务。其中之一是每秒更新标题栏的一部分。在我启动其他异步任务（每秒更新其他屏幕元素）之后，第一个仍然运行，但无法更新屏幕。我在 onProgressUpdate() 上调用 UI 的东西。没有抛出异常。一切都可以单独工作。仅在同时发生时出现问题。我不懂为什么。我确实使用 API 8 **(FROYO)**。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:24:49.510

首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。**从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。**

**如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])**。

有关更多信息，请查看下面的链接。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

[https://github.com/vitkhudenko/test_asynctask](https://github.com/vitkhudenko/test_asynctask)。用于测试和使用的 asynctask 示例

作为替代方案，您可以使用 RoboSpice。可以处理多个香料请求。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

编辑：检查下面的链接，有关于该主题的很好的解释。

[同时运行多个 AsyncTask —— 不可能吗？](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible)

```
void startMyTask(AsyncTask asyncTask) {
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    asyncTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
else
    asyncTask.execute(params);
 } 
```

[http://developer.android.com/reference/java/util/concurrent/Executor.html](http://developer.android.com/reference/java/util/concurrent/Executor.html)

# c# - DateTime.Value.ToString(format) 给了我 12 小时制

> ID：15837609
> 
> 赞同：20
> 
> 时间：2013-04-05T15:20:57.113
> 
> 标签：c#

[这个](https://stackoverflow.com/questions/15809099/no-datetime-tostringstring-overload)问题的扩展，我从数据库中提取日期并将其显示在网格中。

我有以下代码：

```
string date = "";
DateTime? dateSent;    

if (row["DateSent"] != DBNull.Value)
                    dateSent = (DateTime)row["DateSent"];
                else dateSent = null;

date = (dateSent.HasValue ? dateSent.Value.ToString("dd/MM/yyyy hh:mm:ss") : null); 
```

当我在这段代码的末尾添加断点时，我可以看到`DateTime?`变量“dateSent”具有 24 小时制时间戳，例如 14:50:34。但是，当我检查`string`变量“日期”的值时 - 它具有 12 小时制格式，例如 02:50:34。

我不打算转换为 12 小时制格式。我有两个问题：

1.  为什么 dateSent.Value.ToString("dd/MM/yyyy hh:mm:ss") 返回 12 小时时钟时间戳？
2.  如何避免这种情况并使用 24 小时制版本？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-05T15:22:25.237

> 为什么 dateSent.Value.ToString("dd/MM/yyyy hh:mm:ss") 返回 12 小时时钟时间戳？

因为你要求它。就是这个`hh`意思。`HH`是 24 小时。

如有疑问，请阅读有关[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的文档。

`hh`记录为

> 小时，使用从 01 到 12 的 12 小时制。”

`HH`记录为：

> 小时，使用从 00 到 23 的 24 小时制。

作为进一步说明，此评论表明潜在的概念错误：

> 我可以看到日期时间？变量“dateSent”具有 24 小时时钟时间戳，例如 14:50:34

值`DateTime`没有*格式*。这只是一个日期和时间。正如`int`值 16 的 an 既是“0x10”又是“16”，具体取决于您的格式化方式，对于`DateTime`. 没有与值相关的格式 - 仅调用的结果`ToString()`将取决于文化设置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-05T15:22:31.143

它应该像大写你的 h 一样简单

```
HH:mm:ss 
```

[这是字符串格式化日期时间的一个不错的链接](http://www.csharp-examples.net/string-format-datetime/)

来自文章：

```
DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123); 
```

请注意，小时是 16

```
String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T15:22:26.533

小时使用大写字母：

```
HH:mm:ss
^^ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-05T15:23:13.130

如果要显示 24 小时字符串，请使用以下[格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)：

```
HH:mm:ss 
```

希望能帮助到你

# c# - 如何在鼠标不移动时在 Zedgraph 中绘制一个持续的扩展十字光标？

> ID：15837612
> 
> 赞同：1
> 
> 时间：2013-04-05T15:21:09.933
> 
> 标签：c#, cursor, zedgraph

我正在使用 Zedgraph 创建一个股票图表应用程序。该图表有多个指标窗格。我想显示一个十字光标，它延伸到包含所有图形窗格的 Zedgraph 控件的范围。我使用以下代码和 MouseMove 事件完成了一半的工作。然而，当鼠标停止移动时，十字准线消失。鼠标静止时如何保持显示？在下面的代码中，我的 Zedgraph 控件名为“chtOHLC”。

```
#region Extended Crosshairs
private Point _mousePoint;
private void chtOHLC_MouseMove(object sender, MouseEventArgs e)
{
  _mousePoint = new Point(e.X, e.Y);
  chtOHLC.Refresh();
}

private void chtOHLC_Paint(object sender, PaintEventArgs e)
{
  if (_mousePoint != null)
  {
    Graphics g = chtOHLC.CreateGraphics();
    g.DrawLine(Pens.Black, 0, _mousePoint.Y, chtOHLC.Width, _mousePoint.Y);
    g.DrawLine(Pens.Black, _mousePoint.X, 0, _mousePoint.X, chtOHLC.Height);
    g.Dispose();
  }
} 
#endregion 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T15:32:08.240

试试看：将它添加到您的表单类

ZedGraph 这里是我的图书馆实例

```
 private double? CrossHairX = null;
 private double? CrossHairY = null;
 LineObj xHairOld = new LineObj();
 LineObj yHairOld = new LineObj(); 
```

ZedGraph 鼠标移动事件：

```
private void ZedGraph_MouseMove(object sender, MouseEventArgs e)
        {
            double x, y;
            ZedGraph.GraphPane.ReverseTransform(e.Location, out x, out y);

            #region crosshair

            if (x < ZedGraph.GraphPane.XAxis.Scale.Min ||
                x > ZedGraph.GraphPane.XAxis.Scale.Max ||
                y < ZedGraph.GraphPane.YAxis.Scale.Min ||
                y > ZedGraph.GraphPane.YAxis.Scale.Max
                )//out of the bounds
            {
                ZedGraph_MouseLeave(new object(), new EventArgs());
            }
            else//ok draw
            {

                if (CrossHairX != null && CrossHairY != null)
                {
                    ZedGraph.GraphPane.GraphObjList.Remove(xHairOld);
                    ZedGraph.GraphPane.GraphObjList.Remove(yHairOld);
                }

                LineObj xHair = new LineObj(ZedGraph.GraphPane.XAxis.Scale.Min, y, ZedGraph.GraphPane.XAxis.Scale.Max, y);
                LineObj yHair = new LineObj(x, ZedGraph.GraphPane.YAxis.Scale.Min, x, ZedGraph.GraphPane.YAxis.Scale.Max);

                ZedGraph.GraphPane.GraphObjList.Add(xHair);
                xHairOld = xHair;

                ZedGraph.GraphPane.GraphObjList.Add(yHair);
                yHairOld = yHair;

                CrossHairY = y;
                CrossHairX = x;

                ZedGraph.Refresh();
            }

            #endregion 
    } 
```

和鼠标离开事件

```
 private void ZedGraph_MouseLeave(object sender, EventArgs e)
        {
            if (CrossHairX != null && CrossHairY != null)
            {
                ZedGraph.GraphPane.GraphObjList.Remove(xHairOld);
                ZedGraph.GraphPane.GraphObjList.Remove(yHairOld);
                ZedGraph.Refresh();
            }
        } 
```

我认为你的性能问题。LineObj 比 Graphics 快

# java - 编写代码以：启动 R 会话、运行 R 脚本、终止会话、重复

> ID：15837617
> 
> 赞同：3
> 
> 时间：2013-04-05T15:21:19.387
> 
> 标签：java, r, terminal

我正在寻找一种简单的“设置并忘记它”的方式，可以作为终端中的单个参数字符串或简单的 Java 程序，以自动化以下操作：

1) 开始一个 R 会话

2) 告诉 R 获取包含用于冗长并行模拟的代码的 .R 文件

3) 完成后终止 R 会话

4) 开始一个新的 R 会话

5) 告诉 R 获取其他 .R 文件

6) 完成后终止 R 会话

7) 起泡、冲洗、重复

我的 .R 脚本总共需要几天时间才能运行，在此期间我将出城并且无法检查它们，如果我在同一个会话中运行它们，我无法避免最大化我的可用内存。

谢谢！

编辑：我在 Ubuntu 12.04 LTS 上运行 R 2.15.3，具有 16GB RAM

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:41:31.243

启动和终止 R 会话的过程是使用`Rscript`. 所以写你的脚本这样称呼它们：

```
Rscript script_1.R
Rscript script_2.R
...
Rscript script_Inf.R 
```

剩下第 2 点和第 5 点......这是一个简单的问题：

```
source('/home/sc_evans/script_abc.R') 
```

...在任何脚本的开头。

每个脚本都将获得自己的 R 会话，该会话将在完成后终止。将这些命令放入批处理脚本并运行它。

* * *

**编辑**

如果我自己这样做，我会忘记使用单独的脚本。只要您正确管理内存，运行单个进程就可以正常工作。将您的流程划分为适当的功能：

```
massive_process_1 <- function() {
  x <- do_something()
  saveRDS(x, '/home/sc_evans/results/first_result.rds')      
}

massive_process_2 <- function() {
  x <- do_something()
  saveRDS(x, '/home/sc_evans/results/second_result.rds')      
}

massive_process_1()
massive_process_2() 
```

等等。下一个函数在第一个函数完成之前不会运行，并且您的对象应该在函数中消失，因此您不应该耗尽内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:59:14.717

您可以查看此解决方案[http://www.rforge.net/JRI](http://www.rforge.net/JRI)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-05T14:42:09.550

如果我们将较长的 R 脚本放入循环并将所有重复的代码部分放入循环中，则不需要启动和终止 R 会话的过程。无需开始会话，您只需执行以下前三个步骤：

1.  使用`write.csv`方法 [文件写入] 来保存您的 Rscripts 的结果。

2.  用于使用`Sys.time(seconds)`“base”包延迟或中断短秒

3.  通过使用更重要的包“mise”来清除控制台和无花果工作区，以释放已执行脚本的对象空间。

4.  我们也可以为声音“beepr”包`method:beep(3)`。

在此之后我的较长脚本执行不会终止我希望这对你有帮助

# google-drive-api - 从谷歌驱动器读取电子表格的内容

> ID：15837620
> 
> 赞同：0
> 
> 时间：2013-04-05T15:21:30.790
> 
> 标签：google-drive-api

好吧，我认为这个问题应该很简单。我正在使用 Google Drive SDK 来管理我的 Google Drive 文件。

我想导出特定电子表格的内容。我可以找到 fileId、exportLinks 集合。授权不是问题。

还有两个问题有待解决。

首先，在我使用 drive_service._http.request(exportlinks[type]) 导出电子表格后，我无法识别返回的内容。我应该如何将其转换为我会阅读的内容。

PS：电子表格支持的三种导出方式对我来说都很好。我正在使用 Python。

其次，如果我的电子表格有多个工作表。我如何决定要导出哪一个？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:54:24.453

导出的类型将是您请求的类型。如果您请求 CSV，那么它将是 CSV。（我不确定这是您要问的，所以如果不是，请扩大。

对于某些文件类型（如 CSV）来说，多张工作表是个问题。您可以使用`gid`参数选择工作表。目前不支持此功能，因此如果效果不佳，请不要生气：

```
&gid=1 
```

有关旧文档列表 API 文档的更多信息，但正如我所说，这是不受支持的行为：[https ://developers.google.com/google-apps/documents-list/#downloading_spreadsheets](https://developers.google.com/google-apps/documents-list/#downloading_spreadsheets)

如需完整的解决方案，请导出为支持多张纸的格式。

# statistics - 计算分布式数据的四分位数

> ID：15837621
> 
> 赞同：1
> 
> 时间：2013-04-05T15:21:30.967
> 
> 标签：statistics, distributed, distributed-computing

不完全确定这是否是一个合适的论坛。

我有一个小型数据库集群（4 个盒子），每台机器都有一个整体数据集的碎片。

我需要计算特定数据点的四分位数，但我需要这样做，而无需一次访问整个数据集。

这甚至可能吗？

*编辑*我更喜欢确切的答案，但一个合理的近似值可能也会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T11:42:36.623

在这种情况下，您无法计算确切的四分位数，但 QDigest 算法可以解决您的问题。你可以得到近似值，这是相当不错的。您可以检查一次，此处提供 Java 实现：[https](https://github.com/addthis/stream-lib/blob/master/src/main/java/com/clearspring/analytics/stream/quantile/QDigest.java) ://github.com/addthis/stream-lib/blob/master/src/main/java/com/clearspring/analytics/stream/quantile/QDigest.java 。

有了这个，您可以在每个集群上创建 QDigest 数据结构。它的超压缩数据结构，将维护数据集的四分位数摘要。此外，您可以执行这些数据结构的联合，从而解决您的问题。

因此，在每个集群上创建一个 QDigest 实例，并组合结果，只需为每个集群执行这些实例的联合，这将为您提供相当好的四分位数近似值。

您可以关注 QDigest 的论文了解详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:34:54.420

我猜这可能是不可能的，因为你说数据库很小。如果它是一个大型数据集，并且每个集群包含 1/4 的代表性样本，那么我想您可以将特定数据点与一个集群上保存的数据进行比较。

数据集的每个分片的统计数据之间是否存在很大差异？

# java - 地图有什么问题>?

> ID：15837630
> 
> 赞同：1
> 
> 时间：2013-04-05T15:22:01.783
> 
> 标签：java, data-structures, map, multimap

我正在尝试在 Java 中构建一个数据结构，我将在其中插入大约 200,000 个字符串键，每个“平均”为 1000 Integers `Map<String, Arraylist<Integer>>`。该地图最终将具有大约 2 亿个值。

问题是在插入时，我必须首先检查映射中是否存在键，如果为真，则获取存储在临时集合中的所有值，然后将新整数添加到集合中并将它们放回映射，或者实例化一个带有新整数的新集合。

当我到达一个集合包含大约 50000 个整数的地步时，这太慢了。我通常会遇到 Java 堆空间不足的错误。

有没有办法摆脱获取过程？我只检查键是否存在，然后立即将值添加到现有集合中，例如将 posh 添加到堆栈中，尤其是映射在内存中，或者它是导致 Java 和 C++ 之间差异的原因，在 C++ 中我可以从使用指针中受益吗？

保持这样一个事实，即我不喜欢通过使用多图之类的东西来增加地图的大小，因为结构看起来几乎很简单。

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:36:48.390

如果您的代码实际上正在按照您的问题所建议的那样做，那么您工作太努力了。一旦你的 Key 与 ArrayList 相关联。只需将 ArrayList 从地图中取出并将新整数添加到该列表中即可。你不需要“放回去”。对列表的引用是您更改列表所需的全部内容。

```
 Map<String, ArrayList<Integer>> m = new HashMap<String, ArrayList<Integer>>();
    for ( int i = 0; i < 5; i++ ) {
        String key = ( i % 2 == 0 ) ? "Bob" : "Robert";
        ArrayList<Integer> l = m.get( key );
        if ( l == null ) {
            l = new ArrayList<Integer>();
            m.put( key, l );
        }
        l.add( i );
    }
    System.out.println( "m is " + m ); 
```

不过，在我看来，Guava Multimap 是一个更好的解决方案：http: [//guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:08:29.580

1.  与 HashMap 调整大小相关的性能开销很大。当您使用无参数构造函数创建新的 HashMap 时，其大小默认为 16。您将越来越多的元素放入其中，因此任何时候超出可用空间时，它都需要调整大小。调整大小涉及计算每个键的哈希码以及在哈希表之间移动键。这个很贵。

如果你知道你的 HashMap 会存储很多键，你可以创建它，例如 200,000。

2.  ArrayList 的默认容量为 10。如果放置更多元素，则需要调整大小。这涉及创建新数组（其中 ArrayList 内部存储元素）并将元素从旧数组复制到新数组。这在大型 ArrayList 上也可能非常昂贵。

我建议改用 LinkedList。向其中添加新元素非常便宜，因为元素作为独立节点存储。但是，也有一些缺点。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)。

3.  您必须能够为 200,000,000 个对象保留足够的内存。正如 Tom Hawtin 建议的那样，增加 JVM 使用的最大堆空间可能是必要的。Java 不是 C++，你不能只是使用越来越多的内存。

# jquery - 为什么这个点击绑定没有被绑定？

> ID：15837633
> 
> 赞同：0
> 
> 时间：2013-04-05T15:22:05.497
> 
> 标签：jquery, mvvm, knockout.js

看到这个小提琴：http: [//jsfiddle.net/BxvVp/11/](http://jsfiddle.net/BxvVp/11/)

我创建了一个视图模型，该模型具有用`div`页面上的一些隐藏内容替换内容的功能。完成后，`text`绑定似乎已处理，但`click`绑定未处理。

难道我做错了什么？

html:

```
<h4>Clicking the anchor created by clicking 'Summarize' should cause an alert, but doesn't.</h4>

<a href="#" data-bind="click: summarize">Summarize</a>

<div id="plot1"></div>
<div id="summary1" style="display:none;"> <a data-bind="text: 'anchor-text-replaced', click: function(data, event) { alert('anchor clicked!'); }" href="#">anchor-text</a>

</div>
<hr />

<h4>Clicking this anchor causes the alert as exptected.</h4>
<div id="plot2"></div>
<div id="summary2">
    <a data-bind="text: 'anchor-text-replaced', click: function(data, event) { alert('anchor clicked!'); }" href="#">anchor-text</a>
</div> 
```

javascript:

```
var ViewModel = function () {
    var self = this;
    self.summarize = function () {
        $("#plot1").html($("#summary1").html());
    };
};

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:27:28.003

Knockout 仅在您最初调用时应用绑定，`ko.applyBindings()`并且任何时候*Knockout*替换包含绑定、foreach 块、模板等的 HTML。仅仅因为您插入了一些包含绑定的随机 HTML，并不意味着 Knockout 突然意识到这一事实。

# wcf - WCF Web 服务在调用时是否使用调用应用程序的配置文件？

> ID：15837636
> 
> 赞同：1
> 
> 时间：2013-04-05T15:22:15.137
> 
> 标签：wcf, web-config, invoke

假设我有一个**ASP.NET 应用程序**和一个**WCF Web Service**，都部署在 IIS 7 上。

我的一位同事声称，当 ASP.NET 应用程序将响应重定向到**WCF Web Service**时，**WCF Web Service**不会引用其配置文件，而是引用 ASP.NET 应用程序（或至少其**appSettings**部分）的配置文件。我真的认为这种说法是错误的，但是我的同事有更多的经验，所以我在争论了一下之后就放弃了。

但是我想，由于 Web 服务仅在被另一个应用程序调用时才使用，如果 WCF Web 服务中的配置文件从不使用它，它有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:34:24.707

Response.Redirect 导致从客户端到新地址的全新请求。这基本上意味着它就像对第二个地址的任何其他请求一样，因此第二个 URL 上的服务不会对来自第一个 URL 的网站有任何想法。

[Response.Redirect 与 Server.Transfer](http://haacked.com/archive/2004/10/06/responseredirectverseservertransfer.aspx)

所以答案是否定的，WCF 服务不会使用来自 ASP.NET 站点的 web.config，而是使用它自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:34:54.983

查看您的描述，我可以看出 ASP.Net 应用程序将调用 WCF 服务，即充当该服务的客户端。

ASP.Net 应用程序需要引用端点和有关服务的一些其他详细信息才能调用服务。这些详细信息将成为 ASP.Net Web.config 文件的一部分。

服务需要在自己的配置文件中定义自己的详细信息，例如端点、行为、安全详细信息等。

希望这能回答你的问题。

# c# - 内容管理系统安全？

> ID：15837646
> 
> 赞同：2
> 
> 时间：2013-04-05T15:22:32.750
> 
> 标签：c#, asp.net

我目前正在尝试创建自己的 CMS 系统。

在“/tools/default.aspx”页面我有一个登录，成功登录后，重定向到“/tools/cms.aspx”。

我已经使用 Windows 身份验证来阻止对文件夹的不必要访问，但是如果我在页面“/cms/cms.aspx”中键入，我可以在不登录的情况下访问 CMS。

**编辑：**

我已阻止访问 CMS，但现在无法登录，我仍然可以访问其文件夹。

/工具/web.config：

```
<?xml version="1.0"?>
    <configuration>
      <system.web>
        <authorization>
          <deny users="?"/>
        </authorization>
      </system.web>

    <location path="default.aspx">
      <system.web>
        <authorization>
          <allow users="*"/>
        </authorization>
      </system.web>
    </location>

    <location path="styles">
      <system.web>
        <authorization>
          <allow users="?"/>
          <allow users="*"/>
        </authorization>
     </system.web>
   </location>

    <location path="images">
      <system.web>
        <authorization>
          <allow users="?"/>
          <allow users="*"/>
        </authorization>
      </system.web>
    </location>
   </configuration> 
```

网络配置：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authentication mode="Forms">
      <forms name="CMSLogin" loginUrl="~/tools/default.aspx" protection="All" timeout="20" path="/" />
    </authentication>
    <roleManager enabled="true" />
  </system.web>
</configuration> 
```

*删除敏感的 web.config 信息

登录验证尝试：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
    string userName = Login1.UserName;
    string passWord = Login1.Password;
    bool rememberUserName = Login1.RememberMeSet;

    using (SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["websiteContent"].ConnectionString))
    {
        sqlCon.Open();
        string SQL = "SELECT CMS_Username, CMS_Password FROM CMS_Users WHERE CMS_Username ='" + userName + "' AND CMS_Password ='" + passWord + "'";
        using (SqlCommand sqlComm = new SqlCommand(SQL, sqlCon))
        {
            sqlComm.ExecuteScalar();

            if (sqlComm.ExecuteScalar() != null)
            {
                Response.Redirect("cms.aspx");
            }
            else
            {
                Session["UserAuthentication"] = "";
            }
        }
        sqlCon.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T13:12:44.507

您可以在其页面加载事件的每个页面中检查会话变量的值是否为空，或者您可以只使用母版页并在其加载事件中实施相同的检查。

# d3.js - 为什么我的工具提示会闪烁？

> ID：15837650
> 
> 赞同：7
> 
> 时间：2013-04-05T15:22:48.407
> 
> 标签：d3.js, tooltip

我在[这个例子](http://bl.ocks.org/mbostock/3902569)之后创建了一个工具提示。

出于某种原因，当我移动鼠标时，我的工具提示会闪烁。据我了解，该`mousemove()`函数会找到最近的数据点；因此，只要鼠标在`.overlay`矩形上方，工具提示就应该始终显示。

有任何想法吗？这是我的小提琴：

[http://jsfiddle.net/samselikoff/zhMQ8/1/](http://jsfiddle.net/samselikoff/zhMQ8/1/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-01-18T19:09:29.397

发生闪烁是因为工具提示有时出现在鼠标下方并导致调用*mouseout*并且再次删除工具提示并且鼠标再次位于元素上方，因此调用*mouseover*并且循环继续......

留出一点空隙（我在其中添加了 5），因此工具提示不会出现在鼠标下方：

```
tooltip.attr("transform", "translate(" + (xScale(d.date)   + 5  ) + ",0)"); 
```

**编辑** 避免工具提示影响鼠标的另一种可能更好的方法是为其设置样式：

```
pointer-events: none; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:36:11.410

我认为这是在不需要时进行`mouseover`/`mouseout`连续触发：

更新小提琴（再次）：http: [//jsfiddle.net/zhMQ8/3/](http://jsfiddle.net/zhMQ8/3/)

```
g.on("mouseover", function() { tooltip.style("display", null); });

g.on("mouseout", function() { tooltip.style("display", "none"); });

g.select(".overlay").on("mousemove", mousemove); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T19:56:06.817

发现如果工具提示超出形式会导致此问题。从屏幕边缘向内移动工具提示或缩短工具提示文本。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-02-03T19:55:22.173

不要使用 mousemove 属性。使用鼠标悬停。

```
 private void pboxLabExam_MouseHover(object sender, EventArgs e)
    {
        toolTip1.SetToolTip(pboxLabExamGlow, "LABORATORY EXAM"); //<---
    } 
```

# javascript - 质数确定Javascript

> ID：15837655
> 
> 赞同：2
> 
> 时间：2013-04-05T15:23:02.800
> 
> 标签：javascript, primes

我正在创建一个外部 javascript 文件。这是为了家庭作业。我应该做的是确定用户输入的数字是否是质数，如果它是质数则显示一条消息。我编写了代码，编译了所有内容。但我似乎无法弄清楚，无论我输入什么数字，显示消息总是说那个数字是质数。任何人都可以帮忙吗？这是我的代码：

```
var UI; 
var TV;

var HITS;

UI = window.prompt("Enter a whole number to test as a prime number: \n", "0");
TV = parseInt(UI, 10);

var DD = TV;            //still produces same error
HITS = 0;

while (DD > 0)
{
if (TV % DD === 0)
{
    HITS++;

}       
else
{
    DD--;
}
}

if (HITS > 2)
{
document.write(UI + " is a NOT prime number");
}
else
{
document.write(UI + " is a prime number");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:27:40.457

我认为你应该`var DD = TV;`在`TV = parseInt(UI, 10)`.

如果你不希望它是无限的，你应该在 while 循环中减少 DD。

这是更正的代码

```
var UI = window.prompt("Enter a whole number to test as a prime number: \n", "0");
var TV = parseInt(UI, 10);
var HITS = 0;
var DD = TV;
while (DD > 0) {
    if (TV % DD === 0) {
        HITS++;
    }
    DD--;
}

if (HITS > 2) {
    document.write(UI + " is a NOT prime number");
} else {
    document.write(UI + " is a prime number");
} 
```

# php - PHP while 循环和表格

> ID：15837660
> 
> 赞同：2
> 
> 时间：2013-04-05T15:23:14.033
> 
> 标签：php, while-loop, html-table

我很难把它放到一张桌子上。现在我正在使用两张桌子并将它们并排放置，但我认为这不是最好的解决方案。我已经把桌子都摆好了，我只是不知道如何把它变成一张桌子。

```
while ($row = mysql_fetch_assoc($query)) {

$result .= "<tr> <td> {$row['a']} the {$row['b']} </td>      </tr>";
 }

  echo $thegames; 
```

这会产生类似的东西：

```
 james the giant
       rick the monster
       chris the goblin 
```

我想要的是能够从一个单独的 while 循环中添加更多的 td...

```
 while($secondrow = mysql_fetch_assoc($secondquery)) { 
   $first = "<td> {$secondrow['alias']} </td>";
   $second = "<td> {$secondrow['number']} </td>";
  } 
```

所以最后我希望它看起来像这样：

```
 james the giant $secondrow['alias']  $secondrow['number'] 
   rick the monster $secondrow['alias']  $secondrow['number'] 
```

ETC...

希望这是有道理的。我现在正在做的是创建两个单独的表并尝试将它们排列起来，但不喜欢这种方法。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:28:35.977

从您的代码来看，您实际上不需要执行两个查询。如果您期望每行有 4 列，则也无需执行多个 while 循环。相反，更改查询结构以使用 JOIN；这将使您能够一次获得完整的结果集。

如前所述，请不要`mysql_*`在新代码中使用函数。它们不再被维护并被正式弃用。

我将向您展示如何使用 PDO 进行 JOIN，并根据您到目前为止显示的代码对您的表名和主键进行一些假设：

```
$pdo = new PDO("mysql:host=localhost;dbname=database", '-username-', '-password-');
$sql = '
    SELECT 
        `players`.`id`, 
        `players`.`a`,
        `players`.`b`, 
        `player_info`.`alias`,
        `player_info`.`number`   
    FROM 
        `players` 
    LEFT JOIN
        `player_info` ON  `players`.id = `player_info`.`player_id`
';
$players = $pdo->query($sql);

$row_data= array();
while ($row = $players->fetch()) {
    $row_data[] = '
        <td>'.$row->a.' the '.$row->b.'</td>
        <td>'.$row->alias.'</td>
        <td>'.$row->number.'</td>   
    ';
}

echo '<table><tr>'.implode('</tr><tr>', $row_data).'</tr></table'>; 
```

如果连接被证明是不切实际的（不是典型的），那么你应该构建你的数据数组并生成 HTML 作为两个单独的步骤：

```
// gather the data
$data = array();
$first = $pdo->query($sql);
while($arow = $first->fetch()) {
    $one_data['a'] = $arow->a;
    $one_data['b'] = $arow->b;

    $second = $pdo->query($second_sql);
    while($brow = $second->fetch()) {
        $one_data['alias'] = $brow->alias;
        $one_data['number'] = $brow->number;
    }
    $data[] = $one_data;
}

// now generate HTML
print '<table>';
foreach ($data as $row) {
    print '
        <tr>
            <td>'.$row['a'].' the '.$row['b'].'</td>
            <td>'.$row['alias'].'</td>
            <td>'.$row['number'].'</td> 
        </tr>
    ';
}
print '</table>'; 
```

作为旁注......名为`a`and`b`的列只是一个**bad** . **想法**。这些列代表数据，因此为它们提供反映数据内容的标签。今天处理神秘专栏可能会很好......你记得他们的意思。6个月后？一年后？为所有列和变量使用有意义的名称——为什么不呢？

**文档**

*   `PDO`- [http://www.php.net/manual/en/class.pdo.php](http://www.php.net/manual/en/class.pdo.php)
*   `PDO::query`- [http://www.php.net/manual/en/pdo.query.php](http://www.php.net/manual/en/pdo.query.php)
*   `PDOStatement`- [http://www.php.net/manual/en/class.pdostatement.php](http://www.php.net/manual/en/class.pdostatement.php)
*   `PDOStatement::fetch`- [http://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php)
*   `mysql_query` **已弃用！**- [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)
*   mySQL `JOIN`- [http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:25:52.137

您可以将 2 个集合组合成 1 个数组并在打印时循环该数组。

编辑; 有人发现这是一个糟糕的答案，但这意味着您同意上述结果，即在您的模板中提取 sql 行。

您首先为模板准备数据，然后循环并打印它。

# c# - IIS 使用被注释掉的代码，而不是 C# 中的更新代码

> ID：15837665
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:23:17.537
> 
> 标签：c#, visual-studio-2010, iis, iis-7

我在 C# 中更新了我的代码，但在运行 Web 服务时没有看到执行的更改。我已经尝试过 - 重建我的所有代码 - 重新启动 IIS - 清除 chrome 上的缓存 - 使用隐身窗口

到底是怎么回事？这是一张图片，显示它使用的是我的注释代码，而不是我更改的更新代码。

[http://i.imgur.com/JtOnCy8.jpg](https://i.imgur.com/JtOnCy8.jpg) ![iisCommentedCode](https://i.imgur.com/JtOnCy8.jpg)

```
string query = "select * from product";
        /*
        string query = string.Format("SELECT p.GTIN " + 
            ",sc.StudyCellId " +
            ",pm.Name " +
            ",pm.Description as PricetagDescription " +
            ",pm.Size as Size " +
            ",pm.Brand as Brand " +
            ",pm.Price as Price " +
            ",pm.ProductKey as ProductKey " +
            ",pm.Category as Category " +
            ",pm.Details.value('(/Details/Tags/Tag[@Type=\"Type\"])[1]/@Name', 'varchar(max)') AS Type " +
            ",pm.Details.value('(/Details/Tags/Tag[@Type=\"Form\"])[1]/@Name', 'varchar(max)') AS Form " +
            "FROM StudyCell sc " +
            "inner join ProductMeta pm on pm.StudyCellId = sc.StudyCellId " +
            "inner join Product p on pm.ProductId = p.ProductId " +
            "where StudyId = {0} " +
            "order by sc.StudyCellId " +
            ",GTIN", studyId);
        */ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T15:32:55.260

我以前遇到过这个问题。如果我没记错的话，我必须做的是删除 bin 文件夹中的二进制文件，然后重建解决方案。

奇怪的是关闭VS并重新启动也有帮助！

还要确保您的实时应用程序指向正确的二进制文件夹。即它可能指向Release 版本，而您正在使用Debug 版本。

HTH，加里

# javascript - 概念 - 队列有方向吗？

> ID：15837667
> 
> 赞同：0
> 
> 时间：2013-04-05T15:23:18.817
> 
> 标签：javascript

我称它为队列，但根据[维基百科](http://en.wikipedia.org/wiki/Queue_%28data_structure%29)，队列是先进先出的数据结构。

您添加到“前面”。而你从“结束”中删除。

我正在做相反的事情。

我正在添加到“结束”。并从“正面”移除。（使用 push() 和 shift() ）

因为 front 和 end 没有任何具体含义，所以方向是否重要？

我只是从 wikipedia 和[mdn](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)中获取示例。

我可以称之为队列吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:25:56.030

> 我可以称之为队列吗？

**绝对**的。您引用的定义是正确的；队列是“FIFO”，先进先出。这并不*一定*意味着您必须使用数组的一端或另一端。实际上，您甚至不需要数组。您也可以使用链表来表示队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:27:34.120

将变量名“front”更改为“end”和“end”更改为“front”不会更改您正在使用的数据结构或算法。它仍然是一个队列。

这就是你所做的一切。如果您选择将“前端”和“末端”的角色颠倒过来，这并不重要。当您在出纳员处排队时，您进入“末端”并等到您在“前面”。那是一个队列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:35:14.907

我一直听说队列在语义上被描述为添加到后端/尾部的入队项目和从前端/头部删除的出队项目。

我上面描述的内容与您链接到的维基百科文章一致。我不确定你在哪里找到了相反的语义。

**计算机不会关心你给变量取什么名字。但是，我建议您坚持我在开场白中描述的惯例，以符合惯例。**

我还建议您`pop`从代码中删除调用（使用 shift 代替）以避免混淆。

# paypal - 带有托管结帐的 PayFlow Pro 不会拒绝 AVS 失败的交易

> ID：15837669
> 
> 赞同：2
> 
> 时间：2013-04-05T15:23:20.333
> 
> 标签：paypal, payflowpro, payflowlink, avs

我有一个 Web 应用程序配置为使用带有托管结帐页面和 SecureToken 的 PayFlow Pro。它目前处于测试模式，我已将帐户（通过[PayPal 管理器](http://manager.paypal.com)）配置为使用 FULL AVS，但是当我使用无效的测试 ZIP (> 50000) 付款时，我看到 AVSZIP 标志在来自 PayFlow 的响应，但交易被批准，RESULT 为 0，RESPMSG 为“已批准”。当我检查[PayPal Manager](http://manager.paypal.com)上的交易分类账时，该分类账也显示了已批准的成功交易（具有讽刺意味的是，它还显示了 AVS Zip Match 的“N”）

我从[在线帮助文​​档](https://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/paypalmanager.htm#setup.htm)中的理解是，当 AVS 设置为 Full 时，PayPal 将使交易无效并且买家拒绝（这是我正在寻找的行为），但这不是我所看到的。我确实在 Payflow Gateway 开发人员指南（最后更新于 2013 年 2 月 7 日）中注意到有关 AVS 的以下声明：

*地址验证服务将提交的账单街道地址和邮政编码与持卡人银行存档的值进行比较。响应包括 AVSADDR 和 AVSZIP 的值：Y、N 或 X，表示客户街道地址和邮政编码的匹配状态。Y = 匹配，N = 不匹配，X = 持卡人银行不支持地址验证服务。地址验证服务结果仅供参考。**银行不会根据地址验证服务结果拒绝交易。商家决定批准或拒绝交易。**大多数美国银行和一些国际银行都支持地址验证服务。*

但是，这似乎与在线帮助文​​档相矛盾。

下面是来回发布的请求和响应数据。我省略了中间 POST 并重定向到 payflowlink.paypal.com，因为其中包含的只是 SecureTokenID 和 SecureToken。

有人可以阐明我可能做错了什么吗？我对 Pilot-payflowpro.paypal.com 的初始请求中的值是否缺失或不正确？除了这个问题，一切都很好，完全符合我的预期。

***到[https://pilot-payflowpro.paypal.com](https://pilot-payflowpro.paypal.com)：***

```
Mode=TEST&CreateSecureToken=Y&SecureTokenID=1508D489FD8F4A0BB47CA541D7191427&User=########&Vendor=#######&Partner=PayPal&Pwd=#######&TrxType=S&Tender=C&FirstName=Test&LastName=User&Address=101 N. Wacker Dr.&City=Chicago&State=IL&Zip=60606&Country=US&Phone=312-000-0000&Email=test.user@testdomain.com&Amt=160.00&Currency=USD&User1=276&User2=C161168&Comment1=Tampa Spring Regional Training Event&Comment2=Current User PersonID: 690399, Effective Current User PersonID: 690399&CancelURL=http://localhost:5527/PaymentQueue/Registration/ProcessPayPalCancel&CSCRequired=True&CSCEdit=True&DisableReceipt=True&Template=TEMPLATEA&ErrorURL=http://localhost:5527/PaymentQueue/Registration/PaymentError&ReturnURL=http://localhost:5527/PaymentQueue/Registration/ProcessPayPalResponse&URLMethod=POST 
```

***来自[https://payflowlink.paypal.com](https://payflowlink.paypal.com)：***

```
AVSZIP=N&STATE=IL&TYPE=S&BILLTOEMAIL=test.user@testdomain.com&USER2=C161168&ACCT=4444&PROCCVV2=M&BILLTOLASTNAME=User&BILLTONAME=Test+User&CVV2MATCH=Y&LASTNAME=User&PNREF=V78A4A45A75A&TENDER=CC&EMAIL=test.user@testdomain.com&PHONE=312-000-0000&METHOD=CC&BILLTOFIRSTNAME=Test&AMT=160.00&SHIPTOCOUNTRY=US&TRANSTIME=2013-04-05+07%3A47%3A38&ZIP=60606&AUTHCODE=031PNI&BILLTOCOUNTRY=US&EXPDATE=1213&IAVS=N&RESPMSG=Approved&COUNTRY=US&BILLTOZIP=60606&BILLTOCITY=Chicago&TAX=0.00&BILLTOSTATE=IL&CARDTYPE=1&FIRSTNAME=Test&AVSDATA=YNY&PROCAVS=A&SECURETOKEN=#########&SECURETOKENID=1508D489FD8F4A0BB47CA541D7191427&AVSADDR=Y&CITY=Chicago&BILLTOPHONE=312-000-0000&NAME=Test+User&USER1=276&HOSTCODE=A&COUNTRYTOSHIP=US&BILLTOSTREET=101+N.+Wacker+Dr.&RESULT=0&ADDRESS=101+N.+Wacker+Dr. 
```

# spring - Grails 属性初始化

> ID：15837672
> 
> 赞同：1
> 
> 时间：2013-04-05T15:23:25.397
> 
> 标签：spring, grails

我正在尝试将旧版 java/spring 应用程序集成到我的 grails 应用程序中。此代码使用了许多自定义属性，当我连接旧版应用程序上下文内容时，这些属性似乎不可用。

如果我在 Config.groovy 中单独加载它们，事情就会开始工作，但我真的很喜欢一种编程方式（意味着加载遗留属性对象并将它们插入到 grails 配置中）。

这样做的最佳方法是什么？Bootstrap init 似乎为时已晚，此时 appContext 已经刷新，并且引发了有关未解析属性的异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:53:31.853

在您的内部`Config.groovy`，您可以做一个基本的技巧，例如

```
Properties legacyProps = // whatever you need to do to load the legacy properties
for(String propName in legacyProps.stringPropertyNames()) {
  setProperty(propName, legacyProps.getProperty(propName))
} 
```

这适用于不包含任何点的属性名称。包含点的属性将被添加到 Grails 配置中，但仅作为平面键，而不是分层键，即

```
grailsApplication.config.'property.with.dots' 
```

与

```
grailsApplication.config.property.with.dots 
```

如果您希望它们以适当的分层形式添加，您可以使用 Groovy 技巧来做到这一点，*前提*是您可以确保在遗留属性中没有任何情况下您有一个键是另一个键的前缀，即

```
my.app.foo=bar
my.app.bar=baz 
```

可以，但是

```
my.app.foo=bar
my.app=baz 
```

不行。如果属性满足这一点，那么尝试类似

```
Properties legacyProps = // whatever you need to do to load the legacy properties
for(String propName in legacyProps.stringPropertyNames()) {
  String[] propParts = propName.split(/\./)
  if(propParts.size() == 1) {
    // no dots
    setProperty(propName, legacyProps.getProperty(propName))
  } else {
    // we have dots - get the first segment (which is a ConfigObject)
    ConfigObject co = getProperty(propParts[0])
    if(propParts.size() > 2) {
      // then apply all but the last segment to that to get the last parent
      co = propParts[1..-2].inject(co) { o, part -> o."${part}" }
    }
    // then set final segment on the last parent ConfigObject
    co."${propParts[-1]}" = legacyProps.getProperty(propName)
  }
} 
```

# c# - 由不同线程拥有的对象

> ID：15837675
> 
> 赞同：1
> 
> 时间：2013-04-05T15:23:29.897
> 
> 标签：c#, multithreading, thread-safety

我对线程的想法相当陌生，我正在使用`BackgroundWorker`, 试图在完成一些工作时显示进度条。这是 的`DoWork`事件`BackgroundWorker`：

```
private void BackgroundWorker1DoWork(object sender, DoWorkEventArgs e)
{
    SetDateStartEndTimeForReport();

    try
    {
            PopulateGrid();

    }
    catch (Exception ex)
    {
            Logger.Error(ex.Message);
            MessageBox.Show(ex.Message);
            return;
    }
} 
```

现在，在我的内部`SetDateStartEndTimeForReport()`，我得到一个`InvalidOperationException`：

```
private void SetDateStartEndTimeForReport()
{
    Logger.Info("Setting the chosen date and/or start/end times for report...");

    // Quite possibly the best yo-yo code I've ever written
    // "Look, I'm a string. Nope, I'm a DateTime. Tricked you again, I'm a string."
    var reportDate = Convert.ToDateTime(cmbDateSelecter.SelectedValue.ToString()).ToString("yyyy-MM-dd"); // Exception occurs here

    Report.Date = reportDate;

    if (chkboxTimeFrame.IsChecked == true)
    {
        Report.StartTime = timeStart.Value.Value.ToString(reportDate + " HH:mm");
        Report.EndTime = timeEnd.Value.Value.ToString(reportDate + " HH:mm");
    }

    Logger.Info("Date and/or start/end times set");
} 
```

异常状态：

> 调用线程无法访问此对象，因为不同的线程拥有它。

所以，我做了一些研究，发现了关于`this.Dispatcher.Invoke((Action)(()`. 现在，当我把它包装起来时`SetDateStartEndTimeForReport();`：

```
this.Dispatcher.Invoke((Action)(() =>
{
    SetDateStartEndTimeForReport();
})); 
```

我的`PopulateGrid()`抛出同样的异常。现在，我可以将该方法包装在同一个`Dispatcher.Invoke()`中，这样问题就消失了。然而，我觉得好像我错过了一些更……优雅的东西。在函数调用时，UI 元素都不应该被其他任何东西使用。我的问题是，我可以将两种方法包装在同一个中`Dispatcher.Invoke()`吗？不过，老实说，我不应该在同一个函数中使用其中两个调用。有没有更好的方法来完成我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:30:27.203

您可以通过[后台工作人员的 ProgressChanged 事件](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)传回数据。这将封送回 UI 线程。该文档让您知道您通过调用[ReportProgress来调用此事件](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress.aspx)

请注意，`BackgroundWorker's`应该只在他们的`DoWork`. 如果您所做的只是更新 UI，那么您不能在后台线程上执行此操作。如果您需要检索数据，则可以使用后台工作程序将其加载到内存中，完成后，如果您连接了它，它将调用[OnRunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.onrunworkercompleted.aspx)事件（这将在 UI 线程上）

如果您想要某种方法来分部分执行它，那么这`Invoke`是唯一的另一种方法。

# vba - VBA PhotoPaint：按顺序获取图层？

> ID：15837678
> 
> 赞同：1
> 
> 时间：2013-04-05T15:23:53.973
> 
> 标签：vba

在编辑器 Corel PhotoPaint 使用的 Visual Basic for Applications 中，我可以使用

```
For Each layer In ActiveDocument.SelectedGroups.Item(1).Layers
    ....
Next layer 
```

但是，这些图层的顺序与图形文件中的视觉堆栈顺序不同，它们的顺序与最初创建的顺序相同。我怎样才能按照 CPT PhotoPaint 文件中所示的正确顺序获得这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:23:04.853

Layer 对象具有 ZOrder 属性。

我猜这会给你你所追求的。

# c - 修改函数内部的字符串数组

> ID：15837679
> 
> 赞同：2
> 
> 时间：2013-04-05T15:23:54.260
> 
> 标签：c, c-strings

以下代码示例不打印字符串`test1`-`test5`包含`array`在`main() function`

但是它在内部工作`make() function`

我确信答案很简单，我将如何产生预期的结果？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ELEMENTS 4

void make(char ***array) {

char p2[] = "test1 test2 test3 test4 test5";
char* token = strtok(p2, " ");
int i = 0;
while (token) 
{

    (*array)[i]= token;
    token = strtok(NULL, " ");
    i++;
}

printf("%s\n",(*array)[0]);
printf("%s\n",(*array)[1]);
printf("%s\n",(*array)[2]);
printf("%s\n",(*array)[3]);
printf("%s\n",(*array)[4]);

}

int main(int argc, char **argv) {
char **array;
make(&array);

int i;
for (i = 0; i < ELEMENTS; ++i) {
    printf("%s\n", array[i]);
}

return 0;
} 
```

此代码编译时没有错误或警告，并产生以下输出：

```
test1
test2
test3
test4
test5
yf�

��� 
```

我的预期结果是`test1 - test5`打印了两次，一次在里面，`make() function`一次在里面`main() function`

作为旁注，这只是我对stackoverflow的第二篇文章，这是我的第一个问题[Passing a string array to a function in C中的修改代码](https://stackoverflow.com/questions/15835300/passing-a-string-array-to-a-function-in-c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:32:58.867

```
char p2[] = "test1 test2 test3 test4 test5"; 
```

在函数堆栈上定义字符串 p2 `make()`。`strtok()`只返回指向同一个数组的指针，`make()`返回时无效。

与此相同：

```
char * foo()
{
    char array[] = "hello";
    printf("%s\n", array); // works fine
    return array;
}

void main()
{
    char * array = foo(); // just a pointer to invalid data
    printf("%s\n", array); // FAIL
} 
```

# 如何正确地做

在 C 中返回字符串基本上有两种方法。

通过填充缓冲区：

```
void fill_buf(char * buf, size_t len)
{
    char string[] = "hello";
    snprintf(buf, len, "%s", string);
}

void main()
{
    char buffer[25];
    fill_buf(buffer, sizeof(buffer));
    printf("%s\n", buffer);
} 
```

或者通过返回 malloc 的字符串：

```
char * get_malloced_or_null()
{
    char my_string[] = "hello";
    char * copied_pointer = strdup(my_string); // might fail and return NULL
    return copied_pointer;
}

void main()
{
    char * string = get_malloced_or_null();
    if (string == NULL) { return; }
    printf("%s\n", string);
    free(string);
} 
```

第二种方法的优点是您可以将它与任意长的字符串一起使用。另一方面，您需要检查分配失败，并且您必须在完成后释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:37:50.903

在`make()`函数中，您正在解析一个**局部**变量。因此，`strtok()`返回堆栈地址（并且您的数组将引用堆栈中可以随时覆盖的内容）。一旦函数`make()`完成，这些指针将引用堆栈中的任何内容，并且您的数组内容可能是任何内容。

您可以按以下方式解决此问题：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ELEMENTS 4

void make(char ***array)
{
    char p2[] = "test1 test2 test3 test4 test5";
    char* token = strtok(p2, " ");
    int i = 0;
    while (token) 
    {
        (*array)[i]= strdup(token);
        token = strtok(NULL, " ");
        i++;
    }

    printf("%s\n",(*array)[0]);
    printf("%s\n",(*array)[1]);
    printf("%s\n",(*array)[2]);
    printf("%s\n",(*array)[3]);
    printf("%s\n",(*array)[4]);

}

int main(int argc, char **argv)
{
    char **array;
    make(&array);

    int i;
    for (i = 0; i < ELEMENTS; ++i) {
        printf("%s\n", array[i]);
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:41:09.443

除了上述答案；

您必须`char ***array`在开始时为`make()`函数分配内存

```
*array = malloc(ELEMENTS * sizeof(char *)); 
```

并且`ELEMENTS`应该定义为`5`而不是`4`

```
#define ELEMENTS 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:45:22.437

它可以简单地定义 p2[] `static`：

```
static char p2[] = "test1 test2 test3 test4 test5"; 
```

此外，`ELEMENTS`应该是 5，并且`array`in的声明`main`是一个简单的“指向指针的指针”，它应该是“指针数组”：

```
char *array[ELEMENTS]; 
```

那么您将获得足够的空间容纳 5 根琴弦。

**编辑**：使用指针数组简化了`make()`函数：

```
void make(char **array) {
    static char p2[] = "test1 test2 test3 test4 test5";
    char *token = strtok(p2, " ");
    int i = 0;
    while (token) {
        array[i] = token;
        token = strtok(NULL, " ");
        i++;
    }
    for (i = 0; i < ELEMENTS; ++i)
        printf("%d: %s\n", i, array[i]);
}

int main(int argc, char **argv)
{
    char *array[ELEMENTS];
    make(array);
    /* ... */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T04:02:45.547

此代码编译干净，并产生所需的结果，感谢所有帮助我理解指针的人。现在我将着手释放分配给数组的内存

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ELEMENTS 5

void make(char ***array) {

char p2[] = "test1 test2 test3 test4 test5";
char* token = strtok(p2, " ");
int i = 0;
while (token) 
{

    (*array)[i] = malloc(strlen(token) + 1);
    strcpy((*array)[i], token);
    token = strtok(NULL, " ");
    i++;
}

}

int main(int argc, char **argv) {
char **array;
make(&array);

int i;
for (i = 0; i < ELEMENTS; ++i) {
    printf("%s\n", array[i]);
}

return 0;
} 
```

# jquery - JQuery XML解析同一元素的多级

> ID：15837683
> 
> 赞同：0
> 
> 时间：2013-04-05T15:24:07.757
> 
> 标签：jquery, xml, parsing, multi-level

这是我在这里的第一个问题，我对 Web 开发世界还很陌生。我有一个简单的问题，所以我不想用我的所有代码惹恼你，我会给你一个更简单的例子：

我有一个看起来像这样的 XML，我们称之为“example.xml”：

```
<a>
   <b>1</b>
   <a>
      <b>2</b>
      <c>3</c>
   </a>
</a> 
```

因此，存在包含或不包含“c”元素的多级“a”。当我使用解析这个 xml 时

```
$.ajax({type: "GET",async: false, cache: false, url: "example.xml",dataType: "xml",success: parseXml,  error: function(xhr, status, error) {alert(error)}}); 
```

parseXml 会这样：

```
function parseXml(xml){
    var result = new Object()
    $(xml).find('a').each(function(){
       result.b = $(this).find('b:first').text()
       result.c = $(this).find('c:first').text()
    }
} 
```

所以我的问题是这个JQuery会在第一级'a'中找到一个'c'，即使没有。我认为它在第二个“a”中搜索以找到一个“c”。这就是为什么我需要在 find() 函数中添加“：first：”，这样它就不会返回第二个 'b'...我认为这不是最好的方法，因为如果 'b'在第二级'a'之后宣布，我会得到第二级'b'......我不知道你是否在关注，但这是我的问题：

1.  那是提议者 XML 文件吗？
2.  如果不是，假设我无法更改它，我怎样才能获得一个不会从第二级获取其信息的适当 XML 解析器？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:46:12.113

Try 可以使用[.children](http://api.jquery.com/children/)仅在直接子代中搜索

```
function parseXml(xml){
    var result = new Object()
    $(xml).find('a').each(function(){
       result.b = $(this).children('b').text()
       result.c = $(this).children('c').text()
    }
} 
```

[.find()](http://api.jquery.com/find/)将搜索所有级别的后代

> 获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

# javascript - 百分比分布 - JavaScript Math.random()

> ID：15837684
> 
> 赞同：0
> 
> 时间：2013-04-05T15:24:09.353
> 
> 标签：javascript, math, random

我有**10%**、**20%**和**70%**的百分比来决定要采取的行动。我有两种方法来决定：#1 每次都让一个新的 Math.random() 决定，或者 #2 保留一个 Math.random() 结果。查看我在控制台中运行的代码（注意`rand1`and`rand2`方法）：

```
console.log('chart1');
var chart1;
var rand1 = function() {
    if (Math.random() <= 0.1) chart1[0]++;
    else if (Math.random() <= 0.2) chart1[1]++;
    else chart1[2]++;
};
var runs = 10000;
for (var j = 0; j < 10; j++) {
    chart1 = [0,0,0];
    for (var i = 0; i < runs; i++) rand1();
    var log = [];
    for (var k = 0; k < chart1.length; k++) {
        log[k] = Math.round(chart1[k] / runs * 100);
    }
    console.log(log);
}

console.log('chart2');
var chart2;
var rand2 = function() {
    var rand = Math.random();
    if (rand <= 0.1) chart2[0]++;
    else if (rand >= 0.1 && rand <= 0.3) chart2[1]++;
    else chart2[2]++;
};
var runs = 10000;
for (var j = 0; j < 10; j++) {
    chart2 = [0,0,0];
    for (var i = 0; i < runs; i++) rand2();
    var log = [];
    for (var k = 0; k < chart2.length; k++) {
        log[k] = Math.round(chart2[k] / runs * 100);
    }
    console.log(log);
} 
```

它产生

```
chart1
[10, 18, 72]
[10, 17, 72]
[11, 17, 72]
[10, 18, 72]
[10, 18, 72]
[10, 18, 72]
[10, 17, 73]
[10, 18, 72]
[10, 18, 72]
[10, 18, 71]

chart2 
[9, 20, 71]
[10, 21, 70]
[10, 19, 71]
[10, 20, 70]
[10, 19, 71]
[10, 20, 70]
[10, 20, 70]
[9, 20, 71]
[10, 20, 71]
[9, 20, 71] 
```

我不明白为什么`chart1`倾向于`..18, 72]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:34:40.423

那是因为数学是错误的。如果你想在第二次比较中使用一个新的随机数，那么它应该适用于 20/90 的情况，而不是 20/100。所以：

```
var rand1 = function() {
  if (Math.random() < 0.1) chart1[0]++;
  else if (Math.random() < 0.222222222222222) chart1[1]++;
  else chart1[2]++;
}; 
```

如果您不使用新的随机数，它会起作用，因为当您遇到第二个条件时，您知道该数字在 0.1 .. 1.0 的范围内，所以如果它小于 0.3，那就是 20/90 的情况。如果您选择一个新的随机数，则该数字将在 0.0 .. 1.0 范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:43:39.430

考虑在第一个图表的第二列中生成数字的概率。首先生成一个出现在第一列的概率为 10% 的数字。如果这个数字*没有*放在第一列，其中有 90% 的机会，那么它有 20% 的概率出现在第二列。您将一个数字放在第二张图表中的总概率为 0.9 * 0.2 = 0.18。添加一些随机变化，你会得到大约 18 的结果。

对于第三列，您有 100 - 10 - 18 = 72。

如果接受第二个值的概率更改为 2/9 而不是 2/10，我们的总接受概率将是 9/10 * 2/9 = 2/10，即 20%，这就是您想要的.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T15:45:29.437

好吧..你为什么在 if 条件下再次调用 Math.random() .???? 像这样使用。

```
var rand1 = function(){
var number = Math.random();
if(number <= 0.1) chart1[0]++;
else if(number <= 0.3) chart1[1]++;
else chart1[2]++;
}; 
```

现在这将根据您的需要提供正确的输出

# youtube - youtube iframe api 通过 ajax

> ID：15837686
> 
> 赞同：3
> 
> 时间：2013-04-05T15:24:12.837
> 
> 标签：youtube, youtube-api

我有一个系统，其中主要内容通过 ajax 加载，位于主“框架”的 div 内。

在某些页面中，我需要跟踪用户何时完成播放视频。我正在尝试使用 youtube iframe api。它工作正常，但我正在处理一些奇怪的事情。

主要问题：当用户观看完视频时，每个页面上发生的动作是不同的，不知何故，API 正在堆叠所有功能并一次运行。

例如，我有第一页，它是通过 ajax 加载的，并且有这个片段来加载 youtube 视频：

```
<script>
  // 2\. This code loads the IFrame Player API code asynchronously.
  if (window.YT)
  {
    window.YT = undefined;
  }

  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player = undefined;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('divVideo', {
      playerapiid: 'somecode',
      height: '309',
      width: '439',
      videoId: 'somecode',
      events: {
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4\. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED ) {
     actionToScreen1()
    }
  }

</script> 
```

它工作正常。但是，我为我的第二页加载了内容，现在问题开始了：

```
<script>
  // 2\. This code loads the IFrame Player API code asynchronously.
  if (window.YT)
  {
    window.YT = undefined;
  }

  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player = undefined;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('divVideo', {
      playerapiid: 'anothercode',
      height: '309',
      width: '439',
      videoId: 'anothercode',
      events: {
    'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4\. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED ) {
     actionToScreen2()
    }
  }

</script> 
```

当我的 screen2 上的视频播放完毕后，onPlayerStateChange 会被调用两次，一次调用 actionToScreen1，另一次调用 actionToScreen2。看起来我只是通过 ajax 加载容器，该函数在某种程度上存储在全局范围内，但我找不到位置，也找不到区分调用哪个函数的方法。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:10:45.937

如果不查看您的实际页面，很难准确判断所有不同变量的范围，但这里有一些一般性建议。

由于每次通过 AJAX 加载一些新内容时，您并没有完全重新加载您的网页，因此只需`https://www.youtube.com/iframe_api`从某个“父”页面加载一次库，而不是尝试删除它，然后在每次拉取新内容时重新加载它在。

作为对此的延伸，不要`onYouTubeIframeAPIReady`在引入新内容时监听事件。一个好的模式是调用一个方法来提示视频；在该方法中，如果定义`player`了（设置为您的`YT.Player`实例），则调用`player.cueVideo()`/ `player.loadVideo()`。如果`player`尚未定义，则`https://www.youtube.com/iframe_api`在此时加载库，并定义一个函数，该函数将在加载库后使用正确的视频 id`onYouTubeIframeAPIReady`调用构造函数。`YT.Player`

下面是一些 JavaScript 代码的示例，它几乎可以做到这一点：[https](https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/player.js) ://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/player.js它使用 RequireJS 模块，所以语法与您正在执行的操作略有不同，但总体思路是相同的。您可以通过使用该模块的外部 JS 文件调用该代码`player.playVideo(containerDiv, videoId)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T17:43:57.153

在尝试了各种解决方案后，我放弃了，并使用了一个完美的解决方法。

```
<iframe id="video-recorder" src="/site/recorder" scrolling="no"
            style="width: 400px; height: 260px; overflow: hidden;">
</iframe> 
```

将`iframe`负责重新加载 api 和一切..

这是在 iframe 中。确保您具有相同的大小，以便所有内容都可见：

```
<!doctype html><html><head>
<meta charset="utf-8">
<style>html,body { margin: 0; padding: 0; overflow: hidden; width: 400px; height: 260px; }</style>
<script src="http://www.youtube.com/iframe_api"></script>
<body>
    <div id="widget"></div>
    <div id="player"></div>

<script>
var widget;
var player;

function onYouTubeIframeAPIReady() {
    widget = new YT.UploadWidget('widget', {
        width: 400,
        height: 260,
        events: {
            'onUploadSuccess': onUploadSuccess,
            'onProcessingComplete': onProcessingComplete
        }
    });
} 
```

其余代码，如事件等，可以在官方页面上找到：[https ://developers.google.com/youtube/youtube_upload_widget](https://developers.google.com/youtube/youtube_upload_widget)

# dns - DKIM for Plesk 与远程管理的 DNS

> ID：15837689
> 
> 赞同：0
> 
> 时间：2013-04-05T15:24:17.897
> 
> 标签：dns, plesk, dkim, spf, amazon-route53

我们的主域 DNS 在 Amazon Route 53 上进行管理，因此在 Plesk (11.x) 中，我关闭了 DNS。问题是我想开始使用需要 SPF 和 DKIM txt 记录才能工作的 DMARC。

我们的 SPF 记录效果很好，因为我所做的只是将它限制在我们的 MX 中......

```
"v=spf1 mx -all" 
```

我已按如下方式设置了监控 DMARC 字符串，因此它仅发送报告但尚未主动过滤...

```
"v=DMARC1; p=none; rua=mailto:monitoringemail@ourdomain.tld" 
```

问题是 Plesk 通常会使用适当的公钥将 DKIM 相关的 TXT 记录自动添加到域 DNS 中，但是由于我们的 DNS 已针对无法访问记录的域关闭，即我在 plesk 中看不到它，所以我可以在 Amazon Route 53 上复制它。

目前我们没有被过滤，我在 Plesk 中再次关闭了 DKIM 支持，但是一旦我在 Plesk 中重新打开它，是否有可能在 DNS 记录区域以外的其他地方找到公钥普莱斯克？如果是这样，我将如何使用该信息来创建适当的 DKIM TXT DNS 字符串？

谢谢你的帮助！

* * *

编辑：似乎我将 DomainKeys 和 DKIM 混淆为同一件事，并且 Plesk 11 不直接支持 DKIM，所以我的新问题是，如何在 plesk 系统上生成 DKIM 记录以便消息是标记，其次，如何将其转换为 DNS TXT 记录以匹配它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:55:20.380

重新分级零件

> 似乎我将 DomainKeys 和 DKIM 混淆为同一件事，并且 Plesk 11 不直接支持 DKIM，所以我的新问题是，如何在 plesk 系统上生成 DKIM 记录

我使用 plesk 为 MandrillApp 做了同样的事情。只需进入 DNS 设置部分并选择“添加新记录” 选择类型 TXT 并输入给定的 DKIM 值。

希望能帮助到你。

# android - 动画在 FragmentTransaction (Android) 中不起作用

> ID：15837694
> 
> 赞同：0
> 
> 时间：2013-04-05T15:24:29.007
> 
> 标签：android, animation, fragment, transition

我对一个简单的片段切换越来越感到沮丧，由于某种原因它不会播放任何动画。

片段切换本身有效，我可以看到我的新片段。但是没有过渡。

谁能帮我理解为什么？这是我的片段交易代码：

```
public class FullscreenActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fullscreen);
    }

    @Override
    protected void onResume() {
        super.onResume();

        new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
                FragmentTransaction transaction = getFragmentManager().beginTransaction();
                transaction.setCustomAnimations(R.anim.slide_out_right, R.anim.slide_out_right);
                transaction.replace(R.id.root, new InitialFragment(),"DDDDD");
                transaction.commit();

            }
        }, 3000L);

    }
} 
```

在这里，在 slide_out_right.xml 中，名称具有误导性 - 我已将其设置为更基本的名称，以确保我没有搞砸动画参数：

```
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:valueFrom="0"
    android:valueTo="1"
    android:propertyName="alpha"
    android:duration="@android:integer/config_mediumAnimTime" /> 
```

无论哪种方式，我都没有看到任何效果。我尝试使用 setTranstition(FragmentTransiniot.TRANSIT_ **ALLMOST_ALL_OF_THE_FLAGS** )，似乎没有任何效果。

我没有通过支持库使用片段，而是在带有 Android 4.1.2 的根深蒂固的 Galaxy S 上进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:09:09.130

回答我自己的问题：由于我没有看到片段对我的任何影响，所以无论我尝试和编写什么动画，我都认为更全局的东西是错误的。答案非常愚蠢。

爆破的开发手机通过 Android 设置菜单中的“开发选项”禁用了动画师。我很惭愧地写下我花了多少时间才弄清楚这一点，但希望其他人可以从中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:52:47.813

更改 的值：

```
android:valueTo="1" 
```

至

```
android:valueTo="1000" 
```

和

```
android:propertyName="alpha" 
```

至

```
android:propertyName="x" 
```

如果你想让你的片段移动。我在版本 4.0.3 下的三星 Galaxy Tab 2 10.1 遇到了同样的问题。我应用动画的片段（沿 x 方向移动）根本没有移动。一旦我触摸它（碎片），它就会刷新并立即移动到最终目的地。

# ios - 从一个实体到多个实体之一的 CoreData 关系

> ID：15837696
> 
> 赞同：1
> 
> 时间：2013-04-05T15:24:34.260
> 
> 标签：ios, objective-c, core-data

我想创建一个实现以下功能的 CoreData 模型：

我有各种不同类型的实体（评论、图像、用户等），它们都有相同的 10 个字段（即 isSent、isReceived、isAuthorised、authorisationDate 等）

与其将这 10 个字段添加到每条记录，我想创建一个带有这些的单个实体（称为测量），并且我的每个其他实体都与测量实体具有一对一的关系。

我可以通过建立单向关系来做到这一点，但我希望这种关系是双向的（这样我就可以抓取所有授权的测量值，并跟踪它们是什么（无论它们是评论、图像, 用户等)

是否存在我未指定反向实体类型的反向关系？还是我需要为每个逆实体添加单独的关系？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:29:53.747

首先，这不是一个好的领域模型：这些类应该命名为别的，例如 UserMeasurement。我的建议是你考虑做一个模型，你有一个基本的抽象类，然后为每个实体类型做类。CoreData 实际上可以很好地进行继承。如果您有使用过 Hibernate 等 ORM 的经验，那会完全不同，但设置起来非常容易。这些东西都满足了继承的要求，应该没有办法衡量什么（这就是为什么基础应该是抽象的）。

这是讨论此问题的 CoreData 文档中[的位置](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:30:24.873

一种可能的解决方案是创建一个`Abstract Entity`所有这些类都继承自被调用`Measurable`的对象，并且关系可以存在于其中。

# sql-server-2008-r2 - 错误：注意：无法通过电子邮件通知“操作员”。作业失败时尝试发送电子邮件时

> ID：15837698
> 
> 赞同：21
> 
> 时间：2013-04-05T15:24:34.920
> 
> 标签：sql-server-2008-r2, database-mail

作业失败时发送通知有问题。我创建了数据库邮件配置文件并将其分配给 SQL 代理和重新启动的 SQL 代理。当我运行一个程序时`msdb.dbo.sp_send_dbmail`，正在发送电子邮件。此外，当我使用数据库邮件发送测试电子邮件时，它工作正常。但是，当我在作业失败时为作业设置通知时，在作业日志中我会看到以下信息：*注意：无法通过电子邮件通知“SQL 作业失败”。* 我不知道这个问题的根源是什么。我发现了这个提示：[http ://sqlblog.jfperry.com/jpsql/post/2009/04/07/NOTE-Failed-to-notify-7boperator7d-via-email.aspx](http://sqlblog.jfperry.com/jpsql/post/2009/04/07/NOTE-Failed-to-notify-7boperator7d-via-email.aspx)

但我检查了 SQL 代理中启用了配置文件。SQL 代理已重新启动。问题的根源在哪里？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-02-25T05:14:21.663

正如您在问题中提到的那样，我的问题确实是代理中的邮件配置文件-感谢您的提示。

![在此处输入图像描述](https://i.stack.imgur.com/YRsJX.png)

[本文](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/3eddcf38-2223-4e04-b3f1-430ccf7e9cd8/sql-agent-failed-to-notify-operator-via-email?forum=sqlservermigration)底部提到的其他提示包括：

> 1.  **确保在 SQL Server 外围应用配置中启用 DB 邮件。**通过右键单击服务器名称并从菜单中选择 FACETS 从 Facet 下拉菜单中选择“服务器配置”确保“DatabaseMailEnabled”的 Facet 属性为 True
>     
>     
> 2.  **在服务器的管理文件夹中设置邮件配置文件**
>     
>     
> 3.  **在 SQL Server 代理中设置操作员**
>     
>     
> 4.  **查看 SQL Server 代理的属性**（右键单击属性）并在警报系统页面下勾选“启用邮件配置文件”并选择您在步骤 2 中设置的默认配置文件。
>     
>     
> 5.  **重新启动 SQL Server 代理**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T13:52:12.440

SQL 代理的第二次重新启动解决了该问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-30T17:38:38.393

我必须授予 SQL Server 代理访问邮件配置文件的权限。

右键单击 SQL Server Management Studio 中的 SQL Server 代理节点，然后选择属性。然后切换到警报系统节点，并启用您希望允许 SQL Server 代理使用的邮件配置文件，重新启动 SQL Server 代理服务

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-26T09:39:20.323

这在 SQL Server 2014 中对我有用：

转到 SQL 代理作业的属性，选择通知页面，如果选中了电子邮件复选框，则取消选中它，应用该更改。然后返回工作并重新勾选该框并选择您的运营商，然后再次申请。

[![在此处输入图像描述](https://i.stack.imgur.com/wUQdW.png)](https://i.stack.imgur.com/wUQdW.png)

我认为最初的问题是由于弄乱了 DbMail 配置文件造成的，因此解除和重新连接到 Operator 的链接似乎使事情变平了。

# sql-server-2008 - SQL Server 2008 中的 Varchar 到日期时间

> ID：15837702
> 
> 赞同：0
> 
> 时间：2013-04-05T15:24:56.150
> 
> 标签：sql-server-2008, datetime, substring

我正在尝试从文件名中捕获 datepart 并尝试将其转换为 datetime 数据类型。

```
SELECT CONVERT(Datetime, substring('EmployeeExcel_03312013',15,22), 120) 
```

出现以下错误：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

有任何想法吗？请建议我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:31:24.317

您可以使用以下内容：

```
SELECT 
  convert(datetime, 
           right('EmployeeExcel_03312013', 4)
            +substring('EmployeeExcel_03312013',15,4), 112) 
```

`20130331`这将在转换为日期之前以格式获取值。

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/68b32/117)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:32:28.007

你可以试一试

```
DECLARE @Date char(8)
set @Date=substring('EmployeeExcel_03312013',15,22)
SELECT CONVERT(datetime,RIGHT(@Date,4)+LEFT(@Date,2)+SUBSTRING(@Date,3,2)) 
```

输出：

```
-----------------------
2013-03-31 00:00:00.000

(1 row(s) affected) 
```

[SQLFiddle 示例](http://www.sqlfiddle.com/#!6/d41d8/3350)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:29:14.980

这里有一个类似的帖子：[Convert varchar into datetime in SQL Server](https://stackoverflow.com/questions/1509977/convert-varchar-into-datetime-in-sql-server)

为了使它更简单：

```
select convert(datetime, '03312013', 120) --produces error 
```

这表明 CONVERT 不知道如何处理以这种方式格式化的字符串。

如果您将日期拆分为看起来更像“03-31-2013”​​（这是上面的链接所指示的）或类似的东西，那么您会很好。

# c# - 将连接字符串传递给代码优先的 DbContext 时出现迁移错误

> ID：15837709
> 
> 赞同：1
> 
> 时间：2013-04-05T15:25:18.077
> 
> 标签：c#, .net, entity-framework, entity-framework-5, entity-framework-migrations

我有一个名为 OnlineShoppingContext 的 DBContext 驱动类，如下所示：

```
public class OnlineShoppingContext:DbContext
{
    public OnlineShoppingContext(string connectionString):base(connectionString)
    {
    }

    public DbSet<User> Users { get; set; }
} 
```

我在以下代码中使用它：

```
using (var context = new OnlineShoppingContext("ConnectionStringValue"))
{
    if (context.Users.Any(item => item.Email == Email && item.Password == "pass"))
        session["Username"] = Email;
} 
```

但我收到以下异常：

```
The model backing the 'OnlineShoppingContext' context has changed since the database was created. Consider using Code First Migrations to update the database (http://go.microsoft.com/fwlink/?LinkId=238269). 
```

我使用 Delete 重新创建数据库，然后使用 dbcontext 的 CreateIfDoesNotExist 方法，但我再次收到提到的异常。我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:51:50.270

由于您没有设置 DB Initializer，请尝试使用以下内容：

```
Database.SetInitializer<OnlineShoppingContext>(null); 
```

# javascript - 根据第一个字段输入在多个字段中的自动建议脚本中查询

> ID：15837711
> 
> 赞同：0
> 
> 时间：2013-04-05T15:25:27.763
> 
> 标签：javascript, jquery, forms, autosuggest

我目前正在修改一个开箱即用的 php/jQuery 自动建议脚本。我有以下问题：

我有两个带有自动建议的表单字段。第一个字段供用户输入城市。所以我的 php 文件`autosuggest.php`查询数据库并找到匹配项`parent = 9`（这是所有城市）。现在对于用户输入的第二个字段，`school`我希望我的 php 通过数据库查询并找到将输入城市作为父级的学校。

我试图通过将从 PHP 返回的字符串存储到 javascript（当用户输入城市时）到`SESSION`变量来解决这个问题。`autosuggest.php`然后在查询查找第二个表单的匹配项时将此会话变量用作父级。

但我无法让它工作。我收到此错误：

```
Catchable fatal error: Object of class mysqli_result could not be converted to string in

autosuggest.php on line 47 (LIKE '$queryString%'). 
```

但如果我注释掉或删除`$parent = $termquery;`.`autosuggest.php`

这是我的代码：

**index.php 包含此脚本：**

```
<?php session_start();?>
<script>

    var globEl = "";
    function suggest(inputString){
        var activeEle = document.activeElement.id;
        globEl = activeEle;
        if(inputString.length == 0) {
            $('#suggestions').fadeOut();
        } else if(activeEle == "city") {
            $('#city').addClass('load');
            $.post("autosuggest.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').fadeIn();
                    $('#suggestionsList').html(data);
                    $('#city').removeClass('load');
                }
            });
        } else if(activeEle == "school") {
            $('#school').addClass('load');
            $.post("autosuggest.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').fadeIn();
                    $('#suggestionsList').html(data);
                    $('#school').removeClass('load');
                }
            });
        }   
    }

    function fill(thisValue) {
        if (globEl == 'city') {
            $('#city').val(thisValue);
            $.post('update_session.php', {parentnamee: thisValue});
            setTimeout("$('#suggestions').fadeOut();", 0);
        } else if(globEl == 'school') {
            $('#school').val(thisValue);
            $.post('update_session.php', {parentnamee: thisValue});
            setTimeout("$('#suggestions').fadeOut();", 0);
        } 
    }

</script> 
```

**更新会话.php**：

```
<?php
    session_start();
    $_SESSION['foreldrenavnn'] = $_POST['foreldrenavnn'];
?> 
```

**自动建议.php**：

```
<?php
    session_start();
    $db_host = 'host';
    $db_username = 'user';
    $db_password = 'passw';
    $db_name = 'db';
    $parent = 9;

    $db = new mysqli($db_host, $db_username ,$db_password, $db_name);

if(!$db) {

    echo 'Could not connect to the database.';
} else {

    if(isset($_SESSION['parentnamee'])) {
        $parentstring = $db->real_escape_string($_SESSION['parentnamee']);

        if(strlen($parentstring) >0) {
            $termquery = $db->query("
            SELECT wp_terms.term_id
            FROM wp_terms
            WHERE wp_terms.name='$parentstring%'
            ");
            $parent = $termquery;
        }

    } else {
        // do nothing
    }

    if(isset($_POST['queryString'])) {
        $queryString = $db->real_escape_string($_POST['queryString']);

        if(strlen($queryString) >0) {
            $query = $db->query("
            SELECT wp_terms.name
            FROM wp_terms
            INNER JOIN wp_term_taxonomy
            ON wp_terms.term_id = wp_term_taxonomy.term_id
            AND wp_term_taxonomy.parent=$parent
            WHERE wp_terms.name
            LIKE '$queryString%'
            LIMIT 10
            ");

            if(mysqli_num_rows($query) > 0) {
                if($query) {
                echo '<ul>';
                    while ($result = $query ->fetch_object()) {
                        echo '<li onClick="fill(\''.addslashes($result->name).'\');">'.$result->name.'</li>';       
                    }   
                echo '</ul>';

                } else {
                    echo 'OOPS we had a problem :(';
                }
            } else {
                echo '<ul>';
                echo '<span style="color:#0196E3";>'.$queryString.'</span> no matches.';
                echo '</ul>';
            }   
        } else {
                // do nothing
            }
        } else {
            echo 'There should be no direct access to this script!';
        }
    }
?> 
```

任何人有任何想法我做错了什么？非常感谢您的帮助！

# php - 文件中的字符编码错误

> ID：15837713
> 
> 赞同：0
> 
> 时间：2013-04-05T15:25:28.580
> 
> 标签：php, character-encoding

我有一个输入，用户可以（并且将永远）从 MSword 粘贴数据；特别是像`&copy;` `&reg;` `&trade;`

当我使用将值添加到数据库系统时`html_entity_decode($foo, ENT_NOQUOTES, 'UTF-8');`

当我从数据库系统读取数据时，它在屏幕上呈现良好，但是当我将数据写入文件（使用`fputscsv`）并将其附加到电子邮件中时，生成的 csv 文件（在 Excel 中打开）它会像**CopyrightÂ©**一样出现。

关于如何以正确的文件格式获取它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:59:32.257

在写入 CSV 字符串之前尝试将字节顺序标记写入文件。

```
$byte_order_mark = "\xEF\xBB\xBF";
$contents = $byte_order_mark . $csv_string;
file_put_contents( $path_to_csv_file ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:47:44.003

找到解决方案；它原来是一个字符编码问题（我责怪微软，因为当你在 Notepad++ 中打开文件时它很好）。

将数据添加到文件时，使用[iconv](http://php.net/manual/en/function.iconv.php)转换数据的字符编码。
例子;

```
foreach ($data_row as $k => $cell) {
    $data_row[$k] = iconv("UTF-8", "ISO-8859-1//TRANSLIT", $cell);
} 
```

# java - 尝试使用 SVNKit 执行结帐时出现“找不到路径”错误

> ID：15837715
> 
> 赞同：0
> 
> 时间：2013-04-05T15:25:38.043
> 
> 标签：java, merge, svnkit, vcs-checkout

在合并分支和主干之前，我正在正确执行结帐。在该过程之后（合并文件夹trunk/Fontes 和branches/1.1.0/Fontes，将trunk/Fontes 作为工作副本），我在签出项目或更新工作副本时遇到问题。

我收到的消息如下：svn:E160013: '/svn/siaj/!/svn/bc/47/branches/Fontes' path not found: 404 Not Found。（其中 siaj 是存储库的名称）。

该消息告诉我问题出现在版本 47 中，这是执行合并的版本。问题是，文件夹“branches/Fontes”不存在，也从未存在。采用的结构曾经是分支/xxx/Fontes（其中 xxx 是正在开发的系统的版本）。

Java代码是这样的：

```
if(!SVNWCUtil.isVersionedDirectory(this.wdWorkingCopy)){
  this.wdWorkingCopy.mkdir();            
  this.updateClient.doCheckout(SVNURL.parseURIEncoded(this.repositorio), this.wdWorkingCopy, SVNRevision.UNDEFINED, SVNRevision.HEAD, SVNDepth.INFINITY, true);     
}else{          
  this.updateClient.doUpdate(wdWorkingCopy, SVNRevision.UNDEFINED, SVNDepth.INFINITY, true, false);
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:03:37.863

结帐后发生错误......我的错误。结帐/更新过程很好。我试图访问存储库中不存在的目录中的文件。

# vb.net - 拆分容器调整大小时的列表视图列宽

> ID：15837719
> 
> 赞同：0
> 
> 时间：2013-04-05T15:25:41.080
> 
> 标签：vb.net, listview, resize, splitcontainer

我的拆分容器中有一个列表视图。我的列表视图包含两列。其中一个我想在调整拆分容器的大小时自动调整。

这是一个视觉视角：

![正常尺寸](https://i.stack.imgur.com/PaiJZ.png)

调整大小后

![调整大小](https://i.stack.imgur.com/33Mst.png)

如您所见，列的大小保持不变......即使在我的拆分容器调整大小事件中使用此代码：

```
Private Sub sc_Target_Resize(sender As Object, e As System.EventArgs) Handles sc_Target.Resize
    If lvTarget.Columns.Count > 1 Then lvTarget.Columns(1).Width = -2
End Sub 
```

我还尝试在表单加载时将列宽设置为 -2 ... 没有改变任何东西。显然，列表视图列上的 -2 宽度应该使其自动调整大小。我想要做的甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:00:47.107

我找到了我的解决方案。我是在拆分容器调整大小而不是实际的列表视图调整大小上做的。

这是解决方案：

```
Private Sub lwTarget_Resize(sender As Object, e As System.EventArgs) Handles lwTarget.Resize
    If lwTarget.Columns.Count > 1 Then lwTarget.Columns(1).Width = -2
End Sub 
```

# prolog - 如何避免序言中未实例化的变量？

> ID：15837722
> 
> 赞同：0
> 
> 时间：2013-04-05T15:25:47.827
> 
> 标签：prolog

在序言中，如果列表包含的元素是`A/B`.

```
match(A,B,[H|T]) :- (H=A/B -> !; match(A,B,T)). 
```

当我为 A 和 B 以及列表提供实例化变量时，这很有效。但是，如果我将列表作为变量提供，那么我会得到一个列表，其中包含`_GXXXX`我不想获得的未实例化变量。有谁知道如何解决这一问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:35:09.750

*   您可以测试一个变量以查看它是否绑定到某个东西（使用谓词`var/1`and `nonvar/1`）

因此，例如，如果您希望第三个参数在未实例化的情况下失败，您可以这样做：

```
match(A,B,L) :- 
  nonvar(L), 
  L=[H|T], 
  (H=A/B -> !; match(A,B,T)). 
```

如果你只关心`H`你的例子，那么你会这样做：

```
match(A,B,[H|T]) :- nonvar(H), (H=A/B -> !; match(A,B,T)). 
```

# perforce - 在 Perforce 中复制现有工作区

> ID：15837723
> 
> 赞同：0
> 
> 时间：2013-04-05T15:25:48.517
> 
> 标签：perforce

我想复制我同事的工作空间，包括他的本地更改。我如何在 Perforce 中做到这一点？

谢谢！新立44

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:58:31.090

我认为您不能一步完成，但以下应该可行。

1.  同步您的工作区，以便您拥有与同事相同的修订版

    `$> p4 sync @your_coworkers_client_spec_name`

2.  然后要获得本地更改，让您的同事搁置他的更改，然后您可以使用`p4 unshelve -s shelve-list`.

# django-queryset - 绕过 Tastypie 忽略多对多查询上的查询集

> ID：15837727
> 
> 赞同：2
> 
> 时间：2013-04-05T15:26:01.770
> 
> 标签：django-queryset, django-orm, tastypie

我无法让 Tastypie 正确处理 ManyToMany 查询。

这是我的模型的简化版本。

```
class Buttons(models.Model):
    name = models.CharField(max_length=255)
    deleted = models.IntegerField()
    date_entered = models.DateTimeField(auto_now_add=True)
    date_modified = models.DateTimeField(auto_now=True)
    jacket = models.ManyToManyField('Jackets', through='JacketsButtons', related_name='buttons_jackets', blank=True)

    class Meta:
        app_label = 'habby'
        db_table = u'buttons'

#joining table
class JacketsButtons(models.Model):
    date_modified = models.DateTimeField(auto_now=True)
    deleted = models.IntegerField()
    jacket_id = models.ForeignKey('Jackets')
    button_id = models.ForeignKey('Buttons')
    class Meta:
        app_label = 'habby'
        db_table = u'jacket_buttons'

class Jackets(models.Model):
    name = models.CharField(max_length=450, blank=True)
    deleted = models.IntegerField()
    date_entered = models.DateTimeField(auto_now_add=True)
    date_modified = models.DateTimeField(auto_now=True)

    class Meta:
        app_label = 'habby'
        db_table = u'jackets' 
```

这些是资源模型：

```
class ButtonsResource(ModelResource):
    jacket = fields.ToManyField('habby.JacketsResource', "jacket", null=True, readonly=True)
    class Meta:
        queryset = Buttons.objects.filter(jacketsbuttons__deleted=0)
        resource_name = 'buttons'
        always_return_data = True
        filtering = {
                "id": ALL,
                "name": ALL,
                "deleted" : ALL,
                "date_entered" : ALL,
                "date_modified" : ALL,
                "jacket" : ALL_WITH_RELATIONS
        }

class JacketsResource(ModelResource):
    class Meta:
        queryset = Jackets.objects.filter(deleted=0)
        resource_name = 'jackets'
        always_return_data = True
        filtering = {
                "id": ALL,
                "name": ALL,
                "deleted" : ALL,
                "date_entered" : ALL,
                "date_modified" : ALL,
        } 
```

现在，我要做的是过滤按钮，通过连接表上的一个参数和夹克表上的一个参数，这在 django 中完美运行：

```
Buttons.objects.filter(
        jacket__id="1",
        jacketsbuttons__deleted=0) 
```

但我不知道如何在 TastyPie 中做同样的事情。

我试过这个：

```
GET /api/v1/buttons/?jacket__id=1&jacketsbuttons__deleted=0 
```

但是 TastyPie 忽略了 jacksbuttons__deleted 参数，因为它在 Resource.build_filters() 中被删除，因为它在 self.fields 中找不到。

因此，我尝试了上面显示的设置，其中我将条件指定为元类中查询集的一部分，这让我想到了这个问题的主题。

当查询资源并指定jacket__id 时，它完全忽略查询集，因此，连接表过滤器。

```
...
class Meta:
            queryset = Buttons.objects.filter(jacketsbuttons__deleted=0)
...

GET /api/v1/buttons/?jacket__id=1 
```

但是，当我将 jack__id 参数替换为另一个本机按钮参数时，或者甚至省略所有参数时，它都可以正常工作，连接表过滤器使用正确。

```
GET /api/v1/buttons/?name=round_button 
```

[我还按照TastyPie Cookbook](https://github.com/toastdriven/django-tastypie/blob/master/docs/cookbook.rst)中的建议尝试了“查询集的每个请求更改” ，但是当我尝试通过 jack__id 查询时，它也被忽略了：

```
class Meta:
        queryset = Buttons.objects.all()

    def get_object_list(self, request):
        return super(ButtonsResource, self).get_object_list(request).filter(jacketsbuttons__deleted=0) 
```

那么，为什么会被忽视呢？如何强制使用它？

另外，有没有人知道更好的方法来实现这一目标？

提前致谢。

杰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:40:38.083

我之前有过类似的情况，然后我所做的就是将 apply_filter 函数修改为如下所示：

```
def apply_filters(self, request, applicable_filters):
    """
    accept extra query in request
    """
    query_foo = request.GET.get('foo', None)
    query_bar = request.GET.get('bar', None)
    semi_filtered = super(RouteResource, self).apply_filters(request, applicable_filters)
    if query_foo:
        filtered_objects = semi_filtered.filter(..something with query_foo..)
        return filtered_objects
    else:
        return semi_filtered 
```

您可以随时查看美味派的资源代码以了解此功能的工作原理。希望能帮助到你。

# python - 从集合中随机选择？Python

> ID：15837729
> 
> 赞同：117
> 
> 时间：2013-04-05T15:26:03.797
> 
> 标签：python, list, set

我正在研究猜谜游戏的人工智能部分。我想让 AI 从这个列表中随机选择一个字母。我将其作为一组进行，因此我可以轻松地从列表中删除字母，因为它们在游戏中被猜到，因此不再可以再次被猜到。

它说`set`对象不可索引。我该如何解决这个问题？

```
import random 
aiTurn=True

while aiTurn == True:
    allLetters = set(list('abcdefghijklmnopqrstuvwxyz'))
    aiGuess=random.choice(allLetters)

    print (aiGuess) 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-04-05T15:29:10.080

**注意（2020 年 10 月）：**从 v3.9 开始，Python 已[正式弃用](https://docs.python.org/3.9/library/random.html#random.sample) `random.sample()`在集合上工作，官方指导是在传入之前将集合显式转换为列表或元组，但这并不能解决效率问题.

* * *

```
>>> random.sample(set('abcdefghijklmnopqrstuvwxyz'), 1)
['f'] 
```

文档：[https ://docs.python.org/3/library/random.html#random.sample](https://docs.python.org/3/library/random.html#random.sample)

请注意，无论您如何操作，从集合中选择随机元素的**效率都非常低- 它所花费的时间与集合的大小成正比，或者如果集合的底层哈希表由于删除的元素而变得稀疏，则更糟。**

相反，您可能应该使用有效支持此操作的[不同数据结构。](https://stackoverflow.com/questions/15993447/python-data-structure-for-efficient-add-remove-and-random-choice)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-07-25T06:53:27.227

您应该使用`random.choice(tuple(myset))`，因为它比`random.sample`. 我写了以下内容进行测试：

```
import random
import timeit

bigset = set(random.uniform(0,10000) for x in range(10000))

def choose():
    random.choice(tuple(bigset))

def sample():
    random.sample(bigset,1)[0]

print("random.choice:", timeit.timeit(choose, setup="global bigset", number=10000)) # 1.1082136780023575
print("random.sample:", timeit.timeit(sample, setup="global bigset", number=10000)) # 1.1889629259821959 
```

从数字看来，这似乎`random.sample`需要 7% 的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-20T06:52:59.343

`list`您可以通过使用 a而不是a 来解决此问题`set`。您仍然可以从列表中“轻松”删除字母。试试这个，例如：

```
allLetters = list('abcdefghijklmnopqrstuvwxyz')
aiGuess = random.choice(allLetters)
allLetters.remove(aiGuess) 
```

另一种选择是随机选择索引而不是字母，这可能会稍微快一些，因为我们不需要搜索要删除的元素（但我想知道速度在这里是否真的很重要？）：

```
allLetters = list('abcdefghijklmnopqrstuvwxyz')
index = random.randint(0, len(allLetters)-1) # Top is inclusive, unlike slices
aiGuess = allLetters[index]
del allLetters[index] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-14T03:23:31.593

由于选择列表不是很长，您可以先使用 random.shuffle 列表。然后迭代列表中的每个元素。这样可以避免从列表中一一删除元素，并使您的代码更简洁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-28T04:23:59.977

如果要从集合中获取随机元素。

```
a = set()
for i in range(10):
    a.add(i)
a.pop() // gives a random element from a set 
```

# android - 从 ListView 获取视图

> ID：15837734
> 
> 赞同：0
> 
> 时间：2013-04-05T15:26:20.000
> 
> 标签：android

我必须在 ListView 中找到 ImageView 的坐标，但我做不到。我曾尝试使用 getItemAtPosition() 但 APP 崩溃。每个 ImageView 都有不同的标签，并且在我的 ListView 的每一行中。

我的功能：

```
ListView listStudents = (ListView) findViewById(R.id.listStudents);
View view = (View) listStudents.getItemAtPosition(0); 
```

这是我的 ListViewAdapter：

```
private ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();

public ListViewAdapter(Context context, ArrayList<HashMap<String,String>> items) {
     mContext = context;
     this.list = items;
}

public int getCount() {
     return list.size();
}

@Override
public Object getItem(int position) {
     return list.get(position);
}

public long getItemId(int position) {
     return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
ViewHolder holder = new ViewHolder();

if (convertView == null) {
    LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.row_layout, null);

    /*
     * Button 1
     */
    holder.imageStudent   = (ImageView)convertView.findViewById(R.id.firstStudentImage);
    holder.imageStudent.setAlpha(50);
    holder.imageStudent.setOnClickListener(this);
    holder.imageStudent.setTag(this.numElements);
    holder.nameStudent   = (TextView)convertView.findViewById(R.id.firstStudentName);

    /*
     * Button 2
     */
    holder.imageStudent2   = (ImageView)convertView.findViewById(R.id.secondStudentImage);
    holder.imageStudent2.setAlpha(50);
    holder.imageStudent2.setOnClickListener(this);
    holder.imageStudent2.setTag(this.numElements+1);
    holder.nameStudent2   = (TextView)convertView.findViewById(R.id.secondStudentName);

    /*
     * Button 3
     */
    holder.imageStudent3   = (ImageView)convertView.findViewById(R.id.thirdStudentImage);
    holder.imageStudent3.setAlpha(50);
    holder.nameStudent3 = (TextView)convertView.findViewById(R.id.thirdStudentName);
    holder.imageStudent3.setTag(this.numElements+2);
    holder.imageStudent3.setOnClickListener(this);

    holder.imageStudent4   = (ImageView)convertView.findViewById(R.id.fourthStudentImage);
    holder.imageStudent4.setAlpha(50);
    holder.nameStudent4 = (TextView)convertView.findViewById(R.id.fourthStudentName);
    long value = 2723250804L;
    holder.imageStudent4.setTag(value);
    holder.imageStudent4.setOnClickListener(this);

    /*
     * Button 5
     */
    holder.imageStudent5   = (ImageView)convertView.findViewById(R.id.fivethStudentImage);
    holder.imageStudent5.setAlpha(50);
    holder.nameStudent5   = (TextView)convertView.findViewById(R.id.fivethStudentName);
    holder.imageStudent5.setTag(this.numElements+4);
    holder.imageStudent5.setOnClickListener(this);

    /*
     * Button 6
     */
    holder.imageStudent6   = (ImageView)convertView.findViewById(R.id.sixthStudentImage);
    holder.imageStudent6.setAlpha(50);
    holder.nameStudent6   = (TextView)convertView.findViewById(R.id.sixthStudentName);
    holder.imageStudent6.setTag(this.numElements+5);
    holder.imageStudent6.setOnClickListener(this);

    convertView.setTag(holder);

    int  idImage = this.mContext.getResources().getIdentifier(this.list.get(position).get("studentImage"),"drawable", this.mContext.getPackageName());
    Drawable myDrawable = this.mContext.getResources().getDrawable(idImage);
    holder.imageStudent.setImageDrawable(myDrawable);
    holder.nameStudent.setText(this.list.get(position).get("studentName"));

    idImage = this.mContext.getResources().getIdentifier(this.list.get(position).get("studentImage2"),"drawable", this.mContext.getPackageName());
    myDrawable = this.mContext.getResources().getDrawable(idImage);
    holder.imageStudent2.setImageDrawable(myDrawable);
    holder.nameStudent2.setText(this.list.get(position).get("studentName2"));

    idImage = this.mContext.getResources().getIdentifier(this.list.get(position).get("studentImage3"),"drawable", this.mContext.getPackageName());
    myDrawable = this.mContext.getResources().getDrawable(idImage);
    holder.imageStudent3.setImageDrawable(myDrawable);
    holder.nameStudent3.setText(this.list.get(position).get("studentName3"));

    idImage = this.mContext.getResources().getIdentifier(this.list.get(position).get("studentImage4"),"drawable", this.mContext.getPackageName());
    myDrawable = this.mContext.getResources().getDrawable(idImage);
    holder.imageStudent4.setImageDrawable(myDrawable);
    holder.nameStudent4.setText(this.list.get(position).get("studentName4"));

    idImage = this.mContext.getResources().getIdentifier(this.list.get(position).get("studentImage5"),"drawable", this.mContext.getPackageName());
    myDrawable = this.mContext.getResources().getDrawable(idImage);
    holder.imageStudent5.setImageDrawable(myDrawable);
    holder.nameStudent5.setText(this.list.get(position).get("studentName5"));

    idImage = this.mContext.getResources().getIdentifier(this.list.get(position).get("studentImage6"),"drawable", this.mContext.getPackageName());
    myDrawable = this.mContext.getResources().getDrawable(idImage);
    holder.imageStudent6.setImageDrawable(myDrawable);
    holder.nameStudent6.setText(this.list.get(position).get("studentName3"));
}
else
{
    holder = (ViewHolder)convertView.getTag();
}

return convertView;
}

@SuppressWarnings("deprecation")
@Override
public void onClick(View v) {
    EventActivity.currentButton = (Integer) v.getTag();
Activity activity = (Activity) mContext;
activity.showDialog(1);
EventActivity.currentView = (View) v.getParent();
} 
```

这是我的 row_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="40dp"
    android:layout_marginRight="10dp"
    android:orientation="horizontal" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_marginRight="40dp"  
    android:layout_marginLeft="20dp"
    >
    <ImageView 
        android:id="@+id/firstStudentImage"
        android:contentDescription="@string/test"
        android:maxWidth="250dp"    
        android:maxHeight="150dp"
        android:layout_width="81dp"
        android:layout_height="115dp"
        >
    </ImageView>
    <TextView
        android:id="@+id/firstStudentName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textIsSelectable="false">
    </TextView>

    <Button
        android:id="@+id/firstStudentButton"
        android:layout_width="81dp"
        android:layout_height="wrap_content"
        android:background="@color/attendance_no_data"
        android:textColor="@color/settings_text_color"
        android:text="@string/attendance_no_data" >
    </Button>
</LinearLayout>

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginRight="40dp"   
    android:orientation="vertical">
    <ImageView 
        android:id="@+id/secondStudentImage"
        android:contentDescription="@string/test"
        android:maxWidth="250dp"    
        android:maxHeight="150dp"
        android:layout_width="81dp"
        android:layout_height="115dp"
        >
    </ImageView>
    <TextView
        android:id="@+id/secondStudentName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textIsSelectable="false">
    </TextView>
    <Button
        android:id="@+id/firstStudentButton"
        android:layout_width="81dp"
        android:layout_height="wrap_content"
        android:background="@color/attendance_no_data"
        android:textColor="@color/settings_text_color"
        android:text="@string/attendance_no_data" >
    </Button>
</LinearLayout>

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginRight="40dp"  
    android:orientation="vertical">
    <ImageView 
        android:id="@+id/thirdStudentImage"
        android:contentDescription="@string/test"
        android:maxWidth="250dp"    
        android:maxHeight="150dp"
        android:layout_width="81dp"
        android:layout_height="115dp"
        >
    </ImageView>
    <TextView
        android:id="@+id/thirdStudentName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textIsSelectable="false">
    </TextView>
    <Button
        android:id="@+id/firstStudentButton"
        android:layout_marginLeft="25dp"
        android:layout_width="81dp"
        android:layout_height="wrap_content"
        android:background="@color/attendance_no_data"
        android:textColor="@color/settings_text_color"
        android:text="@string/attendance_no_data" >
    </Button>
</LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginRight="40dp"  
                android:orientation="vertical">
    <ImageView 
        android:id="@+id/fourthStudentImage"
        android:contentDescription="@string/test"
        android:maxWidth="250dp"    
        android:maxHeight="150dp"
        android:layout_width="81dp"
        android:layout_height="115dp"
        >
    </ImageView>
    <TextView
        android:id="@+id/fourthStudentName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textIsSelectable="false">
    </TextView>
    <Button
        android:id="@+id/firstStudentButton"
        android:layout_marginLeft="25dp"
        android:layout_width="81dp"
        android:layout_height="wrap_content"
        android:background="@color/attendance_no_data"
        android:textColor="@color/settings_text_color"
        android:text="@string/attendance_no_data" >
    </Button>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
         android:layout_height="match_parent"
     android:layout_marginRight="40dp"
         android:orientation="vertical">
    <ImageView 
        android:id="@+id/fivethStudentImage"
        android:contentDescription="@string/test"
        android:maxWidth="250dp"    
        android:maxHeight="150dp"
        android:layout_width="81dp"
        android:layout_height="115dp">
    </ImageView>
    <TextView
        android:id="@+id/fivethStudentName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textIsSelectable="false">
    </TextView>
    <Button
        android:id="@+id/firstStudentButton"
        android:layout_marginLeft="25dp"
        android:layout_width="81dp"
        android:layout_height="wrap_content"
        android:background="@color/attendance_no_data"
        android:textColor="@color/settings_text_color"
        android:text="@string/attendance_no_data" >
    </Button>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginRight="40dp"
    android:orientation="vertical">
    <ImageView 
        android:id="@+id/sixthStudentImage"
        android:contentDescription="@string/test"
        android:maxWidth="250dp"    
        android:maxHeight="150dp"
            android:layout_width="81dp"
        android:layout_height="115dp">
    </ImageView>
    <TextView
        android:id="@+id/sixthStudentName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textIsSelectable="false">
    </TextView>
    <Button
        android:id="@+id/firstStudentButton"
        android:layout_marginLeft="25dp"
        android:layout_width="81dp"
        android:layout_height="wrap_content"
        android:background="@color/attendance_no_data"
        android:textColor="@color/settings_text_color"
        android:text="@string/attendance_no_data" >
    </Button>
</LinearLayout> 
```

这是错误：

```
 04-05 15:57:46.238: E/AndroidRuntime(22906): FATAL EXCEPTION: main
04-05 15:57:46.238: E/AndroidRuntime(22906): java.lang.ClassCastException: java.lang.Integer cannot be cast to com.nsts.eventmarker.ListViewAdapter$ViewHolder
04-05 15:57:46.238: E/AndroidRuntime(22906):    at com.nsts.eventmarker.ListViewAdapter.getView(ListViewAdapter.java:187)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.AbsListView.obtainView(AbsListView.java:2143)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.ListView.onMeasure(ListView.java:1158)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.View.measure(View.java:15513)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.View.measure(View.java:15513)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.View.measure(View.java:15513)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.View.measure(View.java:15513)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.View.measure(View.java:15513)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.Choreographer.doFrame(Choreographer.java:532)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.os.Handler.handleCallback(Handler.java:725)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.os.Looper.loop(Looper.java:137)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at android.app.ActivityThread.main(ActivityThread.java:5039)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at java.lang.reflect.Method.invoke(Method.java:511)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-05 15:57:46.238: E/AndroidRuntime(22906):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:14:17.463

它是`ClassCastException`

```
EventActivity.currentButton = (Integer) v.getTag(); 
```

我认为错误就在这条线上

`long value = 2723250804L;`

这是 long 值，您将其设置为标记，然后您尝试将此 long 转换为 integer 。我认为这是不可能的

实际上**v.getTag();** 返回 object 。您正在尝试将**object**转换为**Integer**。我确定`v.getTag();`返回整数。然后只有它起作用（[参考](https://stackoverflow.com/a/3661441/1450401)）

这个数据类型是什么`EventActivity.currentButton`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:24:42.697

看看[这篇文章](https://stackoverflow.com/questions/8693296/how-to-get-view-for-an-item-in-listview-in-android)。我认为它回答了您的问题，即如何通过使用`setTag`和`getTag`方法在特定位置查找某些内容来获取视图。

错误是一个`ClassCastException`. 它发生在您将标记 id 转换为`ViewHolder`代码末尾的 a 或您将视图标记转换为`Integer`. 查看上面的示例并以这种方式设置代码以避免此错误。

# php - php 函数中的“警告：mysql_fetch_assoc()”

> ID：15837736
> 
> 赞同：0
> 
> 时间：2013-04-05T15:26:21.533
> 
> 标签：php, function

我有以下功能：

```
function user_data($user_id) {

    $data = array();
    $user_id = (int)$user_id;

    $func_num_args = func_num_args();
    $func_get_args = func_get_args();

    if ( $func_num_args > 1 ) {     
        unset($func_get_args[0]);

        $fields = '`' . implode('`, `', $func_get_args) . '`';

        $data = mysql_fetch_assoc(  mysql_query(" SELECT $fields FROM `users` WHERE `user_id` = $user_id ")  );

        return $data;
    }       
} 
```

我得到的错误消息是：警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 271 行的 C:\xampp\htdocs\mytest\core\functions\users.php 中给出的布尔值知道我的问题在哪里功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:28:56.433

您的`MySQL`查询失败。您需要考虑添加一些错误检查。`mysql_error`当结果`mysql_query`为假时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:28:07.233

您的连接很可能超出范围。您需要将其传递给您的函数。

```
function user_data($user_id, $connect) {
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:29:06.183

从[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)，`mysql_query`将返回`FALSE`错误。在这种情况下，有一个问题，所以它返回`FALSE`，它被传递给`mysql_fetch_assoc`，导致错误。

正如 datasage 所说，用于`mysql_error`查找问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:29:23.043

`mysql_query()`失败返回`FALSE`。在使用它之前检查你的`$fields`变量。并`mysqli`改为使用。

```
$result = mysql_query("SELECT * FROM $fields") ;
if ($result){
  //continue here, count rows or do something else.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:30:28.510

查询`" SELECT $fields FROM users WHERE user_id = $user_id "`由于某种未知原因而失败。这会导致`mysql_query`返回`FALSE`PHP 资源的 insterad。

调用[`mysql_error()`](http://www.php.net/manual/en/function.mysql-error.php)以找出查询失败的原因。

# javascript - Mouseout 检测到新的div？

> ID：15837739
> 
> 赞同：0
> 
> 时间：2013-04-05T15:26:35.427
> 
> 标签：javascript, jquery, mouseout

当我将鼠标悬停在 div 上时，我会做一些事情并在所述 div 旁边放置一个模式窗口。当我将鼠标移开时，我需要隐藏模式。问题是当我将鼠标移动到模态时它消失了，因为我不再将鼠标悬停在原始 div 上。

有没有办法检测我在 mouseout 事件中将鼠标悬停在什么 div 上？什么是不隐藏模态 div 的最干净的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:30:06.873

尝试将您的模态窗口放在“鼠标悬停”的 div 中。

它应该可以解决问题

* * *

编辑：

由于您不能将模态窗口放在里面，您可以尝试一些“棘手的”。

```
var timerFade;
$(function(){
    $(".element").mouseout(function(){
        timerFade = setTimeout(500,function(){
            // make the modal disappear
        });
    });
    $("#modalWindow").mouseover(function(){
        clearTimeout(timerFade);
    });
    $(".element").mouseover(function(){
        timerFade = setTimeout(500,function(){
            clearTimeout(timerFade);
        });
        // if modal is hidden, show it or move from another
            // element whith same behavior
    });

}); 
```

假设您要覆盖的 div 具有类“元素”并且模态窗口的 id 为“modalWindow”。

这意味着您在设置的超时时隐藏模态窗口，当您在模态胜利或元素上再次翻转时将其清除

只是一个想法^^

[这里的例子](http://jsfiddle.net/YuSEF/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T15:30:44.953

如果您可以将两个 div 都用另一个 div 包围。

```
<div id="outter">
  <div id="inner">
    ....some stuff
  </div>
  <div id="modal">
    ...some stuff
  </div>
</div> 
```

将 mouseover 设置为内部，将 mouseout 设置为外部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:09:12.650

使用事件relatedTarget duh :(。如果有人这么说会很有帮助:(

# android - FragmentPageAdapter 怪癖和崩溃

> ID：15837742
> 
> 赞同：3
> 
> 时间：2013-04-05T15:26:49.660
> 
> 标签：android, android-fragments, actionbarsherlock, android-fragmentactivity, fragmentpageradapter

我对 android 开发很陌生，我从一个简单的项目开始学习如何处理大部分基本 UI。

我使用过 ActionBarSherlock 和 ViewPageIndicator，总体而言，我创建的简单应用程序正在运行，但我仍然遇到一些奇怪的问题。让我描述一下：

*   当我单击将带有 FragmentPageAdapter 的片段移动到其位置的按钮时，我分配给事务的过渡效果不会发生。只有当我返回（事务被添加回堆栈）并再次按下按钮时才会发生这种情况。
*   如果我在单击按钮后返回，然后再次单击它，则会显示片段 - 但行为很奇怪并且会做各种奇怪的事情，例如，FragmentPageAdapter 认为它有 5 个页面而实际上是 3 个页面（那些额外的页面是只是空白，他们的标题也是）
*   如果我单击按钮，然后更改设备的方向，应用程序崩溃 - 尝试调试它，但我得到了 android 框架内的一些代码。

我认为我遇到了所有这些问题，因为我在代码中的某个地方确实出错了。请帮助我理解我的问题，如果可以的话，请指出一些我无法阅读并理解我到底做错了什么的好做法或地方，以及我怎样才能以正确的方式做到这一点。

我将有问题的代码上传到这里：[https ://code.google.com/p/mich-android-testapp/source/browse/trunk/TestApp/](https://code.google.com/p/mich-android-testapp/source/browse/trunk/TestApp/)

我感谢你们的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:59:25.253

您的代码有几个问题很可能是您列出的问题的根源。

首先，您在正常活动（MainActivity）中声明一个静态片段（直接在 xml 布局中声明的），稍后您尝试在`OnClickListener`. 这不会很顺利，因为您不应该使用静态片段进行交易。相反，您应该放置一个容器布局，以便在其中以编程方式添加片段，如果您要对其进行操作（作为旁注，您应该尝试使用通用 id 进行替换事务，否则如果您忘记使用相同的确切 id在 BaseActivity 子类中你会遇到麻烦）。

第二个主要问题是您存储来自 的片段`ViewPager`并假设这些片段将始终是您将使用的片段。这将在配置更改后`ViewPager`自动重新创建片段时失败。

如果要使用嵌套片段，则`getChildFragmentManager()`必须`FragmentPagerAdapter`从`BasePagerFragment`.

此外，不要使用普通方法将数据传递给片段，因为该数据不会在配置更改后保留下来（我指的是`setPage()`方法）。改用 a `Bundle`。

解决此问题后，查看错误是否仍然出现。

# linux - 通过 Django 运行有限数量的进程

> ID：15837746
> 
> 赞同：1
> 
> 时间：2013-04-05T15:27:02.360
> 
> 标签：linux, django, android-asynctask

我的 Django 项目对用户图像数据运行系统命令。系统命令需要很长时间和资源，我想限制系统上运行的任务数量。例如，如果用户“A”和“B”提交的任务都可以运行，但如果另一个用户在 2 个作业已经在运行时提交了该作业，则它必须等到其中一个作业完成。所以一次只有 2 个任务会运行。任何简单的解决方案！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:29:36.723

看起来像 Queue 的工作，`maxsize`设置为正值（可能带有`timeout`）：

[http://docs.python.org/2/library/queue.html](http://docs.python.org/2/library/queue.html)

请注意，它是线程安全的。

# imagemagick - ImageMagick 采样因子

> ID：15837750
> 
> 赞同：8
> 
> 时间：2013-04-05T15:27:12.893
> 
> 标签：imagemagick, imagemagick-convert, node-imagemagick, imagemagick.net

我一直在使用 ImageMagick 命令行工具对图像进行 jpeg 压缩。但是，我试图了解采样因子的作用。它说采样因子用于指定块大小，即 8x8 或 16x16。但是，如果省略此参数，我将找不到使用的默认值。

另外，我尝试使用以下命令获取图像的属性：

识别 -verbose image.jpg

它将采样因子值显示为 1x1、1x1、1x1。这是什么意思？它应该是 8x8 或 16x16 或 32x32....

谁能告诉我在哪里可以找到这些详细信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T20:43:24.987

从[ImageMagick 的命令行选项](http://www.imagemagick.org/script/command-line-options.php#sampling-factor)：

> -采样因子
> 
> 此选项指定 JPEG 编码器用于色度下采样的采样因子。如果省略此选项，JPEG 库将使用其自己的默认值。

[这是一个很好的线程..关于知道在 JPEG 中使用了哪种色度子采样](http://www.wizards-toolkit.org/discourse-server/viewtopic.php?f=1&t=17145)

[JPG 压缩中的色度二次采样](http://users.wfu.edu/matthews/misc/jpg_vs_gif/JpgCompTest/JpgChromaSub.html)

我希望这有帮助 ：）

# c++ - 锁定可用时立即获取

> ID：15837753
> 
> 赞同：5
> 
> 时间：2013-04-05T15:27:20.487
> 
> 标签：c++, concurrency, mutex, boost-thread

我有两个线程试图锁定相同的`boost::mutex`. 其中一个线程持续处理一些数据，另一个线程定期显示当前状态。处理线程，按照我的意图，非常频繁地释放锁并重新获取它，以便显示线程可以在需要它的时候进入并获取它。所以，很明显，我希望显示线程在下一次被进程线程释放时获取锁。但是，它并没有这样做，而是等待锁，并且仅在进程线程的许多锁释放周期后才获取它。

请检查说明我的问题的最小示例：

```
#include <boost/thread.hpp>
#include <iostream>

using namespace std;
using namespace boost;

mutex mut;

void process() {
        double start = time(0);
        while(1) {
                unique_lock<mutex> lock(mut);
                this_thread::sleep(posix_time::milliseconds(10));
                std::cout<<".";
                if(time(0)>start+10) break;
        }
}

int main() {

        thread t(process);

        while(!t.timed_join(posix_time::seconds(1))) {
                posix_time::ptime mst1 = posix_time::microsec_clock::local_time();
                cout<<endl<<"attempting to lock"<<endl;
                cout.flush();

                unique_lock<mutex> lock(mut);

                posix_time::ptime mst2 = posix_time::microsec_clock::local_time();
                posix_time::time_duration msdiff = mst2 - mst1;
                cout << std::endl<<"acquired lock in: "<<msdiff.total_milliseconds() << endl;
                cout.flush();
        }

} 
```

编译：`g++ mutextest.cpp -lboost_thread -pthread`

当我运行可执行文件时，示例输出如下所示：

```
...................................................................................................
attempting to lock
....................................................................................................................................................................................................................................................................................................................................................................................................................................
acquired lock in: 4243
...................................................................................................
attempting to lock
........................................................................................................
acquired lock in: 1049
...................................................................................................
attempting to lock
........................................................................................................................
acquired lock in: 1211
.................................... 
```

如您所见，在最坏的情况下，显示线程会等待 424 个锁释放周期，然后才开始捕获锁。

我显然以错误的方式使用互斥锁，但解决这个问题的常用方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:32:35.953

并不是你使用错了互斥锁，只是线程没有达到你期望的效果。操作系统决定何时运行哪个线程（这称为“调度”），并且代码中没有任何内容会在循环结束时强制线程切换；线程继续运行，并重新获得锁。要尝试的一件事是`this_thread::yield()`在释放锁之后添加一个调用（在这种情况下，在循环的顶部，在重新锁定之前）；这将向调度程序建议它适合另一个线程运行。如果你真的想要紧密同步的交错，线程不会这样做；相反，编写一个更高级别的函数，一个接一个地调用您的两个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:36:52.537

如果更新线程无事可做，它可以等待互斥体可用。

查看 boost::condition_variable。你可以在这里阅读 [http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html) 和这里 [使用升压条件变量](https://stackoverflow.com/questions/12345844/using-boost-condition-variables)

如果让更新线程进入睡眠状态会是一个问题——它在许多 GUI 系统上并且你没有指定你正在使用哪一个——考虑将消息从处理线程发布到更新线程。（同样，详细信息取决于您的平台。）该消息可能包含更新显示所需的信息，或者是“现在是查看的好时机”的通知。

如果您确实使用条件代码，则处理线程可能应该在发出条件信号之后并在重新获取锁以为更新线程打开一个大窗口之前让步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:42:49.010

您可能想看看[boost::condition_variable](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable)，特别是方法`wait()`和`notify_one()`or `notify_all()`。该方法`wait()`将阻塞当前线程，直到锁被释放。方法`notify_one()`并`notify_all()`通知一个或所有等待锁继续执行的线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T17:17:02.330

在我看来，互斥锁的原则不是公平，而是正确。互斥锁本身无法控制调度程序。困扰我的一件事是您选择创建 2 个使用这种粗粒度锁定的线程的原因。从理论上讲，您正在并行运行两件事，但实际上您正在使它们相互依赖/串行。

Pete 的想法似乎更好（一个函数运行这些绘制和更新），您仍然可以在每个内部函数中使用线程，而不必担心争用和公平性。

如果您真的希望让两个线程并行运行，那么我可以给您一些提示：

*   使用原子的自旋锁并忘记互斥锁，
*   进入实现定义的区域并设置线程优先级，或者
*   使锁定更加细粒度。

不幸的是，这些都不是问题证明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T06:12:13.817

正如 Dale Wilson an FKaria 所建议的那样，我已经使用条件解决了这个问题，但我已经在相反的方向使用它。因此，进程线程检查暂停标志，当它被设置时，它等待一个条件，从而释放锁。显示线程控制暂停标志，它还通过条件通知它来恢复进程线程。代码：（代码基本相同，我用 标记了新行`//New`）

```
#include <boost/thread.hpp>
#include <boost/thread/condition.hpp>
#include <iostream>

using namespace std;
using namespace boost;

mutex mut;
condition cond;

volatile bool shouldPause = false; //New

void process() {
        double start = time(0);
        while(1) {
                unique_lock<mutex> lock(mut);

                if(shouldPause) cond.wait(mut); //New

                this_thread::sleep(posix_time::milliseconds(10));
                std::cout<<".";
                if(time(0)>start+10) break;
        }
}

int main() {

        thread t(process);

        while(!t.timed_join(posix_time::seconds(1))) {
                posix_time::ptime mst1 = posix_time::microsec_clock::local_time();
                cout<<endl<<"attempting to lock"<<endl;
                cout.flush();
                shouldPause = true; // New
                unique_lock<mutex> lock(mut);

                posix_time::ptime mst2 = posix_time::microsec_clock::local_time();
                posix_time::time_duration msdiff = mst2 - mst1;
                cout << std::endl<<"acquired lock in: "<<msdiff.total_milliseconds() << endl;
                cout.flush();

                shouldPause = false; // New
                cond.notify_all(); // New
        }

} 
```

现在输出正是我希望的那样：

```
...................................................................................................
attempting to lock
.
acquired lock in: 9
...................................................................................................
attempting to lock
.
acquired lock in: 8
...................................................................................................
attempting to lock
.
acquired lock in: 9
...................................................................................................
attempting to lock
.
acquired lock in: 8
...................................................................................................
attempting to lock
.
acquired lock in: 9
...................................................................................................
attempting to lock
.
acquired lock in: 9
...................................................................................................
attempting to lock
.
acquired lock in: 9
...................................................................................................
attempting to lock
.
acquired lock in: 9
...................................................................................................
attempting to lock
.
acquired lock in: 8
...................................................................................................
attempting to lock
.
acquired lock in: 9
.......................... 
```

# php - 如何使用反馈文本重定向到 php 中的上一页

> ID：15837756
> 
> 赞同：0
> 
> 时间：2013-04-05T15:27:31.413
> 
> 标签：php, mysql

有一个链接**“添加类”**，当用户单击它时，它会被定向到有一个表单的页面，他可以在其中添加类并且表单操作是**$_server['php_self']** 我希望当他成功添加类时转到上一页（**add_student_stream.php?id=stud_02**）我试过了，但它不起作用，有人说它可能不适用于安全页面

```
$q=mysql_query("insert into student_stream(id,student_id,stream) values('','$id','$stream')");
if($q){
header("Location: {$_SERVER['HTTP_REFERER']}");
} 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:32:24.283

您可以使用`$_SESSION`来跟踪`PHP_SELF`每个页面，因此您可以假设当前`PHP_SELF`页面是您所在的最后一页。

**第1页.php**

```
session_start();
$_SESSION['currPage'] = 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST URI'];

if(isset($_GET['error'])){
$errorMessage = htmlspecialchars($_GET['error']);
echo "An error occured. The message was: " . $errorMessage;
}

// The user ends up going to page 2... 
```

**Page2.php**

```
session_start();

// the user does something and now you need to redirect them...

$errorMessage = "You made an error.";
header("Location: " . $_SESSION['currPage'] . "?error=" . $errorMessage);
exit; 
```

# asp.net-mvc-4 - MVC4 中的主题支持

> ID：15837759
> 
> 赞同：5
> 
> 时间：2013-04-05T15:27:35.473
> 
> 标签：asp.net-mvc-4

MVC4 有一个名为**Content/themes/**的文件夹是否期望在该文件夹下创建任何新主题？是 MVC4 的默认主题名为**BASE ，因为****Content/themes/**下有一个文件夹，名称相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:10:29.590

MVC 中的“主题”文件夹只是 jQuery UI 的一个特性，并不是 MVC 特有的特性。MVC 本身没有任何实际的“主题”支持。

您可以从 NuGet 提要中找到其他主题作为 NuGet 包：http://nuget.org/packages?q=Tags%3A%22jQueryUI%22+ [themes](http://nuget.org/packages?q=Tags%3A%22jQueryUI%22+themes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-05T20:40:32.087

[在MVC.Forum](http://www.mvcforum.com/)项目中，您希望执行一些类似操作。 他们创建了一个名为**~/Themes**的文件夹，并创建了 View Engine [ForumViewEngine](https://github.com/leen3o/mvcforum/blob/master/MVCForum.Website/Application/ForumViewEngine.cs)来搜索该文件夹中的视图。像这样替换默认的视图引擎：

```
protected void Application_Start()
    {
...
        // Set the view engine
        ViewEngines.Engines.Clear();
        ViewEngines.Engines.Add(new ForumViewEngine(defaultTheme));
...
} 
```

其中*defaultTheme*是 ~/Themes 的子文件夹的名称，其中包含特定主题的视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T03:59:04.077

> MVC4 有一个名为 Content/themes/ 的文件夹是否期望在该文件夹下创建任何新主题？

并不真地。默认情况下，如果您使用提供的模板之一，则 jquery UI 包含在 MVC 项目中。基本文件夹包含不同 jQuery UI 小部件所需的图像和样式，[手风琴就是其中之一](http://jqueryui.com/accordion/)。因此，如果您使用任何这些小部件，则无需下载所需的`css`和`script`文件。`BundleConfig.cs`您可以在文件夹下的文件中看到这些文件被引用`App_Start`。[该文件中包含的同一链接](http://go.microsoft.com/fwlink/?LinkId=254725)解释了它是什么以及它的作用。

如果您正在考虑如何`Themes`在 MVC 中完成 web 表单，您可以使用布局页面和 css 文件为您的网站的不同情况/场景定义不同的主题。

# ios - 一次加载一张图片

> ID：15837760
> 
> 赞同：1
> 
> 时间：2013-04-05T15:27:37.863
> 
> 标签：ios, objective-c, cocoa-touch, afnetworking

所以这段代码基本上是从服务器获取数据，创建图像，然后将其添加到视图中。

但是，我希望它一次更新一个视图。

现在，视图在所有图像都加载后立即更新。

我想在每次上传新图像时更新视图 - 这应该发生在 addImage 方法中，但它只是在等待所有图像加载。

我尝试使用 dispatch_async 来解决这个问题，但它不起作用。

**那么如何一次加载一张图片呢？**

```
 AFJSONRequestOperation *operation =
        [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
       //some code not displayed here that parses the JSON
       for (NSDictionary *image in images){
           if ([[image objectForKey:@"ContentType"] isEqualToString:@"image/png"]){
               NSString *imgLink = [[image objectForKey:@"MediaUrl"] JSONStringWithOptions:JKSerializeOptionPretty includeQuotes:NO error:nil];
               NSURL *url = [NSURL URLWithString:path];
               NSData *data = [NSData dataWithContentsOfURL:url];
               UIImage *img = [[UIImage alloc] initWithData:data cache:NO]
               dispatch_async(dispatch_get_main_queue(), ^{
                   [self addImage:img];
                   //This method adds the image to the view
                });
           }
       }
   } 
```

* * *

更新：这不是表格视图，图像作为子视图添加到 UIView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:02:50.083

```
[NSData dataWithContentsOfURL:url]; 
```

是同步操作，所以你必须一张一张地等待每张图片，基于url的图片的适当延迟加载实现是最好的解决方案，同时你可以尝试做这样的事情

```
AFJSONRequestOperation *operation =
[AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                                    //some code not displayed here that parses the JSON
                                                    for (NSDictionary *image in images){
                                                        if ([[image objectForKey:@"ContentType"] isEqualToString:@"image/png"]){
                                                            NSString *imgLink = [[image objectForKey:@"MediaUrl"] JSONStringWithOptions:JKSerializeOptionPretty includeQuotes:NO error:nil];
                                                            NSURL *url = [NSURL URLWithString:path];

                                        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                                                                NSData *data = [NSData dataWithContentsOfURL:url];
                                                                UIImage *img = [[UIImage alloc] initWithData:data cache:NO]
                                                                dispatch_async(dispatch_get_main_queue(), ^{
                                                                    [self addImage:img];
                                                                    //This method adds the image to the view
                                                                });
                                                            })

                                                        }
                                                    }
                                                } 
```

如果您想使用此解决方案，建议您创建自己的并发队列而不是使用 global_queue

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:31:31.253

我相信您正在寻找一种延迟加载的形式。试试这个例子：[Apple 延迟加载示例](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

# python - pytest 不跳过未标记的测试

> ID：15837761
> 
> 赞同：2
> 
> 时间：2013-04-05T15:27:38.120
> 
> 标签：python, pytest

我们有一个标记的测试，我们希望它不会被执行，因为 py.test 是用另一个标记调用的，但测试正在执行。

例如

```
@pytest.mark.stress
def test_one(some_fixture):
     pass

@pytest.mark.myplatform
def test_two(some_fixture):
     pass 
```

如果我用 " 作为实验运行 pytest `--collectonly -m "myplatform and (not stress)`，我发现我可以解决这个问题。我假设使用夹具在某种程度上改变了评估标记的方式，但我们假设使用夹具不会影响使用标记收集测试的方式。夹具中有代码可以查看标记，但我们不会以任何方式更改 pytest args。克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-02T05:21:35.327

尝试`-k`使用 flag 并保持相同的过滤逻辑“myplatform 而不是压力”。

[https://pytest.org/en/latest/example/markers.html#using-k-expr-to-select-tests-based-on-their-name](https://pytest.org/en/latest/example/markers.html#using-k-expr-to-select-tests-based-on-their-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T09:57:26.093

基于[标记的测试选择/取消选择](https://docs.pytest.org/en/latest/example/markers.html#marking-test-functions-and-selecting-them-for-a-run)用于将测试运行限制为明确标记的测试。如果您使用该选项，您将无法识别它`--collectonly`（在下面的示例中总是`collected 3 items`）。

考虑测试文件`test_markers.py`：

```
import pytest

@pytest.mark.stress
def test_stress():
     pass

@pytest.mark.myplatform
def test_myplatform():
     pass

def test_unmarked():
     pass 
```

如果您只想执行“压力”测试，请使用 (`-v`用于详细输出)

```
pytest test_markers.py -v -m stress 
```

你得到以下输出：

```
collected 3 items

test_markers.py::test_stress PASSED 
```

如果要执行“压力”测试和未标记的测试，请使用：

```
pytest test_markers.py -v -m "not myplatform" 
```

这给了你输出：

```
collected 3 items

test_markers.py::test_stress PASSED
test_markers.py::test_unmarked PASSED 
```

# r - B 样条混淆

> ID：15837763
> 
> 赞同：6
> 
> 时间：2013-04-05T15:27:45.573
> 
> 标签：r, regression, spline, smoothing

我意识到这个板上有关于 B 样条线主题的帖子，但这些帖子实际上让我更加困惑，所以我想有人可以帮助我。

`degree = 3`我有从0到 1 的 x 值的模拟数据。我想为我的数据拟合一个三次样条 (使用 B 样条基础和 OLS 进行参数估计（我不是在寻找惩罚样条）。

我想我需要包中的`bs`功能，`spline`但我不太确定，我也不知道到底要喂什么。

我还想绘制生成的多项式样条曲线。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T16:36:22.167

```
## simulate some data - from mgcv::magic
set.seed(1)
n <- 400
x <- 0:(n-1)/(n-1)
f <- 0.2*x^11*(10*(1-x))^6+10*(10*x)^3*(1-x)^10
y <- f + rnorm(n, 0, sd = 2)

## load the splines package - comes with R
require(splines) 
```

`bs()`您可以在公式中使用该函数来进行`lm`OLS 估计。`bs`提供由节点、多项式次数等给出的基函数。

```
mod <- lm(y ~ bs(x, knots = seq(0.1, 0.9, by = 0.1))) 
```

您可以将其视为线性模型。

```
> anova(mod)
Analysis of Variance Table

Response: y
                                        Df Sum Sq Mean Sq F value    Pr(>F)    
bs(x, knots = seq(0.1, 0.9, by = 0.1))  12 2997.5 249.792  65.477 < 2.2e-16 ***
Residuals                              387 1476.4   3.815                      
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

关于结位置的一些指示。`bs`有一个参数`Boundary.knots`，默认值`Boundary.knots = range(x)`- 因此当我指定`knots`上面的参数时，我没有包括边界结。

阅读`?bs`以获取更多信息。

## 生成拟合样条曲线

在评论中，我讨论了如何绘制拟合样条。一种选择是根据协变量对数据进行排序。这适用于单个协变量，但不需要适用于 2 个或更多协变量。另一个问题是，您只能在观测值处评估拟合样条曲线`x`- 如果您对协变量进行了密集采样，这很好，但如果没有，则样条曲线可能看起来很奇怪，具有较长的线性部分。

更通用的解决方案是用于`predict`从模型中生成一个或多个协变量的新值的预测。在下面的代码中，我展示了如何为上面的模型执行此操作，预测 100 个均匀间隔的值`x`。

```
pdat <- data.frame(x = seq(min(x), max(x), length = 100))
## predict for new `x`
pdat <- transform(pdat, yhat = predict(mod, newdata = pdat))

## now plot
ylim <- range(pdat$y, y) ## not needed, but may be if plotting CIs too
plot(y ~ x)
lines(yhat ~ x, data = pdat, lwd = 2, col = "red") 
```

那产生

![在此处输入图像描述](https://i.stack.imgur.com/Fi3AD.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-06T19:57:51.117

根据答案中的示例，绘制拟合样条曲线的更简单方法是使用`effects`包。

```
## simulate some data - from mgcv::magic
set.seed(1)
n <- 400
x <- 0:(n-1)/(n-1)
f <- 0.2*x^11*(10*(1-x))^6+10*(10*x)^3*(1-x)^10
y <- f + rnorm(n, 0, sd = 2)

## load the splines package - comes with R
require(splines)
require(car)
require(effects)

## estimate model
mod <- lm(y ~ bs(x, knots = seq(0.1, 0.9, by = 0.1))) 
```

然后你可以使用`Anova`from `car`：

```
> Anova(mod)
Anova Table (Type II tests)

Response: y
                                       Sum Sq  Df F value    Pr(>F)    
bs(x, knots = seq(0.1, 0.9, by = 0.1)) 2997.5  12  65.477 < 2.2e-16 ***
Residuals                              1476.4 387                      
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

您可以使用 package.json 轻松绘制拟合样条曲线`effects`。

```
plot(allEffects(mod)) 
```

这将输出：

![在此处输入图像描述](https://i.stack.imgur.com/7koQM.png)

也可以看看：

*   [用固定效应呈现 logit 的边际效应](https://stats.stackexchange.com/questions/18814/presenting-marginal-effects-of-logit-with-fixed-effects/137385#137385)

# kendo-ui - 带有模板集选定值的 Kendo UI 下拉列表不起作用

> ID：15837765
> 
> 赞同：4
> 
> 时间：2013-04-05T15:27:54.740
> 
> 标签：kendo-ui

我正在尝试使用使用模板的 Kendo Dropdownlist。我有一个页面，用户可以在其中选择一个数据集，并且该数据集使用值填充下拉列表。我的大多数下拉菜单都不使用模板，但是无法正常工作的是使用模板。

我的模板：

```
<script type="text/x-kendo-tmpl" id="dropdownTemplate">
  <div>
    <p><strong>#= Name #</strong></p>
    <p>#= Description #</p>
  </div>
</script> 
```

我的下拉定义：

```
$("#listTemplates").kendoDropDownList({
 dataTextField: "Name",
 dataValueField: "ChartTemplateId",
 template: kendo.template($("#dropdownTemplate").html()),
 change: listTemplatesChange
}); 
```

我如何填充我的下拉列表：

```
 portalTemplatesModel = [
 [{
   Name: "Test",
   Description: "Long Description",
   ChartTemplateId: "1"
 }],
 [{
   Name: "Test2",
   Description: "Long Description2",
   ChartTemplateId: "2"
 }]
 ]
 for (i = 0; i < portalTemplatesModel.length; i++) {

   $("#listTemplates").data("kendoDropDownList").dataSource.add(portalTemplatesModel[i]);
 } 
```

我的二传手：

```
var ddTemplates = $("#listTemplates").data("kendoDropDownList");
 ddTemplates.select(function (dataItem) {
 return dataItem.value === placeHolderChart.ChartTemplateId;
}); 
```

数据项如下所示：

```
 [{
   Name: "Test",
   Description: "Long Description",
   ChartTemplateId: "1"
 }] 
```

我在设置器文档中注意到您应该使用值或项目。但是，对于我正在使用的数据集，它似乎使用了一个不包含值或文本的不同对象，就像其他不使用模板的下拉菜单一样。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T12:26:39.217

我有一个类似的问题。似乎起作用的是添加数据。在您调用数据源值之前。即 #=data.Description #

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T08:17:16.523

您可以通过在您的 kendoTemplate 中添加 ${Name} 和 ${Description} 来填充它，当读取数据源时，模板将获取值，您可以根据您的模板查看它。

# python - 使用 pandas read_csv 和 nrows 读取 ~13000 行 CSV 文件的部分内容

> ID：15837767
> 
> 赞同：5
> 
> 时间：2013-04-05T15:27:57.333
> 
> 标签：python, csv, python-3.x, pandas

我正在尝试将 CSV 文件的片段读入 pandas DataFrame，当我将 nrows 设置为超过某个点时，我遇到了麻烦。我的 CSV 文件被分成具有不同标题/数据类型的不同段，所以我浏览了文件并找到了不同段的行号，并保存了行号。当我尝试这样做时：

```
pd.io.parsers.read_csv('filename',skiprows=40, nrows=12646) 
```

它工作正常。任何更多行，它都会引发错误：

```
CParserError: Error tokenizing data. C error: Expected 56 fields in line 13897, saw 71 
```

确实，第 13897 行有那么多行，这就是我尝试使用 nrows 和 skiprows 的原因。我可以找到 pandas 将读取的最后一行，它看起来与其他行没有任何不同。在十六进制编辑器中查看文件，我仍然看不到任何区别。

我也用另一个 CSV 文件尝试过，我得到了类似的结果：

```
pd.io.parsers.read_csv('file2',skiprows=112, nrows=18524)

<class 'pandas.core.frame.DataFrame'>
Int64Index: 18188 entries, 0 to 18187 
```

但：

```
pd.io.parsers.read_csv('file2',skiprows=112, nrows=18525) 
```

给出：

```
CParserError: Error tokenizing data. C error: Expected 56 fields in line 19190, saw 71 
```

有什么我想念的吗？还有另一种方法可以做到这一点吗？

我在 Windows 上使用： `pandas-0.10.1.win-amd64-py3.3`、、`numpy-MKL-1.7.1rc1.win-amd64-py3.3`和。`python-3.3.0.amd64`我遇到了同样的问题`numpy-unoptimized-1.7.1rc1.win-amd64-py3.3`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:22:45.780

您可以使用`warn_bad_lines`and`error_bad_lines`关闭坏线错误和警告：

```
import pandas as pd
from StringIO import StringIO
data = StringIO("""a,b,c
1,2,3
4,5,6
6,7,8,9
1,2,5
3,4,5""")
pd.read_csv(data, warn_bad_lines=False, error_bad_lines=False) 
```

# c# - 如何在 WinCe 中找到进程 ID？

> ID：15837774
> 
> 赞同：0
> 
> 时间：2013-04-05T15:28:12.647
> 
> 标签：c#, memory, process, windows-ce, pid

我正在使用因内存问题而被制造商“切片”的 Win Ce 5.0。它启动一个消耗一些内存的应用程序（使用 Platform Builder 制作 BIN 图像）。

当我想开始调试时，它会冻结第一个应用程序并启动我一直在开发的新应用程序（VS 2008 Pro）。我不清楚第一个应用程序是否消耗一些内存（因为我知道一些文件是静态的）并且一些数据点是 STUBBED。

主要问题是，Win Ce 只是一个启动第一个应用程序的引导加载程序。我无法禁用它、切换它或对其执行任何操作，因为它正在运行并启动 ActiveSync（这就是我与我的 PC / VS 2008 Pro 通信的方式）

请帮助我解决方案：1.如何找到第一个应用程序进程 ID（GetProcessById 不起作用，.Net Ce Framework 不提供 GetProcessByName） 2.如何处理第一个应用程序加载的所有内存 - i希望有尽可能多的可用内存） 3\. 最好的选择是有一个看门狗类来测试第一个应用程序是否不做任何事情（不启动任何进程/方法）

愿意将我的积分和荣誉提供给可以帮助我的人:)

* * *

另一个问题是 USB 调试：设备的驱动程序错误（问题）

与设备的 USB 连接 - 重置后 - 不工作（检测为 AT9S81） - 用于刷新设备 - 设备后 - 不工作（检测为 AT9S81） - 用于闪烁设备 - 需要一些时间来检测为 Active Sync（原型--记得改idVendor)

这是操作系统问题/设备驱动程序/Windows 7 问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:57:43.133

您是说您正在尝试使用旧的、不受支持的 CE 设备吗？

1.  使用 ToolHelp API 获取进程信息。您必须使用 CF P/Invoke 这些。SDF 具有完整的 ToolHelp 对象，您不想编写它们。
2.  您不能在另一个进程中“处理”内存。另一个进程管理自己的内存。您可以终止该进程，这会将其所有内存释放给操作系统。
3.  您如何建议知道其他进程是否“正在做任何事情”？如果它没有告诉你它什么时候在做某事，就很难知道它是否正在运行代码（可以通过使用 celog 拦截来查看 OS 调度程序来完成，但这是非常先进的东西，我不会推荐它作为第一个甚至第二个行动方案）。

如果您有权在设备上运行代码，我建议您修改操作系统以首先不运行它正在运行的任何应用程序。调整 HKLM\Init 注册表项或启动它的任何内容。

# java - 替换 jtextfield 中的文本

> ID：15837775
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:28:13.460
> 
> 标签：java, swing, jtextfield, documentfilter

我有一个*Jtextfield*，我需要它最多只包含一个字符，因此，如果用户键入一个字符，然后键入另一个字符，则另一个字符将被擦除并键入新字符，它将替换它。任何人都知道如何要做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:45:07.800

使用[`DocumentFilter`](http://download.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)：

```
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class GUITest
{
    private JFrame frame;

    public void init()
    {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ((JPanel)frame.getContentPane()).setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

        JTextField txt = new JTextField(5);
        ((AbstractDocument) txt.getDocument()).setDocumentFilter(new OneLetterFilter());

        frame.add(txt);
        frame.pack();
    }

    public void showGUI()
    {
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                GUITest gui = new GUITest();
                gui.init();
                gui.showGUI();
            }
        });
    }

    class OneLetterFilter extends DocumentFilter
    {
        @Override
        public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String text, AttributeSet attr) throws BadLocationException
        {
            String oldText = fb.getDocument().getText(0, fb.getDocument().getLength());
            fb.replace(0, oldText.length(), text.substring(text.length() - 1), attr);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-05T15:34:41.740

```
private void jTextField1KeyTyped(java.awt.event.KeyEvent evt) {                                     
        if(jTextField1.getText().length() >0){
            jTextField1.setText("");
        }
    } 
```

根据我从您的问题中了解到的情况。这应该工作

[我在 NetBeans 上使用 jFrameForm 做过]

# highcharts - Highcharts 3.0 - 渲染器覆盖导出按钮

> ID：15837776
> 
> 赞同：0
> 
> 时间：2013-04-05T15:28:16.640
> 
> 标签：highcharts

我刚刚将一个应用程序升级到 Highcharts 3.0，看起来新的导出按钮现在被使用图表渲染器绘制的对象所覆盖。在 2.3.3 中情况并非如此。

请参阅[http://jsfiddle.net/YcJ6U/1/](http://jsfiddle.net/YcJ6U/1/)

这是生成情节的代码：

$(function () { $('#container').highcharts({

```
 chart: {
        events: {
            load: function(event) {
                drawBox(this);
            }
        }
    },
    credits: {
        enabled: false
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }],

    exporting: {
        buttons: {
            contextButton: {
                symbol: 'circle',
                symbolStrokeWidth: 1,
                symbolFill: '#bada55',
                symbolStroke: '#330033',
                align: 'left'
            }
        }
    }

}, function(chart) {
    //drawBox(chart)
});

function drawBox(chart) {
    chart.renderer.rect(25, 0, 100, 100, 5)
        .attr({
            'stroke-width': 2,
            stroke: 'red',
            fill: 'yellow'               
        }).add();        
} 
```

}); 任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:23:45.120

不确定何时更改，但 Highcharts 正在使用 SVG 渲染按钮和矩形。元素的堆叠顺序是基于[它们被绘制的顺序](https://stackoverflow.com/a/482147/16363)。通过绘制`rect`onload，您在按钮之后绘制它。我相信解决此问题的唯一方法是在绘制图表后将按钮带回顶部：

```
chart.exportSVGElements[0].toFront() 
```

或者回到没有 zIndex 的初始链接中的状态:)

[在这里](http://jsfiddle.net/YcJ6U/2/)更新了小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-20T15:19:59.107

这可能是一个 z-index 问题。在 highcharts 中，z-index 由 zIndex 表示。你应该试试这个

```
exporting: {
    buttons: {
        contextButton: {
            theme: {
                 zIndex: 10
             }
        }
    }
} 
```

嘿，这是作品。我检查过了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T19:26:35.863

使用 highchart 6.0.4：

```
 exporting: {
                buttons: {
                    contextButton: {
                        theme: {
                            style: {
                                zIndex: 9999
                            }
                        }
                    }
                }
  } 
```

# git - Git 命令将我的整个桌面发布到 repo

> ID：15837785
> 
> 赞同：1
> 
> 时间：2013-04-05T15:28:51.547
> 
> 标签：git, github, bitbucket

我只想将单个目录发布到存储库（使用 bitbucket），但是每当我尝试使用 git push 命令时，我最终都会推送我的整个桌面目录。当我进行推送时，有没有办法重置我等待提交的任何内容？我试过用谷歌搜索，但没有一个例子符合我的要求。这是我使用的命令（Bitbucket 教程）：

```
cd /path/to/my/repo
git remote add origin https://(address here)
git push -u origin --all   # to push changes for the first time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:29:40.107

尝试运行：

```
git checkout -- <file> 
```

破折号基本上从暂存中删除文件。

编辑：“Git status”将列出所有文件及其与 git 的关系。它将显示一些有关如何删除并将它们添加到暂存列表的命令。然后，一旦您对分期感到满意，就可以推动。

```
git status 
```

# maven - 如何根据依赖关系调整 mvn 镜像的超时：解决 - 传输文件时出错：读取超时

> ID：15837790
> 
> 赞同：7
> 
> 时间：2013-04-05T15:28:59.970
> 
> 标签：maven, timeout, nexus, sonatype, maven-wagon-plugin

有谁知道如何在 Maven 设置文件或依赖插件中 控制**镜像的超时设置？**

我看到我可以修改服务器的超时设置，但不能修改存储库或镜像。

**问题**

自从将 nexus oss 从 1.8.0 升级到 2.3x 并迁移到 VM 后，我看到了**间歇性**的超时问题，并且在 nexus 调试日志中没有任何用处。我想我有两个选择：提高 nexus 服务器性能或配置 maven 设置以等待更长时间的工件。

我看不出与我的服务器有多大关系，所以我正在研究 maven 方面。

**依赖解决的 Maven 错误**

```
Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.5:deploy (default-deploy) on project foo: 

from/to snapshots (http://mycorp.com/nexus/content/repositories/snapshots): Error transferring file: Read timed out -> [Help 1] 
```

如果您知道配置 maven 的 wagon 等以放松其超时，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:48:30.347

尝试一个简单的 http get，看看你首先在 Maven 之外获得了什么性能。可能是代理问题左右。

[Wagon 是在 Maven 中进行 HTTP 传输的组件的名称，您可以在http://maven.apache.org/guides/mini/guide-http-settings.html](http://maven.apache.org/guides/mini/guide-http-settings.html)找到更多信息和配置提示

# python - 创建一个简单的元类

> ID：15837791
> 
> 赞同：0
> 
> 时间：2013-04-05T15:29:00.933
> 
> 标签：python, class, factory, metaclass

我今天早些时候问了一个问题，我只想解决我的问题。我期待使用元类，但得到了一些不同的东西并且它起作用了。但是，现在我对与我之前的问题相关的东西感兴趣：为什么我的元类不起作用？

这是我上一个问题的链接，但您不需要阅读它来回答这个问题：[如何创建一个简单的元类？](https://stackoverflow.com/questions/15836263/how-do-i-create-a-simple-metaclass)

所以让我再次问这个问题，这一次是出于完全不同的原因：我如何创建一个简单的元类？这就是我所拥有的，我不明白为什么它不起作用。

```
class MyMeta(type):
    def __new__(mcls, name, bases, attrs):
        attrs['my_attr'] = True     
        return super().__new__(mcls, name, bases, attrs)

class MyClass:
    __metaclass__ = MyMeta

print(MyClass.my_attr) 
```

最后一行打印以下错误：

```
AttributeError: type object 'MyClass' has no attribute 'my_attr' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:32:18.320

在 Python 3 中，您[以不同的方式指定元类](http://docs.python.org/3/reference/datamodel.html#customizing-class-creation)：

```
class MyClass(metaclass=MyMeta):
    pass 
```

# tcp - 最佳 TCP 段大小

> ID：15837793
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:29:04.940
> 
> 标签：tcp, network-protocols

我已经阅读了一些关于 TCP 协议和最大段大小的文章，以及它是如何计算的。（本文：[rfc879](https://www.rfc-editor.org/rfc/rfc879)）

我很想知道各种协议（如 FTP 或 Http）是否存在最佳或默认的最大段大小值？如果是，我怎样才能找到它们？

坦克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:15:26.973

RFC 879 非常清楚。MSS 是由接收者或其中定义的规则确定的属性。如果接收方定义了它，它会在连接协商期间这样做，因此任何应用程序协议都没有机会更改它，即使它想要更改它。

因此，MSS 与特定的应用协议没有任何关系。因此，您的问题没有意义。

# java - 处理大型二进制文件，流式传输到存储

> ID：15837795
> 
> 赞同：1
> 
> 时间：2013-04-05T15:29:08.510
> 
> 标签：java, android, odata4j

我正在使用 Odata4j，我的实体有一个`Data`字段是二进制文件。通过浏览器查看时，它显示为 Base64 字符串。

我怎样才能把这个文件放到我的安卓设备上？

我尝试了以下方法来获得`byte[]`...

```
String stringData = entity.getProperty("Data").getValue().toString();
byte[] data = Base64.decodeBase64(stringData); 
```

但这只是给了我一个大约 7 个字节的小数组。但是，当我调试时，我可以看到`entity`数据具有很大的二进制值。

我也有第二个文件产生“内存不足”异常的问题，理想情况下，我希望能够将此文件作为流/缓冲区直接下载到设备的存储中，这可能吗？

需要明确的是，问题是：如何将这些数据直接流式传输到设备的存储中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:50:08.940

我在不使用 OData 的情况下解决了这个问题。有一个可用的 URL 将只返回二进制数据。因此，通过这个 URL，我可以使用其他 Java 类将数据直接流式传输到磁盘。

所以有了这个网址：

> www.example.com/OData.svc/File/Data/$value

（仅返回二进制数据）

我们可以创建一个 URL 连接并下载它：

```
URL url = new URL(webPage);
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

File file = new File(dir, fileName);//need to create a file based on your storage paths

FileOutputStream out = new FileOutputStream(file);
InputStream in = urlConnection.getInputStream();

byte[] buffer = new byte[1024];
int i = 0;
while ((i = in.read(buffer)) > 0) {
    out.write(buffer, 0, i);
}

out.flush();
out.close();
in.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:47:18.010

我猜这`entity.getProperty("Data").getValue()`实际上是返回一个`byte[]`or `char[]`。当您调用`toString()`一个数组（或者实际上，任何不覆盖的类型时`toString()`，您将获得一个由对象的类型名称和标识哈希码组成的短字符串。对于 a`byte[]`或`char[]`可能是 7 个字符长。

我建议您打印出来`entity.getProperty("Data").getValue().getClass()`以确认实际类型。

# objective-c - 如何用贝塞尔路径绘制矩形？

> ID：15837800
> 
> 赞同：1
> 
> 时间：2013-04-05T15:29:27.467
> 
> 标签：objective-c, xcode, drawing, uibezierpath, cgrect

我的视图中有一个矩形，我想用 UIBezierPath 在该矩形中绘制一个图形。

我以为那个方法

```
UIBezierPath myBezierPath = [UIBezierPath bezierPathWithRect:myRect]; 
```

将创建一个名为 myBezierPath 的空 UIBezierPath，具有 myRect 赋予它的边界，然后我可以使用 moveToPoint 和 addLineToPoint “绘制” myBezierPath。但是，该代码创建了一个正方形（我正在描边那条路径，所以描边为正方形），其边界位于 myRect 中。但我不想让他被看见。如果我尝试这个，我只想要那个：

```
NSLog(@"myBezierPath rect size %f,%f",myBezierPath.bounds.size.width,myBezierPath.bounds.size.height); 
```

它返回 myRect 的宽度和高度。因此我可以在我的 moveToPoint 方法和 addLine 方法中使用它。例如像这样：

```
[myBezierPath addLineToPoint: CGPointMake(suit.bounds.size.width/2, 0)]; 
```

谢谢。

**我的问题是：«如何使用贝塞尔路径绘制矩形？»**

我用方法做了这个，这里 myRect 的原点将 CGRect 和 myBezierPath 放在视图的中心。

```
myBezierPath = [UIBezierPath bezierPathWithRoundedRect:myRect cornerRadius:20.0]; 
```

[示例 1 http://i.minus.com/iguFjeqZQrsb6.png](http://i.minus.com/iguFjeqZQrsb6.png)

我怎样才能做出类似的事情（将我的另一幅图放在原点的中心）？现在我有这个：

[示例 2 http://i.minus.com/ifVY9UAP7hVv3.png](http://i.minus.com/ifVY9UAP7hVv3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:00:06.320

示例（您的界面中需要一个 UIImageView）：

```
CGRect r = self.myImageView.bounds;
UIGraphicsBeginImageContextWithOptions(r.size, NO, 0);
UIBezierPath* p = [UIBezierPath bezierPathWithRoundedRect:CGRectInset(r,10,10) cornerRadius:10];
[p stroke];
CGPoint c = CGPointMake(r.size.width/2.0, r.size.height/2.0);
p = [UIBezierPath bezierPath];
[p moveToPoint:CGPointMake(c.x-30, c.y)];
[p addLineToPoint:CGPointMake(c.x, c.y-30)];
[p addLineToPoint:CGPointMake(c.x+30, c.y)];
[p addLineToPoint:CGPointMake(c.x, c.y+30)];
[p closePath];
[p fill];
self.myImageView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/bw7Oh.png)

# python - 在日期之后拆分输出

> ID：15837801
> 
> 赞同：0
> 
> 时间：2013-04-05T15:29:27.880
> 
> 标签：python, dictionary, split, whitespace

我有一个脚本以这种格式输出我的任务：

```
Thu Apr 04           Finish Work
                     Walk

Sat Apr 06           Collect NIC

Mon Apr 08           Run test 
```

我想把它分成字典，这样我就可以做一些匹配/格式化：

```
{'Thu Apr 04' : ('Finish Work', 'Walk'),
'Sat Apr 06' : 'Collect NIC',
'Mon Apr 08' : 'Run test'} 
```

我已经尝试过像 split()、replace() 这样的字符串函数，但我无法得到我想要的格式。

**更新＃1**

我将脚本的输出分配给一个变量并使用`print repr(output)`它给出：

```
'\nThu Apr 04           Finish PTI Video\n                     Weigh In\n\nSat Apr 06           Collect NIC\n\nMon Apr 08           Serum uric acid test\n\n' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:22:46.907

你可以试试这个：

```
a = '\nThu Apr 04           Finish PTI Video\n                     Weigh In\n                         Eat out\n\nSat Apr 06           Collect NIC\n\nMon Apr 08           Serum uric acid        test\n\n'
b = {}
same_day = ''
for x in a.split('\n'):
    c = x.split('           ')
    if c[0] is '':
        for q in c:
            if q is not '':
                b.update({same_day: b[same_day] + ', ' + q.strip()})
                break
    else:
        same_day = c[0]
        b.update({c[0] : c[1]}) 
```

这个不干净。但会完成工作。如果输入是文件，那么您可以执行 readline 来获取 x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:35:51.980

假设您将原始脚本的输出（即要解析的示例文本）保存在名为“schedule.txt”的文件中。

```
import re
with open("schedule.txt") as f:
    lines = f.readlines()
sched = {}
currday = None
for line in lines:
    newday = re.match(r'(\w+\s+\w+\s+\w+)\s+(.*)',line)
    if newday:
        currday = newday.group(1)
        sched[currday] = [newday.group(2)]
    elif currday:
        newact = re.match(r'\s+(.*)',line)
        if newact:
            sched[currday] = newact.group(1) 
```

请注意，这会将条目保存为列表，而不是元组。但是，如果你真的需要元组，你可以`tuple()`在它们上调用函数。

# php - 正则表达式中的撇号

> ID：15837807
> 
> 赞同：0
> 
> 时间：2013-04-05T15:29:37.293
> 
> 标签：php, regex, validation

我想知道是否有人可以帮助我。

我正在使用以下正则表达式作为我的表单验证的一部分。

```
else if(!preg_match('/^[A-Za-z0-9 .,;-]{5,60}$/', $locationname)) 
```

我必须承认，我花了一些时间才走到这一步，但我遇到了我无法解决的问题。

我只是想知道是否有人可以告诉我如何在这个正则表达式中加入撇号作为可接受的字符。

非常感谢和亲切的问候

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:31:28.607

用反斜杠转义撇号，`\'`：

```
preg_match('/^[A-Za-z0-9 .,;\'-]{5,60}$/', $locationname) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:37:52.363

尝试使用 \ 转义

> else if(!preg_match('/^[A-Za-z0-9 .,;-\']{5,60}$/', $locationname))

范围 - 也需要转义 (\-)。尝试以下

```
else if(!preg_match('/^[A-Za-z0-9 .,; \-\']{5,60}$/', $locationname)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:04:47.280

除了我收到的帮助之外，经过更多的工作后，我发现解决方案是：`else if(!preg_match('/^$|^[-a-zA-Z0-9 .,;\ \']{5,60}$/', $locationname)){`

问候

克里斯

# css - 带有一些 LESS 魔法的花式媒体查询

> ID：15837808
> 
> 赞同：87
> 
> 时间：2013-04-05T15:29:37.453
> 
> 标签：css, responsive-design, less, media-queries

使用 less 在一些 css 类中包装不同分辨率的 css 样式会很好。

我想做类似的事情：

```
footer {
  width: 100%;
}

.tablet {
  footer {
    width: 768px;
  }
}

.desktop {
  footer {
    width: 940px;
  }
} 
```

最后应该是这样的结果：

```
footer {
  width: 100%;
}

@media screen and (min-width: 768px) {
  footer {
    width: 768px;
  }
}

@media screen and (min-width: 992px) {
  footer {
    width: 940px;
  }
} 
```

.tablet 可能看起来像这样：

```
@media screen and (min-width: 768px) {
  .tablet {

  }
} 
```

希望有人有一个好主意！

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-04-05T19:32:34.410

这是我在项目中所做的：

```
@desktop:   ~"only screen and (min-width: 960px) and (max-width: 1199px)";
@tablet:    ~"only screen and (min-width: 720px) and (max-width: 959px)";

@media @desktop {
  footer {
    width: 940px;
  }
}

@media @tablet {
  footer {
    width: 768px;
  }
} 
```

这允许您只定义一次媒体查询，并且可以在您的 less 文件中使用它。也更容易阅读。:)

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2013-11-19T03:27:42.913

我完全同意 Hai Nguyen 的回答（已被接受），但您可以通过执行以下操作进一步清理它：

```
@desktop:   ~"only screen and (min-width: 960px) and (max-width: 1199px)";
@tablet:    ~"only screen and (min-width: 720px) and (max-width: 959px)";

footer{
  width: 100%;
  @media @tablet {
    width: 768px;
  }
  @media @desktop {
    width: 940px;
  }
} 
```

它本质上是相同的，但允许您将媒体查询嵌套在原始选择器中。它将特定元素的所有 css 保存在一起，并使您的样式更加模块化（与拆分断点方法相比）。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2014-10-17T20:02:26.120

+1 为 Nguyen 和 Yancey - 再加上一个。

如果您想要**明确定义**宽度，您可以使用`string interpolation`断点和变量来完成此操作。这里以引导程序为例 - 严格的规则是为了防止定义重叠。

```
@screen-xs-min:     480px;
@screen-sm-min:     768px;
@screen-md-min:     992px;
@screen-lg-min:     1200px;

@screen-xs-max:     (@screen-sm-min - 1);
@screen-sm-max:     (@screen-md-min - 1);
@screen-md-max:     (@screen-lg-min - 1);

@phone:             ~"only screen and (max-width: @{screen-xs-min})";
@phone-strict:      ~"only screen and (min-width: @{screen-xs-min}) and (max-width: @{screen-xs-max})";
@tablet:            ~"only screen and (min-width: @{screen-sm-min})";
@tablet-strict:     ~"only screen and (min-width: @{screen-sm-min}) and (max-width: @{screen-sm-max})";
@desktop:           ~"only screen and (min-width: @{screen-md-min})";
@desktop-strict:    ~"only screen and (min-width: @{screen-md-min}) and (max-width: @{screen-md-max})";
@large:             ~"only screen and (min-width: @{screen-lg-min})";

footer{
    width: 100%;
    @media @tablet {
        width: 768px;
    }
    @media @desktop {
        width: 940px;
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-01-07T04:24:12.260

你也可以像这样组合媒体查询

```
@media @desktop, @tablet, @ipad{ 

//common styles... 

} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-02T15:23:32.130

我们使用这样的设置：

```
@vp_desktop:    801px;
@vp_tablet:     800px;
@vp_mobile:     400px;

.OnDesktop(@rules) { @media screen and (min-width:@vp_desktop){ @rules(); } };
.OnTablet(@rules) { @media screen and (max-width:@vp_tablet){ @rules(); } };
.OnMobile(@rules) { @media screen and (max-width:@vp_mobile){ @rules(); } }; 
```

你只需要设置变量，mixin 处理其余的，所以它很容易维护但仍然很灵活：

```
div {
  display: inline-block;
  .OnTablet({
    display: block;
  });
} 
```

值得一提的是，虽然这种技术非常简单，但如果使用不当，您的 CSS 输出将充满媒体查询。我尝试将媒体查询限制为每个断点、每个文件 1 个。文件在哪里是 header.less 或 search.less。

注意 除非您使用 javascript 编译器，否则此方法可能无法编译。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-01T18:42:31.177

我正在使用这些 mixins 和变量

```
.max(@max; @rules){@media only screen and (max-width: (@max - 1)){@rules();}}
.min(@min; @rules){@media only screen and (min-width: @min){@rules();}}
.bw(@min; @max; @rules){@media only screen and (min-width: @min) and (max-width: (@max - 1)){@rules();}}

@pad: 480px;
@tab: 800px;
@desktop: 992px;
@hd: 1200px; 
```

所以这

```
footer{
    width: 100%;
    .bw(@tab,@desktop,{
        width: 768px;
    });
    .min(@desktop,{
        width: 940px;
    });
} 
```

变成

```
footer {
  width: 100%;
}
@media only screen and (min-width: 800px) and (max-width: 991px) {
  footer {
    width: 768px;
  }
}
@media only screen and (min-width: 992px) {
  footer {
    width: 940px;
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-04T07:18:37.443

这就是我在项目中使用的：

```
 @mobile:   ~"only screen and (min-width: 320px) and (max-width: 767px)";
    @tablet:    ~"only screen and (min-width: 768px) and (max-width: 991px)";
    @ipad:    ~"only screen and (min-width: 992px) and (max-width: 1024px)";

    @media @mobile {
      .banner{
        width: auto;
      }
    }

    @media @tablet {
      .banner{
        width: 720px;
      }
    }

  @media @ipad {
      .banner{
        width: 920px;
      }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-10T09:58:36.953

```
@highdensity:  ~"only screen and (-webkit-min-device-pixel-ratio: 1.5)",
               ~"only screen and (min--moz-device-pixel-ratio: 1.5)",
               ~"only screen and (-o-min-device-pixel-ratio: 3/2)",
               ~"only screen and (min-device-pixel-ratio: 1.5)";

@mobile:        ~"only screen and (max-width: 750px)";
@tab:       ~"only screen and (min-width: 751px) and (max-width: 900px)";
@regular:        ~"only screen and (min-width: 901px) and (max-width: 1280px)";
@extra-large:  ~"only screen and (min-width: 1281px)"; 
```

# python - 使 pyplot.hist() 第一个和最后一个 bin 包含异常值

> ID：15837810
> 
> 赞同：19
> 
> 时间：2013-04-05T15:29:47.980
> 
> 标签：python, numpy, matplotlib

`pyplot.hist()`文档指定在为直方图设置范围时*“忽略上下异常值”*。

*是否可以在不改变 bin 宽度的情况下使*直方图的第一个和最后一个 bin 包含所有异常值？

例如，假设我想查看`0-3`具有 3 个 bin 的范围：（`0-1, 1-2, 2-3`为简单起见，我们忽略完全相等的情况）。我希望第一个 bin 包含从负无穷到 1 的所有值，最后一个 bin 包含从 2 到无穷大的所有值。但是，如果我明确地将这些箱设置为跨越该范围，它们将非常宽。我希望它们具有相同的宽度。我正在寻找的行为就像`hist()`在 Matlab 中的行为。

显然，我可以`numpy.clip()`绘制数据并绘制它，这将给我想要的东西。但是我很感兴趣，如果有一个内置的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-06-26T20:16:48.117

我也在为此苦苦挣扎，并且不想使用，因为它可能会产生误导，所以我写了一个小函数（从[this](https://edwinth.github.io/blog/outlier-bin/)`.clip()`大量借用）来表明上部和下部 bin 包含异常值：

```
def outlier_aware_hist(data, lower=None, upper=None):
    if not lower or lower < data.min():
        lower = data.min()
        lower_outliers = False
    else:
        lower_outliers = True

    if not upper or upper > data.max():
        upper = data.max()
        upper_outliers = False
    else:
        upper_outliers = True

    n, bins, patches = plt.hist(data, range=(lower, upper), bins='auto')

    if lower_outliers:
        n_lower_outliers = (data < lower).sum()
        patches[0].set_height(patches[0].get_height() + n_lower_outliers)
        patches[0].set_facecolor('c')
        patches[0].set_label('Lower outliers: ({:.2f}, {:.2f})'.format(data.min(), lower))

    if upper_outliers:
        n_upper_outliers = (data > upper).sum()
        patches[-1].set_height(patches[-1].get_height() + n_upper_outliers)
        patches[-1].set_facecolor('m')
        patches[-1].set_label('Upper outliers: ({:.2f}, {:.2f})'.format(upper, data.max()))

    if lower_outliers or upper_outliers:
        plt.legend() 
```

您还可以将其与自动异常值检测器（从[此处](https://stackoverflow.com/questions/11882393/matplotlib-disregard-outliers-when-plotting)借用）结合起来，如下所示：

```
def mad(data):
    median = np.median(data)
    diff = np.abs(data - median)
    mad = np.median(diff)
    return mad

def calculate_bounds(data, z_thresh=3.5):
    MAD = mad(data)
    median = np.median(data)
    const = z_thresh * MAD / 0.6745
    return (median - const, median + const)

outlier_aware_hist(data, *calculate_bounds(data)) 
```

[![从标准法线生成数据，然后添加一些异常值。 带有和不带有异常值分箱的图。](https://i.stack.imgur.com/GfIhO.png)](https://i.stack.imgur.com/GfIhO.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T08:12:58.337

不。看着`matplotlib.axes.Axes.hist`和直接使用`numpy.histogram`我相当有信心地说没有比使用剪辑更聪明的解决方案（除了扩展直方图所用的箱）。

我鼓励您查看`matplotlib.axes.Axes.hist`（它只是 Python 代码，尽管公认 hist 比大多数 Axes 方法稍微复杂一些）的来源 - 这是验证此类问题**的最佳方法。**

# iphone - 如何让一个 b2Body 忽略另一个 b2Body？

> ID：15837813
> 
> 赞同：1
> 
> 时间：2013-04-05T15:29:57.623
> 
> 标签：iphone, ios, cocos2d-iphone, box2d, box2d-iphone

我有三个 b2Body-s。头部、下巴和一个静态类型的 b2Body。我将静态 b2Body 中的 b2Joint 添加到头部，将另一个 b2Joint 添加到头部和下巴。Head 忽略静态体，因为 collideConnected 对关节为 false，但 chin 不会忽略它。怎么做这个？请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:33:17.323

```
enum CATEGORY_BITS
{
    BODY1_CATEGORY_BITS = 0x00000001,
    BODY2_CATEGORY_BITS = 0x00000002,
    BODY3_CATEGORY_BITS = 0x00000004,

}; 
```

当你创造身体时......

```
 b2FixtureDef fixtureForBODY1;
    fixtureForBODY1.shape = &shapeForBODY1;
    fixtureForBODY1.filter.categoryBits = BODY1_CATEGORY_BITS;
    fixtureForBODY1.filter.maskBits = BODY1_CATEGORY_BITS | BODY3_CATEGORY_BITS;

    b2FixtureDef fixtureForBODY2;
    fixtureForBODY2.shape = &shapeForBODY2;
    fixtureForBODY2.filter.categoryBits = BODY2_CATEGORY_BITS;
    fixtureForBODY2.filter.maskBits = BODY2_CATEGORY_BITS | BODY4_CATEGORY_BITS;

    b2FixtureDef fixtureForBODY3;
    fixtureForBODY3.shape = &shapeForBODY3;
    fixtureForBODY3.filter.categoryBits = BODY3_CATEGORY_BITS;
    fixtureForBODY3.filter.maskBits = BODY3_CATEGORY_BITS | BODY1_CATEGORY_BITS;

    b2FixtureDef fixtureForBODY4;
    fixtureForBODY4.shape = &shapeForBODY4;
    fixtureForBODY4.filter.categoryBits = BODY4_CATEGORY_BITS;
    fixtureForBODY4.filter.maskBits = BODY4_CATEGORY_BITS | BODY2_CATEGORY_BITS;

// BODY1 -> not collide connected (BODY2 and BODY4)
// BODY1 -> collide connected (BODY1 and BODY3) 
```

# java - 在 Eclipse 中，使用另一种数据类型定义数据类型，只有后一个测试客户端 main() 运行，如何只运行第一个？

> ID：15837818
> 
> 赞同：0
> 
> 时间：2013-04-05T15:30:08.737
> 
> 标签：java, eclipse

这是一个与作业相关的问题，所以我最好不要发布任何代码，但我的问题是具体的。

我是 Eclipse 的新手，所以我只想知道我所看到的是否正常以及是否有出路。

我所做的是定义一个数据类型，它是一个包含构造函数、方法、测试客户端（`static void main()`）的类。我使用了外部库中另一个类的另一个数据类型。现有数据类型的名称是WeightedQuickUnionUF，我们称之为WQUF简而言之。

我实例化了一个 WQUF 类型的变量以使用 WQUF 具有的方法`static void main()`。我在类的底部编写了一个测试客户端（）来检查我的方法是否正常工作。我使用像 10 这样的常量作为参数来初始化我的数据类型变量。然后我在那个变量上使用了我的方法。我使用了一些 println 语句来输出变量的状态，以查看我的方法是否有效。

当我点击 Run 运行我的类时，控制台显示类 WQUF 正在运行并等待输入。我打开了 WQUF.class。是的，里面有一个测试客户端`void main()`。

我的意图只是使用 WQUF 中的方法和私有变量，当然我看不到私有变量。我不想运行需要输入的 WQUF 测试客户端。

我的问题是，我面临的情况正常吗？有什么办法可以避免运行 WQUF 测试客户端？

PS：Findbugs发现了2个bug。说

> 死存储到我的 WeightedQuickUnionUF 实例变量并且未使用该变量的值

.另一个是

> WeightedQuickUnionUF 是一个不成文的字段

.不知道这是什么意思。相关或误报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:06:21.040

我相信这与 Eclipse 无关，但更像是您是 Java 新手，还没有完全弄清楚它是如何工作的。

执行 Java 程序的主要入口点是“public static void(String[] arguments)”。这是你实例化你的第一个对象的地方（并且可能调用它的一些方法）。因此，当您在 Eclipse 中右键单击您的类并选择“Run as java app”时，它会自动查找这样的主方法并调用它。所以当你运行它时会发生什么，实际上取决于你在那个 main 方法中编写的代码......

也许您也应该发布您的 2 个课程，以便我们更轻松地了解您的问题并引导您走向正确的方向。

作为旁注：

*   “死店”意味着您正在为字段/变量分配一个值，而以后不使用它
*   “未写字段”意味着您在尝试使用它之前没有为其分配值（来自定义、构造函数、方法等），因此它始终为 null

此外，当您对 Java 感到足够熟悉时，您可以查看 JUnit 或 TestNG 库，它们旨在帮助您以标准化的方式测试代码，而不是使用主要方法。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:42:41.760

我的问题是，我面临的情况正常吗？这绝对是正常的，这就是我们所说的封装。

有什么办法可以避免运行 WQUF 测试客户端？您想制作自己的测试客户端方法吗？尝试从`WQUF`类扩展，所以它将是`MyWQUF`类然后覆盖`testClient()`方法。

# .htaccess - htaccess 选项-索引有什么用？

> ID：15837822
> 
> 赞同：38
> 
> 时间：2013-04-05T15:30:18.267
> 
> 标签：.htaccess

我查看了 apache.org 站点中的解释，但没有以我能理解的方式解释。我在这里找到了一些信息[.htaccess File Options -Indexes on Subdirectories](https://stackoverflow.com/questions/1767785/htaccess-file-options-indexes-on-subdirectories)但它也没有解释它。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-05T15:43:33.667

索引选项设置您是否可以“浏览”目录。如果索引设置为加号，并且该目录没有 index.html 或 index.php （任何）文件，它将显示目录的内容，就像您的文件管理器一样。因此，如果那里有十张图像，它只是将它们显示为一个列表，其中包含指向实际图像的链接。您可以单击它们并打开它们。

大多数时候这不是你想要的。您不希望其他人看到该文件夹​​中的内容。然后你用 -Indexes 把它关掉。

在这里，您可以看到一个打开目录的示例，它们被称为： http: [//www.ecoutetpartage.fr/images/](http://www.ecoutetpartage.fr/images/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T15:44:22.030

-Indexes 抑制了在没有设置 DirectoryIndex 的目录中直接列出文件的可能性。

假设 httpd DirectoryIndex 设置为：`DirectoryIndex index.html index.php`。

如果根据 DirectoryIndex httpd（在本示例中为 index.html 和 index.php）变量，您的 RootDirectory 中没有文件，则在设置 +Indexes 时将列出您的目录内容。设置 -Indexes 时，您的目录内容将永远不会显示。

# ruby - eval 退出时，由 eval 创建的新实例变量不会停止

> ID：15837823
> 
> 赞同：0
> 
> 时间：2013-04-05T15:30:20.750
> 
> 标签：ruby, metaprogramming, eval

*请注意， eval 在临时范围内评估其代码。eval 可以改变已经存在的实例变量的值。但是它定义的任何新实例变量对于 eval 的调用都是本地的，并且在它返回时不再存在。（就好像被评估的代码在块的主体中​​运行——块的本地变量不存在于块之外。）*

-- 来自“**红宝石编程**”一书，第**8.3.1章**

```
irb(main):001:0> class Point
irb(main):002:1> def initialize(x,y)
irb(main):003:2> @x,@y=x,y
irb(main):004:2> end
irb(main):005:1> end
=> nil
irb(main):006:0> p=Point.new(1,2)
=> #
irb(main):007:0> 
irb(main):008:0* def get_bind
irb(main):009:1> binding
irb(main):010:1> end
=> nil
irb(main):011:0> b=p.get_bind
=> #Binding:0x81915b0
irb(main):012:0> 
irb(main):013:0* eval("@x",b)
=> 1
irb(main):014:0> 
irb(main):015:0* eval("@x=10",b)
=> 10
irb(main):016:0> eval("@x",b)

=> 10
irb(main):017:0> 
irb(main):018:0* eval("@z=2",b)
=> 2
irb(main):019:0> eval("@z",b)

=> 2
irb(main):020:0> p.instance_variables
=> [:@x, :@y, :@z]
irb(main):021:0> 
irb(main):022:0* 
irb(main):023:0* 
```

实例变量“@z”没有*停止*，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:29:46.300

我手头没有这本书，但那肯定是错字了。作者所描述的对于Ruby >=1.9 中的*局部变量是正确的。*

1.9.3：

```
irb(main):001:0> eval("a=1")
=> 1
irb(main):002:0> a
NameError: undefined local variable or method `a' for main:Object
    from (irb):2
    from /Users/apple/.rbenv/versions/1.9.3-p385/bin/irb:12:in `<main>' 
```

1.8.7：

```
>> eval("a=1")
=> 1
>> a
=> 1 
```

**编辑：**这是本书的[更新版本](http://de.scribd.com/doc/113838195/10-RubyProg#page=285)，上面写着“局部变量”。

# c# - 带有检查空元素的 XML 到 LINQ

> ID：15837829
> 
> 赞同：4
> 
> 时间：2013-04-05T15:30:29.843
> 
> 标签：c#, linq, xml-parsing

我面临的情况是使用 Linq 将 XML 文档解析为对象。在解析过程中，我正在检查以确保元素不为空，然后再继续解析它们的值。有没有办法简化这个陈述？

```
 var variable = (from x in xdoc.Descendants("Root")
                 select new AccountingResponse
                 {      
                 NetCharge = x.Element("Charges") != null && x.Element("Charges").Element("NetCharge") != null ? x.Element("Charges").Element("NetCharge").Value : "0",
                 TotalCharge = x.Element("Charges") != null && x.Element("Charges").Element("TotalCharge") != null ? x.Element("Charges").Element("TotalCharge").Value : "0"
                 }).SingleOrDefault(); 
```

总而言之，我不想继续检查每条线上是否存在节点。我知道我可以在解析之前测试该节点是否存在，但可能还有其他数据需要解析以创建 AccountingResponse，我想避免一次只解析一部分 XML 的 if 语句。

或者也许我做错了，有更好的方法！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:33:11.650

一个简单的选项是使用`Elements`而不是`Element`- 如果元素不存在，它将返回零长度序列。所以你可以使用：

```
from x in xdoc.Descendants("Root")
select new AccountingResponse
{      
    NetCharge = x.Elements("Charges")
                 .Elements("NetCharge")
                 .Select(y => (int) y)
                 .FirstOrDefault(),
    TotalCharge = x.Elements("Charges")
                   .Elements("TotalCharge")
                   .Select(y => (int) y)
                   .FirstOrDefault(),
}).SingleOrDefault(); 
```

（请注意，您的原始代码不会编译，因为`Value`它是一个字符串，而 0 是一个 int ...）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-06T09:40:31.923

在 C# 6.0 中，您可以使用 monadic Null-conditional operator`?.` 在您的示例中应用它之后，它看起来像这样：

```
var variable = (from x in xdoc.Descendants("Root")
                select new
                {
                    NetCharge = x.Element("Charges")?.Element("NetCharge")?.Value ?? "0",
                    TotalCharge = x.Element("Charges")?.Element("TotalCharge")?.Value ?? "0"
                }).SingleOrDefault(); 
```

[你可以在这里](https://github.com/dotnet/roslyn/wiki/New-Language-Features-in-C%23-6)阅读更多标题为 Null 条件运算符的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T15:32:52.853

你可以更换

```
x.Element("nodeName") != null : int.Parse(x.Element("nodeName").Value) : 0 
```

和

```
(int)x.Element("nodeName") 
```

它也适用于`string`, `int`, `double`, `decimal`, `bool`, `uint`,`DateTime`和`Nullable`那些。

# mysql - 搜索以 X & Y 开头的字符串返回 0 结果 MySQL

> ID：15837830
> 
> 赞同：0
> 
> 时间：2013-04-05T15:30:34.360
> 
> 标签：mysql

询问：

```
 SELECT *
 FROM MyTable
 WHERE SomeCol LIKE '%X & Y%' 
```

即使我的表包含一行`SomeCol = 'X & Y Some More Text'`

如果我只搜索`'%Z & J%'`返回 1 行但在该记录中`SomeCol = 'Some Preceeding Text Z & J'`

因此，如果与号位于带空格的字符串的开头，则基本上它返回 0 行，但如果它位于中间或末尾，则返回正确的行。

任何想法为什么会发生这种情况？

**注意：**请注意，这`%X & Y%`只是一个搜索字符串，我的代码可能会搜索其他字符串，例如纯字符串`'%some text%'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:44:45.740

我能想到两种可能：

1）您的搜索字符串“X & Y”在与号和字母之间包含的空格数量与您的数据库不同。

2）在数据库中（或在您的搜索词中）编码您的文本字符串并且数据实际上说 `X &amp; Y`而不是`X & Y`. 在 HTML 页面中对 & 符号进行编码是很常见的。

请注意，这`column LIKE '%search-term%'`将表现得非常糟糕。这种搜索永远不能使用索引。如果此项目旨在扩大规模，您可能需要调查全文搜索。

# oracle - 如何保护时间戳列不被用户更新

> ID：15837834
> 
> 赞同：0
> 
> 时间：2013-04-05T15:30:51.703
> 
> 标签：oracle, timestamp

我创建了一个触发器来放置两个时间戳，插入和更新。我希望创建的时间戳永远被冻结，但我发现用户可以使用常规的 SQL UPDATE 语句直接更新它（在正常插入之后）。如何保护 tsCreated 免受用户更新？

这是触发器

```
CREATE OR REPLACE TRIGGER AAAjob_timing
    before insert or update
    on AAAJOB
    for each row
begin
    CASE
        WHEN INSERTING THEN
            :new.tsCreated := sysdate;
            :new.tsUpdated := :new.tsCreated;
        WHEN UPDATING THEN
            :new.tsUpdated := sysdate;
    END CASE; 
    end;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:40:32.897

当用户尝试更新此列中的值时，在触发器中引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:14:03.033

怎么样

```
CREATE OR REPLACE TRIGGER AAAJOB_TRIGGER
  BEFORE INSERT OR UPDATE ON AAAJOB
  FOR EACH ROW
BEGIN
  IF INSERTING THEN
    :NEW.TSCREATED := SYSDATE;
    :NEW.TSUPDATED := SYSDATE;
  ELSIF UPDATING THEN
    :NEW.TSCREATED := :OLD.TSCREATED;
    :NEW.TSUPDATED := SYSDATE;
  ENDIF;
END AAJOB_TRIGGER; 
```

分享和享受。

# c - 我可以在 Linux 内核中调用任何 GCC 内置函数吗？

> ID：15837840
> 
> 赞同：3
> 
> 时间：2013-04-05T15:31:08.970
> 
> 标签：c, linux, gcc, linux-kernel, x86

GCC 的一些内置函数处理浮点值： http: [//gcc.gnu.org/onlinedocs/gcc-4.2.4/gcc/Other-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.2.4/gcc/Other-Builtins.html)

由于 Linux 内核默认不支持浮点运算，这是否意味着我不能在 Linux 内核模块中使用这些内置的 GCC 函数？

如果我做了一些事情来达到这种效果，我可以使用它们吗（假设我在 x86 系统上）：

```
kernel_fpu_begin();

float x = 3.14;
x = __builtin_ceil(x);

kernel_fpu_end(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:51:15.240

Linux 内核不允许在内部使用浮点，因为 x86 上的浮点使用特殊的寄存器堆栈，保存/恢复成本很高。需要非整数的（非常）少数地方使用定点（即，具有假定小数点或二进制点的整数运算）。

# ajax - 如何从jQuery发送json数据？

> ID：15837842
> 
> 赞同：2
> 
> 时间：2013-04-05T15:31:12.303
> 
> 标签：ajax, json, jsp

我正在尝试发送 JSON 字符串

```
var json = {"city":value1, "country":value2};
$.ajax({
    url : url,
    data : json,
    dataType : 'json',
    success : function(response) {
        alert(response);
    }
}) 
```

在`URL`我进行ajax调用的地方，我没有得到如何在那里获取这个字符串值？我应该使用`request.getParameter`什么？参数中的值应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:42:16.430

阿贾克斯请求：

```
 var jsonObj= { jsonObj: [... your elements ...]};

    $.ajax({
        type: 'post',
        url: 'Your-URI',
        data: JSON.stringify(jsonObj),
        contentType: "application/json; charset=utf-8",
        traditional: true,
        success: function (data) {
            ...
        }
    }); 
```

在服务器端：

```
String city =    request.getParameter("city");

String country=    request.getParameter("country"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:06:16.247

这可能是一个坏主意，但已经完成了工作。感谢大家分享您的想法很难发送数据。我看到了@baadshah 提出的所有建议答案，但是我无法实现一个。:(。我重新分析了这个问题。

我的问题是我无法`JSON`在服务器端页面中检索数据，因为我能够访问其他元素。我的 HTML 页面有其中之一

```
 <input type = "text" name = "fname" class = "imp"/> 
```

在我的 JSP 页面中，我可以使用

```
 String fname = request.getParameter("fname"); 
```

在被困了几个多小时并感到沮丧之后，我想到了另一种方式。这是我找到的解决方案。如果我可以将`JSON`字符串与具有有效名称的任何输入标签组合在一起，则此问题将得到解决。下一刻我在脚本标签中添加了这一行

```
$('input[name=hide]').val(json);
var dataToBeSent = $("form#hidden").serialize(); 
```

在 HTML 部分中，我添加了以下代码段。

```
<form name="hidden" id="hidden">
     <input type="hidden" name="hide"/>
</form> 
```

这解决了我的问题。这可能不是最好的方法，但它确实完成了工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:32:30.917

`type: "POST"`

应该做的伎俩。

# entity-relationship - 如何在 ER 中为弱实体建模，使其具有来自同一个强实体的两个键？

> ID：15837846
> 
> 赞同：0
> 
> 时间：2013-04-05T15:31:26.317
> 
> 标签：entity-relationship

长话短说，我需要为某种足球数据库建模。比赛由日期和参赛的两支球队确定。我有一个名为 Team 的强大实体，问题是我如何建模以便匹配实体（我怀疑它是一个弱实体）有两个依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:37:45.560

您的匹配实体将包含三个字段：日期、团队 1、团队 2。

匹配实体的主键类似于：primarykey(date, team1, team2)

```
Create table Match(
  date datetime not_null,
  team1 int not_null,
  team2 int not_null,
  primary_key(date, team1, team2),
  foreign key (team1) references Team(id),
  foreign key (team2) references Team(id)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:04:33.193

好的，那么你想要的是这样的。问题是对此有不同的表示法。我希望这可以帮助你。

![ER模型](https://i.stack.imgur.com/XDzD0.jpg)

# .net - 如何创建和检测稀疏 DTO 的变化？

> ID：15837847
> 
> 赞同：0
> 
> 时间：2013-04-05T15:31:28.043
> 
> 标签：.net, wcf, entity-framework, dto

我正在开发一些由利用实体框架的 DAL 支持的 WCF 服务。客户端、服务和 DAL 通过数据传输对象 (DTO) 以 WCF 数据合同的形式相互通信。（来自 EF 的 Entity 对象被封装在 DAL 中）。

为了最大限度地减少网络上的数据量，我想支持稀疏 DTO 的传输——对象中总字段的一个子集。

例如，假设我有这样的 DTO：

```
public class widget
{
   public string ID { get; set; }
   public string Name { get; set: }
   public int Amount { get; set; }
   public string Color { get; set; }
} 
```

说对象的原始状态是：

```
ID = "xxx"
Name = "flux capacitor"
Amount = 42
Color = "purple" 
```

现在，客户端可能想要显示系统中所有小部件的列表，因此从服务请求所有小部件的列表，但只请求`ID`和`Name`字段。

**第一个问题：**在这种情况下，如何向客户端发送稀疏 DTO？我知道 DataMembers 在 DataContracts 中是可选的，但我不确定初始化它的代码是什么样的。只需填写要求的字段？

现在假设`Name`UI 中的字段是可编辑的，并且用户更改了 xxx 小部件的名称。客户端触发来自服务发送的更新：

```
ID = "xxx"
Name = "a new name" 
```

此时，我希望能够检测到只有`Name`字段已更改并触发 DAL 中实体的更新。**下一个问题是：**我怎么知道客户端发送了一个 DTO，其中只指定了`ID`and`Name`字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:13:56.610

我决定做的是为所有原始字段创建具有可为空类型的 DTO。这样，当 DTO 来自客户端请求时，代码可以检查 NULL。如果为 NULL，则客户端未指定该字段。否则，从 EF 获取值并将其设置在 Entity 实例上，并让数据库上下文找出发生了什么变化......

# ruby-on-rails - 显示存储在另一个应用程序中的回形针（图像），当前应用程序已经与外部数据库连接，Ruby on rails

> ID：15837852
> 
> 赞同：0
> 
> 时间：2013-04-05T15:31:42.350
> 
> 标签：ruby-on-rails, database, image, paperclip, external

我有一个新应用程序，我想与另一个 ror 应用程序共享公共部分。

例如，我有一个名为 MVC `showcase`，用于在以前的应用程序中显示图像，我希望在我的新应用程序中也有相同的 MVC。

现在我已经将我的新应用程序与前一个应用程序的数据库连接起来，创建了一个具有相同名称“showcase”的模型，并且可以得到它的列，如`image_file_name; image_content_type;; image_file_size`.. 但是在新应用程序中展示的视图页面中，它无法识别`image`哪个是回形针类型属性。

谁能告诉我如何使用以前应用程序中的图像？

非常感谢！

**更新：**

```
class Showcase < ActiveResource::Base
  self.site = "http://localhost:3000"
end 
```

控制器：

```
class ShowcasesController < ApplicationController
   def index
    @showcases = Showcase.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @showcases }
      format.xml { render :xml => @showcases }
    end
  end

  def show
    @showcase = Showcase.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @showcase }
      format.xml { render :xml => @showcases }
    end
  end
end 
```

看法：

```
<%= image_tag @showcase.image.url % 
```

错误：
# 的未定义方法“图像”

我的视图如何识别图像？

顺便说一句，在原始应用程序中，它没有渲染 xml，所以我手动附加渲染 xml 可以吗？

```
format.html # show.html.erb
      format.json { render json: @showcase }
      format.xml { render :xml => @showcases } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:43:31.967

如果您有适当的 RESTful API 来访问您的第一个应用程序（app1）中的展示资源，那么您可以使用来自其他 ROR 应用程序（app2）ActiveResource 的展示模型。ActiveResource 抽象了两个应用程序之间的通信，它看起来好像模型属于同一个应用程序。

如果app1中展示模型的restful url是www.app1.com/showcases，那么在app2中，您所要做的就是创建一个名为showcase的模型，如下所示。

```
class ShowCase < ActiveResource:Base
 self.site="www.app1.com" 
end 
```

查看 rails cast 剧集[http://railscasts.com/episodes/94-activeresource-basics](http://railscasts.com/episodes/94-activeresource-basics)了解更多详情。

# exception - 通过 JMX 访问 Apache ActiveMQ 抛出异常

> ID：15837853
> 
> 赞同：2
> 
> 时间：2013-04-05T15:31:44.427
> 
> 标签：exception, activemq, jmx

我正在使用全新的 ActiveMQ 5.8.0 安装，其中我在名为“测试”的队列中有一条消息。我还替换了 ACTIVEMQ_SUNJMX 行`bin/activemq`以启用 JMX：

```
ACTIVEMQ_SUNJMX_START="-Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false" 
```

然后我通过以下代码查询 JMX：

```
 try {
        JMXConnector connector = JMXConnectorFactory.connect(new JMXServiceURL("service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi"));
        connector.connect();
        MBeanServerConnection connection = connector.getMBeanServerConnection();

        ObjectName mbeanName = new ObjectName("org.apache.activemq:BrokerName=localhost,Type=Broker");
        BrokerViewMBean mbean = MBeanServerInvocationHandler.newProxyInstance(connection, mbeanName, BrokerViewMBean.class, true);

        System.out.println("Id:" + mbean.getBrokerId()); // here the exception will be thrown
    }
    catch (Exception x) {
        x.printStackTrace();
    } 
```

访问 mbean 时抛出异常。

```
java.lang.reflect.UndeclaredThrowableException
    at $Proxy0.getBrokerId(Unknown Source)
    at testing.TestJmx.main(TestJmx.java:25)
Caused by: javax.management.InstanceNotFoundException: org.apache.activemq:BrokerName=localhost,Type=Broker
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1095)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:643)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:668)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1424)
    at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:89)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1292)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1380)
    at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:621)
    at sun.reflect.GeneratedMethodAccessor30.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:160)
    at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
    at javax.management.remote.rmi.RMIConnectionImpl_Stub.getAttribute(Unknown Source)
    at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.getAttribute(RMIConnector.java:901)
    at javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:280)
    ... 2 more 
```

我检查了那个端口正在监听，VisualVM 还向我展示了 mbean，想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T16:49:27.087

bean 名称已更改的事实记录在 5.8.0[发布页面上](http://activemq.apache.org/activemq-580-release.html)。

所以你的 ObjectName 应该是这样的形式：

```
 ObjectName mbeanName = new ObjectName("org.apache.activemq:type=Broker,brokerName=localhost"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T11:19:01.020

优秀的答案。这里有一个使用示例：[API Docs](http://activemq.apache.org/maven/apidocs/src-html/org/apache/activemq/web/BrokerFacadeSupport.html)

从 5.7 到 5.8 还有一些重要的变化。JMX 服务的默认 URL 来自：

```
service:jmx:rmi://localhost/jndi/rmi://localhost:1099/jmxrmi 
```

到：

```
service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T13:26:24.410

也很可爱的问题和答案，我很难配置 JMX。ActiveMQ 文档在这方面不是最新的。例如：[http](http://activemq.apache.org/jmx.html) : //activemq.apache.org/jmx.html 并没有说从 5.8.0 开始“SUNJMX”变成“ACTIVEMQ_SUNJMX_START”。

OP提供的配置，即：ACTIVEMQ_SUNJMX_START="-Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false"

，并且相应的代码是真正为我工作的代码。谢谢 ！（我正在使用 ActiveMQ 5.8）

# android - View.getMeasuredWidth() 在不同的时间返回不同的值

> ID：15837854
> 
> 赞同：2
> 
> 时间：2013-04-05T15:31:45.603
> 
> 标签：android, layout, view

我对 View.getMeasuredWidth() 有问题，当我第一次调用它时，它返回值 1243，然后我在这个视图中添加了一些子元素，

当屏幕上可见活动并且我触摸任何孩子时，我已覆盖 onTouchEvent() 函数并记录 view.getMeasuredWidth() 的值并返回不同的值。现在这里返回 621。

为什么 View.getMeasuredWidth() 在不同的时间返回不同的值。

谢谢，

# sql - 有人可以为我分解 PIVOT 查询吗？

> ID：15837855
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:31:48.140
> 
> 标签：sql, sql-server

我正在寻找旋转这些数据，以便输出可以计算每个年龄段的人数......

以下是我所做的，但我什至不认为我很接近....

我正在使用 SQL Server 2008

```
SELECT     [OA_Code], Dominant_F_Age, Age_F_90plus, Age_F_85_89, Age_F_80_84, Age_F_75_79, Age_F_70_74, Age_F_65_69, Age_F_60_64, 
                      Age_F_55_59, Age_F_50_54, Age_F_45_49, Age_F_40_44, Age_F_35_39, Age_F_30_34, Age_F_25_29, Age_F_20_24, Age_F_15_19, Age_F_10_14, Age_F_5_9, 
                      Age_F_0_4, Age_2001_F
FROM         cen.AgeByGenderOA
PIVOT (
    f_Age_data
    for [F_Age_Data] in (Age_F_90plus, Age_F_85_89, Age_F_80_84, Age_F_75_79, Age_F_70_74, Age_F_65_69, Age_F_60_64, 
                      Age_F_55_59, Age_F_50_54, Age_F_45_49, Age_F_40_44, Age_F_35_39, Age_F_30_34, Age_F_25_29, Age_F_20_24, Age_F_15_19, Age_F_10_14, Age_F_5_9), 
                      Age_F_0_4) 
```

我的桌子看起来像这样：

```
CREATE TABLE AgeByGenderOA(
            [OA_Code] AS VARCHAR(50),
            [Age_M_0_4] [varchar](50) NULL,
        [Age_M_5_9] [varchar](50) NULL,
        [Age_M_10_14] [varchar](50) NULL,
        [Age_M_15_19] [varchar](50) NULL,
        [Age_M_20_24] [varchar](50) NULL,
        [Age_M_25_29] [varchar](50) NULL,
        [Age_M_30_34] [varchar](50) NULL,
        [Age_M_35_39] [varchar](50) NULL,
        [Age_M_40_44] [varchar](50) NULL,
        [Age_M_45_49] [varchar](50) NULL,
        [Age_M_50_54] [varchar](50) NULL,
        [Age_M_55_59] [varchar](50) NULL,
        [Age_M_60_64] [varchar](50) NULL,
        [Age_M_65_69] [varchar](50) NULL,
        [Age_M_70_74] [varchar](50) NULL,
        [Age_M_75_79] [varchar](50) NULL,
        [Age_M_80_84] [varchar](50) NULL,
        [Age_M_85_89] [varchar](50) NULL,
        [Age_M_90plus] [varchar](50) NULL,
        [Dominant_M_Age] [varchar](50) NULL,
        [Age_2001_F] [varchar](50) NULL,
        [Age_F_0_4] [varchar](50) NULL,
        [Age_F_5_9] [varchar](50) NULL,
        [Age_F_10_14] [varchar](50) NULL,
        [Age_F_15_19] [varchar](50) NULL,
        [Age_F_20_24] [varchar](50) NULL,
        [Age_F_25_29] [varchar](50) NULL,
        [Age_F_30_34] [varchar](50) NULL,
        [Age_F_35_39] [varchar](50) NULL,
        [Age_F_40_44] [varchar](50) NULL,
        [Age_F_45_49] [varchar](50) NULL,
        [Age_F_50_54] [varchar](50) NULL,
        [Age_F_55_59] [varchar](50) NULL,
        [Age_F_60_64] [varchar](50) NULL,
        [Age_F_65_69] [varchar](50) NULL,
        [Age_F_70_74] [varchar](50) NULL,
        [Age_F_75_79] [varchar](50) NULL,
        [Age_F_80_84] [varchar](50) NULL,
        [Age_F_85_89] [varchar](50) NULL,
        [Age_F_90plus] [varchar](50) NULL,
        [Dominant_F_Age] [varchar](50) NULL,
        [MAPINFO_ID] [varchar](50) NULL) 
```

如您所见，这是一张巨大的桌子。“Age_M_0_4”列用数字填充。

我希望我的输出阅读

```
OA_Code, Age, countOfAge
123456, Age_0_4, 26
123456, Age_5_9, 24
789456, Age_0_4, 10
789456, Age_5_9, 12 
```

这将包括男性和女性的年龄。

有人想试试这个吗？

最后：“Age_M_”列中包含的数据都是数字计数。50、40、2、0 等...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:38:07.677

您不需要 PIVOT，您需要 UNPIVOT 数据。由于您使用的是 SQL Server 2008+，因此您可以使用`CROSS APPLY`with`VALUES`子句。代码将与此类似：

```
select t.OA_Code,
  c.age,
  sum(cast(c.value as int)) countOfAge
from AgeByGenderOA t
cross apply
(
  values 
    ('Age_0_4', Age_M_0_4),
    ('Age_5_9', Age_M_5_9),
    ('Age_10_14', Age_M_10_14),
    ('Age_15_19', Age_M_15_19) ... add the other columns here
) c (age, value)
group by t.OA_Code, c.age 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/ded85/2)

编辑，如果您想要男性/女性列，您将在 values 子句中包含所有列，但为它们提供相同的年龄范围值：

```
select t.OA_Code,
  c.age,
  sum(cast(c.value as int)) countOfAge
from AgeByGenderOA t
cross apply
(
  values 
    ('Age_0_4', Age_M_0_4),
    ('Age_5_9', Age_M_5_9),
    ('Age_10_14', Age_M_10_14),
    ('Age_15_19', Age_M_15_19),
    ('Age_0_4', Age_F_0_4),
    ('Age_5_9', Age_F_5_9),
    ('Age_10_14', Age_F_10_14),
    ('Age_15_19', Age_F_15_19)
) c (age, value)
group by t.OA_Code, c.age; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/343f2/2)

# php - 为什么 ReflectionClass::getMethods() 从父类返回私有方法？

> ID：15837856
> 
> 赞同：2
> 
> 时间：2013-04-05T15:31:55.397
> 
> 标签：php, reflection

考虑以下代码段：

```
class A {
    private function foo() {}
    protected function bar() {}
}
class B extends A {
    private function baz() {}
}

$r = new ReflectionClass('B');
foreach ($r->getMethods() as $method) {
    echo $method->getName() . PHP_EOL;
} 
```

我希望得到以下输出：

```
baz
bar 
```

但实际输出是：

```
baz
foo
bar 
```

为什么[getMethods()](http://php.net/manual/en/reflectionclass.getmethods.php)从父类返回私有方法，因此超出了所反映的类的范围`B`？

我想知道这背后是否有任何理由，或者这是一个应该提交的错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T15:34:41.060

不，这不是错误。这个函数完全符合它的设计目的。另外，查看您在问题中提供的链接，有一个`filter`参数，可用于设置要返回的方法的属性。

# javascript - POST JSON 到 Jersey 服务

> ID：15837859
> 
> 赞同：0
> 
> 时间：2013-04-05T15:32:06.427
> 
> 标签：javascript, json

我正在尝试将一些 json 数据发布到使用 Jersey 框架实现的 REST Web 服务。我没有使用 JAXB 或 jquery，而只使用 javascript。
我验证了形成的 json 是正确的，但尽管设置了内容类型“application/json”，但在服务器上它被接收为“application/x-www-form-urlencoded”。
这是我的代码：

```
<html>
<head>
<script type="text/javascript">
    function DisplayFormValues()
    {
        var str = {};
        var elem = document.getElementById('frmMain').elements;

        //alert(elem.length);
        for(var i = 0; i < elem.length-1; i++)
        {
            str[elem[i].name] = elem[i].value;

        }
        document.getElementById('lblValues').innerHTML = str;

        var json = JSON.stringify(str);

        // construct an HTTP request
        var xhr = new XMLHttpRequest();
        xhr.open(document.getElementById('frmMain').method,
                document.getElementById('frmMain').action);
        xhr.setRequestHeader("Content-type", "application/json");
        xhr.setRequestHeader("Content-Length",json.length);
        xhr.setRequestHeader('Accept', 'application/json');

        //alert(json);
        // send the collected data as JSON
        xhr.send(json);

        xhr.onloadend = function() {
            // done
        }
    }
</script>
</head>
<body>
    <form id="frmMain" name="frmMain" action="/JerseyTest/rest/postUser"
        method="post">

        <input name="firstName" value="harry" /> <input name="lastName"
            value="tester" /> <input name="toEmail" value="testtest@test.com" />
        <br /> <input type="submit" value="Test"
            onclick="DisplayFormValues();" />
    </form>
    <hr />
    <div id="lblValues"></div>
</body>
</html> 
```

在服务器端：

```
package com.example.jersey.test;

import javax.ws.rs.*;

@Path("/postUser")
public class JsonTest {

    @POST
    @Consumes("application/json")
    @Produces(MediaType.TEXT_PLAIN)
    public String pingPong(String json) {

        return "Answer is "+ json;
    }
} 
```

我是 Web 开发的新手，不确定上面的代码中缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:12:50.020

我正在为以后可能会访问此内容的人回答我自己的问题。上面的代码是正确的并且运行良好，除了 url 被点击了两次。第一次，提交按钮的默认操作，然后根据我们的 XMLHttpRequest 脚本。
这是我在检查 Httpfox 中显示错误为**NS_BINDING_ABORTED**的标头后才知道的。
将输入类型从提交更改为按钮后，一切正常。

# templates - 是否可以将基于策略的设计与自动化测试一起使用？

> ID：15837861
> 
> 赞同：2
> 
> 时间：2013-04-05T15:32:10.067
> 
> 标签：templates, optimization, automated-tests, generic-programming

我正在开发一个数值模拟库，它以由不同计算算法操作的单个数据集合为中心。算法很复杂，它们具有涉及多个参数的不同状态，并且是可互换的（在某些语义限制下）。

为了避免集合的臃肿接口并启用不同的实现等，我正在考虑使用基于策略的设计。这为集合提供了存储结构、算法、参数和内部内容之间的广泛选择组合。

如果我想象我重新设计了我的通用/面向对象的现有设计使用策略，我该如何选择最佳算法和数据结构？从概念上讲，我需要定义一组策略和一组验证测试用例并执行参数研究。

当使用面向对象编程时，这很容易，因为我可以在运行时使用例如基于字符串的抽象工厂来确定所有必要的类型及其参数，类型名称存储在输入文件中，然后由执行的外部脚本更改一系列测试用例上的客户端应用程序。

我如何使用策略来做到这一点，其中 N 个策略的组合最终成为 N 个不同的客户端应用程序？

如何以专业的方式与基于策略的设计一起完成自动化测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:10:07.863

如果您将算法表示为策略，那么您/应该/已经想到了一个非常统一的界面。您可以想象一个“AlgorithmPolicy”处理数据存储中的一些数据并返回结果的一些表示。

“如果我想象我重新设计了我的通用/面向对象的现有设计使用策略，我该如何选择最佳算法和数据结构？”

如果您的面向对象设计当前使用策略模式（另请参阅：四人帮一书），您的策略将简单地替换您使用策略的每个地方。为您设计的不同策略选择“最佳算法”只是为这些策略确定正确的概念结构/接口。（例如，如果您要使用许多不同的数据存储，请确保从它们添加/删除/获取数据的接口是统一的。在这里，考虑三个示例并找到共性会很有帮助......然后想想另一个例子并确保它符合模式。迭代直到感觉正确为止。）

你仍然会有足够的类型检查，只是感觉有点不同（你可能偶尔会遇到一些令人讨厌的编译错误。;）

测试只是为您想要涵盖的每个配置/策略组合编写一些单元测试。无论如何，您可能应该已经在编写这些测试了；主要区别在于，您将要尝试使用您指定的接口，而不是针对具体细节。

您可以根据对算法策略的验证来验证不同的存储方法。（所以，如果我有一些可以以不同方式存储的算法，我可以在 ecah 存储机制的一些测试数据上运行该算法并期望得到相同的结果。）假设你已经指定了接口正确性，你应该只需要为您添加的每个附加存储机制编写一个测试。

再说一遍：如果能有更多关于程序结构的详细信息，你需要传入哪些不同的参数等等。（这些代码中是否有任何开源/将开源？）

根据您所说，在我看来，您的复杂策略流程可能具有如下界面：

FancyDataStore.Process()

为了测试它，我会写： MockAlgorithmPolicy - 一个非常简单的算法，验证起来很简单。MockInternalStuffPolicy - 一个非常简单的内部材料策略，不会导致集成/报告任何新内容。MockStoragePolicy - 一个非常简单的存储策略，满足您的存储接口/不会引起很多问题。

编写一个测试来验证放在一起的模拟...对于您创建的每个 StoragePolicy，编写一个自动化测试来验证它：

```
testSomeStoragePolicy{ 
// has a call to: 
FancyDataStore.Process<MockAlgorithmPolicy, SomeStoragePolicy, MockInternalStuff>() 
// validate... 
} 
```

这应该证明 SomeStoragePolicy 按预期工作。

然后，对于您的算法，您可以编写：

```
testSomeAlgorithmPolicy{
FancyDataStore.process<SomeAlgorithmPolicy, MockStoragePolicy, MockInternalStuff>(); 
///Validate. 
} 
```

这样，您基本上为每个最终编写的策略编写 1 个测试（这似乎可行且不太荒谬）此外，您始终可以添加额外的单元测试以涵盖可能随着时间推移而出现的其他细微集成。

如果您正在寻找有关此主题的好书，我建议您阅读“现代 C++ 编程”；它为 C++ 中的策略驱动设计提供了很好的入门知识。

# javascript - 使用 Javascript 在页面加载时将查询字符串或 GUID 添加到 URL 的末尾

> ID：15837862
> 
> 赞同：0
> 
> 时间：2013-04-05T15:32:10.880
> 
> 标签：javascript, jquery, query-string, guid

我找到了一个关于如何使用 Javascript 创建 GUID 的示例，但是如何获取当前页面 URL 并使用 jQuery 或 Javascript 将 GUID 附加到它。

```
 function S4() {
        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
    }

    // then to call it, plus stitch in '4' in the third group
    guid = (S4() + S4() + "-" + S4() + "-4" + S4().substr(0, 3) + "-" + S4() + "-" + S4() + S4() + S4()).toLowerCase();
    //alert(guid); 
```

我尝试了 window.location = window.location + '?guid=' + guid，但这只是一遍又一遍地重定向页面，同时将 guid 附加到 URL 的末尾。

我只需要在页面加载时将 GUID 附加到 URL 的末尾。我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:39:10.383

使用正则表达式检查该位置是否已有 guid，如果不存在则重新加载页面。

```
var lc = window.location;
if(!(/\?guid=/.test(lc))) {
    window.location = window.location + '?guid=' + guid
} 
```

# php - PHP中使用cURL调用API

> ID：15837864
> 
> 赞同：0
> 
> 时间：2013-04-05T15:32:11.940
> 
> 标签：php, xml

我有以下代码，但是，它不返回任何内容 - 一个空白页。但是如果我插入正确的参数并将整个链接放在网络浏览器上，它会返回我想要的结果。我不想使用 file_get_contents，因为我需要将此函数用于其他无法通过在地址栏上输入整个链接来返回结果的 API 调用。感谢您的帮助。

```
<?php
$data_string ='<HotelListRequest><hotelId>A HOTEL</hotelId></HotelListRequest>';

// Tell CURL the URL of the recipient script
$curl_handle = curl_init ();
curl_setopt ($curl_handle, CURLOPT_URL, 'http://api.ean.com/ean-services/rs/hotel/v3/info?minorRev=4&cid=MYID&apiKey=MYAPIKEY&customerSessionId=&locale=en_US&currencyCode=USD&xml=');

// This section sets various options. See http://www.php.net/manual/en/function.curl-setopt.php
curl_setopt ($curl_handle, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($curl_handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt ($curl_handle, CURLOPT_POST, true);
curl_setopt ($curl_handle, CURLOPT_POSTFIELDS, $data_string);

// Perform the POST and get the data returned by the server.
$result = curl_exec ($curl_handle);
// Close the CURL handle
curl_close ($curl_handle);
echo $result; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:36:24.060

如果您将所有内容都放入浏览器并且它可以工作，那么您正在使用 GET 数据。该服务是否支持使用 POST 数据（这是您在示例中发送的内容）？您是否尝试过通过 CURLOPT_URL 发送所有数据？

此外，您需要将数据字符串更改为

```
"xml=".$data_string 
```

并且可能您也是其他参数（取决于 API）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:37:03.663

根据[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)：

> 在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并使用完整路径。文件类型可以通过使用格式为“;type=mimetype”的文件名来明确指定。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。

所以你应该修改你的 $data_string 变量内容以匹配所需的格式。

# sql-server - 根据一列中的值拆分（复制行）SQL 表

> ID：15837866
> 
> 赞同：0
> 
> 时间：2013-04-05T15:32:15.710
> 
> 标签：sql-server, split, multiple-value

我有一个表，它是导出的结果，并且具有如下所示的列和值

```
Name   Aliases          Ranks
Ben    BenA BenB BenC   1 5 3  
Jerry  JerryA JerryB    7 3 
```

别名和等级由一个字符分隔（在本例中为 CHAR(10)），并且它们具有相同数量的条目。但是每个名称可能有不同数量的别名（因此排名）。

我想写一个 SQL 查询给我下表

```
Name   Alias     Rank
Ben    BenA      1      
Ben    BenB      5 
Ben    BenC      3
Jerry  JerryA    7
Jerry  JerryB    3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:27:57.060

```
with cte as (
    select Name, cast(null as int) as AliasStartPosition, cast(0 as int) as AliasEndPosition, Aliases + ' ' as Aliases, cast(null as int) as RankStartPosition, cast(0 as int) as RankEndPosition, Ranks + ' ' as Ranks
    from (
        values ('Ben', 'BenA BenB BenC', '1 5 3'),
               ('Jerry', 'JerryA JerryB', '7 3')
    ) t (Name, Aliases, Ranks)

    union all

    select Name, AliasEndPosition + 1, charindex(' ', Aliases, AliasEndPosition + 1), Aliases, RankEndPosition + 1, charindex(' ', Ranks, RankEndPosition + 1), Ranks
    from cte
    where charindex(' ', Aliases, AliasEndPosition + 1) != 0
)
select Name, substring(Aliases, AliasStartPosition, AliasEndPosition - AliasStartPosition) as Alias, substring(Ranks, RankStartPosition, RankEndPosition - RankStartPosition) as Rank 
from cte
where AliasStartPosition is not null 
```

# css - 100% 高度 父级高度由具有 % 宽度的图像确定

> ID：15837869
> 
> 赞同：2
> 
> 时间：2013-04-05T15:32:20.860
> 
> 标签：css

我有一个包装器 div，其中包含一个右浮动 100% 高度 div 和一个图像。

图像的宽度设置为 %。当您调整浏览器窗口的大小时，图像高度会随着包装 div 的高度而增加和减少。

当我在包装器 div 上设置固定高度时，右侧浮动的 100% 高度 div 会根据我的需要增加高度。但是，包装器 div 具有动态高度，由图像的当前高度和 100% 高度 div 设置，在这种情况下，不会像您期望的那样垂直调整大小。

我正在努力做的事情可以实现吗？

这是一支笔：[http ://codepen.io/fraserhart/pen/qiFmb](http://codepen.io/fraserhart/pen/qiFmb)

```
<div class="wrapper">
  <img src="http://i.imgur.com/7v619Ip.jpg" />
  <div class="grid">
    <section class="row">
      <p>Home</p>   
    </section>

    <section class="row">
      <p>Looking For Care</p>   
    </section>

    <section class="row">
      <p>Working For Us</p> 
    </section>

    <section class="row">
      <p>Professionals</p>  
    </section>

    <section class="row">
      <p>Who We Are</p> 
    </section>

    <section class="row">
      <p>Find a Branch</p>  
    </section>
  </div>
  <div class="clear-fix"></div>
</div>

.wrapper{
  background:blue;
  height:auto;
}
img{
  width:60%;
}
.clear-fix{
  clear:both;
}
.grid {
  display: box;
  width:400px;
  height:100%;
  box-orient: vertical;
  background:#ff0000;
  float:right;
}
.row {
  padding: 20px;
  box-flex:1;
  background: #ccc;
  padding:0px 5px;
  border:1px solid #ff0000;
  text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:16:27.607

好吧，这是一种实现方式，有点奇怪，可能不推荐，但它是一种概念证明，一种奇怪的 CSS 好奇心。

这是小提琴：http: [//jsfiddle.net/audetwebdesign/3tUfC/](http://jsfiddle.net/audetwebdesign/3tUfC/)

这是HTML：

```
<div class="wrapper">
    <div class="image-port">
        <img src="http://placekitten.com/800/800">
    </div>
    <div class="content-port">
        <div class="grid">
            <div class="row">
                <img src="http://placekitten.com/100/25">
                <p>First...</p>
            </div>
            <div class="row">
                <img src="http://placekitten.com/100/25">
                <p>Second...</p>
            </div>
            <div class="row">
                <img src="http://placekitten.com/100/25">
                <p>Third...</p>
            </div>
            <div class="row">
                <img src="http://placekitten.com/100/25">
                <p>Fourth...</p>
            </div>
        </div>
    </div>
</div> 
```

这是CSS：

```
.wrapper {
    outline: 2px dotted blue;
}

.image-port {
    outline: 1px dotted blue;
    display: table-cell;
    width: 60%;
}
.image-port img {
    width: 100%;
    vertical-align: bottom;
}

.content-port {
    display: table-cell;
    vertical-align: top;
    background-color: wheat;
    height: 100%;
    width: 40%;
}

.content-port .grid {
}

.content-port .row {
    border-top: 2px solid blue;
    position: relative;
    background-color: rgba(255,255,255,0.5);
    overflow: auto;
}
.content-port .row:first-child {
    border-top: none;
}

.content-port .row img {
    width: 100%;
    display: block;
    visibility: hidden;
}
.content-port .row p {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 0 0 0 0;
    padding: 10px;
} 
```

## 这个怎么运作

一个`.wrapper`块包含两个`table-cell`元素：`.image-port`和`.content-port`，相对宽度分别为 60% 和 40%。这避免了网格在小窗口尺寸下跳到图像下方的问题。

在 中`.image-port`，让`img`比例缩放到 100% 宽度以获得图像的良好视图。

在`.content-port`块元素中，为视觉设计设置`position: relative`、 和可选的`overflow`以及其他一些属性。

诀窍是：在每个 中`.row`，放置具有特定纵横比的图像。我创建了四行，所以我的图像是 4:1 的纵横比。将`.row img`宽度设置为 100% 并设置为`visibility: hidden`使图像占用灵活空间但不碍事。这将允许每行行在您重新调整窗口大小时改变大小。

接下来，将您的内容放在 中`.row`，例如，a `p`。content 元素`position: absolute`占据了`.row`父元素的整个宽度和高度（将偏移属性设置为零）。

现在，行的高度与窗口的宽度成比例。这种方法具有一定的灵活性，虽然并不完美，但可能很有用。

请注意，如果您将窗口拉伸得足够宽，则 100x25 图像将是它们的全宽，并且`.grid`将从包装器的右边缘移开。您可以通过使用更大的占位符图像（例如 1000x250）来实现这一点。

如果您将占位符图像制作为透明的 gif 或 png，那么它应该是轻量级的，并且由于您多次使用相同的图像，浏览器确实应该对它发出一个请求（我认为？）。

**这种方法的怪癖**是网格扩展的程度取决于图像端口中图像的纵横比。您需要进行一些试验并尝试优化各种参数以获得令人愉悦的布局。

# r - 合并数据框以创建纵向数据集

> ID：15837870
> 
> 赞同：2
> 
> 时间：2013-04-05T15:32:23.943
> 
> 标签：r, merge

我有三个横截面数据集，我正在尝试将它们合并为一个纵向数据集。一些度量是恒定的（id、sex、community），而另一些则随时间变化（x1 和 y）。我想要一个长格式的最终​​数据集，上面提到的每个变量都有一列。我认为 merge_recurse() 可以解决问题，但它会为 y 和 x1 分别生成两列（尽管 data12 和 data14 像我希望的那样合并......也许是因为这些变量在第一次合并后被重命名？）。关于如何简单快速地做到这一点的任何想法？下面的示例数据。

```
#Constant over time
id = seq(1, 100, 1)
sex = sample(c("male","female"), 100, replace=TRUE)
community = sample(c("comA", "comB", "comC", "comD"), 100, replace=TRUE)
#2010
year = rep(2010, 100)
x1 = rnorm(100, mean=5, sd=1)
y = rnorm(100, mean=10, sd=2)
z = rep(5, 100)
data10 = data.frame(cbind(id, year, sex, community, y, x1, z))
#2012
year = rep(2012, 100)
x1 = rnorm(100, mean=6, sd=1)
y = rnorm(100, mean=11, sd=2)
data12 = data.frame(cbind(id, year, sex, community, y, x1))
#2014
year = rep(2014, 100)
x1 = rnorm(100, mean=7, sd=1)
y = rnorm(100, mean=12, sd=2)
data14 = data.frame(cbind(id, year, sex, community, y, x1))
#Merge each year's data
library(reshape)
#Create a list of all datasets
alldata=list(data10, data12, data14)
#Merge data from multiple dataframes
data = merge_recurse(alldata, by=c("id", "year", "sex", "community")

head(data)

id year    sex community              y.x             x1.x z  y.y x1.y
1  1 2010 female      comC 13.1771632561173 4.87556993759158 5 <NA> <NA>
2  2 2010 female      comB 13.7778630888456 6.69677435551805 5 <NA> <NA>
3  3 2010   male      comD 9.42440506678606 3.10067578314296 5 <NA> <NA>
4  4 2010 female      comB 11.0739409098036 4.12318001019941 5 <NA> <NA>
5  5 2010   male      comB 11.6015489242693  4.9565493450503 5 <NA> <NA>
6  6 2010 female      comB 6.52739602897104 3.76896148237067 5 <NA> <NA> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:02:09.353

我想你正在寻找这个：

```
all   <- do.call(rbind, alldata)
final <- reshape(all, v.names=c("y", "x1"), idvar=c("id", "sex", "community"),
                 timevar="year", direction="wide")

head(final, 3)
#   id    sex community  y.2010  x1.2010   y.2012  x1.2012   y.2014  x1.2014
# 1  1 female      comA   7.711    5.510   13.952    6.502   11.480    6.629
# 2  2   male      comB   9.130    5.672   11.470    5.500   10.295    7.338
# 3  3   male      comC  15.322    4.889   10.185    5.774   12.257    5.941 
```

# grid - 将区域除以预定义的栅格

> ID：15837871
> 
> 赞同：1
> 
> 时间：2013-04-05T15:32:24.450
> 
> 标签：grid, erlang

我有一个大网格（在图像上以灰色表示），分为几个块（每个块的最大宽度为 3 个单位）。现在我想用相应的块划分一个区域（在网格上以红色表示）。

![在此处输入图像描述](https://i.stack.imgur.com/6ZkGC.png)

举个例子，我想要“块区域”（表示为 {X,Y,Width,Height}）：

*   答：{2,3,2,1}
*   B：{4,3,3,1}
*   C：{7,3,1,1}
*   D：{2,4,2,3}
*   ...

我拥有的唯一信息是网格中块的大小（在本例中为 3）和区域的尺寸：{2,3,6,5}（= {X,Y,width,height}）

有谁知道如何以有效的方式做到这一点？我想过使用 mround 来计算块的第一个边界，但这会导致死胡同。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:21:57.557

数学看起来有点奇怪，因为你从 1,1 开始，但这里是它的要点，

1.  分别查找 X/Y 轴的边界（在网格中可除以块大小的数字）
2.  所有尺寸都会blocksize，blocksize除了最左边/右边/顶部/底部的盒子
3.  找到这些特殊盒子的宽度/高度
4.  将相应的大小放置到相应的边界
5.  压缩两个列表

-出口（[f/2]）。

```
f({X,Y,Width, Height}, BlockSize) ->
    % all sizes will be Blocksize, Blocksize except  special cases 
    % left/right most will have Xfd/Xld
    % top/bottom most will have Yfd/Yld
    Xfd = BlockSize - ( ( X - 1) rem BlockSize) , 
    Xld = (X + Width - 1) rem BlockSize,
    Yfd = BlockSize - ( ( Y - 1) rem BlockSize) , 
    Yld = (Y + Height - 1) rem BlockSize,

    Xs = divs(X, Width, BlockSize, Xfd),
    Ys = divs(Y, Height, BlockSize, Yfd),

    %replace last values
    {Lx, _} = lists:last(Xs),
    Xss = lists:keyreplace(Lx, 1, Xs, {Lx, Xld}),
    {Ly, _} = lists:last(Ys),
    Yss = lists:keyreplace(Ly, 1, Ys, {Ly, Yld}),

    R = merge(Xss, Yss),
    io:format("~p~n", [R]).

merge(X, Y) ->
    XY= lists:foldl(fun(Xx, Acc) ->
            lists:foldl(fun(Yy, Acc1) ->
                [{Xx, Yy} | Acc1]
             end, Acc, Y) 
    end, [], X),
    lists:map(fun({{Xx, W}, {Yy, H}}) ->
            {Xx, Yy, W, H} 
    end , XY).

divs(X, W, BlockSize, Fd) ->
    R = [{X, Fd}  | [{Xs, BlockSize} || Xs<- lists:seq(X, X + W), (Xs - 1) rem BlockSize =:= 0]],
    lists:sort(sets:to_list(sets:from_list(R))). 
```

`>[{7,7,1,1}, {7,4,1,3}, {7,3,1,1}, {4,7,3,1}, {4,4,3,3}, {4,3,3,1}, {2,7,2,1}, {2,4,2,3}, {2,3,2,1}]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:37:04.663

为了好玩，我写了这个。

```
-module(cluster).

-compile([export_all]).

-record(point, {x,y}).
-record(area, {x,y,w,h}).

area2points(A) ->
    [#point{x=X,y=Y} || 
        X <- lists:seq(A#area.x, A#area.x+ A#area.w-1), 
        Y <- lists:seq(A#area.y, A#area.y+ A#area.h-1)].

points2area([]) -> empty;
points2area(L) ->
    lists:foldl(fun(P,Acc) -> fromcorner(P,Acc) end, area(),L).

area() -> #area{}.
area(X,Y,W,H) -> #area{x=X,y=Y,w=W,h=H}.

point() -> #point{}.
point(X,Y) -> #point{x=X,y=Y}.

fromcorner(#point{x=X,y=Y},#area{x=undefined,y=undefined}) -> 
    #area{x=X,y=Y,w=1,h=1};
fromcorner(#point{x=X,y=Y},#area{x=Xa,y=Ya,w=W,h=H}) -> 
    {Xmin,Wn} = case X < Xa of
        true -> {X,Xa + W - X};
        false -> {Xa,max(W, X+1-Xa)}
    end,
    {Ymin,Hn} = case Y < Ya of
        true -> {Y,Ya + H - Y};
        false -> {Ya,max(H, Y+1-Ya)}
    end,
    #area{x=Xmin,y=Ymin,w=Wn,h=Hn}.

split(A,L) ->
    LA = area2points(A),
    [points2area(lists:filter(fun(P) -> lists:member(P,LA) end ,area2points(X))) || X <- L].

test() ->
    Z1 = area(1,1,3,3),
    Z2 = area(4,1,3,3),
    Z3 = area(7,1,3,3),
    Z4 = area(1,4,3,3),
    Z5 = area(4,4,3,3),
    Z6 = area(7,4,3,3),
    Z7 = area(1,7,3,3),
    Z8 = area(4,7,3,3),
    Z9 = area(7,7,3,3),
    World = [Z1,Z2,Z3,Z4,Z5,Z6,Z7,Z8,Z9],
    A = area(2,3,6,5),
    split(A,World).

76> make:all().    
Recompile: ../src/cluster
up_to_date
77> l(cluster).    
{module,cluster}
78> cluster:test().
[{area,2,3,2,1},
 {area,4,3,3,1},
 {area,7,3,1,1},
 {area,2,4,2,3},
 {area,4,4,3,3},
 {area,7,4,1,3},
 {area,2,7,2,1},
 {area,4,7,3,1},
 {area,7,7,1,1}]
79> 
```

# php - 在 Google 地图 javascript api v3 中显示位置详细信息

> ID：15837876
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:32:29.360
> 
> 标签：php, google-maps

我正在使用 javascript api v3 显示谷歌地图。我现在可以在 pin 的鼠标悬停时显示标题。但是我想在 pin 的鼠标悬停时在 div 中显示详细信息。有人可以建议这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:51:21.857

假设`details`持有要显示的信息，`marker`是要单击的图钉并且`map`是您的地图：

```
var contentDetails = "<div>" + details + "</div>"
var infowindow = new google.maps.InfoWindow( {content: contentDetails});
google.maps.event.addListener(marker, 'mouseover', function() {
  infowindow.open(map,marker);
}); 
```

# c# - 使用 LINQ 查询 XML 并排除属性值等于元素值的位置

> ID：15837887
> 
> 赞同：1
> 
> 时间：2013-04-05T15:32:57.320
> 
> 标签：c#, xml, linq, list, nested

我有一个针对 XML 的 LINQ 查询，它给了我一个嵌套列表的列表，每个子列表都是一个元素（“行”）属性的列表。

```
var items = loadbodies.Descendants("row").Select(a => a.Attributes().Select(b => b.Value).ToList()).ToList(); 
```

这按预期工作，但我真正需要的是针对另一个值列表查询它，以免添加子列表，其中元素属性之一（“messageID”）位于第二个列表中。我可以为一个值执行此操作，但需要对照整个第二个列表进行检查。

下面是通过第二个列表中的单个硬编码值排除单个子列表的查询。

```
var items = loadbodies.Descendants("row").Where(c => (string)c.Attribute("messageID") != "avaluefromthesecondlist").Select(a => a.Attributes().Select(b => b.Value).ToList()).ToList(); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:36:15.043

只需使用`Contains`. 请注意，分割线极大地提高了可读性：

```
var ids = ...; // Some sequence of ids, e.g. a List<string> or HashSet<string>
var items = loadbodies
      .Descendants("row")
      .Where(row => ids.Contains((string) row.Attribute("messageId")))
      .Select(a => a.Attributes()
                    .Select(b => b.Value)
                    .ToList())
      .ToList(); 
```

请注意，您也可以使用`Join`呼叫......但只要您的 ID 相对较少，这应该没问题。

# salesforce - 如何使用 apex 获取知识文章的未来发布/存档日期？

> ID：15837890
> 
> 赞同：0
> 
> 时间：2013-04-05T15:33:01.010
> 
> 标签：salesforce, apex-code

当前使用知识管理发布服务类在自定义 VF 页面中发布文章，并在未来发布/存档文章。但我似乎找不到向用户显示这个未来日期的方法。它似乎没有存储在文章本身的任何字段或任何顶点工作中。

有谁知道 SF 如何在自己的页面上显示此字段？如果他们允许通过 apex 以某种方式访问​​此日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:07:27.887

如果我正确理解您的问题，您可以在 KnowledgeArticleVersion 中找到您要查找的信息，可能在 FirstPublishedDate 下。因此，您需要在 KnowledgeArticleVersion 中查询相关文章的最新行，然后提取其 FirstPublishedDate 以获取您要查找的日期。

# javascript - CSS input[value=whatever] 选择器似乎与 input.value 不匹配。我错过了什么？

> ID：15837891
> 
> 赞同：0
> 
> 时间：2013-04-05T15:33:02.593
> 
> 标签：javascript, css, dom, css-selectors

注意：我应该注意，对此的正确解决方案是仅使用输入的“占位符”属性，但问题仍然存在。

另一个注意事项：正如 Quentin 在下面解释的那样，“value”属性存储*默认*值，而 input.value IDL 属性存储*当前*值，所以我在下面的示例中用于“修复”问题的 JavaScript 是不合格的，因为它使用（非 IDL）值属性来存储当前值，而不是默认值。此外，它涉及每次按键时的 DOM 访问，因此它始终只是我遇到的问题的一个有缺陷的演示。它实际上是非常糟糕的代码，永远不应该使用。

CSS 选择器让我觉得我可以在没有任何 JS 的情况下使用充当预览的标签进行输入。我绝对将输入定位在标签内的 0,0 处（显示为内联块）并给它一个背景“无”，但前提是它的值是“”并且没有聚焦，否则它有一个背景颜色，它掩盖了标签文本。

[HTML5 规范说 input.value 反映了 input 的当前值](http://developers.whatwg.org/common-input-element-attributes.html#common-input-element-apis)，但即使 input.value 在您输入输入时更新，使用 input[value=somestring] 选择器的 CSS 仅适用于显式输入的内容文档，或者通过 JavaScript 的 setAttribute 方法（也可能通过其他 DOM 更改方式）在 DOM 中设置。

[我做了一个代表这个的jsFiddle。](http://jsfiddle.net/MtzVD/)

以防万一，这是一个包含相关代码的 HTML 文档：

```
<!doctype html>
    <head>
        <meta charset="utf-8" />
        <title>The CSS Attribute selector behaves all funny</title>

        <style>
            label {
                display: inline-block;
                height: 25px;
                line-height: 25px;
                position: relative;
                text-indent: 5px;
                min-width: 120px;
            }
            label input[value=""] {
                background: none;
            }
            label input, label input:focus {
                background: #fff;
                border: 1px solid #666;
                height: 23px;
                left: 0px;
                padding: 0px;
                position: absolute;
                text-indent: 5px;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <form method="post">
            <p><label>name <input required value=""></label></p>
        </form>
        <p><button id="js-fixThis">JS PLEASE MAKE IT BETTER</button></p>
        <script>
            var inputs = document.getElementsByTagName('input');
            var jsFixOn = false;
            for (i = 0; i < inputs.length; i++) {
                if (inputs[i].parentNode.tagName == 'LABEL') { //only inputs inside a label counts as preview inputs according to my CSS
                    var input = inputs[i];
                    inputs[i].onkeyup= function () {
                        if (jsFixOn) input.setAttribute('value', input.value);
                    };
                }
            }

            document.getElementById('js-fixThis').onclick = function () {
                if (jsFixOn) {
                    this.innerHTML = 'JS PLEASE MAKE IT BETTER';
                    jsFixOn = false;
                } else {
                    this.innerHTML = 'No, actually, break it again for a moment.';       
                    jsFixOn = true;
                }
            };
        </script>
    </body>
</html> 
```

我可能会错过一些东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:35:08.280

value 属性设置字段的默认值。

value 属性设置字段的当前值。在字段中键入也会设置当前值。

更新当前值不会更改 value 属性。

属性选择器仅匹配属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:45:26.937

有用于匹配输入元素的许多属性的新伪类

*   `:valid`
*   `:invalid`
*   `:in-range`
*   `:out-of-range`
*   `:required`

未设置任何值的必需元素将与`:invalid`. 如果您坚持使用该值而不是占位符，您可以简单地添加一个模式或一个 customValidity 函数来强制您的初始值被视为无效。

# java - 将 Hibernate 搜索与 RabbitMQ 集成用于分布式后端

> ID：15837896
> 
> 赞同：0
> 
> 时间：2013-04-05T15:33:12.013
> 
> 标签：java, hibernate, jms, rabbitmq, hibernate-search

是否有人将 Hibernate Search 索引队列与 RabbitMQ 或 JMS 或 ActiveMQ 集成。

我们已经在几个不同的领域将 RabbitMQ 用作我们应用程序的一部分。我们不想引入我们必须进一步维护的冗余软件。该模型有哪些替代方案？

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:47:56.270

您可以轻松实现自定义

```
org.hibernate.search.backend.spi.BackendQueueProcessor 
```

（SPI 代表服务编程接口：即不完全是公共 API，但意味着确实定义了稳定的扩展点）

看看[GitHub 上](https://github.com/hibernate/hibernate-search/tree/master/engine/src/main/java/org/hibernate/search/backend/impl/jms)的 JMS 实现，你会发现你只需要：

*   抓取反序列化服务
*   序列化发送给您的操作队列
*   将其发送到队列

对于接收方来说，它很简单：

*   获取反序列化服务
*   反序列化队列
*   将其转发给正确的 indexManager

示例：[完全实现是一种方法](https://github.com/hibernate/hibernate-search/blob/master/orm/src/main/java/org/hibernate/search/backend/impl/jms/AbstractJMSHibernateSearchController.java#L88)。

随意贡献！我们接受拉取请求，您也可以发送不完整的提案以在 github 上讨论它们（或者欢迎您加入邮件列表）。

# highcharts - DateTime xAxis 标签显示不正确

> ID：15837898
> 
> 赞同：0
> 
> 时间：2013-04-05T15:33:22.163
> 
> 标签：highcharts

我有一个正确加载的数据集，但 xAxis 标签与使用指定格式的 JSFiddle 显示的不同。下面的 JSFiddle 分享是我正在使用的确切代码，它完美地显示了星期天 - 星期六。但是，当我在我的应用程序中运行它时，它会显示 00:00 和 12:00 每隔 7 天重复一次。JSFiddle 中唯一的代码更改是将数据从 eval(data.d.Histogram) 加载到实际数组。

[http://jsfiddle.net/ddelella/bZmtT/](http://jsfiddle.net/ddelella/bZmtT/)

```
$(function () {
    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });

    $('#container').highcharts({
        chart: {},
        credits: { enabled: false },
        title: { text: null },
        legend: { enabled: false },
        plotOptions: {
            series: { borderWidth: 0, pointPadding: -.3 }
        },
        xAxis: {
            tickLength: 2,
            minPadding: 0,
            maxPadding: 0,
            type: 'datetime',
            dateTimeLabelFormats: {
                day: '%a'
            }
        },
        yAxis: {
            title: { text: null },
            allowDecimals: false,
            min: 0,
            gridLineWidth: 0
        },
        series: [{
            data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            type: 'column',
            name: 'Tractor Quantity',
            pointStart: Date.parse("12/31/1899 00:00"),
            pointInterval: (24/288) * 3600 * 1000
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:05:15.303

它是由其他日期格式引起的，它们是默认格式，例如，设置`hour: '%a'`并且可能会起作用。请参阅一张图的固定示例，以及一个带有重现问题的示例：http: [//jsfiddle.net/bZmtT/1/](http://jsfiddle.net/bZmtT/1/)

# java - Java二进制补码到整数

> ID：15837899
> 
> 赞同：4
> 
> 时间：2013-04-05T15:33:24.463
> 
> 标签：java, binary, twos-complement

我知道用`Integer.toBinaryString(355) = 0000000101100011`and 将十进制转换为二进制`Integer.toBinaryString(-355) = 1111111010011101`（我取 32 位结果的低 16 位）。

我想做的是另一种方式，采用 16 位二进制补码二进制字符串并转换为十进制。

IE

```
0000000000110010 =  50
1111111111001110 = -50 
```

而不是`1111111111001110 = 65486`

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:35:39.133

您需要将结果读入`short`.

```
short res = (short)Integer.parseInt("1111111111001110", 2);
System.out.println(res); 
```

这[打印`-50`](http://ideone.com/RQJ92F)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:35:26.977

使用`short`? 它们占用 16 位。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

# node.js - 覆盖低级 node.js 模块

> ID：15837904
> 
> 赞同：1
> 
> 时间：2013-04-05T15:33:40.330
> 
> 标签：node.js, ssl, amazon-s3

Amazon S3 允许静态网站托管，但要求存储桶名称必须与您的域名匹配。这意味着您的存储桶名称将类似于：mydomain.com。Amazon S3 还为 *.s3.amazonaws.com 提供通配符 SSL 证书。根据 TLS 的规则，这意味着 com.s3.amazonaws.com 被证书覆盖，但 mybucket.com.s3.amazonaws.com 不是。节点应用程序，如连接到 *.com.s3.amazonaws.com 的[Knox](https://github.com/LearnBoost/knox)应该真的能够信任该证书，即使它违反了 TLS 规则，因为 knox 库是一个“封闭系统”：它只连接到亚马逊财产。

Node 模块`https`依赖于`tls.js`，并`tls.js`具有以下功能：

```
function checkServerIdentity(host, cert) {
...
// "The client SHOULD NOT attempt to match a presented identifier in
// which the wildcard character comprises a label other than the
// left-most label (e.g., do not match bar.*.example.net)."
// RFC6125
if (!wildcards && /*/.test(host) || /[.*].**/.test(host) ||
    /*/.test(host) && !/*.*..+..+/.test(host)) {
   return /$./;
 } 
```

这将正确返回“证书不匹配”错误。上层的 Knox 模块是否可以覆盖 checkServerIdentity 函数，该函数向下几层且不被 Knox 直接调用？我知道如何覆盖我需要的库中的函数，但不知道这些库包含的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:04:04.547

模块有一个全局缓存，这意味着您覆盖的任何功能都将针对所有其他模块进行修改。我认为您可以包括`tls`自己和补丁`checkServerIdentity`：

```
// main.js
var tls = 要求（'tls'），
    mod = require('./mod.js');

tls.checkServerIdentity = 功能（主机，证书）{
  返回真；
};

mod.test();

```

```
// mod.js
var tls = 要求（'tls'）;

出口。测试=功能（）{
  console.log(tls.checkServerIdentity()); // 真的
};

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T20:20:18.447

如果您不想更改全局模块对象（根据您对 Nik 答案的评论），也许您可​​以使用[rewire](https://github.com/jhnns/rewire)模块。我想像这样做：

```
 var knoxModule = rewire("./node_modules/knox/somefile.js");
  knoxModule.__set__("tls", {
      checkServerIdentity: function (host, cert) {
          // some code
      }
  }); 
```

不过，我从来没有使用过它。

# python - for循环的问题

> ID：15837907
> 
> 赞同：0
> 
> 时间：2013-04-05T15:33:49.503
> 
> 标签：python, for-loop

我们刚刚在课堂上学习了大约五分钟的 for 循环，我们已经得到了一个实验室。我正在尝试但仍然没有得到我需要得到的东西。我想要做的是取一个整数列表，然后只取奇数并将它们相加然后返回它们，所以如果整数列表是 [3,2,4,7,2,4,1, 3,2] 返回值为 14

```
def f(ls):
    ct=0
    for x in (f(ls)):
        if x%2==1:
            ct+=x
    return(ct)

print(f[2,5,4,6,7,8,2]) 
```

错误代码读取

```
Traceback (most recent call last):
  File "C:/Users/Ian/Documents/Python/Labs/lab8.py", line 10, in <module>
    print(f[2,5,4,6,7,8,2])
TypeError: 'function' object is not subscriptable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:36:50.647

只是几个小错误：

```
def f(ls):
    ct = 0
    for x in ls:
    #       ^     Do not call the method, but just parse through the list  
        if x % 2 == 1:
            ct += x
    return(ct)
    #     ^  ^ parenthesis are not necessary 

print(f([2,5,4,6,7,8,2]))
#      ^               ^    Missing paranthesis 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:36:55.827

您在函数调用中缺少括号

```
print(f([2,5,4,6,7,8,2])) 
```

而不是

```
print(f[2,5,4,6,7,8,2]) 
```

# php - 500 服务器错误，两个同名函数

> ID：15837910
> 
> 赞同：1
> 
> 时间：2013-04-05T15:34:05.673
> 
> 标签：php, function

我正在使用 PHP 5.4，当我这样做时：

```
<?php
function test(){}
function test(){}
?> 
```

我在浏览器中收到 500 服务器错误，而不是 PHP 错误。这是一个错误吗？你们有同样的经历吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:24:40.140

The output of your server when an error occurs depends on your server setting. Because of security it's a good idea to not expose the real error message on a production server. Instead it's logged somewhere, usually you can find it somewhere around /var/log/apache2/error_log

# javascript - 居中的内容，标题从左到中

> ID：15837912
> 
> 赞同：1
> 
> 时间：2013-04-05T15:34:11.870
> 
> 标签：javascript, jquery, html, css

我不知道我的问题的最佳标题是什么...

好吧，我将用一张简单的图片展示我想要做什么：

![在此处输入图像描述](https://i.stack.imgur.com/72bKM.jpg)

问题：

*   我的内容居中，可以说它是 980px 宽度。
*   现在，我的标题将有一个徽标和一个菜单。
*   但是，我希望我的标题只使用顶部的左侧，例如内容宽度的 50%，然后拉伸到视口的左侧。我知道这可以使用 javascript 并计算内容的左偏移量并使用它的左偏移量设置动态宽度 div。

这是最好的方法吗？我相信应该有另一种方式，但我想不出一个。希望你们有比我更好的主意，因为当我调整窗口大小时，我会减慢网站的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:55:06.073

也许有 2`div`秒；一个在背景中，一个包含徽标？

[http://jsfiddle.net/kUKyp/1/](http://jsfiddle.net/kUKyp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:46:10.490

我相信你所追求的是 CSS 中的 margin:auto 。这很简单：

1.  将您的内容 div 放在页面上，按照您的需要固定宽度为 980px 并设置 margin:auto。
2.  将您的徽标和菜单 div 放入内容中。

这是一个很好的例子：

[http://bluerobot.com/web/css/center1.html](http://bluerobot.com/web/css/center1.html)

上一页的 CSS 代码：

```
body {
    margin:50px 0px; padding:0px; /* Need to set body margin and padding to get consistency between browsers. */
    text-align:center; /* Hack for IE5/Win */
    }

#Content {
    width:500px;
    margin:0px auto; /* Right and left margin widths set to "auto" */
    text-align:left; /* Counteract to IE5/Win Hack */
    padding:15px;
    border:1px dashed #333;
    background-color:#eee;
    } 
```

和标记：

```
<body>
    <div id="Content"></div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:10:45.023

使用 twitter 引导流式布局

```
 <div class="row-fluid">
         <div class="span12">
             <div class="row-fluid">
                  <div class="span6">   (6 for half of the width, number can be changed 1-12)                        your logo and menu
                  </div>
            your content
             </div>
         </div> 
```

# android - SherlockListActivity 没有 getSupportFragmentManager 方法

> ID：15837916
> 
> 赞同：2
> 
> 时间：2013-04-05T15:34:28.533
> 
> 标签：android, actionbarsherlock

我有一个活动源自`SherlockListActivity`，我想`SherlockDialogFragment`在这个活动中展示一个。`show`对话框实例的方法需要一个`SupportFragmentManager`，但似乎`SherlockListActivity`只有方法`getFragmentManager`而没有`getSupportFragmentManager`。

有谁知道为什么`getSupportFragmentManager`缺少该方法以及如何解决此问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:42:05.987

> 有谁知道为什么缺少 getSupportFragmentManager 方法

因为`SherlockListActivity`继承自`ListActivity`，而不是继承自`FragmentActivity`。

> 我该如何解决这个问题？

不要使用`SherlockListActivity`. 使用`SherlockFragmentActivity`一个`SherlockListFragment`或您自己的`ListView`管理代码。

# php - 查找所有标签并更改样式属性

> ID：15837920
> 
> 赞同：0
> 
> 时间：2013-04-05T15:34:40.700
> 
> 标签：php, regex, html-parsing

我正在尝试找到一种从字符串中获取标签并删除样式属性的方法。之后，我想添加自己的样式并保留以下文本。例如，我有：

```
<p><img alt="" src="images/epsth/arismagnisiakos.jpg" style="width: 600px; height: 405px;" /></p><p>&nbsp;</p><p> 
```

end 最终结果应该是：

```
<p><img alt="" src="images/epsth/arismagnisiakos.jpg" style="width: 100%;" /></p><p>&nbsp;</p><p> 
```

我没有成功地尝试过正则表达式，但似乎我太笨了，无法理解它的功能......

每一个帮助将不胜感激！来自希腊吉姆的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:38:06.090

你可以像这样通过正则表达式来做到这一点：

```
$str = '<p><img alt="" src="images/epsth/arismagnisiakos.jpg" style="width: 600px; height: 405px;" /></p><p>&nbsp;</p><p>';

$newStr = preg_replace('#<img (.+) style="(.+)" />#isU', '<img $1 style="width: 100%" />', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:56:59.083

要删除高度或其他一些属性：

```
$string = '<p><img alt="" src="images/epsth/arismagnisiakos.jpg" style="width: 600px; height: 405px;" /></p><p>&nbsp;</p><p' ;
$pattern = "/height:\s*\d*\s*(px|%);*/" ;
$new = preg_replace($pattern,"", $string) ;

echo htmlentities($new) ; 
```

或者删除所有样式的东西并用自己的替换：

```
$string = '<p><img alt="" src="images/epsth/arismagnisiakos.jpg" style="width: 600px; height: 405px;" /></p><p>&nbsp;</p><p' ;
$pattern = "/style=[\'\"][^\"|^\']*[\'\"]/" ;
$own_style = "style='width: 50%'" ;
$new = preg_replace($pattern, $own_style, $string) ;

echo htmlentities($new) ; 
```

通常`RegExp`在 HTML 标签上使用是一件坏事，应该避免，但在某些情况下可能适用。

# python - 返回语句未执行

> ID：15837926
> 
> 赞同：0
> 
> 时间：2013-04-05T15:34:52.637
> 
> 标签：python

所以我写了一个代码，它应该在树中获取给定节点的父节点。这是伪代码。从根源出发，

```
def parent(self, child): 
    if right child exists:
        if the right child == child:
            return self
        else: self.right.parent(child)
    if left child exists:
        if the left child == child:
            print('f')
            return self
        else: self.left._get_parent(node) 
```

我一遍又一遍地遇到这个问题。对于`if the left child == child:`语句，如果函数`if`找到`the left child == child`或，则进入该语句`the right child == child`。

但是，return 语句不执行此操作。我知道这一点，因为当我在它之后写`if the left child == child:`和写`print('f')`时，它确实 print `f`，但是，它没有 return `self`。有谁知道为什么，任何人都可以就如何解决这个问题给出解决方案？

此外，有谁知道如何一次返回两个语句而不是元组或列表？例如，如果我想返回 1 和 2，

```
def x(n):
    return 1, 2 
```

这将返回`(1, 2)`.. 有没有办法不将其作为元组返回？只是为了正常返回。我问这个是因为在递归方面，我想在 1 AS WELL AS 2 上调用相同的函数，而不是在 tuple 上`(1, 2)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:40:07.850

您的代码*会丢弃*`else:`分支中递归调用的返回值。您需要更多`return`陈述：

```
if right child exists:
    if the right child == child:
        return self
    else: 
        return self.right.parent(child)
if left child exists:
    if the left child == child:
        print('f')
        return self
    else:
        return self.left._get_parent(node) 
```

在 Python 中，表达式`1, 2`创建一个元组，这是从函数返回多个值的**规范方式。**通过返回一个元组，这就是多值返回的工作方式。

只需*解压*返回值：

```
def foo():
   return 1, 2

value1, value2 = foo() 
```

或使用索引：

```
values = foo()
values[0], values[1] 
```

# mysql - 如何将正确的日期时间从 mysql 导入到 solr？

> ID：15837931
> 
> 赞同：1
> 
> 时间：2013-04-05T15:34:57.827
> 
> 标签：mysql, datetime, solr, dataimporthandler, convert-tz

我不知道如何通过 DataImportHandler 将正确的日期时间从 mysql 导入到 solr。导入后，日期时间值减去 2 小时

mysql "created_at 2013-04-05 15:04:21" 进入 solr 到 "created_at":"2013-04-05T13:04:21Z"

mysql @@global.time_zone、@@session.time_zone 都是系统并显示正确的 CET 时间。

这是我的 data-config.xml

```
<dataConfig>  
    <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost/test"
        user="+++" password="++++/>  <document>
<entity name="id"
    query="SELECT table.created_at, ... from table"
    <field column="created_at" name="created_at"/> 
```

我尝试使用 CONVERT_TZ 命令。在mysql中它解决了。但是使用 solr 我没有成功， created_at 值根本没有索引。

```
<entity name="id"
    query="SELECT query="SELECT CONVERT_TZ(table.created_at,'+00:00','+01:00'), ... from table"
    <field column="created_at" name="created_at"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:03:29.530

试试这个：我在我的索引中使用了这个，

```
$query= "SELECT DATE_FORMAT(CONVERT_TZ(table.created_at,'+00:00','+01:00'),'%Y-%m-%dT%TZ'),.. FROM table "; 
```

[SOLR 的 DateField 手册](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/schema/DateField.html)

# php - 带有javascript-delay的wkhtmltopdf不起作用

> ID：15837932
> 
> 赞同：5
> 
> 时间：2013-04-05T15:34:59.210
> 
> 标签：php, wkhtmltopdf

使用下面的代码创建的 pdf 尚未完成 javascript 的呈现，因此 javascript 已在一半的表上执行（例如，如果有 100 个表，则有时完成 50 个，其他时候完成 52、54 个等）。

我正在使用该标志`--javascript-delay 40000`来尝试延迟页面的检索，但结果是相同的。它仍然太快地扣动扳机。我知道这是问题所在，因为当我使用浏览器时，一切正常。

如何正确设置延迟？也许`shell_exec`这里有错？

```
$command = shell_exec("xvfb-run -a -s '-screen 0 640x480x16' wkhtmltopdf-i386 --dpi 300 --javascript-delay 40000 --page 
```

**编辑：**

使用版本：

```
wkhtmltopdf-0.11.0_rc1 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-06T13:12:15.660

搜索了几个小时后发现了问题。**wkhtmltopdf**停止慢速脚本：

```
Loading pages (1/6)
Warning: A slow script was stopped                                
Counting pages (2/6)                                               
Resolving links (4/6)                                                       
Loading headers and footers (5/6)                                           
Printing pages (6/6) 
```

所以我需要使用标志`--no-stop-slow-scripts`：

```
$command = shell_exec("xvfb-run -a -s '-screen 0 640x480x16' wkhtmltopdf-i386 --no-stop-slow-scripts --dpi 300 --page-size A4 $page /tmp 
```

# sql-server - 将存储过程中的多个参数传递给 QueryString 参数

> ID：15837934
> 
> 赞同：1
> 
> 时间：2013-04-05T15:35:03.577
> 
> 标签：sql-server, stored-procedures, querystringparameter

如何将存储过程中的两个 SQL 参数传递给 WHERE 子句中的查询字符串？我遇到的问题在@iField 中。如果我删除它并用 InfoID LIKE '%' + @iSearch + '%' 替换，它可以工作，但我需要添加@iField。

`WHERE CustomerID = @CustomerID AND @iField LIKE '%' + @iSearch + '%'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:04:20.880

只要您已经使用程序

```
Declare @Query nvarchar(max)
Select @Query=
'
Select * from dbo.Invoice
WHERE CustomerID = '+Cast(@CustomerID as Varchar(20)) 
+' AND ['+ @iField +'] LIKE ''%' + @iSearch + '%''
'

--Print @Query
Exec(@Query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:56:44.267

T-SQL 不允许您用变量替换对象名称（虽然它会很方便，但不会）。真的有两个选择：

1) 使用动态 SQL 例如 sp_executesql ( [http://www.techrepublic.com/blog/datacenter/generate-dynamic-sql-statements-in-sql-server/306](http://www.techrepublic.com/blog/datacenter/generate-dynamic-sql-statements-in-sql-server/306) )

或者

2) 使用 IF...ELSE 例如

```
IF @iField = 'InfoId'
     SELECT ...
     WHERE CustomerID = @CustomerID AND InfoId LIKE '%' + @iSearch + '%'
ELSE IF @iField = '<some other field>'
     SELECT ...
     WHERE CustomerID = @CustomerID AND <some other field> LIKE '%' + @iSearch + '%'
etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:57:46.240

如果我理解正确，您只是想将`like`运算符限制为特定列？

```
declare @yourTable table (i int, FirstName varchar(10), LastName varchar(10))
insert into @yourTable
    select 1, 'john', 'doe' union all
    select 2, 'jane', 'doe';

declare @iField varchar(10),
        @iSearch varchar(10);

select  @iField = 'FirstName',
        @iSearch = 'j'

select  *
from    @yourTable
where   (@iField = 'FirstName' and FirstName like '%' + @iSearch + '%') or
        (@iField = 'LastName' and LastName like '%' + @iSearch + '%') 
```

# java - 根据布尔值对Java中的对象列表进行排序

> ID：15837943
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:35:17.447
> 
> 标签：java

我有这堂课：

```
public class Turn {

public boolean turnMoved;
public int moveSelectionX;
public int moveSelectionY;
public int moveTargetX;
public int moveTargetY;

public boolean turnFired;
public int shotSelectionX;
public int shotSelectionY;
public int shotTargetX;
public int shotTargetY;

//Set this to true when doing a turn if we fired before moving
//Else if we do move/shot in the wrong order, we might select an empty cell
boolean firedFirst = false;
} 
```

在我的程序的其他地方，我创建了这些对象的列表。列表完成后，我想按此顺序对列表进行排序，以便所有满足 1\. 的对象都位于列表的前面，依此类推：

1.  turnMoved && turnFired == true
2.  转身==真
3.  转身 == 真
4.  turnMoved && turnFired == false

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:38:06.300

让你的班级实现`Comparable<Turn>`，写一个`compareTo`反映你的偏好的，并用`Collections.sort`它来对列表进行排序。

# android - lambdaj ProxyUtil.createEnhancer 异常

> ID：15837949
> 
> 赞同：3
> 
> 时间：2013-04-05T15:35:36.190
> 
> 标签：android, lambdaj

在我的 android 应用程序中成功导入 lambdaj，但是任何过滤器、选择或组操作都会引发此问题：

```
04-05 16:46:42.555: E/AndroidRuntime(8482): java.lang.ExceptionInInitializerError 
04-05 16:46:42.555: E/AndroidRuntime(8482): at ch.lambdaj.proxy.ProxyUtil.createEnhancer(ProxyUtil.java:89) 
04-05 16:46:42.555: E/AndroidRuntime(8482): at ch.lambdaj.proxy.ProxyUtil.createProxy(ProxyUtil.java:49) 
04-05 16:46:42.555: E/AndroidRuntime(8482): at ch.lambdaj.function.argument.ArgumentsFactory.createPlaceholder(ArgumentsFactory‌​.java:68) 
```

一个简单的操作例如： `Group<Person> groupedPersons= group(people,by(on(Person.class).getAge()));`

# amazon-web-services - AWS EC2：为什么“.NET Beanstalk HostManager v1.0.1.1”不断回来

> ID：15837950
> 
> 赞同：0
> 
> 时间：2013-04-05T15:35:36.547
> 
> 标签：amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

我不断杀死默认实例，它不断回来。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:10:40.143

这个答案是基于你面临一个特定问题的假设，我已经看到几个用户绊倒了，但你的问题有点缺乏细节，所以我实际上可能会误解你的问题。

## 背景

[AWS Toolkit for Visual Studio](http://aws.amazon.com/visualstudio/)允许您将应用程序部署到[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)，这是一种[平台即服务 (PaaS)](http://en.wikipedia.org/wiki/Platform_as_a_service)产品，可让您*在 AWS 云中快速部署和管理应用程序*：

> 您只需上传您的应用程序，Elastic Beanstalk 就会自动处理容量配置、负载平衡、自动扩展和应用程序运行状况监控的部署细节。

您将应用程序部署到 Elastic Beanstalk 到由[Elastic Load Balancer](http://aws.amazon.com/elasticloadbalancing/)和相应的[环境](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts.components.html)组成的环境中。[Auto Scaling](http://aws.amazon.com/autoscaling/)策略共同确保您的应用程序将继续运行，即使 EC2 实例因任何原因无法为请求提供服务（有关这些组件如何协同工作的解释和说明，请参阅[架构概述）。](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts.concepts.architecture.html)

也就是说，您的[Amazon EC2](http://aws.amazon.com/ec2/)实例是默认管理的，因此您*不需要*自己管理基础设施，但这种 AWS PaaS 变体的具体特点是您仍然*可以*这样做：

> 同时，借助 Elastic Beanstalk，您可以完全控制为您的应用程序提供支持的 AWS 资源，并且可以随时访问底层资源。

现在，这正是您无意中通过 Elastic Beanstalk 服务之外的机制终止 EC2 实例所做的事情，负载均衡器检测到该机制，并在这些自动扩展策略的驱动下触发替换实例的创建。

## 解决方案

长话短说，您需要改为终止 Elastic Beanstalk 环境，如[AWS Elastic Beanstalk 演练](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/GettingStarted.Walkthrough.html)中的*第 6 步：清理部分所示（* [AWS 管理控制台](http://aws.amazon.com/console/#eb)中有专门的 Elastic Beanstalk 服务部分）。

[您也可以通过 Visual Studio 执行此操作，如如何使用 AWS Elastic Beanstalk 部署 PetBoard 应用程序](http://docs.aws.amazon.com/AWSToolkitVS/latest/UserGuide/deploy-the-petboard-application-using-aws-elastic-beanstalk.html)底部的步骤 11 中所述：

> 要删除部署，请在 AWS Explorer 中展开 Elastic Beanstalk 节点，然后右键单击部署的子节点。单击删除。AWS Elastic Beanstalk 将开始删除过程，这可能需要几分钟。如果您在部署中指定了通知电子邮件地址，AWS Elastic Beanstalk 会将删除过程的状态通知发送到该地址。

# matlab - MATLAB同时旋转和移动二维对象

> ID：15837958
> 
> 赞同：0
> 
> 时间：2013-04-05T15:36:09.837
> 
> 标签：matlab, animation

我使用以下代码制作了明星：

```
t = 0:4/5*pi:4*pi;
x = sin(t);
y = cos(t);
star = plot(x, y);
axis([-1 11 -1 11]) 
```

现在我需要同时旋转和移动这颗星星。我试过这个：

```
for i=1:0.1:10;
    zAxis = [0 0 1];
    center = [0 0 0];
    rotate(star, zAxis, 5, center);
    x = x+0.1;
    y = y+0.1;
    set(star, 'x', x, 'y', y);
    pause(0.1);
end 
```

但是这段代码只移动星形而不旋转它。如果我删除“设置”命令，那么它会旋转。我怎样才能结合这两个动作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:02:17.767

这可以做的工作..

```
t = 0:4/5*pi:4*pi;
x = sin(t);
y = cos(t) ;
y = y-mean(y);
x = x-mean(x);  % # barycentric coordinates

% # rotation and translation 
trasl = @(dx,dy) [dy; dx];  % # this vector will be rigidly added to each point of the system
rot = @(theta)  [cos(theta) -sin(theta); sin(theta) cos(theta)];  % # this will provide rotation of angle theta

for i = 1:50
    % # application of the roto-translation
    % # a diagonal translation of x = i*.1 , y = i*.1 is added to the star
    % # once a rotation of angle i*pi/50 is performed
    x_t = bsxfun(@plus,rot(i*pi/50)*([x;y]), trasl(i*.1,i*.1) );  

    star = plot(x_t(1,:), x_t(2,:));
    axis([-1 11 -1 11])
    pause(.1)

end 
```

* * *

原则上，[**齐次坐标**](http://en.wikipedia.org/wiki/Homogeneous_coordinates)（在这种情况下是*2D 投影空间*）允许人们以更简洁的方式完成相同的工作；事实上，他们只允许使用一个线性算子（3x3 矩阵）。

齐次坐标版本：

```
Op = @(theta,dx,dy) [ rot(theta) , trasl(dx,dy) ; 0 0 1];

for i = 1:50
   x_t = Op(i*pi/50,i*.1,i*.1)*[x;y;ones(size(x))];

    star = plot(x_t(1,:), x_t(2,:));
    axis([-1 11 -1 11])
    pause(.1)    
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:43:29.150

您可以只使用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)来计算向量的正确变换`[x; y]`：

```
theta = 5 * (pi / 180); % 5 deg in radians
Arot = [cos(theta) -sin(theta); sin(theta) cos(theta)];
xyRot = Arot * [x; y]; % rotates the points by theta
xyTrans = xyRot + 0.1; % translates all points by 0.1
set(star, 'x', xyTrans(1, :), 'y', xyTrans(2, :)); 
```

# vbscript - 启动程序后关闭 cmd

> ID：15837961
> 
> 赞同：0
> 
> 时间：2013-04-05T15:36:13.620
> 
> 标签：vbscript, batch-file, cmd

如何使用`bat`文件/ `vbs`-File 运行以下代码并关闭控制台而不是启动它？

```
cmd /c call %USERPROFILE%\myProgrammDir\jdk1.7.0_10\bin\java.exe -jar %USERPROFILE%\myProgrammDir\myProgramm.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:38:19.957

我会尝试更改`call`为`start`.

像这样：

```
cmd /c start %USERPROFILE%\myProgrammDir\jdk1.7.0_10\bin\java.exe -jar %USERPROFILE%\myProgrammDir\myProgramm.jar 
```

# javascript - 不是作为 jQuery Deferred 执行的异步函数

> ID：15837964
> 
> 赞同：12
> 
> 时间：2013-04-05T15:36:22.550
> 
> 标签：javascript, jquery, jquery-deferred, deferred

假设我想以同步方式处理一些任务，所以我有这个功能：

```
function executePromiseQueueSync(queue){
    var seed = $.Deferred(),
        finalPromise;

    finalPromise = _.reduce(queue, function(memo, promise){
        return memo.then(function(){
            return promise.funct.apply(null, promise.argmnt);
        });
    }, seed.promise());

    seed.resolve();
    return finalPromise;
} 
```

现在我可以用它来处理一些文件：

```
_.each(fileList, function(element, index, list){
    _.each(element, function(el, idx, lst){
        promisesQueue.push({funct: processFile, argmnt:[el, index + (len - fileList.length) ,len]});
    });
}); 
```

执行它并指示进度：

```
executePromiseQueueSync(promisesQueue).then(function(){
   ....
}, function(){
    ....
}).progress(function(msg, progress, name, index, status, desc){
        console.log('progress');
}); 
```

进程函数本身如下所示：

```
function processFile(file, index, size)
{
    var dfd = new jQuery.Deferred();
    if (file.name.match('(.*)\\.jpg'))
        ...
    else if
        ...
    else
       $.when(processWrongFileType(file)).then(function(){
         dfd.notify(...);
         dfd.resolve();
      });

    return dfd.promise();
} 
```

如您所见，当文件类型错误时，无事可做：

所以有时我想像 Promise 一样执行同步代码：

```
function processWrongFileType(){
    var dfd = new jQuery.Deferred();
    dfd.resolve();
    console.log("blah");
    return dfd.promise();
} 
```

问题是如果 processWrongFileType 将被执行，notify 将不起作用。如果我将 processWrongFileType 更改为如下所示：

```
function processWrongFileType()
{
    var dfd = new jQuery.Deferred();
    setTimeout(function(){dfd.resolve();},1);
    return dfd.promise();
} 
```

notify() 将起作用。有什么方法可以避免 setTimeout 并且仍然让 notify() 处理进度事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T18:33:47.440

你不需要做任何特别的事情来使用同步代码作为承诺。

只是返回值 `==true`

```
$.when((function() {
    return prompt('really?')
})()).then((function() { 
    return alert('yeah') 
})()).done((function () { 
    alert('done') 
})()) 
```

# google-app-engine - 删除时谷歌云端点 HTTP 500 错误

> ID：15837965
> 
> 赞同：1
> 
> 时间：2013-04-05T15:36:22.710
> 
> 标签：google-app-engine, internal-server-error, google-cloud-endpoints

删除时谷歌云端点 HTTP 500 错误

我生成了一个 Google Cloud Endpoint 类，它让我使用标准 CRUD 方法，包括删除方法：

```
public Member removeMember(@Named("id") Long id) {
    PersistenceManager mgr = getPersistenceManager();
    Member member = null;
    try {
        member = mgr.getObjectById(Member.class, id);
        mgr.deletePersistent(member);
    } finally {
        mgr.close();
    }
    return member;
} 
```

但是，当我调用 DELETE 时，会返回 HTTP 500 错误：

```
HTTP ERROR 500

Problem accessing /_ah/spi/Members.removeMember. Reason:

com.google.appengine.repackaged.org.codehaus.jackson.map.JsonMappingException: Cannot read fields from a deleted object (through reference chain: com.mylodge.contracts.masonry.Member[\"degree\"]) 
```

如何避免此 HTTP 500 错误？

旁白：对我来说，无论如何返回已删除的对象似乎是不合逻辑的。HTTP 200 OK 不是更合适吗？

**更新：**我尝试返回 null，并尝试将方法设为 VOID。但是这两个都会产生一个 HTTP 响应

```
500 No content to map to Object due to end of input 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:17:16.937

如果您不想要该对象，请不要返回它。这是这里最简单的解决方案。我将建议 Google Plugin for Eclipse 团队将模板更改为默认情况下*不*返回已删除的对象。

如果您确实想要删除的对象，我认为您遇到了 JDO 的延迟加载。您的属性`degree`正在序列化时加载。但是，由于底层数据存储对象已被删除，因此无法访问它。您需要在属性被删除之前显式访问它。

# python - 实际测试我构建的应用程序（Flask，Python）

> ID：15837967
> 
> 赞同：3
> 
> 时间：2013-04-05T15:36:29.113
> 
> 标签：python, unit-testing, testing, flask

如果我构建了一个应用程序，测试实际应用程序的协议是什么？

我只是了解测试，以及对您构建外壳应用程序然后测试您的扩展的扩展的测试对我来说是有意义的，但如果我想测试我正在构建的实际应用程序的一部分，则不是。

我想知道是否有人对他们如何打包和测试烧瓶应用程序有任何指示、指南或想法。到目前为止，我所尝试的（将应用程序导入测试并开始为其构建测试）既不愉快又不成功。我现在知道我需要 X、Y、Z 的应用程序，并且我可以通过构建一个确保 X、Y、Z 发生的测试来节省很多未来的时间。然而，构建一个单独的测试应用程序会耗费大量时间并且看起来效率低下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:59:20.187

有很多方法可以测试您的应用程序。

[Flask 的文档](http://flask.pocoo.org/docs/testing/)提供了有关如何初始化您的应用程序并向其发出请求的信息：

```
import flaskr

class FlaskrTestCase(unittest.TestCase):

    def setUp(self):
        self.db_fd, flaskr.app.config['DATABASE'] = tempfile.mkstemp()
        self.app = flaskr.app.test_client()
        flaskr.init_db()

    def tearDown(self):
        os.close(self.db_fd)
        os.unlink(flaskr.DATABASE)

    def test_empty_db(self):
        rv = self.app.get('/')
        assert 'No entries here so far' in rv.data 
```

这允许您使用他们的`test_client`. 您可以请求应用程序中的每条路由，并断言它正在返回您期望的数据。

您也可以编写测试来测试特定功能，只需导入功能并相应地进行测试。

您根本不必编写“单独的测试应用程序”。然而，你可能不得不做一些事情，比如加载测试数据、模拟对象/类，这些都不是很简单，但是有很多博客文章/python 工具可以帮助你做到这些

我建议首先阅读烧瓶测试文档，它们提供了很好的概述。

此外，提供详细信息对您非常有帮助。

> 到目前为止我所尝试的（将应用程序导入测试并开始为其构建测试）既不愉快又不成功

是不是很有建设性。执行测试时是否遇到错误？如果是这样，您可以发布它们。怎么不成功？你不知道要测试哪些部分？您在执行测试时遇到问题吗？加载数据中？测试响应？错误？

# google-maps - 谷歌地图在点击时添加单个标记不起作用

> ID：15837972
> 
> 赞同：0
> 
> 时间：2013-04-05T15:36:46.387
> 
> 标签：google-maps, google-maps-markers

我在stackoverflow中进行了谷歌搜索和深入搜索，但没有任何结果。

我有以下代码：

```
<script type="text/javascript">

    function initialize() {
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 7,
            center: new google.maps.LatLng(45.47554, 9.204712),
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            disableDefaultUI: true,
            zoomControl: true
        });

    }
    google.maps.event.addDomListener(window, 'load', initialize);

    google.maps.event.addListener(map, "click", function (event) {
        alert("click");
    });

</script> 
```

当我点击地图时，我没有警报。请问我哪里错了？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:18:00.820

您提到`no way to add a marker`，在这种情况下，要在地图中添加标记，您可以使用以下代码

```
function initialize() {
    var map = new google.maps.Map(document.getElementById('map'), {
        // options
    });

    // Add a marker at center/current latlng
    var marker = new google.maps.Marker({
        position: map.getCenter(),
        map: map,
        title: 'Some Title'
    });

    // To add a click event on the marker you can use
    google.maps.event.addListener(marker, 'click', function() {
        // ...
    });
} 
```

[阅读更多。](https://developers.google.com/maps/documentation/javascript/events)

# javascript - 链接到外部 Javascript 文件时定位 RSS 提要

> ID：15837977
> 
> 赞同：0
> 
> 时间：2013-04-05T15:36:55.227
> 
> 标签：javascript, html, css

我有一个链接到我的 html 文件的外部 Javascript 文件。在我尝试使用外部 Javascript 文件之前，定位工作正常。当我在头部链接时，RSS 提要会转到我的页面顶部。我可以将链接放在我的 html 文件中的任何位置，还是必须放在头部。我希望 RSS 提要位于“新闻提要”ID 下。我还为我的页面遗漏了一些信息，因为我只需要显示 div 和 css。

这是我的html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>GamerZone</title>
    <link type="text/css" rel="stylesheet" href="index.css" />
    <link rel="shortcut icon" type="icon/ico" href="images/icon.ico" />
    <script type="text/javascript" src="rss-feed.js"></script>  
</head>
<body>
    <div id="allcontent">
        <div id="banner">
            <a target="_self" href="index.html" title="">
            <img src="images/banner.jpg" border="0" alt="GamerZone Banner">
            </a>
        </div>
        <div class="container">
            <ul class="nav">
                <li class="nav-home">
                <a href="index.html">Home</a>
                </li>
                <li class="nav-games"> 
                <a href="games.html">Games</a>
                </li>
                <li class="nav-chat">
                <a href="chat.html">Chat</a>
                </li>
                <li class="nav-suggestions">
                <a href="suggestions.html">Suggestions</a>
                </li>
            </ul>
        </div>
        <div id="newsfeed">
            //RSS feed goes here
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

这是我的CSS代码：

```
#allcontent {
    width: 1000px;
    padding-top: 5px;
    padding-bottom: 5px;
    background-color: ;
    margin-left: auto;
    margin-right: auto;
}

#poll {
    background-color: white;
    float: left;
    padding: 0px 5px 5px 5px;
    margin: 15px 10px 10px 22px;
    font-family: Tahoma;
}

#newsfeed {
    padding: 15px;
    margin: 0px 10px 10px 10px;
} 
```

这是我的 Javascript 代码：

```
<!-- 
rssfeed_url = new Array();   
rssfeed_url[0]="http://news.yahoo.com/rss/gaming";
rssfeed_frame_width="500"; 
rssfeed_frame_height="720"; 
rssfeed_scroll="on"; 
rssfeed_scroll_step="6"; 
rssfeed_scroll_bar="on"; 
rssfeed_target="_blank"; 
rssfeed_font_size="14"; 
rssfeed_font_face=""; 
rssfeed_border="on";
rssfeed_css_url="http://example.com/newsfeed.css";
rssfeed_title="on"; 
rssfeed_title_name=""; 
rssfeed_title_bgcolor="#3366ff"; 
rssfeed_title_color="#fff"; 
rssfeed_title_bgimage="http://"; 
rssfeed_footer="off"; 
rssfeed_footer_name="rss feed"; 
rssfeed_footer_bgcolor="#fff"; 
rssfeed_footer_color="#333"; 
rssfeed_footer_bgimage="http://"; 
rssfeed_item_title_length="50"; 
rssfeed_item_title_color="#666"; 
rssfeed_item_bgcolor="#fff"; 
rssfeed_item_bgimage="http://"; 
rssfeed_item_border_bottom="on"; 
rssfeed_item_source_icon="off"; 
rssfeed_item_date="off"; 
rssfeed_item_description="on"; 
rssfeed_item_description_length="120"; 
rssfeed_item_description_color="#666"; 
rssfeed_item_description_link_color="#333"; 
rssfeed_item_description_tag="off"; 
rssfeed_no_items="0"; 
rssfeed_cache = "7872565d53aadc6c14b4ab1bb3f79bdb"; 
//--> 

(function(){
var a=window;
var b="";
for(i=0;i<a.rssfeed_url.length;i++) {
    b=b+"rssfeed[url]["+i+"]="+encodeURIComponent(a.rssfeed_url[i])+"&"
}
var c="http://feed.surfing-waves.com/php/rssfeed.php"+"?"+b+"rssfeed[type]="+(a.rssfeed_type?a.rssfeed_type:"")+"&rssfeed[frame_width]="+a.rssfeed_frame_width+"&rssfeed[frame_height]="+a.rssfeed_frame_height+"&rssfeed[scroll]="+(a.rssfeed_scroll?a.rssfeed_scroll:"")+"&rssfeed[scroll_step]="+(a.rssfeed_scroll_step?a.rssfeed_scroll_step:"")+"&rssfeed[scroll_bar]="+(a.rssfeed_scroll_bar?a.rssfeed_scroll_bar:"")+"&rssfeed[target]="+(a.rssfeed_target?a.rssfeed_target:"")+"&rssfeed[font_size]="+(a.rssfeed_font_size?a.rssfeed_font_size:"")+"&rssfeed[font_face]="+(a.rssfeed_font_face?a.rssfeed_font_face:"")+"&rssfeed[border]="+(a.rssfeed_border?a.rssfeed_border:"")+"&rssfeed[css_url]="+(a.rssfeed_css_url?encodeURIComponent(a.rssfeed_css_url):"")+"&rssfeed[title]="+(a.rssfeed_title?a.rssfeed_title:"")+"&rssfeed[title_name]="+(a.rssfeed_title_name?a.rssfeed_title_name:"")+"&rssfeed[title_bgcolor]="+(a.rssfeed_title_bgcolor?encodeURIComponent(a.rssfeed_title_bgcolor):"")+"&rssfeed[title_color]="+(a.rssfeed_title_color?encodeURIComponent(a.rssfeed_title_color):"")+"&rssfeed[title_bgimage]="+(a.rssfeed_title_bgimage?encodeURIComponent(a.rssfeed_title_bgimage):"")+"&rssfeed[footer]="+(a.rssfeed_footer?a.rssfeed_footer:"")+"&rssfeed[footer_name]="+(a.rssfeed_footer_name?a.rssfeed_footer_name:"")+"&rssfeed[footer_bgcolor]="+(a.rssfeed_footer_bgcolor?encodeURIComponent(a.rssfeed_footer_bgcolor):"")+"&rssfeed[footer_color]="+(a.rssfeed_footer_color?encodeURIComponent(a.rssfeed_footer_color):"")+"&rssfeed[footer_bgimage]="+(a.rssfeed_footer_bgimage?encodeURIComponent(a.rssfeed_footer_bgimage):"")+"&rssfeed[item_bgcolor]="+(a.rssfeed_item_bgcolor?encodeURIComponent(a.rssfeed_item_bgcolor):"")+"&rssfeed[item_bgimage]="+(a.rssfeed_item_bgimage?encodeURIComponent(a.rssfeed_item_bgimage):"")+"&rssfeed[item_title_length]="+(a.rssfeed_item_title_length?a.rssfeed_item_title_length:"")+"&rssfeed[item_title_color]="+(a.rssfeed_item_title_color?encodeURIComponent(a.rssfeed_item_title_color):"")+"&rssfeed[item_border_bottom]="+(a.rssfeed_item_border_bottom?a.rssfeed_item_border_bottom:"")+"&rssfeed[item_source_icon]="+(a.rssfeed_item_source_icon?a.rssfeed_item_source_icon:"")+"&rssfeed[item_date]="+(a.rssfeed_item_date?a.rssfeed_item_date:"")+"&rssfeed[item_description]="+(a.rssfeed_item_description?a.rssfeed_item_description:"")+"&rssfeed[item_description_length]="+(a.rssfeed_item_description_length?a.rssfeed_item_description_length:"")+"&rssfeed[item_description_color]="+(a.rssfeed_item_description_color?encodeURIComponent(a.rssfeed_item_description_color):"")+"&rssfeed[item_description_link_color]="+(a.rssfeed_item_description_link_color?encodeURIComponent(a.rssfeed_item_description_link_color):"")+"&rssfeed[item_description_tag]="+(a.rssfeed_item_description_tag?a.rssfeed_item_description_tag:"")+"&rssfeed[no_items]="+(a.rssfeed_no_items?a.rssfeed_no_items:"")+"&rssfeed[cache]="+(a.rssfeed_cache?a.rssfeed_cache:"");
if(a.rssfeed_border!="off"&&!a.rssfeed_css_url){}
document.write('<iframe name="rssfeed_frame" width="'+a.rssfeed_frame_width+'" height="'+a.rssfeed_frame_height+'" frameborder="0" src="'+c+'" marginwidth="0" marginheight="0" vspace="0" hspace="0" scrolling="no" ALLOWTRANSPARENCY="true"></iframe>')
})() 
```

如果需要任何其他信息，请在拒绝我的问题之前询问。另外，为了将来参考，有没有一种方法可以正确格式化所有内容而无需点击空间一百万次？如果这算作一个额外的问题并且不允许，则忽略。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:01:47.950

您的脚本使用`document.write`，因此您应该将`script`指向 RSS JavaScript 的`<div id="newsfeed">`. 该脚本正在生成一个`IFRAME`，我假设 surfing-waves.com 正在转换为 HTML，因此将其放入`HEAD`将写入`IFRAME`中`HEAD`，您绝对应该避免这种情况。因此，`<script type="text/javascript" src="rss-feed.js"></script>`从 中删除`HEAD`并将其移动到`<div id="newsfeed">`如下所示：

```
<div id="newsfeed">
    <script type="text/javascript" src="rss-feed.js"></script>
</div> 
```

如果您想将 RSS 提要关联为该页面的替代形式，那么您可以使用该`LINK`元素来引用它，但这不适用于此处。在这种情况下，您只想在页面中显示这些项目。

# node.js - 使用本机驱动程序链接两个文档

> ID：15837979
> 
> 赞同：0
> 
> 时间：2013-04-05T15:36:56.570
> 
> 标签：node.js, mongodb

我的数据库中有两个不同的集合，此时我需要使用本机 NodeJs 驱动程序将文档从第一个集合链接到文档形式的第二个集合。

我怎样才能做到这一点？我应该`_id`在第二个集合中保留第一个集合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:52:04.340

是的，我建议`_id`按照您的描述手动存储相关文档的。我已经做了很多，而且效果很好。

更复杂的（在您描述的情况下似乎没有必要）是使用[DBRef](http://docs.mongodb.org/manual/reference/database-references/)。

# python - 防止发生“异常”时使用 Python 关闭命令提示符

> ID：15837980
> 
> 赞同：0
> 
> 时间：2013-04-05T15:37:00.523
> 
> 标签：python, exception-handling, coding-style

我有一个用 py2exe 转换为可执行文件的 Python 2.7 脚本。INPUT 数据是一个文本文件，其中分隔符需要在此函数之后有效：

```
# Check if delimeter is valid
def get_parse(filename, delimiters=['\t', ',', ' ', ':', ';', '-']):
    with open(filename) as f:
        f.next()
        secondline = f.next()
    for delimiter in delimiters:
        if len(secondline.rstrip().split(delimiter)) >= 3:
            return delimiter
    raise Exception("couldn't find a delimiter that worked!") 
```

当分隔符无效时（例如：一个点），我正在以 Python 优雅的方式寻找两种解决方案：

*   在未加载正确的 INPUT 数据之前，您不能将其传递给 OUTFILE

或者

*   脚本破坏了代码，显示错误，但窗口（什么时候是 *.exe）没有立即关闭，让用户没有解释

* * *

```
INPUT = raw_input("Input (*.txt): ")
while not os.path.exists(INPUT):
      print IOError("No such file or directory: %s" % INPUT)
      INPUT = raw_input("Input (*.txt): ")
try:
    parse = get_parse(INPUT)
except Exception:
    print ValueError("Delimiter type not valid")
    break
OUTPUT = raw_input("Output (*.txt): ") 
```

使用此解决方案（中断）我的 *.exe 文件的窗口关闭，使用户没有解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:12:19.617

您可以使用 钩住未捕获异常的异常处理程序，并按照[此答案](https://stackoverflow.com/a/1000968/786020)[`sys.excepthook`](http://docs.python.org/library/sys.html#sys.excepthook)调用[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)（或在 3.x 中） 。[`input()`](http://docs.python.org/3/library/functions.html#input)

举个简单的例子：

```
import sys
def wait_on_uncaught_exception(type, value, traceback):
    print 'My Error Information'
    print 'Type:', type
    print 'Value:', value
    print 'Traceback:', traceback
    raw_input("Press any key to exit...")
sys.excepthook=wait_on_uncaught_exception 
```

只需修改它以获得任何输出或任何你想要的（我建议查看[`traceback`](http://docs.python.org/2/library/traceback.html)模块）。

但是，如果您希望它更具体到您的代码，那么只需放入`raw_input("Press any key to exit...")`您已有的解决方案，它应该没问题。以上应该提供更通用的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:29:07.940

您实际上并不是在搜索分隔符，而只是在搜索字符串中的一个字符。你真的应该为此使用 CSV 模块。

```
from __future__ import print_function

delimiters=['\t', ',', ' ', ':', ';', '-']

def getfile():
    fname =""
    while fname is "":
            fname = str.lower(raw_input("Input(*.txt): "))
            while fname.endswith(".txt") is not True:
                    print ("File must be .txt")
                    fname = str.lower(raw_input("Input(*.txt): "))
            if fname.endswith(".txt"):
                try:
                    with open(fname,'rb') as f:
                        parsed = False
                        while not parsed:
                            data = f.readline()
                            for d in delimiters:
                                if d in data:
                                    print ("Delimiter: {0} found".format(d))
                                    parsed = True
                                    # do your additional stuff here
                                else:
                                    print ("Unable to find delimiter {0}".format(d))
                                    parsed = True
                except IOError as e:
                    print( "Error: ", e)

getfile() 
```

# xcode - 从数组中设置标签文本，为什么这不起作用？

> ID：15837981
> 
> 赞同：0
> 
> 时间：2013-04-05T15:37:01.047
> 
> 标签：xcode, arrays, object, uilabel

我有以下代码不起作用，有人可以告诉我为什么吗？

如果我将 label1.text = @"XX" 放入循环中，则会填充，因此显然与将这些对象添加到数组中有关。我可以这样做吗？

```
NSMutableArray *labels = [[NSMutableArray alloc] initWithObjects:label0.text,label1.text,label2.text,label3.text,label4.text,nil];
   for(int i=0; i<labelStrings.count;i++) {
       labels[i] = @"XX";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:43:45.273

当您调用`initWithObjects`fetch 时，假设`label0.text`. 那只是一个字符串值，标签的文本此时的值。它不是用于设置标签文本或类似内容的魔术指针。

然后，当您设置时，`labels[i]`您只需用不同的字符串替换可变数组中的一个字符串。

做你想做的事情的方法是制作一个*标签*数组，然后为数组的每个项目设置其`text`属性。

像这样的东西（直接输入，没试过，所以要小心，这段代码可能有错误）：

```
NSArray *labels = @[label0, label1, label2, label3, label4];
for(int i=0; i<labels.count; i++) {
   [(UILabel*)(labels[i]) setText: @"XX"];
} 
```

# c# - 如何按日期时间对字典进行分组并对 int 进行求和

> ID：15837982
> 
> 赞同：4
> 
> 时间：2013-04-05T15:37:01.557
> 
> 标签：c#, linq, lambda, group-by, aggregate-functions

我有这个代码：

```
 var tradeReqsBySegment = segGroups.Join(pPeriods, s => s.MarketSegmentId, p => p.EntityId, (s, p) => new
    {
        SegmentCode = s.SegmentCode, // string
        Time = p.StartLocal, // datetime
        TradeRequirement = p.Volume // double
    })
    .GroupBy(s => s.SegmentCode)
    .ToDictionary(g => g.Key, g => g.ToDictionary(i => i.Time, i=>i.TradeRequirement)); 
```

我希望`g.ToDictionary(i => i.Time, i=>i.TradeRequirement))`按时间分组，并`TradeRequirement`总结或平均。我该如何处理？

此外，是否可以按月对时间进行分组，例如 get ：

```
Time - TradeReq
01/2013 - 500
02/2013 - 234
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:18:42.533

您可以同时获得：`Sum`并且`Average`同时使用匿名类型：

```
var tradeReqsBySegment = segGroups.Join(pPeriods, s => s.MarketSegmentId, p => p.EntityId, (s, p) => new
{
    SegmentCode = s.SegmentCode, // string
    Time = p.StartLocal, // datetime
    TradeRequirement = p.Volume // double
})
.GroupBy(s => s.SegmentCode)
.ToDictionary(g => g.Key,
              g => g.GroupBy(gr => new DateTime(gr.Time.Year, gr.Time.Month, 1))
                    .ToDictionary(gr => gr.Key.ToString("MM/yyyy"),
                                  gr => new {
                                      Sum = gr.Sum(s => s.TradeRequirement),
                                      Avg = gr.Average(s => s.TradeRequirement)
                                  })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:08:20.073

```
g.GroupBy(gr => new DateTime(gr.Time.Year, gr.Time.Month, 1))
         .ToDictionary(i => i.Key, i => i.Sum(s => s.TradeRequirement)); 
```

# apache - Solr 文件索引按页面的地图内容

> ID：15837987
> 
> 赞同：0
> 
> 时间：2013-04-05T15:37:27.570
> 
> 标签：apache, pdf, solr, multivalue

我想在 Solr 中索引文件。我已经用 PHP 制作了一个“输出脚本”，但是我的项目负责人给了我显示找到的文本的页码的任务。

所以： - 我正在寻找“Foo”这个词。- Solr 返回结果以及突出显示的文本。- 现在我想知道这个突出显示的文本在哪个页面上，以便找到它。

这些文件是 *.pdf 文件。

我想到的一种解决方案是在不同字段中导入 PDF 文件的文本？或者也许在这个名为“内容”的多值字段中。

也许是这样的：

```
Json:
    content:
        1: "page one text",
        2: "page two text" 
```

等等？

这可能吗？或者有没有更好的方法来找到这些信息？谢谢你的帮助！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:45:58.600

您需要为每个 PDF 文件的每一页创建一个单独的 Solr 文档。如果您希望每个文件只返回一个结果，则可以使用[FieldCollapsing](http://wiki.apache.org/solr/FieldCollapsing)将来自同一 PDF 文件的所有结果分组。

# xml - 为 iTunes RSS 提要读取 XML

> ID：15837988
> 
> 赞同：1
> 
> 时间：2013-04-05T15:37:28.963
> 
> 标签：xml, vb.net, xml-parsing, rss, xmlnode

嘿，我正在阅读我的 XML RSS 提要，如下所示：

```
Dim rssSubNode As XmlNode = rssNode.SelectSingleNode("title")
Dim title As String = If(rssSubNode IsNot Nothing, rssSubNode.InnerText, "")

rssSubNode = rssNode.SelectSingleNode("itunes:author")
Dim author As String = If(rssSubNode IsNot Nothing, rssSubNode.InnerText, "") 
```

标题检索得很好**。**但是，当它尝试获取作者时，会出现以下错误：

```
Value of type 'System.Xml.XmlNodeList' cannot be converted to 'System.Xml.XmlNode'. 
```

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" version="2.0">
  <channel>
      <item>
         <title>First Chaper</title>
         <itunes:author>My Name Here</itunes:author>
         <itunes:subtitle>First Chapter: The blah blah.</itunes:subtitle>
         etc etc.... 
```

为了获得该价值，我需要添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:29:05.047

问题是 SelectSingleNode 采用 XPath 而不仅仅是节点名称。因此，当您将带有冒号的内容放在那里时，它假定您正在谈论一个未提供给它的名称空间，因此它会引发该异常。

那么简单的答案是将您的代码更改为：

```
rssSubNode = rssNode.SelectSingleNode("//*[name()='itunes:author']") 
```

这有效地允许您忽略特殊字符。如果您想正确使用命名空间，那么我建议您查看[XmlNamespaceManager](http://msdn.microsoft.com/en-us/library/ske01k15.aspx)。

# c++ - Winapi 单选按钮行为

> ID：15837994
> 
> 赞同：0
> 
> 时间：2013-04-05T15:37:46.247
> 
> 标签：c++, winapi, mfc, atl, wtl

我在 WTL 中创建了一个自定义图像绘制复选框，现在我正在尝试创建一个自定义图像绘制单选按钮，单选按钮如何工作，当用户单击一个按钮以选择它时，其他按钮如何被取消选择？他们是否收到预定义的窗口消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:12:16.303

阅读有关 WS_GROUP、WS_TABSTOP 的信息

# iis - 在服务器上启用 Windows 身份验证时收到 Windows 身份验证提示

> ID：15837998
> 
> 赞同：1
> 
> 时间：2013-04-05T15:37:58.127
> 
> 标签：iis, internet-explorer-9

这是我尝试过的：

1.  在 IIS 7.5 上配置 Windows 身份验证。
2.  禁用匿名身份验证。
3.  进行 IE 设置（添加到受信任的站点，选择使用自动身份验证）。
4.  使用 NTLM 提供程序。
5.  将服务器 UAC 调低。
6.  将站点添加到所有区域并经过验证。

配置没有问题，因为它可以从客户端工作。现在问题来了：

登录网页有效，但如果我关闭并重新打开网页，我会收到 Windows 身份验证对话框。这些只是一种随机行为，每次我关闭并重新打开 IE 时都会发生。

此问题仅在 Windows 2008 Server R2 上出现。访问服务器表单客户端工作正常，没有观察到问题。

应用程序使用 java。

# jquery - 删除 iframe 中的 pastehtml 页脚

> ID：15837999
> 
> 赞同：0
> 
> 时间：2013-04-05T15:37:59.323
> 
> 标签：jquery, html, css, iframe, footer

我制作了一个 jQuery 幻灯片，将它插入我的网站（Jimdo 平台）的唯一方法是通过 iframe。问题是，如果我从 pastehtml.com 对其进行 iframe，我会在我的 jQuery 幻灯片上获得它们的页脚，并且即使使用`scrolling=no`.

是否有某种方式可以仅显示 jQuery 内容或修剪该页脚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:44:57.517

简短的回答是，你不能。由于现代浏览器出于安全原因包含的跨站点脚本限制，如果 iframe 从同一站点（或具有crossdomain.xml 允许它，但几乎可以肯定这里不是这种情况）。

想到的解决方法是在您自己的网站上托管幻灯片，或者从您网站上的代理中弹出幻灯片 - 我推荐前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:44:49.410

在 iframe 周围创建一个 div，将他的宽度/高度设置为幻灯片的宽度/高度。将 iframe 的宽度和高度设置为大于 div。然后将溢出设置为隐藏到div。

IE：

```
slideshow inside pastehtml width/height: 500/200;

iframe width/height: 700/300;
div width/height: 500/200;
div overflow: hidden; 
```

如果您要隐藏其他元素，请绝对定位 iframe 并将其移动以仅显示幻灯片。