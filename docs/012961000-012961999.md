# StackOverflow 问答 12961000-12961999

# objective-c - 使用 NSURLCredential 绕过自签名证书，同时传入用户名和密码

> ID：12961001
> 
> 赞同：0
> 
> 时间：2012-10-18T18:11:07.790
> 
> 标签：objective-c, ipad, uiwebview, nsurlconnection, nsurlcredential

```
 NSURLCredential *credential2 = [NSURLCredential
                  credentialForTrust:challenge.protectionSpace.serverTrust
                  credentialWithUser: @"username"
                                            password: @"password"
                                         persistence:NSURLCredentialPersistenceNone];

    [challenge.sender useCredential:credential2 forAuthenticationChallenge:challenge]; 
```

我需要绕过带有 UIWebView 的自签名证书，同时还能够传入用户名和密码进行身份验证。

```
 NSURLCredential *credential = [NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust]; 
```

和

> NSURLCredential *credential = [NSURLCredential credentialWithUser:@"username" 密码:@"password" persistence:NSURLCredentialPersistenceNone];

两者都是单独有效的，当我尝试将它们结合起来时，它们都会大惊小怪......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:30:53.370

使用 RestKit 和下面的代码以及用于登录凭据的 alertView 来解决此问题。

```
- (id)initWithURL:(NSURL*)pageURL {

    _retainedURL = pageURL;
    [_retainedURL retain];

    RKClient *client;
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    client = [RKClient clientWithBaseURL: pageURL];
    client.username=[userDefaults objectForKey:@"UserName"];
    client.password=[userDefaults objectForKey:@"Password"];
    client.authenticationType=RKRequestAuthenticationTypeHTTPBasic;
    client.disableCertificateValidation= TRUE;
    RKRequest *request=[RKRequest requestWithURL:pageURL delegate:self];
    [client configureRequest:request];
    request.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
    request.disableCertificateValidation = TRUE;
    self.authenticatedRequest = request;
    [request sendAsynchronously];

    if(self = [super init]) {
        self.URL = pageURL;
        self.availableActions = SVWebViewControllerAvailableActionsOpenInSafari | SVWebViewControllerAvailableActionsMailLink | SVWebViewControllerAvailableActionsCopyLink;
    }
    return self;
} 
```

登录 alertView 将用户名和密码的文本添加到 userdefaults 并将保留的 URL 传递回 initWithURL 函数。当页面未通过身份验证（使用登录凭据）时，将调用登录警报视图。

# java - 存储每个用户的网格状态并存储服务器端 - EXT GWT

> ID：12961004
> 
> 赞同：0
> 
> 时间：2012-10-18T18:11:10.447
> 
> 标签：java, gwt, extjs, gxt

因此，我一直在寻找有关如何在我的服务器上存储 EXT 分页网格状态的互联网，以便当用户重新登录到他们的网格时，这就是他们保存它的方式。

我发现了这个[http://www.sencha.com/forum/showthread.php?64688-How-can-i-save-Grid-state-using-GXT](http://www.sencha.com/forum/showthread.php?64688-How-can-i-save-Grid-state-using-GXT)但它是一个古老而死的线程。

我现在拥有的是：

grid.getState() 返回所有 col 大小、排序和隐藏字段的映射。

这是一个转储到字符串的示例：

{offset=0, limit=25, widthfieldname1=161, widthfield2=110, hiddenfield3=true }

我可以将这些键/值存储在一个带有字段（用户名、键、值）的简单表中，然后重新创建此映射并将其传递给前端。

所以这是我的问题：

有没有人有完整实现 GXT 2.4 的存储、检索和应用网格状态的代码示例？

如果不。我将如何实施一个？我相信我可以将状态图存储在数据库或 XML 中。我不知道如何将其应用于新会话。如何将此状态图应用于新网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:55:28.050

**状态管理**已经内置在许多组件中，也内置在网格中。`com.extjs.gxt.ui.client.state.CookieProvider`默认的GXT实现使用 Cookies（看看

```
grid.setStateful(true);
grid.setStateId("myGridUniqueId"); 
```

如果需要**其他**存储，则需要扩展`com.extjs.gxt.ui.client.state.Provider`，实现存储/加载逻辑，然后将其传递给`com.extjs.gxt.ui.client.state.StateManager`，这将非常简单：

```
public static class MyProvider extends Provider {

    @Override
    protected void clearKey(String name) {
        // clearing logic
    }

    @Override
    protected String getValue(String name) {
        // read logic
    }

    @Override
    protected void setValue(String name, String value) {
        // store logic
    }
}

StateManager.get().setProvider(new MyProvider()); 
```

另请注意，GXT3中的状态管理[已更改，如果您需要在不久的将来迁移到 3.0，请记住这一点。](http://www.sencha.com/blog/ext-gwt-3-0-state-api)

# android - 如何在 Android 上从 ListActivity 创建 DialogFragment？

> ID：12961006
> 
> 赞同：5
> 
> 时间：2012-10-18T18:11:18.187
> 
> 标签：android, list, dialog, listactivity, android-dialogfragment

我有一个应用程序，其主要活动扩展 ListActivity 并显示一堆项目。而且我想在单击列表的项目后显示一个自定义 DialogFragment（用于编辑项目信息）。但根据谷歌的安卓教程[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)我只能从扩展 FragmentActivity 的活动中显示 DialogFragment，因为需要调用 getSupportFragmentManager() 方法。

所以问题是：如何从 ListActivity 显示自定义对话框？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:17:00.573

我可能只是扩展 FragmentActivity 以复制 ListActivity 中的内容。您可以将内容视图默认为列表视图（如果需要，可以使用空视图），并重新创建方法 getListView、getListAdapter 和 onListItemClick。然后你得到所有片段的东西，它就像一个常规的列表活动。

# android - 如何数据库。更新日期值

> ID：12961007
> 
> 赞同：0
> 
> 时间：2012-10-18T18:11:20.487
> 
> 标签：android, database, time, updating

我有这种格式的日期值：`yyyy-MM-dd kk:mm:ss`

所以从这条线上`data = params.getString("data");`我得到了我之前在另一个活动中设置的日期。因此，通过单击按钮，我需要将 + 10 分钟添加到日期值。

我确实知道它，`value.put("...",...);`但因为我不想只更改 DATE 值的 TIME。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:15:37.890

使用日历的实例：

```
 SimpleDateFormat currentDate = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");

 Calendar c = Calendar.getInstance();
 c.setTime(currentDate.parse(data)); // your date value
 c.add(Calendar.MINUTE,10);
 newDate = c.getTime() 
```

# c++ - 我的位掩码有什么问题？

> ID：12961008
> 
> 赞同：1
> 
> 时间：2012-10-18T18:11:24.437
> 
> 标签：c++, arrays, bitmask

1.  我应该创建 n 个位数组，n 不是常数！为什么程序给出垃圾而不是我的数组？

2.  如何将获得的数组写入文件，以便它们在那里？

例子：

```
class bits {
     int *m;
     int razm;
     int num;
     int N;
  public:
     bits(int r,int NN) { N=NN; razm=r; num=0; m=new int[N*razm]; }
     ~bits() {delete(m);}
     void add() { m[num/32]|=(1>>(num%32)); num++;}
     bool read(int n,int bit) 
            { 
          return m[(razm*n-bit)/32]&(1>>((razm*n-bit)%32)); }
            };

    void main()
    {
    bits x(8,10000);
    char ch[100]={"11111122223334445698"};
     for (int i=0;i<100;i++)
      {
      for(int j=0;j<8;j++)
    if(ch[i]&(1<<j))
            x.add();
      }

     for (int i=0;i<100;i++)
      {
      for(int j=0;j<8;j++) { if(x.read(i,j)) cout << "1"; else cout << "0"; }
      cout << "\n";
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:13:55.673

你在右移

```
(1>>(num%32))
(1>>((razm*n-bit)%32)) 
```

你应该左移的地方。除了余数为 0 时，右移产生 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:28:12.647

Your `new int[N*razm]` expression doesn't initialize the memory so your bit array starts with indeterminate contents (possibly random garbage). If you want to value initialized the array to zeros change it to `new int[N*razm]()`, note the trailing parentheses.

# c# - 将格式应用于数据集列

> ID：12961013
> 
> 赞同：1
> 
> 时间：2012-10-18T18:11:34.137
> 
> 标签：c#, asp.net

我有一个`DataSet`，我`GridView`用这个绑定我的`DataSet`。我`AutoGenerateColumns`的设置为真。由返回的列之一`DataSet`有一个`DateTime`值，我只需要获取其中的日期部分，然后将网格与`DataSet`. 我试过这样做，但没有奏效。任何帮助将不胜感激。

```
 private void FormatDataSet(DataSet ds) 
{ 
    foreach(DataRow dr in ds.Tables[0].Rows.Count) 
       dr["Col5"] = (DateTime.Parse(dr["col5"].ToString())).ToString("d").ToString(); 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:16:06.640

我相信这是使用 AutoGenerateColumns 属性的限制之一。如果您通过 s 手动定义列`BoundField`，您将能够使用`DataFormatString`属性控制格式。

至于您的情况，您的方法不起作用的原因是因为您试图将字符串强制转换为 DataSet 中的 Date 类型字段。除非您更改 DataSet 定义，否则这是不可能的。

解决此问题的一种方法是转到 GridView 的 RowDataBound 事件并手动编辑单元格。

```
private void YourGridViewControl_RowDataBound(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
{
    DataRowView drv = null;
    if (e.Row.RowType == DataControlRowType.DataRow) {
        drv = (DataRowView)e.Row.DataItem();
        e.Row.Cells[1].Text = (DateTime.Parse(dr("col5").ToString())).ToString("d");
    }
} 
```

# asp.net-mvc-4 - MVC4 WebApi OData $count 不适用于 IQueryable

> ID：12961018
> 
> 赞同：3
> 
> 时间：2012-10-18T18:11:41.850
> 
> 标签：asp.net-mvc-4, asp.net-web-api, odata

我在 MVC4 的控制器中有一个简单的 Get 操作：

```
// GET /branches
// returns a list of available branches
[Queryable]
public IQueryable<string> Get() {
    return BranchesRepository.GetBranchNames().AsQueryable();
} 
```

当我只使用 GET 甚至使用一些 OData 选项（如 $top、$skip 和 $filter）调用它时，这非常有效。但是当我用 $count 调用它时它不起作用。

例如：

```
/branches/$count 
```

返回

```
[] 
```

而我希望看到一个数字。

响应标头为我提供了我正在使用的 asp.net 版本

```
X-AspNet-Version: 4.0.30319 
```

这个版本中的 $count 参数是否损坏？或者我可以做些什么来让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:35:06.250

还在使用 beta/RC 版本的 Web API？如果是这样，则仅支持 $top、$skip、$orderby 和 $filter。此外，`QueryableAttribute`在 RTM 版本中被删除。

Web API 现在仅通过预览包[http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)支持 OData 。

但这无论如何都不支持 $count 。

# rmi - 通过 RMI 访问 Sling 的嵌入 Jackrabbit

> ID：12961025
> 
> 赞同：1
> 
> 时间：2012-10-18T18:12:19.730
> 
> 标签：rmi, jackrabbit, sling

我想通过 RMI 连接到 Spring 中的嵌入式 Jackrabbit，但不知道如何。RMI 端点是否已启动？如果不是，我该如何启动它？

谢谢，

马蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:39:52.947

[http://wiki.apache.org/jackrabbit/RemoteAccess](http://wiki.apache.org/jackrabbit/RemoteAccess)应该提供相关信息。

# c# - 使用 WCF 上传文件

> ID：12961027
> 
> 赞同：3
> 
> 时间：2012-10-18T18:12:30.667
> 
> 标签：c#, wcf

我需要一个 WCF 服务来按用户上传大文件。

以下哪一项提供了更优化的性能

```
 [OperationContract]
  public void UploadFile(Stream inputsreaam); 
```

或者

```
 [OperationContract]
   public void UploadFile(byte[] buffer); 
```

欢迎任何其他建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:27:27.907

如果您想上传非常大的文件，请使用 Stream 之一。如果您将 2 Gb 文件作为 byte[] 传输，它将被加载到服务器上的内存中，并且只有您可以将其保存在某处。使用 Stream，您可以从客户端流中读取并写入服务器上的文件或 DB 流，而实际上只有小块数据在内存中。回到性能：对于非常大的文件和多个客户端 byte[] 可能会因为内存不足而冻结您的服务器。

您可能还会发现本[教程](http://stefanoricciardi.com/2009/08/28/file-transfer-with-wcp/)很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:21:55.983

通常，第一个（`Stream`参数）。如果您正在使用`Stream`参数，并且您正在使用带有 WebHttpBinding / WebHttpBehavior 的端点（即，Web 或 REST 端点），那么 Stream 参数将绑定到整个请求正文，没有编码。在这种情况下，如果您使用第二个 ( `byte[]`)，则必须根据格式将参数编码为数组（对于 XML，编码为 base64 的字节；对于 JSON，表示字节的实际数字数组）。

但是，如果您没有使用 Web 端点（即，您使用的是 SOAP 端点），那么两者非常相似，因为 Stream 或 byte[] 参数将绑定到**SOAP body**，而 SOAP消息已经编码。

# java - 如何从方法中返回两种不同类型的值？

> ID：12961028
> 
> 赞同：0
> 
> 时间：2012-10-18T18:12:36.313
> 
> 标签：java, multithreading, methods, concurrency, executorservice

我需要从一个方法返回两种不同类型的变量（Future、ExecutorService）。我该怎么走？？这是一段代码。我有一个 A 类，我试图在“B”类中调用 run() 方法。“startExecutorService”是启动threadExecutor的方法，“stopExecutorService”是停止threadExecutor的方法

```
 public class A{
    public static void main(String[] args){

        A AObj= new A();

        Future<?> task = null;
        ExecutorService threadexec = null;

        task = AObj.startExecutorService(task, threadexec);

        AObj.stopExecutorService(task, threadexec);

    }

    public Future<?> startExecutorService(Future<?> control, ExecutorService threadExecutor){

        //'noOfThreads' determines the total no of threads to be created in threadpool
        int noOfThreads = 1;  

        // Creating an object for class 'B' which has the run() method
        B ThreadTaskOne   = new ExecutorServiceThreadClass();

        // Calling the ExecutorService to create Threadpool with specified number of threads
        threadExecutor = Executors.newFixedThreadPool(noOfThreads);

        // Creating a Future object 'control' and thereby starting the thread 'ThreadTaskOne' 
         control = threadExecutor.submit(ThreadTaskOne);    

         return control;
    }

    public void stopExecutorService(Future<?> task, ExecutorService threadExecutor){

        // Interrupting the thread created by threadExecutor
        task.cancel(true);

        if(task.isCancelled()){
            System.out.println("Task has been cancelled !!");
        }

        // Closing the threadExecutor
        threadExecutor.shutdownNow();

    }

} 
```

我在'threadExecutor.shutdownNow();'行的'stopExecutorService'方法中得到'NullPointerException'，这个错误的原因是因为threadExecutor值在main方法中没有改变..它只在'startExecutorService'方法中改变。所以我想将 threadExecutor 的更改值连同 Future 一起返回给 main 方法。

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:53:49.330

创建一个复合类并返回该类的一个对象？

```
class A{
}

class B{
}

class Composite{
  A varA;
  B varB;
  public Composite(A ax, B by){ varA = ax; varB = by;}
  public A returnA(){ return varA;}
  public B returnB(){ return varB;}
}

class Executor{
    A a;
    B b;
 ////// code here 
    public Composite returnComposite{
     Composite c = new Composite(a,b);
     return c;
  }
} 
```

# java - android admob 多个活动

> ID：12961029
> 
> 赞同：1
> 
> 时间：2012-10-18T18:12:40.070
> 
> 标签：java, android, admob

我有一个小应用程序，其中有 3 个活动，`admob`每个活动都有横幅。
横幅在功能中加载`onCreate()`，因此当用户在活动之间导航时，横幅不会显示几秒钟。

更改当前活动后如何防止重新加载横幅？

# firefox - 与配置文件共享相同配置文件副本的 FirefoxDriver 测试并行执行

> ID：12961037
> 
> 赞同：3
> 
> 时间：2012-10-18T18:13:27.073
> 
> 标签：firefox, webdriver, selenium-webdriver

一段时间以来，我们一直在使用 FirefoxDriver 执行一组基于 WebDriver 2.25.0 的自动化测试。这些测试由基于 Maven 3.0 的构建及其 FailSafe 插件并行执行（四核机器上每个核心 2 个线程）。每个测试都有一个 @BeforeClass 方法，该方法检索 FirefoxDriver 的实例并清除所有 cookie。所有这一切都很好。

由于代理身份验证的更改（以前没有），我们现在需要使用特定的 Firefox 配置文件运行测试。配置文件已创建，现在构建包含 -Dwebdriver.firefox.profile= 环境变量。配置文件似乎已被拾取，因为我们没有收到任何“未找到配置文件”错误。然而，似乎每个 Firefox 实例都使用相同的配置文件副本，因此共享相同的 cookie 存储：应用程序应该在用户第一次访问时提供区域选择对话框，但在运行这些测试时不提供。

**更新**：在没有 -Dwebdriver.firefox.profile 变量和使用 new FirefoxDriver(new ProfilesIni().getProfile("<profileName>")) 的情况下运行时的行为是相同的。

FirefoxDriver 不是创建指定配置文件的副本并使用该隔离副本运行每个 Firefox 实例吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:08:37.263

*   如果您在实例化时没有提供配置文件`FirefoxDriver`，那么当您运行代码时：`new FirefoxDriver(...)`会在文件夹中创建一个匿名配置`C:\Users\#TheUser\AppData\Local\Temp`文件，名为 eg `anonymous1864251113973276405webdriver-profile`。
*   如果您为 提供配置文件`FirefoxDriver`，则行为是相同的，除了配置文件副本被命名为：例如`userprofile6938771758695790613copy`。

总之，Webdriver 始终在此`Temp`文件夹中创建配置文件的副本，即使您指定或未指定必须使用的自定义配置文件。关于 cookie，每个创建的配置文件都有一个`cookies.sqlite`内部命名的文件。我不能 100% 确定 cookie 是否会以某种方式干扰，它们不应该。您可以通过比较保存在每个网络驱动程序中的 cookie 来检查，使用：

```
 Set<Cookie> webDriverCookies = webDriver.manage().getCookies(); 
```

# java - 将 Web 应用程序中的文件上传到项目根文件夹

> ID：12961041
> 
> 赞同：1
> 
> 时间：2012-10-18T18:13:33.943
> 
> 标签：java, tomcat, web-applications, file-upload, directory

我目前正在开发一个 Web 应用程序。在此应用程序的某些部分，我想将文件上传到某个目录。最初，当我编写测试用例时，这非常有效：

```
final static String IMAGE_RESOURCE_PATH = "res/images";

...

File directory = new File(IMAGE_RESOURCE_PATH + "/" + productId);

if(!directory.exists()) {
    directory.mkdirs();
} 
```

这将创建将上传文件的目录。结果路径将是：

[项目根文件夹]/res/images/[productId]

自从将应用程序部署到服务器（Tomcat 7）后，该目录在我正在使用的 IDE 的根目录中创建，这让我有点困惑。

例如：C:\Eclipse86\res\images

知道如何在不使用一些黑客技术或硬编码路径的情况下使用纯 Java 恢复到项目路径吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:54:18.180

如果您不指定绝对路径，您的目录将在应用程序的工作目录内（或者，如果正确，相对于）创建。

如果你想在你的 web 应用程序中获取目录，你应该使用`getServletContext().getRealPath(String path)`. 例如，`getServletContext().getRealPath("/")`是应用程序根目录的路径。

要使用 path 创建目录`[project root folder]/res/images/[productId]`，请执行以下操作：

```
// XXX Notice the slash before "res"
final static String IMAGE_RESOURCE_PATH = "/res/images";

...

String directoryPath = 
        getServletContext().getRealPath(IMAGE_RESOURCE_PATH + "/" + productId)
File directory = new File(directoryPath);

if(!directory.exists()) {
    directory.mkdirs();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:35:52.360

几年前我写了一个 servlet 来下载一个文件。您可以快速重构它以进行上传。干得好：

```
public class ServletDownload extends HttpServlet {

    private static final int BYTES_DOWNLOAD = 1024;  
    public void doGet(HttpServletRequest request, 

    HttpServletResponse response) throws IOException {
        response.setContentType("text/plain");
        response.setHeader("Content-Disposition", "attachment;filename=downloadname.txt");
        ServletContext ctx = getServletContext();
        InputStream is = ctx.getResourceAsStream("/downloadme.txt");

        int read = 0;
        byte[] bytes = new byte[BYTES_DOWNLOAD];
        OutputStream os = response.getOutputStream();

        while((read = is.read(bytes))!= -1) {
            os.write(bytes, 0, read);
        }
        os.flush();
        os.close(); 
    }
} 
```

此外，还有一种获取项目路径的简单方法，如 new File().getAbsolutePath()。

# c - execvp 和参数类型 - ansi c

> ID：12961047
> 
> 赞同：5
> 
> 时间：2012-10-18T18:13:50.057
> 
> 标签：c, strtok, argv, execvp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:25:33.963

The problem is that the second parameter of `execvp` is a `char * const *`, which is a "pointer to a constant pointer to *non-constant* data". You're trying to pass it a `const char **`, which is a "pointer to a pointer to *constant* data".

The way to fix this is to use `char **` instead of `const char **` (since "pointer to X" is always allowed to be convert to "pointer to `const` X", for any type X (but *only* at the top level of pointers):

```
char* p[10];
p[0] = ...;
// etc. 
```

Note that if you do need to insert `const char *` parameters, you can cast them `char *` as long as you don't modify them. Although the arguments to the `exec*` family of functions are declared as non-`const`, they won't ever modify them (see the [POSIX 2008 specification](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html#tag_16_111)). The rationale there explains why they are declared as non-`const`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T18:25:41.007

You can just use `char *p[10]`.

To break it down: `char *const *p` means "nonconstant pointer to constant pointer of nonconstant char" -- that is, `p` is writable, `p[0]` is not writable, and `p[0][0]` is writable.

# java - 从 .jar 文件中读取文本文件

> ID：12961051
> 
> 赞同：4
> 
> 时间：2012-10-18T18:14:01.090
> 
> 标签：java, inputstream, embedded-resource, java.util.scanner, bufferedreader

我有一个菜鸟问题。

我目前正在编写一个程序，该程序使用 File 和 Scanner 类从文本文件中获取大量数据，如下所示：

```
 File data = new File("champdata.txt");
   Scanner read = new Scanner(data);
   read.useDelimiter("%"); 
```

然后扫描程序在 IDE 中正确地从文本文件中检索数据，但是当我将程序作为 .jar 文件运行时，无法检索该文件。

我已经阅读了一些关于将文本文件添加到 .jar 文件本身以及使用 InputStream 和 BufferedReader 类来读取文件的内容，但我从未使用过这些类，也不了解它们的不同之处/如何使用它们代替 File 和 Scanner 类。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:15:49.177

有必要通过 URL 检索文件，因为它是一个嵌入式资源。有关更多详细信息，请参阅[嵌入式资源 Wiki](https://stackoverflow.com/tags/embedded-resource/info)。

## 更新

> 因此，如果我将文本文件放在 src 文件夹中的文件夹“Resource”中，我将使用的 URL 是“resources/champdata.txt”

不，如果它在`Resource`Jar 中的路径中，则字符串需要是：

```
..getResource("/Resource/champdata.txt"); 
```

如果它在`resources`路径中：

```
..getResource("/resources/champdata.txt"); 
```

字符串必须是精确的字母，（**多个**&）大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:42:49.010

该类`Scanner`有一个构造函数[`Scanner(InputStream)`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner%28java.io.InputStream%29)；所以你仍然可以像以前一样使用这个类来读取数据。

您所要做的就是从 Jar 中读取文件，您可以这样做：

```
InputStream is = getClass().getResourceAsStream("champdata.txt");
Scanner read = new Scanner(is);
read.useDelimiter("%"); 
```

命名的文件`champdata.txt`位于您的 jar 文件的根目录（这只是一个 zip 文件，您可以使用任何解压缩器来验证文件的位置）。

Now if you want to have the same functionality while developing in your IDE, place the file in your source directory, so that when the project is being built, it is placed in your `classes` folder. This way, the file can be loaded as described above using `getResourceAsStream()`

# soap - 是否可以使用 Axis2/XmlBeans 管理重复的元素名称

> ID：12961053
> 
> 赞同：0
> 
> 时间：2012-10-18T18:14:08.760
> 
> 标签：soap, axis2, xmlbeans

我们正在使用第三方 wsdl 文件，我们正在使用axis2生成java文件。现在我们有一个问题，不同文件中存在重复元素但具有相同的命名空间。

例子：

```
file1.wsdl => <xsd:element name="MyElementName"> 
file2.wsdl => <xsd:element name="MyElementName"> 
```

因此，结果是同一个文件从不同的 wsdl 文件生成了两次，因此在文件生成之后只有最后一个生成的文件实际存在。

我想知道这是否真的正确，或者是否是 wsdl 文件的设计缺陷？如果没有，如何使用axis2解决这个问题？

编辑

好的，所以我找到了一个标志，我可以为这些类使用不同的包，所以现在我有了

```
com.package.MyElementName
com.package.ext.MyElementName 
```

但是，它仍然不起作用，因为轴（或 xmlbeans）给了我错误的类。

看看这个例子。我会假设这会起作用，但我会得到一个 ClassCastException

java.lang.ClassCastException：com.package.MyElementName.impl.MyElementNameDocumentImpl 无法转换为 com.package.ext.MyElementNameDocument

```
com.mypackage.ext.MyElementNameDocument doc1 =
   com.mypackage.ext.MyElementNameDocument.Factory.newInstance();
doc1.addNewMyElementName();

com.mypackage.ext.MyElementNameDocument doc2 = 
  com.mypackage.ext.MyElementNameDocument.Factory.parse(doc1.toString()); 
```

编辑 -

好的，我在网上找到了真实的例子，所以我不妨展示真实的例子。

[http://dtd.cobaltgroup.com/STAR/5.2.4/WSDL/Templates/](http://dtd.cobaltgroup.com/STAR/5.2.4/WSDL/Templates/)

在许多其他人中，有这两个

[http://dtd.cobaltgroup.com/STAR/5.2.4/WSDL/Templates/GetServiceProcessingAdvisory.wsdl](http://dtd.cobaltgroup.com/STAR/5.2.4/WSDL/Templates/GetServiceProcessingAdvisory.wsdl) http://dtd.cobaltgroup.com/STAR/5.2.4/WSDL/Templates/GetStandardCodes.wsdl

如您所见，它们都具有元素 ProcessMessage。希望这能澄清一些事情。

```
 </xsd:complexType>
     <!--Global Elements used by the Bindings--><xsd:element name="ProcessMessage">
        <xsd:annotation>
           <xsd:documentation source="http://www.starstandard.org">
                Process Message Input
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
           <xsd:sequence>
              <xsd:element name="payload"
 type="starws:GetServiceProcessingAdvisoryPayload" minOccurs="0"
                           maxOccurs="1"
                           form="qualified"/>
           </xsd:sequence>
        </xsd:complexType>
     </xsd:element>

 <!--Global Elements used by the Bindings--><xsd:element name="ProcessMessage">
        <xsd:annotation>
           <xsd:documentation source="http://www.starstandard.org">
                Process Message Input
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
           <xsd:sequence>
              <xsd:element name="payload" type="starws:GetStandardCodesPayload" 
  minOccurs="0"
                           maxOccurs="1"
                           form="qualified"/>
           </xsd:sequence>
        </xsd:complexType>
     </xsd:element> 
```

……

问候/约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:15:51.523

至少供应商的 wsdl 设计非常糟糕（尤其是对于一个在公司名称中包含“标准”一词的公司）：全局类型/元素定义应该只进行一次，即放入单独的全局 XSD 文件中（如他们在这里做了：

```
 <xsd:include schemaLocation="STARWSDLDataTypes.xsd"/> 
```

）。

此外，服务命名空间应保持特定于服务，以便提供有关服务版本控制的灵活性。

我担心这个实际的星座（相同命名空间+wsdls 中的重复元素声明）是一个灰色区域主题 - 我在网上没有找到任何明确的声明，所以你唯一的解决方案可能是针对两个完全分离的 wsdl 文件进行开发。意思是axis2-wise 2个应用程序（每个wsdl 1个）而不是一个共享一个。

# html - Ipad 屏幕分辨率和桌面版本

> ID：12961061
> 
> 赞同：3
> 
> 时间：2012-10-18T18:14:32.087
> 
> 标签：html, css

为什么这行不通。

```
body{
    @media screen and (min-width: 1024px) {
        min-width:1339px;
    }
} 
```

我想如果用户在 Iphone 或 Ipad 2 上设置 min-width:1339px; 但如果在桌面浏览器上不添加任何最小宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:28:09.963

使用媒体查询，您不能将它们*放在*选择器中。

**编辑：**重新阅读后，我还看到您想将此应用于 iPad/iPhone，因此您需要最大宽度，而不是最小宽度。

```
@media screen and (max-width: 1024px) {
    body {
        min-width:1339px;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:28:32.037

把它放在body标签之外：

`@media screen and (min-width: 1024px) { body { min-width:1339px;} }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:28:48.547

为了设置这个最小宽度测量，媒体查询必须有一个 ID 或一个类来修改。您还必须用大括号将测量值括起来。

```
Example:

 @media screen and (min-width:1024px){
     body{min-width: 1339px;}
} 
```

不要在媒体查询和第一个大括号之间放置空格，因为它会将媒体查询解释为无效。此外，请确保将所有样式放在大括号中，否则如果将其放在大括号之外，它会将样式应用于整个页面。

希望有帮助。

更新：

我想知道宽度是否可能是一个问题，但在我们得出这个结论之前。我想我找到了你缺少的东西。试试这个，更新的例子：

```
 @media screen only and (min-width: 1024px) {
     body{min-width: 1339px;}
    } 
```

如果这不起作用，我尝试编辑宽度。因为我相信因为 min-width 测量不会显示，因为它大于 iPad 屏幕的最小宽度。如果你尝试改变宽度，我会设置一个基本宽度：1339px; 然后是最大宽度：85%；然后从那里往下走。通过这样做，这将使用 1339px 的宽度，然后将其缩小到您为 iPad 指定的任何百分比。它将使您的布局响应，我相信从我读到的内容是您正在尝试做的。

让我知道这个是否奏效。

# java - Fileupload Interceptor 没有在 Struts2 Maven 中上传任何文件

> ID：12961063
> 
> 赞同：1
> 
> 时间：2012-10-18T18:14:38.513
> 
> 标签：java, maven, struts2

我正在maven的Struts2中开发一个应用程序。我已经使用过`fileupload interceptor`，`allowtypes as image/jpeg`但是当我尝试上传 jpeg 文件时，它会给出`content type not allowed`. 我需要在我的 pom.xml 中添加任何 jar 依赖项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:51:05.023

嗯...尝试使用`image/jpeg,image/pjpeg` [http://www.webmaster-toolkit.com/mime-types.shtml](http://www.webmaster-toolkit.com/mime-types.shtml)。

# svn - 颠覆状态 -u 来区分

> ID：12961064
> 
> 赞同：0
> 
> 时间：2012-10-18T18:14:43.583
> 
> 标签：svn, diff

当我这样做时，`svn status -u`我会得到一个需要更新的文件列表。我想将此列表提供给，`svn diff`以便我可以查看一个文件中的更改列表。我可以这样做吗？如果是这样，我不确定如何对此进行 foreach。

编辑：linux bash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:21:40.213

```
svn diff -r BASE:HEAD . 
```

据我所知，将向您展示对文件的更改。

# javascript - 两次数组迭代的区别

> ID：12961072
> 
> 赞同：4
> 
> 时间：2012-10-18T18:15:20.427
> 
> 标签：javascript, for-loop

我只是想知道这些数组迭代之间的区别，为什么第二个似乎真的很少使用，有什么问题吗？

```
var items = [ /*...*/ ]
for (var i = 0; i < items.length; i++) {
    var item = items[i];
    // Do some stuff with the item
} 
```

第二种方式：

```
var items = [ /*...*/ ]
for (var i, item; item = items[i]; i++) {
    // Do some stuff with the item
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T18:16:40.737

第一个保证*总是*遍历每个元素。

如果第二个遇到一些类似假的元素，例如 0，它将中途停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:26:56.560

在第二个 for 循环中，您需要初始化 i 变量。

考虑：

```
var items = ["string", false, null, 0, "", {}, []]; 
```

第一个循环将遍历整个数组。但是，第二个循环的条件将评估分配给 item 的值。这部分的布尔值将是：

```
!!(item = items[i]) 
```

有效值，如**null**、**0**、**false**、**""（空字符串）**和***undefined***将评估为 false 并中断。**在上面的数组中，当 item 被赋值为false**时，您将跳出 for 循环

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:25:57.390

在第二种情况下，终止条件在某种程度上是特定于 javascript 的 - 当转换为布尔值的赋值产生**false**时循环终止，这也发生在读取数组元素超出其边界时。这与其他流行语言相反，在这些语言中，对数组的越界访问会导致某种错误，并且不能保证终止**for**循环的正确条件。当任何具有除 javascript 之外的其他语言背景的程序员编写迭代循环时，他/她可能会避免他知道在这些语言中不正确甚至危险的模式。

我认为这将是主要原因。但另一件事是，如上所述，即使在到达迭代数组的末尾之前，此条件也可能为**false** - 例如，当分配的元素的值为**false**、 0 或任何其他值时，在 javascript 中会隐式转换为**false**。**

# sql - 数据库关系问题

> ID：12961077
> 
> 赞同：2
> 
> 时间：2012-10-18T18:15:36.190
> 
> 标签：sql, database, database-design, entity, erd

我在识别关系时遇到问题 我有以下情况

*   一个老师可以复习很多篇论文
*   一篇论文可以由4位老师审阅
*   老师可以写一篇论文
*   论文可以有状态（审查中，已批准）
*   一位同时也是老师的学科负责人将选择老师来审查论文。
*   教师可以有多种类型（即可以是论文的作者、审稿人、学科负责人等）

我已经确定了以下表格：

*   老师
*   纸
*   教师类型

现在由于教师可以​​是多种类型，并且许多教师可以具有相同的类型，所以关系是多对多的，这将分解为一对多，因此会有一个表 TEACHER_TYPE（联结表）。我必须以不同的方式识别老师的每一卷我将如何使用它，例如，一位老师撰写论文，同时审查其他老师的论文。那么我会不会使用 TEACHER_TYPE 中的主键来以不同的方式记录审阅和创作过程呢？或者教师表中的相同ID有一些不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:21:25.713

乍一看，似乎缺少一个链接或关联表来表示教师和论文之间的多对多关系。这张桌子可能看起来像......

```
review         <-- this name can be descriptive of the purpose (review)
----------         but is also often just the name of the association
fk_paper_id    <-- foreign key to paper
fk_teacher_id  <-- foreign key to teacher performing review
review_status  <-- one or more columns indicating the status of this review 
```

教师类型可能只是教师和/或论文的属性。

由于教师（学科负责人等）之间存在层次结构，也可以表示为教师的属性，而不是单独的类型。该表可以是自引用的......例如，员工表......

```
employee
--------------
pk_employee_id
name, etc
fk_manager_id     <-- foreign key referencing back to the managing employee 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:44:14.683

我会制作第四张桌子 PAPER_TEACHER，这会让你更容易提问。

TABLE TEACHER T_ID TABLE PAPER P_ID TABLE TEACHER_TYPE T_ID 和 TT_Type TABLE PAPER_TEACHER T_ID、P_ID 和 PT_Status

SELECT * FROM PAPER t1 INNER JOIN PAPER_TEACHER t2 on t1.P_ID = t2.P_ID AND t2.PT_status = "under review" INNER JOIN TEACHER t3 on t2.T_ID = t3.T_ID INNER JOIN TEACHRE_TYPE t4 on t3.T_ID = = t4。 T_ID AND t4.TT_Type = "审阅者"

在您要求 PP_status 的地方，您可以使用各种东西。

# javascript - 带有可变数学运算符的jQuery if语句

> ID：12961085
> 
> 赞同：2
> 
> 时间：2012-10-18T18:16:10.010
> 
> 标签：javascript, jquery

所以我正在寻找类似于这个问题[python if statement with variable math operator](https://stackoverflow.com/questions/11847359/python-if-statement-with-variable-mathematical-operator) but in jQuery/Javascript

基本上像

```
var one = "4";

var two = "6";

var op = "==";

if (one op two) {
//do something
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T18:22:56.773

你可以定义很多二进制函数：

```
var operators = {
    "==": function(a,b){return a==b;},
    "<=": function(a,b){return a<=b;},
    ">=": function(a,b){return a>=b;},
    "<": function(a,b){return a<b;},
    ">": function(a,b){return a>b;},
    …
};

var one = "4",
    two = "6",
    op = "==";
if (op in operators && operators[op](+one, +two)) {
    //do something
} 
```

如果您不想生成这么大的对象并且没有复杂的功能，您也可以即时生成它们（使用一点`eval`魔法）：

```
var validOps = /^([!=<>]=|<|>)$/,
    operators = {};
function check(op, x, y) {
    if (arguments.length > 1)
        return check(op)(x, y);
    if (op in operators)
        return operators[op];
    if (validOps.test(op))
        return operators[op] = new Function("a","b","return a "+op+" b;");
    return function(a, b){return false;};
}

if (check("==", 4, 6)) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:17:24.350

您可以使用[**eval()**](http://www.w3schools.com/jsref/jsref_eval.ASP)但它应该是一个可以评估为 javascript 以获得所需结果的字符串。

**[现场演示](http://jsfiddle.net/rajaadil/VQbq2/)**

```
if (eval(one + op + two)) {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:23:21.413

如果您想对两个变量执行一个操作（也称为*函数*），那么您只需定义它：

```
var operations,
    a,
    b,
    op;
operations = {
    '==': function (a, b) {
        return a == b;
    },
    '&&': function (a, b) {
        return a && b;
    },
    '||': function (a, b) {
        return a || b;
    }
};
a = 4;
b = 6;
op = operations['=='];
if (op(a, b)) {
    //do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:23:12.677

我最近需要这样的东西，最后写了一个函数来解析运算符。

就像是：

```
function checkLogic(one, op, two) {
    switch(op) {
        case '==':
            return one == two;
        // etc
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-18T18:25:15.087

您可以为此使用 Eval

```
 if(eval(one+op+two)){
//do something
} 
```

# jquery - PJAX - URL 中包含空格或符号时出现 AJAX 错误？

> ID：12961088
> 
> 赞同：0
> 
> 时间：2012-10-18T18:16:24.363
> 
> 标签：jquery, pjax

所以我建立了一个使用 PJAX 的网站。我创建了一个搜索框，允许我通过 GET 发送搜索查询，但只要我包含空格 (%20) 或任何其他符号，PJAX 就会向我抛出 AJAX 错误，就好像找不到 URL ，但随后重定向到页面并在页面上执行完全重新加载。谷歌浏览器开发者工具显示请求正常，页面被找到，但出于某种原因，PJAX 认为它导致了 404 错误或什么的。有什么我做错了吗？

谢谢！

```
$('#searchbox').keydown(function (e) {
    if (e.keyCode == 13) {
        e.preventDefault();
        var value = $('#searchbox').val();
        searchvalue = value.replace('Click here to Search...',''); // In case the search box doesn't clear it's value onclick and customer does not notice.
        searchvalue = encodeURIComponent(searchvalue);
        $.pjax({ url: '/category.php?keywords=' + searchvalue, container: '#page-container', timeout: 10000 })
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:18:19.433

在这种情况下，您应该使用`trim()`函数从前端和末端删除不必要的

# java - 将 hashMap 存储在数组中

> ID：12961095
> 
> 赞同：0
> 
> 时间：2012-10-18T18:16:48.670
> 
> 标签：java, hashmap

我想将 HashMaps 存储在一个数组中。我正在尝试只制作一个 HashMap，用特定信息填充它并将其存储到数组的一个元素中。然后我想用不同的信息覆盖该哈希图中的信息，然后将其存储到该数组的不同元素中。我想多次这样做。这样做的最佳方法是什么？

现在我有：

```
HashMap[][] location = new HashMap[columns][rows];
HashMap <String, String> area = new HashMap <String, String> ();

public Map() {

    area.put("description", "You are in the upper left\n");
    location[0][0] = area;

    area.put("description", "You are in the upper middle\n");
    location[1][0] = area;
} 
```

问题在于现在 location[0][0] 和 location[1][0] 具有相同的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:21:31.800

location[0][0] 和 location[1][0] 持有相同的指向区域的指针

你应该这样做

```
location[0][0] = createArea("You are in the upper left\n");
location[1][0] = createArea("You are in the upper middle\n");

HashMap <String, String> createArea(String desc){
    HashMap <String, String> area = new HashMap <String, String> ();
    area.put("description", desc);
    return area;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:20:52.507

您需要创建`Map`要存储在每个位置的不同实例。

```
 public Map() {      

   Map<String, String> area = new HashMap<String, String>();
   area.put("description", "You are in the upper left\n");     
   location[0][0] = area;      

   area = new HashMap<String, String>();
   area.put("description", "You are in the upper middle\n");    
   location[1][0] = area; } 
```

# mysql - 如何从 MySQL 表中获取所有数据组合？

> ID：12961097
> 
> 赞同：3
> 
> 时间：2012-10-18T18:16:49.230
> 
> 标签：mysql, combinations, option, product

在过去的五个小时里，我试图从表格中获取每个产品选项组合，但我现在完全陷入困境。我有一个表，其中包含（简化）之类的数据：

```
CREATE TABLE `assigned_options` (
  `option_id` int(10) unsigned NOT NULL DEFAULT '0',
  `value_id` int(10) unsigned NOT NULL DEFAULT '0',
);

INSERT INTO `assigned_options` (`value_id`, `option_id`) VALUES
(4, 2),
(3, 2),
(2, 1),
(1, 1),
(5, 3),
(6, 3),
(7, 3); 
```

假设选项 ID 2 是具有红色 (4) 和蓝色 (3) 变化的颜色，选项 ID 1 大小等......

是否可以使用一个 MySQL 查询来做到这一点？我曾尝试使用 PHP 来创建一个循环函数来获得每一种可能性，但我就是无法让它工作。

非常感谢任何提示。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:28:08.683

```
select option_id, value_id
from assigned_options
group by option_id, value_id
order by option_id, value_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:21:41.963

给定你的桌子......我假设你想要价值和选项的每一个可能的组合。这是一个交叉连接（没有任何 ON 或 where 子句限制结果的连接）：

```
 SELECT a.value_id, b.option_id 
     FROM assigned_options a 
     JOIN assigned_options b 
     GROUP BY a.value_id, b.option_id 
```

group by 过滤掉重复的结果。

您是否还有 2 个其他表`value`并且`option`您想要提取所有组合？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T13:41:04.330

在 TSQL 中，您可以使用递归 CTE，不记得我在哪里得到它，但很可爱。注意 MYSQL 不使用“With”选项，所以它在 MySQL 中不起作用

```
WITH Numbers(N) AS (
                    SELECT N
                    FROM ( VALUES(1), (2), (3), (4), (5), (6)) Numbers(N)),
                        Recur(N,Combination) AS (
                        SELECT N, CAST(N AS VARCHAR(20)) 
                        FROM Numbers

UNION ALL

SELECT n.N,CAST(r.Combination + ',' + CAST(n.N AS VARCHAR(10)) AS VARCHAR(20)) 
FROM Recur r
INNER JOIN Numbers n ON n.N > r.N)

select Combination
from RECUR
ORDER BY LEN(Combination),Combination; 
```

# spreadsheet - 电子表格如何正确更新单元格/知道要更新什么？

> ID：12961101
> 
> 赞同：6
> 
> 时间：2012-10-18T18:16:53.473
> 
> 标签：spreadsheet

电子表格太漂亮了！单元格可以相互链接，如果任何公式/值/其中一个单元格发生任何变化，一切都会正确更新！

有谁知道电子表格如何做到这一点的一般概念？我所说的是如果 A1 = 1、A2 = 2 和 A3 = A1+A2。然后我更改 A1 或 A2 并且 A3 知道要更新并正确执行。当然，在这个例子中它不能错误地更新它，但在更复杂的例子中，它必须先更新“较低”的单元格，然后再更新建立在它之上的东西。

在自己编程时，在基础数据更改后，我很难正确更新所有内容。有时并非所有内容都必须更新，所以我不想更新所有内容。这只是一团糟。

我希望我的标签是正确的，并且允许这样的讨论。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T18:24:31.880

我不知道电子表格在实践中如何做到这一点。但我的想法是从图上的[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)中得到启发的。考虑公式`A3 = A1+A2`。单元格将成为图形的节点。公式将支配边缘。边代表依赖。例如，A3 取决于 A1。因此，我们有两条边从 A3 到 A1 和 A3 到 A2。现在，上图的拓扑排序将为您提供准确的评估顺序。即 A1 A2 和 A3。

另请注意，如果使用此算法，则此图需要是有向无环图 (DAG)。即它不包含任何循环。据我所知，excel 确实在其公式中检测到循环依赖。

拓扑排序的底层算法使用 DFS（深度优先搜索），它也可以检测循环。因此，人们可以报告这样的周期。

# ios - iCloud - 如何更新 UIDocument 文件？

> ID：12961105
> 
> 赞同：2
> 
> 时间：2012-10-18T18:17:01.393
> 
> 标签：ios, icloud

我正在使用 iCloud 在 iOS 上的设备之间同步特定文档 (UIDocument)。我的实现目前正在运行，但我无法理解更新文件的工作原理。这就是我的实现目前的工作方式：

1.  构造我的 UIDocument 子类的实例并将其保存在本地：

    [UIDocument 保存到 URL]

2.  将文件发送到 iCloud

    [NSFileManager 设置无处不在]

这些步骤将我的文档发送到 iCloud，我可以在其他设备上查看该文件。我的问题是如何更新文件？我必须构造一个新的 UIDocument 对象并保存，然后像上面一样 setUbiquitous 吗？我已经尝试使用 UIDocumentSaveForOverwriting 作为 [UIDocument saveToURL] 中的保存操作，但 setUbiquitous 调用失败。我也尝试过简单地保存本地文件并在其他设备上查看元数据查询更新通知，但没有收到任何通知。如何更新 UIDocument 并将该更改反映在 iCloud 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:38:08.730

你应该只做一次 setUbiquitous 调用；这只是将文件从本地存储复制到 ubiquity 容器（iOS 使用它来将文件与云同步）。从那时起，您用来打开或保存文件的 URL（如 [UIDocument saveToURL] 中）应该是文件的 URL，因为它存在于 ubiquity 容器中。

您可以使用如下代码获取 ubiquity 容器的位置：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
        myobj.containerURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];

    }); 
```

根据 Apple 文档，您应该使用 MetaDataQuery 获取 URL 的位置（因为显然，URL 可以根据各种事件进行更改）。[这个苹果示例](http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloud101/SearchingforiCloudDocuments/SearchingforiCloudDocuments.html)就是一个例子。

祝你好运。:) 这几天我一直在为这些东西苦苦挣扎……

# python - 在 Python 中的线程之间传递数据

> ID：12961106
> 
> 赞同：0
> 
> 时间：2012-10-18T18:17:09.620
> 
> 标签：python, multithreading, tornado, suds

我有一个运行多个 Web 服务的 Tornado Web 服务器。我需要服务 A 中的一个操作来调用服务 B 上的操作。我正在使用 Suds 对服务 B 进行此调用。目前一切都会挂起，除非我将 Suds 调用放入单独的线程中，但现在我需要从该调用（在线程 1 中）获取数据返回到主线程，以便我可以将其发送回原始请求 Web 服务（服务 A）。一些代码：

```
if input.payment_info.issuer == 'Amex':
    def t1():
        url = 'http://localhost:8080/PaymentService?wsdl'
        client = Client(url)
        result = client.service.process_amex(payment_info.issuer, payment_info.number, payment_info.sort_code)

    t = Thread(target=t1)
    t.start()
    if result == "Success":
        return result #How can I access it to return it to the main service 
```

抱歉，如果不清楚，我知道线程是一个复杂的问题，但我在这里看不到任何其他选项，因为没有它，代码就会挂起。

编辑：需要明确的是，我没有使用 suds 来调用服务 A。唯一的 suds 实例用于调用服务 B。

根据 Alex Martelli 的帖子（http://stackoverflow.com/a/2846697/559504），我也尝试过使用队列，但它再次挂起。

```
if input.payment_info.issuer == 'Amex':
        def t1(q):
            url = 'http://localhost:8080/PaymentService?wsdl'
            client = Client(url)
            result = client.service.process_amex(payment_info.issuer, payment_info.number, payment_info.sort_code)
            q.put(result)
        q = Queue.Queue()
        t = Thread(target=t1, args=(q))
        t.daemon = True
        t.start()
        result = q.get()
        if result == "Success":
            return "Success" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:09:12.300

这是我拥有的多线程`tkinter`应用程序的片段，它使用 a`Queue`将数据从一个线程传递到另一个线程。我认为可能足以让您将其用作模板。

```
def check_q(self, _):
    log = self.logwidget
    go = True
    while go:
        try:
            data = queue.get_nowait()
            if not data:
                data = '<end>'  # put visible marker in output
                go = False
            log.insert(END, data)
            log.see(END)
        except Queue.Empty:
            self.after(200, self.check_q, ())
            go = False 
```

# android - 没有活动来处理意图

> ID：12961111
> 
> 赞同：0
> 
> 时间：2012-10-18T18:17:26.890
> 
> 标签：android, exception, android-intent, exception-handling, android-activity

所以我试图通过使用这个来开始另一个活动：

```
public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent openMap = new Intent("com.highapps.bicineta.MAPVIAS");
            startActivity(openMap);             
        }
    }); 
```

我的 android 清单如下所示：

```
<activity
        android:name=".MapVias"
        android:label="@string/app_name"
        android:exported="false" >
        <intent-filter>
            <action android:name="com.highapps.bicineta.MAPVIAS" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

我得到这个错误：“没有活动来处理意图”

有趣的是，我有相同的代码块来启动另一个活动，它工作得很好。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:18:41.023

```
Intent myIntent = new Intent(CurrentActivity.this, NextActivity.class);
CurrentActivity.this.startActivity(myIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:27:57.237

尝试使用

```
Intent openMap = new Intent("com.highapps.bicineta.MapVias"); 
```

因为 MapVias 是您的活动的名称。

根据 Android 开发者网站：“应该处理意图的组件的名称。该字段是 ComponentName 对象 - 目标组件的完全限定类名的组合（例如“com.example.project.app. FreneticActivity") 和组件所在应用程序的清单文件中设置的包名（例如，“com.example.project”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:41:01.443

只需这样做：

```
Intent i = new Intent(CurrentActivity.this, MapVias.class);
startActivity(i); 
```

替换`CurrentActivity`为您当前的活动（嗯，这很明显：D）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T06:14:32.410

一些快速检查

1.  您是否将 Activity/ActionBarActivity/FragmentActivity 扩展到 MapVias 活动？
2.  MapVias 活动是否在 AndroidManifest.xml 中提到的默认包中？如果不是，则在清单中声明时指定绝对名称。

尝试以这种方式实现。

**AndroidManifest.xml**

```
<activity android:name="com.highapps.bicineta.MapVias"></activity> 
```

**点击()**

```
 public void onClick(View v) {
            Intent openMap=new Intent(currentActivity.this,MapVias.class);
            startActivity(openMap);
        }
    }); 
```

# java - Java用'\"'替换'"'字符

> ID：12961114
> 
> 赞同：0
> 
> 时间：2012-10-18T18:17:43.513
> 
> 标签：java, string

我正在尝试将文本更新到 MySql 数据库中。文本中包含 " 标记。例如，当我编写插入命令时，示例字符串现在可能是 Hello "world"，其总和如下

插入 mytable ('mystring') values("Hello "world"");

我正在使用java来执行这样的命令。显然，由于世界字符串中的双引号，这会产生错误。我尝试用java替换它 `givenString.replaceAll("\"", "\\"");` `givenString.replace(Pattern.quote("\""), "\\"");`

但没有任何效果。任何帮助是极大的赞赏 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:20:20.017

`\`像这样双重逃脱：

```
givenString.replaceAll("\"", "\\\""); 
```

正如 Ted Hopp 在评论中所说，要将数据插入表中，您应该使用参数用户准备好的语句，并根据您使用的 API 设置它们。例如，如果您使用 JDBC，则可以使用对象的`setString`方法`Statement`。

```
String str = "Hello \"world";
PreparedStatement stmt = con.prepareStatement(
      "insert into mytable('column') values(?)");
stmt.setString(1, str); 
```

关于您的第一条评论：

在 Java 中，字符串是不可变的，因此`replaceAll`返回一个新实例，其内容是具有所需替换的字符串。所以你想要的是将结果再次分配给前一个变量，如下所示：

```
public String getSqlLikeString(String givenString) {
   System.out.println(givenString); 
   givenString = givenString.replaceAll("\"", "\\\""); 
   System.out.println(givenString); 
   return givenString;
}

// or just
public String getSqlLikeString(String givenString) {
   return givenString.replaceAll("\"", "\\\"");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:21:11.280

尝试这样的事情：

```
 String s = "hello \"world\"";
    System.out.println(s);
    System.out.println(s.replace("\"", "\\\"")); 
```

# url - 当文件名包含“？”时如何打开 URI 和“=”字符？

> ID：12961117
> 
> 赞同：4
> 
> 时间：2012-10-18T18:17:46.073
> 
> 标签：url, browser

我的 web 目录中有一个名为的文件`index.php?title=dogs`，我想在浏览器中打开它。我应该输入什么网址？当我输入 时`.../index.php?title=dogs`，它认为我正在寻找一个名为 的文件`index.php`，该文件不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:20:02.383

ASCII 中的十六进制值`?`是 0x3f，所以 URL 编码形式是 %3f，值`=`是 0x3d，所以 %3d，给出

```
.../index.php%3ftitle%3ddogs 
```

见[http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)

请注意，`=`一旦您逃脱了`?`

但是您可能应该考虑更改文件名！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:21:26.553

网络服务器假定 ? 是“index.php”文件的参数，称为**QueryString**，因此它将其从路径中取出，然后将其传递给 index.php 文件（取决于您拥有的网络服务器）。您可以使用网络服务器上的自定义设置来解决问题。但我个人不推荐它。

PS：我不知道你可以用这样的名字创建文件！

# com - 方法调用会导致死锁发生

> ID：12961127
> 
> 赞同：0
> 
> 时间：2012-10-18T18:18:04.893
> 
> 标签：com, casting, deadlock, breakpoints

我的应用程序 ASP.net 遇到以下错误：

**无法将“LBCOMLib.LBCOM_SessionClass”类型的 COM 对象转换为接口类型“LBCOMLib.ILBCOM_Session”。此操作失败，因为 IID 为“{B46EBC80-9D0D-11D3-B0D3-0000B422F6DA}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：组件配置为使用同步，此方法调用将导致发生死锁。（来自 HRESULT 的异常：0x8004E005）**

当我在应用程序上调用搜索页面时，就会发生这种情况。几周前它还在工作，但现在即使我在 page.cs 的所有方法中设置了断点，甚至 Page_Load 在调试系统时也不会在断点处停止并弹出之前描述的错误。

有人解释了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:53:50.173

**解决方案1：**

尝试取消选中

> COM 对象可见复选框

在 VisualStudio 设置下

**解决方案 2：** 尝试从 Asp.Net 服务器 URL 链接浏览

这对于您的 AddIn 项目中的**ComVisible**属性很有趣，可能是 Activex Ocx 等。

# git - 在脚本中捕获 git post-receive 错误

> ID：12961128
> 
> 赞同：10
> 
> 时间：2012-10-18T18:18:04.927
> 
> 标签：git, bash, git-bash, git-post-receive

在 bash 脚本中，我执行

```
git push 
```

我检查它的退出状态。

在远程服务器上有一个 post-receive 钩子可以做一些事情。如果发生错误，接收后挂钩将以非零值退出。

但是，当 post-receive 钩子出错时， git push 正常退出。除非我专门检查特定错误字符串的输出（我不是），否则我的脚本认为一切正常。

有没有一种简单的方法可以确定接收后挂钩是否失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:08:46.170

所以答案是否定的，没有办法轻松检查 post-receive 挂钩是否失败。您可以做的最好的事情是让您的脚本检查远程输出，并确保您的接收后挂钩回显您正在寻找的错误消息。

在我的情况下，预接收挂钩将不起作用，因为我正在推送到另一个备份存储库，并且必须先接受新的提交，然后才能推送它。

基本上，接收后挂钩应该执行以下操作：

```
 some-command-that-might-fail

 RC=$?

 if [ $RC -eq 0 ]; then
echo -e "\nERROR: some-command-that-might-fail FAILED!!!!!!!! PANIC!!!!!!\n"
 fi 
```

然后执行推送的脚本应该对 FAILED 或 ERROR 或 PANIC 的输出进行 grep 并报告接收后错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:43:36.437

引用[http://www.kernel.org/pub/software/scm/git/docs/githooks.html#post-receive](http://www.kernel.org/pub/software/scm/git/docs/githooks.html#post-receive)：

> post-receive
> ...
> 这个钩子不会影响 git-receive-pack 的结果，因为它是在实际工作完成后调用的。

也许[pre-receive 钩子](http://www.kernel.org/pub/software/scm/git/docs/githooks.html#pre-receive)更适合您的目的，尽管没有提到传输的返回码。

# c# - 用于嵌入式 RavenDb 的单例

> ID：12961129
> 
> 赞同：0
> 
> 时间：2012-10-18T18:18:08.263
> 
> 标签：c#, .net, singleton, ravendb

为什么当我使用这个单例时，负载检索总是空的？

```
public class DataLayer
{
    private  EmbeddableDocumentStore d;
    private static object lockerSingleton = new object();

    private static DataLayer _current;
    public static DataLayer RavenDB
    {
        get
        {
            lock (lockerSingleton)
            {
                if (_current == null)
                    _current = new DataLayer();
            }
            return _current;
        }
    }

    public DataLayer()
    {          

                d = new EmbeddableDocumentStore() { DataDirectory = "csv" };
                d.Initialize();              
    }

    public void  store<T>(T obj)
    {
        using (var session = d.OpenSession())
        {
            session.Store(obj);
            session.SaveChanges();
        }
    }
    public T retrieve<T>(object ID)
    {
        using (var session = d.OpenSession())
        {
            return session.Load<T>(ID.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:44:11.507

你说你的对象有一个整数 Id 字段。因此，假设您有一个 Foo 对象，其 Id 设置为 1。Raven 将存储您的文档，文档 ID 为“foos/1”。

当您调用 Load 时，如果您传入整数 1，Raven 会正确地将其转换回“foos/1”字符串。但是因为您传入的是字符串“1”，所以 raven 只是假设该字符串代表整个文档 ID。在你的情况下，它没有。文档 ID 为“1”的文档不存在，因此您得到一个空值。

此外，通用 T 在商店中是多余的，您不妨只使用 object.

但是，请注意我关于不对 Raven 使用 Repository 模式的评论。它隐藏了 Raven 的绝大多数功能，并且在您开始查询时会给您带来麻烦。

# javascript - 如何将 SP.CamlQuery 的响应正文大小减小到大型 SharePoint 列表？

> ID：12961130
> 
> 赞同：1
> 
> 时间：2012-10-18T18:18:10.243
> 
> 标签：javascript, sharepoint-2010, caml

我在构建对共享点列表的有效 caml 查询时遇到了麻烦。这是一个包含许多列的非常大的列表。我使用“ViewFields”将返回的列减少到我们需要的三个。这样做，这将返回的文件从 8mb 减少到 4mb，这很棒。如果可能的话，我想进一步减少这种情况。我注意到响应正文中有一个部分标记为“元信息” - 它非常大并且似乎不包含所需的信息，无论如何构建caml查询以省略此信息，或者否则会进一步减小响应的大小？这是我的代码：

```
clientContext = new SP.ClientContext('/path/to/list');
oList = clientContext.get_web().get_lists().getByTitle('List Name');

camlQuery = new SP.CamlQuery();
camlQuery.set_viewXml('<View><Query><Where><Geq><FieldRef Name=\'ID\'/><Value Type=\'Number\'>1</Value></Geq></Where></Query><ViewFields><FieldRef Name=\'Col1\'/><FieldRef Name=\'Col2\'/><FieldRef Name=\'Col3\'/></ViewFields></View>');

this.collListItem = oList.getItems(camlQuery);

clientContext.load(collListItem); 
clientContext.executeQueryAsync(Function.createDelegate(this, this.success), Function.createDelegate(this, this.failed)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:35:54.180

您可以对请求进行分页，以减少通过网络传输大量数据的负面影响。

[SP.ListItemCollectionPosition 类](http://msdn.microsoft.com/en-us/library/ff409439.aspx)

# java - 为数据库提供 Java .jar 文件？

> ID：12961133
> 
> 赞同：6
> 
> 时间：2012-10-18T18:18:20.830
> 
> 标签：java, database, jdbc

我想创建一个用户只需运行 .jar 文件即可运行的程序。我希望这个程序能够访问一个数据库，该数据库在第一次下载程序时预先填充了一些数据，并且当用户使用它时，更多的数据被添加到数据库中。

数据库应该本地存储在用户的计算机上。

我最好的选择是什么？我应该使用哪个数据库引擎，我该怎么做才能让用户在安装应用程序时不必设置数据库，它将预先填充 .jar 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:55:23.527

一个简单的解决方案是使用本地存储在磁盘上的嵌入式数据库（例如靠近 jar 文件）。您可以为此使用[h2](http://www.h2database.com)，甚至[sqlite](http://www.sqlite.org)。

加载时，程序将检查数据库是否存在，如果不存在，只需播放一个设置 SQL 脚本，该脚本将创建数据库结构和初始数据，否则你很好，只需执行应用程序的工作即可创建做。

这是一个非常简单的 h2 数据库示例：

假设您正在打包一个名为 JAR 文件夹的 SQL 文件`init.sql`，`/resources/`它将创建一个表，例如：

```
create table foobar(bazz VARCHAR);
insert into foobar values('foo');
insert into foobar values('bar');
// and so on 
```

然后在您的代码中的某个地方，您需要访问数据，您将尝试加载数据库或创建它（如果它尚不存在）。

```
Connection loadDatabase() throws Exception {
    Class.forName("org.h2.Driver");
    Connection con = null;
    try {
        // throws an exception if the database does not exists
        con = DriverManager.getConnection("jdbc:h2:./foo.db;ifexists=true");
    } catch (SQLException e) {
        // if the database does not exists it will be created
        conn = DriverManager.getConnection("jdbc:h2:./foo.db");
        // init the db
        initDatabase(con);
    }

    return con;
}

void initDatabase(Connection con) throws Exception {
    // load the init.sql script from JAR
    InputStreamReader isr = new InputStreamReader(
        getClass().getResourceAsStream("/resources/init.sql"));
    // run it on the database to create the whole structure, tables and so on
    RunScript.execute(con, isr);
    isr.close();
}

void doSomeStuffWithDb() throws Exception {
    Connection con = loadDatabase();
    Statement stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery("select * from foobar");
    // will print foo, then bar
    while (rs.next()) {
        System.out.println(rs.getString(1));
    }
    rs.close();
    stmt.close();
    conn.close();
} 
```

`foo.db`执行后，您应该在应用程序旁边有一个名为的文件，其中包含创建的表等。

这是一个非常简单的例子，当然你可以使用 JDBC 的任何包装器来避免使用 ResultSet 等，比如 spring jdbcTemplate，甚至加载连接实例等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:33:22.847

我会调查[h2](http://www.h2database.com/html/main.html)。这是一个很棒的数据库，有很多持久化选项。另外，由于您使用的是 Java，因此我会考虑研究 hibernate。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T18:29:10.060

使用[Java DB](http://www.oracle.com/technetwork/java/javadb/overview/faqs-jsp-156714.html)，然后当用户第一次启动程序时，将脚本加载到它。

# jquery - 如何在克隆的字段集 jQuery 中克隆字段集

> ID：12961135
> 
> 赞同：3
> 
> 时间：2012-10-18T18:18:23.280
> 
> 标签：jquery, html, clone

我需要在克隆的字段集中克隆一个字段集。 ![在此处输入图像描述](../Images/4ec5a324181469557c855e993b2b2a0c.png)

所以我的常规结构就像

![在此处输入图像描述](../Images/7f7209c789dfa4851726d14cd0e1ef58.png)

当我点击`add new agenda field`它成功克隆更大的领域，如

![在此处输入图像描述](../Images/d52fc0f03a7c6687832618798b32a176.png)

但是当我单击`add new file`它时，它只会将新字段添加到父字段而不是当前字段

![在此处输入图像描述](../Images/a2ad108fecb9db2f2fb2fb950d28b1bb.png)

我的代码就像

```
<div id="agenda_placeholder">
    <div id="agenda_template">
    <fieldset>
        <legend>Agenda Details</legend>

        <ol>
            <li>
                <label for=topic_name>Topic Name</label>
                <input id=topic_name name=topic_name type=text placeholder="ACAT Briefing" required autofocus>
            </li>
            <li>
                <label for=topic_time>Time</label>
                <input id=topic_time name=topic_time type=text placeholder="2.00 - 2.30 ">
            </li>
            <li>
                <label for=presenter>Presenter</label>
                <input id=presenter name=presenter type=text placeholder="Name LastName">
            </li>

            <li>
            <div id="file_placeholder">
            <div id="file_template">
                <fieldset>
                    <legend>File Details</legend>

                        <ol>
                            <li>
                                    <label for=file_description>File Description</label>
                                    <input id=file_description name=file_description type=file_description placeholder="Ex. Weather Stats">
                            </li>
                            <li>
                                    <label for=file_name>File Name</label>
                                    <input id=file_name name=file_name type=file_name placeholder="Exact file name Eg:weather.docx">
                            </li>
                            </ol>
                        </div> <!-- file_template -->
                     </div> <!-- file_placeholder -->   
                     <button type="button" name="AddNewFile" onclick="Add();">Add New File</button> 
                </fieldset>
            </li>
         </ol>
        </div> <!-- agenda_template -->
    </div> <!-- agenda_placeholder -->
        <button type="button" name="AddNewAgenda" onclick="Add_Agenda();">Add New Agenda Field</button>
    </fieldset>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script>
        var _counter = 0;
function Add() {
    _counter++;
    var oClone = document.getElementById("file_template").cloneNode(true);

    oClone.id += (_counter + "");
    document.getElementById("file_placeholder").appendChild(oClone);
}

function Add_Agenda() {
    _counter++;
    var oClone = document.getElementById("agenda_template").cloneNode(true);
    oClone.id += (_counter + "");
    document.getElementById("agenda_placeholder").appendChild(oClone);
} 
```

那么如何在克隆的字段集中克隆一个字段集呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:05:00.397

首先，您的 html 无效，它的标签重叠

在您的`add`函数中，语句 document.getElementById("file_placeholder") 将返回 id 的第一个匹配项`file_placeholder`，这是不正确的。

您需要知道单击了哪个按钮并克隆其父 div 并将克隆的 div 附加到按钮的祖父 div。

可以应用相同的逻辑，`Add_agenda`但您应该注意将添加的文件删除到您正在克隆的议程中。

```
function Add(btn) {
     _counter++;
    var parentFileTemplate = $(btn).parent("div");
    parentFileTemplate.attr('id',"file_template" + _counter );
    var parentFilePlaceHolder = parentFileTemplate.parent();
    cloned = parentFileTemplate.clone();
    cloned.attr('id',"file_template" + _counter );
    parentFilePlaceHolder.append(cloned);
  } 
```

调用函数时还必须添加`this`为参数：

```
<button type="button" name="AddNewFile" onclick="Add();"> 
```

将会：

```
<button type="button" name="AddNewFile" onclick="Add(this);"> 
```

# json - 获取 youtube 直播的当前观众人数

> ID：12961137
> 
> 赞同：0
> 
> 时间：2012-10-18T18:18:35.323
> 
> 标签：json, api, youtube-api, live-streaming

我正在寻找从 Youtube API v2 获取当前流查看器的实时流。此信息似乎可在 Youtube 直播流（“102 正在观看”）上获得，无论是在主页上还是在您单击流进行查看后。

```
http://www.youtube.com/watch?v=oNfdKebcrOI&feature=lb 
```

就在右侧视频的下方。目前我正在使用：

```
https://gdata.youtube.com/feeds/api/charts/live/events/live_now?v=2&alt=json&inline=true&max-results=20&start-index=1 
```

而且我没有看到任何与我需要的模糊相似的东西。我需要在查询字符串中添加什么来获取此信息吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-19T16:17:58.437

您可以通过以下方式获取当前用户数

```
https://www.youtube.com/live_stats?v={videoid} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:16:15.513

不幸的是，虽然这些数据在 YouTube 网络界面可以访问的后端中可用，但目前根本没有通过任何 API（YT Data API v1/v2/v3 或 YT Analytics API）公开。

# vb.net - 如何将 System.Drawing.Image 转换为字节数组？

> ID：12961144
> 
> 赞同：10
> 
> 时间：2012-10-18T18:18:47.653
> 
> 标签：vb.net, image, bytearray

您好我正在尝试将图像转换为字节数组以将其作为字节（）传递给 sql。我试图使用图像转换器，但它一直失败

```
Dim converter As New ImageConverter
nRow.Signature = converter.ConvertTo(imgSignature, TypeOf(Byte()) 
```

我不断收到的错误是字节是类型而不是表达式

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T18:24:28.310

您可以使用`MemoryStream`. 通过将图像保存到 a`MemoryStream`中，您可以从图像中获取数据的字节数组：

```
Dim ms = new MemoryStream()
imgSegnature.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg) ' Use appropriate format here
Dim bytes = ms.ToArray() 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-18T18:47:01.067

VB.NET TypeOf 操作符并没有像你想象的那样做。可能由于 C#`typeof`运算符而有些混乱。与 VB.NET 等效的是 GetType() 函数。这工作正常：

```
Dim converter As New ImageConverter
nRow.Signature = converter.ConvertTo(imgSignature, GetType(Byte())) 
```

类型转换器使用 MemoryStream 进行转换，使用 PNG 图像格式。

# entity-framework - 如何使用 EF Code First 将一个表关联到多个父级

> ID：12961148
> 
> 赞同：3
> 
> 时间：2012-10-18T18:19:02.147
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我正在构建一个域模型，该模型需要多个表才能被多个可能的父表引用。像您这样的东西可能有一个表来存储笔记或文件，并且这些笔记和/或文件可以与不同的父实体相关联。并不是说同一个“文件”或“注释”可以与多个所有者相关联，而是“文件”表中的 10 行，其中 3 行可能由“客户”表中的行拥有，其中 3 行可能是由“Orders”表中的行所有，其中 4 个可能由“Person”表中的行所有。

拥有表都具有子表的虚拟 ICollections。

当我通过代码首次迁移运行我的模型以进行初始迁移并查看生成的流畅代码时，这些表的表定义包括多个引用源表的 id 列，因此会有一个列“customer_id ” “person_id” 等（每个可能的“拥有实体”一个。这似乎不太“正确”。有没有更好的方法在 EF 中使用 CodeFirst 对此进行建模？就像能够在提供有关拥有实体的“提示”的子表？

谢谢，-先生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:30:51.597

如果您在便笺和所有可以拥有便笺的实体之间创建多对多关系，您将拥有每个拥有类型的联结表和漂亮而干净的便笺表。创建多对多关系的最简单方法是覆盖该`DbContext.OnModelCreating`方法。

你的 DbContext：

```
 public class MyDatabase : DbContext
  {
    // Protected methods

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
      base.OnModelCreating(modelBuilder);

      modelBuilder.Entity<Customer>().HasMany(x => x.Notes).WithMany();
      modelBuilder.Entity<Order>().HasMany(x => x.Notes).WithMany();
    }

    public MyDatabase() : base("MyDatabase")
    {
    }

    // Properties

    public DbSet<Customer> Customers { get; set; }

    public DbSet<Order> Orders { get; set; }

    public DbSet<Note> Notes { get; set; }
  } 
```

这将产生以下表格：**Customer**、**Orders**、**Notes**、**CustomerNotes**和**OrderNotes**，最后两个是联结表，每个只有两列。

笔记！使用此解决方案，实体也可以共享注释，例如，客户和订单可以拥有相同的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:06:39.567

不确定是否合适，但您可以使用 EF 层次结构来做到这一点。见这篇文章：

[http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph。 aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)

基本上，您的笔记可以有三种类型，它们都继承自基本笔记类型。

EF 中有三种类型的层次结构，因此它是一个三部分的文章......

# ajax - 如何使用 Modernizr 测试浏览器的 AJAX 支持？

> ID：12961149
> 
> 赞同：3
> 
> 时间：2012-10-18T18:19:08.277
> 
> 标签：ajax, jquery, modernizr, progressive-enhancement

作为 Progressive-Enhancement 的忠实粉丝，我使用 Modernizr 来测试浏览器功能。**如何使用 Modernizr 来测试浏览器对 AJAX 的支持**（特别是 jQuery 的 AJAX 函数）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T18:31:22.693

你不需要 Modernizer 来测试它，jQuery 已经内置了它。

```
if (jQuery.support.ajax) {
    alert("Ajax is supported!");
} 
```

虽然我不确定 jQuery`$.ajax`在不支持时如何处理调用。它要么静默失败，要么触发错误回调。如果它对你很重要，你应该测试它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:24:22.670

对于它的价值，我已将问题 #734 添加到 Modernizr 以添加 AJAX 测试，[开发了测试](https://github.com/jhfrench/Modernizr/blob/master/feature-detects/ajax.js)，创建了一个[JSFiddle 来测试，呃，测试](http://jsfiddle.net/jhfrench/t4DHx/)......并[发起了一个拉取请求（问题 #735）](https://github.com/Modernizr/Modernizr/pull/735)回到维护Modernizr的好人。

相关JS：

```
Modernizr.addTest('ajax', function() {
    var xhr = new XMLHttpRequest();
    return !!('onreadystatechange' in xhr);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T19:44:59.613

可能与问题相关，也可能不相关，但您可以使用 jquery ajax 的异常处理。要回答 Kevin B. 的问题，不进行任何异常处理，它只会静默失败（回调将不返回任何内容）。因此，如果您希望它显示任何内容，请使用异常处理。

简短的例子：

```
$.ajax({
type: "POST",
url: "ajax_page.php",
success: function(data, status, xhr) {
// perform operations on success
alert('Success');
},
error: function(xhr, status, error) {
// perform operations on error
alert(xhr.responseText);
}
}); 
```

# cocos2d-iphone - 如何使用 removeAllChildrenWithCleanup: w/o 丢失 runAction:？

> ID：12961153
> 
> 赞同：0
> 
> 时间：2012-10-18T18:19:18.210
> 
> 标签：cocos2d-iphone

我有一个可以正常工作的转换序列，直到我在序列末尾添加 removeAllChildrenWithCleanup: 。我该怎么做才能保持转换顺序并在最后运行 removeAllChildrenWithCleanup:？

这是有问题的代码片段：

```
// Note: spriteSheet is a CCSpriteBatchNode
CCArray *oldSprites = [spriteSheet descendants];
for (int j=0; j < (int)[oldSprites count]; j++) {
    CCSprite *sprite = (CCSprite *)[oldSprites objectAtIndex:j];
    if (sprite != nil) {
        id actionMove = [CCMoveTo actionWithDuration:0.75
                                            position:ccp(0,0)];
        [sprite runAction:actionMove];
    }
}
[spriteSheet removeAllChildrenWithCleanup:YES]; 
```

注意：我尝试通过使用 CCMoveTo 序列然后 CCCallFuncND 来清理精灵来清理精灵，但它也不起作用。我正在尝试使用 removeAllChildrenWithCleanup:，因为我知道从 CCSpriteBatchNode 中删除孩子非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:48:29.917

你试过CCCallBlock吗？像这样的东西：

```
id actionMove = [CCMoveTo actionWithDuration:0.75 position:ccp(0,0)];
id actionDelay = [CCCallBlock actionWithBlock:^{[sprite removeFromParentAndCleanup:YES]; }];
id sequence = [CCSequence actions:actionMove, actionDelay, nil];
[sprite runAction:sequence]; 
```

# javascript - 如何从触发器中排除特定的子元素

> ID：12961156
> 
> 赞同：0
> 
> 时间：2012-10-18T18:19:26.360
> 
> 标签：javascript, jquery-selectors, triggers

> **可能重复：**
> [阻止执行父事件处理程序](https://stackoverflow.com/questions/1398582/prevent-execution-of-parent-event-handler)

我正在使用一个不错的插件（[jQuery drop-down](http://labs.abeautifulsite.net/jquery-dropdown/)）向表格行添加下拉列表：

属性放置在包含要显示的菜单 ID 的触发器对象上。在这种情况下，表格行上的“数据下拉列表”。

```
<tr data-dropdown="#dropdown-first">
  <td><a href="http://www.boston.com">Basic</a></td>
  <td>The basic plan</td>
</tr> 
```

我的问题是其中一个 TD 包含一个链接，但该链接将始终触发下拉菜单，而不是启动新页面。这是调用菜单的插件代码片段：

```
$(function () {
    $('BODY').on('click.dropdown', '[data-dropdown]', showMenu);
    $('HTML').on('click.dropdown', hideDropdowns);
}); 
```

有没有办法修改 .on 事件中的选择器以排除特定的子标签，例如我的链接？还有其他建议的策略吗？我想尽可能保持插件完整，以便它高度可重用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:05:29.553

问题是您将 data-dropdown 属性放在行上。单击该行中的任何内容都会触发该事件，并且 showMenu 中的逻辑甚至不会检查一旦单击任何内容后它是否不应该继续。

整行是否必须导致下拉？如果没有，请将数据下拉列表放在行内的某处。

否则，修改 jquery.dropdown.js 并将其添加到第 41 行，在 event.preventDefault() 行之前：

```
if (trigger != event.target && $(event.target).hasClass('dropdown-ignore')) return; 
```

然后将“dropdown-ignore”类添加到您的 boston.com 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:46:08.347

您可以尝试取消绑定与包含的所有单击事件（在插件实例化后）

HTML

```
<tr data-dropdown="#dropdown-first">
   <td class="disable-dropdown"><a href="http://www.boston.com">Basic</a></td>
   <td>The basic plan</td>
</tr> 
```

JAVASCRIPT

```
$('.disable-dropdown').unbind('click'); 
```

# java - 在java中使用队列的最佳方法

> ID：12961167
> 
> 赞同：0
> 
> 时间：2012-10-18T18:20:01.977
> 
> 标签：java, linked-list, priority-queue

我正在做一个项目，遇到了一些我不知道什么是最好的问题。我想要做的是运行 4 个队列，每个队列都有一个优先级，因此每个队列都以循环格式运行其预定的时间量，并且正在考虑为每个队列使用优先级队列，然后我在 Java api 中找到一个链表也是一个队列（如果我读的是正确的），它是一个 FIFO 队列。该项目的主要目标是采用一个“进程”，然后为其分配优先级，让该进程在其中一个队列中运行，然后重新设置其优先级，或者将队列更改为原位或将其保留在原处。
链接列表或优先级队列哪个更好？感谢您对此的任何意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:22:09.123

您始终可以实现 Java 集合库的 LinkedList 并调整一些方法以将其转换为优先级队列。Bam——两全其美。

修改它以适合您的项目的一种方法是重载该`add()`方法以包含优先级参数。虽然队列传统上是 FIFO，但 LinkedList 有一个`removeFirst()`和一个`removeLast()`功能（甚至是“删除”-- `remove(int index)`）。因此，您拥有库类所需的所有工具。我假设这是一个学校项目，所以这也是展示对 OOP 继承的理解的好方法。

`int priority`另一种方法是只使用您将使用属性定义的“进程”类的“LinkedList” 。这样，您可以拥有某种流程管理器，通过查看每个对象的`priority`属性来操作 Process 对象的 LinkedList。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:29:56.680

你的问题有很多语法错误，很难阅读，所以我不知道我是否完全理解你的问题，但让我们试试。

您有 4 个队列，代表 4 个不同的优先级（？）。因此，必须有 1+ 个生产者线程根据优先级将作业放入每个队列（这真的不清楚，所以我猜这就是您的意思），并且有 1+ 个消费者线程为每个队列提供服务有自己的优先级的队列。优先级为 1 的消费者线程从队列 1 中提取，优先级为 2 的从队列 2 中提取，等等（同样没有真正解释，但我在这里推断）。你想知道这些队列应该是优先队列还是链表。

好吧，如果您使用优先级队列，则队列会根据添加到其中的作业的优先级对自身进行排序。Java 实现它的方式只不过是一个排序列表。因此，优先级较高的作业将在队列中优先于较低优先级的作业。通过使用优先级队列，不需要多个队列，甚至不需要具有优先级的线程。您只需使用优先级队列，它将按优先级顺序添加作业。具有较高优先级的作业将被推进并在较低优先级的作业之前完成。

这在 javadoc 中并不明显，但您可以创建一个像这样的通用作业并将其添加到优先级队列中以使其工作：

```
public class Job<T> implements Comparable<Job<T>> {

   public enum Priority { LOW, MEDIUM, HIGH, HIGHEST };

   private T payload;

   private Priority priority;

   public Job( T payload, Priority priority ) { .... }

   public T getPayload() { return payload; }

   public Priority getPriority() { return priority; }

   public int compareTo( Job<T> that ) {
      if( this.priority.ordinal() < that.priority.ordinal() ) {
         return 1;
      } else if( this.priority.ordinal() > that.priority.ordinal() ) {
         return -1;
      } else {
         return 0;
      }
   }
} 
```

完毕。在线程、切换队列或其他方面没有花哨的优先级。这是一个队列，许多消费者，很容易抓住下一件事然后走。比您描述的更简单的架构可能会更好地工作（即更多的吞吐量）。

另一方面，LinkedList 具有排队的方法，但是将其转换为优先级队列需要您自己添加方法以使其成为优先级队列（即按排序顺序添加事物）。

如果您必须很好地使用具有不同优先级线程的 4 个独立队列，那只是不幸的架构，但您可以这样做。我认为在这种情况下，优先级队列和链表之间的差异为零。因为您永远不会在不同优先级的优先级队列中拥有任何东西。那只是一个链表。如果您必须保留 4 个列表的方法，每个列表都代表优先级或其他。我会编写一个拥有四个列表的简单类，并且消费者线程将引用它。然后在其上实现一个简单的 take() 方法。它会拉出最高优先级的工作并将其返回给该线程。这样，您的线程就不必知道优先级，并且可以真正从任何队列中拉出。更轻松，

# ruby-on-rails - Ruby on Rails：使用 accept_nested_attributes_for 不会生成表单的一部分

> ID：12961168
> 
> 赞同：0
> 
> 时间：2012-10-18T18:20:03.207
> 
> 标签：ruby-on-rails, nested-attributes

我有两个模型：用户和个人资料。我想使用相同的表格同时向两者输入数据。我正在关注关于嵌套模型表单（修订版）的 railscast 196#。问题是，表单的第一部分生成得很好。这是第二部分（使用 field_for 的地方），它没有显示在视图中。我在 stackoverflow 中搜索了一个解决方案，有人建议以某种方式使用“构建”操作。但是，由于错误，这不起作用。

如果有人能解释我如何使它工作，我将不胜感激。这几天我一直在为这个问题苦苦挣扎。

```
user.rb
class User < ActiveRecord::Base
attr_accessible :email, :first_name, :last_name, :orientation, :gender, :password, :password_confirmation, :date_joined, :last_online, :date_of_birth, :location, :profiles_attributes  
    has_one :profiles   
    accepts_nested_attributes_for :profiles, allow_destroy: true                    
    has_secure_password
    validates_confirmation_of :password
    #.....#
end

profile.rb
class Profile < ActiveRecord::Base
    attr_accessible :height, :weight
    belongs_to :user
end

user/new.html.erb
<%= form_for @user do |f| %>
    <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
        <%= f.label :gender, "I am a:" %><%= f.select :gender, options_for_select([["Man", "Male"], ["Woman", "Female"]]) %><br />
        <%= f.label :orientation, "Sexsual Orientation" %><%= f.select :orientation, options_for_select([["Straight", "Straight"], ["Gay", "Gay"], ["Bi","Bi"]]) %><br />
        <%= f.label :first_Name %><br /><%= f.text_field :first_name %><br />
        <%= f.label :last_name %><br /><%= f.text_field :last_name %><br />
        Date of Birth:<%= f.date_select( :date_of_birth, :start_year => 1920, :prompt => { :day => 'day', :month => 'month', :year => 'year' }) %><br />
        <%= f.label :location %><br /><%= f.text_field :location %><br />
        <%= f.label :email %><br /><%= f.text_field :email %><br />
        <%= f.label :password %><br /><%= f.password_field :password %><br />
            <%= f.label :password_confirmation %><br /><%= f.password_field :password_confirmation %><br />

        <%= f.fields_for :profiles do |builder| %>
          <fieldset>
            <%= builder.label :height, "My height is: (cm)" %><%= builder.text_field :height %><br />
            <%= builder.label :weight, "My weight is: (kg)" %><%= builder.text_field :weight %>
          </fieldset>
        <% end %>
    <%= f.submit "Next" %>
<% end %>

<%= link_to 'Back', users_path %> 
```

编辑：user_controller 中的新操作：（您可以看到它非常标准）

```
 def new       
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:25:25.910

我想你需要

```
has_one :profile 
```

在您的用户模型中。

做表格

```
 fields_for :profile 
```

在你的 users_controller 中做

```
@user = User.new
@user.build_profile 
```

has_one 关系与 has_many 的工作方式略有不同 - 请参阅[http://guides.rubyonrails.org/association_basics.html#has_one-association-reference](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)

# facebook - og:image 引用的所有图像至少应为 200px

> ID：12961169
> 
> 赞同：0
> 
> 时间：2012-10-18T18:20:12.877
> 
> 标签：facebook, facebook-like, refinerycms, refinery

我想请你帮助我问题是无论我做什么，我都会不断地从 fb 调试器获取这个消息：

“og:image 引用的所有图片在两个维度上都应至少为 200px。请检查给定 url 中所有带有标签 og:image 的图片，并确保其符合推荐的规格。”

我也尝试过设置这个属性：

```
<meta property="og:image:width" content="202" /> 
<meta property="og:image:height" content="202" /> 
```

但这无济于事

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:23:43.003

您需要在`og:image`元标记中引用的图像实际上至少为 200 x 200，您不能只使用较小的图像并告诉 Facebook 将它们显示得更大。Facebook 已经这样做了；警告在那里提示您放入更大的图像。

# mysql - 在 MySQL 中最后插入的记录上更新“最新记录标志”

> ID：12961174
> 
> 赞同：1
> 
> 时间：2012-10-18T18:20:28.487
> 
> 标签：mysql, database, version-control

我有一个表，它通过一个自动递增列（跟踪输入记录的顺序）和一个为最后插入的记录设置为 1 的“CURRENT_FLAG”来进行版本控制。加入此表的视图始终使用 CURRENT_FLAG=1，以便它们只返回最后一条记录。

所以如果结构是这样的：

```
AUTO_ID   PERSON_ID   PERSON_VALUE   CURRENT_FLAG
1         1           5452           0
2         1           637            1
3         2           4523           1 
```

下次我想插入一条记录时，我需要更新 CURRENT_FLAG。现在我执行这样的事情：

```
UPDATE T
LEFT JOIN (
     SELECT PERSON_ID, MAX(AUTO_ID) as AUTO_ID 
      FROM T 
  GROUP BY PERSON_ID
         ) as T1 ON T.PERSON_ID = T1.PERSON_ID and T.AUTO_ID = T1.AUTO_ID
SET T.CURRENT_FLAG = COALESCE(T.PERSON_ID / T.PERSON_ID, 0) 
```

但是，即使在 PERSON_ID 和 AUTO_ID 上都有索引，该查询在一个相当小的表上也需要几秒钟。

这些记录是从临时表中作为一批插入的，并且不是一次插入一个人，所以我无法拉起 auto_ids 并手动设置标志或将所有 current_flags 设置为 0。

有没有人有更好的方法来编写该查询，或者使用触发器和\或其他解决方案做同样的事情？MySQL 5.0+。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:41:53.690

我和 Marc B 在一起。与其将这个 CURRENT_FLAG 保留在表中，并殴打您的服务器以使其保持最新状态，不如简单地获取每个人的最新记录，如下所示：

```
 SELECT T.*
     FROM T
     WHERE AUTO_ID IN 
     (
          SELECT MAX(AUTO_ID) AS AUTO_ID
            FROM T
        GROUP BY PERSON_ID
      ) 
```

您可以将其定义为视图。如果您对其应用 WHERE 子句，例如

```
 WHERE T.PERSON_ID = :somebody 
```

只要您在 PERSON_ID 和 AUTO_ID 上有索引，优化器就会做正确的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:35:33.580

有一些方法可以获得最近添加的记录，而不是额外的`CURRENT_FLAG`列。您可以尝试降序并获取第一条记录：

```
SELECT [field1, field2, etc...] FROM `T`
WHERE [...]
ORDER BY AUTO_ID DESC
LIMIT 0, 1 
```

# oop - FooManager 调用 Foo.OnSthHappened() 是一种不好的做法吗？

> ID：12961179
> 
> 赞同：2
> 
> 时间：2012-10-18T18:20:42.013
> 
> 标签：oop, events, design-patterns, inheritance

在我的项目中有一个文档管理系统。有一个基`Document`类和一些派生类。还有一个`DocumentManager`类管理文档的打开/关闭/激活操作。

及其派生类可能希望在`Document`加载、关闭等时执行某些操作，但状态更改由管理器类控制，因此目前在类调用的类上有（虚拟）方法，如`OnLoaded()`, 。除了将这些方法公开似乎没有必要之外，它工作正常。`OnClosed()``Document``DocumentManager`

另一种设计是让`DocumentManager`类触发事件并且每个`Document`实例都订阅这些事件。恕我直言，这并没有太大的区别，但会带来内存泄漏的风险。

我有一种直觉，这些都不是“解决方案”，并且有适合该问题的最佳实践。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:59:45.503

我的直觉是，尽管在不知道项目的具体要求的情况下很难确定，但您的`DocumentManager`班级中有逻辑，可能应该在班级的子类中`Document`。

我会想象一个（可能是抽象的）`Document`具有 public`load`和方法`close`的基类。`whatever`每个子类将根据其特定要求实现这些方法，从而使您可以轻松创建任意数量的`Document`子类，而无需`DocumentManager`更改逻辑（请参阅[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)）。如果这些操作是异步的，您的`Document`类将分派事件以通知`DocumentManager`它们已完成。

这将使管理（我假设）其实例集合`DocumentManager`的[单一责任。](http://en.wikipedia.org/wiki/Single_responsibility_principle)`Document`

# vb.net - 排序多维数组

> ID：12961183
> 
> 赞同：0
> 
> 时间：2012-10-18T18:20:58.567
> 
> 标签：vb.net

我正在尝试对多维数组进行排序，但不确定这是否是正确的方法。到目前为止，我在多维数组中获取了我的 5 个数字，然后将它们移动到一维数组中并使用数组排序。知道更好的方法吗？或者对如何改进我的有想法？此外，代码目前在排序区域中不起作用，它给了我一个数组错误的索引。

任何帮助将不胜感激。提前致谢

```
Module q
    Sub Main()
        Randomize()
        Dim Player,RandomNumber,NumberOfPlayers,Index As Integer
        Dim Roll as Integer = 0
        Console.Write("How many people will be playing Yahtzed?: ")
        Player = convert.toint32(Console.Readline)
        NumberOfPlayers = Player
        Dim Game(Player,5) As Integer
        Do until Player = 0
            Console.Write("User")
            Roll = 0
            Do until Roll = 5
                RandomNumber = CINT(Int((6 * Rnd()) + 1))
                Game(Player,Roll) = RandomNumber
                Roll += 1
                Console.Write(" "&RandomNumber)
            Loop 
            Player -= 1
            Console.Writeline()
        Loop 
        Player = NumberOfPlayers
        Do until Player = 0
            Dim Ordering(5) as Integer
            Roll = 0
            Do until Roll = 5
                Ordering(Index) = Game(Player,Roll)
                Roll += 1
                Index += 1
                Array.Sort(Ordering)
            Loop
        Loop
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:47:43.920

迭代数组的惯用方式是使用 For 语句完成的

```
Const  NPlayers As Integer = 5, NRolls As Integer = 5

Dim game = New Integer(NPlayers - 1, NRolls - 1) {}
Dim randomizer As New Random()
Dim randomNumber As Integer

For p As Integer = NPlayers - 1 To 0 Step -1
    For r As Integer = 0 To NRolls - 1
        randomNumber = randomizer.[Next](10)
        game(p, r) = randomNumber
    Next 
Next 
```

数组索引总是从`0`到`arraysize-1`。

您的 Ordering 数组的大小为`NPlayers * NRolls`

```
Dim Ordering(NPlayers * NRolls - 1) As Integer 
```

你的太短了。因此你得到一个例外。

* * *

可以使用`Random`类创建整数随机数

```
Dim randomizer As New Random()
Dim randomNumber As Integer

...

randomNumber = randomizer.[Next](10) 
```

这将创建 0 到 10 之间的随机数。仅创建一次随机发生器，然后通过调用该`Next`方法获取下一个随机数。

（您必须将`Next`方法放在方括号中，因为`Next`VB 中是关键字。）

* * *

**更新**

我假设您想对每个玩家的卷进行排序。实现这一点的最简单方法是改用锯齿状数组。

```
Const  NPlayers As Integer = 5, NRolls As Integer = 5

Dim game = New Integer(NPlayers - 1)() {}
For p As Integer = NPlayers - 1 To 0 Step -1
    game(p) = New Integer(NRolls - 1) {}
    For r As Integer = 0 To NRolls - 1
        game(p)(r) = randomizer.[Next]()
    Next
    Array.Sort(game(p))
Next 
```

但是您将不得不使用`game(p)(r)`而不是访问卷`game(p,r)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:55:30.397

我敢打赌，如果你把它画出来，它真的会对你有帮助。一维数组和多维数组之间没有真正的区别，这纯粹是你自己的思考过程。考虑一个由 5 个骰子组成的网格的 5x3 阵列。我们可以通过两种方式组织它：

作为二维：数组开始 -> 卷 1 -> 1 2 3 4 5 卷 2 -> 2 4 2 1 5 卷 3 -> 2 5 4 3 2

或者作为一维：数组的开始 -> 1 2 3 4 5 2 4 2 1 5 2 5 4 3 2

无论哪种方式，您都必须任意确定如何划分内存块。在二维情况下，您预先标记第一个数组索引基本上说“每个第二维将包含 5 个整数”。在内存中，您会弄清楚自己的位置： memory_address = offset 以到达数组的内存空间 + [1st_Dim]*sizeof(5 integers) + [2nd_Dim]*sizeof(integer)

一维情况是这样做的：memory_address = offset to get to your array's memory space + [1st_Dim]*sizeof(integer)

只要您小心知道您在正确的索引处，这两个地址将是相同的。

把它画在纸上并运行你的索引，它会帮助你理解你正在迭代的内容。

# mysql - mysql/phpmyadmin 权限更改现在看不到dbs

> ID：12961185
> 
> 赞同：0
> 
> 时间：2012-10-18T18:21:13.187
> 
> 标签：mysql, phpmyadmin

我已经更改了我的 mysql 用户权限，由于某些莫名其妙的原因，我无法再看到我的所有数据库，除了 mysql 安装 dbs。我不太明白为什么我看不到这些数据库，并且正在寻找关于我应该从哪里开始寻找权限可能被搞砸的地方的输入。这是我不太熟悉的 mysql 层。我知道数据库在那里，但出于某种奇怪的原因，我只是无法将它们视为 root。

```
mysql> SHOW GRANTS FOR 'root'@'localhost';
+------------------------------------------------------------------------+
| Grants for root@localhost                                              |
+------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION    | 
| GRANT ALL PRIVILEGES ON `db`.* TO 'root'@'localhost' WITH GRANT OPTION | 
+------------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:51:10.720

首先备份你的mysql数据目录（在ubuntu中是/var/lib/mysql）。您可以在 mysql 配置文件 entry datadir 中找到目录位置。使用您最喜欢的打包程序备份该目录、egtar 或 zip。备份前，先停止mysql服务。备份后再次启动mysql服务。

然后尝试从 db 表中删除您的 root 用户主机条目 db.*

```
use mysql
select host,user,db from db;
delete from db where user="root" and db="db"; 
```

我不确定它是否是正确的解决方案并且还没有测试它，所以我希望我能用这个想法告诉你。但不要忘记先备份您的数据目录。

# c++ - 在 C++ 中分隔正斜杠上的输入

> ID：12961189
> 
> 赞同：0
> 
> 时间：2012-10-18T18:21:26.673
> 
> 标签：c++, input

让我先说我对 C++ 真的很陌生。

我想从以 A/B 形式（在命令行中）输入的分数中获取分子和分母；将 A 和 B 放入各自变量的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:33:03.350

使用 C++ 最简单的方法是

```
double numerator, denominator;
char   dummy;
if (in >> numerator >> dummy >> denominator) {
    // ...
} 
```

以上从流中读取有理值。要从命令行上的参数获取流，您可以使用`std::istringstream`：

```
int main(int ac, char* av[]) {
    for (int i(1); i != ac; ++i) {
        std::istringstream in(av[i]);
        // ...
    }
} 
```

主要缺点是分隔字符可以是上面提到的提取代码的任何内容。为了解决这个问题，我会使用一个`slash`操纵器：

```
std::istream& slash(std::istream& in) {
    if (in.get() != '/') {
        in.setstate(std::ios_base::failbit);
    }
    return in;
}
// ...
if (in >> numerator >> slash >> denominator) {
    // ...
} 
```

由于该解决方案似乎受到赞赏，我想指出，根据需要，您可能需要稍微调整以下实现`slash()`： 发布的版本期望分子后面的斜线。跳过前导空格可能是合理的：

```
if ((in >> std::ws).get() != '/') {
    ...
} 
```

此外，这只是一个角色的特殊实现，您可能希望对其他角色有类似的操纵器。为了避免复制代码，操纵器可以成为模板：

```
template <char Separator>
std::istream& separator(std::istream& in) {
    if ((in >> std::ws).get() != std::char_traits<char>::to_int_type(Separator) {
        // ...
}
typedef std::istream& (*separator_manipulator)(std::istream&);
separator_manipulator const slash = &separator<'/'>;
separator_manipulator const comma = &separator<','>;
// ... 
```

使用带有负值的 s时，需要使用`std::char_traits<char>::to_int_type()`以避免出现问题。`char`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:29:15.063

`scanf`. 即使在 C++ 中，它仍然有效。请注意，变量名称应以小写字母开头。

```
int a, b;
scanf("%d/%d", &a, &b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:44:42.163

命令行参数作为 C 字符串（即字符指针）传递。如果您有一个程序的基本框架，那么您已经...

```
void main(int argc, char * argv[])
{ ... } 
```

...或类似的东西。argv 数组的第一个成员（即 argv[0]）是一个字符指针，指向正在运行的程序的名称。其余参数（argv[1] 到 argv[argc-1]）是命令行参数。

如果您只是学习 c/c++，那么您应该在调试器下运行一个基本的简单程序，传递不同的参数，用空格引用任何参数，使用环境变量作为参数，并尝试查看真正传入的内容。

当你把它记下来时，用你的 A/B 作为论据。它将是一个字符串而不是数字，因此您需要在“/”处进行划分。

```
int a, b;
scanf("%d/%d", &a, &b); 
```

只要您的数字和斜线都一起运行以提出一个论点，它将起作用。shell 通常会使用空格来分隔不同的参数。

您可以使用其他方法来查找斜线和值。您的问题的答案不必特定于 c++。Scanf 适用于 c/c++。另一种简单的方法是...

```
char *copyOfString = strdup(argv[1]);
char *B = strchar(copyOfString, '/');
*B = NULL;
B++;
char *A = copyOfString; 
```

现在您有了需要转换为整数（或浮点数或双精度数，取决于您的要求）的值的字符串形式。当然，没有错误检查，所以如果你没有完全正确地调用程序，就会出现程序混乱。

其他人已经发布了其他方法的其他答案，但我希望这有助于并欢迎使用 c/c++ 编程。并且请买一本好书，试错只到此为止，C/C++ 非常无情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T18:33:01.193

-Removed-By 未使用命令行完成答案的海报。

就像其他人所展示的那样，一旦您从 std in 中读取它，就拆分字符串查找 strtok 。

# android - Android 角色和文件权限

> ID：12961193
> 
> 赞同：4
> 
> 时间：2012-10-18T18:21:41.040
> 
> 标签：android, permissions, chmod

我想了解有关 Android 角色的一些信息，特别是为什么我执行 Context 类的这个功能

```
openOutputFile(filename, MODE_WORLD_WRITEABLE) 
```

创建的文件对每个角色（用户、组、其他）具有写入权限，而仅对用户和组具有读取权限。我认为这不是操作系统锁，因为如果我尝试更改执行此代码的权限

```
Runtime.getRuntime().exec("chmod 666 FILE_PATH") 
```

它为每个角色设置读写权限。

正常吗？“谁是”扮演他人角色的人？为什么第一条指令没有设置“其他”的读取权限？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:24:02.297

> 正常吗？

是的。

> “谁是”扮演他人角色的人？

设备上的所有应用程序，而不是您的应用程序。

> 为什么第一条指令没有设置“其他”的读取权限？

因为你没有要求它。用于`MODE_WORLD_READABLE`设置读取访问位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:04:03.363

“Android 是一个特权分离的操作系统，其中每个应用程序都以不同的系统身份（**Linux 用户 ID 和组 ID**）运行。系统的各个部分也被分成不同的身份。Linux 从而将应用程序彼此隔离开来，并与系统。”

[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

此外，以下是一些研究结果：

[http://elinux.org/Android_Security#Users_and_groups](http://elinux.org/Android_Security#Users_and_groups)

# c# - 创建不干扰 WPF 窗口的单独线程 MessageBox 的最佳方法？

> ID：12961201
> 
> 赞同：2
> 
> 时间：2012-10-18T18:22:04.257
> 
> 标签：c#, wpf, messagebox

我有一个窗口，它有让用户填写值的字段，但是当我显示一个 MessageBox 告诉用户某些字段无效时，它会阻止用户从 MessageBox 更改为窗口。

我将如何创建 MessageBox 以便它允许在拥有 MessageBox 的同时访问窗口？我应该多线程吗？有没有办法让像 MessageBox 这样的对象不会锁定应用程序的其余部分？

代码：

```
 string unfilled = @"The following fields are mandatory and are required to continue:";
 bool invalid = false;
 foreach(Field f in _view.FormFields) {
      if(f.IsMandatory > 0 && !f.IsValid) {
           unfilled += "\n" + f.LongDisplay;
           foreach(string s in f.ErrorMessages) {
                unfilled += "\n\t" + s;
           }
           invalid = true;
      }
 }

 if(invalid) {
      MessageBox.Show(unfilled, "Invalid Submission"); <-- locks up WPF application
      return;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:24:40.343

MessageBox 对于显示它的表单是模态的。

作为一种解决方法，您始终可以显示一个单独的 wpf 表单。或者，您可以在当前所在的表单上显示错误文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:34:14.817

在这种情况下，听起来您可能会更好地在 wpf 表单上显示文本。我不确定带有浮动验证消息框的 UI 是否非常直观。

更好的是查看 wpf 开箱即用支持的验证内容，以突出显示需要输入的所需项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:37:09.980

您可以在标记的底部定义一个单独的 Grid 并通过将可见性设置为 visible 来向您的用户显示带有消息的网格。然后捕获窗口的鼠标单击，如果显示消息的网格可见，则将可见性设置为隐藏。下面是弹出网格的示例。

```
<Grid x:Name="MyMessageBox" Visibility="Hidden">
        <Grid Background="Black" Opacity="0.5"/>
        <Border
        MinWidth="250"
        Background="Orange" 
        BorderBrush="Black" 
        BorderThickness="1" 
        CornerRadius="0,55,0,55" 
        HorizontalAlignment="Center" 
        VerticalAlignment="Center">
            <StackPanel>
                <TextBlock Margin="5" Text="" Name="MessageText" FontWeight="Bold" FontFamily="Cambria" />
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid> 
```

# c++ - 1 IntelliSense：不存在从“bool”转换为“std::basic_string”的合适构造函数 , 标准::分配器 >"

> ID：12961205
> 
> 赞同：0
> 
> 时间：2012-10-18T18:22:46.937
> 
> 标签：c++, string, validation

嘿，我在尝试验证字符串时遇到此错误。基本上我希望游戏在用户输入有效名称之前不会继续。约翰、玛丽等……而不是数字 123434 等……

这是我的代码：

```
string input1 ="What is your name ?\n";
    string name = getString(input1);//The error is in the getString.

bool getString(string str)
{
  for (int i = 0; i < str.size(); i++)
  {
   if (isdigit(str[i]))
      return false;
   }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:25:33.213

```
 string name = getString(input1);//The error is in the getString. 
```

您不能将 bool 转换为字符串或将 a 转换`bool`为`string`，没有`implicit conversion`. 也许你真的想返回一个字符串。我不确定你命名你的函数`getString`，但你返回一个`bool`.

除非您有一个方便的名称列表并将输入与数据库、文件等进行比较。比较输入可能很困难。如果用户输入**Dsjdksdksdksdskd**怎么办？

帮助/回答您的问题：

```
if(isDigitInString(name))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:30:01.633

you trying to assign a bool value to a string hence an error. You should write something like this -

```
 if(getString(input1))
    {
       // code which continues the game
    } 
    else
    {
       // show some error message or ask for input again 
    } 
```

# java - 获取对网站的请求返回错误

> ID：12961207
> 
> 赞同：0
> 
> 时间：2012-10-18T18:22:59.713
> 
> 标签：java, sockets, get-request

我试图向网站发送获取请求，但总是返回错误 400 错误请求。我想知道我的获取请求是否错误。这里是;

```
socketOut.println("GET " + req.url + " HTTP/1.1\r\n");
socketOut.flush(); 
```

我可以通过使用 URLConnection 来做到这一点，但作为第二种方式，我正在使用套接字。所以我正在发送这个请求并读取字节。我检查了它从网站返回给我的内容，当然它返回了错误的请求错误页面。有什么建议吗？顺便说一句，req.url 返回的 url 不是 /asd.html 而是这个 www.stackoverflow.com/asd.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:29:33.597

`println`可以`\n`用作新行而不是`\r\n`可能需要的行。尝试`\r\n`直接使用。

HTTP 1.1 需要`Host`标头。尝试：

```
socketOut.print("GET " + req.url + " HTTP/1.0\r\n\r\n"); 
```

或者：

```
socketOut.print("GET " + req.url + " HTTP/1.1\r\n");
socketOut.print("Host: " + req.host + "\r\n");
socketOut.print("\r\n"); 
```

# asp.net - 子文件夹中的 .NET 基本 href 和样式表链接

> ID：12961209
> 
> 赞同：2
> 
> 时间：2012-10-18T18:23:02.897
> 
> 标签：asp.net, iis, href, base, relative-url

我想我会使用`base href`标签来让我的相对 URL 在不同的安装上工作。

在我的母版页中，我有：

```
<base href="http://localhost/myproject/" />
<link rel="stylesheet" type="text/css" runat="server" href="css/main.css" />
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

当我打开时效果很好`http://localhost/myproject/default.aspx`，css路径可以很好地解析，例如：`http://localhost/myproject/css/main.css`

但后来我有一个子文件夹，报告。当我导航到`http://localhost/myproject/reports/default.aspx`并查看源代码时，我看到的是：

```
<base href="http://localhost/myproject/" />
<link rel="stylesheet" type="text/css" href="../css/main.css" />
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

某些东西已将 注入`../`到标签的`href`属性中`link`，这意味着它正在解析为：`http://localhost/css/main.css`未找到。

这很奇怪，因为它按我对脚本标签的预期工作；只是链接标签得到了这种注入。我在 IE 和 Chrome 中查看了源代码，两者都是相同的，所以我认为是 IIS/.NET 正在这样做，但他们不应该真正触及 HTML，因为它不是`runat="server"`. 稍微玩一下，我看到母版页上的链接标签被修改，但不是脚本标签（如果它们是没有前导“/”的相对 URL）。我认为这是因为它们是“src”属性而不是“href”属性。因此，拥有/不拥有`base href`将修复一种类型，但会破坏另一种类型。

我疯了，这是一个错误，还是我拿错了？

编辑：我实际上并没有对基本标签的 href 进行硬编码。我正在写出从数据库表加载到应用程序内存的设置值。所以它实际上是在做：`<base href="<%=Settings.Configuration.website_rooturl%>" />`在我的开发机器上，值可能在哪里，`http://localhost/`或者`http://localhost/project/`在一个客户端站点上它在`http://www.clientsite.com/`另一个客户端站点上，它是一个虚拟目录`http://www.clientsite2.com/project/`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:37:41.693

```
<link href="<%= ResolveClientUrl("~/css/main.css") %>" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:43:47.623

尝试使用`~`，如`<link rel="stylesheet" type="text/css" href="~/css/main.css" />`

在 ASP.NET 应用程序中，`~`指的是应用程序的根目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:54:56.713

问题显然是这样的。因为我有一个`head`带有 的标签`runat="server"`，所以`link`样式表和网站图标标签被视为 HtmlLink 控件，因此 href 属性会以不同的方式呈现（使用 ../ 注入）。

这似乎解决了它，因为内联代码中的空双引号会强制它作为 HTML 控件输出，而不是 HtmlLink ASP.NET Web 控件：

```
<base href="http://localhost/myproject/" />
<link rel="stylesheet" type="text/css" runat="server" href="<%=""%>css/main.css" />
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

奇怪，但真实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:47:02.533

`~`使用 ' ' (tilda) 运算符从根目录解析它。您还需要为此添加`runat="Server"`属性：

```
<link rel="stylesheet" type="text/css" runat="server" 
    href="~/css/main.css" runat="server" /> 
```

您的站点不需要数据库中的基本标记值即可在不同的安装上工作。完全失去它。您还可以在不同的服务器上以任何方式配置虚拟目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-20T21:06:11.260

我意识到这是一个非常古老的问题，但我今天（最初发布五年后）遇到了同样的问题，我能够像这样解决它。

```
<%="<base href='" + Page.ResolveUrl("~/") + "'/>" %>
<!-- or however you want to get the base --> 
```

显然，当在页面中找到该标记时，ASP.NET 会对其进行解释`base`，并对其他服务器端标记执行操作。所以，我只是做了它，以便引擎不会将其视为控件。这是一个黑客，但它的工作。

除了 OP 的`<link>`标签外，`<asp:ImageButton>`标签也同样受到影响。这个黑客修复了两者。

# sql - 在 SQL 字符串中转义 & 字符

> ID：12961215
> 
> 赞同：169
> 
> 时间：2012-10-18T18:23:10.313
> 
> 标签：sql, oracle, escaping, sqlplus

我试图在我的 sql 数据库中按名称查询某一行，它有一个 & 符号。我试图设置一个转义字符，然后转义 & 符号，但由于某种原因，这不起作用，我不确定我的问题到底是什么。

```
Set escape '\'
    select * from V1144engine.T_nodes where node_id in(
    select node2_id from V1144engine.T_edges where node1_id in(
    select node2_id from V1144engine.T_edges where node1_id in(
    select node2_id from V1144engine.T_edges where node1_id = 
      (select node_id from V1144engine.T_nodes where node_name = 'Geometric Vectors \& Matrices')))
    and edge_type_id = 1)
    and node_type_id = 1
    and node_id in (
    select node2_id from V1144engine.T_edges where node1_id =
      (select node_id from V1144engine.T_nodes where node_name = 'Algebra II')
    and edge_type_id = 2); 
```

[尽管这对这个问题](https://stackoverflow.com/questions/118190/how-do-i-ignore-ampersands-in-a-sql-script-running-from-sql-plus)有类似的解决方案，但问题的提出却截然不同。他们最终可能会得到相同的解决方案，但这并不意味着问题是相同的。

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-10-18T18:42:37.883

代替

```
node_name = 'Geometric Vectors \& Matrices' 
```

采用

```
node_name = 'Geometric Vectors ' || chr(38) || ' Matrices' 
```

38 是 & 符号的 ascii 代码，在这种形式下，它将被解释为字符串，仅此而已。我试过了，它奏效了。

另一种方法可能是使用 LIKE 和下划线而不是 '&' 字符：

```
node_name LIKE 'Geometric Vectors _ Matrices' 
```

你也能找到其他记录的机会，仅在这一个角色中有所不同，这是非常低的。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-10-18T18:28:06.563

[Escape`\`默认](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#BGBFAHDB)设置为，无需设置；但如果你这样做，不要用引号括起来。

& 是 SQL*Plus[替换变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#sthref453)标记；但是您可以[更改它](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2698854)，或者在您的情况下更有用的是完全关闭它，方法是：

```
set define off 
```

那么你根本不需要费心逃避价值。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-10-18T18:27:18.580

您可以使用

```
set define off 
```

使用它不会提示输入

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-12-05T19:32:59.393

直接来自 oracle sql 基础书籍

```
SET DEFINE OFF
select 'Coda & Sid' from dual;
SET DEFINE ON 
```

如果不设置定义，如何逃脱它。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-10-15T10:55:24.127

为了逃脱`&`，您可以尝试以下方法：-

1.  `set scan off`
2.  `set define off`
3.  `set escape on` 然后替换`&`为`\&`
4.  替换`&`为`&&`

其中一个应该至少可以工作。

*另外，如果您使用的是 PL/SQL 开发人员，那么SQL 窗口底部有 &**图标，请前往那里并****禁用**它*。请注意，在旧版本中，此选项不存在。

*还要确保 set define off 写在脚本的开头。*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-15T14:19:53.307

```
set escape on
... node_name = 'Geometric Vectors \& Matrices' ... 
```

或者：

```
set define off
... node_name = 'Geometric Vectors & Matrices' ... 
```

第一个允许您使用反斜杠来转义 &。

第二个关闭并“全局”（无需在任何地方添加反斜杠）。您可以通过和从该行再次打开它，`set define on`与号将恢复其特殊含义，因此您可以在脚本的某些部分而不是其他部分将其关闭。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-08T12:51:50.627

这也有效：

`select * from mde_product where cfn = 'A3D"&"R01'`

`&`您通过在字符串中包含双引号来定义为文字`"&"`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-26T09:15:41.163

```
REPLACE(<your xml column>,'&',chr(38)||'amp;') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-14T19:07:18.977

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-07T06:34:53.437

```
--SUBSTITUTION VARIABLES
-- these variables are used to store values TEMPorarily.
-- The values can be stored temporarily through
-- Single Ampersand (&)
-- Double Ampersand(&&)
-- The single ampersand substitution variable applies for each instance when the
--SQL statement is created or executed.
-- The double ampersand substitution variable is applied for all instances until
--that SQL statement is existing.
INSERT INTO Student (Stud_id, First_Name, Last_Name, Dob, Fees, Gender)
VALUES (&stud_Id, '&First_Name' ,'&Last_Name', '&Dob', &fees, '&Gender');
--Using double ampersand substitution variable
INSERT INTO Student (Stud_id,First_Name, Last_Name,Dob,Fees,Gender)
VALUES (&stud_Id, '&First_Name' ,'&Last_Name', '&Dob', &&fees,'&gender'); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-11-26T22:37:17.687

I know it sucks. None of the above things were really working, but I found a work around. Please be extra careful to use spaces between the apostrophes [ ' ], otherwise it will get escaped.

```
SELECT 'Hello ' '&' ' World';

Hello & World 
```

You're welcome ;)

# floating-point - 单精度浮点求反的位级表达式

> ID：12961218
> 
> 赞同：-1
> 
> 时间：2012-10-18T18:23:14.957
> 
> 标签：floating-point, bit-manipulation, unsigned-integer

所以我很难实现这个想法。我基本上只是想接受论点'uf'并否定它。我将参数视为 32 位的无符号整数，这相当于单精度浮点数的外观。应该工作相同：有符号位，8 位指数，23 位小数。

但是，当参数为 NaN 时，我只需要返回参数即可。理想情况下，我希望能够在没有任何铸造或高级操作的情况下实现这一点。显然，我应该能够只用按位运算和整数/无符号运算（if、while、||、&&）来做到这一点。

我不知道从哪里开始？我是否只需要提取“uf”的每个部分并分别否定它们（使用按位运算符），然后在最后将它们全部加在一起？我可能会使用 (~uf) + 1 来否定。

对于 NaN，我认识到我只需要检查 8 位部分（exp）中的所有 1 以及小数部分中除 0 之外的任何内容（否则它被认为是无穷大）。

作为重申，这是在 C 中为 32 位系统完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:54:24.117

您所要做的就是翻转符号位。IE

```
x ^ 0x80000000 
```

如果值是 NaN，即使翻转符号位，它仍然是 NaN。

求反不被认为是要求您返回与输入值相同的 NaN 的浮点运算，因此这通常由编译器生成用于浮点求反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:34:09.977

```
x ^                        // flip signbit if not NaN
    (0x80000000 &          // isolate the signbit
      ~(                   // together, set signbit iff not NaN
         ((x & expmask) + expone) & // sets the signbit iff exp == 11111111
         -(x & mantmask))) // sets signbit only if the mantissa bits aren't zero 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:53:20.123

我实际上能够找到正确的解决方案。所有这些想法都有帮助。然而，我们必须运行一个检查器来验证我们的代码，唯一的错误是当我有一个零作为有符号位而 NaN 是其他的时候。因此我检查 (frac) != 0。

```
unsigned float_neg(unsigned uf) 
{

unsigned exp = (uf >> 23) & 0xFF;  //get only the exponential part of the number
unsigned frac = (uf << 9);  //get only the fractional part of the number
if ((exp == 0xFF) && (frac) != 0) 
{
  return uf; //NaN so return 'uf'
}

return uf ^ (1 << 31);  //just apply a simple sign change to the 's' component
} 
```

# magento-1.5 - Magento Google Analytics 电子商务跟踪不起作用

> ID：12961221
> 
> 赞同：2
> 
> 时间：2012-10-18T18:23:36.780
> 
> 标签：magento-1.5

在 Magento 1.5 上，我注意到电子商务跟踪不适用于许多网站。我查看了下面的 /core/Mage/GoogleAnalytics/Block/Ga.php 代码：

```
protected function _getOrdersTrackingCode()
{
    $orderIds = $this->getOrderIds();
    if (empty($orderIds) || !is_array($orderIds)) {
        return;
    }
    $collection = Mage::getResourceModel('sales/order_collection')
        ->addFieldToFilter('entity_id', array('in' => $orderIds))
    ;
    $result = array();
    foreach ($collection as $order) {
        if ($order->getIsVirtual()) {
            $address = $order->getBillingAddress();
        } else {
            $address = $order->getShippingAddress();
        }
        $result[] = sprintf("_gaq.push(['_addTrans', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s']);",
            $order->getIncrementId(), Mage::app()->getStore()->getFrontendName(), $order->getBaseGrandTotal(),
            $order->getBaseTaxAmount(), $order->getBaseShippingAmount(),
            $this->jsQuoteEscape($address->getCity()),
            $this->jsQuoteEscape($address->getRegion()),
            $this->jsQuoteEscape($address->getCountry())
        );
        foreach ($order->getAllVisibleItems() as $item) {
            $result[] = sprintf("_gaq.push(['_addItem', '%s', '%s', '%s', '%s', '%s', '%s']);",
                $order->getIncrementId(),
                $this->jsQuoteEscape($item->getSku()), $this->jsQuoteEscape($item->getName()),
                null, // there is no "category" defined for the order item
                $item->getBasePrice(), $item->getQtyOrdered()
            );
        }
        $result[] = "_gaq.push(['_trackTrans']);";
    }
    return implode("\n", $result);
} 
```

此代码测试成功页面上是否有 orderId，如果有，则继续读取交易信息。我注意到的是：

```
 $orderIds = $this->getOrderIds(); 
```

无论如何都不会返回数据。我不知道如何进行。

# asp.net-mvc - 如何使用 BreezeJs 在 WebAPI MVC 4 中进行分页

> ID：12961222
> 
> 赞同：0
> 
> 时间：2012-10-18T18:23:37.813
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, breeze

我有一个 WebApi 控制器，并添加了来自 BreezeJs 的过滤器以支持可查询的请求，例如 $orderby=DateAdded&$top=8。

```
 GlobalConfiguration.Configuration.Filters.Add(
      new Breeze.WebApi.ODataActionFilter()); 
```

一切正常。这只给出8个结果。我需要做些什么来添加这样的总计数也与结果一起返回？

更新

```
 public class ODataHandler : DelegatingHandler
  {
      protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
      {
          return base.SendAsync(request, cancellationToken).ContinueWith(
            task =>
            {
                var response = task.Result;

                if (ResponseIsValid(response) && ShouldInlineCount(request))
                {
                    object responseObject;
                    response.TryGetContentValue(out responseObject);

                    if (responseObject is IQueryable)
                    {
                        var renum = responseObject as IEnumerable<object>;

                        if (renum != null)
                        {
                            response = request.CreateResponse(HttpStatusCode.OK, new ODataMetadata<object>(renum, renum.Count()));
                        }
                    }
                }

                return response;
            });
      }
      private bool ShouldInlineCount(HttpRequestMessage request)
      {

        var queryParams = request.RequestUri.ParseQueryString();

        var inlinecount = queryParams["$inlinecount"];

        return string.Compare(inlinecount, "allpages", true) == 0;

       }

      private bool ResponseIsValid(HttpResponseMessage response)
      {
          if (response == null || response.StatusCode != HttpStatusCode.OK || !(response.Content is ObjectContent)) return false;
          return true;
      }
  } 
```

这是我到目前为止想出的。但问题是过滤器在处理程序启动之前已经将 TOP 8 添加到请求中。所以计数将是 8，而不是总数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:13:59.993

很好的问题。当前版本的 Breeze 中的 OData 支持不理解 [OData 2.0 的 $inlinecount 参数](http://www.odata.org/documentation/uri-conventions#InlinecountSystemQueryOption)，我认为这是您正在寻找的。它在积压中。[请在 Breeze 用户声音上](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3273039-support-inlinecount-in-queries)投票赞成这个想法。

# deployment - RazorGenerator.Mvc.dll 部署时未加载

> ID：12961224
> 
> 赞同：6
> 
> 时间：2012-10-18T18:23:43.497
> 
> 标签：deployment, asp.net-mvc-4, razorgenerator

使用 mvc.razor 生成器一切正常。我的图书馆项目中的视图在我的网站上显示得很好。它是一个 .net 4.0、MVC4、EF5 项目。应用程序池在 IIS 中设置为 .net 4.0。

当我部署到服务器时，当它尝试加载 PrecompiledMvc​​Engine 类型时出现异常。这是一个例外（我在附件中附上了错误的完整输出）：

```
Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 

Stack Trace: 

[ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.]
System.Reflection.RuntimeModule.GetTypes(RuntimeModule module) +0
System.Reflection.Assembly.GetTypes() +159
RazorGenerator.Mvc.PrecompiledMvcEngine..ctor(Assembly assembly, String baseVirtualPath) +1209
RazorGenerator.Mvc.PrecompiledMvcEngine..ctor(Assembly assembly) +53
MyProj.Common.App_Start.RazorGeneratorMvcStart.Start() in E:\UserFiles\sheam\Documents\Visual Studio 2010\Projects\MyProj\Project.Common_vs2010\App_Start\RazorGeneratorMvcStart.cs:11 
```

如您所见，这来自我的共同项目。

下面是 bin 目录的内容：

```
2012-10-17 09:06 PM <DIR> .
2012-10-17 09:06 PM <DIR> ..
2012-10-10 12:51 AM 105,528 Antlr3.Runtime.dll
2012-10-09 07:05 PM 1,118,296 EntityFramework.dll
2012-10-16 01:26 PM 359,424 MyProj.Common_vs2010.dll
2012-10-16 01:26 PM 112,128 MyProj.Common_vs2010.pdb
2012-10-09 06:46 PM 45,416 Microsoft.Web.Infrastructure.dll
2012-10-17 09:06 PM 29,696 MyProj.dll
2012-10-17 09:06 PM 42,496 MyProj.pdb
2012-10-13 08:04 PM 15,872 Mvc.Mailer.dll
2012-10-09 06:46 PM 374,784 Newtonsoft.Json.dll
2012-10-09 06:56 PM 15,872 RazorGenerator.Mvc.dll
2012-10-09 06:46 PM 180,832 System.Net.Http.dll
2012-10-09 06:46 PM 168,544 System.Net.Http.Formatting.dll
2012-10-09 06:46 PM 16,480 System.Net.Http.WebRequest.dll
2012-10-09 06:46 PM 138,328 System.Web.Helpers.dll
2012-10-09 06:46 PM 323,168 System.Web.Http.dll
2012-10-09 06:46 PM 73,312 System.Web.Http.WebHost.dll
2012-10-09 06:46 PM 506,976 System.Web.Mvc.dll
2012-10-10 12:51 AM 54,912 System.Web.Optimization.dll
2012-10-09 06:46 PM 264,792 System.Web.Razor.dll
2012-10-09 06:46 PM 41,048 System.Web.WebPages.Deployment.dll
2012-10-09 06:46 PM 204,376 System.Web.WebPages.dll
2012-10-09 06:46 PM 39,512 System.Web.WebPages.Razor.dll
2012-10-09 06:56 PM 8,704 WebActivator.dll
2012-10-10 12:51 AM 963,640 WebGrease.dll
24 File(s) 5,204,136 bytes
2 Dir(s) 1,519,661,289,472 bytes free 
```

RazorGenerator.Mvc.dll 存在在那里，所以我不确定为什么它不能加载类型。

如果 W7 Pro，服务器是全新安装的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T18:34:02.987

事实证明，问题实际上并不是剃须刀发电机。问题是 RG 通过反射加载的类缺少正确的程序集。这是两个 Webmatrix 组件。

事实证明，即使设置了本地复制（在库项目中），如果它存在于构建机器的 GAC 中，Visual Studio 2010 和 2012 也不会实际复制它。在我的情况下，构建机器安装了该程序集（通过 MVC3），但 Web 服务器没有。我最终将这些程序集添加到我的 Web 项目（而不是库）中，并将它们设置为本地复制。

这是一个令人讨厌的错误。我构建了一个特殊的异常处理程序，如果它再次发生，它会迅速指出这个问题。我的 RazorGeneratorMvcStart 中的 Start() 函数现在看起来像这样：

```
public static void Start() 
{
    PrecompiledMvcEngine engine = null;
    try
    {
        engine = new PrecompiledMvcEngine(typeof(RazorGeneratorMvcStart).Assembly)
        {
            UsePhysicalViewsIfNewer = HttpContext.Current.Request.IsLocal
        };
    }
    catch (System.Reflection.ReflectionTypeLoadException e)
    {
        StringBuilder exceptions = new StringBuilder("The following DLL load exceptions occurred:");
        foreach (var x in e.LoaderExceptions)
          exceptions.AppendFormat("{0},\n\n", x.Message);
        throw new Exception(string.Format("Error loading Razor Generator Stuff:\n{0}",exceptions));
    }

    ViewEngines.Engines.Insert(0, engine as PrecompiledMvcEngine);

    // StartPage lookups are done by WebPages. 
    VirtualPathFactoryManager.RegisterVirtualPathFactory(engine as PrecompiledMvcEngine);
} 
```

不好，但我会弄清楚如何让它看起来更好，并且以后可以重复使用。:)

# c++ - 如何在 C++11 中查找持续时间（时间）单位

> ID：12961226
> 
> 赞同：0
> 
> 时间：2012-10-18T18:23:46.833
> 
> 标签：c++, templates, time, c++11

我想要一个`PrintDuration`函数来打印任务花费了多长时间，并允许用户指定打印的单位。示例用法：

```
auto start = std::chrono::system_clock::now();
std::this_thread::sleep_for(std::chrono::seconds(3));
PrintDuration<std::chrono::microseconds>(std::cout, start, "Waited for:"); 
```

它会打印出类似的东西：`"Waited for: 3000000μs\n"`

我的问题是：如何找到用户提供的单位？

目前，我正在使用以下内容：

```
template <class T>
std::intmax_t GetNum(const T& duration)
{
    return T::period::num;
}

template <class T>
std::intmax_t GetDen(const T& duration)
{
    return T::period::den;
}

typedef std::chrono::time_point<std::chrono::system_clock> TimePoint_t;

template <class Duration = std::chrono::seconds>
void PrintDuration(std::ostream& output,
                   const TimePoint_t& start,
                   std::string message) 
{
    auto duration = std::chrono::system_clock::now() - start;
    auto convertedDuration = std::chrono::duration_cast<Duration>(duration);
    auto count = convertedDuration.count();

    std::string units("");

    if (GetNum(convertedDuration) == 1)
    {
        if (GetDen(convertedDuration) == std::nano::den)    
            units = "ns";
        else if (GetDen(convertedDuration) == std::micro::den)
            units = "\u03BCs"; // us
        else if (GetDen(convertedDuration) == std::milli::den)
            units = "ms";
        else if (GetDen(convertedDuration) == 1)
            units = "s";
        else
            units = "";
    }
    else if(GetDen(convertedDuration) == 1)
    {
        if (GetNum(convertedDuration) == 60)
            units = "m";
        else if (GetNum(convertedDuration) == 3600)
            units = "h";
        else
            units = "";
    }

    output << message << ' ' << count << units << '.' << std::endl;
} 
```

虽然这很好用，但它似乎很冗长。我查看了 C++ 的文档，但找不到。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:06:00.007

你可以这样写：

```
template <typename T>
const wchar_t* GetUnits(T) { return L"unknown units"; }

template<>
const wchar_t* GetUnits(std::chrono::nanoseconds) { return L"ns"; }

template<>
const wchar_t* GetUnits(std::chrono::microseconds) { return L"\u03BCs"; }

template<>
const wchar_t* GetUnits(std::chrono::milliseconds) { return L"ms"; }

typedef std::chrono::time_point<std::chrono::system_clock> TimePoint_t;

template <class Duration>
void PrintDuration(std::wostream& output, const TimePoint_t& start, const std::wstring& message) 
{
    auto duration = std::chrono::system_clock::now() - start;
    auto convertedDuration = std::chrono::duration_cast<Duration>(duration);

    output << message << L" " << convertedDuration.count() << GetUnits(convertedDuration) << L"." << std::endl;
}

int main(int /*argc*/, char* /*argv*/[])
{
    auto start = std::chrono::system_clock::now();
    std::this_thread::sleep_for(std::chrono::seconds(3));
    PrintDuration<std::chrono::microseconds>(std::wcout, start, L"Waited for:");
    return 0;
} 
```

# python - 创建许多独特的事件

> ID：12961230
> 
> 赞同：2
> 
> 时间：2012-10-18T18:23:56.513
> 
> 标签：python, python-2.7, tkinter, unique

我正在编写一个有很多按钮（超过 100 个）的程序，每个按钮都需要一个唯一的结果，但所有结果都相似，这是第一个按钮的代码

```
box1= 'filepath to text file'
def openfile(filename):
    filetxt = (open(filename,"r").read())
    return filetxt
    var.set(filetxt)

def Box1():
    var.set(openfile(box1))

openfile(box1)
window1 = Tk()
window1.geometry('450x450')

var = StringVar()

Button1 = Button(donut,text = "Box #1", command= Box1 )
Button1.pack() 
```

每个按钮都会做同样的事情，但是访问不同的文件，有没有比简单地为每个按钮编写一个独特的回调函数更有效的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:27:46.593

通常，您会将文件放在列表中：

```
list_of_files = ... 
```

然后您将创建一个函数来创建一个打开文件输入的按钮：

```
def file_open_button(filename):
    b = Button(donut, text = 'open {0}'.format(filename), command = lambda: openfile(filename))
    return b 
```

现在遍历您的文件列表并创建按钮，然后打包：

```
for f in list_of_files:
    button = file_open_button(f)
    button.pack() 
```

也许您缺少的是对`lambda`（匿名）函数的理解。lambda 函数很像常规函数：

```
def foo(x):
    return x*x

bar = lambda x: x*x 
```

上述陈述非常相似。例如`foo(x) == bar(x)`将永远是`True`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:29:09.933

您的所有按钮都可以共享一个回调。您可以使用[lambda](http://docs.python.org/reference/expressions.html#lambda)将文件名传递给回调。例如：

```
path="/path/to/the/file"
b = Button(..., command=lambda f=path: openfile(f)) 
```

另一种选择是使用[functools.partial](http://docs.python.org/library/functools.html#functools.partial)。有些人认为这比 lambda 更具可读性：

```
b = Button(..., command=functools.partial(openfile, path)) 
```

# opengl - 相当于 texelFetchOffset 的 CG

> ID：12961232
> 
> 赞同：4
> 
> 时间：2012-10-18T18:24:04.397
> 
> 标签：opengl, glsl, shader, cg-language

该功能的`CG`等价物是什么？`GLSL``texelFetchOffset`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:35:38.693

根据[nVidia 文档](http://http.developer.nvidia.com/Cg/tex2Dfetch.html)：

`tex2Dfetch`- 在给定的采样器中执行未过滤的纹理查找。

使用以下重载之一：

```
float4 tex2Dfetch(sampler2D samp, int4 s)
float4 tex2Dfetch(sampler2D samp, int4 s, int texelOff)

int4 tex2Dfetch(isampler2D samp, int4 s)
int4 tex2Dfetch(isampler2D samp, int4 s, int texelOff)

unsigned int4 tex2Dfetch(usampler2D samp, int4 s)
unsigned int4 tex2Dfetch(usampler2D samp, int4 s, int texelOff) 
```

参数

```
samp
    Sampler to lookup. 
s
    Coordinates to perform the lookup. 
    The level of detail is stored in the last component of the coordinate vector. 
texelOff
    Offset to be added to obtain the final texel. 
```

# android - PhoneGap 中是否有用于 Android 键盘“Go”按钮的事件监听器？

> ID：12961234
> 
> 赞同：2
> 
> 时间：2012-10-18T18:24:10.937
> 
> 标签：android, cordova, sencha-touch-2

当我单击输入字段时，我得到了 Android 键盘。在键盘上有一个“Go”，当我点击它时它只是隐藏了键盘。我想要“开始”按钮来提交表单。我正在使用 Sencha Touch 2。PhoneGap 中是否有用于 Android 键盘“Go”按钮的事件监听器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T00:11:11.140

当使用“开始”按钮时，输入字段上的“动作”事件将触发。

文档位于： [http ://docs.sencha.com/touch/2-0/#!/api/Ext.field.Text-event-action](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Text-event-action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:41:27.393

您可以在下面的代码中插入您的逻辑：

```
$("#xyz").keyup(function(e){
    if(e.which == 13)
    { 
        submit();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:45:05.937

不，据我所知。但是，如果您愿意做一个小假设，您可以监听“hidekeyboard”事件。一旦用户单击 Go 按钮，键盘就会消失。此解决方案的唯一问题是键盘可能由于其他原因而消失。

# c# - C#/ASP.NET ActionLink/Functions/错误链接

> ID：12961238
> 
> 赞同：0
> 
> 时间：2012-10-18T18:24:31.623
> 
> 标签：c#, asp.net, database, actionlink

用户上传一个文件，然后由医生审查。然后医生上传他的文件，说明他们的评论，然后用户可以阅读文件。至少，他们应该能够。当医生上传文件时，会在用户文件夹中创建一个新目录，并将项目上传到该文件夹​​中。

现在的错误。在详细信息页面上，用户看到有一个文件链接可供下载，以便他们可以阅读医生的笔记。但是当他们单击链接时，链接返回 404。我们发现，如果我们从 Review 文件夹中删除文件并将其放在主用户目录中，则链接现在可以正常工作。显然链接没有指向正确的位置，但由于我不知道 .NET 或 C#，这已被证明是相当烦人的。

以下是 Details.cshtml 页面的部分原始代码：

```
<table>
      <tr>
           <th colspan="4" class="display-label">Uploaded Documents</th>

      </tr>
           <tr>
                <th>FileName</th>
                <th>Download Files</th>
           </tr>
           @foreach (var file in ((IEnumerable<MyCombinedQueryModel>)ViewBag.Files))
           {<tr>
                 <td>
                      @Html.ActionLink("Download", "Download", new { id = Model.PatientsId, name = file.FileName })
                 </td>
                 <td>
                      @file.FileName
                 </td>
            </tr>

           }<tr>
            <th colspan="4" class="display-label">Download reviewer suggestion document</th></tr>
      <tr>
           <th>FileName</th>
           <th>Download Files</th>
      </tr>
           @if(Model.reviewed)
           {
                foreach (var file in ((IEnumerable<MyCombinedQueryModel>) ViewBag.Path))
                {
                     <tr>
                          <td>
                               @Html.ActionLink("Download", "Download", new {id = Model.PatientsId, name = file.FileName})
                          </td>
                          <td>
                               @file.FileName
                          </td>
                     </tr>
                }
           }

 </table> 
```

以及来自 DoctorsController.cs 的部分

```
 //Download files string names
     public ActionResult Download(int? id, string name)
          {

               string fileName = name;

               var uploads = (from u in _db.Patients
                             where u.PatientsId == id
                             select u.FilesUrl).FirstOrDefault();

               if (uploads != null)
               {

                    string folder = Path.GetFullPath(uploads);
                    //HttpContext.Response.AddHeader("content-dispostion", "attachment; filename=" + fileName);
                    return File(new FileStream(folder +"/" + fileName, FileMode.Open), "content-dispostion", fileName);
               }

               throw new ArgumentException("Invalid file name of file not exist");
          } 
```

现在在我们的数据库中，我们有两个字段，FilesUrl 和 PathUrl。PathUrl 保存 Review 文件夹中已审阅文件的 URL。如果我是正确的，我认为正在发生的事情是它们都在调用仅链接到 FileUrl 的相同函数（下载）。我尝试在详细信息页面中将审核部分中的 actionLink 更改为“DownloadR”，然后复制并粘贴下载功能（将其重命名为 DownloadR 并将其更改为查找 PathUrl），但它仍然无法正常工作。

有没有人在这里看到任何问题或关于如何解决它的任何建议？提前感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:40:04.923

看起来 FilesUrl 与 PathUrl 的问题。如果患者上传的文件和 Dr 上传的文件位于不同的目录中，则此控制器方法不适用于两者。

我将向 Download 方法添加第三个参数，该参数指定要下载的文件是来自 Dr 还是患者。

```
public ActionResult Download(int? id, string name, bool reviewDirectory)
...
var uploads = (from u in _db.Patients
               where u.PatientsId == id
               select (reviewDirectory ? u.PathUrl : u.FilesUrl)).FirstOrDefault(); 
```

# android - 禁用列表视图复选框

> ID：12961242
> 
> 赞同：2
> 
> 时间：2012-10-18T18:24:41.573
> 
> 标签：android, listview

我正在使用`simple_list_item_checked`列表视图并以编程方式将检查设置为真/假。但是，当用户从列表中选择一个项目时，它会更改复选框的状态。

它只显示一秒钟，因为它立即重定向到另一个活动。

当用户点击它时，如何防止复选框发生变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T15:15:59.443

以编程方式将您的 CheckBox 可点击属性更改为 false，如下所示

```
theCheckBox.setClickable(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:04:00.090

如果你使用`onListItemClick()`这个`ListActivity`类作为你的`Activity`.

然后您可以使用作为参数传递的`setItemChecked()`方法`ListView`来控制复选框的状态。我在一个项目中使用了一个`simple_list_item_single_choice`列表视图，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:29:54.480

创建`AdapterView`simple_list_item_checked 的自定义实例。这将解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T13:02:02.463

我最终创建了一个自定义 ArrayAdapter 类，遵循本教程[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

但我没有使用 if String.equals(" ")，而是使用了一个名为 check 的布尔值。如果为真，请使用“选中框”图像，如果为假，请使用“未选中框”图像。

谢谢你们的帮助。我希望这对未来的人们有所帮助。

# xml - XSLT 删除 XML 中的元素实例

> ID：12961245
> 
> 赞同：1
> 
> 时间：2012-10-18T18:24:47.423
> 
> 标签：xml, xslt, xslt-2.0

我有一个 XML，我需要对其应用 XSL 以将其转换为具有不同架构版本的另一个 XML。架构的两个版本是 V1 和 V2。在我的架构版本 V1 中，ID 允许的最大实例数为 2，但在架构的版本 2 中，它已更改为 3。现在我将版本 2 中的 XML 降级为版本 1 中的 XML，所以我只想保留 2我最终的 XML 中的 ID 类型的实例。如果有人可以让我知道我们如何在 XSLT 中做到这一点，将不胜感激。

输入 XML

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
     <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v3">
         <NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT">

            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                            <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                        <NS2:ID>
                           <NS2:IDValue>01018</NS2:IDValue>
                           <NS2:IDQualifier>95</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                            <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                        <NS2:ID>
                           <NS2:IDValue>01019</NS2:IDValue>
                           <NS2:IDQualifier>96</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                            <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                             </NS2:Identification>
                             </NS2:Pharmacy>
                    </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:tns="http://www.test.com/Service/v3"
    xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT"
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="tns:*">
        <xsl:element name="{name()}" namespace="http://www.test.com/Service/v1">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>  
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>      
    </xsl:template>

</xsl:stylesheet> 
```

期望的输出：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v1">
         <NS2:Message xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" release="006" version="010">
            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                           <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                        <NS2:ID>
                           <NS2:IDValue>01018</NS2:IDValue>
                           <NS2:IDQualifier>95</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                            <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                            </NS2:Identification>
                             </NS2:Pharmacy>
                    </NS2:New>
                     </NS2:Identification>
                  </NS2:Pharmacy>
               </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

应用 XSLT 后我期望的第二个变体是修剪字符串。ID 实例的 IDRegion 为 3 个字符，我想在应用 XSLT 后将其修剪为 2 个字符“SC”。

所以输出类似

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
       <soapenv:Body>
          <tns:send xmlns:tns="http://www.test.com/Service/v1">
             <NS2:Message xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" release="006" version="010">
                <NS2:Body>
                   <NS2:New>
                      <NS2:Pharmacy>
                         <NS2:Identification>
                            <NS2:ID>
                               <NS2:IDValue>01017</NS2:IDValue>
                               <NS2:IDQualifier>94</NS2:IDQualifier>
                               <NS2:IDRegion>SC</NS2:IDRegion>
                               <NS2:IDState>CA</NS2:IDState>
                            </NS2:ID>
                            <NS2:ID>
                               <NS2:IDValue>01018</NS2:IDValue>
                               <NS2:IDQualifier>95</NS2:IDQualifier>
                               <NS2:IDRegion>SC</NS2:IDRegion>
                                <NS2:IDState>CA</NS2:IDState>
                            </NS2:ID>
                                </NS2:Identification>
                                 </NS2:Pharmacy>
                        </NS2:New>
                         </NS2:Identification>
                      </NS2:Pharmacy>
                   </NS2:New>
                </NS2:Body>
             </NS2:Message>
          </tns:send>
       </soapenv:Body>
    </soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:45:22.003

**这种转换（XSLT 1.0 和 XSLT 2.0）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>
 <xsl:template match="NS2:ID[position() > 2]"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <tns:send xmlns:tns="http://www.test.com/Service/v3">
            <NS2:Message release="006" version="010"
            xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT">
                <NS2:Body>
                    <NS2:New>
                        <NS2:Pharmacy>
                            <NS2:Identification>
                                <NS2:ID>
                                    <NS2:IDValue>01017</NS2:IDValue>
                                    <NS2:IDQualifier>94</NS2:IDQualifier>
                                    <NS2:IDRegion>SCA</NS2:IDRegion>
                                    <NS2:IDState>CA</NS2:IDState>
                                </NS2:ID>
                                <NS2:ID>
                                    <NS2:IDValue>01018</NS2:IDValue>
                                    <NS2:IDQualifier>95</NS2:IDQualifier>
                                    <NS2:IDRegion>SCA</NS2:IDRegion>
                                    <NS2:IDState>CA</NS2:IDState>
                                </NS2:ID>
                                <NS2:ID>
                                    <NS2:IDValue>01019</NS2:IDValue>
                                    <NS2:IDQualifier>96</NS2:IDQualifier>
                                    <NS2:IDRegion>SCA</NS2:IDRegion>
                                    <NS2:IDState>CA</NS2:IDState>
                                </NS2:ID>
                            </NS2:Identification>
                        </NS2:Pharmacy>
                    </NS2:New>
                </NS2:Body>
            </NS2:Message>
        </tns:send>
    </soapenv:Body>
</soapenv:Envelope> 
```

**产生想要的正确结果**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v3">
         <NS2:Message xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" release="006" version="010">
            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                           <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                        <NS2:ID>
                           <NS2:IDValue>01018</NS2:IDValue>
                           <NS2:IDQualifier>95</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                           <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                     </NS2:Identification>
                  </NS2:Pharmacy>
               </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

**说明**：

正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

**更新**：

在评论中，OP 添加了一个新要求：每个`NS2:IDRegion`都必须被截断为两个字符。

**这是实现新要求的更新转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  
 xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="NS2:IDRegion/text()">
      <xsl:value-of select="substring(.,1,2)"/>
    </xsl:template>
    <xsl:template match="NS2:ID[position() > 2]"/>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生所需的正确结果**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v3">
         <NS2:Message xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" release="006" version="010">
            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SC</NS2:IDRegion>
                           <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                        <NS2:ID>
                           <NS2:IDValue>01018</NS2:IDValue>
                           <NS2:IDQualifier>95</NS2:IDQualifier>
                           <NS2:IDRegion>SC</NS2:IDRegion>
                           <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                     </NS2:Identification>
                  </NS2:Pharmacy>
               </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

# vector - LoadingPanel - 等待向量和 WFS 加载

> ID：12961247
> 
> 赞同：0
> 
> 时间：2012-10-18T18:24:58.847
> 
> 标签：vector, openlayers, gis

我有带有 WFS 协议的矢量图层。而且因为我有大量数据，地图上加载功能之前还有一段时间。

所以我需要通过显示“等待”动画来告诉用户等待他们加载。

我发现了这个[https://gis.stackexchange.com/questions/26072/waiting-for-vector-wfs-loading](https://gis.stackexchange.com/questions/26072/waiting-for-vector-wfs-loading)

到目前为止没有运气尝试过。

这是我所做的：

*   我放置了 LoadingPanel.js

*   我添加了这个样式表：

    ```
    .olControlLoadingPanel {

            background-image:url(loading.gif);

            position: relative;

            width: 195px;

            height: 11px;

            background-position:center;

            background-repeat:no-repeat;

            display: none;

        }

     </style> 
    ```

*   最后添加了 LoadingPanel 控件：

`map.addControl(new OpenLayers.Control.LoadingPanel());`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:02:20.120

尝试这个 ：

*   修改你的样式表

    ```
    .olControlLoadingPanel {
        背景图像：url（加载.gif）；
        位置：相对；
        宽度：100%；
        高度：100%；
        背景位置：中心；
        背景重复：不重复；
        显示：无；
    }

    ```

*   将您的 LoadingPanel 控件添加到地图，然后使其可见

    ```
    var loadingPanel = new OpenLayers.Control.LoadingPanel();
    this.map.addControl(loadingPanel);
    //设置可见控件
    加载面板.show();

    ```

# php - PHP字符串解析错误，变量后有必要的分号

> ID：12961248
> 
> 赞同：4
> 
> 时间：2012-10-18T18:25:01.150
> 
> 标签：php, string

在我的 PHP 代码中，我有一个变量`$message`，其中包含要发送给我的消息，其中包含 post 变量。它应该在末尾有一个分号......但它给了我一个错误，说它是意外的，但我知道我需要它，因为没有它它就无法工作。我完全不知所措。希望这里有人可以帮助我。

错误信息：

```
PHP Parse error:  syntax error, unexpected ';' 
```

PHP 代码

```
if(!empty($_POST["name"]) && !empty($_POST["address"]) && !empty($_POST["city"]) && !empty($_POST["phone"]) && !empty($_POST["email"]) && !empty($_POST["type"]))
{
$message = "Name:" . $_POST["name"] . 
"Address:" . $_POST["address"] . 
"City:" . $_POST["city"] . 
"State:" . $_POST["state"] . 
"Zip Code:" . $_POST["zip"] . 
"Phone:" . $_POST["phone"] . 
"Email:" . $_POST["email"] . 
"Current Roof Type:" . $_POST["type"] . 
"Roof Age:" . $_POST["age"] .
"Is it leaking?:" . $_POST["leak"] . 
"Does it have hail damage?:" . $_POST["hail"] . 
"Insurance:" . $_POST["insurance"] . 
"Additional Comments:" . $_POST["extra"] . 
;                                          <---------------####Unexpected semicolon
$to = "emailasdasdasdasd";
$subject = "Free Estimate";
$from = "Guarantee Roofing";
$headers = "From:" . $_POST["name"];
mail($to,$subject,$message,$headers);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:26:23.877

```
"Additional Comments:" . $_POST["extra"] .  
                                         ^ 
```

Unnecessary concatenation operator -----------------here.

PHP is expecting a string/variable next to the concatenation operator and finds semicolon, which is reported **unexpected**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:26:27.403

```
"Additional Comments:" . $_POST["extra"] . 
                                         ^---- dangling concatenation
; 
```

you're telling PHP to concatenate a couple strings, and then terminate the statement without providing the second string.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T18:27:58.153

here is the problem

```
 "Additional Comments:" . $_POST["extra"] . 
 ; 
```

should be

```
 "Additional Comments:" . $_POST["extra"]   ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T18:26:55.677

There's an extra dot at the end of the string, if you delete the line breaks, you'd end up with

```
 ... . "Additional Comments:" . $_POST["extra"] . ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T18:27:00.857

You don't need that extra `.` after the last line which is implying concatenation.

Remove the . after this line:

```
"Additional Comments:" . $_POST["extra"] . 
```

# html - 将 HTML 元素 ID 转换为字符串以进行比较

> ID：12961249
> 
> 赞同：1
> 
> 时间：2012-10-18T18:25:02.413
> 
> 标签：html, string, comparison, string-conversion

是否可以在比较中使用以下 HTML 代码中的 this.id 的值？

```
<div id="Kids Bikes" class="album" onClick="javascript:loadPopupContent(this.id)">  
        <img src="images/kidsbikes/1.jpg" class="uitgelicht" >
        <div style="background-color:rgba(240, 124, 0, 0.6)" class="overlay"><p class="overlayx">Kids Bikes</p></div> 
</div> 
```

我正在制作相册。当访问者单击照片时，会显示一个弹出窗口，其中包含用户单击的相册照片的缩略图。此函数用于创建弹出窗口：

```
function loadPopupContent(id){
//centering with css
centerPopup();
//load popup
loadPopup();
// load content
loadContent(id); 
```

}

loadContent 函数看起来像这样，但它没有做任何事情。我认为这是因为我正在尝试将字符串与 HTML 元素进行比较，但我不确定。当我删除 if (albumname == 'AllroundBikes'){}else{} 语句时，一切正常。

```
function loadContent(eleId){
if (eleId != 0){

    var albumnaam = eleId.replace("-","");
    var albumname = albumnaam.replace(" ","");

    if (albumname == 'AllroundBikes'){ // 5 foto's
        $("#popupContent").html("<h1>" + eleId + "</h1>" +
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/1.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/1.jpg height='415' width='750'/></a>" + 
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/2.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/2.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailr' href='#thumb'><img src=images/" + albumname + "/3.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/3.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailr' href='#thumb'><img src=images/" + albumname + "/4.jpg class='uitgelichtvakr' /><span><img src=images/" + albumname + "/4.jpg height='415' width='750'/></a>" +
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/5.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/5.jpg height='415' width='750'/></a>");
    } 
    else if {       
        $("#popupContent").html("<h1>" + eleId + "</h1>" +
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/1.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/1.jpg height='415' width='750'/></a>" + 
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/2.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/2.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailr' href='#thumb'><img src=images/" + albumname + "/3.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/3.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailr' href='#thumb'><img src=images/" + albumname + "/4.jpg class='uitgelichtvakr' /><span><img src=images/" + albumname + "/4.jpg height='415' width='750'/></a>" +
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/5.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/5.jpg height='415' width='750'/></a>" +
        "<a class='thumbnail' href='#thumb'><img src=images/" + albumname + "/6.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/6.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailr' href='#thumb'><img src=images/" + albumname + "/7.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/7.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailr' href='#thumb'><img src=images/" + albumname + "/8.jpg class='uitgelichtvakr' /><span><img src=images/" + albumname + "/8.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailo' href='#thumb'><img src=images/" + albumname + "/9.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/9.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailo' href='#thumb'><img src=images/" + albumname + "/10.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/10.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailro' href='#thumb'><img src=images/" + albumname + "/11.jpg class='uitgelichtvak' /><span><img src=images/" + albumname + "/11.jpg height='415' width='750'/></a>" +
        "<a class='thumbnailro' href='#thumb'><img src=images/" + albumname + "/12.jpg class='uitgelichtvakr' /><span><img src=images/" + albumname + "/12.jpg height='415' width='750'/></a>");

} 
else {
    $("#popupContent").html("<h1>Empty</h1>");
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:29:29.703

这样，您就可以将元素的 id 视为文本。

```
 $(this).attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:28:49.747

是的，`this.id`在 HTML 中是完全可能的。但是我注意到您的元素 ID 之间有空格？这很不寻常——我不确定这是否合法，但一般语法是正确的。

编辑：HTML 中的点击处理程序是`onclick`（小写 c），这也可能是问题所在。

# c# - 异步回发的渲染控制问题

> ID：12961250
> 
> 赞同：0
> 
> 时间：2012-10-18T18:25:04.207
> 
> 标签：c#, javascript, asp.net, ajax

我在我的内容占位符中使用了这个量规。

[http://www.dariancabot.com/projects/jgauge_wip/](http://www.dariancabot.com/projects/jgauge_wip/)

脚本：

```
<link rel="stylesheet" href="Scripts/jgauge.css" type="text/css" />
<script type="text/javascript" src="Scripts/jquery-1.8.0.js"></script>
<script language="javascript" type="text/javascript" src="Scripts/jgauge-0.3.0.a3.js"></script>
<script language="javascript" type="text/javascript" src="Scripts/jQueryRotate.2.2.js"></script>
<script language="javascript" type="text/javascript" src="Scripts/excanvas.min.js"></script>
<script type="text/javascript">
    var demoGauge1 = new jGauge(); // Create a new jGauge.
    demoGauge1.id = 'jGaugeDemo1'; // Link the new jGauge to the placeholder DIV.
    $(document).ready(function () {
        demoGauge1.init(); // Put the jGauge on the page by initializing it.
    });
</script> 
```

标记：

```
<asp:UpdatePanel ID="up1" runat="server">
    <ContentTemplate>
        <div id="jGaugeDemo1" class="jgauge"></div>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="myBtn" />
    </Triggers>
</asp:UpdatePanel>
<asp:Button ID="myBtn" runat="server" Text="Refresh" /> 
```

我在母版页上有脚本管理器：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true"></asp:ScriptManager> 
```

但是在异步回发（点击'myBtn'）之后，仪表消失了。帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:29:35.200

由于更新面板中的 html 元素会在每次异步回发时重新创建，因此您需要在每个请求上重新生成仪表。

我没有那种仪表控制的经验，但这样的事情可以解决问题

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_endRequest(onEndRequest);

function onEndRequest(sender, args){    
   demoGauge1.init();       
} 
```

# c# - 创建文件并在 Excel 中打开会停止更新页面的能力

> ID：12961251
> 
> 赞同：0
> 
> 时间：2012-10-18T18:25:07.110
> 
> 标签：c#, asp.net, .net

我正在使用以下代码创建一个 HTML 表格，将其保存到 XLS 文件中，然后在 Excel 中打开它。

```
 public void ExportToSpreadsheet(DataTable table, string name)
    {
        HttpContext context = HttpContext.Current;
        context.Response.Clear();
        context.Response.Write("<table border=1>");

        context.Response.Write(Environment.NewLine);
        foreach (DataRow row in table.Rows)
        {
            context.Response.Write("<tr>");
            context.Response.Write("<td width=47>" + row[1].ToString().Replace(";", string.Empty) + "</td>");
            context.Response.Write("<td width=47>" + row[2].ToString().Replace(";", string.Empty) + "</td>");
            context.Response.Write("<td width=110>" + row[3].ToString().Replace(";", string.Empty) + "</td>");
            context.Response.Write("<td width=75>" + row[4].ToString().Replace(";", string.Empty) + "</td>");
            context.Response.Write("<td width=285>" + row[5].ToString().Replace(";", string.Empty) + "</td>");
            context.Response.Write("<td width=61>" + row[6].ToString().Replace(";", string.Empty) + "</td>");

            context.Response.Write("</tr>");
            context.Response.Write(Environment.NewLine);
        }
        context.Response.Write("</table>");
        context.Response.ContentType = "application/vnd.ms-excel";
        context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + name + ".xls");
        context.Response.End(); 
    } 
```

现在这段代码工作得很好，但是，它是从一个按钮调用的，我希望在报告运行后刷新该按钮所在的页面上的一些信息，但是 ExportToSpreadsheet 方法之后的任何代码都被完全忽略。

所以当我这样做时：

```
 ExportToSpreadsheet(dt, "MyReport");
 PopulateLastRun(); 
```

我可以在 PopulatetoLastRun() 上设置一个断点，但它永远不会到达那里。谁能告诉我为什么？有没有解决的办法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:32:56.867

当您`context.Response.End()`在当前响应上调用方法时，之后不会执行任何代码。

所以为了刷新文件使用下面的代码而不是调用`end()`.

```
context.Response.Flush(); 
```

# java - Stringbuffer、Stringbuilder什么时候用？

> ID：12961254
> 
> 赞同：1
> 
> 时间：2012-10-18T18:25:09.997
> 
> 标签：java, stringbuilder, stringbuffer

> **可能重复：**
> [Java 中的 StringBuilder 和 StringBuffer](https://stackoverflow.com/questions/355089/stringbuilder-and-stringbuffer-in-java)

选择标准`StringBuffer`和`StringBuilder`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:26:15.503

如果您肯定使用 Java 5 或更高版本，并且您绝对*不需要*在线程之间共享对象（我不记得*曾经*需要这样做），那么这`StringBuilder`是一个更好的选择。

基本上你应该尽可能地使用`StringBuilder`，以避免毫无意义的同步。诚然，大多数虚拟机处理无竞争同步的方式非常有效，但如果您一开始就不需要它...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T18:26:13.723

`StringBuilder`方法是不同步的，所以当你不关心多线程部分时，你可以使用它，因为它会很快。

`StringBuffer`另一方面，它的所有方法都是同步的，因此是线程安全的。

您可以阅读这篇文章： - [StringBuilder 和 StringBuffer 之间的区别](https://stackoverflow.com/questions/355089/stringbuilder-and-stringbuffer-in-java)

# silverlight - 字段为空时未触发 Xaml PropertyChange 事件

> ID：12961257
> 
> 赞同：1
> 
> 时间：2012-10-18T18:25:21.163
> 
> 标签：silverlight, xaml

我有一个文本框作为过滤器，它采用数字值

```
<TextBox Grid.Row="0" Grid.Column="5" Text="{Binding CourseNumber, Mode=TwoWay}"></TextBox> 
```

默认情况下，页面加载时设置为 0。如果我点击搜索，我会带回预期的内容。如果我然后在此文本框中输入 204，我会得到适当的项目 - 只有那些 courseNumber 为 204 的项目。

然后，如果我在这里删除任何内容 - 现在它是空的，然后单击搜索，它仍然保留这个 204 值。当我清空该字段或清空该字段并将其关闭时，不会触发属性更改事件。

```
 private int _courseNumber;
    public int CourseNumber
    {
        get { return _courseNumber; }
        set
        {
            SetObject(ref _courseNumber, value, "CourseNumber");
            if (_courseNumber!= null)
            {
                OnPropertyChange("CourseNumber")
            }
        }
    } 
```

我可以在插入其他数字时触发此属性更改事件 - 只是当我从该字段中删除所有数据时不会

**为我们修复我们** 最终将此属性更改为字符串而不是 int - 然后将其转换为我们的搜索方法 - 这非常有效。

# android - android 备份服务与第三方服务提供商的集成

> ID：12961258
> 
> 赞同：1
> 
> 时间：2012-10-18T18:25:21.950
> 
> 标签：android, cloud

众所周知，Android 中默认的后台服务提供商是 google。现在我想使用其他一些备份服务提供商。这怎么可能。当您进入设置-> 备份同步部分，添加帐户时，有一些预定义的服务提供商列表可用。如果我想添加我的服务提供商，我该怎么做？我需要在我的应用程序中做些什么，以添加其他第三方服务提供商。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:32:23.563

> 如果我想添加我的服务提供商，我该怎么做？

构建您自己的 ROM mod，其中包含 Android 操作系统的修改版本，然后在设备上安装该 ROM mod。

不幸的是，Android SDK 不支持定义备用备份提供程序。引用[文档](http://developer.android.com/guide/topics/data/backup.html)：

> 备份传输是 Android 备份框架的客户端组件，可由设备制造商和服务提供商定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T12:08:37.910

幸运的是，谷歌的解决方案只是一个糟糕的轮子改造，Android 的 Linux 核心可以愉快地使用存在了几十年的解决方案。

在 Unix/Linux/BSD 系统上通常的解决方案是使用加密连接（例如）运行`cron`作业，该连接在任何 Linux 服务器上很容易获得或超级容易安装，也可能在任何其他系统上。（如果您不了解这些程序，请尝试，或在线搜索他们的手册页。）`rsync``ssh``man <command>`

有适用于 Android的**rsync 应用程序。**而且我已经看到至少有一个可以做 ssh 并且（像往常一样）不需要在服务器上安装 rsync。如果其中一个允许设置时间表，或支持**Tasker**应用程序（也允许将其自动化），那么你很好。

还有**FolderSync**，它支持 SSH 和 FTP 以及许多其他协议的所有组合。但可能没有真正的 rsync 命令提供的自由。

最后，**SyncThing**似乎也适合这个类别，但我不知道它是否可以调度，并且没有尝试过。

如果您通过不受信任的网络进行同步，请确保该应用不仅支持让服务器验证客户端，还支持让客户端验证服务器！（使用公钥和/或证书。）

# mysql - 在我自己的桌面上使用 virtualbox LAMP

> ID：12961260
> 
> 赞同：-3
> 
> 时间：2012-10-18T18:25:25.317
> 
> 标签：mysql, linux, apache, lamp, virtualbox

我有一个关于virtualbox的问题。目前我在我的 macbook 上本地使用 LAMP 设置。但现在我需要不止一个 LAMP 安装，因为我有不同的配置。所以我听说我可以运行 virtualbox 并开始在我自己的桌面上工作，而我正在使用虚拟机来运行我的所有脚本。但我不知道如何开始这样的设置。

有谁知道一篇文章或介绍进入这个场景？或者也许任何人都能够列出我需要解决这个问题的步骤。

问候，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:33:41.533

如果您不害怕使用 CLI，只需在 Virtualbox 中安装一个 ubuntu，服务器版本。然后根据需要多次复制 VM，您将拥有 N 个环境。

如果您不需要它们在您的机器上运行并且不想遇到麻烦，您可以使用[dotCloud](https://www.dotcloud.com/#!/signup)的沙箱来创建任意数量的环境。这是 dotCloud 的[php + mysql](https://github.com/dotcloud/stack-php-mysql)样板，这里是关于如何安装[dotCloud 的 cli](http://docs.dotcloud.com/0.4/firststeps/install/)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:36:02.147

我会扔掉 Ubuntu，只使用 Turnkey Linux。把它扔到 VmWare 播放器上，你可以在 10 分钟内启动并运行！

# iphone - 可以在 iOS 6 中显示“在 App Store 模式”吗？

> ID：12961261
> 
> 赞同：10
> 
> 时间：2012-10-18T18:25:32.123
> 
> 标签：iphone, ios, app-store, ios6

是否可以在 iOS 6 中显示模态视图控制器，在 App Store 中显示我的应用程序？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T20:31:02.800

**是的你可以。(iOS6+)**

看看[SKStoreProductViewController](https://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKITunesProductViewController_Ref/SKStoreProductViewController.html)

```
NSDictionary *appParameters = [NSDictionary dictionaryWithObject:@"533886215"
                                                          forKey:SKStoreProductParameterITunesItemIdentifier];

SKStoreProductViewController *productViewController = [[SKStoreProductViewController alloc] init];
[productViewController setDelegate:self];
[productViewController loadProductWithParameters:appParameters
                                 completionBlock:^(BOOL result, NSError *error)
{

}];
[self presentViewController:productViewController
                   animated:YES
                 completion:^{

                 }]; 
```

# postgresql - How to draw the Postgis Shortest_path line on google maps?

> ID：12961265
> 
> 赞同：1
> 
> 时间：2012-10-18T18:25:41.273
> 
> 标签：postgresql, google-maps, postgis

I have installed PostGIS/PostgreSQL, imported the OSM data from OpenStreetMaps and I am querying the database to get shortest path between two points. As is visible on image the query returns the nodes in the way between the points, however, the query returns just nodes and I need to draw the way on Map (**Google map**). Does anybody know how can I draw the way based on these nodes (latitude, longitude)?

![Screenshot of executed query](../Images/250fe3b3257e6f520a31199cc2db05bd.png)

```
SELECT * FROM shortest_path('
      SELECT id AS id,
          source::int4 AS source,
          target::int4 AS target,
          cost::float8 AS cost
      FROM br_2po_4pgr',
      1,
      5110,
      false,
      false) 
```

It returns all coordinates between the source and target, but each line has two pairs of latitude and longitude (x1,y1 and x2,y2).. I don't know which one I have to use..

thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:57:39.070

其实截图大小没问题。只需在浏览器中独立加载它。截图中缺少的是最后一列名称被截断。这才是真正的几何。您所要做的就是将该 geom 转换为`KML`PostGIS `ST_AsKML`，然后[像这样将其加载到 Google Maps 上](http://www.askdavetaylor.com/how_to_import_xml_kml_data_file_google_maps.html)。做一点研究`KML`。

# c# - How do you apply multiple filter functions on one collection view source, one after another (AND relation)

> ID：12961268
> 
> 赞同：3
> 
> 时间：2012-10-18T18:25:59.907
> 
> 标签：c#, wpf, filter, observablecollection, collectionviewsource

I have been working with a Collection View Source object that is bound to a listview and the CVS is a view on top of Observable Collection of objects.

I know how to apply a filter using the following technique:

```
cvs.Filter += new FilterEventHandler(SomeFilterFunction); 
```

This works fine when you are only filtering in one function. The problem is when I want to filter on top of the already filtered CVS. If I have another function that filters the objects in the view based on different criteria, the objects are filtered ONLY on the criteria in the second filter and the results of the first filter go away.

Here is some example code to explain my problem:

```
cvs.Filter += new FilterEventHandler(SomeFilterFunction1);
cvs.Filter += new FilterEventHandler(SomeFilterFunction2);

public void SomeFilterFunction1(object sender, FilterEventArgs e)
{
      SomeObject example = e.Item as SomeObject;
      if(example.Name.Contains("A"))
      {
          e.Accepted = true;
      }
      else
      {
          e.Accepted = false;
      }

}

public void SomeFilterFunction2(object sender, FilterEventArgs e)
{
      SomeObject example = e.Item as SomeObject;
      if(example.Name.Contains("B"))
      {
          e.Accepted = true;
      }
      else
      {
          e.Accepted = false;
      }
} 
```

So in this example, I want only "SomeObjects" with the letters A and B accepted by the filters. My problem is that When make the call cvs+=Filter with the filterfunction2, only Objects Name containing the letter B are accepted, disregarding the objects with letter A. So an Objects name containing the letter B but not A are accepted, when they shouldnt be.

My current solution to this problem has been creating a "Master" filter function that has every filter function inside of it and I run every Object through every filter and if the object makes it through ALL of the filters then it is accepted. This does work but my code is getting crazy now and logic is getting out of control. Does anyone know how to apply a new filter function on the result of the last filter for a CVS? Why doesn't the CVS just do this automatically instead of sending every Object through every filter or am I not thinking about CVS in the right way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:55:03.570

问题应用多个过滤器事件处理程序，是所有处理程序都被调用并且`CollectionViewSource`不考虑单个结果`e.Accepted`。结果将始终是`e.Accepted`最后一个事件处理程序中的值。

我创建了一个管理器类以允许处理多个`FilterEventHandler`函数并使用 AND 或 OR 逻辑处理它们的结果。因此，要么所有过滤器结果为真，要么至少一个过滤器结果为真。

```
public class MultipleFilterHandler
{
    private readonly CollectionViewSource collection;

    public MultipleFilterLogic Operation {get; set; }

    public MultipleFilterHandler(CollectionViewSource collection, MultipleFilterLogic operation)
    {
        this.collection = collection;
        this.Operation = operation;
    }

    public MultipleFilterHandler(CollectionViewSource collection) : 
        this( collection, MultipleFilterLogic.Or)
    {
    }

    private event FilterEventHandler _filter;
    public event FilterEventHandler Filter
    { 
        add
        {
            _filter += value;

            collection.Filter -= new FilterEventHandler(CollectionViewFilter);
            collection.Filter += new FilterEventHandler(CollectionViewFilter);
        }
        remove
        {
            _filter -= value;

            collection.Filter -= new FilterEventHandler(CollectionViewFilter);
            collection.Filter += new FilterEventHandler(CollectionViewFilter);
        }
    }

    private void CollectionViewFilter(object sender, FilterEventArgs e)
    {
        if (_filter == null)
            return;

        foreach (FilterEventHandler invocation in _filter.GetInvocationList())
        {
            invocation(sender, e);

            if ((Operation == MultipleFilterLogic.And && !e.Accepted) || (Operation == MultipleFilterLogic.Or && e.Accepted))
                return;
        }
    }
}

public enum MultipleFilterLogic
{
    And,
    Or
} 
```

只需根据需要在 MultipleFilterHandler 的 Filter 属性上添加和删除事件处理程序，它将管理 CollectionViewSource 的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-13T11:37:11.380

你可以这样做：

```
cvs.Filter += new FilterEventHandler(SomeFilterFunction1);
cvs.Filter += new FilterEventHandler(SomeFilterFunction2);

public void SomeFilterFunction1(object sender, FilterEventArgs e)
{
      SomeObject example = e.Item as SomeObject;
      e.Accepted &= example.Name.Contains("A");
      //if you prefer OR logic use this one:          
      //e.Accepted |= example.Name.Contains("A");

}

public void SomeFilterFunction2(object sender, FilterEventArgs e)
{
      SomeObject example = e.Item as SomeObject;
      e.Accepted &= example.Name.Contains("B");
      //if you prefer OR logic use this one:
      //e.Accepted |= example.Name.Contains("B");
} 
```

这将执行与 Accepted 属性中的当前值的 do 和 AND（或 OR，如果您使用 |= 运算符），使您的过滤器一起工作。

编辑：这是在 .NET 4.5 中制作的

# javascript - 骨干网..链接触发器

> ID：12961269
> 
> 赞同：-1
> 
> 时间：2012-10-18T18:26:03.710
> 
> 标签：javascript, backbone.js

我想点击一个链接，让我的 JS 找出点击了哪个链接

```
<ul>
            <li><a href="#">Prev</a></li>
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">Next</a></li>
        </ul> 
```

因此，当单击“1”时，从我的 js 文件中，我想知道单击了哪个链接..

我的.js

```
events : {
                //my click event to call clickedFunction
            },

clicked: function(e){  // if 1 is clicked, go to page 1, if 2 is clicked, go to page 2..} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:49:54.437

我会这样做[JSBIN](http://jsbin.com/uyevih/34/edit)

首先在您的 UL 中添加一个 id，以便我们可以在其他 UL 中找到它

```
 <ul id="list">
        <li><a href="#">Prev</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">Next</a></li>
    </ul> 
```

然后

```
var view = Backbone.View.extend({

  el : $('#list'),              // map the view to your list

  initialize: function(){
    console.log('started');
  },

  events : {
      "click li" : "clicked"   // add an event listener
  },

  clicked: function(val){      // create a callback to the event
     alert("clicked " + val);  
  }
});

window.app = new view();
​ 
```

# maven - 使用 maven 时向 GATE 添加新的 ANNIE 规则

> ID：12961272
> 
> 赞同：0
> 
> 时间：2012-10-18T18:26:07.653
> 
> 标签：maven, nlp, gate

如果我使用 Ant 构建脚本，那么如果我将它们放在正确的文件夹中，它将包含我创建的 JAPE 文件。但是如果我想使用 maven 的 GATE，我如何包含我自己的 JAPE 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:33:48.553

即使您从 Maven 中心提取核心 GATE 库，您仍然需要应用程序所需插件的副本 - 插件在 Maven 存储库中不可用。无论您使用什么构建系统，开发 GATE 应用程序的过程都是相同的，您需要将发行版中的相关插件复制到您的项目中的某个位置，然后根据需要修改/添加/删除组件。

开发使用 GATE Embedded 的应用程序时的最佳实践通常是：

1.  不要依赖 GATE 的“安装”——在您的项目中创建一个目录来充当`gate.home`，其中包含站点和用户配置文件的私有副本，并在调用之前调用适当的等`Gate.setGateHome`（请参阅[Tomcat 示例](http://gate.ac.uk/userguide/sec:api:tomcat)用户指南）。`Gate.setUserConfigFile``Gate.init`
2.  同样，不要依赖系统范围的 GATE 插件 - 将您的应用程序依赖的所有插件复制到您的项目中，然后从那里加载它们，而不是从 GATE 安装中加载它们。
3.  如果可能，请使用 GATE Developer 开发和测试您的 GATE 应用程序，方法是卸载“已安装”插件并加载项目的私有副本。以通常的方式构建您的应用程序，然后“保存应用程序状态”。在您的嵌入式应用程序中，您需要做的就是使用`PersistenceManager`重新加载保存的状态，您不需要显式调用`CreoleRegister.registerDirectories`，因为`PersistenceManager`它将为您处理。

您可以通过在 GATE Developer 中构建应用程序并使用“export for GATECloud.net”选项将应用程序及其所需的所有插件的副本打包到一个 zip 文件中来引导步骤 2 和 3，然后您可以将其解压缩到您的项目工作空间。

# iphone - iOS MPMoviePlayerController controls show black background when switching to fullscreen

> ID：12961277
> 
> 赞同：0
> 
> 时间：2012-10-18T18:26:34.923
> 
> 标签：iphone, ios, mpmovieplayercontroller

I use a MPMoviePlayerController to show a movie in a small box. Default controls allow the user to switch to fullscreen. Everything works perfect, but the controls in fullscreen mode have a black background and the status bar shows up, what looks weird.

```
_moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:resourceURL];
[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(moviePlaybackComplete:)
    name:MPMoviePlayerPlaybackDidFinishNotification
    object:_moviePlayerController];
[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(moviePlayerWillExitFullscreen:)
    name:MPMoviePlayerWillExitFullscreenNotification
    object:nil];
_moviePlayerController.view.frame = CGRectZero; // will be set to correct size later
_moviePlayerController.view.layer.borderWidth = kVideoBorderWidth;
_moviePlayerController.view.layer.borderColor = kVideoBorderColor.CGColor;
_moviePlayerController.scalingMode = MPMovieScalingModeAspectFit;
_moviePlayerController.controlStyle = MPMovieControlStyleDefault;
_moviePlayerController.shouldAutoplay = NO;
[_contentView addSubview:_moviePlayerController.view]; 
```

I've attached screenshots, any ideas?

![enter image description here](../Images/079bcc9d2f9cccb531ff2bab16b567a1.png) ![enter image description here](../Images/4fe279b45d58a964a1d7af232ed530db.png)

Thanks a lot!

# python - 掩码下的 Numpy 标准差

> ID：12961279
> 
> 赞同：1
> 
> 时间：2012-10-18T18:26:51.930
> 
> 标签：python, numpy

如何在 numpy 数组中沿特定轴获取*掩码下的标准偏差？*

```
data = array([[ 0,  1,  2,  3,  4],
              [ 5,  6,  7,  8,  9],
              [10, 11, 12, 13, 14],
              [15, 16, 17, 18, 19],
              [20, 21, 22, 23, 24]])

M = array([[0, 1, 0, 0, 0],
           [1, 1, 1, 1, 1],
           [1, 1, 0, 1, 1],
           [0, 0, 1, 0, 0],
           [0, 0, 0, 0, 0]]) 
```

结果数组应为：

```
masked_std = std( data, axis=0, mask=M )
[ std([5,10]), std([1,6,11]), std([7,17]), std([8,13], std([9,14]) ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:41:18.043

您可以使用 numpy[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.generic.html)：

```
In [19]: from numpy import ma

In [20]: data
Out[20]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])

In [21]: M
Out[21]: 
array([[0, 1, 0, 0, 0],
       [1, 1, 1, 1, 1],
       [1, 1, 0, 1, 1],
       [0, 0, 1, 0, 0],
       [0, 0, 0, 0, 0]])

In [22]: mdata = ma.masked_array(data, mask=~M.astype(bool))

In [23]: mdata
Out[23]: 
masked_array(data =
 [[-- 1 -- -- --]
 [5 6 7 8 9]
 [10 11 -- 13 14]
 [-- -- 17 -- --]
 [-- -- -- -- --]],
             mask =
 [[ True False  True  True  True]
 [False False False False False]
 [False False  True False False]
 [ True  True False  True  True]
 [ True  True  True  True  True]],
       fill_value = 999999)

In [24]: mdata.std(axis=0)
Out[24]: 
masked_array(data = [2.5 4.08248290464 5.0 2.5 2.5],
             mask = [False False False False False],
       fill_value = 999999) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:40:00.473

使用`MaskedArray`：

```
import numpy as np
np.ma.MaskedArray(data, 1-M).std(axis=0) 
```

# android - How to detect android apps that can handle requested Intent action?

> ID：12961280
> 
> 赞同：6
> 
> 时间：2012-10-18T18:26:51.270
> 
> 标签：android, android-intent

I want to share text message trough twitter, facebook or in other ways that available on device. I wrote next code:

```
 Intent share = new Intent(Intent.ACTION_SEND);
    share.putExtra(Intent.EXTRA_TEXT, "Here's some text for Twitter.");
    startActivity(Intent.createChooser(share, "Share this via")); 
```

But if no apps that can hadle this action, the "no such apps" dialog appears on screen. I want to detect these apps and disable this function if there is no handlers found. How I can do it?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T18:29:44.740

```
 Intent intent = new Intent...
    PackageManager manager = mContext.getPackageManager();
    List<ResolveInfo> list = manager.queryIntentActivities(intent, 0);

    if (list != null && list.size() > 0) {
        //You have at least one activity to handle the intent
    } else {
        //No activity to handle the intent.
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-16T02:52:51.017

```
if (intent.resolveActivity(pm) == null) {
    // activity not found
} 
```

# ios - How to Make app run on different devices of iOS

> ID：12961286
> 
> 赞同：2
> 
> 时间：2012-10-18T18:27:03.427
> 
> 标签：ios

I am upgrading my app as per iPhone 5 method and got the way but just need help regarding the following point:

How do I use an if else condition to make the app choose the .xib file when made to run on different iPhones, especially iPhone 5?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:30:59.853

`xib`您应该能够利用 Interface Builder 中的自动调整大小掩码和/或自动布局来实现此目的，而无需为每个 iPhone 设备外形创建一个全新的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:32:15.093

```
 if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
{//do iPad stuff
}

        if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone)
{//do iPhone stuff
} 
```

对于图像，您可以在苹果开发网站上查找命名约定。我相信 iPhone 5 使用的是“-568h@2x.png”结尾。iPad 带有“~ipad.png”和“@2x ~ipad.png”。2x 用于视网膜显示器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:17:23.563

如果您想知道底层设备是 iPhone 5 或不使用以下代码：

```
if ([UIScreen mainScreen].bounds.size.height == 568)
{
// Write whatever you want here.
NSLog(@"Hello from iPhone5");
} 
```

# c++ - 如何使用方法返回指向对象结构的指针？

> ID：12961287
> 
> 赞同：0
> 
> 时间：2012-10-18T18:27:07.530
> 
> 标签：c++, pointers, struct, return

我正在尝试用 C++ 为一个名为 List 的自定义列表类编写一个方法。它是一个由节点组成的链表，节点是各种项目。对于该方法，我希望它返回一个指向节点的指针，但会收到一个错误消息，指出“‘节点’没有命名类型。” 请注意， sort() 方法仍在进行中，我正在等待 setMyNext() 。

```
template<class Item>
class List {
public:
List();
List(const List& original);
virtual ~List();
void sort();

List& operator=(const List& original);
bool operator==(const List& original)const;
bool operator!=(const List& l2) const;

private:
void print()const;
unsigned mySize;
struct Node{
    Node();
    Node(Item item, Node * next);
    ~Node();
    void print()const;
    Node * setMyNext(Node * newNext);
    Item myItem;
    Node * myNext;
};

Node * myFirst;
Node * myLast;

friend class ListTester;
};

template<class Item>
List<Item>::List() {
myFirst=NULL;
myLast=NULL;
mySize=0;
}

 template<class Item>
List<Item>::List(const List& original){
myFirst=myLast=NULL;
mySize=0;
if(original.getSize()>0){
    Node * oPtr = original.myFirst;
    while(oPtr!=NULL){
        append(oPtr->myItem);
        oPtr=oPtr->myNext;
    }
}
}

template<class Item>
List<Item>::Node::Node(){
myItem=0;
myNext=NULL;
}

template<class Item>
List<Item>::Node::Node(Item item, Node * next){
myItem=item;
myNext= next;
}

template<class Item>
List<Item>::~List() {
//  cout<<"Deleting List..."<<endl;
delete myFirst;
myFirst=myLast=NULL;
mySize=0;
}

template<class Item>
void List<Item>::sort(){
//get my first 2 items
if(mySize<2)
    return;
Node * compareEarly=myFirst;
Node * compareLate=myFirst->myNext;
//compare
if(compareEarly->myItem > compareLate->myItem){
//If 2<1, set 0's next pointer to 2, set 2's next to 1, set 1's next to 3
    cout<<"big"<<endl;

}
    //This needs a set previous pointer and set next item's pointer

    //increment
}

template<class Item>
Node * List<Item>::Node::setMyNext(Node * newNext){
myNext=newNext;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:31:46.327

因为 Node*没有*命名类型。

您在此处尝试引用的节点实际上是您的模板类列表中的节点。但是，由于您是在类声明之外定义函数。该函数的返回类型在全局（或您当前的命名空间）范围内。因此，为了让编译器找到正确的类型，您需要提供 Node 的全名。

简而言之：

```
Node * List<Item>::Node::setMyNext(Node * newNext){ 
```

这条线是错误的。应该是这个。

```
typename List<Item>::Node* List<Item>::Node::setMyNext(Node * newNext){ 
```

同样适用于您的其他功能...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:38:00.027

您的问题是编译器不知道“Node *”的定义是什么，因为函数定义位于全局命名空间中。您需要指定它属于哪个命名空间，以便编译器识别它。

```
template<class Item>
List<Item>::Node * List<Item>::Node::setMyNext(Node * newNext){
myNext=newNext;
} 
```

# c# - XML is overwritten after saving it with Configuration and LINQ-to-XML?

> ID：12961289
> 
> 赞同：0
> 
> 时间：2012-10-18T18:27:16.490
> 
> 标签：c#, linq-to-xml, configurationmanager

I am opening up an `XML` file using `LINQ-to-XML`, but before this I am using `OpenMappedExeConfiguration` to get the `ConnectionStringsSection` from the config file:

```
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder();

ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();
fileMap.ExeConfigFilename = exeConfigName;
System.Configuration.Configuration config =
ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);`

ConnectionStringsSection section = config.ConnectionStrings;

//Modify connection string... 
```

After I modify part of a `ConnectionString`, I save the config file via:

```
config.Save(); 
```

After saving the `EXE configuration`, I open the file again to read some other parts via `LINQ-to-XML`, but after calling `Save()` on the document, it appears to not save my `ConnectionString` changes, but it saves the changes I made with `LINQ-to-XML`.

```
XDocument configFile = XDocument.Load(path);

//make changes to configFile

XDocument.Save(path); 
```

I had to move the `EXE configuration` code below the `XDocument` code. I can see it changing the `ConnectionString` in memory before it hits the `XDocument` code. I am not sure why this is happening, but is it because I have loaded XML into memory and when I save it back, I am essentially overwriting all changes I made with my `config.Save()`? If this is so, is there a way I can make changes without having to reorder the code?

# php - cant figur how to find a greater or less than for a variable

> ID：12961295
> 
> 赞同：-1
> 
> 时间：2012-10-18T18:27:24.727
> 
> 标签：php

I have tried muiltiple strings of code to find the awswer please help me out, here's the code

```
 $rating = $row['rating_total'] / $row['number_ratings'];

if($rating < 2 && $rating => 1) {
$rating = ' <img src="rating.png" /> ';
  }

if($rating < 3 && $rating => 2) {
$rating = ' <img src="rating.png" /> <img src="rating.png" /> ';
  }

if($rating < 4) && ($rating => 3) {
$rating = ' <img src="rating.png" /> <img src="rating.png" /> <img src="rating.png" />'; 
  } 
  if($rating < 5) && ($rating => 4) {
$rating = ' <img src="rating.png" /> <img src="rating.png" /> <img src="rating.png" /> <img src="rating.png" />';
  }
   if($rating < 6) && ($rating => 5) {
$rating = ' <img src="rating.png" /> <img src="rating.png" /> <img src="rating.png" /> <img src="rating.png" /> <img src="rating.png" /> ';
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:38:57.497

让我们从你的代码开始，我同意其他人的观点，这是一个坏主意。无论如何，在使用 >/< 之前确保变量有整数，然后

```
$rating=intval($rating)

if($rating==1){$rating='<img src="" />'}
else if($rating==2){$rating='<img src="" /> <img src="" />'}
else if($rating==3){$rating='<img src="" /> <img src="" /> <img src="" />'} 
```

首先还要确认您是在两个整数上执行 '/' 或浮动而不是两个字符串。

```
 $rating = floatval($row['rating_total']) / floatval($row['number_ratings']) ; 
```

这可能是不必要的，但始终**确定**您是否必须找出问题所在

并尝试`echo $rating`在两者之间使用，看看出了什么问题。

# linux - 在内核模块中生成随机数

> ID：12961299
> 
> 赞同：9
> 
> 时间：2012-10-18T18:27:47.483
> 
> 标签：linux, random, linux-kernel, linux-device-driver

Linux 中是否有我可以在内核空间中调用的 rand() 等效函数，即从内核模块内部调用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T05:22:36.797

该`get_random_bytes()`例程返回请求的随机字节数并将它们存储在缓冲区中。该例程适用于不能处于等待状态的内核模块。

[http://www.linuxquestions.org/questions/programming-9/random-numbers-kernel-642087/](http://www.linuxquestions.org/questions/programming-9/random-numbers-kernel-642087/)

[http://www.spinics.net/lists/newbies/msg00062.html](http://www.spinics.net/lists/newbies/msg00062.html)

# xcode - 无法打开此文档“XXXXX.storyboard”。请使用更新版本的 Xcode

> ID：12961309
> 
> 赞同：9
> 
> 时间：2012-10-18T18:28:13.033
> 
> 标签：xcode, ios5, storyboard, ios6, xcode-storyboard

使用创建的情节提要`XCode 4.5.1`无法打开`XCode 4.2`并显示以下错误消息。

`This document "XXXXX.storyboard" could not be opened. Please use a newer version of Xcode. Consider changing the document's Development Target to preserve compatibility.`

将部署目标更改为`iOS 5.0`下`Document Versioning`（如谷歌结果所建议）但没有任何成功。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-06-14T13:48:36.783

我已经给 +1 了，`@MarkSzymczyk`因为它为我指明了正确的方向，但由于它与新的相比有点旧，`xcode 5`我想我会给出一个最新的答案。

我遇到了这个问题

> > 无法打开此文档“XXXXX.storyboard”。请使用更新版本的 Xcode。考虑更改文档的开发目标以保持兼容性。

当我查看了我的项目`xcode 5`并返回到`xcode 4.6`. 解决这个问题的方法与旧的略有不同`xcode`。我必须重新加载项目`xcode 5`并导航到界面构建器中的情节提要。现在有一个“Interface Builder Document”部分，而不是“Document Versioning”部分。在那里，有一个选项可以更改`xcode`您要打开的版本。您需要做的就是改回`xcode 4.x`.

我不想从另一个答案中拿走，因为它是正确的，但我只想扩展那个答案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T19:01:24.953

将故事板的开发目标设置为 Xcode 4.2。设置开发目标的菜单位于 Document Versioning 部分。

# android - 使用 onDraw 方法中的 for 循环在自定义视图上为数字计数器设置动画

> ID：12961312
> 
> 赞同：1
> 
> 时间：2012-10-18T18:28:38.510
> 
> 标签：android, android-layout, android-animation, android-custom-view

我很困惑这是否是正确的做法。请纠正我。所以基本上我有一个用`canvas.drawText`方法在我的自定义视图中绘制的文本。文本是一个数字（金额）。当事件发生时，我试图使文本动画到另一个数字（例如：100 => 800）。

我知道这可以通过`onDraw`方法和调用中的 for 循环计数器来完成`canvas.drawText`，`invalidate()`直到它达到最终数字。但是我的应用程序卡住了。

**更新代码：**

我已经更新了代码。现在应用程序不会卡住（根据 Simon 的建议）。但现在它只是一次性抽取所有数字（1-99）。**我不知道如何减慢循环**。

```
public class CustomView extends View implements OnTouchListener{

   private Canvas main_canvas;

   //...Other codes like, initialization, paint etc!...//

   @Override
   protected void onDraw(Canvas canvas) {
      main_canvas = canvas;
   }

   public boolean onTouch(View v, MotionEvent event) {
      switch(event.getAction()){
      case MotionEvent.ACTION_DOWN:
      //...Some action...//
      case MotionEvent.ACTION_MOVE:
      //...Some action...//
      case MotionEvent.ACTION_UP:
      runTextAnimation();
      }
   }

   private void runTextAnimation() {

        for(int i=1; i < 100; i++){
            main_canvas.drawText(String.valueOf(i), getMeasuredWidth()/2, 100, amountPaint);
            invalidate();
        }
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:42:52.300

我通过使用**Runnable**并将`postDelayed`消息排队几毫秒来解决这个问题。尽管我必须感谢西蒙缩小了我的搜索范围和想法。下面是片段。希望这可以帮助某人。干杯。

```
 private Handler mHandler;
    private int i;

    mHandler.post(mUpdate); //call this to run

    private Runnable mUpdate = new Runnable() {
               public void run() {

                main_canvas.drawText("Secret Text"+i, getMeasuredWidth()/2, 50, textPaint);

                i++; // incrementing the value

                mHandler.postDelayed(this, 60);
                invalidate();
                }
        }; 
```

顺便说一句，上面的代码片段是一个无限计数器，请注意在某个时候停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:42:11.600

不要在 onDraw() 中使用 invalidate()！

invalidate() 导致 onDraw() 被调用，然后你 invalidate() 导致 onDraw() 被调用，然后你 invalidate() - 你明白了。循环应该在 onDraw() 之外，并且您使用 invalidate 来更新视图。但要小心，如果你的循环太快，你可能看不到所有更新，因为更新是排队的。

让线程休眠一段时间：

```
Thread.sleep(50); 
```

这会休眠 50 毫秒。试试看，但我认为在 UI 线程上使用 Runnable 会是更好的解决方案。

# c++ - YUV -> RGB 转换可以硬件加速吗？

> ID：12961315
> 
> 赞同：8
> 
> 时间：2012-10-18T18:28:46.190
> 
> 标签：c++, directshow, gpu, rgb, yuv

我们有一个应用程序可以读取 GigE YUV 视频流并将其显示在屏幕上。通过分析，我们了解到，将每一帧从 YUV (UYVY) 转换为 RGB24 的函数比我们的相机到屏幕管道的任何其他部分花费的时间和 CPU 至少多一个数量级。

我们使用的转换函数由 GigE 软件供应商 ( *Pleora* ) 提供，比我们自己的“ *naive* ”（未优化）实现稍快。我们在管道的其余部分使用 DirectShow。“任务管理器基准测试”显示我们的 1080p 30fps 流，当我们跳过转换时 CPU 使用率为 4-5%（当然会得到乱码图像），当我们调用转换函数时 CPU 使用率为 15-19%。

我们的问题是：

1.  是否有 DirectShow 过滤器可以为我们进行这种转换，希望以更高性能的方式，而不是依赖于第 3 方 SDK 或我们自己的（基于 CPU、串行）转换功能？
2.  这种转换必须在 CPU 上完成，还是能够以某种方式卸载到 GPU 进行并行处理？

谢谢！埃里克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:37:29.760

转换可能是 GPU 处理的一个很好的候选，但是您将如何处理转换后的数据？如果您需要它在软件中进行进一步处理，那么从视频适配器读回可能会破坏您通过将处理卸载到 GPU 获得的所有增益。如果您只需要它用于演示目的，那么您不需要转换，您可以将 YUV 图像直接传送到视频适配器并让它以这种方式呈现（这是管道的理想配置，因为您没有任何转换）。

谈到软件转换，我不确定您现在使用的转换的质量，但是有高度优化（启用 SIMD）的转换可用：

1.  标准 Windows Vista+ DMO
2.  FFmpeg 的 libswscale
3.  英特尔 IPP 原语

这三个都或多或少容易插入 DirectShow 管道。此外，高分辨率图像也是并行软件处理的良好候选者。

# php - php中的mktime函数无法正常工作

> ID：12961317
> 
> 赞同：1
> 
> 时间：2012-10-18T18:28:48.263
> 
> 标签：php

我正在使用代码：

```
$old_month = strtolower(date("m", mktime(date('H'), date('i'), date('s'), (date('m')-12),date('d'), date('Y'))));
$old_year = strtolower(date("Y", mktime(date('H'), date('i'), date('s'), (date('m')-12), date('d'), date('Y'))));

if ( $profile_stats['month'] < $old_month && $profile_stats['year'] == $old_year
|| $profile_stats['month'] == date('m') && $profile_stats['year'] == date('Y') ) 
```

If 循环应该取上个月的值..ie 现在是 10 月..so If 应该搜索 sept ie。9

我怎样才能做到这一点。

请提出任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:29:58.870

用这个

```
$old_month = strtolower(date("m", strtotime("lastmonth"));

if ( $profile_stats['month'] < $old_month && $profile_stats['year'] == $old_year
|| $profile_stats['month'] == date('m') && $profile_stats['year'] == date('Y') ) 
```

应该

```
if ( strtotime($profile_stats['month']) < strtotime($old_month) && strtotime($profile_stats['year']) == strtotime($old_year)
|| $profile_stats['month'] == date('m') && $profile_stats['year'] == date('Y') ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:31:56.063

您似乎要从月数中减去 12。去年就可以了。

尝试使用英语 -`strtotime`非常擅长处理：

```
$last_month = strtotime("-1 month");
list($old_month,$old_year) = explode("-",date("m-Y",$last_month)); 
```

# python - cloudinary cloudinary.models.CloudinaryField 将 public_id 添加到该字段

> ID：12961328
> 
> 赞同：2
> 
> 时间：2012-10-18T18:29:25.387
> 
> 标签：python, django, cloudinary

这是一个简单的模型：

类产品（模型。模型）：

```
caption = models.CharField(max_length=1000)
description=models.TextField()
supplier = models.ForeignKey(Supplier)
designNumber = models.CharField(max_length=100)
price = models.IntegerField()
stock = models.IntegerField()
parameters = models.ManyToManyField(ProductParameterValues)
image = cloudinary.models.CloudinaryField('image')
added_on = models.DateTimeField(auto_now=True)
def __unicode__(self):
    return self.designNumber + ":" + self.caption + ":" + self.supplier.name 
```

我希望能够让图像（云图像）有一个由其他参数组成的公共 id - 比如供应商.user.id 和 designNumber。

我们如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:30:42.217

在最新版本的 Python 库中，您可以从 CloudinaryField 继承并从模型的属性中确定 public_id（和其他上传参数），例如：

```
class MyCloudinaryField(CloudinaryField):
    def upload_options(self, model_instance):
       return {'public_id': model_instance.supplier.user.id + "-" + model_instance.designNumber} 
```

# solr - 从 Solr 结果中过滤不相关的方面

> ID：12961329
> 
> 赞同：8
> 
> 时间：2012-10-18T18:29:26.423
> 
> 标签：solr, facet

我花了几个小时四处寻找解决问题的方法。我见过人们提出的问题与我想要完成的任务很接近，但到目前为止，似乎没有人提出同样的问题。让我看看我是否可以充分解释这一点：

假设我是一家鞋店。在我的网站上，我有三页：一页是男鞋，一页是女鞋，一页是童鞋。假设我的鞋桌有字段 prod_group。因此，对于男士页面，查询将是 q=prod_group:men。现在让我们说我想提供的方面之一是品牌。q=prod_group:men&filter.field=brand

我遇到的问题是方面结果显示了我数据库中的所有品牌，而不仅仅是与男鞋相关的品牌。也就是说，我已经知道“我的小马驹”系列中的男鞋是零。我不想在品牌方面显示 My Little Pony。设置 facet.mincount 也不是我需要的。如果我运行查询 q=prod_group:men&fq=color:red&filter.field=brand，客户希望向消费者展示“Mighty Joe”品牌没有任何红鞋，所以我仍然需要具有方面计数的方面0。

基本上我希望的是基于基本查询结果的方面结果。到目前为止，我看到完成此操作的唯一方法是运行两个查询：第一个仅使用基本查询并设置 facet.mincount = 1 以获取相关方面的列表，然后将 facet.mincount 的实际查询返回 0 所以我可以根据已经做出的方面选择确定何时将不再可用的某些选项变灰。

运行两个查询似乎不太优雅。从长远来看，facet.pivot 可能会有所帮助，但我们仍在使用 3.x，而且我认为这种情况不会很快改变。我是否错过了一些查询/模式/配置选项，这些选项可以满足我对一个查询的需求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:52:16.623

您可以检查一个名为[Facet Excluding Filters](http://wiki.apache.org/solr/SimpleFacetParameters#Multi-Select_Faceting_and_LocalParams)的选项，这将允许您返回分面，而不管应用的过滤器如何。

例如
，您使用 facet.mincount 1 过滤男性`fq=prod_group:men`，这将返回适用于此过滤器的所有品牌方面。
然后，当您对某种颜色进行子过滤时，`fq=color:red`您可以获得两个方面，一个带有结果，一个没有过滤器，使用排除过滤器，
例如`fq={!tag=dt}color:red&facet.field={!ex=dt key=nonfilter_brand}brand&facet.field=brand`

这将为您提供带有和不带有过滤器的方面，您可以使用这些方面来灰显客户端的差异。客户端有点开销，但您只需要执行一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:29:46.433

```
fq=prod_group:men 
```

使过滤也适用于构面结果，而参数并非如此`q`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:28:23.230

您是否查看过[facet.query](http://wiki.apache.org/solr/SimpleFacetParameters#facet.query_%3a_Arbitrary_Query_Faceting)选项。从描述中听起来它会完成你所需要的。

> 此参数允许您在 Lucene 默认语法中指定任意查询以生成构面计数。默认情况下，faceting 返回“字段”的唯一术语的计数，而 facet.query 允许您确定任意术语或表达式的计数。

# javascript - jQuery(selector).contains 抛出“无方法”TypeError？

> ID：12961333
> 
> 赞同：0
> 
> 时间：2012-10-18T18:29:33.647
> 
> 标签：javascript, jquery

我的 HTML：

```
<form>
    <input type="text" name="url" maxlength="10" />
</form> 
```

我的 JS：

```
$(document).ready(function(){
    var inputUrl =  $('input[name=url]');
    inputUrl.change(function() {
        alert(inputUrl);
        if ($(inputUrl).contains('watch'))
        {
            alert ('Contains watch: yes');
        }
        else
        {
            alert ('Contains watch: no');
        }
    });
}); 
```

Chrome 控制台显示：

```
Uncaught TypeError: Object [object Object] has no method 'contains' 
```

什么是正确的语法：

`if ($(inputUrl).contains('watch'))`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:31:16.920

```
if (inputUrl.val().indexOf('watch') > -1) { 
```

或者您可能只想对接收到事件的当前事件进行操作。

```
if ($(this).val().indexOf('watch') > -1) { 
```

或使其不区分大小写：

```
if (/watch/i.test($(this).val())) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:31:55.500

你可以这样做。`conatins`psuedo 用于搜索 innerHtml 中的文本。它不在输入元素值中搜索

```
$(inputUrl).val().indexOf('watch') > 0 
```

参考：[http ://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:35:36.890

我的第一个想法是在代码中`input[name=url]`更改为`input[name=url]:contains('watch')`或使 inputUrl var 解析，但这只会从元素内获取文本，并且不会对 attr 的值产生影响。回想起来，@ user1689607 的答案看起来是最好的。

# visual-studio-2010 - Microsoft Visual Studio Express 2010：尝试打开 .vcxproj 时出错

> ID：12961335
> 
> 赞同：0
> 
> 时间：2012-10-18T18:29:37.907
> 
> 标签：visual-studio-2010

任何人都知道这是为什么？我还安装了 NVIDIA CUDA SDK 和所有这些。一些谷歌搜索还没有给我一个答案......

还是只是不支持？我需要购买另一个版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:44:31.733

没有实际的错误消息很难说，但我猜你使用的是错误版本的 Visual Studio Express。您需要在这里提供 Visual C++ 2010 Express：http: [//www.microsoft.com/visualstudio/eng/downloads](http://www.microsoft.com/visualstudio/eng/downloads)

# c++ - 我无法在 Debian(Ubuntu) 中运行可在 Redhat(Centos) 中运行的 C++ 程序

> ID：12961336
> 
> 赞同：10
> 
> 时间：2012-10-18T18:29:41.710
> 
> 标签：c++, ubuntu, centos, debian, redhat

TLDR：在 Ubuntu Debian 的 Centos Redhat 中编译 C++ 程序时遇到问题。在这两者之间我应该注意什么会使使用相同编译器编译的 C++ 程序不起作用？

您好，我正在尝试编译和运行 Germline (http://www1.cs.columbia.edu/~gusev/germline/)。它在 RedHat Centos 中运行良好，但是对于我切换的大多数东西，Centos 的支持不如 Ubuntu。现在这个程序不起作用。它完全有可能使用某种仅限 RedHat 的功能，但我使用相同的编译器 (g++) 在两种环境中编译它。

我一直在努力让这个东西在 Ubuntu 上工作，因为它更好用，但是到目前为止，当我在 ubuntu 中“制作所有”项目时，它会编译并且测试会旋转（Don '永远不会完成）永远。无论我使用什么二进制文件（在 Centos 中编译并复制，我刚才提到的失败的测试二进制文件等），程序总是冻结。

有点长，抱歉。我的主要问题是：我可以尝试其他 C++ 编译器替代方案吗？是否有任何我可能缺少的 Red-hat C++ 库。或者可能导致这种情况的 C++ 实现的主要差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T21:17:22.770

我看了一下软件。它的输入代码有点脆弱，我不确定 Ubuntu 或 Red Hat 的 C++ 库在这种情况下是否有问题，但该程序可以轻松修复以在两者上运行。

在文件`PEDIndividualsExtractor.cpp`中的函数`void PEDIndividuasExtractor::loadInput()`中，更改以下行：

```
while (!stream.eof() ) 
```

至：

```
while (stream) 
```

并重新编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T01:03:42.737

使用`while(!stream.eof())`是一个常见的错误。如果该陈述`stream.eof()`为真，则不一定意味着对流的最后一次操作成功。

下面是一些用 GNU 编译包的 bash 脚本`g++4.6`：

```
wget http://www1.cs.columbia.edu/~gusev/germline/germline-1-5-1.tar.gz
tar -xzvf germline-1-5-1.tar.gz
cd germline-1-5-1/
perl -p -i.bak -e's/!stream\.eof\(\)/stream/g' PEDIndividualsExtractor.cpp
perl -p -i.bak -e's/!stream_sample.eof\(\)/stream_sample/g' HMIndividualsExtractor.cpp
make all
cat test/generated.out 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:52:44.573

1.  `make all`按照自己的步骤执行，然后检查所有编译是否正常。
2.  运行`make tests`，然后检查哪些测试失败。

这些是您迈出的第一步，可能会帮助您完成大部分工作。

正如 PenguinCoder 上面所说，您需要检查 Ubuntu 和 Redhat 之间的编译器版本是否相同。每次在 中进行主要版本升级时`gcc`，我都会遇到一些（次要）问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T18:39:50.257

您应该指定第一个错误的真正含义，您没有提供足够的信息来说明问题所在，但是我猜想缺少依赖项。

任何像样的软件包都带有依赖项列表，您是否检查过这个并检查过要求是否存在？

在没有需求和依赖列表的情况下，在这种情况下一个好的经验法则是检查第一个错误是什么并修复它。例如，如果第一个错误显示“缺少傻瓜.h”，那么您需要为该机器安装“foolib”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T10:55:21.347

如果只需要在 Ubuntu 上使用该程序，可以将程序配置`--static`为编译静态可执行文件，然后将可执行文件复制到 Ubuntu。

或者，您可以使用`ldd`命令找出`.so`动态可执行文件链接到的文件并将这些`.so`文件复制到动态可执行文件的同一目录中，然后将它们放在Ubuntu上运行。您还可以将`.so`文件放在另一个目录中并用于`LD_LIBRARY_PATH`帮助可执行文件查找`.so`文件。

# iphone - UINavigationController 不显示后退按钮

> ID：12961345
> 
> 赞同：2
> 
> 时间：2012-10-18T18:30:00.850
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个带有 UIViewController 和一些按钮的故事板。其中一个按钮对 UINavigationController 进行模态搜索，并且 NavController 中嵌入了 UITableViewController。当我单击主屏幕上的按钮时，它会前进到 NavController，但没有返回按钮。

那么如何获得后退按钮呢？我尝试了几件事，但没有运气。

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T18:50:27.420

如果您以模态方式呈现导航控制器，那么 tableview 控制器是您的新导航控制器推送的唯一视图控制器。在这种情况下，不会也不应该有后退按钮。

您最好通过 tableview 控制器向导航栏添加一个取消/完成按钮，这会关闭模态视图。

在您的 tableView 控制器`viewDidLoad:`方法中：

```
UIBarButtonItem *done = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonTapped:)];
self.navigationItem.leftBarButtonItem = done;

//Release done if not using ARC 
```

然后添加（最简单的实现）一个dismiss方法：

```
- (void)doneButtonTapped:(id)sender {

    [self.navigationController dismissViewControllerAnimated:YES completion:nil];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:47:59.637

UINavigationViewController 只管理一堆视图控制器。您将 viewController 推入堆栈，当您点击“返回”时，您将从堆栈中弹出一个视图。

由于您以模态方式呈现 UINavigationController，因此它不知道之前呈现的内容。获得所需行为的正确方法是将主 UIViewController 设置为 UINavigationController 的根视图控制器。当用户点击一个按钮时，您将新的 UITableViewController 推送到 UINavigationController 的堆栈中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:58:45.293

您的 UITableViewController 子类是 UINavigationController 的根视图控制器。因此，不会自动显示后退按钮。如果点击表格行将第二个视图控制器推入堆栈，那么第二个视图控制器将在其导航栏中显示一个后退按钮。所以，这是预期的行为。

您可以通过创建一个“后退”按钮自己添加一个（您需要一个看起来像后退按钮的图像，或者在代码中绘制一个）并将其添加为 TableViewController 的导航项的 leftBarButtonItem，但我不会那样做. 模态显示的视图控制器不应该“返回”。相反，按钮应该是“关闭”、“关闭”或“取消”之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T12:05:01.873

在我的情况下，我有一个没有可见导航栏的 rootviewcontoller，但推送的 viewcontoller 都需要一个带有后退按钮的导航栏，但它们没有显示。我在 Xcode 6.1 中工作。在 rootviewcontroller 的 viewDidAppear 中，我设置：

self.title=@"一个标题"; self.navigationController.navigationBarHidden=YES;

在需要导航栏可见的推送视图控制器的 viewDidLoad 中，我设置： self.navigationController.navigationBarHidden=NO; self.navigationItem.hidesBackButton=否；

这一切似乎有点明显，但我绕着圈子试图用后退按钮显示导航栏！

# android - 在运行时在 android 中创建 xml 形状的另一个副本

> ID：12961349
> 
> 赞同：1
> 
> 时间：2012-10-18T18:30:10.713
> 
> 标签：android

我正在尝试创建一个具有不同基本形状（例如圆形、矩形等）的“调色板”的应用程序，用户可以将它们的副本拖放到画布上。我的形状是在 xml 文件中定义的。目前我可以将它们移动到画布上，但随后它们会从调色板中消失（因为我正在移动原始视图），所以我需要一种方法来在用户单击时创建形状的新副本并且将其拖到画布上。我已经尝试寻找解决方案，并查看了 LayoutInflaters 但无法让它们工作。LayoutInflaters 是要走的路还是有更好的解决方案？请在下面查看我的代码片段。

谢谢

在我的 onDrag() 中：

```
 case DragEvent.ACTION_DROP:
    // Dropped, reassign View to ViewGroup
    View view = (View) event.getLocalState();
    ViewGroup owner = (ViewGroup) view.getParent();
    //owner.removeView(view);
    LinearLayout container = (LinearLayout) v;
    View copyview = getLayoutInflater().inflate(R.drawable.rectangle, null);
    container.addView(copyview);
    copyview.setVisibility(View.VISIBLE);
    break; 
```

编辑：

矩形的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <stroke
        android:width="2dp"
        android:color="#FFFFFFFF" />

    <solid android:color="#ffff00ff" />

</shape> 
```

日志猫：

```
10-18 19:59:12.461: I/dalvikvm(830): threadid=3: reacting to signal 3
10-18 19:59:12.741: I/dalvikvm(830): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:59:12.961: I/dalvikvm(830): threadid=3: reacting to signal 3
10-18 19:59:13.101: I/dalvikvm(830): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:59:13.372: D/android.widget.GridLayout(830): vertical constraints: y1 - y0 > 160, y2 - y1 > 1038, y2 - y0 < 1038 are inconsistent; permanently removing: y2 - y0 < 1038\. 
10-18 19:59:13.481: I/dalvikvm(830): threadid=3: reacting to signal 3
10-18 19:59:13.542: I/dalvikvm(830): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:59:13.661: D/gralloc_goldfish(830): Emulator without GPU emulation detected.
10-18 19:59:15.531: D/AndroidRuntime(830): Shutting down VM
10-18 19:59:15.531: W/dalvikvm(830): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-18 19:59:15.631: E/AndroidRuntime(830): FATAL EXCEPTION: main
10-18 19:59:15.631: E/AndroidRuntime(830): android.view.InflateException: Binary XML file line #2: Error inflating class shape
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-18 19:59:15.631: E/AndroidRuntime(830):  at com.neonwizard.shapes.DragActivity$MyDragListener.onDrag(DragActivity.java:68)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.View.dispatchDragEvent(View.java:13461)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1155)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1141)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1141)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1141)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1141)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewRootImpl.handleDragEvent(ViewRootImpl.java:3471)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2620)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.os.Looper.loop(Looper.java:137)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-18 19:59:15.631: E/AndroidRuntime(830):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 19:59:15.631: E/AndroidRuntime(830):  at java.lang.reflect.Method.invoke(Method.java:511)
10-18 19:59:15.631: E/AndroidRuntime(830):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-18 19:59:15.631: E/AndroidRuntime(830):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-18 19:59:15.631: E/AndroidRuntime(830):  at dalvik.system.NativeStart.main(Native Method)
10-18 19:59:15.631: E/AndroidRuntime(830): Caused by: java.lang.ClassNotFoundException: android.view.shape
10-18 19:59:15.631: E/AndroidRuntime(830):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
10-18 19:59:15.631: E/AndroidRuntime(830):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
10-18 19:59:15.631: E/AndroidRuntime(830):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
10-18 19:59:15.631: E/AndroidRuntime(830):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
10-18 19:59:15.631: E/AndroidRuntime(830):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
10-18 19:59:15.631: E/AndroidRuntime(830):  ... 20 more
10-18 19:59:16.251: I/dalvikvm(830): threadid=3: reacting to signal 3
10-18 19:59:16.282: I/dalvikvm(830): Wrote stack traces to '/data/anr/traces.txt' 
```

# c++ - 一元运算符具有关联性是否有意义？

> ID：12961351
> 
> 赞同：15
> 
> 时间：2012-10-18T18:30:11.070
> 
> 标签：c++, operators, unary-operator, associativity

来自[http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)的 C++ 运算符优先级表（我知道这不是规范的，但标准没有讨论优先级或关联性）将一元运算符标记为右/左关联.

从对不同问题的讨论中，我留下了疑问。一元运算符具有关联性是否有意义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T20:39:08.937

这只是关联性从语法中得出的方式的人工制品。

加法是左结合的*原因是**加法表达式*的产生之一是*加法表达式*+*乘法表达式*，左边是加法表达式。所以当你看到：

```
a + b + c 
```

this 必须等价于，因为匹配产生式的`(a + b) + c`唯一方法是 with`a + b`作为*加法表达式*和*乘法表达式*。它本身是一个*加法表达式*，但不是一个*乘法表达式*，因此如果我们尝试将其作为*加法表达式*，则它与产生式不匹配。`c`*`a`*`b + c`*`a + b + c``a`***

 ***如果你以前没有，我建议你通读“表达式”一章，忽略语义：只看语法产生式。然后你会看到语法是*如何*定义优先级和关联性的。大技巧是每个“高优先级”类型的表达式都是“低优先级”类型的表达式。因此，每个*乘法表达式*都是*加法表达式*，但反之亦然，这就是乘法比加法“绑定更紧密”的原因。

前缀一元运算符在语法中定义，例如：*unary-expression* : ++ *cast-expression*等，左侧的运算符用于前缀，右侧的运算符用于后缀。换句话说，我们在左侧“插入括号”作为后缀，在右侧“插入括号”作为前缀。也就是说，我们可以说后缀运算符的分组是从左到右的，前缀运算符的分组是从右到左的。事实上，C++ 标准正是这样说的（C++03 中的 5.2/1 和 5.3/1）。将这种一元分组称为“关联性”可能是对术语的滥用，或者至少是一种新造词。但这不是一个主要的，因为很明显必须是什么意思。

二元运算符和一元运算符之间的唯一区别是，如果二元运算符按相反方向分组，则语法仍然有意义，因此`a - b - c`意味着`a - (b - c)`. 这会令人惊讶，但不会影响语言。对于一元运算符，将 as 分组是非常令人惊讶的`!!a`，`(!!)a`该语言还必须为 sub-expression提供*含义*`!!`，而目前它还没有。函数式语言可以赋予它一个含义：`!!`可能意味着由`!`和组成的函数`!`，即与 相同的操作`static_cast<bool>()`，但 C++ 没有组合函数或运算符的概念。C++ 不需要提供该含义的原因是`!`“从右到左的组”。哪个（因为语法中的大技巧）只是另一种说法，`!!`它不是语法正确的表达式，所以永远不是任何东西的子表达式。

所以是的，说前缀运算符从右到左分组并且后缀运算符从左到右分组是有道理的*。*但是，由于我们对 C++ 语言的其他了解，它必须是这样的，这也是“显而易见的”。

顺便说一句，我认为至少从技术上讲，在 C++ 中，后缀*不是*`++`一元运算符。它是一个后缀运算符。但这真的无关紧要，只是它是标准中的术语，因为显然它是一个运算符并且它有一个操作数，所以英语中的“一元”也是如此。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:32:37.083

在一元运算符的情况下，运算符的关联性仅决定了运算符出现在操作数的哪一侧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-12T07:08:00.233

考虑以下代码

```
int *p;
*p++; 
```

表达式`*p++`可以被评估为`(*p)++`（递增 p 指向的对象）或`*(p++)`（指向 p 指向的下一个对象）。

因为一元运算符是右结合的，所以表达式`*p++`将被计算为`*(p++)`。（我在阅读*Kernighan 和 Ritchie*时想到了这个。）

似乎优先级和关联性已更改，并且后缀`++`的优先级高于取消引用`*`运算符。

根据 C11，上述表达式将被评估为`*(p++)`。

我希望这可以更清楚地说明为什么一元运算符具有关联性。

感谢[Lucian Grigore](https://stackoverflow.com/users/673730/luchian-grigore)指出这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T18:31:19.860

不确定，但如果以下内容有效，则可以。

```
++i-- 
```

但事实并非如此，并引发错误

```
lvalue required as increment operand 
```

一元运算符的所有行为只能用优先级来解释。****

# objective-c - UITableViewCell 中的 UISegmentedControl 在通过 dequeueReusableCellWithIdentifier 重用时更改段索引顺序

> ID：12961352
> 
> 赞同：0
> 
> 时间：2012-10-18T18:30:25.437
> 
> 标签：objective-c, ios, ios5, uitableview, uisegmentedcontrol

我有一个带有自定义 UITableCells 的 UITableView。在那些 UITableCells 里面是 UISegmentedControls。我正在尝试仅更改第一个 UISegment 的色调颜色。这可以正常工作，直到通过 dequeueReusableCellWithIdentifier 重用 UITableCell。当向下滚动时重用的 UITableCell 开始出现时，最后一段被染成蓝色而不是第一段。下面是 cellforRowAtIndexPath 中的相关代码：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 

    CellIdentifier = @"CustomCell";
    CustomTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil) {
         cell = [[CustomTableCell alloc] init];
    }

    [cell.segmentedControl setTintColor:GRAY_COLOR];
    [[[cell.segmentedControl subviews] objectAtIndex:0] setTintColor:BLUE_COLOR];

    ...

    return (UITableViewCell *) cell;
} 
```

这个 UISegmentedControl 的 UISegmentedControlStyle 是 UISegmentedControlStyleBar，如果这很重要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:36:48.107

您正在深入研究分段控件的未记录子视图结构。没有公共 API 可以像您一样为一个片段着色。当将来实现发生变化并且您获得的子视图不响应“setTintColor：”方法时会发生什么？

您还依赖于子视图的顺序。顺序可以改变。分段控制的实现可以随着时间的推移将子视图移到后面或前面。您不能假设子视图 0 是第一段的视图。

您最好的方法是继承 UISegmentedControl 或创建您自己的自定义控件，以正确地将段设置为特定颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:35:50.990

您可以尝试[`prepareForReuse`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/prepareForReuse)在您的类中实现该方法`CustomTableCell`以重置子视图，因为此消息[`UITableViewCell`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)在出列以在`UITableView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:38:42.473

尝试在 dequeueReusableCellWithIdentifier 行 [cell.segmentedControl setTintColor:[UIColor clearColor]] 之后使用

# css - 如何在 Rails 视图中设置元素的 CSS 类？

> ID：12961361
> 
> 赞同：1
> 
> 时间：2012-10-18T18:30:56.857
> 
> 标签：css, ruby-on-rails, haml

如何在 Rails 视图的 haml 中设置元素的类？

例如，假设我想将`%td%`这样编写的元素的 CSS 类设置为“red”类：

```
%td= book.author 
```

这要怎么写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:33:10.700

这看起来像[Haml](http://haml.info/docs.html)。

您可以使用`%td.red= book.author`或`%td{:class => "red"}= book.author`。

# visual-studio-2010 - 当我尝试在 VS 2010 中运行 Nuint 测试时，此程序集未使用任何已知的测试框架构建错误

> ID：12961369
> 
> 赞同：1
> 
> 时间：2012-10-18T18:31:17.157
> 
> 标签：visual-studio-2010, nunit

我的 Visual Studio 2010 Express 中有一个 c-sharp 项目，所以我做了以下操作才能运行 Nunit 测试：- 1\. 我下载了“NUnit-2.6.1.msi”。2，我从 C:\Program Files\NUnit 2.6.1\bin\framework 添加对“Nunit.framework.dll”的引用 3\. 我从“外部工具”添加以下配置

*   命令：C:\Program Files\NUnit 2.6.1\bin\nunit.exe

*   参数：/run $(ProjectDir)/$(ProjectFileName)

*   初始目录：$(ProjectDir)。

但是当我尝试从 Visual Studio 运行 Nunit 测试时，发生了以下错误：- **此程序集不是使用任何已知的测试框架构建的**

谁能帮我解决这个问题？？此致

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-04T05:37:57.560

我曾经遇到过这个问题，我通过执行以下操作解决了它：

1.  为 NUnit 添加 Using 语句（使用 NUnit.Framework;）
2.  类属性应该是 [TestFixture] 而不是 [TestClass]
3.  使用属性 [Test] 而不是 [TestMethod] 装饰您的测试方法

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-12T04:45:43.763

也许你正在加载一个旧的 dll。检查您的 dll 是否包含最新更改。另请参阅[NUnit 错误：不是测试程序集](https://stackoverflow.com/questions/4372981/nunit-error-not-a-test-assembly)

# c++ - 是否有类似 std::accumulate 的东西在迭代器上运行？

> ID：12961375
> 
> 赞同：1
> 
> 时间：2012-10-18T18:31:31.650
> 
> 标签：c++, algorithm, iterator

我想要的：在另一个迭代器（我们称之为基迭代器）之后的下一个元素的迭代器，它的字典序大于（>）该基迭代器指向的元素（也就是说，如果我有一个'a'，其余的是[c,d,a,b] 我想要 b，或者更确切地说是 b) 的迭代器。我不知道可用于此的 <algorithm> 函数，因此如果您愿意，我将“手动”进行操作。

我*认为*我可以做到这一点：运行这个 lambda 并在集合上进行某种累积：

```
[mism.first](it_t acc, it_t el) 
{ 
    if(*el > *mism.first) { 
        return iter_min(acc,el); 
    } 
    return acc; 
} 
```

（当 *a<=*b 时，iter_min(a,b) 是 a，mism.first 被称为“基本迭代器”）。但是由于累积适用于值而不是迭代器，所以我不能。迭代器有类似的东西吗？如果不是，你会说我应该写它（我不认为我会过度锻炼自己）还是我只是以“错误”的方式去做（顺便说一句，我最终会交换迭代器指向的元素。我知道这听起来很像next_permutation，但是虽然我所做的与排列有很大关系，但这并不是我想要的*）*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:02:13.183

The easiest possibility I see is to create a range that can be iterated consisting of with successive iterators from `[base, end)`. This is possible with the [Boost.Iterators `counting_iterator`](http://www.boost.org/doc/libs/1_51_0/libs/iterator/doc/counting_iterator.html), but should be fairly easy to implement even without boost.

Your proposed lambda would then work almost as is:

```
some_iterator base = ..., end = ...;
some_iterator the_next_least_thing =
  std::accumulate(boost::make_counting_iterator(base),
                  boost::make_counting_iterator(end),
                  end,
                  [=](some_iterator acc, some_iterator cur) { 
                     return (*cur > *base && (acc == end || *cur < *acc)) ? cur : acc }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:00:15.353

要查找大于基数的**第一个**[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)元素，您可以尝试使用lambda 谓词，如果指向的当前元素大于基迭代器指向的元素，则返回 true。由于 lambda 不幸不是多态的，因此您需要使用指定类型`std::iterator_traits`（以便它也适用于指针）。

要找到大于基数的**最小**元素，您需要进行线性扫描，重复查找剩余列表中大于基数的第一个元素，然后检查它是否小于当前最小值。每次更新最小值时，也会将迭代器增加到当前最小值，这样您只需在剩余部分中寻找下一个候选者。这使得这个算法`O(N)`在元素的数量上`N`。

```
#include <algorithm>
#include <array>
#include <iostream>
#include <iterator>

template<typename FwdIt>
FwdIt first_larger(FwdIt first, FwdIt last, FwdIt base)
{
    typedef typename std::iterator_traits<FwdIt>::value_type T;

    return std::find_if(first, last, [=](T const& elem) {
         return elem > *base;
    });
}

template<typename FwdIt>
FwdIt first_larger(FwdIt first, FwdIt last)
{
    return first_larger(first, last, first);
}

template<typename FwdIt>
FwdIt min_larger(FwdIt first, FwdIt last)
{
    typedef typename std::iterator_traits<FwdIt>::value_type T;
    auto min = last;
    auto found = false;

    for(auto it = first; it != last; ++it) {
         auto m = first_larger(it, last, first);         
         if (m == last) break;         
         it = min = m;
         found = true;        
    }
    return found? min : last;
}

int main()
{
    std::array<int,11> arr = {{ 54, 314, 5, 7, 1, -1, 0, 14, 9, 8, 6 }};

    auto b = &arr[3]; 
    auto f = first_larger(b, arr.end());
    auto m = min_larger(b, arr.end());

    std::cout << *b << "\n"; // 7
    if(f != arr.end()) std::cout << *f << "\n"; // 14
    if(m != arr.end()) std::cout << *m << "\n"; // 8 

    return 0;
} 
```

您可能可以将其概括为一个函数

```
template<typename FwdIt, typename Pred, typename Cmp>
FwdIt min_element_if(FwdIt first, FwdIt last, Pred pred, Cmp cmp)
{
    // return iterator to smallest element satisfying Predicate
} 
```

和其他设置`Cmp`等于等的重载`operator<`。不幸的是，STL 不包含更基本算法的这种组合。您可以查看[Boost.Iterator](http://www.boost.org/doc/libs/1_51_0/libs/iterator/doc/filter_iterator.html)以使用过滤器适配器

```
 // equivalent to min_element_if(first, last, pred)
 min_element(boost::make_filter_iterator(first, last, pred),
             boost::make_filter_iterator(last, last, pred)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:20:31.237

使用 find_if，提供你的 iterator+1 作为起点：

```
bool mycomp (char c1, char c2)
{ return lexicographical_compare(*c1,*c1,*c2,*c2); }    

vector<char>::iterator nextBigger = find_if(it+1,end,mycomp) 
```

改编自[std lib 的 lexicographic_compare 例程](http://www.cplusplus.com/reference/algorithm/lexicographical_compare/)和[find_if](http://www.cplusplus.com/reference/algorithm/find_if/)。

# google-apps-script - 作为 WebApp 发布的脚本失败，但测试链接工作正常

> ID：12961376
> 
> 赞同：0
> 
> 时间：2012-10-18T18:31:40.120
> 
> 标签：google-apps-script

我正在尝试发布一个使用 UiApp 构建的 Google Apps 脚本表单。

到目前为止，我已经授权并成功地将脚本发布为 Web 应用程序。

成功部署确认后，脚本编辑器正在提议某个 URL（当前 Web 应用程序 URL）。下面，这个 URL，确认弹出窗口提供了一个 HTML 链接，上面写着：

“为您的最新代码测试网络应用程序”。

如果我在登录 Google Drive 时单击此测试链接，我可以完美地使用该应用程序，一切正常。但是，如果我尝试真正的发布链接，即使我登录到 Google Drive，应用程序也会失败：

应该隐藏的几个面板显示为可见，并且每当应该触发服务器回调时，我都会收到类似于此的消息：

遇到错误：未知宏“nameOfHandler”

我错过了什么吗？任何指针？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:35:42.640

您需要从 File > Manage Versions 菜单发布一个新版本，然后重新部署 webapp 并选择该新版本。测试链接始终是最新的代码，但 webapp 不会更改，直到您以这种方式制作新版本，这样您就可以在不意外破坏当前脚本的情况下进行测试。

# c - sizeof(double) 一次是 8，另一个是 0？

> ID：12961377
> 
> 赞同：-3
> 
> 时间：2012-10-18T18:31:40.960
> 
> 标签：c, debugging, linked-list, double, sizeof

我写了一个链表库，用于教育自己编写 C 语言并做一些与我的信息技术学习相关的事情。我发现，由于 sizeof(double) 在 4.9 中被解析为 0，所以出现了严重错误：

```
double ary[] = { 1.0, 2.0, 3.5, 4.9, 5.5 };
LinkedList *list = linkedlist(&ary[0], sizeof(ary[0]));
for( i = 1; i<len(ary); i++ )
    ll_push(list, &ary[i], sizeof(double) ); 
```

[（此库的](https://github.com/matthiasbeyer/utilc/blob/use_memcpy/src/linkedlist/linkedlist.c)[此测试](https://github.com/matthiasbeyer/utilc/blob/use_memcpy/tests/ll_test.c#L267)中的第 267-270 行）

对于 1.0、2.0 和 3.5，一切都很好，但对于 4.9，它失败了。以前，我在代码中有 sizeof(ary[i])，但现在 sizeof(double) 以相同的方式产生结果。

我真的很生气。谁能解释一下，为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:33:28.120

除了一些不相关的情况外，`sizeof`是一个编译时实体，它总是被“解析”并在编译时替换为实际的常量值。这立即意味着您所描述的完全不可能。`sizeof(ary[i])`不能根据 改变其值`i`。两者`sizeof(double)`和`sizeof(ary[i])`在您的平台上总是被立即替换，`8`并且不依赖于任何运行时因素。

程序中的任何错误都与`sizeof`. `sizeof`您关于以某种方式评估`0`for的结论`ary[3]`是不正确的。`sizeof(double)`版本以完全相同的方式失败的事实应该对您有一个明确的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:36:28.993

当您修复所有编译器警告时，您的程序很有可能按预期工作：

cc **-Wall** -c ll_test.c

```
ll_test.c:67: warning: initialization makes integer from pointer without a cast
ll_test.c:67: warning: initialization makes integer from pointer without a cast
ll_test.c: In function 'test_dump':
ll_test.c:280: warning: format '%f' expects type 'double', but argument 2 has type 'double *'
ll_test.c:280: warning: format '%f' expects type 'double', but argument 3 has type 'double *'
ll_test.c: In function 'test_get_by_cond':
ll_test.c:295: warning: unused variable 'cmpList'
ll_test.c: In function 'test_datasize_of_last':
ll_test.c:422: warning: unused variable 'result'
ll_test.c: In function 'test_datasize_of_list':
ll_test.c:455: warning: unused variable 'result' 
```

请特别注意 printf 格式错误。

# c# - 移动到新服务器后站点出现 SQL 错误。

> ID：12961378
> 
> 赞同：2
> 
> 时间：2012-10-18T18:31:44.100
> 
> 标签：c#, asp.net, sql, authentication, forms-authentication

我正在为我的公司创建一个相当简单的网站，用于标记库存和标签。这很好，现在我们想添加一个带有用户名和密码的登录元素。这是在 C# 和 ASP.NET 4 中完成的，因此很多功能已经内置。

我将登录 Web 部件添加到引用 App_Data 文件夹中的数据库的页面。但是，当我将它发布到应用服务器时，它不想自动在 App_Data 文件夹中放置任何内容，当我尝试登录时出现 SQL 错误：

```
> A network-related or instance-specific error occurred while
> establishing a connection to SQL Server. The server was not found or
> was not accessible. Verify that the instance name is correct and that
> SQL Server is configured to allow remote connections. (provider: SQL
> Network Interfaces, error: 26 - Error Locating Server/Instance
> Specified) 
```

最初，程序运行时，它是一个简单的标签扫描页面，将字段添加到另一个数据库的小表中。我很好奇引用两个数据库的程序是否存在问题，以及 C# 如何用于这种身份验证，以及是否有更简单的方法来执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T18:34:48.920

您是否在新机器上安装了 SQL Server？对于 SQL Server，仅包含数据库的文件夹是不够的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T18:38:25.907

本质上，该程序无法与 SQL Server 实例通信。这可能是由于多种原因中的一种或多种，​​包括：网络、缺少实例、配置（命名更改）、实例未运行……

首先，确定 SQL Server 实例应该驻留的位置。它在那里吗？

*   如果是，是在同一台机器上还是在不同的机器上？
*   如果是一台单独的机器，你可以从运行你的程序的机器上访问那台机器吗？
*   配置设置中的实例名称或主机名是否仍然正确？
*   实例是否正在运行？

# c# - 使用 Moq 验证具有正确命令参数的 CommandHandler 方法调用

> ID：12961380
> 
> 赞同：3
> 
> 时间：2012-10-18T18:31:49.527
> 
> 标签：c#, unit-testing, moq

我有以下测试用例：

```
 [Test]
    public void MarkAsSuccessfulTest()
    {
        //setup data
        var payment = Util.DbUtil.CreateNewRecurringProfilePayment();

        //unit test

        var mockNotificationSender = new Mock<IMarkAsSuccessfulNotificationSender>();
        var mockCommandHandler = new Mock<IDbCommandHandler<RecurringPaymentMarkAsSuccessfulCommand>>();

        var classUnderTest = new RecurringProfileMarkLastPaymentAsSuccessful(mockCommandHandler.Object, mockNotificationSender.Object);

        classUnderTest.MarkAsSuccessful(payment.RecurringProfile);
        mockCommandHandler.Verify(x=>x.Handle(It.IsAny<RecurringPaymentMarkAsSuccessfulCommand>()), Times.Once());
        mockNotificationSender.Verify(x=>x.SendNotification(payment), Times.Once());

    } 
```

问题在于这一行：

```
mockCommandHandler.Verify(x=>x.Handle(It.IsAny<RecurringPaymentMarkAsSuccessfulCommand>()), Times.Once()) 
```

这将验证该`.Handle()`方法是否被调用。但是，这对于测试来说是不够的 - 这`.Handle()`需要一个命令参数，它有一个属性 - `Payment`。我想验证此参数是否实际上与`payment`变量匹配。

这是可能的，还是某些代码设计存在问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:36:09.387

您可以为参数验证提供谓词：

```
mockCommandHandler.Verify(x => 
   x.Handle(It.Is<RecurringPaymentMarkAsSuccessfulCommand>(c => c.Payment == payment))
   , Times.Once()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:35:26.563

您正在使用 It.IsAny()。您可以使用 It.Is()... 类似于以下内容：

```
mockCommandHandler.Verify(x => x.Handle(It.Is<RecurringPaymentMarkAsSuccessfulCommand>(command => command.Payment == payment)), Times.Once()); 
```

您可以使用 It.Is() 检查传入参数的某些条件。如果它实际上是相同的引用，您可以按照您的第二次验证所做的操作，而是将您的代码更改为以下内容：

```
mockCommandHandler.Verify(x => x.Handle(payment), Times.Once()); 
```

# flash - 从 Adob e Flash FLA 文件批量导出 PNG 序列

> ID：12961381
> 
> 赞同：1
> 
> 时间：2012-10-18T18:31:54.177
> 
> 标签：flash, scripting, batch-file, png, export

我在网上找到这个脚本批量发布fla文件，是否可以将其更改为将png文件序列导出到同一目录？不幸的是，Flash 只允许发布单个图像，但能够将电影“导出”为 png 序列

```
var tempDoc=undefined;
if(fl.documents.length==0){
    //xmlPanel need a document, if there is none, create a temp document
    tempDoc=fl.createDocument();
}
xui = fl.getDocumentDOM().xmlPanel(fl.configURI + "Commands/AutoPublishUI.xml");
if(tempDoc){
    //close temp document
    fl.closeDocument(tempDoc);
}
if(xui.dismiss=="accept"){
    var searchSubDir=xui.searchSubDir;
    var onlyUnpublished=xui.onlyUnpublished;
    var folders=xui.paths.split("\r").join("").split("\n").join("");
    var writeFile=xui.writeToFile;
    fl.trace(writeFile);
    folders=folders.split(",");
    //fl.trace(folders);
    for(var i=0;i<folders.length;i++){
        if(folders[i].substr(0,8)!="file:///"){
            folders[i]="file:///"+folders[i].split(":").join("|").split("\\").join("/");
            //fl.trace("format:"+folders[i]);
        }
        if(folders[i].substr(folders[i].length-1,1)!="/"){
            folders[i]=folders[i]+"/";
        }
    }
    exportlist=new Array();
    //fl.trace(folders);
    for(var j=0;j<folders.length;j++){
        checkFolder(folders[j],exportlist,searchSubDir,onlyUnpublished);
    }
    var totaltime=0;
    if(exportlist.length==0){
        alert("No file need to publish.");
    }else{
        //fl.trace(exportlist.join("\n"));
        fl.trace(writeFile);
        if(writeFile=="true"){
            var d=new Date();
            var script="//publish script created at "+d+"\n";
            script+="function formatTime(num){\n";
            script+="   var h=Math.floor(num/3600000);\n";
            script+="   num=num%3600000;\n";
            script+="   var m=Math.floor(num/60000);\n";
            script+="   if(m<10){\n";
            script+="       m=\"0\"+m;\n";
            script+="   }\n";
            script+="   num=num%60000;\n";
            script+="   var s=Math.floor(num/1000);\n";
            script+="   if(s<10){\n";
            script+="       s=\"0\"+s;\n";
            script+="   }\n";
            script+="   num=num%1000;\n";
            script+="   return h+\":\"+m+\":\"+s+\".\"+num;\n";
            script+="}\n";
            script+="function exportswf(id,total,flapath,swfpath){\n";
            script+="   fl.trace(\"[\"+id+\"/\"+total+\"] \"+flapath.substr(flapath.lastIndexOf(\"/\")+1)+\"\t@ \"+flapath.substr(0,flapath.lastIndexOf(\"/\")));\n";
            script+="   var stime=new Date().getTime();\n";
            script+="   var fla=fl.openDocument(flapath,true);\n";
            script+="   if(swfpath==undefined){\n";
            script+="       swfpath=flapath.substr(0,flapath.lastIndexOf(\".\"))+\".swf\";\n";
            script+="   }\n";
            script+="   fla.exportSWF(swfpath,true);\n";
            script+="   fla.close(false);\n";
            script+="   var etime=new Date().getTime();\n";
            script+="   fl.trace(\"Completed in \"+formatTime(etime-stime));\n";
            script+="   return etime-stime;\n";
            script+="}\n";
            script+="var totaltime=0;\n";
            script+="fl.trace(\"Start publishing...\");\n";
            for(var i=0;i<exportlist.length;i++){
                script+="totaltime+=exportswf("+(i+1)+","+exportlist.length+",\""+exportlist[i]+"\");\n";
            }
            script+="fl.trace(\"All done. Total time:\"+formatTime(totaltime));\n";
            var scriptfilename=folders[0]+"publish_script "+d.getFullYear()+"-"+d.getMonth()+"-"+d.getDate()+" "+d.getHours()+"-"+d.getMinutes()+"-"+d.getSeconds()+".jsfl";
            fl.trace("Script saved to:"+scriptfilename);
            //fl.trace(script);
            FLfile.write(scriptfilename,script);
        }else{
            if(prompt(exportlist.length+" files need to publish. Type OK to proceed.","OK")=="OK"){
                fl.trace("Start publishing...");
                for(var i=0;i<exportlist.length;i++){
                    fl.trace("["+(i+1)+"/"+exportlist.length+"] "+exportlist[i].substr(exportlist[i].lastIndexOf("/")+1)+"\t@ "+exportlist[i].substr(0,exportlist[i].lastIndexOf("/"))+"");
                    var t=exportswf(exportlist[i]);
                    fl.trace("Completed in "+formatTime(t));
                    totaltime+=t;
                }
                fl.trace("All done. Total time:"+formatTime(totaltime));
            }
        }
    }
}
function formatTime(num){
    var h=Math.floor(num/3600000);
    num=num%3600000;
    var m=Math.floor(num/60000);
    if(m<10){
        m="0"+m;
    }
    num=num%60000;
    var s=Math.floor(num/1000);
    if(s<10){
        s="0"+s;
    }
    num=num%1000;
    //if(h>0){
        return h+":"+m+":"+s+"."+num;
    //}else if(m>0){
    //  return m+":"+s+"."+num;
    //}else{
    //  return s+"."+num+"s";
    //}
}
function exportswf(flapath,swfpath){
    //return 0;
    var stime=new Date().getTime();
    var fla=fl.openDocument(flapath,true);
    if(swfpath==undefined){
        swfpath=flapath.substr(0,flapath.lastIndexOf("."))+".swf";
    }
    fla.exportSWF(swfpath,true);
    fla.close(false);
    var etime=new Date().getTime();
    return etime-stime;
}
function checkFolder(folder,list,checkSub,checkSwf,pre){
    if(pre==undefined){
        pre="";
    }
    //fl.trace(pre+folder+":"+checkSub+" "+checkSwf);
    var flas=FLfile.listFolder(folder+"*.fla","files");
    for(var i=0;i<flas.length;i++){
        //fl.trace(pre+" "+flas[i]);
        if(checkSwf=="true"){
            var flatime=Number("0x"+FLfile.getModificationDate(folder+flas[i]));
            var swfname=flas[i].substr(0,flas[i].lastIndexOf("."))+".swf";
            var swftime=Number("0x"+FLfile.getModificationDate(folder+swfname));
            //fl.trace(swfname+" "+flatime+" vs "+swftime);
            if(swftime<(flatime-100)){
                list.push(folder+flas[i]);
                fl.trace(pre+flas[i]);
            }
        }else{
            list.push(folder+flas[i]);
            fl.trace(pre+flas[i]);
        }
    }
    if(checkSub=="true"){
        var flds=FLfile.listFolder(folder,"directories");
        for(var i=0;i<flds.length;i++){
            //fl.trace(pre+i+" "+flds[i]+" of "+flds.length);
            checkFolder(folder+flds[i]+"/",list,checkSub,checkSwf,pre+" ");
            //fl.trace(pre+i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T13:05:57.560

我制作了一个脚本，用于从 Flash 文件批量导出 PNG，主时间线中的每帧一个：[flash-export](https://github.com/jrrbru/flash-export)。我不知道这是否解决了您的特定问题，但我在寻找答案时发现了这个问题，因此它可能对其他人有所帮助。

# java - 确定给定的文件路径字符串是远程还是本地

> ID：12961384
> 
> 赞同：-2
> 
> 时间：2012-10-18T18:32:03.657
> 
> 标签：java, file, filepath

我想确定给定的文件路径字符串是远程的还是本地的。

我查看了一些建议使用以下内容的 java 示例

1.  fileStore api 在 jdk7 中可用，但正在使用 jdk6
2.  通过搜索“www”或“http”确定使用正则表达式。

如果有更好的解决方法，请告诉我。？

本地文件路径：

c:/dir1/dir2/file.xml

远程文件路径：

https:///dir1/dir2/file.xml

更具体地说，给定 DNSName ，是否可以确定 file.xml 是在远程计算机还是本地计算机中。我知道我们可以使用 INetAddress 的 HostName(Ex:Saturn) 来解决这个问题。您能否让我知道我们是否可以使用 DNS 名称（例如：Saturn.rev.com）来确定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:40:23.363

您可以尝试使用 java.io.File 的实例访问该文件，然后如果没有抛出异常是本地文件。

# javascript - 切换 div 取决于选择哪一个

> ID：12961386
> 
> 赞同：0
> 
> 时间：2012-10-18T18:32:10.103
> 
> 标签：javascript, jquery, html, ajax, jquery-ui

```
 var header = $("#accordion");

            $.each(data, function () {
                header.append("<a id='Headanchor' href='javascript:toggleDiv($(this));'>" +   this.LongName + "</a>" + "<br />",
                "<div id='myContent' style='display:none'>" +
                "<ul>" +
                "<li>" + "ID: " + this.Id + "</li>" +
                "<li>" + "Short Name: " + this.ShortName + "</li>" +  "</ul>" + "</div>"
                );

                function toggleDiv(element) {
       var x = element.next();
       x.toggle();

       <div id="accordion">

</div> 
```

只有一个 div 的工作脚本，即首先

```
function toggleDiv() {

              $("#myContent").toggle();

} 
```

我想根据单击的锚标记来切换 div，但不能这样做。如果我使用 id 选择器，那么第一个 div 会被切换，但不会切换其他 div，因为它们会获得相同的 id，即 erong ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:39:43.383

In`javascript:toggleDiv($(this))` `this`指向窗口，而不是对象。见[JS 小提琴](http://jsfiddle.net/fGTgM/1/)。所以更改下面的代码：

```
"<a id='Headanchor' href='javascript:toggleDiv($(this));'>" 
```

到：

```
"<a id='Headanchor' href='#' onclick='return toggleDiv($(this));'>" 
```

和JS代码：

```
function toggleDiv(element) {
       var x = element.next();
       x.toggle();
       return false;
} 
```

此外，ID 应该是唯一的，并且在您的代码中您将拥有多个 Headanchor 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:35:44.830

隐藏所有，只显示你想要的方法：

```
$('#accordian>div').hide()      // hide all divs within the accordian
  .find('#selectedId').show();  // then show the one that matches the ID you want 
```

但是省去重新发明轮子和使用[jQueryUI](http://jqueryui.com)的麻烦。

# android - （Android）对话框中的列表只有一个带有复选框的项目

> ID：12961387
> 
> 赞同：4
> 
> 时间：2012-10-18T18:32:14.270
> 
> 标签：android, list, checkbox, dialog, alert

好的，我已经搜索了一段时间，但我找不到任何东西。我的应用程序在列表中显示学生的学校时间表，当用户单击列表中的课程时，它会显示一个对话框，其中列出了一些选项（编辑、删除、设置警报）。编辑和删除很容易，因为单击它们会发生一些事情，但我需要“设置警报”选项的帮助。我不希望它是可点击的，我只想要它右侧的复选框来打开或关闭警报。这是我的对话框的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(courseName)
    .setItems(R.array.courseList, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            switch(which) {
            case LIST_EDIT:
                break;
            case LIST_DELETE:
                break;
            case LIST_ALARM:
                break;
            }
        }
    });

    AlertDialog alert = builder.create();
    alert.show(); 
```

现在，我的资源 xml 文件中的字符串数组中有列表选项，id 为 courseList。LIST_EDIT、LIST_DELETE 和 LIST_ALARM 是最终的 int，对应于它们在列表中的索引。我真的不知道如何在警报列表项中添加一个复选框，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T16:03:09.783

如果您熟悉**片段**，则可以使用**FragmentDialog**，然后在**onCreateDialog**方法中根据需要创建对话框。

```
LayoutInflater inflater = getActivity().getLayoutInflater();
View view = inflater.inflate(R.layout.list, null);
_list = (ListView) view.findViewById(R.id.listview);
_adapter = new AdapterDialog(_context);
_list.setAdapter(_adapter);
//
AlertDialog.Builder builder = new AlertDialog.Builder(_context);
builder.setView(view);  builder.setTitle("Dialog").setPositiveButton(getActivity().getString(android.R.string.ok), this);

return builder.create(); 
```

或类似的东西然后使用单例方法或构造函数创建对话框

```
_dialog = Dialog.newInstance(R.string.title, this);
_dialog.setCancelable(true);
_dialog.show(getSupportFragmentManager(), null); 
```

使用您的方法，如果您想在列表中添加自定义行，则只能添加“按钮”之外的内容，您必须使用适配器

希望能帮助到你

# php - PHP Imagick：将 gif 动画循环设置为无？

> ID：12961390
> 
> 赞同：1
> 
> 时间：2012-10-18T18:32:23.333
> 
> 标签：php, animation, gif, imagick

我已经从图像目录成功生成了一个动画 gif。不过，我不知道如何让它不循环，它只是一直在继续。我想我在 ImageMagick 中找到了设置，但在 Imagick PHP 库中没有看到相应的设置方法。有谁知道它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:28:28.517

我花了一段时间才找到它，因为错过了 IMagick 文档。但是您可以使用 IMagick 设置动画 gif 的循环。

当我查看在正确的 ImageMagick 代码中写出 Netscape Loop 扩展的代码时，它使用了一个内部变量来调用`iterations`尽管`-loop`在命令行上使用的图像。它始终在内部使用*迭代*，然后一直到 IMagick 代码中。

* * *

来自 ImageMagick 代码：[`coders/gif.c`](http://trac.imagemagick.org/browser/ImageMagick/trunk/coders/gif.c?rev=3)

```
1689        if ((GetPreviousImageInList(image) == (Image *) NULL) &&
1690                (GetNextImageInList(image) != (Image *) NULL) &&
1691                (image->iterations != 1))
1692              {
1693                /*
1694                  Write Netscape Loop extension.
1695                */
1696                (void) LogMagickEvent(CoderEvent,GetMagickModule(),
1697                   "  Writing GIF Extension %s","NETSCAPE2.0");
1698                (void) WriteBlobByte(image,(unsigned char) 0x21);
1699                (void) WriteBlobByte(image,(unsigned char) 0xff);
1700                (void) WriteBlobByte(image,(unsigned char) 0x0b);
1701                (void) WriteBlob(image,11,(unsigned char *) "NETSCAPE2.0");
1702                (void) WriteBlobByte(image,(unsigned char) 0x03);
1703                (void) WriteBlobByte(image,(unsigned char) 0x01);
1704                (void) WriteBlobLSBShort(image,(unsigned short) image->iterations);
1705                (void) WriteBlobByte(image,(unsigned char) 0x00);
1706              } 
```

* * *

请参阅文档：[`IMagick::setImageIterations( int $iterations )`](http://www.php.net/manual/en/imagick.setimageiterations.php)

设置`$iterations = 0`使其无限循环。

帧之间的延迟是使用我相信的刻度格式设置的，使用：

*   [`Imagick::setImageDelay ( int $delay )`](http://www.php.net/manual/en/imagick.setimagedelay.php)--`$delay`刻度在哪里
*   [`Imagick::setImageTicksPerSecond ( int $ticks_per-second )`](http://www.php.net/manual/en/imagick.setimagetickspersecond.php).

# java - Java许多arraylists - 查找公共元素

> ID：12961391
> 
> 赞同：0
> 
> 时间：2012-10-18T18:32:25.600
> 
> 标签：java, search, arraylist

我有一个生成许多数组列表的应用程序，存储在一个集合中。所有的数组列表总是有一个共同的元素。

我需要弄清楚哪个是共同元素。我用两个列表和使用来管理它，`List.contains(...)`但需要将它扩展到许多列表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:33:48.510

如果您`retainAll()`将所有的`List`'s 都添加到 a 中`Set`，您最终将得到集合中的所有公共元素。

```
Set set =  new HashSet();
for ( List list : yourLists ) 
{ 
    set.addAll( list );
} 
for ( List list : yourLists )
{
    set.retainAll( list );
} 
```

这几乎可以简单地优化为只遍历列表一次（并使用等于所有现有列表的大小*加上**第一个*列表的额外大小的堆空间），但出于说明目的，这个版本更好......

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:44:26.523

使用将每个数组列表中的唯一元素映射到其频率的哈希表（即，即使同一数组列表中的元素多次出现，它也必须只增加一次）。遍历哈希表，直到值等于数组列表的数量。对应的键就是我们要找的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:33:31.240

使用[retainAll()](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)，这样在每一步你都会有列表的交集

```
list1.retainAll(list2);
list1.retainAll(list3); 
```

所以这种方式`list1`将是所有元素的交集。现在，如果要复制公共元素，则需要将最终列表添加到 Set 并完成。

# java - 如何在另一个模块中自动连接服务？

> ID：12961394
> 
> 赞同：2
> 
> 时间：2012-10-18T18:32:35.223
> 
> 标签：java, spring, maven, spring-mvc

我正在开发包含几个子模块的应用程序。在其中一个模块上，我有这样的标题服务：

```
@Transactional
@Service("mySimpleService")
public class MySimpleServiceImpl implements MySimpleService {} 
```

在另一个模块上，我有一个控制器，我想在其中使用 MySimpleService 方法之一。所以我有类似的东西：

```
@Controller
public class EasyController {    

    @Autowired
    private MySimpleService mySimpleService;

    @RequestMapping("/webpage.htm")
    public ModelAndView webpage(@RequestParam,
                                @RequestParam,
                                HttpServletRequest request,
                                HttpServletResponse response) {
        ModelAndView mav = new ModelAndView(”webpage”);
        mav.addObject(”name”, mySimpleService.getObject());
        return mav;
    }
} 
```

在`mav.addObject(”name”, mySimpleService.getObject());`我得到的线上`NullPointerException`。我不知道为什么。我没有收到类似于`Could not autowire field`但仅`NullPointerException`.

我还以这种方式创建了自己的拦截器来检查我的任务中的其他一些想法：

```
public class CustomInterceptor extends HandlerInterceptorAdapter {

    @Autowired
    private MySimpleService mySimpleService;

    @Override
    public boolean preHandle(HttpServletRequest request, 
                             HttpServletResponse response,
                             Object handler)
                             throws Exception {         
        request.setAttribute("attr", mySimpleService.getAttribute());
        return true;
    }    
} 
```

这个拦截器当然是在调度程序 servlet 中声明的。在我的日志中，我可以`NullPointerException`在 line:看到`request.setAttribute("attr", mySimpleService.getAttribute());`。所以这正是从另一个应用程序模块访问服务的问题。

我怎样才能做到这一点？

我听说过使用我的服务构建 EJB 并使用`JNDI`或使用 Maven 共享它的想法 - 在构建应用程序期间将文件夹与我的服务复制到目标模块。我试图做第二个选项，但它不起作用，我无法检查应对是否成功。是否可以检查基于 Maven 的解决方案？您还有其他建议吗？

**编辑**

这是来自目标模块调度程序 servlet 的组件扫描：

```
<context:component-scan base-package="my.package.target.module.controller" annotation-config="false"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:50:27.790

我认为您的问题是 annotation-config="false"。annotation-config 功能是打开@Autowired 注释的功能。如果没有自动装配，您的 mySimpleService 属性不会被注入并保持为空。然后你得到 NullPointerException。

尝试

```
<context:component-scan base-package="my.package.target.module.controller" annotation-config="true"/> 
```

顺便说一句 - 我从来没有使用过这个确切的配置，因为我不做扫描。我总是使用单独的元素：

```
<context:annotation-config /> 
```

# monitoring - 通过 Visual GC 远程监控应用程序

> ID：12961396
> 
> 赞同：3
> 
> 时间：2012-10-18T18:32:36.507
> 
> 标签：monitoring, visualvm

我正在尝试使用 VisualVM 和 Visual GC 监视远程计算机上可用的应用程序。

我`jmxremote`在远程端启用了如下：

```
-Dcom.sun.management.jmxremote, -Dcom.sun.management.jmxremote.port=8888,
-Dcom.sun.management.jmxremote.ssl=false, -Dcom.sun.management.jmxremote.authenticate=false 
```

通过 VisualVM 进行监控时，一切正常，但 VisualGC 不显示任何统计信息（`Not Supported for this JVM`出现错误）。

在尝试监视一个本地应用程序时，VisualGC 运行良好......

一旦`jstad`在远程 jvm 上启动，远程应用程序就成功了。

这是 VisualGC 的一个已知问题...？

远程 JVM - 1.5
本地 JVM - 1.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:57:31.840

对，`jstatd`必须在远程主机上运行，​​因为 VisualGC 使用`jvmstat`而它不使用`jmx`.

# javascript - Three.js 在它自己的轴上旋转

> ID：12961397
> 
> 赞同：1
> 
> 时间：2012-10-18T18:32:37.293
> 
> 标签：javascript, 3d, three.js

我一直在尝试在 3D 空间中创建宇宙飞船。它直接向前飞。您可以通过滚动宇宙飞船并上下倾斜鼻子来改变方向。

当我改变飞船的 Z 角时，它会按预期滚动。当我改变飞船的 X 角度时，鼻子会上下倾斜。当我两者都做时，它*不会*按预期工作。

看来我的宇宙飞船是在世界的轴上旋转，而不是我的宇宙飞船的轴。我的意思是，当一个物体旋转时，它的轴是对的吗？显然不是。

像往常一样，非常感谢您的帮助。

这是显然不起作用的演示：[http ://www.timseverien.nl/random/ohnoez/](http://www.timseverien.nl/random/ohnoez/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:07:26.850

查看四元数。在 ThreeJS 中，您要查看的类是 THREE.Quaternion。

四元数一般用在飞行模拟类游戏中，让你在飞行器的局部空间中旋转，不会被“云台锁定”。（那是你的两个轴平行的时候，你失去了一个自由度。）

这是对四元数的一个很好而且很有趣的解释： [http ://www.isner.com/tutorials/quatSpells/quaternion_spells_14.htm](http://www.isner.com/tutorials/quatSpells/quaternion_spells_14.htm)

我希望这能让你走上正确的轨道......

编辑：Isner.com 早已离线，但我在 Wayback Machine 上找到了上述教程：[https ://web.archive.org/web/20120601095457/http://www.isner.com/tutorials/quatSpells/quaternion_spells_14 .htm](https://web.archive.org/web/20120601095457/http://www.isner.com/tutorials/quatSpells/quaternion_spells_14.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T17:58:43.600

您不必为此了解四元数 - 只需看看这里：

[Three.js - 围绕某个轴旋转球体](https://stackoverflow.com/questions/16319742/three-js-rotating-a-sphere-around-a-certain-axis)

不止一个简单的解决方案！

# python - dajaxice 的 django/python TEMPLATE_LOADER 错误

> ID：12961398
> 
> 赞同：4
> 
> 时间：2012-10-18T18:32:38.903
> 
> 标签：python, ajax, django, dajaxice

我想使用 django / djanxice 并在 setup.py、url.py 等中进行了设置...

但是当我运行服务器时，会发生错误。

```
/Library/Python/2.7/site-packages/django/template/loader.py:113: UserWarning: Your TEMPLATE_LOADERS setting includes 'django.template.loaders.eggs.Loader', but your Python installation doesn't support that type of template loading. Consider removing that line from TEMPLATE_LOADERS.
  warnings.warn("Your TEMPLATE_LOADERS setting includes %r, but your Python installation doesn't support that type of template loading. Consider removing that line from TEMPLATE_LOADERS." % loader)
No handlers could be found for logger "dajaxice" 
```

我用谷歌搜索，但找不到这样的错误。

任何人都可以帮助为什么 python 安装不支持这个 Templat_Loaders？

我的 python 版本是 2.7.3，使用 OS X v10.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:51:48.610

`.egg`资源加载器`django.template.loaders.eggs.Loader`使用[setuptools](http://pypi.python.org/pypi/setuptools)包中的[`pkg_resources`](http://packages.python.org/distribute/pkg_resources.html)模块（如果可用）。如果在您的系统上不可用，您将收到此异常。`pkg_resources`

setuptools 是独立于 Python 解释器的安装。

您应该按照[此链接](http://pypi.python.org/pypi/setuptools#cygwin-mac-os-x-linux-other)上的说明安装 setuptools 。

# iphone - iPhone不会自动旋转到倒置

> ID：12961401
> 
> 赞同：11
> 
> 时间：2012-10-18T18:32:56.653
> 
> 标签：iphone, objective-c, ios, uiinterfaceorientation

我有

```
<key>UISupportedInterfaceOrientations</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
    <string>UIInterfaceOrientationPortraitUpsideDown</string>
</array> 
```

在 info.plist 中并进行了搜索并将每个实例设置`shouldAutorotateToInterfaceOrientation`为 return `YES`。但在 iPhone 上，它的行为就好像不支持倒置一样。UpsideUp 肖像作品，风景作品，updsidedown 显示风景。为什么？

iPad 在所有方向都可以正常工作。他们共享 .xibs

* * *

**更新**

我已经添加了

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;    
} 
```

在每一个存在的实例之后`shouldAutorotateToInterfaceOrientation`，仍然没有爱。

我的目标是 iOS **4.3**，但我的模拟器和物理设备运行的是 iOS **6**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:52:00.603

根据您已经尝试过的内容，需要更多背景信息吗？您是否在使用基于 NIB 的设置和导航控制器、标签栏控制器或类似的东西？如果是这样，您需要添加一个类别来支持它，因为您无法在 NIB（或一般情况下）中覆盖这些类的实现

[https://stackoverflow.com/a/12758715/490180](https://stackoverflow.com/a/12758715/490180)

谈论 iPhone 5，但问题确实与 iOS6 相关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T19:24:03.657

这是设计使然。原因是 iPhone 是一部手机，如果 UI 可以上下颠倒，用户在来电时就会遇到问题。处理上下颠倒的 UI 没有很好的顺序。如果您的应用倒置旋转，则来电屏幕必须相对于您的应用倒置，这将不是一个好的体验。如果不是这样，用户将在接听电话时将硬件倒置，这会很有趣，但不是很好。

# linux - 如何从 Linux 内核空间获取用户名

> ID：12961406
> 
> 赞同：6
> 
> 时间：2012-10-18T18:33:07.877
> 
> 标签：linux, module, linux-kernel, system-calls

我正在做一些 Linux 模块开发，限制我只能使用内核可用的库，并且我想获取与我的模块的用户名交互的用户的用户名。又名他们的“whoami”。我的模块实际上是围绕系统调用...我可以从内核空间中的 current->pid 获取 pid。有没有办法，也许，使用 pid 来追踪 pid 所属的用户？还是另一种更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:38:39.427

您可以使用[filp_open](http://lxr.free-electrons.com/source/fs/open.c#L922)函数从内核打开`/etc/passwd`文件。接下来，您需要使用[file_operations](http://lxr.free-electrons.com/source/include/linux/fs.h#L1777)来读取文件：

```
struct file * file = filp_open(...);
file->f_op->read(file, ...); 
```

阅读文件内容可能有助于`UID -> username`翻译。

# java - 在设计选项卡中双击对象后删除 Netbeans 自动生成的代码

> ID：12961409
> 
> 赞同：14
> 
> 时间：2012-10-18T18:33:23.160
> 
> 标签：java, events, user-interface, object, netbeans

所以我使用 Netbeans 和“设计”选项卡，放置标签、文本框等。很好，但是当你双击说标签时，它会自动生成以下代码：

```
private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
} 
```

现在我不希望它这样做，但是当我突出显示并尝试删除它时 - Netbeans 不允许我这样做。我该如何删除这个？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T18:45:01.287

在设计模式中，您选择特定对象并单击属性下的事件并从事件属性中删除事件

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-05T17:48:43.080

要回答布赖恩关于更一般情况的问题：

如果您有隐藏在设计模式下的自动生成变量，并且您无法选择和删除它们，您通常可以通过以下步骤将它们删除（在 NetBeans7.4 中）：

1.  进入设计模式到顶部窗口`menu -> Windows -> Navigator`。您将看到左侧（通常）弹出组**“导航器” 。**
2.  **现在您可以使用右键**菜单删除不需要的变量（或编辑它们） 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-23T17:25:58.107

## 最简单的解决方案

关闭 net beans IDE 并在系统中可用的文本编辑器中打开需要更改的源文件。然后您可以删除（也可以编辑）您的代码行。然后保存更改。之后打开netbeans就可以看到netbeans的变化了。

希望对你有帮助！！

# android - 多个 Facebook 帐户绑定到一个应用程序

> ID：12961421
> 
> 赞同：0
> 
> 时间：2012-10-18T18:34:01.523
> 
> 标签：android, facebook, facebook-access-token

我试图弄清楚将多个 Facebook 帐户绑定到我的应用程序中。这样当不同的用户登录时，他们就可以访问各自的 Facebook 帐户。

我想让我的应用程序有它自己的登录。用户登录后，他们可以选择连接他们的 Facebook 帐户。但是因为有多个用户，我需要弄清楚如何关联多个 Facebook 帐户。

这是我到目前为止得到的：

1.  **Facebook Dialog Auth**因为 SSO 使用 Facebook 应用程序，因此一次只允许一个 fbook 帐户。
2.  **服务器端身份验证**，因为我希望访问令牌持续相当长的时间（60 天），而每个用户在使用我的应用程序时都不必重新登录 Facebook。

这是我的挂断：

1.  一旦用户登录我的应用程序（在已经关联他们的 Facebook 帐户之后），我如何重新应用令牌。这是正确的方法吗？任何人都可以提供重新应用令牌的教程或代码吗？

    ```
    private Facebook mFb;
    mFb.setAccessToken(TOKEN); 
    ```

2.  谁能提供有关如何设置**服务器端身份验证**的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:15:58.553

对于适用于 Android 的新 Facebook SDK 3.0b (http://developers.facebook.com/android)，我们包含一个名为 SwitchUserSample 的新示例，这对您来说可能是一个很好的起点。

在撰写本文时（因为 SDK 仍处于测试阶段并且在“预览”分支上），您可以在 GitHub 中找到示例代码：[https://github.com/facebook/facebook-android-sdk/tree/ preview/samples/SwitchUserSample](https://github.com/facebook/facebook-android-sdk/tree/preview/samples/SwitchUserSample) - 当然，示例（带有项目文件）也在 SDK 本身中。

# php - autloader应该在MVC中去哪里？

> ID：12961422
> 
> 赞同：4
> 
> 时间：2012-10-18T18:34:14.283
> 
> 标签：php, model-view-controller, front-controller, autoloader

我正在尝试构建一个简单的 MVC 框架来更好地理解某些概念。我认为需要解决的第一件事是处理我的应用程序的所有请求的前端控制器。

一旦我开始考虑它，我就不确定加载我的应用程序将使用的类的最佳方式。我目前的想法是我的自动加载器应该位于前端控制器中，因为每个请求都使用它。大多数框架通常把它放在哪里？浏览一些已经构建的框架对我没有多大帮助，因为很多功能远远超出了我的需要，使它变得非常复杂以至于难以理解。

我尝试使用的类加载器可以在这里找到[https://gist.github.com/221634](https://gist.github.com/221634)

只是想弄清楚如何适当地构建和组织一个简单的 MVC 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:34:23.067

你应该把它放在你的引导文件中。

您可以这样做：

1.  将每个 HTTP 请求强制发送到您的前端控制器、index.php、app.php 或您想如何调用它。
2.  Front Controller 可以定义框架中使用的一些常量，然后包含您的 Bootstrap.php 文件。Bootstrap 将启动您的应用程序。
3.  现在，我在 Bootstrap 中做的第一件事就是注册自动加载。这样我可以很容易地得到 \System\Router\Router 类，或 \System\Router\Dispatcher 类，你明白了。

还有一件事，您甚至可以使用 PSR0 类加载器注册您的应用程序模型文件夹。因此，假设您的 Models 文件夹如下所示：

```
application/Models/
    - Entities
    - Services
        Email.php
        Cache.php 
```

从您的控制器内部，您可以轻松获得这样的模型

```
public function someController()
{
    $email = new \Models\Services\Email();
    // Do stuff with email service
} 
```

对您的问题的简短回答是，最好的事情是首先为您提供一些“摆动”空间的前端控制器，然后从那里加载启动您的应用程序的引导程序，引导程序中的第一件事是要求您的类加载器，并通过应用程序注册要使用的库。

然后你甚至可以为你的应用程序 Controllers 和 Models 文件夹注册自动加载，并且在 Bootstrap 文件的末尾，当你要发送请求时，你可以像这样请求 Controller：

```
$app = new '\\Application\\Controllers\\' . $class;
// Dispatch request with call_user_func_array or ReflectionMethod and ReflectionClass 
```

不需要控制器类，因为它是自动加载的，只需为它提供正确的命名空间。

很好的问题，希望这会有所帮助！很高兴看到其他人在玩他们的客户 MVC :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:37:13.963

绝对是在引导阶段！

自动加载器应该是每个 PHP 应用程序的一部分，并且它应该是（之一）第一个初始化的类/代码。

我的 MVC 初始化步骤：

*   索引是入口点
*   用于初始化错误处理、自动加载器和[IoC的引导程序](http://martinfowler.com/articles/injection.html)
*   应用程序，主要是 MVC 应用程序
*   路由机制
*   控制器
*   模型
*   看法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:48:13.300

那么，问题“它去哪儿了？” 对我来说，提出了两个更精确的问题：

1.  包含自动加载器函数/类定义的文件存储在哪里？
2.  在您的请求调度周期中，它应该在哪里被实例化、配置并允许它发挥它的魔力？

第一个问题 - “将包含类的文件放在哪里？” - 可能对您来说不是那么重要，因为您已经确定了要使用的自动加载器类。确切的答案取决于您自己的框架应用程序结构，但对于像您引用的那样的外部开发类，在`lib`or`vendor`目录中的某个位置可能是有意义的。

对于第二个问题 - “在哪里实例化、配置等？” - 答案是：尽可能早地在请求周期中，这样您就可以获得稍后引用的所有类的自动加载的好处。实际上，这可能意味着在您的引导过程中的某个地方。

当然，这通常意味着为了加载您的自动加载器类，您可能需要手动`require`/`include`调用，实例化您的自动加载器对象，并使用命名空间和路径对其进行配置。

# python - Python中不同深度的多个3D对象的透视投影

> ID：12961429
> 
> 赞同：2
> 
> 时间：2012-10-18T18:34:35.463
> 
> 标签：python, 3d, rendering, projection, perspective

对于我的个人项目，我需要：

1.  生成从 3D 对象到 2D 平面的透视投影（在空间中定义的点上，这将是相机）。

2.  获取透视投影的确切区域/点坐标

3.  生成多个 3D 对象的透视投影，其中一些对象可能位于其他对象之后。

4.  渲染场景（只有一张图像，不会有任何动画，所以不需要实时渲染）。

对于第 1,2 和 4 点，我想我已经找到了一种使用 PyGame 的方法，如下所述：http: [//codentronix.com/2011/04/21/rotating-3d-wireframe-cube-with-python/](http://codentronix.com/2011/04/21/rotating-3d-wireframe-cube-with-python/)

但是对于第 3 点，我有点卡住了，因为即使我可以获得每个对象的透视投影，我怎么知道哪个对象是真正可见的，哪个（完整对象或部分对象）不可见？

我真的需要准确地知道对象的哪些部分可见，哪些部分不可见，因此我的最终目标是拥有一个屏幕图像矩阵，其中每个对象的投影区域都清晰定义。

例如，如果矩阵包含我的屏幕图像的所有像素，并且我们有 10 个对象，我们将在没有对象时得到 0，在我们可以看到对象 n1 时得到 1，在对象 n2 可见时得到 2，等等。

我必须补充一点，我是一位在 Python 和许多其他语言方面有成就的开发人员，但我之前从未做过任何与游戏相关的开发或渲染开发。

有人可以帮助我走上正确的轨道吗？

PS：附带问题：如果您还可以指出比 PyGame 更好的透视投影和渲染优化实现，我会非常感兴趣！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:22:37.263

我建议将 OpenGL 用于此类任务。学习基本的 OpenGL（这看起来很基础）并不费力。看看[这里](http://nehe.gamedev.net/tutorial/lessons_01__05/22004/)（众所周知的教程）和[这里](http://www.siafoo.net/snippet/316)（使用 Python、Qt 和 OpenGL 的基本示例）。我认为通过一些努力，这可能需要你一天的时间才能开始。

# java - 公共包/类不应成为公共 API 的一部分

> ID：12961430
> 
> 赞同：2
> 
> 时间：2012-10-18T18:34:43.160
> 
> 标签：java, api, maven

我有公共包/类，它们不应该是公共 API 的一部分。但是我想我不能制作一个新的 API-maven 包，因为核心项目也使用公共 API。

这应该是一个常见的情况，但我认为这是一个不允许细粒度访问的 Java 问题。

您对如何“保护”不访问不应属于公共 API 的公共类有任何提示吗？然而，这似乎是大多数开发人员没有考虑过或至少没有做任何事情来保护这些类不被外部访问的常见情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:24:40.897

通常，不应访问的类被放入另一个名为“internal”的包中。所以你会有**com.company.application**用于 api 类，而**com.company.application.internal**用于实现类。但是没有强制执行。在 OSGI 模型中，对于从包中导出哪些包有更细粒度的控制，但在纯 Java 中则不然。

# ruby-on-rails - 从 Ruby 中的二维数组中的 SQL 查询中获取结果

> ID：12961433
> 
> 赞同：1
> 
> 时间：2012-10-18T18:35:01.680
> 
> 标签：ruby-on-rails, ruby, arrays, multidimensional-array

我的 Ruby 文件中有一个查询：

```
@mastertest = connection.execute("select code_ver, date from mastertest") 
```

`@mastertest`它像二维数组一样对待，因为当我打印行时，我得到：

```
@mastertest.each do |row|
puts row[0] : row[1]
end 
```

这将打印所有内容`code_ver`和`date`每一行。

我无法对其执行任何其他操作。我无法对数组进行排序，也无法执行数组的深拷贝。我猜这是Ruby考虑的某种MySQL2类型。如何将其转换为普通的二维数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:52:49.313

@mastertest 的类是`Mysql2::Result`; 它只提供[`each`和`fields`方法](http://rubydoc.info/gems/mysql2/0.2.6/Mysql2/Result)

这是将结果转换为二维数组的一种方法的示例：

```
sql = "select <field1>, <field2> from <table> where <conditions>"
result_array = []

result = ActiveRecord::Base.connection.execute(sql)

index = 0 
result.each do |row|
  result_array[index] = []
  result_array[index] << row[0]
  result_array[index] << row[1]
  ...
  result_array[index] << row[n]
  ...
  index += 1
end 
```

# mysql - mysql通过许多获取列组的最大值

> ID：12961437
> 
> 赞同：0
> 
> 时间：2012-10-18T18:35:12.583
> 
> 标签：mysql, sql, database

我有一个mysql表：

```
id       int
a        varchar
b        varchar
c        varchar
version  int
active   bool 
```

我想通过 a、b 和 c 获取最大版本组，所以我有以下查询来做到这一点：

```
select a, b, c, max(version) as version from mytbl where active = 1 group by (a, b, c) 
```

但这会返回

```
Operand should contain 1 column(s) 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:36:38.300

您的 group by 语法错误，应该如下所示：

```
group by a, b, c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:38:05.780

只需删除分组后的左括号和右括号。应该是

```
select a, b, c, max(version) as version from mytbl where active = 1 group by a, b, c 
```

# python - 在 Python2.7/PyGTK 中制作“全选”复选框

> ID：12961440
> 
> 赞同：0
> 
> 时间：2012-10-18T18:35:25.610
> 
> 标签：python, gtk, pygtk

使用 PyGTK，我试图在第一列中创建一个带有 CheckButtons 的 ListStore，以及一个类似于 GMail 和 Yahoo! 的“全选”CheckButton。邮件可以快速选择或取消选择列表中的每个 CheckButton。如果它被切换，列表中的所有按钮都应该改变以匹配它。它还应该改变以反映单个按钮被按下时的状态。（检查是否所有按钮都被检查，如果所有按钮都被清除则清除，否则处于中间状态）所以我希望按钮之间的关系是双向的，所以它们总是保持同步。

这是我目前的尝试。目前“全选”检查按钮按预期工作，但单击列表中的按钮只会将全选按钮设置为其中间状态，即使我已经确认 3 部分条件工作正常，所以它的 set_active 方法是按预期被调用。另外，我不确定当每个回调触发另一个回调时，它如何不会进入无限的相互递归循环。

```
#store is a ListStore whose first column has been packed with a
#CellRendererToggle, checkCell

selectAllBox = gtk.CheckButton("Select All")

def OnSelectAll(toggleButton):
    toggleButton.set_inconsistent(False)
    value = toggleButton.get_active()
    def Toggle(store, path, itr, v):
        store[path][0] = v
    store.foreach(Toggle, value)

selectAllBox.connect("toggled", OnSelectAll)

def OnToggle(cellRenderer, path):
    value = not store[path][0]
    store[path][0] = value

    checked = list()
    store.foreach(lambda store, path, itr: checked.append(store[path][0]))
    if all(checked):
        selectAllBox.set_active(True)
    elif not any(checked):
        selectAllBox.set_active(False)
    else:
        selectAllBox.set_inconsistent(True)

checkCell.connect("toggled", OnToggle) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:16:34.317

确保`set_inconsistent(False)`当您不希望检查按钮处于不一致状态时。

此外，例如，在将活动复选框设置为活动时，GTK 通常不会触发信号非常好。

# sql-server - MS-SQL 按降序排序输出

> ID：12961444
> 
> 赞同：2
> 
> 时间：2012-10-18T18:35:31.633
> 
> 标签：sql-server, coldfusion

我在数据库中有数千行记录的这个 MS-SQL 查询：

```
SELECT DISTINCT TOP 7 DATENAME(MM, mydatetime) + ' ' + CAST(DAY(mydatetime) AS VARCHAR(2)) as thedate
    , MONTH(mydatetime)
    , DAY(mydatetime)
    , COUNT(Page) as totalcount
    , count(DISTINCT Page) as visitors
  FROM someTable
  WHERE Page LIKE '%AEC%'
  GROUP BY DATENAME(MM, mydatetime) + ' ' + CAST(DAY(mydatetime) AS VARCHAR(2))
    , MONTH(mydatetime)
    , DAY(mydatetime)
  ORDER BY MONTH(mydatetime) DESC
    , DAY(mydatetime) DESC 
```

它会输出这个：

```
thedate     | totalcount | visitors
-----------------------------------
October 17  |     4      |    1
October 15  |     1      |    1
October 12  |     1      |    1
October 3   |     3      |    3
October 2   |     42     |    22
September 28|     2      |    1
September 21|     14     |    10 
```

我的问题是我根本无法按降序输出它，所以它看起来像这样：

```
thedate     | totalcount | visitors
-----------------------------------
September 21|     14     |    10
September 28|     2      |    1
October 2   |     42     |    22
October 3   |     3      |    3
October 12  |     1      |    1
October 15  |     1      |    1
October 17  |     4      |    1 
```

因此，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T18:49:01.563

对于您的实际要求，您可以将当前查询用作派生表并以您想要的方式排序：

```
SELECT *
FROM (  SELECT DISTINCT TOP 7 DATENAME(mm, mydatetime) + ' ' 
                              + CAST(DAY(mydatetime) AS VARCHAR(2)) AS thedate, 
                              MONTH(mydatetime)                     AS theMonth, 
                              DAY(mydatetime)                       AS theDay, 
                              COUNT(page)                           AS totalcount, 
                              COUNT(DISTINCT page)                  AS visitors 
        FROM   sometable 
        WHERE  page LIKE '%AEC%' 
        GROUP  BY DATENAME(mm, mydatetime) + ' ' 
                  + CAST(DAY(mydatetime) AS VARCHAR(2)), 
                  MONTH(mydatetime), 
                  DAY(mydatetime) 
        ORDER  BY MONTH(mydatetime) DESC, 
                  DAY(mydatetime) DESC) A
ORDER BY theMonth, theDay 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:41:38.140

您需要`DESC`从 ORDER BY 子句中删除。由于 DESC，您的结果是完全相反的顺序！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:43:30.797

要获得您指定的订单，仅包括您想要的返回结果中的日期，您需要删除 desc 并将日期过滤器添加到您的 where 子句。

如果您的过滤器正确，这也可以让您摆脱最重要的声明。

```
SELECT DISTINCT TOP 7 DATENAME(MM, mydatetime) 
    + ' ' + CAST(DAY(mydatetime) AS VARCHAR(2)) as thedate
    , MONTH(mydatetime)
    , DAY(mydatetime)
    , COUNT(Page) as totalcount
    , count(DISTINCT Page) as visitors
  FROM someTable
  WHERE Page LIKE '%AEC%' 
    AND /* filter date range i.e. MONTH(mydatetime) > 9 AND YEAR(mydatetime) > 2011 */
  GROUP BY DATENAME(MM, mydatetime) + ' ' + CAST(DAY(mydatetime) AS VARCHAR(2))
    , MONTH(mydatetime)
    , DAY(mydatetime)
  ORDER BY MONTH(mydatetime) 
    , DAY(mydatetime) 
```

# scala - Scala：为什么不能编译？

> ID：12961452
> 
> 赞同：5
> 
> 时间：2012-10-18T18:35:58.153
> 
> 标签：scala, generics

鉴于：

```
class Foo[T] {
 def get: T
}

class Bar
class FooBar extends Foo[Bar] {
 def get = new Bar
}

object Baz {
    def something [T, U <: Foo[T]] (foo : Class[U]): T = foo.newInstance.get
} 
```

我应该能够做这样的事情，对吧？

```
Baz.something(classOf[FooBar]) 
```

奇怪的是，这是抛出：

```
inferred type arguments [Nothing,this.FooBar] do not conform to method something's type parameter bounds [T,U <: this.Foo[T]] 
```

这很奇怪：S。顺便说一句，我在迁移一些与我在这里编写的代码等效的 Java 代码时遇到了这个问题，并且运行良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:04:58.507

您遇到了 Scala 类型推断的更烦人的限制之一！请参阅[此答案](https://stackoverflow.com/a/10347307)，以清楚地解释为什么编译器在这里阻塞。

你有几个选择。最简单的是，您可以自己提供类型：

```
Baz.something[Bar, FooBar](classOf[FooBar]) 
```

但这太冗长了。如果你真的不关心`U`，你可以把它排除在类型参数列表之外：

```
object Baz {
  def something[T](foo: Class[_ <: Foo[T]]): T = foo.newInstance.get
} 
```

现在`FooBar`将在您的示例中正确推断。您还可以使用上面链接的答案中讨论的技巧：

```
object Baz {
  def something[T, U <% Foo[T]](foo: Class[U]): T = foo.newInstance.get
} 
```

*为什么*这个工作有点棘手——关键是在视图绑定被脱糖后，`T`不再出现在`U`'s 绑定中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T19:03:10.787

它不会编译，因为`T`它没有出现在参数列表中的任何位置，因此无法推断（或者更确切地说，它被推断为`Nothing`）。

你可以像这样修复它：

```
def something [T] (foo : Class[_ <: Foo[T]]): T = foo.newInstance.get 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:03:25.950

显式添加类型似乎有效：

```
scala> Baz.something[Bar,FooBar](classOf[FooBar])
res1: Bar = Bar@3bb0ff0 
```

通常，当您得到一个`Nothing`您期望推断出其他类型的位置时，意味着由于某种原因编译器无法推断出该特定位置的类型。

也就是说，我提出一个问题：我们如何重构代码以便推断出类型？@Régis 的回答显示了解决方案。

# permissions - iOS 6 移除通讯录权限入口

> ID：12961456
> 
> 赞同：5
> 
> 时间：2012-10-18T18:36:07.230
> 
> 标签：permissions, popup, ios6, addressbook

所以对于新的 iOS 6，我知道我们应该打电话

```
ABAddressBookRequestAccessWithCompletion 
```

当我们要访问用户的通讯录时。

我在后面的代码块中编写了一些新代码，并想测试该代码在用户如何响应请求权限的弹出窗口方面的功能。

但是，我已经调用过一次，现在权限卡在我的设备上，并且该弹出窗口永远不会出现，因为权限已经在手机上。

我已经进入隐私>联系人并将其设置为打开和关闭，两者都不会出现弹出窗口。那么有没有办法让我正确删除隐私部分中的权限条目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T23:52:29.307

导航到设置->常规->重置->重置位置和隐私

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:41:38.550

没关系，虽然我找不到从手机本身删除权限条目的方法，但我找到了一种解决方法。

我更改了 bundleIdentifier 以使手机将其视为一个全新的应用程序。这让我可以让弹出窗口显示我想要的所有内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:43:49.227

您可以在方法中使用 `ABAddressBookGetAuthorizationStatus`来`viewDidAppear`检查授权访问通讯录的状态。

# postgresql - 从 Postgres 9.1 中 tsvector 列上的 GIN 索引中检索键

> ID：12961459
> 
> 赞同：3
> 
> 时间：2012-10-18T18:36:17.823
> 
> 标签：postgresql, indexing, full-text-search, gwt-gin

我有一组文档，我想在 Postgres 9.1 中对其进行全文搜索，因此将它们添加为 tsvector 的内容，然后在此列上创建 GIN 索引似乎很简单。我对 GIN 索引的理解是，使用的键是（取决于使用的文本搜索配置）原始单词列表或原始文档集合中的标准化词位。但是，对于我们开发的其他功能，我真的很想从 GIN 索引中获取该键列表，以放入不同表中的另一列以供使用。这可能吗？

编辑：我已经[在 pgsql-general mailing list 上重新发布了这个](http://archives.postgresql.org/message-id/CAF6hsPjHgoHWgsH62JbTiZnqHP0-JqZS7xzVyS+pMC6AfLx4bQ@mail.gmail.com)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:11:13.470

我假设您已[根据文档](http://www.postgresql.org/docs/current/static/textsearch-tables.html#TEXTSEARCH-TABLES-INDEX)创建了表达式索引，例如：

```
CREATE INDEX pgweb_idx ON pgweb USING gin(to_tsvector('english', body)); 
```

如果是这样，据我所知，您不能直接从索引中提取值，如：

```
SELECT to_tsvector('english', body) FROM pgweb; 
```

即使强制（仅用于测试）使用`set enable_seqscan = off`. 这可能在 PostgreSQL 9.2 中使用仅索引扫描；我还没有升级我的机器，所以我不能说。

不过，您可以使用索引来加速其他查询，`JOIN`方法是使用索引数据对表进行 ing 并使用相同的表达式索引。

如果您打算将其`tsvector`用于其他用途，我建议您更改方法。向表中添加一个新的类型列`tsvector`。使用`BEFORE INSERT OR UPDATE OR DELETE ... FOR EACH ROW`触发器自动使`tsvector`列与被索引的列保持同步。然后在新的 tsvector 列上创建 GIN 索引。这样您就可以直接查询该列，而不是仅将其用作表达式索引。如果您进一步阅读我已经链接到上面的“创建索引”部分，您将看到有关如何执行此操作以及[如何使用触发器自动更新 tsvector 列的](http://www.postgresql.org/docs/current/static/textsearch-features.html#TEXTSEARCH-UPDATE-TRIGGERS)说明。

# wpf - 我在 xaml 中制作了一个菜单样式，但是我怎样才能将 subitens 的子菜单放在正确的方向上？

> ID：12961461
> 
> 赞同：2
> 
> 时间：2012-10-18T18:36:24.317
> 
> 标签：wpf, xaml, menu, menuitem, submenu

这是代码：

```
<Style TargetType="{x:Type MenuItem}">

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type MenuItem}">

                <Border Name="Border" >
                    <Grid>
                        <ContentPresenter Margin="6,3,10,3" ContentSource="Header" RecognizesAccessKey="True" />
                        <Popup  Width="auto" AllowsTransparency="True" Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsSubmenuOpen}" Focusable="False" PopupAnimation="Fade">
                            <Border Opacity="1" Name="SubmenuBorder" SnapsToDevicePixels="True" >
                                <Border.Background>
                                    <SolidColorBrush Color="#FF9FD3F3"/>
                                </Border.Background>
                                <StackPanel  IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                                <Border.BorderBrush>
                                    <SolidColorBrush Color="Pink"></SolidColorBrush>
                                </Border.BorderBrush>
                                <Border.BorderThickness>
                                    <Thickness Bottom="3" Top="3" Left="3" Right="3" ></Thickness>
                                </Border.BorderThickness>
                            </Border>
                        </Popup>
                    </Grid>

                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSuspendingPopupAnimation" Value="True">
                        <Setter TargetName="Popup" Property="PopupAnimation" Value="Fade"/>
                    </Trigger>

                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Effect" Value="{StaticResource dropShadow}"/>
                        <Setter TargetName="Border" Property="Background" Value="#f9cef9"/>

                    </Trigger>                      

                    **<Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="True">
                        <Setter TargetName="SubmenuBorder" Property="Padding" Value="10,0,0,3"/>
                    </Trigger>**

                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>

</Style> 
```

如何将方向放在右侧？这是一个水平菜单，当我单击子菜单下拉菜单时，没错，但是我有一个带有子菜单的子项，我希望它们以正确的方向而不是下拉菜单打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T04:51:22.313

Popup Placement 设置为“Bottom”，在 WpfToolkit SplitButton 上的以下代码中将其更改为“Right”：

要包含该工具包，请在顶部添加以下行：

```
xmlns:wpfTools="http://schemas.xceed.com/wpf/xaml/toolkit" 
```

然后..

```
 <wpfTools:SplitButton Command="local:MainWindow.***" ToolTip="Resolutions">
                <wpfTools:SplitButton.DropDownContent>
                    <Menu x:Name="***">
                        <Menu.Resources>

                            <Style TargetType="{x:Type MenuItem}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type MenuItem}">
                                            <Border Name="Border" >
                                                <Grid>
                                                    <ContentPresenter Margin="6,3,10,3" ContentSource="Header" RecognizesAccessKey="True" />
                                                    <Popup  Width="auto" AllowsTransparency="True" Name="Popup" Placement="Right" IsOpen="{TemplateBinding IsSubmenuOpen}" Focusable="False" PopupAnimation="Fade">
                                                        <Border Opacity="1" Name="SubmenuBorder" SnapsToDevicePixels="True" >
                                                            <Border.Background>
                                                                <SolidColorBrush Color="#FF9FD3F3"/>
                                                            </Border.Background>
                                                            <StackPanel  IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                                                            <Border.BorderBrush>
                                                                <SolidColorBrush Color="Pink"></SolidColorBrush>
                                                            </Border.BorderBrush>
                                                            <Border.BorderThickness>
                                                                <Thickness Bottom="3" Top="3" Left="3" Right="3" ></Thickness>
                                                            </Border.BorderThickness>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsSuspendingPopupAnimation" Value="True">
                                                    <Setter TargetName="Popup" Property="PopupAnimation" Value="Fade"/>
                                                </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <!--
                                                    <Setter Property="Effect" Value="{StaticResource dropShadow}"/>
                                                    -->
                                                    <Setter TargetName="Border" Property="Background" Value="#f9cef9"/>
                                                </Trigger>
                                                <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="True">
                                                    <Setter TargetName="SubmenuBorder" Property="Padding" Value="10,0,0,3"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Menu.Resources>

                        <Menu.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel Orientation="Vertical"/>
                            </ItemsPanelTemplate>
                        </Menu.ItemsPanel>
                        <MenuItem Header="Test1">

                            <MenuItem Header="test 1" />
                            <MenuItem Header="test 2" />
                            <MenuItem Header="test 3" />
                        </MenuItem>
                        <MenuItem Header="Test2">
                            <MenuItem Header="test 1" />
                            <MenuItem Header="test 2" />
                            <MenuItem Header="test 3" />
                        </MenuItem>
                    </Menu>

                </wpfTools:SplitButton.DropDownContent>
                <Image Width="32" Source="***.ico" />
            </wpfTools:SplitButton> 
```

编码：

```
 <Menu.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel Orientation="Vertical"/>
                            </ItemsPanelTemplate>
                        </Menu.ItemsPanel> 
```

使第一个 MenuItem 垂直放置，而不是默认水平放置。

# android-asynctask - Android AsyncTask 线程被旧数据回收

> ID：12961462
> 
> 赞同：1
> 
> 时间：2012-10-18T18:36:29.177
> 
> 标签：android-asynctask

我试图通过从 Activity 调用的 Asynctask 访问 REMOTE android 服务。

我遇到了一个问题，我认为这是由重用线程引起的。我在 AsyncTask 中使用了 Lopper，当它获得一个线程时，它已经被先前对远程服务的调用分配了，我收到一个错误，即每个线程只允许一个 Looper。我不这么认为，因为我试图在错误的线程上访问 UI。

我可以用一些非常简单的代码来模拟这个问题。我在活动上创建了一个按钮，只需按 6 次。希望有人可以建议我如何解决这个问题。我试过检查 looper 不为空，但这只会让我遇到另一个问题，所以我想尝试解决这个问题。

这是我的活动

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void buttonClick(View view)
{

    MyAsychTask myAsychTask = new MyAsychTask() ;

    myAsychTask.execute() ;

}} 
```

异步任务

```
public class MyAsychTask extends AsyncTask<Void, Void, Void>{
    @Override
    protected Void doInBackground(Void... params)   {
        Log.wtf("Thead details", Thread.currentThread().getName() + " : " + Thread.currentThread().getState().toString() + " : Looper def: " +  ((Looper.myLooper()==null) ? "none" : "looper") ) ;

        Looper.prepare();

        Handler myHandler  = new Handler() {
              public void handleMessage(Message msg) {
                  // in real app process incoming messages here then quit looper
                  Log.wtf("executing message", " ") ;
                 this.getLooper().quit() ;
              }
          };

        new simulateREMOTEservice(myHandler) ;

        Looper.loop() ; 

        Log.wtf("exited looper", " ") ;

        return null ;
 }}

class simulateREMOTEservice{
public simulateREMOTEservice(Handler myHandler)
{
    Log.wtf("simulating REMOTE service", " ") ;
    myHandler.sendEmptyMessage(0) ;

}} 
```

日志文件是

```
10-18 19:00:12.420: A/Thead details(3081): AsyncTask #1 : RUNNABLE : Looper def: none
10-18 19:00:12.420: A/simulating REMOTE service(3081):  
10-18 19:00:12.420: A/executing message(3081):  
10-18 19:00:12.420: A/exited looper(3081):  
10-18 19:00:14.280: A/Thead details(3081): AsyncTask #2 : RUNNABLE : Looper def: none
10-18 19:00:14.290: A/simulating REMOTE service(3081):  
10-18 19:00:14.290: A/executing message(3081):  
10-18 19:00:14.300: A/exited looper(3081):  
10-18 19:00:16.140: A/Thead details(3081): AsyncTask #3 : RUNNABLE : Looper def: none
10-18 19:00:16.150: A/simulating REMOTE service(3081):  
10-18 19:00:16.150: A/executing message(3081):  
10-18 19:00:16.150: A/exited looper(3081):  
10-18 19:00:17.830: A/Thead details(3081): AsyncTask #4 : RUNNABLE : Looper def: none
10-18 19:00:17.840: A/simulating REMOTE service(3081):  
10-18 19:00:17.840: A/executing message(3081):  
10-18 19:00:17.840: A/exited looper(3081):  
10-18 19:00:19.480: A/Thead details(3081): AsyncTask #5 : RUNNABLE : Looper def: none
10-18 19:00:19.480: A/simulating REMOTE service(3081):  
10-18 19:00:19.490: A/executing message(3081):  
10-18 19:00:19.490: A/exited looper(3081):  
10-18 19:00:21.810: A/Thead details(3081): AsyncTask #1 : RUNNABLE : Looper def: looper
10-18 19:00:21.820: E/AndroidRuntime(3081): FATAL EXCEPTION: AsyncTask #1
10-18 19:00:21.820: E/AndroidRuntime(3081): java.lang.RuntimeException: An error occured while executing doInBackground()
10-18 19:00:21.820: E/AndroidRuntime(3081):     at android.os.AsyncTask$3.done(AsyncTask.java:266)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.lang.Thread.run(Thread.java:1020)
10-18 19:00:21.820: E/AndroidRuntime(3081): Caused by: java.lang.RuntimeException: Only one Looper may be created per thread
10-18 19:00:21.820: E/AndroidRuntime(3081):     at android.os.Looper.prepare(Looper.java:76)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at com.example.testlooper.MyAsychTask.doInBackground(MyAsychTask.java:15)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at com.example.testlooper.MyAsychTask.doInBackground(MyAsychTask.java:1)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at android.os.AsyncTask$2.call(AsyncTask.java:252)
10-18 19:00:21.820: E/AndroidRuntime(3081):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-18 19:00:21.820: E/AndroidRuntime(3081):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:36:02.443

根据我的评论，看看 url code.google.com/p/android/issues/detail?id=20915 ，虽然我怀疑真正的问题不在于 AsyncTask 线程池，但事实上，一旦你已经创建了一个 Looper，您似乎无法将其删除或用新的替换它。

# google-drive-api - 图片的 Google Drive API 下载链接是否损坏？

> ID：12961467
> 
> 赞同：1
> 
> 时间：2012-10-18T18:36:47.793
> 
> 标签：google-drive-api, google-api-client

我正在使用 Google Drive JS API 来获取一堆文件，并且大多数事情都按预期工作。

但是有一个问题，谷歌 API 网站上似乎有一个错误，也许我只是没有得到任何东西。

所以这就是我要做的：1）通过 Oauth 进行身份验证 2）通过“更改”命令获取文件列表（从没有 changeID 开始）

它工作正常，返回的 Object 中的 URL 也可以工作。除了图像的“downloadUrl”（mimeType：“image/jpeg”）。我得到这样的东西：

[https://doc-10-5g-docs.googleusercontent.com/do(....)8996175007&e=download&gd=true](https://doc-10-5g-docs.googleusercontent.com/do(....)8996175007&e=download&gd=true)

它返回一个 401 错误

删除最后一个参数时（到[https://doc-10-5g-docs.googleusercontent.com/do(....)8996175007&e=download](https://doc-10-5g-docs.googleusercontent.com/do(....)8996175007&e=download) w/o the &gd=true）然后下载链接确实有效下载文件。

我只是在这里没有得到什么还是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:07:54.293

我不知道如何从 JS API 下载文件。但是从目标 C 我使用它来下载文件内容。您需要使用他们的 API 来下载文件内容。这样，他们将在下载 url 链接中省略“ **&gd=true** ”参数。

**用于下载文件数据的目标 C 代码：**

```
- (void)loadFileContent {
NSString *downloadUrl = [[self.driveFiles objectAtIndex:selectedFileIdx] downloadUrl];

GTMHTTPFetcher *fetcher =
[self.driveService.fetcherService fetcherWithURLString:downloadUrl];

[fetcher beginFetchWithCompletionHandler:^(NSData *data, NSError *error) {
    if (error == nil) {
        NSLog(@"\nfile %@ downloaded successfully from google drive", [[self.driveFiles objectAtIndex:selectedFileIdx] originalFilename]);

    } else {
        NSLog(@"An error occurred: %@", error);
    }
}]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:38:14.210

当我从下载网址中删除 &gd=true 时，我也遇到了同样的问题，它看起来效果很好。但我不知道通过 API 下载文件内容的正确方法是什么。

# c# - WCF 服务与窗口服务

> ID：12961471
> 
> 赞同：19
> 
> 时间：2012-10-18T18:37:14.387
> 
> 标签：c#, wcf, windows-services

我是 WCF 的新手。我有一个场景，我需要创建一个运行 24x7 的应用程序从邮箱中提取邮件并创建一些报告。我使用 winform 完成了它并且它有效。但是我遇到了一个问题，即服务器所在的服务器托管的应用程序有一个自动注销策略，当服务器在一段时间内不活动时关闭我的应用程序。我想我可以将它实现为窗口服务。是否推荐用于此场景的 WCF 服务，使用它的任何优势。我想到了 WCF 服务，因为它对我来说是学习曲线。请指教。

**更新**：它的应用程序基于计时器工作。它每 5 分钟 ping 一个特定邮箱以查看新邮件。如果发现新邮件，它会下载一个 Excel 创建 PDF 报告并将其邮寄回一些电子邮件 ID。

使用的 DLLS：OpenPOP 和 Itextsharp。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T18:57:24.983

Windows 服务是您所需要的。

WCF 是一个通信库，除非您打算通过客户端与应用程序通信，否则您不需要它。

您的问题与激活有关，并且在后台保持代码处于活动状态是 Windows 服务所做的。

It's not difficult, this will help you get started.

[http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:55:28.143

WCF 仅在您运行 Web 服务时才有用。只是一个普通的 Windows 服务应该可以满足您的需求。只要机器启动，服务就应该继续运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:51:13.200

如果您的应用程序执行您想要的操作并且工作正常，直到服务器处于活动状态，那么您应该考虑通过将服务器设置为不进入非活动状态来解决问题。

换句话说，由于服务器本身永远不应该进入待机（非活动）模式，我的猜测是你所说的策略只针对非活动*的人类*用户实施——该策略可能（也不应该）影响系统级别用户。

因此，如果您以系统用户（或网络用户）的身份运行应用程序，问题应该会消失。

根据您的解释，WCF 不是解决您问题的正确方法，原因有两个：

1.  当您有另一个使用 WCF 服务的应用程序（客户端）时，WCF 很有用）-听起来您的应用程序中不需要客户端/服务器服务
2.  如果您以与当前应用程序运行的用户相同的用户身份运行 WCF 服务，您的问题仍然存在（即，由于策略，WCF 服务最终将处于非活动状态）。

# html - 通过 XSLT 转换修改 XML 到 HTML

> ID：12961473
> 
> 赞同：1
> 
> 时间：2012-10-18T18:37:20.780
> 
> 标签：html, xml, xslt

我想修改附加的 xsl 文件中的 XSLT 1.0 转换，以生成在 XML 文件（也附加）中编码的表格的 HTML 版本。生成的 HTML 输出文件必须包含在 XML 文件中定义的表，并保留其所有内容，在 Web 浏览器中呈现时，交替的数据行分配了不同的背景色调。此外，生成的 HTML 输出必须是有效的 XHTML 1.1，并且必须一次生成，即 run.bat 执行一次。请帮帮我。提前谢谢你，我真的很感激！

XSL 文件：

```
<?xml version="1.0"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml" xmlns:saxon="http://icl.com/saxon" xmlns:date="http://exslt.org/dates-and-times" extension-element-prefixes="saxon date" version="1.0">
  <xsl:output method="text" encoding="UTF-8" indent="no"/>
  <xsl:template match="Item">Hello world</xsl:template>
</xsl:transform> 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Item TextType="BodyMatter" SchemaVersion="2.0" id="AaAF_Freelance_Test_1" DiscussionAlias="Discussion" SessionAlias="Chapter" SecondColour="Pantone326C" ThirdColour="Pantone2945C" FourthColour="Pantone272C" Logo="colour" Rendering="VLE Preview" Template="Wide_Margin_Reduced_A4_Unnumbered_new_design_v10_release1">
  <CourseCode>AaAF</CourseCode>
  <CourseTitle>Accessible and alternative formats</CourseTitle>
  <ItemID/>
  <ItemTitle>AaAF: Freelance XSLT test document 1</ItemTitle>
  <Unit>
    <UnitID/>
    <UnitTitle/>
    <ByLine/>
    <Session>
      <Title>Freelance XSLT test – constructing tables</Title>
      <Paragraph>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec quis elit sapien. Duis sit amet interdum lectus. Sed faucibus, mi quis dapibus consequat, nisi nunc semper erat, eu pretium enim urna porta diam. Suspendisse mi nisi, adipiscing in semper ac, viverra vitae nisl. Nulla facilisi. Nullam luctus porttitor velit, quis euismod dui commodo eu. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris arcu est, rhoncus interdum bibendum vel, commodo et justo.</Paragraph>
      <Table>
        <TableHead>Table of analytical techniques</TableHead>
        <tbody>
          <tr>
            <th class="ColumnHeadLeft">Analytical technique</th>
            <th class="ColumnHeadLeft">Application</th>
          </tr>
          <tr>
            <td class="TableLeft">IR reflectography</td>
            <td class="TableLeft">Characterisation of painting techniques, in panel and wall paintings, through the identification of underdrawings; identification of undocumented interventions; characterisation of pigments.</td>
          </tr>
          <tr>
            <td class="TableLeft">FT-IR spectroscopy</td>
            <td class="TableLeft"><i>In situ</i> non-destructive identification of alterations on stones, mortars and metals, identification of pigments and binders in paintings; identification of undocumented restorations.</td>
          </tr>
          <tr>
            <td class="TableLeft">Raman spectroscopy</td>
            <td class="TableLeft"><i>In situ</i> non-destructive identification of alterations on stones, mortars and metals; identification of pigments in wall paintings. </td>
          </tr>
          <tr>
            <td class="TableLeft">XRF</td>
            <td class="TableLeft">Elemental analyses of stones, metals, wall and easel paintings, and other objects. </td>
          </tr>
          <tr>
            <td class="TableLeft">Vis-NIR spectroscopy</td>
            <td class="TableLeft">Colorimetric measurements and, possibly, identification of pigments. Measurement of possible colour changing after restoration.</td>
          </tr>
          <tr>
            <td class="TableLeft">UV-vis spectroscopy</td>
            <td class="TableLeft"><i>In situ</i> non-destructive identification of the presence of organic substances. </td>
          </tr>
          <tr>
            <td class="TableLeft">Fluorimetry</td>
            <td class="TableLeft"><i>In situ</i> detection of the distribution of organic molecules</td>
          </tr>
          <tr>
            <td class="TableLeft">Drilling resistance measurement </td>
            <td class="TableLeft">Hardness of rocks used for monuments and sculptures</td>
          </tr>
        </tbody>
      </Table>
    </Session>
  </Unit>
</Item> 
```

运行.bat 文件：

```
java -jar ou_saxon.jar -o output1.html input.xml convert.xsl
pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:07:11.113

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates select="/*/*/*/Table"/>
 </xsl:template>

 <xsl:template match="Table">
  <table>
       <xsl:apply-templates select="node()|@*"/>
  </table>
 </xsl:template>

 <xsl:template match="TableHead">
  <th><xsl:apply-templates select="node()|@*"/></th>
 </xsl:template>

 <xsl:template match="tr[not(th)][position() mod 2 = 1]">
  <tr class="odd">
    <xsl:apply-templates select="node()|@*"/>
  </tr>
 </xsl:template>

 <xsl:template match="tr[not(th)][position() mod 2 = 0]">
  <tr class="even">
    <xsl:apply-templates select="node()|@*"/>
  </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Item TextType="BodyMatter" SchemaVersion="2.0" id="AaAF_Freelance_Test_1" DiscussionAlias="Discussion" SessionAlias="Chapter" SecondColour="Pantone326C" ThirdColour="Pantone2945C" FourthColour="Pantone272C" Logo="colour" Rendering="VLE Preview" Template="Wide_Margin_Reduced_A4_Unnumbered_new_design_v10_release1">
    <CourseCode>AaAF</CourseCode>
    <CourseTitle>Accessible and alternative formats</CourseTitle>
    <ItemID/>
    <ItemTitle>AaAF: Freelance XSLT test document 1</ItemTitle>
    <Unit>
        <UnitID/>
        <UnitTitle/>
        <ByLine/>
        <Session>
            <Title>Freelance XSLT test – constructing tables</Title>
            <Paragraph>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec quis elit sapien. Duis sit amet interdum lectus. Sed faucibus, mi quis dapibus consequat, nisi nunc semper erat, eu pretium enim urna porta diam. Suspendisse mi nisi, adipiscing in semper ac, viverra vitae nisl. Nulla facilisi. Nullam luctus porttitor velit, quis euismod dui commodo eu. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris arcu est, rhoncus interdum bibendum vel, commodo et justo.</Paragraph>
            <Table>
                <TableHead>Table of analytical techniques</TableHead>
                <tbody>
                    <tr>
                        <th class="ColumnHeadLeft">Analytical technique</th>
                        <th class="ColumnHeadLeft">Application</th>
                    </tr>
                    <tr>
                        <td class="TableLeft">IR reflectography</td>
                        <td class="TableLeft">Characterisation of painting techniques, in panel and wall paintings, through the identification of underdrawings; identification of undocumented interventions; characterisation of pigments.</td>
                    </tr>
                    <tr>
                        <td class="TableLeft">FT-IR spectroscopy</td>
                        <td class="TableLeft">
                            <i>In situ</i> non-destructive identification of alterations on stones, mortars and metals, identification of pigments and binders in paintings; identification of undocumented restorations.
                        </td>
                    </tr>
                    <tr>
                        <td class="TableLeft">Raman spectroscopy</td>
                        <td class="TableLeft">
                            <i>In situ</i> non-destructive identification of alterations on stones, mortars and metals; identification of pigments in wall paintings. 
                        </td>
                    </tr>
                    <tr>
                        <td class="TableLeft">XRF</td>
                        <td class="TableLeft">Elemental analyses of stones, metals, wall and easel paintings, and other objects. </td>
                    </tr>
                    <tr>
                        <td class="TableLeft">Vis-NIR spectroscopy</td>
                        <td class="TableLeft">Colorimetric measurements and, possibly, identification of pigments. Measurement of possible colour changing after restoration.</td>
                    </tr>
                    <tr>
                        <td class="TableLeft">UV-vis spectroscopy</td>
                        <td class="TableLeft">
                            <i>In situ</i> non-destructive identification of the presence of organic substances. 
                        </td>
                    </tr>
                    <tr>
                        <td class="TableLeft">Fluorimetry</td>
                        <td class="TableLeft">
                            <i>In situ</i> detection of the distribution of organic molecules
                        </td>
                    </tr>
                    <tr>
                        <td class="TableLeft">Drilling resistance measurement </td>
                        <td class="TableLeft">Hardness of rocks used for monuments and sculptures</td>
                    </tr>
                </tbody>
            </Table>
        </Session>
    </Unit>
</Item> 
```

**产生想要的正确结果**：

```
<table>
   <th>Table of analytical techniques</th>
   <tbody>
      <tr>
         <th class="ColumnHeadLeft">Analytical technique</th>
         <th class="ColumnHeadLeft">Application</th>
      </tr>
      <tr class="odd">
         <td class="TableLeft">IR reflectography</td>
         <td class="TableLeft">Characterisation of painting techniques, in panel and wall paintings, through the identification of underdrawings; identification of undocumented interventions; characterisation of pigments.</td>
      </tr>
      <tr class="even">
         <td class="TableLeft">FT-IR spectroscopy</td>
         <td class="TableLeft">
            <i>In situ</i> non-destructive identification of alterations on stones, mortars and metals, identification of pigments and binders in paintings; identification of undocumented restorations.
                        </td>
      </tr>
      <tr class="odd">
         <td class="TableLeft">Raman spectroscopy</td>
         <td class="TableLeft">
            <i>In situ</i> non-destructive identification of alterations on stones, mortars and metals; identification of pigments in wall paintings. 
                        </td>
      </tr>
      <tr class="even">
         <td class="TableLeft">XRF</td>
         <td class="TableLeft">Elemental analyses of stones, metals, wall and easel paintings, and other objects. </td>
      </tr>
      <tr class="odd">
         <td class="TableLeft">Vis-NIR spectroscopy</td>
         <td class="TableLeft">Colorimetric measurements and, possibly, identification of pigments. Measurement of possible colour changing after restoration.</td>
      </tr>
      <tr class="even">
         <td class="TableLeft">UV-vis spectroscopy</td>
         <td class="TableLeft">
            <i>In situ</i> non-destructive identification of the presence of organic substances. 
                        </td>
      </tr>
      <tr class="odd">
         <td class="TableLeft">Fluorimetry</td>
         <td class="TableLeft">
            <i>In situ</i> detection of the distribution of organic molecules
                        </td>
      </tr>
      <tr class="even">
         <td class="TableLeft">Drilling resistance measurement </td>
         <td class="TableLeft">Hardness of rocks used for monuments and sculptures</td>
      </tr>
   </tbody>
</table> 
```

**请注意**：

转换只是为每个添加了“奇数”或“偶数”的类属性`tr`。这假定一个 css 文件也将被引用，并且它具有为`.odd`和定义的适当的 CSS 属性`.even`。

如果不是这种情况，则可以更改转换以生成直接格式。

例如，我们可以分别在两个模板中：

```
 <tr bgcolor="white"> 
```

和

```
 <tr bgcolor="#87b1f1"> 
```

**最后，如果我们希望输出位于 XHTML 命名空间中，我们将进一步修改转换，如下所示**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns="http://www.w3.org/1999/xhtml">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates select="/*/*/*/Table"/>
 </xsl:template>

 <xsl:template match="*">
   <xsl:element name="{name()}" namespace="http://www.w3.org/1999/xhtml">
     <xsl:copy-of select="namespace::*"/>
       <xsl:apply-templates select="node()|@*"/>
   </xsl:element>
 </xsl:template>

 <xsl:template match="Table">
  <table>
       <xsl:apply-templates select="node()|@*"/>
  </table>
 </xsl:template>

 <xsl:template match="TableHead">
  <th><xsl:apply-templates select="node()|@*"/></th>
 </xsl:template>

 <xsl:template match="tr[not(th)][position() mod 2 = 1]">
  <tr bgcolor="white">
    <xsl:apply-templates select="node()|@*"/>
  </tr>
 </xsl:template>

 <xsl:template match="tr[not(th)][position() mod 2 = 0]">
  <tr bgcolor="#87b1f1">
    <xsl:apply-templates select="node()|@*"/>
  </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**当使用此转换处理相同的 XML 文档时，结果现在位于 XHTML 命名空间中**：

```
<table xmlns="http://www.w3.org/1999/xhtml">
   <th>Table of analytical techniques</th>
   <tbody>
      <tr>
         <th class="ColumnHeadLeft">Analytical technique</th>
         <th class="ColumnHeadLeft">Application</th>
      </tr>
      <tr bgcolor="white">
         <td class="TableLeft">IR reflectography</td>
         <td class="TableLeft">Characterisation of painting techniques, in panel and wall paintings, through the identification of underdrawings; identification of undocumented interventions; characterisation of pigments.</td>
      </tr>
      <tr bgcolor="#87b1f1">
         <td class="TableLeft">FT-IR spectroscopy</td>
         <td class="TableLeft">
            <i>In situ</i> non-destructive identification of alterations on stones, mortars and metals, identification of pigments and binders in paintings; identification of undocumented restorations.
                        </td>
      </tr>
      <tr bgcolor="white">
         <td class="TableLeft">Raman spectroscopy</td>
         <td class="TableLeft">
            <i>In situ</i> non-destructive identification of alterations on stones, mortars and metals; identification of pigments in wall paintings. 
                        </td>
      </tr>
      <tr bgcolor="#87b1f1">
         <td class="TableLeft">XRF</td>
         <td class="TableLeft">Elemental analyses of stones, metals, wall and easel paintings, and other objects. </td>
      </tr>
      <tr bgcolor="white">
         <td class="TableLeft">Vis-NIR spectroscopy</td>
         <td class="TableLeft">Colorimetric measurements and, possibly, identification of pigments. Measurement of possible colour changing after restoration.</td>
      </tr>
      <tr bgcolor="#87b1f1">
         <td class="TableLeft">UV-vis spectroscopy</td>
         <td class="TableLeft">
            <i>In situ</i> non-destructive identification of the presence of organic substances. 
                        </td>
      </tr>
      <tr bgcolor="white">
         <td class="TableLeft">Fluorimetry</td>
         <td class="TableLeft">
            <i>In situ</i> detection of the distribution of organic molecules
                        </td>
      </tr>
      <tr bgcolor="#87b1f1">
         <td class="TableLeft">Drilling resistance measurement </td>
         <td class="TableLeft">Hardness of rocks used for monuments and sculptures</td>
      </tr>
   </tbody>
</table> 
```

# python - argparse：多个可选位置参数之间的依赖关系

> ID：12961475
> 
> 赞同：2
> 
> 时间：2012-10-18T18:37:31.603
> 
> 标签：python, python-3.x, command-line-arguments, argparse

我正在寻找一种方法来使用 python3 中的 argparse 模块解析以下命令行语法：

```
myapp.py [folder] [[from] to] 
```

含义：用户可以选择定义一个文件夹，默认为 cwd。此外，用户最多可以传递两个整数。如果只给出一个数字，则应将其存储在`to`变量中。这类似于 python builtin 的语法`range()`。

例如：

```
myapp.py folder
myapp.py 10
myapp.py 5 10
myapp.py folder 5 10
myapp.py folder 10 
```

那可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:53:12.987

使用选项；这就是他们的目的（并且`argparse`擅长解析）。

因此，像这样的语法

```
myapp.py [-F folder] [[from] to] 
```

会更有意义，并且更容易解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:00:42.390

你可以做一些非常愚蠢的事情：

```
import argparse
import os

class MyAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        namespace.numbers = []
        namespace.path = os.getcwd()
        for v in values:
            if os.path.isdir(v):
                namespace.path = v
            else:
                try:
                    namespace.numbers.append(int(v))
                    if len(namespace.numbers) > 2
                       parser.error("Barg2!!!")
                except ValueError:
                    parser.error("Barg!!!")

p = argparse.ArgumentParser()
p.add_argument('stuff',nargs='*',action=MyAction)
n = p.parse_args()
print n 
```

但如果你要这样做，你不妨`sys.argv`自己处理——你真的应该考虑在这里使用实际选项......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:05:41.930

我还建议自己解析 sys.argv 。

FWIW，即使在 argparse 或类似的项目上，我也会解析 sys.argv，因为自己解析 sys.argv 可以很好地使用 pylint 或 flake8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:15:45.453

如果不使用文件夹的命名参数，我看不到一种方法：

```
# usage: argparsetest2.py [-h] [--folder [FOLDER]] [to] [fr]

import argparse
import os

parser = argparse.ArgumentParser()
parser.add_argument('--folder', dest='folder', nargs='?', default=os.getcwd())
parser.add_argument('to', type=int, nargs='?')
parser.add_argument('fr', type=int, nargs='?')
args = parser.parse_args()

print args 
```

# unix - 更改 unix shell 脚本中的值输出

> ID：12961476
> 
> 赞同：-1
> 
> 时间：2012-10-18T18:37:33.580
> 
> 标签：unix

我的脚本在 WHILE 循环中从头到尾逐行读取输入文件。

假设输入文件中有 100 行。

当我将运行脚本时，说**script.ksh**

当从输入文件中读取 1 行时，它应该显示 1 % 完成。2 % 完成，当从输入文件中读取 2 行时。并显示在...

我想在单行输出中显示从 1 到 100 的百分比完成条，而不是 100 行。

100% 完成。当脚本成功运行时。

**$value** % 已完成。

在这里，$value 应该根据单行中的进度从 1 变为 100。

**例子：**

```
in file ipfile.txt, I have
1
2
3
4
.
.
upto
100

count=1
while read line
do
.......
.......
count=`expr $count + 1`
done<ipfile.txt

Here $count value will change from 1 to100.
when I will run the script,
output:
1 % completed. when $count=1
2 % completed. when $count=2
and show on upto 100 %.This completion status should be in single line output. 
```

希望我的要求很清楚，如果需要更多解释，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:14:02.827

```
line_num = 1
while read line; do
    printf "$((line_num++))%% completed\r";
    ...
done < input-file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:14:11.763

如果你有`seq`命令，你可以用这样的脚本模拟你想要的。在此示例中，`sleep 1`表示输入行的处理。

```
for i in $(seq 1 100)
do echo -e -n "\r$i% completed"; sleep 1
done
echo 
```

`-e`开启转义符如（`\r`回车）；`-n`抑制 . 末尾的换行符`echo`。注意回车在行首；这意味着光标位于输出的末尾，而不是数字所在的位置，这样看起来更好。您可能更喜欢使用`printf`命令而不是`echo`; 它可能更可靠。（此代码使用 bash 3.2 进行了测试。）

如果您正在阅读行，您将不得不使用 shell 算术计算自己完成的百分比。如果文件中的行数不是 100，那么您需要相应地缩放值。

一般来说，这太像艰苦的工作，不值得花时间把它做好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T23:11:33.243

您需要阅读 ansi 转义序列并使用它们来操纵终端位置。

# iphone - 资源后缀的常量：@2x、~ipad、-568h

> ID：12961477
> 
> 赞同：3
> 
> 时间：2012-10-18T18:37:33.747
> 
> 标签：iphone, ios, nsstring, retina-display

各种资源后缀是否有任何 Cocoa 常量，`@2x`目前`~ipad`和`-568h`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:17:58.307

不，没有。

您可以[在 Apple 文档中（以及其他一些地方）看到一些](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html#//apple_ref/doc/uid/TP40010156-CH15-SW8)关于这些字符串来命名您的资源的文档，但它们没有 Cocoa 常量。

*可以肯定的是，我尝试对 SDK 目录 ( `/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library`) 中的字符串进行 grep，这些字符串仅在框架二进制文件中找到，而不在 SDK 的任何头文件中找到。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:43:42.640

MONResourceSuffix.h

```
extern NSString * const MONResourceSuffix_at2x;
extern NSString * const MONResourceSuffix_tilde_ipad;
extern NSString * const MONResourceSuffix_hyphen_568h; 
```

MONResourceSuffix.m

```
NSString * const MONResourceSuffix_at2x = @"@2x";
NSString * const MONResourceSuffix_tilde_ipad = @"~ipad";
NSString * const MONResourceSuffix_hyphen_568h = @"-568h"; 
```

现在有:)

# javascript - 从桌面打开文件到弹出窗口

> ID：12961481
> 
> 赞同：3
> 
> 时间：2012-10-18T18:38:00.507
> 
> 标签：javascript, html, popupwindow

我是 html 编码的初学者，我想知道是否可以将窗口大小和其他属性直接写入页面。我解释一下。

我正在做一个计算，我想在我的桌面上运行 html 文件。一切正常，但它在打开其他选项卡的浏览器中启动。我希望它在一个没有状态栏、书签栏和固定窗口大小的小弹出窗口中运行。

编辑：

代码本身

```
<!doctype html>
<html>
<head><center>Kalkuraatur</center>
<Title>Javascripti Kalkulaator</title>
<script type="text/javascript">
    if(window.name != "mypopup") {
        window.open(document.location.href,'mypopup', 'left=300,top=200,width=200,height=200,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,titlebar=0'); var child = window.open(...; child.focus();
        window.close();
    }
</script>
<script type="text/javascript">
function arvuta ()
{
kalku.sisend.value = eval(kalku.sisend.value)
}
function Bspace(sisend)
{
kalku.sisend.value = kalku.sisend.value.substring(0, kalku.sisend.value.length - 1)
}
</script>
</head>
<body>
<center>
<form name="kalku">
<table border=2>
<tr><td>
<input type="text" name="sisend" size="21">
<br>
</td></tr>
<tr><td>
<input type="button" name="seitse" value=" 7 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '7'">
<input type="button" name="kaheksa" value=" 8 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '8'">
<input type="button" name="yheksa" value=" 9 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '9'">
<input type="button" name="ykstagasi" value="del" style="height: 22px; width: 30px" onclick="Bspace(this)">
<input type="button" name="kustuta" value=" C " style="height: 22px; width: 30px" onclick="kalku.sisend.value = ''">
<br>
<input type="button" name="neli" value=" 4 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '4'">
<input type="button" name="viis" value=" 5 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '5'">
<input type="button" name="kuus" value=" 6 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '6'">
<input type="button" name="jaga" value=" ÷ " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '/'">
<input type="button" name="korruta" value=" x " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '*'">
<br>
<input type="button" name="yks" value=" 1 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '1'">
<input type="button" name="kaks" value=" 2 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '2'">
<input type="button" name="kolm" value=" 3 " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '3'">
<input type="button" name="lahuta" value=" - " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '-'">
<input type="button" name="plus" value=" + " style="height: 22px; width: 30px" onclick="kalku.sisend.value += '+'">
<br>
<input type="button" name="null" value=" 0 " style="height: 23px; width: 64px" onclick="kalku.sisend.value += '0'">
<input type="button" name="koma" value=" , " style="height: 22px; width: 30px" onclick="kalku.sisend.value += ','">
<input type="button" name="v6rdub" value=" = " style="height: 22px; width: 64px" onclick="arvuta ()">
</td></tr>
</form>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:56:34.837

如果您愿意配置/处理弹出窗口阻止程序，您可以将其作为第一个条目添加到 html 文档的头部：

```
<script type="text/javascript">
    if(window.name != "mypopup") {
        window.open(document.location.href,'mypopup', 'left=300,top=200,width=200,height=200,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,titlebar=0');
        window.open('', '_self', ''); // chrome bug
        window.close();
    }
</script> 
```

还没有测试，但尝试这个焦点：

```
<script type="text/javascript">
    if(window.name != "mypopup") {
        var childWindow = window.open(document.location.href,'mypopup', 'left=300,top=200,width=200,height=200,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,titlebar=0');
        //like this
        childWindow.focus();
        window.open('', '_self', ''); // chrome bug
        window.close();
    } else {
        //or like this
        window.focus();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:43:37.853

据我所知，浏览器窗口的大小是 HTML 无法更改的。`javascript`现在您可以使用和/或编写自己的弹出窗口`jQuery`。

将“点击运行计算”链接添加到用户将登陆的页面。当他们单击链接时，将启动您的自定义弹出窗口。

这是我的意思的一个工作[示例。](http://jsfiddle.net/X732t/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:59:13.187

查看 W3 上的 window.open 文档以指定您需要的内容。

[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# c# - c#中的Dijkstras算法

> ID：12961486
> 
> 赞同：0
> 
> 时间：2012-10-18T18:38:37.933
> 
> 标签：c#, algorithm, dijkstra

从头开始构建使用 Dijkstras alg 的图表控件。我搜索了互联网试图理解这个算法。我想我终于明白了，但我的代码无法正常工作。希望有人可以看看这个，看看他们是否知道这是怎么回事......

我将粘贴三种方法，因为我认为这是可能需要的一切。

对于初学者，我会说我创建了自己的 Vertex 数据类型。它包含节点的 ID、X 和 Y、状态字符串、也是顶点数据类型的父节点和整数距离。

```
 //function to populate lists with all the vertices on the graph
    private List<Vertex> getNodes()
    {
        myVertices.Clear();
        //get all non-dg nodes in list
        for (int i = 0; i < chtGraph.Series[0].Points.Count; i++)
        {
            Vertex vertice = new Vertex(chtGraph.Series[0].Points[i]["ID"], (float)chtGraph.Series[0].Points[i].XValue, (float)chtGraph.Series[0].Points[i].YValues[0], "UNVISITED", Convert.ToInt32(chtGraph.Series[0].Points[i].Label), double.PositiveInfinity, null);
            myVertices.Insert(i, vertice);
        }

        //get all dg nodes in list
        for (int i = 0; i < chtGraph.Series[1].Points.Count; i++)
        {
            Vertex vertice = new Vertex(chtGraph.Series[1].Points[i]["ID"], (float)chtGraph.Series[1].Points[i].XValue, (float)chtGraph.Series[1].Points[i].YValues[0], "UNVISITED", Convert.ToInt32(chtGraph.Series[1].Points[i].Label), double.PositiveInfinity, null);
            myVertices.Insert(i, vertice);
        }
        return myVertices;
    }

    //function to return to a list all the adjacents for a specified node.  Excludes parent node
    private List<Vertex> checkAdjacents(Vertex node, int intTransPower)
    {
        List<Vertex> Adjacents = new List<Vertex>();
        int distance;

        for (int i = 0; i < myVertices.Count; i++)
        {
            if (node.id != myVertices[i].id)
            {
                distance = calcDistance(node.x, node.y, myVertices[i].x, myVertices[i].y);

                if (distance <= intTransPower)
                {
                    if (rdbTotalLength.Checked)
                    {
                        myVertices[i].distance = distance;
                    }
                    else if (rdbPathEnergy.Checked)
                    {
                        myVertices[i].distance = getCost(node, myVertices[i]);
                    }
                    else
                    {
                        myVertices[i].distance = 1;
                    }

                    myVertices[i].parent = node;
                    Adjacents.Add(myVertices[i]);

                    foreach (Vertex p in openList)
                    {
                        if (myVertices[i].id == p.id)
                        {
                            p.distance = myVertices[i].distance;
                            p.parent = myVertices[i].parent;
                        }
                    }
                }
            }
        }

        return Adjacents;

    } 
```

这是dijkstras....目前无法正常工作，我只是想不通。

```
private void dijkstra(Vertex start, Vertex end)
    {

        openList.Clear();

        //populate two lists with all the nodes in the graph
        openList = getNodes();
        myVertices = getNodes();

        //adjacents list for each vertex visited
        List<Vertex> adjacents = new List<Vertex>();

        //final list that is populated with the final path of vertices
        List<Edge> shortestPath = new List<Edge>();

        //used in calculating adjacent nodes.  If distance is greater than transpower, then nodes are not connected
        int intTransPower = Convert.ToInt32(txtTransPower.Text);

        //set current vertex as the starting node
        Vertex current = start;

        //set initially to false
        bool pathFound = false;

        //find the starting node from the list of all vertices.  Set it's distance to 0
        foreach (Vertex p in openList)
        {
            if (p.id == current.id)
            {
                p.status = current.status;
                p.distance = 0;
            }
        }
        foreach (Vertex p in myVertices)
        {
            if (p.id == current.id)
            {
                p.status = current.status;
                p.distance = 0;
            }
        }

        //reorder the list to bring the starting node to the first element
        openList = openList.OrderBy(h => h.distance).ToList();

        //openList.Add(current);
        //this.insert(openList, current, true);

        // Repeat while the openlist is not empty and you haven't reached the end
        while (openList.Count > 0)
        {
            //remove node at element 0\.  Sorted by smallest distance so it always gets removed first
            current = openList[0];
            openList.RemoveAt(0);

            //if the current node = the ending node, then we have found the path.  Break loop and build the final path.
            if (current.id == end.id)
            {
                pathFound = true;
                break;
            }

            //collect up all the adjacent nodes for the current vertex
            //does NOT include the current vertex we are on
            adjacents = checkAdjacents(current, intTransPower);

            foreach (Vertex v in adjacents)
            {
                float alt =  (float)current.distance + calcDistance(current.x, current.y, v.x, v.y);
                Convert.ToInt32(alt);

                if (alt < v.distance)
                {
                    v.distance = alt;
                    v.parent = current;
                    for (int i = 0; i < openList.Count; i++)
                    {
                        if (v.id == openList[i].id)
                        {
                            openList[i].distance = alt;
                            openList[i].parent = current;
                        }
                    }
                }

            }
            openList = openList.OrderBy(h => h.distance).ToList();
        }

        if (pathFound)
        {
            // collect path
            this.foundPath.Clear();
            Vertex last = current;
            while (current != start && current != null)
            {
                this.foundPath.Add(current);
                if (current.parent == last)
                    break;
                last = current;
                current = current.parent;
            }
            this.foundPath.Add(current);
        }

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-10T14:58:10.537

我有这个方法，但它是更大实现的一部分：

```
public static IDigraph DijkstrasAlgorithm(IDigraph g, int s)
        {
            //Collect number of vertices
            int num1 = g.NumberOfVertices;

            //create an array for vertices
            Entry[] entryArray1 = new Graphos.Algorithms.Entry[num1];

            //for each vertice create new instance for entry of edges
            for (int num2 = 0; num2 < num1; num2++)
            {
                entryArray1[num2] = new Graphos.Algorithms.Entry(false, 0x7fffffff, 0x7fffffff);
            }
            //set vertice origin with distance 0.
            entryArray1[s].distance = 0;

            //create a list for edges
            PriorityQueue queue1 = new BinaryHeap(g.NumberOfEdges);

            //create initial nodes in edges list
            queue1.Enqueue(new Association(0, g.GetVertex(s)));

            //while list is not empty
            while (!queue1.IsEmpty)
            {
                //creates an association
                Association association1 = (Association)queue1.DequeueMin();

                //attributes the vertice
                IVertex vertex1 = (IVertex)association1.Value;

                //if connection is known
                if (!entryArray1[vertex1.Number].known)
                {
                    //checks as known
                    entryArray1[vertex1.Number].known = true;

                    //foreach edge founded
                    foreach (Edge edge1 in vertex1.EmanatingEdges)
                    {
                        //creates the vertex that is being used
                        IVertex vertex2 = edge1.MateOf(vertex1);

                        //catches the weight since vertice in link
                        int num3 = entryArray1[vertex1.Number].distance + ((int)edge1.Weight);

                        //se o peso da ponte for menor que o peso maximo
                        if (entryArray1[vertex2.Number].distance > num3)
                        {
                            //Peso maximo é atualizado para o peso da ponte
                           entryArray1[vertex2.Number].distance = num3;

                            //Define o vértice vizinho 
                            entryArray1[vertex2.Number].predecessor = vertex1.Number;

                           //adiciona o vértice com seu vizinho e o peso entre eles na lista
                            queue1.Enqueue(new Association(num3, vertex2));
                        }
                    }
                }
            }
            //Á este ponto, todas as associações foram feitas

            //Cria o objeto grafo como uma lista baseado no numero de vertices
            IDigraph digraph1 = new DigraphAsLists(num1);

            //Para cada vértice
            for (int num4 = 0; num4 < num1; num4++)
            {
                //adiciona o vertice da lista no grafo
                digraph1.AddVertex(num4, entryArray1[num4].distance);
            }

            //para cada vertice
            for (int num5 = 0; num5 < num1; num5++)
            {
                //Se não for o ponto de origem
                if (num5 != s)
                {
                    //adiciona a aresta(origem,destino baseado no vizinho)
                    digraph1.AddEdge(num5, entryArray1[num5].predecessor);
                }
            }
            //retorna o grafo
            return digraph1;
        } 
```

# c# - 从基类返回派生类实例

> ID：12961488
> 
> 赞同：9
> 
> 时间：2012-10-18T18:38:47.717
> 
> 标签：c#, inheritance

标题可能不清楚，但请看下面的图案

```
public abstract class Animal
{

    public abstract Dog GetDog { get; }

    public abstract Cat GetCat { get; }

}

public class Dog : Animal
{

    public override Dog GetDog {
        get { return this; }
    }

    public override Cat GetCat {
        get { return null; }
    }

} 
```

在基类中具有属性并返回派生类型是否被认为是一种不好的做法。或者我应该做类似的事情

```
public abstract AnimalTypeEnum AnimalType { get; } 
```

编辑：根据评论，我想我应该更清楚我想要实现的目标。`Dog`or类的新实例`Cat`将由基于特定条件的单独函数创建，然后将`Animal`类型返回给调用者。调用方法将检查返回实例的类型并相应地使用它。

```
public Animal CreateAnimal(string path)
{

    //Process the document in path and create either a new instance of dog or cat

    Dog dg = new Dog();

    return dg;

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-13T20:58:14.790

如果你只想要你所衍生的动物，你可以这样做：

```
public abstract class Animal<T> where T: Animal<T>
{
    public T GetAnimal 
    {
        get { return (T)this; }
    }
}

public class Dog : Animal<Dog>
{
}

public class Cat : Animal<Cat>
{
}

public class Giraffe : Animal<Giraffe>
{
} 
```

你这样称呼：

```
var cat = new Cat();
var dog = new Dog();
var giraffe = new Giraffe();
Cat cat2 = cat.GetAnimal;
Dog dog2 = dog.GetAnimal;
Giraffe giraffe2 = giraffe.GetAnimal; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T19:10:15.123

> 调用方法将检查返回实例的类型并相应地使用它。

有你的问题。需要这样做是代码气味。你应该能够把它当作一个物体来对待，而不是区别对待狗和猫。

如果您需要显示任一动物的内容，则覆盖`ToString`两个类的方法并调用`ToString`动物。如果您需要知道狗或猫的名称，请添加一个`Name`属性到`Animal`. 如果可能的话，您应该在此处使用多态性，以便使用该对象的任何内容都将其视为一个`Animal`并且简单地涉及由于同一方法的不同实现而发生的不同事情。

如果你真的，真的需要知道`Animal`是 a`Dog`还是 a`Cat`那么你可以使用`is`or`as`运算符；您不需要添加您在 OP 中显示的所有代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T18:45:20.317

不，你做错了。

更好的办法是有一个单一的方法。

```
public abstract Animal getAnimal(); 
```

任何派生类都将知道如何返回自己。我希望这是有道理的。但是我认为您也不想返回 Animal 。没有意义。

```
Animal dog = new Dog() ;
dog.getAnimal(); 
```

令人困惑的权利？

你可以有一个动物/列表数组，遍历集合并检查如下：

```
if(animal is Dog) 
```

但是您仍在检查类型。如果您想使用基类，请使用它以使其有意义并公开通用方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T18:57:29.493

这是一个非常基础的设计，因为它违反了[开闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)。您希望您的课程对扩展开放但对修改关闭。如果明天你想添加另一个类会发生什么？

```
public class Donkey : Animal
{
} 
```

您将不得不去更改基类，使其具有属性`GetDonkey`。您还必须去更改所有使用您的班级的班级并添加`if (animal.GetDonkey == null)`

你应该做的是使用这样的工厂设计模式：

```
public static class AnimalFactory
{
  public static Dog GetDog()
  {
    return new Dog();
  }

  public static Cat GetCat()
  {
    return new Cat();
  }
} 
```

或者您应该使用[@Lews Therin](https://stackoverflow.com/users/855421/lews-therin)建议的虚拟方法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-18T18:54:02.967

拥有只返回它们被调用的对象的属性似乎不是很有用。

也许您只是在寻找一种从超类到子类的方法？如果是这样，只需使用演员表：

```
Animal a = new Cat();

try
{
    Dog d = (Dog)a;
}
catch (InvalidCastException)
{
    try
    {
        Cat c = (Cat)a;
    }
    catch (InvalidCastException)
    {
    }
} 
```

# r - 使用 knitr 编译后将 Emacs 缓冲区焦点返回给 R

> ID：12961497
> 
> 赞同：8
> 
> 时间：2012-10-18T18:39:12.650
> 
> 标签：r, emacs, knitr, ess

当使用命令编译 *.Rnw 文件时`M-n r`，`M-n P`我打开的 R 缓冲区被交换为显示 knitr 编译信息的缓冲区。如果 knitr 编译没有任何错误，有没有办法自动切换回 R 缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:16:12.167

那么最简单的方法是[建议](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)功能。建议是在函数的开头、结尾（或两者）添加内容的一种方式。

现在，我不知道哪个函数负责 r 模式下的编译，但假设它是 foo

```
(defadvice foo (after foo-advice () activate)
(other-window 1)) 
```

您只需要添加一个 if 表达式来检查编译是否没有错误。

# linux - 关闭，比如说，vim，会触发 sys_exit 吗？

> ID：12961498
> 
> 赞同：1
> 
> 时间：2012-10-18T18:39:12.567
> 
> 标签：linux, linux-kernel, system-calls

我很好奇 sys_exit 系统调用何时在 Linux 中被实际调用。我正在编写一个模块来跟踪系统调用，并发现当我打开和关闭 vim 时，我不一定会立即注册对 sys_exit 的调用。有时，电话似乎被延迟了。

有谁知道这背后的绝密语义？我们确定它在 ":wq!" 后立即调用 sys_exit 或“：q！” 还是正在进行一些更卑鄙的工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:44:13.613

每次正常停止进程时都应调用 sys_exit：

退出组（0）=？进程 14439 已分离

你在 strace 中看到了什么？

# php - 使用几个 MYSQLI Prepare 和 fetch

> ID：12961503
> 
> 赞同：1
> 
> 时间：2012-10-18T18:39:36.060
> 
> 标签：php, mysqli

我想显示一个需要两个先前查询的结果；当我试图用新的 Mysqli 界面做这些事情时，我没有让它以正确的方式工作。

我有这个，输出是：**Warning: mysqli::prepare() [mysqli.prepare]: All data must be fetched before a new statement prepare 发生**

```
$qryRdmPh="SELECT `id` FROM `table` ORDER BY RAND() LIMIT 0,30";
$stmtRdmPh = $mysqli->prepare($qryRdmPh);
$stmtRdmPh->execute();
$stmtRdmPh->bind_result($id);
 while($stmtRdmPh->fetch()) {
 //Obtener el atributo Frase
 $qryPhVal="SELECT `id_v` FROM `values` WHERE `id_p`='" . $id . "'";
 $stmtPhVal = $mysqli->prepare($qryPhVal);
 $stmtPhVal->execute();
 $stmtPhVal->bind_result($idV);
  while($stmtPhVal->fetch()){
  echo $idV;
  }
 } 
```

必须有另一种方法来显示没有如此复杂规则的结果......我已经读过使用语句查询非常重要，但为什么呢？它使我的代码变得更长更复杂。

**编辑**：如果有人向我解释声明是否如此重要，以及我是否应该始终使用它们，我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:07:18.237

总是有**可能在不以这种方式嵌套查询的情况下做同样的事情**。更重要的是......如果你这样做，它可能会损害你的数据库。始终尝试获得更简单的方法。

**例如**：如果要执行依赖于当前查询的查询，最好创建一个缓冲区并在缓冲后插入所有行。

# iphone - 我的应用程序的可读性

> ID：12961509
> 
> 赞同：9
> 
> 时间：2012-10-18T18:39:50.400
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我想知道如何使用 Readability 的“阅读视图”打开一些文章——就像 Tweetbot 正在做的那样。但是没有将文章发送到我的帐户并保存到队列中。

像 Reeder 那样使用 Readability 显示文章并不容易，对吧？我必须写信给公司并要求他们访问他们的解析器？

也许还有其他使用 Readability 解析文章的好方法。我读过一些关于 javascript 解析器的东西，但不太了解。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T04:11:35.267

您可以为此使用 Readability 动员器。您将在可读性样式中获得任何文章的清理版本：

```
http://www.readability.com/m?url=http://{URLOFTHEARTICLE} 
```

只需准备 URL 并将其加载到您的 UIWebView 中。我正在转义参数值。以下是它的实际效果：

[http://www.readability.com/m?url=http%3A%2F%2Fwww.cnn.com%2F2013%2F01%2F11%2Fshowbiz%2Ftv%2Fgolden-globes-tv-vineyard%2Findex.html%3Fhpt% 3Dhp_abar](http://www.readability.com/m?url=http://www.cnn.com/2013/01/11/showbiz/tv/golden-globes-tv-vineyard/index.html?hpt=hp_abar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T15:45:31.060

[Reeder 和 Tweetbot 都使用 Content API of Readability（您可以在应用程序和工具页面](https://www.readability.com/apps)上看到它们）。您是对的，您必须向 Readability 发送电子邮件才能访问内容 API。在服务器上解析文章对他们来说并不是完全免费的，所以他们想确保与直接访问解析器的人有关系。

查看[API 文档](https://www.readability.com/developers/api)以获取更多详细信息。特别注意第三段：

> 如果您想直接访问 Readability 解析器，可根据要求提供 Content API。如果您有兴趣，请[联系我们。](https://www.readability.com/contact)

或者，您可以查看[原始的 Javascript 书签](https://code.google.com/p/arc90labs-readability/)，尽管它使用的是较旧的解析算法（这实际上是基于 Apple 的 Safari 阅读器的...查看 Safari 中的致谢）。

# c# - 如何使用 C# 进行抢先式身份验证？

> ID：12961513
> 
> 赞同：5
> 
> 时间：2012-10-18T18:40:19.557
> 
> 标签：c#, web-services, authentication, preemptive

我们的客户有一个我们想从 c#.net 应用程序中使用的 Java Web 服务，但是当我尝试使用或调用任何方法时，我会收到一条`Internal Error`消息。此 Web 服务需要用户名和密码才能通过服务器（托管 WS 的位置）进行身份验证。

我使用 Soap UI 测试 Web 服务并从 java WS 得到响应，但前提是我选择了 Preemptive Autorizathion 选项。当我选择另一个选项时，我得到一个错误，正如我上面写的。

WS 是用 Java 开发的，而我们的应用程序是用 .NET Framework 2.0 开发的，所以问题是：有没有办法在 c# 中使用抢占式授权进行身份验证？

如果有帮助，WS 托管在 HTTPS 站点上。

这是我用来对服务器进行身份验证的一些代码。

```
NetworkCredential netCredential = new NetworkCredential(username, password); 
Uri uri = new Uri(service.Url);
ICredentials credentials = netCredential.GetCredential(uri, "Basic");
service.Credentials = credentials;
service.PreAuthenticate = true; 
```

我也试过这个代码：

```
string usernamePassword = username + ":" + password;
CredentialCache mycache = new CredentialCache();
WebRequest myReq = WebRequest.Create(s.Url);
myReq.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(new ASCIIEncoding().GetBytes((usernamePassword))));
mycache.Add(new Uri(service.Url), "Basic", new NetworkCredential(username, password));
myReq.Credentials = mycache;
service.Credentials = myReq.Credentials;
service.UserAgent = ".net FrameWork"; 
```

你知道如何解决这个问题吗？

# git - 一个项目如何同时使用Bitbucket和GitHub？

> ID：12961514
> 
> 赞同：102
> 
> 时间：2012-10-18T18:40:19.463
> 
> 标签：git, github, bitbucket

我有一个想要推送到 Bitbucket 和 GitHub 的存储库。由两者托管我的存储库至关重要。

有没有办法在 Git 中做到这一点？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-10-18T18:42:05.207

您可以通过 git 使用多个远程存储库。但是我相信你必须分别推入你的两个遥控器。

例如，如果您的项目当前指向 github，您可以将当前远程存储库重命名为`github`：

```
$ git remote rename origin github 
```

然后，您可以添加另一个远程存储库，例如`bitbucket`：

```
$ git remote add bitbucket git@bitbucket.org:your_user/your_repo.git 
```

现在，为了将更改推送到 github 或 bitbucket 上的相应分支，您可以这样做：

```
$ git push github HEAD
$ git push bitbucket HEAD 
```

相同的规则适用于拉取：您需要指定要从哪个遥控器拉取：

```
$ git pull github your_branch
$ git pull bitbucket your_branch 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-06-26T16:08:26.330

是的，你可以这么做。您不必推送两次，只需推送一次即可推送到两个远程存储库。我之前遇到过同样的问题，所以在这里写了如何做。 [Git：从 Github 和 Bitbucket 推送/拉取](https://blog.kevinlee.io/blog/2013/03/11/git-push-to-pull-from-both-github-and-bitbucket)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-08-17T02:58:22.230

一些**简单**的解决方案。

# **多个遥控器独立推送（和获取）**

这是最容易理解的方法，但维护起来最费力。

我们首先添加我们的新遥控器：

```
$ cd myproject 
$ git remote add bitbucket ssh://git@bitbucket.org/user/myproject.git 
$ git push bitbucket master 
```

直接说不行吗？当然，每次我们提交任何更改时，我们都需要推送到我们原来的“原点”和新的远程“bitbucket”：

```
$ git push origin master
$ git push bitbucket master 
```

不是很大的开销，但我相信它会随着时间的推移而增加。或者你可以创建一个`alias gpob="git push origin master && git push bitbucket master"。

# **具有多个 URL 的单个远程连续推送（和获取）**

使用此方法，我们将向现有的远程“来源”添加一个额外的 URL：

```
$ cd myproject
$ git remote set-url --add origin ssh://git@bitbucket.org/user/myproject.git
$ git push origin master
Everything up-to-date
Everything up-to-date 
```

少了很多努力！

当然，一线希望有云，在这种情况下，虽然我们可以同时推送到多个 URL，但我们只能从原始“源”获取（您可以更改它，但这超出了本文的范围）。

最后，查看将从哪个遥控器获取：

```
$ git remote -v show 
```

我也[写过博客](https://ahmadawais.com/how-to-use-bitbucket-and-github-at-the-same-time-for-one-project/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-08T17:09:05.143

我也有类似的情况。就像我有一个现有的 BitBucket 分支，过去几个月我在其中管理或更新我的代码表单。

现在我的要求是将我的项目上传到 GitHub 中，并且只有一个“主”分支。

**步骤1 -**

这是我现有的 BitBucket 项目回购信息。

```
$ git remote -v show 

origin  https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME>.git (fetch)
origin  https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME>.git (push) 
```

**第2步 -**

添加一个远程 github repo url -

```
$ git remote set-url origin --add https://github.com/<USERNAME>/<PROJECT_NAME>.git 
```

现在，它也有 github 信息（`$ git remote -v show`）。

```
origin  https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME>.git (fetch)
origin  https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME>.git (push)
origin  https://github.com/<USERNAME>/<PROJECT_NAME>.git (push) 
```

**第 3 步 -**

重命名存储库以更好地理解 -

```
$ git remote add bitbucket https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME>.git
$ git remote add github https://github.com/<USERNAME>/<PROJECT_NAME>.git 
```

现在，信息已更新（`$ git remote -v show`）。

```
bitbucket   https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME> (fetch)
bitbucket   https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME> (push)
github      https://github.com/<USERNAME>/<PROJECT_NAME>.git (fetch)
github      https://github.com/<USERNAME>/<PROJECT_NAME>.git (push)
origin      https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME> (fetch)
origin      https://<USERNAME>@bitbucket.org/<USERNAME>/<PROJECT_NAME> (push)
origin      https://github.com/<USERNAME>/<PROJECT_NAME>.git (push) 
```

**第4步 -**

是时候在 GitHub 中提交/推送整个项目了。

```
$ git add --all && git commit -m "first commit"

$ git push -u origin master 
```

结果我得到了这个错误 -

```
Everything up-to-date
Branch 'master' set up to track remote branch 'master' from 'origin'.
remote: Repository not found.
fatal: repository 'https://github.com/<USERNAME>/<PROJECT_NAME>.git/' not found 
```

**第 5 步（SSH 密钥设置） -**

经过几个小时的调查，我发现这是 SSH 关键问题。

因此，我为 BitBucket 和 GitHub 生成 SSH 密钥，并将这些密钥添加到我各自的帐户中。

*   [为 BitBucket 设置 SSH 密钥](https://support.atlassian.com/bitbucket-cloud/docs/set-up-an-ssh-key/)
*   [为 GitHub 设置 SSH 密钥](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)
*   [检查 SSH 密钥是否存在](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys)

**第 6 步（设置 SSH 存储库 URL） -**

`https://`将 URL更改`ssh`为 BitBucket 和 GitHub。

```
$ git remote set-url bitbucket git@bitbucket.org:<USERNAME>/<PROJECT_NAME>.git
$ git remote set-url github git@github.com:<USERNAME>/<PROJECT_NAME>.git 
```

删除原点以更改原点 repo url。

```
$ git remote rm origin 
```

添加第一个来源（BitBucket） -

```
$ git remote add origin git@bitbucket.org:<USERNAME>/<PROJECT_NAME>.git 
```

添加第二个来源（GitHub） -

```
$ git remote set-url origin --add git@github.com:<USERNAME>/<PROJECT_NAME>.git 
```

所有 repo url 更改为`ssh`.

```
$ git remote -v show

bitbucket    git@bitbucket.org:<USERNAME>/<PROJECT_NAME>.git (fetch)
bitbucket    git@bitbucket.org:<USERNAME>/<PROJECT_NAME>.git (push)
github       git@github.com:<USERNAME>/<PROJECT_NAME>.git (fetch)
github       git@github.com:<USERNAME>/<PROJECT_NAME>.git (push)
origin       git@bitbucket.org:<USERNAME>/<PROJECT_NAME>.git (fetch)
origin       git@bitbucket.org:<USERNAME>/<PROJECT_NAME>.git (push)
origin       git@github.com:<USERNAME>/<PROJECT_NAME>.git (push) 
```

**第 7 步 -**

我已经添加并提交了代码，所以我只需要推送。

```
$ git push -u origin master 
```

> 您确定要继续连接（是/否/[指纹]）？是的

最后，整个项目在 master 分支推送到 GitHub。

* * *

将代码推送到两个分支 -

```
$ git push 
```

仅将代码推送到 GitHub 或 BitBucket -

`$ git push github master` 或者 `$ git push bitbucket master`

更改分支 -

```
$ git checkout <BRANCH_NAME> 
```

* * *

实时保存信息 -

1.  [一个项目同时使用 Bitbucket 和 GitHub](https://blog.kevinlee.io/blog/2013/03/11/git-push-to-pull-from-both-github-and-bitbucket/)
2.  [删除远程源](https://stackoverflow.com/questions/42981272/fatal-could-not-unset-remote-origin-url/42981750#42981750)

* * *

# 重要的提示

**第 5 步和第 6 步**很有用如果您使用的是`http://`repo url，请将其更改`ssh`为以更好地维护 repo。

或者如果有人在第 1 步之后找到了repo url，最好使用**第 5 步和第 6**`https://`步/`$ git remote -v show`

如果有人已经有`ssh`repo，请忽略第 5 步和第 6 步。

# ruby-on-rails - 基于当前工厂的FactoryGirl依赖对象

> ID：12961516
> 
> 赞同：3
> 
> 时间：2012-10-18T18:40:29.430
> 
> 标签：ruby-on-rails, factory-bot

我有点鸡和蛋的问题。我有一个 Isp 模型，它有一个 default_domain _id，我需要为我的测试填充它。问题是域属于 ISP。所以我想弄清楚如何建立工厂来生成一个 ISP

工厂/isp.rb

```
FactoryGirl.define do
  factory :isp do
    sequence :name do |n|
      "ISP" + n.to_s
    end
  end
end 
```

工厂/域.rb

```
FactoryGirl.define do
  factory :domain do
    isp
    account
    sequence :dn do |n|
      "foo-#{n}.com"
    end
    active :true
  end
end 
```

应用程序/模型/isp.rb

```
class Isp < ActiveRecord::Base
  has_many :domains
  belongs_to :default_domain, class_name: 'Domain'
 end 
```

应用程序/模型/domain.rb

```
class Domain < ActiveRecord::Base
  belongs_to :isp
  ...
 end 
```

我尝试在工厂中使用 after(:create) 回调，这似乎只是创建循环引用。尝试使用块来懒惰地评估它。一样。只是不知道下一步该去哪里看或我应该尝试什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:26:14.560

所以当然，把它贴在这里给了我即时的动力，让我弄清楚我做错了什么……

找到这篇博文的提示 #4

[http://randomsoftwareinklings.blogspot.com/2012/03/factory-girl-automatic-tests.html](http://randomsoftwareinklings.blogspot.com/2012/03/factory-girl-automatic-tests.html)

这导致我

```
 FactoryGirl.define do
  factory :isp do
    sequence :name do |n|
      "ISP" + n.to_s
    end
    default_domain {Domain.find_or_create_by_dn("#{name}.com") }
  end
end 
```

现在按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:17:18.277

看来您找到了解决方案。但是，如果你想利用工厂来创建 default_domain 属性，试试这个。

首先，如果您更改`domain`工厂以使其不引用`isp`工厂，您将避免循环引用。

其次，在您的`isp`工厂定义中，您可以这样做：

```
FactoryGirl.define do
  factory :isp do
    sequence(:name) {|n| "ISP#{n}" }
    after_create do |isp|
      isp.default_domain = Domain.find_by_dn("#{isp.name}.com") ||
        FactoryGirl.create(:domain, :dn => "#{isp.name}.com")
      isp.save!
    end
  end 
```

这将使您可以将 FactoryGirl 用于`Domain`模型的更复杂的属性，如果您想`dn`从工厂外部自定义字段，您可以使用瞬态属性并在`after_create`挂钩中使用它们。

# c++ - 如何根据不同的扬声器分离音频文件

> ID：12961517
> 
> 赞同：7
> 
> 时间：2012-10-18T18:40:30.120
> 
> 标签：c++, c, linux, audio, speech

我有一堆关于电话交谈的音频文件。我想尝试将一个音频文件分成两个，每个只包含一个演讲者的讲话。也许我需要使用语音分类。但我该怎么做呢？有人可以给我一些线索吗？谢谢你。ps：Linux OS.C/C++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:42:07.900

虽然分离单个扬声器是一个相当困难的问题，但您可以在有停顿的地方自动分割音频。这将产生一系列可能更容易管理的文件，因为发言者经常在停顿之间交替。

这种方法需要开源 Julius 语音识别解码器包。这在许多 Linux 软件包存储库中都可用。我使用 Ubuntu 多元宇宙存储库。

这是网站：http: [//julius.sourceforge.jp/en_index.php](http://julius.sourceforge.jp/en_index.php)

* * *

**第 0 步：安装 Julius**

```
sudo apt-get install julius 
```

**第 1 步：分段音频**

```
adintool -in file -out file -filename myRecording.wav -startid 0 -freq 44100 -lv 2048 -zc 30 -headmargin 600 -tailmargin 600 
```

*   *-startid*是将附加到文件名的起始段号

*   *-freq*是源音频文件的采样率

*   *-lv*是语音检测将处于活动状态的音频级别

*   *-zc*是语音检测将处于活动状态的零交叉

*   *-headmargin*和*-tailmargin*是每个音频段之前和之后的静音量

请注意 -lv 和 -zc 必须针对您的特定录音属性进行调整，而 -headmargin 和 -tailmargin 必须针对您特定扬声器的风格进行调整。但是上面给出的值对于我过去的录音效果很好。

这是文档：http: [//julius.sourceforge.jp/juliusbook/en/adintool.html](http://julius.sourceforge.jp/juliusbook/en/adintool.html)

* * *

根据我的经验，使用压缩和标准化对音频进行预处理可以提供更好的结果，并且需要较少的 Julius 参数调整。这些初始步骤是推荐的，但不是必需的。

这种方法需要开源 SoX 音频工具包。这在许多 Linux 软件包存储库中也可用。我使用 Ubuntu 宇宙存储库。

这是网站：[http ://sox.sourceforge.net](http://sox.sourceforge.net)

* * *

**步骤-2：安装 SoX**

```
sudo apt-get install sox 
```

**步骤-1：预处理音频**

```
sox myOriginalRecording.wav myRecording.wav gain -b -n -8 compand 0.2,0.6 4:-48,-32,-24 0 -64 0.2 gain -b -n -2 
```

*   *gain -b -n*平衡音频并将其标准化到给定级别

*   *compand*根据参数压缩（在这种情况下）音频

请注意，compand 可能需要一些时间才能完全理解参数。但是上面给出的值对于我过去的录音效果很好。

这是文档：[http ://sox.sourceforge.net/sox.html](http://sox.sourceforge.net/sox.html)

* * *

虽然这不会让您识别每个扬声器，但它将大大简化通过耳朵进行的任务，这可能最终成为一段时间内的唯一选择。但我确实希望你能找到实用的解决方案，如果它已经可用的话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-09T09:18:20.747

是的，日记是你想要的。

您可以查看几个工具，它们都是 GPL。一个是[LIUM spkdiarization](http://lium3.univ-lemans.fr/diarization/doku.php/download) (Java)，另一个是[SHoUT toolkit](http://shout-toolkit.sourceforge.net/) (C++)。LIUM 有很好的文档，旁边有一个脚本，ShOUT 有点神秘，所以你应该按照作者在[此处](https://stackoverflow.com/questions/8284943/identifying-segments-when-a-person-is-speaking)发布的说明进行操作。

虽然我可能有点晚了。;)

# html - 我无法访问页面的某些 html 代码

> ID：12961520
> 
> 赞同：2
> 
> 时间：2012-10-18T18:40:40.663
> 
> 标签：html, web-scraping

我正在尝试在网页中进行网页抓取，但有些代码我无法访问。我无法实现的页面代码部分是通过锚标记访问的。在html中是：

```
<a class="MTLink" href="#d192633539-47" title="example" > 
```

但是当我点击“#d192633539-47”时没有出现预期的内容，即当我点击页面上的链接时没有出现。而是出现另一个页面。与此相关我也有

```
<li id="d192633539-47" class="MainTabContent Hidden" tnIndex="192633539"> 
```

有人可以帮助我吗？会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:43:05.323

此元素由 JavaScript 控制。如果不跟踪 JS 代码，您将无法确定单击事件的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:16:52.890

错误的 cookie 处理可能存在问题。看看这个。

# mpi - 如何启动 IPython MPI 集群？

> ID：12961521
> 
> 赞同：2
> 
> 时间：2012-10-18T18:40:45.263
> 
> 标签：mpi, ipython

我正在尝试在我的本地机器上使用 MPI 引擎启动 IPython。我需要 MPI。[IPython 文档](http://ipython.org/ipython-doc/dev/parallel/parallel_mpi.html)建议只运行这个：

```
$ ipcluster start -n 4 --engines=MPIEngineSetLauncher 
```

但是，它并没有说明之后要做什么。对我来说，结果是：

```
$ ipcluster start -n 4 --engines=MPIEngineSetLauncher
2012-10-18 11:07:14,340.340 [IPClusterStart] Using existing profile dir: u'/Users/enos/.ipython/profile_default'
2012-10-18 11:07:14.342 [IPClusterStart] Starting ipcluster with [daemon=False]
2012-10-18 11:07:14.342 [IPClusterStart] Creating pid file: /Users/enos/.ipython/profile_default/pid/ipcluster.pid
2012-10-18 11:07:14.342 [IPClusterStart] Starting Controller with LocalControllerLauncher
2012-10-18 11:07:15.343 [IPClusterStart] Starting 4 Engines with MPIEngineSetLauncher
2012-10-18 11:07:45.348 [IPClusterStart] Engines appear to have started successfully 
```

它就在那里。如何获得 IPython 命令提示符？

我正在使用 4 核机器的 OSX 10.8 上的 IPython 0.13 尝试此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T03:53:23.090

我在评论中找到了答案，但我认为把它放在这里会更有用。

“您只需在另一个终端中启动 ipython。然后示例代码创建一个连接到正在运行的引擎的客户端实例。——Greg Inozemtsev”

# groovy - Groovy 的三元条件运算符是否支持语句，而不仅仅是表达式？

> ID：12961524
> 
> 赞同：4
> 
> 时间：2012-10-18T18:40:56.330
> 
> 标签：groovy, expression, conditional-operator, statements

是否可以使用 Groovy 的条件运算符包含*带有表达式的语句？*这就是我现在正在做的事情，我想用 println 语句将其分解为一个条件语句......

```
if(!expired){
  println 'expired is null'
  return true
}
else if( now.after(expired)){
  println 'cache has expired'
  return true
}
else
  return false 
```

转换为单个语句...

```
return (!expired) ? true : (now.after(expired)) ? true : false 
```

...想为调试目的做这样的事情...

```
return (!expired) ? println 'expired is null' true : (now.after(expired)) ? println 'cache has expired' true : false 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:32:02.293

正如 GrailsGuy 在另一个答案中所说，使用闭包：

```
def expired= false, expired2= true
return (!expired) ? 
  {println "expired is null"; true}() :
  (expired2) ? {println "cache has expired"; true}() : false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T20:22:36.637

我相信 Groovy 三元运算符的行为与 Java 相同，因此只允许表达式。

你现在拥有它的方式根本不合法：

```
println 'expired is null' true 
```

问题是它需要一个分号或新行，并且没有收到一个。

将其更改为：

```
println 'expired is null'; return true; 
```

也不起作用，这支持了它只允许表达式的事实。如果您真的想使用三元运算符并执行多行，那么您最好将该逻辑放入方法（或闭包）中。

# jquery - 隐藏后如何显示表格行

> ID：12961526
> 
> 赞同：0
> 
> 时间：2012-10-18T18:41:01.427
> 
> 标签：jquery, performance, html-table

我有一个大表，允许用户根据许多复杂的规则隐藏行。我还有一个“重置”按钮，可以再次显示所有行，但运行速度非常慢：

```
$('#myTable tbody tr').show('fast'); 
```

问：有没有一种快速的方法来显示以前用 hide 方法隐藏的表格行？

也许我应该添加 class="hide" 和 removeClass 代替。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:52:08.027

您只想显示隐藏的那些，而不是整个集合，如果`tr`'s 是直接`tbody`子代，则使用子选择器更快，所以试试这个：

```
$('#myTable tbody > tr:hidden').show('fast'); 
```

如果在尝试之后，它对你来说仍然很慢，你可以尝试使用[viewport 插件](http://www.appelsiini.net/projects/viewport)来只为那些实际显示在屏幕上的动画设置动画，如下所示：

```
$('#myTable tbody > tr:hidden').filter(":in-viewport").show('fast', function() {
   $('#myTable tbody > tr:hidden').show();//show rest tr's that are out of viewport
}); 
```

**更新：**
更新以添加直接子选择器。

# jquery - jQuery推拉门

> ID：12961529
> 
> 赞同：1
> 
> 时间：2012-10-18T18:41:23.940
> 
> 标签：jquery, wordpress

我正在编辑[这个模板](http://demo.themezilla.com/garnish/)，我删除了覆盖并将它移到底部以在将鼠标移到图像上时查看图像。

**从这个：**

![在此处输入图像描述](../Images/4101edf2d34061d27ed0faca354d4b99.png)

**到这个：**

![在此处输入图像描述](../Images/627594bf8d8e1ba20f120f686318f309.png)

但问题是当我点击文本时会打开图像。只有当我点击他的缩略图而不是点击文本时才能打开图像！

我是jquery的新手，所以我想请教！

这是我的代码：

```
<ul id="portfolio-items" class="<?php if($magic_door) : ?>enabled<?php endif; ?> clearfix">
    <li id="portfolio-<?php the_ID(); ?>" class="<?php echo $output; ?>visible" data-id="post-<?php the_ID(); ?>">
         <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
             <a class="entry-link" href="<?php the_permalink(); ?>">
                  <?php tz_featured_image(get_the_ID(), TRUE); ?>
             </a>
        </div>
        <div class="entry-headline">
             <div class="entry-title">
                <h5><?php the_title(); ?></h5>
             </div>
        </div>
        <div class="entry-info">
             <?php the_excerpt(); ?>
        </div>
    </li>
    <?php endwhile; endif; ?>
</ul> 
```

在 HTML 中：

```
<ul id="portfolio-items" class="enabled clearfix isotope">                   
         <li id="portfolio-48" class="term-7 visible isotope-item" data-id="post-48">
                <!--BEGIN .hentry -->
                 <div class="post-48 portfolio type-portfolio status-publish hentry" id="post-48">
                        <a class="entry-link" href="http://www.ilprofetamuhammad.it/?portfolio=sky"> 
                        <img src="http://turbo.themezilla.com/garnish/files/2011/06/sky.jpg" alt="Sky"></a>
                </div>

                <div class="entry-headline">
                        <div class="entry-title">
                            <h5>Sky</h5>
                        </div>
                        <div class="entry-date">October 24th, 2012</div>                
                </div>
                        <!--END .hentry-->  
        </li>

        <li id="portfolio-44" class="visible isotope-item" data-id="post-44">
                 <!--BEGIN .hentry -->
                 <div class="post-44 portfolio type-portfolio status-publish hentry" id="post-44">
                        <a class="entry-link" href="http://www.ilprofetamuhammad.it/?portfolio=test"> 
                        <img src="http://turbo.themezilla.com/garnish/files/2012/01/stars-t.jpg" alt="Test"></a>
                </div>

                <div class="entry-headline">
                        <div class="entry-title">
                            <h5>Test</h5>
                        </div>
                        <div class="entry-date">October 24th, 2012</div>                
                </div>
                        <!--END .hentry-->  
        </li>
</ul> 
```

Javascript：

```
 var magicDoor = jQuery('#door-frame')
    var url = magicDoor.find('#magic-door').attr('data-url');
    var portfolioItems = jQuery('#portfolio-items li');
    var portfolioItemsEnabled = jQuery('#portfolio-items.enabled li');

    if(magicDoor.hasClass('open') && jQuery('#portfolio-items').hasClass('enabled')) {
        var postId = magicDoor.attr('data-id');
        portfolioItems.removeClass('active');
        jQuery('#portfolio-' + postId).addClass('active');
        portfolioItems.not('.active').find('.overlay').css({ display: 'none' });
        tz_getPortfolio(postId);
    }
    /*  When a portfolio item is clicked */
    jQuery('#portfolio-items.enabled li').live("click", function(e) {   
        if(!jQuery(this).hasClass('active') && jQuery(this).hasClass('visible')) {
            portfolioItems.removeClass('active');
            jQuery(this).addClass('active');
            portfolioItems.not('.active').find('.overlay').css({ display: 'none' });
            var postId = jQuery(this).attr('id').split('portfolio-')[1];
            tz_getPortfolio(postId);
        }
        e.preventDefault();
    });     
 }); 
```

我试图添加`<a>`到

> /* 当一个投资组合项目被点击时 */
> jQuery('#portfolio-items.enabled li **a** ').live("click", function(e) {

但不起作用。
任何帮助表示赞赏！
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:10:57.947

我怀疑您没有包含相关代码。即我在任何地方都看不到 HTML 元素... `#magic-door`...这就是您的插件可能正在加载元素并且可能是弹出窗口的内容。

您真的应该深入研究您正在使用的模板的源代码，如果您无法阅读/破译您拥有的代码......更大的问题。

尽管如此，这是我能为您提供的最佳解决方案。

1.  确保您选择/传递了正确的 postID（大概是您的模板的工作方式）。

2.  [Google JavaScript 调试](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sugexp=les%3B&gs_nf=3&tok=e5DgeFaKp8fTl6swEEAvxQ&cp=20&gs_id=d&xhr=t&q=debugging+javascript&pf=p&safe=off&output=search&sclient=psy-ab&oq=debugging+javascript&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=f41b66b96221fbec&bpcl=35466521&biw=1434&bih=783&ion=1)- 因为您似乎并没有真正提出正确/相关/建设性的问题。

# ruby-on-rails - Rails Active Record 与 Enumerable 的关系

> ID：12961530
> 
> 赞同：0
> 
> 时间：2012-10-18T18:41:29.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, enumerable

在某些情况下，当我获得 ActiveRecord Relation 时，我`.each`在 ActiveRecord::Relation 上遇到了奇怪的行为

似乎是当 ActiveRecord::Relation 委托`:each`给`:to => :to_a`( [source](https://github.com/rails/rails/blob/v3.2.6/activerecord/lib/active_record/relation/delegation.rb) )

```
@tasks = Task.find_task(list, {:week_id => 1}) 
```

基本上，有一个冗长的类方法，它接受一个对象 (`list`和一个带有 a 的哈希`:week_id`)

在这个方法中发生了一堆过滤和查询`find_task`，但它最终返回了一个关系`@tasks`

然后，在模板中，我有：

```
<% @tasks.each do |task| %>
.
.
.
<% end %> 
```

无论出于何种原因，无论大小如何`@tasks`，都需要大约 3 分钟。`@tasks.to_a` 我可以通过调用即使`@tasks`，ActiveRecord::Relation 的一个实例只有两条记录来复制相同的行为，调用`to_a`它们需要> 3 分钟。

它不会发生在所有`:week_id`s 上，只会发生在特定的 week_id 上，例如：`:week_id => 1`

SQL 执行得很好，我得到了一个关系，这似乎是特定 ActiveRecord::Relation 上的可枚举问题。

***更新***

在算法内部（我认为这意味着类方法）我做了很多急切的加载。所以 Postgres 做了很多`LEFT OUTER JOIN`s 并且我已经索引了所有需要发生这种情况的表。

解释分析表明，所有扫描都是`index scans`如此，事实证明，查询执行得很好，需要大量的急切加载......我在合理的时间内得到了一个急切加载的“ActiveRecord::Relation”。

***更新 2*** 虽然这个过程需要 3 分钟，但我看到一个 postgres 进程运行了几秒钟，然后我看到了 3 分钟作为我的输出`top`：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+    COMMAND                                                            
 8685 dylan     20   0 3407m 2.6g  904 R 99.7 69.1   1:14.49 /usr/local/bin/ruby script/rails s 
```

当它最终完成时，服务器会显示这个；

*   急切加载：`200 ms`，`139 ms`然后
*   一个包含大量 , 的大型 SQL 查询`LEFT OUTER JOINS in 33,000 ms`（很长，但不是大多数）
*   `257,000 ms`在模板中。

`to_a`当我在模板中复制行为时，我发现调用关系大约需要 3-4 分钟`@tasks`。

所以，当我的服务器告诉我所有的时间都花在了模板上，并且我可以看到在关系上调用一个可枚举的东西时，那是在执行查询的时候吗？即使在`top`我只能看到`ruby`正在运行的进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:03:40.717

问题在于急切加载。在 ActiveRecord::Relation 实例上调用可枚举方法时，它会被委托给`.to_a`，这可能需要很长时间才能处理大量关系。即使我在循环`@tasks`，我也急切地加载了这么多`.to_a`花费太长时间的对象。

我的短期解决方案是简单地急切加载更少的对象，即使它最终会用 n+1 个查询伤害我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-26T19:42:14.677

我知道这是一个旧帖子，但为了将来参考，这将通过使用`find_each`来解决。

[您可以在Ruby on Rails 指南](http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches)中找到更多信息。

# c - 试图在使用 C 从存储卡中获取的原始文件中查找 jpeg 文件

> ID：12961531
> 
> 赞同：4
> 
> 时间：2012-10-18T18:41:35.330
> 
> 标签：c

嗨，我正在尝试在原始文件中查找 jpeg

我被告知每个 jpeg 的开头都以
- 0xff 0xd8 0xff 0xe0
- 0xff 0xd8 0xff 0xe1 开头

所以我这样做：

```
// open input file 
FILE* inptr = fopen("card.raw", "r");

// create an array to hold info read from the memory card
char buffer[512];

int counter=0;
int counter2=0;

while ((fread(buffer, sizeof(char), 512, inptr)!=0))
{

    if(buffer[0]==0xff)
    {
        counter++;
        printf("%2d - Found a jpeg!\n", counter);

    }

    else 
    {   
        //Just to test
        counter2++;
        printf("%2d - Nothing Found!\n", counter2);
    }
} 
```

但即使我确信那里有一些图像，程序也没有找到任何东西。提前感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:40:05.647

找到了答案！！，我需要像这样将缓冲区声明为无符号字符：

```
unsigned char buffer[512]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:04:01.460

是的，unsigned char 在这种情况下更自然，但是如果您想继续使用signed char（简单的“char”可能会或可能不会根据环境进行签名，最好是明确的），那么，而不是使用 0xff，您可以与 -1 进行比较：

```
if(buffer[0]==-1) 
```

也就是说，我可能会对整个文件进行一次[mmap](http://linux.die.net/man/3/mmap)编辑，然后遍历分配的内存。

最后，由于您不仅要查找 0xff，而且要查找指示 JPEG 开始的整个序列，请使用[memmem()](http://linux.die.net/man/3/memmem)搜索 mmap-ed 区域中的整个序列。这样做还可以处理 JPG 文件不是从 512 块的开头开始的可能性。

# c# - 如果为 false，则启用数据绑定

> ID：12961533
> 
> 赞同：6
> 
> 时间：2012-10-18T18:41:39.650
> 
> 标签：c#, data-binding

我在 winforms 应用程序中遇到数据绑定问题。在下面的代码中，我对文本框的启用属性进行了数据绑定。启用状态取决于复选框的值。

```
tbAmount.DataBindings.Add("Enabled", checkBox, "Checked", 
                          false, DataSourceUpdateMode.OnPropertyChanged); 
```

在此代码中，如果选中复选框，则启用文本框。但我需要它倒过来。如果未选中复选框，我希望启用文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:11:03.003

这应该这样做。

```
 Binding bind = new Binding("Enabled", checkBox, "Checked");

    bind.Format += 
        (sender, e) => 
            e.Value = !((bool)e.Value); // invert the checked value

    textBox.DataBindings.Add(bind); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-06T23:30:02.943

我知道这是一个非常古老的帖子，但多年来我已经多次寻找类似的东西，并且对我最终使用的东西从来没有真正满意过。Mike Park 的回答很棒，不仅因为它有效，还因为它非常简单。

我所做的只是接受 Mike 的回答并将其转换为 Control 扩展。谢谢迈克！

根据您使用它的位置和方式，您可能需要添加对 System.Windows.Forms 的引用和 using System.Windows.Forms 语句。

```
 /// <summary>
    /// Creates a DataBinding that allows you to bind to the Unchecked state instead of the normal Checked state.
    /// 
    /// Sample usage: In this case, I am enabling a Button when the CheckBox is unchecked.
    ///     // Defaults to Control Enabled property.
    ///     // Always bound to the DataSource Checked property.
    ///     YourButton.DataBindings.Add(YourButton.UncheckedBinding(YourCheckBox)); 
    /// 
    ///     var binding = YourButton.UncheckedBinding(YourCheckBox);
    ///     YourButton.DataBindings.Add(binding);
    /// 
    /// Adapted - from answer by Mike Park answered Oct 18 '12 at 19:11
    /// From: Databinding Enabled if false
    /// Link: https://stackoverflow.com/questions/12961533/databinding-enabled-if-false
    /// </summary>
    /// <typeparam name="T">Constrained to be a type that inherits from ButtonBase. This includes CheckBoxes and RadionButtons.</typeparam>
    /// <param name="control">The control that will consume the DataBinding.</param>
    /// <param name="DataSource">The control to which we are binding. We will always bind to the Checked property.</param>
    /// <returns>DataBinding that is bound to the Unchecked state instead of the usual Checked state.</returns>
    public static Binding UncheckedBinding<T>(this Control control, T DataSource) where T : ButtonBase
    {
        return UncheckedBinding(control, "Enabled", DataSource);
    }

    /// <summary>
    /// Creates a DataBinding that allows you to bind to the Unchecked state instead of the normal Checked state.
    /// 
    /// Sample usage: In this case, I am enabling a Button when the CheckBox is unchecked.
    ///     // Always bound to the DataSource Checked property.
    ///     YourButton.DataBindings.Add(YourButton.UncheckedBinding("Enabled", YourCheckBox)); 
    /// 
    ///     var binding = YourButton.UncheckedBinding(YourCheckBox);
    ///     YourButton.DataBindings.Add(binding);
    ///
    /// Adapted - from answer by Mike Park answered Oct 18 '12 at 19:11
    /// From: Databinding Enabled if false
    /// Link: https://stackoverflow.com/questions/12961533/databinding-enabled-if-false
    /// </summary>
    /// <typeparam name="T">Constrained to be a type that inherits from ButtonBase. This includes CheckBoxes and RadionButtons.</typeparam>
    /// <param name="control">The control that will consume the DataBinding.</param>
    /// <param name="DataSource">The control to which we are binding. We will always bind to the Checked property.</param>
    /// <param name="PropertyName">The name of the property that is being bound.</param>
    /// <returns>DataBinding that is bound to the Unchecked state instead of the usual Checked state.</returns>
    public static Binding UncheckedBinding<T>(this Control control, string PropertyName, T DataSource) where T : ButtonBase
    {
        var binding = new Binding(PropertyName, DataSource, "Checked");
        binding.Format += (sender, e) => e.Value = !((bool)e.Value);

        return binding;
    } 
```

# html - HTML5 UI 框架

> ID：12961536
> 
> 赞同：54
> 
> 时间：2012-10-18T18:41:51.817
> 
> 标签：html, user-interface, web-applications, frameworks, javascript-framework

我在那里找到了很多 HTML5 UI 框架，例如：

*   [剑道](http://www.kendoui.com/)
*   [维莫](http://wijmo.com/)
*   [jqWidgets](http://www.jqwidgets.com/)
*   [斑马](http://zebra.gravitysoft.org/)
*   [煎茶](http://www.sencha.com/products/touch/)
*   [新芽核心](http://sproutcore.com/)
*   [小唯](http://yuilibrary.com/)
*   [徐](http://xuijs.com/)
*   [盾牌界面](http://www.shieldui.com)

我有点不知所措，再次有这么多资源。看了一些，但几乎所有看起来都太慢和重量级了。

我有点困惑我要学哪一个。他们的每个网站都在谈论他们的产品，就好像他们是市场上最好的一样。（明显的营销策略）。

作为 Web 应用程序开发和客户端 JS UI 框架的初学者；各位，根据您的经验，考虑到速度、小部件集合、复杂性、外观、支持等，您推荐哪一款用于快速桌面 Web 应用程序开发？

你推荐我从哪一个开始学习？

我知道可能有很多答案，每个人都可能喜欢不同的答案，但这可能有助于指导我一点，并对一些最流行的框架提出批评。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-10-18T20:54:40.933

你的问题太多了，答案并不容易，而且根本不会确定。也会很有主见。看看你带来的框架列表，我看到了非常不同的东西，几乎没有可比性。我会尝试以某种方式对它们进行分组并将更多框架添加到列表中。

这里的主要问题不是特定框架的优缺点。主要问题是：**你想要**多少？您真的是指像 Gmail 或 Grooveshark 这样的应用程序吗？或者你的意思是像 Stackoverflow 这样的东西——一个动态的，一点也不简单，但仍然是一个网站。让我们考虑所有这些选项。

也许，您只是想通过一些小部件来增强您的网站，例如选项卡、对话框、一些可拖放/可拖放的元素、文本编辑等，并且您不愿意更改您的开发模型。我的意思是，您使用您最喜欢的 Java/PHP/Ruby，并且不希望用 JavaScript 编写大量应用程序的逻辑和行为。在这种情况下，基于 jQuery 的类似插件的解决方案将为您提供帮助，尤其是[jQuery UI](http://jqueryui.com/)和[jQuery Mobile](http://jquerymobile.com/)。

jQuery 小部件遵循其插件系统。这通常意味着它们非常易于使用。为了创建一个按钮，你写：

```
$('#myButton').button(); 
```

现在，如果要禁用它，请使用以下模式调用方法：

```
$('#myButton').button('disable'); 
```

获取或设置值，例如在滑块或日期选择器上，如下所示：

```
$('#mySlider').slider('value');
$('#mySlider').slider('value', 42); 
```

如您所见，基于 jQuery 的解决方案没有模型。您的所有数据都保存在 DOM 中，并通过古怪的方法调用获得。如果您需要动态处理您的数据，例如进行一些复杂的验证、在后台加载某些内容、过滤或排序，那么您会发现这很快就会变得一团糟。顺便说一句，这就是为什么 jQuery UI 团队还没有提供网格控件的问题——没有模型他们就无法做到。在 jQuery Mobile 中，您可以通过简单的标记获得漂亮的移动 UI，但没有官方方法可以在页面之间传递数据。

总结一下：如果您有一个多页网站，如果您发布表单，则使用 jQuery UI 或[Twitter Bootstrap](http://twitter.github.com/bootstrap/)等更轻量级的解决方案。

也许，您想构建更复杂、更像应用程序的东西（单页应用程序？）。您知道您将需要在客户端处理数据。那你有什么选择？

您可以使用许多 JavaScript 框架之一，这些框架为您提供模型、数据绑定和可能的其他创建 Web 应用程序的方法，并将它们与为什么不使用 jQuery UI 集成。或者您可以使用更完整的框架，例如[Kendo](http://www.kendoui.com/)或[Wijmo](http://wijmo.com/)或[jqWidgets](http://www.jqwidgets.com)。这些框架依赖于 jQuery（Wijmo 依赖于 jQuery UI）并提供了额外的数据操作方式。他们有一个数据模型。Kendo 实现了自己的解决方案（我认为），而 Wijmo 和 jqWidgets 与流行的 Knockout JS 集成。

所以 Kendo 和 Wijmo 属于同时提供小部件/控件和一些支持模型的框架组。还有其他类似的框架，它们不是基于 jQuery 的，例如[Dojo Toolkit](http://dojotoolkit.org/)。添加一些动态数据加载，您将获得一个有点复杂的 Web 应用程序。你还能希望什么？

实际上，最重要的事情被遗忘了——你如何构建（组织）你的应用程序？如果您尝试构建一个以 RESTful 方式与服务器通信的单页面应用程序，那么如果您的应用程序没有架构，那么您很快就会陷入混乱。为此通常需要的特性是一些关注点分离（MVC、MVVM）、模板、路由和模块管理。这就是[SproutCore](http://sproutcore.com/)和[Sencha](http://www.sencha.com/)出现的地方。它们为构建 Web 应用程序提供了一个全面的解决方案，其中小部件只是其中的一小部分。

看起来 SproutCore 和 Sencha 是这里的赢家，因为它们是最完整的解决方案，包括 UI 和业务逻辑，还可以构建您的应用程序。尽管有所有优点，但也有一些缺点。有人说他们太重量级了，或者需要坚持他们的开发模式，你可能不喜欢。例如，在 Sencha 中，您使用 JavaScript 描述您的 GUI 并使用 Sencha 的类型系统。这增加了一种沉重的感觉，即有抽象和包装器，而您真的很喜欢 HTML、CSS 和 vanilla JavaScript 的易用性。

但这不是唯一的方法。Web 的强大之处在于，有许多框架、库、工具，越来越[小](http://microjs.com/)，它们将帮助您按照自己喜欢的方式制作应用程序。例如，考虑[AngularJS](http://angularjs.org/)。它本身不提供一组控件，但结合 Twitter Bootstrap 成为 RIA 的完整解决方案。或者，例如，看看[EmberJS](http://emberjs.com/)，一个更轻量级的框架，来自创建重量级 SproutCore 的人。它也没有为您提供一组小部件，但在我看来，它是一个非常好的应用程序基础。

所以这是我的最终想法，而不是结论。所有这些框架通常都会向您展示他们的小部件集、漂亮的主题和其他视觉内容。但真正重要的是你将如何实际开发你的应用程序，你将如何构建它，你将在哪里实现你的逻辑。了解框架提供了什么，并考虑是否可以替换缺少的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T12:53:20.147

Infeligo 的回答是一流的。我的经历可能会引起一些人的兴趣。我使用 Ruby on Rails 作为我的大部分业务逻辑所在的服务器平台。

在前端，我使用 dHTMLX，它是一个“对象”的 JS 库，其中最强大的是它们的网格对象。我的大多数应用程序都有业务/会计信息处理/显示要求，而网格对象是我的支柱。然而，他们的对象集是全面的，包括在单个应用程序中创建附加“窗口”以向最终用户提供 MDI 类型接口的能力。我通常有一个登录表单，成功应用后会打开一个 HTML 页面，顶部有一个菜单。根据菜单中的选择，打开和关闭新窗口以显示/操作信息。这些窗口在单个 HTML 页面的范围内。

所有对象都有与之关联的非常好的事件，我在前端使用这些事件进行了大量验证。但是，我通常也会复制 Rails 模型中的所有数据验证。这是额外的工作，但我只是格外小心。还有一些抽象对象有助于在前端可视对象（例如网格和后端服务器）之间连接数据。大多数数据连接都可以使用 XML 或 JSON 完成。我在 JSON 上使用 XML 仅仅是因为我对这种结构的经验以及 Rails 提供了一个不错的 XML 构建器这一事实。所以在我的例子中，我很少使用任何基于 Rails 的视图，因为我所有的视觉对象都来自 dHTMLX。

我喜欢 dHTMLX 的另一件事是它们的对象的速度。例如，网格对象将以非常可接受的速度轻松处理 10,000 多行。

该套件的最大缺点是它的文档。该公司是一家东欧开发商，因此通常很难准确理解其文档的含义。此外，他们的文档往往不会完整地记录所有内容，因此大量时间浪费在试错类型的学习上。

希望这可以帮助

# url - 测试 URL 格式

> ID：12961537
> 
> 赞同：1
> 
> 时间：2012-10-18T18:41:52.783
> 
> 标签：url, validation

我想测试用户在我的表单中输入的 URL 是否“正确”，例如以下内容是否正确：

```
http://www.google.com
www.google.com
www.google.com/ 
```

但以下可能不应该是：

```
google
http://www.go?ogle?#% 
```

我不知道“正确”是什么意思，但是有一些我可以使用的标准吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:20:52.513

在 HTML5 中，您可以使用具有以下值的`input`元素：[http://www.w3.org/TR/html5/states-of-the-type-attribute.html#url-state-type-url](http://www.w3.org/TR/html5/states-of-the-type-attribute.html#url-state-type-url)。不过，您需要检查哪些浏览器已经为它实现了验证。如果它很重要，当然还需要服务器端验证。`type``url`

在这里，您可以看到 HTML5 认为哪些 URL 有效：[http://www.w3.org/TR/html5/urls.html#valid-url](http://www.w3.org/TR/html5/urls.html#valid-url)。它为 URI引用[RFC 3986 ，为 IRI 引用 RFC](https://www.rfc-editor.org/rfc/rfc3986) [3987](https://www.rfc-editor.org/rfc/rfc3987)。

您可能应该查看 RegEx 以进行 URL 验证（例如，请参阅此问题：[PHP validation/regex for URL](https://stackoverflow.com/q/206059/1591669)）或检查您的库/编程语言/CMS 是否具有特殊功能。

# asp.net - ASP.NET 控件在 SharePoint Web 部件中找不到子控件

> ID：12961539
> 
> 赞同：1
> 
> 时间：2012-10-18T18:41:56.173
> 
> 标签：asp.net, sharepoint, user-controls

主机是 SharePoint 2010，使用 VS2010 .NET 3.5。我在 Web 部件中有自定义 ASCX 控件。控件从继承自 System.Web.UI.UserControl 的 POCO 类继承。该控件具有以下代码：

```
protected override void OnPreRender(System.EventArgs evArgs)
        {
            var myliteral = Page.FindControl("myliteral");
            base.OnPreRender(evArgs);
        } 
```

每个 .ascx 都有这个内容：

```
<asp:Literal ID="myliteral" runat="server" Visible="false"><br /></asp:Literal> 
```

我设置了一个断点来查看 C# 代码中的“myliteral”是否会引用生成的控件，但它没有，它是空的。为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:46:41.350

`Page.FindControl`在嵌套容器中看起来不是递归的，所以 if`myLiteral1`在 webpart 使用的 ascx 中。

[http://msdn.microsoft.com/en-us/library/31hxzsdw(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/31hxzsdw(v=vs.90).aspx)

# php - 在 HTML 中使用“变量”？

> ID：12961540
> 
> 赞同：1
> 
> 时间：2012-10-18T18:41:57.090
> 
> 标签：php, javascript, jquery, html, variables

不必像这样更改列表中每个项目的值

```
<li class="item drawing">
    <a class="fancybox" rel="group" href="images/portfolio/skateboard_l.jpg">
    <img src="images/portfolio/skateboard.jpg" alt="skateboard"/>
    <h3>Skateboard</h3>
    </a>
</li> 
```

有没有可能有类似的东西

```
item="Skateboard
<li class="item drawing">
    <a class="fancybox" rel="group" href="images/portfolio/[item-lowercase][if "item"_l.jpg exists, echo"_l"].jpg">
    <img src="images/portfolio/[item-lowercase].jpg" alt="[item-lowercase]"/>
    <h3>[item]</h3>
    </a>
</li> 
```

所以我可以只更改列表中每个项目的项目变量，而不是所有单独的条目。我假设这将使用 PHP 或 JS 完成？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:44:44.483

我猜你想使用模板。

如果你想在 JS 中做客户端：

*   [下划线](http://underscorejs.org/#template)
*   [小胡子.js](http://mustache.github.com/)
*   [车把.js](http://handlebarsjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:46:02.177

看起来[AngularJS](http://angularjs.org/)也会有所帮助。它可以让你做这样的事情：

```
<!doctype html>
<html ng-app>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
  </head>
  <body>
    <div>
      <label>Name:</label>
      <input type="text" ng-model="yourName" placeholder="Enter a name here">
      <hr>
      <h1>Hello {{yourName}}!</h1>
    </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:47:22.630

[Smarty](http://www.smarty.net/)是一个很好的 PHP 模板系统。如果您想使用 PHP 在 JavaScript 上进行模板化，只需从那里的教程之一开始（或查看其他 PHP 模板系统）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T18:44:05.030

您可以在 PHP 中使用`echo`.

例如，如果图像名称存储在`$images["myImage"]`其中并且 alt 是`$imageAlts["myImage"`

```
<img src="images/portfolio/<?php echo $images["myImage"]; ?>.jpg" alt="<?php echo $imageAlts["myImage"]; ?>"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T19:10:06.387

在 PHP 中执行此操作的经典方法是在 PHP 中创建一个项目数组，然后遍历该数组，创建带有适当 [item-lowercase] 条目的 HTML 列表项。

我会考虑将 [if item exists] 作为构建数据数组的过程的一部分，这样您在构建 html 时就不必做任何复杂的事情。然后，只需遍历您的数组并显示 $theItem 中的任何内容。

当然，这是一种简化。

```
foreach($itemList as $key=>$theItem){
    ?>
  <li class="item drawing">
   <a class="fancybox" rel="group" href="images/portfolio/<?php echo $theItem ?>

<img src="images/portfolio/[item-lowercase].jpg" alt="[item-lowercase]"/>
<h3>[item]</h3>
</a>
</li>
    <?php

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T19:16:04.637

我能想到的最好的解决方案是构建一个数组（我会使用 PHP）......然后使用一个 while 循环来构建你的列表......把它全部放在一个函数中并在你需要的地方调用它......

例如：

```
 <?php
        function itemList(){
            $items=array ("skateboard","rollerskates","scooter","rollerblades");             
            reset($items);          
            while (list(, $value) = each($items)) {
                echo '<li class="item drawing">';
                echo '<a class="fancybox" rel="group" href="images/portfolio/' . $value . '_l.jpg">';
                echo '<img src="images/portfolio/' . $value . '.jpg" alt="' . $value . '"/>';   
                echo '<h3>' . $value . '</h3>';                                                   echo '</a>';
                echo '</li>';
            }
        }
    ?> 
```

然后在您的 HTML 文件中（您希望显示列表的位置）：

```
<ul><?php itemList(); ?></ul> 
```

如果将函数放在单独的 .php 文件中，则必须将其包含在 HTML 文档中：

```
<?php include ('/url/of/list.php'); ?> 
```

# internet-explorer - IE8 在 CSS3 上窒息——避免它不读取文件的其余部分

> ID：12961541
> 
> 赞同：0
> 
> 时间：2012-10-18T18:41:59.103
> 
> 标签：internet-explorer, css

我有以下CSS：

```
.mcRow input.mcCheckbox {
    display:none;
}

.mcRow input.mcCheckbox + label {
    background: url('/media/img/pt/dhtml/mc_off.gif') no-repeat;
    height: 19px;
    width: 19px;
    display:inline-block;
    padding: 0px;
    padding-left: 20px;
    width: auto;
}

.mcRow input.mcCheckbox:checked + label {
    background: url('/media/img/pt/dhtml/mc_on.gif') no-repeat;
}​

.mcRow input.mcCheckbox.checked + label {
    background: url('/media/img/pt/dhtml/mc_on.gif') no-repeat;
}​ 
```

由于 IE8 不能很好地与 CSS3 配合使用，我已经包含了一个使用 jQuery 切换的备用 .checked 类。我希望即使 JS 损坏也能显示我的自定义复选框，因此我想保留 CSS3 中包含的 :checked 伪选择器。

上面的顺序在 IE 8 中表现不佳。它似乎忽略了 :checked 语句之后的所有内容。

```
.mcRow input.mcCheckbox + label {
        background: url('/media/img/pt/dhtml/mc_off.gif') no-repeat;
        height: 19px;
        width: 19px;
        display:inline-block;
        padding: 0px;
        padding-left: 20px;
        width: auto;
    }

    .mcRow input.mcCheckbox.checked + label {
        background: url('/media/img/pt/dhtml/mc_on.gif') no-repeat;
    }
​
    .mcRow input.mcCheckbox:checked + label {
        background: url('/media/img/pt/dhtml/mc_on.gif') no-repeat;
    }​ 
```

工作得很好。我害怕将它添加到文件中并且有人在此语句之后添加其他 CSS，不知道它不会在 IE8 中读取。：（ 我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:45:23.203

好吧，您当然可以在 CSS 中添加注释。

但是，更好的方法可能是简单地使用 IE 条件注释以不将该代码包含在 IE < 9 中。

# php - 为什么这个 PHP 会导致执行超时？

> ID：12961546
> 
> 赞同：3
> 
> 时间：2012-10-18T18:42:20.180
> 
> 标签：php, wordpress

我刚刚发布了我编写的 WordPress 插件的第一个版本，我收到了一份报告，称至少有一个使用我的插件的人收到了执行超时错误，引用了以下代码块：

```
function getNumericAttributeFromHTML($htmlElement, $attribute){
    $attrStartPos = stripos($htmlElement, $attribute) + strlen($attribute);

    $strOffset = 0;
    $searchWithin = substr($htmlElement, $attrStartPos);

    while(!(is_numeric($searchWithin[$strOffset]))){
        $strOffset++;
    }
    $attrStartPos += $strOffset;

    $strOffset = 0;
    $searchWithin = substr($htmlElement, $attrStartPos);

    while((is_numeric($searchWithin[$strOffset]))){
        $strOffset++;
    }

    return substr($htmlElement, $attrStartPos, $strOffset);
} 
```

页面上的每个图像调用此函数两次。我是不是效率太低了，还是他们的主人很糟糕？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:52:59.943

`while(!(is_numeric($searchWithin[$strOffset])))`如果没有数字字符，将**运行无限次！**`$searchWithin`

请注意，问题可能出在其他地方。

为了查明实际问题，我建议您从错误中获取可重现的步骤，并使用[分析器](http://xdebug.org)来分析代码。你一定会发现问题出在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:44:45.763

你有一个无限`while`循环。你只是在`$strOffset`不改变值的情况下增加值，`$searchWithin[$strOffset]`所以如果它不是数字，它永远不会并且会永远陷入循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:46:44.537

如果它导致超时，那么你有一个超大或无限循环。你这里有 2 个循环，检查它们是否是无限的。

如果这不是问题，请通过在脚本开头添加以下内容来增加最大执行时间：

```
ini_set('max_execution_time', 36000); //3600 seconds = 1 hour 
```

# ios - 将游戏从 iOS (iPad) 移植到 Windows

> ID：12961549
> 
> 赞同：1
> 
> 时间：2012-10-18T18:42:33.003
> 
> 标签：ios, windows, porting

是否可以以简单的方式将最初为 iOS（仅限 iPad 版本，但并不重要）构建的游戏移植到 Windows？

我假设我拥有原始游戏的所有源代码。我也有使用 Obj C 和 C# 的经验。

如果不是，这种巫术的步骤是什么？我在哪里可以找到合适的教程或参考资料？或者任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:48:40.073

当我这样做时，它是从头开始的。我能够使用我的目标 c 类作为指南，但我仍然必须逐行编写**（不是自动的）**。

然而，在 Jesse Liberty 的网站上，有一个很好的关于 iOS 开发人员观点差异的介绍，我发现它很有帮助：http: [//jesseliberty.com/2010/08/23/i2w-an-iphone-developers-guide- to-creating-windows-phone-7-applications-tutorial/](http://jesseliberty.com/2010/08/23/i2w-an-iphone-developers-guide-to-creating-windows-phone-7-applications-tutorial/)

# tfs - 如何使用团队构建复制 dll 文件以进行构建

> ID：12961554
> 
> 赞同：4
> 
> 时间：2012-10-18T18:42:50.353
> 
> 标签：tfs

我有一堆在多个项目中使用的外部 dll。这些项目引用了这些 dll，并且一切都可以正常编译。

现在我正在尝试为我的项目构建 Team Foundation Server。当我运行构建时，它抱怨它找不到所需的文件。如何让 TFS 找到所需的文件？

我在想我可以在自定义构建模板中使用 copydirectory windows 工作流功能，但我不确定这是否是正确的做事方式。另外，如果我确实使用了 copydirectory，我如何引用驻留在 TFS 而不是文件系统上的目录？我应该将文件复制到哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:53:21.730

试试这个：（如果使用 2010）在`Workspaces`选项卡上，您可以`map the folder`拥有所需的所有 DLL，只需确保正确引用项目中的程序集即可。

例如，如果您的项目引用了上一层的程序集，则在项目根文件夹之前，您可以设置`workspace`如下：

$\团队项目\src -> $(BuildDirectory)\src

$\团队项目\dlls -> $(BuildDirectory)

这样的事情应该可以解决您的问题。

在 VS2010 构建中还有一种方法可以做到这一点：您应该在项目的预构建步骤中添加一个复制命令（选择项目 -> 属性 -> 构建事件）。

如果要使用windows工作流-模板方法，请参考本指南：http: [//blogs.msdn.com/b/buckh/archive/2010/01/21/deep-dive-on-windows-workflow-4 -0-活动.aspx](http://blogs.msdn.com/b/buckh/archive/2010/01/21/deep-dive-on-windows-workflow-4-0-activities.aspx)

# php - 我的贝宝嵌入式自适应支付完成/取消后灯箱没有关闭

> ID：12961557
> 
> 赞同：2
> 
> 时间：2012-10-18T18:43:01.307
> 
> 标签：php, lightbox, paypal-adaptive-payments

我正在使用 PayPal 自适应支付 sdk 进行设置，并已成功向我的沙盒帐户付款。然而，显示贝宝登录等的灯箱似乎没有正确关闭。基本上，我为返回 url / 取消 url 指定的 url 被加载到带有登录详细信息的小窗口中，并且我仍然有下面网页的淡出外观。我想要发生的是将返回 url 加载到完整的浏览器中，而不是在灯箱窗口中。

我看不出我做错了什么，所以希望这是人们注意到的常见问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:43:17.303

在弹出窗口/灯箱中加载的最终 URL 需要调用您在位于后台的父页面上创建的 paypal 库对象上的“closeFlow()”函数。

这将导致 PayPal js 库移除模糊的背景，并关闭灯箱。（如果您有一个弹出窗口，您还需要在其上调用 self.close() 。

请参阅指南[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

并对“closeFlow”进行文本搜索，以便您查看更详细的说明。

# java - Java 方法中的最大局部变量数

> ID：12961559
> 
> 赞同：6
> 
> 时间：2012-10-18T18:43:06.953
> 
> 标签：java

我理解[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)的重要性，但从技术上讲，我们是否对每个 java 方法中的局部变量（存储在堆栈帧中）的数量有任何上限。并且该上限是否等于最大堆栈大小，即，我可以有一个大小等于配置的最大堆栈大小的堆栈帧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:45:33.423

定义局部变量的数量没有上限。如果您定义了太多无法放入堆栈帧的变量（或）JVM 无法为该大小分配堆栈帧，它将抛出`StackOverflowError`并退出。

斯坦福教授的[演讲](http://www.youtube.com/watch?v=W8nNdNZ40EQ&feature=relmfu)很好，可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:45:23.923

这实际上将由您的运行时以及每个进程分配多少堆栈空间来定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-04T06:08:53.573

我对这个明确的问题缺乏直接的答案感到惊讶，所以这里是：**JVM 的最大帧大小为 65535 个本地，最大堆栈大小为 65535，`long`每个`double`条目消耗 2 个插槽**。来自 JVM 规范[4.11。Java 虚拟机的限制](https://docs.oracle.com/javase/specs/jvms/se15/html/jvms-4.html#jvms-4.11)：

> *   在调用方法（第 2.6 节）时创建的帧的局部变量数组中的最大局部变量数被 Code 属性（第 4.7.3 节）的 max_locals 项的大小限制为 65535，给出了代码方法，并通过 Java 虚拟机指令集的 16 位局部变量索引。
>     
>     
>     
>     请注意，long 和 double 类型的值都被认为保留了两个局部变量并为 max_locals 值贡献了两个单位，因此使用这些类型的局部变量进一步降低了这个限制。
>     
>     
> *   帧中操作数堆栈的大小（第 2.6 节）被 Code 属性的 max_stack 字段限制为 65535 个值（第 4.7.3 节）。
>     
>     
>     
>     请注意，long 和 double 类型的值都被认为对 max_stack 值贡献了两个单位，因此在操作数堆栈上使用这些类型的值会进一步降低此限制。

*理论上，Java 语言可以通过将本地变量*和堆栈卸载到堆中来解决这个 JVM 限制（因为这可能会更大），但实际上它并不是真的 - `javac`（至少从 Java 15 开始）如果出现错误就会出错您有 65535 个本地人或深度为 65535 的堆栈。

# c# - 如何将泛型参数传递给局部视图

> ID：12961561
> 
> 赞同：3
> 
> 时间：2012-10-18T18:43:17.713
> 
> 标签：c#, asp.net-mvc

> **可能重复：**
> [通用部分视图：如何将通用类设置为模型？](https://stackoverflow.com/questions/875085/generic-partial-view-how-to-set-a-generic-class-as-model)

我正在尝试使用泛型类型构建通用功能，但遇到了以下场景。

查看模型

```
public class DeleteForm<T>  
{
    public LogInfo Ticket { get; set; }
    public string Id { get; set; }

    public DeleteForm() {
      Ticket = new LogInfo();
    }

    public DeleteForm(T viewModel) : this() {
      ViewModel = viewModel;
    }

    public T ViewModel { get; set; }
} 
```

控制器

```
public ActionResult Index(string name)
{
   return View("index", new DeleteForm<List<Users>>(new List<Users>());
} 
```

列表屏幕

```
@model DeleteForm<List<Users>>
//gridview displays list of users
@Html.Partial("revisionwindow", Model) 
```

局部视图

```
@model DeleteForm<T> <---Its not working

@Html.EditorFor(o=>o.Ticket)
@Html.EditorFor(o=>o.Id) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:07:15.170

改用动态模型。您的局部视图可能如下所示：

```
@model dynamic

 @{
      var myModel = (DeleteForm<List<Users>>) Model;
 }

@Html.EditorFor(o=>myModel.Ticket)
@Html.EditorFor(o=>myModel.Id) 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:00:40.047

如果您将模型传递给查看，则它必须是强类型（特定类型）。所以`SomeClass<T>`打字是不行的。基类可以满足您的要求，而不是泛型类型。我的意思是：查看模型

```
public abstract class Form
{
    public Form()
    {
        Ticket = new LogInfo();
    }
    public LogInfo Ticket {get; set;}
    public int Id {get; set;}
}
public class DeleteUsersForm: Form
{
    public DeleteUsersForm(IEnumerable<Users> users):base()
    {
        this.ViewModel = users;
    }

    public IEnumerable<Users> ViewModel {get; set;}
} 
```

控制器

```
public ActionResult Index(string name)
{
    return View(new DeleteUsersForm(new List<Users>()));
} 
```

列表屏幕

```
@model DeleteUsersForm
//displays list
@Html.Partial("revisionwindow", Model) 
```

局部视图

```
@model Form

@Html.EditorFor(o=>o.Ticket)
@Html.EditorFor(o=>o.Id) 
```

# sql-server-2008 - SQL Server：在可能为 NULL 的 case 语句中使用元素

> ID：12961562
> 
> 赞同：2
> 
> 时间：2012-10-18T18:43:19.243
> 
> 标签：sql-server-2008

好的，所以我有一个关于在可能为空的 case 语句中使用列的问题。

我再次有两个表，第一个看起来像这样`UserActivity`：

```
 userID    Action    Time
     1         25       12:00
     1         10       12:01
     1         12       12:35
     1          6       13:54
     2         10        6:47
     2         42        6:48
     3          8       11:54
     etc. 
```

但是第二个现在看起来像这样`UserSchedule`：

```
 userID      startTime1        stopTime1     startTime2    stoptime2  startTime3    stopTime3
     1            07:00            09:00         11:00         12:00       14:30         16:30
     2            11:00            12:30         14:00         15:30       
     3            14:00            15:00
    etc. 
```

因此，我需要能够评估与所有这些开始和停止时间相关的动作发生的时间。有些用户一天最多有 5 个开始/停止时间。有些人只会有一个。

这段代码是由@Adam Wengler 提供给我的，用于解决早期的问题，如果只有一个开始和停止时间，它会很好用。我不确定如何包含针对 5 个潜在开始/停止列中的每一个进行测试的逻辑，如果它们为空则忽略它们。

```
 UPDATE ua
  SET ua.TimeStatusId = CASE
                    WHEN ua.Time >= us.Schedule_Start
                       AND ua.Time <= us.Schedule_stop THEN 1
                    WHEN ua.Time >= DATEADD(HOUR, -1, us.Schedule_Start)
                       AND ua.Time <= us.ScheduleStart THEN 0
                    WHEN ua.Time >= us.Schedule_Stop
                       AND ua.Time =< DATEADD(HOUR, 1, us.Schedule_Stop)
                       THEN 2
                    ELSE 3
                  END
  FROM dbo.UserActivity AS ua
  INNER JOIN dbo.userSchedule AS us ON ua.UserId = us.UserId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:45:30.057

您可以使用该`IsNull()`功能解决您的问题

# rally - SDK2：查询投资组合项目时无法获取 UserStories

> ID：12961563
> 
> 赞同：2
> 
> 时间：2012-10-18T18:43:29.617
> 
> 标签：rally

这是一个错误吗？当我查询投资组合项目时，我在商店中获取：

```
fetch: ['UserStories', 'HierarchicalRequirement'] 
```

我在返回的数据中没有看到 PI 的任何子项。我检查了同一个 OID 的手动 API 并确认它确实有孩子。

如果我使用 HierarchicalRequirements 而不是 PortfolioItems 进行查询，并获取“Children”字段，我可以看到整个层次结构。

PI 有什么用？对儿童的查询是否中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:41:05.073

针对通用 PortfolioItem 端点进行查询将返回来自层次结构所有级别的 PI——大多数将有一个 Children PI 集合。只有底层 PI 会有一个 UserStories 集合。

假设您有这样的 PI 层次结构：

上
中
下

要获取 Top 项目，您需要查询 PortfolioItem/Top 类型并获取 Children 以包含 Middle 项目。

要获取底部项目，您需要查询 PortfolioItem/Bottom 类型并获取 UserStories 以包含其子项。

**编辑：**我能够在 2.0p3 和 2.0p4 中使用此代码获取用户故事：

```
Ext.create('Rally.data.WsapiDataStore', {
    model: 'PortfolioItem/Feature',
    context: this.getContext().getDataContext(),
    fetch: ['UserStories', 'Name', 'FormattedID'],
    autoLoad: true,
    listeners: {
        load: function(store, records) {
            Ext.each(records, function(record) {
                var stories = record.get('UserStories');
                Ext.each(stories, function(story) {
                    console.log(story.FormattedID + ' - ' + story.Name);
                });
            });
        }
    }
}); 
```

# arrays - Visual Studio 2012 调试器无法计算托管 C++/CLI 数组的索引

> ID：12961565
> 
> 赞同：0
> 
> 时间：2012-10-18T18:43:35.767
> 
> 标签：arrays, visual-studio, c++-cli, visual-studio-debugging, watch-window

我发现在使用 C++/CLI 的托管数组的 VS2012 调试器显示中似乎存在异常。似乎当我尝试对索引使用简单的数学表达式时，调试器会改为显示元素 0。请参阅下面的观察窗口。

![观察窗口](../Images/c7683a102ecbb9ef093ec5cb2991f49b.png)

数组的声明如下所示。

```
/* Stack where the values of tokens are stored */
array<YYSTYPE>^ yyv = gcnew array<YYSTYPE> (YYMAXDEPTH); 
```

如果元素被展开，它肯定会显示 yyv[4-1] 元素与 yyv[0] 元素具有相同的地址。

![在此处输入图像描述](../Images/86ee2b4d1d28c6ca23609fd9b561e704.png)

在 C++/CLI 的 Visual Studio 调试器中，是否不能对托管对象的默认索引器使用表达式？

YYSTYPE 被声明为包含单个 Object^ 引用的托管值结构，如下所示：

```
value struct YYSTYPE
 {
    Object^ obj;

    /* Constant integer value */
    property long int4
    {
        long get() { return safe_cast<long>(obj); }
        void set(long value) { obj = safe_cast<Object^>(value); }
    }
    /* Constant floating point value */
    property float fp
    {
        float get() { return safe_cast<float>(obj); }
        void set(float value) { obj = safe_cast<Object^>(value); }
    }

    /* Constant string */
    property String^ str
    {
        String^ get() { return safe_cast<String^>(obj); }
        void set(String^ value) { obj = safe_cast<Object^>(value); }
    }

    /* Expression or Expression Tree */
    property ExprC^ exprR
    {
        ExprC^ get() { return safe_cast<ExprC^>(obj); }
        void set(ExprC^ value) { obj = safe_cast<Object^>(value); }
    }

    /* List of expressions used for parameter lists */
    property List<ExprC^>^ exprListR
    {
        List<ExprC^>^ get() { return safe_cast<List<ExprC^>^>(obj); }
        void set(List<ExprC^>^ value) { obj = safe_cast<Object^>(value); }
    }

    /* List Of instructions */
    property InstrListC^ instrListR
    {
        InstrListC^ get() { return safe_cast<InstrListC^>(obj); }
        void set(InstrListC^ value) { obj = safe_cast<Object^>(value); }
    }

    /* Instruction with actual parameters */
    property InstrC^ instrR
    {
        InstrC^ get() { return safe_cast<InstrC^>(obj); }
        void set(InstrC^ value) { obj = safe_cast<Object^>(value); }
    }

    /* Run-time expression operator */
    property OperatorC^ operatorR
    {
        OperatorC^ get() { return safe_cast<OperatorC^>(obj); }
        void set(OperatorC^ value) { obj = safe_cast<Object^>(value); }
    }

    /* Instruction definition */
    property InstrDefC^ instrDefR
    {
        InstrDefC^ get() { return safe_cast<InstrDefC^>(obj); }
        void set(InstrDefC^ value) { obj = safe_cast<Object^>(value); }
    }

    /* Instruction definition */
    property List<String^>^ stringListR
    {
        List<String^>^ get() { return safe_cast<List<String^>^>(obj); }
        void set(List<String^>^ valueIR) { obj = safe_cast<Object^>(valueIR); }
    }
}; 
```

添加了 10-18-12 16:24 PDT 我已经能够使用更简单的 C++/CLI 程序来重现这一点。

```
void main()
{
    array<int>^ intarray = gcnew array<int>(10);
    intarray[0]=0;
    intarray[1]=1;
    intarray[2]=2;
    intarray[3]=3;
    intarray[4]=4;
    intarray[5]=5;
} 
```

为最后一行设置断点，然后在监视窗口中输入 intarray[3] 和 intarray[4-1]。[4-1] 元素显示 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:20:43.090

今天，我上个月在 Microsoft Connect 上发布了以下回复：

来自 Microsoft Connect 的问候！此通知是为反馈项目生成的：768001

Visual Studio 2012 调试器无法计算您在 Microsoft Connect 站点提交的托管 C++/CLI 数组的索引。您好乔恩，感谢您报告此问题。我们还没有修复，目前也没有计划在下一个版本中修复这个问题，但会在未来的版本中考虑它。再次感谢。马克·潘恩

# exception - 在 Mockito 和 Groovy 2.0.4 中设置期望时出现 InvalidUseOfMatchersException

> ID：12961566
> 
> 赞同：3
> 
> 时间：2012-10-18T18:43:36.623
> 
> 标签：exception, groovy, mockito

尝试使用模拟执行简单测试时遇到意外错误。

```
@RunWith(MockitoJUnitRunner)
class AccessorTest {

    @Mock
    private DeviceBuilder deviceBuilder

    @Test
    void shouldCreateDeviceFromFilesystem() {
        //given
        URI uri = this.class.classLoader.getResource("sample-filesystem").toURI()
        File deviceRoot = new File(uri)

        Accessor accessor = new Accessor(deviceBuilder)
        Device expectedDevice = new Device(deviceRoot)
        when(deviceBuilder.build(eq(deviceRoot))).thenReturn(expectedDevice)

        //when
        Device device = accessor.readFrom(deviceRoot)
        //then
        assert device == expectedDevice
        verify(deviceBuilder).build(deviceRoot)
    }
} 
```

DeviceBuilder 是单一方法接口 Device::DeviceBuilder#build(File root)。根据 Josh Bloch，Device 具有明确定义的 equals 方法。

在 when() 行上抛出异常，并且范围内的所有变量都不是 null。完整的例外是：

```
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Invalid use of argument matchers!
0 matchers expected, 1 recorded.
This exception may occur if matchers are combined with raw values:
//incorrect:
someMethod(anyObject(), "raw String");
When using matchers, all arguments have to be provided by matchers.
For example:
//correct:
someMethod(anyObject(), eq("String by matcher")); 
```

值得一提的是我的 POM 片段：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <compilerId>groovy-eclipse-compiler</compilerId>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-eclipse-compiler</artifactId>
                    <version>2.7.0-01</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy-all</artifactId>
        <version>2.0.4</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.8.5</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

我的怀疑要么是 Groovy 管理类的方式有些奇怪，要么是某些版本不兼容，但我希望这是我看不到的显而易见的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T22:02:19.257

I know this is an old question, but this may be helpful to someone else.

The issue described in the question is detailed at [http://code.google.com/p/mockito/issues/detail?id=303](http://code.google.com/p/mockito/issues/detail?id=303)

I ran into the very same issue and I got it fixed by using the library provided at [https://github.com/cyrusinnovation/mockito-groovy-support](https://github.com/cyrusinnovation/mockito-groovy-support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:52:29.117

有时，Mockito 不会在它发生时标记不当使用，而是在下一次调用时标记。你可以看一下之前的测试，也许你那里有问题？

该消息说，在调用中，您要么只提供匹配器，要么只提供真实对象，而不是它们的组合。您通常可以通过使用 eq(obj) 而不是对象本身（或 sameInstance(obj)）来解决此问题，以拥有所有匹配器。但是在这种情况下，我在您发布的代码中找不到任何符合该描述的位置，这就是为什么我怀疑代码的较早位置存在问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-17T16:31:08.687

我不回答原来的问题。

我到处搜索，关于我得到的错误的唯一问题指向这个讨论。

如果有人遇到此错误：不要调用模拟方法为匹配器提供值。呼叫`deviceBuilder.build`应该在 BEFORE 之前`verify(`进行。

# uisplitviewcontroller - 实现 UISplitViewController 主从应用程序 - UIPopOverController 在旋转之前为空。

> ID：12961568
> 
> 赞同：2
> 
> 时间：2012-10-18T18:43:38.947
> 
> 标签：uisplitviewcontroller, uipopovercontroller

我正在尝试实现一个简单的 UISplitViewController，其中在纵向模式下主视图被隐藏并在弹出窗口中显示一个按钮。

我的 AppDelegate 是这样设置的：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

            // Override point for customization after app launch.
            self.splitViewController =[[UISplitViewController alloc]init];
            self.rootViewController=[[RootViewController alloc]init];
            self.detailViewController=[[FirstDetailViewController alloc]init];

            UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:rootViewController];
            UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:detailViewController];

            self.splitViewController.viewControllers=[NSArray arrayWithObjects:rootNav,detailNav,nil];
            self.splitViewController.delegate=self.detailViewController;
            splitViewController.presentsWithGesture = NO;

            // Add the split view controller's view to the window and display.
            [self.window setRootViewController:self.splitViewController];

[window makeKeyAndVisible];

        return YES;
    } 
```

在 FirstDetailViewController 我设置了一个这样的按钮：

```
UIImage *buttonImage = [UIImage imageNamed:@"button-menu.png"];
    UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [aButton setImage:buttonImage forState:UIControlStateNormal];
    aButton.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);
    [aButton addTarget:self action:@selector(showNavigation) forControlEvents:UIControlEventTouchUpInside];
    aBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:aButton];
    self.appDelegate.rootPopoverButtonItem = aBarButtonItem; 
```

showNavigation 看起来像这样：

```
-(void)showNavigation{

    NSLog(@"I am in show navigation and pc=%@",self.popoverController);

    [self.popoverController presentPopoverFromRect:self.view.frame
                                            inView:self.view
                          permittedArrowDirections:UIPopoverArrowDirectionAny
                                          animated:YES];
} 
```

当我最初加载应用程序并按下按钮时，我得到一个 NSLog

```
I am in show navigation and pc=(null) 
```

并且弹出窗口没有显示。现在，当我将设备旋转到横向模式，然后返回纵向时，主视图会按预期隐藏和显示，并且按钮现在可以在纵向模式下工作。

这是处理旋转的代码：

```
- (void)splitViewController: (UISplitViewController*)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController: (UIPopoverController*)pc {

    [[self navigationItem] setLeftBarButtonItem:aBarButtonItem];
    [self setPopoverController:pc];
    self.appDelegate.rootPopoverButtonItem = aBarButtonItem;

}

// Called when the view is shown again in the split view, invalidating the button and popover controller.
- (void)splitViewController: (UISplitViewController*)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem {
    [[self navigationItem] setLeftBarButtonItem:nil];
    [self setPopoverController:nil];
    self.appDelegate.rootPopoverButtonItem = aBarButtonItem;

} 
```

如何在任何旋转发生之前让 popovercontroller 不为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:01:17.537

好吧，原来我的 willHideViewController 中有一个 if 不包含 [self setPopoverController:pc]; 线。呃！

# java - SSLPeerUnverifiedException：对等体未通过身份验证

> ID：12961570
> 
> 赞同：23
> 
> 时间：2012-10-18T18:43:40.647
> 
> 标签：java, httpclient

再一次，SSLPeerUnverified 的沉闷问题，但我没有使用自签名证书。我尝试使用 https 连接到主机。此主机具有正确的证书，Firefox 和 HttpsUrlConnection 都没有任何问题。但是尝试使用 HttpClient 进行连接时，我得到了可怕的异常。

有什么线索吗？或者提示在哪里看更近？

谢谢！

编辑：调试输出

主要，处理异常：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: 
sun.security.provider.certpath.SunCertPathBuilderException: 
unable to find valid certification path to requested target 
```

主要，getSession() 中的 IOException：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: 
PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: 
unable to find valid certification path to requested target 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-17T20:30:56.390

您似乎需要将证书导入 JVM 正在使用的受信任密钥库中。如果您没有在应用程序中使用不同的受信任密钥库，则这将是“cacerts”。

[您可以按照“如何在 Groovy / Java 中修复 'SSLPeerUnverifiedException: peer not authenticated' Exception](http://nerd-ability.blogspot.co.uk/2013/01/tech-how-to-fix-sslpeerunverifiedexcept.html) ”中的分步指南进行操作。

精简版：

1.  运行以下命令，替换`$ADDRESS`为 URL，减去“https://”：

    ```
    echo -n | openssl s_client -connect $ADDRESS:443 | \
      sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > /tmp/$ADDRESS.cert 
    ```

2.  运行以下命令，`$ALIAS`将密钥的短名称替换为`$ADDRESS`上面的证书名称，`$PATH`以及 JRE 中 cacerts 的路径。

    ```
     sudo keytool -importcert -alias "$ALIAS" -file /tmp/$ADDRESS.cert \
       -keystore $PATH/cacerts -storepass changeit 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-10T09:22:11.103

以前的答案链接不起作用，所以我附上额外的：

[https://blogs.oracle.com/java-platform-group/entry/self_signed_certificates_for_a](https://blogs.oracle.com/java-platform-group/entry/self_signed_certificates_for_a)

# directx - D3DX9 自定义网格在渲染过程中与自身重叠

> ID：12961584
> 
> 赞同：2
> 
> 时间：2012-10-18T18:44:25.243
> 
> 标签：directx, overlap, mesh, culling

我有自定义模型文件格式，我正在从中读取以在 DX 中创建模型。我用

```
DWORD dwFVF = ( D3DFVF_XYZ | D3DFVF_NORMAL | D3DFVF_TEX1 );
D3DXCreateMeshFVF(numIndices/3, numVertices, D3DXMESH_MANAGED, dwFVF, *d3ddev, mesh); 
```

创建网格，然后依次锁定、填充、解锁索引缓冲区、顶点缓冲区和属性缓冲区。

```
void createMeshFromSkn(ifstream* fHandle, LPDIRECT3DDEVICE9 * d3ddev, LPD3DXMESH * mesh)
{
        // Start reading the file
        int magic = readInt(fHandle);
        short version = readShort(fHandle);
        short numObjects = readShort(fHandle);

        SKNMaterial *materialHeaders;

        if (version > 0)
        {
                // Read in the material headers
                int numMaterialHeaders = readInt(fHandle);
                fHandle->seekg((16 + MATERIAL_NAME_SIZE) * numMaterialHeaders, ios::cur);

                // Read in model data.
                int numIndices = readInt(fHandle);
                int numVertices = readInt(fHandle);

                // Create the mesh
                DWORD dwFVF = ( D3DFVF_XYZ | D3DFVF_NORMAL | D3DFVF_TEX1 );
                D3DXCreateMeshFVF(numIndices/3, numVertices, D3DXMESH_MANAGED, dwFVF, *d3ddev, mesh);

                // Read in the index buffer
                WORD* indexBuffer = 0;
                (*mesh)->LockIndexBuffer(0, (void**)&indexBuffer);

                for (int i = 0; i < numIndices; i++)
                {
                        indexBuffer[i] = readShort(fHandle);
                }

                (*mesh)->UnlockIndexBuffer();

                // Read in the vertexBuffer
                D3DVERTEX* vertexBuffer;
                (*mesh)->LockVertexBuffer( 0, (void**)&vertexBuffer);

                for (int i = 0; i < numVertices; ++i)
                {
                        ((D3DVERTEX*)vertexBuffer)[i].position.x = readFloat(fHandle);
                        ((D3DVERTEX*)vertexBuffer)[i].position.y = readFloat(fHandle);
                        ((D3DVERTEX*)vertexBuffer)[i].position.z = readFloat(fHandle);

                        for (unsigned int j = 0; j < BONE_INDEX_SIZE; ++j)
                        {
                                int bone = (int) readByte(fHandle);
                                //data->vertices[i].boneIndex[j] = bone;
                        }

                        //////////////////////////////////////////////////////////////////////////
                        //
                        // Need to fix this to work with bones
                        //
                        //////////////////////////////////////////////////////////////////////////
                        D3DXVECTOR4 weight;

                        weight.x = readFloat(fHandle);
                        weight.y = readFloat(fHandle);
                        weight.z = readFloat(fHandle);
                        weight.w = readFloat(fHandle);

                        ((D3DVERTEX*)vertexBuffer)[i].normal.x = readFloat(fHandle);
                        ((D3DVERTEX*)vertexBuffer)[i].normal.y = readFloat(fHandle);
                        ((D3DVERTEX*)vertexBuffer)[i].normal.z = readFloat(fHandle);

                        ((D3DVERTEX*)vertexBuffer)[i].tu = readFloat(fHandle);
                        ((D3DVERTEX*)vertexBuffer)[i].tv = readFloat(fHandle);
                }

                (*mesh)->UnlockVertexBuffer();

                DWORD *pAttribBuf;
                HRESULT hRslt = (*mesh)->LockAttributeBuffer(0, &pAttribBuf);
                if(hRslt != D3D_OK)
                        return; // Add error handling

                unsigned int numFaces = (*mesh)->GetNumFaces();
                for(unsigned int i=0; i<numFaces; i++)
                        pAttribBuf[i]= 0;

                hRslt = (*mesh)->UnlockAttributeBuffer();
                if(hRslt != D3D_OK)
                        return; // Add error handling

                DWORD *m_pAdjacencyBuffer;
                m_pAdjacencyBuffer = new DWORD[3 * (*mesh)->GetNumFaces()];
                (*mesh)->GenerateAdjacency(0.0f, m_pAdjacencyBuffer);

                (*mesh)->OptimizeInplace(D3DXMESHOPT_ATTRSORT | D3DXMESHOPT_VERTEXCACHE, m_pAdjacencyBuffer, NULL, NULL, NULL);

        }

        return;
} 
```

我的问题是模型与自身重叠：

[http://imageshack.us/a/img210/2732/20121018181019896.png](http://imageshack.us/a/img210/2732/20121018181019896.png)

我启用了逆时针背面剔除：

```
d3ddev->SetRenderState(D3DRS_CULLMODE, D3DCULL_CCW); 
```

我也启用了 z-buffer，但我很确定这只是在两个网格之间，而不是在一个网格和它本身之间。

我花了最后一天半的时间尝试谷歌寻求解决方案，但我找不到任何东西。任何帮助或帮助链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:53:59.350

事实证明我*实际上*并没有打开 Z 缓冲，因为我需要在 d3d 演示参数中打开它：

```
d3dpp.EnableAutoDepthStencil = TRUE;
d3dpp.AutoDepthStencilFormat = D3DFMT_D16; 
```

一旦我这样做并添加了一个

```
d3ddev->Clear(0, NULL, D3DCLEAR_ZBUFFER, D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0); 
```

到渲染循环，它会正确渲染。

哇，很高兴我知道了这一点。我希望这有助于其他人探索 DX

# css - 覆盖 jquery.mobile-1.0b3.min.css 中的样式

> ID：12961588
> 
> 赞同：0
> 
> 时间：2012-10-18T18:44:38.503
> 
> 标签：css, jquery-mobile

我正在使用 jquery.mobile-1.0b3.min.css 构建一个移动网站。如果我下载 css 文件，我会丢失我正在使用的主题中的一些效果和图标。但是我需要覆盖该文件中的一些样式，即使它托管在 jquerymobile.com 上。

我需要覆盖的样式是 ui-select。这种样式的宽度属性是宽度：60%，但我需要完全删除该样式，同时保持其余部分不变。

```
.ui-select {
width: 60%;
display: inline-block;
} 
```

有没有办法去除宽度：60%；不影响显示：内联块；？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:57:50.380

您可以添加自己的样式表来覆盖任何以前的样式。（只需确保您的自定义样式表在 jQuery 样式表之后加载。）

# gwt - GWT ListBox 检测何时重新选择值

> ID：12961595
> 
> 赞同：2
> 
> 时间：2012-10-18T18:44:52.990
> 
> 标签：gwt, listbox

我在使用 GWT 列表框时遇到问题。我有一种情况，用户从列表框中选择一个值，但如果他们更改相关字段中的数据，它可能会失效。要验证列表框，用户必须选择一个新值，或者通过再次选择相同的值来确认他们的旧选择。我不知道如何确定他们是否选择了相同的值，以便我可以重新设置 listBox 的样式以使其看起来经过验证。

valueChanged 处理程序仅检测是否选择了新值。clickHandler 和 focusHandler 触发太频繁，因为它们在用户未选择值时触发。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:35:50.440

您可以通过以下方式改进 clickHandler：

```
 ignoreClick = true;
     lastSelection =  -1 ;
            ....
    listBox.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {

            if (!ignoreClick) {
                lastSelection = listBox.getSelectedIndex();
            }
            ignoreClick = !ignoreClick;     
        }
    }); 
```

我试过了，只有在您选择了一个项目时才会触发该事件。但是你应该重新考虑你的用户界面，就像上面所说的那样。

# java - Objectify 查询如何工作

> ID：12961599
> 
> 赞同：0
> 
> 时间：2012-10-18T18:45:07.060
> 
> 标签：java, google-app-engine, objectify

假设我有这个代码：

```
 Query<Car> q = ofy().load().type(Car.class);
    for (Car car : q) {
        // Do something with car...
    } 
```

工作原理 是什么`Query<T>`，假设数据存储包含数百万条记录，将`Query`所有`Car`对象加载到内存中还是从数据存储中一一获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:54:50.817

# jquery - 生成的 JsonResult 中的属性名称大小写不一致

> ID：12961607
> 
> 赞同：3
> 
> 时间：2012-10-18T18:45:33.393
> 
> 标签：jquery, vb.net, json, caching, asp.net-mvc-2

我已经为此苦苦思索了一段时间，并决定让 SO 社区对此进行破解......

我有一些操作可以响应来自客户端的 POST，这些操作执行简单的任务，`JsonResult`如果成功，则返回从匿名类构建的具有简单布尔“成功”属性的操作，或者如果操作不成功，则返回`PartialViewResult`错误`ModelState`：

```
<HttpPost()> _
Public Function UpdateHeader(ByVal header As XmlReturnHeader) As ActionResult
    If ModelState.IsValid Then
        Dim updated As Integer = TaxRepository.XmlReturnHeader.Update(header)
        If updated = 1 Then
            Return Json(New With {.Success = True}, JsonRequestBehavior.AllowGet)
        End If
    End If
    Return PartialView("Maintenance/Header", header)
End Function 
```

在客户端，代码同样简单。我想看看结果是否有`Success`属性，确保它是真的`true`，然后从那里开始：

```
$.post('<%= Url.Action("UpdateHeader") %>', $(this).serialize(), function (data) {
    if (data.Success && data.Success === true) {
        $('#list').trigger('reloadGrid');
        $('#edit').dialog('close');
    } else { // result must be the HTML
        $('#edit').html(data);
    }
}); 
```

但是，我遇到了问题测试。我从回调函数收到的`data`对象总是如下所示：

```
{ success: true }
  ^ 
```

`s`in是小写的`success`，而且因为JS是区分大小写的，所以有问题。

奇怪的是，如果我将 VB.NET 代码更改为

```
Return Json(New With {.Garbage = True}, JsonRequestBehavior.AllowGet), 
```

我会收到

```
{ Garbage: true } 
```

如果我把它改回`New With { .Success = True }`，我会再次看到小写的`s`。

我正在使用 IIS 和 IE9 进行测试。我觉得响应以某种方式被缓存了。在应用程序中的其他地方，我使用小写的“成功”作为匿名`JsonResult`参数中的属性。也许 IIS 正在缓存来自先前 GET 或 POST 请求的响应？

**[更新]**

为了测试响应缓存理论，我将代码更改为：

```
Return Json(New With {.Success = True, .Random = DateTime.Now.Ticks},
   JsonRequestBehavior.AllowGet) 
```

这导致在客户端收到正确的响应。伟大的。但之前到底发生了什么？我认为 POST 可以免于缓存？还是只有请求而不是响应？

以后如何避免这种情况？

**[更新]**

另一个花絮：我确实通过 jQuery 全局禁用缓存我的请求，但我没有`OutputCacheAttribute`在服务器端使用任何 s 或任何此类“无缓存”机制。我快速拍打`<OutputCache(NoStore:=True, Duration:=0, VaryByParam:="*")>`整个控制器，`.Random`从 JSON 中删除了属性，但仍然收到`{ success: true }`.

我已经回收了应用程序池，删除了临时 .NET 文件，并清除了浏览器缓存，但同样的问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T14:38:53.423

如果你还没有看过，不妨看看下面这篇关于 ASP.net MVC 中的输出缓存的文章：http: [//juristr.com/blog/2012/10/output-caching-in-aspnet- MVC/](http://juristr.com/blog/2012/10/output-caching-in-aspnet-mvc/)

根据文章，默认响应标头包括：

```
Cache-Control:private 
```

这意味着 IE*可以*将响应缓存在私有缓存中。本文提供了三个选项来禁用这些请求的缓存：在服务器上全局禁用它（出于客户端性能原因我不建议这样做），编写自定义全局操作过滤器（具有相同的结果），或添加一个属性到您的控制器操作称为 OutputCache：

```
<OutputCache(Duration:=0)> 
```

虽然 jQuery 设置应该执行类似的功能，但它可能不会获得相同的结果。试试这个，看看它是否有效。

# python - 如何获取在 url 中传递的参数？

> ID：12961608
> 
> 赞同：1
> 
> 时间：2012-10-18T18:45:33.317
> 
> 标签：python, url, flask, urllib2

我正在制作一个股票应用程序，在用户输入股票`MSFT`（`.../stock?s=MSFT`例如在这种情况下，将`MSFT`) 取出并将其保存为新变量。

我能想到的最简单的方法就是获取当前 URL，尽管我似乎找不到这样做的方法；使用`self.request...`，但这返回了错误：

```
NameError: global name 'self' is not defined 
```

我遇到的其他想法是使用一种形式，`urllib`因为它包含一个特定的`.request_qs()`方法，尽管这需要我将 URL 作为参数传递，由于库存的变化，每次都应该是唯一的。

这是我目前拥有的 Python：

```
@app.route('/', methods=['GET', 'POST'])
def home_search():
    if request.method == 'POST':
            st = request.form['s']
            return redirect(url_for('stock')+'?s='+st)

    return render_template('stk.html') 

@app.route('/stock', methods=['GET', 'POST'])
def stock():
    #here I need to save the variable 'name' as the current URL. I can parse it later.
    url="http://finance.yahoo.com/d/quotes.csv?s="+name"&f=snl1"
    text=urllib2.urlopen(url).read()

    return render_template('stock.html') 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T18:55:22.663

1.  它是`request`（从烧瓶包中导入的），而不是`self.request`

2.  Flask 文档一如既往地提供有关 URL 中变量的详尽文档：http: [//flask.pocoo.org/docs/quickstart/#variable-rules](http://flask.pocoo.org/docs/quickstart/#variable-rules)

    ```
    @app.route('/user/<username>')
    def show_user_profile(username):
        # show the user profile for that user
        return 'User %s' % username 
    ```

在那种情况下，您应该阅读 Flask 文档中的整个快速入门：http: [//flask.pocoo.org/docs/quickstart/](http://flask.pocoo.org/docs/quickstart/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:55:01.957

您尚未发布任何有关错误发生位置的信息 :) 而且我看不到您尝试访问的位置`self.requests`。

查看其他 Flask 应用程序，您似乎应该直接访问`request`。

看看这些例子：[https ://github.com/mitsuhiko/flask/tree/master/examples](https://github.com/mitsuhiko/flask/tree/master/examples)

# authentication - SAML 2.0 与 OpenID

> ID：12961614
> 
> 赞同：6
> 
> 时间：2012-10-18T18:46:02.520
> 
> 标签：authentication, openid, saml, saml-2.0

鉴于 SAML 2.0 支持“联合”概念，并且 Google 等知名玩家使用 SAML，有人可以解释为什么其他一些服务（例如 stackoverflow）使用 OpenID？这仅仅是历史原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T20:13:33.467

首先，我应该说 Google 是一个 SAML 提供者，也是一个 OpenID 提供者。

在 stackoverflow 的情况下，如果他们愿意为 SSO 使用 SAML 2.0，那么他们需要提前将 stackoverflow 与 Google 或任何其他 SAML Provider 耦合。当 stackoverflow 与许多 SAML 提供者耦合时，当用户尝试登录时，stackoverlow 需要一种机制来确定应该将用户重定向到哪个身份提供者进行身份验证。（您可以使用 SAML 2.0 配置文件，第 4.3 节身份提供者发现配置文件）。但无论如何，这将是一个痛苦的实现。

但是有了 OpenID，它有自己的发现配置文件，stackoverflow 不必提前知道 Identity Provider，没有直接耦合。所以他们使用的是正确的协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T03:44:51.587

据我所知：

OpenID 允许网络（stackoverflow）使用来自各种 OpenID 提供者的身份（并且没有共享身份）

SAML (/w federation) 允许在各种服务提供商/网络中共享身份

# html - 如何在 Outlook 中禁止 Word HTML 字体定义？

> ID：12961617
> 
> 赞同：0
> 
> 时间：2012-10-18T18:46:11.960
> 
> 标签：html, outlook-2010

我目前正在尝试解决 Outlook html 电子邮件的问题。如果我使用这样的简单（大约 85-100kb）html 电子邮件，并在 Outlook 中将其转发给我自己：

```
<html>
    <body>
        <table>
        <tr><td>Hello</td><td>World</td></tr>
        <!-- Repeat the above row about 1-2000 times -->
        <table>
    </body>
<html> 
```

Outlook 自然会添加一些自己的标记。我不介意额外/凌乱的 html，但字体定义的数量是荒谬的：指定了超过 24,000 种字体。这会导致电子邮件至少需要 30 秒 - 1 分钟才能加载。（更不用说大小膨胀到超过 2MB - 但这是次要的）

```
/* Font Definitions */
@font-face
    {font-family:Helvetica;
    panose-1:2 11 5 4 2 2 2 2 2 4;}
@font-face
    {font-family:Courier;
    panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
    {font-family:"Tms Rmn";
    panose-1:2 2 6 3 4 5 5 2 3 4;} 
```

所以问题是：有谁知道 Outlook 从哪里生成这个字体定义列表？这个列表中有一些看起来很疯狂的东西，甚至看起来都没有字体：

```
@font-face
    {font-family:"?&not\;\0027 ??S?V??N Pro R Cyr";}
@font-face
    {font-family:"?&not\;\0027 ??S?V??N Pro EL Cyr";}
@font-face
    {font-family:"_ae&\#143\;6f- c5z d1";}
@font-face
    {font-family:"\,  l\,  r -  l  \0027  &copy\;   CE";}
@font-face
    {font-family:"$B\#M\#S\(B $BL\@D+\(B\;\;\;\;\;\;\;\;\;\;";} 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:48:21.713

We spent a lot of time with MS Support on this to no avail. Apparently Outlook caches fonts from *incoming* emails (unbelievable I know) somewhere in memory and includes them in every outgoing HTML format email. So if a user receives an email with a huge number of corrupted font definitions, this will get forwarded to every subsequent recipient until outlook is restarted. (It's almost virus-like)

The resolution is to upgrade to Outlook 2012, which has allegedly addressed this issue. Microsoft would not provide a workaround or patch for 2010, citing it as a case of "works as designed".

# sql - SQL AND OR 评估不同的结果

> ID：12961619
> 
> 赞同：2
> 
> 时间：2012-10-18T18:46:24.503
> 
> 标签：sql, sql-server

在 SQL 中使用 AND 和 OR 时遇到问题。

这将返回一条记录：

```
SELECT DISTINCT s.SupplierName, r.ReturnID, r.Reason
FROM tblSupplierProducts sp, tblReturns r,tblSuppliers s
WHERE sp.SupplierID=s.SupplierID
AND sp.ProductID=r.productID
AND r.Reason LIKE 'Unreadable disk' 
```

这也返回一条记录：

```
SELECT DISTINCT s.SupplierName, r.ReturnID, r.Reason
FROM tblSupplierProducts sp, tblReturns r,tblSuppliers s
WHERE sp.SupplierID=s.SupplierID
AND sp.ProductID=r.productID
AND r.Reason LIKE 'Scratched CD' 
```

但是当我这样做时：

```
SELECT DISTINCT s.SupplierName, r.ReturnID, r.Reason
FROM tblSupplierProducts sp, tblReturns r,tblSuppliers s
WHERE sp.SupplierID=s.SupplierID
AND sp.ProductID=r.productID
AND r.Reason LIKE 'Unreadable disk' 
OR r.Reason LIKE 'Scratched CD' 
```

“不可读的磁盘”结果存在且正确，但“划痕 CD”不存在（对于每个不同的供应商，它具有相同的值）如果我像这样交换它们：

```
SELECT DISTINCT s.SupplierName, r.ReturnID, r.Reason
FROM tblSupplierProducts sp, tblReturns r,tblSuppliers s
WHERE sp.SupplierID=s.SupplierID
AND sp.ProductID=r.productID
AND r.Reason LIKE  'Scratched CD'
OR r.Reason LIKE 'Unreadable disk' 
```

我的第一个结果是正确的（'Scratched CD'），而'Unreadable disk' 为多个供应商返回相同的值。

似乎 AND OR 搞乱了查询，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:49:17.683

LIKE 旨在与 % 通配符一起使用来表示 0+ 个随机字符。

组合 AND 和 OR 时使用 ()，以防止出现歧义的 where 子句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:49:50.290

你的操作顺序有问题。您绝对应该使用括号来确保逻辑是已知的。它隐含的做法是：

```
 USE CNB_ONLINE
    SELECT DISTINCT s.SupplierName, r.ReturnID, r.Reason
    FROM tblSupplierProducts sp, tblReturns r,tblSuppliers s
    WHERE (sp.SupplierID=s.SupplierID
    AND sp.ProductID=r.productID
    AND r.Reason LIKE 'Unreadable disk')
 (OR r.Reason LIKE 'Scratched CD') 
```

你应该有这样的代码：

```
 USE CNB_ONLINE
    SELECT DISTINCT s.SupplierName, r.ReturnID, r.Reason
    FROM tblSupplierProducts sp, tblReturns r,tblSuppliers s
    WHERE sp.SupplierID=s.SupplierID
    AND sp.ProductID=r.productID
    AND (r.Reason LIKE 'Unreadable disk' OR r.Reason LIKE 'Scratched CD') 
```

您可以在此处找到优先顺序：http: [//msdn.microsoft.com/en-us/library/ms190276.aspx](http://msdn.microsoft.com/en-us/library/ms190276.aspx)，您会注意到 AND 在 OR 之前得到评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:48:21.097

AND 优先于 OR，因此当您执行 OR 语句时，这是唯一满足的条件。因此，查询中的第二个语句将具有更宽松的标准。您需要明确地对查询进行分组，例如：

```
WHERE sp.SupplierID=s.SupplierID
AND sp.ProductID=r.productID
AND (r.Reason LIKE  'Scratched CD'
OR r.Reason LIKE 'Unreadable disk') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T18:48:22.377

当你使用 LIKE 时，你真的应该放入一些通配符，比如`%`. 否则，如果您正在寻找文字字符串，只需使用`=`.

尝试在 WHERE 子句的各个部分周围加上括号，看看是否有帮助：

```
AND sp.ProductID=r.productID
AND ((r.Reason = 'Scratched CD')
    OR (r.Reason = 'Unreadable disk')) 
```

# javascript - ajax .done 运行不正常，似乎跳过了代码

> ID：12961622
> 
> 赞同：4
> 
> 时间：2012-10-18T18:46:29.693
> 
> 标签：javascript, ajax, jquery

我有下面的代码在一个`.each`函数中运行。但是，当一切都设置完成并且我做`alert(inserted);`或警告任何其他变量时，它们会出现，`0`这就是我在声明它们时设置它们的内容。我确信它们在范围内。我觉得这与 ajax 的时间有关，因为如果我在每次调用后发出警报，计数器系统就会工作。任何想法？此外，我确信在我附加警报时调用了正确的 if 语句（正如我在上面所说的那样，当我这样做时，计数器工作）并且它们正确触发并且没有从控制台显示的错误代码。

```
$.ajax({
    type: "POST",
    url: "/php/filename.php",
    data: {
        one: $('#1').val(),
        two: $('#2').val(),
        three: $('#3').val(),
        four: $('#4').val(),
        five: $('#5').val(),
        six: $('#6').val(),
        seven: $('#classlist').val(),
        id: $('#7').html()
    }
}).done(function(msg) {
    if (msg == "inserted") {
        inserted++;
    }
    else if (msg == "updated") {
        updated++;
    }
    else if (msg == "duplicate") {
        duplicate++;
    }
    else if (msg == "0") {
        fail++;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:53:33.207

Ajax 是异步的，您的警报在 ajax 完成之前发生。将所有 ajax 返回值存储在一个数组中，将它们全部传递给 .when，然后使用它来提醒变量的值。

```
var promiseArr = [], inserted = 0;

for (var i = 0; i < 30000; i++) { // <--- unrealistic number of iterations
    promiseArr.push($.ajax({url:"foo.php?id=" + i}).done(function(){
        inserted++;
    }));
}
$.when.apply($,promiseArr).done(function(){
    alert(inserted);
}); 
```

# ruby-on-rails-3 - 通过 mongoid 中的样式关系对 has_many 建模的正确方法？

> ID：12961624
> 
> 赞同：0
> 
> 时间：2012-10-18T18:46:35.950
> 
> 标签：ruby-on-rails-3, mongoid

我需要弄清楚如何在 mongoid 中最好地建模，我有一个画廊模型和一个图像模型。我需要能够让图像能够在多个文档中被引用，并且我需要每个画廊都允许在画廊中对图像进行排序。在 mysql 中，我会使用连接表来执行此操作，但我似乎无法弄清楚如何最好地使用 mongodb/mongoid 来执行此操作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:01:10.630

`has_and_belongs_to_many`，这里不需要连接表。在 mongoid HABTM 中，两边都存储了 id 数组。所以如果你定义：

```
class Gallery; has_and_belongs_to_many :images; end
class Image; has_and_belongs_to_many : galleries; end 
```

您将拥有`image_ids`图库文档和`gallery_ids`图像文档。也可以对图库中的图像进行排序，`gallery.images`这是一种关系代理，您可以将更多条件链接到该关系代理以过滤/排序结果：

```
gallery.images.desc(:updated_at)
gallery.images.asc(:user_id)
gallery.images.asc(:my_sort_order_from_drag_drop) 
```

# vb.net - 日期时间选择器验证

> ID：12961627
> 
> 赞同：1
> 
> 时间：2012-10-18T18:46:50.800
> 
> 标签：vb.net, datetimepicker

我想验证 vb.net 中的 DateTimePicker 控件。我将它用于员工的加入日期，所以我不希望控件允许选择未来的日期..只有当前日期之前的日期才能被允许选择。我尝试了以下代码：

```
Private Sub DateTimePickerDOJ_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles DateTimePickerDOJ.ValueChanged

    If DateTimePickerDOJ.Value > Date.Today Then
        MessageBox.Show("You Cannot Select a Future Date!", "", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End If
End Sub 
```

上面的代码只正确显示了消息，但它没有用，因为选择了未来的日期。

谁能帮我解决dis问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:49:52.107

您可以使用[DateTimePicker.MaxDate](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx)属性来实现这一点。

"获取或设置可以在控件中选择的最大日期和时间。"

# linux - 你如何用 gitg 推送代码？

> ID：12961630
> 
> 赞同：26
> 
> 时间：2012-10-18T18:47:04.423
> 
> 标签：linux, git, ubuntu, push, gitg

我可以做我需要的所有其他事情，但使用 GUI 我似乎无法弄清楚如何拉取或推送代码。在这种情况下，推送更重要，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-11-12T15:04:19.140

在 gitg 3.14 中寻找此功能的任何人：我从开发人员那里得到确认，它尚未实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T19:30:27.710

想通了，不是太难，只需要在查看提交历史时右键单击分支名称

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T19:49:16.133

在历史选项卡上，右键单击跟踪分支的名称

![截屏](../Images/cb2788f896a4a10993008cf619dffb65.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T18:37:22.557

`.git/hooks`在名为的文件上创建`post-commit`并插入此代码

```
#!/bin/bash
git push -u origin master 
```

并将其转换为可执行脚本

```
chmod 755 post-commit 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-11T13:32:12.960

从版本 3.32.0 开始提供推送操作

[请参阅“Release 3.32.0”中的 NEWS 文件 gitg commit](https://gitlab.gnome.org/GNOME/gitg/-/commit/e0dbd9b31cd8fac546ddb928a9e594e6095b5d5e)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-23T06:38:20.267

根据[官方项目路线图](https://wiki.gnome.org/Apps/Gitg/RoadMap)，它是 todo 状态中的一个特性；目标版本是 0.3，所以我假设这个表没有更新，所以这个项目维护得很差：我们可以想象真正的 gnome 编码器不使用 GUI :)

[![在此处输入图像描述](../Images/685e6f5da3693e6c4037819e5e287890.png)](https://i.stack.imgur.com/f3B2B.png)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2014-12-12T10:25:21.683

您必须先克隆一个存储库。例如：

`git clone https://github.com/manuelkiessling/NodeBeginnerBook.git`

克隆后，进入下载的存储库并执行`gitk`

# git - gitweb 当前版本在 ubuntu 12.04 LTS 上失败

> ID：12961631
> 
> 赞同：1
> 
> 时间：2012-10-18T18:47:08.230
> 
> 标签：git, ubuntu

在 ubuntu 12.04 LTS 上，我尝试安装 gitweb（2012 年 6 月 5 日）：我这样做了：

*   将其作为快照

    [http://git.kernel.org/?p=git​​/git.git;a=tree;f=gitweb;h=b811d5a45d1a3d6f2d1101b383c99675e9323b7f;hb=HEAD](http://git.kernel.org/?p=git/git.git;a=tree;f=gitweb;h=b811d5a45d1a3d6f2d1101b383c99675e9323b7f;hb=HEAD)

将快照下载到 /sonstiges/pub/2012/git-b811d5a.tar.gz 并解压

```
wf@capri:/sonstiges/pub/2012$ scp git-b811d5a.tar.gz wf@jolo:/tmp
git-b811d5a.tar.gz                            100%   77KB  76.5KB/s   00:00   
root@jolo:/usr/local/src# tar xvfz /tmp/git-b811d5a.tar.gz 
git-b811d5a/
git-b811d5a/INSTALL
git-b811d5a/Makefile
git-b811d5a/README
git-b811d5a/gitweb.perl
git-b811d5a/static/
git-b811d5a/static/git-favicon.png
git-b811d5a/static/git-logo.png
git-b811d5a/static/gitweb.css
git-b811d5a/static/gitweb.js 
```

复印原件

```
root@jolo:/usr/local/src/git-b811d5a# cp /usr/lib/cgi-bin/gitweb.cgi /tmp 
```

开始制作

```
make prefix=/usr gitweb                          
make gitwebdir=/usr/lib/cgi-bin install-gitweb 
```

制作失败：

```
root@jolo:/usr/local/src/git-b811d5a# make prefix=/usr gitweb 
    SUBDIR ../
make[1]: *** No rule to make target `GIT-VERSION-FILE'.  Stop.
make: *** No rule to make target `gitweb'.  Stop. 
```

**需要做什么才能使工作正常？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:47:36.933

这是我在 2012-06 年所做的：

```
modify directory structure as in 
http://git.kernel.org/?p=git/git.git

get GIT-VERSION--GEN from
http://git.kernel.org/?p=git/git.git;a=blob_plain;f=GIT-VERSION-GEN;h=955b02b48032db91d80d8009da28e1d15099c56c;hb=f623ca1cae600e97cb0b38131fdd33e4fb669cf8

root@jolo:/usr/local/src/git# chmod +x GIT-VERSION--GEN 
root@jolo:/usr/local/src/git# ./GIT-VERSION--GEN 
```

这是我在 2014-05 年所做的：

```
sudo git clone git://git.kernel.org/pub/scm/git/git.git
cd git 
sudo curl -O  http://git.kernel.org/?p=git/git.git;a=blob_plain;f=GIT-VERSION-GEN;h=955b02b48032db91d80d8009da28e1d15099c56c;hb=f623ca1cae600e97cb0b38131fdd33e4fb669cf8
sudo chmod +x GIT-VERSION-GEN
sudo ./GIT-VERSION-GEN
sudo make prefix=/usr gitweb
sudo make gitwebdir=/usr/lib/cgi-bin install-gitweb 
```

# nhibernate - 在可为空的日期时间查询 NHibernate

> ID：12961634
> 
> 赞同：0
> 
> 时间：2012-10-18T18:47:10.870
> 
> 标签：nhibernate, nullable

我有一段时间从我的内存中的 sqlite db 中返回几行来模拟 oracle db。我正在编写一个 NHibernate 查询以通过可为空的 DateTime 提取行。我想我已经正确映射了它。看一看：

数据对象属性：

```
public virtual System.Nullable<System.DateTime> RequiredInstallDt { get; set; } 
```

映射：

```
Map(x => x.RequiredInstallDt).Column("REQUIRED_INSTALL_DT").Nullable(); 
```

数据库中有两行。一个应该拉起来，一个不应该拉起来。我要的日期是**2012-8-1**。没有时间价值，数据库中也没有时间价值，我已经能够验证。一行有 8 月 1 日，另一行没有。我期待一个记录返回。

如果我说：

```
IList<Request> ra = new RequestDAO().ListAll(); 
```

这是与我的查询相同的调用中的已知工作方法，我按预期获得了两条记录。

我已经使用 linq、hql 和 CreateCriteria 版本尝试了同一个查询的多个版本。结果几乎总是一样的。我得到 0 条记录（另一种方式是 NHibernate.Hql.Ast.ANTLR.QuerySyntaxException 所以这是一个 PEBKAC）。这是其中一个查询版本：

```
 DateTime installDate = new DateTime(2012, 8, 1);
        var requests = session.CreateCriteria<Request>()
            .Add(Restrictions.Ge("RequiredInstallDt", installDate))
            .Add(Restrictions.Lt("RequiredInstallDt", installDate.AddDays(1)))
            .List<Request>(); 
```

感谢您的阅读。我感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:24:30.260

尝试添加`not null`限制。您的查询可能是

```
DateTime installDate = new DateTime(2012, 8, 1);
var requests = session.CreateCriteria<Request>()
        .Add(Restrictions.Ge("RequiredInstallDt", installDate))
        .Add(Restrictions.Lt("RequiredInstallDt", installDate.AddDays(1)))
        .Add(Restriction.IsNotNull("RequiredInstallDt"))
        .List<Request>(); 
```

# c - C程序在我的电脑上编译运行，在其他机器上不行

> ID：12961639
> 
> 赞同：0
> 
> 时间：2012-10-18T18:47:45.093
> 
> 标签：c

该程序基本上在给定的单词列表中搜索字符串，这些字符串是从终端输入的单词的字谜。它遵循以下算法：

1.  对列表中的所有单词进行排序
2.  计算排序单词的哈希值，使所有字谜具有相同的哈希值
3.  创建哈希表并通过存储哈希值、排序的单词和实际单词开始链接
4.  通过检查哈希表找到字谜

现在的问题是它可以在我的机器上完美运行，但不能在其他计算机上运行。我在此处包含代码并提供单词列表的链接。我知道要求你们下载单词列表然后编译和检查太过分了，但如果你让我知道这将意味着很多。我正在运行带有 2.6.38-13-generic-pae 的 Ubuntu 11.04

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>
#include<string.h>

typedef struct x
{
int hashvalue;
char dictword[100];
char ascending[100];
struct x *next;
} node;

char *sortWord(char *);
//double fact(int);
void main()
{
FILE *fp1, *fp2;
char ch1;
while(ch1!='q')
{   
char *dictsort;
dictsort=(char *)malloc(100*sizeof(char));  
fp1=fopen("wordlist.txt", "r");
char ch;
int i=0;
char *sortedword;
int hashindex;
long int n;
printf("Please enter size of hashtable or press Ctrl+C to break:\n");
scanf("%ld", &n);

 node *hashtable[n];
 node *temp;
 char test1[50];
char *test;     
printf("Please enter the word to find anagrams for:\n");
scanf("%s", test1);
test=sortWord(test1);
int testhash=hashfunction(test);
printf("Hash value of word is %d\n", testhash);
for(i=0;i<1000000;i++)
{
    hashtable[i]=NULL;
}
temp=NULL;
while(!feof(fp1))
{   //printf("Seg fault here...\n");        
    //ch=getc(fp1);     
    fgets(dictsort, (100*sizeof(char)),fp1);
    //puts(dictsort);

    sortedword=(char *)malloc(sizeof(dictsort));
    sortedword = sortWord(dictsort);
    hashindex=hashfunction(sortedword);

    if(hashtable[hashindex]==NULL){ 

        hashtable[hashindex] = (node *)malloc(sizeof(node));
        strcpy(hashtable[hashindex]->dictword,dictsort);
        strcpy(hashtable[hashindex]->ascending,sortedword);
        hashtable[hashindex]->hashvalue=hashindex;
        hashtable[hashindex]->next=NULL;        
    }else{

        temp = (node *)malloc(sizeof(node));
        strcpy(temp->dictword,dictsort);
        strcpy(temp->ascending,sortedword);
        temp->hashvalue=hashindex;
        temp->next=hashtable[hashindex];
        hashtable[hashindex]=temp;
    //  free(temp);             
    }
    //printf("%s", hashtable[hashindex]->dictword);
    free(sortedword);

}

//for(i=0;i<100000;i++)
//{ 
    node *print;
    print=(node *)malloc(sizeof(node));
    print=hashtable[testhash];
    int chk;        

    while(print!=NULL)
    {
        chk=strcmp(print->ascending,test);
        if(chk==0)              
            {
                printf("%s\n", print->dictword);
                print=print->next;
            }   

        else
        print=print->next;
    }

    free(print);

}
}

int hashfunction(char *sw){

int a=0,i=0;
int k,b,c;
int div=1000000;
int blah;
int hv;     
for(i=0;sw[i]!='\0';i++){

    a=sw[i];
    //b=sw[i+1];
    //c=sw[i+2];        
    if(a!=10&&b!=10)
    {
        k=a*fact(i);
        b=k;            

        hv+=b;  
    }

}
hv=hv%div;  
return hv;

}

char *sortWord(char *s)
{
int c, d = 0, length;
char *pointer, *result, ch;
FILE *fp;
length = strlen(s);

result = (char*)malloc(length+1);

pointer = s;

for ( ch = 'a' ; ch <= 'z' ; ch++ )
{
        for ( c = 0 ; c < length ; c++ )
        {
            if ( *pointer == ch )
            {
                    *(result+d) = *pointer;
                    d++;
            }
        pointer++;
            }
    pointer = s;
}
*(result+d) = '\0';
char *z;
z=(char *)malloc(length+1);
strcpy(z, result);

//fp=fopen("sortedlist.txt", "a");
//fprintf(fp, "%s\n", s);

//fclose(fp);

free(result);

//puts(s);
//return result;
return z;   
//free(result); 

}

int fact(int num)
{
int i;
int val=1;
for(i=num+1;i>=1;i--)
{
    val=val*i;
}

return val%1000000;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:50:51.273

在许多其他事情中：

```
 int hv;
 /* ... */
 hv+=b; 
```

`hv`永远不会被初始化。（好吧，不是`b`同一个函数中的对象，并且不是对象`ch1`就是`main`函数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:53:56.543

还

```
node *hashtable[n];
// ...
printf("Hash value of word is %d\n", testhash);
for(i=0;i<1000000;i++)
{
    hashtable[i]=NULL;
} 
```

万一`n < 1000000`呢？如果它更大怎么办？

除此之外，大型 VLA 可能会在许多系统上溢出堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:54:10.590

将来，请务必在启用编译器的所有（或几乎所有）警告标志的情况下进行编译。“未初始化的变量读取”是一个非常常见的错误，大多数编译器都会警告您...

# bids - 我们可以在 sql server 2008 R2 和 VS2012 上安装 BIDS

> ID：12961642
> 
> 赞同：0
> 
> 时间：2012-10-18T18:47:54.020
> 
> 标签：bids

如何在安装了 sql server 2008 R2 和 Visual Studio 2012 的系统中使用 SSRS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:18:02.123

SQL Server 2008 R2 BIDS 仅与 VS 2008 集成。如MSDN 上的详细[说明：](http://msdn.microsoft.com/en-us/library/ms173767%28v=sql.105%29.aspx)

> “Business Intelligence Development Studio**是**Microsoft Visual Studio 2008，具有特定于 SQL Server 商业智能的其他项目类型。”

如果您已经安装了 VS 2012，那么 2008 R2（VS 2008 Shell）的 BIDS 可以`side-by-side`与 VS 2012 一起安装。

# asp.net - 从 Visual Studio 发布到 RackspaceCloud 云站点 - 文件被跳过

> ID：12961643
> 
> 赞同：1
> 
> 时间：2012-10-18T18:47:54.317
> 
> 标签：asp.net, visual-studio-2010, visual-studio, visual-studio-2012, rackspace-cloud

一年多来，我的团队一直将 asp.net Web 应用程序（MVC 3 和 4）直接发布到 RackspaceCloud 云站点。我们已经体验到，在使用 Visual Studio 的构建 > 发布选择功能时，某些文件经常（显然）被跳过并且没有发布到云站点。即使我的项目中的文件已更改，更改的文件也不会发布到 ftp。当我们意识到这已经发生时，我们最终使用普通的 ftp 客户端手动连接到 ftp，并手动手动上传更改的文件。

在使用 Visual Studio 将 asp.net 应用程序发布到 rackspace 云站点时，有没有其他人遇到过这个问题？有没有解决办法？

其他一些需要注意的事项：

*   我已经与 RackspaceCloud 支持人员进行了交谈，他们声称他们从未听说过这样的问题。
*   我使用 Visual Studio 2010 和 2012 都经历过这种情况。
*   我从来没有在使用任何其他类型的主机时遇到过这个问题，只有 RackspaceCloud 云站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:21:03.437

要检查的一件事：[http](http://www.rackspace.com/knowledge_center/article/how-to-rebuild-an-aspnet-application-in-cloud-sites) ://www.rackspace.com/knowledge_center/article/how-to-rebuild-an-aspnet-application-in-cloud-sites记录了重建步骤。如果不执行此步骤，您的站点*似乎*没有更新，尽管 FTP 文件在那里。原因是对 web.config 的覆盖*不会*强制 Web 服务器从 FTP 文件中重新读取！（除了记录的方法，我发现将 web.config 重命名为 web.config.bak 然后 web.config 也可以。）

如果您的 FTP 文件实际上没有更新，则很可能是权限错误：我发现正在更新的两个用户由于组级别权限不足而发生冲突（即，对所有者进行读写，但仅对组进行读取）。使用不同的 FTP 客户端原来可以“修复”问题，因为我们使用具有更多权限的站点管理员帐户上传。

# ubuntu - 如何调试崩溃的 memcached？

> ID：12961649
> 
> 赞同：1
> 
> 时间：2012-10-18T18:48:12.177
> 
> 标签：ubuntu, amazon-ec2, memcached

我使用“/usr/bin/memcached -m 128 -p 11211 -U 11211 > memcached.log 2>&1 &”启动了 memcached。我在 ec2 ubuntu 11 上运行它。它只是崩溃而没有任何警告或登录到控制台或文件。

我从哪里开始调试呢？

编辑：我使用 -vvv 运行 memcached 并将其放在日志文件的末尾。memcached 几乎没有发出大约 10 个请求就死了。

```
> NOT FOUND -1002256595
>30 STORED
30: going from conn_nread to conn_write
30: going from conn_write to conn_new_cmd
30: going from conn_new_cmd to conn_waiting
30: going from conn_waiting to conn_read
30: going from conn_read to conn_parse_cmd
<30 set 160268806ProviderList 1 0 1372
30: going from conn_parse_cmd to conn_nread
> NOT FOUND 160268806ProviderList
>30 STORED
30: going from conn_nread to conn_write
30: going from conn_write to conn_new_cmd
30: going from conn_new_cmd to conn_waiting
30: going from conn_waiting to conn_read
30: going from conn_read to conn_parse_cmd
<30 set -1938194056UserDetails 1 0 356
30: going from conn_parse_cmd to conn_nread
> NOT FOUND -1938194056UserDetails
>30 STORED
30: going from conn_nread to conn_write
30: going from conn_write to conn_new_cmd
30: going from conn_new_cmd to conn_waiting
30: going from conn_waiting to conn_read
30: going from conn_read to conn_parse_cmd
<30 set 160268806UserDetails 1 0 364
30: going from conn_parse_cmd to conn_nread
> NOT FOUND 160268806UserDetails
>30 STORED
30: going from conn_nread to conn_write
30: going from conn_write to conn_new_cmd
30: going from conn_new_cmd to conn_waiting
30: going from conn_waiting to conn_read 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:08:56.213

usr/bin/ **memcached-debug** -m 128 -p 11211 -U 11211 > memcached.log 2>&1 &

如果你有它。如果没有，您可以从源代码构建它。此外，尝试将 strace 附加到该过程（假设这种情况反复发生）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:30:35.503

我忘了使用 -d 选项将它作为守护进程运行。一旦我添加它，崩溃就消失了。我必须说疯了。@詹姆斯谢谢。

/usr/bin/memcached -m 128 -vvv -p 11211 -U 11211 -u ubuntu -d

# haskell - 为什么不依赖类型？

> ID：12961651
> 
> 赞同：169
> 
> 时间：2012-10-18T18:48:13.097
> 
> 标签：haskell, type-systems, dependent-type

我看到一些消息来源回应了“Haskell 正在逐渐成为一种依赖类型的语言”的观点。这似乎意味着随着越来越多的语言扩展，Haskell 正在朝着这个大方向发展，但还没有。

基本上有两件事我想知道。首先，很简单，“作为一种依赖类型的语言”实际上是什么*意思*？（希望不要太技术化。）

第二个问题是……缺点是什么？我的意思是，人们知道我们正朝着那个方向前进，所以它一定有一些优势。然而，我们还没有到那里，所以一定有一些不利因素阻止人们一路前进。我的印象是，问题是复杂性急剧增加。但是，我不确定什么是依赖类型，我不确定。

我*所*知道的是，每次我开始阅读有关依赖类型编程语言的内容时，文本都是完全难以理解的......大概就是这个问题。（？）

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-11-05T22:04:50.450

### 依赖类型的 Haskell，现在？

Haskell 在某种程度上是一种依赖类型的语言。有一个类型级数据的概念，由于 ，现在可以更明智地进行类型化`DataKinds`，并且有一些方法 ( `GADTs`) 可以为类型级数据提供运行时表示。因此，**运行时内容的值有效地显示在 types**中，这就是依赖类型语言的含义。

简单数据类型被*提升*到种类级别，以便它们包含的值可以在类型中使用。因此，原型示例

```
data Nat = Z | S Nat

data Vec :: Nat -> * -> * where
  VNil   :: Vec Z x
  VCons  :: x -> Vec n x -> Vec (S n) x 
```

成为可能，并且有了它，诸如

```
vApply :: Vec n (s -> t) -> Vec n s -> Vec n t
vApply VNil         VNil         = VNil
vApply (VCons f fs) (VCons s ss) = VCons (f s) (vApply fs ss) 
```

这很好。请注意，长度`n`在该函数中是纯静态的，确保输入和输出向量具有相同的长度，即使该长度在 `vApply`. 相比之下，实现`n`复制给定`x`（将是`pure`to `vApply`'s `<*>`）的函数要复杂得多（即，不可能）

```
vReplicate :: x -> Vec n x 
```

因为知道在运行时要制作多少份副本至关重要。输入单例。

```
data Natty :: Nat -> * where
  Zy :: Natty Z
  Sy :: Natty n -> Natty (S n) 
```

对于任何可提升的类型，我们都可以构建单例族，在提升的类型上建立索引，并由其值的运行时副本占据。`Natty n`是 type-level 的运行时副本的类型`n :: Nat`。我们现在可以写

```
vReplicate :: Natty n -> x -> Vec n x
vReplicate Zy     x = VNil
vReplicate (Sy n) x = VCons x (vReplicate n x) 
```

因此，您有一个与运行时值挂钩的类型级值：检查运行时副本可以提炼类型级值的静态知识。即使术语和类型是分开的，我们也可以通过使用单态结构作为一种环氧树脂以依赖类型的方式工作，从而在相之间建立键。这距离在类型中允许任意运行时表达式还有很长的路要走，但它不是什么都没有。

### 什么是讨厌？少了什么东西？

让我们对这项技术施加一点压力，看看是什么开始摇摆不定。我们可能会认为单例应该更隐含地易于管理

```
class Nattily (n :: Nat) where
  natty :: Natty n
instance Nattily Z where
  natty = Zy
instance Nattily n => Nattily (S n) where
  natty = Sy natty 
```

允许我们写，说，

```
instance Nattily n => Applicative (Vec n) where
  pure = vReplicate natty
  (<*>) = vApply 
```

这行得通，但现在意味着我们的原始`Nat`类型产生了三个副本：一种、一个单例家庭和一个单例类。我们有一个相当笨拙的过程来交换明确的`Natty n`值和`Nattily n`字典。此外，`Natty`不是`Nat`：我们对运行时值有某种依赖，但不是我们最初想到的类型。没有完全依赖类型的语言使依赖类型变得如此复杂！

同时，虽然`Nat`可以提升，`Vec`但不能。您不能按索引类型进行索引。完全依赖类型的语言没有这样的限制，在我作为依赖类型炫耀的职业生涯中，我学会了在我的演讲中包含两层索引的例子，只是为了教那些做过一层索引的人很难——但有可能不要指望我会像纸牌屋一样折叠起来。有什么问题？平等。GADT 的工作原理是将您在为构造函数提供特定返回类型时隐式实现的约束转换为显式的等式要求。像这样。

```
data Vec (n :: Nat) (x :: *)
  = n ~ Z => VNil
  | forall m. n ~ S m => VCons x (Vec m x) 
```

在我们的两个方程中，两边都有 kind `Nat`。

现在尝试对向量索引的内容进行相同的翻译。

```
data InVec :: x -> Vec n x -> * where
  Here :: InVec z (VCons z zs)
  After :: InVec z ys -> InVec z (VCons y ys) 
```

变成

```
data InVec (a :: x) (as :: Vec n x)
  = forall m z (zs :: Vec x m). (n ~ S m, as ~ VCons z zs) => Here
  | forall m y z (ys :: Vec x m). (n ~ S m, as ~ VCons y ys) => After (InVec z ys) 
```

现在我们在两侧具有句法不同（但可证明相等）的类型之间`as :: Vec n x`和 位置形成等式约束。`VCons z zs :: Vec (S m) x`GHC核心目前还没有配备这样的概念！

还缺少什么？好吧，**大多数 Haskell**都从类型级别中丢失了。您可以推广的术语语言实际上只有变量和非 GADT 构造函数。一旦你有了这些，`type family`机器就允许你编写类型级别的程序：其中一些可能很像你会考虑在术语级别编写的函数（例如，配备`Nat`加法，所以你可以给出一个好的类型来 append for `Vec`） ，但这只是巧合！

在实践中缺少的另一件事是利用我们的新能力按值索引类型的*库。*在这个勇敢的新世界里做什么`Functor` 和成为什么？`Monad`我正在考虑，但还有很多事情要做。

### 运行类型级程序

与大多数依赖类型的编程语言一样，Haskell 有*两种* 操作语义。运行时系统运行程序的方式是（仅封闭表达式，类型擦除后，高度优化），然后是类型检查器运行程序的方式（您的类型系列，您的“类型类 Prolog”，带有开放表达式）。对于 Haskell，您通常不会将两者混为一谈，因为正在执行的程序使用不同的语言。*依赖类型的语言对于相同*的程序语言有单独的运行时和静态执行模型，但不用担心，运行时模型仍然允许你进行类型擦除，实际上，证明擦除：这就是 Coq 的*提取*机制给你；这至少是 Edwin Brady 的编译器所做的（尽管 Edwin 删除了不必要的重复值以及类型和证明）。相位区分可能不再是*句法类别*的区分 ，但它仍然存在并且很好。

完全依赖类型的语言允许类型检查器运行程序，而不必担心比长时间等待更糟糕的事情。随着 Haskell 变得更加依赖类型，我们面临的问题是它的静态执行模型应该是什么？一种方法可能是将静态执行限制为全部函数，这将允许我们同样自由地运行，但可能会迫使我们在数据和余数据之间做出区分（至少对于类型级代码），以便我们可以判断是否强制终止或生产力。但这不是唯一的方法。我们可以自由选择一个更弱的执行模型，它不愿意运行程序，代价是仅仅通过计算得出的方程更少。实际上，这就是 GHC 实际所做的。GHC核心的打字规则没有提到*运行* 程序，但仅用于检查方程式的证据。当转换到核心时，GHC 的约束求解器会尝试运行您的类型级程序，生成一些银色的证据，证明给定表达式等于其正常形式。这种证据生成方法有点不可预测，而且不可避免地不完整：例如，它避免了看起来很可怕的递归，这可能是明智的。我们不需要担心的一件事是在类型检查器中执行`IO` 计算：请记住，类型检查器不必给出 `launchMissiles`与运行时系统相同的含义！

### 欣德利-米尔纳文化

Hindley-Milner 类型系统实现了四个不同区别的真正令人敬畏的巧合，但不幸的是，许多人无法看到区别之间的区别并认为巧合是不可避免的！我在说什么？

*   术语*与*类型
*   显式写的东西*与*隐式写的东西
*   运行时存在与运行*前*擦除
*   非依赖抽象*与*依赖量化

我们习惯于编写术语并让类型被推断......然后被删除。我们习惯于用相应的类型抽象和应用程序以静默和静态的方式对类型变量进行量化。

在这些区别不一致之前，您不必偏离原版的 Hindley-Milner 太远，这*不是坏事*。首先，如果我们愿意在几个地方编写它们，我们可以有更多有趣的类型。同时，当我们使用重载函数时，我们不必编写类型类字典，但这些字典在运行时肯定存在（或内联）。在依赖类型语言中，我们期望在运行时擦除的不仅仅是类型，而且（与类型类一样）一些隐式推断的值不会被擦除。例如，`vReplicate`的数字参数通常可以从所需向量的类型推断出来，但我们仍然需要在运行时知道它。

我们应该审查哪些语言设计选择，因为这些巧合不再成立？例如，Haskell 没有提供`forall x. t`显式实例化量词的方法是否正确？如果类型检查器无法`x`通过 unifiying 进行猜测`t`，我们就没有其他方法可以说明`x`必须是什么。

更广泛地说，我们不能将“类型推断”视为我们拥有或一无所有的单一概念。首先，我们需要将“泛化”方面（米尔纳的“让”规则）从“专业化”方面（米尔纳的“var " 规则），它与您的约束求解器一样有效。我们可以预期顶级类型将变得更难推断，但内部类型信息将仍然相当容易传播。

### Haskell 的后续步骤

我们看到类型和种类级别变得非常相似（并且它们已经在 GHC 中共享内部表示）。我们不妨合并它们。如果可以的话，这会很有趣`* :: *`：我们 很久以前就失去了*逻辑稳健性，当时我们允许底部，但**类型* 稳健性通常是一个较弱的要求。我们必须检查。如果我们必须有不同的类型、种类等级别，我们至少可以确保类型级别及以上的所有内容都可以随时提升。重用我们已经对类型拥有的多态性，而不是在种类级别重新发明多态性，那就太好了。

*我们应该通过允许异构*方程来简化和概括当前的约束系统，`a ~ b`其中`a`和 `b`在句法上不相同（但可以证明是相等的）。这是一种古老的技术（在我的论文中，上个世纪），它使依赖性更容易应对。我们将能够在 GADT 中表达对表达式的约束，从而放宽对可推广内容的限制。

我们应该通过引入依赖函数类型来消除对单例构造的需要，`pi x :: s -> t`. 具有这种类型的函数可以*显式*应用于任何类型的表达式，`s`这些表达式存在于类型语言和术语语言的*交集中*（因此，变量、构造函数，稍后还会有更多）。相应的 lambda 和应用程序不会在运行时被擦除，因此我们可以编写

```
vReplicate :: pi n :: Nat -> x -> Vec n x
vReplicate Z     x = VNil
vReplicate (S n) x = VCons x (vReplicate n x) 
```

无需替换`Nat`为`Natty`. 的域`pi`可以是任何可推广的类型，因此如果可以推广 GADT，我们可以编写相关的量词序列（或 de Briuijn 所说的“望远镜”）

```
pi n :: Nat -> pi xs :: Vec n x -> ... 
```

到我们需要的任何长度。

这些步骤的重点是通过直接使用更通用的工具来*消除复杂性*，而不是使用弱工具和笨重的编码。当前的部分购买使得 Haskell 的依赖类型的好处比它们需要的更昂贵。

### 太难？

依赖类型让很多人感到紧张。它们让我紧张，但我喜欢紧张，或者至少我发现无论如何都很难不紧张。但这无助于围绕该主题的无知迷雾。其中一些是因为我们还有很多东西要学。但众所周知，不那么激进的方法的支持者会激起对依赖类型的恐惧，但并不总是确保事实与他们完全一致。我不会点名。这些“无法确定的类型检查”、“图灵不完整”、“没有相位区分”、“没有类型擦除”、“到处都有证明”等等，这些神话仍然存在，即使它们是垃圾。

当然，依赖类型程序不一定总是被证明是正确的。可以改善程序的基本卫生，在类型中强制执行额外的不变量，而无需一路达到完整的规范。朝这个方向迈出的小步通常会导致更强有力的保证，而很少或没有额外的证明义务。依赖类型的程序不可避免地*充满*了证明，这是不正确的，事实上，我通常将代码中存在的任何证明作为*质疑我的定义*的线索。

因为，随着清晰度的任何增加，我们可以自由地说出肮脏的新事物以及公平的事物。例如，定义二叉搜索树的方法有很多，但这并不意味着没有[好的方法](https://stackoverflow.com/a/10659438/828361)。重要的是不要认为糟糕的经历是无法改善的，即使它会削弱自我承认这一点。依赖定义的设计是一项需要学习的新技能，成为 Haskell 程序员并不会自动使您成为专家！即使有些程序是犯规的，你为什么要剥夺其他人公平的自由？

### 为什么还要打扰 Haskell？

我真的很喜欢依赖类型，但我的大部分黑客项目仍然在 Haskell 中。为什么？Haskell 有类型类。Haskell 有有用的库。Haskell 对带有效果的编程有一个可行的（尽管远非理想）处理。Haskell 有一个工业级的编译器。依赖类型语言在社区和基础设施的发展中处于更早的阶段，但我们将通过元编程和数据类型泛型等方式实现真正的代际转变。但是你只需要看看人们在 Haskell 向依赖类型迈出的步伐所做的事情，就会发现推动当代语言向前发展也会带来很多好处。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-18T18:56:19.787

依赖类型实际上只是值和类型级别的统一，因此您可以对类型的值进行参数化（在 Haskell 中已经可以使用类型类和参数多态性）并且您可以对值的类型进行参数化（严格来说，在 Haskell 中尚不可能） ，虽然`DataKinds`非常接近）。

**编辑：** 显然，从现在开始，我错了（参见@pigworker 的评论）。我将保留其余部分作为我被灌输的神话的记录。:P

* * *

据我所知，转向完全依赖类型的问题在于，它会打破类型和值级别之间的相位限制，从而允许将 Haskell 编译为具有擦除类型的高效机器代码。以我们目前的技术水平，依赖类型的语言*必须*在某个时候通过解释器（立即，或者在编译为依赖类型的字节码或类似的之后）。

这不一定是基本限制，但我个人并不知道当前有任何在这方面看起来很有希望但尚未进入 GHC 的研究。如果其他人知道更多，我很乐意得到纠正。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-11-06T08:08:51.347

John 这是关于依赖类型的另一个常见误解：当数据仅在运行时可用时它们不起作用。以下是如何执行 getLine 示例：

```
data Some :: (k -> *) -> * where
  Like :: p x -> Some p

fromInt :: Int -> Some Natty
fromInt 0 = Like Zy
fromInt n = case fromInt (n - 1) of
  Like n -> Like (Sy n)

withZeroes :: (forall n. Vec n Int -> IO a) -> IO a
withZeroes k = do
  Like n <- fmap (fromInt . read) getLine
  k (vReplicate n 0)

*Main> withZeroes print
5
VCons 0 (VCons 0 (VCons 0 (VCons 0 (VCons 0 VNil)))) 
```

编辑：嗯，这应该是对猪工的回答的评论。我显然失败了。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-01-26T00:14:17.587

pigworker 很好地讨论了为什么我们*应该*转向依赖类型：（a）它们很棒；(b) 他们实际上会*简化*Haskell 已经做的很多事情。

至于“为什么不？” 问题，我认为有几点。第一点是，虽然依赖类型背后的基本概念很简单（允许类型依赖于值），但该基本概念的影响既微妙又深刻。例如，值和类型之间的区别仍然存在并且很好；但是讨论它们之间的区别变得*很遥远*比你的 Hindley —— Milner 或 System F 更细微。在某种程度上，这是由于依赖类型从根本上来说是困难的（例如，一阶逻辑是不可判定的）。但我认为更大的问题实际上是我们缺乏一个很好的词汇来捕捉和解释正在发生的事情。随着越来越多的人了解依赖类型，我们将开发出更好的词汇表，因此事情会变得更容易理解，即使潜在的问题仍然很困难。

*第二点与 Haskell 正在增长*的事实有关*朝向依赖类型。因为我们正在朝着这个目标逐步取得进展，但实际上并没有做到这一点，所以我们被困在一种在增量补丁之上具有增量补丁的语言。随着新思想的流行，其他语言也发生了同样的事情。Java 过去没有（参数）多态性。当他们最终添加它时，这显然是一个渐进式的改进，带有一些抽象漏洞和削弱的能力。事实证明，混合子类型和多态本质上是困难的。但这不是 Java 泛型以它们的方式工作的原因。由于限制是对旧版本的 Java 进行增量改进，因此它们以它们的方式工作。同上，早在 OOP 被发明并且人们开始编写“目标”的那一天 C（不要与 Objective-C 混淆）等等。请记住，C++ 是在作为 C 的严格超集的幌子下开始的。添加新的范例总是需要重新定义语言，否则会导致一些复杂的混乱。我的观点是，将真正的依赖类型添加到 Haskell 将需要一定量的内脏和重组语言——如果我们要做得对的话。但要进行这种彻底的改革真的很难，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。C++ 以作为 C 的严格超集的幌子开始。添加新的范例总是需要重新定义语言，否则会导致一些复杂的混乱。我的观点是，将真正的依赖类型添加到 Haskell 将需要一定量的内脏和重组语言——如果我们要做得对的话。但要进行这种彻底的改革真的很难，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。C++ 以作为 C 的严格超集的幌子开始。添加新的范例总是需要重新定义语言，否则会导致一些复杂的混乱。我的观点是，将真正的依赖类型添加到 Haskell 将需要一定量的内脏和重组语言——如果我们要做得对的话。但要进行这种彻底的改革真的很难，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。否则会导致一些复杂的混乱。我的观点是，将真正的依赖类型添加到 Haskell 将需要一定量的内脏和重组语言——如果我们要做得对的话。但要进行这种彻底的改革真的很难，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。否则会导致一些复杂的混乱。我的观点是，将真正的依赖类型添加到 Haskell 将需要一定量的内脏和重组语言——如果我们要做得对的话。但要进行这种彻底的改革真的很难，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。真的很难承诺进行这种大修，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。真的很难承诺进行这种大修，而我们一直在取得的渐进式进展在短期内似乎更便宜。确实，攻击 GHC 的人并不多，但仍有大量遗留代码需要保持活力。这就是为什么有这么多衍生语言（如 DDC、Cayenne、Idris 等）的部分原因。*

# ant - bndwrap 蚂蚁任务不工作

> ID：12961652
> 
> 赞同：0
> 
> 时间：2012-10-18T18:48:17.980
> 
> 标签：ant, osgi, bnd

我正在尝试为最新版本的 jTDS 创建一个 OSGi 包装器。我正在尝试将包装过程添加到现有的 jTDS 构建过程（基于 Ant）。我已经下载了最新的 bnd.jar 并将以下内容添加到 jTDS build.xml：

```
<taskdef resource="aQute/bnd/ant/taskdef.properties" classpath="bnd.jar"/>
<bndwrap trace="true" definitions="${basedir}/bnd" output="${build}/${ant.project.name}-${version}.osgi.jar">
    <fileset dir="${build}" includes="*.jar"/>
</bndwrap> 
```

我还定义了一个非常简单的 bnd 定义：

```
version=1.2.6
Export-Package: net.sourceforge.jtds*;version=${version}
Bundle-Version: ${version}
Bundle-Name: net.sourceforge.jtds 
```

当我`dist`在 Ant 中执行任务时，它应该使用正确的 OSGi 清单创建一个 JAR。它正在创建另一个 JAR，但清单与原始 JAR 相同。

如果我直接对 bnd JAR 执行相同的包装：

```
java -jar bnd.jar wrap -p bnd\jtds-1.2.6.bnd -o build\jtds-1.2.6.osgi.jar build\jtds-1.2.6.jar 
```

我得到了正确的 OSGi 清单。

Ant 构建期间出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:14:40.413

最新版本的 bnd 似乎有问题，可在[此处](https://bndtools.ci.cloudbees.com/job/bnd.master/ "这里")找到。Ant WrapTask 进行了一些重组，但似乎无法正常工作（可能只是配置错误；文档没有跟上代码的步伐）。

我改为使用 1.50.0 版本，通过 bnd.jar 和 Ant，一切都按预期工作。

# shell - 使用 shell 脚本在新的终端选项卡中打开程序

> ID：12961656
> 
> 赞同：5
> 
> 时间：2012-10-18T18:48:25.857
> 
> 标签：shell

这是我编写的一个小 shell 脚本。

```
x-terminal-emulator -e "optirun yarpserver" &
sleep 6
x-terminal-emulator -e "optirun iCub_SIM" &
sleep 60
x-terminal-emulator -e "optirun simCartesianControl" &
sleep 30
x-terminal-emulator -e "optirun iKinCartesianSolver --context simCartesianControl/conf --part left_arm" & 
```

这样做是为每个程序打开一个新终端。我想要做的是打开新的终端选项卡而不是终端。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-20T13:59:45.380

这个线程真的很老，但是如果有人来这里，我会留下一个我创建的 bash 脚本来启动多个选项卡以运行不同的命令：

```
#!/bin/bash

# Array of commands to run in different tabs
commands=(
    'tail -f /var/log/apache2/access.log'
    'tail -f /var/log/apache2/error.log'
    'tail -f /usr/local/var/postgres/server.log'
)

# Build final command with all the tabs to launch
set finalCommand=""
for (( i = 0; i < ${#commands[@]}; i++ )); do
    export finalCommand+="--tab -e 'bash -c \"${commands[$i]}\"' "
done

# Run the final command
eval "gnome-terminal "$finalCommand 
```

只需在数组中添加命令并执行。

来源：http: [//joaoperibeiro.com/command-line-script-to-launch-multiple-tabs/](http://joaoperibeiro.com/command-line-script-to-launch-multiple-tabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T11:14:51.590

我认为您最好的选择是使用**tmux**来完成这项工作。这里只是一个简单的例子和​​一步一步的解释。在这里，我只使用垂直分割，这可能会让您感到困惑，您应该阅读 tmux 手册页以了解如何**选择窗格**。

*   首先以分离模式创建一个新的 tmux 会话
*   然后发送适当的命令来启动你的第一个程序
*   创建一个新的垂直拆分
*   发送适当的命令以启动您的第二个程序
*   等等 ...

```
tmux 新会话 -d -s foo
tmux send-keys -t foo 'optirun yarpserver' Enter
tmux 拆分窗口 -v -t foo
tmux send-keys -t foo 'optirun iCub_SIM' Enter
tmux 拆分窗口 -v -t foo
tmux send-keys -t foo 'optirun simCartesianControl' Enter
tmux 拆分窗口 -v -t foo
tmux send-keys -t foo 'optirun iKinCartesianSolver --context simCartesianControl/conf --part left_arm' Enter

```

希望这对您有所帮助。

# asp.net - FormView 中的预填充值默认插入

> ID：12961658
> 
> 赞同：0
> 
> 时间：2012-10-18T18:48:30.460
> 
> 标签：asp.net

我是 ASP.NET 的新手

错误：*“FormView 'FormView1' 触发了未处理的事件 ItemInserting。”*

我有一个 FormView 在页面首次加载时设置为插入模式。我还想预先填充这些输入文本框和下拉列表中的值。因此，我能够通过使用后面的代码并将值写入这些框来使其工作，但是当我单击“插入”链接按钮时，它给了我这个错误。

这是我的 FormView 代码：

```
 <asp:FormView ID="FormView1" DefaultMode="Insert" runat="server"
            DateSourceID="dsApprovedCreateNew"
            DataKeyNames="ApprovedID"
        > 
            <InsertItemTemplate> 

            <table class="FormDetail" width="95%" height="100%" align="center" class="FormDetail" > 
            <tr>
                <td class="right">MDF Name:</td>
                <td>
                    <asp:TextBox ID="MDFName" runat="server" Width="50%" Text='<%# Bind("MDFName") %>'  > </asp:TextBox>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" 
                    ControlToValidate="MDFName"  Text="The MDFName field is required!" runat="server" />

                </td>
            </tr>
            <tr>
                <td>Vendor Name</td>
                <td>
                    <asp:DropDownList ID="ddlVendorList" runat="server"></asp:DropDownList>

                </td>
            </tr>
            <tr>
                <td>Vendor BU</td>
                <td>
                    <asp:DropDownList ID="ddlVendorBUList" runat="server"></asp:DropDownList>

                </td>
            </tr>
            <tr>
                <td class="right">Vendor Quarter:</td>
                <td>
                    <asp:DropDownList ID="VendorQuarter" runat="server"  Text='<%# Bind("VendorQuarter") %>'
                    AppendDataBoundItems="true">
                        <asp:ListItem Value="Q1">Q1</asp:ListItem>
                        <asp:ListItem Value="Q2">Q2</asp:ListItem>
                        <asp:ListItem Value="Q3">Q3</asp:ListItem>
                        <asp:ListItem Value="Q4">Q4</asp:ListItem>
                 </asp:DropDownList>
                </td>
            </tr>

            <tr>
                <td class="right">MDF Amount:</td>
                <td>
                    <asp:TextBox ID="MDFAmount" runat="server" Width="20%" TextMode="SingleLine"  Text='<%# Bind("VendorQuarter") %>'></asp:TextBox>
                    <asp:CustomValidator ID="RangeValidator3" runat="server" ControlToValidate="MDFAmount" 
                    ErrorMessage="Enter numerical value only!"  ClientValidationFunction="validateNumber"/>
                    <asp:RequiredFieldValidator ControlToValidate="MDFAmount" Text="The MDFAmount field is required!" runat="server" />
                    <%--
                    <asp:RegularExpressionValidator ID="RangeValidator4" runat="server" ControlToValidate="MDFAmount" 
                    Display="Dynamic" ErrorMessage="*Enter numerical value only" 
                    ValidationExpression="^\d*[0-9](|.\d*[0-9]|,\d*[0-9])?$"/>
                    --%>
                </td>
            </tr>
            <tr>
                <td class="right">Begin Date (mm/dd/yyyy):</td>
                <td>
                    <asp:TextBox ID="BeginDate" runat="server" Width="50%" TextMode="SingleLine"  DataFormatString="{0:MM/dd/yyyy}"  
                        ApplyFormatInInsertMode="true"  ></asp:TextBox>
                    <asp:RegularExpressionValidator  ID="RangeValidator1" runat="server" ControlToValidate="BeginDate" ForeColor="Red"
                        ErrorMessage="Enter Valid Date in dd/mm/yyyy format." SetFocusOnError="True" Display="Dynamic" Type="Date"
                        ValidationExpression="^(0[1-9]|1[012])[-/.](0[1-9]|[12][0-9]|3[01])[-/.](19|20)\d\d$">
                    </asp:RegularExpressionValidator>

                </td>
            </tr>
            <tr>
                <td class="right">End Date (mm/dd/yyyy):</td>
                <td>
                    <asp:TextBox ID="EndDate" runat="server" Width="50%"></asp:TextBox>
                    <asp:RegularExpressionValidator  ID="RangeValidator2" runat="server" ControlToValidate="EndDate" ForeColor="Red"
                                ErrorMessage="Enter Valid Date in dd/mm/yyyy format." SetFocusOnError="True" Display="Dynamic" Type="Date"
                                ValidationExpression="^(0[1-9]|1[012])[-/.](0[1-9]|[12][0-9]|3[01])[-/.](19|20)\d\d$"/>
                </td>
            </tr>

            <tr>
                <td class="right">MDF Summary:</td>
                <td>
                    <asp:TextBox ID="MDFSummary" TextMode="MultiLine" Width="50%" Height="100" runat="server"></asp:TextBox>
                </td>
            </tr>
                        <tr>
                <td class="right">Status:</td>
                <td>
                    <asp:DropDownList ID="Status" runat="server"
                    AppendDataBoundItems="true">
                        <asp:ListItem>Active</asp:ListItem>
                        <asp:ListItem>Inactive</asp:ListItem>
                 </asp:DropDownList>
                </td>
            </tr>
            <tr>
              <td colspan="2">
                <asp:linkbutton id="InsertButton"
                  text="Insert"
                  commandname="Insert"
                  runat="server" />
                <asp:linkbutton id="CancelButton"
                  text="Cancel"
                  commandname="Cancel"
                  runat="server" /> 
              </td>
            </tr>          
        </table>

    <asp:HiddenField ID="CreatedBy" runat="server" value="44444"/> 
    </InsertItemTemplate>     
    </asp:FormView>    

 <asp:sqldatasource id="dsApprovedCreateNew"
        connectionstring="<%$ ConnectionStrings:ConnectionString%>" 
        SelectCommand="SELECT p.*
            , (SELECT VendorName FROM MDF_Vendor WHERE VendorID = p.VendorID) AS VendorName
            , (SELECT VendorBUName FROM MDF_VendorBU WHERE VendorBUID = p.VendorBUID) AS VendorBUName
            FROM dbo.MDF_Proposed p Where p.ProposedID = 63"
        InsertCommand = "INSERT INTO [MDF_Approved] ([VendorID], [VendorBUID], [MDFName]
            , [BeginDate], [EndDate], [CreatedBy]) 
             VALUES (@VendorID, @VendorBUID, @MDFName, @BeginDate, @EndDate, '1234') "

        runat="server">
        <SelectParameters>
            <asp:QueryStringParameter Name="ProposedID" QueryStringField="ProposedID"  runat="server" />
        </SelectParameters>
 </asp:sqldatasource>
 </form> 
```

背后的代码（我是新手，所以不要嘲笑我的代码，欢迎提出建议）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;

public partial class _Default : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

        //FormView1.PreRender += FormView1_PreRender;
        //FormView1.DataBinding += FormView1_DataBinding;
        if (!IsPostBack)
        {
            //Response.Write("ProposedID: " + Request.QueryString["ProposedID"]);
            int ProposedID = FetchQueryStringIdentifierByKey("ProposedID");
            Response.Write("ProposedID : " + ProposedID);
            //FormView1.DataSource = this.GetData(ProposedID);
            //FormView1.DataBind();

            FillFormValues(ProposedID);

            //GetData(ProposedID);

        }     
    }

    protected int FetchQueryStringIdentifierByKey(string key)
    {
        int identifier;
        var isInt = int.TryParse(Request.QueryString[key], out identifier);
        return (isInt) ? identifier : 0;
    } 

    private DataSet GetData(int RecID)
    {
        string conString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        string query = "SELECT * FROM MDF_Proposed WHERE ProposedID = 63";
        SqlCommand cmd = new SqlCommand(query);
        SqlParameter[] param = new SqlParameter[1];

        param[0] = new SqlParameter("@RecID", SqlDbType.Int, 10);
        param[0].Value = 1; // RecID;
        for (int i = 0; i < param.Length; i++)
        {
            cmd.Parameters.Add(param[i]);
        }
        using (SqlConnection con = new SqlConnection(GetConnectionString()))
        {
            using (SqlDataAdapter sda = new SqlDataAdapter())
            {
                cmd.Connection = con;
                sda.SelectCommand = cmd;
                using (DataSet ds = new DataSet())
                {
                    sda.Fill(ds);
                    return ds;

                }
            }
        }

    }

    private void FillFormValues(int RecID)
    {
        string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT * FROM MDF_Proposed WHERE ProposedID = 63";
        cmd.Parameters.AddWithValue("@RecID", RecID);
        DataSet objDs = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter();
        dAdapter.SelectCommand = cmd;
        con.Open();
        dAdapter.Fill(objDs);
        con.Close();
        if (objDs.Tables[0].Rows.Count > 0)
        {
            if (FormView1.CurrentMode == FormViewMode.Insert)
            {
                Response.Write("The Mode: " + FormView1.CurrentMode);
                TextBox MDFName = (TextBox)FormView1.FindControl("MDFName");
                MDFName.Text = objDs.Tables[0].Rows[0]["MDFName"].ToString();

                TextBox MDFAmount = (TextBox)FormView1.FindControl("MDFAmount");
                MDFAmount.Text = objDs.Tables[0].Rows[0]["MDFAmount"].ToString();

                TextBox BeginDate = (TextBox)FormView1.FindControl("BeginDate");
                BeginDate.Text = FormatDateNoTime(objDs.Tables[0].Rows[0]["BeginDate"].ToString());

                TextBox EndDate = (TextBox)FormView1.FindControl("EndDate");
                EndDate.Text = FormatDateNoTime(objDs.Tables[0].Rows[0]["EndDate"].ToString());

                fillVendorDLL(Convert.ToInt32(objDs.Tables[0].Rows[0]["VendorID"]));
                fillVendorBUDLL(Convert.ToInt32(objDs.Tables[0].Rows[0]["VendorID"]), Convert.ToInt32(objDs.Tables[0].Rows[0]["VendorBUID"]));

                TextBox MDFSummary = (TextBox)FormView1.FindControl("MDFSummary");
                MDFSummary.Text = objDs.Tables[0].Rows[0]["MDFSummary"].ToString();
            }
            else
            {
                Response.Write("Nothing");
            }
        }
        else
        {
            Response.Write("No Record found");
        }
    }

    protected void fillVendorDLL(int VendorID)
    {

        //DropDownList ddlVendor = (DropDownList)sender;
        // DropDownList ddlVendor = (DropDownList)DetailsView1.FindControl("updateVendorName");

        //DropDownList ddlVendor = (DropDownList)sender;

        //DropDownList ddlVendor = (DropDownList)DetailsView1.FindControl(ddlID);

        DropDownList ddlVendor =
            (DropDownList)FormView1.FindControl("ddlVendorList");

        if (ddlVendor != null)
        {
            //Response.Write("SelectChanged");
            //int VendorID = Convert.ToInt32(ddlVendor.SelectedValue.ToString());
            //Response.Write("VendorID: " + VendorID);

            ddlVendor.Items.Clear();

            string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            SqlConnection con = new SqlConnection(strConn);
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "SELECT VendorID, VendorName FROM dbo.MDF_Vendor";
            cmd.Parameters.AddWithValue("@VendorID", VendorID);
            DataSet objDs = new DataSet();
            SqlDataAdapter dAdapter = new SqlDataAdapter();
            dAdapter.SelectCommand = cmd;
            con.Open();
            dAdapter.Fill(objDs);

            con.Close();

            if (objDs.Tables[0].Rows.Count > 0)
            {
                foreach (DataRow dr in objDs.Tables[0].Rows)
                {
                    ddlVendor.Items.Insert(0, new ListItem((dr["VendorName"]).ToString(), (dr["VendorID"]).ToString()));
                    ddlVendor.SelectedValue = Convert.ToString(VendorID);
                }
            }
        }
    }

    protected void fillVendorBUDLL(int VendorID, int VendorBUID)
    {

        //DropDownList ddlVendor = (DropDownList)sender;
        // DropDownList ddlVendor = (DropDownList)DetailsView1.FindControl("updateVendorName");

        //DropDownList ddlVendor = (DropDownList)sender;

        //DropDownList ddlVendor = (DropDownList)DetailsView1.FindControl(ddlID);

        DropDownList ddlVendorBU =
            (DropDownList)FormView1.FindControl("ddlVendorBUList");

        if (ddlVendorBU != null)
        {
            //Response.Write("SelectChanged");
            //int VendorID = Convert.ToInt32(ddlVendor.SelectedValue.ToString());
            //Response.Write("VendorID: " + VendorID);

            ddlVendorBU.Items.Clear();

            string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            SqlConnection con = new SqlConnection(strConn);
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "SELECT VendorBUID, VendorBUName FROM dbo.MDF_VendorBU WHERE VendorID = @VendorID";
            cmd.Parameters.AddWithValue("@VendorID", VendorID);
            cmd.Parameters.AddWithValue("@VendorBUID", VendorBUID);
            DataSet objDs = new DataSet();
            SqlDataAdapter dAdapter = new SqlDataAdapter();
            dAdapter.SelectCommand = cmd;
            con.Open();
            dAdapter.Fill(objDs);

            con.Close();

            if (objDs.Tables[0].Rows.Count > 0)
            {
                foreach (DataRow dr in objDs.Tables[0].Rows)
                {
                    ddlVendorBU.Items.Insert(0, new ListItem((dr["VendorBUName"]).ToString(), (dr["VendorBUID"]).ToString()));
                    ddlVendorBU.SelectedValue = Convert.ToString(VendorBUID);
                }
            }
        }
    }

    public string GetConnectionString(){
        //sets the connection string from your web config file "ConnString" is the name of your Connection String
        return System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
    }   

    private void ExecuteInsert(string VendorName, string VendorBU, string MDFAmount
    , string StartDate, string EndDate, string VendorQuarter, string MDFName, String MDFSummary, string Status, string CreatedBy)
        {
        SqlConnection conn = new SqlConnection(GetConnectionString());
        string sql = "INSERT INTO MDF_Proposed (VendorID, VendorBUID, MDFAmount, BeginDate, EndDate, VendorQuarter
            , MDFName, MDFSummary, Status, CreatedBy) VALUES "
             + " (@VendorID, @VendorBUID, @MDFAmount, @StartDate, @EndDate, @VendorQuarter, @MDFName, @MDFSummary, @Status, @CreatedBy)";

        try
        {

            conn.Open();
            SqlCommand cmd = new SqlCommand(sql, conn);
            SqlParameter[] param = new SqlParameter[10];

            param[0] = new SqlParameter("@VendorID", SqlDbType.VarChar, 50);
            param[1] = new SqlParameter("@VendorBUID", SqlDbType.VarChar, 50);
            param[2] = new SqlParameter("@MDFAmount", SqlDbType.Decimal);
                param[2].Precision = 19;
                param[2].Scale = 4;
            param[3] = new SqlParameter("@StartDate", SqlDbType.DateTime);
            param[4] = new SqlParameter("@EndDate", SqlDbType.DateTime);
            param[5] = new SqlParameter("@VendorQuarter", SqlDbType.VarChar, 50);
            param[6] = new SqlParameter("@MDFName", SqlDbType.VarChar, 50);
            param[7] = new SqlParameter("@MDFSummary", SqlDbType.VarChar, 2000);
            param[8] = new SqlParameter("@Status", SqlDbType.VarChar, 50);
            param[9] = new SqlParameter("@CreatedBy", SqlDbType.Int, 10);

            param[0].Value = VendorName;
            param[1].Value = VendorBU;
            param[2].Value = MDFAmount;
            param[3].Value = StartDate;
            param[4].Value = EndDate;
            param[5].Value = VendorQuarter;
            param[6].Value = MDFName;
            param[7].Value = MDFSummary;
            param[8].Value = Status;
            param[9].Value = CreatedBy;

            for (int i = 0; i < param.Length; i++)
            {
                cmd.Parameters.Add(param[i]);
            }

            cmd.CommandType = CommandType.Text;
            cmd.ExecuteNonQuery();
        }
        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Insert Error:";
            msg += ex.Message;
            throw new Exception(msg);
        }
        finally
        {
            conn.Close();
            //ClientScript.RegisterStartupScript(this.GetType(), "scriptid", window.parent.location.href='ViewVendors.aspx'", true);
            Response.Write("<script>window.parent.location = 'ProposalListView.aspx';</script>");
            //Response.Redirect("ProposalListView.aspx");
            //Response.Write("<script>this.dialog('close');</script>");
        }
    }

    public static void ClearControls(Control Parent){

        if (Parent is TextBox)
        { (Parent as TextBox).Text = string.Empty; }
        else
        {
            foreach (Control c in Parent.Controls)
                ClearControls(c);
        }
    }

    public string FormatDateNoTime(string input)
    {
        string thedate;
        DateTime strDate = DateTime.Parse(input);
        thedate = strDate.ToString("MM/dd/yyyy");
        return thedate;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-09T17:40:55.457

您还可以使用 DataBound 事件：

```
protected void FormView1_DataBound(object sender, EventArgs e)
    {
        if (FormView1.CurrentMode == FormViewMode.Insert)
        {
            var textBox = (TextBox) FormView1.FindControl("MyTextBox");
            textBox.Text = "Default Value";
        }
    } 
```

# servlets - 如何将字符串数组存储到数据库中？

> ID：12961661
> 
> 赞同：2
> 
> 时间：2012-10-18T18:48:49.737
> 
> 标签：servlets, jdbc, oracle10g

```
In my java servlet application! 
```

我通过使用

```
String[] skills = request.getParameterValues("skills"); 
```

现在我必须将此字符串 [] 技能组值存储到 oracle db 中！我有 2 个小解决方案 1) 我将通过附加 (,) 或 (/) 将该字符串数组转换为 1 个字符串。然后我将其存储在 db (skill VARCHAR(1000)) 列中。在 db 列中采用这样的大小并不是一个好习惯。2）我有一个计划！我会将所有复选框名称作为 db 中的列，例如（C 布尔值、C++ 布尔值、Java 布尔值.....）。然后在创建表时，我会将它们的所有默认值设为 false。当检查perticuler复选框时，我将插入值true的true，例如在db中，例如，如果用户选择复选框java，则我会因为它的值而插入db true。

从我的角度来看，“这似乎非常复杂的过程”这两个选项很棘手，但不是企业标准使用！除了像这些愚蠢的技巧之外，还有什么方法可以将字符串数组存储在数据库中？？？

db 中是否有任何数据类型使用我们的 String[] 并返回我们的 string[] ？

如果有的话？请给我详细的步骤！！

提前致谢！

## 最近我找到了一个解决方案： VARRAY in oracle db =>

```
SQL> CREATE OR REPLACE TYPE smoketype IS VARRAY(3) OF VARCHAR(30)
  2  /

Type created.

SQL> CREATE TABLE register (fname VARCHAR(30), lname VARCHAR(30), gender VARCHAR
(1), smoke SMOKETYPE);

Table created.

SQL> INSERT INTO register VALUES
  2  (
  3  'omkar','t','m',
  4  smoketype('no')
  5  );

1 row created.

SQL> INSERT INTO register VALUES
  2  (
  3  'om','T','m',
  4  smoketype('no','not at all')
  5  );

1 row created.

SQL> INSERT INTO register VALUES
  2  (
  3  'onky','T','m',
  4  smoketype('no','never','not at all')
  5  );

1 row created. 
```

有了上面的..我创建了一个像数组一样接受多个值的类型。但是在我的 servlet 中，当我创建一个语句并从寄存器查询中执行一个 selec * 时，我将获得 ResultSet obj！但是我怎样才能将该smoketype数组检索到String []中呢？我怎样才能检索字符串 [] 值？请有人帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:52:08.550

字符串数组中的每个值都是实际的字符串，还是只是某种标志？真/假等

如果它只是一个标志，您可以将其存储为掩码，每个位对应于某个特定的复选框，

例如，如果您有 3 个复选框 x、y、z 的值为真/假，则可以将掩码设为 3 位，例如 101（表示 x = 1、y = 0、z = 1）。

这不是存储它的最具描述性的方式，因为您必须跟踪实际掩码的含义，但它比仅连接数组的每个值节省更多空间

# perl - 如何使用 Perl 在**已打开** Excel 工作簿中运行宏

> ID：12961662
> 
> 赞同：0
> 
> 时间：2012-10-18T18:48:51.323
> 
> 标签：perl, ole, excel

我想使用 Perl 在**已经打开**的Excel 工作簿中运行宏。

如果我只想打开工作簿并运行宏，则以下代码有效：

```
#!C:\Perl\bin\perl.exe    
use strict;
use Win32::OLE;

my $Excel = Win32::OLE->new('Excel.Application') or die;
$Excel->Workbooks->open('M:\Programs\MyExcelFile.xls');
$Excel->run('Book1!ChartData');
$Excel->quit; 
```

但是如何对**打开**的工作簿进行操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:08:59.790

使用`GetActiveObject`. 从[文档](http://docs.activestate.com/activeperl/5.10/lib/Win32/OLE.html#examples)：

```
Here is a simple Microsoft Excel application.

        use Win32::OLE;

        # use existing instance if Excel is already running
        eval {$ex = Win32::OLE->GetActiveObject('Excel.Application')};
        die "Excel not installed" if $@;
        unless (defined $ex) {
            $ex = Win32::OLE->new('Excel.Application', sub {$_[0]->Quit;})
                    or die "Oops, cannot start Excel";
        } 
```

# perl - perl 快速排序

> ID：12961663
> 
> 赞同：0
> 
> 时间：2012-10-18T18:48:55.230
> 
> 标签：perl, sorting

有没有办法在 perl 中进行非常快速的排序？就像我有一个非常大的散列，可能有 1 亿个键。`foreach my $x (sort {$a cmp $b} keys %myhash){DO SOMETHING}`我测试时这样做效率很低。想知道我是否可以先将所有键复制到数组中并对其进行快速排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:53:16.980

您不希望将散列放在列表上下文中，因为您不希望使用键对值进行排序。相反，*是*的，您想对键进行排序：

```
my @ordered_keys = sort { $a cmp $b } keys %hash; 
```

但是，如果您想以这种方式处理*值*，您可以这样做：

```
my @ordered_values = @hash{ sort { $a cmp $b } keys %hash }; 
```

这使用[“散列片”](http://perldoc.perl.org/perldata.html#Slices)。

但是以这种方式，您可以执行以下操作：

```
foreach my $value ( @hash{ sort { $a cmp $b } keys %hash } ) { 
    # key? What key?
    do_something_with_hash_value( $value );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T19:58:36.383

假设对 100 个字符串进行排序需要 10μs（百万分之一秒）。你会考虑这么快吗？大概。这大致就是我的机器所做的。

如果是这样，您应该考虑 100,000,000 个字符串的 41 秒快！

这就是为什么。

您没有对 100 个字符串进行排序；您正在排序 1,000,000 倍的字符串。但是排序不是线性的。最好的排序算法是 O(N log N)。假设它是紧密绑定的，这意味着

*   对 100 个字符串进行排序需要 $overhead + 100 * log2(100) * $time_per_operation。

*   对 100,000,000 个键进行排序将花费 $overhead + 1,000,000 * log2(1,000,000) * $time_per_operation。

假设可以忽略不计，这意味着对 100,000,000 个字符串进行排序将比对 100 个字符串进行排序花费 4,100,000 倍。

因此，如果您考虑 100 个字符串的 10μs 快，那么您应该考虑 100,000,000 个字符串的 41s 快。

你得到什么样的数字？

# php - 组数组数据 PHP

> ID：12961664
> 
> 赞同：3
> 
> 时间：2012-10-18T18:48:57.437
> 
> 标签：php, arrays

我有以下数组...

```
[0] => Array
(
  [Name] => Steve Richard
  [Car_Colour] => Red
)

[1] => Array
(
  [Name] => Scott Lucas
  [Car_Colour] => Orange
)

[2] => Array
(
  [Name] => Danny Sisum
  [Car_Colour] => Red
)

[3] => Array
(
  [Name] => Alice Small
  [Car_Colour] => Green
) 
```

如何输出数组中的数据，但按汽车颜色对数据进行分组，这样两辆红色汽车的人将出现在红色标题下方，而其他人则为橙色和绿色？

**例子：**

```
People with **Red** cars

    Name:** Steve Richard
    Car Colour:** Red

    Name:** Danny Sisum
    Car Colour: Red

People with **Orange** cars

    Name:** Scott Lucas
    Car Colour:** Orange

People with **Green** cars

    Name:** Alice Small
    Car Colour:** Green 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:56:39.470

你可以试试

```
$array = array(
        "0" => Array("Name" => "Steve Richard","Car_Colour" => "Red"),
        "1" => Array("Name" => "Scott Lucas","Car_Colour" => "Orange"),
        "2" => Array("Name" => "Danny Sisum","Car_Colour" => "Red"),
        "3" => Array("Name" => "Alice Small","Car_Colour" => "Green"));

$list = array();
foreach($array as $data)
{
    $list[$data['Car_Colour']][] = $data;
}

var_dump($list); 
```

像上面一样显示它们

```
echo "<pre>";
foreach($list as $color => $data)
{
    printf("People with **%s** cars\n",$color);

    foreach($data as $info)
    {
        printf("\tName:** %s\n",$info['Name']);
        printf("\t Car Colour:** %s\n",$info['Car_Colour']);
    }
    print(PHP_EOL);
} 
```

输出

```
People with **Red** cars
    Name:** Steve Richard
     Car Colour:** Red
    Name:** Danny Sisum
     Car Colour:** Red

People with **Orange** cars
    Name:** Scott Lucas
     Car Colour:** Orange

People with **Green** cars
    Name:** Alice Small
     Car Colour:** Green 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:54:26.477

```
$array = array(); // The array you currently have
// Grouping
$grouped = array();
foreach ($array as $item) {
    $colour = $item['Car_Colour'];
    if (!isset($grouped[$colour])) {
        $grouped[$colour] = array();
    }
    $grouped[$colour][] = $item['Name'];
}
// Output
$output = '';
foreach ($grouped as $colour => $names) {
    $output .= 'People with **' . $colour . '** cars' . "\n\n";
    foreach ($names as $name) {
        $output .= "\t" . 'Name:** ' . $name . "\n";
        $output .= "\t" . 'Car Colour:** ' . $colour . "\n";
    }
}
echo $output; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:56:14.953

就像是：

```
$grouped_array = array();
foreach($array as $person){
   if(!isset($grouped_array[$person['car_colour'])){
         $grouped_array[$person['car_colour']] = array();
   }
   $grouped_array[$person['car_colour'][] = $person['name']; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:54:41.100

```
$arr_color = array();  // This line is only truly neccessary if $arr_data can be empty
foreach ($arr_data as $arr) 
    $arr_color[$arr["Car_Colour"]][] = $arr["Name"];

// Display
foreach ($arr_color as $color => $lst_persons) {
    echo "<p>People with *** $color *** cars</p>";
    foreach ($lst_persons as $person) {
        echo "Name: " . $person . "<br>";
    }
} 
```

输入：

```
 $arr_data = array(
  0 => array(
         "Name" => "Steve Richard",
         "Car_Colour" => "Red"
       ),
  1 => array(
         "Name" => "Scott Lucas",
         "Car_Colour" => "Orange"
       ),
  2 => array(
         "Name" => "Danny Sisum",
         "Car_Colour" => "Red"
       ),
  3 => array(
         "Name" => "Alice Small",
         "Car_Colour" => "Green"
       )
  ); 
```

输出：

```
People with *** Red *** cars
Name: Steve Richard
Name: Danny Sisum

People with *** Orange *** cars
Name: Scott Lucas

People with *** Green *** cars
Name: Alice Small 
```

# sql - 如何在 Oracle Spatial 中将 XY 坐标转换为 GPS？

> ID：12961666
> 
> 赞同：0
> 
> 时间：2012-10-18T18:49:11.507
> 
> 标签：sql, oracle, gps, spatial

我正在查询 SDO_GEOMETRY 字段以返回形状中的给定点，并且我想获取该点的 GPS 坐标。我的查询如下：

```
select 
sdo_lrs.locate_pt(sdo_lrs.convert_to_lrs_geom(shape),0.02).sdo_ordinates  
from 
TEST_SCHEMA.TEST_TABLE
where 
route='ABC'
and
segmentnum='101.1' 
```

这将返回一个 SDO_ORDINATE_ARRAY，如下所示：

```
MDSYS.SDO_ORDINATE_ARRAY(100000.203621556,999999.57084293,0.02) 
```

如何将 SDO_ORDINATE_ARRAY 的前两个元素转换为 GPS 坐标？我无法在 Oracle Spatial 文档中找到与实现此目的的功能相关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:29:45.240

事实证明，您必须在将形状传递给之前转换形状的坐标系`convert_to_lrs_geom()`，使用`sdo_cs.transform()`. 在这种情况下，SRID 是 8307（感谢 jim mcnamara 指出 SRID 是问题所在），因此返回正确坐标的 SQL 是：

```
select 
sdo_lrs.locate_pt(sdo_lrs.convert_to_lrs_geom(sdo_cs.transform(shape,8307)),0.02).sdo_ordinates  
from 
TEST_SCHEMA.TEST_TABLE
where 
route='ABC'
and
segmentnum='101.1' 
```

# java - 在 Eclipse 中调试时查找类的所有实例

> ID：12961671
> 
> 赞同：8
> 
> 时间：2012-10-18T18:49:23.990
> 
> 标签：java, eclipse, debugging

我想知道 Java/JVM 的工作方式是否意味着像 Eclipse 这样的调试工具可以向我显示给定类的所有实例的列表？我想可以编写一些反射代码，但我不想每次都在同一个地方中断执行……而是我想中断执行并`MyClass123`在调试窗口中显示所有对象的列表。

这甚至可能吗？它是在 Eclipse 或任何插件中提供的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T18:54:11.600

是的，在标准的 eclipse 调试器中是可能的。见[这里](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/variables/ref-variables_view.htm)。调试时，右键单击“变量视图”中的变量条目，然后单击“所有实例”：

![在此处输入图像描述](../Images/1a97c1622d65a9aa0f53edc355840502.png)

这将打开一个这样的列表：

![在此处输入图像描述](../Images/6150042a9e17cb20ccb2d22f5c93edd5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:52:45.297

您可能希望在您的应用程序中安装[**Eclipse 测试和性能工具平台**](http://www.eclipse.org/tptp/)插件并执行`MemoryAnalysis`. 这为您提供了有关内存中所有不同对象及其引用的详细信息。

您不需要在代码中放置任何断点。它将自行收集所需的数据。

# java - 复制第一个孩子的下一个兄弟树

> ID：12961674
> 
> 赞同：0
> 
> 时间：2012-10-18T18:49:32.083
> 
> 标签：java, recursion, tree

我在java中实现了一个“第一个孩子下一个兄弟”树的类。

这是代表这种树的链接

[http://www.cs.utexas.edu/~novak/cs315116.html](http://www.cs.utexas.edu/~novak/cs315116.html)

我已经实现了以下功能：

```
addChild();
getLabel(); 
setLabel(T v);
getParent();
getNextSibling();
getFirstChild(); 
```

我的 addChild 函数按以下顺序添加孩子。

```
public void addChild(Tree<T> c) {
     c.parent = this;
     if (firstChild == null) 
       firstChild = c;
     else {
         c.nextSibling = firstChild;
         firstChild = c;
        }
}

That is, if we have a tree node 1 and we add tree node 2 and then tree node 3 to it then the final tree would be,
1.addChild(2);
1.addChild(3);

 1                                          1
/ \    which is internally stored as       /
3   2                                      3 - 2
The most recent child added would be the first child 
```

我想实现一个 CopyTree 函数，当给定任何这样的树作为参数时，它将创建树的副本并返回它。我有一些初始代码，但我无法获得正确的递归。

```
private Tree<String> CopyTree(Tree<String> tr){
if (tr == null)
    return null;
Tree<String> t = new Tree<String>();
t.setLabel(tr.getLabel());
if (tr.getFirstChild() != null) {
    t.addChild(CopyTree(tr.getFirstChild()));
}
Tree<String> temp = tr.left();

if (temp != null) {
while (temp.getNextSibling() != null) {
    t.addChild(CopyTree(temp.getNextSibling()));
    temp = temp.getNextSibling();
}
}
return t;
} 
```

怎么做才能使递归工作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:49:47.653

首先，我相信你这里有一个错误：

```
 while (temp.getNextSibling() != null) {
    t.addChild(CopyTree(temp.getNextSibling()));
    temp = temp.getNextSibling();
} 
```

由于 getNextSibling() 将下一个孩子重新调整到右侧，但 addChild() 从左侧插入一个孩子，因此您在这里颠倒了顺序。这可能没问题，但请尽量避免这种情况。

要回答您的问题，您的递归函数应作为新树的每个节点上的方法调用，并接收旧树的相应节点作为参数。然后它应该从新树中的旧树中复制该节点的子节点，并在执行此操作时对每个子节点调用递归函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:56:08.057

知道了..

```
private Tree<String> CopyTree(Tree<String> tr){
if (tr == null)
    return null;
Tree<String> t = new Tree<String>();
t.setLabel(tr.getLabel());

Tree<String> temp = tr.left();

if (temp != null) {
    ArrayList<Tree<String>> list = new ArrayList<>();
    while (temp.getNextSibling() != null) {
    list.add(temp.getNextSibling());
    //t.addChild(CopyTree(temp.getNextSibling()));
    temp = temp.getNextSibling();
}
for (int i = (list.size()-1); i>=0; i--) {
    t.addChild(CopyTree(list.get(i)));
}

}
if (tr.left() != null) {
    t.addChild(CopyTree(tr.left()));
}

return t;
} 
```

# c# - 以编程方式将文本创建到另一个文件中

> ID：12961675
> 
> 赞同：1
> 
> 时间：2012-10-18T18:49:34.067
> 
> 标签：c#

我想创建一个具有 15 个属性的类以用于测试目的。如何在不复制和粘贴的情况下以编程方式生成文本？

```
public static class MyTestClass
{
    public static string MyTestProperty1
    {
        get
        {
            return "My test1";
        }
    }

    public static string MyTestProperty2
    {
        get
        {
            return "My test2";
        }
    }
<... so on.. >
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:35:47.707

您可以使用以下方法手动构建您的类型[`TypeBuilder`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.typebuilder.aspx)：

```
// read property names from file
string[] propertyNames = { "MyTestProperty1", "MyTestProperty2" };

AssemblyName name = new AssemblyName("Foo");
AssemblyBuilder assemblyBuilder = AppDomain.CurrentDomain
   .DefineDynamicAssembly(name, AssemblyBuilderAccess.Run);
ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule("Bar");
TypeBuilder typeBuilder = 
   moduleBuilder.DefineType("MyTestClass", TypeAttributes.Public);

foreach (var propertyName in propertyNames)
{
    PropertyBuilder property = typeBuilder.DefineProperty(
         propertyName,
         System.Reflection.PropertyAttributes.HasDefault, 
         typeof(string), 
         null);        
    MethodBuilder getter = typeBuilder.DefineMethod(
         "get_" + propertyName,
         MethodAttributes.Public | MethodAttributes.SpecialName, 
         typeof(string), 
         Type.EmptyTypes);
    ILGenerator generator = getter.GetILGenerator();
    // generate default value for property
    generator.Emit(OpCodes.Ldstr, propertyName.Replace("Property", " "));
    generator.Emit(OpCodes.Ret);
    property.SetGetMethod(getter);
}

Type type = typeBuilder.CreateType(); 
```

现在您可以使用您的类型：

```
object obj = Activator.CreateInstance(type);

foreach (var propertyName in propertyNames)
{
    PropertyInfo pi = type.GetProperty(propertyName);
    Console.WriteLine(pi.GetValue(obj));
}

dynamic testObj = obj;
Console.WriteLine(testObj.MyTestProperty2); 
```

实际上，您可以更进一步，在一些配置文件中指定属性名称、类型和默认值。我把它留给你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:03:13.860

如果属性名称和返回值像您所说的那样简单，您可以编写一个简单的控制台应用程序，它执行以下操作...
*注意：代码未经测试。*

```
int numberOfProperties = 15;

IList<string> code = new List<string>();
code.Add("public static class MyTestClass");
code.Add("{");

for (int i = 0; i < numberOfProperties; i++)
{
    code.Add("public static string MyTestProperty" + i);
    code.Add("{");
    code.Add("get");
    code.Add("{");
    code.Add("return \"My test\" + i + "";");
    code.Add("}");
    code.Add("}");
}

code.Add("}");

File.AppendAllLines(<path>, code); 
```

如果需要更复杂，您可以使用 C# [CodeDOM](http://msdn.microsoft.com/en-us/library/ms404245.aspx)。使用 CodeDOM，您甚至可以[编译](http://support.microsoft.com/kb/304655)代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:08:38.123

只需创建一个代码片段并通过键入名称后跟 2 个选项卡来使用它。这允许您更改属性的名称和类型，而无需更改/缩进代码段的其余部分。有关创建和使用代码片段的信息，请参阅 [http://msdn.microsoft.com/en-us/library/ms165394.aspx](http://msdn.microsoft.com/en-us/library/ms165394.aspx)

# linux - 为什么vim默认连接到X？

> ID：12961680
> 
> 赞同：3
> 
> 时间：2012-10-18T18:50:04.533
> 
> 标签：linux, unix, vim, x11

手册页说 vim -X 禁用剪贴板和窗口标题操作。这就是 vim 连接到 X 的全部内容吗？

我觉得这有点令人惊讶，因为默认设置对我来说显着减慢了 vim 的启动速度，而且我从来不需要剪贴板/窗口标题行为。

顺便说一句，这不是 gvim。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:50:51.973

我有根据的猜测是，这是因为现在大多数人在图形环境中使用终端仿真器，所以表现得像这样一个环境的好公民是有用的，在各种应用程序的外观或工作方式上提供更多的一致性。

作为奖励，它更像 vim 使用 * register 来询问剪贴板。

而且更加万无一失。我记得图形终端模拟器选择文本的唯一方法是老式的鼠标选择。鉴于当您选择终端的一部分时终端中的 vim 缓冲区不会滚动（因为技术上选择发生在终端模拟器领域的 vim 之外，并且 vim 甚至不知道它当前正在发生），因此无法复制到剪贴板任何跨越屏幕的东西目前都可以容纳。即使那样，它也可能无法按照您想要的方式工作，具体取决于换行设置。

但如果编辑器连接到系统剪贴板，这不是问题。只需将您喜欢的任何文本复制到 * 以 vim 方式注册，然后将其保存在系统剪贴板中。

这仍然只是我的猜测。

# dns - 新域 - 可以 ping Netbios 和 IP，但不能 ping FQDN（错误加入名称）

> ID：12961681
> 
> 赞同：0
> 
> 时间：2012-10-18T18:50:04.487
> 
> 标签：dns, active-directory, windows-server-2008-r2

我的 DNS 有问题。我正在设置一个新域并拥有 Windows Server 2008 R2。域控制器在 Hyper-V 上运行。当然，我可以在域控制器内部 ping FQDN，但不能在主机服务器上 ping。

当从主机 ping Netbios 名称时，DNS 解析并且 ping 成功。使用 FQDN (server1.contoso.local) 执行 ping 操作时，我收到 Ping 请求找不到主机 server1.contoso.local。请检查名称并重试。

除了设置 Active Directory 之外，我没有对网络做任何事情。IP6 被禁用。服务器和 DC 具有静态 IP，我的路由器是 DHCP 提供程序。DC是DNS。

设置如下：

```
 IP: 192.168.0.199

                 Subnet: 255.255.255.0

                 Default gateway: 192.168.0.1 (router internal IP)

                 Preferred DNS: 192.168.0.100 (DC IP)

                 Alternate: 192.168.0.1 
```

当我尝试加入域时，我必须使用 Netbios 名称（FQDN 不起作用；无法联系 Active Directory 域控制器）。提示我输入域密码，但随后收到以下错误：“尝试加入域“域名”时发生以下错误尝试解析正在加入的域中域控制器的 dns 名称失败。请验证此客户端配置为访问可以解析目标域中的 DNS 名称的 DNS 服务器。”

我已禁用主机服务器和 DC 上的防火墙。我尝试了 /flushdns 和 /registerdns。没有变化。尝试在 DC 上更新 ipconfig 时收到以下错误：“释放接口 Loopback Pseudo-Interface 1 时发生错误：系统找不到指定的文件”

我的问题只是缺少 DNS 条目吗？不幸的是，我对 DNS 知之甚少。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T17:24:44.983

通过将域名后缀添加到主机的 NIC，我能够最终解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:28:24.837

我实际上刚刚解决了我的问题。我完全忘记提及的一个关键信息是我的服务器上安装并使用了 2 个 NIC。其中之一被严格分配给 VM 域控制器。因此，创建了一个虚拟网络连接。由于某种原因，我不完全理解这会影响我在网络上查看 FQDN 的能力。我更正了虚拟 NIC 上的 DNS 设置，我所有的 NETBIOS 问题都已解决。

我真的不明白为什么会导致问题，但是更改默认为我的路由器而不是我的 DC 的虚拟 NIC DNS 服务器设置解决了这个问题。

# corba - 运行时对象引用

> ID：12961682
> 
> 赞同：2
> 
> 时间：2012-10-18T18:50:09.447
> 
> 标签：corba

如果 CORBA 在编译时不知道对象，那么 CORBA 如何识别在运行时传递给它的对象？它如何在运行时访问该对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:09:13.423

CORBA 使用对象引用。对于 ORB 间（在您的机器上运行的中间件框架代码）通信，使用了可互操作的对象引用 - [IOR](http://en.wikipedia.org/wiki/Interoperable_Object_Reference)。这些是基于字符串的，包含主机、端口、策略和其他内容。

您需要一个对象引用才能以 CORBA 方式（位置透明、远程）对其进行操作。这个引用比“缩小”，即中间件连接到远程站点。之后，对对象的每次调用都是远程调用，但是您不会注意到应用程序中的情况，因为您可以像处理本地对象一样处理对象。

# eclipse - 当我向 c++ eclipse 项目添加新的源文件夹时，如何更新 makefile？

> ID：12961685
> 
> 赞同：1
> 
> 时间：2012-10-18T18:50:17.990
> 
> 标签：eclipse, makefile, eclipse-cdt

我是使用 C++ 生成文件的新手。我尝试创建一个 eclipse(Juno) C++ exe 项目，该项目具有启用自动生成 makefile 的选项。只要我只将文件添加到 src 文件夹，它似乎就可以正常工作，但是如果我尝试创建一个新的源文件夹并向其中添加文件，eclipse 似乎不会为该目录自动生成一个 makefile 所以任何文件我默认 src 文件夹中的文件看不到添加到它的内容。eclipse 是否只支持自动生成添加到默认 src 文件夹的文件？

# android - Android支持小屏和普通屏

> ID：12961690
> 
> 赞同：1
> 
> 时间：2012-10-18T18:50:34.087
> 
> 标签：android, resize, size, screen

我的应用程序仅支持小屏幕和普通屏幕，所有密度。我需要该应用程序可用于 Google Play 中的所有设备。具有大屏幕和超大屏幕的设备必须缩放我的应用程序。

我在清单中写道：

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="false"
    android:largestWidthLimitDp="360"
    android:normalScreens="true"
    android:resizeable="false"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

我的应用是否可以在 Google Play 中适用于任何屏幕的所有设备？还是仅适用于 smallScreens 和 normalScreens？

我如何需要编写支持屏幕清单属性以使应用程序可用于所有设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T00:07:05.330

只是改变

*   `android:largeScreens="false"`到`true`, 和
*   `android:resizeable="false"`到`true`, 和
*   `android:xlargeScreens="false"` 至`true`

# asp.net - 带有 nginx 或 apache 的 Mono 2.11

> ID：12961694
> 
> 赞同：6
> 
> 时间：2012-10-18T18:50:49.160
> 
> 标签：asp.net, apache, mono, nginx

我已经按照以下说明安装了并行 Mono (2.11.3)：http: [//www.integratedwebsystems.com/2012/04/install-mono-2-11/](http://www.integratedwebsystems.com/2012/04/install-mono-2-11/)现在我想在这个 Mono 实例上运行我的 ASP.NET 站点. 我使用 VS 2010 中的“Internet 站点”模板创建了一个空的 MVC 4 站点，并将其发布到运行 Mono 的 Linux 机器上。

[我已经按照这些说明（ http://www.integratedwebsystems.com/2011/06/get-mvc3-razor-running-on-mono/](http://www.integratedwebsystems.com/2011/06/get-mvc3-razor-running-on-mono/) ）通过 xsp4 成功运行它，以便在运行 xsp4 之前设置环境变量。它可以正常工作（我看到一些新功能，如 CSS 捆绑，不起作用，但我稍后会处理它）。

现在，我想使用像 apache 或 nginx 这样的生产服务器。但是，这似乎几乎是不可能的，而且似乎我不是唯一一个遇到这个问题的人。例如，使用这个简单的 nginx 配置

```
server
{
    listen 80;
    server_name mvctest.mono;

    access_log /var/www/mvctest/log/access.log;
    error_log /var/www/mvctest/log/error.log debug;

    location /
    {
             root /var/www/mvctest/;
             index index.html index.htm default.aspx Default.aspx;
             fastcgi_index /Home;
             fastcgi_pass 127.0.0.1:9000;
             include /etc/nginx/fastcgi_params;
    }
} 
```

导致 502 Bad Gateway 错误，并且日志文件显示“上游发送了意外的 FastCGI 记录：3 在从上游读取响应标头时”。至于 Apache + mod_mono_server4，我没有移过这个错误

```
Exception caught during reading the configuration file:
System.MissingMethodException: Method not found:     'System.Configuration.IConfigurationSectionHandler.Create'.
at     System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection (System.String configKey) [0x00000] in <filename unknown>:0 
at System.Configuration.ConfigurationManager.GetSection (System.String sectionName) [0x00000] in <filename unknown>:0 
at System.Configuration.ConfigurationManager.get_AppSettings () [0x00000] in <filename unknown>:0 
at Mono.WebServer.Apache.Server.get_AppSettings () [0x00001] in /opt/mono-2.11/build/xsp-2.10.2/src/Mono.WebServer.Apache/main.cs:208 
at Mono.WebServer.Apache.Server+ApplicationSettings..ctor () [0x0002a] in /opt/mono-2.11/build/xsp-2.10.2/src/Mono.WebServer.Apache/main.cs:63 
```

有很多关于这个主题的帖子，甚至在 Stackoverflow 上，但没有真正的答案。但是，一些用户确实报告说他们成功地使用这些服务器在单声道上运行 MVC4 站点，所以我想知道是否有人愿意分享他们的配置设置或分步说明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T02:07:05.463

安装包将一些文件放置在错误的位置。对于 Apache，您必须将文件 mod-mono-server4.exe 从 /usr/lib/mono/4.0 移动到 /usr/lib/mono/4.5 并更新文件 /usr/bin/mod- 中的引用单服务器4。

如果您使用的是 XSP 或 FastCgi，则需要对 xsp4.exe 和 fastcgi-mono-server4.exe 以及它们各自在 /usr/bin 中的引用进行相同的处理。

（我开始后悔我沿着这条单声道走……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:43:17.287

这是一个解决我的 Mono 3.0.3/MVC 3/Nginx 问题的[脚本。](https://serverfault.com/questions/396306/mono-2-11-on-nginx-using-fastcgi-mono-server4-will-not-work/411861)复制所需文件后，该站点正常运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:27:01.597

你需要知道监听哪个端口单声道服务器，并在你的 Nginx 配置文件中将 fastcgi_pass 设置为它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T15:53:56.953

我不是这方面的专家，但以下 nginx 配置适用于我的配置略有不同（nginx + mono 2.10 + F# + websharper）：

```
server {
    listen   80;
    access_log   /var/log/myapp/access.log;

    location / {
            root /opt/myapp;
            index index.html index.htm default.aspx Default.aspx;
            fastcgi_pass unix:/var/run/myapp/fastcgisocket;
            include /etc/nginx/fastcgi_params;
    }
} 
```

当然，fastcgi-mono-server 必须配置为使用套接字 /var/run/myapp/fastcgisocket。

请注意，您必须小心此套接字的 r/w 权限。

我仍然有 nginx 没有发送多个请求以与 fastcgi-mono-server 并行处理的问题，但除此之外它工作得很好。

我希望它有所帮助。

# java - 从数组创建适配器（AutoCompleteTextView）

> ID：12961701
> 
> 赞同：1
> 
> 时间：2012-10-18T18:51:02.833
> 
> 标签：java, android, arrays, adapter

请帮我设置适配器`AutoCompleteTextView`

我的代码：

```
arr = getResources().getStringArray(R.array.site_array);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
     MainActivity.this, android.R.layout.simple_dropdown_item_1line,arr);
url_str.setAdapter(adapter);` 
```

当我尝试使用循环正常填充而不是空的设置数组时，不会出现自动完成结果。

```
for(int i=0;i<100;i++)
{
   arr[i] = Utils.getHost(History.getLinkElementFromIndex(MainActivity.this,i));
   Log.v("TEST_1",arr[i]);
}

ArrayAdapter<String> adapter = new ArrayAdapter<String>(
     MainActivity.this, android.R.layout.simple_dropdown_item_1line,arr);
url_str.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:22:35.317

我找到答案。您不能在数组中创建 1000 多个字符串的 ArrayAdapter。最大字符串数 == 500。这对我很有用。

# ios - 具有 3 个文本字段和 3 个标签的 UIAlertView 相互重叠

> ID：12961703
> 
> 赞同：1
> 
> 时间：2012-10-18T18:51:14.940
> 
> 标签：ios, xcode, uialertview

我正在尝试创建一个带有 3 个文本字段和 3 个标签的 UIAlertView。

但是使用我当前的代码，它们只是相互交叉，我尝试更改 AlertView 的框架，并且尝试使用 CGAffineTransform 但它们都不起作用。

这是我的代码：

```
UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"Sign in" message:@"\n\n\n\n\n" delegate:self cancelButtonTitle:@"Stop" otherButtonTitles:@"Sign in",nil];

UILabel *customerIdLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 55, 65, 21)];

customerIdLabel.tag =1;
customerIdLabel.text = @"Customer id: ";
[myAlertView customerIdLabel];

UITextField *customerIdField = [[UITextField alloc] initWithFrame:CGRectMake(89, 50, 160, 30)];

customerIdField.tag = 2;
customerIdField.placeholder = @"Fill in your customer id";
[myAlertView customerIdField]; 
```

然后还有另外两种组合。

这是我尝试过的转换：

```
CGAffineTransform myTransform = CGAffineTransformMakeScale(1.0, 0.5f);
[myAlertView setTransform:myTransform]; 
```

这就是我得到的：

![在此处输入图像描述](../Images/81dfe2d9b74d879bdbdbb9ee1f76aa92.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:58:09.627

我很确定您不应该那样使用 UIAlertViews。您应该设置标题、消息等并使用 [alertview show]。[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)似乎很清楚它是一个原样的类。 UIAlertViewStyle 可能是您可以查看的内容，但选项是 1 个文本字段、1 个安全字段或用户名和密码字段。

您最好的选择是使用新的 UIViewController 并使用[presentViewController:animated:completion:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:07:00.153

我通过不更改 UIAlertView 来解决这个问题，但在它显示时在其顶部添加一个清晰的视图（您可以用空格填充）并将文本字段添加到正确的位置（注意何时发生旋转）。然后，让点击通过视图到达 UIAlertView。这已经通过 Apple 商店中的 3 个应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T16:41:41.323

在 xcode 5 中的新 SDK 之前，您可以将子视图添加到警报视图，但这不再起作用。由于那个讨厌的代码，我不得不更新一个应用程序。最好将 uipopovercontroller 用于 ipad 或显示 UIView 甚至为 ipad 或 iphone 提供视图控制器。

# ruby-on-rails - 如何以高效的方式访问 Controller 中多个关联模型的信息？

> ID：12961706
> 
> 赞同：0
> 
> 时间：2012-10-18T18:51:25.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord, controller

首先，一些背景。

我的应用模型是这样的：

```
 User has_many :subscriptions; has_many :courses, :through => :subscriptions
Subscription belongs_to :course, :user
  Course has_many :subscriptions; has_many :users, :through => :subscriptions 
```

Subscription 是一个连接表，用于存储诸如状态（：active、：inactive、：failed、：passed、：unpaid）之类的信息，并用作连接课程所附带的所有信息（例如Grade模型（尚未添加），付款模型（正在进行中）等）。

我想添加支付模型来存储订阅的支付历史。每次付款可以用于一个或多个订阅。到目前为止，我已经尝试了一个`Payment has_many :subscriptions`，但**我在控制器逻辑上遇到了问题，**我想也许有更好的方法来关联“用户订阅课程的付款”的模型。

从技术上讲，在支付显示操作中，我需要来自这些模型中的每一个的信息（course.name、支付用户的 user_id、payment.amount，所有这些都连接到订阅）和 Payment.create 操作，我需要设置订阅状态（我可以做到）。

如果这是关联各种模型的合乎逻辑/有效的方式，我如何以最少的数据库调用在支付展示操作中访问所需的信息（来自每个模型课程、用户、支付和订阅的一些信息）？我正在使用`Rails 3.2/Ruby 1.9`并希望坚持使用 ActiveRecord/ARel 而不是直接的 sql 语句。我也愿意接受“你做错了”的答案。如果更改关联将使从控制器访问表的效率更高，我也对此持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:15:39.587

做（中`config/routes.rb`）

```
resources :users do
  resources :courses do
    resources :subscriptions
  end
end 
```

这将允许你做`@user.courses.subscriptions`

例如，如果您想从`courses`back 到`users`，您可以将路线修改为

```
resources :users, :shallow => true do
 #...
end 
```

**编辑：**

对于付款，我会像你说的那样做`has_many :subscriptions`

当您显示付款时。你会做类似的事情

```
payment_history = Payment.find(params[:id])
@subscriptions = payment_history.subscriptions 
```

现在您有了指向该付款历史的链接的订阅列表，例如

您将在视图中循环并显示每个订阅

```
<% @subscriptions.each do |subscription|%>
  <%= subscription.payment.id %>
  <%= subscription.users.size %>
  <%= subscription.courses.size %>
  <%= subscription.paying_user.name  %> <!-- or whereever it exists-->
<% end%> 
```

您需要确保您有一个路由并在更改路由后重新启动服务器

```
resources :payments, :shallow => true do
   resources :subscriptions
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:52:09.037

@D3mon-1stVFW 的回答让我走上了解决这个问题的正确轨道。

对于付款显示操作，查询将类似于：

```
@payment = Payment.find_by_id(params[:id])
@subscriptions = @payment.subscriptions.includes(:course, :user) 
```

这将使访问与订阅相关的课程和用户数据成为可能，如下所示：

```
<% @subscriptions.each do |subscription|%>
  <%= subscription.payment.amount %>
  <%= subscription.user.email %>
  <%= subscription.course.name %>
  <%= subscription.state  %>
<% end%> 
```

对于还没有 a 的支付 new/create 操作`payment.id`，查询略有不同：

```
@unpaid_subs = Subscription.where(:user_id => current_user.id).unpaid.includes(:course)
@payment = Payment.new 
```

`current_user`将要付款的用户在哪里（创建新的付款），并且`.unpaid`是模型上的一个范围`Subscription`，如下所示：

```
scope :unpaid, -> { where('subscriptions.payment_id' => nil)} 
```

在视图中，您可以使用与显示视图相同的方式访问数据：

```
<% @unpaid_subs.each do |sub| %>
  <%= sub.course.name %> | <%= sub.course.credits %><br />
<% end %> 
```

我的主要困惑是我不知道您可以从孩子那里访问父母关联。订阅belongs_to 课程，但您仍然可以这样做`subscription.course.something`。

# android - 无法在 ImageView 中显示图像

> ID：12961707
> 
> 赞同：0
> 
> 时间：2012-10-18T18:51:29.433
> 
> 标签：android, imageview, gallery

我正在从图库中挑选图像并在 ImageView 上显示图像。我能够成功地做到这一点。我的问题是，当我尝试设置从相机（.jpg 图像）捕获的图像时，它们没有显示在 imageview 中，只是出现了一个空白屏幕。即使是 .jpg 类型的图像也能成功显示，这些图像不是从相机捕获的。无法理解原因，可能是由于尺寸较大。请帮助以下是我的代码：

```
public class ImagePick extends Activity {

private Bitmap bitmap;
private ImageView imv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

setContentView(R.layout.activity_upload);
imv = (ImageView) findViewById(R.id.targetimage);

  Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
  intent.setType("image/*");
  startActivityForResult(intent, 0);

}

protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {
     super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

     switch(requestCode) {
     case 0:
         if(resultCode == RESULT_OK){ 
             Uri selectedImage = imageReturnedIntent.getData();
             String[] filePathColumn = {MediaStore.Images.Media.DATA};

             Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
             cursor.moveToFirst();

             int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
             String filePath = cursor.getString(columnIndex); // file path of selected image
             cursor.close();
                   //  Convert file path into bitmap image using below line.
             Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

                   // put  bitmapimage in your imageview
             imv.setImageBitmap(yourSelectedImage);
         }
     }
}
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:59:41.450

您需要使用 FileInputStream 和 BufferedInputStream 来读取图像，然后将图像转换为位图。

```
 private FileInputStream is = null;
    private BufferedInputStream bis = null;

is = new FileInputStream(new File(imagePath));
        bis = new BufferedInputStream(is); 
```

还要检查[链接](https://stackoverflow.com/questions/10876996/showing-images-of-gallery-in-my-application)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:11:56.420

代替：

```
int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
String filePath = cursor.getString(columnIndex); // file path of selected image 
```

尝试：

```
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
return cursor.getString(column_index); 
```

并在 BitmapDecoding**之后**关闭光标。

请记住，对 SD 卡的访问应该在 AsynckTasks 中完成。并且您可以调整图像大小以适合屏幕，这样您就不会使用大量内存，请查看我的其他答案[Bitmap Out Of Memory Issues](https://stackoverflow.com/questions/12935793/bitmap-out-of-memory-issues/12938064#12938064)。关于如何做到这一点。

# opengl - 使用 OpenGL 读取深度图

> ID：12961708
> 
> 赞同：1
> 
> 时间：2012-10-18T18:51:56.207
> 
> 标签：opengl, glsl, depth-buffer, depth-testing

我提取了 2 张图像的深度图并将它们存储为 .tif 文件

现在我想使用openGL根据它们的深度加入这两个图像

所以我想从 .tif 文件中读取每个图像的深度，然后使用该深度来绘制具有更高深度的像素

为了更清楚，深度图是两个像这个 [链接的图像](http://www.google.com.sa/imgres?um=1&hl=ar&safe=active&sa=N&biw=1280&bih=660&tbm=isch&tbnid=0BzhCVnS6ZKAVM%3a&imgrefurl=http://eraser85.wordpress.com/2008/02/28/make-it-translucid/&docid=5mvwr6wU9qRNdM&imgurl=http://eraser85.files.wordpress.com/2008/02/depthmap.jpg&w=372&h=381&ei=_mSAUImVOcrQhAfWpIEo&zoom=1&iact=hc&vpx=716&vpy=17&dur=80&hovh=227&hovw=222&tx=117&ty=74&sig=115263750231246451966&page=4&tbnh=153&tbnw=145&start=61&ndsp=22&ved=1t:429,r:47,s:20,i:271)

所以说我有前一张图片，我想把它和这张图片一起加入

[关联](http://www.google.com.sa/imgres?um=1&hl=ar&safe=active&sa=N&biw=1280&bih=660&tbm=isch&tbnid=MtKgVzaSKhWPAM%3a&imgrefurl=http://pages.cs.wisc.edu/~lizhang/projects/mvstereo/cvpr2009/&docid=kIzFL8TYuUspMM&imgurl=http://pages.cs.wisc.edu/~lizhang/projects/mvstereo/cvpr2009/dpt_cloth3_ours.png&w=330&h=370&ei=_mSAUImVOcrQhAfWpIEo&zoom=1&iact=hc&vpx=4&vpy=243&dur=226&hovh=238&hovw=212&tx=102&ty=127&sig=115263750231246451966&page=4&tbnh=149&tbnw=129&start=61&ndsp=22&ved=1t:429,r:57,s:20,i:301)

我的问题是如何从 .t​​if 文件中读取这个深度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:09:38.120

好的，我会去的;-)

我看到图像只是灰度，所以如果“深度”信息只是像素的强度，“加入”它们可能只是添加像素的问题。这通常被称为“混合”，但我不知道您还有什么意思。

所以，你需要；

1.  将 2 个图像读入内存
2.  对于每个像素（假设两个图像大小相同）：
    *   从图像 A[row,col] 中读取强度
    *   从图像 B[row,col] 中读取强度
    *   将 max(A[row,col],B[row,col]) 写入 C[row,col]
3.  保存图像 C - 这是您的新“加入”图像。

现在 OpenGL 没有任何对加载/保存图像的内置支持，所以你需要找到一个 3rd 方库，比如[FreeImage](http://freeimage.sourceforge.net/)或类似的。

所以，这是很多工作。我想知道您是否真的想要一个 OpenGL 解决方案，或者只是假设 OpenGL 对图形工作有好处。如果上面的算法真的是你想要的，你可以在几分钟内用 C# 之类的东西完成它。它内置支持加载（某些格式）图像文件，以及使用 Bitmap 类访问像素。由于您自己创建了这些图像，因此您可能不受 TIFF 格式的约束。

# c# - 循环遍历 Datagrid 以检查复选框以创建列表

> ID：12961711
> 
> 赞同：0
> 
> 时间：2012-10-18T18:52:05.700
> 
> 标签：c#, silverlight, datagrid, foreach

我有一个 Silverlight DataGrid，而不是一个 asp Gridview，它可以很好地填充。我添加了一个复选框列，供用户选择他们想要下载的项目。我的目标是创建一个“购物车”，用户可以在其中选择他们的项目，然后单击一个按钮来添加它们。然后他们将转到结帐页面等。

到目前为止，我的问题是我无法检查用户是否选中了复选框。我认为我的 foreach 循环很好，但我在 bool IsChecked 行中得到了一个“nullreferenceexception”。在断点期间，没有一个值像我看到的那样返回为 null，但它显然没有按我希望的方式工作。

```
foreach (var row in gridResults.ItemsSource)
        {
            bool IsChecked = (bool)((CheckBox)gridResults.Columns[8].GetCellContent(row)).IsChecked;

            if (IsChecked)
            {
                List<string> lstFile = new List<string>();
                string fileName = (gridResults.SelectedItem as JobSearchResult).FileName;
                lstFile.Add(fileName);
            }
        } 
```

通过文件名，我可以找到服务器上的文件供他们下载，但是我如何检查他们是否检查了他们想要的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:26:49.550

如果不确切知道您是如何填充数据网格的，就很难告诉您问题的确切原因是什么。但我会告诉你我将如何处理这种情况。

创建对象类型的 ObservableCollection。将 DataGrid 的 ItemsSource 设置为 ObservableCollection。然后，在数据网格行中，为复选框的 IsChecked 属性创建一个绑定到对象上的某个公共布尔值（可能称为 IsSelected）。确保将绑定模式设置为双向。

然后，您所要做的就是在 ObservableCollection 上使用 linq 查询。请记住，Silverlight 是一个表示层，您根本不应该依赖它来执行业务逻辑。

# java - 基于 compareTo 的调用方法？

> ID：12961714
> 
> 赞同：1
> 
> 时间：2012-10-18T18:52:17.480
> 
> 标签：java, compare, biginteger

如果我使用`compareTo`a `BigInteger`，我如何从结果中选择调用哪个函数？（-1 = funcA，+1 = funcB，0 = 无功能）。

特别是：这有什么问题？

```
doCompare() {
   BigInteger x = new BigInteger(5);
   BigInteger y = new BigInteger(10);

   //syntax error token "<", invalid assignment operator
   x.compareTo(y) < 0 ? funcA() : funcB();
}

void funcA();
void funcB(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T18:54:09.133

因为`funcA()`and`funcB()`有返回类型`void`，所以不能使用[三元语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)。不过，您可以将其重写为常规`if`语句：

```
if (x.compareTo(y) < 0) {
    funcA();
} else {
    funcB();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:59:26.403

用这个，

> public void doCompare() { BigInteger x = new BigInteger("5"); BigInteger y = new BigInteger("10");
> 
> ```
>  //syntax error token "<", invalid assignment operator
>     if(x.compareTo(y) < 0 )
>     {
>         funcA();
>     }
>     else
>     {
>         funcB();
>     }
> }
> 
> public void funcA()
> {
> }
> 
> public void funcB()
> {
> } 
> ```

如果要在一行中使用条件，则需要修改函数：

> ```
> public void doCompare()
> {
>     BigInteger x = new BigInteger("5");
>     BigInteger y = new BigInteger("10");
> 
>     boolean a = (x.compareTo(y) < 0 ) ? funcA() : funcB();
> 
> }
> 
> public boolean funcA()
> {
>     return false;
> }
> 
> public boolean funcB()
> {
>     return true;
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:59:51.817

首先，您`BigInteger()`错误地使用了构造函数，它`String`不需要`int`or `long`。而且你的函数必须有`boolean`返回类型，否则你不能在三元运算中使用它们。

```
 void doCompare() 
    {
       BigInteger x = new BigInteger("5");
       BigInteger y = new BigInteger("10");

       boolean result = x.compareTo(y) < 0 ? funcA() : funcB();
    }

    boolean funcA(){return true;};
    boolean funcB(){return false;}; 
```

# c# - 将复合 id 序列化为二进制

> ID：12961715
> 
> 赞同：1
> 
> 时间：2012-10-18T18:52:24.723
> 
> 标签：c#, mongodb, serialization, mongodb-.net-driver

我有以下代表复合 _id 的测试类：

```
private sealed class Id
{
    public int p0 { get; set; }
    public int p1 { get; set; }
    public int p2 { get; set; }
    public int p3 { get; set; }
    public int p4 { get; set; }
    public int p5 { get; set; }
    public int p6 { get; set; }
    public int p7 { get; set; }
} 
```

数据类：

```
private sealed class MdbData
{
    [BsonId]
    public Id _Id;
    public List<string> data = new List<string>();
} 
```

我写了一个使用所有 8 个字段的 upsert 语句，但速度非常可怕。所以我接下来要做的是使用 p0, BinarySerialized(p1:p7) 作为_id。我的用例允许我毫无问题地连接这些字段。

序列化 p1-p7 的最佳方法是什么？C# 的序列化器，还是 BSON 的？

作为记录，更新插入：

```
col.Update(Query.And(
    Query.EQ("_id.p0", doc.p0),
    Query.EQ("_id.p1", doc.p1),
    Query.EQ("_id.p2", doc.p2),
    Query.EQ("_id.p3", doc.p3),
    Query.EQ("_id.p4", doc.p4),
    Query.EQ("_id.p5", doc.p5),
    Query.EQ("_id.p6", doc.p6),
    Query.EQ("_id.p7", doc.p7)),
    Update.Push("data", doc.data),
    UpdateFlags.Upsert); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:29:59.340

使用 upsert 看到您编辑的问题，您应该重写您的查询，以便服务器可以利用 _id 索引。最简单的方法是使用类型化查询构建器：

```
var query = Query<MdbData>.EQ(x => x._Id, doc._Id);
var update = Update<MdbData>.Push(x => x.data, doc.data);
collection.Update(query, update, UpdateFlags.Upsert); 
```

如果您编写查询分别检查 _id 的每个组件，则服务器无法使用 _id 索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:08:58.197

我将首先调查您的 upsert 为何如此缓慢。这可能只是查询部分的编写方式，在这种情况下更改 Id 可能无济于事。

如果您确实想将 p1 到 p7 组件编码为二进制字节，我建议您像这样定义您的 Id 类：

```
public sealed class Id
{
    public int p0 { get; set; }
    public byte[] p1to7 { get; set; }
} 
```

但是你必须在某处编写一些辅助方法或属性来处理打包和解包字节。我不会使用任何类型的序列化程序，而是一次将整数打包 4 个字节（因此 p1to7 的长度为 28 个字节）。

# c++ - 双重比较

> ID：12961717
> 
> 赞同：0
> 
> 时间：2012-10-18T18:52:36.153
> 
> 标签：c++, comparison, boolean, comparison-operators

我可以在 C++ 中做到这一点吗？

```
if (4<5<6)
 cout<<"valid"<<endl; 
```

即双重比较？既然我知道我可以

```
bool a;
a = 1+2<3+4<5>6;//etc 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T18:53:27.407

是的，你可以做到，但这不会是你所期望的。它被解析为

```
if ( (4<5) < 6 ) 
```

产生

```
if ( 1 < 6 ) 
```

因为`4<5`评估 to `true`which 被提升为`1`，这显然是正确的。

你需要

```
if ( (4<5) && (5<6) ) 
```

另外，是的，你可以做

```
a = 1+2<3+4<5>6; 
```

但这也被解析为

```
a = ((1+2)<((3+4)<5))>6; 
```

这将评估为`false`since`(1+2)<((3+4)<5)`产生一个布尔值，它总是小于 6。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T18:54:43.673

它编译但不会做你期望的 -

```
if( 4 < 5 < 2) 
```

如同

```
if( (4 < 5) < 2) 
```

如同

```
if( (1 < 2) )  //1 obtained from cast to boolean 
```

这当然是真的，即使我想你期待的是完全不同的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T18:54:42.500

这可能很笨拙，但这会起作用：

```
int i, j, k;
i = 4; j = 5; k = 6;
if ( (i < j) && (j < k) )
{
    cout << "Valid!" << endl;
} 
```

# mysql - 如何在 MySQL 中标记重复条目？

> ID：12961719
> 
> 赞同：1
> 
> 时间：2012-10-18T18:52:46.903
> 
> 标签：mysql, coldfusion, import, duplicates

我正在使用`MySQL 5.0.88/Coldfusion`并有一个临时表，我正在将 CSV 文件加载到其中。该表经过验证，然后导入到主数据库。

我需要检查临时表中的重复导入。我正在检查这样的临时表：

```
<cfquery datasource="db">
    UPDATE import_temp
    SET error= "true", errorMsg = "missing info"
    WHERE user = <cfqueryparam value = "#Session.user#" cfsqltype="cf_sql_varchar" maxlength="13"> 
    AND error = "false" 
    AND info = ""
</cfquery> 
```

**问题**：
是否可以像这样检查临时表中的重复 ID：

```
<cfquery datasource="db">
    UPDATE import_temp
    SET error = "true", errorMsg = "duplicate id"
    WHERE user = <cfqueryparam value = "#Session.user#" cfsqltype="cf_sql_varchar" maxlength="13"> 
    AND error = "false" 
    AND id IN (SELECT i.id FROM import_temp AS i WHERE i.id = id)
</cfquery> 
```

现在这不起作用，但是有没有办法让它起作用并将错误字段设置为 false 像这样？`on duplicate key`或者是加载 CSV 文件时使用的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:58:15.247

```
UPDATE import_temp
SET error = "true", errorMsg = "duplicate id"
WHERE user = <cfqueryparam value = "#Session.user#" cfsqltype="cf_sql_varchar" maxlength="13"> 
AND error = "false" 
AND id IN (SELECT id FROM permanent WHERE import_temp.id = id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:44:20.520

好的。现在这样做......：

```
<cfquery datasource="db" name="dups">
    SELECT ean 
    FROM import_pricat_csv
    WHERE iln = <cfqueryparam value = "#Session.loginID#" cfsqltype="cf_sql_varchar" maxlength="13"> 
    AND fehler = "nein"
    AND ean IN (
        SELECT ean
        FROM import_pricat_csv
        GROUP BY ean
        HAVING count(ean) > 1
        )
</cfquery>
<cfif dups.recordcount GT 0>
    <cfloop query="dups">
        <cfquery datasource="db">
            UPDATE import_pricat_csv
            SET fehler = "ja", fehlertext = "EAN doppelt"
            WHERE ean = dups.ean
        </cfquery>
    </cfloop>
</cfif> 
```

不好，但似乎工作。

# python - 诊断python中的内存泄漏

> ID：12961724
> 
> 赞同：12
> 
> 时间：2012-10-18T18:53:06.457
> 
> 标签：python, memory-leaks, objgraph

我一直在尝试使用 objgraph 调试 Coopr 包中的内存泄漏：[https ://gist.github.com/3855150](https://gist.github.com/3855150)

我将它固定在一个`_SetContainer`对象上，但似乎无法弄清楚为什么该对象会持续存在于内存中。这是结果`objgraph.show_refs`：

![show_refs](../Images/970d8b20a98903f97450067a33580247.png)

如何找到循环引用以及如何让垃圾收集器收集`_SetContainer`实例？

*我之前认为该类本身可能具有自引用（上图中右侧类正下方的元组）。但是 objgraph 总是将继承的类显示为具有自引用元组。[您可以在这里](https://gist.github.com/3855150#file_inheritance_test.py)看到一个非常简单的测试用例。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:02:07.803

它主要是从 objgraph 的输出中猜测的，但似乎该实例处于一个循环中，并且它的类具有`__del__`. 在这种情况下，对象在 CPython 中永远保持活动状态。检查它：

`import gc; gc.collect(); print gc.garbage`

[http://docs.python.org/library/gc.html#gc.garbage](http://docs.python.org/library/gc.html#gc.garbage)

# java - 使用 Guice 的 @Inject 注入 @Context 字段（到子资源中）

> ID：12961725
> 
> 赞同：2
> 
> 时间：2012-10-18T18:53:08.563
> 
> 标签：java, glassfish, jersey, jax-rs, guice

我目前正在开发一个使用 Jersey 和 Guice 作为 DI 容器的 REST Web 服务。

为了处理请求，我依赖`GuiceServletContextListener`配置类似于以下内容的请求：

```
bind(UserResource.class);
//Some other root-level resources for REST

serve("/rest/*").with(GuiceContainer.class); 
```

因为我必须处理分层数据（一个用户应该有自己的项目，并且应该可以以 的形式访问其他用户的项目`/rest/user/[Username]/item`）。为此，我使用 Jersey 对子资源的支持。

例如，my`UserResource`包含以下方法（`ItemResource.Factory`是一个工厂接口，其实现由 Guice 自动提供`FactoryModuleBuilder`）：

```
@Inject
private ItemResource.Factory _itemResourceFactory;

@Path("/{username}/item")
public ItemResource getItems(@PathParam("username") String username) {
   User user = //...
   return this._itemResourceFactory.create(user);
} 
```

`ItemResource`（子资源）然后再次实现为基于在构造函数中传入的用户的普通 Jersey 类。

但是，我的子资源也需要访问`@Context`字段（如`UriInfo`or `HttpServletRequest`）。根据 Jersey 文档，`@Context`不会为子资源注入字段，因为它们的生命周期是未知的（并且文档似乎是真实的）。

这对我来说非常不幸：我真的需要接触这些价值观。
作为一种解决方法，我目前将这些值作为附加的构造函数参数传递给我的子资源，我认为这一切都很舒服。

有没有可能告诉泽西岛无论如何都要注射它们？

不过，如果 Guice 本身能够注入这些`@Context`字段，那就更好了。
然而，简单地交换`@Context`for`@Inject`是行不通的，因为 Guice 没有像`UriInfo`or之类的类型的注册`HttpServletRequest`。

我可以以某种方式创建这些映射吗？
问题是，我不知道如何访问 Guice`Provider`实现中的请求特定值。
是否有任何辅助方法可以访问这些 Jersey 对象的当前实例，以便我可以编写必要的提供程序？

或者那些实现可能已经在某个地方可用了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:56:34.627

我不确定我是否理解您的问题。您可以发布与“将这些值作为附加构造函数参数传递”相关的代码吗？

您可以像这样注入上下文：

@Path("/{username}/item") public ItemResource getItems(@Context HttpServletRequest request, @PathParam("username") String username) {

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T19:06:45.870

也许您可以以编程方式注入字段？Guice 通过 Injector 类提供了这一点：

```
Injector injector = Guice.createInjector(...);
injector.injectMembers(someObjectToInject); 
```

有关此主题的更多信息，请参阅[http://code.google.com/p/google-guice/wiki/Injections](http://code.google.com/p/google-guice/wiki/Injections)。

# ipad - iPad UIView 到 PDF - 低分辨率

> ID：12961731
> 
> 赞同：1
> 
> 时间：2012-10-18T18:53:24.717
> 
> 标签：ipad, pdf, resolution

我有一个应用程序，其中 PDF 显示在 UIWebView 中，最重要的是我放置了一些需要填充的 UITextFields。问题是当我从这些视图生成新的 PDF 时，PDF（来自 UIWebView）分辨率保持正常，但来自 UITextFields 的文本是模糊的。如何解决？

我有以下代码来生成 PDF：

```
// Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T20:17:15.057

你必须升级你的视图。看看这个，他给出了一个很好的解释：

[http://cadabracorp.com/blog/2012/09/26/creating-printing-and-emailing-high-resolution-pdfs-in-ios/](http://cadabracorp.com/blog/2012/09/26/creating-printing-and-emailing-high-resolution-pdfs-in-ios/)

# java - 用java编写字典的数据结构

> ID：12961736
> 
> 赞同：2
> 
> 时间：2012-10-18T18:53:40.540
> 
> 标签：java

哪种数据结构更适合用 Java 制作字典？树或哈希表哪个更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:55:04.150

一张地图。没有其他的。如果要排序，请使用 TreeMap。否则：HashMap。

字典将（关键）词*映射*到它的描述或翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:59:19.493

我会使用类似的东西

```
Map<String,Integer> dictionary = Collections.synchronizedMap(new TreeMap<String,Integer>()); 
```

您可以使用 Class 对象代替 Integer 作为 String 键的值，该对象可能可以保存一个列表，该列表包含该单词在文档中的所有位置。有一些方法可以轻松地从`TreeMap`. 以下是您获取迭代器的方式`TreeMap.`

```
Set<Entry<String,Integer>> set = dictionary.entrySet();

Iterator<Entry<String,Integer>> entryItr = set.iterator();

Entry<String,Integer> entry = null;

while(entryItr.hasnext()){
entry = entryItr.next();
// Do whatever you want.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:34:24.583

我会使用 Trie，尤其是为了提高内存效率和前缀查找。我有一个在 github 上实现 APL 下的地图接口的实现：[https ://github.com/Blazebit/blaze-utils/tree/c7b1fa586590d121d9f44c1686cb58de0349eb0b/blaze-common-utils](https://github.com/Blazebit/blaze-utils/tree/c7b1fa586590d121d9f44c1686cb58de0349eb0b/blaze-common-utils)

检查一下，也许它比简单的地图更适合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T02:53:24.523

根据麻省理工学院算法简介中的讲座，我会说最好使用哈希表。因为您可以在 O(1) 而不是 O(logn) 中进行操作

[https://www.youtube.com/watch?v=0M_kIqhwbFo](https://www.youtube.com/watch?v=0M_kIqhwbFo)

# c# - 如何在命令行中写入插入字符串

> ID：12961737
> 
> 赞同：-5
> 
> 时间：2012-10-18T18:53:41.927
> 
> 标签：c#, batch-file, dos

有谁知道如何正确编写查询字符串作为命令行参数？应该如何形成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:00:18.667

我有点不确定我是否正确解释了您的要求。但我假设您的意思是将命令行参数传递给批处理文件。如果这是错误的，请告诉我，我会删除它。（但如果我假设正确，这真的是题外话，因为它不是真正的编程问题。）

默认情况下，批处理文件假定每个空格都是另一个参数的 dlimiter，因此

```
C:>Start.exe my command parameter 
```

启动带有三个参数的 start.exe 程序：“my”、“command”和“parameter”。

如果我假设正确，您是在问如何将这些设置为 ONE 参数。

在这种情况下，请将参数括在引号中。

```
C:>Start.exe "my command parameter" 
```

将被读取为一个命令参数“我的命令参数”

```
C:>Start.exe "my command" parameter 
```

将被读取为两个参数 - “我的命令”和“参数”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:04:27.423

您可以在**System.Diagnostics中使用****Process**

 **例子：

```
 Process process = new Process();
        process.StartInfo.UseShellExecute = true;
        process.StartInfo.FileName = @"C:\Windows\System32\cmd.exe";
        process.StartInfo.Arguments = "/c \"ping 192.168.0.15\"";
        process.Start(); 
```**

# android - 使用 SearchView 自定义搜索实现

> ID：12961742
> 
> 赞同：5
> 
> 时间：2012-10-18T18:53:56.420
> 
> 标签：android, search

我想在我的应用程序中实现搜索，但我不想使用单独的 Activity 来显示我的搜索结果。相反，我只想使用显示在`SearchView`.

我可以`setOnQueryTextListener`在 上使用`SearchView`，监听输入并搜索结果。但是如何将这些结果添加到下面的列表中`SearchView`？让我们假设我正在搜索一个`List<String>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:30:34.533

您需要创建的是[Content Provider](http://developer.android.com/guide/topics/providers/content-providers.html/)。通过这种方式，您可以向 SearchView 添加自定义结果，并在用户输入内容时向其中添加自动完成功能。

如果我没记错的话，在我的一个项目中，我做过类似的事情，而且时间不长。

我相信这可能会有所帮助：[Turn AutoCompleteTextView into a SearchView in ActionBar instead](https://stackoverflow.com/questions/11491515/turn-autocompletetextview-into-a-searchview-in-actionbar-instead)

还有这个：[SearchManager - 添加自定义建议](https://stackoverflow.com/questions/9051573/searchmanager-adding-custom-suggestions)

希望这可以帮助。

N。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:07:08.083

我已经通过使用带有搜索字符串的 EditText 在我的应用程序中实现了搜索。
在此 EditText 下方，我有我想要执行搜索的 ListView。

```
<EditText
    android:id="@+id/searchInput"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/input_patch"
    android:gravity="center_vertical"
    android:hint="@string/search_text"
    android:lines="1"
    android:textColor="@android:color/white"
    android:textSize="16sp" >
</EditText>
<ListView
    android:id="@+id/appsList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/searchInput"
    android:cacheColorHint="#00000000" >
</ListView> 
```

搜索 EditText 下方的列表会根据 EditText 中输入的搜索文本而变化。

```
etSearch = (EditText) findViewById(R.id.searchInput);
etSearch.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        searchList();
    }
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }
    @Override
    public void afterTextChanged(Editable s) {
    }
}); 
```

函数 searchList() 进行实际搜索

```
 private void searchList() {
    String s = etSearch.getText().toString();
    int textlength = s.length();
    String sApp;
    ArrayList<String> appsListSort = new ArrayList<String>();
    int appSize = list.size();
    for (int i = 0; i < appSize; i++) {
        sApp = list.get(i);
        if (textlength <= sApp.length()) {
            if (s.equalsIgnoreCase((String) sApp.subSequence(0, textlength))) {
                appsListSort.add(list.get(i));
            }
        }
    }
    list.clear();
    for (int j = 0; j < appsListSort.size(); j++) {
        list.add(appsListSort.get(j));
    }
    adapter.notifyDataSetChanged();
} 
```

这`list`是显示在 ListView 中的 ArrayList 并且`adapter`是 ListView 适配器。
我希望这对您有所帮助。

# c++ - 使用 make 将 Qt 库复制到输出目录

> ID：12961744
> 
> 赞同：0
> 
> 时间：2012-10-18T18:54:02.143
> 
> 标签：c++, qt, makefile

我有一个看起来像这样的 qt .pro 文件：

```
TEMPLATE = app
TARGET = demoqt
DESTDIR = ./debug
QT += core gui
CONFIG += debug
DEFINES += QT_LARGEFILE_SUPPORT QT_DLL
HEADERS += ./src/MainWindow.h
SOURCES += ./src/MainWindow.cpp ./src/main.cpp 
```

使用以下 .bat 在 windows 下成功构建：

```
@echo off
echo Setting up a Qt environment...
set QTDIR=C:\Qt\4.8.3
set PATH=C:\Qt\4.8.3\bin;%PATH%
set QMAKESPEC=win32-msvc2010
call "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" amd64
qmake
nmake 
```

我完全没有使用过makefile的经验——我完全做到了这一点。我遇到的问题是必要的 Qt DLL 文件没有被复制到输出目录。因此，当我执行我的可执行文件时，我会收到诸如`The program can't start because QtGuid4.dll is missing from your computer. Try reinsalling the program to fix this problem.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:59:25.343

我只需在最后的 .bat 文件中添加一行，将 QtGuid4.dll （和任何其他）复制到输出目录。

如果是个人项目，不担心安装/分发问题，可以手动复制一次到 Windows 系统目录（实际名称取决于操作系统版本）。

# ruby-on-rails - 由于自定义路由，页面无法过期

> ID：12961749
> 
> 赞同：1
> 
> 时间：2012-10-18T18:54:14.590
> 
> 标签：ruby-on-rails, caching

我正在缓存此页面：`match "/review_(:game_id)" => "reviews#show"`

我的控制器看起来像：

```
class ReviewsController < ApplicationController
  caches_page :show

  def show
    expires_in 1.week, :public => true
  end
end 
```

我正在尝试每周执行一项 rake 任务来清除该特定页面的文件缓存，但是 expire_page 似乎不适用于这个，也许它需要一个完整的路径？但我不能提供，因为有数百种游戏。

```
task :expire_game_reviews => :environment do
  ApplicationController.expire_page "/reviews/show"
  puts "Cache cleared"
end 
```

有任何想法吗？或者甚至更好的解决方法来指定一个超时参数`caches_page`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:21:02.093

你是对的，expire_page 不会在这个设置中削减它。

解决方案是手动完成。由于没有其他内容可以清除此缓存，因此您需要自己删除文件。这很容易：

```
task :expire_game_reviews => :environment do
  cpath = ActionController::Base.page_cache_directory

  unless cpath == Rails.root + "/public"
    FileUtils.rm_r(Dir.glob(cpath + "/*")) rescue Errno::ENOENT
  end

  Rails.cache.clear
end 
```

删除 /public 目录中的这些文件（或放置它们的任何其他位置 - 您可以使用正则表达式将目录和文件与 FileUtils 匹配）后，您需要清除 /tmp 目录中的 Rails 缓存，以便它不会拉在控制器发出命令后从那里缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T10:31:43.600

您是否尝试过为每条评论指定明确的路径？expire_page 需要您存储缓存的完整路径（但不是参数）：

```
expire_page(:controller => "reviews", :action => "show", :id => r.id) 
```

如果这不起作用，您可以使用以下内容找出您实际存储在文件缓存中的密钥：

```
find ./tmp/cache -type f | xargs ruby -e 'require "cgi";puts CGI::unescape(ARGV.sort.join("\n")).gsub(/.*tmp\/cache\/\w*\/\w*\//,"")' 
```

注意，这只是为了探索您正在存储和调试的密钥。然后，当您知道要匹配的密钥模式时，您可以尝试使用文件系统中的清扫器将其过期，这会清除整个页面缓存（不是所有缓存，只是页面缓存）。不幸的是 expire_page 没有像 expire_fragment 这样的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:01:28.103

您是否尝试过明确指定资源 id 的过期页面？

就像是 ：

```
task :expire_game_reviews => :environment do
  Game.all.each do |game|
    ApplicationController.expire_page "/review_#{game.id}"
    puts "Cache cleared for review #{game.id}"
  end
end 
```

在我看来，让 Rails 使缓存“/reviews/show”过期是行不通的，因为与缓存关联的键类似于“review_123”，但我可能错了。

# php - Codeigniter 会话->用户数据为空

> ID：12961751
> 
> 赞同：1
> 
> 时间：2012-10-18T18:54:19.850
> 
> 标签：php, codeigniter, session

我的项目有几个从 session->userdata 数组中提取值的视图。整个项目在我的开发机器上完美运行，但是当我将项目复制到服务器时，我发现 $this->session->userdata 为空。

这是在 session->userdata 数组中插入一些值的代码：它在控制器中被调用。

```
 $sessionArray = array(
            'web_id' => $id,
            'paperId' => $paperId,
            'prelimId' => $prelimId,
            'intakeId' => $intakeId,
            'finalId' => $finalId,
     );

     $this->session->set_userdata($sessionArray); 
```

在我调用的视图文件中

```
var_dump($this->session->userdata); 
```

返回的值为空。正如我之前提到的，该数组在我的开发计算机（运行 WAMP）上不为空。有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T19:33:51.040

为了将所有会话数据检索为 ASSOC 数组，您可以使用该`all_userdata()`方法。*（看看 CodeIgniter[用户指南](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)）*，

您可以在***Controller***中编写它并将返回的值发送到视图，如下所示：

```
$data['userdata'] = $this->session->all_userdata();
$this->load->view('your/view.php', $data); // use $userdata in the view 
```

**注意：**直接在*视图中使用会话库* [可能会导致意外问题](https://stackoverflow.com/questions/21606594/codeigniter-session-hanging)。尝试在*Controller*而不是*View*中管理会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:38:42.560

很抱歉首先在答案块中发布............您将这些值分配给 $sessionArray。我的意思是在模型或控制器或视图文件中。

您是否在视图文件中调用 var_dump($this->session->userdata) 。

为什么不在控制器中调用它并将其作为数组传递给通过控制器查看文件。

在控制器中尝试这样我将从数据库中获取 $login 数组中的用户详细信息，以在我提交用户名和密码时进行假设。

我会将这些详细信息发送到模型文件中这样的会话数组

```
$this->session->set_userdata('logged_in_user', $login); 
```

之后在控制器中，如果我想使用会话数组中的用户名，我将使用如下所示。

```
$logged_in = $this->session->userdata("logged_in_user");
$model=array();
$model['logged_in_user']=$logged_in[0]; 
```

在我分配给 $model 数组后，我喜欢在视图文件中使用它，所以我会像这样将 $model 数组从控制器传递给视图文件

```
$this->load->view('view_file_path',$model); 
```

您可以在视图文件中使用该数组，无论您希望如何从传递的数组中获取。

# git - Git合并错误“提交是不可能的，因为你有未合并的文件”

> ID：12961752
> 
> 赞同：219
> 
> 时间：2012-10-18T18:54:21.913
> 
> 标签：git, git-merge

`git pull`我在编辑之前忘记了我的代码；当我提交新代码并尝试推送时，我收到错误“无法推送”。

那时我做了一个`git pull`突出显示冲突的文件。我消除了冲突，但我不知道从这里做什么。

我再次尝试，`git commit`但它说“提交是不可能的，因为你有未合并的文件”：

> ```
> error: Committing is not possible because you have unmerged files. 
> ```

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2012-10-18T18:57:36.230

如果您已经解决了冲突，您需要使用 将文件添加到阶段`git add [filename]`，然后正常提交。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-03-16T15:57:31.963

你需要做两件事。首先添加更改

```
git add .
git stash  

git checkout <some branch> 
```

它应该解决你的问题，因为它解决了我。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-20T01:49:07.333

You can use `git stash` to save the current repository before doing the commit you want to make (after merging the changes from the upstream repo with `git stash pop`). I had to do this yesterday when I had the same problem.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-09T06:08:17.447

当您解决冲突但仍需要将文件添加到阶段区域时会发生此错误。混帐添加。会解决它。然后，尝试提交和合并。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-23T11:20:52.067

自 git 2.23（2019 年 8 月）以来，您现在有了一个捷径：`git restore --staged [filepath]`. 使用此命令，您可以忽略冲突文件，而无需添加和删除它。

例子：

```
> git status

  ...
  Unmerged paths:
    (use "git add <file>..." to mark resolution)
      both modified:   file.ex

> git restore --staged file.ex

> git status

  ...
  Changes not staged for commit:
    (use "git add <file>..." to update what will be committed)
    (use "git restore <file>..." to discard changes in working directory)
      modified:   file.ex 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-04T11:01:21.483

我有一个类似的问题，归结为删除“未合并路径”下的文件

这些文件必须使用删除`git rm`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-17T17:27:18.783

所以从上面的错误。要解决此问题，您所要做的就是还原您的代码。( `git revert HEAD`) 然后`git pull`重做您的更改，然后`git pull`再一次，并且能够提交或合并而没有错误。

# html - HTML 重定向到 about:newtab

> ID：12961754
> 
> 赞同：0
> 
> 时间：2012-10-18T18:54:30.863
> 
> 标签：html

我只是想做下面发布的内容，但打开 HTML 文件时没有任何反应。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Your Page Title</title>
<meta http-equiv="REFRESH" content="1;url=about:newtab"></HEAD>
<BODY>
Optional page text here.
</BODY>
</HTML> 
```

# facebook - Facebook Insight API 可以返回多远？

> ID：12961759
> 
> 赞同：0
> 
> 时间：2012-10-18T18:54:43.090
> 
> 标签：facebook, facebook-graph-api, facebook-insights

我一直在尝试获取 Facebook 页面的历史数据。我想知道如何确定我可以走多远。

所以我知道我可以回去一个月。这是滚动窗口吗？我也想知道我可以回去多远，而不是得到如下的 api 异常。

```
{
   "error": {
      "message": "Unsupported operation",
      "type": "FacebookApiException",
      "code": 100
   }
} 
```

是否可以获得我有权访问的给定粉丝页面的所有历史洞察数据。

谢谢，也欢迎任何可能有助于理解如何干净而稳健地做到这一点的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:52:01.017

从当天结束的 30 天开始，例如

`/278905338821044/insights/page_fans/lifetime?since=30 days ago&until=now`

响应将包含最近 30 天的数据，您可以迭代地通过最后`paging`结构中的“以前”链接回到过去

```
{
  "data": [
    {
      "id": "278905338821044/insights/page_fans/lifetime", 
      "name": "page_fans", 
      "period": "lifetime", 
      "values": [
        {
          "value": 1432, 
          "end_time": "2012-09-19T07:00:00+0000"
        }, 
         //snip
        {
          "value": 1438, 
          "end_time": "2012-10-16T07:00:00+0000"
        }
      ], 
      "title": "Lifetime Total Likes", 
      "description": "Lifetime The total number of people who have liked your Page. (Unique Users)"
    }
  ], 
  "paging": {
    "previous": "https://graph.facebook.com/278905338821044/insights/page_fans/lifetime?since=1345405748&until=1347997748", 
    "next": "https://graph.facebook.com/278905338821044/insights/page_fans/lifetime?since=1350589748&until=1353181748"
  }
} 
```

# jquery-mobile - jQuery Mobile and Knockoutjs: select list acts like multiple when the number of options exceeds some limit

> ID：12961760
> 
> 赞同：1
> 
> 时间：2012-10-18T18:54:49.410
> 
> 标签：jquery-mobile, knockout.js

我有一个绑定到 observableArray 的选择元素。当数组长度超过某个限制（我认为 3 是最小值）时，选择变成了具有多项选择的选择。发生在 iPhone 5 上。

这里的[小提琴](http://jsfiddle.net/adrian_iftode/RGWhx/3/)

这里是正在发生的事情的图像。

![在此处输入图像描述](../Images/5ab89044f42987bdae4e1003985062c8.png)

# macos - Python 3.3 在 OSX 上找不到任何 pip 安装包？

> ID：12961761
> 
> 赞同：2
> 
> 时间：2012-10-18T18:54:52.630
> 
> 标签：macos, virtualenv, pip, virtualenvwrapper, python-3.3

我最近从 Python.org 安装了 Python 3.3 DMG。

我安装了 pip、virtualenv 和 virtualenv-wrapper。

当我做：

```
$ mkvirtualenv -p /usr/local/bin/python3 someenv 
```

环境按预期创建。

然后当我进行 pip 安装时，比如说：

```
(someenv) $ pip install beautifulsoup4 
```

它安装正确（没有错误）。

然后当我启动 python 时：

```
(someenv) $ python
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import bs4
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named 'bs4' 
```

我还尝试了其他一些软件包：pytz、pymemoize、mock，并且似乎都遇到了同样的“没有名为...的模块”问题。

查看虚拟环境的站点包目录，包就在那里，只是解释器似乎找不到它们。如果我做了一个`pip freeze`所有已安装的包都列出来了。

有什么建议么？

如果有帮助，我正在使用：

*   Python 3.3（同样，从 Python.org 的 .dmg 安装）
*   点子 v1.2.1
*   虚拟环境包装器 v1.8.2
*   分发 0.6.28
*   OSX 10.7（狮子）

编辑：根据要求，输出`sys.path`为：

```
['', '/Library/Frameworks/Python.framework/Versions/3.3/lib/python33.zip', 
'/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3', 
'/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/plat-darwin', 
'/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/lib-dynload', 
'/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages'] 
```

因此缺少的是：`/Users/aparkin/.envs/someenv/lib/python3.3/site-packages'——虚拟环境的站点包目录。

编辑 2：同样，`ls -l`在 site-packages 目录上做一个给出：

```
$ ls -l .envs/someenv/lib/python3.3/site-packages/
total 168
drwxr-xr-x  7 aparkin  staff    238 18 Oct 11:49 PyMemoize-0.1.1-py3.3.egg-info
drwxr-xr-x  3 aparkin  staff    102 18 Oct 11:51 __pycache__
drwxr-xr-x  7 aparkin  staff    238 18 Oct 11:34 beautifulsoup4-4.1.3-py3.3.egg-info
drwxr-xr-x  9 aparkin  staff    306 18 Oct 11:32 bs4
drwxr-xr-x  8 aparkin  staff    272 18 Oct 11:31 distribute-0.6.28-py3.3.egg
-rw-r--r--  1 aparkin  staff    237 18 Oct 11:31 easy-install.pth
drwxr-xr-x  6 aparkin  staff    204 18 Oct 11:49 memoize
drwxr-xr-x  7 aparkin  staff    238 18 Oct 11:51 mock-1.0.0-py3.3.egg-info
-rw-r--r--  1 aparkin  staff  75204 18 Oct 11:51 mock.py
drwxr-xr-x  4 aparkin  staff    136 18 Oct 11:31 pip-1.2.1-py3.3.egg
drwxr-xr-x  9 aparkin  staff    306 18 Oct 11:44 pytz
drwxr-xr-x  8 aparkin  staff    272 18 Oct 11:44 pytz-2012f-py3.3.egg-info
-rw-r--r--  1 aparkin  staff     30 18 Oct 11:31 setuptools.pth 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:42:48.973

Python 3.3 的一个新特性是创建和管理虚拟环境的标准方法[pyvenv](http://docs.python.org/py3k/library/venv.html#module-venv)。您应该改用它。

也就是说，您仍然应该能够进行旧`virtualenv`工作。要检查的一件事是使用失败`sys.path`的 virtualenv 时的值。`python`您应该在其上看到 virtualenv`site-packages`目录。如果是这样并且导入仍然不起作用，请检查 virtualenv lib 目录，包括`site-packages`正确的文件权限。

更新：virtualenv 的内容`site-packages`乍一看是合理的。但 的 值`sys.path`看起来 像 标准 的 可疑 的`python3.3`, 不是 从 一个 运行 的`virtualenv`。所以检查以确保你真的在使用那个。尝试使用绝对路径运行 virtualenv python，例如：

```
/path/to/someenv/bin/python3.3 -c 'import sys;print(sys.executable);print(sys.path)' 
```

还要确保您没有设置与 Python 相关的环境变量，`PYTHONPATH`例如`python`.

```
env | grep PYTHON
echo $PATH
which python
type python 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T04:31:21.643

我认为这是因为您`alias`在终端中设置了一个 for python 。

如果您使用zsh，只需使用编辑器（例如vim）打开`~/.zshrc`，并删除python的别名，然后`source ~/.zshrc`在您的终端中运行或关闭终端窗口并重新打开它。

如果不使用zsh，原理是一样的，删除别名即可。

这将解决您的问题。

# jakarta-ee - EJB 3.1 中的简单身份验证

> ID：12961768
> 
> 赞同：2
> 
> 时间：2012-10-18T18:55:12.757
> 
> 标签：jakarta-ee, authentication, glassfish, ejb, ejb-3.1

我有一个 EJB 3.1 应用程序和与该应用程序连接的 java 客户端。我需要创建用户身份验证。

例子：

```
class LoginBean{

public remoteLogin(String login, String password){
  // create user context with user ID
}
}

class BeanAbc{
  public remoteSecureMethod(){
      // get user context - if no context throw error
      // get user ID/login from user context and do some additional logic..
  }
} 
```

用户凭据存储在数据库中。我正在使用 Glassfish 服务器。如何存储用户上下文？什么是最好的解决方案？有没有简单的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:57:22.470

基本上（据我所知）EJB 3.1 中的客户端应用程序安全性仍然与 2.x 中的一样，因此您应该找到示例。

您需要设置的内容：

*   服务器端的 jaas 登录模块（正如您在 Web 应用程序中看到的那样）
*   确定如何处理身份验证的客户端属性文件
*   客户端回调，为客户端身份验证过程提供凭据
*   使用类路径上的属性文件启动客户端

这是 jboss-as 的示例，但我认为您可以将其翻译到其他服务器，因为这个想法是通用的：

```
# file auth.conf on the client 
adb {
   // jBoss LoginModule
   org.jboss.security.ClientLoginModule  required
   ;
}; 
```

这基本上说对于登录上下文`adb`，客户端登录模块需要成功。此上下文`adb`链接到服务器端的相应应用程序 jaas 上下文。

在代码中，您像这样设置登录：

```
CallbackHandler cbh =
    new LoginCallbackHandler(user,pass.toCharArray());
try {
    LoginContext lc = new LoginContext("adb",cbh); 
    lc.login();  // <--- triggers the show in the client
}
catch (LoginException e) {
    System.err.println("Login failed: "+e.getMessage());
} 
```

在 LoginContext 中，您`adb`从上面的 auth.conf 文件中提供上下文。

`LoginCallbackHandler`可能看起来像这样：

```
package de.bsd.adb.client;
import java.io.IOException;
import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.NameCallback;
import javax.security.auth.callback.PasswordCallback;
import javax.security.auth.callback.UnsupportedCallbackException;

public class LoginCallbackHandler implements CallbackHandler {
  private String user;
  private char[] pass;
  // Konstruktor
  LoginCallbackHandler(String username,char[] password) {
    user=username;
    pass=password;
  }
// handle() does the real work and is invoked from the client container
  public void handle(Callback[] callbacks)
    throws IOException, UnsupportedCallbackException
  {
    // Iterate over the call backs
    for (int i =0 ; i< callbacks.length; i++)
    {
      // NameCallback -> pass Login-Name 
      if (callbacks[i] instanceof NameCallback)
      {
        System.out.println("NameCallback");
        NameCallback nc = (NameCallback)callbacks[i];
        nc.setName(user);
      }
      // PasswordCallback -> pass Password
      else if (callbacks[i] instanceof PasswordCallback)
      {
        System.out.println("PasswordCallback");
        PasswordCallback pc =
            (PasswordCallback)callbacks[i];
       pc.setPassword(pass);
      }
      else {  // unknown callback            
         throw new UnsupportedCallbackException(callbacks[i],"Ouch");
     }}} 
```

现在您可以启动您的客户端程序

```
java -Djava.security.auth.login.config=/path/to/auth.conf -cp bla my.Main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T07:14:20.327

您绝对应该看看**Spring Security**，它是 Java EE 应用程序事实上的标准安全框架。即使你一开始只使用框架的一小部分，它也会让你走上正轨，让你根据需要发展（如果你想切换身份验证方法、管理授权等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:21:38.007

我想补充@Heiko Rupp 提供的答案 - 他提供的代码将作为独立应用程序运行良好。如果您使用的是应用程序服务器，您应该检查如何使用应用程序服务器配置来配置 JAAS 模块。
例如，在[oVirt](http://www.ovirt.org)开源项目中，我们正在使用 Kerberos 登录模块。
我们目前使用的是 JBoss AS 7。
我们通过在 security-domains 部分下定义一个 security-domain 来配置standalone.xml 配置文件 -

```
 <security-domain name="EngineKerberosAuth">
                    <authentication>
                        <login-module code="com.sun.security.auth.module.Krb5LoginModule" flag="required"/>
                    </authentication>
                </security-domain> 
```

# java - 如何使用 CodeModel 的 JExpr.plus 方法删除不必要的括号？

> ID：12961769
> 
> 赞同：1
> 
> 时间：2012-10-18T18:55:12.803
> 
> 标签：java, sun-codemodel

我正在使用`JExpr.plus()`方法来形成一个字符串，在语法上它是正确的，但它有很多括号。例如：

```
JExpr.lit("ONE").plus(JExpr.lit("TWO")).plus(JExpr.lit("THREE")) 
```

返回

```
(("ONE" + "TWO") + "THREE") 
```

我希望它是

```
"ONE" + "TWO" + "THREE" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:20:24.090

看起来现在使用 codemodel 你无法避免添加括号。加号 (+) 被认为是一个 BinaryOp，它使用以下类生成其代码：

内`com.sun.codemodel.JOp`：

```
static private class BinaryOp extends JExpressionImpl {

    String op;
    JExpression left;
    JGenerable right;

    BinaryOp(String op, JExpression left, JGenerable right) {
        this.left = left;
        this.op = op;
        this.right = right;
    }

    public void generate(JFormatter f) {
        f.p('(').g(left).p(op).g(right).p(')');
    }

} 
```

注意`f.p('(')`和`.p(')')`。括号的添加已包含在代码中，无法避免。话虽如此，您可以更改 codemodel 来做您需要的事情，因为它是开源的。就个人而言，我不认为有必要，因为括号在其他情况下很有用。

# c# - HttpModule 请求正文导致超时

> ID：12961774
> 
> 赞同：2
> 
> 时间：2012-10-18T18:55:45.190
> 
> 标签：c#, .net, inputstream, httpmodule

我有一些格式错误（混淆）的 JSON 流量从外部合作伙伴进入我们的 IIS 7.5 服务器，这导致在尝试反序列化时引发异常。此特定内容在 JSON 正文中具有一定的签名，即`{"a":[...] }`省略号是许多其他带有值的单字母键。

我创建了一个 HttpModule 来过滤掉这些传入的请求，它工作正常，并且与格式错误的 JSON 相关的异常消失了。唯一的问题是，每当我深入研究请求正文的内容时，我注意到服务器报告的 500 级超时缓慢但稳定地上升（如下所示）。它们并不广泛，每台服务器每分钟只有大约 5 个，我们每分钟处理 10k+ 个请求。

以下是该模块的大部分代码：

```
 // read in the stream
        byte[] streamBuffer = new byte[app.Context.Request.InputStream.Length];

        ...

        app.Context.Request.InputStream.Read(streamBuffer, 0, readLength);
        app.Context.Request.InputStream.Position = 0;
        string body = "";
        body = Encoding.ASCII.GetString(streamBuffer, 0, readLength);

        ...

        // compare it to bad JSON
        matchesBadRequest = body.StartsWith(BAD_JSON_REQUEST, StringComparison.OrdinalIgnoreCase);

        ...

        // if signature matches, send back a 500 error.
        app.Context.Response.StatusCode = 500;
        app.Context.ApplicationInstance.CompleteRequest(); 
```

这是我为隔离问题所做的工作：

*   我已经注释掉了阅读正文，并且没有超时（除了，当然，从来没有匹配），所以这让我非常有信心这是一个关键领域。

*   我已经取出了匹配检查，以防万一慢速字符串匹配是什么减慢了速度。我什`readLength`至将大小保持在 6 个字符，因为这让我对签名匹配有足够的信心，所以我不想消耗整个身体。

*   我已经取出响应状态代码并在找到匹配项时完成请求（让异常通过），但它仍然导致超时。

*   我已将响应状态代码更改为 400 甚至 200，但我仍然得到相同数量的 500 级超时。附带说明一下，每分钟大约有 300 多个错误的 JSON 调用通过，因此它与大约每分钟 5 次的超时无关。

考虑到这一点，我想知道对于某些可能具有短 TTL 的请求，读取流是否只是使进程减慢了太多，并且我们开始看到所描述的问题，因为它们也一直在等待长。我无法确定正在超时的确切请求，所以我试图看看是否有任何可以在流读取级别完成的事情。

[由于此处描述](https://stackoverflow.com/questions/1678846/)的原因，我没有使用 StreamReader 来解析正文。

提前致谢。非常欢迎任何帮助！

# r - 根据R中的结果截断数据框列字符并更新图例

> ID：12961775
> 
> 赞同：1
> 
> 时间：2012-10-18T18:55:44.953
> 
> 标签：r, legend

我正在编写一个包含数据框的 R 脚本。数据框具有以下外观：

```
mydf <= read.csv('file', header = TRUE, sep=",")

mydf
....Prod  Date                   AVG
189 CA123 2012/07/24 14:32:35   0.2424     0.22     0.25     0.27
190 JK489 2012/08/25 18:29:08   0.2402     0.22     0.25     0.27
191 CA15K 2012/07/24 13:49:07   0.2427     0.22     0.25     0.27
192 JA45A 2012/07/22 02:32:40   0.2455     0.22     0.25     0.27
193 JA3HS 2012/07/24 22:26:25   0.2410     0.22     0.25     0.27
194 CA429 2012/08/28 10:36:16   0.2351     0.22     0.25     0.27
195 JK345 2012/07/25 07:11:24   0.2419     0.22     0.25     0.27
... 
```

我正在使用此代码来绘制数据：

```
plot(Date,mydf$AVG,xlab='Date',ylab='AVG',main='title')
legend("topright", legend = c(" "," "), text.width = strwidth("1,000,000"), lty = 1:2, xjust = 1, yjust = 1, title = "Prods") 
```

情节运行良好，但我无法将图例格式设置为下来。我想要做的是在右上角放置一个图例，将每个 Prod 显示为图表上的不同颜色数据点；但是，Prod 也需要被截断，并且只计为列中的前两个字符。

我知道我可以通过运行“mydf$Prod”来访问所有变量，但是有没有办法将该框架引用中的每个项目截断为仅两个字符。我尝试使用round，但我无法执行任何数学运算，这是有道理的。

有没有办法截断这些变量，然后将它们粘贴到保持截断格式的图例中。图例需要是动态的，因为 Prod 不断变化，我在不同的文件上运行脚本。

**附加一项：**理想情况下，我希望仅使用标准库来完成。我目前没有使用 ggplot 或任何其他图形库，因为我创建的图形很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:20:38.993

试试这个：

```
mydf$Labels = substr(mydf$Prod, 1, 2)
f = factor(mydf$Labels)
l = levels(f)
plot(mydf$Date, mydf$Avg, xlab="Date", ylab="Avg", col=f)
legend("topright", legend = l, fill = 1:length(l), title = "Prods") 
```

# ajax - RequiredFieldValidator 在 AJAX 更新面板中不起作用

> ID：12961777
> 
> 赞同：1
> 
> 时间：2012-10-18T18:55:55.343
> 
> 标签：ajax, textbox, requiredfieldvalidator

我有一个文本框，当用户填写该框并点击返回时，它会自动回发，并且更新面板在那里只是刷新文本框所在的页面部分。

我已在该文本框中附加了一个 requiredfieldvalidator，如果用户在进入向导控件的下一步时未完成该框，则需要触发该框。

问题是验证器没有触发，我不明白为什么？这是 ASP 中的错误还是我需要在更新面板中进行其他验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-03T22:24:05.290

我对模态和 UpdatePanel 有同样的问题，**您必须将**requirefilevalidator 属性添加为 ValidationGroup="groupvalidationX"，对于 Button 也是如此：

```
<asp:UpdatePanel runat="server">
    <ContentTemplate>                                                       
        <asp:RequiredFieldValidator runat="server" ID="rfvtxtClave" ForeColor="Red" 
            ControlToValidate="txtClaveDependencia" Display="Dynamic" 
            ErrorMessage="Rellena este campo" SetFocusOnError="true" 
            ValidationGroup="validacionesDependencia">
        </asp:RequiredFieldValidator>

        <asp:TextBox runat="server" ID="txtClaveDependencia" MaxLength="10" 
            autocomplete="off" placeholder="Clave de la dependencia" 
            Style="display: inline" CssClass="form-control tb8">
        </asp:TextBox>
    </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="btnGuardarDependencia" />
    </Triggers>
</asp:UpdatePanel>                                  
<asp:Button runat="server" ID="btnGuardarDependencia" 
    CssClass="btn btn-block botonAfirmacion" 
    ValidationGroup="validacionesDependencia" 
    Text="Guardar dependencia" CausesValidation="true" 
    OnClick="btnGuardarDependencia_Click" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:01:07.310

因为 AutoPostBack 设置为 true，所以我相信客户端验证过程无法在需要时触发。

尝试添加`CausesValidation="True"`到文本框。

# javascript - 我自制的旋转木马效果很好，但在 IE 中不行

> ID：12961779
> 
> 赞同：0
> 
> 时间：2012-10-18T18:56:14.670
> 
> 标签：javascript, jquery

我在 jQuery 中制作了一个非常简单的轮播，它在除 IE 之外的所有浏览器上都运行良好，它卡在第一个`div`，

这是我的功能：

```
var Tcar='';
function carrousel(sens,loop){
    var indice=0;

    $(".imgDiapo").each(function(){
        if($(this).css("display")=="block"){
            indice=$(this).index();
        }
    });

    if(sens=="next") {indice++; }
    else{indice --; }

    if(indice> $(".imgDiapo").length-1) {indice=0; }

    $(".imgDiapo").fadeOut(300);
    $(".imgDiapo:eq("+indice+")").fadeIn(300);

    $(".pDroite").fadeOut(0);
    $(".pDroite:eq("+indice+")").fadeIn(300);
    if(loop=="loop") Tcar=setTimeout( function(){carrousel(sens,loop)},3500);
} 
```

我的 jsfiddle 例如： http: [//jsfiddle.net/jrMqR/](http://jsfiddle.net/jrMqR/) 和在线结果：[http ://lapasserelle-massage.fr/index.php](http://lapasserelle-massage.fr/index.php)

# .net - 可移植类库 Contrib 在重新分发的库中

> ID：12961784
> 
> 赞同：0
> 
> 时间：2012-10-18T18:56:31.083
> 
> 标签：.net, silverlight, dll, portable-class-library

[我在PCL Contrib](http://pclcontrib.codeplex.com/ "PCL 贡献")的帮助下创建了一个可移植类库。为了使 PCL Contrib 正常工作，我了解您还必须包含适当的 Portable。项目中将使用可移植类库的*平台*.dll（*平台是 Desktop、Silverlight 等）。*我创建的 PCL 将被重新分发，我想通过不要求任何使用 PCL 的人必须包含多个 DLL 来使其工作来简化它的使用。有没有办法可以滚动 PCL DLL，即 Portable。*平台*DLL 和其他特定于平台的抽象（参见[PCL 平台抽象](http://msdn.microsoft.com/en-us/library/gg597391.aspx#abstraction "PCL 平台抽象")）到每个平台的单个 DLL 中？

我想继续使用 PCL，以将我的大部分代码保留在一个可管理的区域中，即使它需要（在某种程度上）拆分为特定于平台的包。我觉得这将尽可能多地重用代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:02:07.217

我看到了几个不同的选项：

1）您可以使用 ILMerge 将所有二进制文件合并为一个二进制文件。您需要更改 PCLContrib 以识别这种新模式。

2) 从 PCLContrib 获取您需要的源代码，并将其用作库的实现细节。同样，您可能需要稍作修改。

3）利用 NuGet 使这更容易。我将很快将 PCLContrib 放在 NuGet 上，如果您的可再发行组件是简单的 NuGet 包，并且依赖于 PCLContrib 包，NuGet 将自动使消费者项目引用所有正确的二进制文件。

# mysql - 循环联合所有

> ID：12961785
> 
> 赞同：1
> 
> 时间：2012-10-18T18:56:34.517
> 
> 标签：mysql

我正在编写一个存储过程，它将按酒精类别和工作编号显示是/否计数。我开始通过联合对当前的类别（葡萄酒、啤酒、威士忌）进行编程，但提前考虑可能会有更多类别，并且我想象这个代码的大小会越来越大。是否可以在循环中执行联合，然后传递酒精类别参数？在互联网上大肆浏览，在这个主题上看到的很少，所以任何帮助或指导将不胜感激。

我的代码的开始......

```
delimiter $$
create procedure alc_cat_yn (in jid int)
begin
select
cast(concat(jobid,' - Wine') 
as char(50)) as `Job Number - Consumed Yesterday`
,sum(case when wine_id=1 then 1 else 0 end) as y
,sum(case when wine_id=2 then 1 else 0 end) as n
from demos
where jobid=jid
group by jobid
union all
select
cast(concat(jobid,' - Beer') 
as char(50)) as `Job Number - Consumed Yesterday`
,sum(case when beer_id=1 then 1 else 0 end) as y
,sum(case when beer_id=2 then 1 else 0 end) as n
from demos
where jobid=jid
group by jobid
union all
select
cast(concat(jobid,' - Whisky') 
as char(50)) as `Job Number - Consumed Yesterday`
,sum(case when whisky_id=1 then 1 else 0 end) as y
,sum(case when whisky_id=2 then 1 else 0 end) as n
from demos
where jobid=jid
group by jobid;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:30:28.647

理论上，您可以有一个循环，它在循环中构建查询字符串并将其作为准备好的语句执行。但是，这样做是不好的做法。相反，您应该避免为不同的酒精类别设置不同的列。使用具有多行的单列。每行将包含工作标识、酒精类别和一个值（例如 1 或 2）。

我有点困惑为什么您的列被称为`*_id`，因为您似乎存储了一些是/否信息，而不是另一个表中某行的标识符。您可能希望选择一个较少误导的名称。

对于类别，您可以使用`enum`，或存储在字符串中的名称，或引用列出您的种类的其他表的主键的数字。这`enum`将意味着每个新类别都需要更改数据库模式。字符串可能会消耗大量内存，尤其是在您选择长名称时。因此，对另一个表的引用是最灵活的解决方案，从长远来看可能是您的最佳选择。

您仍然可以基于扩展表将当前结构作为视图提供。如果您为重组表使用新名称，并为此视图重用当前名称，则可以保持与现有代码的向后兼容性。

*小提示：MySQL 使用 0 或 1 来表示布尔值。因此，`case when foo=bar then 1 else 0 end`您可以简单地写而不是写`foo=bar`。这将使您的代码更短。Otoh，它也会使乍一看更难阅读，所以最好在某处对此用途发表评论。*

# android - 只能在 facebook 请求之前向 Bundle 添加一个参数

> ID：12961788
> 
> 赞同：2
> 
> 时间：2012-10-18T18:56:41.193
> 
> 标签：android, facebook, api, facebook-graph-api, bundle

我第一次弄乱了 facebook graph api，遇到了一个其他人不会发生的问题。如果这是重复的，我很抱歉。

```
Bundle searchParams = new Bundle();
searchParams.putString("q", "coffee");
searchParams.putString("type", "place");

String response = facebook.request("search", searchParams); 
```

在上面的代码中，我试图复制 facebook 在他们的开发者图形 api 页面上搜索咖啡场所的示例。发生的有趣的事情是当我传入 Bundle 时，我已经设置了这两个参数。

```
public String request(String graphPath, Bundle params, String httpMethod)
        throws FileNotFoundException, MalformedURLException, IOException {
    params.putString("format", "json");
    if (isSessionValid()) {
        params.putString(TOKEN, getAccessToken());
    }
    String url = (graphPath != null) ? GRAPH_BASE_URL + graphPath
                                     : RESTSERVER_URL;
    return Util.openUrl(url, httpMethod, params);
} 
```

当我逐步执行 facebook 请求函数（见上图）时，我注意到我放入的第一个参数在放入 access_token 后从 Bundle 中弹出。这导致我的 Bundle 仅包含 {"type", "place"} ，以及 facebook 的参数。通过调试器，我注意到阈值设置为 3。我猜这是我的问题，但不知道如何或在哪里改变它。

有什么想法吗？

更新：我无法弄清楚我遇到的问题。但是在升级到 facebook sdk 3.0b 时能够做我需要的事情。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:43:56.783

我可以做到这一点，我像这样调用请求函数。

```
String response = facebook.request("search", searchParams,"GET"); 
```

# smarty - 操作从 db 调用返回的数据，然后分配给模板 var

> ID：12961789
> 
> 赞同：0
> 
> 时间：2012-10-18T18:56:46.133
> 
> 标签：smarty, prestashop

我是 smarty 和 prestashop 的新手。我正在构建一个快速、肮脏的模块，它可以提取特定类别的 cms 页面：

```
$result = Db::getInstance()->executeS('SELECT * 
FROM ps_cms_lang
INNER JOIN ps_cms ON ps_cms_lang.id_cms = ps_cms.id_cms
WHERE ps_cms.id_cms_category =2
AND id_lang =1
LIMIT 0 , 30');

$smarty->assign('news', $result); 
```

到目前为止，这一切都是花花公子。事情是我想在将这些数据分配给模板变量（新闻）之前对其进行格式化。我该怎么做呢？$result 变量中返回 6 个字段。我如何获得它们并做我需要的（这实际上只是截断返回的描述字段中的一些文本）来做然后将它们打包备份以进行分配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:00:59.777

您可以使用 $result 作为数组，例如：$result['id_cms']。

# javascript - 如何禁用在移动 Safari 上触摸并按住出现的放大镜？

> ID：12961792
> 
> 赞同：2
> 
> 时间：2012-10-18T18:56:56.387
> 
> 标签：javascript, ipad, mobile, safari, mobile-safari

如何禁用在移动 Safari 上触摸并按住出现的放大镜？

我无法通过 javascript 阻止事件（ontouchstart）发生，因为我需要在要禁用放大镜的区域中滚动功能。

我已阅读以下内容应该有效，但它没有。 [防止放大镜出现](https://stackoverflow.com/questions/6332750/preventing-magnifier-to-appear) [在移动 Safari / Webkit 上的触摸按住时禁用文本突出显示放大镜](https://stackoverflow.com/questions/923782/disable-the-text-highlighting-magnifier-on-touch-hold-on-mobile-safari-webkit)

```
:not(input) {
-webkit-touch-callout: none;
-webkit-user-select: none;    
} 
```

我还试图避免使用 JavaScript 滚动库，而只是使用 JavaScript 禁用该事件。

任何帮助将不胜感激。

# django - 如何摆脱tastepie django中API url中的版本信息？

> ID：12961793
> 
> 赞同：0
> 
> 时间：2012-10-18T18:56:57.770
> 
> 标签：django, api, rest, tastypie

我正在为使用 Tastypie 和 Django 的应用程序创建基于 REST 的 API。问题是 Tastypie 中的默认 API url 包含 url 模式中的版本信息，即

`http://lx:3001/api/v1/vservers/?username=someuser&api_key=someapikey`

我希望我的网址不受 API 版本信息的影响，如下所示：

`http://lx:3001/api/vservers/?username=someuser&api_key=someapikey`

# 网址.py

```
v1_api = Api()
v1_api.api_name = ''
v1_api.register(UserResource())
...
url(r'^api/', include(v1_api.urls)), 
```

我仍然用空字符串覆盖 api_name

`http://lx:3001/api/vservers/?username=someuser&api_key=someapikey`不起作用。

我怎样才能完全摆脱版本信息？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:01:03.627

子类化`Api`并覆盖`urls`以删除所有与 -`api_name`相关的位：

```
class MyApi(Api):
    @property
    def urls(self):
        """
        Provides URLconf details for the ``Api`` and all registered
        ``Resources`` beneath it.
        """
        pattern_list = [
            url(r"^%s$" % trailing_slash(), self.wrap_view('top_level'), name="api_top_level"),
        ]

        for name in sorted(self._registry.keys()):
            pattern_list.append((r"^/", include(self._registry[name].urls)))

        urlpatterns = self.override_urls() + patterns('',
            *pattern_list
        )
        return urlpatterns 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T20:39:00.553

尽管 sweetpie 使提供`api_name`可选，但未能提供一个简单地默认`api_name`为`"v1"`. 可以通过子类`Api`化和覆盖`urls`内部属性来修改此行为，`api.py`使其行为独立于`api_name`. 但是，为了实现所需的 URLconf，@dokkaebi 的解决方案仍有一个更正值得注意：

```
pattern_list.append((r"^/", include(self._registry[name].urls))) 
```

应该改为：

```
pattern_list.append((r'', include(self._registry[name].urls))) 
```

为了避免`//`将您的客户引向

`http://lx:3001/api//vservers/?username=someuser&api_key=someapikey` 代替 `http://lx:3001/api/vservers/?username=someuser&api_key=someapikey` 预期的。

为方便起见，我在下面包含了修改后的代码。

## 解决方案

```
class MyApi(Api):
"""
An API subclass that circumvents api_name versioning.
"""
@property
def urls(self):
    """
    Provides URLconf details for the ``Api`` and all registered
    ``Resources`` beneath it.
    """
    pattern_list = [
        url(r"^%s$" % trailing_slash(), self.wrap_view('top_level'), name="api_top_level"),
    ]

    for name in sorted(self._registry.keys()):
        pattern_list.append((r'', include(self._registry[name].urls)))

    urlpatterns = self.override_urls() + patterns('',
        *pattern_list
    )
    return urlpatterns 
```

## 习俗

Django 的核心理念之一是 URL 应该是漂亮的；干净、优雅的 URL 方案是任何高质量 Web 应用程序的重要细节。关于这种方法的有效性，使用自定义请求标头或接受标头将完成版本控制工作，而不会使方案与（主观上）丑陋的 v1/. 这并不是说 URL 版本控制策略没有任何警告。但是，它的响应速度很快并且可以预测。

# excel - 如何根据id复制excel中的部分动态表？

> ID：12961794
> 
> 赞同：0
> 
> 时间：2012-10-18T18:57:06.620
> 
> 标签：excel, excel-2003, vba

我在工作表中有 2 个动态表

```
    项目 ID | 开始 | 结束 | 员工 | 姓名 | 数量
    -------------------------------------------------- --------
    5013-001 | 12-01-01 | 13-01-01 | 001 | 鲍勃 | 100 美元
                                    | 021 | 富 | 200 美元
                                    | 101 | 酒吧 | 300 美元
                                    | 111 | 卢克 | 300 美元
    -------------------------------------------------- --------
    总计 5013-001 900 $
    -------------------------------------------------- --------
    5013-002 | 12-01-01 | 13-01-01 | 001 | 鲍勃 | 150 美元
                                    | 021 | 富 | 205 美元
    -------------------------------------------------- --------
    总计 5013-002 355 $

    --剪断--

```

```
    项目 ID | 费用代码 | 全部的
    --------------------------------------
    5013-001 | T01 总结 | 4504$
               | D01 总结 | 204 美元
    总计 5013-001 | 4708$
    --------------------------------------
    5013-002 | T01 总结 | 1007 美元
    总计 5013-002 | 1007 美元

    --剪断--

```

预期结果 ：

```
    项目 ID | 开始 | 结束 | 员工 | 姓名 | 数量
    -------------------------------------------------- --------
    5013-001 | 12-01-01 | 13-01-01 | 001 | 鲍勃 | 100 美元
                                    | 021 | 富 | 200 美元
                                    | 101 | 酒吧 | 300 美元
    -------------------------------------------------- --------
    总计 5013-001 600 $
    -------------------------------------------------- --------

    项目 ID | 费用代码 | 全部的
    --------------------------------------
    5013-001 | T01 总结 | 4504$
               | D01 总结 | 204 美元
    总计 5013-001 | 4708$
    --------------------------------------

    - 分页符 - 

```

您将如何继续让两个表都按 projectId 过滤，每个表都在一页上？（列数是固定的，但不是行数！）

我猜是一个宏，但我虽然可能有更简单的东西。

如果我确实应该使用宏，引擎是否足够强大？我从未编写过 excel 宏，所以我很乐意接受任何提示/参考。

最后一个*主观*问题：你认为这个问题可以在大约 1 个工作日内解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:45:49.267

您的个人资料说您编程，所以我认为问题是您不知道 VBA 语法。我对您的表格做出了假设，但我也假设如果我的假设不正确，您可以修改我的代码。

我在工作表 TblSrc 中创建了您的数据副本。

表格1：

![来源表1](../Images/20638c5b81095e441d07ef0cebd47cd4.png)

表 2：

![来源表2](../Images/29f005325fc12be3ad861300b95bc6f5.png)

我复制了这些行，因此每个主表中有八个子表。该代码依赖于两个主表之间的一对一匹配。我不检查两个子表是否匹配。这对于任何实际时间来说都不够数据，但值得一提的是，下面的宏需要 0.03 秒来复制四对子表来创建：

![目标表](../Images/f3324fe43274ce0a216b5ecc6b5c1008.png)

我通过合并单元格来创建连字符行，将第一个单元格设置为 '- 并将水平对齐设置为 Fill。我通过检查 A 列的第一个字符是否为连字符来识别分隔符行。连字符前的单引号是为了阻止它看起来像一个无效的负数。它不是单元格值的一部分。

此宏不是解决此问题的最快方法，但会将子表中的任何格式从源复制到目标。

宏中有一些注释，但可能还不够。我建议您使用 F5（运行到下一个断点）和 F8（执行下一个语句）逐步执行宏。

带着问题回来，我会改进答案。如果您可以提供有关您的数据的更多信息，我可能会向您展示其他方法。

警告现在是 21:45，我不确定我明天的互联网访问情况。我会尽快回答问题。

选项显式 Sub CombineTables()

```
 Dim CellValue() As Variant
 Dim ColCrnt As Long
 Dim ColMax As Long
 Dim Found As Boolean
 Dim RngStgHeader1 As String
 Dim RngStgHeader2 As String
 Dim RngStgHeaderX As String
 Dim RowDestCrnt As Long
 Dim RowSrcSubTab1End As Long
 Dim RowSrcSubTab1Start As Long
 Dim RowSrcSubTab2End As Long
 Dim RowSrcSubTab2Start As Long
 Dim RowSrcTab1Crnt As Long
 Dim RowSrcTab2Crnt As Long
 Dim RowSrcTab1End As Long
 Dim RowSrcTab1Start As Long
 Dim RowSrcTab2End As Long
 Dim RowSrcTab2Start As Long
 Dim timeStart As Double

  Application.EnableEvents = False   ' Prevents any event routine being called
  Application.ScreenUpdating = False ' Screen updating causes flicker and is slow

  timeStart = Timer     ' Seconds since midnight

 ' Gather information from source worksheet
 With Worksheets("TblSrc")

   ' These statements find the last row and the last column containing a value
   RowSrcTab2End = .Cells.Find("*", .Range("A1"), xlFormulas, , _
                                                       xlByRows, xlPrevious).Row
   ColMax = .Cells.Find("*", .Range("A1"), xlFormulas, , _
                                                 xlByColumns, xlPrevious).Column

   CellValue = .Range(.Cells(1, 1), .Cells(RowSrcTab2End, ColMax)).Value
   ' CellValue is now a 2D array containing every value from the used range.
   ' The first dimension will be for the rows and the second for the columns.
   ' The lower bound of each dimension will be 1\.  The upper bounds will be
   ' RowSrcTab2End and ColMax.  Having the rows as the first dimension is
   ' unusual is the nature of arrays loaded from or to a worksheet.

   ' I did not have to copy the data to an array.  I could have done so
   ' because I believe searching for sub tables will be sufficiently faster
   ' to make this a sensible choice.

 End With

 ' Find the start of the main tables.
 For RowSrcTab1Crnt = 1 To RowSrcTab2End
   If CellValue(RowSrcTab1Crnt, 1) = "projectId" And _
      CellValue(RowSrcTab1Crnt, 2) = "start" Then
      RowSrcTab1Start = RowSrcTab1Crnt
      Exit For
   End If
 Next

 For RowSrcTab2Crnt = RowSrcTab1Crnt + 1 To RowSrcTab2End
   If CellValue(RowSrcTab2Crnt, 1) = "projectId" And _
      CellValue(RowSrcTab2Crnt, 2) = "expenseCode" Then
      RowSrcTab2Start = RowSrcTab2Crnt
      Exit For
   End If
 Next

 RowSrcTab1End = RowSrcTab2Start - 1

 ' Output values found to the Immediate window as a check
 Debug.Print "Table 1 rows: " & RowSrcTab1Start & " - " & RowSrcTab1End
 Debug.Print "Table 2 rows: " & RowSrcTab2Start & " - " & RowSrcTab2End

 With Worksheets("TblDest")
   ' Clear current contents of destination sheet
   .Cells.EntireRow.Delete
 End With

 ' Build range strings for table headers because
 ' they are needed for every projectId
 RngStgHeader1 = "A" & RowSrcTab1Start & ":" & _
                                 ColNumToCode(ColMax) & RowSrcTab1Start
 RngStgHeader2 = "A" & RowSrcTab2Start & ":" & _
                                 ColNumToCode(ColMax) & RowSrcTab2Start

 RowSrcTab1Crnt = RowSrcTab1Start + 1  ' \ Start point for search
 RowSrcTab2Crnt = RowSrcTab2Start + 1  ' / for first sub tables
 RowDestCrnt = 1  ' Position for first output sub tables

 Do While True

   ' Search for start of next sub table 1
   Found = False
   Do While RowSrcTab1Crnt < RowSrcTab2Start
     If CellValue(RowSrcTab1Crnt, 1) <> "" And _
        Left(CellValue(RowSrcTab1Crnt, 1), 1) <> "-" Then
       ' Assume next table 1 row with column A not empty and not starting
       ' with a hyphen is the start of next table 1 sub table
       Found = True
       RowSrcSubTab1Start = RowSrcTab1Crnt
       RowSrcTab1Crnt = RowSrcTab1Crnt + 1  ' Prepare for search for end
       Exit Do
     End If
     RowSrcTab1Crnt = RowSrcTab1Crnt + 1
   Loop
   If Not Found Then
     ' No next sub table 1 found.  All done.
     Exit Do
   End If

   ' Search for end of this sub table 1
   Found = False
   Do While RowSrcTab1Crnt < RowSrcTab2Start
     If LCase(Left(CellValue(RowSrcTab1Crnt, 1), 5)) = "total" Then
       Found = True
       RowSrcSubTab1End = RowSrcTab1Crnt
       RowSrcTab1Crnt = RowSrcTab1Crnt + 1  ' Prepare for next loop
       Exit Do
     End If
     RowSrcTab1Crnt = RowSrcTab1Crnt + 1
   Loop
   If Not Found Then
     ' End of table not found.  Either data error or program error
     Debug.Assert False     ' Interpreter will stop here to allow
                            ' examination of variables
     Exit Do
   End If

   ' Search for start of next sub table 2
   Found = False
   Do While RowSrcTab2Crnt < RowSrcTab2End
     If CellValue(RowSrcTab2Crnt, 1) <> "" And _
        Left(CellValue(RowSrcTab2Crnt, 1), 1) <> "-" Then
       ' Assume next table 2 row with column A not empty and not starting
       ' with a hyphen is the start of next table 2 sub table
       Found = True
       RowSrcSubTab2Start = RowSrcTab2Crnt
       RowSrcTab2Crnt = RowSrcTab2Crnt + 1  ' Prepare for search for end
       Exit Do
     End If
     RowSrcTab2Crnt = RowSrcTab2Crnt + 1
   Loop
   If Not Found Then
     ' No next sub table 2 found.  Have table 1 so have data or program error.
     Debug.Assert False     ' Interpreter will stop here to allow
                            ' examination of variables
     Exit Do
   End If

   ' Search for end of this sub table 2
   Found = False
   Do While RowSrcTab2Crnt < RowSrcTab2End
     If LCase(Left(CellValue(RowSrcTab2Crnt, 1), 5)) = "total" Then
       Found = True
       RowSrcSubTab2End = RowSrcTab2Crnt
       RowSrcTab2Crnt = RowSrcTab2Crnt + 1  ' Prepare for next loop
       Exit Do
     End If
     RowSrcTab2Crnt = RowSrcTab2Crnt + 1
   Loop
   If Not Found Then
     ' End of table not found.  Either data error or program error
     Debug.Assert False     ' Interpreter will stop here to allow
                            ' examination of variables
     Exit Do
   End If

   ' Have start and end of next sub tables.

   ' Copy header row for table 1
   Worksheets("TblSrc").Range(RngStgHeader1).Copy _
                     Destination:=Worksheets("TblDest").Cells(RowDestCrnt, 1)
   RowDestCrnt = RowDestCrnt + 1
   ' Copy sub table 1 plus rows before and after which should be dividing rows
   RngStgHeaderX = "A" & RowSrcSubTab1Start - 1 & ":" & _
                                   ColNumToCode(ColMax) & RowSrcSubTab1End + 1
   Worksheets("TblSrc").Range(RngStgHeaderX).Copy _
                      Destination:=Worksheets("TblDest").Cells(RowDestCrnt, 1)
   RowDestCrnt = RowDestCrnt + RowSrcSubTab1End - RowSrcSubTab1Start + 4
   ' Copy header row for table 2
   Worksheets("TblSrc").Range(RngStgHeader2).Copy _
                     Destination:=Worksheets("TblDest").Cells(RowDestCrnt, 1)
   RowDestCrnt = RowDestCrnt + 1
   ' Copy sub table 2 plus rows before and after which should be dividing rows
   RngStgHeaderX = "A" & RowSrcSubTab2Start - 1 & ":" & _
                                   ColNumToCode(ColMax) & RowSrcSubTab2End + 1
   Worksheets("TblSrc").Range(RngStgHeaderX).Copy _
                      Destination:=Worksheets("TblDest").Cells(RowDestCrnt, 1)
   RowDestCrnt = RowDestCrnt + RowSrcSubTab2End - RowSrcSubTab2Start + 3

   ' Warning there is a limit of 1026 on the number of horizontal page breaks
   Worksheets("TblDest").HPageBreaks.Add _
                           Before:=Worksheets("TblDest").Cells(RowDestCrnt, 1)
 Loop

 Debug.Print Timer - timeStart

 Application.EnableEvents = True
 Application.ScreenUpdating = True

End Sub

Function ColNumToCode(ByVal ColNum As Long) As String

  ' Convert column number (such as 1, 2, 27, etc.) to
  ' column code (such as A, B, AA, etc.)

  Dim Code As String
  Dim PartNum As Long

  ' Last updated 3 Feb 12\.  Adapted to handle three character codes.
  If ColNum = 0 Then
    ColNumToCode = "0"
  Else
    Code = ""
    Do While ColNum > 0
      PartNum = (ColNum - 1) Mod 26
      Code = Chr(65 + PartNum) & Code
      ColNum = (ColNum - PartNum - 1) \ 26
    Loop
  End If

  ColNumToCode = Code

End Function 
```

# ios - 在代码中重新创建字体样式

> ID：12961795
> 
> 赞同：0
> 
> 时间：2012-10-18T18:57:07.777
> 
> 标签：ios, uifont

我正在尝试在代码中重新创建以下字体样式：

![在此处输入图像描述](../Images/fc485ebfc7a83f13786bec70c64bf709.png)

仔细观察，你会注意到这种风格的很多小细节。该样式是在 Photoshop 中使用以下设置制作的：

*   高光的白色阴影，18% 不透明度，2px 大小
*   顶部有黑色内发光，用于 2px 大小的凹进外观
*   带有十六进制颜色的紫色内发光：#fd32ff，不透明度为 28%，大小为 4px

要重新创建投影，我只是计划将 UILabel（将包含字体）设置为具有投影和颜色，如下所示：

```
myLabel.layer.shadowColor = [UIColor whiteColor].CGColor;
myLabel.layer.shadowOffset = CGSizeMake(0.0, 2.0); 
```

将它与黑色字体结合起来让我有点接近想要的外观......

任何人都可以给我任何提示来指出我在代码中重新创建紫色发光效果的正确方向吗？我是否需要覆盖 draw rect 来绘制标签并在那里做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:33:20.067

这是非常具体的东西......但如果其他人想要重新创建这种字体，这和我得到的一样接近。

您必须访问 ProximaNova 字体并将它们也添加到您的项目中。

我获得 3 种颜色的解决方案是使用 2 个标签，一个标签实现“前两种”颜色，一个标签实现最后一种底部颜色（在本例中为白色）。

```
 UILabel *whiteDocumentNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300, 35)];
    whiteDocumentNameLabel.backgroundColor = [UIColor clearColor];
    whiteDocumentNameLabel.textAlignment = UITextAlignmentCenter;
    whiteDocumentNameLabel.font = [UIFont fontWithName:@"ProximaNova-Bold" size:24];
    whiteDocumentNameLabel.text = @"MyText";
    whiteDocumentNameLabel.textColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:.18];

    UILabel *documentNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, -1, whiteDocumentNameLabel.frame.size.width, whiteDocumentNameLabel.frame.size.height)];
    documentNameLabel.backgroundColor = [UIColor clearColor];
    documentNameLabel.textAlignment = UITextAlignmentCenter;
    documentNameLabel.font = whiteDocumentNameLabel.font;
    documentNameLabel.text = whiteDocumentNameLabel.text;;
    documentNameLabel.textColor = [UIColor blackColor];
    documentNameLabel.layer.shadowColor = [UIColor colorWithRed:253.0 / 255.0 green:50.0 / 255.0 blue:255.0 / 255.0 alpha:1].CGColor;
    documentNameLabel.layer.shadowRadius = .75;
    documentNameLabel.layer.shadowOpacity = .2;
    documentNameLabel.layer.shadowOffset = CGSizeMake(0, 0);
    [whiteDocumentNameLabel addSubview:documentNameLabel]; 
```

# javascript - 如何识别为什么在 Firefox 和 IE7 中计算的结果不同？

> ID：12961796
> 
> 赞同：0
> 
> 时间：2012-10-18T18:57:08.040
> 
> 标签：javascript, jquery, internet-explorer-7

下面的代码`correctSNILS`最终`true`在 Firefox（这是正确的）和`false`IE7 中。如何识别为什么？

```
var value = "02324423703";
var correctSNILS = false;
if (value.length == 11) {
    var controlDigits = value.slice(9);
    var SNILS = value.slice(0, 9);
    if (SNILS < 1001998) {
        correctSNILS = true;
    } else {
        var total = SNILS.length;
        var result = 0;
        for (var i = 0; i < total; i++) {
            result += (total - i) * SNILS[i];
        }
        if (result == 100 || result == 101) result = "00";
        if (result > 101) result %= 101;
        if (result == controlDigits) correctSNILS = true;
    }
}
$("#result").text(correctSNILS); 
```

[演示](http://jsfiddle.net/and7ey/4LWVa/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:10:51.107

您不能在 IE7 中将 String 作为数组访问：

```
result += (total - i) * SNILS[i]; 
```

将其更改为使用**charAt**字符串函数：

```
result += (total - i) * SNILS.charAt(i); 
```

# android - 在 Froyo 的本地 android 日历中插入过去的事件

> ID：12961799
> 
> 赞同：2
> 
> 时间：2012-10-18T18:57:15.747
> 
> 标签：android, events, calendar, android-2.2-froyo

目标：编写一个同步适配器，将 Google 日历事件与本地 android 日历同步（服务器到设备 - 仅一种方式）。安卓版本：Froyo

调试步骤：

1.  从 Google 日历中读取过去的非重复事件（一个月前）
2.  我将它本地插入到 android 日历中（我创建的日历条目）
3.  事件已成功插入事件表中，但未创建实例表中的相应条目
4.  我将 calendarmetadata 表值更新为 mininstance=0 和 maxinstance="event's end date in millis"（在命令提示符下通过 sqlite3 工具）
5.  我再次尝试在本地插入相同的事件
6.  这次事件成功插入到事件表中，并且实例表中的相应条目也被创建

查看 CalendarProvider.java 和 Calendar.java 源代码并进一步探索发现以下内容：

1.  在 Calendars 表中插入一行后，mininstance 设置为今天的日期，maxinstance 设置为未来 7 或 15 天，例如，如果今天是 19 月 19 日，则创建一个日历条目并访问日历议程活动集 mininstance= 19-Oct（以毫秒为单位）和 maxinstance=26-O​​ct（以毫秒为单位）。
2.  在上面的第 3 步中，当内容提供者插入一个事件时，它会查看 mininstance 和 maxinstance 值以在实例表中扩展和插入给定事件的实例。由于事件开始时间早于 mininstance 值（因为事件是一个月大），内容提供者不会创建相应的实例条目。

鉴于我无法从我的代码直接写入 calendarmetadata 和实例表，如何将旧事件与我在 android 设备上的本地日历同步以获取 froyo 版本？

# php - 复杂 php 的 SQL 问题

> ID：12961805
> 
> 赞同：0
> 
> 时间：2012-10-18T18:57:38.510
> 
> 标签：php, mysql, sql

再会，

我在使用以下 php 代码时遇到了很多麻烦，它的伪代码如下：

检查表中是否存在关系，如果不存在，则将关系添加到表中。否则获取当前关系并返回它。

代码如下：

```
 $result = mysql_query("SELECT * FROM friends WHERE (user_id = '" .$me. "' AND user_id2 = '" .$other. "') OR (user_id2 = '" .$me. "' AND user_id = '" .$other. "')");
if($result == false){
    mysql_query("INSERT INTO `friends`(`user_id`, `user_id2`, `status`) VALUES ('" .$me. "', '" .$other. "', 'pending')");
    echo("Friend Request Sent"); 
}
else{
    $res = mysql_query("SELECT 'status' FROM friends WHERE (user_id = '" .$me. "' AND user_id2 = '" .$other. "')");
    $rows = array();
    while($r = mysql_fetch_assoc($res)) {
        $rows[] = $r;
    }
    echo json_encode($rows); 

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:03:15.693

如果条件，您应该尝试以下方法

```
if(mysql_num_rows($result)){
     mysql_query("INSERT INTO `friends`(`user_id`, `user_id2`, `status`) VALUES ('" .$me. "', '" .$other. "', 'pending')");
     echo("Friend Request Sent"); 
} 
```

并且 else 块应该与第一个查询相同，它应该看起来像

```
else{
    $res = mysql_query("SELECT 'status' FROM friends WHERE (user_id = '" .$me. "' AND user_id2 = '" .$other. "') OR (user_id2 = '" .$me. "' AND user_id = '" .$other. "')") ;
    $rows = array();
    while($r = mysql_fetch_assoc($res)) {
       $rows[] = $r;
    }
    echo json_encode($rows); 
} 
```

# haskell - 如何用 Haskell 解析 ASN.1？

> ID：12961809
> 
> 赞同：5
> 
> 时间：2012-10-18T18:57:50.577
> 
> 标签：haskell, asn.1

如何使用 Haskell 解析 ASN.1 输入？

是否有能够为给定的 ASN.1 描述文件生成代数数据类型声明和解析器代码的生成器？

（例如用于生成 C 代码的[asn1c ...）](http://lionet.info/asn1c/blog/)

快速总结 ASN.1 的内容：

ASN.1 类似于 Google Protocol Buffers，但开发得更早，它是一个实际的标准。基本上，ASN.1 定义了几种用于序列化分层结构化数据的方法和用于定义描述结构的语法的语法。这样的语法可用于自动生成解析器和数据结构以构建语法树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-29T05:10:10.127

[您可以使用asn1-encoding](http://hackage.haskell.org/package/asn1-encoding)包解码二进制 ASN.1 ，您可以使用模式匹配手动解析它，也可以使用[asn1-parse](http://hackage.haskell.org/package/asn1-parse)包。

例如，以下帮助函数将 BER 二进制文件解码为[ASN1](http://hackage.haskell.org/package/asn1-types-0.2.3/docs/Data-ASN1-Types.html#t%3aASN1)列表：

```
import Data.ASN1.Encoding
import Data.ASN1.BinaryEncoding
import Data.ASN1.Types
import qualified Data.ByteString as B

decodeASN1File file = decodeASN1' BER `fmap` B.readFile file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:11:40.193

对 Hackage 的快速搜索显示

[http://hackage.haskell.org/package/language-asn1-0.2.1](http://hackage.haskell.org/package/language-asn1-0.2.1)

这听起来可能是相关的。我对ASN.1真的不太了解...

# vb.net - 如何使用 .NET 按提交的顺序打印报告

> ID：12961810
> 
> 赞同：0
> 
> 时间：2012-10-18T18:57:55.833
> 
> 标签：vb.net, winforms, printing, printqueue

我们的 VB WinForms 应用程序使用标准 PrintDocument 对象打印一系列报告，其中一些具有多个页面。我的客户指出，硬拷贝报告的打印顺序不正确。当我调试代码时，我可以验证报告是以正确的顺序生成的，但是当我检查打印队列时，报告并没有按照它们提交的顺序显示。当我按提交（日期时间）对队列进行排序时，会显示正确的报告顺序。

有没有办法从 VB.NET 设置打印队列，以便按日期时间顺序排列和打印多个报告？还是我在错误的洞里钓鱼？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:18:26.527

关闭打印机上的后台打印，以便应用程序直接打印到打印机。这是在打印机属性的高级选项卡上。

![在此处输入图像描述](../Images/3b19646066c630cb9deb15e7c28453e2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:38:23.123

这是打印假脱机的效果。项目在完成假脱机之前不会添加到打印队列中，因此它们将按照完成假脱机的顺序而不是打印顺序排队。大文件（带有图像等）的假脱机时间比小文件要长，因此如果后打印的项目更快地假脱机，它们可能会先完成假脱机。您可以禁用打印假脱机（如建议的那样），但这会使打印变得繁琐，因为所有应用程序都会阻塞打印作业，直到它们完成，而不是让假脱机完成工作。

另一种方法可能是在您自己的应用程序中查询打印队列 - 在您确认已完成假脱机（如果正在使用假脱机）之前，不要发送您的下一个打印作业。这绕过了笨拙的解决方案，即强制您的用户更改系统设置并强制其他程序无法访问打印假脱机的便利。看 ：

[打印队列类](http://msdn.microsoft.com/en-us/library/ms576249.aspx)

与上面可以编程修改阀芯/直接设定̶（而不是做它通过打印机属性手动）̶或（**没关系，该属性是只读的。**）可能会更好，使用类似

[PrintQueue.GetPrintJobInfoCollection](http://msdn.microsoft.com/en-us/library/system.printing.printqueue.getprintjobinfocollection.aspx)

发送打印作业时监控队列。

以上在 Server2008 和 VistaSP2 及以上版本中都支持。对于 XP 及更早版本，您可能需要遵循以下类似的内容：

[如何在 Windows 上查询打印队列](https://stackoverflow.com/questions/553051/how-to-query-the-print-queue-on-windows)

也许通过听：

[WM_SPOOLERSTATUS](http://msdn.microsoft.com/en-us/library/dd145220%28v=vs.85%29.aspx)

# ruby-on-rails - 两个布尔数据库属性的 Rails 单选按钮

> ID：12961811
> 
> 赞同：1
> 
> 时间：2012-10-18T18:58:00.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Attendance`模型，它有两个`Boolean`数据库属性（`:late`和`:absent`），它们都有`:default => false`。

我正在尝试制作一个只有 2 个单选按钮的表单。一份迟到，一份缺席。当然，用户只能选择两者之一。

我已经尝试了很多变化，但无法使任何工作。

谁能帮我一把？我知道我可以很容易地进行集合选择，但单选按钮将有助于用户体验。另外，出于多种原因，我需要保留 db 架构...

太感谢了！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T19:55:11.373

我不知道有任何 Rails 助手会支持开箱即用的所需功能。我也质疑可用性，因为如果模型既不迟到也不缺席但被意外点击，用户将无法取消选择任何一个单选按钮。

除此之外，我会使用 radio_button_tag 并提供两个选项，然后在您的控制器中相应地更新参数。这是一个基本示例：

```
<%= form_tag('/your/path') do %>
  <%= radio_button_tag :status, 'late' %>
  <%= label_tag :status_late, 'Late' %>
  <%= radio_button_tag :status, 'absent' %>
  <%= label_tag :status_absent, 'Absent' %>
  <%= submit_tag :submit %>
<% end %> 
```

当然，您将拥有所需的任何其他字段，然后在您的控制器中类似于：

```
def create
  case params[:status]
  when 'late'
    params[:model_name][:late] = true
  when 'absent'
    params[:model_name][:absent] = true
  end

  ModelName.new(params[:model_name])
end 
```

这些方面的东西应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:11:49.243

```
@options = ["Late", "Absent"]
@selected_options = "" 
```

和

```
<% @options.each do |option| %>
    <%=  radio_button_tag 'attendance_radio', option, option == @selected_option %> <%= label_tag 'name', option %> <br />
<% end %> 
```

它将选定的收音机存储在`attendance_radio`

如果您希望表单中的值不是实际选择的值（迟到，缺席），那么您可以使用第二个参数来`boolean`代替

# php - 如何使用 POST 将变量传递到下一页

> ID：12961813
> 
> 赞同：1
> 
> 时间：2012-10-18T18:58:05.543
> 
> 标签：php, mysql, post

我在项目中的最后一件小事上遇到了一些麻烦。

我可以在索引页面上使用表单修改记录，但是当我让更新按钮调用 modifyRecord 页面时，我无法弄清楚如何获取“reg”的变量（来自抽屉 2 的 reg ID）。我将它作为值（参见代码），但是当我尝试使用它或将其存储在变量中时，我得到一个未定义的索引错误。不知道我需要做什么？？

FROM INDEX.PHP：（这发生在每个显示记录的循环中）

```
foreach($resultdet as $res2){
printf($format, $res2['Id'], $res2['Value1'], $res2['Value2'], $res2['reg']);

echo("<form method='Post' action='modifyRecord.php'><input type ='hidden' value =".$res2['Id'].
" name = 'Id'/><input type ='hidden' value =".$res2['reg'].
" name = 'reg'/><input type = 'submit' value = 'modify' name = 'mod'/>
</form>");
} 
```

我正在尝试将值存储在变量中：（来自 modifyRecord.php）

```
if(isset($_POST['mod']))
{
echo 'POST Mod is set';
$regId = $_REQUEST['reg'];
} 
```

但是回声永远不会显示...

不知道出了什么问题。谢谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:06:55.753

您忘记了值上的撇号。

试试这个代码：

```
echo("<form method='Post' action='modifyRecord.php'><input type='hidden' value='" .
$res2['Id'] .
"' name='Id'/><input type ='hidden' value='".$res2['reg'].
"' name='reg'/><input type='submit' value='modify' name='mod'/>
</form>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:09:58.087

尝试这个：

```
foreach ($resultdet as $res2)
{
    printf($format, $res2['Id'], $res2['Value1'], $res2['Value2'], $res2['reg']);

    $data "
    <form method='Post' action='modifyRecord.php'>
    <input type='hidden' value=\"{$res2['Id']}\" name='Id' />
    <input type='hidden' value=\"{$res2['reg']}\" name='reg' />
    <input type='submit' value='modify' name='mod' />
    </form>";

    echo $data;
}

if (isset($_POST['mod']))
{
    echo 'POST Mod is set';
    $regId = $_REQUEST['reg'];
} 
```

# excel - 将csv导入excel的vbscript

> ID：12961835
> 
> 赞同：1
> 
> 时间：2012-10-18T18:59:32.893
> 
> 标签：excel, csv, vbscript, import

我想制作一个 VBSript，它将打开一个包含不同行和列的 csv，并从第 4 行第 1 列开始粘贴它们。到目前为止，我写的内容很慢，并且有很多列硬编码到其中。

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open(wscript.Arguments(0))
objExcel.Visible = True
objExcel.Cells(1, 4).Value = wscript.Arguments(1)+" - "+wscript.Arguments(2)
objExcel.Cells(2, 4).Value = wscript.Arguments(3)

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile (wscript.Arguments(4))
cCount = 1
rCount = 4

Do While objTextFile.AtEndOfStream <> True
        arrUserRecord = split(objTextFile.Readline, ",")
        Do While cCount<213
            objExcel.Cells(rCount, cCount).Value = arrUserRecord(cCount-1)
            cCount=cCount+1
        Loop
        cCount=1
        rCount=1+rCount
Loop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:15:43.207

Excel 可以相当特别地接受它作为“有效 CSV”的内容。我不得不多次求助于以下方法：

```
Const vbFormatStandard = 1
Const vbFormatText     = 2
Const vbFormatDate     = 4

Const xlDelimited      = 1
Const xlDoubleQuote    = 1

' change according to number/type of the fields in your CSV
dataTypes = Array( Array(1, vbFormatText) _
  , Array(2, vbFormatStandard) _
  , Array(3, vbFormatText) _
  , Array(4, vbFormatDate) _
  )

Set xl = CreateObject("Excel.Application")
xl.Visible = True

xl.Workbooks.OpenText "input.csv", , , xlDelimited, xlDoubleQuote, False _
  , False, True, , , , dataTypes
Set wb = xl.ActiveWorkbook 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:13:33.830

如果它是一个有效的 CSV 文件，那么 Excel 可以直接打开它。因此，只需编写您的 VBscript 来告诉 Excel 打开 CSV 文件，就好像它是一个工作簿一样。然后，您可以将该工作簿中所需的数据复制到您的工作簿中。

* * *

如果您不知道如何做到这一点，那么 VBA 是最好的方法，但您也应该能够在 VBscript 中模拟它。这是我认为它应该看起来的样子，尽管我无法确定：

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open(wscript.Arguments(0))
objExcel.Visible = True
objExcel.Cells(1, 4).Value = wscript.Arguments(1) + " - " + wscript.Arguments(2)
objExcel.Cells(2, 4).Value = wscript.Arguments(3)

Set objWorksheet = objWorkbook.ActiveSheet

Set objWbkCsv = objExcel.Workbooks.Open(wscript.Arguments(4))
Set objWksCsv = objWbkCsv.Worksheets(1)
Set objRangeSource = objWksCsv.UsedRange

cCount = objRangeSource.Columns.Count
rCount = objRangeSource.Rows.Count + (4 - 1)
Set objRangeDest = objWorksheet.Range(objWorksheet.Cells(4, 1), objWorksheet.Cells(rCount, cCount))

objRangeSource.Copy objRangeDest 
```

# ios - 自定义返回 UIBarButton 与原始标题相同？

> ID：12961839
> 
> 赞同：2
> 
> 时间：2012-10-18T18:59:51.373
> 
> 标签：ios, button, uiviewcontroller, uibarbuttonitem, back

我想通过当前 UIViewController 的 backBarButtonItem 离开页面时发送确认 UIAlertView。

为此，我用新的 UIBarButtonItem 替换了现有的后退按钮：

```
- (void) setBackButton {
NSArray * viewControllers = self.navigationController.viewControllers;
UIViewController * previousController = [viewControllers objectAtIndex:[viewControllers count]-2];

self.backButton = [[UIBarButtonItem alloc] initWithTitle:previousController.title style:UIBarButtonItemStyleBordered target:self action:@selector(backButtonPressed)];
previousController.navigationItem.backBarButtonItem = self.backButton; 
```

}

因此问题是：我似乎无法在我当前的 UIViewController 中获得对 @selector(backButtonPressed) 的回调。将 self.backButton 放入 self.navigationItem.leftBarButtonItem 时，它确实有效，但按钮是矩形而不是箭头。

如何获得一个看起来与原始后退按钮完全相同的按钮，该按钮允许调用 @selector(backButtonPressed) 方法而不是仅仅返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:06:01.703

对于箭头形按钮，您应该使用自定义视图（具有箭头形图像）启动 UIBarButtonItem。但是在导航控制器中覆盖后退按钮操作并不常见。取而代之的是，您应该以模态方式呈现屏幕并在那里添加栏按钮（完成，取消）。希望这可以帮助！

# jquery - 删除隐藏元素的 css 后为元素设置动画

> ID：12961842
> 
> 赞同：0
> 
> 时间：2012-10-18T19:00:19.803
> 
> 标签：jquery

我似乎在这里遗漏了一些东西，所以如果有人可以向我解释幕后发生的过程，我将不胜感激。

我想要完成的是在删除隐藏特定元素内容的元素上的 CSS 后获得 jQuery 提供的[.slideDown()效果。](http://api.jquery.com/slideDown/)

我创建了一个小提琴来解释/展示更多我正在尝试做的事情：

[http://jsfiddle.net/iOnline247/4Ztpg/](http://jsfiddle.net/iOnline247/4Ztpg/)

再次，我想知道我所做的事情以及为什么我正在做的事情不起作用的内幕。我敢肯定这与我的大脑大小有关，但让我们好点……

编辑----- 内联样式是从服务器呈现 HTML 的方式。不幸的是，我无法控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:08:38.527

`.slideDown()`将采用不可见的元素并通过动画使其可见。如果您首先删除使其不可见的样式，那么它将立即出现。一旦它是可见的`.slideDown()`将什么都不做。

所以问题是，你为什么要首先删除样式？为什么你有一个内联样式集？

如果您需要覆盖内联样式（并且由于某种原因，不能将其从源 HTML 中删除），那么您可以在文档加载时执行此操作：

```
$(function() {
    $(".some-text").css("display","none");
}); 
```

现在您的向下滑动将起作用，并且您不需要删除任何类。当您使用它设置样式时`.css`，它将覆盖任何内联样式。

编辑：这是一个演示的小提琴：

[http://jsfiddle.net/VjWEs/1/](http://jsfiddle.net/VjWEs/1/)

请注意，我将您的 div 包装在另一个 div 中，因此您可以看到它在出现时实际上显示为块。如果您更改为`.css("display","none");`，`.hide()`您将保留内联显示，但它不能再向下滑动，它只会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:08:51.720

您应该将所有 CSS 保留在您的 CSS 文件中，并且不要使用任何内联样式，而且您*永远*不需要`!important`在您的 CSS 中使用。

话虽如此，您无需`no-display`在向下滑动之前删除该类。 `slideDown`向下滑动后将添加`display:block`到您的元素（如果需要，您可以在回调中删除类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:20:46.527

这个问题已经有了很好的答案，但我还是做了一个[小提琴](http://jsfiddle.net/4Ztpg/3/)。希望能帮助到你。我更改了您的演示，因此您不必使用内联样式。[在此处](http://api.jquery.com/slideDown/)阅读更多信息。

```
//jQuery
$('#clickme').click(function() {
  $('.some-text').slideDown('slow', function() {
     //slide done, can do more stuff here if u need to
  });
});

<!-- HTML -->
<h3 id="clickme">More Info</h3>
<div class='some-text'>The div to slide</div>

/*CSS*/
.some-text { height: 20px; display: none; } 
```

# jquery - 从浏览器或服务器请求 URL

> ID：12961848
> 
> 赞同：0
> 
> 时间：2012-10-18T19:00:55.063
> 
> 标签：jquery, ajax, url, url-routing, json.net

```
$.ajax({
type: "GET",
url: "/xyz.Web/Incls/ctrls/main/dtactrl/Data.aspx", 
```

现在，每当我将其推送到 QA、DEV 或 PROD 上时，xyz.Web 都会发生变化，但剩余的流将保持不变，所以有没有办法请求 URI 并动态粘贴它，而不是对 URL 字段进行硬编码？需要一些正确的方向来提高效率..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:38:03.647

```
 url:'<%=VirtualPathUtility.ToAbsolute("~/Incls/ctrls/main/dtactrl/Data.aspx") %>', 
```

如果其他人遇到这个问题，我只是想更新这个..这解决了我的问题..

# thunderbird - 在 Thunderbird API 中找出插件文件夹的路径

> ID：12961855
> 
> 赞同：0
> 
> 时间：2012-10-18T19:01:23.343
> 
> 标签：thunderbird, thunderbird-addon

我正在修改 Thunderbird 的插件，并在其中一个 javascript 文件中找到硬编码的插件路径。这对我来说似乎很草率，我认为必须有可能以编程方式找出这条路径。但是，经过大量的谷歌搜索，我仍然找不到该问题的答案。

你知道我怎样才能找到`install.rdf`Thunderbird 插件的文件夹（包含 ）的路径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:37:14.790

您可以为此使用[`AddonManager`API](https://developer.mozilla.org/en-US/docs/Addons/Add-on_Manager/AddonManager)：

```
Components.utils.import("resource://gre/modules/AddonManager.jsm");

AddonManager.getAddonByID("foo@example.com", function(addon)
{
  var uri = addon.getResourceURI("install.rdf");
  if (uri instanceof Components.interfaces.nsIFileURL)
  {
    var file = uri.file;
    alert(file.parent.path);
  }
}); 
```

供参考：[Addon](https://developer.mozilla.org/en-US/docs/Addons/Add-on_Manager/Addon)、[nsIFileURL](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFileURL)、[nsIFile](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFile)。

上面代码中的假设是扩展在安装时解包，您的前任可能添加[`<em:unpack>true</em:unpack>`](https://developer.mozilla.org/en-US/docs/Install_Manifests#unpack)到`install.rdf`. 通常不应指定此标志，将扩展打包在磁盘上会更好地提高性能。如果您只需要从扩展中读取文件，则可以使用`XMLHttpRequest`它，而无需它是磁盘上的物理文件：

```
Components.utils.import("resource://gre/modules/AddonManager.jsm");

AddonManager.getAddonByID("foo@example.com", function(addon)
{
  var uri = addon.getResourceURI("example.txt");
  var request = new XMLHttpRequest("GET", uri.spec);
  request.addEventListener("load", function()
  {
    alert(request.responseText);
  }, false);
  request.send();
}); 
```

# objective-c - 将 NSOperation 依赖项添加到已在 NSOperationQueue 中的操作

> ID：12961858
> 
> 赞同：1
> 
> 时间：2012-10-18T19:01:32.207
> 
> 标签：objective-c, ios, multithreading, nsoperation, nsoperationqueue

我想使用`NSOperationQueue`. 我有几个不同的请求将由代码的不同部分添加到队列中，其中一个将比另一个更经常地运行。

我已经使用 GCD 实现了这个，所以我有代码块，因此我打算简单地使用该`NSBlockOperation`方法`blockOperationWithBlock:^{...}`而不是创建`NSOperation`.

这个问题是我想在请求之间创建依赖关系。如果队列已经有一个`NSBlockOperation`for requestA，那么我想在`NSBlockOperation`为 requestB 创建时添加一个依赖项。同时创建操作时这很简单，但我找不到一种简单的方法来确定队列中已经存在哪些操作。

`NSOperationQueue`有一个`operations`属性，所以我可以自己检索操作列表，但是如何确定哪个操作是哪个？我没有看到可以使用的名称/描述属性。

我能想到的选项是：

1.  子类`NSOperation`为每种请求类型创建自定义对象，然后对从`operations`属性检索到的对象使用自省
2.  子类化`NSBlockOperation`并添加描述属性

我是否错过了其他一些明显的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:42:11.517

添加一个保存最新`requestA`操作的实例变量。在块的末尾清除它`requestA`。例如

```
_requestA = [NSBlockOperation blockOperationWithBlock:^{
    // Normal requestA code here.
    // ...

    // Assuming you create all requestA and requestB instances on the main thread...
    dispatch_async(dispatch_get_main_queue(), ^{ _requestA = nil; });
}]; 
```

然后当你创建一个时`requestB`，你可以给它最新`requestA`的作为依赖，如果还有一个要使用的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:35:26.717

你可以使用优先级。

`[NSBlockOperation setPriority:NSOperationQueuePriority]`

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)

然后，当您枚举操作时，您可以检查优先级并将它们添加为依赖项或不添加。您甚至可能不需要检查它们，只需适当地设置操作的优先级即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T11:13:41.360

我想说正确的方法是对 NSOperation 或 NSBlockOperation 进行子类化，并在这个子类中实现一个`-(BOOL)isEqual:(id)object`方法，以便您可以比较在 NSOperationQueue 的操作属性中找到的操作。这样你应该能够使用内置`[operationA addDependency:operationB];`

# jquery - Jquery getJson 需要从我的 MVC 视图中传递模型

> ID：12961860
> 
> 赞同：0
> 
> 时间：2012-10-18T19:01:39.710
> 
> 标签：jquery, asp.net-mvc, json

我正在使用 getJSON，我喜欢作为 url 的一部分传递的是我在视图中拥有的模型（我正在使用 MVC C#）

```
 $.getJSON(url, function (data) {

    }); 
```

我想知道是否有办法做到这一点。

```
 @model PVC.Domain.Lab.Models.ModelMain 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:23:42.653

您可以将其作为 JSON 请求发送：

```
@model MyViewModel
...
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
    $.ajax({
        url: '@Url.Action("someaction")',
        type: 'POST',
        contentType: 'application/json', 
        data: JSON.stringify(model),
        success: function(result) {
            alert('success');
        }
    });
</script> 
```

请注意，Visual Studio 的语法突出显示可能会`var model = @Html.Raw(Json.Encode(Model));`用红色波浪线在该行下划线，告诉您存在错误。完全可以忽略此错误并运行您的应用程序，这将起作用。

另请注意，如果您想限制网络使用，最好在 AJAX 请求中仅发送模型的 id，并让您的服务器使用您最初检索到的任何位置的 id 检索此模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:12:43.670

这样做的方法是使用内联 JavaScript 来提取您想要在 url 中使用的模型部分。

```
<script>
  var myUrl = '/path/to/action/@Model.Id/whatever else';
  // Then make your call using the constructed URL
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T19:02:59.210

在这种情况下，您必须使用`.json`文件...

```
$.getJSON("yourpage.json", function (data) {

        }); 
```

# sql-server-2005 - 有没有办法让用户排序结果停留在 SSRS 2005 报告刷新上

> ID：12961861
> 
> 赞同：2
> 
> 时间：2012-10-18T19:01:40.957
> 
> 标签：sql-server-2005, reporting-services, bids

我对 SQLServer 世界比较陌生，我正在尝试为我正在合作的公司学习 SSRS 2005，所以如果我在研究中遗漏了任何明显的答案，请原谅我。

我遇到的问题是我有一个报告，它允许用户按列对主表进行排序，只有当报告服务器刷新报告时，用户排序才会重置。这引起了现场用户的大量抱怨，他们在大部分日常任务中都使用此报告。

该报告基本上是一个表，它根据给定的参数和存储过程返回的数据返回多个结果。排序功能是通过在每列的表头上设置用户排序来实现的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:18:13.637

如果您有很多用户整天都在使用该报告，但对它进行了不同的排序，那么我首先会看看他们还有哪些其他要求导致他们以不同的方式使用该报告。您可能会发现排序只是冰山一角，几个用户组只能使用一个报告，而他们可以使用多个自定义构建的报告。

为了允许他们通过刷新进行排序和维护排序，我将通过动态存储过程使用参数化报告。可能有一个更简单的方法 - 但这应该可以解决问题。但是，您必须手动标记动态查询源的字段 - 只需确保 FieldSource 与您的列名相同，您将正确提取数据并能够将值分配给单元格。

列排序选择示例：

```
CREATE PROC getSortColumns 
AS
SELECT COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'DimEmployee' AND TABLE_SCHEMA='dbo' 
```

现在创建将使用排序顺序的动态存储过程：

```
CREATE PROC getEmployees ( @OrderByClause varchar(100) ) AS

-- Create a variable @SQLStatement
DECLARE @SQLStatement varchar(255)

-- Enter the dynamic SQL statement into the
-- variable @SQLStatement
SELECT @SQLStatement = 'SELECT Title, FirstName, LastName, HireDate, Status ' +
                       'FROM dbo.DimEmployee ORDER BY ' + @OrderByClause

-- Execute the SQL statement
EXEC(@SQLStatement) 
```

您可以测试查询是否手动工作：

```
exec getEmployees @OrderbyClause = LastName 
```

在 BIDS 中，您将收到查询中缺少您的字段的警告消息。我在 SQL 2012 中测试了这个解决方案，所以它可能在早期版本中不起作用，抱歉我无法确认。

创建两个数据集，一个用于列名，一个用于查询。为列名设置默认值和值，手动命名并列出主数据集上的查询字段，否则它将无法识别查询中的任何字段。

不是特别可维护......我肯定会首先调查报告要求。希望这可以帮助！

有关动态查询说明，请参阅[4 Guys](http://www.4guysfromrolla.com/webtech/010704-1.shtml) ，有关获取列名的说明，请参阅[此问题](https://stackoverflow.com/questions/600446/sql-server-how-do-you-return-the-column-names-from-a-table)

# ios - 对于不同的目标，在同一个项目中有多个应用程序委托是否可以？

> ID：12961862
> 
> 赞同：4
> 
> 时间：2012-10-18T19:01:53.687
> 
> 标签：ios, cocoa-touch, uiapplicationdelegate

我参与开发 iOS 应用程序。让我印象深刻的第一件事是顶级项目中的多个应用程序委托，它有多个目标输出。我知道每个子项目都有自己的应用程序委托。我的团队成员告诉我，这些应用程序委托用于不同的目标，但它们具有几乎相同的代码，除了一些变量来自不同的类或子项目。在一个项目中拥有多个应用程序委托的优缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T19:15:11.567

这个结构很好，*如果应用程序委托中有一些实际上不同的东西*。如果其中一些相同，请考虑如何重组该代码（这样您就没有重复的代码）。将公共代码放在超类中是一种方法，但还有其他几种方法。因为子类化是如此强大，所以另一种方法通常更可取（例如组合）。

应用程序委托的一个问题是它会影响您的资源——即，如果类名不同，那么当这些资源可能完全相同时，您可能会面临资源（例如NIB）的微小差异。

**基本经验法则：**如果您发现自己面临重复代码，请找到一种避免重复该代码的方法，或者在该重复代码已经被复制的情况下删除该重复代码的方法。

# ruby - Ruby Datamapper group by with max

> ID：12961864
> 
> 赞同：3
> 
> 时间：2012-10-18T19:01:58.867
> 
> 标签：ruby, datamapper, ruby-datamapper

我有一个 MySQL 表：

```
id       int
a        varchar
b        varchar
c        varchar
version  int
active   bool 
```

我想按 a、b 和 c 获取最大版本组，所以我有以下查询来做到这一点：

```
select a, b, c, max(version) as version from mytbl where active = 1 group by a, b, c 
```

我正在将 Datamapper 与 Sinatra 一起使用。上表模型名称为“mytbl”。与上述查询等效的数据映射器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:51:15.670

我得到了它 ：）

```
mytbl.aggregate(:version.max, :active => 1, :fields => [:a, :b, :c], :unique => true, :order => nil) 
```

或者

```
mytbl.aggregate(:version.max, :conditions => [ 'active = ?', 1], :fields => [:a, :b, :c], :unique => true, :order => nil) 
```

但是我找不到将 max(version) 别名为版本的方法。它返回 max(version) 作为列名。这没什么大不了的；）

# c# - Sql 连接下拉列表

> ID：12961865
> 
> 赞同：0
> 
> 时间：2012-10-18T19:02:01.223
> 
> 标签：c#, asp.net, sql

当我将下拉列表与两列连接时，我无法提取 sql 数据。我想结合姓氏（lName）+名字（fName）并提取这些名字的数据。这是我到目前为止所拥有的。

```
 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
        DataSourceID="SqlDataSource3"  DataTextField="lName" DataValueField="lName" 
        AppendDataBoundItems="True" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
        <asp:ListItem Value="Select">Select</asp:ListItem>
    </asp:DropDownList>

  <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
        ConnectionString="<%$ ConnectionStrings:TestDBConnectionString1 %>" 
        SelectCommand="SELECT (lName + fName) AS zName FROM CoaTest"></asp:SqlDataSource> 
```

然后我有一个包含所有 Databounds 的 formview，它的 sql 连接如下所示：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:TestDBConnectionString1 %>" 
        DeleteCommand="DELETE FROM [CoaTest] WHERE [Id] = @Id" 
        SelectCommand="SELECT Id, fName, lName, agency, title, gen, hired, AppS,
        course, Location, SessNum, SDate, EDate, Hours, SitUps, pushUps, rTime, 
        Grade FROM CoaTest WHERE (lName = @lName)"

        UpdateCommand="UPDATE [CoaTest] SET [fName] = @fName, [lName] = @lName, [agency] = @agency, [title] = @title, [gen] = @gen, [hired] = @hired, [AppS] = @Apps, [course] = @course, [Location] = @Location, [SDate] = @SDate, [EDate] = @EDate, [Hours] = @Hours WHERE [Id] = @Id">
        <DeleteParameters>
            <asp:Parameter Name="Id" Type="Int32" />
        </DeleteParameters>
        <SelectParameters> 
            <asp:ControlParameter ControlID="DropDownList1" Name="lName"  
                PropertyName="SelectedValue" Type="String" /> 

        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="fName" Type="String" />
            <asp:Parameter Name="lName" Type="String" />
            <asp:Parameter Name="Agency" Type="String" />
            <asp:Parameter Name="title" />
            <asp:Parameter Name="gen" />
            <asp:Parameter Name="hired" />
            <asp:Parameter Name="Apps" />
            <asp:Parameter Name="course" />
            <asp:Parameter Name="Location" />
            <asp:Parameter Name="SDate" />
            <asp:Parameter Name="EDate" />
            <asp:Parameter Name="Hours" />
            <asp:Parameter Name="Id" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

如果我只是按姓氏 (lName) 拉取它，则此方法有效，但是当我尝试连接时，它不会从表单视图中拉取数据。先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:19:02.550

将下拉列表的选择命令更改为`SELECT Id, (lName + fName) AS zName FROM CoaTest`，将下拉列表的 DataValueField 值更改为`Id`并按 Id 而不是按名称选择数据到 FormView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:11:30.243

我认为`DataValueField`和`DataTextField`属性应该是这样的：

*   `datavaluefield ="zname"`, 因为连接的别名被命名为 zname no lname

此外，您没有在数据源查询中投影或显示 lname 表列

# c# - 拆分和连接 C# 字符串

> ID：12961868
> 
> 赞同：94
> 
> 时间：2012-10-18T19:02:11.770
> 
> 标签：c#, arrays, string

> **可能重复：**
> [首先拆分然后加入字符串的子集](https://stackoverflow.com/questions/11025690/first-split-then-join-a-subset-of-a-string)

我正在尝试将一个字符串拆分为一个数组，取出第一个元素（使用它），然后将数组的其余部分连接成一个单独的字符串。

**例子：**

```
theString = "Some Very Large String Here" 
```

**会成为：**

```
theArray = [ "Some", "Very", "Large", "String", "Here" ] 
```

然后我想在变量中设置第一个元素并稍后使用它。

然后我想将数组的其余部分加入一个新字符串。

**所以它会变成：**

```
firstElem = "Some";
restOfArray = "Very Large String Here" 
```

我知道我可以使用`theArray[0]`第一个元素，但我如何将数组的其余部分连接到一个新字符串？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-10-18T19:03:37.540

您可以使用`string.Split`和`string.Join`：

```
string theString = "Some Very Large String Here";
var array = theString.Split(' ');
string firstElem = array.First();
string restOfArray = string.Join(" ", array.Skip(1)); 
```

如果你知道你总是只想拆分第一个元素，你可以使用：

```
var array = theString.Split(' ', 2); 
```

这样您就不必加入：

```
string restOfArray = array[1]; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-18T19:13:23.407

好吧，这是我的“答案”。它使用的事实是[String.Split](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)可以被告知包含许多应该拆分的项目（我发现其他答案中缺少这些项目）：

```
string theString = "Some Very Large String Here";
var array = theString.Split(new [] { ' ' }, 2); // return at most 2 parts
// note: be sure to check it's not an empty array
string firstElem = array[0];
// note: be sure to check length first
string restOfArray = array[1]; 
```

这与方法非常相似`Substring`，只是方式不同。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-18T19:06:52.133

您可以拆分和连接字符串，但为什么不使用子字符串呢？然后你只会得到一个拆分，而不是将字符串拆分为 5 个部分并重新加入它。最终结果是相同的，但子字符串可能要快一些。

```
string lcStart = "Some Very Large String Here";
int lnSpace = lcStart.IndexOf(' ');

if (lnSpace > -1)
{
    string lcFirst = lcStart.Substring(0, lnSpace);
    string lcRest = lcStart.Substring(lnSpace + 1);
} 
```

# python - 使用 if 语句更改矩阵的对角线？

> ID：12961870
> 
> 赞同：-1
> 
> 时间：2012-10-18T19:02:13.330
> 
> 标签：python

我正在尝试遍历矩阵以用-5替换沿对角线（左上角到右下角）的每个数字。我已阅读以前的问题和答案，我看到您可以使用...`np.fill_diagonal(A, -5)`来获得答案。但是我正在尝试使用带有 if 语句的循环。谁能帮我开始？这是我的矩阵。

```
 A = array([[1.2,3.4,10.3],[2,8,78],[45,-36,8]]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:04:21.573

这很容易。您的矩阵必须是方形的，否则它实际上没有“对角线”。对角线上的元素是`A[i,i]`，所以你只需要循环`for i in range(N)`并`A[i,i] = -5`为每个 i 设置。（没有必要的陈述）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:13:23.100

如果我做对了，你想遍历列和行，所以（确实很傻）：

```
for i in A.shape[0]:
    for j in A.shape[1]:
        if i == j:
            A[i,j] = -5 
```

尽管我不得不认为如果您已经有一个数组/矩阵，那么就不需要这样做了，然后使用 Mgilson 的答案，或者更好的是`numpy.fill_diagonal(array, value)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:20:54.997

您应该使用`numpy`，但是您的数组必须是 a `numpy.array`or `numpy.matrix`。

```
In [1]: import numpy as np
In [2]: A=np.random.random((3,3))
In [3]: A
Out[3]: 
array([[ 5\.        ,  0.47884865,  0.8596375 ],
       [ 0.70925986,  5\.        ,  0.29764543],
       [ 0.98049303,  0.13811067,  5\.        ]])

In [4]: np.fill_diagonal(A, 5)

In [5]: A
Out[5]: 
array([[ 5\.        ,  0.47884865,  0.8596375 ],
       [ 0.70925986,  5\.        ,  0.29764543],
       [ 0.98049303,  0.13811067,  5\.        ]]) 
```

# apache - htaccess 的奇怪的间歇性重定向问题

> ID：12961871
> 
> 赞同：0
> 
> 时间：2012-10-18T19:02:16.013
> 
> 标签：apache, .htaccess

使用`curl -I`检查标题时，我发现我网站上的某些页面无缘无故地进行了重定向。一页，每**三次**请求它都会`/sample`给出一个 301 ，而在 .htaccess 中没有任何引用。`/sample/`

 **被重定向的页面会`RewriteRule ^sample2.htm /sample2 [NC,R,L]`给出 302，但在第 4-5 个请求时除外，它会返回`sample.htm`而不是重定向。

阿帕奇是 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:04:30.197

我发现这是由一个名为 .htaccess 的重复文件引起的`.htaccess copy`。**

# mongodb - 这个 Schema 有什么好的 mongodb 分片键？

> ID：12961873
> 
> 赞同：3
> 
> 时间：2012-10-18T19:02:32.443
> 
> 标签：mongodb, sharding

架构

```
{
        "_id" : ObjectId("5069d68700a2934015000000"),
        "port_name" : "CL1-A",
        "metric" : 340,
        "port_number" : "0",
        "datetime" : ISODate("2012-09-30T13:44:00Z"),
        "array_serial" : "12345"
} 
```

每个阵列有 128 个端口，每个文档是该指标的一分钟数据。由于基数低，array_serial 似乎不是分片键的好选择，也就是说，串行的所有数据`12345`都必须保留在同一个分片上而不是分成块，对吗？

看起来这`port_number`将允许适度的基数，但它会导致查询隔离失败，因为对同一阵列上多个端口的单个查询将跨越多个分片。我预计用户一次不需要查询超过 4-8 个端口。

答案是组合吗？我应该使用日期时间的一部分，比如月份还是星期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T11:18:07.430

关于阵列序列，是的，这是正确的。

如果您选择“port_number”，它将具有足够高的基数，这意味着具有相同“port_number”的所有文档将驻留在同一个块中，但如果查询到达一系列端口，那么它将命中多个碎片。

如您所料，选择正确的分片键非常重要且困难。一个“完美”的分片键满足三个相互排斥的目标：

*   写入应该均匀分布在分片上
*   单个文档的查询应均匀分布在分片上
*   范围查询和排序应该是高效的，这意味着序列中的元素应该都在**同一个**分片上。

避免使用顺序分片键的原因之一是它会在插入时创建热点：在任何给定时间，单个分片将承担所有插入负载（这有利于查询隔离，但最终不利于性能 - 因此 _id 和“datetime "不是好的选择)。我可能会选择复合分片键。Google Group 关于这个话题有一些很好的讨论：

*   [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/yolfc6B3JL8](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/yolfc6B3JL8)

如果您选择类似 { array_serial : 1 , datetime : 1 } 的内容，那么“array_serial”的数据将在需要时分成许多块（基于日期时间）并分布在服务器上。使用完整的“数据时间”值。

“array_serial”是如何决定的？取值范围是多少？我假设 port_name 会随着 port_number 的变化而变化？

鉴于您所说，我可能会选择 { port_number : 1, datetime: 1}，它并不完美，但也不错。

它是您的最佳选择吗？这实际上取决于使用信息。

*   您最常见的查询是什么？

如果您主要要查询特定端口号范围内的特定名称，那么这可能是您的最佳选择。

另一方面，如果您主要基于日期时间执行所有“名称”的查询，而不管端口号如何，那么您每次都将执行分散/收集查询，这将降低集群的整体性能。

另外，问问自己

*   单个分片可以处理所有插入吗？

*   范围查询性能对您来说真的很重要吗？

根据您的问题，我猜您已经阅读了有关[选择分片键](http://docs.mongodb.org/manual/core/sharding-internals/#sharding-internals-shard-keys)的链接:)

以下是有关选择可能对您有所帮助的好分片键的一些进一步讨论：

*   Kristina Chodrow 的优秀著作《Scaling MongoDB》
*   [Kristina 关于分片键的博客文章](http://www.snailinaturtleneck.com/blog/2011/01/04/how-to-choose-a-shard-key-the-card-game/)
*   [Tyler Brock 关于分片的概述演示](http://www.10gen.com/presentations/MongoNYC-2012/sharding-overview)
*   [Antoine Girbal 关于分片最佳实践的演讲](http://www.10gen.com/presentations/MongoNYC-2012/Sharding-Best-Practices-Advanced)

# sql-server-2005 - 预期结果时成功返回命令完成

> ID：12961875
> 
> 赞同：1
> 
> 时间：2012-10-18T19:02:52.083
> 
> 标签：sql-server-2005

我创建的存储过程最初可以工作，但需求发生了变化。现在的要求基本上是结果应该是这样的：

```
item | totalproperty1 | percentofproperty1 | totalproperty2 | ... 
```

在这样做时，我们需要将总数计算在百分比计算的分母中（以防止必须重新计算百分比的总数）。为了尝试这样做，我尝试了这个：

```
Declare @Item varchar(50)
Declare @TotalProperty1 decimal (9,2)
Declare @PercentProperty1 decimal (9,2)
Declare @TotalProperty2 decimal (9,2)
... 
```

... 只是更多地声明了总数和百分比项目，始终使用相同的数据类型（这是一个丑陋的混乱，我道歉）

```
select @Item = item,
       @TotalProperty1 = (--long query to get the total
                          ),
       @PercentProperty1 = (--long query to get the items compared
                             / @TotalProperty1),
       ...

from table1 join table2 on table1.table2ID = table2.ID
where -- condition 
```

本节中的 ... 是对总计/百分比计算的重复，只是针对不同的属性。

我删除了每个子查询的右括号并读取它们以验证它们与子查询的左括号匹配。以前，计算基本上是所有属性匹配项与项目总数的总和，但要求使其更加精细。

当我尝试执行更改脚本时，它显示“命令已成功完成”。这很好，但是当我尝试执行存储过程时，它也会返回“命令已成功完成”。这不是预期的结果（我认为“select @item ... conditions”部分仍应返回 select 语句，对吗？）。

与之前的工作相比，当前工作的主要变化是，之前，我没有做选择变量 = 查询、变量 2 = 查询等，而是一个典型的选择语句。如果我不得不猜测，那就是问题所在，但我将[其用作与](http://www.sql-server-helper.com/error-messages/msg-141.aspx)中途收到的 Msg 141 相关的指南。

# javascript - IE中的Ajax表单提交(8)

> ID：12961876
> 
> 赞同：2
> 
> 时间：2012-10-18T19:02:52.163
> 
> 标签：javascript, jquery, html, ajax, forms

*   [示例 Google 表单](https://docs.google.com/spreadsheet/viewform?formkey=dGd3WHdkOTFRMzMyd0J1ZGFLVW50WlE6MQ)
*   [相关电子表格](https://docs.google.com/spreadsheet/ccc?key=0Aliqp0kGPjWsdGd3WHdkOTFRMzMyd0J1ZGFLVW50WlE)

我自定义了原始表单源代码，创建了两个表单：

*   [第一种形式](http://dl.dropbox.com/u/4017788/Labs/first-form.html)
*   [第二种形式](http://dl.dropbox.com/u/4017788/Labs/second-form.html)

它们适用于除 IE(8) 之外的所有浏览器。怎么了？

第一种形式：

```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>First form</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>

<body>
  <form method="POST" id="ss-form">
    <br>
    <div class="errorbox-good">
      <div class="ss-item  ss-text">
        <div class="ss-form-entry">
          <label class="ss-q-title" for="entry_0">Name
          </label>
          <label class="ss-q-help" for="entry_0"></label>
          <input type="text" name="entry.0.single" class="ss-q-short" value="" id="entry_0">
        </div>
      </div>
    </div>
    <br>
    <input type="hidden" name="pageNumber" value="0">
    <input type="hidden" name="backupCache" value="">
    <div class="ss-item ss-navigate">
      <div class="ss-form-entry">
        <input type="submit" name="submit" value="Submit">
      </div>
    </div>
  </form>
  <script>
    $("#ss-form").submit(function (event) {
      event.preventDefault();
      $.ajax({
        type: 'POST',
        url: 'https://docs.google.com/spreadsheet/formResponse?formkey=dGd3WHdkOTFRMzMyd0J1ZGFLVW50WlE6MQ&amp;ifq',
        data: {
          'entry.0.single': $('#entry_0').val()
        },
        success: function () {
          alert('Thanks!');
        }
      });
    });
  </script>
</body>

</html> 
```

第二种形式：

```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Second form</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>

<body>
  <form method="POST" id="ss-form">
    <br>
    <div class="errorbox-good">
      <div class="ss-item  ss-text">
        <div class="ss-form-entry">
          <label class="ss-q-title" for="entry_0">Name
          </label>
          <label class="ss-q-help" for="entry_0"></label>
          <input type="text" name="entry.0.single" value="" class="ss-q-short" id="entry_0">
        </div>
      </div>
    </div>
    <br>
    <input type="hidden" name="pageNumber" value="0">
    <input type="hidden" name="backupCache" value="">
    <div class="ss-item ss-navigate">
      <div class="ss-form-entry">
        <input type="submit" name="submit" value="Submit">
      </div>
    </div>
  </form>
  <script>
    $("#ss-form").submit(function (event) {
      event.preventDefault();
      $.post('https://docs.google.com/spreadsheet/formResponse?formkey=dGd3WHdkOTFRMzMyd0J1ZGFLVW50WlE6MQ&amp;ifq', $("#ss-form").serialize(),
        function () {
          alert('Thanks!');
        }
      );
    });
  </script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:01:43.887

只需将所有脚本包装成：

```
$(function(){ ... }); 
```

例如

```
$(function(){

    $.support.cors = true; // for cross-origin requests in IE

    $("#ss-form").submit(function(event) {   
        event.preventDefault();   
        $.post('https://docs.google.com/spreadsheet/formResponse?formkey=dGd3WHdkOTFRMzMyd0J1ZGFLVW50WlE6MQ&amp;ifq', $("#ss-form").serialize(),  
          function() {  
              alert('Thanks!');  
          }  
        );  
      });

}); 
```

当文档未加载到末尾并且 DOM 中尚不存在事件目标时，将分配您的事件回调。如果您将脚本包装到`$(function(){ ... });`其中，则可以确保代码将在页面加载后执行。

# android - JSON + PHP + Java - Android 登录到 mysql

> ID：12961877
> 
> 赞同：0
> 
> 时间：2012-10-18T19:02:58.010
> 
> 标签：android, mysql, json

我遇到了问题...当用户注册时，我试图将设备的 udid 存储到我的数据库中...我在 logcat 中收到此错误：

```
10-18 17:17:08.141: E/JSON(1712): <br />
10-18 17:17:08.141: E/JSON(1712): <b>Warning</b>:  Missing argument 4 for DB_Functions::storeUser(), called in /home/matbest1/public_html/android_login_api/index.php on line 64 and defined in <b>/home/matbest1/public_html/android_login_api/include/DB_Functions.php</b> on line <b>25</b><br />
10-18 17:17:08.141: E/JSON(1712): {"tag":"register","success":0,"error":1,"error_msg":"Error occured in Registartion"}
10-18 17:17:08.151: E/JSON Parser(1712): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject
10-18 17:17:08.381: D/dalvikvm(1712): GC_CONCURRENT freed 296K, 5% free 9394K/9799K, paused 2ms+4ms 
```

我正在尝试将 udid 存储在数据库中......继承人的注册活动：

```
public JSONObject registerUser(String name, String email, String password, String uid){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", register_tag));
    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    params.add(new BasicNameValuePair("uid", uid));

    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
    // return json
    return json;
} 
```

登记：

```
UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.registerUser(name, email, password, uid); 
```

php代码：

```
 public function storeUser($name, $email, $password, $uid) {
    $uuid = $uid;
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())");
    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

&

```
 if ($tag == 'register') {
        // Request type is Register new user
        $name = $_POST['name'];
        $email = $_POST['email'];
        $password = $_POST['password'];
        $uid = $_POST['uid'];

        // check if user is already existed
        if ($db->isUserExisted($email)) {
            // user is already existed - error response
            $response["error"] = 2;
            $response["error_msg"] = "User already existed";
            echo json_encode($response);
        } else {
            // store user
            $user = $db->storeUser($name, $email, $password);
            if ($user) {
                // user stored successfully
                $response["success"] = 1;
                $response["uid"] = $user["unique_id"];
                $response["user"]["name"] = $user["name"];
                $response["user"]["email"] = $user["email"];
                $response["user"]["created_at"] = $user["created_at"];
                $response["user"]["updated_at"] = $user["updated_at"];
                echo json_encode($response);
            } else {
                // user failed to store
                $response["error"] = 1;
                $response["error_msg"] = "Error occured in Registartion";
                echo json_encode($response);
            }
        }
    } else {
        echo "Invalid Request";
    }
} else {
    echo "Access Denied";
} 
```

有人能帮我吗？我是新手...非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:16:44.507

服务器响应包含一个以 HTML 显示的 PHP 错误。

因此，您的 android 应用程序无法解析任何 JSON 是正常的。

首先，您需要确保您的 android 应用程序发送了所有需要的信息（PHP 等待的 4 个参数），因为 PHP 错误清除告诉您它缺少参数 #4：$uid

在您的 php 文件的开头尝试 a `print_r($_REQUEST);` 以查看 PHP 是否接收所有参数。如果没有：问题出在您的 android 应用程序中（uid 是字符串？整数？你需要转换它吗？）

# php - Twig 模板中的 CKEditor + Symfony2

> ID：12961884
> 
> 赞同：1
> 
> 时间：2012-10-18T19:03:23.453
> 
> 标签：php, symfony, ckeditor, twig

我想在我的 Symfony 2 项目中使用 CK Editor。我下载了 zip 文件，解压缩并将其放在我的 js 文件夹中，我将它包含在我想要编辑器的页面中。我正在关注这个问题[Click Here](https://stackoverflow.com/questions/8151889/how-to-add-or-embed-ckeditor-in-php-page)现在我被困在第 6 步。如何在我的 twig 模板中包含该 php。

第 6 步中需要包含的 php 是

```
<?php

// Make sure you are using a correct path here.
include_once 'ckeditor/ckeditor.php';

$ckeditor = new CKEditor();
$ckeditor->basePath = '/ckeditor/';
$ckeditor->config['filebrowserBrowseUrl'] = '/ckfinder/ckfinder.html';
$ckeditor->config['filebrowserImageBrowseUrl'] = '/ckfinder/ckfinder.html?type=Images';
$ckeditor->config['filebrowserFlashBrowseUrl'] = '/ckfinder/ckfinder.html?type=Flash';
$ckeditor->config['filebrowserUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
$ckeditor->config['filebrowserImageUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
$ckeditor->config['filebrowserFlashUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
$ckeditor->editor('CKEditor1'); 
```

?>

我可以用包含 html 的任何变量替换名称并将其从控制器传递给查看吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T08:29:46.567

您可以创建表单类型

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class CkeditorType extends AbstractType
{
  public function setDefaultOptions(OptionsResolverInterface $resolver)
  {
    $resolver->setDefaults(array(
      'attr' => array('class' => 'ckeditor')
    ));
  }

  public function getParent()
  {
    return 'textarea';
  }

  public function getName()
  {
    return 'ckeditor';
  }
} 
```

将此添加到您的服务中

```
services:
    ckeditor:
        class: Bundle\myBundle\Form\Type\CkeditorType
        tags:
            - { name: form.type, alias: ckeditor } 
```

并像这样使用它

```
->add('myfield', 'ckeditor') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:45:02.593

CKEditor 只需要 HTML 和 Javascript。PHP 文件只是用作实用程序助手来发出正确的 HTML 和 Javascript。

只需包含文件的链接并在您的树枝模板中`ckeditor.js`插入一个带有该类的文本区域。*（我还发现我需要一个 id 标签，但它的值是什么并不重要）* CKEditor 将处理其余的。`ckeditor`

 *```
<html>
<head>
    <title>Simple CKEditor Example</title>
    <script type="text/javascript" src="ckeditor.js"></script>
</head>
<body>
    <form action="" method="post">
        <textarea class="ckeditor" cols="80" id="editor1" name="editor1" rows="10"></textarea>
        <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

在您引用的示例中，他们还使用[CKFinder](http://ckfinder.com/)文件管理器。它*确实*需要 PHP 来处理文件管理器功能。该项目的集成说明超出了您原始问题的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:00:58.170

为什么不为此功能使用捆绑包？有[很多](http://knpbundles.com/search?q=ckeditor)！

我已经尝试过[TrsteelCkeditorBundle](https://github.com/trsteel88/TrsteelCkeditorBundle)并且效果很好！易于设置和配置。*

# jquery - 使用 jquery 将页面标题更改为我的面包屑中的最后一项

> ID：12961888
> 
> 赞同：0
> 
> 时间：2012-10-18T19:03:37.547
> 
> 标签：jquery, title, breadcrumbs

我正在使用面包屑，需要将页面标题更改为最后一个面包屑中的文本。这可能吗？

```
<div class="span12">
<div class="breadcrumb clearfix">
<span itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="">
 <a itemprop="url" title="domain" href="mydomain.com">
  <span itemprop="title">Home</span>
 </a>
</span>
  <span class="arrow-space">></span>
 <span itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="">
    <a itemprop="url" title="tape" href="/collections/tape">
     <span itemprop="title">tape</span>
    </a>
 </span>
<span class="arrow-space">></span>
  <span itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="">
    <a itemprop="url" title="black" href="/collections/tape/black">
      <span itemprop="title">black</span>
    </a>
</span>
</div>
</div> 
```

不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:12:55.437

```
document.title = $("span:last", ".breadcrumb").text() ​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:39:33.257

这是对的！

```
 var newhefa= $(".breadcrumb").find("span:last").text()
 document.title = newhefa 
```

# php - PHP将父属性值复制到子属性值

> ID：12961889
> 
> 赞同：2
> 
> 时间：2012-10-18T19:03:42.807
> 
> 标签：php, inheritance, parent-child

从下面的代码中，有没有人知道从 B 中定义的方法将 $parent->foo 和 $parent->foo1 的值分别放入 $child->bar 和 $child->bar1 的方法？

我可以用 $child->bar=$parent->foo 和 $child->bar1=$parent->foo1 在对象之外复制值，但感觉孩子（甚至是父母）中可能有一个简单的方法就此而言）对于这种情况。我的父对象正在从 html 输入框中获取 foo 的值。

```
Class A 
{
    public $foo="someText";
    public $foo1="someOtherText";
}

Class B extends A 
{
    public $bar;
    public $bar1;

    //theoretical function Id like to use
    public copyParentcontents() 
    {

    }
}

$parent = new A();
$child = new B(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:11:50.737

```
Class B extends A {

public $bar;
public $bar1;

//theoretical function Id like to use
public copyParentcontents($parent) {
    if(get_class($parent)=="A"){
        $this->$bar = $parent->foo;
        $this->$bar1 = $parent->foo1;
    }else{
    //You could throw an exception here
    }
}

} 
```

接着：

```
$parent= new A; $child= new B; 
$parent->foo = "modifiedText";
$child->copyParentcontents($parent); 
```

也许这就是你需要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:12:12.067

在您的示例中，`$child`将从以下位置继承类参数`$parent`：

```
echo $child->foo; // prints "someText"; 
```

# python - python OptionParser.has_option 错误

> ID：12961890
> 
> 赞同：1
> 
> 时间：2012-10-18T19:03:47.550
> 
> 标签：python, optionparser

我的程序中有以下几行

```
parser = OptionParser()

parser.add_option("-t","--TIMEOUT", dest="timeout", type="int",  help="timeout in seconds")

if parser.has_option("-t") and options.timeout<=0:
   print "Timeout if specified must be greater than zero"
   sys.exit(CLI_ERROR) 
```

上面的打印语句正在打印，因为即使没有为此脚本指定 -t 选项， parser.has_option("-t") 的评估结果也为 true。我在这里错过了什么吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:10:56.037

您必须首先实际解析选项。`parser.has_option`只是检查解析器是否理解给定的选项（它确实，因为你曾经`add_option`添加它）。

因此，使用

```
from optparse import OptionParser

parser = OptionParser()

parser.add_option("-t","--TIMEOUT", dest="timeout", type="int",  help="timeout in seconds")

options, args = parser.parse_args()
if options.timeout is not None and options.timeout <= 0:
    print "Timeout if specified must be greater than zero"
    sys.exit(CLI_ERROR) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:09:52.547

```
(options, args) = parser.parse_args()
if options.timeout is not None and options.timeout <=0 :
..... 
```

你应该看看 docopt [https://github.com/docopt/docopt](https://github.com/docopt/docopt)。非常适合命令行界面

# php - 如何在设定的角度使用 php imagick 扭曲透视图

> ID：12961891
> 
> 赞同：2
> 
> 时间：2012-10-18T19:03:52.230
> 
> 标签：php, imagick, angle, distortion

我有一个图像，我试图将其扭曲为 30 度角。

到目前为止，我正在从一个示例中处理一些任意控制点。

到目前为止我的代码：

```
$im = new imagick($thefile);

      $points = array( 10, 10, 10, 5,

                    10, $im->getImageHeight() - 20,
                    10, $im->getImageHeight() - 5,

                    $im->getImageWidth() - 10, 10,
                    $im->getImageWidth() - 10, 20,

                    $im->getImageWidth() - 10, $im->getImageHeight() - 10,
                    $im->getImageWidth() - 10, $im->getImageHeight() - 30);
      $im->setImageMatte(true);
      $im->setImageVirtualPixelMethod( imagick::VIRTUALPIXELMETHOD_TRANSPARENT );
      $im->distortImage( Imagick::DISTORTION_PERSPECTIVE, $points, TRUE );
      $im->writeImage($thefile); 
```

另外我不想丢失任何图像，所以我需要弄清楚新图像应该是什么大小才能不丢失任何图像。

[扭曲 http://sadtoe.com/temp/distort.jpg](http://sadtoe.com/temp/distort.jpg)

感谢您的任何见解

编辑：查看我如何在 Photoshop 中创建示例图像后，我注意到旋转设置为 30，水平倾斜也是如此。因此，如果我能找到一种旋转和倾斜的方法，透视失真可能不是最简单的方法。

# c# - Silverlight 导航与 MVVM 模式

> ID：12961893
> 
> 赞同：1
> 
> 时间：2012-10-18T19:04:06.847
> 
> 标签：c#, mvvm, navigation, silverlight-5.0

我关注了 Robert Garfoot 的博客[“Silverlight Navigation With the MVVM Pattern”](http://garfoot.com/blog/2010/09/silverlight-navigation-with-the-mvvm-pattern/)。

它允许您以一种不同的优雅方式从页面的代码隐藏中进行导航处理。

他使您的 ViewModel 可以使用 Navigate、GoBack 和 GoForward，因此您可以让代码隐藏没有导航代码。

它工作得很漂亮。

**但是我想从 ViewModel 访问一些事件（Navigated、Navigating、NavigationFailed 等）。我不知道该怎么做。这是使用接口和掌握 c# 的问题。**

对不起，如果它有点长，但我会尽量让它简短：

我将把所有这些类放在一个名为 LibrariesSL.MVVMNavigation 的命名空间中：

他创建了一个 INavigationService 接口：

```
public interface INavigationService {
    void NavigateTo(string url);
    void GoBack();
    void GoForward();
} 
```

NavigationService 类：

```
public class NavigationService : INavigationService {
    private readonly System.Windows.Navigation.NavigationService _navigationService;
    public NavigationService(System.Windows.Navigation.NavigationService navigationService) {
        _navigationService = navigationService;
    }

    public void NavigateTo(string url) {
        _navigationService.Navigate(new Uri(url, UriKind.Relative));
    }

    public void GoBack() {
       ...
    }

    public void GoForward() {
       ...
    }
} 
```

然后是用于扩展 ViewModel 的 INavigable 接口：

```
public interface INavigable {
    INavigationService NavigationService { get; set; }
} 
```

在 ViewModel 中，我们只是继承并使用它：

```
public class CustomerViewModel : ViewModelsBase, INavigable {

   MyDomainContext _Context = new MyDomainContext ();
   ...

   ...

  public void OnShowCustomer(object param) {
      int selectedCustomerID = SelectedCustomer.CustomerID;
      // Here we perform navigation
      NavigationService.NavigateTo(string.Format("/CustomerDetails?CustomerID={0}", 
                                                                  selectedCustomerID));
  }

   #region INavigable

   public INavigationService NavigationService { get; set; }

   #endregion 
```

我们还必须创建一个附加到视图的依赖属性：

```
public static class Navigator {
    public static INavigable GetSource(DependencyObject obj) {
        return (INavigable)obj.GetValue(SourceProperty);
    }

    public static readonly DependencyProperty SourceProperty =
         DependencyProperty.RegisterAttached("Source", typeof(INavigable), typeof(Navigator), 
                                         new PropertyMetadata(OnSourceChanged));

    private static void OnSourceChanged(DependencyObject d, 
                                         DependencyPropertyChangedEventArgs e) {
        Page page = (Page)d;
        page.Loaded += PageLoaded;
    }

    private static void PageLoaded(object sender, RoutedEventArgs e) {
        Page page = (Page)sender;
        INavigable navSource = GetSource(page);
        if (navSource != null) {
            navSource.NavigationService = new NavigationService(page.NavigationService);
        }
    }
} 
```

然后在视图中我们这样做：

```
<navigation:Page x:Class="UsingQueryStrings.Views.Customers" 
      ...
      xmlns:MVVMNavigation="clr-namespace:LibrariesSL.MVVMNavigation"
      MVVMNavigation:Navigator.Source="{Binding}"
 > 
```

**我想访问 System.Windows.Navigation.NavigationService 中存在的事件 Navigated、Navigating 和 NavigationFailed。**

# python - Can I replace django choicefield display value with context?

> ID：12961895
> 
> 赞同：0
> 
> 时间：2012-10-18T19:04:16.737
> 
> 标签：python, django, forms, replace

I have a dropdown field that only needs to store two values on the backend, as users will always be choosing between the home team and the away team. The away team, of course, will change week to week.

Ideally, all I would do is change the display text on the {{ form.field }}. So, for example:

```
<option value="Opponent">Opponent</option> 
```

would display as

```
<option value="Opponent">OSU</option> 
```

I've tried a few approaches. At first, I hand-coded the various form fields, but then I didnm't get errors when invalid data was entered. I'm toying now with a template tag that would use replace(), but so far I'm not having any luck.

Any ideas? I feel like there's something basic I'm missing. Thanks much.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:12:17.430

`choices` can be any iterable, so define one that looks up the team name:

```
class ChoiceList(object):
    def __iter__(self):
        yield ("home", "Home")
        yield ("opponent", get_weekly_opponent_name())

team = fields.ChoiceField(choices=ChoiceList()) 
```

# visual-studio-2010 - 单元测试项目访问器不会创建所有私有方法

> ID：12961900
> 
> 赞同：0
> 
> 时间：2012-10-18T19:04:27.963
> 
> 标签：visual-studio-2010, unit-testing, c#-4.0, dynamics-crm-2011

我有一个项目，我之前创建了一个需要自动生成的访问器类的单元测试。一切都很好。但是后来我在同一个项目中创建了一个新类，我需要对其进行单元测试。当我查看 Accessor 类时，新方法不存在（尽管其他一些受保护的方法存在）。

我转到类文件并右键单击并选择 Created Private Accessor，但受到两个错误消息框的欢迎，“'Foo'的私有访问器创建失败。”和“对组件'Foo'的引用已经存在于项目中。”

再进行一些故障排除，我发现如果任何私有方法的参数是我自动生成的 CRM 实体类型之一，它就不会出现在 Accessor 类中。（不确定它是否与 CRM 相关，或者只是 dll 本身）。为什么我的方法不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:04:27.963

我终于咬紧牙关，关闭了我运行的所有 VS 实例，并打开了一个新实例，重新编译，它们显示得很好。希望我能把那 2 个小时的故障排除回来...... :(

# arrays - 如何在字符数组中搜索字符变量？

> ID：12961905
> 
> 赞同：1
> 
> 时间：2012-10-18T19:04:44.903
> 
> 标签：arrays, variables, search, fortran, character

好的，在我的程序中，我打开一个包含三列的 .txt 文件。第 1 列有整数，第 2 列有名称（字符串），第 3 列有实数。我已经弄清楚如何搜索用户输入的项目的整数和实数（将变量与存储列的数组进行比较）......但是当我尝试在字符数组中搜索用户输入的名称时，它永远不会起作用。这是我所有的代码...我在 CASE(2) 中寻求帮助

~ n 保存文件中的行数

```
PROGRAM database
IMPLICIT NONE

CHARACTER(30)::file, search
INTEGER::err, n, m, i, k, searchtype, recordnum
LOGICAL:: alive
REAL:: grade
REAL, ALLOCATABLE:: arrayr(:)
INTEGER, ALLOCATABLE:: arrayi(:)
CHARACTER(15), ALLOCATABLE:: arrayc(:)
CHARACTER(15)::name

101 FORMAT(A)

DO
    WRITE(*,101) "What is the filename?"
    READ(*,*) file

    INQUIRE(FILE=file, EXIST=alive)
    IF (alive.EQV..TRUE.) THEN
        WRITE(*,101) "The file exists"
        OPEN (UNIT=11, FILE=file, STATUS="OLD", ACTION="READ", IOSTAT=err)
        IF (err .NE. 0) THEN    
            WRITE(*,'(2A)')"There was an error opening ", file
            STOP
        END IF
        EXIT
    ELSE IF (alive.EQV..FALSE.) THEN        
        WRITE(*,'(2A)') "There is no file by the name of: ", file
        CYCLE
    END IF
END DO

n= 0
DO
    READ(11,*,IOSTAT=k)
    IF(k.EQ.-1) EXIT
    n=n+1
END DO
REWIND(11)
ALLOCATE(arrayi(n),arrayc(n),arrayr(n))

DO i=1,n,1
    READ(11,'(I4,A,F12.2)') arrayi(i), arrayc(i), arrayr(i)
END DO

outer: DO
    DO
        WRITE(*,101)"How would you like to search the file?"
        WRITE(*,101)"1) By record number"
        WRITE(*,101)"2) By name"
        WRITE(*,101)"3) By rating"
        READ(*,*) searchtype
        SELECT CASE (searchtype)
            CASE(1)
                WRITE(*,101) "Please enter the record number:"
                READ(*,*) recordnum
                m=0
                DO i=1,n,1
                    IF (arrayi(i).EQ.recordnum) THEN
                        WRITE(*,'(I4,A,F12.2)')arrayi(i),arrayc(i), arrayr(i)
                    ELSE IF (i==n) THEN
                        write(*,*)"Sorry dude. The name you entered     was not found. Search failed"
                    END IF
                END DO
                EXIT
            CASE(2)
                WRITE(*,101) "Please enter the name:"
                READ(*,*) name
                m=0
                DO i=1,n
                    IF (name.EQ.arrayc(i)) THEN
                        WRITE(*,'(I4,A,F12.2)')arrayi(i), arrayc(i), arrayr(i)
                    ELSE IF (i==n) THEN
                        write(*,*)"Sorry dude. The name you entered was not found. Search failed"
                    END IF
                END DO
                EXIT
            CASE(3)
                WRITE(*,101) "This will return all graders greater than your search term"
                WRITE(*,101) "Please enter the minimum grade:"
                READ(*,*) grade
                m=0
                DO i=1,n,1
                    IF (arrayr(i).GT.grade) THEN
                        WRITE(*,'(I4,A,F12.2)')arrayi(i), arrayc(i), arrayr(i)
                    ELSE IF (i==n) THEN
                        write(*,*)"Sorry dude. The name you entered was not found. Search failed"
                    END IF
                END DO
                EXIT
            CASE DEFAULT
                WRITE(*,101) "Invalid entry. Please enter 1, 2, or 3."
                CYCLE
        END SELECT
    END DO

    inner: DO
        WRITE(*,101)"Would you like to search again? (Y/N)"
        READ(*,*)search
            SELECT CASE (search)
                CASE("Y","y")
                    CYCLE outer
                CASE("N","n")
                    EXIT outer
                CASE DEFAULT
                    WRITE(*,101)"Invalid entry. please enter Y or N."
                    CYCLE inner
                END SELECT
    END DO inner
END DO outer

END PROGRAM database 
```

每次我在程序中选择 case(2)，然后在字符 arrayc 中输入我知道存在的名称时，它都会跳过 if 子句 where (name.EQ.arrayc) 并返回未找到该名称。请帮忙！我对其他方法持开放态度。我不明白为什么会这样。

这个链接上有一个截图：http: [//tinypic.com/r/33tmmuc/6](http://tinypic.com/r/33tmmuc/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:24:54.340

**----编辑-解决方案----**

您以一种奇怪的格式读取字符串，它以空格开头。使用此进行比较：

```
if (name==adjustl(arrayc(i))) then 
```

检查手册以了解它的作用。

考虑去掉大写字母和过时的 .EQ。运营商。

使用更好的格式，不要为它们使用标签，而是使用字符串变量或常量。某事作为

```
'(i4,2x,a15,F12.0)' 
```

可能没问题，检查数字的正确值。请注意，`F12.2`读`100`作`1.00`.

你也错误地执行了循环。找到答案后，`exit`应该就在原地。

**----编辑-解决方案----**

为我工作：

```
CHARACTER(15), ALLOCATABLE:: arrayc(:)
CHARACTER(30)::name
INTEGER:: n

    allocate(arrayc(1))
    arrayc = (/"ok1","ok2"/)
    n=2
    write(*,*) arrayc(1)

    WRITE(*,*) "Please enter the name:"
    READ(*,*) name
    m=0
    DO i=1,n,1
        IF(name.EQ.arrayc(i)) THEN
            WRITE(*,'(A)') arrayc(i)
        ELSE IF (name.NE.arrayc(i)) THEN
            m=m+1
        END IF
    END DO
    IF (m.EQ.n) THEN
        WRITE(*,*)"Sorry dude. The name you entered was not found. Search failed"
    END IF
end 
```

跑：

```
> ./a.out 
 ok1            
 Please enter the name:
ok1
ok1 
```

一定要正确`n`。还要尝试打印字符数组以确保。注意不要比较`name`哪个太长（你的变量比数组中的字符串长两倍）。您在循环后比较循环索引值的做法是有问题的，它的值是未定义的。

我会完全重写循环结构。比如：

```
 ...
    WRITE(*,*) "Please enter the name:"
    READ(*,*) name

    do i=1,n
        if(name.EQ.arrayc(i)) then
            write(*,'(A)') arrayc(i)
            exit
        else if (i==n) then
            write(*,*)"Sorry dude. The name you entered was not found. Search failed"
        end if

    end do

end 
```

# java - 400 个整数的数组

> ID：12961906
> 
> 赞同：-5
> 
> 时间：2012-10-18T19:04:51.020
> 
> 标签：java, arrays

为什么 Netbeans 不喜欢这样？

```
int[] newArray = new int[400];
newArray = {8,2,22,97,...,48}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:06:11.397

像下面那样做，因为你只能在初始化期间做这种**分配**。

另请注意，**在这种情况下不需要（允许）尺寸参数**

```
 int[] newArray = new int[]{8,2,22,97,38,15,0,40,0,75,4,5,7,78,52,12,50,77,91,8,49,49,99,40,17,81,18,57,60,87,17,40,98,43,69,48,4,56,62,0,81,49,31,73,55,79,14,29,93,71,40,67,53,88,30,3,49,13,36,65,52,70,95,23,4,60,11,42,69,24,68,56,1,32,56,71,37,2,36,91,22,31,16,71,51,67,63,89,41,92,36,54,22,40,40,28,66,33,13,80,24,47,32,60,99,3,45,2,44,75,33,53,78,36,84,20,35,17,12,50,32,98,81,28,64,23,67,10,26,38,40,67,59,54,70,66,18,38,64,70,67,26,20,68,2,62,12,20,95,63,94,39,63,8,40,91,66,49,94,21,24,55,58,5,66,73,99,26,97,17,78,78,96,83,14,88,34,89,63,72,21,36,23,9,75,0,76,44,20,45,35,14,0,61,33,97,34,31,33,95,78,17,53,28,22,75,31,67,15,94,3,80,4,62,16,14,9,53,56,92,16,39,5,42,96,35,31,47,55,58,88,24,0,17,54,24,36,29,85,57,86,56,0,48,35,71,89,7,5,44,44,37,44,60,21,58,51,54,17,58,19,80,81,68,5,94,47,69,28,73,92,13,86,52,17,77,4,89,55,40,4,52,8,83,97,35,99,16,7,97,57,32,16,26,26,79,33,27,98,66,88,36,68,87,57,62,20,72,3,46,33,67,46,55,12,32,63,93,53,69,4,42,16,73,38,25,39,11,24,94,72,18,8,46,29,32,40,62,76,36,20,69,36,41,72,30,23,88,34,62,99,69,82,67,59,85,74,4,36,16,20,73,35,29,78,31,90,1,74,31,49,71,48,86,81,16,23,57,5,54,1,70,54,71,83,51,54,69,16,92,33,48,61,43,52,1,89,19,67,48}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:06:50.987

您不能以这种方式分配数组。相反，您应该使用正确的初始化语法：

```
int[] newArray = new int[]{1,2,3,4,...}; 
```

NetBeans 抱怨是因为`newArray = {1,2,3,4,...}`语法不好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T19:06:19.350

你试过这种语法吗？

```
 int[] newArray = new int[] {8,2,22,97,38,15,0,40,0,75,4,5,7,78,52,12,50,77,91,8,49,49,99,40,17,81,18,57,60,87,17,40,98,43,69,48,4,56,62,0,81,49,31,73,55,79,14,29,93,71,40,67,53,88,30,3,49,13,36,65,52,70,95,23,4,60,11,42,69,24,68,56,1,32,56,71,37,2,36,91,22,31,16,71,51,67,63,89,41,92,36,54,22,40,40,28,66,33,13,80,24,47,32,60,99,3,45,2,44,75,33,53,78,36,84,20,35,17,12,50,32,98,81,28,64,23,67,10,26,38,40,67,59,54,70,66,18,38,64,70,67,26,20,68,2,62,12,20,95,63,94,39,63,8,40,91,66,49,94,21,24,55,58,5,66,73,99,26,97,17,78,78,96,83,14,88,34,89,63,72,21,36,23,9,75,0,76,44,20,45,35,14,0,61,33,97,34,31,33,95,78,17,53,28,22,75,31,67,15,94,3,80,4,62,16,14,9,53,56,92,16,39,5,42,96,35,31,47,55,58,88,24,0,17,54,24,36,29,85,57,86,56,0,48,35,71,89,7,5,44,44,37,44,60,21,58,51,54,17,58,19,80,81,68,5,94,47,69,28,73,92,13,86,52,17,77,4,89,55,40,4,52,8,83,97,35,99,16,7,97,57,32,16,26,26,79,33,27,98,66,88,36,68,87,57,62,20,72,3,46,33,67,46,55,12,32,63,93,53,69,4,42,16,73,38,25,39,11,24,94,72,18,8,46,29,32,40,62,76,36,20,69,36,41,72,30,23,88,34,62,99,69,82,67,59,85,74,4,36,16,20,73,35,29,78,31,90,1,74,31,49,71,48,86,81,16,23,57,5,54,1,70,54,71,83,51,54,69,16,92,33,48,61,43,52,1,89,19,67,48}; 
```

# ios - Cocos2d：在多点触控环境中处理从 CCMenu（或类似）项目之外开始的触控

> ID：12961907
> 
> 赞同：0
> 
> 时间：2012-10-18T19:04:50.887
> 
> 标签：ios, cocos2d-iphone, multi-touch

我在我的 AppDelegate 中启用了多点触控。在我的游戏场景 InputLayer 中，我添加了一个 CCMenu，其中一些 CCMenuItemSprite 用作按钮，一个 SneakyJostic 作为控制器。在我的输入层中，我启用了触摸，以这种方式符合“标准触摸委托”协议，因为我希望能够评估 CCMenu 和 SneakyJoystic 控制器之外的一些用户触摸。

当用户开始触摸 SneakyJoystick 或 CCMenu 类实例区域之外的屏幕时，当用户的手指位置到达菜单或游戏实例上方时，实例不会检测到触摸，而是保持在 touchMoved（和/或然后是场景层的 touchEnded) 方法。

有没有办法防止这种情况？我的意思是，我**怎样才能让菜单或游戏实例来控制外部开始的触摸？**

阅读[Cocos2d 文档](http://www.cocos2d-iphone.org/wiki/doku.php/tips%3atouchdelegates)，似乎 CCMenu 已经符合多点触控协议，因此我应该能够提高其优先级。但我害怕搞砸这个。我试图更改图层的优先级，但它崩溃了。

有什么建议么？

编辑：您可以在我在各种书籍中找到的各种示例项目中看到我所描述的内容。基本上，当有人使用“SneakyJostic”或在图层上添加“CCMenu”时（在任何项目中），如果您从对象外部开始触摸并移动手指 util 触摸对象，它不会检测到它。如何在不让我的应用程序崩溃的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:19:31.060

一旦场景开始获取触摸事件，它将获取整个触摸移动直到 touchEnded。没有像在某些基于鼠标的系统中那样有用的“touchEntered”或“touchExited”类型的事件。

您可以尝试的一件事是让场景处理事件，执行命中测试，然后根据需要将事件转发到操纵杆/菜单上（您可以简单地直接调用 touchesMoved；您可能必须合成 touchBegan/touchEnded手指移入/移出操纵杆/菜单区域时的事件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:52:15.430

我不确定你到底想做什么，但如果我不进入编码部分，你可以通过在你的精灵或菜单图像中添加图像的一些透明部分来扩展菜单的触摸区域。此外，对于操纵杆，您还可以将 Guessers 用于您的控制器。

# html - 响应式网页设计：获取最右边的浮动元素

> ID：12961908
> 
> 赞同：0
> 
> 时间：2012-10-18T19:04:51.130
> 
> 标签：html, css, css-float, responsive-design

我想使用响应式网页设计来设计网页，以便布局适应屏幕尺寸。如果屏幕宽度允许，我有一些带有文本的元素彼此相邻。我为这些元素使用了 float:left 。现在，如果屏幕很小，文章会按预期显示在彼此下方。

现在我的问题是如何获得最右边的文章（出现在屏幕右边缘附近），因为它们必须有右边框，而其他文章没有。这可能仅适用于 css 和 html 吗？

编辑：我可以用显示替换浮动：左：内联，但问题保持不变。

# django - django-storages 对 s3 IAM 用户需要什么权限？

> ID：12961910
> 
> 赞同：14
> 
> 时间：2012-10-18T19:04:54.000
> 
> 标签：django, amazon-s3, django-storage, amazon-iam

正如问题所问的那样，锁定的 s3 IAM 用户成功使用 django-storages 所需的最低权限是多少？目前我用过类似的东西

```
{
  "Statement": [
    {
      "Effect": "Allow",
      "Action": ["s3:ListAllMyBuckets"],
      "Resource": "arn:aws:s3:::*"
    },
    {
      "Effect": "Allow",
      "Action": ["s3:ListBucket",
                 "s3:GetBucketLocation",
                 "s3:ListBucketMultipartUploads",
                 "s3:ListBucketVersions"],
      "Resource": "arn:aws:s3:::bucket-name"
    },
    {
      "Effect": "Allow",
      "Action": ["s3:*Object*",
                 "s3:ListMultipartUploadParts",
                 "s3:AbortMultipartUpload"],
      "Resource": "arn:aws:s3:::bucket-name/*"
    }
  ]
} 
```

这实际上可能是矫枉过正。还有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-01T04:19:36.127

Fiver's answer is not enough to run `collectstatic` in `django-storages`. I used everything [@jvc26](https://stackoverflow.com/q/12961910/1092815) did except for `s3:ListAllMyBuckets`. I would assume `s3:ListBucketVersions` is not needed either.

```
{
  "Statement": [
    {
      "Effect": "Allow",
      "Action": ["s3:ListBucket",
                 "s3:GetBucketLocation",
                 "s3:ListBucketMultipartUploads",
                 "s3:ListBucketVersions"],
      "Resource": "arn:aws:s3:::bucket-name"
    },
    {
      "Effect": "Allow",
      "Action": ["s3:*Object*",
                 "s3:ListMultipartUploadParts",
                 "s3:AbortMultipartUpload"],
      "Resource": "arn:aws:s3:::bucket-name/*"
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-07T01:28:45.587

我不是 100% 确定 django-storages，因为我使用基于 django [-storages的 S3 部分的 cuddly-buddly。](https://github.com/kylemacfarlane/django-cb-storage-s3)我只是发现 cuddlybuddly 使用起来更简单，效果更好，而且这个名字很棒！

无论如何，我有一个使用 Django+S3 的项目，并发现以下 AWS 策略是我的项目所需的最低要求：

```
{
  "Version": "2008-10-17",
  "Id": "Policy123",
  "Statement": [
    {
      "Sid": "Stmt123",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::some-aws-user"
      },
      "Action": "s3:ListBucket",
      "Resource": "arn:aws:s3:::bucket-name"
    },
    {
      "Sid": "Stmt234",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::some-aws-user"
      },
      "Action": [
        "s3:DeleteObject",
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::bucket-name/*"
    }
  ]
} 
```

我有需要上传、检索和删除的 Django 视图，因此可以根据您的需要使用/省略这些相应的操作。显然，任何人都需要更改用户和存储桶名称。

此外，为了完整起见，因为这对我来说并不明显，请注意以下有关[AWS 策略](http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_SpecialInfo.html)的限制：

> *   策略的最大大小为 20 KB
>     
>     
> *   Resource 的值必须以存储桶名称或存储桶名称及其下的路径 (bucket/ *) 为前缀。如果只指定了存储桶名称，没有尾部 /*，则该策略适用于存储桶。
>     
>     
> *   每个策略必须具有唯一的策略 ID (Id)
>     
>     
> *   策略中的每个语句都必须具有唯一的语句 ID (sid)
>     
>     
> *   每个策略必须仅涵盖单个存储桶和该存储桶中的资源（在编写策略时，不要包含引用其他存储桶或其他存储桶中的资源的语句）

最后，对于任何想要这样做的人，不要更改`Version`键中的日期值，亚马逊使用此值来解析策略格式。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-28T03:31:47.107

在此处参考官方 Django Storages 官方文档：[https ://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html#iam-policy](https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html#iam-policy)

您只需将该权限复制并粘贴到您的 IAM 策略中即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-25T14:32:35.203

这对我行得通：

```
{
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket",
                "s3:GetBucketLocation",
                "s3:ListBucketMultipartUploads",
                "s3:ListBucketVersions"
            ],
            "Resource": "arn:aws:s3:::bucket_name_here"
        },
        {
            "Effect": "Allow",
            "Action": [
                "s3:*Object*",
                "s3:ListMultipartUploadParts",
                "s3:AbortMultipartUpload"
            ],
            "Resource": "arn:aws:s3:::bucket_name_here/*"
        }
    ]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-31T18:45:02.300

我认为无论您使用 IAM 还是其他类型的权限，都应该授予全球读取访问权限。所以我成功地使用了这个配置：

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "PublicReadGetObject",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": [
                "arn:aws:s3:::buuuuu",
                "arn:aws:s3:::buuuuu/*"
            ]
        }
    ]
} 
```

# java - NullPointerException - 在放心运行非常简单的测试时

> ID：12961913
> 
> 赞同：0
> 
> 时间：2012-10-18T19:05:03.970
> 
> 标签：java, eclipse, groovy, rest-assured

尝试运行此代码时出现以下错误：

```
import com.jayway.restassured.response.Response;
import static com.jayway.restassured.RestAssured.*;

public class TestRestAssured {
public static void main (String args[]){
// Call the REST service
Response res = get("http://10.213.75.170:5000/bla"); // <--- Crashes on this line.

    // Get the JSON payload
    String json = res.asString();
 }

   } 
```

* * *

```
java.lang.NullPointerException
    at org.codehaus.groovy.reflection.GeneratedMetaMethod$DgmMethodRecord.loadDgmInfo(GeneratedMetaMethod.java:163)
    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.registerMethods(MetaClassRegistryImpl.java:155)
    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.<init>(MetaClassRegistryImpl.java:83)
    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.<init>(MetaClassRegistryImpl.java:61)
    at groovy.lang.GroovySystem.<clinit>(GroovySystem.java:29)
    at org.codehaus.groovy.runtime.InvokerHelper.<clinit>(InvokerHelper.java:49)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.createMap(ScriptBytecodeAdapter.java:619)
    at com.jayway.restassured.internal.ResponseParserRegistrar.<init>(ResponseParserRegistrar.groovy)
    at com.jayway.restassured.RestAssured.<clinit>(RestAssured.java:336)
    at TestRestAssured.main(TestRestAssured.java:16)
Exception in thread "main" java.lang.NullPointerException
    at org.codehaus.groovy.runtime.callsite.CallSiteClassLoader.loadClass(CallSiteClassLoader.java:45)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.loadClass(ClassLoaderForClassArtifacts.java:58)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.define(ClassLoaderForClassArtifacts.java:42)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts$1.run(ClassLoaderForClassArtifacts.java:86)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts$1.run(ClassLoaderForClassArtifacts.java:84)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.defineClassAndGetConstructor(ClassLoaderForClassArtifacts.java:84)
    at org.codehaus.groovy.runtime.callsite.CallSiteGenerator.compilePojoMethod(CallSiteGenerator.java:229)
    at org.codehaus.groovy.reflection.CachedMethod.createPojoMetaMethodSite(CachedMethod.java:257)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.createCachedMethodSite(PojoMetaMethodSite.java:159)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.createPojoMetaMethodSite(PojoMetaMethodSite.java:148)
    at groovy.lang.MetaClassImpl.createPojoCallSite(MetaClassImpl.java:3015)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createPojoSite(CallSiteArray.java:116)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallSite(CallSiteArray.java:150)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at com.jayway.restassured.internal.ResponseParserRegistrar.<init>(ResponseParserRegistrar.groovy:42)
    at com.jayway.restassured.RestAssured.createTestSpecification(RestAssured.java:1094)
    at com.jayway.restassured.RestAssured.given(RestAssured.java:746)
    at com.jayway.restassured.RestAssured.get(RestAssured.java:776)
    at TestRestAssured.main(TestRestAssured.java:16) 
```

我用的是放心1.7，groovy 1.8.8，所有的放心依赖都加载在我的系统库路径中。我也在使用 jdk 1.7。这是某种环境问题，作为同事，使用相同的 .jar 文件运行相同的代码没有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:11:26.937

好吧，您`get`似乎返回了`NullPointerException`.

```
at com.jayway.restassured.RestAssured.get(RestAssured.java:776) 
```

这个方法内部出了点问题。

[如说明](http://code.google.com/p/rest-assured/wiki/GettingStarted)中所述，您可能错过了第三方依赖项。加载其他类时似乎弹出错误。

> 非 Maven 用户
> 
> 下载 REST Assured 并将其放入您的类路径中。您可能还需要下载第三方依赖项并将它们也放入您的类路径中。

# javascript - 将 cookie 设置为 24 小时后过期

> ID：12961914
> 
> 赞同：3
> 
> 时间：2012-10-18T19:05:12.220
> 
> 标签：javascript, setcookie

一个表单具有以下代码来防止多个表单提交：

```
function AllowNoDups() { var cookie_ls = document.cookie; if (cookie_ls.indexOf(document.location) > -1) {
  alert("You've already submitted a free meter request. Thank you for your interest!  ");
  return false; } else { document.cookie = 'username=' + value; + 'expires=' + var now = new Date(); var time = now.getTime(); time += 3600 * 1000; now.setTime(time); document.cookie = 'username=' + value + '; expires=' + now.toGMTString() + '; path=/';; + 'path = /' document.cookie =  "; path=/newform.php; expires=Sun, 1-Jan-2040 00:00:01 GMT;"; return true;};}; 
```

虽然代码有效，但我宁愿将 cookie 设置为 24 小时后过期，而不是指定 cookie 过期的日期。我将如何实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:07:10.603

您可以使用该`max-age`属性。请参阅此维基百科[文章](http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age)。

> 作为将 cookie 过期设置为绝对日期/时间的替代方法，RFC 6265 允许使用 Max-Age 属性将 cookie 的过期设置为未来的秒间隔，相对于浏览器接收 cookie 的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T05:12:25.423

使用此功能并根据您的要求传递参数..

```
function callcookie(name,value,days){
  if(days){
      var d=new Date();
      d.setTime(d.getTime()+(days*24*60*60*1000));
      var expires = "; expires="+d.toGMTString();
  }
  else var expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
} 
```

# c# - 如何在 GridViewItem 上自动设置 IsSelected？

> ID：12961916
> 
> 赞同：1
> 
> 时间：2012-10-18T19:05:26.997
> 
> 标签：c#, wpf, gridview, user-controls, microsoft-metro

我有一个包含所有属性的对象列表：IsSelected。现在，如果属性为 true，我尝试自动选择 GridView 中的项目。

我试图在 GridView 中覆盖 PrepareContainerForItemOverride 并设置与对象的绑定，但没有成功。有任何想法吗？

```
protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
{
    base.PrepareContainerForItemOverride(element, item);

    var listItem = element as GridViewItem;
    var binding = new Binding 
    {
        Mode = BindingMode.TwoWay, 
        Source = item, 
        Path = new PropertyPath("Selected")
    };
    if (listItem != null) 
        listItem.SetBinding(SelectorItem.IsSelectedProperty, binding);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:12:49.570

我是如此接近。我只需要设置：

```
protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
{
    base.PrepareContainerForItemOverride(element, item);

    var listItem = element as GridViewItem;
    listItem.IsSelected = true;
} 
```

..选择所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:53:40.537

您还可以使用WinRT XAML 工具包中的[ListViewExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit/Controls/Extensions/ListViewExtensions.cs) .BindnableSelection，它允许您绑定到一个列表，该列表是您的 GridView 的 ItemsSource 的子集，并且包含您想要选择的项目。

# regex - grep 用于查找浮点数表

> ID：12961918
> 
> 赞同：2
> 
> 时间：2012-10-18T19:05:32.050
> 
> 标签：regex, grep

我在计算集群上有一些分析代码。代码的输出是一个浮点数表。最终输出被打印到标准输出，在它之前和之后有一堆其他消息。它看起来像这样：

```
Welcome to Computer X
Setting up parallel environment...
Setup complete.  Running tasks....
0.059 9.342114 10.324921 0.3 0
0.123 123.4231102 231.49 45.7 84
Job completed on July 4, 1776
Thank you and have a nice day 
```

我只需要提取数字。不幸的是，我不知道每个数字将包含多少个数字（它将是 0.342123 还是 1 或 1.05），以及在数字之前或之后有多少文本行。

我以前用过grep，但我对正则表达式一无所知。我查找了例如如何匹配电话号码（###-###-####）等的示例，但我想不出任何你不知道要跳过多少位数的事情。我唯一知道的是，会有 5 列数据要提取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:14:39.243

`grep -ho`与正则表达式模式一起使用

```
^(\d+(\.\d+)?(\s+|$))+$ 
```

或者如果你确定 5 个数字总是在一行中，那么

```
^(\d+(\.\d+)?(\s+|$)){5}$ 
```

# android - 代码示例 - android 中的谷歌地图

> ID：12961919
> 
> 赞同：0
> 
> 时间：2012-10-18T19:05:37.440
> 
> 标签：android, google-maps

我花了很多时间在谷歌地图中找到一个在两点之间绘制路径的工作示例。

我终于找到了一个，但它没有画出路径。

有人可以帮我理解为什么（或给我另一个代码示例）吗？这是代码：

[https://github.com/frogermcs/RoutePathExample](https://github.com/frogermcs/RoutePathExample)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:08:55.407

这个链接解释了如何更清楚地做到这一点 [http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html) 你知道谷歌地球kml吗？ [https://developers.google.com/kml/documentation/kml_tut](https://developers.google.com/kml/documentation/kml_tut) 我曾经用它在谷歌地图上绘制从 1 点到另一个点的路线。解析后，您可以将这些点绘制为 `mapView.getProjection().toPixels(start, screenPts);` `//---add the marker---` `Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pin);` `canvas.drawBitmap(bmp, screenPts.x, screenPts.y, null);`
`Point screenPts2 = new Point();` `mapView.getProjection().toPixels(end, screenPts2);`

`//---add the marker---` `Bitmap bmp2 = BitmapFactory.decodeResource(getResources(), R.drawable.pin);// pin is a resource you have to add` canvas.drawBitmap(bmp2, screenPts2.x, screenPts2.y, null);

# apache - Apache 使用查询字符串重定向可能的循环

> ID：12961924
> 
> 赞同：0
> 
> 时间：2012-10-18T19:06:06.200
> 
> 标签：apache, mod-rewrite

我对 Apache 重写不太了解，我有一组我想做的要求：

```
1\. http://domain.com/keyword ==> http://domain.com/index.php?c=keyword
2\. http://domain.com/keyword?utm_source=affiliate ==> http://domain.com/index.php?c=keyword&utm_source=afiliate
3\. Do not rewrite any request like http://domain.com/css/ http://domain.com/images/ 
```

我尝试学习并且已经能够编写这样的重定向来解决＃1和＃2：

```
RewriteEngine on
RewriteRule ^([A-Za-z0-9-+.,]+)\?*(.*)$ index.php?c=$1$2 [QSA] 
```

这对我上面的要求中的#1 和#2 有效。但是，当我尝试访问这样的 URL`http://domain.com/b`时，会在 (PHP) 中产生以下结果`$_SERVER['QUERY_STRING']: c=index.php&c=b`

此外，如果我将标志更改为具有绝对域的 [R,QSA]（只是因为我很好奇），我会得到一个连续循环重定向，这表明该规则正在被多次处理。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:20:39.837

尝试添加一对`RewriteCond`来过滤那些您不想被重写的路径，如下所示：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/css/
RewriteCond %{REQUEST_URI} !^/images/
RewriteRule ^([A-Za-z0-9-+.,]+)\?*(.*)$ index.php?c=$1$2 [QSA] 
```

# c++ - 为什么我的代码会生成“未解析的外部符号”错误？

> ID：12961925
> 
> 赞同：0
> 
> 时间：2012-10-18T19:06:09.773
> 
> 标签：c++, oop, class, unresolved-external

我一直在编写我的代码并声明和定义了所有必要的变量并包含了必要的头文件。它仍然给了我在类构造函数中使用的任何函数的“未解析的外部符号”。

```
BowlingAlley.obj : error LNK2001: unresolved external symbol "private: void __thiscall     BowlingAlley::addToMasterArray(int * const,int * const)" (?addToMasterArray@BowlingAlley@@AAEXQAH0@Z)
1>BowlingAlley.obj : error LNK2001: unresolved external symbol "private: void __thiscall     BowlingAlley::createLaneArrays(void)" (?createLaneArrays@BowlingAlley@@AAEXXZ)
1>BowlingAlley.obj : error LNK2001: unresolved external symbol "int * laneVertices" (?laneVertices@@3PAHA) 
```

我的头文件如下。

```
#pragma once

#include <stdio.h>
#include <iostream>
#include <array>

class BowlingAlley
{
private: 
    void createLaneArrays();
    void concatenateArrays(int array1[], int array2[], int containerArray[]);
    int getNewArrayLength(int array1[], int array2[]);
    //mutates an array creating the master draw array by using the two functions above
    void addToMasterArray( int array2[], int masterArray[]);

public:
        BowlingAlley(int width, int gHeight, int length);
    BowlingAlley();

}; 
```

并且实现看起来像这样

```
 #include "BowlingAlley.h"
#include <stdio.h>
#include <GL/glut.h> 
#include <math.h>
#include <iostream>

using namespace std;
//BowlingAlley class contains all of the vertex information for the alley and the backdrop itself

//the lane's vars
int laneVertices[];
int laneIndices[];
int alleyArray[];

int alleyLength;
int alleyWidth;
int guardHeight;

BowlingAlley::BowlingAlley(int width, int gHeight, int length)
{
    alleyLength = length;
    alleyWidth = width;
    guardHeight = gHeight;
    createLaneArrays();
    //the masterdrawarray doesn't exist yet, create it with size 0
    int* masterDrawArray = new int[0];
    //start adding the vert Arrays to the master array
    addToMasterArray(laneVertices, masterDrawArray);

}

void createLaneArrays()
{
    float laneVertices[]= {
        -alleyWidth/2,0,0, 
        alleyWidth/2,0,0,
        -alleyWidth/2,0,alleyLength,
        alleyWidth/2,0,alleyLength
    };

    float laneIndices[]= {0,1,2,1,2,3};
}

int getNewArrayLength(int array1[], int array2[])
{
    //the number of elements in arrays1/2
    float array1Size = sizeof(array1)/sizeof(int*);
    float array2Size = sizeof(array2)/sizeof(int*);
    //the length of the new array
    int newArrayLength = array1Size + array2Size; 
    //return it
    return newArrayLength;
}

void concatenateArrays(int array1[], int array2[], int containerArray[])
{
    //the number of elements in arrays1/2
    float array1Size = sizeof(array1)/sizeof(int);
    float array2Size = sizeof(array2)/sizeof(int);
    //the length of the new array
    int newArrayLength = array1Size + array2Size; 

    //loop through adding array1 to the new array
    for (int i = 0; i<array1Size; i++)
    {
        containerArray[i] = array1[i];
    }
    //loop through adding array2 to the new array
    for (int i = array1Size; i<newArrayLength; i++)
    {
        int j = i - array1Size;
        containerArray[i] = array2[j];
    }

}

void addToMasterArray(int array2[], int masterArray[])
{
    //create a temporary array to act as a kind of buffer whil we delete and reset the size of the drawing array
    int* tempArray = new int[(sizeof(masterArray)/sizeof(int))];
    //copy the contents over to the temp array.
    for(int i =0; i<(sizeof(masterArray)/sizeof(int)); i++)
    {
        tempArray[i] = masterArray[i];
    }

    //delete what drawingArray points to
    delete[] masterArray;
    //calculate the size of the new array
    int arrLength = getNewArrayLength(array2, masterArray);
    //resurrect a new and extended drawingArray from the ashes, big enough to accomodate both arrays.
    masterArray = new int[arrLength];
    //use our previously made concatenateArrays function to append the two arrays
    concatenateArrays(tempArray, array2, masterArray);

    cout <<"The number of elements in the Master Array is: "<< sizeof masterArray/sizeof masterArray[0]<<endl;

} 
```

然后创建对象并在另一个 .cpp 文件中调用 main 函数。

```
#include "BowlingAlley.h"
#include <stdio.h>
#include <GL/glut.h> 
#include <math.h>
#include "imageloader.h"
#include "BowlingAlley.h"

    ////////////////////////////////////////////// 
int main(int argc, char** argv) 
{
  glutInit(&argc, argv);    // GLUT Initialization 
  glutInitDisplayMode(GLUT_DEPTH|GLUT_RGB|GLUT_DOUBLE); // Initializing the Display mode
  glutInitWindowSize(800,600);  // Define the window size
  glutCreateWindow("Taken Bowl");   // Create the window, with caption.
        printf("\n========== McLeanTech Systems =========\nBecoming Sentient");
  init();   // All OpenGL initialization

 BowlingAlley* myBowlingAlley = new BowlingAlley(100,30,1000); //make us a bowling alley

  //-- Callback functions ---------------------
  glutDisplayFunc(display);
  glutKeyboardFunc(mykey);
  //glutMouseFunc(mymouse);
  glutSpecialFunc(processSpecialKeys);  

  glutMainLoop();   // Loop waiting for event 
} 
```

我只是看不到我遗漏了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:09:18.087

“未解决”的方法根本不是方法。你漏掉了类名。

改变：

```
void createLaneArrays() 
```

到：

```
void BowlingAlley::createLaneArrays() 
```

并为其他 2 做同样的事情。然后他们将成为班级的一部分。它们不会自动*出现在*类中，因为它们与 C# 或 Java 位于同一文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T19:08:55.790

因为您正在实现那些没有`BowlingAlley::`前缀的功能。

这样你就可以创建一组新的函数（不是你的类的方法），然后就缺少实现了。

```
void createLaneArrays()
{
    float laneVertices[]= {
    // ... 
```

应该：

```
void BowlingAlley::createLaneArrays()
{
    float laneVertices[]= {
    // ... 
```

他们每个人都一样。

而且您还有另一个错误`createLaneArrays()`，您在其中初始化局部变量`laneVertices[]`而不是使用类变量。

您可能想要：

```
laneVertices = new float[6]; 
```

并且不要忘记在[析构函数](http://en.wikipedia.org/wiki/Destructor_%28computer_science%29#Example)（或`detroy`类似函数）中删除：

```
delete [] laneVertices; 
```

# jquery - 使用 jQuery UI 滑动内容而不是淡出？

> ID：12961929
> 
> 赞同：2
> 
> 时间：2012-10-18T19:06:44.287
> 
> 标签：jquery, jquery-ui

首先，我想为没有公开演示以及对 jQuery 非常陌生而道歉。

目前有一个非常基本的jQuery“滑块”脚本，它为刚刚分层的新内容触发淡入（据我所知）。我正在尝试使用缓动将此效果更改为幻灯片效果，并包含 jQueryUI（目前不包括）。

这是代码

```
<script type="text/javascript">
var current_featured = 1;
var current_featured_index = 100;
var featured_interval_time = 4000;
var featured_interval = setInterval("advance_featured()", featured_interval_time);

function advance_featured() {
    featured = current_featured + 1;
    if (featured > 4) {
        featured = 1;    
    }
    switch_featured(featured);
}

function switch_featured(featured) {
    current_featured = featured;
    current_featured_index += 10;
    $(".home-featured-post-link").css( { "z-index" : current_featured_index + 10 } );
    $("#home-featured-post-" + current_featured).css( { "z-index" : current_featured_index, "display" : "none" } ).fadeIn();
}

$("#home-featured").hover(
    function() { clearInterval(featured_interval); },
    function() { featured_interval = setInterval("advance_featured()", featured_interval_time); });
</script> 
```

现在它正在通过四个基本块旋转。我没有尝试做任何事情，只是将动画从淡入淡出效果更改为滑动动画。我想在滑入新块的同时滑出旧块，但这不是必需的。我试图使更改保持简单。

谢谢，

# php - 为许多不同的 ajax 请求组织 php 文件

> ID：12961935
> 
> 赞同：0
> 
> 时间：2012-10-18T19:06:59.600
> 
> 标签：php, ajax, organization

我有一个向 php 发出大量 ajax 请求的网页。

我相信最好的方法是使用一个 php 文件（控制器）来处理所有这些请求以及根据请求包含的非常短的 php 文件的负载。

这是执行此操作的最佳方法还是应该将所有功能集中到一个 php 文件中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:20:35.480

这取决于，因为如果对请求的响应很短并且可以在单个文件中按函数分组，则最好根据请求的条件，具体调用函数，显然这不是最佳实践，对，希望你解释上面，通过一个 php 文件作为控制器处理请求并加载对应的文件相同。

我希望我有一点帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:24:22.750

这几乎就是我会这样做的方式。

就我个人而言，我倾向于有一个文件目录，每个文件中都有一个函数，该函数返回它们响应的操作数组以及控制器应该调用的函数。

所以在 module_a.php 中有一个函数 module_a_operations()，返回文件处理的细节。

```
array(
   "delete_file" => "module_a_delete_file"
); 
```

根据应用程序的大小，这可能是矫枉过正。

# ruby-on-rails - 无法将 Rails 应用程序连接到远程 mysql 数据库

> ID：12961941
> 
> 赞同：2
> 
> 时间：2012-10-18T19:07:20.270
> 
> 标签：ruby-on-rails, mysql2

我无法将我的 rails 2.3.5 应用程序连接到远程数据库。

在我的 database.yml 中，我有：

```
development:
  adapter: mysql
  database: master
  username: user
  password: password
  host: 192.168.1.113 
```

我得到的错误是：

> 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

我知道问题不在于权限或用户设置，因为当我使用相同的 mysql gem 运行一个简单的 ruby​​ 脚本时，它可以工作。我的 python 脚本也可以连接，我可以通过 CLI 连接`mysql -u user -ppass -h 192.168.1.113`

我似乎无法让 rails 使用 192.168.1.113 而不是 localhost。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:47:37.053

试试这个配置，让我知道它是否有效

```
<% socket_locations = %w[/opt/local/var/run/mysql5/mysqld.sock /var/lib/mysql/mysql.sock /tmp/mysql.sock] %>

development:
  adapter: mysql
  encoding: utf8
  database: master
  username: user
  password: password
  host: 192.168.1.113
  socket: <%= socket_locations.detect { |f| File.exists?(f) } %> 
```

# javascript - 为什么输入|文件不能将其属性“文件”分配给ie中的变量？

> ID：12961944
> 
> 赞同：1
> 
> 时间：2012-10-18T19:07:45.823
> 
> 标签：javascript, internet-explorer, file-io

我知道 files 属性是只读的。但为什么不能将此属性分配给另一个变量？它适用于Firefox，但不适用于ie。

我的代码是：

```
 var element=document.getElementById("fileinput");
    var files=document.getElementById("fileinput").files;
    alert(element);    //here can output HTTPInputElement
    alert(files);      //but here is always undefined in ie; 
```

我不知道为什么四行总是在ie中给我undefined。如何从输入|文件中获取文件列表对象作为 ie 中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:09:30.987

IE9 及以下版本没有 files 属性，因为它们一次只接受一个文件。

[IE：输入类型=“文件”多个](https://stackoverflow.com/questions/7085171/ie-input-type-file-multiple)

IE10应该会添加实际支持，我还没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:44:39.410

该`files`属性是[File API](http://www.w3.org/TR/FileAPI/)的一部分，它仍然是一个草案规范，[不受 IE 9 支持](http://caniuse.com/#search=file+api)。

[实验性支持](http://html5labs.interoperabilitybridges.com/html5labs/prototypes/fileapi/fileapi/info/)在 IE 10 平台预览版中。

问题不在于该属性不能被复制，而在于它一开始就没有被定义。

# php - 多个编辑文本字段

> ID：12961945
> 
> 赞同：0
> 
> 时间：2012-10-18T19:07:46.840
> 
> 标签：php, javascript, html, web-services, web

我正在尝试修改以下代码，以便它可以保存多个已编辑的文本，而目前此代码仅保存一个（第一个）已编辑的文本...有人可以为我修改此代码，例如：您修改它以保存 3或 4 个编辑过的文本，基于此我可以添加我需要的任意数量的文本字段。如果您在文本字段中写入，保存它然后刷新页面，您的书面内容仍然存在，就像您尝试使用以下代码和一个文本字段一样，我希望在添加多个文本时也应用此功能字段。

```
<html>
<head>
<title>Allowing Users to Edit Multiple Text field and save the contents</title>
<script type="text/javascript">
function saveEdits() {

//get the editable element
var editElem = document.getElementById("edit");

//get the edited element content
var userVersion = editElem.innerHTML;

//save the content to local storage
localStorage.userEdits = userVersion;

//write a confirmation to the user
document.getElementById("update").innerHTML="Edits saved!";

}
function checkEdits() {

//find out if the user has previously saved edits
if(localStorage.userEdits!=null)
    document.getElementById("edit").innerHTML=localStorage.userEdits;
}
</script>
</head>
<body onload="checkEdits()">

<div id="edit" contenteditable="true">
Here is the element's original content
</div>

<input type="button" value="save my edits" onclick="saveEdits()"/>

<div id="update"> Edit the text and click to save for next time</div>

</body>
</html> 
```

提前致谢。

这就是我尝试过的。

```
<html>
<head>
<title>Allowing Users to Edit Multiple Text field and save the contents</title>
<script type="text/javascript">
function saveEdits() {

//get the editable element
var editElem = document.getElementById("edit");

//get the edited element content
var userVersion = editElem.innerHTML;

//save the content to local storage
localStorage.userEdits = userVersion;

// for new text field
localStorage.userEdit1 = userVersion;
//write a confirmation to the user
document.getElementById("update").innerHTML="Edits saved!";

}
function checkEdits() {

//find out if the user has previously saved edits
if(localStorage.userEdits!=null)
    document.getElementById("edit").innerHTML=localStorage.userEdits;
}
</script>
</head>
<body onload="checkEdits()">

<div id="edit" contenteditable="true">
Here is the element's original content
</div>

    <!--New text field -->
    <div id="edit" contenteditable="true">
This is another text field.
</div>

<input type="button" value="save my edits" onclick="saveEdits()"/>

<div id="update"> Edit the text and click to save for next time</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:39:21.960

脏复制粘贴作业。至少它演示了如何添加更多可编辑的 div。

为了使其动态化，您可以考虑以不同的方式构造函数，或者开始在其中添加 jQuery 以使元素选择更容易。.

```
<html>
<head>
<title>Allowing Users to Edit Multiple Text field and save the contents</title>
<script type="text/javascript">
function saveEdits() {

//get the editable element
var editElem1 = document.getElementById("edit1");
var editElem2 = document.getElementById("edit2");
var editElem3 = document.getElementById("edit3");
var editElem4 = document.getElementById("edit4");

//get the edited element content
var userVersion1 = editElem1.innerHTML;
var userVersion2 = editElem2.innerHTML;
var userVersion3 = editElem3.innerHTML;
var userVersion4 = editElem4.innerHTML;

//save the content to local storage
localStorage.userEdits1 = userVersion1;
localStorage.userEdits2 = userVersion2;
localStorage.userEdits3 = userVersion3;
localStorage.userEdits4 = userVersion4;

//write a confirmation to the user
document.getElementById("update").innerHTML="Edits saved!";

}
function checkEdits() {

//find out if the user has previously saved edits
if(localStorage.userEdits1!=null)
    document.getElementById("edit1").innerHTML=localStorage.userEdits1;

if(localStorage.userEdits2!=null)
    document.getElementById("edit2").innerHTML=localStorage.userEdits2;

if(localStorage.userEdits3!=null)
    document.getElementById("edit3").innerHTML=localStorage.userEdits3;

if(localStorage.userEdits4!=null)
    document.getElementById("edit4").innerHTML=localStorage.userEdits4;
}

</script>
</head>
<body onload="checkEdits()">

<div id="edit1" contenteditable="true">
Here is the element's original content
</div>
<div id="edit2" contenteditable="true">
Here is the element's original content
</div>
<div id="edit3" contenteditable="true">
Here is the element's original content
</div>
<div id="edit4" contenteditable="true">
Here is the element's original content
</div>
<input type="button" value="save my edits" onclick="saveEdits()"/>

<div id="update"> Edit the text and click to save for next time</div>

</body>
</html> 
```

# c# - 使用 XmlSerializer 反序列化 XML

> ID：12961946
> 
> 赞同：2
> 
> 时间：2012-10-18T19:07:56.450
> 
> 标签：c#, xml-parsing

我有以下 XML

```
<?xml version="1.0" ?>
<SERVICES.OUTPUTResponse>
  <Results>
    <Result>
      <Dataset name="OutputData">
        <Row>
            <country>USA</country>
            <pubyear>9986</pubyear>       
            <numart>123</numart>
            <numcites>456</numcites>
        </Row>
        <Row>
            <country>USA</country>
            <pubyear>97</pubyear>
            <numart>895</numart>
            <numcites>231</numcites>
        </Row>
      </Dataset>
      <Dataset name="Result 2">
        <Row>
          <Result_2>
            true
          </Result_2>
        </Row>      
      </Dataset>
    </Result>
  </Results>
  <_Probe></_Probe>
</SERVICES.OUTPUTResponse> 
```

我尝试使用 XmlSerializer 反序列化，但它返回 null。

我使用的 Property 类是

> 公共类 XMLDetails {
> 
> ```
>  public string country { get; set; }
> 
>     public string pubyear { get; set; }
> 
>     public string numart { get; set; }
> 
>     public string numcites { get; set; }
> } 
> ```

**反序列化代码是**

```
XmlRootAttribute xRoot = new XmlRootAttribute();
                xRoot.ElementName = "SERVICES.OUTPUTResponse";   
                                xRoot.IsNullable = true;
                var serializer = new XmlSerializer(typeof(XMLDetails), xRoot);
                var reader = new StringReader(remoteXml);
var objpublication = (XMLDetails)(serializer.Deserialize(reader)); 
```

请帮我重新爱上它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:23:08.240

如果你想使用 Linq To Xml

```
XDocument xDoc = XDocument.Parse(xml); //or XDocument.Load(filename);

var rows = xDoc.XPathSelectElement("//Dataset[@name='OutputData']")
            .Descendants("Row")
            .Select(r => new XMLDetails
            {
                country = r.Element("country").Value,
                pubyear = r.Element("pubyear").Value,
                numart = r.Element("numart").Value,
                numcites = r.Element("numcites").Value,
            })
            .ToList(); 
```

PS：必需的命名空间`System.Xml.Linq`和`System.Xml.XPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:47:56.260

首先您需要`xsd.exe`用于生成`.xsd`（模式）文件和`.cs`（类）文件

[XML 架构定义工具 (Xsd.exe)](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.110%29.aspx)

您可以运行**“Visual Studio 命令提示符”**，并且 xsd.exe 路径定义已经定义好可以使用了。

在控制台中键入以下命令 *我假设您的 xml 保存在**“yourxmlfile.xml”中**

`>xsd.exe yourxmlfile.xml`

此命令将生成**“yourxmlfile.xsd”**文件

然后执行以下命令生成`.cs`文件但在更改之前

`<xs:element name="Results" minOccurs="0" maxOccurs="unbounded">`与 `<xs:element name="Results" minOccurs="0" maxOccurs="1">`生成的 xsd 文件一致（将结果更改为属性而不是数组属性）

`>xsd.exe yourxmlfile.xsd /c`

此命令将生成**“yourxmlfile.cs”**

现在您可以将此文件添加到您的项目中，并且可以反序列化 xml 文件，如下所示

```
 var serializer = new XmlSerializer(typeof(SERVICESOUTPUTResponse));
        SERVICESOUTPUTResponse instance = null;
        using (var fileStream = File.OpenRead(@"c:\path_to\yourxmlfile.xml"))
        {
            instance = (SERVICESOUTPUTResponse)serializer.Deserialize(fileStream);
        } 
```

# symfony - SonataAdminBundle 扩展模板

> ID：12961949
> 
> 赞同：0
> 
> 时间：2012-10-18T19:08:21.127
> 
> 标签：symfony, sonata-admin

我已经设置了我的 Admin 类来呈现自定义模板：

```
public function getTemplate($name)
{
    switch ($name)
    {
        default:

            case 'list':

                return 'MyBundle:Admin:list.html.twig';

            break;

            return parent::getTemplate($name);

        break;
    }
} 
```

这工作正常。我可以在我的模板文件中输入一些 html 并呈现正常。但是，我想从管理包中扩展现有模板，因为我只想对此实体进行一些小的更改。

我已将以下内容添加到我的模板文件中：

```
{% extends 'SonataAdminBundle:CRUD:base_list.html.twig' %} 
```

但这给了我以下错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 77 bytes) 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:31:51.213

您的开关/外壳不正确。

它应该是：

```
 public function getTemplate($name)
    {
        switch ($name) {
            case 'list':
                return 'MyBundle:Admin:list.html.twig';
                break;

            default:
                return parent::getTemplate($name);
                break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T03:18:52.863

我不确定您是否在做任何“错误”（除了奇怪的大小写语法不符合我认为您认为的那样，请参阅[http://php.net/manual/en/control-structures.switch .php](http://php.net/manual/en/control-structures.switch.php)并向下滚动到描述“break”语句重要性的部分）。

在扩展模板时，似乎可以将 symfony 置于无限循环中。我已经用几个模板看到了这个。我还没有弄清楚究竟是什么触发了它，但我认为它与使用 EasyExtends 的包继承有关。在我的应用程序中，我有一个子 sonata-admin 包：

```
class ApplicationSonataAdminBundle extends Bundle
{
    /**
     * {@inheritdoc}
     */
    public function getParent()
    {
        return 'SonataAdminBundle';
    }
} 
```

然后我只用内容覆盖了standard_layout.html.twig：

```
{% extends "SonataAdminBundle::standard_layout.html.twig" %} 
```

这导致“SonataAdminBundle::standard_layout.html.twig”被无限次加载，因为模板似乎在有效地扩展自身。

假设您的设置与我的类似。我怀疑尝试做你想做的事情的唯一方法是使用不同的模板名称（例如“my_standard_layout.html.twig”），然后将该模板设置为应用程序范围的默认值，如下所述：[https：/ /sonata-project.org/bundles/admin/master/doc/reference/templates.html#configuring-templates](https://sonata-project.org/bundles/admin/master/doc/reference/templates.html#configuring-templates)

# sql-server - SQL Server 查询非规范化表

> ID：12961950
> 
> 赞同：0
> 
> 时间：2012-10-18T19:08:21.707
> 
> 标签：sql-server

我有一个非规范化的客户订单表。我想计算销售了多少产品并按类型显示在表格中。

```
OnlineSalesKey  SalesOrderNumber  ProductKey
--------------------------------------------
     1              20121018         778
     2              20121018         774
     3              20121018         665
     4              20121019         772
     5              20121019         778
     9              20121019         434
    10              20121019         956
    11              20121020         772
    12              20121020         965
    15              20121020         665
    16              20121020         778
    17              20121021         665 
```

我的查询：

```
SELECT 
    s.ProductKey, COUNT (*) As Purchased 
FROM
    Sales s
GROUP BY 
    s.ProductKey 
```

**问题 #1。**

该查询确实有效。但现在我想要显示并只考虑购买了不止一件商品的那些订单。不知道如何在一个查询中做到这一点。有任何想法吗？

**问题2**

是否可以标准化结果并取回按半列分隔的数据？

```
20121018 | 778; 774; 665 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:13:36.107

你没有说你正在使用哪个 SQL 数据库，每个数据库都会有不同的、或多或少有效的答案。（抱歉，刚刚注意到 MSSQL 在问题标题中。）

这是一个适用于所有或大多数数据库的解决方案：

```
SELECT s.ProductKey, COUNT (*) As Purchased 
FROM Sales s
WHERE SalesOrderNum IN 
 (SELECT SalesOrderNum FROM Sales GROUP BY SalesOrderNum HAVING COUNT(*) > 1)
GROUP BY s.ProductKey 
```

这不是*最*有效的，但应该适用于大多数产品。

另外，请注意，您正在反向使用规范化和非规范化的术语。您拥有的表是标准化的，您想要的结果是非标准化的。

没有标准的 SQL 语句可以单独使用 SQL 来获得您想要的非规范化结果，但是一些数据库（MySQL 和 SQLite）提供了 group_concat 函数来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:13:54.543

## Q1：查看[HAVING](http://msdn.microsoft.com/en-us/library/ms180199.aspx)子句

*仅显示并考虑那些订单...*

```
SELECT s.SalesOrderNumber, COUNT (*) As Purchased 
FROM Sales s
GROUP BY s.SalesOrderNumber
HAVING COUNT(*) > 1 
```

所以我们按订单分组，在 HAVING 中应用条件，然后在 SELECT 子句中显示 SalesOrderNumber。

## Q2：看看几种组连接技术。

MySQL：

```
SELECT s.SalesOrderNumber, GROUP_CONCAT(DISTINCT ProductKey
                                      ORDER BY ProductKey SEPARATOR '; ')
FROM Sales s
GROUP BY s.SalesOrderNumber 
```

SQL Server：请参阅此对重复问题的[答案。](https://stackoverflow.com/a/1250533/573261)基本上，使用 FOR XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T19:12:14.980

```
SELECT s.ProductKey, COUNT (*) As Purchased 
FROM
Sales s
GROUP BY s.ProductKey
having count(*) > 1 
```

**编辑 -**

答案 1 - 显示订单购买了多个产品的产品 -

```
SELECT s.ProductKey, COUNT (*) As Purchased 
FROM Sales s
WHERE SalesOrderNum in
(
select SalesOrderNum from Sales 
group by SalesOrderNum having count(*) > 1
)
GROUP BY s.ProductKey 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T19:13:26.390

1）试试这个：

```
SELECT s.ProductKey, COUNT (*) As Purchased 
FROM
Sales s
GROUP BY s.ProductKey
HAVING COUNT(*) > 1 
```

# android - 使用静态变量在 Android 上存储用户信息

> ID：12961951
> 
> 赞同：0
> 
> 时间：2012-10-18T19:08:27.867
> 
> 标签：android

我正在制作一个 android 应用程序，它必须经常使用 kSoap2 库调用一些 .net Web 服务。每次启动应用程序时，用户都必须登录（我无法做出决定）。我有一个调用网络服务的类。每个 Web 服务都需要一个用户名、一个密码和一个其他数据字符串来访问它。当用户成功登录时，我将正确的用户名、密码和其他数据存储在 Web 服务类中的 3 个私有静态变量中，以便在需要调用其他 Web 服务时使用。

这种方法最终会成为问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:10:49.147

看看[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，听起来正是您所需要的。静态变量通常是不好的编程形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:19:27.947

> 这种方法最终会成为问题吗？

我不明白为什么这会是个问题。

至于 Ralgha 的回答，共享首选项将您的登录信息保存到 XML 文件中。如果用户每次都必须登录到应用程序，它就违背了共享偏好的目的。您最好将此数据保存在内存中。

VM 不能 GC 任何你持有引用的静态变量。所以数据不会被GCed。其他应用程序也无法读入您的内存。对我来说听起来不错。

# excel - 使用 VBA 将 VALUES + INDEX 添加到 Excel 中的 ActiveX 组合框

> ID：12961953
> 
> 赞同：0
> 
> 时间：2012-10-18T19:08:37.447
> 
> 标签：excel, excel-2010, vba

如何向组合框添加项目和索引，我有以下内容，但它说这是一个无效的参数：

```
Me.lstDataSet.AddItem wsB.Range("B5"), wsB.Range("A5") 
```

`A5`是一个整数（索引）值 [34]，`B5`是一个字符串/日期（实际）值 [2012 年 1 月 4 日]。作为参考，在此之前的代码会从数据库中导入最后更新/插入的记录。

我想要实现的是让组合框显示 [001 | String Value ]，即显示两列，以后可以参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:54:07.867

要将项目添加到第二列，请使用`.List`

```
Me.ComboBox1.Clear
Me.ComboBox1.AddItem "1"
Me.ComboBox1.List(0, 1) = "testing" ' add text in second column (0 based array)
Me.ComboBox1.AddItem "2342"
Me.ComboBox1.List(Me.ComboBox1.ListCount-1, 1) = "more testing" 
' add it to last item added, no need to remember where you are 
```

# xml - Xslt 递归与动态 xml

> ID：12961958
> 
> 赞同：0
> 
> 时间：2012-10-18T19:08:42.050
> 
> 标签：xml, xslt, xslt-1.0

我有一个问题，我需要从 xml 生成 html，并且我可以有多个标签相互嵌套。我怎样才能通过递归传递它们？

这是来自 xml 的示例：

```
<rows>
   <row>
       <cell>1</cell>
       <cell>2</cell>
       <cell>1</cell>
       <cell>2</cell>
       <row>
         <cell>3</cell>
         <cell>4</cell>
            <row>
              <cell>5</cell>
              <cell>6</cell>
              <cell>6</cell>
           </row>
       </row>
   </row>
 </rows> 
```

我的 xslt 是：

```
 <table>
      <th>1</th><th>2</th>3<th>4</th><th>5</th>
      <xsl:for-each select="rows/row">
        <tr>
          <xsl:for-each select="cell">
            <td>
              <xsl:value-of select="."/>
            </td>
          </xsl:for-each>
         </tr>
         <xsl:for-each select="row">
           <tr>
             <xsl:for-each select="cell">
               <td>
                 <xsl:value-of select="."/>
               </td>
             </xsl:for-each>
           </tr>
         </xsl:for-each>    
       </xsl:for-each>   
     </table> 
```

所以我现在的问题是如何显示每行中的所有属性？

编辑：从 xslt 生成的 html

```
<html><body>
<table>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>

<tr>
<td>1</td>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
</tr>
</table>
</body></html> 
```

第二次编辑：

xslt：

```
 <xsl:template match="cell">

     <td style="overflow:hidden;border:1px solid black;">
         <div style="width:100px;height:20px;margin-bottom: 10px;margin-top: 10px;">

           <xsl:variable name="id1" select="row/@id"/>

           <xsl:if test="starts-with(id1, 'Dir')">
               <xsl:value-of select="cell/@image"/>
             </xsl:if>

            <xsl:value-of select="."/>

         </div>
      </td>

   </xsl:template> 
```

xml:

```
<row id="Dir_44630">
  <cell>Text</cell>
  <cell>1</cell>
  <cell>1.00</cell>
  <cell>3</cell>
  <cell 4</cell>
  <cell>5</cell>
  <cell>6</cell>
  <cell>7</cell>
</row> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:54:43.143

首先，在您的情况下，您将首先使用一个模板来匹配您的根**行**元素

```
<xsl:template match="/rows"> 
```

在这种情况下，您必须编写代码来构建表头，然后开始寻找子**行**元素

```
<xsl:template match="/rows">
   <table>
      <!-- Header -->
      <xsl:apply-templates select="row"/>
   </table>
</xsl:template> 
```

然后，您将有一个模板来匹配**行**元素，因此您可以输出**tr**元素，然后查找各个单元格

```
<xsl:template match="row">
   <tr>
      <xsl:apply-templates select="cell"/>
   </tr>
   <xsl:apply-templates select="row"/>
</xsl:template> 
```

请注意递归调用以继续查找嵌套在当前**行元素中的****行**元素。

同样，您将有一个模板来匹配**单元格**元素，它只会输出一个**td**元素和单元格值。

我唯一不确定的是你关于应该输出哪些行的规则。看起来您不想输出嵌套两层或多层深的**行元素。**在这种情况下，您可以添加一个模板来忽略至少有两行或多行是祖先的行

```
<xsl:template match="row[ancestor::row[2]]"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>

   <xsl:template match="/rows">
      <table>
         <tr>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
         </tr>
         <xsl:apply-templates select="row"/>
      </table>
   </xsl:template>

   <xsl:template match="row">
      <tr>
         <xsl:apply-templates select="cell"/>
      </tr>
      <xsl:apply-templates select="row"/>
   </xsl:template>

   <xsl:template match="row[ancestor::row[2]]"/>

   <xsl:template match="cell">
      <td>
         <xsl:value-of select="."/>
      </td>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<table>
   <tr>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
   </tr>
   <tr>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
   </tr>
   <tr>
      <td>3</td>
      <td>4</td>
   </tr>
</table> 
```

编辑：如果要从与**单元格**元素匹配的模板中访问**行**元素上的属性，则需要指定它是父元素，如下所示

 **```
<xsl:variable name="id1" select="../@id"/> 
```

这样做`select="row/@id"`实际上会查找作为当前单元格元素的子元素的行。**

# asp.net - 在哪里以及如何“缓存” ASP.NET 角色数据

> ID：12961959
> 
> 赞同：5
> 
> 时间：2012-10-18T19:08:41.883
> 
> 标签：asp.net, oop, authentication, authorization

# 设计选择

假设两个 ASP.NET MVC 授权/角色设计故事。两者都旨在最大限度地减少对中间层或数据存储的命中：

*   从数据库中获取“MyRoleProvider”信息后，随后将其存储在 AuthTicket 用户数据中，这反过来意味着 auth-cookie 包含角色信息。此外，在这个故事中，存储和检索此角色信息是由一个完全在“MyRoleProvider”之外的不同实现完成的。

或者...

*   从数据库中获取“MyRoleProvider”信息后，随后将其存储在会话中并从那里访问。更准确地说，“MyRoleProvider”类本身将尽可能在内部访问（和更新）会话。

同样，上述两个故事都旨在通过“缓存”角色信息来最大限度地减少访问外部存储的延迟。两者都工作正常。问题是，两种设计故事选择是否同样有效？如果不是，为什么？

# 问题

任何地方似乎都没有说明“最佳实践”，它说“您的（自定义）RoleProvider 应该始终知道角色信息的位置，无论是在会话、缓存、数据库等中。”

此外，任何地方似乎都没有（可靠的）指导来解释您不应该将哪些类型的东西存储在authCookie的“ [userData ”中。](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.userdata.aspx)那里的少量文档和指导仅表明两件事：

1.  'userData' 可以存储额外的用户信息（一种模糊、广泛的陈述）。我只在网上看到过一个代码示例，其中涉及存储额外的第 3 方身份/身份验证信息。
2.  不要在“userData”中放入太多数据，因为这可能会使 cookie 变得太大而无法传输（某些浏览器会限制 cookie 大小）。

而已。从上述指导中，没有人被明确告知“将 userData 仅限于身份验证信息是最佳实践。” 而且我当然没有看到一个文件说“将授权或角色信息放入'userData'是一个坏主意，因为......”

# 推导出最佳实践？

我自己对两种设计选择相同的回答是“不”。我想提出我的论点，并在以下情况下向您学习：

1.  你同意。
2.  你不同意，因为我在大惊小怪。
3.  你不同意；尽管我的论点是有效的，但对于为什么我的想法最终是错误的，还有*更好的论点。*

希望最佳实践概念能够作为答案出现。现在我的论点...

# 我的论点

我认为应该采用第二个设计故事，因为它代表了更好的模块化：角色信息完全在“MyRoleProvider”内部处理。第一个选项不必要地混合了身份验证（从 cookie 中提取身份）和授权问题。事实上，所有内置的 ASP.NET 安全机制都将这两个主题分开；基本 ASP.NET 功能从不将角色信息存储在 authcookie 中。如果有人想确认这一点，请尝试反映这些类：FormsAuthenticationModule、FormsAuthentication、带有 RolePrincipal 实现的 IPrincipal 和带有 FormsIdentity 实现的 IIdentity。

ASP.NET RolePrincipal 值得特别强调。它允许角色信息确实存储在 cookie 中，但它是*与 auth-cookie 分开的第二个 cookie*。此外，这个特殊的习惯用法仍然涉及与 RoleProvider 的协商。请参阅[此 MSDN 文档的示例部分](http://msdn.microsoft.com/en-us/library/b23yh35t%28v=vs.100%29.aspx)。

进一步研究 RolePrincipal，让我们看看 RolePrincipal.IsInRole()。尽管任何此类 IPrincipal 派生类都以编程方式结合了身份和角色信息，但内部实现仍将 RoleProvider 作为角色信息的唯一来源（请注意对 的引用`Roles.RoleProviders...`）：

```
 public bool IsInRole(string role)
    {
        if (this._Identity != null)
        {
            if (!this._Identity.IsAuthenticated || role == null)
            {
                return false;
            }
            else
            {
                role = role.Trim();
                if (!this.IsRoleListCached)
                {
                    this._Roles.Clear();
                    string[] rolesForUser = Roles.Providers[this._ProviderName].GetRolesForUser(this.Identity.Name);
                    string[] strArrays = rolesForUser;
                    for (int i = 0; i < (int)strArrays.Length; i++)
                    {
                        string str = strArrays[i];
                        if (this._Roles[str] == null)
                        {
                            this._Roles.Add(str, string.Empty);
                        }
                    }
                    this._IsRoleListCached = true;
                    this._CachedListChanged = true;
                }
                return this._Roles[role] != null;
            }
        }
        else
        {
            throw new ProviderException(SR.GetString("Role_Principal_not_fully_constructed"));
        }
    } 
```

这种 ASP.NET 对角色信息在哪里找到的“一站式”深度假设，就是为什么应该将角色信息合并到 RoleProvider 中。简而言之，我声称：

1.  如果您*确实*将角色信息存储在 cookie 中，那么 ASP.NET 没有将其组合到 auth-cookie 的内置功能的原因正是因为 ASP.NET 在不同的提供者之间保持了强烈的关注点分离。
2.  任何 RoleProvider 都应该知道在哪里可以找到角色信息，无论是在 cookie、会话还是其他地方。

# 结论：

不要将角色信息放入 auth-cookie，并确保您的（自定义）RoleProvider*知道*找到角色信息的所有位置，无论是数据库、Web 服务、会话、缓存还是 cookie。

同意？不同意？想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T19:27:30.817

有很多不同的关注点和设计选择来决定在哪里实际缓存信息，无论是 cookie、会话还是其他提供者。

当然，第一个问题是你是否应该缓存它。当然，对于不断访问数据库以获取相当静态的信息存在担忧。但是，同样担心能够立即将某人拒之门外。

只有在不需要立即响应的情况下，缓存才会变得可行。因此，没有关于缓存授权的最佳实践。如果您的应用程序不需要那种级别的安全性，当然也没有关于在哪里缓存它的最佳实践。

假设上述不是问题，则需要权衡位置。

**Cookie**
如果你把它放在一个 cookie 中，那么它可以被捕获并随后被重放。此外，它会略微增加您的互联网流量，因为每次请求都会传输 cookie。

**会话**
如果你把它放在会话中，那么你要么将自己限制在单个 Web 服务器上，要么必须将会话状态存储在整个 Web 场可访问的位置。如果您采用后一种方法，那么您完全有可能将会话存储在某个数据库中，从而完全破坏了您开始使用会话的理由。

**Memcache 或其他**
这类似于将角色存储在会话中；但是它通常存储在单独服务器的内存中，并且通常速度很快。缺点是对于负载平衡的网络场，这可能会增加另一个故障点……除非它被正确集群。在这一点上，您增加了项目开发、部署和维护成本......

* * *

最终，没有最佳实践。只有一堆非常依赖情况的权衡。坦率地说，对于这种类型的数据，我根本不会缓存它。它通常相对较小，并且对其的查询通常非常快。如果我们谈论的是成千上万的用户，我*可能会考虑它，但在那个级别上，还有许多其他操作考虑因素最终会使这里的选择变得显而易见。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T19:40:42.797

在我看来，你在问一个荒谬的问题。没有人会在身份验证 cookie 中存储角色数据。ASP.NET 并没有这样做，因为它们提供了将其存储在加密的单独 cookie 中的 RolePrincipal。

无论如何，cookie 的整个问题都是毫无意义的，因为这是 RolePrincipal 的实现细节。应用程序不应该知道角色数据的存储位置。

所以我要问你的问题是……我们为什么还要讨论这个问题？你在问最好的做法是做一些与系统如何做相反的事情，然后争论为什么你不应该以这种没人会使用的方式来做。

此外，您关于`RoleProvider`必须处理 cookie 的评论是不正确的。RoleProvider 不会创建`RolePrincipal`，这是在框架内完成的。是否使用cookies的选择不在`RoleProvider`，而是由`RoleManagerModule`框架类提供，由框架`IPrincipal`实例化的方式。

中的示例`RolePrincipal`与`RoleProvider`. 实际上，`RoleManagerModule`控件是这个功能。 `RoleManagerModule`是`HttpModule`安装到 IIS 中并作为管道的一部分运行的。它甚至不知道`RoleProvider`，基本上这意味着角色是从 cookie 中以非常低的级别填充的，当 `RoleProvider 开始运行时，如果它发现角色已经存在，它什么也不做.

# c++ - C 字符串到宽 C 字符串

> ID：12961960
> 
> 赞同：2
> 
> 时间：2012-10-18T19:08:49.263
> 
> 标签：c++, unicode, wchar-t, c-strings

我确信这个问题被问了很多，但我只是想确保没有更好的方法来做到这一点。

基本上，我有一个 const char* 指向一个以空字符结尾的 C 字符串。我有另一个函数，它期望 const wchar_t* 指向具有相同字符的字符串。

暂时，我一直在尝试这样做：

```
 size_t newsize = strlen(myCString) + 1;
    wchar_t * wcstring = new wchar_t[newsize];
    size_t convertedChars = 0;

    mbstowcs_s(&convertedChars, wcstring, newsize, myCString, _TRUNCATE);

    delete[] wcstring; 
```

我需要在很多地方进行这些转换，因为我正在处理期望一个或另一个的第三方库。这是推荐的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:18:07.043

假设您的数据都是 ASCII，那么您所做的几乎就是推荐的方法。如果那里有非 ASCII 数据，则需要知道它的编码是什么：UTF-8、Windows-1252、任何 ISO 8859 变体、SHIFT-JIS 等。每个都需要以不同的方式进行转换.

我唯一会改变的是使用`mbstowcs`而不是`mbstowcs_s`. `mbstowcs_s`仅在 Windows 上可用，`mbstowcs`而是可移植的标准 C99 函数。当然，如果您想避免使用 Microsoft 编译器的 CRT 弃用警告而不完全关闭它们，那么在非 Windows 系统和Windows 系统上`#if`使用测试宏是完全可以的。`mbstowcs``mbstowcs_s`

您还可以`mbstowcs`通过首先传入目标来获取转换后的字符串的长度`NULL`。这样，无论输入字符串有多长，您都可以避免截断；但是，它确实涉及将字符串转换两次。

对于非 ASCII 转换，我建议使用[libiconv](http://www.gnu.org/software/libiconv/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:57:24.247

您还没有说涉及到哪些编码。如果你有非多字节字符串，你可以使用这个：

```
std::string a("hello");
std::wstring b(s.begin(), s.end());

const wchar_t *wcString= b.c_str(); 
```

# iis - 表单身份验证状态 IIS 和 powershell

> ID：12961967
> 
> 赞同：4
> 
> 时间：2012-10-18T19:09:06.343
> 
> 标签：iis, powershell, forms-authentication

我对脚本很陌生，我的任务是创建一个 powershell 脚本，该脚本将检查并打印出 IIS 7.0 和 7.5 虚拟目录的所有身份验证类型的状态。

您可能知道有 6 种身份验证类型（基本、Windows、摘要、表单、asp.net 模拟、匿名）。

对于基本、windows、digest 和anonymous，我使用了这个命令：

> Get-WebConfigurationProperty -filter /system.web/security/authentication -name enabled "IIS:\Sites\My Site\"

但我找不到可以检查表单身份验证状态的命令。你能帮我解决这个问题吗？

例如，如果在 IIS 配置管理器上启用了表单身份验证，我想在 powershell 中获得启用它的值。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:16:12.223

您可以在身份验证配置元素中读取模式属性的值：

```
(Get-WebConfiguration system.web/authentication 'IIS:\sites\Default Web Site').Mode 
```

如果启用了表单身份验证，它将是表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-08T04:59:27.363

如果您尝试获取 IIS 主面板的 Forms 身份验证，您可以使用以下脚本...

**Get-WebConfiguration system.web/authentication -PSPath "MACHINE/WEBROOT" | Select-Object -ExpandProperty 模式**

如果您正在寻找特定站点，请同时包含站点/应用程序的路径

# javascript - Google Map GeoChart 变更中心

> ID：12961972
> 
> 赞同：1
> 
> 时间：2012-10-18T19:09:34.110
> 
> 标签：javascript, google-visualization

我正在与海洋科学家合作，他们从海岸采集样本。我想将图表的中心更改为离海岸。我想为图表中心提供一个纬度/经度对，或为地图区域的窗口/视图提供两个纬度/经度对，或指定多个州，如 US-CT-NY。我希望有一个隐藏的 API，例如`geochart.center = {lat: 89, long: -127}`.

```
function drawVisualization() {
  var data = google.visualization.arrayToDataTable([
    ['Lat', 'Long', 'Popularity'],

    [41.083333333276, -73.39999999978, 20.4 ],
    [41.083333333276, -73.39999999978, 20.6 ],
    [41.099550000113, -73.415400000078, 19.0 ]
  ]);

  var options = {title:'Temperature', region:'US-CT', resolution:'metros', width: 556, height: 347};
  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));
  geochart.draw(data, options);
} 
```

[http://code.google.com/apis/ajax/playground/?type=visualization#geo_chart](http://code.google.com/apis/ajax/playground/?type=visualization#geo_chart)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:57:30.507

不幸的是，当前版本的 google geochart 中没有这样的选项。但是我可以想到一些可能或多或少有用的 CSS hack。就像是：

```
#visualization {
width:550px;
overflow:hidden;
}
#visualization svg {
margin-left:-100px;
} 
```

您必须弄清楚哪些价值观对您有用。

我过去曾使用这种方法来改进 API 在某些领域所做的“裁剪”。

它远非完美，但我认为这是对生成的地图的裁剪和中心进行一点操作的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T12:38:28.860

我需要做一些类似的事情，再加上一些其他的调整。我想分享我的黑客行为，以防它帮助其他人......

首先是html：

```
<div id="geo_outer"><div id="<?php $inner ?>"></div></div> 
```

#geo_outer 是裁剪/构图实际 geochart 容器的容器。

geochart 容器最初被称为“geo_inner”，但我决定选择澳大利亚和新西兰 (ANZ) 的地图和仅澳大利亚 (AUS) 的地图，具体取决于新西兰是否在数据库的结果集中。

为了放大地图并最大化geo_outer 的可用空间，我只是将内部div 的尺寸增加到大于#geo_outer 的尺寸并将其四处移动，直到所需区域在#geo_outer 中垂直和水平居中。*默认情况下，谷歌的图像试图填充其容器（内部）的尺寸——这意味着我不需要在 javascript 选项中摆弄 geochart 的宽度/高度。

[![在此处输入图像描述](../Images/b3c47d05ac5ad1992606969fc2311e29.png)](https://i.stack.imgur.com/5P5tV.jpg)

```
#geo_outer {width:600px;height:490px;overflow:hidden;}
#geo_innerAUS {
    width:1100px;
    height:1048px;
    margin-top:-202px;
    margin-left:-235px;
}
#geo_innerANZ {
    width:850px;
    height:748px;
    margin-top:-112px;
    margin-left:-205px;
} 
```

这提供了更好的视觉效果，但我仍然不想看到北部和东北部所有那些不必要的岛屿。所以，剪辑路径来救援。现在我不擅长排列点，所以我开始通过浏览器开发工具突出显示内部 div 的简单方法，屏幕截图，并将其放入[http://bennettfeely.com/clippy/](http://bennettfeely.com/clippy/)。我可以粗略地选择我需要什么样的多边形并拖动点直到一切正确。（一旦我将多边形点应用于我的页面，我确实必须做一些小的调整。）

这是添加到各个 div 的 css：

澳大利亚：`-webkit-clip-path:polygon(58% 21%, 71% 41%, 75% 66%, 22% 66%, 22% 24%); clip-path:polygon(58% 21%, 71% 41%, 75% 66%, 22% 66%, 22% 24%);` 澳新银行：`-webkit-clip-path:polygon(60% 18%, 97% 56%, 74% 80%, 26% 80%, 26% 22%); clip-path:polygon(60% 18%, 97% 56%, 74% 80%, 26% 80%, 26% 22%);`

如果您使用 background-color:red，您可以通过浏览器开发工具轻松微调多边形；在内部的第一个孩子（div）上。

[![在此处输入图像描述](../Images/f48259352c12322d3d6d5454ff8583d5.png)](https://i.stack.imgur.com/W8WCX.jpg)

最后，如果要包含图例，请确保不要从底部修剪太多。我真的不得不去挖掘 DOM 才能找到那个小流氓。这是我用来将它移到视图中的css：

```
#geo_innerAUS > div > div:nth-child(1) > div > svg > g > g:nth-child(3){transform:translate(350px,-350px);}
#geo_innerANZ > div > div:nth-child(1) > div > svg > g > g:nth-child(3){transform:translate(275px,-140px);} 
```

ps 这是我在关闭正文之前放入的 javascript：

```
function drawGeoChart(){
    var data = google.visualization.arrayToDataTable([
        <?php echo $geo_jsdata; ?>
    ]);
    var options={
        region:'AU',
        displayMode:'regions',
        colorAxis:{colors: ['red','yellow','green']},
        resolution:'provinces'
    };
    var chart=new google.visualization.GeoChart($('#geo_outer>div:first-child')[0]);
        chart.draw(data,options);
}
google.charts.load("current",{packages:["geochart"]});
google.charts.setOnLoadCallback(drawGeoChart); 
```

这在我的手机和笔记本电脑上完美运行。我怀疑大多数设备的问题都很小，因为我的容器的尺寸以像素为单位，并且剪辑路径都是百分比。当我放大和缩小浏览器时，一切都很好。

# ios5 - 在 UIImageView 中播放 .mov 文件似乎会丢失帧速率？

> ID：12961974
> 
> 赞同：2
> 
> 时间：2012-10-18T19:09:48.003
> 
> 标签：ios5, ios6, uiviewanimation

我有一个 480p MOV 文件，它在 UiImageView 中看起来很棒（质量明智）。但是，它在播放时似乎会丢失帧率。有没有更好的方法在没有控件的情况下播放这部电影？它需要像 UI 上的动画一样播放。

提前致谢！

这是我的代码：

```
-(void)imagesExtractionThread {
NSDate * now = [[NSDate alloc] init];
startTime = [now timeIntervalSinceReferenceDate];
do{
    [self performSelectorOnMainThread:@selector(setImageToAvatar) withObject:nil waitUntilDone:YES];
    usleep(9000);

}while(!closing);}

-(void)setImageToAvatar{
NSDate * now = [[NSDate alloc] init];
NSTimeInterval curTime  = [now timeIntervalSinceReferenceDate];
currentTime = curTime - startTime;
if(currentTime>player.playableDuration){
    NSLog(@"Current time %lf",currentTime);
    currentTime = 0.0;
    startTime = curTime;
    if(player.playableDuration >0){
        closing = YES;
        avatar.hidden = YES;
    }
}

UIImage *singleFrameImage = [player thumbnailImageAtTime:currentTime
                                              timeOption:1];
//singleFrameImage = [self changeGreenColorWithTransparent:singleFrameImage];

//

/*sourcePicture = [[GPUImagePicture alloc] initWithImage:singleFrameImage smoothlyScaleOutput:YES];
[sourcePicture addTarget:filter];
[sourcePicture processImage];

singleFrameImage =  [filter imageFromCurrentlyProcessedOutput];*/
avatar.image = singleFrameImage;} 
```

我使用以下代码开始播放过程：

```
player = [[MPMoviePlayerController alloc] initWithContentURL: url];
    player.shouldAutoplay = NO;
    [NSThread detachNewThreadSelector:@selector(imagesExtractionThread) toTarget:self withObject:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:32:03.430

使用 AVFoundation 框架和 AVPlayer 类来播放视频文件。您可以自由地自定义外观、控件等。如果您不想要这些控件，您可以隐藏它们。

# postgresql - wso2 GREG 4.5.0 和 postgresql 作为外部数据库的问题

> ID：12961977
> 
> 赞同：1
> 
> 时间：2012-10-18T19:10:02.043
> 
> 标签：postgresql, wso2, wso2carbon, wso2greg

我将 GReg 4.5.0 配置为在 postgresql 中使用外部数据库。当我运行 wso2server.bat -Dsetup 时，我看到了这个错误：

```
 TID: [-1234] [WSO2 Governance Registry] [2012-10-17 23:35:38,514] ERROR {org.wso2.carbon.humantask.core.HumanTaskServer} -  Humantask Database Initialization failed. {org.wso2.carbon.humantask.core.HumanTaskServer}
    TID: [-1234] [WSO2 Governance Registry] [2012-10-17 23:35:38,527] ERROR {org.wso2.carbon.humantask.core.internal.HumanTaskServiceComponent} -  Failed to activate the HumanTaskServiceComponent. {org.wso2.carbon.humantask.core.internal.HumanTaskServiceComponent}
    org.wso2.carbon.humantask.core.engine.HumanTaskServerException: Humantask Database Initialization failed.
        at org.wso2.carbon.humantask.core.HumanTaskServer.initDataSource(HumanTaskServer.java:169)
        at org.wso2.carbon.humantask.core.HumanTaskServer.init(HumanTaskServer.java:95)
        at org.wso2.carbon.humantask.core.internal.HumanTaskServiceComponent.initHumanTaskServer(HumanTaskServiceComponent.java:102)
        at org.wso2.carbon.humantask.core.internal.HumanTaskServiceComponent.activate(HumanTaskServiceComponent.java:79)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
.... 
        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
        at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
    Caused by: org.wso2.carbon.humantask.core.engine.HumanTaskServerException: Error creating HumanTask database
        at org.wso2.carbon.humantask.core.db.Database.setupHumanTaskDatabase(Database.java:98)
        at org.wso2.carbon.humantask.core.db.Database.start(Database.java:78)
        at org.wso2.carbon.humantask.core.HumanTaskServer.initDataSource(HumanTaskServer.java:165)
        ... 131 more
    Caused by: java.lang.Exception: Error occurred while executing SQL script for creating registry database
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQLScript(DatabaseCreator.java:333)
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.createRegistryDatabase(DatabaseCreator.java:61)
        at org.wso2.carbon.humantask.core.db.Database.setupHumanTaskDatabase(Database.java:94)
        ... 133 more
    Caused by: java.io.FileNotFoundException: D:\Jorge\DESARR~1\GREG\WSO2GR~1.0\bin\..\dbscripts\bps\postgresql.sql (El sistema no puede encontrar el archivo especificado)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:138)
        at java.io.FileInputStream.<init>(FileInputStream.java:97)
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQLScript(DatabaseCreator.java:294)
        ... 135 more
    TID: [] [WSO2 Governance Registry] [2012-10-17 23:36:31,777]  WARN {org.wso2.carbon.core.init.CarbonServerManager} -  Carbon initialization is delayed due to the following unsatisfied items: {org.wso2.carbon.core.init.CarbonServerManager}
    TID: [] [WSO2 Governance Registry] [2012-10-17 23:36:31,781]  WARN {org.wso2.carbon.core.init.CarbonServerManager} -  Waiting for required OSGi Service: org.wso2.carbon.humantask.core.HumanTaskEngineService {org.wso2.carbon.core.init.CarbonServerManager} 
```

这是由于文件中的 wrog 名称，GReg 尝试查找 postgresql.sql 但在该目录中您只能看到 postgres.sql。我只是更改名称并引发另一个错误：

```
TID: [-1234] [WSO2 Governance Registry] [2012-10-17 23:38:20,393] ERROR {org.wso2.carbon.humantask.core.db.Database} -  Error creating HumanTask database {org.wso2.carbon.humantask.core.db.Database}
java.lang.Exception: Error occurred while executing :  CREATE TABLE HT_MESSAGE (MESSAGE_ID BIGINT NOT NULL, MESSAGE_DATA CLOB, MESSAGE_HEADER CLOB, MESSAGE_TYPE VARCHAR(255), MESSAGE_NAME VARCHAR(512), TASK_ID BIGINT, PRIMARY KEY (MESSAGE_ID))
    at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQL(DatabaseCreator.java:169)
    at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQLScript(DatabaseCreator.java:323)
    ....
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe el tipo «clob»
  Position: 68
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1836)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:374)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:366)
    at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
    at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
    at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQL(DatabaseCreator.java:139)
    ... 136 more
TID: [-1234] [WSO2 Governance Registry] [2012-10-17 23:38:20,437] ERROR {org.wso2.carbon.humantask.core.HumanTaskServer} -  Humantask Database Initialization failed. {org.wso2.carbon.humantask.core.HumanTaskServer} 
```

我解决了这个问题，通过 TEXT 更改 CLOB。但出现另一个错误：

```
Caused by: org.wso2.carbon.humantask.core.engine.HumanTaskServerException: Error creating HumanTask database
        at org.wso2.carbon.humantask.core.db.Database.setupHumanTaskDatabase(Database.java:98)
        at org.wso2.carbon.humantask.core.db.Database.start(Database.java:78)
        at org.wso2.carbon.humantask.core.HumanTaskServer.initDataSource(HumanTaskServer.java:165)
        ... 131 more
Caused by: java.lang.Exception: Error occurred while executing :    CREATE TABLE ATTACHMENT ( id BIGINT NOT NULL, ATTACHMENT_CONTENT BYTEA, CONTENT_TYPE VA
RCHAR(255) NOT NULL, CREATED_BY VARCHAR(255) NOT NULL, CREATED_TIME Timestamp NOT NULL WITH DEFAULT current_timestamp, ATTACHMENT_NAME VARCHAR(255) NOT NUL
L, ATTACHMENT_URL VARCHAR(2048) NOT NULL, PRIMARY KEY (id) )
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQL(DatabaseCreator.java:169)
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQLScript(DatabaseCreator.java:323)
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.createRegistryDatabase(DatabaseCreator.java:61)
        at org.wso2.carbon.humantask.core.db.Database.setupHumanTaskDatabase(Database.java:94)
        ... 133 more
Caused by: org.postgresql.util.PSQLException: ERROR: error de sintaxis en o cerca de ½WITH DEFAULT+
  Position: 178
        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103)
        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1836)
        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:374)
        at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:366)
        at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
        at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
        at org.wso2.carbon.utils.dbcreator.DatabaseCreator.executeSQL(DatabaseCreator.java:139)
        ... 136 more
[2012-10-18 14:21:44,489]  WARN {org.wso2.carbon.core.init.CarbonServerManager} -  Carbon initialization is delayed due to the following unsatisfied items:

[2012-10-18 14:21:44,493]  WARN {org.wso2.carbon.core.init.CarbonServerManager} -  Waiting for required OSGi Service: org.wso2.carbon.humantask.core.HumanT
askEngineService 
```

在这种情况下，我删除了 WITH 表达式，最后我可以将 GREG 4.5.0 与 Postgresql 一起使用。这可以为他的下一个版本修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:23:45.063

这些错误现在在最新的[greg 4.6中得到纠正](http://wso2.com/products/governance-registry/)

# ios - 如何使用应用更新强制替换 CoreData 存储？

> ID：12961981
> 
> 赞同：1
> 
> 时间：2012-10-18T19:10:27.543
> 
> 标签：ios, core-data, core-data-migration

我在 AppStore 中有一个活动的应用程序，它带有填充的数据存储。现在我想推送一个新版本，其中包含稍微更新的架构和一组新数据。旧数据无关紧要。如果我只是简单地推送应用程序的新版本，我相信现有用户会遇到数据存储不兼容的错误......我该如何避免这种情况？我不需要迁移现有数据，这一切都在新应用程序中。

**编辑**：

仅供参考，这是我在对象管理器中加载持久存储的 URL：

```
NSURL *storeURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"MyObjects" ofType:@"storedata"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:18:38.883

编辑：

如果您将持久性存储存储在主包中（因此它是只读的），您不必担心，因为新的持久性存储（我想也包含在您的应用程序包中）只会覆盖旧的。

我认为删除现有的商店文件然后创建一个新的应该这样做。

如果`_storeURL`是您的商店文件的路径，您可以像这样删除：

```
NSError *error = nil;
if ([fileManager fileExistsAtPath:_storeURL.path])
  [fileManager removeItemAtURL:_storeURL error:&error]; 
```

当然，这应该仅在您的最新应用程序版本首次启动时完成。这可以通过`NSUserDefaults`在删除/重新创建存储后存储密钥并让程序仅在启动时密钥不存在时才执行删除/创建来实现。

# java - Android - 在 ImageView 中使用大图像或不同大小的图像

> ID：12961984
> 
> 赞同：2
> 
> 时间：2012-10-18T19:10:38.143
> 
> 标签：java, android, xml, android-imageview

我有一个在 Android 上运行良好的“仪表板”菜单。它有 8 个 ImageView，可以根据我的需要工作。

```
-------------------
|        |        |
|    1   |    2   |
-------------------
-------------------
|        |        |
|   3    |    4   |
-------------------
-------------------
|        |        |
|    5   |    6   |
-------------------
-------------------
|        |        |
|    7   |    8   |
------------------- 
```

我以非常高分辨率使用 8 张不同的图像，以便它们在任何地方看起来都很好。我没有将它们中的任何一个包含在不同的 dpi 文件夹中。我只有一个大分辨率，所有屏幕尺寸都可以接受。这是不好的做法吗？我真的应该为每个人提供不同尺寸的图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:51:14.827

> 这是不好的做法吗？

如果它在所有屏幕密度（以及您支持的尺寸）下看起来都不错，那就太好了。只有你才能做出这样的决定。

正如我在[另一个答案](https://stackoverflow.com/a/13521317/115145)中指出的那样，问题在于自动重新采样以及由此产生的质量。

首先，屏幕密度不断增加。我们`-xxhdpi`现在有设备（例如，Droid DNA）。但是，`-xxhdpi`它是 SDK 的一个相对较新的添加。如果您的图标是`-xhdpi`，它们将被上采样`-xxhdpi`，这可能是有问题的。不过，目前，`-xxhdpi`设备数量极少，因此暂时可能无关紧要。但是，如果您只提供`-mdpi`图像，Android 将需要对`-hdpi`on up 进行上采样，这可能再次导致伪影。

与上采样相比，下采样更有可能获得不错的结果。但是，这并不是质量的绝对保证，尤其是当您经历多个级别时（例如，下采样`-xhdpi`到`-ldpi`）。

为其他密度定制图像让您可以绝对控制质量，但代价是开发时间和 APK 大小。

# javascript - 如何检测特定 localStorage 变量的内容何时在浏览器选项卡之间发生变化？

> ID：12961986
> 
> 赞同：1
> 
> 时间：2012-10-18T19:10:42.083
> 
> 标签：javascript, browser, tabs, bind, local-storage

我想在同一个浏览器（在同一个域上）中的两个不同选项卡之间进行通信。

当在第二个选项卡中触发特定事件时，我更改了本地存储变量值（使用 Javascript）。我想在第一个选项卡上检测到这种变化。变量名为“status”，值从 0 变为 1

我正在考虑一个可能的解决方案，我认为在第一个选项卡上使用计时器会起作用，但我也认为必须有更好的方法。

您知道是否有任何方法可以在不使用计时器的情况下检测“状态”变量值何时发生变化？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:53:47.163

肯定有更好的方法——使用本地存储机制中内置的事件。当您在 tab2 中更新 localstorage 时，tab1 将获得一个更新事件，然后您可以将其用作从 localstorage 读取新值的信号。

有关详细信息，请参阅：

[Chrome 的 localStorage 实现的错误？](https://stackoverflow.com/questions/4679023/bug-with-chromes-localstorage-implementation/4679754#4679754)

[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T08:13:37.287

似乎存储事件应该提供您需要的东西。

关于存储事件的 HTML 规范 ( [http://dev.w3.org/html5/webstorage/#the-storage-event](http://dev.w3.org/html5/webstorage/#the-storage-event) ) 说：

> storage 事件在存储区域发生变化时触发，如前两节所述（对于会话存储，对于本地存储）。
> 
> 发生这种情况时，用户代理必须排队一个任务以触发一个名为 storage 的事件，该事件不会冒泡且不可取消，并且使用 StorageEvent 接口，在其 Document 对象具有受影响的 Storage 对象的每个 Window 对象上.

注意最后一条，所有可以访问存储的窗口都应该被通知任何更改。

但是请注意规范前面部分中的以下条款：

> 当 setItem()、removeItem() 和 clear() 方法在与会话存储区域关联的 Storage 对象 x 上调用时，如果这些方法做了某些事情，那么在每个 Document 对象中，其 Window 对象的 sessionStorage 属性的 Storage 对象为与除 x 之外的相同存储区域相关联，必须触发存储事件，如下所述。

因此，引发更改的文档不会被警告。

# haskell - 树上映射函数中的解析错误

> ID：12961991
> 
> 赞同：0
> 
> 时间：2012-10-18T19:11:01.880
> 
> 标签：haskell, map, tree

我定义了一个多态数据类型`Tree a`，如下所示：

```
data Tree a = Leaf | Node a (Tree a) (Tree a) 
```

我想定义一个函数`mapT`，它接受一个函数并将其应用于类型`a`树中的每个类型数据项`Tree a`。这个函数的基本目的是对树进行操作，就像`map`函数在列表上操作一样，所以我根据这个想法编写了一个函数：

```
mapT :: (a -> b) -> Tree a -> Tree b
mapT f Leaf = Leaf
mapT f ((Tree a) left right) = (Tree a) (mapT f left) (mapT f right) 
```

但是，当我运行它时，我得到一个`Parse error in pattern: (Tree a)`并且我不知道出了什么问题。有谁知道如何通过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:16:20.913

尝试：

```
data Tree a = Leaf | Node a (Tree a) (Tree a)

mapT :: (a -> b) -> Tree a -> Tree b
mapT f Leaf = Leaf
mapT f (Node a left right) = Node (f a)  (mapT f left) (mapT f right) 
```

请注意，您的`Leaf`构造函数没有与 is 关联的任何数据，所以也许您真的想要：

```
data Tree a = Leaf a | Node ... 
```

与相应的变化`mapT`。

此外，一旦你开始`mapT`为你工作，你应该阅读`Functor`类型类，以及为什么你可能想要创建一个`Functor`实例`Tree a`：

```
instance Functor Tree where
  fmap (Leaf ...)  = ...
  fmap (Node x l r) = Node ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:28:12.530

1.  `Tree`是类型构造函数，而不是数据构造函数。你可能的意思是`Node`。

2.  错误消息试图告诉您，您不能在模式中使用任意应用程序。您只能匹配完全应用的构造函数，因此`(Node a left right)`是有效的模式，而`((Node a) left right)`不是，即使两者都作为表达式有效。

3.  您需要申请`f`才能`a`将某种类型`b`的东西放入转换后的节点中。否则类型检查器会抱怨它不能`a`与`b`.

最终结果应如下所示：

```
mapT :: (a -> b) -> Tree a -> Tree b
mapT f Leaf = Leaf
mapT f (Node a left right) = Node (f a) (mapT f left) (mapT f right) 
```