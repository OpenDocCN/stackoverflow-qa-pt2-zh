# StackOverflow 问答 13687000-13687999

# android - ListView 使用 AsyncTask 加载图像

> ID：13687002
> 
> 赞同：0
> 
> 时间：2012-12-03T15:59:17.667
> 
> 标签：android, image, listview, android-asynctask, weak-references

我一直在阅读许多与我相似的问题的答案，但仍然无法解决我的问题。我有一个项目，它是一个 RSS 阅读器，它使用 AsyncTask 类在后台加载图像。该程序有效，除非用户快速滚动，否则图像有时不会加载到我的行中。它们永远不会加载到错误的位置，如果用户快速滚动，它们似乎会被跳过。此外，在启动时，我的列表视图中只有 2 或 1 个图像加载了用户可以看到的 4 行。

我知道问题与我使用的 WeakReference 对象有关，但我不确定如何以更好的方式实现它......

这是我的 RssListAdapter，它也包含我的 Async 类。

```
public class RssListAdapter extends ArrayAdapter<JSONObject>
{
TextView textView;
ImageView imageView;
JSONObject jsonImageText;
ProgressDialog progressDialog;
Activity activity2;
View rowView;

public RssListAdapter(Activity activity, List<JSONObject> imageAndTexts)
{
    super(activity, 0, imageAndTexts);
    activity2 = activity;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{

    Activity activity = (Activity) getContext();
    LayoutInflater inflater = activity.getLayoutInflater();

    // Inflate the views from XML
    View rowView = (View) inflater
            .inflate(R.layout.image_text_layout, null);
    jsonImageText = getItem(position);

    // ////////////////////////////////////////////////////////////////////////////////////////////////////
    // The next section we update at runtime the text - as provided by the
    // JSON from our REST call
    // //////////////////////////////////////////////////////////////////////////////////////////////////
    textView = (TextView) rowView.findViewById(R.id.job_text);
    imageView = (ImageView) rowView.findViewById(R.id.feed_image);

    BitmapDownloaderTask task = new BitmapDownloaderTask();
    Spanned text;
    try
    {
        text = (Spanned) jsonImageText.get("text");
        textView.setText(text);
    }
    catch (JSONException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    task.execute();

    return rowView;

}

public class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap>
{
    private String url;
    private RssListAdapter adapter;
    private WeakReference<ImageView> imageViewReference = null;

    @Override
    // Actual download method, run in the task thread
    protected Bitmap doInBackground(String... params)
    {
        imageViewReference = new WeakReference<ImageView>(imageView);

        Bitmap img = null;

        try
        {

            if (jsonImageText.get("imageLink") != null)
            {

                System.out.println("XXXX Link found!");
                String url = (String) jsonImageText.get("imageLink");
                URL feedImage = new URL(url);

                HttpURLConnection conn = (HttpURLConnection) feedImage
                        .openConnection();
                InputStream is = conn.getInputStream();
                img = BitmapFactory.decodeStream(is);
            }

        }
        catch (MalformedURLException e)
        {
            // handle exception here - in case of invalid URL being parsed
            // from the RSS feed item
        }
        catch (IOException e)
        {
            // handle exception here - maybe no access to web
        }
        catch (JSONException e)
        {
            // textView.setText("JSON Exception");
        }
        return img;
    }

    @Override
    // Once the image is downloaded, associates it to the imageView
    protected void onPostExecute(Bitmap bitmap)
    {
        if (isCancelled())
        {
            bitmap = null;
        }

        if (imageViewReference != null)
        {
            ImageView imageView = imageViewReference.get();
            if (imageView != null)
            {
                imageView.setImageBitmap(bitmap);
            }
        }

    }

    @Override
    // Before images are loaded
    protected void onPreExecute()
    {
        if (imageViewReference == null)
        {
            imageView.setImageResource(R.drawable.stub);
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:09:11.073

您应该查看官方的 Android“[高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)”教程，了解如何有效地加载和显示位图。它附带了一段可以立即使用的代码。

# ibm-mq - How to resolve WebSphere MQ Reason code 2195 related error?

> ID：13687004
> 
> 赞同：11
> 
> 时间：2012-12-03T15:59:22.220
> 
> 标签：ibm-mq, ibm-integration-bus

I am getting an WebSphere MQ Reason code 2195 `MQRC_UNEXPECTED_ERROR` when I try to connect to the message flows deployed on the execution group. Can somebody please tell me what exactly does this reason code mean? Queue manager, broker , execution group.. everything is up and running and the ports are also open. I am not getting anything worthwhile on the net. Please advise.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T16:09:34.917

2195 返回码是一个高级异常，当在代码的较低级别未捕获错误时会触发该异常。当某些外部依赖项（例如文件访问或操作系统资源）未按预期运行并且故障级联到 WMQ 时，通常会生成这些。

通常当这些错误被抛出时，WMQ 会生成一个 FDC 文件`{WMQ install dir}/errors`来记录事件。FDC 文件会告诉您失败的可执行文件、失败期间正在执行的功能、环境、用户 ID 和许多其他详细信息。IBM 可以使用这些来诊断问题，但通常对 WMQ 管理员也很有用。

作为一般规则，对于您无法轻松诊断的任何 WMQ 错误，请查看：
`{WMQ install dir}/qmgrs/{qmgr name}/errors/AMQERR01.LOG`
`{WMQ install dir}/errors/AMQERR01.LOG`
`{WMQ install dir}/errors/*.FDC`

报告错误时，请发布您是否在这些位置发现任何错误日志条目或新的 FDC 文件，如果有，这些内容是什么。这将使受访者更容易提供具体和相关的答案。如果您想使用目录中的诊断信息更新您的问题`errors`，我很乐意以实物形式更新此回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T02:37:00.420

更改 NT 密码后，您可能会遇到此代码，因为该服务会尝试使用您保存的凭据登录。通过命令控制台更改 UID/pwd - AMQMSRVN -user \ -password

并且，为了安全起见，在其他服务菜单中，更新存储的服务 MQSeriesBrokerROL_ACB_BROKER 和 MQSeriesServices 的属性密码 - > LogON

# sql - Extract first and last names from nvarchar data

> ID：13687008
> 
> 赞同：-4
> 
> 时间：2012-12-03T15:59:27.727
> 
> 标签：sql, sql-server

> **Possible Duplicate:**
> [How can I parse the first, middle and last name from a full name field in SQL?](https://stackoverflow.com/questions/159567/how-can-i-parse-the-first-middle-and-last-name-from-a-full-name-field-in-sql)

Say I have some nvarchar data 'Joe Blogs'...

I need to be able to query the data to extract the first and last names.

```
firstname
----------
Joe

lastname
----------
Blogs 
```

What is the simplest way of doing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:01:42.120

您需要创建一个 T-SQL 函数，该函数根据分隔符拆分字符串并返回标记（片段）。有一个可用的数字，例如这个：

[T-SQL 拆分字符串](https://stackoverflow.com/questions/10914576/tsql-split-string)

# salesforce - Salesforce 初学者的调试困惑

> ID：13687010
> 
> 赞同：0
> 
> 时间：2012-12-03T15:59:36.230
> 
> 标签：salesforce, apex-code, visualforce

嗨，我是 Salesforce.com 平台的初学者

我写了一个 Apex 类：

```
public class FieldSetDemonstration {

public Resource__c merch { get; set; }

public FieldSetDemonstration() {
    this.merch = getMerchandise();
}

public List<Schema.FieldSetMember> getFields() {
    return SObjectType.Resource__c.FieldSets.Hello2.getFields();
}

private Resource__c getMerchandise() {
    String query = 'SELECT ';
    for(Schema.FieldSetMember f : this.getFields()) {
        query += f.getFieldPath() + ', ';
    }
    query += 'Id  FROM Resource__c LIMIT 1';
    System.debug('Hello world debug log');
    Resource__c res= Database.query(query);
    System.debug('Hello World Debug log'+''+res.name);
    return res;
}
} 
```

这是visualforce页面控制器中的控制器类，提供正确的res.name值，但在调试控制台中我只得到Hello world调试日志。谁能告诉为什么它没有在调试控制台中显示 res.name 值。如何出于调试目的显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:03:20.723

好的，最后我发现我必须使用 res.get('Name') 而不是在 System.debug() 中使用 res.name

公共类 FieldSetDemonstration {

公共资源__c merch { 获取；放; }

公共 FieldSetDemonstration() { this.merch = getMerchandise(); }

公共列表 getFields() { return SObjectType.Resource__c.FieldSets.Hello2.getFields(); }

private Resource_c *getMerchandise() { String query = 'SELECT'; for(Schema.FieldSetMember f : this.getFields()) { query += f.getFieldPath() + ', '; } 查询 += 'Id FROM Resource* _c LIMIT 1'; System.debug('Hello world 调试日志'); Resource__c res= Database.query(query); System.debug('Hello World 调试日志'+''+res.get('Name')); 返回资源；} }

这段代码工作正常

# javascript - Testing node-amqp using mocks

> ID：13687018
> 
> 赞同：2
> 
> 时间：2012-12-03T15:59:49.867
> 
> 标签：javascript, node.js, amqp

I have a node service which uses AMQP to perform a remote procedure call, so it publishes a messages to a given amqp exchange and expects a response on a given amqp queue with the results of that call.

I am looking for a good unit test strategy which mocks the amqp connection can send a message based on a given input. I have looked into amqp-mock module but this seems to require a connection to a real amqp server and this was something I wanted to avoid.

Has anyone implemented anything similar or have a good strategy for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T08:26:48.273

您可以使用[“a”模块](https://npmjs.org/package/a)轻松模拟 require ：

```
// Example faking require('./foo') in unit test:
var fakeFoo = {};
var expectRequire = require('a').expectRequire;
expectRequire('./foo').return(fakeFoo);

// in sut:
var foo = require('./foo'); // returns fakeFoo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T07:03:38.453

你可以试试[node-amqp-mock](https://github.com/rstuven/node-amqp-mock)。

# salesforce - 如何将应用程序中的选项卡定位为最后一个选项卡

> ID：13687019
> 
> 赞同：1
> 
> 时间：2012-12-03T15:59:55.967
> 
> 标签：salesforce, apex-code

我有一个业务请求，说他们希望其中一个自定义选项卡 (X) 成为横幅上的最后一个。我知道您可以通过以下方式定义选项卡的顺序：

设置 -> 应用设置 -> 创建 -> 应用

有没有办法让一个配置文件（或一组配置文件）的所有用户将其设为最后一个选项卡？我的预感是没有......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:23:07.403

当您编辑应用程序或将新选项卡添加到现有应用程序时，会有这个神奇的复选框*“覆盖用户的个人自定义应用程序自定义”。*

![覆盖](../Images/a07bc4cb7c84d51824e692f096cc6eda.png)

但是您的用户之后仍然可以重新排序！

除此之外 - 不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T18:54:53.827

重新排序 Salesforce 选项卡：

我向 SF Support 提交了一个案例票，他们向我展示了如何执行此操作。我有 SF Enterprise，您可以通过这种方式重新排序选项卡。转到，设置 > 创建 > 应用程序

我想更改“销售”应用程序的顺序。顺便说一句，“销售”应用程序是您首次登录 SF 时屏幕右上角附近的选择列表中的应用程序之一。

单击“销售”应用左侧的编辑。接下来使用“选定选项卡”和“可用选项卡”列表添加或删除您想要的选项卡。您可以通过使用“选定选项卡”框右侧的按钮将它们“向上”或“向下”移动来更改“选定选项卡”的顺序。

还要确保选中“覆盖用户的个人自定义应用程序自定义”框，以便所有用户都以这种方式显示选项卡和顺序。

# jquery - Using jQuery to adjust min-height based on content inside div

> ID：13687021
> 
> 赞同：1
> 
> 时间：2012-12-03T16:00:02.363
> 
> 标签：jquery, html, css

I am a total newb to jquery and I want to know how to add a way for jquery to adjust the min-height of a div based on how much content is inside it. I will always want the min-height to probably be around 700, but as users add more content on some pages, it needs to stretch to fit that content.

How do I integrate this? please be specific, in terms of css, html, etc as I am new to jquery.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:12:12.107

Too simple:

HTML

```
<div class="foo" >
This is sample<br />
This is sample<br />
This is sample<br />
This is sample<br />
This is sample<br />
This is sample<br />
This is sample<br />
</div>​ 
```

JQuery

```
$(function() {
    $(".foo").css("min-height", function() {
        return $(this).height();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:01:44.223

除非我误解了你，否则你不需要在用户添加内容时调整最小高度；具有 min-height 属性的元素将自动增长以适应它们包含的内容。所以你不应该担心它。

例如：如果您`min-height: 700px`在样式表中应用 css 属性，则在元素内的内容为 500px 的页面上，元素的高度将为 700px；在有 900px 内容的页面上，该元素将是 900px 高。

# c - C - 解析文本和调用函数

> ID：13687024
> 
> 赞同：0
> 
> 时间：2012-12-03T16:00:17.433
> 
> 标签：c, static-linking, dlopen

我有以下问题。我有位于 parser.o 库中的文本解析器。我想解析一些文本（查找函数）并调用它们。函数在functions.o 文件中实现。我能够解析文本，但我不知道如何从库 functions.o 中调用函数。我`dlopen(NULL, RTLD_NOW);`用来获取对主程序的引用，但是当我运行实际程序时，它找不到给定的函数并`"./program: undefined symbol: function_name"`出现错误（函数名位于函数.o）：/。我无法链接functions.o，`dlopen(functions.o,...)`因为它不是动态链接库。我正在编译程序：

```
 `gcc main.c lib/*` 
```

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:48:53.433

如果您必须静态链接程序，并且所有函数共享一个签名，您可以定义自己的函数指针表。

```
struct entry
{
  const char * const func_name;
  void (*func) (void);
};

static struct entry table[] = 
{
  {"func_A", func_A},
  {"func_B", func_B},
  ...
}; 
```

然后从输入中查找函数的名称并通过指针调用它。如果函数签名不同，您仍然可以使用包装函数调用的 thunk 来完成此操作。

```
void func_A_thunk(void* dummy, ...)
{
  // parse the var_args to match the signature for func_A
  func_A (arg1, arg2, arg3);
} 
```

所有这些都说了...这很混乱，所以如果可以的话，只需将库代码编译成动态链接库，并`dlopen`正确使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:18:34.487

> dlopen(NULL, RTLD_NOW);

而不是做`dlopen`and `dlsym`，直接调用函数。由于您将所有内容链接到主可执行文件中，因此*完全*没有理由使用`dlopen`。

# apache - How to get Apache Tomcat running with jsp files?

> ID：13687029
> 
> 赞同：0
> 
> 时间：2012-12-03T16:00:20.660
> 
> 标签：apache, jsp, tomcat, web.xml

I'm new to web servers and would appreciate your help. I was given JSP files (and some other css and javascript files) and I'm trying to figure out a way to quickly get these JSP files up and running on the Apache Tomcat server just to view them. I got the Tomcat server running using Eclipse, but now I'm not sure how I can run the JSP files. Do I need a web.xml file? I've looked at some examples of web.xml but I am not sure what pieces are needed.

If there is anything that you can give me to lead me in the right direction, it would be extremely helpful. Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:09:35.523

看看这里：[http ://www.vogella.com/articles/EclipseWTP/article.html](http://www.vogella.com/articles/EclipseWTP/article.html)

简而言之：安装 WTP 扩展并创建一个新的动态 Web 项目。将项目设置为使用 Eclipse 管理的 Tomcat 运行。然后将您的 JSP 复制到项目中并通过 Eclipse 启动 Tomcat。也许您可以将现有项目转换为动态 Web 项目。

# svg - How do I configure Jekyll to serve SVG?

> ID：13687030
> 
> 赞同：5
> 
> 时间：2012-12-03T16:00:22.990
> 
> 标签：svg, jekyll

I use Jekyll for building my web site, and I want to start serving SVG. Browsers won't recognize SVG as an image unless it is sent with the proper MIME type. Unfortunately, Jekyll does not set the MIME type by default. (To be fair, Jekyll uses Webrick for the HTTP server)

How do I tell Jekyll to use the `image/svg+xml` mime type for SVG?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T16:00:22.990

1.  Create a `_plugins` directory in the root of your Jekyll project.
2.  Create a file called `svg_mime_type.rb` in `_plugins`
3.  Add this to `svg_mime_type.rb`:

    ```
    require 'webrick'
    include WEBrick
    WEBrick::HTTPUtils::DefaultMimeTypes.store 'svg', 'image/svg+xml' 
    ```

That's it! Next time you start Jekyll, it will use the proper MIME type for SVG.

# wcf - Best way to deploy a WCF service on AWS when using MSMQ

> ID：13687039
> 
> 赞同：0
> 
> 时间：2012-12-03T16:00:45.163
> 
> 标签：wcf, iis, amazon-web-services

We have a set of WCF services that use to MSMQ. We use the static web.config file to indicate to the services where the MSMQ host is.

Moving to AWS, we now need to dynamically specify the MSMQ host address. We figure we can pick between 2 options:

1) Write a script to update the web.config files when spinning up the AWS instances.

2) Drop the config files and implement a helper function that will resolve the MSMQ host address at runtime.

Anyone has any insight on what approach would be better or be considered best practice?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:29:04.760

我们最终使用了解决方案#1。这是一个简单的脚本，现在我们可以在 web.config 文件中的任何地方使用环境变量（不仅仅是设置 MSMQ 端点）。将 MSMQ 配置保存在 web.config 文件中还允许我们在需要时通过使用其他绑定（例如：RabbitMQ）来更改队列技术，而无需更改源代码。

# python - Python 可选、位置和关键字参数

> ID：13687043
> 
> 赞同：1
> 
> 时间：2012-12-03T16:01:03.530
> 
> 标签：python, optional-arguments, keyword-argument

这是我的一堂课：

```
class metadict(dict):
    def __init__(self, do_something=False, *args, **kwargs)
        if do_something:
            pass
        super(metadict,self).__init__(*args,**kwargs) 
```

这个想法是封装字典并使用特殊关键字添加一些功能。`do_something`尽管您无法在创建时添加它，但该字典仍然可以保存。对于所有其他方面，它的行为就像普通字典一样。

无论如何，问题是我给`args`它的任何东西都是从分配第一个`do_something`不是我想要的值开始的。

我现在做的是这样的：

```
class metadict(dict):
    def __init__(self, do_something=False, *args, **kwargs)
        if not isinstance(do_something, bool):
            args = list(args)
            args.append(do_something)
        elif do_something:
            pass
        super(metadict,self).__init__(*args,**kwargs) 
```

但这对我来说不合适。我也可以检查`do_something`kwargs 中的值，但情况会更糟，因为我弄乱了删除有用信息的签名......

python 中有什么方法可以安全地使用可选、位置和关键字参数吗？如果没有，还有其他更简单的解决方法吗？

我在 python 2.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:06:09.380

它是[Python 3 中的新功能](http://www.python.org/dev/peps/pep-3102/)。Python 2 中最好的解决方法是

```
def foo(*args, **kwargs):
    do_something = kwargs.pop("do_something", False) 
```

您看到的行为发生是因为 Python 试图巧妙地匹配参数，因此例如，如果您传递太多位置参数，它将使关键字参数成为位置参数。

PS为什么不将其存储为属性`metadict`而不是字典中的条目？

# html - Relative div inside an Absolute div

> ID：13687046
> 
> 赞同：3
> 
> 时间：2012-12-03T16:01:13.917
> 
> 标签：html, css

Consider The Following case,

```
 <div id="d1" style="position:relative">
    <div id="d2" style="position:absolute">
     <div id="d3" style="position:absolute">
     </div>
    </div>
   </div> 
```

By Referring the [Link](https://stackoverflow.com/questions/5928059/absolute-positioning-inside-absolute-position),

I Just confirmed that the `<div id="d3">` will be relative to the `<div id="d2">`.
Even if we given position as absolute for `<div id="d2">`.

Similarly what would it assumes when we place `<div>`s like below? (relative `<div>` inside a absolute `<div>`)

```
 <div id="d1" style="position:relative">
    <div id="d2" style="position:absolute">
     <div id="d3" style="position:relative">
     </div>
    </div>
   </div> 
```

can anybody explain this.?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:09:45.587

您会期望`relative`div`d3`保持相对于其父级的位置。*有关如何*定位事物的更多信息，请参阅[Css 的 W3 规范](http://www.w3.org/TR/CSS2/visuren.html#comparison)。

 *我强调*应该*，因为盒子模型的个别浏览器中存在可能对此产生影响的怪癖。

请参阅[此处的 JSFiddle](http://jsfiddle.net/NsqrB/2/)以获取有关此内容的快速演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:27:50.107

鉴于 html/标记

```
 <div id="d1" style="position:relative">
  <div id="d2" style="position:absolute">
   <div id="d3" style="position:relative">
   </div>
  </div>
 </div> 
```

div#d1

*   div#d1 将保留在文档的正常流程中。

*   div#d1 没有偏移属性（上、右、下、左），因此将保持在原位。即它的位置将是这样的，如果没有位置：相对应用于它。

*   div#d1 将作为 div#d2 的新定位上下文。

div#d2

*   div#d2 会从文档的正常流程中取出。

*   div#d2 将相对于 div#d1 定位。

div#d3

*   div#d3 将保留在文档的正常流程中，但它的流程现在由 div#d2 确定。

[十步学习 CSS 定位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:16:06.840

正如@Kami 所说，`div#d3`应该相对于它的父级，并显示[在这里](http://jsfiddle.net/3ezcV/)——我整理了一个 jsFiddle 来更好地解释，所以你可以玩不同的结果。

jsFiddle：http: [//jsfiddle.net/3ezcV/](http://jsfiddle.net/3ezcV/)*

# java - 具有会话支持的 Spring mvc 3.1 集成测试

> ID：13687055
> 
> 赞同：18
> 
> 时间：2012-12-03T16:01:37.170
> 
> 标签：java, spring, testing, spring-mvc

我正在使用3.1 版本中的新[spring-test来运行集成测试。](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)它工作得很好，但我无法让会话正常工作。我的代码：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration("src/main/webapp")
@ContextConfiguration({"classpath:applicationContext-dataSource.xml",
      "classpath:applicationContext.xml",
      "classpath:applicationContext-security-roles.xml",
      "classpath:applicationContext-security-web.xml",
      "classpath:applicationContext-web.xml"})
public class SpringTestBase {

    @Autowired
    private WebApplicationContext wac;
    @Autowired
    private FilterChainProxy springSecurityFilterChain;
    @Autowired
    private SessionFactory sessionFactory;

    protected MockMvc mock;
    protected MockHttpSession mockSession;

    @Before
    public void setUp() throws Exception {
       initDataSources("dataSource.properties");

       mock = MockMvcBuilders.webAppContextSetup(wac).addFilters(springSecurityFilterChain).build();
       mockSession = new MockHttpSession(wac.getServletContext(), UUID.randomUUID().toString());
    }

    @Test
    public void testLogin() throws Exception {
        // this controller sets a variable in the session
        mock.perform(get("/")
            .session(mockSession))
            .andExpect(model().attributeExists("csrf"));

        // I set another variable here just to be sure
        mockSession.setAttribute(CSRFHandlerInterceptor.CSRF, csrf);

        // this call returns 403 instead of 200 because the session is empty...
        mock.perform(post("/setup/language")
            .session(mockSession)
            .param(CSRFHandlerInterceptor.CSRF, csrf)
            .param("language", "de"))
            .andExpect(status().isOk());
    }
} 
```

我的会话在每个请求中都是空的，我不知道为什么。

**编辑：**最后一个断言失败：`andExpect(status().isOk());`. 它返回 403 而不是 200。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-08-12T15:18:26.360

更新答案：

似乎在构建器中添加了一个新方法“sessionAttrs”（请参阅[​​带有会话属性的 mvc 控制器测试](https://stackoverflow.com/questions/26341400/mvc-controller-test-with-session-attribute/26341909#26341909)）

```
Map<String, Object> sessionAttrs = new HashMap<>();
sessionAttrs.put("sessionAttrName", "sessionAttrValue");

mockMvc.perform(MockMvcRequestBuilders.get("/uri").sessionAttrs(sessionAttrs))
      .andDo(print())
      .andExpect(MockMvcResultMatchers.status().isOk()); 
```

旧答案：

这是一个更简单的解决方案，可以在不使用支持类的情况下实现相同的结果，这是我的代码片段（我不知道当 Biju Kunjummen 回答时这些方法是否已经可用）：

```
 HttpSession session = mockMvc.perform(post("/login-process").param("j_username", "user1").param("j_password", "user1"))
            .andExpect(status().is(HttpStatus.FOUND.value()))
            .andExpect(redirectedUrl("/"))
            .andReturn()
            .getRequest()
            .getSession();              

        Assert.assertNotNull(session);

        mockMvc.perform(get("/").session((MockHttpSession)session).locale(Locale.ENGLISH))
            .andDo(print())
            .andExpect(status().isOk()) 
            .andExpect(view().name("logged_in")); 

```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-03T22:29:07.903

我以一种有点迂回的方式做到了这一点——虽然有效。我所做的是让 Spring-Security 创建一个会话，并在会话中填充相关的安全属性，然后以这种方式获取该会话：

```
 this.mockMvc.perform(post("/j_spring_security_check")
            .param("j_username", "fred")
            .param("j_password", "fredspassword"))
            .andExpect(status().isMovedTemporarily())
            .andDo(new ResultHandler() {
                @Override
                public void handle(MvcResult result) throws Exception {
                    sessionHolder.setSession(new SessionWrapper(result.getRequest().getSession()));
                }
            }); 
```

SessionHolder 是我的自定义类，只是为了举行会议：

```
private static final class SessionHolder{
    private SessionWrapper session;

    public SessionWrapper getSession() {
        return session;
    }

    public void setSession(SessionWrapper session) {
        this.session = session;
    }
} 
```

而SessionWrapper是从MockHttpSession扩展而来的另一个类，只是因为session方法需要MockHttpSession：

```
private static class SessionWrapper extends MockHttpSession{
    private final HttpSession httpSession;

    public SessionWrapper(HttpSession httpSession){
        this.httpSession = httpSession;
    }

    @Override
    public Object getAttribute(String name) {
        return this.httpSession.getAttribute(name);
    }

} 
```

有了这些设置，现在您可以简单地从 sessionHolder 获取会话并执行后续方法，例如。就我而言：

```
mockMvc.perform(get("/membersjson/1").contentType(MediaType.APPLICATION_JSON).session(sessionHolder.getSession()))
            .andExpect(status().isOk())
            .andExpect(content().string(containsString("OneUpdated"))); 
```

# ios - 通过 iPhone 应用程序将照片上传到 Facebook 页面

> ID：13687058
> 
> 赞同：0
> 
> 时间：2012-12-03T16:01:42.353
> 
> 标签：ios, facebook-graph-api, sdk, facebook-page, photo-upload

我正在为 iphone 使用新的 3.1 Facebook SDK。我希望我的应用程序的用户能够从他的 iphone 中选择一张照片并将其上传到 Facebook 页面的相册（此用户不是此页面的管理员）。

如果这是不可能的，我希望用户能够将图片发布到相册提要。

另外，我需要要求用户执行哪些权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T16:27:14.713

Facebook api 中目前存在一个至少在去年尚未修复的错误，当您尝试将照片上传到页面时，它会将其上传到用户流。我已经关注这个错误报告很长时间了，而且 Facebook 似乎不会对此采取任何行动。这是该问题的当前答案。如果有任何变化，将更新。

# php - 使用 simplexml 访问具有属性的子项...如何？

> ID：13687064
> 
> 赞同：0
> 
> 时间：2012-12-03T16:02:02.817
> 
> 标签：php, xml, parsing, xml-parsing, simplexml

我正在尝试使用 PHP (simplexml) 访问 XML 文件的特定部分而不循环。我只想访问一个特定的字段。但是怎么做？这是xml文件的结构：

```
<collection xmlns="http://www.loc.gov/MARC21/slim">
    <record>
        <datafield tag="010" ind1=" " ind2=" ">
            <subfield code="a">96174405</subfield>
        </datafield>
        <datafield tag="035" ind1=" " ind2=" ">
            <subfield code="a">(OCoLC)ocm34158924</subfield>
        </datafield>
    </record>
</collection> 
```

例如，我将如何打印 96174405？

```
print_r ($collection->record->datafield[0]->subfield); 
```

这似乎行不通。我如何解释属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:06:16.297

使用时转换为字符串`print_r()`：

```
<?php

$collection = simplexml_load_string('<collection xmlns="http://www.loc.gov/MARC21/slim">
    <record>
        <datafield tag="010" ind1=" " ind2=" ">
            <subfield code="a">96174405</subfield>
        </datafield>
        <datafield tag="035" ind1=" " ind2=" ">
            <subfield code="a">(OCoLC)ocm34158924</subfield>
        </datafield>
    </record>
</collection>');

print_r( (string)$collection->record->datafield[0]->subfield ); 
```

SimpleXML 扩展对象是动态创建的。

**澄清：**

如果您不强制转换为字符串，`print_r()`将改为显示：

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [code] => a
        )

    [0] => 96174405
) 
```

因此推荐。

# meteor - 如何在嵌套循环中访问外部 {{#each}} 集合值

> ID：13687065
> 
> 赞同：11
> 
> 时间：2012-12-03T16:02:04.850
> 
> 标签：meteor

在循环中访问外部#each 集合值的标准方法是什么？例如：

```
<template name="example">
  {{#each outerCollection}}
  <tr>
    {{#each innerCollection}}
      <td>{{aaa}}</td>
    {{/each}}
  </tr>
  {{/each}}
</template>

Template.example.aaa = function(){
  // cannot access outerCollection values
} 
```

在上面的 Template.example.aaa 中，`this`指向内部集合。

我找不到访问 outerCollection 项目的方法。我的解决方案如下所示，我正在定义自己的辅助函数。这是实现此目的的标准 Meteor 方式吗？

```
<template name="example">
  {{#each outerCollection}}
  <tr>
    {{#each innerCollection}}
      <td>{{myHelper ../outerItem innerItem}}</td>
    {{/each}}
  </tr>
  {{/each}}
</template>

Handlebars.registerHelper('myHelper', function (outItem, inItem) {
  // can access outerCollection via outerItem
}); 
```

对于内部事件处理程序访问，我发现了一个[类似的问题。](https://stackoverflow.com/questions/13091914/meteor-how-to-access-parent-properties-within-nested-templates)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T00:52:46.797

我想你已经回答了这个问题！使用`../`记录在[https://github.com/meteor/meteor/wiki/Handlebars](https://github.com/meteor/meteor/wiki/Handlebars)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-14T12:27:02.980

您可以使用下面的代码来获取外部集合。

假设您有名为**Collection.Customer**和**Collection.RechargePlan**的集合，并且您在模板中使用这两者来更新客户。

```
Customer = {"name":"James", "rechargeplan":"monthly"};
RechargePlan = [{"rechargeplan": "monthly"},{"rechargeplan": "yearly"}];

 //Inside template, Bydefault Customer is available.
{{#each RechargePlan}}
  {{#if equals ../rechargeplan rechargeplan}}
      //Hurray Plan matches
  {{/if}}
{{/each}} 
```

在上面的代码中，**../rechargeplan**实际上是**Customer.rechargeplan**， ../ 实际上比层次结构高了一步，然后访问该字段（如果可用），因为 Customer 已经可用于模板，所以它的字段被拾取。

# xpath - 通用中间路径的 xpath 求值器表达式

> ID：13687067
> 
> 赞同：1
> 
> 时间：2012-12-03T16:02:11.930
> 
> 标签：xpath

```
/MxML/trades/trade/tradeBody/fxOption/fxVanillaOption/option/optionStyle

/MxML/trades/trade/tradeBody/fxOption/**fxBarrierOption/fxOption**/fxVanillaOption/option/optionStyle

/MxML/trades/trade/tradeBody/fxOption/**fxSwapOption/fxOption**/fxVanillaOption/option/optionStyle 
```

我正在寻找各种 xpath 的通用表达式。虽然开头和结尾部分总是相同的。这是正确的 XPath 吗？

```
/MxML/trades/trade/tradeBody/fxOption*//*fxVanillaOption/option/optionStyle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:29:59.350

你很接近，但你有一些额外的星号和斜线。尝试这个：

```
/MxML/trades/trade/tradeBody/fxOption/*/fxVanillaOption/option/optionStyle 
```

# java - 在 GWT RichTextArea 中强制换行

> ID：13687068
> 
> 赞同：0
> 
> 时间：2012-12-03T16:02:14.117
> 
> 标签：java, gwt, rich-text-editor, richtext

我正在使用这个富文本编辑器：`com.google.gwt.user.client.ui.RichTextArea` 我想在编辑器上强制换行，这样如果我尝试输入一个极长的单词，水平滚动条不会显示“越界”，而是换行自动地。我怎样才能做到这一点？

已经尝试过但没有成功：

```
@external .gwt-RichTextArea;

.gwt-RichTextArea {
    background-color: lightGrey;
    word-wrap: break-word;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:00:22.810

将 CSS 规则应用于您的 RichTextArea：

```
word-wrap: break-word; 
```

# javascript - jquery javascript避免在条件下运行函数

> ID：13687076
> 
> 赞同：0
> 
> 时间：2012-12-03T16:02:50.153
> 
> 标签：javascript, jquery, preventdefault

我在 js 中有一组 jquery 和一般的 javascript 函数。现在我想避免某些功能在某些条件下可用。例如：

```
function test () {
    alert("hi");
}

function avoid () {
   if(condition)  {
     //here avoid to call test
   }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:04:04.300

如果你想删除一个没有错误的函数（假设函数的调用者不期望返回结果），你可以这样做

```
function avoid () {
   if(condition)  {
     test = function(){}; // does nothing
   }
} 
```

请注意，如果您的`avoid`功能在不同的范围内，您可能需要进行调整。例如，如果`test`在全局范围内定义，那么你会做`window.test = function(){};`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:14:36.120

我不确定我是否很好地理解了您的问题，但是如果对您的测试函数的调用在如下所示的避免函数中：

```
function test () {
    alert("hi");
}

function avoid () {
   if(condition)  {
     //here avoid to call test
    return false;
   }
   test();
} 
```

然后一个简单的 return false 可以解决您的问题，我不确定您的函数是否正在使用事件，但如果是这种情况，这是一篇很好的帖子，您可以阅读有关 preventDefault 并返回 false ：[在此处输入链接描述](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

如果测试处于相同的避免级别，如下所示：

```
function test () {
alert("hi");
}

function avoid () {
   if(condition)  {
     //here avoid to call test
    return false;
   }
   return true;
}

// below is your functions call
   check =  avoid();

   if(check){
    test();
   } 
```

这篇文章解释了如何退出函数：[在此处输入链接描述](https://stackoverflow.com/questions/3330193/early-exit-from-function)

我希望这会有所帮助。

# cakephp - CakeDC 用户使用用户名登录

> ID：13687080
> 
> 赞同：1
> 
> 时间：2012-12-03T16:02:59.357
> 
> 标签：cakephp, authentication, plugins, cakedc

默认登录过程需要电子邮件，而不是用户名。

我已将此添加到`AppController.php`on中， [CakePHP 的 Docs Authentication](http://book.cakephp.org/1.3/en/The-Manual/Core-Components/Authentication.html)`beforeFilter()`中也提到了这一点：

```
$this->Auth->fields = array(
    'username' => 'username',
    'password' => 'password'
); 
```

但不知何故，它不允许用户使用他们的用户名登录。关于如何改变它的任何想法？

**应用控制器**

```
App::uses('Controller', 'Controller');
class AppController extends Controller {
var $components = array(
    'Session',
    'RequestHandler',
    'Security'
);
var $helpers = array('Form', 'Html', 'Session', 'Js');

public function beforeFilter() {
    $this->Auth->authorize = 'Controller';
    $this->Auth->fields = array('username' => 'username', 'password' => 'password');
    $this->Auth->loginAction = array('plugin' => 'users', 'controller' => 'users', 'action' => 'login', 'admin' => false);
    $this->Auth->loginRedirect = '/';
    $this->Auth->logoutRedirect = '/';
    $this->Auth->authError = __('Sorry, but you need to login to access this location.', true);
    $this->Auth->loginError = __('Invalid e-mail / password combination.  Please try again', true);
    $this->Auth->autoRedirect = true;
    $this->Auth->userModel = 'User';
    $this->Auth->userScope = array('User.active' => 1);  
    if ($this->Auth->user()) {
        $this->set('userData', $this->Auth->user());
        $this->set('isAuthorized', ($this->Auth->user('id') != ''));
    }
} 
```

**/查看/用户/login.ctp**

`login.ctp`这与插件文件夹中的默认设置相同。我刚刚将字段电子邮件更改为用户名。

现在，这里有一些有趣的东西。不管我在这个文件中放什么代码，CakePHP 从插件登录视图中提取内容，我创建的视图被忽略。

**调试**

调用调试器时：

```
Debugger::dump($this->Auth); 
```

它显示了我设置的所有值。但它仍然不接受用户名。我仍然可以使用电子邮件登录，所以并不是我插入了错误的凭据。只是它正在等待电子邮件/密码，而不是用户名/密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:21:58.127

尝试在 AppController 中的 $components 上配置它：

```
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'username')
            )
        )            
    )
} 
```

我遇到了相反的问题，我想用他们的邮件而不是用户名来验证用户，并且使用上面的配置和 'username' => 'email' 对我有用。

编辑：

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )            
    ),
    'Session'
);

public function beforeFilter() {
    //User settings
    $this->activeUserId = $this->Auth->user;
    $this->set('activeuserphoto', $this->Auth->user('photo'));
    $this->set('activeusername', $this->Auth->user('username'));

    //Configure AuthComponent
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
    $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'dashboard');
} 
```

# magento - magento 中的模板插件 TinyMCE

> ID：13687083
> 
> 赞同：1
> 
> 时间：2012-12-03T16:03:05.247
> 
> 标签：magento, tinymce

我在 Magento 上的 TinyMCE 中激活了插件模板，但我无法从 TinyMCE 插入模板。在 setup.js 文件 (js/mage/adminhtml/wysiwyg/tiny_mce) 中添加了这一行

```
template_external_list_url : "js/template_list.js", 
```

在包含 /public_html/js/mage/adminhtml/wysiwyg/tiny_mce/plugins 文件的 template_list.js 中，magento 不提供模板选项。尊重良好实践的所见即所得中添加新模板的最佳方法是什么？

谢谢

# ruby-on-rails - 通过 Rails 中的 link_to 更新字段

> ID：13687085
> 
> 赞同：3
> 
> 时间：2012-12-03T16:03:16.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Rails 3.2 中有一个产品树，并希望有一个添加/删除功能，以便用户可以添加新的子产品或删除产品的现有子产品。我使用祖先 gem 生成树，对于 Product 1，它可能如下所示：

```
Product 1
add | remove
    Product 2
    add | remove
        Product 3
        add | remove 
```

在部分 _product.html.erb 中，我添加了添加和删除链接，这适用于添加功能，但我无法使删除链接正常工作：

```
<span><%= product.name.capitalize %></span>
<%= link_to "Add", new_product_path(parent_id: product) %> | 
<%= link_to "Remove", {parent_id: nil}, method: :update %> 
```

单击“删除”时，我想将要删除的产品的 parent_id 更新为 nil，但上面的 link_to 似乎不起作用。我得到一个：*没有路由匹配 [POST]“/products/1/edit”*路由错误。在我的 product_controller 中，我有：

```
def update
   if @product.update_attributes(params[:product])
     flash[:success] = "Product updated"
     redirect_to @product
   else
     render 'edit'
  end
end 
```

我究竟做错了什么？

**编辑：**

我尝试`method: put`改用：

```
<%= link_to "Remove", {parent_id: nil}, method: :put %> 
```

`No route matches [PUT] "/products/1/edit"`然后我在单击链接时收到错误消息。

我现在可以使用表单更改/删除父级，这根本不是我想要的，但无论如何：

```
<%= form_for @product do |f| %>    
    <%= f.label :parent_id %>
    <%= f.text_field :parent_id %>
    <%= f.submit "Update", class: "btn" %>  
<% end %> 
```

是否可以自动将 parent_id: nil 传递到表单中，以便当您点击更新时，它会设置 parent_id: nil （没有文本字段，只是一个按钮）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:11:03.683

尝试

```
<%= link_to "Remove", update_products_path(product:{parent_id: nil}), method: :put %> 
```

没有 HTTP 动词`update`，您需要的是`put`. [您可以在此处](http://guides.rubyonrails.org/routing.html)阅读有关 Rails 和 HTTP-Verbs 的 信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:46:45.167

多亏了@krichard 的回答和@froderiks 的评论，我终于让它工作了，方法是将路径设置为 /products/id 并传递`parent_id: nil`using `method: :put`：

```
<%= link_to "Remove", "/products/#{product.id}?product%5Bparent_id%5D=", method: :put %> 
```

使用 form_for 和 hidden_​​field 可以实现相同的效果（[使用按钮/链接将固定值传递给字段](https://stackoverflow.com/questions/13690829/passing-a-fixed-value-to-a-field-using-a-button-link)）：

```
<%= form_for product do |f| %>
  <%= f.hidden_field :parent_id, value: nil %>
  <%= f.submit "Remove", class: "btn" %>
<% end %> 
```

如果使用 hidden_​​field_tag 而不是 f.hidden_​​field，则必须在控制器中获取 :parent_id （感谢@froderik）：

```
<%= form_for product do |f| %>
  <%= hidden_field_tag :parent_id, nil %>
  <%= f.submit "Remove", class: "btn" %>
<% end %> 
```

**products_controller.rb**

```
def update
  @product.parent_id = params[:parent_id]
  ...
end 
```

# mysql - 使用外键从表中删除

> ID：13687086
> 
> 赞同：0
> 
> 时间：2012-12-03T16:03:16.867
> 
> 标签：mysql, foreign-keys, delete-row

我不确定我是否在这里误解了一些基本的东西，但这里是：

I have a persons table (persons have the typical attributes for persons: names, address, etc.) and a table of elected representatives. 代表具有附加属性（例如，副代表/替代代表或他们自己可以替代的人）。由于我有很多人并且只有少数代表（n<200），因此我将所有人共有的所有属性存储在persons 表中，并且仅将代表特定数据存储在代表表中。代表中的所有“数据”都是与人员表的关系。该表仅反映了谁被批准投票（以及谁被批准替代他，或者他正在替代）的当前状态。

```
representatives 
(numbers are the pk for persons, and empty cells here are NULL in the db)
_____________________________
|id|has_substitute|is_sub_for|
| 1|           2  |          |
| 2|              |        1 |
| 3|              |          |
| 5|              |          | 
```

所以有一天，代表被剥夺了投票权，我需要将他从代表中删除，但不在人员表中（他仍然是一个人）。他是替补的人，或者曾经是他替补的人也是如此。它们在我的模式中是 FK，但我不想将它们作为人删除，只是与出去的代表的关系。只是代表表中的行。

```
DELETE FROM representatives WHERE id=1; 
```

一切都错了。“无法删除或更新父行：外键约束失败” 但我不打算删除人员，只是用“代表”表创建的关系。

1.  是否有*删除并忽略关系（只是删除行）-mysql*的功能？

2.  我建模错了吗？如果是这样，有什么更好的方法？

PS：这是创建表信息

```
CREATE TABLE `representatives` (
  `person_id` varchar(33) NOT NULL,
  `permanent_substitute_for_id` varchar(33) DEFAULT NULL,
  `temporarily_substitute_for_id` varchar(33) DEFAULT NULL,
  PRIMARY KEY (`person_id`),
  KEY `representatives_250f5a24` (`permanent_substitute_for_id`),
  KEY `representatives_79c95594` (`temporarily_substitute_for_id`),
  CONSTRAINT `permanent_substitute_for_id_5c64807b` FOREIGN KEY (`permanent_substitute_for_id`) REFERENCES `persons` (`id`),
  CONSTRAINT `person_id_refs_id_5c64807b` FOREIGN KEY (`person_id`) REFERENCES `persones` (`id`),
  CONSTRAINT `temporarily_substitute_for_id_5c64807b` FOREIGN KEY (`temporarily_substitute_for_id`) REFERENCES `persones` (`id`) 
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `persones` (
  `id` varchar(33) NOT NULL,
  `first_name` varchar(150) NOT NULL,
  ..[more stuff]..
  PRIMARY KEY (`id`),
  KEY `fylkesperspektiv_personer_70fdfe4` (`fylke_id`),
  KEY `fylkesperspektiv_personer_3ab19c51` (`parti_id`),
  CONSTRAINT `fylke_id_refs_id_36bce012` FOREIGN KEY (`fylke_id`) REFERENCES `fylkesperspektiv_fylker` (`id`),
  CONSTRAINT `parti_id_refs_id_c381e045` FOREIGN KEY (`parti_id`) REFERENCES `fylkesperspektiv_partier` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:14:19.017

错误消息表明您具有with选项的`persons.representative_id`外键（默认值）。您可能想要改为删除代表并保留人员数据。`representative.id``ON DELETE RESTRICT``ON DELETE SET NULL`

或者，您可以将`representative.person_id`外键用作`person.id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:28:28.213

我会`rep_id`为每个人定义一列并将其与`rep`表格联系起来：

```
ALTER TABLE person
    ADD CONSTRAINT FK_person_rep
    FOREIGN KEY (rep_id) REFERENCES rep(rep_id)
    ON UPDATE CASCADE ON DELETE SET NULL; 
```

我也不会使用 rep 表中的**冗余** `has_substitute`列，只使用`is_sub_for`然后将其绑定到`rep_id`同一个表中。

```
ALTER TABLE rep
ADD CONSTRAINT FK_rep_rep
FOREIGN KEY (is_sub_for) REFERENCES rep(rep_id)
ON DELETE CASCADE ON UPDATE CASCADE; 
```

这样，当一个代表被删除时，他们所有的成员的 rep_id 列都被更新为 NULL，并且他们在同一个表中的 subs 被删除。如果 rep_id 被更改（不是说它应该发生，而是以防万一），则更新将级联到两个表中的子表。

# java - 无法通过java连接到我的sql

> ID：13687088
> 
> 赞同：0
> 
> 时间：2012-12-03T16:03:19.873
> 
> 标签：java, jdbc

我正在尝试通过 java 类连接到我的 mysql 数据库，但我收到了这些错误：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at TestConnection.main(TestConnection.java:14)
Caused by: java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.<init>(Unknown Source)
at java.net.Socket.<init>(Unknown Source)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
... 15 more 
```

这是我的课程代码：（我删除了登录信息）

```
import java.sql.*;

public class TestConnection{
  public static void main(String[] args) 
  {
    Connection conn = null;
    String url = "jdbc:mysql://ip:3306/";
    String dbName = "";
    String driver = "com.mysql.jdbc.Driver";
    String userName = ""; 
    String password = "";
    try {
      Class.forName(driver).newInstance();
      conn = DriverManager.getConnection(url+dbName,userName,password);
      System.out.println("Connected to the database");
      conn.close();
      System.out.println("Disconnected from database");
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

我将附上我工作区的图片，以便您确认我正确安装了 jdbc： ![在此处输入图像描述](../Images/80d6460bded63eeff20fa55a00676dac.png)

编辑：由于某种原因，我将真实 ip 更改为“ip”。忽略它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:07:51.360

你能从同一台机器的 mysql 控制台连接到 mysql 数据库吗？看起来数据库未启动或 java 程序无法连接到数据库。您还可以尝试在运行此程序的机器上安装 mysql 浏览器，并确保数据库从那里连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:06:57.343

请检查您的mysql服务器的IP地址。

您应该替换代码中的 IP 地址：

字符串 url = "jdbc:mysql:// **ip** :3306/";

也尝试ping你的mysql服务器的IP地址，找到它的网络链接是否正常？

查看更多**[MySQL 教程](http://www.roseindia.net/mysql/)**。

谢谢

# ios - iOS 音频单元混响流格式问题 -10868 kAudioUnitErr_FormatNotSupported

> ID：13687092
> 
> 赞同：2
> 
> 时间：2012-12-03T16:03:32.957
> 
> 标签：ios, avfoundation, core-audio, audiounit

我正在用音频单元编写一个简单的 iOS 应用程序。我想添加混响效果。所以图表看起来像 RemoteIO_Input -> Reverb -> RemoveIO_Output。但是在尝试为混响单元设置流格式时出现错误 - `kAudioUnitErr_FormatNotSupported`. 该代码在不使用混响单元（图中的单个远程 IO）的情况下工作正常，因此其他配置似乎很好，我没有提供他们的代码。

UPD：使用 iOS 6

所以问题：

1.  允许的格式有限制吗？

2.  我应该使用什么格式参数？

3.  应该在 RemoteIO 输出元素的任何范围内设置格式吗？

感谢关注。

代码： 说明：

```
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;

descRev.componentType = kAudioUnitType_Effect;
descRev.componentSubType = kAudioUnitSubType_Reverb2;
descRev.componentFlags = 0;
descRev.componentFlagsMask = 0;
descRev.componentManufacturer = kAudioUnitManufacturer_Apple; 
```

图表设置

```
NewAUGraph(&graph);
AUNode ioNode;
AUNode rNode;
AUGraphAddNode(graph, &desc, &ioNode);
AUGraphAddNode(graph, &descRev, &rNode);
AUGraphOpen(graph);
AUGraphConnectNodeInput(graph, ioNode, 1, rNode, 0);
AUGraphConnectNodeInput(graph, rNode, 0, ioNode, 0); 
```

格式说明和设置

```
 // Describe format
audioFormat.mSampleRate         = rate;//44100.00;
audioFormat.mFormatID           = kAudioFormatLinearPCM;
audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
audioFormat.mFramesPerPacket    = 1;
audioFormat.mChannelsPerFrame   = 1;
audioFormat.mBitsPerChannel     = 16;
audioFormat.mBytesPerPacket     = 2;
audioFormat.mBytesPerFrame      = 2;

    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &audioFormat,
                                  sizeof(audioFormat));
    if (noErr != err) {
        [self showStatus:err];
    }

    err = AudioUnitSetProperty(unitRev,
                           kAudioUnitProperty_StreamFormat,
                           kAudioUnitScope_Input,
                           0,
                           &audioFormat,
                           sizeof(audioFormat));
    if (noErr != err) {
        [self showStatus:err];
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:59:06.370

> 允许的格式有限制吗？

是的，而且他们通常非常严格。

> 我应该使用什么格式参数？

使用单位的默认 ASBD 或使用基于预先构建的标志集 (`kAudioFormatFlagsAudioUnitCanonical`和`kAudioFormatFlagsCanonical`) 的 ASBD，您将获得最大的运气。就像这样，而不是像这样编写自己的格式：

```
audioFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked; 
```

你会这样做：

```
audioFormat.mFormatFlags = kAudioFormatFlagsAudioUnitCanonical; 
```

一般来说，如果您只是将两个单元相互连接起来，他们将能够自己解决。`kAudioFormatFlagsAudioUnitCanonical`如果您需要提供自己的音频，则必须指定输入格式（并且它可能需要基于`SInt32`容器）。

如果您需要更大的灵活性，您可以`AUConverter`在混响单元之前放置一个音频单元，因为`AUConverter`它将能够处理更多的输入格式（例如正确的浮点样本）。请注意，这伴随着增加处理的警告，因为 AUConverter 必须实时转换音频格式。

[您可以在Core Audio Essentials页面的](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/CoreAudioEssentials/CoreAudioEssentials.html)*Canonical Audio Data Formats*标题下查看完整的 ASBD 示例。

> 应该在 RemoteIO 输出元素的任何范围内设置格式吗？

如果您的混响单元直接连接到 RemoteIO 输出，则这些单元应该能够自行对其进行分类。

# jsp - 替换 EL 中的“\n”

> ID：13687095
> 
> 赞同：7
> 
> 时间：2012-12-03T16:03:40.637
> 
> 标签：jsp, el

在 JSP 文件中，我想`\n`用`<br />`. 我试过

```
${fn:replace(someString, '\n', '<br />')} 
```

但我得到一个错误`'\n' ecnountered, was expeting one of...`

我猜这意味着解析器不喜欢这样的东西。

使用EL可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T16:23:44.140

为此创建一个 EL 函数。

首先创建一个静态方法来完成所需的工作：

```
package com.example;

public final class Functions {
     private Functions() {}

     public static String nl2br(String string) {
         return (string != null) ? string.replace("\n", "<br/>") : null;
     }
} 
```

然后创建一个`/WEB-INF/functions.tld`如下所示的：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1">

    <tlib-version>1.0</tlib-version>
    <short-name>Custom_Functions</short-name>
    <uri>http://example.com/functions</uri>

    <function>
        <name>nl2br</name>
        <function-class>com.example.Functions</function-class>
        <function-signature>java.lang.String nl2br(java.lang.String)</function-signature>
    </function>
</taglib> 
```

最后按如下方式使用：

```
<%@taglib uri="http://example.com/functions" prefix="f" %>
...
${f:nl2br(someString)} 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T17:25:26.503

你的方法要容易得多。我怎么没想到。这是一个演示页面。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<c:set var="newLine" value="\n" />
<c:set var="myText" value="one\ntwo\nthree" />
${fn:replace(myText, newLine, '<br/>')} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T23:02:21.597

对我来说，它首先定义一个变量`newLine`，或者使用

```
<% pageContext.setAttribute("newLine", "\n"); %> 
```

或者

```
<c:set var="newLine" value="<%= '\n' %>" /> 
```

进而

```
${fn:replace(someString, newLine, '<br/>')} 
```

# c# - c# Sagepay XOR 加密

> ID：13687096
> 
> 赞同：0
> 
> 时间：2012-12-03T16:03:42.103
> 
> 标签：c#, encryption, xor

我正在尝试在 C# 中编写 xor 加密，因为 sagepay 加密仅记录在 VB 中。

VB代码是：

```
Public Shared Function simpleXor(ByVal strIn As String, ByVal strKey As String) As String
    Dim iInIndex As Integer
    Dim iKeyIndex As Integer
    Dim strReturn As String
    If Len(strIn) = 0 Or Len(strKey) = 0 Then
        simpleXor = ""
        Exit Function
    End If

    iInIndex = 1
    iKeyIndex = 1
    strReturn = ""

    '** Step through the plain text source XORing the character at each point with the next character in the key **
    '** Loop through the key characters as necessary **
    Do While iInIndex <= Len(strIn)
        strReturn = strReturn & Chr(Asc(Mid(strIn, iInIndex, 1)) Xor Asc(Mid(strKey, iKeyIndex, 1)))
        iInIndex = iInIndex + 1
        If iKeyIndex = Len(strKey) Then iKeyIndex = 0
        iKeyIndex = iKeyIndex + 1
    Loop

    simpleXor = strReturn
End Function 
```

到目前为止，我已将其转换为

```
 public static String SimpleXOR(String strIn, String strKey)
    {
        Int32 iInIndex, iKeyIndex;
        String strReturn;
        iInIndex = 1;
        iKeyIndex = 1;
        strReturn = "";

        while (iInIndex <= strIn.Length)
        {
            strReturn = strReturn & Strings.Chr(Strings.Asc(Strings.Mid(strIn, iInIndex, 1)) ^ Strings.Asc(Strings.Mid(strKey, iKeyIndex, 1)));
                iInIndex = iInIndex + 1;
            if (iKeyIndex == strKey.Length) iKeyIndex = 0;
            iKeyIndex = iKeyIndex + 1;

        }

    } 
```

问题是我不明白这条线在做什么

```
strReturn = strReturn & Chr(Asc(Mid(strIn, iInIndex, 1)) Xor Asc(Mid(strKey, iKeyIndex, 1))) 
```

所以我通过一个 vb 到 c# 转换器运行它并得到了上述内容。但据我所知，它显然不是有效的 c# 代码。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:40:24.300

我可以想到两种方法来做到这一点：

首先，获取线程的当前 System.Globalization.CultureInfo.CurrentCulture.TextInfo.ANSICodePage，使用 GetEncoding 方法将其传递给新的 Encoding 类实例，然后使用 Encoding 实例的 GetBytes 方法将字符串转换为字节数组

```
 public static string SimpleXOR(string strIn, string strKey)
    {
        if (strIn.Length == 0 || strKey.Length == 0)
        {
            return string.Empty;
        }

        int inIndex = 0;
        int keyIndex = 0;
        string returnString = string.Empty;

        var currentCodePage = System.Globalization.CultureInfo.CurrentCulture.TextInfo.ANSICodePage;
        var encoding = Encoding.GetEncoding(currentCodePage);

        var inString = encoding.GetBytes(strIn);
        var keyString = encoding.GetBytes(strKey);

        while (inIndex < inString.Length)
        {
            returnString += (char)(inString[inIndex] ^ keyString[keyIndex]);

            inIndex++;

            if (keyIndex == keyString.Length - 1)
            {
                keyIndex = 0;
            }
            else
            {
                keyIndex++;
            }
        }

        return returnString;
    } 
```

另一种更简单的方法是在 C# 项目中添加对 Microsoft.VisualBasic 的引用，并让转换器生成的代码运行。Strings 类将可用，允许您只执行 Strings.Chr、Strings.Asc 和 Strings.Mid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:05:57.613

在 C# 中，这只是

```
strReturn += (char)(strIn[iInIndex] ^strKey[iKeyIndex]); 
```

# hadoop - Hadoop mapreduce 程序失败，退出代码为 127

> ID：13687099
> 
> 赞同：3
> 
> 时间：2012-12-03T16:03:46.923
> 
> 标签：hadoop, exit-code

想运行一些 hadoop 程序。我看到 NameNode、Datanode、Yarn 集群 URL 启动并运行。即 127.0.0.1:50070 /dfshealth.jsp, localhost:8088 /cluster/cluster 等

但是当我尝试运行我的 mapreduce 程序时： $ hadoop MySampleProgram hdfs://localhost/user/cyg_server/input/myfile.txt hdfs: //localhost/user/cyg_server/output/op

该程序失败并显示日志：

> INFO mapreduce.Job (Job.java:monitorAndPrintJob(1295)) - 地图 0% 减少 0%
> 
> INFO mapreduce.Job (Job.java:monitorAndPrintJob(1308)) - 作业 job_1354496967950_0003 失败，状态为 FAILED，原因是：应用程序 application_1354496967950_0003 由于应用程序尝试_1354496967950_0003_000001 的 AM 容器而失败 1 次：此尝试失败。22 失败并退出此尝试：失败。应用程序。
> 
> 2012-12-03 07:29:50,544 信息 mapreduce.Job (Job.java:monitorAndPrintJob(1313)) - 计数器：0

当我通过一些日志时，我注意到这一点： nodemanager.DefaultContainerExecutor (DefaultContainerExecutor.java:launchContainer(193)) - 任务的退出代码是：127

我正在使用 cygwin 在 Windows 7 中运行。

非常感谢任何输入。

**:::在此处添加更多信息:::** 到目前为止，我可以看到以下 hadoop 源在执行时 [尝试设置启动容器] 失败...我在此处添加该文件的源 URL ....（注意这不是 hadoop 错误，但我指出但我缺少一些东西）.... 类：DefaultContainerExecutor 方法：launchContainer 行：从方法 launchContainer 的开始到打印代码的 195。

[http://grepcode.com/file/repo1.maven.org/maven2/org.apache.hadoop/hadoop-yarn-server-nodemanager/0.23.1/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor。爪哇#193](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.hadoop/hadoop-yarn-server-nodemanager/0.23.1/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java#193)

**节点管理器日志提取**

> 信息 nodemanager.DefaultContainerExecutor (DefaultContainerExecutor.java:launchContainer(175)) -launchContainer: [bash, /tmp/nm-local-...2936_0003/container_1354566282936_0003_01_000001/default_container_executor.sh]
> 
> WARN nodemanager.DefaultContainerExecutor (DefaultContainerExecutor.java:launchContainer(193)) - 任务的退出代码是：127
> 
> 信息 nodemanager.ContainerExecutor (ContainerExecutor.java:logOutput(167)) -
> 
> WARN launcher.ContainerLaunch (ContainerLaunch.java:call(274)) - 容器以非零退出代码 127 退出

谢谢哈里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-06T10:10:21.297

硬编码 hadoop-env.sh 中的 java home 路径为我解决了如下问题：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T06:23:05.030

当我尝试使用标准 Hadoop 发行版中未包含的库时（`org.apache.lucene`在我的例子中），我遇到了这个问题。解决方案是使用`"yarn.application.classpath"`配置属性将缺少的库添加到纱线类路径：

```
 String cp = conf.get("yarn.application.classpath");
    String home=System.getenv("HOME");
    cp+=","+home+"/" + ".m2/repository/org/apache/lucene/lucene-core/4.4.0/*";
    cp+=","+home+"/" + ".m2/repository/org/apache/lucene/lucene-analyzers/4.4.0/*";
    cp+=","+home+"/" + ".m2/repository/org/apache/lucene/lucene-analyzers-common/4.4.0/*";
    conf.set("yarn.application.classpath", cp); 
```

# ruby-on-rails-3 - 从太阳黑子 solr 结果中排除？

> ID：13687104
> 
> 赞同：2
> 
> 时间：2012-12-03T16:04:13.083
> 
> 标签：ruby-on-rails-3, sunspot

我在 Rails 3 应用程序上尝试使用 sunspot solr 进行搜索时遇到了问题......目前我通常成功搜索了很多字段（有和没有全文），我需要包含一个过滤器以便如果满足条件，可能的匹配将从结果集中排除：

示例：搜索“BBXY”，此搜索可能会产生“BBXY01”、“XYB03”等匹配项。我需要排除所有以“6”结尾的可能匹配项，这可能吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:14:56.587

我只是有一个“问SO，第二天自己得到答案”的案例

首先我配置了一个只获取字符串最后一个字符的字段

```
string :last_char do
        profile.my_string.last
end 
```

然后在搜索方法上使用“无”语法，例如：

```
User.search do
...
without :last_char, params[:last_char] unless params[:last_char].blank?
end 
```

希望以后有人会发现这很有用:)

# c# - C# 多线程行为

> ID：13687106
> 
> 赞同：1
> 
> 时间：2012-12-03T16:04:24.677
> 
> 标签：c#, multithreading

我写了一个简单的多线程片段只是为了让自己习惯这个概念。

```
public void testThread(int arg1, ConsoleColor color)
    {
        for (int i = 0; i < 1000; i++)
        {
            Console.ForegroundColor = color;
            Console.WriteLine("Thread " + color.ToString() + " : " + i);
            Console.ResetColor();
            Thread.Sleep(arg1);
        }
    }

Thread t1 = new Thread(() => program.testThread(1000, ConsoleColor.Blue));
Thread t2 = new Thread(() => program.testThread(1000, ConsoleColor.Red));
t1.Start();
t2.Start();
t1.Join();
t2.Join(); 
```

我在输出控制台窗口中看到的是

![在此处输入图像描述](../Images/1313955837f17100c97b454f41c510b6.png)

我只是不明白为什么有时用红色装饰的线会变成白色或浅灰色（无论如何）。你能帮助启发这个想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:07:44.017

您的代码块不是*atomic*。这意味着两个线程可以交织在一起。例子：

```
 Thread 1 (Red)               Thread 2 (Blue)
--------------------------------------------------------------
                                 Set Color Blue
   Set Color Red         
                                 Print Text (printed in Red!)
   Print Text (printed in Red!) 
```

如果您希望线程的操作是*原子*的，即不可中断，您需要使用*锁定*：

```
private static readonly object myLock = new object();

public void testThread(int arg1, ConsoleColor color)
{
    for (int i = 0; i < 1000; i++)
    {
        lock (myLock) {
            Console.ForegroundColor = color;
            Console.WriteLine("Thread " + color.ToString() + " : " + i);
            Console.ResetColor();
        }
        Thread.Sleep(arg1);
    }
} 
```

[lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)确保在任何给定时间只有[临界区](http://en.wikipedia.org/wiki/Critical_section)中的*一个*线程：

```
 Thread 1 (Red)               Thread 2 (Blue)
--------------------------------------------------------------
                                 Enter critical section (lock)
   wait...                       Set Color Blue
                                 Print Text (printed in Red!)
                                 Reset Color
                                 Leave critical section
   Enter critical section (lock)
   ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T16:07:34.817

因为

*   线程 1 执行：`Console.ForegroundColor = color;`
*   线程 2 执行：`Console.ResetColor();`
*   线程 1 执行：`Console.WriteLine("Thread " + color.ToString() + " : " + i);`

您可以使用锁来防止这种情况。

```
private static readonly object lockObject=new object();

public void testThread(int arg1, ConsoleColor color)
{
    for (int i = 0; i < 1000; i++)
    {
        lock (lockObject) {
          Console.ForegroundColor = color;
          Console.WriteLine("Thread " + color.ToString() + " : " + i);
          Console.ResetColor();
        }
        Thread.Sleep(arg1);
    }
}

Thread t1 = new Thread(() => program.testThread(1000, ConsoleColor.Blue));
Thread t2 = new Thread(() => program.testThread(1000, ConsoleColor.Red));
t1.Start();
t2.Start();
t1.Join();
t2.Join(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T16:06:59.503

您正在调用`Console.ResetColor();`，它将颜色设置回默认值（灰色）。因为您有两个线程同时写入控制台，所以有时一个线程在另一个线程设置颜色*之后*重置颜色，但*在*另一个线程打印之前。

[您可以使用线程同步](http://msdn.microsoft.com/en-us/library/ms173179.aspx)解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T16:07:19.160

在打印文本之前，您必须锁定设置控制台颜色的段。

在打印文本之前，线程可能会中断并重置颜色。

像这样更改您的代码：

```
public void testThread(int arg1, ConsoleColor color, object lockObj)
{
    for (int i = 0; i < 1000; i++)
    {
        lock(lockObj)
        {
            Console.ForegroundColor = color;
            Console.WriteLine("Thread " + color.ToString() + " : " + i);
            Console.ResetColor();
        }
        Thread.Sleep(arg1);
    }
}

var lockObj = new object();
Thread t1 = new Thread(() => program.testThread(1000, ConsoleColor.Blue, lockObj));
Thread t2 = new Thread(() => program.testThread(1000, ConsoleColor.Red, lockObj)); 
```

# asp.net-mvc-3 - 如何使用自定义活页夹来规范用户输入？

> ID：13687107
> 
> 赞同：0
> 
> 时间：2012-12-03T16:04:24.713
> 
> 标签：asp.net-mvc-3, c#-4.0, custom-model-binder

根据用户输入，我想在实体到达控制器的操作之前取消实体的某些属性。在一个粗略的例子中（实际模型要复杂得多），假设我的实体有一个 BillingType 属性，它定义了客户是按月还是每两周计费：

```
public class BillingMethod
{
    public int Id { get; set; }
    public int BillingTypeValue { get; set; }
    public BillingType BillingType
    {
        get
        {
            return (BillingType)BillingTypeValue;
        } 
        set
        {
            BillingTypeValue = (int)value;
        }
    }

    public int? DayOfMonth { get; set; }
    public int? DayOfFirstFortnight { get; set; }
    public int? DayOfSecondFortnight { get; set; }
}

public enum BillingType
{
    Monthly,
    Fortnightly
} 
```

现在假设用户选择按月收费，然后将 DayOfMonth 属性设置为 15。然后他改变主意，将 Billing Type 设置为每两周一次，并设置两个两周一次的属性，最后提交表单。我需要的是一种在未使用的属性（在此示例中为 DayOfMonth）到达控制器的操作之前将其无效的方法。

我知道当用户从一种计费类型更改为另一种计费类型时，或者通过拦截表单的 onSubmit 事件时，我可以通过 javascript 执行此操作。甚至在动作内部，在将其保存到上下文之前，但我需要一种方法来执行一次并忘记它。

我认为最好的方法是使用自定义模型绑定器，但我没有任何经验。我尝试创建一个新`ModelBindingContext`对象，但我不知道如何在新对象中获取和解析表单数据，所以我显然需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:36:15.677

我设法使用自定义活页夹修改了对象。首先我调用 base.BindModel，然后在返回之前修改属性。

```
public class BillingMethodModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext cContext, ModelBindingContext bContext)
    {
        var newBillingMethod = (BillingMethod)base.BindModel(cContext, bContext);
        var bType = newBillingMethod.BillingTypeValue;
        if (bType == (int)BillingType.Monthly)
        {
            newBillingMethod.DayOfFirstFortnight = null;
            newBillingMethod.DayOfSecondFortnight = null;
        }
        else
        {
            newBillingMethod.DayOfMonth = null;
        }

        return newBillingMethod;
    }
} 
```

当然，在 global.asax 的 Application_Start() 中添加自定义绑定器：

```
ModelBinders.Binders.Add(typeof(BillingMethod), new BillingMethodModelBinder()); 
```

这对我很有用，我会等待一天左右才能接受这个答案，以防万一有人提出更好的解决方案或指出我在使用此方法时可能遇到的任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:18:18.957

我会小心地在自定义模型绑定器中执行此操作。您将遇到的一个问题是每个属性都是单独绑定的，您对顺序没有太多控制权。听起来您需要在绑定完成后根据对象的状态做出一些决定。

在这种情况下，我可能会使用动作过滤器。请参阅：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuting (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuting(v=vs.98).aspx)

```
public class BillMethodFilterAttribute : ActionFilterAttribute {

     protected override void OnActionExecuting(ActionExecutingContext filterContext) {
        base.OnActionExecuting(filterContext);
           if (filterContext.Controller.ViewData.ModelMetadata.ModelType == typeof(BillingMethod)) {
               var method = filterContext.Controller.ViewData.Model as BillingMethod;
               if (method != null) {
                  //assign appropriately - binding is complete, you have full state of the object
               }
           }
        }        
}

[BillMethodFilter]
public abstract class ProjectController : Controller {

}

public class SomeController : ProjectController {

      public ActionResult SomeAction(BillingMethod method) {
            //before this action runs, the BillMethodFilter should execute and your billing method will be fully initialized correctly
      }
} 
```

# c++ - Arduino Only 只读取一个字符。

> ID：13687108
> 
> 赞同：1
> 
> 时间：2012-12-03T16:04:28.177
> 
> 标签：c++, arduino

该程序旨在读取输入，并将其写在 Arduino 的串行监视器中。它在串行监视器中只写入一个字符的问题。

```
void setup()
{
Serial.begin(9600); //Set the serial monitor.
lcd.begin(16, 2); //Set the LCD
}
// Alignment variables
boolean left = true; //Set boolean left to true to begin to display text in middle of screen.
boolean right = false; //Other possible align booleans set to false
boolean select = false;
//Text show/hide variables
boolean show1 = true;  //Both values set to true to display on start up.
boolean show2 = true;
//Serial input
char serialinput [4] = {0}; //For 3 value input, and null character to end.
char line1;
void loop()
 {

 if (Serial.available() > 0) { //If the serial monitor is open it will read a value.
    line1 = Serial.read();
    Serial.print(line1);
    memmove (serialinput, &serialinput[1], 3); //copy the value to memory
    serialinput [2] = Serial.read(); //value is read.
    //if statements for each possible input.

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:30:52.990

您将一个字节读取到 line1，然后打印该字节。应该循环打印一行。还有这条评论：

```
if (Serial.available() > 0) { 
//If the serial monitor is open it will read a value. 
```

不是真的。`Serial.available()`返回当前在缓冲区中的字节数。因此，这一行：在没有验证是否有任何要读取的内容的`serialinput[2] = Serial.read();`情况下调用。`read()`显然`//if statements for each possible input.`在末尾有`loop()`，这些有什么作用？我怀疑没有逻辑可以断言`serialinput[]`特定字节的最终位置。将长度超过 2 个字节的消息发送到您的代码，因为它发布在此处将覆盖这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:45:47.107

Serial.read 不等待字符串的结尾。如果您尝试读取几个字符（由 [4] 暗示），您只需要在 serial.read 之后包含一个短暂的 delay() 即可让缓冲区有足够的时间完全转储字符串。

```
if (Serial.available() > 0) { //If the serial monitor is open it will read a value.
 line1 = Serial.read();
 delay(100);
 Serial.print(line1); 
```

# c# - 多个线程可以设置 STA 单元吗？

> ID：13687109
> 
> 赞同：0
> 
> 时间：2012-12-03T16:04:28.737
> 
> 标签：c#, multithreading

我正在考虑使用此代码来检测线程是否是主（UI）线程。

```
public static bool IsMainThread()
{
    return Thread.CurrentThread.GetApartmentState() == ApartmentState.STA;
} 
```

运行返回 false 的任务的工作线程似乎可以正常工作，只是想知道它是否普遍正确。

如果相关，这是一个 WPF 应用程序。

这类似于我的另一个问题：[如何断言代码正在主线程中运行？](https://stackoverflow.com/questions/13048522/how-do-i-assert-that-the-code-is-running-in-the-main-thread)但是没有人建议这种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:30:18.997

According to the documentation for STAThreadAttribute, you can not have more than one thread that is STA (you can't even truely have one unless you are using COM interop).

"Apply this attribute to the entry point method (the Main() method in C# and Visual Basic). It has no effect on other methods."

Since .Net 2.0 the Single Threaded Apartment is only intended for use when performing COM interop.

"COM threading models only pertain to applications that use COM interop. Using this attribute in an application that does not use COM interop has no effect."

"In the .NET Framework version 2.0, new threads are initialized as ApartmentState.MTA if their apartment state has not been set before they are started. The main application thread is initialized to ApartmentState.MTA by default."

Reference: [http://msdn.microsoft.com/en-us/library/system.stathreadattribute(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.stathreadattribute(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:06:37.560

是的，您可以在创建其他线程时在其他线程上设置 STA。线程池线程在 MTA 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:07:09.987

是的，您可以让多个线程拥有 STA 单元。但是你不能在线程之间交换框架元素，这仍然会导致错误。这意味着您不能制作文本框控件并将其填充到也是 STA 的工作线程中，然后将其传递给您的主线程（也是 STA）并将其添加到表单中。这仍然会导致错误。那么问题来了，为什么要给STA设置多个线程呢？

# javascript - 向 TinyMCE 添加自定义元素的首选方式

> ID：13687113
> 
> 赞同：1
> 
> 时间：2012-12-03T16:04:50.500
> 
> 标签：javascript, tinymce, rich-text-editor

我是 tinyMCE 的新手，目前正在研究向 tinyMCE 添加自定义元素的首选方式？

我在工具栏上添加了一些按钮，它们依次触发 (a) 为选定的文本部分插入元素，以及 (b) 在再次单击时从选定的文本中删除这些元素。

我不想允许嵌套这些元素，所以基本上我只想用给定的、不重叠的标签来标记句子或单词的一部分，例如：`<foo>Hello</foo> world`

目前我在 tinyMCE 文档中发现了这两种可能性：

```
#1 tinyMCE.execInstanceCommand(editor_id, command, user_interface, value, focus) 
```

和

```
#2  var n = dom.create(element);
    n.innerText = sel.getContent({format : 'text'});
    tinyMCE.activeEditor.selection.setNode(n); 
```

其中＃2看起来像更灵活的方法，因此值得我追求。

我已经开始使用方法 #2 实现一个插件，但我不确定我将如何处理以下内容：

*   选择重叠*元素边界*和*文本*节点（如`<foo>hello</foo> world <bar>!</bar>`
*   合并相邻元素 ( `<foo>bar</foo><foo>bar</foo>`) 或
*   如何处理*空*元素等等。

这就是为什么我想知道我是否缺少某种预定义的界面，因为诸如此类的“正常”元素也应该需要许多这些功能`strong, em, h1,…,h6`。

如果您需要更多信息，请告诉我，任何提示或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:18:40.093

出于格式化目的`Formatter.js`，tinymce 核心文件中有类。但是你想要的非常复杂。我们试图阻止tinymce 嵌套跨度并`Formatter.js`根据我们的需要进行调整。

# sql - 插入命令中的错误

> ID：13687116
> 
> 赞同：0
> 
> 时间：2012-12-03T16:04:56.313
> 
> 标签：sql, sql-server, sql-server-2008

下面是我的插入命令，我试图将 IP 地址插入表中的记录中。该`IP_Address`属性具有`nvarchar`数据类型。但是错误显示在`206`IP 地址中的数字下方

代码：

`INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) VALUES (98.137.206.119,98.137.206.126)`

`Msg 102, Level 15, State 1, Line 2 Incorrect syntax near '.206'.`

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:06:44.327

两个问题 - 一个`NVARCHAR`不包含在 中`'`，一个`VALUES`有*两个*值，而不是一个：

```
INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) 
VALUES ('98.137.206.119'),
('98.137.206.126') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:05:59.940

尝试：

```
INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) VALUES ('98.137.206.119','98.137.206.126') 
```

看来您缺少引号 ''

如果表格只有一列，您需要这样做：

```
 INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) VALUES ('98.137.206.119')
 INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) VALUES ('98.137.206.126') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:06:15.410

```
INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) VALUES ('98.137.206.119');
INSERT INTO [IP_Loc].[dbo].[IP_Addresses] (IP_Address) VALUES ('98.137.206.126'); 
```

# mongodb - 属性数组的 MongoDB 多键索引

> ID：13687117
> 
> 赞同：0
> 
> 时间：2012-12-03T16:05:01.220
> 
> 标签：mongodb, indexing

我的产品集合中有 3 个文档：

```
samsung = {
  title: 'Samsung Galaxy S III',
  category_id: ObjectId("50bcc2f0b910a6c1936a4424"),
  properties: [
    {
      title: 'OS',
      value: 'Android'
    },
    {
      title: 'Display',
      value: '4.8"'
    }
  ]
}

htc = {
  title: 'HTC One X',
  category_id: ObjectId("50bcc2f0b910a6c1936a4424"),
  properties: [
    {
      title: 'OS',
      value: 'Android'
    },
    {
      title: 'Display',
      value: '4.7"'
    }
  ]
}

apple = {
  title: 'Apple iPhone 5',
  category_id: ObjectId("50bcc2f0b910a6c1936a4424"),
  properties: [
    {
      title: 'OS',
      value: 'iOS'
    },
    {
      title: 'Display',
      value: '4"'
    }
  ]
} 
```

和索引`{category_id: 1, 'properties.title': 1, 'properties.value': 1}`。

我认为索引应该是这样的：

```
ObjectId("50bcc2f0b910a6c1936a4424")
  OS
    Android
      samsung
      htc
    iOS
      apple
  Display
    4.8"
      samsung
    4.7"
      htc
    4"
      apple 
```

我期望该查询：

```
{
  category_id: ObjectId("50bcc2f0b910a6c1936a4424"),
  properties: {
    $elemMatch: {
      title: 'OS',
      value: 'Android'
    }
  }
} 
```

nscanned == 2，nscannedObjects == 2，n == 2。但我得到这样的输出`explain()`：

```
{
        "cursor" : "BtreeCursor category_id_1_properties.title_1_properties.value_1",
        "nscanned" : 3,
        "nscannedObjects" : 3,
        "n" : 2,
        "millis" : 0,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : true,
        "indexOnly" : false,
        "indexBounds" : {
                "category_id" : [
                        [
                                ObjectId("50bcc2f0b910a6c1936a4424"),
                                ObjectId("50bcc2f0b910a6c1936a4424")
                        ]
                ],
                "properties.title" : [
                        [
                                "OS",
                                "OS"
                        ]
                ],
                "properties.value" : [
                        [
                                {
                                        "$minElement" : 1
                                },
                                {
                                        "$maxElement" : 1
                                }
                        ]
                ]
        }
} 
```

你能解释一下为什么`indexBounds`不是`"properties.value"`吗`["Android","Android"]`？

我可以重写查询或重建索引以使用索引获得正确的手机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:04:07.277

这是 MongoDB 的一个错误：[https](https://jira.mongodb.org/browse/SERVER-3104) ://jira.mongodb.org/browse/SERVER-3104 。

开发版本 2.3.1 有相同的错误，但在最新的夜间版本（我在 2012-12-03 测试过）中，一切似乎都运行良好。

# - 姜戈 1.5

> ID：13687119
> 
> 赞同：0
> 
> 时间：2012-12-03T16:05:03.067
> 
> 标签：

Django 1.5 是 Django 框架的一个版本，于 2013 年 2 月发布。如果您的问题与此版本特别相关，请仅使用此标签。

# google-app-engine - 即使具有正确的值，jobs.get(jobId,ProjectId) 中的 HttpError 400

> ID：13687121
> 
> 赞同：1
> 
> 时间：2012-12-03T16:05:18.230
> 
> 标签：google-app-engine, google-bigquery

当我打电话给 jobs.get(jobId,ProjectID); 我得到：

> "code" : 400, "errors" : [ { "domain" : "global", "message" : "Invalid project ID 'My_Project_ID:job_6c2e8cc358ad42d2ad55ef266d342b68'。项目 ID 必须包含 6-63 个小写字母、数字或破折号。ID必须以字母开头，不能以破折号结尾。", "reason" : "invalid" } ], "message" : "Invalid project ID 'My_Project_ID:job_6c2e8cc358ad42d2ad55ef266d342b68'。项目 ID 必须包含 6-63 个小写字母、数字, 或破折号。ID 必须以字母开头，不得以破折号结尾。”

（我用“My_Project_ID”切换了 projectId）

[如果我在此处](https://developers.google.com/bigquery/docs/reference/v2/jobs/get)的 google 开发人员指南的“试用”部分中使用确切的 projectID 和 jobID

我按预期得到了工作！

如果 projectId 或 jobId 不正确，那么它也不会在谷歌开发者网站上工作。什么会导致这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:41:26.253

看起来您将完全限定的作业 ID 作为项目 ID 传递。在上面提到的示例中，“My_Project_ID”是项目 ID，“job_6c2e8cc358ad42d2ad55ef266d342b68”是作业 ID，但看起来您正在传递完整的字符串“My_Project_ID:job_6c2e8cc358ad42d2ad55ef266d342b68”作为作业 ID。

另请注意，参数 order 是 (projectId, jobId)，而不是 (jobId, projectId)。

尝试调用 jobs.get("My_Project_ID", "job_6c2e8cc358ad42d2ad55ef266d342b68")，看看是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T12:22:08.530

我在尝试执行以下操作时遇到了这个问题：

工作().get(projectId, job.getId()).execute().getStatus().getState();

似乎 job.getId() 返回一个包含 ProjectId 和 JobId 的字符串（并包含 Job-Ids 中不允许的字符）。解决方案是改为调用 job.getJobReference().getJobId()。

jobs().get(projectId, job.getJobReference().getJobId()).execute().getStatus().getState();

# .net - WebRequest 无法正常工作

> ID：13687124
> 
> 赞同：0
> 
> 时间：2012-12-03T16:05:19.527
> 
> 标签：.net, browser

我编写了这个函数来检查互联网连接是否可用：

```
 bool IsOnline()
    {
        try
        {
            var request = (HttpWebRequest)WebRequest.CreateHttp("http://www.google.com/");
            request.Timeout = 2000;

            var response = (HttpWebResponse)request.GetResponse();
            return ((int)response.StatusCode) < 400;
        }
        catch (Exception) { return false; }      
    } 
```

它似乎在几乎所有情况下都有效，但是在我的工作网络下，它在连接可用时超时错误后返回 false。

注意： - 此函数返回 false，但我可以在我的 WPF 应用程序中使用 webbrowser 组件上网 - 连接非常好。（因此加载 google.com 的时间不可能超过 2 秒） - 我在控制面板/Internet 选项/连接中正确配置的代理后面

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:31:39.630

在正常情况下，407 意味着您有一个代理阻止您...虽然它不会产生超时...它是一个“快速”回复，甚至不被视为异常...

尝试这个：

```
 HttpClientHandler clientHandler = new HttpClientHandler();
            clientHandler.Proxy = new WebProxy("PROXY ip HERE", true, null, System.Net.CredentialCache.DefaultNetworkCredentials);                

            HttpClient cli = new HttpClient(clientHandler);

            cli.BaseAddress = new Uri("http://google.com");

            HttpResponseMessage response = cli.GetAsync("").Result;  // Blocking call!

            textBox1.Text = response.Content.ReadAsStringAsync().Result; 
```

顺便说一句，这使用 Web API ...

编辑：becaerfull！错误 401（未经授权）、500（内部服务器错误）大于 400，并不代表连接不畅！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:57:20.653

作为解决方法，我以这种方式更改了我的功能：

```
bool IsOnline()
{
    try
    {
        var request = (HttpWebRequest)WebRequest.CreateHttp("http://www.google.com/");
        request.Timeout = 2000;

        var registry = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings", false);
        var proxy = (string)registry.GetValue("ProxyServer");
        var isProxyEnabled = (int)registry.GetValue("ProxyEnable");
        if (isProxyEnabled>0)
        {
            request.Proxy = new WebProxy(proxy, true, null, System.Net.CredentialCache.DefaultNetworkCredentials);
        }

        var response = (HttpWebResponse)request.GetResponse();
        return ((int)response.StatusCode) < 400;
    }
    catch (Exception) { return false; }      
} 
```

如果我尝试使用 WebRequest.GetSystemWebProxy()，我会得到一个 IWebProxy (WrappedWebProxy)，它的设置与我手动构建的设置相同，但它不起作用。如果我没有检查“绕过本地地址的代理服务器”，它也会将所有地址识别为本地地址。

然后，如果我通过调试器更改 bypasslocal 标志，它就可以工作。太奇怪了，看起来像个虫子。

# php - 使用 .htaccess 获取每个正斜杠作为参数

> ID：13687130
> 
> 赞同：1
> 
> 时间：2012-12-03T16:05:36.927
> 
> 标签：php, apache, .htaccess, url-rewriting

我有这个*.htaccess*代码：

```
Options +FollowSymLinks  
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteRule ^([\w-]+)/*$ ./index.php?page=$1 
```

`$_GET`这允许在正斜杠之后附加一个参数并在 PHP中用作 a ，如下所示：

网址：

```
http://www.url.com/home 
```

PHP：

```
<?php
    echo $_GET['home'];
?> 
```

我的问题是，如何获取每个正斜杠并将该值作为新值传递`$_GET`给 PHP 使用？我假设问题将使用正则表达式解决方案，但由于我不了解正则表达式，我无法弄清楚。

只是为了举例说明，我想要这个：

```
http://www.url.com/param1/param2/param3 
```

翻译成：

```
$_GET['param1'];
$_GET['param2'];
$_GET['param3']; 
```

等等等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:13:26.740

这是一个想法：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9-=_.]+)/([a-zA-Z0-9-=_.]+)/([a-zA-Z0-9-=_.]+)/?$   http://www.example.com/index.php?par1=$1&par2=$2&par3=$3 [L] 
```

不能使用 (.*) 因为包含斜线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:17:08.733

不要在重写模块中这样做。

而是对您的脚本进行简单的重写并访问其中的原始请求 ($_SERVER['HTTP_REQUEST_URI'])。您将获得在请求中指定的路径，您可以使用 explode() 函数在斜杠处分隔该路径。

# uiscrollview - 从纵向计算 UIScrollViews 横向 contentOffSet 的算法？

> ID：13687132
> 
> 赞同：3
> 
> 时间：2012-12-03T16:05:37.773
> 
> 标签：uiscrollview

如果提供了纵向 contentOffSet，有谁知道计算滚动视图横向 contentOffSet 的算法？

然后反之亦然，如果提供了风景 contentOffSet 来引出肖像 contentOffSet

提前致谢

# ios - 使用相机后 iOS/PhoneGap 应用程序方向更改

> ID：13687133
> 
> 赞同：1
> 
> 时间：2012-12-03T16:05:46.743
> 
> 标签：ios, ipad, cordova, camera, orientation

我正在使用的 iOS/PhoneGap 应用程序有问题。该应用程序设置为仅面向横向。该应用程序运行良好，直到我使用相机拍照。在应用程序中拍摄、保存和显示照片后，方向更改为纵向，即使 iPad 仍处于横向位置。该应用程序不是横向或任何东西，我只是在屏幕右侧有一个很大的黑色空间，就好像一个纵向应用程序正在横向屏幕上显示一样。有没有其他人有这个问题？有关如何修复的任何建议？

# coldfusion - Application.cfm 301 重定向后缺少会话变量

> ID：13687135
> 
> 赞同：3
> 
> 时间：2012-12-03T16:05:49.363
> 
> 标签：coldfusion, http-status-code-301, coldfusion-7, application.cfm

运行 ColdFusion 7。

`session`Application.cfm 将所有变量循环到`request.session`

OnRequestEnd.cfm 将所有`request.session`值循环回`session`

它这样做是为了在单个事务中写入变量时只需要锁定一次范围。（我相信这不再是一个问题了？但我不能完全撕掉它）。

我有一个“redirect.cfm”页面，它提供 301 重定向到 SEO URL 或提供内容。某些表单发布到旧 URL，因此需要 301 重定向，这会导致 POST 数据丢失。这就是我打算如何处理它。

```
<!--- if form scope exists (posted data) copy it to the request.session scope ---> 
<cfif structKeyExists(form,'fieldNames')>
    <cfset request.session.postData = structCopy(form)>
</cfif> 
```

然后它继续进行 301 重定向，当它返回到 redirect.cfm 以传递内容时，它运行此代码

```
<!--- if request.session.postData exists (posted data) copy it to the form scope --->
<cfif structKeyExists(request.session,'postData')>
    <cfset form = structCopy(request.session.postData)>
    <cfset StructDelete(request.session,'postData')>
</cfif> 
```

如果数据发布不需要 301 重定向，这可以正常工作。

通过 301 重定向，我确认 Application.cfm、OnRequestEnd.cfm 都运行了两次（一次用于初始 301，一次用于内容交付）。

在第一次 OnRequestEnd.cfm 调用结束时，`session.postdata`表单数据已正确填充。

在 301 重定向之后，它再次点击 Application.cfm，`session.postdata`返回“struct [empty]”

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T17:20:00.333

[structCopy()](http://livedocs.adobe.com/coldfusion/7/htmldocs/wwhelp/wwhimpl/common/html/wwhelp.htm?context=ColdFusion_Documentation&file=00000635.htm)创建结构的浅表副本，这意味着嵌套结构仅供参考，这就是为什么您的简单值仍然存在而嵌套结构没有。一旦您的表单结构不再包含数据，您的 postData 结构就会开始引用一个空结构，因此您的引用也是空的。

要对结构进行“深度复制”，请使用[duplicate()](http://livedocs.adobe.com/coldfusion/7/htmldocs/wwhelp/wwhimpl/common/html/wwhelp.htm?context=ColdFusion_Documentation&file=00000635.htm)

另见[其他结构函数](http://livedocs.adobe.com/coldfusion/7/htmldocs/wwhelp/wwhimpl/common/html/wwhelp.htm?context=ColdFusion_Documentation&file=00000635.htm)

[用于删除结构的 CF 9 文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09f0b-7fdc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:44:36.700

[更新：这个答案是*错误*的。我只是把它留在这里，因为我对[这种情况进行了一些有趣的调查](http://adamcameroncoldfusion.blogspot.co.uk/2012/12/i-love-being-wrong.html)，这可能值得人们阅读]

@Travis 所说的是问题——“当表单结构不再存在时，你的 postdata 结构也不再存在”——绝对不是真的。对表单范围的引用可能已经消失，但只要有对数据的*任何*引用（如`request.session.postData`），就*不会*删除底层对象。

问题很可能是当您进行重定向时， OnRequestEnd.cfm 不会针对该请求运行，因此 request.session 中的变量永远不会被复制到会话范围中。这完全取决于您如何进行重定向。我假设它已经与 a 一起使用`<cflocation>`，除非您说您使用的 CFMX7 不能执行 301（您说您正在执行）：它只能执行 302。你能请澄清你是如何做这个重定向的？干杯。

题外话：在继续所有这些遗留的会话锁定恶作剧时，您会在请求的两端添加相当多的开销和瓶颈。你真的应该留出一些时间把它全部拿出来。自 CF5 以来，这种锁定会话范围锁定的携带就没有必要了。此外，如果您的会话范围包含结构，那么无论如何您都不会缓解问题。这显然是一个旁白。与您的实际问题无关。我只是觉得值得一提。

# java - 如何从html表单调用包内的类

> ID：13687140
> 
> 赞同：0
> 
> 时间：2012-12-03T16:05:54.050
> 
> 标签：java, html, servlets, netbeans

我试图将我的`doLogin.java`类（servlet）放在一个名为`LoginSession`但我不能从我的表单中调用这个类的包中`<form name="logForm" action="LoginSession/doLogin" method="POST">`，它会在找不到源时引发服务器错误。

当我将类放在默认包中时，只需通过这种方式修改操作，我就可以毫无问题地调用它，`<form name="logForm" action="doLogin" method="POST">`但我知道将类直接放入默认包中是一种非常糟糕的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:08:06.710

您应该`LoginSession.doLogin`使用完全限定的类名将其称为 。

或者，您可以定义一个[servlet 映射](http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/configureservlet.html)并将一个 url 模式与有意义的短名称相关联以引用该 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T09:11:35.793

在 HTML 页面中

```
<form action = "com.Demo"> 
```

在`Dmo.java`com 包中包含的文件中

web.xml

```
<servlet>
    <description></description>
    <display-name>Demo</display-name>
    <servlet-name>Demo</servlet-name>
    <servlet-class>com.Demo</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Demo</servlet-name>
    <url-pattern>/com.Demo</url-pattern>
</servlet-mapping> 
```

# clojure - Eclipse Leiningen 插件安装问题

> ID：13687143
> 
> 赞同：3
> 
> 时间：2012-12-03T16:06:02.613
> 
> 标签：clojure, leiningen

对不起这个问题，我是 Clojure 的新手。我关注[了这篇博客](http://cemerick.com/2012/05/02/starting-clojure/) 如何为 Eclipse 安装 Leiningen 插件，发现该插件的链接 ( [http://ccw.cgrand.net/updatesite-lein-betas](http://ccw.cgrand.net/updatesite-lein-betas) ) 已损坏。

![在此处输入图像描述](../Images/3375f5da070884a45b60f9a1f818c24e.png)

有没有其他方法来安装这个插件，或者更好的是，一个工作链接？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:33:25.583

测试版更新站点是[http://ccw.cgrand.net/updatesite-betas/](http://ccw.cgrand.net/updatesite-betas/)。新的 CCW 版本包括 leiningen 集成，因此它们不再是单独的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:25:55.293

该帖子有点旧，当前的更新站点（放在 Eclipse 中的那个框中）是：

```
http://ccw.cgrand.net/updatesite/ 
```

# groovy - Groovy == 运算符

> ID：13687154
> 
> 赞同：23
> 
> 时间：2012-12-03T16:06:34.937
> 
> 标签：groovy

直到现在，我的理解是这`==`是一个运算符重载`.equals()`。然而，我最近发现

```
new Integer(1) == new Long(1) // returns true 
```

然而

```
new Integer(1).equals(new Long(1)) // returns false 
```

所以我想`==`这不完全是 的简写`.equals()`，那么它是如何确定相等的呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-03T16:25:30.977

`==`在 Groovy 中大致相当于`equals()`. 但是，当比较具有相同值的不同类时，您会发现它与 Java 不同 - 如果类是`Comparable`. 如果可能，Groovy 也会进行类型转换。

如果您检查代码，看起来最终[`compareToWithEqualityCheck()`](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java#L557)是为`==`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-03T16:21:41.887

事实证明，`==`它没有委托给`equals()`，而是委托给`compareTo`。所以`==`如果`a.compareTo(b)`返回 0将返回 true

所以在这种特殊情况下

```
new Integer(1).compareTo(new Long(1)) == 0 
```

因此：

```
new Integer(1) == new Long(1) 
```

但这并不一定意味着

```
new Integer(1).equals(new Long(1)) 
```

这一切之所以如此奇怪和令人困惑，是因为[Comparable 的契约](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)并不要求它与 equals 一致，尽管强烈建议这样做。

> 强烈建议（尽管不是必需的）自然排序与 equals 一致。之所以如此，是因为没有显式比较器的排序集（和排序映射）在与自然顺序与等于不一致的元素（或键）一起使用时表现“奇怪”。

# jquery - AJAX 表单在 IE9 中只能使用一次

> ID：13687158
> 
> 赞同：0
> 
> 时间：2012-12-03T16:06:41.500
> 
> 标签：jquery, cross-browser, internet-explorer-9

我正在编写一个简单的脚本，通过 ajax 将注册表单提交到我的网站。它在现代浏览器中完美运行。在 IE9 中，表单只能正确提交一次。然后，如果我再次尝试提交相同的表单，则第二次表单永远不会返回并且加载器 gif 将永久保留。知道为什么会这样吗？

编辑：我应该指出我正在使用这个[jquery 表单插件](http://www.malsup.com/jquery/form/#faq)来提交表单。其次，当我在提交表单后检查源代码时，正确的标记就在那里。我可以手动添加不透明样式来显示表单，所以我认为这表明问题与 IE9 和 jquery 淡入淡出功能有关。

```
 <script type="text/javascript">

    jQuery.fn.outerHTML = function(s) {
    return (s)
      ? this.before(s).remove()
      : jQuery("<p>").append(this.eq(0).clone()).html();
    }

    jQuery(document).ready(function($){

        $("form input").removeAttr('tabindex');

        ajaxregister = function(e) {
            e.preventDefault();
            $(this).fadeTo(500, 0);
            $(this).siblings("#loading").fadeIn();
            $(this).ajaxSubmit({
                //url:'http://streetofwalls.dev/wp-login.php?action=register'
                success: function( data ) {
                    //console.log(data);

                    var $message = $(data).find('.message').outerHTML();
                    var $error = $(data).find('#login_error').outerHTML();
                    var $form = $(data).find('#registerform').outerHTML();
                    console.log( 'success' );

                    $(e.target).html( ( ($error) ? $error : $message ) + $form ).fadeTo(500,1);
                    $(e.target).siblings("#loading").fadeOut();

                }
            });
        }

        $(".widget_reg_widg #registerform").submit( ajaxregister );
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:33:01.827

在某些 IE 浏览器中，您必须重新定义事件变量：

```
ajaxregister = function(e) {
        e = e || window.event;
        e.preventDefault();
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:10:38.053

`cache:false`在您的 jquery 代码中使用。

**例子 ：**

```
$(this).ajaxSubmit({
    cache : false,
    //existing code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:16:31.130

我通过`e.target`用 jquery 选择器替换了它来工作。看成功的最后几行：function() {...

```
 success: function( data ) {

                    var $message = $(data).find('.message').outerHTML();
                    var $error = $(data).find('#login_error').outerHTML();
                    var $form = $(data).find('#registerform').outerHTML();

                    var target_id = $(e.target).attr("id");
                    $("#"+target_id).html( ( ($error) ? $error : $message ) + $form ).animate({opacity:1}, 500);
                    $("#"+target_id).css('display', 'block');

                    $("#"+target_id).siblings("#loading").css('display', 'none');

                } 
```

不知道为什么会这样。它一定与 IE9 引用事件的方式有关。

# wpf - 我使用资源字典添加了一个绿色小方块

> ID：13687160
> 
> 赞同：2
> 
> 时间：2012-12-03T16:06:44.660
> 
> 标签：wpf, dictionary, resources, runtime, tabitem

我添加了一个资源字典供我的 tabcontrol 使用。每个 tabitem 的右侧都有一个在资源字典中定义的小框。

我想根据每个 tabitem 中的复选框更改颜色。目前，如果我在所有 tabitems 后面的代码中执行此操作，则会改变颜色

LinearGradientBrush lgbrush = (LinearGradientBrush)(this.FindResource("TabItemSideBackground")); lgbrush.GradientStops[0].Color = Colors.AntiqueWhite; lgbrush.GradientStops[1].Color = Colors.Red; lgbrush.GradientStops[2].Color = Colors.OrangeRed;

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:18:28.960

我会选择触发器。在 TabItem DataTemplate 或样式中，您可以添加处理属性特定值的触发器，并执行属性设置。查看 MSDN 上的[DataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)类页面。

# 一个简短的例子

```
<Style TargetType="TabItem">
    <Style.Triggers>
      <DataTrigger Binding="{Binding ElementName=SomeObject, Path=SomeProperty}" Value="MakeItRed">
        <Setter Property="Foreground" Value="{DynamicResource MyRedBrush}" />
      </DataTrigger>    
    </Style.Triggers>
</Style> 
```

# tridion - 自定义事件代码以更新本地化组件

> ID：13687161
> 
> 赞同：7
> 
> 时间：2012-12-03T16:06:54.000
> 
> 标签：tridion, tridion-2011

我正在 SDL Tridion 2011 SP 1-1 中编写一些自定义事件代码，在初始化阶段修改组件的保存或本地化字段：

```
var localize = EventSystem.Subscribe<Component, LocalizeEventArgs>(OnComponentLocalize, EventPhases.Initiated);
var save = EventSystem.Subscribe<Component, SaveEventArgs>(OnComponentSave, EventPhases.Initiated);
_subscriptions.Add(localize);
_subscriptions.Add(save); 
```

save 事件可以正常工作，但相同的代码在 localize 事件上不起作用 - 对组件的 XML 所做的任何更改都将被丢弃。我正在使用非常简单的代码：

```
var fields = new ItemFields(component.Content, component.Schema);
var translatedSummary = fields["summary"] as MultiLineTextField;
translatedSummary.Value = translation;
component.Content = fields.ToXml(); 
```

我可以让更改持续本地化的唯一方法是，如果我在 Post / Commit 阶段执行它并执行签出 / 更新和保存 / 签入。这不是很好，因为它需要几秒钟来执行 &在组件本地化后在单独的事务中执行此操作。有谁知道更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T17:32:22.293

我认为本地化操作只会改变项目的蓝图状态，并在新出版物中为您提供项目的版本#1。我认为您不能在不创建新版本（即版本 2）的情况下对该项目进行任何修改。

这似乎是你发现的。我认为您唯一的选择（您已经发现）将是在本地化发生后修改并重新保存该项目。

# mysql - MySQL选择匹配字符串的最大长度

> ID：13687168
> 
> 赞同：2
> 
> 时间：2012-12-03T16:07:21.313
> 
> 标签：mysql, search, query-optimization

我需要返回所有文本结果（如果有的话），它们共享搜索字符串共有的最大长度左有界子字符串。

给定在包含的表列中搜索“StackOverflow”

```
"Stack",
"Sta", 
"StackOv", 
"StackOverthrow",
"StackOverSlow",
"StackFlow", 
"Soverflow",
"StackOverCrow",
"StackOverSlow",
etc. 
```

该查询将返回“StackOverthrow”，因为它包含最大数量的匹配字符，以及唯一结果集中的 StackOverSlow 和 StackOverCrow。目前我正在做一些低效的事情，即从 LIKE 搜索第一个字符开始，并继续重复和扩展搜索字符串，直到找不到任何内容，并保持最后一个好的结果。

IE

```
select names from table where name like 'XX%';

 "S" ->Results
 "St"->Results
 . .
 "StackOver"->Results 
 "StackOverf"-> No results (Last result returning items beginning with StackOver etc  as being the correct answer) 
```

我知道这种方法效率极低，任何人都可以提供单个查询来实现此结果吗？我知道我可以一次搜索所有组合并过滤代码中最长的结果，但是，我认为数据库应该在这方面做得更好。

Edit1：请注意，上面的示例有些简化。数据库中的绝大多数数据在 2 到 10 个字符之间，最常见的匹配长度约为 3 个字符。表中有超过 100K 条记录。

Edit2：抱歉，我需要澄清一下，可能有不止一个正确的结果，并且结果可能包含需要删除的重复项。目前，使用我低效的方法选择 distinct 很容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:25:59.230

使用 上的索引`name`，以下内容应该非常高效：

```
SELECT DISTINCT name
FROM   myTable
WHERE  name LIKE CASE
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'S%') THEN '%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'St%') THEN 'S%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'Sta%') THEN 'St%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'Stac%') THEN 'Sta%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'Stack%') THEN 'Stac%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackO%') THEN 'Stack%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOv%') THEN 'StackO%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOve%') THEN 'StackOv%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOver%') THEN 'StackOve%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOverf%') THEN 'StackOver%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOverfl%') THEN 'StackOverf%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOverflo%') THEN 'StackOverfl%'
  WHEN NOT EXISTS(SELECT * FROM myTable WHERE name LIKE 'StackOverflow%') THEN 'StackOverflo%'
  ELSE 'StackOverflow%'
END 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c19c8/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:51:52.000

您可以在创建[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)存储函数后进行查询。这可以为您获得最佳匹配的结果。

这不是我的代码。我从[这里](http://www.artfulsoftware.com/infotree/queries.php#552)得到这个。它似乎在 sqlfiddle 上测试得很好。

```
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) )
  RETURNS INT
  DETERMINISTIC
  BEGIN
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
    DECLARE s1_char CHAR;
    -- max strlen=255
    DECLARE cv0, cv1 VARBINARY(256);
    SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0;
    IF s1 = s2 THEN
      RETURN 0;
    ELSEIF s1_len = 0 THEN
      RETURN s2_len;
    ELSEIF s2_len = 0 THEN
      RETURN s1_len;
    ELSE
      WHILE j <= s2_len DO
        SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
      END WHILE;
      WHILE i <= s1_len DO
        SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
        WHILE j <= s2_len DO
          SET c = c + 1;
          IF s1_char = SUBSTRING(s2, j, 1) THEN 
            SET cost = 0; ELSE SET cost = 1;
          END IF;
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
          IF c > c_temp THEN SET c = c_temp; END IF;
            SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
            IF c > c_temp THEN 
              SET c = c_temp; 
            END IF;
            SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
        END WHILE;
        SET cv1 = cv0, i = i + 1;
      END WHILE;
    END IF;
    RETURN c;
  END; 
```

您的查询可能如下所示：

```
SELECT names, levenshtein(`names`, 'StackOverflow') as dist
FROM mytable
ORDER BY dist; 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/c948c/3)上的样子。

结果看起来像这样，最低距离是最接近的匹配：

```
NAMES           DIST
StackOverthrow  3
StackFlow       4
Soverflow       4
StackOv         6
Stack           8
Sta             10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:13:31.003

不知道为什么你会先看最小的。我会反过来做......首先尝试最长的精确匹配，如果没有找到，一次向后工作1个字符，直到找到一个。

# mysql - 更改大表上的 FOREIGN KEY 操作

> ID：13687175
> 
> 赞同：1
> 
> 时间：2012-12-03T16:07:46.070
> 
> 标签：mysql, innodb

我有一个大表（大到足以破坏我的查询），我需要从 更改`ON DELETE`为`RESTRICT`，`CASCASDE`问题是当我执行[这样](https://stackoverflow.com/questions/10548365/how-to-change-action-for-a-foreign-key)的查询时：

```
ALTER TABLE my_table DROP FOREIGN KEY my_key; 
```

我收到错误消息[`Mysql server has gone away`](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)。我知道我可以设置几个小时的超时时间，但这是正确的方法吗？

没有更好的解决方案吗？

# php - 当我应该得到一个字符串时取回一个对象

> ID：13687178
> 
> 赞同：0
> 
> 时间：2012-12-03T16:07:52.773
> 
> 标签：php, forms, element

所以我写了一个基本类，我已经扩展它来创建 html 元素。基于 Zend - 但不完全是。**不，这不是关于 zend 或与 zend 相关的问题**

```
class AisisCore_Form_Elements_Input extends AisisCore_Form_Element {

    protected $_html = '';

    public function init(){

        foreach($this->_options as $options){
            $this->_html .= '<input type="text" ';

            if(isset($options['id'])){
                $this->_html .= 'id="'.$options['id'].'" ';
            }

            if(isset($options['class'])){
                $this->_html .= 'class="'.$options['class'].'" ';
            }

            if(isset($options['attributes'])){
                foreach($options['attributes'] as $attrib){
                    $this->_html .= $attrib;
                }
            }

            $this->_html .= $this->_disabled;
            $this->_html .= ' />';

            return  $this->_html;
        }
    }
} 
```

所以这个类扩展了我的元素类，它由一个接受一组选项的构造函数组成，一个基本元素的设置如下：

```
$array_attrib = array(
    'attributes' => array(
        'placeholder' => 'Test'
    )
);

$element = new AisisCore_Form_Elements_Input($array_attrib);
echo $element; 
```

所以有什么问题？

回显 $element 对象给我一个错误，说它不能将对象转换为字符串，因此当我 var_dump 它时，我得到了这个：

```
object(AisisCore_Form_Elements_Input)#21 (3) {
  ["_html":protected]=>
  string(22) "<input type="text"  />"
  ["_options":protected]=>
  array(1) {
    ["attributes"]=>
    array(1) {
      ["placeholder"]=>
      string(4) "Test"
    }
  }
  ["_disabled":protected]=>
  NULL
} 
```

有人可以解释发生了什么吗？最后我检查我正在回显一个字符串而不是一个对象。我是如何设法创建一个对象的？

如果您需要查看 AisisCore_Form_Element 类，我将发布它，但所有此类都是您扩展以创建元素的基类。唯一需要的是一系列选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:42:11.613

您正在尝试回显一个实例，而不是一个字符串。您甚至 var_dumped 并清楚地看到这是一个对象.. 不是字符串。

如果您希望能够将实例用作字符串，则必须在类中实现 __toString 方法。

请注意，方法 __toString 必须返回一个字符串。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:51:15.203

看起来您的构造函数试图返回一个值（也在 for 循环的中间），而您可能想要这样的东西......

```
class AisisCore_Form_Elements_Input extends AisisCore_Form_Element {

    protected $_html = '';

    public function init(){

        foreach($this->_options as $options){
            $this->_html .= '<input type="text" ';

            if(isset($options['id'])){
                $this->_html .= 'id="'.$options['id'].'" ';
            }

            if(isset($options['class'])){
                $this->_html .= 'class="'.$options['class'].'" ';
            }

            if(isset($options['attributes'])){
                foreach($options['attributes'] as $attrib){
                    $this->_html .= $attrib;
                }
            }

            $this->_html .= $this->_disabled;
            $this->_html .= ' />';

            // Constructors Don't Return Values - this is wrong
            //return  $this->_html;
        }
    }

    // provide a getter for the HTML
    public function getHtml()
    {
         return $this->_html;
    }
} 
```

现在您的示例可以更新为如下所示...

```
$element = new AisisCore_Form_Elements_Input($array_attrib);
echo $element->getHtml(); 
```

# c++ - C++，一种检查 3 个数组的更简单方法

> ID：13687181
> 
> 赞同：2
> 
> 时间：2012-12-03T16:07:56.447
> 
> 标签：c++, arrays, if-statement, max

我有3个数组，

> int fJump[13]，sJump[13]，tJump[13]；

他们每个人都记录了跳跃。我需要检查其中一个是否大于`max`，以获得最大的价值。

所以我可以这样：

```
for(int i=0;i<n;i++){
        if(max<fJump[i]){
            max = fJump[i];
        }
        if(max<sJump[i]){
            max = sJump[i];
        }
        if(max<tJump[i]){
            max = tJump[i];
        }
    } 
```

但有时还有很多，所以这样写很头疼。会有更好更快的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T16:12:02.790

您可以使用[`max_element`](http://en.cppreference.com/w/cpp/algorithm/max_element)标准库中的函数，而不是编写自己的循环：

```
int max = *std::max_element(fJump, fJump+13);
max = std::max(max, *std::max_element(sJump, sJump+13));
max = std::max(max, *std::max_element(tJump, tJump+13)); 
```

您还可以`max`在循环中使用该函数：

```
for(int i=0;i<n;i++){
    max = std::max(max, fJump[i]);
    max = std::max(max, sJump[i]);
    max = std::max(max, tJump[i]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T16:12:34.107

```
int * arrs[]={fJump, sJump, tJump};
int max=arrs[0][0];
for(int j=0; j<sizeof(arrs)/sizeof(*arrs); j++)
{
    for(int i=0; i<n; i++)
    {
        if(max<arrs[j][i])
            max=arrs[j][i];
    }
} 
```

并且您可以根据`int`需要放入任意数量的指针`arrs`（只要它们都来自相同大小的数组 - 即`n`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:13:50.800

```
int fJump[13], sJump[13], tJump[13];
int * pA[] = { fJump, sJump, tJump };

int l = sizeof(pA)/sizeof(pA[0]);

for(int i = 0; i < 13; ++i)
{
    for (int j = 0; j < l; ++j)
    {
        if(max < pA[j][i])
        {
            max = pA[j][i];
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:17:07.607

您可以使用[max_element](http://en.cppreference.com/w/cpp/algorithm/max_element)：

```
#include <algorithm>
#include <iostream>

int main()
{
  int a1[] = { 7,3,1,29,5 };
  int a2[] = { 11,12,18,5,4,3 };
  int a3[] = { 10,10,11,10 };

  std::vector< int > allMax{
    *std::max_element( a1, a1+5 ),
    *std::max_element( a2, a2+6 ),
    *std::max_element( a3, a3+4 ),
    };

  auto maxOfAll = *std::max_element( allMax.begin(), allMax.end() );

  std::cout << maxOfAll << std::endl;
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-03T16:14:10.350

您可以使用 int 类型的数组来处理它。

# xcode4.3 - “_OBJC_CLASS_$_IconDownloader”，引用自：& clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：13687187
> 
> 赞同：0
> 
> 时间：2012-12-03T16:08:17.063
> 
> 标签：xcode4.3, iphone-5, ipad-3

运行时程序显示以下错误：-

“_OBJC_CLASS_$_IconDownloader”，引用自：

&

clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

任何人解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:23:26.373

如果`ParseOperation`和`IconDownloader`在源文件中定义，请将这些文件添加到目标的编译阶段。如果它们是在库中定义的，请将其添加到链接阶段。

# c# - 如何使用 SharpSvn 提交具有活动句柄的文件？

> ID：13687191
> 
> 赞同：1
> 
> 时间：2012-12-03T16:08:28.587
> 
> 标签：c#, sharpsvn

我的 C# 应用程序使用 SharpSVN 来同步本地（工作副本）和远程（存储库）文件。由于我想在其他应用程序处理这些文件时同步它们，因此修改后的文件可能在提交时具有活动句柄。当我尝试提交这些文件时，我收到以下错误：

> SvnSystemException：“无法打开文件'somefile.ext'：文件被另一个进程使用”
> 
> Windows 错误代码：ERROR_SHARING_VIOLATION

但是，当我使用 TortoiseSVN 手动提交它们时，它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:04:16.313

同时我发现[了这个线程](http://sharpsvn.open.collab.net/ds/viewMessage.do?dsForumId=728&dsMessageId=330731)。似乎 SharpSvn 不允许即将提交的文件处于可写状态。

所以，我最初的问题的正确答案是：**“只要文件是可写的，这是不可能的”**。无论如何，在我的情况下，提交打开的文件（AutoCAD 图纸）的解决方法是将它们设置为系统级别的只读。

# c# - 在 C# 运行时运行 JSHint

> ID：13687195
> 
> 赞同：2
> 
> 时间：2012-12-03T16:08:37.773
> 
> 标签：c#, javascript, .net, jshint

我有一个使用 JavaScript .NET 作为内部脚本语言的 .net c# 程序。

我想做的是能够从 c# 运行时中验证 JavaScript，并让程序返回 JSHint 发现的任何错误。这可能吗？

# javascript - 包含文件上的 jquery .html

> ID：13687198
> 
> 赞同：1
> 
> 时间：2012-12-03T16:08:50.470
> 
> 标签：javascript, jquery, include

我已经查看了这个答案[jquery append external html file into my page](https://stackoverflow.com/questions/8277462/jquery-append-external-html-file-into-my-page)

并且想知道它是否适用于我的情况。

我有一个包含另一个页面的页面，我可以使用 jquery .html() 在包含的页面上注入 html 吗？

```
<html><body>some text <includedpage.html></body></html> 
```

如果includedpage.html 包含一个div`<div class="demo-container">`我可以这样注入吗：？`$('div.demo-container') .html('<p>All new content. <em>You bet!</em></p>');`

这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:14:25.747

是的，它应该可以工作，假设当您在包含文件后检查 DOM 时，

```
<html><body>some text <includedpage.html></body></html> 
```

已经成为

```
<html><body>some text<div class="demo-container"></div></body></html> 
```

jQuery 对页面的当前 DOM 结构进行操作，包括 jQuery 对其所做的其他更改（例如插入和删除元素，即使用`.html()`方法），而不是从服务器加载的页面。

# android - 可以是 Handler 静态的，也可以不是

> ID：13687201
> 
> 赞同：0
> 
> 时间：2012-12-03T16:09:08.897
> 
> 标签：android

我需要`Handler`一个以上的活动。

我可以让它像静态一样吗

```
public static Handler handler = new Handler(); 
```

或者我如何在不止一项活动中使用它？如果这个处理程序不能是静态的，我可以拥有多个处理程序吗？

我在读 Handler 必须是静态的，否则我会在另一个线程中得到一个异常，这不是一个好主意。

哪种方式是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:37:56.517

```
I need Handler in more then one Activity 
```

那你为什么不为每个活动创建一个处理程序？

> 或者我如何在不止一项活动中使用它？

只需为每个活动创建它，它们都应该绑定到同一个 Looper 对象

来自文档：

```
When you create a new Handler, it is bound to the thread / message queue of the thread that is `creating it` 
```

> 如果这个处理程序不能是静态的，我可以拥有多个处理程序吗？

当然

> 我在读 Handler 必须是静态的，否则我会在另一个线程中得到一个异常，这不是一个好主意。

我发现的唯一问题是这个 [Handler 类应该是静态的，否则可能会发生泄漏：IncomingHandler](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler) 但正如它所提到的，只有当你发布一个长时间延迟的消息时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:17:22.290

Handler 只对已经初始化为 Looper 线程的线程有效。

UI 线程是 Looper 线程，大多数 android 组件都在 UI 线程上运行，例如活动、服务、内容提供程序、自定义应用程序类等等，包括您在 UI 线程上实例化的任何类。

您可以使用以下方法代替创建处理程序：

[http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) )

但是如果你想使用消息，你必须使用处理程序。

当 lint 错误出现警告您将处理程序设置为静态时，这意味着使用静态嵌套类代替，这样您就不会获得对外部类及其所有成员的隐式引用，这在某些情况下可能会引入问题。您可以像这样声明您的处理程序以避免该警告：

```
static  MyHandler extends Handler { 
    // TODO: implement message handling, etc here
}

private mHandler = new MyHandler(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:14:26.250

如果您的`Handler`实现是线程安全的，或者您的程序在单线程环境中运行，那么您可以拥有一个处理程序实例，该实例将一个接一个地处理多个事件/活动，因此将其声明为静态。

如果它不是线程安全的，那么如果您在多线程环境中为多个活动/事件使用相同的处理程序实例，您将看到意想不到的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:15:28.600

处理程序始终是静态的。您必须在 Activity 的 onCreate 中创建处理程序。据我所知，您必须为单独的活动创建单独的处理程序。

# quickblox - QuickBlox 用户模块的 Facebook 登录的重定向 uri 无效

> ID：13687206
> 
> 赞同：4
> 
> 时间：2012-12-03T16:09:31.290
> 
> 标签：quickblox

我是 QuickBlox 的新手。我刚刚从[SimpleSample-chat users-ios](http://quickblox.com/developers/SimpleSample-chat_users-ios)下载了示例代码，并将它与我在 QuickBlox 上的应用程序连接起来。

它适用于注册和正常登录。

但是，如果我使用 facebook 登录，则会发生错误。错误代码 191：

> 无效的 redirect_uri：应用程序配置不允许给定 URL。

于 2012-12-05 编辑：阅读手册后，我将我的 facebook 应用程序设置更改如下： ![Facebook 应用程序设置](../Images/a81c4e38dc4671e683e745bd2d736705.png) 并且我在 QuickBlox 上填写了应用程序 ID 和密钥，如下所示： ![QuickBlox 社交整合设置](../Images/3ac8925c1ac9f11efc8038a90c47c656.png)

但是，我仍然收到无效的 url 错误。

注意：我没有对示例进行任何更改，但是这几行包含我的 QuickBlox 应用程序的信息：

```
[QBSettings setApplicationID:xxx];
[QBSettings setAuthorizationKey:@"yyyyyyyy"];
[QBSettings setAuthorizationSecret:@"zzzzzzzzz"]; 
```

我错过了使该示例工作的任何步骤吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:00:57.703

**UPD：** 这是一个旧指南，您不再需要通过管理面板配置社交集成。使用 API 通过 Facebook/Twitter 登录用户。

====================

为了使用 QuickBlox 社交 API (Twitter/Facebook)，您必须：

1.  创建 Facebook/Twitter 应用程序
2.  在注册应用程序时提供回调 URL：
    *   Facebook 的[http://api.quickblox.com/auth/facebook/callback](http://api.quickblox.com/auth/facebook/callback)
    *   [http://api.quickblox.com/auth/twitter/callback](http://api.quickblox.com/auth/twitter/callback)用于 Twitter
3.  在您的 QuickBlox 应用程序上启用社交集成（在[管理面板](http://admin.quickblox.com)上） - 输入您要启用的平台的身份验证凭据

您也可以遵循[QuickBlox 社交网络集成手册](http://quickblox.com/developers/Social_Networks_Integration_Manual)

# javascript - D3 按名称而不是值对分层条进行排序

> ID：13687211
> 
> 赞同：2
> 
> 时间：2012-12-03T16:09:52.017
> 
> 标签：javascript, charts, d3.js

我正在构建一个基于 D3 分层栏示例的演示工具： [https ://github.com/devsar/d3talk/blob/master/hierarchical-bar.html](https://github.com/devsar/d3talk/blob/master/hierarchical-bar.html)

添加选项以按名称而不是值对层次结构进行排序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:35:33.070

默认情况下，分区布局按其关联的数值排序，但您可以通过调用`sort`which expect 具有两个参数的函数来设置自己的比较器来相互比较。

要按名称对条形图进行排序，只需更改这些行

[https://github.com/devsar/d3talk/blob/master/hierarchical-bar.html#L48-L49](https://github.com/devsar/d3talk/blob/master/hierarchical-bar.html#L48-L49)

对此

```
var hierarchy = d3.layout.partition()
  .value(function(d) { return d.size; })
  .sort(function(a, b){
      return a.name.toLowerCase() > b.name.toLowerCase();
  }); 
```

如果要反转排序顺序，只需返回相反的

```
 return a.name.toLowerCase() < b.name.toLowerCase(); 
```

* * *

编辑：

似乎在展开**查询**栏时，某些名称的排序不正确。更改比较器的返回值在我的端修复它（Chrome）

```
return a.name.toUpperCase().localeCompare(b.name.toUpperCase()); 
```

# bmp - 如何使用 GraphicsMagick 在内存流中创建位图的 BMP 标头？

> ID：13687212
> 
> 赞同：1
> 
> 时间：2012-12-03T16:09:57.320
> 
> 标签：bmp, graphicsmagick

我在内存中有一个数组，其中包含一个位图图像，具有已知的大小、深度、调色板等。我想使用这个数组来创建图像的 GraphicsMagick 表示，使我能够用它的 BMP 标头编写这个文件，并可以用其他软件查看它。

到目前为止，我有这样的东西（只是重要的几行——如果需要，我可以添加整个程序）。首先，变量：

```
FILE *fp_out;
ExceptionInfo exception;
Image *image;
ImageInfo *image_info;
char buffer[BUFFER_SIZE] = {0};
const int w = WIDTH, h = HEIGHT; 
```

以及相关代码：

```
image = ConstituteImage(w, h, "RGB", CharPixel, buffer, &exception);
image_info = CloneImageInfo((ImageInfo *) NULL);
fp_out = fopen("image.bmp", "wb");
image_info->file = fp_out;
WriteImage(image_info, image); 
```

image.bmp文件被创建，但 BMP 标头不存在，**并且**该位图的第一个字节包含如下内容：

```
id=ImageMagick  version=1.0
class=DirectClass  matte=False
columns=74  rows=75  depth=8
<binary data of my image> 
```

我究竟做错了什么？我应该关注哪些文档？这是相当压倒性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:36:49.637

使用的输出格式是默认的 MIFF 格式。为了解决这个问题，您可以这样做

```
image = ConstituteImage(w, h, "RGB", CharPixel, buffer, &exception);
image_info = CloneImageInfo((ImageInfo *) NULL);
fp_out = fopen("image.bmp", "wb");
image_info->file = fp_out;
strcpy(image_info->magick,"BMP");
WriteImage(image_info, image); 
```

或做（更正常的方式）

```
image = ConstituteImage(w, h, "RGB", CharPixel, buffer, &exception);
image_info = CloneImageInfo((ImageInfo *) NULL);
strcpy(image->filename,"image.bmp");
WriteImage(image_info, image); 
```

# java - 在 JLayer 上方添加固定大小的 JPanel

> ID：13687216
> 
> 赞同：2
> 
> 时间：2012-12-03T16:10:10.010
> 
> 标签：java, swing, user-interface, jpanel, jlayer

按照[Oracle 的 Myopia 指南](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)，我有一个简单`JPanel`的添加到 a`JFrame`作为`JLayer`. 很简单，这模糊了`JPanel`'s 的组件。但是，我试图在`JPanel`此之上添加一秒`JPanel`（这意味着它不会变得模糊）。

`JPanel`与主要方法一起简单：

```
public class ContentPanel extends JPanel {

    public ContentPanel() {
        setLayout(new BorderLayout());
        add(new JLabel("Hello world, this is blurry!"), BorderLayout.NORTH);
        add(new JLabel("Hello world, this is blurry!"), BorderLayout.CENTER);
        add(new JButton("Blurry button"), BorderLayout.SOUTH);
    }

    public static void main(String[] args) {

        JFrame f = new JFrame("Foo");
        f.setSize(300, 200);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLocationRelativeTo(null);

        LayerUI<JComponent> layerUI = new BlurLayerUI();
        JPanel panel = new ContentPanel();
        JLayer<JComponent> jlayer = new JLayer<JComponent>(panel, layerUI);

        f.add(jlayer);
        f.setVisible(true);
    }

} 
```

`BlurLayerUI`这模糊了它的“孩子”：

```
class BlurLayerUI extends LayerUI<JComponent> {
    private BufferedImage mOffscreenImage;
    private BufferedImageOp mOperation;

    public BlurLayerUI() {
        float ninth = 1.0f / 9.0f;
        float[] blurKernel = { ninth, ninth, ninth, ninth, ninth, ninth, ninth,
                ninth, ninth };
        mOperation = new ConvolveOp(new Kernel(3, 3, blurKernel),
                ConvolveOp.EDGE_NO_OP, null);

    }

    @Override
    public void paint(Graphics g, JComponent c) {
        int w = c.getWidth();
        int h = c.getHeight();

        if (w == 0 || h == 0) {
            return;
        }

        // Only create the offscreen image if the one we have
        // is the wrong size.
        if (mOffscreenImage == null || mOffscreenImage.getWidth() != w
                || mOffscreenImage.getHeight() != h) {
            mOffscreenImage = new BufferedImage(w, h,
                    BufferedImage.TYPE_INT_RGB);
        }

        Graphics2D ig2 = mOffscreenImage.createGraphics();
        ig2.setClip(g.getClip());
        super.paint(ig2, c);
        ig2.dispose();

        Graphics2D g2 = (Graphics2D) g;
        g2.drawImage(mOffscreenImage, mOperation, 0, 0);
    }
} 
```

这将产生以下内容：

![在此处输入图像描述](../Images/f1a1e7e4bd62913bfeb663c6b493522f.png)

我试图简单地将第二个添加`JPanel`到第一个`JFrame` **之后**，这只会导致第二个面板占用所有空间。使用各种布局管理器和`set-Maximum/Preferred-size()`方法不会有任何好处。也不会使第二个面板背景透明。

**如何在 a 上方添加`JPanel`固定大小的 a`JLayer`**，从而允许第一个面板的一部分出现（仍然模糊）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:10:29.273

根据您想要在加载图像时模糊数据的评论，我会推荐一个对话框。您可以将未模糊的面板放在对话框上，使用 关闭它的框架和标题栏`setUndecorated(true)`，并将其默认关闭行为设置为`DO_NOTHING_ON_CLOSE`以防止用户在加载应用程序之前关闭对话框。这将位于模糊面板的顶部，但由于它不是 BlurLayerUI 的一部分，因此不会被模糊。

# objective-c - 将部分透明的 UIView 推送到 UINavigationController 中，因此以前推送的 UIView 也是可见的。

> ID：13687217
> 
> 赞同：1
> 
> 时间：2012-12-03T16:10:24.770
> 
> 标签：objective-c, ios, uinavigationcontroller

我有一个 UIView，其中包含一个搜索栏，它占据 iPhone 屏幕的顶部 1/5（纵向布局）。我想在搜索栏下方添加一个结果 UIView，而不隐藏搜索栏。这些可以使用 UINavigationController 管理吗？我一直在做一些实验，据我了解，推送的 UIView 总是会隐藏之前推送的那些。我会很高兴发现我错了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:19:48.183

没错，当您使用 UINavigationController 推送视图控制器时，之前的视图控制器将始终被隐藏。即使您将具有透明视图的视图控制器作为模态视图控制器呈现，父视图控制器也将不可见。但我不认为你真的需要这个。搜索栏和显示结果视图应在一个视图控制器中处理。我建议您只需将您的“结果视图”添加为非常乞讨的子视图，但在您需要它之前将其隐藏起来。

# javascript - 在命名空间javascript中创建一个新对象

> ID：13687223
> 
> 赞同：3
> 
> 时间：2012-12-03T16:10:37.457
> 
> 标签：javascript, object, instance

我正在尝试在命名空间中创建一个函数，该函数将为我提供一个新的对象实例。

尝试执行以下操作时出现语法错误：

```
var namespace = {
    a : function(param){
        this.something = param;
    },
    a.prototype.hi = function(){
        alert('hi');
    },

    b : function(){
        var t = new a('something');
    }
}; 
```

这样做的正确语法是什么？不能在`namespace`对象内做吗？我不想先声明命名空间。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:17:52.853

> 我不想先声明命名空间。

你可以做这样奇怪的事情：

```
var namespace = {
    init: function() { 
        a.prototype.whatever = function(){};
    },
    a: function(x) {
        this.x = x;
    }  
}
namespace.init();
var myA = new namespace.a("x"); 
```

但是，如果您想封装所有内容，为什么不尝试模块模式呢？它更清洁：

```
var namespace = (function() {
     function a() {};
     function b(name) {
          this.name = name;
     };
     b.prototype.hi = function() {
          console.log("my name is " + this.name);
     }
     return {
          a: a,
          b: b
     }
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:13:30.817

javascript 命名空间是一个对象，因此您只能使用一对`key: value`但不能使用代码（就像您使用 : 一样`a.prototype.hi = function() {...}`）。

因此，您应该将其分为两部分：声明，然后是代码：

```
var namespace = {
    a : function(param){
        this.something = param;
    },
    b : function(){
        var t = new a('something');
    }
};

namespace.a.prototype.hi : function() { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:19:55.587

我不完全知道你想要什么，但这有效：

```
var namespace = {

    a: function() {

        function a() {

        }

        a.prototype.hi = function() {
            console.log("hi");
        }

        return new a;

    }

}

var obj = new namespace.a();
obj.hi()

// -> 'hi' 
```

# cuda - 在 CUDA 内核中使用 assert() 来延迟执行

> ID：13687226
> 
> 赞同：2
> 
> 时间：2012-12-03T16:10:57.927
> 
> 标签：cuda, sleep, assert

我想停止 Gpu 内核一段时间，但我发现的唯一功能是`assert()`.

我想使用计时器或事件来控制 gpu 将要停止的时间量，但我不知道如何！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:44:42.537

您可以使用`clock()`or`clock64()`来生成繁忙的周期，请在此处查看答案：[CUDA 内核中的 usleep() 等效项？](https://stackoverflow.com/questions/11217117/equivalent-of-usleep-in-cuda-kernel)

# java - Shared Preferences 修改mapView的视图

> ID：13687229
> 
> 赞同：1
> 
> 时间：2012-12-03T16:11:12.360
> 
> 标签：java, android, android-layout, settings

我需要比我更有经验的人的帮助，我不久前就开始研究如何为 Android 编写应用程序，但无论如何，我解释了这个问题。

在我的应用程序中，我想使用 3 checkboxPreference 更改模式以查看地图（sat、traffic、streetView）。我创建了一个只有一个选项的选项菜单，这个选项用 3 复选框打开布局。

```
 <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<CheckBoxPreference android:key="Sat"
android:title="Satellitare" android:summary="Mappa con vista satellitare"
        android:defaultValue="false" />
    <CheckBoxPreference android:key="Traff"
android:title="Traffico" android:summary="Mappa con vista traffico"
        android:defaultValue="false" />
    <CheckBoxPreference android:key="StrView"
android:title="StreetView" android:summary="Mappa con vista Street View" 
       android:defaultValue="false" />
</PreferenceScreen> 
```

布局类文件 Impostazioni.java。

```
package com.drive.info;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Impostazioni extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.menu_navi);
    }

} 
```

在另一个文件 Navi.java 中，我拥有运行地图所需的所有代码。所有功能：带有基本视图的地图（无坐或其他设置）、选项菜单和布局工作。

**如何使用复选框更改地图设置？**

*感谢任何会帮助我的人！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:26:56.517

获取`SharedPreferences`包含您的偏好活动数据的对象：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

现在获取所需的值：

```
boolean sat = prefs.getBoolean("Sat", false);
boolean traff = prefs.getBoolean("Traff", false);
boolean streetView = prefs.getBoolean("StrView", false); 
```

并将它们设置在您的`MapView`：

```
mapView.setSatellite(sat);
mapView.setTraffic(traff);
mapView.setStreetView(streetView); 
```

顺便说一句，`setStreetView`已弃用：

> 已弃用。不再支持街景可用性突出显示。此方法作为无操作操作。

所以我不使用它会导致地图发生任何变化。

# javascript - 相机幻灯片 v1.3.3 - 调整图片大小

> ID：13687230
> 
> 赞同：1
> 
> 时间：2012-12-03T16:11:36.990
> 
> 标签：javascript, jquery, css, slideshow, javascript-framework

我想创建一定大小的公司标签幻灯片。我使用脚本`camera.js`创建幻灯片，我需要更改图像大小：

```
<link 
    rel='stylesheet' 
    id='camera-css'  
    href='/html/themes/classic/css/camera.css' 
    type='text/css' media='all'> 

<style>
    .fluid_container {
        margin: 0 auto;
        max-width: 1000px;
        width: 100%;
    }
</style>

<script>
    jQuery(function(){
        jQuery('#camera_wrap_3').camera({
            height: '50%',
            pagination: true,
            thumbnails: false,
            imagePath: '/html/themes/classic/images/'
        });
    });
</script>

<div class="fluid_container">
    <div 
        class="camera_wrap camera_emboss" 
        id="camera_wrap_3">
        <div 
            data-thumb="/thumbs/1.jpg" 
            data-src="/slides/1.jpg" 
            data-time="1500" 
            data-trasPeriod="4000" 
            data-link="some link here" 
            data-target="_blank">
                <div 
                    class="camera_caption fadeFromBottom">
                some text here
                </div>
        </div>
        <div 
            data-thumb="/thumbs/2.jpg" 
            data-src="/slides/2.jpg" 
            data-time="1500" 
            data-trasPeriod="4000" 
            data-link="some link here" 
            data-target="_blank">
                <div 
                    class="camera_caption fadeFromBottom">
                some text here
                </div>
        </div>
    </div>
</div>

<div style="clear:both; display:block; height:100px"></div> 
```

这是一些屏幕截图。

对于`max-width == 400px`：

![在此处输入图像描述](../Images/35ab0f790a5d6c885e05bf448e934928.png)

对于`max-width == 100px`：

![在此处输入图像描述](../Images/97aa7932ba08eec5f6a3dfc7121aeb62.png)

如何更改尺寸？我需要一个较小的容器，幻灯片应该是`310x82`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:58:57.597

你可以像这样调整高度

```
 jQuery(function(){

            jQuery('#camera_wrap_3').camera({
                **height: '82px',**
                pagination: true,
                thumbnails: false,
                imagePath: '/html/themes/classic/images/'
            });

        }); 
```

但是，我无法影响宽度的任何变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T15:04:43.530

```
jQuery(function () {
            jQuery('#camera_wrap_1').camera({
                alignment: 'center',
                maxHeight: $('.slider').outerHeight()+"px",
                thumbnails: true
            });
        }); 
```

您可以使用 outerHeight 函数进行计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T13:38:13.143

在我的客户购买的主题附带的相机版本中，除了将高度传递给初始化程序之外，还有另一个调整我必须覆盖这种样式，因为它的最小高度为 500px，这使得它不可能成为我需要的高度。

```
.camera_fakehover {
    min-height:50px;
} 
```

# c# - WPF 全屏问题 this.Width 和 this.Height

> ID：13687232
> 
> 赞同：1
> 
> 时间：2012-12-03T16:11:42.950
> 
> 标签：c#, wpf, window, size, fullscreen

我正在使用 WPF 编写一个程序来使用整个屏幕。对于全屏效果，我写为

```
WindowStyle="None" WindowState="Maximized" 
```

一切似乎都很好，但是当我在代码中的某处使用*this.Width*和*this.Height*时，有时它是窗口最大化之前的值。该代码在一些鼠标事件处理程序中运行，因此窗口应该已经最大化。

我有时会说，因为在 .NET Framework 4.5 上发生这种情况的可能性约为 20%。但是当我将项目属性更改为 .NET Framework 3.0 或 3.5 时，它发生的概率为 100%。

我认为这应该是 .NET Framework 的一个错误，但无论如何我需要让事情变得更好。是否因为我没有正确最大化窗口而发生？还是有更好的方法将窗口最大化到全屏？

PS。这个我也试过

```
WindowStyle = WindowStyle.None;   
WindowState = WindowState.Maximized; 
```

但它仍然是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:17:03.410

试试`ActualWidth`和`ActualHeight`属性。

# twitter-bootstrap - bootstrap-responsive.css 在哪里？

> ID：13687233
> 
> 赞同：58
> 
> 时间：2012-12-03T16:11:48.033
> 
> 标签：twitter-bootstrap

我知道默认情况下引导程序不附带文件，但是在我自定义后（我已经选择了所有响应功能！）我仍然看不到文件。在文档中，它说我应该在 head 标签上执行此操作：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

但事实是我什至没有文件夹资产。我所拥有的是：

```
\bootstrap
    \img
    \css
    \js 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-09-14T09:46:33.933

自 Bootstrap 3 以来，您不再需要 responsive.css。因为它在默认的 bootstrap.css 中。

相关：[https ://stackoverflow.com/a/16379181/429938](https://stackoverflow.com/a/16379181/429938)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-04T04:34:53.107

下载[http://twitter.github.com/bootstrap/assets/bootstrap.zip](http://twitter.github.com/bootstrap/assets/bootstrap.zip) 并解压。

```
\bootstrap\css\bootstrap-responsive.css

\bootstrap\css\bootstrap-responsive.min.css 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-12T09:41:19.530

看这里 [http://twitter.github.io/bootstrap/scaffolding.html#responsive](http://twitter.github.io/bootstrap/scaffolding.html#responsive)

> 默认情况下，Bootstrap 不包含响应式功能，因为并非所有内容都需要响应式。我们认为最好根据需要启用它，而不是鼓励开发人员删除此功能。

所以如果你需要 bootstrap-responsive.css，你应该从 bootstrap-source 下载它，例如：http: [//twitter.github.io/bootstrap/index.html](http://twitter.github.io/bootstrap/index.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-27T02:19:39.280

或者你可以直接使用如下：

```
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-26T21:54:35.790

他们将其移至不同的目录。试试这个：

```
<link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-04T04:51:00.710

```
https://ci.apache.org/projects/openejb/examples-generated/moviefun/src/main/webapp/assets/css/bootstrap-responsive.min.css.html 
```

1.  `bootstrap-reponsive.css`在你的 CSS 文件夹上创建一个文件名
2.  将所有这些复制到该文件中。
3.  在您的 HTML 代码中提供指向该文件的链接

# e-commerce - 使用 Joomla 2.5 和 Virtuemart 2.0 创建产品包

> ID：13687237
> 
> 赞同：0
> 
> 时间：2012-12-03T16:11:52.297
> 
> 标签：e-commerce, joomla2.5, virtuemart

我正在寻找一种使用 Joomla 2.5 和 Virtuemart 2.0 创建产品包的方法。

所谓产品包，是指由多个产品组成的产品。例如，我会：

*   产品A
*   产品B
*   产品C
*   Pack 1 (A + B, 有折扣)
*   包装 2（A + B + C，有折扣）

然后，购买一包会将所有子产品添加到购物车，或减少每个子产品的数量。

目前，我还没有设法做到这一点，但有人告诉我这是可能的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:57:36.527

您可能会发现扩展“产品生成器”对于您想要对捆绑产品执行的操作很有用。[http://breakdesigns.net/virtuemart-product-builder](http://breakdesigns.net/virtuemart-product-builder)

此外，如果您对其他购物车持开放态度，您会发现您可以在 HikaShop 中进行一些非常好的产品即选项配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T07:52:57.280

还要检查“产品包”

> 提示您的用户以折扣价购买一组产品，而不是单个产品

[http://breakdesigns.net/extensions/product-bundles](http://breakdesigns.net/extensions/product-bundles)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T18:09:44.573

它不仅仅是可以在这里提交的一些代码行。这是一项新功能，需要 2 个不同的插件才能做到这一点。也可能这个问题很老，但它是最新的，对许多用户来说仍然很有趣

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T21:04:52.147

Catproduct 是另一种选择：[http ://sm-planet.net/index.php?option=com_content&view=article&id=2:catproduct&catid=8&Itemid=110](http://sm-planet.net/index.php?option=com_content&view=article&id=2:catproduct&catid=8&Itemid=110)

# c# - NHibernate proxy property access binding

> ID：13687238
> 
> 赞同：0
> 
> 时间：2012-12-03T16:12:02.200
> 
> 标签：c#, nhibernate

Is it possible to bind to a "get value" event for every property of a class of the domain model using nhibernate interceptors?
What i would like to do is:
- Have my domain model classes and mappings (nothing new here)
- Using a business layer to handle user requests. This layer should use transactions so a request would behave like this: requst -> open session and transaction -> fulfill request -> commit transaction and close session -> send results back (if any)
- User interacts with data through some kind of GUI. When he asks for some lazy loading data no LazyLoadException (or whatever its name is) is fired because an interceptor is registered and is capable of intercepting the read of a lazy load property. So it opens a nhibernate session and closes it when the read has been performed.

I hope you understand what i mean.
If you desperately need some code samples to clarify i'll try to provide even if i really don't know how to give a programmatic idea.
Any help would be very much appreciated, thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:46:37.023

我们的 Windows 窗体应用程序使用运行良好的每个窗体模式的会话。在几乎所有情况下，我们一次只能保持一个会话打开。

在您的情况下，我将调查使用`ISession.Lock`将断开连接的对象重新附加到会话以允许延迟加载工作。

# c# - Map collection of objects

> ID：13687240
> 
> 赞同：42
> 
> 时间：2012-12-03T16:12:05.383
> 
> 标签：c#, entity-framework, automapper

I am trying to introduce Automapper into an application for the first time, but I keep getting an error saying I have some invalid arguments.

My model:

```
namespace StoreGradesLib.Models
{
    public class Store
    {
        [Key]
        public int StoreID { get; set; }

        [Required]
        [MaxLength(120)]
        public string StoreName { get; set; }

        [Required]
        [MaxLength(20)]
        public string StoreNumber { get; set; }

        [Required]
        [MaxLength(120)]
        public string ManagerName { get; set; }

        [Required]
        public long PhoneNumber { get; set; }

        [Required]
        public string AddressLine1 { get; set; }

        public string AddressLine2 { get; set; }

        [Required]
        public string Postcode { get; set; }

        [Required]
        public int WallArea { get; set; }

        [Required]
        public int FloorArea { get; set; }

        [Required]
        public int NumWindows { get; set; }

        [Required]
        public int NumDesks { get; set; }

        [Required]
        public int NumDoors { get; set; }

        [Required]
        public int StoreGradeID { get; set; }

        [Required]
        public bool Active { get; set; }

        public virtual StoreGrade StoreGrade { get; set; }

        [Timestamp]
        public Byte[] Timestamp { get; set; }
    }
} 
```

My View Model:

```
namespace StoreGradesLib.ViewModels
{
    public class StoreVM
    {
        public int StoreID { get; set; }
        public bool Active { get; set; }
        public Byte[] Timestamp { get; set; }

        [Required(ErrorMessage = "Store Name is required.")]
        [Display(Name = "Store Name")]
        public string StoreName { get; set; }

        [Required(ErrorMessage = "Store Number is required")]
        public string StoreNumber { get; set; }

        [Required(ErrorMessage = "Store Manager is required.")]
        [Display(Name = "Manager Name")]
        public string ManagerName { get; set; }

        [Required(ErrorMessage = "Contact Number is required.")]
        [Display(Name = "Phone Number")]
        public int PhoneNumber { get; set; }

        [Required(ErrorMessage = "Address Line 1 is required.")]
        [Display(Name = "Address Line 1")]
        public string AddressLine1 { get; set; }

        [Display(Name = "Address Line 2")]
        public string AddressLine2 { get; set; }

        [Required(ErrorMessage = "Postcode is required.")]
        public string Postcode { get; set; }

        [Required(ErrorMessage = "Must input wall area.")]
        [Display(Name = "Wall Area")]
        public int WallArea { get; set; }

        [Required(ErrorMessage = "Must input floor area.")]
        [Display(Name = "Floor Area")]
        public int FloorArea { get; set; }

        [Required(ErrorMessage = "Must input number of windows.")]
        [Display(Name = "Windows")]
        public int NumWindows { get; set; }

        [Required(ErrorMessage = "Must input number of desks.")]
        [Display(Name = "Desks")]
        public int NumDesks { get; set; }

        [Required(ErrorMessage = "Must input number of doors.")]
        [Display(Name = "Doors")]
        public int NumDoors { get; set; }

        [Required(ErrorMessage = "Store must have a grade.")]
        public StoreGrade StoreGradeID { get; set; }

        public string Address
        {
            get
            {
                return StoreName + " " + AddressLine1 + " " + AddressLine2 + " " +                 Postcode;
            }
        }
    }
} 
```

Created mappings:

```
CreateMap<Store, StoreVM>();
CreateMap<StoreVM, Store>(); 
```

Within my controller, I am trying to map a selection of stores to storeVM. I am currently getting my stores as so;

```
var stores = db.Store.Include(s => s.StoreGrade);
stores = from s in db.Store.Where(s => s.Active.Equals(true))
                 select s; 
```

I am wanting to map the selection of stores to StoreVM, I have tried the following, but i get an invalid parameters warning,

```
var VMstores = Mapper.Map<Store, StoreVM>(stores); 
```

I am receiving the error that the best overloaded method match has some invalid arguments.

Can anyone point me in the right direction?

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-12-03T16:13:36.507

您正在映射集合，而不是单个实体（`IEnumerable<Store>`到`IEnumerable<StoreVM>`），所以使用这个映射

```
var VMstores = Mapper.Map<IEnumerable<Store>, IEnumerable<StoreVM>>(stores); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-20T18:56:50.770

**更新！** [现在你可以这样做：](http://lostechies.com/jimmybogard/2014/03/11/efficient-querying-with-linq-automapper-and-future-queries/)

```
var VMstores = stores.Project().To<StoreVM>(); 
```

# php - get component output in joomla

> ID：13687243
> 
> 赞同：0
> 
> 时间：2012-12-03T16:12:11.700
> 
> 标签：php, joomla

i'm building a component in joomla 2.5 In this component i need to get the display of other components (for example the body of an article). I have the url of these components, with get parameters.

I'm thinking of getting the whole page using the url and cUrl, but is there a better way? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:48:15.920

您不需要按照您建议的方式抓取数据，这绝不应该这样做，尤其是当您需要的数据已经在本地存在时。您可以使用 Joomla 代码，如下所示：

```
$article = JTable::getInstance('content');
$article->load($article_id);
echo $article->get('fulltext'); 
```

只需将 $article_id 替换为文章的 ID。你可以用你想要的字段替换全文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:09:54.933

我找到了一个有用的教程。它仍然相当复杂（至少对我来说，因为 Joomla 没有明确支持在单个页面中加载多个组件）。

[http://www.ducciogasparri.com/2012/04/15/joomla-loading-multiple-components-in-a-single-page/](http://www.ducciogasparri.com/2012/04/15/joomla-loading-multiple-components-in-a-single-page/)

# php - ffmpeg and php upload

> ID：13687246
> 
> 赞同：1
> 
> 时间：2012-12-03T16:12:25.660
> 
> 标签：php, ffmpeg

I have never used ffmpeg and was wondering if this script looked right and would work.

I would like to convert the uploaded video to .flv and then add the filename to the hidden input

```
<input type='hidden' id='ajax_image_url' value='".$txt.".flv'> 
```

But would also like to delete the original file after.

Any help/comments would be greatly appreciated.

```
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
{
    $name = $_FILES['thisimage']['name'];
    $size = $_FILES['thisimage']['size'];

    if(strlen($name))
    {
        list($txt, $ext) = explode(".", $name);

        if(in_array($ext, $valid_formats_img))
        {
            if($size<($image_size_limit*$image_size_limit))
            {
                $actual_image_name = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
                $tmp = $_FILES['thisimage']['tmp_name'];

                if(move_uploaded_file($tmp, $path.$actual_image_name))
                {
                    echo "<img src='media/".$actual_image_name."'  class='showthumb' /><input type='hidden' id='video' value='0' /><input type='hidden' id='ajax_image_url' value='".$actual_image_name."' />";
                }
                else
                    echo '<b style="color:#fff;">'.$txt_img_err1.'</b>';
            }
            else
                echo '<b style="color:#fff;">'.$txt_img_up_size.'</b>'; 
        }
        else if(in_array($ext, $valid_formats_vid))
        {
            if($size<($videos_size_limit*$videos_size_limit))
            {
                $actual_image_name = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
                $tmp = $_FILES['thisimage']['tmp_name'];

                if(move_uploaded_file($tmp, $path.$actual_image_name))
                {

                exec('ffmpeg -i '$path.$actual_image_name.' '$path.$txt.'.flv');    

                ?>

                   <!-- START OF THE PLAYER EMBEDDING TO COPY-PASTE --> 
                    <object id="player" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" name="player" width="328" height="200"> 
                    <param name="movie" value="player.swf" /> 
                    <param name="allowfullscreen" value="true" /> 
                    <param name="allowscriptaccess" value="always" /> 
                    <param name="flashvars" value="file=media/<?php echo $txt?>.flv" /> 
                    <embed 
                        type="application/x-shockwave-flash"
                        id="player2"
                        name="player2"
                        src="player.swf" 
                        width="328" 
                        height="200"
                        allowscriptaccess="always" 
                        allowfullscreen="true"
                        flashvars="file=media/<?php echo $txt?>.flv" 
                    /> 
                </object> 
                <script type="text/javascript" src="jwplayer.js"></script>
                <!-- END OF THE PLAYER EMBEDDING --> 
                <?php
                echo "<input type='hidden' id='ajax_image_url' value='".$txt.".flv' /><input type='hidden' id='video' value='1' />";
                }
                else
                    echo '<b style="color:#fff;">'.$txt_img_err1.'</b>';
            }
            else
                echo '<b style="color:#fff;">'.$txt_img_up_size.'</b>'; 
        }
        else
            echo '<b style="color:#fff;">'.$txt_img_err2.'</b>';    
    }
    else
        echo '<b style="color:#fff;">'.$txt_img_err3.'</b>';

    exit;
} 
```

# java - Java trace "Ljava.lang.String;@1ba22e94" while debugging return value of array

> ID：13687247
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:12:26.410
> 
> 标签：java, string

Has anyone encountered java string error, which is something like this "Ljava.lang.String;@1ba22e94" ? I encountered it while trying to debug the return value of array. What is it and how do I resolve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:14:07.160

这不是一个错误——数组的字符串表示只是返回一个（某种）内部地址。要查看数组的实际内容，您可以使用：

```
Arrays.toString(yourArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:13:32.417

这是字符串数组的类表示。你可以使用

```
String arrayContents = Arrays.toString(myStringArray); 
```

显示内容。所有这些表示都可以在[Class.getName()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getName%28%29)中找到。

```
Element Type        Encoding
boolean             Z
byte                B
char                C
double              D
float               F
int                 I
long                J
short               S 
Class or Interface  LClassName; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:13:52.610

这不是错误。它是对象的表示。

# iphone - Screenshot of iCarousel/CATransform3D in iOS

> ID：13687249
> 
> 赞同：1
> 
> 时间：2012-12-03T16:12:29.817
> 
> 标签：iphone, ios, screenshot, calayer, catransform3d

so the former approach using the undocumented API UIGetScreenImage is no longer accepted by Apple ( [Blog-post on UIGetScreenImage](http://mobiledevelopertips.com/user-interface/screen-capture-using-uigetscreenimage.html) ).

The recommended [CALayer renderInContext](http://developer.apple.com/library/ios/#qa/qa1703/_index.html) approach doesn't work with 3D Animations as used in iCarousel.

Is there any currently allowed method of getting my iCarousel/CATransform3D-formed view into an UIImage? Maybe is there a conversion from CATransform3D to CGAffineTransform (I know that this is generally not possible to, since CATransform3D has more dimensions, yet in the special case of the typical iCarousel, the full 3D-ness of CATransform3D isn't used)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:18:43.517

对此进行了彻底的测试，最终仅使用 CGTransforms 创建了我自己的（简单）轮播。

# xml-rpc - Open X over clustered IIS

> ID：13687250
> 
> 赞同：1
> 
> 时间：2012-12-03T16:12:30.513
> 
> 标签：xml-rpc, openx

I am trying to have an openx setup with Windows Server 2008 r2 , php 5.4 and mySql in cluster of two IIS load balanced Web Servers.

I am trying to hit the api from an external c# code but when i try to login to get the session id i have as a result "Method is not Allowed" from the iis server.

The web interface for the openX online systems works perfect.

Did you do any special configuration at the iis server to accept xml rpc proxy connections for the included api?

Do you have any special idea??

Thanks for your time George

# machine-learning - Is it right to normalize data and/or weight vectors in a SOM?

> ID：13687256
> 
> 赞同：5
> 
> 时间：2012-12-03T16:12:38.517
> 
> 标签：machine-learning, neural-network, normalization, som, self-organizing-maps

So I am being stumped by something that (should) be simple:

I have written a SOM for a simple 'play' two-dimensional data set. Here is the data:

![enter image description here](../Images/aceba4e9c6d0eab007f756c468ad2245.png)

You can make out 3 clusters by yourself.

Now, there are two things that confuse me. The first is that the tutorial that I have, normalizes the data before the SOM gets to work on it. This means, it normalizes each data vector to have length 1\. (Euclidean norm). If I do that, then the data looks like this:

![enter image description here](../Images/34c1ff7c420d168996cfc6f807b738a8.png)

(This is because all the data has been projected onto the unit circle).

So, my question(s) are as follows:

1) Is this correct? Projecting the data down onto the unit circle seems to be bad, because you can no longer make out 3 clusters... Is this a fact of life for SOMs? (ie, that they only work on the unit circle).

2) The second related question is that not only are the data normalized to have length 1, but so are the weight vectors of each output unit after every iteration. I understand that they do this so that the weight vectors dont 'blow up', but it seems wrong to me, since the whole point of the weight vectors is to retain distance information. If you normalize them, you lose the ability to 'cluster' properly. For example, how can the SOM possibly distinguish between the cluster on the lower left, from the cluster on the upper right, since they project down to the unit circle the same way?

I am very confused by this. Should data be normalized to unit length in SOMs? Should the weight vectors be normalized as well?

Thanks!

**EDIT**

[Here is the data](https://dl.dropbox.com/u/4724281/data.mat), saved as a .mat file for MATLAB. It is a simple 2 dimensional data set.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T23:07:18.293

要决定是否要对输入数据进行规范化，这取决于这些数据代表什么。假设您对二维（或三维）输入数据进行聚类，其中每个数据向量代表一个空间点。第一个维度是 x 坐标，第二个维度是 y 坐标。在这种情况下，您不会对输入数据进行规范化，因为输入特征（每个维度）彼此之间是可比较的。

如果您在二维空间上再次进行聚类，但每个输入向量代表一个人的年龄和年收入，第一个特征（维度）是年龄，第二个是年收入，那么您必须对输入特征进行归一化，因为它们代表不同的东西（不同的测量单位）并且以完全不同的比例。让我们检查这些输入向量：D1(25, 30000)、D2(50, 30000) 和 D3(25, 60000)。与 D1 相比，D2 和 D3 都将其中一项功能加倍。请记住，SOM 使用欧几里得距离度量。距离（D1，D2）= 25 和距离（D1，D3）= 30000。对于第一个输入特征（年龄）来说，这有点“不公平”，因为尽管将它加倍，但与第二个示例（ D1，D3)。

[检查这个，它也有一个类似的例子](http://intelligencemining.blogspot.gr/2009/07/data-preprocessing-normalization.html)

如果要对输入数据进行规范化，请对每个特征/维度（输入数据表上的每一列）进行规范化。引用[som_normalize 手册](http://www.cis.hut.fi/somtoolbox/package/docs2/som_normalize.html)：

“规范化始终是单变量操作”

[还要检查这个](http://www.damienfrancois.be/blog/pivot/entry.php?id=8)以获得关于规范化的简要说明，如果你想阅读更多，试试[这个](http://hfs1.duytan.edu.vn/upload/ebooks/3836.pdf)（第 7 章是你想要的）

**编辑：**

最常见的归一化方法是将每个维度数据缩放到 [0,1] 或将它们转换为具有零均值和标准偏差 1。第一种方法是通过从每个输入中减去其维度（列）的最小值和除法来完成最大值 minun 最小值（其维度）。

Xi,norm = (Xi - Xmin)/(Xmax-Xmin)

Yi,norm = (Yi - Ymin)/(Ymax-Ymin)

在第二种方法中，您减去每个维度的平均值，然后除以标准差。

Xi,norm = (Xi - Xmean)/(Xsd)

每种方法都有优点/缺点。例如，第一种方法对数据中的异常值非常敏感。您应该在检查数据集的统计特征后进行选择。

在单位圆中投影实际上不是一种归一化方法，而更像是一种降维方法，因为在投影之后，您可以用单个数字（例如它的角度）替换每个数据点。你不必这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T20:09:11.303

在 SOM 训练算法中，使用一堆不同的度量来计算向量之间的距离（模式和权重）。举几个例子（也许是最广泛使用的）：欧几里得距离和点积。如果将向量和权重归一化，它们是等价的，并允许网络以最有效的方式学习。例如，如果您不规范化当前数据，网络将处理来自输入空间不同部分的具有不同偏差的点（较大的值将产生较大的影响）。这就是为什么统一标准化很重要，并且在大多数情况下被认为是适当的步骤（特别是，如果使用点积作为衡量标准）。

在将其标准化为单位圆之前，应准备好您的源数据。您应该将数据映射到两个轴上的 [-1, 1] 区域。为此存在几种算法，其中一种使用简单的公式：

```
mult_factor = 2 / (max - min);
offset_factor = 1 - 2 * max / (max - min),

```

其中`min`和`max`是数据集或域边界中的最小值和最大值，如果事先知道的话。每个维度都单独处理。对于您的情况，这将是 X 和 Y 坐标。

```
Xnew = Xold * Xmult_factor + Xoffset_factor, i = 1..N
Ynew = Yold * Ymult_factor + Yoffset_factor, i = 1..N

```

无论映射之前`min`和`max`之前的实际值是什么（在您的情况下可以是 [0,1] 或 [-3.6, 10]），在映射之后它们将落入范围 [-1, 1] . 实际上，上面的公式专门用于将数据转换为范围 [-1, 1]，因为它们只是从一个范围到另一个范围的一般转换过程的特例：

```
数据[i] = (data[i] - old_min) * (new_max - new_min) / (old_max - old_min) + new_min；

```

映射后，您可以对单位圆进行归一化处理，这样您最终将得到一个以 [0, 0] 为中心的圆。

[您可以在此页面](http://articles.mql4.com/783)上找到更多信息。尽管该站点一般不是关于神经网络的，但这个特定页面提供了对 SOM 的很好的解释，包括关于数据规范化的描述性图表。

# javascript - Kinetic 在点击时获取特定的形状 ID

> ID：13687259
> 
> 赞同：1
> 
> 时间：2012-12-03T16:12:45.217
> 
> 标签：javascript, mouse, kineticjs

我只是想为每个形状设置一个点击事件，我希望能够根据他们的 id 向我显示它是基于哪个正方形。

```
var stage = new Kinetic.Stage({
container: 'container',
    width: 700,
    height: 700,
});

var squareLayer;
var boardBlankArray;

function drawBoard() {
    var squareLayer = new Kinetic.Layer();
    var initialSquares = 64;
    var squareX = 20;
    var squareY = 20;
    boardBlankArray = [];

for (i = 0; i < initialSquares; i++) {
    var square = new Kinetic.Rect({
        x: squareX,
        y: squareY,
        width: 50,
        height: 50,
        fill: "blue",
        stroke: "black",
        strokeWidth: 2,
        id: "squares" + i
    });

    squareX += 60; //update squares X (horizontal) position
    if (squareX > 450) {
        squareX = 20;
        squareY += 60;
    }

    boardBlankArray[i] = square;

    squareLayer.add(boardBlankArray[i]);

    boardBlankArray[i].on("click", function() {
        alert(boardBlankArray[i].getId());
    });
}
  stage.add(squareLayer);
}

drawBoard(); 
```

[http://jsfiddle.net/tSvmd/](http://jsfiddle.net/tSvmd/)

我做了小提琴，由于某种原因，它说 boardBlankArray 是未定义的，但显然是。此外，当我在计算机上本地执行此操作时，我没有收到该错误。相反，它只是提醒所有方块的相同 id。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:39:29.177

尝试**使用 this.attrs.id**而不是**boardBlankArray[i].getId()**作为形状 ID

**固定输出：**

[http://jsfiddle.net/tSvmd/1/](http://jsfiddle.net/tSvmd/1/)

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script type='text/javascript' src='http://www.kineticjs.com/download/v4.0.5/kinetic-v4.0.5.min.js'></script>
<script type='text/javascript'>
window.onload=function(){
var stage = new Kinetic.Stage({
    container: 'container',
    width: 700,
    height: 700,
});
var squareLayer;
var boardBlankArray;
function drawBoard() {
    var squareLayer = new Kinetic.Layer();
    var initialSquares = 64;
    var squareX = 20;
    var squareY = 20;
    boardBlankArray = [];
    for (i = 0; i < initialSquares; i++) {
        var square = new Kinetic.Rect({
            x: squareX,
            y: squareY,
            width: 50,
            height: 50,
            fill: "blue",
            stroke: "black",
            strokeWidth: 2,
            id: "squares" + i
        });
        squareX += 60; //update squares X (horizontal) position
        if (squareX > 450) {
            squareX = 20;
            squareY += 60;
        }
        boardBlankArray[i] = square;
        squareLayer.add(boardBlankArray[i]);
        boardBlankArray[i].on("click", function() {
            alert(this.attrs.id);
        });
    }
     stage.add(squareLayer);
}
drawBoard();
}
</script>
</head>
<body>
<div id="container">
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:47:44.827

试试这个而不是单击，使用 evt.shape 获取事件的形状对象并在该对象上使用 getId()

```
 boardBlankArray[i].on("click", function(evt) {
var node=evt.shape;
            alert(node.getId());
        }); 
```

# xml - Where can I find bambookit?

> ID：13687260
> 
> 赞同：2
> 
> 时间：2012-12-03T16:12:53.383
> 
> 标签：xml, user-interface, xul, toolkit

I'm not sure someone here has ever heard about bambookit, as it is quite rare. But it seems to be a very interesting XUL Motor, if I can believe the very few info available: [http://www.componentsource.com/beaws/products/bambookit-gui/index.html](http://www.componentsource.com/beaws/products/bambookit-gui/index.html)

And a small example of Rich client here: [http://www.devx.com/xml/Article/16704/0/page/2](http://www.devx.com/xml/Article/16704/0/page/2) But it seems that we can use it for web client as well.

Of course Bambookit website does not seem to be hosting anything anymore, but I hope that someone still owns an evaluation distribution to test this.

If anyone has any information about this, I would be glad to read it :-)

Thanks in advance and regards, S.

# .net - Context.MkSolver() Changes between Z3 versions 4.1 and 4.3

> ID：13687263
> 
> 赞同：2
> 
> 时间：2012-12-03T16:12:58.000
> 
> 标签：.net, z3

Recently I was upgrading an application that uses the .NET API from Z3 version 4.1 to version 4.3\. However, I noticed there has been a change in `MkSolver()` that now causes some of my queries that returned `unsat` in 4.1 to now return `unknown` in 4.3\. In particular, I had been using the `Context` option `ELIM_QUANTIFIERS` set to true, which has been deprecated according to an error message I receive when trying to use the solver:

`QUANT_ELIM option is deprecated, please consider using the 'qe' tactic.`

Without this option enabled, some of my queries may receive unknown. I have tried using a variety of tactics in 4.3, including the quantifier elimination `qe`, but unfortunately, I have not been able to figure out an equivalent set of tactics to what MkSolver in Z3 4.1 created. For example, the following does not work (i.e., I still get unknown in 4.3 for queries that I got unsat for in 4.1):

```
Context z3 = new Context();
Params p = z3.MkParams();
p.Add("produce-models", true);
p.Add("candidate-models", true);
p.Add("mbqi", true);
p.Add("auto-config", false);
p.Add("ematching", true);
p.Add("pull-nested-quantifiers", true);
Tactic tqe = z3.With(z3.MkTactic("qe"), p);
Tactic tsmt = z3.With(z3.MkTactic("smt"), p);
Tactic t = z3.Repeat(tqe, tsmt);
Solver s = t.Solver;
... // assert and check assertions 
```

If there is an equivalent solver-tactic in 4.3 to what `MkSolver` created in 4.1, what is it or how can I go about figuring it out? I used a variety of other context options in 4.1, which I have tried to use in the appropriate tactics in 4.3, such as: `MBQI = true`, `AUTO_CONFIG = false`, `ELIM_NLARITH_QUANTIFIERS = true`, `EMATCHING = true`, `MACRO_FINDER = true`, `PI_PULL_QUANTIFIERS = true`, `PULL_NESTED_QUANTIFIERS = true`, `DISTRIBUTE_FORALL = true`, and `PULL_NESTED_QUANTIFIERS = true`.

Here is an example query that now returns `unknown`, which previously returned `unsat` (note that it is unsat only with some additional assertions, which are quite long, but this is the format of the assertion that now gives unknown. Here `LB`, `LS`, `vmin`, and `vmax` are all real constants [with assertions equating them to constant values, e.g., `LS = 7`], and `q` is a function from integers to bitvectors, `x` is a function from integers to reals, `next` is a function from integers to integers, and `last` is an integer, and likewise for their primed versions; also, note that part of it is nonlinear, e.g., `delta * t_1` and `delta * t_2`):

```
(set-option :auto-config false)
;(set-option :elim-quantifiers true)
(set-option :elim-nlarith-quantifiers true)
(set-option :mbqi true)
(set-option :produce-models true)
(set-option :proof-mode 1)

(declare-const LB Real)
(declare-const LS Real)
(declare-const vmin Real)
(declare-const vmax Real)

(declare-const Base (_ BitVec 2))

(declare-const N Int)
(declare-fun q (Int) (_ BitVec 2))
(declare-fun |q'| (Int) (_ BitVec 2))
(declare-fun x (Int) Real)
(declare-fun |x'| (Int) Real)
(declare-fun next (Int) Int)
(declare-fun |next'| (Int) Int)
(declare-const last Int)
(declare-const |last'| Int)

(declare-const t_1 Real)
(declare-const t_2 Real)
(declare-const delta Real)

(assert (= Base #b01))
(assert (= vmin 1.0))
(assert (= vmax 2.0))
(assert (= LS 7.0))
(assert (= LB 28.0))

(assert (not (=> (and (forall ((i Int) (j Int))
           (=> (and (>= i 1) (<= i N) (>= j 1) (<= j N))
               (=> (and (not (= i j))
                        (= (q i) Base)
                        (= (q j) Base)
                        (= (next j) i))
                   (>= (- (x i) (x j)) LS))))
         (exists ((t_1 Real))
           (and (>= t_1 0.0)
                (forall ((h Int))
                  (=> (and (>= h 1) (<= h N))
                      (and (exists ((delta Real))
                             (forall ((t_2 Real))
                               (=> (and (>= t_2 0.0) (<= t_2 t_1))
                                   (and true
                                        true
                                        (or (not (= (q h) Base))
                                            (and (<= (+ (x h) (* delta t_2)) LB)
                                                 (or (not (>= (+ (x h)
                                                                 (* delta t_2))
                                                              LB))
                                                     (= t_1 t_2))
                                                 (= (|x'| h)
                                                    (+ (x h) (* delta t_1)))
                                                 (>= delta vmin)
                                                 (<= delta vmax)))
                                        true))))
                           (= (q h) (|q'| h))
                           (= (next h) (|next'| h))
                           (= last |last'|)))))))
    (forall ((i Int) (j Int))
      (or (not (and (>= i 1) (<= i N) (>= j 1) (<= j N)))
          (not (and (not (= i j))
                    (= (|q'| i) Base)
                    (= (|q'| j) Base)
                    (= (|next'| j) i)))
          (>= (+ (|x'| i) (* (- 1.0) (|x'| j))) LS))))))

(check-sat) ; toggles between unknown and sat when toggling elim-nlarith-quantifiers 
```

Essentially, I'd like to create the tactic-solver corresponding to whatever solver is being used here, as this toggling behavior is what I was seeing in 4.1, but don't see in 4.3, since I can't use ELIM_QUANT via Context options anymore.

# python - Iterate over lines that start with a number

> ID：13687266
> 
> 赞同：1
> 
> 时间：2012-12-03T16:13:09.360
> 
> 标签：python

I have a file that has many lines, the first four lines start with some letters (a word) and the rest start with a number. I want to iterate over the lines that start with a number (three-digit number, eg '123' followed by different variables containing both letters and numbers) and ignore the first 4 lines. This is what I have done, but it gives me a blank list in an output.

```
number = []  
for line in infile.readline():  
    line = line.rstrip()  
    if line.startswith('[0-9]'):
        number.append(line.split()[0])  
print number 
```

Why is the 'number' list empty in my output?

This is what the infile looks like:

```
Value = 152  
Numb = 0.005  
Pos = 75  
Samp = 12.5  
150    K    0.345  
234    T    0.764  
565    X    0.345 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:17:24.817

因为[`startswith`](http://docs.python.org/2/library/stdtypes.html#str.startswith)需要一个字符串，而不是正则表达式。你想要[`re.match`](http://docs.python.org/2/library/re.html#re.match)。

编辑：或`import string; line.startswith(tuple(string.digits))`（感谢@GarethRees）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:23:13.113

不是直接的答案，但最简单的跳过行的方法是：

```
from itertools import islice
with open('file') as fin:
    for line in islice(fin, 4, None):
        pass # do something 
```

# joomla - After moving website, edit & create modules,menu not working

> ID：13687267
> 
> 赞同：0
> 
> 时间：2012-12-03T16:13:09.733
> 
> 标签：joomla, joomla2.5

I moved website on [http://development.artisla.com](http://development.artisla.com)

Front end is working fine but on the backend, when i click on edit, or want to add a module or menu or user it redirects me to the previous page & checked in that module or menu or user.

Kindly guide me how can avoid this, to work it perfectly.

Below are the temporary credentials.

what i noticed is it shows me the below warning, but when i checked that lines there is nothing wrong with that

```
Warning: Cannot modify header information - headers already sent by (output started at    /home/artisla/public_html/development/plugins/system/regacymailing/regacymailing.php:15) in /home/artisla/public_html/development/components/com_community/libraries/core.php on line 1191

Warning: Cannot modify header information - headers already sent by (output started at /home/artisla/public_html/development/plugins/system/regacymailing/regacymailing.php:15) in /home/artisla/public_html/development/libraries/joomla/session/session.php on line 565

Warning: Cannot modify header information - headers already sent by (output started at /home/artisla/public_html/development/plugins/system/regacymailing/regacymailing.php:15) in /home/artisla/public_html/development/libraries/joomla/application/application.php on line 836 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:12:32.560

这可能是由于 PHP 的设置太高（[请参阅错误报告](http://php.net/manual/en/function.error-reporting.php)）。另请检查您的错误日志以获取更多详细信息。

*   一个好的起点是禁用插件 Acymailing / regacymailing 以查看问题是否消失。

*   您使用的是过时版本的 Joomla!，请更新它。

*   将 Acymailing 扩展更新到最新版本

# javascript - 在正文或文档上绑定事件？

> ID：13687269
> 
> 赞同：16
> 
> 时间：2012-12-03T16:13:17.163
> 
> 标签：javascript, jquery, javascript-events

有时用户将事件绑定到`$('body')`有时在`$(document)`

```
$(document).on('click', someAction);

$('body').on('click', someAction); 
```

有什么理由比另一个更喜欢一个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T08:34:41.187

`$(document)`对我来说，将事件绑定到而不是绑定事件主要有一个原因`$('body')`：

> 无需等待**domReady**（文档在其他一切之前可用）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T16:16:07.193

简短的回答很可能是，不，不是真的。

有人这样做的原因应该始终是他需要在他的标记中全局捕获事件。由于`<body>`标签应该作为 的直接兄弟`<html>`，因此所有事件冒泡阶段都将在此结束。

```
<html>
    <body>
         <div>
         </div> 
```

每个点击事件`<div>`都会冒泡`<body>`（`<html>`如果没有手动停止）。所以对于那个用例，它不应该有任何区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:18:07.093

速度有一些差异，其他没什么。有人已经完成了这项工作，所以我将指向您的链接。

## [http://jsperf.com/jquery-body-vs-document-body-selector](http://jsperf.com/jquery-body-vs-document-body-selector)

但是，与那里的代码直接相关，有一个主要区别。`$(document).on('click', someAction);`将影响文档查看区域的任何位置，而`$('body').on('click', someAction);`可能不会影响与 body 可以具有独立高度和宽度的区域一样多的区域。

# java - JavaCV 画布保持空白

> ID：13687270
> 
> 赞同：2
> 
> 时间：2012-12-03T16:13:23.867
> 
> 标签：java, webcam, javacv

我想不断地捕捉网络摄像头并让它在画布上查看。图像的保存很好。它每秒拍一张照片。但是 canvas.showImage() 不起作用。我的屏幕仍然空白。控制台每帧都会显示“已清理相机”。

头等舱：

```
public class StartUp {
public static void main(String[] args) {
    CanvasFrame canvas = new CanvasFrame("Cam");
    canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    CaptureImage captureimage = new CaptureImage();
    while(true){
        try {
            IplImage img = captureimage.captureFrame();
            canvas.showImage(img);
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}
} 
```

二等：

```
public class CaptureImage {

public IplImage captureFrame() {
    final OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);
    try {
        grabber.start();
        IplImage img = grabber.grab();
        if (img != null) {
            cvSaveImage("Image.jpg",img);     
            return img;
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:22:52.770

尝试使用此代码捕获网络摄像头。在运行此代码之前加载库。（JavaCV jar 文件等）

```
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber.Exception;
import com.googlecode.javacv.OpenCVFrameGrabber;
import static com.googlecode.javacv.cpp.opencv_core.*;

public class capture{

CanvasFrame frame,fr;
IplImage image,im;
OpenCVFrameGrabber grabber,gr;
public capture() throws Exception {
    frame=new CanvasFrame("Cam 1");
    grabber=new  OpenCVFrameGrabber(0);
     grabber.start();
     while (((frame.isVisible()) && (image = grabber.grab()) != null)){
         //cvFlip(image,image,1); if needed to flip.

         frame.showImage(image);

     }
     frame.setDefaultCloseOperation(1);
     frame.setDefaultCloseOperation(CanvasFrame.EXIT_ON_CLOSE);
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T06:23:14.140

我自己也有同样的问题。最后用以下代码重写了 initCanvas 方法：

```
protected void initCanvas(boolean fullScreen, DisplayMode displayMode, double gamma) {
    canvas = new Canvas() {
        /**
         * 
         */
        private static final long   serialVersionUID    = 1L;
        @Override public void update(Graphics g) {
            paint(g);
        }
        @Override public void paint(Graphics g) {
            // Calling BufferStrategy.show() here sometimes throws
            // NullPointerException or IllegalStateException,
            // but otherwise seems to work fine.
            try {
                BufferStrategy strategy = canvas.getBufferStrategy();
                if (strategy != null) {
                    do {
                        do {
                            g = strategy.getDrawGraphics();
                            if (color != null) {
                                g.setColor(color);
                                g.fillRect(0, 0, getWidth(), getHeight());
                            }
                            if (image != null) {
                                g.drawImage(image, 0, 0, getWidth(), getHeight(), null);
                            }
                            if (buffer != null) {
                                g.drawImage(buffer, 0, 0, getWidth(), getHeight(), null);
                            }
                            g.dispose();
                        } while (strategy.contentsRestored());
                        strategy.show();
                    } while (strategy.contentsLost());
                }
                else {
                    g = canvas.getGraphics();
                    if (color != null) {
                        g.setColor(color);
                        g.fillRect(0, 0, getWidth(), getHeight());
                    }
                    if (image != null) {
                        g.drawImage(image, 0, 0, getWidth(), getHeight(), null);
                    }
                    if (buffer != null) {
                        g.drawImage(buffer, 0, 0, getWidth(), getHeight(), null);
                    }
                    g.dispose();
                }
            } catch (NullPointerException e) {
            } catch (IllegalStateException e) { 
            }
        }
    };
    if (fullScreen) {
        canvas.setSize(getSize());
        needInitialResize = false;
    } else {
        needInitialResize = true;
    }
    getContentPane().add(canvas);
    canvas.setVisible(true);
    canvas.createBufferStrategy(2);
    //canvas.setIgnoreRepaint(true);
} 
```

# c# - 如何从 Datagrid WPF 中检索可见数据？

> ID：13687273
> 
> 赞同：0
> 
> 时间：2012-12-03T16:13:26.520
> 
> 标签：c#, wpf, datagrid, filter

我的 WPF 应用程序中有一个 Datagrid，我也为它设计了一个数据过滤器。Datagrid 根据用户导入应用程序的 excel 文件自动填充。现在，我的问题是如何在应用过滤器后从数据网格中检索可见数据（数据网格中的过滤数据）？

# jquery - 结合 :first 时，find() 和 children() 之间的 jQuery 区别

> ID：13687276
> 
> 赞同：4
> 
> 时间：2012-12-03T16:13:29.780
> 
> 标签：jquery, jquery-selectors

在回答以下 jQuery 问题[Need help in Optimizing the below jquery code](https://stackoverflow.com/q/13685141/1236044)的过程中，我偶然发现了另一个关于`.find()`and的问题`.children()`。

问题是，给定四个 ID 为**state**、**city**、**branch**、**branchAddress**的选择框，删除每个选择框的第一个选项以外的所有选项。

已经发布了几个答案。其中包括：

1.  `$('#state,#city,#branch,#branchAddress').children('option:not(:first)').remove();`
2.  `$('#state,#city,#branch,#branchAddress').children('option:not(:first-child)').remove();`
3.  `$('#state,#city,#branch,#branchAddress').find('option:not(:first)').remove();`

[根据this js fiddle（ http://jsfiddle.net/QkNRf/1/](http://jsfiddle.net/QkNRf/1/) ） ，解决方案1似乎不起作用（删除所有选项，第一个选择框的第一个选项除外）

解决方案 2 和 3 似乎工作得很好。

如果有人能指出我错过了什么，或者向我解释为什么解决方案 3 在解决方案 1 不适用的情况下有效，我会很高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:30:07.120

所有其他答案都是正确的，但我认为文档中解释示例 1 为何失败以及数字 3 为何有效的重要部分是，虽然`.children()`有效地过滤了前一个选择器的结果，但`.find()`将执行[选择器上下文](http://api.jquery.com/jquery/#selector-context)搜索，所以（我假设）它将`'option:not(:first)'`在所有 4 个上下文中执行搜索并整理结果，同时`.children()`将首先整理结果，然后使用`'option:not(:first)'`有效地删除除第一个以外的所有内容进行过滤...

在这种情况下，搜索的深度无关紧要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T16:17:48.073

来自文档：[.children()](http://api.jquery.com/children/)：

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

# web-crawler - Bingbot 导致 404 错误

> ID：13687278
> 
> 赞同：3
> 
> 时间：2012-12-03T16:13:35.147
> 
> 标签：web-crawler, bing, bingbot

我们最近看到大量 404 错误是由 Bing 网络爬虫创建的。我已经验证 IP 实际上是 Bing 机器，但只是不知道他们为什么要尝试他们正在尝试的 URL。我不想使用 robots.txt 文件告诉他们根本不要抓取我的网站，但同时我不希望他们继续请求不存在的页面。有没有办法知道 Bing 从哪里获取特定 URL？我尝试使用 Google 搜索`[link:www.mywebsite.com/pagename/]`，但没有找到任何东西，这让我相信该机器人正在做一些不应该做的事情，而不是我的网站有一个错误的 URL。

# android - 片段更改时如何更新视图？

> ID：13687280
> 
> 赞同：0
> 
> 时间：2012-12-03T16:13:36.960
> 
> 标签：android, android-asynctask, android-fragments, android-viewpager

我有一个活动，其中有 2 个 sherlockfragment 前两个页面显示带有自定义列表视图的片段，这些视图是使用 AsyncTask 从服务器的 xml 构建的。但是，当应用程序运行时，只显示一个列表视图，其他页面只是空白

```
public class VpiAbsTestActivity extends SherlockFragmentActivity {

private static final String[] CONTENT = new String[] { "1","2"};

TestFragmentAdapter mAdapter;
 ViewPager mPager;
    PageIndicator mIndicator;

protected void onCreate(Bundle savedInstanceState) {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_tabs);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    mIndicator.notifyDataSetChanged();
}

class TestFragmentAdapter extends FragmentPagerAdapter {        
    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch(position) {

        case 0:
            return new customlist();

        case 1:
            return new customlistnotuser();

        default:
            return null;

        }
    }

    @Override
    public int getCount() {
        return mCount;
    }

    public CharSequence getPageTitle(int position) {
        return VpiAbsTestActivity.CONTENT[position % VpiAbsTestActivity.CONTENT.length].toUpperCase();
    }

     @Override
        public void destroyItem(View collection, int position, Object view) {
             ((ViewPager) collection).removeView((View) view);
        }

 } 
```

}

更改页面时我可以更新 viewpager 什么？

customlistnotuser 页面喜欢 customlist 页面但不显示

```
 public class customlistnotuser extends SherlockFragment  {

// All static variables
static final String URL = "url";
// XML node keys
static final String KEY_TEST = "test"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_Description = "description";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";
static final String KEY_PRICE = "price";
static final String KEY_URL = "url";

 private ProgressDialog pDialog;

ListView list;
LazyAdapterbeth adapter;
XMLParser parser = new XMLParser();
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    new getFeed().execute();

}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 

{

    View thisfragment = inflater.inflate(R.layout.dovomi, container, false);

    return thisfragment;
}

private class getFeed extends AsyncTask<Void, Void, Document> {

       }

    protected Document doInBackground(Void... params) {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        return doc;
    }

    protected void onPostExecute(Document doc) {

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    NodeList nl = doc.getElementsByTagName(KEY_TEST);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_Description, parser.getValue(e, KEY_Description));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
        map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));
        map.put(KEY_URL, parser.getValue(e, KEY_URL));
        // adding HashList to ArrayList
        songsList.add(map);
         pDialog.dismiss();
    }

    list=(ListView)getActivity().findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapterbeth(getActivity(), songsList);
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() { 
```

customlistnotuser 页面喜欢 customlist 页面但不显示 .. :(

# vb.net - 从文本框中保存数据并在下一个会话中保留

> ID：13687282
> 
> 赞同：1
> 
> 时间：2012-12-03T16:13:39.320
> 
> 标签：vb.net, visual-studio-2008

我想从`TextBox`. 该信息由用户输入。

在我的`Form_Load`事件处理程序中，我设置`Button1.Enabled = False`并让用户`right_serial_code`输入`TextBox1`. 如果代码正确，`Button1`则启用。

如果用户输入了正确的序列号，它应该在下一个会话中被持久化。这样下次程序启动时，用户就不需要重新输入了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:34:55.200

转到您的项目属性页面并打开“设置”选项卡。创建一个名为 的新设置`SerialCode`。设置`Type`为`String`和设置`Scope`为要么`User`（因此每个操作系统用户保存自己的序列号）或`Application`（因此机器上的所有用户共享相同的序列号）。

然后，在`Form_Load`事件处理程序中，执行以下操作：

```
TextBox1.Text = My.Settings.SerialCode 
```

然后在`Button1_Click`事件处理程序中，如下所示：

```
My.Settings.SerialCode = TextBox1.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:18:42.023

要从一个程序运行到另一个程序调用任何信息，您需要将其保存为某种形式的持久存储。

如果数据很小且仅与应用程序相关，您可以将其保存在应用程序配置文件中。这是一个与 .net 应用程序关联的 xml 文件。请参阅[如何在运行时读取/写入 app.config 设置而不使用用户设置？](https://stackoverflow.com/questions/3638754/how-can-i-read-write-app-config-settings-at-runtime-without-using-user-settings)有关如何保存信息的说明。还有一篇更深入的文章，位于[http://www.codeproject.com/Articles/14744/Read-Write-App-Config-File-with-NET-2-0](http://www.codeproject.com/Articles/14744/Read-Write-App-Config-File-with-NET-2-0)。

# sql - Oracle：具有可验证唯一数据的 PK 违反唯一约束

> ID：13687285
> 
> 赞同：1
> 
> 时间：2012-12-03T16:13:50.240
> 
> 标签：sql, oracle

我必须收集和存储关于我工作的许多事情的统计数据，特别是在一张桌子上我突然遇到了这个过程的问题。获取这些统计信息过程的相关部分只是将数据转储到临时表中，并将该表中的任何新数据插入到主表中。所以我有这样的事情：

```
CREATE TABLE "TEMP_SCHEMA"."STATS_ORDERS"
(
  "ORDER_NO"      NUMBER(10,0)        NOT NULL ENABLE,
  "ORDER_DATE"    DATE                NOT NULL ENABLE,
  "ORDER_TYPE"    VARCHAR2(1 BYTE)    NOT NULL ENABLE
); /
GRANT SELECT,INSERT,UPDATE,DELETE
ON "TEMP_SCHEMA"."STATS_ORDERS" TO "MY_SCHEMA"; /

CREATE TABLE "MY_SCHEMA"."STATS_ORDERS"
(
  "ORDER_NO"      NUMBER(10,0)        NOT NULL ENABLE,
  "ORDER_DATE"    DATE                NOT NULL ENABLE,
  "ORDER_TYPE"    VARCHAR2(1 BYTE)    NOT NULL ENABLE,
  CONSTRAINT "PK_STATS_ORDERS" PRIMARY KEY ("ORDER_NO", "ORDER_TYPE")
); / 
```

将数据转储到“TEMP_SCHEMA”后。“STATS_ORDERS”我正在尝试这样的事情：

```
INSERT INTO MY_SCHEMA.STATS_ORDERS (ORDER_NO,ORDER_DATE,ORDER_TYPE)
SELECT
    DISTINCT TMP.ORDER_NO,TMP.ORDER_DATE,TMP.ORDER_TYPE
FROM
    (SELECT DISTINCT * FROM TEMP_SCHEMA.STATS_ORDERS) TMP
    LEFT JOIN MY_SCHEMA.STATS_ORDERS ORD
    ON TMP.ORDER_NO = ORD.ORDER_NO AND TMP.ORDER_TYPE = ORD.ORDER_TYPE
WHERE ORD.ORDER_NO IS NULL AND ORD.ORDER_TYPE IS NULL; / 
```

当我运行它时，我收到以下错误：

```
SQL Error: ORA-00001: unique constraint (MY_SCHEMA.PK_STATS_ORDERS) violated
00001\. 00000 -  "unique constraint (%s.%s) violated"
*Cause:    An UPDATE or INSERT statement attempted to insert a duplicate key.
          For Trusted Oracle configured in DBMS MAC mode, you may see
          this message if a duplicate entry exists at a different level.
*Action:   Either remove the unique restriction or do not insert the key. 
```

我已运行以下查询以查找导致错误的行：

```
SELECT ORDER_NO,ORDER_DATE,ORDER_TYPE
FROM
    MY_SCHEMA.STATS_ORDERS O
    INNER JOIN (
        SELECT DISTINCT TMP.ORDER_NO,TMP.ORDER_DATE,TMP.ORDER_TYPE
        FROM (SELECT DISTINCT * FROM TEMP_SCHEMA.STATS_ORDERS) TMP
          LEFT JOIN MY_SCHEMA.STATS_ORDERS ORD
          ON TMP.ORDER_NO = ORD.ORDER_NO AND TMP.ORDER_TYPE = ORD.ORDER_TYPE
        WHERE ORD.ORDER_NO IS NULL AND ORD.ORDER_TYPE IS NULL
    ) N
    ON O.ORDER_NO = N.ORDER_NO AND O.ORDER_TYPE = N.ORDER_TYPE; / 
```

大概这应该返回导致违规的任何行，但当然它什么也不返回，因为我明确排除了任何可能重复的内容。

我究竟做错了什么？

编辑：我不小心将原始名称留在了我的示例中。在我的示例中将其更改为名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:24:19.293

识别有问题的行的最简单方法通常是使用[DML 错误记录](http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php)。如果创建错误表

```
BEGIN
  dmbs_errlog.create_error_log( dml_table_name => 'STATS_ORDERS',
                                err_log_table_name => 'STATS_ORDERS_ERR',
                                err_log_table_owner => 'MY_SCHEMA' );
END; 
```

那么您可以`LOG ERRORS INTO`在您的 DML 中使用该子句

```
INSERT INTO MY_SCHEMA.STATS_ORDERS (ORDER_NO,ORDER_DATE,ORDER_TYPE)
  SELECT DISTINCT TMP.ORDER_NO,TMP.ORDER_DATE,TMP.ORDER_TYPE
    FROM (SELECT DISTINCT * FROM TEMP_SCHEMA.STATS_ORDERS) TMP
         LEFT JOIN MY_SCHEMA.STATS_ORDERS ORD
         ON TMP.ORDER_NO = ORD.ORDER_NO AND TMP.ORDER_TYPE = ORD.ORDER_TYPE
   WHERE ORD.ORDER_NO IS NULL AND ORD.ORDER_TYPE IS NULL
     LOG ERRORS INTO stats_orders_err
  REJECT LIMIT UNLIMITED; 
```

这会将约束拒绝的任何行写入`stats_orders_err`错误表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:31:42.410

验证您没有遇到这种情况：

```
SQL> CREATE TABLE STATS_ORDERS_TMP
  2  (
  3    ORDER_NO      NUMBER(10,0)        NOT NULL ENABLE,
  4    ORDER_DATE    DATE                NOT NULL ENABLE,
  5    ORDER_TYPE    VARCHAR2(1 BYTE)    NOT NULL ENABLE
  6  );

Table created.

SQL>
SQL> CREATE TABLE STATS_ORDERS
  2  (
  3    ORDER_NO      NUMBER(10,0)        NOT NULL ENABLE,
  4    ORDER_DATE    DATE                NOT NULL ENABLE,
  5    ORDER_TYPE    VARCHAR2(1 BYTE)    NOT NULL ENABLE,
  6    CONSTRAINT PK_STATS_ORDERS PRIMARY KEY (ORDER_NO, ORDER_TYPE)
  7  );

Table created.

SQL> insert into STATS_ORDERS_TMP values (1, sysdate, 'A');

1 row created.

SQL> insert into STATS_ORDERS_TMP values (1, sysdate-1, 'A');

1 row created.

SQL> commit;

Commit complete.

SQL> insert into stats_orders (order_no,order_date,order_type)
  2  select
  3      distinct tmp.order_no,tmp.order_date,tmp.order_type
  4  from
  5      (select distinct * from stats_orders_tmp) tmp
  6      left join stats_orders ord
  7      on tmp.order_no = ord.order_no and tmp.order_type = ord.order_type
  8  where ord.order_no is null and ord.order_type is null;
insert into stats_orders (order_no,order_date,order_type)
*
ERROR at line 1:
ORA-00001: unique constraint (DTD_TRADE.PK_STATS_ORDERS) violated 
```

即，您在“临时”表中有给定订单+类型的重复日期。

您的验证不会看到它们（因为它们不在主表中）：

```
SQL> SELECT o.ORDER_NO,o.ORDER_DATE,o.ORDER_TYPE
  2  FROM
  3      STATS_ORDERS O
  4      INNER JOIN (
  5          SELECT DISTINCT TMP.ORDER_NO,TMP.ORDER_DATE,TMP.ORDER_TYPE
  6          FROM (SELECT DISTINCT * FROM STATS_ORDERS_TMP) TMP
  7            LEFT JOIN STATS_ORDERS ORD
  8            ON TMP.ORDER_NO = ORD.ORDER_NO AND TMP.ORDER_TYPE = ORD.ORDER_TYPE
  9          WHERE ORD.ORDER_NO IS NULL AND ORD.ORDER_TYPE IS NULL
 10      ) N
 11      ON O.ORDER_NO = N.ORDER_NO AND O.ORDER_TYPE = N.ORDER_TYPE;

no rows selected 
```

但它们确实存在：

```
SQL> select order_no, order_type, count(*) from stats_orders_tmp group by order_no, order_type having count(*) > 1;

  ORDER_NO O   COUNT(*)
---------- - ----------
         1 A          2 
```

# r - 用ggplot扩展y轴

> ID：13687294
> 
> 赞同：0
> 
> 时间：2012-12-03T16:14:07.687
> 
> 标签：r, ggplot2

我从美联储网站获得了一些利率数据，我正在尝试绘制收益率曲线。我打算将其用于与其他一些比较，并随着时间的推移保持一致，我希望尽可能长时间地在尽可能多的国家/地区保持 y 轴上的相同轴范围。以下代码`scale_y_continuous(limits=c(0,7))`或`ylim(0,7)`两者都给出错误。有人对我可能做错了什么有任何想法吗？谢谢

```
library(reshape2)
library(data.tool)
library(ggplot2)

    x =    structure(list(Series.Description = c("2012-07-27", "2012-10-26"
        ), `1.month` = c("0.08", "0.12"), `6.month` = c("0.15", "0.15"
        ), `1.year` = c("0.17", "0.19"), `2.year` = c("0.23", "0.30"), 
            `5.year` = c("0.59", "0.78"), `10.year` = c("1.47", "1.81"
            ), `30.year` = c("2.51", "2.94")), .Names = c("Series.Description", 
        "1.month", "6.month", "1.year", "2.year", "5.year", "10.year", 
        "30.year"), row.names = c(1L, 4L), class = "data.frame")

    # dates as # of days
    z=c(30,182,365,730,1825,3650,10950)
    names(x)[1]="date"
    names(x)[-1]=c(30,182,365,730,1825,3650,10950)
    x=melt(x,id.vars=c(1))
    x$variable=levels(x$variable)[x$variable]
       x$variable=as.numeric(x$variable)

    ggplot(data=x,aes(x=variable,y=value,group=date,linetype=date)) + 
      geom_line(colour="red") + geom_point(colour="red") + 
      scale_x_continuous(breaks=z,labels=c("1M","6M","1Y","2Y","3Y","5Y","10Y")) +
      scale_linetype_manual(values=c(2,1)) + 
      scale_y_continuous(limits=c(0,7)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T00:53:22.937

如果你这样做`str(x)`，你会看到发生了什么。

```
> str(x)
'data.frame':   14 obs. of  3 variables:
 $ date    : chr  "2012-07-27" "2012-10-26" "2012-07-27" "2012-10-26" ...
 $ variable: num  30 30 182 182 365 ...
 $ value   : chr  "0.08" "0.12" "0.15" "0.15" ... 
```

`value`是一个字符，而不是 mnel 在他的评论中所说的数字。因此，如果您将`value`列更改为数字数据类型，它至少应该绘图。它是否提供您想要的输出是另一个问题。下面的代码似乎对我有用。

```
library(reshape2)
library(ggplot2)

x =    structure(list(Series.Description = c("2012-07-27", "2012-10-26"
    ), `1.month` = c("0.08", "0.12"), `6.month` = c("0.15", "0.15"
    ), `1.year` = c("0.17", "0.19"), `2.year` = c("0.23", "0.30"),
        `5.year` = c("0.59", "0.78"), `10.year` = c("1.47", "1.81"
        ), `30.year` = c("2.51", "2.94")), .Names = c("Series.Description",
    "1.month", "6.month", "1.year", "2.year", "5.year", "10.year",
    "30.year"), row.names = c(1L, 4L), class = "data.frame")

# dates as # of days
z=c(30,182,365,730,1825,3650,10950)
names(x)[1]="date"
names(x)[-1]=c(30,182,365,730,1825,3650,10950)
x=melt(x,id.vars=c(1))
x$variable=levels(x$variable)[x$variable]
   x$variable=as.numeric(x$variable)
x$value <- as.numeric(x$value)

ggplot(data=x,aes(x=variable,y=value,group=date,linetype=date)) +
  geom_line(colour="red") + geom_point(colour="red") +
  scale_x_continuous(breaks=z,labels=c("1M","6M","1Y","2Y","3Y","5Y","10Y")) +
  scale_linetype_manual(values=c(2,1)) +
  scale_y_continuous(limits=c(0,7)) 
```

如果您实际上只想沿 x 轴定期添加标签，您可能应该尝试更改`scale_x_continuous`to`scale_x_discrete`并删除您摆弄的位`x$variable`：

```
x <- structure(list(Series.Description = c("2012-07-27", "2012-10-26"
    ), `1.month` = c("0.08", "0.12"), `6.month` = c("0.15", "0.15"
    ), `1.year` = c("0.17", "0.19"), `2.year` = c("0.23", "0.30"),
        `5.year` = c("0.59", "0.78"), `10.year` = c("1.47", "1.81"
        ), `30.year` = c("2.51", "2.94")), .Names = c("Series.Description",
    "1.month", "6.month", "1.year", "2.year", "5.year", "10.year",
    "30.year"), row.names = c(1L, 4L), class = "data.frame")

# dates as # of days
z <- c(30,182,365,730,1825,3650,10950)
names(x)[1] <- "date"
names(x)[-1] <- c(30,182,365,730,1825,3650,10950)
x <- melt(x, id.vars = c(1))
#x$variable=levels(x$variable)[x$variable]
#   x$variable=as.numeric(x$variable)
x$value <- as.numeric(x$value)

ggplot(data = x, aes(x = variable, y = value, group = date, linetype = date)) +
  geom_line(colour = "red") + geom_point(colour = "red") +
  scale_x_discrete(breaks = z, labels = c("1M","6M","1Y","2Y","3Y","5Y","10Y")) +
  scale_linetype_manual(values = c(2,1)) +
  scale_y_continuous(limits = c(0,7)) 
```

这给出了以下输出：

![阴谋](../Images/7a10ffa7960ef589aeb4000f58ab3014.png)

稍微离题，我可以指出这似乎是一个非常简单的问题，但由于您很难回答，因此尚未得到解答。为什么很难回答？

1.  您没有`library(ggplot)`在顶部包括 the 和 other 调用。
2.  您包含了未在初始代码中定义的函数。
3.  您在代码之后而不是之前定义了结构。
4.  您没有报告错误消息本身，这很有用。

所有这一切都意味着人们将您的代码副本复制并粘贴到他们的 R 安装中，并且在他们有机会看到您遇到的问题之前，它以多种方式失败。这里的人们**有**兴趣解决您的代码问题，但他们不想解决上述问题。

另一方面，如果你让人们更容易提供帮助，他们就会提供帮助。因此，在发布之前仔细查看您的代码，复制它，打开一个新的 R 会话，将其粘贴进去，看看它是否能解决您遇到的错误。如果是这样，那太好了，请继续并发布问题。如果没有，请清理您的代码并重试。这是另一个初学者的建议，他在 SO 上发布了一些不太好的问题。*您确实*尝试将一个最小的可重现示例放在一起这一事实表明您渴望将其做好，但在发布之前可能需要做更多的思考。[这](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)是一个值得重新审视的好问题。

# design-patterns - 高级记住属性模式

> ID：13687298
> 
> 赞同：2
> 
> 时间：2012-12-03T16:14:14.630
> 
> 标签：design-patterns, properties, wix

Rob Mensching 有一篇文章[“记住属性模式”](http://robmensching.com/blog/posts/2010/5/2/The-WiX-toolsets-Remember-Property-pattern)，它允许保护在命令行中指定的值不被 RegSearches 覆盖。在我们需要一些高级逻辑（例如默认值）之前，一切正常。

我扩展了该模式以使用自定义操作设置默认值（仍然可以正常工作）：

```
<Fragment>
  <Property Id="MY_PROPERTY">
    <RegistrySearch Id="MyProperty_RegSearch" Root="HKLM" Key="SOFTWARE\MyCompanyName\MyApplicationName" Name="MyProperty" Type="raw"></RegistrySearch>
  </Property>

  <DirectoryRef Id="INSTALLDIR">
    <Component Id="PermanentRegistryValues" Guid="MY_GUID" Permanent="yes">
      <RegistryKey Root="HKLM" Key="SOFTWARE\MyCompanyName\MyApplicationName" Action="create">
        <RegistryValue Name="MyProperty" Type="string" Value="[MY_PROPERTY]" />
      </RegistryKey>
    </Component>
  </DirectoryRef>

  <CustomAction Id="SaveCmd_MyProperty" Property="cmd_MyProperty" Value="[MY_PROPERTY]" Execute="firstSequence" />
  <CustomAction Id="RestoreCmd_MyProperty" Property="MY_PROPERTY" Value="[cmd_MyProperty]" Execute="firstSequence" />
  <CustomAction Id="SetDefault_MyProperty" Property="MY_PROPERTY" Value="MyPropertyDefaultValue" Execute="firstSequence" />

  <InstallUISequence>
    <Custom Action="SaveCmd_MyProperty" Before="AppSearch" />
    <Custom Action="RestoreCmd_MyProperty" After="AppSearch">cmd_MyProperty</Custom>
    <Custom Action="SetDefault_MyProperty" Before="ValidateProductID">NOT MY_PROPERTY</Custom>
  </InstallUISequence>

  <InstallExecuteSequence>
    <Custom Action="SaveCmd_MyProperty" Before="AppSearch" />
    <Custom Action="RestoreCmd_MyProperty" After="AppSearch">cmd_MyProperty</Custom>
    <Custom Action="SetDefault_MyProperty" Before="ValidateProductID">NOT MY_PROPERTY</Custom>
  </InstallExecuteSequence>
</Fragment> 
```

**但这里有一个问题：**

例如，如果我需要在 RadioButtonGroup 中使用 MyProperty，WIX（我认为它实际上是 MSI 限制）不允许声明此属性而没有像上面示例中设置的值。也无法设置一些虚拟值 - WIX 给出另一个编译错误：

`error LGHT0204: ICE34: dummy is not a valid default value for the RadioButtonGroup using property MyProperty. The value must be listed as an option in the RadioButtonGroup table.`

我还尝试向 RadiobuttonGroup 添加 'dummy' 选项，并将该选项放置在远远超出 RadioButtonGroup 控件边界的坐标 (1000;1000) 中。但缺点是使用键盘的用户可以选择该选项。此外，这绝对是一个不好的做法。

*所以我的问题是：* **如果我需要一组固定的允许值中的默认值，是否有可能以及如何实现记住属性模式？**

这是我正在谈论的代码的其余部分（希望对您有所帮助）：

```
<Property Id="MY_PROPERTY" Value="Value1">
  <RegistrySearch Id="MyProperty_RegSearch" Root="HKLM" Key="SOFTWARE\MyCompanyName\MyApplicationName" Name="MyProperty" Type="raw"></RegistrySearch>
</Property>

<Control Type="RadioButtonGroup" Property="MY_PROPERTY" Id="MyRbtn" Width="100" Height="159" X="34" Y="90">
  <RadioButtonGroup Property="MY_PROPERTY">
    <RadioButton Text="Value1" Value="Users" Width="100" Height="17" X="0" Y="0" />
    <RadioButton Text="Value2" Value="Roles" Width="100" Height="17" X="0" Y="45" />
  </RadioButtonGroup>
</Control> 
```

**PS：**我在 Restore 和 SetDefault 自定义操作上尝试了许多条件组合，但它们都不适用于所有必需的情况：在 UI 模式/静默模式下安装、升级、更改/修复。

我没有看到任何简单的方法来克服这个问题。唯一的可能性是涉及一个更多的辅助属性并将自定义操作的数量加倍（对于单个属性来说，这已经是很多 (3) 了）。

# sql - 如何通过一个连接字符串Sql和Vb.Net连接两个不同的数据库

> ID：13687303
> 
> 赞同：1
> 
> 时间：2012-12-03T16:14:26.490
> 
> 标签：sql, vb.net, visual-studio-2010, sql-server-2008, database-connection

我正在尝试在 Studio 2010/VB.Net 的窗体级别连接到数据库。我在 Sql 2008r2 中使用了两个不同的数据库。我使用一个数据库在表单加载事件（运行时）填充记录，当用户从该表单中选择他们的选择或任何修改时，应通过插入、更新、删除和保存命令将数据更新到其他数据库以供用户将来参考。

是否可以使用一个连接字符串连接两个不同的数据库？

我是否需要在下面提到的代码中添加两个数据库名称？

```
Imports System.Data.SqlClient

Dim con As New SqlClient.SqlConnection("data source=DATASOURCE;initial catalog=NAME OF DATABASE;Integrated Security=True")
Dim cmd As New SqlCommand()    
cmd.Connection = con    
con.Open()    
con.Close() 
```

或者

我应该在下面的某个地方使用两个数据库吗？

```
Imports System.Data.SqlClient

Public Class NEW_PERSONAL_INFORMATION

  Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

    Dim con As New SqlClient.SqlConnection("data source=ROOM310-40\SQLEXPRESS;initial catalog=DTIS;Integrated Security=True")

    Dim cmd As New SqlCommand()    
    cmd.Connection = con    
    con.Open()    
    con.Close()
  End Sub

End Class 
```

抱歉，如果我在简单的事情上寻求帮助或无法充分解释它。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:26:07.187

我不知道你在问什么，所以我会给出两个答案。

如果您尝试连接到**两个不同的服务器**，那么您将需要两个不同的连接字符串。实际上，您将需要两个不同`SqlConnection`的 s，并且您需要跟踪哪个连接是哪个。

```
Dim con1 As New SqlClient.SqlConnection("data source=ROOM310-40\SQLEXPRESS;initial catalog=DTIS;Integrated Security=True")
Dim con2 As New SqlClient.SqlConnection("data source=ROOM310-40-2\SQLEXPRESS;initial catalog=DTIS;Integrated Security=True") 
```

如果您正在谈论**同一服务器上的多个目录**，那么您不需要多个连接。您可以直接在查询中指定目录名称：

```
SELECT MyColumn FROM MyDatabase1.dbo.MyTable;
SELECT MyColumn FROM MyDatabase2.dbo.MyTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T11:46:16.200

Dim con As New SqlClient.SqlConnection("data source=DATASOURCE;initial catalog=NAME OF DATABASEm,Another Database Name,And SO ;Integrated Security=True")

# ios - 使用带有 FacebookSDK 的 iOS 5 中的 Facebook

> ID：13687308
> 
> 赞同：1
> 
> 时间：2012-12-03T16:14:51.680
> 
> 标签：ios, facebook, cocoa-touch

我想使用 FacebookSDK 使我的 iOS 5 应用程序的用户能够将我的应用程序中的内容发布到他们的 Facebook 页面上。所以我收集到我需要为此使用 Facebook 提供的 FacebookSDK。要使用 FacebookSDK，我需要一个应用 ID。但是，我的公司似乎只有一个 Facebook 页面。显然我无法使用 Facebook 页面创建应用程序 ID。

这个对吗？如果是，如何创建应用 ID？我不想将应用程序链接到个人，而是链接到我公司的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:26:44.020

您的公司应该在 facebook 上拥有一个帐户（而不是页面），以便为其分配应用程序 ID。

继续：[https](https://developers.facebook.com/) ://developers.facebook.com/ 。

使用您的公司帐户登录，单击**应用程序**选项卡，然后单击**创建新应用程序**

# objective-c - 暴力破解器的 Objective-C 代码块效率

> ID：13687309
> 
> 赞同：1
> 
> 时间：2012-12-03T16:15:00.753
> 
> 标签：objective-c, objective-c-blocks

就 CPU 和内存使用而言，Objective-C 中的 C 风格编码块的效率如何？我正在为 Objective-C 创建一个暴力破解库，我需要尽可能地优化它。在暴力破解器的每次迭代中都会调用正在使用的代码块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:51:03.890

与函数式语言一样，块的创建（闭包）可能需要在堆上进行分配（这在您复制块时肯定会发生，也许编译器可以在您只使用内部框架中的块时避免它）。

无论如何，如果这发生在您的循环之外，您只需付出一次代价。调用块的成本应该与调用 C++ 实例对象上的虚拟方法的成本大致相同（因为这几乎是相同的任务

# ios - CGAffineTransformMakeTranslation 导致 iOS6 上的视图旋转

> ID：13687310
> 
> 赞同：0
> 
> 时间：2012-12-03T16:15:03.730
> 
> 标签：ios, xcode, uiview, ios6, cgaffinetransform

我创建了一个空项目，该项目只允许横向方向，其情节提要仅包含 UIViewController 作为 rootViewController，其中心有一个按钮。

[![仅横向](../Images/76fc3ffc90e9c165ec60a9328d350011.png)](https://i.stack.imgur.com/MvgOu.png)

[![](../Images/3b71afcbfd0eeb78f984d62875119083.png)](https://i.stack.imgur.com/Raj1e.png)

```
- (IBAction)onClick:(UIButton *)sender {
    sender.superview.transform = CGAffineTransformMakeTranslation(-320, 0);
} 
```

预期的是，当单击该按钮时，视图向左移动了 320，但不幸的是，视图正在逆时针旋转并同时向左移动。似乎应用程序以某种方式认为它被设置为纵向视图，并考虑到这一点来翻译视图，这就是发生的事情：

[![旋转而不是向左移动](../Images/46223ac082d8a3c0c3975d8a64c0d3f5.png)](https://i.stack.imgur.com/4YePe.png)

我确定我在这里遗漏了一些东西，但我不知道它是什么。

我试图在 viewController 上定义方法`- (BOOL)shouldAutorotate`，`- (NSUInteger)supportedInterfaceOrientations`但它并没有改变这种行为。

任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:19:11.210

您的应用程序有一个`UIWindow`，其中包含您的根视图控制器的视图，其中包含按钮：

*   `UIWindow`
    *   你的根视图
        *   `UIButton`

您不了解的是，`UIWindow`通过对您的根应用旋转变换来旋转用户界面。当界面处于横向左方向时，查看视图层次结构：

```
(lldb) po [[UIApp keyWindow] recursiveDescription]
(id) $1 = 0x0922ee80 <UIWindow: 0x942c280; frame = (0 0; 768 1024); layer = <UIWindowLayer: 0x942c380>>
   | <UIView: 0x9432b30; frame = (20 0; 748 1024); transform = [0, -1, 1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0x9432be0>>
   |    | <UIRoundedRectButton: 0x942f7a0; frame = (476 352; 73 44); opaque = NO; layer = <CALayer: 0x942f8c0>>
   |    |    | <UIGroupTableViewCellBackground: 0x94300b0; frame = (0 0; 73 44); userInteractionEnabled = NO; layer = <CALayer: 0x9430180>>
   |    |    | <UIImageView: 0x9430af0; frame = (1 1; 71 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9431340>>
   |    |    | <UIButtonLabel: 0x94319c0; frame = (12 12; 49 19); text = 'Button'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9431d10>> 
```

看看`UIWindow`'s subview( `UIView: 0x942c380`) 是如何转换的`[0, -1, 1, 0, 0, 0]`？该变换将您的顶级视图逆时针旋转 90˚。如果您将设备（或模拟器）旋转到横向，您会看到变换变为`[0, 1, -1, 0, 0, 0]`：

```
(lldb) po [[UIApp keyWindow] recursiveDescription]
(id) $2 = 0x07436d90 <UIWindow: 0x942c280; frame = (0 0; 768 1024); layer = <UIWindowLayer: 0x942c380>>
   | <UIView: 0x9432b30; frame = (0 0; 748 1024); transform = [0, 1, -1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0x9432be0>>
   |    | <UIRoundedRectButton: 0x942f7a0; frame = (476 352; 73 44); opaque = NO; layer = <CALayer: 0x942f8c0>>
   |    |    | <UIGroupTableViewCellBackground: 0x94300b0; frame = (0 0; 73 44); userInteractionEnabled = NO; layer = <CALayer: 0x9430180>>
   |    |    | <UIImageView: 0x9430af0; frame = (1 1; 71 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9431340>>
   |    |    | <UIButtonLabel: 0x94319c0; frame = (12 12; 49 19); text = 'Button'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9431d10>> 
```

当你重置视图的变换时，你失去了旋转，所以视图恢复到它的“默认”旋转 0˚，也就是纵向旋转。

Adam Lockhart 的回答将暂时解决此问题，但如果用户旋转设备，`UIWindow`则会重置您的视图转换，从而丢失您应用的翻译。

处理此问题的正确方法是*不要*将您自己的转换应用于顶级视图。给你的顶层视图一个你可以转换的子视图，然后把你的按钮放在里面：

*   `UIWindow`
    *   你的根视图
        *   你的可变形视图
            *   `UIButton`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:45:34.023

您需要将转换应用于其现有转换。

```
- (IBAction)onClick:(UIButton *)sender {
    sender.superview.transform = CGAffineTransformTranslate(sender.superview.transform, -320, 0);
} 
```

# trigger.io - 未定义在 web nullObj 上运行的 Trigger.io 项目

> ID：13687313
> 
> 赞同：1
> 
> 时间：2012-12-03T16:15:16.620
> 
> 标签：trigger.io

当我尝试在 web all.js 上运行 trigger.io 项目时，会出现错误，例如“未捕获的 ReferenceError：未定义 nullObj”

我相信这会在渲染页面时导致一些不需要的结果。有没有计划解决这个问题？

# xslt - 目标：读取两个字符串，拆分 csv 并比较 xslt 1.0 中的值

> ID：13687314
> 
> 赞同：1
> 
> 时间：2012-12-03T16:15:19.183
> 
> 标签：xslt, xslt-1.0

我试图弄清楚这一点，但已经一周了。有人对如何进行有任何建议吗？

我想：在 splitOne 中的 foreach 条目（任何长度的逗号分隔字符串），与每个 splitTwo （任何长度的逗号分隔字符串）进行比较。如果有匹配，则显示节点。如果没有，不要。

如果这是 C#，这已经结束了。但是在 XSLT1.0（并且只有 XSLT 1.0）中，这对我来说是个大问题。

splitOne 是 OUTER LOOP，splitTwo 是 INNERLOOP。

我对 XSLT 以外的其他方法持开放态度，但最终产品必须是 XML。

- 蓝色的

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:exsl="http://exslt.org/common"
                extension-element-prefixes="exsl"
                version="1.0" >

  <xsl:param name="Groups_From_Logged_In_User"></xsl:param>
  <xsl:template match="/">
    <application>
      <xsl:apply-templates/>
    </application>
  </xsl:template>

  <xsl:template match="Module">
    <Module>
      <xsl:attribute name="Control">
        <xsl:value-of select="@Control"/>
      </xsl:attribute>
      <xsl:apply-templates select="Program"/>
    </Module>
  </xsl:template>

  <xsl:template match="Program">

    <xsl:call-template name="split">
      <xsl:with-param name="pText" select="@assocGroups"/>
    </xsl:call-template>
    <xsl:call-template name="splitTwo">
      <xsl:with-param name="pText" select="$Groups_From_Logged_In_User"/>
    </xsl:call-template>

    <!-- foreach splitOne, compare with each splitTwo. If there's a match, show the node. If not, don't.-->

    <Program>
      <xsl:attribute name="Control">
        <xsl:value-of select="@Control"/>
      </xsl:attribute>
      <xsl:attribute name="Value">
        <xsl:value-of select="@Value"/>
      </xsl:attribute>
      <xsl:attribute name="assocGroups">
        <xsl:value-of select="@assocGroups"/>
      </xsl:attribute>
    </Program>
    <!-- </xsl:if> -->
  </xsl:template>

  <xsl:template name="split">
    <xsl:param name="pText"/>
    <xsl:variable name="separator">,</xsl:variable>
    <xsl:choose>
      <xsl:when test="string-length($pText) = 0"/>
      <xsl:when test="contains($pText, $separator)">
        <splitOne>
          <xsl:value-of select="substring-before($pText, $separator)"/>
        </splitOne>
        <xsl:call-template name="split">
          <xsl:with-param name="pText" select="substring-after($pText, $separator)"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <splitOne>
          <xsl:value-of select="$pText"/>
        </splitOne>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template name="splitTwo">
    <xsl:param name="pText"/>
    <xsl:variable name="separator">,</xsl:variable>
    <xsl:choose>
      <xsl:when test="string-length($pText) = 0"/>
      <xsl:when test="contains($pText, $separator)">
        <splitTwo>
          <xsl:value-of select="substring-before($pText, $separator)"/>
        </splitTwo>
        <xsl:call-template name="splitTwo">
          <xsl:with-param name="pText" select="substring-after($pText, $separator)"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <splitTwo>
          <xsl:value-of select="$pText"/>
        </splitTwo>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

这是我正在运行的 XML。

```
<?xml version="1.0" encoding="utf-8" ?>
<application name="Home">
<Module Control="PayStation Setup">
    <Program Control="PSF0010 Facility Group Codes" Value="PSF0010 Facility Group Codes" assocGroups="1,2,3" />
    <Program Control="PSF0015 Facility Reps" Value="PSF0015 Facility Reps" assocGroups="1,2" />
    <Program Control="PSF0016 Facility Gasoline" Value="PSF0016 Facility Gasoline" assocGroups="1,2" />
    <Program Control="PSF0017 Facility Warranty" Value="PSF0017 Facility Warranty" assocGroups="1,2" />
    <Program Control="PSF0020 Facility Codes" Value="PSF0020 Facility Codes" assocGroups="1,2" />
    <Program Control="PSF0021 Facility Codes Inquiry" Value="PSF0021 Facility Codes Inquiry" assocGroups="1,2" />
    <Program Control="PSF0023 Facility VDN" Value="PSF0023 Facility VDN" assocGroups="1,2" />
    <Program Control="PSF0025 AAR Facilities" Value="PSF0025 Facility Facilities" assocGroups="1,2" />
    <Program Control="PSF0030 Club Codes" Value="PSF0030 Club Codes" assocGroups="1,2" />
    <Program Control="PSF0040 Additional Services" Value="PSF0040 Additional Services" assocGroups="1,2" />
    <Program Control="PSF0050 Additional Services Detail" Value="PSF0050 Additional Services Detail" assocGroups="1,2" />
    <Program Control="PSF0060 Start Miles (OM)" Value="PSF0060 Start Miles (OM)" assocGroups="1,2" />

  </Module>
</application> 
```

我只需要上面的程序节点，其中 assocGroup 中的值也在 $Groups_From_Logged_In_User

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:37:08.293

我会做一个身份转换，只`<Program>`专门处理元素。我会递归地拆分第一个 CSV 并查看它是否出现在`assocGroups`属性中。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:param name="Groups_From_Logged_In_User"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Program">
    <!-- We have to append a ',' to $Groups_From_Logged_In_User so that we still get 
         something back from substring-before(...,',') in the last iteration -->
    <xsl:param name="list" select="concat($Groups_From_Logged_In_User,',')"/>
    <!-- We also add commas around @assocGroups because we want to check for appearances of ",1," 
         rather than "1", as this would also be found in "11", which is not what we want to find -->
    <xsl:param name="assocGroups" select="concat(',',@assocGroups,',')"/>
    <xsl:choose>
      <!-- We we've chipped everything off the list, we quit -->
      <xsl:when test="$list=''"/>
      <!-- Now we chip off the first bit of the list, wrap it in commas and see whether it appears in $asscoGroups -->
      <xsl:when test="contains($assocGroups,concat(',',substring-before($list,','),','))">
        <xsl:copy-of select="."/>
      </xsl:when>
      <!-- If we didn't find anything, we drop the first value and recurse. -->
      <xsl:otherwise>
        <xsl:apply-templates select=".">
          <xsl:with-param name="list" select="substring-after($list,',')"/>
          <xsl:with-param name="assocGroups" select="$assocGroups"/>
        </xsl:apply-templates>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

# c# - C# 一个列表中的不同类对象

> ID：13687321
> 
> 赞同：7
> 
> 时间：2012-12-03T16:15:47.293
> 
> 标签：c#, list, generics, interface, polymorphism

我现在环顾四周以找到解决此问题的方法。我找到了几种可以解决它的方法，但老实说，我没有意识到哪些方法会被认为是“正确的”C# 或 OOP 解决方法。我的目标不仅是解决问题，而且是开发一套好的代码标准，我相当确定有一个标准的方法来处理这个问题。

假设我有 2 种类型的打印机硬件，它们各自的类和通信方式：PrinterType1、PrinterType2。

如果需要，我还希望以后能够添加另一种类型。抽象的一步，它们有很多共同点。作为示例，应该可以向它们中的每一个发送一个字符串。它们都有共同的变量和每个类独有的变量。（例如，一个通过 COM 端口进行通信并具有这样的对象，而另一个通过 TCP 进行通信并具有这样的对象）。

但是，我只想实现所有这些打印机的列表，并能够通过列表并在所有打印机上执行“发送（字符串消息）”，无论类型如何。我还想访问两个对象都相同的变量，例如“PrinterList[0].Name”，但是我也想在某些地方访问特定于对象本身的数据（例如在为一个对象设置 COM 端口名称而为另一个对象设置 IP/端口号的应用程序）。

所以，简而言之，就像：

共同点：

*   姓名
*   发送（）

特定于 PrinterType1：

*   港口

特定于 PrinterType2：

*   知识产权

例如，我希望对所有对象执行 Send()，而不管对象的类型和存在的数量。

我已经阅读了有关多态性、泛型、接口等的内容，但我想知道在我看来基本的问题通常如何在 C#（和/或一般的 OOP）中处理。

实际上，我确实尝试过创建一个基类，但对我来说似乎不太合适。例如，我在基类本身中没有使用“字符串发送（字符串消息）”函数。那么，当我从一开始就永远不会使用基类中的函数时，为什么我要在那里定义一个需要在派生类中重写的函数呢？

我真的很感谢任何答案。这里的人似乎知识渊博，这个地方早些时候为我提供了许多解决方案。现在我终于有一个帐户可以回答和投票了。

**编辑：**

另外解释一下，我还希望能够访问实际打印机类型的对象。例如 PrinterType1 中的 Port 变量，它是一个 SerialPort 对象。我想像这样访问它： `PrinterList[0].Port.Open()`

并可以访问底层端口的全部功能。同时，我想调用对不同对象以相同方式工作的通用函数（但具有不同的实现）：

```
foreach (printer in Printers)
    printer.Send(message) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T16:19:34.637

使用接口的伪示例。

```
public interface IPrinter
{
   void Send();
   string Name { get; }
}

public class PrinterType1 : IPrinter
{
  public void Send() { /* send logic here */ }
  public string Name { get { return "PrinterType1"; } }
}

public class PrinterType2 : IPrinter
{
  public void Send() { /* send logic here */ }
  public string Name { get { return "Printertype2"; } }

  public string IP { get { return "10.1.1.1"; } }
}

// ...
// then to use it
var printers = new List<IPrinter>();

printers.Add(new PrinterType1());
printers.Add(new PrinterType2());

foreach(var p in printers)
{
  p.Send();

  var p2 = p as PrinterType2;

  if(p2 != null) // it's a PrinterType2... cast succeeded
    Console.WriteLine(p2.IP);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:18:36.050

创建一个`IPrinterType`包含“常用”方法的接口（例如）并改用此接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:19:54.300

您正在寻找的是一个抽象基类，如下所示：

```
abstract class Printer
{
    public string Name { get; set; }
    public abstract string Send(string Message);
} 
```

然后，您从该类继承并根据需要实现您的 Send() 函数。

您也可以在此处使用接口。不同之处在于接口只能指定继承者必须实现的属性、方法和事件——它本身不实现任何代码。您使用哪种取决于最适合您的应用程序。您很可能会同时做这两件事（创建一个实现接口的抽象类）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T16:21:55.857

对于“例如，我在基类本身中没有使用“字符串发送（字符串消息）”函数的具体问题。那么，当我永远不会使用时，为什么我要在那里定义一个需要在派生类中覆盖的函数基类中的函数首先是什么？”

实际上没有必要在基类中实现它。

如果您的基类是抽象类，您可以简单地声明它，然后将其留给具体类来实现。

如果您不想提供任何具体的实现，那么您最好使用一个所有具体类都必须实现的接口来代替抽象类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T16:19:43.153

您的描述几乎就是设计的接口。将所有通用属性/方法放入其中并隐藏具体实现。我仍然建议使用基`Printer`类，因为显然会有类似的代码可以共享。

当涉及到您提到的更多定义的属性时，例如端口/IP，您必须知道您正在处理什么类型。此时，您可以将其转换为正确的类型。

# ios - Quartz Core 干扰运行单元测试

> ID：13687322
> 
> 赞同：1
> 
> 时间：2012-12-03T16:16:03.183
> 
> 标签：ios, xcode, unit-testing, quartz-graphics

我正在尝试在 Xcode 4.4 中尝试新的单元测试（无论如何对我来说都是新的，因为我以前使用过 OHUnit）。

我有几个要添加到目标的类，但其中一个引用了 QuartzCore。

显然我已经将我的单元测试目标链接到 QuartzCore 框架，但它无法运行：

```
 Undefined symbols for architecture armv7s:
  "_CGBitmapContextCreateImage", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGContextDrawImage", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGBitmapContextCreate", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGImageGetBitsPerComponent", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGImageRelease", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGContextSetShadowWithColor", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGContextRelease", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGRectZero", referenced from:
      -[UIImage(Additions) imageByScalingProportionallyToSize:] in UIImage+Additions.o
  "_CGColorSpaceRelease", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
  "_CGColorSpaceCreateDeviceRGB", referenced from:
      -[UIImage(Additions) imageWithShadow] in UIImage+Additions.o
   ld: symbol(s) not found for architecture armv7s
   clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的构建目标构建成功，但不是单元测试目标。

我尝试创建一个空白的新项目，并添加一个使用 QuartzCore 的文件，但我遇到了同样的问题。

还有其他人经历过这个或有任何有用的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:26:00.680

对于单元测试，您只想测试应用程序的逻辑，并尝试省略与 UI 或应用程序核心逻辑不需要的任何额外类/框架有关的任何内容。为此，您可能必须将一些逻辑移动到另一个文件，这只是所需的最少代码。基本上，不要在单元测试中导入石英核心/使用石英核心。将您正在测试的逻辑移动到另一个测试类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T12:07:36.103

Add the missing framework to your test bundle.

![enter image description here](../Images/41b2806278d28ab26e74b3f51e4b6afa.png)

As Kris mentioned - this may be a bad idea, but there are situations where you would actually want a core graphics for your unit tests.

# java - TreeMap / TreeSet 的要求

> ID：13687329
> 
> 赞同：1
> 
> 时间：2012-12-03T16:16:30.740
> 
> 标签：java, equals, hashcode, treemap, treeset

我正在探索最常见的Java集合的各种方法、操作和先决条件，我有点困惑。如果有人能澄清以下主题，我将不胜感激：

1)为了使 a和 a正常工作，方法`equals`和绝对必要的实现，就像在 中那样？不实施以前的方法有什么潜在影响？我目前正在使用 TreeMap 和 TreeSet （自定义类对象），到目前为止它们工作正常，只需实现及其方法，省略和.`hashCode``TreeSet``TreeMap``HashMap``Comparable``compareTo``equals``hashCode`

2）当在一个类`equals`甚至`hashCode`接口中实现`Comparable`时，是否所有派生类都可以在没有新定义和实现的情况下根据这些方法在集合中正常工作？我的印象是前者是正确的，因为给定的方法也属于派生类。什么最终是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:20:56.420

> 为了让 TreeSet 和 TreeMap 像在 HashMap 中一样正常工作，是否绝对需要方法 equals 和 hashCode 的实现？

不。

> 不实施以前的方法有什么潜在影响？

没有任何。

> 在类中执行equals、hashCode甚至接口Comparable时，是否所有派生类都可以根据这些方法在集合中正常工作而无需新的定义和实现？

是的，让“正常工作”并不像听起来那么简单。通常，您希望所有相同类型的键或元素。混合它们的类型很少是一个好主意。

对于 TreeMap 和 TreeSet，您只需要实现 Comparable + compareTo 或 Comparator + compare。

# regex - Scala regex replaceAllIn 与特殊字符完全匹配

> ID：13687331
> 
> 赞同：1
> 
> 时间：2012-12-03T16:16:44.197
> 
> 标签：regex, scala, replace

下面我试图用替换字符串 xxx 替换确切的搜索字符串。我有类似于 java 日志消息的字符串 original。如您所见，如果搜索字符串是“变量”，我可以成功地将其替换为 xxx，但是当搜索字符串为“variable.method()”或“variable.method2()”时，我无法替换它。我在这里做错了吗？

```
val original = """variable+ " is in " + variable.method() + " and " + variable.method2()"""
val replaceStr = "xxx"
val searchStr = "variable.method()" // This can change like in the output below
val variableExtracter = ("(?<=^|\\s|\\+)"+searchStr+"(?=\\s|$|\\+)").r
print("Search string : " + searchStr + "\n")
print("Original :" + original + "\n")
val formatted = variableExtracter.replaceAllIn(original, replaceStr)
print("Formatted :" + formatted + "\n")

Output:

Search string : variable //CORRECT OUTPUT
Original :variable+ " is in " + variable.method() + " and " + variable.method2()
Formatted :xxx+ " is in " + variable.method() + " and " + variable.method2()
---
Search string : variable.method()
Original :variable+ " is in " + variable.method() + " and " + variable.method2()
Formatted :variable+ " is in " + variable.method() + " and " + variable.method2()
//EXPECTED OUTPUT: variable+ " is in " + xxx + " and " + variable.method2()
---
Search string : variable.method2()
Original :variable+ " is in " + variable.method() + " and " + variable.method2()
Formatted :variable+ " is in " + variable.method() + " and " + variable.method2()
//EXPECTED OUTPUT:variable+ " is in " + variable.method() + " and " + xxx 
---
Search string : variable.method()
Original :variable.method()+ " has " + variable + " and " + variable.method2()
Formatted :variable.method()+ " has " + variable + " and " + variable.method2()
//EXPECTED OUTPUT:xxx+ " has " + variable + " and " + variable.method2() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:44:03.367

编辑：

您可以使用[Java 模式引用方法](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29) `Pattern.quote(searchStr)`用`\Q`and包装您的字符串`\E`。

```
scala> import java.util.regex.Pattern
import java.util.regex.Pattern

scala> val variableExtracter = ("(?<=^|\\s|\\+)"+Pattern.quote(searchStr)+"(?=\\s|$|\\+)").r
variableExtracter: scala.util.matching.Regex = (?<=^|\s|\+)\Qvariable.method2()\E(?=\s|$|\+)

scala> print("Search string : " + searchStr + "\n")
Search string : variable.method2()

scala> print("Original :" + original + "\n")
Original :variable+ " is in " + variable.method() + " and " + variable.method2()

scala> val formatted = variableExtracter.replaceAllIn(original, replaceStr)
formatted: String = variable+ " is in " + variable.method() + " and " + xxx

scala> print("Formatted :" + formatted + "\n")
Formatted :variable+ " is in " + variable.method() + " and " + xxx

scala> val searchStr = "variable.method()"
searchStr: java.lang.String = variable.method()

scala> val variableExtracter = ("(?<=^|\\s|\\+)"+Pattern.quote(searchStr)+"(?=\\s|$|\\+)").r
variableExtracter: scala.util.matching.Regex = (?<=^|\s|\+)\Qvariable.method()\E(?=\s|$|\+)

scala> val formatted = variableExtracter.replaceAllIn(original, replaceStr)
formatted: String = variable+ " is in " + xxx + " and " + variable.method2() 
```

# git - 将未提交的更改移动到新分支

> ID：13687334
> 
> 赞同：268
> 
> 时间：2012-12-03T16:16:50.990
> 
> 标签：git

> **可能重复：**
> [将现有的、未提交的工作移动到 Git 中的新分支](https://stackoverflow.com/questions/1394797/move-existing-uncommited-work-to-a-new-branch-in-git)

我在分支 ABC 中有一些代码。

在对其进行一些更改后，我想将所有未提交的更改移动到新分支 ABC_1 上的提交中。

请问这怎么做？

* * *

## 回答 #1

> 赞同：455
> 
> 时间：2012-12-03T16:18:11.157

只需创建一个新分支：

```
git checkout -b newBranch 
```

如果你这样做`git status`了，你会看到代码的状态没有改变，你可以将它提交到新的分支。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-03T16:17:53.173

只是搬到新的分支。未提交的更改将被延续。

```
git checkout -b ABC_1

git commit -m <message> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-03T16:18:11.140

只需使用`git checkout -b ABC_1`;创建一个新分支 您未提交的更改将被保留，然后您将它们提交到该分支。

# android - 带有按钮的自定义 Listview 的 EventListeners

> ID：13687344
> 
> 赞同：1
> 
> 时间：2012-12-03T16:17:14.633
> 
> 标签：android, android-listview, android-arrayadapter

我已经花了很多时间试图解决这个问题，我已经看到了很多关于这个主题的其他 StackOverflow 帖子，但我找不到适合我的解决方案。

我有一个 ListActivity 和一个自定义 ArrayAdapter。我的列表视图中有几个按钮，例如删除按钮。但是，只有在单击列表的 TextView 时才会调用 onItemClick 方法。我可以将 OnClickListeners 添加到按钮，但是我遇到的问题是我不知道按钮所属元素的位置。我知道我可以为每个按钮设置标签，但必须有更好的方法！

这是我的适配器：

```
 private class ItemListAdapter extends ArrayAdapter<Item> {
    private ArrayList<Item> items;
    private int countItems = 0;

    public ItemListAdapter(Context ctx, int textViewResourceId, ArrayList<Item> itemList){
        super(ctx, textViewResourceId, itemList);
        this.items = itemList;  
        this.countItems = itemList.size();
    }

    public int getCount(){
        return countItems;
    }

    public Item getItem(int pos){
        return itemList.get(pos);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        //Get the current list item
        final Item currentItem = itemList.get(position);

        if (row == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = vi.inflate(R.layout.itemlist_item_row, null);
        }
        Item item = items.get(position);
        if (item != null){
            TextView bt = (TextView) row.findViewById(R.id.bt_itemlist_item);
            if (bt != null){
                bt.setText(item.getName());
            }
        }
        return row;
    }

} 
```

如果有人能告诉我最好的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:26:14.443

设置`OnClickListeners`for `Buttons`in `getView()`，您将获得职位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:26:50.260

就像您执行 bt.setText(item.getName()) 一样，为什么不获取对删除按钮的引用，然后为其设置点击监听器。您将在 getView 方法中添加 on click 侦听器，您将自动获取行的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:27:08.043

这是一种方法。设置视图的标签很常见，但如果您不想设置许多视图的标签，只需使用父视图（如果可能）。对于`row`您返回的变量，将标签设置为您的 Item, `currentItem`。否则，只需设置每个可点击视图的标签。

对于每个单击操作，您实际上可以使用 1 个单击侦听器实例，并且只需检查视图父级的标记。例如，`View.OnClickListener`为布局中的每个删除按钮创建 1 个实例。在该`onClick()`方法中，查看父View的标签，获取`Item`应该删除的实例。

```
private class ItemListAdapter extends ArrayAdapter<Item>
{

    View.OnClickListener deleteListener = new View.OnClickListener()
    {
        @Override
        public void onClick(View view)
        {
            View parent = (View)view.getParent();
            Item item = (Item)parent.getTag();
            //Do something with "item"
        }
    };

    //Remainder omitted

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {

        //Remainder omitted
        row.setTag(currentItem);
        View deleteButton; //find this somewhere in your layout
        deleteButton.setOnClickListener(deleteListener);

        return row;
    }

} 
```

# java - Java HashMap 获取方法空指针异常

> ID：13687346
> 
> 赞同：26
> 
> 时间：2012-12-03T16:17:17.627
> 
> 标签：java, nullpointerexception, hashmap

我的代码类似于以下内容：

```
public class A {
        private HashMap<Character, Boolean> myMap;

        public A() {
            myMap = new HashMap<Character, Boolean>();
            String mychars = "asdfzxcvqwer";
            for (char c : mychars.toCharArray())
                myMap.put(c, true);
        }

        public void doo(String input) {
            StringBuilder output = new StringBuilder();
            for (char c : input.toCharArray()) {
                if (myMap.get(c))
                    output.append(c);
            }
        }
        //...
        //...
    } 
```

为什么我在该行收到空指针异常 (NPE) `if (myMap.get(c))`？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-03T16:19:53.590

如果`c`不包含在 中`myMap`，则返回`null`，不能将其拆箱为`boolean`.

尝试 ：

```
Boolean b = myMap.get(c);
if(b != null && b){
... 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-03T16:28:10.803

如果`myMap`不包含匹配的键`c`，则`myMap.get(c)`返回 null。在这种情况下，当 JVM 将它期望的`java.lang.Boolean`对象拆箱到`boolean`原语中以执行条件时，它会找到一个空对象并因此抛出一个`java.lang.NullPointerException`.

以下块等同于您在示例中的内容，应该更容易理解您为什么会有`NullPointerException`：

```
if (((Boolean) myMap.get(c)).booleanValue()) 
```

我会将您的原始条件改写为：

```
if ( myMap.containsKey(c) ) 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-03T16:30:55.900

改变

```
if ( myMap.get(c) ) 
```

至

```
if ( myMap.containsKey(c) && myMap.get(c)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-03T16:30:19.050

改变这个

```
for ( char c : input.toCharArray() )
{
  if ( myMap.get(c) )
     output.append(c);
} 
```

为了这

```
for ( char c : input.toCharArray() )
{
  if ( myMap.containsKey(c) )
     output.append(c);
} 
```

将利用地图定义的方法来检查地图上是否注册了某个键。我将保持`for`原样，因为您似乎想检查一组键。

`myMap.get(c)`返回与该键关联的值，或者`null`如果该键未注册。

作为旁注，请记住，如果将此方法与自定义对象一起使用，则必须重新定义`hashcode`and`equals`方法。

建议：我只是出于一个遥远的想法提出这个建议，如果它不是对您的代码的正确解释，请忽略它。如果您的地图仅包含一个布尔值来确定是否“包含”某个值，我强烈建议您使用 a`HashSet`代替，因为地图在这种情况下没有任何意义。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-03T16:19:35.033

`Character`如果map中没有必需的实体，则`map.get(key)`返回`null`并在内部`if`语句中导致`NullPointerException`抛出。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-03T16:22:52.163

黑暗中的刺伤：你的地图中是否有分配给特定角色的条目`c`？如果没有，Java 可能会尝试拆箱空值...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-03T16:25:56.873

您的代码非常混乱。

*   do 是保留关键字，请勿将其用作方法名称。
*   'if' 表达式必须返回一个布尔值，而不是 null。
*   myMap 的初始化写不正确

这是一个工作版本：

```
import java.util.HashMap;

public class A {
    private HashMap<Character, Boolean> myMap;

    public A() {
        this.myMap = new HashMap<Character, Boolean>();
        String mychars = "asdfzxcvqwer";
        for ( char c : mychars.toCharArray() )
            myMap.put(c, true);
    }

    public String execute(String input) {
        StringBuilder output = new StringBuilder();
        for ( char c : input.toCharArray() )
        {
            if ( this.myMap.get(c) != null )
                output.append(c);
        }
        return output.toString();
    }

    public static void main(String[] args) {
        A test = new A();
        test.execute("abc");
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-05T22:29:30.757

或者，您可以使用[apache.commons.lang3](https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/BooleanUtils.html)来检查`Boolean`和处理`null`检查`BooleanUtils.isTrue(c)`

### 解释：

NPE 究竟是在哪里被抛出，即何时`get()`在地图上被调用或何时`if(...)`被执行，存在一个普遍的混淆。

您的地图声明为：

```
myMap = new HashMap<Character, Boolean>(); 
```

其中包含一个原始`boolean`包装类`Boolean`作为映射条目的值。

当你这样做时：

```
if (myMap.get(c)) 
```

`myMap`这是一个在调用时`HashMap`返回，因为映射中不存在某个键。然后将其拆箱为原始状态，这就是**NPE**被抛出的地方，而不是当您自己调用时。`null``get()``null``boolean`**`get()`**

 *** * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-05T21:00:55.083

就我而言，我只是用一个 catch 块处理它，如下所示：

```
@PostMapping("/findAllLastExecutedApi")
    public ResponseEntity<Map<String,List<Results>>>findAllLastExecuted(@RequestBody Map<String,String> uuids) {
        try{ 
            // NPE is triggered here : 
            if(uuids.get("demoId").isEmpty()) {
                Map<String,List<Results>> badResults= Collections.singletonMap("Invalid demoId provided, is empty",null);
                log.error("Invalid demoId provided, is empty {}",uuids);
                return  ResponseEntity.ok(badResults);
            }

            Map<String,List<Results>> results =
                    this.service.findAll(uuids.get("demoId"));
            return ResponseEntity.ok(results);

        }catch (NullPointerException e){
            log.error("Invalid demoId provided, is null {}",uuids);
            throw new NullPointerException("Invalid demoId provided , is null");
        }
    } 
```**

# c# - 属性和多个元素的xmlserializer

> ID：13687358
> 
> 赞同：0
> 
> 时间：2012-12-03T16:18:18.123
> 
> 标签：c#, xml

我如何序列化以下结构使用`XmlSerializer`

1.  只有 1 个实例`Product`

2.  只有 1 个实例`Updates`

3.  `Updates`可以包含多个`Item`

4.  `Item`可以包含多个`Artifact`

XML:

```
<Product>
    <Cycle Type = "x0446" />
    <Brand Type = "z773g" Include="All" />
    <Updates>
        <Item Name = "Foo">
            <Artifact Kind="6" Action="3" />
        </Item>
        <Item Name = "Bar">
            <Artifact Kind="6" Action="3" />
            <Artifact Kind="53" Action="3" />
        </Item>
    </Updates>
</Product> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:33:45.120

您可以在数组或列表属性上使用 [XmlElement] 属性，并且 XmlSerializer 足够聪明，可以了解这一点并将它们一个接一个地列出在您的 xml 中。

**或者**

对于更复杂的结构，您可以使用 Visual Studio XML-to-class 生成器： - 单击 Windows 中的开始菜单 - 单击“所有程序” - 找到 Microsoft Visual Studio 文件夹并单击它 - 单击 Visual Studio Tools 文件夹 - 单击开发人员命令提示符。 .. - 假设您的 xml 保存在 C:\test\Sample.xml - 键入“xsd C:\test\Sample.xml /out:C:\test”这应该会通知您创建了一个模式。- 键入“xsd C:\test\Sample.xsd /c /out:C:\test”，这应该会通知您为您创建了一个 .cs 类，将其复制到您的解决方案中，可能会更改命名空间（或使用 xsd 命令参数） - 创建的类可能命名奇怪并且更难使用，如果您有复杂的 XML 或模式，请使用此方法。- 您可以使用部分类扩展生成的代码（查找），不要'

--

以下是直接代码（未生成）的样子：

```
public class Product{
    [XmlElement]
    public Cycle Cycle {get;set;}

    [XmlElement]
    public Brand Brand {get;set;}

    [XmlElement]
    public Updates Updates {get;set;}
}

public class Updates{
    [XmlElement("Item")]
    public UpdateItem[] Items{get;set;}
}

public class UpdateItem{ 
    [XmlAttribute]
    public string Name{get;set;} // use [XmlAttribute] in Cycle, Brand and Artifact classes

    [XmlElement("Artifact")]
    public Artifact[] Artifact{get;set;} 
}
//.... etc 
```

这是生成的代码的样子：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class ProductUpdatesItem {

private ProductUpdatesItemArtifact[] artifactField;

private string nameField;

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute("Artifact", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public ProductUpdatesItemArtifact[] Artifact {
    get {
        return this.artifactField;
    }
    set {
        this.artifactField = value;
    }
} 
```

[/代码]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:48:04.403

您可以[使用属性控制 xml 序列化](http://msdn.microsoft.com/en-us/library/2baksw0z%28v=vs.71%29.aspx)。使用[`XmlAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx)属性，将默认序列化作为元素更改为序列化作为属性。使用[`XmlElement`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)属性将列表序列化为 xml 元素的平面序列。

```
public class Product
{
    public Cycle Cycle { get; set; }
    public Brand Brand { get; set; }
    public List<Item> Updates { get; set; }
}

public class Cycle
{
    [XmlAttribute("Type")]
    public string Type { get; set; }    
}

public class Brand
{
    [XmlAttribute("Type")]
    public string Type { get; set; }
    [XmlAttribute("Include")]
    public string Include { get; set; }
}

public class Item
{
    [XmlAttribute("Name")]
    public string Name { get; set; }
    [XmlElement("Artifact")]
    public List<Artifact> Artifacts { get; set; }
}

public class Artifact
{
    [XmlAttribute("Kind")]
    public int Kind { get; set; }
    [XmlAttribute("Action")]
    public int Action { get; set; }
} 
```

序列化：

```
Product p = new Product()
{
    Cycle = new Cycle() { Type = "x0446" },
    Brand = new Brand() { Type = "z773g", Include = "All" },
    Updates = new List<Item>()
    {
        new Item() { Name = "Foo", 
                     Artifacts = new List<Artifact>() {
                        new Artifact() { Action = 3, Kind = 6 }
                    }
        },
        new Item() { Name = "Bar", 
                     Artifacts = new List<Artifact>() {
                        new Artifact() { Action = 3, Kind = 6 },
                        new Artifact() { Action = 3, Kind = 53 },
                    }
        }
    }
};

XmlSerializer serializer = new XmlSerializer(typeof(Product));
Stream stream = new MemoryStream(); // use whatever you need
serializer.Serialize(stream, p); 
```

结果：

```
<Product>
    <Cycle Type = "x0446" />
    <Brand Type = "z773g" Include="All" />
    <Updates>
        <Item Name = "Foo">
            <Artifact Kind="6" Action="3" />
        </Item>
        <Item Name = "Bar">
            <Artifact Kind="6" Action="3" />
            <Artifact Kind="53" Action="3" />
        </Item>
    </Updates>
</Product> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T17:34:34.670

如果您有此结构的 XML 模式（或可以生成一个） - 我的首选是使用 XSD.exe 来生成类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:43:53.673

这里有一些代码（错过了一个属性）

```
using System;
using System.Xml;
using System.Xml.Serialization;
using System.Collections.Generic;

[Serializable]
[XmlRoot("Product")]
public class Product
{
    [XmlElement("Cycle")]
    public Cycle Cycle { get; set; }

    [XmlElement("Updates")]
    public Updates Updates { get; set; }

    public Product()
    {
        Cycle = new Cycle();
        Updates = new Updates();
    }
}

[Serializable]
public class Cycle
{
    [XmlAttribute("Type")]
    public string Type { get; set; }
}

[Serializable]
public class Updates
{
    [XmlElement("Item")]
    public List<Item> Items { get; set; }

    public Updates()
    {
        Items = new List<Item>();
    }
}

[Serializable]
public class Item
{
    [XmlElement("Artifact", typeof(Artifact))]
    public List<Artifact> Artifacts { get; set; }

    public Item()
    {
        Artifacts = new List<Artifact>();
    }
}

[Serializable]
public class Artifact
{
    [XmlAttribute("Kind")]
    public int Kind { get; set; }
} 
```

这里是序列化的代码

```
using System;
using System.Xml;
using System.Xml.Serialization;
using System.Collections.Generic;
using System.IO;
using System.Text;

    private static string SerializeMe(object o)
    {
        XmlSerializer s = new XmlSerializer(o.GetType());

        MemoryStream stream = new MemoryStream();

        XmlWriter writer = new XmlTextWriter(stream, Encoding.Default);

        s.Serialize(writer, o);

        stream.Flush();

        stream.Seek(0, SeekOrigin.Begin);

        return Encoding.Default.GetString(stream.ToArray());
    } 
```

现在这里是控制台上的测试代码

```
 static void Main(string[] args)
    {
        Product p = new Product();

        p.Cycle.Type = "whatever";

        Item i = new Item();
        i.Artifacts.Add(new Artifact{Kind = 45});

        p.Updates.Items.Add(i);

        Console.WriteLine(SerializeMe(p));

        Console.ReadLine();
    } 
```

希望这可以帮助 ：）

# jquery - 通过 url 中的锚点保持切换的 div 打开

> ID：13687360
> 
> 赞同：0
> 
> 时间：2012-12-03T16:18:25.620
> 
> 标签：jquery

我有以下代码可以很好地打开/关闭/切换一系列 div。

```
$("a").click(function(){
 var myelement = $(this).attr("href")
 $(myelement).slideToggle("slow");
 $(".toggle:visible").not(myelement).hide();

}); 
```

我想要的是，如果页面刷新或使用锚链接保存，div 保持打开状态。IE。如果 url 是，财务 div 应该保持打开状态：

```
http://mywebsite/page#finance 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:42:59.570

```
var h = window.location.hash;
$("#" + h).show(); 
```

这假设您的 div 的 id 是 URL 哈希中的值。

# oop - 哪个是更好的设计？

> ID：13687361
> 
> 赞同：2
> 
> 时间：2012-12-03T16:18:25.973
> 
> 标签：oop, design-patterns

我不想创建`Actors`与`World`. 我正在考虑使用以下两个代码片段之一。其中哪一个被认为是更好的设计？更好的意思是，对于源代码维护者来说更具可读性，对于只是阅读代码的人来说更具可读性，对于未来的调整更加灵活，等等。

如果已经问过类似的问题，我很抱歉，但我真的不知道在 OOP 中这样的概念是什么。

选项 A：

```
// declaration:
class World {
    public:
        RegisterActor(Actor* a);
};

class Actor {
    public:
        Actor(World& w) {
            w.RegisterActor(this);
        }
        foo();
};

// usage:
World myWorld;
Actor myActor(myWorld);
myActor.foo(); 
```

选项 B：

```
// delcaration:
class Actor;

class World {
    public:
        Actor& CreateActor();
}

class Actor {
    friend class World;
    public:
        foo();
    private:
        Actor();
};

// usage:
World myWorld;
Actor& myActor = myWorld.CreateActor();
myActor.foo(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:37:24.343

像往常一样，如果没有完整的使用上下文很难判断，但肯定有一些优点和缺点需要评估：

**在第一种情况下**

*   虽然世界是针对`Actor`类进行编程的，但它可以很容易地解耦以针对[接口](https://stackoverflow.com/questions/2866987/what-is-the-definition-of-interface-in-object-oriented-programming)或[合同](http://en.wikipedia.org/wiki/Design_by_contract)工作。正如您现在的代码一样，您可以传递`Actor`' 的子类，而世界永远不会知道。这样做的好处是可以降低世界与其参与者之间的耦合。
*   您正在将创建演员的责任从世界转移到世界的客户身上。这可能有助于`World`类实现[SRP](http://www.oodesign.com/single-responsibility-principle.html)，使运行单元测试更容易（例如传递模拟对象）并且对客户端更灵活。另一方面，这移动了在客户端上创建（并最终配置）actor 实例的工作。

在第二种情况下，您会得到第一种情况的相反利弊；世界与actor紧密耦合，使得配置和测试变得更加困难，但是您需要您的客户对创建actor的过程了解较少。

您可以考虑的另一种选择是使用[构建器](http://www.oodesign.com/builder-pattern.html)（如果`World`创建过程很复杂）或[工厂](http://www.oodesign.com/factory-pattern.html)（如果您有不同的配置来创建不同的子类）。这可以帮助您保持您的`World`类与参与者分离，同时利用客户端创建它的复杂性。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:41:09.283

Does an Actor only ever belong to exactly one world at all times, and always the same one? Option B fits the situation best. It limits the visibility of the Actor constructor and uses a factory method to construct instances. That makes fewer commitments to clients of your code, and that means you have more flexibility to change the implementation of Actor. It also fits the semantics of the domain pretty well - you use your World to make Actor.

However, if an Actor could change worlds, or be registered to more than one world at the same time, then you're heading towards Option A.

It all depends on how your references need to end up.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:40:59.113

我在两者中真正看到的唯一区别是，在 B 中，演员与世界联系在一起。它与 A 中的世界无关。如果一个演员需要存在于一个世界的上下文之外，或者如果一个演员可以存在于多个世界中，我会投票给 A。

就未来的可扩展性而言，您可能需要考虑将参与者基类更改为接口。然后任何人都可以添加自己的演员类，而无需从您的基础继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:36:30.707

*   首先想到：[工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)，当创建一个对象很复杂时，将定义另一个类来处理这个工作。

*   第二：如果创建很容易，那么它可以是一个简单的构造函数，然后通过调用方法来设置它的一个属性。

*   第三：如果存在一个[聚合对象](http://en.wikipedia.org/wiki/Domain-driven_design#Building_blocks_of_DDD)，可能是世界，那么你可以让他为你创建一个演员，这取决于你的领域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T16:28:54.250

当对哪个类应该包含责任有疑问时，我建议您根据[通用责任分配软件模式（GRASP）来决定](http://javaobsession.wordpress.com/grasp/)

# javascript - 为什么 JS 框架使用内联样式而不是 CSS 进行布局

> ID：13687363
> 
> 赞同：0
> 
> 时间：2012-12-03T16:18:26.840
> 
> 标签：javascript, css, extjs, dojo

查看各种 JS 框架（Dojo、Ext.JS 和其他），我观察到布局通常（如果不总是）通过直接 DOM 操作完成，例如在给定 DOM 元素上设置内联样式。这与 CSS 试图瞄准的目标形成鲜明对比，在我看来，CSS 通常只是用来“美化”此类场景、指定颜色等。

我想了解为什么会做出这种选择，甚至可能从历史的角度来看，以及您为页面/Web 应用程序的布局部分选择的 CSS 或内联样式。

在什么情况下，你会通过样式表只使用 CSS 而不使用 js dom 操作？什么情况会适得其反？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:19:51.370

因为他们大部分使用数学来定位事物，而 CSS Calc 并没有得到很好的支持。

例如，在 jQuery UI 中，他们使用数学来确定对话框应该在屏幕上的哪个位置或如何拆分列。

CSS 正在赶上[Flexbox](http://net.tutsplus.com/tutorials/html-css-techniques/an-introduction-to-css-flexbox/)和[Calc](https://developer.mozilla.org/en-US/docs/CSS/calc)之类的东西，但是您提到的 JS 框架通常支持非常旧的浏览器，例如 IE6，它们永远不会获得这些 CSS 更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:22:14.440

这种行为有不同的原因。

1.  如果您不想使用直接 DOM 操作，则需要将新规则写入物理 css 文件，然后将该文件作为页面的依赖项加载。太复杂了，完全不需要。

2.  内联样式不是 CSS？

3.  通过前端脚本进行的操作必须是内联的，以确保新样式的排名高于原始定义的样式。

# c++ - 在 for 循环中第一次后跳过 getline

> ID：13687376
> 
> 赞同：0
> 
> 时间：2012-12-03T16:18:48.917
> 
> 标签：c++, for-loop, getline

> **可能重复：**
> [读取文件 C++ 时使用 getline 和 >>](https://stackoverflow.com/questions/11039323/use-getline-and-when-read-file-c)

```
struct collection
{
    string title, author, isbn;
    float price;
    bool availability;
    int borrow;
};
void read1(member a[]);
void read2(collection b[]);
int main()
{
    member a[20];
    collection b[100];
    read1(a);
    read2(b);

} 
```

这是我正在尝试运行的功能。它第一次运行良好，但第二次围绕 getline 没有阅读书名并跳过它。然后它稍后会在第二个 getline 中读取它。

```
void read2(collection b[])
{
ifstream database;
string n1;
cout << "Enter second input file name: ";
getline(cin, n1);
database.open(n1.c_str());
if(database.fail())
{
    "Bad file. \n" ;
}
else
{
    for(int j=0;!database.eof();j++)
    {
        getline(database, b[j].title);
        cout << b[j].title<<endl;
        getline(database,b[j].author);
        cout<<b[j].author<<endl;
        database>>b[j].isbn;
        cout<<b[j].isbn<<endl;
        database>>b[j].price;
        cout<<b[j].price<<endl;
        database>>b[j].availability;
        cout<<b[j].availability<<endl;
        database>>b[j].borrow;
        cout<<b[j].borrow;
    }
    database.close();
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:40:54.573

首先，快速检查失败或坏位是否打开，因为当失败位打开时，它可能会阻止文件流进行读取操作。您可能会错误地尝试将字符串读入整数，例如引发失败位。

# php - zend form post如何获取变量

> ID：13687378
> 
> 赞同：0
> 
> 时间：2012-12-03T16:19:01.493
> 
> 标签：php, zend-framework, centos

我有一个使用 xend 框架的 php 表单。我无法获得单选按钮的值

这就是我在控制器中所拥有的

```
if ($this->getRequest()->isXmlHttpRequest()) {
            if ($this->getRequest()->isPost()) {
                // check session for line and dataset function
                // update queue
                $data = $this->_request->getParams();
        print_r($_POST['locations']);
        exit();
                $this->submitAction();
            }
        } 
```

**形式**

```
class Application_Form_LineData extends Zend_Form
{
    private $lineId;
    private $dataId;
    private $name;

    public function init()
    {
        /* Form Elements & Other Definitions Here ... */
    }

    public $elementDecoration = array(
            'ViewHelper',
            //'Description',
            //'Errors',
            array(array('data'=>'HtmlTag'), array('tag' => 'td')),
            //array('Label', array('tag' => 'td')),
            //array('Errors'),
            //array(array('row'=>'HtmlTag'),array('tag'=>'tr'))
    );

    public $elementRowDecoration = array(
            'ViewHelper',
            array(array('row' => 'HtmlTag'), array('tag' => 'tr'))
    );

    public $elementTableDecoration = array(
            'ViewHelper',
            array(array('data' => 'HtmlTag'), array('tag' => 'td')),
            array(array('row' => 'HtmlTag'), array('tag' => 'tr'))
    );

    public $formDecoration = array(
            'FormElements',
            array(array('data'=>'HtmlTag'), array('tag'=>'table', 'class'=>'forms')),
            'Form'
    );

    public function setLineId($lineId)
    {
        $this->lineId = $lineId;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function setDataId($dataId)
    {
        $this->dataId = $dataId;
    }

    public function startform($entries)
    {
        $this->setMethod('post') ->setAttrib('enctype', 'multipart/form-data');

        $count = count($entries);
        for($i=0;$i<$count;$i++){

            $this->addElement('checkbox', 'l_'.$entries[$i]['PGA_Id'], array(
                    'decorators' => $this->elementDecoration,
                    'onclick' => 'updateQueue('.$entries[$i]['PGA_Id'].',false)',

            ));

            // Data sets for each line

            $countData = count($entries[$i]['Data_Set']);
            for($x=0;$x<$countData;$x++){

                $this->addElement('checkbox', 'ds_'.$entries[$i]['Data_Set'][$x]['PGA_Id'], array(
                        'id' => 'ds_'.$entries[$i]['Data_Set'][$x]['PGA_Id'],
                        'decorators' => $this->elementDecoration,
                        'class' => 'line_'.$entries[$i]['PGA_Id'],
                        'onclick' => 'updateQueue('.$entries[$i]['PGA_Id'].','.$entries[$i]['Data_Set'][$x]['PGA_Id'].')',
                        'name' => 'line_'.$entries[$i]['PGA_Id'],

                ));
            }

        }

        $this->addElement('radio', 'locations', array(
                //'label'    => 'Download to: ',
                'multiOptions' => array(
                        'woking'  => 'Woking',
                        'cairo'  => 'Cairo'
                ),
                'decorators' => $this->elementDecoration
        ));

        $this->addElement('submit', 'submit', array(
                'ignore'   => true,
                'label'    => 'Add to queue',
                'decorators' => $this->elementDecoration
        ));

        return $this;
    }
} 
```

我想获取单选框位置的值。

我的观点

```
<script type="text/javascript">
<!--
$(function() {
    showhide("dataqueue");
});
//-->
</script>

    <!-- display queue for project -->
    <div id="dataqueue">
        <?php echo $this->dataQueueTable($this->queue,$this->qstatus); ?>
    </div>

    <div id="datalist">
    <form method="post">
    <table class=table>
        <tr>
            <!-- <th class="tdid">ID</th> -->
            <th class="tdname">Name</th>
            <!-- <th>Path</th> -->
            <th>Add to Queue</th>
        </tr>
        <?php

        foreach ($this->entries as $entry){ ?>
        <tr class=parent id=<?=$entry['PGA_Id'] ?>>
            <!-- <td><?php echo $entry['PGA_Id'] ?></td> -->
            <td><?php echo $entry['PGA_Name'] ?>    </td>

            <?php //echo $this->form->getElement('l_'.$entry['PGA_Id']) ?>  

            <?php   
            foreach($entry['Data_Set'] as $data){
            ?>
            <tr class=child-<?=$entry['PGA_Id'] ?>>
            <td colspan="3">
            <table class="tdatasets">
                <tr>
                    <!-- <td class="tdid"><?php echo $data['PGA_Id'] ;?></td> -->
                    <td class="subtdname"><?php echo $data['PGA_Name'] ; ?></td>
                    <!-- <td><?php echo $data['PGA_Path'] ; ?></td> -->
                    <?php echo $this->form->getElement('ds_'.$data['PGA_Id']) ?>
                    <td><?php echo $data['size']; ?></td>   
                </tr>
            </table>
            </td>
            </tr>
            <?php } ?>

        </tr>
        <?php } ?>
        <tr>
            <td style="">Download to:</td>
            <?php echo $this->form->getElement('locations') ?>
            <?php echo $this->form->getElement('submit') ?>
        </tr>
    </table>
    </form>
    </div>

    <div id="notification">
        <?php echo $this->notificationTable($this->notification,$this->notificationform); ?>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:46:18.157

```
$this->getRequest()->getParams(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:46:18.457

我正在使用 ajax 传递表单，花了一整天的时间思考为什么它不起作用。我的错

# git - 如何继续从最初未指向 svn 的 git clone 中提取 subversion

> ID：13687379
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:01.813
> 
> 标签：git, git-svn

鉴于我已经通过指向 svn 在 machine1 上创建了一个 git repo`git svn clone --trunk=http://foo/project`
并且我一直使用 'git svn rebase' 从 machine1 上的 svn 中提取新修订
当我将 git repo 从 machine1 克隆到 machine2 时
如何重新指向 svn 我的 git repo在机器 2 上？？？

到目前为止，我已经这样做了：
鉴于我已经`git svn init --trunk=http://foo/project`在 machine2 上重新指向 svn
当我执行 'git svn rebase' 然后什么也没发生，提示只是挂起。

当我执行 'git svn fetch' 然后 git 想要重新导入所有 svn 修订版，就好像它是全新的一样，这需要我 2 个小时，但之后`git svn rebase`工作正常。

当我执行 'git svn fetch -r XXX' 时，其中 XXX 是最后一次提交中可见的最后一个 svn 修订 id，然后我从 svn 获取一些文件，但之后`git svn rebase`只是挂起，没有任何反应。

我正在寻找一个重新指向颠覆主干的程序，以不断引入新的变化。我根本不打算重新使用 SVN。

有任何想法吗？

我的环境设置：
git-svn 版本 1.7.9.5 (svn 1.6.17)
git 版本 1.7.9.5
on linux mint 13

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:39:07.043

在 machine2 上
`git svn init --trunk=http://foo/project` 准备好从 Subversion 获取？
还没有。我们需要 git commit 和 svn revision 之间关系的元数据。找出具有 svn 修订版的最后一个提交 SHA1`git show`或`git log -1`

并将 SHA1 写入`.git/refs/remotes/trunk`

`echo <SHA1> > .git/refs/remotes/trunk`

现在你可以`git svn fetch` （git 将在第一次尝试时重建 rev 地图（也许 5 分钟））。

以上对我有用的分支 git repo 用于从 svn 中提取最新更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T18:42:07.317

您可以设置本地存储库以使 svn 和远程知道它们指向相同的提交。

当您运行时（在 machine2 上）

```
git svn init --trunk=http://foo/project 
```

svn 不知道它指向的存储库与您从 machine1 中提取的存储库相同。

要让 git svn 知道是这种情况，可以使用前缀：

```
git svn init --prefix=origin/ --trunk=http://foo/project 
```

（如果要使用分支，尾部斜杠很重要）

如果您已经运行了第一个 init 命令，则可以通过编辑 .git/config 文件来获得相同的结果，如下所示：

```
[svn-remote "svn"]
    fetch = http://foo/project:refs/remotes/origin/trunk 
```

注意主干之前的**原点/ 。**如果您不想手动编辑文件，可以运行：

```
git config --replace svn-remote.svn.fetch http://foo/project:refs/remotes/origin/trunk 
```

它将为您插入该行。

完成此操作后，您应该能够运行`git svn fetch`并且 git 将更新您的转速图。

# c# - 垃圾收集 - 互斥锁

> ID：13687381
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:19:08.873
> 
> 标签：c#, garbage-collection, mutex, collect

根据我的研究，一般的经验法则是不要乱用 GC（即不要调用 GC.Collect()）。我们有一个基于服务器的进程来处理巨大的 XML 文档——内存永远不会被释放。代码如下所示：

```
while (!abort)
{
  mutex.WaitOne();

  //sets abort to true to end the process itself
  DoSomeWork();

  mutex.ReleaseMutex();
} 
```

DoSomeWork() 运行后，内存永远不会被释放。发生这种情况是因为 GC 没有任何“独处时间”来做它的事情吗？我们应该在 DoSomeWork() 之后调用 GC.Collect 来强制 GC 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:10:26.083

尝试在开发环境中调用`GC.Collect`，看看会发生什么。如果内存没有下降，则说明内存泄漏。这可能意味着您没有释放您实际完成的对象，并且在某处对它们进行了引用；或者可能是您没有正确处理非托管内存。如果它确实下降，则意味着您只需要给 GC 时间。

如果对象确实符合收集条件（根据之前的测试），请考虑是否必须立即减少内存，或者等待几百毫秒以安排 GC 是否可以接受。您是否收到 OOM 错误？应用程序是否因此被交换到磁盘？如果不是，请考虑等待 GC 执行此操作。

还要问问自己性能是一个问题，还是只是记忆问题。手动调用`Collect`可能会损害性能，而不是帮助它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:25:57.607

在某些杀死大量对象的进程完成后，您应该随时调用 GC.Collect。处理 XML 文档是一个典型的例子，说明这是正确的做法。任何告诉你**从不打电话给 GC.Collect**的人只是在坚持他们所学的内容，这*通常是*正确的，但并非*总是*如此。

# php - 使用正则表达式替换字符串中的“函数”并在其中使用 option="value" 对

> ID：13687382
> 
> 赞同：2
> 
> 时间：2012-12-03T16:19:11.083
> 
> 标签：php, regex

我想要做的是用某些html块替换用户插入的文本（比如博客文章）中的“函数”，但在“函数”中使用选项/值对。清除？不？！这么想:) 这是一个例子：

```
Some text, can be long, may be short, a nice story, or just a comment.
{{function option1="value1" option2="value2"}}
And some more text!
{{function2 option1="value1" option2="value2"}} 
```

在文本中，我想替换和解析`{{function ...}}`部分。一个更具体的例子可能是：

```
{{youtube videokey="_VIDEOKEY_"}} 
```

应该由 youtube 嵌入代码替换：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/_VIDEOKEY_" frameborder="0" allowfullscreen></iframe> 
```

为此，我想使用该`preg_replace_callback()`函数，因此我可以有一些空间对传递的数据/选项进行一些计算。

* * *

`{{ ... }}`问题：我可以获取和替换*像*这样*（*

我尝试了很多表达方式，我认为最接近的一种是：

`\{\{\w+([[:space:]]+(([0-9a-zA-Z]+)=\"([0-9a-zA-Z]+)\"))+\}\}`

如您所见，我尝试匹配：

1.  `{{`和内的一个字符串`}}`
2.  其中第一部分是一个词
3.  后跟一个或多个选项/值对：
    *   一个或多个空格
    *   一个或多个字母或数字（选项名称）
    *   `=`标志_
    *   一个或多个字母或数字，由`"`（选项值）括起来

在示例中，上面的文本将匹配（使用 preg_match_all）：

```
array(5) (
    0 => array(2) (
        0 => string(46) "{{function option1="value1" option2="value2"}}"
        1 => string(47) "{{function2 option1="value1" option2="value2"}}"
    )
    1 => array(2) (
        0 => string(17) " option2="value2""
        1 => string(17) " option2="value2""
    )
    2 => array(2) (
        0 => string(16) "option2="value2""
        1 => string(16) "option2="value2""
    )
    3 => array(2) (
        0 => string(7) "option2"
        1 => string(7) "option2"
    )
    4 => array(2) (
        0 => string(6) "value2"
        1 => string(6) "value2"
    )
) 
```

当使用 preg_replace_callback 和这个正则表达式时，我当然会收到相同的匹配集（在一维数组中）。

* * *

我有这个解决方案，但不喜欢它（因为它涉及正则表达式匹配的正则表达式，而我认为应该可以在一个表达式中做到这一点）：

```
$input = ... // see text above
$output = preg_replace_callback('@\{\{\w+([[:space:]]+(([0-9a-zA-Z]+)=\"([0-9a-zA-Z]+)\"))+\}\}@', 'my_replace_function', $input);

function my_replace_function($match) {
    preg_match_all('@([0-9a-zA-Z]+)=\"([0-9a-zA-Z]+)\"@', $match[0], $matches);
    // do something with the $matches
} 
```

甚至可以向我的回调函数传递一个包含所有选项/值对的数组，而不仅仅是最后一个匹配项，并使用该数据来解析字符串？如果是这样，你能指出我正确的方向吗？

基本上问题是：我可以在比赛中分离重复的子模式吗？

* * *

---Edit--- The solution proposed above (capturing the whole 'function'-block, then match the option-value pairs within the matched string) is in fact the solution to this puzzle. For more detail please see the answer of @m.buettner below (the accepted one).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:11:09.473

You can't. Sorry, but it's that simple. Most regex engines do not support capturing multiple values with a single capturing group. Which is equivalent to say, most regex engine support only a finite and fixed number of captures. .NET is the big exception here. But you are using PCRE - and PCRE will always return the last capture for each group ([see here](https://stackoverflow.com/a/7096175/1633117), official citation pending; but google for "PCRE repeated capturing group", all sources agree). And the number if groups is fixed by the number of parentheses in your pattern. Sometimes there are possible work arounds, where you transform your repeated captures into repeated matches, but I think that is not applicable either in your case.

So your solution is really the right way to go about it. You match the whole `{{...}}` block, and then parse out the key-value pairs within the callback separately.

# c# - 301 使用 ASP.net Web API 和 Https 永久移动

> ID：13687383
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:16.160
> 
> 标签：c#, asp.net, ajax, asp.net-web-api

我正在使用带有 Web Api 的 asp.net Web 表单。**我可以通过http**拨打电话没问题，但如果我使用**https**，那么我会得到“301 永久移动”，我也在使用授权。用户使用 https 进行授权。

在 API 控件上，我有：

```
[Authorize(Roles = "admin,masteradmin")]

[HttpGet]
public string Delete(Guid id)
{
  return 'deleted'
} 
```

我的JavaScript：

```
 function DeleteItem(ID) {
    jQuery.support.cors = true;
    $.ajax({
        url: '/api/controlname/' + ID + '/Delete',
        type: 'GET',
        contentType: "application/json;charset=utf-8",
        success: function (data) {
            //alert('deleted');
        },
        error: function (x, y, z) {
            alert(ID + '\n' + x + '\n' + y + '\n' + z);
        }
    });
    } 
```

再次在 http 上正常工作，但在 https 上不行。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:48:40.083

好的，问题是在 global.asax 中，我将非管理目录重定向到非 https。我从重定向中排除了“api”目录，现在一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-12T14:55:10.330

如果有人遇到此问题，但对于 Mac 上的 xamarin iOS 应用程序，请打开 Reference.cs 文件。您可以在项目的三个 Web Reference 文件夹中找到它。检查您在添加 Web 引用时输入的 url 是否与 Reference.cs 文件中的 URL 匹配。我指的是来自 Reference.cs 类的构造函数的 url。特别要注意 http vs https 部分。

# iphone - CoreAnimation + 效果与 Photoshop + UIImageView

> ID：13687384
> 
> 赞同：0
> 
> 时间：2012-12-03T16:19:19.490
> 
> 标签：iphone, ios, ipad, uiimageview, core-animation

我正在尝试回答此处发布的问题：[CALayer performance vs. UIImageView performance](https://stackoverflow.com/questions/3169368/calayer-performance-vs-uiimageview-performance)。

这是我正在寻求答案的问题的修改后的摘录：

> 使用 CALayers 和诸如斜角、阴影等效果是一个更好的主意，或者只是在 photoshop 中做所有这些事情并使用 UIImage(View)s 来满足我的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:03:13.607

答案是“视情况而定”。与在显示图像之前对图像应用阴影和投影等效果相比，将静态图像blit 到屏幕上当然需要更少的CPU。PS 也是一种更广为人知的工具，因此更多人知道如何从中获得任何给定的效果。

但是，如果您想对同一张图像应用多种效果，则将图像保存一次然后根据需要应用效果将节省存储空间。

iOS 设备中的图形硬件在 alpha 混合方面遇到了困难。阴影的渲染成本特别高。然而，阴影与下方内容的混合速度很慢。如果您的图像具有部分透明的阴影区域，而不是通过 Core Graphics 或 CALayer 创建那些部分透明的阴影区域，您将获得非常相似的性能影响。

图形渲染性能很大程度上取决于细节。您将不得不进行一些测试和微调以获得最佳结果。

# ruby-on-rails - Rails 不会读取环境变量

> ID：13687388
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:25.377
> 
> 标签：ruby-on-rails, ruby, bash, ubuntu

Ruby 1.9.3p327、Rails 3.2.9、omniauth 1.1.1、omniauth-google-oauth2、Ubuntu 12.10。

omn​​iauth.rb 初始化程序 说：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, ENV['OMNIAUTH_PROVIDER_KEY'], ENV['OMNIAUTH_PROVIDER_SECRET'], {access_type: 'online', approval_prompt: ''}
end 
```

~/.bashrc 说：

```
### Added for omniauth
export ENV['OMNIAUTH_PROVIDER_KEY']="693094632646.apps.googleusercontent.com"
export ENV['OMNIAUTH_PROVIDER_SECRET']="693126830846.apps.googleusercontent.com" 
```

（我改变了数字，但我保留了字符串，所以你明白我的意思。）

我重新启动了我的 Rails 服务器，但当我尝试向 Google 进行身份验证时，我得到了`Missing required parameter: client_id`. 所以，出于某种原因，Ruby 没有读取这个环境变量，我完全迷失了。

任何想法为什么？提前致谢！

**编辑：**完整的 .bashrc 如下：

```
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# If not running interactively, don't do anything
case $- in
    *i*) ;;
      *) return;;
esac

# don't put duplicate lines or lines starting with space in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth

# append to the history file, don't overwrite it
shopt -s histappend

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=1000
HISTFILESIZE=2000

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# If set, the pattern "**" used in a pathname expansion context will
# match all files and zero or more directories and subdirectories.
#shopt -s globstar

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# set variable identifying the chroot you work in (used in the prompt below)
if [ -z "${debian_chroot:-}" ] && [ -r /etc/debian_chroot ]; then
    debian_chroot=$(cat /etc/debian_chroot)
fi

# set a fancy prompt (non-color, unless we know we "want" color)
case "$TERM" in
    xterm-color) color_prompt=yes;;
esac

# uncomment for a colored prompt, if the terminal has the capability; turned
# off by default to not distract the user: the focus in a terminal window
# should be on the output of commands, not on the prompt
#force_color_prompt=yes

if [ -n "$force_color_prompt" ]; then
    if [ -x /usr/bin/tput ] && tput setaf 1 >&/dev/null; then
    # We have color support; assume it's compliant with Ecma-48
    # (ISO/IEC-6429). (Lack of such support is extremely rare, and such
    # a case would tend to support setf rather than setaf.)
    color_prompt=yes
    else
    color_prompt=
    fi
fi

if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
unset color_prompt force_color_prompt

# If this is an xterm set the title to user@host:dir
case "$TERM" in
xterm*|rxvt*)
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
    ;;
*)
    ;;
esac

# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    #alias dir='dir --color=auto'
    #alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# some more ls aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

# Alias definitions.
# You may want to put all your additions into a separate file like
# ~/.bash_aliases, instead of adding them here directly.
# See /usr/share/doc/bash-doc/examples in the bash-doc package.

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi

### Added for omniauth
export OMNIAUTH_PROVIDER_KEY="5323094630846.apps.googleusercontent.com"
export OMNIAUTH_PROVIDER_SECRET="693044132846.apps.googleusercontent.com"

PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting

### Added by the Heroku Toolbelt
export PATH="/usr/local/heroku/bin:$PATH"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:38:12.387

`ENV`导出时不需要添加，这里是`~/.bashrc`：

```
export OMNIAUTH_PROVIDER_KEY=693094632646.apps.googleusercontent.com
export OMNIAUTH_PROVIDER_SECRET=693126830846.apps.googleusercontent.com 
```

我认为这会奏效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:38:49.097

改变

```
export ENV['OMNIAUTH_PROVIDER_KEY']="693094632646.apps.googleusercontent.com" 
```

至

```
export OMNIAUTH_PROVIDER_KEY="693094632646.apps.googleusercontent.com" 
```

`ENV`是 Rails 在读取环境时创建的数组。

# jquery - 使用 ZURB Foundation Orbit 时未捕获的 TypeError

> ID：13687393
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:36.883
> 
> 标签：jquery, zurb-foundation, orbit

我正在使用[ZURB Foundation 的 Orbit 图像滑块](http://foundation.zurb.com/docs/orbit.php)并尝试调用与`afterSlideChange`. 这是代码片段：

```
$(window).load(function() {
   $("#view-show").orbit({
      animation: 'horizontal-push',        // fade, horizontal-slide, vertical-slide, horizontal-push
      animationSpeed: 1200,                // how fast animtions are
      timer: false,                        // true or false to have the timer
      resetTimerOnClick: false,           // true resets the timer instead of pausing slideshow progress
      advanceSpeed: 4000,                 // if timer is enabled, time between transitions
      pauseOnHover: false,                // if you hover pauses the slider
      shouldtartClockOnMouseOut: false,   // if clock should start on MouseOut
      startClockOnMouseOutAfter: 1000,    // how long after MouseOut should the timer start again
      directionalNav: true,               // manual advancing directional navs
      captions: true,                     // do you want captions?
      captionAnimation: 'fade',           // fade, slideOpen, none
      captionAnimationSpeed: 1200,         // if so how quickly should they animate in
      bullets: false,                     // true or false to activate the bullet navigation
      bulletThumbs: false,                // thumbnails for the bullets
      bulletThumbLocation: '',            // location from this file where thumbs will be
      afterSlideChange: function(){

            var maxWidth = 400; // Max width for the image
            var maxHeight = 300;    // Max height for the image
            var ratio = 0;  // Used for aspect ratio
            var cur = this.$slides[this.activeSlide];
            console.log(cur);
            var width = cur.width();    // Current image width
            var height = cur.height();  // Current image height
            // Check if the current width is larger than the max
            if(width > height){
              height = ( height / width ) * maxHeight;
            } else if(height > width){
            maxWidth = (width/height)* maxWidth;
            }
            cur.css("width", maxWidth); // Set new width
            cur.css("height", maxHeight);  // Scale height based on ratio

      },     // empty function
      fluid: true                         // or set a aspect ratio for content slides (ex: '4x3')
  })
}); 
```

我收到以下错误：

```
Uncaught TypeError: Property 'width' of object #<HTMLImageElement> is not a function 
```

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:27:32.493

您的`cur`变量可能不会作为 jquery 对象返回。

尝试：

`var cur = $(this.$slides[this.activeSlide]);`

# android - Android - 按钮按下事件上的图像 - 将图像叠加应用于所有

> ID：13687394
> 
> 赞同：4
> 
> 时间：2012-12-03T16:19:40.233
> 
> 标签：android, image, button

我的问题与将图像覆盖应用于所有按钮按下事件有关。因此，例如，在具有全息设置的 Android 4.0 及更高版本中，当您按下任何按钮时，按钮上都会有浅蓝色覆盖层。在早期版本的android中，它是橙色的。我知道如何设置按钮以使用选择器和项目标签在 XML 中更改按下、聚焦和默认的图像，但这需要我制作按钮的另一个图像，但带有浅蓝色覆盖层，这意味着我知道每个按钮有 2 张图片。我的应用程序将有很多按钮，我希望应用程序的文件大小尽可能小。

所以问题的重点是，有没有办法只制作一张图片（浅蓝色 25% 不透明度图像）作为所有按钮按下的覆盖，同时保持我设置的按钮的原始背景留在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:29:08.143

加载图像。然后在其上绘制 alpha 颜色。

然后使用修改后的图像设置按钮图像。

```
Bitmap img = BitmapFactory.decodeFile(pathName); // or decodeResource  etc....

Canvas canvas = new Canvas(img);
Paint alphaPaint = new Paint();

// Color to apply.
alphaPaint.setColor(Color.BLUE);
alphaPaint.setAlpha(20);

// Draw rectangle over your image using the alpha colored paint.
canvas.drawRect(0, 0, canvas.getWidth(), canvas.getHeight(), alphaPaint);
myButton.setImageBitmap(img ); 
```

# ruby - 通过 Capybara 方法“查找”时如何使用 Selenium 方法？

> ID：13687396
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:45.573
> 
> 标签：ruby, rspec, capybara, selenium-webdriver

结果，我有 Capybara::Element 的实例和 Selenium::WebDriver::Element 中的方法不能根据当前元素使用。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:03:24.190

您可以使用`#native`直接从驱动程序获取元素并在其上执行其方法，如下所示：

```
 your_element.native.desired_method(args) 
```

# php - 将多维混合对象和数组转换为数组，同时保留对象名称作为键 - PHP

> ID：13687398
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:46.820
> 
> 标签：php, arrays, object

> **可能重复：**
> [将对象转换为数组](https://stackoverflow.com/questions/2476876/convert-object-to-array)

假设我有一个这样的数组：（请注意，某些方法/对象可能受到保护，因此必须在自己的类中访问它们）

```
array(
    0=> objectname{
        [method1:protected]=> array(
            ["key1"] => object2{
                [method2]=> array(
                    0 => "blah"
                )
            }
        )
    }
    1=> objectname{
        [method1:protected]=> array(
            ["key1"] => object2{
                [method2]=> array(
                    0 => "blah"
                )
            }
        )
    }
) 
```

我想将所有这些转换成一个数组。我通常会使用这个：

```
protected function _object_to_array($obj){

    if(is_object($obj)) $obj = (array) $obj;

    if(is_array($obj)) {

        $new = array();
        foreach($obj as $key => $val) {
            $new[$key] = self::_object_to_array($val);
        }

    }else{

        $new = $obj;

    }

    return $new;

} 
```

问题是这不会保留对象名称。我希望对象名称成为一个额外的键，将数组提升一个维度。例如，将 0 替换为 objectname 可能有效，但最好创建如下内容：

```
array(
    0=> array(
        objectname=> array(
            ...blah blah
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:13:04.717

弄清楚了。

然而新的问题是，受保护的方法最终会变成像 [*formermethodturnedkey] 这样的键。它们似乎无法访问。怎么能像这样访问密钥？

```
protected function _object_to_array($obj){

    //we want to preserve the object name to the array
    //so we get the object name in case it is an object before we convert to an array (which we lose the object name)
    $obj_name = false;
    if(is_object($obj)){
        $obj_name = get_class($obj);
        $obj = (array) $obj;
    }

    //if obj is now an array, we do a recursion
    //if obj is not, just return the value
    if(is_array($obj)) {

        $new = array();

        //initiate the recursion
        foreach($obj as $key => $val) {
            //we don't want those * infront of our keys due to protected methods
            $new[$key] = self::_object_to_array($val);
        }

        //now if the obj_name exists, then the new array was previously an object
        //the new array that is produced at each stage should be prefixed with the object name
        //so we construct an array to contain the new array with the key being the object name
        if(!empty($obj_name)){
            $new = array(
                $obj_name => $new,
            );
        }

    }else{

        $new = $obj;

    }

    return $new;

} 
```

# java - Soap 网络服务：警告发布 Mantas 错误

> ID：13687406
> 
> 赞同：1
> 
> 时间：2012-12-03T16:19:56.707
> 
> 标签：java, web-services, web-applications, oracle11g

我有几个星期一直在尝试解决的错误。我正在运行 SOAP Web 服务，但出现以下错误：

```
Failed to execute Alert processing step : AssignAlert 
```

正如您在下面的 SOAP 消息中看到的那样。这是来自 Oracle Mantas 应用程序，但它可能是更一般的错误消息。先感谢您。

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <soapenv:Fault>
      <faultcode xmlns:ns1="http://namespaces.mantas.com">ns1:Server</faultcode>
      <faultstring>Failed to execute Alert processing step : AssignAlert</faultstring>
      <faultactor>/services/AlertManagementService</faultactor>
      <detail>
        <PostAlertFault>
          <errorCode>170364</errorCode>
          <errorMessage>Failed to execute Alert processing step : AssignAlert</errorMessage>
          <errorDescription>java.lang.reflect.InvocationTargetException</errorDescription>
        </PostAlertFault>
        <ns2:hostname xmlns:ns2="http://xml.apache.org/axis/">myhostname</ns2:hostname>
      </detail>
    </soapenv:Fault>
  </soapenv:Body>
</soapenv:Envelope> 
```

# c# - 在 WPF 中覆盖按钮的高度和宽度属性的 TypeConverterAttribute

> ID：13687408
> 
> 赞同：0
> 
> 时间：2012-12-03T16:20:15.980
> 
> 标签：c#, wpf, wpf-controls, width, dependency-properties

我想在我的 WPF 应用程序中将默认 TypeConverterAttribute 即 LengthConverter 覆盖为我自己创建的类型转换器类 CustomLengthConverter。

我正在执行以下操作：

```
public class MyButton : Button
{   
    [TypeConverterAttribute(typeof(CustomLengthConverter))]
    public new double Width
    {
        get
        {
            return base.Width;
        }
        set
        {
            base.Width = value;    
        }
    }
} 
```

但是，当为 Width 属性分配一个值时，我重写的“ConvertFrom”不会被调用。它似乎仍然使用默认的 LengthConverter 类来执行类型转换。

这样做的目的是我想在我的应用程序中添加对其他测量单位的支持。项目要求用户可以以毫米为单位提供控件的高度和宽度，这也是 WPF 不支持的。所以我需要使用我的转换器，以防高度和宽度以毫米为单位。

# javascript - javascript从div中排除特定标签

> ID：13687409
> 
> 赞同：0
> 
> 时间：2012-12-03T16:20:17.740
> 
> 标签：javascript, html

我正在尝试选择警报中的文本，不包括`<a>`javascript 中的标记...

```
 <div id="addCompaniesModal" >
    <div class="alertBox costumAlertBox" style="display:inline-block;">
      <div class="alert alert-block alert-success fade in" style="display: block;">
         <a class="close" href="#" data-dismiss="alert">×</a>
         <strong>Success!</strong>
          Add Company: wxG50Z28 Success!
      </div>
    </div>
   </div 
```

我在下面尝试过，但它没有用......

`successMessage = $('#addCompaniesModal .alert :not(.close)').text()`; 但它只返回**成功！**..我用谷歌搜索，但没有找到一个准确而简单的方法......我找到的一种方法是获取整个字符串并修剪它，我不想这样做....一些极客可以帮助我..谢谢你...... .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:36:35.790

当您说 :not(.close) 时，它告诉 jquery 返回 '#addCompaniesModal .alert' 内的 dom 元素，而不是其中的所有内容。

只需 wrap 添加公司：wxG50Z28 成功！在一个范围内：

[http://jsfiddle.net/y4T2R/1/](http://jsfiddle.net/y4T2R/1/)

```
 <div id="addCompaniesModal" >
    <div class="alertBox costumAlertBox" style="display:inline-block;">
      <div class="alert alert-block alert-success fade in" style="display: block;">
         <a class="close" href="#" data-dismiss="alert">×</a>
         <strong>Success!</strong>
          <span>Add Company: wxG50Z28 Success!</span>
      </div>
    </div>
   </div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T17:06:33.313

据我所知，没有这样的方法。试试别的。

# javascript - 禁用其他点击图像

> ID：13687413
> 
> 赞同：2
> 
> 时间：2012-12-03T16:20:37.097
> 
> 标签：javascript, jquery, html-lists

我有一个列表，其中包含一个用于单击鼠标的 jquery 处理程序。我需要在列表中放置一个图像，但需要在图像上单击鼠标以执行不同的功能。我在想鼠标悬停时的某种解除绑定和鼠标悬停时的绑定，但无法让它工作。有没有更简单的方法？

我遇到的问题是当我单击图像时它会执行两个可单击事件。

JS

```
$(function () {
var items = $('#v-nav>ul>li').each(function (index) {
$(this).click(function () {
    alert("This is a click on the list")
}
});
}); 
```

html

```
<li id="tab" runat="server">Keywords <a class="fake-link" onclick="alert("This is an image click")"><img id="icon" src="images/icon.gif" style="float: right; visibility:visible"/></a></li> 
```

那么有什么想法我只能从图像点击中获得警报吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:27:58.140

```
$(function () {
var items = $('#v-nav>ul>li').each(function (index) {
$(this).click(function (e) {
if($(e.target).attr('id')==='icon')){
//call that function which runs on image click
}
else {
    alert("This is a click on the list")
}
}
});
}); 
```

编辑：作为puppybeard建议这里是另一种方式，如果你想有不同的功能来运行li's中的所有图像

```
$(function () {
    var items = $('#v-nav>ul>li').each(function (index) {
    $(this).click(function (e) {
    if($(e.target).is('img'))){
    //call that function which runs on image click
    }
    else {
        alert("This is a click on the list")
    }
    }
    });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:35:07.737

由于事件冒泡，这很难做到。事件命名空间和 .on() .off() 会有所帮助。

例如：

```
var items = $('#v-nav>ul>li');

var someFunctionToPerform = function() {
alert('Imma list click event');
}

items.on('click.someEventNameSpace', someFunctionToPerform);

items.find('img').on({
    'mouseover': function() {
        items.off('click.someEventNameSpace');    
    },
    'mouseleave': function() {
        items.on('click.someEventNameSpace', someFunctionToPerform);
    },
    'click': function() {
        alert('Imma list image click event!');
    }   
}); 
```

此代码将在列表内图像上的 mouseover 事件后取消绑定列表项的单击事件，并在图像上的 mouseleave 事件后将它们绑定回来。

这可能是困难的方式，但它仍然应该工作。由于事件冒泡的不同方向，其他答案在 IE 8 中可能有问题。

# java - 安卓应用的文件主机

> ID：13687414
> 
> 赞同：2
> 
> 时间：2012-12-03T16:20:43.333
> 
> 标签：java, android, mobile, dropbox, google-sites

我正试图为我的移动应用程序类的这个项目拼凑最后几块拼图，但遇到了一些困难。基本上这是一个虚构餐厅的应用程序。餐厅可以将东西放入存储在网络上的菜单中（目前在保管箱上），文件中的这些项目将显示在移动应用程序上。然后，客户可以从菜单中订购项目，餐厅可以在另一个文件中查看这些项目。

我已经完成了桌面应用程序和大部分移动应用程序。我剩下要做的就是从保管箱下载文件并使用该信息更新变量。问题是我无法找到一种方法将文件下载到移动应用程序，而不必每次都登录到 Dropbox。

我是新手，不得不像这样使用外部托管，但我确实非常了解 java。任何帮助将不胜感激。也可以随意提问。

# javascript - 调用 AJAX 调用并让浏览器取消请求是否安全？

> ID：13687415
> 
> 赞同：2
> 
> 时间：2012-12-03T16:20:45.140
> 
> 标签：javascript, ajax, jquery, browser

如果我提出 AJAX 请求，它将显示在 Chrome 的网络选项卡中。如果我同时进行基于客户端的重定向，AJAX 请求将被取消。但是请求会到达服务器并正常执行吗？HTTP/TCP 中是否知道客户端已取消请求？我不这么认为，但我想确定一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:00:55.390

如果您在服务器端运行 PHP，它将**在**客户端中止时停止处理。（根据我的阅读，其他服务器端技术并非如此，它会在客户端中止后继续处理。）请参阅：

[http://php.net/manual/en/features.connection-handling.php](http://php.net/manual/en/features.connection-handling.php)

但是，最好不要以某种方式假设任何事情。浏览器**可能会**取消请求。并且这种取消**可能**会发生在服务器端停止处理的时间。但是，情况不一定如此。客户端可以在请求期间的任何阶段取消 - 从实际发送请求之前到发送响应正文之后。还要记住，还有其他一些事情会中断服务器端的请求处理（硬件、电源、操作系统故障等）。**期待一些不可预测性。**

由此，我提出两个建议：

*   **编写代码尽可能保证事务安全。**如果请求进行了数据更改，请在所有更改都通过管道传输到数据库之前不要提交它们。如果您的应用程序依赖多个 AJAX 请求来更改某些数据，请不要提交任何更改，直到“最终”AJAX 请求结束。

*   **即使请求完成，也不要假设客户端会收到响应。**在我的脑海中，这意味着如果您的应用程序是 AJAX-heavy，请始终依赖客户端状态来告诉服务器它拥有什么信息，而不是依赖服务器端状态来假设客户端“知道”某些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:46:06.427

`async: false`这是同步请求（在`$.ajax(...)`选项中）适用的少数情况之一。这通常可以避免浏览器在请求完成之前导航到其他页面。

# java - 如何仅检索表的 PK

> ID：13687420
> 
> 赞同：1
> 
> 时间：2012-12-03T16:21:00.207
> 
> 标签：java, mysql, apache-cayenne

我正在使用 MySQL DB 下的 Java Apache Cayenne。我有一个很大的表，只有一个 bigint PK 和一些字段。我只想检索 PK 值而不是映射此实体的所有对象，因为它太耗费资源了。

有没有我可以使用的片段，而不是检索所有对象的片段？

```
 ObjectContext context = ... 
    SelectQuery select = new SelectQuery(MyClass.class);
    List<MyClass> result = context.performQuery(select); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:34:57.593

您应该尝试使用 SQLTemplate 而不是 SelectQuery。这是一个简单的例子：

```
ObjectContext context = ... 
SQLTemplate select = new SQLTemplate(MyClass.class, "SELECT #result('PK_COLUMN' 'long') FROM MY_TABLE");
List result = context.performQuery(select); 
```

[你可以在这里](http://cayenne.apache.org/docs/3.0/scripting-sqltemplate.html)找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:51:58.567

+1 为 Josemando 的回答。如果您打算只使用获取的对象的子集，这是另一种可行的方法：

```
ObjectContext context = ... 
SelectQuery select = new SelectQuery(MyClass.class);

select.setPageSize(100);

List<MyClass> result = context.performQuery(select); 
```

'setPageSize' 确保 'result' 仅包含 id，直到您尝试从列表中读取对象。当您这样做时，它将逐页解析（在上面的示例中一次 100 个对象）。这可能适合许多场景。当然，如果你遍历整个列表，最终所有对象都会被完全解析，并且不会有内存收益。

# c# - 将事件分配给 Windows Store App (8 Metro) 中的用户控件属性

> ID：13687421
> 
> 赞同：1
> 
> 时间：2012-12-03T16:21:05.633
> 
> 标签：c#, wpf, windows-store-apps

嘿，我在我的项目中创建了一个用户控件。我想当它的 Visibility 属性改变时，运行一行代码

```
 VisualStateManager.GoToState(this, "Normal", true); 
```

此属性绑定到数据源。

```
 <usercontrol:CorrectAnswerMessage Grid.Column="1" x:Name="correct"  
Visibility="{Binding IsTrueAnswer,Mode=TwoWay}" VerticalAlignment="Center" 
HorizontalAlignment="Left"></usercontrol:CorrectAnswerMessage> 
```

我正在寻找一种为 Visibility 属性创建事件的方法。当这个属性改变时，事件被触发。

这是我的用户控件

```
<UserControl
x:Class="Lifener.UserControls.CorrectAnswerMessage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Lifener.UserControls"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="500">
<Grid x:Name="CorrectResult" Width="400" Height="350" Visibility="Visible"  HorizontalAlignment="Center" Margin="0">

    <TextBlock Text="&#xE17E;" FontSize="120"  FontFamily="Segoe UI Symbol" Padding="0" Margin="0"     VerticalAlignment="Center" HorizontalAlignment="Center"  />
    <TextBlock  TextAlignment="Center" Text="&#xE17F;" FontSize="60" FontFamily="Segoe UI Symbol" Margin="130,30,55,215" />
    <TextBlock x:Name="Like" TextAlignment="Center" Text="&#xE19F;" FontSize="60" FontFamily="Segoe UI Symbol" Margin="165,30,20,0" Foreground="Green" RenderTransformOrigin="0.5,0.5" Height="104" VerticalAlignment="Top"/>
    <TextBlock x:Uid="AnswerIsRight" HorizontalAlignment="Left" Margin="185,140,0,0"  TextWrapping="Wrap" Text="Hooora, Right. You are awsome." VerticalAlignment="Top" Width="185" Height="140" TextAlignment="Center" FontSize="28" FontWeight="Bold"/>

    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="CommonGroups">
            <VisualState x:Name="Normal" >
                <VisualState.Storyboard>
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Like"
                                                    Storyboard.TargetProperty="Foreground"
                                                    Duration="0:0:2.5"
                                                    AutoReverse="True"
                                                    RepeatBehavior="Forever">

                            <DiscreteObjectKeyFrame Value="Red" KeyTime="0"></DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>

                    </Storyboard>
                </VisualState.Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:46:44.087

如果您不使用 MVVM，那么您可以调用`GoToState`setter for `IsTrueAnswer`.

使用 MVVM，我不确定最好的方法是什么。也许从用户控件的模型中引发事件*VisibilityChanged ：*

```
public partial class MyModel
{
    public event EventArgs VisibilityChanged;

    private bool _isTrueAnswer;
    public bool IsTrueAnswer
    {
        get { return _isTrueAnswer; }
        set
        {
            _isTrueAnswer = value;
            VisibilityChanged(this, EventArgs.Empty);
        }
    }

    // etc...
} 
```

并从页面的代码隐藏中添加一个侦听器：

```
public MyPage()
{
    ((MyModel)MyUserControl.DataContext).VisibilityChanged += (sender, args) => {
        VisualStateManager.GoToState(this, "Normal", true);
    };
} 
```

# android - 每个特定字符的不同颜色

> ID：13687422
> 
> 赞同：1
> 
> 时间：2012-12-03T16:21:19.190
> 
> 标签：android, colors, textview

我在 Android 上遇到了在 TextView 上做彩虹编程颜色的问题。

这里TextView的具体情况：

*   TextView 上的字符串可能包含不特定顺序的字符和数字。

    示例：AA11BB22、X2YY3ZZA1

*   对于字符（AZ），我希望显示颜色为蓝色。

    对于数字（1-9），我希望显示红色。

    示例：AA11BB22 会显示'AA'，'BB'会显示BLUE，'11'，'22'会在TextView中显示RED。

我知道，使用在画布上生成图像或 HTML 的解决方案很少。

为每个部分生成 TextView 然后为其着色是好是坏？

或者，也许你们的人对我的情况有优雅的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:23:49.210

您可以使用 Spannable。此链接将帮助您了解如何使用 Spannable [http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:37:23.143

你应该看看 Spannable 字符串。[http://developer.android.com/reference/android/text/SpannableString.html](http://developer.android.com/reference/android/text/SpannableString.html)。android.frio 提供的链接很好，有完整的例子。

# spring - Spring单元测试-在其他项目中扩展类时使用@ContextConfiguration

> ID：13687428
> 
> 赞同：4
> 
> 时间：2012-12-03T16:21:44.497
> 
> 标签：spring, unit-testing, junit

我有一个弹簧单元测试，它扩展了位于其他项目（tests-common）中的其他测试。我的上下文文件 (my-context.xml) 与 MyTest 位于同一个包中。基本上下文文件（“base-context.xml”）与 BaseTest 位于同一包中。这些文件看起来像：

```
@ContextConfiguration(locations = { "my-context.xml"}) 
public class MyTest extends BaseTest {

@ContextConfiguration(locations = { "base-context.xml" })
public abstract class BaseTest extends AbstractJUnit4SpringContextTests{ 
```

问题是：`BaseTest`找到“base-context.xml”但`MyTest`获取`FileNotFoundException`“my-context.xml”。如果我将 BaseTest 和 my-context.xml 文件移动到与 BaseTest 相同的包中 - 一切正常。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:29:01.213

在 spring 文档中查看： http: [//static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/resources.html#resources-app-ctx](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/resources.html#resources-app-ctx)

我会在 base-context.xml 前面添加“classpath:”关键字并定义相对于类路径的路径。您还应该将 xml 文件放在子目录 src/main/resources 中，而不是放在 java 文件旁边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T16:12:08.120

正如下面提到的，您可以像这样使用 classpath 关键字：

```
@ContextConfiguration(locations = { "classpath:**/base-context.xml" }) 
```

# javascript - ExtJS 根据匹配的属性选择一个项目

> ID：13687430
> 
> 赞同：0
> 
> 时间：2012-12-03T16:21:56.953
> 
> 标签：javascript, extjs, extjs4

我想`Ext.tree.Panel`根据 中具有相同属性的项目来选择 中的项目`Ext.grid.Panel'`。就像是：`tree_dir.getSelectionModel().select(grid_file.getSelectionModel().getSelection()[0].id);`

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:00:36.773

要在树中选择节点，`selectPath`提供了方法。您可以通过 id 查找节点，例如通过调用`getNodeById`store。

示例用法：

```
var selectNodeById = function(id) {
    var path = [];

    for (var n = store.getNodeById(id); n; n = n.parentNode) {
        path.unshift(n.get('id'));
    }
    tree.selectPath('/' + path.join('/'), 'id');
}; 
```

# mysql - 从文本创建文章别名的 SQL 查询

> ID：13687432
> 
> 赞同：2
> 
> 时间：2012-12-03T16:22:00.213
> 
> 标签：mysql, sql

我有一个 CMS 系统，我通过 mySQL 数据库直接导入了一些文章。这工作得很好。但是，文章别名不是在数据库中创建的，我必须自己创建。

有人可以提供一个查询示例，该查询将获取文章标题字符串并将其转换为通用别名格式吗？我假设查询看起来像

```
UPDATE tblArticles SET ArticleAlias=XYZ(ArticleTitle) 
```

这是上面的**XYZ**部分，我需要帮助才能获得一篇文章标题，如“你的未来会改造厨房吗？” 到“厨房改造你的未来”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:26:47.627

您可能正在寻找[`REPLACE`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

```
UPDATE tblArticles 
  SET ArticleAlias=REPLACE(ArticleTitle,' ','-'); 
```

# iphone - NSTimeInterval 在给定月份的最后一天似乎是错误的-iOS

> ID：13687433
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:06.337
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter, nstimeinterval

在我的本地数据库中，我保存了一个 NSTimeInterval 值列表。我必须找出并获取给定月份中可用的所有记录。唯一的问题是获取给定月份最后一天的记录似乎不可用。

假设给定月份是 12 月，所以我必须从 12 月 1 日到 12 月 31 日（直到晚上 11:59）获取所有记录

我正在使用以下实现：

```
[self.dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSDate *startDate = [self.dateFormatter dateFromString:@"1-12-2012"];
NSDate *endDate = [self.dateFormatter dateFromString:@"31-12-2012"];

NSTimeInterval startDateTimeInterval = [startDate timeIntervalSince1970];
NSTimeInterval endDateTimeInterval = [endDate timeIntervalSince1970];

[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"(mdate >= %f) AND (mdate <= %f)",startDateTimeInterval,endDateTimeInterval]]; 
```

我注意到，`endDateTimeInterval`与 31 日（上午 9 点）在数据库中保存的值相比，双精度值要少得多。但是怎么可能，我希望我的 endDateTime 应该到 12 月 31 日晚上 11:59。

请提供您对此问题的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:32:13.870

`NSDate`您隐式创建的对象的时间为 00:00。因此谓词搜索将不包括从时间 00:01 到 23:59 的最后一天。最简单的更改是将结束日期设置为第二天（下个月的第一天）并将谓词更改为小于，而不是小于或等于。

```
[self.dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSDate *startDate = [self.dateFormatter dateFromString:@"1-12-2012"]; // start of range, inclusive
NSDate *endDate = [self.dateFormatter dateFromString:@"1-1-2013"]; // end of range, exclusive
...        
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"(mdate >= %f) AND (mdate < %f)",startDateTimeInterval,endDateTimeInterval]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:46:53.040

Jason 的回答将解决问题，但我想我已经弄清楚了困惑：虽然在普通英语中，日期通常指定一整天，但在 Cocoa 中，an`NSDate`是一个确切的时间点。所以它没有长度，完整的描述需要更多的细节，而不仅仅是日/月/年。大多数标准方法都是创建`NSDate`最接近整秒的报价精度，显然，一旦您转换为“NSTimeInterval”，您通常可以做得更好。

打印 30 是因为在`NSLog`1 号和 31 号的同一时间之间有 30 天，就像在 1 号和 2 号的同一时间之间有 1 天，而在同一时间和 2 号之间有 0 天第一个和第一个。

因此，Jason 的答案是正确的，因为它应用了“本月第一天开始之后和下个月第一天开始之前”的时间测试。与众不同的是“开始”位。

# javascript - 淘汰容器少语法如何工作？（是邪恶的吗？）

> ID：13687435
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:14.793
> 
> 标签：javascript, knockout.js

我们可以找到许多使用淘汰 ContainerLess 语法的示例和代码（即使我很难[从他们的网站](http://knockoutjs.com/documentation/introduction.html)上找到合适的文档）。

我的第一个问题表述是“它是邪恶的吗？”，但我不得不承认我并没有真正了解它是如何工作的，以及它如何确保浏览器不会转换或只是删除/更改评论部分？

所以，我改变了我的问题：

> 它是如何工作的（预处理、预渲染……）？

（它是邪恶的吗？我不禁认为改变评论的性质是不好的方式）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:41:26.170

Containerless control flow works my scanning the comments for comments that start with `ko`, and provide valid bindings. It is not "evil" in the sense that it is inefficient or an antipattern, if that's what you were asking.

If you are really interested in knowing, here is the [source code](https://github.com/SteveSanderson/knockout/blob/master/src/virtualElements.js). It is pretty straightforward though. It scans for the comments, parses out the bindings, and then passes them to the standard binding handlers.

# java - 调用 fillTable() 时出现 NullPointerException 错误

> ID：13687436
> 
> 赞同：1
> 
> 时间：2012-12-03T16:22:22.723
> 
> 标签：java, mysql, swing, nullpointerexception, jtable

调用方法 fillTable() 时，我似乎无法发现出现 NullPointerException 错误的位置。fillTable 是从按钮调用的，它从文本字段中获取字符串。fillTable 旨在通过检索包含来自处理程序类的数据的 Object[][] 来填充 JTable。

```
private void fillTable(String dataType, String searchBy)
    {
        String[] columnName = {"module name", "Workshop %", "Lecture %", "Tutorial %", "Average %"};
        if(searchBy.startsWith("@"))
        {
            tableModel.setDataVector(pLSHand.gIStudData(dataType, searchBy), columnName);
            table.setModel(tableModel);
        }
        else
        {
            tableModel.setDataVector(pLSHand.gNStudData(dataType, searchBy), columnName);
            table.setModel(tableModel); 
        }
        table.repaint();
    } 
```

按钮：

```
String searchBy = (String)textField.getText();
if(!searchBy.isEmpty())
{
   fillTable("Year",searchBy);
}
else
{

} 
```

Handler类中的方法

```
public Object[][] gIStudData(String dType, String studID)
    {

        String rQuery = "SELECT * FROM StudAttYear WHERE studentID = '"+ studID +"'";
        data = new Object[1][5];

        if(dType.equalsIgnoreCase("Semester"))
        {
            rQuery = "SELECT * FROM StudAttSem WHERE studentID = '"+ studID +"'";
            data = new Object[2][5];
        }
        else if(dType.equalsIgnoreCase("Year"))
        {
            rQuery = "SELECT * FROM StudAttYear WHERE studentID = '"+ studID +"'";
            data = new Object[1][5];
        }
        else if(dType.equalsIgnoreCase("Week"))
        {
            rQuery = "SELECT * FROM StudAttWeek WHERE studentID = '"+ studID +"' AND number = '"+ weekNo +"'";
            data = new Object[12][5];
        }

        try{
               Class.forName(DRIVER_CLASS);

                connection = DriverManager.getConnection( url,"agile", "adila");
                statement = connection.createStatement();
                results = statement.executeQuery(rQuery);
                int i=0;
                while(results.next())
                {
                     data[i][0] = results.getString("module");
                     data[i][1] = results.getString("workshop%");
                     data[i][2] = results.getString("tutroial%");
                     data[i][3] = results.getString("lecture%");
                     data[i][4] = results.getString("avg%");
                 i++;
                }
           results.close();
           statement.close();
           connection.close();
           } catch (SQLException sqlException) {
           sqlException.printStackTrace();
           System.exit(1);
           }catch(Exception exception) {
           System.err.println("An error happened");
           System.exit(1);
         }
        return data;
    } 
```

在其他课程中使用相同的技术，它们似乎有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:37:41.720

如前所述，`pLSHand`未在您的代码中的其他地方声明。

# gwt - 清除 GWT MVP 中的历史记录

> ID：13687437
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:23.613
> 
> 标签：gwt, history, mvp

我遵循了谷歌开发人员的[本](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)教程，并基于活动和地点构建了一个应用程序。正如教程所建议的，我使用历史处理程序。

我创建了一个“清除历史记录”按钮，但我找不到任何清除历史记录的方法。

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T23:09:13.557

无法清除历史记录，因为历史记录由浏览器处理，出于安全原因，您只能添加历史记录项、替换当前历史记录项或返回历史记录

# regex - 将字符串捕获到一个字符但不包括该字符

> ID：13687438
> 
> 赞同：1
> 
> 时间：2012-12-03T16:22:26.433
> 
> 标签：regex

有了字符串`http://stackoverflow.com/questions/ask?hello=world`，就可以`/^.+\?/`用来捕获了`http://stackoverflow.com/questions/ask?`。我怎么能捕捉到`http://stackoverflow.com/questions/ask`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:24:44.907

将与所需字符串匹配的正则表达式部分括在括号中，并使用组来检索它。

```
 /(^.+)\?/ 
```

第 1 组将包含除尾随之外的整个匹配字符串`?`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:24:49.013

使用这个正则表达式`/^.+(?=\?)/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:27:15.297

您可以使用`^[^?]+`

这将捕获直到找到问号，但问号不会出现在结果中。

[检查出来](http://regexr.com?33162)。

# asp.net - 报表查看器是否可以导出到 excel 并将数据导出为数字而不是文本？

> ID：13687439
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:26.657
> 
> 标签：asp.net, reportviewer, report-viewer2010

我有一个报告显示在报告查看器中。我希望能够将报告导出到 excel 并将导出的数据设置为显示为数字而不是文本。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:35:38.023

如果您的意思是在导出时将数字的行/列在 excel 中格式化为“*数字*”而不是“*通用*”，我会怀疑它。这样做的原因是因为报表不保存数据类型，设计器保存（报表定义中的 RD: 标签都是专门为报表设计器设计的，可以删除而不损害报表的加载）因此，excel 会有真的无法知道您是否要将其格式化为数字。

我猜可能有办法用excel宏或其他东西解决这个问题，但为了简单起见，我很确定这是不可能的。

（我会将此作为评论发布，但出于某种原因，您需要 50 个代表才能发表评论？）

# paypal - Paypal PhP api 安全问题

> ID：13687440
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:31.163
> 
> 标签：paypal, paypal-sandbox

我试图使用快速结帐 php api。一切都在沙盒环境中运行良好。我的问题是关于安全性。

付款后，示例代码重定向到 GetExpressCheckout.php?token=...$PayerID=.....; 但是在我的网站点击“确认付款”并登录paypal账户后（没有在paypal确认付款）；我直接在另一个选项卡中打开了相同的页面，它显示付款成功（事实并非如此）。有没有办法防止这种情况，或者我错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:09:26.220

我并没有完全按照您在这里要说的内容进行操作。

该过程需要...

1) 调用 SetExpressCheckout 以检索您的令牌并相应地重定向到 PayPal。

2) 如果用户确认付款，PayPal 会将用户返回到您的 ReturnURL，此时您可以调用 GetExpressCheckoutDetails（可选）和 DoExpressCheckoutPayment 来完成付款。

直到 DECP 完成才真正发生任何事务。您看到的成功消息可能来自 GetExpressCheckoutDetails，它只是检索买家/订单信息，以便您可以在您的网站上完成付款。

# django - Django - 对多种对象类型的评论，哪种方法？

> ID：13687444
> 
> 赞同：2
> 
> 时间：2012-12-03T16:22:48.150
> 
> 标签：django, database-design, triggers, comments

应用程序有多种类型的对象（文章、歌曲、配置文件等），每个对象都有自己的表。所需的功能是允许用户对这些对象发表评论。考虑到的最佳方法是什么：

*   查找延迟（检索对象及其所有评论）
*   数据的完整性
*   可维护性

选项包括：

*   Django contrib 评论框架，在删除操作时触发信号，调用例程从评论表中删除评论。

*   数据库中带有触发器的 Django contrib 评论框架（需要内容类型 PK/表名之间的映射）。

*   为每个对象类型提供一个带有外键的注释表。

*   为每个对象类型提供一个表来表示它的评论，并使用 Django 评论框架。删除框架的评论表并使用 UNION 创建一个视图，以从评论表中检索所有评论（包括 ON UPDATE/INSERT/DELETE 触发器），模仿原始评论框架表的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:01:26.367

使用 django.contrib.comments 和 django 信号。如果您需要，您可以随时切换到自定义解决方案。不要进行过早的优化，它们很难维护。

# multithreading - 在程序运行时按下“ENTER”时提供状态更新

> ID：13687447
> 
> 赞同：1
> 
> 时间：2012-12-03T16:22:53.597
> 
> 标签：multithreading, perl, signals, ipc

我有一个 PERL 脚本，它循环并调用具有不同参数的二进制文件。我正在使用 IPC::Run。我想当用户按下诸如“ENTER”之类的键时，会显示一条状态消息，例如

“目前正在编写 28 个脚本中的 14 个（完成 50%）”

我的脚本如下：

```
 foreach my $file (@files) {

        $file =~ s/$file_dir//;

        #Run the test case, store the output in $stdout 
        run [ "php", "PROGRAM.phar", "$file" ], ">", \my $stdout;

                    print LOG_FILE "Return code $?\n";
                    print LOG_FILE "Output: $stdout");

    } 
```

基本上我将如何中断二进制文件以显示我的状态消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:15:36.737

如果我更正 IPC::Run 的这种用法不是多线程的。它将一一执行命令，并且无法打印消息，因为只有一个进程。

喜欢：

```
 use Parallel::ForkManager;

  $pm = new Parallel::ForkManager($MAX_PROCESSES);
  my $input;

  foreach $data (@all_data) {
    # Forks and returns the pid for the child:
    my $pid = $pm->start and next;

    ... do some work with $data in the child process ...

    $pm->finish; # Terminates the child process
    chomp($input= <STDIN>);
    print "Some statistics\n" if $input =~ m!\n!;

  } 
```

问候，

# javascript - 将过滤器上的内容添加到基于同位素的站点

> ID：13687448
> 
> 赞同：4
> 
> 时间：2012-12-03T16:22:55.070
> 
> 标签：javascript, jquery, jquery-isotope

我使用同位素创建了一个站点，当您单击其中一个过滤器时，我无法添加项目。

这是我用于过滤的脚本：

```
<script type="text/javascript">
    // cache container
    var $container = $('#container');
    // initialize isotope
    $container.isotope({
        filter: '.front'
    });   

    // filter items when filter link is clicked
    $('#filters a').click(function() {
        var selector = $(this).attr('data-filter');
        $container.isotope({ filter: selector });
        return false;
    });
</script> 
```

效果很好，但我在添加或取消隐藏内容时遇到了麻烦，

我试图将这个[http://jsfiddle.net/RRgjD/](http://jsfiddle.net/RRgjD/)改编为我的代码，但我对 javascript 不是很好，并且一直在我的脸上摔倒。

下面是我正在使用的 html 示例。

```
<li><a href="#filter" data-filter=".identity, .menufilter">&mdash; Brand Identity</a></li>
<li><a href="#filter" data-filter=".guidelines, .menufilter">&mdash; Brand Guidelines</a></li>
<li><a href="#filter" data-filter=".photography, .menufilter">&mdash; Brand Photography</a></li>
<li><a href="#filter" data-filter=".digital, .menufilter">&mdash; Digital</a></li>

<div class="item cols-1 rows-1 identity">
    <span class="new-wrapper">
        <div class="post-thumb clearfix">
            <a title="Eternal friendship" href="#">
                <img src="images/thumbs/oxford.jpg" alt="brain" width="200" height="133"/>
            </a>
        </div>
        <a href="#"><span>
            <h2></h2> 
            <p>
                <p></p>
            </p>
        </span></a>
    </span>
</div> 
```

任何帮助或方向都会很棒。我还研究了同位素附带的插入方法，但它远远超出我的想象，我什至不知道从哪里开始。

提前致谢！

编辑：

这开始过滤 .front 类，但其他类的过滤不起作用：

```
<script type="text/javascript">

$(function() {

 var $container = $('#container'),
    $checkboxes = $('#filters a');

 $container.isotope({
    itemSelector: '.item'
 });

 $container.isotope({
    filter: '.front'
 });

 $checkboxes.change(function() {
    var filters = [];
    // get checked checkboxes values
    $checkboxes.click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
    });
    // ['.red', '.blue'] -> '.red, .blue'
    filters = filters.join(', ');
    $container.isotope({
        filter: filters
    }, function($changedItems, instance) {
        instance.$allAtoms.filter('.isotope-hidden').removeClass('is-filtered');
        instance.$filteredAtoms.addClass('is-filtered');
    });
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:21:15.520

应用`filter`您希望在启动时显示的类：

```
$container.isotope({
    filter: '.guidelines, .photography' 
}); 
```

此示例在启动时显示了您的两个类别。 [jsFiddle](http://jsfiddle.net/ByGAP/)

其他可能破坏功能的东西是混乱的 HTML/CSS（动画、可见/隐藏元素等）

# java - 在 web-inf/xsd 中打开 xsd 文件

> ID：13687449
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:55.303
> 
> 标签：java, portlet, websphere-portal

我想打开 xsd 文件`web-inf/xsd/output.xsd` 这就是我想要做的

`URL url = portletContext.getResource("WEB-INF/xsd/output.xsd");`

getResource 返回 URL，但在我的情况下`NullPointerException`，我需要将其提供给 newFile 以打开文件。

`File newFile = new File("");`

我很困惑如何让这个工作。

**更新**

请忍受我的英语。我得到了这个工作。我有一个问题，我有另一个文件`*.xsl`文件将用于生成 PDF。打开后我无法删除此文件，如果文件保持打开状态会对 JVM 产生什么影响我的意思是 > 100 个用户试图创建 PDF，即`*.xsl`文件将被打开 100 次，将来用户会大量使用应用程序，GC会自动清除所有打开的文件描述符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:36:51.507

从[javax.portlet.PortletContext](http://www.bluesunrise.com/portlet-api/javax/portlet/PortletContext.html#getResource%28java.lang.String%29)的 API 文档中，它描述了：

... 路径必须以斜杠 (/) 开头，并被解释为相对于当前上下文根目录（通常是 Web 应用程序的 WebContent 或 web 目录） 此方法允许 portlet 容器使资源可用于 portlet从任何来源。资源可以位于本地或远程文件系统、数据库或 .war 文件中。

# python - Twitter Python程序给出连接错误

> ID：13687450
> 
> 赞同：0
> 
> 时间：2012-12-03T16:22:58.123
> 
> 标签：python, api, networking, twitter, connection

我正在使用 Python 中的 Twitter 数据挖掘应用程序，使用模块 twitter 和 redis，基于 Matthew A.Russell 的“挖掘社交网络”一书。每当我尝试使用 redis 模块获取朋友和关注者的信息时，都会出现以下错误：

```
raise ConnectionError(self._error_message(e))
ConnectionError: Error 10061 connecting localhost:6379\. No connection could be made because the target machine actively refused it. 
```

当我不使用 Redis 时，我可以获取所有朋友和关注者的 id。但是我需要 Redis 对数据进行某些分析。我的源代码如下：

```
import json
import locale
import redis
from prettytable import PrettyTable

# Pretty printing numbers
from twitter__util import pp 

# These functions create consistent keys from 
# screen names and user id values
from twitter__util import getRedisIdByScreenName 
from twitter__util import getRedisIdByUserId

SCREEN_NAME = "timoreilly"

locale.setlocale(locale.LC_ALL, '')

def calculate():
    r = redis.Redis()  # Default connection settings on localhost

    follower_ids = list(r.smembers(getRedisIdByScreenName(SCREEN_NAME,
                        'follower_ids')))

    followers = r.mget([getRedisIdByUserId(follower_id, 'info.json')
                       for follower_id in follower_ids])
    followers = [json.loads(f) for f in followers if f is not None]

    freqs = {}
    for f in followers:
        cnt = f['followers_count']
        if not freqs.has_key(cnt):
            freqs[cnt] = []

        freqs[cnt].append({'screen_name': f['screen_name'], 'user_id': f['id']})

    # It could take a few minutes to calculate freqs, so store a snapshot for later use

    r.set(getRedisIdByScreenName(SCREEN_NAME, 'follower_freqs'),
          json.dumps(freqs))

    keys = freqs.keys()
    keys.sort()

    print 'The top 10 followers from the sample:'

    fields = ['Date', 'Count']
    pt = PrettyTable(fields=fields)
    [pt.set_field_align(f, 'l') for f in fields]

    for (user, freq) in reversed([(user['screen_name'], k) for k in keys[-10:]
                                    for user in freqs[k]]):
        pt.add_row([user, pp(freq)])

    pt.printt()

    all_freqs = [k for k in keys for user in freqs[k]]
    avg = reduce(lambda x, y: x + y, all_freqs) / len(all_freqs)

    print "\nThe average number of followers for %s's followers: %s" \
        % (SCREEN_NAME, pp(avg))

# psyco can only compile functions, so wrap code in a function

try:
    import psyco
    psyco.bind(calculate)
except ImportError, e:
    pass  # psyco not installed

calculate() 
```

任何和所有的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:28:55.227

那是 Redis 运行的端口。如果我是你，我会仔细检查 Redis 服务器是否在正确的端口和接口上运行。要对此进行测试，请确保您已安装 telnet 客户端并执行以下操作：

```
$ telnet localhost 6379 
```

如果失败了，那么 Redis 服务器实际上并没有在 Redis 客户端库默认情况下运行，在这种情况下，您必须在构造函数参数中为客户端提供正确的详细信息。

# r - `if` 函数中的二元运算符错误

> ID：13687456
> 
> 赞同：0
> 
> 时间：2012-12-03T16:23:14.223
> 
> 标签：r

我写了以下函数：

```
x    <- 1:4
y    <- c(1,2,7,4)
mydf <- data.frame(a=x,b=x,c=x,d=x,y=y)

practice  <-  function(x) if( x[1] == x[5]) {

             foo <- (x[2])
             return(foo)

              } else {

              bar     <- x[3] + x[4]                
              foobar <- x[2] - bar

               return(foobar)
              }       

newmydf <- apply( mydf, 1, practice) 
```

这在`data.frame`提供的情况下工作正常。但是我有另一个`data.frame`，我不断得到

```
Error in x[3] + x[4] : non-numeric argument to binary operator 
```

尽管有以下`str()`

```
'data.frame':   133 obs. of  19 variables:
 $  : chr   ...
 $ : int   ...
 $ : int  ...
 $ : int  ...
 $ : int   ...
 $ : int   ...
 $ : int   ...
 $ : int   ...
 $ : int  ...
 $ : int  ...
 $ : int   ...
 $ : int   ...
 $ : int  ...
 $ : int  ...
 $ : int   ...
 $ : int  ...
 $ : num  ...
 $ : int  
 $ : int 
```

我可能会犯什么小错误？我已经开始了一个新的会话，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:29:24.460

第二个数据框第一列中的值是“字符”类型。结果，该命令`apply`将整个数据帧转换为字符矩阵。`+`未为字符值定义运算符。

有两种可能的解决方案：

1.  将第一列转换为数字类型（如果可能）：

    ```
    mydf[ , 1] <- as.numeric(mydf[ , 1]) 
    ```

2.  不要使用数据框的第一列：

    ```
    apply(mydf[ , -1], 1, practice) 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T16:37:43.233

另一种解决方案是使用`by`：

```
# Put in a character to mydf to test
mydf$foo<-'a'
# Run by
by(mydf,seq(nrow(mydf)),practice) 
```

# php - Codeigniter 2.1 - 连接两个表并在同一个查询中计数

> ID：13687462
> 
> 赞同：0
> 
> 时间：2012-12-03T16:23:37.107
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我有两张桌子：

```
news ->     
  id_news    
  title    
  body    
  date_created    
  image    
  category_id    

comments ->     
  id_comments    
  news_id    
  body    
  date_created 
```

如何编写查询以获取所有新闻，计算每条新闻的所有评论并在视图部分显示该查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:43:06.357

```
select
      N.ID_News,
      N.Title,
      N.Body,
      N.Date_Created,
      N.Image,
      N.Category_ID,
      count(C.ID_Comments) CommentCount
   from
      News N
         LEFT JOIN Comments C
            on N.ID_News = C.News_ID
   group by 
      N.ID_News
   order by
      whatever column(s) are important to you 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:31:12.100

由于我们正在计数，我们需要对 DRap 的 Query 做一个小改动：

```
select
      N.ID_News,
      N.Title,
      N.Body,
      N.Date_Created,
      N.Image,
      N.Category_ID,
      count(C.ID_Comments) CommentCount
   from
      News N
         LEFT JOIN Comments C
            on N.ID_News = C.News_ID
   order by
      whatever column(s) are important to you 
```

那只会给你一个结果..由于该查询缺少 group by 语句，我建议将该查询更改为：

```
select
      N.ID_News,
      N.Title,
      N.Body,
      N.Date_Created,
      N.Image,
      N.Category_ID,
      count(C.ID_Comments) CommentCount
   from
      News N
         LEFT JOIN Comments C
            on N.ID_News = C.News_ID
   group by
      N.title
   order by
      whatever column(s) are important to you 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T10:52:15.703

以 Active Record 格式写下来是这样的：

```
$this->db->select('N.ID_News, N.Title, N.Body, N.Date_Created, N.Image')
$this->db->select('N.Category_ID, count(C.ID_Comments) AS CommentCount');
$this->db->from('News AS N');
$this->db->join('commentas AS C', 'N.ID_News = C.News_ID', 'left');
$this->db->group_by('N.title'); 
```

在此之后，您可以使用按功能排序，根据需要对结果进行排序。

# c# - WPF popup staysopen=false 在点击外部时仍然保持弹出窗口打开

> ID：13687463
> 
> 赞同：4
> 
> 时间：2012-12-03T16:23:42.223
> 
> 标签：c#, wpf, xaml

我的问题是我在弹出窗口中创建了一个列表框，并设置弹出窗口的staysopen = false。但是每次弹出框弹出时，我都必须单击弹出框内的某些内容（例如在列表框中选择一个元素），然后单击弹出框外部，它会自动关闭。如果我不点击任何东西，即使我点击弹出窗口之外的其他元素，弹出窗口也会保持打开状态。我需要关闭弹出窗口而不需要我单击其中的任何元素。我能做些什么？这是代码，此代码还有一些其他样式链接，但只是一些颜色样式。

我的控制是当用户单击弹出框顶部的文本框时，列表框会弹出。如果用户什么都不做并单击此元素之外的任何位置，则弹出框将关闭。谢谢。

我可以使用下面的代码在 Silverlight 中完成它。但似乎在 wpf 中，它不再工作了。

`popupAncestor = FindHighestAncestor(this.ListBoxPopup); if (popupAncestor == null) { return; } popupAncestor.AddHandler(System.Windows.Controls.Primitives.Popup.MouseLeftButtonDownEvent, (MouseButtonEventHandler)ClosePopup, true);`

```
<Grid x:Name="MainGrid" Margin="0" VerticalAlignment="Center">
    <Grid.RowDefinitions>
        <RowDefinition Height="20"></RowDefinition>
        <RowDefinition Height="auto"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid Margin="1,1,1,0" x:Name="TopBar"  Visibility="Visible"  Grid.Row="0" Height="20" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="{StaticResource COL_BTN_LIGHT}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="19"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <TextBox x:Name="TextBoxSearchItem"  x:FieldModifier="private" HorizontalAlignment="Stretch" Grid.Column="0" VerticalAlignment="Stretch" BorderThickness="0,0,0,0" Background="Transparent" TextChanged="TextBoxSearchItem_TextChanged"></TextBox>
        <ToggleButton x:Name="DropDownArrorButton" Grid.Column="1" Style="{StaticResource ComboBoxReadonlyToggleButton}"></ToggleButton>
        <!--<TextBlock HorizontalAlignment="Center" Text="Search" Grid.ColumnSpan="2" TextBlock.FontStyle="Italic" Opacity="0.4" VerticalAlignment="Center"/>-->
    </Grid>
    <Grid Grid.Row="1" HorizontalAlignment="Stretch" x:Name="PopupGrid"  Margin="0,1,0,0" >
        <Popup x:Name="ListBoxPopup" StaysOpen="False" x:FieldModifier="private"  IsOpen="{Binding ElementName=DropDownArrorButton, Path=IsChecked, Mode=TwoWay}" 
               AllowsTransparency="true" Margin="0" HorizontalAlignment="Stretch" Placement="Bottom" 
               PlacementTarget="{Binding ElementName=TopBar}"  Opened="OnPopupOpened" Closed="OnPopupClosed"
               HorizontalOffset="{Binding ElementName=PopupGrid, Path=Value, Mode=TwoWay}"
                 VerticalOffset="{Binding ElementName=PopupGrid, Path=Value, Mode=TwoWay}">
            <ListBox x:Name="ListBoxContainer" Width="{Binding ElementName=MainGrid, Path=ActualWidth}" 
                     HorizontalContentAlignment="Stretch" SelectionMode="Single"  Height="200"  Margin="0" 
                     SelectionChanged="ListBoxContainer_SelectionChanged"
                     MouseDoubleClick="ListBoxContainer_MouseDoubleClick">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid HorizontalAlignment="Stretch">
                            <Border BorderBrush="{Binding SearchedBackColor}" BorderThickness="{Binding Indicator}" Width="{Binding ElementName=MainGrid, Path=ActualWidth}">
                                <TextBlock x:Name="ContentText" Text="{Binding Name}" Margin="1,0,0,0"/>
                            </Border>                               
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Popup>                
        <Border x:Name="listBorder" BorderBrush="{StaticResource COL_BTN}" BorderThickness="0,1,0,0" ></Border>     
    </Grid>                 
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:22:11.097

您应该在视图模型或控件中为“IsPopupOpen”创建一个依赖属性，如下所示来管理弹出窗口的状态。然后，您可以将 ToggleButton“IsChecked”和弹出“IsOpen”绑定到该 DP。

同样在您的 ToggleButton 上，设置“Focusable=false”和“IsThreeState=false”

```
 public bool IsDropDownOpen
    {
     get { return (bool)GetValue(IsDropDownOpenProperty); }
     set { SetValue(IsDropDownOpenProperty, value); }
    }        

    public static readonly DependencyProperty IsDropDownOpenProperty =
          DependencyProperty.Register("IsDropDownOpen", typeof(bool), typeof(Window), new UIPropertyMetadata(false)); 
```

祝你好运！

# perl - Perl 交换命令似乎不适用于输出重定向

> ID：13687466
> 
> 赞同：0
> 
> 时间：2012-12-03T16:24:00.787
> 
> 标签：perl, unix, solaris

我的输入`foo.txt`是这样的：

```
Grull^Zn Hernand^Zz 
```

其中 ^Z 解析为控制字符`\x1a`（`od -x`在文件上验证）

当我运行以下 Perl 命令时：

```
perl -pe s/\x1a//g foo.txt 
```

我得到输出：`Grulln Hernandz`

正如预期的那样。但是，当我将其重定向到文件时

```
perl -pe s/\x1a//g foo.txt > out.txt 
```

这些文件是相同的，由

```
diff -c out.txt foo.txt
No differences encountered 
```

如何强制此行为按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:29:33.320

我不知道您如何确定第一个版本有效，但它不适合我。

您需要转义正则表达式中的反斜杠，或者引用它（引用它更常见）。

```
$ hexdump -C input
00000000  61 62 63 1a 64 65 66 1a  67 68 69 0a              |abc.def.ghi.|
$ perl -pe s/\x1a//g input | hexdump -C
00000000  61 62 63 1a 64 65 66 1a  67 68 69 0a              |abc.def.ghi.|
$ perl -pe s/\\x1a//g input | hexdump -C
00000000  61 62 63 64 65 66 67 68  69 0a                    |abcdefghi.|
$ perl -pe 's/\x1a//g' input | hexdump -C
00000000  61 62 63 64 65 66 67 68  69 0a                    |abcdefghi.| 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T16:30:59.597

我不认为

```
perl -pe s/\x1a//g foo.txt 
```

做你认为它做的事。在任何理智的 solaris shell 中，未引用`\x`的被视为与 相同`x`，并且您正在运行与

```
perl -pe s/x1a//g foo.txt 
```

您可以通过执行来测试它

```
echo s/\x1a//g 
```

并查看传递给外壳的内容。你也可以试试

```
perl -pe s/\x1a//g foo.txt | od -c 
```

查看是否真的从您的输入中删除了控制字符。

正确的做法是将单行脚本括在单引号中：

```
perl -pe 's/\x1a//g' foo.txt > out.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:54:06.810

我最终最终做的（尽管我发现 mob 的解决方案也有效）不是输入，而是`\x1a`按住`Ctrl`，然后`v, z`

这也有利于更具可读性。

# ios - 检测未知数量的同时敲击

> ID：13687474
> 
> 赞同：0
> 
> 时间：2012-12-03T16:24:53.520
> 
> 标签：ios, gesture, tap, uitapgesturerecognizer

我正在开发一款可供两到四个人使用单个 iPad 使用的应用程序。他们每个人都将用一根或多根手指敲击。它们彼此不协调。所以手势可以被识别为任意数量的点击。我是否需要为每个手指数量的场景创建单独的手势识别器？我还需要知道每个水龙头的位置。

我知道 iPad 最多可以识别 11 次触摸，而这个应用程序可能会遇到这个限制。因此，如果我可以避免编写 11 个单独的识别器，那就太好了。

# android - Android 加速度计：SensorManager.DATA_X 已弃用 - 现在怎么办？

> ID：13687480
> 
> 赞同：4
> 
> 时间：2012-12-03T16:25:32.707
> 
> 标签：android, android-sensors

我使用 StackOverflow 的一些建议编写了一个加速度计应用程序（用于学习目的）。一切正常，但我在代码中收到“SensorManager.DATA_X 已弃用”消息作为警告：

```
// setup the textviews for displaying the accelerations
mAccValueViews[SensorManager.DATA_X] = (TextView) findViewById(R.id.accele_x_value);
mAccValueViews[SensorManager.DATA_Y] = (TextView) findViewById(R.id.accele_y_value);
mAccValueViews[SensorManager.DATA_Z] = (TextView) findViewById(R.id.accele_z_value); 
```

我尝试在这里和其他地方搜索我应该做什么而不是使用“SensorManager.DATA_X”，但我似乎找不到任何说明。

官方指南说要使用“传感器”，但我不知道怎么做！

如果有人可以提出上述新的“官方”方式，我将不胜感激。

***编辑*** 重新阅读文档后（这次是正确的！）我注意到“SensorManager.DATA_X”只返回一个int，它是onSensorChanged（int，float []）返回的数组中X值的索引。我能够将上面的代码更改为此，它完美地工作并且没有任何不推荐使用的警告：

```
// setup the textviews for displaying the accelerations
    mAccValueViews[0] = (TextView) findViewById(R.id.accele_x_value);
    mAccValueViews[1] = (TextView) findViewById(R.id.accele_y_value);
    mAccValueViews[2] = (TextView) findViewById(R.id.accele_z_value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:37:15.957

文档很清楚，创建你的传感器：

```
private SensorManager mSensorManager;
private Sensor mSensor;

mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);

if (mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER) != null){
    mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
} 
```

还有你的[Sensor](http://developer.android.com/reference/android/hardware/Sensor.html)，注册一个监听器来使用它：

```
mSensorManager.registerListener(this, mSensor, SensorManager.SENSOR_DELAY_NORMAL); 
```

然后，您可以使用 OnSensorChanged 获取[值](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)：

```
 @Override
  public final void onSensorChanged(SensorEvent event) {
    // Many sensors return 3 values, one for each axis.
    float xaccel = event.values[0];
    // Do something with this sensor value.
  } 
```

# security - 密码保护访问 2010 选项

> ID：13687481
> 
> 赞同：0
> 
> 时间：2012-12-03T16:25:53.147
> 
> 标签：security, ms-access, password-protection

我知道可以为访问数据库设置密码以防止用户打开它。

但是是否也可以设置密码以防止人们更改“选项”部分中的“当前数据库”选项？

我正在寻找类似于 Excels“保护工作簿”方法的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:28:20.913

这就是你所追求的吗？

1.打开Microsoft Access 2010并以独占模式打开您希望密码保护的数据库。您可以通过从文件菜单中选择打开并导航到您要加密的数据库然后单击一次来执行此操作。然后，不要只单击“打开”按钮，而是单击该按钮右侧的向下箭头图标。选择“独占打开”以独占模式打开数据库。

2.当数据库打开时，转到文件选项卡并单击信息按钮。

3.单击使用密码加密按钮。

4.为您的数据库选择一个强密码，并在“设置数据库密码”对话框的“密码”和“验证”框中输入该密码，如上图所示。完成此操作后，单击“确定”。

# xcode - 仅在 xcode 的实时检查中禁用特定警告

> ID：13687482
> 
> 赞同：2
> 
> 时间：2012-12-03T16:25:55.780
> 
> 标签：xcode, compiler-warnings

XCode 的实时问题跟踪在大多数情况下都很棒。但是当我还在写作的时候，它会抱怨一些警告，这很烦人。例如，未使用的变量：

![警告](../Images/3f0e8df186bb781015d39d735bd8ae1d.png)

我知道它没有被使用，我刚刚完成了那行并且还没有得到使用它的代码。我非常讨厌在没有警告的情况下进行编译（在 上`-Wall -Wextra -pedantic`，减去几个特定的​​警告），所以当我还没有机会解决它们时看到它们有点烦人。但是，我确实喜欢大多数实时构建警告，一旦我真正构建，我确实希望看到这些。

那么，有什么方法可以仅在实时问题检查中禁用某些警告，将它们保留在实际构建中？如果可能的话，我愿意将发布设置用于实时发布和调试以进行手动构建。

我也接受的一个潜在解决方法是将实时检查延迟到仅在 10-15 秒不活动后运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:59:05.417

Usually i used to do the following to avoid the "unused variable".

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wunused-variable"

NSArray *ary = [[NSArray alloc] init];
//your code area

#pragma clang diagnostic pop 
```

So the real time waring for "unused variable" is off on the section. and when i need to enable this i just commented out the "#pragma".

[Reference](http://useyourloaf.com/blog/2011/09/20/disabling-clang-compiler-warnings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:34:42.807

使用#pragma 禁用警告会影响实时预览/编译时间...我认为xcode 中没有这种方法。:(

# html - 在不同的屏幕分辨率上测试网站

> ID：13687488
> 
> 赞同：2
> 
> 时间：2012-12-03T16:26:01.523
> 
> 标签：html, testing

一位用户向我报告说，在他的 11 英寸 macbook air 上，一切都搞砸了。现在我不知道如何解决这个问题。也许有一些工具可以用来模拟 11 英寸 macbook air？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:31:33.653

如果您使用的是 Firefox 15 或更高版本，则可以通过按 Ctrl-Shift-M 或转到 Firefox 菜单 -> Web 开发人员 -> 响应式设计视图来使用响应式设计视图[。](https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_View)这使您可以轻松地调整页面大小（从常用分辨率列表中，或通过拖动边缘任意），而无需调整浏览器窗口的大小（以及让您将其调整为大于窗口的大小）。其他浏览器可能有类似的功能，但我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-24T22:32:40.493

如果您在键盘上按`Ctrl`++`Shift`和/或，那么它们将启动(Firefox) 或(Chrome) 模式。在这里，您可以手动调整窗口的宽度和高度以匹配您希望的任何设备尺寸，或者您也可以从一组预设的设备尺寸选项中进行选择。它还提供了以横向/纵向模式（适用于移动设备或平板电脑等便携式设备）查看所选尺寸的选项，以查看您的网站在这些不同方向上的外观。`M``Mozilla Firefox``Google Chrome``Responsive Design View``Device Toolbar`

我不确定是否有其他浏览器，但您可以尝试在您选择的另一个浏览器上使用上述键盘快捷键，看看它是否也可以在那里工作。

或者，您可以通过导航到以下位置手动切换`Responsive Design View`(Firefox) 或设备工具栏 (Chrome) 模式：

**火狐 59**

`Menu (hamburger icon on top right) > Web Developer > Responsive Design Mode`

**铬 65**

`Menu (Three-dot icon on top right) > More Tools > Developer Tools`

或者

只需按`Ctrl`+ `Shift`+`I`即可启动开发者工具

开发者工具启动后，单击`toggle device toolbar`开发者工具菜单左上角的图标，以响应式设计视图查看网页。

同样，我只知道在`Mozilla Firefox`and中这样做`Google Chrome`，因此其他浏览器可能有类似或不同的方法。

**更新**

**边缘浏览器（Windows 10）**

使用键盘快捷键`Ctrl`++ ，**或**导航至打开开发人员工具菜单，然后转到选项卡以查看用于将窗口自定义为不同设备大小和尺寸`SHIFT`的选项。`I`**`Menu (three-dot icon on top right) > F12 Developer Tools``Emulation`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:33:16.613

首先，您不需要模拟 11 英寸的屏幕，而是模拟屏幕分辨率，因为无论屏幕是多少英寸，分辨率都可以有多个值。

我建议您使用可用于 Firefox 和 chrome 的“web developer”之类的插件（其他人不知道），它将帮助您以不同的分辨率调整浏览器的大小以进行测试。

铬：[https ://chrome.google.com/webstore/detail/web-developer/bfbameneiokkgbdmiekhjnmfkcnldhhm](https://chrome.google.com/webstore/detail/web-developer/bfbameneiokkgbdmiekhjnmfkcnldhhm)

火狐：[https ://addons.mozilla.org/fr/firefox/addon/web-developer/](https://addons.mozilla.org/fr/firefox/addon/web-developer/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T19:46:28.710

您还可以使用网络应用程序以不同的屏幕分辨率测试您的网站。 [http://whatismyscreenresolution.net/multi-screen-test](http://whatismyscreenresolution.net/multi-screen-test)

1.  转到以[不同分辨率测试网站的工具](http://whatismyscreenresolution.net/multi-screen-test)，输入您网站的网址，然后点击“测试”按钮
2.  获取 MacBook Air 的分辨率并在工具栏中输入。

这个工具非常好，除了测试你的 MacBook Air 网站外，你还可以测试不同的设备分辨率**

# android - 同步我的安卓动画

> ID：13687492
> 
> 赞同：1
> 
> 时间：2012-12-03T16:26:09.777
> 
> 标签：android, android-asynctask, android-animation

我正在创建一个简单的游戏，比如名为 Simon Game 的游戏。它的作用是当我按下屏幕上的开始按钮时，它会随机创建 4 个按钮序列（绿色、红色、蓝色或黄色）。假设选择的颜色在随机生成器创建它们时会闪烁，但闪烁的动画都发生在最后，在播放每个 Tone 之后。我想在选择按钮时同步，有人可以帮我吗？

```
private OnClickListener startListenerS = new OnClickListener() {
    public void onClick(View v) {

         random = new Random();
         counter = 0;

         sequenceComparison = new int[4];

         Animation animation = new AlphaAnimation(1, (float) 0.5); // Change alpha from fully visible to invisible
         animation.setDuration(10); // duration - half a second
         animation.setInterpolator(new LinearInterpolator()); // do not alter animation rate
         animation.setRepeatMode(Animation.REVERSE); // Reverse animation at the end so the button will fade back in

         Button buttonStart = (Button)findViewById(R.id.Button01);        
         buttonStart.setOnClickListener(startListener); // Register the onClick listener with the implementation above
         buttonStart.setBackgroundColor (Color.RED);  

         Button buttonStart1 = (Button)findViewById(R.id.Button02);        
         buttonStart1.setOnClickListener(startListener1); // Register the onClick listener with the implementation above
         buttonStart1.setBackgroundColor (Color.GREEN);

         Button buttonStart2 = (Button)findViewById(R.id.Button03);        
         buttonStart2.setOnClickListener(startListener2); // Register the onClick listener with the implementation above
         buttonStart2.setBackgroundColor (Color.YELLOW);

         Button buttonStart3 = (Button)findViewById(R.id.button1);        
         buttonStart3.setOnClickListener(startListener3); // Register the onClick listener with the implementation above
         buttonStart3.setBackgroundColor (Color.BLUE);

         sequenceArray = new int[sequenceTest];
         for(int i = 0; i < sequenceTest; i++) {
             int randnum = random.nextInt (sequenceTest) + 1;

             if(randnum == 1) {

                 sequenceArray[i] = 1; // THIS IS TO STORE THE CORRECT SEQUENCE IN THE ARRAY REPRESENTING RED BUTTON

                 //buttonStart.refreshDrawableState();
                 try {
                     playTone();
                     buttonStart.startAnimation(animation);
                     buttonStart.refreshDrawableState();
                     Thread.sleep(1000); // 1 second pause
                  } 
                  catch (InterruptedException e) {
                     e.printStackTrace();
                 } 
                 Thread.currentThread();
                 System.out.println("test Sequence Test: " + i + " " + sequenceArray[i]);
             }
             else if(randnum == 2) {
                 sequenceArray[i] = 2; // THIS IS TO STORE THE CORRECT SEQUENCE IN THE ARRAY REPRESENTING GREEN BUTTON
                 //buttonStart1.refreshDrawableState();
                 try {
                     playTone2();
                     buttonStart1.startAnimation(animation);
                     buttonStart1.refreshDrawableState();
                     Thread.sleep(1000); // 1 second pause
                  } 
                  catch (InterruptedException e) {
                     e.printStackTrace();
                  } 
                 Thread.currentThread();
                 System.out.println("test Sequence Test: " + i + " " + sequenceArray[i]);
             }

             else if(randnum == 3) {
                 sequenceArray[i] = 3; // THIS IS TO STORE THE CORRECT SEQUENCE IN THE ARRAY REPRESENTING YELLOW BUTTON
                 try {
                     playTone3();
                     buttonStart2.startAnimation(animation);
                     buttonStart2.refreshDrawableState();
                     Thread.sleep(1000);
                 } 
                 catch (InterruptedException e) {
                     e.printStackTrace();
                 }
                 Thread.currentThread();
                 System.out.println("test Sequence Test: " + i + " " + sequenceArray[i]);
             }
             else {
                 sequenceArray[i] = 4; // THIS IS TO STORE THE CORRECT SEQUENCE IN THE ARRAY REPRESENTING BLUE
                 try {
                     playTone4();
                     buttonStart3.startAnimation (animation);
                     buttonStart3.refreshDrawableState();
                     Thread.sleep(1000);
                 } 
                 catch (InterruptedException e) {
                     e.printStackTrace();
                 }
                 Thread.currentThread();
                 System.out.println("test Sequence Test: " + i + " " + sequenceArray[i]);
             }
         }
         // testing if the correct sequence is stored
         for (int i = 0; i < sequenceTest; i++) {
             System.out.println("Sequence Test: " + i + " " + sequenceArray[i]);

         }

    }
};
// *********************************** BUTTON CLICK LISTENER ***********************************
       private OnClickListener startListener = new OnClickListener() {
           public void onClick(View v) {

               Animation animation = new AlphaAnimation(1, (float) 0.5); // Change alpha from fully visible to invisible
               animation.setDuration(500); // duration - half a second
               animation.setInterpolator(new LinearInterpolator()); // do not alter animation rate
               animation.setRepeatMode(Animation.REVERSE); // Reverse animation at the end so the button will fade back in 

               Button buttonStart = (Button)findViewById(R.id.Button01);        
               buttonStart.setOnClickListener(startListener); // Register the onClick listener with the implementation above
               buttonStart.setBackgroundColor (Color.RED);  
               buttonStart.startAnimation(animation);

               sequenceComparison[counter] = 1;
               System.out.println("red clicked" + sequenceComparison[counter]);
                playTone();      
                if(sequenceComparison[counter] == sequenceArray[counter]){
                    System.out.println("correct sequence");
                }
                else {
                    System.out.println ("Sorry, you clicked wrong");
                }
                counter++;
           }
       }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T17:04:59.050

首先，`animation.start()`在`animation.set()`调用后使用动画实例启动。然后，不使用该`startAnimation(animation)`方法，而是使用`setAnimation(animation)`. 这将同步任何使用动画的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:38:20.657

首先，当心`Thread.Sleep()`在`MainThread`, **always**中使用！

我找到了一个可以满足您需求的先前答案：

[Android 按钮动画与时间同步](https://stackoverflow.com/questions/12278228/android-button-animations-synchronize-with-timing)

让我知道！

# ruby-on-rails - 设计 form_for，如何使用 check_box_tag 数组

> ID：13687493
> 
> 赞同：1
> 
> 时间：2012-12-03T16:26:12.397
> 
> 标签：ruby-on-rails, acts-as-taggable-on

我`acts-as-taggable-on`用来保存多个用户兴趣。我尝试在注册表单上显示固定的复选框列表。下面的代码有效。

```
= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
%p
  - ["music","art","movies"].each do |interest|
    = check_box_tag "user[interested_list][]", interest 
```

问题是，当点击“提交”时，如果页面由于缺少某些字段而重新加载，我没有看到之前选中的复选框，它们都被重置了。

我知道我错过了价值，但我一直在尝试使用类似的东西，但它不起作用

```
= check_box_tag "user[interested_list][]", interest, params[:user][:interested_list][interest] 
```

我收到以下错误

nil:NilClass 的未定义方法“[]”

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:41:26.747

解决了。

我只需要检查该值是否存在于数组中。

```
= check_box_tag "user[interested_list][]", interest, session[:interested_list].include?(interest) 
```

# interrupt - 如何在 TSR 程序中使屏幕闪烁？

> ID：13687496
> 
> 赞同：0
> 
> 时间：2012-12-03T16:26:17.563
> 
> 标签：interrupt, keyboardinterrupt, tsr

我编写了一个用作屏幕保护程序的程序，即如果没有按下键盘按钮，10 秒后所有命令提示符屏幕都会被清除。简而言之，我已经迷上了定时器和键盘中断。但我希望程序显示闪烁的屏幕，即显示命令提示符和空白屏幕的所有文本。但我目前的情况是，如果没有按下任何按钮，它会在 10 秒后继续显示空白屏幕。如何修改我的程序以显示在清除屏幕和文本数据之间交替显示闪烁屏幕，而不仅仅是清除屏幕。这是我的程序：

```
#include <dos.h>
#include <conio.h>

void interrupt (*oldTimer)();
void interrupt (*oldKey)();
void interrupt newTimer();
void interrupt newKey();
char far *scr = (char far*) 0xB8000000;
int i, t=0, m=0;
char charscr[4000];

void main()
{
 oldTimer=getvect(8);
 oldKey=getvect(9);
 setvect(8,newTimer);
 setvect(9,newKey);

 getch();
 keep (0,1000);

}

void interrupt newTimer()
{
t++;
if((t>=182)&&(m==0))
{
for (i=0;i<4000;i++)
charscr [i]=*(scr+i);
for (i=0;i<=4000;i+=2)

    {
    *(scr+i)=0x20;
    *(scr+i+1)=0x07;
    }

t=0; m=1;
}
(*oldTimer)();
 }

 void interrupt newKey()
 {
 int w;
if(m==1)
  {
   for (w=0; w<4000;w++)
  *(scr+w)=charscr[w];
   m=0;
     }
(*oldKey)();
  } 
```

抱歉我的缩进很差。我发现在这个网站上缩进代码非常困难。

# ruby - 将对象传递给 Hash.new 时的含义是什么

> ID：13687498
> 
> 赞同：0
> 
> 时间：2012-12-03T16:26:19.400
> 
> 标签：ruby, object, hash

我在调整 时遇到了这段代码`ghi`，我无法弄清楚将对象传递给对象的含义`ALIASES`。任何人都可以帮助解释`[key] if /^\d+$/ === key`以下代码中的行吗？

```
ALIASES = Hash.new { |_, key|
  [key] if /^\d+$/ === key
}.update({...}) 
```

[https://github.com/yangchenyun/ghi/blob/reading/lib/ghi.rb#L119-138](https://github.com/yangchenyun/ghi/blob/reading/lib/ghi.rb#L119-138)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:42:24.593

此代码设置默认值，当访问不存在的键时返回该值。

在这种特定情况下，如果给定是整数的表示，则默认设置为`key`在中返回给定。`Array``key``String`

```
hash = Hash.new do |_, key|
  [key] if /^\d+$/ === key
end

hash["foo"].inspect  # => nil
hash[123].inspect    # => nil
hash["123"].inspect  # => ["123"] 
```

正则表达式匹配的一些示例：

```
/^\d+$/ === 123     # => false
/^\d+$/ === "a123"  # => false
/^\d+$/ === "123a"  # => false
/^\d+$/ === "1.23"  # => false
/^\d+$/ === "123"   # => true 
```

另一个（更简单的）默认值示例：

```
hash = Hash.new { |_, key| "this key does not exist" }

hash["foo"]           # => "this key does not exist"
hash["foo"] = "bar"
hash["foo"]           # => "bar" 
```

关于块参数命名：您可以将第一个参数命名为您喜欢的任何名称，但一些开发人员喜欢命名未使用的块运算符`_`。这样一目了然，你并不关心这个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:41:06.697

这`[key] if /^\d+$/ === key`是[default_proc](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-default_proc)。每次在哈希中找不到*密钥*时它都会运行。如果“123”不是现有键，`ALIASES["123"]`将返回。`["123"]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:41:53.597

请在[此处](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new)查看 Hash::new 文档。它说：

返回一个新的空哈希。如果此哈希随后被不对应于哈希条目的键访问，则返回的值取决于用于创建哈希的 new 的样式。如果指定了一个块，它将使用哈希对象和键调用，并且应该返回默认值。

所以“_”是被设置对象的值，作者并不关心。中间行只检查 key 是否仅包含数字，如果不是，则将 key value 分配给具有此 key value 的数组。如果密钥仅包含数字，则忽略它。

Ruby 的 Regexp#===[只是 Regexp#=~ 的别名](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-3D-3D-3D)。

请注意——这是一段可怕的、难以阅读的代码。仅仅因为你可以写这样的东西并不意味着你应该这样做。请不要受到启发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:42:29.237

[这是Hash::new Ruby 文档](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new)的摘录：

> 如果指定了 obj，则此单个对象将用于所有默认值。如果指定了一个块，它将使用哈希对象和键调用，并且应该返回默认值。如果需要，将值存储在散列中是块的责任。

在您的情况下，它是一个块，它定义了一个在找不到键时将返回的默认值。在这种情况下，仅当键与给定的正则表达式匹配时才会返回它`/^\d+$/`，`[key]`这意味着它将在数组中返回。

# javascript - 多个文件上传 - 通过 Ajax 请求检查服务器上存在哪些文件

> ID：13687499
> 
> 赞同：0
> 
> 时间：2012-12-03T16:26:22.977
> 
> 标签：javascript, ajax, file-upload

我似乎找不到这个脚本的想法有什么问题，也无法让它发挥作用。也许您可以帮助我，我们将不胜感激。

我正在处理一个多文件上传表单。在上传之前（而不是在那之前），我想检查上传目录中是否已经存在一些文件（如果是，哪些文件）。我正在使用 XMLHttpRequests 来做到这一点。由于我无法控制获得响应所需的确切时间，我使用数组为所有变量运行一个循环，因此它们（至少这是我的想法 ;-)）可以彼此独立地完成工作。

```
function NoOverwrite() {
var fields = document.querySelectorAll("input[type=file]");
var existing = new Array(); //files existing on server
var checkFile = new Array();
var file = new Array();
var fileUrl = new Array();
for (var i = 0; i < fields.length; i++) {
    file[i] = document.getElementById('file'+i).files[0];  
    //the input- fields of the form are called file0, file1, file2, and so on...
    if(file[i]) {
        fileUrl[i] = 'upload_path/' + file[i].name; 
        //up to here everything works fine - when setting an alert after this I get 
        //the names of all the names of the files selected in the file fields! 
        checkFile[i] = new XMLHttpRequest();
        checkFile[i].open('HEAD', fileUrl[i], true);
        checkFile[i].onreadystatechange = function() {
            if (checkFile[i].readyState == 4) {
                if (checkFile[i].status == 200) {
                    existing[i] = true; 
                    alert(existing[i]);     //this never came up... 
                }
            }
        checkFile[i].send();
        }
    }
}
if (existing.indexOf(true) == -1) {
    //none of the files to be uploaded are already on server
    //this _always_ was fired - even when there are files with the same name on the server!!!??
    return true; 
}
else {
    //list filenames and/or upload field numbers of the files that already exist on server
    return false;
   }
} 
```

我的想法有错误吗？还是我的代码中有一些简单的错误？有什么想法可以归档我的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:39:28.853

我发现您的代码存在两个潜在问题。

第一个是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)：如果 upload_path 与当前页面不在同一个域中，则请求可能会失败。

第二个是你的索引：随着 i 的增加，当你这样做时`alert(existing[i])`i 已经等于 fields.length。您需要创建一个闭包：

```
for (var i = 0; i < fields.length; i++) {
    (function(index){
    // use index within your code
    })(i); // the loop will execute with index=i
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:15:36.153

好的，我找到了答案 - 以防万一有人感兴趣......

除了 Christophes 说必须为循环创建一个闭包之外，对数组的检查当然也必须在该循环函数内进行，否则会立即检查（即当没有 XMLHttpRequests 的单个响应时）然而），因为它只检查一次，它总是否定的。除此之外，在我们检查数组中的值之前，我们必须确保所有请求都已完成（不仅仅是正在处理）。我们通过比较已填写的上传字段的数量与已设置到字符串中的值的数量来做到这一点（这发生在相应请求的就绪状态响应返回之后）。代码中有更多解释。

干杯，克里斯

```
function NoOverwrite() {
var fields = document.querySelectorAll("input[type=file]");
var existing = new Array();
var checkFile = new Array();
var file = new Array();
var fileUrl = new Array();
var counter = 0;
for (var i = 0; i < fields.length; i++) {
    (function(index){
        file[index] = document.getElementById('file'+i).files[0];
        if(file[index]) {
            fileUrl[index] = 'upload_path/' + file[index].name;
            checkFile[index] = new XMLHttpRequest();
            checkFile[index].onreadystatechange = function() {
                if (checkFile[index].readyState == 4) {
                    if (checkFile[index].status == 200) {
                        existing[index] = true; 
                        counter += 1;
                    }
                    else {
                        existing[index] = false;
                        counter += 1;
                    }
                    if (counter == fileUrl.length) { 
                            //existing.length of the array "true, false,,true" (i.e. with one undefined value) would deliver "4". 
                            //therefore we have to check for the number of set variables in the string rather than the strings length. 
                            //we use a counter for that purpose. everything after this point is only executed when the last file has been checked! 
                        if (existing.indexOf(true) == -1) {
                            //none of the files to be uploaded are already on server
                            return true; 
                        }
                        else {
                            //list filenames and/or upload field numbers of the files that already exist on server
                            //   ->> inform user... 
                            return false;
                        }
                    }
                }
            }
            checkFile[index].open('HEAD', fileUrl[index], true);
            checkFile[index].send();
        }
    })(i);
}
} 
```

# c# - 即使其中一个收件人无效，如何在 C# 中发送电子邮件？

> ID：13687500
> 
> 赞同：3
> 
> 时间：2012-12-03T16:26:24.847
> 
> 标签：c#, .net

我正在尝试向多个收件人发送电子邮件，并且当所有收件人都有有效的电子邮件地址时它工作正常。

但是，当其中一个收件人的电子邮件地址无效时，即使电子邮件地址有效的其他收件人也不会发送电子邮件，并且我遇到了异常：

> 服务器拒绝了一个或多个收件人地址。服务器响应为：550 #5.1.0 地址被拒绝。

即使其中一个电子邮件地址无效，有什么方法可以将电子邮件发送给其他有效的收件人？

```
public static void sendMails(string ptxtSubject, string ptxtBody)
{
    string txtTo = "valid1@aaa.com,valid2@aaa.com,invalid1@aaa.com";
    string txtFrom = "valid@aaa.com";
    string txtSubject = ptxtSubject;
    string txtBody = ptxtBody;

    MailMessage mail = new MailMessage();
    mail.To = txtTo;
    mail.From = txtFrom;
    mail.Subject = txtSubject;
    mail.Body = txtBody;

    try
    {
        SmtpMail.SmtpServer ="smtp.aaa.com";
        SmtpMail.Send(mail);
    }
    catch (Exception ex)
    {
       //log the exception
       throw;  
    }
} 
```

我可以向他们每个人发送单独的邮件，但用户（收件人）将不知道电子邮件分发列表中还有谁。我的要求是每个人都应该能够知道还有谁在接收电子邮件。

Outlook 将电子邮件发送给所有有效用户，并通知我们无效用户。无论如何我们可以使用 C# 做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:31:59.720

除非所有收件人都明确认识彼此（并且他们不介意其他人知道他们正在接收您的电子邮件），否则您无论如何都应该发送单独的电子邮件。

这也可以解决您的问题，即如果一个发送操作失败，它不会中断其他操作。请注意，在您的情况下，初始中继似乎失败，因为地址来自与[SMTP](https://www.rfc-editor.org/rfc/rfc5321)服务器相同的主机。

一旦电子邮件被路由到多个主机，成功/失败就不再相互依赖。例如，gmail.com 服务器可能不知道/不在乎 yahoo.com 服务器拒绝了收件人。

如果性能是一个问题，您可以[异步发送消息](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)以获得更好的吞吐量。请注意，您仍然可以在异步发送时处理异常。

与往常一样，如果您要发送任何数量的电子邮件，建议使用 3rd 方服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:32:35.217

我真的看不出有什么办法可以做到这一点。发送电子邮件`SmtpMail.Send()`几乎是一个原子功能，您需要正确的数据才能正常工作。

我在这里看到的唯一选择是向每个收件人发送单独的电子邮件。

# c# - 方法中的 C# 参数值

> ID：13687502
> 
> 赞同：-9
> 
> 时间：2012-12-03T16:26:32.040
> 
> 标签：c#

如果我写`a = a +115`我`MessageBox`将返回 215，但如果像`a=115;`这样写将显示 115。

这是为什么？

```
private void button1_Click(object sender, EventArgs e)
{
    int c=100;
    MessageBox.Show(Count(c).ToString());
}

public int Count(int a)
{
    a=115;
    return a;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:28:48.733

这个问题很难解读。我认为您已经尝试了您命名的函数的两个不同版本`Count`，如下所示。

考虑这个版本的函数：

```
public int Count1(int a)
{
    a = 115;
    return a;
} 
```

无论您作为参数传递什么值，它都会返回 115。您正在使用 assignment 覆盖参数`a = 115`。因此，该参数完全没有意义。

现在是另一个版本：

```
public int Count2(int a)
{
    a = a + 115;
    return a;
} 
```

此版本的函数接收变量中的参数`a`。然后它将 115 添加到该值，并返回结果。所以当你这样称呼它时：

```
Count2(100) 
```

返回的值为 215。

如果您编写这样的函数可能会更容易理解：

```
public int Count1(int a)
{
    return 115; //very clearly the input parameter is ignored
}

public int Count2(int a)
{
    return a + 115; //but in this version, the input parameter is used
} 
```

这些版本与您的版本完全相同，但我希望您会发现它们更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:28:18.267

a = 115 将整数变量设置为 115，a += 115 或 a = a + 115 会将 115 添加到 a 的值，然后返回该值的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:29:00.450

如果您传递`100`给具有 a = 100 + 115 语句的函数，`a = a + 115`那么它应该返回 215

```
public int Count(int a)
{
    a = a + 115; // a = 100 + 115 
    return a;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T16:29:29.250

当您这样做时`a=115`，它会显示，`115`因为您正在分配`115`给`a`。当您使用 时`=`，您将右值分配给左值。当你这样做时，你所做的和你做的差不多`int c=100`。你指定`c`为`100`.

当你传入`c`, `c`is `100`，而你的公式是`a=a+115`, 那么`a`将会是`215`. 当你像你正在做的那样传递一个值时，`a`将是`100`. 所以，当你做你的公式时`a=a+115`，你说的是`a=100+115`，你会得到`215`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T16:42:51.617

是否因为您认为“a”和“c”是不同的值而感到困惑？

> Count(int a) 方法并不关心值的名称最初是“c”。一旦它在该方法内部，它将仅称为“a”。

```
public int Count(int a)
{
    a = a+115;
    return a;
} 
```

所以一步一步：

> 1) 将值 100 传递给 Count() 方法。(a = 100)
> 
> 2) Count() 将 a 的值设置为 100 + 115。 (a = 215)
> 
> 3) 215 返回到您的调用方法。
> 
> 4）您的调用方法将 215 显示为字符串。

这有帮助吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-03T16:43:49.883

以下是您的代码的三个版本，用于演示正在发生的事情，以及我认为您真正要问的内容：

原来的：

```
private void button1_Click(object sender, EventArgs e)
{
    // Set c to 100
    int c=100;

    // Print the result of Count, which (see below) is ALWAYS 115.
    MessageBox.Show(Count(c).ToString());
}

public int Count(int a)
{
    // Set a to 115 (there is no add here, I think this is a typo)
    a=115;
    // Return a, which is ALWAYS 115.
    return a;
} 
```

我认为你的意思是：

```
private void button1_Click(object sender, EventArgs e)
{
    // Set c to 100
    int c=100;

    // Print the result of Count, which will be 215.
    MessageBox.Show(Count(c).ToString());
}

public int Count(int a)
{
    // Add 115 to a.
    a+=115;

    // Return the result (if a == 100, this will return 215)
    return a;
} 
```

我认为你得到的是：

```
private void button1_Click(object sender, EventArgs e)
{
    // Set c to 100
    int c=100;

    // Call the count function, passing in a reference for c.
    Count(ref c);

    // Print the value of c. This will be 215 because the Count function set c to a new value.
    MessageBox.Show(c.ToString());
}

public void Count(ref int a)
{
    a+=115;
} 
```

在最后一种情况下，我将函数更改为`public void Count(ref int a)`. 修饰符允许函数使用`ref`对另一个变量的引用来分配新值。通常，参数是“按值”，其中传入变量值的副本。

请注意，在这种情况下，首选第二个版本。引用参数只应在真正需要时使用，而不是作为简单返回值的替代品。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-03T16:30:39.537

您的`Count()`方法只是丢弃它传递的值并返回`115`。如果您替换`a=115`为`a=a+115`并通过它`100`，它将返回 215。这一切都符合预期。

`a=a+115`意思是“取 的值`a`，加上 115，然后将总数分配给`a`。”

这一切都按预期工作。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-03T16:29:45.503

看起来您想知道变量如何`a`转换为您的消息框。这是因为变量`a`在您的`count()`函数中。更改其值会更改 count 函数的结果。并且由于您的消息框从 获取其值`count`，因此您拥有它。

# linux - 内核中 udp 标头的 skb_push 在哪里？

> ID：13687507
> 
> 赞同：0
> 
> 时间：2012-12-03T16:26:48.153
> 
> 标签：linux, udp, kernel

我一直在寻找整个下午的 udp 数据包发送问题。据说sendmsg系统调用会先到inet_sendmsg，然后是udp_sendmsg，然后是udp_push_pending_frames，在这个函数中，UDP header是在ip_push_pending_frames之前填充的。但是，根据[http://vger.kernel.org/~davem/skb_data.html](http://vger.kernel.org/~davem/skb_data.html)，UDP 层应该有一个纯用户数据作为 skb 中的数据，它 skb_push 为 UDP 标头腾出空间。我只是找不到它。

任何人都可以提供一些线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:52:32.780

您将`skb_push`在`include/linux/skbuff.h`内核源代码中找到 - 它是一个内联函数，因此它位于头文件而不是普通源文件中。

# objective-c - 即使在范围外使用，在范围内创建的对象也会被释放

> ID：13687509
> 
> 赞同：13
> 
> 时间：2012-12-03T16:26:50.413
> 
> 标签：objective-c, automatic-ref-counting, llvm, clang

**更新：**这已在 iOS 6.1 DP3 SDK 中修复。

在使用默认发布构建配置（调试似乎工作正常）使用 ARC 构建时，我发现了一个释放后使用的崩溃。当在具有非常量条件的 if 范围内创建对象，将其分配给范围外的变量，然后仅使用 Objective-C 数组或字典文字引用该变量时，就会出现问题。

这是我设法找到的最小的可重现案例：

```
void test(BOOL arg)
{
    id obj = nil;

    if (arg) {
        obj = [NSObject new];
    }

    // obj already deallocated here
    @[obj];

    // but using NSArray works
    //[NSArray arrayWithObject:obj];

    // @[obj] works if obj is referenced i.e. by NSLog print out
    //NSLog(@"%@", obj);
}

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        test(YES);
    }
    return 0;
} 
```

当我在启用僵尸对象的情况下构建和运行它时，我收到以下错误消息：

```
-[NSObject retain]: message sent to deallocated instance 0x100109100 
```

正如我在代码中评论的那样，如果`obj`以其他方式引用它，它可以正常工作，比如 with`NSLog`或 using `NSArray`。我是否误解了如何使用 ARC 和作用域释放对象，或者这是 LLVM 或 Clang 中的优化错误？

我正在使用 Xcode 4.5.2 和 clang 版本 4.1 (tags/Apple/clang-421.11.66) (基于 LLVM 3.1svn)。我可以在为 iOS 模拟器和 Mac OS X 构建 x86 64 位时重现它，并且我很确定在为 ARM 构建时会出现同样的问题，因为在 iPhone 上运行发布构建时首次发现了该问题。

我已经向 Apple 提交了错误报告并创建了一个[开放的雷达报告](http://openradar.appspot.com/radar?id=2377401)。

如果有的话，我错过了什么？

**更新**，做了一些更多的实验：

正如 Gabro 指出的那样，编译器会转换`@[]`为`[NSArray arrayWithObjects:count:]`语句，所以我做了一些测试：

```
// works
id a[] = {obj};
[NSArray arrayWithObjects:a count:1];

// does not work
const id *b = (id[]){obj};
[NSArray arrayWithObjects:b count:1];

// does not work
[NSArray arrayWithObjects:(id[]){obj} count:1]; 
```

所以我的猜测是，当结合 ARC 和匿名 C 数组时会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:37:19.020

我刚刚测试了为 OSX (x86 64) 和 iOS Simulator 构建的以下代码，但我无法重现该错误

```
 void test(BOOL arg) {
     id obj = nil;

    if (arg) {
        obj = [NSObject new];
    }
    @[obj];
    NSLog(@"Hi there");
}

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        test(YES);
    }
    return 0;
} 
```

上面的代码只是`Hi there`在控制台中打印并返回。

我的配置和你的一样：XCode 4.5.2 和 Apple clang 4.1 (tags/Apple/clang-421.11.66) (基于 LLVM 3.1svn) 作为编译器。

**编辑**

我还尝试从命令行编译（在`#include <Foundation/Foundation.h>` 上面示例的开头添加之后）使用

```
clang -fobjc-arc -framework Foundation main.m 
```

结果又是

```
2012-12-03 12:47:45.647 a.out[39421:707] Hi there 
```

**编辑 2** 正如评论中指出的那样，可以重现增加优化级别的错误`-O0`。总结：

```
clang -O0 -fobjc-arc -framework Foundation main.m 
```

该程序按预期工作

```
clang -O1 -fobjc-arc -framework Foundation main.m 
```

问题中出现的错误出现了。这适用于任何优化级别`-O0`

这绝对是编译器中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T19:51:44.670

You're not missing anything. It's a compiler bug.

# hibernate - 休眠 + Resteasy + Blobstream

> ID：13687513
> 
> 赞同：0
> 
> 时间：2012-12-03T16:27:04.347
> 
> 标签：hibernate, session, blob, transactional

我正在使用resteasy并使用hibernate保存blob

我已经在视图中配置了打开的会话

我的休息处理程序是非事务性的，我检索 java.sql.blob 的服务是事务性的。

问题：在服务中检索 blob 后 jdbc-connection 被 HibernateTransactionManager:doCleanupAfterCompletion 关闭（休眠会话未关闭）

所以 rest 以后不能读取 blob 流，因为它只有在相同的 jdbc-connection 仍然打开时才有效

在事务性服务功能之后，我如何休眠教不关闭 jdbc 连接？

会话关闭时应该关闭它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T13:37:41.220

我通过为 Blob 创建一个 Provider 来解决它，从 InputSTream-Provider 采用

```
@Provider
@Produces("*/*")
public class BlobProvider implements MessageBodyWriter<Blob> {

    public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return Blob.class.isAssignableFrom(type);
    }

    public long getSize(Blob blob, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return -1;
    }

    public void writeTo(Blob blob, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap<String, Object> httpHeaders, OutputStream entityStream) throws IOException {
        SessionFactory sessionFactory = (SessionFactory) Utils.getBean("sessionFactory");
        sessionFactory.getCurrentSession().beginTransaction();
        InputStream inputStream = null;
        try {
            inputStream = blob.getBinaryStream();
            int c = inputStream.read();
            if (c == -1) {
                httpHeaders.putSingle(HttpHeaderNames.CONTENT_LENGTH, Integer.toString(0));
                entityStream.write(new byte[0]); // fix RESTEASY-204
                return;
            } else
                entityStream.write(c);
            ProviderHelper.writeTo(inputStream, entityStream);
        } catch (SQLException e) {
            Utils.logError(e);
        } finally {
            if (inputStream != null)
                inputStream.close();
        }
        sessionFactory.getCurrentSession().getTransaction().commit();
    }
} 
```

# c# - C# - 检查unix文件夹是否存在

> ID：13687526
> 
> 赞同：0
> 
> 时间：2012-12-03T16:28:04.923
> 
> 标签：c#, unix, sharpssh

我需要使用 SharpSsh 从我的 C# 应用程序中验证是否存在 unix 文件夹。
我想试试这个：

```
SshExec.RunCommand("-d " + folder) 
```

但无论文件夹是否存在，结果始终为“2”。我可以使用以下方法实现一些东西：

```
Sftp.GetFileList(folder) 
```

但不要这样做，因为该文件夹可能包含大量文件，并且在检索所有文件时会导致延迟，这并不优雅。

有任何想法吗？

**编辑：** 我试过这个：

```
string folder = "/foldername";
string result = sshExec.RunCommand("[ -d " + folder + "] && echo 'true' || echo 'false'");

if (result == "false") 
throw new Exception("Directory " + foldername+ " + is not found."); 
```

即使目录存在，字符串 'result' 也设置为 "false\n"。如果我跳过检查，我可以毫无问题地使用该目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:30:51.557

利用

> SshExec.RunCommand("ls -la" + 文件夹)

或者

> SshExec.RunCommand("ls" + 文件夹)

如果您的文件夹没有隐藏并且您不需要大小信息

如果存在，将使用权限和文件夹信息填充您的输出字符串的廉价命令

# firefox - 在 Firefox 中使用 EXSLT func:script 的示例

> ID：13687534
> 
> 赞同：0
> 
> 时间：2012-12-03T16:28:20.617
> 
> 标签：firefox, xslt, exslt

谁能指出一个在 Firefox 上运行的 xslt 文件中使用 EXSLT func:script 的实际完整示例（因此，如果我的 XML 文件具有 xml-stylesheet 指令，它将使用外部 js 文件将 xml 文件转换为 HTML）？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:34:24.363

这是不可能的，因为 Mozilla/Firefox 中的 XSLT 处理器实现不支持该 EXSLT 功能。[Mozilla 支持的唯一 EXSLT 功能在https://developer.mozilla.org/en-US/docs/EXSLT](https://developer.mozilla.org/en-US/docs/EXSLT)中列出。

# ruby-on-rails - 在 Activeadmin 中编辑多对多关系

> ID：13687535
> 
> 赞同：6
> 
> 时间：2012-12-03T16:28:25.613
> 
> 标签：ruby-on-rails, many-to-many, activeadmin, has-many-through

我正在寻找一种方法来编辑/添加与文章相关的关键字，在 Activeadmin 中内联。

我定义了一个简单的多对多设置：

```
class Area < ActiveRecord::Base
  has_many :area_keywords
  has_many :keywords, :through => :area_keywords
  accepts_nested_attributes_for :keywords, :reject_if => :all_blank, :allow_destroy => true
end

class AreaKeyword < ActiveRecord::Base
  belongs_to :area
  belongs_to :keyword
end

class Keyword < ActiveRecord::Base
  has_many :area_keywords
  has_many :areas, :through => :area_keywords
end 
```

我想以 en Area 形式添加和编辑关键字，所以我在 Aciveadmin 中进行了设置：

```
ActiveAdmin.register Area do
  form do |f|
    f.inputs "Area details" do
      f.input :title
      f.input :description
    end
    f.has_many :keywords do |k|
      if k.object.nil?
        k.input :word, :label => 'Keyword'
      else
        k.input :word, :label => k.object.word
        k.input :_destroy, :as => :boolean, :label => "delete"
      end
    end
  end
end 
```

这按预期工作。

但是，如果我将相同的关键字添加到两个不同的区域，则该关键字只会被创建两次。

输入新关键字时（在“区域”表单中），我希望它自动创建与现有关键字的关系，或者创建一个新关键字，如果它不存在。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-13T08:51:08.573

这是一个很晚的答案 :) 但我实际上在我的一个项目中遇到了类似的问题......我必须将关键字/标签添加到两个不同的模型，但他们可以共享它们。起初我和你一样，每次你将关键字/标签“附加”到模型时，它都会创建一条记录。

处理它的更好方法是使用标记系统。我通过结合两个非常好的宝石实现了一个非常简洁的系统：**'acts-as-taggable-on'**（[https://github.com/mbleigh/acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on)）和**'select2-rails'**（[https ://github.com/argerim/select2-rails](https://github.com/argerim/select2-rails) )

在我自己的项目中，我实际上做了与您类似的事情，并创建了一个模型，只是为了列出我想要的所有合适的关键字。但是“act-as-taggable-on”并不一定需要接受的关键字列表……因此您可以即时创建它们，它会自动处理重复项、计数等。

'select2-rails' 只允许您拥有一个漂亮的界面来在一个字段中添加和删除关键字，而不是使用复选框、选择选项或文本输入，您必须手动使用逗号或任何分隔符分隔字符串。

如果有人需要有关我如何实现所有内容的更多详细信息，我将非常乐意提供更多代码.. 但是它们的文档都非常简单！

编辑：嗯，我觉得一些代码实际上很有用:)

在您的 Gemfile 中捆绑安装两个 gem

```
gem 'acts-as-taggable-on'
gem 'select2-rails' 
```

在您的`Area`模型中，您可以添加以下内容并执行类似的操作

```
class Area < ActiveRecord::Base
    # .. your code

    attr_accessible :area_keyword_list

    acts_as_taggable_on :area_keywords
end 
```

在您的 ActiveAdmin 文件中

```
ActiveAdmin.register Area do

    form do |f|
      f.inputs do
        # .. whatever fields you have
        f.input :area_keyword_list,
          :as => :select,
          :multiple => :true,
          :collection => # here either a list of accepted keyword..or just left open,
          :input_html => { :class => "multiple-select" }
      end
    end
end 
```

并且 JS`select2`非常简单......

```
$(".multiple-select").select2(); 
```

瞧！

# .net - 关于使用 VS 2010 内置的应用程序设置功能的几个问题

> ID：13687536
> 
> 赞同：0
> 
> 时间：2012-12-03T16:28:25.967
> 
> 标签：.net, vb.net, visual-studio-2010, settings

我有几个关于在 VS 项目中使用设置的问题。首先，通过阅读网络上的各种资源，我的理解是有两种类型的设置。读/写的用户设置和只读的应用程序设置。我的第一个问题是，如果应用程序设置是只读的并且不能在运行时更改，那么是什么让它们有用？使用应用程序范围设置和仅将设置硬编码到源代码中有什么区别？VS项目中的用户设置是否与计算机上的特定Windows用户帐户相关联？如果我的程序安装在用户 A 和用户 B 的计算机上，如果用户 A 更改设置，当程序在用户 B 下运行时，是否会使用该新设置？如果不是这种情况，将如何实现用户独立设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:36:08.733

应用程序设置提供了一个单一位置来存储可能在整个程序中使用的值。

考虑一下，如果您有许多消息字符串用于将消息从程序的一个部分传递到另一部分，那么在整个程序中以文本形式复制这些字符串并不是一个好主意。而是将它们存储在应用程序设置中并使用它。如果将来您需要更改它，您可以在一个地方更改它，只要您使用 Intellisense 并且一切编译正确，您就不必担心拼写错误。

用户设置取决于用户。但是，我通常将我的用户设置写入注册表，因为我不希望我的用户进入那里并轻易地弄乱他们。

无论如何，用户设置都保存在以下位置： `C:\Documents and Settings\%username%\Local Settings\Application Data\%ApplicationName%`

# tridion - 组件不会删除

> ID：13687538
> 
> 赞同：2
> 
> 时间：2012-12-03T16:28:33.660
> 
> 标签：tridion

我正在整理内容管理器，并且有一个不会删除的组件（与[我的其他问题不同](https://stackoverflow.com/questions/13685283/cannot-unpublish-component)）。

当我尝试删除有问题的组件时，出现以下错误

```
(8004032D) This item is in use.
Unable to delete Component (tcm:4-65020).

UtilitiesBL.AssertItemCanBeDeleted
UtilitiesBL.AssertItemCanBeDeleted
ComponentBL.Delete
Component.Delete
Request.Delete 
```

当我`Where Used`在组件上使用该工具时，我在“Used In”选项卡中没有得到任何结果，在“Uses”选项卡中有一个结果，“Blueprint Hierachy”显示它没有在我的三个子出版物中的任何一个中本地化并且没有结果“发布到”选项卡。

我查看了 Content Manager 数据库，看看我是否可以发现问题所在，但没有真正找到任何东西。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:39:41.780

看起来`Where Used`R5.3 中的工具无法正常工作。有问题的组件用于 15000 个其他组件。我通过直接使用 TOM API 发现了这一点。

```
var componentID = "tcm:4-65020";
TDS.TDSE tdse = new TDS.TDSE();
var component = (TDS.Component)tdse.GetObject(componentID, TDSDefines.EnumOpenMode.OpenModeView);
var whereUsedString = component .Info.GetListUsingItems(); 
```

现在是删除所有这些链接的任务......

# magento - 检查 Magento 的最终 XML 结构

> ID：13687540
> 
> 赞同：6
> 
> 时间：2012-12-03T16:28:42.137
> 
> 标签：magento

无论如何要检查 magento 在解析和组合所有不同的 XML 文件后提出的最终 XML 结构？

1.  在互联网上搜索时并没有出现这种情况，我认为对于像我这样的人来说，magento 布局一开始有点太多了，我会尝试在代码方面做所有事情。
2.  另一件事将有助于立即从最终的 XML 结构中获取我们可以使用的不同节点的名称。
3.  从来没有遇到过这种情况，但我相信我们会更好地了解什么是压倒一切的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T18:28:32.417

以下将为您提供来自`app/etc/*.xml`、`app/etc/modules/*.xml`以及每个（活动）模块`config.xml`文件的合并配置；在检索配置时，虽然没有指示什么被覆盖，因为合并发生在每个配置文件被解析时：

```
Mage::getConfig()->getNode()->asNiceXml(); // or asXML() | asArray() | etc. 
```

但是，您似乎在询问应用程序如何*使用*此信息。这是应用程序设计的功能。

此外，您提到“所有不同的 XML 文件”。值得注意的是，这些不是在一个大型对象实例中维护的。例如，布局 XML 是使用布局更新对象访问的`Mage_Core_Model_Layout_Update`，并且可以在为给定的渲染范围（例如在控制器操作中）加载和操作之后进行*有意义的访问：*`loadLayout()`

```
Mage::app()->getLayout()->getUpdate()->asString(); // or asSimplexml() or asArray() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:42:44.900

是的 - Commercebug。除了一大堆其他有用的特性外，您还可以查看 Magento 生成的整个 XML 结构。

[http://store.pulsestorm.net/products/commerce-bug-2](http://store.pulsestorm.net/products/commerce-bug-2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T18:22:34.493

我相信以下将输出 XML： `echo Mage::getConfig()->getXmlString();`

您可以使用以下内容创建脚本：

```
header("Content-Type:text/xml");

require_once '../app/Mage.php';

Mage::app();

echo Mage::getConfig()->getXmlString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-27T20:42:34.323

根据我所做的基准的回答

```
echo "<pre>".htmlspecialchars(Mage::getConfig()->getNode()->asNiceXml())."</pre>"; 
```

例如，如果您想查看 Magento 1 中的块配置，您可以将其放在一个文件中，将该文件放在站点的根目录并在浏览器中导航到它：

```
<?php
include("app/Mage.php");
Mage::app(); 

//just see blocks...
echo "<pre>".htmlspecialchars(Mage::getConfig()->getNode()->global->blocks->asNiceXml())."</pre>";
die(); 
```

# c# - 如何从代码访问图例标签

> ID：13687541
> 
> 赞同：0
> 
> 时间：2012-12-03T16:28:43.080
> 
> 标签：c#, asp.net, html, webforms, repeater

我有以下数据绑定`repeater`代码：

```
<%--categories--%>
<asp:Repeater ID="CategoryRepeater" runat="server" OnItemDataBound="ItemBound">
    <ItemTemplate>
        <div class="groupbox">
            <fieldset>
                <legend><%# Container.DataItem %></legend>
                <table>
                    <asp:Repeater ID="ItemRepeater" runat="server">
                    <ItemTemplate>
                        <tr>
                        <td>
                            <asp:CheckBox id="chkItem" runat="server" Text='<%# Eval("Text")%>' />
                            <asp:HiddenField id="pgNos" runat="server" Value='<%# Eval("PGNos")%>' />
                            <asp:Button ID="btnXRefs" Text="x-refs" runat="server" CssClass="xRefButton" OnClick="btnSelectXRefs_Click" />
                        </td>
                        </tr>
                    </ItemTemplate>
                    </asp:Repeater>
                </table>
            </fieldset>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

`repeater`里面有一个`repeater`。如何从代码访问`legend`( ) 内的文本？`<legend><%# Container.DataItem %></legend>`

我试过了 ：

```
foreach (RepeaterItem cr in CategoryRepeater.Items)
{
string heading = (string) cr.DataItem; // returns null
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:03:59.320

**Container.DataItem**是绑定列表中此特定项目的 DataItem 的运行时别名。对于显示 10 行数据的**中继器**，这是数据源中的一行...基本上，它是特定行，在运行时您可以从该行获取属性值

我看到了你上面的**标记**......似乎你没有提到数据绑定类型类的属性，如下所示。

```
<%# ((Your Class Name)Container.DataItem).Class Property Name %> 
```

* * *

> 中继器内部有中继器。如何从代码访问图例 (<%# Container.DataItem %>) 中的文本？

正如**phemt.latd 所说**，您可以将**Legend 标签**更改为服务器端控件，如下所示。

```
<legend id="lg" runat="server">
      <%# ((Your Class Name)Container.DataItem).Class Property Name %>
</legend> 
```

现在，在**项目绑定**数据事件中，找到图例控件。

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || 
                           e.Item.ItemType == ListItemType.AlternatingItem)
    {
        HtmlGenericControl ctl = (HtmlGenericControl)e.Item.FindControl("lg");
        ctl.InnerText //This is what will give you the result.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:41:11.537

The legend tag that you use is not visible on server side. Is a client control and not a server one.

Try with this:

```
<legend id="myLegend" runat="server"><%# Container.DataItem %></legend> 
```

Then in codebehind:

```
protected void ItemBound(Object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.DataItem == null) return;
        HtmlGenerics body = (HtmlGenerics)e.Item.FindControl("myLegend");
        body.InnerText = "Foo";
    } 
```

# vb.net - Telerik Rad 按钮动态检查

> ID：13687545
> 
> 赞同：0
> 
> 时间：2012-12-03T16:28:56.473
> 
> 标签：vb.net, telerik

无法从 vb.net 代码后面的代码中动态检查 Telerik Rad Button 控件。我使用了 chk_TypeEmployee.Checked = True 之类的东西，但没有结果。

```
 <telerik:RadButton ID="chk_TypeEmployee" runat="server" ToggleType="Radio" ButtonType="StandardButton"     GroupName="StandardButton" Text="Employee"></telerik:RadButton>
  <telerik:RadButton ID="chk_TypeAgency" runat="server" ToggleType="Radio" ButtonType="StandardButton" GroupName="StandardButton" Text="Agency"></telerik:RadButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:43:20.983

您需要使用`ToggleStates`：

```
<telerik:RadButton ID="chk_Type" runat="server" ToggleType="Radio" ButtonType="StandardButton" GroupName="StandardButton" Checked="true">
    <ToggleStates>
        <telerik:RadButtonToggleState Value="Employee" Text="Employee" PrimaryIconCssClass="rbToggleRadioChecked" />
        <telerik:RadButtonToggleState Value="Agency" Text="Agency" PrimaryIconCssClass="rbToggleRadio" />
    </ToggleStates>
</telerik:RadButton> 
```

要将按钮动态设置为“代理”状态，假设它是按钮的第二个 ToggleState：

```
chk_Type.ToggleStates[0].Selected = false;
chk_Type.ToggleStates[1].Selected = true; 
```

可以这样改写干净：

```
string DBValue = "Agency";
foreach (RadButtonToggleState state in chk_Type.ToggleStates)
{
    state.Selected = state.Value.Equals(DBValue);
} 
```

要检索选定的值，请使用`chk_Type.SelectedToggleState.Value`.

注意：RadButton 的属性`Checked`必须设置为 true。并且至少应该选择一个切换状态，否则默认情况下会选择第一个切换状态。要使用超过 2 个切换状态，请阅读关于`ToggleType="Custom"`.

阅读有关[Telerik 的切换按钮的](http://demos.telerik.com/aspnet-ajax/button/examples/radiosandcheckboxes/defaultcs.aspx)更多信息。

# function - 创建一个带有可选调用变量的函数

> ID：13687550
> 
> 赞同：31
> 
> 时间：2012-12-03T16:29:15.580
> 
> 标签：function, powershell, windows-7, parameters

有没有办法在 PowerShell 函数中创建参数，您必须调用它才能考虑它？

commandlet 给出的一个例子（粗体是我想要做的）：

`Invoke-Command` **`-computername`** `Server01` **`-Scriptblock`** `{...}`

这是我想用这个函数做的一个例子

```
Function DoStuff($computername, -arg2, -domain $domain)
    Test-parameter(-domain) if (-domain -eq $true) {
        use $domain
    }
    Else {
        $domain = "Domain1"
    }
    test-parameter($arg2) {
        if ($arg2 -eq $true) {
            Do something
        }
        else {
            Do the opposite
        }
    } 
```

总而言之：

如果存在“-arg2”，我希望脚本中发生一些事情。如果“-Domain”存在并且有一个参数，我希望使用它而不是 set 参数。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-03T17:07:11.347

Powershell 为常用参数场景提供了很多内置支持，包括强制参数、可选参数、“开关”（又名标志）参数和“参数集”。

默认情况下，所有参数都是可选的。最基本的方法是简单地检查每一个`$null`，然后从那里实现你想要的任何逻辑。这基本上就是您在示例代码中已经显示的内容。

如果您想了解 Powershell 可以为您提供的所有特殊支持，请查看以下链接：

[about_Functions](http://technet.microsoft.com/en-us/library/hh847829.aspx)

[about_Functions_Advanced](http://technet.microsoft.com/en-us/library/hh847806.aspx)

[about_Functions_Advanced_Parameters](http://technet.microsoft.com/en-us/library/hh847743.aspx)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-03T18:18:14.280

我认为您的问题不是很清楚，此代码假定如果您要包含 -domain 参数，它总是“命名”（即 dostuff computername arg2 -domain domain）；这也使得 computername 参数是强制性的。

```
Function DoStuff(){
    param(
        [Parameter(Mandatory=$true)][string]$computername,
        [Parameter(Mandatory=$false)][string]$arg2,
        [Parameter(Mandatory=$false)][string]$domain
    )
    if(!($domain)){
        $domain = 'domain1'
    }
    write-host $domain
    if($arg2){
        write-host "arg2 present... executing script block"
    }
    else{
        write-host "arg2 missing... exiting or whatever"
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-03T16:59:01.770

不确定我是否正确理解了这个问题。

根据我的收集，您希望能够为 Domain 分配一个值（如果它为空），以及检查是否提供了 $args2 并根据该值执行某个代码？

我更改了代码以重新组合上面所做的假设。

```
Function DoStuff($computername, $arg2, $domain)
{
    if($domain -ne $null)
    {
        $domain = "Domain1"
    }

    if($arg2 -eq $null)
    {
    }
    else
    {
    }
}

DoStuff -computername "Test" -arg2 "" -domain "Domain2"
DoStuff -computername "Test" -arg2 "Test"  -domain ""
DoStuff -computername "Test" -domain "Domain2"
DoStuff -computername "Test" -arg2 "Domain2" 
```

那有帮助吗？

# java - InputStreamReader 出现 IOException

> ID：13687552
> 
> 赞同：0
> 
> 时间：2012-12-03T16:29:21.650
> 
> 标签：java, android, inputstream, ioexception, processbuilder

制作一个具有多个函数的类，我遇到了其中一个函数的问题，它将使用 ProcessBuilder 发送命令并将其输出作为字符串，充当 shell 命令。当我使用它时，它会在 InputStreamReader 捕获带有错误文件编号的 IOException ，并返回“错误！！！” ，这是我的代码，如果您需要了解有关此评论的任何信息...我正在使用命令“ls”顺便说一句，“ls /sdcard/”...

```
 public String builder(String str) {    
    startTimer(); // A method that gets the current time as int
    String[] array = str.split(" " , 2);
    String cmd = array[0] + " " + array[1];
    System.out.println("\nexecuting: " + cmd + "----");
    String AllText = "";
    try {
        String anyString;
        //Process process = new ProcessBuilder("sh","-c","\"",cmd,"\"").start();
        Process process = new ProcessBuilder(array).start();

        BufferedReader OUT = new BufferedReader(new InputStreamReader(process.getInputStream())); // Here is My error
        BufferedReader ERR = new BufferedReader(new InputStreamReader(process.getErrorStream()));
        try {
            for (int x = endTimer()/* a method which subtracts the startTimer() from current time to get the time passed */ ; endTimer()<= 5000 ; x++){
                process.waitFor();
            }process.destroy();

        } catch (InterruptedException ex) {
            ex.printStackTrace();
        }
        while ((anyString = ERR.readLine()) != null) {
            AllText = AllText + "\n" + anyString;
        }
        while ((anyString = OUT.readLine()) != null) {
            AllText = AllText + "\n" + anyString;
            while ((anyString = ERR.readLine()) != null) {
                AllText = AllText + "\n" + anyString;
            }
        }

        return AllText;
    } catch (Exception ex) {
        ex.printStackTrace();
        return "ERROR!!!";

    } 
```

这是按下按钮时的堆栈跟踪：

```
12-03 18:55:36.475: W/System.err(17973): java.io.IOException: read failed: EBADF (Bad file number)
12-03 18:55:36.507: W/System.err(17973):    at libcore.io.IoBridge.read(IoBridge.java:442)
12-03 18:55:36.507: W/System.err(17973):    at java.io.FileInputStream.read(FileInputStream.java:179)
12-03 18:55:36.507: W/System.err(17973):    at java.io.InputStreamReader.read(InputStreamReader.java:244)
12-03 18:55:36.507: W/System.err(17973):    at java.io.BufferedReader.fillBuf(BufferedReader.java:130)
12-03 18:55:36.507: W/System.err(17973):    at java.io.BufferedReader.readLine(BufferedReader.java:354)
12-03 18:55:36.507: W/System.err(17973):    at com.example.activity.over.other.Shells.builder(Shells.java:542)
12-03 18:55:36.507: W/System.err(17973):    at com.example.activity.over.other.MainActivity$2.onClick(MainActivity.java:91)
12-03 18:55:36.514: W/System.err(17973):    at android.view.View.performClick(View.java:4202)
12-03 18:55:36.514: W/System.err(17973):    at android.view.View$PerformClick.run(View.java:17340)
12-03 18:55:36.514: W/System.err(17973):    at android.os.Handler.handleCallback(Handler.java:725)
12-03 18:55:36.514: W/System.err(17973):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-03 18:55:36.514: W/System.err(17973):    at android.os.Looper.loop(Looper.java:137)
12-03 18:55:36.514: W/System.err(17973):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-03 18:55:36.514: W/System.err(17973):    at java.lang.reflect.Method.invokeNative(Native Method)
12-03 18:55:36.522: W/System.err(17973):    at java.lang.reflect.Method.invoke(Method.java:511)
12-03 18:55:36.522: W/System.err(17973):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-03 18:55:36.522: W/System.err(17973):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-03 18:55:36.522: W/System.err(17973):    at dalvik.system.NativeStart.main(Native Method)
12-03 18:55:36.522: W/System.err(17973): Caused by: libcore.io.ErrnoException: read failed: EBADF (Bad file number)
12-03 18:55:36.530: W/System.err(17973):    at libcore.io.Posix.readBytes(Native Method)
12-03 18:55:36.530: W/System.err(17973):    at libcore.io.Posix.read(Posix.java:123)
12-03 18:55:36.530: W/System.err(17973):    at libcore.io.BlockGuardOs.read(BlockGuardOs.java:149)
12-03 18:55:36.530: W/System.err(17973):    at libcore.io.IoBridge.read(IoBridge.java:432)
12-03 18:55:36.530: W/System.err(17973):    ... 17 more 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T16:42:39.990

Check if you have missed this in the manifest file.

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# c# - Active Directory DirectorySearcher 未返回所有可用属性

> ID：13687553
> 
> 赞同：7
> 
> 时间：2012-12-03T16:29:22.597
> 
> 标签：c#, active-directory

我正在为我的老板编写一个新程序，以取代他们目前使用的旧 VBS。

所以程序假设进入广告并收集所有员工的姓名和他们的电子邮件地址。我的问题是每个用户都分配了大约 60 个属性，但我的程序只提取了 32 个字段，其中一个是 CN，它是我需要的一半。当然，邮件不是要导入的属性之一。我在调试时也注意到，我认为只是从长岛分支机构引入员工，而不是从我不明白为什么的任何地方引入员工。任何帮助将不胜感激！！=D

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Text;
using System.DirectoryServices;
using Microsoft.Office.Interop.Excel;
using System.DirectoryServices.ActiveDirectory; 

namespace EmailListing
{
    class Program
    {
        static void Main(string[] args)
        {

            DirectoryEntry adFolderObject = new DirectoryEntry("LDAP://OU=PHF Users,DC=phf,DC=inc");

            DirectorySearcher adSearchObject = new DirectorySearcher(adFolderObject);
            adSearchObject.SearchScope = SearchScope.Subtree;

            adSearchObject.Filter = "(&(ObjectClass=user)(!description=Built-in*))";

            foreach (SearchResult adObject in adSearchObject.FindAll())
             {
                 //mail = adObject.Properties["mail"].ToString();

                Console.Write(adObject.Properties["cn"][0]); 
                Console.Write(".        ");
                //Console.WriteLine(mail);

             }

            Console.WriteLine();
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:41:10.300

You can use a `PrincipalSearcher` and a "query-by-example" principal to do your searching:

```
// create your domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// define a "query-by-example" principal - here, we search for a UserPrincipal 
UserPrincipal qbeUser = new UserPrincipal(ctx);

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

// find all matches
foreach(var found in srch.FindAll())
{
    // do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
    UserPrincipal foundUser = found as UserPrincipal;

    if (foundUser != null && !foundUser.Description.StartsWith("Built-In"))
    {
        string firstName = foundUser.GivenName;
        string lastName = foundUser.Surname;
        string email = foundUser.EmailAddress;
    }
} 
```

If you haven't already - absolutely read the MSDN article [Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx) which shows nicely how to make the best use of the new features in `System.DirectoryServices.AccountManagement`. Or see the [MSDN documentation on the System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx) namespace.

Of course, depending on your need, you might want to specify other properties on that "query-by-example" user principal you create:

*   `DisplayName` (typically: first name + space + last name)
*   `SAM Account Name` - your Windows/AD account name
*   `User Principal Name` - your "username@yourcompany.com" style name

You can specify any of the properties on the `UserPrincipal` and use those as "query-by-example" for your `PrincipalSearcher`.

# android - GCM 为同一部手机生成新的注册 ID

> ID：13687559
> 
> 赞同：0
> 
> 时间：2012-12-03T16:29:43.767
> 
> 标签：android, google-cloud-messaging

我正在使用一台设备进行测试，并且从中获得了很多新的注册 ID。不是每次构建应用程序时，但有时。我不确定这笔交易是什么。如何让它使用相同的 id？这不是应该发生的事情吗？

# 显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="company.android.phone.TheApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <!-- for push notifications -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <!-- For performance testing a trace file is saved to the SD card -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-permission android:name="android.permission.GET_TASKS" /> 

    <permission android:name="company.android.phone.TheApp.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="company.android.phone.TheApp.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <supports-screens
        android:resizeable="true"
        android:smallScreens="false"
        android:normalScreens="true"
        android:largeScreens="true"
        android:xlargeScreens="false"
        android:anyDensity="true" />

    <application
        android:icon="@drawable/app_icon"
        android:label="@string/app_name" >
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" 
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="company.android.phone.TheApp" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="company.android.phone.TheApp" />
            </intent-filter>
        </receiver>
        <activity 
            android:name=".SplashActivity"
            android:theme="@style/Theme.Splash"
            android:screenOrientation="portrait"
            android:noHistory="true" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:label="@string/app_name"
            android:windowSoftInputMode="stateVisible|adjustPan"
            android:name=".TheAppActivity"
            android:screenOrientation="portrait" >
        </activity>
        <activity 
            android:name=".MainActivity" 
            android:windowSoftInputMode="stateVisible|adjustPan"
            android:screenOrientation="portrait" />
        <activity android:name=".WebViewActivity" 
            android:windowSoftInputMode="stateVisible|adjustPan"
            android:screenOrientation="portrait" />
        <service android:name=".GCMIntentService" />
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:37:02.243

您无法保证您的注册 ID 始终与您的设备相同。

> 注册 ID 一直持续到 Android 应用程序明确取消注册，或者直到 Google 为您的 Android 应用程序刷新注册 ID。

有关更多信息，请查看此处“启用 GCM”：http: [//developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

# gmail - 从谷歌业务降级到谷歌应用程序后备份邮件

> ID：13687561
> 
> 赞同：0
> 
> 时间：2012-12-03T16:29:51.653
> 
> 标签：gmail, google-apps, google-account

我的 Google Business 30 天试用版今天已过期。我想知道从 Google Business 降级到 Google Apps 后，我邮箱中保存的邮件是否不会被删除？如果我的邮件将被删除，我想知道在我取消我的 Google Business 帐户之前是否有办法保存它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:04:40.983

邮件不会被删除，但如果用户超过免费版 10gb 配额，他们将无法在降级后发送/接收邮件。

确认您的用户在配额之下，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:07:10.257

我不得不说，我读过的关于这个主题的谷歌论文中没有清楚地描述这个问题。无论如何，我可以说，在降级后，我的邮件被忠实保留，我的任何数据都没有被删除。:)

# c# - SQL 事务提交使连接处于损坏状态（c#）

> ID：13687564
> 
> 赞同：1
> 
> 时间：2012-12-03T16:30:02.460
> 
> 标签：c#, sql, sql-server-2008, database-connection, clr4.0

**简而言之：** 在调用 transaction.Commit() 之后，下一个操作会失败，就好像事务没有提交一样。

**更多细节：** 我们有一个线程运行对数据库的写查询，其中一些被封装在一个事务中。一段时间后运行较重的负载时，我们遇到提交事务后的操作失败并显示错误指示事务正在进行中的情况，具体取决于提交后执行的操作，我们收到以下错误之一：

*下一个操作是'开始交易：*

> ...连接不支持并行事务...

*下一个操作是插入/更新/删除*

> 当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求该命令具有事务。该命令的 Transaction 属性尚未初始化。

通过调试器检查 Sql Connection 对象表明它包含一个“sqlInnerTransaction”对象，其父对象设置为 null。我们确实知道对“提交”的调用成功完成，没有出现错误。
运行 .net 4.0、SQL Server 2008 R2 SP2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:37:18.740

查看此消息：

> 连接不支持并行事务

我想知道您是否在多个线程中使用单个连接对象？

连接不是线程安全的。您应该只在创建它们的线程中使用它们。

# php - 表单验证失败时选择字段重置

> ID：13687568
> 
> 赞同：0
> 
> 时间：2012-12-03T16:30:21.893
> 
> 标签：php, forms, validation

任何人都可以帮忙吗？

我是 php 新手，正在尝试为简单的联系表单开发验证规则。

当表单的其他部分验证失败时，如何停止选择字段重置？

代码如下：

```
<?php

    $error      = '';
    $title      = '';
    $firstname  = '';
    $surname    = '';
    $email      = '';
    $phone      = '';
    $comments   = '';
    $how        = '';
    $verify     = '';

    if(isset($_POST['contactus'])) {

    $title      = $_POST['title'];
    $firstname  = $_POST['firstname'];
    $surname    = $_POST['surname'];
    $email      = $_POST['email'];
    $phone      = $_POST['phone'];
    $comments   = $_POST['comments'];
    $how        = $_POST['how'];
    $verify     = $_POST['verify'];

    ini_set("sendmail_from", $email_from, "enquiries@blah.com");

    // Errors

    if(trim($title) == '') {
        $error = '<div class="error_message">Please enter your Title.</div>';
    }
    else if(trim($firstname) == '') {
        $error = '<div class="error_message">Please enter your First name.</div>';
    }
    else if(trim($surname) == '') {
        $error = '<div class="error_message">Please enter your Surname.</div>';
    }
    else if(!validEmail($email)){
    $error = '<div class="error_message">Please enter a valid email address.</div>';
    $email = '';
    }
    if($error == '') {

        if(get_magic_quotes_gpc()) {
            $comments = stripslashes($comments);
        }

    $address = "enquiries@blah.com";

    $e_subject = 'Care at Home Enquiry from ' . $title . $surname . '.';

    $e_body = "You have been contacted by $name with regards to an Advantage Nurses general enquiry, contact details and message are as follows.\r\n\n";
    $e_content = "Title: " . $title  .
                 "\r\n\nFirst name:" . $firstname  .
                 "\r\n\nSurname: " . $surname  .  
                 "\r\n\nEmail: " . $email  . 
                 "\r\n\nPhone: " . $phone  . 
                 "\r\n\nEnquiry: " . $comments .
                 "\r\n\nHow Did You Hear About Us: " . $how;

    //$e_reply = "\r\n\nYou can contact $name via email, $email or via phone $phone";

    $msg = $body . $e_content . $e_reply;

    if(mail($address, $e_subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n"))
    {
        // Email has sent successfully, echo a success page.

         echo "<div id='succsess_page'>";
         echo "<h1>Enquiry Submitted.</h1>";
         echo "<p>Thank you <strong>$title $surname</strong>, your enquiry has been submitted to us.<br /><br /> A member of our Team will contact you within 48 hours.</p>";
         echo "</div>";
     } else echo "Error. Mail not sent";

    }
}

    if(!isset($_POST['contactus']) || $error != '') // Do not edit.
    { 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:42:44.883

On your form you need to check the values for those variables. For example:

```
<select name="title" class="selectfield" id="title" value="">
    <option value="">Please Select...</option>
    <option value="Mr" <?php if(isset($title) && $title == 'Mr') echo 'selected'; ?>>Mr</option>
    <option value="Mrs" <?php if(isset($title) && $title == 'Mrs') echo 'selected'; ?>>Mrs</option>
    <option value="Miss" <?php if(isset($title) && $title == 'Miss') echo 'selected'; ?>>Miss</option>
    <option value="Ms" <?php if(isset($title) && $title == 'Ms') echo 'selected'; ?>>Ms</option>
    <option value="Dr" <?php if(isset($title) && $title == 'Dr') echo 'selected'; ?>>Dr</option>
    <option value="Rev" <?php if(isset($title) && $title == 'Rev') echo 'selected'; ?>>Rev</option>
    <option value="Sir" <?php if(isset($title) && $title == 'Sir') echo 'selected'; ?>>Sir</option>
</select> 
```

Or you could use JQuery to select the correct option if you wanted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:42:46.710

In your html for the select options, try something like this:

```
<option value="Mr." <? if($title == "Mr.") echo "selected"; ?>>Mr.</option> 
```

This will automatically select the `option` if your `$_POST` value was "Mr."

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:46:27.903

如果在数组中定义选项值会更优雅：

```
$titles = array('Mr', 'Miss', 'Mrs'); 
```

在 HTML 中：

```
<select name="title" id="title">
    <?php foreach($titles as $title): ?>

    <option value="<?php echo $title; ?>" if(isset($_POST['title']) $_POST['title'] == $title) echo 'selected="selected"';><?php echo $title; ?></option>

    <?php endforeach; ?>
</select> 
```

**警告 1：**您的代码易受 XSS 攻击，您不应将原始用户输入打印回页面，将其传递给`htmlspecialchars()`.

**警告 2：**它也容易受到邮件头注入攻击。您应该验证`$email`您插入到标题中的内容，或者根本不将任何用户输入插入到标题中。

因此，我已从问题中删除了您的站点链接。我建议让您的页面离线，直到漏洞得到修复。

# c# - 通过匹配正则表达式将大文本文件复制到数组中

> ID：13687575
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:30:39.833
> 
> 标签：c#, regex

有时，我需要查看大约 25 MB 的 Oracle Datapump SQLFILE（纯文本）以查找一些关键的文本字符串。我目前在 UltraEdit 中使用了一些方便的功能，这使得这不是那么糟糕。但是，我有一些其他用户没有 UltraEdit 并且不熟悉 Reg 表达式来查找正确的值。

如果我想创建两个集合并只添加与某个 RegEx 匹配的行，我应该从哪里开始？我应该使用普通的 StreamReader 和 StreamReader.ReadLine() 来浏览文件吗？或者文件的大小会建议不同的选择吗？

最终结果是将集合的内容输出到屏幕或新的文本文件，但我还不太担心这个细节。

请尽可能笼统或具体，我不能免于填写我可以为自己填写的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:44:23.493

从 .NET Framework 4 开始，您可以使用`File.ReadLines`返回 an 的方法，`IEnumerable<string>`因此不会将整个文件保存在内存中。

```
var lines = File.ReadLines(path).Where(s => myRegex.IsMatch(s)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:35:40.993

> 我应该使用普通的 StreamReader 和 StreamReader.ReadLine() 来浏览文件吗？或者文件的大小会建议不同的选择吗？

这就是我会采取的方法。使用流不会将整个文件加载到内存中，因此对于大文件来说似乎是完美的。

对于每一行，您可以测试它是否匹配并将该行复制到相应的列表中。或者，如果您担心数据过多，请将每一行复制到两个输出文件之一（也使用流）。

# setinterval - 如何将两个滑块与一个 jquery 插件一起使用，同样 setInterval

> ID：13687580
> 
> 赞同：3
> 
> 时间：2012-12-03T16:31:01.093
> 
> 标签：setinterval, clearinterval

我准备了一个滑块，我想在一个页面中多次使用它。因此，我正在尝试准备一个插件。我准备的第一个滑块不起作用，而第二个滑块起作用。在我看来，ClearInterval 不适用于第一个滑块。请问你能帮帮我吗？

谢谢，

# vb.net - 请求的操作不可用，因为未定义运行时库函数

> ID：13687582
> 
> 赞同：0
> 
> 时间：2012-12-03T16:31:03.460
> 
> 标签：vb.net, windows-runtime

我正在转换代码以使用新的 Microsoft Portable 类库。以下代码不满意，我不确定如何修复它。

```
 Dim keySerializer As New Xml.Serialization.XmlSerializer(GetType(TKey))
        Dim valSerializer As New Xml.Serialization.XmlSerializer(GetType(T))
        Dim key As TKey
        Dim val As T

        If reader.IsEmptyElement = True Then
            Return
        End If

        reader.Read()

        While reader.NodeType <> Xml.XmlNodeType.EndElement
            reader.ReadStartElement("item")

            reader.ReadStartElement("key")
            key = CType(keySerializer.Deserialize(reader), TKey) '<<< Error here
            reader.ReadEndElement()

            reader.ReadStartElement("value")
            val = CType(keySerializer.Deserialize(reader), T) '<<< and here
            reader.ReadEndElement()

            Add(key, val)

            reader.ReadEndElement()
            reader.MoveToContent()

        End While

        reader.ReadEndElement() 
```

请求的操作不可用，因为未定义运行时库函数 Microsoft.visubalBasic.CompilerServices.Conversions。

有人解决了这个问题吗？

# java - 究竟是什么掩盖了 Java 中的编程错误？

> ID：13687583
> 
> 赞同：2
> 
> 时间：2012-12-03T16:31:04.950
> 
> 标签：java

在语言规范中它说：

> 局部变量在使用前肯定是设置好的。虽然所有其他变量都会自动初始化为默认值，但 Java 编程语言不会自动初始化局部变量以避免掩盖编程错误。

Java中究竟是什么掩盖了编程错误？

一个解释这个的例子，会很好。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:34:16.137

要理解这一点，您需要与 C/C++ 所做的比较。在 C/C++ 中，局部变量在声明时包含垃圾值。因此，如果您忘记分配值，编译器不会抱怨，并且对此类局部变量的所有引用都将使用垃圾值，从而导致意外行为。

在 Java 中，这种未初始化的局部变量会导致编译时错误，从而使开发人员在使用它之前将其显式初始化为有意义的默认值。

C/C++

```
int do_something(int value) {
    int i;
    if (value > 10) {
        i = value;
    }

    return i;
} 
```

上面的代码片段在 C++ 中有效，但在 java 中无效。

```
int doSomething(int value) {
    int i;
    if (value > 10) {
        i = value;
    }

    //
    // This line will throw a compile-time error that 
    // `i` may not have been initialized.
    //
    return i; 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T16:35:36.230

“屏蔽编程错误”不是一种特殊的错误。这意味着它不想在您的编程中“掩盖”（隐藏、混淆、使其难以检测）错误。例如，以下代码有一个严重错误。我从未将 String 变量设置为任何值。

```
String theString;
System.out.println(theString); 
```

此代码将编译但不会运行。你会得到一个空引用异常等。原因是该变量`theString`从未设置为值。另一方面，如果 Java 将变量设置`theString`为一个值（例如，一个空字符串，“”），程序将运行但不会打印任何内容。您可能会花费很长时间试图弄清楚这一点，因为 Java 会通过设置默认值来“掩盖”错误。

编译器试图在这里提供帮助，因为局部变量可能是很多问题的根源。Java 可以做的任何事情来暴露这些问题（与掩盖它们相反）都是有帮助的。

# java - 如何在java中使字段不可序列化？

> ID：13687587
> 
> 赞同：44
> 
> 时间：2012-12-03T16:31:28.770
> 
> 标签：java

拜托，我在序列化数据方面需要帮助。

我有一个名为 Foo 的类，它定义了 3 个属性：

```
 public int age;
    public String name;
    public String description; 
```

我怎样才能序列化这个对象，但没有它的描述字段？

提前致谢！

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-03T16:32:27.223

使用关键字`transient`：

```
public transient String description; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-03T16:35:14.280

定义描述如下

```
public transient String description; 
```

检查[http://en.wikibooks.org/wiki/Java_Programming/Keywords/transient](http://en.wikibooks.org/wiki/Java_Programming/Keywords/transient)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-03T16:32:11.450

你只需要做那个`transient`。

例子：

```
public transient String description; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-03T16:33:03.963

将变量标记为`transient`，因为`Transient`变量未序列化。

```
 public transient int age; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-04T04:33:23.823

有时需要一些我们不想在网络流期间序列化的字段。

```
Ex .
class userDetail{
  public String userName;
  public String password;
} 
```

这里我们不想序列化密码。将该字段设为瞬态以从序列化中删除。

```
Ex .
    class userDetail{
     public  String userName;
     public transient  String password;
    } 
```

# c# - 多发子弹 Xna

> ID：13687596
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:31:52.437
> 
> 标签：c#, visual-studio, vector, xna

我之前在此发布过并展示了我的代码，用于让子弹同时朝多个方向爆炸。

我只是想知道是否有人可以给我一个干净的例子，我可以离开。

我的想法是让我的左键单击让玩家投掷一枚手榴弹，当它与敌人碰撞时会爆炸并从各个方向射出子弹。

对不起，双重职位，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:35:54.707

```
if(whatever the collision code is for xna again)
{
bullets.add(new bullet(startpos, direction))
} 
```

如果你扩展它......子弹是你用来管理你的子弹的任何东西，子弹是你新创建的粒子，起始位置是你发生碰撞的地方，方向将是你的子弹应该行进的方向（1代表北,ne,east,se,south,sw, west, nw) 或任何你想要的

# castle-windsor - 如何使用 Castle 拦截器获取类型名称以与方法名称一起记录？

> ID：13687597
> 
> 赞同：0
> 
> 时间：2012-12-03T16:31:57.397
> 
> 标签：castle-windsor, castle, castle-dynamicproxy

[有没有办法让我使用Castle](https://en.wikipedia.org/wiki/Castle_Project)拦截器获取该方法所属的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:59:10.523

```
string targetTypeName = invocation.TargetType.FullName; 
```

# ios - 不带箭头的 UIPopOver 的定位/大小

> ID：13687599
> 
> 赞同：0
> 
> 时间：2012-12-03T16:32:01.187
> 
> 标签：ios, uipopovercontroller

我无法设置没有箭头的 UIPopOver 的大小和位置。我想要做的是在 iPad 屏幕的左上角调出一个弹出视图，并且还有我设置的内容大小。

当我使用箭头和不使用箭头时，弹出框的内容大小不同。当我使用以下代码时：

```
 CGRect rec = CGRectMake(0, 0, 1, 1);
    [self.displayOpPopover presentPopoverFromRect:rec inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

结果是：

![带箭头](../Images/fb9137caae88867c80cdf93f7dd50dad.png)

当我这样做时：[self.displayOpPopover presentPopoverFromRect:rec inView:self.view allowedArrowDirections:0 animated:YES];

结果是：

![没有箭头](../Images/c6f622c7a1ae6ef63e9744f0929f87fa.png)

我为情节提要中的弹出框设置了“使用显式大小”（当我有箭头时，这是视图的大小）。但是当箭头方向为 0 时，视图会以某种方式自行调整大小。

关于我应该如何将弹出框设置在不带箭头的左上角的任何建议。

谢谢 ！

# html - 按钮在 Internet Explorer 7 中呈现不正确 - 需要 IE7 特定的 CSS 修复

> ID：13687602
> 
> 赞同：0
> 
> 时间：2012-12-03T16:32:20.780
> 
> 标签：html, css, plsql, internet-explorer-7

我们有一个使用 plsql 向用户提供内容的在线系统。底层系统对某些元素有自己的样式，但大多数都可以为特定客户端使用单独的 css 文件覆盖。目前，我正在为我们的一个客户制作一个部分，其中 plsql 会提取页面上所有当前的空缺。html 本身是硬编码到 plsql 过程中的，所以我必须处理它是如何从系统中出来的。如果您查看下图（在 Firefox 中显示），您将看到页面上显示的许多作业之一。所有作业都具有相同的 html 结构（如下图 1 所示）。我设法在 Firefox 和所有其他浏览器中呈现它的方式是完美的（如图所示），但在 IE7 中它看起来很糟糕（图 2）。任何想法我可以做什么/添加到我的 css 以使其在 IE7 中正确呈现？可以在本页底部找到从 Firebug 计算出的 CSS。

图。1 ![图。1](../Images/33c23e8beb3f8bf5b9597335f5c946d3.png)

HTML

```
<div class="jobpost Job Postings">
<div class="template_image"></div>
    <div class="jobpost_body">
        <h2>
        <a href="/icamstest/wd/plsql/wd_portal.show_job?p_web_site_id=4227&p_web_page_id=156962">Head of Operations</a>
        </h2>
        <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing tincidunt males uada. Aenean metus lorem, lacinia est. Maecenas sit amet magna rhoncus imperdiet. Quisque consectetur lacinia felis, posumassa fermentum vel. Morbi metus nibh, tincidunt luctus hendrerit, iaculis sed velit.
        <br>
        <br>
        Suspendisse potenti. Praesent sit amet rhoncus nisi. Etiam tristique velit ut felis ultrices pulvinar. Ut elit leo, condimentum nec consectetur non, tincidunt malesuada lorem.
        </p>

        <p class="jobpost_classifications">
            <span class="jobclass even location">
                <span class="jobclass_type">Location:</span>
                <span class="jobvalue">  Birmingham</span>
            </span>
            <span class="jobclass uneven date_on">
                <span class="jobclass_type">Date posted:</span>
                    26/11/2012 
            </span>
            <span class="jobclass even date_off">
                <span class="jobclass_type">Closing Date:</span>
                    31/01/2013 
                </span>
            <span class="jobclass uneven refno">
                <span class="jobclass_type">Ref No:</span>
                    85 
                </span>
        </p>
    </div>

    <div class="jobpost_nav">
        <p>
            <a class="apply_direct" title="Apply For Position ? (Head of Operations)" href="/icamstest/wd/plsql/wd_portal_cand.form?p_web_site_id=4227&p_web_page_id=156962">Apply For Position ? </a>
            <a class="send_a_friend" title="Send a friend (Head of Operations)" href="/icamstest/wd/plsql/wd_portal.send_a_friend?p_web_site_id=4227&p_web_page_id=156962">Send a friend</a>
        </p>
</div>

</div> 
```

图2
![图2](../Images/85e4895aa445b44eb9620bca6db522c8.png)

CSS

```
 div.jobpost {
        border-bottom: 1px solid #CCCCCC;
        padding-top: 15px;
    }
    div.jobpost {
        float: left;
        margin: 0;
        width: 100%;
    }
    html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary, time, mark, audio, video {
        background: none repeat scroll 0 0 transparent;
        font-size: 100%;
        outline: 0 none;
        vertical-align: baseline;
    }

    div.jobpost div.jobpost_body {
        float: left;
        margin: 0;
        padding: 0;
    }
    div.jobpost_body {
        overflow: hidden;
    }

    #icams_inserted {
        color: #6D7A7E !important;
        font-family: Arial !important;
        font-size: 12px !important;
        font-style: normal !important;
        font-weight: 400 !important;
    }
    html.ext-strict body {
        text-align: left !important;
    }
    body {
        color: #6D7A7E;
    }

    .jobpost_body h2 {
        font-family: Arial,'Adamina',serif !important;
        font-size: 20px !important;
        font-weight: 400;
        line-height: 1.25;
        margin-bottom: 15px;
    }
    h1, h2, h3, h4, h5, h6 {
        color: #606163;
    }
    h1, h2, h3, h4, h5, h6 {
        font-family: Arial,'Adamina',serif;
    }
    h2 {
        font-size: 28px;
    }

    div.jobpost_body h2 a {
        border: 0 solid #FF0000;
        display: block;
        float: left;
        margin: 0 !important;
        padding: 10px 0 0;
        width: 100%;
    }
    .not-ie a, .not-ie a > * {
        transition: background-color 0.2s ease 0s, border 0.2s ease 0s, color 0.2s ease 0s, opacity 0.2s ease-in-out 0s;
    }
    a, a > * {
        color: #6D7A7E;
        text-decoration: none;
    }
    a {
        background: none repeat scroll 0 0 transparent;
        font-size: 100%;
        margin: 0;
        outline: medium none;
        vertical-align: baseline;
    }

    div.jobpost_body h2 a {
        border: 0 solid #FF0000;
        display: block;
        float: left;
        margin: 0 !important;
        padding: 10px 0 0;
        width: 100%;
    }
    .not-ie a, .not-ie a > * {
        transition: background-color 0.2s ease 0s, border 0.2s ease 0s, color 0.2s ease 0s, opacity 0.2s ease-in-out 0s;
    }
    a, a > * {
        color: #6D7A7E;
        text-decoration: none;
    }
    a {
        background: none repeat scroll 0 0 transparent;
        font-size: 100%;
        margin: 0;
        outline: medium none;
        vertical-align: baseline;
    }

    div.jobpost_body p.jobpost_classifications {
        border: 0 none;
        padding-left: 20px;
        padding-right: 0;
        width: 200px;
    }
    div.jobpost_body p {
        clear: none !important;
        display: block;
        float: left;
    }
    div.jobpost_body p {
        clear: left;
        margin: 0 !important;
    }
    .jobpost_body p {
        color: #6D7A7E;
        font: 400 12px/19px Arial;
    }
    p {
        padding-top: 10px !important;
    }
    p {
        margin: 0 0 1.5em;
    }

    .jobclass {
        display: block;
        float: none;
    }

    .jobclass_type {
        color: #6D7A7E;
        font: 700 12px/18px Arial;
        padding-right: 10px;
    }

    .jobclass_type {
        color: #6D7A7E;
        font: 700 12px/18px Arial;
        padding-right: 10px;
    }

    div.jobpost_nav {
        float: left;
        height: 30px;
        margin: 0;
        padding: 10px 0 6px !important;
        width: 100%;
    }

    div.jobpost_nav p {
        margin: 0 !important;
        padding: 0 !important;
    }

    div.jobpost_nav a.apply_direct, div.jobpost_nav a.job_basket, div.jobpost_nav a.send_a_friend {
        padding: 8px 14px !important;
    }
    div.jobpost_nav a.apply_direct, div.jobpost_nav a.job_basket, div.jobpost_nav a.send_a_friend {
        float: left;
    }
    div.jobpost_nav a.apply_direct, div.jobpost_nav a.job_basket, div.jobpost_nav a.send_a_friend {
        padding: 0 20px 0 0 !important;
        width: auto;
    }
    .not-ie a, .not-ie a > * {
        transition: background-color 0.2s ease 0s, border 0.2s ease 0s, color 0.2s ease 0s, opacity 0.2s ease-in-out 0s;
    }
    .apply_now, .apply_direct, .preview input[type="button"], .links > input.continue {
        background: none repeat scroll 0 0 #6A8CB1 !important;
        color: #FFFFFF;
        cursor: pointer;
        display: inline-block;
        font: 400 11px Arial;
        margin: 0 5px 17px 0;
        outline: 3px none;
        padding: 8px 14px !important;
        text-align: center;
        text-decoration: none;
        vertical-align: baseline;
    }
    a {
        background: none repeat scroll 0 0 transparent;
        padding: 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:17:13.687

`h2 a`从两个地方取下浮子。

```
 div.jobpost {
    border-bottom: 1px solid #CCCCCC;
    padding-top: 15px;
}
div.jobpost {
    float: left;
    margin: 0;
    width: 100%;
}
html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary, time, mark, audio, video {
    background: none repeat scroll 0 0 transparent;
    font-size: 100%;
    outline: 0 none;
    vertical-align: baseline;
}

div.jobpost div.jobpost_body {
    float: left;
    margin: 0;
    padding: 0;
}
div.jobpost_body {
    overflow: hidden;
}

#icams_inserted {
    color: #6D7A7E !important;
    font-family: Arial !important;
    font-size: 12px !important;
    font-style: normal !important;
    font-weight: 400 !important;
}
html.ext-strict body {
    text-align: left !important;
}
body {
    color: #6D7A7E;
}

.jobpost_body h2 {
    font-family: Arial,'Adamina',serif !important;
    font-size: 20px !important;
    font-weight: 400;
    line-height: 1.25;
    margin-bottom: 15px;
}
h1, h2, h3, h4, h5, h6 {
    color: #606163;
}
h1, h2, h3, h4, h5, h6 {
    font-family: Arial,'Adamina',serif;
}
h2 {
    font-size: 28px;
}

div.jobpost_body h2 a {
    border: 0 solid #FF0000;
    display: block;
    /*float: left;*/ /* <---- HERE */
    margin: 0 !important;
    padding: 10px 0 0;
    width: 100%;
}
.not-ie a, .not-ie a > * {
    transition: background-color 0.2s ease 0s, border 0.2s ease 0s, color 0.2s ease 0s, opacity 0.2s ease-in-out 0s;
}
a, a > * {
    color: #6D7A7E;
    text-decoration: none;
}
a {
    background: none repeat scroll 0 0 transparent;
    font-size: 100%;
    margin: 0;
    outline: medium none;
    vertical-align: baseline;
}

div.jobpost_body h2 a {
    border: 0 solid #FF0000;
    display: block;
    /*float: left;*/ /* <---- HERE */
    margin: 0 !important;
    padding: 10px 0 0;
    width: 100%;
}
.not-ie a, .not-ie a > * {
    transition: background-color 0.2s ease 0s, border 0.2s ease 0s, color 0.2s ease 0s, opacity 0.2s ease-in-out 0s;
}
a, a > * {
    color: #6D7A7E;
    text-decoration: none;
}
a {
    background: none repeat scroll 0 0 transparent;
    font-size: 100%;
    margin: 0;
    outline: medium none;
    vertical-align: baseline;
}

div.jobpost_body p.jobpost_classifications {
    border: 0 none;
    padding-left: 20px;
    padding-right: 0;
    width: 200px;
}
div.jobpost_body p {
    clear: none !important;
    display: block;
    float: left;
}
div.jobpost_body p {
    clear: left;
    margin: 0 !important;
}
.jobpost_body p {
    color: #6D7A7E;
    font: 400 12px/19px Arial;
}
p {
    padding-top: 10px !important;
}
p {
    margin: 0 0 1.5em;
}

.jobclass {
    display: block;
    float: none;
}

.jobclass_type {
    color: #6D7A7E;
    font: 700 12px/18px Arial;
    padding-right: 10px;
}

.jobclass_type {
    color: #6D7A7E;
    font: 700 12px/18px Arial;
    padding-right: 10px;
}

div.jobpost_nav {
    float: left;
    height: 30px;
    margin: 0;
    padding: 10px 0 6px !important;
    width: 100%;
}

div.jobpost_nav p {
    margin: 0 !important;
    padding: 0 !important;
}

div.jobpost_nav a.apply_direct, div.jobpost_nav a.job_basket, div.jobpost_nav a.send_a_friend {
    padding: 8px 14px !important;
}
div.jobpost_nav a.apply_direct, div.jobpost_nav a.job_basket, div.jobpost_nav a.send_a_friend {
    float: left;
}
div.jobpost_nav a.apply_direct, div.jobpost_nav a.job_basket, div.jobpost_nav a.send_a_friend {
    padding: 0 20px 0 0 !important;
    width: auto;
}
.not-ie a, .not-ie a > * {
    transition: background-color 0.2s ease 0s, border 0.2s ease 0s, color 0.2s ease 0s, opacity 0.2s ease-in-out 0s;
}
.apply_now, .apply_direct, .preview input[type="button"], .links > input.continue {
    background: none repeat scroll 0 0 #6A8CB1 !important;
    color: #FFFFFF;
    cursor: pointer;
    display: inline-block;
    font: 400 11px Arial;
    margin: 0 5px 17px 0;
    outline: 3px none;
    padding: 8px 14px !important;
    text-align: center;
    text-decoration: none;
    vertical-align: baseline;
}
a {
    background: none repeat scroll 0 0 transparent;
    padding: 0;
} 
```

# tinymce - tinyMCE 中的 Wordpress 简码预览

> ID：13687604
> 
> 赞同：12
> 
> 时间：2012-12-03T16:32:28.130
> 
> 标签：tinymce, wordpress, wordpress-theming

我写了一个简码，它的功能应该是这样的。现在最困难的部分：

我想在 tinyMCE 编辑器中向用户展示一个预览。在编辑器中加载 CSS 对我来说不是问题，但我很想知道是否可以在 TinyMCE 中处理短代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:47:41.550

让代码说话：我将添加一个代码来为突出显示内容单词的短代码添加一个视觉图标，然后您可以使用相同的逻辑实现您想要的任何其他短代码，

```
 class spot_shortcodes {

      function spot_shortcodes() 
{   

    add_action('init', array(&$this, 'init'));
}
function init(){

    // Enable shortcodes in text widgets
    add_filter( 'widget_text', 'do_shortcode' );

    // Fix for large posts, http://core.trac.wordpress.org/ticket/8553
    @ini_set( 'pcre.backtrack_limit', 500000 );
    // init process for button control
    add_filter( 'tiny_mce_version', 'my_refresh_mce');

   // Add only in Rich Editor mode
   if ( get_user_option('rich_editing') == 'true') {
     add_filter('mce_buttons_3', array(&$this, 'register_highlight_button'));
   }    
}

    // Add your button plugin js code to tinyMCE
    // codex: wp_register_script( $handle, $src, $deps, $ver, $in_footer );
    wp_register_script( 'effects-highlight', SPOT_SHORTCODES_URL . '/js/jquery.effects.highlight.js', false ,SPOT_SHORTCODES_URL, true );

   function add_youtube_button() {

   // Don't bother doing this stuff if the current user lacks permissions
   if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') )
     return;

   // Add only in Rich Editor mode
   if ( get_user_option('rich_editing') == 'true') {
     add_filter("mce_external_plugins", array(&$this, "add_youtube_tinymce_plugin"));
     add_filter('mce_buttons', array(&$this, 'register_highlight_button'));
   }
}

    // function to register you button to tinyMCE dashboard
    function register_highlight_button($buttons) {
   array_push($buttons, "|", 'highlight_button');
   return $buttons;
}

    function add_youtube_tinymce_plugin($plugin_array) {

    // your icon image(highlight.png) which will be displayed in the tinyMCE dashboard
    $plugin_array['highlight'] = SPOT_TINYMCE_URL . '/icons-lib-custom.js';

   return $plugin_array;
}

} // class end
// Finally make an object from your button
$spot_shortcodes = new spot_shortcodes(); 
```

我们的高亮按钮选项的js代码制作了一个点js文件，将以下代码放入其中并放入tinyMCE插件目录

```
// dont forget to change the paths
tinymce.create('tinymce.plugins.highlight', {
    // creates control instances based on the control's id.
    // our button's id is "highlight_button"
    createControl : function(id, controlManageradel) {
        if (id == 'highlight_button') {
            // creates the button
            var button = controlManageradel.createButton('highlight', {
                title : 'Add a Hightlight Text', // title of the button
                image :spotShortcodes.plugin_folder +"/tinymce/images/highlight.png",  // path to the button's image
                onclick : function() {
                    // triggers the thickhighlight
                    var width = jQuery(window).width(), H = jQuery(window).height(), W = ( 720 < width ) ? 720 : width;
                    W = W - 80;
                    H = H - 84;
                    tb_show( 'Insert text box shortcode', '#TB_inline?width=' + W + '&height=' + H + '&inlineId=highlight-form' );
                }
            });
            return button;
        }
        return null;
    }
});

// registers the plugin. DON'T MISS THIS STEP!!!
tinymce.PluginManager.add('highlight', tinymce.plugins.highlight);
// executes this when the DOM is ready
jQuery(function(){
    // creates a form to be displayed everytime the button is clicked
    // you should achieve this using AJAX instead of direct html code like this
    var form = jQuery('<div id="highlight-form"><table id="highlight-table" class="form-table" style="text-align: left">\
         \
            \
        <tr>\
        <th><label class="title" for="highlight-bg">Highlight color</label></th>\
            <td><select name="bg" id="highlight-bg">\
                <option value="#f02d33">Red</option>\
                <option value="#b6bbbd">Grey</option>\
                <option value="#3e3c3c">Darkgrey</option>\
                <option value="#99cc33">Lightgreen</option>\
                <option value="#6c8c2d">Darkgreen</option>\
                <option value="#0f5ac6">Blue</option>\
                <option value="#3cbcf7">Cyan</option>\
                <option value="#9219f8">Purple</option>\
                <option value="#fcc016">Yellow</option>\
                <option value="#f65e0e">Orange</option>\
            </select><br />\
        <div class="info"><small>Select box type.</small></div></td>\
        </tr>\
        <tr>\
        <th><label class="title" for="highlight-contet">Conent</label></th>\
            <td><textarea rows="7"\ cols="45"name="content" id="highlight-content">hightlight text</textarea>\
                 <br />\
            <div><small>this text displayed in box.</small></div></td>\
        </tr>\
        </table>\
    <p class="submit">\
        <input type="button" id="highlight-submit" class="button-primary" value="Insert shortcode" name="submit" style=" margin: 10px 150px 50px; float:left;"/>\
    </p>\
    </div>');

    var table = form.find('table');
    form.appendTo('body').hide();

    // handles the click event of the submit button
    form.find('#highlight-submit').click(function(){
        // defines the options and their default values
        // again, this is not the most elegant way to do this
        // but well, this gets the job done nonetheless
        var options = { 
            'bg'     : '#f02d33',
            'content'  : 'hightlight text',
            };

        var shortcode = '[highlight ';

        for( var index in options) {
            var value = table.find('#highlight-' + index).val();

            // attaches the attribute to the shortcode only if it's different from the default value
            if ( value !== options[index] & index !== 'content')
                shortcode += ' ' + index + '="' + value + '"';
        }

        shortcode += ']'+ value + '[/highlight]'  

        // inserts the shortcode into the active editor
        tinyMCE.activeEditor.execCommand('mceInsertContent', 0, shortcode);

        // closes Thickhighlight
        tb_remove();
    });
}); 
```

希望对您有所帮助，如果您需要更多解释，请给我反馈，谢谢。

# c++ - *函数签名*（作为类型的对偶）的*唯一*目的是在潜在的重载集中定义重复项 - 还是有其他目的？

> ID：13687607
> 
> 赞同：6
> 
> 时间：2012-12-03T16:32:32.143
> 
> 标签：c++, overloading

与[为什么将函数强制转换为除了返回类型相同的函数类型失败？](https://stackoverflow.com/questions/13685262/why-does-casting-a-function-to-a-function-type-that-is-identical-except-for-retu)，我想更全面地了解函数*类型*和函数*签名*之间的区别。

例如，在处理函数指针时通常必须考虑函数的*类型*，函数的类型包括该函数的返回类型。

但是，正如 Mike Seymour 对上述问题的回答中所指出的，函数的*签名*与函数的*类型*不同。签名当然用于消除潜在的重载函数之间的歧义（注意函数的返回类型在识别唯一函数中不起作用）。但是，我现在想了解函数签名与函数类型的相关性和重要性。我突然想到，C++ 中函数签名的*唯一*目的是在重载决议期间识别重载候选者和/或重载集中的唯一函数。

我对么？重载解析是 C++ 中函数签名的唯一目的吗？或者，除了（或仅间接相关）重载解析之外，函数签名还有其他用途/应用吗？

**附录**为清楚起见，请注意，我*特别想了解函数***签名**的目的和函数**类型**之间的区别。即，我知道函数类型对于函数指针的使用和编译器/链接器的调用约定实现都是必需的。但是，调用约定仅在重载决议完成后才相关。我在这里特别问，如果函数*签名*（与*type*相对）的唯一目的是用于重载解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:42:39.417

The standard mentions that signatures are used for name mangling and linking.

That being said, name mangling is not standarized. The return type is redundant in a function symbol (since there is only one possible return type for a function with a given name and arguments in a valid program, it is not required to differentiate two different symbols), but even then some ABIs do include the return type of a function in the mangled name, probably as a way of double checking that there is no violation of the rule above.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:44:59.060

> 我对么？

就我而言，还有其他目的。考虑到 C 也有函数签名但没有重载。

除了重载之外，函数签名的基本目的是符合特定平台的[调用约定。](http://en.wikipedia.org/wiki/Calling_convention)

当函数接受参数并返回值时，编译器需要知道参数的类型和大小才能正确地将它们传递给函数。通常，函数参数被压入堆栈（但这不是通用规则，尤其是在 64 位架构系统上）。考虑以下情况。如果你调用一个函数

```
foo(42); 
```

编译器如何知道它必须传递给函数的整数值的大小？该数字`42`可以使用各种位宽表示，例如 1、2、4（甚至 8）字节整数：

```
00101010
0000000000101010
00000000000000000000000000101010 
```

现在，如果函数没有签名说明，例如，参数是 a `char`（1 个字节）、a `short`（可能是 2 个字节）或 a（`int`可能是 4 个字节），那么编译器有无法确定正确的尺寸。这意味着如果它将任意数量的字节压入堆栈，但函数需要另一个大小，则会发生堆栈损坏。

另一个很好的例子是返回结构 ( `struct`)。通常，原始返回值（例如整数和浮点数）在寄存器中返回；这通常是`EAX`x86 上的寄存器。但是，如果想编写一个返回结构的函数怎么办？如果结构的整体大小太大以至于无法放入寄存器，则编译器必须生成将返回值推入堆栈的代码，而不是将其分配给寄存器。所以如果一个函数被定义为

```
int foo()
{
    return 1337;
} 
```

或作为

```
struct bar {
    int a;
    char b[16];
    float x;
};

struct bar foo()
{
    struct bar ret;
    ret.a = 0;
    memcpy(&ret.b, "abcdefghijklmno", sizeof(ret.b));
    ret.x = 3.1415927;
    return ret;
} 
```

将生成不同的程序集（和机器代码）——第一个返回整数的函数将使用`EAX`寄存器来存储返回值，但第二个调用**必须**使用堆栈。

# json - 在 log4net 中记录为 JSON

> ID：13687610
> 
> 赞同：9
> 
> 时间：2012-12-03T16:32:41.717
> 
> 标签：json, log4net

我试图找出使用 log4net 将我们所有的日志写成一行 JSON 的最佳方法。我希望能够配置任何附加程序来使用它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-10T14:05:05.450

如果您正在寻找 log4net JSON，请参阅[log4net.ext.json](https://github.com/BrightOpen/log4net.Ext.Json)。*我是开发者*。Readme.md 涵盖了如何启动和运行它的[第一步。](https://github.com/BrightOpen/log4net.Ext.Json)它用于代替布局，因此可以将其插入任何采用布局的 log4net appender。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-02T14:16:00.240

请尝试这个 Github 项目，这是一个倡议

[json-log4j-布局](https://github.com/Aconex/json-log4j-layout)

# android - 在云端同步安卓数据

> ID：13687611
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:32:43.870
> 
> 标签：android, onedrive

我想将我的 android 应用程序数据（数据库和图像文件）与云同步。我不确定这是否可能，

提示用户使用 skydrive、dropbox、google drive 并根据选择在“帐户和同步”设置中创建帐户？

还假设用户选择了 skydrive，live sdk 进行身份验证并为该用户返回会话。在这种情况下，当登录屏幕不是自定义而是提供商的屏幕时，如何创建帐户？例如 skydrive 应用程序的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:36:50.190

有 10e+6 个解决方案（不完整或过于具体）。

首先，检查这些 OSS 项目：

*   MyTracks -- 实现与 Google 电子表格、融合表和地图的基于行的同步
*   Financisto -- 基于文件的 GDocs 同步

对于我自己的宠物项目（Wheelly），我借用了第一个项目并尝试在它之上实现 2 向同步。这是费力和不平凡的。当然，开箱即用的 sqlite 同步到 gdocs（或类似的东西）会很好；我敢打赌它有市场。

# java - JPA从反面删除双向关联

> ID：13687613
> 
> 赞同：2
> 
> 时间：2012-12-03T16:32:54.607
> 
> 标签：java, jpa, eclipselink

在我的域模型中有很多双向关联（OneToMany 和 ManyToMany）

我已经阅读[了这篇文章](http://blog.xebia.com/2009/03/16/jpa-implementation-patterns-bidirectional-assocations/)，并根据示例模式进行了所有的联想。（ManyToMany 关联有一个两侧的 addXY 方法，遵循模式）

使用[本文中的模式，](http://blog.xebia.com/2009/04/09/jpa-implementation-patterns-removing-entities/)问题是，从反面删除呢？

例子：

```
public class Customer implements Serializable {

...

@ManyToOne()
private CustomerStatus customerStatus;

@PreRemove
public void preRemove(){
    setCustomerStatus(null);
}

public void setCustomerStatus(CustomerStatus customerStatus) {
    if(this.customerStatus != null) { this.customerStatus.internalRemoveCustomer(this); }
    this.customerStatus = customerStatus;
    if(customerStatus != null) { customerStatus.internalAddCustomer(this); }
} 
```

另一方面：

```
public class CustomerStatus implements Serializable {

private static final long serialVersionUID = 1L;

@OneToMany(mappedBy="customerStatus")
private List<Customer> customers;

@PreRemove
public void preRemove(){
    for(Customer c : customers){
        c.setCustomerStatus(null); // this causes ConcurrentException
    }

}

public List<Customer> getCustomers() {
    return Collections.unmodifiableList(this.customers);
}

public void addCustomer(Customer c){
    c.setCustomerStatus(this);
}

public void removeCustomer(Customer c){
    c.setCustomerStatus(null);
}

void internalAddCustomer(Customer c){
    this.customers.add(c);
}

void internalRemoveCustomer(Customer c){
    this.customers.remove(c);
} 
```

问题是，preRemove 方法会导致`ConcurrentException`. 如何处理？目标是删除 CustomerStatus，并将所有具有该状态的客户设置为 NULL。

**更新**

没有 preRemove 方法，我有`MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:20:27.830

在迭代客户集合时，不能调用 this.customers.remove(c)。这个问题之前出现过，因此您可能会在此处找到其他解决方案： [How to Avoid ConcurrentModificationException when iterate over a map and changed values？](https://stackoverflow.com/questions/4078518/how-to-avoid-concurrentmodificationexception-when-iterating-over-a-map-and-chang)

但一个简单的解决方案是从旧列表创建一个新列表以在 preRemove 上进行迭代：

```
public void preRemove(){
    List<Customer> tempList = new ArrayList(customers);
    for(Customer c : tempList){
        c.setCustomerStatus(null); 
    }
} 
```

# javascript - 如何使用javascript获取复选框的选中属性

> ID：13687617
> 
> 赞同：1
> 
> 时间：2012-12-03T16:33:08.067
> 
> 标签：javascript, checkbox, checked, inline-editing

我正在关注本关于内联编辑的教程，[http://www.datatables.net/blog/Inline_editing](http://www.datatables.net/blog/Inline_editing)。

现在我遇到了问题，我正在尝试编辑复选框，但我没有到达那里。

我只是用复选框替换了文本类型的输入，但我想还有更多。所以我的问题是，如何读取复选框的选中属性？

这是我的代码

```
<script type="text/javascript">

    function restoreRow(oTable, nRow) {
        var aData = oTable.fnGetData(nRow);
        var jqTds = $('>td', nRow);

        for (var i = 0, iLen = jqTds.length; i < iLen; i++) {
            oTable.fnUpdate(aData[i], nRow, i, false);
        }

        oTable.fnDraw();
    }

    function editRow(oTable, nRow) {
        var aData = oTable.fnGetData(nRow);
        var jqTds = $('>td', nRow);
        jqTds[0].innerHTML = '<input type="text" value="' + aData[0] + '">';
        jqTds[1].innerHTML = '<input type="text" value="' + aData[1] + '">';
        jqTds[2].innerHTML = '<input type="checkbox" value="' + aData[2] + '">';
        jqTds[3].innerHTML = '<a class="edit" href="">Save</a>';

    }

    function saveRow(oTable, nRow) {
        var jqInputs = $('input', nRow);
        oTable.fnUpdate(jqInputs[0].value, nRow, 0, false);
        oTable.fnUpdate(jqInputs[1].value, nRow, 1, false);
        oTable.fnUpdate('<input type="checkbox" checked="' + jqInputs[2].value + '">', nRow, 2, false);
        oTable.fnUpdate('<a class="edit" href="">Edit</a>', nRow, 3, false);
        oTable.fnDraw();
    }

    $(document).ready(function () {
        var oTable = $('#tbl').dataTable();
        var nEditing = null;

        $('#new').click(function (e) {
            e.preventDefault();

            var aiNew = oTable.fnAddData(['', '', '',
            '<a class="edit" href="">Edit</a>', '<a class="delete" href="">Delete</a>']);
            var nRow = oTable.fnGetNodes(aiNew[0]);
            editRow(oTable, nRow);
            nEditing = nRow;
        });

        $('#tbl a.delete').live('click', function (e) {
            e.preventDefault();

            var nRow = $(this).parents('tr')[0];
            oTable.fnDeleteRow(nRow);
        });

        $('#tbl a.edit').live('click', function (e) {
            e.preventDefault();

            /* Get the row as a parent of the link that was clicked on */
            var nRow = $(this).parents('tr')[0];

            if (nEditing !== null && nEditing != nRow) {
                /* Currently editing - but not this row - restore the old before continuing to edit mode */
                restoreRow(oTable, nEditing);
                editRow(oTable, nRow);
                nEditing = nRow;
            }
            else if (nEditing == nRow && this.innerHTML == "Save") {
                /* Editing this row and want to save it */
                saveRow(oTable, nEditing);
                nEditing = null;
            }
            else {
                /* No edit in progress - let's start one */
                editRow(oTable, nRow);
                nEditing = nRow;
            }
        });
    }); 
```

这是我的桌子

```
<p>
                    <a id="new" href="">Add new row</a></p>
                <table cellpadding="0" cellspacing="0" border="0" class="tbl" id="tbl">
                    <thead>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Description
                            </th>
                            <th>
                                Sample
                            </th>
                            <th>
                            </th>
                            <th>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null)
                        {
                            foreach (var item in Model.TestFields)
                            { 
                            <tr>
                                <td>
                                    @Truncate(item.Name, 20)
                                </td>
                                <td>
                                    @Truncate(item.Description, 20)
                                </td>
                                <td>
                                    @Html.CheckBoxFor(i => item.Sample)
                                </td>
                                <td>
                                    <a class="edit" href="">Edit</a>
                                </td>
                                <td>
                                    <a class="delete" href="">Delete</a>
                                </td>
                            </tr>
                            }
                        }
                    </tbody>
                </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:36:46.387

假设您的`$`符号是 jQuery，您可以这样做：

```
$('#my_checkbox').is(':checked') // true if my_checkbox is checked, false otherwise. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:09:14.587

这应该可以解决许多选定复选框的问题

```
// #BoxWrapper is supposed to be the div that contains the checkbox this could be replaced            
// by $(document) if you are not using a div as a container. 
$("#BoxWrapper").find('input:checkbox').each(function(){
var checked = $(this).attr('checked');
if(checked){
 //here you do what needs to be done for checked ones
}
}); 
```

# mysql - 奇怪的 MYSQL 反引号（重音）

> ID：13687619
> 
> 赞同：2
> 
> 时间：2012-12-03T16:33:11.330
> 
> 标签：mysql

我的数据库中有两个表，信息和评论，它们的结构如下：

```
info (id(int(10)), name(varchar(80)), ...19 other columns.., phone(int(16)));
comment (id(int(10)), name(varchar(80)), comment(varchar(80)), phone(int(16))); 
```

当我执行这些 SQL 查询时：

```
INSERT INTO info (name, ...19 other columns.., phone) VALUES ('asa', ....., 123456) 
```

它工作得很好。

但是当涉及到时`INSERT INTO comment (name, address, phone) VALUES ('asa', 'asa', 123456)`，它会报告 SQL 语法错误，除非我像这样将 phone 反引号括起来``phone``

老实说，我可以通过添加反引号来完成所有事情，但我想知道它为什么有效。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:54:35.400

表结构 `name,`**`comment`**`, phone`

你的sql命令 （地址和注释不同）`name,`**`address`**`, phone`

检查所有列和“插入”名称是否完全匹配。

错误信息很重要。如果可能，请发布它。显示整个表列名和整个“插入”语句也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:12:18.230

我想在您尝试插入的地址中有一个逗号或其他内容，因此它试图将该逗号之外的所有内容插入到电话字段中。

# c# - 无法隐式转换类型'System.Collections.Generic.IEnumerable ' 到 'System.Collections.Generic.List

> ID：13687622
> 
> 赞同：3
> 
> 时间：2012-12-03T16:33:18.040
> 
> 标签：c#, linq

我调用了一个`GetData`返回`IQueryable`对象的调用。我使用以下 LINQ`SelectMany`过滤并选择了我需要返回的字段，`List<MyDataType>`我收到以下错误

**无法将类型隐式转换`System.Collections.Generic.List<AnonymousType#1>`为`System.Collection.Generic.List<MyDataType>`**

这是我的代码

```
List<CASES> caseList = cs.GetData(foiaNumber).ToList();

Dictionary<int, string> NameDict = 
    caseList.ToDictionary(cases => cases.UID, cases =>     cases.NAME);

List<MyDataType> bindingGrdList = 
    caseList.SelectMany(x => x.ListObject)
        .Select(n => 
            new { 
                   SUBMITTER_NAME = NameDict[n.UID], 
                   NUMBER = n.UID, 
                   DATE_SENT = n.DATE_SENT, 
                   DATE_DUE = n.DATE_DUE, 
                   FINAL_DETERMINATION = n.FINAL_DETERMINATION 
                 }).ToList(); 
```

如何修复 AnonymousType 错误？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T16:44:13.003

代替

```
n => new { SUBMITTER_NAME = NameDict[n.UID], NUMBER = n.UID,
    DATE_SENT = n.DATE_SENT, DATE_DUE = n.DATE_DUE,
    FINAL_DETERMINATION = n.FINAL_DETERMINATION } 
```

和

```
n => new MyDataType { SUBMITTER_NAME = NameDict[n.UID], NUMBER = n.UID,
    DATE_SENT = n.DATE_SENT, DATE_DUE = n.DATE_DUE,
    FINAL_DETERMINATION = n.FINAL_DETERMINATION } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:49:30.247

您需要将投影从匿名类型更改为`MyDataType`. 为此，您需要更改`Select`如下：

```
List<MyDataType> bindingGrdList = 
    caseList.SelectMany(x => x.ListObject)
        .Select(n => 
            new MyDataType 
                { 
                   SUBMITTER_NAME = NameDict[n.UID], 
                   NUMBER = n.UID, 
                   DATE_SENT = n.DATE_SENT, 
                   DATE_DUE = n.DATE_DUE, 
                   FINAL_DETERMINATION = n.FINAL_DETERMINATION 
                 }).ToList(); 
```

注意：我假设这些属性是 的正确属性`MyDataType`，并且`MyDataType`具有默认的无参数构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:43:27.687

尝试`var`改用：

```
var bindingGrdList = caseList.SelectMany(x => x.ListObject).Select(n => new { SUBMITTER_NAME = NameDict[n.UID], NUMBER = n.UID, DATE_SENT = n.DATE_SENT, DATE_DUE = n.DATE_DUE, FINAL_DETERMINATION = n.FINAL_DETERMINATION }).ToList(); 
```

这将使它从您的代码中推断出类型，这就是您想要的匿名类型。

# c# - 如何在我的电子邮件应用程序中添加登录屏幕并登录到我的电子邮件帐户（Windows Phone 7）

> ID：13687623
> 
> 赞同：-5
> 
> 时间：2012-12-03T16:33:18.287
> 
> 标签：c#, .net, windows-phone-7

我为 Windows Phone 7 创建了一个简单的电子邮件应用程序，但我需要设置我的电子邮件帐户以从我的应用程序发送电子邮件。

我想在我的应用程序中添加一个登录屏幕，这样我就可以设置我的电子邮件帐户，当我输入我的电子邮件用户 ID 或密码时，我的应用程序应该将我带到撰写邮件屏幕。

我还希望它记住我的用户名或密码，直到我注销为止。

这是我的应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Tasks;

namespace SendingMail
{
    public partial class MainPage : PhoneApplicationPage
    {
        EmailAddressChooserTask emailAddresstask;// Constructor
        public MainPage()
        {
            InitializeComponent();
            this.emailAddresstask = new EmailAddressChooserTask();
            this.emailAddresstask.Completed += new EventHandler<EmailResult>(emailAddresstask_Completed);
        }

        #region Events

        //Open Contact button click
        private void btnOpenContact_Click(object sender, RoutedEventArgs e)
        {
            emailAddresstask.Show();
        }

        //Email Address Chooser Task Completed
        private void emailAddresstask_Completed(object sender, EmailResult e)
        {
            if (e.TaskResult == TaskResult.OK)
            {
                txtTo.Text = e.Email;
            }
        }

        //Send mail button click
        private void btnMail_Click(object sender, RoutedEventArgs e)
        {
            EmailComposeTask Myemail_Composetask = new EmailComposeTask();
            Myemail_Composetask.To = txtTo.Text;
            Myemail_Composetask.Cc = txtCC.Text;
            Myemail_Composetask.Subject = txtSbj.Text;
            Myemail_Composetask.Body = txtbd.Text;
            Myemail_Composetask.Show();
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:47:33.623

我猜您误解了电子邮件启动器任务的工作原理。它没有任何登录或注销选项。此电子邮件启动器任务将用于在 Outlook 或其他 POP、IMAP 电子邮件应用程序上的已配置电子邮件上撰写电子邮件。

此外，您将无法在模拟器上对此进行测试。您只能在其中至少配置了一封电子邮件的设备上进行测试。

谢谢，卡马尔。

# java - RDF/XML 耶拿 getValue

> ID：13687624
> 
> 赞同：2
> 
> 时间：2012-12-03T16:33:20.300
> 
> 标签：java, xml, rdf, jena

我需要帮助才能使用 Jena 框架从 RDF 中获取一些信息。我有这样的 RDF 内容：

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:ts="http://www.test.com/testModel.owl#">  
<ts:Entity rdf:ID="1234_test"> 
 <....>
</ts>
</rdf:RDF> 
```

现在我的想法是从 ts:Entity 中取出 ID。这是我的代码：

```
Model model = ModelFactory.createDefaultModel();
InputStream requestBody = new ByteArrayInputStream(request.getBytes());
String BASE = "http://www.test.com/testModel.owl#";
model.read(requestBody,BASE);
requestBody.close();

StmtIterator iter = model.listStatements();
 while (iter.hasNext()) {

        Statement stmt      = iter.nextStatement();  // get next statement
        Resource  subject   = stmt.getSubject();     // get the subject
        Property  predicate = stmt.getPredicate();   // get the predicate
        RDFNode   object    = stmt.getObject();      // get the object

            System.out.println(subject + " | "+predicate);

     } 
```

在这种情况下，唯一的问题是我必须滚动所有声明。有一种方法可以直接从 ts:Entity 获取 ID？可能在获取资源之前和与该资源相关的 ID 值之后。

提前感谢您的帮助。

* * *

抱歉，我又来了，因为我有一个类似的问题，例如，如果我有这个 rdf：

```
<rdf:RDF
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns:ts="http://www.test.com/testModel.owl#">  
<ts:Entity rdf:ID="1234_test"> 
   <ts:Resource> 
       <ts:testProp rdf:datatype="http://www.w3.org/2001/XMLSchema#string">test_ID_test</ts:testProp>
 </ts>
</ts>
</rdf:RDF> 
```

我如何提取值 test_ID_test ？？？如果我想使用 SPARQL 我该怎么做耶拿？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:17:40.390

您应该使用[SPARQL](http://www.w3.org/TR/sparql11-query/)来查询您的模型，而不是遍历所有语句。Jena 提供了一个很好的[教程](http://jena.apache.org/tutorials/sparql.html)，介绍如何将 SPARQL 与他们的 API 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T20:53:25.800

怎么样：

```
Resource ENTITY_TYPE = model.getResource("http://www.test.com/testModel.owl#Entity");
StmtIterator iter = model.listStatements(null, RDF.type, ENTITY_TYPE);
while (iter.hasNext()) {
    String entityID = iter.next().getSubject().getURI();
    System.out.println(entityID);
} 
```

这将获得每个实体的 URI。

# android - 左/右声道

> ID：13687627
> 
> 赞同：2
> 
> 时间：2012-12-03T16:33:59.270
> 
> 标签：android, google-tv

我正在尝试关闭左声道：

```
MediaPlayer mp; 

....

mp.setVolume(0.f, 1f); 
```

在平板电脑上它可以正常工作，但在谷歌电视上，声音不仅从左声道丢失，而且从右声道也丢失。帮助！任何想法都会有所帮助。谢谢你。

更新：在这个论坛上[http://www.googletvforum.org/forum/logitech-revue/375-audio-problems-logitech-revue.html](http://www.googletvforum.org/forum/logitech-revue/375-audio-problems-logitech-revue.html)回复这样的消息之一：“罗技尚未弄清楚如何管道多通道音频通过 hdmi。你必须使用光学输出。没关系。

# git - 提高压缩二进制文件上 git 操作的性能

> ID：13687628
> 
> 赞同：1
> 
> 时间：2012-12-03T16:34:02.660
> 
> 标签：git

我正在使用 git 来管理一组相对较大的二进制文件。它由几千个`eps`, `png`, `jpg`, `gif`,`pdf`文件和几个小文本文件混合而成，总大小超过 53GB。我发现 git 有点慢。当然，很多人说“不要使用 git”，这很好。

我已经准备好使用`.gitattributes`或`.git/info/attributes`将 git 设置为不对这些文件执行 delta，语法如下：

```
*.jpg -delta 
```

但是，我还没有确切地阅读需要去哪里。两个问题：

1.  将其添加到`.gitattributes`已签入存储库的文件中？
2.  `.git/info/attributes/`将它放在我的中央存储库中会有所帮助吗？

我的经验是，对于这个存储库的新克隆以及许多文件和/或大文件的提交，性能都很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:46:29.000

根据[`gitattributes(5)`](http://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)：

> 如果您只想影响单个存储库（即，将属性分配给特定于该存储库的一个用户工作流的文件），则应将属性放置在 $GIT_DIR/info/attributes 文件中。应该受版本控制并分发到其他存储库的属性（即所有用户感兴趣的属性）应该进入 .gitattributes 文件。

即，您的选择（1）。

# r - 如何获取函数中传递的所有参数？

> ID：13687630
> 
> 赞同：1
> 
> 时间：2012-12-03T16:34:04.063
> 
> 标签：r

有没有办法“访问”函数中所有传递的参数？我相信这可以通过*参数*数组在javascript中完成，R中是否有等价物？

```
myfunc <- function() {
    print(arguments[1])
    print(arguments[2])
}

R> myfunc("A","B")

[1] "A"
[1] "B" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T16:36:51.790

从技术上讲，您的函数没有参数，因此将参数传递给它是错误的。

也就是说，您至少需要`...`. 如果您这样做，您可以使用`list`on`...`然后访问*您*的`...`. 例如：

```
myfunc <- function(...) {
  names(list(...))
} 
```

另一种方法是使用`match.call`. 例如：

```
myfunc <- function(A, B) {
  names(match.call()[-1])
} 
```

# c# - 自动存储腌制数据，使用 EF5 检索未腌制数据

> ID：13687633
> 
> 赞同：1
> 
> 时间：2012-12-03T16:34:14.953
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-5

标题很糟糕，我知道，所以这里是长版本：

我需要将可变数据存储在数据库列中——主要是键值对，但项目的数量和这些项目的名称在运行时都是完全未知的。我最初的想法是将数据（字典）“腌制”成 JSON 字符串之类的东西，可以存储在数据库中。当我检索该项目时，我会将 JSON 字符串转换（“unpickle”）为普通的 C# 字典。显然，我不希望任何人直接与 JSON 字符串交互，因此对应于数据库列的实际属性应该是私有的，并且我将有一个不会被映射的公共 getter 和 setter。

```
private string Data { get; set; }
public Dictionary<string, object> DataDictionary
{
    get
    {
        return Deserialize(Data);
    }
    set
    {
        Data = Serialize(value);
    } 
} 
```

问题当然是 EF 将拒绝映射私有`Data`属性并且实际上想要映射`DataDictionary`不应映射的公共属性。我相信有办法解决这个问题，但是这开始产生的复杂性让我觉得我正在进入一个我不应该进入的兔子洞。我的想法在这里合理吗，还是我应该走不同的方向？

我想我可以简单地与仅由键和值列组成的基本表创建一对多关系，但这感觉很陈旧。但是，考虑到 EF 的固有局限性，这实际上是一条更好的路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:07:07.653

您是否尝试过使用[复杂类型](http://msdn.microsoft.com/en-us/library/dd456820%28v=vs.103%29.aspx)？您应该能够通过在 EF 模型上创建复杂类型的字符串来实现您的目标。

首先向模型添加一个复杂类型。在复杂类型上，添加将保存数据的字符串类型的标量属性。

然后，您可以在将保存数据的实体上创建这种复杂类型的属性。

代码生成器应该添加一个分部类，该类提供对复杂类型属性的访问。创建一个复杂类型的新部分类，并添加序列化/反序列化代码作为您的问题中的属性。然后，您可以使用此属性访问数据。

此示例中的复杂类型本质上是一个值的包装器，允许您将数据值存储到存储中。

# markdown - doxygen markdown 更改围栏代码块的背景颜色

> ID：13687638
> 
> 赞同：0
> 
> 时间：2012-12-03T16:34:25.237
> 
> 标签：markdown, doxygen

我在我的降价文件中包含了一个[围栏代码块。](http://www.doxygen.nl/manual/markdown.html#md_fenced)在我的文档中，我想展示一些片段来展示编写代码的“正确”和“错误”方式。用不同的背景直观地表示“正确”和“错误”的片段会很好。

有没有办法（除了手动编辑输出 HTML）来更改围栏代码块的背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T17:13:47.033

您可以修改 Doxygen 用来更改围栏块的背景颜色的 CSS，但我未能找到一种方法来以您希望的方式使用两种不同的颜色。

您可以使用生成 CSS doxygen 使用的副本

```
doxygen -w html head.html foot.html css.css doxyfile 
```

这给了你一个 CSS 文件来玩。您可以忽略/删除页脚/页眉文件。在 CSS 中，相关的类是`div.fragment`（大约在 1.8.5 doxygen CSS 中的第 180 行）。更改`background-color`此处会更改围栏代码块的背景颜色。

您需要将 doxyfile`HTML_STYLESHEET`设置指向修改后的 CSS。

鉴于 doxygen 处理的所有围栏块可能会使用相同的 CSS 类，我怀疑您想要做的事情是否可以通过琐碎的配置更改来实现。

警告 :) 我通过实验发现了这一点，因为我想要类似的东西，但我怀疑我们可以断然地说 doxygen 将来会继续为此目的使用这个类名。

# ruby-on-rails - 匹配 url 并重定向到 rails 中的 url+/index.html

> ID：13687640
> 
> 赞同：0
> 
> 时间：2012-12-03T16:34:28.593
> 
> 标签：ruby-on-rails, redirect, routes, public

我想重定向一些指向我`public`在 Rails 中的文件夹的链接。

例如：

`http://site.com/example`应该重定向到`http://site.com/example/index.html`

我只想对我的公用文件夹的内容执行此操作。

我在 config/routes.rb 文件中试过这个：

```
 match "*pages" => redirect("/%{pages}/index.html") 
```

但它进入了重定向循环。所以`http://site.com/example`重定向到`http://site.com/example/index.html`哪个也重定向到`http://site.com/example/index.html/index.html`等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:22:30.623

对于您的解决方案，创建一个页面控制器并定义您的页面操作

**例如**

您的控制器名称是`PagesController`

```
class PagesController < ApplicationController
  def about_us
  end
end 
```

在 中创建一个文件夹`views`，名称为`pages`，并创建一个名称为 about_us 的文件。（比如 - “about_us.html.erb”并写内容。

**在您的路线文件中**定义

```
match "/pages/about_us" => "pages#about_us", :as => :about_us" 
```

# javascript - Clear/Empty IFRAME 由 jQuery 提供它的 src？

> ID：13687642
> 
> 赞同：13
> 
> 时间：2012-12-03T16:34:38.640
> 
> 标签：javascript, jquery, iframe

我在模态框内有一个 iframe，它从“about:blank”开始，并通过 jquery 获取 src。

这已经可以正常工作了，但是当 iframe src 设置为更改时，在加载新内容时，模式仍然会显示旧内容总是会有延迟。

如何在给出新的 src 之前立即清除 iframe？

这里有一些代码：

```
$(function() {
      $('a.modal-k2-<?php echo $this->item->id; ?>').click(function() {
            window.top.$('#modalHolderK2_title').text('<?php echo $author->name . ' - ' . $this->item->title; ?>');
            if (window.top.$('#modalHolderK2_iframe').attr('src') != '<?php echo $itemlink; ?>') {
                window.top.$('#modalHolderK2_iframe').attr('src','about:blank');
                window.top.$('#modalHolderK2_iframe').attr('src','<?php echo $itemlink; ?>');
            }
            window.top.$('#modalHolderK2').modal();
            return false;
      });
    }); 
```

似乎“window.top.$('#modalHolderK2_iframe').attr('src','about:blank);” 在新的 src 传递给 iframe 之前没有完全执行。

我想有一个简单的解决方案，但我还没有找到任何对我有用的东西。

我只是想避免在调用新内容时显示旧内容的模式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-11T06:38:51.570

$("#iframe").contents().find("body").html('');

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-03T17:13:37.977

为了有`iframe`机会在加载下一个页面之前呈现空白页面，请考虑设置一个超时，以便在触发时将框架源更新为最终 URL，例如：

```
window.top.$('#modalHolderK2_iframe').attr('src','about:blank');
setTimeout(function() {
    window.top.$('#modalHolderK2_iframe').attr('src','http://www.yoururl.com/');
}, 100);
//....
window.top.$('#modalHolderK2').modal(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-10T06:21:05.947

```
 $('#iframid').attr('src', ''); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-13T14:55:59.700

无需强制用户等待 100 毫秒，您可以只`.remove()`使用 iframe 并创建一个新的：

```
 $(function () {
        $('a.modal-k2-<?php echo $this->item->id; ?>').click(function () {
            window.top.$('#modalHolderK2_title').text('<?php echo $author->name . ' - ' . $this->item->title; ?>');

            //cache reference to reduce querying for elements:
            let $modalIframe = window.top.$('#modalHolderK2_iframe');

            if ($modalIframe.attr('src') != '<?php echo $itemlink; ?>') {
                let $iframeParent = $modalIframe.parent(); //where we'll put the new iframe

                //remove the iframe:
                $modalIframe.remove();

                //create a new iframe and append it to $iframeParent
                $modalIframe = $('<iframe></iframe>').attr('id', 'modalHolderK2_iframe').attr('src', '<?php echo $itemlink; ?>');
                $modalIframe.appendTo($iframeParent);
            }
            $modalIframe.modal();
            return false;
        });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T16:44:33.393

在加载下一页之前将 src 重置为 about:blank 怎么样？

```
var ifr=window.top.$('#modalHolderK2_iframe');
if (ifr.attr('src') != '<?php echo $itemlink; ?>') {
ifr.on('load',function(){
    // need to remove onload
    $(this).off('load');
    this.src='<?php echo $itemlink; ?>';
    window.top.$('#modalHolderK2').modal();
});
ifr.attr('src','about:blank');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T16:38:22.393

一个简单的解决方法是创建一个看起来就像一个空 iframe 的 div。然后将其显示在函数的第一行，并在 iframe 的 onLoad 事件中，再次隐藏 div。然后，您根本不必处理 iframe 在加载其新内容时的呈现方式。

根据要求，我提出的解决方案的快速模型（我假设您可以阅读 jQuery 调用？）。

```
<div id="hider" style="display:none"></div>
<iframe id="myIFrame" onload="$('#hider').hide()" />

<script type="text/javascript">
    function updateIframe(newUrl) {
      $('#hider').show();
      $('#myIFrame').attr('src', newUrl);
    }
</script> 
```

现在只需使用 CSS 来定位 div，使其与 iframe 完全重叠。您显示 div 以隐藏 iFrame，然后当 iframe 完成加载时，其 onload 事件再次隐藏 div，显示新内容。

# perl - 生成唯一的随机字符串

> ID：13687643
> 
> 赞同：4
> 
> 时间：2012-12-03T16:34:44.277
> 
> 标签：perl, random, dancer

我正在用 Dancer 编写一个非常小的 URL 缩短器。它使用 REST 插件将发布的 URL 存储在数据库中，其中包含六个字符串，用户使用该字符串来访问缩短的 URL。

现在我有点不确定我的随机字符串生成方法。

```
sub generate_random_string{
    my $length_of_randomstring = shift; # the length of 
                                        # the random string to generate

    my @chars=('a'..'z','A'..'Z','0'..'9','_');
    my $random_string;
    for(1..$length_of_randomstring){
        # rand @chars will generate a random 
        # number between 0 and scalar @chars
        $random_string.=$chars[rand @chars];
    }

    # Start over if the string is already in the Database
    generate_random_string(6) if database->quick_select('urls', { shortcut => $random_string });

    return $random_string;
} 
```

如果生成的字符串已经在数据库中，这会生成一个六个字符的字符串并递归调用该函数。我知道有 63^6 个可能的字符串，但如果数据库收集更多条目，这将需要一些时间。也许它会变成一个几乎无限的递归，我想阻止它。

有没有办法生成唯一的随机字符串，防止递归？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T22:25:49.263

我们真的不需要对你的函数会有多少次迭代（或递归）犹豫不决。我相信在每次调用时，预期的迭代次数是几何分布的（即第一次成功之前的试验次数由[几何分布控制](http://en.wikipedia.org/wiki/Geometric_distribution)），其平均值为 1/p，其中 p 是成功找到未使用字符串的概率。我相信 p 只是 1 - n/63^6，其中 n 是当前存储的字符串的数量。因此，我认为您需要在数据库中存储 300 亿个字符串 (~63^6/2)，然后您的函数每次调用平均递归超过 2 次 (p = .5)。

此外，几何分布的方差为 1-p/p^2，因此即使有 300 亿个条目，一个标准差也只是 sqrt(2)。因此，我预计大约 99% 的时间循环将花费少于 2 + 2*sqrt(2) 次或 5 次迭代。换句话说，我不会太担心它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T22:45:17.420

从学术立场来看，这似乎是一个有趣的项目。但是，如果您在时钟上并且只需要随机且不同的字符串，我会使用 Data::GUID 模块。

```
use strict;
use warnings;
use Data::GUID qw( guid_string );

my $guid = guid_string(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:43:19.117

Getting rid of recursion is easy; turn your recursive call into a do-while loop. For instance, split your function into two; the "main" one and a helper. The "main" one simply calls the helper and queries the database to ensure it's unique. Assuming generate_random_string2 is the helper, here's a skeleton:

```
do {
   $string = generate_random_string2(6);
} while (database->quick_select(...)); 
```

As for limiting the number of iterations before getting a valid string, what about just saving the last generated string and always building your new string as a function of that?

For example, when you start off, you have no strings, so let's just say your string is 'a'. Then the next time you build a string, you get the last built string ('a') and apply a transformation on it, for instance incrementing the last character. This gives you 'b'. and so on. Eventually you get to the highest character you care for (say 'z') at which point you append an 'a' to get 'za', and repeat.

Now there is no database, just one persistent value that you use to generate the next value. Of course if you want truly random strings, you will have to make the algorithm more sophisticated, but the basic principle is the same:

1.  Your current value is a function of the last stored value.
2.  When you generate a new value, you store it.
3.  Ensure your generation will produce a unique value (one that did not occur before).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T23:43:52.647

我还有一个基于使用 MySQL 的想法。

```
create table string (
    string_id int(10) not null auto_increment,
    string varchar(6) not null default '',
    primary key(string_id)
);

insert into string set string='';

update string
    set string = lpad( hex( last_insert_id() ), 6, uuid() )
    where string_id = last_insert_id();

select string from string
    where string_id = last_insert_id(); 
```

这为您提供了一个增量十六进制值，该值用非零垃圾填充。

# .net - 用于负载平衡数据库的 Mono .Net SqlConnection 不起作用

> ID：13687645
> 
> 赞同：0
> 
> 时间：2012-12-03T16:34:48.340
> 
> 标签：.net, sql-server, ado.net, mono, haproxy

我正在运行以下代码...

```
using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["db-connection"].ConnectionString))
{
    connection.Open();
    var command = new SqlCommand("SELECT @@SERVERNAME",connection);

    using (var reader = command.ExecuteReader())
    {
        reader.Read();
        return reader[0].ToString();
    }
} 
```

...作为返回此应用程序指向的数据库服务器名称的健全性检查。有两个数据库服务器（DB00 和 DB01），它们位于 HAProxy 后面，如果 DB00 不可​​用，HAProxy 会设置为故障转移到 DB01。

连接字符串如下所示：

```
 <add name="db-connection"
connectionString="User Id=USER_ID; Password=PASSWORD; Initial Catalog=the-database; Server=load-balancer.is.here,59281; Application Name=My.Application.Name;Min Pool Size=5;Max Pool Size=500;Connect Timeout=10;Connection Lifetime=29;" /> 
```

## 我们遇到的问题是这样的：

*   我们故障转移到 DB01（目前通过编辑 HAProxy 配置，使 DB00 成为备份，然后重新加载 HAProxy）
*   SELECT 代码（这个问题开头的代码）现在应该返回 DB01 作为服务器名，但它没有，它仍然返回 DB00
*   这意味着我们的 SQLConnections 似乎仍然指向错误的数据库
*   问题一直存在，直到我们在托管代码的盒子上重新启动单声道进程
*   现在健全性检查代码返回正确的服务器名称 - DB01

任何想法这可能是什么？这可能是单声道连接池问题吗？

**根据要求编辑** HAProxy 配置：

```
1 global
2         maxconn 4096
3         daemon
4 
5 defaults
6         mode tcp
7         #mode http
8         contimeout      5000
9         clitimeout      50000
10         srvtimeout      50000
11 
12 
13 frontend blahblah
14         bind *:59283
15         mode tcp
16         default_backend sql-server-lockertest
17 
18 backend sql-server-lockertest
19         balance roundrobin
20         server james 10.0.10.217:1433 check maxconn 32 rise 3 fall 3 
21         server andres 10.0.10.226:1433 check maxconn 32 rise 3 fall 3 backup 
```

问候，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:42:01.523

事实证明，Mono 还不支持连接字符串中的“Connection Lifetime”参数。

但我们只是修复了它并提出了一个拉取请求：

[https://github.com/mono/mono/pull/517](https://github.com/mono/mono/pull/517)

# android - 程序在 Facebook Graph API 响应之前进行——我怎样才能让它等待？

> ID：13687648
> 
> 赞同：0
> 
> 时间：2012-12-03T16:35:08.913
> 
> 标签：android, facebook, facebook-graph-api, user-permissions

这是正在发生的事情：

*   当状态发生变化时我的程序会更新
*   状态更改的处理程序需要知道用户的 ID 才能继续；它调用 findUserID()
*   findUserID() 从 Facebook Graph API 请求用户 ID
*   如果找到该值，则状态更改的处理程序会在该值之前继续进行，因此行为不正确。
*   几秒钟后，跟踪 (Log.d) 显示已找到用户 ID

如果我暂停然后恢复我的程序，则会注意到用户 ID，然后我的程序会正常运行；但是，这不应该需要做。如何让我的程序在继续之前等待 Facebook Graph API 的响应？

```
protected void findUserID(Session session) 
{   
    //userId = null; // Set initial

    // If session is open
    if (session != null && session.isOpened()) {    

        //  Make an API call to get user data
        // and define a new callback to handle the response
        Request request = Request.newMeRequest(session, new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {

                Session session = Session.getActiveSession();

                // If current session matches active session
                if (session == Session.getActiveSession()) {
                    if (user != null) {

                        userId = user.getId(); // set userId
                        Log.d("internal", "UserId issss: " + userId);
                    } // end if user != null   
                }   // end if session == Session.getActiveSession()                 
            } // end onCompleted
        }); // end request
        Request.executeBatchAsync(request); // Request does not execute unless you call this.
        Log.d("findUserID", "The value after request: " + userId);
    } // end session open check
} 
```

任何/所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:41:41.753

use some ..executeAndWait method on Request class instead of executeBatchAsync, than your program should wait for data and after that it will proceed...

take a look here: [https://developers.facebook.com/docs/reference/android/3.0/Request](https://developers.facebook.com/docs/reference/android/3.0/Request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:44:23.383

onCompleted 方法中的代码是一个“回调”。当 Facebook 请求完成时，它会被异步调用。到那时，原始函数 findUserID 将已经返回。使用回调需要一些时间来适应，并且需要您相应地组织控制流。您应该创建一个“onUserIdFound”函数并在找到用户ID 时调用它，而不是从函数返回值。

# c++ - C++，如何从迭代器返回对成员变量的引用

> ID：13687650
> 
> 赞同：1
> 
> 时间：2012-12-03T16:35:15.143
> 
> 标签：c++, vector, reference, iterator, set

有以下 B 类派生自 std::vector

```
class B: public std::vector <unsigned int>
{
    public:
            B() : std::vector <unsigned int> ( 0 ) {}
}; 
```

和一个 A 类 witten 如下：

```
class A
{
    private:        
            B b;    
    double x;

public:
    B & getB () {return b;}
    B const & getB() const {return b;}

    bool operator() ( const A & a ) const
            {
                    return a < a.x;
            }
}; 
```

为什么不可能从其迭代器返回对存储在 std::list 中的某个对象 A 的变量 b 的引用（以及如何做到这一点）？

```
int main ()
{
std::set <A > alist;
std::set <A> ::iterator i_alist = alist.begin();

for (; i_alist != alist.end(); i_list++)
{
    B &il = (*i_alist).getB(); //Compiler error
    B &il2 = i_alist->getB(); //Compiler error

    il.push_back(10);   //Modify il and concurrently B
}
} 
```

编译器错误：

```
Error   1   error C2440: 'initializing' : cannot convert from 'const B' to 'B &'    d:\test.cpp 
```

谢谢你的帮助...

**编辑问题**：

使用 const_cast 的可能解决方案：

```
B &il2 = const_cast <B&> ( i_alist->getB() ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:39:01.737

这与 . 几乎没有关系，`std::vector`而与`std::set`. 您将对象存储在`std::set`. 的元素`std::set`不能从外部修改。一旦将元素插入到集合中，就无法更改它。

出于这个原因，`std::set::iterator`可能（并且将）评估为一个常量对象，即使它不是一个`const_iterator`（语言规范实际上允许`std::set::iterator`并`std::set::const_iterator`引用相同的类型，但不需要它）。即在您的示例`*i_list`中是 const 限定的 type 对象`const A`。编译器将调用 的`const`版本`getB`，该版本返回`const B &`。您显然希望突破这种 constness，期望`getB`调用非 const 版本。

没有办法解决它，除非您决定使用某种 hack（`const_cast`等）从 set 元素中删除 const 性，从而使编译器调用`getB`.

基于-`const_cast`的破解解决方案看起来像

```
B &il = const_cast<A &>(*i_alist).getB(); 
```

或者您可以稍后从返回的`B`引用中删除常量

```
B &il = const_cast<B &>((*i_alist).getB());
B &il2 = const_cast<B &>(i_alist->getB()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:01:47.917

您的示例有些地方看起来很奇怪：

1.  永远不要从`std::vector`. 它不是为这种用途而设计的。通常没有理由这样做，除了懒惰，即避免一些打字。
2.  那是`A::operator()`为了什么？看起来像一些奇怪的方式来为`std::set`你正在使用的提供一个比较器。通常你不会因为你把它塞进`std::set`某个地方而改变一个类。如果您真的希望能够比较您的A（通常，不仅仅是为了集合），然后编写一个适当的免费`bool operator<(A const&, A const&);`如果它只是为了集合，请在您使用集合的地方编写一个自定义比较器。（该比较器不应该需要访问 A 的私人信息）
3.  是干什么`A::x`用的？仅用于比较还是仅用于集合内的比较？如果只是这样，请考虑使用 a`std::map<double, A>`甚至 a`std::map<double, B>`您将 x 作为键和实际对象作为值的位置。

你看，我问了很多悬而未决的问题，也许解决方案（使用地图）甚至不适合你的问题。那是因为您没有向我们展示您拥有的*真实*代码，而只是向我们展示了一些名称毫无意义的示例。所以我们只看到你想要*做*的事情，而不是你真正想用你的代码*实现的目标。*

**PS：**也许你甚至不需要一个有序的容器，将所有对象都塞进 a`std::vector`然后`std::sort`它就足够了。取决于您真正拥有的对象类型（您的示例中的 A 复制/交换很便宜）以及您使用容器的方式 - 插入如何与循环交错等等。

# jquery - jQuery从序列化数组中删除项目

> ID：13687652
> 
> 赞同：9
> 
> 时间：2012-12-03T16:35:20.823
> 
> 标签：jquery, arrays, serialization

我试图弄清楚如何使用索引从 serializedArray 中删除项目。以下场景：

```
[ 
    { 'name' : 'item1', 'value' : '1' }, 
    { 'name' : 'item2', 'value' : '2' }, 
    { 'name' : 'item3', 'value' : 3 } 
] 
```

现在我想删除'item2' - 我可以使用以下函数 - 但不确定如何删除它 - 是否有某种 unset() 方法或类似的东西：？

```
serializeRemove : function(thisArray, thisName) {
    "use strict";
    $.each(thisArray, function(index, item) {
        if (item.name == thisName) {
            // what to do here ?        
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:40:32.237

你可以像这样使用 vanilla JS 的[`filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)方法：

```
serializeRemove : function(thisArray, thisName) {
    "use strict";
    return thisArray.filter( function( item ) {
               return item.name != thisName;
           });
} 
```

`filter()` 使用回调函数来测试数组的每个元素。如果函数返回`true`该元素将在结果中。如果它返回`false`，该元素将被丢弃。

`filter()`所有主流浏览器和 IE9+ 都支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:39:42.110

您可以使用`delete`标准[的 JavaScript 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)：http : [//jsfiddle.net/2NsUD/](http://jsfiddle.net/2NsUD/)

```
var array = [ 
    { 'name' : 'item1', 'value' : '1' }, 
    { 'name' : 'item2', 'value' : '2' }, 
    { 'name' : 'item3', 'value' : 3 } 
];

var arrayClean = function(thisArray, thisName) {
    "use strict";
    $.each(thisArray, function(index, item) {
        if (item.name == thisName) {
            delete thisArray[index];      
        }
    });
}

console.log(array);
arrayClean(array, 'item3');
console.log(array);​ 
```

# magento - Magento 添加到购物车对象不包含自定义选项

> ID：13687655
> 
> 赞同：1
> 
> 时间：2012-12-03T16:35:30.143
> 
> 标签：magento

我正在成功使用 SCP，我认为问题不存在。基本上我有一个观察者来寻找“添加到购物车”事件并从那里开始。这是我的观察者方法：

```
public function catalogProductLoadAfter(Varien_Event_Observer $observer)
    {
        // set the additional options on the product
        $action = Mage::app()->getFrontController()->getAction();
        if ($action->getFullActionName() == 'checkout_cart_add') {
            // assuming you are posting your custom form values in an array called extra_options...
            if ($options = $action->getRequest()->getParam('extra_options')) {
                $product = $observer->getProduct();

                // add to the additional options array
                    $additionalOptions = array();
                if ($additionalOption = $product->getCustomOption('additional_options')) {
                    $additionalOptions = (array)unserialize($additionalOption->getValue());
                }

                foreach ($options as $key => $value) {
                    $additionalOptions[] = array(
                        'label' => $key,
                        'value' => $value,
                        'value' => $value,
                    );
                }
                // add the additional options array with the option code additional_options
                $observer->getProduct()->addCustomOption('additional_options', serialize($additionalOptions));
            }
        }
    } 
```

一切看起来都很好，功能也很好。我`Zend_Debug::dump`在不同的地方发表了一些声明，并找到了我认为问题所在。`$product`不包含任何自定义选项，或者至少看起来不包含！我已经完成了`Zend_Debug::dump($product);`，这给了我以下信息：[https](https://gist.github.com/720a111bc299501726d7) ://gist.github.com/720a111bc299501726d7这里要看到的重要一点是，显示的产品对象是可配置的子产品。所有子产品都有自定义选项（我只需要设置它们才能进入这个阶段！）。

在购物车页面中，自定义选项正确显示，因为我刚刚设置了它们。那么为什么在这个中间点，当我在上面的要点`Zend_Debug::dump($product);`之前`foreach`没有显示任何自定义选项，特别是第 9 行。我的观察者没有完成它的工作，因为 $additionalOptions 最终是空白的，只是显示为`array {}`. 因此，`foreach`不会触发并且脚本会倒下。那么为什么 gist 中没有显示自定义选项，但它们在产品页面上显示并且在此脚本在购物车页面上执行后显示？

为了进一步“证明”这一点，我得到了 foreach() 的无效参数。

# awk - awk 和 log2 部门

> ID：13687657
> 
> 赞同：2
> 
> 时间：2012-12-03T16:35:35.340
> 
> 标签：awk

我有一个制表符分隔的文件，看起来像这样：

```
foo 0 4

boo 3 2

blah 4 0

flah 1 1 
```

我正在尝试计算每行两列之间的 log2。我的问题是除以零我尝试过的是：

```
cat file.txt | awk -v OFS='\t' '{print $1, log($3/$2)log(2)}' 
```

当分母为零时，awk会崩溃。我想做的是某种条件语句，当分母等于 0 时，它会打印一个“inf”作为结果。

我真的不知道该怎么做？任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:41:03.250

您可以按如下方式实现（通过一些额外的调整）：

```
awk 'BEGIN{OFS="\t"} {if ($2==0) {print $1, "inf"} else {print $1, log($3/$2)log(2)}} file.txt 
```

**解释：**

*   `if ($2==0) {print $1, "inf"} else {...}`- 首先检查第二个字段 ( `$2`) 是否为零。如果是，则打印`$1`并`inf`继续下一行；否则照常进行。
*   `BEGIN{OFS="\t"}`-`OFS`在 awk 脚本中设置；主要是偏好的东西。
*   `... file.txt`- 当您将它指定为参数时，awk 可以从文件中读取；这节省了 cat 进程的使用。（见[UUCA](http://partmaps.org/era/unix/award.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:11:10.820

```
awk -F'\t' '{print $1,($2 ? log($3/$2)log(2) : "inf")}' file.txt 
```

# python-3.x - 我如何进行单元测试？它是什么样子的？

> ID：13687666
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:35:59.147
> 
> 标签：python-3.x

```
def abn_abc(voteslist):
    sums = {}
    for vote in votes:
        if vote in sums:
            sums[vote] += 1  
        else:
            sums[vote] = 1
    return tally_ballots(sums) 
```

如何为此功能编写单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:34:07.417

像这样的东西：

```
import unittest
from wherever import abn_abc

class AbnAbcTest(unittest.TestCase):

    def test_abn_abc(self):
        list_for_testing with = [<insert list here>]
        self.assertEqual(abn_abc(list_for_testing_with), <expected result>)

if __name__ == '__main__':
    unittest.main() 
```

[这是文档](http://docs.python.org/3.3/library/unittest.html)。

# git - 我是否使用工作 git 副本中的文件？

> ID：13687667
> 
> 赞同：0
> 
> 时间：2012-12-03T16:36:04.457
> 
> 标签：git

我是 git 新手。在 git 之前我使用过 svn。我已经阅读了很多关于 git 的内容，但有些地方我不明白。我使用 Eclipse 和 Egit。

所以让我开始描述。我需要克隆存储库的工作副本中的文件副本，还是可以直接使用它们？如何在项目中添加文件？我在 Eclipse Import -> Projects from Git -> URI an local 等中尝试过。但是我的项目仍然是空的。只有`.config-files`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:41:33.450

是的，每个“repo”也是一个“工作目录”。您可能想指定一个“master”并且仅将其用于克隆和合并，但这取决于您。

# sql-server-2008-r2 - select top n from dbo.XXXXX where tradetype in ('a', 'b', 'c')

> ID：13687671
> 
> 赞同：-2
> 
> 时间：2012-12-03T16:36:10.723
> 
> 标签：sql-server-2008-r2, distinct

我在创建查询以将`SELECT`以下查询组合成一个查询而不是手动运行每个查询时遇到了一点问题。这有助于我自己更轻松快捷地创建 CSV 文件

```
select top 200 * from dbo.abacus where  type =  'A'
select top 200 * from dbo.abacus where  type =  'B'
select top 200 * from dbo.abacus  where type =  'E'
select top 200 * from dbo.abacus  where type =  'F'
select top 200 * from dbo.abacus  where type =  'F'
select top 200 * from dbo.abacus  where type =  'FX'
select top 200 * from dbo.abacus  where type =  'E' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:40:35.637

```
select top 200 * from dbo.abacus where type = 'a'
union 
select top 200 * from dbo.abacus where type = 'b' 
```

从这里阅读更多 [http://msdn.microsoft.com/en-us/library/ms180026(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms180026(v=sql.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:38:14.967

尝试`UNION`：

```
select top 200 * from dbo.abacus where  type =  'A'
union
select top 200 * from dbo.abacus where  type =  'B'
union
select top 200 * from dbo.abacus  where type =  'E'
union
select top 200 * from dbo.abacus  where type =  'F'
union
select top 200 * from dbo.abacus  where type =  'F'
union
select top 200 * from dbo.abacus  where type =  'FX'
union
select top 200 * from dbo.abacus  where type =  'E' 
```

# javascript - 将 tinyMCE 加载到彩盒中

> ID：13687672
> 
> 赞同：2
> 
> 时间：2012-12-03T16:36:13.983
> 
> 标签：javascript, jquery, tinymce, colorbox

我有这个问题：在我的网站中有带有tinymce的textarea，我可以看到所有textarea，但是当我在textarea中打开colorbox时，这不会继承tinymce属性。这是我打开颜色框的代码：

```
$("#edit_item"+val.iditem).colorbox({
   href: $(this).attr('href'),                     
   data: data,
   onComplete: function(){ setup_tiny(); }  
}); 
```

这是我的函数“setup_tiny”：

```
function setup_tiny(){
    tinyMCE.init({
      mode : "exact",
    elements : "description",        
        width : "40%",        
        height: "200",

        // General options        
        theme: "advanced",

        // Theme options
        theme_advanced_buttons1: "bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull",
        theme_advanced_buttons2: "bullist,numlist,separator,outdent,indent,separator,undo,redo,separator,link,unlink,anchor,image,cleanup,help,code",
        theme_advanced_buttons3: "hr,removeformat,separator,sub,sup,separator",
        theme_advanced_buttons4: "",

        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_resizing: true
   });
} 
```

我刚刚尝试过这种方式，加载彩盒后：

```
tinyMCE.execCommand('mceFocus', false, 'the_textareas_id_here');                    
tinyMCE.execCommand('mceRemoveControl', false, 'the_textareas_id_here'); 
```

但它也不起作用。我也尝试从这个站点'http://mktgdept.com/jquery-tinymce-plugin'导入tinymce插件，这也不起作用。

如何在彩盒中加载tinymce？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:50:04.730

我已经使用以下代码解决了我的问题：

```
function setup_tiny(textarea_name){      
    tinyMCE.init({
        mode : "exact",
        elements : textarea_name,                                

        // General options        
        theme: "advanced",

        // Theme options
        theme_advanced_buttons1: "bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull",
        theme_advanced_buttons2: "bullist,numlist,separator,outdent,indent,separator,undo,redo,separator,link,unlink,anchor,image,cleanup,help,code",
        theme_advanced_buttons3: "hr,removeformat,separator,sub,sup,separator",
        theme_advanced_buttons4: "",

        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_resizing: true
   });
}
$("#edit_item"+val.iditem).colorbox({
    href: $(this).attr('href'),                     
    data: data,
    onComplete: function(){                            
        setup_tiny("new_description");
    }                
}); 
```

通过这种方式，我调用了我的函数“setup_tiny”，其中 id textarea 作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:39:08.693

问题可能是您正在调用 `$("#edit_item"+val.iditem)`隐藏的 textarea 元素。Tinymce 不是文本区域！它是一个内容可编辑的 iframe。您可以尝试执行以下操作：

```
$(tinymce.get('description').getBody()).colorbox({
   href: $(this).attr('href'),                     
   data: data,
   onComplete: function(){ setup_tiny(); }  
}); 
```

# matlab - 通过 FFT 估计 PSD

> ID：13687678
> 
> 赞同：1
> 
> 时间：2012-12-03T16:36:41.613
> 
> 标签：matlab, fft, psd

我估计了 UWB 频带中高斯单脉冲的功率谱密度 (PSD)。我有两个代码，使用 fft。但是 y 轴存在问题，因为我不知道它的维度（我需要以 dBm/MHz 为单位的 PSD）。而且它在第一个代码中也应该是一个错误，因为它在 y 轴上只显示一个值。

```
Code1

fs=1e11;

g=0.1e-9;

tmax=1e-9;

fftl=2048;

t=(-tmax:1./fs:tmax)';

s=t./(g.^3.*sqrt(2.*pi)).*exp(-t.^2./(2.*g.^2))./2.5e19;

figure(1)

plot(t,s);

xlabel('Time, s');

ylabel('Amplitude, V');

ffts=abs(fft(s,fftl));

ffts=2.*ffts./fftl;

fftp=abs(ffts.*conj(ffts))./2;

fftps=(fftp-30)./1e-6;

f=0:fs./fftl:fs./2-fs./fftl;

figure(2)

plot(f,fftps(1:length(f))),grid;

xlabel('Frequency, Hz');

Code2

fs=1e11;

g=0.1e-9;

tmax=1e-9;

t=(-tmax:1./fs:tmax)';

s=t./(g.^3.*sqrt(2.*pi)).*exp(-t.^2./(2.*g.^2))./2.5e19;

figure(1)

plot(t,s);

xlabel('Time, s');

ylabel('Amplitude, V');

S=fft(s,8192);

f=fs.*(0:4095)./8192;

Pss=S.*conj(S)./8192;

figure(2)

plot(f,Pss(1:4096)); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:13:36.790

你的第二个情节应该给你一个带有单位的情节`V^2/Hz`。

dBm 单位是相对于 1 mW 的功率度量，因此您必须知道测量的阻抗。

因此，要达到 mW/Hz，您需要乘以`1e6/R`，其中 R 是您的阻抗。然后得到`10*log10`结果，你就有了 dBm/Hz。

# jquery - 使用微调器加载页面后淡入页面

> ID：13687680
> 
> 赞同：1
> 
> 时间：2012-12-03T16:36:43.617
> 
> 标签：jquery, html

我试图在加载后淡入整个页面，

我的代码：

```
<script type="text/javascript">
    $(window).bind("load", function() {
        $('#overlay').fadeOut(function() {
            $('html').fadeIn();
        });
    });
</script>

<html style="display:none">
....
<body>
.....
</body>
</html>
<div id="overlay">
     <img src="ajax-loader.gif" alt="Loading" />
     Loading...
</div> 
```

问题是加载图像不显示

我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T16:38:35.200

加载器位于 HTML 块中，该块具有 display:none。所以不会显示。（即使你把它放在外面）

相反，使用 display:none 创建一个容器 DIV，将其隐藏并淡入，而不是 HTML。

```
<html>
<head>

<script type="text/javascript">
    $(window).bind("load", function() {
        $('#overlay').fadeOut(function() {
            $('#container').fadeIn();
        });
    });
</script>
</head>
<body>

    <div id="overlay">
         <img src="ajax-loader.gif" alt="Loading" />
         Loading...
    </div>
    <div id="container" style="display:none">

    </div>

</body>
</html> 
```

# android - 最小化安卓游戏

> ID：13687688
> 
> 赞同：0
> 
> 时间：2012-12-03T16:37:05.123
> 
> 标签：android

我正在为 android 编写游戏，最近在最小化它时发现了一个问题。基本上游戏在最小化时不会停止并且仍在执行代码。

我重写了 onPause() 和 onResume()。

```
@Override
public void onPause()
{
    super.onPause();
    ((com.anderiel.atomic.defense.AtomicDefense)MyCustomView).Pause();
}

@Override
public void onResume()
{
    super.onResume();
     ((com.anderiel.atomic.defense.AtomicDefense)MyCustomView).Resume();
} 
```

将它们添加到暂停时应该停止游戏代码的代码中。如果我自己暂停游戏（要暂停菜单），它工作得很好。但是当我最小化它然后再次最大化它时，不会发生暂停。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-07T17:27:34.170

游戏是否从您关闭屏幕的位置继续？还是完全重启？
如果应用重新启动，请尝试将其添加到您的清单中：

```
android:configChanges= "orientation|screenSize" 
```

# javascript - 使用 JQuery Mobile 使可折叠集中的某些元素不可扩展

> ID：13687689
> 
> 赞同：1
> 
> 时间：2012-12-03T16:37:12.750
> 
> 标签：javascript, jquery-mobile, collapse

我正在使用 JQuery Mobile 通过嵌套可折叠项创建树。与任何树视图一样，父母可能有也可能没有孩子。在我目前的方法中，没有孩子的可折叠物品仍然是可折叠的，尽管可折叠的部分是空的，因为没有孩子。这会导致用户界面非常难看。我想要的是一种关闭扩展可折叠的行为的方法，但能够在有孩子的可折叠上打开它。

我已经尝试过不同的解决方案，比如[这里](https://stackoverflow.com/questions/9314446/need-help-to-make-non-collapsible-section-using-jquery-mobile)讨论的解决方案。它使用一段非常简单的代码来禁用折叠效果：

```
 $("#page").live('pageinit', function(event) {
      $(".ui-collapsible[data-allow-collapse=false]").unbind("expand collapse");
 }); 
```

但该解决方案具有相反的效果：他正在寻找一个不可折叠的部分，而我正在寻找一个不可扩展的部分。只需编辑回答者 jsFiddle 页面（可在[此处](http://jsfiddle.net/8dLw4/2/)找到）来反转效果，就会产生非常奇怪的效果。

我已经[更新了那个 jsFiddle](http://jsfiddle.net/8dLw4/19/)来告诉你会发生什么。您会注意到，一旦您单击可折叠列表（第 4 节）中的最后一个元素，它将自动折叠所有上述元素（第一个元素除外，因为该元素的属性*data-allow-collapse*设置为*false*。这对我来说似乎很奇怪，因为它在单击不同元素时会折叠所有元素。

有什么办法可以解决这种行为，还是我应该采取完全不同的方法？我基本上想要的只是一个像*data-allow-to-expand*这样的属性，如果将其设置为 false，则在单击该特定元素后不会发生任何事情。当设置为 true 时，它​​应该像往常一样扩展。

# objective-c - 使用 instantiateViewControllerWithIdentifier 时在 UIScene 之间传递数据

> ID：13687691
> 
> 赞同：1
> 
> 时间：2012-12-03T16:37:16.167
> 
> 标签：objective-c, ios, instantiation, uistoryboard

我正在使用真的很可爱`ECSlidingViewController`来为我的应用程序中的主视图创建一个侧边栏。一切正常，流畅，性感。我想在两个视图之间传递数据，但考虑到我使用这行代码实例化了第二个视图控制器，我有点不知所措：

```
self.slidingViewController.underRightViewController = [self.storyboard instantiateViewControllerWithIdentifier: @"Sidebar"]; 
```

如果我用 segue 或类似的方法完成它，这很好，但是如果我以这种方式创建它，我如何引用 my `SidebarViewController`(with identifier ) 的实例？`Sidebar`我需要获取该视图的属性，例如，诸如`self.sidebar.name`等。

似乎做起来很简单，但显然我错过了一些东西。

在此先感谢，溢出者！

编辑：我会指出我不能参考`[self.slidingViewController.underRightViewController setXYZProperty];`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:52:41.523

弄清楚了：

```
Sidebar *sidebar = [self.storyboard instantiateViewControllerWithIdentifier:@"Sidebar"];
self.slidingViewController.underRightViewController = sidebar; 
```

我知道这很容易..

# c# - 处理 Windows Mobile 6.5 的表单消息

> ID：13687695
> 
> 赞同：0
> 
> 时间：2012-12-03T16:37:24.263
> 
> 标签：c#, windows, forms, compact-framework, handler

我有一个 Windows 移动应用程序，当用户单击“X”而不是隐藏它时，我想完全关闭它。

我已将以下方法添加到我的表单中，但它有错误。代码是从其他地方复制的，如果我完全诚实，我不确定如何正确使用表单处理程序等，所以我想知道是否有人可以帮助我？

```
protected override void WndProc(ref Message m)
{
if (m.Msg == 0x0005)
{ 
    // WM_SIZE
    if (m.WParam == new IntPtr(0x04))
    { 
        // SIZE_MINIMIZED
        this.Close();
    }
}
base.WndProc(ref m);
} 
```

> 错误 1.“找不到类型或命名空间名称‘消息’（您是否缺少 using 指令或程序集引用？）”
> 
> 错误 2.“'System.Windows.Forms.Form' 不包含 'WndProc' 的定义”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:21:33.963

您不能在 Compact Framework 窗体或控件中覆盖 WndProc。您已从桌面项目复制代码。对于紧凑的框架，它有点复杂。在许多情况下，只需使用 a[`MessageWindow`](http://msdn.microsoft.com/en-us/library/aa446525.aspx)就足以看到传入的消息供您做出反应（[可以在此处找到](http://msdn.microsoft.com/en-us/magazine/cc188736.aspx)示例）。但是，如果您需要完全子类化，那就有点复杂了。这是[一个子类化控件的 MSDN 示例](http://blogs.msdn.com/b/netcfteam/archive/2005/05/23/421143.aspx)，尽管表单是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:49:43.517

在您的特定情况下，解决实际问题的最简单方法就是将 to 的`MinimizeBox`属性设置`Form`为`false`。这会将 X 按钮变成一个带有文本“Ok”的白色圆圈。点击该按钮将通过发布退出消息退出表单的运行循环，这通常会终止进程，除非您明确编写代码来执行其他操作。

# asp.net - VS 2012 解决方案资源管理器中的 asp.net 配置按钮在哪里

> ID：13687702
> 
> 赞同：4
> 
> 时间：2012-12-03T16:38:20.427
> 
> 标签：asp.net, visual-studio, visual-studio-2012

在 Visual Studio 2010 中，您可以在解决方案资源管理器中找到 asp.net 配置按钮：锤击地球。
Visual Studio 2012 中没有这样的按钮。
如何访问 asp.net 配置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:50:30.580

1.  只需单击您的项目或项目中的任何文件（**不要选择整个解决方案**）；

2.  单击“项目”菜单，最后一个菜单项是“ASP.NET 配置”。

# python - 以 JSON 格式返回 MongoEngine 文档

> ID：13687703
> 
> 赞同：9
> 
> 时间：2012-12-03T16:38:21.037
> 
> 标签：python, flask, mongoengine

不太确定这是否真的很简单，但我真的找不到任何关于这个话题的东西。但是，无论是使用常规的 MongoEngine 库，还是为我的基于 Flask 的网站使用 Flask-MongoEngine，都可以将 MongoEngine 文档作为直接 JSON 返回吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T20:43:30.720

在 0.8 中有帮助程序见[https://github.com/MongoEngine/mongoengine/issues/1](https://github.com/MongoEngine/mongoengine/issues/1)

同时你必须直接使用 pymongo 的 json_utils：

```
from bson import json_util
json_util.dumps(MyDoc._collection_obj.find(MyDoc.objects()._query)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-22T18:03:11.003

当使用场投影或排序时，Ross 和 Jellyflower 的解决方法不起作用。

更一般的解决方法：

```
from bson import json_util
json = json_util.dumps(query._cursor) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T06:43:38.470

正确的解决方法可能应该是：

```
from bson import json_util
objects = MyDoc.objects()
json_util.dumps(objects._collection_obj.find(objects._query)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-02T13:00:48.290

**更新**：感谢[Lo-Tan](https://stackoverflow.com/users/269876/lo-tan)的`to_mongo()`方法使用建议。

最终我想出了以下解决方案：

```
from json import JSONEncoder

from mongoengine.base import BaseDocument

class MongoEncoder(JSONEncoder):
    def default(self, o):
        if isinstance(o, BaseDocument):
            data = o.to_mongo()
            # might not be present if EmbeddedDocument
            o_id = data.pop('_id', None)
            if o_id:
                data['id'] = str(o_id['$oid'])
            data.pop('_cls', None)
            return data
        else:
            return JSONEncoder.default(self, o)

# consider `obj` to be MongoEngine object
json_data = json.dumps(obj, cls=MongoEncoder) 
```

它使用`to_json()`方法，作为对上述[问题](https://github.com/MongoEngine/mongoengine/issues/1)的回应而添加。

# java - Java 程序的运行方式与 shell 和 PHP 中的 exec() 不同

> ID：13687705
> 
> 赞同：0
> 
> 时间：2012-12-03T16:38:22.940
> 
> 标签：java, php, exec, shell-exec

我在 Web 服务器上运行 Java 程序并传递来自 PHP 变量的参数，我遇到了一些令人困惑的问题。当我从 shell 运行它并使用 PHP 从 shell_exec() 运行它时，我正在使用的 Java 程序似乎表现出不同的行为。

如果我使用像 Putty 这样的工具从命令行执行程序，如下所示：

```
ksh runexample.ksh ClassName methodName 
```

它运行正常，这意味着程序发送一个请求并在大约 20 秒后从它连接的网关服务器收到响应。然后，通过在外部数据库中查看结果记录，我可以看到通信成功。

现在，当我使用 PHP 脚本执行该程序时，问题就出现了。

```
shell_exec('path/ssh user@xxx.xx.xxxx.xx.x "cd /path/path/examples/ ksh runexample.ksh ClassName methodName;') 
```

如果我加载这个 PHP 脚本，并 var_dump() 输出，程序似乎加载了；但它给了我来自 Java 程序的简短通用消息，例如“程序在连接模式下运行等”，并且不输出通常的响应。PHP 脚本几乎立即使用此输出加载页面。此外，不会在外部数据库中创建记录。

我在脚本中有 set_time_limit(0)，但是这个问题可能是由于 shell_exec() 在 Java 程序中的请求/响应完成之前以某种方式超时吗？

感谢您提供任何见解/类似经验，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:44:53.040

这可能是因为`.profile`以您的方式运行应用程序时没有加载（或另一个）文件。

我做了一些与你似乎在这里做的事情非常相似的事情，最后在这里[发布了这个问题](https://stackoverflow.com/questions/10102952/proc-open-interaction)，作为这个问题的后续，[这两个问题](https://stackoverflow.com/questions/9843550/load-profile-with-proc-open)现在都可能对你有用。

# python - 使用python检查MySQLdb中是否已经存在电子邮件

> ID：13687707
> 
> 赞同：2
> 
> 时间：2012-12-03T16:38:24.620
> 
> 标签：python, mysql, mysql-python

我的目标是检查 mysql 数据库中是否已经存在电子邮件。我将信息从网络表单（字符串）中提取到变量中。我目前有以下代码：

```
import MySQLdb

db = MySQLdb.connect("localhost","username","password","databasename")
cursor = db.cursor()
if cursor.execute("select count(*) from registrants where email = " + "'"emailvar"'") == 0:
    print "it doesn't exist" 
```

当我尝试访问该页面时，出现内部服务器错误。我将错误缩小到“'”emailvar“'”，代码工作正常，但电子邮件有“@”和“。” 这会导致 SQL 语法错误。我试图使用“'”“'”打开和关闭括号来逃避它们，但它不起作用并使网页崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:42:12.503

你要：

```
query = 'select count(*) from registrants where email=%s'
cursor.execute(query, emailvar)
if next(cursor, None) is None:
    # whatever 
```

但是会看看`.fetchone()`哪个应该工作，以及`EXISTS`在 SQL 中（因此它应该有一个唯一的约束并让数据库解决它）并返回一个布尔式的空结果。

# android - Android 应用启动器图标大小问题

> ID：13687711
> 
> 赞同：1
> 
> 时间：2012-12-03T16:38:42.160
> 
> 标签：android, icons, launcher

xml 文件 drawable\icon.xml 中的应用清单启动器图标：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/icon_beta"/> 
```

xml 文件在构建时被修改为指向 icon_beta 或 icon_prod。

```
<application android:icon="@drawable/icon" 
```

icon_beta.png 和 icon_prod.png 都存在于所有分辨率中。但是，我们发现在 xhdpi 设备上使用 hdpi 图标而不是 xhdpi。如果我们直接引用图标而不用xml文件

```
<application android:icon="@drawable/icon_beta" 
```

然后使用正确的 xhdpi 图标。

为什么使用 xml drawable 会影响使用的分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-19T13:42:17.210

我发现，特别是对于 Nexus 7，在 drawable-tvdpi 中指定与 drawable-hdpi (72p) 相同尺寸的资源可以解决此问题。我不知道为什么:(。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:29:37.300

nexus 7 不是 xhdpi 设备，它的 PPI 为 216，并且在 hdpi 240 DPI 存储桶内。

看到这张图片（图 1 来自[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)）

![dpi 存储桶范围](../Images/bc25ca59f4fa1f396e36b4ec7d7c4dd4.png)

# .net - 如何通过复制输出目录中的特定文件夹来配置 Visual-Studio 来构建我的解决方案？

> ID：13687712
> 
> 赞同：0
> 
> 时间：2012-12-03T16:38:43.637
> 
> 标签：.net, visual-studio-2010, powershell, build

我想在 TFS 中创建一个文件夹，我将在其中放置所有 PowerShell 模块和管理单元。

为了通过将此“模块文件夹”复制到 bin 目录中来构建解决方案，我应该在 Visual Studio 中做什么？

例如，如果模块位于 C:\Source\PSModules\MyModules 文件夹中。

如果我在 VS 中创建了 2 个新的解决方案，即 SolutionFoo.sln 和 SolutionBar.sln。

如何从 SolutionFoo.sln 和 SolutionBar.sln 引用 C:\Source\PSModules\MyModules 文件夹并将其配置为将此文件夹复制到 Build 目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:46:10.183

您可以在特定项目上设置构建后事件，以将模块文件夹的内容从一个解决方案复制到另一个解决方案。

# css - jqplot 图例和 CSS 浮动的问题

> ID：13687718
> 
> 赞同：0
> 
> 时间：2012-12-03T16:39:03.330
> 
> 标签：css, css-float, jqplot

我在使用 jqplot 图表图例时遇到问题。我在它的顶部有一个图表和一个图例。图例是一个`table`，每个颜色和文本字段加起来都是`tr`。我将`float: left;`CSS 属性设置为`tr`元素，将`max-width`CSS 属性设置为`table`元素，因为我想要具有相同宽度的图例和图表。图例的位置是从 jqplot 选项自动设置的。在**IE9**中，它可以完美运行，正如您从这张图片中看到的那样：

[http://s13.postimage.org/61f0ks5uf/image.png](http://s13.postimage.org/61f0ks5uf/image.png)

但问题来自**Chrome**：

[http://s13.postimage.org/4jtk9813r/chrome.png](http://s13.postimage.org/4jtk9813r/chrome.png)

如您所见，图例在容器上方，但我想要像 IE 这样的图例维度。我能怎么做？谢谢和对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:39:20.147

用两行图例进行测试。

像这样的东西：

```
 legend: {
           show: true,
           location: 'n',
           placement: 'outside',
           rendererOptions: {
                  numberRows: 2                           
           }
         } 
```

# jquery - 通过爆米花解析的 json 上的 jquery 事件

> ID：13687719
> 
> 赞同：0
> 
> 时间：2012-12-03T16:39:03.860
> 
> 标签：jquery, json, popcornjs

有谁知道为什么 jquery 事件不适用于通过 Popcorn.js JSON Parser 解析的 json 数据？

单击链接时，我想调用一个函数。有问题的链接在 json 文件中。该文件似乎按预期进行了解析，并且爆米花脚注按预期显示。我可以关注已解析的链接，但没有触发任何事件。

这是我正在处理的一段代码：

```
<script>
$(function() {

     var popcorn = Popcorn("#video");
     popcorn.parseJSON ("data/data.json");

     $("a[href='gohere.html']").click(function() {
           alert("clicked!"); //should display the message, but doesn't         
     });
});
</script> 
```

JSON 文件如下所示：

```
{
 "data": [
    {
        "footnote": {
            "start":"1",
            "end":"3",
            "target":"footnote-container",
            "text":"<a href='gohere.html'>Go Here</a>"
        }
    },
    {
        "footnote": {
            "start":4,
            "end":7,
            "target":"footnote-container",
            "text":"Another piece of text."
        }
    }
  ]
} 
```

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:00:08.900

将委托与[.on()一起使用](http://api.jquery.com/on/)

```
 $('body')on('click','a[href="gohere.html"]',function() {
       alert("clicked!"); //should display the message, but doesn't         
 }); 
```

用最近的静态祖先替换`'body'`（不是必需的，但更有效），并且在 dom 准备好时存在。这会将事件处理程序绑定到该元素 - 当事件从给定的选择器中冒出来时，它会依次侦听该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:42:00.173

Try using jQuery [.on()](http://api.jquery.com/on/) inside a callback function from `parseJSON` or some other `ajax` derivative.

```
$("a[href='gohere.html']").on('click', function() {
       alert("clicked!");        
 }); 
```

# csv - Zend Framework 2 - 渲染 CSV 数据

> ID：13687720
> 
> 赞同：1
> 
> 时间：2012-12-03T16:39:13.513
> 
> 标签：csv, zend-framework2

我有一个模型，它返回带有 ID、名称、价格等的汽车数据。所以我有一个汽车控制器和一个从模型中获取这些数据的 csv 操作：

```
$carTable = $this->getServiceLocator()->get('Application\Model\DbTable\Cars');
$cars = $carTable->fetchAll(); 
```

我需要将此“$cars”数据下载为 CSV 文件，以便用户可以将其存储在磁盘上。

我试图禁用布局并回显 CSV 字符串并设置“内容类型”和其他标题，但它没有开箱即用。然后我发现我可能应该创建一个自定义 CsvRenderer 并在配置中注册它。

由于我在 ZF2 网站或博客和 Stackoverflow 答案中找不到任何关于此的文档，我想知道这是否是在 ZF2 中将数据下载为 CSV 的推荐通用方法？还是有一个我不知道的更简单的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T20:10:55.067

一种解决方案是直接从控制器返回一个响应对象。

这样的事情很有可能奏效：

```
public function downloadAction()
{
    // magically create $content as a string containing CSV data

    $response = $this->getResponse();
    $headers = $response->getHeaders();
    $headers->addHeaderLine('Content-Type', 'text/csv');
    $headers->addHeaderLine('Content-Disposition', "attachment; filename=\"my_filen.csv\"");
    $headers->addHeaderLine('Accept-Ranges', 'bytes');
    $headers->addHeaderLine('Content-Length', strlen($content));

    $response->setContent($content);
    return $response;
} 
```

（请注意，我尚未测试此代码，但已根据评论进行了更新！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T16:42:38.937

既然我们在谈论 ZF2，我宁愿通过添加一个新的 CSV ViewStrategy/Renderer/ViewModel 来解决这个问题。

在这里你可以阅读更多关于实现自己的渲染和响应策略：[Zend Docs](http://framework.zend.com/manual/2.2/en/modules/zend.view.quick-start.html#creating-and-registering-alternate-rendering-and-response-strategies)

甚至在这里：http: [//zend-framework-community.634137.n4.nabble.com/ZF2-Implementing-custom-renderer-strategy-td4655896.html](http://zend-framework-community.634137.n4.nabble.com/ZF2-Implementing-custom-renderer-strategy-td4655896.html)

这将使控制器中的代码更苗条、更清晰、更清晰，因为您不必关心控制器中的标头，而是在渲染器中。然后，每次您需要一个新的 CSV 输出时，您不必重新编写该操作，您只需使用 CSV 视图模型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T21:56:24.263

这是基于 Rob 提供的答案。

在 Rob 的回答中，通过分配`$response->getHeaders()`给一个新`$headers`变量，然后将 应用于`->addHeaderLine`该新变量，它没有正确设置`$response`. 因此，当返回时，标头未附加到响应中。

要解决此问题，只需将标题直接添加到`$response`如下所示：

```
public function downloadAction()
{
    // magically create $content as a string containing CSV data

    $response = $this->getResponse();
    $response->getHeaders()
             ->addHeaderLine('Content-Type', 'text/csv')
             ->addHeaderLine('Content-Disposition', "attachment; filename=\"my_filen.csv\"")
             ->addHeaderLine('Accept-Ranges', 'bytes')
             ->addHeaderLine('Content-Length', strlen($content));

    $response->setContent($content);
    return $response;
} 
```

# ruby - 无法破译此包含地图运算符的 Ruby 行

> ID：13687721
> 
> 赞同：2
> 
> 时间：2012-12-03T16:39:20.127
> 
> 标签：ruby, reflection, class-eval

我刚刚在[ruby​​-trello](https://github.com/jeremytregunna/ruby-trello/blob/master/lib/trello/action.rb)中看到了这行 Ruby 代码：

```
# Returns the member who created the action.
one :member_creator, :via => Member, :using => :member_creator_id 
```

它似乎与定义为的[超类](https://github.com/jeremytregunna/ruby-trello/blob/master/lib/trello/basic_data.rb)方法有关：

```
def self.one(name, opts = {})
  class_eval do
    define_method(:"#{name}") do |*args|
      options = opts.dup
      klass   = options.delete(:via) || Trello.const_get(name.to_s.camelize)
      ident   = options.delete(:using) || :id
      klass.find(self.send(ident))
    end
  end
end 
```

我知道[class_eval](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-class_eval)与反射有关。

有人可以解释子类代码行的目的吗？

我的猜测是它调用类成员作为名称`one`传递`:member_creator`，两个尾随参数作为`opts`参数。但是为什么要在类级别调用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:46:50.327

这似乎是一种干燥一些用于通过主键查找单个记录的代码的方法。

您基本上传递了一个类/模型名称和一个用于获取主键的方法。

这段代码：

```
one :member_creator, :via => Member, :using => :member_creator_id 
```

创建此方法：

```
def member_creator 
  Member.find(self.member_creator_id)
end 
```

# javascript - 使用 jQuery 选择和取消选择一组复选框

> ID：13687722
> 
> 赞同：3
> 
> 时间：2012-12-03T16:39:20.673
> 
> 标签：javascript, jquery, checkbox

让我们从头开始，但请不要惊慌……是 Jquery 问题 ;-)

我编写了一个 PHP 代码：用户向我们的数据库发送查询，表单显示结果集，按表格分组，并带有用于选择数据的复选框。

我想知道如何使用选择/取消选择复选框启用 Jquery 代码以选择/取消选择每个表的数据，我的意思是每组结果。

例如，像这个例子[http://www.wiseguysonly.com/2010/01/15/select-and-unselect-all-checkboxes-with-jquery/](http://www.wiseguysonly.com/2010/01/15/select-and-unselect-all-checkboxes-with-jquery/)

1：所有的checkbox都有一个“checkbox”类：input type=”checkbox” class=”checkbox”</p>

```
function toggleChecked(status) {
    $(".checkbox").each( function() {
        $(this).attr("checked",status);
    });
} 
```

你能告诉我修改 toggleChecked 函数的最佳方法是什么吗？

调用toggleChecked的第二个参数，用第二个参数值替换“.checkbox”？（我无法找到正确的语法来做到这一点）。

或者有不同的方法来做到这一点？

而且，顺便说一句，最好使用 prop 而不是 attr？此致。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:43:20.790

只需向函数添加第二个参数，然后使用它。

```
function toggleChecked(status,selector) {
    $(selector).each(......);
} 
```

如果你真的在为这么简单的事情苦苦挣扎，那么你真的不应该使用 jQuery。您应该首先了解纯 JavaScript。否则就像带着世界上最好的工具去建筑工地，甚至可能知道如何完美地使用这些工具……但是不知道基本的建筑是如何运作的，你可能会建造一座没有地基的漂亮建筑一天之内就会崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:44:36.767

[**例子**](http://jsfiddle.net/FcsvJ/3/)

[**jQuery.is**](http://api.jquery.com/is/)在这种情况下真的很有帮助，或者 prop("checked") 将返回一个布尔值（所以无论哪种方式）：

```
var boxes = $(".checkbox");
boxes.prop("checked", !boxes.prop("checked")); 
```

是的，[**jQuery.prop**](http://api.jquery.com/prop/)更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T17:03:18.677

好吧，我知道你已经得到了答案，但是......这是我的版本：

```
$.fn.changeCheckboxesState = function(state){
        if (state === undefined)
            state = true;

        $(this).filter(':checkbox').each(function() {
            $(this).prop('checked', state);
        });

        return this;
    };
$.fn.toggleCheckboxes = function() {

        $(this).filter(':checkbox').each(function() {
            var $this = $(this);

            $this.prop('checked', !$this.prop('checked'))
        });

        return this;
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T08:23:07.593

```
<script>
$(document).ready(function() {
    $('#selecctall').click(function(event) {  
        if(this.checked) { 
            $('.checkbox1').each(function() { 
                this.checked = true;           
            });
        }else{
            $('.checkbox1').each(function() { 
                this.checked = false;                   
            });        
        }
    });

});
</script>

In Cakephp code--

<?php   echo $this->Form->input('selecctall',array('id'=>'selecctall','type'=>'checkbox')); ?>

<?php   echo $this->Form->input('massaction',array('class'=>'checkbox1','label'=>'','type'=>'checkbox')); ?> 
```

# java - 从对象的 ArrayList 收集信息时的性能注意事项

> ID：13687724
> 
> 赞同：0
> 
> 时间：2012-12-03T16:39:25.633
> 
> 标签：java, file-io, arraylist

我正在编写一个从文本文件中收集信息的小程序，其中每一行的信息由`|`. 我编写了一个文件阅读器类，它创建一个对象，其数据成员对应于每一行的信息，然后将该对象放入一个 ArrayList 中。

现在我想使用 ArrayList 中的对象进行数据分析，比如说，我想找到特定属性的平均值。是否最好使用循环遍历 ArrayList 中的每个元素并将属性值添加到变量中，然后使用 获取平均值`[totalValue variable] / [ArrayList size]`？

我这里的文件有超过 60,000 行。而且我不只是想做平均。是否存在性能问题？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:41:42.863

计算平均值必然需要查看每个元素。因此，使用循环没有任何问题。

还要记住，对于这种类型的计算，60K 元素不算什么。

# ios - 什么可能导致 iOS 应用程序意外退出？

> ID：13687726
> 
> 赞同：1
> 
> 时间：2012-12-03T16:39:31.907
> 
> 标签：ios, memory-management, crash

我正在开发一个 iOS 应用程序并测试它的稳定性。当我使用 XCode Analyze 检查它时，没有内存泄漏问题。我在我的 iPhone 5 和 iPad 2 上进行了模拟，并尝试`UIScrollView`尽可能快地单击按钮并连续翻转。

调试日志确实多次显示“收​​到内存警告”消息，但仍然没有关于内存泄漏的消息。我一直在做疯狂的测试，应用程序意外退出。当我双击“主页”按钮时，我仍然可以找到在后台运行的应用程序。我点击返回应用程序后，它仍然可以正常运行。

因此，在这里我想知道哪些可能的原因会导致应用程序意外退出。我如何使用任何工具或策略来追踪应用程序退出的原因？

PS：我是一个新的iOS开发人员，我对这个问题真的没有任何想法。我需要一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:45:20.337

泄漏内存之间存在差异 - 这是您分配的内存，您无法归还给系统，因为您丢失了指向内存的指针并且您无法释放它。然后内存使用不佳 - 这是您分配内存的地方。它不是“泄露”的，因为您可以将其归还，但您不会将其归还。

考虑创建 100 个图像的示例。

如果您创建 100 个图像视图，即使它们并非全部可见，但您保留对图像视图的引用，那么您没有泄漏，但您没有正确管理内存。

静态分析器可帮助您发现泄漏 - 它不会告诉您内存使用不当的地方。

尝试使用分配工具在 Instruments 下运行您的应用程序，以查看所有内存的创建和使用位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T07:14:16.597

很多原因会导致iOS应用突然退出。例如，您更新了您的 iPhone 固件，但该应用程序仍然是旧版本，那么它们将不兼容。或者您同时打开了太多应用程序，而这些应用程序彼此分心。另一个常见的情况是你的 iPhone 越狱，并在你的 iPhone 上安装了未经授权的应用程序。在此处查看更多信息：http: [//iphone-6-data-recovery.blogspot.tw/2014/09/troubleshooting-iphone-app-quit-suddenly.html](http://iphone-6-data-recovery.blogspot.tw/2014/09/troubleshooting-iphone-app-quit-suddenly.html)

# apache - mod_proxy_html 配置 - 截断问题

> ID：13687734
> 
> 赞同：1
> 
> 时间：2012-12-03T16:39:47.947
> 
> 标签：apache, proxy, redhat, mod-proxy, mod-proxy-html

我已经尽可能多地环顾四周，我已经到了完全被难住的地步。

我正在运行一个顶部有 Apache 的 RedHat 服务器，我用它作为代理，位于外部世界和其他两个应用程序服务器之间，具有完全不同的基础（一个 IIS，一个 Linux）。

这两个服务器都有正确的内部网络 URL，驻留在它们上的应用程序可以理解。应用程序（DotNetNuke 和 WordPress 派生）都生成 HTML 5 页面，其中包含正确/适当的标记，并在代理之外正确呈现（即在内部网络上）。

然而，当通过代理传递这些页面时，结果似乎是缺少 CSS 和 JavaScript 文件末尾的字符。

因此（在实践中），JavaScript 代码如下：

```
... {return f})})(window); 
```

或这样的 CSS：

```
...
background-position:center left;
background-repeat:no-repeat;
} 
```

...变成这样的代码：

```
... {return f})})(window 
```

或像这样：

```
...
background-position:center left;
background-repeat:no-re 
```

代理设置使用 mod_proxy 和 mod_proxy_html Apache 模块 - 我相当确定我遇到的问题与 mod_proxy_html 的配置有关，目前看起来像这样：

```
ProxyHTMLEnable On
ProxyHTMLBufSize  102400
ProxyHTMLExtended On
ProxyHTMLStripComments Off
ProxyHTMLDocType "<!DOCTYPE html>"
ProxyHTMLMeta Off
#ProxyHTMLLogVerbose On
#LogLevel Debug

<Location /xxxxx>
        ProxyPass               http://www.example.com
        ProxyPassReverse        http://www.example.com
        ProxyHTMLURLMap         http://www.example.com /xxxxx
        ProxyHTMLURLMap         / /xxxxx/
</Location>

<Location />
        ProxyPass               http://10.11.0.51/
        ProxyPassReverse        http://10.11.0.51/
</Location> 
```

在这里浏览 Apache 文档：[http](http://httpd.apache.org/docs/2.4/en/mod/mod_proxy_html.html) ://httpd.apache.org/docs/2.4/en/mod/mod_proxy_html.html - 但是没有给出任何直接的线索。

有没有人遇到过同样的问题？或者我错过了什么快速的东西？

任何帮助将不胜感激！

**更新：**

最终，问题似乎是 mod_proxy_html 在将所有内容解析为 UTF-8 编码时的默认行为（当某些内容不是时 - 尽管尽了最大努力，但无法修改）。

为此，经过一番努力，改用了 mod_substitute（只是将文本解析为文本，忽略文件编码）以及缓存解决方案以加快加载时间。

耻辱 mod_proxy_html 不适用于这个项目 - 但最终找到了一种方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:22:32.910

调整

```
ProxyHTMLDocType "<!DOCTYPE html>" 
```

到

```
ProxyHTMLDocType "<!DOCTYPE html>" XML 
```

意识到

```
ProxyHTMLStripComments Off 
```

这不适用于所有评论。还没有想出解决这个问题的办法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T17:11:19.587

该问题与 mod_proxy_html 中的错误有关（s. [http://apache-http-server.18135.x6.nabble.com/PATCH-mod-xml2enc-eats-end-of-file-td5001104.html](http://apache-http-server.18135.x6.nabble.com/PATCH-mod-xml2enc-eats-end-of-file-td5001104.html)）

我能够验证所描述的行为（请参阅 apache 的带有 loglevel *debug*的错误日志）并且该补丁对我有用 - 尽管它的方法不是一个完美的解决方案。

版本：mod_xml2enc (1.0.4) libxml2 (2.7.6-0.9.1)

# c# - OpenRasta 单元测试 GET 导致 404 错误

> ID：13687738
> 
> 赞同：0
> 
> 时间：2012-12-03T16:40:27.743
> 
> 标签：c#, json, unit-testing, get, openrasta

我已经完成了我的第一个 OpenRasta RESTful Web 服务的实现，并成功获得了我希望工作的 GET 请求。

因此，我从 Daniel Irvine 的帖子[http://danielirvine.com/blog/2011/06/08/testing-restful-services-with-openrasta/](http://danielirvine.com/blog/2011/06/08/testing-restful-services-with-openrasta/)中获得了一些“灵感”，以构建一个自动化测试项目来测试实施。

我创建了自己的测试类，但我不断收到 404 错误作为响应状态代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenRasta.Hosting.InMemory;
using PoppyService;
using OpenRasta.Web;
using System.IO;
using System.Runtime.Serialization.Json;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using NUnit.Framework;

namespace PoppyServiceTests
{
//http://danielirvine.com/blog/2011/06/08/testing-restful-services-with-openrasta/
[TestFixture]
class OpenRastaJSONTestMehods
{
    [TestCase("http://localhost/PoppyService/users")]
    public static void GET(string uri)
    {
        const string PoppyLocalHost = "http://localhost/PoppyService/";
        if (uri.Contains(PoppyLocalHost))
            GET(new Uri(uri));
        else
            throw new UriFormatException(string.Format("The uri doesn't contain {0}", PoppyLocalHost));
    }
    [Test]
    public static void GET(Uri serviceuri)
    {
        using (var host = new InMemoryHost(new Configuration()))
        {
            var request = new InMemoryRequest()
            {
                Uri = serviceuri,
                HttpMethod = "GET"
            };

            // set up your code formats - I'm using  
            // JSON because it's awesome  
            request.Entity.ContentType = MediaType.Json;
            request.Entity.Headers["Accept"] = "application/json";

            // send the request and save the resulting response  
            var response = host.ProcessRequest(request);
            int statusCode = response.StatusCode;

            NUnit.Framework.Assert.AreEqual(200, statusCode, string.Format("Http StatusCode Error: {0}", statusCode));

            // deserialize the content from the response  
            object returnedObject;
            if (response.Entity.ContentLength > 0)
            {
                // you must rewind the stream, as OpenRasta    
                // won't do this for you    
                response.Entity.Stream.Seek(0, SeekOrigin.Begin);
                var serializer = new DataContractJsonSerializer(typeof(object));
                returnedObject = serializer.ReadObject(response.Entity.Stream);
            }
        }
    }
} 
```

}

如果我在浏览器中手动导航到 Uri，我会得到正确的响应和 HTTP 200。

这可能与我的配置类有关，但如果我再次手动测试所有 Uris，我会得到正确的结果。

```
public class Configuration : IConfigurationSource
{
    public void Configure()
    {
        using (OpenRastaConfiguration.Manual)
        {                
            ResourceSpace.Has.ResourcesOfType<TestPageResource>()
                .AtUri("/testpage").HandledBy<TestPageHandler>().RenderedByAspx("~/Views/DummyView.aspx");

            ResourceSpace.Has.ResourcesOfType<IList<AppUser>>()
                .AtUri("/users").And
                .AtUri("/user/{appuserid}").HandledBy<UserHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<AuthenticationResult>()
                .AtUri("/user").HandledBy<UserHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<IList<Client>>()
                .AtUri("/clients").And
                .AtUri("/client/{clientid}").HandledBy<ClientsHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<IList<Agency>>()
                .AtUri("/agencies").And
                .AtUri("/agency/{agencyid}").HandledBy<AgencyHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<IList<ClientApps>>()
                .AtUri("/clientapps/{appid}").HandledBy<ClientAppsHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<Client>()
                .AtUri("/agencyclients").And
                .AtUri("/agencyclients/{agencyid}").HandledBy<AgencyClientsHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<Client>()
                .AtUri("/agencyplususerclients/{appuserid}").HandledBy<AgencyPlusUserClientsHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<IList<Permission>>()
                .AtUri("/permissions/{appuserid}/{appid}").HandledBy<PermissionsHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<IList<Role>>()
                .AtUri("/roles").And
                .AtUri("/roles/{appuserid}").And.AtUri("/roles/{appuserid}/{appid}").HandledBy<RolesHandler>().AsJsonDataContract();

            ResourceSpace.Has.ResourcesOfType<IList<AppVersion>>()
                .AtUri("/userappversion").And
                .AtUri("/userappversion/{appuserid}").HandledBy<UserAppVersionHandler>().AsJsonDataContract();
        }
    }
} 
```

任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:09:08.720

我在 Nate Taylor ( [http://taylonr.com/integration-testing-openrasta](http://taylonr.com/integration-testing-openrasta) ) 的帮助下解决了这个问题，他为 POST 实施了类似的测试方法。我在 Uri 中包含了解决方案名称“PoppyService”，这是托管在 IIS 上的项目的 Uri。我错误地认为配置也会为 InMemoryHost 创建这个 Uri，但它直接路由到 localhost。删除它使 Assert 测试成功。

```
[TestCase("http://localhost/users")]
    public static void GET(string uri)
    {
        const string LocalHost = "http://localhost/";
        if (uri.Contains(LocalHost))
            GET(new Uri(uri));
        else
            throw new UriFormatException(string.Format("The uri doesn't contain {0}", LocalHost));
    } 
```

该帖子也是一个不错的发现，因为我也需要为 POST 实现一个测试方法。希望这对其他人也有帮助，因为 Daniel 没有具体解释他所说的 MyResource 是什么意思。现在对我来说很明显。

# export - 在 Eclipse 中从 JAXWS 导出到 WAR 时出错

> ID：13687740
> 
> 赞同：2
> 
> 时间：2012-12-03T16:40:33.533
> 
> 标签：export, jax-ws, war

尝试在 Eclipse 中将 JAXWS 导出为 WAR 时出现以下错误：

```
org.eclipse.core.commands.ExecutionException: Error exportingC:/Users/rmescalera/Desktop/WS-upshift.war
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.execute(ComponentExportOperation.java:150)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:385)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:410)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:360)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:247)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:219)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:207)
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1CatchThrowableRunnableWithProgress.run(DataModelWizard.java:220)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: java.lang.NullPointerException
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.getModuleParticipants(JavaEEComponentExportOperation.java:75)
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.getParticipants(JavaEEComponentExportOperation.java:43)
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.createFlatComponentArchiver(JavaEEComponentExportOperation.java:91)
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.export(ComponentExportOperation.java:191)
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.execute(ComponentExportOperation.java:136)
    ... 10 more 
```

问题是我在 WEB-INF/lib 目录中使用完全相同的 jar 以完全相同的方式创建了另一个 JAXWS，没有任何问题。

知道发生了什么吗？

# java - 从录音中检测音符

> ID：13687743
> 
> 赞同：4
> 
> 时间：2012-12-03T16:40:52.030
> 
> 标签：java, pitch

我正在为我的计算机科学论文做一个项目。它旨在实现一个应用程序，该应用程序允许用户在个人电脑或智能手机的麦克风中唱歌或吹口哨，并识别已唱出哪些音符。

我需要首先研究作为此类程序基础的理论，然后在 matlab、java 或 c 中实现它。

我已经在 Stackoverflow 上找到了很多信息，但我有点困惑（关于 FFT、音高等）。如果有人能告诉我我应该学习什么以及实施的步骤是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:16:45.680

如果你试图从头开始做这一切，我认为这对于一个人来说是不可行的。但是，如果您将现有的部分整合在一起，这可能是可行的。

我会先寻找一些开源库并按原样尝试它们。这可能会对您可以做的事情施加一些限制。不过没关系，因为整个东西都很大。不知何故，首先集成一个快速而肮脏的解决方案可能是有意义的。例如，通过获取录制的声音文件并使用库来识别那里的声音。然后添加与其他东西的集成，精美的输出，录音等。

我的意思是这样的： [https ://dsp.stackexchange.com/a/2462](https://dsp.stackexchange.com/a/2462)

周围可能有也可能没有太多开放的东西，因为对此类事物的商业兴趣似乎很高。

# php - 控制器/执行器通过 URL 执行数据库操作，循环永无止境

> ID：13687748
> 
> 赞同：0
> 
> 时间：2012-12-03T16:41:03.593
> 
> 标签：php, arrays, url, content-management-system, infinite-loop

我正在为我正在构建的网站编写一个简单的 AJAX/jquery CMS。为了简化一切，我只想向 URL 发出请求以执行操作（很像 Magento 所拥有的 - 但我有理由不使用 Magento/其他现有选项）

问题是 while 循环没有结束（在编写 PHP 文档时我所在的位置超时了，所以我无法访问它们）。

```
<?php
$query = explode('/',parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH));
$qs = array();
foreach ($query as $key=>$value) $qs[$key] = urldecode(htmlspecialchars($value));

# /action/{$class-name}/{$action}/{$field1}/{$param1}/{$field2}/{$param2}/.../{$fieldN}/{$paramN}
# e.g.
# /action/QuickOverview/get/internal_name/value
# /action/QuickOverview/update/internal_name/value1/title/value2/

$params = array();
array_shift($qs);
switch ($val = array_shift($qs)) {
    case "action":
        $className = array_shift($qs);
        $action = array_shift($qs);
        $field = true;
        while ($val=array_shift($qs)!==false) {
            if ($field) $params[-1] = $val;
            else $params[$params[-1]] = $val;
            $field = !$field;
        }
        unset($params[-1]);
        break;
    default:
        var_dump("Unknown value: ".$val);
        break;
}

var_dump($params);
?> 
```

页面超时（可能永远循环），我怎样才能正确结束这个while循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:45:49.090

`=`是一个赋值运算符，不应该用于条件检查，这种情况在`while`循环中。

尝试：

```
switch ($val = array_shift($qs)) {
case "action":
    $className = array_shift($qs);
    $action = array_shift($qs);
    $field = true;
    while ($val == array_shift($qs)) {
        if ($field) $params[-1] = $val;
        else $params[$params[-1]] = $val;
        $field = !$field;
    }
    unset($params[-1]);
    break;
default:
    var_dump("Unknown value: ".$val);
    break;
} 
```

# post - 如何获取浏览器的 POST 请求字符串？

> ID：13687749
> 
> 赞同：2
> 
> 时间：2012-12-03T16:41:03.107
> 
> 标签：post, browser, httprequest

如何获取浏览器的 POST 请求字符串？

是否有任何浏览器扩展程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:43:10.867

# asp.net-mvc - interface for validation viewmodel

> ID：13687750
> 
> 赞同：0
> 
> 时间：2012-12-03T16:41:05.540
> 
> 标签：asp.net-mvc

I would like to know if is there any interface like IValidatableObject but for test the inputs for ModelState, something like that:

```
public class EditUserViewModel: IAnyInterface
{
     public string Name{get;set;}
     public string Age{get;set;}

     public IEnumerable<ModelStateError> Validate()
     {
          if(//something)
               yield new ModelStateError("error");
     }
} 
```

ps: I don't want to use data annotation!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:00:32.053

是的，您可以这样做，但是您需要为您创建一个包装器`ModelState`来检查每个属性是否有效并转换为发送到视图。

您可以使用一个名为`Fluent Validation`. 它是免费的，易于与 asp.net mvc 和可扩展库集成以验证您的 ViewModel。看一看：

Fluent 验证页面 [http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

Fluent 验证源（如果需要） [https://github.com/JeremySkinner/FluentValidation](https://github.com/JeremySkinner/FluentValidation)

ASP.NET MVC 集成： [http://fluentvalidation.codeplex.com/wikipage?title=mvc &referringTitle=Documentation](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)

这样做，当您调用您的发布操作`ModelState.IsValid`时，它将使用您为 ViewModel 设置的流畅验证类进行验证。

您还可以与 Unity、Ninject、StructureMap 等控制反转集成，以在持久化存储库之前检查存储库中的一些信息。

# xcode4.5 - Code Sign error in xcode

> ID：13687752
> 
> 赞同：3
> 
> 时间：2012-12-03T16:41:08.540
> 
> 标签：xcode4.5

When I try to test an app in the most current version of Xcode I get this issue "Code Sign error: The identity 'iPhone Developer' doesn't match any valid, non-expired certificate/private key pair in your keychains". what i'm wanting to know is it because i'm using the free version of apple developer?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:44:40.367

您可以使用免费版本的 Xcode 开发 iOS 应用程序，并在模拟器中运行它们。

要在实际设备/手机上运行它们，甚至是您自己的，您需要支付 99 美元/年的费用才能获得开发者证书。

也许我应该提到通过越狱你想要测试的手机有一些解决方法，但对于这些信息，我会参考谷歌:)

# php - Yii，SQL Server 查询错误

> ID：13687762
> 
> 赞同：3
> 
> 时间：2012-12-03T16:41:48.690
> 
> 标签：php, sql-server, yii

使用 pdo_sqlsrv 驱动程序 (PHP 5.4) 使用 SQL Server

在我的数据库中，我有`varbinary`类型和大小为 7584 的列。

当我尝试从该列中获取值时，出现此错误

```
Invalid sql_display_size in G:\..\..\..\framework\yiilite.php on line 8836 
```

这是查询：

```
DECLARE @item varbinary(1728); SET @item = (SELECT Inventory FROM Character WHERE Name='CharName'); print @item; 
```

在这种情况下，我得到的正是我需要的尺寸。它适用于普通的 php 查询（不是 PDO）和 SQL Server Management Studio。

当我在 Yii 中运行这段代码时：

```
$query = "DECLARE @item varbinary(1728); SET @item = (SELECT Inventory FROM Character WHERE Name='CharName'); print @item";
$command=Yii::app()->db->createCommand($query)->query();
$command->read(); 
```

我明白了：

> SQLSTATE[IMSSP]：查询的活动结果不包含任何字段。

我认为我建立了一个错误的查询。

我的问题是，如何在 Yii 中运行这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:33:48.650

我解决了这个问题。PDO_SQLSRV 驱动程序与 Windows 上的 MS SQL Server 完美配合。

问题是我试图执行错误的查询：

```
$query = "DECLARE @item varbinary(1728); SET @item = (SELECT Inventory FROM Character WHERE Name='CharName'); print @item";
$command=Yii::app()->db->createCommand($query)->query(); 
```

工作查询：

```
$query = "DECLARE @items varbinary(max);SET @items = (SELECT Inventory FROM Character WHERE Name='$id');Select @items";
            $getI = Yii::app()->db->createCommand($query)->queryScalar(); 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:54:50.533

[Yii 论坛](http://www.yiiframework.com/forum/index.php/topic/38197-big-varbinary-column-mssql/page__view__findpost__p__184668)已经回答了您的问题：

编辑：在谷歌上的快速搜索为您提供大量有效答案：最有效的答案是 mssql PDO 驱动程序充满了错误，您可以使用工作较少错误的 ODBC 驱动程序。

# python - Django 从数据库生成模型

> ID：13687764
> 
> 赞同：2
> 
> 时间：2012-12-03T16:41:49.283
> 
> 标签：python, django, python-2.7

我已经有一个预先存在的数据库，但现在想使用 Django。有没有办法从我的数据库中自动生成 Django 需要的模型？例如，如果我已经有一个包含从另一个应用程序定义的表的数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:46:21.523

您应该查看[Django 文档](https://docs.djangoproject.com/en/dev/ref/django-admin/#inspectdb)`inspectdb`中的命令。这是一个执行此操作的管理命令，虽然它并不总是有效，但这将是一个很好的起点。

# sql - ora-06553 pls-306 调用“ogc_x”时参数的数量或类型错误

> ID：13687766
> 
> 赞同：6
> 
> 时间：2012-12-03T16:41:58.143
> 
> 标签：sql, oracle, oracle10g

我正在尝试在 oracle 10g 中进行查询。它是这样的：

```
SELECT
  *
FROM
  h2h_reg reg,
  h2h_cat_estatus est
WHERE
  reg.FECH_APLICACION = SYSDATE
AND REG.ID_EST        = EST.ID_ESTATUS
AND est.tipo_estatus  = "X"; 
```

所以它运行顺利，但是当我尝试通过以下方式添加组时：

```
SELECT
  reg.id_arch,
  reg.id_prod
FROM
  h2h_reg reg,
  h2h_cat_estatus est
WHERE
  reg.FECH_APLICACION = SYSDATE
AND reg.id_est        = est.id_estatus
AND EST.TIPO_ESTATUS  = "X"
GROUP BY
  reg.id_arch,
  reg.id_prod; 
```

我收到下一条消息：

> ora-06553 pls-306 调用“ogc_x”时参数的数量或类型错误

有谁知道我的查询出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T16:50:13.820

您在 . 上使用了双引号`"X"`。

这应该是`'X'`。

X 对象是 MDSYS 模式中的一个函数，“ogc_x”，所以当你说`est.tipo_estatus = "X"`而不是正确`est.tipo_estatus = 'X'`时，它会被翻译（因为“”是一个标识符，所以“X”与只是键入 X 相同）`est.tipo_estatus = mdsys.ogc_x`当然失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:43:48.633

尝试`DISTINCT`：

```
SELECT DISTINCT reg.id_arch, reg.id_prod
  FROM h2h_reg reg, h2h_cat_estatus est
 WHERE reg.FECH_APLICACION = SYSDATE
   AND reg.id_est = est.id_estatus
   AND est.tipo_estatus = 'X' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-15T06:34:11.950

我发现这个错误的产生是因为我使用了Oracle保留字来命名我的一些列，例如日期、时间、评论等。一旦我重命名了这些列，问题就消失了。

# c++ - 如何在 C++ 控制台应用程序中获取密码输入

> ID：13687769
> 
> 赞同：1
> 
> 时间：2012-12-03T16:42:06.210
> 
> 标签：c++, windows, console, passwords

获取屏蔽密码输入的技术如下：

![在此处输入图像描述](../Images/cf85a14a4d17ebc89ee95ce0252ec71f.png)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-03T16:42:06.210

```
#include <iostream>
#include<windows.h> // for system("pause")
#include<conio.h>  //for getch()

using namespace std;

int main()
{
    char x[10];

    cout<<"enter a password\n";

    for(int i=0; i<10;i++){
        x[i]=getch();
        cout<<"*";

        if(x[i]=='\r') //check if enter key is pressed
            break;

        else if(x[i]=='\b'){

            if(i==0)
                cout<<"\b"<<" "<<"\b";
            else if(i>=1){
                x[i-1]='\0';//make the previous byte null if backspase is pressed
                i=i-2;
                cout<<"\b"<<" "<<"\b\b"<<" "<<"\b";
            }

         }
    }

    cout<<endl<<"the password is  :"<<x<<endl;
    system("pause");
 } 
```

# entity-framework - Entity SQL - Strangeness

> ID：13687773
> 
> 赞同：1
> 
> 时间：2012-12-03T16:42:12.560
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

I'm getting data out of my object context using .CreateQuery(sqlStatement, parameterValues). Please note that this the Entity SQL that I am using as a string constant being passed into the CreateQuery method, not a compiled LINQ query in my source code.

This works perfectly. However there are some duplicate records...

```
ctx.CreateQuery<DbDataRecord>(@"SELECT  record.home_city, record.home_stabb 
FROM Employees AS record  
ORDER BY record.home_city SKIP 0 LIMIT 15",prms); 
```

So I thought this would remove the duplicates:

```
ctx.CreateQuery<DbDataRecord>(@"SELECT DISTINCT record.home_city, record.home_stabb 
FROM Employees AS record  
ORDER BY record.home_city SKIP 0 LIMIT 15",prms); 
```

Exact same statement, exact same object context. However, when I add in the DISTINCT Modifier, I get the exception below. I know all of the columns are correct because the first statement works perfectly. Jusjing by the exception, it appears to have a problem with the ORDER BY clause.

Is there something that I'm missing? This makes no sense to me.

```
System.Data.EntitySqlException was unhandled by user code
Message='record.home_city' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near member access expression, line 1, column 95.
Source=System.Data.Entity
Column=95
ErrorContext=member access expression, line 1, column 95 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T07:13:55.553

你可以在下面尝试，然后再运行一个不同的？我知道不同是您面临此问题的主要原因，但至少您知道另一种解决方法。

```
ctx.CreateQuery<DbDataRecord>(@"SELECT VALUE record FROM Employees AS record  
ORDER BY record.home_city SKIP 0 LIMIT 15",prms); 
```

# ruby - S3：如何在多个目录中按名称搜索/查找文件？

> ID：13687780
> 
> 赞同：0
> 
> 时间：2012-12-03T16:42:39.010
> 
> 标签：ruby, amazon-s3

我在 s3 上有一个包含大量图像（数十万张）的存储桶。每个图像都有一个非常独特的文件名（一个长散列名称），并存储在根据我的数据库中相应对象 ID 命名的子目录中。

一个简化的例子：

```
/bucket/1/red-1.jpg
/bucket/1/red-2.jpg
/bucket/1/red-3.jpg
/bucket/2/blue-1.jpg
/bucket/2/blue-2.jpg
/bucket/2/blue-3.jpg 
```

现在的问题是，数据库中的 id 已经更改，并且错误地子目录的名称没有。这意味着，根据我的数据库，图像`red-1.jpg`应该在`/bucket/2`但它实际上仍然驻留在`/bucket/1`. 所以我需要能够在所有子目录中搜索，找到名为 的文件`red-1.jpg`，并将其移动到正确的目录（在本例中`/bucket/2`）。

注意：关于移动文件的部分应该非常简单，最大的问题是到目前为止我如何有效地搜索和找到这些图像的路径，我知道名称，但不知道当前目录。

我在使用红宝石，但我很愿意使用任何东西。

PS。我看到了一些关于亚马逊云搜索的东西，但我不知道这是否可以用于这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:36:10.547

没有简单的方法可以仅列出具有特定后缀的键。

您应该使用该方法遍历所有常见前缀（文件夹），[`list_objects`](http://rubydoc.info/github/amazonwebservices/aws-sdk-for-ruby/master/AWS/S3/Client#list_objects-instance_method)以查找与您正在查找的文件名对应的对象。

# java - Should I use Canvas or GWTCanvas?

> ID：13687785
> 
> 赞同：0
> 
> 时间：2012-12-03T16:42:52.247
> 
> 标签：java, gwt, java-canvas

I'm creating a canvas with GWT, and I have seen both solutions using `Canvas.createIfSupported();` or `new GWTCanvas();`

Which one is the preferred, and why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:58:10.410

使用`Canvas`. 它是 GWT 的一部分。 `GWTCanvas`仅在孵化器项目中，现已弃用。

# selenium - How to click tag in selenium

> ID：13687790
> 
> 赞同：4
> 
> 时间：2012-12-03T16:43:03.183
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T05:27:23.053

你可以像这样点击它：

```
selenium.click("//a/u[contains(text(),'Re-Submit')]"); 
```

对于网络驱动程序：

```
driver.findElement(By.xpath("//a/u[contains(text(),'Re-Submit')]")).click(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:56:28.390

在红宝石 Selenium 网络驱动程序中

```
@driver.find_element(:link, "Re-Submit" ).click 
```

使用硒 RC perl

```
$sel->click("link=Re-Submit"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:44:26.517

你可以简单地写 1.selenium.click("link=Re-Submit") 和 2.selenium.click("link-View")。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T20:17:19.527

看起来您的问题出在不正确的 HTML 结构中。标签`<a>`不能放入`<tr>`。只`<td>`允许在那里。浏览器“修复”错误并且您的标签`<a>`出现在表格之外，并且 DOM 结构与 html 不同。

![通过浏览器修复 DOM](../Images/deafbf128e2d1ee4850054f8ef2bc50b.png)

此 XPath 适用于上图

```
//td[text()='Foot-OM']/../../../../a[//text()='Re-Submit'] 
```

# json - 使用 JSON 的 Twitter Bootstrap 预输入

> ID：13687797
> 
> 赞同：3
> 
> 时间：2012-12-03T16:43:27.293
> 
> 标签：json, twitter-bootstrap

我如何使用带有 JSON 的 Twitter Bootstrap Typeahead。我的引导版本是**2.2.1**

**我的 JSON 响应**

```
 [{"label":"Sistemski Administrator","value":"1"},{"label":"Jure Hotujec","value":"3"},{"label":" ","value":"4"},{"label":"Simona Jamnik","value":"5"},{"label":"Ma\u0161a Mu\u0161i\u010d","value":"6"},{"label":" ","value":"7"}] 
```

我现在只有这个，但源必须是数组，在我的情况下它是 JSON

```
$("#typeahead").autocomplete({
    soruce : soruce
}); 
```

我也想将它与模态元素一起使用，如果这改变了任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:48:04.763

使用 jQuery 的 parseJson 方法，然后将其传递给 typeahead 的`source`参数。

```
var jsonString =  '[{"label":"Sistemski Administrator","value":"1"},{"label":"Jure Hotujec","value":"3"},{"label":" ","value":"4"},{"label":"Simona Jamnik","value":"5"},{"label":"Ma\u0161a Mu\u0161i\u010d","value":"6"},{"label":" ","value":"7"}]';
var jsonObj = $.parseJSON(jsonString);
var sourceArr = [];

for (var i=0; i<jsonObj.length; i++) {
  sourceArr.push(jsonObj[i].label);
}

$("#typeahead").typeahead({
    source : sourceArr
}); 
```

这是一个[jsfiddle示例。](http://jsfiddle.net/4XZMb/1018/ "Typeahead JsFiddle")
有关更多信息，请查看[typeahead 文档。](http://twitter.github.com/bootstrap/javascript.html#typeahead "预输入文档")

# java - 使用 sax 解析器解析和修改 xml 字符串

> ID：13687799
> 
> 赞同：4
> 
> 时间：2012-12-03T16:43:29.500
> 
> 标签：java, sax, stringbuilder

我有一个 XML 文件，我需要在其中搜索特定标签并更新它的值。问题是，使用 Sax 解析器是“必须的”。我必须通过“仅”使用 Sax Parser 来找到这些标签，dom stax j4dom dom4j 解析器不在考虑范围之内。

我可以通过将我的 xml 文件转换为字符串并使用 sax 解析器解析它并按`StringBuilder`对象附加新值来完成此任务吗？会好吗？或者你会推荐什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T17:46:23.293

这是一个工作代码，只需添加缺少的导入。它使用 SAX 并更改`<name>user1</name>`为`<name>user2</name>`. 如果你弄清楚它是如何工作的并阅读 SAX API，你就可以用你的 xml 做任何事情。请注意，在 StAX 出现之前，SAX 一直被认为是最有效的 xml 解析器

```
public static void main(String[] args) throws Exception {
    String xml = "<users><user><name>user1</name></user></users>";
    XMLReader xr = new XMLFilterImpl(XMLReaderFactory.createXMLReader()) {
        private String tagName = "";
        @Override
        public void startElement(String uri, String localName, String qName, Attributes atts)
                throws SAXException {
            tagName = qName;
            super.startElement(uri, localName, qName, atts);
        }
        public void endElement(String uri, String localName, String qName) throws SAXException {
            tagName = "";
            super.endElement(uri, localName, qName);
        }
        @Override
        public void characters(char[] ch, int start, int length) throws SAXException {
            if (tagName.equals("name")) {
                ch = "user2".toCharArray();
                start = 0;
                length = ch.length; 
            }
            super.characters(ch, start, length);
        }
    };
    Source src = new SAXSource(xr, new InputSource(new StringReader(xml)));
    Result res = new StreamResult(System.out);
    TransformerFactory.newInstance().newTransformer().transform(src, res);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:04:38.540

如果不考虑时间而考虑内存，SAX 解析器不是一个糟糕的选择。

# vba - 为什么在 Excel 2003 的 VBA 中使用 Range.Formula 而不是 Range.Value？

> ID：13687800
> 
> 赞同：6
> 
> 时间：2012-12-03T16:43:32.887
> 
> 标签：vba, excel, excel-2003

我想知道为什么在 Excel 2003 的 VBA 代码中我们甚至需要使用`Range.Formula`将公式**写入**单元格而不是仅使用`Range.Cell`？他们都将字符串写入成为论坛的单元格，并且公式有效（根据我的测试）。

```
ActiveCell.Value="=If(True,""yes"",""no"")" 
```

和

```
ActiveCell.Formula="=If(True,""yes"",""no"")" 
```

为我做同样的事情（当我选择一个单元格并在单独的单元格中分别执行上述每个代码段时）。它们都在单元格中显示“是”值，并且当我单击查看每个单元格时存储公式。

我查看了 Microsoft 的开发中心以获取信息：

`Range.Formula` [Excel 2013 的 Range.Formula 属性（Excel 2003 没有此属性的页面）](http://msdn.microsoft.com/en-us/library/office/ff838835.aspx)

`Range.Value` [Excel 2003 的属性（展开“适用于 Range 对象的值属性。”标题](http://msdn.microsoft.com/en-us/library/office/aa215937%28v=office.11%29.aspx)

我还搜索了“为什么使用 Range.Formula 而不是 Range.Value VBA Excel”，但找不到与我的问题相关的任何内容。

[有人](http://www.ozgrid.com/forum/showthread.php?t=68585)说，用`Range.Value`。

其他一些人说使用`Range.Formula`堆栈溢出（对不起，我失去了对确切问题的引用......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:49:19.907

在数据价值方面：

想象一下，对于某些计算，你有整数、双精度数，如果你使用 .formula，你会搞砸的。因为`.FORMULA`总是返回一个字符串。（任何设置为 .formula 的值都是普通值而不是公式）除非您在代码中准备好异常处理和附加功能。而`.VALUE`按照您的预期返回数据的数据类型。

在检索公式方面：值是设置公式但不检索的一种方式。

因此，您会看到引入这些方法是有原因的，并帮助您使用所需的正确属性。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T11:36:22.387

这在将实际公式写入单元格时并不适用，但我发现在使用包含多种数据类型（尤其是非美国日期）的变体数组中的值填充范围时使用`.Formula`而不是`.Value`提供更可靠的结果。

我不记得导致我发现这是一种解决方法的确切问题，因为那是很多个月前的事了。我也没有测试找出实际差异是什么。一旦我发现了好处，我就简单地切换了，从那以后就一直这样做。

猜测一下，我会说使用该`.Formula`属性编写会阻止 Excel 尝试为目标范围内尚未设置数字格式的任何单元格自动转换数字格式（甚至可能是那些设置了数字格式的单元格）。

# php - 不需要安装 php 的 php 代码度量工具

> ID：13687801
> 
> 赞同：0
> 
> 时间：2012-12-03T16:43:40.297
> 
> 标签：php, metrics

> **可能重复：**
> [好的 PHP 度量工具](https://stackoverflow.com/questions/1300420/good-php-metric-tools)

我正在寻找软件（不是用 PHP 编写的）来报告我的 php 项目的代码指标（代码行、复杂性）。那么是否有任何 exe 或 jar 可以为 php 项目执行此操作？

# c - 从 OS X 上的 C 中的 dlopen()ed 动态库访问主程序全局结构/指针

> ID：13687802
> 
> 赞同：2
> 
> 时间：2012-12-03T16:43:41.303
> 
> 标签：c, macos, pointers, gcc

我实际上正在将 Linux 应用程序移植到 Mac OS X。我的问题是我可以访问变量但不能访问指针。

我以这种方式声明了变量`main.h`：

```
uint64_t test;
uint64_t *test2; 
```

在`mylib.h`：

```
extern uint64_t test;
extern uint64_t *test2; 
```

在`mylib.c`我以这种方式访问​​变量：

```
printf("%llu\n",test);
printf("%llu\n",*test2); 
```

第一个`printf()`没有任何问题，但第二个给了我这个错误：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000008 
```

有人知道为什么会这样吗？

我的`ggc`命令行具有以下标志：

```
gcc -Wall -g -fPIC -c main.c gcc -shared -Wl,-undefined,dynamic_lookup -o mylib.so mylib.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:54:16.630

仅针对有类似问题的人：

我决定使用 getter 和 setter，因为使用动态库访问主程序的函数没有问题，只是变量。

在 mylib.c 中：

```
test2 = getTest(); 
```

在 main.c 中：

```
uint64_t* getTest(){
    return &test;
} 
```

# 更新

我终于找到了解决这个 getter & setter 的方法。您面临的问题是您定义了两次变量，在我的情况下，这发生在对`extern`关键字的误解期间。要解决您的问题，您需要在`main.h`例如：

```
extern uint64_t test;
extern uint64_t *test2; 
```

下一步是在您的示例中定义变量`main.c`：

```
int main(...) {
    test = 1;
    test2 = &test;
} 
```

最后从您的`mylib.h`

以下 SO 帖子导致了我的解决方案：[link](https://stackoverflow.com/questions/496448/how-to-correctly-use-the-extern-keyword-in-c%E2%80%8B)

# spring - 配置 Spring MVC 后运行时的动态数据源

> ID：13687810
> 
> 赞同：1
> 
> 时间：2012-12-03T16:44:01.537
> 
> 标签：spring, hibernate, sqlite, jpa, spring-mvc

如果您查看下面的链接，您可以非常清楚地看到如何在代码中定义数据源和实体管理器工厂，这些代码被注释为在配置期间运行。

[http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#d0e993](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#d0e993)

我想知道的是初始化后是否有办法做到这一点？我想为用户将要上传的sqlite文件动态创建数据源以提取信息并将其放入服务器上的mysql数据库中。我使用 hibernate 和 jpa 来实现持久性和 orm，并使用 spring 存储库来访问我的所有数据库。我知道我可以使用 jdbc 并使用查询从 sqlite 访问信息，但是我已经编写了很多代码来复制这些数据，因此不必编写所有这些查询并重写它真的很方便代码。

我可以使用一个文件池，在清除它们之间进行迭代，这样我就可以用上传的文件替换那些 sqlite 文件并访问那些预定义的文件，但这并不是很理想。我希望能够上传文件，将其声明为新的 sqlite 数据源，然后将其提供给我的抽象路由数据源，以便我可以在数据源之间切换。

现在我在 xml 中定义我的数据源，我只是使用我的抽象路由数据源在它们之间切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:55:36.437

我会尝试将`EntityManagerFactory`实例注入包装器中，并让所有需要`EntityManager`调用此包装器的代码。包装器还将提供一种`setDataSource`方法，该方法可以采用 SQLite 文件或使用所有参数构造的 DataSource，`EntityManagerFactory`通过反射设置实例的数据源。因此，后续`EntityManager`实例`EntityManagerFactory`将使用相同的持久性单元，但针对新的 SQLite 数据源。

# properties - 从 WiX 中的表达式设置属性值

> ID：13687813
> 
> 赞同：0
> 
> 时间：2012-12-03T16:44:06.127
> 
> 标签：properties, wix

我可以定义一个 WiX 属性，该属性将具有从其他属性计算的值吗？例如，我有两个属性：

```
<Property Id="SEARCH1">
  <RegistrySearch ... />
</Property>

<Property Id="SEARCH2">
  <RegistrySearch ... />
</Property> 
```

我想避免`SEARCH1 = "" AND SEARCH2 = ""`在我的 WiX 源中跨多个位置复制粘贴条件。定义派生属性似乎不起作用：

```
<Property Id="FOUND_NOTHING">
  SEARCH1 = "" AND SEARCH2 = ""
</Property> 
```

有没有一种有效的方法来定义这样的派生属性以`FOUND_NOTHING`用作条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:09:23.977

使用 WiX，您可以通过创作[`<SetProperty>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_setproperty.htm)元素来做到这一点。在后台，它创建了一个特殊的自定义操作并适当地安排它。

# iphone - 构建要求和运行时要求

> ID：13687814
> 
> 赞同：-3
> 
> 时间：2012-12-03T16:44:09.357
> 
> 标签：iphone, objective-c, ios, xcode, ipad

任何人都可以告诉我构建和运行时要求之间的区别是什么我正在阅读苹果文档并在源代码中出现

```
Build Requirements: 
iOS 4.3 or later
Runtime Requirements:   
iOS 4.0 or later. iPhone 4, iPad 2 Wifi + 3G or later. 
```

我没有找到这方面的信息。如果这是一个不好的问题，让我现在为什么我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:40:09.397

**构建要求**是指构建特定方法或功能所需的最低 iOS 版本。

**运行时要求**是指使用该特定方法或功能安装应用程序所需的 iOS 版本。

检查此[**链接**](http://www.scribd.com/doc/55726529/1/Understanding-the-iOS-Runtime-Environment#outer_page_13)以获取更多此类术语

# gcc - 我们想比较二进制文件的大小并查看差异及其背后的原因

> ID：13687817
> 
> 赞同：1
> 
> 时间：2012-12-03T16:44:21.007
> 
> 标签：gcc

目标：了解在两个相同环境中构建的相同二进制文件的二进制大小差异的原因

背景：我们在不同的位置创建了一个新的重复构建环境。然而，当比较这两个环境的二进制大小时，超过 60% 的二进制文件在两个环境中的大小不同。

采取/需要采取的措施：为了了解不同大小的原因，我们尝试使用 readelf、objdump、cmp、vbindiff、Beyond Compare 等工具。使用这些工具我们能够突出显示差异，但不确定是什么是它的含义以及如何采取措施解决尺寸问题。

例如：

环境 1 中的二进制 1 显示：入口点地址：0x10cc8

环境 2 中的二进制 1 显示：入口点地址：0x10d10

不确定这两个二进制文件的上述差异是什么意思。

相似地

环境 1 中的二进制 1 显示：节头的开头：215080（文件中的字节）

环境 2 中的二进制 1 显示：节头的开头：215172（文件中的字节）

同样，这两个二进制文件之间存在各种差异。

您能否建议了解突出显示的差异的方法，以便采取措施了解二进制文件大小差异的原因。

PS：我已经阅读了以下帖子，并且对遵循 [gcc 编译的二进制文件的一些步骤非常有帮助吗？](https://stackoverflow.com/questions/1277877/gcc-compiled-binaries-w-different-sizes)

提前致谢

# javascript - ObservableArray.RemoveAll() 清空不同变量中的连接对象

> ID：13687823
> 
> 赞同：4
> 
> 时间：2012-12-03T16:44:39.000
> 
> 标签：javascript, arrays, reference, knockout.js

在我的 KnockoutJS 视图模型逻辑中，我有一个可观察的当前显示对象数组（项目视图模型）`self.currentProjects`：. 根据项目过滤器设置（用户动态选择项目类型）`self.currentProjects`保存 UI 绑定到的不同对象。

在某些时候，我需要将不同的项目加载到视图中，我需要清空 currentProjects 并将不同的模型集放入其中。我通过调用来做到这一点`self.currentProjects.removeAll();`问题是当我调用它时，另一个`self.ProjectModels`应该保存对同一组模型的引用的可观察数组似乎也被清空了。我应该如何管理可观察数组中的对象，以便从一个数组中删除不会导致另一个数组变为空。

这是一个与操作相关的代码：

```
 //Another menu item is selected
    self.selectItem = function(newId) {
        self.selectedItemId(newId);
        self.currentProjects.removeAll(); //This is the point where self.ProjectModels also looses model references
        var someProjectsLoaded = false;
        jQuery.each(self.projectModels, function (i, val) {
            if (val.type == self.selectedItemId()) {
                self.currentProjects(val.models);
                var projectsPerPage = parseInt($('#ProjectsPerPage').val(), "10");
                self.page(val.models.length / projectsPerPage);
                someProjectsLoaded = true;
            }
        });
        if (!someProjectsLoaded) {
            self.page(1);
            self.LoadMoreProjects();
        }
    };

    self.LoadMoreProjects = function() {
        var getProjectsUrl = $("#GetNextProjectsUrl").val();
        $.ajax({
            url: getProjectsUrl,
            data: {
                page: parseInt(self.page(), "10"),
                type: self.selectedItemId()
            },
            beforeSend: function () {
                //$("#ajaxload").show();
            },
            success: function (result) {
                var newlyAddedModelsArray = jQuery.map(result, function (val, i) {
                    var vm = new ProjectViewModel(val, self);
                    self.currentProjects.push(vm);
                    return vm;
                });
                self.page(parseInt(self.page(), "10") + 1);
                var typeAlreadyInChache = false;
                jQuery.each(self.projectModels, function (i, val) {
                    if(val.type == self.selectedItemId()) {
                        val.models = val.models.concat(newlyAddedModelsArray); //HERE IS WHERE I SUSPECT A COPY BE REFERENCE TAKES PLACE
                        typeAlreadyInChache = true;
                    }
                });
                if(!typeAlreadyInChache) {
                    self.projectModels.push({ type: self.selectedItemId(), models: newlyAddedModelsArray });
                }
            },
            error: function () {
                $("#error").show();
            }
        });
    }; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T19:47:20.677

调用`removeAll`会清空底层数组，并且您的两个可观察对象似乎引用了同一个数组。

一个简单的选择是设置`currentProjects`为空数组而不是调用`removeAll`.

```
self.currentProjects([]); 
```

现在，原始数组将保持原样。

# c - 使用给定算法解密消息

> ID：13687828
> 
> 赞同：1
> 
> 时间：2012-12-03T16:44:42.067
> 
> 标签：c, algorithm, encryption

以下代码生成一个文本文件，其中包含从不同的可读文本文件派生的编码消息。

```
 #include <stdio.h>
   #include <time.h>
   #include <stdlib.h>

   main()
   {
     FILE *f, *f_enc;
     char c, c_enc;
     int ind, a[26], r_val;

     srandom(time(NULL));
     for (ind=0; ind<26; ind++) a[ind]=-1; 
     for (ind=0; ind<26; ind++){
       do
         r_val=random()%26;
       while (a[r_val]!=-1);
       a[r_val]=ind;
     }

     f=fopen("plain.txt","r");
     f_enc=fopen("cipher.txt","w");
     while (!feof(f)) {
       c=fgetc(f);
       if ((c>='A' && c<='Z')||(c>='a' && c<='z')) {
         if (c>='A' && c<='Z') c = c + 'a' - 'A';
         c=a[c-'a']+'a';
       }
       fputc(c,f_enc);
     }
     fclose(f);
     fclose(f_enc);
   } 
```

我不清楚的是代码为编码消息而实现的总体算法。

*   是否从字符中减去 ASCII 值（'a - 'A）以生成编码字符？

下面给出了一个示例输出：

```
xohq xpu ouuf yubliu spieqxkhq, hzj hcc xpilnap xpu plnqu
tln slncj puhi ku yuhxeza xpu slkmnxui oexp xpu klnqu.
xpu jeqf ohq pnza nm ez xpu jeqf jieru oexp shiu,
hzj, zuujcuqq xl qht, e zuhict mnccuj lnx kt phei.

e ahru nm bli xphx zeapx, alx iuhjt bli yuj,
hzj olzjuiuj, "qplncj e gnqx ynt shijq ezqxuhj?"
khkh hzj jhjjt phj gnqx pex xpu pht,
ql e xlcj xpuk allj zeapx, hzj ouzx lz kt oht. 
```

我将尝试对此进行逆向工程，看看我是否可以了解正在发生的事情。欢迎任何猜测！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:52:16.080

这是一个简单的替换，例如在密码谜题中使用。可以通过[字母频率分析](http://www.cryptograms.org/letter-frequencies.php)来解决。

存在[自动求解器](http://www.blisstonia.com/software/WebDecrypto/index.php)。该示例的原文是：

> 那是圣诞节前一周，整个屋子里你都能听到我用鼠标敲打电脑的声音。磁盘被小心地挂在磁盘驱动器中，不用说，我几乎拔掉了我的头发。那天晚上我放弃了，准备睡觉，想知道，“我应该只买卡吗？” 妈妈和爸爸刚吃完干草，所以我跟他们道了晚安，然后就上路了。

# drupal - 如何在 Drupal 6 中自定义节点内容的输出？

> ID：13687831
> 
> 赞同：0
> 
> 时间：2012-12-03T16:44:58.937
> 
> 标签：drupal, drupal-6, drupal-theming, drupal-templates

我正在寻找自定义 node.tpl.php 中 $content 变量的模板输出你能告诉我如何实现这一点吗？是否可以使用另一个模板文件？

这样做的原因是为了实现 AJAX 分页，因此我需要 node_body 上的 ID 并从同一个 DIV 中提取分页导航。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:12:01.757

复制 node.tpl 文件并将其重命名为**node-contenttypename.tpl.php**。完成此操作后，您可以使用此代码打印字段

> 打印 $node->field_name[0]['view'] ?>

打印正文使用此代码

> 打印 strip_tags($node->content ['body']['#value']);

打印画廊使用此代码，或者您可以使用视图

> 打印 if($node->field_gallery[0]['view']==null){ print " "; } 其他
> {
> 
> foreach ((array)$node->field_gallery as $item) { print $item['view']

我希望您可以使用此代码获得想法。
您可以从这个现场网站看到示例[http://www.richtown.ae/?q=content/most-wanted-property-one-bed-residences-dial-0555456012-0](http://www.richtown.ae/?q=content/most-wanted-property-one-bed-residences-dial-0555456012-0)
谢谢 [http://www.richtown.ae](http://www.richtown.ae)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:40:12.893

您需要从 node.tpl.php 中删除 $content 变量并使用 $node 的单独字段。您可以使用 print_r($node) 查看字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:18:19.307

是的，您可以为该特定内容类型创建另一个模板文件。使用命名约定**node-[content-type-name].tpl.php** 模板文件的命名约定在 Drupal 中非常重要。将此文件放入主题目录的模板文件夹中。并打印 $node 并将 $content 变量替换为您想要的字段。

# ios - 使用 NSXMLParser 获取日期信息时使用 isEqualToDate:[NSDate date] 时出现“无法识别的选择器”错误

> ID：13687832
> 
> 赞同：0
> 
> 时间：2012-12-03T16:45:03.727
> 
> 标签：ios, nsdate, nsdictionary, nsxmlparser

在我的项目中，我使用 NSXMLParser 从 XML 字符串中获取日期列表。解析器将信息放入的对象（称为 DatesXML）具有

```
@property (nonatomic,strong) NSDate *DATE;
@property (nonatomic,strong) NSString *NAME; 
```

在许多其他属性中。

我的解析器将返回 DatesXML 对象的数组（称为 dateItemsFromXML）。解析器完成后，我做

```
NSMutableDictionary *datesFromXMLDictionary = [[NSMutableDictionary alloc] init];
for (DatesXML *item in dateItemsFromXML)
{
    [datesFromXMLDictionary setValue:item.DATE forKey:item.NAME];
} 
```

后来，我做

```
if ([[datesFromXMLDictionary objectForKey:@"OneOfMyNames"] isEqualToDate:[NSDate date]]) 
```

我在此`if`语句中收到“无法识别的选择器”错误。我输入了一个断点，当我`po [datesFromXMLDictionary objectForKey:@"OneOfMyNames"]`输入控制台时，我得到了`(id) ... 12/3/2012`.

为什么控制台告诉我它是一个 id 对象而不是 NSDate 对象？将这些信息放入字典（或其他任何地方）时是否会丢失该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:00:59.607

正如 Matthias Bauch 在评论中指出的那样，我的问题的根源最终是因为我的 .DATE 属性中有一个 NSString 。当解析器加载我的 DatesXML 对象时，它默认将所有内容作为字符串加载。结果，它用字符串加载了我的 .DATE 属性（并且默默地这样做了），即使 .DATE 应该是 NSDate。

我将 NSDateFormatter 放入我的解析器以将字符串从 xml 转换为 NSDate，然后将该 NSDate 放入我的 .DATE 属性中。这消除了我遇到的错误，并且当我尝试在代码中的其他地方使用 .DATE 属性时，我得到了我所期望的所有行为。

# asp.net - ASP.NET MVC3：来自客户端的 $Ajax 请求后，Request.IsAuthenticated 始终为“真”

> ID：13687833
> 
> 赞同：4
> 
> 时间：2012-12-03T16:45:05.373
> 
> 标签：asp.net, asp.net-mvc-3

我正在尝试检查服务器是否已通过身份验证超时，然后`Request.IsAuthenticated = false`我是否希望将用户重定向到 LoGon 页面。但是，即使身份验证的时间已经过期，它总是给我`Request.IsAuthenticated = true`，但是当应用程序第一次启动时就可以了`Request.IsAuthenticated = false`。

我无法检查会话超时，因为主要页面永久从服务器获取数据，我认为会话永远不会超时。

**在 WebConfig 中**：

```
<code>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="1" />
    </authentication>
</code> 
```

**在服务器上：**

```
<code>
public class CheckAuthorizeAndSessionAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            HttpContext ctx = HttpContext.Current;

            //  check if session is supported
            if (ctx.Request.IsAuthenticated)
            {
                if (ctx.Session != null)
                {
                    // check if a new session id was generated
                    if (ctx.Session.IsNewSession)
                    {

                        // If it says it is a new session, but an existing cookie exists, then it must
                        // have timed out
                        string sessionCookie = ctx.Request.Headers["Cookie"];
                        if (null != sessionCookie)
                        {
                            FormsAuthentication.SignOut();
                            //const string loginUrl = System.Web.Security.FormsAuthentication.LoginUrl;// Url.Action("LogOn", "Account");
                            //var rr = new RedirectResult(loginUrl);
                            //filterContext.Result = rr;
                            String url = FormsAuthentication.LoginUrl;
                            filterContext.Result = new RedirectResult(url);
                        }
                    }
                }
            }
            else
            {
                ctx.Response.Redirect(@"~/Account/LogOn");
                //ctx.Response.StatusCode = 302;
            }
            base.OnActionExecuting(filterContext);
        }
    }
</code> 
```

**在客户端**

```
<code>
$(document).ready(function () {
        //DELETE
        $("#ModifyBlock a").live("click", function () {
            var urlForGet = '';
            var urlAction = '';
            if ($(this).attr("id") == 'Delete') {
                urlForGet = '@Url.Action("Delete", "Product")';
                urlAction = '@Url.Action("Delete", "Product", new { id = "idClient", lockType = "typeLockClient" })';
            }
            if ($(this).attr("id") == 'Edit') {
                urlForGet = '@Url.Action("Edit", "Product")';
                urlAction = '@Url.Action("Edit", "Product", new { id = "idClient", lockType = "typeLockClient" })';
            }
            if ($(this).attr("id") == 'Detail') {
                urlForGet = '@Url.Action("Detail", "Product")';
                urlAction = '@Url.Action("Detail", "Product", new { id = "idClient", lockType = "typeLockClient" })';
            }
            $.ajax({
                url: urlForGet,
                type: 'GET',
                data: { id: $(this).attr("alt"), lockType: $("#SelTypesLock").attr("value") },
                dataType: 'json',
                proccessData: false,
                contentType: 'application/json; charset=utf-8',
                statusCode: {
                    200: function (data) {
                        alert('200: Authenticated');
                    },
                    401: function (data) {
                        alert('401: Unauthenticated');
                    },
                    550: function (data) {
                        alert('550: Unauthenticated');
                        $("#ErrorMesage").text(xhr.responseText);
                    },
                    660: function (data) {
                        alert('660: Redirect to Error View');
                        window.location.href = '@Url.Action("Error", "Product")';
                    }
                },
                success: function (data) {
                    url = urlAction;
                    url = url.replace("idClient", data.Id);
                    url = url.replace("typeLockClient", $("#SelTypesLock").attr("value"));
                    window.location.href = url;
                },
                error: function (xmlHttpRequest, status, err) {
                    $("#ErrorMesage").text(xmlHttpRequest.responseText);
                }
            });
        });
    </code>`enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:22:29.147

您可能将滑动过期参数设置为 true。这样做是根据 web.config 中的参数测量最后一次请求的时间。

如果您的参数是 1 分钟，并且您执行 30 秒的 Ajax 调用，那么您将永远不会被取消身份验证。尝试关闭滑动到期，应该可以工作

# cloudcontrol - 从 cloudcontrol 应用程序访问我们自己的 AWS/RDS 实例

> ID：13687835
> 
> 赞同：0
> 
> 时间：2012-12-03T16:45:08.120
> 
> 标签：cloudcontrol

我想将我们自己的 RDS 实例与由 cloudcontrol 托管的应用程序一起使用。我知道这是可能的，因为我只需要 EC2 安全组信息和云控制帐号。

但是，云控制文档中没有提到直接使用 Amazon RDS 实例。

有没有人将自己的 RDS 实例与 Cloudcontrol 应用程序一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:09:25.697

这当然是可能的。我们建议在欧盟地区启动 RDS 实例以靠近我们的 EC2 实例。

这是您设置 RDS 安全组以允许从我们的计算机访问所需的帐户信息。

AWS 账户 ID：481137082768 EC2 安全组：lxc

# asp.net - 更新 VS2012 SP1 后 IIS Express 停止工作

> ID：13687836
> 
> 赞同：2
> 
> 时间：2012-12-03T16:45:16.987
> 
> 标签：asp.net, visual-studio-2012, iis-8

更新 Visual Studio 2012 并在它之后 IIS Express 给出错误：“无法启动 IIS Express Web 服务器”，当我尝试运行 asp.net 项目时。在升级之前一切正常。

/trace:error 模式给出了这样的日志

```
Starting IIS Express ...
Initializing the W3 Server Started CTC = 264312930
W3 Server initializing WinSock.  CTC = 264312946
W3 Server WinSock initialized.  CTC = 264312946
W3 Server ThreadPool initialized (ipm has signalled).  CTC = 264312946
Start listenerChannel http:0
Failed to initialize site bindings
Error initializing ULATQ.  hr = 80070005
Terminating W3_SERVER object
InitComplete event signalled
Process Model Shutdown called
Unable to start iisexpress. 
```

看起来我需要更改配置文件，因为更新 IIS Express，但我不知道如何。

# php - 在 href 中使用 php，但与 jquery 保持在同一页面上

> ID：13687838
> 
> 赞同：1
> 
> 时间：2012-12-03T16:45:18.340
> 
> 标签：php, jquery, redirect, silex

基本上我有一个href，它通过json传递图像的id，如下所示：

```
http://localhost:4567/public/vote.html?image=50b4d006fa4634bb130000fe 
```

然后，这会根据 id 在 mongo 中创建/更新图像，并在用户/访问者投票时更新。

目前，在处理完 vote.html 中的代码后，我使用 silex 进行重定向：

```
 return $app->redirect('popular.html'); 
```

我想知道是否可以使用 jquery 在不重定向的情况下处理上述 href，所以基本上我可以点击投票，并且数字会无缝更改，而用户不知道他们已被重定向。

## 回答

抱歉这个模糊的问题，但我的回答确实来自下面发布的原则。

我更改了 href 以分配一类投票和图像的 id：

```
<a class="vote" id="' + image.id + '" href="#"> 
```

然后将此添加到我的 $(document).ready 函数中：

```
$(".vote").live('click', function() {
        $('span', this).toggle();
        $.ajax( site_url + 'vote.html?image=' + $(this).attr('id'));
    }); 
```

这在理论上使用 mongo 对象的 id 并将其附加到每次单击对象时的 url，处理 href 而不重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:59:33.903

是的，您可以使用一些 jQuery 来帮助您。这是一个非常人为的示例，因为您没有为您的投票按钮/图像提供任何 HTML 标记示例。

```
$(function() { // anything in here will happen once the DOM is ready
    $('.vote').click(function(e) { // assign click for each elem w/ class "vote" 
        e.preventDefault(); // prevent default action (if elem was an anchor)
        // Make the server request asynchronously
        var $this = this;
        $.ajax({
            type: "POST", // or "GET"; or use $.post()/$.get() 
            url: $(this).attr("href"), // the href of the anchor
            data: null // or JSON here (e.g. { 'id': 'abcde' })
        }).done(function(data) { // vote.html should be image data of some kind
            // update the DOM with the new vote image
            // possible example if response was base64 encoded png
            $($this).closest('image').attr("src", "data:image/png;base64," + data);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:07:12.300

为什么不使用 AJAX 来更新号码？[使用jquery.ajax()](http://api.jquery.com/jQuery.ajax/)真的很简单

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T16:48:25.640

您可以像这样覆盖 jQuery 中的单击事件：

```
$("a").click(function(event) {
  event.preventDefault();
  // DO MY STUFF HERE
}); 
```

# objective-c - 405 方法不允许

> ID：13687840
> 
> 赞同：2
> 
> 时间：2012-12-03T16:45:22.977
> 
> 标签：objective-c, ios, box-api

我正在尝试访问`https://api.box.com/2.0/files`，但我收到`Expected status code in (200-299), got 405`了回复（来自 AFNetworking）。

在发送请求之前，我已经从服务器获取了我的 auth_token。

**代码**

```
- (void)getFileListing:(NSString*)apiKey
{
    if(apiKey == nil) { apiKey = kBoxNetApiKey; }

    NSDictionary *boxAuth = [[NSUserDefaults standardUserDefaults] objectForKey:kBoxNetUserDefaultsKey];

    if([boxAuth objectForKey:@"auth_token"] != nil) {
        NSURL *url = [NSURL URLWithString:@"https://api.box.com/2.0/files"];
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
        [request setHTTPMethod:@"GET"];

        DLog(@"auth_token: %@", [boxAuth objectForKey:@"auth_token"]);
        DLog(@"apiKey: %@", apiKey);

        NSString *auth = [NSString stringWithFormat:@"BoxAuth api_key=%@&auth_token=%@", apiKey, [boxAuth objectForKey:@"auth_token"]];
        [request setValue:auth forHTTPHeaderField:@"Authorization"];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

            DLog(@"JSON: %@", JSON);

        } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

            DLog(@"error: %@", error);
            DLog(@"JSON: %@", JSON);

        }];

        [operation start];
    }
} 
```

***错误**

`__29-[BoxNetAuth getFileListing:]_block_invoke_081 [Line 75] error: Error Domain=AFNetworkingErrorDomain Code=-1011 "Expected status code in (200-299), got 405" UserInfo=0xa0b8740 {NSLocalizedRecoverySuggestion={"type":"error","status":405,"code":"method_not_allowed","help_url":"http:\/\/developers.box.com\/docs\/#errors","message":"Method Not Allowed","request_id":"183259878350bcd62a62f1b"}, AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest https://api.box.com/2.0/files>, NSErrorFailingURLKey=https://api.box.com/2.0/files, NSLocalizedDescription=Expected status code in (200-299), got 405, AFNetworkingOperationFailingURLResponseErrorKey=<NSHTTPURLResponse: 0xa6c9840>}`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T18:29:36.777

您不能在[https://api.box.com/2.0/files](https://api.box.com/2.0/files)上执行 GET，因为它需要一个资源 ID，例如：GET [https://api.box.com/2.0/files/12345](https://api.box.com/2.0/files/12345)

您可以 POST 到[https://api.box.com/2.0/files/content](https://api.box.com/2.0/files/content)来上传新文件，或者您可以 GET [https://api.box.com/2.0/folders/0](https://api.box.com/2.0/folders/0)来获取根文件夹

# javascript - iframe 不会在 Firefox 17 中滚动

> ID：13687843
> 
> 赞同：0
> 
> 时间：2012-12-03T16:45:37.467
> 
> 标签：javascript, html, firefox, dom

将 Firefox 升级到 17 后，iframe 滚动在我的 Web 应用程序中停止工作。我读过最新的 Firefox ( [https://wiki.mozilla.org/Gecko:Mouse_Wheel_Scrolling](https://wiki.mozilla.org/Gecko:Mouse_Wheel_Scrolling) ) 中的鼠标滚轮事件发生了一些变化，但我不知道为什么它会阻止我的 iframe 滚动。也许是因为我使用 JavaScript 自动创建了这个 iframe。滚动在最新版本的 Chrome 和旧版本的 Firefox 中有效。

**jQuery :**

```
 var iframe = $(document.createElement("iframe")).attr("src", $(this).attr("href")+"&without_js=1")
      .css({"border": "0", "width": "100%", "height": ($(window).height() - 100 - 100)+"px", "overflow":"scroll"})
      .attr("id", "zaplanowanie_przegladu_frame").attr("name", "table_frame").hide().appendTo($("body")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:05:07.927

I am experiencing a similar issue. I am placing scrolling on the body attribute of the iframe though. It was working prior to FF17\. I will try to pull together a lowest common denominator reproduction of the bug.

I found someone reporting a similar issue on the mozilla support site: [http://support.mozilla.org/en-US/questions/942843](http://support.mozilla.org/en-US/questions/942843)

# jsp - 使用jsp发送邮件

> ID：13687845
> 
> 赞同：0
> 
> 时间：2012-12-03T16:45:40.780
> 
> 标签：jsp

> **可能重复：**
> [如何从 jsp/servlet 发送电子邮件？](https://stackoverflow.com/questions/3757442/how-to-send-an-email-from-jsp-servlet)

是否可以使用 jsp 页面将电子邮件从邮件 ID 发送到其他邮件 ID？我开发了一个投诉管理系统，用户可以通过提供详细信息来提交投诉，然后生成投诉编号。但我需要确保用户提供正确的电子邮件 ID。

所以我想将投诉号码发送到用户在表单中输入的电子邮件 ID。我不知道如何使用 jsp 向 id 发送邮件，我已经用谷歌搜索过，但不幸的是没有找到任何有用的解决方案。我正在使用 jsp 和 java 来开发应用程序。

如果有人可以帮助我，我将非常感激，我为糟糕的写作道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:28:09.477

尝试这个：

```
<%@ taglib uri="http://jakarta.apache.org/taglibs/mailer-1.1" prefix="mt" %>
<mt:mail session="java:/comp/env/mail/Session" to="foo@home.net" from="registration@mydomain.de" subject="Registration Confirmation">
    <mt:message type="html"><h1>Perfect</h1>Super</mt:message>
    <mt:send/>
</mt:mail> 
```

因此，您的 /META-INF/context.xml 必须包含：

```
<?xml version='1.0' encoding='utf-8'?>
<Context>
  <Resource name="mail/Session" 
     auth="Container"
     type="javax.mail.Session"
     username="webmaster@mydomain.de"
     password="password"
     mail.debug="true"
     mail.user="webmaster@mydomain.de"
     mail.from="registration@mydomain.de"
     mail.transport.protocol="smtp"
     mail.smtp.host="smtp.strato.de"
     mail.smtp.auth="true"/>
</Context> 
```

并且 /WEB-INF/web.xml 必须包含：

```
...
    <resource-ref>
       <res-ref-name>mail/Session</res-ref-name>
        <res-type>javax.mail.Session</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
</web> 
```

**注意：** context.xml 如果不存在，将被复制到 jboss-server 中。这就是应用程序服务器不同环境配置（实时、测试、登台）的方式。

**注意：** 你需要在你的 tomcat/lib 目录中的 mail.jar、mailer-1.1.jar 和 mail-1.4.4.jar（因为即使不再部署应用程序，context.xml 也将可用。）

# jquery - 当我“添加到主页”时，js 触发器（创建）不起作用

> ID：13687847
> 
> 赞同：1
> 
> 时间：2012-12-03T16:45:49.093
> 
> 标签：jquery, triggers, safari

我做了一个这样的脚本：

```
$("#last").bind("change", function() {
    var myselect = document.getElementsByTagName("select");
    var numselect = myselect.length;
    var oldid = "select-" + numselect;
    var newidslider = "slider-" + (numselect + 1);
    $('#last').attr('name', oldid);
    $('#last').attr('id', oldid);
    $('#last').selectmenu("refresh", true);
    $('#selects').append('<label for="last" class="select">scegli personaggio:</label><select name="last" id="last"><option value="pippo">pippo</option><option value="pluto">pluto</option><option value="paperino">paperino</option><option value="topolino">topolino</option></select><div class="spazio"></div><input type="range" name="' + newidslider + '" id="' + newidslider + '" value="50" min="0" max="100"/>').trigger('create');
}); 
```

当我使用 app safari mobile 或 chrome mobile 时它工作正常，但是当我在“添加到主屏幕”后访问我的网站时，js 不起作用！有谁知道这个问题！我被困在这种情况下！感谢关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:47:20.383

**委托活动**

```
$("#last").bind("change" , function() { 
```

应该是

```
$("body").on("change" ,"#last" , function() { 
```

当事件处理程序关联时，该元素在 DOM 中不可用。将事件委托给静态父级应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:03:34.290

我不确定与移动设备或“添加到主屏幕”有什么关系，但该代码中有几行可能会导致问题。我只是在阅读代码，我没有运行它，所以我可能是错的。

```
$('#last').selectmenu("refresh", true); 
```

这将找不到任何要操作的元素，因为上一行已经更改了项目的 ID，因此它不再是“最后一个”。

```
$('#selects').append(..... 
```

正在创建一个 ID 为“last”的新元素，但如果您希望它也获得 onChange 函数，则必须再次附加它。最初的 bind() 调用只对运行时 ID 为“last”的项目进行操作。

# visual-studio-2010 - “HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\SharePointTools”未显示在注册表中

> ID：13687848
> 
> 赞同：0
> 
> 时间：2012-12-03T16:45:59.090
> 
> 标签：visual-studio-2010, sharepoint-2010

我正在尝试更改注册表项 -

```
"HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\SharePointTools". 
```

但是 SharePointTools 没有出现在我的注册表中。

我的机器上确实安装了 Sharepoint 2010。是否会有任何设置更改或没有显示的任何原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:50:47.713

这种密钥对任何用户都应该是相同的。所以它存储在 HKLM，而不是 HKCU。还要注意 64 位操作系统，Visual Studio 是 32 位程序，因此密钥存储在 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\SharePointTools 中。注意添加的 Wow6432Node。

# mongodb - 文档存储中缓存副本的名称是什么？

> ID：13687849
> 
> 赞同：1
> 
> 时间：2012-12-03T16:45:59.260
> 
> 标签：mongodb, naming, document-store, nosql

非技术性的命名问题：

我有一个文档，其中包含对另一个文档的引用。大多数时候我访问它我需要引用文档中的几个字段，所以我将它们存储在引用旁边以避免查找。

蒙哥示例：

汽车

```
{
  'color' : 'blue',
  'maker' : {
     '_id' : '1234',
     'name' : 'Ford'
  }
  ...
} 
```

制作者

```
{
  '_id' : '1234',
  'name' : 'Ford',
  'ceo' : 'Alan Mulally'
  ...
} 
```

所以 auto.maker.name 不是主要来源——它永远不应该被改变，除非制造商的名字被改变了，这是昂贵但非常罕见的。

你怎么称呼这个领域？我见过的最好的是“缓存”，但它非常超载，特别是在谈论数据存储时。有更好的术语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:24:47.883

老实说，你真的应该考虑改变你的模式以适应 NoSQL 的指导方针，特别是 Mongo。

您真的不想要一个架构，您必须在每个查询中查找内容。

如果你必须给它命名；我会将此数据命名为它所指向的内容；在这种情况下，您的 _id 是 marker_id 或至少让它引用您的辅助查找表，以便在您用于查询的代码中，您可以在特定列上编写通用条件，并且知道在哪里可以找到它的查找值。

# ruby - 如何使 JSON 保留类属性名称？

> ID：13687850
> 
> 赞同：0
> 
> 时间：2012-12-03T16:46:00.027
> 
> 标签：ruby, json

有没有办法让 JSON 生成的字符串保留属性名称？从这个模型：

```
class Person
    attr_accessor :name

    def self.json_create(o)
       new(*o['data'])
    end

    def to_json(*a)
       { 'json_class' => self.class.name, 'data' => [name] }.to_json(*a)
   end 
end 
```

JSON 生成此字符串：

```
{
    "json_class": "Person",
    "data": ["John"]
} 
```

但我想要一个这样的字符串：

```
{
    "json_class": "Person",
    "data":
    {
        "name" : "John"
    }
} 
```

有没有办法做到这一点并且仍然能够通过其名称访问属性？喜欢：

```
person.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:04:05.010

您可以传递完整的属性而不是指定“名称”：

```
def to_json(*a)
  { 'json_class' => self.class.name, 'data' => attributes }.to_json(*a)
end 
```

如果要过滤到特定属性，可以这样做：

```
def to_json(*a)
  attrs_to_use = attributes.select{|k,v| %[name other].include?(k) }
  { 'json_class' => self.class.name, 'data' => attrs_to_use }.to_json(*a)
end 
```

如果您只想使用“名称”，请写出来:)

```
def to_json(*a)
  { 'json_class' => self.class.name, 'data' => {:name => name} }.to_json(*a)
end 
```

**更新**

为了阐明如何使初始化程序来处理所有属性，您可以执行以下操作：

```
class Person
  attr_accessor :name, :other

  def initialize(object_attribute_hash = {})
    object_attribute_hash.each do |k, v| 
      public_send("#{k}=", v) if attribute_names.include?(k)
    end
  end

  def attribute_names
    %[name other] # modify this to include all publicly assignable attributes
  end

  def attributes
    attribute_names.inject({}){|m, attr| m[attr] = send(attr); m}
  end

  def self.json_create(o)
    new(o['data'])
  end

  def to_json(*a)
    { 'json_class' => self.class.name, 'data' => attributes }.to_json(*a)
  end 
end 
```

# spring - spring xml解析时出错

> ID：13687851
> 
> 赞同：1
> 
> 时间：2012-12-03T16:46:02.603
> 
> 标签：spring, dtd

我在我的 web 应用程序中使用了一个 spring xml 文件，其中我提到 doctype 是公开的。这是我在 xml 中的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>
</beans> 
```

这个xml在我使用tomcat服务器的本地机器上成功运行。但是相同的 xml 没有运行我使用 jboss 5.0.1 的 linux 服务器。它在启动服务器期间将错误抛出为 UnknownHost 异常：“www.springframework.org”。

知道我到底在哪里遗漏了什么吗？谢谢阿米特

# date - 通过学说在树枝页面中检索数据时转换日期错误

> ID：13687858
> 
> 赞同：0
> 
> 时间：2012-12-03T16:46:18.550
> 
> 标签：date, doctrine, twig, symfony-2.1

当我通过学说从数据库中检索树枝页面上的所有记录时，我才发现此错误

这是我的树枝代码：

```
 {% extends "gestionConferenceApplicationBundle::layout.html.twig" %}
{% block title "Hello " ~ name %}
{% block content %}
je suis un debutant
<table border=2 >
    <th>Numéro</th>
    <th>Titre</th>
    <th>Ville</th>
    <th>Lieu</th>
    <th>Date de début</th>
    <th>Date de fin</th>

    {% for item in conferences %}
    <tr>
        <td>{{ item.id }}</td>
        <td>{{ item.titre }}</td>
        <td>{{ item.ville }}</td>
        <td>{{ item.lieu }}</td>*
        <td>{{ item.dateDebut }}</td>
        <td>{{ item.dateFin }}</td>        
    </tr>     
     {% endfor %}
</table>
{% endblock %} 
```

日期错误：

这里是 ：

```
An exception has been thrown during the rendering of a template ("Catchable Fatal Error: Object of class DateTime could not be converted to string in C:\wamp\www\Symfony\app\cache\dev\twig\3c\dd\40a703549de9b8769fa40b82230e.php line 72") in gestionConferenceApplicationBundle:acceuil:acceuil.html.twig at line 19. 
```

你知道如何转换这个日期或其他任何东西吗

在 MySql 中我有 dateTime 字段，在学说中我有：

```
/**
 * @var \DateTime $dateDebut
 *
 * @ORM\Column(name="date_debut", type="datetime", nullable=false)
 */
private $dateDebut; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:01:56.800

我找到了我应该这样做的解决方案：

```
<td>{{ item.dateDebut|date('d/m/Y') }}</td>
    <td>{{ item.dateFin|date('d/m/Y') }}</td> 
```

# java - 是否有可能：通过方法调用触发 JButton 事件 - 而不是 JButton 点击 ？

> ID：13687864
> 
> 赞同：4
> 
> 时间：2012-12-03T16:46:36.157
> 
> 标签：java, swing, events, jbutton

是否可以通过方法调用触发事件？（连同点击）。下面是一个示例代码。它不是一个工作代码，它只是展示了我的想象。

```
import java.awt.event.*;
import javax.swing.*;

public class Game extends JFrame
{

    JButton leftButton = new JButton("left");
    JButton rightButton = new JButton ("right");

    private JButton Move(String moveClickString)
    {
        JButton chosenButton = new JButton();

        if (moveClickString.equals("left"))
        {
            chosenButton = leftButton;
        }
        if (moveClickString.equals("right"))
        {
            chosenButton = rightButton;
        }
        return chosenButton;
    }

    public void actionTrigger(JButton buttonClick)
    {
        buttonClick.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                Object buttonPressed = e.getSource();

                if (buttonPressed == leftButton);
                {
                    //do left
                }

                if (buttonPressed == rightButton);
                {
                    //do right
                }
            }
        });
    }

    public static void main(String[] args)
    {
        Game game = new Game();
        game.setVisible(true);

        game.actionTrigger(game.Move("left")); //some way to execute things?.
    }
} 
```

有什么方法可以执行吗？

实际上，当我试图解决我面临的问题时，我想到了这个想法。我发布了一个单独的[问题](https://stackoverflow.com/questions/13678897/send-and-listen-to-swing-events-through-lan-network-java)。

（关于之前发布的[问题](https://stackoverflow.com/questions/13678897/send-and-listen-to-swing-events-through-lan-network-java)）：就服务器客户端而言，我想实现这一点：

*   当客户端单击 GUI 中的按钮时。

*   发送到服务器端的字符串“A”。

*   当服务器从客户端接收到字符串“A”时，它会调用“methodA”；methodA 调用将
    影响服务器端的 GUI。以便客户端和服务器 GUI 相应更新。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T17:04:51.030

`JButton`有一个`doClick()`方法继承自`AbstractButton`.

[http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#doClick](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#doClick)

这意味着你可以简单地写

```
game.leftButton.doClick(); 
```

# c# - 用户选择面数的模辊

> ID：13687870
> 
> 赞同：1
> 
> 时间：2012-12-03T16:47:06.560
> 
> 标签：c#, random, dice

我是编程新手，我正在尝试用 C# 构建一个掷骰子游戏。

程序会询问用户的边数，然后用随机数掷骰子。

我有以下伪代码：

1.  向用户询问边数。
2.  用随机数滚动骰子，最大范围是边数。
3.  告诉用户滚动的数字

我的问题是如何在用户指定的范围内生成随机数来掷骰子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:51:19.627

该类[`System.Random`](http://msdn.microsoft.com/en-us/library/ts6se2ek.aspx)通常用于生成随机随机数。

它有一个方法的重载，该方法[`Next`](http://msdn.microsoft.com/en-us/library/zd1bc8e5.aspx)生成一个大于或等于`0`并严格小于传递的整数参数的随机整数。

因此，如果用户选择了一个`n`单面骰子，并且您有一个`Random` `r`,

```
r.Next(n) + 1 
```

将生成一个介于两者之间的随机`1`整数`n`。

创建单个实例`Random`并重用它是一种很好的做法，因为如果您创建多个实例并在一起，它们都会生成相同的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:50:26.043

```
Random random = new Random();
int randomNumber = random.Next(1, userInput); 
```

你要知道的一件事是随机函数不是完全随机的，它是随机的，但每次都以相同的随机顺序..我会让你在你最喜欢的搜索引擎上寻找种子;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:49:36.917

要获得 0 到 100 之间的随机整数，但不包括 100：

```
Random random = new Random();
int randomNumber = random.Next(0, 100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:50:18.863

```
public int RollDice(int iNoSides)
{
  var rand = new Random();
  return rand.Next(iNoSides) + 1
} 
```

一个简单的谷歌`random number c#`就会或多或少地得到这个确切的代码。

**编辑**

您可以从其他答案和评论中获得指向 MSDN 文档的链接，我知道您是编程新手，但最好的学习方法是尽可能努力地获得一些东西。如果您的大脑无法再正常工作，将您的尝试与您的问题发布在 Stack 上，通常会让人们更开心，因为他们是在真正帮助陷入困境的人

**编辑 2**

在@Rawling 的评论之后，我意识到方法的重载状态`Next(n)`返回 a `Non-negative number less than the specified maximum`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T16:50:25.380

[System.Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)，特别是[System.Random.Next(Int32, Int32)](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)应该让你开始。

```
Random.Next(Int32, Int32)
Returns a random number within a specified range. 
```

# java - 来自 ImageView 的 Android 分辨率独立位图

> ID：13687874
> 
> 赞同：0
> 
> 时间：2012-12-03T16:47:45.380
> 
> 标签：java, android, android-imageview

我有一个高度和宽度均为 1200 像素的位图。我把它放在 ImageView 中。我的应用程序要求稍后我从 ImageView 中获取位图，以便在放入 ImageView 时获得相同质量的位图。如果我对布局使用 getDrawingCache 进行操作，我会得到糟糕的图像，因为我必须缩放到位图的原始大小并且会出现质量损失。

那么有没有任何独立于分辨率的方法来从 ImageView 中获取原始大小的图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:50:36.600

只需使用该`getDrawable`功能。

```
Drawable image=imageview.getDrawable () 
```

# matlab - 随机采样的 3d 矢量场的 Matlab 散度

> ID：13687875
> 
> 赞同：1
> 
> 时间：2012-12-03T16:47:53.290
> 
> 标签：matlab, vector, octave

我试图`divergence`在未排序的数据集上使用 Matlab 中的函数。因此，我有向量（3 列）原点的 x、y、z 位置和向量场（3 列）的三个分量 Fx、Fy、Fz，总共有 6 列数据集，其中位置是 3d 体积中的随机点。我应该如何转换数据以使其可读`divergence`？

我想我应该使用`meshgrid`并生成与我的原始随机点相关联的有序网格，但是我应该如何处理向量场 F？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:54:43.557

你是对的，使用网格来生成统一的数据点，然后如果你的数据表现良好，你应该能够使用 interp3 进行插值。

```
FinterpX = interp3(Xmeas,Ymeas,Zmeas,FmeasX,Xgrid, Ygrid, Zgrid);
FinterpY = interp3(Xmeas,Ymeas,Zmeas,FmeasY,Xgrid, Ygrid, Zgrid);
FinterpZ = interp3(Xmeas,Ymeas,Zmeas,FmeasZ,Xgrid, Ygrid, Zgrid); 
```

但是，由于 interp3 对它们施加的限制，您的随机数据点可能无法很好地使用这种方法。

# performance - 使 excel dsum 更快的任何提示？

> ID：13687876
> 
> 赞同：0
> 
> 时间：2012-12-03T16:47:59.353
> 
> 标签：performance, excel, worksheet-function

我目前正在使用 dsum 来计算一些总数，我注意到 excel 变得非常慢（每个单元格更改需要 2 秒）。

这是这种情况：

```
- I am trying to calculate 112 dsums to show in a chart;
- all dsums are queries on a table with 15 columns and +32k rows;
- all dsums have multiple criteria (5-6 constraints);
- the criteria uses both numerical and alpha-numerical constraints;
- i have the source table/range sorted;
- excel file is 3.4 mb in size; 
```

（我在一台 4 岁的 Windows 笔记本电脑上使用 excel 2007）

关于可以做些什么来加快速度的任何想法？

...除了减少 dsum 的数量：P ====>>> 已经在处理那个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:26:29.630

一些选项是：

将 Calculation 更改为 Manual 并在要计算时按 F9

尝试 SUMIFS 而不是 DSUM

利用 MATCH 和 COUNTIF 对数据进行排序的事实来查找第一行和行数，然后使用 OFFSET 或 INDEX 获取相关的数据子集以提供给 SUMIFS 以获取剩余约束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:10:34.927

除了 DSUM，您还可以将其全部放在一个或多个数据透视表中 - 然后使用 GETPIVOTDATA 提取您需要的数据。表格的读取将占用一些时间（尽管 32k 行应该在 1" 以下完成） - 然后 GETPIVOTDATA 快如闪电！

缺点：

*   获取新数据时需要手动刷新数据透视表
*   需要布置枢轴，以便显示请求的数据
*   文件大小会增加（除非不存储 Pivot 缓存，否则文件加载需要更长的时间）

# python - Django 管理页面缺少图像/css/js

> ID：13687880
> 
> 赞同：0
> 
> 时间：2012-12-03T16:48:09.680
> 
> 标签：python, django

我发现了一些关于我的问题的问题，您的解决方案对我没有帮助，所以我开始了一个新问题。基本上这就是我看到管理页面的方式 ![没有css/没有js/没有图片](../Images/3d1efd9f426da8ae574b7c7a40a17a2b.png)

阿帕奇的配置：

```
<VirtualHost *.*.*.*:80>
    ServerName ********.org
    ServerAdmin ****@******.org

    WSGIScriptAlias / /var/www/webproxy/webproxy/wsgi.py

    DocumentRoot /var/www/cgi-bin/
    ScriptAlias /cgi-bin/ /var/www/cgi-bin/

    ErrorLog /var/www/webproxy/apache/error.log

LogLevel warn

CustomLog /var/www/webproxy/apache/access.log combined

Alias /media/ "/var/www/webproxy/media/"

<Directory "/var/www/webproxy/media/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Allow from all
</Directory>

<Directory "/var/www/webproxy/static/">
    Order deny,allow
    Allow from all
</Directory> 
```

这就是我在 urls.py 中的内容：

```
from django.conf.urls.defaults import *
from django.contrib import admin
admin.autodiscover()

from core import urls as core_urls

from settings import MEDIA_ROOT, WEBPROXY_MEDIA_ROOT

urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': MEDIA_ROOT}),
    (r'^ui/(?P<path>.*)$', 'django.views.static.serve', {'document_root': WEBPROXY_MEDIA_ROOT}),
) 
```

设置.py：

```
MEDIA_ROOT = '/var/www/webproxy/media/'
STATIC_ROOT = '/var/www/webproxy/static/'
WEBPROXY_MEDIA_ROOT = '/var/www/webproxy/static/media/' 
```

我不确定这里有什么问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:58:09.660

首先，您不应该`django.views.static.serve`在生产环境中提供静态文件，因为这*仅*用于本地开发（[在此处](https://docs.djangoproject.com/en/dev/howto/static-files/#django.views.static.serve)阅读文档）：

> 除了项目的静态资产之外，可能还有其他文件，为了方便起见，您希望 Django 在本地开发中为您服务。

其次，您的 Django Admin 静态文件位于 Django 的安装位置下。我发现直接使用这些文件比在我自己的静态文件目录下复制（或符号链接）Django 管理静态文件更好。

我的服务器上的示例 Django 静态文件位置：

```
/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static/admin/; 
```

因此，在您的网络服务器配置中，您必须将 url`/media/admin`指向

```
[my_django_location]/contrib/admin/static/admin/ 
```

如果您在本地做事，那么您可能需要在您的`urls.py`：

```
(r'^admin/static/(?P<path>.*)$', 'django.views.static.serve', '/path/to/your/admin/files/'), 
```

# excel - Excel 中 (m/d/yyyy h:mm) 时间戳的每日和每小时平均值

> ID：13687881
> 
> 赞同：0
> 
> 时间：2012-12-03T16:48:14.027
> 
> 标签：excel, date, timestamp, excel-2007, average

我有一个 Excel 2007 电子表格，其中包含这种格式的日期条目`m/d/yyyy h:mm`（一个单元格）。我想找到这个电子表格所有列的每小时和每天的平均值，并将每次聚合保存到一个新的工作表中。

数据每约 10 分钟记录一次，但在整个数据收集日期中存在一些时间偏差。并非每个小时都有相同的行数。此外，根据时间校正，结束分钟为 0 或 6。

在 Excel 2007 中处理此任务的好方法是什么？如果我可以创建一个公式来为时间戳选择正确的范围，这似乎可以通过数据透视表实现。谢谢。

例如，TIMESTAMP 中的日期时间条目，`10/31/2012 0:06`它位于一个单元格中。

```
TIMESTAMP Month Day Year Hour Min Rain_mm Rain_mm_2 AirTC AirTC_2 FuelM FuelM_2 VW ... there are ~16 variables (total) after the data time
10/31/2012 0:06 10 31 2012 0 06 0 0 26.11 26.08 2.545 6.4 0.049
10/31/2012 0:16 10 31 2012 0 16 0 0 25.98 25.97 2.624 6.6 0.049
10/31/2012 0:26 10 31 2012 0 26 0 0 24.32 23.33 2.543 6.5 0.048
10/31/2012 0:36 10 31 2012 0 36 0 0 24.32 23.33 2.543 6.5 0.048
10/31/2012 0:46 10 31 2012 0 46 0 0 24.32 23.33 2.543 6.5 0.048
10/31/2012 0:56 10 31 2012 0 56 0 0 25.87 25.87 2.753 7.3 0.049
10/31/2012 1:06 10 31 2012 0 06 0 0 25.74 25.74 2.879 8.1 0.051
## The above is just over one hour of collection on one day ##
...    
## Different Day ### Notice Missing Time Stamp
11/30/2012 0:00 11 30 2012 0 06 0 0.1 26.12 26.18 2.535 6.4 0.049
11/30/2012 0:10 11 30 2012 0 16 0 0.1 25.90 25.77 2.424 6.6 0.049
11/30/2012 0:20 11 30 2012 0 26 0.1 0.2 24.12 24.43 2.542 6.4 0.046
11/30/2012 0:30 11 30 2012 0 36 0.1 0 24.22 22.32 2.543 6.5 0.048
11/30/2012 0:50 11 30 2012 0 56 0.1 0.2 26.77 25.87 2.743 6.3 0.049
11/30/2012 1:00 11 30 2012 0 06 0 0 24.34 24.77 2.459 5.1 0.050
## so forth on so on ## 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:28:13.390

在澄清每日平均值的要求后，编辑为涵盖每日平均值和每小时平均值：

1.  为“H”（即小时）添加一列（此处`B`）`=HOUR(A2)`并向下复制。

（注意：虽然格式化为仅显示 is 的 m/d/y 内容，`ColumnA`但与标题一致，假定全部为 mm/dd/yyyy hh:mm。使现有列 [名称混乱] 月、日、年、小时冗余）。

2.  选择数据范围。
3.  **数据**，**小计**，**每次更改时：** TIMESTAMP，**使用函数：**平均，**添加小计：**仅检查列`G`和右侧，**确定**。
4.  取消选中**Replace current subtotals** in Subtotal and apply **At each change in:** H, **Use function:** Average, 和**Add subtotal to:** *as before* , **OK**。
5.  用 替换`=SUBTOTAL(1,`Min 列`=MIN(`。
6.  删除“备用”`Grand Average`行。
7.  根据需要重新格式化。

希望这将实现并且是所需要的！：

![SO13731807 示例](../Images/f430c5857d7b2828540d60090a4ff3c3.png)

请注意，午夜“今晚”计入明天的第一个小时内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T08:13:12.597

我有类似的需求并以这种方式解决了它：

1.  **为日期**添加一列（假设您的 dd/mm/yyyy hh:mm:ss 数据在单元格 A2 中）

    ```
    =DATE(YEAR(A2),MONTH(A2),DAY(A2)) 
    ```

2.  **为Year**添加一列。如果一年中有几周，则可以忽略年份列。

    ```
    =YEAR(A2) 
    ```

3.  **为周数**添加一列

     **```
    =WEEKNUM(A2) 
    ```** 
***   添加 2 个数据透视表，1 个用于每日分析，1 个用于每周分析。*   选择字段“日期”和您想要的数量。将“日期”放在“**行**”部分中，并将值的总和/平均值放在“**值**”部分中。您将获得所需值的日期总和/平均值。*   **在每周数据透视表中，执行与上述相同的操作，只需在“行**”部分添加“年份”和“无周”，而不是上面的“日期”。
    希望这可以帮助**

# vb.net - 控件的“内部尺寸”

> ID：13687882
> 
> 赞同：3
> 
> 时间：2012-12-03T16:48:13.690
> 
> 标签：vb.net, controls

在 vb.net 中，获取“内部大小”的控件的属性是什么？我的意思是控件应该具有的大小不显示滚动条。我想按照以下标准调整表单的大小：

- 如果内部尺寸太小，请使用默认表格尺寸。

- 如果内部大小在给定范围之间，则调整表单大小以使滚动条消失。

- 如果内部尺寸太大，请为表单设置最大尺寸并保持滚动条。

我正在使用[Devexpress LayoutControl](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraLayoutLayoutControltopic)。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:12:12.330

您可以使用`ClientSize`控件的属性（我强调）。

> 控件的客户区是控件的边界，**减去滚动条、边框、标题栏和菜单等非客户元素**。调用 SetClientSizeCore 方法来设置 ClientSize 属性。ClientSize 属性并不总是通过其 set 方法更改，因此您应该重写 SetClientSizeCore 方法以确保在设置 ClientSize 属性时执行您的代码。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.clientsize%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.clientsize%28v=vs.80%29.aspx)

# php - Yii 标准使用

> ID：13687890
> 
> 赞同：1
> 
> 时间：2012-12-03T16:48:42.230
> 
> 标签：php, sql, yii, criteria

我有两张桌子`country`和`user`.

在模型`country`中我有关系：

```
'users' => array(self::HAS_MANY, 'User', 'country_id') 
```

我想找到至少有一个用户的所有国家。如果没有来自德国的用户，德国将被排除在结果之外。

试过这个：

```
$criteria = new CDbCriteria();
$criteria->join = 'INNER JOIN user ON country.id = user.country_id';
$criteria->order = 'name ASC';
$countries = country::model()->findAll($criteria); 
```

但结果我拥有了所有国家。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:47:37.347

```
$criteria = new CDbCriteria();
$criteria->with = array('users');
$criteria->addCondition('users.id IS NOT NULL');
$countries = Country::model()->findAll($criteria); 
```

或者

```
$countries = Country::model()->with('users')->findAll('users.id IS NOT NULL'); 
```

请注意，我假设`users`表中的主键是`id`. 将其更改为您的情况。

# iphone - 将应用程序提交到 itune 连接时使用不同的默认语言，然后是英语（未找到应用程序记录。）

> ID：13687894
> 
> 赞同：0
> 
> 时间：2012-12-03T16:48:53.023
> 
> 标签：iphone, ios, xcode, ipad, app-store-connect

我正在尝试使用不同的默认语言在应用程序中提交，然后在 iTunes 连接中使用英语，但是当我尝试通过 xcode 验证或提交应用程序时，我收到此错误：

没有找到申请记录。应用程序必须准备好上传到 iTunes Connect，然后才能在 Xcode 中进行验证或提交。

你们中的任何人都知道我做错了什么吗？或者我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:55:04.303

这与您的默认语言无关 - 您必须在 iTunes Connect 中实际创建一个应用程序和一个版本，然后才能提交您的二进制文件。后者应该有一个与您在项目设置中输入的版本号相匹配的版本号。

# java - @TableGenerator：如何使用

> ID：13687898
> 
> 赞同：5
> 
> 时间：2012-12-03T16:49:15.887
> 
> 标签：java, hibernate, annotations

我将尝试使用表生成器生成主键。但是当我在我的表中插入 6 条记录时，primaryKey 表只显示一个值。这是以下代码

我的实体类

```
package com.generatorvaluetest.domain;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.SequenceGenerator;
import javax.persistence.TableGenerator;

@Entity
public class Snufu {
private int autoId;
private int identityId;
private int sequenceId;
private int tableId;
private String name;
public int getAutoId() {
    return autoId;
}
public void setAutoId(int autoId) {
    this.autoId = autoId;
}
public int getIdentityId() {
    return identityId;
}
public void setIdentityId(int identityId) {
    this.identityId = identityId;
}
public int getSequenceId() {
    return sequenceId;
}
public void setSequenceId(int sequenceId) {
    this.sequenceId = sequenceId;
}

@Id
@TableGenerator(name="tg" , table="pk_table", pkColumnName="name" , 
valueColumnName="vlaue" , allocationSize=10)
@GeneratedValue(strategy=GenerationType.TABLE , generator="tg")
public int getTableId() {
    return tableId;
}
public void setTableId(int tableId) {
    this.tableId = tableId;
}

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
  } 
```

这是我的主要课程

```
 package com.generatorvaluetest.main;

 import org.hibernate.HibernateException;
 import org.hibernate.Session;

 import com.generatorvaluetest.domain.Snufu;
 import com.generatorvaluetest.util.HibernateUtil;

 public class GeneratorValueTest {
public static void main(String[] args) throws HibernateException{
    HibernateUtil.recreateDatabase();
    Session session = HibernateUtil.beginTransaction();
    for(int i = 0 ; i< 5 ; i++){
        Snufu snufu = new Snufu();
        snufu.setName("jimmy"+i);
        session.saveOrUpdate(snufu);
    }

    new Thread(new Runnable() {

        @Override
        public void run() {
            Session session = HibernateUtil.beginTransaction();
            Snufu snufu = new Snufu();
            snufu.setName("jimmykalra");
            session.saveOrUpdate(snufu);
            HibernateUtil.commitTransaction();
        }
    }).start();
    HibernateUtil.commitTransaction();
}
  } 
```

在数据库中，当我从 pk_table 中选择值时，这些值是

```
|name | value|
|snuf | 1    | 
```

但在 snufu 表中有 6 条记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:16:01.957

`valueColumnName`与指定的表相比，for 的值拼写错误。也没有提到要引用哪一行来获取键，由列 value( `pkColumnValue`) 标识。

以下是示例代码，可以参考`TableGenerator` [文档](http://docs.oracle.com/javaee/6/api/javax/persistence/TableGenerator.html)，以供进一步参考。

```
TableGenerator(name="tg" , table="pk_table", pkColumnName="value" , 
valueColumnName="name" , pkColumnValue = "snuf", allocationSize=10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-12T21:00:04.867

`@TableGenerator`在您的表中已插入 6 条记录时，在表中看到值 1 可能会产生误导`@Entity`，但解释非常简单。您已经`@TableGenerator`使用`allocationSize=10`. 这意味着：Hibernate 已经预先分配了从 1 到 9 的 ID，一旦第 9 条记录插入到您的`@Entity`表中或您重新启动应用程序，下一个生成的 ID 将是 10 ( `pk_table.value * allocationSize`)。此外，在`ID=10`插入应用程序重新启动后的一行或下一行之前，`pk_table.value`将增加 1，因此当这下一个 10 块耗尽或您再次重新启动应用程序时，ID 生成将在 20 (2 * 10) 处恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T06:19:53.093

将此代码放在您的主键列定义中

```
@TableGenerator(
            name="empGen", 
            table="ID_GEN", 
            pkColumnName="GEN_KEY", 
            valueColumnName="GEN_VALUE", 
            pkColumnValue="EMP_ID", 
            allocationSize=1)

    @Id
    @GeneratedValue(strategy=TABLE, generator="empGen")
    int id; 
```

您可以在其中提供任何值以识别 pkColumnValue 字段中的特定表。

有关这方面的更多信息，请参阅以下墨水中的@TableGenerator 文档 [http://docs.oracle.com/javaee/6/api/javax/persistence/TableGenerator.html](http://docs.oracle.com/javaee/6/api/javax/persistence/TableGenerator.html)

# javascript - 如何跟踪画布中的元素位置？

> ID：13687900
> 
> 赞同：0
> 
> 时间：2012-12-03T16:49:21.120
> 
> 标签：javascript, gwt, canvas

如果我在画布中绘制一个新元素，如何保存该元素的位置？

```
Context2d context = canvas.getContext2d();
context.setStrokeStyle("black");
context.arc(50, 50, 20, 0, Math.PI*2);
context.stroke(); 
```

或者更重要的是：我如何才能跟踪我创建的元素*？*我必须将它们放在某种堆栈上吗？如何保存刚刚创建的圆形元素以供以后参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:57:27.793

我的理解是，您不会像更改画布那样将对象保存到画布。您创建的圆圈仅作为画布的一组命令存在，如果您希望以某种方式存储它，则需要创建一个存储它的对象。

当我在学习画布并编写一个小游戏时，我会创建一个具有`draw(Canvas c)`功能的对象。在该函数中，我将执行在画布上绘制所需的任何操作，并维护稍后可以调用的 X、Y 坐标。

```
public class SomeDrawableObject implements Drawable {
  private float X;
  private float Y;

  public SomeDrawableObject(float X, float Y) {
    this.X = X;
    this.Y = Y;
  }

  @Override
  public void draw(Canvas c) {
    c.drawCircle(...);
    //or c.drawWHATEVER(...);
  }

  public float getX() {
    return X;
  }
  //etc.
} 
```

然后从任何修改画布的类中，您可以维护一个集合`SomeDrawableObject`并了解已放置在画布上的所有内容，并调用位置/颜色/您存储在类中的任何内容。您也可以扩展类等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:07:50.447

绘画是短暂的：一旦你画了它，它就消失了。将您的形状对象存储在其他地方。然后，当您调用您的绘图方法时，使用对您的形状对象的引用，检索它们的参数。

# django - 带有 Whoosh 的 Django Haystack：索引/搜索时忽略字符

> ID：13687901
> 
> 赞同：0
> 
> 时间：2012-12-03T16:49:23.180
> 
> 标签：django, django-haystack, whoosh

我正在使用 haystack 和 whoosh 在我的网站上提供搜索，但是，我需要索引单词中间有方括号或其他字符的单词（例如“fo[oba]r”） - 有没有办法让索引忽略这些字符（并索引为“foobar”），或者在搜索时允许它们？我可以使用 Whoosh 完成此任务，还是另一个后端会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:33:10.910

有几种方法可以实现这一点 - 基本上你想要做的是去掉索引内容中的方括号，你可以做到这一点的一种方法是在模型上编写一个方法来返回字段的修改内容'重新索引，然后在您的搜索模板中使用它。

# php - 使用 php/mysql 中的子字符串在日期之间搜索

> ID：13687903
> 
> 赞同：0
> 
> 时间：2012-12-03T16:49:26.237
> 
> 标签：php, mysql, date, search

我正在尝试在 mysql 数据库中搜索日期之间的所有约会。日期采用这种格式。

```
 2012-07-26 
```

这是我用来从另一个页面上的下拉选择框中选择相关约会的代码。

```
 AND SUBSTRING(startDate, 6, 2) >= $month
    AND SUBSTRING(startDate, 6, 2) <= $month2 
    AND SUBSTRING(startDate, 9, 2) <= $day 
    AND SUBSTRING(startDate, 9, 2) <= $day2 
```

我遇到的问题是，如果我选择像 02 这样的一天，那么任何月份的结果都只会比 02 早几天。而我需要更多类似的东西；

```
 SUBSTRING(startDate, 6, 5) <= '$month2'-'$day2' 
```

我只是不确定如何正确表达它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:53:08.220

您应该使用 MySQL 的日期函数，而不是`SUBSTRING`假设您的列属于`DATE`或`DATETIME`类型。

相关日期函数：

*   `DAY()`
*   `MONTH()`

新代码：

```
AND MONTH(startDate) >= $month
AND MONTH(startDate) <= $month2
AND DAY(startDate) <= $day
AND DAY(startDate) <= $day2 
```

您也可以使用`BETWEEN`运算符。

[文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:56:09.863

为什么不这样：

```
SELECT ...
WHERE startDate BETWEEN '2012-07-25' AND '2012-07-27' 
```

或者如果您需要动态范围

```
WHERE startDate BETWEEN (now() - INTERVAL 1 WEEK) AND (now() + INTERVAL 1 WEEK) 
```

通常不需要对日期值进行字符串操作。MySQL 有一组非常好的[日期操作/检索/格式化函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，可以处理几乎所有事情。

# ruby-on-rails - 如何按特定顺序显示查询的记录

> ID：13687906
> 
> 赞同：2
> 
> 时间：2012-12-03T16:49:35.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`Topic`我在和之间有 HABTM 关系`Chapter`现在我想在主题下按特定顺序显示章节。

例如：特定章节可能是一个主题下的第 2 章，也可能是另一个主题下的第 8 章。

我应该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:02:08.027

在这种情况下，您有一个重要的多对多关系，连接表需要包含的不仅仅是每个主表的外键。

因此，您需要从 HABTM 移至`has_many :through`Topic 和 Chapter，并将连接表更改为自己的模型，不仅将两个主表相互关联，而且将顺序存储在列中 (顺便说一句，你不应该*命名*“订单”，因为它会混淆 SQL 和 Rails :-)。

从标准 Rails HABTM 模型转换非常容易，但有一点建议：想想是什么让过去只是一个连接表成为真正的模型......并将其用作新模型的名称（以及关联的新表）。在一个简单的 HABTM 中，您将创建一个 table `chapters_topics`，当它成为一个模型时，它可能是“ChapterTopic”（产生一个 table `chapter_topics`）。

# sql - 更改 ASP 页面中 SQL 查询的结果以包含特定列的链接

> ID：13687910
> 
> 赞同：0
> 
> 时间：2012-12-03T16:49:39.777
> 
> 标签：sql, asp-classic

抱歉，这是一个令人费解的问题。我在 ASP 网页中有一个 SQL 查询，它将数据集返回到页面中的 webgrid。看起来像这样：

[此处为 ASP 网页中的数据集/Webgrid 输出的图片](https://www.dropbox.com/s/myp3cey3431xt8v/webgrid.png)

我希望能够采用“社区”列并保持输出相同，但根据列出的特定社区将输出变成指向软件客户端的链接。我们有一个简短的列表（可能总共 4-5 个），所以这意味着只有 4-5 个不同的下载。

此外，我可能需要为操作系统添加一个字段，因为每个操作系统（Mac / Windows）都有不同的下载。我假设如果我可以为一个列设置逻辑，我可能可以为另一列重复该逻辑。

关于我如何解决这个问题的任何想法？我只是不确定如何恰当地表达这个问题，但我认为这可能会更清楚。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T01:28:49.467

你需要做的是

```
SELECT account, telephone, "<a href='"+communityURL+"'>"+community+"</a>" as CommunityCol, status
FROM myTable
ORDER BY account 
```

...因此，假设 URL 在 communityURL 中描述，您在 CommunityCol 列中获得的输出（从内存中您可能需要重命名它）是包含您需要的内容的串联字符串

# php - 带有条件查询的查询

> ID：13687912
> 
> 赞同：1
> 
> 时间：2012-12-03T16:49:55.733
> 
> 标签：php, mysql, sql

假设我在一个处理查询的 php 文件中有一个包含大量连接和子查询的查询。注意：我在底部放了一个 $query 的示例

```
$query = query here;
if ($query) {
            return $query->result();
        } else {
            return false;
        }
} 
```

然后在我处理html的php文件中，我有通常的foreach循环，其中一些条件需要进行其他查询，例如；注意：结果包含对象 $query->result()。

```
foreach ($results as $item) {
        $some_array = array();
        $some_id = $item->id;
        if ($some_id != 0) {
            //id_return_other_id is a function that querys a db table and returns the specified column in the same table, it returns just one field
            $other_id = id_return_other_id($some_id);
            $some_query = another  query that requires some joins and a subquery;
            $some_array = the values that are returned from some_query in an array
            //here i'm converting obj post into an array so i can merge the data in $some_array to item(Which was converted into an array) then convert all of it back into an object
            $item = (object)array_merge($some_array, (array)$item);
        }

//do the usual dynamic html stuff here.
} 
```

这很好用，但由于我不喜欢在循环中执行大量查询的方式，有没有办法在处理查询的文件中添加 if $some_id != 0 ？我试过了

```
$query = query here;
//declaring some array as empty when some_id is 0
$some_array = array();
if ($query) {
            if ($some_id != 0) {
            //same as i said before
            $other_id = $this->id_return_other_id($some_id);
            $some_query = some query;
            $some_array = array values gotten from some query;

        }
          $qresult = (object)array_merge($some_array, (array)$query->result);
          return $qresult;
        } else {
            return false;
        }
} 
```

由于明显的原因，这不起作用，有人有什么想法吗？

此外，如果有办法在 $query 本身中生成这些条件和查询，我会永远爱你。

Ps：演示查询类似于

```
 $sql = "SELECT  p.*,up.*,upi.someField,etc..
                    FROM    (
                             SELECT  (another subquery)
                             FROM    table1
                             WHERE   table1_id = 3
                             UNION ALL
                             SELECT  $user_id
                            ) uf
                    JOIN    table2 p
                    ON      p.id = uf.user_id
                    LEFT JOIN   table3 up
                    ON     .....
                    LEFT JOIN table4
                    ON     ....
                    LEFT JOIN table5
                    ON     ....
                    And so on..etc..
                    ORDER BY p.date DESC";
$query = mysql_query.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:50:00.627

似乎您只需要在查询文件中运行两个查询。第一个查询将获得您要查找的内容的广泛集合。第二个查询将查询结果中的 id 并执行新查询以获取有关该特定 id 的任何详细信息。我在我的应用程序的客户搜索页面中使用了类似的东西。

```
$output = array();

$query1 = $this->db->query("SELECT * FROM...WHERE id = ...");

foreach ($query->result_array() as $row1)
{
    $output[$row1['some_id']] = $row1;

    $query2 = $this->db->query("SELECT * FROM table WHERE id = {$row1['some_id']}");

    foreach ($query2->result_array() as $row2)
    {
        $output[$row1['some_id']]['data_details'][$row2['id']] = $row2;
    }
} 
```

然后在显示 html 的页面中，您只需要两个 foreaches：

```
foreach($queryresult as $key=> $field)
{
    echo $field['some_field'];

    foreach($child['data_details'] as $subkey => $subfield)
    {
        echo $subfield['some_subfield'];
    }
} 
```

我知道您正在使用对象，但您可以将其转换为使用该格式。我希望这有意义/有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:49:51.323

用这个

```
 if ($some_id !== 0) { 
```

代替

```
 if ($some_id != 0) { 
```

# c# - 带返回值的动态 Linq 表达式

> ID：13687914
> 
> 赞同：12
> 
> 时间：2012-12-03T16:50:03.843
> 
> 标签：c#, expression-trees

我需要创建一个动态 linq 表达式，并开始使用许多示例。我测试了一些，一些工作，一些没有。在这种情况下，我想创建一个如下所示的方法：

```
public bool Check(int intvar)
{
   if ( i > 2 )
     return true;
   else
     return false;
} 
```

现在我写了以下内容：

```
LabelTarget returnTarget = Expression.Label("label");
ParameterExpression para = Expression.Parameter(typeof(int), "intvalue");
Expression test = Expression.GreaterThan(para, Expression.Constant(5));
Expression iftrue = Expression.Return(returnTarget, Expression.Constant(true));
Expression iffalse = Expression.Return(returnTarget,                   Expression.Constant(false));
Expression.IfThenElse(test, iftrue, iffalse);

this.TheExpression = Expression.IfThenElse(test, iftrue, iffalse);
Expression.Lambda<Action<int>>(
this.TheExpression,
new ParameterExpression[] { para }
).Compile()(5); 
```

现在它抛出`InvalidOperationException`：

> 无法跳转到标签“标签”`

怎么了 ？我只需要返回真或假。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-03T17:14:48.723

你需要改变一些事情：

*   按照 René 的建议，将返回标签放在块表达式中的函数底部。这是您的`return`陈述将跳转的地方。

*   将 Lambda 声明为 type `Func<int, bool>`。由于您想要一个返回值，这需要是一个函数，而不是一个动作。

*   `returnTarget`将标签声明为 type `bool`。由于块表达式的返回值是其最后一条语句的值，因此标签必须是正确的类型。

*   为最终标签提供默认值（如果通过正常控制流而不是语句到达标签，则为函数的返回值`return`）。

    ```
    LabelTarget returnTarget = Expression.Label(typeof(bool));
    ParameterExpression para = Expression.Parameter(typeof(int), "intvalue");
    Expression test = Expression.GreaterThan(para, Expression.Constant(5));
    Expression iftrue = Expression.Return(returnTarget, Expression.Constant(true));
    Expression iffalse = Expression.Return(returnTarget, Expression.Constant(false));

    var ex = Expression.Block(
        Expression.IfThenElse(test, iftrue, iffalse),
        Expression.Label(returnTarget, Expression.Constant(false)));

    var compiled = Expression.Lambda<Func<int, bool>>(
        ex,
        new ParameterExpression[] { para }
    ).Compile();

    Console.WriteLine(compiled(5));     // prints "False"
    Console.WriteLine(compiled(6));     // prints "True" 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-13T08:50:46.647

如果您有这样的简单条件语句：

```
if (condition)
    return expression1;
else
    return expression2; 
```

您可以将其转换为三元表达式：`condition ? expression1 : expression2`. `Label`然后您可以不使用、`Return`或来创建表达式`Goto`。

```
Expression condition;
Expression expression1;
Expression expression2;
/* ... */
Expression body = Expression.Condition(
    test:    condition,
    ifTrue:  expression1,
    ifFalse: expression2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T17:03:56.973

`returnTarget`当前仅由您的 if/then/else 语句引用。标签没有放在语句中的任何地方。所以它不知道跳到哪里。标签仅被定义和引用，而不是放置。

尝试使用`Expression.Block`结合你的 lambda 和你的标签。

```
Expression.Lambda<Action<int>>(
    Expression.Block(
        this.TheExpression,
        Expression.Label(returnTarget)
    ),
    new ParameterExpression[] { para }
    ).Compile()(5); 
```

尚未对其进行测试，但这是您可以找到答案的大致方向。

-update- 对其进行了测试，上面的 lambda 编译并运行得很好，就像现在一样。

-update2- 显然，您也想返回一个值，让我看看，至少，它应该是 a`Func`而不是 an `Action`。

# javascript - Javascript表单验证不起作用

> ID：13687918
> 
> 赞同：0
> 
> 时间：2012-12-03T16:50:20.410
> 
> 标签：javascript, validation

它必须是一个小问题，但我找不到它。也许你们中的一个可以在这里帮助我。

**Javascript**

```
 function white_space(field)
  {
     field.value = field.value.replace(/^\s+/, "");
  }
  function validate(){
    var formname=document.reg_form;
    var fname=formname.fname.value;
    var mess="";

  var uname=formname.prodName.value;
    if(uname==""){
    mess= mess+"User Name cannot be blank\n";

    }
   var pass=formname.prodPrice.value;
    if(pass==""){
     mess= mess+"Password cannot be blank\n";   
}

if(mess){
  alert(mess);
  return false;

   }
 } 
```

**HTML 表格**

```
 <form class="form-signin" action="#" onSubmit="return validate();" name="reg_form">
    <h2 class="form-signin-heading">Sign-In</h2>
    <input type="text" class="input-block-level" name="prodName" placeholder="Email address" onKeyPress="white_space(this)">
    <input type="password" class="input-block-level" name="prodPrice" placeholder="Password" onKeyPress="white_space(this)">
    <label class="checkbox">
      <input type="checkbox" value="remember-me"> Remember me
    </label>

    <button class="btn btn-large btn-primary" type="submit">Sign in</button>
  </form> 
```

**错误**

![在此处输入图像描述](../Images/3756432f851715701b1755f11c2b8bca.png)

浏览器不显示空字符串错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:05:17.127

在你的情况下，这条线

```
var fname=formname.fname.value; 
```

在执行验证功能时抛出错误，因为表单中没有元素`fname`，注释它，你很好 [http://jsbin.com/oxawil/1](http://jsbin.com/oxawil/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:56:16.757

不知道什么是不可取的行为（您没有说），我猜这与 validate 函数成功时缺少正返回值有关。代码刚刚落下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T17:04:54.860

您可以使用 jQuery 来更轻松地选择 html 的各个部分。查看这个[jsFiddle](http://jsfiddle.net/j5fW3/)以获得有效的解决方案。

请注意，检查 javascript 中的值并假设这些值在您的安全级别中是正确的是不安全的。因此，如果输入有效，则提交表单并返回更为常见。

```
$.ajax('url', function(json) {
    var msg = '';
    switch(json.status) {
        case 'name':
            msg += 'name not set';
            break;
        case 'pwd':
            msg += 'password not set';
            break;
    }
    if(msg != '') {
        alert(msg);
    }
} 
```

# python - 给定索引和值列表，在嵌套 Python 字典中设置值

> ID：13687924
> 
> 赞同：41
> 
> 时间：2012-12-03T16:50:33.900
> 
> 标签：python, list, dictionary

我正在尝试以编程方式在字典中设置一个值，可能是嵌套的，给定一个索引列表和一个值。

例如，假设我的索引列表是：

```
['person', 'address', 'city'] 
```

值是

```
'New York' 
```

因此，我想要一个字典对象，例如：

```
{ 'Person': { 'address': { 'city': 'New York' } } 
```

基本上，该列表表示嵌套字典的“路径”。

我想我可以自己构建字典，但我遇到的问题是如何设置值。显然，如果我只是手动为此编写代码，它将是：

```
dict['Person']['address']['city'] = 'New York' 
```

但是，如果我只有索引和值的列表，我如何索引到字典中并以编程方式设置值？

Python

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-03T17:00:42.050

这样的事情可能会有所帮助：

```
def nested_set(dic, keys, value):
    for key in keys[:-1]:
        dic = dic.setdefault(key, {})
    dic[keys[-1]] = value 
```

你可以像这样使用它：

```
>>> d = {}
>>> nested_set(d, ['person', 'address', 'city'], 'New York')
>>> d
{'person': {'address': {'city': 'New York'}}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-15T02:45:40.287

[我从Bakuriu 的答案中](https://stackoverflow.com/a/13688108/3469861)自由地扩展了代码。因此，对此的支持是可选的，因为他的代码本身就是一个机智的解决方案，这是我没有想到的。

```
def nested_set(dic, keys, value, create_missing=True):
    d = dic
    for key in keys[:-1]:
        if key in d:
            d = d[key]
        elif create_missing:
            d = d.setdefault(key, {})
        else:
            return dic
    if keys[-1] in d or create_missing:
        d[keys[-1]] = value
    return dic 
```

设置`create_missing`为 True 时，您确保只设置已经存在的值：

```
# Trying to set a value of a nonexistent key DOES NOT create a new value
print(nested_set({"A": {"B": 1}}, ["A", "8"], 2, False))
>>> {'A': {'B': 1}}

# Trying to set a value of an existent key DOES create a new value
print(nested_set({"A": {"B": 1}}, ["A", "8"], 2, True))
>>> {'A': {'B': 1, '8': 2}}

# Set the value of an existing key
print(nested_set({"A": {"B": 1}}, ["A", "B"], 2))
>>> {'A': {'B': 2}} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T17:00:33.003

首先，您可能想查看[setdefault](http://docs.python.org/2/library/stdtypes.html)。

作为一个函数，我将它写为

```
def get_leaf_dict(dct, key_list):
    res=dct
    for key in key_list:
        res=res.setdefault(key, {})
    return res 
```

这将用作：

```
get_leaf_dict( dict, ['Person', 'address', 'city']) = 'New York' 
```

这可以通过错误处理等来清理。也使用`*args`而不是单个键列表参数可能会很好；但想法是您可以遍历键，在每个级别提取适当的字典。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-11T01:13:59.560

这是另一种选择：

```
from collections import defaultdict
recursivedict = lambda: defaultdict(recursivedict)
mydict = recursivedict() 
```

我最初是从这里得到的：*[设置嵌套字典值并创建中间键](https://stackoverflow.com/questions/10218486/set-nested-dict-value-and-create-intermediate-keys/10218517#10218517)*。

如果你问我，这是非常聪明和优雅的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-01T12:38:37.093

这是我的简单解决方案：只需写

```
terms = ['person', 'address', 'city'] 
result = nested_dict(3, str)
result[terms] = 'New York'  # as easy as it can be 
```

你甚至可以这样做：

```
terms = ['John', 'Tinkoff', '1094535332']  # account in Tinkoff Bank
result = nested_dict(3, float)
result[terms] += 2375.30 
```

现在后台：

```
from collections import defaultdict

class nesteddict(defaultdict):
    def __getitem__(self, key):
        if isinstance(key, list):
            d = self
            for i in key:
                d = defaultdict.__getitem__(d, i)
            return d
        else:
            return defaultdict.__getitem__(self, key)
    def __setitem__(self, key, value):
        if isinstance(key, list):
            d = self[key[:-1]]
            defaultdict.__setitem__(d, key[-1], value)
        else:
            defaultdict.__setitem__(self, key, value)

def nested_dict(n, type):
    if n == 1:
        return nesteddict(type)
    else:
        return nesteddict(lambda: nested_dict(n-1, type)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-24T15:50:12.820

Python 3的*dotty_dict*库可以做到这一点。请参阅文档*[Dotty Dict](https://dotty-dict.readthedocs.io/en/latest/)*以获得更清晰的信息。

```
from dotty_dict import dotty

dot = dotty()
string = '.'.join(['person', 'address', 'city'])
dot[string] = 'New York'

print(dot) 
```

输出：

```
{'person': {'address': {'city': 'New York'}}} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-30T20:56:29.940

[这是Bakuriu 答案](https://stackoverflow.com/questions/13687924/setting-a-value-in-a-nested-python-dictionary-given-a-list-of-indices-and-value/13688108#13688108)的一个变体，它不依赖于单独的函数：

```
keys = ['Person', 'address', 'city']
value = 'New York'

nested_dict = {}

# Build nested dictionary up until 2nd to last key
# (Effectively nested_dict['Person']['address'] = {})
sub_dict = nested_dict
for key_ind, key in enumerate(keys[:-1]):
    if not key_ind:
        # Point to newly added piece of dictionary
        sub_dict = nested_dict.setdefault(key, {})
    else:
        # Point to newly added piece of sub-dictionary
        # that is also added to original dictionary
        sub_dict = sub_dict.setdefault(key, {})
# Add value to last key of nested structure of keys
# (Effectively nested_dict['Person']['address']['city'] = value)
sub_dict[keys[-1]] = value

print(nested_dict)

>>> {'Person': {'address': {'city': 'New York'}}} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-03T01:19:32.040

使用这对方法

```
def gattr(d, *attrs):
    """
    This method receives a dict and list of attributes to return the innermost value of the give dict
    """
    try:
        for at in attrs:
            d = d[at]
        return d
    except:
        return None

def sattr(d, *attrs):
    """
    Adds "val" to dict in the hierarchy mentioned via *attrs
    For ex:
    sattr(animals, "cat", "leg","fingers", 4) is equivalent to animals["cat"]["leg"]["fingers"]=4
    This method creates necessary objects until it reaches the final depth
    This behaviour is also known as autovivification and plenty of implementation are around
    This implementation addresses the corner case of replacing existing primitives
    https://gist.github.com/hrldcpr/2012250#gistcomment-1779319
    """
    for attr in attrs[:-2]:
        # If such key is not found or the value is primitive supply an empty dict
        if d.get(attr) is None or isinstance(d.get(attr), dict):
            d[attr] = {}
        d = d[attr]
    d[attrs[-2]] = attrs[-1] 
```

# php - 从 PHP 或 JS 中的 Header 读取帧率

> ID：13687926
> 
> 赞同：0
> 
> 时间：2012-12-03T16:50:35.677
> 
> 标签：php, javascript, mp4, frame-rate

有什么方法可以在没有访问 shell 的情况下使用 php 或 javascript 读取 mp4 文件的帧速率（没有 system() 等）

我想到了 readfile 或 fopen，但我在 google 或 php.net 上找不到任何东西。

# c# - Response.Redirect("url") 对象引用未设置为对象的实例

> ID：13687927
> 
> 赞同：2
> 
> 时间：2012-12-03T16:50:40.657
> 
> 标签：c#, redirect, response.redirect

在 C# 中使用 Visual Studio 2010 .NET Framework 4.0。

每次我尝试使用重定向时`response.redirect("url")`都会收到以下错误：

```
System.NullReferenceException was unhandled by user code
  Message=Object reference not set to an instance of an object.
  Source=App_Web_uck3gvsb
  StackTrace:
       at _Default.Page_Load(Object sender, EventArgs e) in c:\inetpub\wwwroot\p1\Default.aspx.cs:line 15
       at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
       at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
       at System.Web.UI.Control.OnLoad(EventArgs e)
       at System.Web.UI.Control.LoadRecursive()
       at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
  InnerException: 
```

这是代码：即使在没有任何东西的简单上，我也会遇到同样的错误！

```
using System;
using System.Collections.Generic;

using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    public  HttpResponse response;
    protected void Page_Load(object sender, EventArgs e)
    {

        response.Redirect("http://www.google.com");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:55:34.600

你应该使用：

```
Response.Redirect("www.bing.com"); 
```

不是：

```
response.Redirect("...") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:52:56.797

您需要利用[Page.Response](http://msdn.microsoft.com/en-us/library/system.web.ui.page.response.aspx)属性：

```
Page.Response.Redirect(...); 
```

要不就

```
Response.Redirect(...); 
```

当你声明你的`HttpResponse`对象时，它没有被初始化，因此`null`. 这就是异常的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:53:34.333

注释掉你`public HttpResponse response;`声明了一个`unnecessary`未初始化的变量。

```
public partial class _Default : System.Web.UI.Page
{
    //public  HttpResponse response;
    protected void Page_Load(object sender, EventArgs e)
    {
        //this is enough
        Response.Redirect("http://www.google.com");
    }
} 
```

# android - 使用 JSON 正文执行 HTTPPost 请求，Android

> ID：13687928
> 
> 赞同：1
> 
> 时间：2012-12-03T16:50:40.853
> 
> 标签：android, json, post, http-post, getjson

我对 Android 很陌生。所以，我在 android 中使用 Json 数据处理 HttpPost。

```
JSONObject jsonObj = new JSONObject();
JSONObject jsonObjDasUser = new JSONObject();

    jsonObj.put("name", "Login");
    jsonObj.put("type", "request");
    jsonObj.put("UserCredential", jsonObjUserCredential );
    jsonObjUserCredential .put("username", id);
    jsonObjUserCredential .put("password", password);

// Create the POST object and add the parameters
HttpPost httpPost = new HttpPost(url); 

StringEntity entity = new StringEntity(jsonObj.toString(), HTTP.UTF_8);

entity.setContentType("application/json");
httpPost.setEntity(entity);
HttpClient client = new DefaultHttpClient(); 
```

如何将 jsonObjUserCredential 包含为一个实体，例如:::

```
//StringEntity userCredential = new StringEntity(jsonObjUserCredential .toString(),HTTP.UTF_8);?????? 
```

这里做错了什么？？？？？？

请帮我....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:58:49.010

试试这个代码..希望这能解决你的问题..

```
JSONObject jsonObj = new JSONObject();
JSONObject jsonObjDasUser = new JSONObject();

jsonObj.put("name", "Login");
jsonObj.put("type", "request");
jsonObjUserCredential .put("username", id);
jsonObjUserCredential .put("password", password);
jsonObj.put("UserCredential", jsonObjUserCredential );

// Create the POST object and add the parameters

HttpPost httpPost = new HttpPost(url); 

StringEntity entity = new StringEntity(jsonObj.toString(), HTTP.UTF_8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:00:40.573

尝试这样的事情：

```
List<NameValuePair> parameters = new ArrayList<NameValuePair>();
parameters.add(new BasicNameValuePair("myJSON", MyJSONObject.toString()));

//Set the http request 
httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.RFC_2109);
httpPost = new HttpPost(webServiceUrl + methodName);

httpPost.setHeader("Accept", "text/html,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5");
httpPost.setHeader("Content-Type", "application/x-www-form-urlencoded");

//Variable to keep the http response
response = null;

//Set the parameters if exist
if(params != null && !params.isEmpty()){
    try {
        //Set the parameters in the request
    httpPost.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
}
}

//Execute the call
response = httpClient.execute(httpPost,localContext); 
```

希望能帮助到你

# java - 对象访问和加载

> ID：13687931
> 
> 赞同：0
> 
> 时间：2012-12-03T16:50:55.083
> 
> 标签：java, arrays, multidimensional-array

我在一个单独的类中有一个 Java int[][][] 对象。

数组的第一个维度大约有 1000 个元素，但我一次只需要访问一个。

我的问题是：如果我一次只想访问一个元素，如下所示：

```
int[][] some2DInt = SomeClass.some3DInt[5]; 
```

这会有效吗？我的意思是，Java 会加载全部 1000 个元素还是只加载我真正想要的一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:55:36.553

这里没有加载。`int[][]`是一个地址，所以当您执行以下操作时：

```
int[][] some2DInt = SomeClass.some3DInt[5]; 
```

您只需分配`some2DInt`内存中第五个二维数组的地址。所以没有复制或“加载”完成。

加载（实际上是内存分配）是在您使用`new`运算符初始化 3 维数组时完成的。（或者如果您静态初始化此数组，这可能是一项繁琐的任务，尤其是对于 1000 个二维数组）

# ant - Apache Ant 有“严格模式”吗？

> ID：13687933
> 
> 赞同：1
> 
> 时间：2012-12-03T16:51:07.203
> 
> 标签：ant, properties, strict

如果我有这样的 Ant 任务：

```
<target name="default">
  <mkdir dir="${installer.config.installation.db.path}"/>
</target> 
```

并且没有设置引用的属性，我最终创建了一个目录（在这个 'mkdir' 示例中），其字面名称为（作为 'basedir' 的子目录）：

```
${installer.config.installation.db.path} 
```

如果要求 ANT 解析属性但失败，有什么方法可以强制失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:57:18.290

无法对所有属性执行此操作，但您可以检查单个属性：

```
 <fail unless="installer.config.installation.db.path" /> 
```

当未定义属性时，上面将中止脚本。但是，当属性为空时它会成功！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T15:07:30.797

以下仅适用于 ant 项目级属性。（需要 groovy 库）

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="strict me" default="default" basedir=".">
    <target name="init-strict">
        <script language="groovy">
            import org.apache.tools.ant.PropertyHelper;
            def antProject = project;
            if( "#MyPropertyHelper"!=PropertyHelper.getPropertyHelper(antProject).toString() ) {
                def myPropertyHelper = new PropertyHelper(){
                    @Delegate PropertyHelper delegate = PropertyHelper.getPropertyHelper(antProject);
                    public Object getProperty(String name){
                        Object v = delegate.getProperty(name);
                        if(v==null)throw new org.apache.tools.ant.BuildException("The property `$name` not defined");
                        return v;
                    }
                    public String toString() {return "#MyPropertyHelper"}
                }
                antProject.addReference("ant.PropertyHelper", myPropertyHelper);
            }
        </script>
    </target>
    <target name="default" depends="init-strict">
        <mkdir dir="${installer.config.installation.db.path}"/>
    </target>
</project> 
```

# ios - 在我的 mapView 上添加注释后 setCoordinate 更新

> ID：13687935
> 
> 赞同：1
> 
> 时间：2012-12-03T16:51:12.133
> 
> 标签：ios, mkmapview, mkannotation, mkannotationview

我添加了一堆注释，并将它们放在一个数组中，这样我就可以拉入它们的新位置并相应地更新地图，而无需先删除所有注释并添加它们会导致闪烁。不幸的是，在最初设置并添加它们的坐标后，任何 setCoordinate 调用都不再起作用。有任何想法吗？

```
- (void)updateMap:(NSData *)responseData {
    //parse out the JSON data
    NSError* error;
    vehicleData = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    //find which Dictionary is for our bus.
    for (NSDictionary* route in vehicleData) {
        //find our bus in our vehicles dictionary. Key is by routeID.
        BusPositionDot *busLocationDot; 
        if ([vehicles objectForKey:[route objectForKey:@"RouteID"]] == nil) {
            busLocationDot = [[BusPositionDot alloc] init];
            [vehicles setObject:busLocationDot forKey:[route objectForKey:@"RouteID"]];
            [mapView addAnnotation:[vehicles objectForKey:[route objectForKey:@"RouteID"]]];

        }
        else {
            busLocationDot = [vehicles objectForKey:@"RouteID"];
        }

        float latitude = [[route objectForKey:@"Latitude"] floatValue];
        float longitude = [[route objectForKey:@"Longitude"] floatValue];
        float groundSpeed = [[route objectForKey:@"GroundSpeed"] floatValue];
        float direction = [[route objectForKey:@"Heading"] floatValue];

        float roundedDirection=45 * round(direction/45);

        if(groundSpeed<=3)
            //get view for annotation
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot.png"];
        else if((roundedDirection==0)||(roundedDirection==360))
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot0.png"];
        else if(roundedDirection==45)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot45.png"];
        else if(roundedDirection==90)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot90.png"];
        else if(roundedDirection==135)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot135.png"];
        else if(roundedDirection==180)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot180.png"];
        else if(roundedDirection==225)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot225.png"];
        else if(roundedDirection==270)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot270.png"];
        else if(roundedDirection==315)
            [mapView viewForAnnotation:busLocationDot].image=[UIImage imageNamed:@"buspositiondot315.png"];

        CLLocationCoordinate2D currentBusLocation = CLLocationCoordinate2DMake(latitude, longitude);
        NSLog(@"setting coord %f & %f",currentBusLocation.latitude,currentBusLocation.longitude);

        [UIView animateWithDuration:0.5 animations:^{
            [busLocationDot setCoordinate:currentBusLocation];

        }];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:39:37.153

参考这部分：

```
if ([vehicles objectForKey:[route objectForKey:@"RouteID"]] == nil) {
    ...
    [mapView addAnnotation:
        [vehicles objectForKey:[route objectForKey:@"RouteID"]]];
}
else {
    busLocationDot = [vehicles objectForKey:@"RouteID"];
} 
```

当你打电话时`addAnnotation`，你通过：

```
[vehicles objectForKey:[route objectForKey:@"RouteID"]] 
```

但如果它已经存在，则使用：

```
[vehicles objectForKey:@"RouteID"] 
```

这意味着在更新注释时，正在使用不同的（很可能是错误的）引用。
要么`[vehicles objectForKey:@"RouteID"]`实际上不是 a ，要么`BusPositionDot`与最初使用该“路由 ID”添加的实例不同。

因此，`setCoordinate`不会工作。
更新注释时使用相同的引用应该可以修复它。

还有一些其他不相关的潜在问题：

*   该代码正在使用`float`变量（例如`if(roundedDirection==45)`）进行直接比较。即使它“似乎有效”也不推荐这样做——存在浮点精度错误的可能性。检查是否`roundedDirection`在目标值的一个非常小的范围内，或者在您的情况下，只需声明`roundedDirection`为，`int`因为看起来表达式
    `45 * round(direction/45)`只会返回没有分数的值。

*   代码是`image`直接设置注释视图的。这没关系，但请确保`viewForAnnnotation`委托方法也具有相同的确切逻辑来设置`image`基于方向，否则可能会发生注释视图的图像在平移或缩放时将重置为某个默认值。您可能需要将`direction`属性添加到`BusPositionDot`.

# php - 使用 php 解析 json(?) 字符串

> ID：13687941
> 
> 赞同：-2
> 
> 时间：2012-12-03T16:51:26.767
> 
> 标签：php, arrays, multidimensional-array, json

我有一个字符串，更具体地说，这个：

```
a:16:{s:9:"pseudonym";O:16:"SimpleXMLElement":0:{}s:14:"parallel_title";O:16:"SimpleXMLElement":0:{}s:9:"title_var";O:16:"SimpleXMLElement":0:{}s:6:"series";O:16:"SimpleXMLElement":0:{}s:9:"vol_title";O:16:"SimpleXMLElement":0:{}s:9:"reference";O:16:"SimpleXMLElement":0:{}s:10:"bound_with";O:16:"SimpleXMLElement":0:{}s:15:"general_remarks";O:16:"SimpleXMLElement":0:{}s:6:"copies";O:16:"SimpleXMLElement":1:{i:0;s:1:"1";}s:11:"remarks_BPH";O:16:"SimpleXMLElement":0:{}s:3:"ICN";O:16:"SimpleXMLElement":1:{i:0;s:4:"neen";}s:10:"provenance";O:16:"SimpleXMLElement":0:{}s:7:"binding";O:16:"SimpleXMLElement":0:{}s:10:"size_hxwxd";O:16:"SimpleXMLElement":0:{}s:6:"BookID";O:16:"SimpleXMLElement":1:{i:0;s:4:"6271";}s:5:"repro";O:16:"SimpleXMLElement":0:{}} 
```

是否有可能以某种方式解析这个字符串？我需要在列表中显示键和值。我尝试使用`json_decode`，但它不返回任何内容，即使将第二个参数设置为`true`：

```
json_decode($string,true); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:53:24.637

它不是 JSON，它是序列化的 PHP。使用[`unserialize()`](http://php.net/manual/en/function.unserialize.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:01:57.553

它是序列化对象

[在PHP 网站](http://php.net/manual/en/function.unserialize.php)上阅读更多内容

# c++ - C++ 构造一系列相互依赖的类而没有默认构造函数？

> ID：13687942
> 
> 赞同：0
> 
> 时间：2012-12-03T16:51:37.737
> 
> 标签：c++

我有来自没有默认构造函数的外部库的 A、B、C、D 类。

给定对象 A。对象 D 是必需的。

我不能写

```
D makeD(A a) {
  B b(1,2,3);
  C c(a,b);
  c.setParam1(4);
  c.setParam2(5);
  return D(a,b,c);
} 
```

因为中间体 B 和 C 的破坏使得返回的 D 对象不可用（D 通过引用存储 B 和 C）。

这个问题的最短解决方案是什么？

一个丑陋且糟糕但简短的解决方案是：

```
D makeD(A a) {
  B* b=new B(1,2,3);
  C* c=new C(a,*b);
  c->setParam1(4);
  c->setParam2(5);
  return D(a,*b,*c);
} 
```

一个长期的解决方案是：

```
shared_ptr_xxl<D,B,C> makeD(A a) {
  B* b=new B(1,2,3);
  C* c=new C(a,*b);
  c->setParam1(4);
  c->setParam2(5);
  return shared_ptr_xxl<D,B,C>(new D(a,*b,*c),b,c);
} 
```

在哪里

```
shared_ptr_xxl<D,B,C> 
```

就好像

```
shared_ptr<D> 
```

除了它还有额外的

```
delete b;
delete c; 
```

在析构函数中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:59:34.293

创建一个包含所有这些的类：

```
class E {
    public:
        E(A const & a):
            b(1, 2, 3),
            c(make_c(a, b)),
            d(a, b, c)
            {
        }
    private:
        static C make_c(A const & a, B const & b) {
            C c(a, b);
            c.setParam1(4);
            c.setParam2(5);
            return c;
        }
        A a;
        B b;
        C c;
        D d;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:04:30.103

一个好的解决方案是复制所有数据：

```
void makeD(A a, D &d2) {
   B b(1,2,3);
   C c(a,b);
   c.setParam1(4);
   c.setParam2(5);
   D d(a,b,c);
   CopyFrom(d,d2);
} 
```

但这显然需要外部库的支持......如果外部库可以通过对象的接口发布它的所有数据结构，它会有所帮助。

CopyFrom() 将调用 d 的成员函数并将数据复制到 d2。在实践中，通常情况下 d 和 d2 具有不同的类型。

让我们用 std::vector 试试这个：

```
void makeD(std::vector<int> &vec2) {
   std::vector<int*> vec;
   int a=10,b=20,c=30;
   vec.push_back(&a);
   vec.push_back(&b);
   vec.push_back(&c);
   CopyFrom(vec, vec2);
} 
```

然后 CopyFrom 看起来像：

```
void CopyFrom(std::vector<int*> vec, std::vector<int> &vec2) {
   for(int i=0;i<vec.size();i++) vec2.push_back(*vec[i]);
} 
```

# android - Android 从 ListView 和 SQLite 数据库中删除一个值

> ID：13687948
> 
> 赞同：1
> 
> 时间：2012-12-03T16:52:03.693
> 
> 标签：android, android-listview, android-sqlite

我想从 SQLite 数据库填充的值列表中删除一个项目。但我似乎没有让它工作。MySQLitehelper 类具有 SQL 操作，ListViewDelete 具有 onlistItemClick，根据他选择的项目（代表位置），应该从 SQLite 数据库中删除该记录。

--- MySQLitehelper.java----

```
public class MySQLitehelper {

//public static final String TABLE_COMMENTS = "comments";
  public static final String COLUMN_ID = "GWid";
  public static final String COLUMN_DATE = "DateGWU";
  public static final String COLUMN_LOCATION = "location";
  public static final String COLUMN_TIME = "time";

  public static final String TABLE_NAME = "UPDTable";

  private static final String DATABASE_NAME = "UPDdb_version6";
  private static final int DATABASE_VERSION = 6;

  private final Context context;
  GetSet getset = new GetSet();
  public void GetIdForGwid(GetSet get)
  {
     getset=get; 
  }

  // Database creation sql statement
  private static final String DATABASE_CREATE = "CREATE TABLE " + TABLE_NAME +
                                " (" +COLUMN_ID+ " integer," + COLUMN_DATE + " VARCHAR," +
                                COLUMN_LOCATION+" VARCHAR," +COLUMN_TIME +" VARCHAR);";

//  private static final String DATABASE_INSERT = "INSERT INTO " +TABLE_NAME +
//                                              " Values (47688507,'DEC-07-2012','MARVIN 203','20:00');";

  private static final String DATABASE_INSERT = "INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +
          COLUMN_LOCATION+" ," +COLUMN_TIME +" )"  +
                          " Values (47688507,'DEC-07-2012','MARVIN 203','20:00');";

  DatabaseHelper dbhelper;
  SQLiteDatabase db;

 public MySQLitehelper(Context ctx)
  {
      this.context = ctx;
      dbhelper = new DatabaseHelper(ctx);
  }

private static class DatabaseHelper extends SQLiteOpenHelper {

     public DatabaseHelper(Context context)
     {
         super(context,DATABASE_NAME, null,DATABASE_VERSION);
     }

 @Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(DATABASE_CREATE);            //execute create table
    db.execSQL(DATABASE_INSERT);            //execute insert query
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (47688507,'DEC-22-2012','OLD MAIN','23:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (1234567,'DEC-14-2012','FUNGER','12:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (7654321,'DEC-29-2012','GELMAN','22:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (47688507,'DEC-12-2012','IVORY','23:00');");
 }

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    Log.w(MySQLitehelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
}

// open the DB
 public MySQLitehelper open() throws SQLException
 {
    System.out.println("Inside open function");
     db = dbhelper.getWritableDatabase();
    return this;
 }

 public void close()
 {
     dbhelper.close();
 }

 public void insertRecord(long gwid, String date, String location, String time)
     {
           ContentValues initialValues = new ContentValues();
          initialValues.put(COLUMN_ID, gwid);
          initialValues.put(COLUMN_DATE, date);
          initialValues.put(COLUMN_LOCATION, location);
          initialValues.put(COLUMN_TIME, time);
          db.insert(TABLE_NAME, null, initialValues);
     }

public Cursor getAllrows()      //function to get all rows in the DB. Testing initially.
{

     Cursor cur = db.rawQuery("SELECT * FROM "+TABLE_NAME, null);
     return cur;
}

public Cursor getRecord(long getid) throws SQLException
{
        Cursor mCursor =
        db.query(true, TABLE_NAME, new String[] {COLUMN_ID,
        COLUMN_DATE, COLUMN_LOCATION, COLUMN_TIME},
        COLUMN_ID + "= "+getid, null, null, null, null, null);  
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
 return mCursor;
}

public void DeleteRecord (String location)
{
    try {
        //String sSQLQuery = "DELETE FROM "+TABLE_NAME +
         //   "WHERE "+COLUMN_LOCATION+"='" + location + "';";
        //db.execSQL(sSQLQuery);
        //db.dele
        this.db.delete(
                  TABLE_NAME,
                  COLUMN_LOCATION+" = "+location,null);
        String Message = "Record is deleted: ";
    } catch (SQLiteException ex) {

    }
}

} 
```

--ListViewDelete.java--- onItemListClick方法所在

```
public class ListViewDelete extends ListActivity {

private ArrayList<String> thelist;

 final MySQLitehelper dbhelper = new MySQLitehelper(this);
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_list_view_delete);

    final Intent intent = getIntent();
    final Bundle extras = getIntent().getExtras();    //gets the GWID

    thelist = new ArrayList<String>(extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE));
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE)));
}       

public void onListItemClick(ListView parent, View view, int position, long id)
{
    Toast.makeText(this, "You have selected "+thelist.get(position)+" and will be deleted", Toast.LENGTH_LONG).show();
    thelist.remove(position);
    dbhelper.DeleteRecord(thelist.get(position));   // I don't know how to deal    with this statement

}

} 
```

LOGCAT 输出

```
 12-03 19:40:04.959: W/dalvikvm(6510): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-03 19:40:04.998: E/AndroidRuntime(6510): FATAL EXCEPTION: main
12-03 19:40:04.998: E/AndroidRuntime(6510): java.lang.NullPointerException
12-03 19:40:04.998: E/AndroidRuntime(6510):     at com.example.upd.MySQLitehelper.DeleteRecord(MySQLitehelper.java:147)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at com.example.upd.ListViewDelete.onListItemClick(ListViewDelete.java:45)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.os.Handler.handleCallback(Handler.java:725)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.os.Looper.loop(Looper.java:137)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at java.lang.reflect.Method.invokeNative(Native Method)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at java.lang.reflect.Method.invoke(Method.java:511)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-03 19:40:04.998: E/AndroidRuntime(6510):     at dalvik.system.NativeStart.main(Native Method)
12-03 19:40:09.049: I/Process(6510): Sending signal. PID: 6510 SIG: 9 
```

这是我陷入项目的最后一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:56:50.797

> 但我似乎没有让它工作。

首先，不要将您的`MySQLitehelper`类实例化为字段，`ListActivity`而是在`onCreate`方法中执行：

```
// ...
final MySQLitehelper dbhelper;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_list_view_delete);
    dbHelper = new MySQLitehelper(this);
    // ... 
```

您还忘记`open`在您的实例上调用该方法`MySQLitehelper`，否则，如果没有此调用`SQLiteDatabase`，则类中的引用`MySQLitehelper`为空，它将抛出`NullPointerException`：

```
// ....
thelist.remove(position);
try {
    dbhelper.open();
} catch (SQLException sqle) {
     Log.e("TAG", "Never ignore exception!!! " + sqle);
}  
dbhelper.DeleteRecord(thelist.get(position)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:58:42.437

```
ArrayAdapter ad =new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE));

public void onListItemClick(ListView parent, View view, int position, long id)
{
    Toast.makeText(this, "You have selected "+thelist.get(position)+" and will be deleted", Toast.LENGTH_LONG).show();
    thelist.remove(position);
    dbhelper.DeleteRecord(thelist.get(position));   // I don't know how to deal    with this statement
    ad.notifyDataSetChanged(); <------ TRY THIS

} 
```

# java - 在最大化窗口的情况下启动 Eclipse 3.x RCP 应用程序？

> ID：13687953
> 
> 赞同：1
> 
> 时间：2012-12-03T16:52:21.483
> 
> 标签：java, eclipse-rcp

这可能吗，我似乎无法找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T17:29:50.817

您需要将外壳状态设置为最大化。这应该有效。

```
WorkbenchWindowAdvisor.postWindowOpen()
{
    getWindowConfigurer().getWindow().getShell().setMaximized(maximized)
} 
```

还有一种方法可以将 Shell 设置为全屏。

```
Shell.class
public void setFullScreen (boolean fullScreen) 
```

# android - 在设备上运行时的 mapview 问题

> ID：13687960
> 
> 赞同：0
> 
> 时间：2012-12-03T16:52:43.833
> 
> 标签：android, android-mapview

我有一个使用谷歌 MapView 的应用程序。它在 AVD 上运行良好，但有时在我的 LG Optimus Elite Android 手机上运行不佳。当我在手机上启动应用程序时，当手机接收到 Wi-Fi 信号时，地图不显示 - 它只显示光栅标记。有时20分钟不显示地图，有时5分钟后显示地图。如果我带着手机四处转转，​​它离开 Wi-Fi 并进入 3G，地图通常会在大约一分钟后出现。

MapView 定义如下...

```
<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="my key goes here"
    android:clickable="true" /> 
```

当我启动应用程序时，我执行以下操作...

```
static MapView myMapView;
static MapController mc;

myMapView = (MapView) findViewById(R.id.mapview);    
myMapView.setBuiltInZoomControls(true);
mc = myMapView.getController();   
mc.setZoom(20);
myMapView.setSatellite(true);
myMapView.setTraffic(false);    
myMapView.invalidate(); //(tried both with and without this invalidate) 
```

同样，地图会立即在 AVD 模拟器中显示。

我需要做些什么来启动这张地图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:06:12.673

这通常是 API 密钥问题。您需要在此处设置 API KEY：

```
 android:apiKey="my key goes here" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:14:04.233

一般来说，地图出现在设备中的速度应该与它在模拟器中出现的速度一样快。

我曾经在我的应用程序中有一个愚蠢的错误，导致类似的行为。这与您将遇到完全相同的问题非常不同，但可以提示您可能导致该行为的原因。

基本上，我有类似的东西：

```
private Runnable myRunable = new Runnable() {
    public void run() {
        //do something
    mHandler.postDelayed(myRunable , delay);    
    }
}; 
```

允许延迟为`0`，它会导致连续循环和非常高的 CPU 利用率。

奇怪的是，在模拟器中，虽然运行速度较慢。在设备中，在屏幕上绘制地图需要很长时间。

问候。

# jquery - jquery初学者：点击改变背景

> ID：13687963
> 
> 赞同：2
> 
> 时间：2012-12-03T16:52:54.270
> 
> 标签：jquery, colors, click

我正在尝试根据当前颜色更改单击时元素的背景。

这是相关的html：

```
<div id="rect" style="height: 100px; width:300px; background: red">
</div> 
```

和我的jQuery尝试：

```
 $("#rect").click(function() {
    if ($(this).css('background') == 'red') {
        $(this).css('background','blue');}
    else {$(this).css('background','yellow');}
    }); 
```

我总是得到一个黄色的盒子；'true' 条件永远不会触发。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:59:54.767

> **更新**

正如预期的那样，我在 IE 中发现了一个异常。要解决 IE 异常，只需使用 jQuery 的[**.browser**](http://api.jquery.com/jQuery.browser/)方法。我已将此添加到下面的示例代码中。

尝试：

```
$("#rect").click(function() {
    var red = $.browser.msie ? "red" : "rgb(255, 0, 0)";
    if ($(this).css('background-color') == red) {
        $(this).css('background','blue');}
    else {$(this).css('background','yellow');}
}); 
```

正如我在评论中解释的那样，jQuery 分解了 CSS 属性“背景”的每个部分，因此在这种情况下，您需要调用所需的确切属性`background-color`。此外，jQuery 以 RGB 样式返回颜色值，因此红色为`rgb(255, 0, 0)`. 现在这并没有停止`.css("background"`对**SET**背景有用，请记住，就像 css 一样，*背景*将覆盖所有其他背景直接属性。

显然有人为我做了一个 jsFiddle 的例子。（谢谢[苏珊斯](https://stackoverflow.com/users/941272/sushanth)）

## [看这里](http://jsfiddle.net/sushanth009/LdX4K/)

@RyanKinal 在他的评论中也提出了一个很好的观点*“jQuery 甚至可能不会将颜色标准化为特定格式，因此不同的浏览器可能会返回不同格式的颜色。这是需要注意的。”* ~~我没有测试~~...

通过不同浏览器返回的 CSS“红色”：

*   Firefox 17：“rgb(255, 0, 0)”
*   Chrome 24：“rgb(255, 0, 0)”
*   歌剧 12：“rgb(255, 0, 0)”
*   Safari 5：“rgb(255, 0, 0)”
*   IE 7-9：“红色”

# css - Understanding Web Profilers

> ID：13687967
> 
> 赞同：0
> 
> 时间：2012-12-03T16:53:09.183
> 
> 标签：css, operating-system, google-chrome-devtools

Using Chrome Developer Tools Profiling, I profiled both Javascript and CSS.

For JS, it shows Javascript `functions` and `Total %`. For CSS, it shows `Selector` and `Total %`.

If I understand correctly, the operating system gives some chunk of CPU to the browser.

Then, the Developer Tools Profiling tool gives the % of CPU that each function and/or selector uses.

Is that right?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:05:28.297

The `Total %` is the percentage of the total profile time that a particular entry has contributed. This may or may not be equal to the total *profiling* time (i.e., the time between clicks of the `Start/Stop` button.) Profile time only counts the time that the profiled code was executed.

Example: your CSS profiling time is 1s (you clicked `Start`, waited for 1s, and clicked `Stop`). Your CSS profile time is 200ms (that is, it took your browser only 200ms to match and apply all selectors to the right DOM elements). The `*` selector's `Total %` is 12% (that is, handling the `*` selector took your browser 24ms).

You can click the `%` button in the status bar at the bottom to see the absolute times instead of percentages.

# c# - 如何使用部分类将关联子属性设置为 false

> ID：13687968
> 
> 赞同：3
> 
> 时间：2012-12-03T16:53:11.027
> 
> 标签：c#, linq, associations, partial-classes

我有一个变化很大的数据库，我经常不得不进入数据上下文设计器并手动将一些关联子属性设置为 false。每次我从设计器中删除表格时，我都必须返回并重做所有关联。

有没有办法使用部分类来定义关联子属性的含义，比如一个名为 Company 的实体与名为 Program 的实体具有一对多的关系？

我希望我可以简单地更改代码中的关联子属性，以便每次从数据上下文中删除实体并重新添加时，我不必再次经历整个过程。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:34:15.707

我一直在看这个问题，希望有人比我有更好的消息。实际上，您可以在与上下文相同的命名空间中添加一个部分类，并在其中为子属性/集合定义新名称（当您将其定义为 User1、User2、User3 时，将其重新生成为 User1、User2、User3 非常烦人） OpenedBy、ApprovedBy 和 ClosedBy 或类似的东西）。

正如您在上面所表达的，这确实有助于通过更友好的名称访问属性；但是我还没有找到一种方法来在该部分类中定义属性，以便它维护具有完整读/写功能的实体框架导航属性的所有属性（双关语不是有意的）。

它不能解决您的问题，但据我所知，这是一个准确的答案；我继续前进并接受了我必须在 EDMX 中重命名导航属性的情况，以防我必须删除/重新添加实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T11:11:18.217

我也遇到了同样的问题……也找不到解决办法。

但是，我有一些信息供正在研究此问题的人使用：

当`ChildProperty`设置为 false 时，`.designer.cs`文件被更改（而不是`.dbml`/`.dbml.layout`的）。这是一个例子......

`ChildProperty=true`：

```
[global::System.Data.Linq.Mapping.AssociationAttribute(Name="bank_account_bank_payment_file", Storage="_bank_account", ThisKey="company_bank_account_id", OtherKey="bank_account_id", IsForeignKey=true)]
public bank_account bank_account
{
    get
    {
        return this._bank_account.Entity;
    }
    set
    {
        bank_account previousValue = this._bank_account.Entity;
        if (((previousValue != value) 
                || (this._bank_account.HasLoadedOrAssignedValue == false)))
        {
            this.SendPropertyChanging();
            if ((previousValue != null))
            {
                this._bank_account.Entity = null;
                previousValue.bank_payment_files.Remove(this);
            }
            this._bank_account.Entity = value;
            if ((value != null))
            {
                value.bank_payment_files.Add(this);
                this._company_bank_account_id = value.bank_account_id;
            }
            else
            {
                this._company_bank_account_id = default(int);
            }
            this.SendPropertyChanged("bank_account");
        }
    }
} 
```

`ChildProperty=false`：

```
[global::System.Data.Linq.Mapping.AssociationAttribute(Name="bank_file_handler_bank_payment_file", Storage="_bank_file_handler", ThisKey="bank_file_handler_id", OtherKey="bank_file_handler_id", IsForeignKey=true)]
[global::System.Runtime.Serialization.DataMemberAttribute(Order=17, EmitDefaultValue=false)]
public bank_file_handler bank_file_handler
{
    get
    {
        if ((this.serializing 
                    && (this._bank_file_handler.HasLoadedOrAssignedValue == false)))
        {
            return null;
        }
        return this._bank_file_handler.Entity;
    }
    set
    {
        if ((this._bank_file_handler.Entity != value))
        {
            this.SendPropertyChanging();
            this._bank_file_handler.Entity = value;
            this.SendPropertyChanged("bank_file_handler");
        }
    }
} 
```

# java - Android 共享数据库

> ID：13687969
> 
> 赞同：0
> 
> 时间：2012-12-03T16:53:19.823
> 
> 标签：java, android, database

您好，我一直在尝试为 android dor 零售系统开发一个应用程序，例如，一家餐厅总共有 5 台平板电脑都在运行我的应用程序，但是由于在我的国家，零售软件必须遵循严格的规则，我不能在每个 android 上放置一个数据库 .. 他们必须有办法通过 LAN、蓝牙或其他方式访问同一个数据库。我在 android 中开发了一个带有 WCF Web 服务和客户端应用程序的测试应用程序，但除了我有一个动态IP，所以我每次重新启动时都必须配置连接，它不是很可靠

如果有人能指出我正确的方向..我过去一周一直在谷歌搜索，但一无所获..

PS：还有一件事，这个系统（零售系统）将在许多地方实施，所以如果可能的话，我只想建立基于 LAN 的连接.. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:23:43.223

[http://en.wikipedia.org/wiki/DynDNS](http://en.wikipedia.org/wiki/DynDNS) 使用类似这样的东西，您将能够使用每次获得新 IP 时更新的相同 DNS 名称。至于可靠性，您需要先跟踪原因。尝试 ping 服务器一段时间并收集统计信息。

# c# - 我应该为以下哪种方法编写单元测试？

> ID：13687974
> 
> 赞同：0
> 
> 时间：2012-12-03T16:53:34.320
> 
> 标签：c#, unit-testing, visual-studio-2008

我第一次看单元测试。当我在 Visual Studio 2008 中时，我从构建测试框架开始。

我已经按下按钮并开始寻找填补空白，这一切似乎*都相当*简单。

除了，我可以看到两个问题。

1）很多空白单元测试似乎是多余的，是否有经验法则来选择*不*为其编写单元测试的方法。2）是否有为读取/写入数据库的方法编写测试的最佳实践（本例中为 SQL Server）

我将为（1）举一个例子。

我正在为 WCF Web 服务编写单元测试。我们首先使用 wscf.blue 来编写我们的 Web 服务 WSDL/XSD。

这是使用用户列表并将它们写入数据库中的用户表的方法的（高度简化的）代码的路径。

```
Entry Point
   |
   |
   V
void PutOperators(PutOperatorsRequest request) (This method is auto generated code)
   |
   |
   V
void PutOperatorsImplementation(PutOperatorsRequest input) (Creates a data context and a transaction, top level exception handling)
   |
   |
   V
void PutEntities<T>(IEnumerable<T> input) (Generic method for putting a set of entities into the database, just a for loop, T is Operator in this case)
   |
   |
   V
U PutEntity<T, U>(T entity) (Generic Method for converting the input to what the database expects and adding it to the DataContext ready for submission, T is Operator, U is the data layer entity, called User)
   |
   |
   V
(This method calls 3 methods, first 2 of which are methods belonging to "entity" passed into this method, the 3rd is an abstract method that, when overridden,  knows how to consume a BL entity and flatten it to a database row)
void EnsureIDPresent() (Ensures that incoming entity has a unique ID, or creates one)
void ValidateForInsert(AllOperators) (Does this ID already exists, etc)
User ToDataEntity(Operator entity) (simple field mapping excersice, User.Name = Operator.Name, etc) 
```

所以，据我所知，我有 3 种方法可以做一些明显可测试的事情：

`EnsureIDPresent()`- 此方法接受输入并以易于测试的方式对其进行修改 `ValidateForInsert()`- 此方法接受输入并在不满足条件时抛出异常 `ToDataEntity()`- 此方法接受输入，创建数据行实体并填充值。应该很容易测试。

还有：

`PutOperatorsImplementation()`- 在这里调用 DataContext.SubmitChanges() 和 TransactionScope.Complete()。我应该编写测试来测试写入数据库的内容吗？然后什么？删除他们的记录？不知道在这里做什么。

我想我应该删除以下测试：

`PutOperators()`- 自动生成的代码，一行，调用 PutOperatorsImplementation() `PutEntities()`- 只是一个调用 PutEntity() 的 for 循环，它是基类上的通用方法 `PutEntity()`- 调用三个已经有单元测试的方法和调用 DataContext.InsertOnSubmit。

我也有类似的获取数据的途径：

`GetOperatorsResponse GetOperators(GetOperatorsRequest request)`- 自动生成

`GetOperatorsResponse GetOperatorsImplementation(GetOperatorsRequest input)`- 设置数据上下文

`List<Operator> GetEntities()`- Linq 查询

`Operator ToOperator(User)`- 将一个数据实体展平为其等效的 BL 实体。

我想我应该只是测试`ToOperator()`和`GetEntities()`

我应该只拥有一个包含已知良好测试数据的专用测试数据库吗？

这是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:11:48.273

对于应该和不应该测试什么，没有“硬性规定”。

单元测试可以测试您编写的任何实现，并使您在重构时确信您没有破坏任何东西。您需要考虑您编写的测试是否会给您带来价值。

在决定要覆盖哪些代码时，您需要考虑的主要事项是

*   我将要编写/已经编写的代码有多大可能发生变化并需要重构？
*   代码是主要编写自定义代码还是自动生成的 - 如果是自动生成的，那么编写测试几乎没有价值，因为您只需测试您正在使用的自动生成器就可以正常工作（并且您应该能够信任它）。

您不应使用数据库或任何可以在测试环境之外更改的东西来测试数据访问代码。相反，请考虑编写“Mocks”来模拟来自数据层的响应以进行测试。这将确保您的测试是一致的。考虑查看一些模拟框架，例如 Rhino Mocks 或 MOQ。

永远记住你写测试是有原因的，而不是为了写测试。如果您不会从您编写的测试中获得任何价值（例如，如果您的代码库不会改变），那么就不要编写它们。

# jquery - 需要附加正斜杠，但仅当 href 值中没有 .aspx 时

> ID：13687975
> 
> 赞同：0
> 
> 时间：2012-12-03T16:53:37.597
> 
> 标签：jquery

这是我到目前为止所拥有的，它工作正常：

```
$("a[id=terminalNode]").each(function() {
    var _href = $(this).attr("href"); 
    $(this).attr("href", _href + '/');
}); 
```

但是，在某些情况下，值可能在 href 中包含“.aspx”。有没有一种简单的方法可以将这些从我的每个循环中过滤出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:00:42.207

```
$("a[id=terminalNode]").each(function() {
    var href = $(this).attr("href");
    if (href.toLowerCase().slice(-5) != '.aspx')
        $(this).attr("href", href + '/');
}); 
```

或者

```
$("a[id=terminalNode]").each(function() {
    var href = $(this).attr("href");
    if (href.toLowerCase().test('.aspx'))
        $(this).attr("href", href + '/');
}); 
```

或者

```
$("a[id=terminalNode]").each(function() {
    var href = $(this).attr("href");
    if (href.toLowerCase().indexOf('.aspx') != -1)
        $(this).attr("href", href + '/');
}); 
```

但是为什么你会在 a[id=terminalNode] 上有一个 foreach？带有 id 的东西应该只在页面上出现一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:56:01.643

您可以使用`.indexOf()`检查字符串是否包含特定字符串。它区分大小写，因此`.toLowerCase()`可能是个好主意：

```
$("a[id=terminalNode]").each(function () {
    var _href = $(this).attr("href");
    if (_href.toLowerCase().indexOf(".aspx") == -1) {
        $(this).attr("href", _href + "/");
    }
}); 
```

# mysql - 如何使用 MYSQL 在 Windows 上完成备份后发送电子邮件

> ID：13687978
> 
> 赞同：-1
> 
> 时间：2012-12-03T16:53:45.740
> 
> 标签：mysql

我对 MYSQL 真的很陌生。我已经学会了如何备份数据库。现在我想知道如何在备份时添加电子邮件 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:03:36.693

据我所知，这是不可能的。MySQL 没有任何发送电子邮件的功能，您应该使用另一种语言。此外，[在 Stack Overflow 上搜索](https://stackoverflow.com/search?q=mysql%20sending%20email)或谷歌搜索（我是通过 Google 来的）会引导你到[这个问题](https://stackoverflow.com/questions/387483/how-to-send-email-from-mysql-5-1)，它讨论了几乎相同的问题。

# visual-studio-2010 - 使用注册表配置代码片段

> ID：13687980
> 
> 赞同：0
> 
> 时间：2012-12-03T16:53:52.917
> 
> 标签：visual-studio-2010, code-snippets

我有 HTML 代码片段。我需要在安装设置时在客户机器中配置它。我正在使用下面的注册表项来配置 VS 2010 中的代码片段。

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\Languages\CodeExpansions\HTML 
```

我在上述位置的“路径”名称中添加了片段位置。如果我们在安装安装程序之前在该机器中使用代码片段，它工作正常。但它不适用于新机器。在新机器中，“路径”条目不可用。请帮我在新机器上注册代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:10:00.787

我找到了解决方案。如果我们在下面的注册表位置添加条目，Snippet 将在新机器中可用。

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0_Config\Languages\CodeExpansions\HTML\Paths 
```

添加字符串值并将片段路径位置作为数据值放在上述位置下。

# objective-c - 联合结构：打印 uint32_t 类型的结构成员跳过两个字节并打印错误值

> ID：13687981
> 
> 赞同：1
> 
> 时间：2012-12-03T16:53:54.723
> 
> 标签：objective-c, c, struct

在联合结构方面需要帮助。我正在接收由各种数据包组成的字节流，因此我将字节数据放入联合结构并通过结构成员访问所需的数据。问题在于 uint32_t 类型成员 - 读取跳过其两个字节并在通过其成员访问时显示错误值。这是完整的演示代码：

PacketUtils.h

```
#include <stdint.h>

typedef struct {

  uint8_t startSymbol;
  uint8_t packetType;
  uint32_t deviceId;
  uint16_t packetCRC;

} PacketData;

typedef union {

  uint8_t *bytes; // stores raw bytes
  PacketData *packet; 

} Packet;

// Puts bytes into predefined struct
void getPacketFromBytes(void *bytes, Packet *packetRef); 
```

PacketUtils.c

```
#include <stdio.h>
#include "UnionStruct.h"

void getPacketFromBytes(void *bytes, Packet *packetRef)
{
  uint8_t *rawBytes = (uint8_t *)bytes;
  packetRef->bytes = rawBytes;
} 
```

调用代码：

```
// sample byte data
uint8_t packetBytes[] = {0x11, 0x02, 0x01, 0x01, 0x01, 0x03, 0xbb, 0xbd};

Packet packetRef;
getPacketFromBytes(packetBytes, &packetRef);

printf("%x\n", packetRef.packet->startSymbol); // good - prints 0x11
printf("%x\n", packetRef.packet->packetType); // good - prints 0x02 
printf("%x\n", packetRef.packet->deviceId); // bad - prints bd bb 03 01
printf("%x\n", packetRef.packet->packetCRC); // bad - prints 36 80 (some next values in memory) 
```

当 PacketData 结构由 uint8_t 或 uint16_t 类型成员组成时一切正常，然后打印显示正确的值。但是，打印 uint32_t 类型的 deviceId 会跳过两个字节 (0x01 0x01) 并抓取最后 4 个字节。打印 packetCRC 打印给定字节数组中的值 - 内存中的一些值，如 packetBytes[12] 和 packetBytes[13]。我不明白为什么它会跳过两个字节......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:08:46.530

问题是由于在您的平台上将字段填充为默认对齐。在大多数现代架构上，32 位值在读取/写入 32 位字对齐地址时效率最高。

在 gcc 中，您可以通过使用特殊属性来指示结构已“打包”来避免这种情况。看这里：

[http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Type-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Type-Attributes.html)

所以结构定义看起来像这样：

```
typedef struct {

    uint8_t startSymbol;
    uint8_t packetType;
    uint32_t deviceId;
    uint16_t packetCRC;

} PacketData __attribute__((packed)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:05:31.470

32 位数字将仅在 4 字节边界上对齐。如果将它移到结构的开头，它可能会按您的意愿工作。

处理器通常经过优化以获取数据大小倍数的数据 - 32 位为 4 个字节，64 位为 8 个字节...... - 编译器知道这一点并在数据结构中添加间隙以确保处理器可以有效地获取数据。

如果您不想处理填充并且不能移动数据结构，您可以定义

```
typedef struct {
    uint8_t startSymbol;
    uint8_t packetType;
    uint16_t deviceIdLow;
    uint16_t deviceIdHigh;
    uint16_t packetCRC;
} PacketData; 
```

然后就写

```
uint32_t deviceID = packetRef.packet->deviceIdLow | (packetRef.packet->deviceIdLow << 16); 
```

# svn - svn up 不起作用

> ID：13687983
> 
> 赞同：1
> 
> 时间：2012-12-03T16:53:57.690
> 
> 标签：svn

如果我有`a.cpp`来自存储库的文件，并且出于测试目的，我会从该文件中删除一行。执行 svn up 后，我收到一条消息，说我处于最新版本，但删除的行没有添加回来。我正在使用 Macintosh 命令行终端中的 svn。这听起来像一个svn错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:55:48.033

该`update`子命令将更改从存储库带入您的工作副本。它不会破坏未提交的本地更改：

```
C:\>svn help update
update (up): Bring changes from the repository into the working copy. 
```

你想要`revert`子命令：

```
C:\>svn help revert
revert: Restore pristine working copy file (undo most local edits). 
```

有关详细信息，请参阅[使用 Subversion](http://svnbook.red-bean.com/en/1.8/index.html)进行版本控制。

# asp.net-mvc-4 - 有没有一种方法可以指定要使用的自定义 ROLES 表，就像在 Websecurity.InitializeDatabase() 中指定 USERS 表一样？

> ID：13687984
> 
> 赞同：2
> 
> 时间：2012-12-03T16:53:58.593
> 
> 标签：asp.net-mvc-4, roleprovider

[所以我知道您可以在使用 WebMatrix.WebData.Websecurity 类上的InitializeDatabase 方法](http://msdn.microsoft.com/en-us/library/gg569134%28v=vs.111%29.aspx)时指定要用于用户表的自定义表，但我想知道是否无法指定要使用的角色表? 可能没有任何原因 - 除非您想更好地控制使用角色存储的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T12:23:31.900

我认为没有办法在特定角色表中`Websecurity.InitializeDatabase()`

但例如，您可以将 Asp.net 简单成员表作为实体框架模型的一部分包含在内，并对其进行更多控制。

[本文](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)可能会帮助您解决问题。

# c - 信号处理程序中的 pthread_exit()

> ID：13687985
> 
> 赞同：1
> 
> 时间：2012-12-03T16:54:02.547
> 
> 标签：c, linux, pthreads

（这个问题可能与[信号处理程序中的 pthread_exit 导致分段错误](https://stackoverflow.com/questions/6370412/pthread-exit-in-signal-handler-causes-segmentation-fault)有些相关）我正在编写一个铅锁预防库，其中总是有一个检查线程在做图形工作并检查是否存在死锁，如果是，那么它发出信号之一冲突的线程。当该线程捕获到信号时，它会释放它拥有的所有互斥体并退出。有多个资源互斥锁（显然）和一个临界区互斥锁，所有获取、释放资源锁和进行图计算的调用都必须先获取此锁。现在问题出现了。有 2 个竞争（不包括检查线程）线程，*有时*一个线程被杀死后程序死锁。在 gdb 中，它说死线程拥有关键区域锁但从未释放它。在信号处理程序中添加断点并逐步执行后，**似乎锁在 pthread_exit() 之前属于其他人（如预期的那样），但所有权在 pthread_exit() 之后神奇地转到了这个线程。**

我能想到的唯一猜测当试图获得临界区锁（因为它想要另一个资源互斥锁）时，要被杀死的线程是否在 pthread_mutex_lock 处阻塞，然后信号来了，中断了 pthread_mutex_lock。由于这个调用不是信号证明的，所以发生了一些奇怪的事情？就像信号处理程序可能已经返回并且该线程获得锁然后退出一样？Idk ..任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:22:59.747

`pthread_exit`不是异步信号安全的，因此您可以从信号处理程序调用它的唯一方法是确保信号不会中断任何非异步信号安全功能。

作为一般原则，使用信号作为与线程通信的方法通常是一个非常糟糕的主意。您最终会混合两个本身已经足够困难的问题：线程安全（线程之间的正确同步）和单个线程内的可重入性。

如果您使用信号的目标只是指示线程终止，那么更好的机制可能是`pthread_cancel`. 然而，为了安全地使用它，将被取消的线程必须在适当的点设置取消处理程序和/或在不安全时暂时禁用取消（使用`pthread_setcancelstate`）。另外，请注意，这`pthread_mutex_lock`不是取消点。没有**安全的方法**来中断被阻塞等待获取互斥锁的线程，因此如果您需要像这样的可中断性，您可能需要使用条件变量进行更精细的同步设置（condvar 等待是可取消的），或者您可以使用信号量而不是互斥体。

**编辑：**如果您确实需要一种方法来终止等待互斥锁的线程，您可以将调用替换为`pthread_mutex_lock`对您自己的函数的调用，该函数循环调用`pthread_mutex_timedlock`并在每次超时时检查退出标志。

# xpages - 如何在 XPages iNotes 列表视图组件上获得垂直滚动条？

> ID：13687989
> 
> 赞同：1
> 
> 时间：2012-12-03T16:54:11.073
> 
> 标签：xpages, xpages-extlib

正如标题所说。我在我的 XPage 中创建了一个 iNotes 列表视图组件，它的渲染效果很好。

问题是我有更多的字段，然后我可以在屏幕上查看，而且它似乎没有垂直滚动条。

有设置可以开启吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:51:10.340

似乎没有垂直滚动条。我创建了 SPR SODY92NLB5 用于开发调查。

# php - 在数组中查找并获取每个字符串的计数

> ID：13687992
> 
> 赞同：0
> 
> 时间：2012-12-03T16:54:33.307
> 
> 标签：php, arrays, search, count

我正在从数据库中获取一些数据，然后将它们推送到数组中。我需要找到一些字符串的计数并以有效的方式打印出结果（计数）：

```
Array
(
    [0] => q1-1,q2-2,q3-2,q4-1,q5-2,q6-3,q7-1,q8-4,
    [1] => q1-1,q2-2,q3-1,q4-3,q5-3,q6-3,q7-2,q8-1,
    [2] => q1-1,q2-1,q3-1,q4-1,q5-1,q6-2,q7-2,q8-2,
    [3] => q1-3,q2-1,q3-1,q4-1,q5-2,q6-3,q7-1,q8-1,
    [4] => q1-2,q2-2,q3-3,q4-1,q5-3,q6-3,q7-1,q8-1,
    [5] => q1-1,q2-2,q3-3,q4-1,q5-2,q6-3,q7-1,q8-1,
    [6] => q1-3,q2-1,q3-1,q4-3,q5-2,q6-3,q7-2,q8-4,
    [7] => q1-2,q2-2,q3-3,q4-1,q5-2,q6-5,q7-1,q8-1,
    [8] => q1-1,q2-1,q3-2,q4-3,q5-3,q6-5,q7-1,q8-1,
    [9] => q1-2,q2-1,q3-1,q4-1,q5-3,q6-3,q7-1,q8-1,
    [10] => q1-3,q2-2,q3-3,q4-3,q5-4,q6-3,q7-1,q8-1,
    ...
) 
```

样本数据如上。

我需要知道数组中有多少 q1-1, q1-2 ... q8-4 出现并打印出可读版本。前任。分别是 23：q1-1、412：q1-2 等等。

我将创建一个包含需要搜索的每个字符串的数组，以遍历该数组。对于每个结果，都会增加该字符串的 resultVariable，但我不确定这是否是最好的方法。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:59:43.457

很简单，在你的数组上循环，创建子数组，然后创建一个计数器数组：

```
$counts = array () ;
foreach ( $your_array as $row ) {
    $sub = explode(',', $row);
    foreach ( $sub as $subval ) {
        if ( array_key_exists ( $subval, $counts ) ) {
            $counts[$subval] ++ ;
        } else {
            $counts[$subval] = 1 ;
        }
    }
} 
```

这里是`$counts`：

```
Array (
    'q1-1' => 23,
    'q1-2' => 9,
    // and so on....
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:00:12.613

尝试：

```
$arr = array(...); //your array 
$count = array();       
foreach($arr as $v) {
 $substr = explode(',', $v); 
 foreach($substr as $m) {   
 if(strstr($v, $m) !== FALSE)
  $count[$m]++; 
 }    
} 
```

打印计数，

```
foreach($count as $k => $v)
 echo "Count for '$k': ". $v; 
```

# google-drive-api - Google drive and confidential files

> ID：13687993
> 
> 赞同：0
> 
> 时间：2012-12-03T16:54:36.083
> 
> 标签：google-drive-api

I have been looking for quite some time and cannot seem to find the answer I need. I tried using the iframe tag method for Google Docs Viewer to view my files and noticed that pptx, xlsx, etc... PDF seems to be the only one that is visible. So I came to the conclusion I have to use Google Drive and it's API. If that is so, my question is... Can I keep these files hosted on my clients server and use the API to view the files or do they have to be hosted on Google Drive's cloud server? Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:00:41.297

No, this is not possible, sorry. All files are stored on the Google Drive cloud servers.

# .net - 控制 .nuspec 中的代码合同引用

> ID：13687995
> 
> 赞同：4
> 
> 时间：2012-12-03T16:54:43.917
> 
> 标签：.net, nuget, code-contracts

我正在使用代码合同为我的项目生成附属程序集。基本上它为项目的 MyAssembly.dll 创建了一个 MyAssembly.Contracts.dll。这应该放在您的程序集旁边，但不被任何应用程序引用——它仅由合同工具使用。

我正在尝试将其包含在我的 nuget 包中，但是当我将该包安装到另一个应用程序中时，Contracts 程序集作为参考包含在内，这会产生问题。

根据[.nuspec 参考](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Explicit_Assembly_References)，这应该像添加`references`元素一样简单，但似乎被忽略了。我目前的理论是，这是因为我使用 .csproj 替换令牌，并且它从 .csproj 而不是 .nuspec 读取引用。

有没有人这样做过？有任何想法吗？

以下是我的 .nuspec 的相关部分：

```
<?xml version="1.0"?>
<package>
  <metadata>
     <references>
          <reference file="MyAssembly.dll"/>
     </references>
  </metadata>
  <files>
     <file src="bin\Release\CodeContracts\*.dll" target="lib\net45"/>
  </files>
</package> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T22:37:23.243

由于代码合同是一个单独的**可选**程序集，**我建议创建一个新的 MyPackage.CodeContracts 包**，它将代码合同程序集复制到您需要的地方。这可以使用所谓的*工具包*中的简单 PowerShell 脚本 (install.ps1 + uninstall.ps1) 来完成。

例如，这与创建 MyPackage.Sample 包的方法类似。使用基于约定的目录创建包，并改为以 .nuspec 文件为目标。你会遇到更少的问题，恕我直言，这也是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:15:21.093

跟进——较新的 NuGet 版本似乎做了我最初期望它做的事情，并且包含文件而不引用它们。不再需要自定义安装程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T04:48:55.907

这对我来说也是一个问题。我已经使用 Nuget 示例将其复制到：[https ://github.com/NuGet/Samples/issues/3](https://github.com/NuGet/Samples/issues/3)

package\metadata\references\group\reference 节点文档：[http ://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Explicit_Assembly_References_in_version_2.5_and_above](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Explicit_Assembly_References_in_version_2.5_and_above)

其他人有同样的问题： [https ://social.msdn.microsoft.com/Forums/en-US/fe7fad45-a474-4157-a4ee-3f94a2b1071f/nuget-package-dependency-reference-not-added-to-project ?forum=visualstudiogeneral](https://social.msdn.microsoft.com/Forums/en-US/fe7fad45-a474-4157-a4ee-3f94a2b1071f/nuget-package-dependency-reference-not-added-to-project?forum=visualstudiogeneral)

示例 nuspec：

```
 <references>
        <reference file="My.ServiceBusEntities.dll" />
    </references>
</metadata>
<files>
    <file src="bin\Debug\My.ServiceBusEntities.dll" target="lib\net45\ServiceBusEntities.dll" /> 
```

注意：在 file:target 属性中拥有正确且匹配的“net45”框架文件夹以匹配项目目标（即框架 4.5）非常重要。

其他方面没有指定框架，您将看到添加到目标项目的引用。IE

```
<file src="bin\Debug\My.ServiceBusEntities.dll" target="lib\ServiceBusEntities.dll" /> 
```

# android - android软键盘推动布局

> ID：13687996
> 
> 赞同：0
> 
> 时间：2012-12-03T16:54:46.687
> 
> 标签：android, android-relativelayout

所以基本上我有一个主要布局，它是一个登录屏幕。问题是当我点击 Edittext 字段时，整个相对布局会从屏幕上消失......

这是我的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background_gradient"
android:theme="@android:style/Theme.NoTitleBar"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/editText1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="60dp"
    android:baselineAlignBottom="true"
    android:contentDescription="@string/skedo"
    android:src="@drawable/logo" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_above="@+id/editText2"
    android:layout_centerHorizontal="true"
    android:layout_marginLeft="13dp"
    android:layout_marginRight="13dp"
    android:drawableLeft="@drawable/user"
    android:drawablePadding="13dp"
    android:paddingLeft="13dp"
    android:inputType="textEmailAddress"
    android:background="@drawable/round_corners"
    android:ems="10"
    android:hint="@string/email" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_centerInParent="true"
    android:layout_marginLeft="13dp"
    android:layout_marginRight="13dp"
    android:layout_marginTop="8dp"
    android:drawableLeft="@drawable/lock"
    android:drawablePadding="13dp"
    android:paddingLeft="13dp"
    android:background="@drawable/round_corners"
    android:ems="10"
    android:hint="@string/password"
    android:inputType="textPassword" >

</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="8dp"
    android:textSize="17sp"
    android:shadowColor="#000000"
    android:shadowRadius="1"
    android:shadowDx="0"
    android:shadowDy="1"
    android:text="@string/login"
    android:textColor="#ffffff"
    android:background="@drawable/button_states" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_centerInParent="true"
    android:layout_marginTop="23dp"
    android:clickable="true"
    android:text="@string/forgot_password"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textSize="13sp" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="23dp"
    android:contentDescription="@string/imgdesc"
    android:src="@drawable/or" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imageView2"
    android:shadowColor="#ffffff"
    android:shadowRadius="1"
    android:shadowDx="0"
    android:textSize="14sp"
    android:textStyle="bold"
    android:shadowDy="1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="23dp"
    android:text="@string/register"
    android:background="@drawable/create_account"
     /> 
```

因此，当这种情况发生时，我的徽标会从屏幕上消失，我希望它能够显示出来。最好的例子是 facebook 登录屏幕，当您点击 editText 时，它会挤压所有内容并且徽标仍然可见。那么我怎样才能达到这样的效果呢？

所以当什么都没有按下时：http: [//postimage.org/image/swdtggnil/](http://postimage.org/image/swdtggnil/)

当键盘出现 [http://postimage.org/image/5pbdfrftl/](http://postimage.org/image/5pbdfrftl/)

我希望它的行为完全一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:57:04.373

如果我没有误解你可以添加

```
 android:windowSoftInputMode="adjustPan" 
```

在里面`AndroidManifest.xml`

```
<activity
   android:name="yourActivity"
   android:windowSoftInputMode="adjustPan" >
</activity> 
```

# xml - 可以在引用的 XML 属性值字符串中使用文字尖括号吗？

> ID：13687998
> 
> 赞同：1
> 
> 时间：2012-12-03T16:54:56.673
> 
> 标签：xml, escaping

例如，这是有效的 XML 吗？：

```
<foo bar="3<5" /> 
```

还是我*必须*逃脱它们？：

```
<foo bar="3&lt;5" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:12:45.467

您必须转义文字 <。

您可以使用任何 XML Validator 进行检查。