# StackOverflow 问答 15511000-15511999

# asp.net - 如何在 asp.net 页面或其后面的代码中添加 css 类并赋予样式

> ID：15511001
> 
> 赞同：0
> 
> 时间：2013-03-19T21:40:39.087
> 
> 标签：asp.net, css, styles, stylesheet, code-behind

我正在使用具有母版页的 asp.net aspx 页面。有一个自定义控件，它没有 cssClass 属性或样式属性。它自动生成 div id，我想为那个 aspx 页面分配一个 css。棘手的部分是其他页面也会生成 id。由于这个原因，我无法在我的样式表中设置这个 css。任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:43:19.373

`ClientIDMode="Static"`如果您想固定 ID，则可以使用。但是您要确保 ID 不会相互冲突。

[ASP.NET 4.0 中的 ClientIDMode](http://www.west-wind.com/weblog/posts/2009/Nov/07/ClientIDMode-in-ASPNET-40)

# php - 无法修改标头信息，标头已发送

> ID：15511002
> 
> 赞同：0
> 
> 时间：2013-03-19T21:40:40.850
> 
> 标签：php, header

我有一个包含以下代码的网页；

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8">
<title>Search results</title>
<?php
include_once('filename.php');
$info = ptb_connect('filename.csv','F');
$locations = ptb_listUnique($info, 'Property_Location');
$property_type = ptb_listUnique($info, 'Property_Type');
$property_buy_rent = ptb_listUnique($info, 'Buy_Rent');

if(empty($_GET['location']) && empty($_GET['type']) && empty($_GET['buyrent']) && empty($_GET["min_val"]) && empty($_GET["room_no_min"])){
header("Location:propertysearch.php"); exit;
} 
```

但是当我转到该页面而不是重定向到 propertysearch.php 时，我收到消息“警告：无法修改标头信息 - 标头已由（输出开始于 N:\www\test\results.php:7）在 N: \www\test\results.php 在第 15 行"，这是开始 Header("Location..

我已经尝试了很多方法来尝试解决这个问题，包括使用 ob_start(); 消除空格。等，但无法弄清楚。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T06:46:11.280

我希望这个答案可以帮助你：

要使用标题，必须在页面上开始任何输出之前使用它。换句话说，它必须在任何东西被打印之前出现，包括docytype。

使用的语法非常简单，在文件的最顶部打开 php 然后键入 ob_start() ，结果是输出缓冲：

```
<?php ob_start(); ?> 
```

现在您可以在页面中的任何位置调用标题函数。为了确保您清除文件最底部未使用的资源，请通过在 php 中键入 ob_flush() 来刷新缓冲区：

```
<?php ob_flush(); ?> 
```

当我遇到一些问题时，这对我有用。！希望这对你也有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T21:07:09.117

我设法解决了这个问题，这是字节顺序标记问题，我将字符集从 UTF-8 更改为 ISO 西欧并解决了它。

# linux - 包含空格的文件名的 Shell 脚本问题

> ID：15511006
> 
> 赞同：4
> 
> 时间：2013-03-19T21:40:57.457
> 
> 标签：linux, bash, shell, command-line, filenames

我知道处理文件名中的空格的一种技术是用单引号将文件名括起来：“'”。

为什么下面的代码“echo.sh”在包含带空格的文件名的目录上工作，但程序“ls.sh”不起作用，唯一的区别是将“echo”替换为“ls”？

回声.sh

```
#!/bin/sh
for f in *
do
echo "'$f'"
done 
```

**产生**：
'ab c''de f''echo.sh''ls.sh
'

但是，“ls.sh”失败了：

```
#!/bin/sh
for f in *
do
ls "'$f'"
done 
```

**产生**：
ls：无法访问'ab c'：没有这样的文件或目录
ls：无法访问'de f'：没有这样的文件或目录
ls：无法访问'echo.sh'：没有这样的文件或目录
ls：无法访问' ls.sh'：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T21:50:12.907

你实际上是在添加多余的“'”（你的 echo 调用显示）

试试这个：

```
#!/bin/sh
for f in *
do
ls "$f"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:44:44.423

更改以下行

```
ls "'$f'" 
```

进入

```
ls "$f" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T21:45:57.587

仔细查看 echo.sh 脚本的输出，您可能会注意到结果可能与您预期的不太一样，因为打印的每一行都被以下`'`字符包围：

```
'file-1'
'file-2' 
```

等等。

您的系统上确实不存在具有该名称的文件。将它们与`ls`ls 一起使用将尝试查找名为`'file-1'`而不是的`file-1`文件，并且具有这样名称的文件不存在。

在您的示例中，您只是添加了一对`'`s 太多。一对双引号`"`足以处理文件名中可能包含的空格：

```
#!/bin/sh
for f in *
do
  ls "$f"
done 
```

即使文件名包含空格也能很好地工作。只有当您没有像这样使用双引号时，才会出现您试图避免的问题`$f`：

```
#!/bin/sh
for f in *
do
  ls $f # you might get into trouble here
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T21:53:04.100

那这个呢 ？=)

```
#!/bin/sh
for f in *; do
    printf -- '%s\n' "$f"
done 
```

# google-maps-api-3 - Google.maps panTo

> ID：15511008
> 
> 赞同：2
> 
> 时间：2013-03-19T21:40:57.900
> 
> 标签：google-maps-api-3

我正在尝试将我的地图放在自定义信息框的中心。相反，我正在平移到一个完全不同的地方，远离我的地图标记。这是我的代码：

```
var projection = this.getProjection(),
    centerX = point.x - (125)/2, 
    centerY = point.y - (120)/2, 
    centerPoint = new google.maps.Point(centerX, centerY);
var latLngOfBoxTop = projection.fromContainerPixelToLatLng(centerPoint);
this.map.panTo(latLngOfBoxTop); 
```

平移到地图上某个点的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T15:21:39.643

我想通了这一点，并且从未更新过我自己的问题。这很简单：我只需将地图的中心设置为标记的位置（我已经拥有的纬度和经度），然后我使用“panBy”，它以像素为参数，而不是纬度和经度：

```
 var latlng = this.latlng_,
        div_height = $('#infobox-wrap-' + markerID).css('height').replace(/px/, ''),
        infoBoxHalfHeight = 0, 
        halfDivHeight = Math.round(div_height/2);

    infoBoxHalfHeight = halfDivHeight + 16; //accounts for the infoBox's "pointer" graphic

    this.map.setCenter(latlng);
    this.map.panBy(0, infoBoxHalfHeight); 
```

# ios - 滚动到包含某个 UITextField 的 UITableViewCell

> ID：15511014
> 
> 赞同：1
> 
> 时间：2013-03-19T21:41:11.307
> 
> 标签：ios, objective-c, uiviewcontroller, uitableview

我有一个`UITableView`带有静态自定义`UITableViewCell`的s，我需要将一个文本字段滚动到视图中，因为当前它们在按下返回键并设置下一个响应者后隐藏在键盘后面。我知道我需要使用`scrollToRowAtIndexPath:atScrollPosition:animated:`. 我将如何滚动到其中一个文本框？

我知道这应该自己滚动，但是如果你`UIViewController`派生自`UITableViewController`（如 Apple 所说的那样），那么该类通过实现等`UITableViewController`来为你处理此行为。我的应用程序停止这样做，因为我更改为派生并在顶部添加表格视图视图控制器的. 所以基本上我错过了其中的功能，因为我（出于其他原因）选择从.`UITextFieldDelegate``UIScrollViewDelegate``UIViewController``UIView``UITableViewController``UIViewControler`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:57:30.180

我一直这样做。我这样做的方式是我有一个在 UIControlEventEditingDidBegin 中为文本字段调用的方法，在该方法中，我这样做：

```
-(void)startEdit:(UITextField *)textField {
    self.prevOffset = self.tableView.contentOffset.y; //I like storing the current offset so I can restore it when the text stops editing, you don't have to do this.
    int offSet = [textField superview].frame.origin.y; //this gets the y coordinate of the cell the textField is in. If the table is not at 0,0, you also need to add [[textField superview] superview].frame.origin.y;
    offSet-=(self.view.frame.size.height-KEYBOARD_HEIGHT)/2; //where KEYBOARD_HEIGHT is 216 in portrait and 160 in landscape;
    if (offSet<0) offSet = 0;
    [UIView animateWithDuration:0.3 animations:^{
        [self.tableView setContentOffset:CGPointMake(0,offSet)];}];
} 
```

我也做很多其他事情，但我相信它们是针对我的应用程序的。

首先，如果偏移量大于 0，我将 contentInset 设置为 UIEdgeInsetsMake(0,0,KEYBOARD_HEIGHT,0)，因为在此之前我有一些跳跃的滚动视图。

此外，如果原始偏移量（self.prevOffset）加上框架的高度大于内容大小（这也会导致跳跃，因为它将偏移量设置得太低然后跳回来），我将 prevOffset 设置为 MAX(0,contentSize.高度框架.大小.高度）。

这些东西不是必需的，但是你会得到跳跃的滚动/表格视图，试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:08:21.170

UITableViewController 在标头字段中已经有委托协议。由于您的类不再是 UITableViewController，因此您需要手动将 UITableView 的委托协议标头添加到您的 .h 文件中。

当我创建具有 UITableView 的自定义视图控制器时，我也从 UITableViewController 开始，只是为了获取委托方法，但随后我将 UITableViewController 更改为 UIViewController，就像您所做的那样，并手动将委托协议添加到标题中。

如果需要，您可以查看 UITableViewController.h 并复制委托协议。

供您参考，它们是：

```
<UITableViewDelegate, UITableViewDataSource> 
```

因此，您的 .h 文件应如下所示：

```
@interface MyTableViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 
```

另外，不要忘记在 Interface builder 或`self`代码中将控制器的委托设置为文件的所有者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:48:10.220

您可能还会发现使用框架（例如免费提供的 Sensible TableView 框架）要容易得多。这些框架通常提供开箱即用的所有数据输入单元格，并将代表您处理所有滚动/调整大小的琐事。

# c# - 如何以编程方式区分 XP 64 位和 Server 2003 64 位

> ID：15511021
> 
> 赞同：3
> 
> 时间：2013-03-19T21:41:43.050
> 
> 标签：c#, .net, windows, .net-2.0

我有一个程序，我需要根据用户正在运行的 Windows 版本显示指向不同下载的不同链接。

使用[这个答案](https://stackoverflow.com/a/2819962/80274)，我能够检测到操作系统是哪个版本。同样使用[这个答案](https://stackoverflow.com/a/1840313/80274)，我可以检测我是在 32 位还是 64 位版本的操作系统上运行。

这将完全满足我的需求，但是我遇到了[这个页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx)，它指出两者都`Windows XP 64-Bit Edition`使用`Windows Server 2003`版本号`5.2`。

如何检测这两个操作系统之间的差异？

* * *

作为旁注，如果他们使用 2003 64 位或 XP 64 位，我确实需要将它们发送到不同的位置，以下是我需要将人们发送到的链接：

*   [Windows XP 的远程桌面连接（终端服务客户端 6.1）](http://www.microsoft.com/en-us/download/details.aspx?id=7208)
*   [Windows XP x64 版的远程桌面连接（终端服务客户端 6.0）](http://www.microsoft.com/en-us/download/details.aspx?id=22465)
*   [Windows Server 2003 的远程桌面连接（终端服务客户端 6.0）](http://www.microsoft.com/en-us/download/details.aspx?id=21296)
*   [Windows Server 2003 x64 Edition 的远程桌面连接（终端服务客户端 6.0）](http://www.microsoft.com/en-us/download/details.aspx?id=24717)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:50:53.050

[`GetVersionEx`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724833%28v=vs.85%29.aspx)将设置`wProductType`为`VER_NT_SERVER`Windows Server 2003/2008/2008R2/2012，而不是`VER_NT_WORKSTATION`Windows XP/7/8。

您已经知道如何获取操作系统是 32 位还是 64 位，因此通过一点 P/Invoke（GetVersionEx 在[这里](http://pinvoke.net/default.aspx/kernel32.GetVersionEx)），您应该能够弄清楚其余的。

或者，如果您不想使用 P/Invoke，您*可以*使用 WMI，并查看`Win32_OperatingSystem`类，该类在属性中具有相同的信息`ProductType`。*除非你真的不得不*这样做，否则我不会费心这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T21:45:00.463

假设您正在.Net 中编程：

*   [http://msdn.microsoft.com/en-us/library/b3022k9x.aspx](http://msdn.microsoft.com/en-us/library/b3022k9x.aspx)

System.Environment 属性包括：

*   Is64Bit操作系统

*   Is64Bit进程

*   操作系统版本

*   处理器计数

*   等等等等

# ios - iOS：方法返回一个块然后该块存储在数组中，我应该什么时候复制它？

> ID：15511034
> 
> 赞同：5
> 
> 时间：2013-03-19T21:42:22.270
> 
> 标签：ios, objective-c, objective-c-blocks

我有一个返回块的方法和另一个使用该方法的方法：

```
- (MyBlock)blockForParameter:(id)param
{
    MyBlock theBlock = ^(){NSLog(@"Param: %@", param);};
    return theBlock;
}

- (void)methodUser
{
    MyBlock theBlock = [self blockForParameter:something];
    [self.allBlocks addObject:theBlock];
} 
```

问题是，我应该什么时候复制块？我应该在将块返回时`blockForParameter`复制它，还是在将它添加到数组时复制它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:48:18.040

如果块“超出创建它们的范围”，则必须复制它们，因此您必须`blockForParameter`在返回之前复制方法中的块。

*编辑：*对于 ARC，这不再是真的。例如，请参见[Objective-C：ARC 中](https://stackoverflow.com/questions/14643456/objective-c-blocks-in-arc)的块及其参考：

*   从函数返回块不需要复制块。
*   将块添加到集合*中确实需要*块副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:56:36.127

分别查看每种方法。

在`-blockForParameter:`中，块文字是从方法返回的。必须复制块才能超出文字的范围。在 MRC 中，您需要返回复制和自动释放的块。在 ARC 中，您无需执行任何操作。

在`-methodUser`中，该块未在该方法中定义；它是从方法调用中接收的。因此，它必须已经被复制（即它不是堆栈块）。因此，当你对它做任何事情时，你不需要`addObject:`对它做任何事情。

# php - 致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名

> ID：15511035
> 
> 赞同：1
> 
> 时间：2013-03-19T21:42:27.637
> 
> 标签：php, json, facebook-graph-api, facebook-php-sdk

我已经为 facebook 下载了 php sdk，并且正在尝试检索公共页面状态。

在我的页面中，我有以下内容：

```
require_once("facebook.php");
$config = array();
$config[‘appId’] = 'myID';
$config[‘secret’] = 'mySecret';
$config[‘fileUpload’] = false; // optional
$facebook = new Facebook($config);
$access_token = $facebook->getAccessToken();
$ret = $facebook->api(dogfishheadbeer, statuses);

//display messages
foreach ($ret->data as $m) {
        $name = $m->name;
        $message = $m->message;
        $time = $m->update_time;
        $id = $m->id;
        $page->content .= '<p> $message </p>';
} 
```

我收到的错误是：

致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名。在第 1254 行的 /home/public_html/base_facebook.php 中抛出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T11:52:50.747

您需要确保设置了 the`$config[‘appId’]`和 the `$config[‘secret’]`。就这样。您将在开发人员区域的应用设置中获得这些内容 => [http://developer.facebook.com](http://developer.facebook.com)

# .net - LINQ To Sql 更新内部循环

> ID：15511037
> 
> 赞同：0
> 
> 时间：2013-03-19T21:42:34.217
> 
> 标签：.net, vb.net, linq-to-sql

我的问题是，如果我遍历我的集合，如下所示，并适当地设置值，我是否需要`dc.SubmitChanges()`在每次迭代结束时调用它才能正常工作？如果我不这样做，它不会简单地覆盖更新上的先前值吗？

我将一个`Contact`对象传递给这个`Save()`方法。该对象具有`PersonContact`属性，而该属性又具有`Phones`属性。这是`Save()`方法的一部分，需要`Phones`在我的对象中循环并与它们进行比较`DB`并采取适当的措施。

有没有更好、更简单的方法？

```
If contact.PersonContact.Phones IsNot Nothing Then
  For Each phone In contact.PersonContact.Phones
    Dim exists = dc.tblPhones.SingleOrDefault(Function(p) p.ID = phone.ID)
    If exists IsNot Nothing Then
        If phone.Number = String.Empty AndAlso phone.Extension = String.Empty Then
            'Delete
            dc.tblPhones.DeleteOnSubmit(exists)
        Else
            'Update
            exists.ID = phone.ID
            exists.PhoneNumber = phone.Number
            exists.TypeID = phone.TypeID
            exists.UpdateDate = DateTime.Now
            exists.UpdateUser = user
        End If
    Else
        'Insert
        exists = New tblPhone() With { _
            .ID = phone.ID, _
            .PhoneNumber = phone.Number, _
            .Extension = phone.Extension, _
            .TypeID = phone.TypeID, _
            .InsertDate = DateTime.Now, _
            .InsertUser = user, _
            .PersonID = contact.PersonContact.ID _
        }
        dc.tblPhones.InsertOnSubmit(exists)
    End If
  'Do I need to Save here???
  dc.SubmitChanges()
  Next
End If 
```

# kendo-ui - Kendo Combobox 可与 odata localhost 配合使用，但在生产中失败

> ID：15511038
> 
> 赞同：0
> 
> 时间：2013-03-19T21:42:42.457
> 
> 标签：kendo-ui, kendo-combobox

所以我对剑道网络组合框有一个非常奇怪的问题，它带有 odata 和 serverFiltering: true

如果我在 localhost 服务器上使用它，它会请求 odata 格式并且效果很好。它是否指向数据的外部服务器（使用 CORS）并不重要。无论哪种方式，它都能很好地工作并以应有的方式获取数据等。

但是，一旦我将它放在公共领域，使用相同的浏览器就会失败。它以最奇怪的方式失败了：

它停止传递 $filter 属性。并且它停止调用 scheme.data 函数以正确解析结果（由于没有过滤器，它成功调用并获取所有结果集）。

此外，它不会将结果应用于下拉列表，因此它保持为空。

绝对不会引发 javascript 错误。在 schema.data 的函数上放置断点会导致它永远不会在 IE 或 chrome 中被命中。更改事件和错误事件也是如此。没有什么。

这是数据源：

```
dsContacts = new kendo.data.DataSource({
    type: "odata",
    serverPaging: true,
    serverSorting: true,
    serverFiltering: true,
    pageSize: 20,
    transport: {
        read: {
            url: User.serviceUrl + "/contact/list"
        }
    },
    schema: {
        data: function (data) {
            if(dsLinks.selectedItem().LinkedToContactID() && dsLinks.selectedItem().LinkedToContact()) {
                data.results.push({
                    ID: dsLinks.selectedItem().LinkedToContactID(),
                    Name: dsLinks.selectedItem().LinkedToContact()
                });
            }
            return data.results;
        }
    },
    error: function (e) {
        tradepointUtilities.ShowErrorAlert("Contact List Get", e);
    }
}); 
```

该组合定义为：

```
$("#cbo").kendoComboBox({
      dataTextField: "ID",
      dataValueField: "Name",
      suggest: true,
      datasource: dsContacts,
      filter: "contains",
      autoBind: false,
      delay: 300,
      minLength: 3
}); 
```

同样，在本地主机上完美运行，在所有浏览器中以完全相同的方式在生产中失败，没有任何错误。

想法？

# android - 这个EditText从哪里来的软键盘演示

> ID：15511039
> 
> 赞同：0
> 
> 时间：2013-03-19T21:42:42.640
> 
> 标签：android, android-softkeyboard

我正在从 SDK 中的示例代码构建自定义键盘，我试图找出包含键入代码的视图来自何处。

我的目标是构建一个非常基本的键盘，以适应现有应用程序的特定外观和感觉。我需要删除此视图，因为它不是必需的。

请参阅随附的屏幕截图以获取视图。

![键盘屏幕截图](../Images/7a28c9a7451617d62edba9feecb5aa38.png)

此应用程序在封闭环境中使用，因此我不担心用户选择不同的键盘。事实上，库存键盘是一种危险，因为导航栏被禁用，并且可能导致用户无法返回的地方。

提前致谢。

# c - 文件数据在设备文件中的什么位置？

> ID：15511040
> 
> 赞同：0
> 
> 时间：2013-03-19T21:42:49.437
> 
> 标签：c, linux-kernel, driver

我正在编写一个字符设备文件，并想知道是否有任何方法可以为设备文件的每个实例提供一段数据。我一直在寻找存储非易失性指针的地方的 inode 和文件结构，但没有运气。你能用字符设备文件做到这一点，还是我应该考虑别的？我需要对每个文件实例的数据进行自定义读写操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:17:38.053

您不能将数据存储在设备文件中。设备文件的全部意义在于您写入它的数据被传递给某个驱动程序。

理论上，您可以将信息存储在文件名或 inode 的组 id 字段中，但这会*很*奇怪。

您最好的解决方案最有可能单独存储您的数据。例如，为什么不在设备文件旁边创建一个常规文件？也许使用一些命名约定将两者联系起来。

# java - GWT Web App：如何维护登录状态？

> ID：15511050
> 
> 赞同：1
> 
> 时间：2013-03-19T21:43:34.360
> 
> 标签：java, http, gwt

我是网络应用程序开发的新手。

基本上，我有一个基于 GWT 的网络应用程序。用户首先需要登录。在成功验证自己后，他将被带到第二个页面（实际上是同一页面中的另一个 GWT 视图）。

登录将从另一个 Web 服务生成一对密钥。这些密钥将用于将来与 Web 服务的通信，例如：

```
 client -> server => web service 
```

现在问题来了，我无法将密钥对保存在数据库中。我该怎么办？

有人告诉我，我可以将密钥放入 cookie 中并发送回客户端。每次客户端提出请求时，cookie 都会发送到服务器。

我还被告知将密钥设置为会话密钥并将它们发送给客户端。

我很确定这两种方法有什么不同。它们适用吗？还是安全的？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:53:59.920

两种方法都适用。第一个（使用cookies）将依赖于用户端（它的缓存）。第二个，将数据保存在服务器端（会话）。通常（尽管有争议），您永远不会信任客户。如果客户对他的浏览器进行了清晰的缓存怎么办。

即使是为了安全（我不是这里的专家），我认为将数据存储在服务器上总是更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:03:22.440

您可以同时使用 cookie 和 session 或两者的组合来实现此目的。`Cookie`通常在您启动应用程序时创建（您也可以在需要时创建它）。这样做的缺点是，它是暂时的。一旦您清除缓存或 cookie，您创建的任何 cookie 都将被删除。如果您将其存储在服务器端，即，`session`您必须确保为每组用户创建一个单独的键值对，因为许多用户可以连接到同一台服务器。最好的方法是同时使用这两个选项。即，保存 cookie 并验证会话 ID。

[此链接将帮助您了解如何创建 cookie 和会话。](https://stackoverflow.com/questions/14305654/cannot-use-same-cookie-for-multiple-gwt-applications/14306386#14306386)

# javascript - 如何在没有服务的情况下将 ajax 与 mvc4 一起使用？

> ID：15511051
> 
> 赞同：0
> 
> 时间：2013-03-19T21:43:43.653
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-4

我对 MVC 很陌生，我只是在考虑我的下一个项目。我还没有找到任何如何做到这一点的例子，所以如果这似乎是一个可能已经在其他地方得到回答的问题，我深表歉意。

我将要创建异步级联下拉菜单。因此，菜单 B 将随着菜单 A 中的值的变化而更新，而菜单 C 将随着 A 或 B 的更新而更新。这个的正常模式是什么？

通常，当列表事件触发时，我会使用 ajax 调用一个服务来处理我的输入数据并返回我将用来更新我的列表的 json。在这种情况下，没有服务，只有控制器提供视图。我们可以创建一个服务，但如果可能的话，我们宁愿不这样做。所以我想知道 MVC4 中是否有一种技术可以反馈我更新视图所需的内容，而无需重新渲染页面。

如果有人可以向我推荐一个示例或至少解释我可能正在寻找的内容，那将是一个很大的帮助。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:47:53.377

您可以将 Ajax 回调 URL 实现为控制器操作（实际上，我通常是这样做的）。

不需要单独的服务。

```
public class CallbackController : Controller
{
    public ActionResult MenuOptions()
    {
        // return e.g. JSON 
    }
} 
```

Ajax URL 将是

[http://myserver.com/Callback/MenuOptions](http://myserver.com/Callback/MenuOptions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:56:53.630

对于这种类型的功能，网络上有很多答案。[这是一个](https://stackoverflow.com/questions/227624/asp-net-mvc-controller-actions-that-return-json-or-partial-html)，[这里是另一个类似的例子](https://stackoverflow.com/questions/8517071/send-json-data-via-post-ajax-and-receive-json-response-from-controller-mvc)。你真正应该做的是阅读[MVC 动作/控制器](http://www.asp.net/mvc/tutorials/older-versions/getting-started-with-mvc/getting-started-with-mvc-part1)并做一些尖峰/弄乱。

构建示例入门应用程序将帮助您掌握经典 ASP.NET 和 MVC 之间的差异。

# beyondcompare - 使用 BeyondCompare 在 XML 比较中排除的规则

> ID：15511054
> 
> 赞同：1
> 
> 时间：2013-03-19T21:43:51.163
> 
> 标签：beyondcompare

在比较 xml 文件时，我需要在无法比较中添加一条规则。我需要忽略以包含单词的内容开头并以单词`exclude="true"` 结尾的节点`</File>`

```
 <File name="LogData.txt" exclude="true" type="TIMESTAMP">
   <Date>2012-09-27 17:43:36.211</Date>
  </File> 
```

我设法为我的示例实例创建了一个规则，如下所示：

开始于： `<File name="LogData.txt" exclude="true"` 结束于： `</File>`

但我需要一些更通用的东西，它会忽略任何包含 exclude="true" 属性的 File 节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-26T11:29:51.627

你的解决方案是什么？您是否尝试过使用这样的正则表达式： [![在此处输入图像描述](../Images/dbf19a5b59dc60f3dfa28ea2323ddd87.png)](https://i.stack.imgur.com/UzfPw.png)

Text from-expression`<File (.*)exclude="true"`可以*尽可能频繁*`.*`地表达任何字符

 ** * *

另一种解决方案是使用外部转换。

我写了这样的小红宝石脚本：

```
File.open(ARGV.last, "w"){|f|
  f.write(File.read( ARGV.first).gsub( %r{<(.+?)\s[^>]+exclude="true".*?>(.*?)</\1>}m, ""))
} 
```

它将第一个参数作为源文件名，并将转换后的 xml 写入目标文件。

此脚本可用作转换工具：

[![在此处输入图像描述](../Images/fd10c29cae4ae2e1de5918abb879a84c.png)](https://i.stack.imgur.com/tmius.png)

这个比较： [![在此处输入图像描述](../Images/50e2e31b246498968cf10fb60d06f9bd.png)](https://i.stack.imgur.com/847v9.png) 变成 [![在此处输入图像描述](../Images/65295fee2829f4511cecf368a00497be.png)](https://i.stack.imgur.com/67WVE.png)

而不是脚本，我也成功地使用了一个班轮

## ruby -e "File.open('%t', 'w'){|f| f.write(File.read('%s').gsub( /]+exclude=.true.. *?>(.* ?)</File>/m, ''))}"

如果您将脚本调整为

```
File.open(ARGV.last, "w"){|f|
  f.write(File.read( ARGV.first).gsub( %r{(<(.+?)\s[^>]+exclude="true".*?>(.*?)</\2>)}m, "<!--\n\\1\n-->"))
} 
```

排除的部分不会被删除，而是设置为注释 ( `<!-- ... -->`)，您会得到： [![在此处输入图像描述](../Images/8c2bffe8a5d1b7c5bb760fd31eec6fcb.png)](https://i.stack.imgur.com/owTcg.png)

差异现在是一个不重要的差异（蓝色而不是红色），您可以忽略此差异。

备注： * 如果你想使用我的脚本你需要 ruby​​。* 如果需要，您可以用另一种语言编写转换脚本。* 我使用的正则表达式没有经过很好的测试。嵌套标签可能有问题。*

# c - 让用户在文件中搜索单词的程序

> ID：15511058
> 
> 赞同：3
> 
> 时间：2013-03-19T21:44:01.133
> 
> 标签：c, file

我正在尝试创建一个程序，让用户输入单词，然后程序在文件中搜索输入的单词。我相信在我的程序中发生的事情是，当我输入单词时，它不会从我输入的 char 数组的 0 开始

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char const *argv[])
{
int num =0;
char word[2000];
char *string;

FILE *in_file = fopen("words.txt", "r");
//FILE *out_file = fopen("output.txt", "w");

if (in_file == NULL)
{
    printf("Error file missing\n");
    exit(-1);
}

while(word[0]!= '0')
{
    printf("please enter a word(enter 0 to end)\n");
    scanf("%s",word);

    while(!feof(in_file))
    {
        fscanf(in_file,"%s",string);
        if(!strcmp(string,word))//if match found
        num++;
    }
    printf("we found the word %s in the file %d times\n",word,num );
    num = 0;
}

return 0;
 } 
```

有人可以帮助我让它重新读取到正确的位置吗？那么当它去比较单词时它会正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:46:44.523

您忘记为`char *string;`. 您的程序尝试`fscanf(in_file,"%s",string);`在未保留的内存中写入导致*未定义的行为*，然后很可能会崩溃。

替换`char *string;`为`char string[ MAX_WORD_LENGTH ]`

还有许多其他问题，例如您的搜索可能仅在第一次尝试时有效，因为您每次都在读取文件，一旦您点击 EOF，您将不再阅读。您应该在每次搜索时使用[fseek](http://en.cppreference.com/w/c/io/fseek)将位置指示器设置为文件的开头。

```
fseek ( in_file, 0, SEEK_SET ); 
```

同样使用[*strstr*](http://en.cppreference.com/w/c/string/byte/strstr)而不是*strcmp*可能会产生更好的结果。

# java - 为什么 flush() 在 PrintWriter 上影响 println()

> ID：15511059
> 
> 赞同：0
> 
> 时间：2013-03-19T21:44:01.220
> 
> 标签：java, stream

我有服务器的基本代码：

```
 ServerSocket serverSocket = new ServerSocket(14000);
        Socket clientSocket = serverSocket.accept();
        BufferedReader in = new BufferedReader(
                new InputStreamReader(clientSocket.getInputStream()));
        PrintWriter out = new PrintWriter(clientSocket.getOutputStream());
        String incoming;
        while((incoming = in.readLine()) != null){
            System.out.println("Client Says: " + incoming);
            out.println("Client Says: " + incoming);
            out.flush();
            //if(incoming.equals("HELLO")) break;
        }
        clientSocket.close();
        serverSocket.close(); 
```

我正在尝试进一步了解流，因为它们让我非常头疼。根据我的阅读，println 方法会自动为您刷新，但是除非之后调用刷新方法，否则此行不会传递给客户端？我只是在寻找一个很好的可靠解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:52:05.947

要启用 PrintWriter 的自动刷新，其构造函数的第二个参数必须设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:54:46.403

我之前遇到过这个问题，只是：

```
PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true); 
```

那会有所作为。如果您不自动刷新，您可能会收到一些错误或接收到 null 的数据，这发生在我前一段时间。最好的祝福。

# php - PHP Radius 或 radtest 简单半径认证

> ID：15511063
> 
> 赞同：1
> 
> 时间：2013-03-19T21:44:13.813
> 
> 标签：php, radius, freeradius

我目前正在使用 radtest 命令行工具来针对 radius 服务器对用户进行身份验证：

```
$response = exec("radtest $user $pass $server $port $secret | grep Access-Accept")

if($response!= "") {
  echo "access granted";
} 
```

是否有更集成的方法，可能为此使用 PHP 中的类或其他此类组件，这可能更有效或更安全（有人可以用收集凭据的可执行文件替换 radtest 可执行文件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:10:20.883

您是否尝试过[Auth_Radius](https://pear.php.net/package/Auth_RADIUS) PEAR 包类？

看起来它可能是针对 Radius 服务器进行身份验证的最简单的集成解决方案。它可能需要您安装[PECL radius 包](http://pecl.php.net/package/radius)，安装它的运气可能比我好！

# c# - 点击事件的函数

> ID：15511065
> 
> 赞同：0
> 
> 时间：2013-03-19T21:44:14.783
> 
> 标签：c#, picturebox, mouseclick-event

我想实现九人莫里斯游戏。我有一块板子，有 24 个图片框，左右两侧分别有 9 个红色图片框和 9 个绿色图片框。
我想将它们添加到列表中：

```
 List<PictureBox> ls = new List<PictureBox>();
 private void Form1_Load(object sender, EventArgs e)
    {

        for (int i = 1; i <= 24; i++)
        {
            PictureBox p = new PictureBox();
            p.Name = "pictureBox" + i;
            ls.Add(p);
        }

    } 
```

可以吗？

是否可以这样做：我想单击 24 个图片框之一，并使该图片框的背景变为一次绿色和一次红色？
我的意思是递归函数或类似的东西，当我点击图片框时可以识别，在列表中搜索该图片框并更改他的背景颜色？

![在此处输入图像描述](../Images/a4634e68f3a1db3182b18a82f81f4e67.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:47:12.507

您在这里不需要任何图片框列表。

```
for (int i = 1; i <= 24; i++)
{
     PictureBox p = new PictureBox();
     p.Click += p_Click;
     //of course, somecontrol.Controls.Add(p);
     //for ex: this.Controls.Add(p);
} 
```

-

```
void p_Click(object sender, EventArgs e)
{
    ((PictureBox)sender).BackColor = Color.Green;
} 
```

**编辑**

您似乎正在尝试向所有图片框添加事件处理程序

```
**parentControl**.Controls.OfType<PictureBox>()
                 .ToList().ForEach(p => p.Click+=p_Click); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:30:50.597

我假设 24 个 PictureBoxes 的列表应该代表 9 人 morris 板上可以放置玩家的人的点。

I4V 是对的，您需要做的就是为每个图片框添加一个点击处理程序。如果您想让背景在绿色和红色之间交替，请保留原始列表，但在其中添加点击处理程序

```
for (int i = 1; i <= 24; i++)
{
    PictureBox p = new PictureBox();
    p.Name = "pictureBox" + i;
    p.Click += p_Click; // <----------
    ls.Add(p);
} 
```

并修改 i4v 的点击处理程序以使用当前背景颜色来确定新的背景颜色。

```
void p_Click(object sender, EventArgs e)
{
    PictureBox p = (PictureBox)sender);
    p.BackColor = p.BackColor == Color.Green ? Color.Red : Color.Green;
} 
```

其他几点。

*   您没有设置初始背景颜色，因此在单击之前它将是默认颜色，当它被设置为绿色时（因为绿色不是默认背景颜色）。
*   为什么用列表索引 + 1 命名您的图片框？为什么不直接使用 List 索引和从 0: 开始的自然 C# 迭代`for (int i = 0; i < 24; i++)`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:50:16.183

您概述的方法不起作用，但是还有另一种方法可以使用`sender`传递给事件处理程序的对象来做同样的事情：

```
private void Form1_Load(object sender, EventArgs e)
{
    for (int i = 1; i <= 24; i++)
    {
        PictureBox p = new PictureBox();
        p.Name = "pictureBox" + i;
        p.Click += PictureBox_Click;
    }
}

void PictureBox_Click(object sender, EventArgs e)
{
    PictureBox event_picturebox = (PictureBox)sender;
    event_picturebox.BackColor = Color.White;
} 
```

您只需要将要运行此事件的每个图片框映射到同一个事件，然后该事件将能够在此图片框上执行操作，因为传入了对它的引用。

如果您已经在表单中定义了图片框，您只需要执行以下操作：

```
private void Form1_Load(object sender, EventArgs e)
{
    pictureBox1.Click += PictureBox_Click;
    pictureBox2.Click += PictureBox_Click;
    // and keep going

    // OR
    // this is a bit dangerous if you don't want ALL 
    // your picture boxes to have this event
    // also assumes that you know picturebox1 exists.
    foreach (object f in this.Controls)
    {
        if (f.GetType().Equals(pictureBox1.GetType()))
        {
            ((PictureBox)f).Click += button_Click;
        }
    }
} 
```

# php - PHP 通过 Dbus 与 NetworkManager 对话

> ID：15511066
> 
> 赞同：2
> 
> 时间：2013-03-19T21:44:18.857
> 
> 标签：php, debian, dbus

我在我的 debian 系统上设置了 NetworkManager、Dbus、Nginx Web 服务器、PHP 和 Dbus PHP 扩展。

我正在尝试通过我的 PHP Web 应用程序中的 Dbus 与 NetworkManager 进行“对话”。它在检索有关连接的信息时工作正常，如以下代码所示：

```
$dbus = new Dbus( Dbus::BUS_SYSTEM, true);
$proxy = $dbus->createProxy("org.freedesktop.NetworkManager", "/org/freedesktop/NetworkManagerSettings", "org.freedesktop.NetworkManagerSettings");
$d = $proxy->ListConnections(); 
```

，但是当我想添加一个新连接时：

```
$d = new Dbus( Dbus::BUS_SYSTEM, true );
$n = $d->createProxy( "org.freedesktop.NetworkManagerSystemSettings", "/org/freedesktop/NetworkManagerSettings", "org.freedesktop.NetworkManagerSettings");
$args = new DBusDict( DBus::STRUCT,
    array( 'connection' => new DBusDict( DBus::VARIANT,
      array( 'uuid' => new DBusVariant( "06bd5fb0-45f1-0bb0-7ffb-5f3ed6edd604" ),
          'id' => new DBusVariant( "PHP Added Network Connection" ),
          'type' => new DBusVariant( "802-3-ethernet" ),
          'autoconnect' => new DBusVariant(FALSE)
      )),
      '802-3-ethernet' => new DBusDict( DBus::VARIANT,
           array('duplex' => new DBusVariant( "full" )))),
'{sa{sv}}');
$n->AddConnection( $args ); 
```

，我得到这个错误：

致命错误：未捕获的异常“异常”，消息“DBusObject::_call(): org.freedesktop.NetworkManagerSettings.System.NotPrivileged: 权限不足。”<br>

我已将 www-data 用户添加到 /etc/dbus-1/system.d/NetworkManager.conf 并赋予他与 root 相同的权限

```
<policy user=”www-data”&gt;
<allow own=”org.freedesktop.NetworkManager”/>
<allow own=”org.freedesktop.NetwoekManagerSystemSettings”/>
<allow own=”org.freedesktop.NetworkManagerSettings”/>
<allow own=”org.freedesktop.NetworkManagerSettings.System”/>
<allow send_destinations=”org.freedesktop.NetworkManager”/>
<allow send_destinations=”org.freedesktop.NetworkManagerSystemSettings”/>
<allow send_destinations=”org.freedesktop.NetworkManagerSettings”/>
<allow send_destinations=”org.freedesktop.NetworkManagerSettings.System”/>
<allow send_destinations=”org.freedesktop.NetworkManager”
    send_interface=”org.freedesktop.NetworkManager.PPP”/>
</policy> 
```

，但它不会改变任何东西。我还将 www-data 添加到 root 和 netdev 组，但这也无济于事。

# dialog - 如何使用带下划线的字符导航 IntelliJ 对话框

> ID：15511071
> 
> 赞同：2
> 
> 时间：2013-03-19T21:44:44.947
> 
> 标签：dialog, navigation, intellij-idea

在 Mac OS 下的 IDEA (12) 中，如何使用从 Windows 中知道的下划线字符导航对话框窗口？

采取运行/调试配置对话框。在这里，所有选项名称的其中一个字符都带有下划线。在“名称”中，N 带有下划线。如何使用此导航到“名称”字段（因为仅按 N 使用或不使用任何常用修饰符均无济于事）？

谢谢/c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:10:48.897

使用`Alt`+ `N`(`Alt`是通用助记触发器)。

# image - 使用 ImageMagick 对图像进行上采样的最有效方法？

> ID：15511074
> 
> 赞同：0
> 
> 时间：2013-03-19T21:44:50.927
> 
> 标签：image, imagemagick, resampling

我有大量大小和分辨率各不相同的图像，我正在使用 ImageMagick 对低分辨率的图像进行上采样。到目前为止，我一直在使用`-resample option`with`-sharpen`如下：`convert [input image] -resample 500 -sharpen 0x2 [output image]`

问题是它似乎相当缓慢。该`-sample`选项要快得多，但质量会受到影响。我也在考虑切换到 GraphicsMagick 以提高性能。对这些图像进行上采样的最有效方法是什么？

一些背景：我正在对这些低分辨率图像进行上采样，以提高用于文本识别的 OCR 工具的准确性。图像质量差会导致 OCR 结果非常不准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:11:10.783

您可能不会获得任何显着的速度提升，但您可以尝试以下方法：

*   尝试不同的[重采样过滤器](http://www.imagemagick.org/Usage/filter/#filter)。
*   尝试不同（更小）的[支持窗口大小](http://www.imagemagick.org/Usage/filter/#support)。
*   删除额外的锐化步骤并改用[filter:blur 设置](http://www.imagemagick.org/Usage/filter/#blur)。

# r - R错误：下标超出了by（）与kappam.fleiss（）嵌套的界限

> ID：15511076
> 
> 赞同：1
> 
> 时间：2013-03-19T21:44:56.653
> 
> 标签：r, function, error-handling, subscript, r-factor

我有一个数据框，我想在其中为多个评估者在我的因素“形式”的多个级别上计算评估者协议 (Fleiss Kappa)。当我运行我的代码时，我收到以下错误：

```
**Error in factor(ratings[i, ], levels = lev) : subscript out of bounds** 
```

这是它的外观示例：

```
form <- c("B01","B01","B01","B02","B02","B02","B03","B03","B03")
word<-c("arch","avenue","concrete","devotion","equations","moth","piling","relate","cover")
B01200<-c(1,2,3,NA,NA,NA,NA,NA,NA)
B01209<-c(3,2,1,NA,NA,NA,NA,NA,NA)
B01214<-c(1,3,2,NA,NA,NA,NA,NA,NA)
B01228<-c(NA,NA,NA,NA,NA,NA, 2,2,1)
B01235<-c(NA,NA,NA,NA,NA,NA ,1,2,3)
B01242<-c(NA,NA,NA,NA,NA,NA, 3,3,1)
B02215<-c(NA,NA,NA ,2,1,1,NA,NA,NA)
B02217<-c(NA,NA,NA,2,1,1,NA,NA,NA)
B02222<-c(NA,NA,NA, 3,1,3,NA,NA,NA)
x <- data.frame(form,word,B01200,B01209,B01214,B01228,B01235,B01242,B02215,B02217,B02222)
x$form <-factor(x$form)
by(x,x[,"form"], function(x) kappam.fleiss(x[,-c(1:2)], detail=TRUE)) 
```

当我使用 str(x) 查看底层结构时，我看不出我的“form”变量有什么问题。

这是它显示的内容：

```
 'data.frame':   9 obs. of  11 variables:
     $ form  : Factor w/ 3 levels "B01","B02","B03": 1 1 1 2 2 2 3 3 3
     $ word  : Factor w/ 9 levels "architects","avenue",..: 1 2 3 5 6 7 8 9 4
     $ B01200: num  1 2 3 NA NA NA NA NA NA
     $ B01209: num  3 2 1 NA NA NA NA NA NA
     $ B01214: num  1 3 2 NA NA NA NA NA NA
     $ B01228: num  NA NA NA NA NA NA 2 2 1
     $ B01235: num  NA NA NA NA NA NA 1 2 3
     $ B01242: num  NA NA NA NA NA NA 3 3 1
     $ B02215: num  NA NA NA 2 1 1 NA NA NA
     $ B02217: num  NA NA NA 2 1 1 NA NA NA
     $ B02222: num  NA NA NA 3 1 3 NA NA NA 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-28T18:55:54.567

[irr 包](https://cran.r-project.org/web/packages/irr/irr.pdf)中的“以列表方式省略缺失的数据” ，也由`kappam.fleiss()`函数来正确计算 kappa 值。这基本上意味着，所有读者必须至少对您的一个案例进行评级，才能使该函数无错误地执行（即 no `NA`）。在您的数据中，没有任何行符合此条件（即每个案例至少有一个`NA`）。

举例说明：

*   作品：`kappam.fleiss(data.frame(c(1,3,4), c(1,3,3)))`
*   仍然有效：`kappam.fleiss(data.frame(c(1,3,4), c(1,3,NA)))`
*   仍然有效（但只给你 NaN）：`kappam.fleiss(data.frame(c(1,NA,4), c(1,3,NA)))`
*   给出一个错误（就像你的情况一样）：`kappam.fleiss(data.frame(c(1,NA,4), c(NA,3,NA)))`

根据您想要做什么，您可能会重组数据，或者将其拆分并分别测试子集？

# r - 如何在 x 轴上显示标签？

> ID：15511082
> 
> 赞同：1
> 
> 时间：2013-03-19T21:45:07.747
> 
> 标签：r

这是我的 .csv 文件：

```
dateval,links
18/03/2013,100
19/03/2013,200
20/03/2013,300
21/03/2013,400
22/03/2013,500 
```

这个文件被读入一个名为 date1 的对象，这是我用来绘制数据的代码：

```
g_range <- range(0, date1$links)
plot(date1$links, type="o", col="blue", ylim=g_range,
    axes=FALSE, ann=FALSE)
axis(1, xlab=date1$links)
box()
title(main="Additions", col.main="red", font.main=4)
axis(2, las=1, at=50*0:g_range[2])
title(xlab="Date", col.lab=rgb(0,0.5,0))
title(ylab="# Links", col.lab=rgb(0,0.5,0)) 
```

这是生成的图表：

![在此处输入图像描述](../Images/27d3a37309bcd2e819e04f7bebbd1be9.png)

不输出日期值，而是显示数字 1 - 5。如何修改代码以生成 .csv 文件中包含的日期值？我认为问题出在这条线上：`axis(1, xlab=date1$links)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:58:47.483

试试这个：

```
axis(1,at=1:5,labels = date1$dateval) 
```

所以，你会注意到，如果你仔细看，`?axis`你会发现根本没有`xlab`参数，但是第二个和第三个参数是：

> **at** - 要绘制刻度线的点。非有限（无限、NaN 或 NA）值被省略。默认情况下（当为 NULL 时）计算刻度线位置，请参阅下面的“详细信息”。
> 
> **标签**- 这可以是一个逻辑值，指定是否要在刻度线处进行（数字）注释，或者是要放置在刻度线处的标签的字符或表达式向量。（其他对象由 as.graphicsAnnot 强制。）如果这不合逻辑，还应该提供 at 并且具有相同的长度。如果标签在强制之后的长度为零，则它与提供 TRUE 的效果相同。

但实际上也许你应该做更多这样的事情：

```
date1$dateval <- as.Date(date1$dateval,format = "%d/%m/%Y")
plot(date1$dateval,date1$links, type="o", col="blue", ylim=g_range, ann=FALSE,axes = FALSE)
axis(1,at=date1$dateval,labels = date1$dateval) 
```

但与使用专门为此目的设计的包/函数相比，即使这样也是一种处理绘图日期的粗略方式。

# algorithm - 使用来自第二个向量的分组对向量执行布尔运算

> ID：15511089
> 
> 赞同：3
> 
> 时间：2013-03-19T21:45:48.380
> 
> 标签：algorithm, r, boolean, grouping

我有两个带有二进制值的向量，它们表示有关某些数据向量的信息。第一个向量标识数据向量的某个元素是否损坏。第二个向量标识其他元素受到影响并因此也被破坏的范围。向量看起来像这样。

```
itself_broken = c(FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, TRUE, FALSE)
startpoint = c(TRUE, FALSE, FALSE, TRUE, FALSE, TRUE, FALSE, FALSE) 
```

我现在想找出所有在以下意义上被破坏的元素：如果两个起点之间的一个元素被破坏，那么这两个起点之间的所有其他元素（包括左起点）也是如此。所以在上面的例子中，结果向量应该是：

```
all_broken = c(FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE) 
```

我可以通过对每个向上的 selfs_broken 元素使用循环来实现这一点，将元素标记为已损坏，直到到达起点。但这对我来说似乎效率很低。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:55:42.463

像这样：

```
ave(itself_broken, cumsum(startpoint), FUN = any) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:28:24.407

使用`aggregate`和`cumsum`

```
> itself_broken <- c(F,F,F,F,T,F,T,F)
> startpoint <- c(T,F,F,T,F,T,F,F)
> cs <- cumsum(startpoint)
> cs
[1] 1 1 1 2 2 3 3 3 
```

`cs`标识组

```
> agg <- aggregate(itself_broken, by=list(group=cs), FUN=any)
> agg
  group     x
1     1 FALSE
2     2  TRUE
3     3  TRUE 
```

`agg`告诉哪些组被破坏了。现在将其与您的原始数据合并：

```
> merge(data.frame(group=cs, sp=startpoint, it=itself_broken), agg)
  group    sp    it     x
1     1  TRUE FALSE FALSE
2     1 FALSE FALSE FALSE
3     1 FALSE FALSE FALSE
4     2  TRUE FALSE  TRUE
5     2 FALSE  TRUE  TRUE
6     3  TRUE FALSE  TRUE
7     3 FALSE  TRUE  TRUE
8     3 FALSE FALSE  TRUE 
```

# java - 将 Button 更改为 JButton 无法修复它（（（

> ID：15511092
> 
> 赞同：0
> 
> 时间：2013-03-19T21:45:56.360
> 
> 标签：java, image, swing, button, jbutton

我被困在使用 Button 和 JButton

预期结果..（所有信息有效） [http://i.stack.imgur.com/3qX7v.png](http://i.stack.imgur.com/3qX7v.png) 和我有什么 [http://i.stack.imgur.com/a4gao.png](http://i.stack.imgur.com/a4gao.png)

我想替换这个：

```
Button butRock = new Button("Rock");
butRock.addActionListener(this);
ButtPan.add(butRock); 
```

对此：

```
BufferedImage buttonIcon = ImageIO.read(new File("rock.jpg"));
JButton butRock = new JButton(new ImageIcon(buttonIcon));
butRock.addActionListener(this);
ButtPan.add(butRock); 
```

我被卡住了，因为当我将 Button 替换为 JButton 时，程序无法正常工作......当我使用这个 JButton 问题：如何用图片替换按钮并且该程序仍然正常工作......

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;
public class gui extends JFrame implements ActionListener
{
    public JLabel JWoL,JWoLPlayer,JWoLPC,JNumWin,JNumLose,JNumTie, logo;
    public JLabel JWinT,JLoseT,JTieT, rpsP, rpsC, result;
    JPanel LabelsPan;
    static final int WINS = 0, LOSSES = 1, DRAWS = 2;
    int[] counts = new int[3];
    String[] strings = {"| You Win", "| You Lose", "| Draw"};
    JLabel[] labels = {JNumWin, JNumLose, JNumTie};

    @SuppressWarnings("deprecation")
    public static void main(String[] args) throws IOException
    {
        gui theWindow = new gui();
        theWindow.show();
    }

    private void record(int type)
    {
        JWoL.setText(strings[type]);
        counts[type]++;
        labels[type].setText(""+counts[type]);
    }

    public gui() throws IOException
    {
        JPanel logo = new JPanel();
        logo.setLayout(new GridLayout(1,1));

        BufferedImage myPicture = ImageIO.read(new File("logo.jpg"));
        JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
        add(picLabel);

        JPanel ButtPan=new JPanel();
        ButtPan.setLayout(new GridLayout(1,3));

        BufferedImage buttonIcon = ImageIO.read(new File("rock.jpg"));
        JButton butRock = new JButton(new ImageIcon(buttonIcon));
        butRock.addActionListener(this);
        ButtPan.add(butRock);

        Button butPaper = new Button("Paper");
        butPaper.addActionListener(this);
        ButtPan.add(butPaper);

        Button butScissors = new Button("Scissors");
        butScissors.addActionListener(this);
        ButtPan.add(butScissors);

        JWoLPlayer = new JLabel();
        JWoLPC = new JLabel();
        JWoL= new JLabel();

        JLabel rpsPlayer= new JLabel("| Your Choice:  ");
        JLabel rpsComputer= new JLabel("| Computers Choice:  ");
        setTitle("| RoPaS GAME |");

        LabelsPan=new JPanel();
        LabelsPan.setLayout(new GridLayout(3,2));

        rpsP = new JLabel();
        LabelsPan.add(rpsPlayer);
        LabelsPan.add(JWoLPlayer);

        rpsC = new JLabel();
        LabelsPan.add(rpsComputer);
        LabelsPan.add(JWoLPC);

        result =new JLabel();
        LabelsPan.add(JWoL,"Center");

        JPanel WLPan = new JPanel();
        WLPan.setLayout(new GridLayout(3, 2));

        JWinT = new JLabel("Wins: ");
        JLoseT = new JLabel("Losses: ");
        JTieT = new JLabel("Ties: ");

        WLPan.add(JWinT);
        JNumWin = new JLabel();
        WLPan.add(JNumWin);
        WLPan.add(JLoseT);

        JNumLose = new JLabel();
        WLPan.add(JNumLose);
        WLPan.add(JTieT);

        JNumTie = new JLabel();
        WLPan.add(JNumTie);
        JLabel[] labels1 = {JNumWin, JNumLose, JNumTie};
        labels = labels1;

        JPanel TwoPanesN1=new JPanel();

        TwoPanesN1.setLayout(new BorderLayout());
        TwoPanesN1.add(logo,"North");
        TwoPanesN1.add(LabelsPan,"West");
        TwoPanesN1.add(WLPan,"East");

        getContentPane().setLayout(new GridLayout(3,2));
        getContentPane().add(ButtPan);
        getContentPane().add(TwoPanesN1);

        Font fontDisplay = new Font("Arial", Font.BOLD, 16);
        JWoL.setFont(fontDisplay);
        LabelsPan.setFont(fontDisplay);
        setSize(400,250);
        setVisible(true);
        setResizable(false);

        addWindowListener(new WindowAdapter() {public void windowClosing(WindowEvent ev){System.exit(0);}});
    }

    public void Play(String PlayerChoice)
    {
        String PCchoice=PCansw();
        JWoLPC.setText(PCchoice);

        if(PlayerChoice.equals(PCchoice))
            record(DRAWS);

        else if(PlayerChoice.equals("Rock"))
            if(PCchoice.equals("Paper"))
                record(LOSSES);
            else
                record(WINS);

        else if(PlayerChoice.equals("Paper"))
            if(PCchoice.equals("Scissors"))
                record(LOSSES);
            else
                record(WINS);

        else if(PlayerChoice.equals("Scissors"))
            if(PCchoice.equals("Rock"))
                record(LOSSES);
            else
                record(WINS);

    }

    public String PCansw()
    {
        String rpsPC2="";
        int rpsPC=(int)(Math.random( )*3)+1;
        if(rpsPC==1)
            rpsPC2= "Rock";
        else if(rpsPC==2)
            rpsPC2= "Paper";
        else if(rpsPC==3)
            rpsPC2= "Scissors";
        return rpsPC2;
    }

    public void actionPerformed(ActionEvent e)
    {
        if(e.getActionCommand().equals("Exit"))
            System.exit(0);
        else
        {
            JWoLPlayer.setText(e.getActionCommand());
            Play(e.getActionCommand());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:23:53.257

问题是您正在使用`getActionCommand`来确定`JButton`单击了哪个，但默认情况下在 Swing 中未设置此属性。你必须打电话

```
butRock.setActionCommand("Rock"); 
```

`java.awt.Button``ActionCommand`如果未明确设置，则自动使用标签属性。从[文档](http://docs.oracle.com/javase/7/docs/api/java/awt/Button.html#getActionCommand%28%29)

> If the command name is null (default) then this method returns the label of the button.

* * *

*Some asides:*

*   Better to avoid [mixing heavy & lightweight components](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html) and use lightweight components throughout the application.
*   As your *Rock*, *Paper*, *Scissors* buttons have identical functionality, consider using an [Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html).
*   A direct instance `JFrame` is typically used rather than extending the class
*   Use [Initial Threads](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)
*   [Window#show](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#show%28%29) is *deprecated*. Use `Window#setVisible`.
*   Don't use `System.exit` - See more [here](https://stackoverflow.com/questions/258099/how-to-close-a-java-swing-application-from-the-code)

# javascript - 如何加载添加了 jQuery 的页面

> ID：15511096
> 
> 赞同：0
> 
> 时间：2013-03-19T21:46:03.130
> 
> 标签：javascript, jquery, html, transitions

我注意到很多网站（比如 Hulu.com）都有非常有趣的页面转换。他们设法淡出页面并进入新页面。

这将如何使用 jQuery/Javascript 来完成。我是否必须以某种方式将 .js 链接到两个网页？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:49:48.407

您可以结合使用[History API](http://diveintohtml5.info/history.html)的 PushState 部分（[pjax](https://github.com/defunkt/jquery-pjax)是一种将其添加到现有站点的绝佳方式）和 jQuery。这就是 github 处理它的方式（尝试浏览源代码文件夹，并查看 URL）。pjax 允许您`<a>`在页面重定向之前拦截任何点击，获取将通过 ajax 加载的页面，在页面中插入 HTML（您可以使用 jQuery 动画控制`fadeIn()`）并更新浏览器 URL，以便页面可以书签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:48:44.830

两个页面都不需要 .js 引用，只需要之前的页面。有许多支持大多数转换的 jQuery 插件。

尽管 2010 年已经过时，但这看起来是一个非常全面的列表。 [http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/](http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/)

# python - 如何接受包含转义字符的字符串python

> ID：15511105
> 
> 赞同：0
> 
> 时间：2013-03-19T21:46:33.560
> 
> 标签：python, string, escaping

如果用户输入一个包含转义字符的字符串（例如“Example\”或“C:\Users...），我想完全按原样接受它。换句话说，我试图规避抛出的语法错误处理上述输入时。

我觉得它应该很简单，但答案让我难以捉摸。有什么帮助吗？

编辑：我在 python 3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:48:10.580

不要使用`input()`; `raw_input()`在接受字符串输入时使用。

`input()`（在 Python 2 上）尝试将输入字符串解释为 Python，`raw_input()`根本不尝试解释文本，包括不尝试将`\`反斜杠解释为转义序列：

```
>>> raw_input('Please show me how this works: ')
Please show me how this works: This is \n how it works!
'This is \\n how it works!' 
```

在 Python 3 上，使用 just `input()`（这是 Python 2 的`raw_input()`重命名）；除非你也使用`eval()`它*不会*解释转义码：

```
>>> input('Please show me how this works: ')
Please show me how this works: This is \n how it works!
'This is \\n how it works!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-14T05:53:12.553

如果您使用的是 python 2.7，请使用 raw_input() ，它接受带有特殊字符的字符串。

示例程序

```
$vi demo.py

str1=raw_input("Enter the file with full path : ")

print "Given Path is : ",str

save and quit from vi editor

Output 

$python demo.py

Enter the path :/home/ubuntu/deveops

Given path is  :  /home/ubuntu/deveops

$ python demo.py

Enter the path :\home\ubuntu\deveops

Given path is  :  \home\ubuntu\deveops 
```

如果您使用的是 python3，请使用 input()，它接受带有特殊字符的字符串，因为 python3 没有 raw_input() 函数

```
$vi demo1.py

 str1=input("Enter the file with full path : ")

 print ("Given Path is : ",str1)

save and quit from vi editor

Output

$python demo1.py

Enter the path :/home/ubuntu/deveops

Given path is  :  /home/ubuntu/deveops

$ python demo1.py

Enter the path :\home\ubuntu\deveops

Given path is  :  \home\ubuntu\deveops 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T17:38:10.987

处理输入时，使用`eval()`函数。将输入`eval()`作为参数传递给函数。例如：Python 3

```
x=input()
x=eval(x) 
```

或者

```
x = eval ( input() ) 
```

```
input the following value:
\N{superscript two}

print ( x ) 
```

**输出**： `²`

# jquery - 单击按钮时仅播放视频的特定部分

> ID：15511108
> 
> 赞同：0
> 
> 时间：2013-03-19T21:46:36.123
> 
> 标签：jquery, html, video

我在我的页面上设置了一个视频播放器，我已经做到了，当你点击一个按钮时，它会跳到某个部分。这很好用，但是当它到达某个部分时，我希望视频停止或暂停。

我不知道从哪里开始，但我会将现有代码放入：

```
var myvideo = document.getElementById('myvideo'),
                    playbutton = document.getElementById('playme'),
                    jumplink1 = document.getElementById('jump');
                    jumplink2 = document.getElementById('jump1');
                    jumplink3 = document.getElementById('jump2');
                    jumplink4 = document.getElementById('jump3');

                jumplink1.addEventListener("click", function (event) {
                    event.preventDefault();
                    myvideo.play();
                    myvideo.pause();
                    myvideo.currentTime = 40.1;
                    myvideo.play();
                }, false);

                 jumplink2.addEventListener("click", function (event) {
                    event.preventDefault();
                    myvideo.play();
                    myvideo.pause();
                    myvideo.currentTime = 85;
                    myvideo.play();
                }, false);

<video id="myvideo" width="620">
                  <source src="video/1.William Morrison_short-comp.mp4" type="video/mp4"></source>
                    Your browser does not support HTML5 video.
                </video>

                  <p id="play-me-hover">
                      <button id="playme" id="playme">play full interview</button>
                  </p>
                  <p id="jump-hover">
                      <button class="video-button" id="jump">courses</button>
                  </p>

                  <p>
                      <button class="video-button" id="jump1">surgeons</button> 
```

# scala - 使用 Play 框架和 Anorm 持久化列表

> ID：15511109
> 
> 赞同：2
> 
> 时间：2013-03-19T21:46:36.380
> 
> 标签：scala, playframework-2.0, persistence, anorm

我目前正在使用 Play 框架在 Scala 中开发一个小型应用程序，我想保留用户所做的操作列表。是否可以像我一样使用 Anorm 来存储一个简单的 id 列表（List[Long]）？

否则，我还能用什么来使它工作？我是否需要使用[Scala Play 中解释的 ORM！使用 anorm 还是 ORM](https://stackoverflow.com/questions/10952330/scala-play-using-anorm-or-orm)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:24:57.817

如果您正在谈论持久化到 SQL 数据库，那么 Anorm 肯定可以为您处理。

在最基本的层面上，您可以在 SQL 数据库中创建一个长整数表，然后使用 Anorm 来持久化您的列表。假设您将整数存储在一个名为的单列表中`UserActions`，其唯一的列名为`action`：

```
def saveList(list: List[Long]) = {
  DB.withConnection { implicit connection =>
    val insertQuery = SQL("insert into UserActions(action) values ({action})")
    val batchInsert = (insertQuery.asBatch /: list)(
      (sql, elem) => sql.addBatchParams(elem)
    )
    batchInsert.execute()
  }
} 
```

我为您整理了一个小演示，并将其推送到 Heroku，我将很快更新链接（编辑：Heroku 和我今晚相处不来，抱歉）。

代码在我的 Github 中：[https ://github.com/ryantanner/anorm-b​​atch-demo](https://github.com/ryantanner/anorm-batch-demo)

查看 models/UserActions.scala 以专门找到该片段。其余的只是让演示更有趣。

现在，我将退后一步，问问自己需要哪些有关这些用户操作的信息。从语义上讲，那个 List[Long]是什么*意思*？您是否需要存储有关这些用户操作的更多信息？它实际上应该是（UserID，PageVisited，Timestamp）的行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:32:21.780

*未经测试*

我认为您需要像这样创建一个批量插入语句：

```
 val insertStatement = 
    SQL("""INSERT INTO UserOperations (id) VALUES ({id})""")
   .asBatch
   .addBatchParamsList(List(Seq(1),  Seq(2)))
   .execute() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T09:07:36.440

Anorm 的 BatchSql 最近更新了。你可能想看看最新的。

# javascript - 自动点击childNode

> ID：15511113
> 
> 赞同：0
> 
> 时间：2013-03-19T21:46:55.867
> 
> 标签：javascript, reportviewer, report-viewer2010

我正在使用以下脚本，但它在我单击的部分不起作用。我需要自动单击 childNodes。

```
<script type="text/javascript">
    window.onload = function () {
        var formatDropDown = document.getElementById('rvProcess_ctl05_ctl04_ctl00_Menu');
        var formats = formatDropDown.childNodes;

        if (formatDropDown != null) {
            formatDropDown.removeChild(formats[3]);
            formatDropDown.removeChild(formats[1]);
        }

        **var item = formatDropDown.getElementsByTagName('LI')[2];
        item.click();**

    }
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:21:59.687

您可以显示为您列表的 HTML 代码吗？拥有这个 html 代码一切正常

```
<ul id="rvProcess_ctl05_ctl04_ctl00_Menu"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li></ul> 
```

当您想使用子节点时，我建议您在一行中编写代码。空格和换行符被视为文本类型的子项。如果最后一个 li 点击，我实现了一个 jQuery 尝试，我做了以下操作：

```
window.onload = function () {
            $("li").click(function(e){
                alert("clicked");
            });
            var formatDropDown = document.getElementById('rvProcess_ctl05_ctl04_ctl00_Menu');
            var formats = formatDropDown.childNodes;
            if (formatDropDown != null) {
                formatDropDown.removeChild(formats[3]);
                formatDropDown.removeChild(formats[1]);
            }

            var item = formatDropDown.getElementsByTagName('LI')[2];
            item.click();
        } 
```

它工作完美。

# r - 在 rpy2 中捕获 R 错误

> ID：15511114
> 
> 赞同：1
> 
> 时间：2013-03-19T21:46:58.800
> 
> 标签：r, exception-handling, rpy2

当我使用 RStudio 时，我可以在运行函数时看到任何错误或警告。

但是，当我使用 rpy2 时，如何捕获警告（允许代码运行）和错误（使代码停止），以便我可以在 python 中以编程方式解析消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:02:09.807

在 R-3.0（当前未发布）之前，警告默认打印到控制台。从 R-3-0 开始，它们不再被打印出来，因为 R 开发人员隐藏了以前使用的 C 函数（并且忙于记录原因并告诉我们是否可以重新访问该函数）。

要将警告作为 rpy2 对象获取，您可以执行以下操作：

```
from rpy2.robjects.packages import importr
base = importr('base')
# do things that generate R warnings
base.warnings() 
```

评估 R 代码时发生的错误会引发`rpy2.rinterface.RRuntimeError`. 抓住那些。

# asp.net-mvc - ASP .Net MVC DisplayFormat NullDisplayText 样式

> ID：15511115
> 
> 赞同：0
> 
> 时间：2013-03-19T21:46:59.227
> 
> 标签：asp.net-mvc

我目前正在我`[DisplayFormat(NullDisplayText="No Value")]`的一个模型中使用，但我正在寻找一种方法来使渲染输出使用`@Html.DisplayFor()`, 与具有值的属性的样式不同（我希望它稍微变灰以分散注意力）。

是否有可能做到这一点？我尝试将 HTML 放入 NullDisplayText 字符串，但没有成功。

# entity-framework - 在 Sql Azure 上，重复的数据库出现在方括号中

> ID：15511121
> 
> 赞同：1
> 
> 时间：2013-03-19T21:47:15.970
> 
> 标签：entity-framework, azure, azure-sql-database

我有一个名为 Palladium 的 SQL Azure 数据库。

我刚刚登录到 Windows Azure 门户，Palladium 现在出现了两次，副本名为 [Palladium] 并带有方括号。

知道这是什么吗？

我正在使用 Code First 并且我一直在摸索不同的连接字符串（今天的严重问题......），它们实际上都出于某种原因指定了 [Palladium]。当我进入新的并单击以生成连接字符串时，它实际上是 [[Palladium]]]。没错，就是最后三个方括号。

我*正在*使用带有代码优先的实体框架，但据我所知，实际删除和修改数据库的部分已被禁用。

**解决方案：**我仍然不知道那个数据库是什么。它似乎是空的，并且门户似乎被它弄糊涂了（不让我删除它，选择某些东西等）。但是，通过 SSMS，我可以毫无问题地放弃它，现在一切似乎都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:48:47.213

Brian，尽管您似乎已经解决了您的特定问题，但我想在此处添加一条消息，因为这是针对数据库名称中存在 [] 方括号问题的人的第一批 Google 搜索结果之一。

我以前遇到过这个问题，数据库名称在 azure 上似乎有方括号 []。就我而言，这不是代码优先。假设我使用 Azure 门户创建了一个新数据库，并将其命名为 Palladium。为了获取它的连接字符串，我转到 sql 数据库的仪表板页面，然后单击右侧出现的“显示连接字符串”链接。此连接字符串需要放置在您的 web.config 文件中，以替换 connectionstring="" 的内容。在此之前，请注意由于某种原因连接字符串包含字符串“Database=[Palladium]”。我相信你已经注意到了这一点。这是一个问题。。我不知道为什么Azure坚持在数据库名称周围加上[]，但是在将 Palladium 用作连接字符串之前，您必须从 Palladium 周围删除这些方括号。（也不要忘记用实际密码替换字符串“{your_password_here}”）。

这解决了我的问题，几个月来我一直在例行执行此操作，没有任何问题。仍然不知道为什么 Azure 将 [] 放在首位。

我认为这个解决方案甚至适用于使用 codefirst 的人，因为您仍然需要在 Azure 上创建数据库并获取连接字符串，因为代码首先创建表，而不是数据库本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:41:56.377

我可以告诉你为什么创建数据库 - 它是由 ASP.Net 通用提供程序创建的。

如果您检查了 [Palladium] 数据库中的表，您会注意到只有 ASP.Net 通用提供程序使用的成员表。（应用程序、成员资格、配置文件、角色、用户和 UsersInRoles）

这些提供程序的功能之一是它们可以在您的数据库中自动为您创建成员资格表。这就是发生在您身上的事情 - 正如加里的回答所示，web.config 周围有方括号。因此，成员表的自动创建过于字面化地使用了该连接字符串，并创建了一个带有方括号的数据库。

我很想知道您是否在 web.config 中留下了方括号并刚刚删除了数据库。如果它在这些条件下开始工作，那么这向我表明这一定是 Azure 错误。

# android - 除了使用 onNewIntent() 方法之外，我能否在我的 Android 应用程序中获得 Twitter API 响应？

> ID：15511123
> 
> 赞同：1
> 
> 时间：2013-03-19T21:47:29.590
> 
> 标签：android, twitter, twitter4j

我在Android开发方面没有太多经验。我正在开发可以与 Facebook、Twitter、LinkedIn 和 Google+ 通信的应用程序。

每个社交网络都有自己的包装器，用于处理 Android 应用程序和社交网络之间的通信。Facebook 通信已经完成。我在 Twitter 通信方面遇到问题。我在互联网上找到的实现使用 twitter4j 库和互联网浏览器进行日志记录。然后您必须从浏览器读取响应数据。

例如：[Twitter 测试应用](https://github.com/punitmg/Twitter-Test-App)

我的问题是从浏览器读取此响应数据。在浏览器中登录和授权没有问题。我上面提到的教程通常使用 onNewIntent() Activity 方法来处理浏览器响应。但我不能使用这种方法，因为它用于不同的目的。我不知道是否可以在没有除 MainActivity 之外的任何其他 Activity 的情况下执行此操作，或者我需要在包装器中创建另一个 Activity 来处理整个 Twitter 通信。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:34:31.080

我真的不知道为什么互联网上有这么多 twitter4j 的示例通过意图和自定义方案来处理回调 URL。在大多数情况下，我觉得这很尴尬。我也不喜欢离开应用程序去浏览器登录。

相反，请尝试使用 a`WebView`来加载页面。然后你可以附加一个`WebViewClient`可以检测回调 URL 的。您也不必处理更改清单等。你可能会做这样的事情，也许在`onCreateView`里面`DialogFragment`：

```
mWebView = new WebView(context);
mWebView.setWebViewClient(new WebViewClient() {
    @Override
    public void onLoadResource(WebView view, String url) {
        if (url.startsWith(CALLBACK_URL)) {
            Uri uri = Uri.parse(url);
            String denied = uri.getQueryParameter("denied");
            if (denied != null) {
                // handle denied
            } else {
                // handle authenticated
            }
        }
        super.onLoadResource(view, url);
    }
}); 
```

然后您可以加载身份验证 URL `onViewCreated`（如果您在 a 中执行此操作`DialogFragment`）：

```
 Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
    RequestToken reqToken = twitter.getOAuthRequestToken();
    mWebView.loadUrl(reqToken.getAuthenticationURL()); 
```

# asp.net - 在 response.redirect 上未设置 Cookie

> ID：15511124
> 
> 赞同：1
> 
> 时间：2013-03-19T21:47:42.860
> 
> 标签：asp.net, cookies

我正在尝试创建一个能够将用户登录信息（用户 ID/用户名）保存在 cookie 中的登录页面（尽管会话变量用于立即存储该站点）。我正在使用下面的代码：

```
 Session("UserID") = USERS.GetUserID(Request.Form("UserName"))
            Session("FullName") = USERS.GetUserFullName(Session("UserID"))
            If Request.Form("RememberMe") = "True" Then
                Response.Cookies("UserID").Value = Session("UserID").ToString
                Response.Cookies("UserID").Expires = Now.AddDays(30)
                Response.Cookies("FullName").Value = Session("FullName").ToString
                Response.Cookies("FullName").Expires = Now.AddDays(30)
            End If
            Response.Redirect("~/VetPortal/Default.aspx") 
```

我可以使用 Visual Studio 逐步跟踪这一点，一切正常。会话变量已设置，cookie 已正确创建。问题是当重定向页面被加载时，cookies 不再存在。我在设置阻止它们被保留的 cookie 时是否遗漏了一些东西？据我了解，它们应该保留到到期（今天 + 30 天）。

# javascript - 信息窗口中的 href 映射 api v3

> ID：15511125
> 
> 赞同：0
> 
> 时间：2013-03-19T21:47:48.077
> 
> 标签：javascript, google-maps-api-3, polygon, declaration, infowindow

*可以从信息窗口*中的链接调用*JavaScript*吗？知道这是可能的，但就我而言，我不知道如何声明*i*？

 **i 是一个多边形数，表示调用*函数 kmlShowPlacemark(i)*

这是我的例子：

```
function clickablePolygon(placemark, info, i) {
     var name = geoXmlDoc.placemarks[i].name;
     var numMkrs = geoXmlDoc.placemarks[i].numMarkers;
     google.maps.event.addListener(placemark.polygon, "click", function(e) {
        if (e && e.latLng) {
             infowindow.setPosition(e.latLng);
        } else {
             infowindow.setPosition(placemark.polygon.bounds.getCenter());
        }
    infowindow.setContent('<div class="geoxml3_infowindow"><h3>' + placemark.name +
           '</h3><div>' + info + '<br><a href="javascript:kmlShowPlacemark('+ i + ');">Show place</a></div>');
        infowindow.open(map); 
     });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:51:14.557

这对我有用，看起来您在 InfoWindow 中的 HTML 无效（这是我看到的唯一真正的区别）：

```
function clickablePolygon(placemark, info, i) {
  google.maps.event.addListener(placemark.polygon, "click", function(e) {
    if (e && e.latLng) {
      infowindow.setPosition(e.latLng);
    } else {
      infowindow.setPosition(placemark.polygon.bounds.getCenter());
    }
    infowindow.setContent('<div class="geoxml3_infowindow"><h3>' + placemark.name +
               '</h3><div>' + info + '</div>'+'<br><a href="javascript:kmlShowPlacemark('+ i + ');">Show place</a></div>');
    infowindow.open(map);
  });
} 
```

[修改后的概念证明](http://www.geocodezip.com/geoxml3_test/mini_hr_stanonline_test_mouseover_20130319.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:13:02.407

请尝试以下方法：

**代替：**

```
<a href="javascript:kmlShowPlacemark('+ i + ');">Show place</a> 
```

**和**

```
<a href="#" onclick="kmlShowPlacemark('+ i + '); return false;">Show place</a> 
```**

# c# - 使用 C# 运行可执行文件并显示确认？

> ID：15511129
> 
> 赞同：1
> 
> 时间：2013-03-19T21:47:57.210
> 
> 标签：c#, executable, confirmation

我正在做一些 C# 代码，我想在按下图像时运行 .exe。它以这种方式工作正常：

```
private void pictureBox1_Click(object sender, EventArgs e)
{
    Process.Start("C:\\something.exe");
} 
```

但是，如何添加一条消息，当您单击图像时，会出现一个框询问您是否真的要运行 .exe？

如果有人可以帮助我，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:51:31.503

您可以使用`MessageBox`via [`MessageBox.Show`](http://msdn.microsoft.com/en-us/library/0x49kd7z.aspx)：

```
private void pictureBox1_Click(object sender, EventArgs e)
{
    if (MessageBox.Show("Are you sure?", "Do you want to start something.exe?", MessageBoxButtons.YesNo) == DialogResult.Yes)
    {
        Process.Start("C:\\something.exe");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:52:57.703

你可以使用简单的`MessageBox`

```
private void pictureBox1_Click(object sender, EventArgs e)
    {
       if(MessageBox.Show("Are you really sure you want to run the program?", "Notification", MessageBoxButtons.OKCancel) == DialogResult.OK)
         Process.Start("C:\\something.exe");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:53:40.400

试试这个：

```
private void pictureBox1_Click(object sender, EventArgs e)
{
    if(MessageBox.Show("Are you sure?", "Caption", MessageBoxIcon.Question, MessageBoxButtons.YesNo) == DialogResult.Yes)
    {
        Process.Start("C:\\something.exe");
    }
} 
```

# asp.net-mvc-3 - 表单提交内的 JQuery 确认对话框中的问题

> ID：15511132
> 
> 赞同：0
> 
> 时间：2013-03-19T21:48:05.280
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery

在一个 JQuery 对话框中，我有四个字段。当我单击保存按钮时，我需要检查并验证以下内容

1.  验证所有必填字段（在使用 validate.js 和 unobtrusive.js 提交表单时）
2.  检查下拉列表的值，如果它属于特定类型，即（冗余），则向用户显示确认对话框。
3.  如果用户按 Yes 确认，则关闭确认对话框并调用 Ajax

但问题是当我通过单击确认对话框上的“是”按钮进行确认时，对话框关闭但执行没有停止。

即，序列化表单数据并进行 Ajax 调用以调用 Web 服务。

请任何人都可以帮忙。

```
$(function () {

        $('form').submit(function () {

            $('#result').html(" ");

            var redunt = null;
            redunt = $(ClientCrud_StatusCodeId).find('option:selected').text();

            if ($(ClientCrud_StatusCodeId).find('option:selected').text() == "Redundant") {
                $('#clientRedundantMessage2').html("Client once made redundant cannot be reactivated. Are you sure ?");
                $("#RedundantMessage2").dialog(
                    {
                        autoOpen: false,
                        height: 170,
                        width: 420,
                        modal: true,
                        resizable: false,
                        title: "Confirmation for Redundant",
                        Content: "Fields cannot be left blank.",
                        buttons: {
                            "Yes": function () {
                                redunt = "Active";
                                $('#RedundantMessage2').dialog('close');
                            },
                            "No": function () {
                                $(this).dialog("close");
                                return false;
                            }
                        }
                    }) //.dialog("widget").draggable("option", "containment", "none");
                $("#RedundantMessage2").dialog("open");
            }

            if ($(this).valid()) 
            {
                debugger;
                if (redunt == "Active") {

                    $.ajax({
                        url: this.action,
                        type: this.method,
                        async: false,
                        cache: false,
                        data: $(this).serialize(),
                        error: function (request) {
                            $("#result").html(request.responseText);
                            //    event.preventDefault();
                        },
                        success: function (result) {
                            if (result == "success") {
                                $.ajax({
                                    url: "/Client/ClientGrid",
                                    type: 'POST',
                                    data: { "page": 0 },
                                    datatype: 'json',
                                    success: function (data) {
                                        $('#grid').html(data);
                                    },
                                    error: function () {
                                        alert('Server error');
                                    }
                                });

                                $('#myEditClientDialogContainer').dialog('close');
                                $('#myEditClientDialogContainer').remove()
                            }
                            else {
                                clearValidationSummary();
                                var a = '<ul><li>' + result + '</li></ul>';
                                $('#result').html(a);

                            }
                        }
                    });
                }
            }

            $("#griderrormsg1 li").hide().filter(':lt(1)').show();
            return false;
        });

        editallowed = true;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:09:12.000

我认为您的代码序列有问题，当函数`$("#RedundantMessage2").dialog( ...... );`执行时，在这种情况下不等待用户响应“是”或“否”所以......你的标志`redunt = "Active"`没有意义。

按钮选项具有在选择选项时执行的功能，因此您必须调用一个函数来执行帖子

```
$(function () {

        $('form').submit(function () {

            $('#result').html(" ");

            var redunt = null;
            redunt = $(ClientCrud_StatusCodeId).find('option:selected').text();

            if ($(ClientCrud_StatusCodeId).find('option:selected').text() == "Redundant") {
                $('#clientRedundantMessage2').html("Client once made redundant cannot be reactivated. Are you sure ?");
                $("#RedundantMessage2").dialog(
                    {
                        autoOpen: false,
                        height: 170,
                        width: 420,
                        modal: true,
                        resizable: false,
                        title: "Confirmation for Redundant",
                        Content: "Fields cannot be left blank.",
                        buttons: {
                            "Yes": function () {
                                redunt = "Active";
                                trySend();
                                $('#RedundantMessage2').dialog('close');
                            },
                            "No": function () {
                                $(this).dialog("close");
                                return false;
                            }
                        }
                    }) //.dialog("widget").draggable("option", "containment", "none");
                $("#RedundantMessage2").dialog("open");
            }

            $("#griderrormsg1 li").hide().filter(':lt(1)').show();
            return false;
        });

        editallowed = true;
    }); 
```

另一个js函数

```
function trySend(){

    if ($('#IdOfYourForm').valid()) 
        {
            debugger;
            if (redunt == "Active") {

                $.ajax({
                    url: this.action,
                    type: this.method,
                    async: false,
                    cache: false,
                    data: $(this).serialize(),
                    error: function (request) {
                        $("#result").html(request.responseText);
                        //    event.preventDefault();
                    },
                    success: function (result) {
                        if (result == "success") {
                            $.ajax({
                                url: "/Client/ClientGrid",
                                type: 'POST',
                                data: { "page": 0 },
                                datatype: 'json',
                                success: function (data) {
                                    $('#grid').html(data);
                                },
                                error: function () {
                                    alert('Server error');
                                }
                            });

                            $('#myEditClientDialogContainer').dialog('close');
                            $('#myEditClientDialogContainer').remove()
                        }
                        else {
                            clearValidationSummary();
                            var a = '<ul><li>' + result + '</li></ul>';
                            $('#result').html(a);

                        }
                    }
                });
            }
        }

} 
```

# php - PHP foreach 循环语法转义 '

> ID：15511136
> 
> 赞同：-2
> 
> 时间：2013-03-19T21:48:11.367
> 
> 标签：php

当我硬编码这样的值时，我在 php 中有一个 foreach 循环可以正常工作：

```
foreach ($_POST['icons'] as $icon) {

    $sql .= "('756','$icon'),";
} 
```

我的问题是我必须插入一个会话变量：

$row_gbl_ltg['EmpNo']

但是当我插入这个时，我假设由于使用了 ' ，我得到了一个 500 内部服务器错误，如下所示：

```
foreach ($_POST['icons'] as $icon) {

    $sql .= "('$row_gbl_ltg['EmpNo']','$icon'),";
} 
```

我试图用 \' 转义 ' 但它不起作用......我如何正确地转义它并仍然插入我的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:49:01.453

尝试

```
$sql .= "('" . $row_gbl_ltg['EmpNo'] . "','$icon'),"; 
```

您可以使用 ' 和 " 但访问关联数组时存在一些限制。

正如@Captain Payalytic 所说，您还可以使用`{ }`您的 var 作为第二个解决方案。 `{ }`更好地向 PHP 解释我们想要使用/解释的变量的开始和结束位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:50:17.260

替代另一个答案：

```
 $sql .= "('{$row_gbl_ltg['EmpNo']}','$icon'),"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:50:46.797

我实际上会这样做：

```
foreach ($_POST['icons'] as $icon) {

    $sql .= '("' . $row_gbl_ltg['EmpNo'] . '", "' . $icon . '"),';
} 
```

请记住在实际执行查询之前删除最后一个逗号。

# html - 在单词中设置特定字母的样式

> ID：15511142
> 
> 赞同：4
> 
> 时间：2013-03-19T21:48:44.610
> 
> 标签：html, css, seo

我当前的 HTML：

```
<a href="#" id="word">T<span style="font-size: 28px;">est</span><span style="color: pink;">W<span style="font-size: 28px;">ord</span></span></a> 
```

这对 SEO 来说是可怕的。理想情况下，我希望对锚标记完成所有样式：

```
<a href="#" id="word">TestWord</a> 
```

我知道有一个`:first-letter`选择器，但是如何修改`nth`字母并获得预期的输出？

**jsfiddle：http:** [//jsfiddle.net/HUGKv/1/](http://jsfiddle.net/HUGKv/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:00:04.000

目前没有办法`n-th letter`通过 CSS 定位。有人呼吁 CSS`n-th`在未来允许一切，但截至今天，没有这样的运气。

目前，您可能必须使用一些 JS 方法来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:30:23.087

棘手，是的，但更快乐的 SEO，还有：

```
<h1>TestWord</h1>

h1 {
    color: pink;
}
h1:before {
    content: "Test";
    position: absolute;
    left: 8px;
    color: red;   
} 
```

[小提琴](http://jsfiddle.net/vals/CzYba/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:51:30.963

使用单个字母所需的 CSS 添加 span 元素。

```
<a href="#" id="word">Test<span class="classname">W</span>ord</a> 
```

# web-services - CMS 中的 Web 服务，例如 DSpace、Moodle、EPrints、WordPress、Joomla、Open Journal System？

> ID：15511144
> 
> 赞同：2
> 
> 时间：2013-03-19T21:48:47.663
> 
> 标签：web-services, content-management-system, moodle, dspace

嗨，我是一名大学生，也是网络服务的新手。然而，我对 Web 服务进行了一些研究，我将在我研究所的一些网站上添加一个 Web 服务，以整合来自它们的数据。由于它们是各种 CMS（就像我在标题中提到的那样），我需要有关它们的信息。

我要问的是每个 CMS（DSpace、Moodle、EPrints、WordPress、Joomla、Open Journal System）中的 Web 服务的**特性、优点和缺点**（以及可能需要的要求）......例如，如果我我没记错，WordPress 提供了 RSS 之类的 Web 服务。其他人也提供吗？

抱歉这个含糊的问题，但我真的不知道——尤其是关于**DSpace、Moodle、OJS 和 EPrints——**任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:38:05.043

Web 服务（可以是基于 SOAP 或 REST 的），您也可以称它们为 API，与 RSS 提要无关（从我的角度来看）。

Web 服务通常会提供一个接口并交换数据。它们是如何在它们公开的接口后面实现的，与客户端无关。

[维基百科](http://en.wikipedia.org/wiki/Web_service)将网络服务定义为“旨在支持网络上可互操作的机器对机器交互的软件系统”。作为实现，它们比 RSS 提要更复杂，通常用于集成业务应用程序（例如将 ERP 与 CRM 系统连接）。

在 RSS 部分，所有体面的 CMS 都应该有 RSS（以某种形式或另一种形式），通常用于共享内容。

据我所知Joomla！没有任何 Web 服务实现（正如我们所说，Joomla! 正在起草一份文件）。[Wordpress 具有 XML-RPC 支持](http://codex.wordpress.org/XML-RPC_Support)。

因此，了解“数据”的含义非常重要。您是严格引用内容（如文章、博客文章）还是要交换其他数据（例如用户数据或存储在 CMS 表中的其他数据）。

因此，为了回答您的问题，整合来自所有可能使用 RSS 提要的 CMS 的文章就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:42:18.143

DSpace 最初是一个机构存储库软件，并且正朝着更通用的数字资产管理器发展。它确实强调保存（校验和、审计、项目级版本控制）和它处理的内容的描述性信息。它通常可以很好地处理任何文件：WARC、MPEG、TIFF、MS Office 等，但它并不真正专注于该内容的**网络发布**，而只是在线访问和下载它。

它有一个[独立的 REST API](https://wiki.duraspace.org/display/DSPACE/REST+API)，它带有[SWORD](https://en.wikipedia.org/wiki/SWORD_%28protocol%29)支持。内容可以在 RSS 提要中发布——我不知道 DSpace 是否有任何以这种方式导入内容的功能。

我的第一直觉是说这不是你要找的。DSpace 专注于长期保留、组织和访问内容，而不是快速（或自动）聚合来自在线资源的内容。

# python - Django 模型关系

> ID：15511145
> 
> 赞同：0
> 
> 时间：2013-03-19T21:48:53.993
> 
> 标签：python, django

我正在为我的应用程序制作模型，但我对模型的关系有疑问。

公司模式有一个或多个办公室。办公室有一名或多名员工。

```
class Company(models.Model):
        name = models.CharField(max_length=50)
        mail = models.EmailField(null=True, blank=True)
        NIF = models.CharField(max_length=9, null=True, blank=True)
        def __unicode__(self):
                return self.name

class Office(models.Model):
        company = models.ForeignKey(Company)
        name = models.CharField(max_length=50, default='Main')
        direction = models.CharField(max_length=50)
        def __unicode__(self):
                return self.name

class Employee(models.Model):
        company = models.ForeignKey(Company)
        office = models.ForeignKey(Office)
        name = models.CharField(max_length=50)
        mail = models.EmailField(null=True, blank=True)
        def __unicode__(self):
                return self.name 
```

我如何才能在员工与公司和办公室之间建立关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:01:03.583

从 中删除`company`外键`Employee`。

```
class Employee(models.Model):
    office = models.ForeignKey(Office)
    name = models.CharField(max_length=50)
    mail = models.EmailField(null=True, blank=True)
    def __unicode__(self):
            return self.name 
```

由于该`Office`模型已经与 有关系并`Company`与`Employee`有关系`Office`，因此您可以像访问它一样`employee.office.company`-

```
employee_one = Employee.objects.get(pk=1)
company_of_employee_one = employee_one.office.company 
```

如果您想以其他方式访问数据（即获取公司的所有办公室，获取办公室的所有员工），您可以执行以下操作 -

```
company = Company.objects.get(pk=1)
offices = company.office_set.all()
for office in offices:
    employees = office.employee_set.all() 
```

# eclipse - 如何在 Eclipse 可运行 JAR 导出中包含 FXML 文件？

> ID：15511152
> 
> 赞同：0
> 
> 时间：2013-03-19T21:49:24.073
> 
> 标签：eclipse, jar, javafx

我可以在 Eclipse 中成功运行我的 JavaFX2.2.5 项目。但是，当我尝试将项目 JAR 转换为可运行的 JAR 时，该 JAR 文件中没有所需的 FXML 文件（我可以通过使用 WinZip 解压缩 JAR 文件来验证这一点）。

当您通过 Eclipse JAR 项目时，有谁知道如何包含 FXML 文件？我假设 FXML 文件属于 bin 文件夹，就像在 Eclipse 中运行时一样。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:19:18.997

FXML 文件进入`src`文件夹，`bin`由 IDE 管理。

要在 Eclipse 中使用 JavaFX 构建可运行的应用程序，您应该真正检查一下[e(fx)clipse](http://efxclipse.org/)。

另外，[请阅读](https://stackoverflow.com/questions/8434787/how-to-create-custom-components-in-javafx-2-0-using-fxml/8490764#8490764)有关加载 FXML 的问题。

# ios - 拖到视图控制器的出口不起作用

> ID：15511153
> 
> 赞同：5
> 
> 时间：2013-03-19T21:49:28.427
> 
> 标签：ios, xcode, uiviewcontroller, storyboard, segue

我到处寻找这个问题。我知道放松场景是如何运作的。我在 A VC 中实现了以下代码

```
-(IBAction)returned:(UIStoryboardSegue *)segue {
try.text = @"Returned from Scene 1";
} 
```

但是当我去我的 B VC（我想从哪个 VC 返回到 A VC）并 ctrl 将一个按钮拖到底部的出口上时，它不允许我这样做。并且退出选项中没有弹出任何功能。其他人有这个问题或可以提供帮助吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T22:48:34.567

要设置 unwind segue，您应该

1.  使用标准模式设置您的两个场景或在它们之间推送 segue：

    ![在此处输入图像描述](../Images/75f3ad99d273c34678b263043288e93d.png)

2.  将这两个场景的自定义类定义为您各自的视图控制器。

3.  在视图控制器 A 的 .m 中实现操作：

    ```
    - (IBAction)unwindToA:(UIStoryboardSegue *)segue
    {
        //returning to A
    } 
    ```

4.  `control`然后，您可以通过从某个控件向下拖动（或右键单击拖动）到场景下方栏中的出口插座来在 B 中创建一个转场`B`：

    ![在此处输入图像描述](../Images/69bf38d7642eb06dcc41db055b910c39.png)

5.  如果上面的所有配置都正确，你现在会看到你的 unwind segue 在一个弹出窗口中列出：

    ![在此处输入图像描述](../Images/a1d5ee89b35268fa3ef8f9327aae13dc.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-13T16:33:23.980

要使 Exit 出口处于活动状态，请将此代码添加到 viewController。现在你应该可以 ctrl-drag 退出出口了。实际上很奇怪，应该有空的方法让它工作。

```
swift
@IBAction func unwindSegue(unwindSegue:UIStoryboardSegue) 

objC
- (IBAction)unwindSegue:(UIStoryboardSegue *)sender; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-06T10:49:24.603

即使一切设置正确，我也有这个问题。最终，我尝试关闭该项目并重新打开它，这成功了。一定是 Xcode 中的一些错误。

这似乎不是你的问题的原因，但我想我会添加答案，以防其他人有同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T21:09:10.730

@LoPoBo、@hozefam 和 @Van Du Tran

如果关闭不起作用，则可能是您以错误的方式拖动。而不是单击`Bar Button Item`并从拖动`Action Segue`到`exit`尝试只需右键单击 -> 按住并拖动到`exit segue`. 在我弄清楚之前，这让我困扰了 20 分钟。希望这对其他人也有帮助。使用 xcode 6.1

# ruby-on-rails-3 - Paginate 和 Squeel 不能很好地协同工作

> ID：15511154
> 
> 赞同：1
> 
> 时间：2013-03-19T21:49:41.163
> 
> 标签：ruby-on-rails-3, will-paginate, squeel

我无法让 will_paginate 与 squeel 一起工作。

以下代码使用表单中的参数进行搜索。

```
def self.search(params)
  if params
    campo_a_pesquisar = params[:column]
    item_status_fisico = params[:item_status_fisico]
    item_status_logico = params[:item_status_logico]
    criterio = params[:criterio]

    q = self

    q = q.where{item_status_logico_id =~ my{item_status_logico}} unless item_status_logico.nil?
    q = q.where{item_status_fisico_id =~ my{item_status_fisico}} unless item_status_fisico.nil?

    q = q.where{(__send__(column) =~ my{criterio})} unless criterio.empty?
    q = q.where{(id != 0)} if criterio.empty?
  else
    self
  end
end 
```

它适用于“Disponível”（item_status_logico）和“Funciona”（item_status_fisico）。但是，如果我在 :criterio 上放一些东西，它会中断以下消息：

> nil:NilClass 的未定义方法“分页”

我的控制器有一个调用所有内容的列表方法

```
def list
  @itens = Item.search(params[:item]).paginate(:page => params[:page])
end 
```

我看下面的材料来弄清楚。但我做不到。

*   https://github.com/ernie/squeel/wiki/Tips-and-tricks
*   https://github.com/ernie/squeel
*   http://railscasts.com/episodes/354-squeel

任何人都可以帮忙吗？

信息：

*   红宝石 (1.9.3)
*   will_paginate (3.0.4)
*   斯奎尔 (1.0.18)
*   导轨 (3.2.13)

# grails - 带有spring-security的grails：手动注销选定的用户

> ID：15511157
> 
> 赞同：0
> 
> 时间：2013-03-19T21:49:48.717
> 
> 标签：grails, spring-security, logout, manual

作为应用程序管理员，我希望能够注销任何用户，例如，在将标志“启用 = false”设置为选定用户之后。春天安全有可能吗？

我应该补充一点，我的应用程序允许用户使用“记住我”。

我正在使用：grails 2.2.1 插件 spring-security-core 1.2.7.3

设置 spring-security-core (config.groovy)：

```
grails.plugins.springsecurity.useHttpSessionEventP ublisher = true 
grails.plugins.springsecurity.useSessionFixationPr evention = true 
grails.plugins.springsecurity.userLookup.userDomai nClassName = 'com.app.User' 
grails.plugins.springsecurity.userLookup.authority JoinClassName = 'com.app.UserRole' 
grails.plugins.springsecurity.authority.className = 'com.app.Role' 
grails.plugins.springsecurity.userLookup.usernameP ropertyName = 'email' 

grails.plugins.springsecurity.securityConfigType = "Requestmap" 
grails.plugins.springsecurity.rejectIfNoRule = true 
grails.plugins.springsecurity.requestMap.className ='com.app.Requestmap' 
grails.plugins.springsecurity.requestMap.urlField= 'url' 
grails.plugins.springsecurity.requestMap.configAtt ributeField='configAttribute' 
grails.plugins.springsecurity.rememberMe.cookieNam e = 'remember_me' 
grails.plugins.springsecurity.cacheUsers = false 
grails.plugins.springsecurity.rememberMe.tokenVali ditySeconds=604800 
```

有没有人可能有类似的问题？先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:56:05.280

感谢 Codelark，我正在阅读有关过滤器的信息并尝试使用它们 :) 不幸的是，当我为所选用户应用程序设置启用 = false 时，不会将其重定向到“/login /authfail”。最重要的是，更改（启用 = 假）对用户配置文件可见，但缺乏所需的效果。

我要补充一点，我试图设置“expireNow”一个用户会话：

```
def expireSession(User user) {          
    def orginalUser = springSecurityService?.principal.username
    springSecurityService?.reauthenticate(user?.email)  //modified user np: test@app.com
    springSecurityService?.reauthenticate(orginalUser)  //admin np: admin@app.com

    sessionRegistry.getAllPrincipals()?.each { princ ->         
        sessionRegistry.getAllSessions(princ, false);

        if(princ?.username?.equals(user?.email)) {      //killing sessions only for user (test@app.com) 
            sessionRegistry.getAllSessions(princ, false)?.each { sess ->
                sess.expireNow()                
            }
        }//if
    }//each
}//expireSession 
```

即 sessionRegistry 确实为每个用户获取活动会话，但是通过调用：

```
sess.expireNow() 
```

结果是再次为同一个用户调用expireSession(user)，会话不再可见。这是可以理解的，因为它已经过期了。

但尽管用户会话已过期。他可能会继续在应用程序中工作。该应用程序不会注销您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:18:53.060

将该`UserDetails.enabled`标志设置为 false 应该会导致`DisabledException`在用户的下一个安全请求中被抛出。这可以将用户发送到默认`authfail`处理程序，或者您可以在您的配置中配置异常处理程序`UrlMappings`以将用户发送到自定义控制器或操作。

如果您没有`enabled`在应用程序的其他任何地方使用该标志，您可以将 定向`DisabledException`到清除身份验证会话（和 rememberMe）的操作，然后重置该`enabled`标志。

另一种可能的方法是创建一个自定义过滤器并将其注入到您的`Bootstrap`.

url 异常映射和过滤器配置都在[Spring Security 插件文档中描述](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/index.html)

# java - 如何解压缩具有多个 txt 文件的 zip 文件并将其转换为新的 txt 文件，而不会覆盖 java 中文件中的信息

> ID：15511163
> 
> 赞同：0
> 
> 时间：2013-03-19T21:50:11.317
> 
> 标签：java

这是我所拥有的，但文件不断覆盖以前的信息。有没有办法只压缩文件并将文件写入文本文件而无需将文件物理放入文件夹中。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.List;
import java.util.Vector;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.util.*; 

public class cuscreport 
{
    List<String> fileList;
    private static final String INPUT_ZIP_FILE = "c:\\cusc031513.zip";
    private static final String OUTPUT_FOLDER = "C:\\temp\\test";
    Vector<String> v =new Vector<String>();

    public static void main( String[] args ) throws IOException
    {
        cuscreport unZip = new cuscreport();
        unZip.unZipIt(INPUT_ZIP_FILE,OUTPUT_FOLDER);
    }
    private  final static String getDate(  )   {  
        DateFormat df = new SimpleDateFormat( "yyyy-MM-dd" ) ;  
        df.setTimeZone( TimeZone.getTimeZone( "EST" )  ) ;  
        return ( df.format( new Date(  )  )  ) ;  
    }  

    /**
     * Unzip it
     * @param zipFile input zip file
     * @param output zip file output folder
     */
    public void unZipIt(String zipFile, String outputFolder) throws IOException
    {

        byte[] buffer = new byte[1024];

     try{

        //create output directory is not exists
        File folder = new File(OUTPUT_FOLDER);
        if(!folder.exists())
        {
            folder.mkdir();
        }

        //get the zip file content
        ZipInputStream zis = 
            new ZipInputStream(new FileInputStream(zipFile));
        //get the zipped file list entry
        ZipEntry ze= zis.getNextEntry();

        while(ze!=null){

           String fileName = ze.getName();
           File newFile = new File(outputFolder + File.separator + fileName);

           System.out.println("file unzip : "+ newFile.getAbsoluteFile());
           v.add(fileName);

            //create all non exists folders
            //else you will hit FileNotFoundException for compressed folder
            new File(newFile.getParent()).mkdirs();

           FileOutputStream fos = new FileOutputStream(newFile);             

            int len;
            while ((len = zis.read(buffer)) > 0) {
            fos.write(buffer, 0, len);
            }

            fos.close(); 
            ze = zis.getNextEntry();
        }

        zis.closeEntry();
        zis.close();

        for(int x = 1; x < v.size()-1; x++ )
        {
             System.out.println(v.get(x));
             File inputFile = new File( outputFolder + File.separator +v.get(x));
             FileReader in = new FileReader(inputFile);
             File outputFile = new File("C:\\temp\\test\\cuscreport"+getDate()+".txt");
             int c;
             FileWriter out = new FileWriter(outputFile);
             while ((c = in.read()) != -1)
             {
                    out.write(c);
             }

                 in.close();
                 out.close();
        }

        System.out.println("Done");

    }catch(IOException ex){
       ex.printStackTrace(); 
    }
   }    
} 
```

这是我所拥有的，但文件不断覆盖以前的信息。有没有办法只压缩文件并将文件写入文本文件而无需将文件物理放入文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:53:44.417

如果您查看[FileWriter 的 JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html)，您会看到它有一个用于附加到文件的附加变量

# php - PHP插入数据库查询

> ID：15511167
> 
> 赞同：2
> 
> 时间：2013-03-19T21:50:18.383
> 
> 标签：php, mysql

我正在尝试将值插入数据库表中，插入了一行，但没有插入空白值。只有 order_id 是自动递增的主键。

php代码：

```
<?php
        $user_get = mysql_query("SELECT * FROM users"); 
        while($row_user = mysql_fetch_assoc($user_get)){
            if($row_user['username'] == $_SESSION['username']){
                $row_user['first_name'] = $res1;
                $row_user['last_name'] = $res2;

                $store_order ="INSERT INTO oko (user, product) VALUES ('$res1', '$res2')";
                mysql_query($store_order);
            }
        }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:52:19.777

你的任务是倒退的。我想你的意思是：

```
$res1 = $row_user['first_name'];
$res2 = $row_user['last_name']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T21:52:44.757

你不是说：

```
$res1 = $row_user['first_name'];
$res2 = $row_user['last_name']; 
```

您还可以更新`SELECT`以有一个 WHERE 子句来检查`$_SESSION['username']`.

你也*可以*只做一个插入/选择：

```
INSERT INTO oko (user, product)
SELECT
    first_name, last_name
FROM
    users
WHERE
    username = '$_SESSION["username"]' 
```

* * *

您的代码容易被注入。您应该对 PDO/mysqli 使用正确的参数化查询

# heroku - 删除 Heroku 上的 oauth 授权

> ID：15511168
> 
> 赞同：0
> 
> 时间：2013-03-19T21:50:25.170
> 
> 标签：heroku

我已经通过我的 Heroku 帐户上的 oauth 授权了一个应用程序。现在我想删除这个授权。但我无法找到在何处或如何删除此授权。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:38:54.710

这应该可以让您从命令行管理您的 oauth 令牌。当它公开时 [https://github.com/heroku/heroku-oauth](https://github.com/heroku/heroku-oauth)

现在向 heroku 发送支持请求，我们将为您删除身份验证。

# c++ - C++ 成员私有数组变量 - 编译时未定义

> ID：15511169
> 
> 赞同：0
> 
> 时间：2013-03-19T21:50:32.540
> 
> 标签：c++, arrays, private, member

我有一个数组，我希望它是一个私有成员变量。我的程序实现选择排序的方式是，主方法输入数组的大小，构造函数传入并创建具有给定大小的新数组。

我已经在 J​​ava 中完成了，但在 C++ 中无法弄清楚。（在查看了这个网络上其他人的帖子后，我发现我必须将我的变量设为静态）

谢谢你。

[阵列S.h]

```
public:
    ArrayS(void);
    ArrayS(int max);
    ~ArrayS(void);

private:
        static long a [0]; 
```

[ArrayS.cpp]

```
ArrayS::ArrayS(void)
{

}

ArrayS::ArrayS(int max)
{
    long ArrayS::a [max];                 
    nElems = 0; 
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:53:12.557

上面的代码有两个问题。第一个是在 C++ 中你不能有一个大小为 0 的数组。第二个是对于一个类的静态成员，你需要在一个翻译单元中提供一个定义：

```
struct test {
   static long a[10];
};
// in a single .cpp
long test::a[10] = {}; 
```

除此之外，如果您需要大小仅在运行时已知的数组，则不能使用原始数组。您可以使用动态分配的内存（通过`new[]`），但最好使用`std::vector<long>`. 此外，尚不清楚您是否真的需要该成员`static`。该`static`上下文中的关键字表示*类成员*（即由程序中的所有代码共享，而不是每个实例的数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:56:02.900

您需要在类之外再次定义变量。只要你有一个静态成员。尽管 g++ 编译的 c++ 代码的数组大小为零，但请重新考虑这是否是您真正想要的。

# c - 奇怪的 seg fault 错误，gdb 没有帮助

> ID：15511174
> 
> 赞同：0
> 
> 时间：2013-03-19T21:50:49.137
> 
> 标签：c, gdb, segmentation-fault

我有一个小程序试图模拟读取（非标准）数据包头并处理它。

当我运行程序时，我遇到了一个奇怪的段错误，在使用 gdb 分析时，我看到代码完全执行，*然后*给我一个“ `0x00000000 in ?? ()`”。

我以前从未见过这种错误，也不知道是什么原因造成的。

我将代码编译为`gcc -g header.c -lcrypto -lssl`

这是代码

```
#include<stdlib.h>
#include<stdio.h>
#include<string.h>
#include"hash_list.c"

void process(unsigned char header[48]);

int main()
{

    unsigned char header[48];
    unsigned short int responseCode_Fail = 255;
    unsigned short int responseCode_Pass = 0;
    unsigned short int packlen = 65000;
    long long int packetnumber = 2345678;

    memset(&header, 0, 96);
    strcpy(header,"FILELST");
    memcpy(&header[8], &responseCode_Fail, sizeof(responseCode_Fail));
    memcpy(&header[10], &packlen, sizeof(packlen));
    memcpy(&header[16], &packetnumber, sizeof(packetnumber));

    unsigned char result[MD5_DIGEST_LENGTH];
    calcmd5("sample.txt", result);
    memcpy(&header[32], &result, sizeof(result));

    process(header);

    return 0;
}

void process(unsigned char header[48])
{
    unsigned short int responseCode;
    unsigned short int packlen;
    long long int packetnumber;
    unsigned char md5hash[MD5_DIGEST_LENGTH];

    memcpy(&responseCode, &header[8], sizeof(responseCode));
    memcpy(&packlen, &header[10], sizeof(responseCode));
    memcpy(&packetnumber, &header[16], sizeof(packetnumber));
    memcpy(&md5hash, &header[32], sizeof(md5hash));
    printmd5(md5hash);

    printf("CODE: %hu\n",responseCode);
    printf("LEN: %hu\n",packlen);
    printf("PNO: %lld\n",packetnumber);
    if(strncmp(header, "LULZ?", 8) == 0)
    {
        printf("Recieved Peer query.\n");
    }
    else if(strncmp(header, "LULZ.", 8) == 0)
    {
        printf("Recieved Peer query confirmation.\n");
    }
    else if(strncmp(header, "FILELST", 8) == 0)
    {
        printf("Recieved File list\n");
    }
    else if(strncmp(header, "DWNLOAD", 8) == 0)
    {
        printf("Recieved Download request.\n");
    }
    else if(strncmp(header, "UPLOAD", 8) == 0)
    {
        printf("recieved upload from peer ?\n");
    }
    else if(strncmp(header, "ERROR", 8) == 0)
    {
        printf("Recieved Error\n");
    }
    else if(strncmp(header, "LIST", 8) == 0)
    {
        printf("Recieved Peer query for filelist.\n");
    }

    return;

} 
```

这是我得到的输出

```
4768bfdd77920fe0b4f25f173e568266
CODE: 255
LEN: 65000
PNO: 2345678
Recieved File list
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:52:39.193

```
unsigned char header[48];

...

memset(&header, 0, 96); 
```

这听起来不对。

# php - 替代 PHP 邮件（原因：垃圾邮件）？

> ID：15511182
> 
> 赞同：3
> 
> 时间：2013-03-19T21:51:21.493
> 
> 标签：php, email, spam, swiftmailer, mailchimp

我从我的域发送的邮件遇到了这个巨大的问题，这些邮件被 Gmail 的垃圾邮件过滤器捕获。我发送的邮件是发给没有从发送电子邮件地址收到任何内容的客户的发票，所以我想这就是邮件会成为垃圾邮件的原因之一。我还认为另一个原因是，系统在我意识到之前发送了大约 150 封电子邮件，它们都以垃圾邮件结尾，根据 MailChimp 文章，第一个表的最后一行，然后垃圾邮件过滤器会通知如果发送- 邮件已被标记为垃圾邮件，在其他帐户（文章： http: [//kb.mailchimp.com/article/avoiding-the-spam-filters](http://kb.mailchimp.com/article/avoiding-the-spam-filters)）。该系统是用 PHP 制作的，所以我正在尝试一种方法，我可以从我制作的系统中向以前没有收到我任何东西的收件人发送电子邮件——这就是我需要做的所有事情. 听起来很简单...

现在，我已经尝试了很多东西。这里有一个快速列表，所以你知道什么可以做，什么不能做 - 以及我尝试过的：

*   该域由 One.com 托管，他们不支持客户可以设置自己的 SPF 记录或 DKIM 记录（我不知道它们是什么 - 因为我很快意识到这不是摆弄的选择接着就，随即）。
*   PHPmailer 不是一个选项，因为它由 One.com 托管，所以我无法将它安装在 PHP-init-file 中。PEAR-mail 功能也是如此（不能使用）。
*   我尝试使用 PHP 的 SwiftMailer。然而，我努力改变标题中的信息，所以我停止尝试。
*   我已经研究过使用 MailChimp 的 PHP API 向单个收件人发送单个电子邮件（这是它需要能够做的）。但是他们的 API 不支持。
*   我考虑过 SendGrid，但我可以看到每月花费 10 美元，这有点贵，只是为了能够向客户发送发票的 URL……或者这就是我的想法。
*   我尝试使用 PHP 的邮件功能，我自己在其中编写标题。标题可以在这里看到：

```
    递送至：NEWLY-CREATED-GMAIL-ACCOUNT@gmail.com
    收到：10.76.75.104，SMTP id b8csp48728oaw；
            2013 年 3 月 16 日星期六 17:32:56 -0700 (PDT)
    X-Received：由 10.152.116.45 发送，SMTP id 为 jt13mr7897860lab.0.1363480376067；
            2013 年 3 月 16 日星期六 17:32:56 -0700 (PDT)
    返回路径：
    收到：来自 mail-out2.b-one.net (mail-out2.one.com. [91.198.169.19])
            通过 mx.google.com 与 ESMTP id p10si4637427lbb.120.2013.03.16.17.32.55；
            2013 年 3 月 16 日星期六 17:32:55 -0700 (PDT)
    Received-SPF: 中性（对于 XXX111@lyobeachcamp.dk 的域的最佳猜测记录，google.com: 91.198.169.19 既不允许也不拒绝）client-ip=91.198.169.19；
    身份验证结果：mx.google.com；
           spf=neutral（对于 XXX111@lyobeachcamp.dk 的域的最佳猜测记录，google.com: 91.198.169.19 既不允许也不拒绝） smtp.mail=XXX111@lyobeachcamp.dk
    日期：2013 年 3 月 16 日星期六 17:32:55 -0700 (PDT)
    消息 ID：
    收到：来自 localhost.localdomain (srv18.one.com [193.202.110.18])
        通过 mail-out2.b-one.net (Postfix) 与 ESMTP id F3D0B10365
        为了 ; 2013 年 3 月 17 日星期日 01:32:53 +0100 (CET)
    收到：来自 85.218.159.219 由 www.lyobeachcamp.dk 通过 URL_TO_THE_SCRIPT.php 使用 HTTP；2013 年 3 月 17 日星期日 00:32:53 +0000
    收件人：RECIEVERS_NAME
    主题： Faktura på depositumet
    X-PHP-Originating-Script: 87486:NAME-OF-THE-SCRIPT-THE-E-MAIL-WAS-SENT-FROM.php
    回复：Lyø海滩营地
    来自：Besked fra Lyø Beach Camp
    MIME 版本：1.0
    发件人：Besked fra Lyø Beach Camp
    内容类型：文本/纯文本；字符集="utf-8";
    X-Mailer：PHP5.3.21

    Hej 电子邮件所有者名称。

    Her er et link til din faktura

    http://www.lyobeachcamp.dk/ENCRYPTED_URL_TO_INVOICE.pdf 。

    Du skal betale denne faktura indenfor den næste 5 天。Senere hen vil du modtage en
    faktura på restbeløbet。Du vil så modtage dit rejsebevis kort før afrejse-datoen
    （omkring to ugers tid før）。Vi kan desværre ikke melde de eksate flytider ud, før da。
    Du kan dog følge med i de midlertidige flytider som vi har på
    http://www.lyobeachcamp.dk/flytider 。

    医学文利格希尔森

    Lyø 海滩营地

    网址：http://www.lyobeachcamp.dk

    邮件：Hvis der er noget, så er du altid velkommen til at skrive os en mail på
    XXX222@lyobeachcamp.dk

```

所以我的问题是：

1.  我可以做一些非常酷的事情，让它通过垃圾邮件过滤器吗？
2.  是否有可能以某种方式从 G-mail 帐户或其他东西从 PHP 系统发送电子邮件？我的意思是，如果我创建了 lyobeachcamp@gmail.com 或类似的东西，并且能够自动发送电子邮件（通过我的 PHP 构建的系统），那么我想绕过垃圾邮件会更容易-过滤器？还是我在做梦？
3.  我还有什么其他选择？我想要的只是一种可以将 URL 发送给我的一个客户的方法吗？我什至正在考虑发送瓶装信息，然后将其扔到海里，因为他们得到它的机会比他们检查垃圾邮件过滤器的机会更大。

非常感谢任何正确方向、建议或想法的观点。我在这里很绝望！

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:55:08.490

如果您所要做的只是放入一个超级漂亮的标题以绕过垃圾邮件过滤器，您不认为垃圾邮件发送者也会这样做吗？;)

这不是交货问题。A）您的 IP 被列入黑名单，或 B）您的内容是垃圾内容。你需要一个 SPF 记录才能真正解决这个问题。

我绝对**不**建议从 gmail.com 之类的域名或显然不属于您的域名发送 FROM 或 REPLY-TO 标头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T21:55:35.007

试试 Sendgrid 系统。它非常易于使用，如果足够的话，您每天最多可以免费使用 200 封已发送的电子邮件。

我们现在在我们的 PHP 应用程序中使用它，它运行良好。

[http://sendgrid.com](http://sendgrid.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T21:54:55.000

您可以配置 php 邮件以使用 smtp 而不是通过服务器 sendmail 程序。

这是我在谷歌上找到的 SMTP 内联脚本

[http://www.9lessons.info/2009/10/send-mail-using-smtp-and-php.html](http://www.9lessons.info/2009/10/send-mail-using-smtp-and-php.html)

-或者-

一个梨包

[http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

只需放入您的 gmail smtp 设置即可。

您也可以在服务器级别执行此操作

`php.ini`

```
[mail function]
; For Win32 only.
SMTP = mail.yourserver.com
smtp_port = 25
auth_username = smtp-username
auth_password = smtp-password
sendmail_from = you@yourserver.com 
```

via [php.ini & SMTP= - 你如何传递用户名和密码](https://stackoverflow.com/questions/112190/php-ini-smtp-how-do-you-pass-username-password)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T21:55:55.110

PHP 有几个不错的邮件程序库。

我的首选是[phpMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T21:55:17.100

简而言之，没有一个简单的答案或您可以包含的特殊标题。如果它存在，那将毫无意义，因为我相信大多数垃圾邮件发送者都会利用它。我在使用 Google Mail 时遇到的一件事是它们似乎对发件人地址和域非常严格。

检查发件人域未在任何黑名单中注册，并且您拥有有效的 DNS 记录（理想情况下是 PTR 记录）

按照@j_mcnally 的建议配置 PHP 以使用 SMTP 将是我的首选解决方案

# xpath - 目标 html 类并填充内容 DOMdocument

> ID：15511186
> 
> 赞同：0
> 
> 时间：2013-03-19T21:51:34.610
> 
> 标签：xpath, domdocument

我的目标是用内容填充某个标准 html 类的 html 元素

这个答案有一个非常复杂的 concat xpath 查询： [Using DOMDocument to extract from HTML document by class](https://stackoverflow.com/questions/5121833/using-domdocument-to-extract-from-html-document-by-class#answer-5121899)

此类扩展将很好地获取和填充 html： [https ://gist.github.com/j0shua/945507](https://gist.github.com/j0shua/945507)

这是我正在使用的示例 html：

```
 <!-- actual content of the page box -->
    <div class="masterWidthSet mainContent">
        <div class="mainPageContent">
            <script type="text/javascript" src="/email_js.js"></script>

            <b>Contact us all at the same time...</b><br/>
            <div class="messageSent">Thank you for contacting us, we will get back to you as soon as possible.</div>
            <table class="contactForm">
                <tr><td class="title">Name</td><td class="description"><input type="text" id="sendName" class="text" placeholder="Your name..."></td></tr>

                <tr><td class="title">Number (optional)</td><td class="description"><input type="text" id="phoneNo" class="text"placeholder="Your number..."></td></tr>

                <tr><td class="title">Email</td><td class="description"><input type="text" id="email" class="text"placeholder="Your email..."></td></tr>

                <tr><td class="title">Message</td><td class="description"><textarea id="message" class="text"placeholder="Your message..."></textarea></td></tr>

                <tr><td></td><td class="description"><input type="button" class="submit" value="Send us you message..." onclick="sendMessage()"/><span class="description messageStatus" id="messageStatus"></span></td></tr>
            </table>
        </div>
    </div> 
```

我可以使用单个类' **mainPageContent** '轻松获取元素的 innHTML：

```
require_once WEBROOT_PRIVATE.'scripts/JSLikeHTMLElement.php';
$dom = new \DOMDocument();
$dom->registerNodeClass('DOMElement', 'JSLikeHTMLElement');
$dom->loadHTML( file_get_contents( $file['local_path'] ) );
$xpath = new \DOMXPath($dom);
$elem = $xpath->query('//*[@class="mainPageContent"]')->item(0);
echo $elem->innerHTML; 
```

但是，一旦我尝试定位具有多个类的元素，它就会返回 null（我假设是因为查询正在寻找完全匹配），例如' **mainContent** '：

```
$elem = $xpath->query('//*[@class="mainContent"]')->item(0); 
```

所以我尝试使用顶部帖子中的 concat 查询，但我得到“调用成员函数 item()”：

```
$elem = $xpath->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' mainContent ')")->item(0); 
```

所以我尝试了这个：

```
$elem = $xpath->query('//*[class~="mainContent"]')->item(0); 
```

问题是每次 item(0) 导致错误时：

> 在非对象上调用成员函数 item()

这家伙说我尝试过的方法应该有效..[用 xpath 选择一个 css 类](https://stackoverflow.com/questions/8808921/selecting-a-css-class-with-xpath#answer-9133579)

谁能指出我正确的方向？

谢谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:06:10.370

废弃以上所有内容，只使用 phpquery 库。

就像 php 的 jquery 一样！bish bash 波什。

[http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

# freemarker - 模板中的命名范围

> ID：15511187
> 
> 赞同：0
> 
> 时间：2013-03-19T21:51:35.247
> 
> 标签：freemarker

是否可以在 ftl 中命名一些块并将它们放在 java 端？例如像语法不正确的东西

```
#emailSubject[
This is email subject]
#emailMessage
[Email multi-
line message!!
Hi all] 
```

和java端看起来像

```
template.process("template.ftl", resultModelOrSomethingElse);
String emailSubject = resultModelOrSomethingElse.getEmailSubject();
String emailMessag = resultModelOrSomethingElse.getEmailMessage(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:22:18.367

开箱即用，您可以执行以下操作：

```
<#assign emailSubject>This is the email subject</#assign>

<#assign emailMessage>
  This is the email message...
</#assign> 
```

进而：

```
// Same as template.process, but you will have the Environment:
Environment env = template.createProcessingEnvironment(dataModel, out);
env.process();

// Extract top-level variables:
TemplateModel emailSubject = env.getVariable("emailSubject");
TemplateModel emailMessage = env.getVariable("emailMessage"); 
```

（如果你会做很多事情，你可能想在模板中简化它。就像`<@emailSubject>This is the email subject</@>`更简洁和更简单，因为如果有人在“emailSubject”变量名中犯了错误，它会立即失败。）

# meteor - 发布前更改集合

> ID：15511191
> 
> 赞同：5
> 
> 时间：2013-03-19T21:52:06.503
> 
> 标签：meteor

我想为发布到客户端的对象添加一个属性。

我的发布功能看起来像这样

```
Meteor.publish("forms", function() {
  return Forms.find();
}); 
```

我想做这样的事情

```
Meteor.publish("forms", function() {
  var forms = Forms.find();
  forms.forEach(function (form) {
     form.nbForms = 12;
  }

  return forms;
}); 
```

我想要的是其中的所有文档`forms`都有一个新`count`属性，该属性会发送给客户端。

但这显然是行不通的。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:52:14.000

不确定它是否适用于您的情况，但您可以使用 Meteor 0.5.8 引入的新转换集合功能

声明您的集合时，将此函数添加为第二个参数：

```
Forms = new Meteor.Collection("forms", {
     transform: function(f) {
         f.nbForms = 12;
         return f;
     }
}); 
```

但这将在服务器和客户端上。我不知道是否有办法在发布上下文中定义转换函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T18:10:16.067

我认为您需要在 Publish 中执行类似于 Meteor 计数示例的操作： [Meteor 文档中的消息计数示例如何工作？](https://stackoverflow.com/questions/10565654/how-does-the-messages-count-example-in-meteor-docs-work)

我还在这里发布了一个问题，一旦得到回答可能会有所帮助。Meteor 有一个 this.add 可能有用，但我目前不确定如何使用它。因此出现以下问题： [Meteor，一对多关系和仅将字段添加到发布中的客户端集合？](https://stackoverflow.com/questions/20688718/meteor-how-to-add-field-to-client-side-collection-in-publish)

# google-app-engine - DNS：从 Google 电子邮件 + Google 应用托管网站迁移到 Google 电子邮件 + 第三方托管

> ID：15511193
> 
> 赞同：0
> 
> 时间：2013-03-19T21:52:15.237
> 
> 标签：google-app-engine, dns, google-apps

我继承了一个我不理解的 DNS/网站/电子邮件场景。

#

我需要修改 DNS 记录，以便与 Google Apps 集成的电子邮件不会被更改，而是让网络流量流向第 3 方。目前，网络流量转到 Google App Engine 帐户（在以前的开发人员个人帐户下）。

在接收端，我有一个静态 IP 地址和网络帐户所在主机的名称服务器。我只需要知道如何处理它们。

我尝试更改 A 记录，但这破坏了 Google 电子邮件集成。我尝试在 MX Host 字段中指定当前的 A 记录 IP，这也很糟糕。

#

当前信息：

#

A（主持人）
@
216.239.32.21

CNAME（别名）
e
email.secureserver.net

电子邮件
email.secureserver.net

FTP
@

imap
imap.secureserver.net

邮件
pop.secureserver.net

mobilemail
mobilemail-v01.prod.mesa1.secureserver.net

pda
mobilemail-v01.prod.mesa1.secureserver.net

流行
pop.secureserver.net

smtp
smtp.secureserver.net

网络邮件
webmail.secureserver.net

www
ghs.google.com

MX（邮件交换器）
20
@
ALT1.ASPMX.L.GOOGLE.COM

30
@
ALT2.ASPMX.L.GOOGLE.COM

10@ASPMX.L.GOOGLE.COM
_
_

40@ASPMX2.GOOGLEMAIL.COM
_
_

50
@
ASPMX3.GOOGLEMAIL.COM

TXT（文本）
@
google-site-verification=REDACTED

#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:09:12.690

这不是一个真正的 GAE 问题，但基本上要让 Google 电子邮件正常工作，您只需要 5 条 MX 记录。

要在其他地方托管您的网站，

1.  更改应由您的新网络托管服务提供商提供的内容`@ IN A 216.239.32.21`。`@ IN A <your.new.ip>`这将允许您访问[http://yourdomain.com](http://yourdomain.com)

2.  删除`www IN CNAME ghs.google.com`

3.  删除谷歌网站验证的TXT记录

4.  添加`www IN CNAME @`或`www IN A <your.new.ip>`

我认为secureserver.net 地址指的是GoDaddy 托管，如果您使用的是gmail，可能不会做任何事情——您可以将它们全部删除。

您可能还想添加一个 cname 条目，通过输入[http://mail.yourdomain.com](http://mail.yourdomain.com)`mail IN CNAME ghs.google.com.`将您的用户带到 gmail

# java - 格式 BigDecimal jsf 2.0

> ID：15511196
> 
> 赞同：1
> 
> 时间：2013-03-19T21:52:26.033
> 
> 标签：java, jsf-2, web, converter, bigdecimal

我是 jsf 的新手，我正在尝试在我的 jsf 页面中格式化 BigDecimal。

这是我所做的：

```
<h:outputText value="#{entity.bigDecimalValue}">
   <f:convertNumber maxFractionDigits="15" minFractionDigits="15" groupingUsed="false" />
</h:outputText>

```

这个数字很小，它按预期工作（例如：0.0000000000001）

但是对于像数字 4 这样的简单值，它会显示 4.000000000000000

¿我怎样才能摆脱无用的零？

我只希望它以简单的方式向我展示价值观。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:37:28.377

> minFractionDigits="15"

如果您不想要至少 15 个小数位，请不要指定至少 15 个小数位。

# php - Jquery 将 Mysql 数据引入 Div（其他选项）

> ID：15511198
> 
> 赞同：0
> 
> 时间：2013-03-19T21:52:31.593
> 
> 标签：php, mysql, jquery

我所拥有的是客户端名称列表，当我单击它们时，我希望将一些 mysql 数据加载到它们名称旁边的 div 中，依此类推，

我已经知道我可以使用 AJAX 请求执行此操作，方法是将 onlclick 函数绑定到存储其名称的 div，然后使用它触发 Ajax 请求以获取数据，然后将其附加到页面上的 DIV。

我想知道是否有任何其他方法可以做同样的事情，重量轻、速度快、效率高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:55:46.737

您有：

1.  AJAX
2.  框架
3.  加载整个页面

这些真的是你唯一的选择。

# visual-studio-2010 - 在 Visual Studio 中快速键入的键盘快捷键是什么？

> ID：15511201
> 
> 赞同：7
> 
> 时间：2013-03-19T21:52:42.880
> 
> 标签：visual-studio-2010, visual-studio-2012

我不确定在单行中正确表达我的问题的最佳方法是什么。但基本上我现在已经看过不少视频教程，其中编码器类型非常快，使用某种快捷方式来填写自动文本（prolly intellisense 的东西）它看起来非常类似于 Linux 命令行选项卡，您只输入一半的文本当您点击选项卡时，它要么填补空白，要么向您显示剩余的选项。希望这是有道理的。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T21:56:27.777

按`Ctrl`+`Space`完成您正在输入的当前变量/类。

键入诸如`ctor`然后按`Tab`两次键之类的内容会告诉 Visual Studio 为您插入一个构造函数。（也适用`for`于 for 循环、`cw`for a`Console.WriteLine();`等）

有关完整列表，请参阅[MSDN 的官方参考](http://msdn.microsoft.com/en-us/library/z41h7fat.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:54:15.060

我相信它`Ctrl-Space`，这在大多数 IDE 中很常见

# javascript - 如何在 if 语句中使用数组变量？

> ID：15511202
> 
> 赞同：0
> 
> 时间：2013-03-19T21:52:43.443
> 
> 标签：javascript, arrays

```
var n = new Array();
n[0] = "zero";
n[1] = "first";
n[2] = "second"

function myFunction() {
    var x = prompt("Question?")
    if (x.toLowerCase() == n) {
        //code
    } else {
        //code
    }
} 
```

是否有可能使如果输入任何数组变量，仍然执行 if / else 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:58:06.933

我*猜*你想检查输入的值是否存在于数组中？如果是这样：

```
function myFunction() {
    var x = prompt("Question?")
    if (n.indexOf(x.toLowerCase()) > -1) {
        //code
    } else {
        //code
    }
} 
```

你需要支持 IE8 和更早版本，你需要一个 Array.prototype.indexOf 的垫片（例如，[由 MDN 提供](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)的垫片）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:58:05.657

```
var n = new Array();
n[0] = "zero";
n[1] = "first";
n[2] = "second"

function myFunction()
{
var x=prompt("Question?")
    for (var i in n) {
        if (x.toLowerCase() === n[i] ){ alert("true"); }  
    }
}

myFunction(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:57:30.420

根据您是否希望条件在每个数组元素或至少一个元素上为真，您可以使用[n.every](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)或[n.some](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)。

# google-chrome - 用于收听和捕获流式音频的 Chrome 扩展程序

> ID：15511205
> 
> 赞同：17
> 
> 时间：2013-03-19T21:52:47.020
> 
> 标签：google-chrome, audio, google-chrome-extension, audio-streaming, audio-capture

Chrome 扩展程序是否可以从浏览器的任何选项卡中收听流式音频？我想捕获流式音频数据，然后对其进行分析。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T12:45:15.873

您可以尝试 3 种方法，但没有一种方法可以 100% 保证满足您的需求。

在进行更详细的描述之前，我必须注意 Chrome 扩展没有提供方便的工具来处理每个连接级别 - 足够*低的级别*，这是流捕获所必需的。这是设计使然。这就是为什么第一种方式是：

1.  查看其他浏览器，例如 Firefox，它为连接提供低级 API。已知它们被类似的扩展使用。你可以看看[MediaStealer](http://code.google.com/p/mediastealer/)。如果您没有在 Chrome 上构建系统的特定要求，您可能应该迁移到 Firefox。

2.  您可以开发一个 Chrome 扩展程序，它通过[webRequest](https://developer.chrome.com/extensions/webRequest.html#event-onHeadersReceived) API 拦截 HTTP 请求，分析它们的标头并提取媒体 url（例如在 HTTP 标头中包含音频/mpeg MIME 类型）。只是为了快速查看代码示例，请查看以下 SO 问题 -[如何在 Chrome 中更改响应标头](https://stackoverflow.com/q/13700394/1102014)。拥有该 url，您可能会强制将适当的媒体下载为文件。它将降落在默认下载文件夹中，并且可能具有不友好的名称。（我做了这样的扩展，但我没有进一步处理的要求）。如果您需要进一步处理此类文件，则在文件夹中监视它们并在单独的程序中运行其他分析可能是一个挑战。

3.  您可能会看一下一般的 NPAPI 插件，尤其是它们的[流式 API](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Streams#Receiving_a_Stream)。我可以想象您创建了一个插件，再次注册了音频/mpeg MIME 类型，并通过`NPP_NewStream`,`NPP_WriteReady`和`NPP_Write`方法接收数据。该插件可以包装到 Chrome 扩展程序中。虽然我制作了 NPAPI 插件，但我从未使用过这个 API，而且我不确定它是否能按预期工作。尽管如此，我在这里提到这种可能性是为了完整性。此方法需要除 Web 编码之外的一些编码，即 C/C++。*注意。自 2015 年 9 月起，NPAPI 插件在 Chrome 中已弃用且不受支持。*

考虑到您有一些外部（扩展）“指纹服务”，这听起来像是一种智能数据处理，您可能有兴趣在浏览器之外构建所有系统。例如，您可能会涉及 HTTP 代理，从而避免媒体通过流量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-23T19:18:19.190

如果您正在编写 Chrome 扩展程序，则可以使用[Chrome tabCapture API](https://developer.chrome.com/extensions/tabCapture)来录制音频。

```
chrome.tabCapture.capture({audio: true}, function(stream) {
  var recorder = new MediaRecorder(stream);
  [...]
}); 
```

其余的留给读者作为练习；MDN 有[更多](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API/Using_the_MediaStream_Recording_API)关于如何使用 MediaRecorder 的文档。

当 2013 年提出这个问题时，chrome.tabCapture 和 MediaRecorder 都不存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-21T20:34:10.430

使用 soundflower 的 Mac OSX 解决方案：[http: //rogueamoeba.com/freebies/soundflower/](http://rogueamoeba.com/freebies/soundflower/)

安装 soundflower 后，它应该在声音首选项（苹果 > 系统首选项 > 声音）中显示为单独的音频设备。将计算机的音频转换为 2ch 选项（立体声，16ch 是环绕声），然后在 DAW 中，例如“大胆”，将音频输入设置为 soundflower。现在声音应该被引导到您的 DAW 准备录制。

注意：将音频从内部扬声器转移到 soundflower 后，您只有在“soundflowerbed”应用程序实际打开时才能听到音频。如果右上角的任务栏中有一个 8 条腿的斑点，您就知道它是打开的。单击此图标可为您提供声音花卉选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-28T14:32:44.983

我的 privoxy 有以下日志：

```
2013-08-28 18:25:27.953 00002f44 Request: api.audioaddict.com/v1/di/listener_sessions.jsonp?_method=POST&callback=_AudioAddict_WP_ListenerSession_create&listener_session%5Bid%5D=null&listener_session%5Bis_premium%5D=false&listener_session%5Bmember_id%5D=null&listener_session%5Bdevice_id%5D=6&listener_session%5Bchannel_id%5D=178&listener_session%5Bstream_set_key%5D=webplayer&_=1377699927926
2013-08-28 18:25:27.969 0000268c Request: api.audioaddict.com/v1/ping.jsonp?callback=_AudioAddict_WP_Ping__ping&_=1377699927928
2013-08-28 18:25:27.985 00002d48 Request: api.audioaddict.com/v1/di/track_history/channel/178.jsonp?callback=_AudioAddict_TrackHistory_Channel&_=1377699927942
2013-08-28 18:25:54.080 00003360 Request: pub7.di.fm/di_progressivepsy_aac?type=.flv 
```

所以我得到了流 url 并记录下来：

```
D:\Profiles\user\temp>wget pub7.di.fm/di_progressivepsy_aac?type=.flv
--18:26:32--  http://pub7.di.fm/di_progressivepsy_aac?type=.flv
           => `di_progressivepsy_aac@type=.flv'
Resolving pub7.di.fm... done.
Connecting to pub7.di.fm[67.221.255.50]:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [video/x-flv]

    [                   <=>               ] 1,234,151      8.96K/s 
```

我得到了可以在任何多媒体 pleer 中复制的文件。

# javascript - 如何将对象数组转换为 JSON（并返回）？

> ID：15511206
> 
> 赞同：0
> 
> 时间：2013-03-19T21:52:53.623
> 
> 标签：javascript, json, local-storage

为简单起见，我有一个 JavaScript`car`对象数组，如下所示（一个示例）：

```
var car = {
    "color": "red",
    "fuelType": "diesel"
} 
```

我想将此对象数组存储在用户的 localStorage 中，并能够对其进行检索和添加/删除。

这是一些我似乎无法正确处理的示例代码。

```
addCar(car);

function getCars() {
    var cars = [];
    if (localStorage['cars']) {
        cars = localStorage['cars'];
    }

    return cars;
}

function addCar(car) {
    var cars = getCars();
    cars.push(car);
    localStorage['cars'] = cars;
} 
```

**如何将对象数组转换为 JSON（并返回）？** `localStorage`只允许存储字符串。我需要将对象数组转换为 JSON 格式，但我不确定如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:54:55.910

据我所知，本地存储只支持字符串，所以你必须使用`JSON.stringify()`和`JSON.parse()`获取数据。

# java - 如何判断 JAVA_HOME 是否在 Windows 批处理文件中包含 JDK？

> ID：15511211
> 
> 赞同：0
> 
> 时间：2013-03-19T21:53:06.127
> 
> 标签：java, windows, batch-file, environment-variables, java-7

是否可以判断`JAVA_HOME`系统环境变量是否包含 Windows 批处理文件中的 JDK？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:54:44.107

您可以查找 %JAVA_HOME%\bin\javac.exe （或任何它，我假设是 exe）。这不应该存在于 JRE 中，只存在于 JDK 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:56:09.800

如果您正在检查编译器是否存在，您可以执行以下操作：

```
if exist %JAVA_HOME%\bin\javac.exe (
   ...
) else (
   ...
) 
```

# module - Orchard - 以编程方式创建查询

> ID：15511217
> 
> 赞同：1
> 
> 时间：2013-03-19T21:53:37.277
> 
> 标签：module, orchardcms

我正在 Orchard 中创建一个自定义模块。启用模块后，我想以编程方式创建查询。

由于 IDependency 接口的实现，我在 Migrations.cs 文件中执行此操作。

我能够创建查询，但我是否以编程方式设置该查询的过滤器？

```
var announcementsQuery = _contentManager.Create("Query");
announcementsQuery.As<TitlePart>().Title = "Announcements";
_contentManager.Publish(announcementsQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:00:15.263

我发现了如何做到这一点：

```
var announcementsQuery = _contentManager.Create("Query");
                announcementsQuery.As<TitlePart>().Title = "Announcements";
                announcementsQuery.As<QueryPart>().ContentItem.ContentType = "Announcement";
                var filterGroupRecord = new FilterGroupRecord();
                var filterRecord = new FilterRecord()
                    {
                        Category = "Content",
                        Type = "ContentTypes",
                        Description = "Announcement",
                        Position = 1,
                        State = "<Form><Description>Announcement</Description><ContentTypes>Announcement</ContentTypes></Form>"
                    };
                filterGroupRecord.Filters.Insert(0, filterRecord);
                announcementsQuery.As<QueryPart>().FilterGroups.Insert(0, filterGroupRecord); 
```

# c# - RichTextBox 在导出到 word 时会丢失所有格式

> ID：15511220
> 
> 赞同：1
> 
> 时间：2013-03-19T21:53:40.923
> 
> 标签：c#, ms-word, ms-office, richtextbox

我将word内容复制到richtextbox而没有完美地丢失格式，但现在我正在编辑richtextbox中的内容。

现在我想在 C# 中使用 WinForms 将 Richtextbox 内容导出到 Word 文档而不丢失任何格式。你怎么做呢？

```
WordApp.ActiveDocument.SaveAsQuickStyleSet("abc.doc");

Range rng = WordApp.ActiveDocument.Range(0, 0);

for (int i = 0; i < _dgvrow.Cells.Count; ++i)
{
    // add code to loop thru controls and TypeText into word document

    Label lb  = (Label)this.Controls["lblfield" + (i+1).ToString()];
    rng.Text += lb.Text;
    rng.Select();

    Control ctrl = this.Controls["txtfield" + (i+1).ToString()];

    if(ctrl is RichTextBox)
    {
        RichTextBox rb = (RichTextBox)ctrl;
        rng.Text += rb.Text + Environment.NewLine;
        rng.Select();
    }
    else if (ctrl is TextBox)
    {
        TextBox rb = (TextBox)ctrl;
        rng.Text += rb.Text + Environment.NewLine;
        rng.Select();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:25:36.260

The `Text` property of a `RichTextBox` just returns plain text. Use the `Rtf` property to return rtf-formatted text.

Unfortunately, Word does not have a method for inserting RTF text. However you can paste RTF-text from the clipboard

```
Clipboard.SetText(rb.Rtf, TextDataFormat.Rtf);
rng.Paste() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:04:21.713

您想获得控件的[富文本格式](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.rtf.aspx)，而不仅仅是[纯文本](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.text.aspx)。

替换`rb.Text`为`rb.Rtf`。

来自 MSDN：

> Text 属性不返回有关应用于 RichTextBox 内容的格式的任何信息。要获取富文本格式 (RTF) 代码，请使用 Rtf 属性。

此外，如果您想[将富文本格式保存到文件](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.savefile%28v=vs.100%29.aspx)中，它是内置的：

```
rb.SaveFile(yourFilePath); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-08-22T13:13:41.580

通过运行查看您的说法，我可以建议我正确编码的内容。

使用保存文件方法将编码的富文本框保存为 .rtf 或 .doc，然后在 microsoft word 中打开。

不会失败。

带着敬意。

# javascript - D3.js Phylogram 和 Figue.js

> ID：15511226
> 
> 赞同：0
> 
> 时间：2013-03-19T21:54:03.000
> 
> 标签：javascript, graphics, d3.js, hierarchical-clustering

我想将库[Figue](https://code.google.com/p/figue/wiki/Introduction)中的返回数组转换为[D3](http://bl.ocks.org/widged/5150104) Phylogram。我构建了这个函数，但没有工作：

```
function convert(input, rootName) {
        // top level
        if (Array.isArray(input)) {
            return {
                "name": rootName,
                "branchset": input.map(convert)
            };
        }
        // node
        else {
            ['left', 'right'].forEach(function(side) {
                if (input[side]) {
                    input.branchset = input.branchset || [];
                    input.branchset.push(convert(input[side]));
                    delete input[side];
                }
            });
            return input;
        }
    } 
```

[下面是D3](http://bl.ocks.org/widged/5150104)的数据示例：

```
{
        "branchset": [
          {
            "name": "", "length": 0.05,
            "branchset": [
              {
                "name": "", "length": 0.05,
                "branchset": [ { "name": "A", "length": 0.05 }, { "name": "B", "length": 0.05 } ]
              },
              {
                "name": "", "length": 0.05,
                "branchset": [ { "name": "C", "length": 0.05 }, { "name": "D", "length": 0.05 } ]
              }
            ]      
          },
          {
            "name": "", "length": 0.1, 
            "branchset": [ { "name": "E", "length": 0.05 }, { "name": "F", "length": 0.05 }
            ]
          },
          {
            "name": "", "length": 0.05,
            "branchset": [
              {
                "name": "", "length": 0.05,
                "branchset": [ { "name": "G", "length": 0.05 }, { "name": "H", "length": 0.05 } ]         
              },
              { "name": "I", "length": 0.1 }
            ]
          }
        ],
        "name": ""
      } 
```

在这里，从[Figue](https://code.google.com/p/figue/wiki/Introduction)返回的数组和平（使用我上面的函数）：

```
{"label":-1,"dist":2.0373900000000003,"centroid":[0.0000027272727272704085,-0.0000018181818181937295],"size":11,"depth":6,"branchset":[{"label":-1,"dist":2.0373900000000003,"centroid":[-0.10734300000000001,-0.18521900000000002],"size":10,"depth":5,"branchset":[{"label":-1,"dist":1.38918,"centroid":[-0.00701333333333334,-0.4115955555555556],"size":9,"depth":4,"branchset":[{"label":-1,"dist":0,"centroid":[-1.01031,-0.18522],"size":4,"depth":3,"branchset":[{"label":-1,"dist":0,"centroid":[-1.01031,-0.18522000000000002],"size":3,"depth":2, .... 
```

# c# - 请求操作的超时已过期

> ID：15511231
> 
> 赞同：3
> 
> 时间：2013-03-19T21:54:17.073
> 
> 标签：c#, asp.net, msmq

这真让我抓狂。我们在我工作的 C#/ASP.NET Web 应用程序中使用了相当多的私有 MSMQ 队列，并且有一个通用库来从我们的队列发送和接收消息。昨天，这完全停止了对我的工作，但与我合作的其他开发人员都没有遇到这个问题，这让我认为这与我的本地开发环境或我的 Windows 帐户设置有关。

当调用以下消息代码行时，我现在总是收到“请求的操作超时”异常：

```
var returnMessage = fromMessageQueue.ReceiveByCorrelationId(strCorrelationID, tsWait); 
```

我们的每个（业务）客户基本上都有一个“入站”和“出站”队列。入站队列看起来很干净，但是当我查看出站队列时，我可以看到“卡住”的消息，这是我需要的响应。

我什至针对我设置的用于故障排除的虚拟队列编写了一个小型测试控制台应用程序，它仍然返回相同的超时异常。

我已经检查了我一直在进行故障排除的私有队列的权限，每个人和匿名用户都可以完全控制队列。我什至将我自己的域登录帐户授予了几个队列，但这也不起作用。

恐怕在我能解决这个问题之前我会很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T04:10:38.490

我通常在安装软件并将其作为服务运行同时尝试通过 Visual Studio 运行调试副本时得到这个（2 个服务在 1 个队列上运行）

# slickgrid - Slickgrid - 失去焦点以结束编辑

> ID：15511232
> 
> 赞同：9
> 
> 时间：2013-03-19T21:54:17.573
> 
> 标签：slickgrid, lost-focus

在编辑我的网格时，如果我在网格外单击，我正在编辑的框仍然是可编辑的。当它失去焦点时，如何让编辑的单元格“完成”编辑？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T01:09:21.663

以下代码将保存当前编辑。

```
Slick.GlobalEditorLock.commitCurrentEdit(); 
```

您需要将其放置在您认为应该触发保存的事件处理程序中。例如，如果您使用的是示例文本编辑器插件，我相信`editor-text`CSS 类会添加到您在编辑单元格时创建的输入字段中，所以这样的事情应该可以工作：

```
$('#myGrid').on('blur', 'input.editor-text', function() {
    Slick.GlobalEditorLock.commitCurrentEdit();
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-12T22:11:02.120

我发现我需要在超时中包装 clav 的处理程序：

```
$("#myGrid").on('blur', 'input.editor-text', function() {

    window.setTimeout(function() {

        if (Slick.GlobalEditorLock.isActive())
            Slick.GlobalEditorLock.commitCurrentEdit();

    });

}); 
```

以避免出现以下错误：

```
Uncaught NotFoundError: An attempt was made to reference a Node in a context where it does not exist. 
```

使用键盘导航时。据推测，新的模糊处理程序在 SlickGrid 可以自己处理之前触发，这会导致问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-14T13:50:29.373

Unfortunately, probably due to differences in event processing, Grame's version breaks keyboard navigation in chrome. To fix this, I added another check to only commit the edit, if the newly focused element is not another editor element within the grid (as the result of keyboard navigation):

```
 $('#grid').on('blur.editorFocusLost', 'input.editor-text', function() {
                window.setTimeout(function() {
                    var focusedEditor = $("#grid :focus");
                    if (focusedEditor.length == 0 && Slick.GlobalEditorLock.isActive()) {
                        Slick.GlobalEditorLock.commitCurrentEdit();
                    }
                });
            }); 
```

This seems to work in current versions of firefox, chrome and ie.

# wpf - 在项目中包含图像

> ID：15511238
> 
> 赞同：1
> 
> 时间：2013-03-19T21:54:39.777
> 
> 标签：wpf, c#-4.0, visual-studio-2012, grid, rectangles

我想在我的项目中包含一个来自后面代码的图像，以便允许我将图像设置为我的矩形的填充！我以这种方式插入图像：

```
<Rectangle Grid.Column="2"  Grid.Row="2" Margin="4,4,4,4" Style="{DynamicResource rectangle_style}" >
    <Rectangle.Fill>
        <ImageBrush ImageSource="image.jpg" Stretch="UniformToFill"/>
    </Rectangle.Fill>
</Rectangle> 
```

要创建此背景图像，我必须通过右键单击文件将图像文件包含在项目中并设置“包含在项目中”。你能帮我在运行时包含来自后台代码的图像吗，因为我必须从文件夹中的大多数文件中设置图像！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:08:41.017

一种方法是执行“包含在项目中”或“添加现有项目”，然后在“属性”下，将“复制本地”设置为“始终”。

注意在这种情况下，您需要获取应用程序文件夹路径

```
<ImageBrush ImageSource="c:\[YourPath]\[YourProject]\someImg.png"  Stretch="UniformToFill" /> 
```

或者绑定到为您提供当前应用程序路径的方法。（搜索一下，因为在 SO 上有很多这样的问题得到了回答）。

这意味着当您部署应用程序时，您必须使用它部署图像（它最终会以您提供的任何路径结构出现在 bin 文件夹中）。

另一种方法是这样做，并设置`Build Action`为`Resource`- 这将使您的应用程序与 DLL 中的图像一起编译。缺点是 DLL 会更大，但您不必记住在部署时复制文件。

按名称访问`resource`（无前斜杠）

```
<ImageBrush ImageSource="someImg.png"  Stretch="UniformToFill" /> 
```

希望能帮助到你！

# scala - scala slick - 选择子句中的复杂函数

> ID：15511240
> 
> 赞同：1
> 
> 时间：2013-03-19T21:54:43.973
> 
> 标签：scala, sum, aggregate, slick, notnull

我有一个连接表，其中包含 'a'、'b' 的 id 和几个与 a<->b 关系相关的 Option[Long] 。我想这样查询它：

```
select a_id, sum(longField is not null) from a_b_info group by a_id 
```

（忽略此查询中的 b_id ...）

我尝试了各种各样的东西，但无法做到这一点。
我怎么能用光滑的方法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:11:49.517

您可以创建自己的功能。Slick 的可扩展性很强，但是添加一个功能是一个深入的研究。作为对[这个问题](https://stackoverflow.com/questions/14920153/how-to-write-nested-queries-in-select-clause/14989939#14989939)的回答，我扩展了驱动程序以添加该`as`功能。您需要采取类似的步骤来解决您的问题。

# jquery - 与 jquery validate 一起使用的密码强度插件

> ID：15511244
> 
> 赞同：-1
> 
> 时间：2013-03-19T21:54:50.030
> 
> 标签：jquery, jquery-validate

我将如何使这个[密码强度插件](https://github.com/ablanco/jquery.pwstrength.bootstrap)与 jquery validate 一起使用。

1.  如果密码强度得分为 50 或更低，
2.  该字段被归类为无效，不会提交表单
3.  显示解释原因的验证消息。
4.  一旦密码达到所需的强度，表单将正常验证（与默认情况下的验证方式相同）

密码有两种方法可以轻松扩展并在字段有效时更新验证插件：

1.  负载
2.  onKeyUp

所以我的问题/最困惑的部分是：这将如何与 jquery validate 一起使用来创建新的验证要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:04:29.927

[http://bassistance.de/jquery-plugins/jquery-plugin-password-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-password-validation/)

这个插件专门用于 jQuery Validation 插件（由同一个人 JÖRN ZAEFFERER 编写）

# highcharts - 系列列表中字符串的 X 轴类别名称

> ID：15511245
> 
> 赞同：13
> 
> 时间：2013-03-19T21:54:50.890
> 
> 标签：highcharts

是否可以从我的系列列表中的字符串中获取 x 轴名称？我正在后端构建这个系列列表，并希望使用“纽约”、“洛杉矶”和“芝加哥”作为我的 x 轴类别值。

我希望“纽约”、“洛杉矶”和“芝加哥”作为我的 x 轴标签，但是，我得到 -0.25 到 2.25。

谢谢。

[http://jsfiddle.net/nicholasduffy/H7zgb/2/](http://jsfiddle.net/nicholasduffy/H7zgb/2/)

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column'
    },
    plotOptions: {
        column: {
            stacking: 'normal',
            dataLabels: {
                enabled: false
            }
        }
    },
    series: [{
        "data": [
            ["New York", 3570.5],
            ["LA", 50128.38],
            ["Chicago", 5281.22]
        ],
        "name": "Stuff"
    }, {
        "data": [
            ["New York", 10140.84],
            ["LA", 21445.04],
            ["Chicago", 12957.77]
        ],
        "name": "Junk"
    }, {
        "data": [
            ["New York", 65119.6],
            ["LA", 103118.6],
            ["Chicago", 78349.6]
        ],
        "name": "Other Stuff"
    }]
}); 
```

});

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-19T16:08:30.110

从 HighCharts 3 开始，您可以使用 xAxis.type 并将其设置为“类别”以获得所需的行为，而无需指定类别名称。

[http://api.highcharts.com/highcharts#xAxis.type](http://api.highcharts.com/highcharts#xAxis.type)

我已将 jFiddle 编辑为具有以下内容：

```
xAxis: {
        type: "category"
    } 
```

[http://jsfiddle.net/H7zgb/22/](http://jsfiddle.net/H7zgb/22/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:33:46.300

我相信你正在寻找这个......

[http://api.highcharts.com/highcharts#xAxis.categories](http://api.highcharts.com/highcharts#xAxis.categories)

看看这个小提琴......我添加了以下内容：

```
 xAxis: {
        categories: ["New York", "LA", "Chicago"]
    }, 
```

[http://jsfiddle.net/H7zgb/3/](http://jsfiddle.net/H7zgb/3/)

# eclipse - 重做快捷方式消失了 - OSX 上的 Eclipse

> ID：15511248
> 
> 赞同：8
> 
> 时间：2013-03-19T21:54:55.710
> 
> 标签：eclipse, macos, keyboard-shortcuts, eclipse-juno

在相当长的一段时间内，我的 Eclipse Juno 不允许我通过快捷方式重做我的撤消操作，尽管绑定设置正确并且我没有更改任何内容。您可以看到这里有问题，因为快捷方式甚至不再列出。![我失去了我的捷径:(](../Images/f3858967b5bc1bf48d853b6333c27a32.png)
在设置中是这样设置的： ![绑定已设置](../Images/e65eaad52fa223ea68128e8948ae8651.png)

有没有人遇到同样的问题？我在 OSX 10.8.3 上的 32 位和 64 位 Eclipse Juno Service Release 2，Build 20130225-0426 中遇到了问题，但我认为它已经在 10.8.2 中出现了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T10:38:39.247

如果您像下面这样描述您的**重做**键配置，您的问题将得到解决。

![Eclipse 键配置](../Images/cc769acff4378d76884bd4fa991b85db.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-12T08:38:11.697

vtokmak 的答案似乎对大多数人都有效，但可能值得注意的是，对于其他一些用户来说，问题可能是键绑定冲突。*您可以通过搜索您的快捷方式应该*是的绑定来检查/排除这种情况（例如“Shift+Ctrl+Z”。注意顺序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-13T00:03:28.310

当您安装 Eclipse 插件时，它们偶尔会弄乱您的键绑定。您应该通过**对“绑定”列**进行排序来**查找****“Shift+Command+Z”**，因为它不可搜索。如果您发现多个键绑定，那么**您应该只保留一个全局键绑定**，如下图所示。

 ****“*重做*”命令，“*何时*”设置为**“在对话框和 Windows 中”**是人们应该拥有的**唯一一个全局选项。**

[![在此处输入图像描述](../Images/1ae3e1aae5574df2f82985ab482dce2e.png)](https://i.stack.imgur.com/ZEtUR.png)****

# oracle - 使用选择语句数据更新/合并多行

> ID：15511250
> 
> 赞同：0
> 
> 时间：2013-03-19T21:54:59.173
> 
> 标签：oracle, select, merge, sql-update

我试图用返回两个值的选择语句的输出来更新单个表。一个是表中我需要更新的accountid，另一个是我需要更新的信息。

```
Here is my select statement
select CTP.CARETEAMPATIENTID, O.ORGANIZATIONID
  from acts.careteampatient ctp,  
       ods.member m,
       ods.supplierorganization so,
       ods.MASTERSUPPLIERSUPPLIERRELATION mssr,
       ods.INSURANCEORGSUPPLIERRELATION   IOSR, 
       ods.INSURANCEORGANIZATION          IO,
       acts.organization o
where ctp.accountorgid is null
    and m.primarymemberplanid = ctp.primarymemberplanid
    and SO.AHMSUPPLIERID = M.AHMSUPPLIERID
    and mssr.SUPPLIERID       = so.SUPPLIERORGID
    AND iosr.SUPPLIERID       = so.SUPPLIERORGID
    AND io.INSURANCEORGID     = iosr.INSURANCEORGID
    and io.processingmodecd  = 'P'
    and so.usagemnemonic     = 'P'
    and O.ODSACCOUNTID = IO.INSURANCEORGID
    and O.ACCOUNTFLG = 'Y' 
```

我想做一些事情

```
update careteampatient
from (select CTP.CARETEAMPATIENTID patientid, O.ORGANIZATIONID orgid
  from acts.careteampatient ctp, 
       ods.member m,
       ods.supplierorganization so,
       ods.MASTERSUPPLIERSUPPLIERRELATION mssr,
       ods.INSURANCEORGSUPPLIERRELATION   IOSR,
       ods.INSURANCEORGANIZATION          IO,
       acts.organization o
where ctp.accountorgid is null
    and m.primarymemberplanid = ctp.primarymemberplanid
    and SO.AHMSUPPLIERID = M.AHMSUPPLIERID
    and mssr.SUPPLIERID       = so.SUPPLIERORGID
    AND iosr.SUPPLIERID       = so.SUPPLIERORGID
    AND io.INSURANCEORGID     = iosr.INSURANCEORGID
    and io.processingmodecd  = 'P'
    and so.usagemnemonic     = 'P'
    and o.odsaccountid = io.insuranceorgid
    and o.accountflg = 'Y') b  
set a.accountorgid = b.orgid
where a.careteampatientid = b.patientid 
```

这是我也尝试过的合并

```
merge into careteampatient a
using (select CTP.CARETEAMPATIENTID patientid, O.ORGANIZATIONID orgid
        from acts.careteampatient ctp, 
             ods.member m,
             ods.supplierorganization so,
             ods.MASTERSUPPLIERSUPPLIERRELATION mssr,
             ods.INSURANCEORGSUPPLIERRELATION   IOSR,
             ods.INSURANCEORGANIZATION          IO,
             acts.organization o
      where ctp.accountorgid is null
          and m.primarymemberplanid = ctp.primarymemberplanid
          and SO.AHMSUPPLIERID = M.AHMSUPPLIERID
          and mssr.SUPPLIERID       = so.SUPPLIERORGID
          AND iosr.SUPPLIERID       = so.SUPPLIERORGID
          AND io.INSURANCEORGID     = iosr.INSURANCEORGID
          and io.processingmodecd  = 'P'
          and so.usagemnemonic     = 'P'
          and o.odsaccountid = io.insuranceorgid
          and o.accountflg = 'Y') b
on a.careteampatientid = b.patientid
when matched then
  update 
    set a.accountorgid = b.orgid 
```

这不起作用，而且我的想法很新鲜，任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:43:14.043

想通了，我的ON上缺少括号。这也应该是`on (a.careteampatientid = b.patientid)`我的选择应该阅读`select distinct`

# css - 如何防止子 div 溢出超出父 div 的高度？

> ID：15511254
> 
> 赞同：3
> 
> 时间：2013-03-19T21:55:08.843
> 
> 标签：css, html, positioning

在我正在布局的页面上，有一堆 div 相互塞入。HTML 代码如下所示：

```
<div id="overlay">
<div id="main_section">
  <div class="left">yadda yadda left sidebar</div>
  <div class="middle">
    <div id="header">yadda yadda header</div>
    <div id="main_content"><img class="resize content" src="static/some_image.jpg" /></div>
  </div>
  <div class="right">yadda yadda right sidebar</div>
  <div class="clear"></div>
</div>
</div> 
```

主容器是覆盖层，它使用固定位置，如下所示：

```
#overlay {
    position: fixed;
    width: 100%; height: 90%;
    top: 0px; left: 0px;
    background-color: rgba(255,255,255,0.5);
} 
```

（我将具有不同不透明度级别的多个背景分层，这就是为什么有 main_section、overlay 等）

现在，所有的孩子都使用相对定位，效果相当好。问题出现在#main_content 中。#main_section 和 .middle 都具有高度：100%，并且正如预期的那样，它们一直下降到 #overlay 的底部。现在，这是#main_content：

```
#main_content {
    position: relative;
    height: 100%;
    width: 70%;
    overflow-y: auto;
    text-align: right;
} 
```

这不像我想要的那样工作，因为由于图像大小，这个东西一直延伸到页面的底部而不是#overlay的底部。我试过溢出-y：滚动和高度：继承，我试过最大高度：100%，我把头发扯掉了。Stackoverflow 是我心脏病发作前的最后希望！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:51:52.927

我更改并添加了一些属性，因为没有提供完整的源代码（颜色仅用于识别相关块）。在我看来，错误一定是在你的 CSS 中的其他地方，因为下面的代码对我来说很好。

```
<!DOCTYPE html>
<html>
<head>
<style>
    #overlay {
        position: fixed;
        width: 100%; 
        height: 90%;
        top: 0px;
        left: 0px;
        background-color: blue;
        border: 2px solid green;
    }
    #main_section {
        width: 100%;
        height: 100%;
        background: yellow;
    }
    .middle {
        height: 100%;
        width: 100%;
        background: lavender;
        position: relative;
    }
    #main_content {
        position: relative;
        height: 100%;
        width: 70%;
        text-align: right;
        overflow-y: auto;
        background-color: red;
    }
    img {
        width: 700px;
        height: 2000px;
        background-color: white;
        border: 1px solid black;
    }
  </style>
</head>
<body>
<div id="overlay">
<div id="main_section">
      <div class="left"></div>
      <div class="middle">
            <div id="header"></div>
            <div id="main_content"><img class="resize content" src="static/some_image.jpg" /></div>
      </div>
      <div class="right"></div>
      <div class="clear"></div>
</div> 
```

我遇到与您相同的问题的唯一时间是我设置这些`#main_content {position:fixed;}`或`.middle {position:fixed;}`. 你确定`#main_content`还是`.middle`没有继承固定位置？或者也许是一个未被注意到的类添加了该属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T11:13:39.397

我发现自己也有同样的问题。

SO上有非常相似的问题的答案。但我发现的只是在整个页面/正文上工作或在容器上具有固定高度。有些使用浮动和定位（绝对或相对在这里并不重要）。然而，整体的基调是使用`display`元素，我认为这是最优雅和最实用的。

下面是我的解决方案。你可以把它放在任何容器中。它将完全适应容器的高度和宽度，不会溢出。正如你所看到的，它只是结合了`display: inline-block`父母和`display: table`孩子。

请注意，如果您添加一个`display: table-caption`溢出将再次发生（如果您知道原因，请发表评论）。

```
<div id="#place_me_anywhere"
     style="display: inline-block;width: 100%;height: 100%;">
    <div style="display: table;height: 100%;width: 100%;">  
        <!--<div style="display: table-caption;">
            Height overflow will occur
        </div>-->
        <div style="display: table-row;">
            <h1>Heading</h1>
        </div>
        <div style="display: table-row;background-color: pink;height: 100%;">
            <!-- this row consumes all remaining height without overflow -->
            <div style="display: table-cell;width: 10em;min-width: 10em;background-color: red;">
                Just an example of some fixed width column/cell
            </div>
            <div style="display: table-cell;background-color: blue;">
                takes the remaining width
            </div>
        </div>

   </div>

</div> 
```

# ruby-on-rails - 如何在法拉第的轨道观察者中使用延迟工作

> ID：15511259
> 
> 赞同：2
> 
> 时间：2013-03-19T21:55:25.780
> 
> 标签：ruby-on-rails, delayed-job, faraday

通过我正在构建的应用程序，我们使用 trumpia 来安排并向我们的用户发送短信和电子邮件消息。当他们注册时，我正在使用观察者来触发对 trumpia 的调用，并且我正在使用 faraday 来实际连接 trumpia API。我的问题是这些电话需要很多时间，我需要将它们放到后台。我还有一组较小的命令需要立即运行，所以我不能只是延迟整个 after_create。

我正在考虑使用delayed_job 来完成此任务，但我不知道如何使用像我的代码一样复杂的东西来做到这一点。我怎样才能做到这一点？我想我需要将法拉第调用放入一个方法中，但我不知道如何。 - 谢谢

这是我的观察者。我省略了不必要的代码。

```
class UserObserver < ActiveRecord::Observer

def after_create(user)
   #This first part should not be delayed
     @user = user
     kevin = User.find(1)
     user.increment!(:renewcash, by = 5)
     body = "Hi " + @user.name.split(' ', 2).first + ", ..."
     kevin.send_message(@user, body, "First message", sanitize_text=true, attachment=nil)

   # This whole second part needs to be delayed.
    conn = Faraday.new(:url => 'http://api.trumpia.com') do |faraday|
      faraday.request  :multipart 
      faraday.response :logger                  
      faraday.adapter  Faraday.default_adapter  
    end

    trumpia_body = {:list_name => ... .... }.to_json

    response = conn.put do |req|
       req.url '/rest/v1/XXXXXXXXX/subscription'
       req.headers['X-Apikey'] = 'XXXXXXXXXXXXX'
       req.headers['Content-Type'] = 'application/json'
       req.body = trumpia_body
    end

    response2 = conn.get do |req2|
       req2.url '/rest/v1/XXXXXXXX/subscription?row_size=1'
       req2.headers['X-Apikey'] = 'XXXXXXXXXXX'
       req2.headers['Content-Type'] = 'application/json'
    end
 end 
```

我正在使用导轨 3.2.8。但我还没有安装延迟的工作，我对不同的排队宝石持开放态度。

# java - 在 Runtime exec 上执行多次执行

> ID：15511261
> 
> 赞同：1
> 
> 时间：2013-03-19T21:55:36.087
> 
> 标签：java, android, runtime.exec

我正在尝试在 Android 中做这个简单的 unix ls：

```
cd /data 
```

然后

```
ls 
```

它应该返回 /data 文件夹的所有内容。

我有这个编码：

```
try {
       String line;
       Process p = Runtime.getRuntime().exec(new String[] { "ls /data"});
       BufferedReader in = new BufferedReader(
               new InputStreamReader(p.getInputStream()) );
       while ((line = in.readLine()) != null) {
         Log.d("debugging", line);
       }
       in.close();
     }
     catch (Exception e) {
       e.printStackTrace();
     } 
```

我目前面临的问题是我一次只能执行一个命令。例如，如果我写`ls /data`它什么都不返回。看来他不喜欢空格。

如果我只写一个像“ls”这样返回根目录列表的单词，一切都会正常工作：

```
03-19 22:51:59.241: D/debugging(16274): acct
03-19 22:51:59.241: D/debugging(16274): cache
03-19 22:51:59.241: D/debugging(16274): config
03-19 22:51:59.241: D/debugging(16274): crashtag
03-19 22:51:59.241: D/debugging(16274): d
03-19 22:51:59.241: D/debugging(16274): data
03-19 22:51:59.241: D/debugging(16274): default.prop
03-19 22:51:59.241: D/debugging(16274): dev
03-19 22:51:59.241: D/debugging(16274): etc
03-19 22:51:59.241: D/debugging(16274): fstab
03-19 22:51:59.241: D/debugging(16274): init
03-19 22:51:59.241: D/debugging(16274): init.clrdex.sh
03-19 22:51:59.241: D/debugging(16274): init.goldfish.rc
03-19 22:51:59.241: D/debugging(16274): init.hostapd.sh
03-19 22:51:59.241: D/debugging(16274): init.rc
03-19 22:51:59.241: D/debugging(16274): init.semc.rc
03-19 22:51:59.241: D/debugging(16274): init.usbmode.sh
03-19 22:51:59.241: D/debugging(16274): logo.rle
03-19 22:51:59.241: D/debugging(16274): mnt
03-19 22:51:59.241: D/debugging(16274): mr.log
03-19 22:51:59.241: D/debugging(16274): proc
03-19 22:51:59.241: D/debugging(16274): root
03-19 22:51:59.241: D/debugging(16274): sbin
03-19 22:51:59.241: D/debugging(16274): sdcard
03-19 22:51:59.241: D/debugging(16274): sys
03-19 22:51:59.241: D/debugging(16274): system
03-19 22:51:59.241: D/debugging(16274): ueventd.goldfish.rc
03-19 22:51:59.241: D/debugging(16274): ueventd.rc
03-19 22:51:59.241: D/debugging(16274): ueventd.semc.rc
03-19 22:51:59.241: D/debugging(16274): vendor 
```

正如有人提到的那样，我已经尝试用多个命令填充该数组，但它什么也没返回。空白的。

```
{"ls","ls"} //this should return twice ls result. 
```

**任何想法如何在 Android 运行时“连接”一个命令？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:30:14.877

我认为您需要 root 访问权限才能执行`ls /data`命令，因此您应该首先获取 su shell 然后执行命令，例如：

```
// run command with su rights and return output of that command(inside su
// shell)
// command = "ls /data"
public static void suOutputExecute(String command) {
    try {
        int BUFF_LEN = 1024;
        Process p = Runtime.getRuntime().exec(new String[] { "su", "-c", "system/bin/sh" });
        DataOutputStream stdin = new DataOutputStream(p.getOutputStream());
        // from here all commands are executed with su permissions
        stdin.writeBytes(command + "\n"); // \n executes the command
        InputStream stdout = p.getInputStream();
        byte[] buffer = new byte[BUFF_LEN];
        int read;
        String out = new String();
        // while((read=stdout.read(buffer))>0) won't work here
        while (true) {
            read = stdout.read(buffer);
            out += new String(buffer, 0, read);
            if (read < BUFF_LEN) {
                // we have read everything
                break;
            }
        }
        stdout.close();
        Log.e("ROOT", out);
        p.waitFor();
    } catch (Exception e) {
        Log.e("ROOT", "Error", e);
    }
} 
```

您需要有根设备。对于模拟器，您仍然必须安装超级用户。

对于不需要 su 以下代码的命令应该可以工作（我现在无法测试它）：

```
public static void shExecute(String[] commands) {
    Process shell = null;
    DataOutputStream out = null;
    BufferedReader in = null;

    try {
        // Acquire sh
        Log.i(LOG_TAG, "Starting exec of sh");
        shell = Runtime.getRuntime().exec("sh");//su if needed
        out = new DataOutputStream(shell.getOutputStream());

        in = new BufferedReader(new InputStreamReader(shell.getInputStream()));

        // Executing commands without root rights
        Log.i(LOG_TAG, "Executing commands...");
        for (String command : commands) {
            Log.i(LOG_TAG, "Executing: " + command);
            out.writeBytes(command + "\n");
            out.flush();
        }

        out.writeBytes("exit\n");
        out.flush();
        String line;
        StringBuilder sb = new StringBuilder();
        while ((line = in.readLine()) != null) {
            sb.append(line).append("\n");
        }
        Log.i(LOG_TAG, sb.toString());
        shell.waitFor();

    } catch (Exception e) {
        Log.e(LOG_TAG, "ShellRoot#shExecute() finished with error", e);
    } finally {
        try {
            if (out != null) {
                out.close();
            }
            if(in != null){
                in.close();
            }
            // shell.destroy();
        } catch (Exception e) {
            // hopeless
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:05:53.890

我认为你的问题是

```
Process p = Runtime.getRuntime().exec(new String[] { "ls /data"}); 
```

您应该使用 exec(String command) 或将“ls /data”分成两个字符串

```
Runtime.getRuntime().exec(new String[] { "ls", "/data"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T07:25:31.237

您是否为 java 运行时探索过这个 exec 命令，使用要“cd”到的路径创建一个文件对象，然后将其作为 exec 方法的第三个参数输入。

```
public Process exec(String command,
                String[] envp,
                File dir)
         throws IOException 
```

在具有指定环境和工作目录的单独进程中执行指定的字符串命令。

这是一种方便的方法。exec(command, envp, dir) 形式的调用与调用 exec(cmdarray, envp, dir) 的行为方式完全相同，其中 cmdarray 是命令中所有标记的数组。

更准确地说，使用由调用 new StringTokenizer(command) 创建的 StringTokenizer 将命令字符串分解为标记，而无需进一步修改字符类别。标记器生成的标记然后以相同的顺序放置在新的字符串数组 cmdarray 中。

```
Parameters:
    command - a specified system command.
    envp - array of strings, each element of which has environment variable settings in the format name=value, or null if the subprocess should inherit the environment of the current process.
    dir - the working directory of the subprocess, or null if the subprocess should inherit the working directory of the current process. 
Returns:
    A new Process object for managing the subprocess 
Throws:
    SecurityException - If a security manager exists and its checkExec method doesn't allow creation of the subprocess 
    IOException - If an I/O error occurs 
    NullPointerException - If command is null, or one of the elements of envp is null 
    IllegalArgumentException - If command is empty 
```

# matlab - 具有渐变颜色的matlab轮廓

> ID：15511263
> 
> 赞同：2
> 
> 时间：2013-03-19T21:55:48.953
> 
> 标签：matlab, plot, contour

伙计们，

我有一个图像矩阵并使用创建了下图

```
contourf(my_matrix)
colorbar 
```

![在此处输入图像描述](../Images/f93e0f5c8f32d05765c576a01cb0355d.png)

是否可以让轮廓线之间的颜色逐渐变化，而不是用纯色填充这些空间？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T06:10:45.013

Cinico 的解决方案对我不起作用。这是我使用的：

```
% Set Data
data = (1:100)'*(1:100);

figure;
subplot(1,2,1)
% Binned Color
contourf(data);
subplot(1,2,2)
% Gradual Color
pcolor(data);
hold on;
shading interp; 
contour(data,'LineColor','k') 
```

输出：

![在此处输入图像描述](../Images/e7a7815e815559c347b59cde2a38d13d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:29:32.350

`shading interp`情节完成后尝试命令

但...

最有可能的是你的数据不是“渐进的”。我的意思是：要么你有值 2 或 4 或 10 等，而不是 2.2 或 4.6 或 10.1 等。

因此，您不能拥有中间颜色，因为这意味着您将拥有中间值（您没有）。

# eclipse - Aptana 3 Studio 的奇怪行为，无法格式化代码

> ID：15511264
> 
> 赞同：2
> 
> 时间：2013-03-19T21:55:50.463
> 
> 标签：eclipse, ide, aptana, aptana3

我发现 Aptana 3 Studio 的行为非常奇怪。

如果我打开一个 php 文件（取自 Word Press 模板的文件）并尝试执行**Source ---> Format**它会给我以下错误消息：

**无法格式化。脚本中存在致命的语法错误**

这件事很奇怪，因为如果我尝试用 Eclipse Indigo (Eclipse for PHP) 打开同一个文件，然后我尝试做**Source ---> 格式化**它就可以正常工作！！！

为什么？我可以用 Aptana 解决吗？

肿瘤坏死因子

安德烈亚

# ajax - i18n 正在改变 Ajax 调用的输出

> ID：15511271
> 
> 赞同：1
> 
> 时间：2013-03-19T21:56:16.347
> 
> 标签：ajax, ruby-on-rails-3, internationalization

在我国际化我的应用程序之前，我有一个运行良好的日期选择器功能。但是现在，它不再起作用了。这是我的 Ajax 函数：

```
$datepicker.change(function(){              
   currentDate = $datepicker.datepicker( "getDate" );
   dateString = $.datepicker.formatDate("yy-mm-dd", currentDate);
   console.log("My dateString is: "+dateString); 
```

我的控制台在这里显示正确的日期

```
 $.ajax({
          type: "POST",
          url: "movements/getTO/",
          data: {"date":dateString},
        }).done(function(data) {
          $("#resultTO").html(data[0])
          $("#resultQty").html(data[1])
        });
   }); 
```

使用此控制器功能：

```
def getTO
    selected_date = Date.parse(params[:date])
    new_html_to_return1 = Movement.where(:movement_date =>selected_date, :user => current_user.email).sum("turnover")
    new_html_to_return2 = Movement.where(:movement_date =>selected_date, :user => current_user.email).sum("quantity")
    @table = [new_html_to_return1, new_html_to_return2]
    render :json => @table
end 
```

我的 routes.rb ：

```
post "movements/getTO"
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
    resources :movements
    (...)
end
match '*path', to: redirect("/#{I18n.default_locale}/%{path}"), constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }
match '', to: redirect("/#{I18n.default_locale}") 
```

此时，我的日期选择器遇到了路线问题。所以我添加了 routes.rb

```
match 'movements/getTO', to: redirect("movements/getTO") 
```

但这不对，因为现在我有输出：< 和！。令人难以置信的总和不是吗？？？

# c# - 家庭控制器中每个 mvc actionresult 的代码相同

> ID：15511272
> 
> 赞同：3
> 
> 时间：2013-03-19T21:56:18.017
> 
> 标签：c#, html, asp.net-mvc, razor

所以我有一些通用的 actionresults 暂时链接到各种视图。布局页面包含对 adfs 的调用，以填充必须用于每个页面的登录用户名。看起来像这样：

```
 <div class="float-right">
                <section id="login">
                   Hello, <span class="username">@ViewBag.GivenName @ViewBag.LastName</span>!
                </section>
            </div> 
```

在家庭控制器中，使这个登录名起作用的是这里的代码：

```
 public ActionResult Index()
    {
        ClaimsIdentity claimsIdentity = Thread.CurrentPrincipal.Identity as ClaimsIdentity;
        Claim claimGivenName = claimsIdentity.FindFirst("http://sts.msft.net/user/FirstName");
        Claim claimLastName = claimsIdentity.FindFirst("http://sts.msft.net/user/LastName");

        if (claimGivenName == null || claimLastName == null)
        {
            ViewBag.GivenName = "#FAIL";
        }
        else
        {
            ViewBag.GivenName = claimGivenName.Value;
            ViewBag.LastName = claimLastName.Value;
        }

        return View();
    } 
```

但如前所述，我需要在用户访问每个链接（actionresult）时显示它。因此，为了实现这一点，我必须将上面的所有代码发布到每个 actionresult 中。

有什么方法可以将其应用于整个操作结果，而不必将代码从一个操作复制到另一个操作？我确实尝试为我的 _Layout.cshtml 注册到 actionresult 并调用该部分视图，但这并没有给我带来有利的结果。我敢肯定，我缺少一些简单的东西。

希望你们中的一些人能提供帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:32:33.020

我们使用抽象控制器并覆盖其`OnActionExecuting`方法以在调用实际操作方法之前执行代码。使用这个抽象控制器，您所要做的就是让任何其他控制器从它继承来获得它的功能。我们还使用这个基本控制器作为定义其他扩展它的控制器可以使用的其他辅助方法的地方，例如`GetUsernameForAuthenticatedUser()`.

```
public abstract class AbstractAuthenticationController : Controller
{
    private readonly IAuthenticationService _authService;

    protected AbstractAuthenticationController()
    {
        _authService = AuthenticationServiceFactory.Create();
    }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);

        EnsureUserIsAuthenticated();
    }

    internal void EnsureUserIsAuthenticated()
    {
        if (!_authService.IsUserAuthenticated())
        {
            _authService.Login();
        }
    }

    protected string GetUsernameForAuthenticatedUser()
    {
        var identityName = System.Web.HttpContext.Current.User.Identity.Name;
        var username = _authService.GetUsername(identityName);
        if (username == null) throw new UsernameNotFoundException("No Username for " + identityName);
        return username;
    }
} 
```

此功能也可以在`Attribute`允许您装饰控制器而不是使用继承的类中实现，但最终结果是相同的。[这是一个自定义控制器属性实现的示例](https://stackoverflow.com/questions/5995607)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:24:46.443

使用 as this 的另一种方法`OnActionExecuting`仅适用于模板的一部分，即为其提供自己的操作方法，该方法返回一个部分并调用`@Html.Action()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:14:45.553

您可以创建一个基本控制器并使所有控制器都继承自它。将设置给定和姓氏的代码移动到单独的受保护方法中，并在需要时调用它。`Initialize`我认为您可以在基本控制器的方法中调用该函数。这样您就不需要将其直接调用到操作中。您还可以创建模型层次结构并在基础模型上具有`GivenName`和作为属性，而不是使用.`LastName``ViewBag`

# c++ - C - 打印出浮点值

> ID：15511276
> 
> 赞同：8
> 
> 时间：2013-03-19T21:56:29.817
> 
> 标签：c++, c, floating-point, precision

我有一个 C++ 程序，它接收值并打印出如下值：

```
getline(in,number);
cout << setw(10) << number << endl; 
```

我有一个等效的 C 程序，它接受值并像这样打印出来：

```
fscanf(rhs, "%e", &number);
printf("%lf\n", number); 
```

但是当 C++ 程序打印出来时，`0.30951`C 程序打印出`0.309510`. 更多示例：C++: `0.0956439`C: `0.095644`。只要值是 7 位长，它似乎打印相同的结果，但如果它更短 7 位，它会在末尾添加一个额外的 0。如果它的长度超过 7 位，则向下舍入到 6 位。我希望 C 结果与 C++ 程序相匹配。任何帮助，将不胜感激。

谢谢。

注意：数字是浮点数，数字是从文件中读取的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T21:59:27.370

利用 C 格式打印语句中的长度和精度说明符：

```
printf( "%6.4lf", number ); 
```

在六个字符宽的“单元格”中打印四个小数位。

您可以使用通配符来表示长度或精度，以便在运行时提供该值：

```
int precision = 4;

printf( "%6.*lf", precision, number ); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-19T22:01:28.500

利用 C++ 中的长度和精度说明`iostream`符

```
std::cout.precision(4);
std::cout << std::setw(10) << number << "\n"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T15:36:04.093

```
printf("%g\n", number); 
```

将解决您的问题， %lf 用于双精度， %f 用于浮点数，当您要显示所有小数位并切断零时，%g 用于浮点数。

# java - 如何使 Java Swing 动画更流畅

> ID：15511282
> 
> 赞同：8
> 
> 时间：2013-03-19T21:56:53.883
> 
> 标签：java, swing, animation

我正在用 Java 创建一个动画幻灯片过渡，它在我当前的型号 MacBook Pro 和我一岁的 iMac 上，在 Java 6、7 和 8 上时断断续续。

在 Mac OS X 上，我可以做些什么来使这个动画在用户看来更流畅？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class ScratchSpace {

    public static void main(String[] args) {
        AnimatedPanel panel = new AnimatedPanel();

        JFrame frame = new JFrame();
        frame.setContentPane(panel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        panel.animate();
    }

    public static class AnimatedPanel extends JPanel {

        private float progress = 0.0f; // a number between 0.0 and 1.0

        public AnimatedPanel() {
            setPreferredSize(new Dimension(800, 600));
            setOpaque(true);
        }

        public void animate() {
            final int animationTime = 1000;
            int framesPerSecond = 30;
            int delay = 1000 / framesPerSecond;
            final long start = System.currentTimeMillis();
            final Timer timer = new Timer(delay, null);
            timer.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    final long now = System.currentTimeMillis();
                    final long elapsed = now - start;
                    progress = (float) elapsed / animationTime;
                    repaint();
                    if (elapsed >= animationTime) {
                        timer.stop();
                    }
                }
            });
            timer.start();
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g;
            int width = getWidth();
            int progressWidth = (int) (width * progress);
            g2d.setColor(Color.BLUE);
            g2d.fillRect(0, 0, progressWidth, getHeight());
            g2d.setColor(Color.RED);
            g2d.fillRect(progressWidth, 0, width-progressWidth, getHeight());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T22:39:01.550

很大程度上取决于您最终想要实现的目标。

请记住，动画是运动的幻觉......

我变了

*   `framesPerSecond`似乎有`60`帮助。
*   降低了可打印区域的总高度
*   计算变化的区域，简单地称为`repaint(Rectangle)`只传入发生变化的区域。

另一个问题是您的动画在很短的时间内需要覆盖很大的区域。增加时间也会使其更平滑（或减少宽度和/或高度）

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ScratchSpace {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                AnimatedPanel panel = new AnimatedPanel();

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                panel.animate();
            }
        });
    }

    public static class AnimatedPanel extends JPanel {

        private float progress = 0.0f; // a number between 0.0 and 1.0

        public AnimatedPanel() {
            setPreferredSize(new Dimension(800, 100));
        }

        public void animate() {
            final int animationTime = 1000;
            int framesPerSecond = 60;
            int delay = 1000 / framesPerSecond;
            final long start = System.currentTimeMillis();
            final Timer timer = new Timer(delay, null);
            timer.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    final long now = System.currentTimeMillis();
                    final long elapsed = now - start;

                    int width = getWidth();
                    int height = getHeight();
                    int oldWidth = (int) (width * progress);

                    progress = (float) elapsed / animationTime;
                    int newWidth = (int) (width * progress);

                    repaint(new Rectangle(oldWidth, 0, newWidth - oldWidth, height));
                    if (elapsed >= animationTime) {
                        timer.stop();
                    }
                }
            });
            timer.start();
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g;
            int width = getWidth();
            int progressWidth = (int) (width * progress);
            g2d.setColor(Color.BLUE);
            g2d.fillRect(0, 0, progressWidth, getHeight());
            g2d.setColor(Color.RED);
            g2d.fillRect(progressWidth, 0, width - progressWidth, getHeight());
        }
    }
} 
```

或者，您可以生成自己的后备缓冲区并更新它......

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ScratchSpace {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                AnimatedPanel panel = new AnimatedPanel();

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                panel.animate();
            }
        });
    }

    public static class AnimatedPanel extends JPanel {

        private float progress = 0.0f; // a number between 0.0 and 1.0
        private BufferedImage buffer;

        public AnimatedPanel() {
            setPreferredSize(new Dimension(800, 600));
//            setOpaque(true);
        }

        public void animate() {
            final int animationTime = 1000;
            int framesPerSecond = 60;
            int delay = 1000 / framesPerSecond;
            final long start = System.currentTimeMillis();
            final Timer timer = new Timer(delay, null);
            timer.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    final long now = System.currentTimeMillis();
                    final long elapsed = now - start;

                    int width = getWidth();

                    progress = (float) elapsed / animationTime;

                    updateBuffer();
                    repaint();

                    if (elapsed >= animationTime) {
                        timer.stop();
                    }

                }
            });
            timer.start();
        }

        @Override
        public void invalidate() {
            buffer = null;
            updateBuffer();
            super.invalidate();
        }

        protected void updateBuffer() {

            if (getWidth() > 0 && getHeight() > 0) {

                if (buffer == null) {

                    buffer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);

                }

                Graphics2D g2d = buffer.createGraphics();
                g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
                g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
                int width = getWidth();
                int height = getHeight();
                float progressWidth = width * progress;
                g2d.setColor(Color.BLUE);
                g2d.fill(new Rectangle2D.Float(0, 0, progressWidth, height));
                g2d.setColor(Color.RED);
                g2d.fill(new Rectangle2D.Float(progressWidth, 0, width - progressWidth, height));
                g2d.dispose();

            }

        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g;
            if (buffer != null) {
                g2d.drawImage(buffer, 0, 0, this);
            }
//            int width = getWidth();
//            int progressWidth = (int) (width * progress);
//            g2d.setColor(Color.BLUE);
//            g2d.fillRect(0, 0, progressWidth, getHeight());
//            g2d.setColor(Color.RED);
//            g2d.fillRect(progressWidth, 0, width - progressWidth, getHeight());
        }
    }
} 
```

您遇到的主要问题基本上是您尝试绘制的区域对于您想要绘制它的时间来说太大了。

**另一种选择**

您可以创建一个`BufferedImage`代表进度条并随着进度更新而移动。此更新创建了一个兼容的缓冲图像，这将使渲染器更快

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsEnvironment;
import java.awt.RenderingHints;
import java.awt.Transparency;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ScratchSpace {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                AnimatedPanel panel = new AnimatedPanel();

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                panel.animate();
            }
        });
    }

    public static class AnimatedPanel extends JPanel {

        private float progress = 0.0f; // a number between 0.0 and 1.0
        private BufferedImage buffer;

        public AnimatedPanel() {
            setPreferredSize(new Dimension(800, 600));
//            setOpaque(true);
        }

        public void animate() {
            final int animationTime = 1000;
            int framesPerSecond = 60;
            int delay = 1000 / framesPerSecond;
            final long start = System.currentTimeMillis();
            final Timer timer = new Timer(delay, null);
            timer.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    final long now = System.currentTimeMillis();
                    final long elapsed = now - start;

                    progress = (float) elapsed / animationTime;

                    repaint();

                    if (elapsed >= animationTime) {
                        timer.stop();
                    }

                }
            });
            timer.start();
        }

        @Override
        public void invalidate() {
            buffer = null;
            updateBuffer();
            super.invalidate();
        }

        protected void updateBuffer() {

            if (getWidth() > 0 && getHeight() > 0) {

                if (buffer == null) {

                    GraphicsConfiguration config = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
                    buffer = config.createCompatibleImage(getWidth(), getHeight(), Transparency.TRANSLUCENT);
                    buffer.coerceData(true);

                    Graphics2D g2d = buffer.createGraphics();
                    g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
                    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                    g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
                    g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
                    g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
                    g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
                    g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                    g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
                    int width = getWidth();
                    int height = getHeight();
                    g2d.setColor(Color.BLUE);
                    g2d.fill(new Rectangle2D.Float(0, 0, width, height));
                    g2d.dispose();

                }

            }

        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g;
            int width = getWidth();
            int progressWidth = (int) (width * progress);
            int x = (progressWidth - width);
            System.out.println(progressWidth + "; " + x);
//            g2d.setColor(Color.BLUE);
//            g2d.fillRect(0, 0, progressWidth, getHeight());
            g2d.setColor(Color.RED);
            g2d.fillRect(progressWidth, 0, width - progressWidth, getHeight());
            g2d.drawImage(buffer, x, 0, this);
        }
    }
} 
```

# c# - 如何接近项目计数检查器

> ID：15511286
> 
> 赞同：2
> 
> 时间：2013-03-19T21:57:09.850
> 
> 标签：c#, .net, wpf, xaml, user-interface

如果没有项目，我正在尝试创建一个触发器以禁用组合框下拉按钮。这是迄今为止我尝试过的 XAML 代码，但是我不确定如何检测 ComboBox 中是否不包含任何项目，以及如何禁用专门下拉列表的按钮。

```
<Style TargetType="ComboBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBox}">
                        <ControlTemplate.Triggers>
                            <Trigger Property="Items.Count" Value="0">

                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:08:32.037

这对我有用：

```
<ComboBox IsEnabled="{Binding RelativeSource=
   {RelativeSource Mode=Self}, Path=ItemsSource.Count}"/> 
```

假设您绑定到 ItemsSource 属性的任何内容都有一个 count 方法（它适用于 ObservableCollection）。在 xaml 中 count 为 0 解析为 false 实际上有点有趣，但是在 C# 中情况并非如此。

如果需要以编程方式将其添加到控件中，可以将其添加到样式中

```
<Style TargetType="ComboBox" x:Key="ComboStyle">
    <Setter Property="IsEnabled" Value="{Binding RelativeSource=
       {RelativeSource Mode=Self}, Path=ItemsSource.Count}"/>
</Style> 
```

```
ComboBox cbo = new ComboBox();
cbo.ItemsSource = MyData;
cbo.Style = Resources["ComboStyle"] as Style; 
```

# r - ggplot stat_density2d 的离散数据

> ID：15511290
> 
> 赞同：6
> 
> 时间：2013-03-19T21:57:26.003
> 
> 标签：r, 2d, ggplot2

stat_density2d 似乎不喜欢离散数据。我的以下代码无法绘制，并且在 R 2.15.2 上有这样的错误：

> contourLines(x = sort(unique(data$x)), y = sort(unique(data$y)), 中的错误：没有指定适当的“z”矩阵另外：警告消息：1：删除了 10000 行包含非有限值（stat_contour）。2：在 min(x) 中：min 没有非缺失参数；返回 Inf 3：在 max(x)：max 中没有非缺失参数；返回 -Inf

在 R 2.15.3 上，错误是：

> 函数错误 (x, y, h, n = 25, lims = c(range(x), range(y))) ：
> 带宽必须严格为正

可能是因为限制 n = 25。

```
a<-url("http://www-personal.umich.edu/~ajing/Files/TestData.RData")
load(a)

library(ggplot2)
p1<-ggplot(myd, aes(x=xvar,y=yvar)) + stat_density2d(aes(fill=..level..), geom="polygon")
gt <- ggplot_gtable(ggplot_build(p1)) 
```

无论如何要避免这个错误？还是其他推荐的二维直方图？

因为我需要两个边际直方图，所以 ggplot 比 fill.contour 对我来说更好。

# css - 如何对齐 到包含的底部 ?

> ID：15511297
> 
> 赞同：0
> 
> 时间：2013-03-19T21:58:04.487
> 
> 标签：css

我有以下内容：

```
ol.progress-tracker {
        margin: 0;
        padding: 0;
        list-style-type: none;
    /*
    position: absolute;
    bottom: 0px;
    */
        } 
```

如果我尝试注释代码，它会弄乱我的其他样式，我不知道为什么。还有另一种方法可以以响应式设计友好的方式将这个东西推到底部吗？我的小提琴在这里：

[http://jsfiddle.net/4mABB/](http://jsfiddle.net/4mABB/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:06:19.497

如果绝对定位块元素，它将失去水平使用整个空间的默认属性。您必须自己指定宽度：

```
ol.progress-tracker { width: 300px; /* or whatever */ } 
```

# jquery - 图像淡入/淡出

> ID：15511301
> 
> 赞同：0
> 
> 时间：2013-03-19T21:58:10.103
> 
> 标签：jquery, animation, fadein, fadeout

我有一个菜单（img.b和img.a）叠加的这2个图像类，img.b默认位于上方并且透明度为0，我需要让img.a淡出而另一个淡入......就像我拥有的代码，img.a 保留在淡入的代码下（这两个类具有透明度，因此您可以看到它们一个接一个）.. 尝试了几种解决方案，但我最终影响了所有按钮。

```
<script type='text/javascript'>
$(document).ready(function(){
$("img.b").hover(
function() {
$(this).stop().animate({"opacity": "1"}, "fast");
},
function() {
$(this).stop().animate({"opacity": "0"}, "fast");
});
});
</script>

img.a {
    z-index: 1;
    position:absolute;
        }

img.b {
    position:absolute;
    opacity: 0;
    z-index:10;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:04:49.807

[这与上一个问题](https://stackoverflow.com/questions/9745853/how-do-i-make-fade-transition-crossfade)类似。您正在尝试做的事情称为交叉淡入淡出。 [这篇文章](http://www.simonbattersby.com/blog/simple-jquery-image-crossfade/)很好地解释了它。

您可能还对[使用 CSS 进行淡入淡出](http://css3.bradshawenterprises.com/cfimg/)感兴趣。

真正的问题是，由于它是单线程的，因此很难在 JavaScript 中真正进行真正的交叉淡入淡出。所有的“交叉淡入淡出”插件等都通过仅淡出顶部元素或快速闪过背景来伪造它。即在 500 毫秒内淡出一张图像，显示背景半毫秒，然后在 500 毫秒内立即淡出新图像。

如果你有两张透明的图像，如果不使用 faux-cross-fade-via-the-background 技术，做一个漂亮的交叉淡入淡出将是非常困难的。

[使用一些画布和 requestAnimationFrame](http://ariya.ofilabs.com/2011/08/crossfading-with-canvas.html)可能会获得真正的交叉淡入淡出，但这比简单的 jQuery fadeIn/fadeOut 调用要复杂得多。

# jquery - jQuery 电子邮件密码验证检查

> ID：15511311
> 
> 赞同：2
> 
> 时间：2013-03-19T21:58:49.280
> 
> 标签：jquery, validation

我想确保访问者输入了有效的电子邮件地址和密码。如果是，则淡入提交按钮。否则将其淡出（保持隐藏）。

如何添加功能以确保存在 @ 字符以及 . emailLen 字符串中的字符？

```
var emailLen = $("#email").val().length
var pwordLen = $("#pword").val().length

    if (emailLen > 7 && pwordLen > 5) {
        $('#btnSubmit').animate({ opacity: 1.0 }, 200);
    }
    else {
        $('#btnSubmit').animate({ opacity: 0.0 }, 200);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:04:33.930

使用正则表达式验证电子邮件地址：

```
var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
var email = $("#email").val();
var pwordLen = $("#pword").val().length;

    if (regex.test(email) && pwordLen > 5) {
        $('#btnSubmit').animate({ opacity: 1.0 }, 200);
    }
    else {
        $('#btnSubmit').animate({ opacity: 0.0 }, 200);
    } 
```

`regex.test(email)`如果它是有效的电子邮件 ID，则返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:23:44.000

要直接回答您的问题，您可以检查某些字符是否存在，如下所示：

```
var email = $("email").val();
var emailLen = email.length;

// important bit:
var hasAt = email.indexOf( "@" ) != -1;
var hasDot = email.indexOf( "." ) != -1; 
```

或者您可以更进一步，至少检查一个 . 在最后一个 @ 之后

```
var atPos = email.lastIndexOf( "@" );
var hasAt = atPos != -1;
var hasDot = email.indexOf( ".", atPos ) != -1; 
```

OSSCube 给出的答案是更常用的检查邮件地址的方法，但您应该注意不寻常的邮件（例如使用 IP 地址、引号或转义字符的邮件）。我相信这种方法（只是检查`[anything]@[anything].[anything]`）永远不会有误报（如果我错了，请在评论中大喊！）

# content-management-system - 当我移动内容时，增量发布不会从 Web 服务器中删除内容？

> ID：15511312
> 
> 赞同：0
> 
> 时间：2013-03-19T21:58:52.170
> 
> 标签：content-management-system

我们有一个修补的 6.7 Percussion Rhythmyx CMS 服务器，并且遇到了一个问题，即当我们移动项目时，增量不会在版本运行时从旧位置删除项目。内容列表设置为取消发布/发布。

这是一个问题，因为 Google 在旧位置保存了指向该项目的链接，因此指向搜索结果中的旧内容。

我们是否需要设置其他内容（除了取消发布标志）才能让版本删除内容？我们所有的版本都有取消发布设置，除了立即发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:15:10.843

事实证明，这可以通过默认关闭的 rxconfig server.properties 文件中的设置来控制。

```
###############################################################################
# Set this property here is the same as set the same parameter for all
# content lists, which indicates to un-publish an item from its previous
# published location if the published location has been changed.
# The server property, sys_unpublishChangedLocation=true, overwrites the same
# parameter specified in the content list; otherwise the parameter specified
# in the content list will be considered.
sys_unpublishChangedLocation=true 
```

将此设置为 true 将导致项目在移动中取消发布。

如果没有此设置，取消发布将只查看项目的状态，而不是位置。

# javascript - setAttribute 设置列表的唯一选项 = 在输入元素中？

> ID：15511314
> 
> 赞同：6
> 
> 时间：2013-03-19T21:59:06.660
> 
> 标签：javascript, html, attributes, setattribute, html-datalist

我坚持设置列表元素的列表属性。

```
var sel = document.createElement("input");
sel.type = "text";
sel.id = "inputSelectNaam";
sel.list = "inputNamesList"; 
```

当然这不起作用，因为列表属性不是我想要的“list = {id for datalist}”。完成这项工作的唯一方法是使用 setAttribute。

如何在不使用 setter 而是直接更改属性的情况下解决此问题？

编辑：更好的片段。

sel.list = id，我也提到过，在我的代码中不起作用。

```
var sel = document.createElement("input");
sel.type = "text";
sel.id = "inputSelectNaam";
sel.list = "inputNamesList"; //Does not work.
//sel.setAttribute("list", "inputNamesList"); //Works
sel.name = "name"; //FIXME: We should reconsider the name name...
frm.appendChild(sel);

var datl = document.createElement("datalist");
datl.id = "inputNamesList";
//populating the dataList
frm.appendChild(datl); 
```

当我查看 Dragonfly 时，我看到 setAttribute("list", id) 没有设置列表属性。

# mongodb - 如何通过在嵌入的文档数组中查找匹配项来查找文档？

> ID：15511319
> 
> 赞同：0
> 
> 时间：2013-03-19T21:59:35.837
> 
> 标签：mongodb, mongoid

这看起来很简单，但显然我错过了一些东西。我有一个网站模型：

```
class WebSite
  include Mongoid::Document
  has_many :domains, inverse_of: :web_site
  field :name, type: String
end 
```

网站模型有一个嵌入的域数组：

```
class Domain
  include Mongoid::Document
  belongs_to :web_site, inverse_of: :domains
  field :name, type: String
end 
```

我要做的就是找到一个域为“test.com”的网站。无论是使用 Mongoid 还是使用 MongoDB 控制台，我尝试过的任何方法似乎都不起作用。例如，如果我有一个网站，一个域，名称为“test.com”：

```
2.0.0p0 :001 > WebSite.count
 => 1 
2.0.0p0 :002 > WebSite.first.domains
 => [#<Domain _id: 5148d9b76a3b8b1fe6000003, web_site_id: "5148d9a96a3b8b1fe6000002", name: "test.com">] 
```

......那么这不应该工作吗？

```
2.0.0p0 :003 > WebSite.elem_match(domains: { name: "test.com" }).count
 => 0 
2.0.0p0 :004 > WebSite.elem_match('domains' => { 'name' => "test.com" }).count
 => 0 
```

我得零。我应该得到一个。

我还从 O'Reilly 的书中得到了这样的印象：这应该可行：

```
2.0.0p0 :005 > WebSite.where('domains.name' => "test.com").count
 => 0 
```

...与 any_in 相同：

```
.0.0p0 :006 > WebSite.any_in('domains' => { 'name' => "test.com" }).count
=> 0 
```

我还尝试了来自 MongoDB 控制台的相同查询，结果相同：

```
> db.web_sites.find({"domains" : {"$elemMatch" : {"name" : "test.com"}}}).size();
0
> db.web_sites.find({"domains.name" : "test.com"}).size();                       
0
> db.web_sites.find({"domains" : {$in : {"name" : "test.com"}}}).size();
0 
```

我肯定错过了什么？

更新：

以下是来自 MongoDB 控制台的有关架构的更多信息：

```
> db.web_sites.find().pretty()
{ "_id" : ObjectId("5148d9a96a3b8b1fe6000002"), "name" : "test" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:31:59.603

感谢 uldall 对调试的帮助（那个很棒的 pretty() 技术）我意识到我的问题是我有两个并排的单独集合，而不是嵌入在我的网站集合中的域集合。这就是我的模型应该设置的方式，使用“embedded_in”和“embeds_many”：

```
class WebSite
  include Mongoid::Document
  embeds_many :domains, inverse_of: :web_site
  field :name, type: String
end

class Domain
  include Mongoid::Document
  embedded_in :web_site, inverse_of: :domains
  field :name, type: String
end 
```

现在文档在 MongoDB 控制台中看起来像这样：

```
> db.web_sites.find().pretty()     
{
  "_id" : ObjectId("5148e63f6a3b8b8ffa000001"),
  "domains" : [
    {
      "_id" : ObjectId("5148e6706a3b8b8ffa000002"),
      "name" : "test.com"
    }
  ],
  "name" : "test"
} 
```

使用该架构，这有效：

```
2.0.0p0 :008 > WebSite.where('domains.name' => 'test.com').count
=> 1 
```

[欢呼]

# java - JAXB 解组 cdata

> ID：15511323
> 
> 赞同：4
> 
> 时间：2013-03-19T21:59:44.133
> 
> 标签：java, jaxb, unmarshalling, cdata

我不需要编组器，我已经有了 XML 文件。因此，我按照[本指南](http://theopentutorials.com/tutorials/java/jaxb/jaxb-marshalling-and-unmarshalling-cdata-block/#comment-7155)查看如何解组 CDATA 中的内容。但是，我发现，如果我跳过主要的编组部分而只做解组部分，它似乎不起作用。所以我的主要内容如下

```
Book book2 = JAXBXMLHandler.unmarshal(new File("book.xml"));
System.out.println(book2);  //<-- return null. 
```

我希望看到 CDATA 中的任何内容。我确定我错过了一些东西，但不确定是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:23:11.627

要使用 CDATA 解组 XML 元素，需要特别注意。以下是您引用的文章中演示的简化版本。

**输入.xml**

下面的`description`元素有一个带有 CDATA 的元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<book>
    <description><![CDATA[<p>With hundreds of practice questions
        and hands-on exercises, <b>SCJP Sun Certified Programmer
        for Java 6 Study Guide</b> covers what you need to know--
        and shows you how to prepare --for this challenging exam. </p>]]>
    </description>
</book> 
```

**书**

下面是将 XML 内容解组到的 Java 类，

```
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Book {

    private String description;

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

} 
```

**演示**

下面的演示代码将 XML 转换为`Book`.

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Book.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15518850/input.xml");
        Book book = (Book) unmarshaller.unmarshal(xml);

        System.out.println(book.getDescription());
    }

} 
```

**输出**

下面是`description`房产的价值。

```
<p>With hundreds of practice questions
        and hands-on exercises, <b>SCJP Sun Certified Programmer
        for Java 6 Study Guide</b> covers what you need to know--
        and shows you how to prepare --for this challenging exam. </p> 
```

# php - 创建一个将身高乘以体重的表格

> ID：15511326
> 
> 赞同：2
> 
> 时间：2013-03-19T22:00:01.403
> 
> 标签：php

我将如何创建一个高度乘以重量的表格？

我不知道如何弄清楚！

我正在尝试创建一个 BMI 计算器。

```
// collect values from a form sent with method=get

$min_weight = mysql_real_escape_string($_GET["min_weight"]);
$max_weight = mysql_real_escape_string($_GET["max_weight"]);
$min_height = mysql_real_escape_string($_GET["min_height"]);
$max_height = mysql_real_escape_string($_GET["max_height"]);
?>

<table>
    <tr>
      <td>Key:</td>
      <td class="good show">Healthy (20-25)</td>
      <td cla ss="warning show">Overweight (25-30)</td>
      <td class="bad show">Unhealthy ( -20 or 30+)</td>
    </tr>
  </table>

<table border="1">
<?php 
echo "<tr><td>Height &rarr;<br>Weight &darr;</td>";
for ( $i = $min_height; $i <= $max_height; $i+=5 ) 
{
    echo "<td>{$i}</td>";
}
echo "</tr>";
for ( $j = $min_weight; $j <= $max_weight; $j+=5 ) 
{
    echo "<tr>";
    echo "<td>{$j}</td>";
    echo "</tr>";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:24:18.077

这应该可以完成这项工作，我还放了一些 isset()：

```
<?php

// collect values from a form sent with method=get

$min_weight = isset($_GET["min_weight"]) ? mysql_real_escape_string($_GET["min_weight"]):0;
$max_weight = isset($_GET["max_weight"]) ? mysql_real_escape_string($_GET["max_weight"]):0;
$min_height = isset($_GET["min_height"]) ? mysql_real_escape_string($_GET["min_height"]):0;
$max_height = isset($_GET["max_height"]) ? mysql_real_escape_string($_GET["max_height"]):0;

?>

<table>
    <tr>
      <td>Key:</td>
      <td class="good show">Healthy (20-25)</td>
      <td class="warning show">Overweight (25-30)</td>
      <td class="bad show">Unhealthy ( -20 or 30+)</td>
    </tr>
  </table>

<?php
$table = '<table border="1">';
$table .= '<tr><td>Height &rarr;<br>Weight &darr;</td>';
for ($i = $min_height;$i <= $max_height;$i += 5){
    $table .= "<td>$i</td>";
}
$table .= "</tr>";
for($j = $min_weight; $j <= $max_weight;$j += 5){
    $table .= "<tr><td>$j</td>";
    for ($i = $min_height;$i <= $max_height;$i += 5){
        $table .= '<td>'. $i * $j .'</td>';
    }
    $table .= '</tr>';
}
$table .= '</table>';
echo $table;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:57:24.127

即使这样可行，将表格边框放在 php 标签之外是错误的吗？

```
<table>
    <tr>
      <td>Key:</td>
      <td class="good show">Healthy (20-25)</td>
      <td class="warning show">Overweight (25-30)</td>
      <td class="bad show">Unhealthy ( -20 or 30+)</td>
    </tr>
  </table>

<table border="1">
<?php 
echo "<tr><td>Height &rarr;<br>Weight &darr;</td>";

for ( $j = $min_height; $j <= $max_height; $j+=5 ) 
{
echo "<td>{$j}</td>";
}

for ( $i = $min_weight; $i <= $max_weight; $i+=5 ) 
{
echo "<tr><td>{$i}</td>";
for ( $j = $min_height; $j <= $max_height; $j+=5 ) 
{
$var = number_format(($i)/(($j/100)*($j/100)),'2','.','');
{
echo "<td class='warning'>";

}

echo $var;
echo "</td>";
}
echo "</tr>";
}
?>
</table> 
```

# javascript - Javascript Instagram API 在浏览器中显示答案，但在 JS 中没有

> ID：15511329
> 
> 赞同：0
> 
> 时间：2013-03-19T22:00:14.097
> 
> 标签：javascript, jquery, instagram

我只是在写一个小小的 Instagram 应用程序。事实上，当我尝试从 JS 中的这个 url 获得响应时：

```
https://api.instagram.com/v1/tags/search?q=money&client_id=f40dfb17ddd144598d562a6f58179006 
```

但由于某种原因，我没有得到答案，也没有任何错误。如果我在浏览器中调用 url，我会得到 JSON 格式的答案。

这是我的小提琴

[http://jsfiddle.net/XQ28k/](http://jsfiddle.net/XQ28k/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:09:19.430

由于您计划进行跨域请求，因此您应该通过添加`&callback=?`到 URL 的末尾来尝试 API 的 JSONP 变体

```
https://api.instagram.com/v1/tags/search?q=money&client_id=f40dfb17ddd144598d562a6f58179006&callback=? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:12:19.943

您不能访问与当前域（进行 ajax 调用的地方）不同的域。它会给你跨域错误 Ajax 调用只能在同一个域上工作！

解决方法是在您的服务器中调用一个页面，该页面将对 Instagram 服务器进行远程调用，并对该页面进行 ajax 调用：php 示例 - 在您的服务器 page.php 中：

```
$url = 'https://api.instagram.com/v1/tags/search?q=money&client_id=f40dfb17ddd144598d562a6f58179006';
$content = file_get_contents($url);

echo($content); //no need to json_encode cause the response returning a json already! 
```

并在您的客户端代码中调用 page.php （它在您的服务器中 - 所以它是同一个域）：

```
 $.getJSON("page.php",function(json){
   alert(json.data);
  }); 
```

# angularjs - 在 AngularJS 的指令中返回之前要做什么？

> ID：15511330
> 
> 赞同：0
> 
> 时间：2013-03-19T22:00:14.963
> 
> 标签：angularjs, angularjs-directive

我在问自己，在 AngularJS 中定义指令时，你可以在语句***之前添加什么内容？***`return`

```
angular.module('app').directive('myDir', function() {
    // What can you do here?
    return {
        restrict: 'E',
        link: function(scope, element) {
            // do things
        }
    };
}); 
```

所以一些普遍的问题是：

**1\. 你可以在那里做什么？
2\. 什么只能在那里发生？
3\. 里面不应该做什么？**

* * *

我发现有用的一件事是您可以在其中存储变量或函数，然后您可以在指令的定义中使用它们，但我想听听其他一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:44:01.843

好吧，因为还没有其他人回答……正如我在评论中提到的，[理解指令](https://github.com/angular/angular.js/wiki/Understanding-Directives)wiki 页面有一些有用的信息。

第一次遇到指令时，Angular 会运行一次指令函数。所以你放在这里的任何东西都只会被执行一次（或者如果指令没有在你的应用程序中的任何地方使用，可能会执行零次。）所以，如果可以在*所有*指令实例之间共享某些东西，你可以把它放在这里：functions,directive-全局变量、一次性初始化等

请注意，您在此处放置的任何功能都将相当有限。他们将无法访问范围或元素或属性——除非您将它们作为参数传递。出于这个原因，编译或链接函数使用的函数通常放在编译或链接函数中，因为由于 JavaScript 闭包，它们将可以访问范围、元素和属性。[指令](http://docs.angularjs.org/guide/directive)页面上的两个示例指令执行此操作。

# c# - 从 Android 读取 .txt 时新行消失

> ID：15511335
> 
> 赞同：0
> 
> 时间：2013-03-19T22:00:33.160
> 
> 标签：c#, string, textbox, multiline

这样做

```
String t = "asd\nasd";

TextBox objTxt = (TextBox)messageBox;
bjTxt.Text = t; 
```

不显示

```
asd    
asd 
```

正如预期的那样，它显示

```
asdasd 
```

为什么，它让我发疯。TextBox 设置为多行，我可以手动在其中写行。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:10:35.730

`TextBox`不像`Label`和`MessageBox`忽略`"\n"`，所以如果你想进入换行符，你需要使用`"\r\n"`组合。尽管如此，有一个更好的解决方案，只需使用`Environment.NewLine`，您就不需要考虑 \r\n 组合换行符。

任何一个：

```
String t = "asd\r\nasd"; 
```

或者：

```
String t = "asd" + Environment.NewLine + "asd"; 
```

美妙之`Environment.NewLine`处在于，在您正在开发的任何环境中都无需担心换行符（或者至少应该是这样）。

**编辑：**

看到你的评论，我补充几句。您仍然可以使用`ReadToEnd()`，如果文本仅包含换行符“\n”，您可以执行以下操作：

```
t = t.Replace("\n", "\r\n"); 
```

或者：

```
t = t.Replace("\n", Environment.NewLine); 
```

因为`Environment.NewLine`本质上是一个`string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:16:28.923

尝试使用`Lines`属性`TextBox`分配文件中的所有行：

```
textBox.Lines = File.ReadAllLines(fileName); 
```

而且，正如我在上面的评论中所说，对于您的示例，您应该使用`Environment.NewLine`新行出现在`TextBox`：

```
textBox.Text = "asd" + Environment.NewLine + "asd"; 
```

# php - 使用 PHP 通过 CURL 发布对象

> ID：15511336
> 
> 赞同：0
> 
> 时间：2013-03-19T22:00:33.477
> 
> 标签：php, api, rest, curl

我们正在尝试发布到需要在其中一个键中包含“POST 对象”的 REST API 端点。在 javascript/jquery 中，这很好用。但是，在 PHP 中使用 CURL，端点不会在此处接收对象（称为“组件”）：

```
 $ch = curl_init();

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
    curl_setopt($ch, CURLOPT_URL, 'http://api.sitesitesite.com');

    $comps = array('slug' => "xyz",
                   'visble' => 1,
                   'color' => "xyz",
                   'shape' => "xyz",
                   'version' => "2",
            );

    $post_args = array();
    $post_args['components'] = $comps;
    $post_args['id'] = $id;

    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_args);

    $result = curl_exec($ch);

    $http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:08:40.020

摆脱“CURLOPT_CUSTOMREQUEST”并使用“CURLOPT_POST”

```
curl_setopt($ch, CURLOPT_POST, true); 
```

# macos - 本地化后：无法在捆绑路径中找到名为 ... 的 nib：（null）

> ID：15511337
> 
> 赞同：2
> 
> 时间：2013-03-19T22:00:34.337
> 
> 标签：macos, xcode4, localization, xib

我开始涉足 Mac OS X 开发，但我遇到了一个问题，我在过去三个小时内一直无法找到解决方案（我已经用谷歌搜索了很长时间）。

**测试应用程序：**
我有一个应用程序`MainMenu.xib`，它显示一个窗口 - 到目前为止一切都很好。我创建了另一个 XIB 和`NSViewController`子类，其中包含我想在主窗口中显示的视图。我使用以下代码加载视图并将其插入主窗口：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    self.compartmentViewController = [[SelectCompartmentViewController alloc] initWithNibName:@"SelectCompartmentViewController" bundle:nil];
    [self.compartmentViewController.view setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
    [self.compartmentViewController.view setFrame:[self.contentArea bounds]];              
} 
```

`compartmentViewController`是一个属性，`self.contentArea`是主窗口上的一个自定义视图 - 就像一个占位符。

到目前为止，这工作正常。

**问题**
然后我决定检查本地化功能。我已经本地化了几个字符串和两个 XIB。起初，我对没有看到任何本地化值感到有些困惑。直到我发现我必须清理项目 - 从那时起我在运行时遇到以下错误：

> 2013-03-19 22:48:59.763 词汇框[10160:303] 无法找到名为：SelectCompartmentViewController 在捆绑路径中的笔尖：（空）
> 2013-03-19 22:48:59.764 词汇框[10160:303] -[ NSViewController loadView] 无法加载“SelectCompartmentViewController”笔尖。

**建议的解决方案我试过无济于事**

1.  清理项目没有帮助
2.  检查构建配置 - 是的，捆绑资源似乎没问题
3.  是的，如果我删除我的子视图的本地化并重新添加原始 XIB，一切都很好（当然视图没有本地化）

*帮助*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T20:11:28.393

对于为什么会发生这种情况，我没有答案。但是我遇到了同样的问题，我通过关闭 xCode 并再次打开它来解决它，相信我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:41:16.677

尝试以下操作：

*   选择你的项目
*   选择“构建阶段”
*   在“复制捆绑资源”中添加新的 xib

![在此处输入图像描述](../Images/9a4c36acb5b9f2ab2fff5b3d466ddb25.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:47:42.100

我刚刚遇到了同样的问题，并且能够通过执行以下操作来解决它：

1）在项目导航器中选择XIB

2）在文件检查器中，取消选中本地化下的任何项目（它会提示您 - 确保未选中“从磁盘删除文件”，然后按删除）

3）手动将XIB添加回项目中

# getelementsbyclassname - getElementsByClassName 和 setAttribute 不起作用

> ID：15511343
> 
> 赞同：1
> 
> 时间：2013-03-19T22:01:01.490
> 
> 标签：getelementsbyclassname

我正在尝试使用 getElementsByClassName 使用 java 脚本更改按钮的样式。它似乎不起作用。Firebug 给了我一个“没有足够的参数 - list[index].setAttribute("button");” 错误。

这是我的代码的样子：

```
function clear(y){
var list, index;
list = document.getElementsByClassName('button1);
for (index = 0; index < list.length; ++index) {
list[index].setAttribute("button");
}
} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:03:03.877

该错误是不言自明的。您在方法中缺少一个参数`setAttribute()`。为您想要的新`button`属性添加另一个参数。

```
list[index].setAttribute('button', 'myValue'); 
```

如果您打算删除该`button`属性，请使用`removeAttribute()`.

```
list[index].removeAttribute('button'); 
```

# oracle - 一个选择，两个结果集：基于同一查询返回摘要和详细信息

> ID：15511348
> 
> 赞同：0
> 
> 时间：2013-03-19T22:01:09.410
> 
> 标签：oracle, plsql

我正在尝试在我想要的地方执行大型查询：

1.  查询明细行，然后

2.  根据返回的结果执行聚合

本质上，我想执行我的数据密集型查询一次，并从一个查询中获取摘要值和详细信息值，因为查询非常密集。我确信有更好的方法可以使用前端应用程序（例如 SQL 中的详细行，前端聚合？），但我想知道如何在 PL/SQL 中使用基本上一个选择来完成这一切针对数据库（出于性能原因，我不想调用本质上相同的大 Select 两次）（此时，我想要在一个查询中执行此操作的原因可能被称为固执......即即使有一个更好的方法，我想知道它是否可以完成）。

我知道如何获得基本的“细节级别”结果集。该查询将返回如下数据：

UPC-Region-ProjectType-TotalAssignments-IncompleteAssignments

所以说我有10条记录：

10-AX-20-10

11-BX-10-5

12-CY-30-15

13-CZ-20-10

14-AY-10-5

15-BX-30-15

16-CZ-20-10

17-10-5

18-CZ-30-15

19-AX-20-10

20-BX-10-5

我希望能够执行查询，然后对该结果集执行聚合，例如：

A区项目：3

A区总分配：50

A区未完成分配：25

B区...

C区...

项目类型 X 项目：5

项目类型 X 总分配：90

项目类型 X 未完成分配：45

项目类型 Y...

项目类型 Z...

然后将两个结果集（摘要 + 详细信息）返回给调用应用程序。

我想这个想法是将详细信息查询运行到临时表中，然后在那里选择/执行聚合以构建第二个“摘要级别”查询。然后将两个结果集作为两个引用返回。

但我对想法持开放态度......

我最初的尝试是：

```
type rec_projects is record
   (record matching my DetailsSQL)

/* record variable */
project_resultset rec_projects;

/* cursor variable */
OPEN cursorvar1 FOR
  select 
    upc,
    region,
    project_type,
    tot_assigns,
    incompl_assigns
    ... 
```

然后我：

```
loop
  fetch cursorvar1 into project_resultset;  
  exit when cursorvar1%NOTFOUND;

  /* perform row-by-row aggregations into variables */
  If project_resultset.region = 'A'
  then
    numAProj        := numAProj + 1;
    numATotalAssign := numATotalAssign + project_resultset.Totassigns;
    numAIncomplAssign := numAIncomplAssign + project_resultset.Incomplassigns;
  and so on...

 end loop; 
```

然后打开另一个 refcursor var - 从 DUAL 中选择变量：

```
open cursorvar2 for
  select
     numAProj, numATotalAssign, numAIncomplAssign, etc, etc from dual; 
```

最后：

```
cur_out1 := cursorvar1;
cur_out2 := cursorvar2; 
```

不工作... cursorvar1 似乎加载正常，我进入循环。但是我没有在 cursorvar2 中得到任何结果，只是觉得我可能完全走错了路（有更好的方法来做到这一点）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:58:04.017

我更喜欢在服务器端进行所有计算。
两种类型的信息（详细信息+主信息）都可以通过单个游标获取：

```
with
   DET as (
      -- your details subquery here
      select
         UPC,
         Region,
         Project_Type,
         Total_Assignments,
         Incomplete_Assignments
      from ...
   )
select
   UPC,
   Region,
   Project_Type,
   Total_Assignments,
   Incomplete_Assignments,
   null as projects_ctr
from DET

union all

select
   null as UPC,
   Region,
   null as Project_Type,
   sum(Total_Assignments) as Total_Assignments,
   sum(Incomplete_Assignments) as Incomplete_Assignments,
   count(0) as projects_ctr
from DET
group by Region

union all

select
   null as UPC,
   null as Region,
   Project_Type,
   sum(Total_Assignments) as Total_Assignments,
   sum(Incomplete_Assignments) as Incomplete_Assignments,
   count(0) as projects_ctr
from DET
group by Project_Type

order by UPC nulls first, Region, Project_Type 
```

结果：

```
UPC     Region  Project_Type  Total_Assignments  Incomplete_Assignments  Projects_Ctr
------  ------  ------------  -----------------  ----------------------  ------------
(null)  A       (null)        50                 25                      3
(null)  B       (null)        60                 30                      4
(null)  C       (null)        100                50                      4
(null)  (null)  X             90                 45                      5
(null)  (null)  Y             50                 25                      3
(null)  (null)  Z             70                 35                      3
10      A       X             20                 10                      (null)
11      B       X             10                 5                       (null)
12      C       Y             30                 15                      (null)
13      C       Z             20                 10                      (null)
14      A       Y             10                 5                       (null)
15      B       X             30                 15                      (null)
16      C       Z             20                 10                      (null)
17      B       Y             10                 5                       (null)
18      C       Z             30                 15                      (null)
19      A       X             20                 10                      (null)
20      B       X             10                 5                       (null) 
```

[小提琴](http://www.sqlfiddle.com/#!4/81f21/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:22:09.303

如果您要定期创建这些报告，最好创建一个全局临时表来存储初始查询的结果：

```
CREATE GLOBAL TEMPORARY TABLE MY_TEMP_TABLE
    ON COMMIT DELETE ROWS 
    AS 
        SELECT 
            UPC,
            Region,
            ProjectType,
            TotalAssignments,
            IncompleteAssignments 
        FROM WHEREVER
; 
```

然后，您可以运行一系列后续查询来计算报表的各种统计值，并以大文本表以外的格式输出它们。

# python - 从列表中随机选择 50 项写入文件

> ID：15511349
> 
> 赞同：166
> 
> 时间：2013-03-19T22:01:11.433
> 
> 标签：python, file, list, select, random

到目前为止，我已经弄清楚了如何导入文件、创建新文件和随机化列表。

我无法从列表中随机选择 50 个项目来写入文件？

```
def randomizer(input,output1='random_1.txt',output2='random_2.txt',output3='random_3.txt',output4='random_total.txt'):

#Input file 
    query=open(input,'r').read().split()
    dir,file=os.path.split(input)

    temp1 = os.path.join(dir,output1)
    temp2 = os.path.join(dir,output2)
    temp3 = os.path.join(dir,output3)
    temp4 = os.path.join(dir,output4)

    out_file4=open(temp4,'w')

    random.shuffle(query)

    for item in query:
        out_file4.write(item+'\n') 
```

所以如果总随机化文件是

```
example:

random_total = ['9','2','3','1','5','6','8','7','0','4'] 
```

我想要 3 个文件（out_file1|2|3），第一个随机集 3，第二个随机集 3，第三个随机集 3（对于这个例子，但我想创建的应该有 50）

```
random_1 = ['9','2','3']
random_2 = ['1','5','6']
random_3 = ['8','7','0'] 
```

所以最后的“4”将不包括在内，这很好。

如何从我随机化的列表中选择 50 个？

**更好的是，我如何从原始列表中随机选择 50 个？**

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2013-03-19T22:03:19.690

如果列表是随机顺序的，您可以只取前 50 个。

否则，使用

```
import random
random.sample(the_list, 50) 
```

`random.sample`帮助文本：

```
sample(self, population, k) method of random.Random instance
    Chooses k unique random elements from a population sequence.

    Returns a new list containing elements from the population while
    leaving the original population unchanged.  The resulting list is
    in selection order so that all sub-slices will also be valid random
    samples.  This allows raffle winners (the sample) to be partitioned
    into grand prize and second place winners (the subslices).

    Members of the population need not be hashable or unique.  If the
    population contains repeats, then each occurrence is a possible
    selection in the sample.

    To choose a sample in a range of integers, use xrange as an argument.
    This is especially fast and space efficient for sampling from a
    large population:   sample(xrange(10000000), 60) 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-10-25T06:01:07.517

选择随机项目的一种简单方法是洗牌然后切片。

```
import random
a = [1,2,3,4,5,6,7,8,9]
random.shuffle(a)
print a[:4] # prints 4 random variables 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-09-20T04:37:10.317

我认为`random.choice()`是一个更好的选择。

```
import numpy as np

mylist = [13,23,14,52,6,23]

np.random.choice(mylist, 3, replace=False) 
```

该函数从列表中返回一个由 3 个随机选择的值组成的数组

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-15T13:01:26.840

1.  我们有 3 个样本（“橙色”、“芒果”、“苹果”）。创建的系列，应包含 7 个元素并从列表中随机选择。

    ##### 随机选择

    ```
    import random

    import numpy as np

    fruits = ['orange','mango','apple']

    np.random.choice(fruits, 7, replace=True) 
    ```

    **输出**

    ```
    array(['orange', 'mango', 'apple', 'orange', 'orange', 'mango', 'apple'],
          dtype='<U6') 
    ```

2.  从列表中随机选择（少于 3 个值）

    ##### 随机抽样

    ```
    import random

    random.sample(fruits, 3) 
    ```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-08-13T12:17:44.607

假设您的列表有 100 个元素，并且您想以随机方式选择其中的 50 个。以下是要遵循的步骤：

1.  导入库
2.  为随机数生成器创建种子，我把它放在 2
3.  准备一个数字列表，以随机方式从中提取
4.  从数字列表中随机选择

**代码：**

```
from random import seed
from random import choice

seed(2)
numbers = [i for i in range(100)]

print(numbers)

for _ in range(50):
    selection = choice(numbers)
    print(selection) 
```

# android - android有效加载位图

> ID：15511351
> 
> 赞同：0
> 
> 时间：2013-03-19T22:01:15.397
> 
> 标签：android, bitmap, dimensions

我想有效地加载位图，因为我经常在 4.0+ android 上得到`OutOfMemoryError`. 所以我尝试使用来自 android 开发者页面资源“有效加载位图”的示例代码。

但是我的问题是获取 ImageView 的高度和宽度，因为没有任何常量值来定义尺寸。

开发人员页面中包含必填字段的代码。

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) 
```

这是我的布局：

```
<RelativeLayout android:layout_width="match_parent"
                android:layout_weight="3"
                android:layout_height="0px">

   <ImageView
    android:id="@+id/img1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitStart"
    android:src="@drawable/image" /> 
```

我尝试使用`image.getHeight()`，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:20:29.573

这是因为 'image' 不是 ImageView 对象。以下是如何在您的情况下以编程方式声明 ImageView ：

`ImageView 图像 = (ImageView) findViewById(R.id.img1);

此外，这可能会对您有所帮助：[如何检索视图的尺寸？](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r/4406090#4406090)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:22:32.417

您可以使用 ViewTreeObserver 并等待其中一个回调，然后获取 ImageView 的大小。

在此处查看更多信息： [我何时可以首先测量视图？](https://stackoverflow.com/questions/4393612/when-can-i-first-measure-a-view)

# html - angularjs：强制某些链接路径重新加载的最佳方法

> ID：15511353
> 
> 赞同：1
> 
> 时间：2013-03-19T22:01:24.760
> 
> 标签：html, angularjs, routes

我希望能够捕获我网站中以“/@”开头的任何链接，并通过完整的浏览器重新加载来处理。

就像是：

```
$locationProvider.html5Mode(true)
$routeProvider.when("/@:id",
  # window.location.href = [the link's url]
  # all others are handled by typical controller/view 
```

我已经能够使用锚标记上的属性/指令来解决问题，但我想在 url 路由级别执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:42:48.373

我不确定这是否是最佳解决方案，但您可以根据当前时间而不是“/@”代码设置参数

例如

```
<a href="/Customer/Edit/{{customer.id}}&refresh={{now}}">{{customer.Name}}</a> 
```

在每个 $routeChangeSuccess 之后在 $rootScope 上设置“现在”

```
$rootScope.$on('$routeChangeSuccess', function (event, current, previous) {
$rootScope.now = Date.now();
}); 
```

这可能会得到改进，但它正在工作。

您可能还需要查看[angularjs - 单击带有实际 url 的链接时刷新](https://stackoverflow.com/questions/11267284/angularjs-refresh-when-clicked-on-link-with-actual-url/15795328#)

# r - 协方差矩阵

> ID：15511354
> 
> 赞同：2
> 
> 时间：2013-03-19T22:01:25.420
> 
> 标签：r, geor

我想知道是否有人可以向我解释 geoR 包如何计算协方差函数？我的意思是你会怎么用手做？

```
library(geoR)
#suppose I have the following coordinates
X = c(60,30,20,40)
Y = c(50,20,50,50)
my_coordinates = cbind(X,Y)
print(my_coordinates)

#computing covariance
my_cov= varcov.spatial(my_coordinates,cov.model="exp", cov.pars=c(0.2,25))
print(my_cov) 
```

你得到：

```
 [,1]       [,2]       [,3]       [,4]
[1,] 0.20000000 0.03664442 0.04037930 0.08986579
[2,] 0.03664442 0.20000000 0.05645288 0.05645288
[3,] 0.04037930 0.05645288 0.20000000 0.08986579
[4,] 0.08986579 0.05645288 0.08986579 0.20000000 
```

然而，人们可能也想在 Matlab 中做这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:27:51.717

了解包或函数如何做某事的最好方法是查看源代码。这是开源项目最棒的事情之一，你可以做到这一点。

尝试`varcov.spatial`在解压后的包 tar 球中键入或搜索函数定义

要计算协方差（取决于点之间的距离），您需要计算

*   你的点之间的距离（你真的只需要下三角形，因为它是对称的
*   每个距离的协方差函数的值
*   从这些计算的协方差中形成完整的对称方差协方差矩阵。

协方差函数在 中定义`?cov.spatial`。你可以打电话`cov.spatial`来计算这些`R`（究竟是什么`geoR::varcov.spatial`）

# android - 为 ListView 活动状态设置 ImageView

> ID：15511355
> 
> 赞同：0
> 
> 时间：2013-03-19T22:01:26.833
> 
> 标签：android, android-listview, activestate

大多数在菜单中**保持活动状态**的应用程序除了颜色变化外，`listView`还提供了一个小的视觉效果。`imageView`

你会怎么做？

它会以`state_activated=true`某种方式成为选择器的一部分，还是应该在 Java 中以编程方式完成，也许在`ListAdapter`?.

在下图中，您在 Youtube 应用程序上看到，acte 状态既有背景图像变化，也有视觉指示器。（红线）

![在此处输入图像描述](../Images/79e0b835e4ef12eb6779d28cd1ecb2ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:36:04.087

您可以通过制作 9 个补丁图像并在行激活时将其用作背景来做到这一点。

# php - 将属性从子对象传递给父 PHP

> ID：15511358
> 
> 赞同：1
> 
> 时间：2013-03-19T22:01:44.163
> 
> 标签：php, oop, class, inheritance

我过去曾使用过 cakePHP，并且喜欢他们构建模型系统的方式。我想结合他们在扩展模型之间处理验证的想法。

这是一个例子：

```
 class users extends model {
     var $validation = array(
         "username" => array(
             "rule" => "not_empty"
         ),
         "password" => array(
             "rule" => "valid_password"
         )
     );

     public function create_user() {
         if($this->insert() == true) {
             return true;
         }
     }
 }

 class model {

     public function insert() {
         if(isset($this->validation)) {
             // Do some validation checks before we insert the value in the database
         }
         // Continue with the insert in the database
     }
 } 
```

this 的问题是模型无法获取验证规则，因为它是父类。有没有一种方法可以将 $validation 属性传递给父类，而无需通过 create_user() 方法作为参数显式传递验证规则？

**编辑：**

此外，避免通过 __construct() 方法将其传递给父类。是否有另一种方法不会在我的用户类中导致大量额外代码，但让模型类完成大部分工作（如果不是全部？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:05:25.383

如果实例是 a `$user`，您可以简单地参考`$this->validation`in `model::insert()`。

在这种情况下，它似乎也`model`应该是[抽象](http://php.net/manual/en/language.oop5.abstract.php)的，以防止实例化和混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:11:59.507

`model`在名为的类中创建一个新的抽象方法：`isValid()`每个派生类都必须实现该方法，然后在函数期间调用该方法`insert()`。

`model`班级：

```
class model {

 abstract protected function isValid();

 public function insert() {
     if($this->isValid())) { // calls concrete validation function

     }
     // Continue with the insert in the database
 } 
```

}

`user`班级：

```
class users extends model {
 var $validation = array(
     "username" => array(
         "rule" => "not_empty"
     ),
     "password" => array(
         "rule" => "valid_password"
     )
 );

 protected function isValid() {
    // perform validation here
    foreach ($this->validation) { //return false once failed }

    return true;
 }

 public function create_user() {
     if($this->insert() == true) {
         return true;
     }
 }
} 
```

# ruby-on-rails - 如何创建具有全局和特定分配的关系？

> ID：15511360
> 
> 赞同：0
> 
> 时间：2013-03-19T22:01:53.603
> 
> 标签：ruby-on-rails, activerecord

我的应用程序中有一个模型（我们可以称之为代理），它与模型任务（表示可以分配给一个或多个代理的任务的模型）具有多对多关系，一个任务可以被代理接受：

```
class Agent < ActiveRecord::Base
    has_many :assignments
    has_many :missions, :through => :assignments
end

class Assignment < ActiveRecord::Base
    belongs_to :agent
    belongs_to :mission

    attr_accessible :accepted
end

class Mission < ActiveRecord::Base
    has_many :assignments
    has_many :agents, :through => :assignments
end 
```

现在，我希望能够创建一次分配给所有代理的任务，并满足以下要求：

1.  “全球”任务分配给所有特工，但可以单独接受
2.  “全局”任务也适用于在创建全局任务后创建的代理。
3.  我不想在每次创建新代理时创建新的分配模型（以便为他分配所有全局任务），并且我不想在每次创建新的全局任务时为所有现有代理创建分配。
4.  分配给特定（或多个）代理的现有任务可以轻松转换为全球任务。
5.  给定一个代理，我想在一次调用中获得他的所有分配（全局和特定），如果可能的话，作为一个关系而不是一个数组

在不为全局和非全局任务创建单独的表的情况下实现此功能的良好设计（数据库和模型）是什么？

谢谢！

爱丽儿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:08:04.223

我只想在任务中添加一个 is_global 标志。

然后，当您获取要接受的任务列表时，您只需查找分配给特定代理但尚未接受的所有任务，以及未分配给特定代理的所有全局任务。

当代理接受全局任务时，创建分配记录并将接受设置为true。

如果特工可以将他/她自己从任务中移除，那么只需销毁任务记录。

**获取所有任务**

您将需要加强获取所有可用任务以查看两个不同的案例。第一种情况是已分配的任务，第二种情况是全局但未分配的任务。

```
Mission.includes(:assignments)
        .where("missions.is_global = true or assignments.agent_id = ?", agent_id) 
```

我没有现成的 ruby​​ 环境可供测试，但如果不正确，它就很接近了:)

**奖金**

您可以查询所有分配，而无需关心分配是全局的还是常规的。

```
assignments = agent.ssignments.where(accepted:true) 
```

**更新**

如果我的查询对您不起作用，或者您想走另一条路线，那么在线总是有其他解决方案，而[meta where](https://github.com/ernie/meta_where)或[squeel](https://github.com/ernie/squeel) gems 可以帮助您。

# arrays - 基于组数组在VBscript中构建字符串

> ID：15511361
> 
> 赞同：0
> 
> 时间：2013-03-19T22:01:59.693
> 
> 标签：arrays, loops, vbscript

我在 VBscript 中有一个 ADO 查询（ADODB.Recordset），它将返回如下结果：

```
nId wstrName              nParentId
0   Managed computers     2
1   Unassigned computers  NULL
2   Master Server         NULL
3   pseudohosts           NULL
5   Server 2              0
8   Group100              5
10  Group22               5
11  Group47               5
13  Group33               5
14  Group39               5
15  Group11               5 
```

当我知道顶级组 ID 时，我需要根据结果构建一个完整的位置字符串。

例如，如果顶级组 ID 为 11，则在通过查看“nId”和“nParentId”值遍历组后，完整的位置字符串将是“主服务器/托管计算机/服务器 2/Group47”。

父组的数量可能会有所不同，因此我需要循环直到到达没有父组的组。我还想避免进行多个 SQL 查询，所以我假设结果应该被加载到一个数组中，然后从那里处理信息。

处理这个问题的最佳方法是什么？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:24:14.600

您可以按原样使用记录集。尝试这个：

```
groupname = "..."

rs.MoveFirst
rs.Find("wstrName = '" & groupname & "'")
location = rs("wstrName")
parent   = rs("nParentId")
Do Until parent = "NULL"
  rs.MoveFirst
  rs.Find("nId = " & parent)
  location = rs("wstrName") & "/" & location
  parent   = rs("nParentId")
Loop 
```

您可能需要根据`NULL`记录集中的值是字符串`"NULL"`还是实际`Null`值来调整循环的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:52:50.827

使用字典来存储您的表格数据，并使用递归函数来构建位置字符串。

演示脚本：

```
 Dim dicData : Set dicData = CreateObject("Scripting.Dictionary")
'         nId         wstrName                nParentId
  dicData( 0) = Array("Managed computers"   , 2   )
  dicData( 1) = Array("Unassigned computers", NULL)
  dicData( 2) = Array("Master Server"       , NULL)
  dicData( 3) = Array("pseudohosts"         , NULL)
  dicData( 5) = Array("Server 2"            , 0   )
  dicData( 8) = Array("Group100"            , 5   )
  dicData(10) = Array("Group22"             , 5   )
  dicData(11) = Array("Group47"             , 5   )
  dicData(13) = Array("Group33"             , 5   )
  dicData(14) = Array("Group39"             , 5   )
  dicData(15) = Array("Group11"             , 5   )
  Dim nId
  For Each nId In dicData.Keys()
      WScript.Echo Right(100 + nId, 2), buildLoc(dicData, nId, Array())
  Next

Function buildLoc(dicData, nId, aTmp)
  ReDim Preserve aTmp(UBound(aTmp) + 1)
  aTmp(UBound(aTmp)) = dicData(nId)(0)
  If IsNull(dicData(nId)(1)) Then
     reverseArr aTmp
     buildLoc = Join(aTmp, "/")
  Else
     buildLoc = buildLoc(dicData, dicData(nId)(1), aTmp)
  End If
End Function

Sub reverseArr(aX)
  Dim nUB  : nUB  = UBound(aX)
  Dim nUB2 : nUB2 = nUB \ 2
  Dim i, vt
  For i = 0 To nUB2
      vt          = aX(i)
      aX(i)       = aX(nUB - i)
      aX(nUB - i) = vt
  Next
End Sub 
```

输出：

```
00 Master Server/Managed computers
01 Unassigned computers
02 Master Server
03 pseudohosts
05 Master Server/Managed computers/Server 2
08 Master Server/Managed computers/Server 2/Group100
10 Master Server/Managed computers/Server 2/Group22
11 Master Server/Managed computers/Server 2/Group47
13 Master Server/Managed computers/Server 2/Group33
14 Master Server/Managed computers/Server 2/Group39
15 Master Server/Managed computers/Server 2/Group11 
```

# python - 在非 gui 应用程序中使用对话框最方便的方法是什么？

> ID：15511363
> 
> 赞同：1
> 
> 时间：2013-03-19T22:02:19.100
> 
> 标签：python, windows, user-interface

我正在编写一个 excel 插件，我不需要主窗口和所有闪亮的小部件/工具包，但我需要对话框。

这是我尝试创建一个（使用pywin32）：

```
import win32ui, win32con

def openFileDialog(extensions = None, multi = False):
    """open a Windows File 'Open' Dialog. returns a list of path of files selected by user.

    Keyword arguments:
    extensions (default None) - a list or tuple containing (description, ext) 
    pair of acceptable files.
      ext can be a string - i.e) '*.txt', or a list or tuple of many strings ['*.txt', '*.htm']
      description is a string describing corresponding ext. 

    multi - (default False) True to allow user to select more than one files. 
    """

    openFlags = win32con.OFN_OVERWRITEPROMPT|win32con.OFN_FILEMUSTEXIST
    if multi:
        openFlags|=win32con.OFN_ALLOWMULTISELECT

    dlg = win32ui.CreateFileDialog(1,
                                   None,
                                   None,
                                   openFlags,
                                   extensionFilterString(extensions))

    if dlg.DoModal()!=win32con.IDOK:
        return None

    return dlg.GetPathNames() 
```

虽然它们有效，但我认为这真的不是 Python 的。我看了一下 pyside，他们有`QFileDialog`- 但它需要`QApplication`并且似乎`Qapplication`接管了主循环。我不认为我需要所有的麻烦，我真的不知道 python gui 编程。在 python 中打开文件对话框最方便的方法是什么？

# c# - Windows Phone App.xml 编译，但在尝试运行应用程序时在缺少类型时抛出错误

> ID：15511366
> 
> 赞同：1
> 
> 时间：2013-03-19T22:02:33.597
> 
> 标签：c#, windows-phone-7, mvvm-light

我有 2 个项目的解决方案。一个带有 Windows 手机和一个 PortableClassLibrary。

在 PortableClassLibrary 中，我实现了 ViewModelLocator 部分，它可以访问我的视图在电话项目中使用的视图模型。

在我的应用程序中：

```
 <Application xmlns:vm="clr-namespace:PortableClassLibrary.ViewModel;assembly=PortableClassLibrary" />    

<Application.Resources>
    <ResourceDictionary>
      <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
    <ResourceDictionary.MergedDictionaries></ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

一切正常，编译时没有任何错误。

当我启动电话模拟器时，它在尝试加载 App.xaml 和 Informa 时崩溃，提示“找不到 ViewModelLocator 类型”

在 App.xaml 中工作时它怎么能找到它，但当我尝试运行它时却找不到？

# php - Mysql 获取所有行并回显为 json

> ID：15511367
> 
> 赞同：3
> 
> 时间：2013-03-19T22:02:39.853
> 
> 标签：php, mysql, json

我有一个包含 5 列和多行的数据库。我想获取前 3 行并将它们作为数组回显。到目前为止，我只能获得第一行（我是 PHP 和 mysql 的新手）。到目前为止，这是我的 PHP：

```
//==== FETCH DATA
$result = mysql_query("SELECT * FROM $tableName");
$array = mysql_fetch_row($result);    

//==== ECHO AS JSON
echo json_encode($array); 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T22:08:02.963

您需要遍历结果。 `mysql_fetch_row`一次拿一个。

[http://php.net/manual/en/function.mysql-fetch-row.php](http://php.net/manual/en/function.mysql-fetch-row.php)

代码最终会像：

```
$jsonData = array();
while ($array = mysql_fetch_row($result)) {
    $jsonData[] = $array;
}
echo json_encode($jsonData);
//json_encode() 
```

**请注意** mysql 扩展在 PHP 5.5 中已弃用，如注释中所述，您应该使用 mysqli 或 PDO。您只需替换`mysqli_fetch_row`上面的代码即可。 [http://www.php.net/manual/en/mysqli-result.fetch-row.php](http://www.php.net/manual/en/mysqli-result.fetch-row.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:11:24.403

根据[PHP 文档](http://php.net/manual/en/function.mysql-fetch-row.php) `mysql_fetch_row`（除了它已被弃用，您应该使用 mysqli 或 PDO）

> 返回对应于获取的行的数值数组，并将内部数据指针向前移动。

所以你需要例如一个while循环来获取所有行：

```
$rows = array();

while ($row = mysql_fetch_row($result)) {
    $rows[] = $row;
}

echo json_encode($rows); 
```

我把它留给你如何只获取 3 行:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-23T18:06:02.007

我在使用 PHP 5.5.7 查询 ODBC 数据库连接时喜欢这样做，结果将采用 JSON 格式：

```
$conn = odbc_connect($odbc_name, 'user', 'pass');
$result = odbc_exec($conn, $sql_query); 
```

获取允许编辑字段的结果：

```
while( $row = odbc_fetch_array($result) ) { 
     $json['field_1'] = $row['field_1'];
     $json['field_2'] = $row['field_2'];
     $json['field_3'] = $row['field_1'] + $row['field_2'];

     array_push($response, $json); 
  } 
```

或者，如果我不想更改任何内容，我可以这样简化：

```
while ($array = odbc_fetch_array($result)) { $response[] = $array; } 
```

如果我想以 JSON 格式返回结果怎么办？，简单：

```
echo json_encode($response, true); 
```

您可以更改 odbc_fetch_array 为 mysqli_fetch_array 以查询 MySql 数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:07:29.340

你需要把它放在某种循环中，mysql_fetch_row 一次返回一个结果。

参见示例： [http ://www.php.net/manual/en/mysqli-result.fetch-row.php#example-1794](http://www.php.net/manual/en/mysqli-result.fetch-row.php#example-1794)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-31T14:46:51.987

$result = mysql_query("SELECT * FROM $tableName ORDER BY id LIMIT 3");

$json = 数组（）；而($array = mysql_fetch_row($result)){

$json[] = $数组；}

回声 json_encode($json);

# regex - Perl 字符串替换？

> ID：15511368
> 
> 赞同：-5
> 
> 时间：2013-03-19T22:02:52.543
> 
> 标签：regex, json, perl, replace

我的字符串如下，我想删除第一个 { ，只有第一个是字符串的开头。该字符串在替换之前打印良好，但在替换它的空字符串之后。

```
use strict;
use warnings;

my $string = {"something":[{"some":"12","some":"something","data":"","data":"data2","age":"23"},{......},{.....}]}

# the string is valid as it is json from some array function.

print $string."\n";   #My string prints fine here
 $string = s/\{//;

print "String after replacement".".$string." testing"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:05:40.793

我强烈建议您使用现有的、经过测试和调试的 JSON 模块来读取 JSON、修改数据结构并将其写回，而不是尝试手动弄乱 JSON。

请参阅[JSON](http://search.cpan.org/dist/JSON)以了解可以为您执行此操作的一个模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:06:16.090

代替：

```
$string = s/\{//; 
```

和：

```
$string =~ s/\{//; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:12:07.397

如前所述，另一种方法是使用[JSON::XS](https://metacpan.org/module/JSON::XS)模块，它会比[redbmk](https://stackoverflow.com/users/817950/redbmk)`JSON`说的更快，而且它可以更好地处理 UTF-8。

# asp.net-mvc - MVC 参数未绑定到控制器操作（KENDO UI）

> ID：15511371
> 
> 赞同：0
> 
> 时间：2013-03-19T22:03:18.113
> 
> 标签：asp.net-mvc, kendo-ui

希望有人可以提供帮助-这已经困扰了我大约 2 个小时-这可能很简单:)

Kendo UI Grid 向我的控制器发送请求

```
http://localhost:1418/user/update?UserID=1&UserName=Admin&RoleName=Admin&Email=c.j.hannon%40gmail.com&Active=true&Company%5BCompanyID%5D=1&Company%5BCompanyName%5D=asd 
```

但是，控制器类“公司”不受活页夹的约束？任何人都可以帮助我的视图模型和控制器动作签名如下：

```
[HttpGet]
        public JsonResult Update(UserViewModel model)
        {
            svcUser.UpdateUser(new UpdateUserRequest() {
                UserID=model.UserID,
                RoleID = model.RoleName,
                Email = model.Email,
                Active = model.Active.GetValueOrDefault(false),
                UserName = model.UserName
            });

            return Json("", JsonRequestBehavior.AllowGet);
        }

public class UserViewModel
    {
        public int UserID { get; set; }
        public string UserName { get; set; }
        public string RoleName { get; set; }
        public string Email { get; set; }
        public bool? Active { get; set; }
        public CompanyViewModel Company { get; set; }
    } 
```

干杯克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:43:23.497

一些东西。您的直接问题是 Company 映射到复杂对象而不是原始类型。Kendo Grid 只是不这样做（在撰写本文时）。只是猜测，但您可能想在 Grid 上设置外键绑定，然后从列表框中传回公司的 ID。这并不像您想象的那么糟糕，它会立即解决您的问题并且看起来也不错。

也许是个人品味，但似乎是一种惯例。对绑定到您的视图的模型使用后缀 ViewModel，而对您的业务对象使用后缀模型。所以剑道网格总是填充有模型。

前任。：

```
public class UserModel
{
    public int UserID { get; set; }
    public string UserName { get; set; }
    public string RoleName { get; set; }
    public string Email { get; set; }
    public bool? Active { get; set; }
    public int CompanyID { get; set; }
}
public class CompanyModel
{
    public int ID { get; set; }
    public string Name { get; set; }
}
public class UserViewModel
{
    public UserModel UserModel { get; set; }
    public IList<CompanyModel> Companies { get; set; }
}

public ActionResult UserEdit(string id)
{
    var model = new UserViewModel();
    model.UserModel = load...
    model.Companies = load list...
    return View(model);
}

@model UserViewModel
...
column.ForeignKey(fk => fk.CompanyId, Model.Companies, "ID", "Name")
(Razor Notation) 
```

但！这只是一个示例，最好使用 Ajax 使用 IList 加载 Grid，因为我假设您一次在 Grid 中有许多用户，尽管您也可以使用 List 绑定 ViewModel。但是公司列表可能每次都相同，因此将其映射到视图只是这样，而不是每次进行行编辑时都加载它。（并非总是如此）

# php - 在php中添加前缀

> ID：15511374
> 
> 赞同：-2
> 
> 时间：2013-03-19T22:03:21.520
> 
> 标签：php

我正在建立一个电话系统，它将呼叫者转移到数据库中的电话号码。然而，这些号码需要有前缀“1”才能使用 voip 正确拨号。任何人都可以帮忙吗？这就是我到目前为止所拥有的（在 voip 更改其设置之前工作得很好）：

```
// Get the ID from PBX
$custid =   $_POST['id'];

$result = mysql_query("SELECT * FROM phone_list WHERE ani = '$custid'");
while($row = mysql_fetch_array($result)){
//Strips White Space
$transferani = preg_replace("/[^0-9]/","", $row['phone']);
// Strips white space from beginning
echo ltrim($transferani);
}
// Close Connection
mysql_close($conn);
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:10:00.020

```
$prefix = '1';

$complete_number = $prefix.$transferani; 
```

或者：

```
$complete_number = '1'.$transferani; 
```

但是，如果您不想更改变量名称，请使用以下命令：

```
$transferani = '1'.$transferani; 
```

[PHP中的字符串连接](http://php.net/manual/es/language.operators.string.php)

# spring - 您可以从 Spring x509 支持中排除 URLS 吗？

> ID：15511380
> 
> 赞同：5
> 
> 时间：2013-03-19T22:03:33.767
> 
> 标签：spring, x509, authentication

我们目前正在使用 Spring x509 支持 client-auth。应用服务器是 JBoss，其中已设置了 verify-client="want"。

但是我观察到，一旦我将 x509 元素添加到 spring 配置文件中，它将尝试为每个 http 请求加载数字证书。但是我不希望它为登录页面这样做。除非用户单击登录页面上的特定按钮（例如“使用证书登录”），否则我不希望加载和使用证书。

有没有办法排除任何特定的 URL？或者一旦你在 Spring 配置元素中有一个 x509 元素，它会尝试为每个 http 请求加载证书？

这是我的弹簧配置的一部分：

```
<security:http create-session="always"> 
    <x509 subject-principal-regex="CN=(.*?)," user-service-ref="myUserDetailsService" /> 
    <intercept-url pattern= ..... // not relevant to this question
            <intercept-url pattern= ..... // not relevant to this question
    <security:form-login
            login-page="myLoginPage" 
            authentication-failure-url="/myErrorPage" 
            default-target-url="/mySuccessPage"
            always-use-default-target="true"/>

</security:http> 
```

此外，如果不在 Spring 中，是否有办法在 JBOSS 上指定排除 URL：

这是在 JBOSS Standalone.xml 中配置的元素

```
 <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
            <ssl name="ssl" key-alias="alias" certificate-key-file="keystore" verify-client="want" ca-certificate-file="truststore"/>
        </connector> 
```

# javascript - “正常”按钮单击方法在 Greasemonkey 脚本中不起作用？

> ID：15511381
> 
> 赞同：3
> 
> 时间：2013-03-19T22:03:41.013
> 
> 标签：javascript, click, greasemonkey

这是页面上的按钮：

```
<a id="dispatchOnJobButton" class="ui-btn ui-btn-corner-all ui-shadow ui-btn-up-c" href="#" data-role="button" data-theme="c" data-disabled="false">
<span class="ui-btn-inner ui-btn-corner-all" aria-hidden="true">
<span class="ui-btn-text">Dispatch on next job</span>
</span>
</a> 
```

我需要 Greasemonkey 来点击它。我尝试了许多不同的方法，但似乎都没有触发它应该运行的任何功能。

```
var clickEvent = document.createEvent("MouseEvents");
clickEvent.initEvent("click", true, true);
document.getElementById('dispatchOnJobButton').dispatchEvent(clickEvent);

// also tried
document.getElementById('dispatchOnJobButton').click();
// and this
unsafeWindow.document.getElementById('dispatchOnJobButton').click(); 
```

关于我可以尝试的其他东西的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T22:48:35.980

并非每个按钮都在单击事件后起作用。此外，尚不清楚这是静态加载的按钮，还是由 AJAX 加载的。（链接到目标页面！）

[在 AJAX 驱动的站点上选择和激活正确的控件](https://stackoverflow.com/questions/15048223/choosing-and-activating-the-right-controls-on-an-ajax-driven-site)中给出了一般方法。

像这个**完整的脚本**这样的东西在 99% 的情况下都可以工作：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("#dispatchOnJobButton", triggerMostButtons);

function triggerMostButtons (jNode) {
    triggerMouseEvent (jNode[0], "mouseover");
    triggerMouseEvent (jNode[0], "mousedown");
    triggerMouseEvent (jNode[0], "mouseup");
    triggerMouseEvent (jNode[0], "click");
}

function triggerMouseEvent (node, eventType) {
    var clickEvent = document.createEvent('MouseEvents');
    clickEvent.initEvent (eventType, true, true);
    node.dispatchEvent (clickEvent);
} 
```

如果它不适合您，**链接到目标页面，或发布[SSCCE！](http://sscce.org/)**

# ant - 在 Groovy Ant 任务中保留原始文件名

> ID：15511382
> 
> 赞同：0
> 
> 时间：2013-03-19T22:03:51.187
> 
> 标签：ant, groovy

我有以下代码：

```
new AntBuilder().zip( destFile: "${file}.zip" ) {
        fileset( dir: srcDir ) {
            include( name:pattern )
        }
    } 
```

在此示例中，我希望**ant 创建一个与原始文件同名的 zip，但在末尾添加一个 .zip。**有没有办法在不提前知道原始文件名的情况下做到这一点？我也希望能够对其他 ant 任务做同样的事情。

换句话说，我希望文件名成为每个文件解析为的任何“模式”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:37:14.043

像这样的东西？

```
<target name="zip-files">
    <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

    <dirset id="dirsToZip" dir="src">
        <include name="dir*"/>
    </dirset>

    <groovy>
        project.references.dirsToZip.each { 
            ant.zip(destfile: "${it}.zip", basedir: it)
        }
    </groovy>
</target> 
```

如果发现 groovy 任务通过文件集或 dirset 进行迭代的能力非常有用。

# wix - 将发布事件与控件分开

> ID：15511386
> 
> 赞同：1
> 
> 时间：2013-03-19T22:04:21.587
> 
> 标签：wix, wix3.5

我有几个 WiX 项目通用的 UI 对话框。

但是根据项目的不同，常见的 UI 之前（Back）或之后（Next）的对话框可能会有所不同。
为了避免代码重复，我希望单独使用通用对话框（没有发布事件）和每个 WiX 项目中定义的 UI 的发布事件。

是否有可能以及如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:31:46.583

[是的](http://wix.sourceforge.net/manual-wix3/wix_xsd_ui.htm)，你可以看看下面的 wix 源代码`src\ext\uiextension\wixlib`。您会注意到所有对话框都在它们自己的文件中，并且 UI 集是分开的。

例如，在 WixUI_Mondo.wxs 中，您有用于导入对话框的标签和用于重新排序序列`DialogRef`的一堆标签。`Publish`在，比如说，`InstallDirDlg`有控件，旁边没有`Publish`标签。

你的用户界面看起来像：

```
<UI Id="MyUI">
    <DialogRef="WelcomeDlg"/>
    <DialogRef="InstallDirDlg"/>

    <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="InstallDirDlg">CONDITION</Publish>
    <Publish Dialog="InstallDirDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg">1</Publish>
</UI> 
```

在您的对话框文件中：

```
<UI>
    <Dialog Id="WelcomeDlg" Width="370" Height="270" Title="Welcome">
        <Control ... />
    </Dialog>
</UI> 
```

您的项目中也可以有[多个`InstallUISequence`标签](http://wix.sourceforge.net/manual-wix3/wix_xsd_installuisequence.htm)。因此，如果您的对话框将始终调用自定义操作，或者显示在另一个之前，您不妨将它放在该文件中。

[你可以在这里](http://wix.codeplex.com/SourceControl/changeset/view/3a32f58e4c30)下载源代码

# c# - ConcurrentDictionary 是 SortedList 的“并发”版本吗？

> ID：15511394
> 
> 赞同：2
> 
> 时间：2013-03-19T22:04:37.290
> 
> 标签：c#, concurrency, sortedlist, concurrentdictionary

我想了解[`ConcurrentDictionary`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)vers的计算复杂性[`SortedList`](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)（即`O(logarithmic(n))`），ConcurrentDictionary 是否只是 a 的并发同步实现`SortedList`？还是这些数据结构有所不同？彼此之间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:08:10.650

`ConcurrentDictionary<T,U>`是 a 的并发版本`Dictionary<T,U>`。它不像`SortedList<T,U>`. 复杂度与 a 的复杂度密切相关`Dictionary<T,U>`，因此获取方法 O(1)。

`SortedList<T,U>`大多数 fetch 操作具有 O(log n) 复杂性，因为它正在遍历内部排序结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:08:05.207

我相信这`ConcurrentDictionary<K,V>`是一个线程安全的模拟，`Dictionary<K,V>`两者都应该具有复杂性*O(1)*。他们不提供密钥排序，不保证顺序。

# java - Java中的迭代器被1混淆

> ID：15511397
> 
> 赞同：0
> 
> 时间：2013-03-19T22:04:52.407
> 
> 标签：java, iterator

在Java中使用迭代器时，最后一个迭代器指向最后一个节点，对吗？值是 null 对吗？那么在使用的时候

```
iter = myList.listIterator();
sum = 0;
while (iter.hasNext()) {

sum += iter.next();

} 
```

既然最后一个值迭代器指向的是空值，不应该有一个不一样的问题吗？我知道实际上不存在这样的问题，但不知道为什么，请为我解释一下。提前致谢！

编辑：抱歉，太激动了，没有输入完整的代码。

摘要： 希望这对未来的人有所帮助，我在 C++ 中将迭代器视为指针，但实际上即使将迭代器想象为指针，它们也不是指向节点，而是“指向”节点之间的空间（节点前的空间更多精确）如 bmorris591 所述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:09:11.177

`next()`移动`Iterator`，`hasNext()`只检查是否有下一个。`Iterator`不“指向”，如果有的话，它指向元素之间的空间。

您可能想阅读[迭代器模式](http://en.wikipedia.org/wiki/Iterator_pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:08:23.810

假设您的列表包含`Integer`实例，您可以执行以下操作：

```
Iterator <Integer> iter = myList.listIterator();
int sum = 0;
while (iter.hasNext()) {
    sum += iter.next().intValue();
} 
```

您的代码将在循环的每次迭代中添加每个`iter.next()`结果`sum`。

当`iter.hasNext()`被调用时，它不是“在第一个值”，而是在第一个值之前 - 然后第一个调用将返回第一个值并将迭代器的内部状态更新为就在第二个值之前（就在第一个值之后）价值）。

当你到达最后时，内部状态正指向最后一个值之后，所以`iter.hasNext()`返回 false 并且你的循环退出。

现在，如果您的迭代器包含任何`null`值，它们仍会由对 的调用返回`next()`，并且您最终会得到 NullPointerException（您可以通过简单的空检查来避免这种情况）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:11:53.197

当返回时没有`null`返回元素。`Iterator``hasNext``false`

从概念上讲，当`hasNext`返回时`false`，迭代器已经指向“过去”最后一个元素，但是没有任何东西“过去”最后一个元素，甚至没有`null`。

如果你`next`在`hasNext`返回时调用`false`，那么它不会返回`null`——它会抛出一个`NoSuchElementException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:12:55.193

迭代器迭代列表。当仍有元素需要迭代时，hasNext() 方法返回 true，当所有元素都已处理完毕时返回 false。一个例子：

内容为 [0,2,4] 的列表：

```
iter = myList.listIterator();
iter.hasNext(); // true
iter.next(); // returns 0
iter.hasNext(); // true
iter.next(); // returns 2
iter.hasNext(); // true
iter.next(); // returns 4
iter.hasNext(); // false 
```

因此，一个或一个类似的东西没有问题。每当 hasNext() 返回 true 时，仍有元素需要迭代；next() 返回那个元素。

# powershell - 如何将 Get-WMIObject 查询中的数据解析为字符串？

> ID：15511398
> 
> 赞同：4
> 
> 时间：2013-03-19T22:04:53.620
> 
> 标签：powershell, wmi

我有以下代码行...

```
get-wmiobject -class win32_computersystem | select-object username 
```

它返回（用占位符编辑）......

```
@{username=DOMAIN\jsmith} 
```

需要做些什么来删除填充并给我一个“简单”的读数`DOMAIN\jsmith`？

对于奖励积分，我如何将该值解析为 just `jsmith`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:17:27.377

您需要扩展属性以获取 的值，`username`而不是具有该属性的自定义对象`username`。尝试

```
get-wmiobject -class win32_computersystem | select-object -expand username 
```

要仅获取用户名，请尝试：

```
(get-wmiobject -class win32_computersystem | select-object -expand username).Split("\")[2] 
```

根据您的操作系统，您可能需要使用`[1]`而不是最后。`[2]`在 Windows 8 中，您需要`2`，而在 Windows 7（我认为更早版本）中，您需要`1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:14:41.627

试试这个

```
Get-WmiObject -Class Win32_UserAccount | where -property name -eq jsmith | select Name 
```

# python - 为什么在 Python 中 -103/100 == -2 但 103/100 == 1？

> ID：15511400
> 
> 赞同：9
> 
> 时间：2013-03-19T22:05:08.937
> 
> 标签：python, integer-division

为什么`-103/100 == -2`但`103/100 == 1`在 Python 中？我似乎无法理解为什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T22:06:37.173

整数除法总是向下舍入（向负无穷大）。

![http://www.mathsisfun.com/numbers/images/round-up.gif](../Images/72c1b41920923118cafddc356fd5a2bd.png)

> 普通或长整数除法产生相同类型的整数；结果是数学除法的结果，将第¹*层*函数应用于结果。

[http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations](http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations)

这允许整数除法和模（余数，`%`）运算符通过 identity 很好地连接`x == (x/y)*y + (x%y)`。

¹   *floor(x)*是不大于*x*的最大整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:07:06.453

整数除法（我相信）或多或少会占用任何浮点数的 floor() 。

所以第一个分区是-2，第二个分区是1。

# ios - NSTimer 在课堂上的奇怪行为

> ID：15511405
> 
> 赞同：2
> 
> 时间：2013-03-19T22:05:21.690
> 
> 标签：ios, objective-c, nstimer, repeat

我有一个真正奇怪的 NSTimer 对象行为。

我正在尝试以`ChangePic`2 秒的重复计数调用方法，但计时器没有重复。我**只在项目的 1 个班级中遇到这个问题**

我的应用程序中有 5 个视图控制器，并且相同的代码适用于除此之外的所有类。有人知道怎么可能吗？有没有可能是什么东西阻塞了计时器？

-BTW，`ChangePic`方法只调用一次，不重复。

我的代码：

**视图控制器.h**

```
@property (nonatomic, strong) NSTimer *timer; 
```

**视图控制器.m**

```
_timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(ChangePic) userInfo:nil repeats:YES];
[_timer fire];

-(void) ChangePic {
    NSLog(@"testing"); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:09:11.250

将其分配给属性而不是支持变量。

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(ChangePic) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:11:51.233

鉴于没有给出很多背景，很难准确地说出您的问题是什么。我可以告诉你，我回答了另一个问题，问题是其中一个视图阻塞了计时器。定时器可以在多种不同的模式下运行，不同的场景有时会导致定时器被阻塞。尝试将计时器添加到所有常见模式，如下所示：

```
[[NSRunLoop currentRunLoop] addTimer:_timer forMode:NSRunLoopCommonModes]; 
```

另外，就像@Hejazi 所说，删除“fire”方法调用。在预定的计时器上不需要它。

# erlang - Erlang 中缺少可变参数的解决方法

> ID：15511418
> 
> 赞同：5
> 
> 时间：2013-03-19T22:06:01.473
> 
> 标签：erlang, variadic-functions, function-composition

对 Erlang 完全陌生。我正在尝试为函数组合定义一些函数，例如`compose`，但遇到了 Erlang 没有（据我所知）可变参数的事实，因此很难只编写适用于所有输入的此类函数的一个版本.`juxt``pipe`

到目前为止，我最好的想法是将不同数量的函数硬编码到一个合理的数量，并提供一个版本，该版本需要更大的列表，如下所示：

```
pipe (X, Fs) when is_list(Fs) -> lists:foldl(fun (F, Acc) -> F(Acc) end, X, Fs);
pipe (X, F) -> F(X).
pipe (X, F, G) -> G(F(X)).
pipe (X, F, G, H) -> H(G(F(X))).
pipe (X, F, G, H, I) -> I(H(G(F(X)))).
pipe (X, F, G, H, I, J) -> J(I(H(G(F(X))))).
pipe (X, F, G, H, I, J, K) -> K(J(I(H(G(F(X)))))).
pipe (X, F, G, H, I, J, K, L) -> L(K(J(I(H(G(F(X))))))). 
```

哪个有效，但我很好奇是否有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:31:21.973

问题是 Erlang 函数由`Name/Arity`;唯一标识。`io:format/1`和`io:format/2`，例如，是两个*不同*的函数。因此，可变参数函数根本不适合 Erlang。

最干净的解决方案可能是您建议的。另一种选择是编写一个自定义[解析](http://www.erlang.org/doc/man/erl_id_trans.html) [转换](https://stackoverflow.com/questions/2416192/is-there-a-good-complete-tutorial-on-erlang-parse-transforms-available)（一个在解析之后但在编译之前重写 AST 的模块）来捕获和转换对您想要的特定函数的调用，让其他人不受干扰地通过。转换可以拦截调用 like`pipe(A1, A2, A3, ..., An)`并将它们重写为`pipe([A1, A2, A3, ..., An])`.

但请注意：解析转换可能很难正确处理，并且必须在需要使用它们提供的功能的每个模块中明确引用它们。[Basho 的Lager](https://github.com/basho/lager)日志库就是一个很好地使用解析转换的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:55:13.720

我想知道为什么列表符号对您不利，因为它提供了一个非常简短且简单的实现，类似于 io:format/2。

```
pipe (X, Fs) when is_list(Fs) -> lists:foldl(fun (F, Acc) -> F(Acc) end, X, Fs).
fibnext([A,B]) -> [A+B,A].

1> F = fun(X) -> my_module:fibnext(X) end.
#Fun<erl_eval.6.82930912>
2> my_module:pipe([1,1],lists:duplicate(12,F)).      
[377,233]
3> 
```

# sql - 将三个布尔列合并为一个枚举列

> ID：15511419
> 
> 赞同：2
> 
> 时间：2013-03-19T22:06:02.590
> 
> 标签：sql, oracle

我正在使用包含 3 个布尔列的表从数据库迁移数据，这些列在概念上是互斥的。例如：

```
| TypeA | TypeB | TypeC |
| 0     | 1     | 0     |
| 0     | 0     | 1     |
| 0     | 1     | 0     |
| 1     | 0     | 0     |
| 1     | 0     | 0     | 
```

我需要根据 3 个布尔列中的哪一个设置为 true，将这三个布尔值合并到一个列中。我追求的结果看起来像：

```
| Type |
| B    |
| C    |
| B    |
| A    |
| A    | 
```

到目前为止，我已经想出了以下内容，但是感觉有点混乱。有没有更好的办法？

```
SELECT
CASE WHEN TypeA= 1
   THEN 'A'
   ELSE
      CASE WHEN TypeB= 1
           THEN 'B'
           ELSE
              CASE WHEN TypeC= 1
                   THEN 'C'
              END
      END
END as Type
FROM TABLE 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:11:35.273

您可以像这样在 CASE 语句中堆叠条件

```
CASE
WHEN TypeA = 1 THEN 'A'
WHEN TypeB = 1 THEN 'B'
WHEN TypeC = 1 THEN 'C'
END as Type 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:06:13.883

```
chr(65 + TypeB + 2*TypeC) as Type 
```

* * *

另一种解决方案：

```
decode(TypeB-TypeC, 0, 'A', 1, 'B', 'C') as Type 
```

# ruby-on-rails - 嵌套模型不更新

> ID：15511420
> 
> 赞同：0
> 
> 时间：2013-03-19T22:06:05.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, nested-forms, nested-attributes

使用[嵌套模型表单（修订版）](http://railscasts.com/episodes/196-nested-model-form-revised) Railscast 尝试使用可以立即更新的嵌套模型创建页面。Wiki 有很多主题，其中有很多注释。

问题是，a) 预先存在的数据没有按照正确执行的方式预先填充字段，并且 b) 点击更新不会引发任何错误（事实上，它显示了成功横幅)，但它也没有做任何事情。

这是我的代码：

**wiki、topic、note.rb**（结合阅读，实际上并非如此）：

```
class Wiki < ActiveRecord::Base
  attr_accessible :topics_attributes
  has_many :topics
  accepts_nested_attributes_for :topics, :allow_destroy => true
end
class Topic < ActiveRecord::Base
  attr_accessible :name, :notes_attributes, :wiki_id
  has_many :notes
  belongs_to :wiki
  accepts_nested_attributes_for :notes, :allow_destroy => true
end
class Note < ActiveRecord::Base
  attr_accessible :name, :info, :topic_id
  belongs_to :topic
end 
```

**wikis_controller.rb**

我正在做 wiki.first 的事情，因为我只想要一个 wiki。该模型存在，因此我可以通过单个对象更新其依赖模型。我永远不会有超过一个维基。

```
class WikisController < ApplicationController
  before_filter :authorize

  def show
    @wiki = Wiki.first
  end

  def edit
    @wiki = Wiki.first
  end

  def update
    @wiki = Wiki.first
    respond_to do |format|
      if @wiki.update_attributes(params[:wiki])
        format.html { redirect_to wikis_path, notice: 'Wiki was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @wiki.errors, status: :unprocessable_entity }
      end
    end
  end

end 
```

**routes.rb** # 我只想要一个“wiki”，我希望它的路线是 /wikis get 'wikis', to: 'wikis#show', as: 'home' resources: wikis

wikis/ **edit.html.haml**

```
.row.container.wiki
    %h1{ :style => 'margin-bottom: 40px'} Update the Wiki
    = form_for @wiki do |w|
        = w.fields_for :topics do |builder|
            = render "topic_fields", f: builder
        = link_to_add_fields "add topic", w, :topics
        %br
        = w.submit "Update", class: "btn" 
```

wikis/ **_topic_fields.html.haml**

```
.field_inset
    = f.text_field :name
    = f.hidden_field :_destroy
    = link_to "remove", '#', class: "remove_fields"

    = f.fields_for :notes do |builder|
        = render 'note_fields', f: builder 
```

维基/ **_notes_fields.html.haml**

```
.field_inset
    .add_inset
      = f.fields_for :notes do |builder|
        .remove
          = builder.text_field :name
          = builder.text_field :info, class: "no_margin"
          = link_to "remove", '#', class: "remove_fields" 
```

这些类主要用于样式设置，但 remove_fields 除外，它调用了一些 javascript。知道我在这里做错了什么吗？我对此感到很困惑。

**新错误**

在修复了 wikis_controller 中的更新操作（错误地引用了 params[:post]）之后，我现在在尝试提交更新时收到此错误。尽管如此，这些字段并未预先填充：

```
Can't mass-assign protected attributes: notes 
```

我会认为 :topics_attributes 和 :notes_attributes 会处理这个问题？

**另外**，值得注意的是，虽然 Notes 字段没有预填充，但 Topics 字段是。

**编辑——来自下面的质量分配错误的参数散列**

看起来参数正在正确传递

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"3/4k8eEa4/PfeNI9cSj7zqCm9+scWBS3gwEacmc/hd0=",
 "wiki"=>{"topics_attributes"=>{"0"=>{"name"=>"Pre-existing Topic Name",
 "_destroy"=>"false",
 "notes_attributes"=>{"0"=>{"notes"=>{"name"=>"New Notes Name",
 "info"=>"New Notes Info"},
 "id"=>"1"}},
 "id"=>"1"}}},
 "commit"=>"Update",
 "id"=>"1"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:17:32.737

您的视图中有一对多的**fields_for**调用。基本的经验法则是为每个**accept_nested_attributes_for**调用设置一个**fields_for**调用。

从以下位置更改 wikis/_notes_fields.html.haml：

```
.field_inset
    .add_inset
      = f.fields_for :notes do |builder|
        .remove
          = builder.text_field :name
          = builder.text_field :info, class: "no_margin"
          = link_to "remove", '#', class: "remove_fields" 
```

至：

```
.field_inset
    .add_inset
      .remove
        = f.text_field :name
        = f.text_field :info, class: "no_margin"
        = link_to "remove", '#', class: "remove_fields" 
```

我不是一个 haml 人，所以我不能 100% 确定这段代码是否有效，但基本想法是删除 fields_for 调用。

您的**notes_attributes**哈希如下所示：

```
"notes_attributes"=>{"0"=>{"notes"=>{"name"=>"New Notes Name",
                                     "info"=>"New Notes Info"}, "id"=>"1"}} 
```

它应该：

```
"notes_attributes"=>{"notes"=>{"name"=>"New Notes Name",
                               "info"=>"New Notes Info"}} 
```

# list - 如何使用元组的元素作为索引来到达列表的元素-haskell

> ID：15511427
> 
> 赞同：2
> 
> 时间：2013-03-19T22:06:22.577
> 
> 标签：list, haskell

我有一个元组列表，我试图使用它的元素来访问嵌套列表的元素。

```
list = [["c","a","b"],["k","l","m"]]
indexTuple = [(0,1),(1,1),(1,2)] 
```

这样，我需要检查与我的 indexTuple 元素相对应的列表元素之一中是否有“a”。到目前为止我的尝试；

```
seekinga :: [[[Char]]] -> Int -> Int -> Int -> [(Int,Int)]
seekinga list x y width 
        | list !!(map fst indexTuple) !!(map snd indexTuple) == "a" = [(fst indexTuple,snd indexTuple)]
        | otherwise = [()]
    where indexTuple = [(x,y) | x <- [x-width..x+width], y <- [y-width..y+width]] 
```

这显然是行不通的，因为 !! 运算符希望整数工作，但 map 返回列表。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T22:29:08.033

您确实有两个不同的问题：给定两个数字，如何索引嵌套列表以及如何从元组中获取两个数字。

第一个问题很容易通过查看类型来解决。你知道如何索引到*一个*列表中：`(!!) :: [a] -> Int -> a`. 在这里，`a`可以是*任何东西*，包括嵌套列表。因此，给定`[[[Char]]]`，我们可以使用`!!`来获得`[[Char]]`. 而且，由于这是一个列表本身，我们可以`!!` *再次*使用来获得一个`[Char]`. （`[Char]`只是`String`，以防你没有意识到。）

所以我们在这里需要做的就是`!!`在第一个结果上使用然后再次使用它。

现在，我们如何真正得到这两个数字呢？这就是我们使用模式匹配的地方。我们可以用 let 语句匹配一个元组：

```
let (i, j) = tuple in ... 
```

现在只需将两者放在一起就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T22:28:13.820

所以你可以查看一个元素：

```
> list !! 1 !! 2
"m" 
```

所以让我们把它变成一个函数：

```
:set -XNoMonomorphismRestriction
> let index lst  i j= lst !! i !! j 
```

并`filter`放出那些不指向“a”的索引

```
> filter (\(i, j) -> index list i j == "a") indexTuple
[(0,1)] 
```

如果改为 list = [["c","a","b"],["k","l","a"]]

然后

```
> filter (\(i, j) -> index list i j == "a") indexTuple
[(0,1),(1,2)] 
```

使用`!!`可能不是您的最佳选择，但实际上可能不是。据我了解，我试图打破问题的两个部分，访问元素并过滤索引。

# arrays - 将文件读入单个数组，然后检查该数组中是否有数字

> ID：15511429
> 
> 赞同：0
> 
> 时间：2013-03-19T22:06:39.807
> 
> 标签：arrays, file, matlab, parsing, set

我有一个按以下格式设置的 .txt 文件：

```
7
8
9
10 
```

我正在尝试做的是将文件中的数字读入数组，然后检查我从不同函数获得的数字是否包含在该数组中。

```
ismember(ruleFunc{x+1},memFunc} 
```

我很确定它将检查 ruleFunc 中的元素是否在数组 memFunc 中，如果存在或不存在则返回 1/0。但是我无法让 ismember 函数正常工作，因为我用来填充 memFunc 数组的方法是错误的。

此外，如何在新行的 .txt 文件中添加另一个数字？

**编辑：**

这是我目前填充 memFunc 的方式。这也是填充 ruleFunc 的相同方法。

```
mem=fopen('WorkingMemory.txt');
    tline = fgets(mem); 
    workMem = {}; 
    index = 1; 
while ischar(tline)   
    workMem{index} = str2num(tline); 
    tline = fgets(mem); 
    index = index + 1; 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:43:12.510

该函数`ismember`返回一个矩阵，该矩阵为 1，其中输入相等。（有关更多信息，请参阅文档。）您实际上可能想要返回数字 1 或 0 的东西，具体取决于天气或您的数字根本不在矩阵中。我在下面包含了这两个选项。

```
% read in file
filename = 'my_data.txt';
fid  = fopen(filename);
data = textscan(fid, '%d');
data = data{1};
fclose(fid);

% determine if number is in the file
number = 33;
ismember(data,number) %this returns an array
length(find(data == number)) > 0 % this returns 1 or 0

%write a line to existing file
fid2 = fopen(filename,'a');
newnumber = 100;
fprintf(fid2, '%d\n', newnumber);
fclose(fid2); 
```

现在我看到了你更新的答案。该代码会将每一行读入单元阵列的不同单元。您希望所有数据都在一个矩阵中。您可以重新排列单元格数组并将数据放入矩阵中，也可以`textscan`如上所述使用。

作为对您的评论的回应，您可以做出这样的 if 语句：

```
if (length(find(data == number)) > 0) 
    'do something'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:21:22.017

也许您实际上是在创建一个包含字符串而不是数字的数组？

如果不是那么简单，更多信息/代码片段将很有用。您提到填充**memFunc**的方法可能是错误的，也许您可​​以发布该代码？

# c# - 多行文本框自动高度

> ID：15511433
> 
> 赞同：0
> 
> 时间：2013-03-19T22:06:58.227
> 
> 标签：c#, asp.net, textbox, height, multiline

我有多个从数据库表中填充的多行文本框。当输入它们时，高度会自动扩展并调整高度以适应正在输入的文本行数，因此无需滚动即可看到所有文本行。这是完美的，但是当我重新加载页面时（在我将文本框数据保存回数据库之后），多行文本框不会调整回它们应有的高度，显示所有数据行。我想出了一种不优雅的方法来相应地调整文本框的大小。我在整个多行文本框中找到字符数，将 # 除以可以根据我选择的宽度放入行中的字符数，以获得应该有多少行，然后将 # 乘以像素行的高度，并将文本框高度设置为此 # 以像素为单位。必须有一种更优雅的方式来做到这一点，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:11:57.380

您可以尝试在焦点远离该控件时禁用多行属性，当您单击文本框进行键入时，您会重新启用多行。

# php - 按下按钮后调用javascript代码然后刷新页面

> ID：15511441
> 
> 赞同：0
> 
> 时间：2013-03-19T22:07:31.753
> 
> 标签：php, javascript, html

我在按下按钮后尝试启动 php 脚本，然后重新加载页面，但我遇到了问题，现在我这样做：

```
<a href="#" class="btn green big" onclick="startUpdate();">Start Update</a> 
```

那么这是脚本：

```
<script type="text/javascript">
    function startUpdate() {
        $.get("Update/startUpdateTxt.php");
        return false;
    }
</script> 
```

这些脚本写在 txt 文件上，一切正常，但我想刷新页面，因为我必须更改一些元素并阅读我在 txt 文件中所做的更改，所以我尝试这样做：

```
 <script type="text/javascript">
    function startUpdate() {
        $.get("Update/startUpdateTxt.php");

        return window.location.href=window.location.href;
    }
</script> 
```

这样，页面被刷新了，但是 phpscript 不再起作用，并且没有在文件中写入任何内容，这是 phpscript：

startUpdateTxt.php：

```
<?php
$myFile = "updateStatus.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "StartUpdate\n";
fwrite($fh, $stringData);
fclose($fh);
?> 
```

我该如何刷新页面并在后台调用 phpscript？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:12:26.680

您需要确保您的 ajax 调用完成。为此，您可以将重定向放在回调函数中：

```
function startUpdate() {
    $.get("Update/startUpdateTxt.php", function() {
      location.reload();
    });
} 
```

但是，使用 ajax 调用 php 脚本然后重定向并没有多大意义（对我来说......），只需发布​​到 php 脚本并从那里处理所有内容会更容易。

# c# - 映射没有导航属性的多对多外键

> ID：15511444
> 
> 赞同：0
> 
> 时间：2013-03-19T22:07:59.817
> 
> 标签：c#, entity-framework, foreign-keys

是否可以使用 EF 5.0 Code First 映射外键列表而不是导航属性？

想象一下，我有一个 Car 实体和一个 Driver 实体。一个司机可以驾驶多辆汽车，一辆汽车可以有多个司机。这是在数据库中使用 Car 和 Driver 表之间关系的连接表建模的：`Car_drivers (car_id, driver_id)`

我希望能够将其映射到以下两个类：

```
public class Driver
{
    public int Id { get; set; }
    ...
    public IList<int> Drives  { get; set; } // List of car ID's
}

public class Car
{
    public int Id { get; set; }
    ...
    public IList<int> DrivenBy { get; set; } // List of driver ID's
} 
```

如何使用 EF 5.0 Code First 将数据库模型中的外键映射到此模型？

## 更新：

有谁知道 NHibernate 是否支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:10:52.513

这不可能。实体框架只能映射相关实体的集合。所以你应该使用实体集合而不是键集合：

```
public class Driver
{
    public int Id { get; set; }
    ...
    public virtual ICollection<Car> Drives  { get; set; }
}

public class Car
{
    public int Id { get; set; }
    ...
    public virtual ICollection<Driver> DrivenBy { get; set; }
} 
```

# ruby - 为什么方法声明在 ruby 中评估为零？

> ID：15511446
> 
> 赞同：1
> 
> 时间：2013-03-19T22:08:02.710
> 
> 标签：ruby, methods

定义一个方法似乎不会评估为一个真实的值，这可以通过将一个放在一个`if`条件中来检查：

```
if(def some_method; puts "random text"; end) then
  puts "declaration evaluates to true"
else
  puts "declaration evaluates to false"
end
# => declaration evaluates to false 
```

为什么/如何将方法声明评估为`nil`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:09:35.327

它实际上评估为`nil`。这是有道理的；为什么方法创建会返回任何东西？

```
irb(main):001:0> def test; print 'test'; end
=> nil 
```

但是，它必须返回一些东西，所以返回“无”就是返回`nil`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:44:32.717

Ruby 中的每条语句都会计算出一些东西。该`def`语句的值不应该被检查，因此是`nil`.

您将在反射“元编程”方法中找到您正在寻找的行为`define_method`。

```
class EmptyClass

  m = define_method(:newmethod) {p "I am the new method"}
  p m # => <Proc:0x50b3f359@E:\NetBeansProjects\RubyApplication1\lib\main.rb:6>

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:12:05.497

从[红宝石陷阱](http://en.wikipedia.org/wiki/Ruby_%28programming_language%29#.22Gotchas.22)：

> 非布尔数据的布尔评估是严格的：0、"" 和 [] 都被评估为真。在 C 中，表达式 0 ? 1 : 0 评估为 0（即错误）。然而，在 Ruby 中，它产生 1，因为所有数字都为真；只有 nil 和 false 评估为 false。这条规则的一个推论是 Ruby 方法按照约定——例如，正则表达式搜索——成功时返回数字、字符串、列表或其他非 false 值，但失败时返回 nil。此约定也用于 Smalltalk，其中只有特殊对象 true 和 false 可以在布尔表达式中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T22:47:26.507

方法定义，例如`def some_method; puts "random text"; end`总是返回**nil**。

现在，这意味着该方法被评估为**nil**。根据 Ruby 文档：

> 如果 obj 为 nil 或 false，则返回 false；否则为真。

由于您的方法返回**nil**，因此**if**会将其评估为**false**因此执行 else 语句。

# c# - 使用 servicestack 创建用于客户端身份验证的服务？

> ID：15511451
> 
> 赞同：5
> 
> 时间：2013-03-19T22:08:10.617
> 
> 标签：c#, asp.net, vb.net, wcf, servicestack

我有几个应用程序（移动和桌面），我需要创建一个简单的 Web 服务来进行身份验证并将信息发布回客户端。

在试图弄清楚如何创建会员数据库甚至找到以前的数据库来检查[我正在使用的 WCF 服务的问题之后，](http://www.codeproject.com/Articles/96028/WCF-Service-with-custom-username-password-authenti)我偶然发现了服务堆栈。所以我有几个问题。

服务堆栈是否有现成的数据库和提供程序，以便我可以简单地为客户端添加身份验证，并让它自己创建数据库。所以我不必从头开始创建它。

他们是否已经是 servicestack 服务和数据库的示例，因此我可以将其用作基础？

整个 WCF 服务让我感到困惑。基本上，我正在寻找的只是一种服务，我可以使用它来授权移动应用程序和桌面应用程序，并且可能稍后会为其添加一些额外的功能。它需要自己的数据库，因为它不会从现有网站运行，并且是我管理它们的一种方式。

使用 WCF，这项任务似乎过于复杂，我还没有找到任何已经使用数据库的示例以及管理它们的方法。理想情况下，我希望建立一个空白网站，这样我就可以管理帐户并让 WCF 服务使用相同的数据库。

这一切都可以通过服务堆栈轻松完成吗？有人可以指出一个例子吗？如果您对我目前的方法有任何提示，也会有所帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T00:55:03.623

我建议阅读[Authentication and authorization wiki](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)，它解释了 ServiceStack 内置的身份验证支持。

### 后端存储库选项

它描述了您可以将经过身份验证的 UserData 长期保存到的所有潜在后端存储库：

*   **OrmLite**：`OrmLiteAuthRepository`在[ServiceStack中](https://nuget.org/packages/ServiceStack)
*   **Redis**：`RedisAuthRepository`在[ServiceStack中](https://nuget.org/packages/ServiceStack)
*   **在内存**中：`InMemoryAuthRepository`在[ServiceStack中](https://nuget.org/packages/ServiceStack)
*   **Mongo DB**：`MongoDBAuthRepository`在[ServiceStack.Authentication.MongoDB中](https://nuget.org/packages/ServiceStack.Authentication.MongoDB)
*   **Raven DB**：`RavenUserAuthRepository`在[ServiceStack.Authentication.RavenDB](https://nuget.org/packages/ServiceStack.Authentication.RavenDB)
*   **NHibernate**：`NHibernateUserAuthRepository`在[ServiceStack.Authentication.NHibernate](https://nuget.org/packages/ServiceStack.Authentication.NHibernate)

### 短期会话/缓存提供者

以及用于对经过身份验证的客户端会话进行快速、短期数据访问的所有不同缓存选项：

*   **在内存**中：`MemoryCacheClient`在[ServiceStack中](https://nuget.org/packages/ServiceStack)
*   **Redis** : `RedisClient`，`PooledRedisClientManager`或`BasicRedisClientManager`在[ServiceStack.Redis](https://nuget.org/packages/ServiceStack.Redis)
*   **Memcached**：`MemcachedClientCache`在[ServiceStack.Caching.Memcached](https://nuget.org/packages/ServiceStack.Caching.Memcached)
*   **Azure**：`AzureCacheClient`在[ServiceStack.Caching.Azure中](https://nuget.org/packages/ServiceStack.Caching.Azure)

默认情况下，如果未指定，则使用**MemoryCacheClient 。**

## 示例项目

您可以查看部署在[http://bootstrapapi.apphb.com上的](http://bootstrapapi.apphb.com)[SocialBootstrap API 项目](https://github.com/ServiceStack/SocialBootstrapApi/)的源代码，这是一个示例演示，展示了在 Web 应用程序中启用的所有 ServiceStack 支持的身份验证选项。

[我将从AppHost.ConfigureAuth()](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/AppHost.cs#L166)重新发布代码和文档，因为它已经很好地解释了如何配置它。

大多数身份验证提供程序使用 AppSettings 来访问存储在[Web.Config](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Web.config#L23)中的其他信息：

```
var appSettings = new AppSettings(); 
```

您使用 AuthFeature 插件来注册您要为此 Web 应用启用的所有身份验证方法：

```
Plugins.Add(new AuthFeature(
    () => new CustomUserSession(), //Use your own typed Custom UserSession type
    new IAuthProvider[] {
        new CredentialsAuthProvider(),              //HTML Form post of UserName/Password credentials
        new TwitterAuthProvider(appSettings),       //Sign-in with Twitter
        new FacebookAuthProvider(appSettings),      //Sign-in with Facebook
        new DigestAuthProvider(appSettings),        //Sign-in with Digest Auth
        new BasicAuthProvider(),                    //Sign-in with Basic Auth
        new GoogleOpenIdOAuthProvider(appSettings), //Sign-in with Google OpenId
        new YahooOpenIdOAuthProvider(appSettings),  //Sign-in with Yahoo OpenId
        new OpenIdOAuthProvider(appSettings),       //Sign-in with Custom OpenId
    })); 
```

ServiceStack 允许您指定自己的类型化**CustomUserSession**，它将用于将 UserAuth 数据持久保存到 Session 中。

如果您想为新用户启用注册服务，以便他们可以使用提供的凭据进行注册和登录：

```
Plugins.Add(new RegistrationFeature()); 
```

您可以选择使用自己的自定义实现覆盖默认注册验证：

```
//container.RegisterAs<CustomRegistrationValidator, IValidator<Registration>>(); 
```

如果您使用的是 OrmLite RDBMS 后端存储库，则需要注册一个 DB Factory，在这种情况下，它被配置为访问 UserAuth SQL Server DB：

```
var connStr = appSettings.Get("SQLSERVER_CONNECTION_STRING", //AppHarbor or Local connection string
    ConfigUtils.GetConnectionString("UserAuth"));
container.Register<IDbConnectionFactory>(
    new OrmLiteConnectionFactory(connStr, //ConnectionString in Web.Config
        SqlServerOrmLiteDialectProvider.Instance) {
            ConnectionFilter = x => new ProfiledDbConnection(x, Profiler.Current)
        }); 
```

上面的 ConnectionFilter 是可选的，但允许您使用 ServiceStack 的内置 Mini Profiler 来分析数据库查询。

现在您已经在上面注册了您的 RDBMS 连接，您可以将它连接起来，使其成为`IUserAuthRepository`身份验证功能：

```
//Use OrmLite DB Connection to persist the UserAuth and AuthProvider info
container.Register<IUserAuthRepository>(c =>
    new OrmLiteAuthRepository(c.Resolve<IDbConnectionFactory>())); 
```

如果使用**OrmLiteAuthRepository**，它可以自动创建 AuthFeature 所需的后端 User Auth 表：

```
//Drop and re-create all Auth and registration tables
var authRepo = (OrmLiteAuthRepository)container.Resolve<IUserAuthRepository>();
if (appSettings.Get("RecreateAuthTables", false))
    authRepo.DropAndReCreateTables(); 
else
    authRepo.CreateMissingTables(); //Create only the missing tables 
```

# c - fopen() 创建权限模式

> ID：15511456
> 
> 赞同：4
> 
> 时间：2013-03-19T22:08:38.083
> 
> 标签：c, fopen, file-permissions

根据[OpenGroup](http://pubs.opengroup.org/onlinepubs/009695399/functions/open.html)，如果使用 O_CREAT 调用 open() 并且文件不存在，则将使用函数中第三个参数指定的文件权限创建它：

> 应创建文件；文件的用户ID设置为进程的有效用户ID；文件的组ID应设置为文件父目录的组ID或进程的有效组ID；并且文件模式的访问权限位（参见 ）应设置为类型为 mode_t 的第三个参数的值

是否可以使用 fopen() 做类似的事情，以便我可以在创建时设置新文件的权限，而不必事后对其进行 chmod？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T22:11:20.603

从`fopen(3)`手册页：

> 任何创建的文件都将具有 mode `S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH (0666)`，由进程的 umask 值修改（请参阅 umask(2)）。

你`umask(2)`的朋友也是。

# html - video.js 无法解释的错误

> ID：15511457
> 
> 赞同：0
> 
> 时间：2013-03-19T22:08:39.540
> 
> 标签：html, video.js

我有以下代码：

```
<video id="v2" class="video-js vjs-default-skin" controls
preload="auto" width="640" height="264"
data-setup="{}">
<source src="uploads/5148dc022c494_183a658049ae973e1f3451450d689f39.wmv.mp4" type='video/mp4'>
</video> 
```

我已经在`<head>`标签处实现了相关的 JS 脚本，我可以看到播放器帧加载，包括控件，但是没有显示视频。

当我检查控制台日志时，我可以看到某种错误，我唯一能看到的是：

`Video Error _V_.Event {originalEvent: Event, type: "error", isDefaultPrevented: function, timeStamp: 1363730623374, vdata1363730622853: true…}`

我可以展开该消息以查看更多详细信息，但没有什么能真正告诉我脚本失败的原因。

当我下载它时，视频本身正在运行。我可以用我的 windows 媒体播放器观看它，没有任何问题。

注意：我使用的是最新的 Chrome 版本（也测试了 IE10，无法正常工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:07:32.793

最明显的回答是说你的视频不是 mp4 而是 wmv

将其转换为 mp4 或使用 wmv 类型属性

请注意当前为 .wmv.mp4 的扩展名

# android - 在 Android 上查看时，网站覆盖内容不滚动

> ID：15511461
> 
> 赞同：1
> 
> 时间：2013-03-19T22:08:55.233
> 
> 标签：android, css, overlay

感谢您的任何帮助，您可以提供！我正在尝试完成我网站的移动版本，但由于某种原因，我创建的叠加层中显示的内容在 Android 上查看时无法正确滚动。这在 iPhone 上不是问题。我已查看此链接，但我认为它不适用：[Android 将视图覆盖在所有内容之上？](https://stackoverflow.com/questions/7519160/android-overlay-a-view-ontop-of-everything)

这是我的 jsfiddle 的链接：http: [//jsfiddle.net/kevindp78/TkQJa/3/](http://jsfiddle.net/kevindp78/TkQJa/3/) 如果你想在 android 上看到这个，还有一个完整版本的链接：http: [//jsfiddle.net/kevindp78/ TkQJa/3/嵌入式/结果/](http://jsfiddle.net/kevindp78/TkQJa/3/embedded/result/)

这是完整的 HTML

```
<div id="webpagecontent"><ul>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
<li>This is my webpage content.</li>
</ul>
</div>
<div id="fixedoverlay">
   <div id="overlaymatte"></div>
   <a title="close" href="#" class="closeoverlay">Close</a>
   <div id="overlaycontent"><ul>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
       <li>Here's all of my overlay content.</li>
   </div> 
```

和 CSS

```
#fixedoverlay, #overlaymatte {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color:rgba(255,0,0,0.5);
z-index: 999;
}
#overlaycontent {
position: relative;
max-width: 95%;
margin: 25px auto;
height: 50px;
overflow: auto;
background: #fff;
padding: 10px;
/*  border: 20px solid #fff; */
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
border-radius: 10px;
z-index: 9999;
}

#fixedoverlay #loaderimg {
display: block;
margin: 50px auto;
}
#fixedoverlay .closeoverlay {
position: absolute;
display: block;
padding: 4px;
-moz-border-radius: 15px;
-webkit-border-radius: 15px;
border-radius: 15px;
border: 1px solid #666;
background: #eee; 
width: 16px;
height: 16px;
left: 50%;
top: 12px;
margin-left: 0px;
z-index: 999999999;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T16:46:23.780

某些 Android 浏览器（如果我是正确的，版本 2.x 及更低版本）不支持 CSS`overflow`属性，因此页面中需要滚动的具有固定高度的任何元素在那些较旧的 Android 浏览器中都无法滚动（我相信这也会影响旧版本的 iPhone）。

你可以试试[Overthrow JS](http://filamentgroup.github.io/Overthrow/)。它已经为我的培根保存了几次任务，例如您所描述的，它是一个 Javascript 插件，但如果您必须使用可滚动元素，那么它是值得的。

实现非常简单，只需将 JS 文件放在`<head>`文档的标签中，并将类分配给`overthrow`您要使用触摸滚动的元素。

可能有更好的插件可以解决这个问题，但是推翻是我唯一使用过的插件。

**注意**您必须结合某种滚动条插件来显示滚动条，Overflow JS 仅允许您在移动浏览器上滚动内容，为此我使用了[ScrollPane JS](http://jscrollpane.kelvinluck.com/)，但我从未同时使用这两个，我可以'不明白为什么它不起作用。

## **笔记2**

在对此进行了更多阅读之后，看起来[TinyScrollbar](http://baijs.nl/tinyscrollbar/)会做你想做的事！它允许您根据功能部分在移动浏览器上滚动

# highcharts - Highcharts 共享工具提示需要不同的 valueSuffix 和不同的小数

> ID：15511465
> 
> 赞同：6
> 
> 时间：2013-03-19T22:09:04.010
> 
> 标签：highcharts

我有一个绘制温度、风、压力和降雨量的 Highchart 图表。

可以在这里看到[http://www.dmjsystems.co.uk/weather/forecast.php](http://www.dmjsystems.co.uk/weather/forecast.php)

我正在使用一个共享的工具提示，其中增加了最大雨量是堆叠列中最小和最大雨量的总和。目前，代码忽略了我的基于系列的后缀，我无法让单个小数起作用（即它们都显示 3 个小数位）。

每个项目都有不同的后缀（Temp =（度数符号）C、Wind = mph、Pressure = mb 和 Rain = in）和不同的小数位数（Wind = none、Temp = 1、Pressure = 1 和 Rain = 3）。

我目前使用的通用工具提示编码如下：

```
 tooltip: { shared : true,
            formatter: function() {
            return '<span style="color:#039;font-weight:bold">' + Highcharts.dateFormat('%A' + ', ' + '%b %d' + ', ' + '%H' + ':' + '00',this.x) + '</span><br/>' +
                       this.points.map(function(point, idx) {
                           return '<span style="color:' + point.series.color + '">' + point.series.name +
                                  '</span>: <span style="color:#669;font-weight:bold">' +
                                  Highcharts.numberFormat((idx == 0) ? point.total : point.y,3) +
                                  '</span>';
                       }).join('<br/>');
            }
    }, 
```

但我认为我需要将此（除了 shared : true 之外）移动到使用 pointFormat （尤其是 tooltip.ySuffix ，我认为它可以让我正确指定后缀）和 valueDecimals 为每个系列设置小数点的基于系列的工具提示，但是我找不到任何代码示例来使用这些功能。

此外，一旦我离开一般工具提示，我就无法让堆叠列的总计工作。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T03:21:39.943

您可以简单地为每个系列添加工具提示选项。
您可以在以下[链接](http://api.highcharts.com/highstock#plotOptions.series.tooltip)中查看选项。
这样您就不必格式化每个系列的点。

```
series: [{
    name: 'USD',
    data: yourData,
    tooltip: {
        ySuffix: ' USD',
        yDecimals: 4
    }
}, {
    name: 'EUR',
    data: yourData,
    tooltip: {
        yPrefix: 'EUR ',
        yDecimals: 1
    }
}] 
```

[**演示**](http://jsfiddle.net/bru6M/)

*参考*：

*   [Highcharts 工具提示](http://api.highcharts.com/highstock#plotOptions.series.tooltip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T12:50:28.853

可以使用共享工具提示并设置前缀、后缀等。您只需要考虑措辞。而不是使用 yprefix 等，而是使用 valuePrefix

您为数据中的每个系列设置它

```
series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
        type: 'column'

    }, {
        data: [216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5],
        tooltip: {
    valuePrefix: ' USD'
}}], 
```

你可以在这里看到一个[小提琴](http://jsfiddle.net/noelnoegdip/8x4HM/)显示它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-28T15:15:33.977

您可以为图表的工具提示指定自定义格式化程序，然后在系列工具提示中指定值后缀和任何其他选项，然后在图表的工具提示格式化程序函数中引用这些选项。例如：

```
$('XXXX').highcharts({
	...
	tooltip: {
                formatter: function() {
                    var text = "";
                    $.each(this.points, function(index) {
                        text += '<br/><b>' + this.series.name + ":</b> "+ this.y+" "+this.series.tooltipOptions.valueSuffix;
                    });
                    return text;
                },
                shared: true
            },
	...
});

...

chart.addSeries({
            ...
            tooltip: {
                valueSuffix: ' '+seriesUnit,
                valueDecimals:2
            },
            ...
        });
```

# haskell - 功能超出范围

> ID：15511472
> 
> 赞同：1
> 
> 时间：2013-03-19T22:09:14.773
> 
> 标签：haskell, web, messages, yesod

我怀疑为什么会发生这种情况。我一直在关注“Yesod Web”电子书，但有一个脚手架网站。当我到达想要在“消息”文件中应用“复数”功能的位置时，编译器返回此错误：

Foundation.hs:52:1：不在范围内：“复数”

在与我称之为“小村庄”的文件相同的 hs 文件中声明复数的地方。但是，如果我将函数声明移到“Foundation.hs”文件中的第 52 行之前，那么错误就会消失，它让我可以有效地编译它。为什么会这样？？

```
module Handler.UserProfile where

import Import
import Data.Maybe (fromMaybe)
import Data.Text (pack, unpack)

viewCountName :: Text
viewCountName = "UserProfileViews"

readInt :: String -> Int
readInt = read

plural :: Int -> String -> String -> String
plural 1 x _ = x
plural _ _ y = y

getUserProfileR :: Handler RepHtml
getUserProfileR = do

    viewCount <- lookupSession viewCountName
                >>= return . (1 +) . readInt . unpack . fromMaybe "0"
    setSession viewCountName (pack $ show viewCount)

    maid <- maybeAuth
    --msg <- getMessageRender
    let user = case maid of
                    Nothing -> "(Unknown User ID)" --show MsgHello --
                    Just (Entity _ u) -> userEmail u
    defaultLayout $ do
        setTitleI MsgUserProfile
        $(widgetFile "nhUserProfile") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:26:44.923

查看 GHC 用户手册：[http ://www.haskell.org/ghc/docs/7.4.2/html/users_guide/template-haskell.html#id684916](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/template-haskell.html#id684916)

第二个要点描述了比赛中的分期限制：

> 如果函数是从另一个模块导入的，则只能在编译时运行该函数。也就是说，您不能在模块中定义函数，并从同一模块的拼接中调用它。（这样做是有道理的，但很难实现。）

# php - 如何在 PHP 中对数据集进行排序？

> ID：15511474
> 
> 赞同：0
> 
> 时间：2013-03-19T22:09:24.117
> 
> 标签：php, mysql, sorting, multidimensional-array

我正在使用 PDO 连接到数据库中的表。所以我写了一个快速函数来返回从数据表返回的结果。是的，我可以在我的查询中使用 SORT BY 对结果进行排序，但我想在这个查询中避免这种情况，因为这个查询会为一个大表提取信息。

***首先我需要能够在用户端对这个数据集进行排序。所以我需要以某种方式按不同的列排序，以便我可以按列“fullName”排序或按“userID”或“createdDate”排序

所以当 PDO 获取结果并返回我想要对它们进行排序的数组时。

***第二个问题，在这个函数中我在哪里做一个免费的结果，或者我在查询之外释放它们？

```
function getDataSet($query, $connection){

    $cmd = $connection->query( $query );
    return $cmd->fetchAll();  //PDO::FETCH_ASSOC

} 
```

然后我可以通过简单地调用这个函数

```
$dataset = getDataSet("select * from users", $db) 
```

在我的第一个问题中，我想对 $dataset 进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:39:18.170

我不同意您在 SQL 语句中不使用“ORDER BY”的观点。但无论如何，你可以试试这个：

```
$tmp_dataset = array();
foreach($dataset as $data)
{
    $tmp_dataset[ $data['name_of_column'] ] = $data;
}

$dataset = $tmp_dataset;

ksort($dataset); 
```

# c# - 访问修饰符 C# - 内部修饰符

> ID：15511478
> 
> 赞同：0
> 
> 时间：2013-03-19T22:09:43.987
> 
> 标签：c#, oop

从 MSDN ，内部：访问仅限于当前程序集。

所以如果我有单个项目 winform1 ，使用 internal 修饰符是否意味着访问我项目中的任何类？

我的意思是在单个项目中，当前项目上下文和当前程序集的含义相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:11:03.433

> 在单个项目中，当前项目上下文和当前程序集的含义是否相同？

是的。

只要你真的只有1个项目，`internal`而且`public`都是一样的。但是请意识到，在任何重要的项目中，您迟早会想要细分为多个程序集。因此，您不妨为此做好准备并正确使用这些修饰符。这意味着（几乎）每堂课`internal`。这是默认设置是有原因的。

# assembly - x64 指令编码和 ModRM 字节

> ID：15511482
> 
> 赞同：13
> 
> 时间：2013-03-19T22:10:13.797
> 
> 标签：assembly, x86, x86-64, machine-code, opcode

的编码

```
call qword ptr [rax]
call qword ptr [rcx] 
```

是

```
FF 10
FF 11 
```

我可以看到最后一个数字 (0/1) 的来源（寄存器号），但我试图找出倒数第二个数字 (1) 的来源。根据*AMD64 Architecture Programmer's Manual Volume 3: General-Purpose and System Instructions* page 56，

"/digit - 表示 ModRM 字节仅指定一个寄存器或内存 (r/m) 操作数。该数字由 ModRM reg 字段指定，用作指令操作码扩展。有效数字值范围为 0 到 7。 "

等效的英特尔文档说类似的内容，并`call`通过寄存器指定编码为

```
FF /2 
```

并且...我不知道这意味着什么，也不知道规范中的 2 如何连接到最终结果中的高 1 位。在任何地方都有不同措辞的解释吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T22:28:49.537

ModR/M 字节有 3 个字段：

```
bit 7 & bit 6 = mod
bit 5 through bit 3 = reg = /digit
bit 2 through bit 0 = r/m 
```

这在`Figure 2-1\. Intel 64 and IA-32 Architectures Instruction Format`卷中有所描述。2A 的`Intel® 64 and IA-32 Architectures Software Developer’s Manual`。

所以，那里：

  `0x10`= `00.010.000`(mod=0, `reg/digit=2`, `r/m=0`)

和

  `0x11`= `00.010.001`(mod=0, `reg/digit=2`, `r/m=1`)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T22:25:38.643

我想您想查看[英特尔® 64 和 IA-32 架构开发人员手册中的表 2-2：组合卷](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-manual-325462.html)、卷 2：指令参考集、第 2 章：指令格式、2.1.5 ModR/M 的寻址模式编码和SIB 字节：

```
表 2-2。带有 ModR/M 字节的 32 位寻址形式

r8(/r) AL CL DL BL AH CH DH BH
r16(/r) AX CX DX BX SP BP SI DI
r32(/r) EAX ECX EDX EBX ESP EBP ESI EDI
毫米(/r) MM0 MM1 MM2 MM3 MM4 MM5 MM6 MM7
xmm(/r) XMM0 XMM1 XMM2 XMM3 XMM4 XMM5 XMM6 XMM7
(十进制) /digit (操作码) 0 1 2 3 4 5 6 7
（二进制） REG = 000 001 010 011 100 101 110 111
ModR/M 字节的有效地址 Mod R/M 值（十六进制）
[EAX] 00 000 00 08 10 18 20 28 30 38
[ECX] 001 01 09 11 19 21 29 31 39
[EDX] 010 02 0A 12 1A 22 2A 32 3A
[EBX] 011 03 0B 13 1B 23 2B 33 3B
[--][--] *1 100 04 0C 14 1C 24 2C 34 3C
显示32 *2 101 05 0D 15 1D 25 2D 35 3D
[ESI] 110 06 0E 16 1E 26 2E 36 3E
[EDI] 111 07 0F 17 1F 27 2F 37 3F
[EAX]+disp8 *3 01 000 40 48 50 58 60 68 70 78
[ECX]+disp8 001 41 49 51 59 61 69 71 79
[EDX]+disp8 010 42 4A 52 5A 62 6A 72 7A
[EBX]+disp8 011 43 4B 53 5B 63 6B 73 7B
[--][--]+disp8 100 44 4C 54 5C 64 6C 74 7C
[EBP]+disp8 101 45 4D 55 5D 65 6D 75 7D
[ESI]+disp8 110 46 4E 56 5E 66 6E 76 7E
[EDI]+disp8 111 47 4F 57 5F 67 6F 77 7F
[EAX]+disp32 10 000 80 88 90 98 A0 A8 B0 B8
[ECX]+disp32 001 81 89 91 99 A1 A9 B1 B9
[EDX]+disp32 010 82 8A 92 9A A2 AA B2 BA
[EBX]+disp32 011 83 8B 93 9B A3 AB B3 BB
[--][--]+disp32 100 84 8C 94 9C A4 AC B4 BC
[EBP]+disp32 101 85 8D 95 9D A5 AD B5 BD
[ESI]+disp32 110 86 8E 96 9E A6 AE B6 BE
[EDI]+disp32 111 87 8F 97 9F A7 AF B7 BF
EAX/AX/AL/MM0/XMM0 11 000 C0 C8 D0 D8 E0 E8 F0 F8
ECX/CX/CL/MM/XMM1 001 C1 C9 D1 D9 E1 E9 F1 F9
EDX/DX/DL/MM2/XMM2 010 C2 CA D2 DA E2 EA F2 FA
EBX/BX/BL/MM3/XMM3 011 C3 CB D3 DB E3 EB F3 FB
ESP/SP/AH/MM4/XMM4 100 C4 CC D4 DC E4 EC F4 FC
EBP/BP/CH/MM5/XMM5 101 C5 CD D5 DD E5 ED F5 FD
ESI/SI/DH/MM6/XMM6 110 C6 CE D6 DE E6 EE F6 FE
EDI/DI/BH/MM7/XMM7 111 C7 CF D7 DF E7 EF F7 FF
笔记：
1\. [--][--] 命名法表示 SIB 在 ModR/M 字节之后。
2\. disp32 命名法表示在 ModR/M 字节（或 SIB
字节（如果存在））并将其添加到索引中。
3\. disp8 命名法表示在 ModR/M 字节（或 SIB
字节（如果存在））并且符号扩展并添加到索引中。

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-01-29T07:15:12.667

`/2`英特尔文档第 2A 卷中表 2-2 中的平均值查找（表和卷中的 2 与`/2`那里没有关系）。在左上角的那个表中有`/digit`. 因此，转到右侧的列并找到`/2`. 我们会回到那个。

现在，如果您查看[`call`](https://www.felixcloutier.com/x86/call)指令定义，您将看到`Op/En`“操作数编码”。

```
Op/En       Operand 1       Operand 2       Operand 3       Operand 4
D           Offset          NA              NA              NA
M           ModRM:r/m (r)   NA              NA              NA 
```

还要注意`call`第一个表中的签名，例如这个，它是 64 位对应的`rax`用法：

```
Opcode    Instruction   Op/En
FF /2     CALL r/m64    M 
```

这`M`告诉我们`M`在下面的“操作数编码”（Op/En）表中查找，即：

```
Op/En       Operand 1       Operand 2     Operand 3       Operand 4
M           ModRM:r/m (r)   NA            NA              NA 
```

所以操作数 1 是`ModRM:r/m (r)`。这`(r)`意味着*读取*（不写入）操作数。ModRM:r/m 表示操作数有一个 ModRM 字节，带有一个 r/m 值。`r`in表示“`r/m`寄存器”，`m`表示“内存”。

所以回到`/2`表 2-2 中的列，我们有`010`，就在说 的那一行`REG`。这是指 ModRM 中间“reg”段。

据此，[我们](http://www.c-jump.com/CIS77/CPU/x86/X77_0060_mod_reg_r_m_byte.htm)有：

```
mod     description (relevant to us)
00      register indirect addressing mode
01      one-byte signed displacement follows addressing mode byte(s)
10      four-byte signed displacement follows addressing mode byte(s)
11      register addressing mode 
```

由于我们使用`[rax]`的是寄存器*间接*寻址方式，所以`00`。

所以我们有了 mod 和 reg，现在我们需要 r/m 来完成 ModRM 字节。

从网络上的[其他地方](https://wiki.osdev.org/X86-64_Instruction_Encoding#ModR.2FM)：*r/m 字段编码使用哪个寄存器*。如果我们回到表 2-2 和该列，并将其与左侧`/2`的 Mod 框匹配，并且我们使用该行（与您在 中使用的相同），我们将在. 同样，如果我们按照行（与您的相同），我们得到. 这给了我们：`00``EAX``RAX``call [rax]``10``ECX``RCX``call [rcx]``11`

```
FF 10       call [rax]
FF 11       call [rcx] 
```

请注意，该表也显示了 r/m 值：`000`for`rax`和`001`for `rcx`。这给了我们最终的 ModRM 字节。

```
ModRM         for        hex
00.010.000    rax        10
00.010.001    rcx        11 
```

还要注意，如果你这样做`call [eax]`，它的前缀`67`是十六进制：

```
67 FF 01 
```

这对应于“地址大小覆盖前缀”。

# fluent-security - 针对授权过滤器的执行顺序

> ID：15511483
> 
> 赞同：1
> 
> 时间：2013-03-19T22:10:15.140
> 
> 标签：fluent-security

使用 Fluent Security，我已经使用 DenyAnonymousAccess、DenyAuthenticationAccess 和 RequireRole 配置了网站访问。但是，由于`HandleSecurityAttribute`不是授权过滤器，所有要处理的逻辑都`DenyAnonymousAccessPolicyViolation`只能在授权过滤器之后执行，例如`ValidateAntiForgeryToken`.

这意味着如果当前用户的身份验证票证超时，则任何修饰的操作`ValidateAntiForgeryToken`都会抛出异常，因为令牌不是为匿名用户创建的。

那么有没有办法解决这个问题？我目前正在研究两种解决方案：

1.  创建我自己的授权过滤器以执行`HandleSecurityAttribute`安全性的确切功能。
2.  使用全局`Authorize`文件管理器处理身份验证并将角色/其他访问策略留给 FluentSecurity。

**更新：**

我在 github 上查看了一个演示，它的用户名和密码是 dev1 和 devdev。我将超时表单身份验证设置为 1 分钟。因此，如果您登录并等待一分钟，然后单击注销，您将获得未为匿名用户创建的令牌。在普通的 MVC 中，这不会发生，因为 [Authorize] 在 [ValidateAntiForgeryToken] 之前运行，这会将用户重定向回登录屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:48:14.760

我对此没有任何问题。确保将**HandleSecurityAttribute**放在过滤器列表的首位！

```
GlobalFilters.Filters.Add(new HandleSecurityAttribute(), 0); 
```

# maven - mvn release:perform 创建多个临时存储库

> ID：15511484
> 
> 赞同：1
> 
> 时间：2013-03-19T22:10:17.433
> 
> 标签：maven

我有一个使用 maven 的项目，我正在尝试部署到 sonatype OSS 存储库。当我执行 mvn release:perform 时，会创建 5 个不同的暂存存储库，而不仅仅是一个。各种文件分布在这些不同的存储库中，因此我无法成功部署。

maven 是否有理由拆分我的版本？

该项目连同我的 pom 文件在这里： [https ://github.com/Uncodin/bypass/tree/master/platform/android](https://github.com/Uncodin/bypass/tree/master/platform/android)

![sonatype回购](../Images/4b1396370771e882ed7ddaf4e5ce75cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:13:26.040

事实证明，每个临时存储库都认为它是从不同的 IP 地址部署的。这可能发生在浮动 IP 地址代理出站请求的企业环境中。

[https://issues.sonatype.org/browse/OSSRH-5454?focusedCommentId=180666&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-180666](https://issues.sonatype.org/browse/OSSRH-5454?focusedCommentId=180666&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-180666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:27:57.867

您正在使用的父级（[https://oss.sonatype.org/service/local/repositories/central/content/org/sonatype/oss/oss-parent/7/oss-parent-7.pom](https://oss.sonatype.org/service/local/repositories/central/content/org/sonatype/oss/oss-parent/7/oss-parent-7.pom)）并没有真正给出提示出了什么问题。只配置了一个发布仓库：[https ://oss.sonatype.org/service/local/staging/deploy/maven2/](https://oss.sonatype.org/service/local/staging/deploy/maven2/)

这可能是由 Nexus 代理内部的某些配置引起的吗？而不是你的Maven结构？

# c# - 如何从 JavaScript / C# 生成宽度 CSS

> ID：15511489
> 
> 赞同：1
> 
> 时间：2013-03-19T22:10:32.460
> 
> 标签：c#, javascript, asp.net, html, css

在过去的几天里，我一直试图让我的 C# 变量值通过 JavaScript 与我的 HTML 代码进行通信，现在我有了这个 HTML 代码，我想在页面加载时通过 C# 中的值进行更改。在页面加载时，我想通过 JavaScript 从我的 c# 变量值中设置 SPAN 的 css 宽度值。

progressBarPercentage SPAN 是我想要设置 CSS 宽度的那个，因为这就是我的 jQuery 进度条想要的值。宽度将是一个百分比，因此这本身就可以工作：

```
<span id="progressBarPercentage" style="width: 40%"></span> 
```

但这就是我想要做的：

**HTML**

```
 <div id="progressBarArea" class="progress-bar orange stripes">
        <asp:Label ID="progressBarText" runat="server" Visible="true" Text="49%" CssClass="progressBarText"></asp:Label>
        <span id="progressBarPercentage" onload="setProgressBarPercentage()"></span>
        <p class="align-center">Points Until Next Level: <asp:Label id="pointsUntilNextLevelLabel" runat="server" Text="0" CssClass="pointsUntilNextLevelLabel"></asp:Label></p>
    </div> 
```

**C＃**

```
 protected double percentageLevelComplete { get; set; } 
```

**JavaScript**

```
<script type="text/javascript">
    function setProgressBarPercentage(){
        var element = document.getElementById("progressBarPercentage");
        element.style.width = <%=percentageLevelComplete%> + "%";
    }
</script> 
```

我正在做的事情是正确的吗？如果是这样，我做错了什么，因为目前这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:24:36.743

您可以使用此代码（不带 javasript）：

```
<div id="progressBarArea" class="progress-bar orange stripes">
        <asp:Label ID="progressBarText" runat="server" Visible="true" Text="49%" CssClass="progressBarText"></asp:Label>
        <span id="progressBarPercentage" style="width:<%=percentageLevelComplete %>%"></span>
        <p class="align-center">Points Until Next Level: <asp:Label id="pointsUntilNextLevelLabel" runat="server" Text="0" CssClass="pointsUntilNextLevelLabel"></asp:Label></p>
    </div> 
```

# eclipse - 如何使用 Eclipse 调试由 sbt 驱动的测试？

> ID：15511495
> 
> 赞同：8
> 
> 时间：2013-03-19T22:10:48.837
> 
> 标签：eclipse, scala, sbt, scala-ide

我有一组要调试的测试用例（逐步，读取值等）。如何设置我的`sbt`构建以便连接 Eclipse 调试器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:58:29.810

我找到了一种附加 Eclipse 调试器的方法。在`Build.scala`项目设置中，我添加了以下选项：

```
//required for the javaOptions to be passed in
fork := true

javaOptions in (Test) += "-Xdebug"

javaOptions in (Test) += "-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005" 
```

然后在 Eclipse 中，我可以创建一个新`Debug configuration`的（错误图标旁边的箭头）类型`Remote Java Application`。在那里我可以选择`Scala debugger (Socket Attach)`并指定端口`5005`。

我现在遇到的问题是我无法设置任何断点，但这是另一个问题，可能与我使用的 Scala IDE 版本有关。

## 编辑

设置断点的问题（很可能）与我的 specs2 规范中的奇异结构有关。我用一个方法创建了一个小对象，以便能够设置断点

```
object BreakPoint { 
  def set = {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:49:19.853

使用`Scala debugger`通过远程连接器工作。

但是，如果您想避免在 and 之间来回切换`sbt`，`Eclipse`您可以`Scala IDE`使用[sbteclipse](https://github.com/typesafehub/sbteclipse)加载您的项目，然后使用[JUnit 启动器](http://scala-ide.org/docs/current-user-doc/testingframeworks/index.html#specs)`Scala IDE`在调试模式下从内部运行您的 specs2 测试。

# meteor - 在 Meteor 中，this.error 和 throw new Meteor.Error in Meteor.publish 有什么区别？

> ID：15511497
> 
> 赞同：5
> 
> 时间：2013-03-19T22:10:49.520
> 
> 标签：meteor

在中，使用和简单地抛出一个有什么`Meteor.publish`区别？`this.error``Meteor.Error`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T22:18:20.557

`this.error`仅在发布方法中可用。根据[文档](http://docs.meteor.com/#publish_error)：

> 停止此客户端的订阅，在客户端上触发对`onError`传递给 的回调`Meteor.subscribe`（如果有）的调用。如果 error 不是 a `Meteor.Error`，它将被映射到`Meteor.Error(500, "Internal server error")`。

抛出 a`Meteor.Error`不会停止客户端的订阅，它只会终止执行并引发异常。因此，如果您想确保 Meteor 会在您之后进行清理，并允许您在发生意外情况时在客户端处理错误，建议使用`this.error`而不是将您自己的东西扔到 publish 方法中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T22:34:16.643

看来他们是一样的。在源代码中：

```
try {
  var res = self._handler.apply(self, EJSON.clone(self._params));
} catch (e) {
  self.error(e);
  return;
} 
```

因此，如果抛出异常，`error`无论如何都会调用。`error`也停止订阅。

# python - 有效地减少一个大的 np.array

> ID：15511499
> 
> 赞同：0
> 
> 时间：2013-03-19T22:10:58.053
> 
> 标签：python, arrays, numpy

我需要减少类型的非零数组：

```
a = np.zeros([10**4,10**4]) 
```

以类型的简单约束为条件的较少数量的维度（列）：

```
a[column_index].sum() > threshold 
```

我可以通过迭代和调用 .delete 轻松做到这一点，但我实际上正在寻找更有效的东西（因为数组很大）。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:22:43.923

沿轴 0 求和以获得所有列的总和，然后创建一个布尔数组来选择列：

```
import numpy as np

a = np.random.randint(0, 100, [100,100])
b = a[:, a.sum(axis=0) > 5000]
print b.sum(axis=0) 
```

输出：

```
array([5359, 5045, 5116, 5512, 5143, 5261, 5209, 5018, 5009, 5025, 5353,
       5149, 5407, 5258, 5148, 5527, 5176, 5173, 5028, 5110, 5406, 5211,
       5287, 5163, 5364, 5623, 5257, 5361, 5528, 5049, 5298, 5280, 5201,
       5099, 5314, 5071, 5318, 5076, 5005, 5032, 5194, 5411, 5329, 5293]) 
```

# node.js - 找不到节点gyp

> ID：15511500
> 
> 赞同：4
> 
> 时间：2013-03-19T22:10:58.193
> 
> 标签：node.js, installation, npm, homebrew, node-gyp

我用自制软件安装了节点 v0.8.22。我有我的节点二进制文件，`/usr/local/bin/`但我需要重新编译一个节点插件，`node-gyp`但它似乎无法在我的`PATH`. 我试过跑步`npm install -g node-gyp`，但它仍然不在我的路上。

我注意到 npm -g 将所有内容安装到`/usr/local/share/npm/bin/`. 这是否意味着我需要将其添加到我的`PATH`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:57:44.923

> 我注意到 npm -g 将所有内容安装到 /usr/local/share/npm/bin/ 中。这是否意味着我需要将其添加到我的 PATH 中？

是的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:05:49.280

正如 j_mcnally 建议的那样，您应该尝试添加`/usr/local/share/npm/bin/`到您的路径中。这里应该有一个符号链接`node-gyp`，它*应该可以*解决您的问题。

# regex - 在第 n 次出现后查找值 - 使用 RegEx

> ID：15511502
> 
> 赞同：0
> 
> 时间：2013-03-19T22:11:05.273
> 
> 标签：regex

这个表达

```
[A-Z]+(?=-\d+$) 
```

从以下字符串中找到 SS 和 BCP

```
ANG-B31-OPS-PMR-MACE-SS-0229

ANG-RGN-SOR-BCP-0004 
```

我想要做的是找到第三个“-”之后的值，这是第一个字符串中的 PMR 和第二个字符串中的 BCP

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:21:49.707

简单`String.Split`呢？

```
string input = "ANG-B31-OPS-PMR-MACE-SS-0229";
string value = input.Split('-')[3]; // PMR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:24:43.950

如果您有选项，找到第三个“-”并获取输入的子字符串会更简单。请参见[第 n 个索引](https://stackoverflow.com/a/187394/39013)。

```
var input = "ANG-B31-OPS-PMR-MACE-SS-0229";
input = input.Substring(input.NthIndexOf("-", 3) + 1, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:27:55.917

lookbehind 和 lookahead 将从匹配中排除 pre 和 post 部分

```
string mus = "ANG-B31-OPS-PMR-MACE-SS-0229";

string pat = @"(?<=([^-]*-){3}).+?(?=-)";
MatchCollection mc = Regex.Matches(mus, pat, RegexOptions.Singleline);
foreach (Match m in mc)
{
    Console.WriteLine(m.Value);
} 
```

# assembly - 修改时钟中断处理程序xinu

> ID：15511507
> 
> 赞同：1
> 
> 时间：2013-03-19T22:11:17.593
> 
> 标签：assembly, operating-system, x86, interrupt

我今晚有一个操作系统项目，需要澄清一个主题。我们正在使用操作系统 XINU。我正在尝试更改默认操作系统调度程序以解决某些进程被饿死的问题。我被引导到 clkint.S 文件，我认为它是时钟中断处理程序。我的问题是，我怎么知道它中断的频率？如何设置时间让我们说每 5 秒调用一次函数？我查看了 intel x86 手册，但他们有大量的信息需要筛选，而且我的时间很短如果有人能指出我正确的方向，我将不胜感激。

以下是我认为必要的几个文件：

```
clkint.S:

    /* clkint.s - _clkint */

#include <icu.s>
        .text
count1000:  .word   1000
        .globl  sltop
        .globl  clkint
clkint:
        pushal
        cli
        movb    $EOI,%al
        outb    %al,$OCW1_2

        incl    ctr1000
        subw    $1,count1000
        ja  cl1
        incl    clktime
        movw    $1000,count1000
cl1:
        cmpl    $0,slnonempty   # if no sleeping processes,
        je  clpreem     #   skip to preemption check
        movl    sltop,%eax  # decrement key of first
        decl    (%eax)      #   sleeping process
        jg  clpreem     # must use jg for signed int
        call    wakeup      # if zero, call wakeup
clpreem:    decl    preempt     # decrement preemption counter
        jg  clret       # must use jg for signed int
        call    resched     # if preemption, call resched
clret:                  # return from interrupt
        sti
        popal
        iret 
```

clkinit.c:

```
/* clkinit.c - clkinit */

#include <xinu.h>
#include <interrupt.h>
#include <clock.h>

uint32  clktime;        /* seconds since boot           */
uint32  ctr1000 = 0;        /* milliseconds since boot      */
qid16   sleepq;         /* queue of sleeping processes      */
int32   slnempty;       /* zero if the sleep queue is empty;    */
                /*   non-zero otherwise         */
int32   *sltop;         /* ptr to key in first entry of sleepq  */
                /*   if sleepq is not empty     */
uint32  preempt;        /* preemption counter           */

/*------------------------------------------------------------------------
 * clkinit - initialize the clock and sleep queue at startup
 *------------------------------------------------------------------------
 */
void    clkinit(void)
{
    uint16  intv;           /* clock rate in KHz        */

    /* Set interrupt vector for clock to invoke clkint */

    set_evec(IRQBASE, (uint32)clkint);

    /* clock rate is 1.190 Mhz; this is 10ms interrupt rate */
    intv = 1190;

    sleepq = newqueue();    /* allocate a queue to hold the delta   */
                /* list of sleeping processes       */
    preempt = QUANTUM;  /* initial time quantum         */

    /* Specify that seepq is initially empty */

    slnonempty = FALSE;

    clktime = 0;        /* start counting seconds       */

    /*  set to: timer 0, 16-bit counter, rate generator mode,
        counter is binary */
    outb(CLKCNTL, 0x34);

    /* must write LSB first, then MSB */
    outb(CLOCK0, (char)intv);
    outb(CLOCK0, intv>>8);
    return;
} 
```

clkhandler.c:

```
/* clkhandler.c - clkhandler */

#include <xinu.h>

/*------------------------------------------------------------------------
 *  clkhandler - handle clock interrupt and process preemption events
 *          as well as awakening sleeping processes
 *------------------------------------------------------------------------
 */
interrupt clkhandler(void)
{
    clkupdate(CLKCYCS_PER_TICK);

    /* record clock ticks */

    clkticks++;

    /* update global counter for seconds */

    if (clkticks == CLKTICKS_PER_SEC) {
        clktime++;
        clkticks = 0;
    }

    /* If sleep queue is nonempty, decrement first key; when the    */
    /* key reaches zero, awaken a sleeping process          */

    if (nonempty(sleepq) && (--firstkey(sleepq) <= 0)) {
        wakeup();
    }

    /* Check to see if this proc should be preempted */

    if (--preempt <= 0) {
        preempt = QUANTUM;
        resched();
    }
    return;
} 
```

我可以自己添加所有的饥饿功能，我只需要弄清楚如何让 clkint.s 处理程序调用我的函数让每 5 秒说一次...我不明白时钟是如何工作的或组装完全。我不是要求有人给我一个解决方案，我只是需要一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:15:40.203

`intv`是用于调度（至少在此代码中）的中断计时器的时间切片粒度（以 Khz 为单位）。每 5 秒听起来很慢，并且可能使您的系统几乎没有响应，请尝试以毫秒为单位。

要计算新的间隔，您需要更改此值并对频率进行一些数学运算。您可能可以从完成的计算中算出这一步，`intv`以获得 10 毫秒。

`0x40`在 x86 中，可以通过使用`outb`汇编指令将 KHz 的定时器中断值写入端口来建立定时器值。如代码所示，您必须先写入最低有效字节，然后再写入最高有效字节（`outb`一次写入一个字节）。要启用定时器，您必须写入`0x36`同一端口，并且必须将 IRQ 处理程序绑定到 IRQ0 才能接收中断。我尝试为您压缩信息，但这是特定于 x86 的。

# jquery - 如何在同一内容框上使用 2 列垂直选项卡？

> ID：15511511
> 
> 赞同：-1
> 
> 时间：2013-03-19T22:11:28.583
> 
> 标签：jquery, html, css

如何创建一个与第一列相同的新列，并让它在右侧显示一列？

我希望新列具有与第一列相同的属性，因为我想向此选项卡添加更多内容，并且仅在 1 列上它们很难看。

这是我尝试过的：http: [//jsfiddle.net/26zQS/6/](http://jsfiddle.net/26zQS/6/)

```
<div class="verticalslider" id="textExample">
            <ul class="verticalslider_tabs">
                <li><a href="#">Catedra de Limba si Literatura Romana</a></li>
                <li><a href="#">Catedra de Matematica</a></li>
                <li><a href="#">Catedra de Informatica</a></li>
                <li><a href="#">Limba engleza</a></li>  
                <li><a href="#">Limba Germana</a></li>
            </ul>
            <ul class="verticalslider_contents">
                <li>
                <h2>Catedra de Limba si Literatura Romana</h2></br>
                <p id="profesor">
                Popa Alina </br>
                Nadia Pascu</br>
                </p>
                </li>

                <li>
                    <h2>Catedra de Matematica</h2></br>
                    <p id="profesor">
                    Ciubotariu Boer-Vlad </br>
                    Diaconu Ilie</br>
                    Gorcea Violin </br>
                    </p>
                </li>

<li>
                <h2>informatica</h2>
                    <p id="profesor">
                    Wainblat Gabriela</br>
                    Nistor Ancuta</br>
                </li>

                <li>
                <h2>Limba Engleza</h2>
                    <p id="profesor">
                    Wainblat Gabriela</br>
                    Nistor Ancuta</br>
                </li>

                <li>
                <h2>Germana</h2>
                    <p id="profesor">
                    Wainblat Gabriela</br>
                    Nistor Ancuta</br>
                </li>

        </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:52:09.953

您可以`clone()`在 jquery 中使用该函数和`appendTo()`

这是一个小提琴。

[http://jsfiddle.net/btevfik/3ru6B/](http://jsfiddle.net/btevfik/3ru6B/)

# android - 如何防止 TextToSpeech 在旋转期间停止

> ID：15511513
> 
> 赞同：2
> 
> 时间：2013-03-19T22:11:42.917
> 
> 标签：android, text-to-speech

我的应用正在实施运行良好的文本转语音。但是当我转动手机时，听写会自动停止。

你必须知道我对横向/纵向模式使用了两种不同的布局。

我应该如何处理屏幕旋转？1) 使用`android:configChanges="orientation|screenSize"`// 我认为这不是最好的方法 2) 使用其他方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-31T21:45:45.587

有几个步骤可以使 TTS 继续进行轮换工作，而无需处理应用程序中的配置更改。这些步骤包括：

*   将 TTS 变量设为静态

    `private static TextToSpeech tts;`

*   只初始化一次，如果它为空

    `if (tts == null) { ... }`

*   使用应用程序上下文初始化 TTS 对象

    `tts = new TextToSpeech(getApplicationContext(), this);`

这是我的实验应用程序的快照，其中包含这些元素[http://code.google.com/p/android-tts-experiments/source/detail?r=b879fd1042151cbebc736b89a9fb660c895081ea](http://code.google.com/p/android-tts-experiments/source/detail?r=b879fd1042151cbebc736b89a9fb660c895081ea)我已经设法在各种 android 设备和 android 版本上对其进行了测试. 有时，TTS 似乎在我较旧、功能较弱的设备上轮换时稍有犹豫，但它会继续说出它要说的文本，并且排队的消息会保留在队列中，一旦当前文本被 TTS 引擎完全说出，它就会说出.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:35:10.720

你基本上有2个选择：

1）自己处理方向变化。通常这很容易。你只需要实现`onConfigurationChange()`，在那里你可以通过调用来重建布局`setContentView()`。请注意，这将重新创建您的所有 UI 视图，因此您必须`findViewById()`再次调用并重置 onClickListeners 以获取您需要跟踪的所有视图。

2) 确保 TTS 实例不会因方向更改而关闭。您可以通过将 TTS 实例从一个活动实例传递到下一个活动实例来执行此操作，或者在静态变量中跟踪 TTS 实例（如果这样做，您需要确保`shutdown()`在适当的时间调用它，不在`onDestroy()`您的活动范围内。

# c# - 在 Mono 2.10 中使用表值参数 (SqlDbType.Structured)

> ID：15511515
> 
> 赞同：5
> 
> 时间：2013-03-19T22:11:47.460
> 
> 标签：c#, ado.net, mono, table-valued-parameters

使用 Mono 时，如果有的话，我如何将表值参数传递到查询中？（我目前使用的是 2.10.12 版本）

似乎 Mono 中的 SqlDbType 枚举没有被扩展以匹配微软的枚举实现，也没有更新 SqlParameter 类以包含 TypeName 属性。

我的背景和我的问题：

*   我对[表值参数非常熟悉](http://blog.castingnetworksinc.com/2012/02/table-valued-parameters/)
*   我已经广泛搜索了这个
*   我尝试在 irc.gnome.org 的 #mono 频道中与其他人联系

非常感谢您对这个问题的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:57:25.403

我正在尝试做同样的事情。在我们的例子中，不需要设置 TypeName 来让查询在 MS .Net 上工作，从而消除了 Mono 错误。

现在我收到以下错误：

`System.ArgumentOutOfRangeException: No mapping exists from SqlDbType Structured to a known DbType`

我从 Mono 3.0 库中反编译了 System.Data.dll，它创建的映射不包含 SqlDbType.Structured 的映射。Mono 库中 SqlDbType 的枚举确实具有结构化枚举。

据我所知，Mono 不支持将 UDT/表值参数传递给 sql 查询。我们仍在寻找解决此问题的方法，但我不抱太大希望。在网上搜索 UDT 和 mono 几乎没有结果。

# jquery - 如何使用此 jquery 代码显示我的隐藏 div？

> ID：15511517
> 
> 赞同：0
> 
> 时间：2013-03-19T22:11:47.850
> 
> 标签：jquery, css, html, hide, show

我有一个 jquery 代码来显示一个 div 并在同一页面上动态隐藏其余部分。我遇到了一个小问题，当我只尝试直接（通过 url）访问登录页面 index.php#login 时，我会发送回主页 index.php#home

发生这种情况是因为登录被设置为隐藏。那么无论如何我可以解决这个问题吗？

```
 $('#w').live('click', function(){

        $('#b').css('display','none');
        $('#a').css('display','block');
    });

    $('#x').live('click', function(){
        $('#a').css('display','none');
        $('#b').css('display','block');
    });

<li><a href="#home" id=w>Home</a></li>
<li><a href="#login" id=x>Login</a></li>

<div id=b style="display:none;">

// Login

</div>

<div id=a>

// Main content

</div> 
```

Ps：对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:19:43.327

我认为您可以执行以下操作：

```
$(document).ready(function() {

  // set all event binding
  $('body').on('click', 'a[href="#home"], a[href="#login"]', function() {
       $('#a, #b').toggle(0);
  });

  // try to fire appropriate event using hash value

  var hash = window.location.hash; // return:  #home  OR #login
  $('a[href="'+ hash +'"]').click();

}); 
```

也许你可以从***[这里](https://stackoverflow.com/questions/680785/on-window-location-hash-change)得到更多。***

### 笔记

但不确定，为什么需要`live`事件。`live`事件需要将事件绑定到动态加载的内容，即。页面加载后附加到 DOM 的元素。

如果您确实需要实时委托事件，那么不推荐使用该原因而不是`live`使用该事件，并尝试使用 jQuery 最新版本。[*`.on()`*](http://api.jquery.com/on/)`live`

如果您认为不需要，请`live`简化事件处理程序，例如：

```
$('a[href="#home"], a[href="#login"]').on('click', function() {
    $('#a, #b').toggle(0);
}); 
```

# python - 从 Django Templatetags 中的 RSS 提要返回项目

> ID：15511525
> 
> 赞同：0
> 
> 时间：2013-03-19T22:12:06.587
> 
> 标签：python, django, django-templates

Django 菜鸟在这里。

我正在尝试使用 templatetags（带有 classytags）将 RSS 提要项添加到 django 模板中。

这是我的代码：

```
from django import template
from classytags.core import Tag
import feedparser

register = template.Library()

class ExampleTag(Tag):
name = 'exampletag'
    def render_tag(self, context):
        raw_feed = "example.com/feed.rss"

        feed = feedparser.parse(raw_feed)
        entrylist = {}

        for entry in feed.entries:
            entrylist[entry.title]

    return entrylist

register.tag(ExampleTag) 
```

然后，在模板中，我可以调用 ExampleTag：

```
{% load my_tag %}
{% exampletag %} 
```

这会导致 KeyError 在 /u'The First Entry In The Feed'

如果我将代码更改为附加到列表，则模板将无错误地呈现，并且整个结构化列表以单个字符串输出。

这就是我想做的：

```
{% load my_tag %}
{% for item in exampletag %}
<p> {{ item }} </p>
{% endfor %} 
```

然而，这只是默默地失败（显然我没有将可交互对象传递给模板）

有任何想法吗？这甚至是这样做的好方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:25:27.200

这段代码看起来很可疑：

```
 for entry in feed.entries:
        entrylist[entry.title] 
```

不应该是这样的吗？

```
 for entry in feed.entries:
        entrylist[entry.title] = entry     # or some value 
```

因为现在你正试图索引一个空字典，因此得到了一个`KeyError`例外。

但是我仍然不确定您要做什么。这里有 2 个可以帮助您入门的想法。

想法一：看起来你应该写一个[包含标签](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/#inclusion-tags)。

类似（未经测试）：

```
@register.inclusion_tag('feed_entries.html'):
def feed_entries():
    feed = feedparser.parse('example.rss')
    return {'items': feed} 
```

而在`feed_entries.html`

```
{% for item in items %}
<p> {{ item }} </p>
{% endfor %} 
```

然后，在您希望显示项目列表的一些随机模板中：

```
{% load feed_tags %}
...
<p>Here are the latest entries:</p>
{% feed_entries %}
... 
```

这是假设`feed`包含您想要以某种方式呈现的项目列表。因此，每当您`{% feed_entries %}`在模板中使用时，都会调用您的 Python 片段，它会获取返回的字典并呈现`feed_entries.html`模板，并将生成的 HTML 放置在您编写的任何位置`{% feed_entries %}`。

想法二：如果您真的希望您的标签返回项目列表，您可以使用[分配标签](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/#assignment-tags)：

```
@register.assignment_tag
def feed_entries():
    return feedparser.parse('example.rss') 
```

然后在你的模板中你必须“捕捉”这个标签的结果（项目列表）：

```
{% feed_entries as items %}
{% for item in items %}
    <p>{{ item }}</p>
{% endfor %} 
```

但这意味着您必须在每个模板中复制“as”和 for-loop 内容。如果您在许多模板中使用包含标签，则可以节省您的打字和维护。但是，如果您想在每个模板中以不同的方式呈现列表，它会更加灵活。假设您希望它在一个`<p>`标签列表中，但在`<ul>`另一个标签列表中。

# python - 使用 Rpy2 将 Django 部署到 Heroku

> ID：15511530
> 
> 赞同：1
> 
> 时间：2013-03-19T22:12:21.750
> 
> 标签：python, django, r, heroku

我是一个新手，在使用 django 和 rpy2 在 Heroku 上工作时，我的能力已经达到了极限。特别是，我正在尝试测试 rpy2 创建的并发漏洞，以查看 Heroku 是否可以防止它（通过 dyno 隔离？）。

部署 django 示例很好，但添加 rpy2 会遇到不满意的 R 依赖项

```
git push heroku master
Counting objects: 11, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (11/11), 3.97 KiB, done.
Total 11 (delta 0), reused 0 (delta 0)

-----> Python app detected
-----> No runtime.txt provided; assuming python-2.7.3.
-----> Preparing Python runtime (python-2.7.3)
-----> Installing Distribute (0.6.34)
-----> Installing Pip (1.2.1)
-----> Installing dependencies using Pip (1.2.1)
       Downloading/unpacking Django==1.5 (from -r requirements.txt (line 1))
         Running setup.py egg_info for package Django

       Downloading/unpacking argparse==1.2.1 (from -r requirements.txt (line 2))
         Running setup.py egg_info for package argparse

           no previously-included directories found matching 'doc/_build'
           no previously-included directories found matching 'env24'
           no previously-included directories found matching 'env25'
           no previously-included directories found matching 'env26'
           no previously-included directories found matching 'env27'
       Downloading/unpacking rpy2==2.3.4 (from -r requirements.txt (line 3))
         Running setup.py egg_info for package rpy2

           sh: R: not found
           Error: Tried to guess R's HOME but no R command in the PATH.
           Complete output from command python setup.py egg_info:
           running egg_info

       creating pip-egg-info/rpy2.egg-info

       writing pip-egg-info/rpy2.egg-info/PKG-INFO

       writing top-level names to pip-egg-info/rpy2.egg-info/top_level.txt

       writing dependency_links to pip-egg-info/rpy2.egg-info/dependency_links.txt

       writing manifest file 'pip-egg-info/rpy2.egg-info/SOURCES.txt'

       warning: manifest_maker: standard file '-c' not found

       sh: R: not found

       Error: Tried to guess R's HOME but no R command in the PATH.

       ----------------------------------------
       Command python setup.py egg_info failed with error code 1 in /app/build/rpy2
       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app

To git@heroku.com:infinite-plateau-7086.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:infinite-plateau-7086.git' 
```

添加 init.r 导致 Heroku 识别 R 应用程序并启动 R

```
 $ git push heroku master
Counting objects: 13, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (11/11), done.
Writing objects: 100% (13/13), 4.15 KiB, done.
Total 13 (delta 1), reused 0 (delta 0)

-----> Fetching custom git buildpack... done
-----> R app detected
       Vendoring R 2.15.1
       Downloading and unpacking R binaries
       Executing init.r script
       R 2.15.1 successfully installed
-----> Discovering process types

-----> Compiled slug size: 96.7MB
-----> Launching... done, v5
       http://infinite-plateau-7086.herokuapp.com deployed to Heroku

To git@heroku.com:infinite-plateau-7086.git
 * [new branch]      master -> master 
```

但是无论有没有init.r文件，应用程序识别都看不到django with R up

```
$ git push heroku master
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 289 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)

-----> Fetching custom git buildpack... done
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:infinite-plateau-7086.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:infinite-plateau-7086.git' 
```

我正在使用[r buildpack](https://github.com/ddollar/heroku-buildpack-multi "r buildpack")和[multi buildpack](https://github.com/ddollar/heroku-buildpack-multi "多构建包")来允许 r django 交互。任何人都知道如何解决上述依赖冲突（因为我最终想将两者一起使用），或者 R 和 python 交互是否无法在 Heroku 上安全扩展？

# c++ - C++ 选择排序 - 插入方法和私有变量

> ID：15511533
> 
> 赞同：1
> 
> 时间：2013-03-19T22:12:32.927
> 
> 标签：c++, private-members

我正在编写一个选择排序程序。我刚刚发布了一些关于 std::vector 的内容，但是这篇文章是关于不同主题的。

我能够编译该程序，但是在 main 方法中调用 insert() 时它遇到了运行时错误。

我的 ArrayS 具有以下代码作为复制构造函数，并且在创建 ArrayS 时还将 nElems 初始化为 0。

[ArrayS.cpp]

```
ArrayS::ArrayS(int max)
{
    std::vector<long> a;                 
    nElems = 0; 
}

void ArrayS::insert(long value)    // put element into array
      {
      a[nElems] = value;             // insert it
      nElems++;                      // increment size
      } 
```

[阵列S.h]

```
private:

std::vector<long> a;

int nElems; 
```

现在，我是否需要 ArrayS.cpp 中的 get/set 方法来操作 nElems？我不确定在 C++ 中如何使用私有变量。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:14:54.747

向量跟踪它们的大小。为了提高效率，`a[nElems]`将假设您`vector`的空间足够大以容纳该访问。

看起来你想要：

```
void ArrayS::insert(long value)    // put element into array
      {
      a.push_back(value);             // insert it AND increment size
      } 
```

看起来你也可以无视`nElems`。如果你想要向量的大小，只需调用`a.size()`.

# codeigniter - 无法访问 $db codeigniter

> ID：15511539
> 
> 赞同：1
> 
> 时间：2013-03-19T22:13:11.583
> 
> 标签：codeigniter, autoload

我有：

```
$autoload['libraries'] = array('database'); 
```

在一个名为teams的模型中，我在一个函数中有这个：

```
$query = $this->db->query("Select * from Teams"); 
```

但我收到此错误：消息：未定义的属性：团队::$db

但如果我这样做：

```
$CI =& get_instance();           
$query = $CI->db->query("Select * from Teams"); 
```

有用。我不应该加载 CI。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:38:43.397

cant understand you problem but model file name in lower case ex team_model.php and class name start with Capital latter ex

```
class Team_model extends CI_Model {} 
```

or please full code to understand problem

# c++ - 使用输入文件流的分段错误

> ID：15511541
> 
> 赞同：0
> 
> 时间：2013-03-19T22:13:19.130
> 
> 标签：c++

我从我的编译器“分段错误：核心转储”收到此错误。我假设它来自我编写的函数，但不完全确定该函数有什么问题。

程序从输入文件中读取并在屏幕上输出结果（cout）。

```
string rna_complement(string line)
{

for(int i = 0; i < line.length(); i++)
{
        switch (line[i])
        {
            case 'A': line[i] = 'U'; break;
            case 'C': line[i] = 'G'; break;
            case 'G': line[i] = 'C'; break;
            case 'U': line[i] = 'A'; break;
            }
}

cout <<"Complement: " <<line <<endl;
}

int main()
{
string line1, line2, line3, line4, line5, line6;
ifstream genesacid;

genesacid.open("genes.txt");
    if(!genesacid.is_open())
    {
        cerr <<"Error: File cannot be opened"<<endl;
        return 0;
    }

            else
            {
                getline(genesacid, line1);
                getline(genesacid, line2);
                getline(genesacid, line3);
                getline(genesacid, line4);
                getline(genesacid, line5);
                getline(genesacid, line6);
            }

cout << "Fragment 1: " <<line1 <<endl;
rna_complement(line1);

cout << "Fragment 2: " <<line2 <<endl;

genesacid.close();

return 0;
} 
```

我不太擅长 C++，所以如果您看到的任何错误很明显，请注意这一点。我在慢慢学习！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:17:32.687

我猜这是因为您忘记了`return`函数中的某些内容。因此，可能会发生段错误。另外，请确保您的警告级别很高，一个好的编译器通常会让您知道这一点。

这是 C++ 标准 6.6.3：

> 从函数的末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:20:32.760

如果你没有在函数中返回任何东西`rna_complement`，它应该是`void`. 分段错误来自`std::string`. 或者，您可以返回，`line`因为它是副本。如果您想就地修改字符串，可以传递对它的引用 ( `string &line`)，它将修改传入参数的字符串。

# html - 我的 RegEx 表达式中缺少什么？

> ID：15511545
> 
> 赞同：1
> 
> 时间：2013-03-19T22:13:51.127
> 
> 标签：html, regex

因此，一段时间以来，正则表达式一直是我存在的祸根。我觉得我正处于理解它的风口浪尖，但我只是变得非常沮丧。简而言之：

我正在尝试通过 PHP 从以下网站抓取数据：

[http://magicseaweed.com/Asbury-Park-Surf-Report/857/](http://magicseaweed.com/Asbury-Park-Surf-Report/857/)

我想提取页面顶部的粗体波高（目前，它显示为 3-5）。我明白为什么会这样：

```
preg_match('/<div class="msw-fct-ccd msw-sr-details span3"> <h3> <span>(.*)    
<small>ft<\/small>   <\/span> <div class="msw-fct-ccr msw-sr-rating">/', $pageMagic,
$height); 
```

但我不明白为什么这不会：

```
preg_match('/<div class="msw-fct-ccd msw-sr-details span3"> <h3> <span>(/d-/d)|(/d)    
<small>ft<\/small>   <\/span> <div class="msw-fct-ccr msw-sr-rating">/', $pageMagic,
$height); 
```

在我看来，从逻辑上讲，它应该寻找一个数字，一个破折号，然后是另一个数字或只是一个数字。[我在http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)中测试了正则表达式，它获得了 3-5。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:16:28.060

你的斜线是错误的方式。它应该是：

```
(\d-\d)|(\d) 
```

顺便说一句，您可以将其简化为：

```
\d(-\d)? 
```

...但请注意，这会改变捕获组。我把修复留给你作为练习:)

# c# - 何时使用 wcf 和 asp.net？

> ID：15511549
> 
> 赞同：0
> 
> 时间：2013-03-19T22:14:08.240
> 
> 标签：c#, asp.net, wcf

我想做一个使用数据库的应用程序，可以在数据网格中显示信息，使用按钮执行命令等等。我想在局域网内和局域网外进行。

我认为我有两个选择。创建一个桌面应用程序，使用 wcf 连接服务以访问数据库。第二个选项是创建一个 aso 应用程序，这样我就可以使用任何浏览器通过 Internet 访问数据库。

这两个选项是一个好的解决方案吗？wcf的优缺点和asp.net的优缺点是什么？

什么时候用asp.net，什么时候用wcf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:51:56.770

当您只有一个客户端并且您只需要通过 LAN 和 Internet 访问它时，开发 ASP.NET 应用程序的开销就会减少。这是因为您不需要设置需要配置和保护的额外服务。另一方面，为 ASP.NET 应用程序创建一个好的 UI 可能比 WPF 应用程序的 WinForm 更难（取决于您的 UI 需求）。

但…。如果您在未来计划新客户怎么办？可能是针对具有不同需求的不同用户组的（本机）移动应用程序或另一个（Windows/Web）客户端？那么网络服务会给你一些优势……</p>

例如，您想为某些 CRUD 操作创建一个新的 Windows Phone 应用程序（依赖于您的 Web 应用程序）。

当您在 Web 应用程序中编写所有数据库逻辑和业务规则时，您不能直接在 Windows Phone 中使用它。好的，如果它与该 .NET 框架配置文件兼容，您也许可以使用该程序集。但是，如果您想在不使用 Xamarin 或类似软件的情况下创建 Android 应用程序怎么办。比你不能使用你的 Web 应用程序的程序集，你需要再次重写你的逻辑......当你有一个 Web 服务（例如一个 REST Web 服务）时，你可以为所有数据库和（共享）业务逻辑调用该服务. 而且你不需要关心它是否以正确的方式工作。正如您可能看到的，可维护性也是 Web 服务的一个优势，因为所有逻辑都集中在服务中。

# c# - 使用 CruiseControl.NET 和 MSBuild 发布网站

> ID：15511551
> 
> 赞同：4
> 
> 时间：2013-03-19T22:14:16.057
> 
> 标签：c#, .net, msbuild, cruisecontrol.net, publish

我正在尝试将[CruiseControl.NET设置为自动从 SVN (](http://en.wikipedia.org/wiki/CruiseControl) [VisualSVN_Server](http://en.wikipedia.org/wiki/VisualSVN_Server) )下载新版本并将其发布到 beta 目录。

[这是有关MSBuild](http://en.wikipedia.org/wiki/MSBuild)的 CruiseControl.NET 配置文件：

```
<msbuild>
    <executable>C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
    <workingDirectory>C:\CI\WORKING</workingDirectory>
    <projectFile>WashMyCarHomepage\WashMyCarHomepage.csproj</projectFile>
    <buildArgs>/noconsolelogger /p:Configuration=Debug /v:diag /p:WebProjectOutputDir=C:\inetpub\wwwroot.beta</buildArgs>
    <targets>Build;Test</targets>
    <timeout>900</timeout>
    <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
  </msbuild> 
```

CruiseControl.NET 成功运行 MSBuild，但 MSBuild 失败并显示：

```
standard-error stream closed -- null received in event
standard-output stream closed -- null received in event
process exited event received 
```

我还尝试从控制台手动运行 MSBuild 以尝试它是否单独工作。但我无法获得正确的输出（可发布到网络）。我试过：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319>MSBuild.exe C:\CI\WORKING\WashMyCarHomepage\WashMyCarHomepage.csproj /property:OutDir=C:/CI/TEST;Configuration=Release /t:Publish 
```

但是该项目被“跳过不可发布的项目”跳过。

我有以下解决方案的结构：

```
WashMyCarHomepage\WashMyCarHomepage.sln
WashMyCarHomepage\Repository\Repository.csproj
WashMyCarHomepage\WashMyCarHomepage\WashMyCarHomepage.csproj 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:32:37.707

经过与这个问题的长期斗争，我确实找到了解决方案。我提供了整个 CruiseControl.NET 配置文件。

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder">
  <project name="Aucis">
    <workingDirectory>C:\CI\WORKING</workingDirectory>
    <artifactDirectory>C:\CI\BUILD</artifactDirectory>
    <triggers>
      <intervalTrigger name="CI Trigger" seconds="120" buildCondition="IfModificationExists"/>
    </triggers>
    <tasks Name="Clean">
      <msbuild>
        <executable>C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
        <workingDirectory>C:\CI\WORKING</workingDirectory>
        <projectFile>WashMyCarHomepage\WashMyCarHomepage.csproj</projectFile>
        <buildArgs>/p:OutputPath=bin /P:Configuration=Deploy-Dev /P:DeployOnBuild=True /P:DeployTarget=MSDeployPublish /P:MsDeployServiceUrl=localhost /P:AllowUntrustedCertificate=True /P:MSDeployPublishMethod=WMSvc /P:CreatePackageOnPublish=True /P:UserName=WindowsUsername/P:Password=WindowsPassword</buildArgs>
        <timeout>900</timeout>
        <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
      </msbuild>
    </tasks>
    <sourcecontrol type="svn">
      <executable>C:\Program Files (x86)\VisualSVN Server\bin\svn.exe</executable>
      <trunkUrl>https://localhost:8443/svn/project/trunk</trunkUrl>
      <username>svn_username</username>
      <password>svn_password</password>
      <autoGetSource>true</autoGetSource>
      <cleanCopy>true</cleanCopy>
      <revisionNumbers>true</revisionNumbers>
      <tagBaseUrl>https://localhost:8443/svn/project/tags</tagBaseUrl>
    </sourcecontrol>
  </project>
</cruisecontrol> 
```

请注意，“Deploy-Dev”是在 VisualStudio 中设置的配置。

# html - 仅内部边框间距

> ID：15511554
> 
> 赞同：1
> 
> 时间：2013-03-19T22:14:33.030
> 
> 标签：html, css

我需要能够在表格单元格元素之间留出空间，但它也会在表格的两侧增加空间。如何去除侧面的空间？这是[小提琴](http://jsfiddle.net/aLa6G/1/)。`<table>`标签也可以用于此，但问题仍然存在

```
<div class="wrapper">
    <div class="table">
        <div class="cell">
        </div>
        <div class="cell">
        </div>
        <div class="cell">
        </div>
    </div>
    <div class="something-else">
        some other elements, table sides should align with this
    </div>
</div>

.wrapper {
    border: 1px solid green;
    padding: 5px;
}
.table {
    display: table;
    border-spacing: 15px 0;
    width: 100%;
}
.cell {
    display: table-cell;
    height: 50px;
    border: 1px solid blue;
}
.something-else {
    border: 1px solid red;
    margin-top: 10px; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:24:47.297

这可能是你想要的。由于您已将所有内容包装为一张表格，因此我使用了多个表格的想法并在第 2 行周围创建了一个表格来制作它

[http://jsfiddle.net/GGnrM/](http://jsfiddle.net/GGnrM/)

HTML

```
<div class="wrapper">
    <div class="table">
        <div class="cell">
        </div>
        <div class="cell">
        </div>
        <div class="cell">
        </div>
    </div>
    <div class="table2">
        <div class="something-else">
            some other elements, table sides should align with this
        </div>
    </div>
</div> 
```

CSS

```
.wrapper {
    border: 1px solid green;
    padding: 10px 5px;
}
.table {
    display: table;
    border-spacing: 5px 0;
    width: 100%;
}
.cell {
    display: table-cell;
    height: 50px;
    border: 1px solid blue;
}
.table2 {
    display: table;
    margin-top:5px;
    border-spacing: 5px 0;
    width: 100%;
}

.something-else {
    display: table-cell;
    border: 1px solid red;
    padding:1%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:22:05.427

根据您的具体要求，您可以使用`border-width`and达到预期的效果`:first-child`：

```
.table {
    display: table;
    /* border-spacing: 15px 0;  -- Removed this */
    table-layout: fixed;  /* Added this (not required, but evened-out the column widths) */
    width: 100%;
}
.cell {
    display: table-cell;
    height: 50px;
    border: 1px solid blue;
    border-width: 1px 1px 1px 15px;   /* Added this */
}
/* Added this */
.cell:first-child {
    border-width: 1px; /* Resets 15px border to 1px for first 'cell'  */
} 
```

小提琴：http: [//jsfiddle.net/aLa6G/6/](http://jsfiddle.net/aLa6G/6/)

# r - 否则，如果循环在 R 中运行非常缓慢

> ID：15511555
> 
> 赞同：3
> 
> 时间：2013-03-19T22:14:40.223
> 
> 标签：r

我正在进行一项研究项目，研究使某人更有可能投票的因素，重点是人们居住与投票站之间的距离。我为数百万人提供完整的选民登记和选民历史。有人可以通过多种方式投票（亲自、缺席、提前或临时）或不投票（未登记、登记但未投票或没有资格投票）。我的数据附带一列 (29)，说明某人在给定选举中的投票方式。NULL 表示未注册，V 表示本人等。

对于回归分析，我想为每种选民类型创建一个不同的列（1 表示是，0 表示否，第 68-74 列）和另一个 1/0 列（第 75 列）是否有人投票。我在下面编写的代码应该可以解决问题，但是它在我的计算机上运行得非常慢，一个小时后甚至无法到达第 1000 行。它工作得很好，除了速度。我已获准使用我大学的超级计算机*，但我想找出更快的算法。我的笔记本电脑和超级计算机* 上都有 R 和 STATA，我很乐意使用其中任何一个。

```
dcv.new <- read.csv("VoterHist.csv", header=TRUE)
# I previously set columns 68-75 to default to 0
for(i in 1:nrow(dcv.new))
{
  if(is.na(dcv.new[i,29]))
  {
    dcv.new[i,69] <- 1
  }
  else if(dcv.new[i,29]=="V")
  {
    dcv.new[i,68] <- 1
    dcv.new[i,75] <- 1
  }
  else if(dcv.new[i,29]=="A")
  {
    dcv.new[i,70] <- 1
    dcv.new[i,75] <- 1
  }
  else if(dcv.new[i,29]=="N")
  {
    dcv.new[i,71] <- 1
  }
  else if(dcv.new[i,29]=="E")
  {
    dcv.new[i,72] <- 1
  }
  else if(dcv.new[i,29]=="Y")
  {
    dcv.new[i,73] <- 1
  }
  else if(dcv.new[i,29]=="P")
  {
    dcv.new[i,74] <- 1
    dcv.new[i,75] <- 1
  }
  else if(dcv.new[i,29]=="X")
  {
    dcv.new[i,74] <- 1
    dcv.new[i,75] <- 1
  }
} 
```

*技术上是“高性能计算集群”，但老实说，超级计算机听起来更酷。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T22:22:25.710

R 主要是矢量化的，因此请寻找矢量化操作来代替循环。在这种情况下，您可以对每个操作进行矢量化，使其适用于整个矩阵而不是单个行。

以下是您的前三个`if` `else`陈述：

```
dcv.new[is.na(dcv.new[,29]), 69] <- 1
dcv.new[dcv.new[,29]=="V", c(68,75)] <- 1
dcv.new[dcv.new[,29]=="A", c(70,75)] <- 1
.... 
```

你应该明白了。

### 一些解释：

我们正在做的是从`dcv.new`满足条件的某些列中选择行（例如`== "V"`），然后我们将值分配给单个操作中的`1`每个选定元素。`dcv.new`R 回收`1`我们分配的 ，使其长度与填充所有选定元素所需的长度相同。

请注意我们如何一次选择多个列进行更新：*仅*`dcv.new[x , c(68,75)]`更新行的第 68 和 75 列，其中是索引我们需要更新的行的逻辑向量。逻辑向量是由类似的语句产生的。这些返回一个if 一个等于的元素，如果不是。`x` *`x``dcv.new[,29]=="V"``TRUE``dcv.new[,29]``"V"``FALSE`*

 *# 然而...！

在回归的情况下，我们可以让 R 为我们制作虚拟变量的矩阵，我们不需要手动完成。假设列`dcv.new[, 29]`名为`voterType`. 如果我们强迫它成为一个因素

```
dcv.new <- transform(dcv.new, voterType = factor(voterType)) 
```

当我们使用公式符号拟合模型时，我们可以这样做：

```
mod <- lm(response ~ voterType, data = dcv.new) 
```

R 将创建适当的对比以`voterType`使用正确的自由度。默认情况下，R 使用因子的第一水平作为基准水平，因此模型系数表示与该参考水平的偏差。要查看`voterType`将其转换为因子后的参考水平是多少

```
with(dcv.new, levels(voterType)[1]) 
```

**请注意，大多数采用公式的建模函数，如上图所示，按照我描述的方式工作，并在下面显示。您不仅限于`lm()`模型。**

这是一个小例子

```
set.seed(42)
dcv.new <- data.frame(response = rnorm(20),
                      voterType = sample(c("V","A","N","E","Y","P","X",NA), 20, 
                                         replace = TRUE))
head(dcv.new)

> head(dcv.new)
    response voterType
1  1.3709584         E
2 -0.5646982         E
3  0.3631284         V
4  0.6328626      <NA>
5  0.4042683         E
6 -0.1061245      <NA> 
```

然后可以将模型拟合为

```
mod <- lm(response ~ voterType, data = dcv.new)
summary(mod) 
```

在这种情况下给予

```
> mod <- lm(response ~ voterType, data = dcv.new)
> summary(mod)

Call:
lm(formula = response ~ voterType, data = dcv.new)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.8241 -0.4075  0.0000  0.5856  1.9030 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)  
(Intercept)   -2.656      1.425  -1.864   0.0952 .
voterTypeE     2.612      1.593   1.639   0.1356  
voterTypeN     3.040      1.646   1.847   0.0978 .
voterTypeP     2.742      1.646   1.666   0.1300  
voterTypeV     2.771      1.745   1.588   0.1468  
voterTypeX     2.378      2.015   1.180   0.2684  
voterTypeY     3.285      1.745   1.882   0.0925 .
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 1.425 on 9 degrees of freedom
  (4 observations deleted due to missingness)
Multiple R-squared: 0.3154, Adjusted R-squared: -0.1411 
F-statistic: 0.6909 on 6 and 9 DF,  p-value: 0.6635 
```

神奇的一切都发生在公式代码中，但基本上在幕后发生的事情是，一旦 R 找到了公式中命名的所有变量，它基本上最终会调用类似

```
model.matrix( ~ voterType, data = dcv.new) 
```

它生成底层矩阵代数和 QR 分解所需的协变量矩阵。上面的代码，对于这个小例子给出了：

```
> model.matrix(~ voterType, data = dcv.new)
   (Intercept) voterTypeE voterTypeN voterTypeP voterTypeV voterTypeX
1            1          1          0          0          0          0
2            1          1          0          0          0          0
3            1          0          0          0          1          0
5            1          1          0          0          0          0
8            1          0          0          1          0          0
10           1          0          0          0          0          0
11           1          0          1          0          0          0
12           1          0          1          0          0          0
13           1          1          0          0          0          0
14           1          0          0          0          0          1
15           1          0          0          0          1          0
16           1          0          0          1          0          0
17           1          0          0          1          0          0
18           1          0          0          0          0          0
19           1          0          1          0          0          0
20           1          0          0          0          0          0
   voterTypeY
1           0
2           0
3           0
5           0
8           0
10          1
11          0
12          0
13          0
14          0
15          0
16          0
17          0
18          0
19          0
20          1
attr(,"assign")
[1] 0 1 1 1 1 1 1
attr(,"contrasts")
attr(,"contrasts")$voterType
[1] "contr.treatment" 
```

这就是您想要对代码执行的操作。所以如果你真的需要它，你可以`model.matrix()`像我展示的那样使用它来生成矩阵——在你不需要它们时去掉属性。

在这种情况下，参考水平是`"A"`：

```
> with(dcv.new, levels(voterType)[1])
[1] "A" 
```

由`(Intercept)`的输出中的列表示`model.matrix`。请注意，这些处理对比代码与参考水平的偏差。`-1`您可以通过添加(0r )来抑制公式中的截距来获得虚拟值`+0`：

```
> model.matrix(~ voterType - 1, data = dcv.new)
   voterTypeA voterTypeE voterTypeN voterTypeP voterTypeV voterTypeX voterTypeY
1           0          1          0          0          0          0          0
2           0          1          0          0          0          0          0
3           0          0          0          0          1          0          0
5           0          1          0          0          0          0          0
8           0          0          0          1          0          0          0
10          0          0          0          0          0          0          1
11          0          0          1          0          0          0          0
12          0          0          1          0          0          0          0
13          0          1          0          0          0          0          0
14          0          0          0          0          0          1          0
15          0          0          0          0          1          0          0
16          0          0          0          1          0          0          0
17          0          0          0          1          0          0          0
18          1          0          0          0          0          0          0
19          0          0          1          0          0          0          0
20          0          0          0          0          0          0          1
attr(,"assign")
[1] 1 1 1 1 1 1 1
attr(,"contrasts")
attr(,"contrasts")$voterType
[1] "contr.treatment" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T22:21:02.490

您应该矢量化您的代码。忘记那么多如果

```
dcv.new[is.na(dcv.new[,29]),69] <- 1
dcv.new[dcv.new[,29] == "V", c(68, 75)] <- 1 
```

……`enter code here`

根据需要继续*

# xcode - 两阶段旋转运行时错误

> ID：15511563
> 
> 赞同：0
> 
> 时间：2013-03-19T22:14:59.500
> 
> 标签：xcode, git

我在运行时在 Xcode 中收到此错误。

`Two-stage rotation animation is deprecated. This application should use the smoother single-stage animation.`

我有

其他开发人员提取了相同的代码，它适用于他们，而不是在我的笔记本电脑上。所以我担心做出任何改变。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:06:23.337

你的 iOS 版本比他们的高。因为，许多 iOS 方法（`didAnimateFirstHalfOfRotationToInterfaceOrientation`等）已被弃用，当您运行代码时，您会收到运行时警告，但他们看不到它。请注意，您可能都安装了相同的实际 iOS，但它们和您的编译目标可能不同。如果您的某些 Xcode 配置文件不受版本控制，则在相同的 GIT 代码库中可能会发生这种情况。（通常在 Xcode 下配置 GIT 以避免某些 Xcode 文件；您的 GIT 配置可能需要避免过多的文件 - 导致错过目标构建规范。）

确保 project.pbxproj 处于源代码控制之下（并且 xcuserdata 不在）。两者都位于 .xcodeproj 文件夹中（使用“显示包内容”查看）。

# c++ - 为什么在 NULL 检查后会在指针上调用递归函数？

> ID：15511564
> 
> 赞同：0
> 
> 时间：2013-03-19T22:15:03.293
> 
> 标签：c++, pointers, memory-management

```
// So I call this function after deleting a node.
// It works before I delete the node, but for some reason
// after I perform a deletion and update the tree it runs into
// EXC_BAD_ACCESS on the line below...

void BinaryTree::updateCost(BinaryNode *root) {
    if (root != NULL)
        root->updateCostRecursively(1);
}

void BinaryNode::updateCostRecursively(int newCost) {
    cout << this << endl; // prints 0x3000000000000000 before the bad access
    cost = newCost; // has a bad access here
    if (right != NULL)
        right->updateCostRecursively(newCost + 1);
    if (left != NULL)
        left->updateCostRecursively(newCost + 1);
} 
```

为什么即使我每次都检查指针，也会在 NULL 对象上调用这个递归函数？

我已经复制了用于删除下面节点的代码。我仍然无法理解递归函数，但从无法判断的情况来看，我没有留下一个悬空指针。

```
BinaryNode *BinaryTree::findMin(BinaryNode *t) {
    if (t == NULL) return NULL;
    while (t->left != NULL) t = t->left;
    return t;
}

BinaryNode *BinaryTree::removeMin(BinaryNode *t) {
    if (t == NULL) return NULL;
    if (t->left != NULL)
        t->left = removeMin(t->left);
    else {
        BinaryNode *node = t;
        t = t->right;
        delete node;
    }
    return t;
}

bool BinaryTree::remove(int key) {
    if (root != NULL && remove(key, root))
        return true;
    return false;
}

BinaryNode *BinaryTree::remove(int x, BinaryNode *t) {
    if (t == NULL) return NULL;

    if (x < t->key)
        t->left = remove(x, t->left);
    else if (x > t->key)
        t->right = remove(x, t->right);
    else if (t->left != NULL && t->right != NULL) {
        // item x is found; t has two children
        t->key = findMin(t->right)->key;
        t->right = removeMin(t->right);
    } else { //t has only one child
        BinaryNode *node = t;       
        t = (t->left != NULL) ? t->left : t->right;
        delete node;
    }

    updateCost(root);
    return t;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:21:33.880

错误出在您的删除方法中，而不是您发布的代码中。删除节点（例如`root->right`）后，您需要设置`root->right = NULL`. 您所做的`delete`只是释放指针指向的内存。指针本身继续指向该地址。由于您试图访问已释放的内存，因此您遇到了错误的访问异常。

# php - 字节到千兆字节的转换不起作用

> ID：15511567
> 
> 赞同：2
> 
> 时间：2013-03-19T22:15:30.237
> 
> 标签：php, math

试图将 9769712680 字节转换为千兆字节。我有以下代码：

```
$value = 9769712680 / (1024 * 1024 * 1024); 
```

这应该给出 9 Gb 的值，但它会给出 2047 Mb（或 2 Gb）。

也试过了：`9769712680 / 1024 / 1024 / 1024`但这也做同样的事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:17:06.963

`9769712680`- 你这里有整数溢出，所以它变成`2^31`了，最大 int 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:19:17.157

看起来初始数字表示为`int32`. 做一些数学运算（使用 Matlab）：

```
9769712680/(1024*1024*1024) = 9.09875396639109

double(int32(9769712680))/(1024*1024*1024) = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:31:37.407

我不知道为什么这没有正确表示（它确实对我有用）。
无论如何，您可以使用通常用 PHP 编译的[BC 数学库](http://www.php.net/manual/en/book.bc.php)来求解具有任意长度数字的方程。

在您的情况下，它看起来像这样：

```
$value = bcdiv('9769712680', '1073741824', 4); /// 1024^3=1073741824 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:32:17.010

您可以使用[BCMath 库](http://php.net/manual/en/book.bc.php)：

```
$bytes = '976971268097697126809769712680976971268097697126809769712680';
$Gb = bcdiv($bytes, bcpow(1024, 3), 2);
echo $Gb; // 909875396730096197509923682250992368225099236822509.92 
```

# html - LI 高度与 UL 相同

> ID：15511568
> 
> 赞同：0
> 
> 时间：2013-03-19T22:15:33.823
> 
> 标签：html, css

嗨，我想知道为什么我的 UL 是 38px 高度但 LI 不适合 100% 高度。

```
ul#ordermenu{
    height:38px !important;
    width:100% !important;
    line-height:38px;
}

ul#ordermenu li
{
height:38px !important;
display: inline;
list-style-type: none;
padding-right: 100px;
color:#000;
line-height:38px;
font-size:20px;
}

ul#ordermenu li:last-child {
    padding-right:-100px;
}
ul#ordermenu li.active
{
height:38px !important;
line-height:38px;
background: #e6f0a3; /* Old browsers */
background: -moz-linear-gradient(top,  #e6f0a3 0%, #d2e638 50%, #c3d825 51%, #dbf043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e6f0a3), color-stop(50%,#d2e638), color-stop(51%,#c3d825), color-stop(100%,#dbf043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #e6f0a3 0%,#d2e638 50%,#c3d825 51%,#dbf043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #e6f0a3 0%,#d2e638 50%,#c3d825 51%,#dbf043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #e6f0a3 0%,#d2e638 50%,#c3d825 51%,#dbf043 100%); /* IE10+ */
background: linear-gradient(to bottom,  #e6f0a3 0%,#d2e638 50%,#c3d825 51%,#dbf043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e6f0a3', endColorstr='#dbf043',GradientType=0 ); /* IE6-9 */

} 
```

我的 HTML 代码

```
 <ul id="ordermenu">
        <li class="active">Items</li>
        <li>Checkout Status</li>
        <li>Postage Details</li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:18:32.133

不是 38px 高的原因`li`是因为`display: inline`on`ul#ordermenu li`

尝试这个：

```
#ordermenu li {
    display: inline-block;
    height: 38px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:20:49.363

您不能像 for 那样为内联元素分配高度`ul#ordermenu li`。尝试将显示属性更改为“inline-block”。这将允许您给列表项一个特定的高度，同时仍然水平排列它们。

# python - MacVim vdebug python 错误

> ID：15511571
> 
> 赞同：1
> 
> 时间：2013-03-19T22:15:39.797
> 
> 标签：python, macos, vim, xdebug

我正在尝试将[vdebug](https://github.com/joonty/vdebug)与 MacVim 和 xdebug 一起使用来调试代码。我通过自制软件安装了 MacVim 和 python，并安装了 xdebug 并与 MacGDBp 一起正常工作。

当我使用 F5 键在 vdebug 中收听并重新加载页面时（xdebug 远程自动启动已打开），我在 vdebug quickfix 窗口中收到 python 错误：

```
An error occured: <type 'exceptions.ImportError'>
Traceback (most recent call last):
  File "/Users/mikedfunk/dotfiles/.vim/bundle/vdebug/plugin/python/start_vdebug.py", line 31, in run
    self.runner.run()
  File "/Users/mikedfunk/dotfiles/.vim/bundle/vdebug/plugin/python/vdebug/runner.py", line 160, in run
    self.open()
  File "/Users/mikedfunk/dotfiles/.vim/bundle/vdebug/plugin/python/vdebug/runner.py", line 74, in open
    raise e
ImportError: No module named expat; use SimpleXMLTreeBuilder instead 
```

我已经用谷歌搜索了一段时间，但找不到有效的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:25:38.973

这对我有用！发布以防其他人有同样的问题：

[https://stackoverflow.com/a/12697440/557215](https://stackoverflow.com/a/12697440/557215)

在重新安装 MacVim 之前，它会暂时将 python 的 homebrew 版本链接到 mac 系统版本。现在 xdebug 工作！

# c - 从标准输入读取直到 EOF

> ID：15511573
> 
> 赞同：-3
> 
> 时间：2013-03-19T22:15:50.640
> 
> 标签：c, stdin, unistd.h

在按下 CTRL+D 之前，我一直无法从标准输入读取。我必须`read()`从 unistd.h 使用。我正在尝试模拟 cat 功能。有没有办法让我的缓冲区（我用 %s 打印）看起来整洁而没有不必要的空格`read(STDIN_FILENO, buf, 256)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:21:35.510

> 我正在尝试模拟 cat 功能。

这是一个开始：

```
ssize_t nread, nwrite;

while ((nread = read(STDIN_FILENO, buf, sizeof buf)) > 0) {
    nwrite = write(STDOUT_FILENO, buf, nread);
    /* Error handling and partial writes left as exercise. */
} 
```

# c# - 如何将 MVVM Light 与 Sql Server Compact - Windows Phone 7 一起使用？

> ID：15511574
> 
> 赞同：2
> 
> 时间：2013-03-19T22:15:50.877
> 
> 标签：c#, windows-phone-7, sql-server-ce, mvvm-light, expression-blend

我正在使用 MVVM Light、Sql Server Compact Toolkit 和 windows phone 7。

我创建了一个 sql server compact 3.5 数据库，然后使用该工具包为每个表生成数据上下文和域类。

看起来像这样

```
[global::System.Data.Linq.Mapping.TableAttribute(Name = "ContactGroups")]
    public partial class ContactGroup : INotifyPropertyChanging, INotifyPropertyChanged
    {

        private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

        private int _Id;

        private string _Title;

        private System.DateTime _LastUpdated;

        private EntitySet<GContact> _GContacts;

        #region Extensibility Method Definitions
        partial void OnLoaded();
        partial void OnValidate(System.Data.Linq.ChangeAction action);
        partial void OnCreated();
        partial void OnIdChanging(int value);
        partial void OnIdChanged();
        partial void OnTitleChanging(string value);
        partial void OnTitleChanged();
        partial void OnLastUpdatedChanging(System.DateTime value);
        partial void OnLastUpdatedChanged();
        #endregion

        public ContactGroup()
        {
            this._GContacts = new EntitySet<GContact>(new Action<GContact>(this.attach_GContacts), new Action<GContact>(this.detach_GContacts));
            OnCreated();
        }

        [global::System.Data.Linq.Mapping.ColumnAttribute(Storage = "_Id", DbType = "Int NOT NULL", IsPrimaryKey = true)]
        public int Id
        {
            get
            {
                return this._Id;
            }
            set
            {
                if ((this._Id != value))
                {
                    this.OnIdChanging(value);
                    this.SendPropertyChanging();
                    this._Id = value;
                    this.SendPropertyChanged("Id");
                    this.OnIdChanged();
                }
            }
        }

        [global::System.Data.Linq.Mapping.ColumnAttribute(Storage = "_Title", DbType = "NVarChar(100) NOT NULL", CanBeNull = false)]
        public string Title
        {
            get
            {
                return this._Title;
            }
            set
            {
                if ((this._Title != value))
                {
                    this.OnTitleChanging(value);
                    this.SendPropertyChanging();
                    this._Title = value;
                    this.SendPropertyChanged("Title");
                    this.OnTitleChanged();
                }
            }
        }

        [global::System.Data.Linq.Mapping.ColumnAttribute(Storage = "_LastUpdated", DbType = "DateTime NOT NULL")]
        public System.DateTime LastUpdated
        {
            get
            {
                return this._LastUpdated;
            }
            set
            {
                if ((this._LastUpdated != value))
                {
                    this.OnLastUpdatedChanging(value);
                    this.SendPropertyChanging();
                    this._LastUpdated = value;
                    this.SendPropertyChanged("LastUpdated");
                    this.OnLastUpdatedChanged();
                }
            }
        }

        [global::System.Data.Linq.Mapping.AssociationAttribute(Name = "FK_GContacts_ContactGroups", Storage = "_GContacts", ThisKey = "Id", OtherKey = "ContactGroups_Id", DeleteRule = "NO ACTION")]
        public EntitySet<GContact> GContacts
        {
            get
            {
                return this._GContacts;
            }
            set
            {
                this._GContacts.Assign(value);
            }
        }

        public event PropertyChangingEventHandler PropertyChanging;

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void SendPropertyChanging()
        {
            if ((this.PropertyChanging != null))
            {
                this.PropertyChanging(this, emptyChangingEventArgs);
            }
        }

        protected virtual void SendPropertyChanged(String propertyName)
        {
            if ((this.PropertyChanged != null))
            {
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        private void attach_GContacts(GContact entity)
        {
            this.SendPropertyChanging();
            entity.ContactGroup = this;
        }

        private void detach_GContacts(GContact entity)
        {
            this.SendPropertyChanging();
            entity.ContactGroup = null;
        }
    } 
```

然而，当我尝试使其可混合时（即制作假数据，因此当我进入混合时，我可以更好地使用它而不是查看空框）混合中没有任何显示

当我有一个没有它的简单域时

```
 public class ContactGroup
    {
        public int Id { get; set; }

        public string Title { get; set; }

        public DateTime LastUpdated { get; set; }

        public List<GContacts> Contacts { get; set; }

        public ContactGroup()
        {
            Contacts = new List<GContacts>();
        }

    } 
```

然后在我的视图模型定位器中

```
 if (ViewModelBase.IsInDesignModeStatic)
    {
        SimpleIoc.Default.Register<IContactService, DesignContactService>();
    }
    else
    {
        SimpleIoc.Default.Register<IContactService, DesignContactService>();
    } 
```

**编辑** 问题线看起来是这样

```
 private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty); 
```

当我删除它时，混合再次显示数据。

# python - 搜索api片段结果上的python appengine unicodeencodeerror

> ID：15511576
> 
> 赞同：3
> 
> 时间：2013-03-19T22:15:57.163
> 
> 标签：python, google-app-engine, google-search-api

我正在抓取页面并使用 appengine search api（西班牙语和加泰罗尼亚语页面，带有重音字符）对它们进行索引。我能够执行搜索并制作一页结果。

当我尝试使用带有 snippetd_fields 的查询对象时会出现问题，因为它总是会生成 UnicodeEncodeError：

```
 File "/home/otger/python/jobs-gae/src/apps/search/handlers/results.py", line 82, in find_documents
    return index.search(query_obj)
  File "/opt/google_appengine_1.7.6/google/appengine/api/search/search.py", line 2707, in search
    apiproxy_stub_map.MakeSyncCall('search', 'Search', request, response)
  File "/opt/google_appengine_1.7.6/google/appengine/api/apiproxy_stub_map.py", line 94, in MakeSyncCall
    return stubmap.MakeSyncCall(service, call, request, response)
  File "/opt/google_appengine_1.7.6/google/appengine/api/apiproxy_stub_map.py", line 320, in MakeSyncCall
    rpc.CheckSuccess()
  File "/opt/google_appengine_1.7.6/google/appengine/api/apiproxy_rpc.py", line 156, in _WaitImpl
    self.request, self.response)
  File "/opt/google_appengine_1.7.6/google/appengine/ext/remote_api/remote_api_stub.py", line 200, in MakeSyncCall
    self._MakeRealSyncCall(service, call, request, response)
  File "/opt/google_appengine_1.7.6/google/appengine/ext/remote_api/remote_api_stub.py", line 234, in _MakeRealSyncCall
    raise pickle.loads(response_pb.exception())
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf3' in position 52: ordinal not in range(128) 
```

我在 stackoverflow 上发现了一个类似的问题：[GAE Full Text Search development console UnicodeEncodeError](https://stackoverflow.com/questions/11471398/gae-full-text-search-development-console-unicodeencodeerror)但它说这是在 1.7.0 上修复的错误。使用版本 1.7.5 和 1.7.6 时，我得到同样的错误。

在索引页面时，我添加了两个字段：description 和 description_ascii。如果我尝试为 description_ascii 生成片段，它会完美运行。

这是否可以在 dev_appserver 上生成非 ascii 内容的片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T13:51:20.567

我认为这是一个错误，报告了新的缺陷问题[https://code.google.com/p/googleappengine/issues/detail?id=9335](https://code.google.com/p/googleappengine/issues/detail?id=9335)。

开发服务器的临时解决方案 - 找到 google.appengine.api.search 模块 (search.py​​)，并通过添加内联来修补函数 _DecodeUTF8，如果像这样：

```
def _DecodeUTF8(pb_value):
  """Decodes a UTF-8 encoded string into unicode."""
  if pb_value is not None:
    return pb_value.decode('utf-8') if not isinstance(pb_value, unicode) else pb_value
  return None 
```

解决方法 - 在问题解决之前，自己实现*代码片段*功能 - 假设代码片段的基础字段被调用`snippet_base`：

```
query = search.Query(query_string=query_string,
                 options=
                    search.QueryOptions(
                        ...
                        returned_fields= [... 'snippet_base' ...]
                        ))
results = search.Index(name="<index-name>").search(query)
if results:
    for res in results.results:
        res.snippet = some_snippeting_function(res.field("snippet_base")) 
```

# internet-explorer - 将鼠标悬停在带有显示的下拉菜单上：表格在 IE 中不起作用

> ID：15511585
> 
> 赞同：1
> 
> 时间：2013-03-19T22:16:52.517
> 
> 标签：internet-explorer, css

我正在做一个类似于引导程序的下拉菜单。唯一的区别是我的下拉菜单的默认状态是`display: table`因为我需要菜单看起来像一个表格。不幸的是，这在 IE10 中不起作用：

[http://codepen.io/anon/pen/LfdoB](http://codepen.io/anon/pen/LfdoB)

它可以在 safari、chrome 和 firefox 中正常工作。

在 IE 中发生的情况是第一次悬停有效，但随后的悬停不显示下拉菜单，但我确实看到了框阴影。似乎`height: 0`，虽然设置`height: auto`没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:43:10.767

我真的不知道为什么 IE 会这样。

无论如何，我让它工作显示：表永久（即在正常状态下）并隐藏 - 通过可见性显示它：

```
.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: table;
    visibility: hidden;
    min-width: 100%;
    background-color: white;
    box-shadow: 0 4px 8px 4px rgba(0, 0,0, .15);
}

:hover > .dropdown-menu {
    visibility: visible; 
} 
```

[更新的代码笔](http://cdpn.io/zdCHK)

# php - 根据您单击的链接在 DIV 中显示不同的内容

> ID：15511589
> 
> 赞同：0
> 
> 时间：2013-03-19T22:17:06.880
> 
> 标签：php, css, class, html

我有一个演示网站，我一直在尝试一些功能。我要做的只是根据您单击页面的链接显示绿色或蓝色的 DIV。

这是我现在使用的示例主页，但是它需要我构建 3 个单独的页面来显示结果；all.php、green.php 和 blue.php。我希望只有一页并根据需要隐藏或显示 DIV

```
<?php

    // which page should be shown now
    $page = (isset($_GET['page']) && $_GET['page'] != '') ? $_GET['page'] : 'home';

    // only the pages listed here can be accessed
    // any other pages will result in error
     $allowedPages = array('home',
        'all',
        'blue',
        'green',

     )
    ;

        if (!in_array($page, $allowedPages) || !file_exists($page . '.php')) {
            $page = 'notfound';
        } 

        // set prettier title
        //$title .= ($page != 'home') ? ' - ' . ucfirst($page) : '';

    // start output buffering so headers can be used in sub pages
            ob_start();

    ?> <html>
          <head>
            <title>tester</title>
            <link rel="stylesheet" href="nav.css" type="text/css" media="all" />
            <script type="text/javascript" src="sucker.js"></script>
          </head>
          <body>
            <ul id="nav">
              <li>
                <a href="index.php?page=all">All Color</a>
              </li>
              <li>
                <a href="index.php?page=green">Greew/a>
                <ul>
                  <li>
                    <a href="index.php?page=blue">Blue</a>
                  </li>

                </ul>
              </li>

            </ul>
            <div class="clear"></div>
        <?php

        include($page . '.php');

        ?>

          </body>
        </html> 
```

这是 all.php 的内容

```
 <div style="min-height: 245px; border: 2px solid transparent;" class="itemWrapper">
            <a class="itemLink" href="http://www.demo.com/products/blue1.jpg">
            <img src="images/products/hold.jpg" class="itemImage" style="width:150px;;height:150px;;"/></a>
            <h3 class="itemTitle"> Blue Item 1</a></h3>
            <p class="itemPrice">$5.00</p>
            <img style="display: none;" class="quickViewBtn" src="images/products/quick_view.png" />
        </div>

        <div style="min-height: 245px; border: 2px solid transparent;" class="itemWrapper">
            <a class="itemLink" href="http://www.demo.com/products/blue2.jpg">
            <img src="images/products/hold.jpg" class="itemImage" style="width:150px;;height:150px;;"/></a>
            <h3 class="itemTitle"> Blue Item 2</a></h3>
            <p class="itemPrice">$3.00</p>
        <img style="display: none;" class="quickViewBtn" src="images/products/quick_view.png" /></div>

        <div style="min-height: 245px;" class="itemWrapper">
            <a class="itemLink" href="http://www.demo.com/products/blue3.jpg">
            <img src="images/products/hold.jpg" class="itemImage" style="width:150px;;height:150px;;"/></a>
            <h3 class="itemTitle"> Blue Item 3</a></h3>
            <p class="itemPrice">$4.00</p>
        <img style="display: none;"  class="quickViewBtn" src="images/products/quick_view.png" alt= "Quick View" /></div>

        <div style="min-height: 245px;" class="itemWrapper last">
            <a class="itemLink" href="http://www.demo.com/products/green1.jpg">
            <img src="images/products/hold.jpg" class="itemImage" style="width:150px;;height:150px;;"/></a>
            <h3 class="itemTitle"> Green Item 1</a></h3>
            <p class="itemPrice">$1.00</p>
        <img style="display: none;"  class="quickViewBtn" src="images/products/quick_view.png" /></div>

          <div style="min-height: 245px;" class="itemWrapper last">
            <a class="itemLink" href="http://www.demo.com/products/green2.jpg">
            <img src="images/products/hold.jpg" class="itemImage" style="width:150px;;height:150px;;"/></a>
            <h3 class="itemTitle"> Green Item 2</a></h3>
            <p class="itemPrice">$2.00</p>
        <img style="display: none;"  class="quickViewBtn" src="images/products/quick_view.png" /></div>

      </div> 
```

您能提供的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:30:52.457

您可以将它们全部加载，并将它们放在不同的类中，然后使用 jQuery 加载它们。我举了一个例子 - 在[这里查看。](http://jsfiddle.net/eV5gp/)

```
$(document).ready(function() {
    $(".green").hide();
    $(".blue").hide(); 
```

类似的东西 - 然后在点击按钮时显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:36:11.440

只需将这样的内容写入您的身体标签

```
<body class="
<?php

... if isset... if in_array
switch ($page)
{ 
    case "green":
        echo "body_green";
    break;

    case "blue":
        echo "body_blue";
    break;

    default:
        echo "";
}
?>
"> 
```

在你的 CSS

```
.green, .blue {
  display:none;
}

.body_green .green {
  display: block;
}

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:37:46.103

如果您希望它是无缝的，那么 jQuery/JavaScript 是可以去这里的方式，但是由于您说这只是一种“测试”站点，我假设您正在做更多的事情来试验 PHP 并获得乐趣。因此，您需要做的是将所有三个页面放入一个文件中，然后将所有三个页面包装在 if...then 语句中。有效：

```
<?php
if (!isset($_POST['page'])) {
    //let the user make a choice
} else if ($_POST['page'] == 'green') {
    ?> 
    <!--HTML for the "green" pages goes here!-->
    <?php
} else if ($_POST['page'] == 'blue') {
    ?> 
    <!--HTML for the "blue" pages goes here!-->
    <?php
} else {
    print("Invalid page selection!"); //Keep in mind, we want to "error check" to make sure the user actually selected a page
}
?> 
```

如果您有更多“页面”，则应使用 switch 语句。如果这是一个非常大的应用程序，您可以使用一个`include()`语句（但请确保您检查该文件是否存在！）并在您的应用程序中包含多个样式文件。

# python - 给定python中的日期对象，我如何减去一天

> ID：15511601
> 
> 赞同：1
> 
> 时间：2013-03-19T22:18:26.953
> 
> 标签：python

有一个我设置的变量

`now = datetime.datetime.now()`

我希望能够设置一个变量 ，它只`yesterday`需要`now`并从中减去一天。

我确信这非常容易，但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T22:19:55.500

您可以使用`datetime.timedelta`：

```
now = datetime.datetime.now()
yesterday = now - datetime.timedelta(days=1) 
```

# php - PHP/JavaScript 表单验证？

> ID：15511603
> 
> 赞同：2
> 
> 时间：2013-03-19T22:18:39.320
> 
> 标签：php, javascript

我是 PHP 和 JavaScript 的新手。我想验证表单，如果表单输入字段正确，则将其发送到 php 外部脚本。我试过这样的事情：

```
<head>
<script type="text/javascript">
  function Validate(){
    var x=document.forms["form"]["firstname"].value;
    var y=document.forms["form"]["lastname"].value;
    var z=document.forms["form"]["age"].value;
    if(x==null || x=="") {
      alert("Input name!");
    } else if(y==null || y=="") {
      alert("Input surname!");
    } else if(z==null || z=="") {
      alert("Input age!");
    } else {
  // IS IT POSSIBLE TO SEND FORM HERE FORM VARIABLES TO PHP SCRIPT?
    }
  }
</script>
</head>
<body>

  <form name="forma" action="validate.php" method="post" onSubmit="return Validate()">
    Firstname: <input type="text" name="firstname">
    Lastname: <input type="text" name="lastname">
    Age: <input type="text" name="age">
    <input type="submit">
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:23:59.640

由于您没有从函数中返回 false，因此无论如何都应该提交表单。您可以通过让您的 validate() 函数返回 false 来阻止它被提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:24:21.893

您的代码看起来是正确的，除了您可能想要`return false`阻止表单提交失败的事实。当不返回 false 时，表单将继续提交。

`form`我还认为您可能打算将您的表格命名为`forma`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:32:02.647

您应该验证输入服务器端 (php)，即使您是在客户端 (javascript) 进行的。

您可以通过检查`$_POST`validate.php 来做到这一点：
在脚本的开头：

```
if (isset($_POST)) {  // form has been sent

    if (!isset($_POST['firstname']) || strlen($_POST['firstname'])==0) { // no entry 

        $e['firstname']='please enter a firstname!'; // prepare error-msg
    }

    if (!isset($e)) {  // no error, continue handling the data

        // write data to database etc.
    }
}

// in your form...

if (isset($e)) echo "there were errors: ". implode(',',$e); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T22:39:11.723

您需要输入以下代码：

```
function Validate(){
var x=document.forms["form"]["firstname"].value;
var y=document.forms["form"]["lastname"].value;
var z=document.forms["form"]["age"].value;
if(x==null || x=="") {
  alert("Input name!");
  return false;
} else if(y==null || y=="") {
  alert("Input surname!");
  return false;
} else if(z==null || z=="") {
  alert("Input age!");
  return false;
} else {
  return true;
}
} 
```

# python - 使用 GET/POST 请求访问 TwiML 参数

> ID：15511606
> 
> 赞同：0
> 
> 时间：2013-03-19T22:18:49.587
> 
> 标签：python, twilio

我正在尝试从 TwiML 语音请求中请求参数。我对收集动词特别感兴趣，它可以让我弄清楚有多少用户“按下”了特定的数字。

[http://www.twilio.com/docs/api/twiml/twilio_request#synchronous-request-parameters](http://www.twilio.com/docs/api/twiml/twilio_request#synchronous-request-parameters) [http://www.twilio.com/docs/api/twiml/gather#attributes-action](http://www.twilio.com/docs/api/twiml/gather#attributes-action)

我已经看到大部分代码都在 xml 中，但想知道是否有上面的 python 等效代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:23:15.130

Gather 动词是在 XML 中创建的，但您可以使用静态模板，例如此处的模板：http: [//www.twilio.com/docs/howto/weatherbyphone#step2](http://www.twilio.com/docs/howto/weatherbyphone#step2)

关键是指定您期望的位数以及下一步（操作）是什么。

然后在用户按下数字后，您也可以使用 Python 处理结果。以下是我们的 Howtos 示例：http: [//www.twilio.com/docs/howto/weatherbyphone#step3](http://www.twilio.com/docs/howto/weatherbyphone#step3)

那有意义吗？

# c# - 使用 Lambda 表达式的复杂 LINQ 排序

> ID：15511617
> 
> 赞同：0
> 
> 时间：2013-03-19T22:19:43.047
> 
> 标签：c#, .net, linq, expression-trees

有没有人知道/知道带有表达式的 IQueryable.OrderBy 扩展名（例如，通过反射检索）？我相信这个函数看起来像这样：

```
public static IQueryable<TEntity> OrderBy<TEntity>
    (this IQueryable<TEntity> source, Expression sortExpression) 
```

将假定表达式是`Expression<Func<TEntity, T>>`其中 TEntity 是被排序的同一对象，而 T 是需要确定的类型才能创建新的 IQueryable。

我发现了许多采用字符串的扩展示例，包括 Dynamic Linq，如下所示：

```
public static IQueryable<TEntity> OrderBy<TEntity>(
    this IQueryable<TEntity> source, string sortExpression) 
```

如果可以获取字符串并使用反射从相关对象中查找类型，那么也应该可以获取表达式，并获取表达式中的值类型。

* * *

以下是我为什么想要这个的详细解释，你可能需要也可能不需要。

我有一个相当大的复杂记录列表要排序。因为列表很长，我更喜欢在数据库端进行排序。为了处理更复杂的属性，我创建了提供排序功能的表达式，如下所示：

```
if (model.sortExpression == "PlannedValue")
{
    Expression<Func<BDopp, decimal>> sorter = BDopp.PlannedValueSorter;         
    if (model.sortDirection == "DESC")
        opps = opps.OrderByDescending(sorter).AsQueryable();
    else
        opps = opps.OrderBy(sorter).AsQueryable();
} 
```

BDOpp.PlannedValueSorter 从对象中检索一个静态表达式，该表达式允许在没有 opps 的情况下进行排序，仍然是 IQueryable 类型：

```
public static Expression<Func<BDopp, decimal>> PlannedValueSorter
    {
        get
        {
            return z => z.BudgetSchedules
                .Where(s => s.Type == 1)
                .Sum(s => s.Value * s.Workshare * z.valueFactor / 100 / 100);
        }
    } 
```

简单属性的排序是使用扩展方法完成的，这些方法使用反射来构建基于作为字符串传递的属性名称的表达式。

这很好用，但是对于复杂类型，我仍然需要分支逻辑，我宁愿不这样做。我宁愿检查包含表达式的静态属性，然后简单地应用它。我可以得到这样的表达：

```
PropertyInfo info = typeof(BDopp).GetProperty(model.sortExpression + "Sorter",
    BindingFlags.Static | BindingFlags.Public);
Expression expr = (Expression)info.GetValue(null, null); 
```

对于 PlannedValue 属性，这让我得到了在 PlannedValueSorter 中排序的表达式，我已经知道它有效。

* * *

## 更新：

各种挖掘让我得到了我认为可能是一些进展：

```
public static IQueryable<TEntity> OrderBy<TEntity>(this IQueryable<TEntity> source, 
    Expression<Func<TEntity, dynamic>> sortExpression)
    {
        var unary = sortExpression.Body as UnaryExpression;
        Type actualExpressionType = unary.Operand.Type; 
```

actualExpressionType 实际上是 Expression 的返回类型（对于这个特定的属性，它是十进制）。

不幸的是，我主要是通过反复试验来工作，因为我还没有完全了解这一切是如何工作的，所以我尝试像这样更新查询是行不通的：

```
 MethodCallExpression resultExp = Expression.Call(typeof(Queryable), 
            "OrderBy",
            new Type[] { typeof(TEntity), actualExpressionType },
            source.Expression, sortExpression);
        return source.Provider.CreateQuery<TEntity>(resultExp); 
```

它编译正常，但在运行时抛出以下错误：

> 类型“System.Linq.Queryable”上没有通用方法“OrderBy”与提供的类型参数和参数兼容。如果方法是非泛型的，则不应提供类型参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:18:46.570

好的，我有一个解决方案：

```
public static IQueryable<TEntity> OrderBy<TEntity>(
    this IQueryable<TEntity> source, 
    Expression<Func<TEntity, dynamic>> sortExpression, 
    bool descending)
    {
        var unary = sortExpression.Body as UnaryExpression;
        var operand = unary.Operand;
        Type actualExpressionType = operand.Type;

        MethodCallExpression resultExp = 
            Expression.Call(typeof(Queryable), 
                descending? "OrderByDescending" : "OrderBy",
                new Type[] { typeof(TEntity), actualExpressionType },
                source.Expression, 
                Expression.Lambda(operand, sortExpression.Parameters));
        return source.Provider.CreateQuery<TEntity>(resultExp);
    } 
```

布尔降序是为了允许标准的 OrderBy 和 OrderByDescending 重载。这里有两个重大突破，至少对我来说：

1.  从表达式中取出操作数。
2.  使用 Expression.Call 和 Expression.Lambda 创建新表达式 - 这允许我使用实际的“类型”变量，而`Expression<Func<TEntity, T>>`语法要求您使用在编译时已知的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:36:41.857

据我了解，您有一个`Expression`并想按它订购/过滤。它的简单程度可能会让您感到惊讶：

```
Expression<Func<TEntity, T>> sortExpr = ...; //you already have this
var ordered = myQuery.OrderBy(sortExpr); 
```

OrderBy*始终*使用 an `Expression`，因此您可以直接使用它。如果你只有一个类型的变量`Expression`（它指向一个类型的对象`Expression<Func<TEntity, T>>`）并且不知道静态是什么`T`，你可以这样做：

```
Expression sortExpr = ...; //you already have this
var ordered = myQuery.OrderBy((dynamic)sortExpr); 
```

`dynamic`将在运行时使用反射解决这个问题。无需自己进行反思。这里需要的只是重载解析（由 C# 运行时绑定器执行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:34:54.253

尝试这个：

```
public static IEnumerable<T> OrderBy<T>(
       this IEnumerable<T> collection, 
       string columnName
       //, SortDirection direction
)
{
    ParameterExpression param = Expression.Parameter(typeof(T), "x");   // x
    Expression property = Expression.Property(param, columnName);       // x.ColumnName
    Func<T, object> lambda = Expression.Lambda<Func<T, object>>(        // x => x.ColumnName
            Expression.Convert(property, typeof(object)),
            param)
        .Compile();

    Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> expression = (c, f) => c.OrderBy(f); // here you can use OrderByDescending basing on SortDirection

    IEnumerable<T> sorted = expression(collection, lambda);
    return sorted;
} 
```

用法：

```
IEnumerable<T> collection = ...
IEnumerable<T> ordered = collection.OrderBy("PropName"); 
```

* * *

请参阅[代码项目](http://www.codeproject.com/Articles/246361/Handle-GridView-OnSorting-using-LINQ)和[沙箱](http://ideone.com/y9i48d)。

# c# - 如何在另一个类上的列表列表上使用 foreach

> ID：15511620
> 
> 赞同：0
> 
> 时间：2013-03-19T22:19:53.073
> 
> 标签：c#, list, foreach

```
public class ItemCollection
{
    List<AbstractItem> LibCollection;

    public ItemCollection()
    {
        LibCollection = new List<AbstractItem>(); 
    }

    public List<AbstractItem> ListForSearch()
    {
        return LibCollection;
    } 
```

在另一堂课上我写了这个：

```
public class Logic
{
    ItemCollection ITC;

    List<AbstractItem> List;

    public Logic()
    {
        ITC = new ItemCollection();   

        List = ITC.ListForSearch();    
    }

    public List<AbstractItem> search(string TheBookYouLookingFor)
    {
        foreach (var item in List)
        {
          //some code..
        } 
```

并且 foreach 中的列表不包含任何内容，我需要在此列表上工作（此列表应与 libcollection 的内容相同）用于搜索方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:08:06.133

如果`ItemCollection`除了拥有 之外没有其他用途`List<AbstractItem>`，那么应该完全删除该类并`List<AbstractItem>`改为使用该类。

如果`ItemCollection`有其他目的并且其他人不应该访问底层`List<AbstractItem>`，它可以实现`IEnumerable<AbstractItem>`：

```
class ItemCollection : IEnumerable<AbstractItem>
{
    List<AbstractItem> LibCollection;

    public ItemCollection() {
        this.LibCollection = new List<AbstractItem>();
    }

    IEnumerator<AbstractItem> IEnumerable<AbstractItem>.GetEnumerator() {
        return this.LibCollection.GetEnumerator();
    }

    IEnumerator System.Collections.IEnumerable.GetEnumerator() {
        return ((IEnumerable)this.LibCollection).GetEnumerator();
    }
}

class Logic
{
    ItemCollection ITC;

    public Logic() {
        ITC = new ItemCollection();
    }

    public List<AbstractItem> Search(string TheBookYouLookingFor) {
        foreach (var item in this.ITC) {
            // Do something useful
        }
        return null; // Do something useful, of course
    }
} 
```

否则，您可能希望`LibCollection`直接公开并让其他代码枚举：

```
class ItemCollection
{
    public List<AbstractItem> LibCollection { get; private set; }

    public ItemCollection() {
        this.LibCollection = new List<AbstractItem>();
    }
}

class Logic
{
    ItemCollection ITC;

    public Logic() {
        ITC = new ItemCollection();
    }

    public List<AbstractItem> Search(string TheBookYouLookingFor) {
        foreach (var item in this.ITC.LibCollection) {
            // Do something useful
        }
        return null; // Do something useful
    }
} 
```

# c# - 绘制 360 度矩形

> ID：15511622
> 
> 赞同：0
> 
> 时间：2013-03-19T22:20:03.093
> 
> 标签：c#, winforms, graphics

我正在制作一个能够绘制矩形的小型绘画应用程序。但是，我不能在西南象限以外的任何地方绘制矩形。我正在使用这个绘制矩形：

```
graphics.DrawRectangle(
    mainPen, 
    prevPoint.X, 
    prevPoint.Y, 
    e.Location.X - prevPoint.X, 
    e.Location.Y - prevPoint.Y); 
```

我只是缺少一些小东西吗？还是我必须进行计算才能确定在哪里设置原点？如果这个解释太混乱，我可以提供图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:26:50.620

您需要将较小的`X`和`Y`设置为您`Rectangle's`的左上角点，并将点之间的绝对差设置为您的`width`和`height`。你可以使用这个：

```
int left = prevPoint.X < e.Location.X ? prevPoint.X : e.Location.X;
int top = prevPoint.Y < e.Location.Y ? prevPoint.Y : e.Location.Y;
graphics.DrawRectangle(mainPen, left, top, Math.Abs(e.Location.X - prevPoint.X), Math.Abs(e.Location.Y - prevPoint.Y)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:27:23.727

如果你去“东” ，计算`e.Location.X - prevPoint.X`给你一个负的反弹，因为起点（比如 200）小于终点（比如 400）。因此，您将负整数传递给宽度和高度的方法。

根据规范： http: [//msdn.microsoft.com/en-us/library/x6hb4eba.aspx](http://msdn.microsoft.com/en-us/library/x6hb4eba.aspx)你总是定义矩形的左上角，然后定义一个（正）宽度和高度。

试试这个：

```
graphics.DrawRectangle(
    mainPen, 
    Math.Min(prevPoint.X, e.Location.X), 
    Math.Min(prevPoint.Y, e.Location.Y), 
    Math.Abs(e.Location.X - prevPoint.X), 
    Math.Abs(e.Location.Y - prevPoint.Y)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:27:47.900

由于该方法期望参数为（左上 x，左上 y，宽度，高度），我假设您需要计算哪个点是矩形的左上角。将其用作前两个参数，然后通过减去两个点并取绝对值来计算宽度/高度。

代码应该是这样的：

```
int leftX, leftY, width, height;
leftX = prevPoint.X < e.Location.X ? prevPoint.X : e.Location.X;
leftY = prevPoint.Y < e.Location.Y ? prevPoint.Y : e.Location.Y;
width = Math.Abs(prevPoint.X - e.Location.X);
height = Math.Abs(prevPoint.Y - e.Location.Y);
graphics.DrawRectangle(mainPen, leftX, leftY, width, height); 
```

# jprofiler - 如何将 JProfiler 连接到远程 OC4J 上运行的应用程序？

> ID：15511629
> 
> 赞同：0
> 
> 时间：2013-03-19T22:20:34.697
> 
> 标签：jprofiler, oc4j

问题：配置 JProfiler 后 OC4J 实例现在不会启动。

配置：OC4J 10.1.3.4.0，Java 1.5.0_06（32位），远程服务器是Linux x86/AMD64，nowait。手动同步配置，我已经从 .jprofiler 目录中复制了 config.xml。默认端口为 8849。

在 ORACLE_HOME/opmn/logs/default_group~ifactory~default_group~1.log 文件中，我看到

```
13/03/19 14:48:42 Start process
--------
JProfiler> Protocol version 37
JProfiler> Using JVMTI
JProfiler> 32-bit library
JProfiler> Don't wait for frontend to connect.
JProfiler> Using config file /icu/ias/dev/ifactory/jprofiler/config.xml (id: 110)
JProfiler> Could not find session with id: 110 
```

来自 ORACLE_HOME/opmn/conf/config.xml：

```
 <process-type id="ifactory" module-id="OC4J" status="enabled">
           <module-data>
              <category id="start-parameters">
                 <data id="java-options" value="-server -Xmx1024m -Djava.security.policy=$ORACLE_HOME/j2ee/ifactory/config/java2.policy -Djava.awt.headless=true -Dhttp.webdir.enable=false -XX:MaxPermSize=512m -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled -Dlog4j.debug=true -agentpath:/icu/ias/dev/ifactory/jprofiler/bin/linux-x86/libjprofilerti.so=port=8849,nowait,id=110,config=/icu/ias/dev/ifactory/jprofiler/config.xml "/>
              </category>
              <category id="stop-parameters">
                 <data id="java-options" value="-Djava.security.policy=$ORACLE_HOME/j2ee/ifactory/config/java2.policy -Djava.awt.headless=true -Dhttp.webdir.enable=false"/>
              </category>
           </module-data>
           <start timeout="600" retry="2"/>
           <stop timeout="120"/>
           <restart timeout="720" retry="2"/>
           <port id="default-web-site" range="12501-12600" protocol="ajp"/>
           <port id="rmi" range="12401-12500"/>
           <port id="rmis" range="12701-12800"/>
           <port id="jms" range="12601-12700"/>
           <process-set id="default_group" numprocs="1"/>
        </process-type> 
```

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:59:51.930

没关系。显然我有一个稍旧的 config.xml 版本。

# c - Cortex m3第一条指令执行

> ID：15511630
> 
> 赞同：4
> 
> 时间：2013-03-19T22:20:35.130
> 
> 标签：c, assembly, initialization, startup, cortex-m3

我正在使用 Sourcery CodeBench Lite 2012.03-56 编译器和带有[texane gdb server](https://github.com/texane/stlink)的 gdb 套件。

今天我想试试便宜的 STM32VLDISCOVERY 板的 FreeRTOS 演示示例，我复制了所有需要的源文件，编译没有错误，但示例不起作用。我启动了调试器并注意到该示例在尝试取消引用指向 GPIO 寄存器的指针时失败。包含指向 GPIO 寄存器的指针的全局数组变量：

```
GPIO_TypeDef* GPIO_PORT[LEDn] = {LED3_GPIO_PORT, LED4_GPIO_PORT}; 
```

未正确初始化并填充了一些随机值。我检查了预处理器定义 LED3_GPIO_PORT 和 LED3_GPIO_PORT 并且它们是有效的。

在研究了问题可能出在哪里之后，我查看了在 CMSIS lib 中为 trueSTUDIO 提供的启动文件。原始startup_stm32f10x_md_vl.S文件：

```
 .section    .text.Reset_Handler
    .weak   Reset_Handler
    .type   Reset_Handler, %function
Reset_Handler:

/* Copy the data segment initializers from flash to SRAM */
  movs  r1, #0
  b LoopCopyDataInit

CopyDataInit:
    ldr r3, =_sidata
    ldr r3, [r3, r1]
    str r3, [r0, r1]
    adds    r1, r1, #4

LoopCopyDataInit:
    ldr r0, =_sdata
    ldr r3, =_edata
    adds    r2, r0, r1
    cmp r2, r3
    bcc CopyDataInit
    ldr r2, =_sbss
    b   LoopFillZerobss
... 
```

在调试过程中，我注意到寄存器 r1 从未被第一条指令*movs r1, #0*初始化为零。寄存器 r1 用作循环中的计数器，因此当执行到达循环 LoopCopyDataInit 时，它永远不会进入循环，因为寄存器 r1 加载了一些来自先前执行的垃圾数据。因此，**启动代码永远不会初始化 .data 部分**。

*当我在movs r1, #0*指令之前放置两条 nop 指令时，寄存器 r1 被初始化为 0，示例开始工作：

startup_stm32f10x_md_vl.S 文件的修改部分：

```
/* Copy the data segment initializers from flash to SRAM */
  nop
  nop
  movs  r1, #0
  b LoopCopyDataInit 
```

这是最终代码相关部分的反汇编：

```
Disassembly of section .isr_vector:

08000000 <g_pfnVectors>:
 8000000:       20002000        andcs   r2, r0, r0
 8000004:       08000961        stmdaeq r0, {r0, r5, r6, r8, fp}
 ...

Disassembly of section .text:

 ...
8000960 <Reset_Handler>:
 8000960:   2100            movs    r1, #0
 8000962:   f000 b804       b.w     800096e <LoopCopyDataInit>

08000966 <CopyDataInit>:
 8000966:   4b0d            ldr     r3, [pc, #52]   ; (800099c <LoopFillZerobss+0x16>)
 8000968:   585b            ldr     r3, [r3, r1]
 800096a:   5043            str     r3, [r0, r1]
 800096c:   3104            adds    r1, #4 
```

如您所见，ISR 向量表正确指向 Reset_Handler 地址。那么，发生了什么？为什么第一条指令*movs r1, #0*在原始启动代码中从未执行过？

**编辑：**

当我关闭电路板并重新打开电源时，原始代码有效。我可以多次重置MCU并且它可以工作。当我启动 gdb-server 时，即使重置后代码也不起作用。我必须重新启动它才能工作。我想这是一些调试器奇怪的事情。

**笔记：**

我查看了其他人使用此 MCU 的启动代码，他们要么禁用中断，要么使用链接器定义的值加载 SP 寄存器，这在两种情况下都是多余的。如果他们被这种奇怪的行为击中，他们永远不会注意到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:46:48.677

听起来像是调试器中的错误。可能它在第一条指令上设置了一个断点，或者完全跳过它，或者以某种方式重新执行它不能正常工作。这个问题可能会因为它是一个*复位*向量而变得复杂，也许它只是不可能在第一条指令处可靠地停止。由于 NOP 有帮助，我建议您在开发程序时将它们留在原处。

但是，有一个替代解决方案。由于您不太可能需要修改数组，因此在可写部分中并不需要它。要让编译器将数组放入闪存中，通常将其声明为*const*就足够了：

```
GPIO_TypeDef* const GPIO_PORT[LEDn] = {LED3_GPIO_PORT, LED4_GPIO_PORT}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:38:42.177

关于那里可能出现什么问题，没有什么可以立即跳出来。首先，你是如何调试这段代码的？您是否连接了调试器，然后通过 JTAG 向处理器发出复位？我会尝试`b Reset_Handler`在您的`Reset_Handler:`标签之后作为您的第一条指令将其放在那里，将其打开，打开电路板，然后连接 JTAG，这样您就可以最大限度地减少调试器的任何可能的怪异。然后将您的 PC 设置为该`mov`指令，看看它是否有效。引导加载程序或引导 ROM 是否启动此代码？指令或数据缓存可能会发生一些奇怪的事情。

# javascript - 使用 node.js 读取和写入多个 ip

> ID：15511631
> 
> 赞同：0
> 
> 时间：2013-03-19T22:20:40.270
> 
> 标签：javascript, node.js

我已经通过 Node.js 完成了一个教程，但似乎所有内容都旨在从服务器端如何处理它。我正在玩弄它，看看它如何使用非阻塞 i/o 写入我们网络上的多个设备。这是我到目前为止所拥有的（粗略的代码，抱歉）：

```
var net = require('net');

var nodes = [<list of IP addresses>];

function connectToServer(ip) {
        conn = net.createConnection(3083, ip);
         console.log ("Creating connection to: " + ip + "\n");
        conn.on('connect', function() {
                conn.write ("act-user::myuser:ex1::mypass;");
        });
        conn.on('data', function(data) {
                var read = data.toString();
                if (read.match('ex1'))
                {
                        console.log(ip + ": " + read);
                }
        });
        conn.on('end', function() {
        });
}

nodes.forEach(function(node) {
        connectToServer(node);
}); 
```

我看到它通过列表并启动与每个 IP 地址的连接，但随后它似乎一遍又一遍地将登录行写入同一主机。我想我在某个地方让我的流越过（就像 Egon 说永远不会这样做），但我不知道如何解决它。非阻塞的 node.js 世界对我来说仍然有点难以思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:39:50.733

您的问题是 JavaScript 扭结。在 JavaScript 中，如果一个变量没有`var`在它之前定义，它将被设置为全局。这发生在函数中的`conn`变量上。正在被覆盖，并且在退出范围后不会重置。`connectToServer()``conn``connectToServer`

尝试在以下内容前面添加 var。

```
conn = net.createConnection(3083, ip); 
```

结果

```
var conn = net.createConnection(3083, ip); 
```

# google-api-java-client - 获取谷歌地方 api 密钥

> ID：15511636
> 
> 赞同：0
> 
> 时间：2013-03-19T22:20:58.927
> 
> 标签：google-api-java-client

我需要谷歌的地方 api，现在我得到了 api 密钥，我下载了 google-api-java-client，我在我的项目中添加了这个（使用 android sdk 2.3.3。）所以，问题出在哪里，因为我复制了一个示例来测试我所做的所有程序都很好。现在，或者问题是我下载的 google-api-java 版本，或者该示例适用于其他 android sdk 版本。我想问的是：我必须为 android sdk 2.3.3 安装什么版本的 google-api-java-client？google-api-java-client 的好手册在哪里？如果问题不是我所说的问题之一，那么问题可能是谁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T19:24:42.950

我认为你不需要任何`google-api-java-client`. 如果您正在尝试获取城市列表，那么只需使用以下 api 来获取列表`possible cities`并`then use xml or json parsing`根据您的需要使用结果

xml

```
https://maps.googleapis.com/maps/api/place/autocomplete/xml?input=delh&sensor=true&key=your key here 
```

json

```
https://maps.googleapis.com/maps/api/place/autocomplete/json?input=delh&sensor=true&key=your key here 
```

类似地，您可以获得许多其他地方的列表，例如特定区域的电子商店或餐厅。请在此处查看此链接[自动完成 google 地点](https://developers.google.com/places/documentation/autocomplete)、[地点搜索](https://developers.google.com/places/documentation/search)。明确您想要实施的意图，并将提供帮助

# string - if else 中的字符串声明错误

> ID：15511637
> 
> 赞同：0
> 
> 时间：2013-03-19T22:21:00.150
> 
> 标签：string, vba, ms-access-2007

我有 Camp 作为字符串。当我写这段代码时，我得到一个错误：

`*Me.BoatDesc =< the expression you entered refer to an object that is close*`

**这是我的代码**

```
private Sub Save_Click()

 Dim Camp As String

 If Me.BoatDesc = "Camp" Then

 Me.Amount = Me.Amount * 12

 End If 
```

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:07:33.597

您使用的是 VBA，而不是 VB.Net。这里有一些注意事项

这是一个简单的表单，它会在代码运行时打开。代码将通过单击“保存”运行。请注意，MS Access 绑定表单的默认设置是保存，因此您可能希望使用不同的名称。

![一个简单的表格](../Images/ee1adee87e82e785add7d6a328a16131.png)

这是设计视图中的表单，请注意有一个名为 BoatDesc 的控件和另一个名为 Amount 的控件，这只能从属性表中看到。

![表单设计视图](../Images/073ba08ddb713f7dd702319a246757b0.png)

保存按钮有一个[Event Procedure]，就是代码。

![保存按钮属性](../Images/fff136c93e6fe6e2bd48d05f50d39f1a.png)

请注意，代码属于我正在使用的表单 Form2，并且 Option Explicit 出现在顶部。这意味着我不能有未命名的变量，因此很难弄错名称。

![代码图片](../Images/1b032a587c081071a219d1064cc27a47.png)

这是保存按钮运行的代码。

```
Option Compare Database
Option Explicit

Private Sub Save_Click()
    ''Do not mix up strings, variables, controls and fields
    ''If you want to know if a control, BoatDesc, equals
    ''the string "camp", you do not need this
    ''Dim Camp As String

    If Me.BoatDesc = "Camp" Then
       Me.Amount = Me.Amount * 12
    End If
End Sub 
```

# c++ - 为什么 AVFormatContext 指针在非全局结构对象中初始化，而在全局对象中为 NULL？

> ID：15511639
> 
> 赞同：0
> 
> 时间：2013-03-19T22:21:14.980
> 
> 标签：c++, struct, ffmpeg, global

该代码几乎类似于过滤 _video.c，这是 ffmpeg doc 中的一个示例代码。

在原始示例文件中，有许多全局静态变量。这是第一版代码的一个片段（与原始示例相同）：

```
static AVFormatContext *fmt_ctx;
static AVCodecContext *dec_ctx;

int main(int argc, char **argv) {

// ....  other code
    if ((ret = avformat_open_input(&fmt_ctx, filename, NULL, NULL)) < 0) {
        av_log(NULL, AV_LOG_ERROR, "Cannot open input file\n");
        return ret;
    }

// .... other code

} 
```

由于所有这些变量都用于打开视频文件，因此我更喜欢将它们分组。所以我的代码的目的是重新排列这些变量，使源文件更有条理。

我想到的第一个想法是使用struct。

```
struct structForInVFile {
    AVFormatContext *inFormatContext;
    AVCodecContext *inCodecContext;
    AVCodec* inCodec;
    AVPacket inPacket;
    AVFrame *inFrame;
    int video_stream_index;
    int inFrameRate;
    int in_got_frame;
}; 
```

现在第二版代码变成：

```
int main(int argc, char **argv) {

// .... other code
structForInVFile inStruct;

    if ((ret = avformat_open_input(&inStruct.inFormatContext, filename, NULL, NULL)) < 0) {
        av_log(NULL, AV_LOG_ERROR, "Cannot open input file\n");
        return ret;
    }

// .... other code

} 
```

第 2 版的结果：代码无法在 avformat_open_input 处工作。没有错误信息。程序静默退出。通过调试发现：inStruct.inFormatContext: 0xffffefbd22b60000

在第三版代码中，我将 inStruct 设置为全局变量。代码变为：

```
structForInVFile inStruct;

int main(int argc, char **argv) {

// .... other code
    if ((ret = avformat_open_input(&inStruct.inFormatContext, filename, NULL, NULL)) < 0) {
        av_log(NULL, AV_LOG_ERROR, "Cannot open input file\n");
        return ret;
    }

// .... other code

} 
```

第三版的结果：代码有效。通过调试发现：inStruct.inFormatContext: 0x0

所以我认为原因是： AVFormatContext 应该为零初始化，以便 avformat_open_input 工作。现在，问题是：

为什么 AVFormatContext 指针在非全局结构对象中初始化，而在全局对象中初始化为零？

我不知道将结构对象定义为全局变量或非全局变量有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:47:50.830

简单的。根据**3.6.2 非本地对象初始化中**的**C++ 标准**：

 ***具有静态存储持续时间（3.7.1）的对象应在任何其他初始化发生之前进行零初始化（8.5）。*

**注意**：您的问题是重复的。请在询问之前更仔细地搜索 StackOverflow。**

# awk - 使 awk 保持输入格式化间距不变以进行输出

> ID：15511643
> 
> 赞同：2
> 
> 时间：2013-03-19T22:21:24.023
> 
> 标签：awk

我想打印仅修改了一些特定列的输入列 ASCII 数据文件。如果我使用 awk 修改列（例如：$NF=99），当我最终给出“print $0”命令时，它会正确打印输出，但其他列的所有空格填充、格式等都消失了。（它们基本上都被 OFS 取代了）。

有没有办法让 awk 打印完全相同的输入，只在指定的列中进行更改？我需要将此输出提供给另一个具有非常严格的读取格式的 fortran 代码。所以我不能改变行的格式。

如果 awk 不是我应该用于此目的的软件，您有什么建议？

* * *

更新：示例：

连续输入条目。

```
0 0 0 0 0 0 0  1936 24170  2536  1987 24094  2543  2037 24153  2550  2088 24202  2557 27 24 24.5 10000.0    0.31     0.0 10000.0     0.0     0.0     0.0    0.65 
```

我想将该条目转换为

```
0 0 0 0 0 0 0  1936 24170  2536  1987 24094  2543  2037 24153  2550  2088 24202  2557 27 24 24.5 10000.0 10000.0 10000.0 10000.0 10000.0 10000.0 10000.0 10000.0 
```

重要的部分是保持其他列的间距和位置不变。

* * *

我可以做的最接近的事情是完成我的任务是以下命令。

```
gawk '{output=$0;for (i=0;i<8;i++){output=substr(output,0,97+8*i-1)"10000.0"substr(output, 97+8*(i+1)-1)}; print output}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T20:09:42.207

如果字段是固定宽度的，您是否考虑过不按字段编号而是按列编号进行更改？您可以通过 substr() 在 awk 中执行此操作，也可以使用 cut。

例如假设你想要的字段总是在第 56-60 列，你可以打印 substr($0,1,55) "text!" substr($0,61);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:35:55.087

使用 GNU awk，以下是如何用单词“replacement”替换第三个字段：

```
$ cat file
field1      field2           field3    field4

$ gawk -v field=3 -v text="replacement" '{ print gensub("(^[[:space:]]*([^[:space:]]+[[:space:]]+){" field-1 "})[^[:space:]]+", "\\1" text, "") }' file
field1      field2           replacement    field4 
```

在其他 awk 中，您可以使用 sub()s 或 match()+substr()s 做同样的事情。

为了保持字段结束位置，假设替换文本小于或等于原始文本的长度加上它前面的空格：

```
$ cat file
field1      field2           field3    field4
  field1      field2           field3    field4

$ awk -v fieldNr=3 -v text="replacement" -f tst.awk file
field1      field2      replacement    field4
  field1      field2      replacement    field4

$ cat tst.awk
BEGIN {
    preFld="^([[:space:]]*[^[:space:]]+){" fieldNr-1 "}"
}
{
    match($0,preFld)
    head = substr($0,RSTART,RLENGTH)

    match($0,preFld "[[:space:]]*[^[:space:]]+")
    field = substr($0,RSTART+length(head),RLENGTH-length(head))

    printf("%s% *s%s\n", head, length(field), text, substr($0,RSTART+RLENGTH))
} 
```

有关该主题和不同解决方案的更多信息，请尝试使用 GNU gawk“patsplit()”函数和/或 FIELDWIDTHS 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:30:54.200

你对你在做什么不太具体，所以我不能在这里具体。那说：

听起来您需要做的是`$0`直接修改代码而不是选择一个字段。`sub()`或者`gsub()`可能对您有用，或者您可以使用`match()`.

# exception - 禁用 .NET 处理本机异常

> ID：15511649
> 
> 赞同：4
> 
> 时间：2013-03-19T22:21:49.403
> 
> 标签：exception, access-violation, dump, mixed-mode

我有一个调用混合模式 C++ dll 的 C# 应用程序。我通过 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps 启用了转储生成。

当 dll 访问无效内存时，运行时会将 win32 异常转换为托管 System.AccessViolationException，并在生成转储之前展开堆栈，从而破坏本机堆栈信息。根据 msdn 的说法，我可以在 .net 获取异常并手动生成转储之前自己捕获异常，但是在已经损坏的程序上运行代码可能会挂起它。那么，如何禁用 SEH 翻译呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:52:51.543

你不能禁用它。除非您捕获到异常，否则 CLR 不会展开堆栈。确保你没有。这需要通过 AppDomain.UnhandledException 事件处理程序。您需要的基本函数是 Marshal.GetExceptionPointers()，它会在您打开 minidump 时查明异常。

你会在[这个 MSDN 论坛主题](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/321f8960-ccbb-49d0-b285-3d2bbf3d20d9/)和[这个 pinvoke.net 片段](http://www.pinvoke.net/default.aspx/dbghelp/MiniDumpWriteDump.html)中找到我的答案中的资源，应该足以将你自己的拼凑在一起。

# c# - 将参数传递给 OWIN 主机

> ID：15511651
> 
> 赞同：11
> 
> 时间：2013-03-19T22:21:56.547
> 
> 标签：c#, owin

我使用 OWIN 自托管 ASP.NET Web API 和 SignalR。我使用以下代码启动服务器（在控制台应用程序上）：

```
using (WebApplication.Start<Startup>(url))
{
    Console.WriteLine("Running...");
    Console.ReadLine();
} 
```

这工作正常。但现在我需要向`Startup`类传递一个参数（一个对象）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-30T14:23:57.940

该`WebApplication.Start`方法有一个接受`IServiceProvider`作为参数的重载，因此可以注入我想要的数据。

```
IServiceProvider serviceProvider = DefaultServices.Create(defaultServiceProvider =>
{
    defaultServiceProvider.AddInstance<IMyInterface>(myInstance);
});

using (WebApplication.Start<Startup>(serviceProvider, url)){ ... } 
```

现在，在我的`Startup`类上，我只需要创建一个接收 IMyInterface 的构造函数：

```
public Startup(IMyInterface myInstance)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-30T11:07:25.477

您可以使用[`WebApp.Start Method (String, Action<IAppBuilder>)`重载](https://msdn.microsoft.com/en-us/library/microsoft.owin.hosting.webapp.start(v=vs.113).aspx#M:Microsoft.Owin.Hosting.WebApp.Start%28System.String,System.Action%7BOwin.IAppBuilder%7D%29)。

例子：

```
using (WebApplication.Start(url, appBuilder => new Startup(myObject).Configuration(appBuilder)))
{
    Console.WriteLine("Running...");
    Console.ReadLine();
} 
```

# javascript - Javascript / jQuery 加法游戏

> ID：15511652
> 
> 赞同：0
> 
> 时间：2013-03-19T22:22:00.380
> 
> 标签：javascript, jquery, math

我正在开发一个 Javascript 数学游戏，可以使用一些指导。我需要创建一个有 10 个问题的游戏，一次向用户展示一个问题，以便简单添加。我开始做某事，但已经遇到麻烦了。我还需要一些方法来向用户展示他们最终得到的正确和错误的答案。

有什么可用的帮助吗？这将不胜感激。

我在处理它时已经包含在答案中，但显然我需要用户自己提交答案并存储它。

[这是一个小提琴](http://jsfiddle.net/brettlewis/hyqhD/)：

```
$(document).ready(function() {

    //declare arrays and variables for use below
    var pNum1 = new Array(); 
    var pNum2 = new Array();
    var pNumCarry=0;
    var pNumAns = new Array();
    var ans = new Array();
    var score=0;

    function pNumGen(x) { 
        pNum1[x] = (Math.round(Math.random()*51));
        pNum2[x] = (Math.round(Math.random()*51));
        pNumAns [x] = pNum1[x] + pNum2[x];
        $(".pNum1").html(pNum1[x]);
        $(".pNum2").html(pNum2[x]);
        $(".pNumAns").html(pNumAns[x]);
    }

    $(".Play").click(function() {
        pNumTrack = 0;
        pNumGen(pNumTrack);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:34:08.650

要获取用户输入，您可能需要查看[window.prompt](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)：

至于最终向用户提供正确/错误的答案，这是一个非常不具体的问题，取决于您如何实现游戏的其余部分。一种可能性可能是使用一个[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)，您可以在每次猜测后将一些文本推送到其中，例如“问题#1：15 + 39 = 105 - 不正确”，然后在游戏结束时循环并打印数组内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:46:19.930

好的。我刚刚创建了一个小例子，你可以如何开始创建你的游戏：

[http://jsfiddle.net/ePjGs/1/](http://jsfiddle.net/ePjGs/1/)

```
$(function() {
    getQuestion();
});

var count = 0,    
    results = [];
function getQuestion() {
    count++;
    var container = $('<div />');
    var val1 = Math.round(Math.random()*51);
    var val2 = Math.round(Math.random()*51);
    var lbl = $('<label />');
    lbl.html(val1 + ' + ' + val2 + ' = ');
    container.append(lbl);
    var input = $('<input type="text" />');
    container.append(input);
    var btn = $('<input type="button" value="Submit result" />');
    var val;
    btn.click(function() { 

        results.push({
            number1 : val1,
            number2 : val2,
            answer : input.val()
        });

        input.attr('disabled', true);
        $(this).attr('disabled', true);

        $(this).after(function() {
            if(val1 + val2 == input.val()) return 'SUCCESS!';
            return 'ERROR';
        });

        getQuestion(); 

        updateResults();
    });
    container.append(btn);
    $('body').append(container);
}

function updateResults() {
    $('#json').html(JSON.stringify(results));
} 
```

# kernel - v4l2 多设备麻烦

> ID：15511653
> 
> 赞同：0
> 
> 时间：2013-03-19T22:22:01.680
> 
> 标签：kernel, driver, webcam, low-level, v4l2

我使用 v4l2 打开两个网络摄像头。30 fps 一切正常。以 60 fps，开始麻烦。第一个凸轮上的 FPS 大约 20，第二个凸轮上的 FPS 大约 0-3。我尝试在不同的线程（和不同的处理器内核）中运行——同样的问题。我认为 v4l2 驱动程序有问题。

我的任务非常简单 - 从一台计算机上的两个网络摄像头以 60 fps 的速度捕获数据。可能吗？可能是什么问题？我可能会显示代码，但它很大。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:28:31.353

这应该是可能的。问题可能是：

*   你有支持 DMA 的硬件，但你没有使用 DMA。使用高 FPS，您的性能可能会下降。
*   你的缓冲队列太短了。您获得的缓冲区比您在队列中分配的要多
*   其他，这取决于您的实施

# c - 将 int 转换为二进制，使用 char 数组来表示它

> ID：15511654
> 
> 赞同：2
> 
> 时间：2013-03-19T22:22:07.733
> 
> 标签：c

为班级做家庭作业，部分作业让我们从以十为底的转换为二进制，并将二进制数表示为 char 类型的数组。由于某种原因，它没有计算最正确的位。任何帮助，将不胜感激。

```
#include <stdlib.h>
#include <stdio.h>
xtractmsg(int a)
{
   int rem,i,b,j,quotient;
   char binaryNumber[16];

   for(i = 0; i <= 16; i++){

        if(a == 0)
           binaryNumber[i]='0';
        else{

           rem = a % 2;

           if(rem == 0)
                   binaryNumber[i]='1';
           else
                  binaryNumber[i]='0';
          a=a/2;
        }

   }

    for(j=15; j>=0;j--)
        printf("%c,%d",binaryNumber[j]);

} 
```

输入为 10，输出为 0000000000000101。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:30:13.700

我不会直接给你答案，因为是功课，我会指出在哪里搜索。仔细看看你在得到剩余部分后做了什么。试着在你得到它的地方打印它并分析你所看到的。

不相关但也是错误`for(i = 0; i <= 16; i++)`的，最终会写入不存在的第 17 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:46:52.340

这里有两件事需要解决。

循环条件错误一：

```
for(i = 0; i < 16; i++) { 
```

逻辑需要反转-：

```
if(rem == 0)
    binaryNumber[i]='0';
else
    binaryNumber[i]='1'; 
```

# java - 编辑方法返回的内容 java

> ID：15511664
> 
> 赞同：1
> 
> 时间：2013-03-19T22:22:48.517
> 
> 标签：java, powermock

我在修改游戏时遇到了问题。我需要修改方法返回的内容而不编辑该方法本身。我尝试使用 power-mock 进行此操作，但无济于事。有谁知道如何使用 power-mock 或任何其他字节码操作库，甚至任何标准库来做到这一点？我愿意使用任何库，只要许可证允许它用于我的目的。

我希望能够编辑静态方法的返回，以及所有对象的非静态方法的返回。

这是我尝试过的 power-mock

```
import org.powermock.api.easymock.PowerMock;

import static org.easymock.EasyMock.expect;

public class BeanTest
{
   public static void main(String[] args) throws Exception
   {
      Bean beanMock = PowerMock.createMock(Bean.class);
      expect(beanMock.convert("world")).andReturn("WORLD");
      System.out.println(beanMock.convert("world"));
   }
}

public class Bean
{
   protected String convert(String name) 
   {
      throw new UnsupportedOperationException("not implemented yet");
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:27:15.437

在 java 中，返回类型不是方法签名的一部分，因此您可以随心所欲地使用它。

有两种方法可以透明地实现这一目标：

1.  如果您可以控制调用该方法的对象的注入，请使用 Java 动态代理。
2.  使用带有环绕建议的 AspectJ 方面，您可以操作您无法控制的代码（第三方库）。通过编译时编织或加载时编织使用 AspectJ

编辑：

使用 java 动态代理（用于接口）或 CGlib（用于类），您可以将接口指向代理，您可以从该代理与调用相交，对其进行处理，并将其委托给真正的实现。要实现这一点，您必须控制依赖注入。[这是一个很好的解释](http://www.ibm.com/developerworks/java/library/j-jtp08305/index.html)。

例子：

```
SomeInterface t = (SomeInterface) Proxy.newProxyInstance(SomeInterface.class.getClassLoader(),
                       new Class<?>[] {SomeInterface.class},
                       new TestInvocationHandler(new TestImpl())); 
```

它的作用：TestInvocationHandler 扩展了 InvocationHandler 接口。TestImpl 是一个实现 SomeInterface 的类。当您从 SomeInterface 调用方法时，它将在 TestInvocationHandler 中结束。InvocationHandler 有一个方法调用，如下所示：

```
public Object invoke(Object proxy, Method method, Object[] args); 
```

*   代理 - 对对象的引用

*   method - 被调用的方法

*   args - 方法的参数

例如，使用 AspectJ，您可以使用切入点指定应该包含在环绕通知中的内容。AspectJ 的优点是您可以操作已经编译的代码或您自己的代码，而无需任何显式编程。

例子：

```
@Aspect
public class MyAspect {

    @Around("execution(* org.example.yourMethod(..))")
    public Object doNothing(ProceedingJoinPoint pjp) {

        // You can call the method or ignore the call and do your logic
        return pjp.proceed();
    }

 } 
```

这个[http://www.hubberspot.com/2012/12/how-to-implement-around-advice-using_12.html](http://www.hubberspot.com/2012/12/how-to-implement-around-advice-using_12.html)是一个很好的例子，如何将 AspectJ 与 spring 一起使用。也许它可以帮助你作为一个起点。

用 CGlib 解释它要困难得多，所以我用 Java 动态代理来解释它。对于您的情况

```
 // I suppose Bean implements IBean interface
 IBean beanMock =  (IBean) Proxy.newProxyInstance (
                        IBean.getClass().getClassLoader(),
                        new Class[] { IBean.class },
                        new InvocationHandler() {
                            public Object invoke(Object proxy, Method method, 
                              Object[] args) throws Throwable {
                                if(method.getName().equals("convert")) {
                                    if(args[0].toString().equals("world")) {
                                        return "WORLD"
                                    }
                                } else {
                                    // Implement default case
                                }
                            }
                        });

 System.out.println(beanMock.convert("world")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:22:47.590

你非常接近。看起来您正在使用[PowerMock的](https://code.google.com/p/powermock/)[EasyMock](https://code.google.com/p/powermock/#extension)风格。我更熟悉[Mockito](https://code.google.com/p/powermock/wiki/MockitoUsage13)风格，所以我编写了一个简单的单元测试，它根据您的尝试通过：

```
import static org.junit.Assert.assertEquals;
import static org.powermock.api.mockito.PowerMockito.mock;
import static org.powermock.api.mockito.PowerMockito.when;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
public class BeanTest {
    @Test
    public void testConvert() throws Exception {
        String worldLower = "world";
        String worldUpper = "WORLD";
        Bean beanMock = mock(Bean.class);
        when(beanMock.convert(worldLower)).thenReturn(worldUpper);
        assertEquals(worldUpper, beanMock.convert(worldLower));
    }
} 
```

我所做的唯一额外更改是放置`Bean`并`BeanTest`放入单独的类文件中。

# c# - Windows 8 中的 HttpPost 存储 XAML/C#

> ID：15511665
> 
> 赞同：0
> 
> 时间：2013-03-19T22:22:59.183
> 
> 标签：c#, android, windows, windows-8

我为向服务器发送请求的 android 开发了一个应用程序，我在 Android 中的代码如下：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("www.something.com");
List<NameValuePair> values = new ArrayList<NameValuePair>();
values.add(new BasicNameValuePair("username", user));
values.add(new BasicNameValuePair("password", password));
values.add(new BasicNameValuePair("login-form-type", "pwd"));
httppost.setEntity(new UrlEncodedFormEntity(values, HTTP.UTF_8));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
List<Cookie> cookies = httpclient.getCookieStore().getCookies(); 
```

我已经尝试了一些示例，但似乎即使在 Visual Studio 2012 中的标准 C# 代码在 Windows 应用商店应用程序中也无法正常工作任何人都可以帮助我了解此代码在 Windows 8 应用商店应用程序中的工作方式。

我真的很感激你的帮助。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:27:44.250

有[适用于 Android -> Windows Store 应用程序的资源](http://msdn.microsoft.com/en-us/library/windows/apps/jj945421.aspx)，包括[API 映射索引](http://apimappingsite.cloudapp.net/library?source=Android#Android-Android)。这是[有关如何使用它的文章](http://msdn.microsoft.com/en-us/library/windows/apps/jj945420.aspx)。

此外，还有一个名为[Generation App](http://aka.ms/Jen30TLWin8)的程序，可帮助您按照指导学习路径构建您的第一个应用程序。它还使您可以免费获得技术支持和免费设计咨询（Microsoft 员工不符合条件；我本来希望对我的应用程序进行免费设计咨询！），并且偶尔会有提交应用程序的赠品。

# xtext - 验证 XText 中函数参数的数量

> ID：15511669
> 
> 赞同：2
> 
> 时间：2013-03-19T22:23:15.493
> 
> 标签：xtext

我的 DSL 中有一个原型：

```
prototype function SaySomething(String Words);
prototype function SayHelloLanguage(String Language, String Words); 
```

我想验证当您调用其中一个函数原型时

```
SaySomething("Hello World!");
SayHelloLanguage("French", "Bonjour World!"); 
```

您包含正确数量和类型的参数。

```
Prototype:
   'prototype function' name=ID '('parameters+=Parameter (',' parameters+=Parameter)* ')'
Function:
    name=[Prototype] '('parameters+=Parameter (',' parameters+=Parameter)* ')'
                        ^^^^^ how do I cross reference/validate this part 
```

我想出了足够的交叉引用和范围，以便它会自动完成函数名称，但我看不出如何在语法中定义正确的参数计数或类型限制。

我需要实现验证器吗？或者这是我可以在语法中定义的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T00:40:57.560

我终于想通了。

在 DSLJavaValidator.java 中添加一个检查：

```
@check
public void checkParameterCount(Function function){
    Prototype p = (Prototype) function.eCrossReferences().get(0);
    if(function.getParameters.size() != p.getParameters.size()){
       error("Bad Parameter Count", DSLPackage.Literals.FUNCTION__NAME);
    }
} 
```

当您在编辑器中键入时，所有带有 @check 注释的函数都会被调用。

# python - ValueError：以 10 为底的 long() 的无效文字：''

> ID：15511670
> 
> 赞同：-3
> 
> 时间：2013-03-19T22:23:16.290
> 
> 标签：python, newline, strip

我怎样才能让它工作？

```
n = 1234
f = open("file", "r")
while True:
 x=f.readline()
 print "*********************"
 print n%(long(x))
 if n%(long(x))==0:
   print x
else:
 print "..." 
```

我是 python 的菜鸟，我遇到了一个我不明白的错误。我究竟做错了什么？

```
ValueError: invalid literal for long() with base 10: '' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T22:24:45.790

```
In [104]: long('')
ValueError: invalid literal for long() with base 10: '' 
```

This error is telling you that `x` is the empty string.

You could be getting this at the end of the file. It can be fixed with:

```
while True:
    x = f.readline()
    if x == '': break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:36:54.580

块可以是调试此类事情的`try/except`便捷方式

```
n = 1234
f = open("file", "r")
while True:
 x=f.readline()
 print "*********************"
 try:                                              # Add these 3 lines
     print n%(long(x))
 except ValueError:                                # to help work out
     print "Something went wrong {!r}".format(x)   # the problem value
 if n%(long(x))==0:
   print x
else:
 print "..." 
```

# c# - 如何在动态创建的 winform 控件上引发动态创建的事件？

> ID：15511672
> 
> 赞同：1
> 
> 时间：2013-03-19T22:23:19.330
> 
> 标签：c#, winforms

我有一个`CheckedListBox`从下面以编程方式创建的控件...

```
Button btnSelectAll = new Button();
btnSelectAll.Text = "Select All";
btnSelectAll.Name = item.Id;
btnSelectAll.Tag = param.Id;
CheckedListBox chkListBox = new CheckedListBox();
chkListBox.Size = new System.Drawing.Size(flowPanel.Size.Width - lblListBox.Size.Width - 10, 100);
//set the name and tag for downstream event handling since two-way bindings are not possible with control
chkListBox.Tag = param.Id;
chkListBox.Name = item.Id;
chkListBox.ItemCheck += new ItemCheckEventHandler(chkListBox_ItemCheck);
btnSelectAll.Click += new EventHandler(btnSelectAll_Click); 
```

请注意，当我动态创建项目时，每当 chkListBox 上的 ItemCheck 被点击时，我还添加了一个事件处理程序。代码中的其他地方......我确实......

```
CheckedListBox tmpCheckedListBox = cntrl as CheckedListBox;
for (int i = 0; i < tmpCheckedListBox.Items.Count; i++)
{
   tmpCheckedListBox.SetItemChecked(i, true);
} 
```

当我执行上述操作时，它不会引发 ItemChecked 事件。如何引发此事件，就像用户单击该项目一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:25:23.433

一种方法是只调用分配给事件的相同方法并为发送者传递正确的控件，例如：

```
for (int i = 0; i < tmpCheckedListBox.Items.Count; i++)
{
   tmpCheckedListBox.SetItemChecked(i, true);
   chkListBox_ItemCheck(tmpCheckedListBox.Items[i],null);
} 
```

您通常可以通过传递`EventArgs.Empty`或`null`作为事件参数逃脱，但是如果您在事件处理程序中依赖它们，则需要构造正确的参数类并将其传递，例如：

```
for (int i = 0; i < tmpCheckedListBox.Items.Count; i++)
{
   var args = new ItemCheckEventArgs(i,true,tmpCheckedListBox.GetItemChecked(i));

   tmpCheckedListBox.SetItemChecked(i, true);
   chkListBox_ItemCheck(tmpCheckedListBox.Items[i],args);
} 
```

# java - Java 对等网络应用程序 - 作业

> ID：15511673
> 
> 赞同：2
> 
> 时间：2013-03-19T22:23:36.390
> 
> 标签：java, sockets, p2p

我正在用 Java 创建一个用于文件共享的 p2p 应用程序。每个对等节点都将在我的机器上的不同端口上运行并侦听请求。但我遇到的问题是当创建一个实例时，`PeerNode`我的代码会陷入无限循环。以下是我的代码`PeerNode`。这是我应该如何创建每个节点并让它们监听传入请求的方式吗？

以下代码代表一个对等节点：

```
public class PeerNode
{
    private int port;
    private ArrayList<PeerNode> contacts;
    PeerNode preNode;
    PeerNode postNode;
    private String directoryLocation = "";

    PeerNode(int port)
    {
        this.port = port;
        this.setDirectoryLocation( port+"");
        startClientServer( port );
    }

    private void sendRequest(String fileName, String host, int port) throws UnknownHostException, IOException
    {
        Socket socket = new Socket(host, port);//machine name, port number
        PrintWriter out = new PrintWriter( socket.getOutputStream(), true );
        out.println(fileName);

        out.close();
        socket.close();

    }

    private void startClientServer( int portNum )
    {
        try 
        {
            // Establish the listen socket.
            ServerSocket server = new ServerSocket( 0 );
            System.out.println("listening on port " + server.getLocalPort());

            while( true )
            {
                // Listen for a TCP connection request.
                Socket connection = server.accept();

                // Construct an object to process the HTTP request message.
                HttpRequestHandler request = new HttpRequestHandler( connection );

                // Create a new thread to process the request.
                Thread thread = new Thread(request);

                // Start the thread.
                thread.start();

                System.out.println("Thread started for "+ portNum);
            }

        } 
        catch (Exception e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

下面的类创建所有节点并连接它们：

```
public class MasterClientServer 
{
    public static void main( String [] args )
    {
        int count = 10;
        ArrayList<PeerNode> arrayOfNodes = createNodes( count );
    }

    public static ArrayList<PeerNode> createNodes( int count)
    {
        System.out.println("Creating a network of "+ count + " nodes...");
        ArrayList< PeerNode > arrayOfNodes = new ArrayList<PeerNode>();

        for( int i =1 ; i<=count; i++)
        {
            arrayOfNodes.add( new PeerNode( 0 ) ); //providing 0, will take any free node
        }
        return arrayOfNodes;
    }
}

public class HttpRequestHandler implements Runnable 
{
    final static String CRLF = "\r\n";
    Socket socket;

    public HttpRequestHandler(Socket socket) throws Exception 
    {
        this.socket = socket;
    }

    @Override
    public void run() 
    {
        try 
        {
            processRequest();
        } 
        catch (Exception e) 
        {
            System.out.println(e);
        }

    }   

    /*
     * Gets a request from another node. 
     * Sends the file to the node if available.
     */
    private void processRequest() throws Exception 
    {
        /*DataOutputStream os = new DataOutputStream(socket.getOutputStream());

        InputStream is = socket.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(is));

        // Get the request line of the HTTP request message.
        String requestLine = br.readLine();

        // Extract the filename from the request line.
        // In Get request, the second token is the fie name
        String[] tokens = requestLine.split(" ");
        String fileName = tokens[1];

        // Prepend a "." so that file request is within the current directory.
        fileName = "." + fileName;

        // Open the requested file.
        FileInputStream fis = null;
        boolean fileExists = true;

        try 
        {
            fis = new FileInputStream(fileName);
        } 
        catch (FileNotFoundException e) 
        {
            fileExists = false;
        }

        // construct the response Message
        // Construct the response message.
        String statusLine = null;
        String contentTypeLine = null;
        String entityBody = null;
        if (fileExists) 
        {
            statusLine = "HTTP/1.1 200 OK" + CRLF;
            contentTypeLine = "Content-Type: " + contentType(fileName) + CRLF;
        } 
        else 
        {
            statusLine = "HTTP/1.1 404 Not Found" + CRLF;
            contentTypeLine = "Content-Type: text/html" + CRLF;
            entityBody = "<HTML><HEAD><TITLE>404 Not Found</TITLE></HEAD><BODY>Error 404: Page Not Found</BODY></HTML>";
        }

        // Send the status line.
        os.writeBytes(statusLine);

        // Send the content type line.
        os.writeBytes(contentTypeLine);

        // Send a blank line to indicate the end of the header lines.
        os.writeBytes(CRLF);

        // Send the entity body.
        if (fileExists) {
            sendBytes(fis, os);
            fis.close();
        } else {
            os.writeBytes(entityBody);
        }
        // Close streams and socket.
        os.close();
        br.close();
        socket.close();

    }

    private static void sendBytes(FileInputStream fis, OutputStream os)
            throws Exception 
            {
        // Construct a 1K buffer to hold bytes on their way to the socket.
        byte[] buffer = new byte[1024];
        int bytes = 0;

        // Copy requested file into the socket's output stream.
        while ((bytes = fis.read(buffer)) != -1) {
            os.write(buffer, 0, bytes);
        }*/
    }

    private static String contentType(String fileName) 
    {
        if (fileName.endsWith(".htm") || fileName.endsWith(".html")) 
        {
            return "text/html";
        }
        if (fileName.endsWith(".jpg") || fileName.endsWith(".jpeg")) 
        {
            return "image/jpeg";
        }
        if (fileName.endsWith(".gif")) {
            return "image/gif";
        }
        if (fileName.endsWith(".ram") || fileName.endsWith(".ra")) 
        {
            return "audio/x-pn-realaudio";
        }
        return "application/octet-stream";
    }
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T22:39:12.600

您的`PeerNode`构造函数永远不会返回，因为它正忙于接受新连接。因此，您的循环`createNodes`仅创建第一个 PeerNode 实例。您可以通过在新线程中调用 startClientServer 来解决此问题：

```
new Thread(new Runnable() {
   public void run() {
       startClientServer( port );
   }
}.start(); 
```

# javascript - 安装 npm 模块导致找不到命令

> ID：15511677
> 
> 赞同：7
> 
> 时间：2013-03-19T22:23:58.517
> 
> 标签：javascript, ubuntu, gruntjs

我正在尝试安装[grunt](http://gruntjs.com/)。根据[这篇文章](http://net.tutsplus.com/tutorials/javascript-ajax/meeting-grunt-the-build-tool-for-javascript/)，我需要做的就是运行

`npm install -g grunt`

运行此命令后，它似乎成功并安装了所有依赖项。然后当我尝试运行 grunt 时，我得到命令未找到。

我在 Ubuntu 12.04 上。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-21T10:59:21.093

`Rob W`已经回答了这个。但我会把它贴在这里更清楚。请 Rob，如果你想回答我可以删除这个。

你必须全局安装 grunt-cli：

`sudo npm install -g grunt-cli`

# ruby-on-rails - 使用 to_param 重新路由模型内容

> ID：15511679
> 
> 赞同：0
> 
> 时间：2013-03-19T22:24:06.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, url-rewriting

我想扩展与名为 的模型的内容相关联的 URL `Product`，目前，我可以通过转到 来查看特定产品`products/ID`。

我想扩展产品 URL，使其包含更多描述性信息，例如产品名称。

之前有人建议我调整`to_param`功能（在 Product.rb 中），如下所示：

```
def to_param
  "#{id}-#{product_name.parameterize}"  
end 
```

但是，这目前不起作用。当您将鼠标悬停在它上面/单击它时，与每个产品关联的 URL 会正确显示，但没有找到匹配的产品。我得到错误`no match for ID=ID-specific-product-name`

如果我访问`/products/id`，我仍然可以成功查看特定项目

谁能指导我如何生成包含产品名称 ( `:product_name`) 的更长 URL？

编辑

我的控制器中的`show`控制器动作是：

```
def show
@uniqueturbo = Uniqueturbo.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.xml  { render :xml => @uniqueturbo }
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:43:29.843

如果您正在尝试制作一些 SEO 友好的网址

[http://www.yourdomain.com/products/123123-My-Little-PonyBook](http://www.yourdomain.com/products/123123-My-Little-PonyBook)

*   我认为最简单的方法是改变路线，像这样

    得到'/products/:title/:id' => "products#show"

然后你会得到 seo 友好的 url，比如：

[http://www.yourdomain.com/products/My-Little-PonyBook/123123](http://www.yourdomain.com/products/My-Little-PonyBook/123123)

要生成此 url，请创建帮助程序

```
def url_for_product(product)
  "/products/#{product.title}/#{product.id}"
end 
```

*   另一种方法是离开正常的 RESTful 路由，并重新解析 'id' 参数，例如：

    ```
    def show
      product_id = params[:id].split('_')[0] # :-)
      # ...
    end 
    ```

这一次你仍然需要辅助方法，比如：

```
def url_for_product(product)
   product_path(product) + "_#{product.title.tableize}"
end 
```

# javascript - 从后端加载的模态被其他元素覆盖

> ID：15511682
> 
> 赞同：0
> 
> 时间：2013-03-19T22:24:19.080
> 
> 标签：javascript, jquery, html

我有一个 html 片段由后端加载到`main`我页面的 div 中。它包含`modal`单击链接时出现的一个。问题是，它`modal`能够被页面上的其他元素覆盖。设置`z-index`是没有用的，因为如果 中的元素比div 高，则`header`将显示在 后面，而不管它的. 我目前正在通过使用 javascript (jQuery) 来解决问题，将克隆附加到，然后删除原始`z-index``main``modal``header``z-index``clone``modal``body``modal`. 这似乎是一个 hacky 解决方法，可能会导致潜在问题，有没有更好的方法来做到这一点？模态框通常是如何加载的，这样它们就不会遇到这个问题？

这是问题的一个jsfiddle：http: [//jsfiddle.net/kraxF/](http://jsfiddle.net/kraxF/)

这是 HTML，如您所见，模态在 DOM 树中非常低，并且可能被页眉或页脚或主元素中的元素覆盖，如果它们的 z-index 高于“由后端加载” .

```
<div id="container">
    <div id="header">
        Header
    </div>
    <div id="main">
        Main
        <div id="loaded-by-backend">
            <div id="modal">
                Modal
            </div>
        </div>
    </div>
    <div id="footer">
        Footer
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:08:17.470

如果您可以更改 CSS，只需`position:relative`从`#main`. [http://jsfiddle.net/kraxF/3/](http://jsfiddle.net/kraxF/3/)

# c++ - 如何声明一个对象 in c++ I'm having the hardest time figuring this thing out. The error is in line 58 of main.cpp, I wrote a noticeable comment on line 58. |58|error: expected primary-expression before ';' token < 问问题 问问题 2013-03-19T22:24:23.827 161 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm having the hardest time figuring this thing out. The error is in line 58 of main.cpp, I wrote a noticeable comment on line 58. |58|error: expected primary-expression before ';' token Main.cpp #include <iostream>#include <vector>#include "LinkedList.h" using namespace std; bool eic(const string &str1, const string &str2){ if(str1.length() != str2\. length()) return false; for(int i = 0; i < str1.length(); i++) if(toupper(str1[i]) != toupper(str2[i])) return false; return true; } vector <string>tokenizer(const string &str, char delim, bool emptyok) { vector <string>tokens; string t; for(int i = 0; i < str.length(); i++) { if (str[i] == delim) { if(emptyok || (t.length() != 0)) tokens.push_back(t); t.clear(); continue; } t.push_back(str[i]); } if(emptyok || (t.length() != 0)) tokens.push_back(t); return tokens; } int main(){ LinkedList <int>sList;// = LinkedList<int>; string input; cout << "Type 'commands' to see the list of commands" << endl; cin >> input; vector <string>inputV = tokenizer(input,' ',false); while(!eic(input,"exit")){ if(eic(input,"commands")){ cout << endl; cout << "Do not include <> in any commands" << endl; cout << endl; cout << "Create <name of="" list="">: Create a new list and names it." << endl; cout << "Print <name of="" list="">: Prints out the entire list." << endl; cout << "Add <name of="" list=""><item>: Adds an element to the list." << endl; cout << "Delete <name of="" list=""><item>: Deletes an element from the list." << endl; cout << "DeleteAll <name of="" list=""><item>: Deletes all occurences of the element from the list." << endl; cout << "MakeEmpty <name of="" list="">: Removes all elements from the list." << endl; cout << "Length <name of="" list="">: Tells you how many elements are in the list" << endl; cout << "Remove <name of="" list="">deletes an entire list" << endl; cout << "Exit: Terminates the program" << endl; } else if(eic(inputV[0],"create")){ sList = LinkedList<int>; // LINE 58 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! sList.setName(inputV[1]); cout << sList.getName(); //cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"print")){ cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"add")){ //sList->insertItem(9); cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"delete")){ cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"deleteAll")){ cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"makeEmpty")){ cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"length")){ cout << "This function is still under construction" << endl; } else if(eic(inputV[0],"remove")){ cout << "This function is still under construction" << endl; } else cout << endl << "Invalid inquiry, please enter 'commands' to see a list of valid commands." << endl; cin >> input; } } If you need it here is my LinkedList.cpp file #include <iostream>#include "LinkedList.h" using namespace std; template <class xtype="">LinkedList<xtype>::LinkedList() { cout << "List created successfuly\n"; } template <class xtype="">void LinkedList<xtype>::setLength(int x){ length = x; } template <class xtype="">int LinkedList<xtype>::getLength(){ return length; } template <class xtype="">void LinkedList<xtype>::setName(string x){ name = x; } template <class xtype="">string LinkedList<xtype>::getName(){ return name; } template <class xtype="">void LinkedList<xtype>::insertItem(xtype item){ node <xtype>*temp = new node<xtype>; if(head == NULL || head->info > item){ temp->next = head; head = temp; } else{ node <xtype>*q = head; node <xtype>*p = head->next; while(p != head && p->info <= item){ q = p; p = p->next; } q->next = temp; temp->next = p; } } template class LinkedList<int>; And the LinkedList header file #ifndef LINKEDLIST_H #define LINKEDLIST_H #include <iostream>using namespace std; template <class xtype="">struct node{ xtype info; node *next; node *prev; }; template <class xtype="">class LinkedList { public: LinkedList(); int getLength(); void setLength(int); void setName(string); string getName(); //bool searchItem(xtype item); void insertItem(xtype item); //void deleteItem(xtype item); //int numOccur(xtype item); protected: private: node <xtype>*head; node <xtype>*term; int length; string name; }; #endif // LINKEDLIST_H Any help you can give me would be much appreciated. I'm brand new to c++, coming from java, and I've just been slaving over this all of last night up until now. If you have the option it would be simpler to locate the third "-" and take a substring of the input. See nth-index-of. var input = "ANG-B31-OPS-PMR-MACE-SS-0229"; input = input.Substring(input.NthIndexOf("-", 3) + 1, 3); c++compiler-errorslinked-list 4 1 回答 1 This answer is useful 4 当您声明为时sList，LinkedList<int>您已经调用了默认构造函数来初始化sList。无需像您（尝试）在失败的行中那样明确分配它。 当从 Java 到 C++ 时，这展示了一个令人困惑但至关重要的概念：RAII 于 2013-03-19T22:28:23.860 回答 Related 2 c++ - C ++将函数指针指向的函数分配给另一个函数指针 2 php - MySQL 插入：避免使用多个列的重复项 1 html - CSS 不会在我需要的地方对齐 1 php - 将字符串值与 int 值相加，两者都是数字 3 php - cookies not being saved/read correctly 1 java - 在二维数组网格上绘制圆（JAVA） 1 css - css logo link not working on IE or firefox 1 javascript - ExtJS 动态添加标签 3 c++ - stof 函数未在此范围内声明 c++ 5 javascript - Javascript不熟悉的赋值构造 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</int></xtype></xtype></class></class></iostream></int></xtype></xtype></xtype></xtype></xtype></class></xtype></class></xtype></class></xtype></class></xtype></class></xtype></class></iostream></int></name></name></name></item></name></item></name></item></name></name></name></string></int></int></string></string></vector></iostream>

> ID：15511685
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c++, compiler-errors, linked-list

I'm having the hardest time figuring this thing out. The error is in line 58 of main.cpp, I wrote a noticeable comment on line 58.

```
|58|error: expected primary-expression before ';' token 
```

Main.cpp

```
#include <iostream>
#include <vector>
#include "LinkedList.h"
using namespace std;

bool eic(const string &str1, const string &str2){
    if(str1.length() != str2\. length())
       return false;
    for(int i = 0; i < str1.length(); i++)
        if(toupper(str1[i]) != toupper(str2[i])) return false;
    return true;
}

vector<string> tokenizer(const string &str, char delim, bool emptyok)
{
    vector<string> tokens;
    string t;

    for(int i = 0; i < str.length(); i++)
    {
        if (str[i] == delim)
        {
            if(emptyok || (t.length() != 0))
                tokens.push_back(t);

            t.clear();
            continue;
        }

        t.push_back(str[i]);
    }
    if(emptyok || (t.length() != 0)) tokens.push_back(t);
    return tokens;
}

int main(){
    LinkedList<int> sList;// = LinkedList<int>;
    string input;
    cout << "Type 'commands' to see the list of commands" << endl;
    cin >> input;
    vector<string> inputV = tokenizer(input,' ',false);
    while(!eic(input,"exit")){
        if(eic(input,"commands")){
            cout << endl;
            cout << "Do not include <> in any commands" << endl;
            cout << endl;
            cout << "Create <name of list>: Create a new list and names it." << endl;
            cout << "Print <name of list>: Prints out the entire list." << endl;
            cout << "Add <name of list> <item>: Adds an element to the list." << endl;
            cout << "Delete <name of list> <item>: Deletes an element from the list." << endl;
            cout << "DeleteAll <name of list> <item>: Deletes all occurences of the element from the list." << endl;
            cout << "MakeEmpty <name of list>: Removes all elements from the list." << endl;
            cout << "Length <name of list>: Tells you how many elements are in the list" << endl;
            cout << "Remove <name of list> deletes an entire list" << endl;
            cout << "Exit: Terminates the program" << endl;
        }
        else if(eic(inputV[0],"create")){
            sList = LinkedList<int>; // LINE 58 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            sList.setName(inputV[1]);
            cout << sList.getName();
            //cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"print")){
            cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"add")){
            //sList->insertItem(9);
            cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"delete")){
            cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"deleteAll")){
            cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"makeEmpty")){
            cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"length")){
            cout << "This function is still under construction" << endl;
        }
        else if(eic(inputV[0],"remove")){
            cout << "This function is still under construction" << endl;
        }
        else cout << endl << "Invalid inquiry, please enter 'commands' to see a list of valid commands." << endl;
        cin >> input;
    }
} 
```

If you need it here is my LinkedList.cpp file

```
#include <iostream>
#include "LinkedList.h"

using namespace std;

template <class xtype>
LinkedList<xtype>::LinkedList()
{
    cout << "List created successfuly\n";
}

template <class xtype>
void LinkedList<xtype>::setLength(int x){
    length = x;
}

template <class xtype>
int LinkedList<xtype>::getLength(){
    return length;
}

template <class xtype>
void LinkedList<xtype>::setName(string x){
    name = x;
}

template <class xtype>
string LinkedList<xtype>::getName(){
    return name;
}

template <class xtype>
void LinkedList<xtype>::insertItem(xtype item){
    node<xtype> *temp = new node<xtype>;
    if(head == NULL || head->info > item){
        temp->next = head;
        head = temp;
    }
    else{
        node<xtype> *q = head;
        node<xtype> *p = head->next;

        while(p != head && p->info <= item){
            q = p;
            p = p->next;
        }
        q->next = temp;
        temp->next = p;
    }
}

template class LinkedList<int>; 
```

And the LinkedList header file

```
#ifndef LINKEDLIST_H
#define LINKEDLIST_H
#include <iostream>
using namespace std;

template <class xtype>
struct node{
    xtype info;
    node *next;
    node *prev;
};

template <class xtype>
class LinkedList
{
    public:
        LinkedList();
        int getLength();
        void setLength(int);
        void setName(string);
        string getName();
        //bool searchItem(xtype item);
        void insertItem(xtype item);
        //void deleteItem(xtype item);
        //int numOccur(xtype item);
    protected:
    private:
        node<xtype> *head;
        node<xtype> *term;
        int length;
        string name;
};

#endif // LINKEDLIST_H 
```

Any help you can give me would be much appreciated. I'm brand new to c++, coming from java, and I've just been slaving over this all of last night up until now.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:28:23.860

当您声明为时`sList`，`LinkedList<int>`您已经调用了默认构造函数来初始化`sList`。无需像您（尝试）在失败的行中那样明确分配它。

当从 Java 到 C++ 时，这展示了一个令人困惑但至关重要的概念：[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

# shell - Shell Scripting If [ -f ./file ]

> ID：15511690
> 
> 赞同：21
> 
> 时间：2013-03-19T22:25:06.510
> 
> 标签：shell

I am learning shell Scripting on my own, and I was investigation how to do the If, and I didn’t understand an example that had:

```
if [ -f ./$NAME.tar ]; then
    //do something
else
    //something else 
```

Now I did some experimenting, and I gave NAME the name of a file I had on my directory. When I executed without the -f, it was entering in the else condition, but with -f it enters the //do something condition So I presume -f is for file. Is this correct? I just couldn’t find information to confirm this.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-19T22:27:25.873

从`bash`手册：

```
 -f file - True if file exists and is a regular file. 
```

所以是的，`-f`意味着文件（`./$NAME.tar`在您的情况下）存在并且是常规文件（例如，不是设备文件或目录）。

# opengl - OpenGL Window Overlay

> ID：15511696
> 
> 赞同：0
> 
> 时间：2013-03-19T22:25:32.527
> 
> 标签：opengl, overlay

What I need to do is create a program that overlays the whole screen and every 30 seconds the screen needs to flash black once.

the program just needs to be on top of everything, doesn't have to work over the top of games, but wouldn't say no if it did!

But i've got no idea where to start. Ideally the solution would be cross-platform for both windows and osx.

Does anybody have any ideas about where I should start or could whip up a quick demo?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:44:40.067

OpenGL（你这样标记它）不会帮助你。

> 创建一个覆盖整个屏幕的程序，

执行此操作的规范方法是创建一个无装饰、无边框的顶级窗口，并设置一些保持在顶部的属性。

> 并且每 30 秒屏幕需要闪黑一次。

你如何定义“闪回一次”？您的意思是您希望显示在一个垂直回溯期或给定时间段内可见？老实说，作为电子设备的修补匠，我会使用少量晶体管、电阻器和电容器来屏蔽模拟 VGA 信号。

无论如何，如果您想使用软件来做到这一点，这将是一项艰苦的工作。如果您使用前面提到的停留在顶部的窗口来执行此操作，那么当您“闪烁”它时，所有具有可见输出的程序都会收到重绘事件，处理这些事件需要一些时间。在最好的情况下，系统使用一个合成窗口管理器，它实际上可以立即显示桌面。如果没有合成器，就不可能“闪烁”屏幕。

> 理想情况下，解决方案将是 windows 和 osx 的跨平台

像这样的任务无法跨平台解决。为此，有太多依赖于操作系统的工作要做。

我想这是为了某种神经学或心理学实验。我认为使用一些 VGA 拦截电路来执行此操作实际上会更容易、更快地实现解决方案。我可以帮你。但我认为还有另一个更适合于此的 StackExchange。不幸的是，数字显示接口（DVI、HDMI 和 Display Port）使用复杂的线路编码方案，它不能像 VGA 那样容易消隐，所以你必须有一台能够模拟 (=VGA) 输出的计算机和一个带 VGA 输入的显示器.

# r - Extract item from list

> ID：15511699
> 
> 赞同：-7
> 
> 时间：2013-03-19T22:26:00.413
> 
> 标签：r

I have generate the below list and I want to extract the cor value (the last value) only. Is there a way to do that? I tried using $estimate to do that, but to no avail. Thanks in advance for the help.

```
[[6]]

Pearson's product-moment correlation

data:  cer[, x] and par[, y] 
t = 109.0053, df = 1898, p-value < 2.2e-16
alternative hypothesis: true correlation is not equal to 0 
95 percent confidence interval:
0.9221188 0.9345283 
sample estimates:
cor 
0.9285826 #this value 
```

output from str(list):

```
$ :List of 9
..$ statistic  : Named num 68.5
.. ..- attr(*, "names")= chr "t"
..$ parameter  : Named int 1898
.. ..- attr(*, "names")= chr "df"
..$ p.value    : num 0
..$ estimate   : Named num 0.844
.. ..- attr(*, "names")= chr "cor"
..$ null.value : Named num 0
.. ..- attr(*, "names")= chr "correlation"
..$ alternative: chr "two.sided"
..$ method     : chr "Pearson's product-moment correlation"
..$ data.name  : chr "cer[, x] and par[, y]"
..$ conf.int   : atomic [1:2] 0.83 0.856
.. ..- attr(*, "conf.level")= num 0.95
..- attr(*, "class")= chr "htest" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:35:00.660

> <头脑.阅读>
> 
> 您似乎提供了一个列表，其中包含以下结果 `cor.test(..., method = 'pearson')`
> 
> < \mind.read >

如果调用此列表`z`

然后

```
 sapply(z, '[[', 'estimate') 
```

将从中的每个元素中提取`estimate`元素`z`

记财运有用(312)

```
fortune(312)

The problem here is that the $ notation is a magical shortcut and like any other
magic if used incorrectly is likely to do the programmatic equivalent of turning
yourself into a toad.
   -- Greg Snow (in response to a user that wanted to access a column whose name is
      stored in y via x$y rather than x[[y]])
      R-help (February 2012) 
```

# c# - Change contents without redirecting to about:blank

> ID：15511702
> 
> 赞同：1
> 
> 时间：2013-03-19T22:26:23.107
> 
> 标签：c#, .net, winforms, webbrowser-control

I'm currently working on an application that modifies a specific web page to hide irrelevant information and the displays it in a WebBrowser control in the application window. Unfortunately as soon as i set the DocumentText Property of the WebBrowser, it navigates to about:blank and the displays the HTML content. However, because it redirects to about:blank, all relative element in the web page become invalid, creating a very odd looking web page with no stylesheet what so ever.

Is there a way i can modify what the WebBrowser control displays, without having it redirect to about:blank and therefore ruining all relative elements?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:54:52.573

这应该适用于将 HTML 元素注入您的页面，而无需重置 DOM 的其余部分：

```
private void button1_Click(object sender, EventArgs e)
{
    HtmlElement myElem = webBrowser1.Document.CreateElement("input");
    dynamic element = myElem.DomElement;

    element.SetAttribute("value", "Hello, World!");
    (webBrowser1.Document.GetElementsByTagName("body")[0]).AppendChild(myElem);
} 
```

# java - 读取任何具有奇怪编码的文本文件？

> ID：15511703
> 
> 赞同：7
> 
> 时间：2013-03-19T22:26:36.167
> 
> 标签：java, text-files, bufferedreader, fileinputstream

我有一个带有奇怪编码“UCS-2 Little Endian”的文本文件，我想使用 Java 读取它的内容。

![使用 NotePad++ 打开文本文件](../Images/65c8ab98e0cd3a0bb03df0a9a547465c.png)

正如您在上面的屏幕截图中看到的，文件内容在 Notepad++ 中看起来很好，但是当我使用这段代码阅读它时，控制台中只会打印垃圾：

```
String textFilePath = "c:\strange_file_encoding.txt"
BufferedReader reader = new BufferedReader( new InputStreamReader( new FileInputStream( filePath ), "UTF8" ) );
String line = "";

while ( ( line = reader.readLine() ) != null ) {
    System.out.println( line );  // Prints garbage characters 
} 
```

要点是用户选择要读取的文件，因此它可以是任何编码，并且由于我无法检测到文件编码，因此我使用“UTF8”对其进行解码，但如上例所示，它无法正确读取.

**有没有以正确的方式阅读这些奇怪的文件？或者至少我可以检测到我的代码是否无法正确读取？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T22:34:59.200

您在 InputStreamReader 构造函数中使用 UTF-8 作为编码，因此它将尝试将字节解释为 UTF-8 而不是 UCS-LE。这是文档：[`Charset`](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/charset/Charset.html)

我想你需要根据它使用 UTF-16LE。

以下是有关支持的字符集及其 Java 名称的更多信息： [支持的编码](http://docs.oracle.com/javase/1.5.0/docs/guide/intl/encoding.doc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:34:28.673

您在`InputStreamReader`. 如果 UTF8，您是否尝试过使用 UTF-16LE 代替？

```
BufferedReader reader = new BufferedReader( new InputStreamReader( new FileInputStream( filePath ), "UTF-16LE" ) ); 
```

根据[`Charset`](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html)：

> UTF-16LE 十六位 UCS 转换格式，little-endian 字节顺序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:52:21.343

您不能对所有文件使用 UTF-8 编码，尤其是在您不知道要使用哪种文件编码的情况下。使用可以在读取文件之前检测文件编码的库，例如：[juniversalchardet](http://code.google.com/p/juniversalchardet/)或[jChardet](http://jchardet.sourceforge.net/)

有关更多信息，请参阅[Java：如何确定流的正确字符集编码](https://stackoverflow.com/questions/499010/java-how-to-determine-the-correct-charset-encoding-of-a-stream)

# tfs - TF31002: Unable to Connect to this Team Foundation server

> ID：15511704
> 
> 赞同：9
> 
> 时间：2013-03-19T22:26:42.417
> 
> 标签：tfs, visual-studio-2012, team-explorer

I have a server that the team foundation server is installed on. I can connect to TFS from several computers, but I can't connect to its from my laptop through internet. I can connect to it from web, but I can't via team explorer.

Indeed I can't add server via team explorer in visual studio, and I receive following error.

![TF31002 Error message](../Images/731cbf9aae480d8483177ed9c985317b.png)

I have connected to this server for 3 months. Then I deleted the team project from server and worked offline. Now I want to add my solution to TFS, but I can't connect to it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-05T19:20:03.810

刷新 TFS 缓存为我修复了这个错误。这样做；

删除以下文件夹中的内容

*   C:\Users\<>\AppData\Local\Microsoft\Team Foundation
*   C:\Users\<>\AppData\Local\Microsoft\VisualStudio
*   C:\Users\<>\AppData\Local\Microsoft\VSCommon

在命令提示符下转到 Visual Studio IDE 文件夹，然后从 Visual Studio IDE 文件夹运行以下命令“devenv /resetuserdata”。

*   64 位的典型位置：C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE
*   32 位的典型位置：C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE

另外，不确定它是否有所作为，但我也删除了这个注册表项；

*   KEY_CURRENT_USER\Software\Microsoft\VSCommon\12.0\ClientServices\TokenStorage

[来源和更多细节在这里](https://blogs.msdn.microsoft.com/willy-peter_schaub/2010/09/15/if-you-have-problems-with-tfs-or-visual-studio-flush-the-user-cache-or-not/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T07:39:29.230

如果您使用的是比 TFS 更旧的 VS 版本，请确保安装前向兼容包。

# kdevelop - Kdevelop4 path to library binaries

> ID：15511706
> 
> 赞同：0
> 
> 时间：2013-03-19T22:26:49.793
> 
> 标签：kdevelop, kdevelop4

I'm having problem reported as below while trying to execute it. Where should I go to let it know where to find the .so lib which is under ${HOME}/projects/OpenImageIO/dist/linux64/lib?

Starting: /home/chaoren/Dropbox/hw2/hw2_3 /home/chaoren/Dropbox/hw2/hw2_3: error while loading shared libraries: libOpenImageIO.so.1.2: cannot open shared object file: No such file or directory

I built this project by importing my Makefile

```
OFILES = Matrix.o LinearAlgebra.o PerlinNoise.o Camera.o OIIOFiles.o Image.o Utilities.o Grid.o SparceGrid.o VolumeOperations.o Ray.o Face.o Line.o Lights.o Group.o PolySurf.o File.o OBJFile.o Vector.o

AFILES = $(OFILES)

ROOTDIR = .

LIB = $(ROOTDIR)/libVR.a

LINKS =  Magick++-config  --cppflags --cxxflags --ldflags --libs -lm -lOpenImageIO -L/usr/local/lib -L${HOME}/projects/OpenImageIO/dist/linux64/lib

INCLUDES = Magick++-config  --cppflags --cxxflags -I${HOME}/projects/OpenImageIO/dist/linux64/include

CXX = g++ -Wall -g -O2 -D_THREAD_SAFE -pthread -fopenmp

.C.o:
    $(CXX) -c $(INCLUDES) $<

all: $(AFILES)
    ar rv $(LIB) $?

hw2_1:  hw2_1.C
    $(CXX) hw2_1.C $(INCLUDES) $(LIB) $(LINKS) -o hw2_1

hw2_2:  hw2_2.C
    $(CXX) hw2_2.C $(INCLUDES) $(LIB) $(LINKS) -o hw2_2

hw2_3:  hw2_3.C
    $(CXX) hw2_3.C $(INCLUDES) $(LIB) $(LINKS) -o hw2_3

noiseimage:  noiseimage.C
    $(CXX) noiseimage.C $(INCLUDES) $(LIB) $(LINKS) -o noiseimage

clean:
    rm -f *.o *.gch core $(LIB) vr vrppm *~ vRender hw2_1 hw_2 hw2_3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:06:21.720

KDevelop4 使用 CMake 作为其默认构建系统。在 CMake 中，所有库和其他程序元素都在特殊文件 (CMakeLists.txt) 中标识。然后，该文件成为实际构建可执行文件的 make 文件的基础。

# python - python在Mac上打开文件到哪里？

> ID：15511709
> 
> 赞同：2
> 
> 时间：2013-03-19T22:27:01.670
> 
> 标签：python, file, text, file-io, filesystems

我制作了一个简单的 python 脚本来创建一个文本文件。脚本的内容是

```
f = open("New", "w")
f.close 
```

现在我将脚本移动到桌面（我在 Mac 上）并运行它，但没有任何显示。桌面上没有创建对我可见的文件。

我实际上制作了这个小脚本，因为我的其他脚本之一涉及打开/创建一个文本文件并从中读取。我在我的程序中永远输入了错误的信息，现在整个事情都坏了，我无法修复它，因为我不知道它是在哪里创建了该死的文本文件。我的印象是，只需打开一个文件并为其提供绝对路径，就会在与脚本相同的目录中创建它。我好像弄错了。

我一直在使用命令从终端启动脚本

```
python3 /Users/me/Desktop/script.py 
```

因此，我觉得它在 python3 安装位置或 python3 unix exec 所在的任何位置创建文件。我认为。查不出来。

大家有愿意帮忙的吗？

-pipsqueaker117

编辑：[这是一个坏掉](http://pastebin.com/ywm3YpkV)的大程序的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:28:18.767

它将在当前工作目录中创建，该目录是您从中调用脚本的目录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T22:28:40.130

您的文件将在当前目录中创建（`/Users/me/`如果您刚刚打开终端，很可能在其中）

尝试：

```
cd /Users/me/Desktop/
python3 /Users/me/Desktop/script.py 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T22:31:49.480

你可以随时问：

```
import os 

cwd=os.getcwd()
print(cwd) 
```

这将打印文件（没有路径）将在其中打开的目录。

您可以通过以下方式更改到特定目录（在 Python 中）：

```
import os 

try:
    os.chdir('/Users/me/Desktop')
except OSError as e:
    print e 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T22:33:33.173

您应该修改您的程序以将工作目录（在您写入文件之前）更改为您希望文件显示的位置。

```
import os
os.chdir('/Users/me/Desktop') # or whatever 
```

这应该是您有权写入文件的目录。

# c - gcc 编译以“.C”结尾的 c 文件（大写 C）

> ID：15511711
> 
> 赞同：2
> 
> 时间：2013-03-19T22:27:11.220
> 
> 标签：c, gcc

我壳时的一种奇怪行为：

```
bush@ubuntu:~/CPPWorkspace/Ex12$ gcc users/dubi/justPrnit.C 
```

返回错误：

```
gcc: error trying to exec 'cc1plus': execvp: No such file or directory 
```

但是当我将 justPrnit.C 更改为 justPrnit.c（带有小“c”）时，它编译成功。

那是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:29:59.100

> 尝试执行“cc1plus”时出错

因为`.C`被假定为 C++ 源文件（`cc1plus`是 GCC 的 C++ 解析器后端 - 顺便说一句，您的本地安装的 GCC 似乎缺少`g++`- 您是否使用默认的 [不完整] 设置？）。

要解决此问题，请使用`-x`开关强制语言：

```
gcc -x c users/dubi/justPrnit.C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:29:04.577

GCC 识别`.C`为 C++，而不是 C

# javascript - 尝试在 Magento 中使用 Google 地图方向的错误（未捕获的 ReferenceError：未定义 google）

> ID：15511713
> 
> 赞同：0
> 
> 时间：2013-03-19T22:27:13.780
> 
> 标签：javascript, jquery, google-maps, magento, google-maps-api-3

我创建了一个路线模板文件，专门用于利用 Google 路线。我的脚本在 Magento 之外工作。不幸的是，当我将脚本移动到 page/directions.phtml 控制台时，会返回以下错误：

“未捕获的 ReferenceError：未定义 google”

当我尝试单击触发 calcRoute() 函数的测试时，出现以下错误：

“未捕获的类型错误：无法调用未定义的方法‘路由’”

我认为这些错误与 Google Maps API 调用有关，但是图形地图在页面上显示和运行良好。这些错误具体与调用 google.maps.DirectionsService() 以在下面显示的 javascript 的第 2 行定义方向服务以及在最后调用方向服务。路由有关。两者都与方向有关。

为什么会显示地图，但是当脚本在我的 html 测试中正常工作时，方向会抛出错误？我很混乱。

**Javascript**

```
 var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function directionsMap() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(38.77627, -95.910965);
    var mapOptions = {
      zoom:4,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById('map-directions'), mapOptions);
    directionsDisplay.setMap(map);

    //Place Markers
    var baldwinsvilleMarker = new google.maps.Marker({
        position: new google.maps.LatLng(00.00000, 00.00000),
        map: map,
        title:"store location 1"
    });
    var sacramentoMarker = new google.maps.Marker({
        position: new google.maps.LatLng(00.00000, 00.00000),
        map: map,
        title:"store location 2"
    });
    var stLouisMarker = new google.maps.Marker({
        position: new google.maps.LatLng(000.00000, -000.00000),
        map: map,
        title:"store location 3"
    });
    var catersvilleMarker = new google.maps.Marker({
        position: new google.maps.LatLng(00.000000, -84.000000),
        map: map,
        title:"store location 4"
    });

    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("get-directions"));

  }

  function calcRoute() {
    console.log("calcRoute ran")
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    console.log(start + ' ' + end)
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  } 
```

**HTML**

```
 #I am including this line in the document head
           <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
           <style onload="directionsMap()">
            #map-directions{width: 65%; height: 300px; float: left; border:5px solid #EEEEEE;}
            #get-directions{width: 65%; float: left;}
            .map-sidebar{width: 32%; height: 300px; float: right;}
            </style>

            <div id="map-directions"></div>
            <div class="map-sidebar">
                <h2>Get Directions</h2>

                <input type="text" id="start" value="chicago, il"/>
                <b>End: </b>
                <select id="end" onchange="calcRoute();">

                  <option value="value 1">
                      store location 1
                  </option>

                  <option value="value 2">
                      store location 2
                  </option>

                  <option value="value 3">
                      store location 3
                  </option>

                  <option value="value 4">
                      store location 4
                  </option>

                </select>
                <button onclick="calcRoute();"> test</button>

            </div>
            <div id="get-directions"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:49:29.893

您应该按照以下步骤进行呼叫：

1.  首先调用google map api

2.  然后调用自己的JS

3.  开火`directionsMap()`，`body onload=directionsMap()`不`style`加载。

我认为你的主要问题是，你`directionsMap()`在谷歌完成加载之前调用函数。

`directionsMap()`所以我认为在 jQuery 加载事件中调用它是更好的选择，例如：

```
$(function() {
   directionsMap()
}); 
```

# aptana - Aptana 转到最后打开的编辑器命令

> ID：15511716
> 
> 赞同：0
> 
> 时间：2013-03-19T22:27:23.300
> 
> 标签：aptana, aptana3

我正在使用 Aptana Studio 3 并且正在寻找一个命令，它将带我进入我之前使用的编辑器（一个 Netbeans ctrl-tab 或 Eclipse 的 ctrl-F6）。我已经尝试了几个听起来很有希望的命令，但它们似乎都没有正常运行。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:18:20.120

转到`Windows->Preferences->General->Keys`并查看您为命令**'Next Editor'**和**'Previous Editor'**设置的键绑定。在过滤器搜索框中键入这些命令，以节省您自己滚动的时间。

在 Windows 上，下一个和上一个编辑器的快捷方式实际上`Ctrl+F6`分别是`Ctrl+Shift+F6`，这也恰好是 Eclipse 中的默认设置。因此，如果您未设置这些命令的键绑定，那么您可以在此处设置它们。

# javascript - Kendo UI 不显示标题和视图

> ID：15511719
> 
> 赞同：0
> 
> 时间：2013-03-19T22:27:28.837
> 
> 标签：javascript, android, html, cordova, kendo-ui

我最近开始开发一个应用程序，并认为 KendoUI 和 phonegap 将是我们项目的最佳解决方案，但是我无法让 KendoUI 正确显示。

我正在使用 mac 开发应用程序，当我运行应用程序时，它会完美显示代码，我不确定这是否是因为它将它呈现为 iOS 设备，这就是它正确显示的原因，但它没有如您在此处看到的，使用 android 设备：请注意，这不仅适用于平板电脑，我已经在 Galaxy SII、HTC EVO 4G 和 Nexus 10 上进行了尝试。所有这些都产生了下面显示的相同结果。

问题是应用程序似乎忽略了视图并将标题放置在错误的位置。

如果您需要更多信息，请随时询问.. 我不知道还有什么要列出的。

我的这个应用程序的文件结构是：

```
/ <--- project root
 /assets/
  /www/
   /css/
    /kendo.mobile.all.min.css
   /js/
    /jquery.min.js
    /kendo.all.min.js
    /kendo.mobile.min.js
   cordova-2.4.0.js
   index.html 
```

![在此处输入图像描述](../Images/d84f95ffe8d2e9423db0718f961a760f.png)

教程：[http](http://docs.kendoui.com/getting-started/introduction) ://docs.kendoui.c​​om/getting-started/introduction 这是我正在关注的教程的源代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>My App</title>
    <script src="cordova-2.4.0.js"></script>
    <link href="css/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.mobile.min.js" type="text/javascript"></script>
    <script>    
    </script>
</head>
<body>
<div id="home" data-role="view" data-layout="default">
    Hello Mobile World!
</div>

<section data-role="layout" data-id="default">
    <header data-role="header">
        <div data-role="navbar">My App</div>
    </header>
    <!--View content will render here-->
    <footer data-role="footer">
        <div data-role="tabstrip">
            <a href="#home">Home</a>        
        </div> 
    </footer>
</section>
<script>var app = new kendo.mobile.Application();</script>
</body>
</html> 
```

我也使用了本教程，但是我不明白他们发布的配置文件是我的：http: [//www.adobe.com/devnet/phonegap/articles/getting-started-kendo-ui-mobile-phonegap-build .html](http://www.adobe.com/devnet/phonegap/articles/getting-started-kendo-ui-mobile-phonegap-build.html)

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<cordova>
    <!--
    access elements control the Android whitelist.
    Domains are assumed blocked unless set otherwise
     -->

    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->

    <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
    <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
    <access origin=".*"/>

    <!-- <content src="http://mysite.com/myapp.html" /> for external pages -->
    <content src="index.html" />

    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="true" />
    <preference name="exit-on-suspend" value="false" />
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
    <plugin name="Echo" value="org.apache.cordova.Echo" />
    <plugin name="Globalization" value="org.apache.cordova.Globalization"/>
    <plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser"/>
</plugins>
</cordova> 
```

最后是我的 MainActivity：

```
package com.example.project;

import android.os.Bundle;
import org.apache.cordova.DroidGap;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

编辑：我刚刚尝试了这个解决方案.. [http](http://docs.kendoui.com/getting-started/mobile/navbar#showing-hidden-view-title) ://docs.kendoui.c​​om/getting-started/mobile/navbar#showing-hidden-view-title但是它没有成功显示视图。我从另一个问题中得到了这个：[header and footer not displayed in Kendo UI Mobile PhoneGap Application For Android](https://stackoverflow.com/questions/13043724/header-and-footer-not-displayed-in-kendo-ui-mobile-phonegap-application-for-andr?rq=1)这是新的结果：

![在此处输入图像描述](../Images/6c7420e92baf71551e5c02294f908eba.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:15:41.113

默认情况下，Kendo UI Mobile 会反转 Android 上的 View 布局，以便将 TabStrip 置于 View 之上。此外，视图标题被隐藏（因为它在底部没有意义）。仅使用 CSS 即可轻松解决此问题：

```
.km-root .km-android .km-view {
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
}

.km-android .km-view-title
{
    visibility: visible;
} 
```

# ruby-on-rails - 中间人在文章页面中给出 404

> ID：15511720
> 
> 赞同：0
> 
> 时间：2013-03-19T22:27:31.117
> 
> 标签：ruby-on-rails, http-status-code-404, middleman

我开始使用 middleman-blog 扩展构建一个带有 Middleman 的博客。到目前为止，主页上的一切都运行良好。当我单击链接以查看完整的博客文章时，就会出现问题。完整的博客文章页面没有应用任何 CSS。经过进一步检查，我收到 404 错误。我通过在我的 CSS 链接 href 中向上移动 3 个级别来修复它在开发工具上，如下所示：

之前（在主页中工作，但不在文章页面中）

```
<link rel="stylesheet" href="stylesheets/global.sass"> 
```

之后（向上移动两个级别不再给我 404）

```
<link rel="stylesheet" href="../../../stylesheets/global.sass"> 
```

我的问题是：我需要修改什么以便文章页面在主页保持不变的情况下查找 CSS 3 级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:29:03.880

在您的情况下，最简单的方法是使用 webroot-relative 路径。

回顾一下，您使用的是常规相对路径...

```
<link rel="stylesheet" href="stylesheets/global.sass"> 
```

如果您的页面位于`http://example.com/index.html`，那么浏览器将查找`http://example.com/stylesheets/global.sass`.

但是如果你的页面在`http://example.com/blogs/2013/03/20/blogpost.html`，浏览器会寻找`http://example.com/blogs/2013/03/20/stylesheets/global.sass`

* * *

现在，解决方案...

如果在路径的开头添加斜杠，则将该相对路径变为 webroot 相对路径。Web 浏览器将开始在 webroot 中查找文件...

```
<link rel="stylesheet" href="/stylesheets/global.sass"> 
```

因此，无论您的页面是位于`http://example.com/index.html`还是`http://example.com/blogs/2013/03/20/blogpost.html`，`http://example.com/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/page.html`浏览器在所有情况下都会在`http://example.com/stylesheets/global.sass`.

* * *

[Adobe Dreamweaver 有关链接和导航](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c44a.html)的文档对此进行了更完整的解释。

# go - 如何指定多个返回值的类型

> ID：15511722
> 
> 赞同：1
> 
> 时间：2013-03-19T22:27:43.827
> 
> 标签：go

有时，当函数返回多个值且未指定它们的类型时，我发现 Go 代码难以阅读。这可能吗 ？见下文：

```
func randomNumber()(int, error) {
    return 4, nil 
}

func main() {
    nr, err := randomNumber()
    // What i would like to do:
    // var nr int, err error = randomNumber()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:30:21.183

不，那是不可能的。但是，您可以提前定义变量以使其更容易理解。

```
func randomNumber()(int, error) {
    return 4, nil 
}

func main() {
    var nr int
    var err error
    // Note the '=' instead of ':='
    nr, err = randomNumber()
} 
```

# django - Django没有文本响应

> ID：15511725
> 
> 赞同：0
> 
> 时间：2013-03-19T22:27:51.743
> 
> 标签：django, request, synchronous

在我的views.py的某个地方，我有

```
def loadFcs(request):
  r = requests.get('a url')
  res = json.loads(r.text)
  #Do other stuff
  return HttpResponse('some response') 
```

现在，当我从我的 javascript 调用它时，会调用 loadFcs，并且*可能*会异步调用 requests.get。所以我最终看到'TypeError at /loadFcs expected string or buffer'并且跟踪指向行

```
res = json.loads(r.text) 
```

我还修改了我的代码以检查问题所在，并且

```
def loadFcs(request):
  r = requests.get('a url')
  res = json.loads(r.text)
  if r == None:
    print 'r is none'
  if r.text == None:
    print 'text is  None'
  #Do other stuff
  return HttpResponse('some response') 
```

并注意到“没有文字”。所以我认为我需要调整代码以便 request.get 是同步的。我认为方法执行会继续，甚至在 r.text 有一些价值之前就已经命中了 return 语句。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:51:03.670

好的，所以我用 python 命令行尝试了同样的事情，但它在我的服务器中没有使用相同的代码。那么问题出在哪里？

显然，response.text 采用了我的服务器未设置为接收的某种编码（UTF8），因此它只是将其丢弃，因此为空。

解决方案：使用 response.content （这是原始二进制文件）

# javascript - 正则表达式从文本中捕获 Id

> ID：15511730
> 
> 赞同：0
> 
> 时间：2013-03-19T22:27:57.900
> 
> 标签：javascript, regex

我有以下正则表达式，我试图在其中捕获每个开始评论的 ID。但由于某种原因，我只能捕捉到第一个。它不会抓取嵌套评论的 ID。它只在控制台上打印 1000。我试图让它同时捕获 1000 和 2000。任何人都可以在我的正则表达式中发现错误吗？

```
<script type="text/javascript">

    function ExtractText() {
        var regex = /\<!--Start([0-9]{4})-->([\s\S]*?)<!--End[0-9]{4}-->/gm;
       var match;
        while (match = regex.exec($("#myHtml").html())) {
            console.log(match[1]);
        }
    }

</script>

<div id="myHtml">
   <!--Start1000-->Text on<!--Start2000-->the left<!--End1000-->Text on the right<!--End2000-->
</div> 
```

根据 Mike Samuel 的回答，我将 JS 更新为以下内容：

```
function GetAllIds() {

        var regex = /<!--Start([0-9]{4})-->([\s\S]*?)<!--End\1-->/g;
        var text = $("#myHtml").html();
        var match;
        while (regex.test(text)) {
            text = text.replace(
               regex,
               function (_, id, content) {
                   console.log(id);
                   return content;
               });
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:31:25.983

在

> ```
> <!--Start1000-->Text on<!--Start2000-->the left<!--End1000-->Text on the right<!--End2000--> 
> ```

“1000”区域与“2000”区域重叠，但`exec`循环只找到**不重叠的**匹配，因为每次`exec`使用相同的正则表达式和字符串调用都在最后一个匹配的末尾开始。要解决此问题，请尝试

```
var regex = /<!--Start([0-9]{4})-->([\s\S]*?)<!--End\1-->/g;
for (var s = $("#myHtml").html(), sWithoutComment;
     // Keep going until we fail to replace a comment bracketed chunk
     // with the chunk minus comments.
     true;
     s = sWithoutComment) {
  // Replace one group of non-overlapping comment pairs.
  sWithoutComment = s.replace(
     regex,
     function (_, id, content) {
       console.log(id);
       // Replace the whole thing with the body.
       return content;
     });
  if (s === sWithoutComment) { break; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:43:33.817

您可以使用分组，然后使用另一个正则表达式：

```
var regex =  /(<!--Start)([0-9]{4})/ig;
var str = document.getElementById('myHtml').innerHTML;
var matches = str.match(regex);
for(var i=0;i<matches.length;i++){
    var m = matches[i];
    var num = m.match(/(\d+)/)[1];
    console.log(num);
} 
```

# c++ - 矢量后推对元素地址的影响

> ID：15511731
> 
> 赞同：1
> 
> 时间：2013-03-19T22:28:01.647
> 
> 标签：c++, vector, memory-address, push-back

我有一个类对象的向量。一个函数随机选择两个元素并返回它们的地址。

现在使用这两个元素，我想生成两个相同类的新对象，并使用 push_back 将它们添加到向量中。

这是两个父元素的地址：

这里没问题。然后生成第一个子对象，我使用 vector_pushback 将其添加到向量的末尾。问题是，在执行 push_back 命令后，父对象的地址似乎发生了变化。这是 push_back 后调试器的状态：

如您所见，地址显然保持不变，但似乎它们指向 push_back 之后的垃圾值。据我了解， push_back 在向量的末尾添加了一个元素。因此，我希望这两个元素的地址根本不会改变。

怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T22:30:01.520

**TL;DR 版本：**

[插入操作可以使任何指向 a 元素的指针、引用或迭代器无效`std::vector`。](http://en.cppreference.com/w/cpp/container/vector/push_back)

**完整解释：**

A`std::vector`有两个有用的指标：

*   [`size`](http://en.cppreference.com/w/cpp/container/vector/size)，这是存储的元素数。
*   [`capacity`](http://en.cppreference.com/w/cpp/container/vector/capacity)，这是它当前能够存储的元素数量。

`capacity >= size`每时每刻。

`capacity`是内部动态分配数组的长度。^* 当你插入一个元素时，`size`递增 1。但是一旦它达到`capacity`，就必须分配一个新的、更大的数组（因此增加`capacity`）。这需要复制所有元素，并删除原始元素。所以他们所有的地址都会改变。

* * *

[* 这是一个典型的内部实现`std::vector`。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:30:02.003

`push_back`如果当前分配给元素存储的空间不能包含新元素，则可能导致向量中**所有**元素的重新分配和移动。

# wpf - 鼠标悬停在 WPF 的列表框中选择项目

> ID：15511752
> 
> 赞同：9
> 
> 时间：2013-03-19T22:29:40.667
> 
> 标签：wpf, listbox, mouseover

我对 WPF 比较陌生，但我想知道如何启用列表框以基于鼠标悬停事件而不是按钮单击来选择项目。我希望在鼠标悬停在所选项目上时选择该项目，而不必先按单击。

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-19T22:35:49.167

您可以编写一个简单的 ListBoxItem 样式，并在设置属性的`IsMouseOver`属性上设置触发器`IsSelected`：

```
<ListBox>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="IsSelected" Value="True"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

# java - 为什么 TCPview 为这个 Java 套接字程序同时显示 TCP 和 UDP？

> ID：15511754
> 
> 赞同：0
> 
> 时间：2013-03-19T22:29:51.533
> 
> 标签：java, sockets, tcp

我正在运行[Oracles 站点上的标准 Java 网络示例](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html) ，它运行一个简单的敲门笑话程序。这会创建标准套接字，我认为这是 TCP 连接（或者我在这里错了吗？）。

令我困惑的是，当我在[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)中查看端口时，看到的是端口 4444 显示了多行（我们使用 Knock-Knock 程序连接的那个）。这是屏幕截图（[此处为完整图像](https://i.imgur.com/zKy7fOu.png)）： ![在此处输入图像描述](../Images/e55b2362738daf34a374e443b2965d87.png)

为什么它同时显示 UDP 和 TCP ？它不应该只是 TCP 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:54:24.600

那里有两个不同的过程。有没有机会运行 udp 演示的陈旧进程？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T01:30:52.310

示例代码中没有任何内容在端口 4444 上使用**UDP**。您的 TCPView 还显示它是另一个使用**UDP**端口的进程（不同的 PID）：

![在此处输入图像描述](../Images/e14b3a480d823355813325f97e7bec58.png)

此外，当我运行示例代码时，我只看到**TCP**记录：

![在此处输入图像描述](../Images/0ae550eda12c27552f3ed71e63a654ef.png)

我的猜测是您可能有另一个使用 DatagramSocket 运行的示例？！您可以通过将示例代码更改为使用不同的端口来验证示例代码不是使用**UDP**端口的代码。**例如，尝试在KnockKnockServer**中将端口更改为 5555 ：

```
 ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(5555);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 5555.");
        System.exit(1);
    } 
```

在**KnockKnockClient**中：

```
 try {
        kkSocket = new Socket("localhost", 5555);
        out = new PrintWriter(kkSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream())); 
```

看看你在这个端口上是否有任何**UDP**记录。

# ruby-on-rails - rcov 中的“总覆盖率”和“代码覆盖率”有什么区别？

> ID：15511756
> 
> 赞同：7
> 
> 时间：2013-03-19T22:29:58.650
> 
> 标签：ruby-on-rails, ruby, testing, code-coverage, rcov

当 rcov 生成报告时，它会显示每个文件的“总覆盖率”和“代码覆盖率”。这两个指标有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T22:29:58.650

来自[http://www.rubydoc.info/github/relevance/rcov/master/Rcov/FileStatistics](http://www.rubydoc.info/github/relevance/rcov/master/Rcov/FileStatistics)

**total_coverage**是：

> 如果评论也被认为是“可执行的”，则总覆盖率，以分数形式给出

**code_coverage**是：

> 代码覆盖率：执行的代码行数相对于总代码行数（loc）的比例。

除非项目的注释被认为是可执行的，否则最有价值的指标将是“代码覆盖率”。

# ios - 将 Unsigned Int 转换为十六进制值

> ID：15511761
> 
> 赞同：0
> 
> 时间：2013-03-19T22:30:13.087
> 
> 标签：ios, objective-c, c, core-bluetooth

如何在 Objective-C 中将整数 6 位数字（例如“1234674”）转换为十六进制 4 字节 NSData？

这是我们发送密码的代码部分：

```
#define HSL_PRIVATE_SERVICE_UUID 0xFF20 
#define HSL_PRIVATE_NEW_PASSKEY_UUID 0xFF35 
unsigned int newPassKey = [_confirmNewPassKey.text intValue];
NSLog(@"newPasskey %d", newPassKey);
NSData *d = [NSData dataWithBytes:&newPassKey length:sizeof(unsigned int)];
[_t writeValue:HSL_PRIVATE_SERVICE_UUID characteristicUUID:HSL_PRIVATE_NEW_PASSKEY_UUID p:_peripheral data:d]; 
```

我做了一次空中捕捉，比较了 BTOOL 和 iPhone 密码写入。

BTOOL（一个模拟器工具）写道（正确的结果）：

```
0x40e201 
```

iPhone 写道（错误数据）：

```
 0x0001e240 
```

不确定发生了什么以及如何在应用程序中修复它，以使结果与蓝牙设备的预期相匹配。我希望结果与 BTOOL 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:05:01.690

尝试这个：

```
uint32_t value = [_confirmNewPassKey.text intValue];
uint32_t swapped = CFSwapInt32HostToBig(value);
NSData *d = [NSData dataWithBytes:&swapped length:sizeof(swapped)]; 
```

这假设您想要输出大端。

# haskell - 包含多态函数的一元记录

> ID：15511775
> 
> 赞同：0
> 
> 时间：2013-03-19T22:30:53.473
> 
> 标签：haskell, monads

所以，假设我定义了数据类型

```
data WAtom a = WAtom {innerVal :: a, temper :: WPart a -> WPart a }

data WPart a where 
     WUnit :: WAtom a -> WPart a
     WCompound :: WAtom a -> WAtom a -> WPart a

atomize :: WPart a -> a
atomize (WUnit a) = innerVal a
{- Write one for compound too -} 
```

现在我想让 WPart 成为 Monad 的一个实例。到目前为止一切似乎都很好。我想`bind`通过调用 monad 的 innerVal 上的绑定函数来生成一个新的 monad。然后在原始 monad 上调用这个新的`temper`monad：

```
instance Monad (WPart) where
     return a = WUnit $ WAtom a
     (WUnit c) >>= f = let new_part = f $ innerVal c in
                           (temper $ atomize new_part) (WUnit c) 
```

但是，这不会进行类型检查。monad 的定义认为`f`in bind 可以改变 monad 的内部类型。这对我来说很有意义。但是，我似乎处于两难境地：1）如果我限制 WAtom 可以采用的类型，请说定义数据类型，因为`WAtom Int`这样我将违反 Monads * -> * 的种类限制。但如果我不这样做，那么我无法知道in bind 将返回与传入的原始 monad 相同类型的 monad。此外，由于明显的原因`f`，我无法进行存在量化。`temper`

我确定我只是在想这个错误。有人有想法么？

最好的，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:54:19.303

假设`WUnit c :: WPart a`我们有`f :: a -> WPart b`so `new_part :: WPart b`and `atomize new_part :: b`... 所以我们已经无法调用`temper :: forall a. WAtom a -> WPart a -> WPart a`，除非我们可以限制`b ~ WPart (WAtom e)`some `e`。更糟糕的是，即使`temper $ atomize new_part :: WPart b -> WPart b`我们仍然有`WUnit c :: WPart a`where`a ~ b`通常不成立。

所以，这绝对不是`Monad`.

# database-design - 文本转换到数据库

> ID：15511778
> 
> 赞同：0
> 
> 时间：2013-03-19T22:31:10.900
> 
> 标签：database-design, dictionary, ms-word, datamapper

您好 StackOverflow 的创意开发人员和夜间护林员，我有一个客户，他在 Microsoft 文档文件中的字典中有大约 20,000 个单词。

他大约在 10 年前创建了它，现在我必须将这些 *.doc 文件内容加载到数据库中，以便为客户创建字典。

我的问题是从哪里开始将基于列的文本更改为任何类型的数据库？

我正在考虑使用 RegEx 并使用一些模式。那么有什么很酷的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:51:14.730

这里的主要问题不是数据存储在文本中，而是存储在 .doc 文件和那里的表中，并且它们存在于许多文件中。

所以你需要做的是：

*   将其合并为一个文件。
*   转换成sql文本
*   将其转换为文本文件

您可以按任何顺序执行此操作，但顺序会大大改变方法。

您可以创建 MS-Word 宏（在 Basic 中），将其转换为 SQL 文本并将文档合并为一个。

或者您可以将文档转换为 RTF，然后以您喜欢的任何语言运行编写脚本来完成剩下的工作。

正则表达式肯定会很方便，但不能说它们应该是什么样子，因为您没有指定文件的外观。

如果文件不多，可以考虑使用复制粘贴将其放入一个简单的文本文件中。这也将摆脱桌子。结果可能很难看，但它仍然是结构，以便我可以转换为 sql。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:49:47.097

**C# 中的示例：**

对于初学者，添加对`Microsoft.Office Interop.Word`. 然后你可以做一些基本的解析：

```
var wdApp = new Application();
var dict = new Dictionary<string, string>();
//paths is some collection of paths to the Word documents
//You can use Directory.EnumerateFiles to get such a collection from a folder
//EnumerateFiles also allows you to filter the files, say to only .doc
foreach (var path in paths) {
    var wdDoc = wdApp.Documents.Open(path);
    foreach (Paragraph p in wdDoc.Paragraphs) {
        var text = p.Range.Text;
        var delimiterPos = text.IndexOf(";");
        dict.Add(
            text.Substring(0, delimiterPos - 1),
            text.Substring(delimiterPos + 1)
        );
    }
    wdDoc.Close();
}
//This can be done more cleanly using LINQ, but Dictionary<TKey,TValue> doesn't have an AddRange method.
//OTOH, such a method can be easily added as an extension method, taking IEnumerable<KeyValuePair<TKey,TValue>> 
```

对于更复杂的解析，您可以将每个项目保存为一个新的文本文件：

```
var newPaths =
    from path in paths
    select new {
        path,
        //If needed, add some logic to put the textfile in a different folder
        newPath = Path.ChangeExtension(path, ".txt")
    };
var wdApp = new Application();
foreach (var item in newPaths) {
    var wdDoc = wdApp.Documents.Open(item.path);
    wdDoc.SaveAs2(
        FileName: item.newPath,
        FileFormat: WdSaveFormat.wdFormatText
    );
    wdDoc.Close();
} 
```

您可能还需要创建一个名为的文件`schema.ini`并将其放在与文本文件相同的文件夹中（有关语法的更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms709353%28VS.85%29.aspx)）：

```
//assuming the delimiter is a ;
File.WriteAllLines(schemaPath,
    from item in newPaths
    select String.Format(@"
        [{0}]
        Format=Delimited(;)
    ", item.filename)
); 
```

然后，您可以通过 、 和 类使用 SQL 语句查询生成的`OleDbConnection`文本`OleDbCommand`文件`OleDbReader`。

```
foreach (var item in newPaths) {
    var connectionString = @"
        Provider=Microsoft.Jet.OLEDB.4.0;
        Extended Properties=""text;HDR=NO;IMEX=1;""
        Data Source=" + item.newPath;
    using (var conn = new OleDbConnection(connectionString)) {
        using (var cmd = conn.CreateCommand()) {
            cmd.CommandText = String.Format(@"
                SELECT *
                FROM [{0}]
            ", item.newPath);
            using (var rdr = cmd.ExecuteReader()) {
                //parse file contents here
            }
        }
    }
} 
```

# cocoa - Cocoa - 从二进制字符串中绘制图像

> ID：15511779
> 
> 赞同：0
> 
> 时间：2013-03-19T22:31:15.813
> 
> 标签：cocoa, spotify

我正在尝试从 XCode 中的字符串中绘制 TIFF 图像以将其显示在 Dock 中。TIFF 图像是通过与 Spotify 交互的 AppleScript 获得的：

```
tell application "Spotify"
set aTrackArtwork to artwork of current track
end tell 
```

我收到的字符串是这样的：

```
TIFF4D4D002A00041EB821585D22595E215.. 
```

如何从此二进制代码中绘制图像？我当前的代码（这是一个概念验证）如下所示：

```
NSImage *myImage = [[NSImage alloc] init];
myImage = [NSImage imageNamed:@"ikoner"];
[NSApp setApplicationIconImage:myImage]; 
```

有没有办法在 myImage 对象中绘制图像？

而且，有没有更简单的方法可以直接在我的 Xcode 项目中获取这些信息，而无需依赖 applescript？

我的目标是创建一个简单的应用程序来获取当前播放的歌曲并在 Dock 中显示它的专辑封面。

我感谢所有可能会或可能不会让我更接近答案的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:33:40.120

这对于脚本桥来说相当简单。

首先，`Spotify.h`在终端中生成：

```
sdef /Applications/Spotify.app | sdp -fh --basename Spotify 
```

然后，将头文件导入您的项目，然后链接到`ScriptingBridge.framework`.

最后，抓取图像并将其放入 Dock 中。这是一个基本示例：

```
#import "Spotify.h"

// Get the image from Spotify
SpotifyApplication *spotify = [SBApplication applicationWithBundleIdentifier:@"com.spotify.client"];
NSImage *coverArt = spotify.currentTrack.artwork;

// Create an image view and put it in the Dock
NSImageView *imageView = [[NSImageView alloc] initWithFrame:NSZeroRect];
imageView.image = coverArt;

NSDockTile *dock = [[NSApplication sharedApplication] dockTile];
dock.contentView = imageView;
[dock display]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T22:39:06.763

我不熟悉 Spotify api，但是这样的事情似乎可以工作（将您的字符串转换为 NSData 对象：

```
[[NSImage alloc] initWithData:] 
```

# actionscript-3 - AS3：FMS 直播：暂停/恢复？

> ID：15511784
> 
> 赞同：0
> 
> 时间：2013-03-19T22:31:33.710
> 
> 标签：actionscript-3, flash-media-server

**使用 AS3暂停然后恢复**LIVE 流的正确方法是什么（本机代码，无预建播放器）。

使用正常的暂停/恢复方法 - 暂停工作正常，但恢复没有效果（视频停留）。

如果我执行 a`netconnection.close()`然后`play()`再次调用它会起作用 - 但这会在视频再次播放之前导致很长的延迟。

`seek(0)`我之前尝试了另一个版本，`pause()`它也没有效果。

有什么建议么？谢谢！

# php - zf2 mvc 事件监听器或策略

> ID：15511786
> 
> 赞同：3
> 
> 时间：2013-03-19T22:31:41.053
> 
> 标签：php, zend-framework, zend-framework2, partial-views, event-listener

我是 Zf2 的新手，我最近从 zf1 升级，在这个问题上需要帮助和建议。这是事实：我正在某个控制器（页面）中从事医疗项目（这是对 zf1 版本的升级），我需要**在侧边栏面板中显示****患者**的信息和当前就诊情况......我知道我在zf2 的新手，但我不想做多余的事情，比如在每个操作中**getvisiteService()**和**patientService()**检索信息并将这些结果传递给一遍又一遍地查看。我考虑过一个插件，但我必须再次从控制器传递到视图并使用部分和占位符助手（grr !!!）增强我的视图思考**策略**和**事件监听器************但我不知道这些是如何工作的，我需要将结果注入部分。那么有一种简单和/或复杂的方法可以实现这一目标吗？提前感谢您的任何提示和代码将不胜感激，并为我说法语的糟糕英语感到抱歉（这样一个典型的借口:)）**********

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:06:46.983

您可以在这里使用很多方法，但是坚持您最初的问题，将东西注入您的布局模型非常容易，如下所示：

模块.php

```
/**
 * On bootstrap event
 * 
 * @param \Zend\Mvc\MvcEvent $e
 */
public function onBootstrap(MvcEvent $e)
{
    // Inject something, like a nav into your Layout view model
    $viewModel = $e->getViewModel(); // Layout View Model
    $navigation= new ViewModel(array(
        'username'  => 'Bob' // Dynamically set some variables..
    ));
    $navigation->setTemplate('navigation/mynav');
    $viewModel->addChild($navigation, 'navigation');
} 
```

如果您愿意，您还可以创建一个自定义视图助手来为您完成工作

```
<?php
/**
 * MyHelper.php
 */
namespace Application\View\Helper;

use Zend\View\Helper\AbstractHelper;
use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceManager;

class MyHelper extends AbstractHelper implements ServiceManagerAwareInterface
{
    /**
     * Invoke
     * 
     * @return  string
     */
    public function __invoke()
    {
        // Dynamically build your nav or what ever.

        $patientService = $this->getServiceManager()->get('PatientService');

        return 'soemthing';
    }

    /**
     * @var ServiceManager
     */
    protected $serviceManager;

    /**
     * Retrieve service manager instance
     *
     * @return ServiceManager
     */
    public function getServiceManager() 
    {
        return $this->serviceManager;
    }

    /**
     * Set service manager instance
     *
     * @param ServiceManager $locator
     * @return User
     */
    public function setServiceManager(ServiceManager $serviceManager) 
    {
        $this->serviceManager = $serviceManager;
        return $this;
    }
} 
```******

# linq.js - 使用 linq.js 确定是否存在多个不同项目的有效方法

> ID：15511788
> 
> 赞同：4
> 
> 时间：2013-03-19T22:31:56.190
> 
> 标签：linq.js

我正在寻找一种使用 linq.js 来确定集合是否具有多个不同值的有效方法。我认为以下方法效率低下，因为它必须考虑整个集合。

```
if (Enumerable.From(collection).Distinct().Take(2).Count() > 1) {
    //it's not unique, continue loop
} 
```

我的问题类似于一个： [Efficient Linq Enumerable's 'Count() == 1' test](https://stackoverflow.com/questions/6059643/efficient-linq-enumerables-count-1-test)

有没有更有效的基于 linq.js 的技术？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:03:40.380

如果您正在专门测试一个集合中是否包含多个项目，那么编写它的惯用方式（恕我直言）是`Skip`与`Any`. 跳过第一个项目，如果集合中有任何其他项目，则它有多个。如果它是空的，则`Skip`实际上什么都不做，并且集合中仍然不会有任何其他项目。

在您的情况下，您的情况将是：

```
if (Enumerable.From(collection).Distinct().Skip(1).Any()) {
    //it's not unique, continue loop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:35:40.517

```
var test = collection[0];
if (Enumerable
    .From(collection)
    .Skip(1)
    .Any(function (e) { return e != test; })
   ) 
```

让我解释一下。至少 2 个不同的项目意味着对于*任何*项目*，至少有*一个项目不等于它。先挑第一个，其他的都可以，只是第一个比较方便，看看有没有其他不等于它的数（除了它自己）。

# javascript - Rails 和 coffeescript 弹出窗口仅适用于数组中的第一个对象

> ID：15511791
> 
> 赞同：0
> 
> 时间：2013-03-19T22:32:04.580
> 
> 标签：javascript, ruby-on-rails, coffeescript

我有一个产品页面，列出了几种不同的产品。单击产品主图像时，我希望弹出窗口/灯箱显示该产品的另一个图像和其他信息。

但是，点击事件仅适用于第一个产品：

```
$(document).ready ->
 i = $(".main-image").attr("data-productid")
 button = $("#single_" + i)
 button.on "click", ->
  $("#product_popup").show() 
```

html/erb：

```
<% products.each do |product| %>
<% if product.on_display? %>
  <div class="grid_1">
  <li id="product_<%= product.id %>" class="columns product three <%= cycle("alpha", "secondary", "", "omega secondary", :name => "classes") %>" data-hook="products_list_item" itemscope itemtype="http://schema.org/Product">
    <div class="main-image" id="single_<%= product.id %>" data-productid="<%= product.id %>">
      <%= large_image(product, :itemprop => "image", :class => "product-image", :id => product.id) %>
    </div><!-- main-image-->
    <%# ******LIGHTBOX******* %>
    <div id="product_popup">
        <%= large_image(product, :itemprop => "image", :class => "product-image") %>
    </div><!-- product_popup --> 
```

谢谢你的帮助。我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:11:42.307

试试这个

```
jQuery ->
  $(".main-image").each () ->
    i = $(this).attr("data-productid")
    $("#single_" + i).on "click", ->
      $("#product_popup").show() 
```

您需要在 .main-image 选择器上调用 each，因此每个内部的代码都会执行到您的每个 div.main-image。注意 each 中的 $(this) ，这将在每个循环的每次迭代期间与您的每个 div 相关。

我觉得你可以像这样重构（首先尝试上面的解决方案以确认它正在工作）

```
jQuery ->
  $("div.main-image").on "click", ->
    $("div#product_popup").show() 
```

# java - 为什么我得到 ArrayIndexOutOfBoundsException？

> ID：15511793
> 
> 赞同：-3
> 
> 时间：2013-03-19T22:32:18.010
> 
> 标签：java, exception, netbeans, indexoutofboundsexception

我正在创建一个吃豆人游戏，但遇到了一个我无法弄清楚的异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -11
at p.PacBoard.moveGhosts(PacBoard.java:207) 
```

这就是我的游戏的逻辑所在（我标记了引发异常的行）：

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Event;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.Timer;

public class PacBoard extends JPanel implements ActionListener {

Dimension d;
String s = "Press s to start.";;
Font small = new Font("Helvetica", Font.BOLD, 14);
FontMetrics metr = this.getFontMetrics(small);

Image ii;
Color dotcolor = new Color(192, 192, 0);
Color mazecolor;

boolean ingame = false;
boolean dying = false;

final int blocksize = 24;
final int nrofblocks = 15;
final int scrsize = nrofblocks * blocksize;
final int pacanimdelay = 2;
final int pacmananimcount = 4;
final int maxghosts = 6;
final int pacmanspeed = 6;

int pacanimcount = pacanimdelay;
int pacanimdir = 1;
int pacmananimpos = 0;
int nrofghosts = 4;
int pacsleft, score;
int deathcounter;
int[] dx, dy;
int[] ghostx, ghosty, ghostdx, ghostdy, ghostspeed;

Image ghost;
Image pacman1, pacman2up, pacman2left, pacman2right, pacman2down;
Image pacman3up, pacman3down, pacman3left, pacman3right;
Image pacman4up, pacman4down, pacman4left, pacman4right;

int pacmanx, pacmany, pacmandx, pacmandy;
int reqdx, reqdy, viewdx, viewdy;

final short leveldata[] =
{ 3, 19, 18, 18, 18, 18, 18, 18, 18, 18, 18, 22, 3, 10, 6,
  1, 25, 24, 16, 16, 16, 16, 16, 16, 16, 16, 20, 5, 15, 5,
  1, 0, 0, 17, 16, 16, 16, 16, 16, 16, 16, 20, 9, 10, 12, 
  19, 18, 18, 16, 16, 16, 24, 16, 24, 16, 16, 24, 18, 18, 22,
  17, 16, 16, 16, 16, 28, 0, 21, 0, 17, 20, 0, 17, 16, 20,
  17, 16, 16, 16, 28, 0, 19, 20, 0, 25, 28, 0, 17, 16, 20,
  17, 16, 16, 28, 0, 19, 16, 20, 0, 0, 0, 0, 17, 16, 20,
  17, 16, 20, 0, 27, 16, 16, 16, 18, 18, 22, 0, 17, 16, 20,
  17, 16, 16, 22, 0, 25, 16, 16, 16, 16, 20, 0, 17, 16, 20,
  17, 16, 16, 16, 22, 0, 25, 16, 16, 16, 20, 0, 17, 16, 20,
  17, 16, 16, 16, 16, 22, 0, 17, 16, 16, 20, 0, 17, 16, 20,
  25, 16, 24, 16, 16, 16, 18, 16, 16, 16, 16, 18, 24, 24, 28,
  1, 21, 0, 17, 16, 16, 16, 16, 16, 16, 16, 20, 0, 8, 12,
  9, 29, 0, 17, 16, 16, 16, 16, 16, 16, 16, 20, 0, 10, 14,
  9, 15, 27, 24, 24, 24, 24, 24, 24, 24, 24, 28, 8, 10, 14};

final int validspeeds[] = {1, 2, 3, 4, 5, 6};
final int maxspeed = 6;

int currentspeed = 3;
short[] screendata;
Timer timer;

public PacBoard() {

    GetImages();

    addKeyListener(new TAdapter());

    screendata = new short[nrofblocks * nrofblocks];
    mazecolor = new Color(255, 0, 5);
    setFocusable(true);

    d = new Dimension(400, 400);

    setBackground(Color.black);
    setDoubleBuffered(true);

    ghostx = new int[maxghosts];
    ghostdx = new int[maxghosts];
    ghosty = new int[maxghosts];
    ghostdy = new int[maxghosts];
    ghostspeed = new int[maxghosts];
    dx = new int[4];
    dy = new int[4];
    timer = new Timer(40, this);
    timer.start();
}

public void addNotify() {
    super.addNotify();
    GameInit();
}

public void DoAnim() {
    pacanimcount--;
    if (pacanimcount <= 0) {
        pacanimcount = pacanimdelay;
        pacmananimpos = pacmananimpos + pacanimdir;
        if (pacmananimpos == (pacmananimcount - 1) || pacmananimpos == 0)
            pacanimdir = -pacanimdir;
    }
}

public void PlayGame(Graphics2D g2d) {
    if (dying) {
        Death();
    } else {
        MovePacMan();
        DrawPacMan(g2d);
        moveGhosts(g2d);
        CheckMaze();
    }
}

public void ShowIntroScreen(Graphics2D g2d) {

    g2d.setColor(new Color(0, 32, 48));
    g2d.fillRect(50, scrsize / 2 - 30, scrsize - 100, 50);
    g2d.setColor(Color.white);
    g2d.drawRect(50, scrsize / 2 - 30, scrsize - 100, 50);
    g2d.setColor(Color.white);
    g2d.setFont(small);
    g2d.drawString(s, (scrsize - metr.stringWidth(s)) / 2, scrsize / 2);
}

public void DrawScore(Graphics2D g) {
    int i;
    String s;

    g.setFont(small);
    g.setColor(new Color(96, 128, 255));
    s = "Score: " + score;
    g.drawString(s, scrsize / 2 + 96, scrsize + 16);
    for (i = 0; i < pacsleft; i++) {
        g.drawImage(pacman3left, i * 28 + 8, scrsize + 1, this);
    }
}

public void CheckMaze() {
    short i = 0;
    boolean finished = true;

    while (i < nrofblocks * nrofblocks && finished) {
        if ((screendata[i] & 48) != 0)
            finished = false;
        i++;
    }

    if (finished) {
        score += 50;

        if (nrofghosts < maxghosts)
            nrofghosts++;
        if (currentspeed < maxspeed)
            currentspeed++;
        LevelInit();
    }
}

public void Death() {

    pacsleft--;
    if (pacsleft == 0)
        ingame = false;
    LevelContinue();
}

public void moveGhosts(Graphics2D g2d) {
    short i;
    int pos;
    int count;

    for (i = 0; i < nrofghosts; i++) {
        if (ghostx[i] % blocksize == 0 && ghosty[i] % blocksize == 0) {
            pos = ghostx[i] / blocksize + nrofblocks * (int)(ghosty[i] / blocksize);

            count = 0;
//line that causes problems below
            if ((screendata[pos] & 1) == 0 && ghostdx[i] != 1) {
//line that causes problems above
                dx[count] = -1;
                dy[count] = 0;
                count++;
            }
            if ((screendata[pos] & 2) == 0 && ghostdy[i] != 1) {
                dx[count] = 0;
                dy[count] = -1;
                count++;
            }
            if ((screendata[pos] & 4) == 0 && ghostdx[i] != -1) {
                dx[count] = 1;
                dy[count] = 0;
                count++;
            }
            if ((screendata[pos] & 8) == 0 && ghostdy[i] != -1) {
                dx[count] = 0;
                dy[count] = 1;
                count++;
            }

            if (count == 0) {
                if ((screendata[pos] & 15) == 15) {
                    ghostdx[i] = 0;
                    ghostdy[i] = 0;
                } else {
                    ghostdx[i] = -ghostdx[i];
                    ghostdy[i] = -ghostdy[i];
                }
            } else {
                count = (int)(Math.random() * count);
                if (count > 3)
                    count = 3;
                ghostdx[i] = dx[count];
                ghostdy[i] = dy[count];
            }

        }
        ghostx[i] = ghostx[i] + (ghostdx[i] * ghostspeed[i]);
        ghosty[i] = ghosty[i] + (ghostdy[i] * ghostspeed[i]);
        DrawGhost(g2d, ghostx[i] + 1, ghosty[i] + 1);

        if (pacmanx > (ghostx[i] - 12) && pacmanx < (ghostx[i] + 12) &&
            pacmany > (ghosty[i] - 12) && pacmany < (ghosty[i] + 12) &&
            ingame) {

            dying = true;
            deathcounter = 64;

        }
    }
}

public void DrawGhost(Graphics2D g2d, int x, int y) {
    g2d.drawImage(ghost, x, y, this);
}

public void MovePacMan() {
    int pos;
    short ch;

    if (reqdx == -pacmandx && reqdy == -pacmandy) {
        pacmandx = reqdx;
        pacmandy = reqdy;
        viewdx = pacmandx;
        viewdy = pacmandy;
    }
    if (pacmanx % blocksize == 0 && pacmany % blocksize == 0) {
        pos = pacmanx / blocksize + nrofblocks * (int)(pacmany / blocksize);
        ch = screendata[pos];

        if ((ch & 16) != 0) {
            screendata[pos] = (short)(ch & 15);
            score++;
        }

        if (reqdx != 0 || reqdy != 0) {
            if (!((reqdx == -1 && reqdy == 0 && (ch & 1) != 0) ||
                  (reqdx == 1 && reqdy == 0 && (ch & 4) != 0) ||
                  (reqdx == 0 && reqdy == -1 && (ch & 2) != 0) ||
                  (reqdx == 0 && reqdy == 1 && (ch & 8) != 0))) {
                pacmandx = reqdx;
                pacmandy = reqdy;
                viewdx = pacmandx;
                viewdy = pacmandy;
            }
        }

        // Check for standstill
        if ((pacmandx == -1 && pacmandy == 0 && (ch & 1) != 0) ||
            (pacmandx == 1 && pacmandy == 0 && (ch & 4) != 0) ||
            (pacmandx == 0 && pacmandy == -1 && (ch & 2) != 0) ||
            (pacmandx == 0 && pacmandy == 1 && (ch & 8) != 0)) {
            pacmandx = 0;
            pacmandy = 0;
        }
    }
    pacmanx = pacmanx + pacmanspeed * pacmandx;
    pacmany = pacmany + pacmanspeed * pacmandy;
}

public void DrawPacMan(Graphics2D g2d) {
    if (viewdx == -1)
        DrawPacManLeft(g2d);
    else if (viewdx == 1)
        DrawPacManRight(g2d);
    else if (viewdy == -1)
        DrawPacManUp(g2d);
    else
        DrawPacManDown(g2d);
}

public void DrawPacManUp(Graphics2D g2d) {
    switch (pacmananimpos) {
    case 1:
        g2d.drawImage(pacman2up, pacmanx + 1, pacmany + 1, this);
        break;
    case 2:
        g2d.drawImage(pacman3up, pacmanx + 1, pacmany + 1, this);
        break;
    case 3:
        g2d.drawImage(pacman4up, pacmanx + 1, pacmany + 1, this);
        break;
    default:
        g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
        break;
    }
}

public void DrawPacManDown(Graphics2D g2d) {
    switch (pacmananimpos) {
    case 1:
        g2d.drawImage(pacman2down, pacmanx + 1, pacmany + 1, this);
        break;
    case 2:
        g2d.drawImage(pacman3down, pacmanx + 1, pacmany + 1, this);
        break;
    case 3:
        g2d.drawImage(pacman4down, pacmanx + 1, pacmany + 1, this);
        break;
    default:
        g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
        break;
    }
}

public void DrawPacManLeft(Graphics2D g2d) {
    switch (pacmananimpos) {
    case 1:
        g2d.drawImage(pacman2left, pacmanx + 1, pacmany + 1, this);
        break;
    case 2:
        g2d.drawImage(pacman3left, pacmanx + 1, pacmany + 1, this);
        break;
    case 3:
        g2d.drawImage(pacman4left, pacmanx + 1, pacmany + 1, this);
        break;
    default:
        g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
        break;
    }
}

public void DrawPacManRight(Graphics2D g2d) {
    switch (pacmananimpos) {
    case 1:
        g2d.drawImage(pacman2right, pacmanx + 1, pacmany + 1, this);
        break;
    case 2:
        g2d.drawImage(pacman3right, pacmanx + 1, pacmany + 1, this);
        break;
    case 3:
        g2d.drawImage(pacman4right, pacmanx + 1, pacmany + 1, this);
        break;
    default:
        g2d.drawImage(pacman1, pacmanx + 1, pacmany + 1, this);
        break;
    }
}

public void DrawMaze(Graphics2D g2d) {
    short i = 0;
    int x, y;

    for (y = 0; y < scrsize; y += blocksize) {
        for (x = 0; x < scrsize; x += blocksize) {
            g2d.setColor(mazecolor);
            g2d.setStroke(new BasicStroke(2));

            if ((screendata[i] & 1) != 0) // draws left
            {
                g2d.drawLine(x, y, x, y + blocksize - 1);
            }
            if ((screendata[i] & 2) != 0) // draws top
            {
                g2d.drawLine(x, y, x + blocksize - 1, y);
            }
            if ((screendata[i] & 4) != 0) // draws right
            {
                g2d.drawLine(x + blocksize - 1, y, x + blocksize - 1,
                             y + blocksize - 1);
            }
            if ((screendata[i] & 8) != 0) // draws bottom
            {
                g2d.drawLine(x, y + blocksize - 1, x + blocksize - 1,
                             y + blocksize - 1);
            }
            if ((screendata[i] & 16) != 0) // draws point
            {
                g2d.setColor(dotcolor);
                g2d.fillRect(x + 11, y + 11, 2, 2);
            }
            i++;
        }
    }
}

public void GameInit() {
    pacsleft = 3;
    score = 0;
    LevelInit();
    nrofghosts = 4;
    currentspeed = 3;
}

public void LevelInit() {
    int i;
    for (i = 0; i < nrofblocks * nrofblocks; i++)
        screendata[i] = leveldata[i];

    LevelContinue();
}

public void LevelContinue() {
    short i;
    int dx = 1;
    int random;

    for (i = 0; i < nrofghosts; i++) {
        ghosty[i] = 4 * blocksize;
        ghostx[i] = 4 * blocksize;
        ghostdy[i] = 0;
        ghostdx[i] = dx;
        dx = -dx;
        random = (int)(Math.random() * (currentspeed + 1));
        if (random > currentspeed)
            random = currentspeed;
        ghostspeed[i] = validspeeds[random];
    }

    pacmanx = 7 * blocksize;
    pacmany = 11 * blocksize;
    pacmandx = 0;
    pacmandy = 0;
    reqdx = 0;
    reqdy = 0;
    viewdx = -1;
    viewdy = 0;
    dying = false;
}

public void GetImages()
{

  ghost = new ImageIcon(PacBoard.class.getResource("../pacpix/ghost.gif")).getImage();
  pacman1 = new ImageIcon(PacBoard.class.getResource("../pacpix/pacman.png")).getImage();
  pacman2up = new ImageIcon(PacBoard.class.getResource("../pacpix/up1.png")).getImage();
  pacman3up = new ImageIcon(PacBoard.class.getResource("../pacpix/up2.png")).getImage();
  pacman4up = new ImageIcon(PacBoard.class.getResource("../pacpix/up3.png")).getImage();
  pacman2down = new ImageIcon(PacBoard.class.getResource("../pacpix/down1.png")).getImage();
  pacman3down = new ImageIcon(PacBoard.class.getResource("../pacpix/down2.png")).getImage(); 
  pacman4down = new ImageIcon(PacBoard.class.getResource("../pacpix/down3.png")).getImage();
  pacman2left = new ImageIcon(PacBoard.class.getResource("../pacpix/left1.png")).getImage();
  pacman3left = new ImageIcon(PacBoard.class.getResource("../pacpix/left2.png")).getImage();
  pacman4left = new ImageIcon(PacBoard.class.getResource("../pacpix/left3.png")).getImage();
  pacman2right = new ImageIcon(PacBoard.class.getResource("../pacpix/right1.png")).getImage();
  pacman3right = new ImageIcon(PacBoard.class.getResource("../pacpix/right2.png")).getImage();
  pacman4right = new ImageIcon(PacBoard.class.getResource("../pacpix/right3.png")).getImage();

}

public void paint(Graphics g)
{
  super.paint(g);

  Graphics2D g2d = (Graphics2D) g;

  g2d.setColor(Color.black);
  g2d.fillRect(0, 0, d.width, d.height);

  DrawMaze(g2d);
  DrawScore(g2d);
  DoAnim();
  if (ingame){
    PlayGame(g2d);
  }
  else{
    ShowIntroScreen(g2d);
  }

  g.drawImage(ii, 5, 5, this);
  Toolkit.getDefaultToolkit().sync();
  g.dispose();
}

class TAdapter extends KeyAdapter {
    public void keyPressed(KeyEvent e) {

      int key = e.getKeyCode();

      if (ingame)
      {
        if (key == KeyEvent.VK_LEFT)
        {
          reqdx=-1;
          reqdy=0;
        }
        else if (key == KeyEvent.VK_RIGHT)
        {
          reqdx=1;
          reqdy=0;
        }
        else if (key == KeyEvent.VK_UP)
        {
          reqdx=0;
          reqdy=-1;
        }
        else if (key == KeyEvent.VK_DOWN)
        {
          reqdx=0;
          reqdy=1;
        }
        else if (key == KeyEvent.VK_ESCAPE && timer.isRunning())
        {
          ingame=false;
        }
        else if (key == KeyEvent.VK_PAUSE) {
            if (timer.isRunning())
                timer.stop();
            else timer.start();
        }
      }
      else
      {
        if (key == 's' || key == 'S')
      {
          ingame=true;
          GameInit();
        }
      }
  }

      public void keyReleased(KeyEvent e) {
          int key = e.getKeyCode();

          if (key == Event.LEFT || key == Event.RIGHT || 
             key == Event.UP ||  key == Event.DOWN)
          {
            reqdx=0;
            reqdy=0;
          }
      }
  }

public void actionPerformed(ActionEvent e) {
    repaint();  
}
} 
```

抱歉，我知道代码很多，但我不确定问题出在哪里。这是它被捕获的行：

`if ((screendata[pos] & 1) == 0 && ghostdx[i] != 1) {`

我知道它必须将数组的大小增加或减少到非法数字，但是在哪里？为什么？这就是我不明白的。哦，我的输出窗口中出现了大约 10 次异常，但不知道为什么。这是否意味着它在我的一个 for 循环中增加了？

感谢任何愿意提供帮助的人，我将根据需要提供更多信息。

编译：

```
import javax.swing.JFrame;

public class Pacman extends JFrame
{

  public Pacman()
  {
    add(new PacBoard());
    setTitle("Pacman");
    setSize(380, 420);
    setLocationRelativeTo(null);
    setVisible(true);
  }

  public static void main(String[] args) {
        new Pacman();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:50:19.333

我想我知道（在其他评论者的帮助下）您的问题出在哪里：

我们已经推断出 ghostx[i] 是负数，或者 ghosty[i] 是负数。

请注意，您将 dx 设置为 1，然后将 ghostx[i] 设置为 dx。当您将 dx 设置为 dx ( `dx = -dx;`) 的负数时，问题就出现了。这意味着在下一次迭代中，dx 为负数，因此超出范围。

（越界了，因为pos是根据ghostx[i]计算的，而ghostx[i]是根据dx计算的)

我不确定你想在这里做什么，但一定要改变这条线，看看它是否能解决你的问题。对应该做什么发表评论`dx = -dx;`，我会帮你弄清楚。

罪魁祸首的代码：

```
public void LevelContinue() {
    short i;
    int dx = 1;
    int random;

    for (i = 0; i < nrofghosts; i++) {
        ghosty[i] = 4 * blocksize;
        ghostx[i] = 4 * blocksize;
        ghostdy[i] = 0;
        ghostdx[i] = dx;

        dx = -dx;//Line which kills your code

        random = (int)(Math.random() * (currentspeed + 1));
        if (random > currentspeed)
            random = currentspeed;
        ghostspeed[i] = validspeeds[random];
    } 
```

总而言之，我在上面发布的代码（特别是“杀死你的代码的行”）将 ghosty[i] 设置为负值。它只会在奇数索引处执行此操作（ghostx[0] 和 ghostx[2] 将为正数，但 [1]（这是您所说的有问题的索引）将为负数。

稍后，这里有这段代码：

```
pos = ghostx[i] / blocksize + nrofblocks * (int)(ghosty[i] / blocksize); 
```

在一个部门中使用`ghostx[]`，导致整个事情变得消极。

然后，在您声明不好的代码行中，使用`screendata[pos]`，这导致您使用负索引。

* * *

编辑：新的答案建议。

现在，到目前为止，我发现修改 ghostx 或 ghosty 的唯一代码行是：

```
ghostx[i] = ghostx[i] + (ghostdx[i] * ghostspeed[i]);
ghosty[i] = ghosty[i] + (ghostdy[i] * ghostspeed[i]); 
```

和

```
 ghosty[i] = 4 * blocksize;
 ghostx[i] = 4 * blocksize; 
```

我们知道两者中的后者不可能，因为 blocksize 和 4 都是正数。

这意味着

```
ghostx[i] = ghostx[i] + (ghostdx[i] * ghostspeed[i]);
ghosty[i] = ghosty[i] + (ghostdy[i] * ghostspeed[i]); 
```

是问题所在。

看着这个，在我看来，你的鬼魂在你的板外游荡！我注意到ghostdx 可以是负数（ghostdx 是ghost delta x 对吗？）这意味着当你的ghost 向负方向行进时，它最终会走得太远以至于它最终会离开棋盘。

在这些行之后，我建议添加这些行：

```
if (ghostx[i] < 0) ghostx[i] = 0;
if (ghosty[i] < 0) ghosty[i] = 0;
if (ghostx[i] >= WHATEVER_YOUR_MAX_POSITION_IS) ghostx[i] = WHATEVER_YOUR_MAX_POSITION_IS - 1;
if (ghosty[i] >= WHATEVER_YOUR_MAX_POSITION_IS) ghosty[i] = WHATEVER_YOUR_MAX_POSITION_IS - 1; 
```

请看看这是否能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:47:40.217

pos = pacmanx / blocksize + nrofblocks * (int)(pacmany / blocksize);

确保您的分配值不能> nrofblocks * nrofblocks，还确保您的除数始终> 0，据我记得在java中您可以除以零，但这将导致 NaN ， pos[NaN] 显然超出界限..啊，但我认为这对 int 没有意义，这是你的变量 pos。

我只是提供一些我会先检查的想法，现在处理数字为时已晚，抱歉；）

顺便说一句，为什么不使用向量作为坐标？应该容易得多

# android - Facebook Android openActiveSessionWithPublishPermissions 模拟

> ID：15511800
> 
> 赞同：1
> 
> 时间：2013-03-19T22:32:33.660
> 
> 标签：android, facebook, single-sign-on

我正在将 ios 代码移植到 android 并且我有`openActiveSessionWithPublishPermissions`方法。

android中是否有类似的东西？

或者唯一的方法是打电话`openActiveSession`和`openForPublish`

主要问题是用户必须说两次 OK。如果可能的话，我想显示一次对话框。

# php - Geomashup Wordpress 插件搜索

> ID：15511801
> 
> 赞同：0
> 
> 时间：2013-03-19T22:32:36.050
> 
> 标签：php, wordpress, wordpress-geo-mashup

我正在使用 Geomashup Wordpress 插件和我的自定义帖子类型来显示我的帖子的位置。

我还使用插件根据类别显示帖子位置。我想知道有没有办法添加一个搜索栏，有人可以在自定义地图上按位置搜索帖子..

问候，

约瑟普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T08:07:31.960

有一个小部件功能，您可以通过插件的设置面板激活

```
Enable Geo Search    Creates a customizable widget and other features for performing radius searc 
```

然后，您可以按输入的给定距离或当前位置进行搜索。

# javascript - 条 我在 Javascript 中有以下字符串，需要删除and标记。无法将其转换为 dom，因为 BR 标记错误为未关闭 - 并且无法编辑实际内容。 and标记。无法将其转换为 dom，因为 BR 标记错误为未关闭 - 并且无法编辑实际内容。 ]>Blah
Blah试图用 .replace 做到这一点，但似乎无法到达那里 text.replace(/\<\?xml.+\?\>/g, ''); 你的replace()作品。 要删除该部分，您可以执行以下操作： text.replace(/\<\?xml.+\?\>|\<\!DOCTYPE.+]\>/g, ''); 正如你在这里看到的：http: //jsfiddle.net/darkajax/9fKnd/1/ javascriptregex 4 3 回答 3 This answer is useful 8 你的replace()作品。 要删除该部分，您可以执行以下操作： text.replace(/\<\?xml.+\?\>|\<\!DOCTYPE.+]\>/g, ''); 正如你在这里看到的：http: //jsfiddle.net/darkajax/9fKnd/1/ 于 2013-03-19T22:39:25.010 回答 This answer is useful 5 你可以使用这个正则表达式： text.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g, ''); 适用于： ]>Blah
BlahBlah
Blah]>Blah
Blah于 2013-03-19T22:46:57.703 回答 This answer is useful 0 接受的答案有不必要的转义（额外的反斜杠，使丑陋的正则表达式更丑），这也有效： const text = ']>Blah
Blah' console.log(text) const afterReplace = text.replace(/<\?xml.+\?>|/g, '') console.log(afterReplace) 于 2018-12-06T17:47:25.933 回答 Related 1 iphone - screenshot image taken on Ratina display looks blurred with 1.0 scale, and too big with 0.0 scale 0 clojure - Clojure as a first programming language? 2 c# - 正则表达式替换 Facebook 网址 2 bash - bash 命令替换：在单引号中查找带有通配符的命令 2 python - Python 继承。为什么这么乱？ 1 php - 按多个条件对 MySQL 查询结果进行分组 2 java - windows上带有通配符的java类路径：末尾需要分号 1 c++ - 通过 QTextCursor 修改 QTextEdit 之后的 Qt 程序崩溃 1 android - Android，如何将 ListView 项目分成三部分？ 2 ios - 如何在 GLKit 中使用自定义着色器 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15511802
> 
> 赞同：4
> 
> 时间：
> 
> 标签：javascript, regex

我在 Javascript 中有以下字符串，需要删除`<?xml ... ?>`and`<!DOCTYPE .... ]>`标记。无法将其转换为 dom，因为 BR 标记错误为未关闭 - 并且无法编辑实际内容。

```
 <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html [<!ENTITY amp "&#38;#38;">]><div>Blah<br> Blah</div> 
```

试图用 .replace 做到这一点，但似乎无法到达那里

```
 text.replace(/\<\?xml.+\?\>/g, ''); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:39:25.010

你的`replace()`作品`<?xml ... ?>`。

要删除该`<!DOCTYPE .... ]>`部分，您可以执行以下操作：

```
text.replace(/\<\?xml.+\?\>|\<\!DOCTYPE.+]\>/g, ''); 
```

正如你在这里看到的：http: [//jsfiddle.net/darkajax/9fKnd/1/](http://jsfiddle.net/darkajax/9fKnd/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T22:46:57.703

你可以使用这个正则表达式：

```
text.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g, ''); 
```

适用于：

```
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html [<!ENTITY amp "&#38;#38;">]><div>Blah<br> Blah</div>

<?xml version="1.0" encoding="UTF-8"?><div>Blah<br> Blah</div>

<!DOCTYPE html [<!ENTITY amp "&#38;#38;">]><div>Blah<br> Blah</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T17:47:25.933

接受的答案有不必要的转义（额外的反斜杠，使丑陋的正则表达式更丑），这也有效：

```
const text = '<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html [<!ENTITY amp "&#38;#38;">]><div>Blah<br> Blah</div>'

console.log(text)

const afterReplace = text.replace(/<\?xml.+\?>|<!DOCTYPE.+]>/g, '')

console.log(afterReplace)
```

# android-networking - 编码包含 unicode 字符的 URL

> ID：15511804
> 
> 赞同：0
> 
> 时间：2013-03-19T22:32:58.257
> 
> 标签：android-networking

是否有（正确）编码包含 unicode 字符的 URL 的 Android 类？例如：

```
Blue Öyster Cult 
```

使用 java.net.URI 转换为以下内容：

```
uri.toString()
 (java.lang.String) Blue%20Öyster%20Cult 
```

Ö 字符未编码。使用`URLEncoder`：

```
URLEncoder.encode("Blue Öyster Cult", "UTF-8").toString()
 (java.lang.String) Blue+%C3%96yster+Cult 
```

它编码太多（即空格变成“+”，路径分隔符“/”变成%2F）。如果我使用 Dolphin 网络浏览器单击包含 unicode 字符的链接，它可以正常工作，所以显然可以做到这一点。但是，如果我尝试使用上述任何字符串打开 HttpURLConnection，则会出现`HTTP 404 Not Found`异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:22:41.923

我最终拼凑出一个似乎适用于此的解决方案，但可能不是最强大的：

```
url = new URL(userSuppliedPath);
String context = url.getProtocol();
String hostname = url.getHost();
String thePath = url.getPath();
int port = url.getPort();
thePath = thePath.replaceAll("(^/|/$)", ""); // removes beginning/end slash
String encodedPath = URLEncoder.encode(thePath, "UTF-8"); // encodes unicode characters
encodedPath = encodedPath.replace("+", "%20"); // change + to %20 (space)
encodedPath = encodedPath.replace("%2F", "/"); // change %2F back to slash
urlString = context + "://" + hostname + ":" + port + "/" + encodedPath; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:48:25.560

URLEncoder 旨在用于编码表单内容，而不是整个 URI。将 / 编码为 %2F 是为了防止用户输入被解释为目录，而 + 是表单数据的有效编码。（表单数据 == URI 后面的一部分？）

理想情况下，您应在将“Blue Öyster Cult”附加到基本 URI*之前*对其进行编码，而不是对整个字符串进行编码。如果“Blue Öyster Cult”是路径的一部分而不是查询字符串的一部分，您必须自己将 + 替换为 %20。有了这些限制，URLEncoder 可以正常工作。

# audio - 背景音频拒绝在 WP8 上播放流

> ID：15511806
> 
> 赞同：1
> 
> 时间：2013-03-19T22:33:05.483
> 
> 标签：audio, background, streaming, windows-phone-8

我有一个 Windows Phone 7 应用程序，可以在 WP7 设备上播放互联网广播流。如果您在 WP8 上运行该应用程序，它只会拒绝播放。我已经尝试将应用程序升级为真正的 WP8 应用程序，只是为了看看这是否会有所不同，但似乎没有。

我得到的异常是带有来自 HRESULT 的异常消息的 COMException：0xC00D2EE0

堆栈跟踪是：

```
 at Microsoft.Phone.BackgroundAudio.BackgroundAudioPlayer.Play()
   at HotRadioAgent.AudioPlayer.OnUserAction(BackgroundAudioPlayer player, AudioTrack track, UserAction action, Object param)
   at Microsoft.Phone.BackgroundAudio.AudioPlayerAgent.CallOnUserAction(ParameterPropertyBag parameters)
   at Microsoft.Phone.BackgroundAudio.AudioPlayerAgent.Invoke(Uri uri, ParameterPropertyBag parameters)
   at Microsoft.Phone.BackgroundAgentDispatcher.AgentRequest.Invoke()
   at Microsoft.Phone.BackgroundAgentDispatcher.InvocationThread()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

流本身是通过音频播放代理（不是音频流代理）播放的，如上所述，它在 WP7 设备上运行良好。

有问题的流是[http://stream1.tune-in.co.uk:7002/;stream.mp3](http://stream1.tune-in.co.uk:7002/;stream.mp3)

如果任何音频大师可以帮助我解决这个问题，将不胜感激。

# variables - 如何获取注册表项的值，并且仅使用 powershell 获取值

> ID：15511809
> 
> 赞同：77
> 
> 时间：2013-03-19T22:33:36.383
> 
> 标签：variables, powershell, registrykey

谁能帮我提取注册表项的值并将其放入 PowerShell 中的变量中？到目前为止，我已经使用了`Get-ItemProperty`，`reg query`虽然两者都会拉取值，但两者都会添加额外的文本。我只需要注册表项中的字符串文本和键中的字符串文本。我确信我可以创建一个函数来去除多余的文本，但如果有什么变化（即 reg 键名），它可能会影响这一点。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-03-19T22:42:30.993

```
$key = 'HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion'
(Get-ItemProperty -Path $key -Name ProgramFilesDir).ProgramFilesDir 
```

我从来不喜欢提供者是如何这样实现的：/

基本上，它使每个注册表值成为具有、、和属性的`PSCustomObject`对象，然后是其实际值的属性。因此，即使您按名称要求项目，要获得其值，您也必须再次使用该名称。`PsPath``PsParentPath``PsChildname``PSDrive``PSProvider`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-05-11T10:16:09.193

这些答案都不适用于值名称包含空格、点或其他在 PowerShell 中保留的字符的情况。在这种情况下，您必须按照[http://blog.danskingdom.com/accessing-powershell-variables-with-periods-in-their-name/](http://blog.danskingdom.com/accessing-powershell-variables-with-periods-in-their-name/)将名称用双引号括起来- 例如：

```
PS> Get-ItemProperty Registry::HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS\VS7

14.0         : C:\Program Files (x86)\Microsoft Visual Studio 14.0\
12.0         : C:\Program Files (x86)\Microsoft Visual Studio 12.0\
11.0         : C:\Program Files (x86)\Microsoft Visual Studio 11.0\
15.0         : C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\
PSPath       : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS\V
               S7
PSParentPath : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS
PSChildName  : VS7
PSProvider   : Microsoft.PowerShell.Core\Registry 
```

如果您想访问任何 14.0、12.0、11.0、15.0 值，则接受答案的解决方案**将不起作用**- 您将不会得到任何输出：

```
PS> (Get-ItemProperty Registry::HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS\VS7 -Name 15.0).15.0
PS> 
```

起作用的是引用值名称，为了安全起见，无论如何您都应该这样做：

```
PS> (Get-ItemProperty "Registry::HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS\VS7" -Name "15.0")."15.0"
C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\
PS> 
```

因此，应将接受的答案修改为：

```
PS> $key = "Registry::HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS\VS7"
PS> $value = "15.0"
PS> (Get-ItemProperty -Path $key -Name $value).$value
C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\
PS> 
```

这适用于 PowerShell 2.0 到 5.0（尽管您可能应该[`Get-ItemPropertyValue`](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.management/get-itempropertyvalue)在 v5 中使用）。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-02-18T05:09:28.903

Harry Martyrossian 在对[他自己的回答](https://stackoverflow.com/a/35376695/45375)的评论中提到
**[Get-ItemPropertyValue](https://technet.microsoft.com/en-us/library/dn807174.aspx)** cmdlet 是在**Powershell v5**中引入的，它解决了这个问题：

```
PS> Get-ItemPropertyValue 'HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion' 'ProgramFilesDir'
C:\Program Files 
```

* * *

**PowerShell v4-**的替代方案：

这是一个尝试保持效率，同时消除重复值名称的需要，但是，这仍然有点麻烦：

```
& { 
  (Get-ItemProperty `
      -LiteralPath HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion `
      -Name $args 
  ).$args 
} ProgramFilesDir 
```

通过使用脚本块，值名称可以作为参数传入*一次*，然后参数变量 ( `$args`) 可以在块内简单地使用两次。

或者，一个简单的辅助函数可以减轻痛苦：

```
function Get-RegValue([String] $KeyPath, [String] $ValueName) {
  (Get-ItemProperty -LiteralPath $KeyPath -Name $ValueName).$ValueName
} 
```

* * *

^(注意：上面的所有解决方案都*绕过了*[Ian Kemp 的](https://stackoverflow.com/a/43912590/45375)回答中描述的问题 - 当用作*属性*名称时，需要对某些值名称使用显式引用；例如，`.'15.0'`- 因为值名称是作为*参数*传递的，而属性访问是通过*变量*发生的；例如，`.$ValueName`)

* * *

至于其他答案：

*   [Andy Arismendi 的有用答案解释了必须](https://stackoverflow.com/a/15511932/45375)*重复*值名称才能有效获取值数据*的*烦恼。
*   [M Jeremy Carter 的有用答案](https://stackoverflow.com/a/18235300/45375)更*方便*，但对于具有大量值的键可能是*性能缺陷*，因为必须构造具有大量属性的对象。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-14T15:02:47.543

我不确定这是否已更改，或者是否与您使用的 PS 版本有关，但使用 Andy 的示例，我可以删除 -Name 参数，我仍然可以获得 reg 项的值：

```
PS C:\> $key = 'HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion'
PS C:\> (Get-ItemProperty -Path $key).ProgramFilesDir
C:\Program Files

PS C:\> $psversiontable.psversion

Major  Minor  Build  Revision
-----  -----  -----  --------
2      0      -1     -1 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-19T21:07:20.053

给定`\SQL`具有两个属性的键：

[![在此处输入图像描述](../Images/fe7f0861bab0649ef5c18dcd69570131.png)](https://i.stack.imgur.com/SaaNC.png)

我会在以下情况下使用“MSSQLSERVER”，其中我不确定使用点符号的属性名称是什么：

```
$regkey_property_name = 'MSSQLSERVER'
$regkey = get-item -Path 'HKLM:\Software\Microsoft\Microsoft SQL Server\Instance Names\SQL'
$regkey.GetValue($regkey_property_name) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T22:41:59.857

那么你需要在这里具体。据我所知，注册表中的键是属性的“文件夹”。那么你的意思是获取财产的价值吗？如果是这样，请尝试以下操作：

```
(Get-ItemProperty HKLM:\Software\Microsoft\PowerShell\1\PowerShellEngine -Name PowerShellVersion).PowerShellVersion 
```

首先我们得到一个包含我们需要的属性的对象`Get-ItemProperty`，然后我们从该对象中获取我们需要的属性的值。这会将属性的值作为字符串返回。上面的示例为您提供了“legacy”/compatibility-mdoe powershell（1.0 或 2.0）的 PS 版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-13T06:03:48.460

以下代码将枚举某个注册表项的所有值，对它们进行排序并返回值名称：由冒号 (:) 分隔的值对：

```
$path = 'HKLM:\SOFTWARE\Wow6432Node\Microsoft\.NETFramework';

Get-Item -Path $path | Select-Object -ExpandProperty Property | Sort | % {
    $command = [String]::Format('(Get-ItemProperty -Path "{0}" -Name "{1}")."{1}"', $path, $_);
    $value = Invoke-Expression -Command $command;
    $_ + ' : ' + $value; }; 
```

像这样：

```
DbgJITDebugLaunchSetting : 16
DbgManagedDebugger : "C:\Windows\system32\vsjitdebugger.exe" PID %d APPDOM %d EXTEXT "%s" EVTHDL %d
InstallRoot : C:\Windows\Microsoft.NET\Framework\ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-31T22:09:26.650

不确定此功能到达的版本，但您可以使用类似这样的方法返回数组中多个子注册表项的所有属性：

```
$InstalledSoftware = Get-ChildItem "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall" | ForEach-Object {Get-ItemProperty "Registry::$_"} 
```

仅在 Google 出于相关原因将我带到这里时才添加此内容，我最终想出了上述用于疏通注册表的单行代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-23T15:19:34.747

如果您创建一个对象，您将获得更具可读性的输出，并获得一个具有您可以访问的属性的对象：

```
$path = 'HKLM:\SOFTWARE\Wow6432Node\Microsoft\.NETFramework'
$obj  = New-Object -TypeName psobject

Get-Item -Path $path | Select-Object -ExpandProperty Property | Sort | % {
$command = [String]::Format('(Get-ItemProperty -Path "{0}" -Name "{1}")."{1}"', $path, $_)
$value = Invoke-Expression -Command $command
$obj | Add-Member -MemberType NoteProperty -Name $_ -Value $value}

Write-Output $obj | fl 
```

示例输出： InstallRoot : C:\Windows\Microsoft.NET\Framework\

对象：$obj.InstallRoot = C:\Windows\Microsoft.NET\Framework\

事情的真相是，这比它需要的要复杂得多。这是一个更好的例子，也更简单：

```
$path = 'HKLM:\SOFTWARE\Wow6432Node\Microsoft\.NETFramework'
$objReg = Get-ItemProperty -Path $path | Select -Property * 
```

$objReg 现在是一个自定义对象，其中每个注册表项都是一个属性名称。您可以通过以下方式查看格式化列表：

```
write-output $objReg

InstallRoot        : C:\Windows\Microsoft.NET\Framework\
DbgManagedDebugger : "C:\windows\system32\vsjitdebugger.exe" 
```

您可以访问对象本身：

```
$objReg.InstallRoot
C:\Windows\Microsoft.NET\Framework\ 
```

# php - PHP 用 mysqli 变慢

> ID：15511813
> 
> 赞同：11
> 
> 时间：2013-03-19T22:34:02.507
> 
> 标签：php, mysql, mysqli

我（希望）这是一个非常直截了当的问题，关于 PHP/MySQL 遗漏了什么。首先，计算机是 Windows 7 机器并且运行 XAMPP（Apache、PHP、MySQL 等）——没有 Windows/IIS 等。

这些机器很快，PHP 和 MySQL 运行速度超快。但是，有一台机器与 PHP 和 MySQL 一起工作的方式是某种延迟 - 具体来说，它本质上是 3 秒。实际上，如果您删除代码正在执行的所有操作，那么它只会像这样设置其连接：

```
$db = new mysqli($hostname, $username, $password, $database); 
```

...并且没有查询或任何东西 - 只是设置对象的这条 PHP 行，它需要 3 秒。

相比之下，您注释掉这一行，页面是即时的。

无论如何，为什么会这样？看起来没有什么问题，确切地说，只是以某种方式设置了我们想要摆脱的这 3 秒。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T23:14:46.883

如果这是在本地托管并且您使用的是 localhost 这将是您的问题，请尝试使用

```
$db = new mysqli('127.0.0.1', $username, $password, $database); 
```

这是因为如何`MYSQLI`处理 localhost 和`IPV6`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-07T12:35:05.230

```
$orig = $_GET['orig'];
$des_id = $_GET['des_id'];
try {
    $dbuser = "kim";
    $dbpass = "kim";
    $conn = new  PDO('mysql:host=localhost;dbname=destination', $dbuser, $dbpass);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);    
    $stmt = $conn->prepare("SELECT pl_id FROM view_places WHERE name = :name LIMIT 1");

    $stmt->bindParam(':name',$orig); 
    $stmt->execute();
    $result_1 = $stmt -> fetch();
    $res1 = $result_1["pl_id"];  

    $stmt->bindParam(':name', $des_id); 
    $stmt->execute(); 
    $result_2 = $stmt -> fetch(); 
        $res2 = $result_2["pl_id"];  
        echo   'origin_number:'.$res1\. ', '.'destination_id:'.$res2;
    }   catch(PDOException $e) {
            echo 'ERROR: ' . $e->getMessage();
    } 
```

# extjs - 如何从另一台机器连接到 Aptana Studio 上的内置 Web 服务器

> ID：15511815
> 
> 赞同：1
> 
> 时间：2013-03-19T22:34:10.330
> 
> 标签：extjs, webserver, aptana3

我有一个用 ExtJS 4 编写的项目，我将其运行为：Web Browser build-in Web Server 该项目在该机器上运行良好，网址为：127.0.0.1:8020/MyProject/index.html

现在，我想从另一台机器访问该 url。即使用Aptana所在机器的ip地址

我的IP地址：8020/MyProject/index.html

但它找不到它。有什么我可以做的配置吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T10:05:33.053

我遇到了同样的问题。

就我而言，问题是代理服务器设置。

我通过将“myIPaddress”添加到网络代理设置窗口的绕过列表中解决了这个问题。

# ios - 如何通过按按钮将纵向更改为横向并返回？

> ID：15511816
> 
> 赞同：0
> 
> 时间：2013-03-19T22:34:16.447
> 
> 标签：ios, objective-c

我有一个 ipad 应用程序，我锁定到横向左侧。但是它有一个 uiwebview 可以根据内容更改为纵向或横向。我想按一个按钮来做到这一点。那可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:45:50.723

一般来说，UIViewController 将允许其 UIView 旋转以跟随设备的方向。如果您不希望发生旋转，那么您可以使用指定您的首选/唯一方向`supportedInterfaceOrientations:`

因此，根据您的需要，当按下按钮时，调用`supportedInterfaceOrientations:`UIView 应该使用的唯一方向。在您指定方向调用`attemptRotationToDeviceOrientation`以强制转换之后。

# ruby-on-rails - Activerecord Reputation System Gem - 额外功能实现

> ID：15511820
> 
> 赞同：1
> 
> 时间：2013-03-19T22:34:33.410
> 
> 标签：ruby-on-rails, activerecord

我正在将这个 gem 实现到我的网站中。但是我正在尝试实现更多功能。我放置了一个竖起大拇指和大拇指向下的图标，用户将单击该图标进行投票。然后我更进一步，尝试实现与 youtube 系统类似的投票方式。我想要，当用户点击投票图标将颜色变为绿色时。

幸运的是，我发现其他人也尝试过，但是按照他的指示我遇到了问题。这个人所做的位于[Active Record Reputation System - Railscasts](http://railscasts.com/episodes/364-active-record-reputation-system?view=comments)，他的用户名是 kobaltz。

因此，当我尝试将其实现到我的项目中时，图标（加载的图像）不会改变。我经常看到红色图像。

我尝试调试，发现是这段代码导致了问题

```
def up_voted_for?(item)
   eval = evaluations.where(target_type: item.class, target_id: item.id).first
   eval.present? && eval.value > 0 ? true : false
end 
```

执行代码后的 eval 在哪里。

因此，如果用户投票与否，则显示正确图像的代码是：

```
 <% if can? :vote, answers %>
    <% if current_user.up_voted_for?(answers) %>
      <%= image_tag("color_up_arrow.png") %>
    <% else %> 
      <%= link_to image_tag("gray_up_arrow.png"), vote_answer_path(answers, type: "up"), method: "post" %>
    <% end %>
  <% end %> 
```

为了清楚地了解所有代码，评估位于 user.rb 文件中：

```
has_many :evaluations, class_name: "RSEvaluation", as: :source 
```

请让我知道你的想法。如果需要任何其他信息，请告诉我。

ps没有错误日志，只是加载了不正确的图像。

感谢您的努力和时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:06:13.417

更新：找到了这个解决方案。这个 gem 的开发者更新了 evaluation.rb 文件，结果发送的查询是错误的。您可以更正您发送的查询或使用旧版本 (1.5.1)。

感谢所有试图提供帮助的人。

# python - 是否可以在 Python 中为 lambda 表达式的参数指定默认值？

> ID：15511823
> 
> 赞同：2
> 
> 时间：2013-03-19T22:34:43.553
> 
> 标签：python, lambda

以下是正确的 Python 代码吗？如果不是，那么这种表达式的正确语法是什么？

```
x = lambda (y, z=None) : y if z == None else z 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:36:04.910

您不需要括号：

```
x = lambda y, z=None: y if z is None else z 
```

# android - SQLite 数据库在测试期间不会被推送到手机

> ID：15511829
> 
> 赞同：0
> 
> 时间：2013-03-19T22:35:16.937
> 
> 标签：android, sqlite

我的资产文件夹中有我的 sqlite 数据库。数据库被称为 foo.db 当我去测试我的应用程序时，无论是在模拟器还是我的设备上，它总是说没有数据库存在，创建了空白数据库。我的数据库加载了数据，我想让它推送到手机或模拟器进行测试。为什么这不起作用？

下面是我的应用程序中检查数据库是否存在的部分......但它永远找不到它。我已经在调试模式下运行它并且 DB_PATH 和 DB_NAME 具有正确的值，但它仍然每次都会创建一个空数据库。

我在看什么？

```
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listpage);
    this.myDbHelper = new DataBaseHelper(this);
    try {
        myDbHelper.createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }
    try {
        myDbHelper.openDataBase();
    } catch (SQLException sqle) {
        throw sqle;
    }
}

/**
 * Creates a empty database on the system and rewrites it with your own database.
 */
public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (dbExist) {
        //do nothing - database already exist
        System.out.println("DB alrady exists  comment this out before your deply");
    } else {
        System.out.println("an empty DB is beng created  comment this out before your deply");
        //By calling this method an empty database will be created into the default system path
        //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the
 * application.
 *
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        //database does't exist yet.
    }

    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
} 
```

# c# - 类库中的 C# Entity Framework 数据库迁移

> ID：15511831
> 
> 赞同：1
> 
> 时间：2013-03-19T22:35:21.990
> 
> 标签：c#, entity-framework, entity-framework-migrations

我有一个带有 MVC 4 项目和类库的解决方案。MVC 4 项目和类库都启用了数据库迁移。我可以为每个项目运行“更新数据库”并将两个迁移应用到数据库，但是当我尝试向任一项目添加附加迁移时，迁移包括从另一个项目的迁移中删除表的代码。对此的任何帮助将不胜感激。

注意：这不是重复的。这个问题是关于迁移的。我的问题是每组迁移都会接管整个数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:06:26.387

先写代码吧？

我不确定这是否会回答您的问题，但您可以尝试以下任一方法

*   CreateDatabaseIfNotExists - 这只会在数据库不存在时重新创建数据库
*   DropCreateDatabaseAlways - 这将始终重新创建数据库，这将删除当前数据库，包括数据，然后重新创建数据库模式
*   DropCreateDatabaseIfModelChanges - 如果您更改模型类并丢失所有数据，这将重新创建数据库。

希望有帮助

# python - 如何在python中获取自某个日期以来的小时数

> ID：15511832
> 
> 赞同：1
> 
> 时间：2013-03-19T22:35:37.167
> 
> 标签：python, datetime, timedelta

我有一个功能，`getHoursSince()`：

```
def getHoursSince (date):

    prior = datetime.datetime.now() - datetime.timedelta(days=date)

    priorHour = prior.hour

    hoursSinceDate = ...

    return hoursSinceDate 
```

所以，我可以得到一个日期对象，给定一个常量值，即如果`yesterday = 1`，我可以调用`getHoursSince(yesterday)`。我不知道如何获取变量之间的小时数`datetime.datetime.now()`——`priorHour`有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:38:08.010

你走错了路；您只需将时间转换`timedelta()`为小时：

```
def getHoursSince(date):
    return int(datetime.timedelta(days=date).total_seconds() // 3600) 
```

这使：

```
>>> getHoursSince(1)
24
>>> getHoursSince(1.5)
36
>>> getHoursSince(2)
48
>>> getHoursSince(3)
72 
```

但是您也可以通过简单的算术来确定它：

```
def getHoursSince(date):
    return int(24 * date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-21T00:31:05.220

[`timedelta.total_seconds()`文档](https://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)说：

> 对于秒以外的间隔单位，直接使用除法形式（例如`td / timedelta(microseconds=1)`）。

在这种情况下，情况如下：

```
def getHoursSince(date):
    return datetime.timedelta(days=date) // datetime.timedelta(hours=1) 
```

# css - DIV 在 FireFox 中未正确对齐

> ID：15511835
> 
> 赞同：0
> 
> 时间：2013-03-19T22:35:56.187
> 
> 标签：css, html, alignment

以下 HTML 和 CSS 代码在 IE、Chrome 和 Safari 中排列，但在 FireFox 中不排列。我该怎么做才能让它在所有四种主要浏览器中都工作？

HTML：

```
<div id="subnav">
    <div id="subnavtab"><a href="">Plan Your Visit</a></div>
    <div id="subnavtab"><a href="">Tour the Museum</a></div>
    <div id="subnavtab"><a href="">Program & Events</a></div>
    <div id="subnavtab"><a href="">Membership</a></div>
    <div id="subnavtab"><a href="">Donate</a></div>
</div>
<div id="featuredexhibit">
    Featured Exhibit - this can be a rotating menu of exhibits
</div> 
```

CSS：

```
#subnav { margin-top: 20px; width: 740px; text-align: center; }
.subnavtab { background-color: #A1CD3A; padding: 10px 10px 10px 10px; margin: 0 5px 0 0; display: inline-block; } 
#featuredexhibit { width: 740px; height: 200px; background-color: #A7A9AC; margin: 0; clear: both; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:40:30.563

您不能多次使用相同的 id (subnavtab)。改用类。

删除所有浮动属性，使用 text-align: center 应用于您的#subnav。这将使您包含的所有内联块居中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:08:15.740

```
.subnavtab {
    box-sizing: border-box;
    background-color: #A1CD3A;
    padding: 10px 10px 10px 10px;
    display: inline-block;
    width: 20%;
    border-left: 1px solid gray;
    border-right: 1px solid gray;
} 
```

这是完整的代码：http: [//jsfiddle.net/7tjmZ/2/](http://jsfiddle.net/7tjmZ/2/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-17T11:56:10.270

使用类名而不是 id，您可以使用类名设置 css 属性

例子：

```
.yourClassName
{
    background-color: #A1CD3A;
    padding: 10px 10px 10px 10px;
    margin: 0 5px 0 0;
    display: inline-block;
} 
```

# c# - 在 XML 中查找值并输出

> ID：15511838
> 
> 赞同：3
> 
> 时间：2013-03-19T22:36:05.053
> 
> 标签：c#

我有这个 XML

```
<?xml version="1.0" encoding="UTF-8" ?>
<uclassify xmlns="http://api.uclassify.com/1/ResponseSchema" version="1.01">
  <status success="true" statusCode="2000"/>
  <readCalls>
    <classify id="cls1">
      <classification textCoverage="1">
        <class className="female" p="0.932408"/>
        <class className="male" p="0.0675915"/>
      </classification>
    </classify>
  </readCalls>
</uclassify> 
```

或类似的。重要的是，我没有

```
<tag>value</tag> 
```

但

```
<tag attribute1 attribute2 ... />. 
```

我想输出的是例如

> 属性1：属性值1

所以我想输入一个像“女性”这样的词，我希望它输出 0.932408。

我试图开始的事情

```
string xml = HttpGet("http://uclassify.com/browse/" + username + "/" + classifiername + "/" + operation + "?" + paramz.ToString());
XDocument doc = XDocument.Parse(xml);
var list = doc.Root.Elements("uclassify")
               .Select(element => element.Value)
               .ToList(); 
```

但是list总是空的，大概是因为没有值，只有属性。

编辑：

当前版本

```
string xml = HttpGet("http://uclassify.com/browse/" + username + "/" + classifiername + "/" + operation + "?" + paramz.ToString());
XDocument doc = XDocument.Parse(xml);
XNamespace ns = "http://api.uclassify.com/1/ResponseSchema";
var list = doc.Root.Descendants(ns + "class")
                .Select(element => element.Value)
                .ToList();
textBox1.Text = string.Join(",", list.ToArray()); 
```

结果是一个逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:46:42.013

所以你的问题是默认命名空间：

`xmlns="http://api.uclassify.com/1/ResponseSchema"`

要修复它，您需要限定元素选择器。

你可以这样做......

```
XNamespace ns = "http://api.uclassify.com/1/ResponseSchema";
var list = doc.Root.Descendants(ns + "class")
                .Select(element => element.Value)
                .ToList(); 
```

我稍微修改了您的代码以选择所有`class`节点，但您可以看到我`"class"`在`Descendants()`调用中使用命名空间变量为您添加了前缀`ns`。

编辑：所以现在你的问题是你正在选择元素的值，而不是属性值......

因此，如果我们正在为属性值构建属性名称字典，您可能需要使用如下代码：

```
Dictionary<string,double> dictionary = doc.Root.Descendants(ns + "class")
                .ToDictionary(
                    element => element.Attribute("className").Value,
                    element => double.Parse(element.Attribute("p").Value));

foreach(var item in dictionary)
{
    Console.WriteLine(string.Format("{0}: {1}", item.Key, item.Value));
} 
```

所以有几点需要注意：

1.  我假设`className`属性中的每个`class`属性都是唯一的，否则你会有一个例外
2.  我假设属性的`p`值为 a `double`。

# java - emacs & clojure 编译错误

> ID：15511840
> 
> 赞同：2
> 
> 时间：2013-03-19T22:36:12.020
> 
> 标签：java, clojure, leiningen, emacs24

我是 clojure & emacs 的初学者。我正在关注 clojure-doc.org 上的 clojure 和 emacs 教程。在我用 lein 创建了我的测试项目后，在 emacs 中启动了 nrepl 并编辑了 core_test.clj 我试图编译。

然后我得到了这个：

```
Loading /home/jakov/dev/PROJECTS/clojure/test1/test/test1/core_test.clj...
FileNotFoundException Could not locate test1/core__init.class or test1/core.clj on       
classpath:   clojure.lang.RT.load (RT.java:432) 
```

我的项目是由 leiningen 2 创建的`lein new test1`。我正在使用 emacs24

这里可能是什么问题？

编辑：这是我的项目的文件结构：

```
.
./doc
./doc/intro.md
./.gitignore
./README.md
./project.clj
./src
./src/test1
./src/test1/core.clj
./test
./test/test1
./test/test1/core_test.clj 
```

编辑：

这是我的文件：

**core_test.clj**

```
(ns test1.core-test
  (:use clojure.test
        test1.core))

(deftest pairs-of-values
   (let [args ["--server" "localhost"
               "--port" "8080"
               "--environment" "production"]]
      (is (= {:server "localhost"
              :port "8080"
              :environment "production"}
             (parse-args args))))) 
```

**核心.clj**

```
(ns test1.core)

(defn foo
  "I don't do a whole lot."
  [x]
  (println x "Hello, World!")) 
```

据我了解，这应该给我另一个错误，据我了解，它应该抱怨解析参数。但是，当我将其添加到**core.clj**时，会发生同样的错误：

```
(defn parse-args [args]
  {}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:19:16.073

这就是问题所在：

在启动 nrepl 之前，emacs 似乎需要知道项目的路径`nrepl-jack-in`。但是，如果您使用 just 启动 nrepl`nrepl`并将其连接到在单独的终端窗口中启动的 repl 进程的端口，那么 emacs 将从它连接到的 repl 进程中知道输出路径等。

因此，为了使用`nrepl-jack-in`，您需要先打开一个项目文件，例如`core.clj`or`core_test.clj`然后启动`nrepl-jack-in`.

github 上的 Nrepl 页面添加了以下内容： *Alternative you can use `C-u M-x nrepl-jack-in`to specify the name of a lein project,而无需访问其中的任何文件。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:47:52.540

让我给你参考一下，什么对我有用：

```
$ lein new test1
Generating a project called test1 based on the 'default' template.
To see other templates (app, lein plugin, etc), try `lein help new`.
$ cd test1
$ lein repl
nREPL server started on port 4001
REPL-y 0.1.9
Clojure 1.4.0
    Exit: Control+D or (exit) or (quit)
Commands: (user/help)
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
          (user/sourcery function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
Examples from clojuredocs.org: [clojuredocs or cdoc]
          (user/clojuredocs name-here)
          (user/clojuredocs "ns-here" "name-here")
user=> 
```

在 Emacs 中：

*   `M-x nrepl<RET>`
*   打开文件`test/test1/core_test.clj`
*   `C-c C-k`

`*Messages*`缓冲区说：

```
Loading /Users/marko/dev/clj/test1/src/test1/core.clj...
#'test1.core/foo 
```

您是否执行完全相同的步骤并得到不希望的结果？

# java - android应用程序在启动前崩溃

> ID：15511841
> 
> 赞同：3
> 
> 时间：2013-03-19T22:36:19.727
> 
> 标签：java, android, cordova

这是一个非常简单的应用程序，在我添加之前效果很好

```
<script src="cordova-2.5.0.js" type="text/javascript"></script> 
```

到我的 index.html 它在启动之前崩溃（在模拟器和实际设备中）这是错误

```
03-19 21:24:28.633: E/AndroidRuntime(1467): FATAL EXCEPTION: main
03-19 21:24:28.633: E/AndroidRuntime(1467): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 (has extras) } in org.apache.cordova.NetworkManager$1@b49b2b50
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.os.Handler.handleCallback(Handler.java:605)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.os.Looper.loop(Looper.java:137)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at java.lang.reflect.Method.invoke(Method.java:511)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at dalvik.system.NativeStart.main(Native Method)
03-19 21:24:28.633: E/AndroidRuntime(1467): Caused by: java.lang.SecurityException: ConnectivityService: Neither user 10042 nor current process has android.permission.ACCESS_NETWORK_STATE.
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.os.Parcel.readException(Parcel.java:1327)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.os.Parcel.readException(Parcel.java:1281)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:597)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:365)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at org.apache.cordova.NetworkManager$1.onReceive(NetworkManager.java:107)
03-19 21:24:28.633: E/AndroidRuntime(1467):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
03-19 21:24:28.633: E/AndroidRuntime(1467):     ... 9 more
03-19 21:24:28.672: E/dalvikvm(1467): VM aborting
03-19 21:24:28.672: A/libc(1467): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:38:16.087

添加：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

到您的 AndroidManifest.xml。

它实际上在您的异常消息中说明：

```
Caused by: java.lang.SecurityException: ConnectivityService: 
Neither user 10042 nor current process has android.permission.ACCESS_NETWORK_STATE. 
```

# ruby-on-rails - Rails ckeditor“*”后的无效CSS：预期“{”，是“html .cke_uicol ...”

> ID：15511850
> 
> 赞同：3
> 
> 时间：2013-03-19T22:37:09.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, gem, ckeditor

我正在将应用程序更新到 rails 3.1，并且在预编译资产时出现此错误，我已将 ckeditor 更新为 4.0.2，因为根据此[Github 问题](https://github.com/galetahub/ckeditor/issues/188)将修复它，但错误仍然存​​在。更新 gem 后我必须做些什么吗？

这是完整的错误：

```
Invalid CSS after "*": expected "{", was "html .cke_uicol..."

"html" may only be used at the beginning of a compound selector.
  (in /home/stanwinston/stanwinston/app/assets/javascripts/ckeditor/_source/plugins/uicolor/yui/assets/yui.css) 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T23:52:26.923

好吧，我会为此受到一些抨击，但是，在尝试升级和等等 3 小时后，我是这样修复它的：

由于我的应用程序的复杂性以及支持 IE 8 的要求，我无法轻松更改 rails 或 ckeditor 版本。我所做的是修复 gem 中包含的 css：

/opt/boxen/rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/ckeditor-3.7.1/vendor/assets/javascripts/ckeditor/plugins/uicolor/yui/assets/yui .css

有一个“*html”，你需要一个“* html”，注意空格。

以下是有关该问题的一些相关帖子：http: [//dev.ckeditor.com/ticket/9411](http://dev.ckeditor.com/ticket/9411)和[https://github.com/galetahub/ckeditor/issues/188](https://github.com/galetahub/ckeditor/issues/188)

然后我在本地预编译了我的资产，以便资产编译发生在我的机器上，并带有修补的 gem。我不喜欢这种方法，但我的客户不喜欢损坏的 Web 表单，或者在不添加任何新功能的情况下花费更长的时间来更新库。

向 gem 提交拉取请求是没有意义的，因为它是来自第 3 方的第 3 方的代码，并且 gem 早已切换到 rails 4 支持。

随意告诉我我错了，因为下面的 X 原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:36:36.793

我也偶然发现了同样的情况，但将我的 Rails 版本更新到 3.2+ 解决了这个问题

# java - 如何使用 Java 中的 PortAudio 绘制波形（jpab with Processing）？

> ID：15511851
> 
> 赞同：2
> 
> 时间：2013-03-19T22:37:22.110
> 
> 标签：java, audio, processing, portaudio

我需要在 Java 中访问多个音频输入，所以首先咨询了 SO 并找到[了这个答案](https://stackoverflow.com/questions/434803/how-to-sample-multi-channel-sound-input-in-java/12255119#12255119)并使用 PortAudio Java 绑定（[jpab](https://code.google.com/p/jpab/)）。不幸的是，我发现很少且过时的[文档](http://www.portaudio.com/docs/v19-doxydocs/java_binding.html)。

根据我的发现，我在 Eclipse 中使用[Processing进行了尝试：](http://processing.org)

```
import java.nio.ByteBuffer;

import org.jpab.Callback;
import org.jpab.Device;
import org.jpab.PortAudio;
import org.jpab.PortAudioException;
import org.jpab.Stream;
import org.jpab.StreamConfiguration;
import org.jpab.StreamConfiguration.Mode;
import org.jpab.StreamConfiguration.SampleFormat;

import processing.core.PApplet;

public class PortAudioPlot extends PApplet implements Callback {

    float min = 1000000,max = 0;

    public void setup(){
        try {
            PortAudio.initialize();
            for(Device d : PortAudio.getDevices()) println(d);

            Device d = PortAudio.getDevices().get(1);// Microphone (Realtek High Definition Audio)
            if(d.getMaxInputChannels() > 0){
                println(d.getName());
                StreamConfiguration sc = new StreamConfiguration();
                sc.setInputDevice(d);
                sc.setInputFormat(SampleFormat.SIGNED_INTEGER_16);
                sc.setMode(Mode.INPUT_ONLY);
                sc.setSampleRate(44100);
                sc.setInputChannels(d.getMaxInputChannels());
                PortAudio.createStream(sc, this, new Runnable() {
                    public void run() {
                        try {
                            PortAudio.terminate();
                        } catch (PortAudioException ignore) { ignore.printStackTrace(); }
                    }
                }).start();
            }
        } catch (PortAudioException e) {
            e.printStackTrace();
        }
    }
    public void draw(){
        if(keyPressed && key == 's') saveFrame(dataPath("frame-####.jpg"));
    }
    public void stop(){
        try {
            PortAudio.terminate();
        } catch (PortAudioException e) {
            e.printStackTrace();
        }
        super.stop();
    }

    public static void main(String[] args) {
        PApplet.main(PortAudioPlot.class.getSimpleName());
    }
    @Override
    public State callback(ByteBuffer in, ByteBuffer out) {
        int size = in.capacity();
        println("in size: " + size + " min: " + min + " max: " + max);
        background(255);
        beginShape(LINES);
        for (int i = 0; i < size; i++) {
            float v = in.getFloat(i);
            if(!Float.isNaN(v) && v != Float.POSITIVE_INFINITY && v != Float.NEGATIVE_INFINITY){
                float x = (float)i/size * width;
                float y = (height * .5f) + (v * .5f);
                if(v < min) min = v;
                if(v > max) max = v;
                vertex(x,y);
            }
        }
        endShape();
        return State.ABORTED;
    }

} 
```

我从第一个麦克风开始，我想我已经接近了，因为我可以看到一些值，但我不能 100% 确定我是否正确遍历了输入 ByteBuffer。

使用 jpab 从音频输入访问值和绘制波形的正确方法是什么？

我已经稍微更新了代码，并设法让一些东西更接近情节，但我仍然一无所知。从输入 ByteBuffer 读取的浮点数的正确最小/最大范围是多少？我是否以正确的方式使用它？

这是我所拥有的快速预览：

![波形图](../Images/86de646ac470395dc334dd8cd2161e02.png)

我还在[这里](http://lifesine.eu/so/PortAudioTest.zip)上传了 eclipse 项目。它使用[预构建的 Windows x86 PortAudio 二进制文件](https://code.google.com/p/jpab/downloads/list)。

另一个更新：我被告知值应该从 -1.0 到 1.0 并为此调整我的代码以映射/钳位，但我不确定这是否属实。这是一个更新的示例：

```
import java.nio.ByteBuffer;
import java.util.Arrays;

import org.jpab.Callback;
import org.jpab.Device;
import org.jpab.PortAudio;
import org.jpab.PortAudioException;
import org.jpab.Stream;
import org.jpab.StreamConfiguration;
import org.jpab.StreamConfiguration.Mode;
import org.jpab.StreamConfiguration.SampleFormat;

import processing.core.PApplet;

public class PortAudioPlot extends PApplet implements Callback {

    int[] pix;
    int hh;//half height
    int py;//y for each channel plot
    int numChannels;
    int pad = 5;

    public void setup(){
        try {
            colorMode(HSB,360,100,100);
            hh = height/2;
            pix = new int[width*height];
            PortAudio.initialize();
            for(Device d : PortAudio.getDevices()) println(d);

            Device d = PortAudio.getDevices().get(1);// Microphone (Realtek High Definition Audio)
            numChannels = d.getMaxInputChannels();
            py = height / numChannels;
            if(numChannels > 0){
                println(d.getName()+" sr:" + d.getDefaultSampleRate());
                StreamConfiguration sc = new StreamConfiguration();
                sc.setInputLatency(d.getDefaultLowInputLatency());
                sc.setInputDevice(d);
                sc.setInputFormat(SampleFormat.SIGNED_INTEGER_16);
                sc.setMode(Mode.INPUT_ONLY);
                sc.setSampleRate(d.getDefaultSampleRate());
                sc.setInputChannels(numChannels);
                PortAudio.createStream(sc, this, new Runnable() {
                    public void run() {
                        try {
                            PortAudio.terminate();
                        } catch (PortAudioException ignore) { ignore.printStackTrace(); }
                    }
                }).start();
            }
        } catch (PortAudioException e) {
            e.printStackTrace();
        }
    }
    public void draw(){
        loadPixels();
        arrayCopy(pix, pixels);
        updatePixels();
        if(keyPressed && key == 's') saveFrame(dataPath("frame-####.jpg"));
    }
    public void stop(){
        try {
            PortAudio.terminate();
        } catch (PortAudioException e) {
            e.printStackTrace();
        }
        super.stop();
    }

    public static void main(String[] args) {
        PApplet.main(PortAudioPlot.class.getSimpleName());
    }
    @Override
    public State callback(ByteBuffer in, ByteBuffer out) {
        int size = in.capacity();
        println("in size: " + size);
        Arrays.fill(pix, color(0,0,100));
        for (int i = 0; i < width; i++) {
            int ch = i%numChannels;//channel id
            int sy = py * ch;//channel plot y starting position
            int minY = sy+pad;//min y for min input value
            int maxY = (sy*2)-pad;//min y for min input value
            int buffIndex = i * size / width;//map i(x pixel index) to buffer index
            float v = in.getFloat(buffIndex);
            if(!Float.isNaN(v) && v != Float.POSITIVE_INFINITY && v != Float.NEGATIVE_INFINITY){
                int vOffset = constrain((int)map(v,-1.0f,1.0f,minY,maxY),minY,maxY);
                pix[vOffset * height + i] = color(map(ch,0,numChannels,0,360),100,50);
            }
        }
        return State.RUNNING;
    }

} 
```

我还注意到，当我设置延迟时，输入 ByteBuffer 计数会发生变化。

我注意到另一个令人困惑的事情：JPAB与**jportaudio**不同，尽管大多数 API 是相似的，除了 createStream(jpab)/openStream(jportaudio)。到目前为止，我还没有找到 jportaudio 的编译版本，也没有设法在 Windows 上自己编译它。

关于我如何继续的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:01:51.830

最终目标是访问多个音频输入，而此时这条路线似乎并没有通向任何地方。

我在 Windows 和 OSX 上测试过的最简单的解决方案很容易设置并且可以在纯 Java 中运行，但在处理中也非常好，它是使用可以连接到[JACK的](http://jackaudio.org/)[Beads](http://beadsproject.net)。有关更多详细信息，请参阅此[线程](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/beadsproject/dSvxUM1l9S0)，尤其是有关 JNAJack 的后面部分（不再维护 JJack）。我用过这个版本的[Beads](http://beadsproject.net/downloads/Beads20120423.zip)（下载链接）和[JNA](https://github.com/twall/jna/blob/master/dist/jna.jar)（下载链接）。

这是我用来测试的基本代码示例：

```
import java.util.Arrays;

import org.jaudiolibs.beads.AudioServerIO;

import net.beadsproject.beads.core.AudioContext;
import net.beadsproject.beads.core.AudioIO;
import net.beadsproject.beads.core.UGen;
import net.beadsproject.beads.ugens.Gain;
import processing.core.PApplet;

public class BeadsJNA extends PApplet {

    AudioContext ac;

    public void setup(){
        ac = new AudioContext(new AudioServerIO.Jack(),512,AudioContext.defaultAudioFormat(4,2));//control number of ins(4) and outs(2)

        UGen microphoneIn = ac.getAudioInput();
        Gain g = new Gain(ac, 1, 0.5f);
        g.addInput(microphoneIn);
        ac.out.addInput(g);

        println("no. of inputs:  " + ac.getAudioInput().getOuts()); 

        ac.start();
    }
    public void draw(){
        loadPixels();
      Arrays.fill(pixels, color(0));

      for(int i = 0; i < width; i++)
      {
        int buffIndex = i * ac.getBufferSize() / width;
        int vOffset = (int)((1 + ac.out.getValue(0, buffIndex)) * height / 2);
        pixels[vOffset * height + i] = color(255);
      }
      updatePixels(); 
    }

    public static void main(String[] args) {
        PApplet.main(BeadsJNA.class.getSimpleName());
    }

} 
```

在这个阶段，这对我有用，所以在有人分享一种在 Windows 上使用 jpab/jportaudio 绘制输入波形的简单方法之前，这是一个有效的答案。

# sas - SAS Proc IML：向量的长度

> ID：15511853
> 
> 赞同：0
> 
> 时间：2013-03-19T22:37:37.420
> 
> 标签：sas, proc

如果我有一个 10X2 的矩阵，并且将在 SAS 中存储另一个变量下的矩阵长度值（因此为 10）......它是如何在 PROC IML 中完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:32:47.000

你有 NROW 和 NCOL 功能，这就是你要找的吗？

```
proc iml;
a= {1 2, 2 5, 3 6, 4 1};
r = NROW(a);
c = NCOL(a);
print r c;
quit; 
```

# javascript - 网页的单指滚动 - 什么技术？工作示例？

> ID：15511858
> 
> 赞同：3
> 
> 时间：2013-03-19T22:38:06.980
> 
> 标签：javascript, jquery, css, web, scroll

**设置：**

我有一个本地托管在台式计算机上的网站，我有一个连接到该台式机的触摸屏。使用 Firefox 在触摸屏上查看该网站。

**要求：**

*   从触摸屏启用我的网站的单指滚动。
*   它的行为应该与 iPhone 单指滚动当前的工作方式完全相同。
*   它只需要在 Firefox 中工作。

**问题：**

*   在这种情况下使用的最佳技术是什么？（jQuery/Javascript/CSS？）
*   你能为我提供一个工作示例/解决方案吗？

*非常感谢。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:20:59.603

我会让你解决细微差别，但这样的事情会给你一个想法

```
$(function(){

    var dragYStart;
    var dragScrollStart;
    $(window).one('mousedown',startDrag);

function startDrag(e){
    dragYStart = e.pageY;
    dragScrollStart = $(window).scrollTop();
    $(window).on('mousemove',drag);
    $(window).one('mouseup',stopDrag);
}
function stopDrag(e){
    $(window).off('mousemove',drag);
    $(window).one('mousedown',startDrag);
}
function drag(e){
    var delta = dragYStart - e.pageY;
    $(window).scrollTop(dragScrollStart + delta);
}

}); 
```

[看例子](http://jsfiddle.net/DWjkW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:15:04.817

更新...今天早上发现的。这可能正是你想要的

[http://zynga.github.com/scroller/](http://zynga.github.com/scroller/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T01:24:37.363

# 'iScoll' 库已存档。后代见：

[https://github.com/cubiq/iscroll](https://github.com/cubiq/iscroll) [存档/只读] [https://web.archive.org/web/20170515081250/http://iscrolljs.com/](https://web.archive.org/web/20170515081250/http://iscrolljs.com/) [https://web.archive.org/ web/20180726185738/http://lab.cubiq.org/iscroll/examples/simple/](https://web.archive.org/web/20180726185738/http://lab.cubiq.org/iscroll/examples/simple/)

### 截至 2021 年 5 月 18 日，所有~~链接~~低于 404。

* * *

适用于触控设备上的 iOS 样式滚动（在桌面上也很好用）~~[iScroll](http://cubiq.org/iscroll-4)~~是一个很好的解决方案。

将有问题的触摸设备指向此演示网址：~~[http://lab.cubiq.org/iscroll/examples/simple/](http://lab.cubiq.org/iscroll/examples/simple/)~~

功能包括：

*   捏合/缩放
*   上拉/下拉刷新
*   提高速度和动力
*   捕捉到元素
*   可定制的滚动条

- 通过~~[iScroll 4 文档](http://cubiq.org/iscroll-4)~~

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T01:30:07.480

使用“我的”js插件我也有刷卡事件处理程序：D [http://hoangminhdat.com/myLab/dragScrollJS/](http://hoangminhdat.com/myLab/dragScrollJS/)

它不适用于手持设备，但在台式机上工作得很好，它也很简单

我做到了：D

# jquery - $(element).each() 在幕后发生了什么？

> ID：15511860
> 
> 赞同：0
> 
> 时间：2013-03-19T22:38:08.343
> 
> 标签：jquery, loops

我有一些代码是：

```
$('.someClass').each(function() {
    $(this).on(...);
}); 
```

和

```
$('.someClass').on(...); 
```

第一个和第二个代码片段在幕后发生了什么？我注意到第二个工作得更快，并给出与第一个相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:40:55.823

一方面，在第一个片段中，您为结果中的每个元素创建了一个单独的 jQuery 对象。我猜这与花费的额外时间有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:41:03.467

在一个简单的行中，使用给定的选择器在`.on()`内部运行`.each()`用于事件绑定的函数（作为您的代码`.someClass`）。

见片段`.on()`：

```
 on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
    var type, origFn;

    // Types can be a map of types/handlers
    if ( typeof types === "object" ) {
        // ( types-Object, selector, data )
        if ( typeof selector !== "string" ) {
            // ( types-Object, data )
            data = data || selector;
            selector = undefined;
        }
        for ( type in types ) {
            this.on( type, selector, data, types[ type ], one );
        }
        return this;
    }

    if ( data == null && fn == null ) {
        // ( types, fn )
        fn = selector;
        data = selector = undefined;
    } else if ( fn == null ) {
        if ( typeof selector === "string" ) {
            // ( types, selector, fn )
            fn = data;
            data = undefined;
        } else {
            // ( types, data, fn )
            fn = data;
            data = selector;
            selector = undefined;
        }
    }
    if ( fn === false ) {
        fn = returnFalse;
    } else if ( !fn ) {
        return this;
    }

    if ( one === 1 ) {
        origFn = fn;
        fn = function( event ) {
            // Can use an empty set, since event contains the info
            jQuery().off( event );
            return origFn.apply( this, arguments );
        };
        // Use same guid so caller can remove using origFn
        fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
    }
    return this.each( function() {
        jQuery.event.add( this, types, fn, data, selector );
    });
} 
```

因此，如果您浏览代码的第一个片段，即。通过调用`.on()`inside `.each()`then`.on()`也将`.each()`为该元素本身运行。

# python - 将项目附加到列表列表中的指定列表（Python）

> ID：15511867
> 
> 赞同：5
> 
> 时间：2013-03-19T22:38:46.253
> 
> 标签：python, list, append

目前，我正在通过解决来自项目 euler 的问题来练习我的编程技能，现在我在 Python 上遇到了一些（在我看来）奇怪的行为。

当我做：

```
list = [[1]]*20 
```

正如预期的那样，我得到了一个包含元素 1 的 20 个列表的列表。但是，当我想将 2 附加到此列表中的第三个元素时，我会这样做：

```
list[3].append(2) 
```

但是，这会更改列表中的所有元素。即使我绕道而行，例如：

```
l = list[3]
l.append(2)
list[3] = l 
```

我所有的元素都变了。谁能告诉我如何执行此操作并获得如下输出：

```
[[1], [1], [1], [1, 2], [1] .... [1]] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T22:44:22.240

Python 列表是可变对象，因此当您这样做时，`[[1]]*20`它会创建**一个**列表对象`[1]`，然后将 20 个对它的引用放在顶级列表中。

就可变性问题而言，这与以下相同

```
a = [1,2,3]
b = a
b.append(4)
a # [1,2,3,4] 
```

发生这种情况是因为仅将列表实例的*引用*`b=a`从复制到。他们都指的是同一个实际列表。*`a``b`*

 *为了创建列表列表，就像您在上面尝试的那样，您需要为每个条目创建一个唯一列表。列表推导效果很好：

```
mainlist = [[1] for x in range(20)]
mainlist[0].append(2)
mainlist # [[1,2],[1],[1],...] 
```

**编辑**

顺便说一句，由于类型名称是 Python 中的元类，因此用类型名称命名变量是个坏主意。原因是这可能会在代码中进一步导致几个问题：

```
a = range(3) # [0,1,2]
type(a) # (type 'list')
isinstance(a, list) # True 
```

现在，创建一个名为`list`

```
list = range(3)
list # [0,1,2]
isinstance(list, list)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types 
```

更不用说，现在你不能使用`list()`运算符

```
c = list((1,2,3))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'list' object is not callable 
```*

# java - PrintWriter 默认位置

> ID：15511868
> 
> 赞同：1
> 
> 时间：2013-03-19T22:38:50.803
> 
> 标签：java, macos, printwriter

我正在尝试写入文件。代码运行没有错误，但我无法在任何地方找到该文件。不在执行路径、桌面、主文件夹、根文件夹中。

当然我可以指定绝对路径，但我试图弄清楚相对路径是相对于什么的，因为我见过这样的例子。

```
try {
    PrintWriter out = new PrintWriter ("example.txt");
    out.print("test");
    out.flush();
    out.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:41:56.000

该文件存在于当前应用程序路径中，如`new File("example.txt").getAbsolutePath()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:41:25.960

你检查过 java.io.tmpdir 吗？它可能默认为该位置。它是一个系统属性。

# sass - 找不到或无法读取要导入的文件：指南针

> ID：15511874
> 
> 赞同：46
> 
> 时间：2013-03-19T22:39:08.853
> 
> 标签：sass, compass-sass

我成功安装了 Sass，但在导入 Compass 时遇到问题。

以下是错误详情：

```
*Syntax error: File to import not found or unreadable: compass.
              Load path: H:/HTML/___keoFull/sass
.....
Backtrace:
mainKeo.scss:2
style.scss:2
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/import_node.rb:67:in `rescue in import'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/import_node.rb:45:in `import'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/import_node.rb:28:in `imported_file'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/import_node.rb:37:in `css_import?'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:217:in `visit_import'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:37:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:100:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:227:in `block in visit_import'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:227:in `map'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:227:in `visit_import'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:37:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:100:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:53:in `block in visit_children'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:53:in `map'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:53:in `visit_children'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:109:in `block in visit_children'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:121:in `with_environment'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:108:in `visit_children'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:37:in `block in visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:128:in `visit_root'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/base.rb:37:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:100:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/visitors/perform.rb:7:in `visit'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/tree/root_node.rb:20:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/engine.rb:315:in `_render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/engine.rb:262:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/plugin/compiler.rb:341:in `update_stylesheet'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/plugin/compiler.rb:203:in `block in update_stylesheets'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/plugin/compiler.rb:201:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/plugin/compiler.rb:201:in `update_stylesheets'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/plugin/compiler.rb:235:in `watch'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/plugin.rb:107:in `method_missing'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/exec.rb:444:in `watch_or_update'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/exec.rb:307:in `process_result'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/exec.rb:41:in `parse'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/lib/sass/exec.rb:21:in `parse!'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.6/bin/sass:9:in `<top (required)>'* 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-23T20:10:25.273

Compass 调整导入部分的方式。它允许仅根据名称导入组件，而无需指定路径。

在你可以做之前`@import 'compass';`，你应该：

将 Compass 安装为 Ruby gem：

```
gem install compass 
```

之后，您应该使用 Compass 自己的命令行工具来编译您的 SASS 代码：

```
cd path/to/your/project/
compass compile 
```

请注意，Compass 需要一个名为`config.rb`. 您应该为 Compass 工作创建它。

最小值`config.rb`可以像这样简单：

```
css_dir =   "css"
sass_dir =  "sass" 
```

您的 SASS 代码应位于`sass/`.

`compass create <project-name>`您可以创建一个空的 Compass 项目，然后在其中复制您的 SASS 代码，而不是手动创建配置文件。

请注意，如果您想使用 Compass 扩展，您必须：

1.  要求他们从`config.rb`;
2.  从您的 SASS 文件中导入它们。

更多信息：http: [//compass-style.org/help/](http://compass-style.org/help/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-06T23:10:19.797

我使用 Rails 4.0.2 和[compass-rails 1.1.3看到了这个问题](https://github.com/Compass/compass-rails)

我通过移出我`gem 'compass-rails'`的`:assets`小组来克服这个错误`Gemfile`

它看起来像这样：

```
# stuff
gem 'compass-rails', '~> 1.1.3'
group :assets do
  # more stuff
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-08T22:27:08.803

我卸载了 compass 1.0.1 并安装了 compass 0.12.7，这为我解决了问题

```
$ sudo gem uninstall compass
$ sudo gem install compass -v 0.12.7 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-26T22:06:52.853

如果你像我一样来这里寻找一种让 sass --watch 与 compass 一起工作的方法，答案是使用 Compass 的 watch 版本，简单地说：

```
compass watch 
```

如果您使用的是 Mac 并且尚未安装 gem，那么您在尝试安装 Compass gem 时可能会遇到错误，原因是 OSX 版本高于 10.11 时会出现权限问题。用 Homebrew 安装 ruby​​ 来解决这个问题。请参阅[此答案以了解如何执行此操作。](https://stackoverflow.com/questions/33015875/operation-not-permitted-usr-bin-update-rubygems)

或者你可以只使用 CodeKit，但如果你像我一样固执并且想要使用 Sublime Text 和命令行，那么这就是要走的路。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-14T17:56:39.540

简而言之，如果您安装了 gem，请运行：

```
compass compile 
```

在你的 Rails 根目录中

# css - CSS 图像过渡破坏了内联显示

> ID：15511878
> 
> 赞同：0
> 
> 时间：2013-03-19T22:39:12.497
> 
> 标签：css, image, css-transitions

```
ul, li {
display: inline;
list-style: none;
margin: 0px;
padding: 0px 20px;
}

#footer {
margin: 10px auto 0px auto;
text-align: center;
width: 50%;
clear: both;
}

#footer .social {
margin: 0px auto 0px auto;
padding-top: 60px;
}

#footer img {
border-radius: 5px;
box-shadow: 0 8px 6px -6px black;
align: bottom;
width: 50px;
transition:width 1s;
-moz-transition:width 1s; /* Firefox 4 */
-webkit-transition:width 1s; /* Safari and Chrome */
-o-transition:width 1s; /* Opera */
}

#footer img:hover {
width:60px;
} 
```

* * *

```
 <div id="footer">
    <div class="social">
        <ul>
            <li><a href="http://facebook.com/dwpirat"><img src="facebook_logo.png"></a></li>
            <li><a href="http://twitter.com/#dwpirat"><img src="twitter_logo.png"></a></li>
        </ul>
    </div>
</div> 
```

[http://jsfiddle.net/DvVug/2/](http://jsfiddle.net/DvVug/2/)

为什么图像以错误的方向膨胀导致相邻图像变低？我只是想让它向上扩展。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:41:28.523

只需添加`vertical-align: top`到图像。这将导致它向下而不是向上生长，这似乎是您想要的（您也可以尝试`vertical-align: middle`）。

[http://jsfiddle.net/ExplosionPIlls/DvVug/3/](http://jsfiddle.net/ExplosionPIlls/DvVug/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:49:16.070

[http://jsfiddle.net/DvVug/4/](http://jsfiddle.net/DvVug/4/)

CSS变换比例和变换原点是你要找的

这是你可以解决的最快的解决方案，但没有意义真的希望这有帮助

```
#footer img {
border-radius: 5px;
box-shadow: 0 8px 6px -6px black;
align: bottom;
width: 50px;
transition:all 1s;
-moz-transition:all 1s; /* Firefox 4 */
-webkit-transition:all 1s; /* Safari and Chrome */
-o-transition:all 1s; /* Opera */
transform-origin:50% 100%;
-ms-transform-origin:50% 100%; /* IE 9 */
-webkit-transform-origin:50% 100%; /* Safari and Chrome */
-moz-transform-origin:50% 100%; /* Firefox */
-o-transform-origin:50% 100%; /* Opera */
}

#footer img:hover {
transform: scale(1.2,1.2);
-ms-transform: scale(1.2,1.2); /* IE 9 */
-webkit-transform: scale(1.2,1.2); /* Safari and Chrome */
-o-transform: scale(1.2,1.2); /* Opera */
-moz-transform: scale(1.2,1.2); /* Firefox */
} 
```

# php - 不断收到此通知错误 cms

> ID：15511884
> 
> 赞同：1
> 
> 时间：2013-03-19T22:39:45.977
> 
> 标签：php, html, sql, content-management-system

嗨，我正在制作一个带有响应式 HTML5 前端的 CMS，这部分代码从 url 检索相关信息，以便显示相关信息

这是我收到的通知

**注意：未定义的索引：第 7 行 /home/hj016/public_html/SSTW/index.php 中的 pid**

```
 require_once "script/connect_to_mysql.php";
// Determine which page ID to use in our query below
    if (!$_GET['pid']) {
        $pageid = '1';
    } else {
        $pageid = ereg_replace("[^0-9]", "", $_GET['pid']); 
// filter everything but numbers for security
    } 
```

有什么办法可以隐藏这个？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:41:48.090

在生产服务器上，您通常会隐藏通知。但是检查 using`isset($_GET['pid'])`将是首选方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:41:02.463

尝试

```
if (!isset($_GET['pid'])) { 
```

基本上，即使您试图检查它是否未定义，您也需要一个未定义的索引。执行此操作的安全方法是使用 isset，因为如果未定义它就不会出错，因为您检查的存在不是价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:45:58.987

```
 require_once "script/connect_to_mysql.php";
    // Determine which page ID to use in our query below
    if (!isset($_GET['pid']) || empty($_GET['pid'])) {
        $pageid = '1';
    } else {
        $pageid = ereg_replace("[^0-9]", "", $_GET['pid']); 
    // filter everything but numbers for security
    } 
```

怎么样？将确保它的设置而不是设置为就像 pid=

# javascript - jQuery addClass 的孩子到父母

> ID：15511885
> 
> 赞同：1
> 
> 时间：2013-03-19T22:39:46.267
> 
> 标签：javascript, jquery, html, css

我有[http://jsfiddle.net/ShoeMaker/6EEjs/1/](http://jsfiddle.net/ShoeMaker/6EEjs/1/)，看起来像：

```
<head><style>
    span.mw-uctop {
        font-weight: bold;
    }
    li.mw-uctop {
        font-size: 8px;
        text-decoration: italic;
    }
</style><script>
    $("li").contents("span.mw-uctop").addClass("mw-uctop");
</script></head><body>
    <ul>
        <li class="">Text blurb 1 <span class="mw-uctop">(top)</span> ‎&lt;/li>
        <li class="">Text blurb 2‎&lt;/li>
        <li class="">Text blurb 3 <span class="mw-uctop">(top)</span> ‎&lt;/li>
        <li class="">Text blurb 4</li>
        <li class="">Text blurb 5</li>
        <li class="">Text blurb 6</li>
        <li class="">Text blurb 7 <span class="mw-uctop">(top)</span> ‎&lt;/li>
        <li class="">Text blurb 8 <span class="mw-uctop">(top)</span> ‎&lt;/li>
    </ul>
</body> 
```

我正在寻找的最终结果是我想将类“mw-uctop”添加到所有具有“mw-uctop”类的子元素的“li”元素中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:41:37.123

你可以这样做：

```
$('li > .mw-uctop').parent().addClass('mw-uctop'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:42:28.020

你可以试试这个：

```
$('.mw-uctop').closest('li').addClass('mw-uctop'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T22:44:28.100

如果“孩子”是指“后代”，那么：

```
 $("li:has(.mw-uctop)").addClass('mw-uctop'); 
```

如果您真的是孩子，请尝试：

```
 $("li:has(> .mw-uctop)").addClass('mw-uctop'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T22:43:34.870

试试这个：

```
$('li').has('span.mw-uctop').addClass('mw-uctop'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T22:43:35.510

尝试[**has()**](http://api.jquery.com/has/)：

```
$("li").has("span.mw-uctop").addClass("mw-uctop"); 
```

> 将匹配元素集减少为具有与选择器或 DOM 元素匹配的后代的元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T23:41:30.883

这是一种更纯粹的面向javascript的方法：

```
var query = document.querySelectorAll('li > .mw-uctop');
//there are other workarounds for query selector for older browsers (ie6/7)
for(i=0;i<=query.length;i++){
query[i].parentNode.className+= 'mw-uctop';
// For Testing: document.write(query[i].parentNode.className+"<br>");
} 
```

编辑：哎呀一秒钟编辑：固定

# php - Opencart mysql db 返回受影响的行数

> ID：15511890
> 
> 赞同：1
> 
> 时间：2013-03-19T22:40:13.593
> 
> 标签：php, opencart

如何修改 opencart 类以使其返回[受影响的行数](http://php.net/manual/en/function.mysql-affected-rows.php)？

```
<?php
final class MySQL {
    private $link;

    public function __construct($hostname, $username, $password, $database) {
        if (!$this->link = mysql_connect($hostname, $username, $password)) {
            trigger_error('Error: Could not make a database link using ' . $username . '@' . $hostname);
        }

        if (!mysql_select_db($database, $this->link)) {
            trigger_error('Error: Could not connect to database ' . $database);
        }

        mysql_query("SET NAMES 'utf8'", $this->link);
        mysql_query("SET CHARACTER SET utf8", $this->link);
        mysql_query("SET CHARACTER_SET_CONNECTION=utf8", $this->link);
        mysql_query("SET SQL_MODE = ''", $this->link);
    }

    public function query($sql) {
        if ($this->link) {
            $resource = mysql_query($sql, $this->link);

            if ($resource) {
                if (is_resource($resource)) {
                    $i = 0;

                    $data = array();

                    while ($result = mysql_fetch_assoc($resource)) {
                        $data[$i] = $result;

                        $i++;
                    }

                    mysql_free_result($resource);

                    $query = new stdClass();
                    $query->row = isset($data[0]) ? $data[0] : array();
                    $query->rows = $data;
                    $query->num_rows = $i;

                    unset($data);

                    return $query;  
                } else {
                    return true;
                }
            } else {
                trigger_error('Error: ' . mysql_error($this->link) . '<br />Error No: ' . mysql_errno($this->link) . '<br />' . $sql);
                exit();
            }
        }
    }

    public function escape($value) {
        if ($this->link) {
            return mysql_real_escape_string($value, $this->link);
        }
    }

    public function countAffected() {
        if ($this->link) {
            return mysql_affected_rows($this->link);
        }
    }

    public function getLastId() {
        if ($this->link) {
            return mysql_insert_id($this->link);
        }
    }   

    public function __destruct() {
        if ($this->link) {
            mysql_close($this->link);
        }
    }
}
?> 
```

示例用法：

```
$this->db->query("UPDATE " . DB_PREFIX . "category SET image = '" . $this->db->escape(html_entity_decode($data['image'], ENT_QUOTES, 'UTF-8')) . "' WHERE category_id = '" . (int)$category_id . "'");

$this->db->query("INSERT INTO " . DB_PREFIX . "category_description SET category_id = '" . (int)$category_id . "', language_id = '" . (int)$language_id . "', name = '" . $this->db->escape($value['name']) . "', meta_keyword = '" . $this->db->escape($value['meta_keyword']) . "', meta_description = '" . $this->db->escape($value['meta_description']) . "', description = '" . $this->db->escape($value['description']) . "'");

$this->db->query("SELECT * FROM `" . DB_PREFIX . "category_path` WHERE category_id = '" . (int)$data['parent_id'] . "' ORDER BY `level` ASC"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:04:49.557

它已经实施了。看一下上面的类代码。它有 countAffected 方法，所以你在查询之后使用它

```
$this->db->countAffected() 
```

返回受影响的行数

# validation - 复选框的访问验证

> ID：15511891
> 
> 赞同：1
> 
> 时间：2013-03-19T22:40:17.410
> 
> 标签：validation, ms-access

我有一个访问数据库，在其中一个表中我有两个带有是/否框的字段（设置为 True/False）。

used 不需要检查任何一个，但如果 [BoxA] 为真，则 [BoxB] 必须为假。我尝试使用 Xor 进行此验证，但其中一个必须是 checke。

我使用的是 Access 2010，但数据库的格式为 2002-2003 (mdb)，以保持与其他应用程序的兼容性。

有人能指出我正确的方向来完成这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:11:34.587

从表设计视图中，在表的属性表中设置验证规则。

![表验证规则](../Images/d2e0a7f863da9c4b2a5019862b7588c7.png)

为清楚起见，这是该图像的属性：

```
([BoxA] = False And [BoxB] = False) Or ([BoxA] = Not [BoxB]) 
```

db 引擎将强制要求这两个字段中只有一个可以`True`（选中），或者两者都可以`False`（未选中）。

# emacs - 有什么方法可以扩展组织模式标签以包含“-”之类的字符？

> ID：15511892
> 
> 赞同：5
> 
> 时间：2013-03-19T22:40:18.010
> 
> 标签：emacs, tags, org-mode

简要：组织模式标签中允许的字符可以以任何方式扩展吗？

例如，包括 -、破折号？

细节：

我懂了

> [http://orgmode.org/org.html#Tags](http://orgmode.org/org.html#Tags)
> 
> 标签是包含字母、数字、“_”和“@”的普通单词。标签前后必须有一个冒号，例如':work:'。

我有点惊讶这是不可扩展的。是吗，我错过了？

TODO 关键字可以包含破折号。有时，我想将 TODO 视为与标签互不相容的 - 例如将 TODO 移动到标签，反之亦然 - 但这种语法差异阻碍了。

在我开始编码之前，有谁知道为什么不允许使用破折号？我猜想与时间戳混淆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T18:34:30.607

不确定，但可能是因为某些议程搜索字符串使用“-”作为运算符，并且还没有一种方法可以逃避使用“-”的那些。

我已经为 todo kw 的属性和空格使用了连字符，这对我的目的没有任何问题，但我没有在搜索中尝试过它们。

新的导出器将包含在 8.0 中，并附带详细的语法描述。如果您想提交功能请求以允许使用连字符，也许通过允许在搜索字符串中转义，现在是时候这样做了。

# c# - 无法恢复SQL数据库，无法获得独占访问（单用户模式）

> ID：15511895
> 
> 赞同：3
> 
> 时间：2013-03-19T22:40:43.547
> 
> 标签：c#, sql-server-2008

我正在为应用程序编写一个简单的数据库备份和恢复例程。我可以毫无问题地备份我的数据库，但是当我恢复时，我无法获得对我的数据库的独占访问权限。

我正在尝试对 SO 进行所有修复组合，将其置于单用户模式，使其脱机，然后仅将其放回去，但没有成功。我可以在 studio manager (express) 中成功恢复数据库

这个方法是当时唯一连接到SQL server的，所以我不明白为什么不能执行restore。

感谢您指出问题所在的帮助。

```
internal void RestoreDatabase(string databaseFile)
        {
            //get database details
            var databaseConfiguration = new DatabaseConfiguration().GetDatabaseConfiguration();

            try
            {
                //construct server connection string
                var connection = databaseConfiguration.IsSqlAuthentication
                                     ? new ServerConnection(databaseConfiguration.ServerInstance,
                                                            databaseConfiguration.SqlUsername,
                                                            databaseConfiguration.SqlPassword)
                                     : new ServerConnection(databaseConfiguration.ServerInstance);

                //set database to single user and kick everyone off
                using (
                    var sqlconnection =
                        new SqlConnection(new DatabaseConfiguration().MakeConnectionString(databaseConfiguration)))
                {
                    sqlconnection.Open();
                    using (
                        var sqlcommand = new SqlCommand("ALTER DATABASE " + databaseConfiguration.DatabaseName + " SET Single_User WITH Rollback IMMEDIATE",
                                                        sqlconnection))
                    {                       
                        sqlcommand.ExecuteNonQuery();                        
                    }
                    using (
                        var sqlcommand = new SqlCommand("ALTER DATABASE " + databaseConfiguration.DatabaseName + " SET OFFLINE",
                                                        sqlconnection))
                    {
                        sqlcommand.ExecuteNonQuery();
                    }
                    using (
                        var sqlcommand = new SqlCommand("ALTER DATABASE  " + databaseConfiguration.DatabaseName + "  SET ONLINE",
                                                        sqlconnection))
                    {
                        sqlcommand.ExecuteNonQuery();
                    }
                    sqlconnection.Close();
                }

                //setup server connection and restore
                var server = new Server(connection);
                var restore = new Restore();
                restore.Database = databaseConfiguration.DatabaseName;
                restore.Action = RestoreActionType.Database;
                restore.Devices.AddDevice(databaseFile, DeviceType.File);
                restore.ReplaceDatabase = true;
                restore.Complete += Restore_Complete;
                restore.SqlRestore(server);
            }
            catch (Exception ex)
            {
                //my bad
                restoreDatabaseServerError(ex.InnerException.Message, EventArgs.Empty);
            }
            finally
            {
                //set database to multi user
                using (
                    var sqlconnection =
                        new SqlConnection(new DatabaseConfiguration().MakeConnectionString(databaseConfiguration)))
                {
                    sqlconnection.Open();
                    using (
                        var sqlcommand = new SqlCommand("ALTER DATABASE " + databaseConfiguration.DatabaseName + " SET Multi_User",
                                                        sqlconnection))
                    {
                        sqlcommand.ExecuteNonQuery();
                        sqlcommand.Dispose();
                    }
                    sqlconnection.Close();
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:04:10.693

如果有人连接到您的数据库，SQL Server 无法删除它，因此您必须断开现有连接，就像您尝试过的那样。single_user 的问题是，它仍然允许单个用户连接。由于您自己在删除数据库时无法连接到数据库，因此您必须离开那里。这会打开该插槽供其他人连接，从而防止您丢弃它。

有一些 SQL Server 进程特别擅长在那一瞬间连接到数据库。复制就是一个例子。（无论如何，您都不应该真正删除已发布的数据库，蝙蝠那是另一回事。）

那么我们能做些什么呢？唯一 100% 安全的方法是阻止用户连接到数据库。唯一实用的方法是将数据库切换到脱机状态，然后将其删除。但是，这有一个令人讨厌的副作用，即 SQL Server 不会删除该数据库的文件，因此您必须手动执行此操作。

另一种选择是足够快。在您的示例中，您在删除数据库之前将其重新联机。这是一个相当耗费资源的过程，它给了“入侵者”很多时间来连接。

我一直在成功使用的解决方案如下所示：

```
ALTER DATABASE MyDb SET RESTRICTED_USER WITH ROLLBACK IMMEDIATE;
USE MyDb;
ALTER DATABASE MyDb SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
USE tempdb;
DROP DATABASE MyDb; 
```

这首先将数据库设置为受限用户并连接到它。然后，虽然仍然连接，但它将数据库设置为单个用户。之后，上下文切换到 tempdb，然后立即执行 drop。这里重要的是，将这些命令作为一批发送到 SQL Server，以最大限度地`USE tempdb;`减少`DROP`. 在开始时将数据库设置为受限用户会遇到一些罕见的边缘情况，因此即使乍一看没有意义，也要保留它。

虽然这仍然给其他人留下了理论上的空白，但我从未见过它失败。

删除数据库后，您可以正常运行还原。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:03:50.450

您的恢复需要在您将数据库服务器设置为单用户模式的同一连接上进行。

总结以下更改，我将 using 的结尾移至还原代码下方，并将 SQL 连接的关闭移至还原后，以便它使用相同的连接。还删除了离线和在线设置，因为它们不需要。目前无法测试，所以让我知道它是否有效。

```
 //set database to single user and kick everyone off
  using (var sqlconnection = new SqlConnection(new DatabaseConfiguration().MakeConnectionString(databaseConfiguration)))
  {
    sqlconnection.Open();
    using (var sqlcommand = new SqlCommand("ALTER DATABASE " + databaseConfiguration.DatabaseName + " SET Single_User WITH Rollback IMMEDIATE",sqlconnection))
    {
        sqlcommand.ExecuteNonQuery();                        
    }
    //setup server connection and restore
    var server = new Server(sqlconnection);
    var restore = new Restore();
    restore.Database = databaseConfiguration.DatabaseName;
    restore.Action = RestoreActionType.Database;
    restore.Devices.AddDevice(databaseFile, DeviceType.File);
    restore.ReplaceDatabase = true;
    restore.Complete += Restore_Complete;
    restore.SqlRestore(server);
    sqlconnection.Close();
  } 
```

# php - 从 WAMP 服务器更改为 LAMP 服务器后，文件下载脚本不起作用。

> ID：15511896
> 
> 赞同：3
> 
> 时间：2013-03-19T22:40:45.163
> 
> 标签：php, download, lamp

我将我的应用程序从 WAMP 服务器（PHP 版本 <= 5.2，Windows XP）移动到 LAMP 服务器（PHP > 5.3，Ubuntu 12.04 LTS），我现在遇到的问题是我的下载功能在屏幕上输出文件并且它不会强制浏览器执行下载。

任何人都可以指出我正确的方向吗？

这是代码：

```
function download()
{

$fullPath = $_POST['fisier'];

if($fullPath=="NULL")
{
 echo "Wrong path!";
}
else
{

$fd = fopen ($fullPath, "r");

if ($fd) {
    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);    

    switch ($ext) {
        case "pdf":
            header("Content-type: application/pdf"); 
            break;

        case "tiff":
            header("Content-type: image/tiff");

            break;

        case "tif":
            header("Content-type: image/tiff" );
            break;

        default:    
             header("Content-type: application/force-download");
            break;
    }
    header("Content-Description: File Transfer"); 
    header('Content-Disposition:  attachment; filename="'.$path_parts["basename"].'"');
    header("Content-length: ".$fsize);
    header("Cache-control: private"); //use this to open files directly

    ob_clean();
    flush(); 
    while(!feof($fd)) {
        $buffer = fread($fd, 2048);
        echo $buffer;
    }

}

fclose ($fd);
exit;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:45:31.290

您可以`Content-Disposition`按照[PHP 文档](http://php.net/manual/en/function.header.php)使用标题：

> 如果您希望提示用户保存您发送的数据，例如生成的 PDF 文件，您可以使用 » Content-Disposition 标头提供推荐的文件名并强制浏览器显示保存对话框。

```
// It will be called downloaded.pdf
header('Content-Disposition: attachment; filename="downloaded.pdf"'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:43:35.860

尝试使用`header("Content-type: application/octet-stream");`而不是`header("Content-type: application/force-download");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:45:18.050

> 对于接收“应用程序/八位字节流”实体的实现，推荐的操作是简单地将数据放入文件中

从[这里](http://www.rfc-editor.org/rfc/rfc2046.txt)。看起来你`application/force-download`是非标准的。

# jpa-2.0 - 不能使@ManyToOne 关系可以为空

> ID：15511899
> 
> 赞同：23
> 
> 时间：2013-03-19T22:40:52.870
> 
> 标签：jpa-2.0, jboss7.x, nullable, postgresql-9.1, many-to-one

我有一个多对一的关系，我希望它可以为空：

```
@ManyToOne(optional = true)
@JoinColumn(name = "customer_id", nullable = true)
private Customer customer; 
```

不幸的是，JPA 一直将我数据库中的列设置为 NOT NULL。谁能解释一下？有没有办法让它工作？请注意，我使用 JBoss 7、JPA 2.0 和 Hibernate 作为持久性提供程序和 PostgreSQL 9.1 数据库。

**编辑**：

我找到了我的问题的原因。显然这是由于我在引用实体中定义主键的方式`Customer`：

```
@Entity
@Table
public class Customer { 
    @Id
    @GeneratedValue
    @Column(columnDefinition="serial")
    private int id;
} 
```

似乎使用`@Column(columnDefinition="serial")`主键会自动设置`NOT NULL`在数据库中引用它的外键。将列类型指定为时，这真的是预期的行为`serial`吗？在这种情况下，是否有启用可空外键的解决方法？

先感谢您。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-24T00:59:50.003

I found the solution to my problem. The way the primary key is defined in entity `Customer` is fine, the problem resides in the foreign key declaration. It should be declared like this:

```
@ManyToOne
@JoinColumn(columnDefinition="integer", name="customer_id")
private Customer customer; 
```

Indeed, if the attribute `columnDefinition="integer"` is omitted the foreign key will by default be set as the source column: a not-null serial with its own sequence. That is of course not what we want as we just want the to reference the auto-incremented ID, not to create a new one.

Besides, it seems that the attribute `name=customer_id` is also required as I observed when performing some testing. Otherwise the foreign key column will still be set as the source column. This is a strange behavior in my opinion. Comments or additional information to clarify this are welcome!

Finally, the advantage of this solution is that the ID is generated by the database (not by JPA) and thus we do not have to worry about it when inserting data manually or through scripts which often happens in data migration or maintenance.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-23T14:48:27.437

我遇到了这个问题，但我能够通过这种方式解决它：

```
@ManyToOne
@JoinColumn(nullable = true)
private Customer customer; 
```

也许问题是从声明中出现的`@ManyToOne(optional = true)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:53:15.240

这很奇怪。

在 JPA 中，可空参数默认为 true。我一直使用这种配置，而且效果很好。如果您尝试保存实体，它应该是成功的。

您是否尝试删除为此关系创建的表？也许您有该列的旧表？

或者，也许您应该尝试在其他代码块上找到解决方案，因为这是正确的配置。

注意：我已经在带有 JPA2 和 Hibernate 的 PostgreSQL 上尝试过这个配置。

**编辑**

在那种情况下，也许你可以尝试一些不同的主键定义。

例如，您可以使用如下定义：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column()
private Long id; 
```

postgresql 将生成

```
id bigint NOT NULL
-- with constraint
CONSTRAINT some_table_pkey PRIMARY KEY (id) 
```

如果这足够好，您可以尝试此解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-09T12:34:20.417

在事务内但在保存操作之前，将外键列值显式设置为空。通过这个休眠，永远不要对此外键相关表执行选择查询，并且不要抛出异常“在刷新之前保存瞬态实例”。如果您想有条件地设置“空值”，则执行 1\. 使用 repo call get/find 获取并设置值 2\. 然后检查条件的获取值并将其设置为 null 。粘贴下面的代码进行测试并找到工作

```
// 交易开始

   可选<客户> customerObject = customerRepository.findByCustomerId(customer.getCustomerId())

   if(customerObject.isPresent())yourEnclosureEntityObject.setCustomer(customerObject)}

   否则 {yourEnclosureEntityObject.setCustomer(null)}

   yourEnclosureEntityObjectRepository.save(yourEnclosureEntityObject)

// 交易结束
```

# extjs4 - 如何从 Extjs 中的网格单元中获取父行索引？

> ID：15511900
> 
> 赞同：0
> 
> 时间：2013-03-19T22:40:53.287
> 
> 标签：extjs4

我在 GridPanel 中有一个 CheckColumn，如果已选中该行上的复选框，我想禁用该行的可编辑单元格。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:55:03.117

最简单的方法是在编辑器上监听 beforeedit 事件。就像是：

```
cellEditing.on('beforeedit', function(ed, context) {
    return !context.record.get('checkField');
}); 
```

# python - 当只有一个键值不同时，从字典列表中删除重复项

> ID：15511903
> 
> 赞同：2
> 
> 时间：2013-03-19T22:41:01.837
> 
> 标签：python

我已经看到了一些类似的答案，但是我找不到针对这种情况的特定内容：

我有一个这样的字典列表：

```
[
 {"element":Bla, "version":2, "date":"12/04/12"},
 {"element":Bla, "version":2, "date":"12/05/12"},
 {"element":Bla, "version":3, "date":"12/04/12"}
] 
```

实际的字典有许多其他键，但我想要做的是删除所有具有完全相同键对值的条目，日期除外。也就是说，删除所有重复项（这些重复项并不是真正的重复项，因为只有日期不同）。在这种情况下，我期望得到的是：

```
[
 {"element":Bla, "version":2, "date":"12/04/12"},
 {"element":Bla, "version":3, "date":"12/04/12"}
] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T22:56:26.583

您说问题中未提及的字典中有很多其他键。

这是`O(n)`执行您需要的算法：

```
>>> seen = set()
>>> result = []
>>> for d in dicts:
...     h = d.copy()
...     h.pop('date')
...     h = tuple(h.items())
...     if h not in seen:
...         result.append(d)
...         seen.add(h)

>>> pprint(result)
[{'date': '12/04/12', 'element': 'Bla', 'version': 2},
 {'date': '12/04/12', 'element': 'Bla', 'version': 3}] 
```

`h`是字典的副本。`date`键从其中删除`pop`。

然后`tuple`被创建为可以添加到的可散列类型`set`。

如果`h`以前从未见过，我们将其附加到`result`并添加到`seen`. `seen`对is`O(1)`和查找 ( `h not in seen`)的补充。

最后，仅包含定义值`result`方面的唯一元素。`h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T22:50:32.567

你可以使用 " `unique_everseen`" [recipe](http://docs.python.org/2/library/itertools.html#recipes) from[`itertools`](http://docs.python.org/2/library/itertools.html)创建一个新的`list`.

```
list(unique_everseen(original_list, key=lambda e: '{element}@{version}'.format(**e))) 
```

如果您的“键”需要比`lambda`我写的更宽（以容纳更多值），那么可能值得提取到函数中：

```
def key_without_date(element):
    return '@'.join(["{}".format(v) for k,v in element.iteritems() if k != 'date'])

list(unique_everseen(original_list, key=key_without_date)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:56:16.227

Pandas 可以快速解决这个问题：

```
import pandas as pd
Bla = "Bla"
d = [
{"element":Bla, "version":2, "date":"12/04/12"},
{"element":Bla, "version":2, "date":"12/05/12"},
{"element":Bla, "version":3, "date":"12/04/12"}
]
df = pd.DataFrame(d)
df[~df.drop("date", axis=1).duplicated()] 
```

输出：

```
 date element  version
0  12/04/12     Bla        2
2  12/04/12     Bla        3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T22:50:17.547

Apologies for terrible variable names. There is probably a cleaner way but this should work

```
seen = {(item["element"], item["version"]): False for item in mylist}

output = []
for item in mylist:
    item_key = (item["element"], item["version"])
    if not seen[item_key]:
        output.append(item)
        seen[item_key] = True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T23:13:32.470

这有效：

```
LoD=[
{"element":'Bla', "version":2, 'list':[1,2,3], "date":"12/04/12"},
{"element":'Bla', "version":2, 'list':[1,2,3], "date":"12/05/12"},
{"element":'Bla', "version":3, 'list':[1,2,3], "date":"12/04/12"}
]

LoDcopy=[]
seen=set()

for d in LoD:
    dc=d.copy()
    del dc['date']
    s=dc.__str__()
    if s in seen: continue
    seen.add(s)
    LoDcopy.append(d)    

print LoDcopy 
```

印刷：

```
[{'date': '12/04/12', 'version': 2, 'list': [1, 2, 3], 'element': 'Bla'}, 
 {'date': '12/04/12', 'version': 3, 'list': [1, 2, 3], 'element': 'Bla'}] 
```

# c++ - alignas 说明符是否与“新”一起使用？

> ID：15511909
> 
> 赞同：17
> 
> 时间：2013-03-19T22:41:17.263
> 
> 标签：c++, c++11, new-operator, memory-alignment

我的问题很简单；

alignas 说明符是否与“新”一起使用？也就是说，如果一个struct被定义为对齐的，那么分配new时是否会对齐？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T23:03:57.037

在 C++17 之前，如果您的类型的对齐方式没有过度对齐，那么是的，默认值`new`将起作用。“过度对齐”表示您在 中指定的对齐方式`alignas`大于`alignof(std::max_align_t)`。默认值`new`将或多或少地与非过度对齐的类型一起使用；默认内存分配器将始终分配对齐等于`alignof(std::max_align_t)`.

但是，如果您的类型的对齐方式过度对齐，那么您就不走运了。default 和您编写的`new`任何全局`new`运算符都无法知道类型所需的对齐方式，更不用说分配适合它的内存了。帮助这种情况的唯一方法是重载类的`operator new`，这将能够查询类与 的对齐`alignof`。

当然，如果该类被用作另一个类的成员，这将没有用。除非其他类也重载`operator new`。所以简单的事情是`new pair<over_aligned, int>()`行不通的。

C++17[添加了许多内存分配器](https://en.cppreference.com/w/cpp/memory/new/operator_new)，这些分配器被赋予了正在使用的类型的对齐方式。这些分配器专门用于过度对齐的类型（或者更具体地说，[新扩展的过度对齐类型](https://stackoverflow.com/a/56171758/734069)）。所以`new pair<over_aligned, int>()`将在 C++17 中工作。

当然，这只适用于分配器处理过度对齐的类型。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-13T23:34:19.010

不，不是的。该结构将被填充到请求的对齐位置，但不会对齐。然而，这有可能[在 C++17 中被允许](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0035r2.html)（这个 C++17 提案存在的事实应该很好地证明这在 C++11 中是行不通的）。

我已经看到这似乎适用于一些内存分配器，但这纯粹是运气。例如，一些内存分配器会将其内存分配与请求大小的 2 次方（最大 4KB）对齐，作为分配器的优化（减少内存碎片，可能更容易重用以前释放的内存等...） . 但是，我测试的 OS X 10.7 和 CentOS 6 系统中包含的 new/malloc 实现并没有这样做，并且失败并显示以下代码：

```
#include <stdlib.h>
#include <assert.h>

struct alignas(8)   test_struct_8   { char data; };
struct alignas(16)  test_struct_16  { char data; };
struct alignas(32)  test_struct_32  { char data; };
struct alignas(64)  test_struct_64  { char data; };
struct alignas(128) test_struct_128 { char data; };
struct alignas(256) test_struct_256 { char data; };
struct alignas(512) test_struct_512 { char data; };

int main() {
   test_struct_8   *heap_8   = new test_struct_8;
   test_struct_16  *heap_16  = new test_struct_16;
   test_struct_32  *heap_32  = new test_struct_32;
   test_struct_64  *heap_64  = new test_struct_64;
   test_struct_128 *heap_128 = new test_struct_128;
   test_struct_256 *heap_256 = new test_struct_256;
   test_struct_512 *heap_512 = new test_struct_512;

#define IS_ALIGNED(addr,size)   ((((size_t)(addr)) % (size)) == 0)

   assert(IS_ALIGNED(heap_8, 8));
   assert(IS_ALIGNED(heap_16, 16));
   assert(IS_ALIGNED(heap_32, 32));
   assert(IS_ALIGNED(heap_64, 64));
   assert(IS_ALIGNED(heap_128, 128));
   assert(IS_ALIGNED(heap_256, 256));
   assert(IS_ALIGNED(heap_512, 512));

   delete heap_8;
   delete heap_16;
   delete heap_32;
   delete heap_64;
   delete heap_128;
   delete heap_256;
   delete heap_512;

return 0;
} 
```

# php - jQuery/PHP 从 $_SESSION 变量中选择复选框

> ID：15511912
> 
> 赞同：1
> 
> 时间：2013-03-19T22:41:24.110
> 
> 标签：php, jquery

我不确定我这样做是否完全错误，但我希望我正在尝试做的事情是可能的。

我有一个现有的 ajax jquery 函数，它保存用户的“选定”复选框并将它们存储在 $_SESSION['order_items'][index]['cheeseids'][]; 当用户去回忆这个“项目”时，我希望像以前一样“选中”相同的复选框。请参见下面的示例：

```
[order_items] => Array
    (
        [1] => Array
            (
                [cheeseids] => Array
                    (
                        [0] => 1
                        [1] => 2
                        [2] => 4
                    ) 
```

我的“更改/恢复”jquery 函数使用以下变量来获取索引号：

```
var productIDValSplitter   = (this.id).split("_");
var productIDVal       = productIDValSplitter[1]; 
```

我试图用来“重新选择”框 1、2、4（来自 cheeseids 数组）的函数不起作用（它在我的 jQuery 函数中）。它实际上导致整个 jQuery 代码不起作用：

```
<?php
foreach($_SESSION['order_items'] as $key => $value)
{
?>

var idnum = <?php echo $value['<script type="text/javascript">productIDVal</script>']['cheeseids']  ?>;
$("div.cheesebox input[type=checkbox]").eq(" + idnum + ").attr("checked", "checked");

<?php
}
?> 
```

JS输出：

```
var idnum = ;
$("div.cheesebox input[type=checkbox]").eq(" + idnum + ").attr("checked", "checked");

var idnum = ;
$("div.cheesebox input[type=checkbox]").eq(" + idnum + ").attr("checked", "checked"); 
```

我也在添加 PHP 的整个 JS/jQuery 函数：

```
$("#basketItemsWrap li img.change").live("click", function(event) {
        var productIDValSplitter   = (this.id).split("_");
        var productIDVal       = productIDValSplitter[1];  
        $("#notificationsLoader").show();
        $.ajax({  
        type: "POST",  
        url: "includes/ajax/functions.php",
        data: { productID: productIDVal, action: "deleteFromBasket"},  
        success: function(theResponse) {
          $("div#order_qty input").attr('value', $("#order_" + productIDVal + " #order_qty").text());
          $("div#order_listprice input#price1").attr('value', $("#order_" + productIDVal + " #order_listprice").text().replace("$", ""));
          $("div#order_price input#discprice1").attr('value', $("#order_" + productIDVal + " #order_price").text().replace("$", ""));
          $("div#order_price input#itemprice1").attr('value', $("#order_" + productIDVal + " #order_itemprice").text().replace("$", ""));

          //The following functions restore the order details in the select menus, checkboxes, and radio buttons
          //Restores the item selected
          for(var i = 0; i < $("#item1 option").size(); i++)
          {
            if($("#order_" + productIDVal + " #order_item").text() == $("#item1 option:eq("+i+")").text())
            {
              $("#item1 option:eq("+i+")").attr("selected", "selected");
              //$("#item1").val(i);
              CalcPrice(1);
            }
          }

          //Restores the promotion selected
          for(var i = 0; i < $("#promo1 option").size(); i++)
          {
            if($("#order_" + productIDVal + " #order_promo").text() == $("#promo1 option:eq("+i+")").text())
            {
              $("#promo1 option:eq("+i+")").attr("selected", "selected");
              //$("#promo1").val(i);
              CalcPromo(1);
            }
          }

            <?php foreach($_SESSION['order_items'][1]['cheeseids'] as $id): ?>
             $("div.cheesebox input[type=checkbox]#<?php echo $id;?>").attr("checked", "checked");
          <?php endforeach; ?>
          //Restores the cheese options selected

          // $('div.cheesebox input[type=checkbox]').size(); i++)

          //$('div.cheesebox input[type=checkbox]').eq(1).attr('checked', 'checked');

          $("#order_" + productIDVal).hide("slow",  function() {$(this).remove();Calc();});
          $("#notificationsLoader").hide();
        }  
        }); 
      }); 
```

生成复选框的 PHP/HTML 代码：

```
<?php
        //Display all "cheese" options in a checkbox group
          foreach($_SESSION['ingr_cheese'] as $key => $value)
          {
              echo "<div class=\"cheesebox\" style=\"float:left; width:175px; margin-bottom:7px;\">";
              echo "<input type=\"checkbox\" name=\"cheese1\" id=\"cheese1\" class=\"cheeseCheck\" value=\"".$key."\">&nbsp;<label for=\"cheese1\">".$value['cheese']."</label></br>";
              echo "</div>";
          }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:02:44.633

如果您列出的数组已经是数组中内容的准确表示`$_SESSION`，那么此代码应该可以满足您的需求。

```
<?php foreach($_SESSION['order_items'][1]['cheeseids'] as $id): ?>
    $("div.cheesebox input[type=checkbox]#<?php echo $id;?>").attr("checked", "checked");
<?php endfor; ?> 
```

这应该生成如下所示的 javascript：

```
 $("div.cheesebox input[type=checkbox]#1").attr("checked", "checked");
    $("div.cheesebox input[type=checkbox]#2").attr("checked", "checked");
    $("div.cheesebox input[type=checkbox]#4").attr("checked", "checked"); 
```

此代码假定您的复选框标记看起来（有点）像这样：

```
<div class=".cheesebox">
    <input type="checkbox" id="1">
    <input type="checkbox" id="2">
    <input type="checkbox" id="3">
    <input type="checkbox" id="4">
</div> 
```

我验证了选择器语法，但如果这不起作用，那么我可能对复选框的标记做出了错误的假设。如果这还不足以为您指明正确的方向，请粘贴更多的 html，我将再试一次。

# meteor - 在模板反应上下文中，如何从集合中检索抛出的错误？

> ID：15511917
> 
> 赞同：0
> 
> 时间：2013-03-19T22:41:32.450
> 
> 标签：meteor

我有以下代码：

```
GetPublication = new Meteor.Collection 'get-publication'

Meteor.autorun ->
  Meteor.subscribe 'get-publication', Session.get 'currentPublicationId', {
    onReady: console.log "ready"
    onError: (error) -> console.error "error", error
  }

Template.publication.publication = ->
  # How to know here what was an error thrown in subscription?
  JSON.stringify GetPublication.findOne() 
```

我有一个自定义集合：

```
Meteor.publish 'get-publication', (publicationId) ->
  self = this
  self.ready()
  self.error new Meteor.Error 500, "Test" 
```

我想在模板中输出带有订阅中抛出的内容的消息，而不是（空）发布集合结果。

此外，为什么不调用`onReady`和处理程序？`onError`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:06:14.430

您正在分配`console.log("ready")`to的结果`onReady`。正确的语法是：

```
onReady: -> console.log "ready" 
```

如果你想打印你给出的错误，我想你想将从错误回调中获得的内容存储在一个变量（例如`Session`）中，然后在模板中打印它。像这样的东西：

```
Meteor.autorun ->
  Meteor.subscribe 'get-publication', Session.get 'currentPublicationId', {
    onReady: -> console.log "ready"
    onError: (error) -> Session.set "get-publication-error", error
  }

Template.publication.publicationError = ->
  JSON.stringify(Session.get "get-publication-error") 
```

# android - 如何在 Android 应用程序中添加自定义 .png 文件作为 Google 地图的标记

> ID：15511924
> 
> 赞同：0
> 
> 时间：2013-03-19T22:41:58.920
> 
> 标签：android, google-maps, google-maps-markers

我有一个使用 Google 地图显示 Android 应用程序地图的活动，我想用我创建的名为fillingstation.png 的 ping 图像替换我当前使用的黄色标记。由于我对 Android 应用程序开发还很陌生，我将如何去做。

MapViewActivity.java

```
 private void showFuelStops(String location) throws IOException{
       Geocoder geocoder = new Geocoder(this, Locale.getDefault());  
       List<Address> addresses;

       addresses = geocoder.getFromLocationName(location, 1);
       if(addresses.size() > 0) {
          BitmapDescriptor subwayBitmapDescriptor = BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_YELLOW);
          double latitude= addresses.get(0).getLatitude();
          double longitude= addresses.get(0).getLongitude();
          LatLng subLoc = new LatLng(latitude, longitude);
          Marker fuelMarker = map.addMarker(new MarkerOptions().position(subLoc).icon(subwayBitmapDescriptor).title("Subway, " + location));

       }        
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T22:54:08.313

如果 PNG 文件是资源（即，它适用于`res/drawable-NNNN/`各种密度），请使用`fromResource()`而不是`defaultMarker()`on `BitmapDescriptorFactory`。

如果 PNG 文件是资产（即，它`assets/`在您的项目中），请使用`fromAsset()`.

如果 PNG 文件是设备内部存储中的文件，请使用`fromFile()`.

# java - 登录后的 URL 映射

> ID：15511926
> 
> 赞同：0
> 
> 时间：2013-03-19T22:42:04.243
> 
> 标签：java, jsp, servlets

我有一个带有 URL 映射“/Login”的登录 servlet，它管理用户输入和登录过程。但是，当用户登录时，网站会被定向到 URL：

```
http://localhost:8080/pilot_1/Login 
```

代替

```
http://localhost:8080/pilot_1/checklistallitem 
```

值得一提的是，第一个 URL 工作正常，它显示了所有数据，但我不确定为什么 URL 没有按预期显示。这是我的登录 Servlet 的 doPost 方法。

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

    String username = req.getParameter("j_username");
    String password = req.getParameter("j_password");

    if (users.containsKey(username)){
        if ( users.get(username).equals(password)){
            req.getSession().setAttribute("active_window", "Checklist");
            req.getSession().setAttribute("current_team", "allteams");

            getServletContext().getRequestDispatcher("/checklistallteam").forward(req, resp);

        }else{
            JOptionPane.showMessageDialog(null, "Invalid ID or Password");
        }
    }else{
        JOptionPane.showMessageDialog(null, "Invalid ID or Password");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:49:43.997

这是重定向和转发之间的区别。当您使用调度程序转发请求时，解析和处理发生在服务器端，然后将最终响应返回给调用客户端。另一方面，当您发出重定向时，对客户端的中间响应基本上会告诉它 - '调用另一个 URL 来完成请求'。作为副作用，客户端将知道新资源的 URL，并将更新位置栏以反映它。

因为转发完全在服务器端处理，所以客户端位置栏中的 URL 不会改变。

# php - 如何将 Perl 数组转换为 PHP 数组？

> ID：15511927
> 
> 赞同：0
> 
> 时间：2013-03-19T22:42:13.290
> 
> 标签：php, perl

请帮我将此 Perl 数组转换为 PHP 数组：

```
{
'method' => 'sip_endpoint.save',
'parameters' => {
     'transport' => [
                     'UDP'     <-------especially this one
                    ],
      'object_type' => 'sip_endpoint',
      'nat' => 'yes'
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:38:15.860

通过简单的替换 .. 这可以转换为有效`json`

```
$json = "{
'method' => 'sip_endpoint.save',
'parameters' => {
     'transport' => [
                     'UDP' 
                    ],
      'object_type' => 'sip_endpoint',
      'nat' => 'yes'
   }
}";

$json = str_replace(array("'","=>"), array('"',":"), $json);
$array = json_decode($json,true);
print($array['parameters']['transport'][0]);  //what you want 
```

输出

```
UDP 
```

# python - 向支持的拖动操作添加操作：PyQt

> ID：15511933
> 
> 赞同：1
> 
> 时间：2013-03-19T22:42:35.053
> 
> 标签：python, pyqt4

我是 python 新手，我想这样做：

```
drag.start(QtCore.QEvent.MouseButtonPress) 
```

但是拖动操作不支持此操作。可以将新动作添加到：支持的拖动动作？

提前致谢！

# php - 关联数组中的左连接

> ID：15511936
> 
> 赞同：0
> 
> 时间：2013-03-19T22:42:39.880
> 
> 标签：php, mysql

我正在尝试制作一个图片库。里面有带有图像的专辑，在索引页面上我想显示女巫专辑，当你点击它时，你会去那个专辑。我可以显示专辑名称，但我想显示这些专辑以及该专辑中的图像，并具有随机功能。我希望你明白我想做什么。问题是我无法访问图像。

我有两个关联数组，一个用于相册，一个用于图像。专辑的那个看起来像这样；

```
function get_albums() {
$albums = array();

$albums_query = mysql_query("
SELECT `albums`.`album_id`, `albums`.`timestamp`, `albums`.`name`,     
LEFT(`albums`.`description`, 50) as `description`, COUNT(`images`.`image_id`) as `image_count`
FROM `albums`
LEFT JOIN `images`
ON `albums`.`album_id` = `images`.`album_id`
GROUP BY `albums`.`album_id`
")or die(mysql_error());

while ($albums_row = mysql_fetch_assoc($albums_query)) {
    $albums[] = array(
        'id' => $albums_row['album_id'],
        'timestamp' => $albums_row['timestamp'],
        'name' => $albums_row['name'],
        'description' => $albums_row['description'],
        'count' => $albums_row['image_count']       
        );
}

return $albums;
} 
```

对于图像，它看起来像这样；

```
function get_images($album_id) {
$album_id = (int)$album_id;

$images = array();

$image_query = mysql_query("SELECT `image_id`, `image_name`, `album_id`, `timestamp`, `ext` FROM `images` WHERE `album_id`=$album_id");
while ($images_row = mysql_fetch_assoc($image_query)) {
    echo $images_row['image_id'];

    $images[] = array(
    'id' => $images_row['image_id'],
    'img_name' => $images_row['image_name'],
    'album' => $images_row['album_id'],
    'timestamp' => $images_row['timestamp'],
    'ext' => $images_row['ext']
    );
}
return $images;
} 
```

我认为在使用左连接函数的 get_albums 函数中，我可以通过像这样添加图像名称和扩展名来访问图像；

```
while ($albums_row = mysql_fetch_assoc($albums_query)) {
    $albums[] = array(
        'id' => $albums_row['album_id'],
        'timestamp' => $albums_row['timestamp'],
        'name' => $albums_row['name'],
        'description' => $albums_row['description'],
        'count' => $albums_row['image_count'],
        'img_name' => $albums_row['image_name'],
        'ext' => $albums_row['ext']         
        ); 
```

然后像这样在索引页面中使用它；

```
$albums = get_albums();

if (isset($albums)) {
foreach ($albums as $album) {
    echo '<a href="view_album.php?album_id=', $album["id"], '"><img src="uploads/thumbs/', $album["id"] ,'/', $album['img_name'],'.', $album["ext"],'" />', $album['name'], '</a>';
}
} 
```

但结果是这样的； [http://www.robcnossen.nl/](http://www.robcnossen.nl/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:01:51.403

你为什么不先做一个大的查询来连接所有数据，然后按照你的意愿显示它，如下所示：

```
sql="SELECT * FROM albums a INNER JOIN images i ON a.album_id = i.album_id WHERE a.album_id =" . $album_id;

$result = mysql_query(sql);

while ($row = mysql_fetch_array($result))  {
     echo '<a href="view_album.php?album_id=' . $row['album_id'] . '><img src="uploads/thumbs/' . $row['album_id'] . '/' . $row['album_id'] . '.' . $row['album_ext'] . '" />' . $row['album_name'] . '</a>';
} 
```

然后它应该准确地显示你想要的方式

# android - Android MediaPlayer 准备失败：状态 = 0x1

> ID：15511939
> 
> 赞同：9
> 
> 时间：2013-03-19T22:43:00.370
> 
> 标签：android, media-player, prepare

我正在构建一个需要播放录制声音的录音机。我在播放音频时遇到了很多麻烦。我知道该文件存在，因为我将它隔离到我的 SD 卡上的一个文件夹中，但由于某种原因它无法播放它。

这是我的代码：

```
public class RecorderEditActivity extends SherlockActivity implements
    DatabaseHelper.MetadataListener {

private long position;

private Button playButton = null;
private TextView date = null;
private EditText title = null;
private EditText notes = null;
private Button saveButton = null;

private MediaPlayer mediaPlayer = null;
private boolean isPlaying = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.edit_item);

    position = getIntent().getExtras().getLong(DatabaseHelper.KEY_ROWID);

    playButton = (Button) findViewById(R.id.play);
    date = (TextView) findViewById(R.id.recording_date);
    title = (EditText) findViewById(R.id.edit_title);
    notes = (EditText) findViewById(R.id.edit_notes);
    saveButton = (Button) findViewById(R.id.save_edit_button);

    mediaPlayer = new MediaPlayer();

    DatabaseHelper.getInstance(getApplicationContext()).getMetadataAsync(
            position, this);

    playButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (!isPlaying) {
                playButton.setText(R.string.stop_text);
                try {
                    mediaPlayer = new MediaPlayer();
                    mediaPlayer
                            .setDataSource("sdcard/test/"
                                    + date.toString() + ".3gp");
                    mediaPlayer.prepare();
                    mediaPlayer.start();
                    mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                        @Override
                        public void onCompletion(MediaPlayer mp) {
                            mp.stop();
                        }
                    });
                } catch (Exception e) {
                    Log.e(e.getClass().getName(), e.getMessage(), e);
                }
            } else {
                playButton.setText(R.string.play_text);
                mediaPlayer.release();
            }
            isPlaying = !isPlaying;
        }
    }); 
```

以下是来自 LogCat 的错误：

```
03-20 00:33:40.963: E/MediaPlayer(21268): error (1, -2147483648)
03-20 00:33:40.963: E/java.io.IOException(21268): Prepare failed.: status=0x1
03-20 00:33:40.963: E/java.io.IOException(21268): java.io.IOException: Prepare failed.: status=0x1
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.media.MediaPlayer.prepare(Native Method)
03-20 00:33:40.963: E/java.io.IOException(21268):   at com.packagename.soundrecorder.RecorderEditActivity$1.onClick(RecorderEditActivity.java:56)
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.view.View.performClick(View.java:4204)
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.view.View$PerformClick.run(View.java:17355)
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.os.Handler.handleCallback(Handler.java:725)
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.os.Handler.dispatchMessage(Handler.java:92)
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.os.Looper.loop(Looper.java:137)
03-20 00:33:40.963: E/java.io.IOException(21268):   at android.app.ActivityThread.main(ActivityThread.java:5041)
03-20 00:33:40.963: E/java.io.IOException(21268):   at java.lang.reflect.Method.invokeNative(Native Method)
03-20 00:33:40.963: E/java.io.IOException(21268):   at java.lang.reflect.Method.invoke(Method.java:511)
03-20 00:33:40.963: E/java.io.IOException(21268):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 00:33:40.963: E/java.io.IOException(21268):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 00:33:40.963: E/java.io.IOException(21268):   at dalvik.system.NativeStart.main(Native Method) 
```

希望有人可以帮助我解释和解决这个问题。我做了很多研究，但我所做的没有任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:30:26.080

我想通了：像往常一样愚蠢的错误。我忘记添加读取外部存储器权限，由于您在上面的评论，我要感谢 Vasily 的修复。另一件事是我没有在我的日期 TextView 上调用 getText() 所以它没有正确设置文件名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T22:56:57.923

我认为你正面临这个问题，因为`DataSource`你的`MediaPlayer`. 您可以尝试`setDataSource`以下更改吗

```
mediaPlayer.setDataSource("file://sdcard/test/"
             + date.toString() + ".3gp"); 
```

我认为通过此更改，您的代码应该可以正常工作

**编辑：**请查看这篇文章[MediaPlayer Preparing Failed](https://stackoverflow.com/questions/15402201/mediaplayer-preparing-failed/15444165#15444165)`file://`以获取有关为您的文件名添加前缀的原因的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T12:04:42.553

我希望以下代码会有所帮助：

```
String soundPath = Environment.getExternalStorageDirectory().getPath() + "test/" + date.toString() + ".mp3";
mediaPlayer.setDataSource(soundPath); 
```

# java - 获取一个活动的 ResolveInfo 对象，知道它的名称？

> ID：15511940
> 
> 赞同：4
> 
> 时间：2013-03-19T22:43:06.290
> 
> 标签：java, android

我想将我的活动 (com.myapp.launcher.settings) 添加到一个空的 ArrayList。

```
 ArrayList<ResolveInfo> selectedApps = new ArrayList<ResolveInfo>();
    selectedApps.add(/*WHAT GOES IN HERE?*/); 
```

但我不知道如何通过我的活动获取 ResolveInfo 对象。

* * *

我设法制定了一种解决方法，循环遍历所有应用程序以查找我的活动。但它不是非常有效或实用：

```
 // Get an array list of all apps
    ArrayList<ResolveInfo> allApps = (ArrayList<ResolveInfo>) pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
    for(final ResolveInfo app : allApps) {
        // If it's name is "com.myapp.launcher.settings" add it
        if(app.activityInfo.name.equals("com.myapp.launcher.settings")) {
                selectedApps.add(app);
            }
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T22:59:37.147

只需[`resolveActivity`](http://developer.android.com/reference/android/content/pm/PackageManager.html#resolveActivity%28android.content.Intent,%20int%29)与明确的`Intent`. 大概是这样的：

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("com.myapp", "com.myapp.launcher.settings"));
ResolveInfo app = pm.resolveActivity(intent, 0);
selectedApps.add(app); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T07:44:56.610

如果您不只知道`packageName`应用程序的另一个答案：

```
Intent intent = new Intent();
intent.setPackage(packageName);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
ResolveInfo result = packageManager.resolveActivity(intent, 0); 
```

# django - Django：在基于类的视图和表单中访问 URL 变量

> ID：15511941
> 
> 赞同：1
> 
> 时间：2013-03-19T22:43:06.233
> 
> 标签：django, django-views

我正在尝试使用基于标准类的视图和表单库在 Django 中创建一个对象。我的表单中的三个字段依赖于从 URL 模式捕获的域变量。我的问题是：

*   我如何访问`domain`内部`CreateSubscription`以便我可以设置`Subscription.site`为`Site.objects.filter(domain=domain)[0]`？
*   如何限制呈现的下拉字段，`CreateSubscriptionForm`以便`plan`仅显示`SubscriptionPlan.objects.filter(site=Site.objects.filter(domain=domain)[0])`并`payment_profile`限制为`PaymentProfile.objects.filter(user=request.user)`？

为清楚起见，in 中的域`r'^subscribe/(?P<domain>\w+\.\w+)/$'`与我自己站点的域无关。框架在`django.contrib.sites`这里帮不了我。

提前感谢您帮助我解开所有这些 CBV 方法。:)

URL 模式是：

```
from django.conf.urls import patterns, url
from accounts.views import *

url(r'^subscribe/(?P<domain>\w+\.\w+)/$', 
    CreateSubscription.as_view(), name='subscribe_to_site'),
) 
```

有问题的观点是：

```
from accounts.forms import *
from accounts.models import *

class CreateSubscription(CreateView):
    model = Subscription
    form_class = CreateSubscriptionForm

    def form_valid(self, form):
        form.instance.user = self.request.user
        return super(CreateSubscription, self).form_valid(form) 
```

相关型号有：

```
from django.conf import settings
from django.contrib.sites.models import Site
from django.db import models

class PaymentProfile(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL)

class SubscriptionPlan(models.Model):
    site = models.ForeignKey(Site)
    name = models.CharField(max_length=40)

class Subscription(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL)
    site = models.ForeignKey(Site)
    plan = models.ForeignKey(SubscriptionPlan)
    payment_profile = models.ForeignKey(PaymentProfile) 
```

最后，我的表格是：

```
from accounts.models import *

class CreateSubscriptionForm(forms.ModelForm):
    class Meta:
        model = Subscription
        exclude = ('user', 'site', ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:07:49.043

要访问传递给视图的数据，请使用`self.args`和`self.kwargs`

```
from accounts.forms import *
from accounts.models import *

class CreateSubscription(CreateView):
    model = Subscription
    form_class = CreateSubscriptionForm

    def form_valid(self, form):
        form.instance.user = self.request.user
        form.instance.site = Site.objects.get(domain=self.kwargs['domain'])
        return super(CreateSubscription, self).form_valid(form) 
```

要限制下拉内容，您需要`queryset`为这些字段设置 。基本上，大致如下：

```
class CreateSubscriptionForm(forms.ModelForm):
    plan = forms.ModelChoiceField(
        queryset=SubscriptionPlan.objects.filter(xxx)
    )

    ...

    class Meta:
        model = Subscription
        exclude = ('user', 'site', ) 
```

这也可以在视图内完成，以便您可以访问域。

```
class CreateSubscription(CreateView):
    model = Subscription
    form_class = CreateSubscriptionForm

    def get_form(self, form_class):
        """
        Returns an instance of the form to be used in this view.
        """
        form = super(CreateSubscription, self).get_form(form_class)
        form.fields['plan'].queryset = SubscriptionPlan.objects.filter(site__domain=self.kwargs['domain'])
        return form

    ...

    def form_valid(self, form):
        form.instance.user = self.request.user
        form.instance.site = Site.objects.get(domain=self.kwargs['domain'])
        return super(CreateSubscription, self).form_valid(form) 
```

# ruby - RVM 和 OpenSSL 的问题

> ID：15511943
> 
> 赞同：35
> 
> 时间：2013-03-19T22:43:13.083
> 
> 标签：ruby, openssl, rvm

试图为同事设置一台新的 macbook。进展不顺利。

首先我安装 OpenSSL：

```
Heathers-MacBook-Pro:~ heather$ rvm pkg install openssl
Fetching openssl-1.0.1c.tar.gz to /Users/heather/.rvm/archives
######################################################################## 100.0%
Extracting openssl to /Users/heather/.rvm/src/openssl-1.0.1c
Configuring openssl in /Users/heather/.rvm/src/openssl-1.0.1c.
Compiling openssl in /Users/heather/.rvm/src/openssl-1.0.1c.
Installing openssl to /Users/heather/.rvm/usr

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Updating openssl certificates 
```

然后我尝试用openssl安装ruby ...

```
Heathers-MacBook-Pro:website heather$ rvm install 1.9.3 --with-openssl-dir=$HOME/.rvm/usr
Fetching yaml-0.1.4.tar.gz to /Users/heather/.rvm/archives
Extracting yaml to /Users/heather/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/heather/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/heather/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/heather/.rvm/usr
Installing Ruby from source to: /Users/heather/.rvm/rubies/ruby-1.9.3-p392, this may take a while depending on your cpu(s)...
ruby-1.9.3-p392 - #downloading ruby-1.9.3-p392, this may take a while depending on your connection...
ruby-1.9.3-p392 - #extracting ruby-1.9.3-p392 to /Users/heather/.rvm/src/ruby-1.9.3-p392
ruby-1.9.3-p392 - #extracted to /Users/heather/.rvm/src/ruby-1.9.3-p392
ruby-1.9.3-p392 - #configuring
ruby-1.9.3-p392 - #compiling
ruby-1.9.3-p392 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.25 for ruby-1.9.3-p392 ...
Installation of rubygems completed successfully.
Saving wrappers to '/Users/heather/.rvm/bin'.
ruby-1.9.3-p392 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p392 - #importing default gemsets, this may take time ...
Install of ruby-1.9.3-p392 - #complete 

Heathers-MacBook-Pro:website heather$ bundle update
Could not load OpenSSL.
You must recompile Ruby with OpenSSL support or change the sources in your Gemfile from 'https' to 'http'. Instructions for
compiling with OpenSSL using RVM are available at rvm.io/packages/openssl. 
```

顺便说一句，gem 文件显示“源[https://rubygems.org](https://rubygems.org) ”

想法？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2017-02-14T05:56:49.723

OP实际上拯救了我的一天！就我而言：

```
$ rvm pkg install openssl
$ rvm remove 2.4
$ rvm install 2.4 --with-openssl-dir=$HOME/.rvm/usr
$ gem install bundler 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-19T23:03:07.910

试试这个：

```
rvm get head
rvm pkg remove
rvm requirements run  # if brew gives you warnings about formulas to install, run "brew install" for each before moving on.

rvm reinstall [the version you need (i.e: 2.0.0)] 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-09-23T09:55:02.457

[ArchLinux wiki](https://wiki.archlinux.org/index.php/RVM#RVM_uses_wrong_OpenSSL_version)上有很好的描述：

> 早于 2.4 的 Ruby 版本需要 OpenSSL 1.0，但 RVM 将尝试使用 OpenSSL 1.1 构建它们。

所以你可以做（​​最简单的）：

```
$ rvm pkg install openssl
$ rvm reinstall 2.3.5 --with-openssl-dir=$HOME/.rvm/usr 
```

[您可以在ArchLinux wiki](https://wiki.archlinux.org/index.php/RVM#RVM_uses_wrong_OpenSSL_version)上查看更多解决方案。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-01-17T13:08:22.547

使用 Homebrew 在 macOS Mojave (10.14.2) 上安装 Ruby 2.2。

[安装自制软件](https://brew.sh/)

```
brew install openssl
rvm install 2.2 --with-openssl-dir=/usr/local/opt/openssl 
```

不要使用`rvm pkg`它[已弃用](https://rvm.io/packages)，使用`rvm autolibs enabled`.

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-12-03T19:31:23.777

以下是我在带有 Catalina 的 Mac 上安装 rvm 和 ruby​​ 2.3 的方法。安装的 rvm 版本是 1.29.9。必须安装 OpenSSL 1.0.2（降级）。请注意 gpg 命令中的“ipv4”。

```
gpg --keyserver hkp://ipv4.pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
\curl -sSL https://get.rvm.io | bash -s stable 
```

[在https://www.openssl.org/source/](https://www.openssl.org/source/)下载 openssl 1.0.2

```
tar -xzf openssl-1.0.2t.tar.gz
cd openssl-1.0.2t
./Configure darwin64-x86_64-cc --prefix=/usr/local/opt/openssl@1.0
make
make test
sudo make install

rvm install 2.3.3 --with-openssl-dir=/usr/local/opt/openssl@1.0
ruby -v
ruby -ropenssl -e 'puts OpenSSL::OPENSSL_VERSION'              
>> OpenSSL 1.0.2t  10 Sep 2019 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-06-30T15:11:40.160

在 MacOS 10.12.2 上，通过 brew 安装 openssl 将不起作用。要修复它，请运行：

```
export PKG_CONFIG_PATH=/usr/local/opt/openssl/lib/pkgconfig:/usr/local/lib/pkgconfig 
```

然后通过 rvm 安装 Ruby。

[编辑：有关问题](http://ollehost.dk/blog/2013/06/25/install-ruby-2-0-0-p195-using-ruby-build-and-pkg-config/)背后原因的更多信息。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-11-30T12:31:47.987

对于那些在 Mac Mojave 上通过 RVM 使用 openssl 1.1 和 Ruby 2.3 的人，您可以尝试以下命令。问题是 Ruby 2.3 与 openssl 1.1 不兼容

```
rvm pkg install openssl
PKG_CONFIG_PATH=$HOME/.rvm/usr/lib/pkgconfig rvm reinstall 2.3.3 --with-openssl-dir=$HOME/.rvm/usr 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-04-03T19:31:29.293

这对我有用：

```
brew install rbenv/tap/openssl@1.0
rvm reinstall 1.9.3-p551 --with-openssl-dir='/usr/local/opt/openssl@1.0'
gem update --system 
```

干杯!

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-04-06T18:50:01.673

对于旧版本的 ruby `2.2.10`​​，`MacOS High Sierra 10.13.6`唯一对我有用的是：

1.  切换到较旧的 OpenSSL 版本

```
brew switch openssl 1.0.2s 
```

2.  比使用重新安装 ruby`--with-openssl-dir`

```
rvm reinstall 2.2.10 --with-openssl-dir=/usr/local/Cellar/openssl/1.0.2s 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-10-20T21:56:48.380

所以这对我有用：

```
rvm pkg install openssl
rvm reinstall all --force 
```

我也有`rvm autolibs rvm_pkg`readline 支持。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-03-24T12:14:40.903

openssl 版本：1.0.2k

这对我有用：

```
brew reinstall openssl 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-13T02:38:58.910

**对于 MacOS 上的 rvm**

首先，检查是否安装了 openssl。您应该看到如下内容：

```
$ brew --prefix openssl
/usr/local/opt/openssl@1.1 
```

如果未安装 openssl，请执行此操作。

```
$ brew install openssl
$ brew unlink openssl
$ brew link --force openssl 
```

如果您安装了多个 openssl，请考虑删除除一个以外的所有内容，以使您的生活更轻松。

```
$ brew cleanup openssl
$ brew list --versions openssl
$ brew uninstall <unwanted-openssl-version-here> 
```

现在重新安装 ruby​​ 版本，指定所需的 openssl 路径。

```
$ rvm reinstall <your-version-here> --with-openssl-dir=`brew --prefix openssl` 
```

最后，验证你的 ruby​​ 是用它链接到的相同 openssl 编译的。如果你两次看到相同的版本，你应该已经准备好了。

```
$ ruby -ropenssl -e'puts OpenSSL::OPENSSL_VERSION, OpenSSL::OPENSSL_LIBRARY_VERSION'
OpenSSL 1.1.1d  10 Sep 2019
OpenSSL 1.1.1d  10 Sep 2019 
```

如果稍后您安装其他版本的 ruby​​，您将需要传递相同的`--with-openssl-dir`参数。或者，我相信您可以在 bash 配置文件中设置以下变量。

```
export PKG_CONFIG_PATH="$PKG_CONFIG_PATH:$(brew --prefix openssl)/lib/pkgconfig"
export LIBRARY_PATH="$LIBRARY_PATH:$(brew --prefix openssl)/lib" 
```

如果上述方法不起作用，请从 bash 配置文件中删除这些行，然后使用上述`--with-openssl-dir`参数。

参考：[https](https://github.com/rvm/rvm/issues/4562) ://github.com/rvm/rvm/issues/4562 参考：[https ://bugs.ruby-lang.org/issues/12630](https://bugs.ruby-lang.org/issues/12630)

# groovy - Groovy：将列表表示为实际列表的字符串

> ID：15511945
> 
> 赞同：0
> 
> 时间：2013-03-19T22:43:18.847
> 
> 标签：groovy

Groovy 中有没有办法从字符串中创建一个列表？即我有一个 String `"[0,1]"`，我想将它转换为`[0,1]`（和实际的常规列表）以便进行操作。

字符串的值可能是二维`"[ [1], [2, 3]]"`的 ( )，但可以肯定它始终是一个列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:50:15.587

您可以使用 Eval.me 但显然，请注意评估任何旧字符串

```
def a = Eval.me( '[ 1, 2 ]' ) 
```

一种替代方法可能是：

```
def a = new groovy.json.JsonSlurper().parseText( '[ 1, 2 ]' ) 
```

由于您在问题中提供的两种列表形式都是有效的 Json :-)

### 表现

给定以下基准测试代码：

```
@Grab('com.googlecode.gbench:gbench:0.4.1-groovy-2.1') // v0.4.1 for Groovy 2.1
import groovy.json.JsonSlurper

def r = benchmark( measureCpuTime:false ) { 
  'eval' {
    def a = Eval.me( '[ 1, 2 ]' )
    assert a == [ 1, 2 ]
  }
  'json' {
    def a = new JsonSlurper().parseText( '[ 1, 2 ]' )
    assert a == [ 1, 2 ]
  }
}
r.prettyPrint() 
```

我得到输出：

```
eval  4661121
json     7257 
```

So it's much quicker going the json route ;-)

# ruby - OSX 上的 Rubygems 丢失

> ID：15511947
> 
> 赞同：6
> 
> 时间：2013-03-19T22:43:21.027
> 
> 标签：ruby, rubygems, osx-lion

我觉得自己像个十足的白痴，但我整天都在为此工作，却一无所获。

我已经重新启动了好几次，试图在我的 OSX 环境、RVM、Brew、Ruby 上完全安装 Ruby：每次我完成 Ruby 安装时，它都会在 ruby​​gems 安装时触底。

我不得不重新开始的原因是，在我第一次成功安装（使用打包的一体式 RubyInstaller）后，RVM 不会在 Jewelerybox 中更新，所以我无法管理我的 gem - 由初始引起的问题Ruby 安装在 /usr/local 中的系统上，而不是在我自己的目录下。为了解决这个问题，我卸载了我所有的 Ruby 东西并重新开始。

一切正常，直到 ruby​​ 编译器在安装 ruby​​ 2.0.0 时开始在 ruby​​gems 安装部分上运行。检查 usr/bin 下的 OSX 系统文件，我发现 ruby​​gems 也不存在（它应该默认存在于 OSX 上）。有任何想法吗？（注意 XCode 是最新的并且安装了命令行工具）

最后一次尝试是：

```
$ rvm get head --autolibs=3 # get the latest RVM and build required libs
$ rvm requirements # just in case, install all other required stuff
$ rvm remove 2.0.0
$ rvm install ruby-2.0.0 
```

. . . 触发以下错误：

```
[2013-03-19 23:21:50] /Users/matthew.evans/.rvm/rubies/ruby-2.0.0-p0/bin/ruby
Exception `LoadError' at /Users/matthew.evans/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems.rb:1073 - cannot load such file -- rubygems/defaults/operating_system
Exception `LoadError' at /Users/matthew.evans/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems.rb:1082 - cannot load such file -- rubygems/defaults/ruby
mkdir -p /Users/matthew.evans/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0 
```

...

```
install -c -m 0755 /var/folders/nq/wkj89k854tl0w97n68qdn820pzk_51/T/gem.84634 /Users/matthew.evans/.rvm/rubies/ruby-2.0.0-p0/bin/gem
rm /var/folders/nq/wkj89k854tl0w97n68qdn820pzk_51/T/gem.84634
ERROR:  While executing gem ... (NoMethodError)
    undefined method `fu_stream_blksize' for #<Gem::Commands::SetupCommand:0x007ffd0e054818>
Installing RubyGems
Installing gem executable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:23:54.233

我今天在 rvm 中安装 ruby​​ v2 时遇到了完全相同的错误。我在 Ubuntu 上的一个用户帐户中需要使用“sudo”——并输入我的 sudo 帐户密码——才能安装操作系统依赖项。

您的问题提到运行`rvm requirements`以**安装**依赖项。从 v1.19 开始，这似乎是 rvm 中的新行为。它似乎安装了一堆依赖项就好了。但随后安装红宝石轰炸。

在早期的 rvm 版本中，键入`rvm requirements`只会**列出**rvm 和 ruby​​ 的依赖项，如[Archonic 的](https://stackoverflow.com/a/15529473/1066093)回答中所示。

我输入`rvm implode`然后重新开始：

```
\curl -L https://get.rvm.io | bash -s 1.18.21
source /home/deploy/.rvm/scripts/rvm
rvm requirements 
```

那时我可以安装 rvm 说我需要 rvm 和 ruby​​ 的库/工具，然后`rvm install ruby-2.0.0-p0`成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T10:04:48.297

这对我有用：

```
rvm get head
rvm requirements
rvm install ruby-2.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:38:29.033

我相信问题在于 RVM 将您的依赖项放在哪里 - 全局与您的用户文件夹。摘自一本名为“使用 Rails 进行敏捷开发”的书：

> 首先，您需要确保安装了 Xcode 3 或更高版本...

```
$ xcodebuild -version 
```

> 如果您安装了 Xcode 版本 3，则需要单独安装 Git 版本控制系统。通过运行以下命令来验证您的安装：

```
$ git --version 
```

> 接下来，安装 RVM 本身：

```
$ curl -L https://get.rvm.io | bash -s stable 
```

> 退出命令窗口或终端应用程序并打开一个新的。这会导致您的 .bash_login 被重新加载。执行以下命令，该命令提供针对您的特定操作系统量身定制的附加安装说明：

```
$ rvm requirements 
```

> 查找告诉您如何为 Ruby (MRI) 安装必要的操作系统依赖项的行。完成这些说明后，您可以继续安装 Ruby 解释器本身：

```
$ rvm install 2.0.0 
```

> 前面的步骤将需要一段时间，因为它会下载、配置和编译必要的可执行文件。完成后，使用该环境并安装 rails：

```
$ rvm use 2.0.0
$ gem install rails --version 4.0.0.beta1 --no-ri --no-rdoc 
```

> 除 rvm use 语句外，上述每条指令只需执行一次。每次打开 shell 窗口时都需要重复 rvm use 语句。use 关键字是可选的，因此您可以将其缩写为 rvm 2.0.0。您还可以使用以下命令将其设置为新终端会话的默认 Ruby 解释器：

```
$ rvm --default 2.0.0 
```

> 您可以使用以下命令验证安装是否成功：

```
$ rails -v 
```

如果您遇到问题，请尝试 rvm 站点上的“安装故障排除”标题下列出的建议。

希望对你有用！

# javascript - ASP.NET 验证器在本地工作，但不在 IIS 6.0 上托管

> ID：15511955
> 
> 赞同：0
> 
> 时间：2013-03-19T22:43:45.017
> 
> 标签：javascript, asp.net, .net

运行 Visual Studio 2012。该网站面向 .NET 2.0。

我有这些 asp:RequiredFieldValidator's 和 asp:CustomValidator's 连接到 asp:TextBox's。

它们在调试模式下在 IIS Express 上本地正确触发，但当我在服务器盒上的 IIS 6.0 中托管它时却没有。托管应用程序完全跳过这些前端验证器。

有一个与 asp:CustomValidator 关联的 javascript 函数，它永远不会进入托管实例上的代码（通过 Firebug Firefox 扩展验证）。

知道为什么这些验证器不能正常工作吗？或者如何找出原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:19:10.537

经过4天的狩猎。这是因为 IIS 默认网站设置中 .axd 文件上的“验证文件存在”复选框。

[http://blogs.msdn.com/b/carloc/archive/2008/12/04/webresource-axd-or-scriptresource-axd-not-working.aspx](http://blogs.msdn.com/b/carloc/archive/2008/12/04/webresource-axd-or-scriptresource-axd-not-working.aspx)

# drupal-7 - Drupal 7 - 将颜色模块集成到我的自定义模块中

> ID：15511957
> 
> 赞同：1
> 
> 时间：2013-03-19T22:43:51.650
> 
> 标签：drupal-7, drupal-modules

我知道如何将颜色模块集成到我的主题中，这样我就可以从外观页面管理站点颜色，但我想将它添加到我的自定义模块中。

是否可以将颜色模块集成到自定义模块中？我找不到任何关于此的文档。

任何建议都会很棒。

# c++ - 命名空间级访问

> ID：15511959
> 
> 赞同：4
> 
> 时间：2013-03-19T22:44:11.580
> 
> 标签：c++, namespaces, access-modifiers

我有以下情况：

```
namespace MyFramework {
  class A {
    void some_function_I_want_B_to_use() {}
  };
  class B {
    B() {
      some_function_I_want_B_to_use() {}
    }
  };
} 
```

我希望它`some_function_I_want_B_to_use`在命名空间之外不可见`MyFramework`，但我确实希望它对 MyFramework 内部的任何人都可见（或者，只对 B 类可见也可以）。我有很多这样的方法，是从 MyFramework 的公共 API 中隐藏它们以使所有类`MyFramework`成为朋友的唯一方法吗？我也在考虑将所有“低级”类放在 B 中，但我不想走这条路，直到我确定它能够从 B 内部访问 A 的所有方法，但不是从在 MyFramework 之外。

重申一下，我有一个在一个命名空间中创建的框架，每个类都有对使用该框架的公众有用的方法。但是，每个类也有一些使公共 API 复杂化但框架正常运行所必需的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:49:45.987

> 我希望在命名空间`some_function_I_want_B_to_use`之外不可见`MyFramework`，但我确实希望它对`MyFramework`.

总之，您需要类似于 Java 中的包的东西。

不幸的是，命名空间*不可能*做到这一点。命名空间中包含的每个类都可以从命名空间的外部访问：命名空间是开放的。

解决方案通常是为实现细节添加另一个命名空间：

```
namespace MyFramework
{
    // Implementation details
    // Should not be used by the user
    namespace detail
    {
        class A
        {
            public:
                void func();
        };
    }

    class B
    {
        public:
            B()
            {
                A a;
                a.func();
            }
    };
} 
```

不要忘记添加注释，说明`detail`用户不得使用命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T00:06:59.320

常见的约定，例如在 Boost 中，是一个嵌套的命名空间，称为`detail`.

如果您想*强制执行*可访问性，您始终可以使用嵌套的`class`调用`detail`. 该类提供可访问性检查，但缺乏像命名空间那样的可扩展性。但是，`detail`范围很少需要扩展。

所以，在它所有的丑陋中，

```
namespace my_framework {
    class detail
    {
    private:
        static void some_function_I_want_B_to_use() {}

    public:
        class A
        {};

        class B
        {
            B() { some_function_I_want_B_to_use(); }
        };
    };

    typedef detail::A A;        // "using detail::A"
    typedef detail::B B;        // "using detail::B"
}  // namespace my_framework 
```

* * *

顺便说一句，请注意 B 类（直接来自问题）有一个私有默认构造函数，因此不能创建它的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T00:10:54.503

[Pimpl idiom](http://en.wikipedia.org/wiki/Opaque_pointer)，通常称为**Compilation Firewall**，是您正在寻找的。整个[Qt](http://qt-project.org/)都是使用这个成语实现的。

```
// A.hpp
namespace MyFramework {
  class A {
  private:
    class Private;

    Private* implementation;
  };
}

// A_Private.hpp
#include "A.hpp"

namespace MyFramework {
  class A::Private {
  public:
    void some_function_I_want_B_to_use() {}
  };
}

// A.cpp
#include "A_Private.hpp"

namespace MyFramework {
A::A() {
  implementation->some_function_I_want_B_to_use();
}
}

// B.hpp
#include "A.hpp"

namespace MyFramework {
  class B {
    B();

    A a;
  };
}

// B.cpp
#include "A_Private.hpp"

namespace MyFramework {
B::B() {
  a.implementation->some_function_I_want_B_to_use();
}
} 
```

**注意**：当然`A_Private.hpp`不会进入`include`框架最终分发的目录，即它根据您的需要保持**包私有。**

这个例子非常基础。当然，它可以做得更先进、更健壮。此外，**Pimpl**还有许多其他优点。有关所有这些信息，请参阅：

*   [GotW #100：编译防火墙（难度：6/10）](http://herbsutter.com/gotw/_100/)
*   [GotW #101：编译防火墙，第 2 部分（难度：8/10）](http://herbsutter.com/gotw/_101/)
*   [皮条客我的皮条客-重新加载](http://marcmutz.wordpress.com/translated-articles/pimp-my-pimpl-%E2%80%94-reloaded/)
*   [皮条客我的皮条客](http://marcmutz.wordpress.com/translated-articles/pimp-my-pimpl/)
*   [指针](http://qt-project.org/wiki/Dpointer)

# javascript - 自定义 JS 对象未正确解析

> ID：15511964
> 
> 赞同：0
> 
> 时间：2013-03-19T22:44:36.280
> 
> 标签：javascript, oop

以下对象是基于 Nicholas Zakas 的“JavaScript 中面向对象编程原理”中的示例构建的。但是，我无法从语法中发现一些错误。当我尝试将其加载到浏览器中时，控制台中出现错误：“ReferenceError: owner_idx is not defined”

任何人都知道如何修复？

```
function Editor() {
    Object.defineProperty(this, "program_idx", {
        get: function() {
            return program_idx;
        },
        set: function(newVal) {
            program_idx = newVal;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(this, "owner_idx", {
        get: function() {
            return owner_idx;
        },
        set: function(newVal) {
            owner_idx = newVal;
        },
        enumerable: true,
        configurable: true
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:51:25.493

好吧，“没有定义owner_idx”。你为什么不定义它？

```
function Editor() {

    var program_idx, owner_idx; 

    Object.defineProperty(this, "program_idx", {
        get: function() {
            return program_idx;
        },
        set: function(newVal) {
            program_idx = newVal;
        },
        enumerable: true,
        configurable: true
    });

    Object.defineProperty(this, "owner_idx", {
        get: function() {
            return owner_idx;
        },
        set: function(newVal) {
            owner_idx = newVal;
        },
        enumerable: true,
        configurable: true
    });
};

var e = new Editor();
e.owner_idx = "foo";
console.log(e.owner_idx); 
```

**但是**，如果您的唯一目的是获取/设置属性值（在存储/检索之前不转换它们，或者更改它们的值会影响其他属性），则不需要访问器方法。常规属性可以正常工作。

# java - 在 Spring/Java 中调度任务

> ID：15511965
> 
> 赞同：6
> 
> 时间：2013-03-19T22:44:38.660
> 
> 标签：java, spring, scheduled-tasks

我正在生成一个线程，它将不断从数据库中提取大量记录并将它们放入队列中。该线程将在服务器负载时启动。我希望这个线程一直处于活动状态。如果数据库中没有记录，我希望它等待一段时间后再次检查。我正在考虑使用 spring 任务调度程序来安排这个，但不确定这是否正确，因为我只希望我的任务启动一次。在 Spring 中实现这一点的好方法是什么？

另外，我需要进行边界检查，如果我的线程出现故障（由于任何错误或异常情况），它应该在一段时间后重新实例化。

我可以通过使用线程通信方法在 java 中完成所有这些工作，但只是尝试在 Spring 或 Java 中是否有适用于此类场景的东西。

任何建议或指针都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:50:57.373

您可以使用`@Scheduled`注释来运行作业。首先创建一个带有注解的方法的类`@Scheduled`。

**班级**

```
public class GitHubJob {

   @Scheduled(fixedDelay = 604800000)
   public void perform() {
      //do Something
    }
} 
```

然后在你的配置文件中注册这个类。

**弹簧上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:task="http://www.springframework.org/schema/task"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<tx:annotation-driven/>
<task:annotation-driven scheduler="myScheduler"/>

<task:scheduler id="myScheduler" pool-size="10"/>
<bean id="gitHubJob" class="org.tothought.spring.jobs.GitHubJob"/>

</beans> 
```

有关调度的更多信息，请访问[Spring Docs](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-20T06:53:51.117

```
@Scheduled(fixedDelay=3600000)
private void refreshValues() {
   [...]
} 
```

每小时运行一次任务。它必须是无效的并且不接受任何论点。如果您使用 Spring 的 Java 配置，您还需要将注释添加`@EnableScheduling`到您的`@Configuration`类之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:15:29.403

Spring 对调度任务提供了开箱即用的支持。 [这是](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html)最新 3.2.x 版本的 spring 的文档，但请查看文档以了解您正在使用的版本。看起来它在后台使用 Quartz 来安排任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T23:04:31.577

您可以尝试使用 Quartz 调度程序。[http://quartz-scheduler.org/](http://quartz-scheduler.org/) 这将允许您指定任务执行之间的持续时间。您可以设置一个标志（布尔值），说明该类是否已运行，以避免重复您只想运行“第一次”时间的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T01:09:38.730

我认为您的要求只是石英或弹簧调度框架非常支持的常规 senario。但是您想创建一种特殊的方法来实现它。我的建议是保持简单和愚蠢。spring scheudling 将通过池而不是一直运行它来利用您的工作线程。

从统计数据来看，查看工人阶级的日志很容易。如果要在 Web 控制台中查看统计信息，则需要记录工作人员的登录数据库。我相信你可以用正常的方式轻松完成。

# java - 通过拆分或使用正则表达式将 ID 与另一个字符串匹配

> ID：15511968
> 
> 赞同：0
> 
> 时间：2013-03-19T22:44:55.190
> 
> 标签：java, regex, string, split

下面是字符串的示例。在下面的四个字符串示例中，您会发现`userId`一如既往`key`。

```
{siteRebateSenstvty=0;1,1;2, siteRedemptChg=16;30,77;40, userId=101}
{sgmntId=1, userId=101}
{predictedCatRev=0;101;1,1;201;2, predictedOvrallRev=77;2,0;1,16;3, sitePrftblty=77;2,0;1671679, topByrGms=12345.67, usrCurncy=1, vbsTopByrGmb=167167.67, userId=101}
{zipCode=CA11 9QL, userId=101} 
```

所以现在在我下面的方法中，我试图用 验证`str`值`id`，我将把字符串和 id 传递给`isStringValid method`.

```
private boolean isStringValid(String str, String id) {
    boolean valid = false;

    System.out.println(str);

    return valid;
} 
```

**问题陈述：-**

现在我正在尝试`id value`与`userId value`上面的匹配`JSON String`。意思是 if `id value is 101`then 在上面的`JSON String` `userId`值也应该是 101。如果其中任何一个不匹配或字符串中没有 userId 值，则设置`vaild boolean to false`.

解决这个问题的最佳方法是什么？

我不能这样-

`if(str.contains(id))`因为有可能 101 作为某个数字出现在任何键中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:49:21.333

假设 id （在您的第一个示例中为 101 ）始终后跟`;` `,`or `}`，您可以使用：

```
String str = "{siteRebateSenstvty=0;1,1;2, siteRedemptChg=16;30,77;40, userId=101}";
String id = "101";
boolean valid = str.matches(".*userId=" + id + "[,;}]+.*");
System.out.println("valid = " + valid); 
```

该`[,;}]+`部分确保下一个字符不是 ID 的一部分（例如，当您期望 101 时，1015a 不会被视为有效的 userId）。

或者，可能更健壮，您可以使用单词边界：

```
boolean valid = str.matches(".*userId=" + id + "\\b+.*"); 
```

# ubuntu - 詹金斯在没有警告的情况下随机崩溃

> ID：15511969
> 
> 赞同：3
> 
> 时间：2013-03-19T22:44:55.643
> 
> 标签：ubuntu, jenkins, continuous-integration

我在 Ubuntu 服务器上将 Jenkins 作为服务运行，它最近崩溃了。我的服务器有 512 MB 的 RAM，其中 256 MB 分配给了 Jenkins。我检查了日志，但那里没有记录崩溃的痕迹，所以我怀疑 Jenkins 在每次崩溃时都会立即终止。

我最近测试了 Jenkins 的正常运行时间，它在上线 2 到 15 分钟之间崩溃。我还测试了使用的内存，Jenkins 使用了 120 MB 到 160 MB 的 RAM。有没有办法来解决这个问题？

编辑：我使用的是 Oracle JDK 7。

# map - 在 Clojure 映射中“更新”给定键的惯用方式？

> ID：15511970
> 
> 赞同：11
> 
> 时间：2013-03-19T22:45:01.417
> 
> 标签：map, clojure, merge

假设我们有一张看起来像这样的地图：

```
(def m {:a {:foo "bar"}}) 
```

现在我们想用一些新值更新键 :a in m ：

```
(def vs {:baz "qux"}) 
```

如果这是 Python，我们可以执行以下操作：

```
>>> d = {'a': {'foo': 'bar'}}
>>> d['a'].update({'baz': 'qux'})
>>> d
{'a': {'foo': 'bar', 'baz': 'qux'}} 
```

我发现的最简单的 Clojure 等价物是定义这样的函数：

```
(defn update-key
  "
  Updates a given key `k` over a map `m` with a map of values `vs`.
  "
  [k m vs]
  (assoc m k (merge (k m) vs))) 
```

然后调用如下：

```
(update-key :a m vs)
; => {:a {:foo "bar" :baz "qux"}} 
```

`update()`所以我的问题是：实现与Python dicts 提供的方法相同的功能的最惯用和正确的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T23:04:25.203

我想你正在寻找[`assoc-in`](http://clojuredocs.org/clojure_core/clojure.core/assoc-in)：

```
(def m {:a {:foo "bar"}})

(assoc-in m [:a :foo] "qux")
; => {:a {:foo "qux"}}

(assoc-in m [:a :baz] "qux")
; => {:a {:foo "bar", :baz "qux"}} 
```

[`update-in`](http://clojuredocs.org/clojure_core/clojure.core/update-in)是相似的，也可能值得一看。这实际上可能更接近您的 Python 示例：

```
(def m {:a {:foo "bar"}})
(def vs {:baz "qux"})

(update-in m [:a] merge vs)
; => {:a {:foo "bar", :baz "qux"}} 
```

* * *

**更新：**

即使键是变量值（不是编译时常量），您仍然可以同时使用两者`update-in`，`assoc-in`并将变量放入向量中：

```
(def m {:a {:foo "bar"}})
(def k' :baz)
(def v' "qux")

(assoc-in m [:a k'] v')
; => {:a {:foo "bar", :baz "qux"}} 
```

您还可以以编程方式构建*密钥*向量：

```
(def m {:a {:foo "bar"}})
(def k' :baz)
(def v' "qux")

(let [ks (conj [:a] k')]
  (assoc-in m ks v'))
; => {:a {:foo "bar", :baz "qux"}} 
```

# php - 在数组中拆分数组（Mysql、PHP 和 Ajax）

> ID：15511973
> 
> 赞同：0
> 
> 时间：2013-03-19T22:45:16.440
> 
> 标签：php, mysql, ajax, arrays

我有一个包含 5 列和多行的数据库。我正在使用 PHP 来获取数据并将其作为 JSON 作为数组回显。它呼应它的方式是每行中的数据是一个数组，而行本身是一个数组（数组中的数组）。

现在我使用 Ajax 将数据引入并希望将数组拆分为一个数组。到目前为止，我只能拆分行。我将如何进一步分裂？

这是PHP：

```
 //==== FETCH DATA
  $result = mysql_query("SELECT * FROM $tableName");

  //==== PUT DATA INTO ARRAY
  $array = array();
  while ($row = mysql_fetch_row($result)) {
    $array[] = $row;
  }

  //==== ECHO AS JSON
  echo json_encode($array); 
```

这是阿贾克斯：

```
$.ajax({                                      
  url: 'assets/php/results.php',    
  data: "",
  dataType: 'json',                  
  success: function(data){

    //==== FETCH DATA FIELDS
    var row1 = data[0];
    var row2 = data[1];

    //==== UPDATE HTML WITH DATA
    $('#r-col span.row1').html(row1);
    $('#r-col span.row2').html(row2);
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:16:12.263

为了回答您的问题，让我给您一些提示，告诉您如何以更短的步骤实现这一目标。
首先，尝试使用 msqli_ 函数而不是 msql_（在 php 中），它具有更好的安全处理以及其他改进，也是 w3schools 推荐使用的函数。

有一个名为 mysqli_fetch_array() 的函数，它将完全按照您在单个命令中对 for 循环所做的操作。

为了回答你关于 json 的问题，你应该看看 json 的真正样子：

```
var data = {"menu": {
  "id": "file",
  "value": "File123",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}} 
```

Json 对象不是数组，它们是对象。这意味着我可以访问这样的信息：

```
data.menu.id //Which is equal to "file"<br> 
```

或者

```
data[0][0]  //which is also equal to "file"<br> 
```

或组合

```
data[0].value  //is equal to "File123" 
```

了解这些对象工作方式的一个好方法是使用 Chrome 中的交互式控制台。它非常容易理解对象的打印。我还建议您阅读一些关于 javascript 的面向对象编程的内容。

简而言之：Json 对象不是数组，但您可以通过附加 . 或者 []

一个小提示：尽量避免在您的语句中使用 Select *，它们占用大量资源，只需按名称调用您需要的字段即可。
另外，msql_ 函数现在有点不推荐使用，尝试使用 msqli_ 函数，它们在安全方面有几个升级，你可以查看 w3schools.com 的例子。
最后，php 中有一个名为 msqli_fetch_array 的函数，它可以完全按照您的 for 循环所做的工作，它将您的查询输出转换为数组。

快乐编码。

# java - 每个开发人员的 Cobertura 统计数据

> ID：15511975
> 
> 赞同：0
> 
> 时间：2013-03-19T22:45:23.333
> 
> 标签：java, maven, cobertura

你知道是否有一些工具或 maven 插件允许获取 cobertura 数据并由开发人员指定它？我知道有 maven-blame-plugin 但这是针对 findbugs、checkstyle 和 pmd 报告的。我们有类似的 cobertura 报告吗？

谢谢你。

# windows-8 - 重置 VS 2012 Windows 模拟器设置

> ID：15511977
> 
> 赞同：4
> 
> 时间：2013-03-19T22:45:29.667
> 
> 标签：windows-8, visual-studio-2012

我正在使用 VS 2012 附带的模拟器，并决定提高分辨率以查看我的应用程序在高分辨率下是否看起来不错。我几乎没有意识到这对我的机器有多少要求。模拟器崩溃了，从那以后我就无法使用它了。我可以在 Visual Studio 之外启动它，但只要我点击任何东西，它就会冻结并开始锁定我的机器。我在虚拟机中运行 Windows 8，所以它已经有点资源限制了。

有没有办法（通过注册表或其他方式）重置模拟器设置？我需要将分辨率调低，这样我才能真正使用它来测试我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:08:54.283

这绝对不是最佳的，但如果你绝望，我找到了一个解决方案。我决定修复 VS 2012 以解决其他一些问题，它似乎已经重置了模拟器设置。

这进一步证实了必须有一种简单的方法来执行此操作，因为安装程序可能只是将默认注册表设置与文件的新副本复制到位。因此，我暂时不会接受这个答案，以便其他人可以看到这一点并希望提供更好的答案。

# html - 为什么父 Div 被链接？

> ID：15511980
> 
> 赞同：0
> 
> 时间：2013-03-19T22:45:45.933
> 
> 标签：html, css, hyperlink

我在另一个里面有一个 Div。子 Div 是一个链接启动 javascript 动画（通过动画 css 属性），我放入包装器的原因是因为我想让孩子居中并浮动。因此，子 Div 进行居中，父级进行浮动。原因是你不能`margin:0 auto;`用`float:`财产做事。

现在我的问题是，当我在子 Div 周围放置链接时，父 Div 也会被链接！这一刻真的让我很困惑。这发生在 Chrome 和 Firefox 中，但奇怪的是它不会在 IE 中发生！有人知道出了什么问题吗？

父母是`#eastereggwrapper`，孩子是`#eastereggbutton`。以下是代码片段，我的 HTML：

```
<div id="eastereggwrapper">
  <a href="" class="secret" >
    <div id="eastereggbutton" >
      Don't Click Me
    </div>
  </a>
</div> 
```

和我的 CSS：

```
#eastereggwrapper {
    background-color: black;
    bottom: 0px;
    width: 100%;
    position: relative;
    float:left;
}

#eastereggbutton {
    margin:0 auto;
    width:10%; 
    height:50px;
    background-color:green;
    color: black;
    font-size:18px;
    font-family:Tahoma, Geneva, sans-serif;
    text-align:center;
} 
```

PS 未定义秘密类，它用于 Javascript 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:51:32.573

尝试以下两种方法之一：

1.  放置`<a>`第二个div的内部
2.  `<a>`用标签替换子 div ：

**HTML**

```
<div id="eastereggwrapper">
  <a href="" class="secret" id="eastereggbutton">
      Don't Click Me
  </a>
</div> 
```

**CSS**

```
#eastereggbutton {
    display: block;
    margin:0 auto;
    width:10%; 
    height:50px;
    background-color:green;
    color: black;
    font-size:18px;
    font-family:Tahoma, Geneva, sans-serif;
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:58:10.187

只需添加

```
#eastereggwrapper > a {
    width:10%;
    display: block;
    margin:auto;
} 
```

到您的 CSS 并删除

```
margin:0 auto;
width:10%; 
```

来自#eastereggbutton 的属性

# c++ - 不匹配删除

> ID：15511982
> 
> 赞同：9
> 
> 时间：2013-03-19T22:45:51.103
> 
> 标签：c++, dynamic, valgrind, mismatch

我有实现人民和他的公司数据库的程序。我创建了指向类成员的指针的动态数组，而不是类成员的动态数组，因为它的复制速度更快。

我有可以工作的版本，但 valgrind 在析构函数中显示不匹配删除（删除数据库）

```
CCompany** db;

~CCompanyIndex ( void )
{
    for(unsigned i=0;i<len;i++)
    {
        /*cout<<"dealloc:"<<db[i]<<endl;*/
        delete db[i];
    }
    delete db;
}

CCompanyIndex ( void )
{
    max=1000;
    len=0;
    db=new CCompany*[max];
} 
```

我也用来添加

```
CCompany* newIt=new CCompany(oName,oAddr,cName,cAddr); 
```

所以我尝试了以下我认为正确的代码

```
~CCompanyIndex ( void )
{
    delete [] db;
} 
```

但是，通过添加方法分配的所有内存都不会被释放。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T22:48:46.107

第一个样本几乎是正确的。您正在`for`循环中删除每个元素，但随后您尝试访问`delete`该数组。

```
for(unsigned i=0;i<len;i++) { delete db[i]; }
delete db; 
```

它应该是：

```
for(unsigned i=0;i<len;i++) { delete db[i]; }
delete[] db; 
```

每当你使用`new ...[]`时，你就应该使用`delete[]`.

另外，不要忘记[三](https://stackoverflow.com/q/4172722/150634)（或[五](https://stackoverflow.com/q/4782757/150634)（或[零](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)））规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T22:49:57.720

你用错了`delete`。做这个：

```
CCompanyIndex::~CCompanyIndex()
{
    for(unsigned i=0; i<len;i++) delete db[i];
    delete [] db;
} 
```

注意`delete []`通话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:48:58.613

除了数组本身，您需要`delete db[i]`每个元素，因此析构函数都不正确。`delete[] db`

分配`new Foo[n]`的数组必须以数组形式释放`delete[]`，这就是`valgrind`不匹配新/删除的意思

# ruby-on-rails - 将主键追溯添加到表中

> ID：15511984
> 
> 赞同：1
> 
> 时间：2013-03-19T22:46:06.247
> 
> 标签：ruby-on-rails, activerecord

我为一个连接模型编写了一个迁移，它看起来像：

```
 create_table "project_memberships", :id => false, :force => true do |t|
    t.integer  "user_id"
    t.integer  "project_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "id"
  end 
```

我现在想强制创建ID。我必须删除表并重新创建它，还是可以编写一个迁移来删除这个约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:48:15.470

通过少量谷歌搜索...... [http://thinkwhere.wordpress.com/2009/05/09/adding-a-primary-key-id-to-table-in-rails/](http://thinkwhere.wordpress.com/2009/05/09/adding-a-primary-key-id-to-table-in-rails/)

生成一个空迁移：

```
rails generate migration AddIdToProjectMemberships 
```

并填写：

```
def change
    add_column :project_memberships, :id, :primary_key
end 
```

之前也有一个这样的问题..[如何在rails中的表中添加主键](https://stackoverflow.com/questions/9644509/how-to-add-a-primary-key-to-a-table-in-rails)

# groovy - 在 Geb/Spock 测试中检查 url

> ID：15511986
> 
> 赞同：1
> 
> 时间：2013-03-19T22:46:07.087
> 
> 标签：groovy, spock, geb

在我的Spock功能测试中，我想测试浏览器的当前位置不是某个url。我知道我可以做到：

```
try {
    at(PageWithUrlIDontWant)
    // do something
} catch (AssertionError) {
    // pass because this is the common branch
} 
```

但是，这是使用异常来控制分支。除此之外`at`，有没有办法检查浏览器的网址？我试过了`page.pageUrl`，`browser.pageUrl`但它们都是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:37:22.487

从 Geb 0.7.0 开始，`isAt()`类上有一个新方法`Browser`。`GebSpec`代理 methodMissing 对其`Browser`实例的调用，因此此方法在您的测试中可用。此方法返回 true/false 而不是抛出异常，应该公开。

例子：

```
def "navigating to GoodPage doesn't up at BadPage"() {
    when:
    to GoodPage

    then:
    !isAt(BadPage)
} 
```

# javascript - 更新窗口时未触发注册事件onunload

> ID：15511990
> 
> 赞同：0
> 
> 时间：2013-03-19T22:46:22.010
> 
> 标签：javascript, html, javascript-events

我有以下代码已经在工作：

```
popups[uuid] = window.open(url, popupConf[type].target, popupConf[type].string);
popups[uuid].focus();
$(popups[uuid]).load(function() {
    $(popups[uuid]).unload(function() {
        Stream.video.stop(uuid);
    });
}); 
```

我把它放在一个函数`Stream.video.play(url, popupConf);`上，我用一些链接上的事件调用它。一切正常，但问题是，如果我这样做：

```
Stream.video.play('a',{ /* conf */}); 
```

接着

```
Stream.video.play('a',{ /* conf */}); 
```

同样，它不能正常工作......它只在事件卸载后执行......

代码的两次执行具有相同的目标，因此窗口会按应有的方式更新。这很重要，因为我在窗口打开后注册其他内容，并且一旦窗口被卸载（即关闭或其中的数据发生更改），这些内容应该被取消注册。

在此先感谢您的帮助。

**编辑1：这是我遇到的问题：**

```
<a id="click">Click me</a><br />
<a id="otherClick">Click me</a>

$(function() {
    var myWindow;
    $('#click, #otherClick').click(function() {
        myWindow = window.open("about:blank","test","resizable=0,location=0,toolbar=0,height=150,width=150");
        $(myWindow).load(function() {
            $(myWindow).unload(function() {
                alert("closed");
            });
        });
    });
}); 
```

[http://jsfiddle.net/Sd8wt/](http://jsfiddle.net/Sd8wt/)

# maven - InvocationTargetException: javax/persistence/Persistence

> ID：15511991
> 
> 赞同：1
> 
> 时间：2013-03-19T22:46:29.333
> 
> 标签：maven, eclipselink, derby, pom.xml, persistence.xml

我试图按照“使用 GlassFish 3 开始 Java EE 6 平台”一书的第 2 章中的示例进行操作。我在 Windows 中使用 EclipseLink、Derby 和 Maven。我真的无法弄清楚这一点，并会感谢一些帮助！

我的 Main.java 类中的这一行`EntityManagerFactory emf = Persistence.createEntityManagerFactory("chapter02PU");`会生成以下错误：

```
 [INFO] Error stacktraces are turned on.
    [INFO] Scanning for projects...
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Building Chapter 02 - JPA 0.1
    [INFO] ------------------------------------------------------------------------
    [INFO] 
    [INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ chapter02 ---
    [debug] execute contextualize
    [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
    [INFO] Copying 1 resource
    [INFO] 
    [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ chapter02 ---
    [INFO] Nothing to compile - all classes are up to date
    [INFO] 
    [INFO] >>> exec-maven-plugin:1.2.1:java (default-cli) @ chapter02 >>>
    [INFO] 
    [INFO] <<< exec-maven-plugin:1.2.1:java (default-cli) @ chapter02 <<<
    [INFO] 
    [INFO] --- exec-maven-plugin:1.2.1:java (default-cli) @ chapter02 ---
    [WARNING] 
    java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.lang.NoClassDefFoundError: javax/persistence/Persistence
        at org.beginningee6.book.chapter02.Main.main(Main.java:22)
        ... 6 more
    Caused by: java.lang.ClassNotFoundException: javax.persistence.Persistence
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 7 more
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 8.390s
    [INFO] Finished at: Tue Mar 19 23:13:36 CET 2013
    [INFO] Final Memory: 8M/105M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project chapter02: An exception occured while executing the Java class. null: InvocationTargetException: javax/persistence/Persistence: javax.persistence.Persistence -> [Help 1]
    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project chapter02: An exception occured while executing the Java class. null
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    Caused by: org.apache.maven.plugin.MojoExecutionException: An exception occured while executing the Java class. null
        at org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:352)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
    Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.lang.NoClassDefFoundError: javax/persistence/Persistence
        at org.beginningee6.book.chapter02.Main.main(Main.java:22)
        ... 6 more
    Caused by: java.lang.ClassNotFoundException: javax.persistence.Persistence
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 7 more
    [ERROR] 
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR] 
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

这是我的 Main.java 类：

```
package org.beginningee6.book.chapter02;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

public class Main {

    public static void main(String[] args) {

        Book book = new Book();
        book.setTitle("The Hitchhicker's Guide to the Galaxy");
        book.setPrice(12.5F);
        book.setDescription("SCience fiction comedy book");
        book.setIsbn("1-84023-742-2");
        book.setNbOfPage(354);
        book.setIllustrations(false);

        // Get en entity manager and a transaction
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("chapter02PU");
        //EntityManager em = emf.createEntityManager();

        //Persist the book to the database
        /*EntityTransaction tx = em.getTransaction();
        tx.begin();
        em.persist(book);
        tx.commit();

        em.close();
        emf.close();*/
    }

} 
```

* * *

这是我的 Book.java 类：

```
package org.beginningee6.book.chapter02;

import javax.persistence.*;

@Entity
@NamedQuery(name = "findAllBooks", query = "SELECT b FROM Book b")
public class Book {
    @Id
    @GeneratedValue
    private Long id;
    @Column(nullable = false)
    private String title;
    private Float price;
    @Column(length = 2000)
    private String description;
    private String isbn;
    private Integer nbOfPage;
    private Boolean illustrations;

    public Book() {

    }

//Plus getters and setter. 
```

* * *

这是我的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="chapter02PU" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>org.beginningee6.book.chapter02.Book</class>
        <properties>
            <property name="eclipselink.target-database" value="DERBY"/>
            <property name="eclipselink.ddl-generation" value="create-tables"/>
            <property name="eclipselink.logging.level" value="INFO"/>
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:derby:memory:chapter02DB;create=true"/> 
            <!-- <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/chapter02DB;create=true"/> -->
            <property name="javax.persistence.jdbc.user" value="APP"/>
            <property name="javax.persistence.jdbc.password" value="APP"/>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

这是我的 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

        <modelVersion>4.0.0</modelVersion>
        <groupId>org.beginningee6.book</groupId>
        <artifactId>chapter02</artifactId>
        <version>0.1</version>
        <name>Chapter 02 - JPA</name>    

        <dependencies>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>javax.persistence</artifactId>
                <version>2.0.0</version>
                <scope>provided</scope>
            </dependency> 
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>eclipselink</artifactId>
                <version>2.4.0</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.derby</groupId>
                <artifactId>derbyclient</artifactId>
                <version>10.8.2.2</version>
            </dependency>
            <dependency>
                <groupId>org.apache.derby</groupId>
                <artifactId>derby</artifactId>
                <version>10.8.2.2</version>
            </dependency>
        </dependencies>

</project> 
```

* * *

这是我在 Eclipse 中的文件结构：

```
JavaEEAPress\src\main\java\org\beginningee6\book\chapter02\Book.java
JavaEEAPress\src\main\java\org\beginningee6\book\chapter02\Main.java
JavaEEAPress\src\main\resources\META-INF\persistence.xml
JavaEEAPress\pom.xml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:57:52.010

`provided`您在持久性库上指定了一个范围。

```
<dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>javax.persistence</artifactId>
    <version>2.0.0</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>eclipselink</artifactId>
    <version>2.4.0</version>
    <scope>provided</scope>
</dependency> 
```

这基本上告诉 Maven '为了编译的目的，使用这些库，但不要将它们包含在我的最终工件中，因为它们最终将通过其他方式提供'。我确定您正在遵循的教程以这种方式定义它们，因为预计您会将代码部署到要执行的应用程序服务器。在这种情况下，确实提供了这些库。

但是，在这种情况下，您正在运行一个独立的 Java 应用程序，并且您*需要*明确地包含这些库。最简单的解决方法是更改​​范围 for`org.eclipse.persistence:javax.persistence`和`org.eclipse.persistence:eclipselink`from `provided`to `runtime`。但前提是您从不打算将示例部署到应用程序服务器。更好的选择是定义运行独立代码的配置文件：

```
<profiles>
    <profile>
        <id>standalone</id>
        <dependencies>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>javax.persistence</artifactId>
                <version>2.0.0</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>eclipselink</artifactId>
                <version>2.4.0</version>
                <scope>provided</scope>
            </dependency>
        </dependencies>
    </profile>
</profiles> 
```

这将通过使用配置文件选项执行 Maven 来激活：

> mvn clean install -Pstandalone

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T09:29:57.043

我也遇到了你的问题，但我解决了。我换了罐子，问题就消失了，也许罐子彼此不兼容。

# c# - Selecting all nodes containing text with XPath

> ID：15511992
> 
> 赞同：3
> 
> 时间：2013-03-19T22:46:33.377
> 
> 标签：c#, xpath, html-agility-pack

I have been struggling to resolve this problem I am having over the past couple of days. Say, I want to get all the text() from a HTML document, however I only want to know of and retrieve of the XPath of the node that contains text data. Example:

```
 foreach (var textNode in node.SelectNodes(".//text()")) 
 //do stuff here 
```

However, when it comes to retrieving the XPath of the textNode using `textNode.XPath`, I get the full XPath including the `#text` node:

`/html[1]/body[1]/div[1]/a[1]/#text`

Yet I only want the containing node of the text, for example:

`/html[1]/body[1]/div[1]/a[1]`

Could anyone point me toward a better XPath solution to retrieve all nodes that contains text but only retrieve the XPath up until the containing node?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:59:13.403

**Instead of**:

```
.//text() 
```

**use**:

```
.//*[normalize-space(text())] 
```

This selects all "leaf-elements"-descendants of the context (current) node that have at least one non-whitespace-only text node child.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:44:48.027

Why don't you

```
string[] elements = getXPath(textNode).Split(new char[1] { '/' });
return String.Join("/", elements, 0, elements.Length-2); 
```

# css - 浮动 div 问题移动到新行

> ID：15511994
> 
> 赞同：1
> 
> 时间：2013-03-19T22:46:43.620
> 
> 标签：css

```
<div style="float: left"><a href="url" title="title">
<img src="/name.png" /></a></div>
<div style="text-align: right"><img src="/strip.png" /></div> 
```

当页面在一行上不够宽时，如何让 /strip.png 移动到 /name.png 后面。目前 /strip.png 进入新行。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:53:15.957

您需要浮动：正确的第二个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:28:58.527

```
<div style="display: -webkit-flex;
            display: flex;
            -webkit-justify-content: space-between;
            justify-content: space-between;
            -webkit-flex-flow: row wrap;
            flex-flow: row wrap;" >
  <div>
    <a href="url" title="title"><img src="/name.png" /></a>
  </div>
  <div><img src="/strip.png" /></div>
</div> 
```

[http://jsfiddle.net/33XZ4/](http://jsfiddle.net/33XZ4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:34:51.930

如果您希望两个 div 元素占据相同的空间（即一个在另一个前面），您只能使用绝对定位来执行此操作。你也可以用背景来做，让浮动的 div 成为另一个 div 的孩子，但我认为这实际上会更复杂。在您的简单示例中，更改`float: left`为`position: absolute`就足够了。

[http://jsfiddle.net/ExplosionPIlls/HLNTC/1/](http://jsfiddle.net/ExplosionPIlls/HLNTC/1/)

您可能需要制作两个 div 的容器，`position: relative`以便绝对定位的 div 播放得很好。

# c++ - 指向尚未初始化的成员

> ID：15511995
> 
> 赞同：2
> 
> 时间：2013-03-19T22:46:49.120
> 
> 标签：c++, pointers, inheritance, member

我已经问过[这个](https://stackoverflow.com/questions/15384746/member-pointer-to-member-object-and-declaration-order)问题。我现在的问题是这是***如何***工作的？详细地说，我怎样才能指向一个尚未初始化的对象。我已经制作了这个 MWE，它表明该对象是创建的副本而不是分配的副本。即该对象尚未初始化但我能够指向它。

```
#include <iostream>

class Foo {
public:
    int x;

    Foo(const Foo& ori_foo) {
        std::cout << "constructor" << std::endl;
        x = ori_foo.x;
    }

    Foo& operator = (const Foo& ori_foo) {
        std::cout << "operator =" << std::endl;
        x = ori_foo.x;
        return *this;
    }

    Foo(int new_x) {
        x = new_x;
    }
};

class BarParent {
public:
    Foo *p_foo;

    BarParent(Foo* new_p_foo) : p_foo(new_p_foo)
    {
       std::cout << (*new_p_foo).x << std::endl;
    }
};

class BarChild : public BarParent {
public:
    Foo foo;

    BarChild(Foo new_foo)
        :BarParent(&foo) //pointer to member not yet initialised
        ,foo(new_foo) // order of initilization POINT OF INTEREST
        {}
};

int main()  {
    Foo foo(101);

    BarChild bar(foo);

    std::cout << bar.p_foo->x << std::endl;
std::cout << bar.foo.x << std::endl;
} 
```

输出：

```
constructor
0
constructor
101
101 
```

不要害怕了解如何处理内存的细节。而且，每个成员都居住在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:07:34.067

不要将初始化误认为是分配。BarChild::foo 将在调用构造函数之前分配，因为它存储在适当的位置，因此将有一个明确定义的位置供 BarParent::p_foo 指向。Foo 的构造函数将初始化 BarChild::foo，但只要您在调用构造函数之前不尝试从 BarChild::foo 读取，您就不会注意到排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T23:07:25.897

在这一行

```
BarChild bar(foo); 
```

编译器为对象保留足够的堆栈空间，`BarChild`然后调用构造函数开始对象的生命周期。在对象中，`foo`成员具有固定的偏移量，每个`BarChild`对象在其中都有一个`foo`位于相同偏移量的成员，因此由于`this`指针在构造函数中具有已知地址（它是`bar`堆栈上的地址），`this->foo`因此也位于已知地址，即使该地址处的内存尚未初始化。初始化每个成员时，`BarChild`对象不会“变大”，它的大小是固定的，并且所有成员的空间在初始化之前已经“保留”。

这有点类似于：

```
 char raw_memory[sizeof(Foo)];  // define block of uninitialized memory
 char* addr = raw_memory;       // take address of uninitialized memory
 new (raw_memory) Foo;          // initialize memory 
```

该对象还不存在，使用它是无效的，但它的地址在它被初始化之前是已知的。

# javascript - Meteor Publish 返回空光标

> ID：15511996
> 
> 赞同：0
> 
> 时间：2013-03-19T22:46:49.243
> 
> 标签：javascript, model-view-controller, backbone.js, meteor

我正在使用 Backbone.js 来路由配置文件视图，以便我可以查看属于 /user 的数据，并且该部分工作正常。我能够根据用户名生成一个 _id 并将其传递给服务器发布函数，该函数将其记录下来。但是，当我在 subscribe 函数中将结果记录回客户端时，我的结果如下所示：

对象{停止：功能，准备：功能}

```
//Client Side
Template.userquery.userproject = function() {
    var query = Session.get('userquery');
    var user = Meteor.users.findOne({username: query});
    if (user) {
        console.log(user._id); //(works)
        campaigns = Meteor.subscribe('userquery', user._id, function() {
            console.log('ready'); //(works)
        });
        console.log(campaigns); //(returns Object {stop: function, ready: function})
        return campaigns;
    }
}
//Server Side
Meteor.publish('userquery', function(userid) {
    console.log('break');
    console.log(userid); //(I get userid in Terminal)
    var campaigns = Campaigns.find({owner: userid}, {fields: {owner: 1, name: 1}});
    if (campaigns) {
        console.log(campaigns);
        return campaigns;
    }
}); 
```

我在这个功能中遗漏了什么吗？我关闭了自动发布，因为它生成了我的搜索两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:10:12.897

`Meteor.subscribe`，[根据文档](http://docs.meteor.com/#meteor_subscribe)，“返回提供 stop() 和 ready() 方法的句柄。” 所以你看到的行为是有意的。

# php - NOT NULL 值的 SELECT 语句返回 NULL 值。

> ID：15511998
> 
> 赞同：1
> 
> 时间：2013-03-19T22:46:55.870
> 
> 标签：php, mysql

我有使用 a 获取值`$_POST`然后插入数据库的 PHP 代码。除了 等之外，所有字段都是基于输入的`CU00`，因为它表示主键。

现在假设用户只输入一行：

```
$ sql="INSERT INTO weekly
VALUES
 ('$_POST[uactual]','$_POST[utarget]','CU001','$a1','$_POST[ucomment]',NOW())
,('$_POST[uactual2]','$_POST[utarget2]','CU002','$a2','$_POST[ucomment2]',NOW())
,('$_POST[uactual3]','$_POST[utarget3]','CU003','$a3','$_POST[ucomment3]',NOW())
,('$_POST[dactual]','$_POST[dtarget]','CD001','$b1','$_POST[dcomment]',NOW())
,('$_POST[dactual2]','$_POST[dtarget2]','CD002','$b2','$_POST[dcomment2]',NOW())
,('$_POST[dactual3]','$_POST[dtarget3]','CD003','$b3','$_POST[dcomment3]',NOW())
,('$_POST[iactual]','$_POST[itarget]','CI001','$c1','$_POST[icomment]',NOW())
,('$_POST[iactual2]','$_POST[itarget2]','CI002','$c2','$_POST[icomment2]',NOW())
,('$_POST[iactual3]','$_POST[itarget3]','CI003','$c3','$_POST[icomment3]',NOW())
,('$_POST[ractual]','$_POST[rtarget]','CR001','$d1','$_POST[rcomment]',NOW())
,('$_POST[ractual2]','$_POST[rtarget2]','CR002','$d2','$_POST[rcomment2]',NOW())
,('$_POST[ractual3]','$_POST[rtarget3]','CR003','$d3','$_POST[rcomment3]',NOW())"; 
```

SQL 表

```
ACTUAL|TARGET|KEY |SIGNAL |TIME 
NULL    NULL  CU001 NULL   00:00
NULL    NULL  CU002 NULL   00:00
NULL    NULL  CU003 NULL   00:00
NULL    NULL  CU004 NULL   00:00
100      200  CU005  300   00:00 
```

我想做一个选择，只选择带有信号的行。但是当我做一个：

```
 SELECT *
    FROM TABLE
    WHERE 
    'signal' IS NOT NULL 
```

我得到所有返回的行。好像我的表中没有 NULL 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:48:26.663

```
 SELECT *
    FROM TABLE
    WHERE 
    signal IS NOT NULL 
```

`'signal'`只是字符串文字，确实是`NOT NULL`. 您可能的意思是 ` 而不是 '。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:57:29.110

您正在将空字符串放入数据库中。

做这个：

```
(empty($_POST['uactual']) ? 'NULL' : '\'' . $_POST['uactual'] . '\'') 
```

对于所有`$_POST`变量。然后你可以确定会有 NULL 值。

请不要这样做：`$_POST[uactual]`！PHP 将首先搜索定义的 val！始终`$_POST['uactual']`使用 '！

另外，您的选择是错误的。`不是'。如果你不相信做这样的查询：

```
SELECT 'signal' FROM TABLE 
```

这是对的：

```
SELECT `signal` FROM TABLE or
SELECT signal FROM TABLE 
```

这将返回字符串“信号”，而不是“信号”列。

```
 WHERE 
    'signal' IS NOT NULL 
```

这将永远是`true`！这就是它返回整个数据的原因。然后你犯了2个错误：]在插入和选择数据时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:49:14.577

您没有插入任何 NULL。您最多插入空字符串。

此外，您应该对您的输入进行一些验证。