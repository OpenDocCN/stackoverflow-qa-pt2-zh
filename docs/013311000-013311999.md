# StackOverflow 问答 13311000-13311999

# javascript - 获取前 3 个查看对象 mongoose 的 ObjectID

> ID：13311004
> 
> 赞同：0
> 
> 时间：2012-11-09T15:32:31.713
> 
> 标签：javascript, mysql, mongodb, mongoose

我要做的是获取数据库中所有文档的 ObjectId，因为这是猫鼬中“对象”的唯一标识符。这是等效的 SQL：

`select _id from project order by viewCount desc limit 3`

**问：什么是等效的猫鼬查询？**

以下是否正确：

`ProjectModel.find({id}).sort({viewCount: -1}).limit(3).exec( function(err, projects) { ... } );`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:59:22.840

```
ProjectModel.find().sort({viewCount: -1}).select({_id: 1}).limit(3).exec(
    function(err, projects) {
        ...
    }
); 
```

翻译为：查找所有按`viewCount`降序排序的文档，从每个文档中选择`_id`字段，并将结果限制为前 3 个文档。

# jsf - JSF：轮询服务器，渲染按钮/链接，因此用户可以刷新视图

> ID：13311009
> 
> 赞同：0
> 
> 时间：2012-11-09T15:32:40.060
> 
> 标签：jsf, jsf-2, primefaces, long-polling

我的 JSF/PrimeFaces Web 应用程序中最受欢迎的页面是一个带有 p:dataTable 的页面，其数据跨越日期范围（是的，FROM 和 TO p:calendar 与 p:inputText 和 p:autoComplete 组件一起用于过滤数据，何时/必要时）。

我想轮询所选日期（日期范围）的 dataTable 中列出的数据的变化。如果任何/每个用户的当前视图的数据已更改，我想呈现更新或刷新命令按钮/链接。

当给定用户对数据进行更新时，我想通知任何/所有其他会话中的其他用户此数据已更改，以及用户是否正在通过 dataTable（或详细视图），然后用户可以单击刷新按钮查看更新，但刷新按钮/链接仅通过 AJAX 轮询呈现。当然，我希望启动此“操作”或将某些标志（或 POJO 可能更合适）存储在服务器上（“列出 dataThatWasUpdated”），并且轮询将检查此“每个”用户（如轮询通知我已经拥有的实现，它运行良好）。在轮询期间，将扫描此列表，如果用户正在查看列表中的任何数据，则布尔值将设置在另一个 managedBean 上以呈现命令按钮/链接。

在不久或遥远的将来，在我迁移到 CDI 之后，我将通过 CDI 和通过 HTML（当然还有 Java EE CDI）的服务器发送事件 (SSE) 执行此操作，但现在我正在考虑使用或添加 p :poll 为用户提供刷新视图的机会/选项（因为数据已被另一个用户更新）。

请确认我的想法/设计和/或建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:51:19.080

`p:poll`很好，但是 WebSocket/Comet 框架可能会更好（并且添加起来并不复杂）。当您使用 Primefaces 时，您可以使用[Atmosphere](https://github.com/Atmosphere/atmosphere) ( `http://atmosphere.java.net`)。他们有一个`p:push`来实现这样的目标。

# c# - 如果有错误，在工具提示中获取验证错误，否则显示解释性工具提示（使用文本框样式）

> ID：13311010
> 
> 赞同：2
> 
> 时间：2012-11-09T15:32:40.640
> 
> 标签：c#, wpf, wpf-controls

**更新：找到解决方案，见下文！**

我正在尝试实现以下行为：

用户控件中有几个文本框。每个 TextBox-ToolTip 都应该显示一个特定的字符串，该字符串位于 Resource.resx 文件中。如果此 TextBox 的验证返回错误，则返回的错误字符串将显示在 ToolTip 中。这应该使用样式来完成。我目前的状态是，我可以显示特定的 Validation.Errors 和一个*默认*的工具提示，这对于每个使用样式的文本框都是相同的。

所以我的风格是：

```
<Style TargetType="{x:Type TextBox}"> 
    <Setter Property="ToolTip" Value="ExampleToolTip"/>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip"
                Value="{Binding RelativeSource={RelativeSource Self},
                 Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

使用这种风格，我得到了上述行为。

现在我想要样式部分

```
<Style TargetType="{x:Type TextBox}"> 
    <Setter Property="ToolTip" Value="ExampleToolTip"/>
    ...
</Style> 
```

是特定于文本框的。

我尝试为我的文本框编写一个附加属性，以便我可以定义第二个字符串，它应该用作标准工具提示。

附加属性代码如下所示：

```
public class TextBox2 : DependencyObject
    {
        public static void SetToolTipStandard(TextBox target, string value)
        {
            target.SetValue(ToolTipStandardProperty, value);
        }

        public static string GetToolTipStandard(TextBox target)
        {
            return (string)target.GetValue(ToolTipStandardProperty);
        }

        public static DependencyProperty ToolTipStandardProperty = DependencyProperty.RegisterAttached(
            "ToolTipStandard",
            typeof(string),
            typeof(TextBox),
            new PropertyMetadata());
    } 
```

现在我想在 XAML 中的 TextBoxes 上设置 TextBox2.ToolTipStandard 属性，并且 TextBox-Style 应该使用此属性来设置默认的 ToolTip-Text。我尝试了几种绑定组合，但没有成功。有没有办法实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:39:49.270

一个想法，您可以在提供错误工具提示的输入控件周围放置一个`ControlTemplate`带有0 的隐藏边框。`BorderThickness`如果出现错误，您将可见性设置为可见并显示错误工具提示。

这只是一个想法，但它可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:47:53.887

我设法通过命名我的所有文本框并将多个触发器添加到我的文本框样式来获得所需的行为。代码如下：

```
<UserControl.Resources>
    <Style TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <!--Here are the static resource strings for the normal-state ToolTip-->
                <Trigger Property="Name" Value="TextBox1">
                    <Setter Property="ToolTip" Value="{x:Static properties:UIStrings.TextBox1_ToolTip_String}"/>
                </Trigger>
                <Trigger Property="Name" Value="TextBox2">
                    <Setter Property="ToolTip" Value="{x:Static properties:UIStrings.TextBox2_ToolTip_String}"/>
                </Trigger> ...

                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources> 
```

# java - Java 是否具有与 C# 的 XML 属性等价的属性？

> ID：13311015
> 
> 赞同：1
> 
> 时间：2012-11-09T15:32:53.180
> 
> 标签：java, serialization

考虑这个 C# 代码：

```
[XmlRoot("RootElementName")]
public class GetReportStatusResponse
{
    ....
} 
```

此代码允许我将此类表示为`<RootElementName>`而不是`<GetReportStatusResponse>`在序列化为 XML 时。

Java有等价物吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:35:24.223

是的，它被称为[jaxb](/questions/tagged/jaxb "显示标记为“jaxb”的问题")：

```
@XmlRootElement(name="RootElementName")
public class GetReportStatusResponse {
  //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:37:05.080

你可以在这里查看[JAXB](http://docs.oracle.com/javase/tutorial/jaxb/intro/index.html)，它会支持你

# java - Java GUI printing blank page

> ID：13311017
> 
> 赞同：0
> 
> 时间：2012-11-09T15:33:08.347
> 
> 标签：java, swing, user-interface

I'm working with a Java GUI and I want to get a single panel to print. I get the prompt to come up, and I get something to print, but the problem is that something is just a blank page.

Below is all the relevant code:

```
public class DrawPanel extends JPanel implements MouseMotionListener, Printable { 
```

...

```
public void print(){
        PrinterJob job = PrinterJob.getPrinterJob();
        job.setPrintable(this);
        if(job.printDialog()){
            try{
                job.print();
            }catch(PrinterException e){
                System.err.print("Print failed: " + e);}

        }
    } 
```

...

```
public int print(Graphics graphics, PageFormat pageFormat, int pageIndex)
            throws PrinterException {
        if(pageIndex > 0){
            return NO_SUCH_PAGE;
        }

        Graphics2D g = (Graphics2D)graphics;
        g.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
        this.setDoubleBuffered(false);
        this.paint(g);

        return PAGE_EXISTS;

    } 
```

And then in another object which calls the function:

```
if(evt.getSource() == btn_print){

    p.print();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:48:30.480

```
 public class PrintView extends FrameView implements Printable,ActionListener{

public PrintView(SingleFrameApplication app) throws PrinterException {
    super(app);

    initComponents();

    jButton1.addActionListener(this);

    // status bar initialization - message timeout, idle icon and busy animation, etc
    ResourceMap resourceMap = getResourceMap();
    int messageTimeout = resourceMap.getInteger("StatusBar.messageTimeout");
    messageTimer = new Timer(messageTimeout, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            statusMessageLabel.setText("");
        }
    });
    messageTimer.setRepeats(false);
    int busyAnimationRate = resourceMap.getInteger("StatusBar.busyAnimationRate");
    for (int i = 0; i < busyIcons.length; i++) {
        busyIcons[i] = resourceMap.getIcon("StatusBar.busyIcons[" + i + "]");
    }
    busyIconTimer = new Timer(busyAnimationRate, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            busyIconIndex = (busyIconIndex + 1) % busyIcons.length;
            statusAnimationLabel.setIcon(busyIcons[busyIconIndex]);
        }
    });
    idleIcon = resourceMap.getIcon("StatusBar.idleIcon");
    statusAnimationLabel.setIcon(idleIcon);
    progressBar.setVisible(false);

    // connecting action tasks to status bar via TaskMonitor
    TaskMonitor taskMonitor = new TaskMonitor(getApplication().getContext());
    taskMonitor.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
        public void propertyChange(java.beans.PropertyChangeEvent evt) {
            String propertyName = evt.getPropertyName();
            if ("started".equals(propertyName)) {
                if (!busyIconTimer.isRunning()) {
                    statusAnimationLabel.setIcon(busyIcons[0]);
                    busyIconIndex = 0;
                    busyIconTimer.start();
                }
                progressBar.setVisible(true);
                progressBar.setIndeterminate(true);
            } else if ("done".equals(propertyName)) {
                busyIconTimer.stop();
                statusAnimationLabel.setIcon(idleIcon);
                progressBar.setVisible(false);
                progressBar.setValue(0);
            } else if ("message".equals(propertyName)) {
                String text = (String)(evt.getNewValue());
                statusMessageLabel.setText((text == null) ? "" : text);
                messageTimer.restart();
            } else if ("progress".equals(propertyName)) {
                int value = (Integer)(evt.getNewValue());
                progressBar.setVisible(true);
                progressBar.setIndeterminate(false);
                progressBar.setValue(value);
            }
        }
    });
}

@Action
public void showAboutBox() {
    if (aboutBox == null) {
        JFrame mainFrame = PrintApp.getApplication().getMainFrame();
        aboutBox = new PrintAboutBox(mainFrame);
        aboutBox.setLocationRelativeTo(mainFrame);
    }
    PrintApp.getApplication().show(aboutBox);
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    mainPanel = new javax.swing.JPanel();
    jButton1 = new javax.swing.JButton();
    jPanel1 = new javax.swing.JPanel();
    jLabel1 = new javax.swing.JLabel();
    jComboBox1 = new javax.swing.JComboBox();
    jSlider1 = new javax.swing.JSlider();
    jProgressBar1 = new javax.swing.JProgressBar();
    jPasswordField1 = new javax.swing.JPasswordField();
    menuBar = new javax.swing.JMenuBar();
    javax.swing.JMenu fileMenu = new javax.swing.JMenu();
    javax.swing.JMenuItem exitMenuItem = new javax.swing.JMenuItem();
    javax.swing.JMenu helpMenu = new javax.swing.JMenu();
    javax.swing.JMenuItem aboutMenuItem = new javax.swing.JMenuItem();
    statusPanel = new javax.swing.JPanel();
    javax.swing.JSeparator statusPanelSeparator = new javax.swing.JSeparator();
    statusMessageLabel = new javax.swing.JLabel();
    statusAnimationLabel = new javax.swing.JLabel();
    progressBar = new javax.swing.JProgressBar();

    mainPanel.setName("mainPanel"); // NOI18N

    org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(print.PrintApp.class).getContext().getResourceMap(PrintView.class);
    jButton1.setText(resourceMap.getString("jButton1.text")); // NOI18N
    jButton1.setName("jButton1"); // NOI18N

    jPanel1.setBorder(new javax.swing.border.MatteBorder(null));
    jPanel1.setName("jPanel1"); // NOI18N

    jLabel1.setText(resourceMap.getString("jLabel1.text")); // NOI18N
    jLabel1.setName("jLabel1"); // NOI18N

    jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "1", "2", "3", "4" }));
    jComboBox1.setName("jComboBox1"); // NOI18N

    jSlider1.setName("jSlider1"); // NOI18N

    jProgressBar1.setName("jProgressBar1"); // NOI18N

    jPasswordField1.setText(resourceMap.getString("jPasswordField1.text")); // NOI18N
    jPasswordField1.setName("jPasswordField1"); // NOI18N

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(371, 371, 371)
            .addComponent(jLabel1)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 280, Short.MAX_VALUE)
            .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(133, 133, 133))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addContainerGap(233, Short.MAX_VALUE)
            .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(185, 185, 185)
            .addComponent(jSlider1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(97, 97, 97))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addContainerGap(486, Short.MAX_VALUE)
            .addComponent(jPasswordField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(264, 264, 264))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(49, 49, 49)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel1))
            .addGap(62, 62, 62)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jSlider1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 60, Short.MAX_VALUE)
            .addComponent(jPasswordField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(32, 32, 32))
    );

    javax.swing.GroupLayout mainPanelLayout = new javax.swing.GroupLayout(mainPanel);
    mainPanel.setLayout(mainPanelLayout);
    mainPanelLayout.setHorizontalGroup(
        mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(mainPanelLayout.createSequentialGroup()
            .addGap(446, 446, 446)
            .addComponent(jButton1)
            .addContainerGap(466, Short.MAX_VALUE))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainPanelLayout.createSequentialGroup()
            .addContainerGap(66, Short.MAX_VALUE)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(46, 46, 46))
    );
    mainPanelLayout.setVerticalGroup(
        mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(mainPanelLayout.createSequentialGroup()
            .addGap(107, 107, 107)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 30, Short.MAX_VALUE)
            .addComponent(jButton1)
            .addGap(56, 56, 56))
    );

    menuBar.setName("menuBar"); // NOI18N

    fileMenu.setText(resourceMap.getString("fileMenu.text")); // NOI18N
    fileMenu.setName("fileMenu"); // NOI18N

    javax.swing.ActionMap actionMap = org.jdesktop.application.Application.getInstance(print.PrintApp.class).getContext().getActionMap(PrintView.class, this);
    exitMenuItem.setAction(actionMap.get("quit")); // NOI18N
    exitMenuItem.setName("exitMenuItem"); // NOI18N
    fileMenu.add(exitMenuItem);

    menuBar.add(fileMenu);

    helpMenu.setText(resourceMap.getString("helpMenu.text")); // NOI18N
    helpMenu.setName("helpMenu"); // NOI18N

    aboutMenuItem.setAction(actionMap.get("showAboutBox")); // NOI18N
    aboutMenuItem.setName("aboutMenuItem"); // NOI18N
    helpMenu.add(aboutMenuItem);

    menuBar.add(helpMenu);

    statusPanel.setName("statusPanel"); // NOI18N

    statusPanelSeparator.setName("statusPanelSeparator"); // NOI18N

    statusMessageLabel.setName("statusMessageLabel"); // NOI18N

    statusAnimationLabel.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
    statusAnimationLabel.setName("statusAnimationLabel"); // NOI18N

    progressBar.setName("progressBar"); // NOI18N

    javax.swing.GroupLayout statusPanelLayout = new javax.swing.GroupLayout(statusPanel);
    statusPanel.setLayout(statusPanelLayout);
    statusPanelLayout.setHorizontalGroup(
        statusPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(statusPanelSeparator, javax.swing.GroupLayout.DEFAULT_SIZE, 975, Short.MAX_VALUE)
        .addGroup(statusPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(statusMessageLabel)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 805, Short.MAX_VALUE)
            .addComponent(progressBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(statusAnimationLabel)
            .addContainerGap())
    );
    statusPanelLayout.setVerticalGroup(
        statusPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(statusPanelLayout.createSequentialGroup()
            .addComponent(statusPanelSeparator, javax.swing.GroupLayout.PREFERRED_SIZE, 2, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(statusPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(statusMessageLabel)
                .addComponent(statusAnimationLabel)
                .addComponent(progressBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(3, 3, 3))
    );

    setComponent(mainPanel);
    setMenuBar(menuBar);
    setStatusBar(statusPanel);
}// </editor-fold>                        

// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JComboBox jComboBox1;
private javax.swing.JLabel jLabel1;
private javax.swing.JPanel jPanel1;
private javax.swing.JPasswordField jPasswordField1;
private javax.swing.JProgressBar jProgressBar1;
private javax.swing.JSlider jSlider1;
private javax.swing.JPanel mainPanel;
private javax.swing.JMenuBar menuBar;
private javax.swing.JProgressBar progressBar;
private javax.swing.JLabel statusAnimationLabel;
private javax.swing.JLabel statusMessageLabel;
private javax.swing.JPanel statusPanel;
// End of variables declaration                   

private final Timer messageTimer;
private final Timer busyIconTimer;
private final Icon idleIcon;
private final Icon[] busyIcons = new Icon[15];
private int busyIconIndex = 0;

private JDialog aboutBox;
public void actionPerformed(ActionEvent e)
{
    if(e.getActionCommand().equals("PRINT"))
    {
            PrinterJob job = PrinterJob.getPrinterJob();
     job.setPrintable(this);
     boolean ok = job.printDialog();
         if (ok)
        {
            try
            {
              job.print();
            }
            catch (PrinterException ex)
            {
            /* The job did not successfully complete */
            }
        }
    }
}
public int print(Graphics g, PageFormat pf, int page) throws
                                                    PrinterException {

    if (page > 0) { /* We have only one page, and 'page' is zero-based */
        return NO_SUCH_PAGE;
    }

    /* User (0,0) is typically outside the imageable area, so we must
     * translate by the X and Y values in the PageFormat to avoid clipping
     */
    Graphics2D g2d = (Graphics2D)g;
    g2d.translate(pf.getImageableX(), pf.getImageableY());

    /* Now print the window and its visible contents */
   // jPanel1.printAll(g);
    jPanel1.paint(g2d);
    jPanel1.repaint();
    /* tell the caller that this page is part of the printed document */
    return PAGE_EXISTS;
 }
 } 
```

# makefile - Disable cflag in makefile

> ID：13311027
> 
> 赞同：0
> 
> 时间：2012-11-09T15:33:37.383
> 
> 标签：makefile

If a macro is being defined on the compiler, as:

```
cflag += -D name 
```

How could I disable this definition?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:53:58.793

如果要从中删除标志`cflag`，您可以：

1.  注释掉添加标志的行。
2.  重置`cflag`为排除标志的已知值。
3.  用于`$(subst)`从 中剥离标志`cflag`，如下所示：

    `cflag := $(subst -D name,,$(cflag)`

请注意，您也可以在`cflag`引用的位置进行替换。

# c# - 编写一个极其简单的解析器

> ID：13311029
> 
> 赞同：7
> 
> 时间：2012-11-09T15:33:39.467
> 
> 标签：c#, parsing, compiler-construction, scripting

我正在编写一个非常基本的 Web 服务器，它必须支持极其有限的特殊服务器端脚本语言。基本上我需要支持的是“echo”，只有 2 个操作数的加法/减法/乘法（无除法），一个简单的“date()”函数，输出日期和使用“&”运算符连接字符串。

一个例子可能是：

```
echo "Here is the date: " & date();
echo "9 x 15 = : & 9*15; 
```

我已经完成并创建了生成令牌所需的代码，但我不确定我是否使用了正确的令牌。

我为以下内容创建了令牌：

```
ECHO - The echo command
WHITESPACE - Any whitespace
STRING - A string inside quotations
DATE - The date() function
CONCAT - the & operator for concatenation
MATH - Any instance of binary operation (5+4, 9*2, 8-2, etc)
TERM - The terminal character (;) 
```

我特别不确定的数学。通常我看到人们专门为整数创建一个标记，然后也为每个运算符创建一个标记，但由于我只想允许二进制操作，我认为将它分组为一个标记是有意义的。如果我要单独做所有事情，我将不得不做一些额外的工作，以确保我永远不会接受“5+4+1”。

所以问题 1 是我在正确的轨道上使用哪些令牌？

我的下一个问题是接下来如何处理这些标记以确保语法正确？我想到的方法基本上是说，“好吧，我知道我有这个令牌，这是一个基于当前令牌允许下一个令牌的列表。下一个令牌在列表中吗？”

基于此，我列出了我的所有标记以及哪些标记可以直接出现在它们之后（为简单起见，不包括空格）。

```
ECHO        ->      STRING|MATH|DATE
STRING      ->      TERM|CONCAT
MATH        ->      TERM|CONCAT
DATE        ->      TERM|CONCAT
CONCAT      ->      STRING|MATH|DATE 
```

问题是我完全不确定如何最好地实现这一点。真的，我还需要跟踪空格以确保标记之间有空格。但这意味着我必须一次向前看两个令牌，这变得更加令人生畏。我也不确定如何管理“有效的下一个令牌”而不只是 if 块的一些令人作呕的部分。我应该在尝试实际执行脚本之前检查有效的语法，还是应该一次完成所有操作并在遇到意外令牌时抛出错误？在这个简单的例子中，从左到右解析一切都会正常工作，没有真正的优先规则（除了 MATH 的东西，但这就是为什么我将它组合成一个标记的部分原因，即使感觉不对。）即便如此，我也不会'

在我关于编写解析器的研究中，我看到很多关于创建“accept()”和“expect()”函数的参考资料，但我找不到任何关于它们应该做什么或它们应该如何工作的清晰描述.

我想我只是不确定如何实现这一点，然后如何在一天结束时实际拿出一个结果字符串。

我是否朝着正确的方向前进，是否有人知道可以帮助我理解如何最好地实现这样简单的东西的资源？我需要手工完成，不能使用像 ANTLR 这样的工具。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:15:05.983

您需要做的第一件事是丢弃所有空格（字符串中的空格除外）。这样，当您将令牌添加到令牌列表时，您可以确定该列表仅包含有效令牌。例如，考虑以下语句：

```
echo "Here is the date: " & date(); 
```

我将开始标记化并首先根据空白分离**回声（是的，这里需要空白来分离它，但在那之后就没有用了）。**然后分词器遇到**双引号**并继续读取所有内容，直到找到**结束双引号**。**同样，我为&**、**date**和**()**创建单独的标记。

我的令牌列表现在包含以下令牌：

> **echo**
> **"这里是日期："**
> **&**
> **date**
> **()**

现在，在解析阶段，我们读取了这些标记。解析器循环遍历令牌列表中的每个令牌。它读取**echo**并检查它是否有效（基于您对语言的规则/功能）。它前进到下一个标记并查看它是**日期**、**字符串**还是**数学**。同样，它检查其余的令牌。如果在任何时候，一个令牌不应该在那里，你可以抛出一个错误，指示语法错误或其他东西。

对于数学语句标记化，仅将括号中包含的表达式与其余操作数和运算符分开组合。例如：9/3 + (7-3+1) 将具有标记 9、/、3、+ 和 (7-3+1)。由于每个令牌都有自己的优先级（您在令牌结构中定义），您可以从最高优先级令牌开始评估到最低令牌优先级。这样你就可以有优先的表达式。如果您仍然有困惑，请告诉我。我会给你写一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:52:33.680

`expect`是您的解析器为获取下一个令牌所做的事情，如果该令牌不是正确的后续令牌，则会失败。首先，您的解析器`expects` *ECHO*或*WHITESPACE*。这些是唯一有效的起始条款。看过“ECHO”后，您的解析器`expects`是*WHITESPACE|STRING|MATH|DATE*之一；其他任何事情都是错误。等等。

`accept`是当您的解析器看到完整的“语句”时 - *ECHO*，后跟有效的标记序列，然后是*TERM*。您的解析器现在有足够的信息来处理您的*ECHO*命令。

哦，手写解析器（尤其是简单的解析器）通常是令人作呕的`if`块集合（或类似语句的道德等价物`switch`）:) 更进一步的优雅将是某种状态机，更进一步的是像 yacc 或 GOLD Parser Generator 之类的语法生成器（反过来会为您生成丑陋`if`的`switch`, 和状态机）。

**编辑**以提供更多详细信息。

为了帮助理清职责，创建一个“词法分析器”，其工作是读取输入并生成标记。这涉及确定令牌的外观。一个简单的标记是“回声”这个词。一个不太容易的记号是数学运算；令牌将由一个或多个数字、一个运算符和一个或多个数字组成，中间没有空格。词法分析器会处理跳过空格，以及理解带引号的字符串和构成 date() 函数的字符。词法分析器将返回两件事——读取的标记类型和标记的值（例如，“MATH”和“9*15”）。

有了词法分析器来读取您的输入，解析器会使用标记并确保它们的顺序正确。首先你必须看到*ECHO*代币。如果不是，则失败并显示错误消息。之后，您必须看到*STRING*、*DATE*或*MATH*。如果不是，则失败并显示错误消息。之后，您循环，观察*TERM*或*CONCAT*后跟另一个*STRING*、*DATE*或*MATH*。如果您看到*TERM*，请打破循环。如果您既没有看到*TERM*也没有看到*CONCAT*，则失败并显示错误消息。

您可以在解析时处理 ECHO 命令，因为它是一个简单的语法。每次你找到一个*STRING*、*DATE*或*MATH*时，评估它并将它连接到你已经拥有的东西。当你找到*TERM*时，退出函数并返回构建的字符串。

问题？评论？煎蛋卷？:)

# python - 从类中创建全局变量（从字符串）

> ID：13311033
> 
> 赞同：3
> 
> 时间：2012-11-09T15:33:54.600
> 
> 标签：python, python-2.7

背景：我正在制作一个 Ren'py 游戏。值为 Character()。是的，我知道在这种情况下这是一个愚蠢的想法。

我需要从存在于类范围之外的类中的输入字符串创建一个变量：

```
class Test:
    def __init__(self):
        self.dict = {} # used elsewhere to give the inputs for the function below.

    def create_global_var(self, variable, value):
        # the equivalent of exec("global {0}; {0} = {1}".format(str(variable), str(value)))
        # other functions in the class that require this.

Test().create_global_var("abc", "123") # hence abc = 123 
```

我试过`vars()[]`,`globals()[variable] = value`等，但它们根本不起作用（它们甚至没有定义任何东西）**编辑：**这是我的问题。

我知道以下内容也同样有效，但我希望变量在正确的范围内：

```
setattr(self.__class__, variable, value) # d.abc = 123, now. but incorrect scope. 
```

如何在类中创建全局范围内的变量，使用字符串作为变量名，而不在 python 中使用属性或 exec？

是的，我会进行健全性检查。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T15:41:02.437

首先要做的事情：我们在 Python 中所谓的“全局”范围实际上是“模块”范围（从好的方面来说，它减少了使用全局变量的“邪恶”）。

然后，为了动态创建全局变量，虽然我仍然不明白为什么这比使用模块级字典更好，但只需执行以下操作：

```
globals()[variable] = value 
```

这会在当前模块中创建一个变量。如果您需要在调用该方法的模块上创建一个模块变量，您可以使用以下命令从调用者框架中查看全局字典：

```
from inspect import currentframe
currentframe(1).f_globals[variable] = name 
```

现在，这似乎特别无用，因为您可以创建一个具有动态名称的变量，但您不能动态访问它（除非再次使用全局字典）

即使在您的测试示例中，您也可以创建“abc”变量，将方法传递给字符串，但随后您必须使用硬编码的“abc”来访问它 - 语言本身旨在阻止这种情况（因此与 Javascript 不同，其中数组索引和对象属性是可互换的，而在 Python 中你有不同的映射对象）

我的建议是您使用模块级显式字典并将所有动态变量创建为键/值对：

```
names = {}
class Test(object):
    def __init__(self):
        self.dict = {} # used elsewhere to give the inputs for the function below.

    def create_global_var(self, variable, value):
         names[variable] = value 
```

（附带说明，在 Pyhton 2 中总是从“对象”继承你的类）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:40:13.183

你可以用`setattr(__builtins__, 'abc', '123')`这个。

请注意，这很可能是设计问题，您应该重新考虑设计。

# android - How to encode wav files to flac format on android

> ID：13311034
> 
> 赞同：3
> 
> 时间：2012-11-09T15:33:56.410
> 
> 标签：android, audio, encoding, wav, flac

I have a bytearray that holds an wav audio stream.

Is there a way on android system to convert the wav file to a flac file?

I found some example code from FlacEncoder library but this library assumes as far as I see the use of some audio classes from javax.

These are not available on android.

Is there some other library or some example code for android?

Thanks!

# wordpress - .htaccess 重定向所有页面，除了少数页面重定向到特定页面

> ID：13311041
> 
> 赞同：4
> 
> 时间：2012-11-09T15:34:32.023
> 
> 标签：wordpress, .htaccess

在这里搜索了很多帖子后，我发现没有运气，它们略有不同，但我现在无法处理。请原谅我。这是我尝试过的帖子：

*   [如何将所有网址重定向到apache中的新域，除了一个](https://stackoverflow.com/questions/10629430/how-to-redirect-all-urls-to-a-new-domain-in-apache-except-one)
*   [.htaccess 规则重定向所有页面，除了少数提供的页面](https://stackoverflow.com/questions/12864366/htaccess-rule-redirect-all-pages-except-a-few-provided-ones)
*   [如何 301 将所有页面从一个域重定向到另一个域上的单个页面](https://stackoverflow.com/questions/3959477/how-to-301-redirect-all-pages-from-one-domain-to-one-single-page-on-a-different)

这是我想要获得的：

*   www.olddomain.com 中的所有 url 永久重定向到 www.exampledomain.com/page，
*   并且在 www.olddomain.com 中有一个页面应该重定向到 www.exampledomain.com/pagesample

*请注意*：旧的 olddomain.com 除了索引和这个 htaccess 之外没有其他文件，而 www.exampledomain.com 是一个 wordpress 站点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:54:06.733

我对这句话有点困惑：

> www.olddomain.com 有一个页面将被重定向

我假设您的意思是 www.olddomain.com/page 重定向到 www.exampledomain.com/pagesample

```
RewriteEngine On

RewriteCond %{HTTP_HOST} .*olddomain\.com$
RewriteCond %{REQUEST_URI} /page/
RewriteRule ^ http://www.exampledomain.com/pagesample [L,R=301]

RewriteCond %{HTTP_HOST} .*olddomain\.com$
RewriteRule ^(.*) http://www.exampledomain.com/page/$1 [L,R=301] 
```

# android - Is there a way to add a "name" to an ACTION_CALL intent in android?

> ID：13311050
> 
> 赞同：0
> 
> 时间：2012-11-09T15:35:13.853
> 
> 标签：android, android-intent, phone-call

Here's a code snippet of what I have:

```
 call_phone = new Intent(Intent.ACTION_CALL);
 call_phone.setData(Uri.parse(parameter)); // parameter is a phone number tel:someNumber
 con.startActivity(call_phone); 
```

Since the phone number is not listed in my actual contacts - I just wanted to know if there was a way to pass a putExtra or a setName or something along those lines - that would let me make the dialer display any name I want to call - along with the number?

I have looked around on stack overflow and on the android developer website - but can't find anything specific like setting the name, setting the number is all over the place.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:43:37.190

抱歉，如果此答案没有帮助，但是：

捕获`"ACTION_CALL"`意图的是电话应用程序`Action`。由于这是一个特定于设备的应用程序，因此可能会有所不同。

快速谷歌我找不到任何关于它接受什么额外的信息，但我想注入“名称”可能被认为是一个安全漏洞，因此不会成为应用程序的一部分（但我不确定）。

但是，为您的应用程序授予添加联系人的权限和功能（因此将名称与数字相关联）是完全可能的，并且有很多关于如何与联系人交互的示例`ContentProvider`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:49:22.233

由于android规范没有提到这个意图的名称参数，我不鼓励使用它。[医生在这里](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL)

文档还提到大多数应用程序应该 ACTION_DIAL，因为 ACTION_CALL 可能对哪些应用程序可以调用它有一些限制......

# wpf - WPF, Validation.ErrorTemplate and Windows Phone

> ID：13311051
> 
> 赞同：0
> 
> 时间：2012-11-09T15:35:15.410
> 
> 标签：wpf, windows-phone-7, mvvm

I'm develepoing a Windows Phone application, and I need to validate some user inputs in text boxs. Here the XAML of one of these textbox:

```
<TextBox 
  Name="times" 
  Grid.Row="1" 
  Height="80"
  Text="{Binding UpdateSourceTrigger=Explicit, 
    Mode=TwoWay, 
    Path=orari,
    ValidatesOnDataErrors=True, 
    ValidatesOnExceptions=True, 
    NotifyOnValidationError=true}" 
  TextChanged="TextBoxChangedHandler"  
/> 
```

Using BreakPoints I'm sure the IDataError finds the error, but the TextBox appereance doesn't change. I've read I should use Validate.ErrorTemplate in the XAML, but I don't find this option, pheraps it doesn't exist in Windows Phone? How can I do to change the style of the textbox if the input is not valid? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:52:18.690

很难从您发布的内容中分辨出来，但这是我的一些代码示例，它们执行非常相似的操作，也许它可以帮助您找到错误。

我要验证的文本框要使用的样式在发生错误时会显示一个红色框。

```
<Style x:Key="ValidationTextBox" TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <Border BorderBrush="Red" BorderThickness="1">
                    <AdornedElementPlaceholder />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip"
              Value="{Binding RelativeSource={RelativeSource Self},
              Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

文本框本身

```
<TextBox Style="{StaticResource ValidationTextBox}">
    <TextBox.Text>
        <Binding Path="Description" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <rules:MandatoryInputRule ValidatesOnTargetUpdated="True" />
                <rules:IllegalCharsRule ValidatesOnTargetUpdated="True" />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

示例验证规则

```
class IllegalCharsRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        if (value != null)
        {
            string input = value as string;

            if (input.Contains(",") || input.Contains("/") || input.Contains(@"\") || input.Contains(".") || input.Contains("\"") || input.Contains("'"))
                return new ValidationResult(false, "Validation error. Illegal characters.");
        }

        return new ValidationResult(true, null);
    }
} 
```

# c# - How to get data off of a character

> ID：13311057
> 
> 赞同：7
> 
> 时间：2012-11-09T15:35:33.223
> 
> 标签：c#, utf-8, unity3d, .net-assembly, google-translate

I am working on a project in Unity which uses Assembly C#. I try to get special character such as é, but in the console it just displays a blank character: "". For instance translating "How are you?" Should return "Cómo Estás?", but it returns "Cmo Ests". I put the return string "Cmo Ests" in a character array and realized that it is a non-null blank character. I am using Encoding.UTF8, and when I do:

```
char ch = '\u00e9';
print (ch); 
```

It will print "é". I have tried getting the bytes off of a given string using:

```
byte[] utf8bytes = System.Text.Encoding.UTF8.GetBytes(temp); 
```

While translating "How are you?", it will return a byte string, but for the special characters such as é, I get the series of bytes 239, 191, 189, which is a replacement character.

What type of information do I need to retrieve from the characters in order to accurately determining what character it is? Do I need to do something with the information that Google gives me, or is it something else? I am need a general case that I can place in my program and will work for any input string. If anyone can help, it would be greatly appreciated.

Here is the code that is referenced:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using UnityEngine;
using System.Collections;
using System.Net;
using HtmlAgilityPack;

public class Dictionary{
string[] formatParams;
HtmlDocument doc;
string returnString;
char[] letters;
public char[] charString;
public Dictionary(){
    formatParams = new string[2];
    doc = new HtmlDocument();
    returnString = "";
}

public string Translate(String input, String languagePair, Encoding encoding)
    {
        formatParams[0]= input;
        formatParams[1]= languagePair;
        string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair={1}", formatParams);

        string result = String.Empty;

        using (WebClient webClient = new WebClient())
        {
            webClient.Encoding = encoding;
            result = webClient.DownloadString(url);
        }       
        doc.LoadHtml(result);
        input = alter (input);
        string temp = doc.DocumentNode.SelectSingleNode("//span[@title='"+input+"']").InnerText;
        charString = temp.ToCharArray();
        return temp;
    }
// Use this for initialization
void Start () {

}
string alter(string inputString){
    returnString = "";
    letters = inputString.ToCharArray();
    for(int i=0; i<inputString.Length;i++){
        if(letters[i]=='\''){
            returnString = returnString + "&#39;";  
        }else{
            returnString = returnString + letters[i];   
        }
    }
    return returnString;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:24:35.660

也许您应该使用另一个 API/URL。下面的这个函数使用了一个不同的 url，它返回 JSON 数据并且似乎工作得更好：

```
 public static string Translate(string input, string fromLanguage, string toLanguage)
    {
        using (WebClient webClient = new WebClient())
        {
            string url = string.Format("http://translate.google.com/translate_a/t?client=j&text={0}&sl={1}&tl={2}", Uri.EscapeUriString(input), fromLanguage, toLanguage);
            string result = webClient.DownloadString(url);

            // I used JavaScriptSerializer but another JSON parser would work
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            Dictionary<string, object> dic = (Dictionary<string, object>)serializer.DeserializeObject(result);
            Dictionary<string, object> sentences = (Dictionary<string, object>)((object[])dic["sentences"])[0];
            return (string)sentences["trans"];
        }
    } 
```

如果我在控制台应用程序中运行它：

```
 Console.WriteLine(Translate("How are you?", "en", "es")); 
```

它会显示

```
¿Cómo estás? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:38:50.037

你的方法有几个问题。首先UTF8编码是一种多字节编码。这意味着如果您使用任何非 ASCII 字符（字符代码 > 127），您将获得一系列特殊字符，向系统表明这是一个 Unicode 字符。所以实际上你的序列 239、191、189 表示单个字符，它不是 ASCII 字符。如果你使用 UTF16，那么你会得到固定大小的编码（2 字节编码），它实际上将一个字符映射到一个无符号的 short (0-65535)。

c#中的char类型是一个两字节的类型，所以它实际上是一个无符号的short。这与其他语言形成对比，例如 C/C++，其中 char 类型是 1 字节类型。

所以在你的情况下，除非你真的需要使用 byte[] 数组，否则你应该使用 char[] 数组。或者，如果您想对字符进行编码以便它们可以在 HTML 中使用，那么您只需遍历字符并检查字符代码是否 > 128，然后您可以将其替换为 &hex; 字符代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:09:42.043

我对 GoogleTranslate API 了解不多，但我的第一个想法是您遇到了 Unicode 规范化问题。

看看[`System.String.Normalize()`](http://msdn.microsoft.com/en-us/library/8eaxk1x2.aspx)它的朋友。

Unicode 非常复杂，所以我将过度简化！许多符号在 Unicode 中可以用不同的方式表示，即：“é”可以表示为“é”（一个字符），或者表示为“e”+“重音字符”（两个字符），或者，取决于出现的情况从 API 回来，完全是别的东西。

Normalize 函数会将您的字符串转换为具有相同文本含义的字符串，但可能是不同的二进制值，这可能会解决您的输出问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:42:23.733

我在我的一个项目中遇到了同样的问题 [语言资源本地化翻译]

我正在做同样的事情并且正在使用.. System.Text.Encoding.UTF8.GetBytes() 并且由于 utf8 编码正在接收特殊字符，例如结果字符串中的 239、191、189。

请看看我的解决方案...希望这会有所帮助

完全不要使用编码 Google 翻译将返回正确的 á ，因为它在字符串中是自我的。做一些字符串操作并按原样读取字符串......

**通用解决方案**[适用于谷歌支持的每种语言翻译]

```
try
{
    //Don't use UtF Encoding 
    // use default webclient encoding

    var url = String.Format("http://www.google.com/translate_t?hl=en&text={0}&langpair={1}", "►" + txtNewResourceValue.Text.Trim() + "◄", "en|" + item.Text.Substring(0, 2));                    

     var webClient = new WebClient();
     string result = webClient.DownloadString(url); //get all data from google translate in UTF8 coding..

      int start = result.IndexOf("id=result_box");
      int end = result.IndexOf("id=spell-place-holder");
      int length = end - start;
      result = result.Substring(start, length);
      result = reverseString(result);

      start = result.IndexOf(";8669#&");//◄
      end = result.IndexOf(";8569#&");  //►
      length = end - start;

      result = result.Substring(start +7 , length - 8);
      objDic2.Text =  reverseString(result);

       //hard code substring; finding the correct translation within the string.
        dictList.Add(objDic2);
}
catch (Exception ex)
 {
  lblMessages.InnerHtml = "<strong>Google translate exception occured no resource   saved..." + ex.Message + "</strong>";
                error = true;
}

public static string reverseString(string s)
{
    char[] arr = s.ToCharArray();
    Array.Reverse(arr);
    return new string(arr);

} 
```

正如您从代码中看到的那样，没有执行任何编码，我发送 2 个特殊键字符为“►”+ txtNewResourceValue.Text.Trim()+“◄”来确定从谷歌返回翻译的开始和结束。

我还检查了我的语言实用工具，我得到了“Cómo Estás？” 发送你好吗到谷歌翻译时... :)

最好的问候 [Shaz]

--------------------------已编辑---------- ---

公共字符串翻译（字符串输入，字符串语言对）{

```
 try
    {

        //Don't use UtF Encoding 
        // use default webclient encoding
        //input        [string to translate]
        //Languagepair [eg|es]

        var url = String.Format("http://www.google.com/translate_t?hl=en&text={0}&langpair={1}", "►" + input.Trim() + "◄", languagePair);

        var webClient = new WebClient();
        string result = webClient.DownloadString(url); //get all data from google translate 

        int start = result.IndexOf("id=result_box");
        int end = result.IndexOf("id=spell-place-holder");
        int length = end - start;
        result = result.Substring(start, length);
        result = reverseString(result);

        start = result.IndexOf(";8669#&");//◄
        end = result.IndexOf(";8569#&");  //►
        length = end - start;

        result = result.Substring(start + 7, length - 8);

        //return transalted string
        return reverseString(result); 

    }
    catch (Exception ex)
    {
        return "Google translate exception occured no resource   saved..." + ex.Message";

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T16:08:38.620

你实际上几乎拥有它。只需插入带有 \u 的编码字母即可。

```
string mystr = "C\u00f3mo Est\u00e1s?"; 
```

# ruby-on-rails - Rails3：为图形预计算/存储数据？

> ID：13311060
> 
> 赞同：0
> 
> 时间：2012-11-09T15:35:40.773
> 
> 标签：ruby-on-rails, graph, highcharts

我目前正在构建一个带有 highchart 和 highstock 的统计数据和图表的小型管理平台。现在，每次加载时，图表总是从数据库中获取数据。但是由于未来数据将大幅增长，因此效率非常低，并且会减慢数据库的速度。我现在的问题是存储或预先计算数据的最佳方法是什么，这样图表就不必在每次加载时都从数据库中获取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:44:41.440

如果数据量真的很大，并且您可以牺牲一些实时的呈现方式，那么最好的方法是在某个单独的数据库表中计算图表的数据并从中显示图表。您可以设置一个后台进程（使用[无论何时](https://github.com/javan/whenever)或[延迟作业](https://github.com/tobi/delayed_job)或任何您喜欢的）以使用新值定期更新预处理数据表。

另一种选择是通过您喜欢的任何方式缓存图表响应（使用内置的 Rails 缓存、编写自定义缓存等），以将相同的数据提供给大量用户，同时减少 DB 命中。

然而，总的来说，预处理似乎是赢家，因为统计表通常包含非常“稀疏”的数据，这些数据可以预先计算为更小的数据集以显示在图表上，但如果需要，还可以选择应用一些过滤/排序。

**编辑**只是忘了提到在数据库方面可能有一些优化空间。例如，如果您可以限制用户能够查看数据的时间段（= 限制每次使用时要查询的数量），那么正确的索引和数据库设置可以在没有中间人的情况下提供显着的性能，例如缓存或预计算。

# prolog - 运算符是，列表

> ID：13311067
> 
> 赞同：3
> 
> 时间：2012-11-09T15:35:55.720
> 
> 标签：prolog

我使用这个功能：

```
f(V):-V is [1,2,3,4,5]. 
```

但我收到一个错误：

```
ERROR: '.'/2: Type error: `[]' expected, found `[2,3,4,5]' ("x" must hold one character) 
```

需要修复什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:22:46.363

`is/2`中缀运算符用于计算算术表达式。

您似乎想将变量 V 与一个不是算术表达式的项（在本例中为列表）统一，因此您应该使用等号运算符 ( `=`)。

```
f(V):- V = [1,2,3,4,5]. 
```

或者直接在程序的头部统一：

```
f([1,2,3,4,5]). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:36:58.000

我认为您的代码表明 f/1 需要在一小组数字中枚举。如果这是真的，你应该改写

```
f(V) :- member(V, [1,2,3,4,5]). 
```

然后在调用`f(X)`X 时将绑定（回溯）列出的值。

# c++ - 构建项目删除lib文件

> ID：13311071
> 
> 赞同：2
> 
> 时间：2012-11-09T15:36:28.733
> 
> 标签：c++, c, visual-studio-2010, projects-and-solutions

我正在构建`SOFA Framework on VS2010`，解决方案由 68 个项目组成，发生了一件令人惊奇的事情`for instance`，如果我构建项目`A`，它会`A.lib`在 lib 文件夹中生成文件，当我构建项目`B`时，它会`B.lib`在 lib 文件夹中生成并删除`A.lib`，问题是项目`C`依赖于两者都`lib files`让我无法构建它，它总是给我链接无法打开的错误`A.lib`或`B.lib` 任何可以帮助我的人..谢谢

# java - 覆盖@autowired/@Inject Map 的键字符串 ?

> ID：13311073
> 
> 赞同：4
> 
> 时间：2012-11-09T15:36:35.190
> 
> 标签：java, spring, map, dependency-injection, inversion-of-control

我有几个 CustomerApiLink 类型的 Spring bean，说这些 bean 的名称分别是“ableCustomer”、“bravoCustomer”和“charlieCustomer”（这只是一个例子）。现在我通过

```
//DI through annotation
@Inject
private Map<String,CustomerApiLink> apis; 
```

但我发现默认情况下 Spring IoC 容器总是使用它们的名称作为映射键，我想覆盖它，以获得以下映射：

能够-> bean ref="ableCustomer";

bravo-> bean ref="bravoCustomer";

charlie-> bean ref="charlieCustomer";

是否可以通过注释来做到这一点？或者我必须在 xml 文件中创建另一个 util bean？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:46:05.103

我已经多次这样做了。我通常`@Inject`将一个`Set`我想要的对象的构造函数或设置器，并`Map`在那时创建一个。

```
public class MyObject {
    private Map<String, CustomerApiLink> apiLinks;

    @Inject
    public MyObject(Set<CustomerApiLink> apis) {
        apiLinks = new HashMap<String, CustomerApiLink>();
        for(CustomerApiLink api : apis) {
            apiLinks.put(api.getName(), api);
        }
    }
} 
```

当然，使用这种解决方案，它需要一种从`CustomerApiLink`对象中获取密钥的方法。`getName()`在这种情况下，我假设会出现一个名为的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:39:43.420

不需要 XML，但您可以注释 setter 方法而不是字段，并在方法中自己处理提供的映射。

```
@Inject
public void setApis(Map<String,CustomerApiLink> apis){
    this.apis = new HashMap<String,CustomerApiLink>();
    // now copy values from the incoming map to your internal map
    // using keys of your own choice
}
private Map<String,CustomerApiLink> apis; 
```

# button - 在 asp.net 2.0 中未触发按钮

> ID：13311075
> 
> 赞同：0
> 
> 时间：2012-11-09T15:36:47.860
> 
> 标签：button, postback, asp.net-2.0

这真的让我发疯了，该页面一直运行良好，但由于未知原因它停止触发按钮事件！任何按钮的事件！我只记得我将浏览器升级到 IE8，但即使与 IE 有任何关系，它也无法与 Firefox 一起使用。

我检查了生成的源代码，按钮部分说：

```
<input type="submit" name="TabContainer1$tpOrg$btnSaveOrg" value="Save" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;TabContainer1$tpOrg$btnSaveOrg&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="TabContainer1_tpOrg_btnSaveOrg" style="width:83px;" /> 
```

此按钮位于 TabContainer 内。

为了排除 TabContainer 的问题，我在 TabContainer 外创建了另一个按钮，生成的代码是：

```
<input type="submit" name="Button1" value="Button" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;Button1&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="Button1" /> 
```

是什么导致此处未触发按钮事件？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:59:27.913

当您使用提交按钮时，为什么需要使用 ONCLICK 事件？？？？

将您的按钮代码更改为

```
INSIDE TAB
<input type="submit" name="TabContainer1$tpOrg$btnSaveOrg" value="Save" id="TabContainer1_tpOrg_btnSaveOrg" style="width:83px;" />

OUTSIDE TAB
<input type="submit" name="Button1" value="Button"  id="Button1" /> 
```

# unix - 切换到第 x 个目录终端

> ID：13311080
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:37:12.380
> 
> 标签：unix, terminal, ls, cd

在 unix shell（特别是 Ubuntu）中有没有办法将目录更改为从 ls 命令打印的 xth 目录？我知道您可以通过多种方式对目录进行排序，但是使用 ls 的输出来获取第 x 个目录？

一个示例外壳：

```
$ ls
$ first_dir second_dir third_really_long_and_complex_dir 
```

我想通过传递 3（或正确数组格式的 2）进入third_really_long_and_complex_dir。我知道我可以简单地复制和粘贴，但如果我已经在使用键盘，那么如果我知道索引，输入“cdls 2”之类的东西会更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:12:10.650

交互式会话中的主要问题`cd`是您通常希望更改正在处理命令提示符的 shell 的当前目录。这意味着启动子shell（例如脚本）将无济于事，因为任何`cd`调用都不会影响父shell。

但是，根据您使用的 shell，您可能可以定义一个*函数*来执行此操作。例如在 bash 中：

```
function cdls() {
    # Save the current state of the nullglob option
    SHOPT=`shopt -p nullglob`

    # Make sure that */ expands to nothing when no directories are present
    shopt -s nullglob

    # Get a list of directories
    DIRS=(*/)

    # Restore the nullblob option state
    $SHOPT

    # cd using a zero-based index
    cd "${DIRS[$1]}"
} 
```

`ls`请注意，在此示例中，[出于多种原因](http://mywiki.wooledge.org/ParsingLs)，我绝对拒绝解析 的输出。相反，我让外壳本身检索目录列表（或目录链接）......

也就是说，我怀疑使用这个功能（或任何有这种效果的东西）是一种让自己陷入巨大混乱的好方法——比如`rm`在更改到错误的目录后使用。文件名自动完成已经足够危险了，不用强迫自己*数数*......

# objective-c - 基于 NSTableView 视图的“图像和文本表单元格视图”无法识别我的自定义 NSImageView 子类

> ID：13311083
> 
> 赞同：0
> 
> 时间：2012-11-09T15:37:24.377
> 
> 标签：objective-c, macos, cocoa, nstableview, nstableviewcell

1.  首先，我将我`NSTableView`的视图更改为基于视图并创建了一个 `IBOutlet`我的`NSTableView`.
2.  然后我把它拖到了`Image & Text Table Cell View`那里。
3.  之后，我`NSImageView`将该单元格视图中的那个更改为我的自定义`NSImageView`子类：'PVAsyncImageView'。
4.  我将它导入到我的 .h 中。

我有这个代码：

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    NSTableCellView *result = [tableView makeViewWithIdentifier:tableColumn.identifier owner:self];
    [[result imageView] downloadImageFromURL:@"lol"];
    return result;
} 
```

但它没有识别`downloadImageFromURL`（我的`NSImageView`子类中的一种方法）。Xcode 给我一个错误。
有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:42:45.487

1.  要么你的子类没有真正覆盖-init:，要么你没有正确加载你的子类..
2.  确保子类的方法名称没有拼写错误：例如，如果您在子类中有 -init: ，则仍会调用超类的 -init: 。
3.  您是在覆盖 -allocWithZone: 还是以某种方式？

# mysql - 跨分片的增量 ID

> ID：13311088
> 
> 赞同：3
> 
> 时间：2012-11-09T15:37:55.440
> 
> 标签：mysql, sharding

我正在构建自己的分片解决方案。每个 ID 的构造如下：

*   分片 ID（小整数）
*   表类型 id（小整数）
*   增量数（大整数）

前任。00001000010000000015

我使用虚拟分片，所以我可以将所有分片指向一个服务器，当我需要更多容量时，我只需添加另一台服务器并将一些虚拟分片指向该服务器，这样下次数据就会写入新的server 而不是第一个，尽管 read 将转到两台服务器，至少在我移动数据并在配置文件中更改它之前。

我的问题是增量数字。我希望那些是独一无二的。在 mysql 中为特定表使用 build int incremental id 并不好，因为我可能会将数据移动到另一台服务器，并且我可能有另一个数据使用其表的增量编号，因此我可能会得到重复的 ID。

**所以我的问题是**如何以可扩展的方式生成唯一 ID，而不使用将生成该 ID 的外部表，因为它不会扩展。我可以指出 Pinterest 如何[在这里](http://www.youtube.com/watch?v=aFJm1YlRr5Q)解决这个问题，这可能会有所帮助。我考虑给每个表一个增量值，该值在每个分片的不同值处跳过，所以它们在所有分片上的增量值永远不会相同。

我的想法是使用 Amazon RDS 构建我自己的分片解决方案，因此副本已经存在，平衡很容易，因为我可以利用从服务器提升为主服务器的优势，只需删除两台服务器上的数据并更改我的分片配置文件。我认为可以使用 Amazon RDS 构建一个可以轻松扩展的解决方案，而且它比今天其他公司提供的要便宜得多（我已经在这方面做了功课）。

我不想在我的 URL 中使用 GUID。我不介意使用长数字。Pinterest、Tumblr、Facebook 和许多其他人不使用 Guid，所以我知道他们是一个解决方案，只是想知道你认为哪种解决方案最有效，考虑到我想使用数字 ID。 

我正在用 ASP.NET C# 开发我的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:49:49.290

简而言之，你生成 ID 的方法注定要失败：如果你想生成唯一的 ID，你需要一个中央服务，这最终会成为一个瓶颈。

还包括分片 ID 味道不好；将数据移动到新分片时会发生什么？您是否必须更新所有 ID？

如果您想要一个可扩展的解决方案，您将不得不查看[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)或类似方法。

或者，您可以使用中央服务并为每次调用分配一个 ID 块（例如 10'000）。这样，您就不需要经常敲击中央服务，但如果服务失败，整个系统就会死机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T15:09:15.727

我使用 Int16 的分片 id 在创建表期间通过将分片 id 左移 (64 - 16) 并加 1 来为每个表设置 AUTO_INCREMENT 值。

下一个示例是使用 ServiceStack.ORMLite 库，但也可以在纯 SQL 中完成。当我需要创建一个新表时，我会遍历每个现有分片，打开与该分片的数据库连接（连接详细信息存储在查找表中）并调用此方法：

```
private static void CreateTableInShard<T>(IDbConnection db, bool overwrite = false, short shardId = 0) 
where T : IDataObject, new()
    {
        using (var trans = db.BeginTransaction())
        {
            db.CreateTable<T>(overwrite);

            if (overwrite)
            {
                var tableName = typeof(T).Name;
                var ai = ((long)shardId << 48) + 1;
                var sql = @"ALTER TABLE " + tableName + @"
                          AUTO_INCREMENT " + ai + @" ;";
                db.ExecuteSql(sql);
            }
            trans.Commit();
        }
    }

public interface IDataObject
    {
        long Id { get; set; }
    } 
```

我有许多最初在一台机器上的逻辑分片。当我必须进行扩展时，我必须将整个分片移动到另一台机器上，并在我的查找表中更改分片 ID 的连接字符串。但移动后的 ID 生成不会受到影响。

要通过 id 查询分片表，我可以获取分片 id `(id >> 48)`，然后查询特定的分片。

# sql - ? SP 中用于单字符通配符的字符

> ID：13311090
> 
> 赞同：0
> 
> 时间：2012-11-09T15:38:11.223
> 
> 标签：sql, sql-server, tsql

我有一个这样的 TSQL 存储过程：

```
ALTER PROCEDURE [dbo].[SearchEntityDataNew]
@SearchText varchar(100) = '*'  
AS
BEGIN    

   IF CHARINDEX('*', @SearchText) = 0
      SET @SearchText = '%' + @SearchText + '%' 
   ELSE
      SET @SearchText = REPLACE(@SearchText, '*', '%')

  SELECT 'Entity' as pagetype,EntityID,EntityData,EntityDataID 
    FROM EntityData 
    WHERE  EntityData LIKE @SearchText
  union all
  SELECT 'Property' as pagetype,PropertyID,PropertyValue,EntityDataID  
    FROM EntityDataProperty 
    WHERE  PropertyValue LIKE @SearchText
END 
```

我想允许`?`它等于`_`运算符。

我如何允许`?`这样如果用户键入 t_ 则返回“to”。如果用户键入 _t 则返回“It”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:47:22.560

您已经替换`*`为`%`，因此只需在您的变量中替换`?`为。`_``@SearchText`

# oracle - 使用 EF4 将 Int32 转换为 Oracle 编号 (5)

> ID：13311092
> 
> 赞同：7
> 
> 时间：2012-11-09T15:38:11.837
> 
> 标签：oracle, c#-4.0, entity-framework-4

我正在使用带有 oracle 10g 数据库的 EF 4（首先是数据库，完全由它生成的模型），但我遇到了一个字段的问题。

`NUMBER(5)`我的字段在我的数据库中定义为 a 。在我的模型中，EF 将其定义为`short`. 我的问题是我的一些值大于 32,767（最大短）我发现这篇文章：[实体框架生成 short 而不是 int](https://stackoverflow.com/questions/12339918/entity-framework-generates-short-instead-of-int)。我按照说明进行操作，我的模型现在包含 Int32 值。

但我有一个新问题：

```
Error 2019: Member Mapping specified is not valid. The type 'Edm.Int32[Nullable=True,DefaultValue=]' of member 'XX' in type 'Model.XXX' is not compatible with 'OracleEFProvider.number[Nullable=True,DefaultValue=,Precision=5,Scale=0]' of member 'XX' in type 'Model.Store.XXX'. 
```

此错误始终显示在 Visual Studio 的错误列表选项卡中。但是，构建成功，并且成功了一半：

*   读取数据库作品中的值
*   写一个值不起作用：99999 被转换为 -31073（见编辑）

有没有办法让它双向工作？

顺便说一句，有没有办法告诉实体将 int32 用于 oracle INTEGER 字段？它默认使用十进制。

**编辑**

在一步步调试的过程中，我发现为什么我的值是-31073。我忘记了这一行：

```
dao.Value = (short)dto.Value; 
```

我的两个值是 int，但简而言之，隐式转换是原点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T09:17:04.097

我找到了如何消除错误。

我以 xml 模式编辑了 edmx 文件，在 ssdl 部分找到了我的字段：

```
<Property Name="SIT_INSEE" Type="number" Precision="5" /> 
```

我删除了`Precision="5"`，警告消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T15:24:47.047

只是加我的两分钱，以防其他人遇到类似的问题。我注意到如果您将以下内容添加到 web.config 中的映射，然后从头开始重新创建 edmx 模型（删除它并从数据库重新生成），它可以解决其中的一些问题。简单地将值添加到 web.config 并没有解决任何问题（我猜可能会在幕后重新生成一些代码）。

```
 <oracle.dataaccess.client>
    <settings>
      <add name="int32" value="edmmapping number(9,0)" />
    </settings>
  </oracle.dataaccess.client> 
```

# collections - 集合模块 Python 中的计数器

> ID：13311094
> 
> 赞同：9
> 
> 时间：2012-11-09T15:38:21.753
> 
> 标签：collections, counter, python-import, importerror, python-2.6

我遇到了一个非常奇怪的问题。我正在尝试在集合模块中使用计数器功能。但是，我不断收到相同的错误消息

```
AttributeError: 'module' object has no attribute 'Counter' 
```

我之前尝试过使用它并且效果很好，但是现在由于某种原因，当我导入“集合”模块时，它的属性数量非常有限。

我努力了：

```
import collections   # when calling Counter I would then use collections.Counter()
import collections as collect # collect.Counter() 
```

对于这两个我不断收到属性错误。

我也试过

```
from collections import Counter 
```

在这种情况下，我得到：

```
ImportError: cannot import name Counter 
```

这些都在 ipython 界面和脚本中进行了测试（不导入其他任何东西，只是集合）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-09T15:39:39.677

该类`Counter`被添加到 Python 2.7 中的模块中。您很可能使用 Python 2.6 或更早版本。从[`collections.Counter()`文档](http://docs.python.org/2/library/collections.html#collections.Counter)中：

> *2.7 版中的新功能。*

在 python 2.5 或 2.6 上，请改用[这个 backport](http://code.activestate.com/recipes/576611-counter-class/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-16T08:15:29.117

安装时遇到同样的问题`pandas`。

**原因**：`Counter`仅支持 in`python2.7`和更高版本，在早期版本中不可用 -`Counter`类被添加到`collections`包中`Python 2.7`。

* * *

**解决方案 1**：正如 Martin Pieters 所述 - 使用后向端口。

添加[`counter.py`](http://code.activestate.com/recipes/576611-counter-class/)在`/lib64/python2.6/`- 这`collections.py`是`./lib64/python2.6/collections.py` 补丁所在的位置`collections.py`：

```
from counter import Counter 
```

**解决方案2**：使用[`backport_collections`](https://pypi.python.org/pypi/backport_collections/0.1)包。下一个补丁（导入语句）你在我的例子中遇到异常的包，即 pandas：

```
from backport_collections import Counter 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:39:50.087

您可能正在使用旧版本的 Python，`Counter`该类，如[文档](http://docs.python.org/2/library/collections.html#collections.Counter)中所述，是在 2.7 版中添加的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-30T08:11:38.860

您应该使用新版本的 python AS python 3。然后您可以使用此模块。然后导入，

```
import collections
from collections import counter 
```

# java - 什么时候在Java中初始化数组？

> ID：13311095
> 
> 赞同：5
> 
> 时间：2012-11-09T15:38:26.200
> 
> 标签：java, arrays, performance

当我写这个

```
 String[] fruits = {"Apple", "Pear"}; 
```

我希望在编译时创建数组和字符串，就像 C 中的类似代码一样。它正确吗？数组及其内容通常是在编译时还是在运行时创建的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T15:39:06.167

创建数组，[它们是 Java 中的对象](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)。这只能在运行时发生。

请注意，*许多*对象是在 Java 程序中创建的，并且您的对象创建仅在 VM 本身初始化之后发生。一个静态数组初始化不会给你的表演带来明显的负担。

如果您不更改数组并且您有很多实例，请务必将其声明为 static ：

```
static String[] fruits = {"Apple", "Pear"}; 
```

还要注意与静态编译数组的一个重要区别：java 数组是可变的。你不能改变它的长度，但你可以改变它的元素（或使它们无效）。java 数组，即使是最终的静态数组，也不是真正的常量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T15:39:55.483

数组是java中的特殊对象。因此，它们将在运行时创建。

根据[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)

> 在 Java 编程语言中，数组是对象（第 4.3.1 节），是动态创建的，并且可以分配给 Object 类型的变量（第 4.3.2 节）

[JLS 15.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)提供了有关数组创建表达式的更多信息。

# java - 如何在 Selenium 中映射 XPath？

> ID：13311097
> 
> 赞同：1
> 
> 时间：2012-11-09T15:38:27.527
> 
> 标签：java, dom, xpath, selenium

我目前正在尝试在屏幕抓取中映射下面显示的突出显示的行。我查看了 w3schools 并在 SO 上查看了它，但似乎无法让我的代码正确。我的 selenium 脚本不断出错，无法识别元素。

![突出显示行的 xpath](../Images/f7975047b6e1b53e4d3873c503ad68a4.png)

目前，我正在做类似的事情：

`selenium.click("xpath=//table[@id='resultTable']/tbody/tr[@class='level3']/td[@id='resultTable_0_0_1_ob']/span/a[@class='linkOnly']");`

我也试过这个：

`selenium.click("xpath=//table[@id='resultTable']/tbody[1]/tr[6]/td[2]/span[1]/a[1]");`

还有这个：

`selenium.click("xpath=//table[@id='resultTable']/tbody/tr[6]/td[2]/span/a");`

我做得对吗，我只需要延迟吗？还是我这样做完全错了？

* * *

编辑：

这是所要求的代码片段。感谢您的指点，我并没有真正注意到有多个具有相同名称的类！嗯，但由于某种原因，我编写的另外两个 XPath 不起作用。

在此代码片段中，我展开了表格，以便您更好地了解表格的设置方式。再次，抱歉图像大小，但**ctrl+scroll up**应该放大图片。

![表展开](../Images/bd7e78d53bcf92be54827cf8ad144480.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:39:49.893

我更喜欢使用 css 选择器，因为它们工作得更快（目前使用 webdriver + java），因此您的问题的解决方案如下：

```
 String cssSelector = "tr[class='level3']>td[id='resultTable_0_0_1_ob']>span>a[class='linkOnly']"
    driver.findElement(By.cssSelector(cssSelector)).click():
    driver.manage.timeouts.implicitWait(3,TimeUnit.SECONDS); 
```

当你得到 ID='resultTable_0_0_1_ob' 我认为这个 ID 应该有助于在页面上找到唯一元素。 **解决您的问题的第二种方法**：如果您的网站实施的框架支持 jQuery，您可以轻松使用 jQuery：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $("tr[class='level3']>td[id='resultTable_0_0_1_ob']>span>a[class='linkOnly'];");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

并且不要忘记在 firefox 的 firepath（firebug 扩展）中验证您的 xpath、css 选择器。提供下图： ![火路](../Images/02f0fca3ce75217c58a92db1bfaed095.png)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T06:06:02.220

xpath=//table[@id='resultTable']/tbody/tr[@class='level3']/td[@id='resultTable_0_0_1_ob']/span/a[@class='linkOnly']

对应的 CSS 是 css=#resultTable > tbody > tr.level3 > #resultTable_0_0_1_ob > span > .linkOnly

# regex - 在 Sharepoint 上发布的 SSRS 报告未按预期显示正则表达式

> ID：13311101
> 
> 赞同：0
> 
> 时间：2012-11-09T15:38:53.767
> 
> 标签：regex, sharepoint, deployment, reporting-services

我正在尝试发布与 SQL Server 2012 一起安装的 SharePoint 2010（集成模式）的报告。该报告是在 Visual Studio 2010 中创建的。数据源是带有截止日期和“分配给”字段的 SharePoint 项目列表. 这些项目可能分配了一个或多个人来处理它，Sharepoint 将结果作为一个字段返回，如下所示：

`1234;#Person 1;#2345;#Person 2;#444;#Person 3`

我想去掉数字（它们是 SharePoint 分配的 ID，长度不同）以及“;#”，并在报表的 tablix 的单个单元格中的单独行上返回名称。

```
人 1
人 2
人 3

```

我在报告中使用了这个表达式：

`=replace(System.text.regularExpressions.regex.replace(Fields!Assigned_To.Value,"[0-9]+;#",""),";#",VBCRLF)`

当我预览报告时，它会以我想要的方式显示，但是当报告部署到 Sharepoint 时，它会复制记录，如果有 3 个人分配给该项目，则显示 3 次（如果有 2 个人，则显示 2 次，依此类推.)，“分配给”字段中只有一个人。

我一直无法找到解决方案，并且不确定如何让它在部署时呈现我想要的方式。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:21:17.737

怎么办

```
.replace(Fields!Assigned_To.Value, "([0-9]+;#|)([^#][^;]*);#[0-9]+;#", "$2\n") 
```

# django - 更好地使用第 3 方行级权限应用程序或过滤 Django 视图中的查询结果？

> ID：13311105
> 
> 赞同：2
> 
> 时间：2012-11-09T15:39:07.790
> 
> 标签：django, permissions, django-permissions, django-guardian

我正在编写一个涉及创建文档的 Django 应用程序。我有几个要求：

1.  检查用户是否能够查看*任何*文档。
2.  如果允许用户查看文档，则只允许他们查看他们有权查看的文档。

我提出了两种解决方案，想知道一种在哲学/实践上是否比另一种更好。

我提出的两个解决方案是：

**解决方案一**（使用第三方 Django-Guardian）

`Models.py`

```
class Document(models.Model)
    owner = models.ForeignKey(User)
    document_name = models.CharField(max_length=60)
    document_content = models.TextField()

    class Meta:
    permissions = (
        ('view_document', 'View Document'),
    ) 
```

`views.py`

```
@permission_required('document.view_document', (Document, 'pk', 'document_id'))
def view_document(request, document_id):
    document = Document.objects.get(pk=document_id)
    return render_to_response("native/view_events.html",
    {
        'document' : document,
    }, context_instance=RequestContext(request)) 
```

我看到的第一个解决方案的缺点是每次创建对象时都必须显式设置权限，而且我必须两次访问数据库：一次检查权限，再次检索文档对象。

**解决方案二（使用内置的Django权限）**

`Models.py`

```
class Document(models.Model)
    owner = models.ForeignKey(User)
    document_name = models.CharField(max_length=60)
    document_content = models.TextField()
    viewers = models.ManyToManyField(User)

    class Meta:
    permissions = (
        ('view_document', 'View Document'),
    ) 
```

`views.py`

```
@permission_required('document.view_document')
def view_document(request, document_id):
    document = Document.objects.filter(pk=document_id, viewers__pk=request.user.pk)[0]
    return render_to_response("native/view_events.html",
    {
        'document' : document,
    }, context_instance=RequestContext(request)) 
```

我看到解决方案一的缺点是我必须进行两项检查，一项是查看他们是否能够查看文档，另一项是查看他们是否可以查看特定文档。这样做的好处是，如果我有一个管理员希望能够查看所有文档，我不需要明确授予每个文档的权限；我可以给他“查看文档”的权限。

似乎这两种解决方案都有其优点和缺点。有没有理论/实践更好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:30:54.357

我发现第二种方法更好。因为，您可以检查对象的模型级别权限。虽然在第一个我猜，你应该能够完成类似的事情。我不确定，但如果 django-guardian 提供了一种方法来检查视图代码而不是装饰器中的权限。您可以手动检查模型级别权限。例如，

```
def view_doc(request, doc_id):
      if user can not view doc: #Model Level Permission
              return HttpResponse("Sorry can not view")
      if check django-guardian permission #Object Level Permission
               return HttpResponse("Can not view doc")
      #further code 
```

但我建议使用第二种方法，因为您可以创建一个 api 来检查权限并对其进行自定义，使其更具可扩展性。

# package - 构建 R 包失败，rJava LoadLibrary“不是有效的 win32 应用程序”失败

> ID：13311107
> 
> 赞同：2
> 
> 时间：2012-11-09T15:39:25.503
> 
> 标签：package, r-forge

我写了一个 R 包来连接 R 和 messageQueues，特别是 activeMQ 和 rabbitMQ，所以所有的源都可以在这里找到：[http ://r-forge.r-project.org/projects/r-message-queue/](http://r-forge.r-project.org/projects/r-message-queue/)

r-forge 无法构建包，所以我在本地重新创建/调试，但我的本地构建在此过程中比 r-forge 更早失败。

我正在运行 64 位 windows7、64 位 R v2.15.2。
如果我以错误的方式解决这个问题，请告诉我。

**构建 R 包**

```
$ R --verbose CMD build messageQueue
* checking for file 'messageQueue/DESCRIPTION' ... OK
* preparing 'messageQueue':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* building 'messageQueue_0.1.tar.gz'
cygwin warning:
  MS-DOS style path detected: C:/Users/msm336/workspace_r/messageQueue_0.1.tar.gz
  Preferred POSIX equivalent is: /cygdrive/c/Users/msm336/workspace_r/messageQueue_0.1.tar.gz
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames 
```

**检查 R 包**

```
$ R --verbose CMD check messageQueue_0.1.tar.gz
* using log directory 'C:/Users/msm336/workspace_r/messageQueue.Rcheck'
* using R version 2.15.2 (2012-10-26)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'messageQueue/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'messageQueue' version '0.1'
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking whether package 'messageQueue' can be installed ... ERROR
Installation failed.
See 'C:/Users/msm336/workspace_r/messageQueue.Rcheck/00install.out' for details. 
```

**messageQueue.Rcheck/00install.out 的内容**

```
* installing *source* package 'messageQueue' ...
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
*** arch - i386
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: inDL(x, as.logical(local), as.logical(now), ...)
  error: unable to load shared object 'C:/Program Files/R/R-2.15.2/library/rJava/libs/i386/rJava.dll':
  LoadLibrary failure:  %1 is not a valid Win32 application.

Error : package 'rJava' could not be loaded
Error: loading failed
Execution halted
*** arch - x64
ERROR: loading failed for 'i386'
* removing 'C:/Users/msm336/workspace_r/messageQueue.Rcheck/messageQueue' 
```

当我使用 64 位版本的 java 在 Windows7 x64 上运行 x64 R 时，我不确定它为什么要尝试加载 rJava 的 i386 版本：

```
$ java -version
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b22)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

我的路径上也有 JAVA_HOME/jre/bin/server/jvm.dll，因为 rJava 以某种方式喜欢它。

任何帮助将不胜感激。

谢谢，

马特。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:30:28.167

默认情况下，R 的检查功能将尝试针对所有相关架构测试包。在 windows7 x64 机器上，这意味着它将尝试针对 i386 和 x64 测试包。

不幸的是，当使用 x64 JDK 运行 R x64 时，它似乎无法干净地管理架构依赖项，因此尝试在 x64 上下文中加载 i386 DLL (/rJava/libs/i386/rJava.dll) 并失败。我不完全理解为什么，但可以解决它。

可以使用**--no-multiarch**开关强制**R CMD 检查 messageQueue针对当前（默认）架构运行。**它记录在[编写 R 扩展手册的第 1.3.1 节（请参阅：接近末尾的多个子架构）](http://cran.r-project.org/doc/manuals/R-exts.html#Checking-packages)。

 **我更新的 R 命令仅检查当前架构：

```
R --verbose CMD check --no-multiarch messageQueue_0.1.tar.gz 
```

惊人的。**

# sql - 在 SQL Server 2005 中使用 SQL 读取文本文件

> ID：13311115
> 
> 赞同：1
> 
> 时间：2012-11-09T15:39:41.927
> 
> 标签：sql, sql-server, database, sql-server-2005

我需要读取 SQL Server 2005 中文本文件的第二行和最后一行。该行的内容将用制表符分隔。有人能告诉我实现这一目标的一般方法是什么吗？请注意，我无法在数据库中创建临时表，因为我只有只读访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:20:55.517

您可以使用 OPENROWSET 和 where case ，请参考

> [http://msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)

```
SELECT a.* FROM OPENROWSET( BULK 'c:\test\values.txt', 
   FORMATFILE = 'c:\test\values.fmt') AS a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:47:03.927

如果您知道行号（在我的测试 txt 文件中 5 行）

```
DECLARE @str nvarchar(max) = (SELECT line FROM OPENROWSET (BULK 'c:\your_file.txt' , SINGLE_CLOB ) AS xmlData(line))
;WITH cte AS (
         CAST('<r>'+REPLACE(@str, CHAR(13),'</r><r>')+'</r>' AS XML).query('/r[2]').value('.','varchar(max)') col2,
         CAST('<r>'+REPLACE(@str, CHAR(13),'</r><r>')+'</r>' AS XML).query('/r[5]').value('.','varchar(max)') col5                
 )
 SELECT CASE WHEN col2 = '' THEN NULL ELSE col2 END col2,  
        CASE WHEN col5 = '' THEN NULL ELSE col5 END col5
 FROM cte 
```

# c# - 无法将类型“double []”隐式转换为“System.Collections.Generic.List” `

> ID：13311122
> 
> 赞同：3
> 
> 时间：2012-11-09T15:39:52.060
> 
> 标签：c#, syntax, for-loop, double

我收到带有以下代码的以下错误消息。我认为数据类型与 C#`List<double>`相同，`double[]`但 C# 要求使用第一种语法对其进行实例化，以使变量作为对象工作。我做错了什么还是我的想法错了？

```
Cannot implicitily convert type `double[]` to `System.Collections.Generic.List<double>` 
```

代码：

```
private void RunScript(List<Curve> crv, double nb, ref object DivPts)
  {

    List<double> nbtemp = new List<double>();
    List<double> Divpt = new List<double>();

    for(int i = 0; i < crv.Count;i = i + 2)
    {
      nbtemp = crv[i].DivideByLength(nb, true);
    }

    Divpt = nbtemp; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:43:30.857

不，列表不是数组，尽管概念有些相似。C# 中的`List<T>`类实际上是用一个幕后数组实现的。

如果你想从一个数组中设置一个列表，你可以使用这样的东西：

```
nbtemp = new List<double>(crv[i].DivideByLength(nb, true)); 
```

这将创建一个新列表，并使用数组对其进行初始化。如果您想将数组附加到现有列表中，也可以使用 的`AddRange`方法，如下所示：`List`

```
nbtemp.AddRange(crv[i].DivideByLength(nb, true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:41:18.460

您正在使用分配，并且很难说出 DivideByLength 返回的内容，如果是单个值，则使用：

```
nbtemp.Add(crv[i].DivideByLength(nb, true)); 
```

否则，如果它返回一个数组，请尝试更改定义以允许列表包含数组：

```
List<double[]> nbtemp = new List<double[]>(); 
```

请注意，`List`不等于`double[]`. `List`有许多简单数组没有的特性。您可以通过查看公开公开方法的两篇不同的 MSDN 文章来了解差异。

*   [列表](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.100%29.aspx)*   [大批](http://msdn.microsoft.com/en-us/library/system.array.aspx)

    此外，您的 for 循环目前正在使用分配。如果不更改该部分代码，您只会将 for 循环的最后一次迭代分配给变量 nbtemp（假设您删除了错误）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:41:22.167

您无法从 Array 转换为 List，但您可以轻松调用：

```
nbtemp = crv[i].DivideByLength(nb, true).ToList(); 
```

或者，由于您已经定义了列表，您还可以：

```
nbtemp.AddRange(crv[i].DivideByLength(nb, true)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:43:38.397

它们都是`IEnumerable`实现者，但它们不是等效类型。您将需要执行强制转换或方法调用。在上面的代码中，我会说你需要：

```
nbtemp = (crv[i].DivideByLength(nb, true)).ToList(); 
```

或者

```
nbtemp.AddRange(crv[i].DivideByLength(nb, true)); 
```

# sql - SQL Server 2005 选择查询未从列中检索完整文本

> ID：13311134
> 
> 赞同：1
> 
> 时间：2012-11-09T15:40:41.333
> 
> 标签：sql, sql-server, sql-server-2005

也许这会很简单，但我不知道为什么会这样。

简单来说，我在数据库表中插入了一行，其中包含一个`ntext`名为`content`. 进入该列的字符串值`content`的文本长度为 6889 个字符。但是，当我基于 id 进行基本选择查询时，它会检索行 - 但不是来自 column 的完整文本`Content`。当我执行选择查询时，我在 SQL Server Management Studio 中看到的所有内容都是包含字符 43679 的文本。

插入数据没有问题，我可以看到前端应用程序中显示的所有文本。问题只是当我进行选择查询并将文本复制到记事本时，我看到的字符更少。有关 SQL Server 设置/分页/统计的任何信息？感谢是否有人可以帮助我解决这个问题。

谢谢， KK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T03:29:01.173

我遇到了[类似的问题](https://stackoverflow.com/questions/22298174/ms-sql-server-2008r2-how-to-retrieve-the-content-of-a-large-text-column/22298416?noredirect=1#comment33888264_22298416)，我发现 SSMS 无法完全检索超过 43680 的列（在输出到网格模式下）。

因此，解决方法是将其输出为 XML（无限长度）：

```
SELECT convert(xml,'<xml><![CDATA[' + cast([your column] as varchar(max)) + ']]></xml>') 
```

然后快速搜索和替换 ( `&lt;`to `<`, `&gt;`to `>`)。您现在可以将结果复制到 Notepad++ 以查看所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:59:31.103

SSMS 将最大字符数返回到每个基于文本的列的网格或文本窗口：SSMS 菜单：选项：查询结果节点：SQL 节点：结果到网格/结果到文本

我确信这是有充分理由的：可能 SSMS 会比现在更频繁地崩溃。

希望这会有所帮助......没有愚蠢的问题

# login - 如何在 MODx Revo 中使用内联模板？

> ID：13311135
> 
> 赞同：0
> 
> 时间：2012-11-09T15:40:42.173
> 
> 标签：login, modx

我在 MODx Revo 中使用 Login 片段，我试图将模板直接放在 loginTpl 和 logoutTpl 属性中，但没有输出任何内容。下面是我的代码。我究竟做错了什么？提前致谢！

```
[[!Login? &tplType=`inline` &loginTpl=`<span>Log In</span>` &logoutTpl=`<span>[[+username]]</span>`]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-01T16:06:08.600

占位符在处理代码片段之前进行评估，即在`@INLINE tpl`使用之前。

> 使用块；或不可缓存的占位符（未经测试）：

```
[[!Login? &tplType=`inline` &loginTpl=`<span>Log In</span>` &logoutTpl=`<span>[[!+username]]</span>`]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:15:03.753

它完全工作，检查是否安装了登录组件（默认情况下未安装）。

# python - 使用 numpy 从卷中提取并保存切片

> ID：13311137
> 
> 赞同：1
> 
> 时间：2012-11-09T15:40:49.133
> 
> 标签：python, numpy, imaging, medical

我正在尝试使用 numpy 从卷中提取切片。体积是 512x512x132，我想要切片号 66。每个体素都是一个无符号的 16 位整数。

我的代码是：

```
import numpy

original = numpy.fromfile(filepath, dtype=numpy.uint16)
original = numpy.reshape(original, (512,512,132))

slice = original[:,:,66]

f = open('test.rawl', 'w')
slice.tofile(f)
f.close() 
```

代码很干净，但是当我用外部程序打开切片时，它不是切片数据而是垃圾。

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:45:04.587

你的第一个问题是你的轴错了。假设您要使用 132 层 512x512 图像：

```
original = numpy.fromfile(filepath, dtype=numpy.uint16).reshape((132, 512, 512)) 
```

然后对于切片：

```
slc = original[66] 
```

此外，像 Numpy 数组这样的二进制数据使用：

```
f = open('test.raw', 'wb') 
```

模式中的“b”用于二进制。否则，Python 将假定您正在尝试编写文本并执行诸如将换行符转换为系统的适当格式等操作。

顺便说一句，该`ndarray.tofile()`方法还需要一个文件名，因此除非您有特殊原因，否则没有必要首先创建文件句柄。你可以使用

```
arr.tofile('test.raw') 
```

最后一点：尽量不要`slice`用作变量。这是 Python 中的一个内置名称，你可能会因为用其他东西遮蔽它而遇到麻烦。

# python - Python中的文本格式

> ID：13311140
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:41:02.747
> 
> 标签：python, text, formatting

我有一个具有以下格式的文件：

```
01*13345233000*7677082000*0335
02*1*Ground*Workshop*640.80*11.46*7344
02*2*First*Office/Labs*300.81*14.10*4241
02*3*Ground*Workshop*774.46*11.46*8875
01*13345233000*7677082000*0335
02*1*Ground*Workshop*640.80*11.46*7344
02*2*First*Office/Labs*300.81*14.10*4241 
```

我只想将其重新格式化如下（将以 01 开头的行复制到相应的 02 行）：

```
02*1*Ground*Workshop*640.80*11.46*7344*01*13345233000*7677082000*0335
02*2*First*Office/Labs*300.81*14.10*4241*01*13345233000*7677082000*0335
02*3*Ground*Workshop*774.46*11.46*8875*01*13345233000*7677082000*0335
02*1*Ground*Workshop*640.80*11.46*734401*13345233000*7677082000*0335
02*2*First*Office/Labs*300.81*14.10*424101*13345233000*7677082000*0335 
```

非常感谢您的帮助。

凯特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:50:34.787

假设您的文件被调用`textfile.txt`，这将创建一个名为的列表`to_output`，您可以编写第二个文件或您可能需要对其进行的任何其他操作...

```
to_output = []
current_01 = ""

with open('textfile.txt', 'r') as datafile:
    for line in datafile:
        if line.startswith("01"):
            current_01 = line
        elif line.startswith("02"):
            to_output.append(line.strip()+"*"+current_01)

print to_output 
```

# jquery - 如何向 Zend Form 元素添加 jQuery 事件回调函数

> ID：13311141
> 
> 赞同：2
> 
> 时间：2012-11-09T15:41:07.163
> 
> 标签：jquery, zend-framework, jquery-ui-datepicker, zend-form-element

我正在创建一个 Zend 表单，我想在其中插入一个日期跨度。该表单使用 jQuery UI 库进行了增强，因此我有一个日期从和一个日期到字段，它们都是 datepicker 元素。这工作正常；这是 Zend_Form 的这一部分：

```
 // Date range
  $date = $this->getView()->date(time());
  $this->addElement('DatePicker', 'userday_from', array(
     'label'        => 'Datum van',
     'value'        => $date,
     'jQueryParams' => array(
        'defaultDate' => $date,
        'dateFormat'  => $this->getView()->date()->getFormatJquery()
     )
  ));
  $this->addElement('DatePicker', 'userday_to', array(
     'label'        => 'Datum tot',
     'value'        => $date,
     'jQueryParams' => array(
        'defaultDate' => $date,
        'dateFormat'  => $this->getView()->date()->getFormatJquery()
     )
  )); 
```

当第一个日期更改时，我想更新第二个日期。jQuery datepicker 对此有一个 onSelect 事件。但是，我无法向 jQueryParams 添加函数回调：

```
 $this->addElement('DatePicker', 'userday_from', array(
     'label'        => 'Datum van',
     'value'        => $date,
     'jQueryParams' => array(
        'defaultDate' => $date,
        'dateFormat'  => $this->getView()->date()->getFormatJquery(),
        'onSelect'  => "function(){ alert('test'); }"   // ! is not working
     )
  )); 
```

因此，我尝试在之后添加这个 jQuery '选项'，如下所示：

```
 $this->getView()->jQuery()
     ->addOnload("
        $('#userday_from').datepicker('option', 'onSelect', function(selectedDate){
           alert('test');
        });
     "); 
```

另一方面，这在 document.ready() 函数中添加了新的 jQuery，在我的 datepicker 元素的初始化函数之前，因此也不起作用：

```
<script type="text/javascript">//<![CDATA[
$(document).ready(function() {
            $('#userday_from').datepicker('option', 'onSelect', function(selectedDate){
               alert('test');
            });
    $("#userday_from").datepicker({"defaultDate":"09-11-2012","dateFormat":"dd-mm-yy"});
    $("#userday_to").datepicker({"defaultDate":"09-11-2012","dateFormat":"dd-mm-yy"});
});
//]]></script> 
```

我不想覆盖 datePicker viewhelper 来破解这样的东西。这是将 2 个表单元素联系在一起的东西，因此将其添加到 Zend_Form init() 函数对我来说似乎是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T11:10:15.353

这是个老问题，但要使用 Zend 的函数回调，请使用 Zend_Json_Expr

在你的情况下：

```
'onSelect'  => new Zend_Json_Expr("function(){ alert('test'); }") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:34:12.013

这可能并不能真正解决您的问题。但是，我希望它为您指明正确的方向。[正如 Benjamin 在这里](http://zend-framework-community.634137.n4.nabble.com/Discontinuing-Maintenance-of-ZendX-JQuery-Suggest-drop-for-2-0-td3221856.html)指出的，ZendX jQuery 将停止使用。他还指出为什么从 ZF 生成 jQuery 代码不是一个好主意。我个人完全同意本杰明的观点。

ZendX_Jquery 默认会生成错误代码。它不仅会生成糟糕的代码，还会让您停止思考您实际在做什么，即将生成哪些代码。此外，它会生成“内联”代码，即它会生成直接嵌入到您的 HTML 代码中的 javascript 代码，因此不会被您的用户浏览器缓存。实际上，我什至不确定它是否会生成[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)代码。

综上所述，我强烈建议跳过使用 ZendX_JQuery。

再见，克里斯蒂安

# git - 我在 github 上的 git 分支应该只领先 2，但它也落后 2

> ID：13311146
> 
> 赞同：1
> 
> 时间：2012-11-09T15:41:20.190
> 
> 标签：git, version-control, github, branch, git-branch

我从 ma master 分支创建了一个名为 development 的分支。开发分支有 2 个新的提交。与此同时，主分支得到了 1 次提交，这是一个错误，然后我将其还原并推送。到现在为止还挺好。我看到了前面/后面的东西，我通过将 HARD 重置为 2 个提交从 master 中删除了两个提交（错误和还原一个）。

现在我在 github 上的指标仍然显示开发分支落后 2，尽管如果你查看提交则不是。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:11:31.690

github上有哪些指标？发展是2落后什么？

如果您的意思是在分叉图中，开发似乎在 master 分支后面 2，您应该尝试以下操作：

```
git checkout develop  
git rebase master  
git push origin 
```

git reset 不会重写历史记录，因此您拥有的历史记录是您进行了重置，这也在 github 上。我的猜测是github上的图表使用了历史日志，但我不能肯定地说。

# java - 拖动组件创建另一个

> ID：13311150
> 
> 赞同：1
> 
> 时间：2012-11-09T15:41:27.270
> 
> 标签：java, swing, ide, drag-and-drop

在所有主要的 Java IDE 中，都有一个 GUI 设计器。当我们选择一个组件（`Jbutton`例如 A ）并将其移动到 a `JPanel`or`JFrame`时，它是如何完成的？
它是在另一个容器上创建的拖动组件的副本吗？

在我正在进行的一个项目中，我有一些`JButton`我希望能够拖到面板上。这些`JButton`代表一些动作，例如“复制文件”，“移动文件”等......
当其中一个`JButton`被拖动时，将显示该动作的一些选项。

我查了[`TransferHandler`](http://docs.oracle.com/javase/6/docs/api/javax/swing/TransferHandler.html)，但我不知道这是否是要走的路。是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:01:15.047

这当然是可能的。您需要学习[*拖放*](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)教程。特别是，您可能希望实施[](http://docs.oracle.com/javase/tutorial/uiswing/dnd/droplocation.html)*[此处](https://forums.oracle.com/forums/thread.jspa?threadID=1350570)讨论[*的放置位置渲染*](http://docs.oracle.com/javase/tutorial/uiswing/dnd/droplocation.html)，以象征动作。*

 *通过将按钮的名称、图标、侦听器等封装在一个[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)通过在实例`importData()`，您的实现可以轻松地用于`setAction()`动态更改目标按钮的行为。

另一种方法可能是将按钮添加到[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html). 在正常模式下，单击按钮会*唤起*`Action`; 在编辑器模式下，单击按钮将再次通过*更改*为从列表中选择的一个。`Action``setAction()`*

# iphone - 频繁加载视图后iOS游戏卡顿

> ID：13311153
> 
> 赞同：1
> 
> 时间：2012-11-09T15:41:33.680
> 
> 标签：iphone, xcode, views

我正在开发一个相对简单的基于框架的 iphone 游戏，它运行得非常流畅。但是，当我切换视图然后再返回几次时，一切都开始严重滞后。

也许有人认为这是一个简单的编程问题。（例如，未将 iVars 设置为 nil、未正确切换视图、同时加载过多变量等）

注意：这仅在切换视图超过 10 次后才会发生。

# c# - 在 C# 中，如何使用 SQL 检查数据库中的现有数据？

> ID：13311167
> 
> 赞同：-3
> 
> 时间：2012-11-09T15:42:23.657
> 
> 标签：c#, sql, ms-access-2007

我正在使用 c# 并使用 sql 命令来获取、添加、更改 Access db 中的数据。我想做的是检查数据库中的表以获取特定数据或记录。我需要该命令返回一个值（真/假，0/1），该值将指示数据是否存在。我的总体目标是能够运行此检查，如果数据存在，则什么也不做。如果数据不存在，则创建它。有谁知道如何做到这一点。我认为有一种方法可以用 sql 来做到这一点，但我可能是错的。就是这样。我希望我能正确地提出我的问题和问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:52:40.793

您需要学习 OledbConnection，包括数据适配器、命令和 SQL 搜索字符串。

[http://msdn.microsoft.com/en-us/library/aa288452(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288452(v=vs.71).aspx)

** 编辑 ** 您可以像这样创建一个私有布尔方法：-

```
Private Bool RecordMatch()
{
 // Perform SQL Search On Data Here, using Data Adapter and populating DataTable.
 // If DataTable is null reference return false
 // Else Return True

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:44:42.390

您可以运行一个简单的 SELECT 查询，其中包括一个 WHERE 子句，该子句由与每个添加的项目相对应的唯一值组成，并根据该值进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:48:47.127

我将采取的方法是获取所有具有匹配数据的行。

```
 SELECT * 
 FROM yourTable
 WHERE 
      yourTable.field1=value1
      AND 
      yourTable.field2=value2 
```

从那时起，您可以简单地说如果有任何记录，请不要添加新记录。

```
 //we will assume the dt is a DataTable containing the data retrieved from the query
 if(dt.rows.count==0)
 {  
      //add the record
 } 
```

如果您更喜欢在 SQL 中使用 COUNT，您可以选择记录数

```
 SELECT COUNT(*)
 FROM yourTable
 WHERE 
 yourTable.field1=value1
 AND 
 yourTable.field2=value2 
```

并使用 ExecuteScalar （选择返回的第一行的第一列）

```
 //cmd is a command object that is set up to query your database
 try
 {
       int count=Convert.ToInt32(cmd.ExecuteScalar())

       if(count==0)
       {
          //add the record
       }
 }
 catch(Exception ex)
 {
    //do something with the error
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:57:13.113

您可以使用 foreach 语句，在其中检查表中的所有行，如果行等于所需行，则返回 true，否则返回 false ...

# extjs - 如何在图表中突出显示没有鼠标悬停的线条？

> ID：13311168
> 
> 赞同：1
> 
> 时间：2012-11-09T15:42:24.267
> 
> 标签：extjs, extjs4, extjs4.1

我从演示中看到了简单的例子：

[http://dev.sencha.com/deploy/ext-4.0.0/examples/charts/Line.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/charts/Line.html)

如何在图表中突出显示没有鼠标悬停的线（该线的模拟鼠标悬停事件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:01:33.513

浏览到该示例并在浏览器的 javascript 控制台中写入以下内容：

```
chart = Ext.ComponentQuery.query('.chart')[0];
serie = chart.series.items[0]; 
serie.highlightItem(); 
```

这是它的外观：

![在此处输入图像描述](../Images/5f0bef60f511270a69f2e792705707da.png)

# perl - Perl 反引号：标志不存在

> ID：13311169
> 
> 赞同：0
> 
> 时间：2012-11-09T15:42:30.343
> 
> 标签：perl, ls, backticks

执行以下代码段时，

```
sub list {
    my($self)=@_;
    my $file = $self->{P_Dir}."/".$self->{Name};
    print `ls –l $file`;
} 
```

我收到此错误：

```
ls: cannot access –l: No such file or directory 
```

我不确定是什么原因造成的，因为如果我在命令行中手动键入 ls -l，我看不到该错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T15:45:06.743

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:23:40.620

Hmmm... It works for me though:

```
$ cat test.pl 
#!/usr/bin/perl -w
use strict;
my $file = "rpm.pl";
print `ls -l $file`;

$ perl test.pl 
-rw-r--r-- 1 dheeraj dheeraj 922 2012-10-22 19:56 rpm.pl 
```

# wordpress - 样式 WordPress 表格？

> ID：13311171
> 
> 赞同：1
> 
> 时间：2012-11-09T15:42:33.330
> 
> 标签：wordpress

这是我的 WordPress 表格。我创建了一个数组，以便我可以尝试，但我需要添加类和 ID，以便我可以使用 CSS 来设置它的样式，就像顶级插件页面一样。

如何向表格元素添加类？

```
<?php

if(!class_exists('WP_List_Table')){
    require_once( ABSPATH . 'wp-admin/includes/class-wp-list-table.php' );
}

class TT_Example_List_Table extends WP_List_Table {

    var $example_data = array(
            array(
                'ID'        => 1,
                'title'     => '300',
                'rating'    => 'R',
                'director'  => 'Zach Snyder'
            ),
            array(
                'ID'        => 2,
                'title'     => 'Eyes Wide Shut',
                'rating'    => 'R',
                'director'  => 'Stanley Kubrick'
            ),
            array(
                'ID'        => 3,
                'title'     => 'Moulin Rouge!',
                'rating'    => 'PG-13',
                'director'  => 'Baz Luhrman'
            ),
            array(
                'ID'        => 4,
                'title'     => 'Snow White',
                'rating'    => 'G',
                'director'  => 'Walt Disney'
            ),
            array(
                'ID'        => 5,
                'title'     => 'Super 8',
                'rating'    => 'PG-13',
                'director'  => 'JJ Abrams'
            ),
            array(
                'ID'        => 6,
                'title'     => 'The Fountain',
                'rating'    => 'PG-13',
                'director'  => 'Darren Aronofsky'
            ),
            array(
                'ID'        => 7,
                'title'     => 'Watchmen',
                'rating'    => 'R',
                'director'  => 'Zach Snyder'
            )
        );

    function __construct(){
        global $status, $page;

        //Set parent defaults
        parent::__construct( array(
            'singular'  => 'movie',     //singular name of the listed records
            'plural'    => 'movies',    //plural name of the listed records
            'ajax'      => false        //does this table support ajax?
        ) );

    }

    function column_default($item, $column_name){
        switch($column_name){
            case 'rating':
            case 'director':
                return $item[$column_name] . 'hi';
            default:
                return print_r($item,true) . ' hi'; //Show the whole array for troubleshooting purposes
        }
    }

    function column_title($item){

        //Build row actions
        $actions = array(
            'edit'      => sprintf('<a href="?page=%s&action=%s&movie=%s">Edit</a>',$_REQUEST['page'],'edit',$item['ID']),
            'delete'    => sprintf('<a href="?page=%s&action=%s&movie=%s">Delete</a>',$_REQUEST['page'],'delete',$item['ID']),
        );

        //Return the title contents
        return sprintf('%1$s <span style="color:silver">(id:%2$s)</span>%3$s',
            /*$1%s*/ $item['title'],
            /*$2%s*/ $item['ID'],
            /*$3%s*/ $this->row_actions($actions)
        );
    }

    function column_cb($item){
        return sprintf(
            '<input type="checkbox" name="%1$s[]" value="%2$s" />',
            /*$1%s*/ $this->_args['singular'],  //Let's simply repurpose the table's singular label ("movie")
            /*$2%s*/ $item['ID']                //The value of the checkbox should be the record's id
        );
    }

    function get_columns(){
        $columns = array(
            'cb'        => '<input type="checkbox" />', //Render a checkbox instead of text
            'title'     => 'Title',
            'rating'    => 'Rating',
            'director'  => 'Director'
        );
        return $columns;
    }

    function get_sortable_columns() {
        $sortable_columns = array(
            'title'     => array('title',true),     //true means its already sorted
            'rating'    => array('rating',false),
            'director'  => array('director',false)
        );
        return $sortable_columns;
    }

    function get_bulk_actions() {
        $actions = array(
            'delete'    => 'Delete'
        );
        return $actions;
    }

    function process_bulk_action() {

        //Detect when a bulk action is being triggered...
        if( 'delete'===$this->current_action() ) {
            wp_die('Items deleted (or they would be if we had items to delete)!');
        }

    }

    function prepare_items() {

        $per_page = 5;

        $columns = $this->get_columns();
        $hidden = array();
        $sortable = $this->get_sortable_columns();

        $this->_column_headers = array($columns, $hidden, $sortable);

        $this->process_bulk_action();

        $data = $this->example_data;

        function usort_reorder($a,$b){
            $orderby = (!empty($_REQUEST['orderby'])) ? $_REQUEST['orderby'] : 'title'; //If no sort, default to title
            $order = (!empty($_REQUEST['order'])) ? $_REQUEST['order'] : 'asc'; //If no order, default to asc
            $result = strcmp($a[$orderby], $b[$orderby]); //Determine sort order
            return ($order==='asc') ? $result : -$result; //Send final sort direction to usort
        }
        usort($data, 'usort_reorder');

        $current_page = $this->get_pagenum();

        $total_items = count($data);

        $data = array_slice($data,(($current_page-1)*$per_page),$per_page);

        $this->items = $data;

        $this->set_pagination_args( array(
            'total_items' => $total_items,                  //WE have to calculate the total number of items
            'per_page'    => $per_page,                     //WE have to determine how many items to show on a page
            'total_pages' => ceil($total_items/$per_page)   //WE have to calculate the total number of pages
        ) );
    }

}

function tt_add_menu_items(){
    add_menu_page('Example Plugin List Table', 'List Table Example', 'activate_plugins', 'tt_list_test', 'tt_render_list_page');
} add_action('admin_menu', 'tt_add_menu_items');

function tt_render_list_page(){

    $testListTable = new TT_Example_List_Table();
    $testListTable->prepare_items();

    ?>
    <div class="wrap">

        <div id="icon-users" class="icon32"><br/></div>
        <h2>List Table Test</h2>

        <form id="movies-filter" method="get">
            <input type="hidden" name="page" value="<?php echo $_REQUEST['page'] ?>" />
            <?php $testListTable->display() ?>
        </form>

    </div>
    <?php
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:43:35.393

做到这一点的唯一方法是重写`WP_List_Table`类的一些方法。

我继续修改您的类以支持表中每个 tr/td 的条件 HTML 类。您还不清楚您希望将类应用于哪些元素，也不清楚您想如何指定它，所以如果这不是您想要的，请原谅（并请指定更多详细信息）。

[您可以在此处](http://pastebin.com/FMnvMxtX)查看完整的代码（只有`TT_Example_List_Table`类存在 - 其余部分相同）。

基本上，您定义了一个名为`$cond_classes`. 该属性是一个多维条件数组。在那里，您有两个保留的顶级键-“奇数”和“偶数”。正如您所猜测的那样，它们将被访问为奇数或偶数的每一行。其余的顶级键可以是列 ID 或项目 ID。

每个顶级键可以保存一个数组或一个字符串如果顶级键保存一个字符串，那么当满足此条件时，添加该类如果顶级键保存一个数组，则循环遍历。二级数组可以有字符串值和key=>value对，其中key是类，value是条件数组。

我想这很令人困惑，但下面的示例应该让您了解它是如何工作的。

```
var $cond_classes = 数组（
    '奇数' => 数组（
        'odd-class', // 这个类总是被赋予奇数行和它们的列
        'special-odd-class' => array( // 如果行用于 ID 为 1、4 或 7 的项目，则仅将此类用于奇数行及其列
            'ID' => 数组（1、4、7）
        )
    ),
    '偶数' => 数组（
        '偶数级'
    ),
    '标题' => 数组（
        'custom_title_class',
        'special_title_class' => 数组（
            'ID' => array( 3, 7 ), // 这将只提供给 ID 为 3 或 7 的项目的“标题”列
            'title' => 'The Fountain', // 这只会提供给标题为“The Fountain”的项目的“title”列
        ),
    ),
    7 => 'id_7_class', // 这将被赋予一行，它是 ID 为 7 的项目的列
);
```

您可以在结果表中看到应用的类： ![HTML 代码预览](../Images/225acfe7c5919974edb348b6994a9a2b.png)

希望有帮助！如果您有任何问题 - 请继续 :)

# versioning - Confluence 版本历史

> ID：13311175
> 
> 赞同：15
> 
> 时间：2012-11-09T15:42:49.397
> 
> 标签：versioning, confluence

很高兴在 Confluence 中有版本历史。但是，每次编辑和保存文档时都会创建一个新版本。我正在寻找更多的“发布”历史。假设我的文档/页面有 1.0 版。然后我在准备好“发布”1.1 之前编辑并保存了几次页面。我需要一些东西来将一个版本链接到一个版本号，然后有一个自动的发布历史。

有没有办法在 Confluence 中做类似的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-25T12:40:35.293

我猜**K15t Software的****Scroll Versions**插件可能是 Confluence 中 wiki 页面的版本控制和发布管理的一种可能解决方案。[https://marketplace.atlassian.com/plugins/com.k15t.scroll.scroll-versions](https://marketplace.atlassian.com/plugins/com.k15t.scroll.scroll-versions)

 **PS我知道这是一个老问题，但我认为其他人可能需要这些信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-29T09:00:06.780

A method I have seen used is to attach a file to a page, change the document and upload with the same name multiple times, then change the link on the page when the version changes.

Usually a link to an attached document always references the highest version like this:

```
[^list.docx] 
```

[ and ] mark the start and end of the link ^ to the right of [ refers to an attachment on the current page and the rest is the name of the attachment which resolves to a hyperlink of:

```
http://wiki.server.name/download/attachments/464233765/list.docx 
```

From the page the full url is more specific:

```
http://wiki.server.name/download/attachments/464233765/list.docx?version=1&modificationDate=1406619789890 
```

Refer to Tools > Attachments for a list of file version numbers.

Edit the page.

Create a link to the 'next' version with appropriate link text.

```
[list.docx V2.1|///download/attachments/464233765/list.docx?version=6]

[list.docx V3.0|///download/attachments/464233765/list.docx?version=9]

[list.docx V3.1|///download/attachments/464233765/list.docx?version=11] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T18:21:40.120

正如您所写，Confluence 总是会在现有附件上传时创建一个新版本，其文件名与附件视图中显示的文件名相同。

> 现有文件将以“版本 x”的名称保存，其中“x”的值随着每次上传具有相同文件名的附件而增加。

来源： [https ://confluence.atlassian.com/display/DOC/Attachment+Versions](https://confluence.atlassian.com/display/DOC/Attachment+Versions)

这不能通过 Confluence 中的配置进行更改。

但是，您可以尝试[Arsenale Lockpoint](https://marketplace.atlassian.com/plugins/com.arsenale.plugins.lockpoint)，它是一个 Confluence 附加组件。

> Arsenale® Lockpoint™ 是 Confluence 附件签出、签入和受控版本控制的企业标准...

来源：[https ://marketplace.atlassian.com/plugins/com.arsenale.plugins.lockpoint](https://marketplace.atlassian.com/plugins/com.arsenale.plugins.lockpoint)

*   [军械库锁点文档](http://www.arsenalesystems.com/support/arsenale-lockpoint?ref=px)

**编辑**

*   我刚刚安装并测试过`Arsenale Lockpoint`，找不到您正在寻找的功能
*   我不知道有任何其他插件可以满足您的要求
*   因此，我建议您在本地编辑文件并仅在您想要新版本（发布）时上传

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T08:25:26.777

其他答案的一个简单替代方法是使用更改注释。

编辑页面时，底部的保存按钮旁边有一个输入字段。此字段有一个占位符“*您更改了什么？” 其内容显示在页面历史记录中。

所以你可以多次编辑页面，当你想“发布”版本时，你可以在评论中填写发布版本。这样，您可以在页面历史记录中查看所有页面版本，但您可以轻松识别版本。

查看[Confluence 文档](https://confluence.atlassian.com/conf56/confluence-user-s-guide/creating-content/using-the-editor/working-with-drafts/recording-change-comments "Confluence 文档")**

# r - 如何在 R 中获取输入文件的绝对路径

> ID：13311180
> 
> 赞同：42
> 
> 时间：2012-11-09T15:42:57.113
> 
> 标签：r

我正在使用 Rscript 从某个目录中的给定 CSV 文件中绘制一些数字，这不一定是我当前的工作目录。我可以这样称呼它：

```
./script.r ../some_directory/inputfile.csv 
```

现在我想在同一个目录（../some_directory）中输出我的数字，但我不知道该怎么做。我试图获取输入文件的绝对路径，因为我可以从中构造输出路径，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-09T15:51:29.107

```
normalizePath() #Converts file paths to canonical user-understandable form 
```

或者

```
library(tools)
file_path_as_absolute() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-16T13:44:06.240

*这个问题很老了，但它仍然错过了一个可行的解决方案。所以这是我的答案：*

使用`normalizePath(dirname(f))`. 下面的示例列出了当前目录中的所有文件和目录。

```
dir <- "."
allFiles <- list.files(dir)
for(f in allFiles){
  print(paste(normalizePath(dirname(f)), fsep = .Platform$file.sep, f, sep = "")) 
} 
```

在哪里：

*   `normalizePath(dirname(f))`给出父目录的绝对路径。因此，应将各个文件名添加到路径中。
*   `.Platform`用于拥有可移植操作系统的代码。（[这里](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Platform.html)）
*   `file.sep`给出“在您的平台上使用的文件分隔符：“/”在 Unix-likes 和 Windows 上（但不是在以前的经典 Mac OS 端口上）。（[这里](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Platform.html)）

* * *

**警告：**如果不小心使用，这可能会导致一些问题。例如，假设这是路径：`A/B/a_file`并且工作目录现在设置为`B`. 然后是下面的代码：

```
dir <- "B"
allFiles <- list.files(dir)
for(f in allFiles){
  print(paste(normalizePath(dirname(f)), fsep = .Platform$file.sep, f, sep = "")) 
} 
```

会给：

```
> A/a_file 
```

但是，它应该是：

```
> A/B/a_file 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T15:54:49.913

这里的解决方案：

```
args = commandArgs(TRUE)

results_file = args[1]

output_path = dirname(normalizePath(results_file)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-05T13:18:50.760

**从文件中获取绝对路径**

为什么不将基本 R 函数`file.path()`与@Marius 给出的答案结合起来。这看起来稍微简单一些，将使用文件向量 ( `files`)，并处理系统特定的分隔符：

```
file.path(normalizePath(dirname(files)), files) 
```

并包裹在一个函数 ( `abspath`) 中：

`abspath <- function(files)file.path(normalizePath(dirname(files)), files)`

例如：

```
> setwd("~/test")
> list.files()
[1] "file1.txt" "file2.txt" 
```

接着：

```
> abspath(files)
[1] "/home/myself/test/file1.txt" "/home/myself/test/file2.txt" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-22T12:11:44.113

我看到人们给出了解决方案的一部分，但不是全部。我用过这个：

```
outputFile = paste(normalizePath(dirname(inputFile)),"\\", "my_file.ext", sep = "") 
```

希望能帮助到你。

# c++ - C++ - 在初始化类成员之前运行一个函数

> ID：13311184
> 
> 赞同：26
> 
> 时间：2012-11-09T15:43:08.390
> 
> 标签：c++, constructor, initialization, smart-pointers, initialization-list

我有 2 个资源管理类`DeviceContext`，`OpenGLContext`它们都是`class DisplayOpenGL`. 资源生命周期与`DisplayOpenGL`. 初始化看起来像这样（伪代码）：

```
DeviceContext m_device = DeviceContext(hwnd);
m_device.SetPixelFormat();
OpenGLContext m_opengl = OpenGLContext(m_device); 
```

问题是对 SetPixelFormat() 的调用，因为我不能在`DisplayOpenGL`c'tor 的初始化程序列表中这样做：

```
class DisplayOpenGL {
public:
    DisplayOpenGL(HWND hwnd)
    : m_device(hwnd),
      // <- Must call m_device.SetPixelFormat here ->
      m_opengl(m_device) { };
private:
    DeviceContext m_device;
    OpenGLContext m_opengl;
}; 
```

我可以看到的解决方案：

*   插入`m_dummy(m_device.SetPixelFormat())`- 不起作用，因为 SetPixelFormat() 没有 retval。（如果它有 retval，你应该这样做吗？）
*   使用`unique_ptr<OpenGLContext> m_opengl;`而不是`OpenGLContext m_opengl;`.
    然后初始化为`m_opengl()`，在 c'tor 正文中调用 SetPixelFormat() 并使用`m_opengl.reset(new OpenGLContext);`
*   `SetPixelFormat()`来自`DeviceContext`c'tor 的电话

这些解决方案中哪一个更可取，为什么？有什么我想念的吗？

如果重要的话，我在 Windows 上使用 Visual Studio 2010 Express。

**编辑：**我最感兴趣的是决定其中一种方法所涉及的权衡。

*   `m_dummy()`不起作用并且看起来不优雅，即使它会
*   `unique_ptr<X>`对我来说很有趣 - 我什么时候会使用它而不是“普通”`X m_x`成员？除了初始化问题外，这两种方法在功能上似乎或多或少是等效的。
*   `SetPixelFormat()`来自c'tor的电话`DeviceContext`当然有效，但对我来说感觉不干净。`DeviceContext`应该管理资源并启用它的使用，而不是对用户强加一些随机像素格式策略。
*   [stijn's](https://stackoverflow.com/a/13311398/25097) `InitDev()`看起来是最干净的解决方案。

在这种情况下，我几乎总是想要一个基于智能指针的解决方案吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-09T19:18:57.590

[逗号运算符来救援！](http://www.cplusplus.com/doc/tutorial/operators/)表达式`(a, b)`将`a`首先计算，然后是`b`。

```
class DisplayOpenGL {
public:
    DisplayOpenGL(HWND hwnd)
    : m_device(hwnd),
      m_opengl((m_device.SetPixelFormat(), m_device)) { };
private:
    DeviceContext m_device;
    OpenGLContext m_opengl;
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T20:55:02.840

> 在这种情况下，我几乎总是想要一个基于智能指针的解决方案吗？

不。避免这种不必要的并发症。

两种未提及的直接方法：

**方法一：**

干净的方式。

为在构造函数`m_device`中调用的存储创建一个小容器对象。`SetPixelFormat()`然后替换`DisplayOpenGL ::m_device`为该类型的实例。得到了初始化顺序，意图很明确。插图：

```
class DisplayOpenGL {
public:
    DisplayOpenGL(HWND hwnd)
        : m_device(hwnd),
            m_opengl(m_device) { }
private:
    class t_DeviceContext {
    public:
        t_DeviceContext(HWND hwnd) : m_device(hwnd) {
            this->m_device.SetPixelFormat();
        }
        // ...
    private:
        DeviceContext m_device;
    };
private:
    t_DeviceContext m_device;
    OpenGLContext m_opengl;
}; 
```

**方法 B：**

快速而肮脏的方式。在这种情况下，您可以使用静态函数：

```
class DisplayOpenGL {
public:
    DisplayOpenGL(HWND hwnd)
    : m_device(hwnd),
      m_opengl(InitializeDevice(m_device)) { }
private:
    // document why it must happen this way here
    static DeviceContext& InitializeDevice(DeviceContext& pDevice) {
      pDevice.SetPixelFormat();
      return pDevice;
    }
private:
    DeviceContext m_device;
    OpenGLContext m_opengl;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:54:49.557

在这里使用 uniqe_ptr 似乎很合适：您可以转发声明 DeviceContext 和 OpenGLContext，而不是包括它们的标头，这是[一件好事](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)）。然后这个工作：

```
class DisplayOpenGL
{
public:
  DisplayOpenGL( HWND h );
private:
  unique_ptr<DeviceContext> m_device;
  unique_ptr<OpenGLContext> m_opengl;
};

namespace
{
  DeviceContext* InitDev( HWND h )
  {
    DeviceContext* p = new DeviceContext( h );
    p->SetPixelFormat();
    return p;
  }
}

DisplayOpenGL::DisplayOpenGL( HWND h ):
  m_device( InitDev( h ) ),
  m_opengl( new OpenGLContext( *m_device ) )
{
} 
```

如果您可以使用 c++11，则可以将 InitDev() 替换为 lambda。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T16:47:53.063

如果`OpenGLContext`有 0 参数构造函数和复制构造函数，您可以将构造函数更改为

```
DisplayOpenGL(HWND hwnd)
: m_device(hwnd)
{
    m_device.SetPixelFormat();
    m_opengl = OpenGLContext(m_device);
}; 
```

`unique_ptr`通常在您希望将成员之一设为可选或“可空”时使用，您可能希望也可能不希望在此处执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-10T06:10:45.013

首先，你做错了。:-) 在构造函数中做复杂的事情是非常糟糕的做法。曾经。在必须传递给构造函数的辅助对象上创建这些操作函数。更好的是在你的类之外构造你的复杂对象并将它们完全创建，这样如果你需要将它们传递给其他类，你也可以同时将它们传递给它们的构造函数。另外，这样您就有机会检测错误、添加合理的日志记录等。

```
class OpenGLInitialization
{
public:
    OpenGLInitialization(HWND hwnd)
        : mDevice(hwnd) {}
    void                 SetPixelFormat  (void)       { mDevice.SetPixelFormat(); }
    DeviceContext const &GetDeviceContext(void) const { return mDevice; }
private:
    DeviceContext mDevice;
};        

class DisplayOpenGL 
{
public:
    DisplayOpenGL(OpenGLInitialization const &ogli)
    : mOGLI(ogli),
      mOpenGL(ogli.GetDeviceContext())
      {}
private:
    OpenGLInitialization mOGLI;
    OpenGLContext mOpenGL;
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T15:51:06.237

如果它属于`DeviceContext`（从您的代码中看起来如此），请从`DeviceContext`c'tor 调用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-17T15:48:53.013

将[逗号运算符](http://www.cplusplus.com/doc/tutorial/operators/)与[IIFE（立即调用函数表达式）](http://en.wikipedia.org/wiki/Immediately-invoked_function_expression)结合使用，它允许您定义仅使用逗号运算符不可用的变量和其他复杂内容：

```
struct DisplayOpenGL {
    DisplayOpenGL(HWND hwnd)
        : m_device(hwnd)
        , opengl(([&] {
            m_device.SetPixelFormat();
        }(), m_device))
    DeviceContext m_device;
    OpenGLContext m_opengl;
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-29T12:54:11.900

逗号运算符在您的情况下会做得很好，但我认为这个问题是您的课程计划不当的结果。我要做的是让构造函数只初始化对象的状态而不是依赖项（例如 OpenGL 渲染上下文）。我假设 OpenGLContext 的构造函数初始化了 OpenGL 渲染上下文，这就是我不会做的。相反，我会`CreateRenderingContext`为 OpenGLContext 类创建方法来进行初始化并调用`SetPixelFormat`

```
class OpenGLContext {
public:
    OpenGLContext(DeviceContext* deviceContext) : m_device(deviceContext) {}
    void CreateRenderingContext() {
        m_device->SetPixelFormat();
        // Create the rendering context here ...
    }
private: 
    DeviceContext* m_device;
};

...

DisplayOpenGL(HWND hwnd) : m_device(hwnd), m_opengl(&m_device) {
    m_opengl.CreateRenderingContext();
} 
```

# ruby - puts a 和 puts "#{a}" 的区别

> ID：13311187
> 
> 赞同：2
> 
> 时间：2012-11-09T15:43:16.983
> 
> 标签：ruby

我认为这样做`puts #{a}`会产生与 相同的输出`puts a`，但发现情况并非如此。考虑：

```
irb(main):001:0> a = [1,2]
=> [1, 2]
irb(main):002:0> puts a
1
2
=> nil
irb(main):003:0> puts "#{a}"
12
=> nil
irb(main):004:0> 
```

在上面的示例中，这并不重要，但是当我想在一行上打印多个变量时可能很重要，例如（psudocode）：

```
puts "There are #{a.size} items in the whitelist: #{a}" 
```

为什么这里的输出不同？他们实际上做了不同的事情，还是有不同的语义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T15:45:17.670

那是因为`"#{a}"`调用`#to_s`表达式的方法。

所以：

```
puts a        # equivalent to, well, puts a
puts "#{a}"   # equivalent to the next line
puts a.to_s 
```

*更新：*

详细地说，`puts`最终会调用`#to_s`，但它会在实际输出之前添加逻辑，包括对数组的特殊处理。只是碰巧`Array#to_s`不使用相同的算法。[（请参阅`puts`此处的文档。）](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)这正是它的作用......

```
rb_io_puts(int argc, VALUE *argv, VALUE out)
{
    int i;
    VALUE line;

    /* if no argument given, print newline. */
    if (argc == 0) {
        rb_io_write(out, rb_default_rs);
        return Qnil;
    }
    for (i=0; i<argc; i++) {
        if (TYPE(argv[i]) == T_STRING) {
            line = argv[i];
            goto string;
        }
        line = rb_check_array_type(argv[i]);
        if (!NIL_P(line)) {
            rb_exec_recursive(io_puts_ary, line, out);
            continue;
        }
        line = rb_obj_as_string(argv[i]);
      string:
        rb_io_write(out, line);
        if (RSTRING_LEN(line) == 0 ||
            !str_end_with_asciichar(line, '\n')) {
            rb_io_write(out, rb_default_rs);
        }
    }

    return Qnil;
} 
```

# database - 对于可以由两个不同资源拥有并因此需要两个不同外键的数据库表的最佳设计是什么？

> ID：13311188
> 
> 赞同：10
> 
> 时间：2012-11-09T15:43:20.693
> 
> 标签：database, database-design, foreign-keys, relational-database

我的应用程序具有可属于组的用户的通知设置。组管理员可以为整个组定义设置，以便在任何用户执行操作时通知管理员。管理员还可以为单个用户定义设置，这将覆盖组设置。

现在我有一个包含列的数据库：`group_id, action1, action2, action3, ...`. 这些操作是布尔值，用于确定管理员在其组中的用户执行该操作时是否收到通知。

我可以创建一个由 User 模型而不是 Group 模型拥有的单独表，但是将完全相同的数据存储在一个完全独立的表中感觉效率很低，除非`group_id`将`user_id`.

另一种选择是添加`user_id`到我已经拥有的表中，并允许`group_id`. 在确定用户的通知设置时，应用程序将首先根据用户选择设置，然后回退到`group_id`不为空的设置。这感觉效率很低，因为数据库中会有很多空值，但它肯定需要我做的工作更少。

对于这种情况，有没有比我描述的两种更有效的设计？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T23:21:28.650

通常，有两种策略来处理这样的情况：

## 1\. 使用独占 FK

本质上，每个可能的父表在子表中都有自己的、**单独**的外键，并且有一个 CHECK 强制**其中一个**是非 NULL 的。由于 FK 仅对非 NULL 字段强制执行，因此只会强制执行其中一个 FK。

例如：

![在此处输入图像描述](../Images/3cd2af6f7020c4a961d08932087da2c7.png)

*（省略用户和组之间的关系）*

```
CHECK (
    (group_id IS NOT NULL AND user_id IS NULL)
    OR (group_id IS NULL AND user_id IS NOT NULL)
) 
```

## 2.使用继承

从通用超类型继承用户和组，然后将设置连接到超类型：

![在此处输入图像描述](../Images/42da2311065672efe13ab65fbeeb64ff.png)

有关继承（又名类别、子类化、子类型、泛化层次结构等）的更多信息，请查看[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)的“子类型关系”一章。不幸的是，现代 DBMS 本身并不支持继承——关于物理实现它的一些想法，请查看[这篇文章](https://stackoverflow.com/a/12037398/533120)。

这是一个重型解决方案，可能仅适用于两个表（组和用户），但对于许多表来说是相当“可扩展的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:42:23.287

一个 Actions 表怎么样？

它可能有以下列：

```
Table Actions:
ActionId - Identity columns
Action   - Store your action here; type would depend on your system
RefId    - The Id for either the user or the group
RefTable - either User or Group 
```

然后在访问表时，您已经知道您的 ID，并且您知道它是组还是用户，然后可以获得适当的操作。

这有意义吗？

**更新：**

如果您可能对两个用户/组执行相同的操作并希望一个优先级（正如您在 Q 中提到的那样），您还可以添加一`priority`列并将其设置为`tinyInt`- 较低的数字 = 较高的优先级。然后，当您选择操作时，您可以按此优先级对它们进行排序。然后执行第一个动作，或按顺序执行每个动作。

# python - 对 subprocess.Popen 感到困惑

> ID：13311190
> 
> 赞同：2
> 
> 时间：2012-11-09T15:43:23.943
> 
> 标签：python, subprocess

这个问题让我很困惑

我只想在 18 个不同的输入文件上运行 1 个命令，所以我把它写成了

```
while filenames or running:
  while filenames and len(running) < N_CORES:
    filename = filenames.pop(0)
    print 'Submiting process for %s' % filename
    cmd = COMMAND % dict(filename=filename, localdir=localdir)
    p = subprocess.Popen(cmd, shell=True)
    print 'running:', cmd
    running.append((cmd, p))

  i = 0
  while i < len(running):
    (cmd, p) = running[i]
    ret = p.poll()
    if ret is not None:
        rep = open('Crux.report.%d' % (report_number), 'w')
        rep.write('Command: %s' % cmd)
        print localdir
        print 'done!' 
        report_number += 1
        running.remove((cmd, p))
    else:
        i += 1
  time.sleep(1) 
```

但是当我在 3 小时后运行它时，所有进程都进入了睡眠模式。

但是，如果我手动从终端调用命令（对于所有不同的文件），它们都正常。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:46:41.017

我假设您要运行 18 个进程（每个文件一个进程），并且不超过`N_CORES`并行进程。

最简单的方法可能是在`multiprocessing.Pool`这里使用：

```
import multiprocessing as mp
import subprocess

def process_file(filename):
    try:
        return filename, subprocess.call([cmd, filename], cwd=localdir)
    except OSError:
        return filename, None # failed to start subprocess

if __name__ == "__main__":
    pool = mp.Pool()
    for result in pool.imap_unordered(process_file, filenames):
        # report result here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:23:41.930

在不知道您的子流程应该做什么以及它们应该运行多长时间的情况下，很难在这里给出准确的答案。

我在您的程序中看到的一些问题：

*   您检查`i < len(running)`, 同时增加 i 并从中删除`running`.
    要么使用计数器，要么检查列表是否仍然包含元素，但不要同时执行这两项操作。这样，您将在中途跳出循环。
*   `i`每次流程*未*完成时递增，如果流程*已*完成，您可能希望递增。

# facebook - 带有 2 个对象的 Opengraph 操作

> ID：13311196
> 
> 赞同：0
> 
> 时间：2012-11-09T15:43:43.043
> 
> 标签：facebook, metadata, facebook-opengraph

我有一个动作，例如“测试”，我想发布 2 个对象，比如说“objectFoo”和“objectBaa”

将 2 个对象连接到一个动作的动机是我想为一个动作创建 2 个聚合，每个聚合显示不同的数据。

**使用图形 API 资源管理器...**

我可以成功发布一个“**测试**”操作，在其中添加字段“ **objectFoo** ”是“http://apps.facebook.com/myapp/opengraph?id=objectFoo”

和

我可以成功发布一个“**测试**”操作，在其中添加字段“ **objectBaa** ”是“http://apps.facebook.com/myapp/opengraph?id=objectBaa”

**但是**，我想发布一个给出这两个对象的动作。当我尝试这个时，我得到一个代码 100 错误，内容如下： `{ "error": { "message": "(#100) Only one of objectFoo, objectBaa reference objects can be specified for type myapp:test.", "type": "OAuthException", "code": 100 } }`

在 opengraph 仪表板上，定义和操作时，可以在“连接的对象类型”字段中连接和操作多个对象（我想发布屏幕截图，但我是这里的新手），但如前所述，我收到测试时出错。Graph API 资源管理器是否存在错误，或者我试图做的事情根本上是错误的？

感谢您的任何反馈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:38:43.053

在同一个帖子中使用两个对象和一个动作是不可能的。为了制作一个活动帖子，您可以只使用一个带有动作的对象，尽管您可以在两个不同的帖子中使用具有相同动作的两个不同对象。

```
//this is not possible(same action with two different object in same post)
$facebook->api("me/app_nameSpace:actionName","POST",array("object1"=>"object1_url","object2"=>"object2_url");

//though you can do this(same action with two diffrent object in two different post)
$facebook->api("me/app_nameSpace:actionName","POST",array("object1"=>"object1_url");
$facebook->api("me/app_nameSpace:actionName","POST",array("object2"=>"object2_url"); 
```

所以你需要发布两个单独的动作活动，比如：

```
user created picture
user created game 
```

其中`create`是动作名称，`picture`和`game`是两个不同的对象。

# android - android在动作栏事件上杀死特定线程

> ID：13311198
> 
> 赞同：6
> 
> 时间：2012-11-09T15:43:45.340
> 
> 标签：android, multithreading, actionbarsherlock

我想杀死一个特定的线程，但无法找到让它工作的方法。我接下来会包含所有信息，即使它看起来并不重要：

我使用动作栏 sherlock 并想在动作按钮事件上杀死一个线程。所以我有：

```
 Thread myThread;
    myThread = new Thread(new Runnable(){
        public void run(){
                functionX();
        }
      });
    myThread.start(); 
```

该线程是一个长时间运行的线程，并且 funcionX() 也创建了一些新线程。我想在以下情况下杀死线程：

```
 public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()) {

    case android.R.id.home:
        myThread.interrupt();
        break;
    }; 
```

我已经尝试使用 ExecutorService，使用 submit(runnable) 作为 Future 结果和 Future.cancel 但似乎不起作用。我还应该提到 functionX() 使用 http get 请求从 JSON 服务获取数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:07:04.080

有多种方法可以做到这一点，其中几个可以像

1.  而不是 Thread 使用 TimerTask 并调用 timeTask.cancel() - 用于中断
2.  在线程的 run() 方法中，不断检查布尔值以确定线程是否应该终止，然后您可以调用中断或更好地抛出异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:16:57.230

来自rock_win的选项2是要走的路，你可以在这里看到为什么附上一些代码：

[http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-12T12:32:37.657

自从提出这个问题以来已经有好几年了，但是如果有人需要，那么您可以使用您的线程对象，而不会出现任何问题`thread.interrupt();`。如果您不熟悉 Java 或 Java 中的线程并且想要停止线程而不更改很多内容或切换到不同的技术（如 timertask），那么这可以正常工作。

万一您需要再次启动线程，您需要重新初始化 Thread 对象才能这样做。所以，为了做到这一点，我简单地创建了一个实现 Runnable 的类，这样当我需要重新初始化线程对象时我不必输入太多。然后，每当我需要启动线程时，我都会调用

```
mythread = new Thread(new MyRunnable());  // initialize the thread
mythread.start();   // run the thread 
```

然后当我需要停止它时，然后：

```
mythread.interrupt();  //stop the thread 
```

当我需要再次启动线程时，我不得不再次这样做：

```
mythread = new Thread(new MyRunnable());  //re-initialize the thread
mythread.start();   // start the new thread 
```

# android - 从服务读取时首选项不是最新的

> ID：13311199
> 
> 赞同：2
> 
> 时间：2012-11-09T15:43:50.240
> 
> 标签：android

我的应用程序中有一个非常简单的首选项实现。这是我的偏好活动：

```
public class Preferences extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

每个读取首选项的活动或服务都会这样做：

```
preferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

现在，其中一项设置是应用程序连接到的服务器。这是作为非绑定服务实现的，因为即使用户离开应用程序，它也应该保持在线状态。当服务启动 (onStartCommand) 时，将从首选项中读取套接字信息。

问题：更改首选项并重新启动服务后，它仍然具有旧值。

我不明白！请帮忙 ：）

* * *

这里有更多细节，因为它仍然无法正常工作。我猜我的错误在其他地方......

我的服务如下所示。

```
public class XMPPService2 extends Service {
    SharedPreferences preferences;

public void onCreate() { ... }

public int onStartCommand(Intent intent, int flags, int startId) {
    preferences = getSharedPreferences("com.company.appname_preferences.xml", MODE_MULTI_PROCESS);
    Log.d(TAG, preferences.getString("server", "DEFAULT")); // this always prints the default value
}

public void onDestroy() { ... }

} 
```

据我所知，我没有更多的事情要做。我也试过

```
getPreferenceManager().setSharedPreferencesMode(MODE_MULTI_PROCESS); 
```

前

```
addPreferencesFromResource(R.xml.preferences); 
```

但这没有帮助。

现在，我知道这些方法已被弃用。但是，我必须确保该应用程序可以在平板电脑和 2.3 设备上运行。

我只是想提一下，我对 android 还是新手，也许我误解了一些基本概念。我得到的答案与我的网络研究一致，所以我希望它们是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T19:45:13.867

要在进程之间共享首选项，您需要在首选项文件上设置 *MODE_MULTI_PROCESS*。问题是您无法控制默认首选项文件的标志，对吗？嗯，有办法。在您的*PreferenceActivity*类中，将这些行添加到*onCreate()*：

```
PreferenceManager prefMgr = getPreferenceManager();
prefMgr.setSharedPreferencesName("preferences");
prefMgr.setSharedPreferencesMode(MODE_MULTI_PROCESS); 
```

然后，不要使用*PreferenceManager.getDefaultSharedPreferences*，而是使用以下方法从文件中获取首选项：

```
getSharedPreferences("preferences", MODE_MULTI_PROCESS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:50:42.220

如果您尝试从不同的进程访问共享首选项（即使它们在同一个包中），您需要使用 MODE_MULTIPROCESS。

请使用以下代码：

```
 SharedPreferences pref = getSharedPreferences("com.mypackage.myapp_preferences", MODE_MULTI_PROCESS); 
```

重要的是使用 MODE_MULTI_PROCESS 和您的首选项文件的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T15:52:15.630

您必须从同一个包中读取您的偏好。将您的服务移动到与偏好活动相同的包中，您就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T18:16:19.620

这似乎是android中的一个错误：[https ://code.google.com/p/android/issues/detail?id=66625](https://code.google.com/p/android/issues/detail?id=66625)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T15:53:28.903

这可能是因为该方法`addPreferencesFromResource()`在 API 11 中已被贬值：

[在这里](http://developer.android.com/reference/android/preference/PreferenceActivity.html#addPreferencesFromResource%28int%29)阅读更多

更有可能是如何提交首选项存在问题。你能发布你的XML吗？

# windows - 从命令行获取默认打印机名称？

> ID：13311201
> 
> 赞同：13
> 
> 时间：2012-11-09T15:43:49.073
> 
> 标签：windows, windows-7

Microsoft Windows XP 附带一个 VBS 脚本，用于从命令行管理本地和网络打印机：

从命令行获取默认打印机详细信息：

```
cscript C:\windows\system32\prnmngr.vbs -g 
```

从 Windows 命令行获取添加到系统的打印机列表：

```
cscript C:\windows\system32\prnmngr.vbs -l 
```

Windows 7 是否有任何等效命令？我只需要获取默认打印机详细信息并获取连接到系统的打印机列表。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T15:50:17.313

在 Windows 7 中，这些相同的脚本位于

```
C:\Windows\System32\Printing_Admin_Scripts\en-US 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-05T11:23:17.597

所有打印机名称的列表并显示默认名称（您可以阅读文档获取更多详细信息）

```
wmic printer get name,default 
```

如果要输出到文件，请使用：

```
wmic printer get name,default > D:\catalog\file.txt 
```

**可用性**

*wmic 命令是在以下 Microsoft 操作系统中作为 wmic.exe 提供的外部命令。*

```
Windows XP professional
Windows 2003
Windows Vista
Windows 7
Windows 8
Windows 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:56:38.037

我在sideXside文件夹中找到了我的...

C:\windows\winsxs\x86_microsoft-windows-p..inscripts.resources_31bf3856ad364e35_6.1.7600.16385_en-us_0e83b619ada3e7ed\

我运行了以下命令：cscript C:\windows\winsxs\x86_microsoft-windows-p..inscripts.resources_31bf3856ad364e35_6.1.7600.16385_en-us_0e83b619ada3e7ed\prnmngr.vbs -g

有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T18:05:30.330

要在 Windows 8.1 上列出活动的打印机组件：

**c:>cscript C:\Windows\System32\Printing_Admin_Scripts\en-US\prnmngr.vbs -l | findstr "打印机名称"**

![在此处输入图像描述](../Images/f6231f8b1768e07c4c4bdc7191ee708f.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-27T08:17:19.627

在 Windows 10 上，脚本位于与 Windows 7 相同的位置。执行以下命令以显示默认打印机。

```
cscript C:\Windows\System32\Printing_Admin_Scripts\en-US\prnmngr.vbs -g 
```

注意如果没有默认打印机，脚本将不返回任何内容

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-13T12:32:35.780

在 Windows 8.1 中删除打印机：

```
cscript C:\Windows\System32\Printing_Admin_Scripts\en-US\prnmngr.vbs -d -p "Printer name" 
```

我遇到了打印机没有显示在设备/打印机中的问题，因此无法将其删除，尽管当我在 Firefox 中按文件 > 打印时它就在那里。这也阻止了我在实际安装中使用打印机名称（它让我不得不在默认打印机的末尾附加 _1！”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-28T07:55:14.857

使用批处理文件（无 VBScript 文件）：

```
@echo off

::Get printer CLSID
for /f %%a in ('reg query HKCU\Printers\Defaults') do (set regkey=%%a)
::Get printer name from the previous CLSID

for /f "tokens=3*" %%a in ('reg query %regkey%') do (set printername=%%a %%b)
echo Printer name is: %printername% 
```

我希望这可以帮助你

# c# - 如何在 SQL Server CE 数据库中插入多行？

> ID：13311202
> 
> 赞同：-6
> 
> 时间：2012-11-09T15:43:56.570
> 
> 标签：c#, sql, sql-server-ce

我正在尝试对 SQL Server CE 数据库中的记录进行排列，但每次都有不同的结果，尤其是对于 20 选择 5 = 15504

我在 C# 中创建了 5 个 for 循环，它们从一张表中读取日期

```
 for(int i=1;i<n;i++)
 {
         for (acv1=1; acv1 <= n; acv1++)
         { 
             string sql = "SELECT PId,DateOFVisit,RaId,VisitNum from  tblPatientVisit";
             visit1 = new ArrayList();

             if (id > 0)
             {
                    sql += "\n where PId= " + id + "AND VisitNum=" + acv1;
             }

                try
                {
                    SqlCeCommand cm1 = new SqlCeCommand(sql, f.conn);
                    SqlCeDataAdapter da1 = new SqlCeDataAdapter(cm1);

                    DataTable dt1 = new DataTable();
                    da1.Fill(dt1);

                    foreach (DataRow dr in dt1.Rows)
                    {
                        visit1.Add(dr["VisitNum"].ToString());
                        visit1.Add(dr["PId"].ToString());
                        visit1.Add(p_name);
                        visit1.Add(dr["DateOfVisit"].ToString());
                        visit1.Add(description(Convert.ToInt32(dr["RaId"])));
                        break;
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
                } 

     for(int x=i+1;x<n;x++)
     {
         // select statement here for x and stored it on array list b
         for(int y=x+1;y<n;y++)
         {
              // select statement here for y and stored it on array list c
              for(intz=y+1;z<n;z++)
              {
                  // select statement here for z  and stored it on array list d
                  for(int t=z+1;z<n;z++)
                  {
                       // select statement here for t and stored it on array list e
                       // in order to insert the array lists in order but i got different result than I expected
                  }
              }
          }
      }
} 
```

我想得到这样的结果

```
1 2 3 4 5
1 2 3 4 6
1 2 3 4 7
1 2 3 4 8
1 2 3 4 9
1 2 3 4 10
1 2 3 4 11
1 2 3 4 12
1 2 3 4 13 
```

直到

```
16 17 18 19 20 
```

我从上面的代码中得到了什么

```
16 2 4 6 10 
```

编辑 ：

我有 20 条记录`tblACV`，我想读取这条记录并对记录进行排列并将它们再次存储到另一个表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:16:37.947

我不确定这是否是您真正想要的，但这会给出您所期望的数字：

```
 int n = 20;
    for ( int i = 4; i < n; i++) {
        for ( int j = 0; j < 4; j ++ ) {
            System.out.print(j + 1);
        }
        System.out.println(i + 1);
    } 
```

# java - 使用 Apache FTPClient 3.1 和 FTP.BINARY_FILE_TYPE 上传后的 JAVA 6 和损坏的文件

> ID：13311206
> 
> 赞同：1
> 
> 时间：2012-11-09T15:44:07.307
> 
> 标签：java, upload, ftp, apache-commons, ftp-client

我真的要疯了。

我正在编写一个小型 Java（必须是 SDK 6）工具，使用 commons-net-3.1.jar 库将一堆文件同时上传到另一组服务器。我主要将它与 .jpg 图像一起使用。在有人问之前我将连接设置为 BINARY_FILE_TYPE :)

当我尝试运行它时，一切都很顺利，但有时，在上传图像后，它们上面有“小线条”，就像文件在传输过程中被损坏一样。

这一小段代码是完成所有工作的代码。当 os.write 失败以保持文件上传正确时，我应该如何管理第一个捕获的任何线索？

```
try {
    InputStream is = new FileInputStream(rutaFichero);
    OutputStream os = ftp.storeFileStream(nombreFichero);
    byte buf[] = new byte[8192];
    bytesRead = is.read(buf);

    while ((bytesRead = is.read(buf)) != -1) {
        try {
            os.write(buf, 0, bytesRead);
        } catch (IOException ioe) {
        } catch (NullPointerException npe) {
        }
    }

    is.close();
    try {
        os.close();
        completado = ftp.completePendingCommand();
        if (completado) {
    } catch (NullPointerException npe) {}
} 
```

出于好奇，我认为这可能只是线路状况不佳，所以我在传输了几天后检查了文件的大小，并且......它们都不匹配！哇！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:46:24.850

你在这里的第一行有一个错误：

```
bytesRead = is.read(buf);

while ((bytesRead = is.read(buf)) != -1) {
    try {
        os.write(buf, 0, bytesRead);
    } catch (IOException ioe) {
    } catch (NullPointerException npe) {
    }
} 
```

你永远不会写第一个`buf`内容。您只需阅读它们，然后在`while`循环中阅读后续块。删除第一个`is.read()`，你会没事的。

这是避免此类繁琐代码并使用实用方法的另一个原因，例如[`IOUtils.copy()`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)：

```
InputStream is = new FileInputStream(rutaFichero);
OutputStream os = ftp.storeFileStream(nombreFichero);
IOUtils.copy(is, os);
is.close();
os.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T08:42:37.117

当某个人给我发了一封电子邮件，给我一个关于确保在登录后将模式类型设置为二进制的建议时，问题就解决了，以前从来没有。

# mongodb - 在数组中搜索多个字段

> ID：13311207
> 
> 赞同：1
> 
> 时间：2012-11-09T15:44:10.240
> 
> 标签：mongodb

我有一个结构如下的 MongoDB 文档：

```
{
  "user_id": 7387,
  "first_name": "Daniel",
  "roles": [
    {
      "role_id": "509c20144fd846549e8d42ef",
      "role_name": "Writer",
      "is_lead": 0
    },
    {
      "role_id": "509c20344fd846549e8d42f0",
      "role_name": "Editor",
      "is_lead": 1
    }
  ]
},
{
  "user_id": 15735,
  "first_name": "Tom",
  "roles": [
    {
      "role_id": "509c203f4fd846549e8d42f1",
      "role_name": "Admin",
      "is_lead": 0
    },
    {
      "role_id": "509c20144fd846549e8d42ef",
      "role_name": "Writer",
      "is_lead": 1
    },
    {
      "role_id": "509c20344fd846549e8d42f0",
      "role_name": "Editor",
      "is_lead": 0
    }
  ]
} 
```

如何找到所有将 roles.role_name 作为 Writer 并且将 roles.is_lead 作为 1 的用户（所有作家也是潜在客户）？

我试过：

```
db.users.find({$and:[{"roles.role_name":"Writer","roles.is_lead":1}]}); 
```

在上面的例子中，它应该只返回“Tom”。但这会返回“Tom”和“Daniel”（我猜它选择 {roles.is_lead:1} 作为“Daniel”的编辑角色。我该如何解决这个查询？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:55:57.557

您正在寻找的是[`$elemMatch`](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29#DotNotation%28ReachingintoObjects%29-Matchingwith%24elemMatch)确保您的搜索匹配特定元素，而不是同一文档中任何元素的混合。

```
db.test.find({roles: {$elemMatch: {role_name:"Writer", is_lead:1}}}) 
```

您的原始查询也与仅执行默认基本搜索相同，因为这也是 AND。问题是 AND 应用于文档的任何部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:56:51.383

尝试简单 db.users.find({"roles.role_name":"Writer","roles.is_lead":1});

# powershell - PowerShell：扩展语言文件中的异常对象属性

> ID：13311214
> 
> 赞同：1
> 
> 时间：2012-11-09T15:44:24.310
> 
> 标签：powershell

我正在编写一个脚本，其中包含许多需要输出到日志或屏幕的字符串。为了帮助简化维护，我创建了一个非常简单的 lang.xml 文件来存储字符串。许多字符串显示脚本中变量中保存的信息，因此我编写了一个小 cmdlet，它将扩展返回的 xml #text 节点中的字符串。

在我在 catch 块中使用它来格式化错误消息之前，这非常有效。例如，当我尝试展开异常消息时，会返回一个空字符串。即使我将 Exception 对象传递给 cmdlet，它也会扩展为空字符串。下面是 XML 和 cmdlet 的片段，以及示例输出。

示例 XML：

```
<?xml version="1.0" ?>
  <lang>
    <keyword name="ERRMessage">
      <string>"Error message: $($Exception.Exception.Message)"</string>
    </keyword>
  </lang>
</xml> 
```

cmdlet：

```
function Read-Lang
{
  [CmdletBinding()]
  param(
    [Parameter( Mandatory=$true,
                ValueFromPipeline=$true,
                ValueFromPipelineByPropertyName=$true,
                HelpMessage="The name atttribute of a keyword in lang.xml")]
    [string[]] $Keyword,
    $Exception
  )

  begin
  {
    if ( $global:LangXML -eq $null )
    {
      Write-Debug "Language XML has not been loaded, loading now."
      $global:LangXML = [xml] (Get-Content '.\lang.xml')
    }
  }

  process
  {
    foreach ( $name in $Keyword)
    {
      $Query = "/lang/keyword[@name=`"$name`"]/string"
      $global:LangXML.SelectNodes($Query) | 
        ForEach-Object { $ExecutionContext.InvokeCommand.ExpandString($_."#text") }       
    }
  }
} 
```

例子：

```
try { get-content goo -ErrorAction Stop} catch { Read-Lang -KeyWord 'ERRMessage'  -Exception $_ } 
```

预期输出：

```
Error Message: Cannot find path 'path\to\goo' because it does not exist. 
```

实际输出：

```
Error Message: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:00:12.887

我已经用 xml 示例测试了你的代码。

它对我有用，在我删除文件中的`</xml>`结束标签后`lang.xml`，这给了我错误

`$global:LangXML = [xml] (Get-Content '.\lang.xml')`

这是我得到的：

```
PS C:\ps> try { get-content goo -ErrorAction Stop} catch { Read-Lang -KeyWord 'ERRMessage'  -Exception $_ }
Error message: Impossibile trovare il percorso 'C:\ps\goo' perché non esiste.
PS C:\ps> 
```

ps：错误是意大利语，我在it-it文化系统上，但这是正确的错误。

# c - C中缓存方法的理解

> ID：13311215
> 
> 赞同：1
> 
> 时间：2012-11-09T15:44:24.783
> 
> 标签：c, caching

我对缓存很陌生，我想知道是否有人可以帮助我理解这种方法。如果它实际上返回整个缓存块指针，它如何获取标签？*bIndex 在这里做什么，它的缩写是什么意思？

```
cacheBlock* getTag(int index, int tag, int *bIndex) {
  int i;

  for (i = 0; i < assoc; i ++ ) {   
    if (cache[index].block[i].tag == tag) {
      cacheBlock *targetBlock = &cache[index].block[i];
      *bIndex = i;
      return targetBlock;
    }
  }
  *bIndex = -1;
  return NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:01:44.397

下面分析：

```
cacheBlock* getTag(int index, int tag, int *bIndex) 
{
  int i;

  // walk all blocks in cache[index] block[] table
  for (i = 0; i < assoc; i ++ ) 
  {
    // if the block association at this index matches this tag,
    //  then the block we're looking for is in the cache.   
    if (cache[index].block[i].tag == tag) 
    {
      // setup return value (this is unneeded, btw. simply setting
      //  *bIndex and returning (cache[index].block+i) would work).
      cacheBlock *targetBlock = &cache[index].block[i];

      // set out-param to inform them which block[i].tag matched in the
      //  block being returned by address. either this is actually not
      //  needed, or this is a bug, since we already return the precise
      //  block[i] entry by address (see above). the caller may like
      //  knowing *which* block[] entry matched for whatever reason.
      *bIndex = i;

      // return the matching cache[index].block[i] address
      return targetBlock;
    }
  }

  // no match condition. set offset to (-1) and return NULL.
  *bIndex = -1;
  return NULL;
} 
```

话虽如此，我相信您应该检查此代码的调用者，因为他们收到的 block[] 条目已经偏移到他们正在寻找的确切匹配项。即返回的指针不需要 *bIndex 偏移量。如果他们使用它来索引返回地址的偏移量，即他们的代码看起来像这样：

```
int bIndex = 0;
cacheBlock *pEntry = getTag(cache, tag, &bIndex);
if (pEntry != NULL)
{
    // do something with pEntry[bIndex]
} 
```

这很可能是一个错误，也许他们打算返回`cache[index].block`，而不是`cache[index].block+i`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:58:33.227

似乎有一个“全局”缓存数组`static cacheControl cache[SOMESIZE];`或等效数组（我们无法`cache`从代码中分辨出缓存的类型；它可能是指向已分配数据的指针，而不是固定数组）。缓存中要搜索的条目由 标识`index`。在该缓存条目中，有标记的缓存块。此代码对缓存块进行线性搜索，该缓存块由传递给函数的标记值标识为`tag`。代码通过缓存条目中的缓存块列表进行线性搜索（由`assoc`代码中未定义的大小控制 - 神秘）。退出函数时，指向的整数`bIndex`包含缓存中块的索引号（或-1）；返回值是一个指向缓存块的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:01:15.863

该函数所做的是通过缓存块数组执行线性搜索。如果根据给定的整数标记值找到匹配项，则返回一个指针。也许在线评论可能会有所帮助：

```
cacheBlock* getTag(int index, int tag, int *bIndex) {
 int i;

 // The following iterates/increments through all? blocks for
 // the given cache index.  The variable assoc is global to this
 // function and I assume represents the number of entries for
 // each cache index.
 for (i = 0; i < assoc; i ++ ) {   
   // Check to see if a given block matches the one identified
   // by the passed in variable tag.
   if (cache[index].block[i].tag == tag) {
     // It did match so we will grab the address of that block
     cacheBlock *targetBlock = &cache[index].block[i];
     // And return (via parameter) the position at which it was found
     *bIndex = i;
     // And now return the address of (pointer to) the block
     return targetBlock;
   }
 }
 // we did not find the given entry, so pass back -1 as the
 // index to signify that.  And return NULL also to
 // signify that it was not found.
 *bIndex = -1;
 return NULL;
} 
```

# iphone - 无法在运行时从 nsarray 崩溃中访问变量

> ID：13311217
> 
> 赞同：2
> 
> 时间：2012-11-09T15:44:31.517
> 
> 标签：iphone, objective-c, ios, ipad

当我从 NSMuttable 数组中弹出最后一个元素时，我在运行时崩溃。我得到所有元素都很好，但是当我访问最后一个元素时，它会出错。

```
-(id)popOperand{
   id operandObject = [self.operandStack lastObject];
   if(operandObject) [self.operandStack removeLastObject];
   return operandObject;
} 
```

例如：-如果在我的堆栈中我有“8”（它的 NSNumber 对象）“+”（它的 NSString 对象）2（它的 NSnumber 对象）。

```
NSNumber *rightOperand = [self popOperand];
NSString *operation = [self popOperand];
NSNumber *leftOperand = [self popOperand];//when i acess 8 it shows empty array other           element is getting fine; 
```

我的问题是为什么我不能得到最后一个对象，而这个函数对其他元素工作正常。编辑：在运行时弹出 2 后显示堆栈（8 +），但在我弹出 + 后显示堆栈（）为空。但“leftOperand”没有获得价值。我没有使用 ARC。

请详细说明。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:59:53.357

如果您不使用 ARC，那么您会遇到内存管理问题：

```
- (id)popOperand
{
   id operandObject = [self.operandStack lastObject];     // Still retained by operandStack
   if(operandObject) [self.operandStack removeLastObject];// Released by operandStack
   return operandObject;                                  // Could be dealloc'd any time now!
} 
```

试试这个版本，它返回一个`retain`'d 和`autorelease`'d 对象，它符合方法的命名约定：

```
- (id)popOperand
{
   id obj = nil;
   if ([self.operandStack count] > 0)
   {
       id obj = [[[self.operandStack lastObject] retain] autorelease];
       [self.operandStack removeLastObject];
   }
   return obj;
} 
```

# flash - 如何正确命名 gotoAndPlay 函数

> ID：13311224
> 
> 赞同：0
> 
> 时间：2012-11-09T15:44:52.383
> 
> 标签：flash

我想知道 Adob​​e/Macromedia 的人为什么选择函数名称：

gotoAndPlay();

并不是：

goToAndPlay(); //*大写*

有没有合乎逻辑的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:48:43.483

当然。**goto**是技术术语中使用的一个词：[http](http://en.wikipedia.org/wiki/Goto) ://en.wikipedia.org/wiki/Goto 。函数名称使用了goto[和](http://en.wikipedia.org/wiki/Conflation)英文短语*go to的**合并*。

# javascript - iOS 的 JavaScript 日期正则表达式

> ID：13311230
> 
> 赞同：2
> 
> 时间：2012-11-09T15:45:19.070
> 
> 标签：javascript, iphone, ios

在我在 iOS 模拟器中测试它之前，我有一个有效的日期正则表达式。显然，iOS 需要月份名称（例如：Jan）、两位数日期和四位数字。

我是正则表达式的新手，但这是我的尝试，但没有成功。

```
/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s\d{2},\d{4}$/; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:49:40.443

试试这个`/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/`mm/dd/yyyy

对于 dd/mmm/yyyy

`^(([0-9])|([0-2][0-9])|([3][0-]))\/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\/\d{4}$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:04:17.913

您的表达式接受如下字符串：

```
jan 12,2012 // works
Jan 12,2012 // doesn't work! 
```

注意大写的 J。正则表达式区分大小写，也许这就是它不适合你的原因。

尝试这样的事情：

```
/^((j|J)an|(f|F)eb|(m|M)ar|(a|A)pr|(m|M)ay|(j|J)un|(j|J)ul|(a|A)ug|(s|S)ep|(o|O)ct|(n|N)ov|(d|D)ec)\s\d{2},\d{4}$/ 
```

你必须定义月份吗？如果你有更多的灵活性试试这个：

```
/^[a-zA-Z]{3}\s\d{2},\d{4}$/
/[a-zA-Z]{3}\s\d{2},\d{4}/     // works also 
```

这是一个很好的网站，我用它来测试我的正则表达式： [RegexPal](http://regexpal.com/)

问候

# python - 复制 virtualenv 而无需在同一台机器上再次下载所有包

> ID：13311232
> 
> 赞同：6
> 
> 时间：2012-11-09T15:45:25.057
> 
> 标签：python, virtualenv, pip

我有几个需要类似依赖项的项目，我不想让 pip 每次都从网络上删除依赖项。例如，我正在使用 norel-django 包，如果我在系统范围内安装它，它将与我的标准 django（rdbms 版本）冲突。

有没有办法让我使用 pip “重用”下载的依赖项？我是否需要对源 tar.bz2 文件进行 DL 并制作类似于 pip 存档或其他内容的文件夹结构？任何援助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T15:51:39.063

将以下内容添加到`$HOME/.pip/pip.conf`：

```
[global]
download_cache = ~/.pip/cache 
```

这告诉 pip 缓存下载，`~/.pip/cache`所以下次它不需要出去再次下载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:47:53.167

看起来 virtualenv 有一个`virtualenv-clone`命令，或者可能`virtualenvwrapper`有？

无论如何，它看起来比复制和粘贴虚拟环境目录更复杂：

[https://github.com/edwardgeorge/virtualenv-clone](https://github.com/edwardgeorge/virtualenv-clone)

此外，virtualenv 似乎有一个标志，可以帮助你移动你的 virtualenv。

[http://www.virtualenv.org/en/latest/#making-environments-relocatable](http://www.virtualenv.org/en/latest/#making-environments-relocatable)

`$ virtualenv --relocatable ENV`来自 virtualenv 文档：

> 这将使 setuptools 或分发创建的一些文件使用相对路径，并将所有脚本更改为使用 activate_this.py 而不是使用 Python 解释器的位置来选择环境。
> 
> 注意：您必须在将任何软件包安装到环境中后运行它。如果使环境可重定位，然后安装新软件包，则必须再次运行 virtualenv --relocatable。
> 
> 此外，这不会使您的包跨平台。您可以移动目录，但它只能在其他类似的计算机上使用。一些可能导致不兼容的已知环境差异：不同版本的 Python，当一个平台使用 UCS2 作为其内部 unicode 表示而另一个使用 UCS4（编译时选项）时，明显的平台变化，如 Windows 与 Linux，或 Intel 与 Linux。 ARM，并且如果您有绑定到系统上 C 库的库，如果这些 C 库位于不同的位置（不同的版本或不同的文件系统布局）。
> 
> 如果您使用此标志来创建环境，当前将隐含 --system-site-packages 选项。

# node.js - 从 node.js 报告上传进度

> ID：13311233
> 
> 赞同：10
> 
> 时间：2012-11-09T15:45:26.633
> 
> 标签：node.js, amazon-s3, formidable, knox-amazon-s3-client

我正在编写一个小型 node.js 应用程序，它从 HTML 表单接收多部分 POST 并将传入数据通过管道传输到 Amazon S3。[强大的](https://github.com/felixge/node-formidable)模块提供[多部分解析](https://github.com/felixge/node-formidable/blob/master/lib/multipart_parser.js)，将每个部分公开为一个节点[Stream](http://nodejs.org/api/stream.html)。[knox](https://github.com/LearnBoost/knox)模块将PUT 处理到 s3。

```
var form = new formidable.IncomingForm()
 ,  s3   = knox.createClient(conf);

form.onPart = function(part) {
    var put = s3.putStream(part, filename, headers, handleResponse);
    put.on('progress', handleProgress);
};

form.parse(req); 
```

我正在通过[socket.io](http://socket.io/)向浏览器客户端报告上传进度，但很难让这些数字反映节点到 s3 上传的真实进度。

当浏览器到节点的上传几乎是瞬间发生时，就像节点进程在本地网络上运行时一样，进度指示器立即达到 100%。如果文件很大，即 300MB，进度指示器会缓慢上升，但仍然比我们的上行带宽允许的要快。在达到 100% 进度后，客户端然后挂起，大概是在等待 s3 上传完成。

我知道在内部`putStream`使用 Node 的[stream.pipe](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)方法，但我不明白它是如何工作的细节。我的假设是节点尽可能快地吞噬传入的数据，并将其放入内存中。如果写入流可以足够快地获取数据，则很少有数据一次保留在内存中，因为它可以被写入和丢弃。但是，如果写入流很慢，就像这里一样，我们可能必须将所有传入的数据保留在内存中，直到可以写入为止。由于我们正在侦听`data`读取流上的事件以发出进度，因此我们最终报告上传速度比实际速度快。

我对这个问题的理解是否接近标记？我该如何修复它？我需要对`write`, `drain`and感到沮丧和肮脏`pause`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T00:58:01.623

您的问题是[`stream.pause`未在 上实现`part`](https://github.com/felixge/node-formidable/blob/master/lib/incoming_form.js#L277)，这是多部分表单解析器输出的非常简单的读取流。

[Knox 指示 s3 请求在部件发出 "data" 时发出 "progress" 事件](https://github.com/LearnBoost/knox/blob/master/lib/client.js#L268)。然而，由于`part`流忽略了暂停，进度事件的发送速度与表单数据的上传和解析速度一样快。

然而，强大的`form`确实知道如何处理`pause`和`resume`（它代理对它正在解析的请求的调用）。

这样的事情应该可以解决您的问题：

```
form.onPart = function(part) {

    // once pause is implemented, the part will be able to throttle the speed
    // of the incoming request
    part.pause = function() {
      form.pause();
    };

    // resume is the counterpart to pause, and will fire after the `put` emits
    // "drain", letting us know that it's ok to start emitting "data" again
    part.resume = function() {
      form.resume();
    };

    var put = s3.putStream(part, filename, headers, handleResponse);
    put.on('progress', handleProgress);
}; 
```

# python - python: 无效的数据类型 (0) (SQLBindParameter)

> ID：13311234
> 
> 赞同：3
> 
> 时间：2012-11-09T15:45:27.493
> 
> 标签：python, pyodbc, freetds

我将 python 2.7 用于特定工作。我正在使用 FreeTDS 连接到 MSSQL Server (2008)。我可以进行一些简单的选择查询，但是当我尝试运行参数化查询时出现错误：

```
('HY004', '[HY004] [FreeTDS][SQL Server]Invalid data type (0) (SQLBindParameter)') 
```

这是我的查询：

```
query = u"UPDATE table SET column1=? WHERE column2=?"
cursor.execute(query,[param1, param2]) 
```

然而，现场相同的代码可以正常工作。

我在各种论坛上浏览了这么多线程，但它们似乎都具有误导性，我真的很困惑。

我的实际问题是什么，你有什么建议？

编辑：我添加了查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-10-09T19:14:17.040

我知道这是一个超级老线程，但我遇到了同样的问题，我的解决方案是输入变量。例如：

```
query = u"UPDATE table SET column1=? WHERE column2=?"

cursor.execute(query,[str(param1), str(param2)]) 
```

在这种情况下，参数的类型并不重要，因为它将被转换为字符串。

# sql-server - 如何在同一个实例中将表、函数和存储过程从一个数据库复制到另一个数据库

> ID：13311238
> 
> 赞同：1
> 
> 时间：2012-11-09T15:45:43.267
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我想将所有表、函数和存储过程从数据库复制到同一个 sql server 2008 实例中的另一个。我能够从源数据库生成脚本，但无法以编程方式（从另一个过程）运行它。我对此进行了很多搜索，但还没有找到答案。

目前，我只是将生成的 sql 代码复制到查询窗口中并手动执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:51:20.823

您可以编写备份/恢复脚本来执行此操作，只需恢复到不同的数据库名称：

BACKUP DATABASE [DatabaseToCopy] TO DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\DatabaseToCopy.bak' WITH NOFORMAT, INIT, NAME = N'DatabaseToCopy-Full Database Backup', SKIP, NOREWIND，NOUNLOAD，STATS = 10，CHECKSUM，CONTINUE_AFTER_ERROR 去

RESTORE DATABASE [DatabaseToCreate] FROM DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\DatabaseToCopy.bak' WITH FILE = 1, NOUNLOAD, REPLACE, STATS = 10 go

只需调整名称和位置并创建一个 sql server 作业来运行它。

# sql - 如何使用聚合 T-SQL 获取日期？

> ID：13311243
> 
> 赞同：0
> 
> 时间：2012-11-09T15:46:13.663
> 
> 标签：sql, sql-server, tsql

我正在尝试获取客户的总访问次数并获取上次访问日期和 nextVisited

```
SELECT 
  COUNT( VisitTracking.customerID) AS #VISIT, 
  Customers.title, 
  Customers.firstName, 
  Customers.LastName, 
  Company.companyName, 
  VisitTracking.DateVisited, 
  CONVERT(date,VisitTracking.nextVisit)AS nextVisit
FROM VisitTracking 
  INNER JOIN Customers ON VisitTracking.customerID = Customers.customerID 
  INNER JOIN Customer_Company ON Customers.customerID = Customer_Company.customerID 
  INNER JOIN Company ON Customer_Company.companyID = Company.companyID
GROUP BY 
  Customers.title, 
  Customers.firstName, 
  Customers.LastName, 
  Company.companyName,
  VisitTracking.DateVisited,
  VisitTracking.nextVisit 
```

结果

```
#VISIT, title, firstName ,LastName, companyName, DateVisited, nextVisit
1,        Mr, Tom, Tom, Jedii design, 2012-11-09, 2012-11-14
2 ,       Mr, Sam, Tom, compudata, 2012-11-10, 2012-11-14
1,       Mr, Mike, Mike, compudata, 2012-11-10, 2012-11-14
1,       Mr, Mike, Mike, compudata, 2012-11-16 ,2012-11-23
1,       Mr, Ryan, Ryan, compudata, 2012-11-07 ,2012-11-09 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:12:07.340

```
SELECT 
  COUNT( VisitTracking.customerID) AS #VISIT, 
  Customers.title, 
  Customers.firstName, 
  Customers.LastName, 
  Company.companyName, 
  max(VisitTracking.DateVisited) as lastVisit, 
  max(CONVERT(date,VisitTracking.nextVisit)) AS nextVisit
FROM VisitTracking 
  INNER JOIN Customers ON VisitTracking.customerID = Customers.customerID 
  INNER JOIN Customer_Company ON Customers.customerID = Customer_Company.customerID 
  INNER JOIN Company ON Customer_Company.companyID = Company.companyID
GROUP BY 
  Customers.title, 
  Customers.firstName, 
  Customers.LastName, 
  Company.companyName 
```

# scala - haxe 中的高级模式匹配（与 scala 示例相比）

> ID：13311244
> 
> 赞同：2
> 
> 时间：2012-11-09T15:46:19.593
> 
> 标签：scala, pattern-matching, haxe

考虑以下 Scala 案例：（受此[博](http://kerflyn.wordpress.com/2011/02/14/playing-with-scalas-pattern-matching/)文启发）

```
sealed abstract class Expr
case class X() extends Expr
case class Const(value : Int) extends Expr
case class Add(left : Expr, right : Expr) extends Expr
case class Mult(left : Expr, right : Expr) extends Expr
case class Neg(expr : Expr) extends Expr 
```

在 Haxe 中，这将响应：

```
enum Expr {
    X();
    Const(val:Int);
    Add(left:Expr, right:Expr);
    Mult(left:Expr, right:Expr);
    Neg(expr:Expr);
} 
```

在这两种语言中，为任何类型的嵌套表达式编写 eval 函数都非常简单。但是我对以下简化函数感兴趣（仅关注乘法）：

在斯卡拉：

```
def simplify(expression: Expr): Expr = expression match {
    case Mult(_, Const(0)) => Const(0)
    case Mult(Const(0), _) => Const(0)
    case Mult(left, Const(1)) => simplify(left)
    case Mult(Const(1), right) => simplify(right)
    case Mult(Const(leftVal), Const(rightVal)) => Const(leftVal * rightVal)
    case Mult(left, right) => Mult(simplify(left),simplify(right))

    case Add(left, right) => Add(simplify(left),simplify(right))
    case Neg(left) => simplify(left)
    case _ => expression
} 
```

我的问题：在 Haxe 中编写等效内容的最简洁/干净的方法是什么？这些是我的尝试，但我对任何一个都不太满意。

第一个（有点讨厌）：

```
public static function simplify(expr:Expr):Expr{
    switch(expr){
        case Mult(left, right):
            if(left.enumEq(Const(0)) || right.enumEq(Const(0))) return Const(0);
            switch(left){
                case Const(leftVal):
                    if(leftVal == 1) return right.simplify();
                    switch(right){
                        case Const(rightVal): return Const(rightVal * leftVal);
                        default:
                    }
                default:
                    switch(right){
                        case Const(rightVal):
                            if(rightVal == 1) return left.simplify();
                        default: 
                    }
            }
            return Mult(left.simplify(), right.simplify());
        case Add(left, right): return Add(left.simplify(), right.simplify());
        case Neg(expr): return Neg(expr.simplify());
        default: return expr;
    }
} 
```

另一个尝试（更简洁，但很hacky）：

```
public static function simplify(expr:Expr):Expr{
    switch(expr){
        case Mult(left, right):
            if(left.enumEq(Const(0)) || right.enumEq(Const(0))) return Const(0);
            if(left.enumEq(Const(1))) return right.simplify();
            if(right.enumEq(Const(1))) return left.simplify();
            if(left.enumConstructor() == right.enumConstructor() &&
                    left.enumConstructor() == Const(null).enumConstructor())
                return Const(Std.int(left.enumParameters()[0] *
                    right.enumParameters()[0]));
            return Mult(left.simplify(), right.simplify());
        case Add(left, right): return Add(left.simplify(), right.simplify());
        case Neg(expr): return Neg(expr.simplify());
        default: return expr;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:20:27.577

Haxe 目前不支持深度模式匹配。这是 3.0 版中正在实施的事情之一。

# html - iframe 在 IE 中始终位于顶部

> ID：13311252
> 
> 赞同：1
> 
> 时间：2012-11-09T15:46:45.017
> 
> 标签：html, css, internet-explorer, iframe, z-index

我在 iframe 中有一些页面内容。我还有一个包含一些用户选项的下拉菜单。在 IE (9) 中，当我打开下拉菜单时，它出现在 iframe 的后面。在所有其他浏览器中，行为都是正确的（菜单出现在 iframe 的顶部）。

我尝试将各种 z-index 属性应用于这些元素，但没有成功。它们共同的父元素只是一个`<body>`标签。

如何确保下拉菜单始终出现在 IE 中 iframe 的顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:43:24.783

因此，一种可能的解决方案是在屏幕上直接在下拉菜单下方放置一个空 iframe。您可以在此上下文中使用 z-index 来确保菜单显示在空 iframe 之上，并且整个内容将显示在原始 iframe 之上。

不是一个很好的解决方案，但它有效。我愿意接受有关如何以更好的方式做到这一点的任何建议。

# c++ - 从右侧移动到奇数位置，从左侧移动到偶数位置

> ID：13311253
> 
> 赞同：1
> 
> 时间：2012-11-09T15:46:46.253
> 
> 标签：c++, algorithm, time-complexity, in-place

给定一个非空的项目数组。您必须将所有项目从右侧移动到奇数位置（从零开始），并从左侧移动到偶数位置，如下所示：

原始数据：0 2 4 6 8 10 12 14 1 3 5 7 9 11 13

结果：0 1 2 3 4 5 6 7 8 9 10 11 12 13 14

O(n) 时间复杂度存在什么就地算法？它的实现方式是什么？

逆问题[到这里](https://stackoverflow.com/questions/12338654/move-all-odd-positioned-element-to-left-half-and-even-positioned-to-right-half-i "这里")就解决了（这个算法本质上可以倒过来，但是看起来会很难看）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:48:27.073

这里只是算法本身。有关详细信息、解释和替代方法，请参阅[逆问题的答案](https://stackoverflow.com/a/12339432/1009831)。

1.  将指向右侧元素池的指针初始化为 N/2。
2.  ^(获取大小为 3 k) +1的最大子数组
3.  通过交换适当的子数组，连接数组开头的 (3 ^k +1)/2 个元素和右侧元素池中的(3 ^(k +1)/2 个元素。)更新池指针。
4.  将循环领导算法应用于该子数组的各个部分，从位置 1、3、9、... 3 ^(k-1)开始：将元素移动到子数组中的正确位置（子数组左侧的元素到偶数位置，从右到奇数位置），被替换的元素也应该移动到它的正确位置，等等，直到这个过程回到起始位置。
5.  使用步骤 2 .. 4 递归处理数组的其余部分。

这个问题比 OP 中提到的逆问题更简单，因为这里我们必须从较大的子数组开始重新排序子数组，顺序与循环领导算法相同（逆问题必须单独并以相反的顺序进行） ，从较小的开始以获得 O(N) 复杂度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:25:10.813

我终于找到了正反问题的解决方案：

```
#include <iterator>
#include <algorithm>
#include <type_traits>
#include <limits>
#include <deque>
#include <utility>

#include <cassert>

template< typename Iterator >
struct perfect_shuffle_permutation
{

    static_assert(std::is_same< typename std::iterator_traits< Iterator >::iterator_category, std::random_access_iterator_tag >::value,
                  "!");

    using difference_type = typename std::iterator_traits< Iterator >::difference_type;
    using value_type = typename std::iterator_traits< Iterator >::value_type;

    perfect_shuffle_permutation()
    {
        for (difference_type power3_ = 1; power3_ < std::numeric_limits< difference_type >::max() / 3; power3_ *= 3) {
            powers3_.emplace_back(power3_ + 1);
        }
        powers3_.emplace_back(std::numeric_limits< difference_type >::max());
    }

    void
    forward(Iterator _begin, Iterator _end) const
    {
        return forward(_begin, std::distance(_begin, _end));
    }

    void
    backward(Iterator _begin, Iterator _end) const
    {
        return backward(_begin, std::distance(_begin, _end));
    }

    void
    forward(Iterator _begin, difference_type const _size) const
    {
        assert(0 < _size);
        assert(_size % 2 == 0);
        difference_type const left_size_ = *(std::upper_bound(powers3_.cbegin(), powers3_.cend(), _size) - 1);
        cycle_leader_forward(_begin, left_size_);
        difference_type const rest_ = _size - left_size_;
        if (rest_ != 0) {
            Iterator middle_ = _begin + left_size_;
            forward(middle_, rest_);
            std::rotate(_begin + left_size_ / 2, middle_, middle_ + rest_ / 2);
        }
    }

    void
    backward(Iterator _begin, difference_type const _size) const
    {
        assert(0 < _size);
        assert(_size % 2 == 0);
        difference_type const left_size_ = *(std::upper_bound(powers3_.cbegin(), powers3_.cend(), _size) - 1);
        std::rotate(_begin + left_size_ / 2, _begin + _size / 2, _begin + (_size + left_size_) / 2);
        cycle_leader_backward(_begin, left_size_);
        difference_type const rest_ = _size - left_size_;
        if (rest_ != 0) {
            Iterator middle_ = _begin + left_size_;
            backward(middle_, rest_);
        }
    }

private :

    void
    cycle_leader_forward(Iterator _begin, difference_type const _size) const
    {
        for (difference_type leader_ = 1; leader_ != _size - 1; leader_ *= 3) {
            permutation_forward permutation_(leader_, _size);
            Iterator current_ = _begin + leader_;
            value_type first_ = std::move(*current_);
            while (++permutation_) {
                assert(permutation_ < _size);
                Iterator next_ = _begin + permutation_;
                *current_ = std::move(*next_);
                current_ = next_;
            }
            *current_ = std::move(first_);
        }
    }

    void
    cycle_leader_backward(Iterator _begin, difference_type const _size) const
    {
        for (difference_type leader_ = 1; leader_ != _size - 1; leader_ *= 3) {
            permutation_backward permutation_(leader_, _size);
            Iterator current_ = _begin + leader_;
            value_type first_ = std::move(*current_);
            while (++permutation_) {
                assert(permutation_ < _size);
                Iterator next_ = _begin + permutation_;
                *current_ = std::move(*next_);
                current_ = next_;
            }
            *current_ = std::move(first_);
        }
    }

    struct permutation_forward
    {

        permutation_forward(difference_type const _leader, difference_type const _size)
            : leader_(_leader)
            , current_(_leader)
            , half_size_(_size / 2)
        { ; }

        bool
        operator ++ ()
        {
            if (current_ < half_size_) {
                current_ += current_;
            } else {
                current_ = 1 + (current_ - half_size_) * 2;
            }
            return (current_ != leader_);
        }

        operator difference_type () const
        {
            return current_;
        }

    private :

        difference_type const leader_;
        difference_type current_;
        difference_type const half_size_;

    };

    struct permutation_backward
    {

        permutation_backward(difference_type const _leader, difference_type const _size)
            : leader_(_leader)
            , current_(_leader)
            , half_size_(_size / 2)
        { ; }

        bool
        operator ++ ()
        {
            if ((current_ % 2) == 0) {
                current_ /= 2;
            } else {
                current_ = (current_ - 1) / 2 + half_size_;
            }
            return (current_ != leader_);
        }

        operator difference_type () const
        {
            return current_;
        }

    private :

        difference_type const leader_;
        difference_type current_;
        difference_type const half_size_;

    };

    std::deque< difference_type > powers3_;

}; 
```

# javascript - 在浏览器 ie6,ie7,ie8 中使用 style.filter 时不起作用

> ID：13311254
> 
> 赞同：1
> 
> 时间：2012-11-09T15:46:47.007
> 
> 标签：javascript, css, internet-explorer

我`style.opacity`在（ff、chrome 等）浏览器中使用。
在 (ie6,7,8) 我正在使用`style.filter`但不起作用。

以下是我所做的：

```
targetElement.style.filter = 'alpha(opacity=30)'; // targetElement is div 
```

前面的代码仅在**ie9**中运行良好，但在**ie6,7,8**中不起作用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:23:04.827

据我所知，IE 6 和 7 没有 alpha 透明度过滤器。您可以通过为开始和结束设置相同的颜色来使用渐变过滤器作为解决方法/hack。MS 梯度过滤器可以处理具有 alpha 透明度的 RGB。

半透明，近乎黑色的背景（alpha 通道是前两个十六进制数字）：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=#E5333333, endColorstr=#E5333333 );
-ms-filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=#E5333333, endColorstr=#E5333333 ); 
```

# git - gitweb 和 gitolite 无法添加新的 repo

> ID：13311258
> 
> 赞同：3
> 
> 时间：2012-11-09T15:47:00.573
> 
> 标签：git, gitolite

我先安装了 gitolite，然后添加了一些用户和一些 repos，一切都很好。然后我添加了 gitweb，并且可以通过 apache 实例查看 repos（只有 gitweb，没有 gitdaemon）。现在的问题是我不能再添加新的存储库了。每次我推送 gitolite-admin conf 文件的更改时，日志中总是显示 2 行

```
remote: FATAL: git config 'gitweb.description' not allowed
remote: check GIT_CONFIG_KEYS in the rc file 
```

尽管有这 2 行烦人的行，但 conf 文件确实每次都在更改。我试图停止 apache 实例，但仍然没有运气:-(

我用谷歌搜索，找不到任何类似的匹配来讨论这个问题。任何人都可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:55:20.803

Gitolite [g2-g3 迁移页面](http://sitaramc.github.com/gitolite/g2migr-example.html)提到：

> 现在转到您的旧克隆，然后推送它：

```
$ cd old.ga
$ gitolite push -f
    ...usual git progress output deleted...
remote: FATAL: git config foo.bar not allowed
remote: check GIT_CONFIG_KEYS in the rc file
To /home/git/repositories/gitolite-admin.git
 + 7eb8163...1474770 master -> master (forced update) 
```

> 啊哈！我忘记在新的 rc 文件中设置`GIT_CONFIG_KEYS`（新名称`GL_GITCONFIG_KEYS`）所以修复：

```
$ vim ~/.gitolite.rc
(edit and set it to `.*` for now) 
```

确保您`.gitolite.rc`确实包含：

```
GIT_CONFIG_KEYS             =>  '.*', 
```

（这个[GitLab 问题](https://github.com/gitlabhq/gitlabhq/issues/1904)中也提到了它，尽管它不是问题的直接根本原因）

* * *

> 我遇到了另一个问题，即当我将新存储库添加到conf时，我`projects.list`的文件没有自动更新。 对于 gitweb，我必须手动编辑该文件。你知道什么可能导致这种情况吗？`gitolite-admin`

“[与外部工具的接口](http://sitaramc.github.com/gitolite/external.html)”页面提到：

> gitweb 可读的 repos 列表被写入一个文件，该文件的名称由`rc`file 变量给出`GITWEB_PROJECTS_LIST`。
> 如果未指定或为空，此变量的默认值为`$HOME/projects.list`。

确保你有`.gitolite.rc`：

```
GITWEB_PROJECTS_LIST        => '/path/to/projects.list', 
```

# python - 最长重复（k 次）子串

> ID：13311259
> 
> 赞同：13
> 
> 时间：2012-11-09T15:47:12.857
> 
> 标签：python, algorithm, bioinformatics, longest-substring

我知道这是一个有点老生常谈的话题，但我已经达到了从已经回答的内容中获得的帮助的极限。

这是针对[Rosalind 项目问题 LREP](http://rosalind.info/problems/lrep/)的。我正在尝试在字符串中找到最长的 k-peated 子字符串，并且已经为我**提供**了后缀树，这很好。我知道我需要用每个节点的后代叶子的数量来注释后缀表，然后找到具有`>=k`后代的节点，最后找到这些节点中最深的。从理论上讲，我已经准备好了。

我从以下资源中获得了很多帮助（哎呀，我只能发布 2 个）：

*   [查找字符串中最长的重复序列](https://stackoverflow.com/questions/11090289/find-longest-repetitive-sequence-in-a-string)
*   [深度优先搜索 (Python)](http://en.literateprograms.org/Depth-first_search_%28Python%29)

我可以获取从根到每个叶子的路径，但我不知道如何预处理树，以便我可以从每个节点获取后代的数量。我有一个单独的算法，它适用于小序列，但它具有指数复杂性，所以对于较大的东西，它需要的时间太长了。我知道使用 DFS 我应该能够以线性复杂度执行整个任务。为了使这个算法起作用，我需要能够在不到 5 分钟的时间内获得最长的 k-peat 的 ~40,000 长度的字符串。

这是一些示例数据（第一行：`sequence`，第二行：`k`，后缀表格式：`parent child location length`）：

```
CATACATAC$
2
1 2 1 1
1 7 2 1
1 14 3 3
1 17 10 1
2 3 2 4
2 6 10 1
3 4 6 5
3 5 10 1
7 8 3 3
7 11 5 1
8 9 6 5
8 10 10 1
11 12 6 5
11 13 10 1
14 15 6 5
14 16 10 1 
```

输出应该是`CATAC`.

使用以下代码（从[LiteratePrograms](http://en.literateprograms.org/Depth-first_search_%28Python%29)修改）我已经能够获取路径，但是在更长的序列上仍然需要很长时间才能解析出每个节点的路径。

```
#authors listed at
#http://en.literateprograms.org/Depth-first_search_(Python)?action=history&offset=20081013235803
class Vertex:
    def __init__(self, data):
        self.data = data
        self.successors = []

def depthFirstSearch(start, isGoal, result):
    if start in result:
        return False

    result.append(start)

    if isGoal(start):
        return True
    for v in start.successors:
        if depthFirstSearch(v, isGoal, result):
            return True

    # No path was found
    result.pop()
    return False

def lrep(seq,reps,tree):
    n = 2 * len(seq) - 1
    v = [Vertex(i) for i in xrange(n)]
    edges = [(int(x[0]),int(x[1])) for x in tree]
    for a, b in edges:
        v[a].successors.append(v[b])

    paths = {}
    for x in v:
        result = []
        paths[x.data] = []
        if depthFirstSearch(v[1], (lambda v: v.data == x.data), result):
            path = [u.data for u in result]
            paths[x.data] = path 
```

我想做的是`descendants >= k`在找到深度之前对树进行预处理以找到满足要求的节点。我什至还没有弄清楚我将如何计算深度。虽然我想我会有一些字典来跟踪路径中每个节点的深度然后求和。

所以，我的第一个最重要的问题是：*“我如何预处理带有后代叶子的树？”*

我的第二个不那么重要的问题是：*“在那之后，我怎样才能快速计算深度？”*

PS我应该声明这**不是**家庭作业或类似的东西。我只是一个生物化学家，试图通过一些计算挑战来扩展我的视野。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T17:03:29.590

基本字符串操作练习的好问题。我不再记得后缀树了；）但正如你所说：理论上，你已经设置好了。

## 如何预处理带有后代叶子的树？

关于这个主题的[维基百科存根](http://en.wikipedia.org/wiki/Longest_repeated_substring_problem)有点令人困惑。你只需要知道，如果你是最外层的非叶节点有`n >= k`孩子。如果您在整个字符串中找到从根节点到该子字符串的子字符串，则后缀树会告诉您，`n`可能存在延续。所以必须有`n`地方，这个字符串出现的地方。

## 在那之后，我怎样才能快速计算深度？

这个问题和许多类似问题的一个简单的关键概念是进行深度优先搜索：在每个节点中，询问子元素的值并将其最大值返回给父节点。根节点将获得最终结果。

这些值的计算方式因问题而异。在这里，每个节点都有三种可能性：

1.  该节点没有子节点。它是一个叶节点，结果无效。
2.  每个孩子都返回一个无效的结果。它是最后一个非叶节点，结果为零（此节点之后不再有字符）。如果该节点有子节点`n`，则从根到该节点的每条边的连接`n`字符串在整个字符串中出现次数。如果我们至少需要`k`节点 和`k > n`，结果也是无效的。
3.  一个或多个叶子返回有效的东西。结果是返回值的最大值**加上**附加到它的边缘的字符串的长度。

当然，您还必须返回对应的节点。否则你会知道最长的重复子串有多长，但不知道它在哪里。

## 代码

您应该先尝试自己编写代码。如果您想收集所有必要的信息，那么构建树很简单但并非易事。然而，这里是一个简单的例子。请注意：如果输入因某种原因无效，则所有完整性检查都会被丢弃，并且一切都会失败。例如，不要尝试使用除一个以外的任何其他根索引，不要将节点称为父节点，之前未将其引用为子节点，等等。还有很大的改进空间 **提示*;)*。

```
class Node(object):
    def __init__(self, idx):
        self.idx = idx     # not needed but nice for prints 
        self.parent = None # edge to parent or None
        self.childs = []   # list of edges

    def get_deepest(self, k = 2):
        max_value = -1
        max_node = None
        for edge in self.childs:
            r = edge.n2.get_deepest()
            if r is None: continue # leaf
            value, node = r
            value += len(edge.s)
            if value > max_value: # new best result
                max_value = value
                max_node = node
        if max_node is None:
            # we are either a leaf (no edge connected) or 
            # the last non-leaf.
            # The number of childs have to be k to be valid.
            return (0, self) if len(self.childs) == k else None
        else:
            return (max_value, max_node)

    def get_string_to_root(self):
        if self.parent is None: return "" 
        return self.parent.n1.get_string_to_root() + self.parent.s

class Edge(object):
    # creating the edge also sets the correspondending
    # values in the nodes
    def __init__(self, n1, n2, s):
        #print "Edge %d -> %d [ %s]" % (n1.idx, n2.idx, s)
        self.n1, self.n2, self.s = n1, n2, s
        n1.childs.append(self)
        n2.parent = self

nodes = {1 : Node(1)} # root-node
string = sys.stdin.readline()
k = int(sys.stdin.readline())
for line in sys.stdin:
    parent_idx, child_idx, start, length = [int(x) for x in line.split()]
    s = string[start-1:start-1+length]
    # every edge constructs a Node
    nodes[child_idx] = Node(child_idx)
    Edge(nodes[parent_idx], nodes[child_idx], s)

(depth, node) = nodes[1].get_deepest(k)
print node.get_string_to_root() 
```

# spring - Spring集成备份通道

> ID：13311261
> 
> 赞同：0
> 
> 时间：2012-11-09T15:47:15.347
> 
> 标签：spring, spring-integration

我在我们的项目中引入了 spring 集成而不是遗留集成架构。此架构支持发件人和收件人。每个发件人可以配置 3 个目的地。

1.  主要数据流，消息应该传递到的地方。可以是文件系统、jms、邮件等
2.  备用流量。将每个收到的消息存储到备份目的地。通常它是文件附加程序，每条消息都存储在文件末尾。那也可以是jms队列。如果整个系统发生故障和数据丢失，备份让我们有机会获取消息并重播
3.  流失败。如果我们无法将消息发送到目的地（无连接，格式化创建消息失败），则将消息放入此队列。

Spring 集成网关看起来很合适。我可以将默认请求通道用于主流，将错误通道用于失败流。备份流的问题。如何复制网关传入消息并将其放置到备份通道？

PS这里更准确地说是一个测试和代码。

[https://github.com/semenodm/Coding-Exercises/tree/master/spring-integration/spring-integration/src](https://github.com/semenodm/Coding-Exercises/tree/master/spring-integration/spring-integration/src)

测试**i_want_my_sender_put_message_into_fail_queue_when_sending_failed**失败，因为 Wire Tap 将始终将消息放入其队列，无论主流是否成功。

我不想添加自定义拦截器来处理这个逻辑并使用配置来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:01:26.277

如果您将两个适配器订阅到直接通道，没有负载平衡并在每个订阅者上设置一个 order 属性，则如果第一个适配器引发异常，框架将自动故障转移到第二个适配器。

```
<int:channel id="foo>
    <int:dispatcher load-balancer="none" />
</int:channel>

<... id="primary" order="1" .../>

<... id="secondary" order="2" .../> 
```

默认负载均衡器是循环的。

另一种选择是在即将发布的 2.2 版本中使用新的 ExpressionEvaluatingMessageHandlerAdvice ...

[http://blog.springsource.org/2012/10/09/spring-integration-2-2-retry-and-more/](http://blog.springsource.org/2012/10/09/spring-integration-2-2-retry-and-more/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:19:28.600

您可能需要考虑添加发送到“backupChannel”的 Wire Tap。

请参阅：[http ://static.springsource.org/spring-integration/docs/2.1.x/reference/htmlsingle/#channel-wiretap](http://static.springsource.org/spring-integration/docs/2.1.x/reference/htmlsingle/#channel-wiretap)

# c# - 如何使用 linq lambda 语法查找具有精确长度的子集

> ID：13311262
> 
> 赞同：1
> 
> 时间：2012-11-09T15:47:15.413
> 
> 标签：c#, linq, set

> **可能重复：**
> [列出排列（未知数）](https://stackoverflow.com/questions/13286882/lists-permutations-unknown-number)

可以说我有输入`Range[1, 8]`

```
{1,2,3,4,5,6,7,8} 
```

我想找到`Subsets[%, {2}]`（精确长度为 2 的所有子集）

```
{{1, 2}, {1, 3}, {1, 4}, {1, 5}, {1, 6}, {1, 7}, {1, 8}, {2, 3}, {2, 4}, 
 {2, 5}, {2, 6}, {2, 7}, {2, 8}, {3, 4}, {3, 5}, {3, 6}, {3, 7}, {3, 8}, 
 {4, 5}, {4, 6}, {4, 7}, {4, 8}, {5, 6}, {5, 7}, {5, 8}, {6, 7}, {6, 8}, {7, 8}} 
```

试过：

```
var values = Enumerable.Range(1, 8);
var result = from v in values
             from v2 in values.Skip(v)
             select new[] { v, v2 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:08:21.603

```
var query = from a in Enumerable.Range(1, 8)
            from b in Enumerable.Range(a + 1, 8 - a)
            select String.Format("{{{0}, {1}}}", a, b);

foreach (string s in query)
{
    Console.Out.WriteLine(s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:33:26.140

这是一个查找指定大小的输入序列的所有组合的函数：

```
public static IEnumerable<IEnumerable<T>> Combinations<T>(this IEnumerable<T> source, int n)
{
    if (n == 0)
        yield return Enumerable.Empty<T>();

    int count = 1;
    foreach (T item in source)
    {
        foreach (var innerSequence in source.Skip(count).Combinations(n - 1))
        {
            yield return new T[] { item }.Concat(innerSequence);
        }
        count++;
    }
} 
```

因此，在您的情况下，您可以将其用作：

```
var result = Enumerable.Range(1, 8).Combinations(2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:28:29.537

```
var lst = Enumerable.Range(1, 8);
var result = lst.Join(lst, c => 1, c => 1, (i, j) => new[] { i, j })
        .Where(c => c[0] < c[1]); 
```

在这里，我使用条件`1 == 1`来获取值的交叉连接`Enumerable.Range(1, 8)`以获取所有可能的组合。

如评论中所述，生成交叉连接的一种更简单的方法可能是：

```
var result = lst.SelectMany(_ => lst, (i, j) => new[] { i, j })
        .Where(c => c[0] < c[1]); 
```

但对我来说不太可读。

请注意，与其他方法相比，这种方法的效率要低一些，因为它首先获取所有可能的组合，然后修剪掉不需要的组合。然而，一个简单的单线。

# android - 广播接收器启动错误

> ID：13311264
> 
> 赞同：1
> 
> 时间：2012-11-09T15:47:19.470
> 
> 标签：android, broadcastreceiver, forceclose

我正在编写一个简单的代码，当我收到一条消息时启动一个广播接收器。但我得到一个强制关闭错误。我在 AndroidManifest.xml 添加了所需的权限。我从这个站点（http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/）获取了 BroadcastReceiever 的代码。请告诉我哪里出错了。这是我的代码：

```
package com.example.findme;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];
        for (int n = 0; n < messages.length; n++) {
            smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);*/
        Toast.makeText(context,"Reveived!",1).show();
        }

        // show first message
       Toast toast = Toast.makeText(context, "Received SMS: " + smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
        toast.show();
    } 
```

这是logCat：

```
11-09 21:05:03.190: D/AndroidRuntime(446): Shutting down VM
11-09 21:05:03.190: W/dalvikvm(446): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-09 21:05:03.230: E/AndroidRuntime(446): FATAL EXCEPTION: main
11-09 21:05:03.230: E/AndroidRuntime(446): java.lang.RuntimeException: Unable to instantiate receiver com.example.smsmanager1.receiver.SMSReceiver: java.lang.ClassNotFoundException: com.example.smsmanager1.receiver.SMSReceiver in loader dalvik.system.PathClassLoader[/data/app/com.example.smsmanager1-1.apk]
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2789)
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.os.Looper.loop(Looper.java:123)
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-09 21:05:03.230: E/AndroidRuntime(446):  at java.lang.reflect.Method.invokeNative(Native Method)
11-09 21:05:03.230: E/AndroidRuntime(446):  at java.lang.reflect.Method.invoke(Method.java:521)
11-09 21:05:03.230: E/AndroidRuntime(446):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-09 21:05:03.230: E/AndroidRuntime(446):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-09 21:05:03.230: E/AndroidRuntime(446):  at dalvik.system.NativeStart.main(Native Method)
11-09 21:05:03.230: E/AndroidRuntime(446): Caused by: java.lang.ClassNotFoundException: com.example.smsmanager1.receiver.SMSReceiver in loader dalvik.system.PathClassLoader[/data/app/com.example.smsmanager1-1.apk]
11-09 21:05:03.230: E/AndroidRuntime(446):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
11-09 21:05:03.230: E/AndroidRuntime(446):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
11-09 21:05:03.230: E/AndroidRuntime(446):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
11-09 21:05:03.230: E/AndroidRuntime(446):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2780)
11-09 21:05:03.230: E/AndroidRuntime(446):  ... 10 more
11-09 21:05:13.211: I/Process(446): Sending signal. PID: 446 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:51:15.943

接收者声明中类的全名不正确。

在您的清单文件中，您必须替换

```
com.example.smsmanager1.receiver.SMSReceiver 
```

经过

```
com.example.findme.SMSReceiver 
```

# iphone - iPhone内存管理警告

> ID：13311276
> 
> 赞同：1
> 
> 时间：2012-11-09T15:48:10.010
> 
> 标签：iphone, memory-management

我对 Objective-C 编程有一些疑问。我有这样的功能。

```
+ (NSManagedObjectContext *) newContext {
NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil)
{
    NSManagedObjectContext* managedObjectContext = [[[NSManagedObjectContext alloc] init] autorelease];
    [managedObjectContext setPersistentStoreCoordinator:coordinator];
    return managedObjectContext;
}
return nil; 
```

}

但是当我在我的项目上运行分析时，我看到类似这样的警告

> “具有 +0 保留计数的对象返回给调用者，其中预期 +1（拥有）保留计数”

![运行分析后看到的内容](../Images/25676d3c4df496891a69a8efd6babd28.png)

有人可以指出我为什么 Xcode 在这里给我一个警告。返回任何变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:50:40.440

问题不在于您的代码，而在于您的方法名称。在 Objective C 中，名称以`init`或`new`由分析器假定的方法返回保留计数为 1 的对象。您返回的对象的保留计数为零，因此您的方法名称不应包含`new`.

# java - JAVA动态属性条件评估

> ID：13311277
> 
> 赞同：1
> 
> 时间：2012-11-09T15:48:20.157
> 
> 标签：java, oop, conditional-statements, evaluation

我有一个用例，其中一个对象存在一个字符串，该字符串具有针对另一个对象的属性进行评估的条件。例如 `StudentEvaluator`有条件

```
student.pastScore>70 && student.currentScore>90 && student.sportsParticipation=true 
```

并且`Student`对象具有各自的属性。

```
E.g. pastScore, currentScore and sportsParticipation 
```

现在`StudentEvaluator`条件字符串是在运行时创建的，并且必须评估为真或假。有许多 StudentEvaluator 在不同的条件下并行运行。现在 StudentEvaluator 在其评估函数中接受一个学生参数并评估条件。IE

```
public Class StudentEvaluator{

String condition;

  public StudentEvaluator(String condition){
    this.condition = condition;
  }

  evaluate(Student student){
    <<Code>>
  }

} 
```

什么是最有效的**评估**方式？欢迎任何开箱即用的想法！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:13:46.850

过去这样做过。你有多种选择

1.  OGNL
2.  [MVEL](http://mvel.documentnode.com/) - 比 OGNL 性能更高。支持[逻辑和条件运算符。](http://mvel.documentnode.com/#flow-control)
3.  [SpEL - Spring Expression Language](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html) - 我的偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:10:14.617

如果属性遵循 JavaBeans 标准（即它们是具有 getter 和 setter 的字段），那么您可以使用[Apache Commons / BeanUtils](http://commons.apache.org/beanutils/)等技术。

示例代码：

```
Student student = // some student
Map<String, Object> studentProperties = BeanUtils.describe(student);
Integer currentScore = studentProperties.get("currentScore"); // etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:05:28.270

这并不简单，实际上你需要一个表达式解析器语言，也许你可以使用现有的解决方案，即[jexel](http://code.google.com/p/jexel/)

# java - 如何为微调器设置适配器

> ID：13311279
> 
> 赞同：5
> 
> 时间：2012-11-09T15:48:28.607
> 
> 标签：java, android

如果我有课程列表，如何将适配器设置为微调器`ArrayList<HashMap<String, String>>`，我将显示它的继续信息

我应该使用什么类型的正确适配器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:52:18.180

ArrayAdapter 应该可以工作。尝试使用字符串 []。

```
Spinner s = null;
final String[] choices = {"1","2"};
ArrayAdapter<String> a =new ArrayAdapter<String>(ObservationSubmit.this,android.R.layout.simple_spinner_item, choices);
a.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
s.setAdapter(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-04T04:38:03.060

```
 String[] arraySpinner = new String[] {
            "1", "2", "3", "4", "5", "6", "7"
        };  
  Spinner s = (Spinner) findViewById(R.id.Spinner01);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, arraySpinner);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T04:49:06.317

```
import android.content.Context;
import android.support.annotation.LayoutRes;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

import com.agreeta.firebasedatabasedemo.R;

import java.util.ArrayList;
import java.util.HashMap;

public class TestAdapter extends ArrayAdapter {

    private Context mContext;
    private ArrayList<HashMap<String, String>> hashMapArrayList = new ArrayList<>();

    public TestAdapter(@NonNull Context context, ArrayList<HashMap<String, String>> list) {
        super(context, 0 , list);
        mContext = context;
        hashMapArrayList = list;
    }

    @NonNull
    @Override
    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {
        View listItem = convertView;
        if(listItem == null)
            listItem = LayoutInflater.from(mContext).inflate(R.layout.like_row,parent,false);

        TextView release = (TextView) listItem.findViewById(R.id.tv_title);
        release.setText(hashMapArrayList.get(position).get("key"));

        return listItem;
    }
} 
```

Try with this example. Here "key" is your HashMap key by which you can set value to row of spinner.

# excel - 使用 Excel 按日期显示新旧

> ID：13311281
> 
> 赞同：0
> 
> 时间：2012-11-09T15:48:31.200
> 
> 标签：excel, excel-formula

很久没有聊天了，我遇到了我写的公式似乎无法正常工作的情况。我知道这可能是我，但基于逻辑的编程似乎是我存在的祸根。

`=IF(D1>2010,"New",IF(D1<2010,"Old",""))`

是否有问题的公式，现在如果我正确地记下来了，我认为我做到了，如果 D1 大于 2010 年，则单元格会说`New`，如果它小于 2010 年，则会说`Old`。

它不起作用，由于某种原因，我无法弄清楚为什么。

我有一个类似的公式有效：

`=IF($B155<>"","Full",IF($J155<>"","Full","Empty"))`

我认为逻辑会相似，看来我错了。有人能帮我解决这个简单的难题吗，基于逻辑的数学从来都不是我的强项。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:59:54.753

如果 D1=2010，则 IF 子句中没有真正的条件，结果将是一个空白单元格 ( `""`)。

`=IF(D1>=2010,"New",IF(D1<2010,"Old",""))`应该做的伎俩。

如果 D1 被格式化为日期，则以下公式将给出所需的结果：

```
=IF(YEAR(D1)>=2010,"New",IF(YEAR(D1)<2010,"Old","")) 
```

# javascript - Javascript 页面动画 scrollTo

> ID：13311284
> 
> 赞同：1
> 
> 时间：2012-11-09T15:48:41.153
> 
> 标签：javascript, html, jquery-animate

我正在寻找一些关于如何为页面设置动画的建议。我正在做某种整页滑块，但我也想在单击导航链接时向下滚动到其他 div。我目前将它用于“主页”，但它正在滚动整个页面并且导航栏消失（我希望它保持固定）。另外，我希望这些 div 被隐藏，直到它们被 .click 函数调用。

这是滚动到 JS：

```
$(function() {
// when you click the link w/ a id of home'
 $('#home').click(function() {
    // scroll to the DIV w/ an ID of 'homeDiv'
    $.scrollTo( '#homeDiv', 800, {easing:'swing'} );
 });
}); 
```

完整代码： http: [//jsfiddle.net/hvYzm/3/](http://jsfiddle.net/hvYzm/3/) scrollTo 库未在 jsFiddle 中链接。

非常感谢任何建议。我是新手，所以我相信很多这些东西都可以用更好的方式完成:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:08:50.373

如果您希望导航栏在滚动时移动，您的导航栏需要有一个固定的位置：

```
nav {
    padding-left: 16%;
    margin-bottom: 10px;
    text-align: left;
    border-bottom-style:solid;
    border-width:1px;
    background: transparent;
    position:fixed;
    z-index:1000;
} 
```

[http://jsfiddle.net/3ZLt7/](http://jsfiddle.net/3ZLt7/)

# audio - 将 IrrKlang 与 Ogre 一起使用

> ID：13311287
> 
> 赞同：2
> 
> 时间：2012-11-09T15:48:49.957
> 
> 标签：audio, ogre, ogre3d, irrklang

我正在尝试在我的 Ogre3D 项目中设置声音。我已经安装了 irrKlang 1.4.0 并将它的 include 和 lib 目录添加到我的项目 VC++ Include 和 Library 目录中，但是当我尝试构建时仍然出现链接器错误。有什么建议么？

> （错误 4007 错误 LNK2019：无法解析的外部符号“__declspec(dllimport) class irrklang::ISoundEngine * __cdecl irrklang::createIrrKlangDevice(enum irrklang::E_SOUND_OUTPUT_DRIVER,int,char const *,char const *)”（_ *imp* ?createIrrKlangDevice@irrklang @@YAPAVISoundEngine@1@W4E_SOUND_OUTPUT_DRIVER@1@HPBD1@Z) 在函数 "public: __thiscall SoundManager::SoundManager(void)" (??0SoundManager@@QAE@XZ) 中引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:12:25.147

好吧，看了一段时间后，我似乎犯了两个错误。

1.  irrKlang 的 lib 目录分为两部分，因此我应该使用 (IRRKLANGDIRECTORY)\lib\Win32-visualStudio 而不是将 (IRRKLANGDIRECTORY)\lib 添加到我的库目录中。

2.  包括 lib 目录是不够的，我还需要在我的班级顶部指定使用 irrklang 库文件（#pragma comment(lib, "irrklang.lib")）。

# matlab - matlab中的递归函数

> ID：13311289
> 
> 赞同：3
> 
> 时间：2012-11-09T15:48:55.590
> 
> 标签：matlab, recursion

如何在 matlab 中编写递归函数，它基本上是一个马尔可夫链！我尝试为它编写一个伪代码，并且是*MATLAB*的新手：

函数是这样的：

```
 P= Probability
    x= status(0,1)
    Dij= probability to pick a site
    P(Status of Site(i) being x at next time step)= Summation[P(Status of Site(i) being x   at previous time step)*Dij] 
```

我已经尝试过代码，任何人都可以告诉我它是否正确：

```
 function [t,index]= CopyingInfluenceModel
%%Define constants
StatusP1=rand(1,0);
StatusP0=rand(1,0);

% Initializing the variables
t=[];
index=[];
i=[];
%assigining the initial conditions
t(1)=0;
%set index no i to 1(initial condition for i=1)
i=1;
%% If the probability is zero, terminate while loop
while p(i)>=0
%calculate time step for given index no
t(i+1)= t(i);
%calculate the status_probability at given time t=(i+1)
StatusP1(i+1)=StatusP1(i)+sum(StatusP1(i)*Dij);

%index i increases by 1 to calculate next probability
i=i+1;
end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:45:54.930

首先是matlab中的递归“Hello World”阶乘函数：

```
function result=f(x)
if (x<=0)
    result=1;
else
    result=x*f(x-1);
end

end 
```

可以这样调用：

```
>> f(4)
ans =
    24 
```

对马尔可夫链了解不多，我在这里猜测你的函数应该做什么。首先是代码：

```
function yourmainscript
    % state 1 -> state 1: 50%
    % state 1 -> state 2: 50%
    % state 2 -> state 1: 25%
    % state 2 -> state 2: 75%
    D=[0.5 0.5; 0.25 0.75];
    p0=[1; 0];

    % Get probability that the system is in state number 1 at time step number 4
    % given the transition matrix D and the initial probabilities p0
    P(1,4,D,p0)
end

function result=P(state, t, D, p0)
if t==0
    result=p0(state);
else
    possible_states=(1:length(D))';
    result=D(state,:)*arrayfun(@(x) P(x, t-1, D, p0), possible_states);
end
end 
```

参数 D 和 p0 描述了系统并且只是未经修改地通过。使用全局变量或使用函数嵌套也对它们有用，只要它们是可访问的。

state 是介于 1 和您处理的状态总数之间的整数，t 是表示时间步长的整数。

在 t==0 时，我们可以使用状态作为 p0 的索引来获得概率。对于 t>0，我将总和重写为矩阵乘法：

我们需要当前状态给出的 Dij 行（即 D(state,:)），并将其与上一个时间步所有可能状态的概率向量相乘。

线

```
possible_states=(1:length(D))'; 
```

是一个包含 1,2,3,...,last state 的列向量，下一行需要它。Arrayfun 为数组的每个元素（第二个参数）调用一个函数（第一个参数）并将结果填充到一个向量中。第一个参数是定义以下函数的简写：

```
function result=wrapperfunction(x)
    % Assume t, D and p0 are in scope and the function P is known
    result=P(x, t-1, D, p0);
end 
```

请注意，matlab 是区分大小写的，所以如果你定义了一个函数“Markov”，那么 matlab 现在仍然没有关于“markov”。

编辑：抱歉，您在我撰写此答案时更新了您的代码，因此它可能适用于更新版本，也可能不适用于更新版本。

# ruby - 使用 Ruby 扫描字符串

> ID：13311291
> 
> 赞同：0
> 
> 时间：2012-11-09T15:48:57.300
> 
> 标签：ruby, regex

我正在尝试创建一个正则表达式来从如下所示的字符串中收集信息：

```
A22xB67-E34... 
```

对于任何数字。

我有正则表达式：

```
@spaceCode = "[A-Z]([A-Z0-9][0-9]|[0-9])"
@moveCode=/^(?<one>#{@spaceCode})((?<mode>x|\-)(?<two>#{@spaceCode}))+$/ 
```

但是我得到：

```
s="A11-A22xA33".scan(@moveCode)
=> [["A11", "11", "xA33", "x", "A33", "33"]] 
```

这绝对不是我想要的。

该字符串可以是任何长度的 C22 等，使用`x`或`-`作为分隔符，并将其放入如下数组中：

```
['A22','x',B22','-'.......] 
```

例子：

```
"A22xB23-D23xE25" => ['A22','x','B23','=','D23','E25;]
"AA2xA9-A1" => ['AA2','x','A9','-','A1'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:56:23.623

想必你想孤立地找到这三个字母数字代码？这个更简单的正则表达式（或它的变体）会做你想要的吗？

```
def decode string
  puts "\nDecoding #{string}"
  code = "[A-Z0-9]{1,3}"
  sep = "[-x=]"
  r = /(?:(#{code})#{sep}?)?/
  string.scan(r)
end

puts decode("A22xA33")
puts decode("A11-A22xA33")
puts decode("A22xB67-E34")
puts decode("A22xC33xD44-E55")
puts decode("A22xB23-D23=E25") 
```

或者如果您也想捕获动作/分隔符，例如：

```
r = /(?:#{code}#{sep}?)?/ 
```

或将数组中的动作/分隔符捕获为代码之间的单独项目：

```
r = /(#{code})?(#{sep})?/ 
```

所以我认为你想要的是：

```
def decode string
  puts "\nDecoding #{string}"
  code = "[A-Z0-9]{1,3}"
  sep = "[-x=]"
  r = /(#{code})?(#{sep})?/
  string.scan(r)
end 
```

或者以最简单的形式：

```
string.scan(/([A-Z0-9]{1,3})?([-x=])?/) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:20:13.170

我会这样做：

```
MOVE_REGEX = /[a-z]+\d+/i
REGEX = /(#{ MOVE_REGEX })([x-]?)/i

class String
  def parse_move
    self.scan(REGEX).flatten.reject(&:empty?)
  end
end

"A22xB23-D23xE25".parse_move
# => ["A22", "x", "B23", "-", "D23", "x", "E25"]

"AA2xA9-A1".parse_move
# => ["AA2", "x", "A9", "-", "A1"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:59:02.140

使用像`split`正则表达式一样的方法`([x-])`

* * *

您`regex`不会为您的输入工作，因为这将始终覆盖组`spaceCode`and `mode`，即`spaceCode`and`mode`将仅包含最后匹配的`spaceCode`and `mode`。

例如，`^(\d)+$`输入的正则表达式`3664`将仅捕获组中的`4`not `3`, `6`, `6`, `4`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:38:38.647

鉴于字段名称可以是可变长度，这似乎应该可行：

```
def parse_moves(s)    
  s.scan(/([A-Z0-9]+)?([-x])?/).flatten.compact
end 
```

您的示例的结果：

```
1.9.3-p125 :027 > moves = ["A11-A22xA33", "A22xB23-D23xE25", "AA2xA9-A1"]
 => ["A11-A22xA33", "A22xB23-D23xE25", "AA2xA9-A1"] 
1.9.3-p125 :028 > moves.each { |s| puts parse_moves(s).to_s }
["A11", "-", "A22", "x", "A33"]
["A22", "x", "B23", "-", "D23", "x", "E25"]
["AA2", "x", "A9", "-", "A1"] 
```

# .net - 如何在不失去焦点的情况下开始一个过程

> ID：13311293
> 
> 赞同：2
> 
> 时间：2012-11-09T15:48:58.837
> 
> 标签：.net, vb.net, winforms, visual-studio-2010, start-process

我正在使用以下代码开始一个新进程：

```
 Dim procStartInfo As New ProcessStartInfo
    Dim procExecuting As New Process

    With procStartInfo
        .FileName = "C:\PTL\Bin\xxxxxx.exe"
        .WindowStyle = ProcessWindowStyle.Normal
        .Arguments = "/POLL:5"
    End With

    procExecuting = Process.Start(procStartInfo) 
```

但是当这被称为应用程序时，我调用它的应用程序失去焦点（即使窗口样式设置为隐藏），所以如果我在表单上的文本框中输入，按键实际上会丢失，因为它们被重定向到新的应用程序。

有什么方法可以让我开始一个过程并保持专注吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:03:38.933

您需要调用 windows API 来隐藏从进程创建的窗口。检查： [http ://social.msdn.microsoft.com/Forums/eu/vbgeneral/thread/7dace225-e4d0-4b0e-b61b-fceb7a5a4860](http://social.msdn.microsoft.com/Forums/eu/vbgeneral/thread/7dace225-e4d0-4b0e-b61b-fceb7a5a4860)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:02:04.110

如果要将密钥发送到文本框中，请使用 sendmessage。

[http://www.pinvoke.net/default.aspx/user32.sendmessage](http://www.pinvoke.net/default.aspx/user32.sendmessage)

# java - 泛型中的不可转换类型

> ID：13311297
> 
> 赞同：3
> 
> 时间：2012-11-09T15:49:13.857
> 
> 标签：java, generics

> **可能重复：**
> [`List<Dog>` 是 `List<Animal>` 的子类吗？为什么 Java 的泛型不是隐式多态的？](https://stackoverflow.com/questions/2745265/is-listdog-a-subclass-of-listanimal-why-arent-javas-generics-implicit)

我需要帮助了解发生了什么。

我有一个界面

```
public interface Foo {

  Map<String, ParameterValue> getParameters();
}

public interface ParameterValue { } 
```

以及 Foo 的一个实现。

```
class FooImpl implements Foo {
   Map<String, ParameterValueImpl> parameters = new HashMap<String, ParameterValueImpl>();
   //ParameterValueImpl an implementation of ParameterValue

@Override
    public Map<String, ParameterValue> getParameters() {
        return ((Map<String,ParameterValue>) parameters);
    }   

} 
```

我收到以下错误

```
[ERROR] Failed to execute goal
failure [ERROR]
src/main/java/domainJPA/model/FooImpl.java:[92,45]
inconvertible types [ERROR] found   :
java.util.Map<java.lang.String,domainJPA.model.ParameterValueImpl>
[ERROR] required:
java.util.Map<java.lang.String,domain.model.ParameterValue> 
```

我必须在 Foo 的接口中使用 ParameterValue，而在 FooImpl 中我必须只实现 ParameterValue (ParameterValueImpl)，因为它是 @Entity 并且 jpa 需要它。

我怎样才能使这段代码编译？

**编辑**

如果我将代码更改`? extends ParameterValue`为答案之一中的建议，那么我将无法使用 Foo 接口。

以下代码导致编译错误：`The method put(String, capture#8-of ? extends ParameterValue) in the type Map<String,capture#8-of ? extends ParameterValue> is not applicable for the arguments (String, ParameterValueImpl)`

`foo.getParameters().put("test", new ParameterValueImpl);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T15:51:31.307

想一想——如果 from 的返回值`getParameters()`实际上是 a `Map<String, ParameterValueImpl>`，那么您可以将一个值添加到从 派生的映射中`ParameterValue`，但不是`ParameterValueImpl`。这样做会破坏类型安全。

您有两个选项可以纠正此问题：

1.  在`getParameters()`中，将地图复制到正确类型的新地图中。
2.  用作`Map<String, ParameterValue>`的类型`FooImpl.parameters`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T15:52:36.877

您可以将界面方法更改为： -

```
Map<String, ? extends ParameterValue> getParameters(); 
```

现在，您可以返回 Map`String`和实现您的任何类型`ParameterValue`

那么你在这个方法的实现中不需要类型转换。

```
public Map<String, ? extends ParameterValue> getParameters() {
    return parameters;
} 
```

* * *

或者，由于您可以将`ParameterValueImpl`类型实例存储在`ParameterType`引用中，因此，您还可以将类中的 更改`Map`为`FooImpl`：-

```
Map<String, ParameterValue> parameters = new HashMap<String, ParameterValue>(); 
```

那么您的原始方法将起作用。

# expressionengine - 奇怪的分页问题

> ID：13311300
> 
> 赞同：0
> 
> 时间：2012-11-09T15:49:37.360
> 
> 标签：expressionengine

这与有关 Solspace 的超级搜索[http://www.solspace.com/forums/viewthread/14436/](http://www.solspace.com/forums/viewthread/14436/)的论坛帖子有关，但由于我在 EE 的频道输入循环中遇到了同样的问题，所以我在这里重复发布。我的调试页面在这里

```
http://216.243.140.102/products/pagination_debug 
```

，代码是准系统：

```
{exp:channel:entries channel="static" disable="categories|category_fields|member_data" limit="2" paginate="bottom"}
<h1>{title}</h1>
{paginate}
<p>Page {current_page} of {total_pages} pages {pagination_links}</p>
{/paginate}
{/exp:channel:entries} 
```

每个分页链接看起来像这样

```
http://216.243.140.102/S=3e4a8ada2d96477c46a1a7388370eb27992550a7/products/pagination_debug/P6 
```

添加 S=3e4a8ada2d96477c46a1a7388370eb27992550a7

有任何想法吗？我完全被难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:59:31.463

转到*Admin -> Security and Session Preferences*并确保您的**User Session Type**设置为**Cookies Only**

或者，它可能会在您的 config.php 中被覆盖

```
$config['user_session_type'] = 'c'; 
```

# php - 上传重文件时浏览器挂起

> ID：13311301
> 
> 赞同：1
> 
> 时间：2012-11-09T15:49:38.873
> 
> 标签：php, javascript, jquery, ajax

嗨，我正在使用插件 jquery.form.js 进行 PHP/Javasript 文件上传，该插件基本上使用 XHR2 进行上传。但是，当我们上传文件时，浏览器的基本功能（如滚动、单击）无法正常工作。所以我对如何解决这个问题感到非常困惑。对此有任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:58:22.967

你上传的文件有多大？

您可能想尝试专门为上传文件而设计的解决方案，例如[Plupload](http://www.plupload.com/)。

# c# - Linq 表达式的结果类型

> ID：13311303
> 
> 赞同：0
> 
> 时间：2012-11-09T15:49:44.327
> 
> 标签：c#, linq

我正在使用 sql 数据库制作应用程序，

我得到这样的数据：

```
var vAll= from a in vPRCEntities.tblProducts
          select a; 
```

那么哪个变量是'vAll'？，因为我想在方法中使用它：

```
private void vGet( ?? vAll)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:33:49.077

我认为答案太微不足道了。此外，真正的功劳归功于指出缺失部分的查理。无论如何它是

尝试：

```
private void vGet(IEnumerable<Product> vAll) 
```

必须在哪里`Product`输入`tblProducts`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:18:09.687

您可以按照建议使用它：

```
private void vGet(IEnumerable<Product> vAll){ } 
```

请记住，Linq 使用延迟执行，这意味着在您从集合中读取之前，查询不会真正执行。没关系，但是如果您在应用程序的不同部分阅读该集合，您可能会遇到问题。例如，连接可能会在您有机会获取数据之前关闭。

为了避免这种情况，你可以尝试这样的事情：

```
var vAll = (from a in vPRCEntities.tblProducts select a).ToList<Product>(); 
```

这会强制立即读取集合并将其放入 List<> 对象中。然后你可以这样写你的方法：

```
private void vGet(List<Product> vAll){ } //IEnumerable will also work 
```

延迟执行不再起作用，因为集合已被读取并放入列表中。

注意：如果数据量非常大，那么所有这些数据都将在列表中的内存中，这可能不是一个好的解决方案。像大多数事情一样 - 这取决于。

# php - 多次实例化相同的 PHP 对象

> ID：13311304
> 
> 赞同：1
> 
> 时间：2012-11-09T15:49:44.817
> 
> 标签：php, object, google-analytics-api

除了我拥有的这种简化方式之外，是否可以多次实例化同一个类？

```
include ("php/functions.php");

date_default_timezone_set('Europe/Lisbon');

require 'php/gapi.class.php';
$ga1 = new gapi('XXXX@gmail.com','XXXX');
$ga2 = new gapi('XXXX@gmail.com','XXXX');
$ga3 = new gapi('XXXX@gmail.com','XXXX');

$ga1->requestReportData( $report_id = XXXX, $dimension = array('browser'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visitors', $filter = 'browser == Firefox || browser == Chrome || browser == Internet Explorer || browser == Safari || browser == Opera && visits > 10', $start_date = '2012-10-17' );

$ga2->requestReportData( $report_id = XXXX, $dimension = array('country'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visits', $filter = 'country != (not set) && visits > 3', $start_date = '2012-10-17', null, null, 10 );

$date2 = date('Y-m-d', mktime(0, 0, 0, date("m"), date("d")-15, date("Y")));
$today = date('Y-m-d');
$ga3->requestReportData($report_id = XXXX, $dimension = array('date'), $metrics = array('pageviews','visits'), $sort_metric = array('date')  , $filter = '',$date2,$today, null,15); 
```

PS：这段代码按预期工作......我只是想知道是否有更有效的方法来实现这一点......

编辑：要回答对所提供的某些解决方案提出的一些问题，下面是同一个文件几百行后面的应用程序示例：

```
 <h2 class="verde">By country (10 relvant results)</h2>
      [useless code ommited...]
      <tbody>
        <?php
        $tp = 0;
        foreach($ga2->getResults() as $r2){
          if($tp==10) break;
        ?>
        <tr>
          <td><?php echo $r2 ?></td>
          <td><?php echo $r2->getVisitors() ?></td>
          <td><?php echo $r2->getVisits() ?></td>
          <td><?php echo $r2->getPageviews() ?></td>
        </tr>
        <?php
        $tp++;
        }
        ?>
        <tr style="font-weight:700">
          <td><strong>TOTAIS</strong></td>
          <td><strong><?php echo $ga2->getVisitors() ?></strong></td>
          <td><strong><?php echo $ga2->getVisits() ?></strong></td>
          <td><strong><?php echo $ga2->getPageviews() ?></strong></td>
        </tr>
      </tbody> 
```

我不确定我是否可以在这里发布链接......但这段代码可以在[http://jb.utad.pt/gapi/上看到](http://jb.utad.pt/gapi/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:52:15.833

您只需要`one object`访问一个功能。您可以根据需要更改传递给函数的参数。

拥有`multiple objects`相同的类并不是高效的代码，因为每个对象都占用了那么多额外的内存。

因此，您只需要，

```
 $ga = new gapi('XXXX@gmail.com','XXXX');
 $ga->requestReportData( $report_id = XXXX, $dimension = array('browser'), $metrics =   array('visitors','pageviews','visits'), $sort_metric = '-visitors', $filter = 'browser == Firefox || browser == Chrome || browser == Internet Explorer || browser == Safari || browser == Opera && visits > 10', $start_date = '2012-10-17' );
 $ga->requestReportData( $report_id = XXXX, $dimension = array('country'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visits', $filter = 'country != (not set) && visits > 3', $start_date = '2012-10-17', null, null, 10 );
 $date2 = date('Y-m-d', mktime(0, 0, 0, date("m"), date("d")-15, date("Y")));
 $today = date('Y-m-d');
 $ga->requestReportData($report_id = XXXX, $dimension = array('date'), $metrics = array('pageviews','visits'), $sort_metric = array('date')  , $filter = '',$date2,$today, null,15); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:56:02.593

好吧，可能会有所帮助：

```
$ga1 = new gapi('XXXX@gmail.com','XXXX');
$ga2 = clone $ga1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:55:30.443

我假设您的电子邮件地址相同，因此您只需要一个对象。

```
include ("php/functions.php");

date_default_timezone_set('Europe/Lisbon');

require 'php/gapi.class.php';
$ga1 = new gapi('XXXX@gmail.com','XXXX');

$ga1->requestReportData( $report_id = XXXX, $dimension = array('browser'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visitors', $filter = 'browser == Firefox || browser == Chrome || browser == Internet Explorer || browser == Safari || browser == Opera && visits > 10', $start_date = '2012-10-17' );

$ga1->requestReportData( $report_id = XXXX, $dimension = array('country'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visits', $filter = 'country != (not set) && visits > 3', $start_date = '2012-10-17', null, null, 10 );

$date2 = date('Y-m-d', mktime(0, 0, 0, date("m"), date("d")-15, date("Y")));
$today = date('Y-m-d');
$ga1->requestReportData($report_id = XXXX, $dimension = array('date'), $metrics = array('pageviews','visits'), $sort_metric = array('date')  , $filter = '',$date2,$today, null,15); 
```

无需多次实例化同一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:00:33.643

最大的问题是：**多次实例化 gapi 类有意义吗？**它是您要解决的“问题”的有效解决方案吗？在大多数情况下，您可以实例化同一个对象数千次，并且不会产生太大的影响（内存方面）。那些告诉您将所有对象合并到一个实例中的人完全忽略了 OOP 的意义。如果拥有同一个类的多个实例是有意义的，请不要为了微优化而更改该类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T16:02:54.673

在您的代码示例中，实际上这些调用是多余的：

```
$ga1->requestReportData( $report_id = XXXX, $dimension = array('browser'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visitors', $filter = 'browser == Firefox || browser == Chrome || browser == Internet Explorer || browser == Safari || browser == Opera && visits > 10', $start_date = '2012-10-17' );
$ga2->requestReportData( $report_id = XXXX, $dimension = array('country'), $metrics = array('visitors','pageviews','visits'), $sort_metric = '-visits', $filter = 'country != (not set) && visits > 3', $start_date = '2012-10-17', null, null, 10 );
$ga3->requestReportData($report_id = XXXX, $dimension = array('date'), $metrics = array('pageviews','visits'), $sort_metric = array('date')  , $filter = '',$date2,$today, null,15); 
```

因为没有存储返回值。所以你可以把它们排除在外。事实证明，这三个对象也不需要`$ga1`。`$ga3`所以是的，您可以真正压缩它并保留任何这些对象。也不需要日期时间计算。

您的新文件：

```
<?php
/* space intentionally left blank */
?> 
```

故事的寓意：只要你不*说明为什么*调用这些函数，就不能说如何改进代码。

1.  返回的数据会发生什么？
2.  您是否在查询不同的 API 帐户？

# scala - 简单的 scala playframework 应用程序在 heroku 上不起作用

> ID：13311308
> 
> 赞同：1
> 
> 时间：2012-11-09T15:50:02.703
> 
> 标签：scala, heroku, playframework, playframework-2.0

我已经尝试过创建最基本的 playframework 应用程序，但是由于某种原因，当我将它部署到 heroku 时它看起来不正确。

主要问题似乎是：

*   内容中没有数据
*   未找到某些断言

有人有想法吗？

我的应用程序可以在这里找到：http: [//infinite-caverns-1800.herokuapp.com/](http://infinite-caverns-1800.herokuapp.com/)

请参阅此处的代码[https://github.com/andersbe/herokuTest.git](https://github.com/andersbe/herokuTest.git)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:18:56.760

这个应用程序运行完美！

我可以看到您推送了默认视图（显示绿色的“欢迎页面”），但请记住，欢迎页面仅在开发模式下显示。在生产中它被替换为消息`Your new application is ready.`

只需在`index.scala.html`文件中将行替换为`@play20.welcome(message)`并`bla bla bla`再次推送到 Heroku...

注意，请停止本地计算机上的应用程序并重新开始：`play start`- 您将看到与 Heroku 上完全相同的消息。

# c# - 使用 Word 互操作在列表前插入文本

> ID：13311310
> 
> 赞同：2
> 
> 时间：2012-11-09T15:50:14.067
> 
> 标签：c#, range, office-interop

我正在尝试在列表之前插入文本。我有`Microsoft.Office.Interop.Word.Range`列表的，并在列表之前获取上一个 Range。然后我尝试将我的段落文本添加到上一个范围，但是，该段落被添加为列表中的第一项而不是列表之前。

```
// rangeObj is the Range object for the list
var previousRange = rangeObj.Previous(MSWord.WdUnits.wdCharacter, 1);

Paragraph paragraph;
if (previousRange == null)
{
  var rangeCopy = rangeObj.Duplicate;
  rangeCopy.InsertParagraphBefore();
  paragraph = rangeCopy.Paragraphs[1];
}
else 
{
  paragraph = previousRange.Paragraphs[1];  
}

Range range = paragraph.Range;
range.Text = String.Format("{0} {1}", "My list", range.Text); 
```

例如之前：

1.  项目 1
2.  第 2 项

之后（我想要什么）：

我的列表

1.  项目 1
2.  第 2 项

之后（我目前得到的）：

1.  我的列表
2.  项目 1
3.  第 2 项

**编辑：** 根据 Lasse 的回答和我的评论，除了以下边缘情况，我正在让一切正常工作。注意：第二个列表不是第一个列表的子列表，每个列表之间没有空行。

```
if (previousRange.ListParagraphs.Count > 0) 
```

前：

1.  项目 1
2.  第 2 项

    1.  第 3 项
    2.  第 4 项

之后（我想要的）：

1.  项目 1
2.  第 2 项

    另一个清单：

    1.  第 3 项
    2.  第 4 项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:24:29.340

在这段代码中：

```
else 
{
  paragraph = previousRange.Paragraphs[1];  
} 
```

..您冒着覆盖列表之前的任何内容的风险（包括仅`\r`在其中的空行），当我在样本上运行它时，事情被覆盖并最终发生怪异是很有意义的。

在这段代码中：

```
if (previousRange == null)
{
  var rangeCopy = rangeObj.Duplicate;
  rangeCopy.InsertParagraphBefore();
  paragraph = rangeCopy.Paragraphs[1];
} 
```

..您在列表之前插入一个新段落（这很好 - 尽管我不明白为什么需要克隆范围，因为[范围会自动扩展以包括新插入的段落](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.insertparagraphbefore%28v=office.11%29.aspx)），然后存储范围局部变量中的新段落`paragraph`。此时，`paragraph = '\r'`- 的内容（如果您使用调试器单步调试应用程序，同时在调试阶段保持单词可见，则可以看到这一点）。因此，此时光标位于列表之前，这是您想要的位置 - 但是您执行以下操作：

```
Range range = paragraph.Range;
range.Text = "My paragraph"; 
```

...这意味着您无需在段落中添加文本，而是简单地覆盖包括 在内的所有内容`\r`，这会导致 Word 将文本插入列表中而不是之前。

为了绕过这个，我做了一个似乎可行的替代实现。它基于您使用列表之前的范围插入文本的想法。我已经为大多数行添加了评论，因此应该直接了解正在发生的事情:)

```
using System;
using System.Linq;
using Microsoft.Office.Interop.Word;
using Application = Microsoft.Office.Interop.Word.Application;

namespace WordDocStats
{
    internal class Program
    {
        private static void Main()
        {
            var wordApplication = new Application() { Visible = true };

            // Open document A
            var documentA = wordApplication.Documents.Open(@"C:\Users\MyUser\Documents\documentA.docx", Visible: true);

            // This inserts text in front of each list found in the document
            const string myText = "My Text Before The List";
            foreach (List list in documentA.Lists)
            {
                // Range of the current list
                var listRange = list.Range;

                // Range of character before the list
                var prevRange = listRange.Previous(WdUnits.wdCharacter);

                // If null, the list might be located in the very beginning of the doc
                if (prevRange == null)
                {
                    // Insert new paragraph
                    listRange.InsertParagraphBefore();
                    // Insert the text
                    listRange.InsertBefore(myText);
                }
                else
                {
                    if (prevRange.Text.Any())
                    {
                        // Dont't append the list text to any lines that might already be just before the list
                        // Instead, make sure the text gets its own line
                        prevRange.InsertBefore("\r\n" + myText);
                    }
                    else
                    {
                        // Insert the list text
                        prevRange.InsertBefore(myText);
                    }
                }
            }

            // Save, quit, dones
            Console.WriteLine("Dones");
            Console.ReadLine();
            documentA.Save();
            wordApplication.Quit();
        }
    }
} 
```

简而言之，代码在给定文档中的每个列表之前插入一个字符串。如果列表之前的行上已经有文本，则实现确保在列表之前和列表之前的行上已经存在的文本之后插入列表描述文本。

希望这可以帮助 ：）

***--- 更新以回答已编辑的问题：***

在第二轮中完成您在此处提出的要求的一种方法是执行以下操作：

```
...
// The paragraph before the current list is also a list -> so in order to insert text, we must do "some magic"
else if(prevRange.ListParagraphs.Count > 0)
{
    // First, insert a new line -> this causes a new item to be inserted into the above list
    prevRange.InsertAfter("\r");

    // Modify current range to be on the line of the new list item
    prevRange.Start = prevRange.Start + 1;
    prevRange.End = prevRange.Start;

    // Convert the list item line into a paragraph by removing its numbers
    prevRange.ListFormat.RemoveNumbers();

    // Insert the text
    prevRange.InsertBefore(myText);
}
... 
```

只需将该代码添加到我上面提供的示例代码循环`if-else`内的块中`foreach`，你应该很高兴:) 我已经在我的机器上使用 MS Word 2013 对其进行了测试，它似乎可以工作。

# java - Java 接口 - 对象到类的类型转换

> ID：13311313
> 
> 赞同：2
> 
> 时间：2012-11-09T15:50:26.000
> 
> 标签：java, object, interface

我有一个看起来像的界面

公共接口 KeyRetriever {

```
public Object getKey(Object obj); 
```

}

我希望实现类似于

CustomerTypeKeyRetriever（实现类）

```
public String getKey(Customer customer) {
    return null;
} 
```

我怎样才能做到这一点。目前它会引发编译错误 - “类型 CustomerTypeKeyRetriever 必须实现继承的抽象方法 KeyRetriever.getKey(Object)”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:55:51.830

在你的接口声明中使用泛型。

```
public interface KeyRetriever<T> {

public Object getKey(T obj);
} 
```

现在在你的子类中你可以实现它

```
 public class CustomerTypeKeyRetriever implements KeyRetriever<String> {
  public String getKey(String str){
        //your implementation

  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:54:56.730

你的实现应该有类似的方法

```
@Override
    public Object getKey(Object obj) {
        // TODO Auto-generated method stub
        return null;
    } 
```

我还将在我的所有实现方法上添加一个 @Override 注释，以便编译器可以在将来捕获任何方法更改/冲突，以防 API 发生更改。

如果您想要通用界面，下面应该可以工作（这就是我认为您可能想要的）

```
public interface KeyRetriever<T> {
    public Object getKey(T obj);
}

public class CustomerTypeKeyRetriever implements KeyRetriever<Customer> {

    @Override
    public String getKey(Customer obj) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

这里的返回类型可以是 Object 的任何子类，因为 java 支持[协变](http://en.wikipedia.org/wiki/Covariant_return_type)返回类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:04:00.723

假设您有一个 Person 界面：

```
public interface Person {} 
```

您的 Customer 和 Employee 类实现了：

```
public class Customer implements Person {/* Your class body */}
public class Employee implements Person {/* Your class body */} 
```

然后你可以像这样改变你的界面：

```
public interface KeyRetriever {

public String getKey(Person person);
} 
```

然后在您的客户类中，您必须像这样进行更改：

```
public String getKey(Person perosn) {
   return null;
} 
```

希望有帮助。快乐编码:)

# c# - 从asp.net中的模板生成一个excel文件

> ID：13311314
> 
> 赞同：0
> 
> 时间：2012-11-09T15:50:26.720
> 
> 标签：c#, asp.net, excel

我有一个桌面应用程序，在其中我从模板生成一个 excel 文件，基本上我所做的就是将模板 excel 文件的副本复制到一个新目录，打开它，然后向其中添加记录。

这是一个代码片段：

```
string ExcelFiles = txtFileOutput.Text; //Application.StartupPath + @"\ExcelFiles\"; 
        string DestFile = ExcelFiles + FinalListOfTrucks[0].Date.ToShortDateString().Replace('/', '_') + ".xlsx"; 
        if (File.Exists(DestFile))
        {
            try
            {
                File.Delete(DestFile);
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error deleting file: " + ex.Message);
            }
        }

        try
        {
            File.Copy(Application.StartupPath + @"\ExcelTemplate.xlsx", DestFile);
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error copying file: " + ex.Message);
        }

        string appPath = Path.GetDirectoryName(Application.ExecutablePath);            
        string strConnectionXls = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" + DestFile + ";Extended Properties=Excel 12.0;";
        OleDbConnection cno = new OleDbConnection(strConnectionXls);
        OleDbCommand cmo = new OleDbCommand();
        cmo.Connection = cno;
        cmo.CommandType = CommandType.Text;

string QueryHeader = "INSERT INTO [RptTotal$] (NUMERO,FECHA,JORNADA,PLACA,HORA_DE_LLEGADA,HORA_FIN_CARGUE,HORA_FIN_DESCARGUE,VOLUMEN,DISTANCIA,TIPO_DE_VEHICULO,MATERIAL,MISSED_DATE)";

cmo.CommandText = QueryHeader + " VALUES ('" + No.ToString() + "','" + Fecha + "','" + Jornada + "','" + Placa + "','" + HoraDeLlegada + "','" + HoraFinCargue + "','" +
                                                        HoraFinDescargue + "','" + Volumen + "','" + Distancia + "','" + TipoDeVehiculo + "','" + Material + "','" + MissedDate + "')";
                cmo.ExecuteNonQuery(); 
```

现在，假设我可以向我的 webapp 添加一个文件夹，并将 excel 模板放在那里，如何从那里开始在 web :\ 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:58:52.120

您在桌面应用程序上所做的相同的事情，只需要清理您的代码。

1.  复制模板，将模板保存在服务器中相同的位置
2.  需要删除所有消息框
3.  使用 OleDbConnection 修改您的 excel 文件（强烈推荐[OpenXML](http://www.microsoft.com/en-us/download/details.aspx?id=5124)或构建在 openXML 之上的库，如[Epplus](http://epplus.codeplex.com/)）
4.  保存更改
5.  将文件流式传输到客户端
6.  弄清楚如何清理流文件

# jquery - jQuery - 通过单击链接隐藏

> ID：13311315
> 
> 赞同：0
> 
> 时间：2012-11-09T15:50:33.363
> 
> 标签：jquery

我目前有一张看起来像这样的桌子......

```
 <table>
    <tr>
      <td>1</td>
      <td>2</td>
      <td><a href="#" class="remove">Remove</a></td>
    </tr>
    <tr>
      <td>1</td>
      <td>2</td>
      <td><a href="#" class="remove">Remove</a></td>
    </tr>
    </table> 
```

单击删除链接时，我想隐藏当前的 . 这是我尝试过的以下代码，但没有运气。

```
$(".remove").click(function() {

  $(this).parent("tr").hide();

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:51:47.260

您需要jquery 的[最接近（）](http://api.jquery.com/closest/)函数来查看最接近的层次结构。父母看起来只是一个级别。

```
$(".remove").click(function() {

  $(this).closest("tr").hide();

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T15:51:49.013

该[`.parent()`](http://api.jquery.com/parent/)方法只会查看直接父级。你需要再上一层，[`.closest()`](http://api.jquery.com/closest/)方法是：

```
$(this).closest("tr").hide(); 
```

您也可以（只是为了让您了解正在发生的事情）调用`.parent()`两次：

```
$(this).parent().parent().hide(); 
```

您传递给的选择器`.parent()`用于返回匹配的父元素，*而*不是返回匹配的第一个祖先- 请注意，在上面的示例中我没有传递任何东西*，*`.parent()`这很好。

这是一个[工作示例](http://jsfiddle.net/jamesallardice/sCkVR/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:52:32.447

使用`closest()`代替`parent()`：

```
$(".remove").click(function() {
  $(this).closest("tr").hide();
}); 
```

**[更新的小提琴](http://jsfiddle.net/KrgzZ/)**

# ruby-on-rails - 简单的表单关联作为隐藏字段

> ID：13311317
> 
> 赞同：1
> 
> 时间：2012-11-09T15:50:35.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我正在尝试以简单的形式将关联值作为隐藏字段传递

所以和你做的时候一样的功能......

```
= simple form for @document do |f|
 = f.association :clients 
```

...但会生成隐藏字段 insted

我正在尝试这样做

```
 = f.association :clients, as: hidden 
```

但这显然行不通

唯一对我有用的是

```
%input{ name: 'document[client_ids][]', value: '1'}
%input{ name: 'document[client_ids][]', value: '2'}
%input{ name: 'document[client_ids][]', value: '3'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:33:39.293

也许

```
=f.hidden_field :client_id, :value => "some value" 
```

但我认为你最好解释大局，然后我们可以为你建议一个合适的 rails 答案。在大多数情况下，使用隐藏字段表明应该以更好的方式完成某些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T23:30:31.227

数组在提交时以简单的形式从关联发送。以下将允许使用隐藏字段：

```
 <%= f.hidden_field('client_ids][', value: "some value") %> 
```

（注：反括号很重要）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:03:35.667

我认为

```
<%= f.association :clients, input_html: { hidden: true } %> 
```

应该管用。

# android - 发布后调试 Android 应用程序

> ID：13311321
> 
> 赞同：5
> 
> 时间：2012-11-09T15:50:46.983
> 
> 标签：android, apk-expansion-files

我正在对商店中已有的应用程序进行一些修复。该应用程序使用扩展文件。我创建了一个新版本的应用程序并上传了 apk 和相关的扩展文件。当我尝试从 Eclipse 运行该应用程序时，该应用程序启动，但随后扩展文件的下载失败并显示以下消息：“下载失败，因为您可能尚未购买此应用程序。” 显然我还没有购买该应用程序，我正在开发它！那么我该如何让它发挥作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:52:43.973

由于我不知道您的应用程序中的代码，因此我想为您提供一些提示，以帮助您找到答案：

*   您是否更新了 AndroidManifest.xml 中的 versionCode？
*   您是否更新了应用程序中用于获取扩展文件的版本代码？
*   上传新的 .apk 和新的扩展文件后，您是否等待了大约一个小时？每次我必须上传一个新的 .apk 和/或扩展文件时，我都需要大约一个小时才能使用它。
*   在尝试测试新的扩展文件之前，您是否已卸载该应用程序？使用提供的库，数据库将用于存储一些信息（如文件大小）。在现有应用程序之上安装应用程序可能不会从该数据库中删除信息。

下图为下一个指针：

*   我假设您正在使用它，但只是为了检查，您是否使用了正确的“公钥”？
*   您是否在“测试帐户”部分添加了电子邮件地址。这将是您正在测试扩展文件的设备上帐户的电子邮件地址。
*   您是否将“许可证测试响应”设置为适合您需要的响应？

![Play 商店发布者帐户资料页面](../Images/905870832e38facfc0425f1646ef843a.png)

如果这些指示对您没有帮助，我可能需要更多有关您尝试过的内容的信息等，以便我为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:14:00.743

是的，但现在方法已经改变了一点。每个应用程序都有密钥，

这个错误基本上有几个原因，请确保：

1.  您已从您的测试帐户登录到您的设备。
2.  您的代码中的密钥也相同。
3.  您已经在代码中正确地提到了扩展文件的大小（以字节为单位）。
4.  上传后等待3-4小时，然后它会立即开始下载它不起作用。

# sql-server-2008 - 使用 SSIS 包为 DB 表条目创建日志文件

> ID：13311324
> 
> 赞同：0
> 
> 时间：2012-11-09T15:50:57.780
> 
> 标签：sql-server-2008, logging

我有一个应用程序，在解析后将记录插入表中。每天有 +- 3000 万条记录，我通常会在一天结束时发送一份每日总计的报告。现在，我需要每隔几分钟或几秒钟创建一次日志文件，以便我们可以将插入到实时 syslog 类型的 feed 应用程序中的新记录的计数提供给该应用程序，该应用程序将实时显示此数据。我不确定是否应该在每次插入时写入文本文件，还是应该从 sql server 中为该表创建这些日志文件。这甚至可以做到吗？我担心每次插入后写入文件的开销。任何建议表示赞赏。

编辑：

我想用不同的方式来表达这个问题。我已经使用 SSIS sql 包每天创建一次日志文件。我可以将查询设置为每 30 分钟左右运行一次并收集自上次运行以来插入的所有新记录吗？

我在表中有 3/4 列，其中一列用于选择，即 dateAdded 列，记录根据此列分组以用于每日报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:25:17.070

如果你能以不同的方式解决问题，它会更有效率。

在您正在解析记录并将它们插入到表中的应用程序中，您可以添加几行代码来递增表示插入记录数的计数器。

然后，该计数器可以在桌面/智能手机网页上实时显示给有兴趣查看计数的尽可能多的用户。实际上，计数与时间的实时图表会更有趣。

您的应用程序是用什么语言编写的？我也许能够挖掘出一个简单的实时网络演示应用程序，它使用 C/C++ 实时增加计数。

# c# - 如何将字符串存储在可执行文件中？

> ID：13311326
> 
> 赞同：1
> 
> 时间：2012-11-09T15:50:58.120
> 
> 标签：c#, embedded-resource

我不能使用`Settings`，因为有一个外部文件。有没有办法在可执行文件中嵌入设置或以其他方式嵌入数据？

我需要能够启动应用程序并从内部保存数据，而不是在其他地方加载。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:52:43.913

你在说什么样的数据？字符串文件？单个文本字符串？如果它是一个文件，将文件的“Build Action”属性更改为“Embedded Resource”实际上会嵌入该文件。

如果它们是单个字符串，请向您的项目添加一个新文件，即资源文件 (.resx)，并将该文件标记为“嵌入式资源”。

这是一个类似的问题，其中有代码显示如何读取特定字符串：[read string from .resx file in C#](https://stackoverflow.com/questions/1508570/read-string-from-resx-file-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:53:11.557

最好的方法是为此使用[资源](http://msdn.microsoft.com/en-us/library/cc296240%28VS.95%29.aspx)文件。如果您使用多种语言，它会生成一个很好的静态类来使用并且很容易本地化。

# python - 我可以动态调用 suds 中的方法吗

> ID：13311327
> 
> 赞同：0
> 
> 时间：2012-11-09T15:51:01.427
> 
> 标签：python, suds

首先......我是python和suds的新手......

现在我想动态调用一个未知的webService提供的方法

我不知道它事先提供了什么服务

调用我知道的方法的正常方法是这样的：

```
client.service.getWeatherInfo() 
```

但是我怎么能在我知道它提供方法“getWeatherInfo”之前调用编写代码

我想它可能是这样或什么

```
client.service['getWeatherInfo'] 
```

有人知道怎么称呼它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:54:07.357

尝试

```
getattr(client.service, 'getWeatherInfo')() 
```

# shopify - 无法使用 XML 通过 API 更新 shopify 产品

> ID：13311328
> 
> 赞同：1
> 
> 时间：2012-11-09T15:51:02.067
> 
> 标签：shopify

我正在为我的演示合作伙伴商店使用带有私有 api 密钥的 shopify API。我无法更新产品。我收到 200 条回复，但没有任何改变。我为此使用 Fiddler。

这是我的网址。

```
https://brown-davis8963.myshopify.com/admin/products/110503384.xml 
```

带标题

```
Authorization: Basic <REDACTED>
Content-Type: text/xml 
```

请求正文

```
<product>
  <id type="integer">110503384</id>
  <title>Football</title>
</product> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:59:40.447

我相信您的内容类型必须是`application/xml`

# jakarta-ee - 无法让我的 Java EE 应用程序客户端工作

> ID：13311334
> 
> 赞同：0
> 
> 时间：2012-11-09T15:51:26.247
> 
> 标签：jakarta-ee, client, websphere

我正在尝试为 Websphere 7 编写 Java EE 应用程序客户端以访问部署在 WebSphere 服务器上的 EJB，但我似乎无法使用 JNDI 解析 EJB（我得到“找不到名称 comp/env/ejb在上下文“java：”'中。

我在 RBD 7.5 中将该项目创建为“应用程序客户端项目”，并使用“WebSphere Application Server v.7.0 应用程序客户端”来运行它。

我在创建初始上下文并在运行配置中提供信息时都尝试了（但不是同时）指定提供程序 URL，但没有任何区别。

我可能错过了一些非常简单的东西。

顺便说一句，launchclient 是否必须在 WebsShere 服务器上运行，或者我可以在另一台服务器上重新复制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:55:28.563

你读过这本红皮书吗？向您展示如何做到这一点。 [http://www.redbooks.ibm.com/redpapers/pdfs/redp4885.pdf](http://www.redbooks.ibm.com/redpapers/pdfs/redp4885.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:29:56.030

好的，看起来你正在到达某个地方！

***侧边栏：***这可能是设置应用程序服务器最令人沮丧的部分，因为文档低于标准，并且教程通常针对以前做过的人。我更像是一个 JBoss 人，我真的希望有更多 WebSphere 知识的人能够提供帮助，因为他们可能知道他们头脑中的答案，而我所能做的就是将您推向我*认为*的方向。

这是我的多 EE 上下文查找的示例：

```
@SuppressWarnings("unchecked")
public static <T> T getObjectFromContext(Class<T> clazz, Namespace namespace)
{
    // java:app/ProductionEJB/OptionsDao!com.danielbchapman.production.beans.SomeDaoRemote
    String lookup;
    if(JEE6)
        lookup = "java:global/" + namespace.toEnterpriseSix() + "/"
                + clazz.getSimpleName().replaceAll("Remote", "") + "!" + clazz.getName();
    else
        lookup = "ProductionEE5/" + clazz.getSimpleName().replaceAll("Remote", "") + "/remote";

    T ret = (T) getObjectFromContext(lookup);
    return ret;
} 
```

你可以看到上下文字符串（JBoss7/EE6）是：

`java:/global/#{JAR_NAME}/#{IMPLEMENTATION_CLASS}!#{REMOTE_INTERFACE}`

对于我的 EE5 查找（JBoss 5.1GA）是：

`#{EAR_NAME}/#{IMPLEMENTATION_CLASS}`

为了使这件事变得简单，您需要做的是跳入您的管理工具并查看您的部署。你会看到上下文，一般来说，每个实现都会有一点不同。有一个标准，据我所知，每个人都有自己的看法。（忽略我的“命名空间”类，它基本上只是有更多信息，无论是`java:app`还是`java:global`.

发布更多您的信息，我会尽力将您推向正确的方向。另外，寻找有关它的教程。我敢肯定这是微不足道的。

# c++ - 在 C++ 中读取 wav 块时出现意外值

> ID：13311336
> 
> 赞同：0
> 
> 时间：2012-11-09T15:51:31.093
> 
> 标签：c++, wav

我有一个似乎很简单的问题，但我似乎无法得到我想要的结果。

根据[Wav Format](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)，一个 16 位 wav 文件已签名，值范围从 -32768 到 32767。但我似乎只能得到正整数，我错过了什么？

这是我输出的几位数据的屏幕截图：

![跑计划](../Images/becc7d5fcc38dd923b338738a2203aa6.png) ![Wav 十六进制值](../Images/7d57ceb68a9459371c0ae8c1f3161390.png)

*   另外，有人能解释一下如何区分右声道数据和左声道数据吗？我似乎找不到足够的例子。谢谢。

这是我使用的代码，`wav.getFile()`在读取所有其他标头数据后完全返回文件指针。

```
int SoundData;

        for( int i = 0; i < 32; i++ )
        {

            fread( &SoundData, 4, 1, wav.getFile() );
            cout << SoundData << endl;
        } 
```

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:56:25.713

改变`SoundData`有`short int`帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:01:12.590

（将其作为答案建议）：

您一次读取 4 个字节......您不想一次读取 2 个字节（16 位）吗？

所以

```
fread( &SoundData, 4, 1, wav.getFile() ); 
```

应该成为

```
fread( &SoundData, 2, 1, wav.getFile() ); 
```

# c++ - 表达式模板 - 超出修饰名称长度

> ID：13311339
> 
> 赞同：6
> 
> 时间：2012-11-09T15:51:41.930
> 
> 标签：c++, templates, visual-c++, visual-studio-2012

我从我的代码中收到“超出装饰名称长度”的警告，我查看了类似问题的 SO 答案。*NB 我知道如何关闭它（pragma），我也知道这是一个我可以“忽略”的警告，并且基于 unix 的编译器可能不会发出它：P *

这个问题有一个实用的元素，如果我遇到错误，我必须翻阅一些非常可怕的文本和模板。这些错误目前主要是由于拼写错误造成的，但如果我有任何微妙之处，真正找到问题所在将是一场噩梦。

我的代码可以编译并且可以工作，但正如我上面所说的，我收到了警告。我有一个“比较”的小表情

```
...
auto expression = (l,aComma,w,aComma,x,aComma,y,aComma,z);
std::cout << expression; 
```

我从为我的表达式模板定义的逗号运算符生成的（如果需要，我可以发布，但尽量保持最小 - 复制了相当标准的东西）：

```
//
//Expression 
//
template < class E >
struct Expr 
{
    E expr_;
    Expr (E e) : expr_ (e) {}
    std::ostream& print(std::ostream& out) { return expr_.print(out); }
};

template < class L, class H, class OP >
struct BinExpr 
{
    L l_;
    H h_;
    BinExpr (L l, H h) : l_ (l), h_ (h) {}
    std::ostream& print(std::ostream& out) { l_.print(out) ; return h_.print(out); }
};

template< class A, class B >
Expr< BinExpr< Expr<A>, Expr<B>, Print<Expr<A>,Expr<B> > > > 
operator , ( Expr<A> a, Expr<B> b )
{
    typedef BinExpr < Expr<A>, Expr<B>, Print<Expr<A>,Expr<B> > > ExprT;
    return Expr<ExprT>(ExprT(a,b));
} 
```

Microsoft 页面讨论了重构以避免此警告。MS 将每个级别包装在一个plain`struct`中，然后包含一个模板化`element`成员。这样做的问题是，编写表达式模板的重点是使用隐式构造来创建所需的对象树，避免必须事先准确定义我将要创建的内容。所以...

*   我想问的问题是我是否可以在不失去功能和灵活性的情况下以某种方式将长度缩小？

*   或者，我能否以某种方式再次使用 Microsoft 的建议来包装部分结构，而不会失去功能和灵活性？我可以为要在`Expr`对象中使用的类型执行此操作，因为我将在逗号之间“列出”它们之前设置它们。但是随着我添加更多项目，长度会增加，因此它可能会再次达到这个限制。随着我添加新功能，我还将为此添加更多复杂性。这些将被类似地创建，因此很可能会产生更多的头痛......

*   我可以使用 C++11 的任何功能来提供帮助吗？我尝试了尾随返回类型，但内部 typedef 没有生效（我不确定它会有所帮助）。

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:02:18.397

每当我遇到这个警告并考虑重构代码以便不发出警告时，我发现在每种情况下重构都是不可能的。如果我不需要所有这些模板参数，我一开始就不会在那里拥有它们。

[MS页面](http://msdn.microsoft.com/en-us/library/074af4b6%28v=vs.80%29.aspx)还说：

> 但是，程序的正确性不受截断名称的影响。

基于这个事实，我的 SOP 是`#pragma`警告远离：

`#pragma warning( disable: 4503 )`

我承认，这个解决方案有点像原子弹。然而，这是我实际上会忽略任何级别的编译器警告的*唯一*实例，我相信可以安全地忽略它。

# google-drive-api - 通过 URL 复制 Google Drive 模板

> ID：13311346
> 
> 赞同：4
> 
> 时间：2012-11-09T15:52:04.623
> 
> 标签：google-drive-api

我想制作一份 Google Drive 文档模板的副本，然后在新的浏览器选项卡中打开它进行编辑。

我知道做到这一点的最好方法就是使用文档的模板 URL ...

[https://docs.google.com/a/mydomain.com/document/d/ABC9DWlLOn7uXYyJB1RqzkmHl5FZFMNmMsF-Y8YAz-uY/copy?token=n4hj23gk54.b325h.kAfj-N7rU-Pj1OzMzQmQvA](https://docs.google.com/a/mydomain.com/document/d/ABC9DWlLOn7uXYyJB1RqzkmHl5FZFMNmMsF-Y8YAz-uY/copy?token=n4hj23gk54.b325h.kAfj-N7rU-Pj1OzMzQmQvA)

基本上我会将该 URL 放在带有 target="_blank" 的锚标记中，然后单击该链接会将模板复制到我的 Google Drive，然后在新选项卡中打开它。

我的计划不起作用，因为 URL 需要一个令牌参数 - 我假设这是文档的目的地......上面的例子有效，但只是因为我知道令牌 - 我可以很容易地找出我的令牌，但是如何我可以即时获取另一个用户的令牌来编写 URL 以执行我想要的 URL 命令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T19:40:40.710

我知道这是一个较旧的链接，但对于那些在未来找到它的人......您可以使用预览链接来执行此操作，该链接为用户提供使用模板的选项。用这个：

```
https://drive.google.com/a/(your domain)/previewtemplate?id=(id copied from template file)&mode=domain 
```

甚至没有 a/domain：

```
https://drive.google.com/previewtemplate?id=(id copied from template file)&mode=domain 
```

*顺便说一句，该文件必须是适当的模板和共享集*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:29:47.940

抱歉，Drive SDK 中没有用于生成这些模板 URL 的工具。

这是一个合理（但很少见）的功能请求，我们将进行调查，如果有任何更新，我会回复这篇文章。

# xcode - 如何以编程方式添加从 0 不透明度到完全不透明度的动画按钮

> ID：13311356
> 
> 赞同：0
> 
> 时间：2012-11-09T15:52:30.047
> 
> 标签：xcode, opacity

我必须尝试在主视图上以编程方式添加一个从 0 不透明度到完全不透明度进行动画处理的按钮。这将是什么编码？我得到了这个编码，但似乎无法让它工作。

```
[UIElement setAlpha: 0.0f]; 

[UIView beginAnimations:nil context:NULL]; 
[UIView setAnimationDuration:0.5];

[UIElement setAlpha: 1.0f]; 

[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:22:03.893

将此代码放入您的 viewDidLoad 方法中：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
btn.frame = CGRectMake(0,0,100,50);
btn.alpha = 0;
[self.view addSubview:btn];

[UIView animateWithDuration: 0.3
                 animations: ^(void) { btn.alpha = 1; } ]; 
```

# makefile - Hubot makefile测试任务不起作用

> ID：13311359
> 
> 赞同：2
> 
> 时间：2012-11-09T15:52:32.987
> 
> 标签：makefile, coffeescript, hubot

当我运行 make test 时，我得到了这个：

```
coffee test/my_script_test.coffee
xargs: coffee: No such file or directory
make: *** [test] Error 127 
```

我的 makefile 没有从这个[https://github.com/github/hubot-scripts/blob/master/Makefile改变](https://github.com/github/hubot-scripts/blob/master/Makefile)

我可以完美地运行hubot，所以我不确定xargs 为什么不喜欢咖啡。

谢谢

# python - AppEngine 使 ndb 模型 json 可序列化

> ID：13311363
> 
> 赞同：22
> 
> 时间：2012-11-09T15:52:39.477
> 
> 标签：python, google-app-engine

我们有一个 ndb 模型，我们想让 json 可序列化。这些模型非常简单，大致如下：

```
class Pasta(ndb.Model):
   name = ndb.StringProperty()
   type = ndb.StringProperty()
   comments = ndb.JsonProperty() 
```

然后在处理程序方面，我们想做一些类似的事情：

`json.dumps(Pasta.query(Pasta.name=="Ravioli").fetch())`并将其返回给客户端，但它不断抛出 json 解析错误，因为 Pasta 类不是 json 可序列化的。所以，问题是，我们是否必须实施`__str__`，或者`__repr__`是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-09T16:29:36.673

`ndb.Model`实例有一个`to_dict()`功能： [https ://developers.google.com/appengine/docs/python/ndb/modelclass#Model_to_dict](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_to_dict)

最简单的方法是：

```
json.dumps([p.to_dict() for p in Pasta.query(Pasta.name == "Ravioli").fetch()]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-21T01:56:48.817

我不相信它已记录在案，但对于现有`ext.db`模型，您可以使用`db.to_dict()`（请参阅[此处](https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/db/__init__.py#3947)）。

但要小心`db.ReferenceProperty`'s 和`db.DateTimeProperty`'s，因为它们会在您调用时抛出错误`json.dumps()`。快速解决方案是自定义 JSONEncoder：

```
from datetime import datetime, date, time
from google.appengine.ext import db

import json

class JSONEncoder(json.JSONEncoder):

    def default(self, o):
        # If this is a key, you might want to grab the actual model.
        if isinstance(o, db.Key):
            o = db.get(o)

        if isinstance(o, db.Model):
            return db.to_dict(o)
        elif isinstance(o, (datetime, date, time)):
            return str(o)  # Or whatever other date format you're OK with... 
```

然后用这个编码：

```
JSONEncoder().encode(YourModel.all().fetch()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T20:00:09.143

或者你可以像下面这样向模型添加一个计算属性：

```
class Taxes(ndb.Model):
    name = ndb.StringProperty()
    id = ndb.ComputedProperty(lambda self: self.key.id()) 
```

然后在您的 get 方法中只需调用 to_dict ，您将获得 id

```
rows = [row.to_dict() for row in Taxes.query()]
self.response.write(json.dumps(rows)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T14:54:37.503

如果有一个 ndb.KeyProperty 引用不同的模型，你可以很好地覆盖字典方法，如下所示

```
def to_dict(self):
        result = super(Point, self).to_dict()
        result['x']=self.x.get().to_dict()
        result['y']=self.y.get().to_dict()
        return result 
```

如果 ndb.KeyProperty 是一个列表（重复设置为 True），请使用以下方法使用 get_multi 获取引用的模型

```
def to_dict(self):
       result = super(Figure, self).to_dict()
       result['points']=[p.to_dict() for p in ndb.get_multi(self.points)]
       return result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T15:55:36.613

如果有一个 ndb.KeyProperty 引用不同的模型，你可以很好地覆盖字典方法，如下所示

```
def to_dict(self):
        result = super(Point, self).to_dict()
        result['x']=self.x.get().to_dict()
        result['y']=self.y.get().to_dict()
        return result 
```

如果 ndb.KeyProperty 是一个列表（重复设置为 True），并且如果您也打算序列化引用的模型，请使用以下方法使用 get_multi 获取引用的模型

```
def to_dict(self):
       result = super(Figure, self).to_dict()
       result['points']=[p.to_dict() for p in ndb.get_multi(self.points)]
       return result 
```

# javascript - CurveyCorners/CSS3PIE 替代方案和故障

> ID：13311366
> 
> 赞同：0
> 
> 时间：2012-11-09T15:52:43.673
> 
> 标签：javascript, jquery, css, css3pie

我正在尝试圆角（最好使用`border-radius`css，但此时我可以考虑另一种选择）。我已经尝试过 CSS3PIE，但它在 IE8 中使用 jquery 引起了问题，并且存在显示问题，其中项目从它们的真实位置移位了几个像素。然后我尝试了 CurveyCorners，但它阻止了我在悬停时更改 css 的能力（使用 jquery `$(this).removeClass("nohover");$(this).addClass("hover");`）

有替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T09:09:19.473

我现在已经经历了很多次，我总是在同一个地方结束。这是我的经验告诉我的。

*   在所有现代浏览器中使用 CSS 边框半径作为圆角
*   让旧浏览器优雅降级
*   使用 LESS CSS（用于 mixins）： http: [//lesscss.org/](http://lesscss.org/)
*   使用 LESS CSS mixins 轻松编写border-radius 代码，无需为不同的浏览器亲自输入特定的border-radius 版本。[http://lesselements.com/](http://lesselements.com/)
*   在开发（或使用 codekit）时使用 less.js 进行编译。

这是一个少元素边界半径混合的一个很好的例子：

```
#some_div {
  .border-radius(5px, 0, 0, 5px);
} 
```

或者您可以手动编写不同版本的边界半径:)

不过最后：试图强制 IE8 使用 Javascript 进行圆角处理的主要问题之一是，通常您要求浏览器做很多额外的工作。运行 IE8 的机器通常是没有大量额外马力的机构机器。这会使最终用户体验比退化的 CSS 页面差得多。

# scheme - 在 Scheme 中返回一个真值

> ID：13311370
> 
> 赞同：1
> 
> 时间：2012-11-09T15:52:52.283
> 
> 标签：scheme

我在 Scheme 中实现这个程序时遇到了一些麻烦，尽管我认为我已经完成了 90% 的工作。不幸的是，我需要对此有点模糊，因为这是一项家庭作业。

我需要将一个列表作为输入，生成列表的所有可能子序列，并返回符合某个条件的 ONE。我已经完成了生成列表的所有子序列并判断某个子集是否是解决方案的代码。但是，我无法让 Scheme 返回该解决方案。我的代码现在基本上看起来像这样

```
(define (function rest_of_list subsequence)
    (if (subsequence is a solution) subsequence)
    (if (> (length rest_of_list) 0) (function (cdr rest_of_list) (append subsequence (car rest_of_list))))
    (if (> (length rest_of_list) 0) (function (cdr rest_of_list) subsequence))) 
```

这段代码应该做的是对列表中的每个元素，它在两个方向上递归分支。在一个方向上，它将 (car rest_of_list) 添加到子序列中并继续沿列表向下。在另一个方向上，它忽略 (car rest_of_list) 并继续沿着列表向下。一旦它找到一个可接受的子序列，它就会返回它，这就是函数调用的结果。现在我只是得到空白输出。我有点理解我猜的原因，但还不足以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:59:47.987

如果不查看您的实现的确切细节，这有点棘手，但我会按照以下方式做一些事情：

```
(define (function rest_of_list subsequence)
  (cond ((null? rest_of_list)
         '())
        ((subsequence is a solution)
         subsequence)
        (else
         (combine (function (cdr rest_of_list) (append subsequence (car rest_of_list)))
                  (function (cdr rest_of_list) subsequence))))) 
```

有趣的部分是你们`combine`两个分支的方式，它可以像`cons`. 另请注意，可能缺少基本情况：如果列表的其余部分为空会发生什么？

# javascript - Sublime Javascript 关键字突出显示

> ID：13311371
> 
> 赞同：3
> 
> 时间：2012-11-09T15:52:55.160
> 
> 标签：javascript, syntax-highlighting, keyword, sublimetext2

我最近在玩 Sublime Text 2 并通知了一些奇怪的 Javascript 语法突出显示：

（带 * 的字以青绿色突出显示，还不能发布图片，抱歉 :( )

```
*var* height = this.parent.*height*();
*var* width = this.parent.*width*();
this.*content*.*height*(height);
this.viewBottom.*width*(width);
this.viewTp.*width*(width); 
```

“内容”、“高度”、“宽度”的高亮有点奇怪。显然它们是关键字，但在这种情况下用不同的颜色标记它们会令人困惑。

有没有办法在 Sublime Text 2 中禁用或重新配置 JavaScript 的关键字突出显示？

我的第一次尝试是搜索 JavaScript.tmLanguage 文件，但我是 Sublime 的新手，迷失在 xml 结构中。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:40:38.370

您正在查看正确的文件来更改突出显示，但是，它由许多正则表达式组成，因此您很难为这些单词禁用突出显示，我猜您想为几乎每个 js 属性禁用它。

你可以让 sublime 以纯文本形式打开所有 .js 文件，但我认为你会失去很多，所以我的建议是习惯它。

无论如何要禁用javascript高亮，点击sublime右下角，应该有一个文本Javascript（如果你有一个.js文件打开），在菜单中选择“Open all with current extesion files as ...” - > 纯文本

希望它可以帮助你。

# javascript - ExtJs 为 Ext.MessageBox 创建自定义图标

> ID：13311375
> 
> 赞同：4
> 
> 时间：2012-11-09T15:53:16.143
> 
> 标签：javascript, extjs, extjs4

我有一个 ExtJs 表单，它在收到来自服务器的响应后会根据提交是否成功显示一个弹出窗口。代码如下所示：

```
if (form.isValid()) {
    form.submit({
        success: function (form, action) {
            Ext.Msg.alert('Success', action.result.msg);
        },
        failure: function (form, action) {
            Ext.MessageBox.show({
                title:'Failure',
                msg: action.result.msg,
                buttons: Ext.MessageBox.OK,
                icon: Ext.MessageBox.ERROR
            });
        }
    });
} 
```

现在，我想要一个带有“检查”图标的消息框，而不是成功的警报消息。看起来它在 ExtJS 中的可用方式与 Ext.MessageBox.ERROR 不同，所以我想知道如何创建一个自定义图标以显示在那里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:58:37.237

图标配置选项只是一个 CSS 类，定义一个新的类，如：

```
.check-icon {
    background-image: url(../img/check.png');
    background-repeat: no-repeat;
} 
```

然后在配置中：

```
icon: 'check-icon' 
```

应该做你想做的。

# image - 图片在 VS Template Web Forms 中显得太大

> ID：13311376
> 
> 赞同：1
> 
> 时间：2012-11-09T15:53:18.013
> 
> 标签：image, templates, webforms

我从 Visual Studio 模板打开了新项目 - Web Forms 应用程序。

如果我将 ImageButton 放在使用母版页图像的现有 Web 表单中，则图像太大，如果我将 ImageButton 放在没有母版页图像的 Web 表单上是正常的。

其他包含图像的控件也是如此。

任何信息表示赞赏...

# mongodb - pymongo - 如何从代表集中找到主要的

> ID：13311381
> 
> 赞同：2
> 
> 时间：2012-11-09T15:53:40.337
> 
> 标签：mongodb, pymongo

我将有一个运行 mongo 复制的 IP 地址列表。我需要自动添加一个节点。如何使用 pymongo 发出状态命令或其他方法来找出哪个 IP 是主要 IP？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:17:10.943

You should use the [ReplicaSetConnetion](http://api.mongodb.org/python/current/api/pymongo/replica_set_connection.html#pymongo.replica_set_connection.ReplicaSetConnection) to connect to your replica set. And according to the documentation for [High Availability and PyMongo](http://api.mongodb.org/python/current/examples/high_availability.html#replicasetconnection)

> By default an instance of ReplicaSetConnection will only send queries to the primary member of the replica set. To use secondaries for queries we have to change the ReadPreference

# c# - 如何将 Observable 序列化到云端并返回

> ID：13311386
> 
> 赞同：3
> 
> 时间：2012-11-09T15:53:59.057
> 
> 标签：c#, serialization, system.reactive, azure-storage-queues, azure-servicebus-queues

我需要在 Azure 环境中将处理序列（如[如何使用 .net RX 组织数据处理器序列](https://stackoverflow.com/q/13310865/296494)）拆分为多个计算单元。
这个想法是将 Observable 序列序列化到 Azure 队列（或服务总线）并将其反序列化。
如果生产者或消费者失败，另一方应该能够继续生产/消费。

任何人都可以提出一种优雅的方法以及使用什么（Azure Queues 或 Service Bus）吗？
有没有人使用过 TCP Observable 提供程序 - [http://rxx.codeplex.com/wikipage?title=TCP%20Qbservable%20Provider](http://rxx.codeplex.com/wikipage?title=TCP%20Qbservable%20Provider)来解决此类问题对于其中一方的失败是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T13:20:51.990

想象一下，您有一个消息队列，其中包含以下 API

```
class MQ {

    public MQ();

    // send a single message from your message queue
    public void send(string keyPath, string msg);

    // Receive a single message from your message queue
    public async Task<string> receive(keyPath);

} 
```

为了使这个 RX 兼容

```
class MQRX: IObserver<string> {
    MQ _mq;
    string _keyPath

    MQRX(string keyPath){
        _mq = mq;
        _keyPath = keyPath;
    }

    IObservable<string> Observe(){
        return Observable.Defer(()=> mq.receive(keyPath).ToObservable() ).Repeat();
    }

    void OnNext(string msg){
        _mq.send(msg);
    }

    void OnError(Exception e){
        // The message queue might not
        // support serializing exceptions
        // or it might or you might build
        // a protocol for it.
    }
} 
```

以容错方式使用它。注意 如果 OnError 传递的上游抛出异常，Retry 将重新订阅

```
new MQRX("users/1/article/2").
    Retry().
    Subscribe((msg)=>Console.Writeln(msg)); 
```

例如，在写作方面，您可以每两秒发送一条消息，如果出现错误，则重试订阅生成器。请注意，在 Observable.Interval 中不太可能出现错误，它只会在每个时间间隔生成一条消息，但想象一下从文件或其他消息队列中读取。

```
var mq = new MQRX("users/1/article/2");

Observable.Interval(TimeSpan.FromSeconds(2)).
    Select((x)=>x.ToString()). 
```

请注意，您可能应该使用 IObservable Catch 扩展方法，而不是盲目地重试，因为您可能会一遍又一遍地遇到相同的错误。重试（）。订阅（MQ）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:56:21.887

我用 30 行 VB 代码编写了自己的 UDP 到 RX 包装器，它可以处理超时。我猜 TCP 包装器会是类似的。

```
Imports System.Reactive
Imports System.Reactive.Linq
Imports System.Reactive.Threading.Tasks
Imports System.Threading
Imports System.Net
Imports System.Net.Sockets

Public Module UDP
    ''' <summary>
    ''' Generates an IObservable as a UDP stream on the IP endpoint with an optional
    ''' timeout value between results.
    ''' </summary>
    ''' <param name="timeout"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    Public Function StreamObserver(
                localPort As Integer, 
                Optional timeout As Nullable(Of TimeSpan) = Nothing
                ) As IObservable(Of UdpReceiveResult)

        Return Linq.Observable.Using(Of UdpReceiveResult, UdpClient)(
            Function() New UdpClient(localPort),
            Function(udpClient)
                Dim o = Observable.Defer(Function() udpClient.
                                                                ReceiveAsync().
                                                                ToObservable())
                If Not timeout Is Nothing Then
                    Return Observable.Timeout(o.Repeat(), timeout.Value)
                Else
                    Return o.Repeat()
                End If
            End Function
        )
    End Function
End Module 
```

如果需要，您可以对写入端执行相同的操作。然后，您只需使用普通的 RX 技术将数据序列化为 UDP 帧。

```
new UDP.StreamObserver(8080, TimeSpan.FromSeconds(2)).
        Select( function(udpResult) MyDeserializeFunction(udpResult)).
        Subscribe( sub (result) DoSomething(result), 
                   sub(error) DoSomethingWithError ) 
```

# html - 侧边栏显示在帖子内容下方而不是旁边（Wordpress）

> ID：13311388
> 
> 赞同：1
> 
> 时间：2012-11-09T15:54:04.393
> 
> 标签：html, css, wordpress

[现场直播](http://urbanpalate.com/blog/)

在尝试使我的侧边栏动态化时，发生了一些事情，导致我的整个侧边栏从博客容器的右侧被推到所有帖子内容的下方。我以前没有遇到过这个问题——我通常可以毫无问题地做到这一点——所以我不确定要寻找什么。有任何想法吗？

HTML/PHP

```
<?php get_header( 'blog');?>

    <div id="blog-container">       
        <div id="blog">
            <?php if (have_posts()) : ?>
            <?php while (have_posts()) : the_post(); ?>
            <div class="post-title">
                <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
            </div><!-- end post-title -->
            <div class="post">
                <?php the_content('read more..'); ?>
            <div class="post-meta">
                <p><?php the_date(); ?> | <?php the_tags('tags:', ', ', ''); ?> | <?php comments_number( '0', '1 comment', '% comments' ); ?></p>
                <?php comments_template(); ?>
            </div><!-- end post-meta -->
                <?php endwhile; ?>
                <?php else : ?>
                    Nothing found.
                <?php endif;?>
            </div><!-- end post -->
        </div><!-- end blog -->
        <?php get_sidebar(); ?>
        <?php get_footer(); ?>
    </div><!-- end blog-container --> 
```

CSS

```
#sidebar {
    float: right;
    margin-top: 80px;
    padding-right: 10px;
    position: relative;
    width: 300px;
}

.blog-social {
    clear: both;
    padding-bottom: 20px;
    text-align: center;
}

.blog-social ul li {
    display: inline;
    padding-right: 10px;
}

.blog-social ul li:last-child {
    padding-right: 0px;
}

#sidebar .social-heading {
    text-align: center;
}

#sidebar #twitter-feed {
    font-family: podkova;
    font-size: 80%;
    color: #333333;
    letter-spacing: 1px;
    line-height: 1.5;
    padding-top: 20px;
    padding-bottom: 20px;
    width: 280px;
}

#sidebar #twitter-feed ul li {
    padding-bottom: 10px;
}

#sidebar #instagram-feed {
    padding-top: 20px;
    padding-bottom: 20px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:05:29.587

看起来某个元素缺少结束标记，因此您的侧边栏正在`#blog`div 内呈现。尝试移动`</div><!-- end post -->`到上面`<?php endwhile; ?>`。

# ios - 如果我撤销 iOS 企业版，该应用程序还能运行吗？

> ID：13311393
> 
> 赞同：11
> 
> 时间：2012-11-09T15:54:29.873
> 
> 标签：ios, certificate

我正在通过外部 URL 部署我的应用程序。该应用程序使用企业配置文件安装在全球数百台设备上。证书将在几天后到期。我的问题是吊销证书会影响任何现有用户吗？我知道新用户将无法安装该应用程序，但现有用户呢？他们仍然能够正确使用该应用程序吗？如果是这样，您是否知道 Apple 允许该应用程序运行多长时间的时间范围？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T16:24:18.870

吊销证书将使任何现有应用程序失败。我相信重新启动设备时会检查证书。

您需要创建另一个新证书并使用新构建的应用程序更新用户的设备。

但是，即使您不撤销当前证书，任何现有应用程序仍将在几天后到期时停止工作。

[https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/DistributingEnterpriseProgramApps/DistributingEnterpriseProgramApps.html#//apple_ref/doc/uid/TP40012582-CH33-SW13](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/DistributingEnterpriseProgramApps/DistributingEnterpriseProgramApps.html#//apple_ref/doc/uid/TP40012582-CH33-SW13)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T16:20:28.280

> 撤销您的分发证书将使您的应用程序在任何已安装的设备上失败。

[http://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html#//apple_ref/doc/uid/TP40011159-CH26-SW7](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html#//apple_ref/doc/uid/TP40011159-CH26-SW7)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-14T09:30:49.103

> 重要提示：吊销企业分发证书会使使用该证书签名和部署的所有应用程序失效。

新地点

[https://developer.apple.com/library/ios/qa/qa1868/_index.html](https://developer.apple.com/library/ios/qa/qa1868/_index.html)

# ruby-on-rails - Rails 路由复合主键

> ID：13311396
> 
> 赞同：0
> 
> 时间：2012-11-09T15:54:39.113
> 
> 标签：ruby-on-rails

所以我有一个模型，它由 3 个整数作为主键组成。

```
property :id, Integer, :key => true
property :id2, Integer, :key => true
property :id3, Integer, :key => true 
```

我需要创建一个路由，当用`http://myserver.com/item/$id/$id2/$id3`它查询时，它将返回数据库中的特定项目。

# c++ - 编辑opencv中的错误窗口名称

> ID：13311397
> 
> 赞同：0
> 
> 时间：2012-11-09T15:54:43.217
> 
> 标签：c++, string, opencv

我在 Windows 8 中使用 opencv 2.4.1 和 Visual Studio 11。

我为我的窗口提供了清晰易读的名称，如下所示：

```
namedWindow( "canny_src");
imshow( "canny_src", canny_src );

namedWindow( "canny_other_image");
imshow( "canny_other_image", canny_other );

namedWindow( "RESULT");
imshow( "RESULT", result ); 
```

但是当窗户打开时，我得到了非常罕见的名字，你自己看：

![在此处输入图像描述](../Images/88b8acfcf9c5b9e399777b6a57c7091f.png)

有人可以帮我解决吗

编辑！！！整个代码在这里。

```
 #include "stdafx.h"
  #include "cv.h"
  #include "highgui.h"
  #include "opencv2\imgproc\imgproc.hpp"

  using namespace cv;

  Mat src;
  Mat other;

  int thresh_src = 100;
  int thresh_other = 100;
  int max_thresh = 255;

  void thresh_callback(int, void* );

  int main(int argc, _TCHAR* argv[])
  {
    IplImage *_img = cvLoadImage("C:\\Users\\Eric\\Desktop\\lena.jpg", 0);
    IplImage *_img_other = cvLoadImage("C:\\Users\\Eric\\Desktop\\lena.jpg", 0);
    src = Mat(_img);

    other = Mat(_img_other);

    namedWindow("image");
    imshow("image", src);

    createTrackbar("Tracking src: ", "image", &thresh_src, max_thresh, thresh_callback);
    createTrackbar("Tracking other: ", "image", &thresh_other, max_thresh, thresh_callback);

    waitKey(0);
  }

  void thresh_callback(int, void*)
  {
    Mat canny_src;
    Mat canny_other;
    Mat result;
    Canny(src, canny_src, thresh_src, thresh_src * 2, 3);
    Canny(other, canny_other, thresh_other, thresh_other * 2, 3);

    bitwise_and(canny_src, canny_other, result);

    namedWindow( "canny_src");
    imshow( "canny_src", canny_src );

    namedWindow( "canny_other_image");
    imshow( "canny_other_image", canny_other );

    namedWindow( "RESULT");
    imshow( "RESULT", result );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:00:02.107

我刚刚复制了您的代码并在我的系统上运行它。我没有得到任何错误的窗口名称。我附上了我的输出。 ![在此处输入图像描述](../Images/162b5a54e908840da5baca3e8ecb11b9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:03:07.717

放

```
setlocale( 0, "" ); 
```

在你提到的任何一个之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T07:09:28.120

我遇到了类似的错误。我的 imshow 窗口总是有一个错误的标题，并且 imread 总是失败（没有 img.data）。经过一番测试，我发现我有“_DEBUG;” 在发布时运行时在我的预处理器定义中。另一个错误来源是运行时库和混合调试/发布库。希望这可以帮助某人。

# java - 注释：如何获取实际对象？

> ID：13311403
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:55:03.517
> 
> 标签：java, list, object, input, annotations

提取形式主类：

```
Client k = getClient();
Truster kg = new Truster();
boolean ok = false;

while (!ok) {
    System.out.print("\n name: ");
    //io: is a class for my input from Keyboard

    kg.setName(io.readString()); // <--need the input from here

    //argu_vali is my ValidationClass
    if (argu_vali.analyse(k, "mylist") == 0) {
        ok = true;
    }
}

ok = false;
while (!ok) {
    System.out.print("\n: ");
    kg.setSumme(io.readInteger());
    if (argu_vali.analyse(kg, "sum") == 0) {
        ok = true;
    }
}

k.add_credit(kg); 
```

我的班级客户：

```
class Client{
     String name;

     @t_list_Check
     private ArrayList <truster> t_list= new ArrayList<>();
} 
```

我的班级委托人：

```
class Truster{
     String name;

     @Min(0)
     int sum;
} 
```

我自己的 t_list ValidatorClass：

```
public class t_list_Validator implements ConstraintValidator<t_list_Check, Collection> {

    @Override
    public void initialize(t_list_Check a) {
    }

    @Override
    public boolean isValid(Collection kg_list, ConstraintValidatorContext cvc) {
        Object[] objects = kg_list.toArray();

        if (objects.length < 1) {
            return true;
        }

        String new_name = objects[objects.length-1].toString(); //<---need here the
                                                                //right input from above
        for (Object o : kg_list) {
            if (new_name.equals(o.toString())) {
                return false;
            }
        }
        return true;
    }
} 
```

我现在的问题是，我只是为`t_list`. 对于我的信任者（`kg.setName(io.readString());`）的第二个输入，我从`objects[objects.length-1].toString()`我`ownValidator`的最后一个元素中收到，`t_list`而不是实际元素。

例如：

*   1.运行：
*   主要输入：test1
*   t_list_Validator 中的值 new_name：test1

...

*   2.运行：
*   主要输入：测试2
*   value new_name in t_list_Validator: test1 // 此处需要实际输入：“test2”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:25:54.033

只需将元素添加到列表中即可解决问题。验证后将其从列表中删除，然后继续验证......

```
while (!ok) {
    System.out.print("\n name: ");

    kg.setName(io.readString()); 

    k.add(kg); // add here the element

    if (argu_vali.analyse(k, "mylist") == 0) {
        ok = true;

    }
    k.remove(k.getList().size()-1); //delete the element and go on with validation
} 
```

# java - 使用 XSSF 加载一个空的 .xlsx 文件需要 20 秒。为什么？

> ID：13311407
> 
> 赞同：1
> 
> 时间：2012-11-09T15:55:09.430
> 
> 标签：java, excel, apache-poi, xssf

我正在使用以下几行打开一个**空**的Excel 2007 文档：

```
OPCPackage opcPackage = OPCPackage.openOrCreate(file)
wb = new XSSFWorkbook(opcPackage); 
```

有趣的是，它需要 20 秒才能做到这一点。为什么？

其他人则抱怨 XSSF，因为加载大文件的速度太慢。但对我来说，这只是一个空文件，甚至应该在 1 秒内完成！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:09:02.037

只是猜测：我不确定您生成的文件是否是有效的 xlsx 文件。也许它需要很长时间，因为它不是作为 Excel 工作簿创建的。

至于图书馆效率：这里有一个关于快速 xlsx 写作和 poi 使​​用 SXSSF 图书馆分支表现出色的问题。不确定它是否支持阅读。

# java - 在网页上提供 pdf 页面

> ID：13311408
> 
> 赞同：1
> 
> 时间：2012-11-09T15:55:16.897
> 
> 标签：java, pdf, google-drive-api

我制作了一个将 pdf 返回到浏览器的应用程序。它将pdf加载到必须对用户可见的特定页面上。这工作正常，但加载 pdf 需要一段时间。

为此，我为用户提供了一个带有数据的对象标签，以及一个指向谷歌驱动器的 URL。当用户单击按钮时，pdf 开始下载并显示。

由于大多数时候只有一页对用户很重要，我希望可以选择将 pdf 作为较小的文件提供。

**是否有任何库可以仅加载 1 页或 x 页的 pdf？主要原因是减少带宽使用。**

也许是一个谷歌脚本来分割pdf并将其作为一个较小的文件提供，......

我知道谷歌有一个标准的 docsviewer，但它有很多限制。（没有旋转，...）我更喜欢使用 adobe 插件。

更新：

我发现了一个涵盖 appengine 转换的项目。

[https://github.com/lookfirst/convert](https://github.com/lookfirst/convert)

我会检查它是否支持大 pdf，以及它是否可以将 pdf 从驱动器转换为每页的图像。如果这是可能的实时。我希望转换 + 下载图像比下载整个文件花费更少的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:28:07.387

使用 Drive SDK 的较小输出的一种解决方案是将 PDF 转换为 Google Doc，然后导出为 HTML。

否则请参阅@mkl 的评论。

# android - 跨进程共享状态变量

> ID：13311410
> 
> 赞同：1
> 
> 时间：2012-11-09T15:55:24.407
> 
> 标签：android, service, ipc, sharedpreferences, process

我想跨进程提供某些信息（比如说一个状态变量 - 一个布尔值）。此变量的状态由服务维护，其他应用程序只能读取它（不能修改它）。

我的第一个想法是 SharedPreferences，但文档中有一条说明，多个进程不支持 SharedPreferences 的使用。剩下的就是服务消息传递、AIDL、意图和 ContentProvider。

服务消息传递或 AIDL 是不可能的，因为它总是有一个异步部分（以及 Intents）。我也想到了 ContentProvider ，但这似乎有点夸张/臃肿。写入外部存储将允许其他进程修改数据。

那么，我是否遗漏了任何东西，或者我想要完成的事情真的不可能？（或为此推荐）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:15:16.457

> 服务消息传递或 AIDL 是不可能的，因为它总是有一个异步部分（以及 Intents）。

绑定到基于 AIDL 的服务是异步的，但这是预先完成的。调用 AIDL 定义的方法是同步的。

> 我也想到了 ContentProvider ，但这似乎有点夸张/臃肿。

您的大多数选择将类似地“为此而夸大/臃肿”。

> 我错过了什么吗

您可以使用广播`Intents`来推送对值的更改，尤其是在值不经常更改的情况下。这里的挑战是引导初始值（例如，App B 已安装并需要来自 App A 的值，但必须等到值更改并且 App A 发送广播）。但是，如果您要大量读取该值，这可能值得考虑，因为每次读取执行一次 IPC 可能会增加超出其价值的开销。

此外，您可能希望重新考虑拥有这种依赖关系是否是一个好主意。使用我前面段落中的命名法，如果 App B 需要 App A 维护的一些价值，App B 可能没有 App A 就无法存在。由于用户可以随时卸载 App A，这可能会导致问题。此外，如果此标志是某种控制机制（例如，请不要在其他应用程序执行 Y 时执行 X），您将遇到问题，特别是在两个进程可能真正同时运行的多核设备上.

# sql - 我将如何在 microsoft access 中进行此查询

> ID：13311411
> 
> 赞同：1
> 
> 时间：2012-11-09T15:55:28.810
> 
> 标签：sql, ms-access, ms-access-2010

我最近才开始使用 microsoft access，并且一直在将 excel 电子表格导入单独的表格中。表格的内容类似于以下内容（我将列名放在顶部，表格下方会有其他条目，所以会有更多名称等）

```
ID | name | age | and so on
1  | ajw5293 | 22 | 
```

然后对于一个额外的表，我有一些类似的东西：

```
ID | location | time | grade | and so on
1  | 02364    | 10:50 | A | 
```

如果我想在其中搜索一个名称的查询，然后根据 ID 显示该名称的所有相关信息（因此将检索 ID 为 1 的行中的所有信息），什么你认为这样做是最好的方法吗？我一直在寻找一些关于如何做到这一点的指导方针，但不幸的是还没有找到一个解决方案。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:16:33.943

你需要加入。

```
SELECT NameTable.ID,[Name],Age,location,[time],[grade],NameTable.[and so on]
FROM NameTable
INNER JOIN AdditonalTable
ON NameTable.ID=AdditionalTable.ID
WHERE [Name] = [Enter name:] 
```

您可以轻松地在查询设计窗口中构建此查询，方法是添加两个表，然后将 ID 字段从一个表拖到下一个表以创建连接。然后只需将您需要的任何字段拖到设计网格中。您可以在标准行上添加标准。`[Enter name:]`将提示输入名称，并且

```
 WHERE [Name] = "Joe" 
```

会回来的人叫乔。

请注意，名称和时间是保留字，不应使用。

我已经说过`NameTable.ID`，但只是`age`，这是因为 ID 出现在两个表中，因此必须命名表，而`age`只出现在一个表中，在这种情况下最好命名表，但您不必这样做。

更多信息： http: [//msdn.microsoft.com/en-us/library/office/bb208894 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb208894(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:57:43.150

您可以简单地运行一个看起来像的 SELECT 查询

```
SELECT * FROM Table_Name WHERE NAME='SEARCHED_NAME'; 
```

# c# - C# .net 远程聊天客户端/服务器

> ID：13311413
> 
> 赞同：0
> 
> 时间：2012-11-09T15:55:30.700
> 
> 标签：c#

我目前正在开发一个程序，该程序将成为对等聊天系统。如果程序的每次启动都会初始化一个客户端和一个服务器。

我有可以向 Server2 发送消息的 Client1，但我还没有找到一种方法来让消息显示在 Client2 的聊天屏幕上。

由于我必须在启动客户端之前启动服务器，有没有办法在两台服务器之间传递信息？

我有服务器端用于数据的客户端、服务器和 Class1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:59:46.750

您可以使用[SignalR](http://signalr.net/)发送消息客户端/服务器或服务器/服务器

# python - 从 python 运行 MATLAB 脚本 + 传递参数

> ID：13311415
> 
> 赞同：12
> 
> 时间：2012-11-09T15:55:32.300
> 
> 标签：python, matlab, wrapper, mlabwrap

我正在从 Python 中寻找 MATLAB。我需要使用 MATLAB Image Acquisition Toolbox 从摄像机获取少量图像。

MATLAB 似乎是一个不错的解决方案，因为图像采集很容易，之后我必须进行一些图像处理。我已经搜索了很长时间，但我仍然没有找到任何可以从 Python 中执行此操作的方法。

以下是我的一些尝试：

* * *

**mlabwrap 1.1 - 运行 MATLAB 脚本：**

一个 MATLAB 脚本，如：

```
vid = videoinput('testadaptor');
img = getsnapshot(vid);
imwrite(img,'./image.png','png'); 
```

您可以使用以下命令运行此脚本：

```
mlab.run('script.m') 
```

但是，在哪里传递一些参数（目录、图像描述等）？由于 mlabwraps 糟糕的纪录片，我没有找到任何东西。我使用 mlab.lookfor('theme of interest') 功能没有成功

* * *

**mlabwrap 1.1 - 使用 mlab 函数进行图像采集：**

乍一看不可能读出一个“视频输入对象”，没有功能如：

```
image = getsnapshot(video input object)
imwrite(image,'directiory\image.png','png') 
```

* * *

**python-matlab-bridge**

[https://github.com/jaderberg/python-matlab-bridge](https://github.com/jaderberg/python-matlab-bridge)

我有 Windows7 64 位作为操作系统。他们说，它只适用于unix。

* * *

**尼佩佩**

[http://nipy.sourceforge.net/nipype/api/generated/nipype.interfaces.matlab.html](http://nipy.sourceforge.net/nipype/api/generated/nipype.interfaces.matlab.html)

似乎很新。我还没有尝试安装它。我猜它似乎适合我的问题，但不适合 Windows。

* * *

**PyMAT**

不支持 python 2.7

* * *

**那么有没有人可以帮助我？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T22:27:23.887

While I'm not very familiar with python-matlab-bridge, Nipype, or PyMAT, I've done a fair amount of work with mlabwrap, and I'll try and answer your question with regards to that package.

First, it will be a lot easier if you work in terms of functions, instead of scripts. Let's recast your Matlab script as a function, in `myFunction.m` like so:

```
function myFunction(v_input, directory, file_name)

    vid = videoinput(v_input);
    img = getsnapshot(vid);
    location = [directory file_name]
    imwrite(img, location,'png'); 
```

You can then call this function from python using `mlabwrap.mlab`, passing in strings for the function arguments. All Matlab functions, including user-defined functions, are available as attributes from the `mlabwrap.mlab` module.

```
>>> from mlabwrap import mlab
>>> mlab.myFunction('testadaptor', './', 'image.png') 
```

mlabwrap will convert your strings into a Matlab-readable format, and pass them to your function as arguments. If an `AttributeError` is raised, that usually means that your function is not on the Matlab path. You can add it with the command:

```
>>> mlab.path(mlab.path(), 'C:\function\directory') 
```

Just as a cautionary note, mlabwrap will automatically convert some argument types, such as strings or numpy arrays back and forth between Python and Matlab. However, there are many types, such as Matlab structs and classes, that it cannot convert. In this case, it will return an `MLabObjectProxy` from the Matlab function. These proxy objects cannot be manipulated in Python or converted into Python types, but can be successfully passed through mlabwrap into other Matlab functions. Often, for functions with complex output, it is better to write that output to a file within the Matlab function, and import the data from the file on the Python side. Good luck!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-20T13:14:00.957

1.  Python/OpenCV：您可以使用本机解决方案从您的视频设备获取图像。使用 OpenCV，您甚至可以进行实时图像处理。
2.  [matlab_wrapper](https://github.com/mrkrd/matlab_wrapper)：假设您有一个接受一些参数并返回图像数组的 MATLAB*函数*（不是脚本），例如`[img] = get_image(some_parameter)`，您可以编写如下内容：

```
matlab = matlab_wrapper.MatlabSession()
img = matlab.workspace.get_image(some_parameter) 
```

免责声明：我是 matlab_wrapper 的作者

# java - java CMS gc 日志中的“真实”、“用户”和“系统”是什么意思？

> ID：13311416
> 
> 赞同：12
> 
> 时间：2012-11-09T15:55:39.817
> 
> 标签：java, garbage-collection, jvm

对于以下 Java 版本：

OpenJDK 版本“1.6.0”
OpenJDK 运行时环境（内部版本 1.6.0-b23）
OpenJDK 64 位服务器 VM（内部版本 20.0-b11，混合模式）

使用以下 GC 标志：

-verbose:gc
-XX:+UseConcMarkSweepGC
-XX:+CMSClassUnloadingEnabled
-XX:+PrintGCDetails
-XX:+PrintGCDateStamps

我们得到如下日志行：

> 2012-11-09T16：46：53.438-0100：[CMS 并发标记：4.039/4.060 秒] [时间：用户 = 4.09 系统 = 35.05，实际 = 4.06 秒]

根据[https://blogs.oracle.com/poonam/entry/understanding_cms_gc_logs](https://blogs.oracle.com/poonam/entry/understanding_cms_gc_logs)的初始“4.039/4.060 秒”意味着并发标记总共花费了 4.039 秒的 CPU 时间和 4.060 秒的挂墙时间（这也包括其他线程的产量） ）。

但是用户、系统和实际值在这里意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-18T21:59:48.497

1.  sys 和 user 是独占的 CPU 时间。因此，它们不包括进程被 CPU 阻塞或正在执行 I/O 等的时间。

2.  GC 时间通常应该类似于 sys+user 时间，但如果进程被阻塞或等待，那么它会更高。这对于串行收集器和单个处理器盒来说是正确的。但是，在多处理器环境（具有并行收集器）中，GC 时间会小于 sys+user 时间，因为有多个 CPU。

3.  实际时间类似于 GC 时间。

# xcode - xcode 4.5.2 如何创建基于视图的应用程序

> ID：13311422
> 
> 赞同：0
> 
> 时间：2012-11-09T15:55:51.993
> 
> 标签：xcode, xcode4.5

我想用 xcode 4.5.2 构建基于视图的应用程序，但是当我创建新项目时，我看到的只是下面的照片，没有称为“基于视图的应用程序”的类型，是“单视图应用程序”还是什么？![在此处输入图像描述](../Images/ee0a821e00c4eb4c29792238033c251d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:59:30.433

是的，使用“单一视图应用程序”。

顺便说一句 - 你可以尝试一下看看你得到了什么。可以做实验。尝试每一个，看看他们做了什么。在模拟器中构建并运行每个。这是一个很好的学习方式。你会有很多例子。

不要害怕创建许多简单的项目来尝试。

# html - html中的两个css文件具有不同的设置

> ID：13311428
> 
> 赞同：0
> 
> 时间：2012-11-09T15:56:15.400
> 
> 标签：html, css

我有两个样式表和一个 html 页面。我可以在页面中心的 div 中使用其中一个样式表吗？我想这样做是因为这两种样式对 h1、h2、th 等都有不同的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:59:52.697

HTML 5 引入[了`scoped`属性](http://html5doctor.com/the-scoped-attribute/)。

这将允许您拥有一个仅适用于文档的一部分的`<style>`元素（而不是`<link>`外部样式表）。

浏览器支持很弱（我拥有的最新统计数据来自[2011 年 9 月，当时支持为零](http://html5doctor.com/the-scoped-attribute/#support)），所以这对你来说几乎肯定不实用。

* * *

通常的解决方案是使用单个样式表。用 an 将文档的部分包裹在一个元素中，`id`并在选择器中使用该 id 和[后代组合](http://www.w3.org/TR/selectors/#descendant-combinators)器来覆盖更广泛文档中的所有适用样式。

```
h1 { 
    color: red;
}

#mySection h1 {
    color: black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:03:59.450

例如，在 div 中，如果您有以下内容，您可以访问标题：

```
<div class="example">
    <h1>Fancy headline</h1>
</div> 
```

您可以使用 .example h1 {...} 之类的样式来仅为该标题指定特定样式。这就是css中的级联；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:04:30.480

与其尝试指定 HTML 的哪个部分将使用哪个样式表，不如在您的样式表中更具体，这样您就不会遇到样式冲突。例子;

HTML：

```
<div id="a">
    <div class="b">
        <h1>c</h1>
    </div>

    <h1>d</h1>
</div> 
```

CSS：

```
#a h1 {
    /* style */
}

#a .b h1 {
    /* another style */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:00:20.483

特异性将决定哪一个优先。如果您选择走那条路，您可以添加类以区分 H1 的一种风格或另一种风格。

但是，通过 HTTP 加载两个 CSS 文档也会对性能造成影响。

就个人而言，我会在一份文件中按班级制定我的风格。例如：

```
h1 {
    color:orange;
}

.style1 h1 {
    font-size: 600%;
    color: red;
}

.style2 h1 {
    font-size: 20%;
    color: yellow;
} 
```

关键是保持简单。想想如果您的网站变得非常庞大，您的方法在长期内的可维护性如何。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-09T16:09:33.163

您可以使用任意数量的样式表。但最好将所有样式组合到一张表中，这样您的页面就不必从网络服务器请求多个文件。

但更重要的是：如何在页面上以不同的方式设置相同元素的样式？

几种方法：

1) 通过使用`class`或`id`。如果你有一个标签`<h2 class='regular'>`，`<h2 class='highlight'>`那么你可以用不同的方式来设计它们。

```
.regular {
color: #000000;
}
.highlight {
color: #0000ff;
} 
```

2）您还可以根据与其他元素的关联来设置样式。例如，如果您的页面结构是：

```
<body>
    <div class='lvl-one'>
        <p class='lvl-two'></p>
    </div>
</body> 
```

您`<p class='lvl-two'>`甚至可以在没有`class`这样的情况下定位：

```
div p {
    font-size:24px;
} 
```

PS。你的页面上不应该有多个`h1`标签——这对 SEO 不利。

# gwt - 如何在两个面板之间进行移动过渡动画？

> ID：13311430
> 
> 赞同：1
> 
> 时间：2012-11-09T15:56:21.407
> 
> 标签：gwt

我在 gwt 中有两个面板 (`A`和)。`B`

首先`A`是显示和`B`隐藏。如果我单击一个按钮，则会`A`隐藏并`B`显示。

但是，我希望有`moving transitions animation`两个面板之间，即，如果我单击按钮，`A`移开并`B`移入等。

我可以通过 gwt 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:03:28.170

首先，您可以将[DeckPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/DeckPanel.html)与 setAnimationEnabled(boolean enable) 一起使用。

如果你不喜欢 DeckPanel，你也可以像这样创建自己的动画：

```
public class SlideAnimation extends Animation
{
    private final Widget widget;
    private boolean         opening;

    public SlideAnimation(Widget widget)
    {
        this.widget = widget;
    }

    @Override
    protected void onComplete()
    {
        if(! opening)
            this.widget.setVisible(false);

        DOM.setStyleAttribute(this.widget.getElement(), "height", "auto");
    }

    @Override
    protected void onStart()
    {
        super.onStart();
        opening = ! this.widget.isVisible();

        if(opening)
        {
            DOM.setStyleAttribute(this.widget.getElement(), "height", "0px");
            this.widget.setVisible(true);
        }

    }

    @Override
    protected void onUpdate(double progress)
    {
        int scrollHeight = DOM.getElementPropertyInt(this.widget.getElement(), "scrollHeight");
        int height = (int) (progress * scrollHeight);
        if( !opening )
        {
            height = scrollHeight - height;
        }
        height = Math.max(height, 1);
        DOM.setStyleAttribute(this.widget.getElement(), "height", height + "px");
    }
} 
```

然后将处理程序添加到您的按钮：

```
@UiHandler("myButton")
protected void handleClick(ClickEvent event)
{
    myAnimation.run(180); // myAnimation should be initialized in your constructor
} 
```

这只是一个示例，但我认为您可以通过一些更改来做您想做的事情。

# objective-c - 使用为 ARC 配置的 XMLRPC 库，收到 ARC 错误

> ID：13311434
> 
> 赞同：0
> 
> 时间：2012-11-09T15:56:31.970
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在使用为处理 ARC 和非 ARC 项目而设置的[XMLRPC 库。](https://github.com/eczarny/xmlrpc)当我尝试向它传递一个 NSError 对象时，我收到了错误：

```
Implicit conversion of an Objective-C point to 'NSError *_autoreleasing *' is disallowed with ARC 
```

和一个警告：

```
Incompatible point types sending 'NSError *_strong' to parameter of type 'NSError *_autoreleasing *' 
```

这是方法：

```
+ (XMLRPCResponse *)sendSynchronousXMLRPCRequest: (XMLRPCRequest *)request error: (NSError **)error {
    NSHTTPURLResponse *response = nil;
#if ! __has_feature(objc_arc)
    NSData *data = [[[NSURLConnection sendSynchronousRequest: [request request] returningResponse: &response error: error] retain] autorelease];
#else
    NSData *data = [NSURLConnection sendSynchronousRequest: [request request] returningResponse: &response error: error];
#endif

    if (response) {
        NSInteger statusCode = [response statusCode];

        if ((statusCode < 400) && data) {
#if ! __has_feature(objc_arc)
            return [[[XMLRPCResponse alloc] initWithData: data] autorelease];
#else
            return [[XMLRPCResponse alloc] initWithData: data];
#endif
        }
    }

    return nil;
} 
```

这是我的尝试：

```
NSError *myError;

XMLRPCResponse *serverResponse = [XMLRPCConnection sendSynchronousXMLRPCRequest:request error:myError]; 
```

我想我不熟悉

```
#if 
```

语法，但我猜它的行为就像一个常规的 If 语句？

我还启用了 ARC：

![在此处输入图像描述](../Images/9cb312351647ec0467a7f851a02a8805.png)

我应该重做 XMLRPCResponse 方法以删除对非 ARC 项目的处理，还是有原因导致我收到错误/警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:20:56.807

在这里看看这个答案：

[我如何知道编译器是否启用了 ARC 支持？](https://stackoverflow.com/questions/9462372/how-do-i-know-whether-the-compiler-has-arc-support-enabled)

你用的是什么编译器？可能不支持`__has_feature`

关于错误..你应该按照以下方式做一些事情：

```
NSError *error = nil;
XMLRPCResponse *serverResponse = [XMLRPCConnection sendSynchronousXMLRPCRequest:request error:&error]; 
```

因为该方法需要一个双指针作为错误参数。

# url-rewriting - 页面未在 ExpressionEngine 中重写

> ID：13311436
> 
> 赞同：1
> 
> 时间：2012-11-09T15:56:41.487
> 
> 标签：url-rewriting, expressionengine

我最近刚刚启动了一个 ExpressionEngine 站点，我采取的最后一个步骤是从 URL 中删除 index.php。在此站点的情况下，默认模板组称为“站点”。长话短说，从 URL 中删除 index.php 后，所有页面都可以继续正常工作，但我的联系页面除外，它也位于“站点”模板组中。转到[http://example.com/contact/](http://example.com/contact/)会给我一个 404，而转到[http://example.com/site/contact](http://example.com/site/contact)会产生所需的结果。在过去的 ExpressionEngine 站点设置（包括我自己的）中，这从未发生过，所以有没有人想过为什么这可能不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:00:18.800

第一个 URL 段始终映射到模板组。当没有第一个 URL 段时，ExpressionEngine 会自动加载`index`默认模板组中的模板。

现在，您将获得 404，因为您没有`contact`模板组。您可以在此处执行以下两项操作之一：

1.  将您的`site/contact`模板移动到`contact/index`

2.  重定向`/contact`到`/site/contact`使用`.htaccess`或[Detour Pro](http://devot-ee.com/add-ons/detour-pro)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:57:43.623

安德鲁，这也可能是因为严格的 URL。模板首选项中的严格 URL 意味着默认模板组（在您的情况下为“站点”）不再解析，而无需为其附加模板组名称（唯一的例外是 /index）。

杰西的解决方案有效。过去我在这里使用过 Brandon 的重定向 tomfoolery：http: [//pixelandtonic.com/blog/making-pt-structure](http://pixelandtonic.com/blog/making-pt-structure)

# java - 为什么在将字符串转换为整数时出现 NumberFormatException？

> ID：13311441
> 
> 赞同：0
> 
> 时间：2012-11-09T15:56:52.873
> 
> 标签：java, parsing

这是我的代码：

```
 public void setAreaAccessPoints(){
    String mac = "",essid = "",status = "";
    int strength = 0,kanali = 0;
    List<String> AccessPoints = new ArrayList<String>(); //i lista me ta access points
    String temp;
    try{
        String[] command = {"/bin/sh", "-c", "sudo iwlist " + wirelessName + " scanning | grep -A5 \"Cell\" "};
        Process child = Runtime.getRuntime().exec(command);
        BufferedReader r = new BufferedReader(new InputStreamReader(child.getInputStream()));
        while((temp = r.readLine()) != null){
            if(temp.contains("Cell")){
                String[] info = temp.split(" ");
                mac = info[3];
                System.out.println(mac);
                do{
                    temp = r.readLine();
                    if(temp.contains("ESSID:")){
                        essid = temp.replace("ESSID:","");
                    }
                    if(temp.contains("Frequency:")){
                        String[] info1 = temp.split(" ");
                        info1[3] = info1[3].replace(")","");
                        kanali = Integer.parseInt(info1[3]);
                    }
                    if(temp.contains("Mode:")){
                        status = temp.replace("Mode:","");
                    }
                    if(temp.contains("Quality=")){
                        String[] info2 = temp.split(" ");
                        info2[3] = info2[3].replace("level=","");
                        strength = Integer.parseInt(info2[3]);
                    }
                    if(temp.contains("Protocol:")){
                        temp = r.readLine();
                    }
                }while(!(temp.contains("Cell")));
                AccessPoint newAP = new AccessPoint(mac,essid,kanali,status,strength); 
                AccessPoints.add(newAP.toString());  //vazoume ta access points sti lista san strings
            }
        }
        r.close();
        for(String s : AccessPoints)
            System.out.println(s);
    }catch(IOException e){e.printStackTrace();}
} 
```

我正在解析的输出如下所示：

```
 Cell 04 - Address: 00:05:59:30:C1:7C
                Protocol:802.11b/g
                ESSID:"NA home"
                Mode:Managed
                Frequency:2.437 GHz (Channel 6)
                Quality=2/100  Signal level=-89 dBm  Noise level=-92 dBm
  --
      Cell 05 - Address: 00:05:59:43:AE:C9
                Protocol:802.11b/g
                ESSID:"NetFasteR IAD 2 (PSTN)"
                Mode:Managed
                Frequency:2.437 GHz (Channel 6)
                Quality=0/100  Signal level=-91 dBm  Noise level=-94 dBm
  --
      Cell 06 - Address: 00:05:59:3B:C1:FA
                Protocol:802.11b/g
                ESSID:"Kpanagiotou"
                Mode:Managed
                Frequency:2.437 GHz (Channel 6)
                Quality=0/100  Signal level=-91 dBm  Noise level=-94 dBm
  -- 
```

错误出现在 2 行中`"strength = Integer.parseInt(info2[2]);"`，并且`"kanali = Integer.parseInt(info1[3]);"`......我似乎无法弄清楚问题出在哪里。当我拆分字符串时，根据输出，我想要的信息在第二个和第三个字段中。那么为什么它会尝试传递一个`null`字符串进行整数解析呢？

堆栈跟踪：

```
 Exception in thread "Thread-1" java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:504)
    at java.lang.Integer.parseInt(Integer.java:527)
    at askisi1.Wireless.setAreaAccessPoints(Wireless.java:213)
    at askisi1.Wireless.run(Wireless.java:43)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:01:36.670

您正在检查某些内容并替换其他内容...

```
 if(temp.contains("Quality=")){
                    String[] info2 = temp.split(" ");
                    info2[1] = info2[1].replace("level=","");
                    strength = Integer.parseInt(info2[2]);
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:04:04.583

线

```
Quality=2/100  Signal level=-89 dBm  Noise level=-92 dBm 
```

包含双空格，因此在`split`结果中，您有空`String`s 并且非空`String`s 不在您认为的索引处。

打印出`"Quality=2/100 Signal level=-89 dBm Noise level=-92 dBm".split(" ");`带有索引的结果

```
0: Quality=2/100
1: 
2: Signal
3: level=-89
4: dBm
5: 
6: Noise
7: level=-92
8: dBm 
```

您的文件中似乎有前导空格，因此带有非空`String`s 的索引将在以后出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:08:20.383

由于您在行前有空格，因此您在格式化时遇到了错误的部分，而双方都没有任何空格，您的逻辑正在运行

你可以做 trim() 并检查你的结果

```
 temp = r.readLine().trim(); 
```

例如这是工作

```
String str ="Frequency:2.437 GHz (Channel 6)";
String [] str1 = str.split(" ");
System.out.println(Integer.parseInt(str1[3].replace(")", ""))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:09:16.193

您从 info2[1] 中删除了 "level=" ，然后以后不做任何事情。您应该将其从 info2[2] 中删除。另外，请注意，如此处另一个答案中所述，它们由双空格分隔。

# doctrine-orm - 学说 2 在哪里共享 - 相当于来自 propel 的自定义过滤器

> ID：13311442
> 
> 赞同：2
> 
> 时间：2012-11-09T15:56:53.550
> 
> 标签：doctrine-orm, propel

可能吗？

目前我正在使用类似的东西：

```
class ReportRepository extends EntityRepository
{
    public function getActiveReportsQuery() 
    {
        return $this->_em->createQueryBuilder()
            ->select('report')
            ->from('ClearcodeTransparenBundle:Report', 'report')
            ->where('report.status = :status')
            ->setParameter('status', Report::STATUS_OPEN)
        ;
    }
} 
```

但我不能将此构造与计数一起使用。

那么，是否有来自 propel1 的 filterbyIsSomething 的直接等价物？

# php - PHP包含文件中的未定义变量错误

> ID：13311444
> 
> 赞同：19
> 
> 时间：2012-11-09T15:57:00.487
> 
> 标签：php, variables, include, undefined

> **可能重复：**
> [PHP 函数的未定义变量问题](https://stackoverflow.com/questions/6058781/undefined-variable-problem-with-php-function)

有人能告诉我为什么我的 PHP 包含文件中不断收到未定义的变量错误消息吗？

```
<?php

$page = 1;

if (isset($_REQUEST['page'])) {
  $page = $_REQUEST['page'];
}

function phpRocks() {
  require("includes/dostuff.php");
}

if ($search) {
  phpRocks();
}

?> 
```

然后在 dostuff.php 中：

```
<?php echo $page; ?> 
```

这是我得到的错误：

> **注意**：未定义变量：第**61** 行**/dostuff.php中的页面**

 **Attn down voters/close requesters：没有显示任何研究工作？怎么会这样？我还应该添加什么？我为此困扰了半个小时，找不到任何其他回答这个问题的帖子。我是否需要成为 PHP 专家才能发布问题（因此我不会发布任何问题！）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T15:59:38.613

马里奥明白了。做这个：

```
function phpRocks() {
    global $page;

    require("includes/dostuff.php");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T16:00:41.130

您将文件包含在函数中。因此，所有包含代码的范围都是函数的范围。该变量`$page`在函数内部不存在。传入：

```
function phpRocks($page) {
    require "includes/dostuff.php";
}

phpRocks($page); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T15:58:49.577

像这样在你的函数中添加全局变量

```
function phpRocks() {
  global $page;
  require("includes/dostuff.php");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T16:02:18.500

您必须像这样将变量声明为全局变量：

```
function phpRocks() {
global $page;           //set variable to global
require("includes/dostuff.php");
} 
```**

# jquery - 在其他元素之后附加一个元素

> ID：13311449
> 
> 赞同：0
> 
> 时间：2012-11-09T15:57:23.370
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors

我想选择一个元素并将其附加在其他元素之后：

使用这个不起作用：

```
$('.sub'+$(this).val()).appendTo($(this).parent().parent().parent().parent()); 
```

dom是：

```
<div class="sub1"></div>

<label></label> 
```

期待这个：

```
<label></label>
<div class="sub1"></div> 
```

真正的dom：

[http://pastebin.com/6Vd6USEp](http://pastebin.com/6Vd6USEp)

任务是在标签后附加 div，我根据 input.subN 搜索此标签并选择 de parentparentparentparentparent

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:04:19.293

不确定您要做什么，但这里有：如果您需要简单地将标签移动到 div 之前，请执行以下操作：

```
$("label").remove().insertBefore(".sub1");​ 
```

如果您需要将 div 移动到标签之后，请执行以下操作：

```
$(".sub1").remove().insertAfter("label");​ 
```

见这里：http: [//jsfiddle.net/QpP9J/](http://jsfiddle.net/QpP9J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:59:39.043

如果您只想在其他元素之前添加标签，请使用 prepend。[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:00:18.500

你需要**[before()](http://api.jquery.com/before/)**。

**[现场演示](http://jsfiddle.net/rajaadil/QTaHg/)**

```
$('.sub1').before('<label></label>'); 
```

# macos - 无法在 sh 脚本中更改 DYLD_LIBRARY_PATH

> ID：13311450
> 
> 赞同：1
> 
> 时间：2012-11-09T15:57:29.063
> 
> 标签：macos, bash

我有一个类似的 shell 脚本

```
#!/bin/bash
export DYLD_LIBRARY_PATH=/path/to/:$DYLD_LIBRARY_PATH
echo $DYLD_LIBRARY_PATH 
```

当我执行它时，它很好地显示了更新的'DYLD_LIBRARY_PATH'。但是，当我通过以下方式运行脚本后尝试检查其中的内容时

```
echo $DYLD_LIBRARY_PATH 
```

从命令行，我看不到任何变化。

p/s/ 我运行 OS-X 10.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:04:20.667

你需要`source`脚本：

```
$ . ./my_script.sh 
```

所以设置环境变量会影响当前的shell。您仅将其设置在子外壳中。

# powershell - 没有为 Windows PowerShell 版本 2 注册任何管理单元

> ID：13311451
> 
> 赞同：13
> 
> 时间：2012-11-09T15:57:38.073
> 
> 标签：powershell, sql-server-2008, pssnapin

我正在尝试在未安装 SQL Server Management Studio 但已安装 Microsoft SQL Server 2008 R2 SP2 Feature Pack 中的所有相关软件包的 Web 服务器上运行 Powershell 脚本。您需要安装这些小部件，以便 Powershell 能够运行 SQL 命令。

然后我运行了这个设置脚本，为使用 Powershell 运行的 SQL Server 命令准备环境：

```
$ErrorActionPreference = "Stop"

$sqlpsreg="HKLM:\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.SqlServer.Management.PowerShell.sqlps"

if (Get-ChildItem $sqlpsreg -ErrorAction "SilentlyContinue")
{
    throw "SQL Server Powershell is not installed."
}
else
{
    $item = Get-ItemProperty $sqlpsreg
    $sqlpsPath = [System.IO.Path]::GetDirectoryName($item.Path)
}

/* Preload the assemblies. Note that most assemblies will be loaded when the provider
 is used. if you work only within the provider this may not be needed. It will reduce
 the shell's footprint if you leave these out.*/

$assemblylist =
"Microsoft.SqlServer.Smo",
"Microsoft.SqlServer.Dmf ",
"Microsoft.SqlServer.SqlWmiManagement ",
"Microsoft.SqlServer.ConnectionInfo ",
"Microsoft.SqlServer.SmoExtended ",
"Microsoft.SqlServer.Management.RegisteredServers ",
"Microsoft.SqlServer.Management.Sdk.Sfc ",
"Microsoft.SqlServer.SqlEnum ",
"Microsoft.SqlServer.RegSvrEnum ",
"Microsoft.SqlServer.WmiEnum ",
"Microsoft.SqlServer.ServiceBrokerEnum ",
"Microsoft.SqlServer.ConnectionInfoExtended ",
"Microsoft.SqlServer.Management.Collector ",
"Microsoft.SqlServer.Management.CollectorEnum"

foreach ($asm in $assemblylist)
{
    $asm = [Reflection.Assembly]::LoadWithPartialName($asm)
}

//Set variables that the provider expects (mandatory for the SQL provider)

Set-Variable -scope Global -name SqlServerMaximumChildItems -Value 0
Set-Variable -scope Global -name SqlServerConnectionTimeout -Value 30
Set-Variable -scope Global -name SqlServerIncludeSystemObjects -Value $false
Set-Variable -scope Global -name SqlServerMaximumTabCompletion -Value 1000

//Load the snapins, type data, format data

Push-Location
cd $sqlpsPath

Add-PSSnapin SqlServerCmdletSnapin100
Add-PSSnapin SqlServerProviderSnapin100 
Update-TypeData -PrependPath SQLProvider.Types.ps1xml  
update-FormatData -prependpath SQLProvider.Format.ps1xml  
Pop-Location 
```

在`Add-PSSnapin SqlServerCmdletSnapin100`，脚本失败并出现以下错误：

> 没有为 Windows PowerShell 版本 2 注册任何管理单元。在 C:\Vantiv\Initialize-SqlpsEnvironment.ps1:75 char:13 + Add-PSSnapin <<<< SqlServerCmdletSnapin100 #-ErrorAction SilentlyContinue + CategoryInfo : InvalidArgument: (SqlServerCmdletSnapin100: String) [Add-PSSnapin], PSArgumentException + FullyQualifiedErrorId : AddPSSnapInRead,Microsoft.PowerShell.Commands.AddPSSnapinCommand

我对这个错误进行了谷歌搜索，我能找到的唯一解决方案是人们说我的 64 位 Powershell 控制台快捷方式指向 SysWOW64 目录而不是 System32。这不是我的情况。我的指向 System32。

有任何想法吗？我需要做什么才能让 Powershell 注册这些管理单元？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T16:15:09.130

如果你这样做：

```
Get-PSSnapin -Registered 
```

您将获得 PowerShell 的即用型管理单元列表（此处仅针对 SQL 的管理单元）：

```
Name        : SqlServerCmdletSnapin100
PSVersion   : 2.0
Description : This is a PowerShell snap-in that includes various SQL Server cmdlets.

Name        : SqlServerProviderSnapin100
PSVersion   : 2.0
Description : SQL Server Provider 
```

如果您在列表中看不到这些管理单元，请尝试[此处](https://stackoverflow.com/questions/4820591/problems-using-sql-server-2008-r2-powershell-extensions-outside-of-sqlps)发布的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:33:50.250

与上述答案有点相似，我发现默认情况下我使用的是 32 位运行的 Visual Studio 命令提示符。

因此，当对我的 powershell 库使用“InstallUtil”时，注册发生在 32 位版本的 Powershell 上，所以我很困惑，我在 -Registered 集合中找不到我的 cmdlet。

如果我随后启动了 powershell (x86)，那么我的管理单元确实按预期注册了。因此，对我来说，解决方案是从 x64 命令提示符重新注册我的管理单元，或者干脆使用 x86 版本的 powershell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-23T15:21:38.997

对我来说，`Windows Server 2008 R2 PowerShell`解决方法是将注册表项从工作服务器复制`PowerShell`到有问题的服务器。

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell\ 
```

问题解决了。该`SharePoint PowerShell`管理单元现已注册，并且安装的管理单元可以`SharePoint`正常工作。

# c# - C#在服务器上打开文件夹

> ID：13311453
> 
> 赞同：0
> 
> 时间：2012-11-09T15:57:57.870
> 
> 标签：c#, iis, networking, web-applications, io

我有一个 Web Intranet 应用程序，带有 Windows 身份验证，它创建一个文件并将其保存到本地文件夹中。我希望用户能够打开该文件夹。

我目前正在这样做，

```
System.Diagnostics.Process.Start("C:\ABC"); 
```

在我的本地机器上开发时，上面的代码运行良好。但是在我将它部署到服务器后它不起作用。我希望用户打开服务器上存在的 C:\ABC 文件夹。

我给了应用程序池权限，现在用户和应用程序池都拥有该文件夹的完全权限。现在我得到了明显的错误

> 拒绝访问。

但为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:22:06.583

如果其他东西锁定了文件，您可能会收到拒绝访问。您可以专门为此使用 WhoLockMe。

您还可以使用 Process Explorer 解决文件访问问题，并过滤该文件。有时你会得到更详细的信息。基本上，当您的应用程序尝试访问该文件时，Process Explorer 将显示访问失败的错误，这可能会或可能不会为您提供比 API 异常更多的详细信息。有时，API 可能会说拒绝访问，而实际上它找不到文件，而 Process Explorer 会更加明显。

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:59:18.860

**编辑**

检查该帖子：[System.Diagnostics.Process.Start 无法从 IIS 工作](https://stackoverflow.com/questions/4679561/system-diagnostics-process-start-not-work-fom-an-iis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:03:03.120

如果您的应用程序在 IIS 中运行，则适当的 IIS 身份将需要至少读取该文件夹的权限。您使用的实际身份将取决于您如何配置 Web 应用程序。

# r - 为什么 rle 不接受一个因子作为输入？

> ID：13311457
> 
> 赞同：6
> 
> 时间：2012-11-09T15:58:11.860
> 
> 标签：r, r-factor

我无法`rle`在`data.frame`. 函数在另一组上效果很好：

```
fgroup <- aggregate(fevents2[,3:14], list(weeks = fevents2[, 1]), function(x) rle(x)$values) 
```

这会产生错误：

```
Error in rle(x) : 'x' must be an atomic vector 
```

样本数据：

```
> dput(fevents2[1:20,])
structure(list(weeks = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("1",
"2", "3", "4", "5", "6", "7"), class = "factor"), A1M.Date = structure(c(1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L), .Label = c("2012-05-09", "2012-05-10", "2012-05-11",
"2012-05-14", "2012-05-15", "2012-05-17", "2012-05-18", "2012-05-21",
"2012-05-22", "2012-05-24", "2012-05-25", "2012-05-28", "2012-05-29",
"2012-05-30", "2012-05-31", "2012-06-04", "2012-06-05", "2012-06-07",
"2012-06-08", "2012-06-11", "2012-06-12", "2012-06-14", "2012-06-15",
"2012-06-18", "2012-06-19", "2012-06-21", "2012-06-22"), class = "factor"),
    vv = structure(c(8L, 8L, 8L, 20L, 24L, 24L, 24L, 1L, 13L,
    13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 24L), .Label = c("C AA",
    "C AJ", "C BB", "C BV", "C JA", "C JR", "C RJ", "C RR", "C RV",
    "C VB", "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JA",
    "G JR", "G RJ", "G RR", "G RV", "G VB", "G VR", "nil"), class = "factor"),
    rv = structure(c(25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L,
    10L, 10L, 22L, 22L, 22L, 25L, 10L, 22L, 22L, 22L, 22L, 25L
    ), .Label = c("C AA", "C AJ", "C BB", "C BV", "C JA", "C JR",
    "C RJ", "C RR", "C RV", "C VB", "C VR", "C VV", "G AA", "G AJ",
    "G BB", "G BV", "G JA", "G JR", "G RJ", "G RR", "G RV", "G VB",
    "G VR", "G VV", "nil"), class = "factor"), ja = structure(c(12L,
    12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 25L, 25L,
    12L, 24L, 24L, 24L, 24L, 24L, 24L), .Label = c("C AA", "C AJ",
    "C BB", "C BV", "C JA", "C JR", "C RJ", "C RR", "C RV", "C VB",
    "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JA", "G JR",
    "G RJ", "G RR", "G RV", "G VB", "G VR", "G VV", "nil"), class = "factor"),
    aa = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 25L, 25L,
    25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L), .Label = c("C AA",
    "C AJ", "C BB", "C BV", "C JA", "C JR", "C RJ", "C RR", "C RV",
    "C VB", "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JA",
    "G JR", "G RJ", "G RR", "G RV", "G VB", "G VR", "G VV", "nil"
    ), class = "factor"), bv = structure(c(25L, 11L, 11L, 11L,
    23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L,
    23L, 23L, 23L, 23L), .Label = c("C AA", "C AJ", "C BB", "C BV",
    "C JA", "C JR", "C RJ", "C RR", "C RV", "C VB", "C VR", "C VV",
    "G AA", "G AJ", "G BB", "G BV", "G JA", "G JR", "G RJ", "G RR",
    "G RV", "G VB", "G VR", "G VV", "nil"), class = "factor"),
    aj = structure(c(7L, 7L, 7L, 25L, 25L, 25L, 25L, 25L, 9L,
    9L, 21L, 21L, 21L, 21L, 21L, 21L, 21L, 21L, 25L, 25L), .Label = c("C AA",
    "C AJ", "C BB", "C BV", "C JA", "C JR", "C RJ", "C RR", "C RV",
    "C VB", "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JA",
    "G JR", "G RJ", "G RR", "G RV", "G VB", "G VR", "G VV", "nil"
    ), class = "factor"), vb = structure(c(1L, 1L, 1L, 25L, 25L,
    25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 2L,
    25L, 2L, 2L), .Label = c("C AA", "C AJ", "C BB", "C BV",
    "C JA", "C JR", "C RJ", "C RR", "C RV", "C VB", "C VR", "C VV",
    "G AA", "G AJ", "G BB", "G BV", "G JA", "G JR", "G RJ", "G RR",
    "G RV", "G VB", "G VR", "G VV", "nil"), class = "factor"),
    rj = structure(c(5L, 5L, 16L, 16L, 16L, 16L, 16L, 16L, 16L,
    16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L), .Label = c("C AA",
    "C AJ", "C BB", "C BV", "C JR", "C RJ", "C RR", "C RV", "C VB",
    "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JR", "G RJ",
    "G RR", "G RV", "G VB", "G VR", "G VV", "nil"), class = "factor"),
    rr = structure(c(3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
    3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("C AA",
    "C AJ", "C BB", "C BV", "C JA", "C JR", "C RJ", "C RR", "C RV",
    "C VB", "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JA",
    "G JR", "G RJ", "G RR", "G RV", "G VB", "G VR", "G VV", "nil"
    ), class = "factor"), vr = structure(c(5L, 5L, 5L, 25L, 25L,
    7L, 7L, 7L, 7L, 7L, 25L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L,
    7L), .Label = c("C AA", "C AJ", "C BB", "C BV", "C JA", "C JR",
    "C RJ", "C RR", "C RV", "C VB", "C VR", "C VV", "G AA", "G AJ",
    "G BB", "G BV", "G JA", "G JR", "G RJ", "G RR", "G RV", "G VB",
    "G VR", "G VV", "nil"), class = "factor"), bb = structure(c(4L,
    4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
    4L, 4L, 4L, 4L), .Label = c("C AA", "C AJ", "C BB", "C BV",
    "C JA", "C JR", "C RJ", "C RR", "C RV", "C VB", "C VR", "C VV",
    "G AA", "G AJ", "G BB", "G BV", "G JA", "G RJ", "G RR", "G RV",
    "G VB", "G VR", "G VV", "nil"), class = "factor"), jr = structure(c(25L,
    25L, 10L, 10L, 22L, 22L, 25L, 25L, 25L, 25L, 25L, 25L, 25L,
    25L, 25L, 25L, 5L, 5L, 5L, 5L), .Label = c("C AA", "C AJ",
    "C BB", "C BV", "C JA", "C JR", "C RJ", "C RR", "C RV", "C VB",
    "C VR", "C VV", "G AA", "G AJ", "G BB", "G BV", "G JA", "G JR",
    "G RJ", "G RR", "G RV", "G VB", "G VR", "G VV", "nil"), class = "factor")),
.Names = c("weeks",
"A1M.Date", "vv", "rv", "ja", "aa", "bv", "aj", "vb", "rj", "rr",
"vr", "bb", "jr"), row.names = c(NA, 20L), class = "data.frame") 
```

数据结构：

```
str(fevents2)
data.frame':   1430 obs. of  14 variables:
 $ weeks   : Factor w/ 7 levels "1","2","3","4",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ A1M.Date: Factor w/ 27 levels "2012-05-09","2012-05-10",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ vv      : Factor w/ 24 levels "C AA","C AJ",..: 8 8 8 20 24 24 24 1 13 13 ..
 $ rv      : Factor w/ 25 levels "C AA","C AJ",..: 25 25 25 25 25 25 25 25 10 10 ...
 $ ja      : Factor w/ 25 levels "C AA","C AJ",..: 12 12 12 12 12 12 12 12 12 12 ...
 $ aa      : Factor w/ 25 levels "C AA","C AJ",..: 2 2 2 2 2 2 2 2 25 25 ...
 $ bv      : Factor w/ 25 levels "C AA","C AJ",..: 25 11 11 11 23 23 23 23 23 23 ...
 $ aj      : Factor w/ 25 levels "C AA","C AJ",..: 7 7 7 25 25 25 25 25 9 9 ...
 $ vb      : Factor w/ 25 levels "C AA","C AJ",..: 1 1 1 25 25 25 25 25 25 25 ...
 $ rj      : Factor w/ 23 levels "C AA","C AJ",..: 5 5 16 16 16 16 16 16 16 16 ...
 $ rr      : Factor w/ 25 levels "C AA","C AJ",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ vr      : Factor w/ 25 levels "C AA","C AJ",..: 5 5 5 25 25 7 7 7 7 7 ...
 $ bb      : Factor w/ 24 levels "C AA","C AJ",..: 4 4 4 4 4 4 4 4 4 4 ...
 $ jr      : Factor w/ 25 levels "C AA","C AJ",..: 25 25 10 10 22 22 25 25 25 25 ...
NULL 
```

我知道我有`factor`s，但将`factor`s 转换为`numeric`with

```
as.numeric(as.character(fevents2)) 
```

或者：

```
sapply(fevents2, function(x) as.numeric(as.character(x))) 
```

不能解决我的问题：

```
Error in fevents3[, 3:14] : incorrect number of dimensions
In addition: Warning message:
In eval.with.vis(expr, envir, enclos) : NAs introduced by coercion 
```

`data.frame`这是该`rle`函数工作的示例：

```
 dput(fevents[1:20,]
structure(list(weeks = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1), A1M.Date = c("2012-05-09", "2012-05-09",
"2012-05-09", "2012-05-09", "2012-05-09", "2012-05-09", "2012-05-09",
"2012-05-09", "2012-05-09", "2012-05-09", "2012-05-09", "2012-05-09",
"2012-05-09", "2012-05-09", "2012-05-09", "2012-05-09", "2012-05-09",
"2012-05-09", "2012-05-09", "2012-05-09"), vv = c("C RR", "C RR",
"C RR", "G RR", "nil", "nil", "nil", "C AA", "G AA", "G AA",
"G AA", "G AA", "G AA", "G AA", "G AA", "G AA", "G AA", "G AA",
"G AA", "nil"), rv = c("nil", "nil", "nil", "nil", "nil", "nil",
"nil", "nil", "C VB", "C VB", "G VB", "G VB", "G VB", "nil",
"G VB", "G VB", "G VB", "G VB", "G VB", "nil"), ja = c("C VV",
"C VV", "C VV", "C VV", "C VV", "C VV", "C VV", "C VV", "C VV",
"C VV", "C VV", "nil", "nil", "G VV", "G VV", "G VV", "G VV",
"G VV", "G VV", "G VV"), aa = c("C AJ", "C AJ", "C AJ", "C AJ",
"C AJ", "C AJ", "C AJ", "C AJ", "nil", "nil", "nil", "nil", "nil",
"nil", "nil", "nil", "nil", "nil", "nil", "nil"), bv = c("nil",
"C VR", "C VR", "C VR", "G VR", "G VR", "G VR", "G VR", "G VR",
"G VR", "G VR", "G VR", "G VR", "G VR", "G VR", "G VR", "G VR",
"G VR", "G VR", "G VR"), aj = c("C RJ", "C RJ", "C RJ", "nil",
"nil", "nil", "nil", "nil", "C RV", "C RV", "G RV", "G RV", "G RV",
"G RV", "G RV", "G RV", "G RV", "G RV", "nil", "nil"), vb = c("C AA",
"C AA", "C AA", "nil", "nil", "nil", "nil", "nil", "nil", "nil",
"nil", "nil", "nil", "nil", "nil", "nil", "C AJ", "nil", "C AJ",
"C AJ"), rj = c("C JR", "C JR", "G JR", "G JR", "G JR", "G JR",
"G JR", "G JR", "G JR", "G JR", "G JR", "G JR", "G JR", "G JR",
"G JR", "G JR", "G JR", "G JR", "G JR", "G JR"), rr = c("C BB",
"C BB", "C BB", "C BB", "C BB", "C BB", "C BB", "C BB", "C BB",
"C BB", "C BB", "C BB", "C BB", "C BB", "C BB", "C BB", "C BB",
"C BB", "C BB", "C BB"), vr = c("C JA", "C JA", "C JA", "nil",
"nil", "C RJ", "C RJ", "C RJ", "C RJ", "C RJ", "nil", "C RJ",
"C RJ", "C RJ", "C RJ", "C RJ", "C RJ", "C RJ", "C RJ", "C RJ"
), bb = c("C BV", "C BV", "C BV", "C BV", "C BV", "C BV", "C BV",
"C BV", "C BV", "C BV", "C BV", "C BV", "C BV", "C BV", "C BV",
"C BV", "C BV", "C BV", "C BV", "C BV"), jr = c("nil", "nil",
"C VB", "C VB", "G VB", "G VB", "nil", "nil", "nil", "nil", "nil",
"nil", "nil", "nil", "nil", "nil", "C JA", "C JA", "C JA", "C JA"
)), .Names = c("weeks", "A1M.Date", "vv", "rv", "ja", "aa", "bv",
"aj", "vb", "rj", "rr", "vr", "bb", "jr"), row.names = c(NA,
20L), class = "data.frame")

str(fevents)
'data.frame':   1430 obs. of  14 variables:
 $ weeks   : num  1 1 1 1 1 1 1 1 1 1 ...
 $ A1M.Date: chr  "2012-05-09" "2012-05-09" "2012-05-09" "2012-05-09" ...
 $ vv      : chr  "C RR" "C RR" "C RR" "G RR" ...
 $ rv      : chr  "nil" "nil" "nil" "nil" ...
 $ ja      : chr  "C VV" "C VV" "C VV" "C VV" ...
 $ aa      : chr  "C AJ" "C AJ" "C AJ" "C AJ" ...
 $ bv      : chr  "nil" "C VR" "C VR" "C VR" ...
 $ aj      : chr  "C RJ" "C RJ" "C RJ" "nil" ...
 $ vb      : chr  "C AA" "C AA" "C AA" "nil" ...
 $ rj      : chr  "C JR" "C JR" "G JR" "G JR" ...
 $ rr      : chr  "C BB" "C BB" "C BB" "C BB" ...
 $ vr      : chr  "C JA" "C JA" "C JA" "nil" ...
 $ bb      : chr  "C BV" "C BV" "C BV" "C BV" ...
 $ jr      : chr  "nil" "nil" "C VB" "C VB" ... 
```

我发现了一个非常“不优雅”的解决方法。`data.frame`以 CSV 格式写入文件并使用`stringsAsFactors = FALSE`. 这不是我想在我的代码中写的......必须有一种更简单的方法来重新排列的结构`data.frame`来取悦`rle`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:51:26.280

问题是一个因素**不是**一个原子向量，正如错误清楚地表明的那样。要么首先将所有因子转换为字符（而不是通过将它们强制转换为数字！），要么在*您*正在应用的匿名函数中进行转换。

所以这个实现了第二个想法的方法是有效的：

```
aggregate(fevents2[,3:14], list(weeks = fevents2[, 1]),
          function(x) rle(as.character(x))$values) 
```

时尚之后：

```
> aggregate(fevents2[,3:14], list(weeks = fevents2[, 1]),
+           function(x) rle(as.character(x))$values)
  weeks vv.1 vv.2 vv.3 vv.4 vv.5 vv.6 rv.1 rv.2 rv.3 rv.4 rv.5 rv.6 rv.7 ja.1
1     1 C RR G RR  nil C AA G AA  nil  nil C VB G VB  nil C VB G VB  nil C VV
  ja.2 ja.3 ja.4 aa.1 aa.2 bv.1 bv.2 bv.3 aj.1 aj.2 aj.3 aj.4 aj.5 vb.1 vb.2
1  nil C VV G VV C AJ  nil  nil C VR G VR C RJ  nil C RV G RV  nil C AA  nil
  vb.3 vb.4 vb.5 rj.1 rj.2   rr vr.1 vr.2 vr.3 vr.4 vr.5   bb jr.1 jr.2 jr.3
1 C AJ  nil C AJ C JR G JR C BB C JA  nil C RJ  nil C RJ C BV  nil C VB G VB
  jr.4 jr.5
1  nil C JA 
```

虽然我不确定你期望得到什么 - 这里只有一周，`aggregate`并且`rle`已经将所有价值观融合在一起。您是否希望将要汇总`$values`的每个变量分开`fevents2`？

另一件事：

`as.numeric(as.character(fevents2))`不可能*工作*，因为数据不是数字！而且您无法将这些功能应用于数据框并获得您想要的任何东西 - 如果它们完全有效。

这`sapply()`件事应该工作。这是一个检查每个变量是否是一个因素的版本，如果是则强制它：

```
fevents3 <- sapply(fevents2,
                   function(x) if(is.factor(x)) { as.character(x) } else { x }) 
```

但是注意`sapply()`简化为一个矩阵，它将改变`aggregate()`调度的方法：

```
> class(fevents3)
[1] "matrix" 
```

相反，也许

```
fevents3 <- lapply(fevents2,
                   function(x) if(is.factor(x)) { as.character(x) } else { x })
fevents3 <- data.frame(fevents3, stringsAsFactors = FALSE) 
```

现在，如果您想*应用* `rle()`到拆分数据的每一列并保持单独的情况如何

```
spl <- split(fevents3, list(weeks = fevents3[, 1]))
res <- lapply(spl, function(x) lapply(x[, 3:14], function(y) rle(y)$values)) 
```

这使

```
> res
$`1`
$`1`$vv
[1] "C RR" "G RR" "nil"  "C AA" "G AA" "nil" 

$`1`$rv
[1] "nil"  "C VB" "G VB" "nil"  "C VB" "G VB" "nil" 

$`1`$ja
[1] "C VV" "nil"  "C VV" "G VV"

$`1`$aa
[1] "C AJ" "nil" 

$`1`$bv
[1] "nil"  "C VR" "G VR"

$`1`$aj
[1] "C RJ" "nil"  "C RV" "G RV" "nil" 

$`1`$vb
[1] "C AA" "nil"  "C AJ" "nil"  "C AJ"

$`1`$rj
[1] "C JR" "G JR"

$`1`$rr
[1] "C BB"

$`1`$vr
[1] "C JA" "nil"  "C RJ" "nil"  "C RJ"

$`1`$bb
[1] "C BV"

$`1`$jr
[1] "nil"  "C VB" "G VB" "nil"  "C JA" 
```

这与上面的答案相同`aggregate()`，但每个`rle()`输出都是分开的：

```
> unlist(res)
 1.vv1  1.vv2  1.vv3  1.vv4  1.vv5  1.vv6  1.rv1  1.rv2  1.rv3  1.rv4  1.rv5 
"C RR" "G RR"  "nil" "C AA" "G AA"  "nil"  "nil" "C VB" "G VB"  "nil" "C VB" 
 1.rv6  1.rv7  1.ja1  1.ja2  1.ja3  1.ja4  1.aa1  1.aa2  1.bv1  1.bv2  1.bv3 
"G VB"  "nil" "C VV"  "nil" "C VV" "G VV" "C AJ"  "nil"  "nil" "C VR" "G VR" 
 1.aj1  1.aj2  1.aj3  1.aj4  1.aj5  1.vb1  1.vb2  1.vb3  1.vb4  1.vb5  1.rj1 
"C RJ"  "nil" "C RV" "G RV"  "nil" "C AA"  "nil" "C AJ"  "nil" "C AJ" "C JR" 
 1.rj2   1.rr  1.vr1  1.vr2  1.vr3  1.vr4  1.vr5   1.bb  1.jr1  1.jr2  1.jr3 
"G JR" "C BB" "C JA"  "nil" "C RJ"  "nil" "C RJ" "C BV"  "nil" "C VB" "G VB" 
 1.jr4  1.jr5 
 "nil" "C JA" 
> aggregate(fevents2[,3:14], list(weeks = fevents2[, 1]),
+           function(x) rle(as.character(x))$values)
  weeks vv.1 vv.2 vv.3 vv.4 vv.5 vv.6 rv.1 rv.2 rv.3 rv.4 rv.5 rv.6 rv.7 ja.1
1     1 C RR G RR  nil C AA G AA  nil  nil C VB G VB  nil C VB G VB  nil C VV
  ja.2 ja.3 ja.4 aa.1 aa.2 bv.1 bv.2 bv.3 aj.1 aj.2 aj.3 aj.4 aj.5 vb.1 vb.2
1  nil C VV G VV C AJ  nil  nil C VR G VR C RJ  nil C RV G RV  nil C AA  nil
  vb.3 vb.4 vb.5 rj.1 rj.2   rr vr.1 vr.2 vr.3 vr.4 vr.5   bb jr.1 jr.2 jr.3
1 C AJ  nil C AJ C JR G JR C BB C JA  nil C RJ  nil C RJ C BV  nil C VB G VB
  jr.4 jr.5
1  nil C JA 
```

[*注意：*这仅在这里是正确的，因为您显示的数据片段只有一周。我不记得`unlist(res))`如果超过一周会是什么样子。]

# c# - 无法更改在 javascript 中设置的 cookie 值？

> ID：13311459
> 
> 赞同：1
> 
> 时间：2012-11-09T15:58:15.583
> 
> 标签：c#, javascript, asp.net, .net, cookies

我有一`<asp:CheckBox OnClick="">`组执行以下操作的 JavaScript 函数：

```
document.cookie = "cv0_value=1"; 
```

我正在以以下方式在 .Net 代码隐藏中检查此值，并且一切似乎都工作正常。

```
cv0_value = Request.Cookies["cv0_value"].Value == "0" ? false : true; 
```

问题是，当我稍后尝试重置 .Net 代码隐藏中的值时，它似乎不会影响 cookie。

```
HttpContext.Current.Request.Cookies["cv0_value"].Value = "0"; 
```

在代码隐藏中再次检查该值时，我发现它仍设置为 JavaScript 中设置的原始值。

我还尝试反复调用 Page_Load 方法，检查请求和响应。尽管在再次调用 Page_Load 时使用更新的值设置了响应，但请求仍包含原始值。

正如下面评论中所讨论的，我认为这个问题可能是由于引用了静态方法，但我发现[这](https://stackoverflow.com/questions/901760/writing-a-cookie-from-a-static-class)解决了这个问题。由于我已经指的是 HttpContext.Current.Response 它在我的实例中似乎不是问题。

有人可以解释可能发生的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:48:31.750

设置值后，请确保保存它。

```
HttpCookie cookie = HttpContext.Current.Request.Cookies["cv0_value"]
if (cookie != null)
{
   cookie.Value ="0";
   HttpContext.Current.Response.Cookies.Add(cookie)
} 
```

# c# - 如何在实体框架中设置两个一对多关系？

> ID：13311461
> 
> 赞同：7
> 
> 时间：2012-11-09T15:58:25.067
> 
> 标签：c#, database, entity-framework, ef-code-first

假设我们正在使用实体框架代码优先方法，并且我们有两个对象，它们通过两个一对多关系链接（一个`Person`可以拥有多个`Car`s，但每辆车都有一个所有者和一个“主驾驶员”） . 这是两个实体：

```
public class Person {
    #region Persisted fields
    [Required]
    public int PersonId { get; set; }
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string Surname { get; set; }
    #endregion

    #region Navigation properties
    public virtual ICollection<Car> CarsOwned { get; set; }
    #endregion
}

public class Car {
    #region Persisted fields
    [Required]
    public int CarId { get; set; }
    [Required]
    public string Make { get; set; }
    [Required]
    public string Manufacturer { get; set; }
    [Required]
    public string RegNo { get; set; }
    [Required]
    [ForeignKey("Owner")]
    public int OwnerId { get; set; }
    [Required]
    [ForeignKey("MainDriver")]
    public int MainDriverId { get; set; }
    #endregion

    #region Navigation properties
    public virtual Person Owner { get; set; }
    public virtual Person MainDriver { get; set; }
    #endregion
} 
```

如何告诉实体框架应该使用两个外键（`OwnerId`或）中的哪一个来确定集合？我只是尝试用这两个实体自动创建一个数据库，它假设我出于某种原因想用作外键，而显然我想使用外键。`MainDriverId``CarsOwned``MainDriverId``CarsOwned``OwnerId`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T16:49:16.183

我怀疑你必须使用流畅的配置来设置它。

```
public class YourContext : DbContext
{
   ...
   protected override OnModelCreating(DbModelBuilder modelBuilder)
   {
      modelBuilder.Entity<Car>()
         .HasRequired(c => c.Owner)
         .WithMany(p => p.CarsOwned)
         .HasForeignKey(c => c.OwnerId)
         .WillCascadeOnDelete(false);
          // Otherwise you might get a "cascade causes cycles" error

      modelBuilder.Entity<Car>()
         .HasRequired(c => c.MainDriver)
         .WithMany() // No reverse navigation property
         .HasForeignKey(c => c.MainDriverId)
         .WillCascadeOnDelete(false);
   }
} 
```

# python - 使用 numpy.genfromtxt() 跳过指定数量的列

> ID：13311471
> 
> 赞同：7
> 
> 时间：2012-11-09T15:58:45.753
> 
> 标签：python, numpy

我有一个大表（文本格式的数字），我想用`numpy.genfromtxt()`. 我想忽略前*n*列，比如 5。我事先不知道表的大小（行数或列数）。

我看到`genfromtxt()`有一个选项`skip_header`允许跳过指定数量的标题行，但似乎列没有这样的选项。有一个`usecols`选项，但我必须指定我想保留的列号，而不是我想丢弃的列号（我事先不知道这个数字）。

显然我可以加载整个内容然后丢弃前*n*列，但这并不优雅并且在内存方面是浪费的。

我也可以进入文件，找到列数，然后构造`usecols`参数，但这相当混乱。

关于如何优雅地解决这个问题的任何想法？我可以使用一些隐藏/未记录的论点吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-09T16:08:59.750

对于旧版本的 numpy，查看第一行以发现列数并不难：

```
import numpy as np
with open(fname, 'r') as f:
    num_cols = len(f.readline().split())
    f.seek(0)
    data = np.genfromtxt(f, usecols = range(5,num_cols))
print(data) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-09T16:05:03.850

在 Numpy 的较新版本中，`np.genfromtxt`可以采用可迭代参数，因此您可以将正在读取的文件包装在生成行的生成器中，从而跳过第一`N`列。如果你的数字是空格分隔的，那就是

```
np.genfromtxt(" ".join(ln.split()[N:]) for ln in f) 
```

# drupal - 如何使用显示套件模块在字段中使用令牌？

> ID：13311473
> 
> 赞同：0
> 
> 时间：2012-11-09T15:58:47.860
> 
> 标签：drupal, drupal-7, display-suite

我有以下代码使用显示套件模块中的字段：

```
<?php
$words = '[node:body]';
echo implode(" ",array_splice($words,0,60));
?> 
```

但这不起作用。我在这里的目的是将内容修剪为 60 个单词，以便在预告片中使用。因为目前，显示套件没有使用纯文本限制字数的选项。

Trimmed 的问题是它没有删除 html 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:44:38.970

您可以使用智能修剪模块来实现该 [http://drupal.org/project/smart_trim](http://drupal.org/project/smart_trim)

# extjs - ExtJs双击行并将记录传递到输入字段中的另一个窗口

> ID：13311476
> 
> 赞同：3
> 
> 时间：2012-11-09T15:58:52.523
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2

我创建了 ExtJs 窗口，该窗口显示带有从数据库中检索到的信息的网格。现在我必须在 datagrid 行上添加事件双击，我这样做了。我遇到的问题是在这个事件上我打开另一个包含输入字段的窗口，我必须从网格中单击的行中添加值。

这是双击监听器的代码片段：

```
listeners : {
     itemdblclick: function(dv, record, item, index, e) {
           _restoreCallsWindow().show(); //show the second window
           Ext.get("sense-restore-calls-path-textfield-bodyEl").child('.x-form-text').set({value:record.data.path}, true); //get the input field and add value
        }
} 
```

上面的代码工作正常，当我检查 firebug 中的元素具有来自网格的信息的 value 属性时，但我想在输入字段中显示这个值。我怎样才能做到这一点？

你能分享你的知识吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:27:22.783

我猜你在窗口中有一个[Ext.form.Panel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel)那么你只需要执行以下操作：

```
listeners : {
    itemdblclick: function(dv, record, item, index, e) {
        var win = _restoreCallsWindow(),
            field= win.down('textfield'); // assuming you have just one textfield
        field.setValue(record.get('path'));
    }
} 
```

请注意，每个字段的 name 属性必须与记录的属性名称匹配。否则，这将行不通。

# android - Token Edittext (Field) android

> ID：13311477
> 
> 赞同：0
> 
> 时间：2012-11-09T15:58:56.073
> 
> 标签：android, android-widget

因为某些原因，我需要像这张图片中的红色部分一样的 Edittext：

![在此处输入图像描述](../Images/ba184d41de3aa5fe77342c8d46907713.png)

每当用户按下键盘上的删除按钮时，edittext 将删除一个标记而不是一个单词。所以，我的问题是：我们是否有类似的存在控件？或者如果没有，你知道如何定制一个。注意：我不需要它 100%。现在，我正在考虑使用 TextWatcher 或 setKeyListener 方法来删​​除功能。

非常感谢您的帮助。对不起，因为我的英语不是很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-03T13:36:55.230

我[在 github 上整理了 TokenAutoComplete](https://github.com/splitwise/TokenAutoComplete)供我们在 Splitwise 使用。我在 Android SDK 中找不到类似的东西，所以我自己做了。

我控件的行为与您的期望不符的唯一地方是，当您删除最近完成的令牌时，它会再次变成单词。所有其他令牌都被完全删除。

这是一个基本示例：

```
public class ContactsCompletionView extends TokenCompleteTextView {
    public ContactsCompletionView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View getViewForObject(Object object) {
        Person p = (Person)object;

        LayoutInflater l = (LayoutInflater)getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        LinearLayout view = (LinearLayout)l.inflate(R.layout.contact_token, (ViewGroup)ContactsCompletionView.this.getParent(), false);
        ((TextView)view.findViewById(R.id.name)).setText(p.getEmail());

        return view;
    }

    @Override
    protected Object defaultObject(String completionText) {
        //Stupid simple example of guessing if we have an email or not
        int index = completionText.indexOf('@');
        if (index == -1) {
            return new Person(completionText, completionText.replace(" ", "") + "@example.com");
        } else {
            return new Person(completionText.substring(0, index), completionText);
        }
    }
} 
```

contact_token 的布局代码（您可以在此处使用任何类型的布局，或者如果您想要令牌中的图像，可以将 ImageView 放入其中）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content">

    <TextView android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/token_background"
        android:padding="5dp"
        android:textColor="@android:color/white"
        android:textSize="18sp" />

</LinearLayout> 
```

令牌背景可绘制

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="#ffafafaf" />
    <corners
        android:topLeftRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topRightRadius="5dp"
        android:bottomRightRadius="5dp" />
</shape> 
```

人物对象代码

```
public class Person implements Serializable {
    private String name;
    private String email;

    public Person(String n, String e) { name = n; email = e; }

    public String getName() { return name; }
    public String getEmail() { return email; }

    @Override
    public String toString() { return name; }
} 
```

示例活动

```
public class TokenActivity extends Activity {
    ContactsCompletionView completionView;
    Person[] people;
    ArrayAdapter<Person> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        people = new Person[]{
                new Person("Marshall Weir", "marshall@example.com"),
                new Person("Margaret Smith", "margaret@example.com"),
                new Person("Max Jordan", "max@example.com"),
                new Person("Meg Peterson", "meg@example.com"),
                new Person("Amanda Johnson", "amanda@example.com"),
                new Person("Terry Anderson", "terry@example.com")
        };

        adapter = new ArrayAdapter<Person>(this, android.R.layout.simple_list_item_1, people);

        completionView = (ContactsCompletionView)findViewById(R.id.searchView);
        completionView.setAdapter(adapter);
    }
} 
```

布局代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.tokenautocomplete.ContactsCompletionView
        android:id="@+id/searchView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:17:06.570

The Android AOSP email client has something like you seem trying to do. It is open source.

From [this commit](https://github.com/android/platform_packages_apps_email/commit/87763f0ae851c76d5e7cf672a6e3acf21705549c) you see, that Google calls "chip" what you call "badge".

You should find all information regarding what it takes to implement such chips from the commit above, which I guess, was the first time Google introduced such chips (at least to mail), or in [the whole source of the AOSP email client](https://github.com/android/platform_packages_apps_email/tree/master/src/com/android/email):

> Integrate chips into Email.
> 
> Change-Id: Ice037a55a169037f725a667fad7714c7e9580b86

# vb.net - 使用 GMT 偏移的时间格式

> ID：13311480
> 
> 赞同：3
> 
> 时间：2012-11-09T15:59:05.273
> 
> 标签：vb.net, datetime

是否可以通过查看日期时间值来确定它是本地时间还是带有偏移的 GMT？我对此一无所知，并且很尴尬地大声说出来。

```
<time>2012-11-07T15:22:31Z</time> 
```

现在我需要在 GMT 中显示这个时间，以及它的本地时间偏移量。我只是假设他是当地时间，Z & T 是什么>

编辑

感谢您的链接。那么下面会是什么

2012-11-09T12:34:02+00:00

是 UTC 的偏移量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:10:11.620

那是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations)中的时间表示。

**T** is 是表示的时间分量之前的时间指示符。

和

**Z**是秒数值之后的第二个指示符。

要将 ISO 8601 转换为本地或 UTC，请编写一个像[这样的自定义转换器](https://stackoverflow.com/questions/3834617/vb-net-iso-dateformat)

# java - 需要根据词汇级别对单词进行分类的东西

> ID：13311484
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:59:25.930
> 
> 标签：java, string, vocabulary, plagiarism-detection

我正在用 Java 做一个抄袭类型的项目，并且想以某种方式根据单词选择的强度给每个单词打分。有什么可以做到这一点或有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:38:16.290

您可以使用[Lucene](http://lucene.apache.org/core/)。它的[MoreLikeThis](http://lucene.apache.org/core/4_0_0-BETA/queries/org/apache/lucene/queries/mlt/MoreLikeThis.html)功能可能最适合解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:51:10.380

您还可以查看[Flesh [一个 Flesch-Kincaid 可读性索引引擎] 之类的项目。](http://flesh.sourceforge.net/)

# android - 不想设置字符串静态的值

> ID：13311489
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:59:35.117
> 
> 标签：android

我想在应用程序启动时最初设置字符串值而不使其成为静态，此外我想通过用户输入设置字符串变量的值。我如何先设置值，然后由用户获取它？？？

请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:05:18.400

这个问题超出了您显示的代码。我认为这将帮助您理解静态的含义。看看[这篇文章](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

基本上，您必须在程序中的其他地方说`ETrackActivity.pswd_auth`. 当您将 paswd_auth 设置为静态时，这意味着 ETrackActivity 的每个实例都没有自己的 paswd_auth 值，而是有一个值属于该类的整个定义。

静止的

```
MyCustomClass.myValue = 10 
```

非静态

```
MyCustomClass myInstance = new MyCustomClass();
myInstance.myValue = 5;
MyCustomClass anotherInstance = new MyCustomClass();
anotherInstance.myValue = 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:08:27.597

无论如何，在您的活动中拥有一些静态字段是一种不好的做法。您可以像往常一样初始化您的属性。

```
private String pswd_auth= "13579"; 
```

# java - 带标签的 break 语句...下一步在哪里

> ID：13311496
> 
> 赞同：1
> 
> 时间：2012-11-09T15:59:42.787
> 
> 标签：java

我只是在做 Sierra-Bates SCJP 学习指南，我想知道以下问题：

```
public class Wind {

  public static void main(String[] args) {

    foreach:
      for(int j=0; j<5; j++) {
        for(int k=0; k< 3; k++) {

          System.out.print(" " + j);
          if(j==3 && k==1) break foreach;      //1
          if(j==0 || j==2) break;

        }
      }

  }
} 
```

当 k 的值等于 1 并执行 break foreach 时（在第 1 行），迭代究竟在哪里进行，在我看来，这现在是否退出整个循环。下一个迭代点在哪里？如果退出外部循环，如何进行进一步的迭代？学习书中给出的答案是 0111233。在我看来，只有 01 在整个循环退出之前被打印出来。不 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:09:15.943

> 在此之后迭代到底在哪里，在我看来，现在是否退出整个循环

是的，因为你正在打破外循环。所以，它会退出你可以说的整个循环。

> 下一个迭代点在哪里？

跳出外循环后没有迭代。

> 如果退出外部循环，如何进行进一步的迭代？

不，不会有任何进一步的迭代。为什么你会期待任何进一步的迭代？当您跳出一个循环时，该循环的进一步迭代将不会运行。

要获得输出，请尝试逐步执行您的代码。拿出一张纸和铅笔，为每个迭代写下 的值`j and k`，看看`if`每次执行哪个。

请注意，您的第二个 if 只是打破了内部 for 循环。

**这是您的两个 if 条件：-**

```
 if(j==3 && k==1) break foreach;      // 1
  if(j==0 || j==2) break;              // 2 
```

**迭代： -**

1）。`j = 0, k = 0`: - 打印 0。第一次`if`失败，第二次`if`成功。你打破了内循环。继续外接`(j++)`

2）。`j = 1, k = 0`: - 打印 1。第一次`if`失败，第二次`if`失败。继续内循环`(k++)`

3）。`j = 1, k = 1`: - 打印 1。两者都`if`失败。继续内循环`(k++)`

4）。`j = 1, k = 2`: - 打印 1。两者都`if`失败。继续内循环`(k++)`

5）。`j = 1, k = 3`: - 内循环条件失败。继续外循环`(j++, k = 0)`

6）。`j = 2, k = 0`: - 打印 2。第一次`if`失败。第二次`if`成功。打破内循环。继续外循环`(j++)`

7）。`j = 3, k = 0`: - 打印 3。两者都`if`失败。继续内循环。`(k++)`

8）。`j = 3, k = 1`: - 打印 3。第一次`if`成功。打破外循环。迭代结束。

现在看看，打印语句是什么： -

```
0111233 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:19:18.563

通过更好的打印，这可能更容易看到：

```
public class Temp {
  public static void main(String[] args) {
    foreach: for (int j = 0; j < 5; j++) {
      System.out.println("Outer(j=" + j + ")");
      for (int k = 0; k < 3; k++) {
        System.out.println("Inner (j=" + j + "; k=" + k +")" );
        if (j == 3 && k == 1) break foreach; // 1
        if (j == 0 || j == 2) break;
      }
      System.out.println("Outer - after inner loop");
    }
    System.out.println("Not in a loop");
  }
} 
```

一般规则是，break 语句将执行移至循环外的第一条语句。当循环本身是另一个循环主体中的最后一条语句时，这可能会有点令人困惑，因为内部循环之后的语句是外部循环的循环机制（即 while 循环的测试或一个 for 循环）

不合格的 break 语句退出内部循环，然后完成外部循环的当前迭代（它说“内部循环之后”）。

合格的 break 语句退出外部循环并转到外部 for 循环之后的第一条语句。

这将导致以下输出。

```
Outer(j=0)
Inner (j=0; k=0)
Outer - after inner loop
Outer(j=1)
Inner (j=1; k=0)
Inner (j=1; k=1)
Inner (j=1; k=2)
Outer - after inner loop
Outer(j=2)
Inner (j=2; k=0)
Outer - after inner loop
Outer(j=3)
Inner (j=3; k=0)
Inner (j=3; k=1)
not in a loop 
```

# crystal-reports-2008 - 水晶报表中的公式错误

> ID：13311497
> 
> 赞同：1
> 
> 时间：2012-11-09T15:59:44.443
> 
> 标签：crystal-reports-2008

我在水晶报告中收到以下错误：

> 其余文本不属于公式的一部分

错误指向我公式的最后一行：`zone;`

公式有什么问题？可以用其他方式完成吗？

```
stringVar zone := '';
if {?ParamPuntenboek} = 'Begin schooljaar' then
        (if {LEERLING_LEERLING.LEERJAAR} = '4'then
            select(toNumber({@4BTOT}))
                case '99': zone := 'A'
                case '97': zone := 'A'
                case '95': zone := 'A'
                case '93': zone := 'A'
                case '90': zone := 'A'
                case '85': zone := 'A'
                case '80': zone := 'A'
                case '75': zone := 'A'
                case '70': zone := 'B'
                case '65': zone := 'B'
                case '60': zone := 'B'
                case '55': zone := 'B'
                case '50': zone := 'B'
                case '45': zone := 'C'
                case '40': zone := 'C'
                case '35': zone := 'C'
                case '30': zone := 'C'
                case '25': zone := 'C'
                case '20': zone := 'D'
                case '15': zone := 'D'
                case '10': zone := 'E'
                case '7': zone := 'E'
                case '5': zone := 'E'
                case '3': zone := 'E'
                case '1': zone := 'E'
                case '0': zone := 'E'
                default: zone := '';
        if {LEERLING_LEERLING.LEERJAAR} = '5'then
            select(toNumber({@5BTOT}))
                case '99': zone := 'A'
                case '97': zone := 'A'
                case '95': zone := 'A'
                case '93': zone := 'A'
                case '90': zone := 'A'
                case '85': zone := 'A'
                case '80': zone := 'A'
                case '75': zone := 'A'
                case '70': zone := 'B'
                case '65': zone := 'B'
                case '60': zone := 'B'
                case '55': zone := 'B'
                case '50': zone := 'B'
                case '45': zone := 'C'
                case '40': zone := 'C'
                case '35': zone := 'C'
                case '30': zone := 'C'
                case '25': zone := 'C'
                case '20': zone := 'D'
                case '15': zone := 'D'
                case '10': zone := 'E'
                case '7': zone := 'E'
                case '5': zone := 'E'
                case '3': zone := 'E'
                case '1': zone := 'E'
                case '0': zone := 'E'
                default: zone := '';
        if {LEERLING_LEERLING.LEERJAAR} = '6'then
            select(toNumber({@6BTOT}))
                case '99': zone := 'A'
                case '97': zone := 'A'
                case '95': zone := 'A'
                case '93': zone := 'A'
                case '90': zone := 'A'
                case '85': zone := 'A'
                case '80': zone := 'A'
                case '75': zone := 'A'
                case '70': zone := 'B'
                case '65': zone := 'B'
                case '60': zone := 'B'
                case '55': zone := 'B'
                case '50': zone := 'B'
                case '45': zone := 'C'
                case '40': zone := 'C'
                case '35': zone := 'C'
                case '30': zone := 'C'
                case '25': zone := 'C'
                case '20': zone := 'D'
                case '15': zone := 'D'
                case '10': zone := 'E'
                case '7': zone := 'E'
                case '5': zone := 'E'
                case '3': zone := 'E'
                case '1': zone := 'E'
                case '0': zone := 'E'
                default: zone := '';)
else
    (if {?ParamPuntenboek} = 'Midden schooljaar' then
            (if {LEERLING_LEERLING.LEERJAAR} = '3'then
                select({@3MTOT})
                    case '99': zone := 'A'
                    case '97': zone := 'A'
                    case '95': zone := 'A'
                    case '93': zone := 'A'
                    case '90': zone := 'A'
                    case '85': zone := 'A'
                    case '80': zone := 'A'
                    case '75': zone := 'A'
                    case '70': zone := 'B'
                    case '65': zone := 'B'
                    case '60': zone := 'B'
                    case '55': zone := 'B'
                    case '50': zone := 'B'
                    case '45': zone := 'C'
                    case '40': zone := 'C'
                    case '35': zone := 'C'
                    case '30': zone := 'C'
                    case '25': zone := 'C'
                    case '20': zone := 'D'
                    case '15': zone := 'D'
                    case '10': zone := 'E'
                    case '7': zone := 'E'
                    case '5': zone := 'E'
                    case '3': zone := 'E'
                    case '1': zone := 'E'
                    case '0': zone := 'E'
                    default: zone := '';
            if {LEERLING_LEERLING.LEERJAAR} = '4'then
                select(toNumber({@4MTOT}))
                    case '99': zone := 'A'
                    case '97': zone := 'A'
                    case '95': zone := 'A'
                    case '93': zone := 'A'
                    case '90': zone := 'A'
                    case '85': zone := 'A'
                    case '80': zone := 'A'
                    case '75': zone := 'A'
                    case '70': zone := 'B'
                    case '65': zone := 'B'
                    case '60': zone := 'B'
                    case '55': zone := 'B'
                    case '50': zone := 'B'
                    case '45': zone := 'C'
                    case '40': zone := 'C'
                    case '35': zone := 'C'
                    case '30': zone := 'C'
                    case '25': zone := 'C'
                    case '20': zone := 'D'
                    case '15': zone := 'D'
                    case '10': zone := 'E'
                    case '7': zone := 'E'
                    case '5': zone := 'E'
                    case '3': zone := 'E'
                    case '1': zone := 'E'
                    case '0': zone := 'E'
                    default: zone := '';
            if {LEERLING_LEERLING.LEERJAAR} = '5'then
                select(toNumber({@5MTOT}))
                    case '99': zone := 'A'
                    case '97': zone := 'A'
                    case '95': zone := 'A'
                    case '93': zone := 'A'
                    case '90': zone := 'A'
                    case '85': zone := 'A'
                    case '80': zone := 'A'
                    case '75': zone := 'A'
                    case '70': zone := 'B'
                    case '65': zone := 'B'
                    case '60': zone := 'B'
                    case '55': zone := 'B'
                    case '50': zone := 'B'
                    case '45': zone := 'C'
                    case '40': zone := 'C'
                    case '35': zone := 'C'
                    case '30': zone := 'C'
                    case '25': zone := 'C'
                    case '20': zone := 'D'
                    case '15': zone := 'D'
                    case '10': zone := 'E'
                    case '7': zone := 'E'
                    case '5': zone := 'E'
                    case '3': zone := 'E'
                    case '1': zone := 'E'
                    case '0': zone := 'E'
                    default: zone := '';
            if {LEERLING_LEERLING.LEERJAAR} = '6'then
                select(toNumber({@6MTOT}))
                    case '99': zone := 'A'
                    case '97': zone := 'A'
                    case '95': zone := 'A'
                    case '93': zone := 'A'
                    case '90': zone := 'A'
                    case '85': zone := 'A'
                    case '80': zone := 'A'
                    case '75': zone := 'A'
                    case '70': zone := 'B'
                    case '65': zone := 'B'
                    case '60': zone := 'B'
                    case '55': zone := 'B'
                    case '50': zone := 'B'
                    case '45': zone := 'C'
                    case '40': zone := 'C'
                    case '35': zone := 'C'
                    case '30': zone := 'C'
                    case '25': zone := 'C'
                    case '20': zone := 'D'
                    case '15': zone := 'D'
                    case '10': zone := 'E'
                    case '7': zone := 'E'
                    case '5': zone := 'E'
                    case '3': zone := 'E'
                    case '1': zone := 'E'
                    case '0': zone := 'E'
                    default: zone := '';)
    else
        if {?ParamPuntenboek} = 'Einde schooljaar' then
                (if {LEERLING_LEERLING.LEERJAAR} = '3'then
                    select(toNumber({@3ETOT}))
                        case '99': zone := 'A'
                        case '97': zone := 'A'
                        case '95': zone := 'A'
                        case '93': zone := 'A'
                        case '90': zone := 'A'
                        case '85': zone := 'A'
                        case '80': zone := 'A'
                        case '75': zone := 'A'
                        case '70': zone := 'B'
                        case '65': zone := 'B'
                        case '60': zone := 'B'
                        case '55': zone := 'B'
                        case '50': zone := 'B'
                        case '45': zone := 'C'
                        case '40': zone := 'C'
                        case '35': zone := 'C'
                        case '30': zone := 'C'
                        case '25': zone := 'C'
                        case '20': zone := 'D'
                        case '15': zone := 'D'
                        case '10': zone := 'E'
                        case '7': zone := 'E'
                        case '5': zone := 'E'
                        case '3': zone := 'E'
                        case '1': zone := 'E'
                        case '0': zone := 'E'
                        default: zone := '';
                if {LEERLING_LEERLING.LEERJAAR} = '4'then
                    select(toNumber({@4ETOT}))
                        case '99': zone := 'A'
                        case '97': zone := 'A'
                        case '95': zone := 'A'
                        case '93': zone := 'A'
                        case '90': zone := 'A'
                        case '85': zone := 'A'
                        case '80': zone := 'A'
                        case '75': zone := 'A'
                        case '70': zone := 'B'
                        case '65': zone := 'B'
                        case '60': zone := 'B'
                        case '55': zone := 'B'
                        case '50': zone := 'B'
                        case '45': zone := 'C'
                        case '40': zone := 'C'
                        case '35': zone := 'C'
                        case '30': zone := 'C'
                        case '25': zone := 'C'
                        case '20': zone := 'D'
                        case '15': zone := 'D'
                        case '10': zone := 'E'
                        case '7': zone := 'E'
                        case '5': zone := 'E'
                        case '3': zone := 'E'
                        case '1': zone := 'E'
                        case '0': zone := 'E'
                        default: zone := '';
                if {LEERLING_LEERLING.LEERJAAR} = '5'then
                    select(toNumber({@5ETOT}))
                        case '99': zone := 'A'
                        case '97': zone := 'A'
                        case '95': zone := 'A'
                        case '93': zone := 'A'
                        case '90': zone := 'A'
                        case '85': zone := 'A'
                        case '80': zone := 'A'
                        case '75': zone := 'A'
                        case '70': zone := 'B'
                        case '65': zone := 'B'
                        case '60': zone := 'B'
                        case '55': zone := 'B'
                        case '50': zone := 'B'
                        case '45': zone := 'C'
                        case '40': zone := 'C'
                        case '35': zone := 'C'
                        case '30': zone := 'C'
                        case '25': zone := 'C'
                        case '20': zone := 'D'
                        case '15': zone := 'D'
                        case '10': zone := 'E'
                        case '7': zone := 'E'
                        case '5': zone := 'E'
                        case '3': zone := 'E'
                        case '1': zone := 'E'
                        case '0': zone := 'E'
                        default: zone := '';)
)
zone; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:55:18.090

要解决您的问题，请从读取的行中删除 (

```
(if {?ParamPuntenboek} = 'Midden schooljaar' then 
```

并在之前删除公式底部的 )

```
zone; 
```

# webdriver - Webdriver - java - 如何在执行操作后释放键

> ID：13311513
> 
> 赞同：4
> 
> 时间：2012-11-09T16:00:34.867
> 
> 标签：webdriver, selenium-webdriver

我正在使用 webdriver [Action](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html)来执行一些组合键：

```
new Actions(getWebDriver()).sendKeys(Keys.CONTROL, ..).perform(); 
```

我的问题是`Keys.CONTROL`执行操作后仍然激活。在一些新的点击之后，我的浏览器上有新的打开选项卡和奇怪的行为，因为密钥仍然被激活。如何释放密钥？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T04:47:23.330

建立一系列动作，然后执行它们。一个有用的演示如何释放控制键是通过模拟按键来移除*附加栏*`Control+/`，然后发送`keyUp`消息以释放按住的`Control`键：

```
WebDriver driver = getDriver();
String handle = driver.getWindowHandle();

// Remove the "add-on" bar.
driver.switchTo().defaultContent();
Actions actions = new Actions( driver );
actions
  .sendKeys( Keys.CONTROL, Keys.DIVIDE )
  .keyUp( Keys.CONTROL )
  .build()
  .perform();

// Return back to whatever window was first selected.
driver.switchTo().window( handle ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T00:21:25.587

尝试使用`Keys.chord()`. 根据[文档](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Keys.html#chord%28java.lang.CharSequence...%29)：

> 模拟在“和弦”中一次按下多个键。接受一系列 Keys.XXXX 或字符串；将每个值附加到一个字符串，并添加和弦终止键 (Keys.NULL) 并返回结果字符串。注意：当低级 webdriver 键处理程序看到 Keys.NULL 时，活动修饰键 (CTRL/ALT/SHIFT/etc) 通过 keyup 事件释放。

所以`Keys.NULL`使用和弦自动附加的那个应该释放控制。

**解决方案**

```
new Actions(getWebDriver()).sendKeys(Keys.chord(Keys.CONTROL, ...)).perform(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T09:25:29.177

对我来说，只有这样的解决方法有帮助：

```
new Actions(selenium).sendKeys(Keys.ESCAPE).perform(); 
```

# java - 在 Spring 项目中实现 JSR-303 注释

> ID：13311515
> 
> 赞同：1
> 
> 时间：2012-11-09T16:00:42.800
> 
> 标签：java, spring, hibernate, bean-validation

我第一次使用 Spring（实际上是这个级别的 Java）。我有一个基本的 Spring 项目，我已经实现了 JDBC 身份验证，现在我正在尝试使用 JSR-303 注释来验证页面上的输入框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:29:07.190

如果字段可以为空，只需删除 min 标志（[默认值为 0](http://docs.oracle.com/javaee/6/api/index.html?javax/validation/constraints/Size.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T07:44:51.160

删除以免影响练习。

# jquery - Jquery ajax 发布请求仅在单击操作上发送一次

> ID：13311518
> 
> 赞同：1
> 
> 时间：2012-11-09T16:00:52.597
> 
> 标签：jquery, ajax, symfony

我有一个按钮：

```
<a href="#" id="buttonNew" class="buttonNew">{{ 'buttonNewText'|trans }}</a> 
```

当我点击这个按钮时，还有一个 ajax 动作：

```
 $(function(){
        $("#buttonNew").click(function(e){
            $.ajax({
                type: "POST",
                url: "{{ path('ajax_load_new_note_form') }}",
                success: function(data) {
                    $('#homeLeft').html(data);
                }
            });
        });
    }); 
```

我第一次单击按钮时，会发送一个发布请求，所以没关系。但是当我再次点击时，没有其他请求被发送。当我重新加载页面时，单击发送请求而不是下一次单击。

我错过了什么？

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:02:58.570

尝试

```
$(function(){
    $("body").on('click','#buttonNew',function(e){
        $.ajax({
            type: "POST",
            url: "{{ path('ajax_load_new_note_form') }}",
            success: function(data) {
                $('#homeLeft').html(data);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:06:01.283

这应该有效：

```
$(function(){
    $("#buttonNew").click(function(e){
        $.ajax({
            type: "POST",
            url: "{{ path('ajax_load_new_note_form') }}",
            success: function(data) {
                $(this).html(data);
            }
        });
    });
}); 
```

# javascript - 在纯 Javascript 中缩小图像

> ID：13311519
> 
> 赞同：1
> 
> 时间：2012-11-09T16:00:54.967
> 
> 标签：javascript, image-processing, html5-canvas

我编写了以下网络工作者，它将处理图像并将双线性插值添加到放大版本。

这对于使图像变大非常有用，但是我现在需要使图像变小。

我的理解是插值是为了放大而不是缩小。

```
this.addEventListener('message', function(event) {

    var src = event.data.imageData,
        dest = event.data.imageDataNew

        postMessage({
            'imageData':bilinear(src, dest, scale)
        });

}, false);

  function ivect(ix, iy, w) {
        // byte array, r,g,b,a
        return((ix + w * iy) * 4);
    }

 function bilinear(srcImg, destImg, scale) {
        // c.f.: wikipedia english article on bilinear interpolation
        // taking the unit square, the inner loop looks like this
        // note: there's a function call inside the double loop to this one
        // maybe a performance killer, optimize this whole code as you need
        function inner(f00, f10, f01, f11, x, y) {
            var un_x = 1.0 - x; var un_y = 1.0 - y;
            return (f00 * un_x * un_y + f10 * x * un_y + f01 * un_x * y + f11 * x * y);
        }
        var i, j;
        var iyv, iy0, iy1, ixv, ix0, ix1;
        var idxD, idxS00, idxS10, idxS01, idxS11;
        var dx, dy;
        var r, g, b, a;
        for (i = 0; i < destImg.height; ++i) {
            iyv = i / scale;
            iy0 = Math.floor(iyv);
            // Math.ceil can go over bounds
            iy1 = ( Math.ceil(iyv) > (srcImg.height-1) ? (srcImg.height-1) : Math.ceil(iyv) );
            for (j = 0; j < destImg.width; ++j) {
                ixv = j / scale;
                ix0 = Math.floor(ixv);
                // Math.ceil can go over bounds
                ix1 = ( Math.ceil(ixv) > (srcImg.width-1) ? (srcImg.width-1) : Math.ceil(ixv) );
                idxD = ivect(j, i, destImg.width);
                // matrix to vector indices
                idxS00 = ivect(ix0, iy0, srcImg.width);
                idxS10 = ivect(ix1, iy0, srcImg.width);
                idxS01 = ivect(ix0, iy1, srcImg.width);
                idxS11 = ivect(ix1, iy1, srcImg.width);
                // overall coordinates to unit square
                dx = ixv - ix0; dy = iyv - iy0;
                // I let the r, g, b, a on purpose for debugging
                r = inner(srcImg.data[idxS00], srcImg.data[idxS10],
                    srcImg.data[idxS01], srcImg.data[idxS11], dx, dy);
                destImg.data[idxD] = r;

                g = inner(srcImg.data[idxS00+1], srcImg.data[idxS10+1],
                    srcImg.data[idxS01+1], srcImg.data[idxS11+1], dx, dy);
                destImg.data[idxD+1] = g;

                b = inner(srcImg.data[idxS00+2], srcImg.data[idxS10+2],
                    srcImg.data[idxS01+2], srcImg.data[idxS11+2], dx, dy);
                destImg.data[idxD+2] = b;

                a = inner(srcImg.data[idxS00+3], srcImg.data[idxS10+3],
                    srcImg.data[idxS01+3], srcImg.data[idxS11+3], dx, dy);
                destImg.data[idxD+3] = a;
            }
        }

        return destImg;
    } 
```

我还写了一个 Lancosz webworker，它产生了很好的结果，但速度很慢。我正在寻找的是介于两者之间的东西。

有谁知道双线性/双三次缩小过滤器的合理快速的 JavaScript 实现？

我将要处理的图像类型可能大到 5000x5000，并且会缩小到 1000x1000。

只要性能小于 10 秒左右就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:43:30.397

我在 Grant Galitz 的纯 Javascript 图像大小调整中看到了非常好的结果

[https://github.com/taisel/JS-Image-Resizer](https://github.com/taisel/JS-Image-Resizer)

（Gameboy Color emulator in JS 的作者）

# jquery - 使用 Sortable 时悬停不会消失

> ID：13311527
> 
> 赞同：7
> 
> 时间：2012-11-09T16:01:28.680
> 
> 标签：jquery, css, jquery-ui, html, jquery-ui-sortable

我有以下脚本，它在 Chrome 中运行良好，但在 IE8 中运行良好：

**jQuery：**

```
$("<div class='divButtons'></div>").appendTo( $(".widget_header") );
$(".divButtons").text("321"); 
```

**CSS：**

```
.divButtons { background:orange; display:none; }
.widget:hover .divButtons { display:block; } 
```

**jsFiddle：**

这是完整的[jsFiddle](http://jsfiddle.net/oshirowanen/GM83C/1/)。

**什么有效：**

发生的情况是，当我将鼠标悬停在 a 上时`.widget`，css 会导致`.divButtons`显示。到目前为止一切都很好。当我将 a`.widget`移到另一个`.widget`并放手时，`.widget`s 改变了位置，而`.widget`我悬停在上面的仍然显示`.divButtons`，一切都很好。如果 I`mouseout`和over another ，则从I was ing over消失`.widget`并出现在I am ing over 上。到目前为止一切都很好。`hover``.widget``.divButtons``.widget``hover``.widget``hover`

**问题：**

IE8 中的问题（在 Chrome 中不会发生）是当 i `hover`over a时`.widget`，这会导致`.divButtons`出现在`.widget`I am `hover`ing over 上。如果我将它`.widget`移到屏幕的`white`一部分然后放开，我不再`hover`在 上`.widget`，但`.divButtons`仍然显示在`.widget`我刚刚放开的位置上。

这不应该发生。正如我之前提到的，这在 Chrome 中运行良好。

**问题：**

有什么方法可以让它在 IE8 中正常工作，因为它目前在 Chrome 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:45:58.787

似乎 IE8 有一个错误，即当元素从鼠标范围下移出时，永远不会在元素上触发*mouseout*或*mouseleave 。*结果`:hover`永远不会被删除，并且 jquery 中的所有 mouseout、hoverleave 等事件侦听器都不会被调用。

我想出的是检查`.column`当 a 被释放时是否有任何悬停`.widget`。如果没有悬停列，我们从小部件中删除悬停状态。

我已经使用了一个`.hover`类`.widget`来维护它，因为我们无法`:hover`使用 jquery 删除。

**jsFiddle**

这是工作修复的[jsFiddle](http://jsfiddle.net/GM83C/11/)。

**CSS**

```
.widget.hover .divButtons { display:block; }​ 
```

**jQuery**

```
// We use this rather than :hover as :hover didn't always work in ie
$('.column').hover(function() {
    $(this).addClass('hover');
}, function() {
    $(this).removeClass('hover');
});

// This is our base widget hover code
$('.widget').hover(function() {
    $('.widget.hover').removeClass('hover');
    $(this).addClass('hover');
}, function() {
    $(this).removeClass('hover');
}); 
```

**jQuery 可排序调用**

```
$( ".column" ).sortable({
    connectWith: ".column",
    tolerance: 'pointer',
    // We use stop to call this when the widget has been dropped
    stop: function(event, ui) {
        // We wait 1 millisecond until after the widget is dropped
        setTimeout(function() {
            // Check if any widget is hovered. Good browsers will have 0 here and skip the following. IE8 will have 1 here
            if ($('.widget.hover').size() > 0) {
                // We check if the widgets parent column does not has hover
                if (!$('.widget.hover').first().parent().is('.hover')) {
                    // If no column hover. We remove this hover class
                    $('.widget.hover').removeClass('hover');
                }
            }
        }, 1);
    }
}); 
```

我希望这对你有用。

太烦人了，2012 年我们仍然不得不做出如此困难的工作，因为 IE 的版本有这样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:38:36.640

而不是使用`hover`伪类你可以试试这个

CSS

```
.widget.hover  .divButtons { display:block; }​ 
```

JS

```
$('.widget').hover(function(e){
    $(e.currentTarget).addClass('hover');
},function(e){
    $(e.currentTarget).removeClass('hover');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:12:40.433

在将悬停样式应用于除锚之外的任何内容时，Internet Explorer 真的不能被信任。

显然，它不会在穿过 DOM 时重绘项目，也不会重置悬停状态，除非鼠标再次进入该区域。要解决此问题，您可以克隆拖动的项目，而不是直接使用该项目。

该`sortable()`方法有一个简单的选择：

```
$( ".column" ).sortable({
    connectWith: ".column",
    tolerance: 'pointer',
    helper: 'clone' // added
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:25:18.963

IE9 遇到了几乎相同的问题。杰克是对的，如果 DOM 元素在 mouseout 发生之前更改，它经常会卡在悬停状态。

我找不到针对这种行为的可靠修复，所以我切换到 jQuery`.hover()`而不是`:hover`伪类，如下所示：

```
$(elt).hover(function () {
    $(this).addClass("jHover");
}, function () {
    $(this).removeClass("jHover");
}); 
```

它更可靠，虽然不是那么酷，是的。

# java - 在android中读取文件。如何修复坏路径

> ID：13311528
> 
> 赞同：0
> 
> 时间：2012-11-09T16:01:28.523
> 
> 标签：java, android

我正在尝试在android中读取文件。我习惯于在 java 中执行此操作，但在这里我得到一个**打开失败的 enoent（没有这样的文件或目录）**错误。我不确定如何导入文件。我应该把它和我的应用程序放在同一个目录中吗？现在它在我的桌面上。这是我的代码

```
package com.androidplot.fun;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class ReadFile {
    private String path;
    public ReadFile(String file_path){
        path = file_path;
    }
    public String[] OpenFile() throws IOException{
        FileReader fr = new FileReader(path);
        BufferedReader textReader = new BufferedReader(fr);
        int numberOfLines = 3;
        String[ ] textData = new String[numberOfLines];
        int i;
        for (i=0; i < numberOfLines; i++) {
            textData[ i ] = textReader.readLine();
        }
        textReader.close( );
        return textData;
    }
    int readLines() throws IOException{
        FileReader file_to_read = new FileReader(path);
        BufferedReader bf = new BufferedReader(file_to_read);

        String aLine;
        int numberOfLines = 0;
        while (( aLine = bf.readLine()) != null){
            numberOfLines++;
        }
        bf.close();
        return numberOfLines;
    }

} 
```

这是我一直在使用的课程。这就是我在主程序中使用的

```
try{
    ReadFile file = new ReadFile("/Users/jonathon/Desktop/data.txt");
    String[] aryLines = file.OpenFile();
    int x;
    for ( x=0; x < aryLines.length; i++ ) {
      System.out.println( aryLines[ i ] ) ;
    }
 }
 catch ( IOException e ) {
   System.out.println( e.getMessage() );
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:08:16.413

该文件是否会与您的应用程序捆绑在一起？如果是这样，您应该将其作为资源包含在内。这是一个[链接](http://developer.android.com/guide/topics/resources/providing-resources.html)，其中包含有关如何完成此操作的一些一般信息。

编辑：我只是看了你的文件路径。在 android 模拟器上运行的代码将无法访问您的 Windows 桌面。启动模拟器，将数据传输给它，然后让应用程序尝试从“电话”中读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:22:50.043

该路径将无效。如果要将其存储在 SD 卡上，请从以下步骤开始： `Environment.getExternalStorageDirectory().getAbsolutePath();`

这应该返回 SD 卡的根目录，您可以将文件直接放在那里或在其下创建自己的结构。（另外，就个人而言，除非我想测试我的手机无法做的事情，比如不同版本的 Android，否则我不会打扰模拟器。我将手机插入并严格测试。从模拟器的笨重程度来看是，我怀疑谷歌开发人员也这样做......）

# css - 我可以在 twitter-bootstrap 中设置响应式布局的最大宽度吗？

> ID：13311529
> 
> 赞同：1
> 
> 时间：2012-11-09T16:01:30.310
> 
> 标签：css, twitter-bootstrap

我刚刚将 twitter-bootstrap 从 2.0.4 升级到 2.2.1。我唯一的问题是我当前的网站现在扩展到 1170 像素的新[响应式布局](http://twitter.github.com/bootstrap/scaffolding.html#responsive)，并且我已经优化了我的网站，最大宽度为 940 像素。有谁知道是否可以将新的响应式布局设置为最大宽度为 940 像素？

我当前的元标记如下所示：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:26:23.073

从您的样式表中删除以下`@media`查询：

```
@media (min-width: 1200px) {...} 
```

# linq - LINQ ...忽略下拉C#的空值

> ID：13311533
> 
> 赞同：2
> 
> 时间：2012-11-09T16:01:44.087
> 
> 标签：linq, null

我有一个简单的 linq 查询，它返回一组客户。客户由五个字段组成，其中一些字段可能为空。

公司、事业部、事业部、产品组、联系人

一家大公司的客户可能在所有五个领域都有价值（以下是虚构的！）：

Microsoft - Windows - 开发人员组 - 开始菜单团队 - Bob Jones

较小的客户可能是：

Bob 的早餐角 - NULL - NULL - NULL - Bob Jones

所以我有一个下拉列表，我想在其中列出所有客户：

```
 var qryGetClients = from m in db.clients
                            select new
                            {
                                clientid = m.clientID,
                                corpName = m.corpName,
                                buName = m.buName,
                                divName = m.divName,
                                pgName = m.pgName,
                                contactName = m.contactName

                            };

        DDClientList.DataSource = qryGetClients;
        DDClientList.DataTextField = "completeclientname";
        DDClientList.DataValueField = "clientid";
        DDClientList.DataBind(); 
```

现在我知道我可以在查询中执行此操作以将字段连接到一个字段中：

```
 completeclientname= m.corpName + " " + m.buName + " " + m.divName + " " + m.pgName + " " + m.contactName 
```

但是，如果其中一个字段为空，我的下拉列表将显示一个完全为空的值。（例如，它不会“跳过”记录，而是显示一个空行。

即使我在一个或多个字段中有空值，如何让下拉菜单显示“完整客户端名称”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:05:09.280

```
var fields = new [] { m.corpName, m.buName, m.divName, m.pgName, m.contactName }
                                .Where(s => s != null);
completeclientname = string.Join(" ", fields); 
```

为了从 Linq-2-entity 切换到 Linq-2-objects，请使用`AsEnumerable`：

```
var qryGetClients = db.clients.AsEnumerable()
                              .Select(m => new {
                                                 clientid = m.clientID,
                                                 corpName = m.corpName,
                                                 ...
                                                 completeclientname = ...
                                               })
                              .ToArray(); 
```

# c# - 该方法的参数预期是什么？

> ID：13311535
> 
> 赞同：1
> 
> 时间：2012-11-09T16:01:57.983
> 
> 标签：c#, methods, arguments, rhino3d

我正在尝试使用`DivideByLength`以下基于[RhinoCommon](http://www.rhino3d.com/5/rhinocommon/html/M_Rhino_Geometry_Curve_DivideByLength_1.htm) SDK 的方法，但我无法理解第三个参数是什么。我尝试基于此方法编写以下代码，但收到以下错误消息：`Error: 'Rhino.Geometry.Point3d' is a 'type' but is used like a 'variable'`

我认为第三个参数是指定我想要点作为输出而不是加倍。我究竟做错了什么？

方法：

```
Public Function DivideByLength ( _
    segmentLength As Double, _
    includeStart As Boolean, _
    <OutAttribute> ByRef points As Point3d() _
) As Double() 
```

代码：

```
List<Point3d> pts = new List<Point3d>();

for(int i = 0; i < crv.Count;i = i + 2)
{
  pts.Add(crv[i].DivideByLength(nb, true, out Point3d()));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:05:17.790

看起来这就是您要查找的内容：

```
List<Point3d[]> pts = new List<Point3d[]>();

for(int i = 0; i < crv.Count;i = i + 2)
{
  Point3d[] pointArray;
  crv[i].DivideByLength(nb, true, out pointArray);
  pts.Add(pointArray);
} 
```

有关详细信息，请参阅[out 参数文档](http://msdn.microsoft.com/en-us/library/ee332485.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:05:52.240

尝试在c#中使用：

```
List<Point3d[]> ptlist = new List<Point3d[]>();
    Point3d[] pts;

    for(int i = 0; i < crv.Count;i = i + 2)
    {
       crv[i].DivideByLength(nb, true, out pts);
       ptlist.add(pts);
    } 
```

使用 new 没有错，但没用，因为函数将数组作为输出返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:13:07.637

我想这可能是你所追求的。您的`out`参数是一个`Point3d`对象数组，看起来您想要获取所有返回数组中所有对象的列表。所以你有你的清单，并且需要`AddRange`结果。

```
List<Point3d> pts = new List<Point3d>();

for(int i = 0; i < crv.Count;i = i + 2)
{
    Point3d[] arr;
    crv[i].DivideByLength(nb, true, out arr);
    pts.AddRange(arr);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T16:04:39.350

你需要`new Point3d()`而不是`Point3d()`你需要实例化 Point3d 而不是传递 Point3d

```
Point3d objPoint3d = new Point3d();

pts.Add(crv[i].DivideByLength(nb, true, out objPoint3d)); 
```

# sql-server - 如何捕获其中的一些特定行和 SUM 值？

> ID：13311543
> 
> 赞同：0
> 
> 时间：2012-11-09T16:02:24.287
> 
> 标签：sql-server

我有一张桌子：

```
ID   SubID   Cost

 1    NULL     10
 2    NULL     10
 3      3a     10
 3a   NULL     10
 4    NULL     10
 ... 
```

我需要使用 SubID 和 SUM 成本捕获所有行（在此示例中，成本 3 和成本 3a）。所以，我需要像这样返回它：

```
ID   SubID   Cost

 1    NULL     10
 2    NULL     10
 3      3a     20
 4    NULL     10
 ... 
```

好像我必须自己加入这个表（ON ID = SubID），但我无法让它工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:05:46.280

如果每个父母最多有一个孩子，并且嵌套只有一个深度，这将起作用：

```
SELECT parent.ID, parent.SubID, parent.Cost + COALESCE(child.Cost, 0)
FROM someTable parent
LEFT JOIN someTable child
  ON parent.SubID = child.ID
WHERE parent.ID NOT IN (SELECT SubID from someTable WHERE SubID IS NOT NULL) 
```

# php - 将目录路径添加到数据库

> ID：13311544
> 
> 赞同：0
> 
> 时间：2012-11-09T16:02:30.343
> 
> 标签：php, javascript, mysql

> **可能重复：**
> [防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

我正在制作一个文件系统，用户只能在其中指示文件的位置和不应该上传的位置，只是为了使用 javascript 和输入文件类型捕获文件名。

问题是当我执行查询以插入...文件的路径是这样的：

> C:\用户\文件\test.php

这里的问题是 \ 字符，因为它省略了 PHP 中的下一个字符。所以它在数据库中保存为：C:usersfilestest.php。

我有另一个输入框，用户可以在其中指定他们想要文件的位置......所以他们写的时候：

> C:\ 查询不执行，因为 \ 字符。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:03:47.767

你可以使用`\\`尽管单`\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:18:14.890

如果您正确地转义您尝试插入的字符串，您将不会遇到`\`消失的问题。实际上是 MySQL 将单个反斜杠视为转义字符串。

所以是这样的：

```
$path_string_escaped = mysqli_real_escape_string($db_connection, $path_string); 
```

并`$path_string_escaped`在您的插入中使用。

请注意，这与 make`$path_string_escaped`看起来像`C:\\users\\files\\test.php`. MySQL 然后将取消转义反斜杠，以便`C:\users\files\test.php`将其写入数据库。从数据库中读取来修改字符串时，您不需要做任何事情。

您应该始终转义您将写入数据库的用户提供或用户可访问的数据。

这也是一个很好的例子，说明为什么即使使用准备好的语句，当您处理可能包含 MySQL 转义序列的字符串时，您仍然应该转义正在写入 DB 的用户可访问数据。虽然使用准备好的语句当然可以防止实际的注入攻击，但当字符串中已经存在 MySQL 转义序列时，它不会帮助您以您想要的方式将数据实际写入数据库。

# mongodb - 个性化的like/unlike 逻辑——应该推送到视图、数据还是服务层？

> ID：13311545
> 
> 赞同：1
> 
> 时间：2012-11-09T16:02:29.647
> 
> 标签：mongodb, database-design, social-networking, web-application-design

想看看是否在客户端视图或数据库查询中保留显示喜欢/不喜欢按钮的逻辑的位置达成共识。将逻辑推送到查询本身可以使其保持干净和一致，但需要对帖子主页列表的每个查询进行个性化处理，并且不允许缓存该请求。

设置：MongoDb 数据库（或者可能是 neo4j）、node.js api 和应用服务器、iOS 移动客户端和网站。大多数帖子可以有十几个赞，但少数帖子会有数百个赞。大多数用户会喜欢 50 - 300 个帖子，少数用户喜欢数千个帖子。

我的用例：用户浏览最近热门帖子的列表，并根据他们是否已经喜欢该帖子，在每个帖子旁边看到一个“喜欢”或“不喜欢”按钮。

解决方案-

方法 1：将查询中的用户 ID 传递给数据库，并返回一个最受欢迎的帖子列表，其中包含在查询中计算的 isLiked 属性。

方法 2：客户端应用程序为该用户获取并保持同步的喜欢的 id，并且视图确定是否为任何给定的帖子列表显示“喜欢”或“不喜欢”按钮。帖子列表可以缓存在服务器上或 CDN 中，不需要任何个性化设置。

方法3？在 rest api 服务层有更有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:49:17.687

我想你需要考虑优点和缺点，看看哪一个是最好的。

MongoDB 支持一个非常有效的单原子[增量数据库命令。](http://docs.mongodb.org/manual/reference/operator/inc/)您甚至不必等到数据库层确认插入并简单地显示“喜欢”增加的数量。

如果大约在同一时间，另一个用户正在阅读同一篇文章，并且您希望 100% 确定他的计数是正确的，那么您可能不想进行任何缓存。

话虽如此，您可能不需要在某人“喜欢”帖子后的毫秒内将该数字保持一致。因此，您可以缓存包括计数在内的数据库信息，并每隔 x 分钟访问一次数据库。

请注意，博客文章在前几天非常受欢迎，然后不再流行。

出于好奇，您可能会发现这很有趣：YouTube 视频计数系统的视频，出于验证和多数据中心的原因，该视频的计数在一段时间内保持在 301。 [http://www.youtube.com/watch?v=oIkhgagvrjI](http://www.youtube.com/watch?v=oIkhgagvrjI)

# c - Compact array in C

> ID：13311547
> 
> 赞同：2
> 
> 时间：2012-11-09T16:02:37.377
> 
> 标签：c, arrays

Suppose i have these pairs of nodes (ID):

*   0 1
*   0 8
*   500 4
*   8 300

I know the number of unique nodes: 6. How can i save them nto a matrix, without allocating a 500x500 matrix? Which kind of mapping can be used?

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:07:50.653

What you might want is a sparse-matrix - you can imagine this as an array containing values that correspond to an x,y for indexing the matrix and the value stored there, so that matrices which are mostly zeros can be stored in a small amount of space. The memory overhead of this data structure is O(n) where n is the number of non-zero entries in the matrix.

In practice you can use something other than an actual array for performance benefits since searching through an array for an x,y is costly, particularly if it is not there (the most common case).

One option would be to use fast hash map type structure to store the values by hashing the x,y position to generate a key...

More information: [http://en.wikipedia.org/wiki/Sparse_matrix](http://en.wikipedia.org/wiki/Sparse_matrix)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:11:30.250

This is called a sparse matrix, and there are lots of representations you can use. Which one you want depends on what operations you need to be able to do quickly.

Check out the Wikipedia [sparse matrix](http://en.wikipedia.org/wiki/Sparse_matrix) article for details.

# javascript - iPad Safari 在 raphael.js 中解析路径字符串时崩溃

> ID：13311548
> 
> 赞同：2
> 
> 时间：2012-11-09T16:02:37.823
> 
> 标签：javascript, ios, safari, raphael

我正在尝试绘制一些从 raphael.js 中的 Adob​​e Illustrator 导出（另存为 SVG）的路径对象。路径看起来像这样：

```
'M31.181-56.886l5.08,34.108l1.643,0.947v0l0,0l0,0v0l5.252-3.032l-6.164-41.371l4.14-41.301l-0.001,0L3.95-129l-5.149,2.243v0.001l-4.216,42.073l-31.67,18.284v44.931l1.644,0.948l5.188-2.994v-32.951h0.001l28.708,16.574V-0.95L0.096,0l5.189-2.996v-38.941L31.181-56.886 M2.99-102.084l29.241,16.883l-1.537,15.331L1.455-86.751L2.99-102.084' 
```

或者

```
'M-12.385-52.752l6.252,49.204L0.017,0h0.001L1.94-1.11l-6.253-49.202l34.379-19.847l5.412,42.587l6.148,3.551l1.924-1.11l-7.217-56.773l4.844-42.761L35.149-129l-40.193,23.206L-12.385-52.752z M28.527-86.413L14.73-94.378l0.001,0l15.729-9.082l-1.932,17.047Z', 
```

这些字符串在所有桌面浏览器上都可以完美解析，但在 iOS 上的 Safari 中，页面会在解析它们时挂起，并导致 Safari 在一段时间后“强制关闭”。

我正在画它们：

```
Layers.elementsOfTypeA.path(this.path).attr(Styles.whiteTransparent); 
```

这是 iOS 和/或 raphael.js 的问题，还是我的路径字符串格式不正确？不幸的是，我在 PC 上，无法访问任何类型的控制台信息/错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T13:55:46.787

我没有 Ipad，所以无法尝试，但我认为您可以使用来自 raphael 参考资料的[Paper.safari 方法解决此问题。](http://raphaeljs.com/reference.html#Paper.safari)

最好的

# c++ - IIS - 部署 ASP.NET 网站和数据库连接

> ID：13311549
> 
> 赞同：1
> 
> 时间：2012-11-09T16:02:39.747
> 
> 标签：c++, asp.net, database, connectivity

我有一个用 ASP.NET 编写的网站，并试图在 Windows 7 上部署它。

我已成功部署该网站并且它运行良好，直到我尝试访问连接到数据库的页面。显示以下错误：

“/”应用程序中的服务器错误。

* * *

无法打开登录请求的数据库“银行”。登录失败。用户“IIS APPPOOL\ASP.NET v4.0”登录失败。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：无法打开登录请求的数据库“银行”。登录失败。用户“IIS APPPOOL\ASP.NET v4.0”登录失败。

源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[SqlException（0x80131904）：无法打开登录请求的数据库“银行”。登录失败。用户 'IIS APPPOOL\ASP.NET v4.0' 登录失败。] System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，布尔型 breakConnection) +6351920 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412 系统。 Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1363 System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +53 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover( ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions,

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

我使用以下过程在 IIS 中部署网站：

1.  转到桌面/代码/Info_Leakage_Vulnerable
2.  复制 Info_Leakage_Vulnerable
3.  转到 C:/inetpub/wwwroot
4.  将文件夹粘贴到那里
5.  打开开始菜单
6.  输入 inetmgr
7.  打开 HOME-PC/站点
8.  右键单击站点，然后单击添加网站

站点名称 = Info_Leakage_Vulnerable

应用程序池 = ASP.NET 版本 4

物理路径 = C:/inetpub/wwwroot/Info_Leakage_Vulnerable 中文件夹的路径

端口 = 1000

1.  右键单击网站菜单中的 Info_Leakage_Vulnerable，然后单击切换到内容视图
2.  单击 HomePage.aspx，然后单击浏览

**该网站在 Visual Studio 中完美运行。从 IIS 运行网站时，我遇到的问题突然出现。请问如何解决数据库连接的问题？谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:20:12.073

在数据库中执行以下查询`master`。您必须为`IIS APPPOOL\ASP.NET v4.0`

```
CREATE LOGIN [IIS APPPOOL\ASP.NET v4.0] FROM WINDOWS WITH DEFAULT_DATABASE=[master], DEFAULT_LANGUAGE=[us_english]
GO

CREATE LOGIN [NT AUTHORITY\NETWORK SERVICE] FROM WINDOWS WITH DEFAULT_DATABASE=[master], DEFAULT_LANGUAGE=[us_english]
GO 
```

如果执行查询后仍然遇到问题，请按照以下步骤操作

1.  在 IIS 中选择`ASP.NET v4.0`应用程序池`Applications Pools`
2.  右键`ASP.NET v4.0`-->选择`Advanced Settings...`
3.  在 Process Model 部分下，将 Identity 值更改为`LocalSystem`。
4.  iis重置

希望这可以帮助。

# java - Java 在 if 结尾继续

> ID：13311551
> 
> 赞同：10
> 
> 时间：2012-11-09T16:02:46.623
> 
> 标签：java, if-statement, continue

我有一些书中的示例代码，作者总是在 if 的末尾使用 continue 。

例子：

```
int a = 5;
if(a == 5)
{
// some code
continue;
} 
```

现在对我来说这没有任何意义。背后可能有某种质量管理推理，还是我只是错过了一些更大的观点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-09T16:05:51.337

也许那段代码在循环（`for/while/do...while`）内？否则，将 a放在条件语句中*没有*任何意义。`continue`

事实上，孤立的 `continue`（例如：未嵌套在循环语句中的某个位置）将`continue cannot be used outside of a loop`在编译时产生错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T16:06:18.740

继续用于进入循环的下一次迭代。所以这样的事情是有道理的。现在您可以使用任何条件（您的条件是`a==5`中断），以及您想要的任何业务逻辑（我的是一个愚蠢的、人为的例子）。

```
StringBuilder sb = new StringBuilder();
for(String str : strings) {
    sb.append(str);
    if(str.length() == 0) continue; // next loop if empty

    str = str.substring(1);
    sb.append(str);
    if(str.length() == 0) continue; // next loop if empty

    str = str.substring(1);
    sb.append(str);
    if(str.length() == 0) continue; // next loop if empty

    sb.append(str);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:12:43.677

有时强制循环的早期迭代很有用。也就是说，您可能希望继续运行循环，但停止处理此特定迭代的主体中的其余代码。实际上，这是一个 goto 刚经过循环体，到循环结束的方式。continue 语句执行这样的操作。在 while 和 do-while 循环中， continue 语句导致控制直接转移到控制循环的条件表达式。在 for 循环中，控制首先进入 for 语句的迭代部分，然后进入条件表达式。对于所有三个循环，任何中间代码都被绕过。下面是一个示例程序，它使用 continue 导致每行打印两个数字： // Demonstrate continue.

```
class Continue
{ 
public static void main(String args[]) 
    { 
    for(int i=0; i<10; i++) 
        { 
    System.out.print(i + " "); 
    if (i%2 == 0)
    continue; 
    System.out.println(""); 
        } 
    } 
} 
```

此代码使用 % 运算符检查 i 是否为偶数。如果是，则循环继续而不打印换行符。这是该程序的输出：

0 1
2 3
4 5
6 7
8 9

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T16:11:06.193

通常， continue 用于逃避深度嵌套的循环，或者只是为了清楚起见（有争议）。

有时 continue 也用作占位符，以使空[循环体更清晰](https://stackoverflow.com/questions/389741/continue-keyword-in-java)。

```
for (count = 0; foo.moreData(); count++)
  continue; 
```

这是我个人不使用继续的口味问题。

# php - PHP + AJAX - 如何将 $_GET 变量传递到 AJAX

> ID：13311552
> 
> 赞同：0
> 
> 时间：2012-11-09T16:02:50.680
> 
> 标签：php, ajax, get

我正在寻找使用 AJAX 进行数据库连接测试，我希望用户填写他们的数据库信息，然后有一个测试按钮，到目前为止填写 $_GET 变量，在数据库连接中处理这些 $_GET 变量测试脚本，然后返回成功或失败。我的问题是，如何在不重新加载页面的情况下传递到目前为止填写的 $_GET 变量？

感谢您的帮助 - 死灵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:04:35.630

您需要将 ajax 与 javascript 或 jquery 一起使用

像 jquery

```
$.ajax({
    type: "GET",
    url: "serverside script to process on data",
    data:{name:youwant}, //name is a $_GET variable name here,
                           // and 'youwant' is its value to be passed 
    success: function(data){
         alert("return here if success")

    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:14:29.267

你可以试试 jquery.ajax() - 这样的方法..

```
$.ajax({
  url: 'server_script?para_name='+para_value,
  success: function(data) {
  $('.result').html(data);
     alert('Load was performed.');
  }
}); 
```

或者您可以使用 jquery-ajax 方法，例如

```
 $.get("script", { para_name:"para_value", para_name:"para_value"}); 
```

欲了解更多信息，请访问.. [w3schools](http://www.w3schools.com/jquery/ajax_get.asp)

# antlr3 - ANTLR：如何删除全局回溯

> ID：13311554
> 
> 赞同：1
> 
> 时间：2012-11-09T16:02:53.510
> 
> 标签：antlr3

我试图在 ANTLR 中重现龙书的一个例子：

```
grammar left_recursion_2;

        options {

language = java;

}

program :   'begin'
             stmt+
            'end'
            ;

stmt    :   unmatched_stmt
        |   matched_stmt
        ;

matched_stmt    : 'if' expr 'then' matched_stmt 'else' matched_stmt
                | other
                ;

unmatched_stmt  : 'if' expr 'then' stmt
                | 'if' expr 'then' matched_stmt 'else' unmatched_stmt
                ;

expr    :   'expression'
        ;

other   :   'other'
        ; 
```

问题是错误211：

> [致命] 规则 unmatched_stmt 具有非 LL(*) 决策，因为可以从 alts 1,2 访问递归规则调用。通过左分解或使用句法谓词或使用 backtrack=true 选项来解决。

我可以打开回溯，但我想知道如何在不回溯的情况下解决它。我也看不到，谓词在这里会有什么帮助。我读到这个：

[http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar](http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar)

但仍然不知道。

您将如何重写语法以使其在不回溯的情况下工作？

提前致谢！

编辑：与此同时，我得出的结论是这是不可能的。由于 LL(*) 使用 DFA 向前看，因此没有机会确定应用哪个规则：“if-else”规则或“if only”规则。但是，如果有人比使用回溯或后处理 AST 有更好的处理方法，请告诉我。

# java - 以 UTC 格式获取设备时间，不考虑时区

> ID：13311562
> 
> 赞同：2
> 
> 时间：2012-11-09T16:03:25.483
> 
> 标签：java, android, datetime, timezone, utc

如何获取设备的当地时间并将其转换为我所在国家/地区的全球 UTC 格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:05:06.933

根本不获取*本地*时间 - 只需获取 UTC 值即可，例如

```
long millis = System.currentTimeMillis(); 
```

或者：

```
Date date = new Date(); 
```

如果您需要将其格式化为字符串，请使用`SimpleDateFormat`但请记住适当设置时区。例如：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",
                                               Locale.US);
format.setTimeZone(TimeZone.getTimeZone("Etc/Utc"));
String text = format.format(new Date()); 
```

（不清楚“我的国家的全球 UTC 格式”是什么意思 - UTC 只是*全球*性的，它不是一种*格式*，它是一个时区。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:13:03.583

不知道你想做什么，但如果你想要正常格式的日期和时间，你可以这样做：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm");
Calendar cal = Calendar.getInstance();
String dateAndTime = dateFormat.format(cal.getTime()); 
```

根据设备设置的日期和时间，字符串 dateAndTime 类似于`2012/01/01 11:13`，因此它显示与设备时钟相同的时间。`"yyyy/MM/dd HH:mm"`您可以通过更改为您喜欢的任何格式来稍微调整一下格式。

希望这可以帮助！

更新：要获得 UTC 时间，请这样做：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm");
dateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
String dateAndTimeUTC = dateFormat.format(new Date()); 
```

# jenkins - Jenkins 从 bitbucket 拉出时挂起

> ID：13311563
> 
> 赞同：2
> 
> 时间：2012-11-09T16:03:25.203
> 
> 标签：jenkins, bitbucket

我正在尝试使用 Bitbucket 设置 Jenkins，但是当我尝试构建时，Jenkins 永远挂在这里：

```
[project] $ hg showconfig paths.default
[project] $ hg pull --rev default 
```

我看过这篇文章：[Jenkins、Mercurial、Bitbucket 和 SSH not working](https://stackoverflow.com/questions/11058905/jenkins-mercurial-bitbucket-and-ssh-not-working)以及这里的文档[https://wiki.jenkins-ci.org/display/JENKINS/Mercurial+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Mercurial+Plugin)但我仍然有同样的问题。

我正在运行 Windows 7 64 位和 TortoiseHG 64 位。我将 jenkins.xml 更改为使用 64 位 jvm，但仍然没有。我已经尝试使用 32 位 Plink，但仍然没有。

我还尝试从构建配置中关闭源代码控制，并且我正在从批处理脚本运行 hg pull。我在那里也得到同样的东西。如果我在命令提示符下运行批处理，它可以工作......

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:21:34.423

你检查过控制台输出吗？

可能是凭据问题。我在 git 存储库中遇到了类似的问题。

# c# - 从 TCP Socket 接收和发送连续数据

> ID：13311564
> 
> 赞同：3
> 
> 时间：2012-11-09T16:03:25.763
> 
> 标签：c#, networking, audio, tcp, handler

我已经快疯了。所以我决定寻求帮助。

场景：在网页中，通过 TCP 套接字连接到服务器，并在循环中逐字节获取数据。这些数据是连续的。

问题：如何制作一个 WebSocket 接收和发送数据到播放器（html5 标签）。

默认.aspx

```
<asp:Literal ID="ltrPlayer" runat="server" /> 
```

默认.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    string tele = HttpContext.Current.Request.QueryString["tele"];
    string ramal = HttpContext.Current.Request.QueryString["ramal"];
    string dac = HttpContext.Current.Request.QueryString["dac"];
    string cti = HttpContext.Current.Request.QueryString["cti"];

    if ((tele != null) && (ramal != null) && (dac != null) && (cti != null))
    {
        string strAudio = "<audio controls='controls'>";
        strAudio += "<source src='Play.ashx?tele=" + tele + "&ramal=" + ramal + "&dac=" + dac + "&cti=" + cti + "' type='audio/x-wav' controls preload='auto'>";
        strAudio += "Seu browser não oferece suporte a este player.";
        strAudio += "</audio>";

        ltrPlayer.Text = strAudio;
    }
} 
```

播放.ashx

```
<%@ WebHandler Language="C#" Class="Play" %>

using System;
using System.Web;

using System.Net;
using System.IO;
using Alvas.Audio; // Make the conversion VOX to WAV
using System.Media;
using System.Configuration;

using System.Net.Sockets;
using System.Text;

public class Play : IHttpHandler
{
    private NetworkStream ns;

    public void ProcessRequest(HttpContext context)
    {
        string tele = HttpContext.Current.Request.QueryString["tele"];
        string ramal = HttpContext.Current.Request.QueryString["ramal"];
        string dac = HttpContext.Current.Request.QueryString["dac"];
        string cti = HttpContext.Current.Request.QueryString["cti"];   

        if ((tele != null) && (ramal != null) && (dac != null) && (cti != null))
        {
            try
            {
                TcpClient oClient = new TcpClient();

                oClient.Connect(tele, 22000);

                ns = oClient.GetStream();
                write(ns, "ondelogar");

                ns = oClient.GetStream();
                write(ns, "monitorarRamalViaRede(tele;ramal;dac;cti)");

                Thread.Sleep(1000);                

                do
                {
                    if (oClient.GetStream().DataAvailable == true)
                    {
                        using (StringReader reader = new StringReader(read(ns)))
                        {
                            string line;

                            while ((line = reader.ReadLine()) != null)
                            {
                                Byte[] byteOut = new Byte[line.Length / 2];

                                int i = 0;
                                while (i < (line.Length / 2))
                                {
                                    byteOut[i / 2] = Convert.ToByte(line.Substring(i, 2), 16);
                                    i = i + 2;
                                }

                                Stream s = new MemoryStream(byteOut);
                                BinaryReader br = new BinaryReader(s);
                                MemoryStream pcmStream = new MemoryStream();
                                IntPtr pcmFormat = AudioCompressionManager.GetPcmFormat(1, 16, 6000);
                                WaveWriter ww = new WaveWriter(pcmStream, AudioCompressionManager.FormatBytes(pcmFormat));
                                Vox.Vox2Wav(br, ww);
                                WaveReader wr = new WaveReader(pcmStream);

                                byte[] pcmData = pcmStream.ToArray();

                                br.Close();
                                ww.Close();
                                wr.Close();
                                pcmStream.Close();
                                Array.Clear(byteOut, 0, byteOut.Length);

                                HttpContext.Current.Response.Clear();
                                HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename=\"{0}\"", "BufferDeAudio"));
                                HttpContext.Current.Response.ContentType = "audio/x-wav";
                                HttpContext.Current.Response.BinaryWrite(pcmData);
                                HttpContext.Current.Response.End();             
                            }
                        }
                    }
                }
                while (oClient.GetStream().DataAvailable == true);

                ns.Close();
            }
            catch (Exception)
            {

            }

            HttpContext.Current.Response.End();
        }
    }

    private void write(NetworkStream ns, string message)
    {
        byte[] msg = Encoding.ASCII.GetBytes(message + Environment.NewLine);
        ns.Write(msg, 0, msg.Length);
    }

    private string read(NetworkStream ns)
    {
        StringBuilder sb = new StringBuilder();

        if (ns.CanRead)
        {
            byte[] readBuffer = new byte[1024];

            int numBytesRead = 0;

            do
            {
                numBytesRead = ns.Read(readBuffer, 0, readBuffer.Length);
                sb.AppendFormat("{0}", Encoding.ASCII.GetString(readBuffer, 0, numBytesRead));
                sb.Replace(Convert.ToChar(24), ' ');
                sb.Replace(Convert.ToChar(255), ' ');
                sb.Replace('?', ' ');
            }

            while (ns.DataAvailable);
        }

        return sb.ToString();
        }                                        

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

然后，当循环逐行接收数据时，我正在发送给播放器。但我听到的唯一声音是循环的最后一行。

我试图将播放器置于线程中但没有成功。

这可能吗？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:59:16.890

您在 while 循环中关闭响应流。这将关闭连接并中断传出流。

考虑类似的事情：

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.AddHeader(...))
HttpContext.Current.Response.ContentType = "audio/x-wav";

...

while ((line = reader.ReadLine()) != null)
{
    ...

    HttpContext.Current.Response.BinaryWrite(pcmData);
    HttpContext.Current.Response.Flush();
}
HttpContext.Current.Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:53:03.340

经过多次尝试，终于得到了满意的结果。查看代码。

播放.ashx

```
public void ProcessRequest(HttpContext context)
{
    string tele = HttpContext.Current.Request.QueryString["tele"];
    string ramal = HttpContext.Current.Request.QueryString["ramal"];
    string dac = HttpContext.Current.Request.QueryString["dac"];
    string cti = HttpContext.Current.Request.QueryString["cti"];

    if ((tele != null) && (ramal != null) && (dac != null) && (cti != null))
    {
        string strLine = string.Empty;
        string strNewLine = string.Empty;
        int intCountBuffer = 0;

        MemoryStream pcmStream = null;
        MemoryStream audioStream = null;
        bool blnArmazenarBuffer = true;

        try
        {
            TcpClient oClient = new TcpClient();
            oClient.Connect(tele, 22000);

            ns = oClient.GetStream();
            write(ns, "ondelogar");

            ns = oClient.GetStream();
            write(ns, "monitorarRamalViaRede(" + tele + ";" + ramal + ";" + dac + ";" + cti + ")");

            Thread.Sleep(1000);

            context.Response.ClearContent();
            context.Response.ClearHeaders();
            context.Response.BufferOutput = false;
            context.Response.AddHeader("Content-Disposition", "attachment; filename=Gravacao");
            context.Response.ContentType = "audio/x-wav";

            int readCount;
            byte[] data = new byte[oClient.ReceiveBufferSize];

            while ((readCount = ns.Read(data, 0, oClient.ReceiveBufferSize)) != 0)
            {
                using (StringReader readerTest = new StringReader(read(ns)))
                {
                    strLine = readerTest.ReadLine();

                    if (strLine.Substring(0, 13) == "BufferDeAudio")
                    {
                        strLine = strLine.Replace("BufferDeAudio(", string.Empty);
                        strLine = strLine.Replace(")", string.Empty);
                        strLine = strLine.Replace(" ", string.Empty);
                        strLine = strLine.Trim();

                        if (blnArmazenarBuffer == true)
                        {
                            strNewLine += strLine;
                            intCountBuffer++;

                            // Holds 10 packages (or 10 seconds) in buffer
                            // Note: Only for ensuring that the first transmission is delivered.
                            if (intCountBuffer >= 10)
                            {
                                pcmStream = VoxToWav(strNewLine);
                                strNewLine = string.Empty;

                                // ChunkSize
                                // Note. See the documentation on: https://ccrma.stanford.edu/courses/422/projects/WaveFormat/
                                pcmStream.Position = 4;
                                pcmStream.WriteByte(12);

                                pcmStream.Position = 5;
                                pcmStream.WriteByte(77);

                                pcmStream.Position = 6;
                                pcmStream.WriteByte(104);

                                pcmStream.Position = 7;
                                pcmStream.WriteByte(28);

                                // SubChunk2Size
                                pcmStream.Position = 40;
                                pcmStream.WriteByte(232);

                                pcmStream.Position = 41;
                                pcmStream.WriteByte(76);

                                pcmStream.Position = 42;
                                pcmStream.WriteByte(104);

                                pcmStream.Position = 43;
                                pcmStream.WriteByte(28);

                                if (context.Response.IsClientConnected)
                                {
                                    // The first time you step through the loop, i send wav header
                                    audioStream = new MemoryStream();

                                    audioStream.Position = 0;
                                    pcmStream.Position = 0;
                                    audioStream.Write(pcmStream.ToArray(), 0, (Int32)pcmStream.Length);
                                }

                                blnArmazenarBuffer = false;
                            }
                        }
                        else
                        {
                            pcmStream = VoxToWav(strLine);
                            strLine = string.Empty;

                            if (context.Response.IsClientConnected)
                            {
                                // Here I have already sent the header. So no need to send it over again.
                                audioStream = new MemoryStream();

                                byte[] arr1 = pcmStream.ToArray();

                                int x = 44;

                                while (x < (arr1.Length))
                                {
                                    audioStream.Position = x - 44;
                                    audioStream.WriteByte(arr1[x]);

                                    x++;
                                }
                            }
                        }

                        context.Response.OutputStream.Write(audioStream.ToArray(), 0, (Int32)audioStream.Length);
                        context.Response.OutputStream.Flush();
                        context.Response.OutputStream.Close();

                        audioStream.Dispose();
                    }
                }
            }
        }
        catch (Exception ex)
        {
            if (File.Exists(path))
            {
                StreamWriter w = File.AppendText(path);

                w.WriteLine("{0} {1}", DateTime.Now.ToLongTimeString(), DateTime.Now.ToLongDateString());
                w.WriteLine("  :");
                w.WriteLine("  :{0}", "Play.ashx");
                w.WriteLine("  :{0}", ex.Message);
                w.WriteLine("-------------------------------");

                w.Flush();
                w.Close();
            }
        }

        ns.Close();
    }
}

private void write(NetworkStream ns, string message)
{
    byte[] msg = Encoding.ASCII.GetBytes(message + Environment.NewLine);
    ns.Write(msg, 0, msg.Length);
}

private string read(NetworkStream ns)
{
    StringBuilder sb = new StringBuilder();

    if (ns.CanRead)
    {
        byte[] readBuffer = new byte[1024];

        int numBytesRead = 0;

        do
        {
            numBytesRead = ns.Read(readBuffer, 0, readBuffer.Length);
            sb.AppendFormat("{0}", Encoding.ASCII.GetString(readBuffer, 0, numBytesRead));
            sb.Replace(Convert.ToChar(24), ' ');
            sb.Replace(Convert.ToChar(255), ' ');
            sb.Replace('?', ' ');
        }

        while (ns.DataAvailable);
    }

    return sb.ToString();
}

private MemoryStream VoxToWav(string strLine)
{
    //How do I get the data in hexadecimal. This trick is to order them in pairs.
    byte[] byteOut = new byte[strLine.Length / 2];

    int j = 0;
    while (j < (strLine.Length))
    {
        byteOut[j / 2] = Convert.ToByte(strLine.Substring(j, 2), 16);
        j = j + 2;
    }

    Stream s = new MemoryStream(byteOut);
    BinaryReader br = new BinaryReader(s);
    MemoryStream pcmStream = new MemoryStream();
    IntPtr pcmFormat = AudioCompressionManager.GetPcmFormat(1, 16, 6000);
    WaveWriter ww = new WaveWriter(pcmStream, AudioCompressionManager.FormatBytes(pcmFormat));
    Vox.Vox2Wav(br, ww);

    return pcmStream;
}

public bool IsReusable
{
    get
    {
        return false;
    }
} 
```

谢谢你们！

# c++ - 使用其公共方法设置类的私有属性，c ++

> ID：13311572
> 
> 赞同：1
> 
> 时间：2012-11-09T16:03:48.283
> 
> 标签：c++, class, methods, properties, private

像这样的东西：

```
class someclass
{
public:
    someclass();
    ~someclass();

    long   Set(int x, int y);

private:
        int _x;
        int _y;
};

long   Set(int x, int y)
{
   _x = x;
   _y = y;
} 
```

但是如果你只是写这样的东西，在 Set() 函数中是无法识别 _x 的。那么如何使用自己的方法设置类的私有属性呢？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:05:00.950

你有一个范围问题。这应该有效：

```
long someclass::Set(int x, int y)
{
   _x = x;
   _y = y;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:06:11.307

当您在其类定义之外定义成员函数时，您必须适当地限定它的范围：

```
long someClass::Set(int x, int y)
{
  _x = x;
 _y = y;
} 
```

你写的定义了一个不相关的全局函数`Set`。

此外，返回类型`Set`可能应该是`void`（或者您必须从中返回某些内容）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T16:06:14.047

你有什么实际上是一个错字。您已经声明了一个成员函数：

```
class someclass
{
public:
    long   Set(int x, int y); 
```

...但实现了一个*完全不同*的免费功能：

```
long   Set(int x, int y)
{
   _x = x;
   _y = y;
} 
```

将后者更改为：

```
long   someclass:Set(int x, int y)
{
   _x = x;
   _y = y;
} 
```

# javascript - 如何在禁用按钮上启用引导工具提示？

> ID：13311574
> 
> 赞同：197
> 
> 时间：2012-11-09T16:03:51.650
> 
> 标签：javascript, jquery, html, twitter-bootstrap, twitter-bootstrap-tooltip

我需要在禁用按钮上显示工具提示并在启用按钮上将其删除。目前，它反向工作。

扭转这种行为的最佳方法是什么？

```
$('[rel=tooltip]').tooltip();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>
<hr>
<button class="btn" disabled rel="tooltip" data-title="Dieser Link führt zu Google">button disabled</button>
<button class="btn" rel="tooltip" data-title="Dieser Link führt zu Google">button not disabled</button>
```

这是一个[演示](http://jsfiddle.net/BA4zM/68/)

PS：我想保留`disabled`属性。

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2013-11-12T19:21:35.200

You can wrap the disabled button and put the tooltip on the wrapper:

```
<div class="tooltip-wrapper" data-title="Dieser Link führt zu Google">
  <button class="btn btn-default" disabled>button disabled</button>
</div> 
```

If the wrapper has `display:inline` then the tooltip doesn't seem to work. Using `display:block` and `display:inline-block` seem to work fine. It also appears to work fine with a floated wrapper.

UPDATE Here's an updated JSFiddle that works with the latest Bootstrap (3.3.6). Thanks to @JohnLehmann for suggesting `pointer-events: none;` for the disabled button.

[http://jsfiddle.net/cSSUA/209/](http://jsfiddle.net/cSSUA/209/)

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2014-04-04T15:54:32.470

This can be done via CSS. The "pointer-events" property is what's preventing the tooltip from appearing. You can get disabled buttons to display tooltip by overriding the "pointer-events" property set by bootstrap.

```
.btn.disabled {
    pointer-events: auto;
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-02-25T20:59:31.550

If you're desperate (like i was) for tooltips on checkboxes, textboxes and the like, then here is my hackey workaround:

```
$('input:disabled, button:disabled').after(function (e) {
    d = $("<div>");
    i = $(this);
    d.css({
        height: i.outerHeight(),
        width: i.outerWidth(),
        position: "absolute",
    })
    d.css(i.offset());
    d.attr("title", i.attr("title"));
    d.tooltip();
    return d;
}); 
```

Working examples: [http://jsfiddle.net/WB6bM/11/](http://jsfiddle.net/WB6bM/11/)

For what its worth, I believe tooltips on disabled form elements is very important to the UX. If you're preventing somebody from doing something, you should tell them why.

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-11-09T21:17:59.623

Here is some working code: [http://jsfiddle.net/mihaifm/W7XNU/200/](http://jsfiddle.net/mihaifm/W7XNU/200/)

```
$('body').tooltip({
    selector: '[rel="tooltip"]'
});

$(".btn").click(function(e) {
    if (! $(this).hasClass("disabled"))
    {
        $(".disabled").removeClass("disabled").attr("rel", null);

        $(this).addClass("disabled").attr("rel", "tooltip");
    }
}); 
```

The idea is to add the tooltip to a parent element with the `selector` option, and then add/remove the `rel` attribute when enabling/disabling the button.

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2020-05-07T14:02:54.653

Based on **Bootstrap 4**

> Disabled elements Elements with the disabled attribute aren’t interactive, meaning users cannot focus, hover, or click them to trigger a tooltip (or popover). As a workaround, you’ll want to trigger the tooltip from a wrapper or , ideally made keyboard-focusable using tabindex="0", and override the pointer-events on the disabled element.

```
<span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Disabled tooltip">
  <button class="btn btn-primary" style="pointer-events: none;" type="button" disabled>Disabled button</button>
</span> 
```

All the details here: [Bootstrap 4 doc](https://getbootstrap.com/docs/4.4/components/tooltips/#disabled-elements)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-06-01T08:57:55.087

These workarounds are ugly. I've debugged the problem is that bootstrap automatically set CSS property **pointer-events: none** on disabled elements.

This magic property causes that JS is not able to handle any event on elements that matches CSS selector.

**If you overwrite this property to default one, everything works like a charm, including tooltips!**

```
.disabled {
  pointer-events: all !important;
} 
```

However you shouldn't use so general selector, because you will probably have to manually stop JavaScript event propagation way you know (**e.preventDefault()**).

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-01-15T12:31:02.930

In my case, none of the above solutions worked. I found that it's easier to overlap the disabled button using an absolute element as:

```
<div rel="tooltip" title="I workz" class="wrap">
  <div class="overlap"></div>
  <button>I workz</button>
</div>

<div rel="tooltip" title="Boo!!" class="wrap poptooltip">
  <div class="overlap"></div>
  <button disabled>I workz disabled</button>
</div>

.wrap {
  display: inline-block;
  position: relative;
}

.overlap {
  display: none
}

.poptooltip .overlap {
  display: block;
  position: absolute;
  height: 100%;
  width: 100%;
  z-index: 1000;
} 
```

[**Demo**](https://jsfiddle.net/03cg1rn2/3/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-03-24T09:30:45.287

Try this example:

Tooltips must be initialized with `jQuery`: select the specified element and call the `tooltip()` method in `JavaScript`:

```
$(document).ready(function () {
    $('[data-toggle="tooltip"]').tooltip();
}); 
```

Add `CSS`:

```
.tool-tip {
  display: inline-block;
}

.tool-tip [disabled] {
  pointer-events: none;
} 
```

And your html:

```
<span class="tool-tip" data-toggle="tooltip" data-placement="bottom" title="I am Tooltip">
    <button disabled="disabled">I am disabled</button>
</span> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-03-06T20:53:37.833

If it helps anyone, I was able to get a disabled button to show a tooltip by simply putting a span inside it and applying the tooltip stuff there, angularjs around it...

```
<button ng-click="$ctrl.onClickDoThis()"
        ng-disabled="!$ctrl.selectedStuff.length">
  <span tooltip-enable="!$ctrl.selectedStuff.length"
        tooltip-append-to-body="true"
        uib-tooltip="Select at least one thing to enable button.">
    My Butt
  </span>
</button> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-11-09T16:17:56.660

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-01-11T17:32:13.880

You can simply override Bootstrap's "pointer-events" style for disabled buttons via CSS e.g.

```
.btn[disabled] {
 pointer-events: all !important;
} 
```

Better still be explicit and disable specific buttons e.g.

```
#buttonId[disabled] {
 pointer-events: all !important;
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-07-28T17:19:17.913

This is what myself and tekromancr came up with.

Example element:

```
<a href="http://www.google.com" id="btn" type="button" class="btn btn-disabled" data-placement="top" data-toggle="tooltip" data-title="I'm a tooltip">Press Me</a> 
```

note: the tooltip attributes can be added to a separate div, in which the id of that div is to be used when calling .tooltip('destroy'); or .tooltip();

this enables the tooltip, put it in any javascript that is included in the html file. this line might not be necessary to add, however. (if the tooltip shows w/o this line then don't bother including it)

```
$("#element_id").tooltip(); 
```

destroys tooltip, see below for usage.

```
$("#element_id").tooltip('destroy'); 
```

prevents the button from being clickable. because the disabled attribute is not being used, this is necessary, otherwise the button would still be clickable even though it "looks" as if it is disabled.

```
$("#element_id").click(
  function(evt){
    if ($(this).hasClass("btn-disabled")) {
      evt.preventDefault();
      return false;
    }
  }); 
```

Using bootstrap, the classes btn and btn-disabled are available to you. Override these in your own .css file. you can add any colors or whatever you want the button to look like when disabled. Make sure you keep the cursor: default; you can also change what .btn.btn-success looks like.

```
.btn.btn-disabled{
    cursor: default;
} 
```

add the code below to whatever javascript is controlling the button becoming enabled.

```
$("#element_id").removeClass('btn-disabled');
$("#element_id").addClass('btn-success');
$('#element_id).tooltip('destroy'); 
```

tooltip should now only show when the button is disabled.

if you are using angularjs i also have a solution for that, if desired.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-04-28T09:43:04.917

Working code for Bootstrap 3.3.6

Javascript:

```
$('body').tooltip({
  selector: '[data-toggle="tooltip"]'
});

$(".btn").click(function(e) {
 if ($(this).hasClass("disabled")){
   e.preventDefault();
 }
}); 
```

CSS:

```
a.btn.disabled, fieldset[disabled] a.btn {
  pointer-events: auto;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-12T00:32:03.800

You can imitate the effect using CSS3.

Simply take the disabled state off the button and the tooltip doesn't appear anymore.. this is great for validation as the code requires less logic.

I wrote this pen to illustrate.

[CSS3 Disabled Tooltips](https://codepen.io/anon/pen/qxmxXJ)

```
[disabled] {
  &[disabled-tooltip] {
    cursor:not-allowed;
    position: relative;
    &:hover {
      &:before {
        content:'';
        border:5px solid transparent;
        border-top:5px solid black;
        position: absolute;
        left: 50%;
        transform: translate(-50%, calc(-100% + -5px));
      }
      &:after {
        content: attr(disabled-tooltip);
        position: absolute;
        left: 50%;
        transform: translate(-50%, calc(-100% + -15px));
        width:280px;
        background-color:black;
        color:white;
        border-radius:5px;
        padding:8px 12px;
        white-space:normal;
        line-height:1;
      }
    }
  }
} 
```

* * *

```
<button type="button" class="btn btn-primary" disabled-tooltip="I am a disabled tooltip using CSS3.. You can not click this button." disabled>Primary Button</button> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-23T03:37:57.280

Simply add the disabled class to the button instead of the disabled attribute to make it visibly disabled instead.

```
<button class="btn disabled" rel="tooltip" data-title="Dieser Link führt zu Google">button disabled</button> 
```

**Note:** this button only appears to be disabled, but it still triggers events, and you just have to be mindful of that.

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-07-20T12:10:58.387

`pointer-events: auto;` does not work on an `<input type="text" />`.

I took a different approach. I do not disable the input field, but make it act as disabled via css and javascript.

Because the input field is not disabled, the tooltip is displayed properly. It was in my case way simpler than adding a wrapper in case the input field was disabled.

```
$(document).ready(function () {
  $('.disabled[data-toggle="tooltip"]').tooltip();
  $('.disabled').mousedown(function(event){
    event.stopImmediatePropagation();
    return false;
  });
});
```

```
input[type=text].disabled{
  cursor: default;
  margin-top: 40px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.3/js/tether.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"> 
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<input type="text" name="my_field" value="100" class="disabled" list="values_z1" data-toggle="tooltip" data-placement="top" title="this is 10*10">
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-05-16T12:49:11.420

For Bootstrap 3

HTML

```
<button 
    class="btn btn-success" 
    disabled
    data-hint="Enabled">
  <div class="sp-btn-overlap" data-hint="Disabled"></div>
  Submit button
</button> 
```

CSS

```
button { position:relative; }

.sp-btn-overlap { 
    position:absolute; 
    top:0; 
    left:0; 
    height:100%; 
    width:100%; 
    background:none; 
    border:none; 
    z-index:1900;
} 
```

JS

```
$('button .sp-btn-overlap')
    .popover({
        trigger: 'hover',
        container: 'body',
        placement: 'bottom',
        content: function() {
            return $(this).parent().prop('disabled')
                    ? $(this).data('hint')
                    : $(this).parent().data('hint');
            }
        }); 
```

```
$('button .sp-btn-overlap')
  .popover({
    trigger: 'hover',
    container: 'body',
    placement: 'bottom',
    content: function() {
      return $(this).parent().prop('disabled')
                  ? $(this).data('hint')
                  : $(this).parent().data('hint'); }
  });
```

```
button {
  position:relative; /* important! */
}

.sp-btn-overlap {
  position:absolute;
  top:0;
  left:0;
  height:100%;
  width:100%;
  background:none;
  border:none;
  z-index:1900;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<button disabled class="btn btn-default" data-hint="Enabled">
  <div class="sp-btn-overlap" data-hint="Disabled"></div>
  Disabled button
</button>

<button class="btn btn-default" data-hint="Enabled">
  <div class="sp-btn-overlap" data-hint="Disabled"></div>
  Enabled button
</button>
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-10-19T23:39:01.537

I finally solved this problem, at least with Safari, by putting "pointer-events: auto" **before** "disabled". The reverse order didn't work.

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-04-28T20:08:21.947

I had the same issue on Dynamic controls so I just simply do it by, Set style attributes and enable the read-only property = true when we need the element as disabled but show the tooltip if user click on the input button controls.

Yes disabled stopped all event functions like ObBlur, onClick /OnFocus. in place of below line :

**((document.getElmentByName('MYINPUTBTN').item(0))).disabled= true;**

we can do thru below code after that tooltip will be enabled in disabled input button elements.

**((document.getElmentByName('MYINPUTBTN').item(0))).setAttribute("style", "background-color": #e9ecef;");**

**b**

Hope this will resolve the issue.

# javascript - 如何更新事件集合中的绑定类

> ID：13311575
> 
> 赞同：3
> 
> 时间：2012-11-09T16:03:56.667
> 
> 标签：javascript, ember.js

我有一个由 Ember.Router 创建的控制器，它填充了一个表。

模板：

```
{{#each key in controller}}

  {{#view App.TestView contentBinding="key"}}

  <tr {{bindAttr class="view.isSelected"}} {{action selectKey this on="click" target="view" }}>
    <td>{{key.id}}</td>
    <td><button type="button" class="btn btn-danger" {{action removeKey on="click" target="view"}}>Remove</button></td>
  </tr>

  {{/view}}

{{/each}} 
```

后面的代码：

```
App.TestView = Em.View.extend({
  removeKey: function () {
    var key = this.get('content');
    this.bindingContext.removeObject(key);
    return false;
  },
  selectKey: function (event) {
    this.set('theClass', 'warning');
  },
  theClass: 'selectable',
  isSelected: function () {
    return this.get('theClass');
  }.property('theClass')
}); 
```

我期待 onclick 事件将类更改为“警告”，并且集合中的行以黄色突出显示（根据 css 类），但是这不会发生。**isSelected**属性似乎没有更新 DOM，我不明白为什么它不这样做。

Jsfiddle在这里：http: [//jsfiddle.net/EsF4R/114/](http://jsfiddle.net/EsF4R/114/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:53:07.610

我认为 Metamorph 和表结构之间存在冲突。将标签赋予`<tr>`视图并将类绑定放在`<td>`元素上似乎可以使其工作，即使我认为生成的 html 仍然很奇怪（特别是`<script x-start>`and `<script x-end>`）

在此处查看您修改过的小提琴：http: [//jsfiddle.net/Sly7/EsF4R/126/](http://jsfiddle.net/Sly7/EsF4R/126/)

**编辑**

这是一个带有好看匹配标签的小提琴。[http://jsfiddle.net/Sly7/EsF4R/129/](http://jsfiddle.net/Sly7/EsF4R/129/) 此外，它更符合您想要的行为，即处理类绑定并单击`tr`元素而不是`td`

# c# - 如何使用 Interop 与 C# 将 *.ppt、*.pptx 文件保存为 *.wmv？

> ID：13311579
> 
> 赞同：3
> 
> 时间：2012-11-09T16:04:06.620
> 
> 标签：c#, .net, interop, powerpoint, wmv

我试图用下面的代码做到这一点：

```
using Microsoft.Office.Core;
using PowerPoint = Microsoft.Office.Interop.PowerPoint;
using System.IO;
using Microsoft.Office.Interop.PowerPoint;

namespace SavePPT
{
        class Program
        {
            static void Main(string[] args)
            {
                Application app = new PowerPoint.Application();
                var pres = app.Presentations;
                var file = pres.Open(@"C:\Presentation1.pptx", MsoTriState.msoTrue, MsoTriState.msoTrue, MsoTriState.msoFalse);
                file.SaveCopyAs(@"C:\presentation1.wmv", PowerPoint.PpSaveAsFileType.ppSaveAsWMV, MsoTriState.msoCTrue);

                app.Quit();

            }
        }
} 
```

但是这个解决方案创建了 0 KB 大小的文件，当然我不能播放它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:19:46.657

我找到解决方案：

```
using Microsoft.Office.Core;
using PowerPoint = Microsoft.Office.Interop.PowerPoint;
using System.IO;
using Microsoft.Office.Interop.PowerPoint;

namespace SavePPT
{
        class Program
        {
            static void Main(string[] args)
            {
                string fileName = @"C:\Presentation1.pptx";
                string exportName = "video_of_presentation";
                string exportPath = @"C:\{0}.wmv";

                Microsoft.Office.Interop.PowerPoint.Application ppApp = new Microsoft.Office.Interop.PowerPoint.Application();
                ppApp.Visible = MsoTriState.msoTrue;
                ppApp.WindowState = PpWindowState.ppWindowMinimized;
                Microsoft.Office.Interop.PowerPoint.Presentations oPresSet = ppApp.Presentations;
                Microsoft.Office.Interop.PowerPoint._Presentation oPres = oPresSet.Open(fileName,
                            MsoTriState.msoFalse, MsoTriState.msoFalse,
                            MsoTriState.msoFalse);
                try
                {
                    oPres.CreateVideo(exportName);
                    oPres.SaveCopyAs(String.Format(exportPath, exportName),
                        PowerPoint.PpSaveAsFileType.ppSaveAsWMV,
                        MsoTriState.msoCTrue);
                }
                finally
                {
                    ppApp.Quit();
                }
            }
        }
} 
```

此代码保存文件，但有一些延迟。感谢帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-30T18:14:10.950

尝试

```
while (oPres.CreateVideoStatus == PpMediaTaskStatus.ppMediaTaskStatusInProgress)
{
    Thread.Sleep(100);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:14:59.920

PowerPoint 的 SaveCopyAs 方法似乎不支持 ppSaveAsWMV。[它在MSDN 页面](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.powerpoint._presentation.savecopyas.aspx)上明确说明了它支持的SaveCopyAs，其中不包括 ppSaveAsWMV 常量。

# c++ - 使用 std::make_shared 抽象类实例化时出错

> ID：13311580
> 
> 赞同：8
> 
> 时间：2012-11-09T16:04:10.503
> 
> 标签：c++, visual-studio-2010

我将省略相当多的代码，因为这些是一些相当大的对象，而我的问题实际上只涉及 std::make_shared 的操作。我在命名空间 SYNC 中有一个名为 D3D11Shader 的对象。这有一个名为的**静态**函数，

```
SYNC::D3D11Shader * SYNC::D3D11Shader::CreateInstance(const std::string & s) 
```

它将获取一个字符串索引并返回一个指向从 SYNC::D3D11Shader 派生的着色器实例的指针。有一次，我开始使用智能指针在包含所有这些着色器的向量中自动释放这些指针。然而，当我去做这件事时，

```
 std::shared_ptr<SYNC::D3D11Shader> shaderPtr;
 // ... verification of index and other initialization happens here
 // so i am unable to initialize it in it's constructor
 shaderPtr = std::make_shared<SYNC::D3D11Shader>(SYNC::D3D11Shader::CreateShader(shaderName)); 
```

编译器错误说我正在尝试在这一行中实例化 D3D11Shader 的实例，这是一个抽象类。我认为 make_shared 所做的只是返回 std::shared_ptr 的一个实例。CreateInstance 函数从不尝试创建此类的实例，只是派生和实现它的对象。在使用此函数和智能指针之前，我没有收到此错误。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T16:14:40.637

如果您不能使用 的构造函数`shared_ptr`，请使用其[`reset`成员函数](http://en.cppreference.com/w/cpp/memory/shared_ptr/reset)为其赋予新对象的所有权：

```
std::shared_ptr<SYNC::D3D11Shader> shaderPtr;
shaderPtr.reset(SYNC::D3D11Shader::CreateShader(shaderName)); 
```

`make_shared<T>`不适合这种情况的原因是它构造了一个 new `T`，将其参数转发给它的构造函数。但是，您已经构建了一个对象，因此您只想将所有权授予您的共享指针。

我强烈建议不要返回原始指针`CreateShader`。您依靠调用者`CreateShader`知道将其包装在智能指针中或调用`delete`它。您最好`unique_ptr`直接返回 a，将所有权传递给客户，然后他们可以根据需要从中`shared_ptr`获利。请参阅以下内容：

```
std::unique_ptr<SYNC::D3D11Shader> uniquePtr(SYNC::D3D11Shader::CreateShader(shaderName));
// If you want a shared_ptr:
std::shared_ptr<SYNC::D3D11Shader> sharedPtr(std::move(uniquePtr)); 
```

或者简单地说：

```
std::shared_ptr<SYNC::D3D11Shader> sharedPtr = SYNC::D3D11Shader::CreateShader(shaderName); 
```

如果您要使用智能指针，请使用它们。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:14:23.683

很简单：

```
shaderPtr.reset(SYNC::D3D11Shader::CreateShader(shaderName)); 
```

[您可以在此处查看](http://en.cppreference.com/w/cpp/memory/shared_ptr/reset)`reset`成员函数的不同变体。

# json - 使用带有编号数组的 mustache.js

> ID：13311586
> 
> 赞同：3
> 
> 时间：2012-11-09T16:04:29.717
> 
> 标签：json, mustache

我的 JSON 数据源如下所示：

```
{"1":{
    "name":"One",
    "color":"red"
},
{"2":{
    "name":"Two",
    "color":"green"
} 
```

我正在尝试使用 mustache.js 遍历这些记录。

```
var model = [{"1":{"name":"One","color":"red"},{"2":{"name":"Two","color":"green"}];
var template = '<ul> {{#.}} <li>{{name}} -- {{color}} </li> {{/.}} </ul>';
var html = Mustache.to_html(template, model);
console.log(html); 
```

但我不知道如何访问名称和颜色。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T04:42:47.377

如果你有这样的对象数组并使用一个简单的`{{#.}} <li>{{name}} -- {{color}} </li> {{/.}}`循环，那就更简单了：

```
var myCars = 
[
{"index":1,"name":"One", "color":"red" }},
{"index":2,"name":"Two", "color":"green" }}
]; 
```

另一种方法是构建一个迭代器来解开每个项目：

这里的例子：http: [//jsfiddle.net/9qMqW/2/](http://jsfiddle.net/9qMqW/2/)

```
var myCars = 
[
{"1":{ "name":"One", "color":"red" }},
{"2":{ "name":"Two", "color":"green" }}
];

// decorate the array with the iterator function
myCars.getNextCar = function(){ 
    !myCars.i ? myCars.i=1 : ++myCars.i;
    return(myCars[myCars.i-1][myCars.i])
};

var template = $("#carsTemplate").html();

$("#carsContainer").html(Mustache.render(template,{cars:myCars})); 
```

您的 HTML 将是：

```
<div id="carsContainer">

</div>

<script id="carsTemplate" type="text/plain">
    <ul> 
        {{#cars}} 
            {{#cars.getNextCar}}
            <li>{{name}} -- {{color}}</li>
            {{/cars.getNextCar}}
        {{/cars}}
    </ul>
</script> 
```

请注意，`getNextCar`它将在您的对象中创建一个迭代器的方法，因此如果您多次使用，则必须获得一个新的迭代器。或者只是按照其他海报的建议更改数组内容。

附带说明一下，您可能想看看[http://handlebarsjs.com/](http://handlebarsjs.com/)，它更健壮，语法更灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T10:27:23.150

```
var model = [ 
             {"1":{"name":"One","color":"red"}},
             {"2":{"name":"Two","color":"green"}}
            ];
var model4view = {dots:
    model.map(function(obj){
        var v; for (k in obj) {v = obj[k];}; return v; })};

template = "'<ul> {{#dots}} <li>{{name}} -- {{color}} </li> {{/dots}} </ul>'";
var html = Mustache.to_html(template, model4view); 
```

AFAIK，参考[mustache 手册页](http://mustache.github.io/mustache.5.html) **Sections**是允许**一次或多次**渲染文本块的标签类型，但**该部分的行为由键的值决定。**所以我们需要一个键和一个值，即列表。因此数组必须是键的值。

在上面的代码中，我利用[Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) 来获取一个`model4view`具有任意名称的**键**`dots`：(所以我们可以在 mustache 部分标记中使用这个名称`{{#dots}}`和一个由原始*编号数组的对象***值**组成的值项目值。例如：

 *```
{"dots":[
         {"name":"One","color":"red"},
         {"name":"Two","color":"green"}
        ]} 
```

**[编辑]** 如果您还需要输出与每个项目关联的数字，您可以使用 map 函数：

```
function(v){
    for (var property in v) { 
      o = v[property];
      o['id'] = property;
      return(o); 
  }}); 
```

这样，该数字可以在模板中用作`{{id}}`.

[这是我的**小提琴**](http://jsfiddle.net/rondinif/MdxNU/1/)，您可以在其中尝试解决解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T15:38:28.493

这是最简单的解决方案，如果您知道模型中的键总是看起来像 1,2,3,...：

```
var model = [{"1":{"name":"One","color":"red"}},{"2":{"name":"Two","color":"green"}}];
var i, len = model.length;
for (i=0; i<len; i++) {
  model[i] = model[i][i+1];
} 
```

请注意，您缺少模型上的结尾卷曲。*

# apache - apache和虚拟主机的问题

> ID：13311590
> 
> 赞同：0
> 
> 时间：2012-11-09T16:04:36.423
> 
> 标签：apache, debian, virtual, hosts

我有一个大问题。我有 Debian 操作系统的 VPS，并安装了 LAMP。全新安装。对于控制面板，我使用 Webmin。现在我尝试使用 webmin 在我的服务器上设置多个子域，例如：

```
downloads.my-domain.com
cpanel.my-domains.com
forum.my-domains.com 
```

但是接下来发生的问题是，虽然我没有使用虚拟主机，但当我使用 my-domain.com 访问它时一切正常，但是当我添加虚拟主机时，我无法访问它，但 my-domain.com 变得不可用，因为它重定向到我添加的虚拟主机。当我添加超过 2 个虚拟主机时，问题仍然存在。此外，当我尝试访问虚拟服务器（例如 downloads.my-domain.com）时，它会再次重定向到 cpanel.my-domains.com 当我删除虚拟主机时，对 my-domain.com 的访问成功...

我所知道的： - 这不是我的域名提供商的问题。我正确添加了子域并将主机记录添加到我的 VPS IP。- 我为每个虚拟主机添加了唯一的名称。- 没有两个相同的虚拟主机 - 每个虚拟主机都有自己的目录：例如：downloads.my-domain.com 有自己的 WWW 目录：/var/downloads

有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:29:30.913

我通过删除所有现有的虚拟主机并将这些代码手动添加到每个虚拟主机的 httpd.conf 来修复它：

```
<VirtualHost *:80>
        ServerAdmin admin@my-domain.com
        DocumentRoot "/var/www/download.my-domain.com"
        ErrorLog /var/www/error_download.log
        CustomLog /var/www/access_download.log common
        ServerName download.my-domain.com
        ServerAlias download
        <Directory "/var/www/download.my-domain.com">
                AllowOverride All
        </Directory>
</VirtualHost> 
```

因此，如果您有（或您有）同样的问题，只需编辑这些行以匹配您自己的标准并使用它。

您可以使用我刚刚创建的编辑器/生成器来自定义此代码。 [http://server2.elite7hackers.us/apps/vhosts/](http://server2.elite7hackers.us/apps/vhosts/)

# c# - 表单背景透明但仍有点击事件

> ID：13311592
> 
> 赞同：0
> 
> 时间：2012-11-09T16:04:41.090
> 
> 标签：c#, winforms, mono

我一直在努力解决这是否可能。

基本上我想要的是有一个正常的边框但具有透明背景的表单。在这个区域中，我想要实时显示背后的内容（很可能是视频提要），我可以捕获点击事件以在我的过度表单上显示更多信息。

目前我已经尝试使用 Form.TransparencyKey 和 BackColor 但是我在 from 的透明部分丢失了点击事件。我还尝试使用 99% 透明的 png 作为 BackgroundImage，但这只会给出深灰色背景。

我已经注意到，如果我画到间隙（即一条简单的线），我可以捕获这些点击事件，而不是透明部分。有没有办法我可以先在油漆上画一个半透明的矩形？

如果可能的话，我希望它是单声道兼容的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:49:15.373

由于事实证明这是不可能的，我最终将第二个动态生成的表格浮动在顶部，不透明度设置为 0.01。然后，我使用主窗体上的 Resize 和 LocationChanged 事件根据需要调整和移动覆盖窗体。然后，我只需要根据需要处理覆盖表单单击事件即可。

```
public MainFrom()
    {
        InitializeComponent();

        f = new Form();
        f.Size = panel1.Size;
        f.FormBorderStyle = FormBorderStyle.None;
        f.BackColor = Color.Black;
        f.Opacity = 0.01;
        f.ShowInTaskbar = false;
        f.Show(this);

        f.Click += new System.EventHandler(this.UserClicked);
    } 
```

然后，此代码调整覆盖表单的大小以考虑主表单边框：

```
private void SetLocation()
        {
            // These next 2 lines calculate the width of the border 
            // and the title bar and then use these to off set the floating
            // forms location correctly.
            int xOffset = (this.Width - this.ClientSize.Width) / 2;
            int yOffset= this.Height - this.ClientSize.Height - xOffset;
            int x = this.Location.X + panel1.Location.X + xOffset;
            int y = this.Location.Y + panel1.Location.Y + yOffset;
            f.Location = new Point(x, y);
        } 
```

根据 MoMa 工具，这是 100% 兼容单声道的，并且代码可以按预期在 MonoDevelop 中编译。但是，如果我运行它，我会看到一个空引用异常，我在加载时在 MS .NET 中看不到，这可能是可以修复的，但我尚未对此进行研究。

# symfony - 使用 SonataAdminBundle。在两步相关实体上配置过滤器

> ID：13311600
> 
> 赞同：8
> 
> 时间：2012-11-09T16:04:56.650
> 
> 标签：symfony, sonata-admin

我想知道天气是可能的，以及如何在 Symfony 2 中使用 SonataAdminBundle 为列表视图配置过滤器，如下所示

假设我有实体订单，指向实体用户，指向实体公司。我想配置过滤器，既可以按用户过滤，也可以按公司（用户的公司）过滤。第一个是直截了当的。第二个是我试图澄清的。

在 OrderAdmin 类中，我将 configureDatagridFilters 覆盖为：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
     $datagridMapper
         ->add('created_at')
         //... some other filters on Order fields, as usual

         // the filter on User, provided 'user', no ploblem
         ->add('user')

         // and the filter by Company 
         ->add('user.company') // this doesn't work, of course
    ;
} 
```

公司过滤器的语法受到 Sonta 文档的启发：[http ://sonata-project.org/bundles/doctrine-orm-admin/2-0/doc/reference/filter_field_definition.html](http://sonata-project.org/bundles/doctrine-orm-admin/2-0/doc/reference/filter_field_definition.html)

不适用于我尝试完成的内容，但找不到在哪里查看。

希望有人对此有所了解。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T15:27:45.633

最后，我找到了由另一个问题引导的答案：[如何在 SonataAdmin 中创建自定义 DataGrid 过滤器，](https://stackoverflow.com/questions/10224280/how-can-i-create-a-custom-datagrid-filter-in-sonataadmin)并仔细阅读我粘贴在问题中的奏鸣曲管理文档链接。

如果有人遇到这个问题并采取前面的例子：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
   $datagridMapper

      //... whatever filter

      // and the filter by Company 

      ->add('company', 'doctrine_orm_callback', array(
            'callback'   => array($this, 'callbackFilterCompany'),
            'field_type' => 'checkbox'
            ),
    'choice', 
    array('choices' => $this -> getCompanyChoices())
;
} 
```

其中 getCompanyChoices 方法检索公司 ID => 公司名称的关联数组（例如）。而callbackFilterCompany方法如下

```
public function callbackFilterCompany ($queryBuilder, $alias, $field, $value)
{
    if(!is_array($value) or !array_key_exists('value', $value) 
        or empty($value['value'])){

        return;

    }

    $queryBuilder
    ->leftJoin(sprintf('%s.user', $alias), 'u')
    ->leftJoin('u.company', 'c')
    ->andWhere('c.id = :id')
    ->setParameter('id', $value['value'])
    ;

    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-16T09:32:15.647

它在官方网站上有很好的记录：http: [//sonata-project.org/bundles/doctrine-orm-admin/master/doc/reference/filter_field_definition.html](http://sonata-project.org/bundles/doctrine-orm-admin/master/doc/reference/filter_field_definition.html)

# spring - @Autowired beans 在 spring 3.1 中使用 beans:profiles 后未加载

> ID：13311603
> 
> 赞同：1
> 
> 时间：2012-11-09T16:05:03.547
> 
> 标签：spring, spring-mvc, spring-3, autowired

我`beans:profiles`在我的xml中使用过这样的：

```
 <beans profile="dev">
        <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
            <property name="driverClassName" value="${jdbc.driverClassName}" />
            <property name="url" value="${jdbc.internal.url}" />
            <property name="username" value="${jdbc.internal.username}" />
        </bean>
   </beans> 
```

我`spring.active.profiles`在 web.xml 中设置了：

```
<servlet>
    <servlet-name>myapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/myapp-servlet.xml</param-value>
    </init-param>
    <init-param>
        <param-name>spring.profiles.active</param-name>
        <param-value>dev</param-value>
    </init-param>
</servlet> 
```

我的代码结构是这样的：

```
//controller
@Controller 
public class MyController {
  @Autowired
  private MyService myService;
  ....
}

//service implementation
@Service("myservice")
public class MyServiceImpl implements MyService {
  @Autowired
  DBService dbService;
} 

//db service
@Service("dbservice)
public class DBServiceImpl implements DbService {
  @Autowired
  public void setDataSource (Datasource ds) { 
    this.jdbcTemplate = new JdbcTemplate(ds);
  }
} 
```

错误：

> 创建名为“myController”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 MyService MyController.myService；嵌套异常是 org.springframework.beans.factory.BeanCreationException：
> 
> 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“dbService”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配方法：public void DBServiceImpl.setDataSource(javax.sql.DataSource); 嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [javax.sql.DataSource] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注释：org.springframework.beans.factory.support 的 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) 中的 {}。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:18:00.220

My guess it that you are using profile in DispatcherServlet context, while DataSource is likely located in the root application context.

See [Difference between applicationContext.xml and spring-servlet.xml in Spring Framework](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)

**update**: try using context-params (taken from [here](http://java.dzone.com/articles/spring-31-environment-profiles)):

```
<context-param>
<param-name>spring.profiles.active</param-name>
<param-value>dev</param-value>
</context-param> 
```

# for-loop - 从Windows批处理中的二进制文件中提取RegExp字符串

> ID：13311607
> 
> 赞同：2
> 
> 时间：2012-11-09T16:05:15.177
> 
> 标签：for-loop, batch-file, binary, cmd, findstr

一个小问题一直困扰着我几天。我正在尝试从 *.exe 二进制文件中提取我可以用正则表达式定义的字符串，例如“1.01.01.00T123”这样的文本到环境变量中以供进一步使用。
我找到了字符串

```
findstr /i [0-9]\.[0-9][0-9]\.[0-9][0-9]\.[0-9][0-9][T][0-9][0-9][0-9] name.exe>outp.bin 
```

现在它是我的小一点二进制字符串，可能是 200 字节。然后我试图在“for / f”中使用 findstr 的输出，但是我应该为二进制文件使用什么分隔符，没有任何保证。甚至点和空白也可以来来去去。
就像是：

```
for /f "tokens=1,2,3,4* delims=^." %%a in ('findstr /i [0-9]\.[0-9][0-9]\.[0-9][0-9]\.[0-9][0-9]T[0-9][0-9][0-9] name.exe') do (
echo %%a
echo %%b
echo %%c
echo %%d
) 
```

它只工作了一半——第一个太长了，最后一部分“xxTxxx”不是这个定义的标记。此外，点也可能出现在二进制文件中，而不仅仅是在我的字符串中。
我想到了通过始终剪切第一个字节来缩短循环中的 outp.bin 之类的方法，然后检查我的字符串是否位于 outp.bin 的开头。但是还没有找到方法来做到这一点。可能吗？
有没有什么办法，将我的正则表达式结果复制到一个变量中？
我希望错过了标准命令外壳中正则表达式的一些神奇命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:28:15.293

使用纯批处理几乎不可能完成您想要的操作，因为您的二进制文件可能包含 nul 字节并且批处理无法处理 null 字节。但是使用 VBS 或 JScript 和正则表达式可以很容易地解决这个问题。

这是一个非常粗略的 VBS 解决方案，还有很大的改进空间。但它有效。

**findStr.vbs**

```
Set myRegExp = New RegExp
myRegExp.IgnoreCase = True
myRegExp.Global = True
myRegExp.Pattern = "\d\.\d\d\.\d\d\.\d\dT\d\d\d"
Set matches = myRegExp.Execute(WScript.StdIn.ReadAll())
For Each match In matches
  WScript.StdOut.WriteLine(match.value)
Next 
```

使用 CSCRIPT 调用脚本并将输入重定向到您的 exe 文件。

```
<name.exe cscript //nologo findStr.vbs 
```

您可以使用批处理通过 FOR /F 处理结果。

```
for /f "delims=" %%A in ('^<name.exe cscript //nologo findStr.vbs') do echo %%A 
```

***更新 - 2015-08-26***

[您可以使用JREPL.BAT](http://www.dostips.com/forum/viewtopic.php?f=3&t=6044)轻松解决这个问题——这是一个纯脚本的正则表达式处理实用程序（混合 JScript/batch），可以在 XP 以后的任何 Windows 机器上本地运行。完整的文档嵌入在脚本中。

下面简单列出了在文件中找到的值。请注意，该`/M`选项是必需的，因为 exe 中可能存在空字节。

```
call jrepl "\d\.\d\d\.\d\d\.\d\dT\d\d\d" $0 /jmatch /m /f name.exe 
```

要捕获变量中的值（如果有多次出现，则为最后一个值）：

```
for %%A in (
  'jrepl "\d\.\d\d\.\d\d\.\d\dT\d\d\d" $0 /jmatch /m /f name.exe'
) do set "str=%%A" 
```

# javascript - 背景图像未出现在 Highcharts 中

> ID：13311610
> 
> 赞同：1
> 
> 时间：2012-11-09T16:05:18.153
> 
> 标签：javascript, html, css, graph, highcharts

基本上，这是一个巨大的基于 Web 服务的 Web 应用程序，其中可以显示数百个图形。我刚刚参与了这个项目，需要在这些动态生成的图表上实现一个图表图例。

我知道我的图像已加载，因为当我输入错误/随机路径时出现错误：

![在此处输入图像描述](../Images/faf93019b8334fae95317430bb6fa2b9.png)

目前，来自 CSS 的文本显示，但无法在其位置输入图像，因为它似乎只允许一组标签。我已经尝试将它作为 img 放置在显示器中以及更改 Z 索引和位置，但它只是不显示任何内容，除了文本。

![在此处输入图像描述](../Images/567c5ed5d55abeebbf6c83bc71c9162d.png)

这是相关的CSS（我已经尝试过使用`background`而不是`backgroundImage`顺便说一句）：

```
credits: {
    enabled: true,
    text: 'Highcharts.com',
    href: 'http://www.highcharts.com',
    position: {
        align: 'right',
        x: -10,
        verticalAlign: 'bottom',
        y: -5
    },
    style: {
        cursor: 'pointer',
        color: '#909090',
        fontSize: '10px',
        backgroundImage: 'url("/image/example")'
    }   
} 
```

以及可能相关的 JavaScript：

```
if (credits.enabled && !chart.credits) {
        creditsHref = credits.href;
    chart.credits = renderer.text(
        credits.text,
        0,
    0
    )
    .on('click', function () {
        if (creditsHref) {
            location.href = creditsHref;
        }
    })
    .attr({
        align: credits.position.align,
        zIndex: 8
    })
    .css(credits.style)
    .add()
    .align(credits.position);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:10:05.427

更新 2：

首先，您需要更改数字以适应您的情况（宽度、高度、x、y 等）。看起来您也更改了图表类型。要重置回样条图，请使用以下命令：

```
 chart: {
       renderTo: 'your-container-id', // chart div id
       type: 'spline', // your chart type
.... 
```

接下来，我们需要通过设置宽度来确保图表不会在浏览器调整大小时调整大小：`<div id="your-container-id" style="width:1000px;"></div>`或设置为所需的任何大小。

然后，我们需要设置右边距以确保右边有负空间。

```
chart: {
 renderTo: 'your-container-id', // chart div id
 type: 'spline', // your chart type
 margin: [ 50, 150, 100, 80 ], // top, right, bottom, left. leaves 150px negative space on right side of chart. adjust as needed
.... 
```

最后，我们将图像渲染到图表的右侧：

```
chart: {
 renderTo: 'your-container-id', // chart div id
 type: 'spline', // your chart type
 margin: [ 50, 150, 100, 80 ], // top, right, bottom, left. leaves 150px negative space on right side of chart. adjust as needed
 events: {
   load: function() {
     this.renderer.image('http://upload.wikimedia.org/wikipedia/commons/e/ec/Happy_smiley_face.png', 900, 105, 100, 100).add(); // x=900px to move image off chart (approx div width minus right margin) adjust as needed
       }
     }   
.... 
```

如果您需要调整图表大小，那么我们需要编写一个函数来在调整大小时重新定位图形。但那是另一章。

如果我仍然在错误的范围内，请详细说明期望的结果。

更新 1：

您不能将背景添加到图表的学分部分。我通常禁用它，除非我们用我们的公司名称和链接标记它。您需要的是使用图例功能，或者如果这不是您需要的，请使用宽边距的自定义图像。

看看我从 highcharts 网站上截取的这个简单的小提琴，并对其进行了修改以适应我试图解释的内容：[jsFiddle Link](http://jsfiddle.net/R8ACn/2/)
好的，正在发生的事情是：
将标准图例添加到具有隐藏/显示功能的图表中：

```
 legend: {
  layout: 'vertical', // stacked legend. can also be horizontal and moved to bottom for a clean linear legend
  backgroundColor: '#FFFFFF',
  align: 'left',
  verticalAlign: 'top',
  x: 380, // move to right side of chart
  y: 200, // drop down 200px
  floating: true, // enabled for positioning
  shadow: true
 }, 
```

一直向右添加背景图像：

```
 chart: {
   renderTo: 'container',
   type: 'column',
   margin: [ 50, 150, 100, 80 ], // wide right margin to allow image outside chart
   events: {
     load: function() {
        this.renderer.image('http://upload.wikimedia.org/wikipedia/commons/e/ec/Happy_smiley_face.png', 400, 105, 100, 100).add(); // x=400px to move image off chart
   }
 }   
} 
```

注意：我将图表容器的宽度设置为 500 像素。

我希望这可以解决一些问题。

原始答案：

我上周刚刚将我们所有的公司图表更新为 highcharts .. 用这个作为你的背景图片

```
chart: {
            renderTo: 'container',   // where does the chart go?
            type: 'column',   // what kind of chart is it?
            margin: [ 50, 50, 100, 80 ],   // margins between outer edge and plot area
            events: {
                load: function() {
                    this.renderer.image('http://www.domain.com/images/logo.jpg', 150, 105, 545, 141).add();  // add image(url, x, y, w, h)
                }
            }
        }, 
```

图像参数如下：`image(url, x, y, width, height);`

# c# - 信号量和多线程 Process.Start 的问题

> ID：13311611
> 
> 赞同：2
> 
> 时间：2012-11-09T16:05:21.070
> 
> 标签：c#, multithreading, semaphore

不确定我下面的代码有什么问题，但没有按预期工作。设计是允许用户从 ListBox 中选择任意数量的输入文件，然后单击“执行”按钮以使用不同的输入文件启动相同的可执行文件。我将添加一个控件以允许用户指定并发进程的数量，但现在我将硬编码为 3 以进行测试。我的期望是每个可执行文件都将按顺序开始（尽管我知道它们可能不会以这种方式完成）并且一次只会执行 3 个（尽管这个数字最终将由用户输入控件控制）。我想为调用进程的函数增加额外的功能，即任务优先级，返回退出代码，但现在我无法让基本功能正常工作。我尝试了许多代码变体 已在此站点和网络上的其他站点上找到，但仍无法使其正常工作。这是当前版本：

```
 private void btnParserExe_Click(object sender, EventArgs e)
    {
        Pool = new Semaphore(3,3);  //Pool above declared as class variable 
        string ExeName = "C:\\Program Files (x86)\\Norman\\bin\\OC2.exe";
        string Args;
        string ArgDir = this.dirListBox1.Path + "\\";

        for (int i = 0; i < this.fileListBox1.Items.Count; i++)
        {
            if (this.fileListBox1.GetSelected(i) == true)
            {
                Args = "-i " + this.fileListBox1.get_Items(i) + " -r -c -noerr";
                Thread thread = new Thread(() => DoWork(ArgDir, ExeName, Args, "3"));
                thread.Start();
            }
        }
    }

    private static void DoWork(string WorkingDir, string exefile, string parameters, string priority)
    {
        Pool.WaitOne();

        Process exeProcess = new Process();
        int exitCode;

        try
        {
            exeProcess.StartInfo.FileName = exefile;
            exeProcess.StartInfo.Arguments = parameters;
            exeProcess.StartInfo.WorkingDirectory = WorkingDir;
            exeProcess.Start();
            exeProcess.WaitForExit();
        }
        catch (Exception ex)
        {
            MessageBox.Show("ERROR EXECUTING: " + parameters + " " + ex.Message);
        }
        finally
        {
            exitCode = exeProcess.ExitCode;
        }
        Pool.Release();
    }

} 
```

我遇到的三个主要问题：

1.  作业并不总是以正确的顺序开始（ListBox 中较低的某些项目在较高的其他项目之前启动）
2.  有时启动的过程似乎停止了，好像它已经完成但窗口仍然在屏幕上。这是一个非常一致的问题，但并不总是相同的任务/输入文件会停止。有时，在先前的测试中运行良好的会停止运行，反之亦然。
3.  我的笔记本电脑在测试这部分代码时重新启动？？

任何反馈、链接、示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:23:10.640

1.  无法保证线程实际启动的顺序。很有可能两个线程（在`Thread.Start()`某种意义上）彼此快速连续启动，可能会经历“第二个”线程实际上在“第一个”之前开始执行。如果有序执行很重要，您将需要序列化它们的执行（这似乎消除了启动多个线程的需要。）

2.  我很好奇您是否确定所有进程都以正确的输入文件名启动。在我看来，您的委托使用情况实际上可能会以两个启动同一个文件而告终，我想知道这是否会导致您的第二个问题。

3.  多常？您的计算机此时是否在执行其他操作？您是否收到任何消息、蓝屏死机或任何形式的信息？这无论如何都不正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:24:11.213

.Net 4.0 现在为简单的并行任务提供了一些新工具：http: [//msdn.microsoft.com/en-us/library/dd987838 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd987838(v=vs.100).aspx)

```
 string ExeName = "C:\\Program Files (x86)\\Norman\\bin\\OC2.exe";
    string Args;
    string ArgDir = "\\";

    //Simulated listbox items here:
    string[] filelist = new string[] {"file1", "file2"};

    System.Threading.Tasks.ParallelOptions options = new System.Threading.Tasks.ParallelOptions();
    options.MaxDegreeOfParallelism = 3;
    System.Threading.Tasks.Parallel.For(0, 10, options, (i => {

        Args = "-i " + filelist[i] + " -r -c -noerr";
        DoWork(ArgDir, ExeName, Args, "3");
    }
        ));
} 
```

通过使用 Parallel.For，您可以管理并发，并且任务应该按顺序启动。

在 .Net 2.0 中，您可以使用一些 BackgroundWorkers 和一个简单的控制器方法。就像是：

```
Stack<string> filelist = new Stack<string>() {"file1", "file2"};

private void Setup()
{

    System.ComponentModel.BackgroundWorker backgroundWorker1;
    System.ComponentModel.BackgroundWorker backgroundWorker2;

    backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork);
    backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker_RunWorkerCompleted);

    backgroundWorker2.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork);
    backgroundWorker2.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker_RunWorkerCompleted);
}

private void Execute()
{
    backgroundWorker1.DoWork();
    backgroundWorker2.DoWork();
}

private string GetNextItem()
{
    //this is a crude controller
    return filelist.Pop();
}

private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{   
    // Get the BackgroundWorker that raised this event.
    BackgroundWorker worker = sender as BackgroundWorker;
    string nextFile = GetNextItem();
    //Some simple check here to see if there were any items left or quit
    ....
    //Now do work
    Args = "-i " + nextFile  + " -r -c -noerr";
    DoWork(ArgDir, ExeName, Args, "3");

}

private void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{   
    // Check for errors...
    ...

    // See if more work to do
    if (filelist.Count > 0)
    {
        //Repeat task
        BackgroundWorker worker = sender as BackgroundWorker;
        worker.DoWork();
    }
} 
```

使用 BackgroundWorkers，您还可以拥有独立的进度条等。

代码未经测试。

# domdocument - DOMDocument::replaceChild() 响应结果为 500（内部服务器错误）

> ID：13311614
> 
> 赞同：0
> 
> 时间：2012-11-09T16:05:24.640
> 
> 标签：domdocument, php

我有个问题。PHP 文件响应 500 错误。无法理解是什么问题。PHP 错误消息是：

> 致命错误：未捕获的异常“DOMException”和消息“未找到错误”

代码如下：

```
$dom = new domDocument;
$dom->preserveWhiteSpace = false;
$dom->loadHTML($cont);

$links  = $dom->getElementsByTagName('a');
$images = $dom->getElementsByTagName('img');
$divs   = $dom->getElementsByTagName('div');

foreach ($links as $link)
{
    $link->setAttribute('target','_blank');
}

foreach ($images as $image)
{
    $image->setAttribute('style','max-width:405px');
}

foreach ($divs as $div)
{
    $pnode = $dom->createElement('p', $div->nodeValue);
    $dom->replaceChild($pnode, $div); //the problem string
} 
```

更新：如果问题字符串被注释，则没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:26:33.437

代码似乎没问题。检查您是否在`phpinfo();`. 添加

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

到您的代码或[启用 .htaccess 中显示的 php 错误](https://www.google.cz/search?&q=enable%20php%20error%20showing%20htaccess&oq=enable%20php%20error%20showing%20htaccess)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:10:49.037

感谢[air4x](https://stackoverflow.com/users/651354/air4x)。

replaceChildren 只查找一层。在我的情况下，它正在寻找和根中的元素。

解决方案如下：

```
 $div->parentNode->replaceChild($pnode, $div); 
```

# javascript - html5/javascript iframe

> ID：13311620
> 
> 赞同：0
> 
> 时间：2012-11-09T16:05:41.537
> 
> 标签：javascript, html, iframe

在我的 html 文件中，我有一个 iframe，其 src 是一个 txt 文件，但是当我尝试通过将其放入数组中来编辑或移动其中的任何内容时，它说它是只读的，我似乎找不到任何可以做到的东西写信给它。

这就是它在 html 中的调用方式：

```
<iframe id="words" src="words.txt" width=10 height=10 style="display:none"></iframe> 
```

然后在javascript中：

```
var w = document.getElementById("words");
var c = w.contentDocument.body.textContent;
var L = c.split("\n"); 
```

# android - 在 phonegap 构建上签名 android 应用程序时出错

> ID：13311625
> 
> 赞同：0
> 
> 时间：2012-11-09T16:05:50.290
> 
> 标签：android, cordova

我正在尝试在 phonegap 构建中签署一个 android 应用程序。

我正在使用以下命令成功生成密钥库文件，但是当我上传到 phonegap build 时，出现以下**错误**：

> 错误 - 无效的密钥库格式

这是我在 Windows 上使用的命令：

> "C:\Program Files (x86)\Java\jre7\bin\keytool" -genkeypair -alias my_alias_name -keystore my_keystore_name.keystore -keypass ****** -storepass ****** -validity 10000 -keyalg RSA -keysize 2048 -storetype pkcs12 -v

谁能指出我在哪里出错的正确方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:47:52.393

原来是 -storetype pkcs12 标志。当我删除它并使用默认值时，它工作得很好。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:20:18.590

当我过去遇到此错误时，是因为别名/密码问题。要对其进行测试，请尝试生成一个新的别名/密码并用它为您的 APK 签名。如果它有效，那么您已经隔离了您的问题。

# java - 从字符串中命名一个对象

> ID：13311628
> 
> 赞同：0
> 
> 时间：2012-11-09T16:05:53.173
> 
> 标签：java, string, variables

在过去的几个小时里，我一直在尝试查看 java 中是否有可能我想使用字符串变量来命名另一个对象变量，如下所示：

```
String s = newJpanel;
s = new JPanel(); 
```

然后将新创建的 Jpanel 现在称为 newJpanel。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:02:14.160

显然，您不能在不从编译器产生类型不匹配错误的情况下将`String`变量分配给 a。`JPanel`您可以使用：

```
Map<String, JPanel> map = new HashMap<>();
JPanel panel = ...
map.put("SomeText", panel); 
```

# memcached - Couchbase 服务器 - 如果一个节点停止，则无法执行获取或设置

> ID：13311637
> 
> 赞同：0
> 
> 时间：2012-11-09T16:06:22.750
> 
> 标签：memcached, couchbase

我在两个节点（Windows 2008 R2）上设置了 Couchbase 1.8 集群。

1）打开两台服务器上的所有必要端口，如下所述：http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-network-ports.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-network-ports.html)

2) 我做了一个简单的设置，最初在一个新集群上创建节点 A (172.30.75.53)。将 IPAddress 更改为服务器的静态 IPAddress，如下所述：http: [//www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-bestpractice-cloud-ip.html) 使用默认的 Couchbase 存储桶创建。

3) 然后在节点 B (172.30.75.55) 上安装 Couchbase。将 IPAddress 更改为服务器的静态 IPAddress。

4) 回到节点 A，我将节点 B 添加到集群中。

5) 在 Couchbase Web 控制台中进行了初始重新平衡。

6) 在 Couchbase 控制台中，我可以看到两个节点启动并运行。

我创建了一个简单的应用程序 C# 示例应用程序进行测试，如下所示：

在指向节点 A 的配置文件中

```
var client = new CouchbaseClient();
var setResult = client.ExecuteStore(StoreMode.Set, "someKey", "someData", new    TimeSpan(7, 0, 0, 0)); 
var resultGet = client.ExecuteGet<string>("someKey"); 
```

然后可以毫无问题地进行获取和设置（如预期的那样）。

然后在我的配置文件中，更改为指向节点 B。

然后可以执行如下获取（如预期）： var resultGet = client.ExecuteGet("someKey");

在节点 A 上，通过运行以下命令关闭 CouchBase 服务：service_stop.bat

由于我的测试应用程序仍然指向节点 B，仍然可以获取和设置（如预期的那样）。

在节点 A 上，通过运行：service_start.bat 启动 Couchbase 服务 在节点 B 上，通过运行：service_stop.bat 关闭 CouchBase 服务

然后在我的配置文件中，更改为指向节点 A。

现在，当连接到节点 A 时尝试执行如下获取和设置时： var setResult = client.ExecuteStore(StoreMode.Set, "someKey", "someData", new TimeSpan(7, 0, 0, 0)); var resultGet = client.ExecuteGet("someKey");

得到如下错误：

- 存储操作失败，详情参见 InnerResult 或 StatusCode” - 执行操作失败 -StatusCode : 0

失败。有关详细信息，请参阅 InnerException 或 StatusCode" StatusCode : Null

因此得出结论：

a) 可以在节点 A 和节点 B 正在运行时执行 Get 和 Set。（客户端连接到节点 A 或节点 B）

b) 可以在节点 A 停止且节点 B 运行的情况下执行获取和设置。（客户端连接到节点 B）

c) 无法在节点 A 运行且节点 B 停止的情况下执行获取和设置。（客户端连接到节点 A）

有任何想法吗？

谢谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:39:27.540

您似乎正在为您的测试在单个键上执行单个获取/设置。如果是这种情况，那么正在发生的事情是该密钥位于节点 B 上，因此当您停止节点 B 时，找不到该密钥。使用 Couchbase，当节点关闭时，将无法访问该节点的数据，直到您对该节点进行故障转移。如果您在生产环境中运行，如果节点 B 出现故障，您会做的就是让该节点故障，然后一旦您解决了该节点遇到的任何问题，您就可以将其添加回来并重新平衡。

# c++ - C ++函数返回指针，为什么会这样？

> ID：13311639
> 
> 赞同：3
> 
> 时间：2012-11-09T15:55:47.417
> 
> 标签：c++, memory, pointers

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

所以这是一个简单的c++函数。它的作用是将一个字符数组作为其参数和一个整数 n，然后创建一个新的字符数组，其中只有数组的 n 个元素。

```
char * cutString(char * ch , int n){

  char * p = new char[n];
  int i ;
  for(i = 0 ; i < n ; i++)
         p[i] = ch[i];
  while(i <= n ){
    p[i++] = '\0';
  }
  return p ;

} 
```

这工作得很好，但如果我改变`char * p = new char[n];`我会`char p[n];`看到有趣的角色。怎么了？前者有什么区别？另外，p 是一个临时变量；函数如何成功返回？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T16:09:47.127

`char *p = new char[n]`*在堆上*动态分配内存。这种内存的生命周期不受任何函数的约束，并且它存在直到它被释放（使用`delete[]`）。因此，返回一个指向它的指针是完全有效的。

`char p[n]`另一方面，在*stack*上分配内存，其生命周期绑定到定义它的函数。一旦该函数返回，对内存的任何引用都将变为无效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T16:09:33.057

当您将代码更改为：

```
char p[n]; 
```

...然后 return `p`，您将返回一个指向本地范围变量的指针。函数返回后，`p`不再存在。总而言之，您正在唤起未定义的行为，而当您这样做时，您的程序格式不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:10:26.437

因为`new char[n]`会`alloc`在堆上吃掉内存（以后别忘了`delete[]`）

而是`char p[n];`一个静态数组，它驻留在堆栈上，在函数返回后自动重用

如果从函数返回对它的引用，则返回指向 unues 内存的指针，并且引用未使用的内存是标准的未定义行为

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T16:10:43.650

这是动态分配和自动分配内存之间的区别。`char * p = new char[n];`是动态分配，这意味着内存在您删除之前一直有效。另一方面，`char p[n];`严格来说是不合法的 C++，但是对于您使用的编译器，它是一种自动分配的形式，这意味着当您退出函数时内存不再有效。这就是为什么你会看到有趣的角色。

# html - 如何更改 Blogger 标题的 z-index

> ID：13311643
> 
> 赞同：0
> 
> 时间：2012-11-09T16:06:59.043
> 
> 标签：html, css, header, z-index, blogger

这是我刚开始使用 Blogger 的博客的链接：[我的博客](http://will-whitehead.blogspot.co.uk/)

我的问题是，当我使用“添加背景图像”功能时，包含“Will Whitehead - Advertising Student”字样的标题也被图像覆盖，而我希望它保持白色。我猜如果我使用 z-index 将标题放在最前面，它不会被图像覆盖。

问题是，我不知道标头的 ID。我使用 chrome 上的“检查元素”功能查看了标题，它被称为“div.header-bar”。

有人可以告诉我需要编写什么代码才能成功更改标题的 z-index 吗？

我真的很感激这方面的任何帮助。

提前致谢，

威尔·W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:14:10.773

这应该将标题放在前面：

```
div.header-bar{
  position: relative;
  z-index: 999;
} 
```

将其放在 css 文件中引用任何样式之后`.header-bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:15:19.013

您需要确保您`div.header-bar`有一个位置值，否则 z-index 将不起作用。

```
div.header-bar {
  position: relative;
  z-index: 99;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:15:34.893

将此添加到 CSS 中。应该适用于您的问题。

```
.header-bar { position: relative; z-index:9999; } 
```

如果不是，可能是因为图像覆盖在 header-bar 的父容器之上。在这种情况下，您必须设置：

```
#header-container { position: relative; z-index:9999; } 
```

# javascript - 使用 jQuery 的 $(this) 在函数内抛出错误

> ID：13311648
> 
> 赞同：0
> 
> 时间：2012-11-09T16:07:18.463
> 
> 标签：javascript, jquery, function

> **可能重复：**
> [jquery 将 $(this) 传递给其他函数](https://stackoverflow.com/questions/2036647/jquery-passing-this-to-other-functions)

我正在编写一个 Javascript/jQuery 函数（尚未重构），但使用`$(this)`. 解释起来有点困难，所以我将添加代码，希望它会变得更加清晰：

```
var accordion = 'div.accordionContent';
var accordButton = 'div.accordionButton';
var accordClosedArrow = 'url(/public/img/accordion-closed-arrow-';
var accordOpenArrow = 'url(/public/img/accordion-open-arrow-';
$(accordion).hide();
var accordFunc = function(arrowColor){
    var img;
    if ($(this).next(accordion).is(':visible')) {
        img = accordClosedArrow + arrowColor + '.png)';
    } 
    else {
        img = accordOpenArrow + arrowColor + '.png)';
    }

    // these lines throw errors because of $(this)
    $(this).css({backgroundImage:img}).next().slideToggle('slow').siblings(accordion)
        .slideUp();
    $(this).siblings()
        .css({backgroundImage:accordClosedArrow + arrowColor + '.png)' + 'no-repeat'});
    };

    $(accordButton).live('click',function(){
        accordFunc('blue');
    });

    $(accordButton + 'B').live('click',function(){
        accordFunc('orange');
    }); 
```

不知道为什么传递`$(this)`会导致 Chrome 控制台抛出错误：

> **未捕获的类型错误：无法读取未定义的属性“firstChild”**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:08:55.803

替换`accordFunc('blue');`为`accordFunc.call(this, 'blue');`对该函数的其他调用并执行同样的操作。

当您调用另一个函数时，该`this`值不会保留，因此`accordFunc`它内部指向窗口对象或 null（如果严格模式处于活动状态）。另一种选择是`this`作为普通参数传递并更改函数定义，例如`function accordFunc(elem, arrowColor)`使用和使用`elem`，而不是`this`在该函数内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:12:25.190

当你在 JS 的方法中调用函数时，作用域`this`变回窗口。这是一种奇怪的行为，但不幸的是它就是这样工作的！尝试将所需的上下文作为参数传递给方法，如下所示：

```
 var accordFunc = function(ctx, arrowColor){
          var img;
          if ($(ctx).next(accordion).is(':visible')) {
                  img = accordClosedArrow + arrowColor + '.png)';
          } 
          else {
              img = accordOpenArrow + arrowColor + '.png)';
          }

          // these lines throw errors because of $(this)    
          $(ctx).css({backgroundImage:img}).next().slideToggle('slow').siblings(accordion).slideUp();
          $(ctx).siblings().css({backgroundImage:accordClosedArrow + arrowColor + '.png)'     + 'no-repeat'});
        };

        $(accordButton).live('click',function(){
            accordFunc(this, 'blue');
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:16:20.117

一个选项是让accordFunc 返回将被绑定的函数，并对颜色使用闭包：

```
var accordFunc = function(arrowColor){
    return function(){
        var img;
        if ($(this).next(accordion).is(':visible')) {
            img = accordClosedArrow + arrowColor + '.png)';
        } 
        else {
            img = accordOpenArrow + arrowColor + '.png)';
        }

        // these lines throw errors because of $(this)
        $(this).css({backgroundImage:img}).next().slideToggle('slow').siblings(accordion)
        .slideUp();
        $(this).siblings()
            .css({backgroundImage:accordClosedArrow + arrowColor + '.png)' + 'no-repeat'});
    }
}; 
```

然后调用：

```
$(accordButton + 'B').live('click', accordFunc('orange')); 
```

# actionscript-3 - AS3 - 限制鼠标点击次数

> ID：13311649
> 
> 赞同：3
> 
> 时间：2012-11-09T16:07:20.897
> 
> 标签：actionscript-3, mouseevent, dynamic-arrays

我是编程新手！不要介意 AS3 并且在尝试将特定数量的点击设置为一组 MovieClips 时会遇到问题。这听起来可能不正确，所以我会让你确切地知道我想要做什么。

我目前正在尝试创建一个战舰类型的游戏，并为玩家网格和计算机/AI 网格设置和网格图块阵列。当我单击播放器网格中的一个网格图块时，我正在更改 MovieClip 框架以显示不同的图形（代表船的不同图块）。这一切都很好，但我想限制玩家只能点击 15 次，但现在玩家可以点击任意次数。

任何帮助以及任何指导都将不胜感激（正如我所说，我对这一切都很陌生）。

这是我到目前为止所拥有的：

```
 var i:int = 0; 
    var playerTileArray:Array = new Array(); 
    var compTileArray:Array = new Array();

    for (var v:uint = 0; v < 20;v++){                                                   
      for (var h:uint = 0; h < 20;h++){                                             

         playerTileArray[i] = new gridTile(); //gridTile is a MovieClip symbol in my Library.                                       
         playerTileArray[i].x = h*20;                                               
         playerTileArray[i].y = v*20 + 50;                                          
         playerTileArray[i].addEventListener(MouseEvent.CLICK, playerClick);            
         this.addChild(playerTileArray[i]);                                         

             trace ("creating player vertical tile " + v);                              
         trace ("creating player horizontal tile " + h);                                

         compTileArray[i] = new gridTile(); //gridTile is a MovieClip symbol in my Library.                             
         compTileArray[i].x = playerTileArray[i].x + 600;                           
         compTileArray[i].y = playerTileArray[i].y;                                                 
         this.addChild(compTileArray[i]);                                           

         trace ("creating computer vertical tile " + v);                                
         trace ("creating computer horizontal tile " + h);                          

         i++;                                                                       
      }
    }

      function playerClick(e:MouseEvent):void{
           e.currentTarget.gotoAndStop(2);
           trace("placed ship on player grid at: " +    playerTileArray.indexOf(e.currentTarget));
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:13:29.360

```
 var clickCount:int = 0;

  function playerClick(e:MouseEvent):void{
    if( clickCount >= 15 ){
      return;
    }
    ++clickCount
    e.currentTarget.gotoAndStop(2);
    trace("placed ship on player grid at: " +    playerTileArray.indexOf(e.currentTarget));
 } 
```

# asp.net-mvc-3 - objectstatemanager 中已存在具有相同键的对象

> ID：13311652
> 
> 赞同：0
> 
> 时间：2012-11-09T16:07:42.967
> 
> 标签：asp.net-mvc-3, entity-framework, objectstatemanager

关于这个错误有很多问题，但我无法弄清楚我的问题（也许我需要更多关于这个的理论）。

我遇到了“objectstatemanager 中已经存在具有相同键的对象”错误，而我尝试做的事情非常简单，我只有一个用于客户端的编辑视图，它有一个电话列表。当用户点击 Save 按钮时，我只需使用 Json 包装所有内容并使用 Ajax 将其发送到控制器。

在控制器上，我应该检查发送列表中的哪些电话我应该更新，作为新闻插入并删除。

所以这是代码的重要部分（以及引发上述异常的部分）：

```
 if (ModelState.IsValid)
            {
                foreach (var tel in propModel.Proprietario.Telefones)
                {
                    //Updates
                    TelefoneProprietario telToEdit = null;
                    if (tel.IDTelefoneProprietario.HasValue)
                        telToEdit = db.TelefonesProprietarios.Find(tel.IDTelefoneProprietario);
                    if (telToEdit != null)
                    {
                        db.Entry(tel).State = EntityState.Modified; << Exception HERE!!!
                    }
                    else
                    {
                        //Inserts
                        db.TelefonesProprietarios.Add(tel);
                    }
                }

                if (propModel.Proprietario.IDProprietario.HasValue)
                {
                    var prop = db.Proprietarios.Find(propModel.Proprietario.IDProprietario);
                    prop.LoadLists();
                    foreach (var telDel in prop.Telefones)
                    {
                        //Deletes
                        if (propModel.Proprietario.Telefones.Find(t => t.IDTelefoneProprietario == telDel.IDTelefoneProprietario) == null)
                        {
                            db.TelefonesProprietarios.Remove(telDel);
                        }
                    }
                }

                db.Entry(propModel.Proprietario).State = EntityState.Modified;
                db.SaveChanges();

                return Json(new { Success = 1, IDProprietario = propModel.Proprietario.IDProprietario, ex = "" });
            } 
```

有什么帮助或建议吗？

更糟糕的是：我把抛出异常的那一行去掉，只是为了测试代码的其余部分，在 SaveChanges 之前的最后一行，它抛出了另一个异常：

```
The relationship between the two objects cannot be defined because they are attached to different ObjectContext objects. 
```

更新：

我设法解决了以另一种形式重写上述例程的部分问题，如下所示：

```
 if (prop.IDProprietario.HasValue)
                {
                    //Separete updates/inserts from deletes
                    List<int?> dbTels = db.TelefonesProprietarios
                                    .Where(dt => dt.IDProprietario == prop.IDProprietario)
                                    .Select(dt => dt.IDTelefoneProprietario)
                                    .ToList();

                    List<int?> postedTels = prop.Telefones
                        .Select(pt => pt.IDTelefoneProprietario)
                        .ToList();

                    List<int?> deletedTels = dbTels
                        .Except(postedTels).ToList();

                    //Perform deletes
                    foreach (var delTelId in deletedTels)
                    {
                        if (delTelId.HasValue)
                        {
                            TelefoneProprietario delTel = db.TelefonesProprietarios
                                .Where(dt => dt.IDProprietario == prop.IDProprietario && dt.IDTelefoneProprietario == delTelId)
                                .Single();

                            db.Entry(delTel).State = EntityState.Deleted;
                        }
                    }

                    //Perform insert and updates
                    foreach (var tel in prop.Telefones)
                    {
                        if (tel.IDTelefoneProprietario.HasValue)
                        {
                            db.Entry(tel).State = EntityState.Modified;
                        }
                        else
                        {
                            db.Entry(tel).State = EntityState.Added;
                            tel.IDProprietario = (int)prop.IDProprietario;
                        }
                    }

                    db.Entry(prop).State = EntityState.Modified;
                }
                else 
                {
                    db.Proprietarios.Add(prop);
                }
                db.SaveChanges(); 
```

现在剩下的唯一问题是删除一个 Proprietario 实例（因为它有一个 TelefoneProprietario 列表，并且 TelefoneProprietario 有一个对拥有它的 Proprietario 的引用。这种情况导致“两个对象之间的关系无法定义，因为它们附加到不同的 ObjectContext 对象”，正如在 SO 中广泛讨论的那样......试图找出解决方案，所以如果你能指出我的东西......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:14:12.723

当你这样做时：`db.Entry(tel).State = EntityState.Modified;`

**tel**对象只是您传入的对象模型，对吗？

因此，此时的 EF 上下文不会跟踪任何与**tel 的密钥具有****相同密钥**的对象，在这种情况下**是 IDTelefoneProprietario**

 ****因此，如果您将对象状态设置为已修改，则**SaveChanges()** EF 将引发错误。

改为这样做：

```
if (telToEdit != null)
{
    // Do apply all the changes from 'tel' to 'telToEdit' object here
    ...
    db.Entry(telToEdit).State = EntityState.Modified; // No Exception I hope :)
} 
```

希望这是有道理的。****

# scala - 为什么 Scalaz 没有 asIdentity 方法？

> ID：13311654
> 
> 赞同：1
> 
> 时间：2012-11-09T16:07:49.250
> 
> 标签：scala, scalaz

Scalaz 有`asMA`方法，但没有`asIdentity`方法。以下在 Scala 2.9.1 中产生编译错误，如下所示：

```
Some(0).max(None)

<console>:14: error: type mismatch;
 found   : None.type (with underlying type object None)
 required: Ordering[?]
              Some(0).max(None)
                          ^ 
```

可以通过显式强制转换来修复：

```
(Some(0):Identity[Option[Int]]).max(None) 
```

`asIdentity`在我看来，如果存在的话，这会更优雅：

```
Some(0).asIdentity.max(None) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T22:03:09.620

`Identity`您可以使用具有`Pure`实例的事实：

```
scala> some(0).pure[Identity] max None
res0: Option[Int] = Some(0) 
```

请注意，您需要在此处使用`some(0)`而不是，`Some(0)`以便从类型开始`Option[Int]`而不是`Some[Int]`.

还有`Identity.apply`：

```
scala> Identity(some(0)) max None
res1: Option[Int] = Some(0) 
```

考虑到这些选项——以及明确指出你想要包装一些东西的事实，`Identity`只有在少数需要消除歧义的情况下才需要——我猜 Scalaz 的设计者只是没有看到需要一个附加`asIdentity`方法。

# javascript - 带有事件和自定义变量的 javascript 复制元素

> ID：13311656
> 
> 赞同：2
> 
> 时间：2012-11-09T16:07:53.480
> 
> 标签：javascript, jquery

我通常对 javascript 中的元素使用自定义变量。像这样的东西：

```
document.getElementById("test").myVar=function(){
    // do something
}; 
```

现在我需要复制一个元素 ( `document.getElementById("test")`) 并将其附加到某处。我尝试`clone()`与 jquery 一起使用。像这样的东西：

```
$("#test").clone(true,true).attr("id","test2").appendTo("#somewhere"); 
```

但它不能在新元素中复制 myVar 。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:14:51.560

为什么，哦，为什么要为元素分配任意属性？

既然你使用 jQuery 为什么不使用该[`.data()`](http://api.jquery.com/data)方法呢？（*虽然我仍然不明白为什么你会在一个元素上存储一个函数..*）

```
$('#test').data('myVar', function(){...}); 
```

* * *

另一种滥用可能是绑定自定义事件处理程序（*[命名空间以避免进一步的问题](http://docs.jquery.com/Namespaced_Events)*），但我会坚持`.data()`

```
$('#test').bind('myVar.variables', function(){...}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T16:14:58.637

您可以使用[数据](http://api.jquery.com/data/)来存储您的附加功能：

```
$("#test").data("myVar", function(){}); 
```

然后，当您将设置[克隆](http://api.jquery.com/clone/)`true`到参数`withDataAndEvents`时，它应该可以工作。

# jquery-selectors - jQuery.find() 的奇怪行为

> ID：13311657
> 
> 赞同：0
> 
> 时间：2012-11-09T16:07:58.983
> 
> 标签：jquery-selectors

我不太明白为什么 find 在这里表现：

```
var data = $("<html><title>hello</title><body><form><ul><li>here</li></ul></form></body><ul><li></li></ul></html>");
alert(data.find("form").length);
alert(data.find("ul").length); 
```

1.  找不到表格
2.  它没有找到第二个 UL

我还为此提出了一个jsfiddle-

[http://jsfiddle.net/erick382/YP9kz/](http://jsfiddle.net/erick382/YP9kz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:12:13.073

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:15:01.363

您需要添加`each`到`ul`搜索中。我也在演示中添加了 James 的答案。

[JSFiddle 演示](http://jsfiddle.net/YP9kz/2/)

# android - 设置 EditText.setError() 弹出 Android 的宽度

> ID：13311660
> 
> 赞同：5
> 
> 时间：2012-11-09T16:08:13.950
> 
> 标签：android, android-layout

EditText.setError() 弹出宽度基于什么？

我的xml：

```
<EditText
    android:id="@+id/link_existing_project_data"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="50dp"
    android:hint="@string/link_existing_project_hint"
    android:inputType="textCapCharacters"
    android:paddingLeft="30dp"
    android:paddingRight="30dp"
    android:textSize="20dp" /> 
```

我得到了什么：

![setError() 宽度](../Images/a082a43f124a2b50f686746c3f167168.png)

我怎样才能让它填满整个宽度，从而显示在一行上？

它不是基于 EditText 宽度吗？

谢谢

# mobile - 黑莓的响应式设计问题

> ID：13311662
> 
> 赞同：1
> 
> 时间：2012-11-09T16:08:16.743
> 
> 标签：mobile, blackberry, responsive-design, viewport

注意：以下问题仅适用于黑莓 - 所有其他经过测试的设备（多个 android 型号和 iPhone 操作系统）均不受这些问题的影响。

**问题 #1**：水平滚动

我的头部有以下元标记：

```
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=320, user-scalable=no" /> 
```

但是，我仍然得到一个巨大的侧滚动 - 大约是页面宽度的两倍。我有溢出-x：隐藏在身体上，无论如何它仍在滚动。

**问题 #2**：列出浮动问题

我的导航由无序列表的链接组成。我应用了以下CSS：

```
div#masthead nav ul li {
    background: #fff;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    display: inline;
    margin: 0 5px 5px 0;
    width: auto;
    float: left;
    text-align: center;
}

div#masthead nav ul li a {
    font-size: .9em;
    padding: 5px;
} 
```

width: auto 在黑莓上造成了一些问题。链接奇怪地堆叠：http: [//imgur.com/0p5rh](http://imgur.com/0p5rh)（截图：顶部是它在其他手机上的外观，底部是黑莓 - 请忽略添加此栏）

如果我在 li 上设置一个固定的像素宽度，它可以解决包装问题，但不会在每个列表元素之后给我一个一致的边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:28:25.543

水平滚动的解决方案：

我刚刚在 body 上添加了一个 width: 100% ，这解决了水平滚动问题。

问题 #2 仍未解决。

# android - ant 调试和 sdk.dir

> ID：13311666
> 
> 赞同：9
> 
> 时间：2012-11-09T16:08:27.550
> 
> 标签：android, ant, cocos2d-x

我在生成 Android APK 文件时遇到问题。

当我运行`ant debug`编译工作正常，但是当我运行`ant debug`

我有以下错误：

```
iMac:proj.android smartmind$ ant debug
Buildfile: /Users/smartmind/Works/Smallthing/cocos2d-x/samples/HelloCpp/proj.android/build.xml

BUILD FAILED
/Users/smartmind/Works/Smallthing/cocos2d-x/samples/HelloCpp/proj.android/build.xml:46: sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through an env var

Total time: 0 seconds 
```

我不知道有什么问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T17:37:15.480

您的项目应该有一个`local.properties`文件，其中`sdk.dir`一行指向您的 Android SDK 的安装位置：

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must *NOT* be checked into Version Control Systems,
# as it contains information specific to your local configuration.

# location of the SDK. This is only used by Ant
# For customization when using a Version Control System, please read the
# header note.
sdk.dir=/opt/android-sdk-linux_x86 
```

如果此文件不存在，要创建此文件，请在项目路径`android update project -p ...`所在的位置运行。`...`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-21T16:59:12.123

我有同样的问题，我使用 -Dvar 或 VM 参数解决了这个问题。

```
ant debug -Dsdk.dir=$SDK_ROOT 
```

其中 $SDK_ROOT 是 android SDK 路径

# sql - 识别分配oracle sql 10g的开始和结束

> ID：13311673
> 
> 赞同：0
> 
> 时间：2012-11-09T16:09:04.430
> 
> 标签：sql, oracle, date, oracle10g, connect-by

这与我在这里已经问过（并已回答）的问题非常相似：[识别所涵盖期间的开始和结束 - oracle 10g sql](https://stackoverflow.com/questions/12912279/identifying-start-and-end-of-period-covered-oracle-10g-sql)

但是，在这种情况下，我无法弄清楚如何实现我所需要的。我的数据如下所示：

```
ID  Start            End    End Code        Worker ID
A   02/08/2003  23/01/2007  A               1
A   24/01/2007  17/11/2008  J               2
A   03/03/2009  20/10/2009  A               3
A   21/10/2009  08/03/2010  A               4
A   09/03/2010  29/07/2010  A               5
A   30/07/2010                              6 
```

结束代码“A”表示已重新分配案例，“J”表示已关闭。我想要如下所示的数据：

```
 ID Start             End   Worker IDs  End Worker
     A  02/08/2003  17/11/2008  1,2         2
     A  03/03/2009              3,4,5,6     6 
```

正如我已经说过的，这与我之前提出的问题非常相似，但在那种情况下，我可以使用一个起始代码。我想我需要确定分配的开始 - 它要么是带有“J”代码的分配之后的第一个日期，要么只是最早的日期，但我有点挣扎。任何建议表示赞赏！作为参考，我的oracle版本是10g，10.2.0.5.0。

编辑：接受@Dazzal 提供的答案，因为它回答了我的原始查询，但我根据@Gordon Linoff 的回答发布了一个新问题，因为我认为这更符合我的需求。 [https://stackoverflow.com/questions/13383560/grouping-data-oracle-sql-based-on-sum](https://stackoverflow.com/questions/13383560/grouping-data-oracle-sql-based-on-sum)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:33:42.790

如果工人 ID 排序不重要，请使用内置聚合函数。

```
SQL> select id, min(start_date), max(case when last_worker is not null then end_date end) end_date,
  2         wm_concat(worker_id) worker_ids, max(last_worker) last_worker
  3    from (select id, start_date, end_date, end_code, worker_id, case when end_code ='J' or end_date is null then worker_id end last_worker,
  4                 nvl(max(r) over (partition by id order by end_date nulls last), 1) r
  5    from (select t.*,
  6                  case
  7                    when lag(end_code, 1) over (partition by id order by end_date nulls last) = 'J' then
  8                     row_number() over(partition by id order by end_date nulls last)
  9                  end r
 10             from test t)
 11  )
 12  group by id, r;

I MIN(START END_DATE  WORKER_IDS           LAST_WORKER
- --------- --------- -------------------- -----------
A 02-AUG-03 17-NOV-08 1,2                            2
A 03-MAR-09           3,6,5,4                        6 
```

是吗，您必须创建自己的聚合函数。例如，这是我在 10g 上使用的：

```
SQL> select id, min(start_date), max(case when last_worker is not null then end_date end) end_date,
  2         stragg_num(stragg_num_typ(worker_id, ',', worker_id)) worker_ids, max(last_worker) last_worker
  3    from (select id, start_date, end_date, end_code, worker_id, case when end_code ='J' or end_date is null then worker_id end last_worker,
  4                 nvl(max(r) over (partition by id order by end_date nulls last), 1) r
  5    from (select t.*,
  6                  case
  7                    when lag(end_code, 1) over (partition by id order by end_date nulls last) = 'J' then
  8                     row_number() over(partition by id order by end_date nulls last)
  9                  end r
 10             from test t)
 11  )
 12  group by id, r;

I MIN(START END_DATE  WORKER_IDS           LAST_WORKER
- --------- --------- -------------------- -----------
A 02-AUG-03 17-NOV-08 1,2                            2
A 03-MAR-09           3,4,5,6                        6

SQL> 
```

其中的定义是：

```
drop function stragg;
drop function stragg_num;
drop type string_agg_type;
drop type stragg_vc_tab;
drop type stragg_vc_typ;
drop type stragg_num_tab;
drop type stragg_num_typ;
create or replace type stragg_vc_typ as object
(
  value   varchar2(4000),
  delim   varchar2(10),
  rown    varchar2(4000)
);
/
create or replace type stragg_vc_tab
as table of stragg_vc_typ;
/
show errors type stragg_vc_tab
create or replace type stragg_num_typ as object
(
  value   varchar2(4000),
  delim   varchar2(10),
  rown    integer
);
/
show errors type stragg_num_typ
create or replace type stragg_num_tab
as table of stragg_num_typ;
/
show errors type stragg_num_tab

create or replace type string_agg_type as object
(
   total clob,
   delim   varchar2(10),
   data    stragg_num_tab,
   data2    stragg_vc_tab,

   static function
        ODCIAggregateInitialize(sctx IN OUT string_agg_type )
        return number,

   member function
        ODCIAggregateIterate(self IN OUT string_agg_type ,
                             value IN stragg_num_typ )
        return number,

   member function
        ODCIAggregateIterate(self IN OUT string_agg_type ,
                             value IN stragg_vc_typ )
        return number,

   member function
        ODCIAggregateTerminate(self IN string_agg_type,
                               returnValue OUT  varchar2,
                               flags IN number)
        return number,

   member function
        ODCIAggregateMerge(self IN OUT string_agg_type,
                           ctx2 IN string_agg_type)
        return number
);
/
show errors type string_agg_type
create or replace type body string_agg_type
is

static function ODCIAggregateInitialize(sctx IN OUT string_agg_type)
return number
is
begin
    sctx := string_agg_type( null, null, null, null );
    return ODCIConst.Success;
end;

member function ODCIAggregateIterate(self IN OUT string_agg_type,
                                     value IN stragg_num_typ )
return number
is
begin
    if (delim is null)
    then
      delim := value.delim;
    end if;
    if (data is null)
    then
      data := stragg_num_tab();
    end if;
    data.extend;
    data(data.last) := value;
    return ODCIConst.Success;
end;

member function ODCIAggregateIterate(self IN OUT string_agg_type,
                                     value IN stragg_vc_typ )
return number
is
begin
    if (delim is null)
    then
      delim := value.delim;
    end if;
    if (data2 is null)
    then
      data2 := stragg_vc_tab();
    end if;
    data2.extend;
    data2(data2.last) := value;
    return ODCIConst.Success;
end;

member function ODCIAggregateTerminate(self IN string_agg_type,
                                       returnValue OUT varchar2,
                                       flags IN number)
return number
is
  v_delim  varchar2(10);
begin
    if data is not null 
    then
      for r_item in (select d.value
                       from table(data) d
                      order by d.rown)
      loop
        returnValue := returnValue || v_delim || r_item.value;
        v_delim := self.delim;
      end loop;
    else
      for r_item in (select d.value
                       from table(data2) d
                      order by d.rown)
      loop
        returnValue := returnValue || v_delim || r_item.value;
        v_delim := self.delim;
      end loop;
    end if;
    return ODCIConst.Success;
end;

member function ODCIAggregateMerge(self IN OUT string_agg_type,
                                   ctx2 IN string_agg_type)
return number
is
begin
    self.total := self.total || ctx2.total;
    return ODCIConst.Success;
end;

end;
/
show errors type body string_agg_type
CREATE or replace FUNCTION stragg_num(input stragg_num_typ )
RETURN varchar2
PARALLEL_ENABLE AGGREGATE USING string_agg_type;
/

CREATE or replace FUNCTION stragg(input stragg_vc_typ )
RETURN varchar2
PARALLEL_ENABLE AGGREGATE USING string_agg_type;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:02:22.507

您可以使用集合操作来做到这一点。以下标识了没有间隙的时段——即不使用结束代码。它确定记录是否使用该`lag`函数开始一个周期。然后它会进行累积和以识别组内的成员，然后进行聚合以将它们聚集在一起。

```
select groupnum, MIN(start) as start,
       (case when GroupSeqNum = NumInGroup then max(end) end) as end,
       listagg(WorkerId delimiter ',' order by start) as WorkerIds,
       (case when GroupSeqNum = NumInGroup then max(WorkerId) end) as EndWorker
from (select t.*,
             ROW_NUMBER() over (partition by id, groupnum order by start) as GroupSeqNum,
             COUNT(*) over (partition by id, groupnum) as NumInGroup     
      from (select t.*,
                   SUM(IsStart) over (partition by id order by start) as GroupNum
            from (select t.*,
                         (case when lag(end) over (partition by id order by start) = start - 1 then 0 else 1 end) as IsStart
                  from t
                 ) t
           ) t
    ) t 
```

如果您通过以“J”代码结尾来识别组，只需将 IsStart 的定义更改为：

```
 (case when lag(EndCode) over (partition by id order by start) = 'J' then 0 else 1 end) as IsStart 
```

# android - 地图视图中的方向

> ID：13311682
> 
> 赞同：0
> 
> 时间：2012-11-09T16:09:32.433
> 
> 标签：android

在我的 mapView 中，我在当前位置有一个叠加层，但我需要向 editText 插入一个方向，并且我的地图在那里添加一个叠加层。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:00:12.970

是的，有可能。您将需要：

1.  从输入框中获取文本
2.  使用[Google Goelocation API查找地址](https://developers.google.com/maps/documentation/business/geolocation/)
3.  解析结果
4.  在目的地的 lat/lng 添加一个标记

如果您需要入门帮助，[请阅读本教程](http://blog.synyx.de/2010/06/routing-driving-directions-on-android-part-1-get-the-route/)

# matlab - Syms 命令在我的 Matlab 2008b 中不起作用

> ID：13311692
> 
> 赞同：0
> 
> 时间：2012-11-09T16:10:22.433
> 
> 标签：matlab, math, symbols, symbolic-math

我的matlab是2008b版

当我给出以下命令时：

```
x=syms('x') 
```

它返回以下消息：

```
??? Undefined function or method 'syms' for input arguments of type 'char'. 
```

对于表单的命令也是如此：

```
 syms c1 c2 x 
```

如何在 Matlab 2008b 中运行符号数学？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:15:33.883

您可能没有安装适当的工具箱。

在命令行运行命令`ver`，检查 Symbolic Toolbox 是否是已安装的工具箱之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-24T07:22:34.717

您可以只使用：

`syms x;`

像这样：

```
clc
clear
syms x;
f=(sin(x)^2)+log(x)+sqrt(x-1);
disp(subs(f,x,5));` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-04T09:49:55.993

您可以进入您的 Matlab 安装路径并单击以卸载该程序。当它要求您选择时，选择`modify`然后在安装页面中，您可以选择任何尚未安装的工具箱进行安装。

# ruby - 如何将带有回溯的ruby异常格式化为字符串

> ID：13311694
> 
> 赞同：12
> 
> 时间：2012-11-09T16:10:26.733
> 
> 标签：ruby

我有一个异常`e`，我想将其转换为一个字符串，该字符串与未捕获异常时的标准**ruby​​ 输出****完全相同。****`stderr`**

 **初始代码给了我错误的堆栈跟踪顺序，并且缩进不正确。

我不想编写自己的代码，而是希望看到一些“oneliner”。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T16:19:23.973

这将是相同的。

```
puts "#{$@.first}: #{$!.message} (#{$!.class})", $@.drop(1).map{|s| "\t#{s}"} 
```

或者，使用`e`：

```
puts "#{e.backtrace.first}: #{e.message} (#{e.class})", e.backtrace.drop(1).map{|s| "\t#{s}"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-29T05:39:42.000

如果您想记录为单个字符串，而不仅仅是输出，您可以这样做：

```
puts "#{e.backtrace.first}: #{e.message} (#{e.class})\n\t" + e.backtrace.join("\n\t") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T23:25:37.303

我猜这在 Ruby 2 之前是不可能的，但现在这是核心中的一个函数：

```
e.full_message 
```

如果您不想在输出中使用颜色代码：

```
e.full_message(highlight: false) 
```

[https://ruby-doc.org/core-2.5.1/Exception.html#method-i-full_message](https://ruby-doc.org/core-2.5.1/Exception.html#method-i-full_message)**

# java - 列表 .contains(Object)，为什么？

> ID：13311700
> 
> 赞同：7
> 
> 时间：2012-11-09T16:11:04.303
> 
> 标签：java, generics

> **可能重复：**
> [Map.get(Object key) 不是（完全）通用的](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)
> [原因是什么为什么我们有 contains(Object o) 而不是 contains(E e)？](https://stackoverflow.com/questions/2994123/why-do-we-have-containsobject-o-instead-of-containse-e)

正如你们[在这里看到的，](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29) E 类型的模板化 java.util.List 的`contains`方法没有被模板化：它`Object`取而代之。有谁知道为什么？
在什么情况下`List<String>`返回 true `myList.contains(new OtherNonString())`？如果我没记错的话，永远不要，除非它与之比较的对象具有 E 类型作为祖先（在我的字符串示例中，由于`String`是最终的，这是不可能的）

是否只是为了保持与前泛型版本的向后兼容性？我错过了一个有意义的用例吗？如果只是为了向后兼容，为什么不弃用`contains(Object)`并创建一个`contains(E)`?

**编辑：**
我的一些子问题之前已经回答过了。作为参考，还要检查[这个问题](https://stackoverflow.com/questions/2994123/why-do-we-have-containsobject-o-instead-of-containse-e)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:16:42.823

> 如果只是为了向后兼容，为什么不弃用 contains(Object) 并创建一个 contains(E)？

因为`contains(Object)`和具有相同的擦除类型（如您[在此代码示例](http://ideone.com/kPVP9d)`contains(E)`中所见），因此会导致编译错误。此外，弃用方法不是一种选择，当时的首要任务是让遗留代码工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:12:21.653

因为这里不需要模板：这只会阻止一些测试，如果对象不属于所需的类，则无论如何该方法都会回答 false。

在您的代码中进行简单的测试检查函数的返回是否是布尔值比测试 **和**try/catch 要简单得多。在编译时检查类型将允许发现错误的少数情况不值得开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:27:40.447

这是因为该方法可以返回 true，即使参数的类型与列表类型不同。更准确地说，`contains(Object o)`如果列表包含元素 e，则返回 true，所以这`e.equals(o)`是真的。

例如，以下代码将打印 true，即使在 中`l2`不允许使用of 的类型`list`：

```
List<ArrayList<String>> list = 
    new ArrayList<ArrayList<String>>();

ArrayList<String> l1 = new ArrayList<String>();
l1.add("foo");

list.add(l1);

LinkedList<String> l2 = new LinkedList<String>();
l2.add("foo");

System.out.println(list.contains(l2)); 
```

原因是不同的类 ArrayList 和 LinkedList 都继承了 AbstractList 的 equals 实现，不区分不同的子类。即使两个对象没有共同的超类，它们的 equals 实现也有可能相互识别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T16:12:08.250

原因之一可能是`contains()`不改变列表，因此不需要强制执行该类型。

从您拥有的链接：

> 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 使得 (o==null ? e==null : o.equals(e))

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T16:19:55.010

> 是否只是为了保持与前泛型版本的向后兼容性？

不，这是由类型擦除处理的。

之所以这样，是因为该方法不需要是类型安全的，也不需要返回实际类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T16:28:43.543

一个反例：

```
List<String> strings = Arrays.asList("hello", "world");
Object o = "hello";
System.out.println(strings.contains(o)); // true 
```

如果该`contains`方法不允许`Object`引用作为参数，则无法编译上面的代码。但是，该`o`变量引用了 a 的实例，该实例`String`实际上**包含**在给定列表中。

的结果`contains`由`Object.equals(Object o)`方法的结果确定，该方法还将其参数的类型定义为一般`Object`，原因相同：

```
String hello = "hello";
Object o = "hello";
System.out.println(hello.equals(o)); // true 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T16:33:12.093

Java 中的泛型是使用一种称为**擦除**的技术实现的。

*   如果没有给出泛型类型，则该类型将替换为 Object。
*   如有必要，如果给出了另一个泛型类型，则 java 编译器会创建类型转换为另一个对象。
*   编译器还生成桥接方法以保留扩展泛型类型中的多态性。

这就是为什么在运行时编译的字节码中存在 nog 泛型类型的原因。

例如

```
public static <T> void printArray ( T [] inputArray ) {
 for ( T element : inputArray )
    System.out.printf("%s ", element) ;

 System.out.println();
} 
```

编译器执行擦除后

```
public static void printArray ( Object [] inputArray ) {
    for ( Object element : inputArray )
      System.out.printf("%s ", element) ;

 System.out.println();
} 
```

它们只是内存中这段代码的一个副本，在这个例子中所有 printArray 调用都会调用它。

这样做的原因是向后兼容。泛型最初是在 java 1.5 版中引入的。

在 java 版本 < 1.5 中，您定义了一个这样的列表：

```
List myList = new ArrayList(); 
```

而不是这样

```
List<Integer> myList = new ArrayList<Integer>(); 
```

To make sure that old code won't break that was already written the compiled class can not contain information about generics.

# yii - 使用 CDbCriteria 在 yii 框架中编写子查询

> ID：13311704
> 
> 赞同：0
> 
> 时间：2012-11-09T16:11:09.887
> 
> 标签：yii

嗨，我正在使用 yii`CDbCriteria`来显示我的表格的值。我的 MySQL 查询中有一个子查询。`$criteria`但我不知道如何在yii中编写子查询条件。任何人都可以帮助做到这一点

我的查询是这样的

```
select * from (select * from Message order by createdOn desc )as mess group by courseid 
```

**编辑**：***表结构***

```
id int(11) NOT NULL AUTO_INCREMENT, 
courseid int(11) NOT NULL, 
senderid int(11) NOT NULL, 
recipientid int(11) DEFAULT NULL, 
message text NOT NULL, 
createdOn timestamp NULL DEFAULT CURRENT_TIMESTAMP, 
status tinyint(4) DEFAULT '0', 
fileName text, 
PRIMARY KEY (id) ) 
ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:05:38.167

对于您需要运行的查询类型，最好使用“createCommand()”。像这样的东西：

```
$results = Yii::app()->db->createCommand()
        ->select('mess.*')
        ->from('(select * from Message order by createdOn desc) as mess')
        ->group('mess.courseid')
        ->queryAll();
    var_dump($results); 
```

这篇文章很好地解释了“CDbCriteria”和“createCommand”之间的区别：[在此处输入链接描述](https://stackoverflow.com/questions/11988220/yii-createcommand-vs-criteria)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T02:53:18.150

您可能没有让 Yii CDbCriteria 在网格中显示表格的值，而是使用数据提供者（如 CActiveDataProvider）。可以看到有一个 CSqlDataProvider。您还可以使用 CDbCriteria 为您的 sql 填充“where”过滤条件，并以编程方式显示您的表：

[http://www.yiiframework.com/doc/api/1.1/CDbCriteria#condition-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#condition-detail) [http://www.yiiframework.com/doc/api/1.1/CDbCriteria#params-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#params-detail)

```
// your CDbCriteria object:
$criteria = new CDbCriteria();
$criteria->compare('whatever', $this->whatever);

$sql = Yii::app()->db->createCommand()
    ->select('*')
    ->from('(select * from Message order by createdOn desc )as mess')
    ->group('courseid')
// .. any other additions to the query.  
// now adding the conditions from the CDbCriteria
    ->andWhere($criteria->conditions, $criteria->params);

    return new CSqlDataProvider($sql, array(
        'keyField'       => 'id',
        'params'         => $sql->params,
     // the rest is up to you... 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T17:21:26.880

你应该使用 CDbExpression ！！！

例子：

```
$criteria->addBetweenCondition(new CDbExpression('(select nombres 
                                    from personas p 
                                    inner join clientes c on c.id_persona = p.id_persona
                                    where c.id_cliente = t.id_cliente)' ), $model->clienteInicial, $model->clienteFinal); 
```

没有经过测试：S，但是，我确信这可行！对不起，我的英语很烂！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:31:18.440

如果您进行分组，我猜您没有对这些结果使用活动记录？如果没有，您可以只运行查询本身：

```
$sql = "select * from (select * from Message order by createdOn desc )as mess group by courseid"
$rows = Yii::app()->db->createCommand()->text($sql)->execute(); 
```

但正如 Stu 所说，它的效率非常低，并且可能有更好的方法来做到这一点。

**更新** 如果您确实需要从结果中获取活动记录，那么您可以随时使用`ActiveRecord::model()->findBySql()`，但您的里程可能会有所不同

# oracle11g - Oracle11 全局临时表生命周期

> ID：13311705
> 
> 赞同：0
> 
> 时间：2012-11-09T16:11:10.763
> 
> 标签：oracle11g

我使用以下 DDL 创建了一个全局临时表：

```
CREATE GLOBAL TEMPORARY TABLE MY_TEMP_TABLE 
(
  column1  NUMBER,
  column2  NUMBER
)  ON COMMIT PRESERVE ROWS 
```

然后我将一些数据放入其中，并且可以很好地读取它。

我关闭我的 SQL 客户端会话并重新打开它，表仍然存在但没有数据。

我的观察是否正确，即全局临时表在会话之间持续存在，就像常规的永久表一样，但其中的数据仅在填充它的会话中存在？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:16:06.917

正确的。

全局临时表永远存在，就像任何其他数据库对象一样。它是在您安装应用程序时（而不是在运行时）创建的，就像任何其他数据库对象一样。

如果您指定`ON COMMIT PRESERVE ROWS`，则数据会在会话的整个生命周期内持续存在（并且仅对插入它的会话可见）。如果您指定`ON COMMIT DELETE ROWS`，则数据仅在事务的生命周期内持续存在（并且仅对插入它的事务可见）。

# symfony - 如何访问服务容器以使用 JMSSerializer？

> ID：13311707
> 
> 赞同：2
> 
> 时间：2012-11-09T16:11:23.103
> 
> 标签：symfony, jmsserializerbundle

根据文档：

> 该容器在任何传统的 Symfony2 控制器中都可用，您可以通过 get() 快捷方法访问容器的服务

因此，我设法通过调用以下方法在 Controller 中调用和使用 JMSSerializer：

```
$serializer = $this->get('serializer'); 
```

但是，如何在自定义类中调用容器？相同的命令失败，表明调用未定义的方法 get() 时出现致命错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:55:01.213

这正是依赖注入的用途。您的“自定义类”依赖于“序列化程序”服务。因此，您应该将您的类定义为服务容器中的服务

**应用程序/配置/config.yml**

```
services:
    my_custom_class:
        class:        My\RandomBundle\CustomClass
        arguments:    [serializer] 
```

**我的\RandomBundle\CustomClass**

```
use JMS\SerializerBundle\Serializer\Serializer;

class CustomClass
{
    private serializer;

    public function __construct(Serializer $serializer)
    {
        $this->serializer = $serializer;
    }
} 
```

现在，您可以从容器中获取自定义类，无论它在哪里使用，它都会自动获得可用的序列化程序。

```
$myServiceWithASerializer = $this->container->get('my_custom_class'); 
```

文档也对此进行了描述：
[http ://symfony.com/doc/current/book/service_container.html#creating-configuring-services-in-the-container](http://symfony.com/doc/current/book/service_container.html#creating-configuring-services-in-the-container)

# solr - Solr facet 多值字段性能问题

> ID：13311709
> 
> 赞同：2
> 
> 时间：2012-11-09T16:11:31.747
> 
> 标签：solr, faceted-search

我在方面查询方面遇到了一些**巨大的性能**问题。

我有超过 20、000、000 个文档的索引。我正在为 6 个多值字段上的每个查询分面搜索做。

**我已将 facet.method 设置为 ENUM** ...这提高了性能，但仍然是不可接受的。QTIME 在哪里花费超过 6 秒。我的索引每天都在变大……每周大约有 50k 的文档

有人能帮我吗！有什么解决办法吗？我已经检查了所有内容，阅读了所有提示，但到目前为止没有一个有用

有人遇到这个问题吗？

我正在使用 solr 3.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:56:34.633

检查[SolrCaching#filterCache](http://wiki.apache.org/solr/SolrCaching#filterCache)和[Cache_hit_rate](http://wiki.apache.org/solr/SolrPerformanceFactors#Cache_hit_rate)
过滤器查询使用过滤器缓存，并应进行相应设置以获得更好的后续过滤器查询性能。
检查管理页面上的缓存统计信息的命中率，如果您看到低命中率意味着缓存没有被使用。微调到正确的值将有助于显着提高性能。

# c# - 将数据从 sql select 加载到 keyvaluepair<>

> ID：13311711
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:11:41.183
> 
> 标签：c#, sql, key-value

对此进行了谷歌搜索，我似乎找不到任何引用如何将 sql 选择查询加载到键值对列表中的地方。

```
 {
Keyvaluepair<int, name> D =new keyvaluepair <Int, name>

Using (db2connection conn =new db2connection())
 {
   Db2command cms =new db2command();

String select=    ( @"Select distinct Value, Descrip
      From cool", conn)
   Using(db2reader read =new db2reader())
  {

    }
 } 
```

}

执行查询后如何将值和描述加载到键值对列表中。键值对

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:16:54.823

您没有提到您使用什么技术来执行查询，所以我假设您使用的是一种不会自动映射到类的基本技术。

这很容易做到。你要做的就是：

1.  遍历您收到的每一行
2.  `KeyValuePair`使用适合列的类型创建一个新对象（通常是`string, string`或`int, string`）
3.  将 的值设置为`KeyValuePair`您从阅读器读取的每一列的值。
4.  如果您想对后者做其他事情，请尝试在迭代期间`KeyValuePair`将其添加到 a`List<KeyValuePair>`

**编辑**好的，所以根据您的编辑，我猜您是新手。您提到您正在使用 DB2。您没有明确说明您使用哪个库从 DB2 中读取数据，因此我假设它是 IBM 提供的库。我将根据 IBM 的[DB2DataReader 类](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.swg.im.dbclient.adonet.ref.doc%2Fdoc%2FDB2ConnectionClassConnectionStringProperty.html)文档提供信息。

以下应该有效（前提是我没有输入错误）。我在此过程中包含了一些评论以提供帮助：

```
// this variable will have the data read from the server after all is said and done
List<KeyValuePair<int, string>>> data = new List<KeyValuePair<int, string>>();

// create the connection (replace connection string as necessary)
using (DB2Connection conn = new DB2Connection("database connection string"))
{
    // specify the query, create and open the command object 
    string qry = "Select distinct Value, Descrip from cool";
    DB2Command cmd = new DB2Command(qry, conn);
    conn.Open();

    // calling ExecuteReader() sends the query to the database and starts 
    // the process of reading the data
    using(DB2DataReader read = cmd.ExecuteReader())
    {
        // you have to call Read() for every row. It will return false if there 
        // are no more rows left
        while(read.Read())
        {
            // calling the various Get methods is how you get the data out of the reader
            // note that you pass in the index of the column for each call
            int intVal = read.GetInt32(0);
            string strVal = read.GetString(1);

            // now you're ready to create your KeyValuePair object
            KeyValuePair<int, string> tmp = new KeyVauePair<int, string>(intVal, strVal);

            // And add it to the list we defined at the start of this
            data.Add(tmp);
        }
    }
}

// and now we've got all of the data from your query wrapped up into a nice list
// called 'data'. Do with it whatever you planned 
```

# c++ - XCode 4.5 观察点不起作用

> ID：13311716
> 
> 赞同：6
> 
> 时间：2012-11-09T16:11:54.187
> 
> 标签：c++, xcode, debugging, lldb, watchpoint

我正在尝试在 iOS 上的 Xcode 4.5 中调试 C++ 代码，在连接的 iPad 2 上运行该应用程序。

我在我的代码上设置了一个常规断点，当我点击它时，我查看我的本地变量，单击一个变量并选择“Watch xxxxx”。

lldb 控制台显示：

> 错误：未能为 m_step 创建观察点

如果我尝试使用以下命令在控制台中手动设置，结果相同：

> wsv xxxxx

我得到：

> 错误：Wathpoint 创建失败 (addr=0x..... size=4) 错误：发送 gdb 观察点数据包失败

我正在运行调试配置，使用 LLDB。是否有其他我应该检查的线索？

**编辑**：这是我的设置：

![设置](../Images/9279404e7e19855062eff8697ea4afb3.png) ![设置](../Images/7f2e09fd534cb9ffeb4d08f984f1bd59.png) ![设置](../Images/76e7e15c436167c229a5ff409c6fd7fd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:48:47.843

你的 iPad 2 运行的是什么 iOS？观察点支持需要 iOS 6 中包含的调试服务器，而不是早期版本。听起来您设备上运行的调试服务器不支持观察点。设备端调试服务器在 iOS 版本中已修复，Xcode 不会对其进行更新。Xcode 4.5 中的观察点支持涉及对设备端调试服务器（在 iOS 6 中）的更改以及对 Mac 上 Xcode 中 lldb 的更改。此功能需要双方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:25:07.567

最新的 Xcode 发行说明说 Xcode 4.5 支持它们。

[https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/00-Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/00-Introduction/Introduction.html)

嗯……那又怎样？（顺便说一句，这是一个反问。）我也无法让观察点在 Xcode 4.5 上工作！我怀疑他们只是不工作。仍然。

# java - Android 应用程序未从市场运行但推送 apk 有效

> ID：13311717
> 
> 赞同：0
> 
> 时间：2012-11-09T16:12:03.510
> 
> 标签：java, android, runtime-error

在过去的几天里，我创建了一个应用程序，到目前为止它非常棒。我发布了应用程序来玩商店，一切都很好。

昨晚我上传了一个带有一些小改动的升级版本，当我尝试从市场安装应用程序时，它不起作用，我在主要活动开始后立即收到 ClassNotFoundException。如果我直接从 eclipse 运行应用程序，或者我通过 adb 将编译的 APK 推送到设备，它工作正常。

有没有人见过这个，这是我的一个新的。

根据关于 IRC ProGuard 的建议，属性文件中已注释掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:46:17.973

如果没有来自 logcat 的更多信息（使用 android 市场版本），最好的猜测是：

1.  在您的设备上卸载任何版本的应用程序并重新下载
2.  导出到签名的 APK 并使用“adb install MY_APP.apk”直接将其推送到您的设备上，然后查看该应用程序是否有效。（然后确保您上传了这个特定的 APK，而不是偶然上传的其他 APK）

# c - C flex 代码调试

> ID：13311724
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:12:18.623
> 
> 标签：c, flex-lexer

在以下代码中，它是 C 语言的词法识别器：

```
 %{
#include <stdio.h>
void showToken(char*);
%}

%option yylineno
%option noyywrap
digit ([0-9])
letter ([a-zA-Z])
%%

letter(letter | digit)*             showToken("id");
(digit)(digit)*(.(digit)(digit)*)?      showToken("num");
[(),:;.]                printf("%c",yytext[0]); 
[ \n]
(==|<>|<|<=|>|>=)       showToken("relop");
(+|-)                   showToken("addop");
(*|/)                   showToken("mulop");
(=)                 showToken("assign");
(&&)                    showToken("and");
(||)                    showToken("or");
(!)                 showToken("not");
.                   {   
                    printf("Lexical Error");
                    exit(0);
                    }

%%
void showToken(char* name){
    printf("<%s,%s>",name,yytext);
}
%% 
```

我收到以下错误，为什么会发生这种情况我认为我正确编写了代码！我对代码做了太多更改，但无法编译。

```
~/hedor>lex -t lexical.l > lexical.c
lexical.l:13: unrecognized rule
lexical.l:17: unrecognized rule
lexical.l:17: unrecognized rule
lexical.l:17: unrecognized rule
lexical.l:17: unrecognized rule
lexical.l:17: unrecognized rule
lexical.l:18: unrecognized rule
lexical.l:18: unrecognized rule
lexical.l:18: unrecognized rule
lexical.l:18: unrecognized rule
lexical.l:18: unrecognized rule
lexical.l:21: unrecognized rule
lexical.l:21: unrecognized rule
lexical.l:21: unrecognized rule
lexical.l:21: unrecognized rule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:24:29.710

您的正则表达式中有几个问题：

第 13 行，实际上错误在第 12 行，不要在 RE 中添加空格，它会破坏表达式并且无法按预期工作：

```
letter(letter|digit)*             showToken("id"); 
```

第 17 行，the`+`是一个特殊字符，所以用 : 转义它`\`：

```
(\+|-)                   showToken("addop"); 
```

第 18 行，与字符`*`和相同`/`：

```
(\*|\/)                   showToken("mulop"); 
```

第 21 行，同`|`：

```
(\|\|)                    showToken("or"); 
```

这应该可以修复编译错误，但请注意下面@JameySharp 的评论，您可能希望使用花括号编写`digit`and引用：和.`letter``{digit}``{letter}`

# android - Android SQLite Insert or Update

> ID：13311727
> 
> 赞同：65
> 
> 时间：2012-11-09T16:12:38.823
> 
> 标签：android, android-sqlite

as can be seen in the documentation the syntax to make insert or update is : `INSERT OR REPLACE INTO <table> (<columns>) VALUES (<values>)`, my question is there any function that merge the following ?

```
public long insert (String table, String nullColumnHack, ContentValues values) 
public int update (String table, ContentValues values, String whereClause, String[] whereArgs) 
```

or it has to be done with a prepared SQL statement and rawQuery?

What's the best practices to do an insert or update in Android?

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-12-13T13:52:09.337

我相信您在问如何一步**插入新行或更新现有行。**[虽然这在这个答案](https://stackoverflow.com/questions/418898/sqlite-upsert-not-insert-or-replace)中讨论的单个原始 SQL 中是可能的，但我发现在 Android 中使用[SQLiteDatabase.insertWithOnConflict()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertWithOnConflict%28java.lang.String,%20java.lang.String,%20android.content.ContentValues,%20int%29)使用 CONFLICT_IGNORE 进行冲突算法更容易做到这一点。

```
ContentValues initialValues = new ContentValues();
initialValues.put("_id", 1); // the execution is different if _id is 2
initialValues.put("columnA", "valueNEW");

int id = (int) yourdb.insertWithOnConflict("your_table", null, initialValues, SQLiteDatabase.CONFLICT_IGNORE);
if (id == -1) {
    yourdb.update("your_table", initialValues, "_id=?", new String[] {"1"});  // number 1 is the _id here, update to variable for your code
} 
```

此示例假定为列“_id”设置了表键，您知道记录 _id，并且已经存在第 1 行（_id=1，columnA = “valueA”，columnB = “valueB”）。这是使用 insertWithOnConflict 与 CONFLICT_REPLACE 和 CONFLICT_IGNORE 的区别

*   CONFLICT_REPLACE 会将其他列中的现有值覆盖为 null（即 columnB 将变为 NULL，结果将是 _id=1，columnA = "valueNEW"，columnB = NULL）。结果你丢失了现有数据，我没有在我的代码中使用它。
*   CONFLICT_IGNORE 将跳过现有行#1 的 SQL INSERT，您将在下一步中 SQL UPDATE 此行，保留所有其他列的内容（即结果将是 _id=1，columnA = "valueNEW"，columnB = "值 B")。

当您尝试插入尚不存在的新行 #2 时，代码将仅在第一条语句 insertWithOnConflict 中执行 SQL INSERT（即结果将是 _id=2，columnA = "valueNEW"，columnB = NULL）。

请注意[这个](https://code.google.com/p/android/issues/detail?id=13045)导致 SQLiteDatabase.CONFLICT_IGNORE 在 API10（可能还有 API11）上发生故障的错误。当我在 Android 2.2 上测试时，查询返回 0 而不是 -1。

如果您不知道记录键 _id 或者您有一个不会产生冲突的条件，您可以**将逻辑反转为 UPDATE 或 INSERT**。这将在 UPDATE 期间保留您的记录密钥 _id 或在 INSERT 期间创建新记录 _id。

```
int u = yourdb.update("yourtable", values, "anotherID=?", new String[]{"x"});
if (u == 0) {
    yourdb.insertWithOnConflict("yourtable", null, values, SQLiteDatabase.CONFLICT_REPLACE);
} 
```

上面的示例假设您只想更新记录中的时间戳值。如果先调用insertWithOnConflict，由于时间戳条件的不同，INSERT会创建新的记录_id。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-11-12T10:36:14.063

这是您的方法[SQLiteDatabase.insertWithOnConflict()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertWithOnConflict%28java.lang.String,%20java.lang.String,%20android.content.ContentValues,%20int%29)。了解它在 sqlite上引用[本文档的内容](http://www.sqlite.org/lang_conflict.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-16T11:25:48.530

[SQLiteDatabase.replace()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#replace%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)这样做，它基本上调用：

```
insertWithOnConflict(table, nullColumnHack, initialValues, CONFLICT_REPLACE); 
```

太糟糕了，文档不是很清楚。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-31T16:52:58.740

它的操作名称是“upsert”，我如何解决它是识别表中使行唯一的列。

示例：_id、姓名、工作、hours_worked

我们将使用的列是名称和工作。

```
private int getID(String name, String job){
    Cursor c = dbr.query(TABLE_NAME,new String[]{"_id"} "name =? AND job=?",new String[]{name,job},null,null,null,null);
    if (c.moveToFirst()) //if the row exist then return the id
        return c.getInt(c.getColumnIndex("_id"));
    return -1;
} 
```

* * *

在您的数据库管理器类中：

```
public void upsert(String name, String job){
    ContentValues values = new ContentValues();
    values.put("NAME",name);
    values.put("JOB",job);

    int id = getID(name,job);
    if(id==-1)
        db.insert(TABLE_NAME, null, values);
    else
        db.update(TABLE_NAME, values, "_id=?", new String[]{Integer.toString(id)});
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-09T16:32:43.660

[SQLiteDatabase.replace()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#replace%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)可能是您正在寻找的。我没有尝试过，但文档说它返回**新插入的行的行 ID**，所以它可能工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-18T20:08:17.600

我遇到了同样的问题，但我意识到当我的对象已经有一个 Id 时应该更新它，而当它没有 Id 时应该插入它，所以这是我为解决问题所做的一步一步：

**1- 在您的对象 getId 中使用 Integer 或初始化您认为合适的 Id：**这是我的代码

```
public Integer getId() {
    return id;
} 
```

**2-在将所有内容放入 ContentValues 后，检查方法中的 ID 以进行插入或更新：**

```
if(myObject.getId()!= null ){
        int count = db.update(TABLE_NAME,myContentValues,ID + " = ? ",
                new String[]{String.valueOf(myObject.getId())});
        if(count<=0){
            //inserting content values to db
            db.insert(TABLE_NAME, null, myContentValues);
        }
    } else {
        db.insert(TABLE_NAME, null, myContentValues);
    } 
```

这里发生的是我检查 Id 如果确实存在我更新该行但是如果更新方法返回 -1 这意味着没有具有该 Id 的行所以我插入该行，如果它没有 Id 我插入它。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-22T15:37:44.060

**replaceOrThrow(String table, String nullColumnHack, ContentValues initialValues)**怎么样

 **文档说... 替换数据库中的一行的便捷方法。如果行不存在，则插入新行。

基本上它调用**insertWithOnConflict**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-25T23:02:57.543

对我来说，如果你没有“_id”（主键），这些方法都不起作用

您应该首先调用更新，如果受影响的行为零，然后将其插入忽略：

```
 String selection = MessageDetailTable.SMS_ID+" =?";
 String[] selectionArgs =  new String[] { String.valueOf(md.getSmsId())};

 int affectedRows = db.update(MessageDetailTable.TABLE_NAME, values, selection,selectionArgs);

 if(affectedRows<=0) {
     long id = db.insertWithOnConflict(MessageDetailTable.TABLE_NAME, null, values, SQLiteDatabase.CONFLICT_IGNORE);
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-13T13:23:42.263

你可以这样做。

```
 sqliteDatabase?.let {
        // 1\. use sql to do this
        // val sql = "insert or replace into $table (key, value) values ('$key', '${obj.toString()}')"

        // 2\. use update and ContentValues
        // it.execSQL(sql)
        // it.replace(table, "", values)

        // 3\. try to update if affected row count is 0, do insert
        val updateRow = it.update(table, values, "$column_key = ?", arrayOf(key))
        Log.d(TAG, "update row: $updateRow")
        if (updateRow == 0) {
            val rowId = it.insertWithOnConflict(table, "", values, SQLiteDatabase.CONFLICT_IGNORE)
            Log.d(TAG, "insert row: $rowId")
        }
    } 
```**

# python - 从 Python 调用 C 函数的效率

> ID：13311732
> 
> 赞同：0
> 
> 时间：2012-11-09T16:12:55.833
> 
> 标签：python, c, performance

我编写了一个 python 脚本来对 Mandelbrot 集进行一些实验。我使用了一个简单的函数来查找 Mandelbrot 设定点。我想知道通过调用一个简单的 C 函数来执行我的这部分代码可以实现多少效率？请考虑这个函数应该从 Python 中多次调用。

运行时间的影响是什么？也许还有其他我应该注意的因素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:25:54.787

您会希望对 C 函数的 python 调用尽可能少。如果您可以从 python 调用一次 C 函数并让它完成大部分/所有工作，那就更好了。

# actionscript-3 - 在 Flash 中的组件的动作脚本 3 中使用动态数组填充可检查列表

> ID：13311737
> 
> 赞同：3
> 
> 时间：2012-11-09T16:13:08.450
> 
> 标签：actionscript-3, flash, actionscript, components

**上下文：** 我正在使用 ActionScript 3 在 Flash CS6 中创建一个组件。我使用了一个扩展*UIComponent*的自定义类。当我在场景中拖动组件时，我在 Flash 中的组件参数中有一些属性值。我用

```
[Inspectable(name="ParamName", type="String", defaultValue="some_param_value")] 
```

我有一个属性是列表。

```
[Inspectable(name="My List", type="List", defaultValue="One", enumeration="One,Two,Three")] 
```

**问题** 我可以用我通过 Web 服务在数组中收集的值填充列表吗？我说的是*枚举*属性。

我真的需要完成这项工作，所以如果在技术上不可行，我该如何构建我的组件？

在此先感谢您的每一个想法、建议或提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:40:39.363

[可检查](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001887.html)的元数据标签旨在向编译器提供信息，描述您的组件在应用程序中的使用方式。

这些编译时指令在运行时永远不会被解释。

由类定义描述，这些属性不是动态的。

```
<type name="X" base="Class" isDynamic="true" isFinal="true" isStatic="true">
  <extendsClass type="Class"/>
  <extendsClass type="Object"/>
  <accessor name="prototype" access="readonly" type="*" declaredBy="Class"/>
  <factory type="X">
    <extendsClass type="flash.events::EventDispatcher"/>
    <extendsClass type="Object"/>
    <implementsInterface type="flash.events::IEventDispatcher"/>
    <variable name="listOptions" type="Array">
      <metadata name="Inspectable">
        <arg key="name" value="My List"/>
        <arg key="type" value="List"/>
        <arg key="defaultValue" value="One"/>
        <arg key="enumeration" value="One,Two,Three"/>
      </metadata>
    </variable> 
```

此外，在 Flash Pro 的画板上创作时应用程序域和网络调用可能会出现问题；不过，我开发了一个谷歌地图组件，它能够在创作时调用加载地图。

虽然是学术性的，但这似乎是对这个标签的不恰当使用。此实现通常用于组件的静态选项。

这只能通过自动生成类定义的自动化过程来完成。

例如，您可以调用一个服务，该服务编写填充了可枚举值的 ActionScript 类文件。然后，自动构建推送新的编译组件以进行更新。

除了编译的程序集之外，没有办法实时动态更新这些定义。

# javascript - jQuery/JavaScript 在循环中分配点击事件（闭包？）

> ID：13311744
> 
> 赞同：3
> 
> 时间：2012-11-09T16:13:40.857
> 
> 标签：javascript, jquery, loops, closures

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

我正在为“仪表板”网页创建一个状态表。每个状态都处于“开”或“关”的状态。

我正在尝试使用 jQuery`button/buttonset`来切换/切换控件，以允许用户切换状态的值。我作为 ajax 数据库查询的结果动态创建表和按钮。

我基本上是在用户单击其中一个按钮时尝试触发 ajax 查询，但我正在努力正确分配单击事件。

无论单击什么按钮，我的第一个循环都会触发最终列表值。

因此，啊哈！这是一个标准的“JavaScript 闭包”问题。（所以我认为...）

进一步玩弄它并没有产生任何结果，而且我对关闭问题的理解还不够深入，无法弄清楚我的技术为什么是错误的。

这是我要调用的代码：

```
function SetStatus(item, status) {
    var params = '{itemName: "' + item + '", status: "' + status + '"}';
    $.ajax({
        type: "POST",
        url: "WebServices/Dashboard.asmx/SetItemStatus",
        data: params,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: StatusSet,
        error: ShowError
    });
} 
```

这是我正在尝试的代码的当前版本：

```
$(itemOnButton).click(
    function (_item) {
        SetStatus(_item, 'On');
    } (itemName)
); 
```

结果是，在从数据库中获取结果后（甚至在显示之前），使用== 'On'`SetStatus`触发最后一项。`status`

我知道这很简单，而且我仍然相信这是一个基本的关闭问题，但我的头撞到了墙上！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:20:54.397

```
$(itemOnButton).click(
    function (_item) {
        SetStatus(_item, 'On');
    } (itemName)
); 
```

当前，您在分配“关闭”功能以进行单击时正在触发它。尝试

```
$(itemOnButton).click(
    function (ev) { 
        // this is the clicked element
        // ev is the event object

        // how do you get the name?
        // var itemName = $(this).attr("name");

        SetStatus(itemName, 'On');
    }
); 
```

你也可以做

```
$(itemOnButton).click(
    function (_item) {
        return function (ev) {
            SetStatus(_item, 'On');
        };
    } (itemName)
); 
```

现在它像你一样触发，但它不会立即执行，而是返回点击事件处理函数。

返回的事件处理函数现在是 _item 的闭包。匿名函数是 _item 的作用域，通过参数设置为 itemName。

# websphere - 如何使用“WebSphere 7”的 jython 脚本修改“全局安全性”“自定义属性”？

> ID：13311748
> 
> 赞同：3
> 
> 时间：2012-11-09T16:13:59.990
> 
> 标签：websphere, websphere-7, websphere-portal, wsadmin, websphere-8

我在集群环境中使用*“WebSphere 7 Application Server” 。*我正在尝试使用*jython*编写配置和设置脚本。到目前为止一切顺利。但是，我遇到了障碍。我找不到修改*'Global security'的**'Custom properties'*的方法。更准确地说，我想使用*jython*添加以下自定义属性：

 **```
com.ibm.ws.security.addHttpOnlyAttributeToCookies 
```

我知道如何使用*'Integrated Solutions Console'*来做到这一点，但不知道如何使用脚本。有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:06:56.263

```
sec = AdminConfig.getid('/Security:/')
prop = AdminConfig.getid('/Cell:/Security:/Property:com.ibm.ws.security.addHttpOnlyAttributeToCookies/')
if prop:
    AdminConfig.modify(prop, [['value', 'true']])
else:
    AdminConfig.create('Property', sec, [['name','com.ibm.ws.security.addHttpOnlyAttributeToCookies'], ['value','true']])
AdminConfig.save() 
```**

# java - 如何使用 MySQL 5 获取 Hibernate Criteria 查询的行数？

> ID：13311750
> 
> 赞同：2
> 
> 时间：2012-11-09T16:14:08.077
> 
> 标签：java, mysql, hibernate, rowcount, hibernate3

我们大部分时间都在使用 HQL。但是我们有这个包含许多连接的复杂搜索表单，所以我想我会尝试使用 Criteria 的运气（以前从未有过）。我更喜欢这种语法，它适合我们拥有的复杂形式。

我的第一个直觉是在应用and`.list().size()`之前先做一个。这当然是缓慢而懒惰的，而且是一个总的资源消耗。`setMaxResults``setFirstResult`

经过一番谷歌搜索后，我找到了一个使用 ScrollableResults 的示例。但是帖子说 MySQL 不支持游标。这是 2004 年的一篇文章。在 2012 年，我们使用 MySQL 5 和 InnoDB 表。所以我认为我们支持游标。然后我发现使用投影。

所以不是休眠大师，我迷失了最好的方式。我们**将来**可能会使用 DB2，所以我想我使用的任何解决方案都必须在 DB2 和 MySQL 5 中工作。

有任何想法吗？我想至少我可以使用自定义 HQL 来获取计数（*）。

谢谢

**更新**

我只是把这个放在：

```
ScrollableResults scr = crit.scroll();
scr.last();
int rowCount = scr.getRowNumber() + 1; 
```

**对比**

```
int rowCount = crit.list().size(); 
```

在我输入限制/起始值之前。它跑得更快。所以我假设游标适用于特定的数据库和结果。我什至在那里加入了一些连接，它似乎仍然要快得多。

关于这是否仍然是一个好主意的任何意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:03:11.217

您可以使用 Criteria 的`setProjection(Projections.property("id"))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:19:50.753

**我认为通过单独的查询来获得计数是唯一的选择，**如果你想通过使用`setFirstResult`and来应用分页`setMaxResults`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T06:19:01.000

肯定`crit.list().size()`会在 Hibernate 会话中加载完整的行集作为实体。

该方法`ScrollableResults.last()`取决于 JDBC 驱动程序的实现，它也可能非常慢，因为`ResultSet`可能会完全加载完整的内容，即使尚未创建 Hibernate 实体也是如此。

最好的选择是使用`crit.setProjection(Projections.rowCount()).uniqueResult()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-01T08:26:39.363

你可以`hashcode()`在你的代码中包含，也就是说，

```
criteria.setProjection(Projections.rowCount()).uniqueResult().hashCode() 
```

# command-line - 用于解析包含逗号分隔值的命令行输入的批处理文件

> ID：13311756
> 
> 赞同：3
> 
> 时间：2012-11-09T16:14:43.003
> 
> 标签：command-line, command-line-arguments, batch-file

我正在开发一个命令行实用程序，它将一组输入参数作为命令。然后根据预定义的名称验证这些输入参数。该实用程序以这种方式调用：

**runUtility.cmd** **-A -B x,y,z -C w**

这里的参数是 A、B 和 C（以 - 开头的参数）。现在验证规则如下：

1.  参数的名称应该与预定义的名称匹配，这样就不能传递任何无效的参数，比如 -UVW

2.  参数可能有也可能没有值。在上面的例子中 -A 没有值，而 -B 有 x,y,z 而 -C 有 w。

我编写了这段代码来验证输入：

```
:validate

set argument=%1
set argumentValue=%2

if "%argument%" == "-A" (   
    shift   
    goto validate
)

if "%argument%" == "-B" (
    if "%argumentValue%" == "" (
        echo Empty value for -B
        goto end
    )
    shift
    shift 
    goto validate       
)

if "%argument%" == "-C" (
    if "%argumentValue%" == "" (
        echo Empty value for -C
        goto end
    )
    shift
    shift  
    goto validate      
)

if %argument%" == "" (
        goto end
)

Argument %argument% is invalid

:end 
```

但这似乎不起作用，因为 -B 有逗号分隔的值，所以对于 B 进行两次移位时，在下一次迭代中，y 变为 %1，z 变为 %2。由于 y 不是参数，因此它会因最后一行代码“参数 y 无效”而失败。实际上，SHIFT 命令将逗号作为分隔符，因此 x,y,z 确实保持为单个值。

我希望 x,y,z 被视为单个值，或者有没有其他方法来处理这个？我对批处理脚本有点陌生，我尝试使用 FOR 循环，但我无法在每次迭代中将 %1 和 %2 放在一起。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T18:38:15.577

批处理使用空格、逗号、分号、制表符和等于分隔参数的任意组合。如果要在参数中包含任何这些字符，则必须引用该参数。

```
runUtility.cmd -A -B "x,y,z" -C w 
```

`~`您的脚本可以使用修饰符删除封闭引号。将整个作业用引号括起来也是一个好主意，以防止出现问题字符，例如`&`,`|`等。下面作业中的双引号不会包含在值中。

```
set "argumentValue=%~2" 
```

我开发了一个您可能想要查看的选项解析器：[Windows Bat 文件可选参数解析](https://stackoverflow.com/a/8162578/1012053)。

无论您定义什么选项，解析代码几乎不会改变。唯一需要改变的是使用单个变量定义选项，`SHIFT /3`应该修改为`SHIFT /1`，每个都`%~3`变成`%~1`，`%~4`变成`%~2`。

选项解析器能够自动为未指定的选项提供默认值。

假设您没有默认值，您的选项将被定义为

```
set "options=-A: -B:"" -C:""" 
```

意味着一个`-A`不带值的选项，以及`-B`带`-C`值但默认情况下的选项是未定义的。

选项存储在与选项名称匹配的变量中（包括破折号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:01:11.643

这里有一些东西可以帮助你，它基于 3 个参数，ABC，每个参数最多有 3 个参数，由空格分隔。它还没有完成，因为我没有时间把它们放在一起，但它应该会给你一些可以使用的东西，你可以根据需要进行调整。

```
@echo off
set p1=%1
set p2=%2
set p3=%3
set p4=%4
set params=(-A -B -C)
for %%x in %params% do (
if "%p1%"=="" (
echo No parameters given
exit /b >nul
) else (
if "%p1%"=="%%x" (
if not "%p4%"=="" (
echo %%x has 3 parameters
) else (
if not "%p3%"=="" (
echo %%x has 2 parameters
) else (
if not "%p2%"=="" (
echo %%x has 1 parameter
)
)
)
)
)
) 
```

# python - 为什么没有打印行？

> ID：13311758
> 
> 赞同：0
> 
> 时间：2012-11-09T16:14:54.143
> 
> 标签：python, sqlite

我一直在关注 Python 示例@ [http://docs.python.org/2/library/sqlite3.html#sqlite3](http://docs.python.org/2/library/sqlite3.html#sqlite3)

```
import sqlite3

conn = sqlite3.connect("tweet.db")

c = conn.cursor()

for row in c.execute('SELECT * FROM stocks ORDER BY price'):
        print row

conn.close() 
```

但是除非我有，否则行不会打印：

```
purchases = [('2006-03-28', 'BUY', 'IBM', 1000, 45.00),
             ('2006-04-05', 'BUY', 'MSFT', 1000, 72.00),
             ('2006-04-06', 'SELL', 'IBM', 500, 53.00),
            ]
c.executemany('INSERT INTO stocks VALUES (?,?,?,?,?)', purchases) 
```

我使用的是同一个数据库，并且在尝试选择它之前我已经插入了数据。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:15:52.650

您需要[提交](http://docs.python.org/2/library/sqlite3.html#sqlite3.Connection.commit)您的插入：

```
conn.commit() 
```

只有当您提交事务时，sqlite 才会将行永久写入数据库。从文档中引用：

> 此方法提交当前事务。如果您不调用此方法，那么自上次调用以来您所做的任何事情`commit()`都不会从其他数据库连接中看到。如果您想知道为什么看不到已写入数据库的数据，请检查您是否忘记调用此方法。

或者，您可以将[连接隔离级别](http://docs.python.org/2/library/sqlite3.html#sqlite3.Connection.isolation_level)设置`None`为自动提交更改。

```
conn.isolation_level = None 
```

# android - 具有 wrap_content 高度的 ImageView 显示非常瘦/裁剪的照片而不是全高

> ID：13311763
> 
> 赞同：4
> 
> 时间：2012-11-09T16:15:01.997
> 
> 标签：android, xml

我有一个屏幕，用户可以在其中阅读文章（顶部有大照片。

它的一般结构是：

```
LinearLayout -> ScrollView -> LinearLayout -> ImageViews,TextViews...etc 
```

我遇到问题的 ImageView 是顶部的大图像（在文章标题下方，但在文本上方：

```
 <ImageView
            android:id="@+id/article_photo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/super_light_gray"
            android:scaleType="centerCrop"
            android:contentDescription="@string/articlePhoto"
            android:cropToPadding="true"
            android:layout_marginBottom="10dp"
            android:padding="1dp"/> 
```

问题是，**照片​​出现了，但是被垂直裁剪了很多**，所以即使是垂直方向的照片也显得非常瘦和宽。我认为“wrap_content”应该使它成为照片的全部高度......但我显然错了:)

我怎样才能让照片显示全宽（已经工作），但也全高？

我正在使用 UniversalImageLoader 加载图像：

```
 if(lrgPhoto != null && !lrgPhoto.filepath.equals(""))
        {
            imageLoader.displayImage(
                "http://img.mysite.com/processes/resize_android.php?image=" + lrgPhoto.filepath + "&size=640&quality=90",
                imageView,
                imgDisplayOptions
                );
            imageView.setVisibility(View.VISIBLE); //show photo
        }
        else
        {
            imageView.setVisibility(View.GONE); //hide photo
            imageView.invalidate();
        } 
```

**编辑：**

如果我将“scaleType”更改为“fitXY”，则图像会显示正确的尺寸而不会被裁剪，但它不是全角的。有没有办法我可以同时拥有全角和不奇怪的裁剪？

看来“裁剪”是因为它使用图像的原始高度作为高度，但它正在放大图像以适应全宽......

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-13T23:15:25.633

将此添加到 imageview xml：

```
android:adjustViewBounds="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:57:11.273

改变

```
android:scaleType="centerCrop" 
```

到

```
android:scaleType="fitXY" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:23:15.810

我原以为这很简单，但看起来单独使用 xml 布局可能是不可能的：

[ImageView - 高度匹配宽度？](https://stackoverflow.com/questions/9798392/imageview-have-height-match-width)

# jquery - div上的关闭按钮

> ID：13311764
> 
> 赞同：0
> 
> 时间：2012-11-09T16:15:03.063
> 
> 标签：jquery, html, button

我有一个用关闭按钮在各种链接上切换的 div。不幸的是，关闭按钮的行为不像它应该的那样，因为它与绝对位置相关联，因此未连接到 div 本身。当我把它放在 position:relative 中时，它会在每个新开口的 div 中添加一个新按钮。这一定是花生，我知道，但我的知识很基础，所以非常感谢帮助！谢谢格林先生

> 脚本

```
$(function(){
    $(".action").click (function(){
        var $this = $(this);
        var target = $this.data('content');

        $('.action').not($this).each(function(){
            var $other = $(this);
            var otherTarget = $other.data('content');
            $(otherTarget).hide(400);
        });

        var cls = $('<div/>', {
            'style':'left:843px;top:15px;width:12px;height:18px;cursor:pointer;padding:3px;position:absolute;border:solid gray 0px;background-color:',
            'id':'cls',
            'text':'x',
            'title':'Close',
            'click':function(){
                var t=$(this);
                t.parent().hide(400, function(){
                    t.remove();
                });
            }
        });

        $(target).prepend(cls).show({height: "toggle"},400);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:38:37.190

你为什么一直添加/删除关闭按钮？

我建议你使用这样的东西：

```
$(document).on('click', ".action", function() {
    var $this = $(this);
    var target = $this.data('content');
    $(target).toggle();

    $('.action').not($this).each(function() {
        var $other = $(this);
        var otherTarget = $other.data('content');
        $(otherTarget).hide(400);
    });

    $(document).on('click', '.close', function(){
        $(this).parent().hide(400);
    });

}); 
```

完整示例：http: [//jsfiddle.net/EMYFt/5/](http://jsfiddle.net/EMYFt/5/)

这样，您就可以保持 HTML 完整，并且只需切换元素可见性以响应点击链接/关闭按钮..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:52:50.033

尝试这样的事情：

```
$(function(){
    $(".action").on("click", function(e) {
        var $targ = $(this).data("content");

        $(".action").not($(this)).each(function(i) { $($(this).data("content")).stop().hide(400); });

        //  you should really consider adding a class and changing the jQuery styleing to be a style on a style sheet or in head
        if ($targ.children(".cls") == 0) {  //  cls element does not exist
            $targ.prepend(
                $("<div />").prop({ id: "cls", title: "Close" })
                    .addClass("cls")    //  this is par my suggestion to add a class name variable
                    .css({ left: '843px', top: '15px', width: '12px', height: '18px', cursor: 'pointer', padding: '3px', position: 'absolute', border: 'solid gray 0px', background-color: 'white' }) // not needed if you take my suggestion
                    .text("x")
            );
            $targ.children(".cls").click(function(e) {
                $(this).parent().stop().hide(400, function(e) {
                    //  $(this).children(".cls").remove();
                    //  why remove this?
                });
            });
        };

        $targ.show({ height: "toggle" }, 400);
    });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:40:07.327

据我了解，您想删除目标。这应该可以，只需使用`next()`而不是`parent()`div 并在元素之前插入：

```
$(function(){

$("div.action").click (function(){
var $this = $(this);
var target = $this.data('content');
$('div.action').not($this).each(function(){
    var $other = $(this);
    var otherTarget = $other.data('content');
    $(otherTarget).hide(400);
});
var cls=$('<div/>', {
   'style':'left:843px;top:15px;width:12px;height:18px;cursor:pointer;padding:3px;position:absolute;border:solid gray 0px;background-color:',
   'id':'cls',
   'text':'x',
   'title':'Close',
   'click':function(){
        var t=$(this);
        t.next().hide(400, function(){
            t.remove();
        });
    }
});
$(target).before(cls).show({height: "toggle"},400);
});
}); 
```

简化示例：http: [//jsfiddle.net/oceog/tASL5/](http://jsfiddle.net/oceog/tASL5/)

# sql - 使用 OLAP 在 SQL 报告中显示 YTD 值

> ID：13311766
> 
> 赞同：1
> 
> 时间：2012-11-09T16:15:04.557
> 
> 标签：sql, ssrs-2008, reporting, olap

YTD Value 在 Excel 上运行良好，但在使用相同 OLAP 的报表上运行良好。这份报告正在制作中，我今天需要修复。我感谢您的帮助！！

例如，

2012年有销售。

简

```
Apple  $100
Orange $200 
```

二月

```
Apple $50
Banana $300 
```

当我在 Excel 上为 2 月指定月份时，它不显示橙色，但总计是正确的。但它只是在 SQL 报告中总结它们。

excel上的结果

```
Apple   $150
Banana  $300
Grand Total $650 
```

SQL 报告的结果

```
Apple   $150
Banana  $300
Grand Total $450 
```

这是我的年初至今计算。

```
Name: [YED Amount]
Expression: AGGREGATE(YTD(), [Measures].[Amount]) 
```

我的 MDX 报告

```
 SELECT NON EMPTY { [Measures].[Variance], [Measures].[Amount], [Measures].[YTD Amount],
 [Measures].[YTD Budget], [Measures].[YTD Variance], [Measures].[Budget] } ON COLUMNS, NON EMPTY { 
([MF - Statement Account].[Major Category].[Major Category].ALLMEMBERS * [MF - Statement Account].
[Mid Category].[Mid Category].ALLMEMBERS * [MF - Statement Account].[Acocunt Name].[Acocunt 
Name].ALLMEMBERS * [MF - Vendor].[Payee].[Payee].ALLMEMBERS ) } DIMENSION PROPERTIES MEMBER_CAPTION, 
MEMBER_UNIQUE_NAME ON ROWS FROM ( SELECT ( STRTOSET(@MFTimeMonth, CONSTRAINED) ) ON COLUMNS FROM ( 
SELECT ( STRTOSET(@MFTimeYear, CONSTRAINED) ) ON COLUMNS FROM ( SELECT ( 
STRTOSET(@MFBranchBranchName, CONSTRAINED) ) ON COLUMNS FROM [Cube Accounting BU Budget Variance]))) 
WHERE ( IIF( STRTOSET(@MFBranchBranchName, CONSTRAINED).Count = 1, STRTOSET(@MFBranchBranchName, 
CONSTRAINED), [MF - Branch].[Branch Name].currentmember ), IIF( STRTOSET(@MFTimeYear, 
CONSTRAINED).Count = 1, STRTOSET(@MFTimeYear, CONSTRAINED), [MF - Time].[Year].currentmember ), IIF( 
STRTOSET(@MFTimeMonth, CONSTRAINED).Count = 1, STRTOSET(@MFTimeMonth, CONSTRAINED), [MF - Time].
[Month].currentmember ) ) CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, 
FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

我在报告中显示总计的公式

```
=Sum(Fields!YTD_Amount.Value) 
```

# asp.net-mvc - MVC4 RenderAction 导致 _Layout.cshtml 中的堆栈溢出

> ID：13311769
> 
> 赞同：0
> 
> 时间：2012-11-09T16:15:13.370
> 
> 标签：asp.net-mvc, razor

我想在我的`_Layout.cshtml`视图中实现一个菜单：

```
@Html.Partial("_LoginPartial")
@{ Html.RenderAction("Index", "Home"); }

@if (@ViewBag.Menus != null)
{
    foreach (vw_UsuarioPerfilMenuFuncionalidade memo in @ViewBag.Menus)
    {
        if (memo.IdMenuLast == null)
        {
            <li><span>@memo.NomeMenu</span></li>
            foreach (vw_UsuarioPerfilMenuFuncionalidade memo2 in @ViewBag.Menus)
            {
                if (memo.IdMenu == memo2.IdMenuLast)
                {
                    <li><span>@memo2.NomeMenu</span></li>
                }
            }
        }
    }
} 
```

当我加载页面时，`System.StackOverflowException`抛出一个：

> System.Web.dll 中出现“System.StackOverflowException”类型的未处理异常

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:31:18.577

我认为那是因为你有：

```
@{Html.RenderAction("Index", "Home");} 
```

哪个返回`View`，然后它需要`_Layout.cshtml`无限循环......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-10T11:08:29.923

我遇到了类似的问题，并从下面的链接中得到了答案。

[https://forums.asp.net/t/2130287.aspx?RenderAction+Infinite+Loop](https://forums.asp.net/t/2130287.aspx?RenderAction+Infinite+Loop)

第一步，删除以下代码

```
@{Html.RenderAction("Index", "Home");} 
```

它应该是：

```
@Html.Action("Index", "Home") 
```

第二步：

在您的局部视图中，将布局设置为 null：

```
@{ Layout = null; } 
```

# php - 为 foreach() 提供的参数无效，哪里出错了？

> ID：13311773
> 
> 赞同：0
> 
> 时间：2012-11-09T16:15:21.540
> 
> 标签：php, mysql, codeigniter, arguments, syntax-error

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：为 foreach() 提供的参数无效
> 
> 文件名：views/content_view.php
> 
> 行号：8

模型：

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');
  class Mat_model extends CI_Model
  {
    public function get_mat()
    {
      $query = $this->db->get('materials');
      $query->result_array(); 
    }
  }
?> 
```

看法：

```
<div id="breadcrumb"><a href="">Home</a> &raquo; <a href="">Somewhere</a></div>
    <div id="right">
      <h1>Lorem Ipsum Dolor Set Amir</h1>
      <span class="postinfo"> Posted by <a href="">Dylan</a> on 07.09.06</span>
      <p>Lorem ipsum dolor set amir tolos and tacos for plenty to see. jack is the orange sub marine, by any means I found my plans. </p>
      <hr />
      <h1>
      <?php foreach ($news as $one):?>
      <?if(is_empty($one))?>
      <?=$one['author']?>
      <?php endforeach; ?>
      </h1>
      <span class="postinfo"> Posted by <a href="">Dylan</a> on 07.09.06</span>
      <p>Lorem ipsum dolor set amir <a href="">tolos</a> and tacos for plenty to see. jack is the orange sub marine, by any means I found my plans. </p>
    </div>
  </div> 
```

控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Welcome extends CI_Controller {
    public function index()
    {
        $this->load->view('header_view');
        $this->load->view('menu_view');
        $this->load->view('categories_view');
        $this->load->view('useful_sites_view');
        $this->load->model('mat_model');
        $data = array();
        $data['news'] = $this->mat_model->get_mat(); 
        $this->load->view('content_view',$data);
        $this->load->view('footer_view');
    }   
}
?> 
```

那么我的错误在哪里？我找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:17:59.320

你没有从你的函数中返回任何东西。

你可能想要这样的东西：

```
public function get_mat()
  {
    $query = $this->db->get('materials');
    return $query->result_array(); 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:27:10.647

杰伦-是对的。在模型中不返回任何值，因此实际上发生了这样的错误。我给你建议请检查从数据库中检索的数据，如..

```
 $this->load->view('useful_sites_view');
      $this->load->model('mat_model');
      $data = array();
      $data['news'] = $this->mat_model->get_mat(); 
      echo "<pre>";print_r($data);exit; 
```

因此，不会出现此类错误。

# vba - Outlook 宏在失败并出现错误之前运行了 250 次迭代

> ID：13311774
> 
> 赞同：0
> 
> 时间：2012-11-09T16:11:34.553
> 
> 标签：vba, outlook, exchange-server

**描述：**

我有一个 Outlook 宏，它遍历文件夹中选定的电子邮件并将一些信息写入 .csv 文件。在失败之前它可以完美运行直到 250。这是一些代码：

```
Open strSaveAsFilename For Append As #1

CountVar = 0
For Each objItem In Application.ActiveExplorer.Selection
    DoEvents
    If objItem.VotingResponse <> "" Then
        CountVar = CountVar + 1
        Debug.Print "   " & CountVar & ". " & objItem.SenderName
        Print #1,  & objItem.SenderName & "," &  objItem.VotingResponse
    Else
        CountVar = CountVar + 1
        Debug.Print "   " & CountVar & ". " & "Moving email from: " & Chr(34) & objItem.SenderName & Chr(34) & " to: Special Cases sub-folder"
        objItem.Move CurrentFolderVar.Folders("Special Cases")
    End If
Next
Close #1 
```

**问题**

此代码运行 250 封电子邮件后，会弹出以下屏幕截图：

[http://i.stack.imgur.com/yt9P8.jpg](http://i.stack.imgur.com/yt9P8.jpg)

**我尝试添加一个“等待”函数来让服务器休息一下，这样我就不会那么快地查询它，但我在同一点得到了同样的错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:51:21.240

感谢@76mel，他[回答](https://stackoverflow.com/questions/2300814/export-outlook-2007-mail-folder-and-subfolders-to-csv)了我大量引用的另一个问题。[我发现这是 Outlook（源代码](http://support.microsoft.com/kb/2008840)）中的一个内置限制，即您不能打开超过 250 个项目，Outlook 将它们全部保存在内存中，直到宏结束为止。解决方法，而不是遍历选择中的每个项目：

```
For Each objItem In Application.ActiveExplorer.Selection 
```

您可以遍历父文件夹。我以为我可以做这样的事情：

```
For Each objItem In oFolder.Items 
```

但是，事实证明，当您删除或移动电子邮件时，它会将列表向上移动一个，因此它会跳过电子邮件。遍历我在[另一个答案](https://stackoverflow.com/a/10726174/757856)中找到的文件夹的最佳方法是执行以下操作：

```
For i = oFolder.Items.Count To 1 Step -1 'Iterates from the end backwards
Set objItem = oFolder.Items(i) 
```

这是整个代码，它提示选择要解析的文件夹，在该文件夹中为“外出”回复以及“特殊情况”创建子目录，其中放置所有以“RE：”开头的电子邮件

```
Sub SaveItemsToExcel()
    Debug.Print "Begin SaveItemsToExcel"

    Dim oNameSpace As Outlook.NameSpace
    Set oNameSpace = Application.GetNamespace("MAPI")
    Dim oFolder As Outlook.MAPIFolder
    Set oFolder = oNameSpace.PickFolder
    Dim IsFolderSpecialCase As Boolean
    Dim IsFolderOutofOffice As Boolean
    IsFolderSpecialCase = False
    IsFolderOutofOffice = False

    'If they don't check a folder, exit.
    If oFolder Is Nothing Then
        GoTo ErrorHandlerExit
    ElseIf oFolder.DefaultItemType <> olMailItem Then 'Make sure folder is not empty
        MsgBox "Folder does not contain mail messages"
        GoTo ErrorHandlerExit
    End If

    'Checks to see if Special Cases Folder and Out of Office folders exists. If not, create them
    For i = 1 To oFolder.Folders.Count
        If oFolder.Folders.Item(i).name = "Special Cases" Then IsFolderSpecialCase = True
        If oFolder.Folders.Item(i).name = "Out of Office" Then IsFolderOutofOffice = True
    Next
    If Not IsFolderSpecialCase Then oFolder.Folders.Add ("Special Cases")
    If Not IsFolderOutofOffice Then oFolder.Folders.Add ("Out of Office")

    'Asks user for name and location to save the export
    objOutputFile = CreateObject("Excel.application").GetSaveAsFilename(InitialFileName:="TestExport" & Format(Now, "_yyyymmdd"), fileFilter:="Outlook Message (*.csv), *.csv", Title:="Export data to:")
    If objOutputFile = False Then Exit Sub
    Debug.Print "   Will save to: " & objOutputFile & Chr(10)

    'Overwrite outputfile, with new headers.
    Open objOutputFile For Output As #1
    Print #1, "User ID,Last Name,First Name,Company Name,Subject,Vote Response,Recived"

    ProcessFolderItems oFolder, objOutputFile

    Close #1

    Set oFolder = Nothing
    Set oNameSpace = Nothing
    Set objOutputFile = Nothing
    Set objFS = Nothing

    MsgBox "All complete! Emails requiring attention are in the " & Chr(34) & "Special Cases" & Chr(34) & " subdirectory."
    Debug.Print "End SaveItemsToExcel."
    Exit Sub
ErrorHandlerExit:
    Debug.Print "Error in code."
End Sub

Sub ProcessFolderItems(oParentFolder, ByRef objOutputFile)
    Dim oCount As Integer
    Dim oFolder As Outlook.MAPIFolder
    Dim MessageVar As String
    oCount = oParentFolder.Items.Count
    Dim CountVar As Integer
    Dim objItem As Outlook.MailItem

    CountVar = 0

    For i = oParentFolder.Items.Count To 1 Step -1 'Iterates from the end backwards
    Set objItem = oParentFolder.Items(i)
        DoEvents
        If objItem.Class = olMail Then
            If objItem.VotingResponse <> "" Then
                CountVar = CountVar + 1
                Debug.Print "   " & CountVar & ". " & GetUsername(objItem.SenderName, objItem.SenderEmailAddress) & "," & objItem.SenderName & "," & GetCompany(objItem.SenderName) & "," & Replace(objItem.Subject, ",", "") & "," & objItem.VotingResponse & "," & objItem.ReceivedTime
                Print #1, GetUsername(objItem.SenderName, objItem.SenderEmailAddress) & "," & objItem.SenderName & "," & GetCompany(objItem.SenderName) & "," & Replace(objItem.Subject, ",", "") & "," & objItem.VotingResponse & "," & objItem.ReceivedTime
            ElseIf objItem.Subject Like "*Out of Office*" Then
                CountVar = CountVar + 1
                Debug.Print "   " & CountVar & ". " & "Moving email from: " & Chr(34) & objItem.SenderName & Chr(34) & " to the, " & Chr(34) & "Out of Office" & Chr(34) & " sub-folder"
                objItem.Move oParentFolder.Folders("Out of Office")
            Else
                CountVar = CountVar + 1
                Debug.Print "   " & CountVar & ". " & "Moving email from: " & Chr(34) & objItem.SenderName & Chr(34) & " to the, " & Chr(34) & "Special Cases" & Chr(34) & " sub-folder"
                objItem.Move oParentFolder.Folders("Special Cases")
            End If
        End If
    Next i
    Set objItem = Nothing
End Sub

Function GetUsername(SenderNameVar As String, SenderEmailVar As String) As String
    On Error Resume Next
    GetUsername = ""
    GetUsername = CreateObject("Outlook.Application").CreateItem(olMailItem).Recipients.Add(SenderNameVar).AddressEntry.GetExchangeUser.Alias
    If GetUsername = "" Then GetUsername = Mid(SenderEmailVar, InStrRev(SenderEmailVar, "=", -1) + 1)
End Function

Function GetCompany(SenderNameVar)
    On Error Resume Next
    GetCompany = ""
    GetCompany = CreateObject("Outlook.Application").CreateItem(olMailItem).Recipients.Add(SenderNameVar).AddressEntry.GetExchangeUser.CompanyName
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T17:38:45.437

为了解决这个问题，我使用了以下规则：

“objOutlook.ActiveExplorer”的范围有限（250 个对象）。

但是为每封电子邮件创建的对象是无限的。

举个例子：

```
sub Over250()

  Total = objOutlook.ActiveExplorer.Selection.Count

  For X = 1 to Total

    Set objOutlook = CreateObject("Outlook.Application")
    Set ObjExplorer = objOutlook.ActiveExplorer     

   '**** DO YOU THINGS****

    Set objOutlook = Nothing
    Set ObjExplorer = Nothing

  Next X

end sub 
```

# java - gephi-toolkit - 创建一个新的 Importer 以从集合中获取数据

> ID：13311776
> 
> 赞同：1
> 
> 时间：2012-11-09T16:15:33.820
> 
> 标签：java, graph, talend, gephi

我正在为 Talend Open Studio 构建一个用于网络分析的组件，我计划使用 gephy 工具包，但输入数据必须来自数据流（为了简单起见，比如说 java 集合），而 gephy-toolkit 只允许从文件导入（实际上有很多不同的种类）甚至 rdbms，但不是来自 java 集合。

我如何构建一个新的简单自定义导入器（如果它可以首先构建。这似乎是可能的，至少对于 GUI gephi cfr。http [://wiki.gephi.org/index.php/HowTo_write_an_import](http://wiki.gephi.org/index.php/HowTo_write_an_import)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:57:54.640

我自己找到了解决方案：我需要创建一个 Spigot Importer。

*   工厂

    ```
    @ServiceProvider(service = ImporterBuilder.class)
    public final class TalendCollectionImporterBuilder implements ImporterBuilder {

    public String getName() {
           return "Talend Flow Connection Importer";
        }

        public SpigotImporter buildImporter() {
           return new TalendCollectionImporter();
        }

    } 
    ```

*   进口商（存根）

    ```
    public class TalendCollectionImporter implements SpigotImporter {

            private ContainerLoader container;
            private Report report;
            private ProgressTicket progressTicket;
            private boolean cancel = false;

            public boolean execute(ContainerLoader loader) {
                this.container = loader;
                this.report = new Report();

                // import stuff

                return !cancel;
            }

            public ContainerLoader getContainer() {
                return container;
            }

            public Report getReport() {
                return report;
            }

            public boolean cancel() {
                cancel = true;
                return true;
            }

    } 
    ```

# jquery - 在显示之前替换从 jQuery ajax 调用返回的数据

> ID：13311778
> 
> 赞同：2
> 
> 时间：2012-11-09T16:15:37.840
> 
> 标签：jquery, html, ajax, parsing, replace

这应该很简单，但我在这个问题上疯了。基本上我想要做的是在页面上显示之前从返回的 HTML 数据中替换一些标签。例如：

```
$.ajax({
    url: url,
    cache: false,
    type: 'GET',
    success: function(data) {
        // Here i need to replace href in ALL <a> tags and add the onclick attrib with the contents from the href 
        $('#floaty-dialog').html(modifieddata);
    }
}); 
```

如何预处理 HTML 数据并将所有 href 属性替换为 # 并将 onclick 属性添加到相同的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:22:00.107

我会使用浏览器的 HTML 解析器为我完成这项工作：

```
var dom = $(data);
dom.find("a").each(function() {
  var href = this.href;
  $(this).click(function(e) {
    e.preventDefault();
    alert(href);
  });
}).attr("href", "#");

$('#floaty-dialog').html(dom); 
```

# ms-access - MS Access：引用动态列名？

> ID：13311779
> 
> 赞同：3
> 
> 时间：2012-11-09T16:15:46.677
> 
> 标签：ms-access

查询 A 中的两列分别标记为 2012 和 2011。

但是，明年，这些列将是 2013 年和 2012 年。这是因为这些列是交叉表的一部分，其中名称是通过 year() 函数完成的。

无论如何，我正在使用一个新查询来添加一个减去两年列中的值的列，但我不知道如何动态引用这些列。

例如，我可以轻松添加一列

```
Difference: [2012 Revenue] - [2011 Revenue] 
```

但这将在明年停止工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:20:17.747

为什么不将这些列标记为更通用的东西，并像这样使用它们
区别：[今年] - [去年]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:32:26.613

基于 HelloW 的出色建议，您可以使用类似 的表达式作为交叉表的列标题`"RevYr" & (Year(Date())-Year(RevenueDate)`，其计算结果为
RevYr0、RevYr1、RevYr2 等......
然后您的差异将变为

```
Difference: RevYr0 - RevYr1 
```

* * *

编辑：
面对使用交叉表的类似问题，我发现这两个非常有趣的链接：
[http ://allenbrowne.com/ser-67.html](http://allenbrowne.com/ser-67.html)
[http://www.access.hookom.net/DynamicMthlyCrosstabRpt.htm](http://www.access.hookom.net/DynamicMthlyCrosstabRpt.htm)

# xcode - 以哪种格式通过节点 js 发送图像以使用 gridfs 存储

> ID：13311783
> 
> 赞同：0
> 
> 时间：2012-11-09T16:16:15.570
> 
> 标签：xcode, node.js, mongodb, gridfs

我有一个用 xcode 编写的客户端，我想上传用户图片以存储在服务器上。服务器运行节点 js，我用 gridfs 存储上传的文件

我应该如何在 nodejs 查询中发送图片。它假设是图片的二进制格式吗？如果是这样，这是否意味着 - 客户端应该在 xcode 中创建图像的二进制格式客户端应该将二进制格式作为附加到节点的 url 请求的字符串发送服务器将字符串存储在 gridfs 中客户端检索图像并解析/将其呈现为 jpg/png 图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:53:08.830

我将只使用类似于在 Web 表单中执行相同操作的 HTTP POST。查看这篇文章以获取有关如何使用 iOS/cocoa 执行此操作的示例。

[ios 使用 HTTP POST 上传图像和文本](https://stackoverflow.com/questions/8564833/ios-upload-image-and-text-using-http-post)

文件到达您的 nodejs 服务器后，由您决定如何处理。如果这样使用 express 框架设置中间件：

```
/** Form Handling */
app.use(express.bodyParser({
  uploadDir: app.settings.tmpFolder,
  keepExtensions: true
}))
app.use(express.limit('5mb')) 
```

然后，您可以使用 req.files 访问上传的图像，进行预处理，然后使用您选择的 MongoDB 模块将其存储在 gridfs 中。

# jquery - 鼠标事件未注册 inside I have a Flash embed that is inside (first child of) a container; the container div has the following properties (essential attributes summarized): 问问题 问问题 2012-11-09T16:16:18.870 99 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a Flash embed that is inside (first child of) a container; the container div has the following properties (essential attributes summarized): position: absolute; width: 100px; height: 100px; overflow: hidden; z-index: 2; There is a full-screen canvas at z-index 0\. Now when I bind an event handler to theI can confirm that it receives mouse events, but the embed remains unresponsive. Any ways I can troubleshoot/figure out what is wrong? Thanks in advance. Using $_SESSION to store the variables before outputting the PDF solved the problem Credits go to Yuri Stuken jqueryhtmlcssdom 4 1 回答 1 This answer is useful 0 尝试在嵌入/对象属性中设置 wmode="transparent" 于 2012-11-09T16:18:54.167 回答 Related 1 css - SimpleLESS 中的嵌套 & 符号 3 java - 使用依赖注入创建的动态类型对象 1 javascript - 从 chrome 扩展打开永久窗口 0 java - 如何让我的 AndroidHttpClient 在请求之间保留 cookie？ 1 jquery - jQuery 切换关闭其他元素 4 obd-ii - 使用 OBD2 参数获取油耗 (MPG) 的最佳方法是什么？ 2 sql - TextWrangler：此文件似乎不包含有效的“shebang”行 3 php - 正则表达式 PHP 在一定数量的 # 个字符后查找数字 2 sql - 将两个表转换为一个表 1 osc - 如何决定多级分页的级别 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13311785
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, html, css, dom

I have a Flash `<object>` embed that is inside (first child of) a container `<div>`; the container div has the following properties (essential attributes summarized):

`position: absolute; width: 100px; height: 100px; overflow: hidden; z-index: 2;`

There is a full-screen canvas at z-index 0\. Now when I bind an event handler to the `<div>` I can confirm that it receives mouse events, but the `<object>` embed remains unresponsive.

Any ways I can troubleshoot/figure out what is wrong?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:18:54.167

尝试在嵌入/对象属性中设置 wmode="transparent"

# php - PHP readfile() causing corrupt file downloads

> ID：13311790
> 
> 赞同：14
> 
> 时间：2012-11-09T16:16:48.483
> 
> 标签：php, file-io, download

I am using php script to provide download from my website after a requisite javascript timer this php script is included which causes the download. But the downloaded file is corrupt no matter whatever I try. Can anyone help me point out where am I going wrong.

This is my code

```
 <?php
include "db.php";    
 $id = htmlspecialchars($_GET['id']);
 $error = false;
    $conn = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
    if(!($conn)) echo "Failed To Connect To The Database!";
    else{   
        if(mysql_select_db(DB_NAME,$conn)){
            $qry = "SELECT Link FROM downloads WHERE ID=$id";
            try{
                $result = mysql_query($qry);
                if(mysql_num_rows($result)==1){
                    while($rows = mysql_fetch_array($result)){
                        $f=$rows['Link'];
                    }
                    //pathinfo returns an array of information
                    $path = pathinfo($f);
                    //basename say the filename+extension
                    $n = $path['basename'];
                    //NOW comes the action, this statement would say that WHATEVER output given by the script is given in form of an octet-stream, or else to make it easy an application or downloadable
                    header('Content-type: application/octet-stream');
                    header('Content-Length: ' . filesize($f));
                    //This would be the one to rename the file
                    header('Content-Disposition: attachment; filename='.$n.'');
                    //Finally it reads the file and prepare the output
                    readfile($f);
                    exit();
                }else $error = true;
            }catch(Exception $e){
                $error = true;
            }
            if($error) 
            {
                header("Status: 404 Not Found");
                }
        }
  }
?> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-03-12T06:19:39.983

在打开更多输出缓冲区的情况下，这对我很有帮助。

```
//NOW comes the action, this statement would say that WHATEVER output given by the script is given in form of an octet-stream, or else to make it easy an application or downloadable
header('Content-type: application/octet-stream');
header('Content-Length: ' . filesize($f));
//This would be the one to rename the file
header('Content-Disposition: attachment; filename='.$n.'');
//clean all levels of output buffering
while (ob_get_level()) {
    ob_end_clean();
}
readfile($f);
exit(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-09T17:15:23.800

首先，正如一些人在评论中指出的那样，删除`<?php`第一行开始 PHP 标记 ( ) 之前的所有空格，这样就可以解决问题（除非该文件包含在其他文件中或需要该文件）。

当您在屏幕上打印任何内容时，即使是一个空格，您的服务器也会发送标题以及要打印的内容（在这种情况下，您的空格）。为防止这种情况发生，您可以：

a) 在写完标题之前不要打印任何东西；

b) 运行 ob_start() 作为脚本中的第一件事，编写内容，编辑标题，然后在您希望将内容发送到用户浏览器时使用 ob_flush() 和 ob_clean()。

在 b) 中，即使您成功写入标头而没有出现错误，**空格也会损坏您的二进制文件**。你应该只写你的二进制内容，而不是二进制内容的几个空格。

ob_**前缀**代表输出缓冲区。调用 时`ob_start()`，您告诉您的应用程序您输出的所有内容（`echo`、`printf`等）都应该保存在内存中，直到您明确告诉它“去”（`ob_flush()`）给客户端。这样，您将输出与标题一起保存，当您完成编写它们时，它们将与内容一起发送。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-25T19:56:28.970

```
 ob_start();//add this to the beginning of your code 

      if (file_exists($filepath) && is_readable($filepath) ) {
header('Content-Description: File Transfer');
 header("Content-Type: application/octet-stream");
 header("Content-Disposition: attachment; filename=$files");
 header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
   header('Pragma: public');
 header("content-length=".filesize($filepath));
 header("Content-Transfer-Encoding: binary");

   /*add while (ob_get_level()) {
       ob_end_clean();
         }  before readfile()*/
  while (ob_get_level()) {
ob_end_clean();
   }
    flush();
   readfile($filepath); 
```

# java - What is an efficient "contains this element" list?

> ID：13311793
> 
> 赞同：0
> 
> 时间：2012-11-09T16:16:54.673
> 
> 标签：java

Ok, here's my problem: I download a list of items from the net and I store them in a db. Across successive downloads an item could not be present anymore so, for example:

first download: item1 item2 item3

second download: item1 item3

in this case I have to detect that item2 is not present anymore and so remove it from the database also.

I thought to mantain a list of db items and call on it "contains" method for each item I download...but I'd like to do this in the most efficient way so I'm asking what of the many java implementations is the best for my problem. Note that each item has an unique id, so the list would contain just strings.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:18:53.620

A[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)比 List 具有更好的查找性能。
（如果您需要保留插入顺序，请[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)改用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:32:12.960

> ...以最有效的方式...

**使用数据库。**

为什么不在数据库中使用时间戳？

当您下载新项目时，您可能无论如何都必须更新数据库（如果某些属性发生更改），因此您还可以更新所有*新*下载项目的时间戳。

之后，您可以从数据库中删除时间戳早于下载的所有项目。所以没有必要在内存中保存完整的新旧集合并进行查找，让数据库处理它（它可以更有效地完成它）。

保存时间戳的开销很小，您甚至可以使用类似数字的东西，每次运行例程时都会增加一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:19:51.103

如果您的下载没有多次出现，我建议您使用`HashSet`. 如果您打算稍后使用对象，请确保这些对象覆盖该`hashcode`方法。

# css - multiple classes css selector not working with :hover

> ID：13311795
> 
> 赞同：2
> 
> 时间：2012-11-09T16:17:01.027
> 
> 标签：css, css-selectors

I have the following css selector that is not working:

```
.button.button-green:hover 
```

however if I do this, it works fine:

```
.button-green:hover 
```

Is this a known issue with CSS and are there any ways around this (besided just using one class for the hover)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:23:37.760

有关几个不同的选项，请参阅以下 jsbin：http: [//jsbin.com/akowix/1/](http://jsbin.com/akowix/1/)

你的 html 是什么样的？

*   你有一个同时具有“button”类和“button-green”类的元素吗？
*   或者你有一个“button”类的元素，其中包含一个“button-green”类的元素？
*   或者您是否有两个不同的元素，一个带有“按钮”类，一个带有“按钮-绿色”类，您希望将悬停规则应用于两者？

# objective-c - 在 Objective-C 中的转换没有按预期工作

> ID：13311800
> 
> 赞同：0
> 
> 时间：2012-11-09T16:17:13.937
> 
> 标签：objective-c, casting, nsmutablearray

我是使用 Objective-C 和 Stackoverflow 编程的新手，我需要一些帮助。

我正在尝试从 NSMutableArray 获取对象并检查其内部属性之一。我认为最好的方法是执行以下演员：

```
GenericRoom *room = (GenericRoom*)[myRooms objectAtIndex: currentIndex + side];

if (room.myType == EMPTY) {
    return YES;
} 
```

问题是当我创建一个 GenericRoom 类型的类时，您的构造函数已经将 myType 定义为 EMPTY。当我在 NSMutrableArray 中插入实例时，我以这种方式更改为 myType TAVERN：

```
NSMutableArray *myRooms = [[NSMutableArray alloc] initWithCapacity:15];

for (int i = 0: i <15: i + +) {
    GenericRoom tmpRoom * = [[GenericRoom alloc] initWithType: TAVERN];
    myRooms insertObject: tmpRoom atIndex i];
} 
```

但是当我在那里进行引用时，它只是创建了对象 GenericRoom 的新实例，而不是在 NSMutableArray 中复制对象，使其结果始终为 YES，我失败的验证。

有没有更好的方法来解决这个问题？谢谢你们。

编辑：完整的代码

通用房间.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

enum Rooms {
    EMPTY, TAVERN, WARRIORGUILD, MAGEGUILD
}roomsType;

@interface GenericRoom : CCLayer {
    CCSprite *mySprite;
    enum Rooms myType;
}

@property (nonatomic, retain) CCSprite *mySprite;
@property enum Rooms myType;
@property int test;

- (id)initWithSprite: (NSString *)file;
- (id)initWithType: (enum Rooms)roomType;

@end 
```

通用房间.m

```
#import "GenericRoom.h"
@implementation GenericRoom
@synthesize mySprite, myType, test;

-(id)init {
    if (self = [super init]) {

    }
    return self;
}

-(id)initWithType: (enum Rooms) roomType {
    if (self = [super init]) {
        myType = roomType;

    }
    return self;
}

-(id)initWithSprite: (NSString *)file {

    if (self = [super init]) {
        mySprite = [CCSprite spriteWithFile:file];

        [self addChild: mySprite];
    }

    return self;
}
@end 
```

房间管理器.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "GenericRoom.h"
#import "RoomTavern.h"
#import "RoomEmpty.h"

enum Sides {
    LEFT, RIGHT, UP, DOWN
}theSides;

@interface RoomManager : CCLayer {
    CGSize size;
    NSMutableArray *myRooms;
}

- (void) CreateRoom: (enum Rooms)roomType;

@end 
```

房间管理器.m

```
@implementation RoomManager

-(id)init {

    if (self = [super init]) {
        size = [[CCDirector sharedDirector] winSize];
        myRooms = [[NSMutableArray alloc] initWithCapacity:15];

        for (int i = 0; i < 15; i++) {
            GenericRoom *tmpRoom = [[GenericRoom alloc] initWithType:TAVERN];
            tmpRoom.test = 10;
            [myRooms insertObject:tmpRoom atIndex:i];
        }

        [self CreateRoom:TAVERN];
    }

    return self;
}

- (void) CreateRoom: (enum Rooms)roomType {
    switch (roomType) {
        case TAVERN:
        {
            //Create the Tavern Main Room
            RoomTavern *tmpRoom = [[RoomTavern alloc] initWithSprite:@"room-hd.png"];
            tmpRoom.mySprite.position = ccp(size.width/2,size.height/2);

            [self addChild:tmpRoom];

            [myRooms removeObjectAtIndex:8];
            [myRooms insertObject:tmpRoom atIndex:8];

            if ([self CheckAdjacentRooms:8 andSide:LEFT]) {
                RoomEmpty *tmpEmptyRoom = [[RoomEmpty alloc] initWithSprite:@"roomToBuild-hd.png"];
                tmpEmptyRoom.mySprite.position = ccp(tmpRoom.mySprite.position.x - tmpRoom.mySprite.contentSize.width, tmpRoom.mySprite.position.y);

                [self addChild:tmpEmptyRoom];

                [myRooms insertObject:tmpEmptyRoom atIndex:7];
            }

            break;
        }

        default:
            break;
    }
}

- (BOOL) CheckAdjacentRooms: (int)currentIndex andSide:(enum Sides)side {
    int leftRightSide = 0;
    if(side == LEFT)
        leftRightSide = -1;
    else if (side == RIGHT) 
        leftRightSide = 1;

    GenericRoom *roomTmp  = (GenericRoom *)[myRooms objectAtIndex:currentIndex + side];

    if (roomTmp.myType == EMPTY) {
        return YES;
    }
    else
        return NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:20:42.290

如果您上面的代码是它在实际项目中的显示方式，那么问题是您正在重新声明您的`myRooms`对象。当您编写此行时：

```
NSMutableArray *myRooms = [[NSMutableArray alloc] initWithCapacity:15]; 
```

您正在创建一个名为的新本地范围对象`myRooms`，当您退出当前范围（方法、块等）时该对象将丢失

解决此问题所需要做的就是简单地删除`NSMutableArray *`行首的 ，它会将新分配的数组分配给您的属性。像这样：

```
myRooms = [[NSMutableArray alloc] initWithCapacity:15]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:35:31.910

加强@Dan F 的回答。读这个 ...

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW7](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW7)

...什么是`nil`消息传递。您在本地声明`myRooms`的变量隐藏了您的`myRooms`属性（= 实例变量）。换句话说，`myRooms`是`nil`。会发生什么...

```
GenericRoom *room = (GenericRoom*)[myRooms objectAtIndex: currentIndex + side]; 
```

由于`nil`消息传递规则，`[myRooms objectAtIndex:...]`返回`nil`，因此您`room`的设置为`nil`.

```
if (room.myType == EMPTY) {
    return YES;
} 
```

并向对象`room.myType`发送消息。因为是，返回值是- 枚举确实包含整数标量值 - 这就是它返回的原因。我假设这是你的第一个元素 enum = has value 。即使您的实例变量是. == => 也会返回。`myType``room``room``nil``0``0``EMPTY``0``0``0``YES``myRooms``nil`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:12:18.543

您的初始化程序似乎有一些缺陷，这可能会导致您的问题。

```
// NOTE: `Rooms` instead of `enum Rooms`
- (id)initWithType:(Rooms)roomType 
{ 
   if (self = [super init])  
   {
      // NOTE: accessor is used, otherwise the value is cleared when out of scope
      self.myType = roomType; 
   }
   return self;
} 
```

# shell - two scp and ssh processes with single authentication

> ID：13311802
> 
> 赞同：2
> 
> 时间：2012-11-09T16:17:30.760
> 
> 标签：shell, ssh, scp

I need to scp and then ssh to the same host. Is it possible to authenticate just one time? Is it possible to input password once, then scp file, then ssh on that host and work interactively?

**Update**

I get HOSTNAME and SSH_PASSWORD. I never log in on that machine before. I need to send some files (probably using scp) and then log in using ssh and work on that HOST interactively. I want to save time and input password just once. I have lots of such hosts...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:54:51.920

假设您使用的是公钥身份验证，只需设置`ssh-agent`. 如果没有`openssh`，则能够创建一个主连接，然后可以在没有额外身份验证的情况下使用该主连接，但这并不是所有`ssh`实现都通用的。我没怎么玩过它，因为交互式使用有点麻烦，但它可能值得研究一下脚本使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:28:07.723

有3种方法可以实现这一点：

**1 -*正确的*方法：**

*   首先，[设置 ssh 密钥](http://www.debian.org/devel/passwordlessssh)。
*   然后您可以[将 scp 与您的 ssh 密钥一起使用。](https://blogs.oracle.com/jkini/entry/how_to_scp_scp_and)

**2 - 用[期望](http://expect.sourceforge.net/)做：**

*   这是[一个示例，说明如何使用 expect 进行 ssh 并让它为您提供密码](https://stackoverflow.com/questions/13298487/bash-script-to-ssh-into-a-machine-without-prompting-password-and-without-using-k/)。

**3 - 使用[pscp](http://linux.die.net/man/1/pscp)而不是 scp：**

*   [pscp](http://linux.die.net/man/1/pscp)是“putty-tools”的一部分：`sudo apt-get install putty-tools`
*   pscp 允许您将密码作为 cmdline 选项的一部分提供
*   示例用法：`pscp -scp -pw $password $file_path $login@$IP:$dest_dir`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:29:01.173

假设您在远程计算机上有一个帐户，*首先*使用 SSH建立连接，然后使用 scp 复制所需文件 - 类似于：

```
ssh -y joepublic@examplehost.example.com

Password: <joepublic's password>

joepublic@examplehost.example.com

scp joepublic@thathostoverthere:/home/joepublic/thefileireallywantoverhere . 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T22:58:02.073

```
#/usr/bin/perl

use strict;
use warnings;
use Net::OpenSSH;

$ssh = Net::OpenSSH->new(host => '...', user => '...', password => '...');
$ssh->scp_put('/local/path/to/file', '/remote/path/to/file');
$ssh->system(); 
```

# javascript - onDeviceReady not firing in PhoneGap hello world app

> ID：13311805
> 
> 赞同：1
> 
> 时间：2012-11-09T16:17:46.603
> 
> 标签：javascript, cordova, dom-events

I'm trying to do a simple alert('test') app, but the event isn't being fired, this is the code:

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    alert('omar');
} 
```

HTML:

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Hello World</title>
    </head>
    <body>
        <div class="app">
            <h1>AAAA</h1>
        </div>
        <script type="text/javascript" src="cordova-2.2.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>

    </body>
</html> 
```

Why is this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T17:01:23.073

正确的方法是在添加事件监听器之前确保文档已经完全加载。

例子：

HTML：

```
<body onload="onLoad"> 
```

JS：

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
   //anything you want done after deviceready has fired
} 
```

使用 jQuery，您可以`$(document).ready()`使用`<body onload="onLoad()">`

例子：

```
$(document).ready() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
   //anything you want done after deviceready has fired
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-21T12:14:13.230

这适用于 Cordova 应用程序（在 iOS 和 Android 上测试）和普通网页。不需要库（jQuery）。

```
// Use onDeviceReady if we run in Cordova
window.addEventListener('load', function(){
    if (window.Cordova) {
        document.addEventListener('DeviceReady', bootstrap, false);
    } else {
        bootstrap();
    }
}, false); 
```

Cordova 文档说[DeviceReady](https://cordova.apache.org/docs/en/latest/cordova/events/events.deviceready.html)事件是这样制作的，不能错过。即使设备之前准备好，也会调用处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T02:46:42.897

我宁愿采用异步方法，如下所示：

```
bindEvents: function () {
    var me = this;

    document.addEventListener('deviceready', function () {
        me.onDeviceReady();
    }, false);

    $(document).ready(function () {
        me.onDocumentReady();
    });
},

documentReady: false,
onDocumentReady: function () {
    this.documentReady = true;
    this.checkReady();
},

deviceReady: false,
onDeviceReady: function () {
    this.deviceReady = true;
    this.checkReady();
},

checkReady: function (id) {
    if (this.documentReady && this.deviceReady) this.load();
},

load: function () {
    // do stuff
} 
```

这样您就不会冒险在事件发生后附加处理程序。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-08-23T08:22:06.293

放在`()`末尾`onDeviceReady`？

```
onDeviceReady() 
```

让我知道这是否正确，在浏览器上测试时它对我有用

# vb.net - System.Windows.Forms.Form.ActiveForm

> ID：13311809
> 
> 赞同：0
> 
> 时间：2012-11-09T16:18:01.443
> 
> 标签：vb.net, winforms

我有一个 while 循环，我希望我的程序在用户激活表单时运行。现在我都试过了，

```
While frmLineProduct.ActiveForm.Focus = True
While (frmLineProduct.ActiveForm.Equals(True)) 
```

但这些都不起作用。我将继续阅读此内容，但如果有人已经知道如何做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:27:52.637

您可以实现几个事件来控制状态，例如：

```
Public Property HasFocus As Boolean = True 'global flag

Private Sub Form_Deactivated(sender As Object, e As System.EventArgs) _
    Handles Me.Deactivated
    _hasFocus = False
End Sub

Private Sub Form_Activated(sender As Object, e As System.EventArgs) _
    Handles Me.Activated
    _hasFocus = True
End Sub 
```

然后在您的代码中：

```
While Form.Hasfocus
    Application.DoEvents 'a work-around for receiving events while in a while 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:18:05.110

答案最终成为了一种我以前从未听说过的方法，但我的其他帖子中的某个人将我引向了它。

Control.Invoke 方法（委托，Object()）

有兴趣的可以在[这里找到答案](http://msdn.microsoft.com/en-us/library/a1hetckb%28v=vs.100%29.aspx)

# c# - Displaying generated Id to user using Asp.Net MVC 3

> ID：13311810
> 
> 赞同：0
> 
> 时间：2012-11-09T16:18:02.437
> 
> 标签：c#, asp.net, asp.net-mvc-3

I am using a create form with asp.net mvc 3, where a user enters information and submits, to save their typed information to a database. I would like to display to the user the Id generated with the database row they have just created (via a view for form submitted successfully your id number is...). Does anyone know of a method to accomplish this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:58:52.963

您的问题需要更多细节，但是在提出数据持久性策略时应该考虑一些事项。如果您使用的是 Asp.Net Membership 提供程序，您还需要指定它。正如 Bildr 指出的那样，有一些返回用户信息的方法，但我不建议使用该提供程序，除非您需要，因为它正在被 MVC4 中的“简单成员资格提供程序”替换。

如果您使用存储库模式，则可以让类从公共接口继承。当您添加 T 类型的实体时，它会将该实体返回给用户，而当您执行保存时它不会。当您跨越边界时，这种方法会派上用场，例如使用 WCF 服务，并且您要传入具有多个子对象的复杂对象图。当然，您可以更灵活一点，让您的保存方法简单地返回创建对象的 ID。

```
 public interface IRepository<T>
{
    /// <summary>
    /// Saves the specified object and returns it back to the user.
    /// </summary>
    /// <param name="model">The model.</param>
    /// <returns>The created class</returns>
    T Add(T model);
    /// <summary>
    /// Persist the specified object.
    /// </summary>
    /// <param name="model">The model.</param>
    void Save(T model);
} 
```

当然，如果您正在构建一个更简单的应用程序，并且您像 Jimmy Bogard 一样使用[存储库](http://lostechies.com/jimmybogard/2012/10/08/favor-query-objects-over-repositories/)，并且使用 ORM，例如 EntityFramework，那么您可以将您的对象（同样，它是通过引用）传递给您的上下文对象：

```
 var foo = new Foo{ Name="goo"}
  _modelContext.MyDBSetFoos.Add(foo);
  ((ModelContext)_modelContext).SaveChanges();
  return foo.Id; 
```

如果您澄清您的问题，我很乐意提供更多细节。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:23:27.260

我假设您正在使用表单身份验证，并且您能够保留新用户的名称。将用户名传递给成功控制器，并让它使用[FindUsersByName 方法](http://msdn.microsoft.com/en-us/library/sk59azhc.aspx)填充模型。

# html - 停止 CSS 层次结构

> ID：13311811
> 
> 赞同：2
> 
> 时间：2012-11-09T16:18:06.770
> 
> 标签：html, css, inheritance, css-selectors, hierarchy

我有一个层次结构如下：

```
<div class="outer">
    <h1>Heading</h1>
    <p>Paragraph</p>
    <p><a>Link</a></p>

    <div class="inner">
        <h1>Heading</h1>
        <p>Paragraph</p>
        <p><a>Link</a></p>
    </div>
</div> 
```

我希望`outer`div 中的元素以某种方式设置样式，并且`inner`div 中的元素以另一种方式设置样式。

但是，我不想通过对规则定义`inner`的每个属性进行重置来污染我的元素规则。`outer`

在以下示例中，我想避免`margin: 0px`. 请注意，当然，我的样式表要复杂得多，并且重置次数会更多且烦人。

```
outer a { margin: 5px; }
inner a { margin: 0px; color: orange; } 
```

我最初的反应是使用直接子选择器`>`，但这对于链接、强、跨度等来说变得很麻烦。

下面的例子：

```
outer > a { color: orange; } 
```

不会风格：

```
<div class="outer"><p><a>Link</a></p></div>
<div class="outer"><strong><a>Link</a></strong></div>
<div class="outer"><ul><li><a>Link</a></li></ul></div>
<div class="outer"><table><tr><td><a>Link</a></td></tr></table></div>
... 
```

我需要找到其他方法

*   在 处打破层次结构`inner`，而不明确定义重置。
*   将外部样式的范围限制在`inner`.

这可能吗？请注意，在当前情况下，无法重新排列我的 HTML 结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:29:34.180

CSS3 选择器适合你吗？如果是的话，这个技巧可能会有所帮助：

**CSS：**

```
.outer>:not(div) a { color: orange; } 
```

**编辑：**

```
.outer > a, .outer > :not(.inner) a { color: orange; } 
```

**[jsBin](http://jsbin.com/ikajep/2/edit)**演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:29:06.380

您可以使用`:not`选择器：

```
.outer > *:not(.inner) * 
```

# javascript - 访问父dom的弹窗

> ID：13311812
> 
> 赞同：18
> 
> 时间：2012-11-09T16:18:07.723
> 
> 标签：javascript, html, popup

我有一个需要访问父 dom 以生成打印页面的弹出窗口。打印页面的结构与父页面的结构明显不同，因此打印 css 无法解决问题。我基本上想弹出一个窗口，然后让该窗口从父级获取一些数据，甚至从弹出窗口访问 dom 并生成打印页面，而无需再次访问服务器。有什么想法我能做到这一点吗？

我使用标准

```
window.open() 
```

弹出一个窗口。我需要这个解决方案不是黑客，而是与所有主要浏览器兼容的跨浏览器。

提前致谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-09T16:22:49.637

Sajjan 的回答是一个开始，但最好在尝试访问它们之前确保您的对象可用：

```
var opener = window.opener;
if(opener) {
    var oDom = opener.document;
    var elem = oDom.getElementById("your element");
    if (elem) {
        var val = elem.value;
    }
} 
```

否则，您确实会冒开瓶器不响应您的初始调用，并且您无法从中获取元素的风险。

作为 jQuery，我认为（基于一个答案，这里：[如何使用 jquery 访问父窗口对象？](https://stackoverflow.com/questions/2167455/how-to-access-parent-window-object-using-jquery)）：

```
var opener = window.opener;
if(opener) {
    var elem = opener.$("#elementId");
    if (elem) {
        var val = elem.val(); // I forgot we're dealing with a jQuery obj at this point
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:19:12.423

window.opener.document.getElementById("你的元素").value

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:21:16.767

根据[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.open)，`window.open()`将为您返回新窗口的句柄。

```
var popUpHandle = window.open(); 
```

使用此句柄，您应该能够访问 PopUp 的 DOM。反之亦然，使用已经提到的`window.opener`. 再次参考[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.opener)：

```
var originalWindow = window.opener; 
```

尽管如此，您最喜欢的搜索引擎仍会为您提供更多详细信息，因为这是一个相当古老的主题，而且您的方法已经完成了一百万次或更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-12T07:51:47.367

parent.document 在我的情况下有所帮助。

```
var elem = parent.document.getElementById("overlay_modal");
if (elem) {
alert('setting attribute');
elem.setAttribute("onclick", "Windows.close('2', event);");
} 
```

# java - 弹簧表单标签具有默认值

> ID：13311814
> 
> 赞同：0
> 
> 时间：2012-11-09T16:18:12.603
> 
> 标签：java, spring, hibernate

在我的 jsp 中，我使用 spring 表单标签来绑定和更新数据。

我的方案是在用户进入页面时显示默认值。这些默认值应根据某些条件来自数据库。但是当用户编辑数据并提交时，我想将它们保存在数据库中而不更新默认值。

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:30:11.567

表单页面的标准方法是使用具有两种方法的控制器，一种用于 GET，一种用于 POST。您还需要一个对象来绑定到表单。

处理 GET 的方法设置绑定对象并将其放入模型中，然后返回表单页面的视图。此处的绑定对象可以使用您可以从任何地方获取的默认值创建。您的绑定对象可能会有一些键，例如 ID。默认的可以有一个零/默认键。

处理 POST 的方法将绑定对象作为参数。它可能会验证值然后插入数据库。数据库很可能会生成密钥/ID。

这是一个例子；

```
@Controller
public class PersonController {

  @RequestMapping(value="/person.do", method=RequestMethod.GET)
  public ModelAndView setup() {
    ModelAndView response = new ModelAndView("person");

    //Create default bind object, can get values
    //from database if you like. Here they're just
    //hard coded.
    Person person = new Person();
    person.setName("Joe Bloggs");

    response.addObject("person", person);
    return response;
  }

  @RequestMapping(value="/person.do", method=RequestMethod.POST)
  public ModelAndView post(@ModelAttribute("person") Person person,
                           BindingResult result) {
    Validator.validate(person, result);
    if (result.hasErrors()) {
      ModelAndView response = new ModelAndView("person");
      response.addObject("person", person);
      return response;
    } else {
      personDao.store(person);
    }

    return new ModelAndView("redirect:nextPage.do");
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:27:19.447

表单将填充您在支持对象中提供的任何值。我不明白你问题的第二部分。

# hamming-code - 双重纠错

> ID：13311817
> 
> 赞同：0
> 
> 时间：2012-11-09T16:18:17.497
> 
> 标签：hamming-code

有没有使用汉明码纠正双重错误的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:22:11.277

不，但是还有[其他编码方案](http://en.wikipedia.org/wiki/Reed%E2%80%93Solomon_error_correction)可以做到这一点。

# css - IE7背景颜色问题

> ID：13311826
> 
> 赞同：0
> 
> 时间：2012-11-09T16:18:48.140
> 
> 标签：css, internet-explorer, internet-explorer-7

谁能告诉我为什么在 IE7 中这个网站的页脚没有选择背景颜色“黑色”？

[http://james-gilmore.co.uk/index.html](http://james-gilmore.co.uk/index.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:31:15.480

可能是 hasLayout 错误 - 快速阅读：

[http://www.satzansatz.de/cssd/onhavelayout.html](http://www.satzansatz.de/cssd/onhavinglayout.html)

尝试增加高度：1%

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:40:09.743

页脚容器里面有所有浮动的孩子，因此没有高度。你需要*清除*浮动。有[很多方法可以做到这一点](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)，从向容器添加[**clearfix**](http://nicolasgallagher.com/micro-clearfix-hack/)类或简单地添加`overflow:hidden`

也相关 -[背景未显示在浮动 div 后面](https://stackoverflow.com/questions/2623769/background-not-showing-behind-floating-divs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:22:57.510

可能值得只使用十六进制值`#000000`而不是`black`，看看是否可以解决问题。

IE7有时很蹩脚...

# java - 使用 Json 在 android 客户端和 WCF 服务之间传递 DateTime 作为参数

> ID：13311833
> 
> 赞同：1
> 
> 时间：2012-11-09T16:19:13.307
> 
> 标签：java, android, json, wcf, rest

我正在尝试从 WCF 服务获取以 android 作为客户端的 DateTime (Joda DateTime) 过滤的对象列表。我正在使用 Json 和 REST 来执行请求。

如何将日期时间值作为参数传递？

就像是：

```
HttpPost request = new HttpPost( SERVICE_URI + "/GetScheduleEntrysByDate/" + date.toString()); 
```

和这个：

```
[OperationContract]
[WebInvoke(Method = "POST",
    UriTemplate = "GetScheduleEntrysByDate/{date}",
    BodyStyle = WebMessageBodyStyle.WrappedRequest,
    ResponseFormat = WebMessageFormat.Json,
    RequestFormat = WebMessageFormat.Json)]
List<ScheduleEntry> GetScheduleEntrysByDate(DateTime date); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:27:26.667

```
// you might wanna specify custom params here for the DefaultHttpClient contructor
DefaultHttpClient httpClient = new DefaultHttpClient();

HttpPost request = new HttpPost( SERVICE_URI + "/GetScheduleEntrysByDate/" + date.toString());

List<NameValuePair> bodyParams = new ArrayList<NameValuePair>();
bodyParams.add(new BasicNameValuePair("date", new Date().getTime());
if (bodyParams.size() > 0) {
    try {
        // Include the request body
        post.setEntity(new UrlEncodedFormEntity(bodyParams));
    } catch (UnsupportedEncodingException e) {
        throw new IllegalStateException("Body parameters produced unsupported encoding?", e);
    }
}
// sends the POST with params,  you will need to put this in a try catch
try {
    HttpResponse httpResponse = httpClient.execute(request);
} catch (Exception e){
} 
```

# php - 在php中检查空值是否更有效？

> ID：13311842
> 
> 赞同：0
> 
> 时间：2012-11-09T16:19:48.943
> 
> 标签：php, performance

在某些情况下，当空值不是问题时，我不会检查变量。

例如：

```
$fruits = array("apple","banana");
    foreach ($fruits as $a) {
    $res .= ", $a";
}

echo "This are the fruits you like: ".$res; 
```

现在，如果 $fruits 恰好是空的，这不是问题，只是列表将是空的（我知道这不是很优雅，我可以使用条件语句将答案更改为“你不喜欢任何水果” ，但这只是一个例子！）。

我只是想知道通常检查数组是否为空更有效。简而言之，从性能的角度来看这是更好还是没有任何实际区别：

```
if (!empty($fruits)) foreach()... and so on 
```

谢谢，亲切的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:22:14.510

任何性能提升都可以忽略不计。这称为微优化。专注于编写好的代码，不要担心微优化。

我会去做这样的事情：

```
if(!empty($fruit) && is_array($fruit)){
    echo "This are the fruits you like: " . implode(", ", $fruit);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:21:29.823

好吧，这取决于填充数组的内容。例如，如果是用户输入，您可能需要确保它不为空，否则，如果不需要，则不要。这绝对是逐案的。

另外，使用 empty(); 时要小心。如果值为 0，那么即使存在值，它也会返回 true。您可以使用 strlen() 来解决这个问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:30:32.073

```
echo is_array($array) ? implode(', ', $array) : false; 
```

单线解决方案..

或者你可以使用，计数。

例如：count($array) > 0 ....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:23:19.513

您还可以使用`isset()`它来检查变量的值是否为 0 或其他值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T16:24:55.450

您想检查数组`$fruits`是否为空，然后`implode`按照韦恩的建议使用。

```
 if(!empty($fruits)){
   echo "This are the fruits you like: " . implode(", ", $fruits);
 } 
```

`is_array`不是真的有必要，如果您已经像`$fruits = array();`这些行之前那样初始化了数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T16:25:08.693

那么在这种情况下，我认为这不会有很大的不同。但是，如果它是空的 $res 将永远不会被声明，这可能会导致错误并且错误总是不好的。

# java - 异步中的 NetworkOnMainThreadException Android

> ID：13311845
> 
> 赞同：0
> 
> 时间：2012-11-09T16:19:53.217
> 
> 标签：java, android, android-asynctask

除非我删除它，否则我会遇到异常：

> 安卓：targetSdkVersion="15"

我在 SO 的另一个线程中发现了这一点。

但是，我已经用那个 targetSdkVersion 运行了几天。这是我的代码：

```
public class MainActivity extends BaseActivity {
    private TextView textView;
    private String url = "http://www.backcountryskiers.com/sac/sac-full.html";
    private ImageView image;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textView = (TextView) findViewById(R.id.todaysReport);
        image = (ImageView) findViewById(R.id.dangerRose);

        fetcher task = new fetcher();
        task.execute();
    }

    public static Bitmap getBitmapFromURL(String src) {
        try {
            Log.e("src", src);
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            Log.e("Bitmap", "returned");
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            Log.e("Exception", e.getMessage());
            return null;
        }

    }

    class fetcher extends AsyncTask<String, Void, String> {
        private ProgressDialog dialog = new ProgressDialog(MainActivity.this);
        private Document doc = null;
        private Elements content = null;
        private Document parse = null;
        private String results = null;
        private Element dangerRatingImg = null;
        private String dangerRatingSrc = null;
        private Bitmap bimage;

        @Override
        protected String doInBackground(String... params) {

            try {
                // bimage = getBitmapFromURL(drUrl);
                doc = Jsoup.connect(url).get();
                Log.e("Jsoup", "...is working...");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.e("Exception", e.getMessage());
            }

            content = doc.select("#content");
            parse = Jsoup.parse(doc.html());
            results = doc.select("#content").outerHtml();

            return results;
        }

        @Override
        protected void onPostExecute(String result) {
            // smooth out the long scrolling...
            textView.setMovementMethod(ScrollingMovementMethod.getInstance());

            // find rating image...
            dangerRatingImg = doc.select("img").first();
            dangerRatingSrc = dangerRatingImg.absUrl("src");
            // Get the rating image
            bimage = getBitmapFromURL(dangerRatingSrc);
            image.setImageBitmap(bimage);
            image.setPadding(10, 10, 10, 10);
            image.setScaleType(ScaleType.FIT_XY);

            // return the summary
            results = parse.select("#reportSummary").outerHtml();
            textView.setText(Html.fromHtml(results));
            textView.setPadding(10, 10, 10, 10);
            // ditch the dialog, it's all loaded.
            dialog.dismiss();

        }

        @Override
        protected void onPreExecute() {
            // before we get the async results show this
            dialog.setMessage("Loading Latest Update from the Sierra Avalanche Center...");
            dialog.show();
        }

    }

} 
```

我有网络连接，并且可以看到将 targetSdkVersion 取出的结果很好......但我知道这是不对的。谢谢大家。

编辑：

```
11-09 08:24:55.316: D/dalvikvm(9165): GC_CONCURRENT freed 148K, 3% free 11365K/11655K, paused 12ms+12ms, total 39ms
11-09 08:24:55.410: D/dalvikvm(9165): GC_CONCURRENT freed 331K, 5% free 11484K/11975K, paused 1ms+1ms, total 20ms
11-09 08:24:55.418: E/Jsoup(9165): ...is working...
11-09 08:24:55.558: D/dalvikvm(9165): GC_CONCURRENT freed 465K, 5% free 11506K/12103K, paused 12ms+12ms, total 39ms
11-09 08:24:55.558: E/src(9165): http://www.sierraavalanchecenter.org/sites/default/files/images/danger_icons_and_bars/0_nodangerrate.png
11-09 08:24:55.558: D/AndroidRuntime(9165): Shutting down VM
11-09 08:24:55.558: W/dalvikvm(9165): threadid=1: thread exiting with uncaught exception (group=0x40bc2300)
11-09 08:24:55.566: E/AndroidRuntime(9165): FATAL EXCEPTION: main
11-09 08:24:55.566: E/AndroidRuntime(9165): android.os.NetworkOnMainThreadException
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at com.backcountryskiers.avalanche.report.norcal.MainActivity.getBitmapFromURL(MainActivity.java:49)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at com.backcountryskiers.avalanche.report.norcal.MainActivity$fetcher.onPostExecute(MainActivity.java:102)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at com.backcountryskiers.avalanche.report.norcal.MainActivity$fetcher.onPostExecute(MainActivity.java:1)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.os.AsyncTask.finish(AsyncTask.java:631)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.os.Looper.loop(Looper.java:137)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at java.lang.reflect.Method.invokeNative(Native Method)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at java.lang.reflect.Method.invoke(Method.java:511)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-09 08:24:55.566: E/AndroidRuntime(9165):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:26:49.480

您`getBitmapFromURL`从以下位置拨打电话`onPostExecute`：

```
bimage = getBitmapFromURL(dangerRatingSrc); 
```

[`onPreExecute`](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)并[`onPostExecute`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)在 UI 线程上运行。您需要此代码在[`doInBackground`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)其中（因为这是在新线程上运行的部分）。

* * *

**更新**：您可以像这样重新组织您的代码（如评论中所述）：

```
@Override
protected String doInBackground(String... params) {
    try {
        doc = Jsoup.connect(url).get();
        Log.e("Jsoup", "...is working...");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.e("Exception", e.getMessage());
    }

    content = doc.select("#content");
    parse = Jsoup.parse(doc.html());
    results = doc.select("#content").outerHtml();

    // find rating image...
    dangerRatingImg = doc.select("img").first();
    dangerRatingSrc = dangerRatingImg.absUrl("src");
    // Get the rating image
    bimage = getBitmapFromURL(dangerRatingSrc);

    return results;
}

@Override
protected void onPostExecute(String result) {
    // smooth out the long scrolling...
    textView.setMovementMethod(ScrollingMovementMethod.getInstance());
    // Set the rating image
    image.setImageBitmap(bimage);
    image.setPadding(10, 10, 10, 10);
    image.setScaleType(ScaleType.FIT_XY);

    // return the summary
    results = parse.select("#reportSummary").outerHtml();
    textView.setText(Html.fromHtml(results));
    textView.setPadding(10, 10, 10, 10);
    // ditch the dialog, it's all loaded.
    dialog.dismiss();
} 
```

# matlab - 找到最低邻居matlab

> ID：13311848
> 
> 赞同：1
> 
> 时间：2012-11-09T16:19:57.463
> 
> 标签：matlab, map

我正在尝试编写一个函数

```
[offset,coffset]=findLowNhbr(map) 
```

对于 a 中的每个像素，`map`找到该像素的八个邻居，并返回两个矩阵，其中行和列都偏移到最低邻居（使用数字 -1、0 和 1）。边界像素的行和列都被赋予 0 偏移，因为它们没有邻居。

以下是我认为此功能的总体计划应该是：

1.  对于每个点，找到八个最近的邻居。
2.  如果邻居低于该点，则返回-1
3.  如果邻居与该点在同一高度，则返回 0
4.  如果邻居高于该点，则返回+1
5.  将这些偏移量存储在两个矩阵中。

我完全不知道从哪里开始，所以欢迎任何建议或问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:57:52.490

不*完全*确定您的意思，但这里有一些东西可以让您顺利进行：

```
neighbors = cell(size(map));

for ii = 2:size(map,1)-1
    for jj = 2:size(map,1)-1

        % current element
        M = map(ii,jj);

        % extract neighbors
        N = map(ii-1:ii+i, jj-1:jj+1);

        % compare values and store
        neighbors{ii,jj} = M<N - M>N;            

    end
end 
```

这将产生一个 cell-array `neighbors`，其中包含与 相同数量的元素`map`，但每个条目看起来像这样：

```
>> neighbors{2,3}
ans = 
    0  -1   1
    1   0  -1
    1   0  -1 
```

这是有关 pixel 的所有邻居的信息`(2,3)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:38:50.280

编辑：假设 map_original 是您的原始地图，这就是您如何将 inf 添加到地图的所有方面。

```
map=inf(size(map_original)+2)
map(2:end-1,2:end-1) = map_original 
```

假设您已经在地图的各个方面都使用了 infs，以下是一些可以帮助您入门的内容：

```
area =-1:1;
for i=2:size(map,1)-1
    for j = 2:size(map,2)-1
         bestfound=inf;
         bestk=0;
         bestl=0;
         for k = area
             for l=area
                if k~=0 && l~=0 
```

就像我说的，这只会让你开始！

# javascript - 如何强制页面关闭跳过 iframe 内页面要求的确认

> ID：13311849
> 
> 赞同：0
> 
> 时间：2012-11-09T16:20:01.393
> 
> 标签：javascript, jquery, html

我的页面中有这个 iframe（不同的域）。我也有这个脚本应该在验证某些条件时关闭页面。

我遇到的问题是，当 iframe 内的页面更改 onbeforeunload 方法要求我确认时，脚本显然冻结等待响应。我试图避免该对话，但没有成功。

有没有办法自动回答确认对话框或抑制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:26:59.083

您可以使用清理 onbeforeunload 函数

```
window.onbeforeunload = null;

// or for the iframe

window.frames[0].onbeforeunload = null; 
```

希望能帮助到你。

# jquery - 是否可以放大和缩小 div 的内容？

> ID：13311851
> 
> 赞同：0
> 
> 时间：2012-11-09T16:20:05.610
> 
> 标签：jquery, zooming

我正在尝试制作一个类似于谷歌地图的系统，并使用 div 的内容进行平移和缩放。这个 div 将有不同的按钮、链接和图像。我只是找不到不使用画布的方法。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:17:19.847

你可以通过[Zoomooz.js做到这一点](http://janne.aukia.com/zoomooz/)

只需将“zoomTarget”添加到单击时要缩放到的元素：

```
 <div class=""zoomTarget">This element zooms when clicked on.</div> 
```

您还可以添加一些额外的属性来调整动画作为元素的数据字段：

```
 <div class="zoomTarget" data-targetsize=lass="0.45" data-duration="600">This element zooms when clicked on.</div> 
```

来自源 [Zoomooz.js](http://janne.aukia.com/zoomooz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-02T11:13:56.470

我使用参考创建了一个简单的放大缩小 div（[http://jsfiddle.net/tamilselvanA/05erzotj/5/](http://jsfiddle.net/tamilselvanA/05erzotj/5/)）（[https://rbalajiprasad.blogspot.in/2012/02/zoom-in-zoom-出 jquery.html](https://rbalajiprasad.blogspot.in/2012/02/zoom-in-zoom-out-jquery.html)）。

```
$(document).ready(function() {
  var currZoom = $("#divpnlChart").css("zoom");
  if (currZoom == 'normal') currZoom = 1;

  $(".zoomIn").click(function() {
    currZoom *= 1.2;
    $("#divpnlChart").css("zoom", currZoom);
    $("#divpnlChart").css("-moz-transform", "Scale(" + currZoom + ")");
    $("#divpnlChart").css("-moz-transform-origin", "0 0");

  });
  $(".zoomOff").click(function() {
    $("#divpnlChart").css("zoom", 1);
    $("#divpnlChart").css("-moz-transform", "Scale(" + currZoom + ")");
    $("#divpnlChart").css("-moz-transform-origin", "0 0");

  });
  $(".zoomOut").click(function() {
    currZoom *= .8;
    $("#divpnlChart").css("zoom", currZoom);
    $("#divpnlChart").css("-moz-transform", "Scale(" + currZoom + ")");
    $("#divpnlChart").css("-moz-transform-origin", "0 0");

  });
});

var down = false;
var scrollLeft = 0;
var x = 0;

$('#sd').mousedown(function(e) {
  down = true;
  scrollLeft = this.scrollLeft;
  x = e.clientX;
}).mouseup(function() {
  down = false;
}).mousemove(function(e) {
  if (down) {
    this.scrollLeft = scrollLeft + x - e.clientX;
  }
}).mouseleave(function() {
  down = false;
});
```

```
#sd {
  border: 1px solid black;
  height: 1200px;
  margin: 50px auto;
  overflow: scroll;
  width: 500px;
}

#divpnlChart {
  height: 100px;
  width: 900px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<span class="zoomIn" style="font-size:200%">+</span>
<br>
<span class="zoomOff">original</span>
<br>
<span class="zoomOut" style="font-size:250%">-</span>
<br>

<div id="sd">

  <div id="divpnlChart" style="float: left; width: 85%;">
   <div class="Normal">

  CHENNAI: Actor <a class="key_underline" href="https://timesofindia.indiatimes.com/topic/Kamal-Haasan" pg="AS1_InlineMedia#AS1_https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms~Kamal Haasan-https://timesofindia.indiatimes.com/topic/Kamal-Haasan">Kamal Haasan</a> has alleged that <a class="key_underline" href="https://timesofindia.indiatimes.com/topic/right-wing-Hindus" pg="AS1_InlineMedia#AS1_https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms~right wing Hindus-https://timesofindia.indiatimes.com/topic/right-wing-Hindus">right wing Hindus</a> have started employing terrorism to propagate their communal agenda.
  <br>
  <br>
  In his column in a Tamil magazine that hit stands on Thursday, the 62-year-old actor said the right-wingers could no longer say "show me a Hindu terrorist if you can." Terrorism has spread into their fold also, he said.
  <br>
  <br>
  "Earlier, the right-wing <a class="key_underline" href="https://timesofindia.indiatimes.com/topic/Hindus" pg="AS1_InlineMedia#AS1_https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms~Hindus-https://timesofindia.indiatimes.com/topic/Hindus">Hindus</a> employed debates, and not force, against people of other religions. Having realised that their attempts are failing, they have started using violence," he wrote.
  <br>
  <br>
  "This is not a victory or a sign of progress. If we start believing that force will prevail and not truth, then we will all turn into violent beasts," he wrote.
  <br>
  <br>
  In his column, Kamal was replying to a question posed by <a class="key_underline" href="https://timesofindia.indiatimes.com/india/kerala" pg="AS1_InlineMedia#AS1_https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms~Kerala-https://timesofindia.indiatimes.com/india/kerala">Kerala</a> chief minister <a class="key_underline" href="https://timesofindia.indiatimes.com/topic/Pinarayi-Vijayan" pg="AS1_InlineMedia#AS1_https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms~Pinarayi Vijayan-https://timesofindia.indiatimes.com/topic/Pinarayi-Vijayan">Pinarayi Vijayan</a> who had sought the actor's opinion on "the attempt by Hindutva forces to infiltrate into <a class="key_underline" href="https://timesofindia.indiatimes.com/india/tamil-nadu" pg="AS1_InlineMedia#AS1_https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms~Tamil Nadu-https://timesofindia.indiatimes.com/india/tamil-nadu">Tamil Nadu</a>."
  <br>
  <br>
  Kamal wrote: "Only change is permanent. No matter how many forces push it back, Tamil Nadu will once again prevail as the forerunner in social reforms. Kerala is standing as an example today. Congrats for that."
  <br>
  <div class="last8brdiv"><div class="sponsor_block clearfix loaded" style="display: none;"><ul class="colombiaSuccess " id="129146-614536721" data-skew="0" data-ad-size="[0,370]" data-expansion-size="[0,480]" data-adwidth="640" data-adheight="360" data-loop="0" data-cb="processCtnAds" data-callback="sponsorAdSuccess" data-position="614536721" data-slot="129146" data-autoplay="false" data-native-vid-tmpl="ctn_belly_vid" data-native-tmpl="ctn_midarticle" data-desc-len="90" style="display: block; width: 100%;"><li><a href="https://ade.clmbtech.com/evnt/click.htm?r=MjExMTI4YjYtZGUwOS00OWQ4LTkwOTAtZTRlMmY4YzYzMGRhLTEwb253OjEyOTE0NjphbGwsNXE2LDV4cSw5bmo6MTQ3MDIwMTg6MjE6MTMzMTAzOTo3MzM6OjoxLjA2OjA6NjE0NTM2NzIxOjE6Mjk1NjI6MDo6OjI6MTIxLjIwMC41NC4yMDY6TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzYxLjAuMzE2My4xMDAgU2FmYXJpLzUzNy4zNjo6MC4wOjA6MDo4ODQtMToxNjoxOjA6MDo0Ojo6MTUwOTYyMDkyODc2MjpmYWxzZQ&amp;fpc=99e43293-2827-4598-9d0d-c435bc993f90-10o79&amp;i=U932w528X919&amp;s=https%253A%252F%252Ftimesofindia.indiatimes.com%252Fcity%252Fchennai%252Fsaffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism%252Farticleshow%252F61453672.cms&amp;u=http%3A%2F%2Fwww.zeeayurveda.com"><img src="https://static.clmbtech.com/ctn/29562/images/1/4d5ffb68e4894fba91c1c7d591c0e194_1492689364595_0.jpg"><span>Improve your power, vigor, vitality &amp; stamina</span><i class="sponsor">ZEEAYURVEDA</i></a></li><li><a href="https://ade.clmbtech.com/evnt/click.htm?r=MjExMTI4YjYtZGUwOS00OWQ4LTkwOTAtZTRlMmY4YzYzMGRhLTEwb253OjEyOTE0NjphbGwsNXE2LDV4cSw5bmo6MTcyNDAwMDY6MjoyMTMyNzkyOjczMzo6OjIuMzY3OTQ4MTAxODkxNzIxOjA6NjE0NTM2NzIxOjE6NDI2OTg6MDo6OjI6MTIxLjIwMC41NC4yMDY6TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzYxLjAuMzE2My4xMDAgU2FmYXJpLzUzNy4zNjo6MC4wOjA6MDoyNTMxLTE6MTY6MTowOjA6NDo6OjE1MDk2MjA5Mjg3NjI6ZmFsc2U&amp;fpc=99e43293-2827-4598-9d0d-c435bc993f90-10o79&amp;i=U932w528X919&amp;s=https%253A%252F%252Ftimesofindia.indiatimes.com%252Fcity%252Fchennai%252Fsaffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism%252Farticleshow%252F61453672.cms&amp;u=http%3A%2F%2Fwww.custom-trackx.com%2Fa860c2d2-aed7-4e80-a5e4-3faf4641310f%3Fadid%3Ddx15%26head%3DBurn_upto_20_kgs_with_this_easy_method%26imag%3D20"><img src="https://static.clmbtech.com/ctn/42698/images/1/14273eeb71eb1757d2034faf2bebde5a_1508757357992_0.jpg"><span>Burn upto 20 kgs with this easy method.</span><i class="sponsor">Nutralyfe</i></a></li></ul><div class="alR"><span class="clmblogo">Recommended By Colombia<i class="clmcup"></i></span></div></div></div><br>
  Kamal pointed out that Tamil Nadu's Dravidian tradition is thousands of years old and said the social revolution brought on by Ramanujam 1,000 years ago is a landmark.
  <div class="last7brdiv"></div><br>
  <div class="last6brdiv"></div><br>
  Kamal wrote, "There is no possibility that the attempt by fascists to shift the world towards the right will succeed. The shift towards the right is only a temporary fashion, a cosmetic change. It will not last. The backward old generation, particularly those belonging to the upper castes, which is rattled by the equality evolving in society, is trying to feed their caste-driven, backward ideology to the young generation by sugar coating it and presenting it as a modern idea."
  <div class="last5brdiv"></div><br>
  <div class="last4brdiv" data-topcmt-status="true"><div class="show_wdgt topcomment" data-plugin="show-comments"><div class="msg"><h2><span>Top</span> Comment</h2><span class="cmnttxt">if Hindus would have adapted terrorism, then shameless chapa like him would not existed.</span><span class="cmntauthor">OMSM</span></div><input type="button" data-plugin="show-comments" data-type="allcomment" class="btn" value="See All Comments" pg="TopComment#SeeAllComments#https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms"><input type="button" data-plugin="show-comments" data-showtype="autofocus" data-type="addcomment" class="btn" value="Add Comment" pg="TopComment#AddComment#https://timesofindia.indiatimes.com/city/chennai/saffron-terrorism-kamal-haasan-says-right-wing-hindus-have-started-employing-terrorism/articleshow/61453672.cms"></div></div><br>
  Stating that the affinity that human race has towards science and wisdom will draw them towards rationalism despite opposition, Kamal said, "The youth in the state are not waiting for the change to happen. They have stepped into the fray to protect Tamil Nadu."
  <div class="last3brdiv"></div><br>
  <div class="last2brdiv"></div><br>
  According to him, the conservatives are not stressing on what needs to be learned from the past tradition. "Destroying agriculture for commercial gains and selling mythology as history are evils they have been tirelessly carrying forward for ages," he wrote.
  <div class="last1brdiv"></div><br>
  <br>

</div>
  </div>
</div>
```

# asp.net - 为什么我的插入没有在数据库中插入记录

> ID：13311853
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:20:06.570
> 
> 标签：asp.net, sql, ado.net

我正在尝试使用以下方法将记录插入数据库。我在按钮单击事件中调用此方法，但由于某些原因没有插入记录。

需要插入四个字段： rpttemplateid - 我从另一个数据库表中获取该字段，所有其他字段都只是静态值。

我在下面做错了什么？

```
public void updatereporttemplate()
{
    string cnn = WebConfigurationManager.ConnectionStrings["Underwriting"].ConnectionString;
    SqlConnection cnn1 = new SqlConnection(cnn);
    cnn1.Open();
    string getrptdesc = "select max(rptdesc) + 1 from report_description where rptdesc < 999 and rptdesc is not null";
    SqlCommand cmd = new SqlCommand(getrptdesc, cnn1);
    SqlDataReader sdr = cmd.ExecuteReader();
    sdr.Read();

    int getcount = int.Parse(sdr[0].ToString());
    sdr.Close();
    string commandtext1 = "INSERT INTO report_template" + "(rpttemplateid,rpttemplatedescr,minsubs,minmebers) " +
          " Values( " + getcount  + "," + "  " + " ,  " +  0  + "," + 0  + ")";
    SqlCommand command1 = new SqlCommand
    {
        CommandText = commandtext1,
        Connection = cnn1

    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:26:41.203

你不见了`command1.ExecuteNonQuery();`

另外，您是否考虑过在表中使用 IDENTITY 列而不是尝试手动设置计数？如果该页面同时被多人点击怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:28:31.300

你需要打开连接

```
cnn1.Open(); 
```

然后执行命令

```
command1.ExecuteNonQuery(); 
```

# java - Java SE + NetBeans - 如何将文本字段分配给 UI 生成器中的数组？

> ID：13311854
> 
> 赞同：1
> 
> 时间：2012-11-09T16:20:09.167
> 
> 标签：java, arrays, netbeans, jtextfield

我在 NetBeans 中生成了一个 UI，它有 16 个 4x4 的文本字段。为了能够动态地遍历它们，我希望将这些文本字段放在一个数组中，以便它们的名称类似于字段 [0] - 字段 [15]，但我还没有找到这样做的方法。编辑器只允许我为每个字段分配一个特定的变量，它不接受“[]”并返回错误消息“组件的名称必须是有效的 Java 变量名称。”。我不希望通过外部修改代码来破坏 UI 生成器的显示，但如果这是这样做的唯一方法，那就去地狱吧。：） 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:33:03.130

不支持这种可变组织。

`initComponents()`我总是通过在通话后添加类似这样的内容来接近它：

```
fields = new JTextField[]{ textField1, textField2, ... }; 
```

# java - 将 ZipEntry 数据写入字符串

> ID：13311856
> 
> 赞同：14
> 
> 时间：2012-11-09T16:20:13.023
> 
> 标签：java, android

我已经从这样的 zip 文件中检索了一个 zip 条目。

```
InputStream input = params[0];
ZipInputStream zis = new ZipInputStream(input);

ZipEntry entry;
try {
    while ((entry = zis.getNextEntry())!= null) {

    }
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这很好用，我`ZipEntry`没问题。

**我的问题**

`ZipEntries`由于它们是 xml 和 csv 文件，我如何将它们的内容转换为字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T16:27:35.383

你必须阅读`ZipInputStream`：

```
StringBuilder s = new StringBuilder();
byte[] buffer = new byte[1024];
int read = 0;
ZipEntry entry;
while ((entry = zis.getNextEntry())!= null) {
      while ((read = zis.read(buffer, 0, 1024)) >= 0) {
           s.append(new String(buffer, 0, read));
      }
} 
```

当您从内部退出时`while`保存`StringBuilder`内容，并重置它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-29T09:14:31.787

使用定义的编码（例如 UTF-8）并且不创建字符串：

```
import java.util.zip.ZipInputStream;
import java.util.zip.ZipEntry;
import java.io.ByteArrayOutputStream;
import static java.nio.charset.StandardCharsets.UTF_8;

try (
  ZipInputStream zis = new ZipInputStream(input, UTF_8); 
  ByteArrayOutputStream baos = new ByteArrayOutputStream()
) {
  byte[] buffer = new byte[1024];
  int read = 0;
  ZipEntry entry;
  while ((entry = zis.getNextEntry()) != null)
    while ((read = zis.read(buffer, 0, buffer.length)) > 0)
      baos.write(buffer, 0, read);
  String content = baos.toString(UTF_8.name());
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-30T13:46:17.067

这是一种不会破坏 Unicode 字符的方法：

```
final ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(content));
final InputStreamReader isr = new InputStreamReader(zis);
final StringBuilder sb = new StringBuilder();
final char[] buffer = new char[1024];

while (isr.read(buffer, 0, buffer.length) != -1) {
    sb.append(new String(buffer));
}

System.out.println(sb.toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-16T14:54:12.160

我会使用 apache 的 IOUtils

```
ZipEntry entry;
InputStream input = params[0];
ZipInputStream zis = new ZipInputStream(input);

try {
  while ((entry = zis.getNextEntry())!= null) {
    String entryAsString = IOUtils.toString(zis, StandardCharsets.UTF_8);
  }
} catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
}
IOUtils.closeQuietly(zis); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-09T04:52:13.547

Kotlin 版本，但也可以在 Java 中使用

```
val zipInputStream = ZipInputStream(inStream)
var zipEntry = zipInputStream.nextEntry
while(zipEntry != null) {
    println("Name of file : " + zipEntry.name)
    val fileContent = String(zipInputStream.readAllBytes(), StandardCharsets.UTF_8)
    println("File content : $fileContent")
    zipEntry = zipInputStream.nextEntry
} 
```

# objective-c - 标量数据类型列表

> ID：13311859
> 
> 赞同：6
> 
> 时间：2012-11-09T16:20:19.507
> 
> 标签：objective-c, types, scalar

我正在寻找Objective C中所有标量数据类型的列表，包括它们的范围（最大值/最小值等）。

对不起这个简单的问题，我真的很难找到这样的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:26:51.923

*   `int` +/- 2,147,483,647 之间的整数值。
*   `unsigned int` 介于 0 和 4,294,967,296 之间的整数值。
*   `float` +/- 16,777,216 之间的浮点值。
*   `double` +/- 2,147,483,647 之间的浮点值。
*   `long` 一个整数值，大小从 32 位到 64 位不等，具体取决于架构。
*   `long long` 一个 64 位整数。
*   `char` 单个字符。从技术上讲，它表示为`int`.
*   `BOOL` 布尔值，可以是 YES 或 NO。
*   `NSInteger` 编译为 32 位架构时，与 相同`int`，编译为 64 位架构时，+/- 4,294,967,296。
*   `NSUInteger` 编译为 32 位架构时，与 相同`unsigned int`，编译为 64 位架构时，值介于 0 和 2^64 之间

[来源](http://www.scribd.com/doc/80232926/17/Exploring-scalar-types)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:24:47.103

1.  char : 一个字符 1 个字节
2.  int :一个整数 — 一个 4 字节的整数
3.  float : 单精度浮点数 4 字节
4.  Double : 双精度浮点数 8 字节
5.  short : 一个 2 字节的短整数
6.  long : 双短 4 字节
7.  long long : 双长 8 字节
8.  BOOL : 布尔值（有符号字符）1 个字节

有关尺寸的更多信息，请查看[此帖子](https://stackoverflow.com/questions/2107544/types-in-objective-c-on-iphone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:41:03.280

整数类型是有符号的 2 的补码或无符号的，并提供标准 C 变体（, , ,`char`和`short`这些`int`变体，请参阅[Wikipedia 上的 C 类型](http://en.wikipedia.org/wiki/C_data_types)），大小可能因 32 位和 64 位环境而异 - 请参阅[64 位计算](http://en.wikipedia.org/wiki/64-bit_computing)。`long``long long``unsigned`

`BOOL`是一个 Objective-C 特殊的，被定义为`signed char`，而它可以取任何值，一个有符号字符可以是常量`NO`并且`YES`被定义为使用。还提供了C9X 类型`_Bool`（又名）。`bool`

`float`&`double`是 IEEE 32 位和 64 位浮点数 - 请参阅 Wikipedia 了解范围。

为所有类型的最小值和最大值提供了标准宏内容，例如`INT_MAX`-`int`再次参见[维基百科上的 C 类型](http://en.wikipedia.org/wiki/C_data_types)。

# php - 如何在 PHP 框架中实现引导类？

> ID：13311864
> 
> 赞同：4
> 
> 时间：2012-11-09T16:20:31.577
> 
> 标签：php, frameworks, bootstrapping

我正在制作自己的 MVC 框架（请不要对我投反对票，因为每个人都想制作一个框架。）等等.. 我想制作一个引导类，就像我在许多框架中看到的那样。我之所以这样做，是因为我决定通过从内部开始学习一个框架来进入下一个层次。但是我在通过它们时遇到了一些问题。但我会在不同的问题中将它们分开。现在澄清我的问题：

*Bootstrapping 类应该具有哪些功能？*你*能给我一些可以帮助我的文章吗？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T17:03:24.657

不应该有“引导类”。这是一个简单的过程，可以包含在一个简单的脚本中，作为应用程序的*入口点。*PHP 不是 Java，因此您不需要在一个类中包含所有内容。

通常应用程序的引导阶段将具有以下职责：

*   设置自动装载机
*   初始化路由机制
*   配置存储抽象（数据库、缓存等）
*   处理用户请求（使用路由）
*   调度到 MVC

应用程序中的引导阶段是应设置对象之间的所有连接的地方。它也是您设置诸如记录器、访问控制和错误处理结构之类的地方。

您可以说[前端控制器](http://martinfowler.com/eaaCatalog/frontController.html)是一部分或引导。

> [*PS*：另外，您可能会发现我的[这个答案](https://stackoverflow.com/a/5864000/727208)很相关，因为它还包含引导文件的示例。]

* * *

### 推荐文章列表：

*   *Martin Fowler 的*[GUI 架构](http://martinfowler.com/eaaDev/uiArchs.html)
**   *Martin Fowler*[控制容器的反转和依赖注入模式](http://martinfowler.com/articles/injection.html)**   [Smalltalk-80系统中模型-视图-控制器用户界面范式的描述](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)*   [了解 JavaServer Pages 模型 2 架构](http://www.javaworld.com/jw-12-1999/jw-12-ssj-jspmvc.html)*   [MVP：Model-View-Presenter C++ 和 Java 的 Taligent 编程模型](http://www.wildcrest.com/Potel/Portfolio/mvp.pdf)**

 **> [最后两个链接涵盖了受 MVC 启发的 3 个主要模式中的两个（Model2 MVC 和 MVP），因为经典 MVC 实际上非常不切实际（实际上几乎不可能）用于 Web 应用程序。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T16:26:52.763

引导只是为每个请求执行的一段代码。
您可以根据自己的框架目录结构随时放置函数或对象。

它不能有某些特定的功能**

# jquery - 无法获取 JSON 数据以在 ASP.NET 的 jtemplate 中显示

> ID：13311868
> 
> 赞同：0
> 
> 时间：2012-11-09T16:20:37.593
> 
> 标签：jquery, asp.net, json, jtemplates

我在这里使用 jQuery 做非常基本的东西，返回的 JSON 数据，尝试在 aspx 页面上使用 jTemplates 显示它。我所有的代码都是从我搜索过的示例中直接复制粘贴。没有原始代码。我已经能够调试到从我的 web svc 返回的 result.d 数据是 JSON 数据的地步。

```
{"MG":{"Status":"Pending",... 
```

我的模板是：

```
<script type="text/html" id="TemplateResultsTable">
{#template MAIN}
 <table  cellpadding="10" cellspacing="0" border="1">
  <tr>
    <td>Status</td>
    <td>{$T.MG.Status}</td>
    <td>Title</td>
    <td>Price</td>
  </tr>
 </table>
 {#/template MAIN}  
</script> 
```

我设置模板的 jquery 代码是：

```
$('#InnerResult').setTemplate($('#TemplateResultsTable').html());
$('#InnerResult').processTemplate(result.d); 
```

而且我有一个 div（实际上是面板）ID 为 InnerResult。

模板中的表格显示得很好，所以我知道那部分正在工作。只是 $T.MG.Status 拒绝显示数据。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:19:15.347

脱发后才发现！我看到的数千个 ASP.NET、JSON 示例中没有一个提到您不能使用字符串形式的 JSON 数据。您必须执行以下操作：

```
var obj = JSON.parse(result.d); 
```

现在我可以轻松引用 {$T.MG.Status}。

# c# - 解析 MSMQ 路径以获取目标计算机地址

> ID：13311870
> 
> 赞同：2
> 
> 时间：2012-11-09T16:20:38.633
> 
> 标签：c#, .net, vb.net, msmq

.NET 框架或 Win32 API 中是否已经提供了任何东西来解析 MSMQ 路径？我只需要从 MSMQ 路径字符串中获取目标计算机的网络地址。我希望有一个类似于该类的简单类`SqlConnectionStringBuilder`，或者其他什么，但如果有，我似乎找不到它。例如：

*   `Formatname:DIRECT=TCP:192.168.1.1\private$\MyQueueName`-->`192.168.1.1`
*   `Formatname:DIRECT=OS:MyComputerName\private$\MyQueueName`-->`MyComputerName`

我知道我可以使用 String 方法或 RegEx 解析自己，但我希望可能有一个工具已经正确支持 MSMQ 路径语法的所有变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:53:27.270

您可以围绕 mqoa30.tlb创建一个[运行时可调用包装器](http://msdn.microsoft.com/en-us/library/8bwh56xe.aspx)

这可以在 system32 文件夹（或 wow64）中找到

然后，您可以创建 MSMQManagement 对象的实例并调用[Machine](http://msdn.microsoft.com/en-us/library/windows/desktop/ms703262%28v=vs.85%29.aspx)属性。

# c# - 哪种设计模式更适合这种情况

> ID：13311872
> 
> 赞同：0
> 
> 时间：2012-11-09T16:20:42.490
> 
> 标签：c#, design-patterns, interface, abstract

我将从 3D 模型生成 2D 图像并对图像进行一些计算并从中产生一些结果。结果将附加在该 2D 图像的顶部作为其标题。

*   根据参数（DiagramType），可以从特定场景生成三种不同类型的图像。
*   还可以通过两种不同的方式创建图像：光线追踪或通过 GPU。因此，负责生成图像的方法“CreateImage”可能有两个不同的签名（不同数量的输入）。
*   这些不同类型的图表或渲染方法之间有一些共同的方法。

哪种设计模式更适合这种情况？

对于这三种图表类型或接口，使用抽象类（因为有一些可以继承的常用方法）会更好吗？

我最关心的是这个'CreateImage'方法，它可以有不同的签名关于所使用的方法，这样每个图表类型都会有一个'CreateImage'方法，而不管图表类型和渲染方法。（我不确定这是否可能完全）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:24:48.383

“三个不同的 xxx 与两个不同的 yyy”相互依赖，对我来说听起来就像是桥模式。

换句话说，你有一个 xxx 的层次结构，一个 yyy 的层次结构，并且 xxx 接受注入的 yyy。

# iphone - 购买哪款 iPhone 进行应用测试

> ID：13311873
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:20:51.547
> 
> 标签：iphone, ios, testing

我对iOS开发相当陌生。我之前为 Androud 开发了几个应用程序，我想为 iOS 编写它们。这些应用程序将使用 CoreLocation、AVFoundation 等——主要是用于音乐和本地化事件的应用程序。我的问题是：我应该购买哪种 iphone 型号来测试我的应用程序。我目前正在考虑 3GS 或 iPhone4。一些为iOS开发的朋友推荐购买3GS——它可以运行iOS6并且包含了所有必要的功能——gps、加速计、指南针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:25:13.497

不要总是从所有选项中购买最弱的模型。3GS 可以运行 iOS 6，它拥有所有“核心”功能，是的，但在不久的将来它还没有生命迹象。你可能明天开始开发应用程序，也就是 iOS 7 发布后的第二天，结果发现不支持 iPhone 3GS。

如果你真的很认真，你至少应该买一部 iPhone 4S，或者至少，一部 iPhone 4。如果你买一部 iPhone 3GS，从长远来看可能是浪费钱。

如果这不适合您，那么 iPod Touch 5 或 iPod Touch 4 将非常适合开发，但有一些限制，但它们都将比 3GS 支持更长的时间（我的猜测）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:26:39.173

您可以使用的设备越多越好。您朋友对 3GS 的建议可能有点过时，但如果您的应用程序在 4 年之久的硬件上运行良好，那么您肯定会为 iPhone 5 及更高版本进行优化。

拥有 iPhone 5 对于测试不同的纵横比以及它如何影响您的应用程序非常有用。由于 3GS 可能不支持 iOS7，iPhone 5 也将证明你的未来。

所以基本上，如果能买得起旧的 iPhone 3GS 和 iPhone 5（或同等一代的 iPod Touch），我会两者兼得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:27:32.597

由您决定哪种手机最适合您。

你想为 iPhone 3GS 开发吗？很可能在 iPhone 的下一个版本中，Apple 将放弃对 3GS 的支持。所以为了让自己适应未来，我会选择 4s。通过这种方式，您可以拥有 2 年的设备开发时间，并且还可以处理 3GS 上不可用的东西。

此外，3GS 可能缺少一些在 4S 上发现的硬件（我目前没有确切的列表）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:27:47.183

我实际上会选择 iPhone 4，原因如下：

*   在许多其他设备（iPhone 4S、iPhone 5、2 代 iPod Touch）中都可以找到 Retina 屏幕，这对于验证您的界面看起来是否正常至关重要
*   iPhone 4 更有可能支持 iOS 的未来版本。拥有巨大的采用率对于实时应用程序可能非常重要（当您遇到错误并必须重现它时）
*   如果我没记错的话，3gs 不支持多任务处理，这也可能会导致一些错误。
*   根据许多调查，拥有 iPhone 4 设备的用户数量相当大，并且将（如果还没有的话）超过 3gs 用户。
*   iPhone 4 好多了 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T16:32:45.827

理想情况下，我会选择 3GS 和 iPhone 4+，因为它们完全不同。

3GS 最适合测试您的应用程序将仅使用 256MB 内存运行。后来的手机有 512MB+。3GS 还测试了非视网膜屏幕的使用情况。后来的手机有高分辨率屏幕。

如果没有这两种类型，您将无法真正测试它们。模拟器有帮助，但不是 100% 的测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T16:42:03.313

Keynote 的模拟器可以创造奇迹并模拟超过 2200 种设备。

[http://mite.keynote.com/](http://mite.keynote.com/)

# jquery - 当滑块位于固定定位元素内时，FlexSlider 不会向下缩放

> ID：13311879
> 
> 赞同：0
> 
> 时间：2012-11-09T16:21:10.853
> 
> 标签：jquery, css, responsive-design, flexslider

我正在使用[FlexSlider](http://www.woothemes.com/flexslider/) jQuery 插件在我的网站主页上运行滑块。我选择了这个滑块，因为它反应灵敏。我遇到的一个大问题是我将它放在一个`position:fixed`元素内部，它导致响应式缩放出现问题。当我让浏览器窗口变宽时，幻灯片会放大，太棒了。但是，当我缩小窗口时，幻灯片不会缩小。这只发生在滑块位于固定元素内时。FlexSlider 提供的演示也会出现这个问题。在演示中，要使其中断，您所要做的就是添加`position:fixed`到`<section class="slider">`元素中。

有人对这个问题的解决方法有想法吗？将我的容器元素更改为非固定元素不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:46:50.657

我刚刚修好了。我需要设置固定元素的宽度。`width:100%`工作。

# c++ - FindFirstFile LPCSTR

> ID：13311889
> 
> 赞同：3
> 
> 时间：2012-11-09T16:21:48.947
> 
> 标签：c++, windows, string, winapi, lpcstr

你好，我的代码有问题。

```
LPCSTR mergeString(LPCSTR firstString, std::string secondString)
{
    string convertedString = ConvertString(firstString);
    LPCSTR mergedString;
    int i = convertedString.size();

    convertedString.insert(i, secondString);
    mergedString = (convertedString.c_str());

    return mergedString;
}

void GetFiles(LPCSTR path)
{
    WIN32_FIND_DATA File_Data; 
    LPCSTR lPath = mergeString(path,"\\*.txt");
    FindFirstFile(lPath, &File_Data);
    wcout << File_Data.cFileName;
} 
```

你传入你想在GetFiles（LPCSTR路径）中使用的路径然后我使用mergestring函数将路径与扩展名（\ * .txt）合并在一起，一切正常，除非它返回LPCSTR，然后它只是很多奇怪的字符，我不知道为什么或者这是一个更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:52:36.663

您的代码*不必要地*复杂。如果您只想为`\*.txt`输入路径字符串添加后缀，您可以简单地使用`std::string`其重载`operator+`.

然后，如果您想将 a 传递`std::string`给具有`const char*`(ie `LPCSTR`) 参数的 Win32 API，您可以使用`std::string::c_str()`方法：

```
void GetFiles(LPCSTR path)
{
    WIN32_FIND_DATA fileData; 
    std::string searchPath(path);
    searchPath += "\\*.txt";

    FindFirstFile(searchPath.c_str(), &fileData);
    wcout << fileData.cFileName;
} 
```

另请注意，在现代世界中，您应该使用 Unicode (UTF-16) 进行 Win32 编程；so`const wchar_t*`和`std::wstring`是比`const char*`and更好的选择`std::string`。此外，我只是使用`std::wstring`类作为参数，而不是原始`wchar_t`指针。

```
void GetFiles(const std::wstring& path)
{
    std::wstring searchPath = path + L"\\*.txt";
    WIN32_FIND_DATA fileData; 
    FindFirstFile(searchPath.c_str(), &fileData);
    std::wcout << fileData.cFileName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:27:31.447

您的`GetFiles`函数正在返回一个指向内存的指针，该指针不再有效，`File_Data.cFileName`只能在其中使用，`GetFiles`因为这`File_Data`是定义的位置。最简单的解决方案是使用 C++ 字符串类`std::string`。

```
std::string GetFiles(LPCSTR path)
{
    WIN32_FIND_DATA File_Data; 
    LPCSTR lPath = mergeString(path,"\\*.txt");
    FindFirstFile(lPath, &File_Data);
    return File_Data.cFileName;
} 
```

由于这种原因（还有更多），不必要地使用指针是一个坏习惯。

您的 mergeString 函数也应该用更少的指针重写。

```
std::string mergeString(LPCSTR firstString, std::string secondString)
{
    string convertedString = ConvertString(firstString);
    int i = convertedString.size();

    convertedString.insert(i, secondString);
    return convertedString;
} 
```

# javascript - 如何在保留表格大小的同时用另一个单元格替换表格单元格

> ID：13311890
> 
> 赞同：1
> 
> 时间：2012-11-09T16:21:48.440
> 
> 标签：javascript, html, css

考虑以下 jsFiddle - [http://jsfiddle.net/mark69_fnd/rcCeG/17/](http://jsfiddle.net/mark69_fnd/rcCeG/17/)

虽然它使用了 YUI，但代码应该很清楚：

```
YUI().use('node', function (Y){
    var td = Y.one('#replaceMe'),
        newTd = Y.Node.create('<td><input/></td>'),
        w = td.getDOMNode().getBoundingClientRect().width,
        inputNode = newTd.one('input');

    w -= parseFloat(td.getComputedStyle('paddingLeft')) || 0;
    w -= parseFloat(td.getComputedStyle('paddingRight')) || 0;
    w -= 2 * parseFloat(td.getComputedStyle('borderWidth')) || 0;

    newTd.setStyle('width', w + 'px');
    w -= 2 * parseFloat(inputNode.getComputedStyle('borderWidth')) || 0;
    inputNode.setStyle('width', w + 'px');

    td.replace(newTd);
});​ 
```

它所做的是将给定表格中的一个单元格替换为另一个包含输入框的单元格。

现在，我必须执行一些宽度计算才能让替换保留表格大小。特别困扰我的是，我必须明确设置输入的宽度，即使它在 CSS 中设置为 100%：

```
table, td, th {
    border: solid 1px black;
}

table td, table th {
    padding: 2px;
}

input {
    border: 1px solid #cbcbcb;
    background-color: #FFFEBB;
    width: 100%;
    height: 100%;
} 
```

如果我不设置它，那么它看起来很丑 - 不尊重正确的填充，我不明白为什么。

请告诉我在保留表格大小的同时用另一个单元格替换一个单元格的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:11:10.833

问题是表格单元格的宽度来自它的孩子的宽度。100% 的宽度可以很好地调整到它的孩子的宽度......如果作为 td 的孩子的输入决定了 td 的宽度，那么 100% 会做什么？它不会做任何事情......它会将输入保持在默认大小。

基本上，根据其内部内容调整的元素内的百分比宽度值将与其自然大小相关。还有一件事：父级的宽度将始终等于内部内容的相同自然大小。

您也可以使用浮点数看到这种行为：jsfiddle.net/joplomacedo/gBvn4/

我希望我已经说清楚了。我现在很着急，不能花时间清理或更好地构建答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:37:51.347

为什么不一次明确地设置所有单元格的宽度和高度？：

```
table th, table td {
    width: 25px;
    height: 25px;
} 
```

[http://jsfiddle.net/pitaj/rcCeG/13/](http://jsfiddle.net/pitaj/rcCeG/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:38:01.300

尝试添加`display: block;`

```
input {
    border: 1px solid #cbcbcb;
    background-color: #FFFEBB;
    display: block;
    width: 100%;
    height: 100%;
} 
```

您可能需要使用填充或浮动，但通常它应该可以工作。

# android - 将数据插入数据库

> ID：13311896
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:22:13.663
> 
> 标签：android, database

我正在制作一个安卓测验应用程序。有一个问题四个答案，四个答案之一是正确的。当用户选择错误答案时游戏结束，所以我想将这个问题和真实答案插入数据库以在列表视图中显示。但这对我来说太难了，请帮我一些代码。这是我选择的答案方法：

```
private void onOptionSelected(String option){

    if(!isGamePaused && !isGameEnded) { 
        ATriviaQuestion tTQuestion = myListOfTriviaQuestions.get(currentQuestionNumber);
        if(option.equals(tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1))) {
            correct += 1;
            remainingTime = mySecondsPassed;
            totalPoints += remainingTime * pointsPerRemainingSecond; 
            totalPoints += pointsPerCorrectAnswer;  
            Toast.makeText(PlayGame.this, "chuan cmnr", Toast.LENGTH_SHORT).show();
        }
        else{questionsAsked = totalQuestions;
            incorrect += 1;
            totalPoints -= pointsPerWrongAnswer;
            Toast.makeText(PlayGame.this,tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1), Toast.LENGTH_LONG).show();
            isGameEnded=true;
            EndGame();

        }

        mySecondsPassed = config.GetTimeToAnswer();
        UpdateTimerColors(mySecondsPassed);

        if(questionsAsked >= totalQuestions){   
            isGameEnded=true;
            EndGame();
            DisplayResults();
        } else {                    

            currentQuestionNumber=GenerateQuestionNumber();
            PopulateQuestion();
        }

    }else{
        PausedOrEndedGameResponse();
    }
} 
```

这是我的 database.java

```
 public Quanly_congviec(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);

}

@Override
public void onCreate(SQLiteDatabase db) {

    String SQL_String = "CREATE TABLE " + ten_table + "("
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," 
            + KEY_NOIDUNG_CONGVIEC + " TEXT,"
            + KEY_THOIGIAN_THUCHIEN + " TEXT, "
            + KEY_MUCDO_QUANTRONG + " TEXT" + ")";
    db.execSQL(SQL_String);

}
@Override
public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {

    db.execSQL("DROP TABLE IF EXISTS " + ten_table);

    onCreate(db);   
}

public List<Congviec> getAllCongviec() {
    List<Congviec> CongviecList = new ArrayList<Congviec>();
    String[] ds_dieukien_loc=null; 

    String selectQuery = "SELECT  * FROM " + ten_table;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, ds_dieukien_loc);

    if (cursor.moveToFirst()) {
        do {
            Congviec Congviec = new Congviec();
            Congviec.set_id(Integer.parseInt(cursor.getString(0)));
            Congviec.setNoidung_congviec(cursor.getString(1));
            Congviec.setThoigian_thuchien(cursor.getString(2));
            Congviec.setMucdo_quantrong(cursor.getString(3));

            CongviecList.add(Congviec);
        } while (cursor.moveToNext());
    }
    db.close();
    return CongviecList; 
```

}

```
public void them_congviec(Congviec congviec) {
     SQLiteDatabase db = this.getWritableDatabase();
     String nullColumnHack=null; 
     ContentValues values = new ContentValues();
     if (congviec.get_id()!=-1) values.put(KEY_ID,congviec.get_id());
     values.put(KEY_NOIDUNG_CONGVIEC, congviec.getNoidung_congviec()); 
     values.put(KEY_THOIGIAN_THUCHIEN, congviec.getThoigian_thuchien()); 
     values.put(KEY_MUCDO_QUANTRONG, congviec.getMucdo_quantrong()); 
     db.insert(ten_table, nullColumnHack, values);
     db.close();        
}

public void xoatatca_congviec() {
     SQLiteDatabase db = this.getWritableDatabase();
     String whereClause="";
     String[] whereArgs=null;
     db.delete(ten_table, whereClause, whereArgs);          
     db.close();        
}

public void xoa_1_congviec(int id){
    SQLiteDatabase db= this.getWritableDatabase();
    db.execSQL("delete from  " + ten_table + " where _id="+id);
    db.close();
}

public int sua_1_congviec(Congviec congviec) { 
     SQLiteDatabase db = this.getWritableDatabase(); 
     ContentValues values = new ContentValues(); 
     values.put(KEY_NOIDUNG_CONGVIEC, congviec.getNoidung_congviec());  
     values.put(KEY_THOIGIAN_THUCHIEN, congviec.getThoigian_thuchien());  
     values.put(KEY_MUCDO_QUANTRONG, congviec.getMucdo_quantrong());  

     String whereClause=KEY_ID + "=?"; 
     String[] whereArgs={String.valueOf(congviec.get_id())}; 
     return db.update(ten_table, values, whereClause, whereArgs); 
    } 
```

}

在数据库表中有三行，但我想在第 1 行插入问题，第 2 行和第 3 行的真实答案为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:57:34.450

最好的数据库设计是为每个问题及其*所有*答案保留一行。对于一个有四个答案的问题，其中一个是正确的，列名可以是

_ID 问题 CorrectAnswer Incorrect1 Incorrect2 Incorrect3 Order

(I'd use order to set the order in which questions should appear).

An alternative would be one table to store questions, and another to store answers for each question, but the first option is a lot more simple to handle.

Final note: If your first language isn't English, it's natural to use your native language for variable and column names. Alas, most developers use English. Your code is much less readable for *me*, because I can't read what is (I presume) Vietnamese. It's unfair, but there it is.

# python - 使用 Django ORM 处理大量大记录

> ID：13311898
> 
> 赞同：4
> 
> 时间：2012-11-09T16:22:21.793
> 
> 标签：python, django, django-orm

我有一个包含大约 30k 记录的表，我正在尝试使用 Django 的 ORM 对其进行迭代和处理。每条记录都存储几个二进制 blob，每个二进制 blob 的大小都可以是几 MB，我需要处理这些二进制 blob 并将其写入文件。

但是，由于内存限制，我在使用 Django 时遇到了麻烦。我的系统上有 8GB 内存，但在处理了大约 5k 条记录后，Python 进程消耗了全部 8GB 内存并被 Linux 内核杀死。我尝试了各种技巧来清除 Django 的查询缓存，例如：

1.  定期调用`MyModel.objects.update()`
2.  环境`settings.DEBUG=False`
3.  通过定期调用 Python 的垃圾收集器`gc.collect()`

然而，这些似乎都没有任何明显的影响，我的进程继续经历某种内存泄漏，直到它崩溃。

还有什么我可以做的吗？

由于我一次只需要处理一条记录，并且在此过程中我不需要再次访问同一条记录，因此我不需要保存任何模型实例，或者一次加载多个实例。您如何确保只加载一条记录并且 Django 不缓存**任何内容**并在使用后立即取消分配所有内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:36:16.620

尝试使用迭代器。

> QuerySet 通常在内部缓存其结果，以便重复评估不会导致额外的查询。相比之下，iterator() 将直接读取结果，而无需在 QuerySet 级别进行任何缓存（在内部，默认迭代器调用 iterator() 并缓存返回值）。对于返回大量只需要访问一次的对象的 QuerySet，这可以带来更好的性能并显着减少内存。

这是 django 文档的引用：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#iterator](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iterator)

# asp.net-mvc - 模型绑定集合时参数名称为“索引”时的模型绑定问题

> ID：13311912
> 
> 赞同：0
> 
> 时间：2012-11-09T16:23:02.570
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我的控制器操作在这里：

```
[HttpPost]
public ActionResult Index(List<Widget> widgets, int index)
{
    widgets.RemoveAt(index);
    return View(widgets);
} 
```

我对此操作的帖子如下所示：

```
[0].Name    a
[1].Name    b
[2].Name    c
index   1 
```

当我调试时，我看到我的列表中只有一项。我可以通过将参数名称从 index 更改为 _index 来解决此问题。

我找不到索引是保留字的任何内容。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:36:27.013

Mvc 模型绑定可以通过将连续索引绑定到集合中的项目来处理列表，如您的示例所示。

但是，您可以使用任何给定的键使 mvc 绑定，它通过使用具有相同特异性的表单字段来实现这一点`index`。

例如

```
 A.index = "aaa"
 A[aaa].name = "hello"
 A.index = "bbb"
 A[bbb].name = "world" 
```

Phil haack 对此 [http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx提供了一个很好的教程](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

Mvc maybe getting confused at this point and trying to invoke this type of binding

# php - 跨多个子域/站点共享会话 ID

> ID：13311916
> 
> 赞同：0
> 
> 时间：2012-11-09T16:23:18.640
> 
> 标签：php, iis-6, sessionid

> **可能重复：**
> [跨域 PHP 会话](https://stackoverflow.com/questions/1339984/cross-domain-php-sessions)

我有一个 IIS6/WIMP 系统。

当用户访问以下页面时：

[http://subdomain1.domain.com](http://subdomain1.domain.com)

然后是一个页面：

[http://subdomain2.domain.com](http://subdomain2.domain.com)

我需要会话 ID 保持不变。我不需要保留会话变量，只需要保留会话 ID。每个子域都在 IIS 中设置为单独的站点。

我想通过 IIS 配置它，但如果我必须通过 php 来配置它也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:27:54.280

您应该更改`session.cookie_domain`php.ini 文件中的指令，或者您可以使用 PHP ini_set 函数。

您可以使用[ini_set](http://php.net/manual/en/function.ini-set.php)函数更改它，如下所示：

```
ini_set('session.cookie_domain', '.domain.com'); 
```

您应该在引导级别的某个地方执行此操作。这应该有效。我有类似的情况，我必须在 www.domain.com 上创建会话，然后在 www.subdomain.domain.com 上使用该会话。而且效果很好。

希望这可以帮助！

# c++ - 让这个领域重演？

> ID：13311918
> 
> 赞同：0
> 
> 时间：2012-11-09T16:23:23.163
> 
> 标签：c++

这是我为 compsci 分配的任务，我被困在如何让星域“*”重复用户想要多少次的最后。

编写一个程序，打印出一系列星域（即“*”）。每个字段将有 n 行和 m 列。允许用户输入行数（至少 1 但不超过 5）和列数（至少 5 但不超过 50）以及字段数（至少 3 但不超过 10） . 每个字段必须由 3 个完整的空白行分隔。

您的程序必须至少包含两个功能：一个从用户那里获取输入数据，另一个用于绘制每个字段。使用 for 循环来构造字段，以及打印出多个字段。不要使用字符串“<em>”。而是打印出单个“</em>”。

代码

```
#include <iostream>

using namespace std;

void displayField(int numrows, int numcolums);

void getData (int numrows, int numcolumns, int numfields);

const char c = '*';

int main(void)
{
    int numrows, numcolumns, numfields;

    cout << "Welcome to the banner creation program!" << endl;

    cout << "Enter the number of rows (1 - 5) --> ";
    cin >> numrows;

    if(numrows<1 || numrows>5){
        cout << "Your entered value is outside the range!" << endl;
        cout << "Program will now halt..." << endl;
        exit(0);}

    cout << "Enter the number of columns (5 - 50) --> ";
    cin >> numcolumns;

    if(numcolumns<5 || numcolumns>50){
        cout << "Your entered value is outside the range!" << endl;
        cout << "Program will now halt..." << endl;
        exit(0);
    }

    cout << "Enter the number of rows (3 - 10) --> ";
    cin >> numfields;

    if(numfields<3 || numrows>10){
        cout << "Your entered value is outside the range!" << endl;
        cout << "Program will now halt..." << endl;
        exit(0);
    }
for(int i=1; i<=numrows; i++){
    for (int j=1; j<=numcolumns; j++)
            cout << c;
        cout <<endl;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:30:02.520

把事情分解...

1）对于每个字段，有许多行。

2）每一行有很多列

3) 每列都有一个字符，'*'

现在这样写，我们知道我们需要嵌套 3 个不同的循环。但也有限制。

在每一行的末尾，我们需要开始一个新行。

在每个字段的末尾，我们需要三个空行。

```
for (int i = 0; i < numFields; i++) {
  for (int j = 0; j < numRows; j++) {
    for (int k = 0; k < numColumns; k++) {
      cout << c;
    }
    cout << endl;
  }
  cout << endl << endl << endl;
} 
```

此外，您应该仔细检查您的工作。我注意到您在错误的地方使用了一些变量*提示提示*。

# cmd - CMD：独立于窗口高度设置缓冲区高度

> ID：13311924
> 
> 赞同：10
> 
> 时间：2012-11-09T16:23:37.607
> 
> 标签：cmd

我最近了解到，我可以控制运行我的程序的 CMD 窗口的大小`mode x,y`。但是我最近注意到这会设置*缓冲区*大小，并且窗口将调整以匹配或最大化屏幕大小。

我想使用`mode 100,50`窗口大小，但我也想保留一个更大的缓冲区——至少我想要的开发`mode 100,9999`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-12T20:52:06.560

我不认为有一个本地批处理命令可以独立控制缓冲区和窗口大小。.NET 可以控制两者，但我认为 VBScript 或 JScript 无法访问该功能。但是 powershell 可以:-) 请参阅[如何扩展 Windows PowerShell 控制台的宽度？](http://blogs.technet.com/b/heyscriptingguy/archive/2006/12/04/how-can-i-expand-the-width-of-the-windows-powershell-console.aspx)

值得庆幸的是，当 PowerShell 退出时，新设置会保留在 CMD 窗口中。

重要的是窗口大小始终小于或等于缓冲区大小。为了简化事情，我首先使用 MODE 将窗口和缓冲区都设置为所需的窗口大小，然后使用 powershell 设置缓冲区大小。

这是一个简单的**conSize.bat**混合批处理/powershell 脚本，它将大小作为参数：

```
@echo off
:conSize  winWidth  winHeight  bufWidth  bufHeight
mode con: cols=%1 lines=%2
powershell -command "&{$H=get-host;$W=$H.ui.rawui;$B=$W.buffersize;$B.width=%3;$B.height=%4;$W.buffersize=$B;}" 
```

要获得所需的尺寸，您只需使用

```
call conSize 100 50 100 9999 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:37:06.367

有一个“ConSetBuffer”二进制文件可以专门执行此操作，我发现它可以可靠地工作。[它和相关的控制台实用程序可在此页面上](http://ss64.net/westlake/nt/index.html)的“conutils.zip”链接中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T00:18:36.443

我为 Windows 编写了一个小型[应用程序](http://www.tenox.net/out/#cmdmax)，允许“最大化”窗口和缓冲区。它可以很容易地扩展以允许使用自定义值传递参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:48:52.477

这里有另一个变体：

```
/*
@echo off & mode 100,50
set "cscfile="
set Pathfile="%WinDir%\Microsoft.NET\Framework\csc.exe"
for /f "delims=" %%a in ('dir /b /a-d /s %PathFile%') do set "cscfile=%%a"
if defined cscfile (
  %cscfile% /nologo /out:"%~0.exe" %0
) else exit /b
"%~0.exe"
del "%~0.exe" 
cmd /k
*/

using System;

class Program
  {
     static void Main()
     { 
        Console.SetBufferSize(100, 9999); 
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("Current Logged UserName: " + Environment.UserName);
        Console.ResetColor();
        Console.WriteLine("[Enter] to continue");
        Console.ReadLine();
     }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-22T17:18:47.887

这个问题的答案不起作用，因为我收到关于发送到 PowerShell 命令的变量的错误，所以我修改了工作。

PowerShell 命令只是添加`uiHeightBuffer`到`uiHeight`变量以显示滚动条。

* * *

**编辑：**添加高度缓冲区作为第三个参数和 TRUE 或 FALSE 作为第四个参数以启用或禁用滚动条。

当在这种情况下不需要滚动条时，我发现这在退出带有小消息的脚本时很有用。

同样要启用 UTF-8 编码，您必须在 `:CMDSIZE' 调用的开头设置默认值并在结尾设置它，否则，字体大小会有点滑稽。

如果您不想影响这一点，则省略`chcp 850 >NUL &`and是您会做的。`chcp 65001 >NUL &`

**这适用于`Version: 1909`Windows 10。**

```
@echo off
title %~nx0
rem Based on this thread here: https://stackoverflow.com/a/13351373
goto MYROUTINE
:CMDSIZE
chcp 850 >NUL & set "uiWidth=%1" & set "uiHeight=%2"
mode %uiWidth%,%uiHeight%
if %4==TRUE (set /a "uiHeightBuffer=uiHeight+%3")
if %4==TRUE (powershell.exe -ExecutionPolicy Bypass -Command "&{$H=get-host;$W=$H.ui.rawui;$B=$W.buffersize;$B.width=%uiWidth%;$B.height=%uiHeightBuffer%;$W.buffersize=$B}")
if %4==FALSE (powershell.exe -ExecutionPolicy Bypass -Command "&{$H=get-host;$W=$H.ui.rawui;$B=$W.buffersize;$B.width=%uiWidth%;$B.height=%uiHeight%;$W.buffersize=$B}")
chcp 65001 >NUL & goto :EOF
:MYROUTINE
call :CMDSIZE 255 44 222 TRUE
title Do your routine here...
echo Do your routine here...
echo/ & pause
goto :EXITROUTINE
:EXITROUTINE
call :CMDSIZE 40 2 0 FALSE
title Exiting routine message...
echo Exiting routine message...
set /p "=" <NUL
ping localhost -n 3 >NUL & exit 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-15T10:04:49.147

我找到了一种在不影响窗口大小的情况下调整缓冲区大小的方法。由于批处理工作方式的缺陷，它可以工作，但它可以完成工作。

```
mode 648 78 >nul 2>nul 
```

它是如何工作的？该命令存在语法错误，应为“mode 648, 78”。由于批处理的工作方式，缓冲区大小将首先调整为 648，然后窗口调整大小会出现，但由于语法错误，它永远不会完成。瞧，缓冲区大小已调整，窗口大小保持不变。这会产生一个丑陋的错误，所以要摆脱它，只需添加“>nul 2>nul”就可以了。

# c# - 如何从 ASP.NET MVC 操作方法返回 JSON 对象

> ID：13311927
> 
> 赞同：0
> 
> 时间：2012-11-09T16:23:40.057
> 
> 标签：c#, javascript, .net, asp.net-mvc

当我在控制器中时，我需要将实体对象 ( `Product`) 传递回视图以在 JavaScript 中使用。

我将模型对象从动作方法传递给视图。模型对象包含视图需要显示的一些数据，而且（我正在努力解决的一点）产品数据的 JSON 版本。

在视图中，我想将产品对象作为 JavaScript 来使用。

控制器：

```
public ActionResult ViewProduct( int  productKey )
{
    VendorPage page = PageManager.Instance().GetProductPage( );
    Product product = this.repoProducts.Get<Product>( App.GetVendorKey(), productKey );

    JavaScriptSerializer    sz = new JavaScriptSerializer();
    string json = sz.Serialize( new { pr = product } );

    ProductPageModel  ppm = new ProductPageModel( page, product );
    // Embed the product as json in the model
    ppm.js = json;

    if ( product != null )
    {
        return View( "Product", ppm );
    }
    return null;
} 
```

视图 - 使用模型作为 ProductPageModel @model SiteEngine.SiteEngineUI.Models.ProductPageModel html......

所以，问题是：我如何在 JavaScript 中获得对产品的访问权限，以便执行类似...

```
alert( product.Name ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:56:42.500

在视图上试试这个：

```
<script type="text/javascript">
  var product = jQuery.parseJSON(@Model.js);
</script> 
```

如果您不使用 jQuery，请查看[http://www.json.org/js.html](http://www.json.org/js.html)

# ruby-on-rails - 如何在 Heroku 上找到内存泄漏？

> ID：13311930
> 
> 赞同：16
> 
> 时间：2012-11-09T16:23:50.117
> 
> 标签：ruby-on-rails, ruby, heroku, ruby-on-rails-3.2, ruby-1.9.3

我有一个 Rails 3.2.8 应用程序在 Heroku Cedar 上使用 Ruby 1.9.3 运行。该应用程序在启动时运行良好，但在连续使用一天左右后，我开始在我的日志中看到 R14 错误。一旦内存错误开始，它们就永远不会消失，即使应用程序空闲了几个小时。

垃圾收集器不应该在一段时间后清理未使用的对象并减少内存负载吗？Heroku 上似乎没有发生这种情况。通常，尽管结果是分页的，但在运行一些包含数千行数据的报告后，内存使用量开始攀升。

如何找到内存泄漏？像 bleak_house 这样的插件已经过时或者不能在 Heroku 环境中很好地运行。我可以调整 GC 设置以使其更具侵略性吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T18:28:33.920

GC 应该进行清理，并且可能会这样做。

`GC.start`您可以使用;强制 GC 如果没有收集很多对象，这将是，但我怀疑这不是问题。

您是否有可能通过保留缓存副本或其他方式以某种方式创建一堆对象并且从不释放它们？

我不熟悉用于检查这一点的现有工具，但您可能想使用`ObjectSpace`. 例如：

```
ObjectSpace.each_object.with_object(Hash.new(0)){|obj, h| h[obj.class] +=1 }
# => a Hash with the number of objects by class 
```

例如，如果您的某个课程的号码出乎意料，您就会更好地了解在哪里寻找。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T18:44:39.767

安装 New Relic 插件。它有许多有用的指标，您可以使用它们来找出泄漏的来源。我认为尝试查看代码的哪一部分执行时间最长并可能尝试优化它通常是一个更好的主意，而不是直接调整 GC。

例如，New Relic 包含的一些不错的功能是能够查明运行时间最长的 SQL 查询的来源。我鼓励你试一试。

# sql-server - 外键引用多个表

> ID：13311932
> 
> 赞同：2
> 
> 时间：2012-11-09T16:24:08.497
> 
> 标签：sql-server, database, database-design, relational-database, database-schema

我有一个带有唯一标识符的列，它可能会引用四个不同表中的一个。我已经通过两种方式看到了这一点，但两者似乎都是不好的做法。

首先，我看到一个 ObjectID 列没有明确声明它是特定表的外键。然后你可以把你想要的任何唯一标识符塞进去。这意味着您可能会从不属于我想要的 4 个表的表中插入 ID。

其次，因为数据可以来自四个不同的表，我也看到人们制作了 4 个不同的外键。在这样做的过程中，系统依赖于一个且只有一个具有非 NULL 值的列。

有什么更好的方法来做到这一点？例如，我表中的记录可能会引用 Hospitals(ID)、Clinics(ID)、Schools(ID) 或 Universities(ID)……但仅限于这些表。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T17:59:20.850

您可能需要考虑 Type/SubType 数据模型。这非常类似于面向对象编程中的类/子类，但实现起来更加尴尬，并且没有 RDBMS（我知道）原生支持它们。总体思路是：

*   你定义一个类型（建筑），为它创建一个表，给它一个主键
*   您定义两个或多个子类型（此处为医院、诊所、学校、大学），为每个子类型创建表，创建主键……但主键也是引用 Building 表的外键
*   现在可以使用外键在 Building 表上构建具有一个“ObjectType”列的表。您必须加入几张桌子才能确定它是哪种建筑，但无论如何您都必须这样做。那，或者存储冗余数据。

你已经注意到这个模型的问题了，对吧？什么可以防止建筑物在两个或多个子类型表中出现条目？很高兴你问：

1.  向 Building 添加一列，可能是“BuildingType”，例如 char(1)，其允许值 {H, C, S, U} 表示（duh）建筑物类型。
2.  在 BuildingID + BuildingType 上构建唯一约束
3.  在子表中有 BulidingType 列。对其设置检查约束，使其只能设置为值（H 表示 Hospitals 表等）。理论上，这可能是一个计算列；实际上，由于以下步骤，这将不起作用：
4.  构建外键以使用两列关联表

瞧：给定类型为 H 的 BUILDING 行集，不能将 SCHOOL 表中的条目（类型为 S）设置为引用该建筑物

你会记得我确实说过很难实施。

事实上，最大的问题是：这值得吗？如果将四种（或更多，随着时间的推移）建筑类型实现为类型/子类型是有意义的（进一步的规范化优势：每个建筑物共有的地址和其他属性的一个位置，建筑物特定的属性存储在子表中），可能值得付出额外的努力来构建和维护。如果不是，那么您又回到了第一个问题：一个在现代 RDBMS 中难以实现的逻辑模型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T20:33:56.553

让我们从概念层面开始。如果我们将医院、诊所、学校和大学视为主题实体的类，是否存在概括所有这些的超类？大概有。我不会试图告诉你它是什么，因为我不像你那样理解你的主题。但是我将继续进行，好像我们可以将它们都称为“机构”，并将这四个中的每一个都视为机构的子类。

正如其他响应者所指出的，类/子类扩展和继承并未内置到大多数关系数据库系统中。但是，如果您知道正确的流行语，就会有很多帮助。以下内容旨在用数据库术语向您介绍流行语。这里是对即将到来的流行语的总结：“ER 泛化”、“ER 专业化”、“单表继承”、“类表继承”、“共享主键”。

停留在概念级别，ER 建模是在概念级别理解数据的好方法。在 ER 建模中，有一个概念“ER 泛化”和一个对应的概念“ER 专业化”，它们与我刚刚在上面作为“超类/子类”提出的思维过程平行。ER 专业化告诉您如何绘制子类，但不会告诉您如何实现它们。

接下来我们从概念层面向下移动到逻辑层面。我们用关系或 SQL 表来表达数据。有几种实现子类的技术。一种叫做“单表继承”。另一种称为“类表继承”。与类表继承有关，还有另一种名为“共享主键”的技术。

在您的类表继承案例中，我们首先设计一个名为“机构”的表，其中包含一个 Id 字段、一个名称字段以及与机构相关的所有字段，无论它们是四种中的哪一种。例如，邮寄地址字段之类的东西。同样，您比我更了解您的数据，并且您可以找到所有四个现有表中的字段。我们以通常的方式填充 id 字段。

接下来我们设计了四个表，分别称为“Hospitals”、“Clinics”、“Schools”和“Universities”。这些将包含一个 id 字段，以及仅与该类型机构相关的所有数据字段。例如，医院可能有“床位容量”。同样，您比我更了解您的数据，并且您可以从现有表中未包含在机构表中的字段中找出这些数据。

这就是“共享主键”的用武之地。当在“机构”中创建一个新条目时，我们必须在四个专门的子类表之一中创建一个新的并行条目。但是我们不使用某种自动编号功能来填充 id 字段。相反，我们将“机构”表中的 id 字段的副本放入子类表的 id 字段中。

这是一个小工作，但好处是值得付出努力。共享主键强制子类条目和超类条目之间关系的一对一性质。它使连接超类数据和子类数据变得简单、容易和快速。它不需要一个特殊的字段来告诉你给定机构属于哪个子类。

而且，就您而言，它为您的原始问题提供了方便的答案。您最初询问的外键现在始终是机构表的外键。而且，由于 shared-primary-key 的魔力，外键还引用了相应子类表中的条目，而无需额外的工作。

为方便起见，您可以创建四个视图，将机构数据与四个子类表中的每一个相结合。

在网上查找“ER Specialization”、“Class Table Inheritance”、“Shared Primary Key”，也许还有“Single Table Inheritance”，也可以在 SO 中查找。SO中的大多数概念或技术都有标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:37:08.203

您可以在表上放置一个触发器并在那里强制执行参照完整性。我不认为有一个非常好的开箱即用功能来实现这个要求。

# api - 如何查询谷歌结账结余？

> ID：13311933
> 
> 赞同：1
> 
> 时间：2012-11-09T16:24:08.097
> 
> 标签：api, android-widget, google-checkout, android-pay

编写一个 android 小部件来显示最新的 Google 结帐结帐余额，但无法弄清楚如何直接获取此数字。我已经剖析了页面，但不明白数字是如何生成的。我可以通过一个简单的浏览器界面访问并查看我的每日期末余额，但无法提取该单个数字以显示在小部件上。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:52:59.837

目前没有任何授权 API 来请求余额。

为了获取此信息，您需要向用户请求 Google 登录凭据，这是 Google 可能不希望您执行的操作（不推荐使用客户端登录的原因）。

如果 Google 不启用 OAuth2 API，我想不出一个很好的解决方案。

# django - 渲染时显示网页

> ID：13311939
> 
> 赞同：0
> 
> 时间：2012-11-09T16:24:30.087
> 
> 标签：django, web, load, rendering

我正在建立一个网站，其中一个页面包含交互式地图。该映射实现为一个大表，其中每个节点都是一个 td。

现在这张地图需要一些时间来渲染，所以，我希望网站在渲染时显示出来，这样即使地图没有完全渲染，用户也可以点击链接或地图的一部分呈现。

是否有捷径可寻？AJAX 是一种选择，但由于它是一个 Django 网站，并且地图依赖于 Django 模板中的数据，因此 AJAX 变得有点笨拙。

那么有没有办法让页面在渲染时可见？

（我考虑过让每个节点都成为 iframe，这样它们就可以单独呈现，但这似乎也有点傻）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:47:02.120

django 模板应该只呈现一个空地图（或包含前 10 个点的地图），并在页面准备好时触发 javascript 代码

这个 javascript 脚本应该这样做：

1.  从 django 请求 10 个节点（使用不同的 url/视图）
2.  将获取的节点渲染到页面中
3.  如果没有更多节点：END
4.  转到 1。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:43:09.523

在尝试了一些不同的事情之后，问题似乎是数据库查询太多。每个节点在渲染时都会调用数据库，这导致它们非常慢。

供参考：如果在页面上大量使用自定义过滤器，则 Django 中的自定义过滤器不应进行数据库查询

# postgresql - postgres安装错误mac lion

> ID：13311940
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:24:34.377
> 
> 标签：postgresql

我在 mac lion 上设置 postgresql。升级到最新版本后，我输入了以下内容：

```
initdb /usr/local/var/postgres 
```

然后我遇到了以下错误：

```
The files belonging to this database system will be owned by user "michael".
This user must also own the server process.

The database cluster will be initialized with locale en_US.UTF-8.
The default database encoding has accordingly been set to UTF8.
The default text search configuration will be set to "english".

creating directory /usr/local/var/postgres ... ok
creating subdirectories ... ok
selecting default max_connections ... 10
selecting default shared_buffers ... 400kB
creating configuration files ... ok
creating template1 database in /usr/local/var/postgres/base/1 ... FATAL:  could not create shared memory segment: Cannot allocate memory
DETAIL:  Failed system call was shmget(key=1, size=2138112, 03600).
HINT:  This error usually means that PostgreSQL's request for a shared memory segment exceeded available memory or swap space, or exceeded your kernel's SHMALL parameter.  You can either reduce the request size or reconfigure the kernel with larger SHMALL.  To reduce the request size (currently 2138112 bytes), reduce PostgreSQL's shared memory usage, perhaps by reducing shared_buffers or max_connections.
    The PostgreSQL documentation contains more information about shared memory configuration.
child process exited with exit code 1
initdb: removing data directory "/usr/local/var/postgres" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:07:00.707

手册对此进行了解释。

请参阅[内核资源](http://www.postgresql.org/docs/current/static/kernel-resources.html)。

# php - php链接到2件事

> ID：13311948
> 
> 赞同：0
> 
> 时间：2012-11-09T16:25:00.553
> 
> 标签：php, hyperlink, href

php中是否有任何方法可以创建链接，以便当用户单击链接时，他们会调用一个函数，然后在调用该函数后立即将用户重定向到另一个网页。

```
$acceptEmailInvite; //append this url to the url in the link
if($app[UID]) {
    //how do I have a link connect to two redirects?
    $acceptEmailInvite = '/idx.php/store/accept/'.{$org['id']}; //link to this first
    $acceptEmailInvite = 'getLink?org='.$D['bta']; //then link to this
}

<a href="<?php echo $C['tdURL'].$acceptEmailInvite; ?>">Accept the invitation for: <b><?php echo $D['referer']; ?></b></a> 
```

编辑：我的意思是这两件事只有在点击链接时才会发生。因此，除非单击链接，否则不应重定向用户。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:26:25.260

当然。

```
<?php
    foo();
    header("Location: http://example.com/");
    exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:35:46.487

最简单的方法是创建一个页面来执行操作，然后重定向用户。例如：

**/idx.php/organization/accept/**

```
<?php
// Get your ID's, presumably from the URL

// Accept the invitation
acceptinvite($org['id']);

// Use header to redirect the user when you are done
header("Location: getBuzzed?org=".$D['betacode']);
exit();
?> 
```

您的链接如下所示：

```
<a href="'/idx.php/organization/accept/'.{$org['id']}; ">Accept the invitation for: <b><?php echo $D['referer']; ?></b></a> 
```

..但用户会看到自己直接转到`getBuzzed...`.

您可以在 Google 或 Facebook 上看到此功能的实际应用。如果你用谷歌搜索 StackOverflow.com，结果中的链接实际上指向这里：

[http://www.google.com/url?sa=t&rct=j&q=stackoverflow&source=web&cd=1&cad=rja&sqi=2&ved=0CCsQFjAA&url=http%3A%2F%2Fstackoverflow.com%2F&ei=ii-dUKaiMc_Psgad8oGYBA&usg=AFQjCNERidL9Hb6OvGW93_Y6MRj3aTdMVA](http://www.google.com/url?sa=t&rct=j&q=stackoverflow&source=web&cd=1&cad=rja&sqi=2&ved=0CCsQFjAA&url=http%3A%2F%2Fstackoverflow.com%2F&ei=ii-dUKaiMc_Psgad8oGYBA&usg=AFQjCNERidL9Hb6OvGW93_Y6MRj3aTdMVA)

谷歌使用这个页面来跟踪谁点击了这个链接，如果这个链接是危险的，就会提醒你。

*重要* 带有`header`命令的页面不得回显任何内容。如果它显示任何内容，那么当您尝试使用该`header`命令时将收到一条错误消息。

# wordpress - .htaccess 减少垃圾邮件

> ID：13311952
> 
> 赞同：0
> 
> 时间：2012-11-09T16:25:07.820
> 
> 标签：wordpress, .htaccess, spam, socialengine

为了减少 wordpress 评论中的垃圾邮件，我使用以下代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_METHOD} POST
RewriteCond %{REQUEST_URI} .wp-comments-post\.php*
RewriteCond %{HTTP_REFERER} !.*domainname.com* [OR]
RewriteCond %{HTTP_USER_AGENT} ^$
RewriteRule (.*) ^http://%{REMOTE_ADDR}/$ [R=301,L]
</IfModule> 
```

我的问题是：我想减少“**注册**”中的垃圾邮件。像这样的**网址 http://www.domain.com/signup**

如何更改此行：

```
RewriteCond %{REQUEST_URI} .wp-comments-post\.php* 
```

成为**注册**？？？

请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:44:31.397

.htaccess 中的代码通过以下方式阻止垃圾邮件：

当访问文件 wp-comments-post.php（这是处理发布评论的文件）并且访问者不是来自 yourdomain 或浏览器的用户代理为空时，我们可以阻止它。

原因是当有人发表评论时，他们点击了您网站上的按钮，因此引荐来源为 yourdomain.com

我假设您也不想在页面注册时使用它。人们可以直接访问该页面，并且您希望他们注册。

为了减少注册中的垃圾邮件，最好了解注册的工作原理。WordPress 没有页面注册，所以我假设您正在使用 3rd 方插件进行注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:19:00.403

减少自动垃圾邮件注册的简单方法是使用“蜜罐”方法 - 隐藏您拥有的带有样式的必填字段之一（例如电子邮件），这样访问者就不会看到它。添加带有一些随机名称的附加字段。调整 SocialEngine 注册以使用新字段而不是电子邮件。如果隐藏的电子邮件字段充满了一些数据，请停止注册 - 你有一个机器人。

（我们的团队有一个名为 Honeypot 的简单 SocialEngine4 插件）

# r - 在 1 个 pdf 中绘制 4 个不同的图

> ID：13311957
> 
> 赞同：0
> 
> 时间：2012-11-09T16:01:41.090
> 
> 标签：r

我有 2 个数据框，我想从中生成 3 个图，并将它们作为单列放在 1 个 pdf 文件中。

我希望所有图都具有相同的 x 轴限制（基本上相同的 x 轴），即使它们的名称和获取方式不同。

数据框看起来像这样：

d1

```
 X          Y       Z
0.04939317 -0.4622222  13651
0.03202451 -0.4261000  13401
0.09950793 -0.3233025  13151
0.11548556 -0.4637981  12486
0.09817597 -0.4751886  12236
0.15770701 -0.5819355  11986 
```

和d2

```
 V0  V1   V2    V3   sign
   1   1  0.379 0.612   pos
   2   1  0.378 0.620   pos
   3   1  0.578 0.571   neg
   4   1  0.978 0.561   pos
   5   1  0.758 0.261   neg
   6   1  0.378 0.126   neg 
```

***PS：两个数据帧都比这个大，这只是其中的一部分***

V0、V1 和 Z 范围从 1 到 20000

我创建的地块是：

***从 d2***

```
d2plot=ggplot(d1, aes(V0,V1, fill=sign)) + 
    geom_tile()+ scale_fill_manual(values = c("neg" = "yellow", "pos"="red")) +
    geom_vline(xintercept =10000 ) +
    geom_text(mapping=aes(x=10000,y=0, label="Stop"), 
    size=4, angle=90, vjust=-0.4, hjust=0) 
```

***从 d1***

```
d1plot = ggplot(d2) + 
    geom_errorbarh(aes(x=z,xmin=z-50,xmax=z+50, y=Y, height = 0.02),
    color="red")+ opts(legend.position = "none")  +
    geom_vline(xintercept = 10000) +
    geom_text(mapping=aes(x=10000,y=-0.3, label="Stop"), 
    size=4, angle=90, vjust=-0.4, hjust=0) 
```

我已经尝试过`grid.arrange(d1plot, d2plot, ncol=1)`，但是每个图的 x 轴都不同，我尝试更改纵横比，但这会改变 y 轴..我也尝试过使用`facet_wrap`，但是我的 x 轴值不同的问题值，我只希望限制和中断相同，并且所有图都基于 1 个 x 轴在 1 列中对齐，以便以简单的方式比较统计方法的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:53:04.387

如果您手动设置 x 轴限制，它应该可以工作。

添加

```
+ coord_cartesian(xlim = c(1, 20000)) 
```

在组合它们之前到每个地块。

* * *

要获得不同的纵横比，您可以使用

```
+ coord_fixed(xlim = c(1, 20000), ylim = c(1, 20000)) 
```

更改`ylim`每个图的参数以适合您的实际数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:58:55.737

您还可以将每个单独的绘图保存为 PDF，然后在 Adob​​e Illustrator 或 Inkscape 中打开它们并将元素复制到一个 PDF 中。这也将使您有机会对图表进行一些修改并添加一些额外的解释等。在此网站 (http://flowingdata.com) 上，有许多教程可以帮助您，但基础非常简单。Safe R 绘图为 PDF 并在 Illustrator 中打开，您可以选择所有元素（因此也可以复制和组合它们）。祝你好运！

# javascript - 设计中的 JS。自动标记错误

> ID：13311960
> 
> 赞同：0
> 
> 时间：2012-11-09T16:25:18.027
> 
> 标签：javascript, adobe-indesign

我正在尝试将标签应用于文档中的所有 EPS 文件。我的代码：

```
 #target indesign
var allItems=app.activeDocument.pageItems.everyItem().getElements().slice(0);
for(var i=0;i<allItems.length;i++)
    { 
        var allInnerItems = allItems[i].allPageItems;
        for(var j=0;j<allInnerItems.length;i++)
        {
            (allInnerItems[j].toString() == "[object EPS]") ? 
                allInnerItems[j].parent.autoTag() : alert('false');
        }
    } 
```

该代码查找所有 EPS 并应用于它们的 Rectangle 对象 AutoTag 方法。但我收到错误消息：“对象或父故事已标记或无法标记”。此外，如果我用 EPS 选择一些矩形对象并单击用户界面中的“AutoTag”功能，它将起作用。也许有人知道，我该怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:05:16.967

我认为这应该适用于您正在尝试做的事情。

在内部循环中，您忘记更改`i++`为`j++`.

此外，您不必获取对象的字符串值来对其进行测试（即。`.toString() == "[object EPS]"`），您可以只要求它的`constructor`.

最后，如果您不希望已经标记的元素出现任何错误，您可以在语句中添加一个条件，在尝试之前`if`测试是否`pageItem`有一个。`associatedXMLElement``autoTag()`

```
var allItems = app.activeDocument.pageItems.everyItem().getElements();
for(var i=0; i<allItems.length; i++)
{ 
   var allInnerItems = allItems[i].allPageItems;
   for(var j=0;j<allInnerItems.length; j++)
   {
      var item = allInnerItems[j];
      if (item.constructor == EPS && !item.parent.associatedXMLElement) {
         item.parent.autoTag()
      } else {
         alert('false');
      }
   }
} 
```

# java - 选定iteam的JComboBox打印值

> ID：13311961
> 
> 赞同：2
> 
> 时间：2012-11-09T16:25:19.160
> 
> 标签：java, swing

我创建了一个组合框：

```
JComboBox comboBox = new JComboBox();
comboBox.setModel(new DefaultComboBoxModel(new String[] {"<Select a Team>", "X", "Y", "Z"})); 
```

当我调用`System.out.println(comboBox.getSelectedItem().toString());`以查看所选项目时，我只看到 <Select a Team> 。

每次更改组合框的值时，如何打印组合框的值？（我试图搜索如何使用监听器或回调函数，但不明白如何为我的目标实现它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:28:11.113

这将在`ActionListener`您的组合框中添加一个：

```
comboBox.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        System.out.println(comboBox.getSelectedItem().toString());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:40:39.760

试试这个代码。我已经注释掉了对你来说可能很难的行。

```
 import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JComboBox;
import javax.swing.JFrame;

public class Main extends JFrame implements ActionListener{
  JComboBox combo = new JComboBox();

  public Main() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    combo.addItem("A");
    combo.addItem("H");
    combo.addItem("P");
    combo.setEditable(true);
    System.out.println("#items=" + combo.getItemCount());

    //this line is telling the combox that call this class's 
    //actionPerformed method whenver any interesting thing happens
    combo.addActionListener(this);

    getContentPane().add(combo);
    pack();
    setVisible(true);
  }

  //here is the method
  //it will be called every time by combo object whenver any interesting thing happens
  public void actionPerformed(ActionEvent e) {
    System.out.println("Selected index=" + combo.getSelectedIndex()
        + " Selected item=" + combo.getSelectedItem());
      }

  public static void main(String arg[]) {
    new Main();
  }
}

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JComboBox;
import javax.swing.JFrame;

public class Main extends JFrame implements ActionListener{
  JComboBox combo = new JComboBox();

  public Main() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    combo.addItem("A");
    combo.addItem("H");
    combo.addItem("P");
    combo.setEditable(true);
    System.out.println("#items=" + combo.getItemCount());

    //this line is telling the combox that call this class's 
    //actionPerformed method whenver any interesting thing happens
    combo.addActionListener(this);

    getContentPane().add(combo);
    pack();
    setVisible(true);
  }

  //here is the method
  //it will be called every time by combo object whenver any interesting thing happens
  public void actionPerformed(ActionEvent e) {
    System.out.println("Selected index=" + combo.getSelectedIndex()
        + " Selected item=" + combo.getSelectedItem());
      }

  public static void main(String arg[]) {
    new Main();
  }
} 
```

# c++ - 在 C++ 中定义类型安全“字节”（如 8 位）类型的最现代和惯用的方法是什么？

> ID：13311962
> 
> 赞同：0
> 
> 时间：2012-11-09T16:25:25.467
> 
> 标签：c++, types, type-safety

我想`byte`在我的 C++ 程序中定义一个类型，基本上是`unsigned char`什么是最惯用的方法？

我想定义一个`byte`类型来抽象出不同的表示形式，并使创建这种新`byte`（8位）类型的类型安全数组成为可能，该数组由`unsigned char`我正在为一个非常具体的用例开发的位操作库支持我正在创建的程序。我希望它非常*明确*，这是一个特定于我的程序域的 8 位字节，并且不受基于平台或编译器的不同实现的影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:26:20.830

`char`, `unsigned char`, or`signed char`都是一个字节；`std::uint8_t`(from `<cstdint>`) 是一个 8 位字节（也存在带符号的变体）。最后一个仅存在于具有 8 位字节的系统上。还有`std::uint_least8_t`（来自同一个标头），它*至少有*8 位和`std::uint_fast8_t`，它至少有 8 位，应该是最有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:27:55.123

最惯用的方法是只使用`signed char`or `unsigned char`。如果你想调用它，`byte`或者如果你需要强类型，你可以使用 typedef，你可以使用 BOOST_STRONG_TYPEDEF。

如果您需要它恰好是 8 位，您可以使用`uint8_t`from`<cstdint>`但不保证在所有平台上都存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:37:30.427

老实说，这对我来说是 C++ 中最烦人的“特性”之一。

是的，您可以使用`std::uint8_t`or `unsigned char`，在大多数系统上，前者将是`typedef`后者。

但是...这不是类型安全的，因为`typedef`不会创建新类型。委员会拒绝在标准中添加“强类型定义”。

考虑

```
void foo (std::uint8_t);
void foo (unsigned char); // ups... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T18:46:29.173

我目前正在使用 uint8_t 方法。我的看法是，如果平台没有 8 位类型（在这种情况下，我的代码将无法在该平台上运行），那么我无论如何都不希望它运行，因为我最终会遇到意外行为是因为我在处理数据时假设它是 8 位，而实际上它不是。所以我不明白为什么要使用 unsigned char，假设它是 8 位，然后根据该假设执行所有计算。在我看来，这只是自找麻烦。

# git - 使用 GIT 将文件推送到生产/登台服务器

> ID：13311967
> 
> 赞同：0
> 
> 时间：2012-11-09T16:26:06.673
> 
> 标签：git

到目前为止，我只使用 GIT 对本地文件进行版本控制，我现在正尝试在远程服务器上设置暂存环境，以便稍后我可以使用 GIT 将本地开发文件推送到暂存服务器，并最终推送到生产服务器。

所以我所做的是：

*   在我的登台服务器上初始化了一个裸 git 存储库

*   在我的本地版本站点上添加了该服务器作为删除

*   然后跑：`git push origin master`

我没有收到错误消息，但暂存 repo 是空的，只有 .git 文件夹得到了更新，但实际文件没有跟随。

我在这里发现了一个类似的问题[Git：从本地仓库推送的文件没有出现在远程 git repo](https://stackoverflow.com/questions/7219689/git-files-pushed-from-local-repo-not-showing-up-in-remote-git-repo)中，尽管我仍然不知道我应该做什么来推送我的本地文件？

实现此设置的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:35:44.723

好的，这就是我到目前为止所得到的。

将 git repo 推送到远程服务器不会上传实际文件，而是上传这些文件的“蓝图”。因此，一旦将 repo 上传到远程服务器，为了能够处理这些文件，您需要克隆该 repo。之后的工作流程是：

1-`Push`从本地到远程仓库的文件（中央仓库）

2-克隆的实例可以`pull`从该存储库中更改以保持最新。

如果我错了，请纠正我。

# unix - 第 98 行：意外标记“else”附近的语法错误

> ID：13311968
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:26:08.070
> 
> 标签：unix, if-statement, nested, syntax-error, nested-loops

我对编程相当陌生，在 UNIX 中编写 shell 脚本程序时遇到了语法错误。我正在尝试创建一个数据库，该数据库允许用户在执行 shell 脚本后使用内置命令创建、删除和备份。

但是，每当使用 if 语句或 while 循环时，我都会遇到问题。更具体地说，每当我使用两者的组合（包括嵌套循环）时，放置“完成”或“fi”的位置。好的，这就去。

```
> #!/bin/bash
> 
> 
> echo "*****Welcome to User Administration Program*****"
>
> for ((i=0;i<3;++i))
> #for i in `seq 1 3`
> do
>
> count=`expr $count + 1`
> echo -n "Please enter adminstrative username: "
> read input
> if [ $input == admin ]; then
> break
> if [ $count -eq 3 ]; then
> break fi fi done
> 
> 
> #so far so good
> 
> echo "Welcome admin!" echo -n "[administator@shell]$ " read userin
> while [ "$userin" = "createuser" -o "$userin" = "deleteuser" -o
> "$userin" = "ba$  do
>        command1="createuser"
>          command2="deleteuser"
>          command3="backup"
> 
> if [ "$userin" = "$command1" ]; then
>         echo "Please enter a username "
>         echo -n "[administrator@shell]$ "
> 
>  read username while read line do if  [ "$username" = "$line" ]; then
> #not reading lines correctly
>         echo "$line is taken! choose another" else
>       newUser="$username"
>         echo -n "Hello $newUser ! , enter password "
>         read passEntered
>         newPass="$passEntered"
>         echo $newUser $newPass >> userdb
>         echo "Thank you for creating password, $newUser !" <"userdb" echo "Program terminated!" exit fi done
> 
> #create user works and is completed, with exception of minor error
> 
> elif [ "$userin" == "$command2" ]; then echo "Which user do you wish
> to delete?" echo -n "[administrator@shell]$ " while    read delete do
>          username=$(echo $delete | cut -d" " -f2)
>          usernameExists=$(grep -w -c $username userdb)
>          sed -i '/$username:/d' userdb
> 
> 
> 
> if [ "$delete"  == "admin" ]; then
>          echo "You do not have necessary powers to perform this action."
>         echo "Try  again!" else command=$(echo $input | cut -d" " -f1)
> 
> dir=$(echo $input | cut -d" " -f2) fi done
> 
> 
> elif [ "$userin" == "$command3" ]; then
>          echo "How do you wish to backup?" echo -n "[administrator@shell]$ " while read input do backup=true if [
> "$input" != "$BACKUP" ]; then echo "Invalid command! Try again" fi
> 
> else #where error is happening echo "Invalid command. Please Try
> again!" fi done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:54:12.863

您缺少 a`done`以匹配 last `while`，但您看不到它，因为它隐藏在格式错误的代码中。

尝试重新格式化代码，在语句之前添加换行符`echo`并正确缩进。

# c - 分段错误 - 未知原因

> ID：13311972
> 
> 赞同：1
> 
> 时间：2012-11-09T16:26:22.287
> 
> 标签：c, segmentation-fault

即使这两个文件各有 2^14 个值，我的代码也会出现分段错误。谁能告诉我原因。

```
#define N 128
#include<stdio.h>
#include <malloc.h>
int A[N][N];
int B[N][N];
int C[N][N];
void mmul();

int main()
{
    int p,q;
    FILE *fp;
    fp=fopen("A.txt","r");
    if(fp=NULL)
        printf("Error\n");
    printf("A");
    for(p=0;p<(1<<7);p++)
    {
        for(q=0;q<(1<<7);q++)
        {
            fscanf(fp, "%d", &A[p][q]);
        }
    }
    fclose(fp);
    fp=fopen("B.txt","r");
    if(fp=NULL)
        printf("Error\n");
    for(p=0;p<(1<<7);p++)
    {
        for(q=0;q<(1<<7);q++)
        {
            fscanf(fp, "%d", &B[p][q]);
        }
    }
    fclose(fp);
    printf("here");
    mmul();
}

void mmul()
{
    int i,j,k;
    unsigned int sum;
    for(i=0;i<N;i++)
    {
        for(j=0;j<N;j++)
        {
            sum=0;
            for(k=0;k<N;k++)
            {
                sum=sum+(A[i][k]*B[k][j]);
            }
            C[i][j]=sum;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:30:44.583

编译有警告

```
if (fp = NULL) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T16:28:45.853

```
if(fp=NULL)
printf("Error\n");` 
```

*   它是整个`if`身体。因此，如果没有文件，您将得到一个 NULL `fp`，打印“错误”并使用 NULL 继续执行`fp`。它会导致分段错误。

此外，它是一个*赋值*，而不是一个*比较*，所以你总是得到 NULL fp，而不是打印错误。

您需要添加退出语句：

```
if (fp == NULL) {
   fprintf(stderr, "Error: failed to open file\n");
   return -1;
} 
```

# c# - C# 使用 FTP 上传整个目录

> ID：13311975
> 
> 赞同：9
> 
> 时间：2012-11-09T16:26:22.967
> 
> 标签：c#, recursion, upload, ftp, directory

我要做的是在 C# (C Sharp) 中使用 FTP 上传网站。所以我需要上传一个文件夹中的所有文件和文件夹，保持它的结构。我正在使用这个 FTP 类： http: [//www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class](http://www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class)进行实际上传。

我得出的结论是，我需要编写一个递归方法，遍历主目录的每个子目录并上传其中的所有文件和文件夹。这应该将我的文件夹复制到 FTP。问题是......我不知道如何编写这样的方法。我以前写过递归方法，但我是 FTP 部分的新手。

这是我到目前为止所拥有的：

```
private void recursiveDirectory(string directoryPath)
    {
        string[] filePaths = null;
        string[] subDirectories = null;

        filePaths = Directory.GetFiles(directoryPath, "*.*");
        subDirectories = Directory.GetDirectories(directoryPath);

        if (filePaths != null && subDirectories != null)
        {
            foreach (string directory in subDirectories)
            {
                ftpClient.createDirectory(directory);
            }
            foreach (string file in filePaths)
            {
                ftpClient.upload(Path.GetDirectoryName(directoryPath), file);
            }
        }
    } 
```

但它远未完成，我不知道如何继续。我敢肯定，比我更需要知道这一点！提前致谢 ：）

哦，而且......如果它也报告它的进度会很好:)（我正在使用进度条）

编辑：可能还不清楚...如何使用 FTP 上传包含所有子目录和文件的目录？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-09T19:54:19.463

# 问题解决了！:)

好吧，所以我设法编写了方法 myslef。如果有人需要，请随时复制：

```
private void recursiveDirectory(string dirPath, string uploadPath)
    {
        string[] files = Directory.GetFiles(dirPath, "*.*");
        string[] subDirs = Directory.GetDirectories(dirPath);

        foreach (string file in files)
        {
            ftpClient.upload(uploadPath + "/" + Path.GetFileName(file), file);
        }

        foreach (string subDir in subDirs)
        {
            ftpClient.createDirectory(uploadPath + "/" + Path.GetFileName(subDir));
            recursiveDirectory(subDir, uploadPath + "/" + Path.GetFileName(subDir));
        }
    } 
```

它工作得很好:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T17:04:28.647

我编写了一个 FTP 类，并将它包装在一个 WinForms 用户控件中。[您可以在文章An FtpClient Class and WinForm Control](http://www.blackbeltcoder.com/Articles/client/an-ftpclient-class-and-winform-control)中查看我的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-23T13:56:28.393

我编写了一个可重用的类来将整个目录上传到`ftp site`Windows 服务器上，
该程序还重命名了该文件夹的旧版本（我用它来将我的 Windows 服务程序上传到服务器）。也许有些人需要这个：

```
class MyFtpClient
{
    protected string FtpUser { get; set; }
    protected string FtpPass { get; set; }
    protected string FtpServerUrl { get; set; }
    protected string DirPathToUpload { get; set; }
    protected string BaseDirectory { get; set; }

    public MyFtpClient(string ftpuser, string ftppass, string ftpserverurl, string dirpathtoupload)
    {
        this.FtpPass = ftppass;
        this.FtpUser = ftpuser;
        this.FtpServerUrl = ftpserverurl;
        this.DirPathToUpload = dirpathtoupload;
        var spllitedpath = dirpathtoupload.Split('\\').ToArray();
        // last index must be the "base" directory on the server
        this.BaseDirectory = spllitedpath[spllitedpath.Length - 1];
    }

    public void UploadDirectory()
    {
        // rename the old folder version (if exist)
        RenameDir(BaseDirectory);
        // create a parent folder on server
        CreateDir(BaseDirectory);
        // upload the files in the most external directory of the path
        UploadAllFolderFiles(DirPathToUpload, BaseDirectory);
        // loop trough all files in subdirectories

        foreach (string dirPath in Directory.GetDirectories(DirPathToUpload, "*",
        SearchOption.AllDirectories))
        {
            // create the folder
            CreateDir(dirPath.Substring(dirPath.IndexOf(BaseDirectory), dirPath.Length - dirPath.IndexOf(BaseDirectory)));

            Console.WriteLine(dirPath.Substring(dirPath.IndexOf(BaseDirectory), dirPath.Length - dirPath.IndexOf(BaseDirectory)));
            UploadAllFolderFiles(dirPath, dirPath.Substring(dirPath.IndexOf(BaseDirectory), dirPath.Length - dirPath.IndexOf(BaseDirectory))
        }
    }

    private void UploadAllFolderFiles(string localpath, string remotepath)
    {
        string[] files = Directory.GetFiles(localpath);
        // get only the filenames and concat to remote path
        foreach (string file in files)
        {
            // full remote path
            var fullremotepath = remotepath + "\\" + Path.GetFileName(file);
            // local path
            var fulllocalpath = Path.GetFullPath(file);
            // upload to server
            Upload(fulllocalpath, fullremotepath);
        }

    }

    public bool CreateDir(string dirname)
    {
        try
        {
            WebRequest request = WebRequest.Create("ftp://" + FtpServerUrl + "/" + dirname);
            request.Method = WebRequestMethods.Ftp.MakeDirectory;
            request.Proxy = new WebProxy();
            request.Credentials = new NetworkCredential(FtpUser, FtpPass);
            using (var resp = (FtpWebResponse)request.GetResponse())
            {
                if (resp.StatusCode == FtpStatusCode.PathnameCreated)
                {
                    return true;
                }
                else
                {
                    return false;
                }
            }
        }

        catch
        {
            return false;
        }
    }

    public void Upload(string filepath, string targetpath)
    {

        using (WebClient client = new WebClient())
        {
            client.Credentials = new NetworkCredential(FtpUser, FtpPass);
            client.Proxy = null;
            var fixedpath = targetpath.Replace(@"\", "/");
            client.UploadFile("ftp://" + FtpServerUrl + "/" + fixedpath, WebRequestMethods.Ftp.UploadFile, filepath);
        }
    }

    public bool RenameDir(string dirname)
    {
        var path = "ftp://" + FtpServerUrl + "/" + dirname;
        string serverUri = path;

        try
        {
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(serverUri);
            request.Method = WebRequestMethods.Ftp.Rename;
            request.Proxy = null;
            request.Credentials = new NetworkCredential(FtpUser, FtpPass);
            // change the name of the old folder the old folder
            request.RenameTo = DateTime.Now.ToString("yyyyMMddHHmmss"); 
            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            using (var resp = (FtpWebResponse)request.GetResponse())
            {
                if (resp.StatusCode == FtpStatusCode.FileActionOK)
                {
                    return true;
                }
                else
                {
                    return false;
                }
            }
        }
        catch
        {
            return false;
        }
    }
} 
```

创建该类的实例：

```
static void Main(string[] args)
{
    MyFtpClientftp = new MyFtpClient(ftpuser, ftppass, ftpServerUrl, @"C:\Users\xxxxxxxxxxx");
    ftp.UploadDirectory();
    Console.WriteLine("DONE");
    Console.ReadLine();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:48:51.320

除非您这样做是为了好玩或自我提升，否则请使用商业模块。我可以从[Chilkat](http://www.chilkatsoft.com/ftp-2-dotnet.asp)推荐一个，但我敢肯定还有其他的。

**注意：**我很确定这确实回答了上述问题，*我要做的是在 C# (C Sharp) 中使用 FTP 上传网站。*

# sql-server - 在 WHERE 子句中使用 COUNT()

> ID：13311977
> 
> 赞同：1
> 
> 时间：2012-11-09T16:26:29.177
> 
> 标签：sql-server, count

我有以下 SQL 语句：

```
SELECT     C.LINKED_TABLE_ID AS CLIENT_DIWOR, I.STATUS AS AML_STATUS, dbo.CLIENT_MASTER.CLIENTCODE
FROM         AML_INFORMATION AS I INNER JOIN
                dbo.COMM_ENTRY AS C ON C.NAME_ID = I.CONTACT_ID AND C.TABLE_ID = 'C' AND C.PRIMARY_FLAG = 'Y' INNER JOIN
                dbo.CLIENT_MASTER ON C.LINKED_TABLE_ID = dbo.CLIENT_MASTER.DIWOR
WHERE I.CONTACT_ID = 234
    AND I.[STATUS] = 'CC'
    AND (CLIENT_MASTER.DIWOR = I.CONTACT_ID)
    AND (CLIENT_MASTER.POSTING_STATUS <> '')
    AND ((SELECT COUNT(CONTACT_ID) FROM AML_ID_DOCUMENT GROUP BY CONTACT_ID HAVING CONTACT_ID = 234) >1) 
```

如果我运行它，它会返回 0 条记录，但是如果我删除最后一个 AND 语句`AND ((SELECT COUNT(CONTACT_ID) FROM AML_ID_DOCUMENT GROUP BY CONTACT_ID HAVING CONTACT_ID = 234) >1)`，它会返回我期望的记录。

是否可以以这种方式使用 COUNT() ？顺便说一句，本例中的 COUNT() 返回 2 条记录，如果我将它包含在 SELECT 语句中，我也会返回 0 条记录。

谁能指出我正确的方向？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T16:40:15.987

你展示的脚本不应该返回任何东西......你的部分可能看起来像这样

```
 and (Select Count(*) from AML_ID_DOCUMENT  where CONTACT_ID =I.CONTACT_ID)>1 
```

虽然 ist 应该按原样工作......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T16:38:14.340

最后一部分不应该是这样的：

```
AND EXISTS (SELECT CONTACT_ID FROM AML_ID_DOCUMENT
      WHERE CONTACT_ID = 234
      GROUP BY CONTACT_ID
      HAVING COUNT(CONTACT_ID)>1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T12:45:52.530

试试这个查询：

```
select count(portfolio_id) as porfolioCount 
from engineering_module_tracker_v2 
where r0_approval__category='Cat I' & 'Cat II'; 
```

猫意味着类别明智。

# php - Codeigniter URL 被重定向或额外的部分被添加到 URL

> ID：13311981
> 
> 赞同：2
> 
> 时间：2012-11-09T16:26:37.493
> 
> 标签：php, codeigniter, url

我有一个奇怪的问题。直到昨天一切正常，突然发现这个问题。

网站在这里： http: [//www.famtripsandinspectionvisits.com/all_trips](http://www.famtripsandinspectionvisits.com/all_trips)

如果您访问上面的页面并单击“india-kerala”链接，它应该带您到以下页面。

[http://www.famtripsandinspectionvisits.com/trips/old_trips/india_kerala](http://www.famtripsandinspectionvisits.com/trips/old_trips/india_kerala)

但是浏览器会重定向到这个页面： [http://www.famtripsandinspectionvisits.com/all_trips/old_trips/india_kerala?/trips/old_trips/india_kerala](http://www.famtripsandinspectionvisits.com/all_trips/old_trips/india_kerala?/trips/old_trips/india_kerala) 这表明添加了以下部分，这是额外的。all_trips/old_trips/india_kerala?

我检查了我的 .htaac​​cess 并将其重置为默认值，但它仍然不影响它。我检查了我的 cofnig.php 的基本 url，一切都和以前一样。如果有人可以提供帮助，我将不胜感激。

我的 .htaccess 文件

```
# Use PHP5 Single php.ini as default
AddHandler application/x-httpd-php5s .php
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]  

Redirect 301 /invest.php http://www.famtripsandinspectionvisits.com/investment_opportunity
Redirect 301 /buyers.php http://www.famtripsandinspectionvisits.com/buyers
Redirect 301 /trips.php http://www.famtripsandinspectionvisits.com/all_trips
Redirect 301 /sellers.php http://www.famtripsandinspectionvisits.com/sellers
Redirect 301 /contact.php http://www.famtripsandinspectionvisits.com/contact_us
Redirect 301 /about.php http://www.famtripsandinspectionvisits.com/about_us
Redirect 301 /login.php http://www.famtripsandinspectionvisits.com/login
Redirect 301 /trip-kerala.php http://www.famtripsandinspectionvisits.com/trips/old_trips/india_kerala
Redirect 301 /trip-burundi.php http://www.famtripsandinspectionvisits.com/trips/up_coming_trips/burundi_africa
Redirect 301 /register.php http://www.famtripsandinspectionvisits.com/register
Redirect 301 /trips http://www.famtripsandinspectionvisits.com/all_trips 
```

我的路线.php

```
$route['default_controller'] = "site";
$route['404_override'] = '';

$route['fam_admin'] = "fam_admin/login";
/* End of file routes.php */
/* Location: ./application/config/routes.php */ 
```

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:57:30.267

我认为你需要在这里做的是告诉 mod_rewrite 你想要结合新旧查询字符串，这需要使用 QSA 标志：

```
 RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?$1 [QSA,L] 
```

这是我的 Codeigniter 项目的“标准”基本规则集，其余的我通过自定义路由和偶尔的重定向完成了很多。

仅用问号结束替换（在没有 QSA 标志的情况下）将删除现有的查询字符串并将其替换为新的，我认为这可以解释您所看到的内容。

[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)的文档在这方面得到了更深入的了解：

> 修改查询字符串
> 
> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用 [QSA] 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:45:04.157

我有这个类似的问题。尝试编辑你`config.php`看起来像这样：

```
$config['index_page'] = 'index.php?'; 
```

我假设您正在使用 CodeIgniter 的 URL 方法之一，并且您正在（假设）使用 IIS 来托管。我不知道如何删除“？” 在 URL 和查询字符串之间添加“？” 到您的配置文件应该至少解析链接。

# jquery - 在 CKEditor 插件中使用 jquery

> ID：13311983
> 
> 赞同：1
> 
> 时间：2012-11-09T16:26:39.470
> 
> 标签：jquery, ckeditor

我正在尝试创建一些 ckeditor 插件来操作完整的 html 文档的格式（例如，您按下编辑器的一个按钮，选择变成标注，或移动到新列）。CKEditor API 不适合我，所以我想在插件中的编辑器内容上使用 jquery。有什么建议么？

这是在 Drupal 中使用所见即所得插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:12:12.837

我一直在我的插件中使用 JQuery，它就像在普通的 javascript 文件中一样工作。我建议您在 jquery 的 ready 事件中加载您的编辑器，这至少可以确保 jquery 已加载。

像这样的东西应该确保你的插件可以使用 jquery，因为它是预先加载的。

```
<script type="text/javascript">
    $(document).ready(function () {
        CKEDITOR.replace( 'MyLittlePonyFanficEditorTextarea' );
    });
</script> 
```

# powershell - 在powershell中获取HashTable的长度

> ID：13311985
> 
> 赞同：14
> 
> 时间：2012-11-09T16:26:44.040
> 
> 标签：powershell

我是 powershell 的新手，并试图获取 HashTable 的长度（在 for 循环中使用），但我似乎无法获得 HashTable 的长度来输出任何内容。

```
$user = @{}
$user[0] = @{}
$user[0]["name"] = "bswinnerton"
$user[0]["car"] = "honda"

$user[1] = @{}
$user[1]["name"] = "jschmoe"
$user[1]["car"] = "mazda"

write-output $user.length   #nothing outputs here

for ($i = 0; $i -lt $user.length; $i++)
{
    #write-output $user[0]["name"]
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-09T16:31:06.470

`@{}`声明一个 HashTable 而`@()`声明一个 Array

您可以使用

```
$user.count 
```

找到`length`你`HashTable`。

如果你这样做：

```
$user | get-member 
```

你可以看到一个对象的所有方法和属性。

```
$user.gettype() 
```

返回您拥有的对象的类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:30:20.543

`$user`是一个哈希表，所以你应该`$user.count`改用 user 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:34:49.483

这不是一个数组，而是一个哈希表。改用`.count`：

```
write-output $user.count 
```

# c# - iTextSharp PDF 表单字段验证

> ID：13311991
> 
> 赞同：0
> 
> 时间：2012-11-09T16:27:00.453
> 
> 标签：c#, pdf, itextsharp

可以通过 iTextSharp 向 PDF 表单字段添加验证。

我目前生成一个 PDF 文档，用我的数据库中的值填充可编辑的表单字段，并在网页中将文档呈现给用户。

```
PdfReader pdfReader = new PdfReader(template);
PdfStamper pdfStamper = new PdfStamper(pdfReader, writeStream);
AcroFields pdfFormFields = pdfStamper.AcroFields;

pdfFormFields.SetField("field1", myobj.field1value);
...
pdfStamper.Close(); 
```

我希望能够在此文档呈现过程中向字段动态添加验证，例如数字字段最小值-最大值或自定义 JavaScript。我知道在 Acrobat 中设计表单时这是可能的，但我找不到通过 iTextsharp 访问这些验证字段的任何方法/字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T09:33:45.387

寻找答案时，请查阅文档：“iText in Action”。

一个例子回答了你的问题：

*   Java： http: [//itextpdf.com/examples/iia.php ?id=238](http://itextpdf.com/examples/iia.php?id=238)
*   C#： http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter13&ex= [AddJavaScriptToForm](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter13&ex=AddJavaScriptToForm)

在此示例中，一些自定义 JavaScript 包括 validate() 方法被添加到字段/按钮。这是 JavaScript：[http ://examples.itextpdf.com/resources/js/extra.js](http://examples.itextpdf.com/resources/js/extra.js)

作为附加操作 (AA) 或作为提交按钮的操作添加的 JS 与为 HTML 编写的 JS 相同。

# sql-server-2008 - MSSQLSERVER 2008 和 Groovy 的 Manifest.MF 问题

> ID：13311992
> 
> 赞同：0
> 
> 时间：2012-11-09T16:27:02.607
> 
> 标签：sql-server-2008, jdbc, groovy, sqljdbc, mssql-jdbc

我在连接到 Oracle 和 SQLServer 的 GGTS IDE 中创建了一个简单的 Groovy 项目。该程序在 IDE 中运行良好，但是当我通过命令行运行该程序时，我似乎在 MANIFEST.MF? 中遇到了某种编码错误。请参阅下面的堆栈跟踪：

**命令行**

```
groovy -cp lib\ojdbc14_g.jar lib\sqljdbc4.jar src\Starter.groovy 
```

**结果**

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
C:\workspace-ggts-3.1.0.RELEASE\Test\lib\sqljdbc4.jar: 1: unexpected char: 0x3 @ line 1, column 3.
   PK♥ h?I@            ¶   META-INF/MANIFEST.MF¡|GôΓ┌▓εⁿD∞ ░=x/êsä      8◄o ï∟B▲
ë╔
     ^

1 error 
```

在过去连接到 MSSQLServer 时，我使用了以下 jar：

*   msbase.jar
*   msutil.jar
*   mssqlserver.jar

不过这一次，当我寻找 2008 年的 jdbc jar 时，我得到了**sqljdbc4.jar**。它再次在 IDE 中工作，但不能在命令行中工作。我已经挑出问题出在 sqljdbc4.jar 中，因为我注释了与此相关的所有代码，并且程序运行良好，只使用了 oracle jar 引用。

1.  有人知道为什么会这样吗？
2.  你用什么 jars 从命令行用 groovy 连接到 sqlserver 2008？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:44:20.763

您需要在类路径条目之间使用分号（假设您在 Windows 上）

```
groovy -cp lib\ojdbc14_g.jar;lib\sqljdbc4.jar src\Starter.groovy 
```

如果您使用的是 Linux/Mac，则为冒号

```
groovy -cp lib/ojdbc14_g.jar:lib/sqljdbc4.jar src/Starter.groovy 
```

# c# - 在c#中画有间隙

> ID：13311993
> 
> 赞同：3
> 
> 时间：2012-11-09T16:27:06.363
> 
> 标签：c#, events, paint

我正在尝试在 C# 中做一个小绘图程序。到目前为止一切正常，唯一的问题是当我足够快地移动鼠标时，应该有实线的地方会出现间隙。我已经尝试了从双缓冲到减少 mouse_move 事件间隔的所有方法（我实际上没有找到任何方法来做到这一点，我认为这对系统上的其他进程也很不利^^）

你能在这里指出我正确的方向吗？我尝试覆盖面板的绘制方法，但是当我尝试这个时，似乎什么也没发生。

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Paint
{
    public partial class Form1 : Form
    {

        bool paint;
        SolidBrush color;
        //size of brush
        int pinselGröße;
        List<Point> pointListe;

        public Form1 ()
        {
            InitializeComponent ();
            pointListe = new List<Point>();
            paint = false;
            color = new SolidBrush ( Color.Black );
            //get brush size from combobox 
            pinselGröße = Convert.ToInt32 ( nudBrushSize.Value );
        }

        private void btnExit_Click ( object sender, EventArgs e )
        {
            this.Close ();
        }

        private void btnClear_Click ( object sender, EventArgs e )
        {
            Graphics gfx = pnlCanvas.CreateGraphics ();
            gfx.Clear ( pnlCanvas.BackColor );
        }

        private void pnlCanvas_MouseDown ( object sender, MouseEventArgs e )
        {
            paint = true;
            Graphics grfx = pnlCanvas.CreateGraphics ();
            //draw a rectangle with brush "color" and pinselGröße as the brush size
            grfx.FillRectangle ( color, e.X, e.Y, pinselGröße, pinselGröße );  
        }

        private void pnlCanvas_MouseMove ( object sender, MouseEventArgs e )
        {
            if ( paint )
            {
                //Graphics grfx = pnlCanvas.CreateGraphics();  
                ////put old position of mouse into variable
                //int altePosX = e.X;
                //int altePosY = e.Y;
                ////grfx.FillEllipse ( color, e.X, e.Y, pinselGröße, pinselGröße );
                //grfx.FillRectangle(color, e.X, e.Y, pinselGröße, pinselGröße);
                //grfx.Dispose();
                pointListe.Add(e.Location);
                pnlCanvas.Invalidate();
            }
        }

        private void pnlCanvas_Paint(PaintEventArgs e)
        {

            e.Graphics.DrawLines(new Pen(color), pointListe.ToArray());
        }

        private void pnlCanvas_MouseUp ( object sender, MouseEventArgs e )
        {
            paint = false;
        }

        private void nudBrushSize_ValueChanged ( object sender, EventArgs e )

            //when value of combobox changes, read value into brush size variable
            pinselGröße = Convert.ToInt32 ( nudBrushSize.Value );
        }

        private void cmbColor_SelectedIndexChanged ( object sender, EventArgs e )
        {            
            int index = cmbColor.SelectedIndex;
            color.Dispose ();
            switch ( index )
            {
                case 0:
                    {
                        color = new SolidBrush ( Color.Black );
                        break;
                    }
                case 1:
                    {
                        Console.WriteLine ( "Geht" );
                        color = new SolidBrush ( Color.Red );
                        break;
                    }
                case 2:
                    {
                        color = new SolidBrush ( Color.Blue );
                        break;
                    }
                case 3:
                    {
                        color = new SolidBrush ( Color.Green );
                        break;
                    }
            }
        }

    }
} 
```

当我这样做时：

```
private void pnlCanvas_MouseMove ( object sender, MouseEventArgs e )
        {
            if ( paint )
            {
                Graphics grfx = pnlCanvas.CreateGraphics();
                ////put old position of mouse into variable
                int altePosX = e.X;
                int altePosY = e.Y;
                //grfx.FillEllipse ( color, e.X, e.Y, pinselGröße, pinselGröße );
                grfx.FillRectangle(color, e.X, e.Y, pinselGröße, pinselGröße);
                grfx.Dispose();
                //pointListe.Add(e.Location);
                //pnlCanvas.Invalidate();
            }
        }

        //private void pnlCanvas_Paint(PaintEventArgs e)
        //{
        //    Console.Write("mjsda2");
        //    e.Graphics.DrawLines(new Pen(color), pointListe.ToArray());
        //} 
```

我明白了：

![在此处输入图像描述](../Images/fceee4f04a9b6518af235c43a2a4cfec.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:48:27.127

我不确定我们要在绘图模式下使用哪个，所以这里有两个版本：

另外值得注意的是，您的绘画事件处理程序的签名错误，因此可能没有连接到 pnlCanvas。

在执行绘制代码时，您应该（几乎）永远不需要调用`CreateGraphics`- 它通常是“您做错了”的标志。

**这将允许您通过单击点来绘制线条：**

```
public partial class Form1 : Form
{

    SolidBrush color;
    List<Point> pointListe;
    Point _mousePoint;

    public Form1()
    {
        InitializeComponent();
        pointListe = new List<Point>();
        color = new SolidBrush(Color.Black);
    }

    private void btnClear_Click(object sender, EventArgs e)
    {
        pointListe.Clear();
        pnlCanvas.Invalidate();
    }

    private void pnlCanvas_MouseDown(object sender, MouseEventArgs e)
    {
        pointListe.Add(e.Location);
    }

    private void pnlCanvas_MouseMove(object sender, MouseEventArgs e)
    {
        _mousePoint = e.Location;
        pnlCanvas.Invalidate();
    }

    private void pnlCanvas_Paint(object sender, PaintEventArgs e)
    {
        if (pointListe.Count > 1)
        {
            e.Graphics.DrawLines(new Pen(color), pointListe.ToArray());
        }

        if (pointListe.Any())
        {
            e.Graphics.DrawLine(new Pen(color), pointListe.Last(), _mousePoint);
        }
    }

} 
```

**这将画出一条连续的线：**

```
public partial class Form1 : Form
{

    SolidBrush color;
    List<List<Point>> _lines;
    Boolean _mouseDown;

    public Form1()
    {
        InitializeComponent();
        _lines = new List<List<Point>>();
        color = new SolidBrush(Color.Black);
        _mouseDown = false;
    }

    private void btnClear_Click(object sender, EventArgs e)
    {
        _lines.Clear();
        pnlCanvas.Invalidate();
    }

    private void pnlCanvas_MouseDown(object sender, MouseEventArgs e)
    {
        _mouseDown = true;
        _lines.Add(new List<Point>());
    }

    private void pnlCanvas_MouseMove(object sender, MouseEventArgs e)
    {
        if (_mouseDown)
        {
            _lines.Last().Add(e.Location);
            pnlCanvas.Invalidate();
        }
    }

    private void pnlCanvas_MouseUp(object sender, MouseEventArgs e)
    {
        _mouseDown = false;
    }

    private void pnlCanvas_Paint(object sender, PaintEventArgs e)
    {
        foreach (var lineSet in _lines)
        {
            if (lineSet.Count > 1)
            {
                e.Graphics.DrawLines(new Pen(color), lineSet .ToArray());
            }   
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:31:19.490

我不清楚差距发生在哪里，但你不应该在 MouseDown 事件中添加你的第一点吗？这能解释你看到的差距类型吗？

为什么要在 MouseDown 事件中填充一个矩形？

否则，也许是这些差距的截图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:48:10.960

Mousemove 事件将跳过 - 鼠标实际上可以移动得非常快，比事件更快，并且您的应用程序可以跟上。结果，您不会得到一个连续的鼠标移动流，每个像素一个。

您需要做的是跟踪您在上一次鼠标移动中获得的上一个位置，然后从上一个位置到当前位置绘制一条线，而不是一个点。除非用户疯狂地快速移动鼠标，否则这将近似鼠标移动得足够好，以至于您不会注意到它并没有准确地跟踪每个像素。